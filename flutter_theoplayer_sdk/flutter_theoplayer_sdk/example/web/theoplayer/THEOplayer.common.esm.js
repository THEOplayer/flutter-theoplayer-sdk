/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 9.7.0
 Created: 2025-07-03T08:11:54.377Z
 */
var El,f,Nt,Il,Mt,Rl,Pl,Dl,y,Nl,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==s?s:"undefined"!=typeof global?global:this,s=a.window,h=a.document,Ll=a.location,Bl=a.navigator,u=a.setTimeout,c=a.clearTimeout,v=a.setInterval,p=a.clearInterval,m=a.Error,g=a.TypeError,w=(a.SyntaxError,a.Object),_=a.Math,x=a.parseInt,C=a.parseFloat,S=a.isNaN,j=a.Uint8Array,Ol=a.Worker,Fl=(a.WorkerGlobalScope,a.XMLHttpRequest),Vl=w.create,Wl=w.defineProperty,Ul=w.getOwnPropertyDescriptor,Gl=w.getOwnPropertyNames,Zl=w.getPrototypeOf,Hl=w.prototype.hasOwnProperty,Ke=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Qs=(t,e,i)=>(i=null!=t?Vl(Zl(t)):{},((t,e,i,s)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let n of Gl(e))Hl.call(t,n)||n===i||Wl(t,n,{get:()=>e[n],enumerable:!(s=Ul(e,n))||s.enumerable});return t})(!e&&t&&t.__esModule?i:Wl(i,"default",{value:t,enumerable:!0}),t)),r=(y=()=>{"use strict";if("function"==typeof Symbol&&Symbol.iterator)El=Symbol,f=null!=(Rl=Symbol.for)?Rl:Symbol,Nt=Symbol.iterator,Il=null!=(Pl=Symbol.dispose)?Pl:f("Symbol.dispose"),Mt=null!=(Dl=Symbol.asyncDispose)?Dl:f("Symbol.asyncDispose");else{let t=0;El=function(e){return"ul"+e+"_"+ ++t},Nt=(f=function(t){return"ul"+t})("Symbol.iterator"),Il=f("Symbol.dispose"),Mt=f("Symbol.asyncDispose"),El.for=f,El.iterator=Nt,El.dispose=Il,El.asyncDispose=Mt}},()=>(y&&(Nl=y(y=0)),Nl)),Xl=Ke(((t,e)=>{r(),function(i,s){"object"==typeof t&&void 0!==e?s(t):"function"==typeof define&&define.amd?define(["exports"],s):s((i=i||self).WebStreamsPolyfill={})}(t,(function(t){"use strict";var e="function"==typeof El&&"symbol"==typeof Nt?El:function(t){return"Symbol("+t+")"};function i(){}var s=Number.isNaN||function(t){return t!=t},n=i;function r(t){return"object"==typeof t&&null!==t||"function"==typeof t}function o(t){return t.slice()}function h(t,e,i,s,n){new j(t).set(new j(i,s,n),e)}function a(t){return!1!==function(t){if("number"!=typeof t)return!1;if(s(t))return!1;if(t<0)return!1;return!0}(t)&&t!==1/0}function u(t,e,i){if("function"!=typeof t)throw new g("Argument is not a function");return Function.prototype.apply.call(t,e,i)}function c(t,e,i,s){var n=t[e];if(void 0!==n){if("function"!=typeof n)throw new g(n+" is not a method");switch(i){case 0:return function(){return d(n,t,s)};case 1:return function(e){var i=[e].concat(s);return d(n,t,i)}}}return function(){return T(void 0)}}function l(t,e,i){var s=t[e];if(void 0!==s)return u(s,t,i)}function d(t,e,i){try{return T(u(t,e,i))}catch(t){return k(t)}}function f(t){if(t=Number(t),s(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function v(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new g("size property of a queuing strategy must be a function");return function(e){return t(e)}}var p=Promise,y=Promise.prototype.then,b=Promise.resolve.bind(p),A=Promise.reject.bind(p);function S(t){return new p(t)}function T(t){return b(t)}function k(t){return A(t)}function E(t,e,i){return y.call(t,e,i)}function x(t,e,i){E(E(t,e,i),void 0,n)}function I(t,e){x(t,e)}function R(t,e){x(t,void 0,e)}function C(t,e,i){return E(t,e,i)}function P(t){E(t,void 0,n)}var D=function(){function t(){this.hd=0,this.Ed=0,this.Id={Rd:[],Dd:void 0},this.Nd=this.Id,this.hd=0,this.Ed=0}return w.defineProperty(t.prototype,"length",{get:function(){return this.Ed},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var e=this.Nd,i=e;16383===e.Rd.length&&(i={Rd:[],Dd:void 0}),e.Rd.push(t),i!==e&&(this.Nd=i,e.Dd=i),++this.Ed},t.prototype.shift=function(){var t=this.Id,e=t,i=this.hd,s=i+1,n=t.Rd,r=n[i];return 16384===s&&(e=t.Dd,s=0),--this.Ed,this.hd=s,t!==e&&(this.Id=e),n[i]=void 0,r},t.prototype.forEach=function(t){for(var e=this.hd,i=this.Id,s=i.Rd;!(e===s.length&&void 0===i.Dd||e===s.length&&(e=0,0===(s=(i=i.Dd).Rd).length));)t(s[e]),++e},t.prototype.peek=function(){var t=this.Id,e=this.hd;return t.Rd[e]},t}();function N(t,e,i){var s=null;!0===i&&(s=w.prototype);var n=w.create(s);return n.value=t,n.done=e,n}function M(t,e){t.Ld=!0,t.Bd=e,e.Od=t,"readable"===e.Fa?F(t):"closed"===e.Fa?function(t){F(t),U(t)}(t):V(t,e.Fd)}function L(t,e){return qe(t.Bd,e)}function B(t){"readable"===t.Bd.Fa?W(t,new g("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,e){V(t,e)}(t,new g("Reader was released and can no longer be used to monitor the stream's closedness")),t.Bd.Od=void 0,t.Bd=void 0}function O(t){return new g("Cannot "+t+" a stream using a released reader")}function F(t){t.Vd=S((function(e,i){t.Wd=e,t.Ud=i}))}function V(t,e){F(t),W(t,e)}function W(t,e){P(t.Vd),t.Ud(e),t.Wd=void 0,t.Ud=void 0}function U(t){t.Wd(void 0),t.Wd=void 0,t.Ud=void 0}var G=e("[[CancelSteps]]"),Z=e("[[PullSteps]]");function H(t,e){void 0===e&&(e=!1);var i=new J(t);return i.Ld=e,i}function X(t){return S((function(e,i){var s={Gd:e,Zd:i};t.Od.Hd.push(s)}))}function z(t,e,i){var s=t.Od;s.Hd.shift().Gd(N(e,i,s.Ld))}function q(t){return t.Od.Hd.length}function Y(t){var e=t.Od;return void 0!==e&&!!$(e)}var K,Q,J=function(){function t(t){if(!1===Xe(t))throw new g("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===ze(t))throw new g("This stream has already been locked for exclusive reading by another reader");M(this,t),this.Hd=new D}return w.defineProperty(t.prototype,"closed",{get:function(){return $(this)?this.Vd:k(et("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return $(this)?void 0===this.Bd?k(O("cancel")):L(this,t):k(et("cancel"))},t.prototype.read=function(){return $(this)?void 0===this.Bd?k(O("read from")):tt(this):k(et("read"))},t.prototype.releaseLock=function(){if(!$(this))throw et("releaseLock");if(void 0!==this.Bd){if(this.Hd.length>0)throw new g("Tried to release a reader lock when that reader has pending read() calls un-settled");B(this)}},t}();function $(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Hd")}function tt(t){var e=t.Bd;return e.Xd=!0,"closed"===e.Fa?T(N(void 0,!0,t.Ld)):"errored"===e.Fa?k(e.Fd):e.zd[Z]()}function et(t){return new g("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof e.asyncIterator&&((K={})[e.asyncIterator]=function(){return this},Q=K,w.defineProperty(Q,e.asyncIterator,{enumerable:!1}));var it={next:function(){if(!1===st(this))return k(nt("next"));var t=this.qd;return void 0===t.Bd?k(O("iterate")):C(tt(t),(function(e){var i=e.done;return i&&B(t),N(e.value,i,!0)}))},return:function(t){if(!1===st(this))return k(nt("next"));var e=this.qd;if(void 0===e.Bd)return k(O("finish iterating"));if(e.Hd.length>0)return k(new g("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.Yd){var i=L(e,t);return B(e),C(i,(function(){return N(t,!0,!0)}))}return B(e),T(N(t,!0,!0))}};function st(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"qd")}function nt(t){return new g("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function rt(t){var e=t.Kd.shift();return t.Qd-=e.size,t.Qd<0&&(t.Qd=0),e.value}function ot(t,e,i){if(!a(i=Number(i)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.Kd.push({value:e,size:i}),t.Qd+=i}function ht(t){t.Kd=new D,t.Qd=0}void 0!==Q&&w.setPrototypeOf(it,Q),w.defineProperty(it,"next",{enumerable:!1}),w.defineProperty(it,"return",{enumerable:!1});var at=e("[[AbortSteps]]"),ut=e("[[ErrorSteps]]"),ct=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),dt(this);var i=e.size,s=e.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=v(i);void 0===s&&(s=1),function(t,e,i,s){var n=w.create(Ct.prototype);function r(){return l(e,"start",[n])}var o=c(e,"write",1,[n]),h=c(e,"close",0,[]),a=c(e,"abort",1,[]);Pt(t,n,r,o,h,a,i,s)}(this,t,s=f(s),n)}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===ft(this))throw Vt("locked");return _t(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===ft(this)?k(Vt("abort")):!0===_t(this)?k(new g("Cannot abort a stream that already has a writer")):vt(this,t)},t.prototype.close=function(){return!1===ft(this)?k(Vt("close")):!0===_t(this)?k(new g("Cannot close a stream that already has a writer")):!0===yt(this)?k(new g("Cannot close an already-closing stream")):gt(this)},t.prototype.getWriter=function(){if(!1===ft(this))throw Vt("getWriter");return lt(this)},t}();function lt(t){return new St(t)}function dt(t){t.Fa="writable",t.Fd=void 0,t.Jd=void 0,t.$d=void 0,t.tf=new D,t.ef=void 0,t.nf=void 0,t.rf=void 0,t.hf=void 0,t.uf=!1}function ft(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"$d")}function _t(t){return void 0!==t.Jd}function vt(t,e){var i=t.Fa;if("closed"===i||"errored"===i)return T(void 0);if(void 0!==t.hf)return t.hf.cf;var s=!1;"erroring"===i&&(s=!0,e=void 0);var n=S((function(i,n){t.hf={cf:void 0,Gd:i,Zd:n,lf:e,df:s}}));return t.hf.cf=n,!1===s&&pt(t,e),n}function gt(t){var e=t.Fa;if("closed"===e||"errored"===e)return k(new g("The stream (in "+e+" state) is not in the writable state and cannot be closed"));var i=S((function(e,i){var s={Gd:e,Zd:i};t.nf=s})),s=t.Jd;return void 0!==s&&!0===t.uf&&"writable"===e&&jt(s),function(t){ot(t,"close",0),Lt(t)}(t.$d),i}function mt(t,e){"writable"!==t.Fa?wt(t):pt(t,e)}function pt(t,e){var i=t.$d;t.Fa="erroring",t.Fd=e;var s=t.Jd;void 0!==s&&xt(s,e),!1===function(t){if(void 0===t.ef&&void 0===t.rf)return!1;return!0}(t)&&!0===i._f&&wt(t)}function wt(t){t.Fa="errored",t.$d[ut]();var e=t.Fd;if(t.tf.forEach((function(t){t.Zd(e)})),t.tf=new D,void 0!==t.hf){var i=t.hf;if(t.hf=void 0,!0===i.df)return i.Zd(e),void bt(t);x(t.$d[at](i.lf),(function(){i.Gd(),bt(t)}),(function(e){i.Zd(e),bt(t)}))}else bt(t)}function yt(t){return void 0!==t.nf||void 0!==t.rf}function bt(t){void 0!==t.nf&&(t.nf.Zd(t.Fd),t.nf=void 0);var e=t.Jd;void 0!==e&&Ht(e,t.Fd)}function At(t,e){var i=t.Jd;void 0!==i&&e!==t.uf&&(!0===e?function(t){zt(t)}(i):jt(i)),t.uf=e}var St=function(){function t(t){if(!1===ft(t))throw new g("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===_t(t))throw new g("This stream has already been locked for exclusive writing by another writer");this.vf=t,t.Jd=this;var e=t.Fa;if("writable"===e)!1===yt(t)&&!0===t.uf?zt(this):Yt(this),Gt(this);else if("erroring"===e)qt(this,t.Fd),Gt(this);else if("closed"===e)Yt(this),function(t){Gt(t),Xt(t)}(this);else{var i=t.Fd;qt(this,i),Zt(this,i)}}return w.defineProperty(t.prototype,"closed",{get:function(){return!1===Tt(this)?k(Wt("closed")):this.Vd},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===Tt(this))throw Wt("desiredSize");if(void 0===this.vf)throw Ut("desiredSize");return function(t){var e=t.vf,i=e.Fa;if("errored"===i||"erroring"===i)return null;if("closed"===i)return 0;return Mt(e.$d)}(this)},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"ready",{get:function(){return!1===Tt(this)?k(Wt("ready")):this.gf},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===Tt(this)?k(Wt("abort")):void 0===this.vf?k(Ut("abort")):function(t,e){var i=t.vf;return vt(i,e)}(this,t)},t.prototype.close=function(){if(!1===Tt(this))return k(Wt("close"));var t=this.vf;return void 0===t?k(Ut("close")):!0===yt(t)?k(new g("Cannot close an already-closing stream")):kt(this)},t.prototype.releaseLock=function(){if(!1===Tt(this))throw Wt("releaseLock");void 0!==this.vf&&It(this)},t.prototype.write=function(t){return!1===Tt(this)?k(Wt("write")):void 0===this.vf?k(Ut("write to")):Rt(this,t)},t}();function Tt(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"vf")}function kt(t){return gt(t.vf)}function Et(t,e){"pending"===t.mf?Ht(t,e):function(t,e){Zt(t,e)}(t,e)}function xt(t,e){"pending"===t.pf?Kt(t,e):function(t,e){qt(t,e)}(t,e)}function It(t){var e=t.vf,i=new g("Writer was released and can no longer be used to monitor the stream's closedness");xt(t,i),Et(t,i),e.Jd=void 0,t.vf=void 0}function Rt(t,e){var i=t.vf,s=i.$d,n=function(t,e){try{return t.wf(e)}catch(e){return Bt(t,e),1}}(s,e);if(i!==t.vf)return k(Ut("write to"));var r=i.Fa;if("errored"===r)return k(i.Fd);if(!0===yt(i)||"closed"===r)return k(new g("The stream is closing or closed and cannot be written to"));if("erroring"===r)return k(i.Fd);var o=function(t){return S((function(e,i){var s={Gd:e,Zd:i};t.tf.push(s)}))}(i);return function(t,e,i){var s={chunk:e};try{ot(t,s,i)}catch(e){return void Bt(t,e)}var n=t.yf;if(!1===yt(n)&&"writable"===n.Fa){At(n,Ot(t))}Lt(t)}(s,e,n),o}var Ct=function(){function t(){throw new g("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){if(!r(t))return!1;if(!w.prototype.hasOwnProperty.call(t,"yf"))return!1;return!0}(this))throw new g("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.yf.Fa&&Ft(this,t)},t.prototype[at]=function(t){var e=this.bf(t);return Dt(this),e},t.prototype[ut]=function(){ht(this)},t}();function Pt(t,e,i,s,n,r,o,h){e.yf=t,t.$d=e,e.Kd=void 0,e.Qd=void 0,ht(e),e._f=!1,e.wf=h,e.Af=o,e.Sf=s,e.Tf=n,e.bf=r;var a=Ot(e);At(t,a),x(T(i()),(function(){e._f=!0,Lt(e)}),(function(i){e._f=!0,mt(t,i)}))}function Dt(t){t.Sf=void 0,t.Tf=void 0,t.bf=void 0,t.wf=void 0}function Mt(t){return t.Af-t.Qd}function Lt(t){var e=t.yf;if(!1!==t._f&&void 0===e.ef)if("erroring"!==e.Fa){if(0!==t.Kd.length){var i=function(t){return t.Kd.peek().value}(t);"close"===i?function(t){var e=t.yf;(function(t){t.rf=t.nf,t.nf=void 0})(e),rt(t);var i=t.Tf();Dt(t),x(i,(function(){!function(t){t.rf.Gd(void 0),t.rf=void 0,"erroring"===t.Fa&&(t.Fd=void 0,void 0!==t.hf&&(t.hf.Gd(),t.hf=void 0)),t.Fa="closed";var e=t.Jd;void 0!==e&&Xt(e)}(e)}),(function(t){!function(t,e){t.rf.Zd(e),t.rf=void 0,void 0!==t.hf&&(t.hf.Zd(e),t.hf=void 0),mt(t,e)}(e,t)}))}(t):function(t,e){var i=t.yf;!function(t){t.ef=t.tf.shift()}(i);var s=t.Sf(e);x(s,(function(){!function(t){t.ef.Gd(void 0),t.ef=void 0}(i);var e=i.Fa;if(rt(t),!1===yt(i)&&"writable"===e){var s=Ot(t);At(i,s)}Lt(t)}),(function(e){"writable"===i.Fa&&Dt(t),function(t,e){t.ef.Zd(e),t.ef=void 0,mt(t,e)}(i,e)}))}(t,i.chunk)}}else wt(e)}function Bt(t,e){"writable"===t.yf.Fa&&Ft(t,e)}function Ot(t){return Mt(t)<=0}function Ft(t,e){var i=t.yf;Dt(t),pt(i,e)}function Vt(t){return new g("WritableStream.prototype."+t+" can only be used on a WritableStream")}function Wt(t){return new g("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function Ut(t){return new g("Cannot "+t+" a stream using a released writer")}function Gt(t){t.Vd=S((function(e,i){t.Wd=e,t.Ud=i,t.mf="pending"}))}function Zt(t,e){Gt(t),Ht(t,e)}function Ht(t,e){P(t.Vd),t.Ud(e),t.Wd=void 0,t.Ud=void 0,t.mf="rejected"}function Xt(t){t.Wd(void 0),t.Wd=void 0,t.Ud=void 0,t.mf="resolved"}function zt(t){t.gf=S((function(e,i){t.kf=e,t.Ef=i})),t.pf="pending"}function qt(t,e){zt(t),Kt(t,e)}function Yt(t){zt(t),jt(t)}function Kt(t,e){P(t.gf),t.Ef(e),t.kf=void 0,t.Ef=void 0,t.pf="rejected"}function jt(t){t.kf(void 0),t.kf=void 0,t.Ef=void 0,t.pf="fulfilled"}function Qt(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var Jt="undefined"!=typeof DOMException?DOMException:void 0;var $t,te=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}(Jt)?Jt:(($t=function(t,e){this.message=t||"",this.name=e||"Error",m.captureStackTrace&&m.captureStackTrace(this,this.constructor)}).prototype=w.create(m.prototype),w.defineProperty($t.prototype,"constructor",{value:$t,writable:!0,configurable:!0}),$t);function ee(t,e,s,n,r,o){var h=H(t),a=lt(e);t.Xd=!0;var u=!1,c=T(void 0);return S((function(l,d){var f,_,v,m;if(void 0!==o){if(f=function(){var i=new te("Aborted","AbortError"),s=[];!1===n&&s.push((function(){return"writable"===e.Fa?vt(e,i):T(void 0)})),!1===r&&s.push((function(){return"readable"===t.Fa?qe(t,i):T(void 0)})),b((function(){return Promise.all(s.map((function(t){return t()})))}),!0,i)},!0===o.aborted)return void f();o.addEventListener("abort",f)}if(y(t,h.Vd,(function(t){!1===n?b((function(){return vt(e,t)}),!0,t):A(!0,t)})),y(e,a.Vd,(function(e){!1===r?b((function(){return qe(t,e)}),!0,e):A(!0,e)})),_=t,v=h.Vd,m=function(){!1===s?b((function(){return function(t){var e=t.vf,i=e.Fa;return!0===yt(e)||"closed"===i?T(void 0):"errored"===i?k(e.Fd):kt(t)}(a)})):A()},"closed"===_.Fa?m():I(v,m),!0===yt(e)||"closed"===e.Fa){var p=new g("the destination writable stream closed before all data could be piped to it");!1===r?b((function(){return qe(t,p)}),!0,p):A(!0,p)}function w(){var t=c;return E(c,(function(){return t!==c?w():void 0}))}function y(t,e,i){"errored"===t.Fa?i(t.Fd):R(e,i)}function b(t,i,s){function n(){x(t(),(function(){return C(i,s)}),(function(t){return C(!0,t)}))}!0!==u&&(u=!0,"writable"===e.Fa&&!1===yt(e)?I(w(),n):n())}function A(t,i){!0!==u&&(u=!0,"writable"===e.Fa&&!1===yt(e)?I(w(),(function(){return C(t,i)})):C(t,i))}function C(t,e){It(a),B(h),void 0!==o&&o.removeEventListener("abort",f),t?d(e):l(void 0)}P(S((function(t,e){!function s(n){n?t():E(!0===u?T(!0):E(a.gf,(function(){return E(tt(h),(function(t){return!0===t.done||(c=E(Rt(a,t.value),void 0,i),!1)}))})),s,e)}(!1)})))}))}var ie=function(){function t(){throw new g}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===se(this))throw fe("desiredSize");return ce(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===se(this))throw fe("close");if(!1===le(this))throw new g("The stream is not in a state that permits close");he(this)},t.prototype.enqueue=function(t){if(!1===se(this))throw fe("enqueue");if(!1===le(this))throw new g("The stream is not in a state that permits enqueue");return ae(this,t)},t.prototype.error=function(t){if(!1===se(this))throw fe("error");ue(this,t)},t.prototype[G]=function(t){ht(this);var e=this.xf(t);return oe(this),e},t.prototype[Z]=function(){var t=this.If;if(this.Kd.length>0){var e=rt(this);return!0===this.Rf&&0===this.Kd.length?(oe(this),Ye(t)):ne(this),T(N(e,!1,t.Od.Ld))}var i=X(t);return ne(this),i},t}();function se(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"If")}function ne(t){!1!==re(t)&&(!0!==t.Cf?(t.Cf=!0,x(t.Pf(),(function(){t.Cf=!1,!0===t.Df&&(t.Df=!1,ne(t))}),(function(e){ue(t,e)}))):t.Df=!0)}function re(t){var e=t.If;return!1!==le(t)&&(!1!==t._f&&(!0===ze(e)&&q(e)>0||ce(t)>0))}function oe(t){t.Pf=void 0,t.xf=void 0,t.wf=void 0}function he(t){var e=t.If;t.Rf=!0,0===t.Kd.length&&(oe(t),Ye(e))}function ae(t,e){var i=t.If;if(!0===ze(i)&&q(i)>0)z(i,e,!1);else{var s=void 0;try{s=t.wf(e)}catch(e){throw ue(t,e),e}try{ot(t,e,s)}catch(e){throw ue(t,e),e}}ne(t)}function ue(t,e){var i=t.If;"readable"===i.Fa&&(ht(t),oe(t),Ke(i,e))}function ce(t){var e=t.If.Fa;return"errored"===e?null:"closed"===e?0:t.Af-t.Qd}function le(t){var e=t.If.Fa;return!1===t.Rf&&"readable"===e}function de(t,e,i,s,n,r,o){e.If=t,e.Kd=void 0,e.Qd=void 0,ht(e),e._f=!1,e.Rf=!1,e.Df=!1,e.Cf=!1,e.wf=o,e.Af=r,e.Pf=s,e.xf=n,t.zd=e,x(T(i()),(function(){e._f=!0,ne(e)}),(function(t){ue(e,t)}))}function fe(t){return new g("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}var _e=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&_.floor(t)===t},ve=function(){function t(){throw new g("ReadableStreamBYOBRequest cannot be used directly")}return w.defineProperty(t.prototype,"view",{get:function(){if(!1===pe(this))throw Me("view");return this.Nf},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===pe(this))throw Me("respond");if(void 0===this.Mf)throw new g("This BYOB request has been invalidated");this.Nf.buffer,function(t,e){if(e=Number(e),!1===a(e))throw new RangeError("bytesWritten must be a finite");Ie(t,e)}(this.Mf,t)},t.prototype.respondWithNewView=function(t){if(!1===pe(this))throw Me("respond");if(void 0===this.Mf)throw new g("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new g("You can only respond with array buffer views");t.buffer,function(t,e){var i=t.Lf.peek();if(i.byteOffset+i.bytesFilled!==e.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.byteLength!==e.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");i.buffer=e.buffer,Ie(t,e.byteLength)}(this.Mf,t)},t}(),ge=function(){function t(){throw new g("ReadableByteStreamController constructor cannot be used directly")}return w.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===me(this))throw Le("byobRequest");if(void 0===this.Bf&&this.Lf.length>0){var t=this.Lf.peek(),e=new j(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),i=w.create(ve.prototype);!function(t,e,i){t.Mf=e,t.Nf=i}(i,this,e),this.Bf=i}return this.Bf},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===me(this))throw Le("desiredSize");return De(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===me(this))throw Le("close");if(!0===this.Rf)throw new g("The stream has already been closed; do not close it again!");var t=this.Of.Fa;if("readable"!==t)throw new g("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var e=t.Of;if(t.Qd>0)return void(t.Rf=!0);if(t.Lf.length>0){if(t.Lf.peek().bytesFilled>0){var i=new g("Insufficient bytes to fill elements in the given buffer");throw Pe(t,i),i}}Ce(t),Ye(e)}(this)},t.prototype.enqueue=function(t){if(!1===me(this))throw Le("enqueue");if(!0===this.Rf)throw new g("stream is closed or draining");var e=this.Of.Fa;if("readable"!==e)throw new g("The stream (in "+e+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new g("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,e){var i=t.Of,s=e.buffer,n=e.byteOffset,r=e.byteLength,o=s;if(!0===Y(i)){if(0===q(i))Ae(t,o,n,r);else z(i,new j(o,n,r),!1)}else!0===Fe(i)?(Ae(t,o,n,r),xe(t)):Ae(t,o,n,r);we(t)}(this,t)},t.prototype.error=function(t){if(!1===me(this))throw Le("error");Pe(this,t)},t.prototype[G]=function(t){this.Lf.length>0&&(this.Lf.peek().bytesFilled=0);ht(this);var e=this.xf(t);return Ce(this),e},t.prototype[Z]=function(){var t=this.Of;if(this.Qd>0){var e=this.Kd.shift();this.Qd-=e.byteLength,ke(this);var i=void 0;try{i=new j(e.buffer,e.byteOffset,e.byteLength)}catch(t){return k(t)}return T(N(i,!1,t.Od.Ld))}var s=this.Ff;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return k(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:j,readerType:"default"};this.Lf.push(r)}var o=X(t);return we(this),o},t}();function me(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Of")}function pe(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Mf")}function we(t){var e=function(t){var e=t.Of;if("readable"!==e.Fa)return!1;if(!0===t.Rf)return!1;if(!1===t._f)return!1;if(!0===Y(e)&&q(e)>0)return!0;if(!0===Fe(e)&&Oe(e)>0)return!0;var i=De(t);if(i>0)return!0;return!1}(t);!1!==e&&(!0!==t.Cf?(t.Cf=!0,x(t.Pf(),(function(){t.Cf=!1,!0===t.Df&&(t.Df=!1,we(t))}),(function(e){Pe(t,e)}))):t.Df=!0)}function ye(t,e){var i=!1;"closed"===t.Fa&&(i=!0);var s=be(e);"default"===e.readerType?z(t,s,i):function(t,e,i){var s=t.Od,n=s.Vf.shift();n.Gd(N(e,i,s.Ld))}(t,s,i)}function be(t){var e=t.bytesFilled,i=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,e/i)}function Ae(t,e,i,s){t.Kd.push({buffer:e,byteOffset:i,byteLength:s}),t.Qd+=s}function Se(t,e){var i=e.elementSize,s=e.bytesFilled-e.bytesFilled%i,n=_.min(t.Qd,e.byteLength-e.bytesFilled),r=e.bytesFilled+n,o=r-r%i,a=n,u=!1;o>s&&(a=o-e.bytesFilled,u=!0);for(var c=t.Kd;a>0;){var l=c.peek(),d=_.min(a,l.byteLength),f=e.byteOffset+e.bytesFilled;h(e.buffer,f,l.buffer,l.byteOffset,d),l.byteLength===d?c.shift():(l.byteOffset+=d,l.byteLength-=d),t.Qd-=d,Te(t,d,e),a-=d}return u}function Te(t,e,i){Ee(t),i.bytesFilled+=e}function ke(t){0===t.Qd&&!0===t.Rf?(Ce(t),Ye(t.Of)):we(t)}function Ee(t){void 0!==t.Bf&&(t.Bf.Mf=void 0,t.Bf.Nf=void 0,t.Bf=void 0)}function xe(t){for(;t.Lf.length>0;){if(0===t.Qd)return;var e=t.Lf.peek();!0===Se(t,e)&&(Re(t),ye(t.Of,e))}}function Ie(t,e){var i=t.Lf.peek();if("closed"===t.Of.Fa){if(0!==e)throw new g("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,e){e.buffer=e.buffer;var i=t.Of;if(!0===Fe(i))for(;Oe(i)>0;)ye(i,Re(t))}(t,i)}else!function(t,e,i){if(i.bytesFilled+e>i.byteLength)throw new RangeError("bytesWritten out of range");if(Te(t,e,i),!(i.bytesFilled<i.elementSize)){Re(t);var s=i.bytesFilled%i.elementSize;if(s>0){var n=i.byteOffset+i.bytesFilled,r=i.buffer.slice(n-s,n);Ae(t,r,0,r.byteLength)}i.buffer=i.buffer,i.bytesFilled-=s,ye(t.Of,i),xe(t)}}(t,e,i);we(t)}function Re(t){var e=t.Lf.shift();return Ee(t),e}function Ce(t){t.Pf=void 0,t.xf=void 0}function Pe(t,e){var i=t.Of;"readable"===i.Fa&&(!function(t){Ee(t),t.Lf=new D}(t),ht(t),Ce(t),Ke(i,e))}function De(t){var e=t.Of.Fa;return"errored"===e?null:"closed"===e?0:t.Af-t.Qd}function Ne(t,e,i){var s=w.create(ge.prototype);var n=c(e,"pull",0,[s]),r=c(e,"cancel",1,[]),o=e.autoAllocateChunkSize;if(void 0!==o&&(o=Number(o),!1===_e(o)||o<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,e,i,s,n,r,o){e.Of=t,e.Df=!1,e.Cf=!1,e.Bf=void 0,e.Kd=e.Qd=void 0,ht(e),e.Rf=!1,e._f=!1,e.Af=f(r),e.Pf=s,e.xf=n,e.Ff=o,e.Lf=new D,t.zd=e,x(T(i()),(function(){e._f=!0,we(e)}),(function(t){Pe(e,t)}))}(t,s,(function(){return l(e,"start",[s])}),n,r,i,o)}function Me(t){return new g("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function Le(t){return new g("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function Be(t){return S((function(e,i){var s={Gd:e,Zd:i};t.Od.Vf.push(s)}))}function Oe(t){return t.Od.Vf.length}function Fe(t){var e=t.Od;return void 0!==e&&!!We(e)}var Ve=function(){function t(t){if(!Xe(t))throw new g("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===me(t.zd))throw new g("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(ze(t))throw new g("This stream has already been locked for exclusive reading by another reader");M(this,t),this.Vf=new D}return w.defineProperty(t.prototype,"closed",{get:function(){return We(this)?this.Vd:k(Ue("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return We(this)?void 0===this.Bd?k(O("cancel")):L(this,t):k(Ue("cancel"))},t.prototype.read=function(t){return We(this)?void 0===this.Bd?k(O("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?k(new g("view must have non-zero byteLength")):function(t,e){var i=t.Bd;if(i.Xd=!0,"errored"===i.Fa)return k(i.Fd);return function(t,e){var i=t.Of,s=1;e.constructor!==DataView&&(s=e.constructor.BYTES_PER_ELEMENT);var n=e.constructor,r={buffer:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.Lf.length>0)return t.Lf.push(r),Be(i);if("closed"===i.Fa)return T(N(new n(r.buffer,r.byteOffset,0),!0,i.Od.Ld));if(t.Qd>0){if(!0===Se(t,r)){var o=be(r);return ke(t),T(N(o,!1,i.Od.Ld))}if(!0===t.Rf){var h=new g("Insufficient bytes to fill elements in the given buffer");return Pe(t,h),k(h)}}t.Lf.push(r);var a=Be(i);return we(t),a}(i.zd,e)}(this,t)):k(new g("view must be an array buffer view")):k(Ue("read"))},t.prototype.releaseLock=function(){if(!We(this))throw Ue("releaseLock");if(void 0!==this.Bd){if(this.Vf.length>0)throw new g("Tried to release a reader lock when that reader has pending read() calls un-settled");B(this)}},t}();function We(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Vf")}function Ue(t){return new g("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var Ge=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),He(this);var i=e.size,s=e.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==i)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),Ne(this,t,s=f(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=v(i);void 0===s&&(s=1),function(t,e,i,s){var n=w.create(ie.prototype),r=c(e,"pull",0,[n]),o=c(e,"cancel",1,[]);de(t,n,(function(){return l(e,"start",[n])}),r,o,i,s)}(this,t,s=f(s),r)}}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===Xe(this))throw je("locked");return ze(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===Xe(this)?k(je("cancel")):!0===ze(this)?k(new g("Cannot cancel a stream that already has a reader")):qe(this,t)},t.prototype.getReader=function(t){var e=(void 0===t?{}:t).mode;if(!1===Xe(this))throw je("getReader");if(void 0===e)return H(this,!0);if("byob"===(e=String(e)))return function(t,e){void 0===e&&(e=!1);var i=new Ve(t);return i.Ld=e,i}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,e){var i=t.writable,s=t.readable,n=void 0===e?{}:e,r=n.preventClose,o=n.preventAbort,h=n.preventCancel,a=n.signal;if(!1===Xe(this))throw je("pipeThrough");if(!1===ft(i))throw new g("writable argument to pipeThrough must be a WritableStream");if(!1===Xe(s))throw new g("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),o=Boolean(o),h=Boolean(h),void 0!==a&&!Qt(a))throw new g("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===ze(this))throw new g("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===_t(i))throw new g("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return P(ee(this,i,r,o,h,a)),s},t.prototype.pipeTo=function(t,e){var i=void 0===e?{}:e,s=i.preventClose,n=i.preventAbort,r=i.preventCancel,o=i.signal;return!1===Xe(this)?k(je("pipeTo")):!1===ft(t)?k(new g("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===o||Qt(o)?!0===ze(this)?k(new g("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===_t(t)?k(new g("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ee(this,t,s,n,r,o):k(new g("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===Xe(this))throw je("tee");var t=function(t,e){var i,s,n,r,h,a=H(t),u=!1,c=!1,l=!1,d=S((function(t){h=t}));function f(){return!0===u||(u=!0,P(C(tt(a),(function(t){if(u=!1,!0===t.done)return!1===c&&he(n.zd),void(!1===l&&he(r.zd));var e=t.value,i=e,s=e;!1===c&&ae(n.zd,i),!1===l&&ae(r.zd,s)})))),T(void 0)}function _(){}return n=Ze(_,f,(function(e){if(c=!0,i=e,!0===l){var n=o([i,s]),r=qe(t,n);h(r)}return d})),r=Ze(_,f,(function(e){if(l=!0,s=e,!0===c){var n=o([i,s]),r=qe(t,n);h(r)}return d})),R(a.Vd,(function(t){ue(n.zd,t),ue(r.zd,t)})),[n,r]}(this);return o(t)},t.prototype.getIterator=function(t){var e=(void 0===t?{}:t).preventCancel,i=void 0!==e&&e;if(!1===Xe(this))throw je("getIterator");return function(t,e){void 0===e&&(e=!1);var i=H(t),s=w.create(it);return s.qd=i,s.Yd=Boolean(e),s}(this,i)},t}();function Ze(t,e,i,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=w.create(Ge.prototype);return He(r),de(r,w.create(ie.prototype),t,e,i,s,n),r}function He(t){t.Fa="readable",t.Od=void 0,t.Fd=void 0,t.Xd=!1}function Xe(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"zd")}function ze(t){return void 0!==t.Od}function qe(t,e){return t.Xd=!0,"closed"===t.Fa?T(void 0):"errored"===t.Fa?k(t.Fd):(Ye(t),C(t.zd[G](e),i))}function Ye(t){t.Fa="closed";var e=t.Od;void 0!==e&&($(e)&&(e.Hd.forEach((function(t){t.Gd(N(void 0,!0,e.Ld))})),e.Hd=new D),U(e))}function Ke(t,e){t.Fa="errored",t.Fd=e;var i=t.Od;void 0!==i&&($(i)?(i.Hd.forEach((function(t){t.Zd(e)})),i.Hd=new D):(i.Vf.forEach((function(t){t.Zd(e)})),i.Vf=new D),W(i,e))}function je(t){return new g("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof e.asyncIterator&&w.defineProperty(Ge.prototype,e.asyncIterator,{value:Ge.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});var Qe=function(){function t(t){var e=t.highWaterMark;this.highWaterMark=e}return t.prototype.size=function(t){return t.byteLength},t}(),Je=function(){function t(t){var e=t.highWaterMark;this.highWaterMark=e}return t.prototype.size=function(){return 1},t}(),$e=function(){function t(t,e,i){void 0===t&&(t={}),void 0===e&&(e={}),void 0===i&&(i={});var s=e.size,n=e.highWaterMark,r=i.size,o=i.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var h=v(s);if(void 0===n&&(n=1),n=f(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=v(r);void 0===o&&(o=0),o=f(o),function(t,e,i,s,n,r){function o(){return e}function h(e){return function(t,e){var i=t.Wf;if(!0===t.uf){return C(t.Uf,(function(){var s=t.Gf;if("erroring"===s.Fa)throw s.Fd;return ai(i,e)}))}return ai(i,e)}(t,e)}function a(e){return function(t,e){return ei(t,e),T(void 0)}(t,e)}function u(){return function(t){var e=t.Zf,i=t.Wf,s=i.Hf();return oi(i),C(s,(function(){if("errored"===e.Fa)throw e.Fd;var t=e.zd;!0===le(t)&&he(t)}),(function(i){throw ei(t,i),e.Fd}))}(t)}function c(){return function(t){return si(t,!1),t.Uf}(t)}function l(e){return ii(t,e),T(void 0)}t.Gf=function(t,e,i,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var o=w.create(ct.prototype);return dt(o),Pt(o,w.create(Ct.prototype),t,e,i,s,n,r),o}(o,h,u,a,i,s),t.Zf=Ze(o,c,l,n,r),t.uf=void 0,t.Uf=void 0,t.Xf=void 0,si(t,!0),t.Wf=void 0}(this,S((function(t){a=t})),n,h,o,u),function(t,e){var i=w.create(ni.prototype),s=function(t){try{return hi(i,t),T(void 0)}catch(t){return k(t)}},n=e.transform;if(void 0!==n){if("function"!=typeof n)throw new g("transform is not a method");s=function(t){return d(n,e,[t,i])}}var r=c(e,"flush",0,[i]);!function(t,e,i,s){e.zf=t,t.Wf=e,e.qf=i,e.Hf=s}(t,i,s,r)}(this,t);var _=l(t,"start",[this.Wf]);a(_)}return w.defineProperty(t.prototype,"readable",{get:function(){if(!1===ti(this))throw ci("readable");return this.Zf},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"writable",{get:function(){if(!1===ti(this))throw ci("writable");return this.Gf},enumerable:!0,configurable:!0}),t}();function ti(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Wf")}function ei(t,e){ue(t.Zf.zd,e),ii(t,e)}function ii(t,e){oi(t.Wf),Bt(t.Gf.$d,e),!0===t.uf&&si(t,!1)}function si(t,e){void 0!==t.Uf&&t.Xf(),t.Uf=S((function(e){t.Xf=e})),t.uf=e}var ni=function(){function t(){throw new g("TransformStreamDefaultController instances cannot be created directly")}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===ri(this))throw ui("desiredSize");return ce(this.zf.Zf.zd)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===ri(this))throw ui("enqueue");hi(this,t)},t.prototype.error=function(t){if(!1===ri(this))throw ui("error");!function(t,e){ei(t.zf,e)}(this,t)},t.prototype.terminate=function(){if(!1===ri(this))throw ui("terminate");!function(t){var e=t.zf,i=e.Zf.zd;!0===le(i)&&he(i);var s=new g("TransformStream terminated");ii(e,s)}(this)},t}();function ri(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"zf")}function oi(t){t.qf=void 0,t.Hf=void 0}function hi(t,e){var i=t.zf,s=i.Zf.zd;if(!1===le(s))throw new g("Readable side is not in a state that permits enqueue");try{ae(s,e)}catch(t){throw ii(i,t),i.Zf.Fd}var n=function(t){return!0!==re(t)}(s);n!==i.uf&&si(i,!0)}function ai(t,e){return C(t.qf(e),void 0,(function(e){throw ei(t.zf,e),e}))}function ui(t){return new g("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function ci(t){return new g("TransformStream.prototype."+t+" can only be used on a TransformStream")}t.ByteLengthQueuingStrategy=Qe,t.CountQueuingStrategy=Je,t.ReadableStream=Ge,t.TransformStream=$e,t.WritableStream=ct,w.defineProperty(t,"__esModule",{value:!0})}))})),zl=Ke((t=>{"use strict";function e(){const t=Xl();return e=function(){return t},t}r(),w.defineProperty(t,"__esModule",{value:!0}),function(t,e){for(var i in e)w.defineProperty(t,i,{enumerable:!0,get:e[i]})}(t,{ByteLengthQueuingStrategy:function(){return e().ByteLengthQueuingStrategy},CountQueuingStrategy:function(){return e().CountQueuingStrategy},ReadableStream:function(){return e().ReadableStream},TransformStream:function(){return e().TransformStream},WritableStream:function(){return e().WritableStream}})})),ql=Ke(((t,e)=>{r(),function(i,s){"object"==typeof t&&typeof e<"u"?s(t):"function"==typeof define&&define.amd?define(["exports"],s):s((i=typeof globalThis<"u"?globalThis:i||self).millicast={})}(t,(function(t){"use strict";var e,i=w.defineProperty,n=w.defineProperties,r=w.getOwnPropertyDescriptors,o=w.getOwnPropertySymbols,a=w.prototype.hasOwnProperty,c=w.prototype.propertyIsEnumerable,l=(t,e,s)=>e in t?i(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,d=(t,e)=>{for(var i in e||(e={}))a.call(e,i)&&l(t,i,e[i]);if(o)for(var i of o(e))c.call(e,i)&&l(t,i,e[i]);return t},y=(t,e)=>n(t,r(e)),b=(t,e)=>{var i={};for(var s in t)a.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&o)for(var s of o(t))e.indexOf(s)<0&&c.call(t,s)&&(i[s]=t[s]);return i},A=typeof globalThis<"u"?globalThis:typeof s<"u"?s:typeof global<"u"?global:typeof self<"u"?self:{};function T(t){return t&&t.__esModule&&w.prototype.hasOwnProperty.call(t,"default")?t.default:t}var k,E={exports:{}};k=E,function(t){var e,i={VERSION:"1.6.1"},s={},n=function(t,e){return function(){return e.apply(t,arguments)}},r=function(){var t,e,i=arguments,s=i[0];for(e=1;e<i.length;e++)for(t in i[e])!(t in s)&&i[e].hasOwnProperty(t)&&(s[t]=i[e][t]);return s},o=function(t,e){return{value:t,name:e}};i.TRACE=o(1,"TRACE"),i.DEBUG=o(2,"DEBUG"),i.INFO=o(3,"INFO"),i.TIME=o(4,"TIME"),i.WARN=o(5,"WARN"),i.ERROR=o(8,"ERROR"),i.OFF=o(99,"OFF");var h=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};h.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var e=this.context.filterLevel;return t.value>=e.value},trace:function(){this.invoke(i.TRACE,arguments)},debug:function(){this.invoke(i.DEBUG,arguments)},info:function(){this.invoke(i.INFO,arguments)},warn:function(){this.invoke(i.WARN,arguments)},error:function(){this.invoke(i.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(i.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(i.TIME,[t,"end"])},invoke:function(t,i){e&&this.enabledFor(t)&&e(i,r({level:t},this.context))}};var a,u=new h({filterLevel:i.OFF});(a=i).enabledFor=n(u,u.enabledFor),a.trace=n(u,u.trace),a.debug=n(u,u.debug),a.time=n(u,u.time),a.timeEnd=n(u,u.timeEnd),a.info=n(u,u.info),a.warn=n(u,u.warn),a.error=n(u,u.error),a.log=a.info,i.setHandler=function(t){e=t},i.setLevel=function(t){for(var e in u.setLevel(t),s)s.hasOwnProperty(e)&&s[e].setLevel(t)},i.getLevel=function(){return u.getLevel()},i.get=function(t){return s[t]||(s[t]=new h(r({name:t},u.context)))},i.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,e){e.name&&t.unshift("["+e.name+"]")};var e={},s=function(t,e){Function.prototype.apply.call(t,console,e)};return typeof console>"u"?function(){}:function(n,r){n=Array.prototype.slice.call(n);var o,h=console.log;r.level===i.TIME?(o=(r.name?"["+r.name+"] ":"")+n[0],"start"===n[1]?console.time?console.time(o):e[o]=(new Date).getTime():console.timeEnd?console.timeEnd(o):s(h,[o+": "+((new Date).getTime()-e[o])+"ms"])):(r.level===i.WARN&&console.warn?h=console.warn:r.level===i.ERROR&&console.error?h=console.error:r.level===i.INFO&&console.info?h=console.info:r.level===i.DEBUG&&console.debug?h=console.debug:r.level===i.TRACE&&console.trace&&(h=console.trace),t.formatter(n,r),s(h,n))}},i.useDefaults=function(t){i.setLevel(t&&t.defaultLevel||i.DEBUG),i.setHandler(i.createDefaultHandler(t))},i.setDefaults=i.useDefaults,k.exports?k.exports=i:(i.Yf=t.Logger,i.noConflict=function(){return t.Logger=i.Yf,i},t.Logger=i)}(A);const I=T(E.exports),R="0.3.2",P=(null==(e=null==s?void 0:s.navigator)?void 0:e.userAgent)||"No user agent available";let D="",N="",M="",L="",B="",O="",F="",V=0;const W=[];const U=t=>{D=""===D?t:D},G=t=>{N=""===N?t:N},Z=t=>{M=""===M?t:M},H=t=>{L=""===L?t:L},X=t=>{B=""===B?t:B},z=t=>{V=0===V?t:V},q=t=>{O=t},Y=t=>{F=""===F?t:F},K=t=>{60===W.length&&W.shift(),W.push(t)},Q=(t,e)=>{let i;void 0===t&&(t=60),void 0===e&&(e="JSON"),i=!Number.isInteger(t)||t>60||t<=0?60:t;const s={client:"@millicast/millicast-sdk",version:R,timestamp:(new Date).toISOString(),userAgent:P,clusterId:F,accountId:D,streamName:N,subscriberId:M,connection:O,stats:W.slice(-i),connectionDurationMs:(new Date).getTime()-V};return""!==B?s.feedId=B:""!==L&&(s.streamViewId=L),"CMCD"===e?function(t){function e(t,e){return{ts:_.round(e.timestamp)||"",ot:"audio"===t?"a":"v",bl:e.jitterBufferDelay||0,br:_.round(e.bitrateBitsPerSecond||0),pld:e.packetsLostDeltaPerSecond||0,j:e.jitter||0,mtp:e.packetRate||0,mid:e.mid||"",mimeType:e.mimeType||""}}return t.stats=t.stats.reduce(((t,i)=>{const s=0!==i.audio.inbounds.length?i.audio.inbounds.map((t=>e("audio",t))):i.audio.outbounds.map((t=>e("audio",t))),n=0!==i.video.inbounds.length?i.video.inbounds.map((t=>e("video",t))):i.video.outbounds.map((t=>e("video",t)));return t.concat([...s,...n])}),[]),t}(s):s};I.useDefaults({defaultLevel:I.TRACE});const J=["TRACE","DEBUG","INFO","WARN","ERROR"],tt=(t,e)=>{t.unshift("[".concat(e.name||"Global","] ").concat((new Date).toISOString()," - ").concat(e.level.name," -"))},et=(t,e)=>e?t.value>=ot[e].value:t.value>=rt.value,it=I.createDefaultHandler({formatter:tt});I.setHandler(((t,e)=>{((t,e)=>{t=(t=Array.prototype.slice.call(t)).map((t=>"object"==typeof t?JSON.stringify(t):t)),tt(t,e),0!==st?(nt.push(t.join(" ")),nt.length>=st&&(nt=nt.slice(-st))):nt=[]})(t,e),et(e.level,e.name)&&it(t,e);for(const{handler:i,level:s}of ht)e.level.value>=s.value&&i(t,e)}));let st=1e4,nt=[],rt=I.OFF;const ot={},ht=[],at=y(d({},I),{enabledFor:et,getHistory:()=>nt,getHistoryMaxSize:()=>st,setHistoryMaxSize:t=>{st=t},setLevel:t=>{rt=t;for(const e in ot)ot[e]=t},getLevel:()=>rt,get:t=>{ot[t]||(ot[t]=rt);const e=I.get(t);return e.setLevel=e=>{ot[t]=e},e.getLevel=()=>ot[t],e},setHandler:(t,e)=>{ht.push({handler:t,level:e})},diagnose:t=>{let e;void 0===t&&(t={});const i={statsCount:60,historySize:1e3,minLogLevel:"TRACE",statsFormat:"JSON"};"number"==typeof t?(i.statsCount=t,e=i):e=d(d({},i),t);const{statsCount:s,historySize:n,minLogLevel:r,statsFormat:o}=e,h=Q(s,o),a=at.getHistory();if(!Number.isInteger(n)||n<=0)throw new m("Invalid Argument Exception : historySize must be a positive integer.");if(!J.includes(r.toUpperCase()))throw new m('Invalid Argument Exception : the minLogLevel parameter only excepts "trace", "debug", "info", "warn", and "error" as arguments.');if(J.includes(r.toUpperCase())){const t=J.slice(J.indexOf(r.toUpperCase())),e=a.filter((e=>t.some((t=>e.includes(t)))));h.history=e.slice(-n)}return h},JSON:"JSON",CMCD:"CMCD",VERSION:R});var ut,ct={exports:{}},lt="object"==typeof Reflect?Reflect:null,dt=lt&&"function"==typeof lt.apply?lt.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};ut=lt&&"function"==typeof lt.ownKeys?lt.ownKeys:w.getOwnPropertySymbols?function(t){return w.getOwnPropertyNames(t).concat(w.getOwnPropertySymbols(t))}:function(t){return w.getOwnPropertyNames(t)};var ft=Number.isNaN||function(t){return t!=t};function _t(){_t.init.call(this)}ct.exports=_t,ct.exports.once=function(t,e){return new Promise((function(i,s){function n(i){t.removeListener(e,r),s(i)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),i([].slice.call(arguments))}Tt(t,e,r,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&Tt(t,"error",e,i)}(t,n,{once:!0})}))},_t.EventEmitter=_t,_t.prototype.Kf=void 0,_t.prototype.jf=0,_t.prototype.Qf=void 0;var vt=10;function gt(t){if("function"!=typeof t)throw new g('The "listener" argument must be of type Function. Received type '+typeof t)}function mt(t){return void 0===t.Qf?_t.defaultMaxListeners:t.Qf}function pt(t,e,i,s){var n,r,o;if(gt(i),void 0===(r=t.Kf)?(r=t.Kf=w.create(null),t.jf=0):(void 0!==r.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),r=t.Kf),o=r[e]),void 0===o)o=r[e]=i,++t.jf;else if("function"==typeof o?o=r[e]=s?[i,o]:[o,i]:s?o.unshift(i):o.push(i),(n=mt(t))>0&&o.length>n&&!o.warned){o.warned=!0;var h=new m("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=o.length,function(t){console&&console.warn&&console.warn(t)}(h)}return t}function wt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function yt(t,e,i){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=wt.bind(s);return n.listener=i,s.wrapFn=n,n}function bt(t,e,i){var s=t.Kf;if(void 0===s)return[];var n=s[e];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):St(n,n.length)}function At(t){var e=this.Kf;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function St(t,e){for(var i=new Array(e),s=0;s<e;++s)i[s]=t[s];return i}function Tt(t,e,i,s){if("function"==typeof t.on)s.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new g('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function n(r){s.once&&t.removeEventListener(e,n),i(r)}))}}w.defineProperty(_t,"defaultMaxListeners",{enumerable:!0,get:function(){return vt},set:function(t){if("number"!=typeof t||t<0||ft(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");vt=t}}),_t.init=function(){(void 0===this.Kf||this.Kf===w.getPrototypeOf(this).Kf)&&(this.Kf=w.create(null),this.jf=0),this.Qf=this.Qf||void 0},_t.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||ft(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.Qf=t,this},_t.prototype.getMaxListeners=function(){return mt(this)},_t.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var s="error"===t,n=this.Kf;if(void 0!==n)s=s&&void 0===n.error;else if(!s)return!1;if(s){var r;if(e.length>0&&(r=e[0]),r instanceof m)throw r;var o=new m("Unhandled error."+(r?" ("+r.message+")":""));throw o.context=r,o}var h=n[t];if(void 0===h)return!1;if("function"==typeof h)dt(h,this,e);else{var a=h.length,u=St(h,a);for(i=0;i<a;++i)dt(u[i],this,e)}return!0},_t.prototype.addListener=function(t,e){return pt(this,t,e,!1)},_t.prototype.on=_t.prototype.addListener,_t.prototype.prependListener=function(t,e){return pt(this,t,e,!0)},_t.prototype.once=function(t,e){return gt(e),this.on(t,yt(this,t,e)),this},_t.prototype.prependOnceListener=function(t,e){return gt(e),this.prependListener(t,yt(this,t,e)),this},_t.prototype.removeListener=function(t,e){var i,s,n,r,o;if(gt(e),void 0===(s=this.Kf))return this;if(void 0===(i=s[t]))return this;if(i===e||i.listener===e)0==--this.jf?this.Kf=w.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(n=-1,r=i.length-1;r>=0;r--)if(i[r]===e||i[r].listener===e){o=i[r].listener,n=r;break}if(n<0)return this;0===n?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,n),1===i.length&&(s[t]=i[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||e)}return this},_t.prototype.off=_t.prototype.removeListener,_t.prototype.removeAllListeners=function(t){var e,i,s;if(void 0===(i=this.Kf))return this;if(void 0===i.removeListener)return 0===arguments.length?(this.Kf=w.create(null),this.jf=0):void 0!==i[t]&&(0==--this.jf?this.Kf=w.create(null):delete i[t]),this;if(0===arguments.length){var n,r=w.keys(i);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.Kf=w.create(null),this.jf=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this},_t.prototype.listeners=function(t){return bt(this,t,!0)},_t.prototype.rawListeners=function(t){return bt(this,t,!1)},_t.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):At.call(t,e)},_t.prototype.listenerCount=At,_t.prototype.eventNames=function(){return this.jf>0?ut(this.Kf):[]};var kt=ct.exports;const Et=T(kt);var xt={exports:{}};xt.exports=Rt,xt.exports.filter=function(t,e){var i=new It;return Rt(t,i,e),i};var It=kt.EventEmitter;function Rt(t,e,i){Array.isArray(i)||(i=[i]);var s=[];return i.forEach((function(i){var n=function(){var t=[].slice.call(arguments);t.unshift(i),e.emit.apply(e,t)};s.push(n),t.on(i,n)})),function(){i.forEach((function(e,i){t.removeListener(e,s[i])}))}}const Ct=T(xt.exports);var Pt={exports:{}};!function(t,e){var i;self,i=()=>{return t={7:t=>{var e,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};e=i&&"function"==typeof i.ownKeys?i.ownKeys:w.getOwnPropertySymbols?function(t){return w.getOwnPropertyNames(t).concat(w.getOwnPropertySymbols(t))}:function(t){return w.getOwnPropertyNames(t)};var n=Number.isNaN||function(t){return t!=t};function r(){r.init.call(this)}t.exports=r,t.exports.once=function(t,e){return new Promise((function(i,s){function n(i){t.removeListener(e,r),s(i)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),i([].slice.call(arguments))}var o,h;v(t,e,r,{once:!0}),"error"!==e&&(h=n,"function"==typeof(o=t).on&&v(o,"error",h,{once:!0}))}))},r.EventEmitter=r,r.prototype.Kf=void 0,r.prototype.jf=0,r.prototype.Qf=void 0;var o=10;function h(t){if("function"!=typeof t)throw new g('The "listener" argument must be of type Function. Received type '+typeof t)}function a(t){return void 0===t.Qf?r.defaultMaxListeners:t.Qf}function u(t,e,i,s){var n,r,o,u;if(h(i),void 0===(r=t.Kf)?(r=t.Kf=w.create(null),t.jf=0):(void 0!==r.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),r=t.Kf),o=r[e]),void 0===o)o=r[e]=i,++t.jf;else if("function"==typeof o?o=r[e]=s?[i,o]:[o,i]:s?o.unshift(i):o.push(i),(n=a(t))>0&&o.length>n&&!o.warned){o.warned=!0;var c=new m("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=o.length,u=c,console&&console.warn&&console.warn(u)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,e,i){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=c.bind(s);return n.listener=i,s.wrapFn=n,n}function d(t,e,i){var s=t.Kf;if(void 0===s)return[];var n=s[e];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):_(n,n.length)}function f(t){var e=this.Kf;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function _(t,e){for(var i=new Array(e),s=0;s<e;++s)i[s]=t[s];return i}function v(t,e,i,s){if("function"==typeof t.on)s.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new g('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function n(r){s.once&&t.removeEventListener(e,n),i(r)}))}}w.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),r.init=function(){void 0!==this.Kf&&this.Kf!==w.getPrototypeOf(this).Kf||(this.Kf=w.create(null),this.jf=0),this.Qf=this.Qf||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.Qf=t,this},r.prototype.getMaxListeners=function(){return a(this)},r.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,r=this.Kf;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof m)throw o;var h=new m("Unhandled error."+(o?" ("+o.message+")":""));throw h.context=o,h}var a=r[t];if(void 0===a)return!1;if("function"==typeof a)s(a,this,e);else{var u=a.length,c=_(a,u);for(i=0;i<u;++i)s(c[i],this,e)}return!0},r.prototype.addListener=function(t,e){return u(this,t,e,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,e){return u(this,t,e,!0)},r.prototype.once=function(t,e){return h(e),this.on(t,l(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){return h(e),this.prependListener(t,l(this,t,e)),this},r.prototype.removeListener=function(t,e){var i,s,n,r,o;if(h(e),void 0===(s=this.Kf))return this;if(void 0===(i=s[t]))return this;if(i===e||i.listener===e)0==--this.jf?this.Kf=w.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(n=-1,r=i.length-1;r>=0;r--)if(i[r]===e||i[r].listener===e){o=i[r].listener,n=r;break}if(n<0)return this;0===n?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,n),1===i.length&&(s[t]=i[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||e)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var e,i,s;if(void 0===(i=this.Kf))return this;if(void 0===i.removeListener)return 0===arguments.length?(this.Kf=w.create(null),this.jf=0):void 0!==i[t]&&(0==--this.jf?this.Kf=w.create(null):delete i[t]),this;if(0===arguments.length){var n,r=w.keys(i);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.Kf=w.create(null),this.jf=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this},r.prototype.listeners=function(t){return d(this,t,!0)},r.prototype.rawListeners=function(t){return d(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},r.prototype.listenerCount=f,r.prototype.eventNames=function(){return this.jf>0?e(this.Kf):[]}},586:function(t,e,i){var s,n;!function(r){var o,h={VERSION:"1.6.1"},a={},u=function(t,e){return function(){return e.apply(t,arguments)}},c=function(){var t,e,i=arguments,s=i[0];for(e=1;e<i.length;e++)for(t in i[e])!(t in s)&&i[e].hasOwnProperty(t)&&(s[t]=i[e][t]);return s},l=function(t,e){return{value:t,name:e}};h.TRACE=l(1,"TRACE"),h.DEBUG=l(2,"DEBUG"),h.INFO=l(3,"INFO"),h.TIME=l(4,"TIME"),h.WARN=l(5,"WARN"),h.ERROR=l(8,"ERROR"),h.OFF=l(99,"OFF");var d=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};d.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var e=this.context.filterLevel;return t.value>=e.value},trace:function(){this.invoke(h.TRACE,arguments)},debug:function(){this.invoke(h.DEBUG,arguments)},info:function(){this.invoke(h.INFO,arguments)},warn:function(){this.invoke(h.WARN,arguments)},error:function(){this.invoke(h.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"end"])},invoke:function(t,e){o&&this.enabledFor(t)&&o(e,c({level:t},this.context))}};var f,_=new d({filterLevel:h.OFF});(f=h).enabledFor=u(_,_.enabledFor),f.trace=u(_,_.trace),f.debug=u(_,_.debug),f.time=u(_,_.time),f.timeEnd=u(_,_.timeEnd),f.info=u(_,_.info),f.warn=u(_,_.warn),f.error=u(_,_.error),f.log=f.info,h.setHandler=function(t){o=t},h.setLevel=function(t){for(var e in _.setLevel(t),a)a.hasOwnProperty(e)&&a[e].setLevel(t)},h.getLevel=function(){return _.getLevel()},h.get=function(t){return a[t]||(a[t]=new d(c({name:t},_.context)))},h.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,e){e.name&&t.unshift("["+e.name+"]")};var e={},i=function(t,e){Function.prototype.apply.call(t,console,e)};return typeof console>"u"?function(){}:function(s,n){s=Array.prototype.slice.call(s);var r,o=console.log;n.level===h.TIME?(r=(n.name?"["+n.name+"] ":"")+s[0],"start"===s[1]?console.time?console.time(r):e[r]=(new Date).getTime():console.timeEnd?console.timeEnd(r):i(o,[r+": "+((new Date).getTime()-e[r])+"ms"])):(n.level===h.WARN&&console.warn?o=console.warn:n.level===h.ERROR&&console.error?o=console.error:n.level===h.INFO&&console.info?o=console.info:n.level===h.DEBUG&&console.debug?o=console.debug:n.level===h.TRACE&&console.trace&&(o=console.trace),t.formatter(s,n),i(o,s))}},h.useDefaults=function(t){h.setLevel(t&&t.defaultLevel||h.DEBUG),h.setHandler(h.createDefaultHandler(t))},h.setDefaults=h.useDefaults,void 0===(n="function"==typeof(s=h)?s.call(e,i,e,t):s)||(t.exports=n)}()},156:function(t,e,i){var s=this&&this.Jf||(w.create?function(t,e,i,s){void 0===s&&(s=i);var n=w.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),w.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),n=this&&this.$f||function(t,e){for(var i in t)"default"===i||w.prototype.hasOwnProperty.call(e,i)||s(e,t,i)},r=this&&this.t_||function(t){return t&&t.__esModule?t:{default:t}};w.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;var o=i(586);w.defineProperty(e,"Logger",{enumerable:!0,get:function(){return r(o).default}}),n(i(284),e),n(i(280),e),n(i(738),e),n(i(767),e)},738:(t,e)=>{var i,s;w.defineProperty(e,"__esModule",{value:!0}),e.QualityLimitationReason=void 0,(s=i||(e.QualityLimitationReason=i={}))[s.none=0]="none",s[s.cpu=1]="cpu",s[s.bandwidth=2]="bandwidth",s[s.other=3]="other"},280:(t,e)=>{w.defineProperty(e,"__esModule",{value:!0})},767:(t,e)=>{w.defineProperty(e,"__esModule",{value:!0})},185:(t,e)=>{w.defineProperty(e,"__esModule",{value:!0}),e.calculatePacketsLostRatio=e.calculateRate=e.getMediaKind=void 0,e.getMediaKind=t=>{let e=t.kind||t.mediaType;return["audio","video"].includes(e)||"inbound-rtp"!==t.type||(e=t.id.toLocaleLowerCase().includes("video")?"video":"audio"),e},e.calculateRate=(t,e,i,s)=>i&&s?(e-s)/((t-i)/1e3):0,e.calculatePacketsLostRatio=(t,e,i,s)=>0==e?0:(t-(null!=i?i:0))/(e-(null!=s?s:0))},284:function(t,e,i){var s,n,r,o,h,a,u,c,l,d,f,_,m,y,b,A,S=this&&this.e_||function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},T=this&&this.i_||function(t,e,i,s,n){if("m"===s)throw new g("Private method is not writable");if("a"===s&&!n)throw new g("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new g("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},k=this&&this.s_||function(t,e,i,s){if("a"===i&&!s)throw new g("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new g("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},E=this&&this.t_||function(t){return t&&t.__esModule?t:{default:t}};w.defineProperty(e,"__esModule",{value:!0}),e.WebRTCStats=void 0;const x=i(7),I=E(i(586)),R=i(738),C=i(185);class P extends x.EventEmitter{constructor(t){super(),s.add(this),n.set(this,void 0),r.set(this,void 0),o.set(this,void 0),h.set(this,null),a.set(this,void 0),u.set(this,null),this.start=()=>{k(this,a,"f").info("WebRTC statistics collection is starting..."),T(this,u,null,"f"),T(this,h,v(k(this,c,"f"),k(this,r,"f")),"f")},this.stop=()=>{k(this,h,"f")&&(p(k(this,h,"f")),T(this,h,null,"f"),k(this,a,"f").info("WebRTC statistics collection has stopped."))},c.set(this,(()=>S(this,void 0,void 0,(function*(){let t,e;try{k(this,a,"f").trace("Requesting WebRTC statistics..."),t=yield k(this,n,"f").call(this),e=(new Date).toISOString()}catch(t){return k(this,a,"f").error("Problem collecting the WebRTC statistics.",t),void this.emit("error","Problem collecting the WebRTC statistics - ".concat(t))}const i=Array.from(t.values()),r={timestamp:e,input:{audio:[],video:[]},output:{audio:[],video:[]}};k(this,o,"f")&&(r.rawStats=t);for(let e=0;e<w.keys(i).length;e++){const n=i[e];switch(n.type){case"outbound-rtp":const e=n,i=(0,C.getMediaKind)(e);"audio"===i?yield k(this,s,"m",f).call(this,t,e,r):"video"===i&&(yield k(this,s,"m",_).call(this,t,e,r));break;case"inbound-rtp":const o=n;let h=(0,C.getMediaKind)(o);"audio"===h?yield k(this,s,"m",y).call(this,t,o,r):"video"===h&&(yield k(this,s,"m",b).call(this,t,o,r));break;case"candidate-pair":const a=n;a.nominated&&k(this,s,"m",A).call(this,a,r)}}T(this,u,r,"f"),this.emit("stats",r)})))),T(this,a,I.default.get("WebRTCStats"),"f"),T(this,n,t.getStats,"f"),T(this,r,t.getStatsInterval||1e3,"f"),T(this,o,!!t.includeRawStats,"f")}}e.WebRTCStats=P,n=new WeakMap,r=new WeakMap,o=new WeakMap,h=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,s=new WeakSet,l=function(t,e){if(e){const i=t.get(e);if(i)return{mimeType:i.mimeType}}return{}},d=function(t,e,i){return S(this,void 0,void 0,(function*(){var n,r,o,h;const a=(0,C.calculateRate)(e.timestamp,e.bytesSent,null==i?void 0:i.timestamp,null==i?void 0:i.totalBytesSent),u=(0,C.calculateRate)(e.timestamp,e.packetsSent,null==i?void 0:i.timestamp,null==i?void 0:i.totalPacketsSent),c=k(this,s,"m",l).call(this,t,e.codecId);return w.assign({id:e.id,timestamp:e.timestamp,mid:e.mid,totalBytesSent:e.bytesSent,bytesSentDelta:e.bytesSent-(null!==(n=null==i?void 0:i.totalBytesSent)&&void 0!==n?n:0),totalPacketsSent:e.packetsSent,packetsSentDelta:e.packetsSent-(null!==(r=null==i?void 0:i.totalPacketsSent)&&void 0!==r?r:0),bitrate:a,packetRate:u,targetBitrate:e.targetBitrate,retransmittedPacketsSent:e.retransmittedPacketsSent,retransmittedPacketsSentDelta:e.retransmittedPacketsSent-(null!==(o=null==i?void 0:i.retransmittedPacketsSent)&&void 0!==o?o:0),retransmittedBytesSent:e.retransmittedBytesSent,retransmittedBytesSentDelta:e.retransmittedBytesSent-(null!==(h=null==i?void 0:i.retransmittedBytesSent)&&void 0!==h?h:0)},c)}))},f=function(t,e,i){return S(this,void 0,void 0,(function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.output.audio.find((t=>t.id===e.id));if(r&&e.timestamp-r.timestamp<=0)return;const o=yield k(this,s,"m",d).call(this,t,e,r),h=w.assign({},o);i.output.audio.push(h)}))},_=function(t,e,i){return S(this,void 0,void 0,(function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.output.video.find((t=>t.id===e.id));if(r&&e.timestamp-r.timestamp<=0)return;const o=yield k(this,s,"m",d).call(this,t,e,r);let h=R.QualityLimitationReason.none;e.qualityLimitationReason&&(h=e.qualityLimitationReason);const a=w.assign(w.assign({},o),{frameWidth:e.frameWidth,frameHeight:e.frameHeight,framesPerSecond:e.framesPerSecond,framesSent:e.framesSent,qualityLimitationReason:h,qualityLimitationDurations:e.qualityLimitationDurations});i.output.video.push(a)}))},m=function(t,e,i){return S(this,void 0,void 0,(function*(){var n,r;const o=(0,C.calculateRate)(e.timestamp,e.bytesReceived,null==i?void 0:i.timestamp,null==i?void 0:i.totalBytesReceived),h=(0,C.calculateRate)(e.timestamp,e.packetsReceived,null==i?void 0:i.timestamp,null==i?void 0:i.totalPacketsReceived),a=(0,C.calculatePacketsLostRatio)(e.packetsReceived,e.packetsLost,null==i?void 0:i.totalPacketsReceived,null==i?void 0:i.totalPacketsLost),u=(null!==(n=e.packetsLost)&&void 0!==n?n:0)-(null!==(r=null==i?void 0:i.totalPacketsLost)&&void 0!==r?r:0),c=k(this,s,"m",l).call(this,t,e.codecId);return w.assign({id:e.id,timestamp:e.timestamp,mid:e.mid,trackIdentifier:e.trackIdentifier,jitter:e.jitter,jitterBufferDelay:e.jitterBufferDelay,jitterBufferEmittedCount:e.jitterBufferEmittedCount,totalBytesReceived:e.bytesReceived,totalPacketsReceived:e.packetsReceived,totalPacketsLost:e.packetsLost,bitrate:o,packetRate:h,packetLossRatio:a,packetLossDelta:u},c)}))},y=function(t,e,i){return S(this,void 0,void 0,(function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.input.audio.find((t=>t.id===e.id));if(r&&e.timestamp-r.timestamp<=0)return;const o=yield k(this,s,"m",m).call(this,t,e,r);i.input.audio.push(o)}))},b=function(t,e,i){return S(this,void 0,void 0,(function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.input.video.find((t=>t.id===e.id));if(r&&e.timestamp-r.timestamp<=0)return;const o=yield k(this,s,"m",m).call(this,t,e,r),h=w.assign(w.assign({},o),{keyFramesDecoded:e.keyFramesDecoded,frameHeight:e.frameHeight,frameWidth:e.frameWidth,framesDecoded:e.framesDecoded,framesDropped:e.framesDropped,framesPerSecond:e.framesPerSecond,framesReceived:e.framesReceived});i.input.video.push(h)}))},A=function(t,e){e.totalRoundTripTime=t.totalRoundTripTime,e.currentRoundTripTime=t.currentRoundTripTime,e.responsesReceived=t.responsesReceived,e.availableOutgoingBitrate=t.availableOutgoingBitrate,e.availableIncomingBitrate=t.availableIncomingBitrate}}},e={},function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,i),r.exports}(156);var t,e},t.exports=i()}(Pt);var Dt=Pt.exports;const Mt=at.get("PeerConnectionStats"),Lt="stats";class Bt extends Et{init(t){if(this.initialized)return void Mt.warn("PeerConnectionStats.init() has already been called. Automatic initialization occurs when the PeerConnectionStats object is constructed.");Mt.info("Initializing peer connection stats");const e=this.peer;try{this.collection=new Dt.WebRTCStats({getStatsInterval:t,getStats:()=>e.getStats(),includeRawStats:!0}),this.collection.on("stats",(t=>{const e=(t=>{const e=t,{input:i,output:s,rawStats:n}=e,r=b(e,["input","output","rawStats"]);return y(d({},r),{audio:{inbounds:t.input.audio.map((t=>{var e=t,{packetLossRatio:i,packetLossDelta:s,bitrate:n}=e,r=b(e,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:i,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})),outbounds:t.output.audio.map((t=>{var e=t,{packetLossRatio:i,packetLossDelta:s,bitrate:n}=e,r=b(e,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:i,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}))},video:{inbounds:t.input.video.map((t=>{var e=t,{packetLossRatio:i,packetLossDelta:s,bitrate:n}=e,r=b(e,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:i,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})),outbounds:t.output.video.map((t=>{var e=t,{packetLossRatio:i,packetLossDelta:s,bitrate:n}=e,r=b(e,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:i,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}))},raw:t.rawStats})})(t);K(e),this.emit(Lt,e)})),this.collection.start(),this.initialized=!0}catch(t){Mt.error(t)}}parseStats(t){return Mt.warn("The parseStats method is deprecated and will be removed in future releases."),null}stop(){Mt.info("Stopping peer connection stats"),this.collection.stop()}constructor(t,e={statsIntervalMs:1e3,autoInitStats:!0}){super(),this.peer=t,this.collection=null,this.initialized=!1,e.autoInitStats&&this.init(e.statsIntervalMs)}}var Ot={},Ft={},Vt={},Wt={exports:{}},Ut=Wt.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return null!=t.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return null!=t.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return null!=t.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=null!=t.raddr?" raddr %s rport %d":"%v%v",e+=null!=t.tcptype?" tcptype %s":"%v",null!=t.generation&&(e+=" generation %d"),e+=null!=t["network-id"]?" network-id %d":"%v",e+=null!=t["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return null!=t.attribute&&(e+=" %s",null!=t.value&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return null!=t.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(null!=t.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=null!=t.id?"id=%s %s":"%v%s",e+=null!=t.mediaClockValue?"=%s":"",e+=null!=t.rateNumerator?" rate=%s":"",e+=null!=t.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};w.keys(Ut).forEach((function(t){Ut[t].forEach((function(t){t.reg||(t.reg=/(.*)/),t.format||(t.format="%s")}))}));var Gt=Wt.exports;!function(t){var e=function(t){return String(Number(t))===t?Number(t):t},i=function(t,i,s){var n=t.name&&t.names;t.push&&!i[t.push]?i[t.push]=[]:n&&!i[t.name]&&(i[t.name]={});var r=t.push?{}:n?i[t.name]:i;(function(t,i,s,n){if(n&&!s)i[n]=e(t[1]);else for(var r=0;r<s.length;r+=1)null!=t[r+1]&&(i[s[r]]=e(t[r+1]))})(s.match(t.reg),r,t.names,t.name),t.push&&i[t.push].push(r)},s=Gt,n=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(t){var e={},r=[],o=e;return t.split(/(\r\n|\r|\n)/).filter(n).forEach((function(t){var e=t[0],n=t.slice(2);"m"===e&&(r.push({rtp:[],fmtp:[]}),o=r[r.length-1]);for(var h=0;h<(s[e]||[]).length;h+=1){var a=s[e][h];if(a.reg.test(n))return i(a,o,n)}})),e.media=r,e};var r=function(t,i){var s=i.split(/=(.+)/,2);return 2===s.length?t[s[0]]=e(s[1]):1===s.length&&i.length>1&&(t[s[0]]=void 0),t};t.parseParams=function(t){return t.split(/;\s?/).reduce(r,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(t){return t.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(t){for(var i=[],s=t.split(" ").map(e),n=0;n<s.length;n+=3)i.push({component:s[n],ip:s[n+1],port:s[n+2]});return i},t.parseImageAttributes=function(t){return t.split(" ").map((function(t){return t.substring(1,t.length-1).split(",").reduce(r,{})}))},t.parseSimulcastStreamList=function(t){return t.split(";").map((function(t){return t.split(",").map((function(t){var i,s=!1;return"~"!==t[0]?i=e(t):(i=e(t.substring(1,t.length)),s=!0),{scid:i,paused:s}}))}))}}(Vt);var Zt=Gt,Ht=/%[sdv%]/g,Xt=function(t){var e=1,i=arguments,s=i.length;return t.replace(Ht,(function(t){if(e>=s)return t;var n=i[e];switch(e+=1,t){case"%%":return"%";case"%s":return String(n);case"%d":return Number(n);case"%v":return""}}))},zt=function(t,e,i){var s=[t+"="+(e.format instanceof Function?e.format(e.push?i:i[e.name]):e.format)];if(e.names)for(var n=0;n<e.names.length;n+=1){var r=e.names[n];e.name?s.push(i[e.name][r]):s.push(i[e.names[n]])}else s.push(i[e.name]);return Xt.apply(null,s)},qt=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Yt=["i","c","b","a"],Kt=Vt,jt=function(t,e){e=e||{},null==t.version&&(t.version=0),null==t.name&&(t.name=" "),t.media.forEach((function(t){null==t.payloads&&(t.payloads="")}));var i=e.outerOrder||qt,s=e.innerOrder||Yt,n=[];return i.forEach((function(e){Zt[e].forEach((function(i){i.name in t&&null!=t[i.name]?n.push(zt(e,i,t)):i.push in t&&null!=t[i.push]&&t[i.push].forEach((function(t){n.push(zt(e,i,t))}))}))})),t.media.forEach((function(t){n.push(zt("m",Zt.m[0],t)),s.forEach((function(e){Zt[e].forEach((function(i){i.name in t&&null!=t[i.name]?n.push(zt(e,i,t)):i.push in t&&null!=t[i.push]&&t[i.push].forEach((function(t){n.push(zt(e,i,t))}))}))}))})),n.join("\r\n")+"\r\n"};Ft.write=jt,Ft.parse=Kt.parse,Ft.parseParams=Kt.parseParams,Ft.parseFmtpConfig=Kt.parseFmtpConfig,Ft.parsePayloads=Kt.parsePayloads,Ft.parseRemoteCandidates=Kt.parseRemoteCandidates,Ft.parseImageAttributes=Kt.parseImageAttributes,Ft.parseSimulcastStreamList=Kt.parseSimulcastStreamList;let Qt=class t{equals(t){return t.foundation===this.foundation&&t.componentId===this.componentId&&t.transport===this.transport&&t.priority===this.priority&&t.address===this.address&&t.port===this.port&&t.type===this.type&&t.relAddr===this.relAddr&&t.relPort===this.relPort}clone(){return new t(this.foundation,this.componentId,this.transport,this.priority,this.address,this.port,this.type,this.relAddr,this.relPort)}plain(){const t={foundation:this.foundation,componentId:this.componentId,transport:this.transport,priority:this.priority,address:this.address,port:this.port,type:this.type};return this.relAddr&&(t.relAddr=this.relAddr),this.relPort&&(t.relPort=this.relPort),t}getFoundation(){return this.foundation}getComponentId(){return this.componentId}getTransport(){return this.transport}getPriority(){return this.priority}getAddress(){return this.address}getPort(){return this.port}getType(){return this.type}getRelAddr(){return this.relAddr}getRelPort(){return this.relPort}constructor(t,e,i,s,n,r,o,h,a){this.foundation=t,this.componentId=e,this.transport=i,this.priority=s,this.address=n,this.port=r,this.type=o,this.relAddr=h,this.relPort=a}};Qt.expand=function(t){return"CandidateInfo"===t.constructor.name?t:new Qt(t.foundation,t.componentId,t.transport,t.priority,t.address,t.port,t.type,t.relAddr,t.relPort)},Qt.clone=function(t){return"CandidateInfo"===t.constructor.name?t.clone():Qt.expand(t)};var Jt=Qt;let $t=class t{clone(){return new t(this.id,this.params)}plain(){return this.params.length?{id:this.id,params:this.params}:{id:this.id}}getId(){return this.id}getParams(){return this.params}constructor(t,e){this.id=t,this.params=e||[]}};$t.expand=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t:new $t(t.id,t.params)},$t.clone=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t.clone():$t.expand(t)};var te=$t;const ee=te;let ie=class t{clone(){const e=new t(this.codec,this.type,this.params);this.hasRTX()&&e.setRTX(this.getRTX());for(const t of this.rtcpfbs)e.addRTCPFeedback(t.clone());return this.hasChannels()&&e.setChannels(this.getChannels()),e}plain(){const t={codec:this.codec,type:this.type};this.rtx&&(t.rtx=this.rtx),this.channels&&(t.channels=this.channels),w.keys(this.params).length&&(t.params=this.params);for(const e of this.rtcpfbs)t.rtcpfbs||(t.rtcpfbs=[]),t.rtcpfbs.push(e.plain());return t}setRTX(t){this.rtx=t}getType(){return this.type}setType(t){this.type=t}getCodec(){return this.codec}getParams(){return this.params}addParams(t){for(const e in t)this.params[e]=t[e]}addParam(t,e){this.params[t]=e}hasParam(t){return w.hasOwnProperty.call(this.params,t)}getParam(t,e){if(void 0===e&&(e=void 0),this.hasParam(t))return this.params[t];if(void 0===e)throw new m("param ".concat(t," not found and no default value provided"));return""+e}hasRTX(){return this.rtx}getRTX(){return this.rtx}hasChannels(){return this.channels}getChannels(){return this.channels}setChannels(t){this.channels=t}addRTCPFeedback(t){this.rtcpfbs.add(t)}getRTCPFeedbacks(){return this.rtcpfbs}constructor(t,e,i){this.codec=t,this.type=e,this.params={},this.rtcpfbs=new Set,i&&this.addParams(i)}};ie.expand=function(t){if("CodecInfo"===t.constructor.name)return t;const e=new ie(t.codec,t.type,t.params);t.rtx&&e.setRTX(t.rtx),t.channels&&e.setChannels(t.channels);for(const i of t.rtcpfbs||[]){const t=ee.expand(i);e.addRTCPFeedback(t)}return e},ie.clone=function(t){return"CodecInfo"===t.constructor.name?t.clone():ie.expand(t)},ie.MapFromNames=function(t,e,i){var s;const n=new Map;let r=96;for(const o of t){let t;const h=o.split(";"),a=h.shift().toLowerCase().trim();t="pcmu"===a?0:"pcma"===a?8:++r;const u=new ie(a,t);"opus"===a?u.setChannels(2):"multiopus"===a&&u.setChannels(6),e&&"ulpfec"!==a&&"flexfec-03"!==a&&"red"!==a&&u.setRTX(++r);for(const t of i||[])u.addRTCPFeedback(new ee(t.id,t.params));for(const t of h){let e=t.split("=");u.addParam(e[0].trim(),null===(s=e[1])||void 0===s?void 0:s.trim())}n.set(t,u)}return n};var se=ie;var ne=function t(){var e=this;if(!(this instanceof t))return new(Function.prototype.bind.apply(t,[null].concat(Array.prototype.slice.call(arguments))));Array.from(arguments).forEach((function(t){e[t]=f("n_"+t)}))};const re=ne("ACTIVE","PASSIVE","ACTPASS","INACTIVE");re.byValue=function(t){switch(t){case re.ACTIVE:case re.PASSIVE:case re.ACTPASS:case re.INACTIVE:return t}return re[t.toUpperCase()]},re.toString=function(t){switch(t){case re.ACTIVE:return"active";case re.PASSIVE:return"passive";case re.ACTPASS:return"actpass";case re.INACTIVE:return"inactive"}},re.reverse=function(t,e){switch(t){case re.ACTIVE:return re.PASSIVE;case re.PASSIVE:return re.ACTIVE;case re.ACTPASS:return e?re.ACTIVE:re.PASSIVE;case re.INACTIVE:return re.INACTIVE}};var oe=re;const he=oe;let ae=class t{clone(){return new t(this.setup,this.hash,this.fingerprint)}plain(){return{setup:he.toString(this.setup),hash:this.hash,fingerprint:this.fingerprint}}getFingerprint(){return this.fingerprint}getHash(){return this.hash}getSetup(){return this.setup}setSetup(t){this.setup=t}constructor(t,e,i){this.setup=t,this.hash=e,this.fingerprint=i}};ae.expand=function(t){return"DTLSInfo"===t.constructor.name?t:new ae(t.setup?he.byValue(t.setup):he.ACTPASS,t.hash,t.fingerprint)},ae.clone=function(t){return"DTLSInfo"===t.constructor.name?t.clone():ae.expand(t)};var ue=ae;let ce=class t{clone(){return new t(this.tag,this.suite,this.keyParams,this.sessionParams)}plain(){return{tag:this.tag,suite:this.suite,keyParams:this.keyParams,sessionParams:this.sessionParams}}getSessionParams(){return this.sessionParams}getKeyParams(){return this.keyParams}getSuite(){return this.suite}getTag(){return this.tag}constructor(t,e,i,s){this.tag=t,this.suite=e,this.keyParams=i,this.sessionParams=s}};ce.expand=function(t){return"CryptoInfo"===t.constructor.name?t:new ce(t.tag,t.suite,t.keyParams,t.sessionParams)},ce.clone=function(t){return"CryptoInfo"===t.constructor.name?t.clone():ce.expand(t)};for(var le=ce,de={exports:{}},fe={exports:{}},_e={},ve={byteLength:function(t){var e=be(t),i=e[0],s=e[1];return 3*(i+s)/4-s},toByteArray:function(t){var e,i,s=be(t),n=s[0],r=s[1],o=new pe(function(t,e,i){return 3*(e+i)/4-i}(0,n,r)),h=0,a=r>0?n-4:n;for(i=0;i<a;i+=4)e=me[t.charCodeAt(i)]<<18|me[t.charCodeAt(i+1)]<<12|me[t.charCodeAt(i+2)]<<6|me[t.charCodeAt(i+3)],o[h++]=e>>16&255,o[h++]=e>>8&255,o[h++]=255&e;return 2===r&&(e=me[t.charCodeAt(i)]<<2|me[t.charCodeAt(i+1)]>>4,o[h++]=255&e),1===r&&(e=me[t.charCodeAt(i)]<<10|me[t.charCodeAt(i+1)]<<4|me[t.charCodeAt(i+2)]>>2,o[h++]=e>>8&255,o[h++]=255&e),o},fromByteArray:function(t){for(var e,i=t.length,s=i%3,n=[],r=16383,o=0,h=i-s;o<h;o+=r)n.push(Se(t,o,o+r>h?h:o+r));return 1===s?(e=t[i-1],n.push(ge[e>>2]+ge[e<<4&63]+"==")):2===s&&(e=(t[i-2]<<8)+t[i-1],n.push(ge[e>>10]+ge[e>>4&63]+ge[e<<2&63]+"=")),n.join("")}},ge=[],me=[],pe=typeof j<"u"?j:Array,we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ye=0;ye<64;++ye)ge[ye]=we[ye],me[we.charCodeAt(ye)]=ye;function be(t){var e=t.length;if(e%4>0)throw new m("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function Ae(t){return ge[t>>18&63]+ge[t>>12&63]+ge[t>>6&63]+ge[63&t]}function Se(t,e,i){for(var s,n=[],r=e;r<i;r+=3)s=(t[r]<<16&16711680)+(t[r+1]<<8&65280)+(255&t[r+2]),n.push(Ae(s));return n.join("")}me[45]=62,me[95]=63;var Te={read:function(t,e,i,s,n){var r,o,h=8*n-s-1,a=(1<<h)-1,u=a>>1,c=-7,l=i?n-1:0,d=i?-1:1,f=t[e+l];for(l+=d,r=f&(1<<-c)-1,f>>=-c,c+=h;c>0;r=256*r+t[e+l],l+=d,c-=8);for(o=r&(1<<-c)-1,r>>=-c,c+=s;c>0;o=256*o+t[e+l],l+=d,c-=8);if(0===r)r=1-u;else{if(r===a)return o?NaN:1/0*(f?-1:1);o+=_.pow(2,s),r-=u}return(f?-1:1)*o*_.pow(2,r-s)},write:function(t,e,i,s,n,r){var o,h,a,u=8*r-n-1,c=(1<<u)-1,l=c>>1,d=23===n?_.pow(2,-24)-_.pow(2,-77):0,f=s?0:r-1,v=s?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=_.abs(e),S(e)||e===1/0?(h=S(e)?1:0,o=c):(o=_.floor(_.log(e)/_.LN2),e*(a=_.pow(2,-o))<1&&(o--,a*=2),(e+=o+l>=1?d/a:d*_.pow(2,1-l))*a>=2&&(o++,a/=2),o+l>=c?(h=0,o=c):o+l>=1?(h=(e*a-1)*_.pow(2,n),o+=l):(h=e*_.pow(2,l-1)*_.pow(2,n),o=0));n>=8;t[i+f]=255&h,f+=v,h/=256,n-=8);for(o=o<<n|h,u+=n;u>0;t[i+f]=255&o,f+=v,o/=256,u-=8);t[i+f-v]|=128*g}};(function(t){const e=ve,i=Te,s="function"==typeof El&&"function"==typeof f?f("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},t.INSPECT_MAX_BYTES=50;const n=2147483647;function r(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new j(t);return w.setPrototypeOf(e,o.prototype),e}function o(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new g('The "string" argument must be of type string. Received type number');return u(t)}return h(t,e,i)}function h(t,e,i){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!o.isEncoding(e))throw new g("Unknown encoding: "+e);const i=0|v(t,e);let s=r(i);const n=s.write(t,e);return n!==i&&(s=s.slice(0,n)),s}(t,e);if(ArrayBuffer.isView(t))return function(t){if(tt(t,j)){const e=new j(t);return l(e.buffer,e.byteOffset,e.byteLength)}return c(t)}(t);if(null==t)throw new g("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(tt(t,ArrayBuffer)||t&&tt(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(tt(t,SharedArrayBuffer)||t&&tt(t.buffer,SharedArrayBuffer)))return l(t,e,i);if("number"==typeof t)throw new g('The "value" argument must not be of type number. Received type number');const s=t.valueOf&&t.valueOf();if(null!=s&&s!==t)return o.from(s,e,i);const n=function(t){if(o.isBuffer(t)){const e=0|d(t.length),i=r(e);return 0===i.length||t.copy(i,0,0,e),i}if(void 0!==t.length)return"number"!=typeof t.length||et(t.length)?r(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}(t);if(n)return n;if(typeof El<"u"&&null!=El.toPrimitive&&"function"==typeof t[El.toPrimitive])return o.from(t[El.toPrimitive]("string"),e,i);throw new g("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new g('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return a(t),r(t<0?0:0|d(t))}function c(t){const e=t.length<0?0:0|d(t.length),i=r(e);for(let s=0;s<e;s+=1)i[s]=255&t[s];return i}function l(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');let s;return s=void 0===e&&void 0===i?new j(t):void 0===i?new j(t,e):new j(t,e,i),w.setPrototypeOf(s,o.prototype),s}function d(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function v(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||tt(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new g('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const i=t.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===i)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return Q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return J(t).length;default:if(n)return s?-1:Q(t).length;e=(""+e).toLowerCase(),n=!0}}function p(t,e,i){let s=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0)||(i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,i);case"utf8":case"utf-8":return C(this,e,i);case"ascii":return D(this,e,i);case"latin1":case"binary":return N(this,e,i);case"base64":return R(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,i);default:if(s)throw new g("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function y(t,e,i){const s=t[e];t[e]=t[i],t[i]=s}function b(t,e,i,s,n){if(0===t.length)return-1;if("string"==typeof i?(s=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),et(i=+i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=o.from(e,s)),o.isBuffer(e))return 0===e.length?-1:A(t,e,i,s,n);if("number"==typeof e)return e&=255,"function"==typeof j.prototype.indexOf?n?j.prototype.indexOf.call(t,e,i):j.prototype.lastIndexOf.call(t,e,i):A(t,[e],i,s,n);throw new g("val must be string, number or Buffer")}function A(t,e,i,s,n){let r,o=1,h=t.length,a=e.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(t.length<2||e.length<2)return-1;o=2,h/=2,a/=2,i/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(n){let s=-1;for(r=i;r<h;r++)if(u(t,r)===u(e,-1===s?0:r-s)){if(-1===s&&(s=r),r-s+1===a)return s*o}else-1!==s&&(r-=r-s),s=-1}else for(i+a>h&&(i=h-a),r=i;r>=0;r--){let i=!0;for(let s=0;s<a;s++)if(u(t,r+s)!==u(e,s)){i=!1;break}if(i)return r}return-1}function S(t,e,i,s){i=Number(i)||0;const n=t.length-i;s?(s=Number(s))>n&&(s=n):s=n;const r=e.length;let o;for(s>r/2&&(s=r/2),o=0;o<s;++o){const s=x(e.substr(2*o,2),16);if(et(s))return o;t[i+o]=s}return o}function T(t,e,i,s){return $(Q(e,t.length-i),t,i,s)}function k(t,e,i,s){return $(function(t){const e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,s)}function E(t,e,i,s){return $(J(e),t,i,s)}function I(t,e,i,s){return $(function(t,e){let i,s,n;const r=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)i=t.charCodeAt(o),s=i>>8,n=i%256,r.push(n),r.push(s);return r}(e,t.length-i),t,i,s)}function R(t,i,s){return 0===i&&s===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(i,s))}function C(t,e,i){i=_.min(t.length,i);const s=[];let n=e;for(;n<i;){const e=t[n];let r=null,o=e>239?4:e>223?3:e>191?2:1;if(n+o<=i){let i,s,h,a;switch(o){case 1:e<128&&(r=e);break;case 2:i=t[n+1],128==(192&i)&&(a=(31&e)<<6|63&i,a>127&&(r=a));break;case 3:i=t[n+1],s=t[n+2],128==(192&i)&&128==(192&s)&&(a=(15&e)<<12|(63&i)<<6|63&s,a>2047&&(a<55296||a>57343)&&(r=a));break;case 4:i=t[n+1],s=t[n+2],h=t[n+3],128==(192&i)&&128==(192&s)&&128==(192&h)&&(a=(15&e)<<18|(63&i)<<12|(63&s)<<6|63&h,a>65535&&a<1114112&&(r=a))}}null===r?(r=65533,o=1):r>65535&&(r-=65536,s.push(r>>>10&1023|55296),r=56320|1023&r),s.push(r),n+=o}return function(t){const e=t.length;if(e<=P)return String.fromCharCode.apply(String,t);let i="",s=0;for(;s<e;)i+=String.fromCharCode.apply(String,t.slice(s,s+=P));return i}(s)}t.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=function(){try{const t=new j(1),e={foo:function(){return 42}};return w.setPrototypeOf(e,j.prototype),w.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),w.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),w.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(t,e,i){return h(t,e,i)},w.setPrototypeOf(o.prototype,j.prototype),w.setPrototypeOf(o,j),o.alloc=function(t,e,i){return function(t,e,i){return a(t),t<=0?r(t):void 0!==e?"string"==typeof i?r(t).fill(e,i):r(t).fill(e):r(t)}(t,e,i)},o.allocUnsafe=function(t){return u(t)},o.allocUnsafeSlow=function(t){return u(t)},o.isBuffer=function(t){return null!=t&&!0===t.r_&&t!==o.prototype},o.compare=function(t,e){if(tt(t,j)&&(t=o.from(t,t.offset,t.byteLength)),tt(e,j)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(t)||!o.isBuffer(e))throw new g('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,s=e.length;for(let n=0,r=_.min(i,s);n<r;++n)if(t[n]!==e[n]){i=t[n],s=e[n];break}return i<s?-1:s<i?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new g('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const s=o.allocUnsafe(e);let n=0;for(i=0;i<t.length;++i){let e=t[i];if(tt(e,j))n+e.length>s.length?(o.isBuffer(e)||(e=o.from(e)),e.copy(s,n)):j.prototype.set.call(s,e,n);else{if(!o.isBuffer(e))throw new g('"list" argument must be an Array of Buffers');e.copy(s,n)}n+=e.length}return s},o.byteLength=v,o.prototype.r_=!0,o.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)y(this,e,e+1);return this},o.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},o.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},o.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?C(this,0,t):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new g("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){let e="";const i=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(e+=" ... "),"<Buffer "+e+">"},s&&(o.prototype[s]=o.prototype.inspect),o.prototype.compare=function(t,e,i,s,n){if(tt(t,j)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new g('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),e<0||i>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&e>=i)return 0;if(s>=n)return-1;if(e>=i)return 1;if(this===t)return 0;let r=(n>>>=0)-(s>>>=0),h=(i>>>=0)-(e>>>=0);const a=_.min(r,h),u=this.slice(s,n),c=t.slice(e,i);for(let t=0;t<a;++t)if(u[t]!==c[t]){r=u[t],h=c[t];break}return r<h?-1:h<r?1:0},o.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},o.prototype.indexOf=function(t,e,i){return b(this,t,e,i,!0)},o.prototype.lastIndexOf=function(t,e,i){return b(this,t,e,i,!1)},o.prototype.write=function(t,e,i,s){if(void 0===e)s="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)s=e,i=this.length,e=0;else{if(!isFinite(e))throw new m("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===s&&(s="utf8")):(s=i,i=void 0)}const n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let r=!1;for(;;)switch(s){case"hex":return S(this,t,e,i);case"utf8":case"utf-8":return T(this,t,e,i);case"ascii":case"latin1":case"binary":return k(this,t,e,i);case"base64":return E(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,i);default:if(r)throw new g("Unknown encoding: "+s);s=(""+s).toLowerCase(),r=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.o_||this,0)}};const P=4096;function D(t,e,i){let s="";i=_.min(t.length,i);for(let n=e;n<i;++n)s+=String.fromCharCode(127&t[n]);return s}function N(t,e,i){let s="";i=_.min(t.length,i);for(let n=e;n<i;++n)s+=String.fromCharCode(t[n]);return s}function M(t,e,i){const s=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>s)&&(i=s);let n="";for(let s=e;s<i;++s)n+=it[t[s]];return n}function L(t,e,i){const s=t.slice(e,i);let n="";for(let t=0;t<s.length-1;t+=2)n+=String.fromCharCode(s[t]+256*s[t+1]);return n}function B(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,i,s,n,r){if(!o.isBuffer(t))throw new g('"buffer" argument must be a Buffer instance');if(e>n||e<r)throw new RangeError('"value" argument is out of bounds');if(i+s>t.length)throw new RangeError("Index out of range")}function F(t,e,i,s,n){z(e,s,n,t,i,7);let r=Number(e&BigInt(4294967295));t[i++]=r,r>>=8,t[i++]=r,r>>=8,t[i++]=r,r>>=8,t[i++]=r;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,i}function V(t,e,i,s,n){z(e,s,n,t,i,7);let r=Number(e&BigInt(4294967295));t[i+7]=r,r>>=8,t[i+6]=r,r>>=8,t[i+5]=r,r>>=8,t[i+4]=r;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=o,o>>=8,t[i+2]=o,o>>=8,t[i+1]=o,o>>=8,t[i]=o,i+8}function W(t,e,i,s,n,r){if(i+s>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function U(t,e,s,n,r){return e=+e,s>>>=0,r||W(t,0,s,4),i.write(t,e,s,n,23,4),s+4}function G(t,e,s,n,r){return e=+e,s>>>=0,r||W(t,0,s,8),i.write(t,e,s,n,52,8),s+8}o.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const s=this.subarray(t,e);return w.setPrototypeOf(s,o.prototype),s},o.prototype.readUintLE=o.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let s=this[t],n=1,r=0;for(;++r<e&&(n*=256);)s+=this[t+r]*n;return s},o.prototype.readUintBE=o.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let s=this[t+--e],n=1;for(;e>0&&(n*=256);)s+=this[t+--e]*n;return s},o.prototype.readUint8=o.prototype.readUInt8=function(t,e){return t>>>=0,e||B(t,1,this.length),this[t]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||B(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||B(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readBigUInt64LE=st((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&Y(t,this.length-8);const s=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(s)+(BigInt(n)<<BigInt(32))})),o.prototype.readBigUInt64BE=st((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&Y(t,this.length-8);const s=e*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(s)<<BigInt(32))+BigInt(n)})),o.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let s=this[t],n=1,r=0;for(;++r<e&&(n*=256);)s+=this[t+r]*n;return n*=128,s>=n&&(s-=_.pow(2,8*e)),s},o.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let s=e,n=1,r=this[t+--s];for(;s>0&&(n*=256);)r+=this[t+--s]*n;return n*=128,r>=n&&(r-=_.pow(2,8*e)),r},o.prototype.readInt8=function(t,e){return t>>>=0,e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||B(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt16BE=function(t,e){t>>>=0,e||B(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readBigInt64LE=st((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&Y(t,this.length-8);const s=this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24);return(BigInt(s)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),o.prototype.readBigInt64BE=st((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&Y(t,this.length-8);const s=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(s)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)})),o.prototype.readFloatLE=function(t,e){return t>>>=0,e||B(t,4,this.length),i.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||B(t,4,this.length),i.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||B(t,8,this.length),i.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||B(t,8,this.length),i.read(this,t,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(t,e,i,s){if(t=+t,e>>>=0,i>>>=0,!s){O(this,t,e,i,_.pow(2,8*i)-1,0)}let n=1,r=0;for(this[e]=255&t;++r<i&&(n*=256);)this[e+r]=t/n&255;return e+i},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(t,e,i,s){if(t=+t,e>>>=0,i>>>=0,!s){O(this,t,e,i,_.pow(2,8*i)-1,0)}let n=i-1,r=1;for(this[e+n]=255&t;--n>=0&&(r*=256);)this[e+n]=t/r&255;return e+i},o.prototype.writeUint8=o.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeBigUInt64LE=st((function(t,e){return void 0===e&&(e=0),F(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeBigUInt64BE=st((function(t,e){return void 0===e&&(e=0),V(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeIntLE=function(t,e,i,s){if(t=+t,e>>>=0,!s){const s=_.pow(2,8*i-1);O(this,t,e,i,s-1,-s)}let n=0,r=1,o=0;for(this[e]=255&t;++n<i&&(r*=256);)t<0&&0===o&&0!==this[e+n-1]&&(o=1),this[e+n]=(t/r>>0)-o&255;return e+i},o.prototype.writeIntBE=function(t,e,i,s){if(t=+t,e>>>=0,!s){const s=_.pow(2,8*i-1);O(this,t,e,i,s-1,-s)}let n=i-1,r=1,o=0;for(this[e+n]=255&t;--n>=0&&(r*=256);)t<0&&0===o&&0!==this[e+n+1]&&(o=1),this[e+n]=(t/r>>0)-o&255;return e+i},o.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeBigInt64LE=st((function(t,e){return void 0===e&&(e=0),F(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeBigInt64BE=st((function(t,e){return void 0===e&&(e=0),V(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeFloatLE=function(t,e,i){return U(this,t,e,!0,i)},o.prototype.writeFloatBE=function(t,e,i){return U(this,t,e,!1,i)},o.prototype.writeDoubleLE=function(t,e,i){return G(this,t,e,!0,i)},o.prototype.writeDoubleBE=function(t,e,i){return G(this,t,e,!1,i)},o.prototype.copy=function(t,e,i,s){if(!o.isBuffer(t))throw new g("argument should be a Buffer");if(i||(i=0),!s&&0!==s&&(s=this.length),e>=t.length&&(e=t.length),e||(e=0),s>0&&s<i&&(s=i),s===i||0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-e<s-i&&(s=t.length-e+i);const n=s-i;return this===t&&"function"==typeof j.prototype.copyWithin?this.copyWithin(e,i,s):j.prototype.set.call(t,this.subarray(i,s),e),n},o.prototype.fill=function(t,e,i,s){if("string"==typeof t){if("string"==typeof e?(s=e,e=0,i=this.length):"string"==typeof i&&(s=i,i=this.length),void 0!==s&&"string"!=typeof s)throw new g("encoding must be a string");if("string"==typeof s&&!o.isEncoding(s))throw new g("Unknown encoding: "+s);if(1===t.length){const e=t.charCodeAt(0);("utf8"===s&&e<128||"latin1"===s)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let n;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{const r=o.isBuffer(t)?t:o.from(t,s),h=r.length;if(0===h)throw new g('The value "'+t+'" is invalid for argument "value"');for(n=0;n<i-e;++n)this[n+e]=r[n%h]}return this};const Z={};function H(t,e,i){Z[t]=class extends i{get code(){return t}set code(t){w.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}constructor(){super(),w.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(t,"]"),this.stack,delete this.name}}}function X(t){let e="",i=t.length;const s="-"===t[0]?1:0;for(;i>=s+4;i-=3)e="_".concat(t.slice(i-3,i)).concat(e);return"".concat(t.slice(0,i)).concat(e)}function z(t,e,i,s,n,r){if(t>i||t<e){const i="bigint"==typeof e?"n":"";let s;throw s=0===e||e===BigInt(0)?">= 0".concat(i," and < 2").concat(i," ** ").concat(8*(r+1)).concat(i):">= -(2".concat(i," ** ").concat(8*(r+1)-1).concat(i,") and < 2 ** ")+"".concat(8*(r+1)-1).concat(i),new Z.ERR_OUT_OF_RANGE("value",s,t)}!function(t,e,i){q(e,"offset"),(void 0===t[e]||void 0===t[e+i])&&Y(e,t.length-(i+1))}(s,n,r)}function q(t,e){if("number"!=typeof t)throw new Z.ERR_INVALID_ARG_TYPE(e,"number",t)}function Y(t,e,i){throw _.floor(t)!==t?(q(t,i),new Z.ERR_OUT_OF_RANGE("offset","an integer",t)):e<0?new Z.ERR_BUFFER_OUT_OF_BOUNDS:new Z.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(e),t)}H("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?"".concat(t," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),H("ERR_INVALID_ARG_TYPE",(function(t,e){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(typeof e)}),g),H("ERR_OUT_OF_RANGE",(function(t,e,i){let s='The value of "'.concat(t,'" is out of range.'),n=i;return Number.isInteger(i)&&_.abs(i)>2**32?n=X(String(i)):"bigint"==typeof i&&(n=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(n=X(n)),n+="n"),s+=" It must be ".concat(e,". Received ").concat(n),s}),RangeError);const K=/[^+/0-9A-Za-z-_]/g;function Q(t,e){let i;e=e||1/0;const s=t.length;let n=null;const r=[];for(let o=0;o<s;++o){if(i=t.charCodeAt(o),i>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(o+1===s){(e-=3)>-1&&r.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&r.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&r.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;r.push(i)}else if(i<2048){if((e-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new m("Invalid code point");if((e-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function J(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,e,i,s){let n;for(n=0;n<s&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function tt(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function et(t){return t!=t}const it=function(){const t="0123456789abcdef",e=new Array(256);for(let i=0;i<16;++i){const s=16*i;for(let n=0;n<16;++n)e[s+n]=t[i]+t[n]}return e}();function st(t){return typeof BigInt>"u"?nt:t}function nt(){throw new m("BigInt not supported")}})(_e),function(t,e){var i=_e,s=i.Buffer;function n(t,e){for(var i in t)e[i]=t[i]}function r(t,e,i){return s(t,e,i)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=i:(n(i,e),e.Buffer=r),r.prototype=w.create(s.prototype),n(s,r),r.from=function(t,e,i){if("number"==typeof t)throw new g("Argument must not be a number");return s(t,e,i)},r.alloc=function(t,e,i){if("number"!=typeof t)throw new g("Argument must be a number");var n=s(t);return void 0!==e?"string"==typeof i?n.fill(e,i):n.fill(e):n.fill(0),n},r.allocUnsafe=function(t){if("number"!=typeof t)throw new g("Argument must be a number");return s(t)},r.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new g("Argument must be a number");return i.SlowBuffer(t)}}(fe,fe.exports);var ke=65536;var Ee=fe.exports.Buffer,xe=A.crypto||A.msCrypto;xe&&xe.getRandomValues?de.exports=function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var i=Ee.allocUnsafe(t);if(t>0)if(t>ke)for(var s=0;s<t;s+=ke)xe.getRandomValues(i.slice(s,s+ke));else xe.getRandomValues(i);return"function"==typeof e?process.nextTick((function(){e(null,i)})):i}:de.exports=function(){throw new m("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")};const Ie=de.exports;let Re=class t{clone(){const e=new t(this.ufrag,this.pwd);return e.setLite(this.lite),e.setEndOfCandidates(this.endOfCandidates),e}plain(){const t={ufrag:this.ufrag,pwd:this.pwd};return this.lite&&(t.lite=this.lite),this.endOfCandidates&&(t.endOfCandidates=this.endOfCandidates),t}getUfrag(){return this.ufrag}getPwd(){return this.pwd}isLite(){return this.lite}setLite(t){this.lite=t}isEndOfCandidates(){return this.endOfCandidates}setEndOfCandidates(t){this.endOfCandidates=t}constructor(t,e){this.ufrag=t,this.pwd=e,this.lite=!1,this.endOfCandidates=!1}};Re.generate=function(t){const e=new Re,i=Ie(8),s=Ie(24);return e.ufrag=i.toString("hex"),e.pwd=s.toString("hex"),e.lite=t,e},Re.expand=function(t){if("ICEInfo"===t.constructor.name)return t;const e=new Re(t.ufrag,t.pwd);return e.setLite(t.lite),e.setEndOfCandidates(t.endOfCandidates),e},Re.clone=function(t){return"ICEInfo"===t.constructor.name?t.clone():Re.expand(t)};var Ce=Re;const Pe=ne("SEND","RECV");Pe.byValue=function(t){return Pe[t.toUpperCase()]},Pe.toString=function(t){switch(t){case Pe.SEND:return"send";case Pe.RECV:return"recv"}},Pe.reverse=function(t){switch(t){case Pe.SEND:return Pe.RECV;case Pe.RECV:return Pe.SEND}};var De=Pe;const Ne=De;let Me=class t{clone(){var e=new t(this.id,this.direction);return e.setFormats(this.formats),e.setParams(this.params),e}plain(){var t={id:this.id,direction:Ne.toString(this.direction)};for(var[e,i]of(this.formats&&(t.formats=this.formats),this.params.entries()))t.params||(t.params={}),t.params[e]=i;return t}getId(){return this.id}getDirection(){return this.direction}setDirection(t){this.direction=t}getFormats(){return this.formats}setFormats(t){this.formats=[];for(let e=0;e<t.length;++e)this.formats.push(x(t[e]))}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,e){this.params.set(t,e)}constructor(t,e){this.id=t,this.direction=e,this.formats=[],this.params=new Map}};Me.expand=function(t){if("RIDInfo"===t.constructor.name)return t;const e=new Me(t.id,Ne.byValue(t.direction));for(const[i,s]of w.entries(t.params||{}))e.addParam(i,s);return t.formats&&e.setFormats(t.formats),e},Me.clone=function(t){return"RIDInfo"===t.constructor.name?t.clone():Me.expand(t)};var Le=Me;let Be=class t{clone(){return new t(this.id,this.paused)}plain(){return{id:this.id,paused:this.paused}}isPaused(){return this.paused}getId(){return this.id}constructor(t,e){this.paused=e,this.id=t}};Be.expand=function(t){return"SimulcastStreamInfo"===t.constructor.name?t:new Be(t.id,t.paused)},Be.clone=function(t){return"SimulcastStreamInfo"===t.constructor.name?t.clone():Be.expand(t)};var Oe=Be;const Fe=Oe,Ve=De;let We=class t{clone(){const e=new t;for(const t of this.send)e.addSimulcastAlternativeStreams(Ve.SEND,t.map((t=>t.clone())));for(const t of this.recv)e.addSimulcastAlternativeStreams(Ve.RECV,t.map((t=>t.clone())));return e}plain(){const t={send:[],recv:[]};for(const e of this.send)t.send.push(e.map((t=>t.plain())));for(const e of this.recv)t.recv.push(e.map((t=>t.plain())));return t}addSimulcastAlternativeStreams(t,e){return t===Ve.SEND?this.send.push(e):this.recv.push(e)}addSimulcastStream(t,e){return t===Ve.SEND?this.send.push([e]):this.recv.push([e])}getSimulcastStreams(t){return t===Ve.SEND?this.send:this.recv}constructor(){this.send=[],this.recv=[]}};We.expand=function(t){if("SimulcastInfo"===t.constructor.name)return t;const e=new We;for(const i of t.send||[])e.addSimulcastAlternativeStreams(Ve.SEND,i.map(Fe.expand));for(const i of t.recv||[])e.addSimulcastAlternativeStreams(Ve.RECV,i.map(Fe.expand));return e},We.clone=function(t){return"SimulcastInfo"===t.constructor.name?t.clone():We.expand(t)};var Ue=We;const Ge=ne("SENDRECV","SENDONLY","RECVONLY","INACTIVE");Ge.byValue=function(t){return Ge[t.toUpperCase()]},Ge.toString=function(t){switch(t){case Ge.SENDRECV:return"sendrecv";case Ge.SENDONLY:return"sendonly";case Ge.RECVONLY:return"recvonly";case Ge.INACTIVE:return"inactive"}},Ge.reverse=function(t){switch(t){case Ge.SENDRECV:return Ge.SENDRECV;case Ge.SENDONLY:return Ge.RECVONLY;case Ge.RECVONLY:return Ge.SENDONLY;case Ge.INACTIVE:return Ge.INACTIVE}};var Ze=Ge;let He=class t{clone(){return new t(this.port,this.maxMessageSize)}plain(){return{port:this.port,maxMessageSize:this.maxMessageSize}}getPort(){return this.port}getMaxMessageSize(){return this.maxMessageSize}constructor(t,e){this.port=t,this.maxMessageSize=e}};He.expand=function(t){return"DataChannelInfo"===t.constructor.name?t:new He(t.port,t.maxMessageSize)},He.clone=function(t){return"DataChannelInfo"===t.constructor.name?t.clone():He.expand(t)};var Xe=He;const ze=se,qe=Le,Ye=Ue,Ke=Ze,je=De,Qe=Xe;let Je=class t{clone(){const e=new t(this.id,this.type);e.setDirection(this.direction),e.setBitrate(this.bitrate);for(const t of this.codecs.values())e.addCodec(t.clone());for(const[t,i]of this.extensions.entries())e.addExtension(t,i);for(const t of this.rids.values())e.addRID(t.clone());return this.simulcast&&e.setSimulcast(this.simulcast.clone()),this.control&&e.setControl(this.control),this.dataChannel&&e.setDataChannel(this.dataChannel.clone()),e}plain(){const t={id:this.id,type:this.type,direction:Ke.toString(this.direction),codecs:[]};this.dataChannel&&(t.dataChannel=this.dataChannel.plain()),this.bitrate&&(t.bitrate=this.bitrate);for(const e of this.codecs.values())t.codecs.push(e.plain());for(const[e,i]of this.extensions.entries())t.extensions||(t.extensions={}),t.extensions[e]=i;for(const e of this.rids.values())t.rids||(t.rids=[]),t.rids.push(e.plain());return this.simulcast&&(t.simulcast=this.simulcast.plain()),this.control&&(t.control=this.control),t}getType(){return this.type}getId(){return this.id}setId(t){this.id=t}addExtension(t,e){this.extensions.set(t,e)}addRID(t){this.rids.set(t.getId(),t)}addCodec(t){this.codecs.set(t.getType(),t)}setCodecs(t){this.codecs=t}getCodecForType(t){return this.codecs.get(t)}getCodec(t){for(const e of this.codecs.values())if(e.getCodec().toLowerCase()===t.toLowerCase())return e;return null}hasCodec(t){return null!==this.getCodec(t)}getCodecs(){return this.codecs}hasRTX(){for(const t of this.codecs.values())if(t.hasRTX())return!0;return!1}getExtensions(){return this.extensions}getRIDs(){return this.rids}getRID(t){return this.rids.get(t)}getBitrate(){return this.bitrate}setBitrate(t){this.bitrate=t}getDirection(){return this.direction}setDirection(t){this.direction=t}hasControl(){return!!this.control}getControl(){return this.control}setControl(t){this.control=t}hasDataChannel(){return!!this.dataChannel}getDataChannel(){return this.dataChannel}setDataChannel(t){this.dataChannel=t}answer(e){const i=new t(this.id,this.type);if(e){i.setDirection(Ke.reverse(this.direction));const{codecs:t,dataChannel:s}=e;if(t){let s;s=Array.isArray(t)?ze.MapFromNames(t,e.rtx,e.rtcpfbs):t;for(let t of this.codecs.values())for(let e of s.values()){if(e.getCodec().toLowerCase()!==t.getCodec().toLowerCase()||"h264"===e.getCodec()&&e.hasParam("packetization-mode")&&e.getParam("packetization-mode")!=t.getParam("packetization-mode","0")||"h264"===e.getCodec()&&e.hasParam("profile-level-id")&&t.hasParam("profile-level-id")&&e.getParam("profile-level-id")!=t.getParam("profile-level-id")||"multiopus"===e.getCodec()&&e.hasParam("num_streams")&&t.hasParam("num_streams")&&e.getParam("num_streams")!=t.getParam("num_streams"))continue;const s=e.clone();s.setType(t.getType()),s.hasRTX()&&s.setRTX(t.getRTX()),t.hasChannels()&&s.setChannels(t.getChannels()),s.addParams(t.getParams()),i.addCodec(s);break}}const n=new Set(e.extensions);for(let[t,e]of this.extensions)n.has(e)&&i.addExtension(t,e);if(e.simulcast&&this.simulcast){const t=new Ye,e=this.simulcast.getSimulcastStreams(je.SEND);if(e)for(const i of e){const e=i.map((t=>t.clone()));t.addSimulcastAlternativeStreams(je.RECV,e)}const s=this.simulcast.getSimulcastStreams(je.RECV);if(s)for(const e of s){const i=e.map((t=>t.clone()));t.addSimulcastAlternativeStreams(je.SEND,i)}for(const t of this.rids.values()){const e=t.clone();e.setDirection(je.reverse(t.getDirection())),i.addRID(e)}i.setSimulcast(t)}if(s&&this.dataChannel){const t=new Qe(this.dataChannel.getPort(),s.maxMessageSize?s.maxMessageSize:this.dataChannel.getMaxMessageSize());i.setDataChannel(t)}}else i.setDirection(Ke.INACTIVE);return i}getSimulcast(){return this.simulcast}setSimulcast(t){this.simulcast=t}constructor(t,e){this.id=t,this.type=e,this.direction=Ke.SENDRECV,this.extensions=new Map,this.codecs=new Map,this.rids=new Map,this.simulcast=null,this.bitrate=0,this.control=null,this.dataChannel=null}};function $e(t){const e=t.toString();if(!/^\d+$/.test(e))throw new m("invalid integer ".concat(e));return x(e)}Je.create=function(t,e,i){!i&&"string"!=typeof e&&(i=e,e=t);const s=new Je(t,e);if(i){const{codecs:t}=i;t&&(Array.isArray(t)?s.setCodecs(ze.MapFromNames(t,i.rtx,i.rtcpfbs)):s.setCodecs(t))}else s.setDirection(Ke.INACTIVE);return s},Je.expand=function(t){if("MediaInfo"===t.constructor.name)return t;const e=new Je(t.id,t.type);if(t.direction&&e.setDirection(Ke.byValue(t.direction)),e.setBitrate(t.bitrate),t.dataChannel){const i=Qe.expand(t.dataChannel);i&&e.setDataChannel(i)}for(const[i,s]of w.entries(t.extensions))e.addExtension($e(i),s);for(const i of t.codecs){const t=ze.expand(i);t&&e.addCodec(t)}for(const i of t.rids||[]){const t=qe.expand(i);e.addRID(t)}return t.simulcast&&e.setSimulcast(Ye.expand(t.simulcast)),t.control&&e.setControl(t.control),e},Je.clone=function(t){return"MediaInfo"===t.constructor.name?t.clone():Je.expand(t)};var ti=Je;let ei=class t{clone(){return new t(this.semantics,this.ssrcs)}plain(){const t={semantics:this.semantics,ssrcs:[]};for(let e=0;e<this.ssrcs.length;++e)t.ssrcs.push(this.ssrcs[e]);return t}getSemantics(){return this.semantics}getSSRCs(){return this.ssrcs}constructor(t,e){this.semantics=t,this.ssrcs=[];for(let t=0;t<e.length;++t)this.ssrcs.push(x(e[t]))}};ei.expand=function(t){return"SourceGroupInfo"===t.constructor.name?t:new ei(t.semantics,t.ssrcs)},ei.clone=function(t){return"SourceGroupInfo"===t.constructor.name?t.clone():ei.expand(t)};var ii=ei;let si=class t{clone(){const e=new t(this.ssrc);return e.setCName(this.cname),e.setStreamId(this.streamId),e.setTrackId(this.trackId),e}plain(){const t={ssrc:this.ssrc};return this.cname&&(t.cname=this.cname),this.streamId&&(t.streamId=this.streamId),this.trackId&&(t.trackId=this.trackId),t}getCName(){return this.cname}setCName(t){this.cname=t}getStreamId(){return this.streamId}setStreamId(t){this.streamId=t}getTrackId(){return this.trackId}setTrackId(t){this.trackId=t}getSSRC(){return this.ssrc}constructor(t){this.ssrc=t}};si.expand=function(t){if("SourceInfo"===t.constructor.name)return t;const e=new si(t.ssrc);return e.setCName(t.cname),e.setStreamId(t.streamId),e.setTrackId(t.trackId),e},si.clone=function(t){return"SourceInfo"===t.constructor.name?t.clone():si.expand(t)};var ni=si;const ri=se;let oi=class t{clone(){var e=new t(this.id,this.paused);for(let t of this.codecs.values())e.addCodec(t.clone());return e.setParams(this.params),e}plain(){var t={id:this.id,paused:this.paused,codecs:{},params:{}};for(var[e,i]of this.codecs.entries())t.codecs[e]=i.plain();for(var[e,s]of this.params.entries())t.params[e]=s;return t}getId(){return this.id}getCodecs(){return this.codecs}addCodec(t){this.codecs.set(t.getType(),t)}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,e){this.params.set(t,e)}isPaused(){return this.paused}constructor(t,e=!1){this.id=t,this.paused=e,this.codecs=new Map,this.params=new Map}};oi.expand=function(t){if("TrackEncodingInfo"===t.constructor.name)return t;const e=new oi(t.id,t.paused);for(const i of w.values(t.codecs||{}))e.addCodec(ri.expand(i));for(const[i,s]of w.entries(t.params||{}))e.addParam(i,s);return e},oi.clone=function(t){return"TrackEncodingInfo"===t.constructor.name?t.clone():oi.expand(t)};var hi=oi;const ai=ii,ui=hi;let ci=class t{clone(){const e=new t(this.media,this.id);this.mediaId&&e.setMediaId(this.mediaId);for(let t=0;t<this.ssrcs.length;++t)e.addSSRC(this.ssrcs[t]);for(let t=0;t<this.groups.length;++t)e.addSourceGroup(this.groups[t].clone());for(let t=0;t<this.encodings.length;++t){const i=[];for(let e=0;e<this.encodings[t].length;++e)i.push(this.encodings[t][e].clone());e.addAlternativeEncodings(i)}return e}plain(){const t={media:this.media,id:this.id,ssrcs:[]};this.mediaId&&(t.mediaId=this.mediaId);for(let e=0;e<this.ssrcs.length;++e)t.ssrcs.push(this.ssrcs[e]);for(let e=0;e<this.groups.length;++e)t.groups||(t.groups=[]),t.groups.push(this.groups[e].plain());for(let e=0;e<this.encodings.length;++e){const i=[];for(let t=0;t<this.encodings[e].length;++t)i.push(this.encodings[e][t].plain());i.length&&(t.encodings||(t.encodings=[]),t.encodings.push(i))}return t}getMedia(){return this.media}setMediaId(t){this.mediaId=t}getMediaId(){return this.mediaId}getId(){return this.id}addSSRC(t){this.ssrcs.push(t)}getSSRCs(){return this.ssrcs}addSourceGroup(t){this.groups.push(t)}getSourceGroup(t){for(const e of this.groups)if(e.getSemantics().toLowerCase()===t.toLowerCase())return e;return null}getSourceGroups(){return this.groups}getSourceGroupsForMediaSSRC(t){return this.groups.filter((e=>e.getSSRCs()[0]===t))}hasSourceGroup(t){for(const e of this.groups)if(e.getSemantics().toLowerCase()===t.toLowerCase())return!0;return!1}getEncodings(){return this.encodings}addEncoding(t){this.encodings.push([t])}addAlternativeEncodings(t){this.encodings.push(t)}setEncodings(t){this.encodings=t}getEncodingSources(){const t=[];if(this.encodings.length)for(const e of this.encodings)for(const i of e){const e={id:i.getId(),rid:i.getId()},s=i.getParams(),n=null==s?void 0:s.get("ssrc");if(void 0!==n){e.media=x(n);for(const t of this.getSourceGroupsForMediaSSRC(e.media))switch(t.getSemantics()){case"FID":e.rtx=t.getSSRCs()[1];break;case"FEC-FR":e.fec=t.getSSRCs()[1]}}t.push(e)}else if(this.hasSourceGroup("SIM")){const e=this.getSourceGroup("SIM").getSSRCs();this.getSourceGroups();for(const i of e){const e={id:String(i),media:i};for(const t of this.getSourceGroupsForMediaSSRC(e.media))switch(t.getSemantics()){case"FID":e.rtx=t.getSSRCs()[1];break;case"FEC-FR":e.fec=t.getSSRCs()[1]}t.push(e)}}else{const e={id:""};if(this.ssrcs.length){e.media=this.ssrcs[0];for(const t of this.getSourceGroupsForMediaSSRC(e.media))switch(t.getSemantics()){case"FID":e.rtx=t.getSSRCs()[1];break;case"FEC-FR":e.fec=t.getSSRCs()[1]}}t.push(e)}return t}constructor(t,e){this.media=t,this.id=e,this.ssrcs=[],this.groups=[],this.encodings=[]}};ci.expand=function(t){var e,i;if("TrackInfo"===t.constructor.name)return t;const s=new ci(t.media,t.id);if(t.mediaId&&s.setMediaId(t.mediaId),Array.isArray(t.ssrcs))for(const e of t.ssrcs)s.addSSRC(e);else if(void 0!==(null===(e=t.ssrcs)||void 0===e?void 0:e.media)){const e=t.ssrcs.media;if(s.addSSRC(e),void 0!==t.ssrcs.rtx){const i=t.ssrcs.rtx;s.addSSRC(i),s.addSourceGroup(new ai("FID",[e,i]))}if(void 0!==t.ssrcs.fec){const i=t.ssrcs.fec;s.addSSRC(i),s.addSourceGroup(new ai("FEC-FR",[e,i]))}}if(t.rid){const e=new ui(t.rid);void 0!==(null===(i=t.ssrcs)||void 0===i?void 0:i.media)&&e.addParam("ssrc",t.ssrcs.media),s.addAlternativeEncodings([e])}for(const e of t.groups||[])s.addSourceGroup(ai.expand(e));for(const e of t.encodings||[]){const t=[];for(const i of e)t.push(ui.expand(i));s.addAlternativeEncodings(t)}return s},ci.clone=function(t){return"TrackInfo"===t.constructor.name?t.clone():ci.expand(t)};var li=ci;const di=li;let fi=class t{clone(){const e=new t(this.id);for(const t of this.tracks.values())e.addTrack(t.clone());return e}plain(){const t={id:this.id,tracks:[]};for(const e of this.tracks.values())t.tracks.push(e.plain());return t}getId(){return this.id}addTrack(t){this.tracks.set(t.getId(),t)}removeTrack(t){return this.tracks.delete(t.getId())}removeTrackById(t){return this.tracks.delete(t)}getFirstTrack(t){for(let e of this.tracks.values())if(e.getMedia().toLowerCase()===t.toLowerCase())return e;return null}getTracks(){return this.tracks}removeAllTracks(){this.tracks.clear()}getTrack(t){return this.tracks.get(t)}constructor(t){this.id=t,this.tracks=new Map}};fi.expand=function(t){if("StreamInfo"===t.constructor.name)return t;const e=new fi(t.id);for(const i of t.tracks||[]){const t=di.expand(i);t&&e.addTrack(t)}return e},fi.clone=function(t){return"StreamInfo"===t.constructor.name?t.clone():fi.expand(t)};var _i=fi;const vi=Ft,gi=function(t){const e=new Intl.Collator(t,{sensitivity:"base"});return(t,i)=>0==e.compare(t,i)}("en-US"),mi=Jt,pi=se,wi=te,yi=ue,bi=le,Ai=Ce,Si=ti,Ti=oe,ki=Ze,Ei=De,xi=ii,Ii=ni,Ri=_i,Ci=li,Pi=hi,Di=Ue,Ni=Oe,Mi=Le,Li=Xe;let Bi=class t{clone(){const e=new t(this.version);for(const t of this.medias)e.addMedia(t.clone());for(const t of this.streams.values())e.addStream(t.clone());for(const t of this.candidates)e.addCandidate(t.clone());return e.setICE(this.ice.clone()),this.dtls&&e.setDTLS(this.dtls.clone()),this.crypto&&e.setCrypto(this.crypto.clone()),e.setExtmapAllowMixed(this.extmapAllowMixed),e}plain(){const t={version:this.version,streams:[],medias:[],candidates:[]};for(const e of this.medias)t.medias.push(e.plain());for(const e of this.streams.values())t.streams.push(e.plain());for(const e of this.candidates)t.candidates.push(e.plain());return this.ice&&(t.ice=this.ice.plain()),this.dtls&&(t.dtls=this.dtls.plain()),this.crypto&&(t.crypto=this.crypto.plain()),this.extmapAllowMixed||(t.extmapAllowMixedNotSupported=!this.extmapAllowMixed),t}unify(){const e=new t(this.version);for(const t of this.medias)e.addMedia(t.clone());const i={audio:e.getMediasByType("audio"),video:e.getMediasByType("video")};for(const t of this.streams.values()){const s=t.clone();for(const t of s.getTracks().values()){let s=i[t.getMedia()].pop();s||(s=this.getMedia(t.getMedia()).clone(),s.setId(t.getId()),e.addMedia(s)),t.setMediaId(s.getId())}e.addStream(s)}for(const t of this.candidates)e.addCandidate(t.clone());return this.ice&&e.setICE(this.ice.clone()),this.dtls&&e.setDTLS(this.dtls.clone()),this.crypto&&e.setCrypto(this.crypto.clone()),e}setVersion(t){this.version=t}addMedia(t){this.medias.push(t)}getMedia(t){for(let e in this.medias){let i=this.medias[e];if(gi(i.getType(),t))return i}return null}getMediasByType(t){let e=[];for(let i in this.medias){let s=this.medias[i];gi(s.getType(),t)&&e.push(s)}return e}getMediaById(t){for(const e of this.medias)if(gi(e.getId(),t))return e;return null}replaceMedia(t){for(let e in this.medias)if(this.medias[e].getId()==t.getId())return this.medias[e]=t,!0;return!1}getMedias(){return this.medias}getVersion(){return this.version}getDTLS(){return this.dtls}setDTLS(t){this.dtls=t}hasCrypto(){return!!this.crypto}getCrypto(){return this.crypto}setCrypto(t){this.crypto=t}hasICE(){return!!this.ice}getICE(){return this.ice}setICE(t){this.ice=t}addCandidate(t){for(const e of this.candidates)if(e.equals(t))return;this.candidates.push(t)}addCandidates(t){for(const e of t)this.addCandidate(e)}getCandidates(){return this.candidates}getStream(t){return this.streams.get(t)}getStreams(){return this.streams}getFirstStream(){for(const t of this.streams.values())return t;return null}addStream(t){this.streams.set(t.getId(),t)}removeStream(t){return this.streams.delete(t.getId())}removeAllStreams(){this.streams.clear()}getTracksByMediaType(t){let e=[];for(const i of this.streams.values())for(const[s,n]of i.getTracks())gi(n.getMedia(),t)&&e.push(n);return e}getTrackByMediaId(t){for(const e of this.streams.values())for(const[i,s]of e.getTracks())if(s.getMediaId()==t)return s;return null}getStreamByMediaId(t){for(const e of this.streams.values())for(const[i,s]of e.getTracks())if(s.getMediaId()==t)return e;return null}getExtmapAllowMixed(){return this.extmapAllowMixed}setExtmapAllowMixed(t){this.extmapAllowMixed=t}answer(e){const i=new t;e.ice&&(e.ice instanceof Ai?i.setICE(e.ice.clone()):i.setICE(Ai.expand(e.ice))),e.dtls&&(e.dtls instanceof yi?i.setDTLS(e.dtls):i.setDTLS(yi.expand(e.dtls))),e.crypto&&(e.crypto instanceof bi?i.setCrypto(e.crypto):i.setCrypto(bi.expand(e.crypto)));for(let t=0;e.candidates&&t<e.candidates.length;++t)e.candidates[t]instanceof mi?i.addCandidate(e.candidates[t].clone()):i.addCandidate(mi.expand(e.candidates[t]));for(const t of this.medias){const s=e&&e.capabilities&&e.capabilities[t.getType()];i.addMedia(t.answer(s))}return i.setExtmapAllowMixed(this.extmapAllowMixed),i}toString(){let t={version:0,media:[]};t.version=0,t.origin={username:"-",sessionId:(new Date).getTime(),sessionVersion:this.version,netType:"IN",ipVer:4,address:"127.0.0.1"},t.name="semantic-sdp",t.connection={version:4,ip:"0.0.0.0"},t.timing={start:0,stop:0},this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),t.msidSemantic={semantic:"WMS",token:"*"},t.groups=[],this.extmapAllowMixed&&(t.extmapAllowMixed="extmap-allow-mixed");const e=[];for(const i of this.medias){let s={type:i.getType(),port:9,protocol:"",fmtp:[],rtp:[],rtcpFb:[],ext:[],bandwidth:[],candidates:[],ssrcGroups:[],ssrcs:[],rids:[]};s.direction=ki.toString(i.getDirection()),this.extmapAllowMixed&&(s.extmapAllowMixed="extmap-allow-mixed"),s.mid=i.getId(),e.push(i.getId()),i.hasControl()&&(s.control=i.getControl()),i.getBitrate()>0&&(s.bandwidth.push({type:"AS",limit:i.getBitrate()}),s.bandwidth.push({type:"TIAS",limit:1e3*i.getBitrate()}));let n=this.getCandidates();for(const t of n)s.candidates.push({foundation:t.getFoundation(),component:t.getComponentId(),transport:t.getTransport(),priority:t.getPriority(),ip:t.getAddress(),port:t.getPort(),type:t.getType(),raddr:t.getRelAddr(),rport:t.getRelPort()});if(this.getICE()&&(s.iceUfrag=this.getICE().getUfrag(),s.icePwd=this.getICE().getPwd()),gi("audio",i.getType())||gi("video",i.getType())){s.rtcpMux="rtcp-mux",s.rtcpRsize="rtcp-rsize",this.getDTLS()?(s.protocol="UDP/TLS/RTP/SAVPF",s.fingerprint={type:this.getDTLS().getHash(),hash:this.getDTLS().getFingerprint()},s.setup=Ti.toString(this.getDTLS().getSetup())):this.getCrypto()?(s.protocol="RTP/SAVPF",s.crypto=[{id:this.getCrypto().getTag(),suite:this.getCrypto().getSuite(),config:this.getCrypto().getKeyParams()}]):s.protocol="RTP/AVP";for(const t of i.getCodecs().values()){gi("video",i.getType())?s.rtp.push({payload:t.getType(),codec:t.getCodec().toUpperCase(),rate:9e4}):gi("opus",t.getCodec())||gi("multiopus",t.getCodec())?s.rtp.push({payload:t.getType(),codec:t.getCodec(),rate:48e3,encoding:t.getChannels()}):s.rtp.push({payload:t.getType(),codec:t.getCodec(),rate:8e3});for(const e of t.getRTCPFeedbacks())s.rtcpFb.push({payload:t.getType(),type:e.getId(),subtype:e.getParams().join(" ")});t.hasRTX()&&(s.rtp.push({payload:t.getRTX(),codec:"rtx",rate:9e4}),s.fmtp.push({payload:t.getRTX(),config:"apt="+t.getType()}));const e=t.getParams();if(w.keys(e).length){const i={payload:t.getType(),config:""};for(const t in e)i.config.length&&(i.config+=";"),w.hasOwnProperty.call(e,t)?i.config+=t+"="+e[t]:i.config+=t;s.fmtp.push(i)}}const t=[];for(const e of s.rtp)t.push(e.payload);s.payloads=t.join(" ");for(let[t,e]of i.getExtensions().entries())s.ext.push({value:t,uri:e});for(let t of i.getRIDs().values()){let e={id:t.getId(),direction:Ei.toString(t.getDirection()),params:""};t.getFormats().length&&(e.params="pt="+t.getFormats().join(","));for(let[i,s]of t.getParams().entries())e.params+=(e.params.length?";":"")+i+"="+s;s.rids.push(e)}const e=i.getSimulcast();if(e){let t=1;s.simulcast={};const i=e.getSimulcastStreams(Ei.SEND),n=e.getSimulcastStreams(Ei.RECV);if(i&&i.length){let e="";for(const t of i){let i="";for(const e of t)i+=(i.length?",":"")+(e.isPaused()?"~":"")+e.getId();e+=(e.length?";":"")+i}s.simulcast["dir"+t]="send",s.simulcast["list"+t]=e,t++}if(n&&n.length){let e="";for(const t of n){let i="";for(const e of t)i+=(i.length?",":"")+(e.isPaused()?"~":"")+e.getId();e+=(e.length?";":"")+i}s.simulcast["dir"+t]="recv",s.simulcast["list"+t]=e,t++}}}else if(i.hasDataChannel()){s.protocol="UDP/DTLS/SCTP",s.payloads="webrtc-datachannel";const t=i.getDataChannel();s.sctpPort=t.getPort(),s.maxMessageSize=t.getMaxMessageSize()}t.media.push(s)}for(let e of this.streams.values())for(let i of e.getTracks().values())for(let s in t.media){let n=t.media[s];if(i.getMediaId()){if(i.getMediaId()==n.mid){let t=i.getSourceGroups();for(let e in t){let i=t[e];n.ssrcGroups.push({semantics:i.getSemantics(),ssrcs:i.getSSRCs().join(" ")})}let s=i.getSSRCs();for(let t in s)n.ssrcs.push({id:s[t],attribute:"cname",value:e.getId()}),n.ssrcs.push({id:s[t],attribute:"msid",value:e.getId()+" "+i.getId()});n.msid=e.getId()+" "+i.getId();break}}else if(gi(n.type,i.getMedia())){let t=i.getSourceGroups();for(let e in t){let i=t[e];n.ssrcGroups.push({semantics:i.getSemantics(),ssrcs:i.getSSRCs().join(" ")})}let s=i.getSSRCs();for(let t in s)n.ssrcs.push({id:s[t],attribute:"cname",value:e.getId()}),n.ssrcs.push({id:s[t],attribute:"msid",value:e.getId()+" "+i.getId()});break}}const i={type:"BUNDLE",mids:e.join(" ")};return t.groups.push(i),vi.write(t)}toIceFragmentString(){let t={version:0,media:[],candidates:[]};this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),this.getICE()&&(t.iceUfrag=this.getICE().getUfrag(),t.icePwd=this.getICE().getPwd());for(const e of this.getCandidates())t.candidates.push({foundation:e.getFoundation(),component:e.getComponentId(),transport:e.getTransport(),priority:e.getPriority(),ip:e.getAddress(),port:e.getPort(),type:e.getType(),raddr:e.getRelAddr(),rport:e.getRelPort()});return vi.write(t).slice(10)}constructor(t){this.version=t||1,this.streams=new Map,this.medias=new Array,this.candidates=new Array,this.ice=null,this.dtls=null,this.crypto=null,this.extmapAllowMixed=!0}};Bi.create=function(t){var e;const i=new Bi;if(t.streams)for(const e of t.streams)i.addStream(Ri.expand(e));t.ice&&(t.ice instanceof Ai?i.setICE(t.ice.clone()):i.setICE(Ai.expand(t.ice))),t.dtls&&(t.dtls instanceof yi?i.setDTLS(t.dtls):i.setDTLS(yi.expand(t.dtls))),t.crypto&&(t.crypto instanceof bi?i.setCrypto(t.crypto):i.setCrypto(bi.expand(t.crypto)));for(const e of t.candidates||[])e instanceof mi?i.addCandidate(e.clone()):i.addCandidate(mi.expand(e));let s=96,n=1,r=0;for(const[o,h]of w.entries(t.capabilities||{}))if(t.unified&&null!==(e=t.streams)&&void 0!==e&&e.length)for(const t of i.getTracksByMediaType(o)){const e=Si.create(t.getMediaId(),o,h);for(const[t,i]of e.getCodecs())i.getType()>=96&&i.setType(s++),i.getRTX()&&i.setRTX(s++);if(h.extensions)for(let t of h.extensions)15===n&&n++,e.addExtension(n++,t);i.addMedia(e)}else{const e=Si.create(t.unified?String(r++):o,o,h);for(const[t,i]of e.getCodecs())i.getType()>=96&&i.setType(s++),i.getRTX()&&i.setRTX(s++);if(h.extensions)for(let t of h.extensions)15===n&&n++,e.addExtension(n++,t);i.addMedia(e)}return i},Bi.expand=function(t){if("SDPInfo"===t.constructor.name)return t;const e=new Bi(t.version);for(const i of t.medias||[]){const t=Si.expand(i);t&&e.addMedia(t)}for(const i of t.streams||[]){const t=Ri.expand(i);t&&e.addStream(t)}for(const i of t.candidates||[]){const t=mi.expand(i);t&&e.addCandidate(t)}return t.ice&&e.setICE(Ai.expand(t.ice)),t.dtls&&e.setDTLS(yi.expand(t.dtls)),t.crypto&&e.setCrypto(bi.expand(t.crypto)),t.extmapAllowMixedNotSupported&&(this.extmapAllowMixed=!t.extmapAllowMixedNotSupported),e},Bi.clone=function(t){return"SDPInfo"===t.constructor.name?t.clone():Bi.expand(t)},Bi.process=function(t){return Bi.parse(t)},Bi.parse=function(t){const e=vi.parse(t),i=new Bi;if(i.setVersion(e.version),e.iceUfrag&&e.icePwd){const t=String(e.iceUfrag),s=String(e.icePwd),n=new Ai(t,s);n.setLite("ice-lite"==e.icelite),n.setEndOfCandidates("end-of-candidates"==e.endOfCandidates),i.setICE(n)}for(let t in e.media){const s=e.media[t],n=s.type,r=s.mid?s.mid.toString():t,o=new Si(r,n);if(s.iceUfrag&&s.icePwd){const t=String(s.iceUfrag),n=String(s.icePwd),r=new Ai(t,n);r.setLite("ice-lite"==e.icelite),r.setEndOfCandidates("end-of-candidates"==s.endOfCandidates),i.setICE(r)}for(let t=0;s.candidates&&t<s.candidates.length;++t){const e=s.candidates[t],n=new mi(e.foundation,e.component,e.transport,e.priority,e.ip,e.port,e.type,e.raddr,e.rport);i.addCandidate(n)}const h=s.fingerprint||e.fingerprint;if(h){const t=h.type,e=h.hash;let n=Ti.ACTPASS;s.setup&&(n=Ti.byValue(s.setup)),i.setDTLS(new yi(n,t,e))}if(s.crypto){const t=s.crypto[0];i.setCrypto(new bi(t.id,t.suite,t.config,t.sessionConfig))}let a=ki.SENDRECV;s.direction&&(a=ki.byValue(s.direction),o.setDirection(a)),s.control&&o.setControl(s.control),i.setExtmapAllowMixed("extmap-allow-mixed"==s.extmapAllowMixed||"extmap-allow-mixed"==e.extmapAllowMixed);const u=new Map;for(let t in s.rtp){const e=s.rtp[t],i=e.payload,n=e.codec;if("RED"===n.toUpperCase()||"ULPFEC"===n.toUpperCase())continue;let r={};for(let t in s.fmtp){const e=s.fmtp[t];if(e.payload===i){const t=e.config.split(";");for(let e in t){const i=t[e].split("="),s=i[0].trim(),n=i.splice(1).join("=").trim();r[s]=n}}}if("RTX"===n.toUpperCase())u.set(x(r.apt),i);else{const t=new pi(n,i,r);e.encoding>1&&t.setChannels(e.encoding),o.addCodec(t)}}for(let t of u.entries()){const e=o.getCodecForType(t[0]);e&&e.setRTX(t[1])}for(let t=0;s.rtcpFb&&t<s.rtcpFb.length;++t){const e=o.getCodecForType(s.rtcpFb[t].payload);if(e){const i=s.rtcpFb[t].type,n=s.rtcpFb[t].subtype?s.rtcpFb[t].subtype.split(" "):null;e.addRTCPFeedback(new wi(i,n))}}const c=s.ext;for(let t in c){const e=c[t];o.addExtension(e.value,e.uri)}const l=s.rids;for(let t in l){const e=l[t],i=new Mi(e.id,Ei.byValue(e.direction));let s=[];const n=new Map;if(e.params){const t=vi.parseParams(e.params);for(let e in t)"pt"===e?s=t[e].split(","):n.set(e,t[e]);i.setFormats(s),i.setParams(n)}o.addRID(i)}const d=[];if(s.simulcast){const t=new Di;if(s.simulcast.dir1){const e=Ei.byValue(s.simulcast.dir1),i=vi.parseSimulcastStreamList(s.simulcast.list1);for(let s=0;s<i.length;++s){const n=[];for(let t=0;t<i[s].length;++t)n.push(new Ni(i[s][t].scid,i[s][t].paused));t.addSimulcastAlternativeStreams(e,n)}}if(s.simulcast.dir2){const e=Ei.byValue(s.simulcast.dir2),i=vi.parseSimulcastStreamList(s.simulcast.list2);for(let s=0;s<i.length;++s){const n=[];for(let t=0;t<i[s].length;++t)n.push(new Ni(i[s][t].scid,i[s][t].paused));t.addSimulcastAlternativeStreams(e,n)}}for(let e of t.getSimulcastStreams(Ei.SEND)){const t=[];for(let i=0;i<e.length;i++){const s=new Pi(e[i].getId(),e[i].isPaused()),n=o.getRID(s.getId());if(n){const e=n.getFormats();for(let t=0;e&&t<e.length;++t){const i=o.getCodecForType(e[t]);i&&s.addCodec(i)}s.setParams(n.getParams()),t.push(s)}}t.length&&d.push(t)}o.setSimulcast(t)}const f=new Map;if(s.ssrcs)for(let t in s.ssrcs){let e=s.ssrcs[t],o=e.id,h=e.attribute,a=e.value,u=f.get(o);if(u||(u=new Ii(o),f.set(u.getSSRC(),u)),gi("cname",h))u.setCName(a);else if(gi("msid",h)){let t=a.split(" "),e=t[0],s=t[1];u.setStreamId(e),u.setTrackId(s);let h=i.getStream(e);h||(h=new Ri(e),i.addStream(h));let c=h.getTrack(s);c||(c=new Ci(n,s),c.setMediaId(r),c.setEncodings(d),h.addTrack(c)),c.addSSRC(o)}}if(s.msid){let t=s.msid.split(" "),e=t[0],o=t[1],h=i.getStream(e);h||(h=new Ri(e),i.addStream(h));let a=h.getTrack(o);a||(a=new Ci(n,o),a.setMediaId(r),a.setEncodings(d),h.addTrack(a));for(let[t,i]of f.entries())i.getStreamId()||(i.setStreamId(e),i.setTrackId(o),a.addSSRC(t))}for(let[t,e]of f.entries())if(!e.getStreamId()){let s=e.getCName(),o=r;e.setStreamId(s),e.setTrackId(o);let h=i.getStream(s);h||(h=new Ri(s),i.addStream(h));let a=h.getTrack(o);a||(a=new Ci(n,o),a.setMediaId(r),a.setEncodings(d),h.addTrack(a)),a.addSSRC(t)}if(s.ssrcGroups)for(let t in s.ssrcGroups){let e=s.ssrcGroups[t],n=e.ssrcs.split(" "),r=new xi(e.semantics,n),o=f.get(x(n[0]));o&&i.getStream(o.getStreamId()).getTrack(o.getTrackId()).addSourceGroup(r)}if("application"==s.type&&"webrtc-datachannel"==s.payloads){const t=new Li(s.sctpPort,s.maxMessageSize);o.setDataChannel(t)}i.addMedia(o)}return i};var Oi=Bi;w.defineProperty(Ot,"__esModule",{value:!0});var Fi=Ot.SDPInfo=Oi;Ot.CandidateInfo=Jt,Ot.CodecInfo=se,Ot.DTLSInfo=ue,Ot.CryptoInfo=le,Ot.ICEInfo=Ce;var Vi=Ot.MediaInfo=ti;Ot.Setup=oe,Ot.SourceGroupInfo=ii,Ot.SourceInfo=ni,Ot.StreamInfo=_i,Ot.TrackInfo=li,Ot.RTCPFeedbackInfo=te,Ot.TrackEncodingInfo=hi,Ot.RIDInfo=Le,Ot.SimulcastInfo=Ue,Ot.SimulcastStreamInfo=Oe,Ot.DataChannelInfo=Xe;var Wi=Ot.Direction=Ze,Ui={exports:{}};!function(t,e){!function(i,s){var n="function",r="undefined",o="object",h="string",a="major",u="model",c="name",l="type",d="vendor",f="version",_="architecture",v="console",g="mobile",m="tablet",p="smarttv",w="wearable",y="embedded",b="Amazon",A="Apple",S="ASUS",T="BlackBerry",k="Browser",E="Chrome",x="Firefox",I="Google",R="Huawei",C="LG",P="Microsoft",D="Motorola",N="Opera",M="Samsung",L="Sharp",B="Sony",O="Xiaomi",F="Zebra",V="Facebook",W="Chromium OS",U="Mac OS",G=" Browser",Z=function(t){for(var e={},i=0;i<t.length;i++)e[t[i].toUpperCase()]=t[i];return e},H=function(t,e){return typeof t===h&&-1!==X(e).indexOf(X(t))},X=function(t){return t.toLowerCase()},z=function(t,e){if(typeof t===h)return t=t.replace(/^\s\s*/,""),typeof e===r?t:t.substring(0,500)},q=function(t,e){for(var i,r,h,a,u,c,l=0;l<e.length&&!u;){var d=e[l],f=e[l+1];for(i=r=0;i<d.length&&!u&&d[i];)if(u=d[i++].exec(t))for(h=0;h<f.length;h++)c=u[++r],typeof(a=f[h])===o&&a.length>0?2===a.length?typeof a[1]==n?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:3===a.length?typeof a[1]!==n||a[1].exec&&a[1].test?this[a[0]]=c?c.replace(a[1],a[2]):s:this[a[0]]=c?a[1].call(this,c,a[2]):s:4===a.length&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):s):this[a]=c||s;l+=2}},Y=function(t,e){for(var i in e)if(typeof e[i]===o&&e[i].length>0){for(var n=0;n<e[i].length;n++)if(H(e[i][n],t))return"?"===i?s:i}else if(H(e[i],t))return"?"===i?s:i;return e.hasOwnProperty("*")?e["*"]:t},K={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},j={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,f],[/opios[\/ ]+([\w\.]+)/i],[f,[c,N+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[c,N+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[c,N]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[c,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[c,f],[/quark(?:pc)?\/([-\w\.]+)/i],[f,[c,"Quark"]],[/\bddg\/([\w\.]+)/i],[f,[c,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[c,"UC"+k]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[c,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[c,"Smart Lenovo "+k]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+k],f],[/\bfocus\/([\w\.]+)/i],[f,[c,x+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[c,N+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[c,N+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[c,"MIUI "+k]],[/fxios\/([-\w\.]+)/i],[f,[c,x]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360"+G]],[/\b(qq)\/([\w\.]+)/i],[[c,/(.+)/,"$1Browser"],f],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1"+G],f],[/samsungbrowser\/([\w\.]+)/i],[f,[c,M+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],f],[/metasr[\/ ]?([\d\.]+)/i],[f,[c,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[c,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[c,f],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,V],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[c,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[c,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[c,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[c,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,E+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[c,"Android "+k]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[f,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],f],[/(wolvic)\/([\w\.]+)/i],[c,f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[c,x+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[c,[f,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[c,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[_,"amd64"]],[/(ia32(?=;))/i],[[_,X]],[/((?:i[346]|x)86)[;\)]/i],[[_,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[_,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[_,"armhf"]],[/windows (ce|mobile); ppc;/i],[[_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[_,/ower/,"",X]],[/(sun4\w)[;\)]/i],[[_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[_,X]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[d,M],[l,m]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[u,[d,M],[l,g]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[d,A],[l,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[d,A],[l,m]],[/(macintosh);/i],[u,[d,A]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[d,L],[l,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[d,R],[l,m]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[d,R],[l,g]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[u,/_/g," "],[d,O],[l,g]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[d,O],[l,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[d,"OPPO"],[l,g]],[/\b(opd2\d{3}a?) bui/i],[u,[d,"OPPO"],[l,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[d,"Vivo"],[l,g]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[d,"Realme"],[l,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[d,D],[l,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[d,D],[l,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[d,C],[l,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[d,C],[l,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[d,"Lenovo"],[l,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[d,"Nokia"],[l,g]],[/(pixel c)\b/i],[u,[d,I],[l,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[d,I],[l,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[d,B],[l,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[d,B],[l,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[d,"OnePlus"],[l,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[d,b],[l,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[d,b],[l,g]],[/(playbook);[-\w\),; ]+(rim)/i],[u,d,[l,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[d,T],[l,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[d,S],[l,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[d,S],[l,g]],[/(nexus 9)/i],[u,[d,"HTC"],[l,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[u,/_/g," "],[l,g]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[u,[d,"TCL"],[l,m]],[/(itel) ((\w+))/i],[[d,X],u,[l,Y,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[d,"Acer"],[l,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[d,"Meizu"],[l,g]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[d,"Ulefone"],[l,g]],[/droid.+; (a(?:015|06[35]|142p?))/i],[u,[d,"Nothing"],[l,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,u,[l,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,u,[l,m]],[/(surface duo)/i],[u,[d,P],[l,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[d,"Fairphone"],[l,g]],[/(u304aa)/i],[u,[d,"AT&T"],[l,g]],[/\bsie-(\w*)/i],[u,[d,"Siemens"],[l,g]],[/\b(rct\w+) b/i],[u,[d,"RCA"],[l,m]],[/\b(venue[\d ]{2,7}) b/i],[u,[d,"Dell"],[l,m]],[/\b(q(?:mv|ta)\w+) b/i],[u,[d,"Verizon"],[l,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[d,"Barnes & Noble"],[l,m]],[/\b(tm\d{3}\w+) b/i],[u,[d,"NuVision"],[l,m]],[/\b(k88) b/i],[u,[d,"ZTE"],[l,m]],[/\b(nx\d{3}j) b/i],[u,[d,"ZTE"],[l,g]],[/\b(gen\d{3}) b.+49h/i],[u,[d,"Swiss"],[l,g]],[/\b(zur\d{3}) b/i],[u,[d,"Swiss"],[l,m]],[/\b((zeki)?tb.*\b) b/i],[u,[d,"Zeki"],[l,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],u,[l,m]],[/\b(ns-?\w{0,9}) b/i],[u,[d,"Insignia"],[l,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[d,"NextBook"],[l,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],u,[l,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],u,[l,g]],[/\b(ph-1) /i],[u,[d,"Essential"],[l,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[d,"Envizen"],[l,m]],[/\b(trio[-\w\. ]+) b/i],[u,[d,"MachSpeed"],[l,m]],[/\btu_(1491) b/i],[u,[d,"Rotor"],[l,m]],[/(shield[\w ]+) b/i],[u,[d,"Nvidia"],[l,m]],[/(sprint) (\w+)/i],[d,u,[l,g]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[d,P],[l,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[d,F],[l,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[d,F],[l,g]],[/smart-tv.+(samsung)/i],[d,[l,p]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[d,M],[l,p]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,C],[l,p]],[/(apple) ?tv/i],[d,[u,A+" TV"],[l,p]],[/crkey/i],[[u,E+"cast"],[d,I],[l,p]],[/droid.+aft(\w+)( bui|\))/i],[u,[d,b],[l,p]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[d,L],[l,p]],[/(bravia[\w ]+)( bui|\))/i],[u,[d,B],[l,p]],[/(mitv-\w{5}) bui/i],[u,[d,O],[l,p]],[/Hbbtv.*(technisat) (.*);/i],[d,u,[l,p]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[d,z],[u,z],[l,p]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,p]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,u,[l,v]],[/droid.+; (shield) bui/i],[u,[d,"Nvidia"],[l,v]],[/(playstation [345portablevi]+)/i],[u,[d,B],[l,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[d,P],[l,v]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[u,[d,M],[l,w]],[/((pebble))app/i],[d,u,[l,w]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[d,A],[l,w]],[/droid.+; (glass) \d/i],[u,[d,I],[l,w]],[/droid.+; (wt63?0{2,3})\)/i],[u,[d,F],[l,w]],[/(quest( \d| pro)?)/i],[u,[d,V],[l,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[l,y]],[/(aeobc)\b/i],[u,[d,b],[l,y]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[l,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[l,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,g]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[c,[f,Y,K]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,Y,K],[c,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,U],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,f],[/\(bb(10);/i],[f,[c,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[c,x+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[c,E+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,W],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,f],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,f]]},Q=function(t,e){if(typeof t===o&&(e=t,t=s),!(this instanceof Q))return new Q(t,e).getResult();var v=typeof i!==r&&i.navigator?i.navigator:s,p=t||(v&&v.userAgent?v.userAgent:""),w=v&&v.userAgentData?v.userAgentData:s,y=e?function(t,e){var i={};for(var s in t)e[s]&&e[s].length%2==0?i[s]=e[s].concat(t[s]):i[s]=t[s];return i}(j,e):j,b=v&&v.userAgent==p;return this.getBrowser=function(){var t={};return t[c]=s,t[f]=s,q.call(t,p,y.browser),t[a]=function(t){return typeof t===h?t.replace(/[^\d\.]/g,"").split(".")[0]:s}(t[f]),b&&v&&v.brave&&typeof v.brave.isBrave==n&&(t[c]="Brave"),t},this.getCPU=function(){var t={};return t[_]=s,q.call(t,p,y.cpu),t},this.getDevice=function(){var t={};return t[d]=s,t[u]=s,t[l]=s,q.call(t,p,y.device),b&&!t[l]&&w&&w.mobile&&(t[l]=g),b&&"Macintosh"==t[u]&&v&&typeof v.standalone!==r&&v.maxTouchPoints&&v.maxTouchPoints>2&&(t[u]="iPad",t[l]=m),t},this.getEngine=function(){var t={};return t[c]=s,t[f]=s,q.call(t,p,y.engine),t},this.getOS=function(){var t={};return t[c]=s,t[f]=s,q.call(t,p,y.os),b&&!t[c]&&w&&w.platform&&"Unknown"!=w.platform&&(t[c]=w.platform.replace(/chrome os/i,W).replace(/macos/i,U)),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return p},this.setUA=function(t){return p=typeof t===h&&t.length>500?z(t,500):t,this},this.setUA(p),this};Q.VERSION="0.7.39",Q.BROWSER=Z([c,f,a]),Q.CPU=Z([_]),Q.DEVICE=Z([u,d,l,v,g,p,m,w,y]),Q.ENGINE=Q.OS=Z([c,f]),t.exports&&(e=t.exports=Q),e.UAParser=Q;var J=typeof i!==r&&(i.jQuery||i.Zepto);if(J&&!J.ua){var $=new Q;J.ua=$.getResult(),J.ua.get=function(){return $.getUA()},J.ua.set=function(t){$.setUA(t);var e=$.getResult();for(var i in e)J.ua[i]=e[i]}}}("object"==typeof s?s:A)}(Ui,Ui.exports);const Gi=T(Ui.exports),Zi=["iOS"];class Hi extends Gi{isChromium(){return this.getUA().match(/Chrome/i)}isChrome(){const t=this.getBrowser();if(!t.name)return!1;const e=this.getOS();let i=!0;return i=!new RegExp(Zi.join("|"),"i").test(e.name),t.name.match(/Chrome/i)&&i}isFirefox(){const t=this.getBrowser();return!!t.name&&t.name.match(/Firefox/i)}isOpera(){const t=this.getBrowser();return!!t.name&&t.name.match(/Opera/i)}isSafari(){const t=this.getBrowser();return!!t.name&&t.name.match(/Safari/i)}constructor(){super(s.navigator.userAgent)}}const Xi=at.get("SdpParser"),zi=Array.from({length:31},((t,e)=>e+35)),qi=Array.from({length:32},((t,e)=>e+96)),Yi=Array.from({length:14},((t,e)=>e+1)),Ki=Array.from({length:240},((t,e)=>e+16)),ji={setSimulcast(t,e){if(Xi.info("Setting simulcast. Codec: ",e),!(new Hi).isChromium())return Xi.warn("Your browser does not appear to support Simulcast. For a better experience, use a Chromium based browser."),t;if("h264"!==e&&"vp8"!==e)return Xi.warn("Your selected codec ".concat(e," does not appear to support Simulcast.  To broadcast using simulcast, please use H.264 or VP8.")),t;if(!/m=video/.test(t))return Xi.warn("There is no available video for simulcast to be enabled."),t;try{const e=new RegExp("m=video.*?a=ssrc:(\\d*) cname:(.+?)\\r\\n","s"),i=new RegExp("m=video.*?a=ssrc:(\\d*) msid:(.+?)\\r\\n","s"),s=e.exec(t),n=s[1],r=s[2],o=i.exec(t)[2],h=2,a=[n];for(let e=0;e<h;++e){const i=100+2*e,s=i+1;a.push(i),t+="a=ssrc-group:FID "+i+" "+s+"\r\na=ssrc:"+i+" cname:"+r+"\r\na=ssrc:"+i+" msid:"+o+"\r\na=ssrc:"+s+" cname:"+r+"\r\na=ssrc:"+s+" msid:"+o+"\r\n"}return t+="a=ssrc-group:SIM "+a.join(" ")+"\r\n",Xi.info("Simulcast setted"),Xi.debug("Simulcast SDP: ",t),t}catch(t){throw Xi.error("Error setting SDP for simulcast: ",t),t}},setStereo:t=>(Xi.info("Replacing SDP response for support stereo"),t=t.replace(/useinbandfec=1/g,"useinbandfec=1; stereo=1"),Xi.info("Replaced SDP response for support stereo"),Xi.debug("New SDP value: ",t),t),setDTX:t=>(Xi.info("Replacing SDP response for support dtx"),t=t.replace("useinbandfec=1","useinbandfec=1; usedtx=1"),Xi.info("Replaced SDP response for support dtx"),Xi.debug("New SDP value: ",t),t),setAbsoluteCaptureTime(t){const e="a=extmap:"+ji.getAvailableHeaderExtensionIdRange(t)[0]+" http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((t,i,s)=>i+e+s)),Xi.info("Replaced SDP response for setting absolute capture time"),Xi.debug("New SDP value: ",t),t},setDependencyDescriptor(t){const e="a=extmap:"+ji.getAvailableHeaderExtensionIdRange(t)[0]+" https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((t,i,s)=>i+e+s)),Xi.info("Replaced SDP response for setting depency descriptor"),Xi.debug("New SDP value: ",t),t},setVideoBitrate(t,e){if(e<1)Xi.info("Remove bitrate restrictions"),t=t.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"");else{const i=Fi.parse(t),s=i.getMedia("video");Xi.info("Setting video bitrate"),s.setBitrate(e),t=i.toString()}return t},removeSdpLine:(t,e)=>(Xi.debug("SDP before trimming: ",t),t=t.split("\n").filter((t=>t.trim()!==e)).join("\n"),Xi.debug("SDP trimmed result: ",t),t),adaptCodecName(t,e,i){if(!t)return t;const s=new RegExp("".concat(e),"i");return t.replace(s,i)},setMultiopus(t,e){if(!(new Hi).isFirefox()&&(!e||Qi(e)))if(t.includes("multiopus/48000/6"))Xi.info("Multiopus already setted");else{Xi.info("Setting multiopus");const e=/m=audio 9 UDP\/TLS\/RTP\/SAVPF (.*)\r\n/.exec(t)[0],i=ji.getAvailablePayloadTypeRange(t)[0],s=e.replace("\r\n"," ")+i+"\r\na=rtpmap:"+i+" multiopus/48000/6\r\na=fmtp:"+i+" channel_mapping=0,4,1,2,3,5;coupled_streams=2;minptime=10;num_streams=4;useinbandfec=1\r\n";t=t.replace(e,s),Xi.info("Multiopus offer created"),Xi.debug("SDP parsed for multioups: ",t)}return t},getAvailablePayloadTypeRange(t){const e=t.matchAll(/m=(?:.*) (?:.*) UDP\/TLS\/RTP\/SAVPF (.*)\r\n/gm);let i=qi.concat(zi);for(const t of e){const e=t[1].split(" ").map((t=>x(t)));i=i.filter((t=>!e.includes(t)))}return i},getAvailableHeaderExtensionIdRange(t){const e=t.matchAll(/a=extmap:(\d+)(?:.*)\r\n/gm);let i=Yi.concat(Ki);for(const t of e){const e=t[1].split(" ").map((t=>x(t)));i=i.filter((t=>!e.includes(t)))}return i},renegotiate(t,e){const i=Fi.parse(t),s=Fi.parse(e);for(const t of i.getMedias()){let e=s.getMediaById(t.getId());if(!e){e=new Vi(t.getId(),t.getType()),e.setDirection(Wi.reverse(t.getDirection()));const i=s.getMedia(t.getType());if(i){e.setCodecs(i.getCodecs());for(const[t,s]of i.getExtensions())e.addExtension(t,s)}s.addMedia(e)}}return s.toString()},updateMissingVideoExtensions(t,e){var i;const s=Fi.parse(t),n=null==(i=Fi.parse(e).getMediasByType("video")[0])?void 0:i.getExtensions();if(n||n.length){for(const e of s.getMediasByType("video")){const i=e.getExtensions();n.forEach(((s,n)=>{if(!i.get(n)){const i=e.getId(),r="a=extmap:"+n+" "+s+"\r\n",o=new RegExp("(a=mid:"+i+"\r\n(?:.*\r\n)*?)","g");t=t.replace(o,((t,e,i)=>e+r))}}))}return t}},getCodecPayloadType(t){const e=t.matchAll(/a=rtpmap:(\d+) (\w+)\/\d+/g),i={};for(const t of e)i[t[1]]=t[2];return i}},Qi=t=>t.getAudioTracks().some((t=>t.getSettings().channelCount>2)),Ji={VP8:"vp8",VP9:"vp9",H264:"h264",AV1:"av1",H265:"h265"},$i={OPUS:"opus",MULTIOPUS:"multiopus"},ts=at.get("PeerConnection"),es="Publisher",is="Viewer",ss={track:"track",connectionStateChange:"connectionStateChange"},ns={stereo:!1,mediaStream:null,codec:"h264",simulcast:!1,scalabilityMode:null,disableAudio:!1,disableVideo:!1,setSDPToPeer:!0};class rs extends Et{async createRTCPeer(t,e){void 0===t&&(t={autoInitStats:!0,statsIntervalMs:1e3}),void 0===e&&(e=is),ts.info("Creating new RTCPeerConnection"),ts.debug("RTC configuration provided by user: ",t),this.peer=as(this,t),this.mode=e,t.autoInitStats&&this.initStats(t)}getRTCPeer(){return ts.info("Getting RTC Peer"),this.peer}async closeRTCPeer(){var t;ts.info("Closing RTCPeerConnection"),null==(t=this.peer)||t.close(),this.peer=null,this.stopStats(),this.emit(ss.connectionStateChange,"closed")}async setRTCRemoteSDP(t){ts.info("Setting RTC Remote SDP");const e={type:"answer",sdp:t};try{await this.peer.setRemoteDescription(e),ts.info("RTC Remote SDP was set successfully."),ts.debug("RTC Remote SDP new value: ",t)}catch(t){throw ts.error("Error while setting RTC Remote SDP: ",t),t}}async getRTCLocalSDP(t){void 0===t&&(t=ns),ts.info("Getting RTC Local SDP"),t=d(d({},ns),t),ts.debug("Options: ",t);const e=hs(t.mediaStream);e?ls(this.peer,e,t):ds(this.peer,t),ts.info("Creating peer offer");const i=await this.peer.createOffer();return ts.info("Peer offer created"),ts.debug("Peer offer response: ",i.sdp),this.sessionDescription=i,t.disableAudio||(t.stereo&&(this.sessionDescription.sdp=ji.setStereo(this.sessionDescription.sdp)),t.dtx&&(this.sessionDescription.sdp=ji.setDTX(this.sessionDescription.sdp)),this.sessionDescription.sdp=ji.setMultiopus(this.sessionDescription.sdp,e)),!t.disableVideo&&t.simulcast&&(this.sessionDescription.sdp=ji.setSimulcast(this.sessionDescription.sdp,t.codec)),t.absCaptureTime&&(this.sessionDescription.sdp=ji.setAbsoluteCaptureTime(this.sessionDescription.sdp)),t.dependencyDescriptor&&(this.sessionDescription.sdp=ji.setDependencyDescriptor(this.sessionDescription.sdp)),t.setSDPToPeer&&(await this.peer.setLocalDescription(this.sessionDescription),ts.info("Peer local description set")),this.sessionDescription.sdp}async addRemoteTrack(t,e){return new Promise(((i,s)=>{try{const s=this.peer.addTransceiver(t,{direction:"recvonly",streams:e});this.transceiverMap.set(s,i)}catch(t){s(t)}}))}updateBandwidthRestriction(t,e){if(this.mode===is)throw ts.error("Viewer attempting to update bitrate, this is not allowed"),new m("It is not possible for a viewer to update the bitrate.");return ts.info("Updating bandwidth restriction, bitrate value: ",e),ts.debug("SDP value: ",t),ji.setVideoBitrate(t,e)}async updateBitrate(t){if(void 0===t&&(t=0),this.mode===is)throw ts.error("Viewer attempting to update bitrate, this is not allowed"),new m("It is not possible for a viewer to update the bitrate.");if(!this.peer)throw ts.error("Cannot update bitrate. No peer found."),new m("Cannot update bitrate. No peer found.");ts.info("Updating bitrate to value: ",t),this.sessionDescription=await this.peer.createOffer(),await this.peer.setLocalDescription(this.sessionDescription);const e=this.updateBandwidthRestriction(this.peer.remoteDescription.sdp,t);await this.setRTCRemoteSDP(e),ts.info("Bitrate restrictions updated: ","".concat(t>0?t:"unlimited"," kbps"))}getRTCPeerStatus(){if(ts.info("Getting RTC peer status"),!this.peer)return null;const t=fs(this.peer);return ts.info("RTC peer status getted, value: ",t),t}replaceTrack(t){if(!this.peer)return void ts.error("Could not change track if there is not an active connection.");const e=this.peer.getSenders().find((e=>e.track.kind===t.kind));e?e.replaceTrack(t):ts.error("There is no ".concat(t.kind," track in active broadcast."))}static getCapabilities(t){const e=new Hi,i=RTCRtpSender.getCapabilities(t);if(i){const s={};let n=new RegExp("^video/(".concat(w.values(Ji).join("|"),")x?$"),"i");"audio"===t&&(n=new RegExp("^audio/(".concat(w.values($i).join("|"),")$"),"i"),e.isChrome()&&(s.multiopus={mimeType:"audio/multiopus",channels:6}));for(const t of i.codecs){const e=t.mimeType.match(n);if(e){const i=e[1].toLowerCase();if(s[i]=y(d({},s[i]),{mimeType:t.mimeType}),t.scalabilityModes){let e=s[i].scalabilityModes||[];e=[...e,...t.scalabilityModes],s[i].scalabilityModes=[...new Set(e)]}t.channels&&(s[i].channels=t.channels)}}i.codecs=w.keys(s).map((t=>d({codec:t},s[t])))}return i}getTracks(){var t,e;return null==(e=null==(t=this.peer)?void 0:t.getSenders())?void 0:e.map((t=>t.track))}initStats(t){this.peerConnectionStats?ts.warn("PeerConnection.initStats() has already been called. Automatic initialization occurs via View.connect(), Publish.connect() or this.createRTCPeer(). See options"):this.peer?(this.peerConnectionStats=new Bt(this.peer,t),Ct(this.peerConnectionStats,this,[Lt])):ts.warn("Cannot init peer stats: RTCPeerConnection not initialized")}stopStats(){var t;null==(t=this.peerConnectionStats)||t.stop(),this.peerConnectionStats=null}constructor(){super(),this.mode=null,this.sessionDescription=null,this.peer=null,this.peerConnectionStats=null,this.transceiverMap=new Map}}const os=t=>(null==t?void 0:t.getAudioTracks().length)<=1&&(null==t?void 0:t.getVideoTracks().length)<=1,hs=t=>{if(!t)return null;if(t instanceof MediaStream&&os(t))return t;if(!(t instanceof MediaStream)){ts.info("Creating MediaStream to add received tracks.");const e=new MediaStream;for(const i of t)e.addTrack(i);if(os(e))return e}throw ts.error("MediaStream must have 1 audio track and 1 video track, or at least one of them."),new m("MediaStream must have 1 audio track and 1 video track, or at least one of them.")},as=(t,e)=>{const i=new RTCPeerConnection(e);return cs(t,i),i};async function us(t){return new Promise((e=>u(e,t)))}const cs=(t,e)=>{e.ontrack=async e=>{ts.info("New track from peer."),ts.debug("Track event value: ",e);const i=t.transceiverMap.get(e.transceiver);if(i){for(;!e.transceiver.mid;)await us(100);i(e.transceiver),t.transceiverMap.delete(e.transceiver)}u((()=>{t.emit(ss.track,e)}),0)},e.connectionState?e.onconnectionstatechange=i=>{ts.info("Peer connection state change: ",e.connectionState),t.emit(ss.connectionStateChange,e.connectionState)}:e.oniceconnectionstatechange=i=>{ts.info("Peer ICE connection state change: ",e.iceConnectionState),t.emit(ss.connectionStateChange,e.iceConnectionState)},e.onnegotiationneeded=async t=>{if(!e.remoteDescription)return;ts.info("Peer onnegotiationneeded, updating local description");const i=await e.createOffer();ts.info("Peer onnegotiationneeded, got local offer",i.sdp),i.sdp=ji.updateMissingVideoExtensions(i.sdp,e.remoteDescription.sdp),await e.setLocalDescription(i);const s=ji.renegotiate(i.sdp,e.remoteDescription.sdp);ts.info("Peer onnegotiationneeded, updating remote description",s),await e.setRemoteDescription({type:"answer",sdp:s}),ts.info("Peer onnegotiationneeded, renegotiation done")}},ls=(t,e,i)=>{ts.info("Adding mediaStream tracks to RTCPeerConnection");for(const s of e.getTracks()){const n={streams:[e]};"audio"===s.kind&&(n.direction=i.disableAudio?"inactive":"sendonly"),"video"===s.kind&&(n.direction=i.disableVideo?"inactive":"sendonly",i.scalabilityMode&&(new Hi).isChrome()?(ts.debug("Video track with scalability mode: ".concat(i.scalabilityMode,".")),n.sendEncodings=[{scalabilityMode:i.scalabilityMode}]):i.scalabilityMode&&ts.warn("SVC is only supported in Google Chrome")),t.addTransceiver(s,n),ts.info("Track '".concat(s.label,"' added: "),"id: ".concat(s.id),"kind: ".concat(s.kind))}},ds=(t,e)=>{const i=new Hi;if(!e.disableVideo){const e=t.addTransceiver("video",{direction:"recvonly"});i.isOpera()&&e.setCodecPreferences(RTCRtpReceiver.getCapabilities("video").codecs.filter((t=>"video/H264"!==t.mimeType||t.sdpFmtpLine.includes("profile-level-id=4"))))}e.disableAudio||t.addTransceiver("audio",{direction:"recvonly"});for(let i=0;i<e.multiplexedAudioTracks;i++)t.addTransceiver("audio",{direction:"recvonly"})},fs=t=>{var e;const i=null!=(e=t.connectionState)?e:t.iceConnectionState;switch(i){case"checking":return"connecting";case"completed":return"connected";default:return i}};var _s={};w.defineProperty(_s,"__esModule",{value:!0}),_s.TypedEmitter=kt.EventEmitter;const{TypedEmitter:vs}=_s;class gs extends vs{cmd(t,e){return this.tm.cmd(t,e,this.namespace)}event(t,e){return this.tm.event(t,e,this.namespace)}close(){return this.tm.namespaces.delete(this.namespace)}constructor(t,e){super(),this.namespace=t,this.tm=e}}const ms=T(class extends vs{h_(t){this.transport.send(JSON.stringify(t))}cmd(t,e,i){return void 0===i&&(i=void 0),new Promise(((s,n)=>{if(!t||0===t.length)throw new m("Bad command name");const r={type:"cmd",transId:this.maxId++,name:t,data:e};i&&(r.namespace=i),this.transactions.set(r.transId,y(d({},r),{resolve:s,reject:n}));try{this.h_(r)}catch(t){throw this.transactions.delete(r.transId),t}}))}event(t,e,i){if(void 0===i&&(i=void 0),!t||0===t.length)throw new m("Bad event name");const s={type:"event",name:t,data:e};i&&(s.namespace=i),this.h_(s)}namespace(t){let e=this.namespaces.get(t);return e||(e=new gs(t,this),this.namespaces.set(t,e),e)}close(){for(const t of this.namespaces.values())t.close();this.transport.removeListener?this.transport.removeListener("message",this.listener):this.transport.removeEventListener("message",this.listener)}constructor(t){super(),this.maxId=0,this.namespaces=new Map,this.transactions=new Map,this.transport=t,this.listener=t=>{let e;try{e=JSON.parse(t.utf8Data||t.data||t)}catch(t){return}switch(e.type){case"cmd":const{transId:t}=e,s={name:e.name,data:e.data,namespace:e.namespace,accept:e=>{this.h_({type:"response",transId:t,data:e})},reject:e=>{this.h_({type:"error",transId:t,data:e})}};if(s.namespace){const t=this.namespaces.get(s.namespace);t?t.emit("cmd",s):this.emit("cmd",s)}else this.emit("cmd",s);break;case"response":{const t=this.transactions.get(e.transId);if(!t)return;this.transactions.delete(e.transId),t.resolve(e.data);break}case"error":{const t=this.transactions.get(e.transId);if(!t)return;this.transactions.delete(e.transId),t.reject(e.data);break}case"event":const n={name:e.name,data:e.data,namespace:e.namespace};if(n.namespace){var i=this.namespaces.get(n.namespace);i?i.emit("event",n):this.emit("event",n)}else this.emit("event",n)}},this.transport.addListener?this.transport.addListener("message",this.listener):this.transport.addEventListener("message",this.listener)}}),ps=at.get("Signaling"),ws="wsConnectionSuccess",ys="wsConnectionError",bs="wsConnectionClose",As="broadcastEvent";class Ss extends Et{async connect(){var t;return ps.info("Connecting to Signaling Server"),this.transactionManager&&(null==(t=this.webSocket)?void 0:t.readyState)===WebSocket.OPEN?(ps.info("Connected to server: ",this.webSocket.url),ps.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(ws,{ws:this.webSocket,tm:this.transactionManager}),this.webSocket):new Promise(((t,e)=>{this.webSocket=new WebSocket(this.wsUrl),this.transactionManager=new ms(this.webSocket),this.webSocket.onopen=()=>{ps.info("WebSocket opened"),this.transactionManager.on("event",(t=>{this.emit(As,t)})),ps.info("Connected to server: ",this.webSocket.url),ps.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(ws,{ws:this.webSocket,tm:this.transactionManager}),t(this.webSocket)},this.webSocket.onerror=()=>{ps.error("WebSocket not connected: ",this.webSocket.url),this.emit(ys,this.webSocket.url),e(this.webSocket.url)},this.webSocket.onclose=()=>{this.webSocket=null,this.transactionManager=null,ps.info("Connection closed with Signaling Server."),this.emit(bs)}}))}close(){var t;ps.info("Closing connection with Signaling Server."),null==(t=this.webSocket)||t.close()}async subscribe(t,e,i,s){var n,r,o,h;void 0===i&&(i=null),void 0===s&&(s=null),ps.info("Starting subscription to streamName: ",this.streamName),ps.debug("Subcription local description: ",t);const a=Ts(e,i,s),u={sdp:t=ji.adaptCodecName(t,"AV1X",Ji.AV1),streamId:this.streamName,pinnedSourceId:a.pinnedSourceId,excludedSourceIds:a.excludedSourceIds,events:["active","inactive","layers","viewercount","vad","updated","migrate","stopped"]};a.vad&&(u.vad=!0),Array.isArray(a.events)&&(u.events=a.events),a.forcePlayoutDelay&&(u.forcePlayoutDelay=a.forcePlayoutDelay),a.layer&&(u.layer=a.layer);try{if(a.disableVideo&&a.disableAudio)throw new m("Not attempting to connect as video and audio are disabled");await this.connect(),ps.info("Sending view command");const t=await this.transactionManager.cmd("view",u),e=null==(h=null==(o=null==(r=null==(n=RTCRtpReceiver.getCapabilities)?void 0:n.call(RTCRtpReceiver,"video"))?void 0:r.codecs)?void 0:o.find)?void 0:h.call(o,(t=>"video/AV1X"===t.mimeType));return t.sdp=e?ji.adaptCodecName(t.sdp,Ji.AV1,"AV1X"):t.sdp,ps.info("Command sent, subscriberId: ",t.subscriberId),ps.debug("Command result: ",t),this.serverId=t.subscriberId,this.clusterId=t.clusterId,this.streamViewId=t.streamViewId,G(this.streamName),Z(this.serverId),H(t.streamViewId),Y(this.clusterId),t.sdp}catch(t){throw ps.error("Error sending view command, error: ",t),t}}async publish(t,e,i,s){var n,r,o,h,a,u,c,l;void 0===i&&(i=null),void 0===s&&(s=null);const d=ks(e,i,s);ps.info("Starting publishing to streamName: ".concat(this.streamName,", codec: ").concat(d.codec)),ps.debug("Publishing local description: ",t);const f=null!=(h=null==(o=null==(r=null==(n=rs.getCapabilities)?void 0:n.call(rs,"video"))?void 0:r.codecs)?void 0:o.map((t=>t.codec)))?h:[],_=w.values(Ji);if(-1===_.indexOf(d.codec))throw ps.error("Invalid codec ".concat(d.codec,". Possible values are: "),_),new m("Invalid codec ".concat(d.codec,". Possible values are: ").concat(_));if(f.length>0&&-1===f.indexOf(d.codec))throw ps.error("Unsupported codec ".concat(d.codec,". Possible values are: "),f),new m("Unsupported codec ".concat(d.codec,". Possible values are: ").concat(f));d.codec===Ji.AV1&&(t=ji.adaptCodecName(t,"AV1X",Ji.AV1));const v={name:this.streamName,sdp:t,codec:d.codec,sourceId:d.sourceId};if(d.priority){if(!(Number.isInteger(d.priority)&&d.priority>=-2147483648&&d.priority<=2147483647))throw new m("Invalid value for priority option. It should be a decimal integer between the range [-2^31, +2^31 - 1]");v.priority=d.priority}null!==d.record&&(v.record=d.record),Array.isArray(d.events)&&(v.events=d.events);try{if(d.disableVideo&&d.disableAudio)throw new m("Not attempting to connect as video and audio are disabled");await this.connect(),ps.info("Sending publish command");const t=await this.transactionManager.cmd("publish",v);if(d.codec===Ji.AV1){const e=null==(l=null==(c=null==(u=null==(a=RTCRtpSender.getCapabilities)?void 0:a.call(RTCRtpSender,"video"))?void 0:u.codecs)?void 0:c.find)?void 0:l.call(c,(t=>"video/AV1X"===t.mimeType));t.sdp=e?ji.adaptCodecName(t.sdp,Ji.AV1,"AV1X"):t.sdp}return ps.info("Command sent, publisherId: ",t.publisherId),ps.debug("Command result: ",t),this.serverId=t.publisherId,this.clusterId=t.clusterId,G(this.streamName),Z(this.serverId),X(t.feedId),Y(this.clusterId),t.sdp}catch(t){throw ps.error("Error sending publish command, error: ",t),t}}async cmd(t,e){return ps.info("Sending cmd: ".concat(t)),this.transactionManager.cmd(t,e)}constructor(t={streamName:null,url:"ws://localhost:8080/"}){super(),this.streamName=t.streamName,this.wsUrl=t.url,this.webSocket=null,this.transactionManager=null,this.serverId=null,this.clusterId=null,this.streamViewId=null}}const Ts=(t,e,i)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={vad:t,pinnedSourceId:e,excludedSourceIds:i}),s},ks=(t,e,i)=>{let s="object"==typeof t?t:{};if(0===w.keys(s).length){s={codec:null!=t?t:Ji.H264,record:e,sourceId:i}}return s};class Es extends m{constructor(t,e){super(t),this.name="FetchError",this.status=e}}const xs=at.get("Director"),Is="WebRtc";let Rs="",Cs="https://director.millicast.com";const Ps={setEndpoint:t=>{Cs=t.replace(/\/$/,"")},getEndpoint:()=>Cs,setLiveDomain:t=>{Rs=t.replace(/\/$/,"")},getLiveDomain:()=>Rs,getPublisher:async(t,e,i)=>{void 0===e&&(e=null),void 0===i&&(i=Is);const s=Ds(t,e,i);xs.info("Getting publisher connection path for stream name: ",s.streamName);const n={streamName:s.streamName,streamType:s.streamType},r={"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},o="".concat(Ps.getEndpoint(),"/api/director/publish");try{const t=await fetch(o,{method:"POST",headers:r,body:JSON.stringify(n)});let e=await t.json();if("fail"===e.status)throw new Es(e.data.message,t.status);return e=Ms(e),xs.debug("Getting publisher response: ",e),U(e.data.streamAccountId),e.data}catch(t){throw xs.error("Error while getting publisher connection path. ",t),t}},getSubscriber:async(t,e,i)=>{void 0===e&&(e=null),void 0===i&&(i=null);const s=Ns(t,e,i);U(s.streamAccountId),xs.info("Getting subscriber connection data for stream name: ".concat(s.streamName," and account id: ").concat(s.streamAccountId));const n={streamAccountId:s.streamAccountId,streamName:s.streamName};let r={"Content-Type":"application/json"};s.subscriberToken&&(r=y(d({},r),{Authorization:"Bearer ".concat(s.subscriberToken)}));const o="".concat(Ps.getEndpoint(),"/api/director/subscribe");try{const t=await fetch(o,{method:"POST",headers:r,body:JSON.stringify(n)});let e=await t.json();if("fail"===e.status)throw new Es(e.data.message,t.status);return e=Ms(e),xs.debug("Getting subscriber response: ",e),s.subscriberToken&&(e.data.subscriberToken=s.subscriberToken),e.data}catch(t){throw xs.error("Error while getting subscriber connection path. ",t),t}}},Ds=(t,e,i)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={token:t,streamName:e,streamType:i}),s},Ns=(t,e,i)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={streamName:t,streamAccountId:e,subscriberToken:i}),s},Ms=t=>{if(Ps.getLiveDomain()){const e=/\/\/(.*?)\//,i=t.data.urls.map((t=>{const i=e.exec(t);return t.replace(i[1],Ps.getLiveDomain())}));t.data.urls=i}if(t.data.drmObject){const e=t.data.drmObject.playReadyUrl;e&&(t.data.drmObject.playReadyUrl="".concat(Ps.getEndpoint()).concat(e));const i=t.data.drmObject.widevineUrl;i&&(t.data.drmObject.widevineUrl="".concat(Ps.getEndpoint()).concat(i));const s=t.data.drmObject.fairPlayUrl;s&&(t.data.drmObject.fairPlayUrl="".concat(Ps.getEndpoint()).concat(s));const n=t.data.drmObject.fairPlayCertUrl;n&&(t.data.drmObject.fairPlayCertUrl="".concat(Ps.getEndpoint()).concat(n))}return t};function Ls(t){this.message=t}Ls.prototype=new m,Ls.prototype.name="InvalidCharacterError";var Bs=typeof s<"u"&&s.atob&&s.atob.bind(s)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new Ls("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,s,n=0,r=0,o="";s=e.charAt(r++);~s&&(i=n%4?64*i+s:s,n++%4)?o+=String.fromCharCode(255&i>>(-2*n&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return o};function Os(t){this.message=t}function Fs(t,e){if("string"!=typeof t)throw new Os("Invalid token specified");var i=!0===(e=e||{}).header?0:1;try{return JSON.parse(function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(Bs(e).replace(/(.)/g,(function(t,e){var i=e.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i})))}catch(t){return Bs(e)}}(t.split(".")[i]))}catch(t){throw new Os("Invalid token specified: "+t.message)}}Os.prototype=new m,Os.prototype.name="InvalidTokenError";var Vs={exports:{}};!function(t,e){!function(i){if(null!=e&&"number"!=typeof e.nodeType)t.exports=i();else{var s=i(),n=typeof self<"u"?self:$.global;"function"!=typeof n.btoa&&(n.btoa=s.btoa),"function"!=typeof n.atob&&(n.atob=s.atob)}}((function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function e(t){this.message=t}return e.prototype=new m,e.prototype.name="InvalidCharacterError",{btoa:function(i){for(var s,n,r,o,h=String(i),a=0,u="";a<h.length;){if(s=h.charCodeAt(a++),n=h.charCodeAt(a++),r=h.charCodeAt(a++),s>255||n>255||r>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");u+=t.charAt((o=s<<16|n<<8|r)>>18&63)+t.charAt(o>>12&63)+t.charAt(o>>6&63)+t.charAt(63&o)}switch(h.length%3){case 0:return u;case 1:return u.slice(0,-2)+"==";case 2:return u.slice(0,-1)+"="}},atob:function(i){var s=String(i).replace(/[=]+$/,"");if(s.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,h=0,a="";r=s.charAt(h++);~r&&(n=o%4?64*n+r:r,o++%4)?a+=String.fromCharCode(255&n>>(-2*o&6)):0)r=t.indexOf(r);return a}}}))}(Vs,Vs.exports);var Ws=Vs.exports,Us={exports:{}};!function(t,e){var i;self,i=()=>{return t={7629:(t,e,i)=>{const s=i(375),n=i(8571),r=i(9474),o=i(1687),h=i(8652),a=i(8160),u=i(3292),c=i(6354),l=i(8901),d=i(9708),f=i(6914),_=i(2294),v=i(6133),g=i(1152),p=i(8863),y=i(2036),b={Base:class{a_(){this.u_=new _.Ids,this.c_=null,this.l_=new v.Manager,this.d_=null,this.f_=null,this.__=null,this.v_={},this.g_=[],this.m_=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return s("function"==typeof d.describe,"Manifest functionality disabled"),d.describe(this)}allow(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"allow"),this.p_(e,"f_")}alter(t){s(t&&"object"==typeof t&&!Array.isArray(t),"Invalid targets argument"),s(!this.w_(),"Cannot set alterations inside a ruleset");const e=this.clone();e.$_terms.alterations=e.$_terms.alterations||[];for(const i in t){const n=t[i];s("function"==typeof n,"Alteration adjuster for",i,"must be a function"),e.$_terms.alterations.push({target:i,adjuster:n})}return e.$_temp.ruleset=!1,e}artifact(t){return s(void 0!==t,"Artifact cannot be undefined"),s(!this.d_,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",t)}cast(t){return s(!1===t||"string"==typeof t,"Invalid to value"),s(!1===t||this.y_.cast[t],"Type",this.type,"does not support casting to",t),this.$_setFlag("cast",!1===t?void 0:t)}default(t,e){return this.b_("default",t,e)}description(t){return s(t&&"string"==typeof t,"Description must be a non-empty string"),this.$_setFlag("description",t)}empty(t){const e=this.clone();return void 0!==t&&(t=e.$_compile(t,{override:!1})),e.$_setFlag("empty",t,{clone:!1})}error(t){return s(t,"Missing error"),s(t instanceof m||"function"==typeof t,"Must provide a valid Error object or a function"),this.$_setFlag("error",t)}example(t,e){return void 0===e&&(e={}),s(void 0!==t,"Missing example"),a.assertOptions(e,["override"]),this.A_("examples",t,{single:!0,override:e.override})}external(t,e){return"object"==typeof t&&(s(!e,"Cannot combine options with description"),e=t.description,t=t.method),s("function"==typeof t,"Method must be a function"),s(void 0===e||e&&"string"==typeof e,"Description must be a non-empty string"),this.A_("externals",{method:t,description:e},{single:!0})}failover(t,e){return this.b_("failover",t,e)}forbidden(){return this.presence("forbidden")}id(t){return t?(s("string"==typeof t,"id must be a non-empty string"),s(/^[^\.]+$/.test(t),"id cannot contain period character"),this.$_setFlag("id",t)):this.$_setFlag("id",void 0)}invalid(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.p_(e,"__")}label(t){return s(t&&"string"==typeof t,"Label name must be a non-empty string"),this.$_setFlag("label",t)}meta(t){return s(void 0!==t,"Meta cannot be undefined"),this.A_("metas",t,{single:!0})}note(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];s(e.length,"Missing notes");for(const t of e)s(t&&"string"==typeof t,"Notes must be non-empty strings");return this.A_("notes",e)}only(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"Invalid mode:",t),this.$_setFlag("only",t)}optional(){return this.presence("optional")}prefs(t){s(t,"Missing preferences"),s(void 0===t.context,"Cannot override context"),s(void 0===t.externals,"Cannot override externals"),s(void 0===t.warnings,"Cannot override warnings"),s(void 0===t.debug,"Cannot override debug"),a.checkPreferences(t);const e=this.clone();return e.c_=a.preferences(e.c_,t),e}presence(t){return s(["optional","required","forbidden"].includes(t),"Unknown presence mode",t),this.$_setFlag("presence",t)}raw(t){return void 0===t&&(t=!0),this.$_setFlag("result",t?"raw":void 0)}result(t){return s(["raw","strip"].includes(t),"Unknown result mode",t),this.$_setFlag("result",t)}required(){return this.presence("required")}strict(t){const e=this.clone(),i=void 0!==t&&!t;return e.c_=a.preferences(e.c_,{convert:i}),e}strip(t){return void 0===t&&(t=!0),this.$_setFlag("result",t?"strip":void 0)}tag(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];s(e.length,"Missing tags");for(const t of e)s(t&&"string"==typeof t,"Tags must be non-empty strings");return this.A_("tags",e)}unit(t){return s(t&&"string"==typeof t,"Unit name must be a non-empty string"),this.$_setFlag("unit",t)}valid(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];a.verifyFlat(e,"valid");const s=this.allow(...e);return s.$_setFlag("only",!!s.f_,{clone:!1}),s}when(t,e){const i=this.clone();i.$_terms.whens||(i.$_terms.whens=[]);const n=u.when(i,t,e);if(!["any","link"].includes(i.type)){const t=n.is?[n]:n.switch;for(const e of t)s(!e.then||"any"===e.then.type||e.then.type===i.type,"Cannot combine",i.type,"with",e.then&&e.then.type),s(!e.otherwise||"any"===e.otherwise.type||e.otherwise.type===i.type,"Cannot combine",i.type,"with",e.otherwise&&e.otherwise.type)}return i.$_terms.whens.push(n),i.$_mutateRebuild()}cache(t){s(!this.w_(),"Cannot set caching inside a ruleset"),s(!this.d_,"Cannot override schema cache"),s(void 0===this.v_.artifact,"Cannot cache a rule with an artifact");const e=this.clone();return e.d_=t||h.provider.provision(),e.$_temp.ruleset=!1,e}clone(){const t=w.create(w.getPrototypeOf(this));return this.S_(t)}concat(t){s(a.isSchema(t),"Invalid schema object"),s("any"===this.type||"any"===t.type||t.type===this.type,"Cannot merge type",this.type,"with another type:",t.type),s(!this.w_(),"Cannot concatenate onto a schema with open ruleset"),s(!t.w_(),"Cannot concatenate a schema with open ruleset");let e=this.clone();if("any"===this.type&&"any"!==t.type){const i=t.clone();for(const t of w.keys(e))"type"!==t&&(i[t]=e[t]);e=i}e.u_.concat(t.u_),e.l_.register(t,v.toSibling),e.c_=e.c_?a.preferences(e.c_,t.c_):t.c_,e.f_=y.merge(e.f_,t.f_,t.__),e.__=y.merge(e.__,t.__,t.f_);for(const i of t.m_.keys())e.m_.has(i)&&(e.g_=e.g_.filter((t=>t.keep||t.name!==i)),e.m_.delete(i));for(const i of t.g_)t.y_.rules[i.method].multi||e.m_.set(i.name,i),e.g_.push(i);if(e.v_.empty&&t.v_.empty){e.v_.empty=e.v_.empty.concat(t.v_.empty);const i=w.assign({},t.v_);delete i.empty,o(e.v_,i)}else if(t.v_.empty){e.v_.empty=t.v_.empty;const i=w.assign({},t.v_);delete i.empty,o(e.v_,i)}else o(e.v_,t.v_);for(const i in t.$_terms){const s=t.$_terms[i];s?e.$_terms[i]?e.$_terms[i]=e.$_terms[i].concat(s):e.$_terms[i]=s.slice():e.$_terms[i]||(e.$_terms[i]=s)}return this.$_root.T_&&this.$_root.T_.k_(e,[this,t]),e.$_mutateRebuild()}extend(t){return s(!t.base,"Cannot extend type with another base"),l.type(this,t)}extract(t){return t=Array.isArray(t)?t:t.split("."),this.u_.reach(t)}fork(t,e){s(!this.w_(),"Cannot fork inside a ruleset");let i=this;for(let s of[].concat(t))s=Array.isArray(s)?s:s.split("."),i=i.u_.fork(s,e,i);return i.$_temp.ruleset=!1,i}rule(t){const e=this.y_;a.assertOptions(t,w.keys(e.modifiers)),s(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const i=null===this.$_temp.ruleset?this.g_.length-1:this.$_temp.ruleset;s(i>=0&&i<this.g_.length,"Cannot apply rules to empty ruleset");const r=this.clone();for(let o=i;o<r.g_.length;++o){const i=r.g_[o],h=n(i);for(const n in t)e.modifiers[n](h,t[n]),s(h.name===i.name,"Cannot change rule name");r.g_[o]=h,r.m_.get(h.name)===i&&r.m_.set(h.name,h)}return r.$_temp.ruleset=!1,r.$_mutateRebuild()}get ruleset(){s(!this.w_(),"Cannot start a new ruleset without closing the previous one");const t=this.clone();return t.$_temp.ruleset=t.g_.length,t}get $(){return this.ruleset}tailor(t){t=[].concat(t),s(!this.w_(),"Cannot tailor inside a ruleset");let e=this;if(this.$_terms.alterations)for(const{target:i,adjuster:n}of this.$_terms.alterations)t.includes(i)&&(e=n(e),s(a.isSchema(e),"Alteration adjuster for",i,"failed to return a schema object"));return e=e.$_modify({each:e=>e.tailor(t),ref:!1}),e.$_temp.ruleset=!1,e.$_mutateRebuild()}tracer(){return g.location?g.location(this):this}validate(t,e){return p.entry(t,this,e)}validateAsync(t,e){return p.entryAsync(t,this,e)}$_addRule(t){"string"==typeof t&&(t={name:t}),s(t&&"object"==typeof t,"Invalid options"),s(t.name&&"string"==typeof t.name,"Invalid rule name");for(const e in t)s("_"!==e[0],"Cannot set private rule properties");const e=w.assign({},t);e.Gd=[],e.method=e.method||e.name;const i=this.y_.rules[e.method],n=e.args;s(i,"Unknown rule",e.method);const r=this.clone();if(n){s(1===w.keys(n).length||w.keys(n).length===this.y_.rules[e.name].args.length,"Invalid rule definition for",this.type,e.name);for(const t in n){let o=n[t];if(i.argsByName){const h=i.argsByName.get(t);if(h.ref&&a.isResolvable(o))e.Gd.push(t),r.$_mutateRegister(o);else if(h.normalize&&(o=h.normalize(o),n[t]=o),h.assert){const e=a.validateArg(o,t,h);s(!e,e,"or reference")}}void 0!==o?n[t]=o:delete n[t]}}return i.multi||(r.E_(e.name,{clone:!1}),r.m_.set(e.name,e)),!1===r.$_temp.ruleset&&(r.$_temp.ruleset=null),i.priority?r.g_.unshift(e):r.g_.push(e),r}$_compile(t,e){return u.schema(this.$_root,t,e)}$_createError(t,e,i,s,n,r){void 0===r&&(r={});const o=!1!==r.flags?this.v_:{},h=r.messages?f.merge(this.y_.messages,r.messages):this.y_.messages;return new c.Report(t,e,i,o,h,s,n)}$_getFlag(t){return this.v_[t]}$_getRule(t){return this.m_.get(t)}$_mapLabels(t){return t=Array.isArray(t)?t:t.split("."),this.u_.labels(t)}$_match(t,e,i,s){(i=w.assign({},i)).abortEarly=!0,i.x_=!1,e.snapshot();const n=!p.validate(t,this,e,i,s).errors;return e.restore(),n}$_modify(t){return a.assertOptions(t,["each","once","ref","schema"]),_.schema(this,t)||this}$_mutateRebuild(){return s(!this.w_(),"Cannot add this rule inside a ruleset"),this.l_.reset(),this.u_.reset(),this.$_modify({each:(t,e)=>{let{source:i,name:s,path:n,key:r}=e;const o=this.y_[i][s]&&this.y_[i][s].register;!1!==o&&this.$_mutateRegister(t,{family:o,key:r})}}),this.y_.rebuild&&this.y_.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(t,e){let{family:i,key:s}=void 0===e?{}:e;this.l_.register(t,i),this.u_.register(t,{key:s})}$_property(t){return this.y_.properties[t]}$_reach(t){return this.u_.reach(t)}$_rootReferences(){return this.l_.roots()}$_setFlag(t,e,i){void 0===i&&(i={}),s("_"===t[0]||!this.w_(),"Cannot set flag inside a ruleset");const n=this.y_.flags[t]||{};if(r(e,n.default)&&(e=void 0),r(e,this.v_[t]))return this;const o=!1!==i.clone?this.clone():this;return void 0!==e?(o.v_[t]=e,o.$_mutateRegister(e)):delete o.v_[t],"_"!==t[0]&&(o.$_temp.ruleset=!1),o}$_parent(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return this[t][a.symbols.parent].call(this,...i)}$_validate(t,e,i){return p.validate(t,this,e,i)}S_(t){t.type=this.type,t.$_root=this.$_root,t.$_temp=w.assign({},this.$_temp),t.$_temp.whens={},t.u_=this.u_.clone(),t.c_=this.c_,t.f_=this.f_&&this.f_.clone(),t.__=this.__&&this.__.clone(),t.g_=this.g_.slice(),t.m_=n(this.m_,{shallow:!0}),t.l_=this.l_.clone(),t.v_=w.assign({},this.v_),t.d_=null,t.$_terms={};for(const e in this.$_terms)t.$_terms[e]=this.$_terms[e]?this.$_terms[e].slice():null;t.$_super={};for(const e in this.$_super)t.$_super[e]=this.I_[e].bind(t);return t}R_(){const t=this.clone();t.a_();const e=t.y_.terms;for(const i in e){const s=e[i];t.$_terms[i]=s.init}return t.$_mutateRebuild()}b_(t,e,i){return void 0===i&&(i={}),a.assertOptions(i,"literal"),s(void 0!==e,"Missing",t,"value"),s("function"==typeof e||!i.literal,"Only function value supports literal option"),"function"==typeof e&&i.literal&&(e={[a.symbols.literal]:!0,literal:e}),this.$_setFlag(t,e)}C_(t,e,i){if(!this.$_terms.whens)return{schema:this};const s=[],n=[];for(let r=0;r<this.$_terms.whens.length;++r){const o=this.$_terms.whens[r];if(o.concat){s.push(o.concat),n.push("".concat(r,".concat"));continue}const h=o.ref?o.ref.resolve(t,e,i):t,a=o.is?[o]:o.switch,u=n.length;for(let u=0;u<a.length;++u){const{is:c,then:l,otherwise:d}=a[u],f="".concat(r).concat(o.switch?"."+u:"");if(c.$_match(h,e.nest(c,"".concat(f,".is")),i)){if(l){const r=e.localize([...e.path,"".concat(f,".then")],e.ancestors,e.schemas),{schema:o,id:h}=l.C_(t,r,i);s.push(o),n.push("".concat(f,".then").concat(h?"(".concat(h,")"):""));break}}else if(d){const r=e.localize([...e.path,"".concat(f,".otherwise")],e.ancestors,e.schemas),{schema:o,id:h}=d.C_(t,r,i);s.push(o),n.push("".concat(f,".otherwise").concat(h?"(".concat(h,")"):""));break}}if(o.break&&n.length>u)break}const r=n.join(", ");if(e.mainstay.tracer.debug(e,"rule","when",r),!r)return{schema:this};if(!e.mainstay.tracer.active&&this.$_temp.whens[r])return{schema:this.$_temp.whens[r],id:r};let o=this;this.y_.generate&&(o=this.y_.generate(this,t,e,i));for(const t of s)o=o.concat(t);return this.$_root.T_&&this.$_root.T_.k_(o,[this,...s]),this.$_temp.whens[r]=o,{schema:o,id:r}}A_(t,e,i){void 0===i&&(i={}),s(!this.w_(),"Cannot set ".concat(t," inside a ruleset"));const n=this.clone();return n.$_terms[t]&&!i.override||(n.$_terms[t]=[]),i.single?n.$_terms[t].push(e):n.$_terms[t].push(...e),n.$_temp.ruleset=!1,n}w_(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}E_(t,e){if(void 0===e&&(e={}),!this.m_.has(t))return this;const i=!1!==e.clone?this.clone():this;i.m_.delete(t);const s=[];for(let e=0;e<i.g_.length;++e){const n=i.g_[e];n.name!==t||n.keep?s.push(n):i.w_()&&e<i.$_temp.ruleset&&--i.$_temp.ruleset}return i.g_=s,i}p_(t,e){a.verifyFlat(t,e.slice(1,-1));const i=this.clone(),n=t[0]===a.symbols.override;if(n&&(t=t.slice(1)),!i[e]&&t.length?i[e]=new y:n&&(i[e]=t.length?new y:null,i.$_mutateRebuild()),!i[e])return i;n&&i[e].override();for(const n of t){s(void 0!==n,"Cannot call allow/valid/invalid with undefined"),s(n!==a.symbols.override,"Override must be the first value");const t="__"===e?"f_":"__";i[t]&&(i[t].remove(n),i[t].length||(s("f_"===e||!i.v_.only,"Setting invalid value",n,"leaves schema rejecting all values due to previous valid rule"),i[t]=null)),i[e].add(n,i.l_)}return i}constructor(t){this.type=t,this.$_root=null,this.y_={},this.a_()}}};b.Base.prototype[a.symbols.any]={version:a.version,compile:u.compile,root:"$_root"},b.Base.prototype.isImmutable=!0,b.Base.prototype.deny=b.Base.prototype.invalid,b.Base.prototype.disallow=b.Base.prototype.invalid,b.Base.prototype.equal=b.Base.prototype.valid,b.Base.prototype.exist=b.Base.prototype.required,b.Base.prototype.not=b.Base.prototype.invalid,b.Base.prototype.options=b.Base.prototype.prefs,b.Base.prototype.preferences=b.Base.prototype.prefs,t.exports=new b.Base},8652:(t,e,i)=>{const s=i(375),n=i(8571),r=i(8160),o={max:1e3,supported:new Set(["undefined","boolean","number","string"])};e.provider={provision:t=>new o.Cache(t)},o.Cache=class{get length(){return this.P_.size}set(t,e){if(null!==t&&!o.supported.has(typeof t))return;let i=this.P_.get(t);if(i)return i.value=e,void this.D_.first(i);i=this.D_.unshift({key:t,value:e}),this.P_.set(t,i),this.N_()}get(t){const e=this.P_.get(t);if(e)return this.D_.first(e),n(e.value)}N_(){if(this.P_.size>this.M_){const t=this.D_.pop();this.P_.delete(t.key)}}constructor(t={}){r.assertOptions(t,["max"]),s(void 0===t.max||t.max&&t.max>0&&isFinite(t.max),"Invalid max cache size"),this.M_=t.max||o.max,this.P_=new Map,this.D_=new o.List}},o.List=class{unshift(t){return t.next=null,t.prev=this.head,this.head&&(this.head.next=t),this.head=t,this.tail||(this.tail=t),t}first(t){t!==this.head&&(this.L_(t),this.unshift(t))}pop(){return this.L_(this.tail)}L_(t){const{next:e,prev:i}=t;return e.prev=i,i&&(i.next=e),t===this.tail&&(this.tail=e),t.prev=null,t.next=null,t}constructor(){this.tail=null,this.head=null}}},8160:(t,e,i)=>{const s=i(375),n=i(7916),r=i(5934);let o,h;const a={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};e.version=r.version,e.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},e.symbols={any:f("@hapi/joi/schema"),arraySingle:El("arraySingle"),deepDefault:El("deepDefault"),errors:El("errors"),literal:El("literal"),override:El("override"),parent:El("parent"),prefs:El("prefs"),ref:El("ref"),template:El("template"),values:El("values")},e.assertOptions=function(t,e,i){void 0===i&&(i="Options"),s(t&&"object"==typeof t&&!Array.isArray(t),"Options must be of type object");const n=w.keys(t).filter((t=>!e.includes(t)));s(0===n.length,"".concat(i," contain unknown keys: ").concat(n))},e.checkPreferences=function(t){h=h||i(3378);const e=h.preferences.validate(t);if(e.error)throw new n([e.error.details[0].message])},e.compare=function(t,e,i){switch(i){case"=":return t===e;case">":return t>e;case"<":return t<e;case">=":return t>=e;case"<=":return t<=e}},e.default=function(t,e){return void 0===t?e:t},e.isIsoDate=function(t){return a.isoDate.test(t)},e.isNumber=function(t){return"number"==typeof t&&!S(t)},e.isResolvable=function(t){return!!t&&(t[e.symbols.ref]||t[e.symbols.template])},e.isSchema=function(t,i){void 0===i&&(i={});const n=t&&t[e.symbols.any];return!!n&&(s(i.legacy||n.version===e.version,"Cannot mix different versions of joi schemas"),!0)},e.isValues=function(t){return t[e.symbols.values]},e.limit=function(t){return Number.isSafeInteger(t)&&t>=0},e.preferences=function(t,s){o=o||i(6914),t=t||{},s=s||{};const n=w.assign({},t,s);return s.errors&&t.errors&&(n.errors=w.assign({},t.errors,s.errors),n.errors.wrap=w.assign({},t.errors.wrap,s.errors.wrap)),s.messages&&(n.messages=o.compile(s.messages,t.messages)),delete n[e.symbols.prefs],n},e.tryWithPath=function(t,e,i){void 0===i&&(i={});try{return t()}catch(t){throw void 0!==t.path?t.path=e+"."+t.path:t.path=e,i.append&&(t.message="".concat(t.message," (").concat(t.path,")")),t}},e.validateArg=function(t,i,s){let{assert:n,message:r}=s;if(e.isSchema(n)){const e=n.validate(t);return e.error?e.error.message:void 0}if(!n(t))return i?"".concat(i," ").concat(r):r},e.verifyFlat=function(t,e){for(const i of t)s(!Array.isArray(i),"Method no longer accepts array arguments:",e)}},3292:(t,e,i)=>{const s=i(375),n=i(8160),r=i(6133),o={};e.schema=function(t,e,i){void 0===i&&(i={}),n.assertOptions(i,["appendPath","override"]);try{return o.schema(t,e,i)}catch(t){throw i.appendPath&&void 0!==t.path&&(t.message="".concat(t.message," (").concat(t.path,")")),t}},o.schema=function(t,e,i){s(void 0!==e,"Invalid undefined schema"),Array.isArray(e)&&(s(e.length,"Invalid empty array schema"),1===e.length&&(e=e[0]));const r=function(e){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];return!1!==i.override?e.valid(t.override,...n):e.valid(...n)};if(o.simple(e))return r(t,e);if("function"==typeof e)return t.custom(e);if(s("object"==typeof e,"Invalid schema content:",typeof e),n.isResolvable(e))return r(t,e);if(n.isSchema(e))return e;if(Array.isArray(e)){for(const i of e)if(!o.simple(i))return t.alternatives().try(...e);return r(t,...e)}return e instanceof RegExp?t.string().regex(e):e instanceof Date?r(t.date(),e):(s(w.getPrototypeOf(e)===w.getPrototypeOf({}),"Schema can only contain plain objects"),t.object().keys(e))},e.ref=function(t,e){return r.isRef(t)?t:r.create(t,e)},e.compile=function(t,i,r){void 0===r&&(r={}),n.assertOptions(r,["legacy"]);const h=i&&i[n.symbols.any];if(h)return s(r.legacy||h.version===n.version,"Cannot mix different versions of joi schemas:",h.version,n.version),i;if("object"!=typeof i||!r.legacy)return e.schema(t,i,{appendPath:!0});const a=o.walk(i);return a?a.compile(a.root,i):e.schema(t,i,{appendPath:!0})},o.walk=function(t){if("object"!=typeof t)return null;if(Array.isArray(t)){for(const e of t){const t=o.walk(e);if(t)return t}return null}const e=t[n.symbols.any];if(e)return{root:t[e.root],compile:e.compile};s(w.getPrototypeOf(t)===w.getPrototypeOf({}),"Schema can only contain plain objects");for(const e in t){const i=o.walk(t[e]);if(i)return i}return null},o.simple=function(t){return null===t||["boolean","string","number"].includes(typeof t)},e.when=function(t,i,h){if(void 0===h&&(s(i&&"object"==typeof i,"Missing options"),h=i,i=r.create(".")),Array.isArray(h)&&(h={switch:h}),n.assertOptions(h,["is","not","then","otherwise","switch","break"]),n.isSchema(i))return s(void 0===h.is,'"is" can not be used with a schema condition'),s(void 0===h.not,'"not" can not be used with a schema condition'),s(void 0===h.switch,'"switch" can not be used with a schema condition'),o.condition(t,{is:i,then:h.then,otherwise:h.otherwise,break:h.break});if(s(r.isRef(i)||"string"==typeof i,"Invalid condition:",i),s(void 0===h.not||void 0===h.is,'Cannot combine "is" with "not"'),void 0===h.switch){let a=h;void 0!==h.not&&(a={is:h.not,then:h.otherwise,otherwise:h.then,break:h.break});let u=void 0!==a.is?t.$_compile(a.is):t.$_root.invalid(null,!1,0,"").required();return s(void 0!==a.then||void 0!==a.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),s(void 0===a.break||void 0===a.then||void 0===a.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===h.is||r.isRef(h.is)||n.isSchema(h.is)||(u=u.required()),o.condition(t,{ref:e.ref(i),is:u,then:a.then,otherwise:a.otherwise,break:a.break})}s(Array.isArray(h.switch),'"switch" must be an array'),s(void 0===h.is,'Cannot combine "switch" with "is"'),s(void 0===h.not,'Cannot combine "switch" with "not"'),s(void 0===h.then,'Cannot combine "switch" with "then"');const a={ref:e.ref(i),switch:[],break:h.break};for(let e=0;e<h.switch.length;++e){const i=h.switch[e],o=e===h.switch.length-1;n.assertOptions(i,o?["is","then","otherwise"]:["is","then"]),s(void 0!==i.is,'Switch statement missing "is"'),s(void 0!==i.then,'Switch statement missing "then"');const u={is:t.$_compile(i.is),then:t.$_compile(i.then)};if(r.isRef(i.is)||n.isSchema(i.is)||(u.is=u.is.required()),o){s(void 0===h.otherwise||void 0===i.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const e=void 0!==h.otherwise?h.otherwise:i.otherwise;void 0!==e&&(s(void 0===a.break,"Cannot specify both otherwise and break"),u.otherwise=t.$_compile(e))}a.switch.push(u)}return a},o.condition=function(t,e){for(const i of["then","otherwise"])void 0===e[i]?delete e[i]:e[i]=t.$_compile(e[i]);return e}},6354:(t,e,i)=>{const s=i(5688),n=i(8160),r=i(3328);e.Report=class{B_(t){if(this.template=t,!this.flags.label&&0===this.path.length){const t=this.O_(this.template,"root");t&&(this.local.label=t)}}toString(){if(this.message)return this.message;const t=this.code;if(!this.prefs.errors.render)return this.code;const e=this.O_(this.template)||this.O_(this.prefs.messages)||this.O_(this.messages);return void 0===e?'Error code "'.concat(t,'" is not defined, your custom type is missing the correct messages definition'):(this.message=e.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}O_(t,i){return e.template(this.value,t,i||this.code,this.state,this.prefs)}constructor(t,i,s,n,r,o,h){if(this.code=t,this.flags=n,this.messages=r,this.path=o.path,this.prefs=h,this.state=o,this.value=i,this.message=null,this.template=null,this.local=s||{},this.local.label=e.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const t=this.path[this.path.length-1];"object"!=typeof t&&(this.local.key=t)}}},e.path=function(t){let e="";for(const i of t)"object"!=typeof i&&("string"==typeof i?(e&&(e+="."),e+=i):e+="[".concat(i,"]"));return e},e.template=function(t,e,i,s,o){if(!e)return;if(r.isTemplate(e))return"root"!==i?e:null;let h=o.errors.language;if(n.isResolvable(h)&&(h=h.resolve(t,s,o)),h&&e[h]){if(void 0!==e[h][i])return e[h][i];if(void 0!==e[h]["*"])return e[h]["*"]}return e[i]?e[i]:e["*"]},e.label=function(t,i,s,n){if(!s.errors.label)return"";if(t.label)return t.label;let r=i.path;return"key"===s.errors.label&&i.path.length>1&&(r=i.path.slice(-1)),e.path(r)||e.template(null,s.messages,"root",i,s)||n&&e.template(null,n,"root",i,s)||"value"},e.process=function(t,i,s){if(!t)return null;const{override:n,message:r,details:o}=e.details(t);if(n)return n;if(s.errors.stack)return new e.ValidationError(r,o,i);const h=m.stackTraceLimit;m.stackTraceLimit=0;const a=new e.ValidationError(r,o,i);return m.stackTraceLimit=h,a},e.details=function(t,e){void 0===e&&(e={});let i=[];const s=[];for(const n of t){if(n instanceof m){if(!1!==e.override)return{override:n};const t=n.toString();i.push(t),s.push({message:t,type:"override",context:{error:n}});continue}const t=n.toString();i.push(t),s.push({message:t,path:n.path.filter((t=>"object"!=typeof t)),type:n.code,context:n.local})}return i.length>1&&(i=[...new Set(i)]),{message:i.join(". "),details:s}},e.ValidationError=class extends m{static isError(t){return t instanceof e.ValidationError}constructor(t,e,i){super(t),this.F_=i,this.details=e}},e.ValidationError.prototype.isJoi=!0,e.ValidationError.prototype.name="ValidationError",e.ValidationError.prototype.annotate=s.error},8901:(t,e,i)=>{const s=i(375),n=i(8571),r=i(8160),o=i(6914),h={};e.type=function(t,e){const i=w.getPrototypeOf(t),a=n(i),u=t.S_(w.create(a)),c=w.assign({},e);delete c.base,a.y_=c;const l=i.y_||{};c.messages=o.merge(l.messages,c.messages),c.properties=w.assign({},l.properties,c.properties),u.type=c.type,c.flags=w.assign({},l.flags,c.flags);const d=w.assign({},l.terms);if(c.terms)for(const t in c.terms){const e=c.terms[t];s(void 0===u.$_terms[t],"Invalid term override for",c.type,t),u.$_terms[t]=e.init,d[t]=e}c.terms=d,c.args||(c.args=l.args),c.prepare=h.prepare(c.prepare,l.prepare),c.coerce&&("function"==typeof c.coerce&&(c.coerce={method:c.coerce}),c.coerce.from&&!Array.isArray(c.coerce.from)&&(c.coerce={method:c.coerce.method,from:[].concat(c.coerce.from)})),c.coerce=h.coerce(c.coerce,l.coerce),c.validate=h.validate(c.validate,l.validate);const f=w.assign({},l.rules);if(c.rules)for(const t in c.rules){const e=c.rules[t];s("object"==typeof e,"Invalid rule definition for",c.type,t);let i=e.method;if(void 0===i&&(i=function(){return this.$_addRule(t)}),i&&(s(!a[t],"Rule conflict in",c.type,t),a[t]=i),s(!f[t],"Rule conflict in",c.type,t),f[t]=e,e.alias){const t=[].concat(e.alias);for(const i of t)a[i]=e.method}e.args&&(e.argsByName=new Map,e.args=e.args.map((t=>("string"==typeof t&&(t={name:t}),s(!e.argsByName.has(t.name),"Duplicated argument name",t.name),r.isSchema(t.assert)&&(t.assert=t.assert.strict().label(t.name)),e.argsByName.set(t.name,t),t))))}c.rules=f;const _=w.assign({},l.modifiers);if(c.modifiers)for(const t in c.modifiers){s(!a[t],"Rule conflict in",c.type,t);const e=c.modifiers[t];s("function"==typeof e,"Invalid modifier definition for",c.type,t);const i=function(e){return this.rule({[t]:e})};a[t]=i,_[t]=e}if(c.modifiers=_,c.overrides){a.I_=i,u.$_super={};for(const t in c.overrides)s(i[t],"Cannot override missing",t),c.overrides[t][r.symbols.parent]=i[t],u.$_super[t]=i[t].bind(u);w.assign(a,c.overrides)}c.cast=w.assign({},l.cast,c.cast);const v=w.assign({},l.manifest,c.manifest);return v.build=h.build(c.manifest&&c.manifest.build,l.manifest&&l.manifest.build),c.manifest=v,c.rebuild=h.rebuild(c.rebuild,l.rebuild),u},h.build=function(t,e){return t&&e?function(i,s){return e(t(i,s),s)}:t||e},h.coerce=function(t,e){return t&&e?{from:t.from&&e.from?[...new Set([...t.from,...e.from])]:null,method(i,s){let n;if((!e.from||e.from.includes(typeof i))&&(n=e.method(i,s),n)){if(n.errors||void 0===n.value)return n;i=n.value}if(!t.from||t.from.includes(typeof i)){const e=t.method(i,s);if(e)return e}return n}}:t||e},h.prepare=function(t,e){return t&&e?function(i,s){const n=t(i,s);if(n){if(n.errors||void 0===n.value)return n;i=n.value}return e(i,s)||n}:t||e},h.rebuild=function(t,e){return t&&e?function(i){e(i),t(i)}:t||e},h.validate=function(t,e){return t&&e?function(i,s){const n=e(i,s);if(n){if(n.errors&&(!Array.isArray(n.errors)||n.errors.length))return n;i=n.value}return t(i,s)||n}:t||e}},5107:(t,e,i)=>{const s=i(375),n=i(8571),r=i(8652),o=i(8160),h=i(3292),a=i(6354),u=i(8901),c=i(9708),l=i(6133),d=i(3328),f=i(1152);let _;const v={types:{alternatives:i(4946),any:i(8068),array:i(546),boolean:i(4937),date:i(7500),function:i(390),link:i(8785),number:i(3832),object:i(8966),string:i(7417),symbol:i(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const t={V_:new Set(w.keys(v.types))};for(const e of t.V_)t[e]=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return s(!i.length||["alternatives","link","object"].includes(e),"The",e,"type does not allow arguments"),v.generate(this,v.types[e],i)};for(const e of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])t[e]=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this.any()[e](...i)};w.assign(t,v.methods);for(const e in v.aliases){const i=v.aliases[e];t[e]=t[i]}return t.x=t.expression,f.setup&&f.setup(t),t}};v.methods={ValidationError:a.ValidationError,version:o.version,cache:r.provider,assert(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];v.assert(t,e,!0,s)},attempt:function(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];return v.assert(t,e,!1,s)},build(t){return s("function"==typeof c.build,"Manifest functionality disabled"),c.build(this,t)},checkPreferences(t){o.checkPreferences(t)},compile(t,e){return h.compile(this,t,e)},defaults(t){s("function"==typeof t,"modifier must be a function");const e=w.assign({},this);for(const i of e.V_){const n=t(e[i]());s(o.isSchema(n),"modifier must return a valid schema object"),e[i]=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return v.generate(this,n,e)}}return e},expression:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return new d(...e)},extend(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];o.verifyFlat(e,"extend"),_=_||i(3378),s(e.length,"You need to provide at least one extension"),this.assert(e,_.extensions);const r=w.assign({},this);r.V_=new Set(r.V_);for(let t of e){"function"==typeof t&&(t=t(r)),this.assert(t,_.extension);const e=v.expandExtension(t,r);for(const t of e){s(void 0===r[t.type]||r.V_.has(t.type),"Cannot override name",t.type);const e=t.base||this.any(),i=u.type(e,t);r.V_.add(t.type),r[t.type]=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return v.generate(this,i,e)}}}return r},isError:a.ValidationError.isError,isExpression:d.isTemplate,isRef:l.isRef,isSchema:o.isSchema,in:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return l.in(...e)},override:o.symbols.override,ref:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return l.create(...e)},types(){const t={};for(const e of this.V_)t[e]=this[e]();for(const e in v.aliases)t[e]=this[e]();return t}},v.assert=function(t,e,i,s){const r=s[0]instanceof m||"string"==typeof s[0]?s[0]:null,h=null!==r?s[1]:s[0],u=e.validate(t,o.preferences({errors:{stack:!0}},h||{}));let c=u.error;if(!c)return u.value;if(r instanceof m)throw r;const l=i&&"function"==typeof c.annotate?c.annotate():c.message;throw c instanceof a.ValidationError==0&&(c=n(c)),c.message=r?"".concat(r," ").concat(l):l,c},v.generate=function(t,e,i){return s(t,"Must be invoked on a Joi instance."),e.$_root=t,e.y_.args&&i.length?e.y_.args(e,...i):e},v.expandExtension=function(t,e){if("string"==typeof t.type)return[t];const i=[];for(const s of e.V_)if(t.type.test(s)){const n=w.assign({},t);n.type=s,n.base=e[s](),i.push(n)}return i},t.exports=v.root()},6914:(t,e,i)=>{const s=i(375),n=i(8571),r=i(3328);e.compile=function(t,e){if("string"==typeof t)return s(!e,"Cannot set single message string"),new r(t);if(r.isTemplate(t))return s(!e,"Cannot set single message template"),t;s("object"==typeof t&&!Array.isArray(t),"Invalid message options"),e=e?n(e):{};for(let i in t){const n=t[i];if("root"===i||r.isTemplate(n)){e[i]=n;continue}if("string"==typeof n){e[i]=new r(n);continue}s("object"==typeof n&&!Array.isArray(n),"Invalid message for",i);const o=i;for(i in e[o]=e[o]||{},n){const t=n[i];"root"===i||r.isTemplate(t)?e[o][i]=t:(s("string"==typeof t,"Invalid message for",i,"in",o),e[o][i]=new r(t))}}return e},e.decompile=function(t){const e={};for(let i in t){const s=t[i];if("root"===i){e.root=s;continue}if(r.isTemplate(s)){e[i]=s.describe({compact:!0});continue}const n=i;for(i in e[n]={},s){const t=s[i];"root"!==i?e[n][i]=t.describe({compact:!0}):e[n].root=t}}return e},e.merge=function(t,i){if(!t)return e.compile(i);if(!i)return t;if("string"==typeof i)return new r(i);if(r.isTemplate(i))return i;const o=n(t);for(let t in i){const e=i[t];if("root"===t||r.isTemplate(e)){o[t]=e;continue}if("string"==typeof e){o[t]=new r(e);continue}s("object"==typeof e&&!Array.isArray(e),"Invalid message for",t);const n=t;for(t in o[n]=o[n]||{},e){const i=e[t];"root"===t||r.isTemplate(i)?o[n][t]=i:(s("string"==typeof i,"Invalid message for",t,"in",n),o[n][t]=new r(i))}}return o}},2294:(t,e,i)=>{const s=i(375),n=i(8160),r=i(6133),o={};e.Ids=o.Ids=class{clone(){const t=new o.Ids;return t.W_=new Map(this.W_),t.U_=new Map(this.U_),t.G_=this.G_,t}concat(t){t.G_&&(this.G_=!0);for(const[e,i]of t.W_.entries())s(!this.U_.has(e),"Schema id conflicts with existing key:",e),this.W_.set(e,i);for(const[e,i]of t.U_.entries())s(!this.W_.has(e),"Schema key conflicts with existing id:",e),this.U_.set(e,i)}fork(t,e,i){const r=this.Z_(t);r.push({schema:i});const h=r.shift();let a={id:h.id,schema:e(h.schema)};s(n.isSchema(a.schema),"adjuster function failed to return a joi schema type");for(const t of r)a={id:t.id,schema:o.fork(t.schema,a.id,a.schema)};return a.schema}labels(t,e){void 0===e&&(e=[]);const i=t[0],s=this.H_(i);if(!s)return[...e,...t].join(".");const n=t.slice(1);return e=[...e,s.schema.v_.label||i],n.length?s.schema.u_.labels(n,e):e.join(".")}reach(t,e){void 0===e&&(e=[]);const i=t[0],n=this.H_(i);s(n,"Schema does not contain path",[...e,...t].join("."));const r=t.slice(1);return r.length?n.schema.u_.reach(r,[...e,i]):n.schema}register(t,e){let{key:i}=void 0===e?{}:e;if(!t||!n.isSchema(t))return;(t.$_property("schemaChain")||t.u_.G_)&&(this.G_=!0);const r=t.v_.id;if(r){const e=this.W_.get(r);s(!e||e.schema===t,"Cannot add different schemas with the same id:",r),s(!this.U_.has(r),"Schema id conflicts with existing key:",r),this.W_.set(r,{schema:t,id:r})}i&&(s(!this.U_.has(i),"Schema already contains key:",i),s(!this.W_.has(i),"Schema key conflicts with existing id:",i),this.U_.set(i,{schema:t,id:i}))}reset(){this.W_=new Map,this.U_=new Map,this.G_=!1}Z_(t,e,i){void 0===e&&(e=[]),void 0===i&&(i=[]);const n=t[0],r=this.H_(n);s(r,"Schema does not contain path",[...e,...t].join(".")),i=[r,...i];const o=t.slice(1);return o.length?r.schema.u_.Z_(o,[...e,n],i):i}H_(t){return this.W_.get(t)||this.U_.get(t)}constructor(){this.W_=new Map,this.U_=new Map,this.G_=!1}},o.fork=function(t,i,s){const n=e.schema(t,{each:(t,e)=>{let{key:n}=e;if(i===(t.v_.id||n))return s},ref:!1});return n?n.$_mutateRebuild():t},e.schema=function(t,e){let i;for(const s in t.v_){if("_"===s[0])continue;const n=o.scan(t.v_[s],{source:"flags",name:s},e);void 0!==n&&(i=i||t.clone(),i.v_[s]=n)}for(let s=0;s<t.g_.length;++s){const n=t.g_[s],r=o.scan(n.args,{source:"rules",name:n.name},e);if(void 0!==r){i=i||t.clone();const e=w.assign({},n);e.args=r,i.g_[s]=e,i.m_.get(n.name)===n&&i.m_.set(n.name,e)}}for(const s in t.$_terms){if("_"===s[0])continue;const n=o.scan(t.$_terms[s],{source:"terms",name:s},e);void 0!==n&&(i=i||t.clone(),i.$_terms[s]=n)}return i},o.scan=function(t,e,i,s,h){const a=s||[];if(null===t||"object"!=typeof t)return;let u;if(Array.isArray(t)){for(let s=0;s<t.length;++s){const n="terms"===e.source&&"keys"===e.name&&t[s].key,r=o.scan(t[s],e,i,[s,...a],n);void 0!==r&&(u=u||t.slice(),u[s]=r)}return u}if(!1!==i.schema&&n.isSchema(t)||!1!==i.ref&&r.isRef(t)){const s=i.each(t,y(d({},e),{path:a,key:h}));return s===t?void 0:s}for(const s in t){if("_"===s[0])continue;const n=o.scan(t[s],e,i,[s,...a],h);void 0!==n&&(u=u||w.assign({},t),u[s]=n)}return u}},6133:(t,e,i)=>{const s=i(375),n=i(8571),r=i(9621),o=i(8160);let h;const a={symbol:El("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};e.create=function(t,e){void 0===e&&(e={}),s("string"==typeof t,"Invalid reference key:",t),o.assertOptions(e,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),s(!e.prefix||"object"==typeof e.prefix,"options.prefix must be of type object");const i=w.assign({},a.defaults,e);delete i.prefix;const n=i.separator,r=a.context(t,n,e.prefix);if(i.type=r.type,t=r.key,"value"===i.type)if(r.root&&(s(!n||t[0]!==n,"Cannot specify relative path with root prefix"),i.ancestor="root",t||(t=null)),n&&n===t)t=null,i.ancestor=0;else if(void 0!==i.ancestor)s(!n||!t||t[0]!==n,"Cannot combine prefix with ancestor option");else{const[e,s]=a.ancestor(t,n);s&&""===(t=t.slice(s))&&(t=null),i.ancestor=e}return i.path=n?null===t?[]:t.split(n):[t],new a.Ref(i)},e.in=function(t,i){return void 0===i&&(i={}),e.create(t,y(d({},i),{in:!0}))},e.isRef=function(t){return!!t&&!!t[o.symbols.ref]},a.Ref=class{resolve(t,e,i,n,r){return void 0===r&&(r={}),s(!this.in||r.in,"Invalid in() reference usage"),"global"===this.type?this.Gd(i.context,e,r):"local"===this.type?this.Gd(n,e,r):this.ancestor?"root"===this.ancestor?this.Gd(e.ancestors[e.ancestors.length-1],e,r):(s(this.ancestor<=e.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this.Gd(e.ancestors[this.ancestor-1],e,r)):this.Gd(t,e,r)}Gd(t,e,i){let s;if("value"===this.type&&e.mainstay.shadow&&!1!==i.shadow&&(s=e.mainstay.shadow.get(this.absolute(e))),void 0===s&&(s=r(t,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(s=this.adjust(s)),this.map){const t=this.map.get(s);void 0!==t&&(s=t)}return e.mainstay&&e.mainstay.tracer.resolve(e,this,s),s}toString(){return this.display}absolute(t){return[...t.path.slice(0,-this.ancestor),...this.path]}clone(){return new a.Ref(this)}describe(){const t={path:this.path};"value"!==this.type&&(t.type=this.type),"."!==this.separator&&(t.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(t.ancestor=this.ancestor),this.map&&(t.map=[...this.map]);for(const e of["adjust","iterables","render"])null!==this[e]&&void 0!==this[e]&&(t[e]=this[e]);return!1!==this.in&&(t.in=!0),{ref:t}}updateDisplay(){const t=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display="ref:".concat(this.type,":").concat(t));if(!this.separator)return void(this.display="ref:".concat(t));if(!this.ancestor)return void(this.display="ref:".concat(this.separator).concat(t));if("root"===this.ancestor)return void(this.display="ref:root:".concat(t));if(1===this.ancestor)return void(this.display="ref:".concat(t||".."));const e=new Array(this.ancestor+1).fill(this.separator).join("");this.display="ref:".concat(e).concat(t||"")}constructor(t){s("object"==typeof t,"Invalid reference construction"),o.assertOptions(t,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),s([!1,void 0].includes(t.separator)||"string"==typeof t.separator&&1===t.separator.length,"Invalid separator"),s(!t.adjust||"function"==typeof t.adjust,"options.adjust must be a function"),s(!t.map||Array.isArray(t.map),"options.map must be an array"),s(!t.map||!t.adjust,"Cannot set both map and adjust options"),w.assign(this,a.defaults,t),s("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}},a.Ref.prototype[o.symbols.ref]=!0,e.build=function(t){return"value"===(t=w.assign({},a.defaults,t)).type&&void 0===t.ancestor&&(t.ancestor=1),new a.Ref(t)},a.context=function(t,e,i){if(void 0===i&&(i={}),t=t.trim(),i){const s=void 0===i.global?"$":i.global;if(s!==e&&t.startsWith(s))return{key:t.slice(s.length),type:"global"};const n=void 0===i.local?"#":i.local;if(n!==e&&t.startsWith(n))return{key:t.slice(n.length),type:"local"};const r=void 0===i.root?"/":i.root;if(r!==e&&t.startsWith(r))return{key:t.slice(r.length),type:"value",root:!0}}return{key:t,type:"value"}},a.ancestor=function(t,e){if(!e)return[1,0];if(t[0]!==e)return[1,0];if(t[1]!==e)return[0,1];let i=2;for(;t[i]===e;)++i;return[i-1,i]},e.toSibling=0,e.toParent=1,e.Manager=class{register(t,s){if(t)if(s=void 0===s?e.toParent:s,Array.isArray(t))for(const e of t)this.register(e,s);else if(o.isSchema(t))for(const e of t.l_.refs)e.ancestor-s>=0&&this.refs.push({ancestor:e.ancestor-s,root:e.root});else e.isRef(t)&&"value"===t.type&&t.ancestor-s>=0&&this.refs.push({ancestor:t.ancestor-s,root:t.root}),h=h||i(3328),h.isTemplate(t)&&this.register(t.refs(),s)}get length(){return this.refs.length}clone(){const t=new e.Manager;return t.refs=n(this.refs),t}reset(){this.refs=[]}roots(){return this.refs.filter((t=>!t.ancestor)).map((t=>t.root))}constructor(){this.refs=[]}}},3378:(t,e,i)=>{const s=i(5107),n={};n.wrap=s.string().min(1).max(2).allow(!1),e.preferences=s.object({allowUnknown:s.boolean(),abortEarly:s.boolean(),artifacts:s.boolean(),cache:s.boolean(),context:s.object(),convert:s.boolean(),dateFormat:s.valid("date","iso","string","time","utc"),debug:s.boolean(),errors:{escapeHtml:s.boolean(),label:s.valid("path","key",!1),language:[s.string(),s.object().ref()],render:s.boolean(),stack:s.boolean(),wrap:{label:n.wrap,array:n.wrap,string:n.wrap}},externals:s.boolean(),messages:s.object(),noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:s.valid("required","optional","forbidden"),skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()}).strict(),n.nameRx=/^[a-zA-Z0-9]\w*$/,n.rule=s.object({alias:s.array().items(s.string().pattern(n.nameRx)).single(),args:s.array().items(s.string(),s.object({name:s.string().pattern(n.nameRx).required(),ref:s.boolean(),assert:s.alternatives([s.function(),s.object().schema()]).conditional("ref",{is:!0,then:s.required()}),normalize:s.function(),message:s.string().when("assert",{is:s.function(),then:s.required()})})),convert:s.boolean(),manifest:s.boolean(),method:s.function().allow(!1),multi:s.boolean(),validate:s.function()}),e.extension=s.object({type:s.alternatives([s.string(),s.object().regex()]).required(),args:s.function(),cast:s.object().pattern(n.nameRx,s.object({from:s.function().maxArity(1).required(),to:s.function().minArity(1).maxArity(2).required()})),base:s.object().schema().when("type",{is:s.object().regex(),then:s.forbidden()}),coerce:[s.function().maxArity(3),s.object({method:s.function().maxArity(3).required(),from:s.array().items(s.string()).single()})],flags:s.object().pattern(n.nameRx,s.object({setter:s.string(),default:s.any()})),manifest:{build:s.function().arity(2)},messages:[s.object(),s.string()],modifiers:s.object().pattern(n.nameRx,s.function().minArity(1).maxArity(2)),overrides:s.object().pattern(n.nameRx,s.function()),prepare:s.function().maxArity(3),rebuild:s.function().arity(1),rules:s.object().pattern(n.nameRx,n.rule),terms:s.object().pattern(n.nameRx,s.object({init:s.array().allow(null).required(),manifest:s.object().pattern(/.+/,[s.valid("schema","single"),s.object({mapped:s.object({from:s.string().required(),to:s.string().required()}).required()})])})),validate:s.function().maxArity(3)}).strict(),e.extensions=s.array().items(s.object(),s.function().arity(1)).strict(),n.desc={buffer:s.object({buffer:s.string()}),func:s.object({function:s.function().required(),options:{literal:!0}}),override:s.object({override:!0}),ref:s.object({ref:s.object({type:s.valid("value","global","local"),path:s.array().required(),separator:s.string().length(1).allow(!1),ancestor:s.number().min(0).integer().allow("root"),map:s.array().items(s.array().length(2)).min(1),adjust:s.function(),iterables:s.boolean(),in:s.boolean(),render:s.boolean()}).required()}),regex:s.object({regex:s.string().min(3)}),special:s.object({special:s.valid("deep").required()}),template:s.object({template:s.string().required(),options:s.object()}),value:s.object({value:s.alternatives([s.object(),s.array()]).required()})},n.desc.entity=s.alternatives([s.array().items(s.link("...")),s.boolean(),s.function(),s.number(),s.string(),n.desc.buffer,n.desc.func,n.desc.ref,n.desc.regex,n.desc.special,n.desc.template,n.desc.value,s.link("/")]),n.desc.values=s.array().items(null,s.boolean(),s.function(),s.number().allow(1/0,-1/0),s.string().allow(""),s.symbol(),n.desc.buffer,n.desc.func,n.desc.override,n.desc.ref,n.desc.regex,n.desc.template,n.desc.value),n.desc.messages=s.object().pattern(/.+/,[s.string(),n.desc.template,s.object().pattern(/.+/,[s.string(),n.desc.template])]),e.description=s.object({type:s.string().required(),flags:s.object({cast:s.string(),default:s.any(),description:s.string(),empty:s.link("/"),failover:n.desc.entity,id:s.string(),label:s.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:s.boolean(),unit:s.string()}).unknown(),preferences:{allowUnknown:s.boolean(),abortEarly:s.boolean(),artifacts:s.boolean(),cache:s.boolean(),convert:s.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:s.boolean(),label:["path","key"],language:[s.string(),n.desc.ref],wrap:{label:n.wrap,array:n.wrap}},externals:s.boolean(),messages:n.desc.messages,noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:["required","optional","forbidden"],skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()},allow:n.desc.values,invalid:n.desc.values,rules:s.array().min(1).items({name:s.string().required(),args:s.object().min(1),keep:s.boolean(),message:[s.string(),n.desc.messages],warn:s.boolean()}),keys:s.object().pattern(/.*/,s.link("/")),link:n.desc.ref}).pattern(/^[a-z]\w*$/,s.any())},493:(t,e,i)=>{const s=i(8571),n=i(9621),r=i(8160),o={value:El("value")};t.exports=o.State=class{localize(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);const s=new o.State(t,e,this);return i&&s.schemas&&(s.schemas=[o.schemas(i),...s.schemas]),s}nest(t,e){const i=new o.State(this.path,this.ancestors,this);return i.schemas=i.schemas&&[o.schemas(t),...i.schemas],i.debug=e,i}shadow(t,e){this.mainstay.shadow=this.mainstay.shadow||new o.Shadow,this.mainstay.shadow.set(this.path,t,e)}snapshot(){this.mainstay.shadow&&(this.X_=s(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this.X_),this.X_=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this.X_),this.X_=void 0),this.mainstay.commit()}constructor(t,e,i){this.path=t,this.ancestors=e,this.mainstay=i.mainstay,this.schemas=i.schemas,this.debug=null}},o.schemas=function(t){return r.isSchema(t)?{schema:t}:t},o.Shadow=class{set(t,e,i){if(!t.length||"strip"===i&&"number"==typeof t[t.length-1])return;this.p_=this.p_||new Map;let s=this.p_;for(let e=0;e<t.length;++e){const i=t[e];let n=s.get(i);n||(n=new Map,s.set(i,n)),s=n}s[o.value]=e}get(t){const e=this.node(t);if(e)return e[o.value]}node(t){if(this.p_)return n(this.p_,t,{iterables:!0})}override(t,e){if(!this.p_)return;const i=t.slice(0,-1),s=t[t.length-1],r=n(this.p_,i,{iterables:!0});e?r.set(s,e):r&&r.delete(s)}constructor(){this.p_=null}}},3328:(t,e,i)=>{const s=i(375),n=i(8571),r=i(5277),o=i(1447),h=i(8160),a=i(6354),u=i(6133),c={symbol:El("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join("\x01"),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};t.exports=c.Template=class{z_(){if(!this.source.includes("{"))return;const t=c.encode(this.source),e=c.split(t);let i=!1;const s=[],n=e.shift();n&&s.push(n);for(const t of e){const e="{"!==t[0],n=e?"}":"}}",r=t.indexOf(n);if(-1===r||"{"===t[1]){s.push("{".concat(c.decode(t)));continue}let o=t.slice(e?0:1,r);const h=":"===o[0];h&&(o=o.slice(1));const a=this.q_(c.decode(o),{raw:e,wrapped:h});s.push(a),"string"!=typeof a&&(i=!0);const u=t.slice(r+n.length);u&&s.push(c.decode(u))}i?this.O_=s:this.rendered=s.join("")}static date(t,e){return c.dateFormat[e.dateFormat].call(t)}describe(t){if(void 0===t&&(t={}),!this.Y_&&t.compact)return this.source;const e={template:this.source};return this.Y_&&(e.options=this.Y_),this.K_&&(e.functions=this.K_),e}static build(t){return new c.Template(t.template,t.options||t.functions?y(d({},t.options),{functions:t.functions}):void 0)}isDynamic(){return!!this.O_}static isTemplate(t){return!!t&&!!t[h.symbols.template]}refs(){if(!this.O_)return;const t=[];for(const e of this.O_)"string"!=typeof e&&t.push(...e.refs);return t}resolve(t,e,i,s){return this.O_&&1===this.O_.length?this.j_(this.O_[0],t,e,i,s,{}):this.render(t,e,i,s)}j_(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return t.ref?t.ref.resolve(...i):t.formula.evaluate(i)}render(t,e,i,s,n){if(void 0===n&&(n={}),!this.isDynamic())return this.rendered;const o=[];for(const h of this.O_)if("string"==typeof h)o.push(h);else{const a=this.j_(h,t,e,i,s,n),u=c.stringify(a,t,e,i,s,n);if(void 0!==u){const t=h.raw||!1===(n.errors&&n.errors.escapeHtml)?u:r(u);o.push(c.wrap(t,h.wrapped&&i.errors.wrap.label))}}return o.join("")}q_(t,e){let{raw:i,wrapped:s}=e;const n=[],r=t=>{const e=u.create(t,this.Y_);return n.push(e),t=>{const i=e.resolve(...t);return void 0!==i?i:null}};try{const e=this.K_?d(d({},c.functions),this.K_):c.functions;var h=new o.Parser(t,{reference:r,functions:e,constants:c.constants})}catch(e){throw e.message='Invalid template variable "'.concat(t,'" fails due to: ').concat(e.message),e}if(h.single){if("reference"===h.single.type){const t=n[0];return{ref:t,raw:i,refs:n,wrapped:s||"local"===t.type&&"label"===t.key}}return c.stringify(h.single.value)}return{formula:h,raw:i,refs:n}}toString(){return this.source}constructor(t,e){if(s("string"==typeof t,"Template source must be a string"),s(!t.includes("\0")&&!t.includes("\x01"),"Template source cannot contain reserved control characters"),this.source=t,this.rendered=t,this.O_=null,e){const t=e,{functions:i}=t,r=b(t,["functions"]);this.Y_=w.keys(r).length?n(r):void 0,this.K_=i,this.K_&&(s(w.keys(this.K_).every((t=>"string"==typeof t)),"Functions keys must be strings"),s(w.values(this.K_).every((t=>"function"==typeof t)),"Functions values must be functions"))}else this.Y_=void 0,this.K_=void 0;this.z_()}},c.Template.prototype[h.symbols.template]=!0,c.Template.prototype.isImmutable=!0,c.encode=function(t){return t.replace(/\\(\{+)/g,((t,e)=>c.opens.slice(0,e.length))).replace(/\\(\}+)/g,((t,e)=>c.closes.slice(0,e.length)))},c.decode=function(t){return t.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},c.split=function(t){const e=[];let i="";for(let s=0;s<t.length;++s){const n=t[s];if("{"===n){let n="";for(;s+1<t.length&&"{"===t[s+1];)n+="{",++s;e.push(i),i=n}else i+=n}return e.push(i),e},c.wrap=function(t,e){return e?1===e.length?"".concat(e).concat(t).concat(e):"".concat(e[0]).concat(t).concat(e[1]):t},c.stringify=function(t,e,i,s,n,r){void 0===r&&(r={});const o=typeof t,h=s&&s.errors&&s.errors.wrap||{};let a=!1;if(u.isRef(t)&&t.render&&(a=t.in,t=t.resolve(e,i,s,n,d({in:t.in},r))),null===t)return"null";if("string"===o)return c.wrap(t,r.arrayItems&&h.string);if("number"===o||"function"===o||"symbol"===o)return t.toString();if("object"!==o)return JSON.stringify(t);if(t instanceof Date)return c.Template.date(t,s);if(t instanceof Map){const e=[];for(const[i,s]of t.entries())e.push("".concat(i.toString()," -> ").concat(s.toString()));t=e}if(!Array.isArray(t))return t.toString();const l=[];for(const o of t)l.push(c.stringify(o,e,i,s,n,d({arrayItems:!0},r)));return c.wrap(l.join(", "),!a&&h.array)},c.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},c.functions={if:(t,e,i)=>t?e:i,length:t=>"string"==typeof t?t.length:t&&"object"==typeof t?Array.isArray(t)?t.length:w.keys(t).length:null,msg(t){const[e,i,s,n,r]=this,o=r.messages;if(!o)return"";const h=a.template(e,o[0],t,i,s)||a.template(e,o[1],t,i,s);return h?h.render(e,i,s,n,r):""},number:t=>"number"==typeof t?t:"string"==typeof t?C(t):"boolean"==typeof t?t?1:0:t instanceof Date?t.getTime():null}},4946:(t,e,i)=>{const s=i(375),n=i(1687),r=i(8068),o=i(8160),h=i(3292),a=i(6354),u=i(6133),c={};t.exports=r.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:u.toSibling}},args:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return 1===i.length&&Array.isArray(i[0])?t.try(...i[0]):t.try(...i)},validate(t,e){const{schema:i,error:s,state:r,prefs:o}=e;if(i.v_.match){const e=[],h=[];for(let s=0;s<i.$_terms.matches.length;++s){const n=i.$_terms.matches[s],a=r.nest(n.schema,"match.".concat(s));a.snapshot();const u=n.schema.$_validate(t,a,o);u.errors?(h.push(u.errors),a.restore()):(e.push(u.value),a.commit())}if(0===e.length)return{errors:s("alternatives.any",{details:h.map((t=>a.details(t,{override:!1})))})};if("one"===i.v_.match)return 1===e.length?{value:e[0]}:{errors:s("alternatives.one")};if(e.length!==i.$_terms.matches.length)return{errors:s("alternatives.all",{details:h.map((t=>a.details(t,{override:!1})))})};const u=t=>t.$_terms.matches.some((t=>"object"===t.schema.type||"alternatives"===t.schema.type&&u(t.schema)));return u(i)?{value:e.reduce(((t,e)=>n(t,e,{mergeArrays:!1})))}:{value:e[e.length-1]}}const h=[];for(let e=0;e<i.$_terms.matches.length;++e){const s=i.$_terms.matches[e];if(s.schema){const i=r.nest(s.schema,"match.".concat(e));i.snapshot();const n=s.schema.$_validate(t,i,o);if(!n.errors)return i.commit(),n;i.restore(),h.push({schema:s.schema,reports:n.errors});continue}const n=s.ref?s.ref.resolve(t,r,o):t,a=s.is?[s]:s.switch;for(let i=0;i<a.length;++i){const h=a[i],{is:u,then:c,otherwise:l}=h,d="match.".concat(e).concat(s.switch?"."+i:"");if(u.$_match(n,r.nest(u,"".concat(d,".is")),o)){if(c)return c.$_validate(t,r.nest(c,"".concat(d,".then")),o)}else if(l)return l.$_validate(t,r.nest(l,"".concat(d,".otherwise")),o)}}return c.errors(h,e)},rules:{conditional:{method(t,e){s(!this.v_.Q_,"Unreachable condition"),s(!this.v_.match,"Cannot combine match mode",this.v_.match,"with conditional rule"),s(void 0===e.break,"Cannot use break option with alternatives conditional");const i=this.clone(),n=h.when(i,t,e),r=n.is?[n]:n.switch;for(const t of r)if(t.then&&t.otherwise){i.$_setFlag("Q_",!0,{clone:!1});break}return i.$_terms.matches.push(n),i.$_mutateRebuild()}},match:{method(t){if(s(["any","one","all"].includes(t),"Invalid alternatives match mode",t),"any"!==t)for(const e of this.$_terms.matches)s(e.schema,"Cannot combine match mode",t,"with conditional rules");return this.$_setFlag("match",t)}},try:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];s(e.length,"Missing alternative schemas"),o.verifyFlat(e,"try"),s(!this.v_.Q_,"Unreachable condition");const n=this.clone();for(const t of e)n.$_terms.matches.push({schema:n.$_compile(t)});return n.$_mutateRebuild()}}},overrides:{label(t){return this.$_parent("label",t).$_modify({each:(e,i)=>"is"!==i.path[0]&&"string"!=typeof e.v_.label?e.label(t):void 0,ref:!1})}},rebuild(t){t.$_modify({each:e=>{o.isSchema(e)&&"array"===e.type&&t.$_setFlag("J_",!0,{clone:!1})}})},manifest:{build(t,e){if(e.matches)for(const i of e.matches){const{schema:e,ref:s,is:n,not:r,then:o,otherwise:h}=i;t=e?t.try(e):s?t.conditional(s,{is:n,then:o,not:r,otherwise:h,switch:i.switch}):t.conditional(n,{then:o,otherwise:h})}return t}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),c.errors=function(t,e){let{error:i,state:s}=e;if(!t.length)return{errors:i("alternatives.any")};if(1===t.length)return{errors:t[0].reports};const n=new Set,r=[];for(const{reports:e,schema:o}of t){if(e.length>1)return c.unmatched(t,i);const h=e[0];if(h instanceof a.Report==0)return c.unmatched(t,i);if(h.state.path.length!==s.path.length){r.push({type:o.type,report:h});continue}if("any.only"===h.code){for(const t of h.local.valids)n.add(t);continue}const[u,l]=h.code.split(".");"base"!==l?r.push({type:o.type,report:h}):"object.base"===h.code?n.add(h.local.type):n.add(u)}return r.length?1===r.length?{errors:r[0].report}:c.unmatched(t,i):{errors:i("alternatives.types",{types:[...n]})}},c.unmatched=function(t,e){const i=[];for(const e of t)i.push(...e.reports);return{errors:e("alternatives.match",a.details(i,{override:!1}))}}},8068:(t,e,i)=>{const s=i(375),n=i(7629),r=i(8160),o=i(6914);t.exports=n.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(t,e){return s("function"==typeof t,"Method must be a function"),s(void 0===e||e&&"string"==typeof e,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:t,description:e}})},validate(t,e,i){let{method:s}=i;try{return s(t,e)}catch(t){return e.error("any.custom",{error:t})}},args:["method","description"],multi:!0},messages:{method(t){return this.prefs({messages:t})}},shared:{method(t){s(r.isSchema(t)&&t.v_.id,"Schema must be a schema with an id");const e=this.clone();return e.$_terms.shared=e.$_terms.shared||[],e.$_terms.shared.push(t),e.$_mutateRegister(t),e}},warning:{method(t,e){return s(t&&"string"==typeof t,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:t,local:e},warn:!0})},validate:(t,e,i)=>{let{code:s,local:n}=i;return e.error(s,n)},args:["code","local"],multi:!0}},modifiers:{keep(t,e){void 0===e&&(e=!0),t.keep=e},message(t,e){t.message=o.compile(e)},warn(t,e){void 0===e&&(e=!0),t.warn=e}},manifest:{build(t,e){for(const i in e){const s=e[i];if(["examples","externals","metas","notes","tags"].includes(i))for(const e of s)t=t[i.slice(0,-1)](e);else if("alterations"!==i)if("whens"!==i){if("shared"===i)for(const e of s)t=t.shared(e)}else for(const e of s){const{ref:i,is:s,not:n,then:r,otherwise:o,concat:h}=e;t=h?t.concat(h):i?t.when(i,{is:s,not:n,then:r,otherwise:o,switch:e.switch,break:e.break}):t.when(s,{then:r,otherwise:o,break:e.break})}else{const e={};for(const{target:t,adjuster:i}of s)e[t]=i;t=t.alter(e)}}return t}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(t,e,i)=>{const s=i(375),n=i(9474),r=i(9621),o=i(8068),h=i(8160),a=i(3292),u={};t.exports=o.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},rv:{init:[]},ov:{init:[]},hv:{init:[]}},coerce:{from:"object",method(t,e){let{schema:i,state:s,prefs:n}=e;if(!Array.isArray(t))return;const r=i.$_getRule("sort");return r?u.sort(i,t,r.args.options,s,n):void 0}},validate(t,e){let{schema:i,error:s}=e;if(!Array.isArray(t)){if(i.v_.single){const e=[t];return e[h.symbols.arraySingle]=!0,{value:e}}return{errors:s("array.base")}}if(i.$_getRule("items")||i.$_terms.externals)return{value:t.slice()}},rules:{has:{method(t){t=this.$_compile(t,{appendPath:!0});const e=this.$_addRule({name:"has",args:{schema:t}});return e.$_mutateRegister(t),e},validate(t,e,i){let{state:s,prefs:n,error:r}=e,{schema:o}=i;const h=[t,...s.ancestors];for(let e=0;e<t.length;++e){const i=s.localize([...s.path,e],h,o);if(o.$_match(t[e],i,n))return t}const a=o.v_.label;return a?r("array.hasKnown",{patternLabel:a}):r("array.hasUnknown",null)},multi:!0},items:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];h.verifyFlat(e,"items");const s=this.$_addRule("items");for(let t=0;t<e.length;++t){const i=h.tryWithPath((()=>this.$_compile(e[t])),t,{append:!0});s.$_terms.items.push(i)}return s.$_mutateRebuild()},validate(t,e){let{schema:i,error:s,state:n,prefs:r,errorsArray:o}=e;const a=i.$_terms.hv.slice(),c=i.$_terms.ordered.slice(),l=[...i.$_terms.ov,...a],d=!t[h.symbols.arraySingle];delete t[h.symbols.arraySingle];const f=o();let _=t.length;for(let e=0;e<_;++e){const o=t[e];let h=!1,v=!1;const g=d?e:new Number(e),m=[...n.path,g];if(!i.v_.sparse&&void 0===o){if(f.push(s("array.sparse",{key:g,path:m,pos:e,value:void 0},n.localize(m))),r.abortEarly)return f;c.shift();continue}const p=[t,...n.ancestors];for(const t of i.$_terms.rv)if(t.$_match(o,n.localize(m,p,t),r,{presence:"ignore"})){if(f.push(s("array.excludes",{pos:e,value:o},n.localize(m))),r.abortEarly)return f;h=!0,c.shift();break}if(h)continue;if(i.$_terms.ordered.length){if(c.length){const h=c.shift(),a=h.$_validate(o,n.localize(m,p,h),r);if(a.errors){if(f.push(...a.errors),r.abortEarly)return f}else if("strip"===h.v_.result)u.fastSplice(t,e),--e,--_;else{if(!i.v_.sparse&&void 0===a.value){if(f.push(s("array.sparse",{key:g,path:m,pos:e,value:void 0},n.localize(m))),r.abortEarly)return f;continue}t[e]=a.value}continue}if(!i.$_terms.items.length){if(f.push(s("array.orderedLength",{pos:e,limit:i.$_terms.ordered.length})),r.abortEarly)return f;break}}const w=[];let y=a.length;for(let h=0;h<y;++h){const c=n.localize(m,p,a[h]);c.snapshot();const l=a[h].$_validate(o,c,r);if(w[h]=l,!l.errors){if(c.commit(),t[e]=l.value,v=!0,u.fastSplice(a,h),--h,--y,!i.v_.sparse&&void 0===l.value&&(f.push(s("array.sparse",{key:g,path:m,pos:e,value:void 0},n.localize(m))),r.abortEarly))return f;break}c.restore()}if(v)continue;const b=r.stripUnknown&&!!r.stripUnknown.arrays||!1;y=l.length;for(const c of l){let l;const d=a.indexOf(c);if(-1!==d)l=w[d];else{const a=n.localize(m,p,c);if(a.snapshot(),l=c.$_validate(o,a,r),!l.errors){a.commit(),"strip"===c.v_.result?(u.fastSplice(t,e),--e,--_):i.v_.sparse||void 0!==l.value?t[e]=l.value:(f.push(s("array.sparse",{key:g,path:m,pos:e,value:void 0},n.localize(m))),h=!0),v=!0;break}a.restore()}if(1===y){if(b){u.fastSplice(t,e),--e,--_,v=!0;break}if(f.push(...l.errors),r.abortEarly)return f;h=!0;break}}if(!h&&(i.$_terms.ov.length||i.$_terms.hv.length)&&!v){if(b){u.fastSplice(t,e),--e,--_;continue}if(f.push(s("array.includes",{pos:e,value:o},n.localize(m))),r.abortEarly)return f}}return a.length&&u.fillMissedErrors(i,f,a,t,n,r),c.length&&(u.fillOrderedErrors(i,f,c,t,n,r),f.length||u.fillDefault(c,t,n,r)),f.length?f:t},priority:!0,manifest:!1},length:{method(t){return this.$_addRule({name:"length",args:{limit:t},operator:"="})},validate:(t,e,i,s)=>{let{limit:n}=i,{name:r,operator:o,args:a}=s;return h.compare(t.length,n,o)?t:e.error("array."+r,{limit:a.limit,value:t})},args:[{name:"limit",ref:!0,assert:h.limit,message:"must be a positive integer"}]},max:{method(t){return this.$_addRule({name:"max",method:"length",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"length",args:{limit:t},operator:">="})}},ordered:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];h.verifyFlat(e,"ordered");const s=this.$_addRule("items");for(let t=0;t<e.length;++t){const i=h.tryWithPath((()=>this.$_compile(e[t])),t,{append:!0});u.validateSingle(i,s),s.$_mutateRegister(i),s.$_terms.ordered.push(i)}return s.$_mutateRebuild()}},single:{method(t){const e=void 0===t||!!t;return s(!e||!this.v_.J_,"Cannot specify single rule when array has array items"),this.$_setFlag("single",e)}},sort:{method(t){void 0===t&&(t={}),h.assertOptions(t,["by","order"]);const e={order:t.order||"ascending"};return t.by&&(e.by=a.ref(t.by,{ancestor:0}),s(!e.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:e}})},validate(t,e,i){let{error:s,state:n,prefs:r,schema:o}=e,{options:h}=i;const{value:a,errors:c}=u.sort(o,t,h,n,r);if(c)return c;for(let e=0;e<t.length;++e)if(t[e]!==a[e])return s("array.sort",{order:h.order,by:h.by?h.by.key:"value"});return t},convert:!0},sparse:{method(t){const e=void 0===t||!!t;return this.v_.sparse===e?this:(e?this.clone():this.$_addRule("items")).$_setFlag("sparse",e,{clone:!1})}},unique:{method(t,e){void 0===e&&(e={}),s(!t||"function"==typeof t||"string"==typeof t,"comparator must be a function or a string"),h.assertOptions(e,["ignoreUndefined","separator"]);const i={name:"unique",args:{options:e,comparator:t}};if(t)if("string"==typeof t){const s=h.default(e.separator,".");i.path=s?t.split(s):[t]}else i.comparator=t;return this.$_addRule(i)},validate(t,e,i,o){let{state:h,error:a,schema:u}=e,{comparator:c,options:l}=i,{comparator:d,path:f}=o;const _={string:w.create(null),number:w.create(null),undefined:w.create(null),boolean:w.create(null),bigint:w.create(null),object:new Map,function:new Map,custom:new Map},v=d||n,g=l.ignoreUndefined;for(let e=0;e<t.length;++e){const i=f?r(t[e],f):t[e],n=d?_.custom:_[typeof i];if(s(n,"Failed to find unique map container for type",typeof i),n instanceof Map){const s=n.entries();let r;for(;!(r=s.next()).done;)if(v(r.value[0],i)){const i=h.localize([...h.path,e],[t,...h.ancestors]),s={pos:e,value:t[e],dupePos:r.value[1],dupeValue:t[r.value[1]]};return f&&(s.path=c),a("array.unique",s,i)}n.set(i,e)}else{if((!g||void 0!==i)&&void 0!==n[i]){const s={pos:e,value:t[e],dupePos:n[i],dupeValue:t[n[i]]};return f&&(s.path=c),a("array.unique",s,h.localize([...h.path,e],[t,...h.ancestors]))}n[i]=e}}return t},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(t,e)=>new Set(t)}},rebuild(t){t.$_terms.ov=[],t.$_terms.rv=[],t.$_terms.hv=[];for(const e of t.$_terms.items)u.validateSingle(e,t),"required"===e.v_.presence?t.$_terms.hv.push(e):"forbidden"===e.v_.presence?t.$_terms.rv.push(e):t.$_terms.ov.push(e);for(const e of t.$_terms.ordered)u.validateSingle(e,t)},manifest:{build:(t,e)=>(e.items&&(t=t.items(...e.items)),e.ordered&&(t=t.ordered(...e.ordered)),t)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),u.fillMissedErrors=function(t,e,i,s,n,r){const o=[];let h=0;for(const t of i){const e=t.v_.label;e?o.push(e):++h}o.length?h?e.push(t.$_createError("array.includesRequiredBoth",s,{knownMisses:o,unknownMisses:h},n,r)):e.push(t.$_createError("array.includesRequiredKnowns",s,{knownMisses:o},n,r)):e.push(t.$_createError("array.includesRequiredUnknowns",s,{unknownMisses:h},n,r))},u.fillOrderedErrors=function(t,e,i,s,n,r){const o=[];for(const t of i)"required"===t.v_.presence&&o.push(t);o.length&&u.fillMissedErrors(t,e,o,s,n,r)},u.fillDefault=function(t,e,i,s){const n=[];let r=!0;for(let o=t.length-1;o>=0;--o){const h=t[o],a=[e,...i.ancestors],u=h.$_validate(void 0,i.localize(i.path,a,h),s).value;if(r){if(void 0===u)continue;r=!1}n.unshift(u)}n.length&&e.push(...n)},u.fastSplice=function(t,e){let i=e;for(;i<t.length;)t[i++]=t[i];--t.length},u.validateSingle=function(t,e){("array"===t.type||t.v_.J_)&&(s(!e.v_.single,"Cannot specify array item with single rule enabled"),e.$_setFlag("J_",!0,{clone:!1}))},u.sort=function(t,e,i,s,n){const r="ascending"===i.order?1:-1,o=-1*r,h=r,a=(a,c)=>{let l=u.compare(a,c,o,h);if(null!==l||(i.by&&(a=i.by.resolve(a,s,n),c=i.by.resolve(c,s,n)),l=u.compare(a,c,o,h),null!==l))return l;const d=typeof a;if(d!==typeof c)throw t.$_createError("array.sort.mismatching",e,null,s,n);if("number"!==d&&"string"!==d)throw t.$_createError("array.sort.unsupported",e,{type:d},s,n);return"number"===d?(a-c)*r:a<c?o:h};try{return{value:e.slice().sort(a)}}catch(t){return{errors:t}}},u.compare=function(t,e,i,s){return t===e?0:void 0===t?1:void 0===e?-1:null===t?s:null===e?i:null}},4937:(t,e,i)=>{const s=i(375),n=i(8068),r=i(8160),o=i(2036),h={isBool:function(t){return"boolean"==typeof t}};t.exports=n.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(t,e){let{schema:i}=e;if("boolean"!=typeof t){if("string"==typeof t){const e=i.v_.sensitive?t:t.toLowerCase();t="true"===e||"false"!==e&&t}return"boolean"!=typeof t&&(t=i.$_terms.truthy&&i.$_terms.truthy.has(t,null,null,!i.v_.sensitive)||(!i.$_terms.falsy||!i.$_terms.falsy.has(t,null,null,!i.v_.sensitive))&&t),{value:t}}},validate(t,e){let{error:i}=e;if("boolean"!=typeof t)return{value:t,errors:i("boolean.base")}},rules:{truthy:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];r.verifyFlat(e,"truthy");const n=this.clone();n.$_terms.truthy=n.$_terms.truthy||new o;for(let t=0;t<e.length;++t){const i=e[t];s(void 0!==i,"Cannot call truthy with undefined"),n.$_terms.truthy.add(i)}return n}},falsy:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];r.verifyFlat(e,"falsy");const n=this.clone();n.$_terms.falsy=n.$_terms.falsy||new o;for(let t=0;t<e.length;++t){const i=e[t];s(void 0!==i,"Cannot call falsy with undefined"),n.$_terms.falsy.add(i)}return n}},sensitive:{method(t){return void 0===t&&(t=!0),this.$_setFlag("sensitive",t)}}},cast:{number:{from:h.isBool,to:(t,e)=>t?1:0},string:{from:h.isBool,to:(t,e)=>t?"true":"false"}},manifest:{build:(t,e)=>(e.truthy&&(t=t.truthy(...e.truthy)),e.falsy&&(t=t.falsy(...e.falsy)),t)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(t,e,i)=>{const s=i(375),n=i(8068),r=i(8160),o=i(3328),h={isDate:function(t){return t instanceof Date}};t.exports=n.extend({type:"date",coerce:{from:["number","string"],method:(t,e)=>{let{schema:i}=e;return{value:h.parse(t,i.v_.format)||t}}},validate(t,e){let{schema:i,error:s,prefs:n}=e;if(t instanceof Date&&!S(t.getTime()))return;const r=i.v_.format;return n.convert&&r&&"string"==typeof t?{value:t,errors:s("date.format",{format:r})}:{value:t,errors:s("date.base")}},rules:{compare:{method:!1,validate(t,e,i,s){let{date:n}=i,{name:o,operator:h,args:a}=s;const u="now"===n?Date.now():n.getTime();return r.compare(t.getTime(),u,h)?t:e.error("date."+o,{limit:a.date,value:t})},args:[{name:"date",ref:!0,normalize:t=>"now"===t?t:h.parse(t),assert:t=>null!==t,message:"must have a valid date format"}]},format:{method(t){return s(["iso","javascript","unix"].includes(t),"Unknown date format",t),this.$_setFlag("format",t)}},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{date:t},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{date:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{date:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{date:t},operator:">="})}},timestamp:{method(t){return void 0===t&&(t="javascript"),s(["javascript","unix"].includes(t),'"type" must be one of "javascript, unix"'),this.format(t)}}},cast:{number:{from:h.isDate,to:(t,e)=>t.getTime()},string:{from:h.isDate,to:(t,e)=>{let{prefs:i}=e;return o.date(t,i)}}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),h.parse=function(t,e){if(t instanceof Date)return t;if("string"!=typeof t&&(S(t)||!isFinite(t))||/^\s*$/.test(t))return null;if("iso"===e)return r.isIsoDate(t)?h.date(t.toString()):null;const i=t;if("string"==typeof t&&/^[+-]?\d+(\.\d+)?$/.test(t)&&(t=C(t)),e){if("javascript"===e)return h.date(1*t);if("unix"===e)return h.date(1e3*t);if("string"==typeof i)return null}return h.date(t)},h.date=function(t){const e=new Date(t);return S(e.getTime())?null:e}},390:(t,e,i)=>{const s=i(375),n=i(7824);t.exports=n.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(t){return s(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:t}})},validate:(t,e,i)=>{let{n:s}=i;return t.length===s?t:e.error("function.arity",{n:s})}},class:{method(){return this.$_addRule("class")},validate:(t,e)=>/^\s*class\s/.test(t.toString())?t:e.error("function.class",{value:t})},minArity:{method(t){return s(Number.isSafeInteger(t)&&t>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:t}})},validate:(t,e,i)=>{let{n:s}=i;return t.length>=s?t:e.error("function.minArity",{n:s})}},maxArity:{method(t){return s(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:t}})},validate:(t,e,i)=>{let{n:s}=i;return t.length<=s?t:e.error("function.maxArity",{n:s})}}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(t,e,i)=>{const s=i(978),n=i(375),r=i(8571),o=i(3652),h=i(8068),a=i(8160),u=i(3292),c=i(6354),l=i(6133),f=i(3328),_={renameDefaults:{alias:!1,multiple:!1,override:!1}};t.exports=h.extend({type:"uv",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(t,e)=>t.keys(e),validate(t,e){let{schema:i,error:s,state:n,prefs:r}=e;if(!t||typeof t!==i.$_property("typeof")||Array.isArray(t))return{value:t,errors:s("object.base",{type:i.$_property("typeof")})};if(!(i.$_terms.renames||i.$_terms.dependencies||i.$_terms.keys||i.$_terms.patterns||i.$_terms.externals))return;t=_.clone(t,r);const o=[];if(i.$_terms.renames&&!_.rename(i,t,n,r,o))return{value:t,errors:o};if(!i.$_terms.keys&&!i.$_terms.patterns&&!i.$_terms.dependencies)return{value:t,errors:o};const h=new Set(w.keys(t));if(i.$_terms.keys){const e=[t,...n.ancestors];for(const s of i.$_terms.keys){const i=s.key,a=t[i];h.delete(i);const u=n.localize([...n.path,i],e,s),c=s.schema.$_validate(a,u,r);if(c.errors){if(r.abortEarly)return{value:t,errors:c.errors};void 0!==c.value&&(t[i]=c.value),o.push(...c.errors)}else"strip"===s.schema.v_.result||void 0===c.value&&void 0!==a?delete t[i]:void 0!==c.value&&(t[i]=c.value)}}if(h.size||i.v_.fv){const e=_.unknown(i,t,h,o,n,r);if(e)return e}if(i.$_terms.dependencies)for(const e of i.$_terms.dependencies){if(null!==e.key&&!1===_.isPresent(e.options)(e.key.resolve(t,n,r,null,{shadow:!1})))continue;const s=_.dependencies[e.rel](i,e,t,n,r);if(s){const e=i.$_createError(s.code,t,s.context,n,r);if(r.abortEarly)return{value:t,errors:e};o.push(e)}}return{value:t,errors:o}},rules:{and:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"and"),_.dependency(this,"and",null,e)}},append:{method(t){return null==t||0===w.keys(t).length?this:this.keys(t)}},assert:{method(t,e,i){f.isTemplate(t)||(t=u.ref(t)),n(void 0===i||"string"==typeof i,"Message must be a string"),e=this.$_compile(e,{appendPath:!0});const s=this.$_addRule({name:"assert",args:{subject:t,schema:e,message:i}});return s.$_mutateRegister(t),s.$_mutateRegister(e),s},validate(t,e,i){let{error:s,prefs:n,state:r}=e,{subject:o,schema:h,message:a}=i;const u=o.resolve(t,r,n),c=l.isRef(o)?o.absolute(r):[];return h.$_match(u,r.localize(c,[t,...r.ancestors],h),n)?t:s("object.assert",{subject:o,message:a})},args:["subject","schema","message"],multi:!0},instance:{method(t,e){return n("function"==typeof t,"constructor must be a function"),e=e||t.name,this.$_addRule({name:"instance",args:{constructor:t,name:e}})},validate:(t,e,i)=>{let{constructor:s,name:n}=i;return t instanceof s?t:e.error("object.instance",{type:n,value:t})},args:["constructor","name"]},keys:{method(t){n(void 0===t||"object"==typeof t,"Object schema must be a valid object"),n(!a.isSchema(t),"Object schema cannot be a joi schema");const e=this.clone();if(t)if(w.keys(t).length){e.$_terms.keys=e.$_terms.keys?e.$_terms.keys.filter((e=>!t.hasOwnProperty(e.key))):new _.Keys;for(const i in t)a.tryWithPath((()=>e.$_terms.keys.push({key:i,schema:this.$_compile(t[i])})),i)}else e.$_terms.keys=new _.Keys;else e.$_terms.keys=null;return e.$_mutateRebuild()}},length:{method(t){return this.$_addRule({name:"length",args:{limit:t},operator:"="})},validate:(t,e,i,s)=>{let{limit:n}=i,{name:r,operator:o,args:h}=s;return a.compare(w.keys(t).length,n,o)?t:e.error("object."+r,{limit:h.limit,value:t})},args:[{name:"limit",ref:!0,assert:a.limit,message:"must be a positive integer"}]},max:{method(t){return this.$_addRule({name:"max",method:"length",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"length",args:{limit:t},operator:">="})}},nand:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"nand"),_.dependency(this,"nand",null,e)}},or:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"or"),_.dependency(this,"or",null,e)}},oxor:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return _.dependency(this,"oxor",null,e)}},pattern:{method(t,e,i){void 0===i&&(i={});const s=t instanceof RegExp;s||(t=this.$_compile(t,{appendPath:!0})),n(void 0!==e,"Invalid rule"),a.assertOptions(i,["fallthrough","matches"]),s&&n(!t.flags.includes("g")&&!t.flags.includes("y"),"pattern should not use global or sticky mode"),e=this.$_compile(e,{appendPath:!0});const r=this.clone();r.$_terms.patterns=r.$_terms.patterns||[];const o={[s?"regex":"schema"]:t,rule:e};return i.matches&&(o.matches=this.$_compile(i.matches),"array"!==o.matches.type&&(o.matches=o.matches.$_root.array().items(o.matches)),r.$_mutateRegister(o.matches),r.$_setFlag("fv",!0,{clone:!1})),i.fallthrough&&(o.fallthrough=!0),r.$_terms.patterns.push(o),r.$_mutateRegister(e),r}},ref:{method(){return this.$_addRule("ref")},validate:(t,e)=>l.isRef(t)?t:e.error("object.refType",{value:t})},regex:{method(){return this.$_addRule("regex")},validate:(t,e)=>t instanceof RegExp?t:e.error("object.regex",{value:t})},rename:{method(t,e,i){void 0===i&&(i={}),n("string"==typeof t||t instanceof RegExp,"Rename missing the from argument"),n("string"==typeof e||e instanceof f,"Invalid rename to argument"),n(e!==t,"Cannot rename key to same name:",t),a.assertOptions(i,["alias","ignoreUndefined","override","multiple"]);const r=this.clone();r.$_terms.renames=r.$_terms.renames||[];for(const e of r.$_terms.renames)n(e.from!==t,"Cannot rename the same key multiple times");return e instanceof f&&r.$_mutateRegister(e),r.$_terms.renames.push({from:t,to:e,options:s(_.renameDefaults,i)}),r}},schema:{method(t){return void 0===t&&(t="any"),this.$_addRule({name:"schema",args:{type:t}})},validate:(t,e,i)=>{let{type:s}=i;return!a.isSchema(t)||"any"!==s&&t.type!==s?e.error("object.schema",{type:s}):t}},unknown:{method(t){return this.$_setFlag("unknown",!1!==t)}},with:{method(t,e,i){return void 0===i&&(i={}),_.dependency(this,"with",t,e,i)}},without:{method(t,e,i){return void 0===i&&(i={}),_.dependency(this,"without",t,e,i)}},xor:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"xor"),_.dependency(this,"xor",null,e)}}},overrides:{default(t,e){return void 0===t&&(t=a.symbols.deepDefault),this.$_parent("default",t,e)}},rebuild(t){if(t.$_terms.keys){const e=new o.Sorter;for(const i of t.$_terms.keys)a.tryWithPath((()=>e.add(i,{after:i.schema.$_rootReferences(),group:i.key})),i.key);t.$_terms.keys=new _.Keys(...e.nodes)}},manifest:{build(t,e){if(e.keys&&(t=t.keys(e.keys)),e.dependencies)for(const{rel:i,key:s=null,peers:n,options:r}of e.dependencies)t=_.dependency(t,i,s,n,r);if(e.patterns)for(const{regex:i,schema:s,rule:n,fallthrough:r,matches:o}of e.patterns)t=t.pattern(i||s,n,{fallthrough:r,matches:o});if(e.renames)for(const{from:i,to:s,options:n}of e.renames)t=t.rename(i,s,n);return t}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),_.clone=function(t,e){if("object"==typeof t){if(e.nonEnumerables)return r(t,{shallow:!0});const i=w.create(w.getPrototypeOf(t));return w.assign(i,t),i}const i=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return t.apply(this,i)};return i.prototype=r(t.prototype),w.defineProperty(i,"name",{value:t.name,writable:!1}),w.defineProperty(i,"length",{value:t.length,writable:!1}),w.assign(i,t),i},_.dependency=function(t,e,i,s,r){n(null===i||"string"==typeof i,e,"key must be a strings"),r||(r=s.length>1&&"object"==typeof s[s.length-1]?s.pop():{}),a.assertOptions(r,["separator","isPresent"]),s=[].concat(s);const o=a.default(r.separator,"."),h=[];for(const t of s)n("string"==typeof t,e,"peers must be strings"),h.push(u.ref(t,{separator:o,ancestor:0,prefix:!1}));null!==i&&(i=u.ref(i,{separator:o,ancestor:0,prefix:!1}));const c=t.clone();return c.$_terms.dependencies=c.$_terms.dependencies||[],c.$_terms.dependencies.push(new _.Dependency(e,i,h,s,r)),c},_.dependencies={and(t,e,i,s,n){const r=[],o=[],h=e.peers.length,a=_.isPresent(e.options);for(const t of e.peers)!1===a(t.resolve(i,s,n,null,{shadow:!1}))?r.push(t.key):o.push(t.key);if(r.length!==h&&o.length!==h)return{code:"object.and",context:{present:o,presentWithLabels:_.keysToLabels(t,o),missing:r,missingWithLabels:_.keysToLabels(t,r)}}},nand(t,e,i,s,n){const r=[],o=_.isPresent(e.options);for(const t of e.peers)o(t.resolve(i,s,n,null,{shadow:!1}))&&r.push(t.key);if(r.length!==e.peers.length)return;const h=e.paths[0],a=e.paths.slice(1);return{code:"object.nand",context:{main:h,mainWithLabel:_.keysToLabels(t,h),peers:a,peersWithLabels:_.keysToLabels(t,a)}}},or(t,e,i,s,n){const r=_.isPresent(e.options);for(const t of e.peers)if(r(t.resolve(i,s,n,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:e.paths,peersWithLabels:_.keysToLabels(t,e.paths)}}},oxor(t,e,i,s,n){const r=[],o=_.isPresent(e.options);for(const t of e.peers)o(t.resolve(i,s,n,null,{shadow:!1}))&&r.push(t.key);if(!r.length||1===r.length)return;const h={peers:e.paths,peersWithLabels:_.keysToLabels(t,e.paths)};return h.present=r,h.presentWithLabels=_.keysToLabels(t,r),{code:"object.oxor",context:h}},with(t,e,i,s,n){const r=_.isPresent(e.options);for(const o of e.peers)if(!1===r(o.resolve(i,s,n,null,{shadow:!1})))return{code:"object.with",context:{main:e.key.key,mainWithLabel:_.keysToLabels(t,e.key.key),peer:o.key,peerWithLabel:_.keysToLabels(t,o.key)}}},without(t,e,i,s,n){const r=_.isPresent(e.options);for(const o of e.peers)if(r(o.resolve(i,s,n,null,{shadow:!1})))return{code:"object.without",context:{main:e.key.key,mainWithLabel:_.keysToLabels(t,e.key.key),peer:o.key,peerWithLabel:_.keysToLabels(t,o.key)}}},xor(t,e,i,s,n){const r=[],o=_.isPresent(e.options);for(const t of e.peers)o(t.resolve(i,s,n,null,{shadow:!1}))&&r.push(t.key);if(1===r.length)return;const h={peers:e.paths,peersWithLabels:_.keysToLabels(t,e.paths)};return 0===r.length?{code:"object.missing",context:h}:(h.present=r,h.presentWithLabels=_.keysToLabels(t,r),{code:"object.xor",context:h})}},_.keysToLabels=function(t,e){return Array.isArray(e)?e.map((e=>t.$_mapLabels(e))):t.$_mapLabels(e)},_.isPresent=function(t){return"function"==typeof t.isPresent?t.isPresent:t=>void 0!==t},_.rename=function(t,e,i,s,n){const r={};for(const o of t.$_terms.renames){const h=[],a="string"!=typeof o.from;if(a)for(const t in e){if(void 0===e[t]&&o.options.ignoreUndefined||t===o.to)continue;const i=o.from.exec(t);i&&h.push({from:t,to:o.to,match:i})}else!w.prototype.hasOwnProperty.call(e,o.from)||void 0===e[o.from]&&o.options.ignoreUndefined||h.push(o);for(const u of h){const h=u.from;let c=u.to;if(c instanceof f&&(c=c.render(e,i,s,u.match)),h!==c){if(!o.options.multiple&&r[c]&&(n.push(t.$_createError("object.rename.multiple",e,{from:h,to:c,pattern:a},i,s)),s.abortEarly)||w.prototype.hasOwnProperty.call(e,c)&&!o.options.override&&!r[c]&&(n.push(t.$_createError("object.rename.override",e,{from:h,to:c,pattern:a},i,s)),s.abortEarly))return!1;void 0===e[h]?delete e[c]:e[c]=e[h],r[c]=!0,o.options.alias||delete e[h]}}}return!0},_.unknown=function(t,e,i,s,n,r){if(t.$_terms.patterns){let o=!1;const h=t.$_terms.patterns.map((t=>{if(t.matches)return o=!0,[]})),a=[e,...n.ancestors];for(const o of i){const u=e[o],c=[...n.path,o];for(let l=0;l<t.$_terms.patterns.length;++l){const d=t.$_terms.patterns[l];if(d.regex){const t=d.regex.test(o);if(n.mainstay.tracer.debug(n,"rule","pattern.".concat(l),t?"pass":"error"),!t)continue}else if(!d.schema.$_match(o,n.nest(d.schema,"pattern.".concat(l)),r))continue;i.delete(o);const f=n.localize(c,a,{schema:d.rule,key:o}),_=d.rule.$_validate(u,f,r);if(_.errors){if(r.abortEarly)return{value:e,errors:_.errors};s.push(..._.errors)}if(d.matches&&h[l].push(o),e[o]=_.value,!d.fallthrough)break}}if(o)for(let i=0;i<h.length;++i){const o=h[i];if(!o)continue;const u=t.$_terms.patterns[i].matches,l=n.localize(n.path,a,u),d=u.$_validate(o,l,r);if(d.errors){const i=c.details(d.errors,{override:!1});i.matches=o;const h=t.$_createError("object.pattern.match",e,i,n,r);if(r.abortEarly)return{value:e,errors:h};s.push(h)}}}if(i.size&&(t.$_terms.keys||t.$_terms.patterns)){if(r.stripUnknown&&void 0===t.v_.unknown||r.skipFunctions){const t=!(!r.stripUnknown||!0!==r.stripUnknown&&!r.stripUnknown.objects);for(const s of i)t?(delete e[s],i.delete(s)):"function"==typeof e[s]&&i.delete(s)}if(!a.default(t.v_.unknown,r.allowUnknown))for(const o of i){const i=n.localize([...n.path,o],[]),h=t.$_createError("object.unknown",e[o],{child:o},i,r,{flags:!1});if(r.abortEarly)return{value:e,errors:h};s.push(h)}}},_.Dependency=class{describe(){const t={rel:this.rel,peers:this.paths};return null!==this.key&&(t.key=this.key.key),"."!==this.peers[0].separator&&(t.options=y(d({},t.options),{separator:this.peers[0].separator})),this.options.isPresent&&(t.options=y(d({},t.options),{isPresent:this.options.isPresent})),t}constructor(t,e,i,s,n){this.rel=t,this.key=e,this.peers=i,this.paths=s,this.options=n}},_.Keys=class extends Array{concat(t){const e=this.slice(),i=new Map;for(let t=0;t<e.length;++t)i.set(e[t].key,t);for(const s of t){const t=s.key,n=i.get(t);void 0!==n?e[n]={key:t,schema:e[n].schema.concat(s.schema)}:e.push(s)}return e}}},8785:(t,e,i)=>{const s=i(375),n=i(8068),r=i(8160),o=i(3292),h=i(6354),a={};t.exports=n.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(t,e)=>t.ref(e),validate(t,e){let{schema:i,state:n,prefs:r}=e;s(i.$_terms.link,"Uninitialized link schema");const o=a.generate(i,t,n,r),h=i.$_terms.link[0].ref;return o.$_validate(t,n.nest(o,"link:".concat(h.display,":").concat(o.type)),r)},generate:(t,e,i,s)=>a.generate(t,e,i,s),rules:{ref:{method(t){s(!this.$_terms.link,"Cannot reinitialize schema"),t=o.ref(t),s("value"===t.type||"local"===t.type,"Invalid reference type:",t.type),s("local"===t.type||"root"===t.ancestor||t.ancestor>0,"Link cannot reference itself");const e=this.clone();return e.$_terms.link=[{ref:t}],e}},relative:{method(t){return void 0===t&&(t=!0),this.$_setFlag("relative",t)}}},overrides:{concat(t){s(this.$_terms.link,"Uninitialized link schema"),s(r.isSchema(t),"Invalid schema object"),s("link"!==t.type,"Cannot merge type link with another link");const e=this.clone();return e.$_terms.whens||(e.$_terms.whens=[]),e.$_terms.whens.push({concat:t}),e.$_mutateRebuild()}},manifest:{build:(t,e)=>(s(e.link,"Invalid link description missing link"),t.ref(e.link))}}),a.generate=function(t,e,i,s){let n=i.mainstay.links.get(t);if(n)return n.C_(e,i,s).schema;const r=t.$_terms.link[0].ref,{perspective:o,path:h}=a.perspective(r,i);a.assert(o,"which is outside of schema boundaries",r,t,i,s);try{n=h.length?o.$_reach(h):o}catch(e){a.assert(!1,"to non-existing schema",r,t,i,s)}return a.assert("link"!==n.type,"which is another link",r,t,i,s),t.v_.relative||i.mainstay.links.set(t,n),n.C_(e,i,s).schema},a.perspective=function(t,e){if("local"===t.type){for(const{schema:i,key:s}of e.schemas){if((i.v_.id||s)===t.path[0])return{perspective:i,path:t.path.slice(1)};if(i.$_terms.shared)for(const e of i.$_terms.shared)if(e.v_.id===t.path[0])return{perspective:e,path:t.path.slice(1)}}return{perspective:null,path:null}}return"root"===t.ancestor?{perspective:e.schemas[e.schemas.length-1].schema,path:t.path}:{perspective:e.schemas[t.ancestor]&&e.schemas[t.ancestor].schema,path:t.path}},a.assert=function(t,e,i,n,r,o){t||s(!1,'"'.concat(h.label(n.v_,r,o),'" contains link reference "').concat(i.display,'" ').concat(e))}},3832:(t,e,i)=>{const s=i(375),n=i(8068),r=i(8160),o={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(t){const e=t.toString(),i=e.indexOf("."),s=e.indexOf("e");return(i<0?0:(s<0?e.length:s)-i-1)+(s<0?0:_.max(0,-x(e.slice(s+1))))}};t.exports=n.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(t,e){let{schema:i,error:s}=e;if(!t.match(o.numberRx))return;t=t.trim();const n={value:C(t)};if(0===n.value&&(n.value=0),!i.v_.unsafe)if(t.match(/e/i)){if(o.extractSignificantDigits(t)!==o.extractSignificantDigits(String(n.value)))return n.errors=s("number.unsafe"),n}else{const e=n.value.toString();if(e.match(/e/i))return n;if(e!==o.normalizeDecimal(t))return n.errors=s("number.unsafe"),n}return n}},validate(t,e){let{schema:i,error:s,prefs:n}=e;if(t===1/0||t===-1/0)return{value:t,errors:s("number.infinity")};if(!r.isNumber(t))return{value:t,errors:s("number.base")};const o={value:t};if(n.convert){const t=i.$_getRule("precision");if(t){const e=_.pow(10,t.args.limit);o.value=_.round(o.value*e)/e}}return 0===o.value&&(o.value=0),!i.v_.unsafe&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&(o.errors=s("number.unsafe")),o},rules:{compare:{method:!1,validate:(t,e,i,s)=>{let{limit:n}=i,{name:o,operator:h,args:a}=s;return r.compare(t,n,h)?t:e.error("number."+o,{limit:a.limit,value:t})},args:[{name:"limit",ref:!0,assert:r.isNumber,message:"must be a number"}]},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{limit:t},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(t,e)=>_.trunc(t)-t==0?t:e.error("number.integer")},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{limit:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{limit:t},operator:">="})}},multiple:{method(t){const e="number"==typeof t?o.decimalPlaces(t):null,i=_.pow(10,e);return this.$_addRule({name:"multiple",args:{base:t,baseDecimalPlace:e,pfactor:i}})},validate:(t,e,i,s)=>{let{base:n,baseDecimalPlace:r,pfactor:h}=i;return o.decimalPlaces(t)>r?e.error("number.multiple",{multiple:s.args.base,value:t}):_.round(h*t)%_.round(h*n)==0?t:e.error("number.multiple",{multiple:s.args.base,value:t})},args:[{name:"base",ref:!0,assert:t=>"number"==typeof t&&isFinite(t)&&t>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(t,e)=>Number.isSafeInteger(t)&&t>=0&&t<=65535?t:e.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(t){return s(Number.isSafeInteger(t),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:t}})},validate(t,e,i){let{limit:s}=i;const n=t.toString().match(o.precisionRx);return _.max((n[1]?n[1].length:0)-(n[2]?x(n[2],10):0),0)<=s?t:e.error("number.precision",{limit:s,value:t})},convert:!0},sign:{method(t){return s(["negative","positive"].includes(t),"Invalid sign",t),this.$_addRule({name:"sign",args:{sign:t}})},validate:(t,e,i)=>{let{sign:s}=i;return"negative"===s&&t<0||"positive"===s&&t>0?t:e.error("number.".concat(s))}},unsafe:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("unsafe",t)}}},cast:{string:{from:t=>"number"==typeof t,to:(t,e)=>t.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),o.extractSignificantDigits=function(t){return t.replace(o.exponentialPartRegex,"").replace(o.dotRegex,"").replace(o.trailingZerosRegex,"").replace(o.leadingSignAndZerosRegex,"")},o.normalizeDecimal=function(t){return(t=t.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&t.endsWith("0")&&(t=t.replace(/0+$/,"")),"-0"===t?"0":t}},8966:(t,e,i)=>{const s=i(7824);t.exports=s.extend({type:"object",cast:{map:{from:t=>t&&"object"==typeof t,to:(t,e)=>new Map(w.entries(t))}}})},7417:(t,e,i)=>{const s=i(375),n=i(5380),r=i(1745),o=i(9959),h=i(6064),a=i(9926),u=i(5752),c=i(8068),l=i(8160),f={tlds:a instanceof Set&&{tlds:{allow:a,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:o.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};t.exports=c.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(t,e){let{schema:i,state:s,prefs:n}=e;const r=i.$_getRule("normalize");r&&(t=t.normalize(r.args.form));const o=i.$_getRule("case");o&&(t="upper"===o.args.direction?t.toLocaleUpperCase():t.toLocaleLowerCase());const h=i.$_getRule("trim");if(h&&h.args.enabled&&(t=t.trim()),i.$_terms.replacements)for(const e of i.$_terms.replacements)t=t.replace(e.pattern,e.replacement);const a=i.$_getRule("hex");if(a&&a.args.options.byteAligned&&t.length%2!=0&&(t="0".concat(t)),i.$_getRule("isoDate")){const e=f.isoDate(t);e&&(t=e)}if(i.v_.truncate){const e=i.$_getRule("max");if(e){let r=e.args.limit;if(l.isResolvable(r)&&(r=r.resolve(t,s,n),!l.limit(r)))return{value:t,errors:i.$_createError("any.ref",r,{ref:e.args.limit,arg:"limit",reason:"must be a positive integer"},s,n)};t=t.slice(0,r)}}return{value:t}}},validate(t,e){let{schema:i,error:s}=e;if("string"!=typeof t)return{value:t,errors:s("string.base")};if(""===t){const e=i.$_getRule("min");return e&&0===e.args.limit?void 0:{value:t,errors:s("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(t,e)=>/^[a-zA-Z0-9]+$/.test(t)?t:e.error("string.alphanum")},base64:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["paddingRequired","urlSafe"]),t=d({urlSafe:!1,paddingRequired:!0},t),s("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),s("boolean"==typeof t.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:t}})},validate:(t,e,i)=>{let{options:s}=i;return f.base64Regex[s.paddingRequired][s.urlSafe].test(t)?t:e.error("string.base64")}},case:{method(t){return s(["lower","upper"].includes(t),"Invalid case:",t),this.$_addRule({name:"case",args:{direction:t}})},validate:(t,e,i)=>{let{direction:s}=i;return"lower"===s&&t===t.toLocaleLowerCase()||"upper"===s&&t===t.toLocaleUpperCase()?t:e.error("string.".concat(s,"case"))},convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(t,e){let i=t.length,s=0,n=1;for(;i--;){const e=t.charAt(i)*n;s+=e-9*(e>9),n^=3}return s>0&&s%10==0?t:e.error("string.creditCard")}},dataUri:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["paddingRequired"]),t=d({paddingRequired:!0},t),s("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:t}})},validate(t,e,i){let{options:s}=i;const n=t.match(f.dataUriRegex);return!n||n[2]&&"base64"===n[2]&&!f.base64Regex[s.paddingRequired].false.test(n[3])?e.error("string.dataUri"):t}},domain:{method(t){t&&l.assertOptions(t,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const e=f.addressOptions(t);return this.$_addRule({name:"domain",args:{options:t},address:e})},validate:(t,e,i,s)=>{let{address:r}=s;return n.isValid(t,r)?t:e.error("string.domain")}},email:{method(t){void 0===t&&(t={}),l.assertOptions(t,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),s(void 0===t.multiple||"boolean"==typeof t.multiple,"multiple option must be an boolean");const e=f.addressOptions(t),i=new RegExp("\\s*[".concat(t.separator?h(t.separator):",","]\\s*"));return this.$_addRule({name:"email",args:{options:t},regex:i,address:e})},validate(t,e,i,s){let{options:n}=i,{regex:o,address:h}=s;const a=n.multiple?t.split(o):[t],u=[];for(const t of a)r.isValid(t,h)||u.push(t);return u.length?e.error("string.email",{value:t,invalids:u}):t}},guid:{alias:"uuid",method(t){void 0===t&&(t={}),l.assertOptions(t,["version","separator"]);let e="";if(t.version){const i=[].concat(t.version);s(i.length>=1,"version must have at least 1 valid version specified");const n=new Set;for(let t=0;t<i.length;++t){const r=i[t];s("string"==typeof r,"version at position "+t+" must be a string");const o=f.guidVersions[r.toLowerCase()];s(o,"version at position "+t+" must be one of "+w.keys(f.guidVersions).join(", ")),s(!n.has(o),"version at position "+t+" must not be a duplicate"),e+=o,n.add(o)}}s(f.guidSeparators.has(t.separator),'separator must be one of true, false, "-", or ":"');const i=void 0===t.separator?"[:-]?":!0===t.separator?"[:-]":!1===t.separator?"[]?":"\\".concat(t.separator),n=new RegExp("^([\\[{\\(]?)[0-9A-F]{8}(".concat(i,")[0-9A-F]{4}\\2?[").concat(e||"0-9A-F","][0-9A-F]{3}\\2?[").concat(e?"89AB":"0-9A-F","][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$"),"i");return this.$_addRule({name:"guid",args:{options:t},regex:n})},validate(t,e,i,s){let{regex:n}=s;const r=n.exec(t);return r?f.guidBrackets[r[1]]!==r[r.length-1]?e.error("string.guid"):t:e.error("string.guid")}},hex:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["byteAligned","prefix"]),t=d({byteAligned:!1,prefix:!1},t),s("boolean"==typeof t.byteAligned,"byteAligned must be boolean"),s("boolean"==typeof t.prefix||"optional"===t.prefix,'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:t}})},validate:(t,e,i)=>{let{options:s}=i;return("optional"===s.prefix?f.hexRegex.withOptionalPrefix:!0===s.prefix?f.hexRegex.withPrefix:f.hexRegex.withoutPrefix).test(t)?s.byteAligned&&t.length%2!=0?e.error("string.hexAlign"):t:e.error("string.hex")}},hostname:{method(){return this.$_addRule("hostname")},validate:(t,e)=>n.isValid(t,{minDomainSegments:1})||f.ipRegex.test(t)?t:e.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(t){void 0===t&&(t={}),l.assertOptions(t,["cidr","version"]);const{cidr:e,versions:i,regex:s}=o.regex(t),n=t.version?i:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:e,version:n}},regex:s})},validate:(t,e,i,s)=>{let{options:n}=i,{regex:r}=s;return r.test(t)?t:n.version?e.error("string.ipVersion",{value:t,cidr:n.cidr,version:n.version}):e.error("string.ip",{value:t,cidr:n.cidr})}},isoDate:{method(){return this.$_addRule("isoDate")},validate:(t,e)=>{let{error:i}=e;return f.isoDate(t)?t:i("string.isoDate")}},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(t,e)=>f.isoDurationRegex.test(t)?t:e.error("string.isoDuration")},length:{method(t,e){return f.length(this,"length",t,"=",e)},validate(t,e,i,s){let{limit:n,encoding:r}=i,{name:o,operator:h,args:a}=s;const u=!r&&t.length;return l.compare(u,n,h)?t:e.error("string."+o,{limit:a.limit,value:t,encoding:r})},args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(t,e){return f.length(this,"max",t,"<=",e)},args:["limit","encoding"]},min:{method(t,e){return f.length(this,"min",t,">=",e)},args:["limit","encoding"]},normalize:{method(t){return void 0===t&&(t="NFC"),s(f.normalizationForms.includes(t),"normalization form must be one of "+f.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:t}})},validate:(t,e,i)=>{let{error:s}=e,{form:n}=i;return t===t.normalize(n)?t:s("string.normalize",{value:t,form:n})},convert:!0},pattern:{alias:"regex",method(t,e){void 0===e&&(e={}),s(t instanceof RegExp,"regex must be a RegExp"),s(!t.flags.includes("g")&&!t.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof e&&(e={name:e}),l.assertOptions(e,["invert","name"]);const i=["string.pattern",e.invert?".invert":"",e.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:t,options:e},errorCode:i})},validate:(t,e,i,s)=>{let{regex:n,options:r}=i,{errorCode:o}=s;return n.test(t)^r.invert?t:e.error(o,{name:r.name,regex:n,value:t})},args:["regex","options"],multi:!0},replace:{method(t,e){"string"==typeof t&&(t=new RegExp(h(t),"g")),s(t instanceof RegExp,"pattern must be a RegExp"),s("string"==typeof e,"replacement must be a String");const i=this.clone();return i.$_terms.replacements||(i.$_terms.replacements=[]),i.$_terms.replacements.push({pattern:t,replacement:e}),i}},token:{method(){return this.$_addRule("token")},validate:(t,e)=>/^\w+$/.test(t)?t:e.error("string.token")},trim:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:t}})},validate:(t,e,i)=>{let{enabled:s}=i;return s&&t!==t.trim()?e.error("string.trim"):t},convert:!0},truncate:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("truncate",t)}},uppercase:{method(){return this.case("upper")}},uri:{method(t){void 0===t&&(t={}),l.assertOptions(t,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),t.domain&&l.assertOptions(t.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:e,scheme:i}=u.regex(t),s=t.domain?f.addressOptions(t.domain):null;return this.$_addRule({name:"uri",args:{options:t},regex:e,domain:s,scheme:i})},validate(t,e,i,s){let{options:r}=i,{regex:o,domain:h,scheme:a}=s;if(["http:/","https:/"].includes(t))return e.error("string.uri");let u=o.exec(t);if(!u&&e.prefs.convert&&r.encodeUri){const e=encodeURI(t);u=o.exec(e),u&&(t=e)}if(u){const i=u[1]||u[2];return!h||r.allowRelative&&!i||n.isValid(i,h)?t:e.error("string.domain",{value:i})}return r.relativeOnly?e.error("string.uriRelativeOnly"):r.scheme?e.error("string.uriCustomScheme",{scheme:a,value:t}):e.error("string.uri")}}},manifest:{build(t,e){if(e.replacements)for(const{pattern:i,replacement:s}of e.replacements)t=t.replace(i,s);return t}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),f.addressOptions=function(t){if(!t)return f.tlds||t;if(s(void 0===t.minDomainSegments||Number.isSafeInteger(t.minDomainSegments)&&t.minDomainSegments>0,"minDomainSegments must be a positive integer"),s(void 0===t.maxDomainSegments||Number.isSafeInteger(t.maxDomainSegments)&&t.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===t.tlds)return t;if(!0===t.tlds||void 0===t.tlds)return s(f.tlds,"Built-in TLD list disabled"),w.assign({},t,f.tlds);s("object"==typeof t.tlds,"tlds must be true, false, or an object");const e=t.tlds.deny;if(e)return Array.isArray(e)&&(t=w.assign({},t,{tlds:{deny:new Set(e)}})),s(t.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),s(!t.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),f.validateTlds(t.tlds.deny,"tlds.deny"),t;const i=t.tlds.allow;return i?!0===i?(s(f.tlds,"Built-in TLD list disabled"),w.assign({},t,f.tlds)):(Array.isArray(i)&&(t=w.assign({},t,{tlds:{allow:new Set(i)}})),s(t.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),f.validateTlds(t.tlds.allow,"tlds.allow"),t):t},f.validateTlds=function(t,e){for(const i of t)s(n.isValid(i,{minDomainSegments:1,maxDomainSegments:1}),"".concat(e," must contain valid top level domain names"))},f.isoDate=function(t){if(!l.isIsoDate(t))return null;/.*T.*[+-]\d\d$/.test(t)&&(t+="00");const e=new Date(t);return S(e.getTime())?null:e.toISOString()},f.length=function(t,e,i,n,r){return s(!r||!1,"Invalid encoding:",r),t.$_addRule({name:e,method:"length",args:{limit:i,encoding:r},operator:n})}},8826:(t,e,i)=>{const s=i(375),n=i(8068),r={};r.Map=class extends Map{slice(){return new r.Map(this)}},t.exports=n.extend({type:"symbol",terms:{map:{init:new r.Map}},coerce:{method(t,e){let{schema:i,error:s}=e;const n=i.$_terms.map.get(t);return n&&(t=n),i.v_.only&&"symbol"!=typeof t?{value:t,errors:s("symbol.map",{map:i.$_terms.map})}:{value:t}}},validate(t,e){let{error:i}=e;if("symbol"!=typeof t)return{value:t,errors:i("symbol.base")}},rules:{map:{method(t){t&&!t[Nt]&&"object"==typeof t&&(t=w.entries(t)),s(t&&t[Nt],"Iterable must be an iterable or object");const e=this.clone(),i=[];for(const n of t){s(n&&n[Nt],"Entry must be an iterable");const[t,r]=n;s("object"!=typeof t&&"function"!=typeof t&&"symbol"!=typeof t,"Key must not be of type object, function, or Symbol"),s("symbol"==typeof r,"Value must be a Symbol"),e.$_terms.map.set(t,r),i.push(r)}return e.valid(...i)}}},manifest:{build:(t,e)=>(e.map&&(t=t.map(e.map)),t)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(t,e,i)=>{const s=i(375),n=i(8571),r=i(738),o=i(9621),h=i(8160),a=i(6354),u=i(493),c={result:El("result")};e.entry=function(t,e,i){let n=h.defaults;i&&(s(void 0===i.warnings,"Cannot override warnings preference in synchronous validation"),s(void 0===i.artifacts,"Cannot override artifacts preference in synchronous validation"),n=h.preferences(h.defaults,i));const r=c.entry(t,e,n);s(!r.mainstay.externals.length,"Schema with external rules must use validateAsync()");const o={value:r.value};return r.error&&(o.error=r.error),r.mainstay.warnings.length&&(o.warning=a.details(r.mainstay.warnings)),r.mainstay.debug&&(o.debug=r.mainstay.debug),r.mainstay.artifacts&&(o.artifacts=r.mainstay.artifacts),o},e.entryAsync=async function(t,e,i){let s=h.defaults;i&&(s=h.preferences(h.defaults,i));const n=c.entry(t,e,s),r=n.mainstay;if(n.error)throw r.debug&&(n.error.debug=r.debug),n.error;if(r.externals.length){let e=n.value;const u=[];for(const n of r.externals){const l=n.state.path,d="link"===n.schema.type?r.links.get(n.schema):null;let f,_,v=e;const g=l.length?[e]:[],m=l.length?o(t,l):t;if(l.length){f=l[l.length-1];let t=e;for(const e of l.slice(0,-1))t=t[e],g.unshift(t);_=g[0],v=_[f]}try{const t=(t,e)=>(d||n.schema).$_createError(t,v,e,n.state,s),o=await n.method(v,{schema:n.schema,linked:d,state:n.state,prefs:i,original:m,error:t,errorsArray:c.errorsArray,warn:(t,e)=>r.warnings.push((d||n.schema).$_createError(t,v,e,n.state,s)),message:(t,e)=>(d||n.schema).$_createError("external",v,e,n.state,s,{messages:t})});if(void 0===o||o===v)continue;if(o instanceof a.Report){if(r.tracer.log(n.schema,n.state,"rule","external","error"),u.push(o),s.abortEarly)break;continue}if(Array.isArray(o)&&o[h.symbols.errors]){if(r.tracer.log(n.schema,n.state,"rule","external","error"),u.push(...o),s.abortEarly)break;continue}_?(r.tracer.value(n.state,"rule",v,o,"external"),_[f]=o):(r.tracer.value(n.state,"rule",e,o,"external"),e=o)}catch(t){throw s.errors.label&&(t.message+=" (".concat(n.label,")")),t}}if(n.value=e,u.length)throw n.error=a.process(u,t,s),r.debug&&(n.error.debug=r.debug),n.error}if(!s.warnings&&!s.debug&&!s.artifacts)return n.value;const u={value:n.value};return r.warnings.length&&(u.warning=a.details(r.warnings)),r.debug&&(u.debug=r.debug),r.artifacts&&(u.artifacts=r.artifacts),u},c.Mainstay=class{snapshot(){this._v.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const t=this._v.pop();this.externals=t.externals,this.warnings=t.warnings}commit(){this._v.pop()}constructor(t,e,i){this.externals=[],this.warnings=[],this.tracer=t,this.debug=e,this.links=i,this.shadow=null,this.artifacts=null,this._v=[]}},c.entry=function(t,i,s){const{tracer:n,cleanup:r}=c.tracer(i,s),o=s.debug?[]:null,h=i.u_.G_?new Map:null,l=new c.Mainstay(n,o,h),d=i.u_.G_?[{schema:i}]:null,f=new u([],[],{mainstay:l,schemas:d}),_=e.validate(t,i,f,s);r&&i.$_root.untrace();const v=a.process(_.errors,t,s);return{value:_.value,error:v,mainstay:l}},c.tracer=function(t,e){return t.$_root.T_?{tracer:t.$_root.T_.vv(t)}:e.debug?(s(t.$_root.trace,"Debug mode not supported"),{tracer:t.$_root.trace().vv(t),cleanup:!0}):{tracer:c.ignore}},e.validate=function(t,e,i,s,n){if(void 0===n&&(n={}),e.$_terms.whens&&(e=e.C_(t,i,s).schema),e.c_&&(s=c.prefs(e,s)),e.d_&&s.cache){const s=e.d_.get(t);if(i.mainstay.tracer.debug(i,"validate","cached",!!s),s)return s}const r=(n,r,o)=>e.$_createError(n,t,r,o||i,s),o={original:t,prefs:s,schema:e,state:i,error:r,errorsArray:c.errorsArray,warn:(t,e,s)=>i.mainstay.warnings.push(r(t,e,s)),message:(n,r)=>e.$_createError("custom",t,r,i,s,{messages:n})};i.mainstay.tracer.entry(e,i);const a=e.y_;if(a.prepare&&void 0!==t&&s.convert){const e=a.prepare(t,o);if(e){if(i.mainstay.tracer.value(i,"prepare",t,e.value),e.errors)return c.finalize(e.value,[].concat(e.errors),o);t=e.value}}if(a.coerce&&void 0!==t&&s.convert&&(!a.coerce.from||a.coerce.from.includes(typeof t))){const e=a.coerce.method(t,o);if(e){if(i.mainstay.tracer.value(i,"coerced",t,e.value),e.errors)return c.finalize(e.value,[].concat(e.errors),o);t=e.value}}const u=e.v_.empty;u&&u.$_match(c.trim(t,e),i.nest(u),h.defaults)&&(i.mainstay.tracer.value(i,"empty",t,void 0),t=void 0);const l=n.presence||e.v_.presence||(e.v_.Q_?null:s.presence);if(void 0===t){if("forbidden"===l)return c.finalize(t,null,o);if("required"===l)return c.finalize(t,[e.$_createError("any.required",t,null,i,s)],o);if("optional"===l){if(e.v_.default!==h.symbols.deepDefault)return c.finalize(t,null,o);i.mainstay.tracer.value(i,"default",t,{}),t={}}}else if("forbidden"===l)return c.finalize(t,[e.$_createError("any.unknown",t,null,i,s)],o);const d=[];if(e.f_){const n=e.f_.get(t,i,s,e.v_.insensitive);if(n)return s.convert&&(i.mainstay.tracer.value(i,"valids",t,n.value),t=n.value),i.mainstay.tracer.filter(e,i,"valid",n),c.finalize(t,null,o);if(e.v_.only){const n=e.$_createError("any.only",t,{valids:e.f_.values({display:!0})},i,s);if(s.abortEarly)return c.finalize(t,[n],o);d.push(n)}}if(e.__){const n=e.__.get(t,i,s,e.v_.insensitive);if(n){i.mainstay.tracer.filter(e,i,"invalid",n);const r=e.$_createError("any.invalid",t,{invalids:e.__.values({display:!0})},i,s);if(s.abortEarly)return c.finalize(t,[r],o);d.push(r)}}if(a.validate){const e=a.validate(t,o);if(e&&(i.mainstay.tracer.value(i,"base",t,e.value),t=e.value,e.errors)){if(!Array.isArray(e.errors))return d.push(e.errors),c.finalize(t,d,o);if(e.errors.length)return d.push(...e.errors),c.finalize(t,d,o)}}return e.g_.length?c.rules(t,d,o):c.finalize(t,d,o)},c.rules=function(t,e,i){const{schema:s,state:n,prefs:r}=i;for(const o of s.g_){const a=s.y_.rules[o.method];if(a.convert&&r.convert){n.mainstay.tracer.log(s,n,"rule",o.name,"full");continue}let u,l=o.args;if(o.Gd.length){l=w.assign({},l);for(const e of o.Gd){const i=a.argsByName.get(e),o=l[e].resolve(t,n,r),c=i.normalize?i.normalize(o):o,d=h.validateArg(c,null,i);if(d){u=s.$_createError("any.ref",o,{arg:e,ref:l[e],reason:d},n,r);break}l[e]=c}}u=u||a.validate(t,i,l,o);const d=c.rule(u,o);if(d.errors){if(n.mainstay.tracer.log(s,n,"rule",o.name,"error"),o.warn){n.mainstay.warnings.push(...d.errors);continue}if(r.abortEarly)return c.finalize(t,d.errors,i);e.push(...d.errors)}else n.mainstay.tracer.log(s,n,"rule",o.name,"pass"),n.mainstay.tracer.value(n,"rule",t,d.value,o.name),t=d.value}return c.finalize(t,e,i)},c.rule=function(t,e){return t instanceof a.Report?(c.error(t,e),{errors:[t],value:null}):Array.isArray(t)&&t[h.symbols.errors]?(t.forEach((t=>c.error(t,e))),{errors:t,value:null}):{errors:null,value:t}},c.error=function(t,e){return e.message&&t.B_(e.message),t},c.finalize=function(t,e,i){e=e||[];const{schema:n,state:r,prefs:o}=i;if(e.length){const s=c.default("failover",void 0,e,i);void 0!==s&&(r.mainstay.tracer.value(r,"failover",t,s),t=s,e=[])}if(e.length&&n.v_.error)if("function"==typeof n.v_.error){e=n.v_.error(e),Array.isArray(e)||(e=[e]);for(const t of e)s(t instanceof m||t instanceof a.Report,"error() must return an Error object")}else e=[n.v_.error];if(void 0===t){const s=c.default("default",t,e,i);r.mainstay.tracer.value(r,"default",t,s),t=s}if(n.v_.cast&&void 0!==t){const e=n.y_.cast[n.v_.cast];if(e.from(t)){const s=e.to(t,i);r.mainstay.tracer.value(r,"cast",t,s,n.v_.cast),t=s}}if(n.$_terms.externals&&o.externals&&!1!==o.x_)for(const{method:t}of n.$_terms.externals)r.mainstay.externals.push({method:t,schema:n,state:r,label:a.label(n.v_,r,o)});const h={value:t,errors:e.length?e:null};return n.v_.result&&(h.value="strip"===n.v_.result?void 0:i.original,r.mainstay.tracer.value(r,n.v_.result,t,h.value),r.shadow(t,n.v_.result)),n.d_&&!1!==o.cache&&!n.l_.length&&n.d_.set(i.original,h),void 0===t||h.errors||void 0===n.v_.artifact||(r.mainstay.artifacts=r.mainstay.artifacts||new Map,r.mainstay.artifacts.has(n.v_.artifact)||r.mainstay.artifacts.set(n.v_.artifact,[]),r.mainstay.artifacts.get(n.v_.artifact).push(r.path)),h},c.prefs=function(t,e){const i=e===h.defaults;return i&&t.c_[h.symbols.prefs]?t.c_[h.symbols.prefs]:(e=h.preferences(e,t.c_),i&&(t.c_[h.symbols.prefs]=e),e)},c.default=function(t,e,i,s){const{schema:r,state:o,prefs:a}=s,u=r.v_[t];if(a.noDefaults||void 0===u)return e;if(o.mainstay.tracer.log(r,o,"rule",t,"full"),!u)return u;if("function"==typeof u){const e=u.length?[n(o.ancestors[0]),s]:[];try{return u(...e)}catch(e){return void i.push(r.$_createError("any.".concat(t),null,{error:e},o,a))}}return"object"!=typeof u?u:u[h.symbols.literal]?u.literal:h.isResolvable(u)?u.resolve(e,o,a):n(u)},c.trim=function(t,e){if("string"!=typeof t)return t;const i=e.$_getRule("trim");return i&&i.args.enabled?t.trim():t},c.ignore={active:!1,debug:r,entry:r,filter:r,log:r,resolve:r,value:r},c.errorsArray=function(){const t=[];return t[h.symbols.errors]=!0,t}},2036:(t,e,i)=>{const s=i(375),n=i(9474),r=i(8160),o={};t.exports=o.Values=class{get length(){return this.p_.size+this.l_.size}add(t,e){r.isResolvable(t)?this.l_.has(t)||(this.l_.add(t),e&&e.register(t)):this.has(t,null,null,!1)||(this.p_.add(t),"string"==typeof t&&this.mv.set(t.toLowerCase(),t))}static merge(t,e,i){if(t=t||new o.Values,e){if(e.pv)return e.clone();for(const i of[...e.p_,...e.l_])t.add(i)}if(i)for(const e of[...i.p_,...i.l_])t.remove(e);return t.length?t:null}remove(t){r.isResolvable(t)?this.l_.delete(t):(this.p_.delete(t),"string"==typeof t&&this.mv.delete(t.toLowerCase()))}has(t,e,i,s){return!!this.get(t,e,i,s)}get(t,e,i,s){if(!this.length)return!1;if(this.p_.has(t))return{value:t};if("string"==typeof t&&t&&s){const e=this.mv.get(t.toLowerCase());if(e)return{value:e}}if(!this.l_.size&&"object"!=typeof t)return!1;if("object"==typeof t)for(const e of this.p_)if(n(e,t))return{value:e};if(e)for(const r of this.l_){const o=r.resolve(t,e,i,null,{in:!0});if(void 0===o)continue;const h=r.in&&"object"==typeof o?Array.isArray(o)?o:w.keys(o):[o];for(const e of h)if(typeof e==typeof t)if(s&&t&&"string"==typeof t){if(e.toLowerCase()===t.toLowerCase())return{value:e,ref:r}}else if(n(e,t))return{value:e,ref:r}}return!1}override(){this.pv=!0}values(t){if(t&&t.display){const t=[];for(const e of[...this.p_,...this.l_])void 0!==e&&t.push(e);return t}return Array.from([...this.p_,...this.l_])}clone(){const t=new o.Values(this.p_,this.l_);return t.pv=this.pv,t}concat(t){s(!t.pv,"Cannot concat override set of values");const e=new o.Values([...this.p_,...t.p_],[...this.l_,...t.l_]);return e.pv=this.pv,e}describe(){const t=[];this.pv&&t.push({override:!0});for(const e of this.p_.values())t.push(e&&"object"==typeof e?{value:e}:e);for(const e of this.l_.values())t.push(e.describe());return t}constructor(t,e){this.p_=new Set(t),this.l_=new Set(e),this.mv=o.lowercases(t),this.pv=!1}},o.Values.prototype[r.symbols.values]=!0,o.Values.prototype.slice=o.Values.prototype.clone,o.lowercases=function(t){const e=new Map;if(t)for(const i of t)"string"==typeof i&&e.set(i.toLowerCase(),i);return e}},978:(t,e,i)=>{const s=i(375),n=i(8571),r=i(1687),o=i(9621),h={};t.exports=function(t,e,i){if(void 0===i&&(i={}),s(t&&"object"==typeof t,"Invalid defaults value: must be an object"),s(!e||!0===e||"object"==typeof e,"Invalid source value: must be true, falsy or an object"),s("object"==typeof i,"Invalid options: must be an object"),!e)return null;if(i.shallow)return h.applyToDefaultsWithShallow(t,e,i);const o=n(t);if(!0===e)return o;const a=void 0!==i.nullOverride&&i.nullOverride;return r(o,e,{nullOverride:a,mergeArrays:!1})},h.applyToDefaultsWithShallow=function(t,e,i){const a=i.shallow;s(Array.isArray(a),"Invalid keys");const u=new Map,c=!0===e?null:new Set;for(let i of a){i=Array.isArray(i)?i:i.split(".");const s=o(t,i);s&&"object"==typeof s?u.set(s,c&&o(e,i)||s):c&&c.add(i)}const l=n(t,{},u);if(!c)return l;for(const t of c)h.reachCopy(l,e,t);const d=void 0!==i.nullOverride&&i.nullOverride;return r(l,e,{nullOverride:d,mergeArrays:!1})},h.reachCopy=function(t,e,i){for(const t of i){if(!(t in e))return;const i=e[t];if("object"!=typeof i||null===i)return;e=i}const s=e;let n=t;for(let t=0;t<i.length-1;++t){const e=i[t];"object"!=typeof n[e]&&(n[e]={}),n=n[e]}n[i[i.length-1]]=s}},375:(t,e,i)=>{const s=i(7916);t.exports=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];if(!t)throw 1===i.length&&i[0]instanceof m?i[0]:new s(i)}},8571:(t,e,i)=>{const s=i(9621),n=i(4277),r=i(7043),o={needsProtoHack:new Set([n.set,n.map,n.weakSet,n.weakMap])};t.exports=o.clone=function(t,e,i){if(void 0===e&&(e={}),void 0===i&&(i=null),"object"!=typeof t||null===t)return t;let s=o.clone,h=i;if(e.shallow){if(!0!==e.shallow)return o.cloneWithShallow(t,e);s=t=>t}else if(h){const e=h.get(t);if(e)return e}else h=new Map;const a=n.getInternalProto(t);if(a===n.buffer)return!1;if(a===n.date)return new Date(t.getTime());if(a===n.regex)return new RegExp(t);const u=o.base(t,a,e);if(u===t)return t;if(h&&h.set(t,u),a===n.set)for(const i of t)u.add(s(i,e,h));else if(a===n.map)for(const[i,n]of t)u.set(i,s(n,e,h));const c=r.keys(t,e);for(const i of c){if("__proto__"===i)continue;if(a===n.array&&"length"===i){u.length=t.length;continue}const r=w.getOwnPropertyDescriptor(t,i);r?r.get||r.set?w.defineProperty(u,i,r):r.enumerable?u[i]=s(t[i],e,h):w.defineProperty(u,i,{enumerable:!1,writable:!0,configurable:!0,value:s(t[i],e,h)}):w.defineProperty(u,i,{enumerable:!0,writable:!0,configurable:!0,value:s(t[i],e,h)})}return u},o.cloneWithShallow=function(t,e){const i=e.shallow;(e=w.assign({},e)).shallow=!1;const n=new Map;for(const e of i){const i=s(t,e);"object"!=typeof i&&"function"!=typeof i||n.set(i,i)}return o.clone(t,e,n)},o.base=function(t,e,i){if(!1===i.prototype)return o.needsProtoHack.has(e)?new e.constructor:e===n.array?[]:{};const s=w.getPrototypeOf(t);if(s&&s.isImmutable)return t;if(e===n.array){const t=[];return s!==e&&w.setPrototypeOf(t,s),t}if(o.needsProtoHack.has(e)){const t=new s.constructor;return s!==e&&w.setPrototypeOf(t,s),t}return w.create(s)}},9474:(t,e,i)=>{const s=i(4277),n={mismatched:null};t.exports=function(t,e,i){return i=w.assign({prototype:!0},i),!!n.isDeepEqual(t,e,i,[])},n.isDeepEqual=function(t,e,i,r){if(t===e)return 0!==t||1/t==1/e;const o=typeof t;if(o!==typeof e||null===t||null===e)return!1;if("function"===o){if(!i.deepFunction||t.toString()!==e.toString())return!1}else if("object"!==o)return t!=t&&e!=e;const h=n.getSharedType(t,e,!!i.prototype);switch(h){case s.buffer:return!1;case s.promise:return t===e;case s.regex:return t.toString()===e.toString();case n.mismatched:return!1}for(let i=r.length-1;i>=0;--i)if(r[i].isSame(t,e))return!0;r.push(new n.SeenEntry(t,e));try{return!!n.isDeepEqualObj(h,t,e,i,r)}finally{r.pop()}},n.getSharedType=function(t,e,i){if(i)return w.getPrototypeOf(t)!==w.getPrototypeOf(e)?n.mismatched:s.getInternalProto(t);const r=s.getInternalProto(t);return r!==s.getInternalProto(e)?n.mismatched:r},n.valueOf=function(t){const e=t.valueOf;if(void 0===e)return t;try{return e.call(t)}catch(t){return t}},n.hasOwnEnumerableProperty=function(t,e){return w.prototype.propertyIsEnumerable.call(t,e)},n.isSetSimpleEqual=function(t,e){for(const i of Set.prototype.values.call(t))if(!Set.prototype.has.call(e,i))return!1;return!0},n.isDeepEqualObj=function(t,e,i,r,o){const{isDeepEqual:h,valueOf:a,hasOwnEnumerableProperty:u}=n,{keys:c,getOwnPropertySymbols:l}=w;if(t===s.array){if(!r.part){if(e.length!==i.length)return!1;for(let t=0;t<e.length;++t)if(!h(e[t],i[t],r,o))return!1;return!0}for(const t of e)for(const e of i)if(h(t,e,r,o))return!0}else if(t===s.set){if(e.size!==i.size)return!1;if(!n.isSetSimpleEqual(e,i)){const t=new Set(Set.prototype.values.call(i));for(const i of Set.prototype.values.call(e)){if(t.delete(i))continue;let e=!1;for(const s of t)if(h(i,s,r,o)){t.delete(s),e=!0;break}if(!e)return!1}}}else if(t===s.map){if(e.size!==i.size)return!1;for(const[t,s]of Map.prototype.entries.call(e))if(void 0===s&&!Map.prototype.has.call(i,t)||!h(s,Map.prototype.get.call(i,t),r,o))return!1}else if(t===s.error&&(e.name!==i.name||e.message!==i.message))return!1;const d=a(e),f=a(i);if((e!==d||i!==f)&&!h(d,f,r,o))return!1;const _=c(e);if(!r.part&&_.length!==c(i).length&&!r.skip)return!1;let v=0;for(const t of _)if(r.skip&&r.skip.includes(t))void 0===i[t]&&++v;else if(!u(i,t)||!h(e[t],i[t],r,o))return!1;if(!r.part&&_.length-v!==c(i).length)return!1;if(!1!==r.symbols){const t=l(e),s=new Set(l(i));for(const n of t){if(!r.skip||!r.skip.includes(n))if(u(e,n)){if(!u(i,n)||!h(e[n],i[n],r,o))return!1}else if(u(i,n))return!1;s.delete(n)}for(const t of s)if(u(i,t))return!1}return!0},n.SeenEntry=class{isSame(t,e){return this.obj===t&&this.ref===e}constructor(t,e){this.obj=t,this.ref=e}}},7916:(t,e,i)=>{const s=i(8761);t.exports=class extends m{constructor(t){super(t.filter((t=>""!==t)).map((t=>"string"==typeof t?t:t instanceof m?t.message:s(t))).join(" ")||"Unknown error"),"function"==typeof m.captureStackTrace&&m.captureStackTrace(this,e.assert)}}},5277:t=>{const e={};t.exports=function(t){if(!t)return"";let i="";for(let s=0;s<t.length;++s){const n=t.charCodeAt(s);e.isSafe(n)?i+=t[s]:i+=e.escapeHtmlChar(n)}return i},e.escapeHtmlChar=function(t){return e.namedHtml.get(t)||(t>=256?"&#"+t+";":"&#x".concat(t.toString(16).padStart(2,"0"),";"))},e.isSafe=function(t){return e.safeCharCodes.has(t)},e.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),e.safeCharCodes=function(){const t=new Set;for(let e=32;e<123;++e)(e>=97||e>=65&&e<=90||e>=48&&e<=57||32===e||46===e||44===e||45===e||58===e||95===e)&&t.add(e);return t}()},6064:t=>{t.exports=function(t){return t.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:t=>{t.exports=function(){}},1687:(t,e,i)=>{const s=i(375),n=i(8571),r=i(7043),o={};t.exports=o.merge=function(t,e,i){if(s(t&&"object"==typeof t,"Invalid target value: must be an object"),s(null==e||"object"==typeof e,"Invalid source value: must be null, undefined, or an object"),!e)return t;if(i=w.assign({nullOverride:!0,mergeArrays:!0},i),Array.isArray(e)){s(Array.isArray(t),"Cannot merge array onto an object"),i.mergeArrays||(t.length=0);for(let s=0;s<e.length;++s)t.push(n(e[s],{symbols:i.symbols}));return t}const h=r.keys(e,i);for(let s=0;s<h.length;++s){const r=h[s];if("__proto__"===r||!w.prototype.propertyIsEnumerable.call(e,r))continue;const a=e[r];if(a&&"object"==typeof a){if(t[r]===a)continue;!t[r]||"object"!=typeof t[r]||Array.isArray(t[r])!==Array.isArray(a)||a instanceof Date||a instanceof RegExp?t[r]=n(a,{symbols:i.symbols}):o.merge(t[r],a,i)}else(null!=a||i.nullOverride)&&(t[r]=a)}return t}},9621:(t,e,i)=>{const s=i(375),n={};t.exports=function(t,e,i){if(!1===e||null==e)return t;"string"==typeof(i=i||{})&&(i={separator:i});const r=Array.isArray(e);s(!r||!i.separator,"Separator option is not valid for array-based chain");const o=r?e:e.split(i.separator||".");let h=t;for(let t=0;t<o.length;++t){let r=o[t];const a=i.iterables&&n.iterables(h);if(Array.isArray(h)||"set"===a){const t=Number(r);Number.isInteger(t)&&(r=t<0?h.length+t:t)}if(!h||"function"==typeof h&&!1===i.functions||!a&&void 0===h[r]){s(!i.strict||t+1===o.length,"Missing segment",r,"in reach path ",e),s("object"==typeof h||!0===i.functions||"function"!=typeof h,"Invalid segment",r,"in reach path ",e),h=i.default;break}h=a?"set"===a?[...h][r]:h.get(r):h[r]}return h},n.iterables=function(t){return t instanceof Set?"set":t instanceof Map?"map":void 0}},8761:t=>{t.exports=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];try{return JSON.stringify(...e)}catch(t){return"[Cannot display object: "+t.message+"]"}}},4277:(t,e)=>{const i={};e=t.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:m.prototype,generic:w.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},i.typeMap=new Map([["[object Error]",e.error],["[object Map]",e.map],["[object Promise]",e.promise],["[object Set]",e.set],["[object WeakMap]",e.weakMap],["[object WeakSet]",e.weakSet]]),e.getInternalProto=function(t){if(Array.isArray(t))return e.array;if(t instanceof Date)return e.date;if(t instanceof RegExp)return e.regex;if(t instanceof m)return e.error;const s=w.prototype.toString.call(t);return i.typeMap.get(s)||e.generic}},7043:(t,e)=>{e.keys=function(t,e){return void 0===e&&(e={}),!1!==e.symbols?Reflect.ownKeys(t):w.getOwnPropertyNames(t)}},3652:(t,e,i)=>{const s=i(375),n={};e.Sorter=class{add(t,e){const i=[].concat((e=e||{}).before||[]),n=[].concat(e.after||[]),r=e.group||"?",o=e.sort||0;s(!i.includes(r),"Item cannot come before itself: ".concat(r)),s(!i.includes("?"),"Item cannot come before unassociated items"),s(!n.includes(r),"Item cannot come after itself: ".concat(r)),s(!n.includes("?"),"Item cannot come after unassociated items"),Array.isArray(t)||(t=[t]);for(const e of t){const t={seq:this.tc.length,sort:o,before:i,after:n,group:r,node:e};this.tc.push(t)}if(!e.manual){const t=this.yv();s(t,"item","?"!==r?"added into group ".concat(r):"","created a dependencies error")}return this.nodes}merge(t){Array.isArray(t)||(t=[t]);for(const e of t)if(e)for(const t of e.tc)this.tc.push(w.assign({},t));this.tc.sort(n.mergeSort);for(let t=0;t<this.tc.length;++t)this.tc[t].seq=t;const e=this.yv();return s(e,"merge created a dependencies error"),this.nodes}sort(){const t=this.yv();return s(t,"sort created a dependencies error"),this.nodes}yv(){const t={},e=w.create(null),i=w.create(null);for(const s of this.tc){const n=s.seq,r=s.group;i[r]=i[r]||[],i[r].push(n),t[n]=s.before;for(const t of s.after)e[t]=e[t]||[],e[t].push(n)}for(const e in t){const s=[];for(const n in t[e]){const r=t[e][n];i[r]=i[r]||[],s.push(...i[r])}t[e]=s}for(const s in e)if(i[s])for(const n of i[s])t[n].push(...e[s]);const s={};for(const e in t){const i=t[e];for(const t of i)s[t]=s[t]||[],s[t].push(e)}const n={},r=[];for(let t=0;t<this.tc.length;++t){let e=t;if(s[t]){e=null;for(let t=0;t<this.tc.length;++t){if(!0===n[t])continue;s[t]||(s[t]=[]);const i=s[t].length;let r=0;for(let e=0;e<i;++e)n[s[t][e]]&&++r;if(r===i){e=t;break}}}null!==e&&(n[e]=!0,r.push(e))}if(r.length!==this.tc.length)return!1;const o={};for(const t of this.tc)o[t.seq]=t;this.tc=[],this.nodes=[];for(const t of r){const e=o[t];this.nodes.push(e.node),this.tc.push(e)}return!0}constructor(){this.tc=[],this.nodes=[]}},n.mergeSort=(t,e)=>t.sort===e.sort?0:t.sort<e.sort?-1:1},5380:(t,e,i)=>{const s=i(443),n=i(2178),r={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:s.URL||URL};e.analyze=function(t,e){if(void 0===e&&(e={}),!t)return n.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof t)throw new m("Invalid input: domain must be a string");if(t.length>256)return n.code("DOMAIN_TOO_LONG");if(r.nonAsciiRx.test(t)){if(!1===e.allowUnicode)return n.code("DOMAIN_INVALID_UNICODE_CHARS");t=t.normalize("NFC")}if(r.domainControlRx.test(t))return n.code("DOMAIN_INVALID_CHARS");t=r.punycode(t),e.allowFullyQualified&&"."===t[t.length-1]&&(t=t.slice(0,-1));const i=e.minDomainSegments||r.minDomainSegments,s=t.split(".");if(s.length<i)return n.code("DOMAIN_SEGMENTS_COUNT");if(e.maxDomainSegments&&s.length>e.maxDomainSegments)return n.code("DOMAIN_SEGMENTS_COUNT_MAX");const o=e.tlds;if(o){const t=s[s.length-1].toLowerCase();if(o.deny&&o.deny.has(t)||o.allow&&!o.allow.has(t))return n.code("DOMAIN_FORBIDDEN_TLDS")}for(let t=0;t<s.length;++t){const e=s[t];if(!e.length)return n.code("DOMAIN_EMPTY_SEGMENT");if(e.length>63)return n.code("DOMAIN_LONG_SEGMENT");if(t<s.length-1){if(!r.domainSegmentRx.test(e))return n.code("DOMAIN_INVALID_CHARS")}else if(!r.tldSegmentRx.test(e))return n.code("DOMAIN_INVALID_TLDS_CHARS")}return null},e.isValid=function(t,i){return!e.analyze(t,i)},r.punycode=function(t){t.includes("%")&&(t=t.replace(/%/g,"%25"));try{return new r.URL("http://".concat(t)).host}catch(e){return t}}},1745:(t,e,i)=>{const s=i(9848),n=i(5380),r=i(2178),o={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(s.TextEncoder||TextEncoder)};e.analyze=function(t,e){return o.email(t,e)},e.isValid=function(t,e){return!o.email(t,e)},o.email=function(t,e){if(void 0===e&&(e={}),"string"!=typeof t)throw new m("Invalid input: email must be a string");if(!t)return r.code("EMPTY_STRING");const i=!o.nonAsciiRx.test(t);if(!i){if(!1===e.allowUnicode)return r.code("FORBIDDEN_UNICODE");t=t.normalize("NFC")}const s=t.split("@");if(2!==s.length)return s.length>2?r.code("MULTIPLE_AT_CHAR"):r.code("MISSING_AT_CHAR");const[h,a]=s;if(!h)return r.code("EMPTY_LOCAL");if(!e.ignoreLength){if(t.length>254)return r.code("ADDRESS_TOO_LONG");if(o.encoder.encode(h).length>64)return r.code("LOCAL_TOO_LONG")}return o.local(h,i)||n.analyze(a,e)},o.local=function(t,e){const i=t.split(".");for(const t of i){if(!t.length)return r.code("EMPTY_LOCAL_SEGMENT");if(e){if(!o.atextRx.test(t))return r.code("INVALID_LOCAL_CHARS")}else for(const e of t){if(o.atextRx.test(e))continue;const t=o.binary(e);if(!o.atomRx.test(t))return r.code("INVALID_LOCAL_CHARS")}}},o.binary=function(t){return Array.from(o.encoder.encode(t)).map((t=>String.fromCharCode(t))).join("")},o.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,o.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(t,e)=>{e.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},e.code=function(t){return{code:t,error:e.codes[t]}}},9959:(t,e,i)=>{const s=i(375),n=i(5752);e.regex=function(t){void 0===t&&(t={}),s(void 0===t.cidr||"string"==typeof t.cidr,"options.cidr must be a string");const e=t.cidr?t.cidr.toLowerCase():"optional";s(["required","optional","forbidden"].includes(e),"options.cidr must be one of required, optional, forbidden"),s(void 0===t.version||"string"==typeof t.version||Array.isArray(t.version),"options.version must be a string or an array of string");let i=t.version||["ipv4","ipv6","ipvfuture"];Array.isArray(i)||(i=[i]),s(i.length>=1,"options.version must have at least 1 version specified");for(let t=0;t<i.length;++t)s("string"==typeof i[t],"options.version must only contain strings"),i[t]=i[t].toLowerCase(),s(["ipv4","ipv6","ipvfuture"].includes(i[t]),"options.version contains unknown version "+i[t]+" - must be one of ipv4, ipv6, ipvfuture");i=Array.from(new Set(i));const r="(?:".concat(i.map((t=>{if("forbidden"===e)return n.ip[t];const i="\\/".concat("ipv4"===t?n.ip.v4Cidr:n.ip.v6Cidr);return"required"===e?"".concat(n.ip[t]).concat(i):"".concat(n.ip[t],"(?:").concat(i,")?")})).join("|"),")"),o=new RegExp("^".concat(r,"$"));return{cidr:e,versions:i,regex:o,raw:r}}},5752:(t,e,i)=>{const s=i(375),n=i(6064),r={generate:function(){const t={},e="\\dA-Fa-f",i="["+e+"]",s="\\w-\\.~",n="!\\$&'\\(\\)\\*\\+,;=",r="%"+e,o=s+r+n+":@",h="["+o+"]",a="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";t.ipv4address="(?:"+a+"\\.){3}"+a;const u=i+"{1,4}",c="(?:"+u+":"+u+"|"+t.ipv4address+")",l="(?:"+u+":){6}"+c,d="::(?:"+u+":){5}"+c,f="(?:"+u+")?::(?:"+u+":){4}"+c,_="(?:(?:"+u+":){0,1}"+u+")?::(?:"+u+":){3}"+c,v="(?:(?:"+u+":){0,2}"+u+")?::(?:"+u+":){2}"+c,g="(?:(?:"+u+":){0,3}"+u+")?::"+u+":"+c,m="(?:(?:"+u+":){0,4}"+u+")?::"+c,p="(?:(?:"+u+":){0,5}"+u+")?::"+u,w="(?:(?:"+u+":){0,6}"+u+")?::";t.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",t.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",t.ipv6address="(?:"+l+"|"+d+"|"+f+"|"+_+"|"+v+"|"+g+"|"+m+"|"+p+"|"+w+")",t.ipvFuture="v"+i+"+\\.["+s+n+":]+",t.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",t.schemeRegex=new RegExp(t.scheme);const y="["+s+r+n+":]*",b="["+s+r+n+"]{1,255}",A="(?:\\[(?:"+t.ipv6address+"|"+t.ipvFuture+")\\]|"+t.ipv4address+"|"+b+")",S="(?:"+y+"@)?"+A+"(?::\\d*)?",T="(?:"+y+"@)?("+A+")(?::\\d*)?",k=h+"*",E=h+"+",x="(?:\\/"+k+")*",I="\\/(?:"+E+x+")?",R=E+x,C="["+s+r+n+"@]+"+x,P="(?:\\/\\/\\/"+k+x+")";return t.hierPart="(?:(?:\\/\\/"+S+x+")|"+I+"|"+R+"|"+P+")",t.hierPartCapture="(?:(?:\\/\\/"+T+x+")|"+I+"|"+R+")",t.relativeRef="(?:(?:\\/\\/"+S+x+")|"+I+"|"+C+"|)",t.relativeRefCapture="(?:(?:\\/\\/"+T+x+")|"+I+"|"+C+"|)",t.query="["+o+"\\/\\?]*(?=#|$)",t.queryWithSquareBrackets="["+o+"\\[\\]\\/\\?]*(?=#|$)",t.fragment="["+o+"\\/\\?]*",t}};r.rfc3986=r.generate(),e.ip={v4Cidr:r.rfc3986.ipv4Cidr,v6Cidr:r.rfc3986.ipv6Cidr,ipv4:r.rfc3986.ipv4address,ipv6:r.rfc3986.ipv6address,ipvfuture:r.rfc3986.ipvFuture},r.createRegex=function(t){const e=r.rfc3986,i="(?:\\?"+(t.allowQuerySquareBrackets?e.queryWithSquareBrackets:e.query)+")?(?:#"+e.fragment+")?",o=t.domain?e.relativeRefCapture:e.relativeRef;if(t.relativeOnly)return r.wrap(o+i);let h="";if(t.scheme){s(t.scheme instanceof RegExp||"string"==typeof t.scheme||Array.isArray(t.scheme),"scheme must be a RegExp, String, or Array");const i=[].concat(t.scheme);s(i.length>=1,"scheme must have at least 1 scheme specified");const r=[];for(let t=0;t<i.length;++t){const o=i[t];s(o instanceof RegExp||"string"==typeof o,"scheme at position "+t+" must be a RegExp or String"),o instanceof RegExp?r.push(o.source.toString()):(s(e.schemeRegex.test(o),"scheme at position "+t+" must be a valid scheme"),r.push(n(o)))}h=r.join("|")}const a="(?:"+(h?"(?:"+h+")":e.scheme)+":"+(t.domain?e.hierPartCapture:e.hierPart)+")",u=t.allowRelative?"(?:"+a+"|"+o+")":a;return r.wrap(u+i,h)},r.wrap=function(t,e){return{raw:t="(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])".concat(t),regex:new RegExp("^".concat(t,"$")),scheme:e}},r.uriRegex=r.createRegex({}),e.regex=function(t){return void 0===t&&(t={}),t.scheme||t.allowRelative||t.relativeOnly||t.allowQuerySquareBrackets||t.domain?r.createRegex(t):r.uriRegex}},1447:(t,e)=>{const i={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:El("formula"),settings:El("settings")};e.Parser=class{z_(t){let s=[],n="",r=0,o=!1;const h=t=>{if(r)throw new m("Formula missing closing parenthesis");const h=s.length?s[s.length-1]:null;if(o||n||t){if(h&&"reference"===h.type&&")"===t)return h.type="function",h.value=this.bv(n,h.value),void(n="");if(")"===t){const t=new e.Parser(n,this.settings);s.push({type:"segment",value:t})}else if(o){if("]"===o)return s.push({type:"reference",value:n}),void(n="");s.push({type:"literal",value:n})}else if(i.operatorCharacters.includes(n))h&&"operator"===h.type&&i.operators.includes(h.value+n)?h.value+=n:s.push({type:"operator",value:n});else if(n.match(i.numberRx))s.push({type:"constant",value:C(n)});else if(void 0!==this.settings.constants[n])s.push({type:"constant",value:this.settings.constants[n]});else{if(!n.match(i.tokenRx))throw new m("Formula contains invalid token: ".concat(n));s.push({type:"reference",value:n})}n=""}};for(const e of t)o?e===o?(h(),o=!1):n+=e:r?"("===e?(n+=e,++r):")"===e?(--r,r?n+=e:h(e)):n+=e:e in i.literals?o=i.literals[e]:"("===e?(h(),++r):i.operatorCharacters.includes(e)?(h(),n=e,h()):" "!==e?n+=e:h();h(),s=s.map(((t,e)=>"operator"!==t.type||"-"!==t.value||e&&"operator"!==s[e-1].type?t:{type:"operator",value:"n"}));let a=!1;for(const t of s){if("operator"===t.type){if(i.operatorsPrefix.includes(t.value))continue;if(!a)throw new m("Formula contains an operator in invalid position");if(!i.operators.includes(t.value))throw new m("Formula contains an unknown operator ".concat(t.value))}else if(a)throw new m("Formula missing expected operator");a=!a}if(!a)throw new m("Formula contains invalid trailing operator");1===s.length&&["reference","literal","constant"].includes(s[0].type)&&(this.single={type:"reference"===s[0].type?"reference":"value",value:s[0].value}),this.Av=s.map((t=>{if("operator"===t.type)return i.operatorsPrefix.includes(t.value)?t:t.value;if("reference"!==t.type)return t.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(t.value))throw new m("Formula contains invalid reference ".concat(t.value));return this.settings.reference?this.settings.reference(t.value):i.reference(t.value)}))}bv(t,s){const n=this.settings.functions[s];if("function"!=typeof n)throw new m("Formula contains unknown function ".concat(s));let r=[];if(t){let e="",n=0,o=!1;const h=()=>{if(!e)throw new m("Formula contains function ".concat(s," with invalid arguments ").concat(t));r.push(e),e=""};for(let s=0;s<t.length;++s){const r=t[s];o?(e+=r,r===o&&(o=!1)):r in i.literals&&!n?(e+=r,o=i.literals[r]):","!==r||n?(e+=r,"("===r?++n:")"===r&&--n):h()}h()}return r=r.map((t=>new e.Parser(t,this.settings))),function(t){const e=[];for(const i of r)e.push(i.evaluate(t));return n.call(t,...e)}}evaluate(t){const e=this.Av.slice();for(let s=e.length-2;s>=0;--s){const n=e[s];if(n&&"operator"===n.type){const r=e[s+1];e.splice(s+1,1);const o=i.evaluate(r,t);e[s]=i.single(n.value,o)}}return i.operatorsOrder.forEach((s=>{for(let n=1;n<e.length-1;)if(s.includes(e[n])){const s=e[n],r=i.evaluate(e[n-1],t),o=i.evaluate(e[n+1],t);e.splice(n,2);const h=i.calculate(s,r,o);e[n-1]=0===h?0:h}else n+=2})),i.evaluate(e[0],t)}constructor(t,e={}){if(!e[i.settings]&&e.constants)for(const t in e.constants){const i=e.constants[t];if(null!==i&&!["boolean","number","string"].includes(typeof i))throw new m("Formula constant ".concat(t," contains invalid ").concat(typeof i," value type"))}this.settings=e[i.settings]?e:w.assign({[i.settings]:!0,constants:{},functions:{}},e),this.single=null,this.Av=null,this.z_(t)}},e.Parser.prototype[i.symbol]=!0,i.reference=function(t){return function(e){return e&&void 0!==e[t]?e[t]:null}},i.evaluate=function(t,e){return null===t?null:"function"==typeof t?t(e):t[i.symbol]?t.evaluate(e):t},i.single=function(t,e){if("!"===t)return!e;const i=-e;return 0===i?0:i},i.calculate=function(t,e,s){if("??"===t)return i.exists(e)?e:s;if("string"==typeof e||"string"==typeof s){if("+"===t)return(e=i.exists(e)?e:"")+(i.exists(s)?s:"")}else switch(t){case"^":return _.pow(e,s);case"*":return e*s;case"/":return e/s;case"%":return e%s;case"+":return e+s;case"-":return e-s}switch(t){case"<":return e<s;case"<=":return e<=s;case">":return e>s;case">=":return e>=s;case"==":return e===s;case"!=":return e!==s;case"&&":return e&&s;case"||":return e||s}return null},i.exists=function(t){return null!=t}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:t=>{t.exports=JSON.parse('{"version":"17.13.3"}')}},e={},function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,i),r.exports}(5107);var t,e},t.exports=i()}(Us);const Gs=T(Us.exports);let Zs;class Hs extends Et{getRTCPeerConnection(){return this.webRTCPeer?this.webRTCPeer.getRTCPeer():null}stop(){var t;Zs.info("Stopping"),this.webRTCPeer.closeRTCPeer(),null==(t=this.signaling)||t.close(),this.signaling=null,this.stopReconnection=!0,this.webRTCPeer=new rs}isActive(){const t=this.webRTCPeer.getRTCPeerStatus();return Zs.info("Broadcast status: ",t||"not_established"),"connected"===t}setReconnect(){this.signaling.on("migrate",(()=>this.replaceConnection())),this.autoReconnect&&(this.signaling.on(ys,(()=>{(this.firstReconnection||!this.alreadyDisconnected)&&(this.firstReconnection=!1,this.reconnect({error:new m("Signaling error: wsConnectionError")}))})),this.webRTCPeer.on(ss.connectionStateChange,(t=>{q(t),"connected"===t&&z(new Date),("failed"===t||"disconnected"===t&&this.alreadyDisconnected)&&this.firstReconnection?(this.firstReconnection=!1,this.reconnect({error:new m("Connection state change: RTCPeerConnectionState disconnected")})):"disconnected"===t?(this.alreadyDisconnected=!0,u((()=>this.reconnect({error:new m("Connection state change: RTCPeerConnectionState disconnected")})),1500)):this.alreadyDisconnected=!1})))}async reconnect(t){try{Zs.info("Attempting to reconnect..."),!this.isActive()&&!this.stopReconnection&&!this.isReconnecting&&(this.stop(),this.emit("reconnect",{timeout:Xs(this.reconnectionInterval),error:null!=t&&t.error?null==t?void 0:t.error:new m("Attempting to reconnect")}),this.isReconnecting=!0,await this.connect(this.options),this.alreadyDisconnected=!1,this.reconnectionInterval=1e3,this.firstReconnection=!0,this.isReconnecting=!1)}catch(t){this.isReconnecting=!1,this.reconnectionInterval=Xs(this.reconnectionInterval),Zs.error("Reconnection failed, retrying in ".concat(this.reconnectionInterval,"ms. "),t),u((()=>this.reconnect({error:t})),this.reconnectionInterval)}}constructor(t,e,i,s){if(super(),Zs=i,!e)throw Zs.error("Token generator is required to construct this module."),new m("Token generator is required to construct this module.");this.webRTCPeer=new rs,this.signaling=null,this.autoReconnect=s,this.reconnectionInterval=1e3,this.alreadyDisconnected=!1,this.firstReconnection=!0,this.stopReconnection=!1,this.isReconnecting=!1,this.tokenGenerator=e,this.options=null}}const Xs=t=>t<32e3?2*t:t,zs=s.RTCRtpSender&&!!RTCRtpSender.prototype.createEncodedStreams&&s.RTCRtpReceiver&&!!RTCRtpReceiver.prototype.createEncodedStreams,qs="RTCRtpScriptTransform"in s,Ys="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBGPXR5cGVvZiBnbG9iYWxUaGlzPCJ1Ij9nbG9iYWxUaGlzOnR5cGVvZiB3aW5kb3c8InUiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsPCJ1Ij9nbG9iYWw6dHlwZW9mIHNlbGY8InUiP3NlbGY6e307ZnVuY3Rpb24gVyhuKXtyZXR1cm4gbiYmbi5fX2VzTW9kdWxlJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobiwiZGVmYXVsdCIpP24uZGVmYXVsdDpufXZhciBCPXtleHBvcnRzOnt9fTsvKiEKICoganMtbG9nZ2VyIC0gaHR0cDovL2dpdGh1Yi5jb20vam9ubnlyZWV2ZXMvanMtbG9nZ2VyCiAqIEpvbm55IFJlZXZlcywgaHR0cDovL2pvbm55cmVldmVzLmNvLnVrLwogKiBqcy1sb2dnZXIgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqLyhmdW5jdGlvbihuKXsoZnVuY3Rpb24odCl7dmFyIGU9e307ZS5WRVJTSU9OPSIxLjYuMSI7dmFyIHMscj17fSxvPWZ1bmN0aW9uKGksdSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHUuYXBwbHkoaSxhcmd1bWVudHMpfX0sYT1mdW5jdGlvbigpe3ZhciBpPWFyZ3VtZW50cyx1PWlbMF0saCxjO2ZvcihjPTE7YzxpLmxlbmd0aDtjKyspZm9yKGggaW4gaVtjXSkhKGggaW4gdSkmJmlbY10uaGFzT3duUHJvcGVydHkoaCkmJih1W2hdPWlbY11baF0pO3JldHVybiB1fSxkPWZ1bmN0aW9uKGksdSl7cmV0dXJue3ZhbHVlOmksbmFtZTp1fX07ZS5UUkFDRT1kKDEsIlRSQUNFIiksZS5ERUJVRz1kKDIsIkRFQlVHIiksZS5JTkZPPWQoMywiSU5GTyIpLGUuVElNRT1kKDQsIlRJTUUiKSxlLldBUk49ZCg1LCJXQVJOIiksZS5FUlJPUj1kKDgsIkVSUk9SIiksZS5PRkY9ZCg5OSwiT0ZGIik7dmFyIGw9ZnVuY3Rpb24oaSl7dGhpcy5jb250ZXh0PWksdGhpcy5zZXRMZXZlbChpLmZpbHRlckxldmVsKSx0aGlzLmxvZz10aGlzLmluZm99O2wucHJvdG90eXBlPXtzZXRMZXZlbDpmdW5jdGlvbihpKXtpJiYidmFsdWUiaW4gaSYmKHRoaXMuY29udGV4dC5maWx0ZXJMZXZlbD1pKX0sZ2V0TGV2ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0LmZpbHRlckxldmVsfSxlbmFibGVkRm9yOmZ1bmN0aW9uKGkpe3ZhciB1PXRoaXMuY29udGV4dC5maWx0ZXJMZXZlbDtyZXR1cm4gaS52YWx1ZT49dS52YWx1ZX0sdHJhY2U6ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLlRSQUNFLGFyZ3VtZW50cyl9LGRlYnVnOmZ1bmN0aW9uKCl7dGhpcy5pbnZva2UoZS5ERUJVRyxhcmd1bWVudHMpfSxpbmZvOmZ1bmN0aW9uKCl7dGhpcy5pbnZva2UoZS5JTkZPLGFyZ3VtZW50cyl9LHdhcm46ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLldBUk4sYXJndW1lbnRzKX0sZXJyb3I6ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLkVSUk9SLGFyZ3VtZW50cyl9LHRpbWU6ZnVuY3Rpb24oaSl7dHlwZW9mIGk9PSJzdHJpbmciJiZpLmxlbmd0aD4wJiZ0aGlzLmludm9rZShlLlRJTUUsW2ksInN0YXJ0Il0pfSx0aW1lRW5kOmZ1bmN0aW9uKGkpe3R5cGVvZiBpPT0ic3RyaW5nIiYmaS5sZW5ndGg+MCYmdGhpcy5pbnZva2UoZS5USU1FLFtpLCJlbmQiXSl9LGludm9rZTpmdW5jdGlvbihpLHUpe3MmJnRoaXMuZW5hYmxlZEZvcihpKSYmcyh1LGEoe2xldmVsOml9LHRoaXMuY29udGV4dCkpfX07dmFyIGY9bmV3IGwoe2ZpbHRlckxldmVsOmUuT0ZGfSk7KGZ1bmN0aW9uKCl7dmFyIGk9ZTtpLmVuYWJsZWRGb3I9byhmLGYuZW5hYmxlZEZvciksaS50cmFjZT1vKGYsZi50cmFjZSksaS5kZWJ1Zz1vKGYsZi5kZWJ1ZyksaS50aW1lPW8oZixmLnRpbWUpLGkudGltZUVuZD1vKGYsZi50aW1lRW5kKSxpLmluZm89byhmLGYuaW5mbyksaS53YXJuPW8oZixmLndhcm4pLGkuZXJyb3I9byhmLGYuZXJyb3IpLGkubG9nPWkuaW5mb30pKCksZS5zZXRIYW5kbGVyPWZ1bmN0aW9uKGkpe3M9aX0sZS5zZXRMZXZlbD1mdW5jdGlvbihpKXtmLnNldExldmVsKGkpO2Zvcih2YXIgdSBpbiByKXIuaGFzT3duUHJvcGVydHkodSkmJnJbdV0uc2V0TGV2ZWwoaSl9LGUuZ2V0TGV2ZWw9ZnVuY3Rpb24oKXtyZXR1cm4gZi5nZXRMZXZlbCgpfSxlLmdldD1mdW5jdGlvbihpKXtyZXR1cm4gcltpXXx8KHJbaV09bmV3IGwoYSh7bmFtZTppfSxmLmNvbnRleHQpKSl9LGUuY3JlYXRlRGVmYXVsdEhhbmRsZXI9ZnVuY3Rpb24oaSl7aT1pfHx7fSxpLmZvcm1hdHRlcj1pLmZvcm1hdHRlcnx8ZnVuY3Rpb24ocCxfKXtfLm5hbWUmJnAudW5zaGlmdCgiWyIrXy5uYW1lKyJdIil9O3ZhciB1PXt9LGg9ZnVuY3Rpb24oYyxwKXtGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChjLGNvbnNvbGUscCl9O3JldHVybiB0eXBlb2YgY29uc29sZT4idSI/ZnVuY3Rpb24oKXt9OmZ1bmN0aW9uKGMscCl7Yz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjKTt2YXIgXz1jb25zb2xlLmxvZyxnO3AubGV2ZWw9PT1lLlRJTUU/KGc9KHAubmFtZT8iWyIrcC5uYW1lKyJdICI6IiIpK2NbMF0sY1sxXT09PSJzdGFydCI/Y29uc29sZS50aW1lP2NvbnNvbGUudGltZShnKTp1W2ddPW5ldyBEYXRlKCkuZ2V0VGltZSgpOmNvbnNvbGUudGltZUVuZD9jb25zb2xlLnRpbWVFbmQoZyk6aChfLFtnKyI6ICIrKG5ldyBEYXRlKCkuZ2V0VGltZSgpLXVbZ10pKyJtcyJdKSk6KHAubGV2ZWw9PT1lLldBUk4mJmNvbnNvbGUud2Fybj9fPWNvbnNvbGUud2FybjpwLmxldmVsPT09ZS5FUlJPUiYmY29uc29sZS5lcnJvcj9fPWNvbnNvbGUuZXJyb3I6cC5sZXZlbD09PWUuSU5GTyYmY29uc29sZS5pbmZvP189Y29uc29sZS5pbmZvOnAubGV2ZWw9PT1lLkRFQlVHJiZjb25zb2xlLmRlYnVnP189Y29uc29sZS5kZWJ1ZzpwLmxldmVsPT09ZS5UUkFDRSYmY29uc29sZS50cmFjZSYmKF89Y29uc29sZS50cmFjZSksaS5mb3JtYXR0ZXIoYyxwKSxoKF8sYykpfX0sZS51c2VEZWZhdWx0cz1mdW5jdGlvbihpKXtlLnNldExldmVsKGkmJmkuZGVmYXVsdExldmVsfHxlLkRFQlVHKSxlLnNldEhhbmRsZXIoZS5jcmVhdGVEZWZhdWx0SGFuZGxlcihpKSl9LGUuc2V0RGVmYXVsdHM9ZS51c2VEZWZhdWx0cyxuLmV4cG9ydHM/bi5leHBvcnRzPWU6KGUuX3ByZXZMb2dnZXI9dC5Mb2dnZXIsZS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuTG9nZ2VyPWUuX3ByZXZMb2dnZXIsZX0sdC5Mb2dnZXI9ZSl9KShGKX0pKEIpO3ZhciB6PUIuZXhwb3J0cyxEPVcoeik7Y2xhc3Mgd3tjb25zdHJ1Y3Rvcih0KXt0aGlzLmRhdGE9dCx0aGlzLmJpdE9mZnNldD0wfXJlYWRCaXRzKHQpe2lmKHRoaXMuYml0T2Zmc2V0K3Q+dGhpcy5kYXRhLmxlbmd0aCo4KXRocm93IG5ldyBFcnJvcigiQXR0ZW1wdGVkIHRvIHJlYWQgcGFzdCB0aGUgZW5kIG9mIHRoZSBiaXRzdHJlYW0iKTtsZXQgZT0wO2ZvcihsZXQgcz0wO3M8dDtzKyspe2NvbnN0IHI9TWF0aC5mbG9vcih0aGlzLmJpdE9mZnNldC84KSxvPTctdGhpcy5iaXRPZmZzZXQlOCxhPXRoaXMuZGF0YVtyXT4+byYxO2V8PWE8PHQtMS1zLHRoaXMuYml0T2Zmc2V0Kyt9cmV0dXJuIGV9c2tpcCh0KXt0aGlzLmJpdE9mZnNldCs9dH1yZWFkRXhwR29sb21iVW5zaWduZWQoKXtsZXQgdD0tMTtmb3IobGV0IGU9MDtlPT09MDt0KyspZT10aGlzLnJlYWRCaXRzKDEpO3JldHVybigxPDx0KS0xK3RoaXMucmVhZEJpdHModCl9cmVhZEV4cEdvbG9tYlNpZ25lZCgpe2NvbnN0IHQ9dGhpcy5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtyZXR1cm4gdCUyPT09MD8tKHQvMik6KHQrMSkvMn19Y29uc3QgbT17U0xJQ0VfTk9OX0lEUjoxLFNMSUNFX1BBUlRJVElPTl9BOjIsU0xJQ0VfSURSOjUsU0VJX0gyNjQ6NixTRUlfSDI2NV9QUkVGSVg6MzksU0VJX0gyNjVfU1VGRklYOjQwLFNQU19IMjY0OjcsU1BTX0gyNjU6MzMsUFBTX0gyNjQ6OCxQUFNfSDI2NTozNH0sUj17UElDX1RJTUlORzoxLFVTRVJfREFUQV9VTlJFR0lTVEVSRUQ6NX0sRT17TEVHQUNZOjEsTkVXOjIsVElNRUNPREU6MyxPVEhFUjo0fSxqPSI2ZTljZmQyYS01OTA3LTQ5ZmYtYjM2My04OTc4YTZlODM0MGUiLHE9IjlhMjFmM2JlLTMxZjAtNGI3OC1iMGJlLWM3ZjdkYmI5NzI1MCIsTD0iZDQwZTM4ZWEtZDQxOS00YzYyLTk0ZWQtMjBhYzM3YjRlNGZhIjtjbGFzcyBWe2NvbnN0cnVjdG9yKHQ9IkgyNjQiKXt0aGlzLnNwcz1uZXcgTWFwLHRoaXMucHBzPW5ldyBNYXAsdGhpcy5hY3RpdmVTUFM9bnVsbCx0aGlzLmNvZGVjPXR9Y29sbGVjdFBQUyh0KXt0aGlzLmNvZGVjPT09IkgyNjQiP3RoaXMuY29sbGVjdEgyNjRQUFModCk6dGhpcy5jb2xsZWN0SDI2NVBQUyh0KX1jb2xsZWN0U1BTKHQpe3RoaXMuY29kZWM9PT0iSDI2NCI/dGhpcy5jb2xsZWN0SDI2NFNQUyh0KTp0aGlzLmNvbGxlY3RIMjY1U1BTKHQpfWNvbGxlY3RIMjY0U1BTKHQpe2NvbnN0IGU9bmV3IHcodCkscz1lLnJlYWRCaXRzKDgpLHI9WzEwMCwxMTAsMTIyLDI0NCw0NCw4Myw4NiwxMTgsMTI4LDEzOCwxMzksMTM0LDEzNV07ZS5za2lwKDgpLGUuc2tpcCg4KTtjb25zdCBvPWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7aWYobz4zMXx8bzwwKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBzZXFfcGFyYW1ldGVyX3NldF9pZCIpO2lmKHIuaW5jbHVkZXMocykpe2NvbnN0IGw9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtpZihsPT09MyYmZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnNraXAoMSksZS5yZWFkQml0cygxKSl7Y29uc3QgaT1sIT09Mz84OjEyO2ZvcihsZXQgdT0wO3U8aTt1KyspaWYoZS5yZWFkQml0cygxKSl7Y29uc3QgaD11PDY/MTY6NjQ7bGV0IGM9OCxwPTg7Zm9yKGxldCBfPTA7XzxoO18rKyl7aWYocCE9PTApe2NvbnN0IGc9ZS5yZWFkRXhwR29sb21iU2lnbmVkKCk7cD0oYytnKzI1NiklMjU2fWM9cD09PTA/YzpwfX19fWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7Y29uc3QgYT1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2lmKGE9PT0wKWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7ZWxzZSBpZihhPT09MSl7ZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlNpZ25lZCgpO2NvbnN0IGw9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtmb3IobGV0IGY9MDtmPGw7ZisrKWUucmVhZEV4cEdvbG9tYlNpZ25lZCgpfWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRCaXRzKDEpPT09MCYmZS5za2lwKDEpLGUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiYoZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSk7bGV0IGQ7aWYoZS5yZWFkQml0cygxKSl7bGV0IGY9ZnVuY3Rpb24oYyl7Y29uc3QgcD1jLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2Muc2tpcCg0KSxjLnNraXAoNCk7Zm9yKGxldCB4PTA7eDw9cDt4KyspYy5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxjLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGMuc2tpcCgxKTtjLnNraXAoNSk7Y29uc3QgXz1jLnJlYWRCaXRzKDUpLGc9Yy5yZWFkQml0cyg1KSxBPWMucmVhZEJpdHMoNSk7cmV0dXJue2NwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czE6XyxkcGJfb3V0cHV0X2RlbGF5X2xlbmd0aF9taW51czE6Zyx0aW1lX29mZnNldF9sZW5ndGg6QX19O2UucmVhZEJpdHMoMSkmJmUucmVhZEJpdHMoOCk9PT0yNTUmJihlLnNraXAoMTYpLGUuc2tpcCgxNikpLGUucmVhZEJpdHMoMSkmJmUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiYoZS5za2lwKDMpLGUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiZlLnNraXAoMjQpKSxlLnJlYWRCaXRzKDEpJiYoZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpKTtjb25zdCBsPWUucmVhZEJpdHMoMSk/e251bV91bml0c19pbl90aWNrOmUucmVhZEJpdHMoMzIpLHRpbWVfc2NhbGU6ZS5yZWFkQml0cygzMiksZml4ZWRfZnJhbWVfcmF0ZV9mbGFnOmUucmVhZEJpdHMoMSl9OnZvaWQgMCxpPWUucmVhZEJpdHMoMSk/ZihlKTp2b2lkIDAsdT1lLnJlYWRCaXRzKDEpP2YoZSk6dm9pZCAwOyhpfHx1KSYmZS5za2lwKDEpO2NvbnN0IGg9ZS5yZWFkQml0cygxKTtkPXt0aW1pbmdfaW5mbzpsLG5hbF9ocmRfcGFyYW1ldGVyczppLHZjbF9ocmRfcGFyYW1ldGVyczp1LHBpY19zdHJ1Y3RfcHJlc2VudF9mbGFnOmh9fXRoaXMuc3BzLnNldChvLHt2dWlfcGFyYW1ldGVyczpkfSl9Y29sbGVjdEgyNjVTUFModCl7fWNvbGxlY3RIMjY0UFBTKHQpe2NvbnN0IGU9bmV3IHcodCkscz1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2lmKHM+MjU1fHxzPDApdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBpY19wYXJhbWV0ZXJfc2V0X2lkIik7Y29uc3Qgcj1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO3RoaXMucHBzLnNldChzLHtzZXFfcGFyYW1ldGVyX3NldF9pZDpyfSl9Y29sbGVjdEgyNjVQUFModCl7fWZpbmRBY3RpdmVTUFModCl7Y29uc3QgZT1uZXcgdyh0KTtlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7Y29uc3Qgcz1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLHI9dGhpcy5wcHMuZ2V0KHMpO2lmKHIpe2NvbnN0IG89dGhpcy5zcHMuZ2V0KHIuc2VxX3BhcmFtZXRlcl9zZXRfaWQpO2lmKG8pe3RoaXMuYWN0aXZlU1BTPW87cmV0dXJufX10aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIHRoZSBhY3RpdmUgU1BTIil9fWNvbnN0IFM9bmV3IFY7ZnVuY3Rpb24gRyhuLHQpe2Zvcig7dDxuLmJ5dGVMZW5ndGgtNDspe2lmKG5bdF09PT0wJiZuW3QrMV09PT0wJiYoblt0KzJdPT09MXx8blt0KzJdPT09MCYmblt0KzNdPT09MSkpcmV0dXJuIHQ7dCs9MX1yZXR1cm4tMX1mdW5jdGlvbiBVKG4pe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkobi5ieXRlTGVuZ3RoKTtsZXQgZT0wLHM9MDtmb3IobGV0IHI9MjtyPG4uYnl0ZUxlbmd0aDtyKyspbltyXT09PTMmJm5bci0xXT09PTAmJm5bci0yXT09PTAmJih0LnNldChuLnN1YmFycmF5KHMsciksZSksZSs9ci1zLHM9cisxKTtyZXR1cm4gczxuLmJ5dGVMZW5ndGgmJnQuc2V0KG4uc3ViYXJyYXkocyksZSksdH1mdW5jdGlvbiBZKG4sdCl7bGV0IGU9MDtjb25zdCBzPXQ9PT0iSDI2NCI/MToyLHI9W107Zm9yKDtlPG4uYnl0ZUxlbmd0aC00Oyl7Y29uc3Qgbz1HKG4sZSk7aWYobz49ZSl7Y29uc3QgYT1uW28rMl09PT0xPzM6NCxkPUcobixvK2Ercyk7aWYoZD5vKXIucHVzaChuLnN1YmFycmF5KG8sZCkpLGU9ZDtlbHNle3IucHVzaChuLnN1YmFycmF5KG8pKTticmVha319ZWxzZSBicmVha31yZXR1cm4gcn1mdW5jdGlvbiBYKG4sdCl7bGV0IGU9ITA7cmV0dXJuIFkobix0KS5maWx0ZXIocz0+e2NvbnN0IHI9c1syXT09PTE/Mzo0LG89dD09PSJIMjY0Ij8xOjIsYT1zW3JdLGQ9dD09PSJIMjY0Ij9hJjMxOmE+PjEmNjM7aWYoZSlzd2l0Y2goZCl7Y2FzZSBtLlBQU19IMjY0OmNhc2UgbS5QUFNfSDI2NTpTLmNvbGxlY3RQUFMoVShzLnN1YmFycmF5KHIrbykpKTticmVhaztjYXNlIG0uU1BTX0gyNjQ6Y2FzZSBtLlNQU19IMjY1OlMuY29sbGVjdFNQUyhVKHMuc3ViYXJyYXkocitvKSkpO2JyZWFrO2Nhc2UgbS5TTElDRV9JRFI6Y2FzZSBtLlNMSUNFX05PTl9JRFI6Y2FzZSBtLlNMSUNFX1BBUlRJVElPTl9BOnRyeXtTLmZpbmRBY3RpdmVTUFMoVShzLnN1YmFycmF5KHIrbykpKSxlPSExfWNhdGNoKGwpe2NvbnNvbGUuaW5mbygiRmFpbGVkIHRvIGZpbmQgYWN0aXZlIFNQUy4gV2lsbCBub3QgYmUgYWJsZSB0byBleHRyYWN0IFBJQyB0aW1pbmcgbWV0YWRhdGEiKX1icmVha31yZXR1cm5bbS5TRUlfSDI2NCxtLlNFSV9IMjY1X1BSRUZJWCxtLlNFSV9IMjY1X1NVRkZJWF0uaW5jbHVkZXMoZCl9KX1mdW5jdGlvbiAkKG4pe2xldCB0PTAsZT0wO2Zvcig7bltlXT09PTI1NTspdCs9MjU1LGUrKzt0Kz1uW2VdLGUrKztsZXQgcz0wO2Zvcig7bltlXT09PTI1NTspcys9MjU1LGUrKztyZXR1cm4gcys9bltlXSxlKysse3R5cGU6dCxjb250ZW50Om4uc3ViYXJyYXkoZSxlK3MpfX1mdW5jdGlvbiBKKG4pe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkoVChxKSksZT1uZXcgVWludDhBcnJheShUKGopKSxzPW5ldyBVaW50OEFycmF5KFQoTCkpO3JldHVybiB0LmV2ZXJ5KChyLG8pPT5yPT09bltvXSk/RS5USU1FQ09ERTplLmV2ZXJ5KChyLG8pPT5yPT09bltvXSk/RS5MRUdBQ1k6cy5ldmVyeSgocixvKT0+cj09PW5bb10pP0UuTkVXOkUuT1RIRVJ9ZnVuY3Rpb24gSyhuLHQpe2xldCBlPTA7bi51dWlkPXQuc3ViYXJyYXkoZSxlKzE2KSxlKz0xNjtjb25zdCBzPUoobi51dWlkKSxyPXQuc3ViYXJyYXkoZSk7c3dpdGNoKHMpe2Nhc2UgRS5MRUdBQ1k6Y2FzZSBFLk9USEVSOm4udW5yZWdpc3RlcmVkPXI7YnJlYWs7Y2FzZSBFLlRJTUVDT0RFOm4udGltZWNvZGU9TyhyKTticmVhaztjYXNlIEUuTkVXOntsZXQgbz0wO2NvbnN0IGE9QyhEYXRlLm5vdygpKS5sZW5ndGgsZD1yLnN1YmFycmF5KG8sYSk7bys9YTtjb25zdCBsPXIuc3ViYXJyYXkobyk7bi50aW1lY29kZT1PKGQpLG4udW5yZWdpc3RlcmVkPWw7YnJlYWt9fX1mdW5jdGlvbiBPKG4pe2NvbnN0IHQ9bi5yZWR1Y2UoKG8sYSk9PihvPDxCaWdJbnQoOCkpK0JpZ0ludChhKSxCaWdJbnQoMCkpLGU9TnVtYmVyKHQpLHM9bmV3IERhdGUoZSk7cmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzLnRvSVNPU3RyaW5nKCkpfWZ1bmN0aW9uIFoobix0KXt2YXIgZixpLHUsaCxjO2lmKCFTLmFjdGl2ZVNQUyl7Y29uc29sZS53YXJuKCJDYW5ub3QgZmluZCB0aGUgYWN0aXZlIFNQUyIpO3JldHVybn1jb25zdCBlPShmPVMuYWN0aXZlU1BTLnZ1aV9wYXJhbWV0ZXJzLm5hbF9ocmRfcGFyYW1ldGVycykhPW51bGw/ZjpTLmFjdGl2ZVNQUy52dWlfcGFyYW1ldGVycy52Y2xfaHJkX3BhcmFtZXRlcnMscz17Y3BiX2RwYl9kZWxheXNfcHJlc2VudF9mbGFnOmU/MTowLGNwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czE6KGk9ZT09bnVsbD92b2lkIDA6ZS5jcGJfcmVtb3ZhbF9kZWxheV9sZW5ndGhfbWludXMxKSE9bnVsbD9pOjIzLGRwYl9vdXRwdXRfZGVsYXlfbGVuZ3RoX21pbnVzMToodT1lPT1udWxsP3ZvaWQgMDplLmRwYl9vdXRwdXRfZGVsYXlfbGVuZ3RoX21pbnVzMSkhPW51bGw/dToyMyx0aW1lX29mZnNldF9sZW5ndGg6ZT8oaD1lLnRpbWVfb2Zmc2V0X2xlbmd0aCkhPW51bGw/aDoyNDp2b2lkIDAscGljX3N0cnVjdF9wcmVzZW50X2ZsYWc6KGM9Uy5hY3RpdmVTUFMudnVpX3BhcmFtZXRlcnMucGljX3N0cnVjdF9wcmVzZW50X2ZsYWcpIT1udWxsP2M6MH07aWYoIXMucGljX3N0cnVjdF9wcmVzZW50X2ZsYWcpe2NvbnNvbGUud2FybigicGljX3N0cnVjdF9wcmVzZW50X2ZsYWcgaXMgbm90IHByZXNlbnQiKTtyZXR1cm59Y29uc3Qgcj1uZXcgdyh0KTtzLmNwYl9kcGJfZGVsYXlzX3ByZXNlbnRfZmxhZyYmKHIuc2tpcChzLmNwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czErMSksci5za2lwKHMuZHBiX291dHB1dF9kZWxheV9sZW5ndGhfbWludXMxKzEpKTtjb25zdCBvPVsxLDEsMSwyLDIsMywzLDIsM10sYT1yLnJlYWRCaXRzKDQpO2lmKGE+PW8ubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwaWNfc3RydWN0Iik7Y29uc3QgZD1vW2FdLGw9W107Zm9yKGxldCBwPTA7cDxkO3ArKylpZihyLnJlYWRCaXRzKDEpKXtjb25zdCBnPXt9O3Iuc2tpcCgyKSxyLnNraXAoMSksci5za2lwKDUpO2NvbnN0IEE9ci5yZWFkQml0cygxKTtpZihyLnNraXAoMiksZy5uX2ZyYW1lcz1yLnJlYWRCaXRzKDgpLEE/KGcuc2Vjb25kc192YWx1ZT1yLnJlYWRCaXRzKDYpLGcubWludXRlc192YWx1ZT1yLnJlYWRCaXRzKDYpLGcuaG91cnNfdmFsdWU9ci5yZWFkQml0cyg1KSk6ci5yZWFkQml0cygxKSYmKGcuc2Vjb25kc192YWx1ZT1yLnJlYWRCaXRzKDYpLHIucmVhZEJpdHMoMSkmJihnLm1pbnV0ZXNfdmFsdWU9ci5yZWFkQml0cyg2KSxyLnJlYWRCaXRzKDEpJiYoZy5ob3Vyc192YWx1ZT1yLnJlYWRCaXRzKDUpKSkpLHMudGltZV9vZmZzZXRfbGVuZ3RoKXRyeXtnLnRpbWVfb2Zmc2V0PXIucmVhZEJpdHMocy50aW1lX29mZnNldF9sZW5ndGgpfWNhdGNoKHgpe2NvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byByZWFkIHRpbWVfb2Zmc2V0Iix4KSxnLnRpbWVfb2Zmc2V0PTB9ZWxzZSBnLnRpbWVfb2Zmc2V0PTA7bC5wdXNoKGcpfW4uc2VpUGljVGltaW5nVGltZUNvZGVBcnJheT1sfWZ1bmN0aW9uIFEobix0KXtpZih0IT09IkgyNjQiJiZ0IT09IkgyNjUiKXRocm93IG5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgY29kZWMgIi5jb25jYXQodCkpO2NvbnN0IGU9e307cmV0dXJuIFMuY29kZWM9dCxYKG5ldyBVaW50OEFycmF5KG4uZGF0YSksdCkuZm9yRWFjaChzPT57Y29uc3Qgcj1zWzJdPT09MT8zOjQsbz10PT09IkgyNjQiPzE6MixhPVUocy5zdWJhcnJheShyK28pKSxkPSQoYSk7c3dpdGNoKGQudHlwZSl7Y2FzZSBSLlBJQ19USU1JTkc6WihlLGQuY29udGVudCk7YnJlYWs7Y2FzZSBSLlVTRVJfREFUQV9VTlJFR0lTVEVSRUQ6SyhlLGQuY29udGVudCk7YnJlYWt9fSksZX1mdW5jdGlvbiBlZShuKXtyZXR1cm4vXlswLTlhLWZBLUZdezh9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezEyfSQvLnRlc3Qobil9ZnVuY3Rpb24gVChuKXtyZXR1cm4gbi5yZXBsYWNlKC8tL2csIiIpLm1hdGNoKC8uezEsMn0vZykubWFwKHQ9PnBhcnNlSW50KHQsMTYpKX1mdW5jdGlvbiB0ZShuLHQsZSl7Y29uc3Qgcz1uZXcgVWludDhBcnJheShUKG4pKSxyPUMoZSksbz1uZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoSlNPTi5zdHJpbmdpZnkodCkpLGE9bmV3IFVpbnQ4QXJyYXkocy5sZW5ndGgrci5sZW5ndGgrby5sZW5ndGgpO3JldHVybiBhLnNldChzKSxhLnNldChyLHMubGVuZ3RoKSxhLnNldChvLHIubGVuZ3RoK3MubGVuZ3RoKSxhfWZ1bmN0aW9uIG5lKG4pe2NvbnN0IHQ9W10sZT1NYXRoLmZsb29yKG4uYnl0ZUxlbmd0aC8yNTUpLHM9bi5ieXRlTGVuZ3RoJTI1NTtmb3IobGV0IHI9MDtyPGU7cisrKXQucHVzaCgyNTUpO3JldHVybiB0LnB1c2gocyksbmV3IFVpbnQ4QXJyYXkoWzUsLi4udF0pfWZ1bmN0aW9uIHJlKG4pe2NvbnN0IHQ9W107Zm9yKGxldCBlPTA7ZTxuLmJ5dGVMZW5ndGg7ZSsrKWUrMjxuLmJ5dGVMZW5ndGgmJlswLDEsMiwzXS5pbmNsdWRlcyhuW2UrMl0pJiZuW2VdPT09MCYmbltlKzFdPT09MD8odC5wdXNoKG5bZV0pLHQucHVzaChuW2UrMV0pLGUrPTIsdC5wdXNoKDMpKTp0LnB1c2gobltlXSk7cmV0dXJuIHQucHVzaCgxMjgpLG5ldyBVaW50OEFycmF5KHQpfWZ1bmN0aW9uIEMobil7Y29uc3QgdD1bXTtpZighaXNOYU4obikpe2NvbnN0IGU9QmlnSW50KG4pO2ZvcihsZXQgcz0wO3M8TWF0aC5jZWlsKE1hdGguZmxvb3IoTWF0aC5sb2cyKG5ldyBOdW1iZXIobikpKzEpLzgpO3MrKyl0LnVuc2hpZnQobmV3IE51bWJlcihlPj5CaWdJbnQoOCpzKSZCaWdJbnQoMjU1KSkpfXJldHVybiBuZXcgVWludDhBcnJheSh0KX1mdW5jdGlvbiBzZSh7dXVpZDpuLHBheWxvYWQ6dCx0aW1lY29kZTplfSl7Y29uc3Qgcz1bMCwwLDAsMV0scj1bMTAyXSxvPXRlKG4sdCxlKSxhPW5lKG8pLGQ9cmUobyksbD1uZXcgVWludDhBcnJheShzLmxlbmd0aCtyLmxlbmd0aCthLmxlbmd0aCtkLmxlbmd0aCk7cmV0dXJuIGwuc2V0KHMpLGwuc2V0KHIscy5sZW5ndGgpLGwuc2V0KGEscy5sZW5ndGgrci5sZW5ndGgpLGwuc2V0KGQscy5sZW5ndGgrci5sZW5ndGgrYS5sZW5ndGgpLGx9ZnVuY3Rpb24gaWUoe3V1aWQ6bixwYXlsb2FkOnQsdGltZWNvZGU6ZX0scyl7aWYobj09PSIifHx0PT09IiIpdGhyb3cgbmV3IEVycm9yKCJ1dWlkIGFuZCBwYXlsb2FkIGNhbm5vdCBiZSBlbXB0eSIpO2VlKG4pfHwoY29uc29sZS53YXJuKCJJbnZhbGlkIFVVSUQuIFVzaW5nIGRlZmF1bHQgVVVJRC4iKSxuPUwsZT1EYXRlLm5vdygpKTtjb25zdCByPXNlKHt1dWlkOm4scGF5bG9hZDp0LHRpbWVjb2RlOmV9KSxvPW5ldyBEYXRhVmlldyhzLmRhdGEpLGE9bmV3IEFycmF5QnVmZmVyKHMuZGF0YS5ieXRlTGVuZ3RoK3IuYnl0ZUxlbmd0aCksZD1uZXcgRGF0YVZpZXcoYSk7Zm9yKGxldCBsPTA7bDxzLmRhdGEuYnl0ZUxlbmd0aDtsKyspZC5zZXRVaW50OChsLG8uZ2V0VWludDgobCkpO2ZvcihsZXQgbD0wO2w8ci5ieXRlTGVuZ3RoO2wrKylkLnNldFVpbnQ4KHMuZGF0YS5ieXRlTGVuZ3RoK2wscltsXSk7cy5kYXRhPWF9RC5nZXQoIlRyYW5zZm9ybVdvcmtlciIpLnNldExldmVsKEQuREVCVUcpO2NvbnN0IG9lPTJlMyxiPVtdO2xldCB5PSIiLFA9e307Y29uc3Qgdj17fTtsZXQgST1bXTtmdW5jdGlvbiBIKG4pe3JldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtzdGFydCgpe30sZmx1c2goKXt9LGFzeW5jIHRyYW5zZm9ybSh0LGUpe3ZhciBzLHI7aWYodCBpbnN0YW5jZW9mIFJUQ0VuY29kZWRWaWRlb0ZyYW1lKXtjb25zdCBvPSgocz1QW3QuZ2V0TWV0YWRhdGEoKS5wYXlsb2FkVHlwZV0pPT1udWxsP3ZvaWQgMDpzLnRvVXBwZXJDYXNlKCkpfHwoeT09bnVsbD92b2lkIDA6eS50b1VwcGVyQ2FzZSgpKTtpZihvPT09IkgyNjQiKXtjb25zdCBhPVEodCxvKTsoYS50aW1lY29kZXx8YS51bnJlZ2lzdGVyZWR8fCgocj1hLnNlaVBpY1RpbWluZ1RpbWVDb2RlQXJyYXkpPT1udWxsP3ZvaWQgMDpyLmxlbmd0aCk+MCkmJnNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJtZXRhZGF0YSIsbWlkOm4sbWV0YWRhdGE6YX0pfXNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJjb21wbGV0ZSIsZnJhbWU6e3R5cGU6dC50eXBlLHRpbWVzdGFtcDp0LnRpbWVzdGFtcCxkYXRhOnQuZGF0YX19KX1lLmVucXVldWUodCl9fSl9ZnVuY3Rpb24gTSgpe09iamVjdC5rZXlzKHYpLnNvcnQoKS5qb2luKCk9PT1JLnNvcnQoKS5qb2luKCkmJihiLnNoaWZ0KCksST1bXSl9ZnVuY3Rpb24gYWUobil7Y29uc3QgdD1uZXcgRGF0ZSgpLmdldFRpbWUoKTt2W25dPXQsT2JqZWN0LmtleXModikuZmlsdGVyKHM9PnQtdltzXT5vZSkuZm9yRWFjaChzPT57ZGVsZXRlIHZbc10sZGVsZXRlIElbc119KSxNKCl9ZnVuY3Rpb24gTigpe3JldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtzdGFydCgpe30sZmx1c2goKXt9LGFzeW5jIHRyYW5zZm9ybShuLHQpe2lmKG4gaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3Qgcz1uLmdldE1ldGFkYXRhKCkuc3luY2hyb25pemF0aW9uU291cmNlO2lmKGFlKHMpLCFJLmluY2x1ZGVzKHMpJiZiLmxlbmd0aCl0cnl7aWYoIS8oaDI2WzRdKS8udGVzdCh5KSl0aHJvdyBuZXcgRXJyb3IoIlNlbmRpbmcgbWV0YWRhdGEgaXMgbm90IHN1cHBvcnRlZCB3aXRoIGFueSBvdGhlciBjb2RlYyBvdGhlciB0aGFuIEguMjY0Iik7YlswXS51dWlkPT09TCYmKGJbMF0udGltZWNvZGU9RGF0ZS5ub3coKSksaWUoYlswXSxuKSxJLnB1c2gocyl9Y2F0Y2gocil7Y29uc29sZS5lcnJvcihyKX1maW5hbGx5e00oKX19dC5lbnF1ZXVlKG4pfX0pfWZ1bmN0aW9uIGsoe3JlYWRhYmxlOm4sd3JpdGFibGU6dH0sZSl7bi5waXBlVGhyb3VnaChlKS5waXBlVG8odCl9YWRkRXZlbnRMaXN0ZW5lcigicnRjdHJhbnNmb3JtIixuPT57bGV0IHQ7aWYobi50cmFuc2Zvcm1lci5vcHRpb25zLm5hbWU9PT0ic2VuZGVyVHJhbnNmb3JtIil5PW4udHJhbnNmb3JtZXIub3B0aW9ucy5jb2RlYyx0PU4oKTtlbHNlIGlmKG4udHJhbnNmb3JtZXIub3B0aW9ucy5uYW1lPT09InJlY2VpdmVyVHJhbnNmb3JtIilQPW4udHJhbnNmb3JtZXIub3B0aW9ucy5wYXlsb2FkVHlwZUNvZGVjfHx7fSx5PW4udHJhbnNmb3JtZXIub3B0aW9ucy5jb2RlY3x8IiIsdD1IKG4udHJhbnNmb3JtZXIub3B0aW9ucy5taWQpO2Vsc2UgcmV0dXJuO2sobi50cmFuc2Zvcm1lcix0KX0pLGFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLG49Pntjb25zdHthY3Rpb246dH09bi5kYXRhO3N3aXRjaCh0KXtjYXNlImluc2VydGFibGUtc3RyZWFtcy1zZW5kZXIiOnk9bi5kYXRhLmNvZGVjLGsobi5kYXRhLE4oKSk7YnJlYWs7Y2FzZSJpbnNlcnRhYmxlLXN0cmVhbXMtcmVjZWl2ZXIiOlA9bi5kYXRhLnBheWxvYWRUeXBlQ29kZWN8fHt9LHk9bi5kYXRhLmNvZGVjfHwiIixrKG4uZGF0YSxIKG4uZGF0YS5taWQpKTticmVhaztjYXNlIm1ldGFkYXRhLXNlaS11c2VyLWRhdGEtdW5yZWdpc3RlcmVkIjpiLnB1c2goe3V1aWQ6bi5kYXRhLnV1aWQscGF5bG9hZDpuLmRhdGEucGF5bG9hZH0pO2JyZWFrfX0pfSkoKTsK",Ks=typeof self<"u"&&self.Blob&&new Blob([(t=>j.from(atob(t),(t=>t.charCodeAt(0))))(Ys)],{type:"text/javascript;charset=utf-8"});function js(t){let e;try{if(e=Ks&&(self.URL||self.webkitURL).createObjectURL(Ks),!e)throw"";const i=new Ol(e,{name:null==t?void 0:t.name});return i.addEventListener("error",(()=>{(self.URL||self.webkitURL).revokeObjectURL(e)})),i}catch(e){return new Ol("data:text/javascript;base64,"+Ys,{name:null==t?void 0:t.name})}finally{e&&(self.URL||self.webkitURL).revokeObjectURL(e)}}const Qs=at.get("Publish"),Js={mediaStream:null,bandwidth:0,metadata:!1,disableVideo:!1,disableAudio:!1,codec:Ji.H264,simulcast:!1,scalabilityMode:null,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};function $s(t){if(!t)return new j;const e=t.length,i=new j(e/2);for(let s=0;s<e;s+=2)i[s/2]=x(t.substr(s,2),16);return i}function tn(t,e,i){if(w.prototype.hasOwnProperty.call(t,i)&&w.prototype.hasOwnProperty.call(e,i)){const s=t[i];t[i]=e[i],e[i]=s}else console.error('One or both objects do not have the property "'.concat(i,'"'))}function en(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))}const sn=nn;function nn(t,e){const i=_n();return(nn=function(t,e){return i[t-=257]})(t,e)}var rn;!function(){const t=nn,e=_n();for(;;)try{if(x(t(266))/1*(-x(t(261))/2)+x(t(258))/3*(-x(t(264))/4)+-x(t(267))/5*(x(t(274))/6)+x(t(260))/7*(x(t(268))/8)+x(t(270))/9+-x(t(277))/10+x(t(263))/11==303379)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const on=Bl&&Bl[sn(276)]||"",hn=Bl&&Bl.vendor||"",an=!(null==s||!s[sn(273)]),un=on[sn(278)](sn(257)),cn=!un&&hn[sn(278)](sn(259)),ln=!un&&!cn&&on.includes(sn(272)),dn=!un&&!cn&&!ln&&on[sn(278)](sn(275)),fn=(null===(rn=null==Bl?void 0:Bl[sn(262)])||void 0===rn?void 0:rn[sn(271)])||(null==Bl?void 0:Bl[sn(271)])||"";function _n(){const t=["2403660vsbxKa","includes","Firefox","653511krAkNS","Apple","63eEorAu","2iQvmqu","userAgentData","13393182jRLBxS","4fTXBZP","Win32","74923SyWRbn","1345hVdNEb","21688LwGppn","Windows","132498ZoOcLo","platform","Edg","RTCRtpScriptTransform","9372dNMWWf","Chrome","userAgent"];return(_n=function(){return t})()}const vn={supportsRtpScriptTransform:an,isFirefox:un,isSafari:cn,isEdge:ln,isChrome:dn,platform:fn,isWindows:fn===sn(269)||fn===sn(265)},gn=mn;function mn(t,e){const i=bn();return(mn=function(t,e){return i[t-=185]})(t,e)}!function(){const t=mn,e=bn();for(;;)try{if(-x(t(380))/1+-x(t(354))/2+-x(t(464))/3*(x(t(486))/4)+-x(t(253))/5+x(t(377))/6+x(t(321))/7*(-x(t(285))/8)+-x(t(444))/9*(-x(t(279))/10)==657542)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const pn=vn[gn(496)];function wn(t,e){const i=gn;let s=new j((0|t.byteLength)+(0|e[i(442)]));return s[i(311)](t,0),s[i(311)](e,0|t.byteLength),s}const yn=(t,e,i,s)=>{const n=gn,r=s[n(203)]||1;e*=r,i*=r;const o=(u=t)instanceof ArrayBuffer?u:u[gn(492)],h=(t[n(447)]||0)+t[n(442)],a=(t[n(447)]||0)+e;var u;let c=_[n(389)](0,_[n(487)](a,h)),l=_[n(487)](c+_[n(389)](i,0),h);return c/=r,l/=r,new s(o,c,l-c)};function bn(){const t=["[MSE] source buffer error","ManagedMediaSource","BYTES_PER_ELEMENT","types","ready","valid","Num frames in chunk: ","readBits","getTrackID","mvhd","parsePPS","encrypted","dependsOn","payload","len","moov","VMHD","mse","volume","h264","setUint16","tfdt","nextDts","avc1.","audioSampleAuxInfo","message","endMSE","width","hdlr","warn","traf","readBoolean","shift","mseReady","revokeObjectURL","smhd","dts","indexOf","<PROTECTINFO>","webkitsourceclose","onMSEClose","[H264Parser] IDR without SPS/PPS, not suitable for recovery",'VALUE="',"createObjectURL","</KID>","mdhd","SMHD","getFramePayload","tkhd","flush","clRtcDrmDebugLog","getBits","2598770DahMdb","dbgQueue","dispatch","DINF","http://schemas.microsoft.com/DRM/2007/03/PlayReadyHeader","isReady","sps","nalus","endOfStream","toString","UNKNOWN","Opus","minf","onError","stco","STSC","buffered","</KIDS>","initSegment","dinf","org.w3.clearkey","mp4track","keyFrame","units","mseEnded","videoSampleAuxInfo","41695210Plpuuo","splice","ended","bitLength","seq","url","8YyaFaO","com.apple.fps","[MSE] error: ","bitsAvailable","</WRMHEADER>","trex","setData","buffer error","slice","length","readUByte","mp4a","Unsupported DRM type ","mdia","fromCharCode",'<WRMHEADER xmlns="',"index","string","both","NDR","dOps","cenc","getPayload","bind","PPS","sourceBuffer","set","Checking codec","releaseBuffer","tenc","trak","flags",'/mp4; codecs="',"[H264Parser] Both IDR and non-IDR VCL NALUs found in the same frame","clRtcDrmCreateMediaDump","STSD","6352549TgZLxu","initBrowser","IDR","trun"," - ","start","mediaSource","startsWith","stype","readSPS","addEventListener","schi","encv","createElement","getVideoFrames","onReady","href","sourceopen","setUint32","vmhd","FTYP","schm","getData","toISOString","remuxer","track","skipScalingList","STSZ","getSize","addSourceBuffer","[MSE] buffer error:","appendBufferError","off","2392886zJoPkf","destroy","sdtp","audiosamplerate",": NRI: ","reportDiscontinuity","extractNALUs","No A/V data","pps","senc","saio","concat","config","ftyp","parseNAL","esds","error","feed","Browser does not support codec","4.3.0.0","skipUEG","mp4","end","2232924PKvVOf","updating","options","227868XbMqAn","prototype","createBuffer","info","MediaSource","timestamp","mvex","isfmb","opus","max","stsz","POSITIVE_INFINITY","saiz","timescale","call","encryption","height","jmuxer","bufferControllers","open","patchSampleAuxinfo","queue","stsd","onBufferError","frameCounter","ntype","remux","getPayloadSize","isSupported","</LA_URL>","waitingForIdr","box","idr"," samples - expected 1","tracks","stbl","getNri",'<KID ALGID="AESCTR" ',"download","readUInt","join","com.microsoft.playready.recommendation",'" version="',"remuxController","Received ","frma","resetTrack","disableRemotePlayback","</DATA>","mfhd","pssh","charCodeAt","drm","mediaDuration","video","readyToDecode","from","SPS","skipLZ","data","keySystem","[MSE] sourceclose","byteLength","STTS","9mESMVl","Buffered range ","samples","byteOffset","parseHeader","codec","node","audio","Failure: Browser doesn't support MSE/MMS","subarray","replaceAll","downloadToFile","onBuffer","skipBits","mdat","isKeyframe","moof","mode","push","STCO","9ffcUcC","listener","isReset","map","enca","type","<LA_URL>","parseSPS","getElementById","no video element were found to render, provide a valid video element","sinf","doAppend","HDLR_TYPES","videoElement","stts","keyId","trackTypes","TYPES","remove","size","AUD","src","1376748eVkTXq","min","tfhd","initialized","offAll","appendBuffer","buffer","nri","skipEG","isvcl","isSafari","isTypeSupported","readyState","abort","apply","reduce","assign","calculateExpectedSizeFromSai","duration","generatePlayReadyHeader","readUEG","onMSEOpen","sampleAuxInfo","SEI","irrecoverableError","channelCount","saiIvSize","stsc"];return(bn=function(){return t})()}function An(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=1/0),yn(t,e,i,j)}function Sn(t){const e=gn,i=Array[e(436)](t)[e(467)]((t=>t[e(431)](0)));return new j(i)}s[gn(455)]=(t,e,i)=>{void 0===i&&(i="application/octet-stream");const s=gn,n=h[s(334)]("a"),r=new Blob([t],{type:i});n[s(337)]=URL[s(244)](r),n[s(418)]=e,n.click(),URL[s(235)](n[s(337)])};class Tn{static get[gn(304)](){return 1}static get[gn(323)](){return 5}static get[gn(196)](){return 6}static get SPS(){return 7}static get PPS(){return 8}static get[gn(484)](){return 9}static get[gn(481)](){const t=gn;return{[Tn[t(323)]]:t(323),[Tn.SEI]:t(196),[Tn.SPS]:t(437),[Tn[t(309)]]:t(309),[Tn[t(304)]]:t(304),[Tn[t(484)]]:t(484)}}static type(t){const e=gn;return t[e(405)]in Tn[e(481)]?Tn[e(481)][t[e(405)]]:e(263)}toString(){const t=gn;return Tn[t(469)](this)+t(358)+this[t(416)]()}getNri(){return this[gn(493)]}[gn(469)](){return this[gn(405)]}[gn(459)](){const t=gn;return this[t(405)]===Tn[t(323)]}[gn(307)](){return this[gn(214)]}[gn(407)](){const t=gn;return this[t(214)][t(442)]}getSize(){return 4+this[gn(407)]()}[gn(343)](){const t=gn,e=new j(this.getSize());return new DataView(e.buffer)[t(339)](0,this.getSize()-4),e[t(311)](this[t(307)](),4),e}constructor(t){const e=gn;this.payload=t,this[e(493)]=(96&this.payload[0])>>5,this[e(405)]=31&this[e(214)][0],this[e(495)]=1==this.ntype||5==this[e(405)],this[e(329)]="",this[e(387)]=!1}}class kn{[gn(291)](t){const e=gn;this.data=t,this[e(301)]=0,this[e(282)]=8*t[e(442)]}get[gn(288)](){const t=gn;return this[t(282)]-this[t(301)]}skipBits(t){if(this[gn(288)]<t)return!1;this.index+=t}[gn(208)](t,e){return void 0===e&&(e=!0),this.getBits(t,this.index,e)}[gn(252)](t,e,i){void 0===i&&(i=!0);const s=gn;if(this.bitsAvailable<t)return 0;const n=e%8,r=this[s(439)][e/8|0]&255>>>n,o=8-n;if(o>=t)return i&&(this.index+=t),r>>o-t;{i&&(this.index+=o);const n=t-o;return r<<n|this[s(252)](n,e+o,i)}}[gn(438)](){const t=gn;let e;for(e=0;e<this.bitLength-this[t(301)];++e)if(0!==this.getBits(1,this[t(301)]+e,!1))return this.index+=e,e;return e}[gn(374)](){const t=gn;this[t(457)](1+this[t(438)]())}[gn(494)](){const t=gn;this[t(457)](1+this[t(438)]())}readUEG(){const t=gn,e=this[t(438)]();return this[t(208)](e+1)-1}readEG(){const t=this[gn(193)]();return 1&t?1+t>>>1:-1*(t>>>1)}readBoolean(){return 1===this[gn(208)](1)}[gn(295)](t){return void 0===t&&(t=1),this[gn(208)](8*t)}readUShort(){return this[gn(208)](16)}[gn(419)](){return this[gn(208)](32)}constructor(t){const e=gn;this[e(439)]=t,this[e(301)]=0,this.bitLength=8*t[e(442)]}}class En{static[gn(360)](t,e){const i=gn;let s=[],n=!1,r=!1,o=!1,h=!1,a=0,u=0,c=0,l=[];for(;a<=t.byteLength;){if(a<t.byteLength){const e=t[a++];0!==e?(1===e&&u>1&&(c=u>2?4:3,l.push(a)),u=0):++u}else c=0,l.push(a++);if(l.length>1){const i=l.shift(),d=l[0]-c;if(i<d){let c=!1;const l=31&t[i];if(l===Tn.NDR?r=!0:l===Tn.IDR?n=!0:l===Tn.SPS?(c=o,o=!0):l===Tn.PPS&&(c=h,h=!0),!c)if(!e||l!==Tn.NDR&&l!==Tn.IDR)s.push(t.subarray(i,d));else{const e=new j(d-i);let n=0;for(a=i,u=0;a<d;){let i=t[a++];u>1&&3===i&&(u=0,i=t[a++]),0!==i?u=0:++u,e[n++]=i}s.push(e.subarray(0,n))}}}}let d=!0,f=!1;return r||n?r&&n&&(console[i(230)](i(318)),d=!1):(console[i(230)]("[H264Parser] No VCL NALUs found"),d=!1),n&&(o&&h?f=!0:console[i(230)](i(242))),{valid:d,idr:f,nalus:s}}static skipScalingList(t,e){let i,s=8,n=8;for(let r=0;r<e;r++)0!==n&&(i=t.readEG(),n=(s+i+256)%256),s=0===n?s:n}static[gn(330)](t){const e=gn;let i,s,n,r,o,h,a=new kn(t),u=0,c=0,l=0,d=0,f=1;if(a[e(295)](),i=a.readUByte(),a[e(208)](5),a[e(457)](3),a.readUByte(),a[e(374)](),100===i||110===i||122===i||244===i||44===i||83===i||86===i||118===i||128===i){var v=a[e(193)]();if(3===v&&a[e(457)](1),a.skipUEG(),a[e(374)](),a[e(457)](1),a[e(232)]()){h=3!==v?8:12;for(let t=0;t<h;++t)a[e(232)]()&&(t<6?En[e(347)](a,16):En[e(347)](a,64))}}a[e(374)]();var g=a.readUEG();if(0===g)a[e(193)]();else if(1===g){a.skipBits(1),a[e(494)](),a[e(494)](),s=a[e(193)]();for(let t=0;t<s;++t)a.skipEG()}if(a.skipUEG(),a[e(457)](1),n=a[e(193)](),r=a.readUEG(),o=a[e(208)](1),0===o&&a[e(457)](1),a[e(457)](1),a[e(232)]()&&(u=a[e(193)](),c=a[e(193)](),l=a[e(193)](),d=a.readUEG()),a.readBoolean()){if(a[e(232)]()){let t;switch(a[e(295)]()){case 1:t=[1,1];break;case 2:t=[12,11];break;case 3:t=[10,11];break;case 4:t=[16,11];break;case 5:t=[40,33];break;case 6:t=[24,11];break;case 7:t=[20,11];break;case 8:t=[32,11];break;case 9:t=[80,33];break;case 10:t=[18,11];break;case 11:t=[15,11];break;case 12:t=[64,33];break;case 13:t=[160,99];break;case 14:t=[4,3];break;case 15:t=[3,2];break;case 16:t=[2,1];break;case 255:t=[a[e(295)]()<<8|a.readUByte(),a[e(295)]()<<8|a[e(295)]()]}t&&t[0]>0&&t[1]>0&&(f=t[0]/t[1])}a.readBoolean()&&a[e(457)](1),a[e(232)]()&&(a.skipBits(4),a[e(232)]()&&a[e(457)](24)),a.readBoolean()&&(a.skipUEG(),a[e(374)]()),a.readBoolean()&&(a[e(419)](),a[e(419)](),a.readBoolean())}return{width:_.ceil((16*(n+1)-2*u-2*c)*f),height:(2-o)*(r+1)*16-(o?2:4)*(l+d)}}static[gn(448)](t){const e=gn;let i=new kn(t[e(307)]());i.readUByte(),t.isfmb=0===i[e(193)](),t.stype=i[e(193)]()}[gn(471)](t){const e=gn;var i=En[e(330)](new j(t));this[e(346)][e(228)]=i[e(228)],this[e(346)][e(396)]=i[e(396)],this[e(346)].sps=[new j(t)],this[e(346)][e(449)]=e(224);let s=new DataView(t.buffer,t[e(447)]+1,4);for(let t=0;t<3;++t){var n=s.getUint8(t)[e(262)](16);n.length<2&&(n="0"+n),this.track[e(449)]+=n}}[gn(211)](t){this[gn(346)].pps=[new j(t)]}[gn(368)](t){const e=gn;if(!t)return!1;let i=!1;switch(t.type()){case Tn[e(323)]:case Tn[e(304)]:i=!0;break;case Tn[e(309)]:!this[e(346)][e(362)]&&(this.parsePPS(t[e(307)]()),!this[e(345)][e(435)]&&this[e(346)][e(362)]&&this[e(346)][e(259)]&&(this[e(345)][e(435)]=!0)),i=!0;break;case Tn[e(437)]:!this[e(346)][e(259)]&&(this[e(471)](t[e(307)]()),!this[e(345)][e(435)]&&this[e(346)][e(362)]&&this.track.sps&&(this[e(345)][e(435)]=!0)),i=!0;break;case Tn[e(484)]:break;case Tn[e(196)]:i=!0}return i}constructor(t){const e=gn;this.remuxer=t,this[e(346)]=t[e(274)]}}class xn{on(t,e){const i=gn;return!this[i(465)][t]&&(this[i(465)][t]=[]),this[i(465)][t][i(462)](e),!0}[gn(353)](t,e){const i=gn;if(this[i(465)][t]){var s=this.listener[t][i(238)](e);return s>-1&&this[i(465)][t][i(280)](s,1),!0}return!1}[gn(490)](){this[gn(465)]={}}[gn(255)](t,e){const i=gn;return!!this.listener[t]&&(this[i(465)][t][i(467)]((t=>{t[i(187)](null,[e])})),!0)}constructor(t){const e=gn;this[e(465)]={},this[e(469)]=""|t}}class In{static[gn(411)](t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];const n=gn;let r,o=8,h=i.length,a=h;for(;h--;)i[h]&&(o+=i[h].byteLength);for(r=new j(o),r[0]=o>>>24,r[1]=o>>>16&255,r[2]=o>>>8&255,r[3]=255&o,r[n(311)](t,4),h=0,o=8;h<a;++h)i[h]&&(r[n(311)](i[h],o),o+=i[h][n(442)]);return r}hdlr(t){const e=gn;return In[e(411)](In[e(204)][e(229)],In[e(476)][t])}mdat(t){const e=gn;return In.box(In.types[e(458)],t)}[gn(246)](t,e){const i=gn;return In.box(In[i(204)][i(246)],new j([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,0,0,0,0,85,196,0,0]))}[gn(298)](t){const e=gn;return In[e(411)](In[e(204)][e(298)],this[e(246)](t[e(393)],t.duration),this[e(229)](t[e(469)]),this[e(265)](t))}[gn(429)](t){const e=gn;return In[e(411)](In.types[e(429)],new j([0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[gn(265)](t){const e=gn;return t[e(469)]===e(451)?In[e(411)](In[e(204)][e(265)],In.box(In[e(204)][e(236)],In[e(247)]),In.DINF,this[e(415)](t)):In[e(411)](In[e(204)][e(265)],In[e(256)],this[e(415)](t),In[e(411)](In[e(204)][e(340)],In[e(217)]))}[gn(460)](t,e,i){const s=gn;return In[s(411)](In[s(204)][s(460)],this[s(429)](t),this.traf(i,e))}moov(t,e,i){const s=gn;let n=t[s(294)],r=[];for(;n--;)r[n]=this[s(315)](t[n]);return In[s(411)][s(187)](null,[In[s(204)].moov,this[s(210)](i,e),this[s(430)](t)].concat(r)[s(365)](this[s(386)](t)))}mvex(t){const e=gn;let i=t[e(294)],s=[];for(;i--;)s[i]=this[e(290)](t[i]);return In.box[e(187)](null,[In[e(204)].mvex].concat(s))}[gn(210)](t,e){const i=gn;let s=new j([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return In[i(411)](In[i(204)].mvhd,s)}[gn(356)](t){const e=gn;let i=t[e(446)]||[],s=new j(4+i.length);for(let t=0;t<i.length;t++){const n=i[t][e(316)];s[t+4]=n[e(213)]<<4|n.isDependedOn<<2|n.hasRedundancy}return In.box(In.types.sdtp,s)}[gn(415)](t){const e=gn;return In[e(411)](In.types[e(415)],this[e(402)](t),In.box(In.types[e(478)],In[e(443)]),In.box(In.types[e(200)],In[e(268)]),In[e(411)](In[e(204)][e(390)],In[e(348)]),In[e(411)](In[e(204)][e(267)],In[e(463)]))}[gn(333)](t){const e=gn;let i,s,n,r=[],o=[];for(i=0;i<t[e(259)][e(294)];i++)s=t[e(259)][i],n=s[e(442)],r.push(n>>>8&255),r[e(462)](255&n),r=r[e(365)](Array[e(381)].slice.call(s));for(i=0;i<t.pps.length;i++)s=t.pps[i],n=s[e(442)],o.push(n>>>8&255),o[e(462)](255&n),o=o[e(365)](Array[e(381)][e(293)][e(394)](s));const h=In[e(411)](In[e(204)].avcC,new j([1,r[3],r[4],r[5],255,224|t[e(259)][e(294)]][e(365)](r)[e(365)]([t[e(362)].length]).concat(o))),a=t[e(228)],u=t[e(396)],c=In[e(411)](In[e(204)][e(474)],In[e(411)](In.types[e(425)],new j([97,118,99,49])),In[e(411)](In[e(204)][e(342)],new j([0,0,0,0,...Sn(this[e(432)][e(366)].video[e(395)]),0,1,0,0])),In[e(411)](In[e(204)].schi,this[e(314)]("video")));return In[e(411)](In[e(204)][e(333)],new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>>8&255,255&a,u>>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),h,c)}[gn(369)](t){const e=gn;let i=t.config[e(442)],s=new j(26+i+3);return s[e(311)]([0,0,0,0,3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5,i]),s[e(311)](t[e(366)],26),s[e(311)]([6,1,2],26+i),s}[gn(296)](t){const e=gn,i=t.audiosamplerate;return In[e(411)](In[e(204)][e(296)],new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[e(198)],0,16,0,0,0,0,i>>>8&255,255&i,0,0]),In[e(411)](In[e(204)][e(369)],this.esds(t)))}dOps(t){const e=gn,i=t[e(357)];return new j([0,t[e(198)],1,56,0,0,i>>>8&255,255&i,0,0,0])}[gn(264)](t){const e=gn,i=t[e(357)];return In[e(411)](In[e(204)].Opus,new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[e(198)],0,16,0,0,0,0,i>>>8&255,255&i,0,0]),In[e(411)](In.types[e(305)],this[e(305)](t)))}[gn(468)](t){const e=gn,i=In[e(411)](In[e(204)].dOps,this[e(305)](t)),s=In[e(411)](In[e(204)].sinf,In[e(411)](In[e(204)].frma,new j([79,112,117,115])),In[e(411)](In[e(204)][e(342)],new j([0,0,0,0,...Sn(this.drm[e(366)].audio[e(395)]),0,1,0,0])),In[e(411)](In[e(204)][e(332)],this[e(314)](e(451)))),n=t[e(357)];return In[e(411)](In[e(204)][e(468)],new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[e(198)],0,16,0,0,0,0,n>>>8&255,255&n,0,0]),i,s)}[gn(402)](t){const e=gn;return t[e(469)]===e(451)?In.box(In[e(204)][e(402)],In[e(320)],t[e(212)]?this[e(468)](t):this[e(264)](t)):In.box(In[e(204)][e(402)],In[e(320)],this.encv(t))}[gn(249)](t){const e=gn,i=t.id,s=t[e(191)],n=t.width,r=t[e(396)],o=t[e(219)];return In[e(411)](In[e(204)][e(249)],new j([0,0,0,7,0,0,0,0,0,0,0,0,i>>>24,i>>>16&255,i>>>8&255,255&i,0,0,0,0,s>>>24,s>>>16&255,s>>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,255&o,o%1*10&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>>8&255,255&n,0,0,r>>>8&255,255&r,0,0]))}[gn(231)](t,e){var i;const s=gn,n=t.id,r=t[s(446)][0][s(483)],o=t[s(446)][0][s(191)],h=t[s(446)][0].flags,a=In[s(411)](In[s(204)][s(488)],new j([0,2,0,58,n>>>24,n>>>16&255,n>>>8&255,255&n,0,0,0,1,o>>>24,n>>>16&255,o>>>8&255,255&o,r>>>24,r>>>16&255,r>>>8&255,255&r,0,h.isNonSync,0,0])),u=In[s(411)](In[s(204)][s(222)],new j([0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e]));if(t[s(212)]){let e,n;if(t[s(469)]===s(434)?(e=!0,n=this[s(199)][s(434)]+(null==(i=t[s(446)][0].sampleAuxInfo)?void 0:i.byteLength)):(e=!1,n=this[s(199)][s(451)]),n>0){const i=this[s(392)](n),r=this[s(363)](t[s(446)],e),o=i.length+20+r.length+a[s(294)]+u[s(294)]+8+16+8+8,h=this[s(324)](t,o);return In[s(411)](In[s(204)][s(231)],a,u,h,i,this[s(364)](o-r[s(294)]+h[s(294)]+8),r)}{const e=this[s(363)](null,!1),i=e[s(294)]+a[s(294)]+u.length+8+16+8+8,n=this[s(324)](t,i);return In[s(411)](In[s(204)][s(231)],a,u,n,e)}}return In.box(In.types.traf,a,u,this[s(324)](t,a[s(294)]+u[s(294)]+8+16+8+8))}[gn(315)](t){const e=gn;return t[e(191)]=t[e(191)]||4294967295,In.box(In[e(204)][e(315)],this[e(249)](t),this[e(298)](t))}trex(t){const e=gn,i=t.id;return In[e(411)](In[e(204)][e(290)],new j([0,0,0,0,i>>>24,i>>>16&255,i>>>8&255,255&i,0,0,0,1,0,0,0,16,0,0,0,0,0,0,0,0]))}trun(t,e){const i=gn;let s=(t.samples||[]).length,n=new j(12);return e+=20,n[i(311)]([0,0,0,1,s>>>24,s>>>16&255,s>>>8&255,255&s,e>>>24,e>>>16&255,e>>>8&255,255&e],0),In.box(In.types[i(324)],n)}[gn(192)](t,e){const i=gn,s=i(373),n=i(257),r=function(t){const e=function(t){const e=gn;let i="";for(let s=0;s<t.length;s+=16e3){const n=t[e(453)](s,s+16e3);i+=String[e(299)][e(187)](null,n)}return i}(An(t));return btoa(e)}(function(t){const e=gn,i=[];return i[e(462)](t[3]),i[e(462)](t[2]),i[e(462)](t[1]),i[e(462)](t[0]),i.push(t[5]),i.push(t[4]),i.push(t[7]),i.push(t[6]),(t=An(t))[e(311)](i,0),t}(t));return An(function(t,e){const i=gn,s=new j(2*t.length),n=new DataView(s[i(492)]);for(let e=0;e<t[i(294)];++e){const s=t[i(431)](e);n[i(221)](2*e,s,true)}return s[i(492)]}([i(300)+n+i(422)+s+'">',"<DATA>",i(239),"<KIDS>",i(417),i(243)+r+'"',">",i(245),i(270),"</PROTECTINFO>",e?i(470)+e+i(409):"",i(428),i(289)][i(420)]("")))}[gn(430)](t){const e=gn;if(this[e(432)][e(440)][e(328)]("com.widevine"))return In[e(411)](In[e(204)][e(430)],new j([0,0,0,0,237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237,0,0,0,18,18,16,...this[e(432)][e(366)][t[0][e(469)]][e(479)]]));if(this[e(432)].keySystem===e(421)){const i=this[e(192)](this[e(432)][e(366)][t[0].type][e(479)],this.drm.licenseUrl),s=i[e(442)];return In[e(411)](In[e(204)][e(430)],new j([0,0,0,0,154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149,s>>>24,s>>>16&255,s>>>8&255,255&s,...i]))}return this[e(432)][e(440)]===e(273)?In[e(411)](In[e(204)][e(430)],new j([1,0,0,0,16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75,0,0,0,1,...this.drm.config[t[0][e(469)]][e(479)],0,0,0,0])):this[e(432)][e(440)]===e(286)?null:void console[e(370)](e(297)+this[e(432)].keySystem)}[gn(314)](t){const e=gn;let i,s,n=this[e(432)][e(366)][t];return"cbcs"===n.encryption?(i=new j([16,...n.iv]),s=25):(i=new j([]),s=0),In[e(411)](In[e(204)].tenc,new j([1,0,0,0,0,s,1,this[e(199)][t],...n[e(479)],...i]))}[gn(392)](t){return In[gn(411)](In.types.saiz,new j([0,0,0,0,t,0,0,0,1]))}[gn(364)](t){const e=gn;return In[e(411)](In[e(204)][e(364)],new j([0,0,0,0,0,0,0,1,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[gn(363)](t,e){const i=gn;let s=null;return t&&(1!==t[i(294)]&&console[i(370)](i(424)+t[i(294)]+i(413)),s=t[0][i(195)]),s&&s[i(442)]?In[i(411)](In[i(204)][i(363)],new j([0,0,0,e?2:0,0,0,0,1,...s])):In[i(411)](In[i(204)][i(363)],new j([0,0,0,0,0,0,0,1]))}[gn(271)](t,e,i){const s=gn,n=this[s(216)](t,e,i);let r=new j(In[s(341)][s(442)]+n.byteLength);return r.set(In[s(341)]),r[s(311)](n,In[s(341)].byteLength),r}constructor(t){var e,i;const s=gn;this[s(432)]=t,this[s(199)]={video:(null==(e=t[s(366)][s(434)])?void 0:e.encryption)===s(306)?16:0,audio:(null==(i=t[s(366)][s(451)])?void 0:i.encryption)===s(306)?16:0},In.types={avc1:[],encv:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],Opus:[],dOps:[],enca:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],pssh:[],sinf:[],frma:[],schm:[],schi:[],tenc:[],saiz:[],saio:[],senc:[]};for(let t in In[s(204)])In[s(204)][t]=[t[s(431)](0),t[s(431)](1),t.charCodeAt(2),t[s(431)](3)];const n=new j([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new j([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);In[s(476)]={video:n,audio:r};const o=new j([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),h=new j([0,0,0,0,0,0,0,0]);In[s(443)]=In[s(268)]=In[s(463)]=h,In[s(348)]=new j([0,0,0,0,0,0,0,0,0,0,0,0]),In[s(217)]=new j([0,0,0,1,0,0,0,0,0,0,0,0]),In.SMHD=new j([0,0,0,0,0,0,0,0]),In[s(320)]=new j([0,0,0,0,0,0,0,1]);const a=new j([105,115,111,109]),u=new j([97,118,99,49]),c=new j([0,0,0,1]);In[s(341)]=In[s(411)](In[s(204)][s(367)],a,c,a,u),In.DINF=In[s(411)](In[s(204)][s(272)],In[s(411)](In[s(204)].dref,o))}}let Rn=1;class Cn{static[gn(209)](){return Rn++}[gn(250)](){const t=gn;this[t(274)][t(215)]=0,this.mp4track[t(446)]=[]}[gn(258)](){const t=gn;return!(!this.readyToDecode||!this[t(446)][t(294)])}constructor(){this[gn(283)]=1}}class Pn extends Cn{resetTrack(){const t=gn;this[t(283)]=1,this[t(223)]=0,this[t(237)]=0}[gn(406)](t,e,i){const s=gn;if(t.length>0)for(let n=0;n<t[s(294)];n++){let r=t[n],o=r[s(276)],h=o[s(442)];this.samples.push({units:o,size:h,duration:r.duration,sampleAuxInfo:e,timestamp:i}),this[s(274)][s(215)]+=h}}[gn(248)](){const t=gn;if(!this[t(446)])return null;let e,i=this[t(274)][t(446)];for(;this.samples[t(294)];){let s=this[t(446)][t(233)](),n=(1e3*s[t(385)]|0)-this.nextDts|0;n<5&&(n=5),this.dts=this.nextDts,this[t(223)]+=n,e={size:s.size,duration:n,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1},sampleAuxInfo:s[t(195)]};let r=new j(s.size);return r[t(311)](s.units,0),i.push(e),new j(r.buffer,0,s[t(483)])}return null}constructor(t){const e=gn;super(),this[e(435)]=!0,this[e(223)]=0,this[e(237)]=0,this[e(274)]={id:Cn[e(209)](),type:"audio",channelCount:2,audiosamplerate:48e3,len:0,fragmented:!0,timescale:t,duration:t,samples:[],codec:e(388),encrypted:!0},this[e(446)]=[]}}class Dn extends Cn{[gn(426)](){const t=gn;this[t(283)]=1,this.readyToDecode=!1,this[t(274)].sps="",this[t(274)][t(362)]="",this[t(223)]=0,this[t(237)]=0}[gn(406)](t,e,i){const s=gn;for(let n of t){let t=[],r=0;for(let e of n[s(276)])this.h264[s(368)](e)&&(t[s(462)](e),r+=e.getSize());t[s(294)]>0&&this[s(435)]&&(this[s(274)][s(215)]+=r,this[s(446)][s(462)]({units:t,size:r,keyFrame:n.keyFrame,duration:n[s(191)],sampleAuxInfo:e,timestamp:i}))}}[gn(248)](){const t=gn;if(!this[t(258)]()||!this.samples)return null;let e,i=this[t(274)][t(446)],n=this.samples[t(233)](),r=n[t(276)],o=(1e3*n.timestamp|0)-this[t(223)]|0;o<5&&(o=5),s[t(251)]&&o>5e3&&console[t(383)]("timestamp gap: "+(o/1e3|0)+" s"),this[t(237)]=this[t(223)],this.nextDts+=o,e={size:n[t(483)],duration:o,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:n[t(275)]?0:1,dependsOn:n.keyFrame?2:1},sampleAuxInfo:n[t(195)]};let h=0;for(const e of r)h+=e[t(349)]();let a=0,u=new j(h);for(const e of r)u[t(311)](e[t(343)](),a),a+=e[t(349)]();return i[t(462)](e),new j(u[t(492)],0,h)}constructor(t,e){const i=gn;super(),this[i(435)]=!1,this.nextDts=0,this[i(237)]=0,this[i(477)]=e,this.mp4track={id:Cn[i(209)](),type:i(434),len:0,fragmented:!0,sps:"",pps:"",width:0,height:0,timescale:t,duration:t,samples:[],encrypted:!0},this[i(446)]=[],this[i(220)]=new En(this)}}class Nn extends xn{addTrack(t){const e=gn;(t===e(434)||"both"===t)&&(this[e(414)][e(434)]=new Dn(this[e(393)],this.videoElement),this[e(480)][e(462)](e(434))),(t===e(451)||t===e(303))&&(this[e(414)][e(451)]=new Pn(this.timescale),this[e(480)][e(462)](e(451)))}reset(){const t=gn;for(let e of this[t(480)])this[t(414)][e][t(426)]();this[t(489)]=!1}[gn(355)](){const t=gn;this[t(414)]={},this[t(490)]()}[gn(250)](){const t=gn;if(this[t(489)])for(let e of this[t(480)]){let i=this[t(414)][e];for(;;){let s=i.getFramePayload();if(!s||!s[t(442)])break;let n={type:e,payload:wn(this[t(375)][t(460)](i[t(283)]++,i[t(237)],i[t(274)]),this[t(375)][t(458)](s)),dts:i[t(237)]};this[t(255)](t(492),n),i[t(250)]()}}else this[t(258)]()&&(this[t(255)](t(205)),this[t(271)](),this[t(489)]=!0,this[t(250)]())}initSegment(){const t=gn;for(let e of this[t(480)]){let i=this[t(414)][e],s={type:e,payload:this[t(375)][t(271)]([i[t(274)]],this[t(433)],this[t(393)])};this.dispatch(t(492),s)}}isReady(){const t=gn;for(let e of this.trackTypes)if(!this[t(414)][e][t(435)]||!this[t(414)][e].samples[t(294)])return!1;return!0}[gn(406)](t){const e=gn;for(let i of this[e(480)]){let s=t[i];s.length>0&&this[e(414)][i][e(406)](s,i===e(451)?t[e(225)]:t.videoSampleAuxInfo,t[e(385)])}this.flush()}constructor(t,e){const i=gn;super(i(345)),this.initialized=!1,this.trackTypes=[],this[i(414)]={},this[i(393)]=1e3,this.mediaDuration=0,this[i(477)]=t,this[i(375)]=e}}class Mn extends xn{[gn(355)](){const t=gn;this[t(401)]=null,this[t(254)]=null;try{this.sourceBuffer&&(this[t(310)][t(186)](),this[t(218)].removeSourceBuffer(this[t(310)]),this[t(310)]=null)}catch(t){}this.offAll()}[gn(475)](){const t=gn;if(this.queue[t(294)]&&this[t(310)]&&!this[t(310)].updating){if(this[t(310)].buffered[t(294)]>1){for(let e=0;e<this[t(310)].buffered[t(294)];++e){const i=e<this[t(310)].buffered[t(294)]-1;s[t(251)]&&console[t(383)](t(445)+e+(i?" (remove)":"")+": "+this[t(310)][t(269)][t(326)](e)+t(325)+this[t(310)][t(269)][t(376)](e)),i&&this.sourceBuffer[t(482)](this[t(310)][t(269)].start(e),this[t(310)].buffered[t(376)](e))}if(this.sourceBuffer[t(378)])return}try{this[t(310)][t(491)](this[t(401)]),this.queue=new j}catch(e){this[t(255)](t(370),{type:this[t(469)],name:t(352),error:e})}}}[gn(371)](t){const e=gn;if(this[e(254)]&&(this.dbgQueue=wn(this[e(254)],t),100==++this[e(404)])){const t=(new Date)[e(344)]().substring(0,19)[e(454)](":","-"),i=this.type+"-"+t+".mp4";s.downloadToFile(this[e(254)],i),this[e(254)]=null}this[e(197)]||(this[e(401)]=wn(this[e(401)],t)),this.doAppend()}constructor(t,e,i){const n=gn;super(n(492)),this[n(469)]=e,this.queue=new j,s[n(319)]&&(this[n(254)]=new j,this[n(404)]=0),this.sourceBuffer=t,this[n(218)]=i,this[n(197)]=!1,this[n(310)].addEventListener(n(370),(t=>{const e=n;console.warn(e(201),t,this.type),this[e(197)]=!0,this[e(255)](e(370),{type:this[e(469)],name:"buffer",error:e(292)})}))}}class Ln extends xn{static isSupported(t){const e=gn;return s[e(202)]?s.ManagedMediaSource[e(497)](t):!!s[e(384)]&&s.MediaSource[e(497)](t)}[gn(322)](){const t=gn;typeof this.options.node===t(302)&&""==this.options[t(450)]&&console[t(370)](t(473)),this[t(234)]=!1,this.setupMSE()}setupMSE(){const t=gn;if(!s[t(202)]&&!s[t(384)])throw t(452);s.ManagedMediaSource?(this.node[t(427)]=!0,this[t(327)]=new ManagedMediaSource):this[t(327)]=new MediaSource,this[t(284)]=URL[t(244)](this[t(327)]),this.node[t(485)]=this[t(284)],this[t(277)]=!1,this[t(327)][t(331)](t(338),this.onMSEOpen[t(308)](this)),this.mediaSource.addEventListener("sourceclose",this[t(241)][t(308)](this)),this[t(327)][t(331)]("webkitsourceopen",this[t(194)][t(308)](this)),this.mediaSource[t(331)](t(240),this[t(241)].bind(this)),this[t(327)][t(331)]("error",(function(e){const i=t;console[i(370)](i(287),e[i(226)])}))}[gn(227)](){const t=gn;if(!this[t(277)])try{this.mseEnded=!0,this[t(327)][t(185)]===t(399)&&this[t(327)][t(261)]()}catch(e){console[t(370)]("mediasource is not available to end: ",e)}}[gn(359)](){this[gn(410)]=!0}[gn(371)](t){const e=gn;let i={video:[],audio:[]};if(this[e(197)]||this[e(277)]||!t||!this[e(423)])return-1;if(t[e(434)]){i.timestamp=t.timestamp;const s=this[e(190)](t.videoSampleAuxInfo,this.mp4[e(199)][e(434)]),n=s!=t[e(434)][e(442)];let r=En[e(360)](t[e(434)],n);if(!r[e(206)]||r[e(260)].length<1)return 0;if(this.waitingForIdr){if(!r[e(412)])return 0;this[e(410)]=!1}if(!pn&&t[e(278)]){const i=r[e(260)][e(188)](((t,i)=>t+4+i[e(442)]),0);i!==s&&this[e(400)](t[e(278)],this.mp4[e(199)][e(434)],i-s)}i[e(434)]=this[e(335)](r[e(260)]),i[e(278)]=t[e(278)]}return t[e(451)]&&(i[e(385)]=t[e(385)],i[e(451)]=[{units:t.audio}],i.audioSampleAuxInfo=t[e(225)]),t[e(434)]||t[e(451)]?(this[e(423)][e(406)](i),0):(console.error(e(361)),0)}[gn(335)](t){const e=gn;let i=[],s=[],n=!1,r=!1;for(let o of t){let t=new Tn(o);t.type()!==Tn.IDR&&t[e(469)]()!==Tn.NDR||En[e(448)](t),i[e(294)]&&r&&(t[e(387)]||!t[e(495)])&&(s[e(462)]({units:i,keyFrame:n}),i=[],n=!1,r=!1),i[e(462)](t),n=n||t[e(459)](),r=r||t[e(495)]}if(i[e(294)])if(r)s[e(462)]({units:i,keyFrame:n});else{let t=s[e(294)]-1;t>=0&&(s[t].units=s[t][e(276)].concat(i))}return 1!==s[e(294)]&&console[e(230)](e(207)+s[e(294)]),s}[gn(190)](t,e){const i=gn;if(!t)return 0;const s=(t[0]<<8)+t[1],n=e+2+4;let r=0,o=2;for(;0<s&&o+n<=t[i(442)];){o+=e;const i=(t[o]<<8)+t[o+1],s=(t[o+2]<<24)+(t[o+3]<<16)+(t[o+4]<<8)+t[o+5];o+=6,r+=i+s}return r}patchSampleAuxinfo(t,e,i){const s=gn;let n=2;if(0<(t[0]<<8)+t[1]&&n+(e+2+4)<=t[s(442)]){n+=e;let s=(t[n]<<8)+t[n+1];s+=i,s>=0&&(t[n]=s>>>8&255,t[n+1]=255&s)}return 0}[gn(382)](){const t=gn;if(this[t(234)]&&this[t(423)]&&this[t(423)].isReady()&&!this.bufferControllers){this.bufferControllers={};for(let e in this[t(423)][t(414)]){let i=this[t(423)][t(414)][e];const n="".concat(e,t(317))[t(365)](i[t(274)][t(449)],'"');if(s.clRtcDrmDebugLog&&console[t(383)](t(312),n),!Ln[t(408)](n))return console[t(370)](t(372)),!1;let r=this[t(327)][t(350)](n);this[t(398)][e]=new Mn(r,e,this[t(327)]),this.bufferControllers[e].on(t(370),this[t(403)][t(308)](this))}}}[gn(313)](){const t=gn;for(let e in this[t(398)])this[t(398)][e].doAppend()}onBuffer(t){const e=gn;this[e(234)]&&this[e(398)]&&this[e(398)][t.type]&&this[e(398)][t[e(469)]][e(371)](t[e(214)])}[gn(194)](){const t=gn;s[t(251)]&&console.info("[MSE] sourceopen"),this[t(327)][t(185)]!==t(281)&&(this.mediaSource.duration=Number[t(391)],this[t(234)]=!0,"function"==typeof this[t(379)][t(336)]&&this[t(379)].onReady[t(394)](null,this[t(466)]),URL[t(235)](this.url),this[t(382)]())}[gn(241)](){const t=gn;s.clRtcDrmDebugLog&&console[t(383)](t(441)),this.mseReady=!1,this[t(227)]()}[gn(403)](t){const e=gn;console.warn(e(351),t),this.irrecoverableError=!0,this[e(227)](),"function"==typeof this[e(379)][e(266)]&&this[e(379)][e(266)][e(394)](null,t)}constructor(t){const e=gn;super(e(397)),this[e(197)]=!1,this[e(410)]=!0,this[e(466)]=!1,this[e(234)]=!1,this.mseEnded=!1,this[e(379)]=w[e(189)]({},{node:"",mode:"video",debug:!1,onReady:function(){},onError:function(t){}},t),this[e(450)]=typeof this.options[e(450)]===e(302)?h[e(472)](this.options.node):this[e(379)].node,this[e(432)]=t.drm,this.mp4=new In(this.drm),this[e(423)]=new Nn(this.node,this[e(375)]),this[e(423)].addTrack(this[e(379)][e(461)]),this[e(423)].on(e(492),this[e(456)].bind(this)),this[e(423)].on(e(205),this[e(382)][e(308)](this)),this.initBrowser()}}function Bn(t,e){const i=On();return(Bn=function(t,e){return i[t-=222]})(t,e)}function On(){const t=["Sv","1634635aeNfVS","4rWkceo","1051qHPzyB","314juHkBI","7752096GfpyFE","1023208nKrJjX","2137269uUqtNM","303058KNxeBb","1097196nHglzA"];return(On=function(){return t})()}!function(){const t=Bn,e=On();for(;;)try{if(x(t(228))/1*(-x(t(229))/2)+-x(t(222))/3*(x(t(227))/4)+x(t(226))/5+x(t(224))/6+x(t(223))/7+-x(t(231))/8+x(t(230))/9==409100)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const Fn=Vn;function Vn(t,e){const i=Zn();return(Vn=function(t,e){return i[t-=460]})(t,e)}!function(){const t=Vn,e=Zn();for(;;)try{if(-x(t(471))/1*(-x(t(474))/2)+x(t(479))/3+x(t(473))/4*(x(t(461))/5)+x(t(487))/6+-x(t(467))/7+-x(t(482))/8+-x(t(464))/9==139726)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const Wn="CrsCCAMSEKDc0WAwLAQT1SB2ogyBJEwYv4Tx7gUijgIwggEKAoIBAQC8Xc/GTRwZDtlnBThq8"+Fn(462)+"wyoYOE+M/t1oIbccwlTQ7o+BpV1X6TB7fxFyx1jsBtRsBWphU65w121zqmSiwzZzJ4xsXVQCJ"+Fn(460)+Fn(476)+Fn(480)+Fn(484)+Fn(485)+"7hyskG5ZLAyJMzTvgnV3D8/I5Y6mCFBPb/+/Ri+9bEvquPF3Ff9ip3yEHu9mcQeEYCeGe9zR/27eI5MATX39gYtCnn7dDXVxo4/rCYK0A4VemC3HRai2X3pSGcsKY7+6we7h4IycjqtuGtYg8A"+Fn(475)+"RL9KsD0v7ysBQVdUXEbJotcFz71tI5qc3jwr6GjYIPA3VzusD17PN6AGQniMwxJV12z/EgnUo"+Fn(477),Un=j[Fn(478)](s[Fn(470)](Wn),(t=>t.charCodeAt(0)));class Gn{[Fn(469)](){return this[Fn(488)]}[Fn(483)](){const t=Fn;switch(this[t(488)]){case t(489):return"https://lic.staging.drmtoday.com";case t(465):return t(481);default:return t(466)}}certificate(){return Un}constructor(t){this[Fn(488)]=t}}function Zn(){const t=["development","https://lic.drmtoday.com","462553oMrSQp","Staging","toString","atob","20047HjYCpd","Development","52chMPdC","6mbMcSk","baigovcoURAZcr1d/G0rpREjLdVLG0Gjqk63Gx688W5gh3TKemsK3R1jV0dOfj3e6uV/kTpsN","+vwmV2/NJWxKqHBKdL9JqvOnNiQUF0hDI7Wf8Wb63RYSXKE27Ky31hKgx1wuq7TTWkA+kHnJT","pcFB13osydpD2AaDsgWo5RWJcNf+fzCgtUQx/0Au9+xVm5LQBdv8Ja4f2oiHN3dw","from","146355HhTpSB","UrTEfQxfPR4dJTquE+IDLAi5yeVVxzbAgMBAAE6DGNhc3RsYWJzLmNvbUABEoADMmGXpXg/0q","https://lic.test.drmtoday.com","501688OkVRMl","baseUrl","xUuwokpsqVIHZrJfu62ar+BF8UVUKdK5oYQoiTZd9OzK3kr29kqGGk3lSgM0/p499p/FUL8oH","HzgsJ7Hajdsyzn0Vs3+VysAgaJAkXZ+k+N6Ka0WBiZlCtcunVJDiHQbz1sF9GvcePUUi2fM/h","Production","1063410zFUyaf","name","staging","pQnNI61gzHO42XZOMuxytMm0F6puNHTTqhyY3Z290YqvSDdOB+UY5QJuXJgjhvOUD9+oaLlvT","93365ZJpndd","V382D1oJAM0F/YgCQtNDLz7vTWJ+QskNGi5Dd2qzO4s48Cnx5BLvL4H0xCRSw2Ed6ekHSdrRU","production","2343546YgIYCY"];return(Zn=function(){return t})()}function Hn(t,e){const i=Xn();return(Hn=function(t,e){return i[t-=325]})(t,e)}function Xn(){const t=["1052499bnJBHn","cenc","4222tSxFth","Unsupported SampleAuxInfo version","12980Tusgux","3160ZwXFcU","40030ewyARR","16lkTHRT","1199124lbwxEr","data","105TSrukA","getUint8","12bBEpge","SampleAuxInfo corrupted (postfix not found)","getUint16","error","85265ZYYyUv","buffer","3616548TKdsLX","subarray","byteLength","SampleAuxInfo corrupted"];return(Xn=function(){return t})()}function zn(t,e){const i=jn();return(zn=function(t,e){return i[t-=295]})(t,e)}Gn[Fn(468)]=new Gn(Fn(489)),Gn[Fn(486)]=new Gn(Fn(463)),Gn[Fn(472)]=new Gn(Fn(465)),function(){const t=Hn,e=Xn();for(;;)try{if(x(t(328))/1+-x(t(332))/2*(-x(t(336))/3)+-x(t(338))/4*(-x(t(342))/5)+-x(t(344))/6+-x(t(326))/7*(x(t(333))/8)+x(t(334))/9+x(t(331))/10*(x(t(330))/11)==358550)break;e.push(e.shift())}catch(t){e.push(e.shift())}}(),function(){const t=zn,e=jn();for(;;)try{if(x(t(305))/1*(-x(t(297))/2)+-x(t(295))/3+x(t(310))/4*(x(t(309))/5)+-x(t(304))/6*(x(t(296))/7)+x(t(307))/8*(-x(t(298))/9)+-x(t(301))/10*(x(t(302))/11)+-x(t(300))/12*(-x(t(308))/13)==178039)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const qn=[];let Yn=null,Kn=0;function jn(){const t=["31476hbBsvr","850RxzAPl","4180KczaCN","push","156MUFuvQ","96571jvhWaB","buffer","26232BkewNd","4303YGAqiP","5yhGpFn","1137036pzCnTd","1035942NcoZLh","94073eTaQjy","2bXtEms","414snfiTE","slice"];return(jn=function(){return t})()}const Qn=ir;function Jn(){const t=["Data does not seem to be UTF-16 encoded!","No init data available!","getElementsByTagName","min","14BFNrBA","keystatuseschange","catch","childNodes","internal-error","Failed to reuse previous EME session: ","output-downscaled","expired","bind","5576688EKOFOG","has","length","License acquisition failed with error ","arrayBuffer","apply","CDM error generating license request: ","<Challenge","No PR challenge data!","then","license","createSession","warn","[PR] License fetched:","text/xml","clRtcDrmDebugLog","push","encode","max","json"," is not ","replace","target","rtcdrmerror","update","fromCharCode","subarray","2993694njpqat","4002692oINhTV","Content-Type","1347492MkzfDC","Data has an incorrect length, must be even.","addEventListener","buffer","onFetch","generateRequest","initData","dispatchEvent","atob","No clear key test key provided!","Challenge","New lic will be requested","oct","BYTES_PER_ELEMENT","sessionId","usable for decryption (status: ","[WV] License fetched:","Key ","5MtuOVr","byteLength","744563CKOUzg","load","floor","error","decode","indexOf","info","isSafari","edef8ba979d64acea3c827dcd51d21ed","mediaKeys","Previous lic will be reused","charCodeAt","licenseUrl","status","Failed to update the session: ","log","keyStatuses","temporary","9a04f07998404286ab92e65be0885f95","output-restricted","nodeValue","btoa","message","EME createSession() failed - no DRM available","5977680uUTwUr","getUint16","[PR] Challenge node not found","A128KW","3974463jrELhf","Failed to update the session","stringify","[EME]","delete","No media keys for media element!","set","2nMQfRz"];return(Jn=function(){return t})()}!function(){const t=ir,e=Jn();for(;;)try{if(-x(t(419))/1*(x(t(454))/2)+x(t(495))/3+x(t(496))/4*(-x(t(417))/5)+-x(t(498))/6*(-x(t(459))/7)+x(t(468))/8+-x(t(447))/9+x(t(443))/10==555073)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();let $n={licenseUrl:"",onFetch:void 0};const tr={},er=(t,e,i)=>(void 0===e&&(e=0),void 0===i&&(i=1/0),((t,e,i)=>{const s=ir,n=j[s(511)];e*=n,i*=n;const r=(a=t)instanceof ArrayBuffer?a:a[ir(501)],o=t[s(418)],h=e;var a;let u=_[s(486)](0,_[s(458)](h,o)),c=_[s(458)](u+_[s(486)](i,0),o);return u/=n,c/=n,new j(r,u,c-u)})(t,e,i));function ir(t,e){const i=Jn();return(ir=function(t,e){return i[t-=417]})(t,e)}const sr=t=>{const e=ir;let i="";for(const s of t){let t=s.toString(16);1==t[e(470)]&&(t="0"+t),i+=t}return i};let nr=null;const rr=t=>{const e=ir;return s[e(440)](String[e(493)][e(473)](null,t))[e(489)](/\+/g,"-")[e(489)](/\//g,"_")[e(489)](/=*$/,"")},or=(t,e)=>{const i=ir,s=(t=>{const e=ir,i=JSON.parse((new TextDecoder)[e(423)](t));if(console[e(434)]("CK license request:",i),null===nr)throw new m(e(507));const s=[];for(const t of i.kids){const i={kty:e(510),alg:e(446),kid:t,k:rr(nr)};s[e(484)](i)}return(new TextEncoder)[e(485)](JSON[e(449)]({keys:s}))})(e.message);e[i(490)][i(492)](s)[i(461)]((function(t){const e=i;console[e(422)](e(448),t)}))},hr=t=>{const e=ir,i=s[e(506)](t[e(489)](/-/g,"+")[e(489)](/_/g,"/")),n=new j(i[e(470)]);for(let t=0;t<i.length;++t)n[t]=i[e(430)](t);return n},ar=function(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];return en(void 0,[t,e,...s],void 0,(function*(t,e,i){void 0===i&&(i=!1);const s=ir,n=new Headers(tr);i&&n.append(s(497),s(482));const r={method:"POST",headers:n,body:e},o=yield $n[s(502)]?$n[s(502)](t,r):fetch(t,r);if(!o.ok)throw new m(s(471)+o[s(432)]);return o}))},ur=(t,e)=>{const i=ir;ar($n[i(431)],e[i(441)])[i(477)]((t=>t[i(487)]()))[i(477)]((t=>{const n=i;s[n(483)]&&console.info(n(514),t.license);const r=hr(t[n(478)])[n(501)];e[n(490)][n(492)](r)[n(461)]((t=>{console[n(422)]("Failed to update the session",t)}))}))[i(461)]((e=>{const s=i;t.dispatchEvent(new CustomEvent(s(491),{detail:{message:""+e}})),console[s(422)](e)}))},cr=(t,e)=>{const i=ir,n=((t,e)=>{const i=ir,s=new DOMParser;try{const t=function(t,e,i){void 0===i&&(i=!1);const s=ir;if(!t)return"";let n=t;if(!i&&n.byteLength%2!=0)throw console[s(422)](s(499)),new m(s(455));const r=er(n);let o;if((255===r[0]&&254===r[1]||254===r[0]&&255===r[1])&&(n=r[s(494)](2)),n instanceof ArrayBuffer)o=n;else{const t=new j(n[s(418)]);t[s(453)](er(n)),o=t[s(501)]}const h=_[s(421)](n.byteLength/2),a=new Uint16Array(h),u=new DataView(o);for(let t=0;t<h;t++)a[t]=u[s(444)](2*t,e);return function(t){const e=ir;let i="";for(let s=0;s<t[e(470)];s+=16e3){const n=t[e(494)](s,s+16e3);i+=String[e(493)].apply(null,n)}return i}(a)}(e,!0);if(t[i(424)](i(475))>-1){const e=s.parseFromString(t,i(482))[i(457)](i(508))[0][i(462)][0][i(439)];if(null===e)throw new m("No PR challenge data!");return hr(e)}console[i(480)](i(445))}catch(e){t.dispatchEvent(new CustomEvent(i(491),{detail:{message:""+e}})),console.error(e)}return null})(t,e.message);if(null===n)return t[i(505)](new CustomEvent("rtcdrmerror",{detail:{message:"No PR challenge data!"}})),void console.error(i(476));ar($n[i(431)],n[i(501)],!0)[i(477)]((t=>t[i(472)]()))[i(477)]((n=>{const r=i;s[r(483)]&&console[r(425)](r(481),n),e[r(490)].update(n)[r(461)]((function(e){const i=r;t[i(505)](new CustomEvent(i(491),{detail:{message:i(433)+e}})),console[i(422)](i(448),e)}))}))[i(461)]((e=>{const s=i;t.dispatchEvent(new CustomEvent("rtcdrmerror",{detail:{message:""+e}})),console[s(422)](e)}))},lr=(t,e)=>{const i=ir;ar($n[i(431)],e[i(441)])[i(477)]((t=>{const e=i,n=t.text();return s[e(483)]&&console.info("[FPS] License fetched:",t,n),n}))[i(477)]((t=>{const s=i;e[s(490)][s(492)](hr(t))}))[i(461)]((e=>{const s=i;t.dispatchEvent(new CustomEvent(s(491),{detail:{message:""+e}})),console[s(422)](e)}))},dr=(t,e)=>{tr[t]=e},fr=vn[Qn(426)];let _r=!fr;const vr=new Map;function gr(t){return en(this,void 0,void 0,(function*(){const e=ir;if(null===t[e(504)])throw new m(e(456));const i=t[e(490)];if(null===i)throw new m("No media element available!");const n=i[e(428)];if(null===n)throw new m(e(452));const r=sr(new j(t[e(504)])),o=r+i.id;let h=null;vr[e(469)](o)&&(h=vr.get(o),null!=h&&h.close(),vr[e(451)](o)),s[e(483)]&&console[e(425)](e(450),e(h?429:509));let a=null;try{a=n[e(479)](_r?"persistent-license":"temporary")}catch(t){console[e(434)]("EME createSession(persistent) failed:",t)}if(!a&&_r){_r=!1;try{a=n[e(479)](e(436))}catch(t){console[e(422)]("EME createSession(temporary) failed:",t)}}if(a)if(a[e(500)](e(460),(t=>{const s=e;t[s(490)][s(435)].forEach(((t,e)=>{const n=s;(t===n(466)||t===n(438)||t===n(465)||t===n(463))&&i[n(505)](new CustomEvent(n(491),{detail:{message:n(515)+sr(new j(e))+n(488)+(n(513)+t+")"),keyId:e}}))}))})),fr?a.addEventListener(e(441),lr[e(467)](null,i),!1):-1!==r[e(424)](e(427))?a.addEventListener(e(441),ur[e(467)](null,i),!1):-1!==r[e(424)](e(437))?a[e(500)](e(441),cr[e(467)](null,i),!1):a.addEventListener("message",or[e(467)](null,i),!1),h)try{(yield a[e(420)](h[e(512)]))?vr[e(453)](o,a):i.dispatchEvent(new CustomEvent(e(491),{detail:{message:"Failed to load previous EME session"}}))}catch(t){i[e(505)](new CustomEvent(e(491),{detail:{message:e(464)+t}}))}else a[e(503)](t.initDataType,t[e(504)]).then((()=>{_r&&vr[e(453)](o,a)}))[e(461)]((t=>{const s=e;i[s(505)](new CustomEvent(s(491),{detail:{message:s(474)+t}}))}));else i[e(505)](new CustomEvent(e(491),{detail:{message:e(442)}}))}))}const mr=Vr;function pr(){const t=[" too close to seek, ","fpsCertificateUrl","9880640TWxZrg","H264","ignoreAudio","Unable to create Worker!","createMediaKeys(",", restart required: ","/license-proxy-headerauth/drmtoday/RightsManager.asmx","6236Nwzlef","worker","serverCertificateUrl","serverCertificate","seq",",255]).buffer,idrFrames.push(new Uint8Array([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,","ClearKey","No valid DRM config found, call rtcDrmConfigure first.","sessionId","toISOString","indexOf","robustness","isInteger","info","includes","Development","slice","16niaptx"," frame","video/mp4","isArray","Android","end","PlayReady","streamType","1772WtcYWF","]: ","Frame gap: ","nextKeyFrameAllowedTime","use rtcDrmFeedFrame to push frames manually","Error recovery attempted","merchant","FairPlay","requestMediaKeySystemAccess(","pipeThrough","/license-server-fairplay/","isChrome","type","MSE (re)init","const DUMMY_IDR_FRAME_SLICE_HDR0=new Uint8Array([32,0,203]),DUMMY_IDR_FRAME_SLICE_HDR1=new Uint8Array([16,0,50]);","DRM config env value must be one of: ","length","GOP is getting too long, requesting a new key frame","Worker","let brokenFrame=null,idrFrames=[];function initializeDummyFrames(){brokenFrame=new Uint8Array([0,0,0,1,65,154,255","srcObject","RTCRtpScriptTransform","),idrFrames.push(idrFrames[0].slice());let $=new Uint8Array(idrFrames[1]);$.set([16,0,50],27)}let idrPicIdToggle=","now"," to ","join","setServerCertificate","audioCapabilities","lastKeyFrameTime","prevSeqNum"," seeking from ",".experiment","clRtcDrmDebugLog","Server certificate fetch failed with error ","isFirefox","org.w3.clearkey","x-dt-custom-data","jitterBufferTarget","playbackRate","enabled","keyFrameNeeded","createEncodedStreams","wvCertificateUrl","key","sai","Discarding corrupted video frame (too small)",'gle^=1]}function audioTransformFunction($,e){postMessage({streamType:"audio",frame:{timestamp:$.timestamp,data:$.',"H264 is the only supported video codec.","com.microsoft.playready.recommendation"," will be used","DRM config iv must be an instance of 16-byte long Uint8Array.","encryption","0;function generateDummyFrame($){return(brokenFrame||initializeDummyFrames(),$)?brokenFrame:idrFrames[idrPicIdTog","toString","message","status","bytesSinceKey","currentTime","supportsRtpScriptTransform","1585647fRskxG","audioElement","track","sinf","createObjectURL","enqueue","Invalid videoElement, it must be an instance of HTMLVideoElement.","7302558TqFWae","pipeTo","SampleAuxInfo extraction failed (video)","isEdge","keys","not-allowed","rtcdrmerror","btoa","?audioTransformFunction:videoTransformFunction});e.pipeThrough(a).pipeTo(x)}self.RTCTransformEvent&&(self.onrtctr",", a1d1f1 is recommended).","reportDiscontinuity","onFetch","keyId","sessionTypes","). Edge only supports PlayReady, Widevine and ClearKey.","audioEncrypted","audioStartTimestamp","frame","videoStartTimestamp","184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32]).buffer","Duplicate/reordered frame, prev seq: ","ClearKey is not supported by Safari.","bind",") not found in [","DRM config robustness can only be one of: ","persistent-license","postMessage","receiver","get","both","jmuxer","Production","Blob","timestamp","cenc","emeConfig","clear","cbcs-1-9","5iKPdqC","isWindows","PlayReady license acquisition might fail without output protection enabled (sessionId is ","). Chrome only supports Widevine and ClearKey.","mediaBufferMs should be an integer.","size","certificate","prLicenseUrl","fpsLicenseUrl","/license-proxy-widevine/cenc/","4572770OAoUlm","BYTES_PER_ELEMENT","then","SW_SECURE_CRYPTO","ansform=$=>{let e=$.transformer;handleTransform(e.options.operation,e.readable,e.writable)}),onmessage=$=>{keyFra","splice","Safari doesn't support 'cenc'/AES-CTR, use 'cbcs' instead if possible.","videoElement","rtcDrmConfigure did not specify audioElement, audio will be dropped",'audio/mp4; codecs="opus"',"object","Invalid audioElement, it must be an instance of HTMLMediaElement.","keyFrameNeededPosted","debugCreateMediaDump","next","play","6591266VeIbXo","userId","jitterBufferDelayHint",'ame(keyFrameNeeded),e.enqueue($)}function handleTransform($,e,x){let a=new TransformStream({transform:"audio"===$',"dispatchEvent","reduce"," bytes, playback at ","offset","arrayBuffer","waitingForIdr","Widevine","DRM config mediaBufferMs should be an integer.","hwSecurity","authToken","audio"," bytes)","push","licenseUrl","Default transform mode enabled, ","RTCRtpScriptTransform/TransformStream will not be created, ","GET","baseUrl","video","trim","7377TdQrIK","3000","playoutDelayHint","catch","fpsCertificate","POSITIVE_INFINITY","/license-server-fairplay/cert/","DRM config:","streams","mediaBufferMs","log","codec","onmessage","Target video element (","Applying pre-configured certificate (","webkitURL","Discarding corrupted video frame (no Annex B startcode)"," requesting a new key frame (latency ","PlayReady might not support '","No target media element!","URL","set","warn","data","config","isSafari","forEach","setMediaKeys","buffered"," - ","keySystem",'data}}),e.enqueue($)}let keyFrameNeeded=!1;function videoTransformFunction($,e){postMessage({streamType:"video",f',"paused","wvCertificate","a1d1f1","2000","keyFrameRequestInterval","Several DRM configs detected, rtcDrmOnTrack have to be called with target DRM config.","error","238HZxcdH","HW_SECURE_ALL","Invalid DRM type (","buffer","x-dt-auth-token","clRtcDrmCreateMediaDump",'rame:{type:$.type,timestamp:$.timestamp,data:$.data}}),"key"===$.type&&(keyFrameNeeded=!1),$.data=generateDummyFr',"addEventListener",") failed","keyFrameLogCntr","feed","byteLength","kind","purchase","environment","videoCapabilities","requestMediaKeySystemAccess","temporary","). It has to be a string containing a JWT.","value",".. ","string"];return(pr=function(){return t})()}!function(){const t=Vr,e=pr();for(;;)try{if(x(t(543))/1*(x(t(512))/2)+x(t(473))/3*(x(t(568))/4)+-x(t(672))/5*(-x(t(634))/6)+-x(t(536))/7+x(t(560))/8*(x(t(627))/9)+-x(t(682))/10+-x(t(449))/11==932877)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const wr=vn[mr(626)],yr=vn[mr(602)],br=vn[mr(498)],Ar=vn[mr(637)],Sr=vn[mr(579)],Tr=vn.platform,kr=vn[mr(673)],Er=Ar||Sr&&Tr===mr(564),xr=1e6*(yr?82:br?220:120),Ir=yr?5e3:2e3,Rr=yr?1.5:.5;function Cr(t){const e=mr;return typeof t!==e(692)||null===t||t instanceof Element||t instanceof Gn?t:function(t){const e=mr;return!!((null==t?void 0:t[e(515)])instanceof ArrayBuffer&&null!=t&&t[e(683)])}(t)?t[e(559)]():Array[e(563)](t)?t[e(454)](((t,e,i)=>(t[i]=Cr(e),t)),[]):t instanceof w?w[e(638)](t)[e(454)](((e,i)=>(e[i]=Cr(t[i]),e)),{}):t}class Pr{constructor(t){const e=mr;this[e(545)]="",this.licenseUrl="",this[e(503)]="",this[e(669)]=[],this[e(497)]=Cr(t),this[e(664)]=null,this[e(521)]=0,this[e(571)]=Date.now(),this.videoStartTimestamp=0,this.audioStartTimestamp=0,this.prevSeqNum=-1,this[e(596)]=0,this[e(624)]=0,this.keyFrameNeeded=!0,this.keyFrameNeededPosted=!1,this.keyFrameRequestInterval=Ir,this.worker=null}}const Dr=new Map,Nr=new j([60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60]),Mr=new j([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]),Lr=new j([213,251,214,184,46,217,62,78,249,138,228,9,49,238,51,183]);function Br(t){const e=mr;let i=!1;if((t[e(497)].video&&"clear"!==t[e(497)].video[e(619)]&&"HW"===t.config[e(471)][e(554)]||t[e(497)][e(463)]&&t[e(497)][e(463)].encryption!==e(670)&&"HW"===t[e(497)][e(463)][e(554)])&&(i=!0),t.hwSecurity=i,function(t,e){const i=mr;void 0!==e&&(t[i(497)][i(482)]=e),(void 0===t[i(497)][i(482)]||t[i(497)].mediaBufferMs<0)&&(t.config[i(482)]=100,yr?t[i(497)][i(482)]=350:!br&&kr&&(t[i(497)][i(580)]===i(566)||t[i(461)])&&(t[i(497)][i(482)]=1400))}(t,t[e(497)][e(482)]),void 0===t.config.authToken){void 0===t.config[e(450)]&&(t[e(497)][e(450)]=e(525)),void 0===t[e(497)][e(551)]&&(t.config[e(551)]=e(507));const i=s[e(641)](JSON.stringify({userId:t.config[e(450)],sessionId:t[e(497)][e(551)],merchant:t.config[e(574)]}));dr(e(604),i)}else dr(e(516),t.config[e(462)]);for(const i of[t[e(497)].audio,t[e(497)][e(471)]])i&&i[e(619)]!==e(670)&&(i[e(646)]||(i[e(646)]=Mr),i.iv||(i.iv=Lr));t[e(546)]=void 0,t[e(545)]="",t[e(466)]="";const n=t.config[e(526)][e(470)]();var r;if(t[e(497)][e(580)]===e(549)?(t.keySystem=e(603),nr=Nr):t.config.type===e(459)?(t[e(503)]="com.widevine.alpha",kr&&i&&(t[e(503)]+=e(599)),t.config.wvCertificate?t[e(546)]=t[e(497)][e(506)]:t[e(497)][e(610)]?t[e(545)]=t[e(497)][e(610)]:t[e(546)]=t.config[e(526)][e(678)](),t.config.wvLicenseUrl?t[e(466)]=t[e(497)].wvLicenseUrl:t[e(466)]=n+e(681)):t[e(497)][e(580)]===e(566)?(t[e(503)]=e(616),t[e(497)][e(679)]?t.licenseUrl=t[e(497)][e(679)]:t[e(466)]=n+e(542)):t[e(497)].type===e(575)&&(t.keySystem="com.apple.fps",t.config[e(477)]?t[e(546)]=t[e(497)][e(477)]:t[e(497)][e(535)]?t.serverCertificateUrl=t.config[e(535)]:t[e(545)]=n+e(479)+t[e(497)].merchant,t[e(497)][e(680)]?t[e(466)]=t.config.fpsLicenseUrl:t.licenseUrl=n+e(578)),r={licenseUrl:t[e(466)],onFetch:t.config[e(645)]},$n=r,t[e(669)]=[],t.config[e(580)]!==e(575)){t[e(669)][e(465)]({initDataTypes:[e(668)],sessionTypes:["persistent-license",e(529)]});for(const i of[t[e(497)][e(471)],t[e(497)][e(463)]])if(i&&i.encryption!==e(670)){const s=i==t[e(497)][e(471)]?e(471):e(463);let n;t[e(497)][e(580)]===e(459)?n="HW"===i[e(554)]?e(513):e(685):"PlayReady"===t[e(497)][e(580)]&&(n="HW"===i.robustness?e(474):e(508)),s===e(471)?t[e(669)][0][e(527)]=[{contentType:'video/mp4; codecs="avc1.640032"',encryptionScheme:"cenc"===i[e(619)]?e(668):"cbcs-1-9",robustness:n||void 0}]:t[e(669)][0][e(595)]=[{contentType:e(691),encryptionScheme:i[e(619)]===e(668)?"cenc":e(671),robustness:n||void 0}]}}else t[e(669)]=[{initDataTypes:[e(630)],videoCapabilities:[{contentType:e(562),robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:e(639),sessionTypes:["temporary"]}];s[e(600)]&&console.info(e(480),t)}function Or(t){const e=mr;s[e(600)]&&console[e(556)](e(581));let i=t[e(497)].videoElement;(!t[e(497)][e(471)]||t.config[e(471)][e(619)]===e(670))&&(i=t.config.audioElement),t[e(664)]=null;const n=!t.ignoreAudio&&t[e(497)][e(463)]&&"clear"!==t[e(497)].audio[e(619)],r=t[e(497)][e(471)]&&t.config.video[e(619)]!==e(670);t[e(624)]=0,t[e(608)]=!0,t.keyFrameNeededPosted=!1,t[e(509)]=Ir,t[e(652)]=0,t[e(650)]=0,t[e(597)]=-1,t[e(596)]=0,t.jmuxer=new Ln({node:i,mode:n?e(r?663:463):"video",fps:60,drm:t}),br&&t[e(497)].videoElement&&t[e(497)][e(689)][e(448)]()[e(684)]((()=>{}))[e(476)]((()=>{}))}function Fr(t,e,i){const n=mr;if(t[n(497)][n(471)]&&"clear"===t.config[n(471)][n(619)])return null==i||i[n(632)](e),!1;const r=Date[n(591)]();if(e.type===n(611)){const i=s[n(600)];++t[n(521)]<(i?Number[n(478)]:5)&&(console[n(556)]((new Date)[n(552)]().slice(11,-1)+" "+e[n(580)]+", "+(e[n(496)].byteLength+n(455)+t[n(497)][n(689)][n(625)])),i&&1===t[n(521)]&&function(t,e,i){void 0===e&&(e=64),void 0===i&&(i=64);const s=mr,n=new j(t[s(496)]);let r="",o=0;for(let t=0;t<e&&t<n[s(584)];++t)r+=(n[t]<16?"0":"")+n[t].toString(16)+" ";if(o<n[s(584)])for(o<n[s(584)]-i&&(r+=s(532),o=n[s(584)]-i);o<n[s(584)];o++)r+=(n[o]<16?"0":"")+n[o][s(621)](16)+" ";console.info("["+((t[s(580)]||s(463))+s(561))+s(569)+r[s(472)]())}(e,128,8)),t[n(608)]=!1,t[n(624)]=0,t[n(571)]=r+t[n(509)]}return t[n(624)]+=e.data[n(523)],!t[n(608)]&&t[n(624)]>xr&&(console[n(556)](n(585)),t[n(608)]=!0),t.jmuxer&&(function(t,e){const i=mr;0===t[i(652)]&&(t[i(652)]=e[i(667)],t[i(509)]=Ir,t[i(571)]=Date[i(591)]()+2e3);let n=null,r=!1;if(e.data[i(523)]<=4)console[i(495)](i(613)),r=!0;else{const s=new j(e[i(496)],0,4);0!=s[0]||0!=s[1]||0!=s[2]||1!=s[3]?(console[i(495)](i(489)),r=!0):(n=function(t,e){const i=Hn,s=new DataView(t[i(335)]),n=t.data[i(346)]-2,r=s[i(340)](n);if(r<n){let t=n-r;if(69!==s[i(337)](n-1))return console[i(341)](i(339)),null;if(s.getUint8(t++)>>>4!=1)return console[i(341)](i(329)),null;const o=new j(r-2);let h=0,a=0;for(;t<n-1;){let e=s.getUint8(t++);a>1&&3===e&&(a=0,e=s.getUint8(t++)),0!==e?a=0:++a,o[h++]=e}const u=new DataView(o[i(343)]),c=e===i(327)?16:0,l=c+2+6*u.getUint16(c);return l+2>h?(console.error(i(325)),null):{sai:o[i(345)](0,l),offset:n-r,seq:u.getUint16(l)}}return null}(e,t[i(497)][i(471)][i(619)]),!n&&(console.warn(i(636)),r=!0))}if(n)if(-1===t[i(597)]){if(e[i(580)]!==i(611))return 0;t[i(597)]=n[i(547)]}else{let o=n.seq-t[i(597)];if(o<-32767&&(o+=65536),o<=0)return s[i(600)]&&console[i(495)](i(654)+t[i(597)]+", curr: "+n[i(547)]),0;o>1&&(r=e[i(580)]!==i(611),console[i(495)](i(570)+t[i(597)]+i(502)+n[i(547)]+i(541)+r)),t.prevSeqNum=n[i(547)]}let o=0;r&&!t[i(664)][i(458)]&&(o=-1,t[i(664)][i(644)]());const h=(e[i(667)]-t[i(652)])/9e4;return n&&t[i(664)][i(522)]({video:new j(e.data,0,n[i(456)]),videoSampleAuxInfo:n[i(612)],timestamp:h})<0&&(o=-1,console[i(495)](i(573)),Or(t)),o>=0&&"key"===e[i(580)]&&(t[i(596)]=h,console[i(483)]((new Date)[i(552)]()[i(559)](11,-1)+" kf at "+h+", playback at "+t[i(497)].videoElement[i(625)])),o}(t,e)<0?t[n(608)]=!0:function(t){const e=mr,i=t.config[e(689)];if(!i||i[e(501)][e(584)]<1||i[e(505)]||i[e(625)]<Rr)return;const n=t[e(497)].mediaBufferMs;if(void 0===n||n<0)throw new m("targetLatency not set!");const r=i[e(501)][e(565)](i[e(501)][e(584)]-1),o=1e3*(r-i[e(625)])|0;if(!t[e(649)]&&function(t,e,i){const s=mr;let n;n=e<3*i>>>2?.875:e<=i?1:e<7*i>>>2?1.125:e<9*i>>>2?1.25:e<11*i>>>2?1.375:1.5,n!==t.playbackRate&&(t[s(606)]=n)}(i,o,n),!(o<n+50||o<5*n>>>2))if(t.lastKeyFrameTime>i[e(625)]+.1){const o=1e3*(r-t[e(596)])|0;o>40&&o>n-100?(s[e(600)]&&console.info((new Date).toISOString().slice(11,-1)+e(598)+(i[e(625)]+e(592)+t[e(596)]+" (")+(t.lastKeyFrameTime-i[e(625)])+")"),i[e(625)]=t[e(596)]):console[e(483)]((new Date)[e(552)]().slice(11,-1)+e(534)+o)}else!t[e(608)]&&Date[e(591)]()>t[e(571)]&&o>n+100&&o>3*n>>>1&&(s[e(600)]&&console[e(556)]((new Date).toISOString()[e(559)](11,-1)+e(490)+o+" ms)"),t[e(608)]=!0,t[e(509)]<16e3&&(t[e(509)]<<=1))}(t)),i?(!t[n(608)]||!Er)&&(e[n(496)]=function(t){return!Yn&&function(){const t=zn;Yn=new j([0,0,0,1,65,154,255,255]).buffer,qn[t(303)](new j([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32])[t(306)]),qn[t(303)](qn[0][t(299)](0)),new j(qn[1]).set([16,0,50],27)}(),t?Yn:(Kn^=1,qn[Kn])}(t[n(608)]),i[n(632)](e)):t[n(608)]!=t[n(445)]&&(t.worker&&t[n(544)][n(660)](t[n(608)]),t[n(445)]=t[n(608)]),t[n(608)]}function Vr(t,e){const i=pr();return(Vr=function(t,e){return i[t-=445]})(t,e)}function Wr(t,e,i){const s=mr;return t[s(497)][s(463)]&&t[s(497)].audio[s(619)]!==s(670)?e[s(496)][s(523)]>0&&function(t,e){const i=mr;var s;if(!t.jmuxer||t[i(538)])return 0;0===t[i(650)]&&(t[i(650)]=e[i(667)]);const n=(e[i(667)]-t.audioStartTimestamp)/48e3;if("cbcs"===(null===(s=t.config[i(463)])||void 0===s?void 0:s[i(619)]))return t[i(664)][i(522)]({audio:new j(e[i(496)]),timestamp:n});const r=function(t){const e=Hn,i=new DataView(t.data),s=t.data[e(346)]-2,n=i.getUint16(s);if(n<s){let t=s-n;if(69!==i[e(337)](s-1))return console[e(341)](e(339)),null;if(i[e(337)](t++)>>>4!=1)return console[e(341)](e(329)),null;const r=new j(n-2);let o=0;for(;t<s-1;){const s=i[e(337)](t++);if(r[o++]=s,o>=16)break}return{sai:r,offset:s-n}}return null}(e);r?t[i(664)][i(522)]({audio:new j(e[i(496)],0,r[i(456)]),audioSampleAuxInfo:r[i(612)],timestamp:n}):console[i(511)]("SampleAuxInfo extraction failed (audio)")}(t,e):i&&i[s(632)](e),!1}function Ur(t){const e=mr;if(!t||typeof t!==e(692))throw new g("Invalid config argument type, DRM config must be an object.");if(!(t[e(689)]instanceof HTMLVideoElement))throw new g(e(633));if(t[e(628)]&&!(t.audioElement instanceof HTMLMediaElement))throw new g(e(693));if(void 0!==t[e(482)]&&!Number[e(555)](t[e(482)]))throw new g(e(460));let i=!1,n=!1,r=!1;const o=["cbcs",e(668),e(670)],h=["SW","HW"];for(const s of[t[e(471)],t[e(463)]])if(s){if(!o[e(557)](s[e(619)]))throw new RangeError("DRM config encryption value must be one of: "+o[e(593)](", "));if(br&&"cenc"===s.encryption)throw new RangeError(e(688));if(s[e(619)]!==e(670)){if(n=!0,s.keyId){if(!(s[e(646)]instanceof j)||16!==s.keyId[e(584)])throw new g("DRM config keyId must be an instance of 16-byte long Uint8Array.");r=!0}else if(br)throw new ReferenceError(e(655));if(s.iv&&(!(s.iv instanceof j)||16!==s.iv.length))throw new g(e(618));if(s[e(554)]&&!h[e(557)](s.robustness))throw new RangeError(e(658)+h[e(593)](", "));if(s===t[e(471)]&&s[e(484)]!==e(537))throw new RangeError(e(615));br&&s===t.audio&&"opus"===s.codec&&(i=!0,console.warn("Safari does not support Opus, audio will not be rendered.")),"PlayReady"===t[e(580)]&&(s[e(619)]!==e(668)&&console[e(495)](e(491)+s[e(619)]+"', it's safer to use 'cbcs' instead."),void 0===t.sessionId||t.sessionId[e(557)]("f1")||console.warn(e(674)+t.sessionId+e(643)))}}if(n){const i=[Gn[e(558)],Gn.Staging,Gn[e(665)]];if(!i.includes(t[e(526)]))throw new RangeError(e(583)+i.join(", "));if(t[e(462)]&&typeof t[e(462)]!==e(533))throw new g("Invalid authToken type ("+typeof t[e(462)]+e(530));if(t.type)if(br){if(t[e(580)]!==e(575))throw new RangeError(e(514)+t[e(580)]+"). Safari only supports FairPlay.")}else if(Sr){if(t.type!==e(459)&&"ClearKey"!==t[e(580)])throw new RangeError("Invalid DRM type ("+t.type+e(675))}else if(Ar&&t[e(580)]!==e(566)&&"Widevine"!==t[e(580)]&&"ClearKey"!==t[e(580)])throw new RangeError(e(514)+t.type+e(648))}void 0!==t.debugLog&&(s[e(600)]=t.debugLog),void 0!==t[e(446)]&&(s[e(517)]=t[e(446)]);let a=Dr.get(t[e(689)]);!a&&(a=new Pr(t),Dr[e(494)](t[e(689)],a)),a.enabled=n,a[e(538)]=i,a[e(649)]=!i&&a[e(497)][e(463)]&&a[e(497)].audio.encryption!==e(670),n&&(a[e(497)].type||(a[e(497)][e(580)]=e(br?575:459)),r||a[e(497)][e(580)]===e(549)||(a[e(497)][e(580)]=e(549)),Br(a),function(t){en(this,void 0,void 0,(function*(){const e=Vr;var i,n;let r=t[e(497)][e(689)];if((!t[e(497)][e(471)]||t[e(497)][e(471)].encryption===e(670))&&(r=t[e(497)][e(628)]),!r)throw new m(e(492));r.src="",r[e(588)]=null,yield r.setMediaKeys(null);let o=null;try{o=yield Bl[e(528)](t[e(503)],t.emeConfig)}catch(t){}if(!o&&t[e(669)][0]){const s=null===(i=t[e(669)][0][e(647)])||void 0===i?void 0:i[e(553)](e(659));if(void 0!==s&&s>=0){null===(n=t.emeConfig[0].sessionTypes)||void 0===n||n[e(687)](s,1);try{o=yield Bl[e(528)](t[e(503)],t[e(669)])}catch(t){}}}if(!o){const i=e(576)+t[e(503)]+e(520);return r.dispatchEvent(new CustomEvent(e(640),{detail:{message:i}})),void console[e(511)](i)}let h=null;try{h=yield o.createMediaKeys()}catch(t){}if(!h){const i=e(540)+t[e(503)]+e(520);return r[e(453)](new CustomEvent("rtcdrmerror",{detail:{message:i}})),void console[e(511)](i)}if(t.serverCertificate)s.clRtcDrmDebugLog&&console[e(556)](e(487)+t[e(546)][e(523)]+e(464)),yield h[e(594)](t[e(546)]);else if(t.serverCertificateUrl){const i={method:e(469)},n=t.serverCertificateUrl;try{const o=yield t[e(497)].onFetch?t.config[e(645)](n,i):fetch(n,i);if(!o.ok){const t=e(601)+o[e(623)];return void r[e(453)](new CustomEvent(e(640),{detail:{message:t}}))}const a=yield o[e(457)]();s.clRtcDrmDebugLog&&console[e(556)]("Fetched certificate from "+n+", "+a[e(523)]+" bytes"),yield h[e(594)](a)}catch(t){const i=t.name+": "+t[e(622)];return console.error(i),void r[e(453)](new CustomEvent(e(640),{detail:{message:i}}))}}yield r[e(500)](h),r[e(519)]("encrypted",gr),Or(t)}))}(a)),a[e(497)][e(689)][e(519)](e(448),(function(){const t=e;a[t(497)][t(689)][t(625)]>.5&&(a[t(571)]=Date.now())}))}const Gr=mr(582)+mr(587)+mr(548)+mr(653)+mr(590)+mr(620)+mr(614)+mr(504)+mr(518)+mr(452)+mr(642)+mr(686)+"meNeeded=$.data};";function Zr(t){const e=mr;if(0===Dr[e(677)])throw new g(e(550));let i;if(t&&t[e(689)])i=t[e(689)];else{if(1!==Dr.size)throw new g(e(510));i=Dr[e(638)]()[e(447)]()[e(531)]}const s=Dr[e(662)](i);if(!s){let t="";throw Dr[e(499)](((e,i)=>{t+=i.id+", "})),t=t.slice(0,-2),new g(e(486)+i.id+e(657)+t+"]")}return s}function Hr(t,e){const i=mr;if(t&&t[i(497)][i(689)]){const s=t[i(497)][i(689)];if(s[i(501)].length>0){const t=s.buffered[i(565)](s[i(501)][i(584)]-1)-s[i(625)];e.playoutDelayHint=e.jitterBufferDelayHint=e.jitterBufferTarget=t}u(Hr,1e3,t,e)}}const Xr=at.get("View");Xr.setLevel(at.DEBUG);const zr={metadata:!1,enableDRM:!1,disableVideo:!1,disableAudio:!1,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};t.Director=Ps,t.Logger=at,t.PeerConnection=rs,t.Publish=class extends Hs{async connect(t){void 0===t&&(t=Js);const e=Gs.object({sourceId:Gs.string(),stereo:Gs.boolean(),dtx:Gs.boolean(),absCaptureTime:Gs.boolean(),dependencyDescriptor:Gs.boolean(),mediaStream:Gs.alternatives().try(Gs.array().items(Gs.object()),Gs.object()),bandwidth:Gs.number(),metadata:Gs.boolean(),disableVideo:Gs.boolean(),disableAudio:Gs.boolean(),codec:Gs.string().valid(...w.values(Ji)),simulcast:Gs.boolean(),scalabilityMode:Gs.string(),peerConfig:Gs.object(),record:Gs.boolean(),events:Gs.array().items(Gs.string().valid("active","inactive","viewercount")),priority:Gs.number()}),{error:i,value:s}=e.validate(t);i&&Qs.warn(i,s),this.options=y(d(d({},Js),t),{peerConfig:d(d({},Js.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.options.metadata=this.options.metadata&&this.options.codec===Ji.H264&&!this.options.disableVideo,await this.initConnection({migrate:!1})}async reconnect(t){var e,i;this.options.mediaStream=null!=(i=null==(e=this.webRTCPeer)?void 0:e.getTracks())?i:this.options.mediaStream,super.reconnect(t)}async replaceConnection(){var t,e;Qs.info("Migrating current connection"),this.options.mediaStream=null!=(e=null==(t=this.webRTCPeer)?void 0:t.getTracks())?e:this.options.mediaStream,await this.initConnection({migrate:!0})}async record(){var t;this.recordingAvailable?(this.options.record=!0,await(null==(t=this.signaling)?void 0:t.cmd("record")),Qs.info("Broadcaster start recording")):Qs.error("Record not available")}async unrecord(){var t;this.recordingAvailable?(this.options.record=!1,await(null==(t=this.signaling)?void 0:t.cmd("unrecord")),Qs.info("Broadcaster stop recording")):Qs.error("Unrecord not available")}stop(){var t;super.stop(),null==(t=this.worker)||t.terminate(),this.worker=null}async initConnection(t){var e,i;let s,n;if(Qs.debug("Broadcast option values: ",this.options),this.stopReconnection=!1,!this.options.mediaStream)throw Qs.error("Error while broadcasting. MediaStream required"),new m("MediaStream required");if(!t.migrate&&this.isActive())throw Qs.warn("Broadcast currently working"),new m("Broadcast currently working");try{n=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==n?void 0:n.iceServers,this.options.peerConfig.encodedInsertableStreams=this.options.metadata}catch(t){throw Qs.error("Error generating token."),t instanceof Es&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!n)throw Qs.error("Error while broadcasting. Publisher data required"),new m("Publisher data required");const r=Fs(n.jwt);if(this.streamName=r.millicast.streamName,this.recordingAvailable=r[Ws.atob("bWlsbGljYXN0")].record,this.options.record&&!this.recordingAvailable)throw Qs.error("Error while broadcasting. Record option detected but recording is not available"),new m("Record option detected but recording is not available");const o=new Ss({streamName:this.streamName,url:"".concat(n.urls[0],"?token=").concat(n.jwt)}),h=t.migrate?new rs:this.webRTCPeer;await h.createRTCPeer(this.options.peerConfig,es),null==(e=this.stopReemitingWebRTCPeerInstanceEvents)||e.call(this),null==(i=this.stopReemitingSignalingInstanceEvents)||i.call(this),this.stopReemitingWebRTCPeerInstanceEvents=Ct(h,this,[ss.connectionStateChange]),this.stopReemitingSignalingInstanceEvents=Ct(o,this,[As]);const a=h.getRTCLocalSDP(this.options),u=o.connect();s=await Promise.all([a,u]);const c=s[0];this.options.metadata&&(this.worker||(this.worker=new js),this.getRTCPeerConnection().getSenders().forEach((t=>{if(qs)t.transform=new RTCRtpScriptTransform(this.worker,{name:"senderTransform",codec:this.options.codec});else if(zs){const{readable:e,writable:i}=t.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-sender",codec:this.options.codec,readable:e,writable:i},[e,i])}})));let l=this.signaling;this.signaling=o;const d=this.signaling.publish(c,this.options),f=h.peer.setLocalDescription(h.sessionDescription);s=await Promise.all([d,f]);let _=s[0];!this.options.disableVideo&&this.options.bandwidth>0&&(_=h.updateBandwidthRestriction(_,this.options.bandwidth)),await h.setRTCRemoteSDP(_),Qs.info("Broadcasting to streamName: ",this.streamName);let v=this.webRTCPeer;this.webRTCPeer=h,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ss.connectionStateChange,(t=>{var e,i;["connected","disconnected","failed","closed"].includes(t)&&(null==(e=null==l?void 0:l.close)||e.call(l),null==(i=null==v?void 0:v.closeRTCPeer)||i.call(v),l=v=null)}))}sendMetadata(t,e){var i;if(void 0===e&&(e="d40e38ea-d419-4c62-94ed-20ac37b4e4fa"),null!=(i=this.options)&&i.metadata&&this.worker)this.worker.postMessage({action:"metadata-sei-user-data-unregistered",uuid:e,payload:t});else{let t="Could not send metadata due to:";this.options?this.options.metadata?this.worker||(t+="\n- Stream not being published."):(t+="\n- Metadata option is not enabled.",this.options.codec!==Ji.H264&&(t+="\n- Incompatible codec. Only H264 available."),this.options.disableVideo&&(t+="\n- Video disabled.")):t+="\n- Stream not being published.",Qs.warn(t)}}constructor(t,e,i=!0){t&&Qs.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,e,Qs,i)}},t.Signaling=Ss,t.View=class extends Hs{async connect(t){void 0===t&&(t=zr),this.options=y(d(d({},zr),t),{peerConfig:d(d({},zr.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.eventQueue.length=0,await this.initConnection({migrate:!1})}async select(t){void 0===t&&(t={}),Xr.debug("Viewer select layer values: ",t),await this.signaling.cmd("select",{layer:t}),Xr.info("Connected to streamName: ",this.streamName)}async addRemoteTrack(t,e){Xr.info("Viewer adding remote track",t);const i=await this.webRTCPeer.addRemoteTrack(t,e);for(const t of e)t.addTrack(i.receiver.track);return i}async project(t,e){for(const t of e){if(!t.trackId&&!t.media)throw Xr.error("Error in projection mapping, trackId or mediaId must be set"),new m("Error in projection mapping, trackId or mediaId must be set");const e=this.webRTCPeer.getRTCPeer();if(t.mediaId&&!e.getTransceivers().find((e=>e.mid===t.mediaId.toString())))throw Xr.error("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers")),new m("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers"))}Xr.debug("Viewer project source: layer mappings: ",t,e),await this.signaling.cmd("project",{sourceId:t,mapping:e}),Xr.info("Projection done")}async unproject(t){Xr.debug("Viewer unproject mediaIds: ",t),await this.signaling.cmd("unproject",{mediaIds:t}),Xr.info("Unprojection done")}async replaceConnection(){Xr.info("Migrating current connection"),await this.initConnection({migrate:!0})}stop(){var t,e;super.stop(),null==(t=this.drmOptionsMap)||t.clear(),this.DRMProfile=null,null==(e=this.worker)||e.terminate(),this.worker=null,this.payloadTypeCodec={},this.tracksMidValues={},this.eventQueue.length=0}async initConnection(t){var e;let i,s;if(Xr.debug("Viewer connect options values: ",this.options),this.stopReconnection=!1,!t.migrate&&this.isActive())throw Xr.warn("Viewer currently subscribed"),new m("Viewer currently subscribed");try{s=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==s?void 0:s.iceServers,this.options.peerConfig.encodedInsertableStreams=zs&&(this.options.enableDRM||this.options.metadata)}catch(t){throw Xr.error("Error generating token."),t instanceof Es&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!s)throw Xr.error("Error while subscribing. Subscriber data required"),new m("Subscriber data required");const n=Fs(s.jwt);this.streamName=n.millicast.streamName;const r=new Ss({streamName:this.streamName,url:"".concat(s.urls[0],"?token=").concat(s.jwt)});s.subscriberToken&&(this.subscriberToken=s.subscriberToken);const o=t.migrate?new rs:this.webRTCPeer;await o.createRTCPeer(this.options.peerConfig),null==(e=this.stopReemitingWebRTCPeerInstanceEvents)||e.call(this),this.stopReemitingWebRTCPeerInstanceEvents=Ct(o,this,w.values(ss).filter((t=>t!==ss.track))),this.options.metadata&&(this.worker||(this.worker=new js),this.worker.onmessage=t=>{if("metadata"===t.data.event){const e=new TextDecoder,i=t.data.metadata;if(i.mid=t.data.mid,i.track=this.tracksMidValues[t.data.mid],i.uuid){const t=i.uuid;i.uuid=t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),""),i.uuid=i.uuid.replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")}if(i.timecode&&(i.timecode=new Date(e.decode(i.timecode))),i.unregistered){const t=e.decode(i.unregistered);try{const e=JSON.parse(t);i.unregistered=e}catch(t){Xr.info("The content could not be converted to JSON, returning raw bytes instead")}}this.emit("metadata",i),this.emit("onMetadata",i)}}),o.on(ss.track,(t=>{this.isMainStreamActive?this.onTrackEvent(t):this.eventQueue.push(t)})),r.on(As,(async t=>{if(this.isMainStreamActive||"active"!==t.name)"inactive"===t.name&&this.isMainStreamActive&&this.mainSourceId===t.data.sourceId&&(this.isMainStreamActive=!1),this.emit(As,t);else{if(this.mainSourceId=t.data.sourceId,!this.DRMProfile&&t.data.encryption){const t=await this.tokenGenerator();t.drmObject&&(this.DRMProfile=t.drmObject)}for(this.emit(As,t),this.isMainStreamActive=!0;this.eventQueue.length>0;)this.onTrackEvent(this.eventQueue.shift())}}));const h=o.getRTCLocalSDP(y(d({},this.options),{stereo:!0})),a=r.connect();i=await Promise.all([h,a]);const c=i[0];let l=this.signaling;this.signaling=r;const f=this.signaling.subscribe(c,y(d({},this.options),{vad:this.options.multiplexedAudioTracks>0})),_=o.peer.setLocalDescription(o.sessionDescription);i=await Promise.all([f,_]);const v=i[0];this.payloadTypeCodec=ji.getCodecPayloadType(v),await o.setRTCRemoteSDP(v),Xr.info("Connected to streamName: ",this.streamName);let g=this.webRTCPeer;this.webRTCPeer=o,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ss.connectionStateChange,(t=>{var e,i;"connected"===t?u((()=>{var t,e;null==(t=null==l?void 0:l.close)||t.call(l),null==(e=null==g?void 0:g.closeRTCPeer)||e.call(g),l=g=null,Xr.info("Current connection migrated")}),1e3):["disconnected","failed","closed"].includes(t)&&(null==(e=null==l?void 0:l.close)||e.call(l),null==(i=null==g?void 0:g.closeRTCPeer)||i.call(g),l=g=null)}))}onTrackEvent(t){var e,i,n;if(this.tracksMidValues[null==(e=t.transceiver)?void 0:e.mid]=t.track,this.isDRMOn){const e=t.transceiver.mid,i=this.getDRMConfiguration(e);try{!function(t,e){const i=mr;var n,r;const o=t[i(629)][i(524)];"video"===o&&(t[i(661)][i(475)]=t[i(661)][i(451)]=t[i(661)][i(605)]=0);const h=Zr(e),a=h[i(497)].videoElement,u=h[i(497)][i(628)];if(h[i(607)]){if(h[i(497)].customTransform)s.clRtcDrmDebugLog&&console[i(556)](i(468)+i(572));else if(s[i(600)]&&console[i(556)](i(467)+(i(wr?589:609)+i(617))),wr){if(h[i(544)]=function(t){const e=mr,i=s[e(493)]||s[e(488)],n=s[e(666)],r=s[e(586)];if(!(i&&n&&r&&t))return null;const o=new n([t]);return new r(i[e(631)](o))}(Gr),null==h[i(544)])throw new m(i(539));h[i(544)][i(485)]=t=>{const e=i;t[e(496)][e(567)]===e(471)?Fr(h,t[e(496)].frame,null):Wr(h,t[e(496)][e(651)],null)},t[i(661)].transform=new RTCRtpScriptTransform(h.worker,{operation:o})}else{const e=o===i(471)?Fr:Wr,s={drm:h,transform:(t,i)=>{e(h,t,i)}},n=t.receiver.createEncodedStreams(),r=new TransformStream({transform:s.transform[i(656)](s)}),{readable:a,writable:u}=n;a[i(577)](r)[i(635)](u)}if("audio"===o&&(null===(n=h[i(497)][i(463)])||void 0===n?void 0:n.encryption)===i(670)){if(!u)return void console.warn(i(690));u[i(588)]!==t[i(481)][0]&&(u[i(588)]=t[i(481)][0]),h[i(497)].videoElement&&(t[i(661)][i(475)]=t[i(661)].jitterBufferDelayHint=t[i(661)][i(605)]=h[i(497)][i(482)],Hr(h,t[i(661)]))}else"video"===o&&"clear"===(null===(r=h.config[i(471)])||void 0===r?void 0:r[i(619)])&&a[i(588)]!==t[i(481)][0]&&(a.srcObject=t.streams[0])}else a[i(588)]!==t[i(481)][0]&&(a.srcObject=t[i(481)][0])}(t,i)}catch(t){Xr.error("Failed to apply DRM on media Id:",e,"error is: ",t),this.emit("error",new m("Failed to apply DRM on media Id: "+e+" error is: "+t))}this.worker||(this.worker=new js),this.worker.addEventListener("message",(t=>{"complete"===t.data.event&&function(t,e,i){const s=mr,n=Zr(i);t[s(580)]?Fr(n,t,e):Wr(n,t,e)}(t.data.frame,null,i)}))}if(this.options.metadata)if(qs)t.receiver.transform=new RTCRtpScriptTransform(this.worker,{name:"receiverTransform",payloadTypeCodec:d({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(i=t.transceiver)?void 0:i.mid});else if(zs){const{readable:e,writable:i}=t.receiver.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-receiver",payloadTypeCodec:d({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(n=t.transceiver)?void 0:n.mid,readable:e,writable:i},[e,i])}this.emit(ss.track,t)}getDRMConfiguration(t){return this.drmOptionsMap?this.drmOptionsMap.get(t):null}async onRtcDrmFetch(t,e){return e.headers||(e.headers=new Headers),e.headers.get("x-dt-custom-data")&&e.headers.delete("x-dt-custom-data"),this.subscriberToken?e.headers.append("Authorization","Bearer ".concat(this.subscriberToken)):Xr.warn("onRtcDrmFetch: no subscriberToken"),fetch(t,e)}configureDRM(t){if(!t)throw new m("Required DRM options is not provided");this.drmOptionsMap||(this.drmOptionsMap=new Map);const e={merchant:"dolby",environment:Gn.Production,customTransform:this.options.metadata,videoElement:t.videoElement,audioElement:t.audioElement,video:{codec:"H264",encryption:"cbcs",keyId:$s(t.videoEncryptionParams.keyId),iv:$s(t.videoEncryptionParams.iv)},audio:{codec:"opus",encryption:"clear"},onFetch:this.onRtcDrmFetch.bind(this)};t.mediaBufferMs&&(e.mediaBufferMs=t.mediaBufferMs),this.DRMProfile&&(this.DRMProfile.playReadyUrl&&(e.prLicenseUrl=this.DRMProfile.playReadyUrl),this.DRMProfile.widevineUrl&&(e.wvLicenseUrl=this.DRMProfile.widevineUrl),this.DRMProfile.fairPlayUrl&&(e.fpsLicenseUrl=this.DRMProfile.fairPlayUrl),this.DRMProfile.fairPlayCertUrl&&(e.fpsCertificateUrl=this.DRMProfile.fairPlayCertUrl));try{Ur(e),this.drmOptionsMap.set(t.videoMid,e),t.audioMid&&this.drmOptionsMap.set(t.audioMid,e),e.videoElement.addEventListener("rtcdrmerror",(t=>{Xr.error("DRM error: ",t.detail.message,"in video element:",e.videoElement.id),this.emit("error",new m(t.detail.message))}))}catch(e){Xr.error("Failed to configure DRM with options:",t,"error is:",e)}}removeDRMConfiguration(t){var e;null==(e=this.drmOptionsMap)||e.delete(t)}get isDRMOn(){return!!this.drmOptionsMap&&this.drmOptionsMap.size>0}exchangeDRMConfiguration(t,e){const i=this.getDRMConfiguration(t),s=this.getDRMConfiguration(e);if(null===i)throw new m("No DRM configuration found for "+t);if(null===s)throw new m("No DRM configuration found for "+e);tn(i.video,s.video,"keyId"),tn(i.video,s.video,"iv");try{Ur(i)}catch(t){Xr.error("Failed to configure DRM with options:",i,"error is:",t)}try{Ur(s)}catch(t){Xr.error("Failed to configure DRM with options:",s,"error is:",t)}}constructor(t,e,i=null,s=!0){t&&Xr.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,e,Xr,s),this.payloadTypeCodec={},this.tracksMidValues={},this.drmOptionsMap=null,this.eventQueue=[],this.isMainStreamActive=!1,i&&(this.on(ss.track,(t=>{i.srcObject=t.streams[0]})),Xr.warn("The mediaElement property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, do this in either the `track` or the `active` broadcast event."))}},w.defineProperty(t,El.toStringTag,{value:"Module"})}))})),Yl=Ke((t=>{"use strict";function e(){const t=ql();return e=function(){return t},t}r(),w.defineProperty(t,"__esModule",{value:!0}),function(t,e){for(var i in e)w.defineProperty(t,i,{enumerable:!0,get:e[i]})}(t,{Director:function(){return e().Director},Logger:function(){return e().Logger},View:function(){return e().View}})})),Kl=Ke(((t,e)=>{r(),e.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Ql=Ke(((t,e)=>{r(),e.exports=function(t,e){var i=e[0],s=e[1],n=e[2],r=e[3],o=i+i,h=s+s,a=n+n,u=i*o,c=s*o,l=s*h,d=n*o,f=n*h,_=n*a,v=r*o,g=r*h,m=r*a;return t[0]=1-l-_,t[1]=c+m,t[2]=d-g,t[3]=0,t[4]=c-m,t[5]=1-u-_,t[6]=f+v,t[7]=0,t[8]=d+g,t[9]=f-v,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Jl=Ke(((t,e)=>{r(),e.exports=function(t,e,i){var s,n,r,o=i[0],h=i[1],a=i[2],u=_.sqrt(o*o+h*h+a*a);if(_.abs(u)<1e-6)return null;return o*=u=1/u,h*=u,a*=u,s=_.sin(e),n=_.cos(e),r=1-n,t[0]=o*o*r+n,t[1]=h*o*r+a*s,t[2]=a*o*r-h*s,t[3]=0,t[4]=o*h*r-a*s,t[5]=h*h*r+n,t[6]=a*h*r+o*s,t[7]=0,t[8]=o*a*r+h*s,t[9]=h*a*r-o*s,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),$l=Ke(((t,e)=>{r(),e.exports=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}})),td=Ke(((t,e)=>{r(),e.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),ed=Ke(((t,e)=>{r(),e.exports=function(t,e){var i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],h=e[5],a=e[6],u=e[7],c=e[8],l=e[9],d=e[10],f=e[11],_=e[12],v=e[13],g=e[14],m=e[15],p=i*h-s*o,w=i*a-n*o,y=i*u-r*o,b=s*a-n*h,A=s*u-r*h,S=n*u-r*a,T=c*v-l*_,k=c*g-d*_,E=c*m-f*_,x=l*g-d*v,I=l*m-f*v,R=d*m-f*g,C=p*R-w*I+y*x+b*E-A*k+S*T;if(!C)return null;return C=1/C,t[0]=(h*R-a*I+u*x)*C,t[1]=(n*I-s*R-r*x)*C,t[2]=(v*S-g*A+m*b)*C,t[3]=(d*A-l*S-f*b)*C,t[4]=(a*E-o*R-u*k)*C,t[5]=(i*R-n*E+r*k)*C,t[6]=(g*y-_*S-m*w)*C,t[7]=(c*S-d*y+f*w)*C,t[8]=(o*I-h*E+u*T)*C,t[9]=(s*E-i*I-r*T)*C,t[10]=(_*A-v*y+m*p)*C,t[11]=(l*y-c*A-f*p)*C,t[12]=(h*k-o*x-a*T)*C,t[13]=(i*x-s*k+n*T)*C,t[14]=(v*w-_*b-g*p)*C,t[15]=(c*b-l*w+d*p)*C,t}})),id=Ke(((t,e)=>{r(),e.exports=function(t,e,i){var s=e[0],n=e[1],r=e[2],o=e[3],h=e[4],a=e[5],u=e[6],c=e[7],l=e[8],d=e[9],f=e[10],_=e[11],v=e[12],g=e[13],m=e[14],p=e[15],w=i[0],y=i[1],b=i[2],A=i[3];return t[0]=w*s+y*h+b*l+A*v,t[1]=w*n+y*a+b*d+A*g,t[2]=w*r+y*u+b*f+A*m,t[3]=w*o+y*c+b*_+A*p,w=i[4],y=i[5],b=i[6],A=i[7],t[4]=w*s+y*h+b*l+A*v,t[5]=w*n+y*a+b*d+A*g,t[6]=w*r+y*u+b*f+A*m,t[7]=w*o+y*c+b*_+A*p,w=i[8],y=i[9],b=i[10],A=i[11],t[8]=w*s+y*h+b*l+A*v,t[9]=w*n+y*a+b*d+A*g,t[10]=w*r+y*u+b*f+A*m,t[11]=w*o+y*c+b*_+A*p,w=i[12],y=i[13],b=i[14],A=i[15],t[12]=w*s+y*h+b*l+A*v,t[13]=w*n+y*a+b*d+A*g,t[14]=w*r+y*u+b*f+A*m,t[15]=w*o+y*c+b*_+A*p,t}})),sd=Ke(((t,e)=>{r(),e.exports=function(t,e,i,s,n){var r=1/_.tan(e/2),o=1/(s-n);return t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+s)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*s*o,t[15]=0,t}})),nd=Ke(((t,e)=>{r(),e.exports=function(t,e,i,s){var n,r,o,h,a,u,c,l,d,f,v,g,m,p,w,y,b,A,S,T,k,E,x,I,R=s[0],C=s[1],P=s[2],D=_.sqrt(R*R+C*C+P*P);if(_.abs(D)<1e-6)return null;R*=D=1/D,C*=D,P*=D,n=_.sin(i),r=_.cos(i),o=1-r,h=e[0],a=e[1],u=e[2],c=e[3],l=e[4],d=e[5],f=e[6],v=e[7],g=e[8],m=e[9],p=e[10],w=e[11],y=R*R*o+r,b=C*R*o+P*n,A=P*R*o-C*n,S=R*C*o-P*n,T=C*C*o+r,k=P*C*o+R*n,E=R*P*o+C*n,x=C*P*o-R*n,I=P*P*o+r,t[0]=h*y+l*b+g*A,t[1]=a*y+d*b+m*A,t[2]=u*y+f*b+p*A,t[3]=c*y+v*b+w*A,t[4]=h*S+l*T+g*k,t[5]=a*S+d*T+m*k,t[6]=u*S+f*T+p*k,t[7]=c*S+v*T+w*k,t[8]=h*E+l*x+g*I,t[9]=a*E+d*x+m*I,t[10]=u*E+f*x+p*I,t[11]=c*E+v*x+w*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t}})),rd=Ke(((t,e)=>{r(),e.exports=function(t,e,i){var s,n,r,o,h,a,u,c,l,d,f,_,v=i[0],g=i[1],m=i[2];e===t?(t[12]=e[0]*v+e[4]*g+e[8]*m+e[12],t[13]=e[1]*v+e[5]*g+e[9]*m+e[13],t[14]=e[2]*v+e[6]*g+e[10]*m+e[14],t[15]=e[3]*v+e[7]*g+e[11]*m+e[15]):(s=e[0],n=e[1],r=e[2],o=e[3],h=e[4],a=e[5],u=e[6],c=e[7],l=e[8],d=e[9],f=e[10],_=e[11],t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=h,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=_,t[12]=s*v+h*g+l*m+e[12],t[13]=n*v+a*g+d*m+e[13],t[14]=r*v+u*g+f*m+e[14],t[15]=o*v+c*g+_*m+e[15]);return t}}));r();var Ci=function(t){return t[t.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",t[t.LICENSE_ERROR=2e3]="LICENSE_ERROR",t[t.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",t[t.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",t[t.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",t[t.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",t[t.SOURCE_INVALID=3e3]="SOURCE_INVALID",t[t.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",t[t.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",t[t.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",t[t.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",t[t.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",t[t.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",t[t.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",t[t.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",t[t.MEDIA_ABORTED=5004]="MEDIA_ABORTED",t[t.NETWORK_ERROR=6e3]="NETWORK_ERROR",t[t.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",t[t.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",t[t.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",t[t.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",t[t.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",t[t.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",t[t.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",t[t.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",t[t.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",t[t.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",t[t.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",t[t.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",t[t.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",t[t.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",t[t.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",t[t.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",t[t.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",t[t.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",t[t.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",t[t.AD_ERROR=1e4]="AD_ERROR",t[t.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",t[t.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",t[t.PICTURE_IN_PICTURE_ERROR=11001]="PICTURE_IN_PICTURE_ERROR",t[t.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",t[t.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",t[t.THEO_LIVE_UNKNOWN_ERROR=13e3]="THEO_LIVE_UNKNOWN_ERROR",t[t.THEO_LIVE_CHANNEL_NOT_FOUND=13001]="THEO_LIVE_CHANNEL_NOT_FOUND",t[t.THEO_LIVE_END_OF_DEMO=13002]="THEO_LIVE_END_OF_DEMO",t[t.THEO_LIVE_ANALYTICS_ERROR=13003]="THEO_LIVE_ANALYTICS_ERROR",t}({}),lr=function(t){return t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE",t[t.THEOLIVE=13]="THEOLIVE",t}({});!function(t){t.fromCode=function(e){const i=_.floor(e/1e3);if(i in t)return i;throw new g("Invalid error code: "+e)}}(lr||(lr={})),r(),r(),r(),r(),r(),r(),r(),r();var od=function(t){return t.Tv="web",t.Ev="android",t.xv="android-tv",t.Iv="ios",t.Rv="tvos",t.Cv="chromecast",t.Pv="theoliveweb",t}({});var q=Bl?Bl.userAgent:"",hd=q.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),ad=q.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),ud=q.match(/Android ([0-9\.]+)/i),cd=q.match(/Windows NT ([0-9\.]+)/i),ld=q.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),dd=q.match(/Firefox\/([0-9\.]+)/i),fd=q.match(/OPR\/(\d+\.\d+)/i),_d=q.match(/Tizen ([0-9\.]+)/i),vd=q.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),gd=q.match(/HbbTV\/([0-9.]+)/i),md=class{get Qe(){return this.Dv}get Nv(){return this.Mv}get Lv(){return this.Bv}get Ov(){return this.Fv}get Vv(){return this.Wv}get Uv(){return this.Gv}get Zv(){return this.Hv}get Xv(){return this.zv}get qv(){return this.Yv}get Kv(){return this.Qv}get Jv(){return this.$v}get su(){return this.eg}get rg(){return this.og}get hg(){return this.ag||this.cg}get ud(){return this.dg}get Qs(){return this.fg}get _g(){return this.vg}get gg(){return this.pg}get wg(){var t;return null!=(t=this.yg)?t:this.Ag}get Sg(){return this.Tg}get Eg(){var t;return(null==(t=s.chrome)?void 0:t.webview)&&this.xg>0}get Ig(){return this.xg}get Rg(){return this.Cg}get Pg(){return this.Dg}get Ng(){return this.Mg}get Lg(){return this.Bg}get Og(){return this.Fg}get Vg(){return this.Wg}get Ug(){return this.Gg}get Zg(){return this.Hg}get Xg(){return this.zg}get qg(){return this.Yg}get Kg(){return this.jg}get Qg(){return this.Jg}get $g(){return this.im}get nm(){return 0===this.hm&&Ya.su?this.og:this.hm}get um(){return this.lm}get dm(){return this.fm}get _m(){return this.vm}get gm(){return this.pm}get wm(){return!(!this.Ng&&!this.Rg)&&this.wg<=56}get ym(){return this.Am}get Sm(){return this.Tm}get Em(){return this.xm}get Im(){return this.Rm}get Cm(){return this.Pm}get Dm(){return this.Nm}get Mm(){return this.Lm}get Bm(){return this.Om}get IS_IOS_CHROME(){return this.Fm}constructor(){this.Dv=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||Bl&&Bl.msMaxTouchPoints),this.Mv=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(q)||/(macintosh|mac(?=_powerpc)\s)/i.test(q),this.Bv=/Windows NT/i.test(q),this.Fv=cd?C(cd[1]):0,this.Wv=/Android/i.test(q),this.Gv=ud?C(ud[1]):0,this.Hv=/windows phone (8|8\.1)/i.test(q),this.zv=/iPhone/i.test(q),this.Yv=/iPad/i.test(q),this.Qv=this.Mv&&this.Dv&&!this.Yv,this.$v=/iPod/i.test(q),this.dg=/Mobile Safari/i.test(q),this.ag=/EOS\d*STB/i.test(q),this.cg=/APP\d*STB/i.test(q),this.eg=(this.zv||this.Yv||this.Qv||this.$v)&&!this.Hv,this.og=vd?C(vd[2]):0,this.fg=this.Hv||this.eg||this.Wv||this.dg,this.vg=/CriOS/i.test(q),this.pg=Boolean(self.chrome&&/google/i.test(Bl.vendor))||this.vg,this.Tg=this.pg&&/Edg\//i.test(Bl.userAgent),this.xg=ad?x(ad[1],10):0,this.Fm=Boolean(/CriOS/i.test(q)),this.Om=Boolean(self.chrome||/Chrome/i.test(q)||this.Fm),this.Ag=hd?x(hd[1],10):0,this.Cg=/SMART-TV.*Tizen/i.test(q),this.Dg=_d?C(_d[1]):0,this.yg=this.Dg>0?function(t){return t>=8?108:t>=7?94:t>=6.5?85:t>=6?76:t>=5.5?69:t>=5?63:t>=4?56:t>=3?47:0}(this.Dg):void 0,this.Mg=/webos|web0s/i.test(q),this.Bg=/HbbTV/i.test(q),this.Fg=!!gd&&function(t){if(!t)return!1;const e=t.split(".").map(Number);return 3===e.length&&1===e[0]&&2===e[1]}(gd[1]),this.Wg=/VIZIO/i.test(q),this.Gg=/Edge\/\d+/i.test(q),this.Hg=/Trident/i.test(q),this.zg=this.Hg&&!self.ActiveXObject&&"ActiveXObject"in self,this.Yg=/Vivaldi/i.test(q),this.jg=/Firefox/i.test(q)&&!/Seamonkey/i.test(q),this.Jg=dd?C(dd[1]):0,this.im=/Safari/i.test(q)&&!/Chrome/i.test(q)&&!this.Hv&&!this.Cg,this.hm=ld?C(ld[2]):0,this.lm=Boolean(fd),this.fm=fd?C(fd[1]):0,this.vm=/CrKey/.test(q),this.pm=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(q),this.Am=/PlayStation 4/i.test(q),this.Tm="web"===od.xv,this.xm="web"===od.Ev,this.Rm=this.xm||this.Tm,this.Pm="web"===od.Iv,this.Nm="web"===od.Rv,this.Lm="web"===od.Cv}};md.Vm=new md;var Ya=md.Vm;r();var Da={}.hasOwnProperty,pd={}.toString;function ol(t){return null!=t}function Sh(t){return void 0===t}var As,Qc=Array.isArray||function(t){return"[object Array]"===pd.call(t)};function Fu(t){return Vt(t)&&Da.call(t,"length")&&Vr(t.length)}function Vt(t){return"object"==typeof t&&null!==t}function wd(t){return Vt(t)&&t.constructor&&t.constructor===w}function oi(t){return"string"==typeof t}function yd(t){return"boolean"==typeof t}function ei(t){return ol(t)&&"function"==typeof t.then}function bd(t){return"[object Date]"===pd.call(t)}function Vr(t){return"number"==typeof t}function Ad(t){return"function"==typeof t}function Sd(t){return Ad(t)||Vt(t)}function We(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Or(t){let e;for(;ol(e=t.firstChild);)t.removeChild(e)}function Td(t,e){let i;for(;ol(i=t.firstChild);)e.appendChild(i)}function kd(t,e){t.insertBefore(e,t.firstChild)}function Ed(t){const e=t.className;return"string"==typeof e?e:e&&"string"==typeof e.baseVal?e.baseVal:""}function xd(t,e){const i=t.className;"string"==typeof i?t.className=e:i&&"string"==typeof i.baseVal&&(i.baseVal=e)}function Id(t,e){return void 0!==t.classList?t.classList.contains(e):void 0!==t.className&&-1!==(" "+Ed(t)+" ").indexOf(" "+e+" ")}function hn(t,e){if(void 0!==t.classList)t.classList.add(e);else if(void 0!==t.className){const i=Ed(t);-1===(" "+i+" ").indexOf(" "+e+" ")&&xd(t,(i+" "+e).trim())}}function Rd(t,e){if(void 0!==t.classList)t.classList.remove(e);else if(void 0!==t.className){let i=" "+Ed(t)+" ";const s=" "+e+" ";for(;-1!==i.indexOf(s);)i=i.replace(s," ");xd(t,i.trim())}}function Cd(t,e,i){void 0===i&&(i=!Id(t,e)),i?hn(t,e):Rd(t,e)}function Pd(t){t.stopPropagation()}function Dd(t,e){Ya.Rg&&Ya.Pg<3?function(t,e){let i=e;switch(e){case"flex":i="-webkit-flex";break;case"inline-flex":i="-webkit-inline-flex"}t.display=i}(t,e):function(t,e){if(t.display=e,t.display!==e){let i=e;switch(e){case"flex":i="-ms-flexbox";break;case"inline-flex":i="-ms-inline-flexbox"}t.display=i}}(t,e)}function Nd(t,e){const i=e.style;if(i)for(const e of w.keys(t)){const s=t[e];void 0!==s&&(i[e]=s)}}function Ka(t){const e=t.style;e.position="absolute",e.left="0",e.right="0",e.top="0",e.bottom="0",e.width="100%",e.height="100%"}function Md(t){const e=t.style;e.position="",e.left="",e.right="",e.top="",e.bottom="",e.width="",e.height=""}function Ld(t){t.removeAttribute("title")}function Bd(t){t.addEventListener("mouseover",(t=>{Ld(t.target)}))}function Od(t){try{return Boolean(t)&&t.parent!==t}catch(t){return!1}}r(),r();var M=()=>{},yo=t=>t;function Fd(t,e){let i=-1/0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=As.Wm();o-i>=e&&(t.apply(this,n),i=o)}}function Vd(t,e){let i=0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=this;0!==i&&As.Um(i),i=As.Gm((()=>{i=0,t.apply(o,n)}),e)}}function Wd(t){let e;return()=>(void 0!==t&&(e=t(),t=void 0),e)}function Gi(t,e,i){if(null!=e){if("object"!=typeof e&&"function"!=typeof e)throw new g("Object expected.");var s,n;if(i){if(!Mt)throw new g("Symbol.asyncDispose is not defined.");s=e[Mt]}if(void 0===s){if(!Il)throw new g("Symbol.dispose is not defined.");s=e[Il],i&&(n=s)}if("function"!=typeof s)throw new g("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(t){return Promise.reject(t)}}),t.stack.push({value:e,dispose:s,async:i})}else i&&t.stack.push({async:!0});return e}r(),r(),r();var Ud="function"==typeof SuppressedError?SuppressedError:function(t,e,i){var s=new m(i);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function ce(t){function e(e){t.error=t.hasError?new Ud(e,t.error,"An error was suppressed during disposal."):e,t.hasError=!0}var i,s=0;return function n(){for(;i=t.stack.pop();)try{if(!i.async&&1===s)return s=0,t.stack.push(i),Promise.resolve().then(n);if(i.dispose){var r=i.dispose.call(i.value);if(i.async)return s|=2,Promise.resolve(r).then(n,(function(t){return e(t),n()}))}else s|=1}catch(t){e(t)}if(1===s)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}()}function Le(t,e){return Zd(t.slice(),e)}function Gd(t,e){const i=Zd(t,e);return i!==t&&Hd(i,void 0,t.length,t),t}function Zd(t,e){let i=t;const s=i.length;if(s<=1)return i;let n=new Array(s);for(let t=1;t<s;t*=2){Hd(i,e,t,n);const s=i;i=n,n=s}return i}function Hd(t,e,i,s){const n=t.length;let r=0;const o=2*i;let h,a,u,c,l;for(a=0;a<n;a+=o)for(u=a+i,h=u+i,u>n&&(u=n),h>n&&(h=n),c=a,l=u;;)if(c<u&&l<h)e&&e(t[c],t[l])<=0?s[r++]=t[c++]:s[r++]=t[l++];else if(c<u)s[r++]=t[c++];else{if(!(l<h))break;s[r++]=t[l++]}}r(),r(),r(),r(),r(),r();var Eu=9007199254740991,Xd=2**-52;function bi(t,e,i){return _.min(_.max(t,e),i)}function rs(t,e,i){return t===e||_.abs(t-e)<=i}function zd(t,e){if(t===e)return!0;const i=_.abs(t-e);if(i<Xd)return!0;return i<_.max(_.abs(t),_.abs(e))*Xd}function qd(t,e){return t%e+(t<0?e:0)}function Yd(t){return t!=t}function Kd(t,e){return t===e||Yd(t)&&Yd(e)}function jd(t,e){let i=t,s=e;for(;0!==s;){const t=i%s;i=s,s=t}return i<0?-i:i}function Mh(t,e){return t.reduce(((t,i)=>t+e(i)),0)}var $c=function(t){return t[t.eh=0]="eh",t[t.Zm=1]="Zm",t[t.Hm=-1]="Hm",t}({}),Qd=(t,e)=>(0|t)-(0|e),Va=(t,e)=>t===e?0:t<e?-1:t>e?1:S(t)?S(e)?0:1:-1;function Jd(t,e,i){return rs(t,e,i)?0:Va(t,e)}var $d=(t,e)=>zd(t,e)?0:Va(t,e);var tf="function"==typeof Array.prototype.find?(t,e)=>t.find(e):(t,e)=>{const i=qr(t,e);return-1===i?void 0:t[i]},Do=tf,ef="function"==typeof Array.prototype.findLast?(t,e)=>t.findLast(e):(t,e)=>{const i=sf(t,e);return-1===i?void 0:t[i]},sr=ef,qr="function"==typeof Array.prototype.findIndex?(t,e)=>t.findIndex(e):(t,e)=>{for(let i=0;i<t.length;i+=1){if(e(t[i],i,t))return i}return-1},sf="function"==typeof Array.prototype.findLastIndex?(t,e)=>t.findLastIndex(e):(t,e)=>{for(let i=t.length-1;i>=0;i-=1){if(e(t[i],i,t))return i}return-1},Jr="function"==typeof Array.prototype.at?(t,e)=>t.at(e):(t,e)=>{const i=t.length,s=e>=0?e:i+e;return s<0||s>=i?void 0:t[s]};function _e(t,e){const i=t.indexOf(e);return-1!==i&&(wa(t,i),!0)}function wa(t,e){0===e?t.shift():t.splice(e,1)}function nf(t,e){const i=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===e){n++,i.length-=1;break}i[s++]=t[n++]}for(;n<t.length;)i[s++]=t[n++];return i}function fh(t,e){return-1!==t.indexOf(e)}function rf(t,e,i){if(t===e)return!0;if(t.length!==e.length)return!1;for(let s=0;s<t.length;s+=1)if(!i(t[s],e[s]))return!1;return!0}function En(t){t.length=0}function of(t,e){if(t.length!==e.length)return!1;for(const i of t)if(!fh(e,i))return!1;return!0}Array.prototype.flat;var Ye="function"==typeof Array.prototype.flatMap?(t,e)=>t.flatMap(e):(t,e)=>{const i=[];for(let s=0;s<t.length;s++)i.push(...e(t[s],s));return i};function Ei(t,e){return af(t,((t,i)=>Va(e(t),e(i))))}function hf(t,e){return uf(t,((t,i)=>Va(e(t),e(i))))}function af(t,e){if(0!==t.length)return t.reduce(((t,i)=>e(t,i)<=0?t:i))}function uf(t,e){return af(t,((t,i)=>e(i,t)))}function xo(t){return t.filter(((e,i)=>t.indexOf(e)===i))}function cf(t,e){return Promise.all(t.map(e)).then((e=>t.filter(((t,i)=>e[i]))))}function lf(t,e,i){if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(!i(t[s],e[s]))return!1;return!0}function df(t,e){return function(t,e){const i=new Array(t);for(let s=0;s<t;s++)i[s]=e(s);return i}(t,e)}var ff=class{Xm(){if(!this.zm&&!this.qm){this.zm=!0;for(const t of this.Ym.slice())t();this.Km()}}Km(){if(!this.qm){this.qm=!0;for(const t of this.jm.slice())t();En(this.Ym),En(this.jm)}}Qm(t){this.qm||this.Ym.push(t)}Jm(t){this.qm||_e(this.Ym,t)}$m(t){this.qm||this.jm.push(t)}tp(t){this.qm||_e(this.jm,t)}constructor(){this.zm=!1,this.qm=!1,this.Ym=[],this.jm=[]}},Fi=class t{get ep(){return this.sp}np(){this.sp.Xm()}Km(){this.sp.Km()}rp(t){const e=this.sp;if(e.zm)return;if(t.zm)return void e.Xm();if(e.qm||t.qm)return;const i=()=>{s(),e.Xm()},s=()=>{t.Jm(i),t.tp(s),e.Jm(i),e.tp(s)};t.Qm(i),t.$m(s),e.Qm(i),e.$m(s)}op(){const e=new t,i=new t,s=e.ep,n=i.ep,r=this.sp,o=()=>{s.zm&&n.qm||n.zm&&s.qm?r.Xm():s.qm&&n.qm&&r.Km()};s.Qm(o),n.Qm(o),s.$m(o),n.$m(o),e.rp(r),i.rp(r);return r.$m((()=>{s.Jm(o),n.Jm(o),s.tp(o),n.tp(o)})),[e,i]}static hp(e){const i=new t;for(const t of e)void 0!==t&&i.rp(t);return i}[Il](){this.np()}constructor(){this.sp=new ff}};r(),r();var _f=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];m.apply(this,e)};(_f.prototype=w.create(m.prototype)).constructor=_f;var dl=class extends _f{get name(){return"BaseError"}constructor(t,e){super(),this.message=t||"Unknown error",this.cause=e,m.captureStackTrace&&m.captureStackTrace(this,this.constructor)}},vt=class extends dl{get name(){return"AbortError"}constructor(t,e){super(t||"Aborted",e)}};function Se(t){return t instanceof m&&"AbortError"===t.name}function Io(t){if(t&&t.zm)throw new vt}function ih(t){if(Se(t))throw t}function vf(t){if(!Se(t))throw t}function Lu(t,e){return e?new Promise(((i,s)=>{if(e.zm)return t.catch(M),s(new vt);const n=()=>{e.Jm(n),s(new vt)};e.Qm(n),t.then((t=>{e.Jm(n),i(t)}),(t=>{e.Jm(n),s(t)}))})):t}async function Ts(t,e){const i={stack:[],error:void 0,hasError:!1};try{Gi(i,e,!1);return await t}catch(t){i.error=t,i.hasError=!0}finally{ce(i)}}async function gf(t,e){const i={stack:[],error:void 0,hasError:!1};try{Gi(i,e,!1);return await t(e.ep)}catch(t){i.error=t,i.hasError=!0}finally{ce(i)}}var mf=Promise.resolve(),mi="function"==typeof queueMicrotask?queueMicrotask:t=>{mf.then(t)};function uh(t){t.then(M,M)}async function qe(t){try{return await Promise.all(t)}catch(e){throw await Promise.all(t.map((t=>t.catch(M)))),e}}function Ze(t,e){return new Promise(((i,s)=>{if(void 0!==e&&e.zm)return void s(new vt);const n=As.Gm((()=>{void 0!==e&&e.Jm(r),i()}),t),r=()=>{As.Um(n),s(new vt)};void 0!==e&&e.Qm(r)}))}async function pf(t,e){const i={stack:[],error:void 0,hasError:!1};try{const s=Gi(i,new Fi,!1);return await Promise.race([t,Ze(e,s.ep).then((()=>{throw new m("Timeout")}))])}catch(t){i.error=t,i.hasError=!0}finally{ce(i)}}function qn(t){return"video"===function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}(t)}function wf(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load())}function yf(){return void 0!==h?h.createElement("video"):void 0}var bf=Wd(yf),Af=Wd((()=>"undefined"!=typeof HTMLVideoElement&&bf()instanceof HTMLVideoElement));function Sf(t){const e=h.createElement(t);return qn(e)&&e.addEventListener("contextmenu",xf),kf(e),e}function Tf(t){kf(t),t.removeEventListener("contextmenu",xf)}function kf(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),Or(t),wf(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload="auto",t.controls=!1,t.style.display="none",qn(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function Ef(t,e){if(e.ap){const e=t.muted;t.muted=!0,t.muted=!1,t.muted=e}else if(t.paused){const e=t.play();ei(e)&&uh(e),t.pause()}}function xf(t){t.preventDefault()}r(),r(),r();var If=null;try{If=new WebAssembly.Instance(new WebAssembly.Module(new j([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(y){}function Zu(t,e,i){this.low=0|t,this.high=0|e,this.unsigned=!!i}function ri(t){return!0===(t&&t.cp)}function Rf(t){var e=_.clz32(t&-t);return t?31-e:e}Zu.prototype.cp,w.defineProperty(Zu.prototype,"cp",{value:!0}),Zu.isLong=ri;var Cf={},Pf={};function Df(t,e){var i,s,n;return e?(n=0<=(t>>>=0)&&t<256)&&(s=Pf[t])?s:(i=ys(t,0,!0),n&&(Pf[t]=i),i):(n=-128<=(t|=0)&&t<128)&&(s=Cf[t])?s:(i=ys(t,t<0?-1:0,!1),n&&(Cf[t]=i),i)}function Nf(t,e){if(S(t))return e?nr:qa;if(e){if(t<0)return nr;if(t>=Of)return Hf}else{if(t<=-Ff)return Kr;if(t+1>=Ff)return Zf}return t<0?Nf(-t,e).neg():ys(t%Bf|0,t/Bf|0,e)}function ys(t,e,i){return new Zu(t,e,i)}Zu.fromInt=Df,Zu.fromNumber=Nf,Zu.fromBits=ys;var Mf=_.pow;function Lf(t,e,i){if(0===t.length)throw m("empty string");if("number"==typeof e?(i=e,e=!1):e=!!e,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e?nr:qa;if((i=i||10)<2||36<i)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw m("interior hyphen");if(0===s)return Lf(t.substring(1),e,i).neg();for(var n=Nf(Mf(i,8)),r=qa,o=0;o<t.length;o+=8){var h=_.min(8,t.length-o),a=x(t.substring(o,o+h),i);if(h<8){var u=Nf(Mf(i,h));r=r.mul(u).add(Nf(a))}else r=(r=r.mul(n)).add(Nf(a))}return r.unsigned=e,r}function Ia(t,e){return"number"==typeof t?Nf(t,e):"string"==typeof t?Lf(t,e):ys(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}Zu.fromString=Lf,Zu.fromValue=Ia;var Bf=4294967296,Of=Bf*Bf,Ff=Of/2,Vf=Df(1<<24),qa=Df(0);Zu.ZERO=qa;var nr=Df(0,!0);Zu.UZERO=nr;var Wf=Df(1);Zu.ONE=Wf;var Uf=Df(1,!0);Zu.UONE=Uf;var Gf=Df(-1);Zu.NEG_ONE=Gf;var Zf=ys(-1,2147483647,!1);Zu.MAX_VALUE=Zf;var Hf=ys(-1,-1,!0);Zu.MAX_UNSIGNED_VALUE=Hf;var Kr=ys(0,-2147483648,!1);Zu.MIN_VALUE=Kr;var Oi=Zu.prototype;Oi.toInt=function(){return this.unsigned?this.low>>>0:this.low},Oi.toNumber=function(){return this.unsigned?(this.high>>>0)*Bf+(this.low>>>0):this.high*Bf+(this.low>>>0)},Oi.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(Kr)){var e=Nf(t),i=this.div(e),s=i.mul(e).sub(this);return i.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=Nf(Mf(t,6),this.unsigned),r=this,o="";;){var h=r.div(n),a=(r.sub(h.mul(n)).toInt()>>>0).toString(t);if((r=h).isZero())return a+o;for(;a.length<6;)a="0"+a;o=""+a+o}},Oi.getHighBits=function(){return this.high},Oi.getHighBitsUnsigned=function(){return this.high>>>0},Oi.getLowBits=function(){return this.low},Oi.getLowBitsUnsigned=function(){return this.low>>>0},Oi.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Kr)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},Oi.isZero=function(){return 0===this.high&&0===this.low},Oi.eqz=Oi.isZero,Oi.isNegative=function(){return!this.unsigned&&this.high<0},Oi.isPositive=function(){return this.unsigned||this.high>=0},Oi.isOdd=function(){return 1==(1&this.low)},Oi.isEven=function(){return 0==(1&this.low)},Oi.equals=function(t){return ri(t)||(t=Ia(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},Oi.eq=Oi.equals,Oi.notEquals=function(t){return!this.eq(t)},Oi.neq=Oi.notEquals,Oi.ne=Oi.notEquals,Oi.lessThan=function(t){return this.comp(t)<0},Oi.lt=Oi.lessThan,Oi.lessThanOrEqual=function(t){return this.comp(t)<=0},Oi.lte=Oi.lessThanOrEqual,Oi.le=Oi.lessThanOrEqual,Oi.greaterThan=function(t){return this.comp(t)>0},Oi.gt=Oi.greaterThan,Oi.greaterThanOrEqual=function(t){return this.comp(t)>=0},Oi.gte=Oi.greaterThanOrEqual,Oi.ge=Oi.greaterThanOrEqual,Oi.compare=function(t){if(ri(t)||(t=Ia(t)),this.eq(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},Oi.comp=Oi.compare,Oi.negate=function(){return!this.unsigned&&this.eq(Kr)?Kr:this.not().add(Wf)},Oi.neg=Oi.negate,Oi.add=function(t){ri(t)||(t=Ia(t));var e=this.high>>>16,i=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=0,u=0,c=0,l=0;return c+=(l+=n+(65535&t.low))>>>16,u+=(c+=s+h)>>>16,a+=(u+=i+o)>>>16,a+=e+r,ys((c&=65535)<<16|(l&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},Oi.subtract=function(t){return ri(t)||(t=Ia(t)),this.add(t.neg())},Oi.sub=Oi.subtract,Oi.multiply=function(t){if(this.isZero())return this;if(ri(t)||(t=Ia(t)),If)return ys(If.mul(this.low,this.high,t.low,t.high),If.get_high(),this.unsigned);if(t.isZero())return this.unsigned?nr:qa;if(this.eq(Kr))return t.isOdd()?Kr:qa;if(t.eq(Kr))return this.isOdd()?Kr:qa;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Vf)&&t.lt(Vf))return Nf(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,i=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=65535&t.low,u=0,c=0,l=0,d=0;return l+=(d+=n*a)>>>16,c+=(l+=s*a)>>>16,l&=65535,c+=(l+=n*h)>>>16,u+=(c+=i*a)>>>16,c&=65535,u+=(c+=s*h)>>>16,c&=65535,u+=(c+=n*o)>>>16,u+=e*a+i*h+s*o+n*r,ys((l&=65535)<<16|(d&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},Oi.mul=Oi.multiply,Oi.divide=function(t){if(ri(t)||(t=Ia(t)),t.isZero())throw m("division by zero");var e,i,s;if(If)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?ys((this.unsigned?If.div_u:If.div_s)(this.low,this.high,t.low,t.high),If.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?nr:qa;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return nr;if(t.gt(this.shru(1)))return Uf;s=nr}else{if(this.eq(Kr))return t.eq(Wf)||t.eq(Gf)?Kr:t.eq(Kr)?Wf:(e=this.shr(1).div(t).shl(1)).eq(qa)?t.isNegative()?Wf:Gf:(i=this.sub(t.mul(e)),s=e.add(i.div(t)));if(t.eq(Kr))return this.unsigned?nr:qa;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=qa}for(i=this;i.gte(t);){e=_.max(1,_.floor(i.toNumber()/t.toNumber()));for(var n=_.ceil(_.log(e)/_.LN2),r=n<=48?1:Mf(2,n-48),o=Nf(e),h=o.mul(t);h.isNegative()||h.gt(i);)h=(o=Nf(e-=r,this.unsigned)).mul(t);o.isZero()&&(o=Wf),s=s.add(o),i=i.sub(h)}return s},Oi.div=Oi.divide,Oi.modulo=function(t){return ri(t)||(t=Ia(t)),If?ys((this.unsigned?If.rem_u:If.rem_s)(this.low,this.high,t.low,t.high),If.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},Oi.mod=Oi.modulo,Oi.rem=Oi.modulo,Oi.not=function(){return ys(~this.low,~this.high,this.unsigned)},Oi.countLeadingZeros=function(){return this.high?_.clz32(this.high):_.clz32(this.low)+32},Oi.clz=Oi.countLeadingZeros,Oi.countTrailingZeros=function(){return this.low?Rf(this.low):Rf(this.high)+32},Oi.ctz=Oi.countTrailingZeros,Oi.and=function(t){return ri(t)||(t=Ia(t)),ys(this.low&t.low,this.high&t.high,this.unsigned)},Oi.or=function(t){return ri(t)||(t=Ia(t)),ys(this.low|t.low,this.high|t.high,this.unsigned)},Oi.xor=function(t){return ri(t)||(t=Ia(t)),ys(this.low^t.low,this.high^t.high,this.unsigned)},Oi.shiftLeft=function(t){return ri(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?ys(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):ys(0,this.low<<t-32,this.unsigned)},Oi.shl=Oi.shiftLeft,Oi.shiftRight=function(t){return ri(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?ys(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):ys(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},Oi.shr=Oi.shiftRight,Oi.shiftRightUnsigned=function(t){return ri(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?ys(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):ys(32===t?this.high:this.high>>>t-32,0,this.unsigned)},Oi.shru=Oi.shiftRightUnsigned,Oi.shr_u=Oi.shiftRightUnsigned,Oi.rotateLeft=function(t){var e;return ri(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?ys(this.high,this.low,this.unsigned):t<32?(e=32-t,ys(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(e=32-(t-=32),ys(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))},Oi.rotl=Oi.rotateLeft,Oi.rotateRight=function(t){var e;return ri(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?ys(this.high,this.low,this.unsigned):t<32?(e=32-t,ys(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(e=32-(t-=32),ys(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))},Oi.rotr=Oi.rotateRight,Oi.toSigned=function(){return this.unsigned?ys(this.low,this.high,!1):this},Oi.toUnsigned=function(){return this.unsigned?this:ys(this.low,this.high,!0)},Oi.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},Oi.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},Oi.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},Zu.fromBytes=function(t,e,i){return i?Zu.fromBytesLE(t,e):Zu.fromBytesBE(t,e)},Zu.fromBytesLE=function(t,e){return new Zu(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},Zu.fromBytesBE=function(t,e){return new Zu(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};var po=Zu;function Xf(t,e){return t.lessThan(e)?t:e}function zf(t){return!S(t.getTime())}function qf(){return Date.now()||(new Date).getTime()}function Yf(t){return t/1e3}function An(t){return 1e3*t}var U=1/6,Kf=po.fromNumber(Eu);function fo(t,e){if(0===e)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(Kf))return t.toNumber()/e;const i=t.divide(e),s=t.subtract(i.multiply(e));return i.toNumber()+s.toNumber()/e}var jf=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||Boolean(Bl&&Bl.msMaxTouchPoints),Qf=bf(),Jf=Boolean(Qf&&Qf.webkitShowPlaybackTargetPicker),$f=class{get lp(){return void 0===this.dp&&(this.dp=this.fp()),this.dp}fp(){return 0}get _p(){return Ya.Vv?"android":Ya.Nv?"macos":Ya.su?"ios":Ya.Lv?"windows":"other"}get vp(){return Ya.gm?"tv":Ya.Qs?"mobile":"desktop"}get gp(){return!Ya.gm}get mp(){if(s.screen)return{width:s.screen.width,height:s.screen.height}}get pp(){return s.devicePixelRatio||1}get wp(){return Jf}get yp(){return!1}get bp(){return!0}get Ap(){return!!(Ya.$g||Ya.su||Ya.Eg)||!!Ya.Vg}get Sp(){return Ya.Vg}get Tp(){return!Ya.su}get kp(){return!0}get Ep(){return!0}get xp(){return!1}get Ip(){}get Rp(){return!0}get Cp(){return!1}get Pp(){return Ya.Vg}get Dp(){return!1}Np(t,e){return!0}Mp(t){return t>=2*U}get Lp(){return!1}constructor(){this.dp=void 0,this.Bp=!1,this.Qe=jf,this.Qs=!1,this.ap=!0}},t_=class extends $f{constructor(){super()}};r();var e_=class extends t_{get Ip(){if(Ya.Nv)return 4096}Np(t,e){if(t&&t.Op&&e&&e.Op){const i=i_(t.Op,"mp4a.40.2")&&i_(e.Op,"mp4a.40.5"),s=i_(t.Op,"mp4a.40.5")&&i_(e.Op,"mp4a.40.2"),n=i_(t.Op,"mp4a.40.2")&&i_(e.Op,"mp4a.40.34"),r=i_(t.Op,"mp4a.40.34")&&i_(e.Op,"mp4a.40.2"),o=i_(t.Op,"mp4a.40.5")&&i_(e.Op,"mp4a.40.34"),h=i_(t.Op,"mp4a.40.34")&&i_(e.Op,"mp4a.40.5");return!(i||s||n||r||o||h)}return!0}};function i_(t,e){return t.indexOf(e)>-1}r();var s_=class extends t_{Mp(t){return t>=2}};r();var n_=class extends t_{get Dp(){return Ya.nm<17}get Lp(){return!0}constructor(){super(),this.Bp=Ya.nm>=11,this.ap=Ya.$g&&!(Ya.su&&Ya.nm<10)}};r();var r_,o_=class extends t_{get Rp(){return!Ya.Lv||(Ya.Sg?92!==Ya.Ig:Ya.wg>=100)}};r(),r(),r(),r(),r();var h_=function(){const t=yf();if(!t)return!1;const e=t.muted;return t.muted=!e,t.muted!==e}(),a_=function(){if(Ya.Kv)return!1;const t=yf();if(!t)return!1;const e=t.volume;return t.volume=e/2+.1,e!==t.volume}();var u_=class extends $f{fp(){return this.Fp.lp}get Ip(){return this.Fp.Ip}get Rp(){return this.Fp.Rp}Np(t,e){return this.Fp.Np(t,e)}Mp(t){return this.Fp.Mp(t)}get Dp(){return this.Fp.Dp}constructor(t){super(),this.Fp=t,this.Bp=this.Fp.Bp,this.Qe=this.Fp.Qe,this.ap=h_&&this.Fp.ap}},c_=class extends u_{get xp(){return Ya.su}constructor(t){super(t),this.Bp=!0,this.Qs=!0}};r();var l_=class{Vp(){return new this.Wp}Up(t){return this.Wp.isTypeSupported(t)}constructor(t){this.Wp=d_(t)}};function d_(t){return t&&Sd(s.ManagedMediaSource)?s.ManagedMediaSource:Sd(s.MediaSource)?s.MediaSource:void 0}var f_=class extends c_{get xp(){return!0}fp(){return d_(!0)?super.fp():1}};r();var __=class extends u_{get yp(){return Ya.Pg<3}get bp(){return Ya.Pg>=3}get mp(){return s.tizen&&!this.Gp&&s.tizen.systeminfo.getPropertyValue("DISPLAY",(t=>{const e=t.resolutionWidth,i=t.resolutionHeight;1===e&&1===i||(this.Gp={width:e,height:i})})),this.Gp}get Cp(){return Ya.Pg<3}Np(t,e){return super.Np(t,e)}};r();var v_=class extends u_{get mp(){return s.webOS&&!this.Gp&&s.webOS.deviceInfo((t=>{this.Gp={width:t.screenWidth,height:t.screenHeight}})),this.Gp}get kp(){return!1}};r();var g_=class extends u_{get xp(){return!0}get Lp(){return this.Fp.Lp}};!function(t){r_=t}(function(){const t=function(){if(Ya.Kg)return new e_;if(Ya.Ug||Ya.Zg)return new s_;if(Ya.$g)return new n_;if(Ya.gg)return new o_;return new t_}();return Ya.su?new f_(t):Ya.Qs?new c_(t):Ya.Rg?new __(t):Ya.Ng?new v_(t):Ya.Nv?new g_(t):new u_(t)}()),r(),r(),r();var m_=!(Ya.Zg&&!Ya.Xg),p_=self.console;function w_(t){if(Vt(t))try{return JSON.stringify(t)}catch(t){}return t}function y_(t){return t.map(w_).join(" ")}function b_(t){const e=p_&&p_[t];return e?e.bind&&m_?e.bind(p_):function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];p_[t](y_(i))}:void 0}var A_=b_("log")||M,vl=b_("warn")||A_.bind(void 0,"WARNING:"),S_=b_("error")||A_.bind(void 0,"ERROR:"),T_=(()=>{const t=p_&&p_.assert;return t?t.bind&&m_?t.bind(p_):function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];p_.assert(t,y_(i))}:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];t||S_("Assertion failed:",...i)}})();function k_(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),w.defineProperty(t,s.key,s)}}function E_(t,e){var i=function(t,e){var i=t.length;if(i<=1)return t;for(var s=new Array(i),n=1;n<i;n*=2){x_(t,e,n,s);var r=t;t=s,s=r}return t}(t,e);return i!==t&&x_(i,null,t.length,t),t}function x_(t,e,i,s){var n,r,o,h,a,u=t.length,c=0,l=2*i;for(n=0;n<u;n+=l)for(o=(r=n+i)+i,r>u&&(r=u),o>u&&(o=u),h=n,a=r;;)if(h<r&&a<o)e(t[h],t[a])<=0?s[c++]=t[h++]:s[c++]=t[a++];else if(h<r)s[c++]=t[h++];else{if(!(a<o))break;s[c++]=t[a++]}}r();var I_=/[a-zA-Z]/,R_=/[0-9]/,C_=/[0-9a-fA-F]/,P_=/^0x/i,D_=/^[0-9]+$/,N_=/^[0-9a-fA-F]+$/,M_=/^[0-7]+$/,L_=w.prototype.toString,B_=Array.isArray||function(t){return"[object Array]"===L_.call(t)},O_=void 0!==El&&"symbol"==typeof Nt;function F_(t){return B_(t)?t:Array.from(t)}function V_(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function W_(t){return t>=65&&t<=90}function U_(t){return W_(t)||function(t){return t>=97&&t<=122}(t)}function G_(t){return t>=48&&t<=57}function Z_(t){return G_(t)||U_(t)}function H_(t){return G_(t)||t>=65&&t<=70||t>=97&&t<=102}function X_(t){return W_(t)?t+32:t}function z_(t){return G_(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function q_(t,e){return void 0===e&&(e=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(e?87:55):-1}var Y_=_.min,K_=String.fromCharCode,j_=16384;function Q_(t){for(var e=t.length,i=[],s=0;s<e;s+=j_){var n=Y_(s+j_,e);i.push(K_.apply(null,t.slice(s,n)))}return i.join("")}var J_=2147483647,$_=/[^\0-\x7E]/,ev=/[\x2E\u3002\uFF0E\uFF61]/g,iv={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},sv=_.floor,nv=String.fromCharCode;function rv(t){throw new RangeError(iv[t])}function ov(t){for(var e=[],i=0,s=t.length;i<s;){var n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<s){var r=t.charCodeAt(i++);56320==(64512&r)?e.push(((1023&n)<<10)+(1023&r)+65536):(e.push(n),i--)}else e.push(n)}return e}var hv,av,_h,uv=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},cv=function(t,e,i){var s=0;for(t=i?sv(t/700):t>>1,t+=sv(t/e);t>455;s+=36)t=sv(t/35);return sv(s+36*t/(t+38))},lv=function(t){return function(t,e){var i=t.split("@"),s="";i.length>1&&(s=i[0]+"@",t=i[1]);var n=function(t,e){for(var i=[],s=t.length;s--;)i[s]=e(t[s]);return i}((t=t.replace(ev,".")).split("."),e).join(".");return s+n}(t,(function(t){return $_.test(t)?"xn--"+function(t){for(var e=[],i=(t=ov(t)).length,s=128,n=0,r=72,o=0,h=t;o<h.length;o++){var a=h[o];a<128&&e.push(nv(a))}var u=e.length,c=u;for(u&&e.push("-");c<i;){for(var l=J_,d=0,f=t;d<f.length;d++){var _=f[d];_>=s&&_<l&&(l=_)}var v=c+1;l-s>sv((J_-n)/v)&&rv("overflow"),n+=(l-s)*v,s=l;for(var g=0,m=t;g<m.length;g++){var p=m[g];if(p<s&&++n>J_&&rv("overflow"),p==s){for(var w=n,y=36;;y+=36){var b=y<=r?1:y>=r+26?26:y-r;if(w<b)break;var A=w-b,S=36-b;e.push(nv(uv(b+A%S,0))),w=sv(A/S)}e.push(nv(uv(w,0))),r=cv(n,v,c==u),n=0,++c}}++n,++s}return e.join("")}(t):t}))};function Tn(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];s>65535&&(s-=65536,e.push(s>>>10&1023|55296),s=56320|1023&s),e.push(s)}return Q_(e)}function dv(t){if(t>=55296&&t<=57343)throw new m("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function fv(t,e){return t>>e&63|128}function _v(t,e){0!=(4294967168&t)?(0==(4294965248&t)?e.push(t>>6&31|192):0==(4294901760&t)?(dv(t),e.push(t>>12&15|224),e.push(fv(t,6))):0==(4292870144&t)&&(e.push(t>>18&7|240),e.push(fv(t,12)),e.push(fv(t,6))),e.push(63&t|128)):e.push(t)}function vv(t){for(var e=[],i=0;i<t.length;i++){_v(t[i],e)}return e}function gv(){if(_h>=av)throw new m("Invalid byte index");var t=255&hv[_h];if(_h++,128==(192&t))return 63&t;throw new m("Invalid continuation byte")}function mv(){var t,e;if(_h>av)throw new m("Invalid byte index");if(_h===av)return!1;if(t=255&hv[_h],_h++,0==(128&t))return t;if(192==(224&t)){if((e=(31&t)<<6|gv())>=128)return e;throw new m("Invalid continuation byte")}if(224==(240&t)){if((e=(15&t)<<12|gv()<<6|gv())>=2048)return dv(e),e;throw new m("Invalid continuation byte")}if(240==(248&t)&&(e=(7&t)<<18|gv()<<12|gv()<<6|gv())>=65536&&e<=1114111)return e;throw new m("Invalid UTF-8 detected")}function pv(t){return[37,q_(t>>4),q_(15&t)]}function wv(t){return function(t){return t>=0&&t<=31}(t)||t>126}function yv(t){return wv(t)||32===t||34===t||60===t||62===t||96===t}function bv(t){return yv(t)||35===t||63===t||123===t||125===t}function Av(t){return bv(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function Sv(t){return t<33||t>126||34===t||35===t||60===t||62===t}function Tv(t){return Sv(t)||39===t}function kv(t,e){if(!e(t))return[t];for(var i=vv([t]),s=[],n=0;n<i.length;n++){var r=i[n];s.push.apply(s,pv(r))}return s}function Ev(t,e){for(var i=[],s=0,n=ov(t);s<n.length;s++){var r=n[s];i.push.apply(i,kv(r,e))}return Tn(i)}function xv(t){return function(t){for(var e=[],i=t.length,s=0;s<i;s++){var n=t[s];if(37===n&&s+2<i&&H_(t[s+1])&&H_(t[s+2])){var r=z_(t[s+1])<<4|z_(t[s+2]);e.push(r),s+=2}else e.push(n)}return e}(vv(t))}function Iv(t){return Tn(function(t){hv=t.slice(),av=hv.length,_h=0;for(var e,i=[];!1!==(e=mv());)i.push(e);return i}(xv(ov(t))))}function Rv(t){var e=t.length,i=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<e&&":"===t[r]){if(!(r+1<e&&":"===t[r+1]))throw new g;r+=2,n=s+=1}for(;r<e;){if(8===s)throw new g("Too many groups");if(":"!==t[r]){for(var o=0,h=0;h<4&&r<e&&C_.test(t[r]);)o=o<<4|x(t[r],16),r+=1,h+=1;if("."===t[r]){if(0===h)throw new g;if(r-=h,s>6)throw new g;for(var a=0;r<e;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new g;r+=1}if(!R_.test(t[r]))throw new g;for(;r<e&&R_.test(t[r]);){var c=x(t[r],10);if(null===u)u=c;else{if(0===u)throw new g;if((u=10*u+c)>255)throw new g}r+=1}i[s]=i[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new g;break}if(":"===t[r]){if((r+=1)===e)throw new g}else if(r<e)throw new g;i[s]=o,s+=1}else{if(null!==n)throw new g("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var l=s-n;for(s=7;0!==s&&l>0;)V_(i,s,n+l-1),s-=1,l-=1}else if(8!==s)throw new g;return i}function Cv(t){var e=10,i=D_;return P_.test(t)?(t=t.slice(2),e=16,i=N_):t.length>=2&&"0"===t[0]&&(t=t.slice(1),e=8,i=M_),""===t?0:i.test(t)?x(t,e):void 0}var Po={Zp:4},Pv=/[\0\t\n\r #%/:?@\[\\\]]/,Dv=/[\0\t\n\r #/:?@\[\\\]]/;function Nv(t,e){if("["===t[0]){if("]"!==t[t.length-1])throw new g("Invalid IPv6 address");return{Zp:2,Hp:Rv(t.slice(1,-1))}}if(!e)return function(t){if(Dv.test(t))throw new g("Invalid code point in opaque host");var e=Ev(t,wv);return""===e?Po:{Zp:3,Xp:e}}(t);var i=function(t){var e=function(t){return lv(t.toLowerCase())}(t);return e}(Iv(t));if(Pv.test(i))throw new g("Invalid code point in host");var s=function(t){var e=t.split(".");if(""===e[e.length-1]&&e.pop(),!(e.length>4)){for(var i=[],s=0;s<e.length;s++){var n=e[s];if(""===n)return;var r=Cv(n);if(void 0===r)return;i.push(r)}for(var o=0;o<i.length-1;o++)if(i[o]>255)throw new g;if(i[i.length-1]>=_.pow(256,5-i.length))throw new g;for(var h=i.pop(),a=0;a<i.length;a++)h+=i[a]*_.pow(256,3-a);return h}}(i);return void 0!==s?{Zp:1,Hp:s}:""===i?Po:{Zp:0,zp:i}}function Mv(t){switch(t.Zp){case 0:return t.zp;case 1:return function(t){for(var e=[],i=t,s=1;s<=4;s++)e.push(""+(255&i)),4!==s&&e.push("."),i>>>=8;return e.reverse().join("")}(t.Hp);case 2:return"["+function(t){for(var e="",i=function(t){for(var e=0,i=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>i&&(e=s,i=n),n=0);return n>i&&(e=s,i=n),i>1?e:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}i!==n?(e+=t[n].toString(16),7!==n&&(e+=":")):(e+=0===n?"::":":",s=!0)}return e}(t.Hp)+"]";case 3:return t.Xp;case 4:return""}}var Lv=/\+/g;function Bv(t){return 42===t||45===t||46===t||95===t||Z_(t)}function Ov(t){for(var e=t.split("&"),i=[],s=0;s<e.length;s++){var n=e[s];if(""!==n){var r=n.indexOf("="),o=void 0,h=void 0;-1!==r?(o=n.slice(0,r),h=n.slice(r+1)):(o=n,h=""),o=o.replace(Lv," "),h=h.replace(Lv," ");var a=Iv(o),u=Iv(h);i.push([a,u])}}return i}function Fv(t){for(var e="",i=0;i<t.length;i++){var s=t[i];i>0&&(e+="&"),e+=Vv(vv(ov(s[0])))+"="+Vv(vv(ov(s[1])))}return e}function Vv(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];32===s?e.push(43):Bv(s)?e.push(s):e.push.apply(e,pv(s))}return Q_(e)}var Wv=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function eo(t){var e=""+t,i=Wv.exec(e);return i?function(t,e){for(var i=t.length,s=[],n=e;n<i;n++){var r=t.charCodeAt(n);if(Gv(r))if(Zv(r)||n===i-1)s.push(Uv);else{var o=t.charCodeAt(n+1);Zv(o)?(s.push(r,o),n++):s.push(Uv)}else s.push(r)}return t.slice(0,e)+Q_(s)}(e,i.index):e}var Uv=65533,Gv=function(t){return 55296==(63488&t)},Zv=function(t){return 0!=(1024&t)};function Hv(t,e){var i=t[0],s=e[0];return i===s?0:i<s?-1:1}function Xv(t){t.D_.length=0}function zv(t,e){!function(t,e){for(var i=0;i<e.length;i++)t[i]=e[i];t.length=e.length}(t.D_,Ov(e))}function qv(t){if(t.ic){var e=Fv(t.D_);""===e&&(e=null),t.ic.ic.qp=e}}var lu=function(){function t(t){if(void 0===t&&(t=void 0),this.ic=null,null==t)this.D_=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof lu&&!!B_(t.D_)&&(!O_||t[Nt]===Yv)}(t))this.D_=t.D_.slice();else if(function(t){return null!=t&&(!!B_(t)||!!O_&&"function"==typeof t[Nt])}(t)){this.D_=[];for(var e=0,i=F_(t);e<i.length;e++){var s=F_(i[e]);if(2!==s.length)throw new g("Invalid name-value pair");this.D_.push([eo(s[0]),eo(s[1])])}}else for(var n in this.D_=[],t)w.prototype.hasOwnProperty.call(t,n)&&this.D_.push([eo(n),eo(t[n])]);else(t=eo(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.D_=Ov(t)}var e=t.prototype;return e.append=function(t,e){t=eo(t),e=eo(e),this.D_.push([t,e]),qv(this)},e.delete=function(t){t=eo(t);for(var e=this.D_,i=0;i<e.length;){e[i][0]===t?e.splice(i,1):i++}qv(this)},e.get=function(t){t=eo(t);for(var e=this.D_,i=0;i<e.length;i++){var s=e[i];if(s[0]===t)return s[1]}return null},e.getAll=function(t){t=eo(t);for(var e=this.D_,i=[],s=0;s<e.length;s++){var n=e[s];n[0]===t&&i.push(n[1])}return i},e.has=function(t){t=eo(t);for(var e=this.D_,i=0;i<e.length;i++){if(e[i][0]===t)return!0}return!1},e.set=function(t,e){t=eo(t),e=eo(e);for(var i=this.D_,s=!1,n=0;n<i.length;){var r=i[n];r[0]===t?s?i.splice(n,1):(r[1]=e,s=!0,n++):n++}s||i.push([t,e]),qv(this)},e.sort=function(){E_(this.D_,Hv),qv(this)},e.toString=function(){return Fv(this.D_)},e.entries=function(){return new Jv(this.D_,Kv)},e.keys=function(){return new Jv(this.D_,jv)},e.values=function(){return new Jv(this.D_,Qv)},e.forEach=function(t){var e=this;this.D_.forEach((function(i){return t(i[1],i[0],e)}))},t}(),Yv=lu.prototype.entries;O_&&(lu.prototype[Nt]=Yv);var Kv=function(t){return[t[0],t[1]]},jv=function(t){return t[0]},Qv=function(t){return t[1]},Jv=function(){function t(t,e){this.Yp=0,this.D_=t,this.Kp=e}return t.prototype.next=function(){return this.Yp<this.D_.length?{done:!1,value:this.Kp(this.D_[this.Yp++])}:{done:!0,value:void 0}},t}(),$v="null";var tg=w.create(null);tg.ftp=21,tg.file=0,tg.gopher=70,tg.http=80,tg.https=443,tg.ws=80,tg.wss=443;var eg=/^(?:\.|%2e)$/i,ig=/^(?:\.|%2e){2}$/i;function sg(t){return eg.test(t)}function ng(t){return ig.test(t)}function rg(t){return void 0!==tg[t]}function ht(t){return rg(t.jp)}function og(t){return""!==t.Qp||""!==t.Jp}function hg(t){var e=t.length;if(!(e>=2))return!1;if(!ug(t.slice(0,2)))return!1;if(2!==e){var i=t[2];if(47!==i&&92!==i&&63!==i&&35!==i)return!1}return!0}function ag(t){return 2===t.length&&I_.test(t[0])&&(":"===t[1]||"|"===t[1])}function ug(t){return 2===t.length&&ag(Q_(t))}function cg(t){return ag(t)&&":"===t[1]}function lg(t){var e=t.$p;0!==e.length&&("file"===t.jp&&1===e.length&&cg(e[0])||e.pop())}function dg(t){return null===t.ew||Po===t.ew||t.iw||"file"===t.jp}var fn=-1,fg=/\t|\n|\r/g,_g=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function vg(t,e,i,s){void 0===i&&(i=null),void 0===s&&(s=null),i||(i=new mg,t=t.replace(_g,""));var n=null!==s?s:0;e=e||null;for(var r=[],o=!1,h=!1,a=!1,u=ov(t=t.replace(fg,"")),c=u.length,l=0;l<=c;){var d=l<c?u[l]:fn;switch(n){case 0:if(!U_(d)){if(null===s){r.length=0,n=2;continue}throw new g("Invalid scheme")}r.push(X_(d)),n=1;break;case 1:if(Z_(d)||43===d||45===d||46===d)r.push(X_(d));else{if(58!==d){if(null===s){r.length=0,n=2,l=0;continue}throw new g("Invalid scheme")}var f=Tn(r);if(null!==s){if(rg(i.jp)&&!rg(f))return;if(!rg(i.jp)&&rg(f))return;if((og(i)||null!==i.nw)&&"file"===f)return;if("file"===i.jp&&(i.ew===Po||null===i.ew))return}if(i.jp=f,null!==s)return void(ht(i)&&i.nw===tg[i.jp]&&(i.nw=null));r.length=0,"file"===i.jp?n=13:ht(i)&&e&&e.jp===i.jp?n=3:ht(i)?n=7:47===u[l+1]?(n=4,l+=1):(i.iw=!0,i.$p.push(""),n=18)}break;case 2:if(!e||e.iw&&35!==d)throw new g("Invalid scheme");e.iw&&35===d?(i.jp=e.jp,i.$p=e.$p.slice(),i.qp=e.qp,i.ow="",i.iw=!0,n=20):"file"!==e.jp?(n=5,l-=1):(n=13,l-=1);break;case 3:47===d&&47===u[l+1]?n=8:(n=5,l-=1);break;case 4:47===d?n=9:(n=17,l-=1);break;case 5:i.jp=e.jp,fn===d?(i.Qp=e.Qp,i.Jp=e.Jp,i.ew=e.ew,i.nw=e.nw,i.$p=e.$p.slice(),i.qp=e.qp):47===d?n=6:63===d?(i.Qp=e.Qp,i.Jp=e.Jp,i.ew=e.ew,i.nw=e.nw,i.$p=e.$p.slice(),i.qp="",n=19):35===d?(i.Qp=e.Qp,i.Jp=e.Jp,i.ew=e.ew,i.nw=e.nw,i.$p=e.$p.slice(),i.qp=e.qp,i.ow="",n=20):92===d&&ht(i)?n=6:(i.Qp=e.Qp,i.Jp=e.Jp,i.ew=e.ew,i.nw=e.nw,i.$p=e.$p.slice(),i.$p.pop(),n=17,l-=1);break;case 6:!ht(i)||47!==d&&92!==d?47===d?n=9:(i.Qp=e.Qp,i.Jp=e.Jp,i.ew=e.ew,i.nw=e.nw,n=17,l-=1):n=8;break;case 7:if(47!==d||47!==u[l+1]){n=8;continue}n=8,l+=1;break;case 8:47!==d&&92!==d&&(n=9,l-=1);break;case 9:if(64===d){o&&r.unshift(37,52,48),o=!0;for(var _=0;_<r.length;_++){var v=r[_];if(58!==v||a){var m=Tn(kv(v,Av));a?i.Jp+=m:i.Qp+=m}else a=!0}r.length=0}else if(fn===d||47===d||63===d||35===d||ht(i)&&92===d){if(o&&0===r.length)throw new g("Invalid host");l-=r.length+1,r.length=0,n=10}else r.push(d);break;case 10:case 11:if(null!==s&&"file"===i.jp)l-=1,n=15;else if(58!==d||h)if(fn===d||47===d||63===d||35===d||ht(i)&&92===d){if(l-=1,ht(i)&&0===r.length)throw new g("Invalid host");if(null!==s&&0===r.length&&(og(i)||null!==i.nw))return;var p=Nv(Tn(r),ht(i));if(i.ew=p,r.length=0,n=16,null!==s)return}else 91===d?h=!0:93===d&&(h=!1),r.push(d);else{if(0===r.length)throw new g("Invalid host");var w=Nv(Tn(r),ht(i));if(i.ew=w,r.length=0,n=12,11===s)return}break;case 12:if(G_(d))r.push(d);else{if(!(fn===d||47===d||63===d||35===d||ht(i)&&92===d||null!==s))throw new g("Invalid port");if(0!==r.length){var y=x(Tn(r),10);if(y>65535)throw new g("Invalid port");i.nw=y===tg[i.jp]?null:y,r.length=0}if(null!==s)return;n=16,l-=1}break;case 13:i.jp="file",47===d||92===d?n=14:e&&"file"===e.jp?fn===d?(i.ew=e.ew,i.$p=e.$p.slice(),i.qp=e.qp):63===d?(i.ew=e.ew,i.$p=e.$p.slice(),i.qp="",n=19):35===d?(i.ew=e.ew,i.$p=e.$p.slice(),i.qp=e.qp,i.ow="",n=20):(hg(u.slice(l))||(i.ew=e.ew,i.$p=e.$p.slice(),lg(i)),n=17,l-=1):(n=17,l-=1);break;case 14:47===d||92===d?n=15:(e&&"file"===e.jp&&!hg(u.slice(l))&&(cg(e.$p[0])?i.$p.push(e.$p[0]):i.ew=e.ew),n=17,l-=1);break;case 15:if(fn===d||47===d||92===d||63===d||35===d)if(l-=1,null===s&&ug(r))n=17;else if(0===r.length){if(i.ew=Po,null!==s)return;n=16}else{var b=Nv(Tn(r),ht(i));if(0===b.Zp&&"localhost"===b.zp&&(b=Po),i.ew=b,null!==s)return;r.length=0,n=16}else r.push(d);break;case 16:ht(i)?(n=17,47!==d&&92!==d&&(l-=1)):null===s&&63===d?(i.qp="",n=19):null===s&&35===d?(i.ow="",n=20):fn!==d&&(n=17,47!==d&&(l-=1));break;case 17:if(fn===d||47===d||ht(i)&&92===d||null===s&&(63===d||35===d)){var A=Tn(r);if(ng(A)?(lg(i),47===d||ht(i)&&92===d||i.$p.push("")):!sg(A)||47===d||ht(i)&&92===d?sg(A)||("file"===i.jp&&0===i.$p.length&&ug(r)&&(Po!==i.ew&&null!==i.ew&&(i.ew=Po),r[1]=58,A=Tn(r)),i.$p.push(A)):i.$p.push(""),r.length=0,"file"===i.jp&&(fn===d||63===d||35===d))for(;i.$p.length>1&&""===i.$p[0];)i.$p.shift();63===d?(i.qp="",n=19):35===d&&(i.ow="",n=20)}else r.push.apply(r,kv(d,bv));break;case 18:63===d?(i.qp="",n=19):35===d?(i.ow="",n=20):fn!==d&&(i.$p[0]+=Tn(kv(d,wv)));break;case 19:null===s&&35===d?(i.ow="",n=20):fn!==d&&(i.qp+=Tn(kv(d,ht(i)?Tv:Sv)));break;case 20:fn===d||0===d||(i.ow+=Tn(kv(d,yv)))}l++}return i}function gg(t,e,i,s){try{vg(t,e,i,s)}catch(t){}}var mg=function(){this.jp="",this.Qp="",this.Jp="",this.ew=null,this.nw=null,this.$p=[],this.qp=null,this.ow=null,this.iw=!1};function pg(t){switch(t.jp){case"blob":var e;try{e=vg(t.$p[0],null)}catch(t){return $v}return pg(e);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,e,i){return t+"://"+Mv(e)+(null===i?"":":"+i)}(t.jp,t.ew,t.nw);default:return $v}}var wg=function(){function t(t,e){var i,s=null;if(null!=e)if(function(t){return null!=t&&t instanceof wg&&"object"==typeof t.ic}(e))s=e.ic;else try{s=vg(String(e),null)}catch(t){throw new g("Invalid base URL: "+t.message)}try{i=vg(String(t),s)}catch(t){throw new g("Invalid URL: "+t.message)}var n=i.qp;this.ic=i,this.qp=function(t){var e=new lu;return null!==t&&zv(e,t),e}(n),this.qp.ic=this}var e=t.prototype;return e.toString=function(){return this.href},e.toJSON=function(){return this.href},function(t,e,i){e&&k_(t.prototype,e),i&&k_(t,i)}(t,[{key:"href",get:function(){return function(t,e){void 0===e&&(e=!1);var i=t.jp+":";if(null!==t.ew?(i+="//",og(t)&&(i+=t.Qp,""!==t.Jp&&(i+=":"+t.Jp),i+="@"),i+=Mv(t.ew),null!==t.nw&&(i+=":"+t.nw)):null===t.ew&&"file"===t.jp&&(i+="//"),t.iw)i+=t.$p[0];else for(var s=0,n=t.$p;s<n.length;s++)i+="/"+n[s];return null!==t.qp&&(i+="?"+t.qp),e||null===t.ow||(i+="#"+t.ow),i}(this.ic)},set:function(t){var e;try{e=vg(String(t),null)}catch(t){throw new g("Invalid URL: "+t.message)}this.ic=e,Xv(this.qp);var i=this.ic.qp;null!==i&&zv(this.qp,i)}},{key:"origin",get:function(){return pg(this.ic)}},{key:"protocol",get:function(){return this.ic.jp+":"},set:function(t){gg(t+":",null,this.ic,0)}},{key:"username",get:function(){return this.ic.Qp},set:function(t){dg(this.ic)||(this.ic.Qp=Ev(t,Av))}},{key:"password",get:function(){return this.ic.Jp},set:function(t){dg(this.ic)||(this.ic.Jp=Ev(t,Av))}},{key:"host",get:function(){var t=this.ic,e=t.ew;if(null===e)return"";var i=t.nw,s=Mv(e);return null!==i&&(s+=":"+i),s},set:function(t){this.ic.iw||gg(t,null,this.ic,10)}},{key:"hostname",get:function(){var t=this.ic.ew;return null===t?"":Mv(t)},set:function(t){this.ic.iw||gg(t,null,this.ic,11)}},{key:"port",get:function(){var t=this.ic.nw;return null===t?"":""+t},set:function(t){dg(this.ic)||(""===t?this.ic.nw=null:gg(t,null,this.ic,12))}},{key:"pathname",get:function(){var t=this.ic.$p;return this.ic.iw?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.ic.iw||(this.ic.$p.length=0,gg(t,null,this.ic,16))}},{key:"search",get:function(){var t=this.ic.qp;return null===t||""===t?"":"?"+t},set:function(t){t=eo(t);var e=this.ic;if(""===t)return e.qp=null,void Xv(this.qp);"?"===t[0]&&(t=t.slice(1)),e.qp="",gg(t,null,e,19),zv(this.qp,t)}},{key:"searchParams",get:function(){return this.qp}},{key:"hash",get:function(){var t=this.ic.ow;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.ic.ow="",gg(t,null,this.ic,20)):this.ic.ow=null}}]),t}();function yg(t){return t.document&&t.document.baseURI||t.location.href||""}function bg(){let t=s,e=t.location.href;for(;t!==s.top;){t=t.parent;try{e=t.location.href}catch(t){}}return e}r();var Ag=class{hw(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];A_(...e)}aw(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];vl(...e)}uw(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];S_(...e)}cw(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];T_(t,...i)}Gm(t,e){return u(t,e)}lw(t,e){return v(t,e)}Um(t){c(t)}dw(t){p(t)}fw(){return this._w.fw()}gw(){return this._w.gw()}mw(){return this._w.mw()}pw(){return this._w.pw()}ww(){return this._w.ww()}yw(t,e){return this._w.yw(t,e)}Aw(t){return this._w.Aw(t)}get Sw(){return this.Tw}Bh(t,e){let i;return void 0===e&&(e=yg(s)),i="object"!=typeof e||e instanceof wg?e:e.href,new wg(t,i)}Ew(t,e){if(void 0===e&&(e=yg(s)),this.xw){const i=oi(e)?e:e.toString();return new self.URL(t,i).href}return this.Bh(t,e).href}get Ys(){return this.Iw}get Rw(){return{Cw:Bl&&Bl.userAgent.match(/Android /i)?"Android":"other",Pw:Boolean(Bl&&Bl.userAgent.match(/Android 8.0.0/i))}}get Dw(){return self&&self.location&&"https:"===self.location.protocol}get Nw(){return"languages"in Bl?Bl.languages.slice():[Bl.language]}constructor(){this.Tw=new Sg,this.Iw=r_,this.xw=Tg(),self.performance&&self.performance.now?this.Wm=()=>self.performance.now():this.Wm=qf}},Sg=class{get Mw(){return Bl.oscpu}get Ys(){return Bl.platform}get Lw(){return Bl.vendor}get Bw(){return Bl.vendorSub}};function Tg(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}function ne(){return ne=w.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)w.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},ne.apply(this,arguments)}function kg(){const t=w.create(null);return t.Ow=void 0,delete t.Ow,t}function Vh(){return new Rg}function Bh(){return new Cg}function Eg(t){const e=Vh();for(const i in t)Da.call(t,i)&&e.set(i,t[i]);return e}function xg(t){const e=[];return t.forEach((t=>e.push(t))),e}r(),r(),r();var Ig="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,Rg=Ig||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,e){this.index=0,this.data=t,this.selector=e,this.keys=w.keys(t)}}return class{get(t){return this.data[t]}set(t,e){return this.has(t)||this.size++,this.data[t]=e,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=kg(),this.size=0}keys(){return new t(this.data,((t,e)=>e))}values(){return new t(this.data,((t,e)=>t[e]))}entries(){return new t(this.data,((t,e)=>[e,t[e]]))}forEach(t){for(const e in this.data)t(this.data[e],e)}constructor(){this.data=kg(),this.size=0}}}();var Cg=Ig||function(){class t{next(){const t=this.Fw.next();return t.done?t:{value:this.Vw(t.value),done:!1}}constructor(t,e){this.Fw=t,this.Vw=e}}return class{get size(){return this.P_.size}get(t){return this.P_.get(""+t)}set(t,e){return this.P_.set(""+t,e),this}has(t){return this.P_.has(""+t)}delete(t){return this.P_.delete(""+t)}clear(){this.P_.clear()}keys(){return new t(this.P_.keys(),(t=>Number(t)))}values(){return this.P_.values()}entries(){return new t(this.P_.entries(),(t=>{let[e,i]=t;return[Number(e),i]}))}forEach(t){this.P_.forEach(((e,i)=>{t(e,Number(i))}))}constructor(){this.P_=Vh()}}}();r(),r();var Pg=function(t){return t.Ww="9a04f079-9840-4286-ab92-e65be0885f95",t.Uw="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t.Gw="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.Zw="e2719d58-a985-b3c9-781a-b030af78d30e",t.Hw="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",t}({}),Dg="urn:mpeg:dash:mp4protection:2011",Jn="cenc",Ng="sinf",Mg="skd",Lg="keyids",Bg="9a04f079-9840-4286-ab92-e65be0885f95",Og="urn:uuid:"+Bg,Ja="com.microsoft.playready",Fg="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Vg="urn:uuid:"+Fg,Wg="com.widevine.alpha",Ug="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Gg="urn:uuid:"+Ug,Zg="org.w3.clearkey",Hg="e2719d58-a985-b3c9-781a-b030af78d30e",Xg="urn:uuid:"+Hg,zg="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",Zi="urn:uuid:"+zg,qg="com.apple.fps.1_0",Yg="com.apple.streamingkeydelivery",Kg="identity";r();var O=function(t){return t.Ww="playready",t.Uw="widevine",t.Hw="fairplay",t.Gw="clearkey",t.Zw="clearkey_dash_if",t.Xw="aes128",t}({}),jg={zw:O.Ww,qw:Ja,Yw:"cenc",Kw:Bg,jw:Og,Qw:"PlayReady"},Qg={zw:O.Uw,qw:Wg,Yw:"cenc",Kw:Fg,jw:Vg,Qw:"Widevine"},Jg={zw:O.Hw,qw:qg,Yw:"skd",Kw:zg,jw:Zi,Qw:"FairPlay"},$g={zw:O.Hw,qw:"com.apple.fps",Yw:"sinf",Kw:zg,jw:Zi,Qw:"FairPlay"},Ao={zw:O.Gw,qw:Zg,Yw:"cenc",Kw:Ug,jw:Gg,Qw:"ClearKey"},tm={zw:O.Zw,qw:Zg,Yw:"keyids",Kw:Hg,jw:Xg,Qw:"ClearKey DASH-IF"},em=[jg,Qg,Jg,Ao,tm],im=[jg,Qg,$g,Ao,tm];function sm(t){return em.filter((e=>e.jw===t.toLowerCase()))}r();var dh="function"==typeof String.prototype.replaceAll?(t,e,i)=>t.replaceAll(e,i):(t,e,i)=>t.split(e).join(i);function Xa(t,e){return ol(t)&&-1!==t.indexOf(e)}var Cl="function"==typeof String.prototype.startsWith?(t,e)=>ol(t)&&t.startsWith(e):(t,e)=>ol(t)&&t.substr(0,e.length)===e,nm="function"==typeof String.prototype.endsWith?(t,e)=>ol(t)&&t.endsWith(e):(t,e)=>ol(t)&&t.substr(t.length-e.length,e.length)===e;function Th(t,e){return t.length===e.length&&t.toUpperCase()===e.toUpperCase()}var rm="function"==typeof String.prototype.repeat?(t,e)=>t.repeat(e):(t,e)=>{let i=0|e;if(0===t.length||0===i)return"";let s=t,n="";for(;1==(1&i)&&(n+=s),i>>>=1,0!==i;)s+=s;return n},Sa="function"==typeof String.prototype.padStart?(t,e,i)=>(void 0===i&&(i=" "),t.padStart(e,i)):(t,e,i)=>{void 0===i&&(i=" ");let s=i;const n=(0|e)-t.length;return n<=0?t:(n>s.length&&(s+=rm(s,n/s.length)),s.slice(0,n)+t)},om=(String.prototype.padEnd,16384),hm="function"==typeof String.fromCodePoint?t=>t.length<=om?String.fromCodePoint(...t):um(t,String.fromCodePoint):t=>{const e=[];for(let i of t)i>65535&&(i-=65536,e.push(i>>>10&1023|55296),i=56320|1023&i),e.push(i);return am(e)};function am(t){return t.length<=om?String.fromCharCode(...t):um(t,String.fromCharCode)}function um(t,e){const i=[];for(let s=0;s<t.length;s+=om)i.push(e(...t.slice(s,s+om)));return i.join("")}function cm(t){return t.replace(/[\\"]/g,(t=>"\\"+t))}var lm=Ya.gg&&Ya.wg>=42||Ya.Kg&&Ya.Qg>=38||Ya.Ug||Ya.Xg||Ya.um&&Ya.dm>=29;function dm(t,e){return Xa(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[ne({contentType:t},e?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[ne({contentType:t},e?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function _o(){return void 0!==Bl&&"function"==typeof Bl.requestMediaKeySystemAccess}function fm(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var _m=class{ww(){return this.Aw(Qg)}gw(){return this.Aw(Ao)}pw(){return this.Aw(jg)}mw(){return this.Aw(Jg)}Aw(t){const e=t.jw,i=this.Jw.get(e);if(i)return i;const s=this.yw(t,'video/mp4; codecs="avc1.42000a"');return this.Jw.set(e,s),s}async yw(t,e){try{return await this.ey.$w(t.qw,[dm(e,!0)]),!0}catch(i){try{return await this.ey.$w(t.qw,[dm(e,!1)]),!0}catch(t){return!1}}}fw(){return this.iy||(this.iy=this.sy()),this.iy}async sy(){return"https:"!==s.location.protocol&&(!!lm&&!await this.gw())}constructor(t){this.Jw=Vh(),this.iy=void 0,this.ey=t}};function vm(t,e,i){if("function"==typeof i)i.call(t,e);else for(const s of i)s.call(t,e)}r(),r(),r(),r(),r(),r();var So=class{bn(t,e){if("function"==typeof e)if("string"==typeof t)this.oy(t,e);else for(const i of t)this.oy(i,e)}oy(t,e){const i=this.uy[t];void 0===i?this.uy[t]=e:"function"==typeof i?this.uy[t]=[i,e]:0===this.ly?i.push(e):this.uy[t]=i.concat(e)}_y(t){if("function"!=typeof t)return;const e=this.vy;void 0===e?this.vy=t:"function"==typeof e?this.vy=[e,t]:0===this.ly?e.push(t):this.vy=e.concat(t)}Ro(){this.uy=kg(),this.vy=void 0}_o(t){this.ly++;const e=this.uy[t.type],i=this.vy;void 0!==e&&vm(this.gy,t,e),void 0!==i&&vm(this.gy,t,i),this.ly--}vn(t,e){if("function"==typeof e)if("string"==typeof t)this.py(t,e);else for(const i of t)this.py(i,e)}py(t,e){const i=this.uy[t];void 0!==i&&("function"==typeof i?i===e&&(this.uy[t]=void 0):0===this.ly?_e(i,e):this.uy[t]=nf(i,e))}wy(t){if("string"==typeof t)this.uy[t]=void 0;else for(const e of t)this.uy[e]=void 0}yy(t){const e=this.vy;void 0!==e&&("function"==typeof e?e===t&&(this.vy=void 0):0===this.ly?_e(e,t):this.vy=nf(e,t))}Ay(t,e){return new Promise(((i,s)=>{if(e&&e.zm)return s(new vt);const n=t=>{o(),i(t)},r=()=>{o(),s(new vt)},o=()=>{this.vn(t,n),e&&e.Jm(r)};this.bn(t,n),e&&e.Qm(r)}))}constructor(t){this.uy=kg(),this.vy=void 0,this.ly=0,this.Ds=t=>{this._o(t)},this.gy=null!=t?t:this}},gm=class extends So{_o(t){mi((()=>{super._o(t)}))}},en=class extends So{_y(t){super._y(t)}yy(t){super.yy(t)}};r(),r();var me=class{constructor(t,e=new Date){this.type=t,this.date=e}};r();var ns=function(t){return t.Sy="Ty",t.Ey="xy",t.Iy="contentprotectionerror",t.Ry="contentprotectionsuccess",t.Cy="currentsourcechange",t.Py="destroy",t.Dy="durationchange",t.Ny="emptied",t.My="encrypted",t.Ly="ended",t.By="Oy",t.Fy="Vy",t.Wy="Uy",t.Gy="Zy",t.Hy="loadstart",t.Xy="manifestupdate",t.zy="nosupportedrepresentationfound",t.qy="offline",t.Yy="online",t.Ky="pause",t.ho="play",t.jy="progress",t.Qy="ratechange",t.Jy="representationchange",t.$y="resize",t.eb="seeked",t.ib="seeking",t.sb="segmentnotfound",t.ob="hb",t.ub="fb",t.uo="sourcechange",t._b="timeupdate",t.vb="volumechange",t.gb="mb",t.pb="wb",t.LICENSE_REQUEST_GENERATED="yb",t.bb="metricschange",t}({}),mm=["cenc"],pm=["cbcs","cbcs-1-9"],Sn=class extends me{constructor(t){super(ns.pb),this.Ab=t}},wm=class extends me{constructor(t){super(ns.LICENSE_REQUEST_GENERATED),this.Sb=t}},ch=class extends me{constructor(t,e,i,s){super("Tb"),this.kb=t,this.Eb=e,this.Tb=i,this.xb=s}},ym=class extends me{constructor(){super("lt")}},Yn=function(t){return t.My="Ib",t.Rb="Cb",t}({}),bm=class extends me{constructor(t,e){super("Ib"),this.Yw=t,this.Sb=e}},Am=class extends me{constructor(){super("Cb")}};r(),r(),r();var Xn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Sm=16383,Tm=/[\t\n\f\r ]/g;function km(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:Em()}function Em(){throw new m("Invalid base64 input")}function Yu(t){let e=t;Tm.test(e)&&(e=e.replace(Tm,""));let i=e.length;i%4==0&&i>=1&&"="===e[i-1]&&(i>=2&&"="===e[i-2]?i-=2:i-=1,e=e.substr(0,i));const s=i%4;if(1===s)return Em();const n=0===s?0:4-s,r=new j(function(t,e){return 3*(t+e)/4-e}(i,n)),o=n>0?i-4:i;let h,a=0,u=0;for(;a<o;a+=4)h=km(e.charCodeAt(a))<<18|km(e.charCodeAt(a+1))<<12|km(e.charCodeAt(a+2))<<6|km(e.charCodeAt(a+3)),r[u++]=h>>16&255,r[u++]=h>>8&255,r[u++]=255&h;return 2===n?(h=km(e.charCodeAt(a))<<2|km(e.charCodeAt(a+1))>>4,r[u++]=255&h):1===n&&(h=km(e.charCodeAt(a))<<10|km(e.charCodeAt(a+1))<<4|km(e.charCodeAt(a+2))>>2,r[u++]=h>>8&255,r[u++]=255&h),r}function xm(t,e,i){return Xn[t>>2]+Xn[(3&t)<<4|e>>4]+Xn[(15&e)<<2|i>>6]+Xn[63&i]}function Im(t,e,i){const s=[];for(let n=e;n<i;n+=3)s.push(xm(t[n],t[n+1],t[n+2]));return s.join("")}function na(t){const e=t.length,i=e%3,s=[],n=e-i;for(let e=0;e<n;e+=Sm)s.push(Im(t,e,_.min(n,e+Sm)));if(1===i){const i=t[e-1];s.push(Xn[i>>2]+Xn[(3&i)<<4]+"==")}else if(2===i){const i=t[e-2],n=t[e-1];s.push(Xn[i>>2]+Xn[(3&i)<<4|n>>4]+Xn[(15&n)<<2]+"=")}return s.join("")}function Rm(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}function nu(t,e){const i=e.nc,s=t.getUint8(i>>3),n=1<<7-(7&i);return e.Pb(1),(s&n)===n?1:0}function vs(t,e,i){let s=0;for(let n=0;n<i;n++)s=2*s+nu(t,e);return s}r(),r();var Cm=class t{get nc(){return this.rc}Pb(t){this.rc+=t}Db(t){this.rc=t}Nb(){return new t(this.nc)}constructor(t=0){this.rc=t}};var Pm=_.clz32||function(t){let e=32,i=t>>16;return i&&(e-=16,t=i),i=t>>8,i&&(e-=8,t=i),i=t>>4,i&&(e-=4,t=i),i=t>>2,i&&(e-=2,t=i),i=t>>1,i?e-2:e-t};function Dm(t){if(t>=55296&&t<=57343)throw new m("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Nm(t,e){return t>>e&63|128}function Mm(t,e){0!=(4294967168&t)?(0==(4294965248&t)?e.push(t>>6&31|192):0==(4294901760&t)?(Dm(t),e.push(t>>12&15|224),e.push(Nm(t,6))):0==(4292870144&t)&&(e.push(t>>18&7|240),e.push(Nm(t,12)),e.push(Nm(t,6))),e.push(63&t|128)):e.push(t)}function Lm(t,e){if(e.nc>=t.length)throw new m("Invalid byte index");const i=255&t[e.nc];if(e.Pb(1),128==(192&i))return 63&i;throw new m("Invalid continuation byte")}function Bm(t,e){const i=e.nc;if(i>t.length)throw new m("Invalid byte index");if(i===t.length)return!1;const s=255&t[i];if(e.Pb(1),0==(128&s))return s;if(192==(224&s)){const i=(31&s)<<6|Lm(t,e);if(i>=128)return i;throw new m("Invalid continuation byte")}if(224==(240&s)){const i=(15&s)<<12|Lm(t,e)<<6|Lm(t,e);if(i>=2048)return Dm(i),i;throw new m("Invalid continuation byte")}if(240==(248&s)){const i=(7&s)<<18|Lm(t,e)<<12|Lm(t,e)<<6|Lm(t,e);if(i>=65536&&i<=1114111)return i}throw new m("Invalid UTF-8 detected")}r(),r();var Om=65279;var Fm=[128,64,32,16,8,4,2,1],Vm=class{Mb(t){return Wm(this.Lb,t)}constructor(t){this.Lb=t}};function Wm(t,e){return(t&e)===e}function Um(t,e){return Wm(t,Fm[e])}function hc(t,e){const i=t.getUint8(e.nc);return e.Pb(1),i}function Gm(t,e,i){t.setUint8(e.nc,i),e.Pb(1)}function $(t,e,i){const s=fi(Lr(t),e.nc,e.nc+i);return e.Pb(s.byteLength),s}function Zm(t,e,i){Lr(t).set(Lr(i),e.nc),e.Pb(i.byteLength)}function Hm(t,e,i){return e.nc+i<=t.byteLength}function Xm(t,e,i,s){return void 0===s&&(s=!1),s?function(t,e,i){let s=0,n=1;for(let r=0;r<i;r++)s+=hc(t,e)*n,n*=256;return s}(t,e,i):function(t,e,i){let s=0;for(let n=0;n<i;n++)s=256*s+hc(t,e);return s}(t,e,i)}function zm(t,e){const i=t.getUint8(e.nc);return e.Pb(1),i}function dn(t,e,i){void 0===i&&(i=!1);const s=t.getUint16(e.nc,i);return e.Pb(2),s}function qm(t,e,i,s){void 0===s&&(s=!1),t.setUint16(e.nc,i,s),e.Pb(2)}function $e(t,e,i){void 0===i&&(i=!1);const s=t.getUint32(e.nc,i);return e.Pb(4),s}function Ym(t,e,i,s){void 0===s&&(s=!1),t.setUint32(e.nc,i,s),e.Pb(4)}function no(t,e,i){void 0===i&&(i=!1);const s=$e(t,e,i),n=$e(t,e,i),r=i?n:s,o=i?s:n;return po.fromBits(o,r,!0)}function Km(t,e,i,s){void 0===s&&(s=!1);const n=i.getHighBitsUnsigned(),r=i.getLowBitsUnsigned(),o=s?n:r;Ym(t,e,s?r:n,s),Ym(t,e,o,s)}function jm(t,e){return ro(t,e)}function il(t,e,i){return am(dp($(t,e,i)))}function Qm(t,e){const i=hc(t,e);let s;return 0==(128&i)?s=i:192==(224&i)?s=64*(31&i)+(63&hc(t,e)):224==(240&i)?s=4096*(15&i)+64*(63&hc(t,e))+(63&hc(t,e)):240==(248&i)&&(s=262144*(7&i)+4096*(63&hc(t,e))+64*(63&hc(t,e))+(63&hc(t,e))),s}function ro(t,e){return Jm(t,e,!0)}function Jm(t,e,i){const s=[];for(;e.nc<t.byteLength;){const n=hc(t,e);if(i&&!n)break;s.push(n)}return am(s)}function $m(t,e,i){const s=i.length;for(let n=0;n<s;n+=1){Gm(t,e,i.charCodeAt(n))}}function tp(t,e){if(!(e.nc+2<=t.byteLength))return;const i=t.getUint8(e.nc),s=t.getUint8(e.nc+1);return(254!==i||255!==s)&&(255===i&&254===s||void 0)}function ep(t,e){const i=tp(t,e);return void 0!==i&&e.Pb(2),ip(t,e,!0===i)}function ip(t,e,i){return void 0===i&&(i=!1),sp(t,e,i,!0)}function sp(t,e,i,s){const n=[];for(;e.nc+2<=t.byteLength;){const r=dn(t,e,i);if(s&&!r)break;n.push(r)}return am(n)}function np(t,e,i,s){void 0===s&&(s=!1);const n=i.length;for(let r=0;r<n;r+=1){qm(t,e,i.charCodeAt(r),s)}}function Nh(t){return Jm(sa(t),new er,!1)}function rp(t){const e=new j(t.length);return $m(sa(e),new er,t),e}function op(t,e){return void 0===e&&(e=!1),sp(sa(t),new er,e,!1)}function hp(t,e){void 0===e&&(e=!1);const i=new j(2*t.length);return np(sa(i),new er,t,e),i}function ap(t,e){return e.nc+3<=t.byteLength&&(239===t.getUint8(e.nc)&&187===t.getUint8(e.nc+1)&&191===t.getUint8(e.nc+2))}function Dn(t,e){return function(t,e,i){const s=[],n=ap(t,e);n&&e.Pb(3);for(;e.nc<t.byteLength;){const n=Qm(t,e);if(void 0===n)break;if(i&&0===n)break;s.push(n)}return hm(s)}(t,e,!0)}function Zh(t){return function(t){return hm(t)}(function(t,e){const i=[],s=new er;let n;if(!e){if(n=Bm(t,s),!1===n)return i;n===Om||i.push(n)}for(;!1!==(n=Bm(t,s));)i.push(n);return i}(Lr(t)))}function up(t){return new j(function(t){const e=[];for(const i of t)Mm(i,e);return e}(function(t){const e=[];let i=0;const s=t.length;for(;i<s;){const n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<s){const s=t.charCodeAt(i++);56320==(64512&s)?e.push(((1023&n)<<10)+(1023&s)+65536):(e.push(n),i--)}else e.push(n)}return e}(t)))}function cp(t,e){if(ap(t,e))return Dn(t,e);if(void 0!==tp(t,e))return ep(t,e);if(e.nc+4<=t.byteLength){if(0===t.getUint8(e.nc)&&0===t.getUint8(e.nc+2))return ip(t,e,!1);if(0===t.getUint8(e.nc+1)&&0===t.getUint8(e.nc+3))return ip(t,e,!0)}return Dn(t,e)}function fi(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new j(t.buffer,t.byteOffset+e,i-e)}function La(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new DataView(t.buffer,t.byteOffset+e,i-e)}function sa(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Lr(t){return new j(t.buffer,t.byteOffset,t.byteLength)}function lp(t){return t instanceof ArrayBuffer||vc(t)}function Uh(t){return t instanceof ArrayBuffer?new j(t):Lr(t)}function Hc(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),t.slice?t.slice(e,i):cc(fi(t,e,i))}function cc(t){if(t.slice)return t.slice(0);{const e=new j(t.byteLength);return e.set(t,0),e}}function dp(t){return[].slice.call(t)}var er=class t{get nc(){return this.rc}Pb(t){this.rc+=t}Db(t){this.rc=t}Nb(){return new t(this.nc)}Bb(){return new Cm(this.nc<<3)}constructor(t=0){this.rc=t}};function fp(t){let e=t.toLowerCase(),i=0,s=0;Cl(e,"0x")&&(e=e.substring(2));const n=new j(_.ceil(e.length/2));for(1==(1&e.length)&&(i=1,n[s++]=x(e[0],16));i<e.length;i+=2)n[s++]=x(e.substr(i,2),16);return n}function _p(t){return.001*t}var vp=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],vc=ArrayBuffer.isView||(t=>t&&fh(vp,pd.call(t)));function gp(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;return ho(new j(t),new j(e))}function ho(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;for(let i=0;i<t.length;i+=1)if(t[i]!==e[i])return!1;return!0}function mp(t,e){return t===e||ho(Uh(t),Uh(e))}function gu(t){const e=t.reduce(((t,e)=>t+e.byteLength),0);return pp(t,e)}function pp(t,e){const i=new j(e);let s=0;for(const e of t)i.set(e,s),s+=e.byteLength;return i}function wp(t,e,i){const s=new j(t.byteLength+e.byteLength),n=fi(t,0,i),r=fi(t,i);return s.set(n),s.set(e,i),s.set(r,i+e.byteLength),s}function su(t){return Yu(t).buffer}function yp(t){return na(new j(t))}function pc(t){return na(rp(t))}var xc=new j([0]).buffer,bp=class{get Ob(){return this.tc.length}Fb(t){for(const e of this.tc)if(mp(e[0],t))return!0;return!1}Vb(t){for(const e of this.tc)if(mp(e[0],t))return e[1]}Wb(t,e){for(const i of this.tc)if(mp(i[0],t))return void(i[1]=e);this.tc.push([t,e])}Ub(t,e){this.tc.forEach((e=>t(e[1],e[0])),e)}Gb(){En(this.tc)}constructor(){this.tc=[]}};r();var is=class{Zb(t){this.Gd&&(this.Gd(t),this.Km())}Hb(t){this.Zd&&(this.Zd(t),this.Km())}np(){this.Xb.catch(M),this.Hb(new vt)}rp(t){t.then((t=>this.Zb(t)),(t=>this.Hb(t)))}Km(){this.Gd=void 0,this.Zd=void 0}constructor(){this.Xb=new Promise(((t,e)=>{this.Gd=t,this.Zd=e}))}};function Ap(){return new j([8,4]).buffer}function Sp(t,e){return t===Ja?function(t){if(t.byteLength<2*Tp.length)return t;const e=new DataView(t,0,2*Tp.length),i=op(e,!0);if(i===Tp)return t;return function(t){const e='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',i='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+e+yp(t)+i;return hp(s,!0).buffer}(t)}(e):e}r();var Tp="<PlayReady";r(),r();var $n=class extends dl{constructor(t,e,i,s){super(t,s),this.zb=e,this.qb=i}};r(),r(),r(),r(),r();var kp=function(t,e){return(kp=w.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)w.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function Dt(t,e){if("function"!=typeof e&&null!==e)throw new g("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}kp(t,e),t.prototype=null===e?w.create(e):(i.prototype=e.prototype,new i)}function Ep(t,e,i){return t.indexOf?t.indexOf(e,i):Array.prototype.indexOf.call(t,e,i)}r(),r(),r(),r(),r(),r(),r();!function(){function t(t,e){this.Yb=t,this.Kb=e}t.prototype.get=function(t){var e=this.Yb.get(t);if(0===this.Kb||void 0===e)return e;var i=this.Yb.get(t+1)||0,s=e&(1<<8-this.Kb)-1,n=i>>8-this.Kb;return(s<<this.Kb)+n},t.prototype.getBit=function(t){if(!(t<0)){var e=this.Yb.get(_.floor((t+this.Kb)/8));if(void 0!==e)return(e&1<<7-this.Kb-t%8)>0?1:0}},w.defineProperty(t.prototype,"bitLength",{get:function(){return this.Yb.bitLength-this.Kb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"length",{get:function(){return this.Yb.length},enumerable:!1,configurable:!0})}();r(),r();_.pow(2,-52);function xp(t,e,i){return _.min(_.max(t,e),i)}function Ip(t,e){return t>>8-e}function Rp(t,e){return t&(1<<e)-1}var oo=function(){function t(t){this.jb=t,this.Qb=0,this.Jb=0}return w.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.Qb+this.Jb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"done",{get:function(){return this.Qb===this.jb.length&&0===this.Jb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"location",{get:function(){return{byte:this.Qb,bit:this.Jb}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var e=new t(this.jb);return e.seek(this.Qb,this.Jb),e},t.prototype.canReadBits=function(t){return 8*this.Qb+t+this.Jb<=8*this.jb.length},t.prototype.canReadBytes=function(t){return 0===this.Jb?this.Qb+t<=this.jb.length:this.Qb+t<this.jb.length},t.prototype.incBit=function(){this.Jb++,this.Jb>7&&(this.Qb++,this.Jb=0)},t.prototype.seek=function(t,e){this.Qb=t,this.Jb=e},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new m("Cannot read past end of buffer.");return this.jb.get(this.Qb)>>7-this.Jb&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new m("Cannot read past end of buffer.");if(0===this.Jb)return this.jb.get(this.Qb++);var t=Rp(this.jb.get(this.Qb),8-this.Jb),e=Ip(this.jb.get(this.Qb+1),this.Jb);return this.Qb++,t<<this.Jb|e},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new m("Cannot read past end of buffer.");for(var e=[],i=0;i<t;i++)e.push(this.readBit());return e},t.prototype.readUInt=function(t){if(t>32)throw new m("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new m("Cannot read past end of buffer.");var e=0;if(0===this.Jb&&t%8==0)for(var i=t-8;i>=0;i-=8)e|=this.readByte()<<i;else for(i=t-1;i>=0;i--)e|=this.readBit()<<i;return e},t.prototype.readInt=function(t){if(t>32)throw new m("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new m("Cannot read past end of buffer.");var e=this.readUInt(t);return 0===(e&1<<t-1)?e:e-_.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var e=1<<t;return e+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new m("Skipping over the buffer edge is not allowed.");var e=this.Jb+t;this.Qb+=e>>3,this.Jb=7&e},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new m("Cannot read past end of buffer.");for(var e=[],i=0;i<t;i++)e.push(this.readByte());return String.fromCharCode.apply(String,e)},t}();r(),r(),r();var Cp=function(t,e){return t===e?0:t<e?-1:t>e?1:S(t)?S(e)?0:1:-1},we=function(){function t(){this.$b=[],this.tA=[],this.eA=0}return t.from=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var s=new t,n=0,r=e;n<r.length;n++){var o=r[n];s.pushRange(o)}return s},t.prototype.pushRange=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=t.length),i<0)throw new m("The buffer length must be positive.");if(0!==i){if(0===this.tA.length)this.tA.push(0);else{var s=this.tA[this.tA.length-1]+this.$b[this.$b.length-1].length;this.tA.push(s)}this.$b.push(t.subarray(e,e+i)),this.eA+=i}},t.prototype.concat=function(e){var i=new t;return i.pushRange(this.join()),i.pushRange(e.join()),i},t.prototype.copy=function(t,e,i,s){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=this.length),e<0||i<0||s<0)throw new RangeError;return this.slice(i,s).copyInternal(t,e)},t.prototype.copyInternal=function(t,e){for(var i=0,s=e,n=0,r=this.$b;n<r.length;n++){var o=r[n];t.set(o,s),i+=o.length,s+=o.length}return i},t.prototype.clear=function(){this.$b=[],this.tA=[],this.eA=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var e=this.findContainingBufferIndex(t),i=t-this.tA[e];return this.$b[e][i]}},w.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.$b.length<1)return-1;if(this.$b.length>1){var e=this.join();this.clear(),this.pushRange(e)}var i=this.$b[0];return"number"==typeof t?Ep(i,t):"undefined"!=typeof Buffer?Buffer.from(i.buffer,i.byteOffset,i.byteLength).indexOf(t):function(t,e){if(0===e.length)return 0;for(var i=e[0],s=e.length,n=t.length-s,r=0;r<=n&&!((r=Ep(t,i,r))<0||r>n);r++){for(var o=r+1,h=r+s,a=1;o<h&&t[o]===e[a];o++,a++);if(o===h)return r}return-1}(i,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,e,i){if(0!==t.length){var s=0,n=t.length-1;if(1!==i(t[s],e)){if(1===i(e,t[n]))return n;for(;s!==n;){var r=_.ceil((s+n)/2);i(t[r],e)<=0?s=r:n=r-1}return s}}}(this.tA,t,Cp)},t.prototype.join=function(){if(1===this.$b.length)return this.$b[0];var t=new j(this.length);return this.copyInternal(t,0),t},w.defineProperty(t.prototype,"length",{get:function(){return this.eA},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,e){if(e<=0||e>4)throw new m("Expected byteLength to be between 0 and 4 but was "+e);if(t<0||t>this.length-e)throw new m("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-e)+")");if(1===e)return this.get(t);for(var i=0,s=0;s<e;s++)i+=this.get(t+s)*_.pow(2,8*(e-s-1));return i},t.prototype.slice=function(e,i){void 0===i&&(i=this.length);var s=xp(e,0,this.length),n=xp(i,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,o=this.findContainingBufferIndex(s),h=this.$b[o],a=s,u=a-this.tA[o];a+h.length-u<n;)r.pushRange(h,u,h.length-u),o+=1,u=(a+=h.length-u)-this.tA[o],h=this.$b[o];var c=n-a;return r.pushRange(h,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var e=this.length-1,i=this.$b.length-1,s=this.$b[i],n=s.length-1;e>=0&&i>=0;){if(0!==s[n])break;if(0===n){if(0===i)return new t;i-=1,n=(s=this.$b[i]).length-1}else n-=1;e-=1}return this.slice(0,e+1)},t}(),Pp=function(){function t(e){this.iA=e||t.BUFFER_CHUNK_SIZE,this.sA=!1,this.nA=new we,this.jb=new j(this.iA),this.rA=0,this.oA=0,this.Jb=7}return t.prototype.closeByte=function(){this.jb[this.rA++]=this.oA,this.rA>=this.iA&&this.closeBuffer(),this.oA=0,this.Jb=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.rA&&(this.nA.pushRange(this.jb,0,this.rA),t&&(this.jb=new j(this.iA)),this.rA=0)},w.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.Jb},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.sA)throw new m("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.sA=!0,this.nA},t.prototype.writeBit=function(t){if(this.sA)throw new m("Cannot write to a closed BitWriter.");this.oA|=t<<this.Jb,0===this.Jb?this.closeByte():this.Jb--},t.prototype.writeByte=function(t){if(this.sA)throw new m("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.oA=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var e=this.Jb;this.oA|=Ip(t,e+1),this.closeByte(),this.oA=Rp(t,8-e)<<e+1,this.Jb=e},t.prototype.writeBits=function(t){for(var e=0,i=t;e<i.length;e++){var s=i[e];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.sA)throw new m("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.rA+t.length<=this.iA?(this.jb.set(t,this.rA),this.rA+=t.length,this.rA===this.iA&&this.closeBuffer()):(this.closeBuffer(),this.nA.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var e=this.Jb;this.oA|=Ip(t[0],e+1),this.closeByte();for(var i=1;i<t.length;i++){var s=Rp(t[i-1],8-e),n=Ip(t[i],e+1);this.oA=s<<e+1|n,this.closeByte()}this.oA=Rp(t[t.length-1],8-e)<<e+1,this.Jb=e}},t.prototype.writeUInt=function(t,e){if(t<0)throw new m("Received a negative number.");if(e>32)throw new m("The max bitlength that can be provided is 32.");if(t>=_.pow(2,e))throw new m("Uint "+t+" cannot be represented in "+e+" bit(s).");if(this.isWritingStartBit&&e%8==0)for(var i=e-8;i>=0;i-=8)this.writeByte(t>>i&255);else for(i=e-1;i>=0;i--)this.writeBool((t&1<<i)>0)},t.prototype.writeInt=function(t,e){if(e>32)throw new m("The max bitlength that can be provided is 32.");if(_.abs(t)>=_.pow(2,e-1))throw new m("Signed integer "+t+" cannot be represented in "+e+" bit(s).");t<0?this.writeUInt(t+_.pow(2,e),e):this.writeUInt(t,e)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new m("Received a negative number.");for(var e=_.floor(_.log2(t+1))+1,i=0;i<e-1;i++)this.writeBit(0);this.writeUInt(t+1,e)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var e=function(t){for(var e=new j(t.length),i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(t),i=0;i<e.length;i++)this.writeByte(e[i])},t.BUFFER_CHUNK_SIZE=1024,t}();r();var Dp=function(){function t(t){this.rb=new we,this.Jd=t}return t.prototype.closeWriter=function(){void 0!==this.Jd&&(this.rb=this.rb.concat(this.Jd.close()),this.Jd=void 0)},w.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.Jd&&(this.Jd=new Pp),this.Jd},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),bh=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new m("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(e){var i=this.getSize(),s=i>=t.LARGE_SIZE/8,n=16===this.boxType.length;e.writeUInt(s?1:i,32),e.writeString(n?"uuid":this.boxType),s&&(e.writeUInt(_.floor(i/t.LARGE_SIZE),32),e.writeUInt(i%t.LARGE_SIZE,32)),n&&e.writeString(this.boxType)},t.prototype.getSize=function(){var e=8+(this.boxType.length>4?16:0),i=this.getBoxContentSize()+e;return i>=t.LARGE_SIZE/8&&(i+=8),i},t.prototype.serialize=function(){var t=new Dp;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=_.pow(2,32),t}();function Ft(t,e){return t instanceof po?64===e:t<_.pow(2,e)}function wo(t,e){return _.round(t*_.pow(2,e))}function Np(t,e){for(var i=0;i<e.length;i++)t.writeByte(e[i])}function ct(t,e){return t/_.pow(2,e)}r();var X=function(t){function e(e,i,s){var n=t.call(this,e)||this;if(n.version=i,!Ft(i,8))throw new m("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Dt(e,t),w.defineProperty(e.prototype,"flags",{get:function(){return this.v_},set:function(t){this.v_=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new m("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},e.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},e}(bh);r(),r();var Mp=function(t){function e(e,i){var s=t.call(this,e)||this;return s.data=i,s}return Dt(e,t),e.prototype.getBoxContentSize=function(){return this.data.length},e.prototype.serializeBoxContent=function(t){t.concat(we.from(this.data))},e}(bh);r(),r();var Lp=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();r();var Bp=16384;function Op(t){var e=t.length;if(e<=Bp)return String.fromCharCode.apply(String,t);for(var i=[],s=0;s<e;s+=Bp)i.push(String.fromCharCode.apply(String,t.slice(s,s+Bp)));return i.join("")}var Fp=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,e){return(t&e)===e}(this.raw,t)},t}();function Zn(t,e){var i=t.getUint8(e.offset);return e.shift(1),i}function Vp(t,e,i){var s=zp(Kp(t),e.offset,e.offset+i);return e.shift(s.byteLength),s}function Wp(t,e,i){return e.offset+i<=t.byteLength}function Up(t,e,i){void 0===i&&(i=!1);var s=t.getUint32(e.offset,i);return e.shift(4),s}function Gp(t,e,i){void 0===i&&(i=!1);var s=Up(t,e,i),n=Up(t,e,i),r=i?n:s,o=i?s:n;return po.fromBits(o,r,!0)}function Zp(t,e,i){return Op(function(t){return[].slice.call(t)}(Vp(t,e,i)))}function Hp(t,e){var i,s=Zn(t,e);return 0==(128&s)?i=s:192==(224&s)?i=64*(31&s)+(63&Zn(t,e)):224==(240&s)?i=4096*(15&s)+64*(63&Zn(t,e))+(63&Zn(t,e)):240==(248&s)&&(i=262144*(7&s)+4096*(63&Zn(t,e))+64*(63&Zn(t,e))+(63&Zn(t,e))),i}function Xp(t,e){return function(t,e,i){var s=[],n=function(t,e){return e.offset+3<=t.byteLength&&239===t.getUint8(e.offset)&&187===t.getUint8(e.offset+1)&&191===t.getUint8(e.offset+2)}(t,e);n&&e.shift(3);for(;e.offset<t.byteLength;){var r=Hp(t,e);if(void 0===r)break;if(i&&0===r)break;s.push(r)}return function(t){for(var e=[],i=0,s=t;i<s.length;i++){var n=s[i];n>65535&&(n-=65536,e.push(n>>>10&1023|55296),n=56320|1023&n),e.push(n)}return Op(e)}(s)}(t,e,!0)}function zp(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new j(t.buffer,t.byteOffset+e,i-e)}function qp(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new DataView(t.buffer,t.byteOffset+e,i-e)}function Yp(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Kp(t){return new j(t.buffer,t.byteOffset,t.byteLength)}var jp=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new Lp(this.offset<<3)},t}();r();var Qp=function(){function t(t,e){this.data=t,this.cursor=e}return t.prototype.nextUint8=function(){return Zn(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getUint16(e.offset,i);return e.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getInt16(e.offset,i);return e.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return Up(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getInt32(e.offset,i);return e.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,e,i){void 0===i&&(i=!1);var s=Up(t,e,i),n=Up(t,e,i),r=i?n:s,o=i?s:n;return po.fromBits(o,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return Gp(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return Vp(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,e,i){for(var s=[],n=0;n<i;n++)s.push(Up(t,e));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return Zp(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return Xp(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function nn(t,e){return t.type===e}var Jp=8;function li(t){var e=function(t,e){var i=[];for(;e.offset<t.byteLength;){var s=$p(t,e);if(!s.complete)return{complete:!1,boxes:i};i.push(s.box)}return{complete:!0,boxes:i}}(t.data,t.cursor);if(!e.complete)throw new m("Data incomplete");return e.boxes}function $p(t,e){var i=e.offset,s=function(t,e){var i=e.offset;if(!Wp(t,e,Jp)){return{complete:!1,neededOffset:r=e.offset+Jp}}var s=Up(t,e),n=Zp(t,e,4);if(1===s){if(!Wp(t,e,8)){var r=e.offset+8;return e.seek(i),{complete:!1,neededOffset:r}}s=Gp(t,e).toNumber()}if("uuid"===n){if(!Wp(t,e,16)){r=e.offset+16;return e.seek(i),{complete:!1,neededOffset:r}}n=Zp(t,e,16)}var o=e.offset,h={type:n,size:s,headerSize:o-i};return{complete:!0,header:h}}(t,e);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-i);var o=i+r;if(o>t.byteLength){var h=o;return e.seek(i),{complete:!1,neededOffset:h}}var a={type:n.type,offset:i,data:new Qp(qp(t,i,o),new jp(n.headerSize))};return e.seek(o),{complete:!0,box:a}}function tw(t){return{version:t>>24,flags:new Fp(16777215&t)}}function ew(t,e){var i,s,n,r;return 1===e?(i=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(i=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:i,modification:s,scale:n,duration:r}}function iw(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function sw(t){var e=t.nextUint32Array(9);return{a:ct(e[0],16),b:ct(e[1],16),u:ct(e[2],30),c:ct(e[3],16),d:ct(e[4],16),v:ct(e[5],30),x:ct(e[6],16),y:ct(e[7],16),w:ct(e[8],30)}}function gi(t){return new Mp(t.type,zp(Kp(t.data.data),t.data.cursor.offset))}var nw=function(t){function e(e,i,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=i,r.handlerType=e,r}return Dt(e,t),w.defineProperty(e.prototype,"handlerType",{get:function(){return this.hA},set:function(t){this.hA=t},enumerable:!1,configurable:!0}),e.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(i=null===(e=this.name)||void 0===e?void 0:e.length)&&void 0!==i?i:0)+1},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeString(this.handlerType),this.serializeReserved(e),this.name&&e.writer.writeString(this.name),e.writer.writeByte(0)},e}(X);function rw(t){var e=t.data,i=tw(e.nextUint32()),s=i.version,n=i.flags;e.skip(4);var r=e.nextChars(4);e.skip(12);var o=e.nextUTF8String();return new nw(r,o,s,n.raw)}!function(t){function e(){return t.call(this,"mdir")||this}Dt(e,t),e.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(nw);r(),r(),r();var wc=function(){function t(t,e){void 0===e&&(e=!1),this.fixed28BitMode=e,this.tag=t}return t.prototype.encodeSize=function(t){for(var e=[];t>0;)e.length>0&&(e[e.length-1]+=128),e.push(t%128),t>>=7;if(this.fixed28BitMode)for(;e.length<4;)e.push(128);return e.reverse()},w.defineProperty(t.prototype,"tag",{get:function(){return this.aA},set:function(t){if(!Ft(t,8))throw new m("Provided tag does not fit in 8 bits.");this.aA=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var e=0,i=this.encodeSize(this.getDescriptorSize());e<i.length;e++){var s=i[e];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}();r();!function(t){function e(e,i,s,n,r,o,h){void 0===h&&(h={});var a=t.call(this,4,h.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=o,a.objectTypeIndication=e,a.streamType=i,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}Dt(e,t),w.defineProperty(e.prototype,"objectTypeIndication",{get:function(){return this.uA},set:function(t){if(!Ft(t,8))throw new m("Provided objectTypeIndication does not fit in 8 bits.");this.uA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"streamType",{get:function(){return this.cA},set:function(t){if(!Ft(t,6))throw new m("Provided streamType does not fit in 6 bits.");this.cA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"bufferSizeDb",{get:function(){return this.lA},set:function(t){if(!Ft(t,24))throw new m("Provided bufferSizeDb does not fit in 24 bits.");this.lA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"maxBitrate",{get:function(){return this.dA},set:function(t){if(!Ft(t,32))throw new m("Provided maxBitrate does not fit in 32 bits.");this.dA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"avgBitrate",{get:function(){return this.fA},set:function(t){if(!Ft(t,32))throw new m("Provided avgBitrate does not fit in 32 bits.");this.fA=t},enumerable:!1,configurable:!0}),e.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce((function(t,e){return t+e.getSize()}),0)},e.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var e=0,i=this.decoderSpecificInfo;e<i.length;e++){i[e].serialize(t)}}}(wc);r();!function(t){function e(e,i){void 0===i&&(i={});var s=t.call(this,5,i.fixed28BitMode)||this;return s.data=e,s}Dt(e,t),e.prototype.getDescriptorSize=function(){return this.data.length},e.prototype.serializeDescriptorContent=function(t){t.concat(we.from(this.data))}}(wc);r(),r();var ow=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this,6,e)||this;return i.predefined=2,i}return Dt(e,t),e.prototype.getDescriptorSize=function(){return 1},e.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},e}(wc);!function(t){function e(e,i,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=e,r.streamPriority=i,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new ow(n.fixed28BitMode),r}Dt(e,t),w.defineProperty(e.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"esId",{get:function(){return this._A},set:function(t){if(!Ft(t,16))throw new m("Provided esId does not fit in 16 bits.");this._A=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"streamPriority",{get:function(){return this.vA},set:function(t){if(!Ft(t,5))throw new m("Provided streamPriority does not fit in 5 bits.");this.vA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"dependsOnEsId",{get:function(){return this.gA},set:function(t){if(t&&!Ft(t,16))throw new m("Provided dependsOnEsId does not fit in 16 bits.");this.gA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"ocrEsId",{get:function(){return this.mA},set:function(t){if(t&&!Ft(t,16))throw new m("Provided ocrEsId does not fit in 16 bits.");this.mA=t},enumerable:!1,configurable:!0}),e.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},e.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(wc);r(),r(),r(),r(),r();var hw=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxes=[],e}return Dt(e,t),e.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce((function(t,e){return t+e.getSize()}),0)},e.prototype.serialize=function(){for(var e=t.prototype.serialize.call(this),i=0,s=this.boxes;i<s.length;i++){var n=s[i];e=e.concat(n.serialize())}return e},e}(bh),aa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dt(e,t),e.prototype.serializeBoxContent=function(t){},e.prototype.getBoxContentSize=function(){return 0},e}(hw),aw=function(t){function e(e,i){var s=t.call(this,e)||this;return s.dataReferenceIndex=i,s}return Dt(e,t),w.defineProperty(e.prototype,"dataReferenceIndex",{get:function(){return this.pA},set:function(t){if(!Ft(t,16))throw new m("Provided dataReferenceIndex does not fit in 16 bits.");this.pA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 8},e.prototype.serializeBoxContent=function(t){for(var e=0;e<6;e++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},e}(aa),uw=function(t){function e(e,i,s,n){var r,o,h=this;return(h=t.call(this,e,i)||this).extra=n,h.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,h.sampleSize=null!==(o=s.sampleSize)&&void 0!==o?o:16,h.sampleRate=s.sampleRate,h}return Dt(e,t),w.defineProperty(e.prototype,"channelCount",{get:function(){return this.wA},set:function(t){if(!Ft(t,16))throw new m("Provided channelCount does not fit in 16 bits.");this.wA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"sampleSize",{get:function(){return this.yA},set:function(t){if(!Ft(t,16))throw new m("Provided sampleSize does not fit in 16 bits.");this.yA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"sampleRate",{get:function(){return this.bA},set:function(t){if(!Ft(wo(t,16),32))throw new m("Provided rate does not fit in 32 bits (fixed 16.16).");this.bA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(i=null===(e=this.extra)||void 0===e?void 0:e.length)&&void 0!==i?i:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.channelCount,16),e.writer.writeUInt(this.sampleSize,16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,16),e.writer.writeUInt(wo(this.sampleRate,16),32),this.extra&&Np(e.writer,this.extra)},e}(aw);r();!function(t){function e(e){var i=t.call(this,"stco",0,0)||this;return i.entries=e,i}Dt(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.AA},set:function(t){if(!Ft(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ft(t,32)})))throw new m("Not all entries can be represented in 32 bits.");this.AA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}}(X);r();!function(t){function e(e){var i=t.call(this,"clap")||this;return i.cleanApertureWidthN=e.cleanApertureWidthN,i.cleanApertureWidthD=e.cleanApertureWidthD,i.cleanApertureHeightN=e.cleanApertureHeightN,i.cleanApertureHeightD=e.cleanApertureHeightD,i.horizOffN=e.horizOffN,i.horizOffD=e.horizOffD,i.vertOffN=e.vertOffN,i.vertOffD=e.vertOffD,i}Dt(e,t),w.defineProperty(e.prototype,"cleanApertureWidthN",{get:function(){return this.SA},set:function(t){if(!Ft(t,32))throw new m("Provided cleanApertureWidthN does not fit in 32 bits.");this.SA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"cleanApertureWidthD",{get:function(){return this.TA},set:function(t){if(!Ft(t,32))throw new m("Provided cleanApertureWidthD does not fit in 32 bits.");this.TA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"cleanApertureHeightN",{get:function(){return this.kA},set:function(t){if(!Ft(t,32))throw new m("Provided cleanApertureHeightN does not fit in 32 bits.");this.kA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"cleanApertureHeightD",{get:function(){return this.EA},set:function(t){if(!Ft(t,32))throw new m("Provided cleanApertureHeightD does not fit in 32 bits.");this.EA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"horizOffN",{get:function(){return this.xA},set:function(t){if(!Ft(t,32))throw new m("Provided horizOffN does not fit in 32 bits.");this.xA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"horizOffD",{get:function(){return this.IA},set:function(t){if(!Ft(t,32))throw new m("Provided horizOffD does not fit in 32 bits.");this.IA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"vertOffN",{get:function(){return this.RA},set:function(t){if(!Ft(t,32))throw new m("Provided vertOffN does not fit in 32 bits.");this.RA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"vertOffD",{get:function(){return this.CA},set:function(t){if(!Ft(t,32))throw new m("Provided vertOffD does not fit in 32 bits.");this.CA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 32},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(bh);r();!function(t){function e(e,i){var s=t.call(this,"ctts",e,0)||this;return s.entries=i,s}Dt(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.AA},set:function(t){if(!Ft(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ft(t.sampleCount,32)||!Ft(t.sampleOffset,32)})))throw new m("Not all entries can be represented in 64 bits.");this.AA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.sampleCount,32),0===this.version?e.writer.writeUInt(n.sampleOffset,32):1===this.version&&e.writer.writeInt(n.sampleOffset,32)}}}(X);r();!function(t){function e(e){var i=t.call(this,"url ",0,void 0===e?1:0)||this;return i.location=e,i}Dt(e,t),w.defineProperty(e.prototype,"location",{get:function(){return this.PA},set:function(t){this.flags=void 0===t?1:0,this.PA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this);return this.location?e+this.location.length+1:e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.location&&(e.writer.writeString(this.location),e.writer.writeByte(0))}}(X);r();!function(t){function e(e,i,s){var n=t.call(this,"urn ",0,s)||this;return n.name=e,n.location=i,n}Dt(e,t),w.defineProperty(e.prototype,"location",{get:function(){return this.PA},set:function(t){if(1&this.flags)throw new m("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.PA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?e+this.location.length+1:e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.name),e.writer.writeByte(0),this.location&&(e.writer.writeString(this.location),e.writer.writeByte(0))}}(X);r();!function(t){function e(){return t.call(this,"dinf")||this}Dt(e,t)}(aa);r(),r();var Cc=function(t){function e(e,i,s){var n=t.call(this,e)||this;if(n.version=i,!Ft(i,8))throw new m("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Dt(e,t),w.defineProperty(e.prototype,"flags",{get:function(){return this.v_},set:function(t){this.v_=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new m("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},e.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},e}(hw);!function(t){function e(){return t.call(this,"dref",0,0)||this}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.boxes.length,32)}}(Cc);r(),r();var cw=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"elst",i,s)||this;return n.entries=e,n}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"entries",{get:function(){return this.AA},set:function(t){for(var e=0,i=t;e<i.length;e++){var s=i[e];if(!Ft(s.segmentDuration,this.bitSize))throw new m("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!Ft(s.mediaTime,this.bitSize))throw new m("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!Ft(s.mediaRateInteger,16))throw new m("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!Ft(s.mediaRateFraction,16))throw new m("Provided mediaRateFraction does not fit in 16 bits.")}this.AA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(e)},e}(X),lw=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return Dt(e,t),e.prototype.serializeElstBoxContent=function(t){for(var e,i=0,s=this.entries;i<s.length;i++){var n=s[i];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(e=n.mediaRateFraction)&&void 0!==e?e:0,16)}},e}(cw),dw=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return Dt(e,t),e.prototype.serializeElstBoxContent=function(t){for(var e,i=0,s=this.entries;i<s.length;i++){var n=s[i];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(e=n.mediaRateFraction)&&void 0!==e?e:0,16)}},e}(cw);function fw(t){for(var e=t.data,i=tw(e.nextUint32()),s=i.version,n=i.flags,r=e.nextUint32(),o=[],h=0;h<r;h++){var a=void 0,u=void 0;0===s?(a=e.nextUint32(),u=e.nextInt32()):(a=e.nextUint64(),u=e.nextInt64());var c=e.nextInt16(),l=e.nextInt16();o.push({segmentDuration:a,mediaTime:u,mediaRateFraction:l,mediaRateInteger:c})}return 0===s?new lw(o,n.raw):new dw(o,n.raw)}var _w=function(t){function e(){return t.call(this,"edts")||this}return Dt(e,t),e}(aa);function vw(t){for(var e=new _w,i=0,s=li(t.data);i<s.length;i++){var n=s[i];nn(n,"elst")?e.boxes.push(fw(n)):e.boxes.push(gi(n))}return e}r(),r();var gw=function(t){function e(e,i,s,n){var r=t.call(this,e)||this;return r.majorBrand=i,r.minorVersion=s,r.compatibleBrands=n,r}return Dt(e,t),w.defineProperty(e.prototype,"majorBrand",{get:function(){return this.DA},set:function(t){if(4!==t.length)throw new m("the provided major brand does not conform to the 4 character requirement");this.DA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"minorVersion",{get:function(){return this.NA},set:function(t){if(!Ft(t,32))throw new m("the provided minor version does not fit in 32 bits.");this.NA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"compatibleBrands",{get:function(){return this.MA},set:function(t){if(t.some((function(t){return 4!==t.length})))throw new m("Some of the compatible brands do not conform to the 4 character requirement");this.MA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},e.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var e=0,i=this.compatibleBrands;e<i.length;e++){var s=i[e];t.writer.writeString(s)}},e}(bh),mw=function(t){function e(e,i,s){return t.call(this,"ftyp",e,i,s)||this}return Dt(e,t),e}(gw);function pw(t){for(var e=t.data,i=e.nextChars(4),s=e.nextUint32(),n=[];e.cursor.offset<e.data.byteLength;)n.push(e.nextChars(4));return new mw(i,s,n)}r();var ww=function(t){function e(e,i){void 0===i&&(i="free");var s=t.call(this,i)||this;return s.data=e,s}return Dt(e,t),e.prototype.getBoxContentSize=function(){var t,e;return null!==(e=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==e?e:0},e.prototype.serializeBoxContent=function(t){this.data&&t.concat(we.from(this.data))},e}(bh);r(),r();var yw=function(t){function e(e,i,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=e.creation,r.modificationTime=e.modification,r.timescale=e.scale,r.duration=e.duration,r.language=i,r}return Dt(e,t),w.defineProperty(e.prototype,"creationTime",{get:function(){return this.LA},set:function(t){if(!Ft(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.LA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"modificationTime",{get:function(){return this.BA},set:function(t){if(!Ft(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.BA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"timescale",{get:function(){return this.OA},set:function(t){if(!Ft(t,32))throw new m("Provided sequence number does not fit in 32 bits.");this.OA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"duration",{get:function(){return this.FA},set:function(t){if(!Ft(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.FA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"language",{get:function(){return this.VA},set:function(t){if(!Tw(t))throw new m("Expected an ISO-639-2/T language code");this.VA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeMdiaContent(e),e.writer.writeBit(0);for(var i=0,s=this.language;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.charCodeAt(0)-96,5)}e.writer.writeUInt(0,16)},e}(X),bw=function(t){function e(e,i,s){return void 0===s&&(s=0),t.call(this,e,i,0,s)||this}return Dt(e,t),e.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},e}(yw),Aw=function(t){function e(e,i,s){return void 0===s&&(s=0),t.call(this,e,i,1,s)||this}return Dt(e,t),e.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(yw);function Sw(t){var e=t.data,i=tw(e.nextUint32()),s=i.version,n=i.flags,r=ew(e,s),o=new oo(we.from(e.nextUint8Array(2)));o.skipBits(1);for(var h=[],a=0;a<3;a++)h.push(o.readUInt(5));var u=h.map((function(t){return String.fromCharCode(t+96)})).join("");return Tw(u)||(u="und"),e.skip(2),0===s?new bw(r,u,n.raw):new Aw(r,u,n.raw)}function Tw(t){return/^[a-z]{3}$/.test(t)}var kw=function(t){function e(){return t.call(this,"mdia")||this}return Dt(e,t),e}(aa);function Ew(t){for(var e=new kw,i=0,s=li(t.data);i<s.length;i++){var n=s[i];nn(n,"mdhd")?e.boxes.push(Sw(n)):nn(n,"hdlr")?e.boxes.push(rw(n)):e.boxes.push(gi(n))}return e}r();var xw=function(t){function e(){var e=t.call(this,"mdat")||this;return e.data=new we,e}return Dt(e,t),e.prototype.getBoxContentSize=function(){return this.data.length},e.prototype.serializeBoxContent=function(t){t.concat(this.data)},e}(bh);function Iw(t){var e=t.data,i=e.nextUint8Array(e.data.byteLength-e.cursor.offset),s=new xw;return s.data.pushRange(i),s}r();!function(t){function e(){return t.call(this,"minf")||this}Dt(e,t)}(aa);r();var Rw;!function(t){function e(e){var i=t.call(this,"meta",0,0)||this;return i.handler=e,i}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.handler.serialize())}}(Cc);r(),r(),function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(Rw||(Rw={})),r();var Cw,Pw,Dw={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function Nw(t,e){e.writer.writeUInt(wo(t.a,16),32),e.writer.writeUInt(wo(t.b,16),32),e.writer.writeUInt(wo(0,30),32),e.writer.writeUInt(wo(t.c,16),32),e.writer.writeUInt(wo(t.d,16),32),e.writer.writeUInt(wo(0,30),32),e.writer.writeUInt(wo(t.x,16),32),e.writer.writeUInt(wo(t.y,16),32),e.writer.writeUInt(wo(1,30),32)}function Mw(t,e){var i,s,n,r;e.writer.writeUInt(null!==(i=t.isLeading)&&void 0!==i?i:Cw.UNKNOWN,2),e.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:Pw.UNKNOWN,2),e.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:Pw.UNKNOWN,2),e.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:Pw.UNKNOWN,2)}function Lw(t,e){var i,s,n;e.writer.writeUInt(0,4),Mw(t,e),e.writer.writeUInt(null!==(i=t.samplePaddingValue)&&void 0!==i?i:0,3),e.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),e.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}r(),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(Cw||(Cw={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(Pw||(Pw={})),r(),r();var Bw=function(){};r(),r(),r();var Ow=function(t){function e(e,i,s){var n=t.call(this,"pssh",e,0)||this;return n.systemId=i,n.data=s,n}return Dt(e,t),w.defineProperty(e.prototype,"systemId",{get:function(){return this.WA},set:function(t){if(16!==t.length)throw new m("Provided systemId length is not 16.");this.WA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"data",{get:function(){return this.Xp},set:function(t){if(!Ft(t.length,32))throw new m("Provided data length does not fit in 32 bits.");this.Xp=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},e.prototype.serializeVersionBoxContent=function(t){},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(we.from(this.systemId)),this.serializeVersionBoxContent(e),e.writer.writeUInt(this.data.length,32),e.concat(we.from(this.data))},e}(X),Fw=function(t){function e(e,i){return t.call(this,0,e,i)||this}return Dt(e,t),e}(Ow),Vw=function(t){function e(e,i,s){var n=t.call(this,1,e,i)||this;return n.kIds=s,n}return Dt(e,t),w.defineProperty(e.prototype,"kIds",{get:function(){return this.UA},set:function(t){if(!Ft(t.length,32))throw new m("Provided kIds length cannot fit in 32 bits.");if(t.some((function(t){return 16!==t.length})))throw new m("Not all provided key ids are 16 bytes long.");this.UA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var e=0,i=this.kIds;e<i.length;e++){var s=i[e];t.concat(we.from(s))}},e}(Ow);function Ww(t){var e=t.data.nextUint8();t.data.skip(3);var i=t.data.nextUint8Array(16),s=[];if(1===e)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var o=t.data.nextUint32(),h=t.data.nextUint8Array(o);return 1===e?new Vw(i,h,s):new Fw(i,h)}r(),r();var Uw=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"mehd",i,s)||this;return n.fragmentDuration=e,n}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"fragmentDuration",{get:function(){return this.GA},set:function(t){if(!Ft(t,this.bitSize))throw new m("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.GA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},e}(X),Gw=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return Dt(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.fragmentDuration,32)},e}(Uw),Zw=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return Dt(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),e.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},e}(Uw);function Hw(t){var e=t.data,i=tw(e.nextUint32()),s=i.version,n=i.flags;return 0===s?new Gw(e.nextUint32(),n.raw):new Zw(e.nextUint64(),n.raw)}r();var Xw=function(t){function e(e,i,s,n){void 0===i&&(i={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,o,h,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=e,a.defaultSampleDescriptionIndex=null!==(r=null==i?void 0:i.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(o=i.sampleDuration)&&void 0!==o?o:0,a.defaultSampleSize=null!==(h=i.sampleSize)&&void 0!==h?h:0,a.defaultSampleFlags=i.sampleFlags,a}return Dt(e,t),w.defineProperty(e.prototype,"trackId",{get:function(){return this.ZA},set:function(t){if(!Ft(t,32))throw new m("Provided track id does not fit in 32 bits.");this.ZA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.HA},set:function(t){if(!Ft(t,32))throw new m("Provided default sample description index does not fit in 32 bits.");this.HA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleDuration",{get:function(){return this.XA},set:function(t){if(!Ft(t,32))throw new m("Provided default sample duration does not fit in 32 bits.");this.XA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.zA},set:function(t){if(!Ft(t,32))throw new m("Provided default sample size does not fit in 32 bits.");this.zA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleFlags",{get:function(){return this.qA},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!Ft(t.samplePaddingValue,3))throw new m("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Ft(t.sampleDegradationPriority,16))throw new m("Provided sample degradation priority does not fit in 16 bits.");this.qA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},e.prototype.serializeBoxContent=function(e){var i;t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32),e.writer.writeUInt(this.defaultSampleDescriptionIndex,32),e.writer.writeUInt(this.defaultSampleDuration,32),e.writer.writeUInt(this.defaultSampleSize,32),Lw(null!==(i=this.defaultSampleFlags)&&void 0!==i?i:{},e)},e}(X);function zw(t){var e=t.data,i=tw(e.nextUint32()),s=i.version,n=i.flags,r=e.nextUint32(),o=e.nextUint32(),h=e.nextUint32(),a=e.nextUint32(),u=iw(new oo(we.from(e.nextUint8Array(4))));return new Xw(r,{sampleDescriptionIndex:o,sampleDuration:h,sampleSize:a,sampleFlags:u},s,n.raw)}var Fc=function(t){function e(){return t.call(this,"mvex")||this}return Dt(e,t),e}(aa);function qw(t){for(var e=new Fc,i=0,s=li(t.data);i<s.length;i++){var n=s[i];nn(n,"mehd")?e.boxes.push(Hw(n)):nn(n,"trex")?e.boxes.push(zw(n)):e.boxes.push(gi(n))}return e}r();var Yw=function(t){function e(i,s,n,r,o){void 0===o&&(o=0);var h,a,u,c=this;return(c=t.call(this,"mvhd",r,o)||this).creationTime=i.creation,c.modificationTime=i.modification,c.timescale=i.scale,c.duration=i.duration,c.rate=null!==(h=n.rate)&&void 0!==h?h:e.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:e.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:Dw,c.YA=s,c}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"creationTime",{get:function(){return this.LA},set:function(t){if(!Ft(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.LA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"modificationTime",{get:function(){return this.BA},set:function(t){if(!Ft(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.BA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"timescale",{get:function(){return this.OA},set:function(t){if(!Ft(t,32))throw new m("Provided sequence number does not fit in 32 bits.");this.OA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"duration",{get:function(){return this.FA},set:function(t){if(!Ft(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.FA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"rate",{get:function(){return this.KA},set:function(t){if(!Ft(wo(t,16),32))throw new m("Provided rate does not fit in 32 bits (fixed 16.16).");this.KA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"volume",{get:function(){return this.jA},set:function(t){if(!Ft(wo(t,8),16))throw new m("Provided volume does not fit in 16 bits (fixed 8.8).");this.jA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"matrix",{get:function(){return this.QA},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new m("(u, v, w) does not match the required (0, 0, 1)");this.QA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"nextTrackId",{get:function(){return this.YA},set:function(t){if(0===t)throw new m("NextTrackId cannot be 0.");if(!Ft(t,32))throw new m("NextTrackId cannot exceed 32 bits.");this.YA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeMvhdContent(e),e.writer.writeUInt(wo(this.rate,16),32),e.writer.writeUInt(wo(this.volume,8),16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),Nw(this.matrix,e);for(var i=0;i<6;i++)e.writer.writeUInt(0,32);e.writer.writeUInt(this.nextTrackId,32)},e.DEFAULT_RATE=1,e.DEFAULT_VOLUME=1,e}(X),Kw=function(t){function e(e,i,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,e,i,s,0,n)||this}return Dt(e,t),e.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},e}(Yw),jw=function(t){function e(e,i,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,e,i,s,1,n)||this}return Dt(e,t),e.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(Yw);function Qw(t){var e=t.data,i=tw(e.nextUint32()),s=i.version,n=i.flags,r=ew(e,s),o=ct(e.nextUint32(),16),h=ct(e.nextUint16(),8);e.skip(2),e.skip(8);var a=sw(e);e.skip(24);var u=e.nextUint32();return 0===s?new Kw(r,u,{rate:o,volume:h,matrix:a},n.raw):new jw(r,u,{rate:o,volume:h,matrix:a},n.raw)}r(),r();var Jw=function(t){function e(e,i,s,n,r,o,h){void 0===h&&(h={});var a,u,c,l=this;return l=t.call(this,"tkhd",e,function(t){var e,i,s,n;return{trackEnabled:null===(e=null==t?void 0:t.trackEnabled)||void 0===e||e,trackInMovie:null===(i=null==t?void 0:t.trackInMovie)||void 0===i||i,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(h))||this,l.creationTime=i.creation,l.modificationTime=i.modification,l.trackId=s,l.duration=i.duration,l.volume=n,l.width=r,l.height=o,l.layer=null!==(a=h.layer)&&void 0!==a?a:0,l.alternateGroup=null!==(u=h.alternateGroup)&&void 0!==u?u:0,l.matrix=null!==(c=h.matrix)&&void 0!==c?c:Dw,l}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"creationTime",{get:function(){return this.LA},set:function(t){if(!Ft(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.LA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"modificationTime",{get:function(){return this.BA},set:function(t){if(!Ft(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.BA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"trackId",{get:function(){return this.ZA},set:function(t){if(0===t)throw new m("trackId cannot be 0.");if(!Ft(t,32))throw new m("trackId cannot exceed 32 bits.");this.ZA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"duration",{get:function(){return this.FA},set:function(t){if(!Ft(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.FA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"volume",{get:function(){return this.jA},set:function(t){if(!Ft(wo(t,8),16))throw new m("Provided volume does not fit in 16 bits (fixed 8.8).");this.jA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"width",{get:function(){return this.JA},set:function(t){if(!Ft(wo(t,16),32))throw new m("Provided width does not fit in 32 bits (fixed 16.16).");this.JA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"height",{get:function(){return this.$A},set:function(t){if(!Ft(wo(t,16),32))throw new m("Provided height does not fit in 32 bits (fixed 16.16).");this.$A=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"layer",{get:function(){return this.tS},set:function(t){if(!Ft(t,16))throw new m("Provided layer does not fit in 16 bits.");this.tS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"alternateGroup",{get:function(){return this.eS},set:function(t){if(!Ft(t,16))throw new m("Provided alternateGroup does not fit in 16 bits.");this.eS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"matrix",{get:function(){return this.QA},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new m("(u, v, w) does not match the required (0, 0, 1)");this.QA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},e.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeTkhdContent(e),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.layer,16),e.writer.writeUInt(this.alternateGroup,16),e.writer.writeUInt(wo(this.volume,8),16),e.writer.writeUInt(0,16),Nw(this.matrix,e),e.writer.writeUInt(wo(this.width,16),32),e.writer.writeUInt(wo(this.height,16),32)},e}(X),$w=function(t){function e(e,i,s,n,r,o){return t.call(this,0,e,i,s,n,r,o)||this}return Dt(e,t),e.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},e}(Jw),ty=function(t){function e(e,i,s,n,r,o){return t.call(this,1,e,i,s,n,r,o)||this}return Dt(e,t),e.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(Jw);function ey(t){var e,i,s,n,r=t.data,o=tw(r.nextUint32()),h=o.version,a=o.flags,u=a.isSet(8),c=a.isSet(4),l=a.isSet(2),d=a.isSet(1);0===h?(e=r.nextUint32(),i=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(e=r.nextUint64(),i=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),_=r.nextInt16(),v=ct(r.nextInt16(),8);r.skip(2);var g=sw(r),m=ct(r.nextUint32(),16),p=ct(r.nextUint32(),16);return 0===h?new $w({creation:e,modification:i,duration:n},s,v,m,p,{layer:f,matrix:g,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l}):new ty({creation:e,modification:i,duration:n},s,v,m,p,{layer:f,matrix:g,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l})}var iy=function(t){function e(){return t.call(this,"trak")||this}return Dt(e,t),e}(aa);function sy(t){for(var e=new iy,i=0,s=li(t.data);i<s.length;i++){var n=s[i];nn(n,"tkhd")?e.boxes.push(ey(n)):nn(n,"mdia")?e.boxes.push(Ew(n)):nn(n,"edts")?e.boxes.push(vw(n)):e.boxes.push(gi(n))}return e}var ny=function(t){function e(){return t.call(this,"moov")||this}return Dt(e,t),e}(aa);function ry(t){for(var e=new ny,i=0,s=li(t.data);i<s.length;i++){var n=s[i];nn(n,"mvhd")?e.boxes.push(Qw(n)):nn(n,"trak")?e.boxes.push(sy(n)):nn(n,"mvex")?e.boxes.push(qw(n)):nn(n,"pssh")?e.boxes.push(Ww(n)):e.boxes.push(gi(n))}return e}r(),r(),r();var oy=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",i,s)||this;return n.baseMediaDecodeTime=e,n}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"baseMediaDecodeTime",{get:function(){return this.iS},set:function(t){if(!Ft(t,this.bitSize))throw new m("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.iS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},e}(X),hy=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return Dt(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.baseMediaDecodeTime,32)},e}(oy),Dc=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return Dt(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),e.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},e}(oy);function ay(t){var e=t.data,i=tw(e.nextUint32()),s=i.version,n=i.flags;return 0===s?new hy(e.nextUint32(),n.raw):new Dc(e.nextUint64(),n.raw)}r();var uy=function(t){function e(e,i){void 0===i&&(i=0);var s=t.call(this,"tfhd",i,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(e))||this;return s.trackId=e.trackId,s.baseDataOffset=e.baseDataOffset,s.sampleDescriptionIndex=e.sampleDescriptionIndex,s.defaultSampleDuration=e.defaultSampleDuration,s.defaultSampleSize=e.defaultSampleSize,s.defaultSampleFlags=e.defaultSampleFlags,s}return Dt(e,t),w.defineProperty(e.prototype,"trackId",{get:function(){return this.ZA},set:function(t){if(!Ft(t,32))throw new m("Provided track id does not fit in 32 bits.");this.ZA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"baseDataOffset",{get:function(){return this.sS},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new m("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new m("The base data offset present flag is not set.");if(t&&!Ft(t,64))throw new m("Provided baseDataOffset does not fit in 32 bits.");this.sS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"sampleDescriptionIndex",{get:function(){return this.nS},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new m("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new m("The sample description index flag is not set.");if(t&&!Ft(t,32))throw new m("Provided sampleDescriptionIndex does not fit in 32 bits.");this.nS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleDuration",{get:function(){return this.XA},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new m("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new m("The default sample duration present flag is not set.");if(t&&!Ft(t,32))throw new m("Provided defaultSampleDuration does not fit in 32 bits.");this.XA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.zA},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new m("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new m("The default sample size present flag is not set.");if(t&&!Ft(t,32))throw new m("Provided defaultSampleSize does not fit in 32 bits.");this.zA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleFlags",{get:function(){return this.qA},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new m("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new m("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!Ft(t.samplePaddingValue,3))throw new m("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Ft(t.sampleDegradationPriority,16))throw new m("Provided sample degradation priority does not fit in 16 bits.");this.qA=t},enumerable:!1,configurable:!0}),e.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(e+=8),this.flags.sampleDescriptionIndexPresent&&(e+=4),this.flags.defaultSampleDurationPresent&&(e+=4),this.flags.defaultSampleSizePresent&&(e+=4),this.flags.defaultSampleFlagsPresent&&(e+=4),e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(e.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),e.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&e.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&e.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&e.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&Lw(this.defaultSampleFlags,e)},e}(X);function cy(t){var e=t.data,i=e.nextUint8(),s=new oo(we.from(e.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var o=Boolean(s.readBit()),h=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),l=e.nextUint32(),d=c?e.nextUint64():void 0,f=u?e.nextUint32():void 0,_=a?e.nextUint32():void 0,v=h?e.nextUint32():void 0,g=o?iw(new oo(we.from(e.nextUint8Array(4)))):void 0;return new uy({trackId:l,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:d,sampleDescriptionIndex:f,defaultSampleDuration:_,defaultSampleSize:v,defaultSampleFlags:g},i)}r();var ly=function(t){function e(e,i,s){var n=t.call(this,"trun",e,function(t){var e,i,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(e=t.sampleDurationPresent)&&void 0!==e&&e,sampleSizePresent:null!==(i=t.sampleSizePresent)&&void 0!==i&&i,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(i))||this;return n.dataOffset=i.dataOffset,n.samples=s,n.firstSampleFlags=i.firstSampleFlags,n}return Dt(e,t),w.defineProperty(e.prototype,"dataOffset",{get:function(){return this.rS},set:function(t){if(t&&!Ft(t,32))throw new m("Provided data offset does not fit in 32 bits.");this.rS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"firstSampleFlags",{get:function(){return this.oS},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!Ft(t.samplePaddingValue,3))throw new m("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Ft(t.sampleDegradationPriority,16))throw new m("Provided sample degradation priority does not fit in 16 bits.");this.oS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"samples",{get:function(){return this.hS},set:function(t){var e,i;if(!Ft(t.length,32))throw new m("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new m("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new m("The sample duration present flag is not set.");if(r.duration&&!Ft(r.duration,32))throw new m("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new m("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new m("The sample size present flag is not set.");if(r.size&&!Ft(r.size,32))throw new m("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new m("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new m("The sample flags present flag is not set.");if((null===(e=r.flags)||void 0===e?void 0:e.samplePaddingValue)&&!Ft(r.flags.samplePaddingValue,3))throw new m("Provided sample padding value does not fit in 3 bits.");if((null===(i=r.flags)||void 0===i?void 0:i.sampleDegradationPriority)&&!Ft(r.flags.sampleDegradationPriority,16))throw new m("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new m("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new m("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!Ft(r.compositionTimeOffset,32))throw new m("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.hS=t},enumerable:!1,configurable:!0}),e.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(e+=4),this.flags.firstSampleFlagsPresent&&(e+=4),this.flags.sampleDurationPresent&&(e+=4*this.samples.length),this.flags.sampleSizePresent&&(e+=4*this.samples.length),this.flags.sampleFlagsPresent&&(e+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(e+=4*this.samples.length),e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&e.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&Lw(this.firstSampleFlags,e);for(var i=0,s=this.samples;i<s.length;i++){var n=s[i];this.flags.sampleDurationPresent&&e.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&e.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&Lw(n.flags,e),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?e.writer.writeUInt(n.compositionTimeOffset,32):e.writer.writeInt(n.compositionTimeOffset,32))}},e}(X);function dy(t){var e=t.data,i=e.nextUint8(),s=new oo(we.from(e.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),o=Boolean(s.readBit()),h=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=e.nextUint32(),l={sampleDurationPresent:h,sampleSizePresent:o,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(l.dataOffset=e.nextInt32()),a&&(l.firstSampleFlags=iw(new oo(we.from(e.nextUint8Array(4)))));for(var d=[],f=0;f<c;f++){var _={};h&&(_.duration=e.nextUint32()),o&&(_.size=e.nextUint32()),r&&(_.flags=iw(new oo(we.from(e.nextUint8Array(4))))),n&&(_.compositionTimeOffset=0===i?e.nextUint32():e.nextInt32()),d.push(_)}return new ly(i,l,d)}var Eh=function(t){function e(){return t.call(this,"traf")||this}return Dt(e,t),e}(aa);function fy(t){for(var e=new Eh,i=0,s=li(t.data);i<s.length;i++){var n=s[i];nn(n,"tfhd")?e.boxes.push(cy(n)):nn(n,"tfdt")?e.boxes.push(ay(n)):nn(n,"trun")?e.boxes.push(dy(n)):e.boxes.push(gi(n))}return e}var _y=function(t){function e(){return t.call(this,"moof")||this}return Dt(e,t),e}(aa);function vy(t){for(var e=new _y,i=0,s=li(t.data);i<s.length;i++){var n=s[i];nn(n,"traf")?e.boxes.push(fy(n)):nn(n,"pssh")?e.boxes.push(Ww(n)):e.boxes.push(gi(n))}return e}r();!function(t){function e(e){var i=t.call(this,"mfhd",0,0)||this;return i.sequenceNumber=e,i}Dt(e,t),w.defineProperty(e.prototype,"sequenceNumber",{get:function(){return this.aS},set:function(t){if(!Ft(t,32))throw new m("Provided sequence number does not fit in 32 bits.");this.aS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.sequenceNumber,32)}}(X);r();var gy=function(t){function e(e){var i=t.call(this,"frma")||this;return i.codingName=e,i}return Dt(e,t),w.defineProperty(e.prototype,"codingName",{get:function(){return this.uS},set:function(t){if(4!==t.length)throw new m("Provided coding name was not 4 characters long.");this.uS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},e}(bh);r();!function(t){function e(e,i){var s=t.call(this,"pasp")||this;return s.hSpacing=e,s.vSpacing=i,s}Dt(e,t),w.defineProperty(e.prototype,"hSpacing",{get:function(){return this.cS},set:function(t){if(!Ft(t,32))throw new m("Provided hSpacing does not fit in 32 bits.");this.cS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"vSpacing",{get:function(){return this.lS},set:function(t){if(!Ft(t,32))throw new m("Provided vSpacing does not fit in 32 bits.");this.lS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 8},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(bh);r();!function(t){function e(e,i,s){var n=t.call(this,e)||this;return n.sample=i,n.sinf=s,n}Dt(e,t),e.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},e.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(aa);r();!function(t){function e(e,i,s){var n=t.call(this,"sinf")||this;return n.schm=i,n.schi=s,n.frma=new gy(e),n}Dt(e,t),e.prototype.getBoxContentSize=function(){var t,e,i,s;return this.frma.getSize()+(null!==(e=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==e?e:0)+(null!==(s=null===(i=this.schi)||void 0===i?void 0:i.getSize())&&void 0!==s?s:0)},e.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(bh);r();var my=function(t){function e(e,i,s){var n=t.call(this,"saio",e,void 0===s?0:1)||this;return n.entries=i,n.explicitAuxInfoType=s,n}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"entries",{get:function(){return this.AA},set:function(t){var e=this;if(!Ft(t.length,32))throw new m("Number of entries provided does not fit in 32 bits.");if(t.some((function(t){return!Ft(t,e.bitSize)})))throw new m("Not all provided entries fit in ".concat(this.bitSize," bits."));this.AA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"explicitAuxInfoType",{get:function(){return this.dS},set:function(t){if(void 0===t)this.flags=0;else{if(!Ft(t.auxInfoType,32))throw new m("Provided auxInfoType does not fit in 32 bits.");if(!Ft(t.auxInfoTypeParameter,32))throw new m("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.dS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),void 0!==this.explicitAuxInfoType&&(e.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),e.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),e.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(e)},e}(X);(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Dt(e,t),e.prototype.serializeSaioContent=function(t){for(var e=0,i=this.entries;e<i.length;e++){var s=i[e];t.writer.writeUInt(s,32)}}})(my),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Dt(e,t),e.prototype.serializeSaioContent=function(t){for(var e=0,i=this.entries;e<i.length;e++){var s=i[e];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}(my);r();!function(t){function e(e,i,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=e,n.sampleInfoSizes=i,n.explicitAuxInfoType=s,n}Dt(e,t),w.defineProperty(e.prototype,"defaultSampleInfoSize",{get:function(){return this.fS},set:function(t){if(!Ft(t,8))throw new m("Provided defaultSampleInfoSize does not fit in a single byte.");this.fS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"sampleInfoSizes",{get:function(){return this._S},set:function(t){if(!Ft(t.length,32))throw new m("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some((function(t){return!Ft(t,8)})))throw new m("Not all provided sampleInfoSizes fit in a byte.");this._S=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"explicitAuxInfoType",{get:function(){return this.dS},set:function(t){if(void 0===t)this.flags=0;else{if(!Ft(t.auxInfoType,32))throw new m("Provided auxInfoType does not fit in 32 bits.");if(!Ft(t.auxInfoTypeParameter,32))throw new m("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.dS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},e.prototype.serializeBoxContent=function(e){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new m("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,e),void 0!==this.explicitAuxInfoType&&(e.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),e.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),e.writer.writeByte(this.defaultSampleInfoSize),e.writer.writeUInt(this.sampleInfoSizes.length,32);for(var i=0,s=this.sampleInfoSizes;i<s.length;i++){var n=s[i];e.writer.writeByte(n)}}}(X);r();!function(t){function e(e){var i=t.call(this,"sdtp",0,0)||this;return i.samples=e,i}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e);for(var i=0,s=this.samples;i<s.length;i++){Mw(s[i],e)}}}(X);r();!function(t){function e(e){return t.call(this,"stsd",e,0)||this}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.boxes.length,32)}}(Cc);r();var py=function(t){function e(e,i,s){var n=t.call(this,"sgpd",e,0)||this;return n.entries=s,n.groupingType=i,n}return Dt(e,t),w.defineProperty(e.prototype,"groupingType",{get:function(){return this.vS},set:function(t){if(4!==t.length)throw new m("The provided groupingType does not equal 4 characters.");this.vS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.groupingType),this.serializeVersionBoxContent(e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];this.serializeEntryBoxContent(e,n)}},e.prototype.serializeEntryBoxContent=function(t,e){e.serializeBoxContent(t)},e}(X);(function(t){function e(e,i){return t.call(this,0,e,i)||this}Dt(e,t),e.prototype.serializeVersionBoxContent=function(t){}})(py),function(t){function e(e,i,s){var n=t.call(this,1,e,s)||this;return n.defaultLength=i,n}Dt(e,t),w.defineProperty(e.prototype,"defaultLength",{get:function(){return this.gS},set:function(t){if(!Ft(t,32))throw new m("The provided defaultLength does not fit in 32 bits.");this.gS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},e.prototype.serializeEntryBoxContent=function(t,e){0===this.defaultLength&&t.writer.writeUInt(e.getBoxContentSize(),32),e.serializeBoxContent(t)}}(py),function(t){function e(e,i,s,n){void 0===n&&(n=0);var r=this;if(e<2)throw new m("This constructor is only meant for versions 2 and up.");return(r=t.call(this,e,i,s)||this).defaultSampleDescriptionIndex=n,r}Dt(e,t),w.defineProperty(e.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.HA},set:function(t){if(!Ft(t,32))throw new m("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.HA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(py);r();(function(t){function e(e){void 0===e&&(e=[]);var i=t.call(this,"stsz",0,0)||this;return i.sampleSizes=e,i}Dt(e,t),w.defineProperty(e.prototype,"sampleSizes",{get:function(){return this.mS},set:function(t){if(!Ft(t.length,32))throw new m("Number of allowed samples cannot fit in 32 bits.");if(t.some((function(t){return!Ft(t,32)})))throw new m("Not all sampleSizes can be represented in 32 bits.");this.mS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeUInt(this.sampleSizes.length,32);for(var i=0,s=this.sampleSizes;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}})(X),function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=e,s.samples=i,s}Dt(e,t),w.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.zA},set:function(t){if(!Ft(t,32))throw new m("Provided defaultSampleSize does not fit in 32 bits.");this.zA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"samples",{get:function(){return this.hS},set:function(t){if(!Ft(t,32))throw new m("Number of allowed samples cannot fit in 32 bits.");this.hS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.defaultSampleSize,32),e.writer.writeUInt(this.samples,32)}}(X);r();!function(t){function e(){return t.call(this,"stbl")||this}Dt(e,t)}(aa);r();!function(t){function e(e){var i=t.call(this,"stsc",0,0)||this;return i.entries=e,i}Dt(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.AA},set:function(t){if(!Ft(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ft(t.firstChunk,32)||!Ft(t.sampleDescriptionIndex,32)||!Ft(t.samplesPerChunk,32)})))throw new m("Not all entries can be represented in 96 bits.");this.AA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.firstChunk,32),e.writer.writeUInt(n.samplesPerChunk,32),e.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(X);r();!function(t){function e(){return t.call(this,"schi")||this}Dt(e,t)}(aa);r();!function(t){function e(e,i,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=e,n.schemeVersion=i,n.schemeUri=s,n}Dt(e,t),w.defineProperty(e.prototype,"schemeType",{get:function(){return this.pS},set:function(t){if(4!==t.length)throw new m("The provided schemeType does not have a length of 4.");this.pS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"schemeVersion",{get:function(){return this.wS},set:function(t){if(!Ft(t,32))throw new m("The provided schemeVersion does not fit in 23 bits.");this.wS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"schemeUri",{get:function(){return this.yS},set:function(t){if(t&&4!==t.length)throw new m("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this.yS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.schemeType),e.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(e.writer.writeString(this.schemeUri),e.writer.writeByte(0))}}(X);r();var wy=function(t){function e(e,i,s,n,r,o,h){void 0===h&&(h=0);var a=t.call(this,"sidx",e,h)||this;return a.referenceId=i,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=o,a}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"referenceId",{get:function(){return this.bS},set:function(t){if(!Ft(t,32))throw new m("Provided referenceId does not fit in 32 bits.");this.bS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"timescale",{get:function(){return this.OA},set:function(t){if(!Ft(t,32))throw new m("Provided timescale does not fit in 32 bits.");this.OA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"earliestPresentationTime",{get:function(){return this.SS},set:function(t){if(!Ft(t,this.bitSize))throw new m("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.SS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"firstOffset",{get:function(){return this.TS},set:function(t){if(!Ft(t,this.bitSize))throw new m("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.TS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"references",{get:function(){return this.kS},set:function(t){if(!Ft(t.length,16))throw new m("The number of provided reference items does not fit in 16 bits.");for(var e=0,i=t;e<i.length;e++){var s=i[e];if(!Ft(s.referencedSize,31))throw new m("Provided referenced size does not fit in 31 bits.");if(!Ft(s.subsegmentDuration,32))throw new m("Provided subsegment duration does not fit in 31 bits.");if(!Ft(s.sapType,3))throw new m("Provided SAP type does not fit in 3 bits.");if(!Ft(s.sapDeltaTime,28))throw new m("Provided SAP delta time does not fit in 28 bits.")}this.kS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.referenceId,32),e.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(e),e.writer.writeUInt(0,16),e.writer.writeUInt(this.references.length,16);for(var i=0,s=this.references;i<s.length;i++){var n=s[i];e.writer.writeBit(n.referenceType),e.writer.writeUInt(n.referencedSize,31),e.writer.writeUInt(n.subsegmentDuration,32),e.writer.writeBool(n.startsWithSap),e.writer.writeUInt(n.sapType,3),e.writer.writeUInt(n.sapDeltaTime,28)}},e}(X),yy=function(t){function e(e,i,s,n,r,o){return void 0===o&&(o=0),t.call(this,0,e,i,s,n,r,o)||this}return Dt(e,t),e.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},e}(wy),by=function(t){function e(e,i,s,n,r,o){return void 0===o&&(o=0),t.call(this,1,e,i,s,n,r,o)||this}return Dt(e,t),e.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},e}(wy);r();var Ay=function(t){function e(e,i,s){return t.call(this,"styp",e,i,s)||this}return Dt(e,t),e}(gw);function Sy(t){for(var e=t.data,i=e.nextChars(4),s=e.nextUint32(),n=[];e.cursor.offset<e.data.byteLength;)n.push(e.nextChars(4));return new Ay(i,s,n)}r();!function(t){function e(e){void 0===e&&(e=0);var i=t.call(this,"smhd",0,0)||this;return i.balance=e,i}Dt(e,t),w.defineProperty(e.prototype,"balance",{get:function(){return this.ES},set:function(t){if(t<-1||t>1)throw new m("Provided balance does not fit in the allowed range [-1, 1].");if(!Ft(wo(t,8),16))throw new m("Provided balance does not fit in 16 bits (fixed 8.8).");this.ES=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(wo(this.balance,8),16),e.writer.writeUInt(0,16)}}(X);r();!function(t){function e(e){var i=t.call(this,"stss",0,0)||this;return i.entries=e,i}Dt(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.AA},set:function(t){if(!Ft(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ft(t,32)})))throw new m("Not all entries can be represented in 32 bits.");this.AA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}}(X);r();!function(t){function e(e){var i=t.call(this,"stts",0,0)||this;return i.entries=e,i}Dt(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.AA},set:function(t){if(!Ft(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ft(t.sampleCount,32)||!Ft(t.sampleDelta,32)})))throw new m("Not all entries can be represented in 64 bits.");this.AA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.sampleCount,32),e.writer.writeUInt(n.sampleDelta,32)}}}(X);r();!function(t){function e(e){var i=t.call(this,"trep",0,0)||this;return i.trackId=e,i}Dt(e,t),w.defineProperty(e.prototype,"trackId",{get:function(){return this.ZA},set:function(t){if(!Ft(t,32))throw new m("The provided trackId does not fit in 32 bits.");this.ZA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32)}}(Cc);r();!function(t){function e(){return t.call(this,"udta")||this}Dt(e,t)}(aa);r();var Ty={red:0,green:0,blue:0};!function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=Ty);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=e,s.opColor=i,s}Dt(e,t),w.defineProperty(e.prototype,"opColor",{get:function(){return this.xS},set:function(t){if(!Ft(t.red,16)||!Ft(t.green,16)||!Ft(t.blue,16))throw new m("Not all colors could be represented in 16 bits.");this.xS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.graphicsMode,16),e.writer.writeUInt(this.opColor.red,16),e.writer.writeUInt(this.opColor.green,16),e.writer.writeUInt(this.opColor.blue,16)}}(X);r();var ky=function(t){function e(e,i,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var o,h,a,u,c,l=this;return(l=t.call(this,e,i)||this).width=s.width,l.height=s.height,l.horizontalResolution=null!==(o=s.horizontal)&&void 0!==o?o:72,l.verticalResolution=null!==(h=s.vertical)&&void 0!==h?h:72,l.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",l.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,l.depth=null!==(c=n.depth)&&void 0!==c?c:24,l.clap=n.clap,l.pasp=n.pasp,l.extra=r,l}return Dt(e,t),w.defineProperty(e.prototype,"width",{get:function(){return this.JA},set:function(t){if(!Ft(t,16))throw new m("Provided width does not fit in 16 bits.");this.JA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"height",{get:function(){return this.$A},set:function(t){if(!Ft(t,16))throw new m("Provided height does not fit in 16 bits.");this.$A=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"horizontalResolution",{get:function(){return this.IS},set:function(t){if(!Ft(wo(t,16),32))throw new m("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.IS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"verticalResolution",{get:function(){return this.RS},set:function(t){if(!Ft(wo(t,16),32))throw new m("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.RS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"compressorName",{get:function(){return this.CS},set:function(t){if(t.length>31)throw new m("The provided compressorName should at most be 31 characters long.");this.CS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"frameCount",{get:function(){return this.PS},set:function(t){if(!Ft(t,16))throw new m("Provided frameCount does not fit in 16 bits.");this.PS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"depth",{get:function(){return this.DS},set:function(t){if(!Ft(t,16))throw new m("Provided depth does not fit in 16 bits.");this.DS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e,i,s,n,r,o;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(i=null===(e=this.clap)||void 0===e?void 0:e.getSize())&&void 0!==i?i:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(o=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==o?o:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.width,16),e.writer.writeUInt(this.height,16),e.writer.writeUInt(wo(this.horizontalResolution,16),32),e.writer.writeUInt(wo(this.verticalResolution,16),32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.frameCount,16),e.writer.writeByte(this.compressorName.length),e.writer.writeString(this.compressorName);for(var i=0;i<31-this.compressorName.length;i++)e.writer.writeByte(0);e.writer.writeUInt(this.depth,16),e.writer.writeInt(-1,16),this.clap&&e.concat(this.clap.serialize()),this.pasp&&e.concat(this.pasp.serialize()),this.extra&&Np(e.writer,this.extra)},e}(aw);r(),r();!function(t){function e(e){var i=t.call(this,"esds",0,0)||this;return i.esDescriptor=e,i}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof j?this.esDescriptor.length:this.esDescriptor.getSize())},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor instanceof j?e.concat(we.from(this.esDescriptor)):this.esDescriptor.serialize(e)}}(X);r();!function(t){function e(e,i,s){var n=t.call(this,"mp4a",e,s)||this;return n.esd=i,n}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.esd.serialize())}}(uw);r();!function(t){function e(e,i,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",e,i,n)||this;return r.esDescriptor=s,r}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor.serialize(e)}}(ky);r();!function(t){function e(e,i){var s=t.call(this,"mp4s",e)||this;return s.esDescriptor=i,s}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor.serialize(e)}}(aw);r(),r();!function(t){function e(e){var i=t.call(this,"avcC")||this;return i.decoderConfig=e,i}Dt(e,t),e.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},e.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(bh);r();!function(){function t(t,e,i,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=i,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=e,this.spsSets=s,this.ppsSets=n}w.defineProperty(t.prototype,"version",{get:function(){return this.NS},set:function(t){if(!Ft(t,8))throw new m("Provided version does not fit in 8 bits.");this.NS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileIndication",{get:function(){return this.MS},set:function(t){if(!Ft(t,8))throw new m("Provided profileIndication does not fit in 8 bits.");this.MS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.LS},set:function(t){if(!Ft(t,8))throw new m("Provided profileCompatibility does not fit in 8 bits.");this.LS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"levelIndication",{get:function(){return this.FS},set:function(t){if(!Ft(t,8))throw new m("Provided levelIndication does not fit in 8 bits.");this.FS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"spsSets",{get:function(){return this.VS},set:function(t){if(!Ft(t.length,5))throw new m("Provided number of spsSets exceeds the max (32)");this.VS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"ppsSets",{get:function(){return this.WS},set:function(t){if(!Ft(t.length,8))throw new m("Provided number of ppsSets exceeds the max (256)");this.WS=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce((function(t,e){return t+e.length}),0)+2*this.ppsSets.length+this.ppsSets.reduce((function(t,e){return t+e.length}),0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var e=0,i=this.spsSets;e<i.length;e++){var s=i[e];t.writer.writeUInt(s.length,16),t.concat(we.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var o=r[n];t.writer.writeUInt(o.length,16),t.concat(we.from(o))}}}();r();!function(t){function e(e,i,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var o=t.call(this,"avc1",e,i,n)||this;return o.configurationBox=s,o.bitrateBox=r,o}Dt(e,t),e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(i=null===(e=this.bitrateBox)||void 0===e?void 0:e.getSize())&&void 0!==i?i:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.configurationBox.serialize()),this.bitrateBox&&e.concat(this.bitrateBox.serialize())}}(ky);r();!function(t){function e(e,i,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=e,n.max=i,n.avg=s,n}Dt(e,t),w.defineProperty(e.prototype,"bufferSizeDb",{get:function(){return this.lA},set:function(t){if(!Ft(t,32))throw new m("Provided bufferSizeDb does not fit in 32 bits.");this.lA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"max",{get:function(){return this.M_},set:function(t){if(!Ft(t,32))throw new m("Provided max does not fit in 32 bits.");this.M_=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"avg",{get:function(){return this.US},set:function(t){if(!Ft(t,32))throw new m("Provided avg does not fit in 32 bits.");this.US=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 12},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(bh);r(),r(),r();var Ey=function(t){function e(e,i){var s,n,r,o,h=this;if(h=t.call(this,"tenc",e,0)||this,i.perSampleIvSize>0&&(null!==(n=null===(s=i.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new m("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return h.kId=i.kId,h.isProtected=null!==(r=i.isProtected)&&void 0!==r?r:1,i.perSampleIvSize>0?h.perSampleIvSize=i.perSampleIvSize:h.constantIv=null!==(o=i.constantIv)&&void 0!==o?o:new j(0),h}return Dt(e,t),w.defineProperty(e.prototype,"isProtected",{get:function(){return this.GS},set:function(t){if(!Ft(t,8))throw new m("Provided isProtected does not fit in 1 byte.");this.GS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"perSampleIvSize",{get:function(){return this.ZS},set:function(t){if(![8,16].includes(t))throw new m("Provided perSampleIvSize does not match any allowed value [8, 16].");this.ZS=t,this.HS=new j(0)},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"kId",{get:function(){return this.XS},set:function(t){if(16!==t.length)throw new m("Provided kId length is not 16.");this.XS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"constantIv",{get:function(){return this.HS},set:function(t){if(![8,16].includes(t.length))throw new m("Provided constant IV length does not match any allowed value [8, 16].");this.HS=t,this.ZS=0},enumerable:!1,configurable:!0}),e.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeOwnContent(e)},e.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),Np(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),Np(t.writer,this.constantIv))},e}(X),xy=(function(t){function e(e){return t.call(this,0,e)||this}Dt(e,t)}(Ey),function(t){function e(e){var i=t.call(this,1,e)||this;return i.cryptByteBlocks=e.cryptByteBlock,i.skipByteBlocks=e.skipByteBlock,i}return Dt(e,t),w.defineProperty(e.prototype,"cryptByteBlocks",{get:function(){return this.zS},set:function(t){if(!Ft(t,4))throw new m("Provided cryptByteBlocks does not fit in 4 bits.");this.zS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"skipByteBlocks",{get:function(){return this.qS},set:function(t){if(!Ft(t,4))throw new m("Provided skipByteBlocks does not fit in 4 bits.");this.qS=t},enumerable:!1,configurable:!0}),e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},e}(Ey));!function(t){function e(e){var i=t.call(this)||this;return i.tencBox=new xy(e),i}Dt(e,t),e.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},e.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(Bw);function Iy(t){return void 0!==t.iv}function Ry(t){return void 0!==t.subsamples}r();!function(t){function e(e){var i=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return i.samples=e,i}Dt(e,t),w.defineProperty(e.prototype,"samples",{get:function(){return this.hS},set:function(t){var e;if(!Ft(t.length,32))throw new m("The number of samples provided does not fit in 32 bits.");for(var i=0,s=t;i<s.length;i++){var n=s[i];if(Iy(n)&&![8,16].includes(n.iv.length))throw new m("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===e&&(e=Ry(n)),!0===e&&!Ry(n)||!1===e&&Ry(n))throw new m("Mix of samples with and without subsamples detected.");if(Ry(n)){if(!Ft(n.subsamples.length,16))throw new m("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,o=n.subsamples;r<o.length;r++){var h=o[r];if(!Ft(h.clearData,16))throw new m("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!Ft(h.protectedData,23))throw new m("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=e&&e,this.hS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){for(var e=0,i=0,s=this.samples;i<s.length;i++){var n=s[i];Iy(n)&&(e+=n.iv.length),Ry(n)&&(e+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.samples.length,32);for(var i=0,s=this.samples;i<s.length;i++){var n=s[i];if(Iy(n)&&Np(e.writer,n.iv),Ry(n)){e.writer.writeUInt(n.subsamples.length,16);for(var r=0,o=n.subsamples;r<o.length;r++){var h=o[r];e.writer.writeUInt(h.clearData,16),e.writer.writeUInt(h.protectedData,32)}}}},e.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}}(X);r(),r();!function(t){function e(e,i,s,n,r){var o=t.call(this,"emsg",0,0)||this;return o.schemeIdUri=e,o.value=i,o.data=r,o.id=s,o.timescale=n.timescale,o.presentationTimeDelta=n.presentationTimeDelta,o.eventDuration=n.eventDuration,o}Dt(e,t),w.defineProperty(e.prototype,"timescale",{get:function(){return this.OA},set:function(t){if(!Ft(t,32))throw new m("The provided timescale does not fit in 32 bits.");this.OA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"presentationTimeDelta",{get:function(){return this.YS},set:function(t){if(!Ft(t,32))throw new m("The provided presentationTimeDelta does not fit in 32 bits.");this.YS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"eventDuration",{get:function(){return this.KS},set:function(t){if(!Ft(t,32))throw new m("The provided eventDuration does not fit in 32 bits.");this.KS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"id",{get:function(){return this.jS},set:function(t){if(!Ft(t,32))throw new m("The provided id does not fit in 32 bits.");this.jS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.schemeIdUri),e.writer.writeByte(0),e.writer.writeString(this.value),e.writer.writeByte(0),e.writer.writeUInt(this.timescale,32),e.writer.writeUInt(this.presentationTimeDelta,32),e.writer.writeUInt(this.eventDuration,32),e.writer.writeUInt(this.id,32),e.concat(we.from(this.data))}}(X);r(),r(),r();var Cy=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new Dp,e=0,i=this.boxes;e<i.length;e++){var s=i[e];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function Py(t,e){return function(i){var s=function(t,e){for(var i=t.data,s=t.cursor;s.offset<i.byteLength;){var n=$p(i,s);if(!n.complete)return;if(nn(n.box,e))return n.box}}(new Qp(Yp(i),new jp),t);if(!s)throw new m("".concat(t," box not found"));return e(s)}}var Dy=Py("moov",ry),Ny=Py("sidx",(function(t){var e,i,s=t.data,n=tw(s.nextUint32()),r=n.version,o=n.flags,h=s.nextUint32(),a=s.nextUint32();0===r?(e=s.nextUint32(),i=s.nextUint32()):(e=s.nextUint64(),i=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],l=0;l<u;l++){var d=new oo(we.from(s.nextUint8Array(12))),f=d.readBit(),_=d.readUInt(31),v=d.readUInt(32),g=Boolean(d.readBit()),m=d.readUInt(3),p=d.readUInt(28);c.push({referenceType:f,referencedSize:_,subsegmentDuration:v,startsWithSap:g,sapType:m,sapDeltaTime:p})}return 0===r?new yy(h,a,e,i,c,o.raw):new by(h,a,e,i,c,o.raw)})),My=Py("moof",vy),Ly=Py("pssh",Ww);function By(t){return function(t){for(var e=new Cy,i=0,s=li(t);i<s.length;i++){var n=s[i];nn(n,"ftyp")?e.boxes.push(pw(n)):nn(n,"styp")?e.boxes.push(Sy(n)):nn(n,"moov")?e.boxes.push(ry(n)):nn(n,"moof")?e.boxes.push(vy(n)):nn(n,"mdat")?e.boxes.push(Iw(n)):e.boxes.push(gi(n))}return e}(new Qp(Yp(t),new jp))}var Oy=class extends So{get QS(){return this.Vd}get JS(){return this.$S.expiration}get Ab(){return this.tT}get eT(){return this.$S.sessionId}Ws(){if(this.iT)return this.Vd;const t=[];return t.push(Promise.resolve(this.$S.close())),t.push(Ze(1e3)),this.sT.rp(Promise.race(t).catch(Fy)),this.iT=!0,this.Vd}nT(t,e,i){if(Ya.hg){const t=Ly(Uh(e));if(1===t.version){e=new Fw(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.$S.generateRequest(t,e)).catch(Fy)}$n(t){return Promise.resolve(this.$S.load(t)).catch(Fy)}rT(){return Promise.resolve(this.$S.remove()).catch(Fy)}ir(t){return Promise.resolve(this.$S.update(t)).catch(Fy)}oT(){this.tT.Gb(),this.$S.keyStatuses.forEach(((t,e)=>{this.hT(e,t)})),this._o(new Sn(this.tT))}hT(t,e){if("string"==typeof t){const i=t;t=e,e=i}const i=Uh(t);if(this.aT===Ja&&16===i.byteLength&&(Ya.Sg||Ya.ym)){const t=sa(i),e=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,e,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.aT===Ja&&"status-pending"===e&&(e="usable"),this.tT.Wb(i,e)}constructor(t,e){super(),this.$S=t,this.aT=e,this.iT=!1,this.uT=()=>{this.oT()},this.cT=t=>{this._o(new ch(this,t.messageType,Sp(this.aT,t.message)))},this.lT=()=>{this.iT=!0,this.tT.Ob>0&&(this.tT.Gb(),this._o(new Sn(this.tT))),this.$S.removeEventListener("keystatuseschange",this.uT),this.$S.removeEventListener("message",this.cT)},this.$S.addEventListener("keystatuseschange",this.uT),this.$S.addEventListener("message",this.cT),this.tT=new bp;const i=[];this.$S.closed&&i.push(Promise.resolve(this.$S.closed)),this.sT=new is,i.push(this.sT.Xb),this.Vd=Promise.race(i).then(this.lT,this.lT),this.oT()}};function Fy(t){let e;if(t.message){const i=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);i&&(e=0|x(i[1],16))}throw new $n(t.message,void 0,e,t)}var Vy=class{async dT(t){return new Oy(this.fT.createSession(t),this._T)}vT(t){return Promise.resolve(this.fT.setServerCertificate(t))}kn(t){return Promise.resolve(t.setMediaKeys(this.fT))}gT(t){return Promise.resolve(t.setMediaKeys(null))}nr(){return Promise.resolve()}constructor(t,e,i){this.fT=t,this._T=e,this.kd=i}},Wy=class{get _T(){return this.mT.keySystem}async pT(){const t=await this.mT.createMediaKeys();return new Vy(t,this.aT,this.wT)}yT(){return this.wT}constructor(t,e,i){this.mT=t,this.aT=e,this.wT=i}};r(),r();var ba={VIDEO_H264:"video/avc",VIDEO_H265:"video/hevc",VIDEO_MP4:"video/mp4",VIDEO_MPEG:"video/mpeg",VIDEO_MPEG2:"video/mpeg2",VIDEO_WEBM:"video/webm",VIDEO_UNKNOWN:"video/x-unknown",AUDIO_AAC:"audio/mp4a-latm",AUDIO_MP4:"audio/mp4",AUDIO_WEBM:"audio/webm",AUDIO_UNKOWN:"audio/x-unknown",IMAGE_JPEG:"image/jpeg",APPLICATION_TTML_XML:"application/ttml+xml",APPLICATION_MP4:"application/mp4",TEXT_VTT:"text/vtt"};function Xh(t){return Xa(t,ba.APPLICATION_MP4)||Xa(t,ba.VIDEO_MP4)||Xa(t,ba.AUDIO_MP4)}function Uy(t){return Xa(t,ba.VIDEO_WEBM)||Xa(t,ba.AUDIO_WEBM)}var Gy=class{bT(t){for(const[e,i]of this.AT)if(e.toLowerCase()===t.toLowerCase())return i}constructor(t,e){this.zw=t,this.AT=e}};function al(t){const e=t.trim(),i=e.indexOf(";");if(i<0)return new Gy(e,[]);const s=e.substr(0,i).trim(),n=e.substr(i+1).trim(),r=[];let o=0,h=!1;for(let t=0;t<n.length;t++){const e=n[t];if(h||";"!==e)'"'===e&&(h=!h);else{const e=Zy(n.substr(o,t));e&&r.push(e),o=t+1}}if(o!==n.length){const t=Zy(n.substr(o));t&&r.push(t)}return new Gy(s,r)}function Zy(t){const e=t.indexOf("=");if(e<0)return;const i=t.substr(0,e).trim();let s=t.substr(e+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[i,s]}function Hy(t){const e=t.trim(),i=e.indexOf(";");return i<0?e:e.substr(0,i).trim()}function Xy(t){let e=t;const i=e.match(/^avc1\.(\d+)\.(\d+)$/);if(i){const t=Number(i[1]),s=Number(i[2]);e="avc1."+Sa((t<<16|s).toString(16),6,"0")}return e}function zy(t,e,i,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,ST:s.ST};let o=!1;if(s.audioCapabilities){const h=s.audioCapabilities.filter((t=>Boolean(t.contentType)));h.length&&(r.audioCapabilities=h.filter((s=>qy(t,e,i,s))),o=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const h=s.videoCapabilities.filter((t=>Boolean(t.contentType)));h.length&&(r.videoCapabilities=h.filter((s=>qy(t,e,i,s))),o=!0,r.videoCapabilities.length&&(n=!0))}return o||(n=t(i,"video/mp4")),n?r:void 0}function qy(t,e,i,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!fh(e,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(i,Hy(s.contentType))}function Yy(t){if(t.videoCapabilities)for(const e of t.videoCapabilities)if(e.contentType)return e.contentType;if(t.audioCapabilities)for(const e of t.audioCapabilities)if(e.contentType)return e.contentType}function Ky(t){const e=[];for(const i of t)i.encryptionScheme&&e.push({contentType:i.contentType,robustness:i.robustness});return t.concat(e)}function jy(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(Qy))||!(!t.videoCapabilities||!t.videoCapabilities.some(Qy))}function Qy(t){return!t.robustness}function Jy(t,e){const i=[];for(const s of t)s.robustness?i.push(s):i.push(ne({},s,{robustness:e}));return i}var $y=class{async $w(t,e){e=e.filter((t=>!t.ST));for(const t of e)t.audioCapabilities&&(t.audioCapabilities=Ky(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=Ky(t.videoCapabilities));if(t===Wg&&e.some(jy)){const i=e.map((t=>function(t,e){return ne({},t,{videoCapabilities:t.videoCapabilities?Jy(t.videoCapabilities,e):void 0,audioCapabilities:t.audioCapabilities?Jy(t.audioCapabilities,e):void 0})}(t,"SW_SECURE_CRYPTO")));try{const e=await Bl.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new Wy(e,t,s)}catch(t){}}const i=await Bl.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new Wy(i,t,s)}static TT(){return _o()}};r(),r(),r(),r();var tb=class extends So{get eT(){return this.kT&&this.kT.sessionId||""}get JS(){return NaN}get QS(){return this.ET.Xb}get Ab(){return this.xT}async nT(t,e,i){this.IT(),this.CT=new is,this.dT(Uh(e),i),await this.CT.Xb}dT(t,e){if(!t)throw new g("Expected initData to be defined but was "+t+".");const i=e&&e.playready&&e.playready.PT;let s;return s=e?this.DT.createSession(this.NT,t,i):this.DT.createSession(this.NT,t),s.addEventListener("mskeyclose",this.lT),s.addEventListener("mskeymessage",this.MT),s.addEventListener("mskeyerror",this.Ss),s.addEventListener("mskeyadded",this.LT),this.kT=s,this.BT("status-pending"),s}async $n(t){return this.IT(),!0}async ir(t){if(this.OT=new is,this.IT(),!this.kT)return Promise.resolve();const e=Uh(t);if(0===e.byteLength)throw new g("Cannot call update with an empty response.");this.kT.update(e),await this.OT.Xb}Ws(){return!this.iT&&this.kT&&(this.iT=!0,this.kT.close()),this.ET.Xb}async rT(){this.IT()}IT(){if(this.iT)throw new g("Already closing or closed.")}BT(t){this.xT.Gb(),this.xT.Wb(xc,t),this._o(new Sn(this.xT))}constructor(t,e){super(),this.DT=t,this.NT=e,this.iT=!1,this.OT=void 0,this.CT=void 0,this.kT=void 0,this.lT=()=>{this.iT=!0,this.ET.Zb(void 0),this.kT&&(this.kT.removeEventListener("mskeyclose",this.lT),this.kT.removeEventListener("mskeymessage",this.MT),this.kT.removeEventListener("mskeyerror",this.Ss),this.kT.removeEventListener("mskeyadded",this.LT))},this.MT=t=>{this.CT&&(this.CT.Zb(void 0),this.CT=void 0),this._o(new ch(this,"license-request",cc(t.message).buffer,t.destinationURL||void 0))},this.Ss=()=>{const t=this.kT&&this.kT.error;if(!t)return;const e=new $n("Unknown CDM error",t.code,t.systemCode);if(this.CT)this.CT.Hb(e),this.CT=void 0;else if(this.OT)this.OT.Hb(e),this.OT=void 0;else switch(e.zb){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.BT("output-not-allowed");break;default:this.BT("internal-error")}},this.LT=()=>{this.CT&&(this.BT("usable"),this.CT.Zb(void 0),this.CT=void 0),this.OT&&(this.BT("usable"),this.OT.Zb(void 0),this.OT=void 0)},this.ET=new is,this.xT=new bp}},eb=class{async dT(t){return new tb(this.DT,this.NT)}vT(t){return Promise.resolve(!1)}kn(t){const e=()=>{t.msSetMediaKeys(this.DT),t.removeEventListener("loadedmetadata",e)};return t.readyState>=1?t.msSetMediaKeys(this.DT):t.addEventListener("loadedmetadata",e),Promise.resolve()}gT(t){return Promise.resolve()}nr(){return Promise.resolve()}constructor(t,e,i){this.DT=t,this._T=e,this.kd=i;const s=Yy(i)||"video/mp4";this.NT=Hy(s)}},ib=class{get _T(){return this.aT}yT(){return this.FT}pT(){const t=new s.MSMediaKeys(this.aT);return Promise.resolve(new eb(t,this.aT,this.FT))}constructor(t,e){this.aT=t,this.FT=e}},sb=class{$w(t,e){try{return Promise.resolve(function(t,e){if(!nb())throw new g("Unsupported key system "+t);for(const i of e){const e=zy(rb,mm,t,i);if(e)return new ib(t,e)}throw new g("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static TT(){return nb()}};function nb(){return void 0!==s.MSMediaKeys&&"function"==typeof s.MSMediaKeys.isTypeSupported}function rb(t,e){return s.MSMediaKeys.isTypeSupported(t,e)}r(),r(),r(),r();var ob=class extends So{get eT(){return this.VT?this.VT.sessionId:""}get JS(){return NaN}get QS(){return this.ET.Xb}get Ab(){return this.xT}nT(t,e,i){const s=i&&i.fairplay&&i.fairplay.WT;if(!s)throw new g("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,e,i){const s=Zh(t),n=2*s.length,r=2*e.length,o=new ArrayBuffer(4+n+4+r+4+i.byteLength),h=new DataView(o),a=new er;return Ym(h,a,n,!0),np(h,a,s,!0),Ym(h,a,r,!0),np(h,a,e,!0),Ym(h,a,i.byteLength,!0),Zm(h,a,i),new j(o)}(Uh(e),s,this.UT);return this.VT=this.GT.createSession(this.NT,n),this.VT.addEventListener("webkitkeymessage",this.MT,!1),this.VT.addEventListener("webkitkeyadded",this.LT,!1),this.VT.addEventListener("webkitkeyerror",this.Ss,!1),this.BT("status-pending"),this.ZT.Zb(this.VT),this.ZT=new is,Promise.resolve()}$n(t){return Promise.resolve(!0)}async ir(t){const e=Uh(t);if(0===e.byteLength)throw new g("Cannot call update with an empty response.");this.HT=new is;(this.VT||await this.ZT.Xb).update(e),await this.HT.Xb}Ws(){var t;const e=this.VT;return e&&(e.removeEventListener("webkitkeymessage",this.MT,!1),e.removeEventListener("webkitkeyadded",this.LT,!1),e.removeEventListener("webkitkeyerror",this.Ss,!1),e.close()),this.ZT.np(),null==(t=this.HT)||t.np(),this.ET.Zb(void 0),this.ET.Xb}rT(){return Promise.resolve(void 0)}BT(t){this.xT.Gb(),this.xT.Wb(xc,t),this._o(new Sn(this.xT))}constructor(t,e,i){super(),this.GT=t,this.NT=e,this.UT=i,this.ET=new is,this.HT=void 0,this.xT=new bp,this.VT=void 0,this.ZT=new is,this.Ss=()=>{const t=this.VT&&this.VT.error;if(!t)return;const e=new $n("Unknown CDM error",t.code,t.systemCode);this.HT?(this.HT.Hb(e),this.HT=void 0):e.zb===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.BT("output-not-allowed"):this.BT("internal-error"),this._o(new ym)},this.MT=t=>{this._o(new ch(this,"license-request",cc(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.LT=()=>{this.HT&&(this.HT.Zb(void 0),this.HT=void 0),this.BT("usable")}}};r();var Z=class extends dl{get name(){return"THEOplayerError"}get category(){return lr.fromCode(this.code)}constructor(t,e,i){super(e,i),this.code=t}};function hb(t,e){return t instanceof Z?t:t instanceof m?new Z(e,t.message,t):new Z(e,String(t))}var ab=class{getInternalMediaKeys(){return this.GT}async dT(t){if(!this.UT)throw new Z(Ci.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new ob(this.GT,this.NT,this.UT)}vT(t){return this.UT=Uh(t),Promise.resolve(!0)}kn(t){return t.webkitSetMediaKeys(this.GT),Promise.resolve()}gT(t){return t.webkitSetMediaKeys(null),Promise.resolve()}nr(){return Promise.resolve()}constructor(t,e,i){this.GT=t,this._T=e,this.kd=i,this.UT=void 0;const s=Yy(i)||"video/mp4";this.NT=Hy(s)}},ub=class{get _T(){return this.aT}yT(){return this.FT}pT(){const t=new s.WebKitMediaKeys(this.aT);return Promise.resolve(new ab(t,this.aT,this.FT))}constructor(t,e){this.aT=t,this.FT=e}},cb=class{$w(t,e){try{return Promise.resolve(function(t,e){if(t!==qg)throw new g(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!lb())throw new g("Unsupported key system "+t);for(const i of e){const e=zy(db,pm,t,i);if(e)return new ub(t,e)}throw new g("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static TT(){return lb()}};function lb(){return void 0!==s.WebKitMediaKeys&&"function"==typeof s.WebKitMediaKeys.isTypeSupported}function db(t,e){return s.WebKitMediaKeys.isTypeSupported(t,e)}r();var fb=class{async $w(t,e){for(const i of this.XT)try{return await i.$w(t,e)}catch(t){}throw new g("Unsupported key system configuration for "+t)}constructor(t){this.XT=t}};r(),r(),r(),r(),r();var dc=class{Qo(t,e){return new Promise((i=>{const s=Fi.hp([this.zT.ep,e]),n=()=>{s.Km()};this.qT.push((()=>{const e=_b(t,s.ep);return i(e),e.then(n,n)})),this.YT||(this.YT=this.KT())}))}np(){return this.jT(!0)}yn(){return this.QT=void 0,this.jT(!1)}jT(t){const e=this.YT;return this.zT.np(),t&&(this.zT=new Fi),Promise.resolve(e)}constructor(t){this.qT=[],this.YT=void 0,this.zT=new Fi,this.KT=()=>{if(0===this.qT.length)return this.QT?_b(this.QT,this.zT.ep).then(this.JT,this.JT):this.JT();return this.qT.shift()().then(this.KT)},this.JT=()=>{if(0!==this.qT.length)return this.KT();this.YT=void 0},this.QT=t}};function _b(t,e){return new Promise((i=>i(t(e))))}var vb=new dc,gb=class extends So{$T(){this.HT&&(this.BT("usable"),this.HT.Zb(void 0),this.HT=void 0)}ek(t){const e=new $n("Unknown CDM error",t.errorCode,t.systemCode);this.HT?(this.HT.Hb(e),this.HT=void 0):this.CT?(this.CT.Hb(e),this.CT=void 0):e.zb===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.BT("output-restricted"):1===e.qb?this.BT("expired"):this.BT("internal-error")}nk(t){0!==t.message.byteLength?(this.CT&&(this.CT.Zb(void 0),this.CT=void 0),this._o(new ch(this,"license-request",Sp(this.aT,cc(t.message).buffer),t.defaultURL||void 0))):this.CT&&(this.CT.Hb("Empty key message"),this.CT=void 0)}rk(t){this.hk||(this.hk=t,this.ck.Zb(t))}get Ab(){return this.lk}get eT(){return this.dk}set eT(t){this.dk=t}get QS(){return this.ET.Xb}get JS(){return NaN}async Ws(){this.throwIfClosed(),this.HT&&(this.HT.Hb(void 0),this.HT=void 0),this.sA=!0,this.ET.Zb(void 0)}async nT(t,e){this.throwIfClosed(),this.CT=new is,this.fk=Uh(e);(this.hk||await this.ck.Xb).webkitGenerateKeyRequest(this.aT,this.fk),await this.CT.Xb}async $n(t){return this.throwIfClosed(),!1}async rT(){this.throwIfClosed()}async ir(t){if(this.throwIfClosed(),this.HT=new is,Ya.Ng||Ya.Rg)return vb.Qo((async()=>{await this.doUpdate(t)}));await this.doUpdate(t)}async doUpdate(t){if(void 0===this.HT)return;(this.hk||await this.ck.Xb).webkitAddKey(this.aT,Uh(t),this.fk,this.eT),await this.HT.Xb,Ya.Rg&&await Ze(500)}throwIfClosed(){if(this.sA)throw new g("Already closing or closed.")}BT(t){this.lk.Gb(),this.lk.Wb(xc,t),this._o(new Sn(this.lk))}async _k(){const t=this.hk||await this.ck.Xb;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.aT,this.dk)}catch(t){}finally{await Ze(500)}}constructor(t){super(),this.aT=t,this.CT=void 0,this.HT=void 0,this.sA=!1,this.fk=void 0,this.hk=void 0,this.ET=new is,this.dk="",this.ck=new is,this.lk=new bp}},mb=class{kn(t){return this.hk=t,this.hk.addEventListener("webkitkeyadded",this.LT),this.hk.addEventListener("webkitkeyerror",this.vk),this.hk.addEventListener("webkitkeymessage",this.gk),this.pk.forEach(((e,i)=>e.rk(t))),this.wk.forEach((e=>e.rk(t))),Promise.resolve()}gT(t){return t.removeEventListener("webkitkeyadded",this.LT),t.removeEventListener("webkitkeyerror",this.vk),t.removeEventListener("webkitkeymessage",this.gk),this.hk=void 0,Promise.resolve()}async nr(){const t=this.pk.entries();let e=t.next();for(;!e.done;)await e.value[1]._k(),e=t.next();this.pk.clear()}async dT(t,e,i){const s=new gb(this._T);return this.hk&&s.rk(this.hk),this.wk.push(s),s}vT(t){return Promise.resolve(!1)}yk(t){if(!t)return;let e=this.pk.get(t);return e||(e=this.wk.shift(),e?(e.eT=t,this.pk.set(t,e),e):void 0)}constructor(t,e){this._T=t,this.kd=e,this.hk=void 0,this.pk=Vh(),this.wk=[],this.LT=t=>{const e=this.yk(t.sessionId);e&&e.$T()},this.vk=t=>{const e=this.yk(t.sessionId);e&&e.ek(t)},this.gk=t=>{const e=this.yk(t.sessionId);e&&e.nk(t)}}},pb=class{pT(){return Promise.resolve(new mb(this._T,this.bk))}yT(){return this.bk}constructor(t,e){this._T=t,this.bk=e}},wb=class{$w(t,e){try{return Promise.resolve(function(t,e){if(!wb.TT())throw new g("Unsupported key system "+t);for(const i of e){const e=zy(yb,mm,t,i);if(e)return new pb(t,e)}throw new g("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static TT(){return fm()}};function yb(t,e){const i=bf();return Boolean(i&&i.canPlayType&&""!==i.canPlayType(e,t))}r();var bb,Ab=class{$w(t,e){return t===Wg||t===Ja?Promise.resolve(void 0):Promise.reject(new m("DRM configuration not supported"))}};function Sb(){return bb||(bb=function(){const t=[];cb.TT()&&t.push(new cb);$y.TT()&&t.push(new $y);sb.TT()&&t.push(new sb);wb.TT()&&t.push(new wb);Ya.Lg&&t.push(new Ab);return new fb(t)}()),bb}r(),r();var Tb=class{Gb(t){this.Ak.delete(t)}Sk(){this.Ak.clear()}Vb(t){return this.Ak.get(t)}Wb(t,e){this.Ak.set(t,e)}constructor(){this.Ak=Vh()}},kb=class t{static Tk(){return t.Vm||(t.Vm=Eb.TT()?new Eb:new Tb),t.Vm}static Gb(e){t.Tk().Gb(e)}static Sk(){t.Tk().Sk()}static Vb(e){return t.Tk().Vb(e)}static Wb(e,i){t.Tk().Wb(e,i)}};kb.Vm=void 0;var Eb=class extends kb{static TT(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}Gb(t){self.sessionStorage.removeItem(t)}Sk(){self.sessionStorage.clear()}Vb(t){var e;return null!=(e=self.sessionStorage.getItem(t))?e:void 0}Wb(t,e){self.sessionStorage.setItem(t,e)}};r(),r();var xb=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(e,i)=>new t(e,i)}(t)}catch(t){}const e=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(e)return function(t){return(e,i)=>{const s=new t;if(e)for(const t of e)s.append(t);return s.getBlob(i&&i.type||"")}}(e)})();function Ib(t,e,i){const s=xb([e],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,e){let i=t;const s=i.indexOf("?");if(s>=0&&(i=i.substr(0,s)),i=i.substr(i.lastIndexOf("/")+1),e){let t=i.indexOf(".");t<0&&(t=i.length),i=i.substr(0,t)+e+i.substr(t)}return i}(t,i),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}r();var Rb="default";r(),r(),r(),r();var Te=function(t){return t.Ek="arraybuffer",t.xk="json",t.Ik="stream",t.Rk="text",t}({});r();var Cb=class t{append(t,e){let i=t,s=e;i=Pb(i),s=Db(s);const n=i.toLowerCase();if(this.P_.hasOwnProperty(n)){const t=this.P_[n],e=t[1];t[1]=e?e+", "+s:s}else this.P_[n]=[i,s]}delete(t){const e=Pb(t).toLowerCase();delete this.P_[e]}get(t){const e=Pb(t).toLowerCase();return this.P_.hasOwnProperty(e)?this.P_[e][1]:null}has(t){const e=Pb(t).toLowerCase();return this.P_.hasOwnProperty(e)}set(t,e){let i=t;i=Pb(i);const s=i.toLowerCase();this.P_[s]=[i,Db(e)]}forEach(t,e){for(const i in this.P_)this.P_.hasOwnProperty(i)&&t.call(e,this.P_[i][1],i,this)}asList(){const t=[];for(const e in this.P_)if(this.P_.hasOwnProperty(e)){const[i,s]=this.P_[e];t.push([i,s])}return t}Ck(){const t={};return this.forEach(((e,i)=>{t[i]=e})),t}Pk(t){t.forEach(((t,e)=>{this.append(e,t)}))}Dk(t){t.forEach(((t,e)=>{this.set(e,t)}))}constructor(e){this.P_={},e instanceof t?e.asList().forEach((t=>{let[e,i]=t;this.append(e,i)})):Array.isArray(e)?e.forEach((t=>{let[e,i]=t;this.append(e,i)})):e&&w.getOwnPropertyNames(e).forEach((t=>{this.append(t,e[t])}))}};function Pb(t){let e=t;if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new g("Invalid character in header field name");return e}function Db(t){let e=t;return"string"!=typeof e&&(e=String(e)),e}r(),r(),r();var Ph=Qs(zl());r();var Nb=class extends dl{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=t}},Mu=a,Mb=Sd(Mu.ReadableStream)&&Sd(Mu.WritableStream)&&Sd(Mu.TransformStream)&&Ad(Mu.ReadableStream.prototype.pipeThrough)&&!r_.Dp,vr=Mb?Mu.ReadableStream:Ph.ReadableStream,Gh=(Mb?Mu.WritableStream:Ph.WritableStream,Mb?Mu.TransformStream:Ph.TransformStream),Lb=(Mb&&Mu.ByteLengthQueuingStrategy?Mu.ByteLengthQueuingStrategy:Ph.ByteLengthQueuingStrategy,Mb&&Mu.CountQueuingStrategy?Mu.CountQueuingStrategy:Ph.CountQueuingStrategy);function Bb(t){return function(t){return new vr({start(e){for(const i of t)e.enqueue(i);e.close()}})}([t])}function Ob(t){return Bb(function(t){return new j(t)}(t))}function zn(t,e){return function(t,e){let i=e;const s=t.getReader(),n=new is,r=()=>{o();const t=new vt;s.cancel(t).catch(M),n.Hb(t)},o=()=>{i&&(i.Jm(r),i=void 0)};i&&(i.zm?r():i.Qm(r));const h=[],a=t=>t.done?(o(),Promise.resolve(h)):(h.push(t.value),Promise.resolve(s.read()).then(a));return Promise.resolve(s.read()).then(a).then((t=>{o(),n.Zb(t)}),(t=>{o(),n.Hb(t)})),n.Xb}(t,e).then((t=>gu(t).buffer))}function Fb(t,e){let i=e;const{readable:s,writable:n}=new Gh,r=n.getWriter(),o=()=>{i&&i.np()};return r.closed.then(o,o),t.then((t=>(i=void 0,r.releaseLock(),t.pipeTo(n).catch(M))),(t=>(i=void 0,r.releaseLock(),n.abort(t).catch(M)))),s}function Vb(t){const{readable:e,writable:i}=new Gh;return t.pipeTo(i,{preventCancel:!0}).catch((e=>{let i;i=Qc(e)?e[0]===e[1]||Se(e[0])&&Se(e[1])?e[0]:new Nb(e):e,t.cancel(i).catch(M)})),e.tee()}function Wb(t){return Zh(new j(t))}function Ub(t){return up(t).buffer}r();var Gb="content-type",Zb="text/plain;charset=UTF-8",Xc=class{Nk(t){return this.Mk(t).then(JSON.parse)}Lk(t,e){switch(t){case Te.Ek:return this.Bk(e);case Te.xk:return this.Nk(e);case Te.Ik:return this.Ok();case Te.Rk:return this.Mk(e);default:throw new g}}};function Hb(t,e,i){if(t instanceof Xc)return t;if(t instanceof vr)return function(t,e){return new zb({zw:0,Ok:t,Fk:Xb(e)})}(t,i);const s=Xb(i),n=Promise.resolve(t).then((t=>function(t,e){if(t){if("string"==typeof t)return{zw:Te.Rk,Vk:t,Fk:e||Zb};if(t instanceof ArrayBuffer||vc(t))return{zw:Te.Ek,Vk:$b(t),Fk:e};if(wd(t)||Qc(t))return{zw:Te.xk,Vk:t,Fk:e};throw new g("Unsupported BodyInit type")}return{zw:Te.Rk,Vk:null,Fk:e}}(t,s)));return new zb({zw:1,Xb:n,Wk:e})}function Xb(t){return(t.get(Gb)||"").toLowerCase()}var zb=class t extends Xc{get Uk(){return this.Gk}get Zk(){return 0===this.Hk.zw}Xk(){return this.zk.Xb}Mk(t){return this.qk(qb,t)}Nk(t){return this.qk(Kb,t)}Bk(t){return this.qk(Qb,t)}Ok(){return this.Yk(function(t){return 0===t.zw?t.Ok:Fb(t.Xb.then(Jb).then(Ob),t.Wk)}(this.Hk))}qk(t,e){if(this.Gk)return Promise.reject(new g("Already used"));this.Gk=!0;const i=t(this.Hk,e);return this.zk.rp(i.then(M)),i}Yk(t){if(this.Gk)throw new g("Already used");if(t.locked)throw new g("Body stream is locked");this.Gk=!0;const e=new Gh,i=Promise.resolve(t.pipeTo(e.writable));return this.zk.rp(i),e.readable}Kk(t){this.Hk=t,1===t.zw&&t.Xb.catch(M)}jk(){if(this.Gk)throw new g("Already used");const e=function(t){if(0===t.zw){const[e,i]=t.Ok.tee();return[{zw:t.zw,Ok:e,Fk:t.Fk},{zw:t.zw,Ok:i,Fk:t.Fk}]}{const[e,i]=t.Wk.op();return[{zw:t.zw,Xb:t.Xb,Wk:e},{zw:t.zw,Xb:t.Xb,Wk:i}]}}(this.Hk),i=e[0],s=e[1];return this.Kk(i),new t(s)}constructor(t){super(),this.Gk=!1,this.zk=new is,this.zk.Xb.catch(M),this.Kk(t)}};function qb(t,e){return 0===t.zw?zn(t.Ok,e).then(Wb):(e&&t.Wk.rp(e),Ts(t.Xb.then(Yb),t.Wk))}function Yb(t){switch(t.zw){case Te.Rk:return Promise.resolve(t.Vk||"");case Te.Ek:return Promise.resolve(t.Vk).then(Wb);case Te.xk:return Promise.resolve(t.Vk).then(JSON.stringify)}}function Kb(t,e){return 0===t.zw?qb(t,e).then(JSON.parse):(e&&t.Wk.rp(e),Ts(t.Xb.then(jb),t.Wk))}function jb(t){return t.zw===Te.xk?Promise.resolve(t.Vk):Yb(t).then(JSON.parse)}function Qb(t,e){return 0===t.zw?zn(t.Ok,e):(e&&t.Wk.rp(e),Ts(t.Xb.then(Jb),t.Wk))}function Jb(t){switch(t.zw){case Te.Ek:return Promise.resolve(t.Vk);case Te.Rk:case Te.xk:return Yb(t).then(Ub)}}function $b(t){return t instanceof ArrayBuffer?t:cc(Lr(t)).buffer}var tA=class extends Xc{get Uk(){return this.Qk.Uk}get Zk(){return this.Qk.Zk}Xk(){return this.Qk.Xk()}Mk(t){return this.Qk.Mk(t)}Nk(t){return this.Qk.Nk(t)}Bk(t){return this.Qk.Bk(t)}Ok(t){return this.Qk.Ok(t)}jk(){return this.Qk.jk()}constructor(t){super(),this.Qk=t}};function eA(t){return t.Jk>=200&&t.Jk<=299||304===t.Jk}var iA=class t extends tA{$k(t){return this.Lk(this.tE,t)}Nb(){return new t({$k:this.jk(),eE:this.eE},this)}constructor(t,e){let i,s,n,r,o;e?(i=e.iE,s=e.tE,n=e.Jk,r=e.sE,o=e.nE):(i=[],s=Te.Rk,n=200,r="OK",o=!1);const h=t.eE,a=new Cb(t.iE||i),u=t.tE||s,c=t.rE||(e&&e.eE===h?e.rE:h.Xu),l=e?e.Qk:null;super(Hb(void 0!==t.$k?t.$k:l,t.Wk||new Fi,a)),this.iE=a,this.eE=h,this.rE=c,this.tE=u,this.Jk=void 0!==t.Jk?t.Jk:n,this.sE=void 0!==t.sE?String(t.sE):r,this.nE=t.nE||o}};r();var Ce=function(t){return t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT",t}({}),Bn=function(t){return t.oE="",t.hE="manifest",t.aE="segment",t.uE="preload-hint",t.cE="content-protection",t}({}),Cu=function(t){return t.oE="",t.lE="initialization-segment",t.dE="fairplay-license",t.fE="fairplay-certificate",t._E="widevine-license",t.vE="widevine-certificate",t.gE="playready-license",t.mE="clearkey-license",t.pE="aes128-key",t}({}),sA=function(t){return t.oE="",t.wE="audio",t.yE="video",t.Rk="text",t.bE="image",t}({}),nA=function(t){return t.AE="same-origin",t.SE="no-cors",t.TE="cors",t.kE="navigate",t}({}),Gr=class{constructor(t,e){const i=t.Xu;let s,n,r,o,h,a,u,c,l,d,f,_,v,g,m;var p,w,y;e?(s=e.Vk,n=e.iE,r=e.EE,o=e.tE,h=e.xE,a=e.RE,u=e.ep,c=e.zw,l=e.CE,d=e.PE,f=e.DE,_=e.NE,v=e.LE,g=e.BE,m=e.OE):(s=null,n={},r="GET",o=Te.Rk,h=0,a=0,c="",l="",d="",f=!1,v=void 0,g=!1,m=void 0),this.Xu=i,this.Vk=t.Vk||s,this.iE=new Cb(t.iE||n),this.EE=t.EE||r,this.tE=t.tE||o,this.xE=void 0!==t.xE?Number(t.xE)||0:h,this.RE=void 0!==t.RE?Number(t.RE)||0:a,this.ep=t.ep||u||(new Fi).ep,this.zw=t.zw||c,this.CE=t.CE||l,this.PE=t.PE||d,this.DE=void 0!==t.DE?Boolean(t.DE):f,this.NE=t.NE||_,this.LE=null!=(p=t.LE)?p:v,this.BE=null!=(w=t.BE)?w:g,this.OE=null!=(y=t.OE)?y:m}},rA=class{eE(t){const e=function(t){return new iA({$k:null,iE:{},eE:t,rE:t.Xu,tE:t.tE,Jk:0,sE:ns.qy})}(new Gr(t));return Promise.resolve(e)}FE(t){}yn(){}};var fr=class t{static get VE(){return t.WE||(t.WE=new t(new rA)),t.WE}eE(t){const e=this.UE(t);return this.GE.eE(e)}FE(t){return this.GE.FE(this.ZE(t))}UE(e){let i=new Gr(e);if(!this.HE){const e=t.XE(i.Xu);i=new Gr({Xu:e},i)}return i}ZE(e){let i=e.Xu;return this.HE||(i=t.XE(i)),{Xu:i,Vk:e.Vk}}static XE(t){return As.Dw&&Cl(t,"http://")?t.replace(":","s:"):t}yn(){this.GE.yn()}constructor(t,e=!0){this.GE=t,this.HE=e}};function Vc(t,e){const i=As.Bh(t);return oA(i,e),i.toString()}function oA(t,e){for(const i of w.keys(e))t.searchParams.set(i,e[i])}function Ks(t,e){let i=As.Ew(t);return e&&!nm(i,"/")&&(i+="/"),i}fr.WE=void 0,r(),r(),r();var hA=/cache:(.+)?(?=&|$)/,aA="http://webcache.googleusercontent.com/search?q=cache:";function uA(t){if(!Cl(t,aA))return"";const e=As.Bh(t).search.match(hA);return e&&e.length>1?e[1]:""}function cA(t){return As.Bh(".",t)}r(),r();var zc=function(t){return t.zE="HttpOpenError",t.qE="HttpResponseError",t.YE="HttpTimeoutError",t}({}),lA=class extends dl{get eE(){return this.KE}constructor(t,e,i){super(e,i),this.KE=t}};var dA=class extends lA{get name(){return zc.zE}constructor(t,e){super(t,function(t){return"Error while opening "+t+". Invalid URL."}(t.Xu),e)}};r();var de=class extends lA{get name(){return zc.qE}get jE(){return this.QE}constructor(t,e,i){super(t.eE,null!=i?i:function(t){return"Error while loading "+t.eE.Xu+", status code "+t.Jk}(t),e),this.QE=t}};r();var Gc=class extends lA{get name(){return zc.YE}constructor(t,e){super(t,function(t){return"Request for "+t.Xu+" timed out after "+t.xE+" seconds."}(t),e)}};r();var fA=self.fetch,_A=self.Request,vA=self.Response,gA=self.Headers,mA=self.ReadableStream,pA=self.AbortSignal,wA=self.AbortController,yA=Wd((()=>{try{return Ad(fA)&&Sd(_A)&&Sd(vA)&&Sd(gA)&&"forEach"in gA.prototype&&Tg()}catch(t){return!1}})),bA=["http:","https:"];var AA=Wd((()=>{try{return yA()&&Sd(pA)&&Sd(wA)&&"signal"in _A.prototype}catch(t){return!1}})),SA=Wd((()=>{try{return yA()&&Sd(mA)&&"body"in vA.prototype&&!Ya.hg}catch(t){return!1}}));function Li(t){return t instanceof lA}function TA(t){return t instanceof de}function kA(t,e){const i=t.iE.has("content-length")?Number(t.iE.get("content-length")):void 0;let s;return s=t.Zk?function(t,e,i){return t.pipeThrough(new Gh(new EA(e,i)))}(t.Ok(),e,i):async function(t,e,i){await Promise.resolve(),e(0,i);const s=await t,n=s.byteLength;return e(n,null!=i?i:n),s}(t.Bk(),e,i),new iA({$k:s,eE:t.eE},t)}r(),r();var EA=class{transform(t,e){this.JE+=t.byteLength,this.$E(this.JE,this.tx),e.enqueue(t)}flush(t){var e;this.$E(this.JE,null!=(e=this.tx)?e:this.JE)}constructor(t,e){this.$E=t,this.tx=e,this.JE=0}};var xA=class{async ix(){const t=this.KE;let e,i;t.xE&&(this.sx=u((()=>{this.nx=!0,this.zT.np()}),t.xE),this.zT.ep.$m((()=>{c(this.sx)})));try{e=fA(t.Xu,{method:t.EE,headers:t.iE.Ck(),body:t.Vk,credentials:t.DE?"include":"same-origin",signal:CA(this.zT.ep),mode:t.LE,keepalive:t.OE})}catch(e){throw new dA(t,e)}try{i=await e}catch(t){const e=this.ox(t);throw Se(e)&&this.zT.np(),e}const s=i.url||t.Xu,n=0===i.status&&"file:"===function(t){return As.Bh(t).protocol}(s)?200:i.status,r=new IA(this,i,this.zT);let o=new iA({$k:r,eE:t,tE:t.tE,iE:PA(i.headers),Jk:n,sE:i.statusText,rE:s});if(!eA(o))throw new de(o);return t.NE&&(o=kA(o,t.NE)),o}ox(t){return Li(t)?t:Se(t)?this.nx?new Gc(this.KE):new vt(t.message,t):this.QE?new de(this.QE,t):new dA(this.KE,t)}constructor(t){this.zT=new Fi,this.QE=void 0,this.sx=0,this.nx=!1,this.KE=t,this.zT.rp(t.ep),this.jE=this.ix()}},IA=class t extends Xc{get Uk(){return this.hx.bodyUsed}get Zk(){return ol(this.hx.body)}Xk(){return this.zk.Xb}Mk(t){return this.qk(this.hx.text(),t)}Bk(t){return this.qk(this.hx.arrayBuffer(),t)}Ok(){const t=this.hx.body;return t?this.Yk(t):Fb(this.Bk().then(Ob),this.zT)}jk(){const e=this.hx.clone(),[i,s]=this.zT.op();return this.zT=i,new t(this.ux,e,s)}qk(t,e){e&&this.zT.rp(e);let i=Lu(Promise.resolve(t),this.zT.ep).catch((t=>{throw this.ux.ox(t)}));return i=Ts(i,this.zT),this.zk.rp(i.then(M)),i}Yk(t){return new vr(new DA(t,(t=>this.ux.ox(t)),this.zT,this.zk),{highWaterMark:0})}constructor(t,e,i){super(),this.zk=new is,this.ux=t,this.hx=e,this.zT=i,this.zk.Xb.catch(M)}},RA="abort";function CA(t){if(!AA())return;const e=new wA;if(t.zm)e.abort();else if(!t.qm){const i=()=>{s(),e.abort()},s=()=>{e.signal.removeEventListener(RA,i),t.Jm(i),t.tp(s)};e.signal.addEventListener(RA,i),t.Qm(i),t.$m(s)}return e.signal}function PA(t){if(function(t){return Vt(t)&&"function"==typeof t.forEach}(t)){const e=new Cb;return t.forEach(((t,i)=>{Array.isArray(t)&&2===t.length?e.append(t[0],t[1]):e.append(i,t)})),e}return new Cb(t)}var DA=class{start(t){this.Od=this.lx.getReader()}async pull(t){let e;try{e=await Lu(this.Od.read(),this.zT.ep)}catch(e){const i=this._x(e);return this.zk.Hb(i),this.zT.np(),this.Od.cancel(i).catch(M),void t.error(i)}e.done?(this.zk.Zb(),this.zT.np(),t.close()):t.enqueue(e.value)}cancel(t){return this.zT.np(),this.zk.Hb(t),this.Od.cancel(t)}constructor(t,e,i,s){this.lx=t,this._x=e,this.zT=i,this.zk=s}};r();var NA=class{get jE(){return this.vx.Xb}ix(){const t=this.gx,e=this.KE;if(e.ep.zm)return this.mx();t.onreadystatechange=()=>this.wx(),t.onprogress=t=>this.$E(t),t.onload=()=>this.yx(),t.onloadend=()=>this.bx(),t.onerror=()=>this.Ax(),t.ontimeout=()=>this.Sx(),t.onabort=()=>this.mx(),t.open(e.EE,e.Xu,!0),t.withCredentials=Boolean(e.DE),"responseType"in t&&e.tE&&(e.tE===Te.Rk?t.responseType="text":t.responseType="arraybuffer"),e.iE.forEach(((e,i)=>{t.setRequestHeader(i,e)})),e.xE&&(t.timeout=e.xE),this.zT.ep.Qm(this.Tx);const i=e.Vk;i?t.send(i):t.send()}wx(){const t=this.gx;void 0!==t&&t.readyState>=2&&!this.kx&&(this.kx=!0,this.Ex())}Ex(){var t;const e=this.gx,i=function(t){const e=new Cb,i=t.replace(/\r?\n[\t ]+/g," ");return i.split(/\r?\n/).forEach((t=>{const i=t.split(":"),s=i.shift().trim();if(s){const t=i.join(":").trim();e.append(s,t)}})),e}(e.getAllResponseHeaders()||""),s=this.KE;var n;this.xx=new is,this.QE=new iA({eE:s,tE:s.tE,$k:this.xx.Xb,Jk:e.status,sE:e.statusText,iE:i,rE:null!=(n=e.responseURL)?n:i.get("X-Request-URL")}),null==(t=this.vx)||t.Zb(this.QE)}yx(){var t;const e=this.gx;if(void 0===e)return;let i=e.response;if(!ol(i)){const t=this.KE.tE;i=t===Te.Rk?e.responseText:t===Te.Ek?new ArrayBuffer(0):{}}null==(t=this.xx)||t.Zb(i)}bx(){this.yn()}$E(t){void 0!==this.gx&&(null==this.KE.NE||this.KE.NE.call(this.KE,t.loaded,t.lengthComputable?t.total:void 0))}Ax(){const t=new m("Network request failed");this.QE?this.Ss(new de(this.QE,t)):this.Ss(new dA(this.KE,t))}Sx(){this.Ss(new Gc(this.KE))}mx(){this.Ss(new vt),this.yn()}Ss(t){var e,i;null==(e=null!=(i=this.xx)?i:this.vx)||e.Hb(t)}yn(){this.gx=void 0,this.QE=void 0,this.vx=void 0,this.xx=void 0,this.zT.Km()}constructor(t){this.zT=new Fi,this.QE=void 0,this.vx=new is,this.kx=!1,this.Tx=()=>{var t;this.mx(),null==(t=this.gx)||t.abort()},this.KE=t,this.zT.rp(t.ep),this.gx=new Fl,this.ix()}};function MA(t,e,i){return new Promise(((s,n)=>{if(i&&i.zm)return n(new vt);const r=t=>{h(),s(t)},o=()=>{h(),n(new vt)},h=()=>{t.removeEventListener(e,r),i&&i.Jm(o)};t.addEventListener(e,r),i&&i.Qm(o)}))}r();var LA=class{eE(t){return function(t){if(!yA()||!function(t){try{return bA.indexOf(new self.URL(t,self.location.href).protocol)>=0}catch(t){return!1}}(t.Xu))return!1;if(!SA()&&t.NE)return!1;if(!t.BE&&t.EE!==Ce.POST){if(Ya.Ng&&Ya.wg<=68)return!1;if(Ya.Rg)return!1}return!0}(t)?new xA(t).jE:new NA(t).jE}FE(t){const e=s.navigator;if(e&&e.sendBeacon)e.sendBeacon(t.Xu,xb([t.Vk],{type:t.Fk}));else{const e=t.Fk?{"Content-type":t.Fk}:void 0;this.eE(new Gr({EE:Ce.POST,Xu:t.Xu,Vk:t.Vk,iE:e,LE:nA.SE})).then((t=>{uh(t.Bk())}),M)}}yn(){}};r(),r();var za=function(t){return t[t.Ix=1]="Ix",t[t.Rx=2]="Rx",t[t.Rk=3]="Rk",t[t.Cx=4]="Cx",t[t.Px=9]="Px",t}({});function Oh(t){return 1===t.Dx}function BA(t){return 3===t.Dx}r();var OA=class extends dl{constructor(t){super("Invalid XML",t)}},FA=class{Nx(t){const e=new DOMParser;let i;try{i=e.parseFromString(t,"text/xml")}catch(t){throw new OA(t)}if(!i||i.getElementsByTagName("parsererror").length>0)throw new OA;return new XA(i)}},VA=class t{get Dx(){return za.Rx}get Mx(){var t;return null!=(t=this.Lx.localName)?t:YA(this.Lx.nodeName)}get l(){return this.Lx.nodeName}get Bx(){var t;return null!=(t=this.Lx.namespaceURI)?t:void 0}get Ox(){var t;return null!=(t=this.Lx.prefix)?t:void 0}get Fx(){return this.Lx.nodeValue}Vx(t){return this.Lx.isEqualNode(t.Lx)}Wx(e){return new t(this.Lx.cloneNode(e))}constructor(t){this.Lx=t}},WA=class{get Ux(){return void 0===this.Gx&&(this.Gx=function(t){const e=[];for(let i=0;i<t.length;i++){const s=qA(t.item(i));s&&e.push(s)}return e}(this.Zx.childNodes)),this.Gx}get m(){return this.Ux.filter(zA)}Hx(t){return this.Ux.filter((e=>zA(e)&&e.Xx===t))}zx(t,e){return this.Ux.filter((i=>zA(i)&&i.Mx===e&&i.Bx===t))}get qx(){return this.Zx}Yx(t){this.Zx.appendChild(t.qx),this.Gx&&this.Gx.push(t)}Vx(t){return this.Zx.isEqualNode(t.qx)}constructor(t){this.Gx=void 0,this.Zx=t}},UA=class t extends WA{get Dx(){return za.Ix}get Mx(){var t;return null!=(t=this.Zx.localName)?t:YA(this.Zx.nodeName)}get Bx(){var t;return null!=(t=this.Zx.namespaceURI)?t:void 0}get Ox(){var t;return null!=(t=this.Zx.prefix)?t:void 0}get Xx(){return this.Zx.nodeName}get Kx(){return function(t){const e=[];for(let i=0;i<t.length;i++)e.push(new VA(t.item(i)));return e}(this.Zx.attributes)}get jx(){return this.Zx.textContent}Qx(t){if(this.Zx.hasAttribute(t))return this.Zx.getAttribute(t)}Jx(t,e){if(this.Zx.hasAttributeNS(t,e))return this.Zx.getAttributeNS(t,e)}$x(t){this.Zx.removeAttribute(t)}tI(t,e){this.Zx.removeAttributeNS(t,e)}eI(t,e){this.Zx.setAttribute(t,e)}iI(t,e,i){this.Zx.setAttributeNS(t,e,i)}Wx(e){return new t(this.Zx.cloneNode(e))}constructor(t){super(t)}},GA=class{get $k(){return this.Zx.nodeValue}get qx(){return this.Zx}Vx(t){return this.$k===t.$k}constructor(t){this.Zx=t}},ZA=class t extends GA{get Dx(){return za.Rk}Wx(e){return new t(this.Zx.cloneNode(e))}constructor(t){super(t)}},HA=class t extends GA{get Dx(){return za.Cx}Wx(e){return new t(this.Zx.cloneNode(e))}constructor(t){super(t)}},XA=class t extends WA{get Dx(){return za.Px}get sI(){return new UA(this.Zx.documentElement)}Wx(e){return new t(this.Zx.cloneNode(e))}constructor(t){super(t)}};function zA(t){return Oh(t)}function qA(t){switch(t.nodeType){case za.Ix:return new UA(t);case za.Rk:return new ZA(t);case za.Cx:return new HA(t)}}function YA(t){const e=t.indexOf(":");return e<0?t:t.substr(e+1)}!function(t){As=t}(new class extends Ag{get _w(){return this.nI||(this.nI=new _m(Sb())),this.nI}get rI(){return this.oI}get hI(){return this.aI}get uI(){return this.cI}get lI(){return!1}get dI(){return kb.Tk()}get fI(){return{_I:Ib}}get vI(){return Bl.connection&&Bl.connection.effectiveType||Rb}get gI(){return Bl.connection&&Bl.connection.type||"unknown"}get mI(){return this.pI||(this.pI=new fr(new LA)),this.pI}Nx(t){return this.wI.Nx(t)}constructor(...t){super(...t),this.nI=void 0,this.oI=SA(),this.aI=Ya.wm||Ya.hg,this.cI=(Ya.wm||Ya.Ng&&Ya.wg<=68||Ya.hg)&&!(Ya.Rg&&Ya.Pg<3),this.pI=void 0,this.wI=new FA}}),r(),r(),r(),r(),r(),r();var KA=class extends en{},qc=class extends en{get ht(){return this.yI()}yI(){return this.bI.ht}AI(){return this.bI.AI()}get SI(){return this.TI()}TI(){return this.bI.SI}get kI(){return this.EI()}set kI(t){this.xI(t)}EI(){return this.bI.kI}xI(t){this.bI.kI=t}get bt(){return this.II()}II(){return this.bI.bt}get RI(){return this.CI()}set RI(t){this.DI(t)}CI(){return this.bI.RI}DI(t,e){this.bI.DI(t,e)}get ct(){return this.jd()}jd(){return this.bI.ct}get we(){return this.NI()}NI(){return this.bI.we}get MI(){return this.LI()}LI(){return this.bI.MI}get lt(){return this.BI()}get OI(){return this.FI()}BI(){return this.bI.lt}FI(){return this.bI.OI}get VI(){return this.WI()}get UI(){return this.GI()}WI(){return this.bI.VI}GI(){return this.bI.UI}get ZI(){return this.HI()}HI(){return this.bI.ZI}get XI(){return this.zI()}zI(){return this.bI.XI}get qI(){return this.YI()}set qI(t){this.KI(t)}YI(){return this.bI.qI}KI(t){this.bI.qI=t}get jI(){return this.QI()}QI(){return this.bI.jI}get JI(){return this.$I()}$I(){return this.bI.JI}get tR(){return this.eR()}set tR(t){this.iR(t)}eR(){return this.bI.tR}iR(t){this.bI.tR=t}get sR(){return this.nR()}nR(){return this.bI.sR}get rR(){return this.oR()}set rR(t){this.hR(t)}oR(){return this.bI.rR}hR(t){this.bI.rR=t}get aR(){return this.uR()}uR(){return this.bI.aR}get cR(){return this.lR()}lR(){return this.bI.cR}get dR(){return this.fR()}fR(){return this.bI.dR}iu(){return this.bI.iu()}Ca(t,e){return this.bI.Ca(t,e)}get nt(){return this._R()}_R(){return this.bI.nt}get vR(){return this.gR()}gR(){return this.bI.vR}get rt(){return this.mR()}mR(){return this.bI.rt}get pR(){return this.wR()}wR(){return this.bI.pR}get yR(){return this.bR()}set yR(t){this.AR(t)}get SR(){return this.kR()}kR(){return this.bI.SR}bR(){return this.bI.yR}AR(t){this.bI.yR=t}get ER(){return this.bI.ER}set ER(t){this.bI.ER=t}xR(){return this.bI.xR()}ja(){return this.bI.ja()}IR(){return this.bI.IR()}pr(t){this.bI.pr(t)}dr(){this.bI.dr()}be(){this.bI.be()}RR(){this.bI.RR()}PR(){this.bI.PR()}DR(){this.bI.DR()}ge(){this.bI.ge()}NR(){return this.bI.NR()}MR(){return this.bI.MR()}LR(){this.bI.LR()}OR(){this.bI.OR()}nr(){return this.bI.nr()}FR(){this.bI.FR()}WR(){this.bI.WR()}UR(t){return this.bI.UR(t)}GR(t){return!1}async yn(){this.Ro(),await this.bI.yn()}ZR(t){return this.bI.ZR(t)}constructor(t){super(),this.HR=t=>{this.GR(t)||this._o(t)},this.bI=t,t._y(this.HR)}};r(),r(),r();var je=function(t){return t.XR="zR",t.qR="YR",t}({});r(),r(),r(),r();var $s=class extends me{get wa(){return this.eu||(this.eu=this.ka()),this.eu}constructor(t,e){super(t,e),this.eu=void 0}};function jA(t){return Boolean(t&&t.wa)}var Me=class extends $s{constructor(t){super(t)}},Mo=class extends me{constructor(t){super(t)}},QA=class extends Me{ka(){return new JA(this.Ht.wa)}constructor(t){super(je.XR),this.Ht=t}},JA=class extends Mo{constructor(t){super("addtrack"),this.track=t}};r();var $A=class extends Me{ka(){return new tS(this.Ht.wa)}constructor(t){super(je.qR),this.Ht=t}},tS=class extends Mo{constructor(t){super("removetrack"),this.track=t}};r();var gs=function(t){return t.KR="jR",t.QR="JR",t.$R="tC",t.eC="iC",t.sC="nC",t.rC="oC",t.da="hC",t.aC="uC",t.cC="lC",t.dC="ir",t.fC="_C",t.vC="gC",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality",t}({}),io=class extends So{get mC(){return this.pC}get wa(){return this.eu||(this.eu=this.ka()),this.eu}get V(){return this.pC.length}wC(t){return this.pC[t]}tt(t){return!(!t||fh(this.pC,t))&&(this.pC.push(t),this.eu&&this.eu.push(t.wa),t.bn(gs.da,this.Ds),this._o(new QA(t)),!0)}it(t){if(!t)return!1;const e=this.pC.indexOf(t);return!(e<0)&&(wa(this.pC,e),this.eu&&wa(this.eu,e),t.vn(gs.da,this.Ds),this._o(new $A(t)),!0)}yC(t){return fh(this.pC,t)}nr(){const t=this.pC;for(let e=t.length-1;e>=0;e-=1)this.it(t[e])}yn(){this.nr(),this.Ro()}constructor(){super(),this.pC=[],this.eu=void 0}};r();var Pc=class extends Me{ka(){return new eS(this.Ht.wa)}constructor(t){super(gs.da),this.Ht=t}},eS=class extends Mo{constructor(t){super("change"),this.track=t}},iS=class extends io{get bC(){return this.AC}set bC(t){const e=this.AC;if(t!==e){if(e){this.SC(e);for(const i of e.mC)t&&t.yC(i)||this.it(i)}if(this.AC=t,t){const e=[];for(const i of t.mC)this.tt(i),this.TC(i)&&e.push(i);this.kC(t);for(const t of e)t._o(new Pc(t))}}}kC(t){t.bn(je.XR,this.EC),t.bn(je.qR,this.xC)}SC(t){t.vn(je.XR,this.EC),t.vn(je.qR,this.xC)}yn(t){!t&&this.AC&&this.AC.yn(),super.yn()}constructor(){super(),this.AC=void 0,this.EC=t=>{const e=t.Ht;this.tt(e)},this.xC=t=>{const e=t.Ht;this.it(e)}}};r(),r(),r();var sS=w.freeze||yo;function nS(t,e,i){w.defineProperty(t,e,{writable:!1,enumerable:!0,value:i})}function rS(t){return sS(t)}function Qr(t,e){for(const i of w.getOwnPropertyNames(e))w.defineProperty(t,i,w.getOwnPropertyDescriptor(e,i));return t}function Fa(t){if(wd(t)){const e={};for(const i in t)Da.call(t,i)&&(e[i]=Fa(t[i]));return e}if(Qc(t)){const e=new Array(t.length);for(let i=0;i<e.length;i++)i in t&&(e[i]=Fa(t[i]));return e}return t}function Et(t,e){return t===e||!(!t||!e)&&(!(!Vt(t)||!Vt(e))&&(Fu(t)?!!Fu(e)&&function(t,e){const i=t.length,s=e.length;if(i!==s)return!1;for(let s=0;s<i;s+=1)if(!Et(t[s],e[s]))return!1;return!0}(t,e):!Fu(e)&&function(t,e){const i=w.keys(t),s=w.keys(e);if(!i||!s||i.length!==s.length)return!1;for(const s of i)if(!Da.call(e,s)||!Et(t[s],e[s]))return!1;return!0}(t,e)))}function oS(t,e){if(!Vt(t))return!1;for(const i of e)if(!(i in t))return!1;return!0}function hS(t,e){return t.constructor===e.constructor}function aS(t){const e={};for(const i of w.keys(t)){const s=t[i];null!=s&&(e[i]=s)}return e}function uS(t){const e={};for(const i of w.keys(t)){const s=t[i];if(Fu(s)){const t=[];for(let e=0;e<s.length;e+=1){const i=s[e];if(null!=i){const e=Vt(i)?uS(i):i;t.push(e)}}e[i]=t}else null!=s&&(e[i]=Vt(s)?uS(s):s)}return e}function bc(t){let e=t;if("string"==typeof e){if(e=e.toLowerCase(),"true"===e)return!0;if("false"===e)return!1}return Boolean(e)}function wi(t){return ol(t)?bc(t):void 0}function ao(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function cS(t){const e=ao(t);if(S(e))throw new m("Expected a valid number.");return e}function os(t){return"string"==typeof t?t:""}function lS(t,e){if(!Fu(t))return[];const i=0|t.length,s=new Array(i);for(let n=0;n<i;n++)s[n]=e(t[n]);return s}function Ta(t,e){let i;return i=Fu(t)?lS(t,e):e(t),i}r();var dS=[je.XR,je.qR,gs.da];function fS(t){let e;const i=t.mC.map((t=>t.wa));return i.item=e=>{const i=0|e,s=t.wC(i);return s&&s.wa||void 0},i.addEventListener=(t,i)=>{e.bn(t,i)},i.removeEventListener=(t,i)=>{e.vn(t,i)},e=new gm(i),t.bn(dS,(t=>e._o(t.wa))),i}r();var Pe=function(t){return t[t.IC=0]="IC",t[t.RC=1]="RC",t[t.DC=2]="DC",t[t.NC=3]="NC",t[t.MC=4]="MC",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.LC=7]="LC",t}({});function _S(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function vS(){}function xi(t){const e=[gs.dC,gs.da,gs.fC,gs.vC,gs.QUALITY_UNAVAILABLE];let i;const s={get activeQuality(){return t.BC&&t.BC.wa},get enabled(){return t.Rt},set enabled(e){t.Rt=bc(e)},get id(){return t.o},get uid(){return t.OC},get kind(){return t.Lt},get label(){return t.Ch},set label(e){t.Ch=os(e)},get accessibility(){var e,i;return null!=(i=null==(e=t.FC)?void 0:e.map(_S))?i:[]},get language(){return t.gs},get qualities(){return t.VC.wa},set targetQuality(e){let i;i=e?function(t,e){const i=[];for(const s of t.VC.mC)for(const t of e)s.wa===t&&i.push(s);return i}(t,Qc(e)?e:[e]):[],i.length>0?t.WC=i:t.WC=void 0},get targetQuality(){if(t.WC)return 1===t.WC.length?t.WC[0].wa:t.WC.map((t=>t.wa))},addEventListener(t,e){const s=Ta(t,os);i.bn(s,e)},removeEventListener(t,e){const s=Ta(t,os);i.vn(s,e)}};return i=new gm(s),t.bn(e,(t=>i._o(t.wa))),w.defineProperty(s,"constructor",{value:vS}),s}function gS(){}function mS(t){const e=fS(t);return w.defineProperty(e,"constructor",{value:gS}),e}var pS=class extends iS{ka(){return mS(this)}TC(t){return t.Rt}};r(),r(),r();var Ui=function(t){return t.Mh="disabled",t.GC="hidden",t.Qn="showing",t}({});function pu(t){if("string"==typeof t){const e=t.toLowerCase();switch(e){case"disabled":case"hidden":case"showing":return e}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}r();var bo=function(t){return t.fa="error",t}({});function wS(){}function Yh(t){const e=[gs.da,gs.dC,gs.KR,gs.QR,gs.eC,gs.sC,gs.$R,gs.rC,gs.aC,gs.cC],i=[bo.fa];let s;const n={get kind(){return t.Lt},get label(){return t.Ch},set label(e){t.Ch=os(e)},get language(){return t.gs},get id(){return t.o},get uid(){return t.OC},get inBandMetadataTrackDispatchType(){return t.ZC},get mode(){return t.LE},set mode(e){e!==Ui.Qn&&e!==Ui.GC&&e!==Ui.Mh||t.HC(e)},get forced(){return Boolean(t.XC)},get accessibility(){var e,i;return null!=(i=null==(e=t.FC)?void 0:e.map(_S))?i:[]},get type(){return t.zw},get readyState(){return t.aR},get cues(){return t.LE===Ui.Mh?null:t.L.wa},get activeCues(){return t.LE===Ui.Mh?null:t.q.wa},get src(){return t.zC||""},addEventListener(t,e){const i=Ta(t,os);s.bn(i,e)},removeEventListener(t,e){const i=Ta(t,os);s.vn(i,e)}};return s=new gm(t),t.bn(e,(t=>s._o(t.wa))),t.bn(i,(t=>s._o(t))),w.defineProperty(n,"constructor",{value:wS}),n}function yS(){}function bS(t){const e=fS(t);return w.defineProperty(e,"constructor",{value:yS}),e}var yt=class extends iS{ka(){return bS(this)}TC(t){return t.LE===Ui.Qn}};r(),r();var AS=class extends So{get qC(){}get YC(){}get KC(){}get jC(){return!1}get QC(){}get wa(){var t;return null!=(t=this.eu)?t:this.eu=SS(this)}JC(){}};function SS(t){return{goLive:()=>t.JC(),get isLive(){return t.jC},get latencies(){return t.qC},get videoLatencies(){return t.YC},get audioLatencies(){return t.KC},get manifest(){return t.QC},addEventListener(e,i){t.bn(kS(e),i)},removeEventListener(e,i){t.vn(kS(e),i)}}}var TS=["golive","latencyrecoveryseek"];function kS(t){const e=Ta(t,os);return(oi(e)?[e]:e).filter((t=>fh(TS,t)))}var Kc=class extends So{set bC(t){const e=this.AC;t!==e&&(e&&this.SC(e),t&&this.kC(t),this.AC=t)}get bC(){return this.AC}get wa(){return this.eu||(this.eu=SS(this)),this.eu}kC(t){t.bn(TS,this.Ds)}SC(t){t.vn(TS,this.Ds)}JC(){var t;null==(t=this.AC)||t.JC()}get qC(){var t;return null==(t=this.AC)?void 0:t.qC}get YC(){var t;return null==(t=this.AC)?void 0:t.YC}get KC(){var t;return null==(t=this.AC)?void 0:t.KC}get jC(){return!!this.AC&&this.AC.jC}get QC(){var t;return null==(t=this.AC)?void 0:t.QC}yn(){this.Ro(),this.AC&&this.SC(this.AC),this.AC=void 0}constructor(){super(),this.AC=void 0,this.eu=void 0,this.AC=void 0}};r(),r();var ES="8E80B9CE",xS=function(t){return t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled",t}({});function IS(t){return{appID:t&&t.appID?os(t.appID):ES}}r(),r();var Ih=function(t){return t.SE="",t.$C="anonymous",t.tP="use-credentials",t}({}),ti=function(t){return t.eP="application/dash+xml",t.iP="application/vnd.apple.mpegurl",t.sP="application/x-mpegurl",t.nP="video/mp4",t.rP="application/vnd.theoplayer.hesp+json",t.oP="application/vnd.theo.hesp+json",t.hP="millicast",t.aP="theolive",t}({});function RS(t){if(null!==t)return t}function CS(t){const e={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:RS(t.streamActivityMonitorID),adTagParameters:Vt(t.adTagParameters)?t.adTagParameters:{},authToken:RS(t.authToken),omidAccessModeRules:RS(t.omidAccessModeRules)};if(t.enableNonce&&(e.enableNonce=!0),"vod"===(null==t?void 0:t.availabilityType)||function(t){const e=t;return Boolean(e.videoID&&e.contentSourceID)}(t)){const i=t.videoID,s=t.contentSourceID;return i?s?ne({},e,{availabilityType:"vod",videoID:i,contentSourceID:s}):void As.aw("A VOD DAI configuration was provided without valid contentSourceID which is required."):void As.aw("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const e=t;return Boolean(e.assetKey)}(t)){const i=t.assetKey;return i?ne({},e,{availabilityType:"live",assetKey:i}):void As.aw("A Live DAI configuration was provided without valid assetKey which is required.")}As.aw("A DAI configuration was provided without a valid availabilityType which is required.")}function PS(t){return"google-dai"===t.integration?CS(t):ne({},t,{integration:String(t.integration)})}r(),r(),r(),r(),r(),r();var Tu,DS="titanium",NS="conax",MS="ezdrm",LS="irdeto",BS="vudrm",OS="verimatrix",yr="keyos",FS="drmtoday",VS="expressplay",WS="azure",US="xstream",GS="vimond",ZS="axinom",HS="uplynk",XS="comcast",zS="custom";function qS(t,e){if(null==t)return{};var i,s,n={},r=w.keys(t);for(s=0;s<r.length;s++)i=r[s],e.indexOf(i)>=0||(n[i]=t[i]);return n}function YS(t){return ol(t.token&&t.deviceId)}function KS(t){var e;const i=null==(e=t.fairplay)?void 0:e.headers;return void 0!==i&&ol(i.PreAuthorization)}function jS(t){const e=t;return YS(e)&&""!==e.token&&""!==e.deviceId&&!KS(e)}r(),r(),r(),r(),r(),function(t){t.uP=!1,t.cP=!1,t.lP=!1,t.dP=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.fP=!1,t._P=!1,t.LOG_LCEVC_DETAILS=!1}(Tu||(Tu={})),r();var kh=class extends Z{get name(){return"ContentProtectionError"}constructor(t,e,i,s,n,r,o,h){super(t,e,i),this.url=s,this.status=n,this.statusText=r,this.response=o,this.systemCode=h}};r();var QS=class{get vP(){return this.gP}get _T(){return this.aT}mP(t){return function(t){const e=t.onCertificateRequest;if(void 0!==e&&"function"!=typeof e)throw new g("ContentProtectionIntegration.onCertificateRequest is not a function.");const i=t.onCertificateResponse;if(void 0!==i&&"function"!=typeof i)throw new g("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new g("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new g("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new g("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.pP.build(t))}constructor(t,e,i){this.gP=t,this.aT=e,this.pP=i}};r();var JS=function(t){return t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED",t}({}),$S=class{registerContentProtectionIntegration(t,e,i){switch(this.wP(t,e,i)){case JS.FAILED:throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+e+".");case JS.OVERRIDDEN:{const i=yT(e);As.aw("Warning: Overwriting an earlier registered integration for "+t+" and "+i+".");break}case JS.SUCCEEDED:yT(e);0;break}}wP(t,e,i){const s=yT(e);if(!s)return JS.FAILED;let n=JS.SUCCEEDED;for(const e of this.yP.slice())e.vP===t&&e._T===s&&(n=JS.OVERRIDDEN,_e(this.yP,e));return this.yP.push(new QS(t,s,i)),n}bP(t,e){return void 0!==this.AP(t,e)}SP(t,e,i){const s=this.AP(t,e);if(!s)throw m("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+e);return s.mP(i)}AP(t,e){for(const i of this.yP)if(i.vP===t&&(!e||i._T===e))return i}constructor(){this.yP=[]}};$S.TP=new $S,r(),r();var Ai=function(t){return t.kP="moov",t.EP="mvhd",t.xP="trak",t.IP="tkhd",t.RP="mdia",t.CP="mdhd",t.PP="hdlr",t.DP="minf",t.NP="stbl",t.MP="stsd",t.LP="stsc",t.BP="mvex",t.OP="trex",t.FP="avc1",t.VP="avcC",t.WP="hev1",t.UP="hvc1",t.GP="hvcC",t.ZP="vp09",t.HP="vpcC",t.zP="av01",t.qP="av1C",t.YP="dvcC",t.KP="dvvC",t.jP="dvwC",t.QP="dac3",t.JP="dec3",t.$P="dvav",t.tD="dva1",t.eD="dvhe",t.iD="dvh1",t.sD="ac-3",t.nD="ec-3",t.rD="colr",t.oD="pasp",t.hD="mp4a",t.aD="esds",t.uD="fLaC",t.cD="dfLa",t.lD="wvtt",t.dD="vttC",t.fD="vlab",t._D="enca",t.vD="encv",t.gD="moof",t.mD="mfhd",t.pD="traf",t.wD="tfhd",t.yD="trun",t.bD="tfdt",t.SD="senc",t.TD="mdat",t.kD="pssh",t.ED="emsg",t.xD="sidx",t.RD="styp",t.CD="ftyp",t.PD="sinf",t.DD="frma",t.ND="schi",t.MD="tenc",t}({}),tT=function(t){return t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof",t}({}),to=function(t){return t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF",t}({}),br=function(t){return t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT",t}({});r();var mu=class t{LD(){return hc(this.$k,this.BD)}OD(){return dn(this.$k,this.BD)}FD(){return function(t,e,i){void 0===i&&(i=!1);const s=t.getInt16(e.nc,i);return e.Pb(2),s}(this.$k,this.BD)}VD(){return $e(this.$k,this.BD)}WD(){return function(t,e,i){void 0===i&&(i=!1);const s=t.getInt32(e.nc,i);return e.Pb(4),s}(this.$k,this.BD)}UD(){return no(this.$k,this.BD)}GD(t){return $(this.$k,this.BD,t)}ZD(t){return function(t,e,i){const s=[];for(let n=0;n<i;n++)s.push($e(t,e));return s}(this.$k,this.BD,t)}HD(t){return il(this.$k,this.BD,t)}XD(){return Dn(this.$k,this.BD)}zD(t){this.BD.Pb(t)}Nb(){return new t(this.$k,this.BD.Nb())}constructor(t,e){this.$k=t,this.BD=e}};r(),r();function eT(t,e){return t.zw===e}function Rn(t,e){for(const i of t)if(eT(i,e))return i}var iT=class extends dl{get name(){return"DataIncompleteError"}constructor(t,e){super(),this.qD=t,this.YD=e}},ci=class t{static KD(e){const i=e.$k,s=e.BD,n=t.jD(i,s,!1);if(!n.QD)throw new iT(s.nc,n.m);return n.m}static jD(e,i,s){const n=[];for(;i.nc<e.byteLength;){const r=t.JD(e,i,s);if(!r.QD)return{QD:!1,m:n};n.push(r.$D)}return{QD:!0,m:n}}static tN(e,i){const s=t.JD(e,i,!1);if(!s.QD)throw new iT(i.nc);return s.$D}static eN(e,i){const s=e.$k,n=e.BD;for(;n.nc<s.byteLength;){const e=t.JD(s,n,!1);if(!e.QD)return;if(e.$D.zw===i)return e.$D}}static JD(e,i,s){const n=i.nc,r=t.iN(e,i);if(!r.QD)return r;const o=r.sN;let h=o.Ob;if(0===h){if(s)return i.Db(n),{QD:!1,nN:1/0};h=e.byteLength-n}const a=n+h;if(a>e.byteLength){const t=a;return i.Db(n),{QD:!1,nN:t}}const u={zw:o.zw,nc:n,$k:new mu(La(e,n,a),new er(o.rN))};return i.Db(a),{QD:!0,$D:u}}static iN(t,e){const i=e.nc;if(!Hm(t,e,8)){return{QD:!1,nN:e.nc+8}}let s=$e(t,e),n=il(t,e,4);if(1===s){if(!Hm(t,e,8)){const t=e.nc+8;return e.Db(i),{QD:!1,nN:t}}s=no(t,e).toNumber()}if("uuid"===n){if(!Hm(t,e,16)){const t=e.nc+16;return e.Db(i),{QD:!1,nN:t}}n=il(t,e,16)}return{QD:!0,sN:{zw:n,Ob:s,rN:e.nc-i}}}static oN(t,e,i){const s=t.$k,n=t.BD;let r=fi(Lr(s),n.nc,s.byteLength);return i&&(r=cc(r)),n.Pb(r.byteLength),{zw:e,$k:r}}static hN(e,i,s){const n=e.VD(),{version:r,flags:o}=Jc(n);return{zw:i,aN:r,uN:o,$k:t.oN(e,i,s).$k}}};function _c(t,e){const i=Ti(t,e);if(!i)throw new m("Missing "+e+" atom");return i}function Ti(t,e){for(const i of t)if(i.zw===e)return i.$k}function sT(t,e){const i=[];for(const s of t)s.zw===e&&i.push(s.$k);return i}function Jc(t){return{version:t>>24,flags:new Vm(16777215&t)}}var Es=class t{static cN(e){const i=[],s=ci.KD(new mu(e,new er));for(const e of s){const s=t.lN(e);s&&i.push(s)}return i}static dN(t){return ci.jD(t,new er,!1).m.some(this.fN)}static _N(e){return sT(ci.KD(new mu(e,new er)),Ai.kD).map(t.vN)}static gN(e){return sT(ci.KD(e.$k),Ai.kD).map(t.vN)}static fN(t){return t.zw===Ai.CD||t.zw===Ai.RD||t.zw===Ai.kP||t.zw===Ai.gD||t.zw===Ai.TD||t.zw===Ai.xD||t.zw===Ai.ED}static lN(e){switch(e.zw){case Ai.kP:return t.mN(e.$k);case Ai.gD:return t.pN(e.$k,e.nc);case Ai.TD:return t.wN(e.$k);case Ai.xD:return t.yN(e.$k);case Ai.ED:return t.bN(e.$k)}}static mN(e){const i=ci.KD(e),s=_c(i,Ai.EP),n=sT(i,Ai.xP),r=Ti(i,Ai.BP),o=t.AN(s),h=n.map(t.SN),a=r?t.TN(r):void 0;return{zw:Ai.kP,sN:o,Z:h,kN:a}}static AN(t){const e=t.VD(),{version:i,flags:s}=Jc(e),n=1===i?t.UD():t.VD(),r=1===i?t.UD():t.VD(),o=t.VD(),h=1===i?t.UD():t.VD(),a=t.VD(),u=t.OD()>>8;t.zD(2),t.zD(8);const c=t.ZD(9);t.zD(24);const l=t.VD();return{zw:Ai.EP,aN:i,uN:s,EN:n,xN:r,RN:o,ct:h,CN:a,yR:u,PN:c,DN:l}}static SN(e){const i=ci.KD(e),s=_c(i,Ai.IP),n=_c(i,Ai.RP),r=t.NN(s),o=t.MN(n);return{zw:Ai.xP,sN:r,LN:o}}static NN(t){const e=t.VD(),{version:i,flags:s}=Jc(e),n=1===i?t.UD():t.VD(),r=1===i?t.UD():t.VD(),o=t.VD();t.zD(4);const h=1===i?t.UD():t.VD();t.zD(8);const a=t.FD(),u=t.FD(),c=t.FD()/256;t.zD(2);const l=t.ZD(9),d=t.VD()/65536,f=t.VD()/65536;return{zw:Ai.IP,BN:s.Mb(1),ON:s.Mb(2),FN:s.Mb(4),EN:n,xN:r,VN:o,ct:h,WN:a,UN:u,yR:c,PN:l,ji:d,Ti:f}}static MN(e){const i=ci.KD(e),s=_c(i,Ai.CP),n=_c(i,Ai.PP),r=_c(i,Ai.DP),o=t.GN(s),h=t.ZN(n),a=t.HN(r);return{zw:Ai.RP,sN:o,XN:h,zN:a}}static GN(t){const e=t.VD(),{version:i,flags:s}=Jc(e),n=1===i?t.UD():t.VD(),r=1===i?t.UD():t.VD(),o=t.VD(),h=1===i?t.UD():t.VD();t.OD();return t.zD(2),{zw:Ai.CP,aN:i,uN:s,EN:n,xN:r,RN:o,ct:h}}static ZN(t){const e=t.VD(),{version:i,flags:s}=Jc(e);t.zD(4);const n=t.HD(4);t.zD(12);const r=t.XD();return{zw:Ai.PP,aN:i,uN:s,qN:n,l:r}}static HN(e){const i=_c(ci.KD(e),Ai.NP),s=t.YN(i);return{zw:Ai.DP,KN:s}}static YN(e){const i=_c(ci.KD(e),Ai.MP),s=t.jN(i);return{zw:Ai.NP,QN:s}}static jN(e){const i=e.VD(),{version:s,flags:n}=Jc(i),r=(e.VD(),[]),o=ci.KD(e);for(const e of o){const i=t.JN(e.$k,e.zw);i&&r.push(i)}return{zw:Ai.MP,aN:s,uN:n,$N:r}}static JN(e,i){let s=t.tM(e,i);return s||(s=t.eM(e,i),s||(i===Ai.lD?t.iM(e):void 0))}static tM(e,i){return i===Ai.hD?t.sM(e):i===Ai.uD||i===Ai.uD.toLowerCase()||i===Ai.uD.toUpperCase()?t.nM(e):i===Ai._D?t.rM(e):i===Ai.sD?t.oM(e):i===Ai.nD?t.hM(e):void 0}static eM(e,i){return i===Ai.FP?t.aM(e):i===Ai.WP||i===Ai.UP?t.uM(e,i):i===Ai.ZP?t.cM(e,i):i===Ai.zP?t.lM(e,i):i===Ai.vD?t.dM(e):i===Ai.$P||i===Ai.tD||i===Ai.eD||i===Ai.iD?t.fM(e,i):void 0}static _M(t,e){t.zD(6);return{zw:e,vM:t.OD()}}static gM(e,i){const s=t._M(e,i);e.zD(8);const n=e.OD(),r=e.OD();e.zD(2),e.zD(2);return ne({},s,{mM:n,pM:r,wM:e.VD()>>>16})}static yM(e,i){const s=t._M(e,i);e.zD(2),e.zD(2),e.zD(12);const n=e.OD(),r=e.OD(),o=e.VD(),h=e.VD();e.zD(4);const a=e.OD();e.zD(32);const u=e.OD();return e.zD(2),ne({},s,{ji:n,Ti:r,bM:o,AM:h,SM:a,TM:u})}static sM(e){const i=t.gM(e,Ai.hD),s=_c(ci.KD(e),Ai.aD);return ne({},i,{kM:t.EM(s)})}static nM(e){const i=t.gM(e,Ai.uD),s=_c(ci.KD(e),Ai.cD);return ne({},i,{xM:t.IM(s)})}static iM(e){const i=t._M(e,Ai.lD),s=ci.KD(e),n=_c(s,Ai.dD),r=t.RM(n),o=Ti(s,Ai.fD);return ne({},i,{CM:r,PM:o?t.DM(o):void 0})}static RM(t){return{zw:Ai.dD,kd:t.XD()}}static DM(t){return{zw:Ai.fD,Ch:t.XD()}}static EM(t){return ci.hN(t,Ai.aD,!0)}static IM(t){return ci.hN(t,Ai.cD,!0)}static aM(e){const i=t.yM(e,Ai.FP),s=ci.KD(e),n=_c(s,Ai.VP),r=Ti(s,Ai.oD);return ne({},i,{NM:t.MM(n),LM:r?t.BM(r):void 0})}static uM(e,i){const s=t.yM(e,i),n=_c(ci.KD(e),Ai.GP);return ne({},s,{OM:t.FM(n)})}static cM(e,i){const s=t.yM(e,i),n=_c(ci.KD(e),Ai.HP);return ne({},s,{VM:t.WM(n)})}static lM(e,i){const s=t.yM(e,i),n=ci.KD(e),r=_c(n,Ai.qP),o=t.UM(r),h=Ti(n,Ai.rD);return ne({},s,{GM:o,ZM:h?t.HM(h):void 0})}static dM(e){const i=e.Nb(),s=t.yM(e,Ai.vD),n=_c(ci.KD(e),Ai.PD),r=t.XM(n);return ne({},s,{zM:t.eM(i,r.YM.qM),KM:r})}static fM(e,i){const s=t.yM(e,i),n=ci.KD(e);return ne({},s,{jM:t.QM(n)})}static oM(e){const i=t.gM(e,Ai.sD),s=_c(ci.KD(e),Ai.QP);return ne({},i,{JM:t.$M(s)})}static hM(e){const i=t.gM(e,Ai.nD),s=_c(ci.KD(e),Ai.JP);return ne({},i,{tL:t.eL(s)})}static rM(e){const i=e.Nb(),s=t.gM(e,Ai._D),n=_c(ci.KD(e),Ai.PD),r=t.XM(n);return ne({},s,{zM:t.tM(i,r.YM.qM),KM:r})}static XM(e){const i=ci.KD(e),s=_c(i,Ai.DD),n=t.iL(s),r=_c(i,Ai.ND),o=t.sL(r);return{zw:Ai.PD,YM:n,nL:o}}static iL(t){const e=t.HD(4);return{zw:Ai.DD,qM:e}}static sL(e){const i=_c(ci.KD(e),Ai.MD),s=t.rL(i);return{zw:Ai.ND,oL:s}}static rL(t){const e=$e(t.$k,t.BD),{version:i,flags:s}=Jc(e),n=t.LD()>0,r=t.LD(),o=t.GD(16);return{zw:Ai.MD,aN:i,uN:s,hL:n,aL:r,uL:o}}static MM(t){return ci.oN(t,Ai.VP,!0)}static FM(t){return ci.oN(t,Ai.GP,!0)}static QM(t){const e=Ti(t,Ai.YP);if(void 0!==e)return ci.oN(e,Ai.YP,!0);const i=Ti(t,Ai.KP);if(void 0!==i)return ci.oN(i,Ai.KP,!0);const s=Ti(t,Ai.jP);if(void 0!==s)return ci.oN(s,Ai.jP,!0);throw m("Error parsing Dolby Vision configuration box.")}static $M(t){return ci.oN(t,Ai.QP,!0)}static eL(t){return ci.oN(t,Ai.JP,!0)}static WM(t){return ci.oN(t,Ai.HP,!0)}static UM(t){return ci.oN(t,Ai.qP,!0)}static HM(t){const e=t.HD(4);switch(e){case"nclx":return{cL:tT.ON_SCREEN_COLOURS,lL:t.OD(),dL:t.OD(),fL:t.OD(),_L:0!=(128&t.LD())};case"rICC":return{cL:tT.RESTRICTED_ICC_PROFILE};case"prof":return{cL:tT.UNRESTRICED_ICC_PROFILE};default:throw m("Could not parse ColourInformationBox: unknown type '"+e+"'.")}}static BM(t){const e=t.VD(),i=t.VD();return{zw:Ai.oD,vL:e,gL:i}}static TN(e){const i=sT(ci.KD(e),Ai.OP).map(t.mL);return{zw:Ai.BP,Z:i}}static mL(t){const e=t.VD(),{version:i,flags:s}=Jc(e),n=t.VD(),r=t.VD(),o=t.VD(),h=t.VD(),a=t.VD();return{zw:Ai.OP,aN:i,uN:s,VN:n,pL:r,wL:o,yL:h,bL:a}}static pN(e,i){const s=ci.KD(e),n=_c(s,Ai.mD),r=sT(s,Ai.pD),o=t.AL(n),h=r.map(t.SL);return{zw:Ai.gD,TL:i,sN:o,Z:h}}static AL(t){const e=t.VD(),{version:i,flags:s}=Jc(e),n=t.VD();return{zw:Ai.mD,aN:i,uN:s,kL:n}}static SL(e){const i=ci.KD(e),s=_c(i,Ai.wD),n=sT(i,Ai.yD),r=Ti(i,Ai.bD),o=t.EL(s),h=n.map((e=>t.xL(e,o))),a=r?t.IL(r):void 0;return{zw:Ai.pD,sN:o,RL:h,CL:a}}static EL(t){const e=t.VD(),{version:i,flags:s}=Jc(e),n=t.VD(),r=s.Mb(to.BASE_DATA_OFFSET_PRESENT)?t.UD():void 0,o=s.Mb(to.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.VD():void 0,h=s.Mb(to.DEFAULT_SAMPLE_DURATION_PRESENT)?t.VD():void 0,a=s.Mb(to.DEFAULT_SAMPLE_SIZE_PRESENT)?t.VD():void 0,u=s.Mb(to.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.VD():void 0;return{zw:Ai.wD,aN:i,uN:s,VN:n,PL:r,DL:o,wL:h,yL:a,bL:u}}static xL(e,i){const s=e.VD(),{version:n,flags:r}=Jc(s),o=e.VD(),h=r.Mb(br.DATA_OFFSET_PRESENT)?e.WD():void 0,a=r.Mb(br.FIRST_SAMPLE_FLAGS_PRESENT)?e.VD():void 0,u=[];for(let s=0;s<o;s++){const o=t.NL(e,r,n,i);0===s&&void 0!==a&&(o.uN=a),u.push(o)}return{zw:Ai.yD,aN:n,uN:r,ML:o,TL:h,LL:a,BL:u}}static NL(t,e,i,s){return{ct:e.Mb(br.SAMPLE_DURATION_PRESENT)?t.VD():s.wL,Ob:e.Mb(br.SAMPLE_SIZE_PRESENT)?t.VD():s.yL,uN:e.Mb(br.SAMPLE_FLAGS_PRESENT)?t.VD():s.bL,OL:e.Mb(br.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===i?t.VD():t.WD():void 0}}static bN(t){const e=t.$k,i=t.BD,s=$e(e,i),{version:n,flags:r}=Jc(s);if(1===n){const t=$e(e,i),s=no(e,i),o=$e(e,i),h=$e(e,i),a=jm(e,i),u=jm(e,i),c=Hc(Lr(e),i.nc,e.byteLength);return i.Pb(c.byteLength),{zw:Ai.ED,aN:n,uN:r,FL:a,Fx:u,RN:t,VL:s,WL:o,o:h,UL:c}}{const t=jm(e,i),s=jm(e,i),o=$e(e,i),h=$e(e,i),a=$e(e,i),u=$e(e,i),c=Hc(Lr(e),i.nc,e.byteLength);return i.Pb(c.byteLength),{zw:Ai.ED,uN:r,aN:n,FL:t,Fx:s,RN:o,GL:h,WL:a,o:u,UL:c}}}static wN(t){return ci.oN(t,Ai.TD,!1)}static vN(e){const i=e.$k,s=e.BD,n=cc(Lr(i)).buffer,r=$e(i,s),{version:o,flags:h}=Jc(r),a=t.ZL(i,s),u=[];if(o>0){const t=$e(i,s);for(let e=0;e<t;e++){const t=$(i,s,16);u.push(t)}}const c=$e(i,s),l=new j(n,s.nc,c);return s.Pb(i.byteLength),{zw:Ai.kD,aN:o,uN:h,HL:a,XL:u,zL:c,$k:l,qL:n}}static ZL(t,e){let i="";for(let s=0;s<4;s++){const s=hc(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=hc(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=hc(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=hc(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<6;s++){const s=hc(t,e).toString(16);i+=1===s.length?"0"+s:s}return i.toLowerCase()}static yN(t){const e=t.$k,i=t.BD,s=$e(e,i),{version:n,flags:r}=Jc(s),o=$e(e,i),h=$e(e,i);let a,u;0===n?(a=po.fromBits($e(e,i),0,!0),u=po.fromBits($e(e,i),0,!0)):(a=no(e,i),u=no(e,i)),i.Pb(2);const c=dn(e,i),l=[];for(let t=0;t<c;t+=1){const t=$e(e,i),s=t>>31&1,n=2147483647&t,r=$e(e,i),o=$e(e,i),h=o>>31&1,a=o>>28&7,u=268435455&o;l.push({YL:s,KL:n,ct:r,jL:h,QL:a,JL:u})}return{zw:Ai.xD,aN:n,uN:r,$L:o,RN:h,tB:a,eB:u,iB:c,sB:l}}static IL(t){const e=t.$k,i=t.BD,s=$e(e,i),{version:n,flags:r}=Jc(s);let o;return o=0===n?po.fromBits($e(e,i),0,!0):no(e,i),{zw:Ai.bD,aN:n,uN:r,CL:o}}},nT={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function rT(t){if(!t)return!0;const e=t.licenseAcquisitionURL,i=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,o=t.queryParameters;return!(e||i||s||n||r||o)}function oT(t){return t&&void 0!==t.licenseAcquisitionURL}var hT=oT,aT=oT;function uT(t){if(!t)return!0;if(fT(t))return!1;const e=t.fairplay,i=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return rT(e)&&rT(i)&&rT(s)&&void 0===n&&rT(r)}function cT(t){const e=jS(t),i=function(t){var e;const i=t;return KS(i)&&""!==(null==(e=i.fairplay)?void 0:e.headers.PreAuthorization)&&!YS(i)}(t);return(!e||!i)&&(e||i)}function lT(t){return t.integration===LS}function dT(t){const e=t;if(!e)return!1;if(uT(e))return!1;const i=e.fairplay,s=e.playready,n=e.widevine,r=e.clearkey;if(fT(t))return!0;if(i&&!function(t){const e=t;return e&&(void 0!==e.certificateURL||void 0!==e.certificate)}(i))return!1;if(s&&!hT(s))return!1;if(n&&!aT(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(e.integration){if($S.TP.bP(e.integration))return!0;switch(e.integration){case DS:if(!function(t){const e=t,i=e.integration===DS;return i&&(_T(t)||vT(t))}(t))return!1;break;case BS:if(!gT(t))return!1;break;case OS:if(!function(t){const e=t;return e.integration===OS}(t))return!1;break;case LS:if(!lT(t))return!1;break;case NS:if(!cT(t))return!1;break;case MS:if(!function(t){const e=t;return e.integration===MS}(t))return!1;break;case yr:if(!fT(t))return!1;break;case FS:if(!function(t){const e=t;return e.integration===FS&&(void 0!==e.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(e))}(t))return!1;break;case VS:if(!function(t){const e=t;return e.integration===VS}(t))return!1;break;case US:if(!mT(t))return!1;break;case GS:if(!function(t){return t.integration===GS}(t))return!1;break;case ZS:if(!pT(t))return!1;break;case WS:if(!function(t){const e=t;return e.integration===WS&&void 0!==e.token}(t))return!1;break;case HS:if(!function(t){const e=t;return e.integration===HS}(t))return!1;break;case XS:if(!function(t){const e=t;return e&&ol(e.releasePid)&&ol(e.accountId)&&ol(e.token)}(t))return!1;break;case zS:return!0;default:return!1}}return!0}function fT(t){return t.integration===yr}function _T(t){return void 0!==t.authToken}function vT(t){const e=t;return void 0!==e.accountName&&void 0!==e.customerName&&void 0!==e.portalId}function gT(t){const e=t;return e.integration===BS&&void 0!==e.token}function mT(t){const e=t;return e&&e.integration===US&&oi(e.ticketAcquisitionURL)&&oi(e.streamId)}function pT(t){const e=t;return e.integration===ZS&&void 0!==e.token}function wT(t,e){const i=e[t];var s;const n=null!=(s=null==i?void 0:i.licenseAcquisitionURL)?s:nT[t];var r;const o=null!=(r=null==i?void 0:i.customdata)?r:e.customdata,h=o?{customData:o}:{};var a;const u=ne({},null!=(a=null==i?void 0:i.headers)?a:{},h),c=null!=i?i:{},{customdata:l}=c;return ne({},qS(c,["customdata"]),{licenseAcquisitionURL:n,headers:u})}function yT(t){switch(t.toLowerCase()){case"widevine":case Vg:return Vg;case"playready":case Og:return Og;case"fairplay":case Zi:return Zi}}function bT(t,e){switch(t){case Jn:return function(t){const e={},i=Es._N(new DataView(t));for(const t of i)e[t.HL]=t.qL;return e}(e);case Ng:case Mg:return function(t){return{[zg]:t}}(e);case Lg:return function(t){return{[Hg]:t}}(e);default:throw new Z(Ci.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}async function AT(t,e){return void 0===e&&(e=!1),!(!t.widevine||!await As.ww())||(!(!t.playready||!await As.pw())||(!(!t.clearkey||!await As.gw())||!(e||!t.fairplay||!await As.mw())))}function ll(t,e,i){const s=function(t,e,i){var s;const{useCredentials:n,crossOrigin:r}=function(t,e){let i=Ih.SE;return t.useCredentials?i=Ih.tP:t.crossOrigin&&(i=qT(t.crossOrigin)),i===Ih.SE&&e&&e.vr&&e.vr[360]&&(i=Ih.$C),{useCredentials:i===Ih.tP,crossOrigin:i}}(t,e);let o=t.liveOffset;ol(o)||(o=i&&ol(i.liveOffset)?i.liveOffset:void 0);let h=t.timeServer;ol(h)||(h=e&&ol(e.timeServer)?e.timeServer:void 0);let a=t.hlsDateRange;ol(a)||(a=i&&ol(i.hlsDateRange)?Boolean(i.hlsDateRange):void 0);const u=Boolean(t.experimentalRendering),c=Boolean(t.nativeUiRendering),l=Boolean(t.lowLatency),d=Boolean(t.useNativePlayback),f=Boolean(t.useManagedMediaSource),_=ol(t.dash)?TT(t.dash):void 0,v=ol(t.hls)?kT(t.hls):void 0,g=RT(IT(t.abr),null==i?void 0:i.abr),m=wi(t.lcevc),p=ol(t.ignoreEmbeddedTextTrackTypes)?rk(t.ignoreEmbeddedTextTrackTypes):[];var w;const y=GT(null!=(w=t.seamlessSwitchStrategy)?w:null==(s=t.dash)?void 0:s.useSeamlessPeriodSwitch),b=WT(t.latencyConfiguration);return{crossOrigin:r,useCredentials:n,liveOffset:o,timeServer:h,hlsDateRange:a,experimentalRendering:u,nativeUiRendering:c,lowLatency:l,useNativePlayback:d,useManagedMediaSource:f,dash:_,hls:v,abr:g,lcevc:m,ignoreEmbeddedTextTrackTypes:p,seamlessSwitchStrategy:y,latencyConfiguration:b}}(t,e,i),n=RS(t.src);let r=t.type;r||(r=t.src?Au(t.src):void 0);const o=function(t,e){let i;i=ol(t.contentProtection)?t.contentProtection:ol(t.drm)?t.drm:ol(e)&&ol(e.contentProtection)?e.contentProtection:ol(e)&&ol(e.drm)?e.drm:void 0;return ST(i)}(t,e);return ne({},s,{src:n,type:r,contentProtection:o,ssai:ol(t.ssai)?PS(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function ST(t){return dT(t)&&t.integration&&t.integration===yr?function(t){const e=wT(O.Uw,t),i=wT(O.Ww,t),s=t[O.Hw]&&wT(O.Hw,t);return ne({integration:"keyos",widevine:e,playready:i},s?{fairplay:s}:{})}(t):t}function TT(t){return{useSeamlessPeriodSwitch:GT(null==t?void 0:t.useSeamlessPeriodSwitch),needsTimescaleShifting:wi(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?ao(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:wi(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:wi(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:wi(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards),segmentRelativeVttTiming:wi(null==t?void 0:t.segmentRelativeVttTiming),forceRecreateMediaSourceOnAudioSwitch:wi(null==t?void 0:t.forceRecreateMediaSourceOnAudioSwitch)}}function kT(t){return{discontinuityAlignment:ET(null==t?void 0:t.discontinuityAlignment),delaySubtitlePreload:bc(null==t?void 0:t.delaySubtitlePreload)}}function ET(t){if(!t||!oi(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}r(),r(),r(),r();var Fo=function(t){return t.wE="audio",t.yE="video",t.Rk="text",t.bE="image",t.oE="unknown",t}({});function xT(t){return"audio"===t||"video"===t}function IT(t){if(!ol(t))return;return CT(lS(null==t?void 0:t.preferredAudioCodecs,os),lS(null==t?void 0:t.preferredVideoCodecs,os),wi(null==t?void 0:t.restrictToPlayerSize))}function RT(t,e){if(!ol(t)&&!ol(e))return;var i;return CT(PT(null==t?void 0:t.preferredAudioCodecs,null==e?void 0:e.preferredAudioCodecs),PT(null==t?void 0:t.preferredVideoCodecs,null==e?void 0:e.preferredVideoCodecs),null!=(i=null==t?void 0:t.restrictToPlayerSize)?i:null==e?void 0:e.restrictToPlayerSize)}function CT(t,e,i){if(0!==t.length||0!==e.length||void 0!==i)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===e.length?void 0:e,restrictToPlayerSize:i}}function PT(t,e){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=e?e:[]}function DT(t,e){if(void 0!==e)switch(t){case Fo.yE:return e.preferredVideoCodecs;case Fo.wE:return e.preferredAudioCodecs;default:return}}r(),r(),r();var Yc=!1;r();var Zc=function(t){return t.nB="canplay",t.rB="canplaythrough",t.oB="loadeddata",t.hB="loadedmetadata",t.aC="readystatechange",t.aB="waiting",t.uB="playing",t}({}),co=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"];function NT(t,e,i){return i?t<=e:t<e}r();var ee=class t{get cB(){return this.lB.slice()}Sn(t){return this.lB[2*t]}Tn(t){return this.lB[2*t+1]}dB(t){return this.fB[2*t]}_B(t){return this.fB[2*t+1]}ks(){const t=this;return{get length(){return t.V},start(e){const i=0|e;return t.vB(i),t.Sn(i)},end(e){const i=0|e;return t.vB(i),t.Tn(i)}}}gB(){const e=new Array(2*this.V),i=new Array(2*this.V);for(let t=0;t<this.V;t++)e[2*t]=this.Sn(t),e[2*t+1]=this.Tn(t),i[2*t]=!0,i[2*t+1]=!0;return new t(e,i)}vB(t){if(t<0)throw new m("The index provided ("+t+") must be non-negative");if(t>=this.V)throw new m("The index provided ("+t+") is greater than the maximum bound ("+this.V+")")}mB(t){if(0===this.V)return 0;if(this.wr(t))return t;if(t<=this.Sn(0))return this.Sn(0);if(t>=this.Tn(this.V-1))return this.Tn(this.V-1);{let e=0,i=1/0;for(let s=0;s<this.V;s++){const n=this.Sn(s),r=_.abs(n-t);r<i&&(e=n,i=r);const o=this.Tn(s),h=_.abs(o-t);h<i&&(e=o,i=h)}return e}}jn(e){let i=0,s=0;const n=[],r=[];for(;i<this.V&&s<e.V;){const t=this.Sn(i),o=this.Tn(i),h=this.dB(i),a=this._B(i),u=e.Sn(s),c=e.Tn(s),l=e.dB(s),d=e._B(s),f=_.max(t,u),v=_.min(o,c);let g,m;g=t===u?h&&l:f===t?h:l,m=o===c?a&&d:v===o?a:d,(f<v||g&&m&&f===v)&&(n.push(f,v),r.push(g,m)),o===c?(i+=1,s+=1):o<c?i+=1:s+=1}return new t(n,r)}pB(){const e=this.wB(),i=e.V;if(0===i)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=e.Sn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!e.dB(0)));for(let t=0;t<i-1;t++)s.push(e.Tn(t),e.Sn(t+1)),n.push(!e._B(t),!e.dB(t+1));const o=e.Tn(i-1);return o!==1/0&&(s.push(o,1/0),n.push(!e._B(i-1),!1)),new t(s,n)}yB(e){let i=0,s=0;const n=this.V,r=e.V,o=new Array(2*(n+r)),h=new Array(2*(n+r));let a=0;for(;i<n&&s<r;){const t=this.Sn(i),n=this.Tn(i),r=e.Sn(s),u=e.Tn(s);t<r||t===r&&n<u?(o[a]=t,o[a+1]=n,h[a]=this.dB(i),h[a+1]=this._B(i),i++):(o[a]=r,o[a+1]=u,h[a]=e.dB(s),h[a+1]=e._B(s),s++),a+=2}for(;i<n;)o[a]=this.Sn(i),o[a+1]=this.Tn(i),h[a]=this.dB(i),h[a+1]=this._B(i),i++,a+=2;for(;s<r;)o[a]=e.Sn(s),o[a+1]=e.Tn(s),h[a]=e.dB(s),h[a+1]=e._B(s),s++,a+=2;return new t(o,h)}bB(e){void 0===e&&(e=0);const i=this.V;if(i<2)return this;const s=[],n=[];let r=this.Sn(0),o=this.Tn(0),h=this.dB(0),a=this._B(0);for(let t=1;t<i;t++){const i=this.Sn(t),u=this.Tn(t);let c=this.dB(t),l=this._B(t);r<i&&o>u||(r===i&&(c=h||c,h=c),o===u&&(l=a||l,a=l),NT(i,o+e,a||c)?(o=u,a=l):(s.push(r,o),n.push(h,a),r=i,o=u,h=c,a=l))}return s.push(r,o),n.push(h,a),new t(s,n).wB()}wB(){const e=[],i=[];for(let t=0;t<this.V;t++){const s=this.Sn(t),n=this.Tn(t),r=this.dB(t),o=this._B(t);s===n?(r||o)&&(e.push(s,n),i.push(!0,!0)):(e.push(s,n),i.push(r,o))}return new t(e,i)}AB(t){if(0===this.V)return t;if(0===t.V)return this;return this.yB(t).bB()}SB(t){const e=this.wB(),i=t.wB(),s=e.pB(),n=i.pB(),r=s.jn(i),o=n.jn(e);return r.AB(o)}Pb(e){if(0===this.V||0===e)return this;const i=[],s=[];for(let t=0;t<this.V;t++){const n=this.Sn(t)+e,r=this.Tn(t)+e;i.push(n,r),s.push(this.dB(t),this._B(t))}return new t(i,s)}TB(t){return 0===this.V||0===t.V?this:this.wB().jn(t.wB().pB())}wr(t,e){return this.kB(t,e)>=0}EB(t,e,i,s,n){return this.xB(t,e,i,s,n)>=0}IB(t,e,i,s,n){return this.RB(t,e,i,s,n)>=0}CB(t){if(t.V!==this.V)return!1;for(let e=0;e<this.V;e++)if(this.Sn(e)!==t.Sn(e)||this.Tn(e)!==t.Tn(e)||this.dB(e)!==t.dB(e)||this._B(e)!==t._B(e))return!1;return!0}PB(e){const i=[],s=[];for(let t=0;t<this.V;t++){const n=this.Sn(t),r=this.Tn(t),o=this.dB(t),h=this._B(t);e(n,r,o,h)&&(i.push(n,r),s.push(o,h))}return new t(i,s)}RB(t,e,i,s,n){void 0===i&&(i=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,o=e+n;for(let t=0;t<this.V;t+=1)if(NT(this.Sn(t),o,!s||this.dB(t))&&NT(r,this.Tn(t),!i||this._B(t)))return t;return-1}xB(t,e,i,s,n){void 0===i&&(i=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,o=e-n;for(let t=0;t<this.V;t+=1)if(NT(this.Sn(t),r,!i||this.dB(t))&&NT(o,this.Tn(t),!s||this._B(t)))return t;return-1}kB(t,e){return this.xB(t,t,!0,!0,e)}DB(t,e){void 0===e&&(e=0);const i=t+e;for(let t=this.V-1;t>=0;t-=1)if(NT(this.Sn(t),i,this.dB(t)))return t;return-1}NB(t,e){void 0===e&&(e=0);const i=t-e;for(let t=0;t<this.V;t+=1)if(NT(i,this.Tn(t),this._B(t)))return t;return-1}MB(t,e){void 0===e&&(e=0);const i=t+e;for(let t=0;t<this.V;t+=1)if(this.Sn(t)>i)return t;return-1}LB(e){return this.vB(e),new t([this.Sn(e),this.Tn(e)],[this.dB(e),this._B(e)])}BB(t,e){const i=this.kB(t,e);return i<0?void 0:this.LB(i)}get OB(){let t=0;for(let e=0;e<this.V;e++){t+=this.Tn(e)-this.Sn(e)}return t}static Cn(e){const i=[];for(let t=0;t<e.length;t++)i.push(e.start(t),e.end(t));return new t(i)}static FB(e){return new t([e,e],[!0,!0])}static VB(e,i){return e<=i?new t([e,i]):t.WB()}static WB(){return MT}constructor(t,e){this.V=t.length>>1,this.lB=t,this.fB=e||function(t){const e=new Array(2*t);for(let i=0,s=0;i<t;i+=1,s+=2)e[s]=!0,e[s+1]=!1;return e}(this.V)}},MT=new ee([]),T=.92,_t=1.08,LT=.25,BT=class extends So{get UB(){return this.qe&&this.eo}get GB(){return this.ZB}get Rt(){return this.qe}set Rt(t){this.qe=t,t?this.Sn():this.NR()}HB(t){this.XB.push(t),this.zB()}qB(t){_e(this.XB,t),this.zB()}zB(){this.ZB=this.YB(),this.eo&&this.KB()}YB(){const t=this.jB,e=function(t,e){const i=e-t.targetOffset;return{minimumOffset:t.minimumOffset+i,targetOffset:t.targetOffset+i,maximumOffset:t.maximumOffset+i,forceSeekOffset:t.forceSeekOffset+i,minimumPlaybackRate:t.minimumPlaybackRate,maximumPlaybackRate:t.maximumPlaybackRate,leniency:t.leniency}}(this.QB,this.JB),i=[e,...this.XB],s=i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=null==e?void 0:e.minimumOffset)?i:0)}),t),n=i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=null==e?void 0:e.targetOffset)?i:0)}),s+LT),r=i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=null==e?void 0:e.maximumOffset)?i:0)}),n+LT);return{minimumOffset:s,targetOffset:n,maximumOffset:r,forceSeekOffset:i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=null==e?void 0:e.forceSeekOffset)?i:0)}),r+LT),minimumPlaybackRate:i.reduce(((t,e)=>{var i;return _.min(t,null!=(i=e.minimumPlaybackRate)?i:T)}),T),maximumPlaybackRate:i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=e.maximumPlaybackRate)?i:_t)}),_t)}}$B(){var t;const e=null==(t=ee.Cn(this.na.SI).BB(this.na.RI))?void 0:t.Tn(0),i=void 0!==e?e-this.na.RI:0;this.tO=_.min(this.tO,i),this.eO+=1}iO(){if(this.eO<10)return;const t=.25-this.tO,e=bi(this.JB+t,this.JB-.1,this.JB+.1);this.JB=bi(e,this.sO,this.nO),this.tO=1/0,this.eO=0}rO(){this.oO(),this.sx=As.Gm((()=>this.KB()),500)}oO(){void 0!==this.sx&&(As.Um(this.sx),this.sx=void 0)}Sn(){this.qe&&this.hO&&(this.eo||this.aO.bn(ns._b,this.KB),this.uO=As.lw((()=>this.$B()),1e3),this.cO=As.lw((()=>this.iO()),6e4),this.rO(),this.eo=!0)}NR(){this.eo&&(this.oO(),this.uO&&As.dw(this.uO),this.cO&&As.dw(this.cO),this.aO.vn(ns._b,this.KB),this.lO(1),this.eo=!1)}Km(){this.NR(),this.na.vn(Zc.aB,this.dO),this.na.vn(Zc.uB,this.fO),this.Ro()}lO(t){this.aO.vO._O||this.na.tR!==t&&(this.na.tR=t)}get gO(){return this.na.mO}constructor(t,e,i){var s;super(),this.eo=!1,this.qe=!1,this.XB=[],this.hO=!1,this.jB=0,this.sx=void 0,this.eO=0,this.tO=1/0,this.dO=()=>{const t=this.aO.SI,e=this.aO.RI,i=t.BB(e);i&&(this.jB=bi(i.Tn(0)-e,this.jB,.5),this.zB())},this.fO=()=>{this.hO=!0,this.na.vn(Zc.uB,this.fO),this.qe&&this.Sn()},this.KB=()=>{this.oO(),this.rO();const t=this.gO;if(!t)return;const e=this.pO();if(t>this.ZB.forceSeekOffset)return this._o(new me("latencyrecoveryseek")),void this.JC();const{minimumOffset:i,targetOffset:s,maximumOffset:n}=this.ZB,r=this.aO.tR;if(!this.wO(e,i,n))if(e>n&&this.yO()){const t=this.ZB.maximumPlaybackRate;Yc,this.lO(t)}else if(e<i&&!As.Ys.Ap){const t=this.ZB.minimumPlaybackRate;Yc,this.lO(t)}else if(r>1&&e<s){const t=1;Yc,this.lO(t)}else if(r<1&&e>s){const t=1;Yc,this.lO(t)}},this.na=t,this.aO=e,this.QB=i,this.sO=i.targetOffset,this.nO=i.targetOffset+(null!=(s=i.leniency)?s:0),this.JB=i.targetOffset,this.ZB=this.YB(),this.na.bn(Zc.aB,this.dO),this.na.bn(Zc.uB,this.fO)}},OT=.66,FT=1.5,VT=3;function WT(t){if(!ol(t))return;const e=As.Ys.Sp?10:0,i=t.targetOffset;var s;var n;var r;var o;var h;var a;return{minimumOffset:null!=(s=t.minimumOffset)?s:i*OT,targetOffset:i,maximumOffset:null!=(n=t.maximumOffset)?n:i*FT,forceSeekOffset:_.max(null!=(r=t.forceSeekOffset)?r:i*VT,e),minimumPlaybackRate:null!=(o=t.minimumPlaybackRate)?o:T,maximumPlaybackRate:null!=(h=t.maximumPlaybackRate)?h:_t,leniency:null!=(a=t.leniency)?a:void 0}}var Gu=function(t){return t.bO="auto",t.AO="always",t.SO="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only",t}({}),UT=function(t){return t.UPLYNK="uplynk",t.MEDIATAILOR="mediatailor",t}({});function GT(t){if(!t||!oi(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}r(),r();var Fn=function(t){return t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled",t}({});r();var ZT=!1;r();var HT=function(t){return t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll",t}({});r();var Hr=function(t){return t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange",t.MILLICAST="millicast",t}({});function XT(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":case"millicast":return!0;default:return!1}}function zT(t){return!!t&&Xa(t,"mpd")}function Au(t){let e=ti.nP;return zT(t)&&(e=ti.eP),function(t){return!!t&&Xa(t,"m3u8")}(t)&&(e=ti.iP),e}function qT(t){switch(t){case Ih.$C:case Ih.tP:return t;default:return Ih.SE}}function YT(t){if(!t)return!1;const e=t.toLowerCase();return Cl(e,ti.eP)}function Wh(t){if(!t)return!1;const e=t.toLowerCase();return Cl(e,ti.iP)||Cl(e,ti.sP)}function bl(t){return Vt(t)&&Vt(t.ssai)&&"google-dai"===t.ssai.integration}function Vi(t){return Vt(t)&&("verizon-media"===t.integration||"uplynk"===t.integration)}function KT(t){return Vt(t)&&("theolive"===t.type||"theolive"===t.integration)}function jT(t){return Vt(t)&&"mediatailor"===t.integration}function yl(t){return Vt(t)&&"millicast"===t.type}function QT(t){if(t.sources)if(Qc(t.sources)){for(const e of t.sources)if(yl(e))return!0}else if(Vt(t.sources))return yl(t.sources);return!1}function JT(t){if(oi(t))return!t;if(Vi(t))return!t.id;if(bl(t)){const e=t.ssai,i="live"===e.availabilityType&&e.assetKey,s="vod"===e.availabilityType&&e.contentSourceID&&e.videoID;return Boolean(i&&s)}return yl(t)?!t.src||!t.streamAccountId:!t.src}function Kn(t){return Boolean(Vt(t)&&oi(t.src))}function $T(t){return t.type===ti.rP||t.type===ti.oP}function ml(t){return oi(t)||Kn(t)||bl(t)||Vi(t)||yl(t)}function Gn(t){if(t){if(ml(t))return JT(t);for(const e of t)if(!JT(e))return!1;return!0}return!0}function tk(){return{crossOrigin:Ih.SE,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[],seamlessSwitchStrategy:Gu.bO,latencyConfiguration:void 0}}function ek(){return ne({},tk(),{src:void 0,type:ti.nP,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function ik(t){const e={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:Fn.ENABLED,googleIma:{useNativeIma:!1,useAdUiElementForSsai:!1,bitrate:-1,language:void 0,uiElements:void 0,allowSeekingForGoogleDai:!1},theoads:ZT,allowSkipAdBreak:!1};return void 0===t||(void 0!==t.preload&&(e.preload=function(t){return"none"===t?HT.NONE:HT.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(e.showCountdown=bc(t.showCountdown)),void 0!==t.vpaidMode&&(e.vpaidMode=function(t){switch(t){case"insecure":return Fn.INSECURE;case"disabled":return Fn.DISABLED;default:return Fn.ENABLED}}(t.vpaidMode)),Qc(t.allowedMimeTypes)&&(e.allowedMimeTypes=t.allowedMimeTypes.filter(oi)),void 0!==t.googleIma&&(e.googleIma=function(t){return void 0===t?{useNativeIma:!1,useAdUiElementForSsai:!1,bitrate:-1,language:void 0,uiElements:void 0,allowSeekingForGoogleDai:!1}:{useNativeIma:bc(t.useNativeIma),useAdUiElementForSsai:bc(t.useAdUiElementForSsai),bitrate:null!=(e=t.bitrate)?e:-1,language:ol(t.language)?os(t.language):void 0,uiElements:t.uiElements,allowSeekingForGoogleDai:bc(t.allowSeekingForGoogleDai)};var e}(t.googleIma)),void 0!==t.theoads?e.theoads=bc(t.theoads):e.theoads=ZT,e.allowSkipAdBreak=bc(t.allowSkipAdBreak)),e}function sk(t){if(!Fu(t))return[];const e=[];for(const i of t)Vt(i)&&e.push(i);return e}function nk(t){return oi(t.src)||yl(t)}function rk(t){return Qc(t)?t.filter(XT):[]}r(),r();var Wt=function(t){return t[t.TO=0]="TO",t[t.Xn=1]="Xn",t[t.kO=2]="kO",t[t.EO=3]="EO",t[t.xO=4]="xO",t}({}),$t=class extends me{constructor(t,e=Wt.TO){super(ns.Ny),this.currentTime=t,this.readyState=e}};r();var nl=class extends me{constructor(t){super(ns.Ky),this.currentTime=t}};r();var he=class extends me{constructor(t){super(ns.ho),this.currentTime=t}};r();var vo=class extends me{constructor(t,e=Wt.Xn){super(Zc.hB),this.currentTime=t,this.readyState=e}};r();var yn=class extends me{constructor(t){super(ns.Dy),this.duration=t}};r();var ga=class extends me{constructor(t,e){super(ns.Qy),this.currentTime=t,this.playbackRate=e}};r();var rl=class extends me{constructor(t,e){super(ns._b),this.currentTime=t,this.currentProgramDateTime=e}};r();var ss=class extends me{constructor(t){super(ns.Ly),this.currentTime=t}};r();var uo=class extends me{constructor(t,e=Wt.kO){super(Zc.oB),this.currentTime=t,this.readyState=e}};r();var Al=class extends me{constructor(t){super(ns.ib),this.currentTime=t}};r();var Be=class extends me{constructor(t){super(ns.eb),this.currentTime=t}};r();var Ar=class extends me{constructor(t,e){super(ns.vb),this.currentTime=t,this.volume=e}};r();var rt=class extends me{constructor(t,e=Wt.EO){super(Zc.nB),this.currentTime=t,this.readyState=e}};r();var $i=class extends me{constructor(t,e=Wt.xO){super(Zc.rB),this.currentTime=t,this.readyState=e}};r();var oa=class extends me{constructor(t,e){super(Zc.aC),this.currentTime=t,this.readyState=e}};r();var Pi=class extends $s{get error(){return this.errorObject.message}ka(){return this}constructor(t){super(bo.fa),this.errorObject=t}};async function K(t,e,i,s,n){void 0===i&&(i=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(e)}catch(t){if(ih(t),r<i){const t=_.min(s*2**r,n);r++,await Ze(t,e);continue}throw t}}r();var ok={maxRetries:void 0,minimumBackoff:200,maximumBackoff:3e4},hk=ne({},ok,{maxRetries:1/0});r();var cu=function(t){return t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture",t.NATIVE_PICTURE_IN_PICTURE="native-picture-in-picture",t}({}),ak=function(t){return t.NONE="none",t.ALL="all",t.CONTENT="content",t}({});function uk(t){switch(t){case"all":case"content":return t;default:return"none"}}function ck(t){var e;const i=Fa(t||{});return i.libraryLocation&&(i.libraryLocation=Ks(i.libraryLocation,!0)),i.isEmbeddable=Boolean(i.isEmbeddable),i.cast=function(t){const e=IS(t?t.chromecast:void 0),i=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:e,strategy:i}}(i.cast),i.ads=ik(i.ads),i.analytics=sk(i.analytics),i.mutedAutoplay=uk(i.mutedAutoplay),i.allowNativeFullscreen=Boolean(i.allowNativeFullscreen),i.allowMixedContent=Boolean(i.allowMixedContent),i.persistVolume=Boolean(i.persistVolume),i.liveOffset=function(t){return Number(t)||void 0}(i.liveOffset),i.hlsDateRange=function(t){return Boolean(t)}(i.hlsDateRange),i.retainPlaybackRateOnSourceChange=Boolean(i.retainPlaybackRateOnSourceChange),i.license=function(t){return oi(t)?t:void 0}(i.license),i.licenseUrl=function(t){if(!t)return;try{return Ks(t)}catch(t){return void As.aw("Invalid 'licenseUrl', falling back to default URL")}}(i.licenseUrl),i.abr=IT(i.abr),i.retryConfiguration=function(t){const e=ne({},ok);return void 0!==t&&(void 0!==t.maxRetries&&(e.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(e.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(e.maximumBackoff=Number(t.maximumBackoff))),e}(i.retryConfiguration),i.hideDeprecationWarnings=Boolean(i.hideDeprecationWarnings),i.theoLive=function(t){if(!t)return t;return ne({},t,{externalSessionId:t.externalSessionId?os(t.externalSessionId):void 0,fallbackEnabled:wi(t.fallbackEnabled)})}(i.theoLive),null!=(e=i).uplynk||(e.uplynk=i.verizonMedia),i}function lk(t){return{bt:t.bt,RI:t.RI,ct:t.ct,MI:t.MI,lt:t.lt,OI:t.OI,qI:t.qI,JI:t.JI,tR:t.tR,aR:t.aR,dR:t.dR,vR:t.vR,pR:t.pR,yR:t.yR}}function dk(t,e){const i=e.yR,s=e.qI;t.yR=i,t.qI=s}function fk(t,e,i){if(e===i)return;const s=e.bt!==i.bt,n=e.RI,r=e.ct,o=e.qI,h=e.JI,a=e.tR,u=e.aR,c=e.dR,l=(e.pR,e.vR,e.yR),d=i.RI,f=i.ct,_=i.MI,v=i.OI,g=i.qI,m=i.JI,p=i.tR,w=i.aR,y=i.dR,b=(i.pR,i.vR,i.yR);(s||u>Wt.TO&&w===Wt.TO)&&t._o(new $t(d,w)),m&&!h?t._o(new nl(d)):!m&&h&&t._o(new he(d)),w>=Wt.Xn&&(s||u<Wt.Xn)&&t._o(new vo(d,w)),f===r||S(f)&&S(r)||t._o(new yn(f)),p!==a&&t._o(new ga(d,p)),d!==n&&t._o(new rl(d,void 0)),_&&t._o(new ss(d)),w>=Wt.kO&&(s||u<Wt.kO)&&t._o(new uo(d,w)),y&&!c?t._o(new Al(d)):!y&&c&&t._o(new Be(d)),b===l&&g===o||t._o(new Ar(d,b)),w>=Wt.EO&&(s||u<Wt.EO)&&t._o(new rt(d,w)),w>=Wt.xO&&(s||u<Wt.xO)&&t._o(new $i(d,w)),w!==u&&t._o(new oa(d,w)),v&&t._o(new Pi(v))}function _k(t){switch(t){case cu.INLINE:case cu.FULLSCREEN:case cu.PICTURE_IN_PICTURE:case cu.NATIVE_PICTURE_IN_PICTURE:return t;default:return}}r();var vk=class extends me{constructor(t){super(ns.Cy),this.currentSource=t}};r();var Ki=class extends me{constructor(){super(ns.By)}};r();var gk=class extends me{constructor(){super(ns.Fy)}};r(),r(),r();var Js=function(t){return t.IO="enterpictureinpicture",t.RO="exitpictureinpicture",t.fa="pictureinpictureerror",t}({}),mk=class extends me{constructor(){super(Js.IO)}};r();var pk=class extends me{constructor(){super(Js.RO)}},Lh=class extends So{get bC(){return this.AC}set bC(t){if(t===this.AC)return;this.SC(this.AC);const e=this.AC.CO;this.AC=t,this.kC(t),!e&&this.AC.CO?this._o(new mk):e&&!this.AC.CO&&this._o(new pk)}kC(t){t.bn(Js.IO,this.Ds),t.bn(Js.RO,this.Ds),t.bn(Js.fa,this.Ds)}SC(t){t.vn(Js.IO,this.Ds),t.vn(Js.RO,this.Ds),t.vn(Js.fa,this.Ds)}get PO(){return this.AC.PO}get CO(){return this.AC.CO}vo(){return this.AC.vo()}xo(){return this.AC.xo()}yn(t){this.Ro(),this.SC(this.AC),t||this.AC.yn()}constructor(t){super(),this.AC=t,this.kC(this.AC)}};r(),r();var wk=class extends So{get wa(){var t;return null!=(t=this.eu)?t:this.eu=yk(this)}DO(t){return{}}};function yk(t){return{diagnose:e=>t.DO(e),addEventListener(e,i){t.bn(Ak(e),i)},removeEventListener(e,i){t.vn(Ak(e),i)}}}var bk=["stats"];function Ak(t){const e=Ta(t,os);return(oi(e)?[e]:e).filter((t=>fh(bk,t)))}var Qi=class extends So{set bC(t){const e=this.AC;t!==e&&(e&&this.SC(e),t&&this.kC(t),this.AC=t)}get bC(){return this.AC}get wa(){return this.eu||(this.eu=yk(this)),this.eu}kC(t){t.bn(bk,this.Ds)}SC(t){t.vn(bk,this.Ds)}DO(t){var e,i;return null!=(i=null==(e=this.AC)?void 0:e.DO(t))?i:{}}yn(){this.Ro(),this.AC&&this.SC(this.AC),this.AC=void 0}constructor(){super(),this.AC=void 0,this.eu=void 0,this.AC=void 0}},Sk=class extends qc{ja(){return this.MO}yI(){return this.LO}get VI(){return this.WI()}get UI(){var t;return null!=(t=this.GI())?t:this.BO}WI(){return this.OO}GI(){return this.BO}_R(){return this.Hl}mR(){return this.FO}VO(t){const e=this.bI;if(e===t)return;e.yy(this.HR);const i=lk(this),s=this.II(),n=this.xR(),r=this.IR();this.bI=t,this.LO.bC=t.ht,this.FO.bC=t.rt,this.Hl.bC=t.nt,this.MO.bC=t.ja(),this.OO.bC=t.VI,this.BO.bC=t.UI,void 0!==i&&fk(this,i,this);const o=this.II();o!==s&&this._o(new vk(o)),this.xR()!==n&&this._o(new Ki),this.IR()!==r&&this._o(new gk),t._y(this.HR)}async yn(){await super.yn(),this.MO.yn(),this.LO.yn(),this.FO.yn(),this.Hl.yn(),this.OO.yn(),this.BO.yn()}constructor(t){super(t),this.LO=new pS,this.FO=new pS,this.Hl=new yt,this.OO=new Kc,this.BO=new Qi,this.MO=new Lh(t.ja()),this.LO.bC=t.ht,this.FO.bC=t.rt,this.Hl.bC=t.nt,this.OO.bC=t.VI,this.BO.bC=t.UI}};r();var Tk=class extends Sk{zI(){return function(t){let e=0,i=0,s=0,n=0,r=0,o=0,h=0;for(const a of t)e+=a.WO,i+=a.UO,s+=a.GO,n+=a.ZO,r+=a.HO,o+=a.XO.amountOfBufferedAudioSegments,h+=a.XO.amountOfBufferedVideoSegments;return{WO:e,UO:i,GO:s,ZO:n,HO:r,XO:{amountOfBufferedAudioSegments:o,amountOfBufferedVideoSegments:h}}}(this.zO.map((t=>t.XI)))}NR(){return qe(this.zO.map((t=>t.NR()))).then(M)}nr(){return qe(this.zO.map((t=>t.nr()))).then(M)}RR(){if(!this.mo){for(const t of this.zO)t.RR();this.mo=!0}}AI(){const t=[];for(const e of this.zO)t.push(...e.AI());return t}UR(t){let e=!1;for(const i of this.zO)e=i.UR(t)||e;return e}_o(t){this.UR(t)||super._o(t)}get bC(){return this.bI}set bC(t){this.VO(t)}qO(t){this.zO.push(t)}YO(t){_e(this.zO,t)}VO(t){if(t===this.bI)return;const e=this.bI;e.dr(),super.VO(t),t.pr(e)}FR(){for(const t of this.zO)t.FR()}async yn(){this.Ro(),this.bI.dr();for(const t of this.zO)this.bI!==t&&await t.yn();await super.yn()}constructor(t){super(t),this.zO=[],this.mo=!1,this.KO=!1,this.qO(t)}};r();var di=function(t){return t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR",t}({}),iu=class extends _f{get name(){return"MediaError"}constructor(t,e,i,s){super(e),this.code=t,this.message=null!=e?e:"Unknown error",this.cause=i,this.systemCode=s,m.captureStackTrace&&m.captureStackTrace(this,this.constructor)}};function kk(t){nS(t,"MEDIA_ERR_ABORTED",1),nS(t,"MEDIA_ERR_NETWORK",2),nS(t,"MEDIA_ERR_DECODE",3),nS(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),nS(t,"MEDIA_ERR_ENCRYPTED",5)}function Zs(t){var e,i;return function(t){return t.category===lr.CONTENT_PROTECTION}(t)?new iu(5,t.message,null==(e=t.cause)?void 0:e.message,t.systemCode):new iu(Ek(t.code),t.message,null==(i=t.cause)?void 0:i.message)}function Ek(t){if(t===Ci.MEDIA_ABORTED)return 1;if(t===Ci.MANIFEST_LOAD_ERROR||t===Ci.MEDIA_LOAD_ERROR||t===Ci.SUBTITLE_LOAD_ERROR)return 2;if(t===Ci.MEDIA_DECODE_ERROR)return 3;if(t===Ci.MEDIA_NOT_SUPPORTED)return 4;const e=lr.fromCode(t);return e===lr.NETWORK?2:e===lr.SOURCE?4:e===lr.LICENSE?6:e===lr.CONTENT_PROTECTION?5:e===lr.AD?7:3}function xk(t){return new Z(Ik(t.code),t.message,t)}function Ik(t){switch(t){case 1:return Ci.MEDIA_ABORTED;case 2:return Ci.NETWORK_ERROR;case 3:return Ci.MEDIA_DECODE_ERROR;case 4:return Ci.SOURCE_NOT_SUPPORTED;case 5:return Ci.CONTENT_PROTECTION_ERROR;case 6:return Ci.LICENSE_ERROR;case 7:return Ci.AD_ERROR}}kk(iu),kk(iu.prototype),r(),r(),r(),r(),r();var an=class extends io{tt(t){return super.tt(t)}ka(){return mS(this)}};r(),r(),r(),r();var tl=class{get mC(){return this.jO}get V(){return this.jO.length}get wa(){return this.eu||(this.eu=function(t){const e=t.mC.map((t=>t.wa));return e.item=e=>{const i=0|e,s=t.wC(i);return s&&s.wa||void 0},e}(this)),this.eu}QO(t){this.jO.push(t),this.eu&&this.eu.push(t.wa)}rT(t){_e(this.jO,t),this.eu&&_e(this.eu,t.wa)}wC(t){return this.jO[t]}JO(t){return Qc(t)?function(t,e){for(const i of e)if(!fh(t,i))return!1;return!0}(this.jO,t):fh(this.jO,t)}nr(){En(this.jO),this.eu&&En(this.eu)}constructor(){this.jO=[],this.eu=void 0}};r();var te=class extends Me{ka(){return new Rk(this.Ht.wa)}constructor(t){super(gs.dC),this.Ht=t}},Rk=class extends Mo{constructor(t){super("update"),this.track=t}};r();var Ck=0;function Lt(){return Ck++}var Pk=0;var Dk=0;function Nk(){return Dk++}var Mk=0;function Lk(){return Mk++}var Bk=0;var Ok=class extends So{get BC(){}get Rt(){return this.qe}set Rt(t){this.qe!==t&&(this.qe=t,this.$O=t,this._o(new Pc(this)))}get $O(){return this.tF.enabled}set $O(t){this.tF.enabled=t}get wa(){return this.eu||(this.eu=xi(this)),this.eu}get o(){return this.jS}get OC(){return this.eF}get Lt(){return this.tF.kind}get Ch(){return this.iF}set Ch(t){t!==this.iF&&(this.iF=t,this._o(new te(this)))}get gs(){return this.tF.language}get LE(){return this.Rt?"enabled":"disabled"}get sF(){return this.tF}get VC(){return this.jO}get WC(){}set WC(t){}nF(t){this.Rt=t}rF(){this.Rt=this.$O}constructor(t){super(),this.zw=Fo.wE,this.qe=!1,this.eu=void 0,this.tF=t,this.eF=Lt(),this.jS=""+Bk++,this.iF=t.label,this.jO=new tl,this.rF()}};r();var Fk=0;var Vk=class extends So{get BC(){}get Rt(){return this.qe}set Rt(t){this.qe!==t&&(this.qe=t,this.$O=t,this._o(new Pc(this)))}get $O(){return Boolean(this.tF.selected)}set $O(t){this.tF.selected=t}get wa(){return this.eu||(this.eu=xi(this)),this.eu}get o(){return this.jS}get OC(){return this.eF}get Lt(){return"main"}get Ch(){return this.iF}set Ch(t){t!==this.iF&&(this.iF=t,this._o(new te(this)))}get gs(){return this.tF.language}get LE(){return this.Rt?"enabled":"disabled"}get sF(){return this.tF}get VC(){return this.jO}get WC(){}set WC(t){}rF(){this.Rt=this.$O}nF(t){this.Rt=t}constructor(t){super(),this.zw=Fo.yE,this.qe=!1,this.eu=void 0,this.tF=t,this.eF=Lt(),this.jS=""+Fk++,this.jO=new tl,this.iF=t.label,this.rF()}};r();var Wk=class extends me{constructor(t){super(ns.Sy),this.ZI=t}};r(),r();var Bu=function(t){return t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR",t}({});r(),r();var Uk=function(t){return t.oF="cue",t.hF="region",t.aF="stylesheet",t}({});r(),r();var Gk={"line-left":"start",center:"middle","line-right":"end"},Zk={start:"line-left",middle:"center",end:"line-right"};function Hk(t,e){if("auto"===t)switch(e){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function Xk(t,e){if("auto"===t)switch(e){case"left":return 0;case"right":return 100;default:return 50}return function(t,e){const i="number"==typeof t?t:C(t);return S(i)?e:i}(t,50)}r(),r(),r();var On=function(t){return t.IO="vo",t.RO="xo",t.dC="ir",t}({}),zk=class extends Me{constructor(t,e){super(t),this.uF=e}},Ri=class extends Mo{constructor(t,e){super(t),this.cue=e}};function ai(t){const e=[On.IO,On.RO,On.dC];let i;const s={get cF(){return t},get track(){return t.Ht.wa},get id(){return t.o},get uid(){return t.OC},get startTime(){return t.lF},set startTime(e){t.lF=e},get endTime(){return t.dF},set endTime(e){t.dF=e},get content(){return t.U},addEventListener(t,e){const s=Ta(t,os);i.bn(s,e)},removeEventListener(t,e){const s=Ta(t,os);i.vn(s,e)}};return i=new gm(s),t.bn(e,(t=>i._o(t.wa))),s}function qk(){}function Yk(t){return Qr(ai(t),{get align(){return t.fF},get line(){return t._F},get lineAlign(){return t.vF},get position(){return t.fo},get positionAlign(){return t.gF},get region(){return t.mF?t.mF.wa:null},get size(){return t.Ob},get snapToLines(){return t.pF},get text(){return t.U},get vertical(){return t.Pt}})}r(),r();var Kk=class extends zk{ka(){return new jk(this.uF.wa)}constructor(t){super(On.dC,t)}},jk=class extends Ri{constructor(t){super("update",t)}};r();var Qk=class extends Me{ka(){return new Jk(this.uF.wa)}constructor(t){super(gs.$R),this.uF=t}},Jk=class extends Mo{constructor(t){super("updatecue"),this.cue=t}},$k=.02;function tE(t,e){return rs(t.wF,e.wF,$k)&&rs(t.yF,e.yF,$k)&&t.o===e.o}var He=class extends So{get lF(){return this.bF}set lF(t){var e,i;this.bF!==t&&(this.bF=t,null==(e=this.AF)||e.SF(this),this._o(new Kk(this)),null==(i=this.AF)||i._o(new Qk(this)))}get dF(){return this.TF}set dF(t){var e,i;this.TF!==t&&(this.TF=t,null==(e=this.AF)||e.SF(this),this._o(new Kk(this)),null==(i=this.AF)||i._o(new Qk(this)))}get o(){return this.jS}get OC(){return this.eF}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){return ai(this)}get so(){return this.eo}set so(t){this.eo=t}get Ht(){return this.AF}set Ht(t){this.AF=t}get U(){return this.kF}set U(t){var e;this.kF!==t&&(this.kF=t,this._o(new Kk(this)),null==(e=this.AF)||e._o(new Qk(this)))}get EF(){return this.xF}set EF(t){this.xF=t}IF(t){return this===t||hS(this,t)&&tE(this,t)&&this.RF(t)}RF(t){return Et(this.U,t.U)}CF(t,e){this.bF=t,this.TF=e,this.wF=t,this.yF=e}yn(){this.Ro()}constructor(t,e,i,s,n){super(),this.eu=void 0,this.AF=void 0,this.eo=!1,this.PF=-1,this.eF=Lk(),this.bF=t,this.TF=e,this.wF=t,this.yF=e,this.kF=i,this.xF=Boolean(s),this.jS=null!=n?n:""}};function eE(t,e){return t.U===e.U&&t._F===e._F&&t.vF===e.vF&&t.fo===e.fo&&t.gF===e.gF&&t.mF===e.mF&&t.pF===e.pF&&t.Ob===e.Ob&&t.fF===e.fF&&t.Pt===e.Pt}var iE=class extends He{get wa(){return this.eu||(this.eu=Yk(this)),this.eu}get zw(){return Uk.oF}RF(t){return eE(this,t)}constructor(t,e,i,s,n){super(t,e,i,s,n),this._F="auto",this.vF="start",this.fo="auto",this.gF="auto",this.mF=void 0,this.pF=!0,this.Ob=100,this.fF="center",this.Pt=""}};function sE(t){const e=t._F,i=Vr(e);return i&&!t.pF&&(e<0||e>100)?100:i?Number(e):t.pF?-1:100}function nE(t){return Xk(t.fo,t.fF)}function rE(t){return Hk(t.gF,t.fF)}function oE(t){const e=rE(t),i=nE(t);let s;switch(e){case"line-left":s=100-i;break;case"line-right":s=i;break;case"center":s=i<=50?2*i:2*(100-i)}return _.min(t.Ob,s)}function hE(t){return{get id(){return t.o},get identifier(){return t.o},get lines(){return t.DF},get regionAnchorX(){return t.NF},get regionAnchorY(){return t.MF},get scrollValue(){return t.LF},get viewportAnchorX(){return t.BF},get viewportAnchorY(){return t.OF},get width(){return t.ji}}}r(),r();var aE=class{get wa(){return this.eu||(this.eu=hE(this)),this.eu}get zw(){return Uk.hF}constructor(t,e,i,s,n,r,o,h){this.o=t,this.ji=e,this.DF=i,this.NF=s,this.MF=n,this.BF=r,this.OF=o,this.LF=h}};r(),r();var ur=1e6,uE=class{FF(t){return this.VF()*t}WF(t){return this.UF(t)>0}GF(t){return this.UF(t)>=0}ZF(t,e){return this.XF(t).HF(e)}IF(t){return 0===this.UF(t)}zF(t){return this.UF(t)<0}HF(t){return this.UF(t)<=0}qF(){return this.YF()?this.KF():this}jF(t){return this.QO(t.KF())}XF(t){return this.jF(t).qF()}};function cE(t,e){return t.QF()?e.QF()?$c.eh:$c.Zm:e.QF()?$c.Hm:t.JF()?e.JF()&&t.YF()===e.YF()?$c.eh:t.YF()?$c.Hm:$c.Zm:e.YF()?$c.Zm:$c.Hm}r(),r();var lE=4294967296,dE=lE*lE,fE=dE*dE,_E=fE/2,rr=class t{static tV(e,i,s){return s?new t(e.toUnsigned(),i.toUnsigned()):new t(e.toSigned(),i.toSigned())}static eV(e){return e.unsigned?new t(e,po.UZERO):new t(e,e.isNegative()?po.NEG_ONE:po.ZERO)}static iV(e,i){if(S(e))return i?t.sV:t.nV;if(i){if(e<0)return t.sV;if(e>=fE)return t.rV}else{if(e<=-_E)return t.oV;if(e+1>=_E)return t.hV}return e<0?t.iV(-e,i).KF():t.tV(po.fromNumber(e%dE),po.fromNumber(e/dE),i)}aV(){return this.uV.unsigned}cV(){return this.lV.isZero()&&this.uV.isZero()}YF(){return this.uV.isNegative()}dV(){return this.aV()?t.tV(this.lV,this.uV,!1):this}fV(){return this.aV()?this:t.tV(this.lV,this.uV,!0)}_V(){return this.lV}VF(){return this.YF()?-this.KF().VF():this.uV.toNumber()*dE+this.lV.toUnsigned().toNumber()}vV(){return this.lV.toInt()}IF(t){return(this.aV()===t.aV()||this.uV.getHighBits()>>>31!=1||t.uV.getHighBits()>>>31!=1)&&(this.uV.toUnsigned().eq(t.uV.toUnsigned())&&this.lV.toUnsigned().eq(t.lV.toUnsigned()))}UF(t){if(this.IF(t))return $c.eh;const e=this.YF(),i=t.YF();if(e&&!i)return $c.Hm;if(!e&&i)return $c.Zm;if(!this.aV())return this.jF(t).YF()?$c.Hm:$c.Zm;const s=this.fV(),n=t.fV(),r=n.uV.comp(s.uV);return r>0||0===r&&n.lV.gt(s.lV)?$c.Hm:$c.Zm}zF(t){return this.UF(t)<0}HF(t){return this.UF(t)<=0}gV(t){return this.UF(t)>0}mV(t){return this.UF(t)>=0}pV(){return new t(this.lV.not(),this.uV.not())}wV(e){return new t(this.lV.and(e.lV),this.uV.and(e.uV))}yV(e){return new t(this.lV.or(e.lV),this.uV.or(e.uV))}bV(e){const i=127&e;return 0===i?this:i<64?t.tV(this.lV.shl(i),this.uV.shl(i).or(this.lV.shru(64-i)),this.aV()):t.tV(po.ZERO,this.lV.shl(i-64),this.aV())}AV(e){const i=127&e;return 0===i?this:i<64?t.tV(this.lV.shru(i).or(this.uV.shl(64-i)),this.uV.shr(i),this.aV()):t.tV(this.uV.shr(i-64),this.uV.isNegative()?po.NEG_ONE:po.ZERO,this.aV())}SV(e){const i=127&e;return 0===i?this:i<64?t.tV(this.lV.shru(i).or(this.uV.shl(64-i)),this.uV.shru(i),this.aV()):64===i?t.tV(this.uV,po.ZERO,this.aV()):t.tV(this.uV.shru(i-64),po.ZERO,this.aV())}QO(e){const i=this.uV.high>>>16,s=65535&this.uV.high,n=this.uV.low>>>16,r=65535&this.uV.low,o=this.lV.high>>>16,h=65535&this.lV.high,a=this.lV.low>>>16,u=65535&this.lV.low,c=e.uV.high>>>16,l=65535&e.uV.high,d=e.uV.low>>>16,f=65535&e.uV.low,_=e.lV.high>>>16,v=65535&e.lV.high,g=e.lV.low>>>16;let m=0,p=0,w=0,y=0,b=0,A=0,S=0,T=0;T+=u+(65535&e.lV.low),S+=T>>>16,T&=65535,S+=a+g,A+=S>>>16,S&=65535,A+=h+v,b+=A>>>16,A&=65535,b+=o+_,y+=b>>>16,b&=65535,y+=r+f,w+=y>>>16,y&=65535,w+=n+d,p+=w>>>16,w&=65535,p+=s+l,m+=p>>>16,p&=65535,m+=i+c,m&=65535;const k=this.aV(),E=po.fromBits(w<<16|y,m<<16|p,k),x=po.fromBits(S<<16|T,b<<16|A,k);return t.tV(x,E,k)}jF(t){return this.QO(t.KF())}KF(){return this.pV().QO(t.TV)}kV(e){if(this.cV()||e.cV())return this.aV()?t.sV:t.nV;if(this.YF())return e.YF()?this.KF().kV(e.KF()):this.KF().kV(e).KF();if(e.YF())return this.kV(e.KF()).KF();if(this.uV.isZero()&&0===this.lV.high&&e.uV.isZero()&&0===e.lV.high)return t.eV(this.lV.multiply(e.lV));const i=po.fromBits(4294967295,0,!0),s=this.lV.and(i),n=this.lV.shru(32),r=this.uV.and(i),o=this.uV.shru(32),h=e.lV.and(i),a=e.lV.shru(32),u=e.uV.and(i),c=e.uV.shru(32);let l=po.UZERO,d=po.UZERO,f=po.UZERO,_=po.UZERO;l=l.add(s.mul(h)),d=d.add(l.shru(32)),l=l.and(i),d=d.add(n.mul(h)),f=f.add(d.shru(32)),d=d.and(i),d=d.add(s.mul(a)),f=f.add(d.shru(32)),d=d.and(i),f=f.add(r.mul(h)),_=_.add(f.shru(32)),f=f.and(i),f=f.add(n.mul(a)),_=_.add(f.shru(32)),f=f.and(i),f=f.add(s.mul(u)),_=_.add(f.shru(32)),f=f.and(i),_=_.add(o.mul(h)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(i);const v=po.fromBits(l.getLowBitsUnsigned(),d.getLowBitsUnsigned(),!0),g=po.fromBits(f.getLowBitsUnsigned(),_.getLowBitsUnsigned(),!0);return t.tV(v,g,this.aV())}EV(e){let i,s,n=e;if(n.cV())throw new RangeError("division by zero");if(this.cV())return this.aV()?[t.sV,t.sV]:[t.nV,t.nV];if(this.aV()){if(n.aV()||(n=n.fV()),n.gV(this))return[t.sV,this];if(n.gV(this.SV(1)))return s=t.xV,i=this.jF(n),[s,i];s=t.sV}else{if(this.IF(t.oV)){if(n.IF(t.TV)||n.IF(t.RV))return[t.oV,t.nV];if(n.IF(t.oV))return[t.TV,t.nV];{const e=this.AV(1).CV(n).bV(1);return e.IF(t.nV)?s=n.YF()?t.TV:t.RV:(i=this.jF(n.kV(e)),s=e.QO(i.CV(n))),i=this.jF(n.kV(s)),[s,i]}}if(n.IF(t.oV))return this.aV()?[t.sV,this]:[t.nV,this];if(this.YF())return n.YF()?this.KF().EV(n.KF()):([s,i]=this.KF().EV(n),[s.KF(),i.KF()]);if(n.YF())return[s,i]=this.EV(n.KF()),[s.KF(),i.KF()];s=t.nV}for(i=this;i.mV(n);){let e=_.max(1,_.floor(i.VF()/n.VF()));const r=_.ceil(_.log(e)/_.LN2),o=r<=48?1:2**(r-48);let h=t.iV(e),a=h.kV(n);for(;a.YF()||a.gV(i);)e-=o,h=t.iV(e,this.aV()),a=h.kV(n);h.cV()&&(h=t.TV),s=s.QO(h),i=i.jF(a)}return[s,i]}CV(t){return this.EV(t)[0]}PV(t){return this.EV(t)[1]}toString(e){const i=e||10;if(i<2||i>36)throw new RangeError("radix");if(this.cV())return"0";if(this.YF()){if(this.IF(t.oV)){const e=t.iV(i),s=this.CV(e),n=s.kV(e).jF(this);return s.toString(i)+n.vV().toString(i)}return"-"+this.KF().toString(i)}const s=t.iV(i**6,this.aV());let n=this,r="";for(;;){const t=n.CV(s);let e=(n.jF(t.kV(s)).vV()>>>0).toString(i);if(n=t,n.cV())return e+r;for(;e.length<6;)e="0"+e;r=String(e)+r}}constructor(t,e){this.lV=t,this.uV=e}};rr.nV=rr.eV(po.ZERO),rr.sV=rr.eV(po.UZERO),rr.TV=rr.eV(po.ONE),rr.xV=rr.eV(po.UONE),rr.RV=rr.eV(po.NEG_ONE),rr.hV=rr.tV(po.NEG_ONE,po.MAX_VALUE,!1),rr.rV=rr.tV(po.MAX_UNSIGNED_VALUE,po.MAX_UNSIGNED_VALUE,!0),rr.oV=rr.tV(po.ZERO,po.MIN_VALUE,!1),r();var Je=class t{get JF(){return!isFinite(this.DV)}get od(){return this.DV/this.RN}static NV(e){return new t(_.ceil(e.DV),e.RN)}static MV(e){return new t(_.floor(e.DV),e.RN)}static LV(t,e){return t.GF(e)?t:e}static BV(t,e){return t.HF(e)?t:e}QO(e){return this.RN>=e.RN?new t(this.DV+e.OV(this.RN).DV,this.RN):new t(this.OV(e.RN).DV+e.DV,e.RN)}WF(t){return t.zF(this)}GF(t){return t.HF(this)}XF(e){if(this.RN>=e.RN){const i=_.abs(this.DV-e.OV(this.RN).DV),s=this.RN;return new t(i,s)}return e.XF(this)}ZF(t,e){return this.XF(t).HF(e)}UF(t){return function(t,e){return t.RN>=e.RN?$d(t.DV,e.OV(t.RN).DV):$d(t.OV(e.RN).DV,e.DV)}(this,t)}IF(t){return 0===this.UF(t)}zF(t){return this.UF(t)<0}HF(t){return this.UF(t)<=0}OV(e){return new t(this.DV*(e/this.RN),e)}jF(e){return this.RN>=e.RN?new t(this.DV-e.OV(this.RN).DV,this.RN):new t(this.OV(e.RN).DV-e.DV,e.RN)}FV(e){return new t(this.DV*e,this.RN)}constructor(t,e=1){this.DV=t,this.RN=e}};Je.ad=new Je(1/6,1),Je.nV=new Je(0),Je.VV=new Je(1/0),Je.WV=1e6;var L=class t extends uE{static GV(e,i){return void 0===i&&(i=ur),t.iV(e*i,i)}static iV(e,i){return S(e)?t.ZV:e===1/0?t.HV:e===-1/0?t.XV:new t(po.fromNumber(e),i)}static eV(e,i){return new t(e,i)}static zV(e){return t.GV(e.od,ur)}static qV(e){return new t(po.fromNumber(e.getTime()),1e3)}static LV(t,e){return t.GF(e)?t:e}static BV(t,e){return t.HF(e)?t:e}static YV(e,i,s){return t.LV(i,t.BV(s,e))}YF(){return this.Fx.isNegative()}cV(){return 0!==this.RN&&this.Fx.isZero()}JF(){return 0===this.RN&&!this.Fx.isZero()}QF(){return 0===this.RN&&this.Fx.isZero()}VF(){if(0===this.RN)return this.Fx.isZero()?NaN:this.Fx.isNegative()?-1/0:1/0;const t=this.Fx.divide(this.RN),e=this.Fx.subtract(t.multiply(this.RN));return t.toNumber()+e.toNumber()/this.RN}_V(){if(0===this.RN)throw new m("Failed to convert timestamp");return this.Fx}KV(){return new Date(0===this.RN?NaN:this.OV(1e3).Fx.toNumber())}jV(){return new Je(0===this.RN?this.VF():this.Fx.toNumber(),this.RN)}OV(e,i){void 0===i&&(i=E.QV);const s=this.RN;if(s===e)return this;if(0===s)return this;const n=jd(s,e),r=function(t,e,i){const[s,n]=t.EV(e);if(n.cV())return s;if(i===E.QV)return n.YF()?s.jF(rr.TV):s;if(i===E.JV)return n.YF()?s:s.QO(rr.TV);{const t=n.kV(rr.iV(2));return t.YF()?t.KF().zF(e)?s:s.jF(rr.TV):t.zF(e)?s:s.QO(rr.TV)}}(rr.eV(this.Fx).kV(rr.iV(e/n)),rr.iV(s/n),i);return new t(r._V(),e)}UF(t){if(this===t)return $c.eh;if(0===this.RN||0===t.RN)return cE(this,t);if(this.cV())return t.cV()?$c.eh:t.YF()?$c.Zm:$c.Hm;if(t.cV())return this.YF()?$c.Hm:$c.Zm;const e=_.min(this.RN,t.RN),i=this.OV(e,E.$V).Fx,s=t.OV(e,E.$V).Fx;return i.compare(s)}KF(){return 0===this.RN?function(t){0;return t.QF()?t:t.YF()?L.HV:L.XV}(this):new t(this.Fx.negate(),this.RN)}QO(e){if(0===this.RN||0===e.RN)return function(t,e){0;if(t.QF()||e.QF())return L.ZV;if(t.JF()&&e.JF())return t.YF()===e.YF()?t:L.ZV;return t.JF()?t:e}(this,e);if(this.cV())return e;if(e.cV())return this;const i=_.max(this.RN,e.RN),s=this.OV(i,E.$V),n=e.OV(i,E.$V);return new t(s.Fx.add(n.Fx),i)}kV(e){if(this.QF()||S(e))return t.ZV;if(this.JF()||!isFinite(e)){if(this.cV()||0===e)return t.ZV;{const i=this.YF()?t.XV:t.HV;return e<0?i.KF():i}}return this.cV()?this:new t(0===e?po.ZERO:this.Fx.multiply(e),this.RN)}CV(e){if(this.QF()||S(e))return t.ZV;if(this.JF())return isFinite(e)?0===e?1/e<0?this.KF():this:e<0?this.KF():this:t.ZV;if(!isFinite(e))return new t(po.ZERO,this.RN);if(this.cV())return 0===e?t.ZV:new t(po.ZERO,this.RN);if(0===e){const i=this.YF()?t.XV:t.HV;return 1/e<0?i.KF():i}return new t(this.Fx.divide(e),this.RN)}tW(){return[this.Fx.low,this.Fx.high,this.RN]}constructor(t,e){super(),this.Fx=t.toSigned(),this.RN=e>>>0}};L.nV=new L(po.ZERO,ur),L.ZV=new L(po.ZERO,0),L.HV=new L(po.ONE,0),L.XV=new L(po.NEG_ONE,0),r();var vE=class t extends uE{static GV(e,i){return void 0===i&&(i=ur),t.iV(e*i,i)}static iV(e,i){return S(e)?t.ZV:e===1/0?t.HV:e===-1/0?t.XV:new t(BigInt(_.floor(e)),i)}static eV(e,i){return new t(BigInt(e.high)<<BigInt(32)|BigInt(e.low>>>0),i)}static zV(e){return t.GV(e.od,ur)}static qV(e){return t.iV(e.getTime(),1e3)}static get nV(){return t.eW||(t.eW=new t(BigInt(0),ur)),t.eW}static get ZV(){return t.iW||(t.iW=new t(BigInt(0),0)),t.iW}static get HV(){return t.sW||(t.sW=new t(BigInt(1),0)),t.sW}static get XV(){return t.nW||(t.nW=new t(BigInt(-1),0)),t.nW}static LV(t,e){return t.GF(e)?t:e}static BV(t,e){return t.HF(e)?t:e}static YV(e,i,s){return t.LV(i,t.BV(s,e))}YF(){return this.Fx<BigInt(0)}cV(){return 0!==this.RN&&this.Fx===BigInt(0)}JF(){return 0===this.RN&&this.Fx!==BigInt(0)}QF(){return 0===this.RN&&this.Fx===BigInt(0)}VF(){if(0===this.RN)return this.Fx===BigInt(0)?NaN:this.Fx<BigInt(0)?-1/0:1/0;const t=this.Fx/BigInt(this.RN),e=this.Fx-t*BigInt(this.RN);return Number(t)+Number(e)/this.RN}_V(){if(0===this.RN)throw new m("Failed to convert timestamp");return this.rW()}rW(){const t=this.Fx&BigInt(4294967295),e=this.Fx>>BigInt(32)&BigInt(4294967295);return po.fromBits(Number(t),Number(e))}KV(){return new Date(0===this.RN?NaN:Number(this.OV(1e3).Fx))}jV(){return new Je(0===this.RN?this.VF():Number(this.Fx),this.RN)}OV(e,i){void 0===i&&(i=E.QV);const s=this.RN;if(s===e)return this;if(0===s)return this;const n=jd(s,e),r=function(t,e,i){const s=t/e,n=t-s*e;if(n===BigInt(0))return s;if(i===E.QV)return n<BigInt(0)?s-BigInt(1):s;if(i===E.JV)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<e?s:s-BigInt(1):t<e?s:s+BigInt(1)}}(this.Fx*BigInt(e/n),BigInt(s/n),i);return new t(r,e)}UF(t){if(this===t)return $c.eh;if(0===this.RN||0===t.RN)return cE(this,t);if(this.cV())return t.cV()?$c.eh:t.YF()?$c.Zm:$c.Hm;if(t.cV())return this.YF()?$c.Hm:$c.Zm;const e=_.min(this.RN,t.RN),i=this.OV(e,E.$V).Fx,s=t.OV(e,E.$V).Fx;return i>s?$c.Zm:i<s?$c.Hm:$c.eh}KF(){return 0===this.RN?function(t){0;return t.QF()?t:t.YF()?vE.HV:vE.XV}(this):new t(-this.Fx,this.RN)}QO(e){if(0===this.RN||0===e.RN)return function(t,e){0;if(t.QF()||e.QF())return vE.ZV;if(t.JF()&&e.JF())return t.YF()===e.YF()?t:vE.ZV;return t.JF()?t:e}(this,e);if(this.cV())return e;if(e.cV())return this;const i=_.max(this.RN,e.RN),s=this.OV(i,E.$V),n=e.OV(i,E.$V);return new t(s.Fx+n.Fx,i)}kV(e){if(this.QF()||S(e))return t.ZV;if(this.JF()||!isFinite(e)){if(this.cV()||0===e)return t.ZV;{const i=this.YF()?t.XV:t.HV;return e<0?i.KF():i}}return this.cV()?this:new t(0===e?BigInt(0):this.Fx*BigInt(e),this.RN)}CV(e){if(this.QF()||S(e))return t.ZV;if(this.JF())return isFinite(e)?0===e?1/e<0?this.KF():this:e<0?this.KF():this:t.ZV;if(!isFinite(e))return new t(BigInt(0),this.RN);if(this.cV())return 0===e?t.ZV:new t(BigInt(0),this.RN);if(0===e){const i=this.YF()?t.XV:t.HV;return 1/e<0?i.KF():i}return new t(this.Fx/BigInt(e),this.RN)}tW(){const t=this.rW();return[t.low,t.high,this.RN]}constructor(t,e){super(),this.Fx=BigInt.asIntN(64,t),this.RN=e>>>0}};vE.eW=void 0,vE.iW=void 0,vE.sW=void 0,vE.nW=void 0;var E=function(t){return t[t.QV=0]="QV",t[t.JV=1]="JV",t[t.$V=2]="$V",t}({}),Ic=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?vE:L;function gE(t,e){return t.UF(e)}function mE(t,e){return void 0!==t?void 0!==e?Ic.BV(t,e):t:e}r();var pE=9e4,wE=Wd((()=>Ic.iV(8589934592,pE))),yE=Wd((()=>wE().CV(2)));r();var bE={oW:0,hW:1/0,aW:0},AE=6,SE=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],TE=[" ","\t","\n","\f","\r"],kE=/^\d*$/,EE=/.*[0-9]+.*/,xE=/^[\d.-]+$/,IE=/(^\.|\.$)/,RE=/(\D\.|\.\D)/;function CE(t,e,i){void 0===e&&(e=bE),void 0===i&&(i=!0);return PE(cp(sa(t),new er),e,i)}function PE(t,e,i){void 0===e&&(e=bE),void 0===i&&(i=!0);const s={L:[],uW:[],cW:[]},n=DE(t),r=new er;if(ZE(n),ue(n,(t=>"\n"!==t),r),r.nc>=n.length)return s;if(r.Pb(1),"\n"!==n.charAt(r.nc)){OE(NE(n,r,false,!0,s,e,i),s)}else r.Pb(1);for(ue(n,(t=>"\n"===t),r);r.nc<n.length;){OE(NE(n,r,false,!1,s,e,i),s),ue(n,(t=>"\n"===t),r)}return s}function DE(t){const e=dh(t,"\0"," "),i=dh(e,"\r\n","\n");return dh(i,"\r","\n")}function ue(t,e,i){const s=i.nc;for(;i.nc<t.length&&e(t.charAt(i.nc));)i.Pb(1);return t.substring(s,i.nc)}function NE(t,e,i,s,n,r,o){let h,a=0,u=e.nc,c="",l=!1,d=!1,f=null,_=null,v=null;for(;!l;)if(h=ue(t,(t=>"\n"!==t),e),a++,e.nc>=t.length?l=!0:e.Pb(1),Xa(h,"--\x3e")){if(s||1!==a&&(2!==a||d)){e.Db(u);break}d=!0,u=e.nc,f=new iE(0,0,"",!1,c);try{FE(h,n.uW,f,r,o),c=""}catch(t){As.aw(t),f=null}}else{if(""===h)break;s&&Cl(h,"X-TIMESTAMP-MAP")&&(n.lW=ME(h)),s||2!==a||i||(Th("STYLE",c.replace(/ /g,""))?(_={zw:Uk.aF},c=""):Th("REGION",c.replace(/ /g,""))&&(v=new aE("",100,3,0,100,0,100,""),c="")),c&&(c+="\n"),c+=h,u=e.nc}if(f)return f.U=c,f;if(_);else if(v)return function(t,e){const i=t.split(/\s/),s=":";for(const t of i)if(0!==t.length&&Xa(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const i=t.indexOf(s),n=t.substring(0,i),r=t.substring(i+1,t.length);switch(n.toUpperCase()){case"ID":ex(r,e);break;case"WIDTH":nx(r,e);break;case"LINES":sx(r,e);break;case"REGIONANCHOR":{const t=tx(r);t&&(e.NF=t[0],e.MF=t[1]);break}case"VIEWPORTANCHOR":{const t=tx(r);t&&(e.BF=t[0],e.OF=t[1]);break}case"SCROLL":ix(r,e)}}}(c,v),v;return null}function ME(t){const e=t.split("=")[1].trim().split(","),i=BE(e[0].trim(),"MPEGTS")?e[0]:e[1],s=BE(e[0].trim(),"LOCAL")?e[0]:e[1];var n;return{dW:LE(Number(i.split(/:(.*)/)[1].trim())||0),mh:Ic.GV(null!=(n=UE(s.split(/:(.*)/)[1].trim(),new er))?n:0)}}function LE(t){return Ic.iV(t,pE)}function BE(t,e){return Cl(t,e)}function OE(t,e){t&&function(t){return"cue"===t.zw}(t)?e.L.push(t):t&&function(t){return"region"===t.zw}(t)?e.uW.push(t):t&&function(t){return"stylesheet"===t.zw}(t)&&e.cW.push(t)}function FE(t,e,i,s,n){const r=new er;XE(t,r);const o=VE(UE(t,r),s,n);if(XE(t,r),"--\x3e"!==t.substring(r.nc,r.nc+3))throw m("Something went wrong with parsing a WebVTT Cue");r.Pb(3),XE(t,r);const h=VE(UE(t,r),s,n);i.CF(o,h);!function(t,e,i){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&Xa(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),o=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":jE(o,e,i);break;case"VERTICAL":JE(o,e);break;case"D":$E(o,e);break;case"LINE":case"L":YE(o,e);break;case"POSITION":case"T":KE(o,e);break;case"SIZE":case"S":QE(o,e);break;case"ALIGN":case"A":qE(o,e)}}}(t.substring(r.nc,t.length),i,e)}function VE(t,e,i){return i?t+e.oW:t}function WE(t){return/^[0-9]$/.test(t)}function UE(t,e){const i=dh(t,",",".");let s,n,r,o=!1;if(e.nc>=i.length||!WE(i.charAt(e.nc)))throw new m("Something went wrong with parsing a WebVTT Cue timestamp");const h=ue(i,WE,e),a=x(h,10);if((h.length>2||a>59)&&(o=!0),e.nc>=i.length||":"!==i.charAt(e.nc))throw new m("Something went wrong with parsing a WebVTT Cue timestamp");e.Pb(1);const u=ue(i,WE,e);if(2!==u.length)throw new m("Something went wrong with parsing a WebVTT Cue timestamp");const c=x(u,10);if(o||e.nc<i.length&&":"===i.charAt(e.nc)){if(e.nc>=i.length||":"!==i.charAt(e.nc))throw new m("Something went wrong with parsing a WebVTT Cue timestamp");e.Pb(1);const t=ue(i,WE,e);if(2!==u.length)throw new m("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=x(t,10)}else s=0,n=a,r=c;if(e.nc>=i.length||"."!==i.charAt(e.nc))throw new m("Something went wrong with parsing a WebVTT Cue timestamp");e.Pb(1);const l=ue(i,WE,e),d=x(l,10);if(c>59||r>59)throw new m("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+d/1e3}function GE(t){return ZE(DE(t))}function ZE(t){if(t.length<AE)return!1;for(const e of SE)if(Cl(t,e))return!0;return!1}function HE(t){return fh(TE,t)}function XE(t,e){for(;e.nc<t.length&&HE(t.charAt(e.nc));)e.Pb(1)}function zE(t){const e=t.lastIndexOf("%");if(e>-1){const i=C(t.substring(0,e));if(!S(i)&&i>=0&&i<=100)return i}return null}function qE(t,e){const i=t.toLowerCase();switch(i){case"start":case"center":case"end":case"left":case"right":e.fF=i;break;case"middle":e.fF="center"}}function YE(t,e){let i,s;const n=t.indexOf(",");if(n>=0?(i=t.substring(0,n),s=t.substring(n+1,t.length)):(i=t,s=""),!EE.test(i))return;let r,o;if(nm(i,"%")){const t=zE(i);if(null===t)return;r=t,o=!1}else{if(!xE.test(i)||i.lastIndexOf("-")>0)return;const t=i.indexOf(".");if(t>=0&&(t!==i.lastIndexOf(".")||!RE.test(i)||IE.test(i)))return;if(r=C(i),S(r))return;o=!0}switch(e._F=r,e.pF=o,s=s.toLowerCase(),s){case"start":case"center":case"end":e.vF=s;break;case"middle":e.vF="center"}}function KE(t,e){let i,s;const n=t.indexOf(",");n>=0?(i=t.substring(0,n),s=t.substring(n+1,t.length)):(i=t,s="");const r=zE(i);if(null!==r)switch(e.fo=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":e.gF=s;break;case"start":e.gF="line-left";break;case"middle":e.gF="center";break;case"end":e.gF="line-right"}}function jE(t,e,i){const s=sr(i,(e=>e.o===t));void 0!==s&&(e.mF=s)}function QE(t,e){const i=zE(t);null!==i&&(e.Ob=i)}function JE(t,e){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":e.Pt="rl";break;case"lr":case"vertical:lr":case"vertical-lr":e.Pt="lr";break;default:e.Pt=""}}function $E(t,e){"VERTICAL"===t.toUpperCase()?e.Pt="rl":"VERTICAL-LR"===t.toUpperCase()&&(e.Pt="lr")}function tx(t){if(t.indexOf(",")>=0){const e=zE(t.substring(0,t.indexOf(","))),i=zE(t.substring(t.indexOf(",")+1,t.length));return[bi(e||0,0,100),bi(i||100,0,100)]}return null}function ex(t,e){e.o=t}function ix(t,e){"up"===t.toLowerCase()&&(e.LF="up")}function sx(t,e){kE.test(t)&&(e.DF=x(t))}function nx(t,e){const i=zE(t);null!==i&&(e.ji=i)}function rx(t){return t&&"qx"in t?t.qx:t}r(),r(),r();var ox=class extends He{get fW(){return this._W}get vW(){return this.gW}get uW(){return this.mW}get pW(){return this.wW}get wa(){return this.eu||(this.eu=function(t){return Qr(ai(t),{get extent(){return t.fW},get styles(){return t.vW},get regions(){return t.uW},get metadata(){return rx(t.pW)},get content(){return rx(t.U)}})}(this)),this.eu}RF(t){return!!Et(this.fW,t.fW)&&(!!Et(this.vW,t.vW)&&(!!Et(this.uW,t.uW)&&(this.pW&&t.pW?!!this.pW.Vx(t.pW)&&(this.U&&t.U?this.U.Vx(t.U):this.U===t.U):this.pW===t.pW)))}constructor(t,e,i,s,n,r,o,h){super(t,e,i,s),this._W=n,this.gW=r,this.mW=o,this.wW=h||void 0}};r();var hx=class{get yW(){return this.Nf.Wx(!0)}get lF(){return this.bW}get dF(){return this.AW}constructor(t,e,i){this.bW=t,this.AW=e,Oh(i)?this.Nf=function(t,e,i){for(const t of["begin","end","dur"])i.$x(t);return i}(0,0,i):this.Nf=i}};r();var ax="http://www.w3.org/XML/1998/namespace";function ux(t,e,i,s){let n=t.zx(i,e);return 0===n.length&&(n=t.Hx(s+":"+e)),n}function cx(t){const e={};for(const i of t.Kx)e[i.Mx]=i.Fx;return e}var lx=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,dx=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,fx="http://www.w3.org/ns/ttml";function _x(t,e,i,s){void 0===i&&(i=bE),void 0===s&&(s=ba.APPLICATION_TTML_XML);let n=[];const r=sa(t);return s===ba.APPLICATION_MP4?n=function(t,e,i){const s=Es.cN(t),n=Rn(s,Ai.TD);if(!n)return[];return mx(sa(n.$k),e,i)}(r,e,i):s===ba.APPLICATION_TTML_XML&&(n=mx(r,e,i)),n}function vx(t,e,i){return void 0===i&&(i=bE),px(t,e,i)}function gx(t,e){const i=kx(e.yW),s={};for(const e of i)s[e]=t[e];return s}function mx(t,e,i){return px(cp(t,new er),e,i)}function px(t,e,i){const s=[];let n;try{n=As.Nx(t)}catch(t){return s}const r=n.sI;if("tt"!==r.Mx)return s;const o=r.zx(fx,"head")[0],h=r.zx(fx,"body")[0];if(!h||!o)return s;const a=yx(r.Qx("tts:extent")),u=a?{width:a[0],height:a[1]}:void 0,c=function(t){const e={},i=t.zx(fx,"styling")[0],s=i&&i.zx(fx,"style")||[];for(const t of s){e[t.Jx(ax,"id")]=cx(t)}return e}(o),l=function(t){const e={},i=t.zx(fx,"layout")[0],s=i&&i.zx(fx,"region")||[];for(const t of s){const i=t.Jx(ax,"id");if(!i)continue;e[i]=cx(t);const s=Tx(t);for(const t in s)Da.call(s,t)&&(e[i][t]=s[t])}return e}(o),d=a?function(t,e){const i=Fa(t);for(const t of w.keys(i)){const s=yx(i[t].extent);if(s){const n=wx(s[0],e[0]),r=wx(s[1],e[1]);i[t].extent=n+" "+r}const n=yx(i[t].origin);if(n){const s=wx(n[0],e[0]),r=wx(n[1],e[1]);i[t].origin=s+" "+r}}return i}(l,a):l,f=o.zx(fx,"metadata")[0],_=bx(h,i.oW,i.hW,i.aW);for(const t of _){const e=gx(d,t);s.push(new ox(t.lF,t.dF,t.yW,!1,u,c,e,f))}return s}function wx(t,e){return t/e*100+"%"}function yx(t){if(!t)return;const e=t.split(" ",2);if(2!==e.length)return;const[i,s]=e;if(!nm(i,"px")||!nm(s,"px"))return;return[Number(i.slice(0,-2)),Number(s.slice(0,-2))]}function bx(t,e,i,s){let n,r=e,o=i,h=[];const a=[];if(Oh(t)){var u,c;r=null!=(u=Sx(t.Qx("begin"),s))?u:r,n=Sx(t.Qx("dur"),0),o=null!=(c=Sx(t.Qx("end"),s))?c:void 0!==n?r+n:o;const e=t.Ux;for(let i=0;i<e.length;i++)("body"===t.Mx||"div"===t.Mx)&&e[i].Dx>1||(h=h.concat(bx(e[i],r,o,s)))}const l=function(t,e,i){const s=[];s.push(t,e);for(const t of i)s.push(t.lF,t.dF);s.sort(Va);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(wa(s,t+1),t--,n=s.length);return s}(r,o,h);for(let e=0;e<l.length-1;e++){const i=Ax(l[e],l[e+1],h);if(i.length<=0&&Ex(t)){const i=t.Wx(!1);a.push(new hx(l[e],l[e+1],i))}else if(i.length>0){const s=t.Wx(!1);i.forEach((t=>s.Yx(t.yW))),a.push(new hx(l[e],l[e+1],s))}}return a}function Ax(t,e,i){const s=[];for(let n=0;n<i.length;n++){const r=i[n].lF,o=i[n].dF;(r>=t&&o<=e||r<e&&o>=e||r<t&&o>t)&&s.push(i[n])}return s}function Sx(t,e){if(t){if(lx.test(t)){const i=lx.exec(t);if(!i)return;const s=Number(i[1])||0,n=Number(i[2])||0,r=Number(i[3])||0,o=i[6];return 3600*s+60*n+r+(o?Number(o)*.1**o.length:0)+e}if(dx.test(t)){const i=dx.exec(t);if(!i)return;const s=Number(i[1]);let n;switch(i[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+e}}}function Tx(t){const e={},i=t.Hx("style")||[];for(const t of i){const i=cx(t);for(const t in i)Da.call(i,t)&&(e[t]=i[t])}return e}function kx(t){let e,i=[];if(Oh(t)){e=t.Qx("region"),e&&i.push(e);const s=t.Ux;for(let t=0;t<s.length;t++)i=i.concat(kx(s[t]))}return i}function Ex(t){if(Oh(t)){const e=t.Mx.toUpperCase(),i=Boolean(t.Qx("smpte:backgroundImage"));return"BR"===e||i}return t.Dx===za.Rk}function xx(t){const e=function(t){try{return As.Nx(t).sI}catch(t){}}(t);return"tt"===(null==e?void 0:e.Mx)}r(),r();var ca=class extends io{tt(t){return super.tt(t)}it(t){const e=super.it(t);return e&&(t.LE=Ui.Mh),e}ka(){return bS(this)}};r(),r();var Hi=function(t){return t.TW="subtitles",t.kW="captions",t.EW="descriptions",t.Jn="chapters",t.xW="metadata",t.IW="thumbnails",t}({}),Ix=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function Rx(t){return"string"==typeof t&&fh(Ix,t)}function Cx(t,e){return!(!Rx(t)||!Rx(e))&&(t===e||"subtitles"===t&&"captions"===e||"captions"===t&&"subtitles"===e)}r();var Px=class extends Z{constructor(t,e,i,s,n){super(t,e,n),this.url=i,this.status=s}};function Dx(t){return t===Hi.TW||t===Hi.kW}function Nx(t){return t.some(Mx)}function Mx(t){return Xa(t,"stpp")}function Lx(t){return t.some(Bx)}function Bx(t){return Xa(t,"vtt")||Xa(t,"wvtt")}function Ox(t,e){return Xh(t)&&Lx(e)}function Fx(t,e){return t===Hi.IW||t===Hi.xW&&e===Hi.IW}function Vx(t,e,i,s){for(const n of t.L.mC){if(n.lF>i)break;e<=n.dF&&!fh(s,n)&&s.push(n)}}function Wx(t,e){return Qd(t.OC,e.OC)}function Ux(t,e,i,s){const n=function(t){switch(t){case Hr.WEBVTT:return"WebVTT";case Hr.SRT:return"SRT";case Hr.TTML:return"TTML";default:return""}}(t);return new Px(Ci.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",e,i,s)}function go(t,e){const i=[];for(const s of t.L.mC)if(s.dF<=e)i.push(s);else if(s.lF>=e)break;for(const e of i)t.RW(e)}function Gx(t,e){if(t.V>0){const i=t.Sn(0),s=_.max(0,i-10);for(const t of e)t.PW(s)}}var Zx=class extends So{tt(t){t.bn(gs.da,this.DW),this.Z.tt(t),this.NW(t)}it(t){t.vn(gs.da,this.DW),t.LE=Ui.Mh,this.Z.it(t)}MW(t){}LW(t){}NW(t){t.LE!==Ui.Mh?this.MW(t):this.LW(t)}BW(){for(const t of this.Z.mC)t.vn(gs.da,this.DW),t.yn()}PW(t){if(t>0)for(const e of this.Z.mC)go(e,t)}nr(){return this.BW(),this.Z.nr(),Promise.resolve()}async yn(){this.Ro(),await this.nr(),this.Z.yn()}constructor(...t){super(...t),this.Z=new ca,this.DW=t=>{const e=t.Ht;this.NW(e)}}};r();var Hx=class extends $s{get error(){return this.errorObject.message}ka(){return this}constructor(t){super(bo.fa),this.errorObject=t}},Xx=class extends Zx{OW(t){if(!t.src)return;const e=t.kind||Hi.TW,i=this.FW.ZR(e,t.id,t.label,t.srclang,t.default);return i.zC=Ks(t.src),this.tt(i),i}async VW(t,e){t.aR=Bu.LOADING;const i=new Gr({Xu:t.zC,tE:Te.Rk,EE:Ce.GET,ep:e});let s,n;try{const t=await this.WW.eE(i);n=t.Jk,s=await t.Mk()}catch(e){return ih(e),t.aR=Bu.ERROR,void t._o(new Hx(function(t,e){let i=e,s=0;if(Li(t)&&t.name===zc.zE)i=t.eE.Xu;else if(TA(t)){const e=t.jE;if(i=e.rE,s=e.Jk,0===s)return new Px(Ci.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",i,s,t)}return new Px(Ci.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",i,s,t)}(e,t.zC)))}try{const e=function(t){return GE(t)?Hr.WEBVTT:xx(t)?Hr.TTML:Hr.SRT}(s);t.zw=e;let i=[];if(e===Hr.WEBVTT||e===Hr.SRT){i=PE(s).L}else e===Hr.TTML&&(i=vx(s,t));for(const e of i)t.UW(e)}catch(e){return ih(e),t.aR=Bu.ERROR,void t._o(new Hx(Ux(t.zw,t.zC,n,e)))}t.aR=Bu.LOADED}MW(t){fh(this.Z.mC,t)&&t.aR===Bu.NONE&&this.VW(t,this.GW.ep).catch(vf)}$n(){}async nr(){this.GW.np(),this.GW=new Fi;for(const t of this.Z.mC)this.FW.ZW(t);await super.nr()}constructor(t,e){super(),this.GW=new Fi,this.FW=t,this.WW=e}};function zx(t,e){for(const i of t)if(i.Lt===e&&i.XW)return i}function qx(t,e){Yx(zx(t.mC,e))}function Yx(t){void 0!==t&&(t.LE=Ui.Qn)}function Kx(t,e){const i=zx(t.mC,e)||function(t,e){for(const i of t)if(i.Lt===e)return i}(t.mC,e);Yx(i)}function jx(t){for(const e of Ix)e===Hi.Jn?Kx(t,e):qx(t,e)}r(),r();var W=class extends me{constructor(){super(ns.$y)}};r(),r();var De=function(t){return t[t.zW=0]="zW",t[t.qW=1]="qW",t}({});r(),r();var Pa=class extends me{constructor(t){super(Zc.aB),this.currentTime=t}};r();var Xr=class extends me{constructor(t){super(Zc.uB),this.currentTime=t}},Qx=[Zc.aC,Zc.uB,ns.ho,ns.Ky],I=class extends So{YW(t){!this.KW&&t>=Wt.Xn&&(this.KW=!0,this._o(new vo(this.jW.RI,t)))}QW(t){!this.JW&&t>=Wt.kO&&(this.JW=!0,this._o(new uo(this.jW.RI,t)))}$W(t){this.tU||(t>=Wt.EO&&this.eU<Wt.EO&&!this.jW.JI||this.iU&&t>=Wt.EO)&&this._o(new Xr(this.jW.RI))}sU(t){!this.nU(t)||this.jW.MI||this.jW.lt||this._o(new Pa(this.jW.RI))}rU(t){this.eU<=Wt.kO&&t>=Wt.EO&&this._o(new rt(this.jW.RI,t))}maybeDispatchCanPlayThroughEvent(t){t===Wt.xO&&this._o(new $i(this.jW.RI,t))}nU(t){const e=!this.jW.JI&&t<=Wt.kO,i=!this.oU&&this.eU<=Wt.kO;return e&&!i}get iU(){return!this.jW.JI&&this.oU}nr(){this.eU=Wt.TO,this.oU=!0,this.JW=!1,this.KW=!1}yn(){this.Ro(),this.tU&&this.jW.vn(Zc.uB,this.hU),this.jW.vn(ns.ho,this.aU),this.jW.vn(ns.Ky,this.uU),this.jW.vn(Zc.aC,this.cU)}constructor(t,e=!1){super(),this.jW=t,this.tU=e,this.eU=Wt.TO,this.oU=!0,this.JW=!1,this.KW=!1,this.cU=t=>{const e=this.jW.aR;e!==this.eU&&this._o(new oa(t.currentTime,e)),e===Wt.TO&&(this.JW=!1,this.KW=!1),this.YW(e),this.QW(e),this.rU(e),this.maybeDispatchCanPlayThroughEvent(e),this.$W(e),this.sU(e),this.eU=e},this.aU=()=>{this.sU(this.eU),this.$W(this.eU),this.oU=this.jW.JI},this.uU=()=>{this.oU=this.jW.JI},this.hU=t=>{this._o(new Xr(t.currentTime))},this.jW.bn(Zc.aC,this.cU),this.jW.bn(ns.ho,this.aU),this.jW.bn(ns.Ky,this.uU),this.tU&&this.jW.bn(Zc.uB,this.hU)}},Jx=class extends So{get RI(){return this.jW.RI}get MI(){return this.jW.MI}get lt(){return this.jW.lt}get JI(){return this.jW.JI}get aR(){return this.jW.aR}Km(){this.Ro(),this.jW.vn(Qx,this.Ds)}constructor(t){super(),this.jW=t,this.jW.bn(Qx,this.Ds)}};r(),r(),r(),r();var Kh=class{lU(){return this.dU}fU(t){this.dU=t}get mI(){return this.WW}get _U(){return!1}get vU(){const t=this.gU.certificate;if(t)return oi(t)?Yu(t):Uh(t)}mU(){return this.gU.licenseAcquisitionURL||this.lU()}get pU(){return!1}wU(t){return Promise.resolve()}yU(t,e){return Promise.resolve(void 0)}get DE(){return Boolean(this.gU.useCredentials)}async bU(t,e,i,s){const n=this.AU(t,e,i,s);if(""===n.Xu)throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.mI.eE(n);return await t.Lk(e)}catch(t){return ih(t),void await this.SU(t,n.Xu,s)}}AU(t,e,i,s){const n=this.TU().Ck(),r=this.DE,o={Xu:this.kU(),tE:e,iE:n,Vk:t,DE:r,EE:Ce.POST,xE:0,ep:s,zw:Bn.cE,CE:i};return new Gr(o)}EU(t,e){return Promise.resolve(t)}xU(t,e,i,s){return Promise.resolve(t)}TU(){return new Cb(this.gU.headers||{})}async SU(t,e,i){throw new kh(Ci.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}kU(t,e){let i=e;const s=this.gU.queryParameters;if(!i){const t=this.mU();if(!t)return"";i=t}if(s||t){const e=As.Bh(i);t&&oA(e,t),s&&oA(e,s),i=e.href}return i}IU(t,e){return $x(t)}RU(t){return new j(t)}async CU(t,e,i){const s=await this.IU(t,i),n=await this.bU(s,this.PU,e,i);return this.RU(n)}yn(){}constructor(t,e,i,s,n){this.dU=void 0,this._T=t,this.DU=e,this.NU=i,this.WW=s,this.PU=n,this.gU=this.MU(e)}};function $x(t){return Promise.resolve(cc(t).buffer)}var Ju=class extends Kh{MU(t){return t.widevine||{}}async LU(t,e){return this.vU?this.vU:this.BU(new j(t),e)}BU(t,e){return super.CU(t,Cu._E,e)}constructor(t,e,i,s){super(Qg,t,e,i,s)}};r();var tI=function(t){return t.Uw="Widevine",t.OU="PlayreadyV2",t.FU="PlayreadyV3",t.Ww="PlayreadyV2",t.Hw="Fairplay",t}({}),eI={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function iI(t,e){var i,s,n,r;const o=eI[e],h=t.accountName;return{CustomerName:t.customerName,AccountName:h,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(i=As.Sw)?void 0:i.Ys,OSVersion:null==(s=As.Sw)?void 0:s.Mw,DRMProvider:o.DRMProvider,DRMVersion:o.DRMVersion,DRMType:o.DRMType,DeviceVendor:null==(n=As.Sw)?void 0:n.Lw,DeviceModel:null==(r=As.Sw)?void 0:r.Bw}}}function sI(t,e){if(!t.accountName)throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, accountName is not set.");if(!t.customerName)throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, customerName is not set.");if(!t.portalId)throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, portalId is not set.");throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration.")}function nI(t,e,i){let s;if(_T(t))s={AuthToken:t.authToken,Payload:e};else{if(!vT(t))throw sI(t,i);s={LatensRegistration:iI(t,i),Payload:e}}return pc(JSON.stringify(s))}async function rI(t,e,i){const s=t.jE;if(!s)throw new kh(Ci.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,e);const n=s;let r,o;try{r=await n.Nk(i),o=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){o=""}throw new kh(Ci.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.eE.Xu,n.Jk,n.sE,o)}r();var oI=class extends Ju{static VU(){return As.Ys.kp?"required":"optional"}SU(t,e,i){return rI(t,e,i)}wU(t){return this.WU?Lu(this.WU.Xb,t):(this.WU=new is,Promise.resolve())}async IU(t,e){const i=this.DU;if(!i)throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return nI(i,na(t),tI.Uw)}RU(t){let e;if(!t.license)throw new kh(Ci.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return e=Yu(t.license),e}UU(t){return Promise.resolve(new j(t))}async LU(t,e){this.GU();const i=await this.IU(t,e),s=await this.bU(i,Te.Ek,Cu.vE,e);return await this.UU(s)}async BU(t,e){const i=await super.BU(t,e);return this.GU(),i}GU(){this.WU||(this.WU=new is),this.WU.Zb()}yn(){this.WU&&this.WU.np(),super.yn()}constructor(t,e,i){super(t,e,i,Te.xk),this.WU=void 0}};r();var hI=class extends Ju{get ZU(){if(gT(this.DU))return this.DU.token}async IU(t,e){const i=await $x(t),s=this.NU,n=dp(new j(i)),r=this.ZU;if(void 0===r)throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:s})}constructor(t,e,i){super(t,e,i,Te.Ek),this.fU("https://widevine-proxy.drm.technology/proxy")}};function aI(t,e){let i=e||{};return t.ticket&&t.sessionId&&(i=ne({},i,{SessionId:t.sessionId,Ticket:t.ticket})),ne({},i,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}r(),r();var uI=class extends Ju{kU(t,e){let i=t;return lT(this.DU)&&(i=aI(this.DU,i)),super.kU(i,e)}constructor(t,e,i){super(t,e,i,Te.Ek),this.fU("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}};r(),r();var cI="Conax-Custom-Data";function lI(t,e,i){const s=t&&cT(t)&&t;if(s&&!i.has(cI)){const t=jS(s)?s.token:void 0,n=jS(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:e+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});i.set(cI,r)}return i}var dI=class extends Ju{TU(){const t=super.TU();return lI(this.DU,"Widevine",t)}constructor(t,e,i){super(t,e,i,Te.Ek),this.fU("https://connect.conax.com:8094/license")}};function fI(t){const e=Nh(new j(t));return Yu(JSON.parse(e).license)}function _I(t){return"string"==typeof t.token?t.token:pc(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function vI(t,e,i){let s;return s=i.token?"x-dt-auth-token":"dt-custom-data",t.set(s,e),t}r(),r();var gI=class extends Ju{get ZU(){return _I(this.DU)}RU(t){return fI(t)}TU(){return vI(super.TU(),this.ZU,this.DU)}constructor(t,e,i){super(t,e,i,Te.Ek),this.fU("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}};r();var mI=class extends Ju{TU(){const t=super.TU(),e=this.DU.token;return t.set("Authorization","Bearer "+e),t}constructor(t,e,i){super(t,e,i,Te.Ek)}};async function pI(t,e,i,s){if(!mT(t))throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new Cb;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const o=t.streamId;let h;h=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:e,licenseType:h,streamId:o},u={Xu:t.ticketAcquisitionURL,tE:Te.xk,iE:n,EE:Ce.POST,Vk:JSON.stringify(a),ep:s},c=await i.eE(u);return await c.Nk()}r(),r();var wI=class extends Ju{TU(){const t=super.TU();return t.set("Content-Type","application/json"),t}async IU(t,e){const i=yp(t.buffer),s=this.DU,n=await pI(s,"widevine_modular",this.mI,e);this.fU(n.licenseServerUrl);const r=rp(JSON.stringify({payload:i,ticket:n.ticket}));return super.IU(r,e)}RU(t){return Yu(t.license)}constructor(t,e,i){super(t,e,i,Te.xk)}};r();var yI=class extends Ju{TU(){if(!pT(this.DU))throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.TU();return t.set("X-AxDRM-Message",this.DU.token),t}constructor(t,e,i){super(t,e,i,Te.Ek)}};function bI(t){const e=new j(2*t.length);for(let i=0;i<t.length;i+=1)e[2*i]=t.charCodeAt(i),e[2*i+1]=0;return e}r();var sc=class extends Kh{MU(t){return t.playready||{}}TU(){const t=new Cb(this.HU);return t.Dk(super.TU()),t}XU(t){return t.length>=1&&t[0].Ux.length>0}yU(t){const e=this.DU.playready.customData;if(e){const t=bI(e),i=bI('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+na(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{PT:i}})}return super.yU(t)}async IU(t,e){const i=await $x(t);return this.zU(i)}async zU(t){var e,i;let s=null;const n=ip(new DataView(t),new er,!0);let r;try{r=As.Nx(n)}catch(t){return s}const o=null==(e=r.Hx("PlayReadyKeyMessage")[0])?void 0:e.Hx("LicenseAcquisition")[0];var h;const a=null!=(h=null==o?void 0:o.Hx("Challenge"))?h:[];this.XU(a)&&(s=su(a[0].jx));const u=new Cb;var c;const l=null!=(c=null==o||null==(i=o.Hx("HttpHeaders")[0])?void 0:i.Hx("HttpHeader"))?c:[];for(const t of l){const e=t.Hx("name")[0].jx,i=t.Hx("value")[0].jx;u.append(e,i)}return this.HU=u,s}LU(t,e){return Promise.resolve(t)}BU(t,e){return super.CU(t,Cu.gE,e)}constructor(t,e,i){super(jg,t,e,i,Te.Ek),this.HU=void 0}};r(),r();var AI=class t{static qU(t){return"3"===t.version?tI.FU:tI.OU}YU(){const t={};if(this.NS===tI.FU){const e={LatensRegistration:iI(this.KU,tI.FU)};t["X-TITANIUM-DRM-CDATA"]=pc(JSON.stringify(e))}return t}get jU(){return this.NS}get ST(){return this.NS===tI.OU}constructor(e){this.KU=e,this.NS=t.qU(e)}};var SI=class extends sc{yU(t){const e=this.DU;if(!this.DU)throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(vT(e)){const t={};return t.playready={PT:TI(e,this.QU.jU)},Promise.resolve(t)}return Promise.reject(sI(e,tI.Ww))}TU(){const t=new Cb(this.QU.YU());return t.Dk(super.TU()),t}async SU(t,e,i){const s=t.jE;if(!s)throw new kh(Ci.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e);let n,r;try{const t=await s.Bk(i),e=Nh(new j(t)),h=As.Nx(e);if(h){const t=function(t,e){return function(t,e){const i=t.m.slice(),s=[];for(;i.length>0;){const t=i.shift();e(t)?s.push(t):i.push(...t.m)}return s}(t,(t=>t.Xx===e))}(h,"CustomData");var o;if(t.length>0)n=JSON.parse(t[0].jx),r=null==(o=n.DrmErr)?void 0:o.desc}}catch(t){}throw new kh(Ci.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e,s.Jk,s.sE,r)}XU(t){if(1!==t.length)throw new kh(Ci.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,e,i){super(t,e,i),this.QU=new AI(this.DU)}};function TI(t,e){const i=iI(t,e),s=i.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+pc('<LatensRegistration formatversion="'+s+'"><AccountName>'+i.AccountName+"</AccountName><CustomerName>"+i.CustomerName+"</CustomerName><PortalID>"+i.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+i.DeviceInfo.DeviceType+"</DeviceType><OSType>"+i.DeviceInfo.OSType+"</OSType><OSVersion>"+i.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+i.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+i.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+i.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+i.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+i.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=hp(n,!0);return hp('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+na(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}r();var kI=class extends sc{get ZU(){if(gT(this.DU))return this.DU.token}XU(t){if(1!==t.length)throw new kh(Ci.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}kU(t,e){const i=ne({},t||{},{token:this.ZU});return super.kU(i,e)}constructor(t,e,i){super(t,e,i),this.fU("https://playready-license.drm.technology/rightsmanager.asmx")}};r();var EI=class extends sc{kU(t,e){let i=t;return lT(this.DU)&&(i=aI(this.DU,i)),super.kU(i,e)}constructor(t,e,i){super(t,e,i),this.fU("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}};r();var xI=class extends sc{TU(){const t=super.TU();return lI(this.DU,"PlayReady",t)}constructor(t,e,i){super(t,e,i),this.fU("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}};r();var II=class extends sc{get ZU(){return _I(this.DU)}RU(t){const e=function(t){const e=Nh(new j(t));return Cl(e,"<?xml")?0:1}(t);return 1===e?fI(t):super.RU(new j(t))}TU(){return vI(super.TU(),this.ZU,this.DU)}constructor(t,e,i){super(t,e,i),this.fU("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};r();var RI=class extends sc{TU(){const t=super.TU();return this.JU&&t.set("Ticket",this.JU),t.set("Content-Type","text/xml"),t}async IU(t,e){const i=this.DU,s=await pI(i,"playready",this.mI,e);return this.fU(s.licenseServerUrl),this.JU=s.ticket,super.IU(t,e)}constructor(t,e,i){super(t,e,i)}};r();var CI=class extends sc{TU(){if(!pT(this.DU))throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.TU();return t.set("X-AxDRM-Message",this.DU.token),t}};r(),r();var du=function(t){return t.xk="application/json",t.$U="application/x-www-form-urlencoded",t.tG="application/octet-stream",t.Rk="text/plain;charset=UTF-8",t}({}),hs=class extends Kh{get pU(){return!0}eG(){return this.gU.certificateURL||this.iG}sG(t){this.iG=t}IU(t){return Promise.resolve(this.nG(t,this.rG))}nG(t,e){return"spc="+encodeURIComponent(na(t))+"&assetId="+encodeURIComponent(e)}get oG(){return du.$U}MU(t){return t.fairplay||{}}hG(t){const e=t.indexOf("?");if(e>=0)return Promise.resolve(t.substr(e+1));{const e=t.split("skd://").pop();if(e){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e))return Promise.resolve(e)}const i=t.split("/");return Promise.resolve(i[i.length-1])}}async yU(t){var e;const i=null!=(e=this.aG)?e:Zh(new j(t)),s=await this.hG(i);this.rG=s;const n={};return n.fairplay={WT:s},n}TU(){const t=super.TU();return t.set("Content-Type",this.oG),t}async LU(t,e){return this.vU?this.vU:await this.uG(e)}BU(t,e){return super.CU(t,Cu.dE,e)}cG(t){const e=this.eG(),i=this.TU(),s={Xu:e,tE:Te.Ek,iE:i,EE:Ce.GET,DE:!1,Vk:null,xE:0,ep:t,zw:Bn.cE,CE:Cu.fE};return new Gr(s)}async uG(t){const e=this.cG(t),i=await this.mI.eE(e),s=await i.Bk();return new j(s)}RU(t){let e;if("string"==typeof t){let i=t.trim();"<ckc>"===i.substr(0,5)&&"</ckc>"===i.substr(-6)&&(i=i.slice(5,-6)),e=Yu(i)}else e=new j(t);return e}kU(t,e){let i=super.kU(t,e);return Cl(i,"skd:")&&(i=i.substr(4)),i}constructor(t,e,i,s,n){super(t._T,e,i,s,n),this.rG="",this.iG=void 0,this.aG=t.lG}};r();var PI=class extends hs{get oG(){return du.tG}hG(t){let e=t.split("://",1);return"skd"!==e[0].slice(-3).toLowerCase()?Promise.resolve(""):(e=t.split(";",2),e.length>1?Promise.resolve(e[1]):Promise.resolve(super.hG(t)))}async IU(t){return t}RU(t){return new j(t)}kU(t,e){const i=t||{};return i.p1=qf(),super.kU(i,e)}constructor(t,e,i,s){super(t,e,i,s,Te.Ek)}};r();var DI=class extends hs{get oG(){return du.xk}get ZU(){if(!gT(this.DU))throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.DU.token}nG(t,e){const i={token:this.ZU,contentId:e,payload:na(t)};return JSON.stringify(i)}RU(t){return new j(t)}TU(){const t=super.TU();return t.set("x-vudrm-token",this.ZU),t}constructor(t,e,i,s){super(t,e,i,s,Te.Ek),this.fU("https://fairplay-license.drm.technology/license"),this.sG("https://fairplay-license.drm.technology/certificate")}};r();var NI="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",MI="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",LI=class extends hs{RU(t){const e=function(t){let e;try{e=JSON.parse(t).ckc}catch(t){throw new kh(Ci.CONTENT_PROTECTION_LICENSE_INVALID,NI)}if(!e)throw new kh(Ci.CONTENT_PROTECTION_LICENSE_ERROR,MI);return e}(Nh(new DataView(t)));return super.RU(e)}constructor(t,e,i,s){super(t,e,i,s,Te.Ek)}};r();var BI=class extends hs{get oG(){return du.xk}async IU(t){const e=this.DU;if(!e)throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return nI(e,na(t),tI.Hw)}RU(t){try{let e;if(oi(t)){const i=t.trim();e=JSON.parse(i)}else e=t;if(e.license){const t=su(e.license);return new j(t)}throw new kh(Ci.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new kh(Ci.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}SU(t,e,i){return rI(t,e,i)}constructor(t,e,i,s){super(t,e,i,s,Te.xk)}};r();var OI=class extends hs{eG(){const t=super.eG();if(!t)return t;const e=As.Bh(t),i=this.DU;return lT(i)&&oA(e,{accountId:i.accountId,applicationId:i.applicationId||""}),e.href}hG(t){return lT(this.DU)?Promise.resolve(this.DU.contentId):super.hG(t)}async IU(t){return t}RU(t){return new j(t)}get oG(){return du.tG}kU(t,e){let i=t;return lT(this.DU)&&(i=function(t,e){return ne({},aI(t,e),{KeyId:t.keyId})}(this.DU,i)),super.kU(i,e)}constructor(t,e,i,s){super(t,e,i,s,Te.Ek),this.fU("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.sG("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}};r();var FI=class extends hs{TU(){const t=super.TU();return lI(this.DU,"FairPlay",t)}async uG(t){const e={Xu:this.eG(),tE:Te.Ek,iE:{},EE:Ce.GET,DE:!1,Vk:null,xE:0,ep:t,zw:Bn.cE,CE:Cu.fE},i=await this.mI.eE(e),s=await i.Bk();return new j(s)}async IU(t){return t}hG(t){const e=t.indexOf("?");if(0===t.indexOf("skd://")){let i;return i=e>=0?t.substring(6,e):t.substring(6),Promise.resolve(function(t){return Nh(Yu(t))}(i))}return Promise.resolve("unknown")}RU(t){try{const e=JSON.parse(t);return new j(su(e.CkcMessage))}catch(t){throw new m("CFLRW-66")}}constructor(t,e,i,s){if(super(t,e,i,s,Te.Rk),!cT(e))throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.fU("https://connect.conax.com:8097/license")}};r();var VI=class extends hs{hG(t){return Cl(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new kh(Ci.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}nG(t,e){return"spc="+na(t)+"&assetId="+e}constructor(t,e,i,s){super(t,e,i,s,Te.Rk),this.fU(nT[O.Hw])}};r();var WI=class extends hs{get ZU(){return _I(this.DU)}nG(t,e){const i="spc="+encodeURIComponent(na(t))+"&"+encodeURI(e);return"persistent"===this.gU.licenseType?i+"&offline=true":i}TU(){return vI(super.TU(),this.ZU,this.DU)}constructor(t,e,i,s){super(t,e,i,s,Te.Rk),this.fU("https://lic.drmtoday.com/license-server-fairplay/")}};r();var UI=class extends hs{hG(t){let e=t;return Cl(e,"skd:")&&(e="http:"+e.substring(4)),Cl(e,"http:")||Cl(e,"https:")?Promise.resolve(As.Bh(e).hostname):Promise.reject(new m("Could not parse ExpressPlay FairPlay content ID."))}async IU(t){return t}RU(t){return new j(t)}get oG(){return du.tG}constructor(t,e,i,s){super(t,e,i,s,Te.Ek)}};r();var GI=class extends hs{TU(){const t=super.TU(),e=this.DU.token;return t.set("Authorization","Bearer "+e),t}constructor(t,e,i,s){super(t,e,i,s,Te.Rk)}};r();var ZI=class extends hs{async uG(t){const e=this.eG(),i=this.TU(),s={Xu:e,tE:Te.xk,iE:i,EE:Ce.POST,ep:t,zw:Bn.cE,CE:Cu.fE},n=await this.mI.eE(s),r=await n.Nk();return new j(Yu(r.certificate))}get oG(){return du.xk}async BU(t,e,i){void 0===i&&(i=Te.Rk);const s=na(t),n=this.DU,r=await pI(n,"fairplay",this.mI,e),o=rp(JSON.stringify({spc:s,ticket:r.ticket})),h={Xu:this.mU(),tE:Te.xk,iE:this.TU(),EE:Ce.POST,Vk:o,xE:0,ep:e,zw:Bn.cE,CE:Cu.dE},a=await this.mI.eE(h);return Yu((await a.Nk()).licence)}constructor(t,e,i,s){if(super(t,e,i,s,Te.xk),!mT(e))throw new m("Invalid Xstream DRM configuration")}};r();var HI=class extends hs{nG(t,e){return na(t)}RU(t){if(0===t.length)throw new kh(Ci.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.RU(t)}TU(){const t=super.TU();return t.set("Content-Type","text/plain"),t}constructor(t,e,i,s){super(t,e,i,s,Te.Rk)}};r();var XI=class extends hs{get oG(){return du.xk}nG(t,e){return t}RU(t){return new j(t)}TU(){if(!pT(this.DU))throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.TU();return t.set("X-AxDRM-Message",this.DU.token),t}constructor(t,e,i,s){super(t,e,i,s,Te.Ek)}};r();var zI=class extends hs{get oG(){return du.Rk}nG(t,e){const i={spc:na(t)};return JSON.stringify(i)}hG(t){const e=As.Bh(t);return this.dG=t,e.searchParams.has("b")?Promise.resolve(e.searchParams.get("b")):Promise.reject(new kh(Ci.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}kU(t,e){let i=this.mU();return!i&&this.dG&&(i=this.dG),i&&(i=i.replace("skd://","https://")),super.kU(t,e||i)}RU(t){try{let e;if(e=oi(t)?JSON.parse(t.trim()):t,e.ckc)return Yu(e.ckc)}catch(t){throw new kh(Ci.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new kh(Ci.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,e,i,s){super(t,e,i,s,Te.xk),this.dG=void 0}};r(),r(),r();var qI=class{fG(t){return this._G(t)}vG(t,e){throw new g(e+" must be "+this.gG+". (Received: "+t+")")}constructor(t,e){this._G=t,this.gG=e}},mt=(new qI((function(t){return!0}),"any"),new qI(Vr,"a number")),ul=new qI(oi,"a string"),YI=new qI(yd,"a boolean"),Fh=(new qI(bd,"a date"),new qI(Sh,"undefined")),KI=new qI(Vt,"an object"),jI=new qI((function(t){return null===t}),"null");new qI((function(t){return null==t}),"null or undefined");function QI(t,e){throw new g(e+" has an incorrect type")}var JI=class{fG(t){if(!Vt(t))return!1;for(const e of w.keys(this.jp)){if(!this.jp[e].fG(t[e]))return!1}return!0}vG(t,e){if(!Vt(t))throw new g(e+" must be an object.");for(const i of w.keys(this.jp)){const s=this.jp[i];if(!s.fG(t[i]))return s.vG(t[i],e+"."+String(i))}throw new g}constructor(t){this.jp=t}};function ze(t){return new JI(t)}function $I(t){return w.keys(t).map((e=>t[e]))}var tR=class{fG(t){return fh(this.p_,t)}vG(t,e){return QI(0,e)}constructor(t){this.p_=t}};function eR(t){return new tR(t)}var iR=class{fG(t){return this.mG.some((e=>e.fG(t)))}vG(t,e){return QI(0,e)}constructor(t){this.mG=t}};function Ae(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return new iR(e)}var sR=class{fG(t){return Qc(t)&&t.every((t=>this.pG.fG(t)))}vG(t,e){if(!Qc(t))throw new g(e+" must be an array.");for(let i=0;i<t.length;i++){const s=t[i];this.pG.fG(s)||this.pG.vG(s,e+"["+i+"]")}return QI(0,e)}constructor(t){this.pG=t}};function fc(t){return new sR(t)}var nR=class{fG(t){return Vt(t)&&w.keys(t).every((e=>this.pG.fG(t[e])))}vG(t,e){if(!Vt(t))throw new g(e+" must be an object.");for(const i of w.keys(t))if(!this.pG.fG(t[i]))return this.pG.vG(t[i],e+"."+i);return QI(0,e)}constructor(t){this.pG=t}};function rR(t){return new nR(t)}var oR=class{fG(t){return this.pG().fG(t)}vG(t,e){return this.pG().vG(t,e)}constructor(t){this.pG=Wd(t)}};var hR=ze({responseCode:mt,isException:YI,description:ul,title:ul,correlationId:ul});async function aR(t,e,i,s,n){const r=function(t,e,i,s){const n={token:e.token,account:e.accountId,form:"json"},r=decodeURIComponent(Vc(i,n)),o=new Cb({});o.append("Content-Type","application/json");const h=na(t),a={getFairplayLicense:{releasePid:e.releasePid,spcMessage:h}};return{Xu:r,tE:Te.Rk,iE:o,EE:Ce.POST,Vk:JSON.stringify(a),ep:s,zw:Bn.cE,CE:Cu.dE}}(t,e,i,n);return await async function(t,e){const i=await e.eE(t),s=await i.Nk();if(hR.fG(s))throw new kh(Ci.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.Xu,s.responseCode);return Yu(s.getFairplayLicenseResponse.ckcResponse)}(r,s)}var uR=class extends hs{hG(t){const e=t.replace("FairPlay",this.wG.releasePid);return super.hG(e)}async BU(t,e){return await aR(t,this.wG,this.mU(),this.mI,e)}constructor(t,e,i,s){super(t,e,i,s,Te.Ek),this.wG=e}};r();var cR=class extends Kh{MU(t){return t.clearkey||{}}async bU(t,e,i,s){const n=this.gU;if(this.mU())return super.bU(t,this.PU,i,s);if(n.keys&&n.keys.length){const t={keys:n.keys.map((t=>({kty:"oct",kid:t.id,k:t.value})))};return up(JSON.stringify(t)).buffer}throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}LU(t,e){return Promise.resolve(new j(0))}async BU(t,e){const i=await super.CU(t,Cu.mE,e),s=JSON.parse(Zh(i));if(s.keys)for(const t of s.keys)t.k&&(t.k=Rm(t.k)),t.kid&&(t.kid=Rm(t.kid));return up(JSON.stringify(s))}constructor(t,e,i,s){super(t,e,i,s,Te.Ek)}},lR=class extends cR{constructor(t,e,i){super(Ao,t,e,i)}},dR=class extends cR{constructor(t,e,i){super(tm,t,e,i)}};r();var fR=class extends Ju{};r(),r();var _R={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function vR(t,e,i){const s=AR(e),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(e);const r=await Lu(Promise.resolve(n.call(t,s)),i);return lp(r)?Uh(r):bR(ne({},_R,r))}async function gR(t,e,i,s,n){const r=t.onCertificateResponse,o=yR(e,i,s);if(!r||"function"!=typeof r)return Promise.resolve(e);return Uh(await Lu(Promise.resolve(r.call(t,o)),n))}async function mR(t,e,i,s){const n=await async function(t,e,i,s){const n=null==t?void 0:t.onLicenseRequest,r=wR(e,i);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const o=await Lu(Promise.resolve(n.call(t,r)),s);if(lp(o))return Uh(o).buffer;return ne({fairplaySkdUrl:void 0},_R,o)}(t,e,i,s);return n instanceof ArrayBuffer?n:bR(n)}async function pR(t,e,i,s,n,r){const o=wR(i,n),h=await async function(t,e,i,s,n){const r=null==t?void 0:t.onLicenseResponse,o=yR(e,i,s);if(!r||"function"!=typeof r)return Promise.resolve(e);0;const h=await Lu(Promise.resolve(r.call(t,o)),n);return Uh(h)}(t,new j(e),o,s,r);return Uh(h)}function wR(t,e){return ne({},AR(t),{fairplaySkdUrl:e})}function yR(t,e,i){return{url:i.rE,status:i.Jk,statusText:i.sE,headers:i.iE.Ck(),body:t,request:e}}function bR(t){return new Gr({Xu:t.url,EE:t.method,iE:t.headers,Vk:t.body,DE:t.useCredentials,zw:Bn.cE})}function AR(t){var e;return{url:t.Xu,body:null!=(e=SR(t.Vk))?e:null,headers:t.iE.Ck(),method:t.EE,useCredentials:t.DE}}function SR(t){if(t)return"string"==typeof t?up(t):t instanceof ArrayBuffer?new j(t):vc(t)?Lr(t):void 0}var TR=class extends sc{LU(t,e){return Promise.resolve(t)}async BU(t,e){const i=await this.zU(cc(t).buffer),s=this.AU(i,Te.Ek,Cu.gE,e),n=await mR(this.yG,s,void 0,e);if(n instanceof ArrayBuffer)return new j(n);if(""===n.Xu)throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.mI.eE(n),i=await t.Bk(e);return await pR(this.yG,i,s,t,void 0,e)}catch(t){throw ih(t),new kh(Ci.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,e,i,s){super(t,e,i),this.yG=s}};r();var kR=class extends fR{async LU(t,e){if(this.vU)return this.vU;const i=this.AU(t,Te.Ek,Cu.vE,e),s=await vR(this.yG,i,e);if(s instanceof j)return s;if(""===s.Xu)throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this.mI.eE(s),r=await n.Bk(e)}catch(t){throw ih(t),new kh(Ci.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const o=wR(i,void 0);return await gR(this.yG,new j(r),o,n,e)}async BU(t,e){const i=this.AU(t,Te.Ek,Cu._E,e),s=await mR(this.yG,i,void 0,e);if(s instanceof ArrayBuffer)return new j(s);if(""===s.Xu)throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.mI.eE(s),n=await t.Bk(e);return await pR(this.yG,n,i,t,void 0,e)}catch(t){throw ih(t),new kh(Ci.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,e,i,s){super(t,e,i,Te.Ek),this.yG=s}};r();var ER=class extends hs{async LU(t,e){if(this.vU)return this.vU;const i=this.cG(e),s=await vR(this.yG,i,e);if(vc(s))return s;try{const t=await this.mI.eE(s),n=await t.Bk(),r=wR(i,void 0);return await gR(this.yG,new j(n),r,t,e)}catch(t){throw ih(t),new kh(Ci.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async BU(t,e){const i=this.AU(t,Te.Ek,Cu.dE,e),s=await mR(this.yG,i,this.bG,e);if(s instanceof ArrayBuffer)return new j(s);if(""===s.Xu)throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.mI.eE(s),n=await t.Bk(e);return await pR(this.yG,n,i,t,this.bG,e)}catch(t){throw ih(t),new kh(Ci.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}hG(t){var e;return this.bG=t,(null==(e=this.yG)?void 0:e.extractFairplayContentId)?Promise.resolve(this.yG.extractFairplayContentId(t)):super.hG(t)}constructor(t,e,i,s,n){super(t,e,i,s,Te.Ek),this.yG=n}},xR=class{AG(t,e,i,s){switch(t._T.zw){case O.Uw:return this.SG(e,i,s);case O.Ww:return this.TG(e,i,s);case O.Hw:return this.kG(t,e,i,s);case O.Zw:return this.EG(e,i,s);case O.Gw:default:return this.xG(e,i,s)}}SG(t,e,i){const s=function(t){return t.integration===zS&&oi(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&$S.TP.bP(s,Vg)){const n=$S.TP.SP(s,Vg,t);return new kR(t,e,i,n)}switch(s){case DS:return new oI(t,e,i);case BS:return new hI(t,e,i);case LS:return new uI(t,e,i);case NS:return new dI(t,e,i);case FS:return new gI(t,e,i);case WS:return new mI(t,e,i);case US:return new wI(t,e,i);case ZS:return new yI(t,e,i);default:return new fR(t,e,i,Te.Ek)}}TG(t,e,i){const s=t.integration;if(s&&$S.TP.bP(s,Og)){const n=$S.TP.SP(s,Og,t);return new TR(t,e,i,n)}switch(s){case DS:return new SI(t,e,i);case BS:return new kI(t,e,i);case LS:return new EI(t,e,i);case NS:return new xI(t,e,i);case FS:return new II(t,e,i);case US:return new RI(t,e,i);case ZS:return new CI(t,e,i);default:return new sc(t,e,i)}}kG(t,e,i,s){const n=e.integration;if(n&&$S.TP.bP(n,Zi)){const r=$S.TP.SP(n,Zi,e);return new ER(t,e,i,s,r)}switch(n){case MS:return new PI(t,e,i,s);case BS:return new DI(t,e,i,s);case OS:return new LI(t,e,i,s);case DS:return new BI(t,e,i,s);case LS:return new OI(t,e,i,s);case NS:return new FI(t,e,i,s);case yr:return new VI(t,e,i,s);case FS:return new WI(t,e,i,s);case VS:return new UI(t,e,i,s);case WS:return new GI(t,e,i,s);case US:return new ZI(t,e,i,s);case GS:return new HI(t,e,i,s);case ZS:return new XI(t,e,i,s);case HS:return new zI(t,e,i,s);case XS:return new uR(t,e,i,s);default:return new hs(t,e,i,s,Te.Rk)}}xG(t,e,i){return new lR(t,e,i)}EG(t,e,i){return new dR(t,e,i)}IG(t){return t.zw===O.Ww||t.zw===O.Uw||t.zw===O.Hw||t.zw===O.Gw||t.zw===O.Zw}ST(t,e){var i;if(t.zw!==O.Ww)return!1;if(ol(null==(i=e.playready)?void 0:i.customData))return!0;const s=e.integration;return(!s||!$S.TP.bP(s,Zi))&&(s===DS&&new AI(e).ST)}VU(t,e){if(t.zw!==O.Uw)return;const i=e.integration;return i&&$S.TP.bP(i,Zi)?void 0:i===DS?oI.VU():void 0}};r(),r(),r();var IR="theoplayer-stored-network-info-v2",RR=25e5,bu=class{CG(t){var e;const i=null==(e=As.dI)?void 0:e.Vb(t);if(void 0===i)return;const s=JSON.parse(i);if(void 0!==s&&void 0!==s[this.DG]){if(!this.NG(s))return s[this.DG].availableBandwidth;var n;null==(n=As.dI)||n.Wb(t,JSON.stringify({}))}}MG(){const t=this.CG(IR);if(void 0!==t)return t;const e=this.CG("theoplayer-stored-network-info");return e?8*e:void 0}NG(t){const e=t[this.DG].storedTimestamp;return!!e&&qf()-e>36e5}BG(t){this.OG=t,this.FG()}VG(){var t;return null!=this.OG||(this.OG=null!=(t=this.MG())?t:RR),this.OG}constructor(){this.DG=Rb,this.OG=void 0,this.FG=Fd((()=>{var t;const e={[this.DG]:{availableBandwidth:this.OG,storedTimestamp:qf()}};null==(t=As.dI)||t.Wb(IR,JSON.stringify(e))}),1e4)}};bu.Vm=new bu,r();var CR=function(t){return t[t.WG=0]="WG",t[t.UG=1]="UG",t[t.GG=2]="GG",t[t.ZG=3]="ZG",t[t.HG=4]="HG",t[t.XG=5]="XG",t[t.iP=6]="iP",t[t.zG=7]="zG",t[t.qG=8]="qG",t[t.oP=9]="oP",t[t.YG=10]="YG",t[t.hP=11]="hP",t[t.KG=12]="KG",t}({});r();var Qo=class{get jG(){return 0}get QG(){return 0}JG(t){}};r(),r();var PR=class extends me{constructor(t){super("contentProtectionsTracked"),this.$G=t}},Jh=class extends So{tZ(t){this.KU=t}VU(t){const e=this.KU;if(void 0!==e)return this.eZ.VU(t,e)}ST(t){const e=this.KU;return void 0!==e&&this.eZ.ST(t,e)}iZ(t){const e={_T:t._T,sZ:t.sZ||[],nZ:t.nZ,lG:t.lG,rZ:t.rZ||[]},i=this.eZ.AG(e,this.KU||{},t.NU,this.WW);return e.nZ&&i.fU(e.nZ),new DR(i)}oZ(t){if(!t)return;Do(t,(t=>void 0!==t.NU))&&this._o(new PR(t))}constructor(t,e=new xR){super(),this.KU=void 0,this.WW=t,this.eZ=e}},DR=class{wU(t){return this.hZ.wU(t)}yU(t,e,i){return this.hZ.yU(e,i)}pU(){return this.hZ.pU||void 0!==this.hZ.vU}LU(t,e){return this.hZ.LU(t,e)}BU(t,e,i){return e&&this.hZ.fU(e),this.hZ.BU(t,i)}Km(){this.hZ.yn()}constructor(t){this.hZ=t}};r();var uu=class extends io{aZ(t){this.uZ.push(t);for(const e of t.mC)this.tt(e);this.cZ(t)}lZ(t){_e(this.uZ,t),this.dZ(t);for(const e of t.mC)this.fZ(e)||this.it(e)}fZ(t){for(const e of this.uZ)if(e.yC(t))return!0;return!1}cZ(t){t.bn(je.XR,this._Z),t.bn(je.qR,this.vZ)}dZ(t){t.vn(je.XR,this._Z),t.vn(je.qR,this.vZ)}yn(){for(;this.uZ.length>0;)this.lZ(this.uZ[0]);super.yn()}ka(){return bS(this)}constructor(t){super(),this.uZ=[],this._Z=t=>{this.tt(t.Ht)},this.vZ=t=>{const e=t.Ht;this.fZ(e)||this.it(e)};for(const e of t)this.aZ(e)}};r(),r();var NR,MR={forceSeekOffset:0,maximumOffset:0,maximumPlaybackRate:0,minimumOffset:0,minimumPlaybackRate:0,targetOffset:0},LR=class{get wa(){return null!=this.eu||(this.eu=function(t){return{get enabled(){return t.Rt},set enabled(e){t.Rt=bc(e)},get monitoringLivePlayback(){return t.gZ},get currentLatency(){return t.mO},get currentConfiguration(){return function(t){if(void 0!==t)return{get minimumOffset(){return t.minimumOffset},get maximumOffset(){return t.maximumOffset},get targetOffset(){return t.targetOffset},get forceSeekOffset(){return t.forceSeekOffset},get minimumPlaybackRate(){return t.minimumPlaybackRate},get maximumPlaybackRate(){return t.maximumPlaybackRate}}}(t.kd)}}}(this)),this.eu}get Rt(){var t,e;return null!=(e=this.qe)?e:Boolean(null==(t=this.mZ)?void 0:t.Rt)}set Rt(t){this.qe=t,this.mZ&&(this.mZ.Rt=t)}get gZ(){var t,e;return null!=(e=null==(t=this.mZ)?void 0:t.UB)&&e}get mO(){var t;return null==(t=this.mZ)?void 0:t.gO}get kd(){return this.mZ?this.mZ.GB:MR}Aa(t){this.mZ=t,void 0!==this.qe&&(this.mZ.Rt=this.qe)}nr(){this.mZ=void 0,this.qe=void 0}};var BR=Boolean(s&&s.TextTrack),OR=class extends en{get mO(){}get pZ(){const t=this.aO.SI,e=this.RI;return t.wr(e,.01)}get ht(){return this.LO}get SI(){return this.aO.SI.ks()}get kI(){return this.aO.kI}set kI(t){t&&this.aO.wZ(t)}get bt(){return this.Sc}get RI(){return void 0!==this.yZ?this.yZ:this.aO.RI}set RI(t){this.DI(t)}DI(t,e){this.ZI&&(this.yZ=t),this.aO.Db(t)}get ct(){return this.aO.ct}get MI(){return this.aO.MI}get lt(){return this.bZ}get OI(){return this.AZ}get VI(){}get UI(){}get ZI(){return this.aO.ZI}get XI(){return ne({},{WO:0,UO:0,GO:0,ZO:0,HO:0,XO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.aO.zI())}get qI(){return this.aO.qI}set qI(t){this.aO.qI=t}get jI(){return!0}get JI(){return this.aO.JI}get tR(){return this.aO.tR}set tR(t){this.aO.tR=t}get sR(){return this.aO.SZ.played}get rR(){return this.TZ}set rR(t){this.TZ=t,this.kZ&&(this.kZ.rR=t)}get aR(){return this.aO.aR}get cR(){return this.aO.cR.ks()}get dR(){return this.aO.dR}get EZ(){return this.aO.EZ}get nt(){return this.Hl}get rt(){return this.FO}get vR(){return this.aO.vR}get pR(){return this.aO.pR}get yR(){return this.aO.yR}set yR(t){this.aO.yR=t}get SR(){return this.xZ}get ER(){return this.aO.ER}set ER(t){this.aO.ER=t}get IZ(){return this.RZ}be(){this.aO.be()}ge(){this.aO.ge()}async Ca(t,e,i){Io(i),this.Sc=t;const s={zw:De.zW,zC:t.src,Fk:t.type,CZ:this.PZ(t),rR:this.TZ,DZ:t.crossOrigin,NZ:e.metadata&&e.metadata.title};this.MZ.tZ(t.contentProtection),this.kZ=await this.aO.$n(s),Io(i),e.textTracks&&this.LZ(e.textTracks),jx(this.nt)}LZ(t){for(const i of t)if(this.aO.BZ()&&Ya.su&&BR&&!Fx(i.kind,i.label)&&this.OZ(i)){var e;const t=null!=(e=i.kind)?e:Hi.TW;this.aO.FZ(i.src,t,i.label,i.srclang,i.default)}else{if(void 0===i.src)continue;this.VZ.OW(i)}}OZ(t){return!t.format||"webvtt"===t.format}async DR(){try{await this.aO.DR()}catch(t){}for(;!this.pZ;)await this.aO.Ay(ns.jy)}PR(){this.aO.PR()}MR(){return void 0!==this.aO.SZ.webkitShowPlaybackTargetPicker}LR(){this.aO.SZ.webkitShowPlaybackTargetPicker&&this.aO.SZ.webkitShowPlaybackTargetPicker()}OR(){this.aO.SZ.webkitShowPlaybackTargetPicker&&this.aO.SZ.webkitShowPlaybackTargetPicker()}IR(){return this.aO.SZ}xR(){return this.aO.Sa}ja(){return this.aO.WZ}ZR(t){return this.aO.UZ(t)}async nr(){this.Sc=void 0,this.bZ=void 0,this.AZ=void 0,this.kZ=void 0,await this.VZ.nr(),this.aO.GZ(),await this.aO.nr(),this.ZZ.nr(),this.rR=this.TZ,this.ht.nr(),this.rt.nr(),this.yZ=void 0}async yn(){await this.nr(),this.Ro(),this.HZ(),this.XZ(),this.ZZ.yn(),this.aO.zZ=void 0,await this.YZ.qZ(this.aO),this.LO.yn(),this.FO.yn(),this.Hl.yn(),await this.VZ.yn()}KZ(){this.aO.bn(ns.ho,this.Ds),this.aO.bn(ns.Ky,this.Ds),this.aO.bn(ns._b,this.Tc),this.aO.bn(ns.jy,this.Ds),this.aO.bn(ns.Hy,this.Ds),this.aO.bn(ns.ib,this.Ds),this.aO.bn(ns.eb,this.jZ),this.aO.bn(ns.Ly,this.Ds),this.aO.bn(ns.Qy,this.Ds),this.aO.bn(ns.vb,this.Ds),this.aO.bn(ns.Dy,this.Ds),this.aO.bn(ns.$y,this.QZ),this.aO.bn(Zc.uB,this.fO),this.aO.bn(bo.fa,this.JZ),this.aO.bn(ns.Ry,this.Ds),this.aO.bn(ns.Iy,this.$Z),this.aO.SZ.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.tH)}HZ(){this.aO.vn(ns.ho,this.Ds),this.aO.vn(ns.Ky,this.Ds),this.aO.vn(ns._b,this.Tc),this.aO.vn(ns.jy,this.Ds),this.aO.vn(ns.Hy,this.Ds),this.aO.vn(ns.ib,this.Ds),this.aO.vn(ns.eb,this.jZ),this.aO.vn(ns.Ly,this.Ds),this.aO.vn(ns.Qy,this.Ds),this.aO.vn(ns.vb,this.Ds),this.aO.vn(ns.Dy,this.Ds),this.aO.vn(ns.$y,this.QZ),this.aO.vn(Zc.uB,this.fO),this.aO.vn(bo.fa,this.JZ),this.aO.vn(ns.Ry,this.Ds),this.aO.vn(ns.Iy,this.$Z),this.aO.SZ.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.tH)}PZ(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{_T:Jg,eH:[{initDataTypes:[Jg.Yw],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}iH(){const t=this.aO.SZ.audioTracks,e=this.aO.SZ.videoTracks;t&&(t.addEventListener("addtrack",this.sH),t.addEventListener("removetrack",this.nH),t.addEventListener("change",this.rH)),e&&(e.addEventListener("addtrack",this.oH),e.addEventListener("removetrack",this.hH),e.addEventListener("change",this.aH))}XZ(){const t=this.aO.SZ.audioTracks,e=this.aO.SZ.videoTracks;t&&(t.removeEventListener("addtrack",this.sH),t.removeEventListener("removetrack",this.nH),t.removeEventListener("change",this.rH)),e&&(e.removeEventListener("addtrack",this.oH),e.removeEventListener("removetrack",this.hH),e.removeEventListener("change",this.aH))}ah(t){for(let e=0;e<t.V;e++){t.wC(e).rF()}}FR(){this.aO.FR()}WR(){}uH(t,e){this.bZ||(this.bZ=e,this.AZ=t,this._o(new Pi(t)))}constructor(t,e,i,s,n,r,o=new xR,h=Sb()){super(),this.kZ=void 0,this.Sc=void 0,this.bZ=void 0,this.AZ=void 0,this.RZ=new Qo,this.xZ=new LR,this.JZ=t=>{const e=t.lt,i=e.code,s=new Z(Ik(i),"Something went wrong during native playback.",e),n=new iu(i,s.message,e.message);this.uH(s,n)},this.Tc=()=>{this._o(new rl(this.RI,this.kI))},this.cH=()=>{!this.dR&&Ya.su&&Ya.$g&&this.ct===1/0&&this.DI(1/0)},this.jZ=t=>{this.JI||(this.yZ=void 0),this._o(t)},this.fO=t=>{this.yZ=void 0},this.tH=()=>{this._o(new Wk(this.ZI))},this.QZ=()=>{this.pR>0&&this.vR>0&&this._o(new W)},this.sH=t=>{const e=this.aO.SZ.audioTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];WR(this.LO,i)||this.LO.tt(new Ok(i))}},this.nH=t=>{const e=[],i=this.aO.SZ.audioTracks;if(i){for(const t of this.LO.mC)UR(i,t.sF)||e.push(t);for(const t of e)this.LO.it(t)}},this.rH=()=>{this.ah(this.LO)},this.oH=t=>{const e=this.aO.SZ.videoTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];WR(this.FO,i)||this.FO.tt(new Vk(i))}},this.hH=t=>{const e=[],i=this.aO.SZ.videoTracks;if(i){for(const t of this.FO.mC)UR(i,t.sF)||e.push(t);for(const t of e)this.FO.it(t)}},this.aH=()=>{this.ah(this.FO)},this.$Z=t=>{this._o(t),this.uH(t.errorObject,Zs(t.errorObject))},this.YZ=e,this.WW=i,this.ey=h,this.aO=this.YZ.lH(Fo.yE),this.TZ=this.aO.SZ.preload,this.ZZ=new I(this.aO,!0),this.ZZ.bn(co,this.Ds),this.ZZ.bn(Zc.hB,this.cH),this.MZ=new Jh(i,o),this.aO.zZ=this.MZ,this.KZ(),this.LO=new an,this.FO=new an,this.iH(),this.VZ=new Xx(this.aO,this.WW),this.Hl=new uu([this.aO.nt]),this.ge()}};function FR(t){var e,i;if(!(null==(e=(NR||(NR=s&&s.document&&s.document.createElement("video")),i=NR).canPlayType)?void 0:e.call(i,t.type)))return!1;if(t.useNativePlayback)return!0;const n=Ya.su||Ya.Cm;return!t.useManagedMediaSource||!n}var VR=class{mP(t,e,i,s,n,r,o){return new OR(t,e,i,s,n,r)}dH(t,e){return FR(t)}fH(t){return AT(t)}_H(){return!1}constructor(){this.vH=CR.KG}};function WR(t,e){for(const i of t.mC)if(i.sF===e)return i}function UR(t,e){for(let i=0;i<t.length;i++)if(t[i]===e)return!0;return!1}var GR=class{static gH(){return this.Vm}mH(t){this.pH.push(t)}get vH(){return this.wH.vH}mP(t,e,i,s,n,r,o){let h=this.wH.mP(t,e,i,s,n,r,o);for(const t of this.pH)h=t(h,i,s);return h}dH(t,e){return this.wH.dH(t,e)}fH(t){return this.wH.fH(t)}_H(){return!1}constructor(){this.wH=new VR,this.pH=[]}};function ZR(t,e){return Qd(t.vH,e.vH)}GR.Vm=new GR,r(),r();var HR=class{yH(t){this.bH.push(t),this.bH.sort(ZR)}async AH(t,e){for(const i of this.bH){const s=i.dH(t,e);if(ei(s)?await s:Boolean(s))return i}}constructor(){this.bH=[]}};function et(t){XR.Vm.yH(t)}r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r();var XR=class extends HR{SH(t){this.TH=t}kH(){return this.TH}async EH(t,e){const i=this.TH;let s=!1;for(const n of t){const t=await this.AH(n,e);if(t){if(uT(n.contentProtection)||await t.fH(n.contentProtection))return{Cc:n,t:t};n.contentProtection&&(s=!0)}const r=i.dH(n,e);if(ei(r)?await r:Boolean(r)){if(uT(n.contentProtection)||await i.fH(n.contentProtection))return{Cc:n,t:i};n.contentProtection&&(s=!0)}}if(s)throw await As.fw()?new Z(Ci.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported."):new Z(Ci.CONTENT_PROTECTION_NOT_SUPPORTED,"The DRM configuration is not supported by this platform.");return{Cc:t[0],t:i}}constructor(...t){super(...t),this.TH=GR.gH()}};XR.Vm=new XR,r();var zR=class{yn(){We(this.Vs)}constructor(t){this.Vs=s&&s.document&&s.document.createElement("div"),Ka(this.Vs),t.appendChild(this.Vs)}};r(),r();var hi=function(t){return t.KG="",t.xH="none",t.xW="metadata",t.bO="auto",t}({});var qR=[bo.fa,ns.Ny,ns.My,ns.bb,ns.Sy,ns.By,ns.Fy,ns.qy,ns.Yy,ns.ob,ns.ub,Zc.nB,Zc.rB,Zc.oB,Zc.hB,Zc.aC,Zc.aB,Zc.uB,ns.Iy,ns.Ry,ns.Dy,ns.Ly,ns.Hy,ns.Xy,ns.ho,ns.jy,ns.Ky,ns.Qy,ns.$y,ns.ib,ns.eb,ns._b,ns.vb,ns.Jy,ns.zy,ns.sb],YR=class extends en{get ht(){return this.LO}get SI(){return this.na.SI}get lt(){return this.na.lt}get OI(){return this.na.OI}get kI(){return this.na.kI}set kI(t){this.na.kI=t}get bt(){return this.IH}get RI(){return this.na.RI}set RI(t){this.na.RI=t}get ct(){return this.na.ct}get MI(){return this.na.MI}get VI(){return this.OO}get UI(){return this.BO}get ZI(){return this.na.ZI}get XI(){return this.na.XI}get qI(){return this.na.qI}set qI(t){this.na.qI=t}get jI(){return this.na.jI}get JI(){return this.na.JI}get tR(){return this.na.tR}set tR(t){this.na.tR=t}get sR(){return this.na.sR}get rR(){return this.TZ}set rR(t){this.TZ=t,this.na&&(this.na.rR=this.TZ)}get aR(){return this.na.aR}get cR(){return this.na.cR}get dR(){return this.na.dR}get nt(){return this.Hl}get vR(){return this.na.vR}get rt(){return this.FO}get pR(){return this.na.pR}get yR(){return this.na.yR}set yR(t){this.na.yR=t}get SR(){return this.na.SR}get IZ(){return this.na.IZ}PR(){this.na.PR()}DR(){const t=this.na.DR();ei(t)&&uh(t)}NR(){return this.Ca(void 0)}RR(){}RH(){this.MO.bC=this.na.ja(),this.LO.bC=this.na.ht,this.FO.bC=this.na.rt,this.Hl.bC=this.na.nt,this.OO.bC=this.na.VI,this.BO.bC=this.na.UI,this.na.bn(qR,this.Ds)}CH(){this.na.vn(qR,this.Ds),this.LO.bC=void 0,this.FO.bC=void 0,this.Hl.bC=void 0,this.OO.bC=void 0,this.BO.bC=void 0}iu(){return this.PH}async Ca(t,e){if(Io(e),this.PH=t,!t)return;const i=t.sources.filter(nk);if(Gn(i))return;const s=await this.DH.EH(i,t);Io(e);const n=s.Cc,r=s.t,o=this.xR(),h=lk(this);(this.NH!==r||this.lt)&&(this.CH(),await this.na.yn(),Io(e),this.NH=r,this.na=this.MH(r,n),function(t,e){t.qI!==e.qI&&(t.qI=e.qI);t.yR!==e.yR&&(t.yR=e.yR);t.tR!==e.tR&&(t.tR=e.tR)}(this.na,h),fk(this,h,this),this.RH()),this.na.rR=this.rR,this.LH?this.na.ge():this.na.be(),await this.na.Ca(n,t,e),Io(e),this.BH(n),this.xR()!==o&&this._o(new Ki)}BH(t){this.IH!==t&&(this.IH=t,this._o(new vk(t)))}MR(){return this.na.MR()}LR(){this.na.LR()}OR(){this.na.OR()}xR(){return this.na.xR()}ja(){return this.MO}FR(){this.na.FR()}WR(){this.na.WR()}ZR(t){return this.na.ZR(t)}async nr(){this.PH=void 0,this.BH(void 0),await this.na.nr()}async yn(){this.Ro(),await this.nr(),await this.na.yn(),this.LO.yn(),this.FO.yn(),this.Hl.yn(),this.MO.yn(),this.OO.yn(),this.BO.yn()}ge(){this.LH=!0,this.na.ge()}be(){this.LH=!1,this.na.be()}constructor(t,e){super(),this.NH=void 0,this.IH=void 0,this.TZ=hi.xH,this.PH=void 0,this.LH=!0,this.LO=new pS,this.FO=new pS,this.Hl=new yt,this.OO=new Kc,this.BO=new Qi,this.DH=t,this.na=e,this.na.rR=this.rR,this.MO=new Lh(e.ja()),this.RH()}};r(),r(),r(),r();var Wi=function(t){return t.da="fullscreenchange",t.ga="fullscreensupportchange",t.fa="fullscreenerror",t}({});r();var KR=class extends me{constructor(){super(Wi.fa)}},ot=(Wi.da,Wi.ga,Wi.fa,class extends So{get cs(){return!1}get oa(){return!1}vo(){this._o(new KR)}xo(){}yn(){this.Ro()}});r(),r();var Co=class extends me{constructor(){super(Js.fa)}},ya=class extends So{get PO(){return!1}get CO(){return!1}async vo(){this._o(new Co)}async xo(){this._o(new Co)}yn(){this.Ro()}},jR=class extends So{get kI(){}set kI(t){}get bt(){}get RI(){return this.OH}set RI(t){this.DI(t)}DI(t,e){this.OH!==t&&(this.OH=t,this.FH=!0,this._o(new Al(this.RI)))}get XI(){return{WO:0,UO:0,GO:0,ZO:0,HO:0,XO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get qI(){return this.VH}set qI(t){this.VH!==t&&(this.VH=t,this._o(new Ar(this.RI,this.yR)))}get JI(){return this.WH}get tR(){return this.UH}set tR(t){this.UH!==t&&(this.UH=t,this._o(new ga(this.RI,this.tR)))}get dR(){return this.FH}get yR(){return this.jA}set yR(t){this.jA!==t&&(this.jA=t,this._o(new Ar(this.RI,this.yR)))}get ER(){return!1}set ER(t){}get IZ(){return this.RZ}get mO(){}ge(){}be(){}DR(){this.WH&&(this.WH=!1,this._o(new he(this.RI)),this._o(new Pa(this.RI)))}PR(){this.WH||(this.WH=!0,this._o(new rl(this.RI,this.kI)),this._o(new nl(this.RI)))}Ca(t,e){return Promise.resolve()}MR(){return!1}LR(){}OR(){}xR(){return this.ea}ja(){return this.ta}ZR(t){throw new m("Adding a CustomTextTrack is not supported without setting a source.")}FR(){}WR(){}async nr(){this.OH=0,this.FH=!1,this.PR(),this._o(new $t(this.OH))}async yn(){this.Ro(),this.ht.yn(),this.nt.yn(),this.rt.yn()}constructor(...t){super(...t),this.OH=0,this.VH=!1,this.WH=!0,this.UH=1,this.FH=!1,this.jA=1,this.ht=new an,this.SI=ee.WB().ks(),this.ct=NaN,this.MI=!1,this.lt=void 0,this.OI=void 0,this.VI=void 0,this.UI=void 0,this.ZI=!1,this.jI=!0,this.sR=ee.WB().ks(),this.rR=hi.xH,this.aR=Wt.TO,this.cR=ee.WB().ks(),this.EZ=void 0,this.nt=new ca,this.vR=0,this.rt=new an,this.pR=0,this.SR=new LR,this.RZ=new Qo,this.ea=new ot,this.ta=new ya}},QR=class extends jR{set GH(t){this.YZ=t,this.aO=t.lH(Fo.yE)}IR(){var t;return null==(t=this.aO)?void 0:t.SZ}async yn(){await super.yn(),this.aO&&(await this.YZ.qZ(this.aO),this.aO=void 0)}constructor(...t){super(...t),this.YZ=void 0,this.aO=void 0}},JR=class extends YR{get we(){return this.Cu}get ER(){return this.na.ER}set ER(t){this.na.ER=t}RR(){super.RR(),this.HH.ZH()}pr(t){dk(this,t)}dr(){}UR(t){return!1}async Ca(t,e){const i=this.xR(),s=this.IR();await super.Ca(t,e),this.xR()!==i&&this._o(new Ki),this.IR()!==s&&this._o(new gk)}DI(t,e){this.na.DI(t,e)}MH(t,e){return t.mP(this.Cu,this.HH,this.WW,this.FT,this.XH,this.zH,this.qH,e)}IR(){return this.na.IR()}AI(){return this.HH.YH.map((t=>t.SZ))}async yn(){await super.yn(),this.HH.yn(),this.KH.yn()}constructor(t,e,i,s,n,r,o){const h=new QR;super(XR.Vm,h),this.Cu=t,this.FT=e,this.WW=i,this.XH=s,this.zH=n,this.qH=o,this.HH=r,h.GH=r,this.KH=new zR(this.Cu)}};r(),r();var $R=class extends en{get ht(){return this.jH}get SI(){return ee.WB().ks()}get kI(){return new Date(NaN)}set kI(t){}get bt(){}get RI(){return 0}set RI(t){}DI(t,e){}get ct(){return 0}get we(){return this.Cu}get MI(){return!0}get lt(){return this.QH}get OI(){return this.JH}get VI(){}get UI(){}get XI(){return{WO:0,UO:0,GO:0,ZO:0,HO:0,XO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get qI(){return!1}set qI(t){}get jI(){return!0}get JI(){return!0}get tR(){return 0}set tR(t){}get sR(){return ee.WB().ks()}get rR(){return hi.xH}set rR(t){}get aR(){return Wt.TO}get cR(){return ee.WB().ks()}get dR(){return!1}get nt(){return this.$H}get vR(){return 0}get rt(){return this.jH}get pR(){return 0}get yR(){return 1}set yR(t){}get SR(){return this.xZ}get ER(){return!1}set ER(t){}UR(t){return!0}be(){}DR(){throw this._o(new Pi(this.JH)),this.QH}PR(){}iu(){}async Ca(t,e){throw Io(e),this._o(new Pi(this.JH)),this.QH}ge(){}NR(){return Promise.resolve()}IR(){}xR(){return this.ea}ja(){return this.ta}AI(){return[]}RR(){}pr(t){}dr(){}get ZI(){return!1}MR(){return!1}LR(){}OR(){}FR(){}WR(){}ZR(t){}nr(){return Promise.resolve()}yn(){return this.Ro(),this.jH.yn(),this.$H.yn(),Promise.resolve()}constructor(t,e,i){super(),this.ea=new ot,this.ta=new ya,this.xZ=new LR,this.Cu=t,this.QH=e,this.jH=new an,this.$H=new ca,this.JH=i}};function tC(t){if(t&&Vt(t))return ne({},t,{integration:eC(t.integration),fairplay:hC(t.fairplay),widevine:iC(t.widevine),playready:sC(t.playready),clearkey:aC(t.clearkey),aes128:uC(t.aes128),integrationParameters:cC(t.integrationParameters),preferredKeySystems:lC(t.preferredKeySystems),useOipfDrmAgent:bc(t.useOipfDrmAgent)})}function eC(t){if(oi(t))return t}function iC(t){if(t&&Vt(t))return{persistentState:nC(t.persistentState),distinctiveIdentifier:nC(t.distinctiveIdentifier),audioRobustness:rC(t.audioRobustness),videoRobustness:rC(t.videoRobustness),licenseAcquisitionURL:oi(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:oC(t.licenseType),headers:t.headers,useCredentials:!!yd(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:oi(t.certificate)||lp(t.certificate)?t.certificate:void 0}}function sC(t){if(!t)return;const e=iC(t);if(!e)return;return ne({},e,{customData:oi(t.customData)?t.customData:void 0})}function nC(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function rC(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function oC(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function hC(t){if(!t)return;const e=iC(t);if(!e)return;return ne({},e,{certificateURL:oi(t.certificateURL)?t.certificateURL:void 0})}function aC(t){if(!t)return;const e=iC(t);if(!e)return;const i=Qc(t.keys)?t.keys.map((t=>function(t){if(!t||!Vt(t))return;const e=t.id,i=t.value;if(!oi(e)||!oi(i))return;return{id:e,value:i}}(t))).filter(ol):void 0;return ne({},e,{keys:i})}function uC(t){if(Vt(t))return{useCredentials:yd(t.useCredentials)?t.useCredentials:void 0}}function cC(t){if(Vt(t))return t}function lC(t){return t&&Qc(t)?t.map((t=>yT(t))).filter(ol):[Vg,Og,Zi]}r(),r(),r(),r();var dC={bt:void 0,RI:0,ct:NaN,MI:!1,lt:void 0,OI:void 0,qI:!1,JI:!0,tR:1,aR:Wt.TO,dR:!1,vR:0,pR:0,yR:1};r();var vu=function(t){return t.DEFAULT="",t.THEO="theo",t.CSAI="csai",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor",t.THEOADS="theoads",t.UPLYNK="uplynk",t}({}),Ch=class{get tX(){return this.eX}iX(t){const e=this.eX.filter((e=>e.sX(t)));if(e.length>1)0;else if(0===e.length)throw m("Unknown ad integration: "+t.integration);return e[0]||null}nX(t){this.eX.push(t)}constructor(){this.eX=[]}};Ch.Vm=new Ch,r(),r(),r(),r();var ke=function(t){return t.uB="PLAYING",t.rX="PAUSED",t.oX="SEEK",t.hX="STALLED",t.aX="FAILED",t.uX="INITIAL_BUFFERING",t.cX="NO_ACCESS",t}({}),ra=function(t){return t.lX="HTTP_REQUEST_STATUS_CODE_1XX",t.dX="HTTP_REQUEST_STATUS_CODE_2XX",t.fX="HTTP_REQUEST_STATUS_CODE_3XX",t._X="HTTP_REQUEST_STATUS_CODE_4XX",t.vX="HTTP_REQUEST_STATUS_CODE_5XX",t.gX="BUFFER_LENGTH",t.mX="BYTES_RECEIVED",t.pX="SEGMENT_READ_BITRATE",t.wX="SEGMENT_PROFILE_BITRATE",t.yX="VIDEO_PROFILE_BITRATE",t.bX="NUMBER_OF_FRAMES_DROPPED",t.AX="PLAYBACK_POSITION",t.SX="NUMBER_OF_FRAMES_DECODED",t.TX="PLAYBACK_DELTA_TO_ORIGIN",t.kX="STREAM_DELTA_TO_ORIGIN",t.EX="ORIGIN_TIMESTAMP",t}({}),fC=function(t){return t.xX="MANIFEST_URI",t.IX="ASSET_DURATION",t.RX="NUMBER_OF_CONTENT_PROFILES",t.CX="CDN",t.PX="CONTENT_TITLE",t.DX="SERVICE_NAME",t.NX="CONTENT_TYPE",t.MX="CONTENT_DESCRIPTION",t}({}),_C=function(t){return t.LX="shutdown_normal_shutdown",t}({}),vC=function(t){return t.BX="session/",t.OX="content/",t.FX="internalError/",t.VX="drmError/",t.WX="caError/",t.UX="networkError/",t}({}),gC=class{get code(){return this.category+this.statusCode}constructor(t,e){this.category=t,this.statusCode=e}},mC=class extends So{};r(),r(),r();var pC=function(t){return t.PAUSE="GX",t.RESUME="ZX",t}({}),wC=class extends me{constructor(){super("HX")}},yC=class extends So{XX(){this.zX=!0}qX(){}yn(){this.zX=!1,this.YX.vn(pC.PAUSE,this.KX),this.YX.vn(pC.RESUME,this.jX)}QX(){return isFinite(this.na.jd())}constructor(t,e){super(),this.na=t,this.YX=e,this.zX=!1,this.KX=()=>{this.qX(),this.zX=!1},this.jX=()=>{this.zX=!0},this.YX.bn(pC.PAUSE,this.KX),this.YX.bn(pC.RESUME,this.jX)}},bC=class extends yC{XX(){super.XX(),this.JX()}yn(){this.$X(),super.yn()}JX(){this.na.bn(Zc.aB,this.tz),this.na.bn(ns.Ky,this.ez),this.na.bn(Zc.uB,this.iz),this.na.bn(ns.ib,this.nz),this.na.bn(ns.eb,this.rz)}$X(){this.na.vn(Zc.aB,this.tz),this.na.vn(ns.Ky,this.ez),this.na.vn(Zc.uB,this.iz),this.na.vn(ns.ib,this.nz),this.na.vn(ns.eb,this.rz)}oz(){this.cz=!0}lz(){const t=this.na.BI(),e=new gC(vC.FX,String(t.code));this.fz(ke.aX,e,t.message)}_z(t){this.zX&&(this.YX.vz(t),this._o(new wC))}fz(t,e,i){this.YX.gz(t,e,i),this._o(new wC)}mz(t,e){this.YX.pz(t,e)}constructor(...t){super(...t),this.cz=!1,this.wz=!1,this.yz=!1,this.tz=()=>{this.wz&&!this.yz&&this._z(ke.hX)},this.iz=()=>{this.na.JI||(this.wz||this.mz(new gC(vC.OX,"firstFrameDisplayed"),"now"),this.wz=!0,this._z(ke.uB))},this.ez=()=>{this.na.JI&&(this.wz=!0,this._z(ke.rX))},this.nz=()=>{this.cz&&(this.yz=!0,this.cz=!1,this._z(ke.oX))},this.rz=()=>{this.yz=!1,this.na.JI&&this._z(ke.rX)}}};r();var AC=class extends yC{XX(){super.XX(),this.bz(),this.JX()}yn(){this.$X(),super.yn()}JX(){this.na.rt.bn(gs.da,this.bz),this.na.Sz.Az(this.Tz),this.na.bn(ns.Dy,this.kz)}$X(){this.na.rt.vn(gs.da,this.bz),this.na.Sz.Ez(this.Tz),this.na.vn(ns.Dy,this.kz)}xz(t){t.serviceName&&this.Iz(fC.DX,t.serviceName),t.cdn&&this.Iz(fC.CX,t.cdn),t.contentTitle&&this.Iz(fC.PX,t.contentTitle),t.contentType&&this.Iz(fC.NX,t.contentType),t.contentDescription&&this.Iz(fC.MX,t.contentDescription)}Iz(t,e){this.zX&&this.YX.Rz(t,e)}constructor(...t){super(...t),this.kz=()=>{this.QX()&&this.Iz(fC.IX,_.round(this.na.jd()))},this.Tz=t=>{"manifest"===t.request.type&&this.Iz(fC.xX,t.url)},this.bz=()=>{const t=Do(this.na.rt.mC,(t=>t.Rt));t&&this.Iz(fC.RX,t.VC.V)}}};r();var SC=class extends yC{XX(){super.XX(),this.Cz=this.na.XI.WO,this.Pz=this.na.XI.GO,this.JX(),this.Dz.push(v(this.Nz,1e3))}qX(){super.qX(),this.Mz()}yn(){this.Mz(),this.$X(),this.Dz.forEach(p),En(this.Dz),super.yn()}JX(){this.na.Sz.Az(this.Lz),this.na.bn(ns.ub,this.Bz)}$X(){this.na.Sz.Ez(this.Lz),this.na.vn(ns.ub,this.Bz)}Oz(){this.Mz()}Fz(t){this.Vz+=t,this.Wz(ra.mX,this.Vz)}Uz(t,e){const i=this.Gz.get(e)||0;this.Wz(t,i)}Zz(){const t=this.na.XI.WO-this.Cz;this.Wz(ra.bX,t)}Xz(){const t=this.na.XI.GO-this.Pz;this.Wz(ra.SX,t)}zz(){const t=bu.Vm.VG();this.Wz(ra.pX,_p(t))}qz(t){this.Wz(ra.wX,_p(t)),this.Wz(ra.yX,_p(t))}Mz(){if(!this.QX())return;const t=_.round(An(this.na.CI()));this.Wz(ra.AX,t)}Yz(){const t=ee.Cn(this.na.TI()),e=this.na.CI(),i=t.BB(e),s=i?An(i.Tn(0)-e):0;this.Wz(ra.gX,s)}Wz(t,e){this.zX&&this.YX.Kz(t,e)}constructor(...t){super(...t),this.Gz=Vh(),this.Vz=0,this.Cz=0,this.Pz=0,this.Dz=[],this.Nz=()=>{this.Zz(),this.Xz(),this.Yz()},this.Bz=t=>{t.PE===Fo.yE&&(this.Fz(t.HO),this.zz(),this.qz(t.jz),this.Mz())},this.Lz=t=>{const e=t.status.toString()[0],i=this.Gz.get(e)||0;this.Gz.set(e,i+1),this.Uz(ra.lX,"1"),this.Uz(ra.dX,"2"),this.Uz(ra.fX,"3"),this.Uz(ra._X,"4"),this.Uz(ra.vX,"5")}}};r();function TC(t){return t&&t.integration===CC}function kC(t){if(!oi(t.asset))throw new g("Agama source configuration: expected 'asset' to be a string");if(!function(t){return!!oi(t)&&("live"===t||"vod"===t)}(t.streamType))throw new g("Agama source configuration: expected 'streamType' to be 'live' or 'vod'");if(void 0!==t.serviceName&&!function(t){return!!oi(t)&&("live"===t||"svod"===t||"nvod"===t||"tvod"===t||"avod"===t||"catchuptv"===t)}(t.serviceName))throw new g("Agama source configuration: expected 'serviceName' to be 'live', 'svod', 'nvod','tvod', 'avod' or 'catchuptv'");if(void 0!==t.cdn&&!oi(t.cdn))throw new g("Agama source configuration: expected 'cdn' to be a string");if(void 0!==t.contentTitle&&!oi(t.contentTitle))throw new g("Agama source configuration: expected 'contentTitle' to be a string");if(void 0!==t.contentType&&!oi(t.contentType))throw new g("Agama source configuration: expected 'contentType' to be a string");if(void 0!==t.contentDescription&&!oi(t.contentDescription))throw new g("Agama source configuration: expected 'contentDescription' to be a string");return t}function EC(t){if(!oi(t.config))throw new g("Agama player configuration: expected 'config' to be a string");if(void 0!==t.logLevel&&!function(t){return!!oi(t)&&("info"===t||"debug"===t||"warning"===t||"error"===t||"fatal"===t)}(t.logLevel))throw new g("Agama player configuration: expected 'logLevel' to be 'info', 'debug', 'warning','error' or 'fatal'");if(void 0!==t.application&&!oi(t.application))throw new g("Agama player configuration: expected 'application' to be a string");if(void 0!==t.applicationVersion&&!oi(t.applicationVersion))throw new g("Agama player configuration: expected 'applicationVersion' to be a string");if(void 0!==t.userAccountID&&!oi(t.userAccountID))throw new g("Agama player configuration: expected 'userAccountID' to be a string");if(void 0!==t.deviceID&&!oi(t.deviceID))throw new g("Agama player configuration: expected 'deviceID' to be a string");return t}function xC(){let t="00000000-0000-0000-0000-000000000000";const e=s.navigator,i=s.screen;let n=""+e.mimeTypes.length;n+=e.userAgent.replace(/\D+/g,""),n+=e.plugins.length,n+=i.height||"",n+=i.width||"",n+=i.pixelDepth||"",n+=_.floor(1e3*_.random());const r=function(t){let e,i,s=0;if(0===t.length)return"0";for(e=0;e<t.length;e++)i=t.charCodeAt(e),s=(s<<5)-s+i,s|=0;return _.abs(s).toString().substring(0,12)}(n);return t=[t.slice(0,t.length-r.length),r].join(""),t}function IC(t,e,i){const s=e,n=function(t,e){return Wh(e)?t.DsProtocol.APPLE_HLS:t.DsProtocol.MPEG_DASH}(t,s.type),r=function(t,e){let i=t.DsPlaylistType.VOD;"live"===e&&(i=t.DsPlaylistType.LIVE);return i}(t,i.streamType);return{asset:i.asset,playlistType:r,protocol:n,uri:s.src}}r();var hh=function(t){return t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected",t}({}),RC=class{Qz(){this.na.vn(bo.fa,this.Jz),this.$z(),this.tq(),this.YX.iq()}nq(){this.na.rq.wa.chromecast&&this.na.rq.wa.chromecast.addEventListener("statechange",this.oq)}tq(){this.na.rq.wa.chromecast&&this.na.rq.wa.chromecast.removeEventListener("statechange",this.oq)}hq(){return void 0!==this.na.rq.wa.chromecast&&this.na.rq.wa.chromecast.state===hh.CONNECTED}yn(){this.na.vn(ns.uo,this.co),this.na.vn(ns.ho,this.aq),this.na.vn(ns.Ly,this.uq),this.Qz(),this.YX.yn()}cq(){this.lq||(this.lq=new bC(this.na,this.YX)),this.dq||(this.dq=new SC(this.na,this.YX)),this.fq||(this.fq=new AC(this.na,this.YX))}XX(){this.lq&&(this.lq.XX(),this.lq.bn("HX",this._q)),this.dq&&this.dq.XX(),this.fq&&this.fq.XX()}$z(){this.lq&&(this.lq.vn("HX",this._q),this.lq.yn(),this.lq=void 0),this.dq&&(this.dq.yn(),this.dq=void 0),this.fq&&(this.fq.yn(),this.fq=void 0)}xz(t){this.fq&&this.fq.xz(t)}vq(){this.lq&&this.lq.lz()}oz(){this.lq&&this.lq.oz()}constructor(t,e,i){this.na=t,this.YX=e,this.co=()=>{this.gq(),this.uq()},this.gq=()=>{const t=this.na.iu(),e=t&&t.analytics;this.mq=function(t){void 0===t&&(t=[]);for(const e of t)if(TC(e))return kC(e)}(e)},this.uq=()=>{this.Qz(),this.na.vn(ns.ho,this.aq),!this.hq()&&this.YX.pq()&&this.na.bt&&this.mq&&(this.cq(),this.na.JI||this.na.MI?this.na.bn(ns.ho,this.aq):this.aq())},this.aq=()=>{this.na.bt&&this.mq&&(this.YX.wq(this.na.bt,this.mq),this.XX(),this.xz(this.mq),this.nq(),this.na.bn(bo.fa,this.Jz),this.na.vn(ns.ho,this.aq))},this.oq=()=>{this.hq()&&this.Qz()},this.Jz=()=>{this.vq(),this.Qz()},this._q=()=>{this.dq&&this.dq.Oz()};const s=function(t){void 0===t&&(t=[]);for(const e of t)if(TC(e))return EC(e)}(i.analytics);s&&this.YX.yq()&&(this.YX.RR(s),this.YX.pq()?(this.YX.bq(),this.na.bn(ns.uo,this.co),this.na.bn(ns.Ly,this.uq)):console.warn("An error occurred while initializing an Agama EMP client. Please check your configuration"))}},CC="agama";r(),r();var wu=function(t){return t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t}({});r();var PC=function(t){return t.NONE="",t.PM360="360",t.PM180="180",t}({});function DC(t){switch(t){case"":return wu.NONE;case"horizontal":return wu.HORIZONTAL;case"vertical":return wu.VERTICAL;default:throw new g}}function NC(t,e){if(e)return PC.PM360;if(null==t)return PC.NONE;switch(t){case"":return PC.NONE;case"360":return PC.PM360;case"180":return PC.PM180;default:throw new g("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}r();var MC=function(t){return t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event",t}({});r();var LC="https://content.uplynk.com";function BC(t){if(!t)return!0;const e=!function(t){return ml(t)||Fu(t)&&ml(t[0])}(t.sources)||Gn(t.sources),i=!t.ads||OC(t.ads),s=""!==t.poster&&!t.poster;return e&&i&&s}function OC(t){return!t||Qc(t)&&0===t.length}function FC(t){if(t&&t.sources)return VC(t.sources)}function VC(t){return oi(t)?Au(t):Kn(t)?t.type||t.src&&Au(t.src):Fu(t)&&t.length>0?VC(t[0]):void 0}function WC(t){if(t&&t.sources)return UC(t.sources)}function UC(t){return oi(t)?t:Kn(t)?t.src:Fu(t)&&t.length>0?UC(t[0]):void 0}function GC(t,e,i){return Vi(t)?function(t,e,i){let s=ne({},tk(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:UT.UPLYNK,id:"",prefix:LC,preplayParameters:{},playbackUrlParameters:{},assetType:MC.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(oi(t))return t;if(Fu(t)&&oi(t[0]))return t;if(function(t){return Vt(t)&&oi(t.userId)&&(Fu(t.externalId)||oi(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return MC.CHANNEL;case"event":return MC.EVENT;default:return MC.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=bc(t.contentProtected));t.assetInfo?s.assetInfo=bc(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=os(t.prefix)||LC);return s.ping=function(t,e){let i=!1,s=!1,n=!1;e?(i=!!yd(e.adImpressions)&&e.adImpressions,s=!!yd(e.freeWheelVideoViews)&&e.freeWheelVideoViews,n=yd(e.linearAdData)?e.linearAdData:t!==MC.ASSET):t!==MC.ASSET&&(n=!0);return{adImpressions:i,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=XC(s,t),s=qC(s,e,i),s=zC(s,t,i),s}(t,e,i):jT(t)?function(t,e,i){var s,n;return ne({},ZC(t,e,i),{integration:UT.MEDIATAILOR,adsParams:null!=(n=null!=(s=t.adsParams)?s:t.adParams)?n:{}})}(t,e,i):KT(t)?function(t,e,i){return ne({},ZC(t,e,i),{type:"theolive"})}(t,e,i):yl(t)?function(t,e,i){return ne({},ZC(t,e,i),{type:ti.hP,src:t.src,streamAccountId:t.streamAccountId,subscriberToken:t.subscriberToken,connectOptions:jC(t.connectOptions),apiUrl:t.apiUrl,statsIntervalMs:HC(t.statsIntervalMs)})}(t,e,i):ZC(t,e,i)}function ZC(t,e,i){let s=ek();const n=e&&(e.contentProtection||e.drm);if(oi(t)){if(s.src=t,s.type=Au(t),n){const t=tC(n);s.contentProtection=ST(t)}}else if(Kn(t)||bl(t)||yl(t)){s.src=t.src,s.type=t.type||Au(t.src),s.isAdvertisement=t.isAdvertisement;const e=$T(t)?t.hesp:void 0;void 0!==e&&(s.hesp=e);jT(t)&&(s.integration=t.integration);const i=tC(t.contentProtection||t.drm||n);s.contentProtection=ST(i),t.ssai&&(s.ssai=PS(t.ssai)),s=XC(s,t)}return s=qC(s,e,i),s=zC(s,t,i),s}function HC(t){if(Vr(t)&&t>0)return t}function XC(t,e){var i,s;e.useCredentials?t.crossOrigin=Ih.tP:e.crossOrigin&&(t.crossOrigin=qT(e.crossOrigin)),oi(e.timeServer)&&(t.timeServer=e.timeServer),e.liveOffset&&(t.liveOffset=e.liveOffset),e.hlsDateRange&&(t.hlsDateRange=e.hlsDateRange),e.lowLatency&&(t.lowLatency=bc(e.lowLatency)),e.useNativePlayback&&(t.useNativePlayback=bc(e.useNativePlayback)),e.useManagedMediaSource&&(t.useManagedMediaSource=bc(e.useManagedMediaSource)),e.dash&&(t.dash=TT(e.dash)),e.hls&&(t.hls=kT(e.hls)),e.lcevc&&(t.lcevc=bc(e.lcevc)),e.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=rk(e.ignoreEmbeddedTextTrackTypes)),e.latencyConfiguration&&(t.latencyConfiguration=WT(e.latencyConfiguration)),t.seamlessSwitchStrategy=GT(null!=(s=e.seamlessSwitchStrategy)?s:null==(i=e.dash)?void 0:i.useSeamlessPeriodSwitch);const n=wi(e.experimentalRendering);void 0!==n&&(t.experimentalRendering=n);const r=wi(e.nativeUiRendering);return void 0!==r&&(t.nativeUiRendering=r),t}function zC(t,e,i){return t.abr=RT(oi(e)?void 0:IT(e.abr),null==i?void 0:i.abr),t}function qC(t,e,i){var s;const n=e&&e.timeServer;return i&&i.liveOffset&&!ol(t.liveOffset)&&(t.liveOffset=i.liveOffset),i&&i.hlsDateRange&&!ol(t.hlsDateRange)&&(t.hlsDateRange=i.hlsDateRange),t.crossOrigin===Ih.SE&&(null==e||null==(s=e.vr)?void 0:s[360])&&(t.crossOrigin=Ih.$C),t.useCredentials=t.crossOrigin===Ih.tP,oi(n)&&!t.timeServer&&(t.timeServer=n),t}function YC(t){const e={src:""};if(t&&t.src){if(e.src=os(t.src),"default"in t&&(e.default=bc(t.default)),e.kind=function(t){const e=String(t||"").toLowerCase();return Rx(e)?e:e?"metadata":"subtitles"}(t.kind),XT(t.format)&&(e.format=t.format),"srclang"in t){const i=t.srclang;"string"==typeof i&&""!==i&&(e.srclang=i)}if("label"in t){const i=t.label;"string"==typeof i&&""!==i&&(e.label=i)}}return e}function KC(t,e){if(Vt(t))try{return e.iX(t).Aq(t)}catch(t){return}}function jC(t){if(null==t)return t;if(!Vt(t))throw new m("connectOptions must be an object");return t}function nc(t,e,i){if(void 0===i&&(i=Ch.Vm),BC(t))return{sources:[ek()]};const s=Fa(t);if(s.sources=function(t,e,i){if(ml(t))return[GC(t,e,i)];if(Fu(t)&&ml(t[0])){const s=[];for(const n of t)s.push(GC(n,e,i));return s}return[ek()]}(s.sources,s,e),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,e){if(!Fu(t))return[];const i=[];for(let s of t)s=KC(s,e),s&&i.push(s);return i}(s.ads,i);0===t.length?delete s.ads:s.ads=t}const n=!Gn(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!Fu(t))return[];const e=[];for(let i of t)i=YC(i),""!==i.src&&e.push(i);return e}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=os(s.poster)),"streamType"in s&&(s.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(s.streamType)),"vr"in s&&(s.vr=function(t){const e=t||{};return e.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(e.stereoMode),{panoramaMode:NC(e.panoramaMode,Boolean(e[360])),stereoMode:e.stereoMode?DC(e.stereoMode):wu.NONE,nativeVR:Boolean(e.nativeVR)}}(s.vr));if("analytics"in s||(null==e?void 0:e.analytics)){const t=sk(s.analytics),i=e&&e.analytics||[];s.analytics=function(t,e){const i=Fa(t);for(const s of e){const e=!t.some((t=>t.integration===s.integration));e&&s.integration!==CC&&i.push(s)}return i}(t,i)}return"mutedAutoplay"in s&&(s.mutedAutoplay=uk(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=ao(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}r(),r(),r();var QC=function(){function t(t){this.Sq=t}return t.prototype.Tq=function(t){var e,i,s,n,r,o,h,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.Sq.charAt(64);for(e=0;e<t.length;e+=4)i=(h=this.Sq.indexOf(t.charAt(e))<<18|this.Sq.indexOf(t.charAt(e+1))<<12|(r=this.Sq.indexOf(t.charAt(e+2)))<<6|(o=this.Sq.indexOf(t.charAt(e+3))))>>>16&255,s=h>>>8&255,n=255&h,a[e/4]=String.fromCharCode(i,s,n),64===o&&(a[e/4]=String.fromCharCode(i,s)),64===r&&(a[e/4]=String.fromCharCode(i));return a.join("")},t.prototype.kq=function(t,e){var i,s,n,r,o,h,a,u=[],c="";if((h=t.length%3)>0)for(;h++<3;)c+=this.Sq.charAt(64),t+="\0";for(h=0;h<t.length;h+=3)s=(i=t.charCodeAt(h)<<16|t.charCodeAt(h+1)<<8|t.charCodeAt(h+2))>>18&63,n=i>>12&63,r=i>>6&63,o=63&i,u[h/3]=this.Sq.charAt(s)+this.Sq.charAt(n)+this.Sq.charAt(r)+this.Sq.charAt(o);return a=(a=u.join("")).slice(0,a.length-c.length),e||(a+=c),a},t.mh=new t(function(){var t,e,i,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(e=r[t],i=0;i<e.length;i+=1)s=e.charAt(i),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.Eq=new t(function(t){return t.Tq("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.mh)),t}();function ec(t){return"string"==typeof t}function JC(t){return"number"==typeof t}r(),r(),r();var $C={}.toString;var tP,eP=Array.isArray||function(t){return"[object Array]"===$C.call(t)};function rc(t,e){return eP(t)&&t.every(e)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb",t.KEPLER="kepler"}(tP||(tP={}));var Ms,iP=w.keys(tP).map((function(t){return tP[t]}));function sP(t){return-1!==iP.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview",t.THEOADS="theoads",t.MILLICAST="millicast"}(Ms||(Ms={}));var nP,rP=w.keys(Ms).map((function(t){return Ms[t]}));function oP(t){return-1!==rP.indexOf(t)}function hP(t){try{var e=QC.Eq.Tq(t),i=JSON.parse(e);if(!function(t,e){var i,s=function(t){return"object"==typeof t&&null!==t}(t),n=ec(t.key),r=ec(t.customer_id),o=JC(t.generation_date),h=JC(t.expiration_date),a=rc(t.domains_page,ec),u=rc(t.domains_source,ec),c=rc(t.sdks,e?sP:ec),l=function(t){return"boolean"==typeof t}(t.send_impression);t.features?i=rc(t.features,e?oP:ec):(i=!0,t.features=[]);if(!(s&&n&&r&&o&&h&&a&&u&&c&&l&&i))return!1;return!0}(i,!1))throw new m("The provided license could not be decoded correctly.");return i}catch(t){throw new m("The provided license could not be decoded correctly.")}}function aP(){return nP||(nP={Xu:s.location.href,xq:s.parent&&s.parent!==s,Iq:cP()}),nP}var uP=["http:","https:","ftp:","ws:","wss:"];function cP(){var t,e;try{var i;if(null==(i=s)?void 0:i.top)return s.top.location.href}catch(t){}return null==(e=s)||null==(t=e.document)?void 0:t.referrer}var Ds=function(t){return t[t.Rq=0]="Rq",t[t.Cq=1]="Cq",t[t.Pq=2]="Pq",t}({}),lP=class{constructor(t,e,i,s,n=[],r="",o=Date.now(),h=[],a=!0){this.Dq=t,this.Nq=e,this.Mq=i,this.Lq=s,this.Bq=n,this.Oq=r,this.Fq=o,this.Vq=h,this.Wq=a}},dP=function(t){return t.Cq="expired",t.Uq="invaliddomain",t.Gq="invalidsource",t.Zq="invalidfeature",t.fa="error",t}({}),fP=class t{Hq(t,e){let i=[];ml(t.sources)?i=[t.sources]:Fu(t.sources)&&(i=t.sources),this.Xq(t,i,e),this.zq(i,e)}Xq(t,e,i){if(BC(t)||0===i.Mq.length||wP(i.Mq))return;if(!e.every((t=>this.qq(t,i)))){const t="invalidsource",e=SP.Yq(t);throw new Z(vP(t),e)}}zq(t,e){for(const i of t)Kn(i)&&$T(i)&&!i.bypassLicense&&this.Kq([Ms.HESP],e)}jq(e){return this.Qq(e.Vq)&&this.Jq(e)?t.$q(e.Lq)?0:1:2}Kq(t,e){for(const i of t)if(!fh(e.Bq,i)){const t="invalidfeature",e=SP.tY(t,i);throw new Z(vP(t),e)}}Qq(t){return 0===t.length||t.some((t=>this.eY(t)))}eY(t){return"web"===function(t){switch(t){case tP.ANDROID:return od.Ev;case tP.ANDROIDTV:case tP.FIRETV:return od.xv;case tP.IOS:return od.Iv;case tP.TVOS:return od.Rv;case tP.CHROMECAST:case tP.CHROMECASTCAF:return od.Cv;case tP.THEOLIVEWEB:return od.Pv;default:return od.Tv}}(t)}static $q(t){const e=Number(new Date);return!!t&&e<=t}Jq(t){return!(this.iY&&0!==t.Nq.length&&!wP(t.Nq))||!!(this.iY&&this.sY(t.Nq)&&this.nY(t.Nq))}sY(t){return yP(this.PA.Xu,t)}nY(t){if(!this.PA.xq)return!0;if(this.rY)return!0;const e=this.oY();return!!e&&yP(e,t)}oY(){if(!this.PA.xq)return;const t=Ll.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.PA.Iq?this.PA.Iq:void 0}qq(e,i){return!!t.hY(e,i.Mq)}static hY(t,e){return yP(this.aY(t),e)}static aY(t){return oi(t)?t:Kn(t)&&t.src||""}constructor(t,e,i){this.rY=t,this.uY=e,this.PA=i,this.iY=AP(this.PA)}},_P=class{jq(t){return 0}Hq(t,e){}Kq(t,e){}};function vP(t){switch(t){case"invaliddomain":return Ci.LICENSE_INVALID_DOMAIN;case"invalidsource":return Ci.LICENSE_INVALID_SOURCE;case"expired":return Ci.LICENSE_EXPIRED;case"invalidfeature":return Ci.LICENSE_INVALID_FEATURE;case"error":return Ci.LICENSE_ERROR}}var gP="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",mP=Wd((()=>{const t="\\.",e="(\\*|"+gP+")";return new RegExp("ip-range\\("+e+t+e+t+e+t+e+"\\)")}));function pP(t,e){let i=t,s=e;if(!i)return!1;if(s=s.trim(),"*"===s)return!0;if(i=i.replace(/\.+$/,""),s===i)return!0;if(Cl(s,"ip-range(")){const t="\\.",e=s.match(mP()),n=t=>"*"===t?"("+gP+")":t;if(null!==e&&5===e.length){const s=new RegExp("^"+e[1]+t+n(e[2])+t+n(e[3])+t+n(e[4])+"$");return null!==i.match(s)}}return s="."+s,-1!==i.indexOf(s,i.length-s.length)}function wP(t){return t.some((t=>"*"===t))}function yP(t,e){const i=As.Bh(t);if(!bP(i))return!0;for(const s of e){if(pP(i.hostname,s))return!0;if(pP(uA(t),s))return!0}return!1}function bP(t){return-1!==uP.indexOf(t.protocol)}function AP(t){const e=As.Bh(t.Xu);return bP(e)&&!function(t){return pP(t.hostname,"localhost")}(e)&&!function(t){return pP(t.hostname,"theoplayer.doubleclick.net")}(e)}var SP=class{static tY(t,e){return"The requested feature '"+e+"' is not available with the license for this player."}static Yq(t){return"invaliddomain"===t?this.cY:"invalidsource"===t?this.lY:"expired"===t?this.dY:"invalidfeature"===t?this.fY:this._Y}};SP._Y="The license for this player is invalid.",SP.dY="The usage license for this video player has expired.",SP.cY="The current domain is incompatible with the license for this player.",SP.lY="The provided video source is incompatible with the license for this player.",SP.fY="The requested feature is not available with the license for this player.",r(),r();var mr=function(t){return t[t.vY=1]="vY",t[t.gY=4]="gY",t[t.mY=5]="mY",t[t.pY=9]="pY",t}({});function TP(t){const e=[t.kL,t.wY,t.yY];switch(t.wY){case 1:e.push(t.zC);break;case 4:e.push(t.RI),e.push(t.lt);break;case 5:e.push(t.lt);break;case 9:e.push(t.zw)}return e}r();var Ot=new Array(256);for(let t=0;t<256;t+=1)Ot[t]=(t<16?"0":"")+t.toString(16);function Ns(){const t=qf(),e=(4294967296*_.random()|0)+t&3029421624,i=(4294967296*_.random()|0)+t&3595553209,s=(4294967296*_.random()|0)+t&1130486254,n=(4294967296*_.random()|0)+t&1284287105;return Ot[255&e]+Ot[e>>>8&255]+Ot[e>>>16&255]+Ot[e>>>24&255]+"-"+Ot[255&i]+Ot[i>>>8&255]+"-"+Ot[i>>>16&15|64]+Ot[i>>>24&255]+"-"+Ot[63&s|128]+Ot[s>>>8&255]+"-"+Ot[s>>>16&255]+Ot[s>>>24&255]+Ot[255&n]+Ot[n>>>8&255]+Ot[n>>>16&255]+Ot[n>>>24&255]}function kP(t){return fp(t.replace(/-/g,""))}function se(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*_.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function EP(){return As.Wm()}r(),r(),r();var xP,IP="theoplayer-session-id";function RP(){if(!xP){const t=kb.Vb(IP);t?xP=t:(xP=Ns(),kb.Wb(IP,xP))}return xP}r(),r();var CP=/[^\x00-\x7E]/g;function PP(t){return"\\u"+Sa(t.charCodeAt(0).toString(16),4,"0")}var DP="https://license.theoplayer.com";function NP(t){const e=function(t){const e=[];return function(t,e,i){return JSON.stringify(t,e,i).replace(CP,PP)}(t,((t,i)=>{if(Vt(i)){if(-1!==e.indexOf(i))return null;e.push(i)}return i}))}(function(t){return[t.bY,t.eT,t.Dq,t.aN,t.AY,t.SY,t.TY.map(TP)]}(t));return QC.Eq.kq(e)}var MP=class{get TY(){return this.Kf}kY(){return Boolean(this.AY)}get AY(){return this.EY}async xY(t){if(!(await this.RY.IY()).Wq)return;const e={wY:mr.vY,yY:qf(),zC:t};await this.mz(e)}async CY(t){if(!(await this.RY.IY()).Wq)return;const e={wY:mr.pY,yY:qf(),zw:t};await this.mz(e)}async PY(t,e){const i={wY:mr.gY,yY:qf(),RI:e,lt:t};await this.mz(i)}async DY(t){const e={wY:mr.mY,yY:qf(),lt:t};await this.mz(e)}async mz(t){const e=await this.RY.IY();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.NY.kq(e.Dq)&&t.wY!==mr.mY||(t.wY===mr.vY?this.MY():this.kY()||this.MY(),t.kL=this.aS++,this.Kf.push(t),!function(t){return t===mr.vY||t===mr.mY}(t.wY)?this.Kf.length>this.LY&&await this.BY():await this.OY())}async OY(t){for(void 0===t&&(t=!1);this.Kf.length>0;)await this.BY(t)}async FY(t){const e=await this.RY.IY();return{bY:qf(),eT:RP(),Dq:this.NY.kq(e.Dq)||"dev",aN:this.NS,AY:this.EY,SY:this.VY,TY:t}}async BY(t){void 0===t&&(t=!1);const e=this.Kf.splice(0,this.WY),i=await this.FY(e);t?this.FE(i):this.UY(i),this.GY=EP()}async UY(t){const e=NP(t),i=new Gr({Xu:DP,Vk:e,DE:!1,tE:Te.Rk,iE:{"Content-Type":du.$U},xE:4e3,EE:Ce.POST});try{const t=await this.WW.eE(i);await t.Bk()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+e}}FE(t){const e=NP(t);this.WW.FE({Xu:DP,Vk:e,Fk:du.$U})}MY(){this.kY()&&this.OY(),this.EY=Ns(),this.aS=0}yn(){s.removeEventListener("beforeunload",this.ZY),p(this.HY),this.OY()}constructor(t,e,i,n=QC.mh,r=0,o=1){this.NS=t,this.WW=e,this.RY=i,this.NY=n,this.LY=r,this.WY=o,this.Kf=[],this.EY=null,this.GY=0,this.VY="unknown",this.aS=0,this.XY=()=>{EP()-this.GY>6e4&&this.OY()},this.ZY=()=>{this.OY(!0)},s.addEventListener("beforeunload",this.ZY),this.HY=v(this.XY,6e4)}};r(),r(),r();var LP=0;var BP=c,tt=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,cs=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;tt&&cs||(tt=function(t){const e=EP(),i=_.max(0,16-(e-LP)),s=u((()=>t(e+i)),i);return LP=e+i,s},cs=BP),tt=tt.bind(self),cs=cs.bind(self);var OP=Ya.Zg||Ya.su&&Ya.nm<13;function FP(t,e,i){const s=t.getImageData(e,i,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var VP=class{get wa(){var t;return null!=(t=this.eu)?t:this.eu=function(t){return{drawImage(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return t.zY(e,...s)},texImage2D:(e,i,s,n,r,o)=>t.qY(e,i,s,n,r,o),requestVideoFrameCallback:e=>t.YY(e),cancelVideoFrameCallback:e=>t.KY(e)}}(this)}zY(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];const n=this.jY;return void 0!==n&&(t.drawImage(n,...i),!0)}qY(t,e,i,s,n,r){let o=this.jY;return void 0!==o&&(OP&&(o=this.QY(o)),t.texImage2D(e,i,s,n,r,o),!0)}YY(t){const e=this.JY++,i=this.$Y(t,e);return this.tK.set(e,{eK:t,iK:i}),e}KY(t){const e=this.tK.get(t);void 0!==e&&(this.tK.delete(t),e.iK())}$Y(t,e){const i=this.jY;if(void 0===i)return M;if(i instanceof HTMLVideoElement&&i.requestVideoFrameCallback){const s=i.requestVideoFrameCallback(((i,s)=>{this.tK.delete(e),t(i,s)}));return()=>i.cancelVideoFrameCallback(s)}{let i;const s=n=>{this.sK()?(this.tK.delete(e),this.nK=!1,t(n,void 0)):i=tt(s)};return i=tt(s),()=>cs(i)}}sK(){return(!this.t.JI||this.nK)&&!this.t.dR&&this.t.aR>=Wt.kO}QY(t){let e=this.rK;void 0===e&&(e=h.createElement("canvas"),this.rK=e);const i=e.getContext("2d"),s=this.t,n=s.pR,r=s.vR,o=e.width,a=e.height;i.clearRect(0,0,e.width,e.height),o===n&&a===r||(e.width=n,e.height=r),i.drawImage(t,0,0,n,r);let u=!1;return n>0&&FP(i,n-1,0)&&(e.width=o,u=!0),r>0&&FP(i,0,r-1)&&(e.height=a,u=!0),u&&i.drawImage(t,0,0,n,r),e}yn(){this.tK.forEach((t=>t.iK())),this.tK.clear(),this.t.vn(ns.Fy,this.oK),this.t.vn(ns.eb,this.hK),this.jY=void 0,this.rK=void 0}constructor(t){this.jY=void 0,this.eu=void 0,this.rK=void 0,this.tK=Bh(),this.JY=1,this.nK=!0,this.hK=()=>{this.nK=!0},this.oK=()=>{this.jY=this.t.IR(),this.tK.forEach(((t,e)=>{t.iK(),t.iK=this.$Y(t.eK,e)}))},this.t=t,this.t.bn(ns.Fy,this.oK),this.t.bn(ns.eb,this.hK),this.oK()}};r(),r(),r();var ln=function(t){return t.mn="dimensionchange",t}({}),WP=class extends me{constructor(t,e){super(ln.mn),this.width=t,this.height=e}};r(),r();var UP,GP=class{constructor(t,e){this.we=t,this.eK=e}},ZP=class extends GP{get Nu(){return this.aK}get Au(){return this.uK}yn(){this.cK.disconnect()}constructor(t,e){super(t,e),this.aK=0,this.uK=0,this.lK=t=>{if(t.length>0){const e=t[t.length-1].contentRect;this.uK=e.width,this.aK=e.height,this.eK(this.uK,this.aK)}},this.cK=new s.ResizeObserver(this.lK),this.cK.observe(this.we)}};r(),r();var HP=["Webkit","Moz","O","ms"],XP=(()=>{let t=!1;try{if(void 0!==s&&"function"==typeof s.addEventListener){const e=w.defineProperty({},"passive",{get(){t=!0}});s.addEventListener("testPassiveEventSupport",M,e),s.removeEventListener("testPassiveEventSupport",M,e)}}catch(t){}return t})(),zP=Vh();function qP(t){return zP.has(t)||zP.set(t,function(t){const e=(UP||(UP=s&&s.document&&s.document.createElement("span")),UP);if(!e||!e.style)return t;if(void 0!==e.style[t])return t;const i=t.charAt(0).toUpperCase()+t.slice(1);for(const t of HP){const s=t+i;if(void 0!==e.style[s])return s}return t}(t)),zP.get(t)}function YP(t){const e=t.style;e.position="absolute",e.left="0",e.right="0",e.bottom="0",e.top="0",e.overflow="scroll",e.zIndex="-1",e.visibility="hidden"}function KP(t){const e=t.style;e.position="absolute",e.left="0",e.top="0",e[qP("transition")]="0s"}var jP=class extends GP{yn(){cs(this.dK),this.dK=0,this.fK.removeEventListener("scroll",this._K),this.vK.removeEventListener("scroll",this._K),We(this.gK),s&&s.removeEventListener("resize",this.mK)}get Nu(){return this.we.getBoundingClientRect().height||this.aK||0}get Au(){return this.we.getBoundingClientRect().width||this.uK||0}constructor(t,e,i){super(t,e),this.dK=0,this.uK=NaN,this.aK=NaN,this.pK=void 0,this.nr=()=>{const t=1e5;this.wK.style.width=t+"px",this.wK.style.height=t+"px",this.fK.scrollLeft=t,this.fK.scrollTop=t,this.vK.scrollLeft=t,this.vK.scrollTop=t,0===this.vK.scrollTop&&tt(this.nr)},this.yK=()=>{const t=this.Au,e=this.Nu;this.eK(t,e),this.uK=t,this.aK=e,this.nr(),this.dK=0},this._K=()=>{if(this.dK)return;const t=this.Au,e=this.Nu;t===this.uK&&e===this.aK||(this.dK=tt(this.yK))},this.mK=()=>{this.pK||(this.pK=u(this.bK,66))},this.bK=()=>{this.pK=void 0,this.AK()},this.AK=()=>{this._K()};const n=function(t,e){return s.getComputedStyle(t,void 0).getPropertyValue(e)||t.style[e]}(t,"position");i||"static"!==n||(t.style.position="relative");const r=h.createElement("div");this.gK=r,this.fK=h.createElement("div"),this.wK=h.createElement("div"),this.vK=h.createElement("div"),this.SK=h.createElement("div"),YP(this.fK),YP(this.vK),KP(this.wK),function(t){KP(t),t.style.width="200%",t.style.height="200%"}(this.SK),r.appendChild(this.fK),r.appendChild(this.vK),this.fK.appendChild(this.wK),this.vK.appendChild(this.SK),t.appendChild(r),this.fK.addEventListener("scroll",this._K),this.vK.addEventListener("scroll",this._K),s&&s.addEventListener("resize",this.mK),this._K()}},Ee=class extends So{kn(t){this.cK||("function"==typeof s.ResizeObserver?this.cK=new ZP(this.we,this.lK):this.cK=new jP(this.we,this.lK,t))}yn(){this.Ro(),this.cK&&(this.cK.yn(),this.cK=void 0)}get Nu(){return this.cK?this.cK.Nu:0}get Au(){return this.cK?this.cK.Au:0}constructor(t){super(),this.cK=void 0,this.lK=(t,e)=>{this._o(new WP(t,e))},this.we=t}};r(),r();var QP=class extends me{constructor(){super(Wi.da)}};r();var bs=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(const e of t)if(e[1]in h)return{TK:e[0],Zo:e[1],kK:e[2],EK:e[3],Ye:e[4],xK:e[5]}}();r();var JP=class extends me{constructor(){super(Wi.ga)}},$P=class t extends So{static aa(t){return Boolean(bs&&h[bs.EK]&&bs.TK in t)}vo(){const t=this.we[bs.TK]();t&&t.then?t.then(this.IK,this.RK):(h.removeEventListener(bs.xK,this.RK),h.addEventListener(bs.xK,this.RK))}xo(){const t=h[bs.Zo]();t&&t.then?t.then(this.IK,this.RK):(h.removeEventListener(bs.xK,this.RK),h.addEventListener(bs.xK,this.RK))}CK(){const t=this.cs,e=this.we===h[bs.kK];this.cs=e,t!==e&&this._o(new QP)}PK(){this._o(new KR)}yn(){this.Ro(),h.removeEventListener(bs.Ye,this.IK),h.removeEventListener(bs.xK,this.RK)}constructor(e){super(),this.cs=!1,this.IK=()=>this.CK(),this.RK=()=>this.PK(),this.we=e,this.oa=t.aa(e),h.addEventListener(bs.Ye,this.IK),this.CK()}},tD=class t extends So{static aa(t){return Ya.su&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}vo(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("fullscreen")?Ya.su?requestAnimationFrame((()=>this.we.webkitSetPresentationMode("fullscreen"))):this.we.webkitSetPresentationMode("fullscreen"):this.we.webkitEnterFullscreen()}xo(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("inline")?this.we.webkitSetPresentationMode("inline"):this.we.webkitExitFullscreen()}CK(){const t=this.cs;let e;e=this.we.webkitPresentationMode?"fullscreen"===this.we.webkitPresentationMode:Boolean(this.we.webkitDisplayingFullscreen),this.cs=e,t!==e&&this._o(new QP)}yn(){this.Ro(),this.we.removeEventListener("webkitbeginfullscreen",this.IK),this.we.removeEventListener("webkitendfullscreen",this.IK),this.we.removeEventListener("webkitpresentationmodechanged",this.IK)}constructor(e){super(),this.cs=!1,this.IK=()=>this.CK(),this.we=e,this.oa=t.aa(e),this.we.addEventListener("webkitbeginfullscreen",this.IK),this.we.addEventListener("webkitendfullscreen",this.IK),this.we.addEventListener("webkitpresentationmodechanged",this.IK),this.CK()}},eD=class extends So{get oa(){return!!this.DK&&this.DK.oa}get cs(){return this.NK}vo(){this.DK?this.DK.vo():this._o(new KR)}xo(){for(const t of this.MK)t.cs&&t.xo()}LK(t){this.DK=t}BK(t){this.MK.push(t),t.bn(Wi.da,this.CK),t.bn(Wi.fa,this.Ds),this.CK()}FK(t){_e(this.MK,t),t.vn(Wi.da,this.CK),t.vn(Wi.fa,this.Ds)}VK(){for(const t of this.MK)if(t.cs)return!0;return!1}nr(){this.DK=void 0,this.NK=!1;const t=this.MK.slice();for(const e of t)this.FK(e),e.yn();this.CK()}yn(){this.Ro(),this.nr()}constructor(...t){super(...t),this.MK=[],this.DK=void 0,this.NK=!1,this.CK=()=>{const t=this.NK,e=this.VK();t!==e&&(this.NK=e,this._o(new QP))}}},iD=class extends So{get oa(){return!!this.WK&&this.UK.oa}get cs(){return this.UK.cs}vo(){this.WK&&this.UK.vo()}xo(){this.UK.xo()}GK(){this.UK.bn([Wi.da,Wi.ga],this.CK),this.UK.bn(Wi.fa,this.Ds)}ZK(){this.UK.vn([Wi.da,Wi.ga],this.CK),this.UK.vn(Wi.fa,this.Ds)}ir(){const t=this.UK,e=this.t.xR();if(t===e)return;this.va=!0;const i=this.cs,s=this.oa;i&&this.xo(),this.ZK(),this.UK=e,this.GK(),i&&!this.cs&&this.oa?this.vo():this.xo(),this.va=!1,s!==this.oa&&this._o(new JP),i!==this.cs&&this._o(new QP)}yn(){this.Ro(),this.ZK(),this.t.vn(ns.By,this.HK)}constructor(t,e){super(),this.va=!1,this.HK=()=>this.ir(),this.CK=t=>{this.va||this._o(t)},this.t=t,this.WK=e,this.UK=new ot,this.GK(),this.t.bn(ns.By,this.HK),this.ir()}};r(),r(),r();var mc=function(t){return t.MODE_CHANGE="presentationmodechange",t.ERROR="error",t}({}),sD=class extends me{constructor(t){super(mc.MODE_CHANGE),this.presentationMode=t}};r(),r();var nD=class extends So{ru(t){for(const e of this.Kf)t.bn(e,this.XK);this.zK.push(t)}qK(t){for(const e of this.Kf)t.vn(e,this.XK);this.zK.push(t)}yn(){this.Ro();for(const t of this.zK)this.qK(t);En(this.zK)}constructor(t,e=!1,i){super(i),this.zK=[],this.YK=t=>{mi((()=>{this.Ds(t)}))},this.Kf=t,this.XK=e?this.YK:this.Ds}},lc=class extends en{ru(t){t._y(this.KK),this.zK.push(t)}qK(t){t.yy(this.KK),_e(this.zK,t)}yn(){this.Ro();for(const t of this.zK)t.yy(this.KK);En(this.zK)}constructor(t,e=!1){super(t),this.zK=[],this.YK=t=>{mi((()=>{this.Ds(t)}))},this.KK=e?this.YK:this.Ds}};r();var rD=class extends $s{get error(){return this.errorObject.message}ka(){return this}constructor(t){super(mc.ERROR),this.errorObject=t}};r();var oD=class extends Z{constructor(t,e,i){super(t,e,i)}},hD=class extends en{get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){return function(t){let e;const i={get currentMode(){return t.Ho()},requestMode(e){const i=_k(e);i&&t.Wo(i)},supportsMode(e){const i=_k(e);return!!i&&t.zo(i)},addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)}};return e=new lc(i,!0),e.ru(t),i}(this)}Wo(t){this.Xo!==t&&(this.Xo=t,this.sa=!0,this.Jo(t))}Ho(){return this.Xo}zo(t){switch(t){case cu.NATIVE_PICTURE_IN_PICTURE:return this.ta.PO;case cu.FULLSCREEN:return this.ea.oa;case cu.INLINE:return!0}return!1}Jo(t){switch(this.Yo.np(),t){case cu.FULLSCREEN:uh(this.Yo.Qo((t=>this.jK(t))));break;case cu.NATIVE_PICTURE_IN_PICTURE:uh(this.Yo.Qo((t=>this.QK(t))));break;case cu.INLINE:uh(this.Yo.Qo((t=>this.JK(t))))}}async jK(t){Io(t),await this.ta.xo().catch(M),Io(t);try{await this.$K(),this._o(new sD(this.Xo))}catch(e){const i=new oD(Ci.FULLSCREEN_ERROR,"Failed to enter fullscreen.");throw this._o(new rD(i)),Io(t),this.Wo(cu.INLINE),i}finally{this.sa=!1}}async QK(t){Io(t),await this.Zo().catch(M),Io(t);try{await this.ta.vo(),this._o(new sD(this.Xo))}catch(e){const i=new oD(Ci.PICTURE_IN_PICTURE_ERROR,"Failed to enter native picture-in-picture.");throw this._o(new rD(i)),Io(t),this.Wo(cu.INLINE),i}finally{this.sa=!1}}async JK(t){Io(t),await this.Zo().catch(M),Io(t),await this.ta.xo().catch(M),this._o(new sD(this.Xo)),this.sa=!1}async $K(){if(this.ea.cs)return;const t=this.ea.Ay([Wi.da,Wi.fa]);if(this.ea.vo(),await t,!this.ea.cs)throw new m("Failed to enter fullscreen.")}async Zo(){if(!this.ea.cs)return;const t=this.ea.Ay([Wi.da,Wi.fa]);if(this.ea.xo(),await t,this.ea.cs)throw new m("Failed to exit fullscreen.")}wi(){this.sa||(this.Xo!==cu.FULLSCREEN||this.ea.cs?this.Xo!==cu.FULLSCREEN&&this.ea.cs&&this.Wo(cu.FULLSCREEN):this.Wo(cu.INLINE))}yn(){this.ea.vn(Wi.da,this.CK),this.ea.vn(Wi.fa,this.PK),this.ta.vn(Js.IO,this.tj),this.ta.vn(Js.RO,this.tj),this.ta.vn(Js.fa,this.ej),this.Ro()}constructor(t,e){super(),this.Xo=cu.INLINE,this.sa=!1,this.Yo=new dc,this.eu=void 0,this.CK=()=>{this.wi()},this.PK=()=>{this.sa||(this._o(new Pi(new Z(Ci.FULLSCREEN_ERROR,"Failed to enter fullscreen."))),this.wi())},this.tj=()=>{this.sa||(this.Xo!==cu.NATIVE_PICTURE_IN_PICTURE||this.ta.CO?this.Xo!==cu.NATIVE_PICTURE_IN_PICTURE&&this.ta.CO&&this.Wo(cu.NATIVE_PICTURE_IN_PICTURE):this.Wo(cu.INLINE))},this.ej=()=>{this.sa||(this._o(new rD(new oD(Ci.PICTURE_IN_PICTURE_ERROR,"Unexpected native picture-in-picture error."))),this.tj())},this.ea=t,this.ta=e,this.ea.bn(Wi.da,this.CK),this.ea.bn(Wi.fa,this.PK),this.ta.bn(Js.IO,this.tj),this.ta.bn(Js.RO,this.tj),this.ta.bn(Js.fa,this.ej)}};r();var aD=class t{ij(t){return this.sj.Qo((()=>this.nj(t)))}RR(){this.HH.ZH()}async nj(e){const i=this.HH.lH(Fo.yE),s=i.SZ,n=await t.rj(s,e);return await this.HH.qZ(i),n}static async rj(e,i){return Ya.Ng||Ya.Rg?"all":(e.src||(e.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.hj(),!i&&await t.aj(e,!1)?"all":await t.aj(e,!0)?"muted":"none")}static async aj(t,e){t.muted=e;const i=t.play();try{if(!ei(i))return!Ya.Qs;const t=Ze(250);return await Promise.race([i,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static hj(){return new Promise((t=>{if("function"==typeof MessageChannel){const e=new MessageChannel;e.port1.onmessage=()=>t(),e.port2.postMessage("")}else u(t,0)}))}yn(){this.sj.yn()}constructor(t){this.HH=t,this.sj=new dc}},uD=aD;function cD(t){uD=t}function lD(t){let e;return{get url(){return t.Xu},get method(){return t.EE},get headers(){return e||(e=t.iE.Ck()),e},get body(){return t.Vk},get useCredentials(){return t.DE},get type(){return t.zw},get subType(){return t.CE},get mediaType(){return t.PE},get responseType(){return t.tE}}}function dD(t){switch(t.toLowerCase()){case"arraybuffer":return Te.Ek;case"json":return Te.xk;case"stream":return Te.Ik;default:return Te.Rk}}function fD(t){switch(t.toUpperCase()){case"POST":return Ce.POST;case"PUT":return Ce.PUT;case"DELETE":return Ce.DELETE;case"HEAD":return Ce.HEAD;case"OPTIONS":return Ce.OPTIONS;default:return Ce.GET}}function _D(t){switch(t.toLowerCase()){case"manifest":return Bn.hE;case"segment":return Bn.aE;case"preload-hint":return Bn.uE;case"content-protection":return Bn.cE;default:return Bn.oE}}function vD(t){switch(t.toLowerCase()){case"initialization-segment":return Cu.lE;case"fairplay-license":return Cu.dE;case"fairplay-certificate":return Cu.fE;case"widevine-license":return Cu._E;case"widevine-certificate":return Cu.vE;case"playready-license":return Cu.gE;case"clearkey-license":return Cu.mE;case"aes128-key":return Cu.pE;default:return Cu.oE}}function gD(t){switch(t.toLowerCase()){case"audio":return sA.wE;case"video":return sA.yE;case"text":return sA.Rk;case"image":return sA.bE;default:return sA.oE}}r(),r(),r(),r();var mD=class{get uj(){return this.cj.Xb}get wa(){return this.eu||(this.eu=this.lj()),this.eu}get dj(){return this._j}get vj(){return!this._j}get gj(){return this.mj>0}get jE(){return this.QE}QD(){this._j=!0,this.cj.Zb(null)}pj(){this.cj.Hb(new Nb(this.wj))}yj(t){if(!this.vj)throw new g("Cannot respond more than once");if(!Vt(t))throw new g("Expected valid response");this.QE=this.bj(t),this.QD()}Aj(){try{const t=this.Sj(this.wa);t?this.Tj(t):this.gj||this.dj||this.QD()}catch(t){this.wj.push(t),this.pj()}}Tj(t){if(this.dj)throw new m("Request has been redirected or a response already exists");if(ei(t))this.Ej(t);else{if("function"!=typeof t)throw new g("Expected promise or function");{const e=new is,i=t=>{t?e.Hb(t):e.Zb(void 0)};try{const s=t(i);ei(s)&&e.rp(s)}catch(t){e.Hb(t)}this.Ej(e.Xb)}}}async Ej(t){try{this.mj++,await t,this.mj--,this.gj||this.dj||(this.wj.length?this.pj():this.QD())}catch(t){this.mj--,this.wj.push(t),this.gj||this.dj||this.pj()}}constructor(t,e){this.xj=t,this.Sj=e,this.cj=new is,this.wj=[],this.eu=void 0,this._j=!1,this.QE=void 0,this.mj=0}},pD=class t extends mD{get Vk(){return this.Ij}get iE(){return this.xj.iE}get eE(){return this.xj.eE}get jE(){return this.QE}get Jk(){return this.xj.Jk}get sE(){return this.xj.sE}get Xu(){return this.xj.rE}static Rj(t,e,i){const s=void 0===t.body?i:t.body;return new iA({$k:s,eE:e.eE,tE:e.eE.tE,iE:t.headers,Jk:t.status,sE:t.statusText,rE:t.url,nE:!0},e)}lj(){return function(t){let e;const i=lD(t.eE);return{get closed(){return!t.vj},get request(){return i},get url(){return t.Xu},get status(){return t.Jk},get statusText(){return t.sE},get headers(){return e||(e=t.iE.Ck()),e},get body(){return t.Vk},respondWith:e=>t.yj(e),waitUntil:e=>t.Tj(e)}}(this)}bj(e){return t.Rj(e,this.xj,this.Ij)}constructor(t,e,i){super(t,e),this.Ij=i,this.Aj()}};r();var wD=class extends mD{get Vk(){return this.xj.Vk}get vj(){return this.Cj&&!this._j}get iE(){return this.xj.iE}get EE(){return this.xj.EE}get Pj(){return this.Dj}get jE(){return this.QE}get tE(){return this.xj.tE}get xE(){return this.xj.xE}get RE(){return this.xj.RE}get ep(){return this.xj.ep}get zw(){return this.xj.zw}get CE(){return this.xj.CE}get PE(){return this.xj.PE}get Xu(){return this.xj.Xu}get DE(){return this.xj.DE}get BE(){return this.xj.BE}get NE(){return this.xj.NE}get LE(){return this.xj.LE}get OE(){return this.xj.OE}lj(){return function(t){let e;return{get url(){return t.Xu},get method(){return t.EE},get headers(){return e||(e=t.iE.Ck()),e},get body(){return t.Vk},get closed(){return!t.vj},get useCredentials(){return t.DE},get type(){return t.zw},get subType(){return t.CE},get mediaType(){return t.PE},get responseType(){return t.tE},redirect:e=>t.Nj(e),respondWith:e=>t.yj(e),waitUntil:e=>t.Tj(e)}}(this)}bj(t){const e=this.xj.Vk,i=new iA({$k:e,iE:{},eE:this.xj,rE:this.xj.Xu,tE:this.xj.tE,Jk:200,sE:"OK"});return pD.Rj(t,i,e)}Nj(t){if(!this.vj)throw new g("Cannot redirect, already redirected or has a response");let e;e=oi(t)?{url:t}:t,this.Dj=function(t,e){return new Gr({Xu:void 0===t.url?e.Xu:t.url,EE:void 0!==t.method?fD(t.method):void 0,iE:t.headers,Vk:t.body,DE:t.useCredentials,zw:void 0!==t.type?_D(t.type):void 0,CE:void 0!==t.subType?vD(t.subType):void 0,PE:void 0!==t.mediaType?gD(t.mediaType):void 0,tE:void 0!==t.responseType?dD(t.responseType):void 0},e)}(e,this.xj),this.QD()}constructor(t,e,i){super(t,e),this.Dj=void 0,this.Cj=i,this.Aj()}};var yD=class extends fr{Mj(t){this.Lj.Mj(t)}Bj(t){this.Lj.Bj(t)}Oj(t){this.Lj.Oj(t)}Az(t){this.Lj.Az(t)}Ez(t){this.Lj.Ez(t)}constructor(t,e=!0){const i=new bD(t);super(i,e),this.Lj=i}},bD=class{async eE(t){let e;try{e=await this.Fj(t,t.ep)}catch(e){if(e instanceof lA)return await this.Vj(e,t.ep);throw e}if(e=await this.Wj(e,t.ep),eA(e))return e;throw new de(e)}FE(t){return this.GE.FE(t)}async Fj(t,e){Io(e);let i,s=t;for(const t of this.Uj.slice()){Io(e);const n=new wD(s,t,!i);if(!n.dj)try{await n.uj}catch(t){0;continue}n.Pj&&!i?s=n.Pj:n.jE&&!i&&(i=n.jE)}return i||this.GE.eE(s)}async Vj(t,e){let i;if(t instanceof de)i=t.jE;else{const e=t.eE;i=new iA({$k:null,eE:e,tE:e.tE,Jk:0,sE:""})}const s=await this.Wj(i,e);if(s===i)throw t;if(eA(s))return s;throw new de(s)}async Wj(t,e){let i=t;for(const t of this.Gj.slice()){Io(e);const s=await Promise.resolve(i.Nb().$k(e)),n=new pD(i,t,s);if(!n.dj)try{await n.uj}catch(t){0;continue}i=n.jE||i}return i}Mj(t){this.Uj.unshift(t)}Bj(t){this.Uj.push(t)}Oj(t){_e(this.Uj,t)}Az(t){this.Gj.unshift(t)}Ez(t){_e(this.Gj,t)}yn(){this.GE.yn(),En(this.Uj),En(this.Gj)}constructor(t){this.Uj=[],this.Gj=[],this.GE=t}};r();var AD=class{get wa(){return this.eu||(this.eu=function(t){return{addRequestInterceptor(e){t.Mj(e)},removeRequestInterceptor(e){t.Oj(e)},addResponseInterceptor(e){t.Az(e)},removeResponseInterceptor(e){t.Ez(e)}}}(this)),this.eu}Mj(t){this.WW.Mj(t)}Oj(t){this.WW.Oj(t)}Az(t){this.WW.Az(t)}Ez(t){this.WW.Ez(t)}constructor(t){this.WW=t}},SD=class extends So{get wa(){return this.eu||(this.eu=function(t){return{get online(){return t.jI},get estimator(){return function(t){return{get bandwidth(){return t.jG},get roundTripTime(){return t.QG}}}(t.Zj)},setEstimator(e){t.Hj(function(t){if(!t)return;return{get jG(){return cS(t.bandwidth)},get QG(){return cS(t.roundTripTime)},JG:e=>function(t){if(!t)return;return{Xj(e){t.markRequestStart(e)},zj(e){t.markResponseStart(e)},qj(e,i){t.markResponseData(e,i)},Yj(e){t.markResponseEnd(e)}}}(t.createMeasurer(lD(e)))}}(e))},addRequestInterceptor(e){t.Mj(e)},removeRequestInterceptor(e){t.Oj(e)},addResponseInterceptor(e){t.Az(e)},removeResponseInterceptor(e){t.Ez(e)},addEventListener(e,i){t.bn(e,i)},removeEventListener(e,i){t.vn(e,i)}}}(this)),this.eu}get jI(){return this.Kj.jI}get Zj(){return this.XH.Zj}Hj(t){this.XH.Hj(t)}Mj(t){this.WW.Mj(t)}Oj(t){this.WW.Oj(t)}Az(t){this.WW.Az(t)}Ez(t){this.WW.Ez(t)}yn(){this.Ro(),this.Kj.vn(ns.Yy,this.jj),this.Kj.vn(ns.qy,this.Qj)}constructor(t,e,i){super(e),this.Kj=t,this.WW=e,this.XH=i,this.jj=t=>{this._o(t)},this.Qj=t=>{this._o(t)},this.Kj.bn(ns.Yy,this.jj),this.Kj.bn(ns.qy,this.Qj)}};r(),r(),r();var ic=function(t){return t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth",t}({});r();function TD(t,e,i,s,n,r){const o=[];let h=t-_.max(r,1),a=t+n;if(e&&i){const t=bi(i,1,5),s=e-t;h=_.min(h,s);const n=e+i+t;a=_.max(a,n)}0!==h&&s.IB(0,h)&&o.push([0,h]);return s.IB(a,1/0)&&o.push([a,1/0]),o}function ac(t){return t instanceof m&&"QuotaExceededError"===t.name}r();var kD={type:ic.BANDWIDTH};function ED(t){const e=Fa(kD);return oi(t)?e.type=xD(t):Vt(t)&&function(t){switch(t){case ic.PERFORMANCE:case ic.QUALITY:case ic.BANDWIDTH:return!0;default:return!1}}(t.type)&&(e.type=xD(t.type)),Vt(t)&&Vt(t.metadata)&&(e.metadata=function(t){const e={},i=ao(t.bitrate);return S(i)||(e.bitrate=i),e}(t.metadata)),e}function xD(t){switch(t){case"bandwidth":return ic.BANDWIDTH;case"performance":return ic.PERFORMANCE;case"quality":return ic.QUALITY}}r();var ID=class extends me{constructor(t){super("Jj"),this.$j=t}};r();var RD=class extends me{constructor(t){super("tQ"),this.eQ=t}};r();var CD=class extends me{constructor(t){super("iQ"),this.sQ=t}},PD=class extends So{nQ(t){this.rQ=t}get oQ(){switch(this.hQ.type){case ic.PERFORMANCE:return 0;case ic.QUALITY:return 1/0;case ic.BANDWIDTH:return this.hQ.metadata&&void 0!==this.hQ.metadata.bitrate?this.hQ.metadata.bitrate:bu.Vm.VG();default:return bu.Vm.VG()}}get wa(){return this.eu}get eQ(){return this.hQ}set eQ(t){this.hQ=t,this._o(new RD(t))}get $j(){return this.aQ}set $j(t){this.aQ=t,this._o(new ID(t))}get uQ(){return _.min(this.aQ,this.cQ)}get sQ(){return this.lQ}set sQ(t){this.lQ=t,this._o(new CD(t))}get dQ(){return this.cQ}get Zj(){var t;return null!=(t=this.fQ)?t:this.rQ.IZ}Hj(t){this.fQ=t}_Q(t){let e=_.min(t,.8*this.cQ);if(e=_.max(10,e),this.cQ===e)return!1;const i=this.uQ;this.cQ=e;const s=this.uQ;return s!==i&&this._o(new ID(s)),!0}get vQ(){return this.gQ}set vQ(t){this.gQ=t}constructor(...t){super(...t),this.eu=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.eQ)},set strategy(e){t.eQ=ED(e)},get targetBuffer(){return t.$j},set targetBuffer(e){const i=ao(e);S(i)||(t.$j=i)},get bufferLookbackWindow(){return t.sQ},set bufferLookbackWindow(e){const i=ao(e);S(i)||(t.sQ=i<=0?30:i)},get maxBufferLength(){return t.dQ},get clearBufferWhenSettingTargetQuality(){return t.vQ},set clearBufferWhenSettingTargetQuality(e){t.vQ=bc(e)}}}(this),this.hQ=kD,this.aQ=20,this.lQ=30,this.cQ=1/0,this.gQ=!1,this.fQ=void 0}};r(),r();var DD=class extends $s{ka(){return new ND}constructor(){super("hC")}},ND=class extends me{constructor(){super("change")}};r(),r();var MD=class extends So{yn(){this.Ro();for(const t of this.Kf)this.mQ.vn(t,this.pQ)}constructor(t,e,i){super(i),this.pQ=t=>{jA(t)&&mi((()=>{this._o(t.wa)}))},this.mQ=t,this.Kf=e;for(const t of this.Kf)this.mQ.bn(t,this.pQ)}},lt=class extends en{yn(){this.Ro(),this.mQ.yy(this.pQ)}constructor(t,e){super(e),this.pQ=t=>{jA(t)&&mi((()=>{this._o(t.wa)}))},this.mQ=t,this.mQ._y(this.pQ)}};var LD=class extends en{get lF(){return this.bF}set lF(t){if(this.dF<=t)throw new m("Start time of a clip should be smaller than the end time.");this.bF!==t&&(this.bF=t,this._o(new DD))}get dF(){return this.TF}set dF(t){if(t<=this.lF)throw new m("End time of a clip should be larger than the start time.");this.TF!==t&&(this.TF=t,this._o(new DD))}get wa(){return this.eu||(this.eu=function(t){let e;const i={get startTime(){return t.lF},set startTime(e){t.lF=e},get endTime(){return t.dF},set endTime(e){t.dF=e},addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)}};return e=new lt(t,i),i}(this)),this.eu}nr(){0===this.bF&&this.TF===1/0||(this.bF=0,this.TF=1/0,this._o(new DD))}wQ(){return new ee([this.lF,this.dF],[!0,!0])}constructor(...t){super(...t),this.bF=0,this.TF=1/0}};r();var BD=class t extends qc{DI(t,e){const i=this.yQ.wQ().mB(t);super.DI(i,e),this.bQ()}LI(){return super.LI()||this.AQ}get SQ(){return this.lR().length?this.lR():this.yQ.wQ().ks()}lR(){return ee.Cn(super.lR()).jn(this.yQ.wQ()).ks()}DR(){this.LI()?this.DI(this.SQ.start(0)):this.TQ(),super.DR(),this.bQ()}async Ca(t,e){Io(e),this.AQ=!1,this.yQ.nr(),await super.Ca(t,e)}yn(){return this.yQ.vn("hC",this.kQ),this.bI.vn(ns._b,this.Tc),this.EQ(),super.yn()}GR(t){switch(t.type){case ns.ib:return this._o(t),this.xQ(),!0;case ns.eb:case ns.Ny:return this._o(t),this.IQ(),!0;case ns.Ly:if(this.RQ)return!0}return super.GR(t)}get RQ(){return this.yQ.dF<this.ct}EQ(){this.CQ&&(cs(this.CQ),this.CQ=void 0)}bQ(){const e=this.RI,i=this.RQ&&e>=this.yQ.dF-t.ad;this.AQ&&!i?(this.AQ=!1,this.JI&&this.DR()):this.AQ||!i||this.dR||this.DQ||(this.AQ=!0,this._o(new ss(e)),this.PR())}TQ(){if(this.ct===1/0)return;const e=this.SQ,i=ee.Cn(e).mB(this.RI);rs(this.RI,i,t.ad)||this.DI(i)}constructor(e,i){super(e),this.AQ=!1,this.CQ=void 0,this.DQ=!1,this.kQ=()=>{this.TQ(),this.bQ()},this.Tc=()=>{this.EQ(),this.bQ();this.RQ&&this.RI>=this.yQ.dF-t.NQ&&!this.MI&&(this.CQ=tt(this.Tc))},this.xQ=()=>{this.DQ=!0},this.IQ=()=>{this.DQ&&(this.DQ=!1,this.bQ())},this.yQ=i,this.yQ.bn("hC",this.kQ),this.bI.bn(ns._b,this.Tc)}};BD.NQ=1,BD.ad=.001,r();var OD=class{get MQ(){return this.LQ}set MQ(t){this.LQ=t}constructor(){this.LQ=!1}};r();var FD=class extends qc{LI(){return!this.LQ.MQ&&super.LI()}PR(){this.BQ=!0,super.PR()}DR(){this.BQ=!1,super.DR()}GR(t){if(this.LQ.MQ)switch(t.type){case ns.Ly:return this.RI=0,this.BQ||(this.dR?this.OQ=!0:this.DR()),!0;case ns.eb:this.OQ&&(this.OQ=!1,this.DR());break;case ns.Ky:if(this.OQ||super.LI())return!0}return super.GR(t)}constructor(t,e){super(t),this.OQ=!1,this.BQ=!1,this.LQ=e}};r(),r();var VD=class{get wa(){return this.eu}get UO(){return this.na.XI.UO}get ZO(){return this.na.XI.ZO}get WO(){return this.na.XI.WO}get FQ(){throw new m("Not implemented")}get VQ(){throw new m("Not implemented")}get HO(){return this.na.XI.HO}get GO(){return this.na.XI.GO}get XO(){return this.na.XI.XO}constructor(t){this.na=t,this.eu=function(t){return{get currentBandwidthEstimate(){return t.ZO},get corruptedVideoFrames(){return t.UO},get droppedVideoFrames(){return t.WO},get totalVideoFrames(){return t.GO},get totalBytesLoaded(){return t.HO},get bufferedSegments(){return t.XO}}}(this)}};function WD(t){if(!t||!qn(t))return{WO:0,UO:0,GO:0,ZO:0,HO:0,XO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const e=t.getVideoPlaybackQuality();return{WO:e.droppedVideoFrames,UO:e.corruptedVideoFrames||0,GO:e.totalVideoFrames}}return{WO:t.webkitDroppedFrameCount||0,UO:0,GO:t.webkitDecodedFrameCount||0}}r(),r();var UD=class extends $s{ka(){return new GD}constructor(){super("WQ")}},GD=class extends me{constructor(){super("castingchange")}};r();var ZD=class extends So{get UQ(){var t,e;return(null==(t=this.GQ)?void 0:t.UQ)||(null==(e=this.ZQ)?void 0:e.UQ)||!1}get HQ(){return this.GQ}get XQ(){return this.ZQ}zQ(t){this.GQ=t,this.qQ(t)}YQ(t){this.ZQ=t,this.qQ(t)}qQ(t){t.bn("statechange",this.KQ)}jQ(t){t.vn("statechange",this.KQ)}get wa(){return this.eu||(this.eu=function(t){let e;const i={get casting(){return t.UQ},get airplay(){var e;return null==(e=t.HQ)?void 0:e.wa},get chromecast(){var e;return null==(e=t.XQ)?void 0:e.wa},addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)}};return e=new MD(t,["WQ"],i),i}(this)),this.eu}yn(){this.Ro(),this.GQ&&(this.jQ(this.GQ),this.GQ=void 0),this.ZQ&&(this.jQ(this.ZQ),this.ZQ=void 0)}constructor(...t){super(...t),this.GQ=void 0,this.ZQ=void 0,this.QQ=!1,this.eu=void 0,this.KQ=()=>{const t=this.QQ,e=this.UQ;t!==e&&(this.QQ=e,this._o(new UD))}}};r(),r();var fu=class{static async JQ(t,e){try{const i=new Gr({Xu:t,tE:Te.Rk,EE:Ce.GET}),s=await e.eE(i);return(await s.$k()).trim()}catch(t){return void Se(t)}}static $Q(t){try{const e=hP(t);return new lP(e.key,e.domains_page,e.domains_source,e.expiration_date,e.features,e.customer_id,e.generation_date,e.sdks,e.send_impression)}catch(t){throw new Z(Ci.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static tJ(t){void 0===t&&(t=QC.mh),As.aw("The baked-in license is used. Please update the configuration with your license.");const e=t.Tq("F2b-iL'[FL[S"),i=JSON.parse('["F$(:_L50F|aY"]').map((e=>t.Tq(e))),s=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map((e=>t.Tq(e))),n=Number(new Date(Number(t.Tq('COD|aHpHa:p3Ceo3Co""')))),r=JSON.parse("[]").map((e=>t.Tq(e)));return new lP(e,i,s,n,r)}static convertLicenseToDummyLicense(t){return new lP(t.Dq,t.Nq,t.Mq,864e13,t.Bq,t.Oq,Date.now(),t.Vq,t.Wq)}};r();var ka=class t{static Tk(){return t.Vm||(t.Vm=HD.TT()?new HD:new Tb),t.Vm}static Gb(e){t.Tk().Gb(e)}static Sk(){t.Tk().Sk()}static Vb(e){return t.Tk().Vb(e)}static Wb(e,i){t.Tk().Wb(e,i)}static eJ(e){const i=t.Vb(e);if(void 0!==i)return C(i)}static iJ(e){return"true"===t.Vb(e)}};ka.Vm=void 0;var HD=class extends ka{static TT(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}Gb(t){self.localStorage.removeItem(t)}Sk(){self.localStorage.clear()}Vb(t){var e;return null!=(e=self.localStorage.getItem(t))?e:void 0}Wb(t,e){self.localStorage.setItem(t,e)}},XD="https://validate.theoplayer.com/1/",zD=72e5,qD=_.floor(14399999*_.random()-zD),YD="THEOplayer.license",KD=class{async sJ(){const t=await this.nJ(this.rJ.license,this.rJ.licenseUrl);this.RY.oJ(t)}async nJ(t,e){let i,s=e;t?i=fu.$Q(t):s||(i=fu.tJ()),s||(s=XD+i.Dq);const n=this.hJ();let r;if(i&&(r=this.aJ.jq(i),r===Ds.Rq)){if(this.uJ(i.Lq)&&this.uJ(null==n?void 0:n.Lq)){const t=await this.cJ(s);if(t)return t}return i}if(n){if(this.aJ.jq(n)===Ds.Rq){if(this.uJ(null==n?void 0:n.Lq)){const t=await this.cJ(s);if(t)return t}return n}ka.Gb(YD)}const o=await fu.JQ(s,this.WW);let h;if(o){h=fu.$Q(o);if(this.aJ.jq(h)===Ds.Rq)return ka.Wb(YD,o),h;ka.Gb(YD)}else if(!this.iY&&i&&r===Ds.Cq&&s===XD+i.Dq)return fu.convertLicenseToDummyLicense(i);if(!i&&!h)throw new Z(Ci.LICENSE_ERROR,"The given license is invalid!");this.lJ(null!=i?i:h,new Z(Ci.LICENSE_ERROR,"The given license is invalid!"))}async Hq(t){let e=await this.RY.IY();if(this.uJ(e.Lq)){var i;const t=null!=(i=this.rJ.licenseUrl)?i:XD+e.Dq,s=await this.cJ(t);s&&(this.RY.oJ(s),e=s)}try{const i=this.aJ.jq(e);if(i===Ds.Pq){const t=dP.Uq;throw new Z(vP(t),SP.Yq(t))}if(i===Ds.Cq){const t=dP.Cq;throw new Z(vP(t),SP.Yq(t))}this.aJ.Hq(t,e)}catch(t){this.dJ(t)}}async Kq(t){const e=await this.RY.IY();try{this.aJ.Kq(t,e)}catch(t){this.dJ(t)}}async cJ(t){try{const e=await fu.JQ(t,this.WW);if(void 0===e)return;const i=fu.$Q(e);return this.aJ.jq(i)===Ds.Rq?(ka.Wb(YD,e),i):void 0}catch(t){return}}uJ(t){return!t||Number(new Date)+2592e5+qD>=t}hJ(){const t=ka.Vb(YD);if(t)return fu.$Q(t)}lJ(t,e){this.RY.oJ(t),this.dJ(e)}dJ(t){throw S_(t.message),this.fJ.DY(t.message),t}constructor(t,e,i,s,n,r){this.WW=t,this.aJ=e,this.fJ=i,this.RY=s,this.rJ=n,this.PA=r,this.iY=AP(r)}};r();var jD=class{oJ(t){this._J=t,this.vJ.Zb()}get gJ(){return this._J}async IY(){return this._J?Promise.resolve(this._J):(await this.vJ.Xb,this._J)}constructor(){this.vJ=new is}};r(),r();var QD=class extends $s{ka(){return new JD}constructor(){super("hC")}},JD=class extends me{constructor(){super("change")}};function $D(t){let e;const i={get fontFamily(){return t.mJ},set fontFamily(e){t.mJ=e},get fontColor(){return t.pJ},set fontColor(e){t.pJ=e},get fontSize(){return t.wJ},set fontSize(e){t.wJ=e},get backgroundColor(){return t.yJ},set backgroundColor(e){t.yJ=e},get windowColor(){return t.bJ},set windowColor(e){t.bJ=e},get edgeStyle(){return t.AJ},set edgeStyle(e){t.AJ=e},get marginTop(){return t.SJ},set marginTop(e){t.SJ=e},get marginBottom(){return t.TJ},set marginBottom(e){t.TJ=e},get marginLeft(){return t.kJ},set marginLeft(e){t.kJ=e},get marginRight(){return t.EJ},set marginRight(e){t.EJ=e},addEventListener(t,i){const s=Ta(t,os);e.bn(s,i)},removeEventListener(t,i){const s=Ta(t,os);e.vn(s,i)}};return e=new gm(i),t.bn(["hC"],(t=>e._o(t.wa))),i}r();var tN={mJ:void 0,pJ:void 0,wJ:void 0,yJ:void 0,bJ:void 0,AJ:void 0,SJ:void 0,TJ:void 0,kJ:void 0,EJ:void 0},eN="THEOplayer.textTrackStyle.",iN=class t extends So{get xJ(){return this.IJ}get mJ(){return this.IJ.mJ}set mJ(t){this.ir({mJ:t})}get pJ(){return this.IJ.pJ}set pJ(t){this.ir({pJ:t})}get wJ(){return this.IJ.wJ}set wJ(t){this.ir({wJ:t})}get yJ(){return this.IJ.yJ}set yJ(t){this.ir({yJ:t})}get bJ(){return this.IJ.bJ}set bJ(t){this.ir({bJ:t})}get AJ(){return this.IJ.AJ}set AJ(t){this.ir({AJ:t})}get SJ(){return this.IJ.SJ}set SJ(t){this.ir({SJ:t})}get TJ(){return this.IJ.TJ}set TJ(t){this.ir({TJ:t})}get EJ(){return this.IJ.EJ}set EJ(t){this.ir({EJ:t})}get kJ(){return this.IJ.kJ}set kJ(t){this.ir({kJ:t})}get wa(){return this.eu||(this.eu=$D(this)),this.eu}ir(e){this.IJ=ne({},this.IJ,e),t.RJ(this.IJ),this._o(new QD)}static CJ(){const t=ne({},tN);return t.mJ=ka.Vb(eN+"fontFamily")||t.mJ,t.pJ=ka.Vb(eN+"fontColor")||t.pJ,t.wJ=ka.Vb(eN+"fontSize")||t.wJ,t.yJ=ka.Vb(eN+"backgroundColor")||t.yJ,t.bJ=ka.Vb(eN+"windowColor")||t.bJ,t.AJ=ka.Vb(eN+"edgeStyle")||t.AJ,t}static RJ(t){ka.Wb(eN+"fontFamily",t.mJ||""),ka.Wb(eN+"fontColor",t.pJ||""),ka.Wb(eN+"fontSize",t.wJ||""),ka.Wb(eN+"backgroundColor",t.yJ||""),ka.Wb(eN+"windowColor",t.bJ||""),ka.Wb(eN+"edgeStyle",t.AJ||"")}constructor(){super(),this.eu=void 0,this.IJ=t.CJ()}};function sN(t,e){var i,s;t.style.marginLeft=(null!=(i=e.kJ)?i:0)+"px",t.style.marginRight=(null!=(s=e.EJ)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}r(),r(),r(),r();var nN=[ns.ho,ns.Ky,Zc.uB,ns._b,ns.jy,ns.Hy,ns.ib,ns.eb,ns.Ly,ns.Qy,ns.vb,ns.Dy,Zc.aC,ns.$y,bo.fa,Yn.My,Yn.Rb,ns.Ry,ns.Iy,ns.gb,ns.pb,ns.LICENSE_REQUEST_GENERATED,ns.Wy,ns.Gy,ns.Fy,ns.By],rN={_O:!1};function oN(t){return void 0!==t.vR}function hN(t){return t.kd.zw===De.qW}r();var xs=function(t){return t.PJ="DJ",t}({}),aN=["DJ"],To=function(t){return t[t.NJ=0]="NJ",t[t.Ik=1]="Ik",t[t.MJ=2]="MJ",t}({});r(),r();var uN=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"],wr=function(t){return t.LJ="BJ",t.OJ="FJ",t.VJ="WJ",t}({}),cN=class extends So{get kd(){return this.FT}get SZ(){return this.hk}async UJ(t,e){const i=await this.ey.$w(t.qw,e),s=await i.pT();return await this.GJ(s),s}ZJ(t){const e=this.fT;return e?0!==t.CZ.length&&t.CZ.some((t=>t._T.qw===e._T)):0!==this.FT.CZ.length?t.CZ.some((t=>this.FT.CZ.some((e=>t._T===e._T)))):0===t.CZ.length||!this.HJ}XJ(t){return this.zJ.XJ(t),this.FT=t,Promise.resolve()}qJ(t){this.zJ.qJ(t)}async Km(){this.Ro(),this.hk.removeEventListener("loadedmetadata",this.YJ);for(const t of uN)this.hk.removeEventListener(t,this.KJ);await this.Yo.yn(),this.jJ(),await this.zJ.nr(),await this.QJ(void 0)}JJ(t){t!==this.$J&&(this.$J=t,t?this.t$.Zb(void 0):this.t$=new is)}GJ(t){return this.Yo.Qo((()=>this.QJ(t)))}async QJ(t){if(t&&!this.hk.src&&!this.hk.srcObject)throw new kh(Ci.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&(this.hk.src||this.hk.srcObject))throw new kh(Ci.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this.$J&&await this.t$.Xb;const e=this.fT;e&&(await e.gT(this.hk),this.fT=void 0),t&&(await t.kn(this.hk),this.fT=t)}Ca(t){return this.Yo.Qo((()=>this.e$(t)))}e$(t){this.JJ(!1);const e=this.aO.tR;if(oi(t))this.hk.src=t;else if(function(t){if(void 0!==s.ManagedMediaSource&&t instanceof s.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&Ya.su&&Ya.nm>=17}(this.hk))try{this.hk.srcObject=t}catch(e){this.hk.src=URL.createObjectURL(t)}else this.hk.src=URL.createObjectURL(t);else lN(t)&&(this.hk.srcObject=t);this.aO.tR=e}i$(t){return this.Yo.Qo((()=>this.s$(t)))}s$(t){this.e$(t),this.hk.load()}jJ(){this.JJ(!1),wf(this.hk)}async n$(){this.fT&&await this.fT.nr()}constructor(t,e,i,s){super(),this.$J=!1,this.t$=new is,this.HJ=!1,this.Yo=new dc,this.fT=void 0,this.YJ=()=>{this.HJ=!0},this.KJ=()=>{this.JJ(!0)},this.FT=t,this.aO=e,this.hk=e.SZ,this.zJ=i,this.ey=s,this.hk.addEventListener("loadedmetadata",this.YJ);for(const t of uN)this.hk.addEventListener(t,this.KJ)}};function lN(t){return"undefined"!=typeof MediaStream&&t instanceof MediaStream}var dN=class extends cN{get SI(){return ee.Cn(this.hk.buffered)}get ct(){return this.hk.duration}get r$(){const t=this.ct;if(!isFinite(t))return!1;const e=this.SI;if(0===e.V)return!1;return t-e.Tn(e.V-1)<U}get rR(){return this.hk.preload}set rR(t){this.hk.preload=t}get cR(){return ee.Cn(this.hk.seekable)}get o$(){return this.SI}get h$(){if(qn(this.hk)&&(this.hk.videoWidth>0||this.hk.videoHeight>0))return this.SI}async nQ(){const t=this.kd;switch(t.DZ){case Ih.$C:case Ih.tP:this.hk.setAttribute("crossorigin",t.DZ);break;case Ih.SE:default:this.hk.removeAttribute("crossorigin")}void 0!==t.rR?this.hk.preload=t.rR:this.hk.preload=hi.KG,void 0!==t.NZ?this.hk.title=t.NZ:Ld(this.hk),t.a$?await this.i$(t.a$):await this.Ca(t.zC),this.zJ.$n(this,t)}ZJ(t){return!1}XJ(t){return Promise.resolve(void 0)}u$(t){return!1}c$(){return!lN(this.FT.a$)}async Km(){Ld(this.hk),await super.Km()}static l$(t,e){return!!e.canPlayType&&Boolean(e.canPlayType(t.Fk))}};r();var ki=class extends me{constructor(t){super(ns.jy),this.currentTime=t}};r();var ts=class extends me{constructor(){super(ns.Hy)}};r(),r();var fN=function(t){return t.d$="f$",t}({}),_N=class extends me{constructor(t){super("f$"),this._$=t}},vN=class extends So{get v$(){return this.g$}m$(t,e){const i=new ee([t,e]);this.g$=this.g$.AB(i),this._o(new _N(i))}p$(t,e){this.g$=this.g$.TB(new ee([t,e]))}nr(){this.g$=ee.WB()}yn(){this.Ro()}constructor(...t){super(...t),this.g$=ee.WB()}};function gN(t,e){return void 0===e&&(e=new Lb({highWaterMark:1/0})),new vr(new mN(t,e),{highWaterMark:0})}r(),r(),r();var mN=class{start(t){this.vJ=t,this.w$()&&this.y$()}pull(){this.Kd.length>0?this.b$():this.A$=!0,this.w$()&&this.y$()}cancel(t){return En(this.Kd),this.Qd=0,this.A$=!1,this.Od.cancel(t)}b$(){if(0===this.Kd.length)return;const t=this.Kd;this.Kd=[],this.Qd=0,this.A$=!1,this.vJ.enqueue(t)}w$(){if(this.A$)return!0;return this.S$-this.Qd>0}y$(){if(this.T$)return;const t=this.Od.read().then(this.k$).catch(this.Ax);this.T$=t;const e=()=>{this.T$===t&&(this.T$=void 0)};t.then(e,e)}constructor(t,{size:e=(()=>1),highWaterMark:i=1}){this.Kd=[],this.Qd=0,this.vJ=void 0,this.A$=!1,this.T$=void 0,this.k$=t=>t.done?(this.b$(),void this.vJ.close()):(this.Kd.push(t.value),this.Qd+=this.E$(t.value),this.A$&&this.b$(),this.w$()?this.Od.read().then(this.k$):void 0),this.Ax=t=>{this.b$(),this.vJ.error(t)},this.Od=t.getReader(),this.E$=e,this.S$=i}};r(),r(),r(),r();var pN=class{x$(t){this.I$.push(t),this.Ob+=t.byteLength}R$(t){if(this.Ob<=t)return this.C$();const e=this.I$;let i=0,s=0;for(;s<e.length&&i+e[s].byteLength<=t;)i+=e[s].byteLength,s++;const n=e.slice(0,s);if(s<e.length&&i<t){const r=t-i;0,n.push(fi(e[s],0,r)),i+=r}return{I$:n,Ob:i}}P$(t){const e=this.R$(t);return 1===e.I$.length?e.I$[0]:pp(e.I$,e.Ob)}C$(){return{I$:this.I$,Ob:this.Ob}}D$(t){if(this.Ob<=t)return this.N$();const e=this.I$;let i=0,s=0;for(;s<e.length&&i+e[s].byteLength<=t;)i+=e[s].byteLength,s++;const n=e.splice(0,s);if(e.length>0&&i<t){const s=t-i;0,n.push(fi(e[0],0,s)),e[0]=fi(e[0],s),i+=s}return this.Ob-=i,{I$:n,Ob:i}}M$(t){const e=this.D$(t);return 1===e.I$.length?e.I$[0]:pp(e.I$,e.Ob)}N$(){const t=this.C$();return this.I$=[],this.Ob=0,t}L$(){const t=1===this.I$.length?this.I$[0]:pp(this.I$,this.Ob);return this.I$=[],this.Ob=0,t}constructor(){this.I$=[],this.Ob=0}},Lo=class{B$(t,e){}O$(){}F$(t){this.Kd.x$(t),this.V$(!1)}W$(){this.V$(!0)}U$(){return 0!==this.Fa||0!==this.Kd.Ob}V$(t){for(;0!==this.Kd.Ob;){if(!t&&this.G$>this.Kd.Ob)return;switch(this.Fa){case 0:this.Z$(t);break;case 1:this.H$(t);break;case 2:this.X$(t)}}}z$(){this.Fa=0,this.G$=8}Z$(t){const e=sa(this.Kd.P$(this.G$)),i=new er,s=ci.iN(e,i);if(!s.QD)return this.G$=s.nN,void(t&&this.G$>this.Kd.Ob&&this.q$(this.Kd.Ob));const n=s.sN.zw;let r=s.sN.Ob;0===r&&(r=1/0),this.B$(n,r),this.Y$(n)?this.K$(r):this.q$(r)}K$(t){this.Fa=1,this.G$=t}H$(t){const e=sa(this.Kd.M$(this.G$)),i=new er,s=ci.JD(e,i,!t);if(!s.QD)throw new iT(i.nc);this.O$(),this.j$(s.$D),this.z$()}q$(t){this.Fa=2,this.G$=0,this.Q$=t}X$(t){const e=this.Kd.D$(this.Q$);this.Q$-=e.Ob;for(const t of e.I$)this.J$(t);(0===this.Q$||t&&this.Q$===1/0)&&(this.O$(),this.z$())}constructor(){this.Kd=new pN,this.Fa=0,this.G$=0,this.Q$=0,this.z$()}};function wN(t){return t instanceof ny}function yN(t){return t instanceof iy}function bN(t){return t instanceof $w||t instanceof ty}function AN(t){return t instanceof kw}function SN(t){return t instanceof nw}function TN(t){return t instanceof Fc}function kN(t){return t instanceof Xw}function EN(t){return t instanceof _y}function xN(t){return t instanceof Eh}function IN(t){return t instanceof uy}function RN(t){return t instanceof ly}function CN(t,e){const i=Do(t.boxes,IN);if(i&&i.flags.baseDataOffsetPresent)i.baseDataOffset=i.baseDataOffset.add(e);else for(const i of t.boxes)i instanceof ly&&i.flags.dataOffsetPresent&&(i.dataOffset=i.dataOffset+e)}r();var PN=class extends Lo{start(t){this.vJ=t}transform(t){this.F$(t)}flush(){this.W$()}Y$(t){return t===Ai.kP||t===Ai.gD||t===Ai.xD}j$(t){const e=this.t0(t);this.vJ.enqueue(e)}J$(t){this.vJ.enqueue(t)}t0(t){const e=Lr(t.$k.$k);switch(t.zw){case"moov":return this.e0(e);case"sidx":return this.i0(e);case"moof":return this.s0(e)}return e}get n0(){if(void 0===this.r0)throw new m("Expected to have found a movie header timescale.");return this.r0}o0(t){const e=this.h0.get(t);if(void 0===e)throw new m("Expected to have found a media header timescale for track ID "+t+".");return e}e0(t){const e=Dy(t);for(let t=0;t<e.boxes.length;t++){const i=e.boxes[t];i instanceof Kw?e.boxes[t]=this.a0(i):i instanceof jw?e.boxes[t]=this.u0(i):i instanceof iy&&this.c0(i)}for(const t of e.boxes)t instanceof Fc&&this.l0(t);return e.serialize().join()}a0(t){this.r0=t.timescale;const e=ls(po.fromNumber(t.duration,!0),this.n0,this.d0);return 0!==e.getHighBits()?this.u0(function(t){return new jw({creation:po.fromNumber(t.creationTime,!0),modification:po.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:po.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.d0,t.duration=e.toInt(),t)}u0(t){return this.r0=t.timescale,t.timescale=this.d0,t.duration=ls(t.duration,this.n0,this.d0),t}c0(t){let e;for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof $w?(e=s.trackId,t.boxes[i]=this.f0(s)):s instanceof ty?(e=s.trackId,t.boxes[i]=this._0(s)):s instanceof kw?this.v0(s,e):s instanceof _w&&this.g0(s)}}f0(t){const e=ls(po.fromNumber(t.duration,!0),this.n0,this.d0);return 0!==e.getHighBits()?this._0(function(t){return new ty({creation:po.fromNumber(t.creationTime,!0),modification:po.fromNumber(t.modificationTime,!0),duration:po.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=e.toInt(),t)}_0(t){return t.duration=ls(t.duration,this.n0,this.d0),t}v0(t,e){for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof bw?t.boxes[i]=this.m0(s,e):s instanceof Aw&&(t.boxes[i]=this.p0(s,e))}}m0(t,e){this.h0.set(e,t.timescale);const i=ls(po.fromNumber(t.duration,!0),t.timescale,this.d0);return 0!==i.getHighBits()?this.p0(function(t){return new Aw({creation:po.fromNumber(t.creationTime,!0),modification:po.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:po.fromNumber(t.duration,!0)},t.language,t.flags)}(t),e):(t.timescale=this.d0,t.duration=i.toInt(),t)}p0(t,e){return this.h0.set(e,t.timescale),t.timescale=this.d0,t.duration=ls(t.duration,t.timescale,this.d0),t}g0(t){for(const e of t.boxes)e instanceof lw?this.w0(e):e instanceof dw&&this.y0(e)}w0(t){for(const e of t.entries)e.mediaTime=NN(e.mediaTime,this.n0,this.d0),e.segmentDuration=NN(e.segmentDuration,this.n0,this.d0)}y0(t){for(const e of t.entries)e.mediaTime=ls(e.mediaTime,this.n0,this.d0),e.segmentDuration=ls(e.segmentDuration,this.n0,this.d0)}l0(t){for(let e=0;e<t.boxes.length;e++){const i=t.boxes[e];i instanceof Xw?this.b0(i):i instanceof Gw?t.boxes[e]=this.A0(i):i instanceof Zw&&(t.boxes[e]=this.S0(i))}}b0(t){const e=this.o0(t.trackId);t.defaultSampleDuration=NN(t.defaultSampleDuration,e,this.d0)}A0(t){const e=ls(po.fromNumber(t.fragmentDuration,!0),this.n0,this.d0);return 0!==e.getHighBits()?this.S0(function(t){return new Zw(po.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=e.toInt(),t)}S0(t){return t.fragmentDuration=ls(t.fragmentDuration,this.n0,this.d0),t}i0(t){let e=Ny(t);return e=e instanceof yy?this.T0(e):this.k0(e),e.serialize().join()}T0(t){const e=t.timescale,i=ls(po.fromNumber(t.earliestPresentationTime,!0),e,this.d0);if(0!==i.getHighBits())return this.k0(function(t){return new by(t.referenceId,t.timescale,po.fromNumber(t.earliestPresentationTime,!0),po.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.d0,t.earliestPresentationTime=i.toInt();for(const i of t.references)i.subsegmentDuration=NN(i.subsegmentDuration,e,this.d0);return t}k0(t){const e=t.timescale;t.timescale=this.d0,t.earliestPresentationTime=ls(t.earliestPresentationTime,e,this.d0);for(const i of t.references)i.subsegmentDuration=NN(i.subsegmentDuration,e,this.d0);return t}s0(t){const e=My(t),i=e.getSize();for(const t of e.boxes)t instanceof Eh&&this.E0(t);const s=e.getSize();if(s!==i){const t=s-i;for(const i of e.boxes)i instanceof Eh&&CN(i,t)}return e.serialize().join()}E0(t){let e;for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof uy?(e=this.o0(s.trackId),this.x0(s,e)):s instanceof hy?t.boxes[i]=this.I0(s,e):s instanceof Dc?t.boxes[i]=this.R0(s,e):s instanceof ly&&this.C0(s,e)}}x0(t,e){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=NN(t.defaultSampleDuration,e,this.d0))}I0(t,e){const i=ls(po.fromNumber(t.baseMediaDecodeTime,!0),e,this.d0);return 0!==i.getHighBits()?this.R0(function(t){return new Dc(po.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),e):(t.baseMediaDecodeTime=i.toInt(),t)}R0(t,e){return t.baseMediaDecodeTime=ls(t.baseMediaDecodeTime,e,this.d0),t}C0(t,e){let i=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=NN(s,e,this.d0);n.duration=t-i,i=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=DN(n.compositionTimeOffset,e,this.d0))}}constructor(t){super(),this.h0=Bh(),this.d0=t}};function DN(t,e,i){return po.fromInt(t,!1).multiply(i).divide(e).toNumber()}function NN(t,e,i){return po.fromInt(t,!0).multiply(i).divide(e).toNumber()}function ls(t,e,i){return rr.eV(t).kV(rr.iV(i,!0)).CV(rr.iV(e,!0))._V()}var MN=class{P0(t){return t.pipeThrough(new Gh(this.D0))}constructor(t){this.D0=new PN(t)}};r(),r();var LN=function(t){return t[t.N0=64]="N0",t[t.M0=103]="M0",t[t.L0=107]="L0",t}({});function BN(t,e,i){const s=hc(t,e);if(s!==i)throw new g("Expected descriptor with tag "+i+", but found "+s)}function ON(t,e){BN(t,e,3);const i=FN(t,e),s=e.nc+i,n=dn(t,e),r=hc(t,e),o=0!=(64&r),h=0!=(32&r),a=31&r;let u,c,l;if(0!=(128&r)&&(u=dn(t,e)),o){c=il(t,e,hc(t,e))}h&&(l=il(t,e,2));const d=function(t,e){BN(t,e,4);const i=FN(t,e),s=e.nc+i,n=hc(t,e),r=hc(t,e),o=r>>2,h=0!=(2&r),a=Xm(t,e,3),u=$e(t,e),c=$e(t,e);let l;if(e.nc<s){const i=function(t,e){return t.getUint8(e.nc)}(t,e);5===i&&(l=function(t,e){BN(t,e,5);const i=FN(t,e),s=$(t,e,i);return{B0:5,O0:s}}(t,e))}return e.Db(s),{B0:4,F0:n,V0:o,W0:h,U0:a,G0:u,Z0:c,H0:l}}(t,e);return e.Db(s),{B0:3,o:n,X0:u,Xu:c,z0:a,q0:l,Y0:d}}function FN(t,e){let i=0;for(let s=0;s<4;s++){const s=hc(t,e);if(i=i<<7|127&s,!(128&s))break}return i}function VN(t,e){const i=hc(t,e),s=hc(t,e),n=hc(t,e),r=hc(t,e),o=3&hc(t,e),h=31&hc(t,e),a=[];for(let i=0;i<h;i++){const i=dn(t,e);a.push($(t,e,i))}const u=hc(t,e),c=[];for(let i=0;i<u;i++){const i=dn(t,e);c.push($(t,e,i))}return{K0:i,j0:s,Q0:n,J0:r,$0:o,t1:a,e1:c}}function xu(t,e,i){if(i&&e.byte>=i)return;const s=t.Vb(e.byte);return e.byte+=1,s}function WN(t,e){return function(t,e,i){let s=0,n=i;for(;n>0;)n-=1,s=256*s+xu(t,e);return s}(t,e,2)}r(),r(),r(),r(),r(),r();var Oe=class t{i1(t){this.s1=this.s1.concat(t.s1),this.n1+=t.V}o1(t,e,i){const s=this.n1,n=i-e;n>0&&(this.s1.push({h1:e,a1:i,u1:n,c1:s,l1:t}),this.n1+=n)}Vb(t){for(const e of this.s1)if(e.c1<=t&&t<e.c1+e.u1)return e.l1[t+e.h1-e.c1]}d1(t,e){let i=e;for(const e of this.s1){const s=e.a1;for(let n=e.h1;n<s;n+=1,i+=1)t[i]=e.l1[n]}return i}get V(){return this.n1}set V(t){const e=this.s1;let i=this.n1-t;if(!(t>=this.n1))if(this.n1=t,0!==t)for(let t=e.length-1;t>=0;t-=1){const s=e[t];if(i<=s.u1)return s.a1-=i,s.u1-=i,void(e.length!==t+1&&(e.length=t+1));i-=s.u1}else e.length=0}get $k(){const t=new Array(this.n1);let e=0;for(const i of this.s1){const s=i.a1;for(let n=i.h1;n<s;n+=1,e+=1)t[e]=i.l1[n]}return t}_1(){const t=new j(this.n1);let e=0;for(const i of this.s1){const s=i.a1;for(let n=i.h1;n<s;n+=1,e+=1)t[e]=i.l1[n]}return t}Nb(e){const i=new t;for(const t of this.s1)i.o1(t.l1,t.h1,t.a1);return i.pW=e||ne({},this.pW),i}constructor(){this.n1=0,this.s1=[],this.pW={}}};r();var UN=[128,64,32,16,8,4,2,1];function Ua(t,e){const i=_.floor(e.bit/8),s=0==(t.Vb(i)&UN[e.bit%8])?0:1;return e.bit+=1,s}function mo(t,e,i){let s=0,n=i;for(;n>0;)n-=1,s=2*s+Ua(t,e);return s}function zt(t,e){let i=0;for(;0===Ua(t,e)&&i<32;)i+=1;return mo(t,e,i)+2**i-1}function GN(t,e){const i=zt(t,e);return 1&i?_.floor((i+1)/2):-_.floor(i/2)}function ZN(t,e){const i=[],s={byte:1};let n;do{i.push(XN(t,e,s)),n=e.Vb(s.byte)}while(void 0!==n&&128!==n);return i}function HN(t,e){let i,s=0;do{i=xu(t,e),s+=i}while(255===i);return s}function XN(t,e,i){const s=HN(e,i),n=HN(e,i),r=i.byte,o=r+n;return i.byte=o,{v1:t,g1:s,m1:n,w1:r,b1:o,A1:e}}var zN=function(t){return t[t.S1=1]="S1",t[t.T1=2]="T1",t[t.E1=3]="E1",t[t.I1=4]="I1",t[t.R1=5]="R1",t[t.C1=6]="C1",t[t.P1=7]="P1",t[t.D1=8]="D1",t[t.N1=9]="N1",t}({}),qN=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function YN(t,e,i){let s=8,n=8;for(let r=0;r<i;r+=1){if(0!==n){n=(s+GN(t,e)+256)%256}s=0===n?s:n}}var KN=class{M1(){const t=this.L1;let e=_.max(0,this.B1+t.length-2);const i=this.O1,s=i.V;let n=0;for(;e<s;e+=1){const s=i.Vb(e);0===s?n+=1:(3===s&&n>=2&&t.push(e),n=0)}this.B1=e-t.length}F1(t){const e=this.L1;let i=t;for(const t of e){if(!(t<=i))return i;i+=1}return i}Vb(t){if(!(t>this.O1.V))return t>this.B1&&this.M1(),this.O1.Vb(this.F1(t))}constructor(t){this.L1=[],this.B1=0,this.O1=t}};function jN(t){const e=new KN(t);let i,s,n,r,o,h,a=0,u=0,c=0,l=0;const d=e.Vb(1),f={bit:32};if(zt(e,f),100===d||110===d||122===d||144===d){const t=zt(e,f);3===t&&(i=Ua(e,f)),zt(e,f),zt(e,f),Ua(e,f);if(1===Ua(e,f))for(let i=0;i<(3!==t?8:12);i+=1){1===Ua(e,f)&&YN(e,f,i<6?16:64)}}const v=zt(e,f),g=zt(e,f);if(0===g)zt(e,f);else if(1===g){Ua(e,f),GN(e,f),GN(e,f);const t=zt(e,f);for(let i=0;i<t;i+=1)GN(e,f)}zt(e,f),Ua(e,f);const m=zt(e,f),p=zt(e,f),w=Ua(e,f);0===w&&Ua(e,f),Ua(e,f);1===Ua(e,f)&&(a=zt(e,f),u=zt(e,f),c=zt(e,f),l=zt(e,f));if(1===Ua(e,f)){if(1===Ua(e,f)){const t=mo(e,f,8);if(255===t)s=mo(e,f,16),n=mo(e,f,16);else{const e=qN[t];e&&(s=e[0],n=e[1])}}1===Ua(e,f)&&Ua(e,f);if(1===Ua(e,f)){mo(e,f,3),Ua(e,f);1===Ua(e,f)&&(mo(e,f,8),mo(e,f,8),mo(e,f,8))}1===Ua(e,f)&&(zt(e,f),zt(e,f)),r=Ua(e,f),1===r&&(o=mo(e,f,32),h=mo(e,f,32),Ua(e,f))}return{width:_.floor(16*(m+1)-2*a-2*u),height:_.floor((2-w)*(p+1)*16-2*c-2*l),vL:s,gL:n,V1:r?h/(2*o):void 0,W1:i,U1:v}}function QN(t){const e=Rn(Es.cN(t),Ai.kP);if(!e)return;const i=e.sN.RN,s=[];for(const t of e.Z){const e=t.sN.VN,i=t.LN.sN.RN;let h,a,u;for(const e of t.LN.zN.KN.QN.$N){const t=JN(e);var n,r,o;if(t)h=null!=(n=t.G1)?n:h,a=null!=(r=t.Z1)?r:a,u=null!=(o=t.H1)?o:u}s.push({VN:e,RN:i,G1:h,Z1:a,H1:u})}return{RN:i,Z:s}}function JN(t){let e,i,s;if(t.zw===Ai.FP){var n;const i=VN(sa(t.NM.$k),new er);e=function(t){return"avc1."+$N(t.j0,2)+$N(t.Q0,2)+$N(t.J0,2)}(i),s=null==(n=function(t){if(0===t.t1.length)return;const e=t.t1[0],i=new Oe;return i.o1(e,0,e.byteLength),jN(i)}(i))?void 0:n.V1}else if(t.zw===Ai.WP||t.zw===Ai.UP){const i=function(t,e){const i=e.Bb(),s=vs(t,i,8),n=vs(t,i,2),r=vs(t,i,1),o=vs(t,i,5),h=vs(t,i,32),a=[];for(let e=0;e<6;e++)a.push(vs(t,i,8));const u=vs(t,i,8);i.Pb(4);const c=vs(t,i,12);i.Pb(6);const l=vs(t,i,2);i.Pb(6);const d=vs(t,i,2);i.Pb(5);const f=vs(t,i,3);i.Pb(5);const _=vs(t,i,3),v=vs(t,i,16),g=vs(t,i,2),m=vs(t,i,3),p=vs(t,i,1),w=vs(t,i,2),y=vs(t,i,8),b=[];for(let e=0;e<y;e++){const e=vs(t,i,1);i.Pb(1);const s=vs(t,i,6),n=vs(t,i,16),r=[];for(let e=0;e<n;e++){const e=vs(t,i,16),s=$(t,new er(i.nc>>3),e);i.Pb(8*e),r.push({X1:e,z1:s})}b.push({q1:e,Y1:s,K1:n,j1:r})}return{K0:s,Q1:n,J1:r,t2:o,e2:a,i2:u,s2:c,n2:l,o2:h,h2:d,a2:f,u2:_,c2:v,l2:m,d2:p,f2:g,$0:w,_2:y,g2:b}}(sa(t.OM.$k),new er);e=function(t,e){let i=t.toString()+".";switch(e.Q1){case 0:break;case 1:i+="A";break;case 2:i+="B";break;case 3:i+="C";break;default:return}switch(i+=e.t2.toString()+".",i+=function(t){let e=t;return e=e>>>1&1431655765|(1431655765&e)<<1,e=e>>>2&858993459|(858993459&e)<<2,e=e>>>4&252645135|(252645135&e)<<4,e=e>>>8&16711935|(16711935&e)<<8,e=e>>>16|e<<16,e}(e.o2).toString(16)+".",e.J1){case 0:i+="L";break;case 1:i+="H";break;default:return}i+=e.i2.toString();const s=e.e2.reduce(((t,e)=>0===t?e:e+1),0);for(let t=0;t<s;t++)i+="."+e.e2[t].toString(16).toUpperCase();return i}(t.zw,i)}else if(t.zw===Ai.$P||t.zw===Ai.tD||t.zw===Ai.eD||t.zw===Ai.iD){const i=function(t,e){const i=e.Bb(),s=vs(t,i,8),n=vs(t,i,8),r=vs(t,i,7),o=vs(t,i,6),h=Boolean(vs(t,i,1)),a=Boolean(vs(t,i,1)),u=Boolean(vs(t,i,1)),c=vs(t,i,4);return vs(t,i,28),vs(t,i,32),vs(t,i,32),vs(t,i,32),vs(t,i,32),{m2:s,w2:n,b2:r,A2:o,S2:h,T2:a,E2:u,I2:c}}(sa(t.jM.$k),new er);e=function(t,e){const i=t.toString(),s=Sa(e.b2.toString(),2,"0"),n=Sa(e.A2.toString(),2,"0");return i+"."+s+"."+n}(t.zw,i)}else if(t.zw===Ai.ZP){const i=function(t,e){const i=e.Bb(),s=vs(t,i,8);i.Pb(24);const n=vs(t,i,8),r=vs(t,i,8),o=vs(t,i,4),h=vs(t,i,3),a=nu(t,i),u=vs(t,i,8),c=vs(t,i,8),l=vs(t,i,8),d=vs(t,i,16),f=new Array(8);for(let e=0;e<d;e++)f[e]=vs(t,i,8);return{K0:s,b2:n,A2:r,R2:o,C2:h,P2:a,lL:u,dL:c,fL:l,D2:d,N2:f}}(sa(t.VM.$k),new er);e=function(t,e){let i=t.toString()+".";return i+="0"+e.b2+".",i+=Sa(""+e.A2,2,"0")+".",i+=Sa(""+e.R2,2,"0")+".",i+=Sa(""+e.C2,2,"0")+".",i+=Sa(""+e.lL,2,"0")+".",i+=Sa(""+e.dL,2,"0")+".",i+=Sa(""+e.fL,2,"0")+".",i+="0"+e.P2,i}(t.zw,i)}else if(t.zw===Ai.zP){const i=function(t,e){const i=e.Bb();i.Pb(1);const s=vs(t,i,7),n=vs(t,i,3),r=vs(t,i,5),o=nu(t,i),h=nu(t,i),a=nu(t,i),u=nu(t,i),c=nu(t,i),l=nu(t,i),d=vs(t,i,2);i.Pb(3);const f=nu(t,i);let _;return f?_=vs(t,i,4):i.Pb(4),{aN:s,M2:n,L2:r,B2:o,O2:h,F2:a,W2:u,U2:c,G2:l,Z2:d,H2:f,X2:_}}(sa(t.GM.$k),new er);e=function(t,e,i){let s=t.toString()+".";if(s+=e.M2+".",s+=""+Sa(""+e.L2,2,"0"),s+=(0===e.B2?"M":"H")+".",s+=(1===e.F2?12:10)+".",s+=(1===e.M2?0:e.W2)+".",s+=""+e.U2+e.G2+(1===e.U2&&1===e.G2?e.Z2:"0"),i&&i.cL===tT.ON_SCREEN_COLOURS){const t=i;s+="."+Sa(""+t.lL,2,"0")+"."+Sa(""+t.dL,2,"0")+"."+Sa(""+t.fL,2,"0")+"."+(t._L?1:0)}return s}(t.zw,i,t.ZM)}else if(t.zw===Ai.hD){i=function(t){const e=t.Y0;switch(e.F0){case LN.N0:return function(t){var e;if(!(null==(e=t.H0)?void 0:e.O0))return"mp4a.40";const i=function(t,e){let i=vs(t,e,5);31===i&&(i=32+vs(t,e,6));const s=vs(t,e,4);let n;return 15===s&&(n=vs(t,e,24)),{z2:i,q2:s,Y2:n,K2:vs(t,e,4)}}(sa(t.H0.O0),new Cm);return"mp4a.40."+i.z2}(e);case LN.M0:return"mp4a.40.2";case LN.L0:return"mp4a.40.34"}}(ON(sa(t.kM.$k),new er))}else if(t.zw===Ai.uD)i="fLaC";else if(t.zw===Ai.sD)i="ac-3";else{if(t.zw!==Ai.nD)return(t.zw===Ai.vD||t.zw===Ai._D)&&t.zM?JN(t.zM):void 0;i="ec-3"}return{G1:e,Z1:i,H1:s}}function $N(t,e){const i=t.toString(16);return Sa(i,e,"0")}function tM(t,e){const i=Es.cN(sa(t)),s=function(t,e){let i;for(const n of t.Z){var s;const t=null==(s=n.CL)?void 0:s.CL;if(t){const s=n.sN.VN,r=Do(e.Z,(t=>t.VN===s)),o=Ic.eV(t,r.RN);i&&!o.zF(i)||(i=o)}}return i}(Rn(i,Ai.gD),e),n=Rn(i,Ai.TD);return{lF:s.VF(),j2:n.$k}}function eM(t){const e=t.bT("codecs");return e?e.split(",").map((t=>t.trim())):[]}function iM(t,e){return lf(t,e,hM)}function sM(t,e){return!("opus"===t)&&!("opus"===e)||t===e}function nM(t,e){const i=rM(t),s=rM(e);if((i||s)&&As.Ys.Lp)return!0;const n=i||oM(t),r=s||oM(e);return!n&&!r||t.split(".")[0]===e.split(".")[0]}function rM(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function oM(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function hM(t,e){if(t===e)return!0;const i=t.split("."),s=e.split("."),n=i[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,e]=i,[,n,r]=s;if(t!==n)return!1;if(Number(e)!==Number(r))return!1}return!0}r(),r(),r();var aM=class extends dl{get Q2(){return this.J2}get t3(){return this.e3}constructor(t,e,i,s){super(i),this.J2=t,this.e3=e,this.i3=i}};var uM=Ya.$g,cM=class extends So{get $j(){return this.aQ}set $j(t){this.aQ=t}get sQ(){return this.lQ}set sQ(t){this.lQ=t}get va(){return this.s3||this.n3.updating}r3(t,e,i){switch(t.zw){case To.NJ:case To.Ik:return this.o3((i=>this.h3(t,e,i)),i);case To.MJ:throw new m("Opaque segments are not supported on web.")}}a3(t,e){switch(t.zw){case To.NJ:return this.o3((e=>this.u3(t,e)),e);case To.Ik:throw new m("Streaming initialization segments are not supported on web.");case To.MJ:throw new m("Opaque initialization segments are not supported on web.")}}async u3(t,e){this.l3?this.d3=QN(sa(t.$k)):(await this.f3(t,void 0,e),uM&&(this._3=!1,this.v3=t))}async h3(t,e,i){uM&&this._3&&this.v3&&await this.u3(this.v3,i);try{if(Io(i),this.l3&&this.d3){const n=await async function(t,e){switch(t.zw){case To.NJ:return t;case To.Ik:{const i=await zn(t.$k,e);return Io(e),{zw:To.NJ,$k:new j(i)}}case To.MJ:throw new m("MediaBufferWrapper - Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,i),r=tM(n.$k,this.d3);var s;t={zw:To.NJ,$k:r.j2},e=ne({},e,{aW:r.lF+(null!=(s=e.aW)?s:0)})}await this.f3(t,e,i),this._o(new me(xs.PJ))}finally{t.zw===To.Ik&&t.$k.cancel(new vt).catch(M)}}async f3(t,e,i){switch(Io(i),e&&await this.g3(e),t.zw){case To.NJ:if(this.m3){const e=this.m3.P0(Bb(t.$k));return await this.w3(e,i)}return await this.y3(t.$k);case To.Ik:if(this.m3){const e=this.m3.P0(t.$k);return await this.w3(e,i)}return await this.w3(t.$k,i)}}async w3(t,e){const i=this.b3.SI,s=gN(t).getReader();let n=!1;try{for(;;){const t=await Lu(s.read(),e);if(t.done){n=!1;break}Io(e);const i=gu(t.value);n=!0,await this.y3(i)}}catch(t){if(s.cancel(t).catch(M),n){await this.A3();const t=this.b3.SI.jn(i.pB());for(let e=0;e<t.V;e++)await this.S3(t.Sn(e),t.Tn(e))}throw t}}T3(t,e){return this.o3((()=>this.E3(t,e)))}async E3(t,e){this.n3.appendWindowStart===t&&this.n3.appendWindowEnd===e||(await this.A3(),this.n3.appendWindowStart=0,this.n3.appendWindowEnd=e,this.n3.appendWindowStart=t)}async g3(t){if(!rs(this.n3.timestampOffset,t.aW,.001))try{this.n3.timestampOffset=t.aW}catch(e){await this.A3(),this.n3.timestampOffset=t.aW}}async y3(t){this.n3.appendBuffer(t),this.x3=!0,await this.I3()}R3(t,e,i){return this.o3((i=>this.S3(t,e,i)),i)}async S3(t,e,i){Io(i),this.n3.remove(t,e),await this.I3()}I3(){const t=this.b3.SI;return new Promise(((e,i)=>{let s,n=!1;const r=()=>{n=!0},o=()=>{n=!1,s="error"},h=()=>{n=!1,s="aborted"},a=()=>{n=!1,s="sourceclose",u()},u=()=>{c(),n&&!s?(t.CB(this.b3.SI)||this._o(new me(xs.PJ)),e()):i(new m(s))},c=()=>{this.n3.removeEventListener("update",r),this.n3.removeEventListener("error",o),this.n3.removeEventListener("abort",h),this.n3.removeEventListener("updateend",u),this.C3.vn(wr.OJ,a)};this.n3.addEventListener("update",r),this.n3.addEventListener("error",o),this.n3.addEventListener("abort",h),this.n3.addEventListener("updateend",u),Ya.Rg&&Ya.Pg<3&&this.C3.bn(wr.OJ,a)}))}P3(){return this.o3((()=>this.A3()))}async A3(){if(this.C3.aR===Ue.zE){uM&&(this._3=!0),this.n3.updating&&(this.s3=!0);try{this.n3.abort()}catch(t){0,this.s3=!1}this.va&&await this.I3().catch(M)}}D3(){return"function"==typeof this.n3.changeType&&!Ya.Eg}XJ(t){if(this.N3(),this.C3.aR===Ue.M3)return;var e;this.L3=t;const i=null!=(e=this.C3.B3(t.Fk))?e:t.Fk;this.l3=lM(t.Fk,this.O3),this.D3()&&this.F3(i)&&(this.O3=i,this.n3.changeType(this.O3))}F3(t){if(Th(this.O3,t))return!1;const e=al(this.O3),i=al(t);if(e.zw!==i.zw)return!0;return!iM(eM(e),eM(i))||!(Ya.Lv&&Ya.Sg)}V3(){this.C3.aR!==Ue.Ly||this.W3||this.va||(this.n3.timestampOffset=this.n3.timestampOffset,this.C3.U3())}async o3(t,e){this.N3();const i=new Fi;i.rp(this.G3.ep),e&&i.rp(e);try{this.W3=t(i.ep),await this.W3,this.C3.U3(),this.va&&await this.I3()}finally{this.W3=void 0,i.Km()}}N3(){if(this.W3)throw new m("Internal error")}async Km(){this.Ro(),this.G3.np(),this.W3&&(await this.W3.catch(M),this.W3=void 0),this.n3.removeEventListener("updateend",this.Z3),this.n3.removeEventListener("bufferedchange",this.H3)}constructor(t,e,i,s,n){var r;if(super(),this.aQ=20,this.lQ=30,this.s3=!1,this.x3=!1,this.W3=void 0,this.G3=new Fi,this._3=!1,this.v3=void 0,this.l3=!1,this.d3=void 0,this.Z3=()=>{this.s3=!1},this.H3=t=>{t.removedRanges&&this._o(new me(xs.PJ))},this.C3=e,this.b3=t,this.n3=i,this.n3.addEventListener("updateend",this.Z3),this.n3.addEventListener("bufferedchange",this.H3),this.L3=s,this.O3=n,this.l3=lM(s.Fk,n),null==(r=e.kd)?void 0:r.Cp){var o;const t=null!=(o=e.kd.X3)?o:1e5;this.m3=new MN(t)}}};function lM(t,e){return Cl(t,"audio/mp4")&&Cl(e,"audio/mpeg")}r();var dM=class{get SI(){if(this.z3.aR===Ue.M3)return ee.WB();let t=ee.Cn(this.n3.buffered).jn(new ee([0,1/0]));const e=this.q3;return void 0!==e&&t.V>0&&t.Tn(t.V-1)===e&&(t=t.AB(ee.FB(e))),t}r$(){return!!this.q3&&this.SI.gB().wr(this.q3)}Y3(){const t=this.SI;this.q3=t.V>0?t.Tn(t.V-1):0,this.z3.K3()}V3(){this.q3=void 0}constructor(t,e){this.q3=void 0,this.z3=e,this.n3=t}};function fM(t,e,i,s,n,r,o){const h=new dM(n,t),a=new cM(h,t,n,i,r);return new _M(t,e,i,s,h,a,o)}var _M=class extends So{get SI(){return this.b3.SI}get kd(){return this.FT}get Fk(){return this.NT}get j3(){return this.Q3}get J3(){return this.t4.v$}get $j(){return this.e4.$j}set $j(t){this.e4.$j=t}get sQ(){return this.e4.sQ}set sQ(t){this.e4.sQ=t}get va(){return this.e4.va}r$(){return this.b3.r$()}Y3(){this.b3.Y3()}V3(){this.b3.V3(),this.e4.V3()}i4(t,e){this.t4.m$(t,e)}s4(t,e){this.t4.p$(t,e)}n4(){return this.e4.P3()}r3(t,e,i){return this.e4.r3(t,e,i)}a3(t,e,i){return this.e4.a3(t,i)}T3(t,e){return Ya.Rg&&Ya.Pg<3?this.e4.T3(t,1/0):this.e4.T3(t,e)}async rT(t,e,i){this.s4(t,e);const s=this.SI;await this.e4.R3(t,e,i);const n=0!==s.V&&0===this.SI.V;(Ya._m||Ya.Ng)&&n&&this.aO.Db(this.aO.RI)}ZJ(t){const e=t.Fk;if(this.NT===e)return!0;const i=this.r4.get(e);if(void 0!==i)return i;const s=this.o4(t);return this.r4.set(e,s),s}o4(t){const e=this.C3.B3(t.Fk);if(void 0===e)return!1;const i=al(this.NT),s=al(e),n=eM(i),r=eM(s);if(this.e4.D3()){if(!function(t,e){return lf(t,e,nM)}(n,r))return!1;if(Ya.gm&&!function(t,e){return lf(t,e,sM)}(n,r))return!1}else{if(i.zw!==s.zw)return!1;if(!iM(n,r))return!1}return!0}async XJ(t){const e=t.Fk;this.NT!==e&&(this.r4.clear(),this.e4.XJ(t),this.NT=e),this.FT=t,this.C3.h4()}async Km(){this.r4.clear(),this.Ro(),this.t4.yn();try{this.e4.vn(xs.PJ,this.Ds),await this.e4.Km()}catch(t){}}constructor(t,e,i,s,n,r,o){super(),this.r4=Vh(),this.C3=t,this.FT=i,this.NT=i.Fk,this.Q3=s,this.aO=e,this.b3=n,this.e4=r,this.t4=o,this.e4.bn(xs.PJ,this.Ds)}};r();var kr=class{a4(){let t=this.Sn,e=this.Tn;if(this.u4||this.c4){const i=.001*(As.Wm()-this.l4);this.u4&&(t+=i),this.c4&&(e+=i)}return ee.VB(t,e)}constructor(t,e,i=!1,s=!1){this.Sn=t,this.Tn=e,this.u4=i,this.c4=s,this.l4=As.Wm()}};function vM(t){const e=[];if(t.d4&&e.push(t.d4.SI),t.f4&&e.push(t.f4.SI),0===e.length)return ee.WB();let i=0;for(const t of e)t.V>0&&(i=_.max(i,t.Tn(t.V-1)));const s=t.r$;let n=new ee([0,i],[!0,s]);for(let t of e)s&&t.V>0&&(t=t.AB(new ee([t.Tn(t.V-1),i],[!0,!0]))),n=n.jn(t);return n}function gM(t,e,i){const s=t.SI;let n,r=s.kB(e);if(r>=0){if(!(r+1<s.V))return Promise.resolve();n=s.Sn(r+1)}else{if(r=s.MB(e),!(r>=0))return Promise.resolve();n=s.Sn(r)}return t.rT(n,1/0,i)}function mM(t,e,i){if(!t.wr(e)){const s=t.kB(e,i);if(s>=0){const i=t.Sn(s);if(e<i)return i}}return e}r(),r(),r(),r();var pM=.5,wM=[ns.ho,ns.Ky,ns.ib,ns.eb,ns.Wy,ns.Gy,ns.Ly,ns.Qy,Zc.aC,bo.fa],yM=class{_4(t){this.v4.push(t),t.bn(fN.d$,this.g4)}get v$(){return this.v4.reduce(((t,e)=>t.AB(e.v$)),ee.WB())}yn(){this.m4(),this.w4.vn(Zc.aC,this.y4),this.aO.vn(ns.jy,this.y4),this.aO.vn(wM,this.b4),this.v4.forEach((t=>t.vn(fN.d$,this.g4))),this.A4(),this.S4=!0}u$(t){if(this.aO.MI)return!1;if(0!==this.T4)return!1;const e=this.b3.SI,i=e.kB(t);if(i>=0&&t+pM<e.Tn(i))return!1;const s=i>=0?i+1:e.MB(t);if(s<0||s>=e.V)return!1;const n=e.Sn(s);if(ee.VB(t,n).TB(this.v$).OB>1)return!1;if(0===t&&!this.aO.dR)return this.E4(t,n,2e3),!0;if(As.hI)return this.E4(t,n,250),!0;return!(_.abs(n-t)<=.001)&&(this.x4(n),!0)}E4(t,e,i){this.A4(),this.I4=t,this.aO.bn(ns.ib,this.R4),this.T4=As.Gm((()=>{this.I4===this.aO.RI&&this.x4(e),this.A4()}),i)}A4(){0!==this.T4&&(this.aO.vn(ns.ib,this.R4),As.Um(this.T4),this.T4=0)}x4(t){this.aO.Db(t,!1,!0)}C4(){0!==this.P4&&(As.Um(this.P4),this.P4=0),this.aO.vn(ns._b,this.ed)}D4(){this.S4||0===this.N4&&(this.C4(),this.N4=As.lw(this.M4,250))}m4(){0!==this.N4&&(As.dw(this.N4),this.N4=0),this.C4(),this.aO.dR||(this.L4=0)}B4(){return!this.aO.JI&&(!this.aO.dR||this.O4())&&0!==this.aO.tR&&!this.aO.MI&&!this.aO.lt&&(this.F4()||this.w4.aR>=Wt.EO)}O4(){return!1}F4(){const t=this.aO.RI,e=this.b3.SI,i=e.kB(t);return-1!==i&&e.Tn(i)>t+pM}V4(t,e){const i=e.kB(t);return i>-1?e.Tn(i):t}constructor(t,e,i,s){this.b3=t,this.w4=e,this.aO=i,this.S4=!1,this.v4=[],this.T4=0,this.P4=0,this.W4=0,this.I4=0,this.L4=0,this.N4=0,this.U4=1,this.g4=t=>{const e=this.aO.RI,i=t._$.wr(e),s=t._$.wr(e,pM)&&this.aO.aR<=Wt.kO;(i||s)&&this.u$(e)},this.y4=Vd((t=>{if(this.S4)return;if(this.w4.aR<=Wt.kO){const t=this.aO.RI;this.u$(t)||this.M4()}else this.A4()}),100),this.ed=Vd((t=>{this.D4()}),100),this.R4=t=>{t.currentTime!==this.I4&&this.A4()},this.b4=()=>{this.B4()?0===this.N4&&(this.aO.bn(ns._b,this.ed),this.P4=As.Gm((()=>{this.D4()}),3500)):this.m4()},this.M4=()=>{const t=this.W4,e=this.L4,i=this.aO.RI,s=As.Wm(),n=this.b3.SI;if(t!==i)return this.W4=i,this.L4=s,this.U4=1,void(this.G4=As.uI?2e3:1e3);if(this.B4()&&0!==n.V&&e>0&&s>e+this.G4){let t;const e=this.v$.gB().TB(n),s=e.NB(i);if(-1!==s){const n=e.Sn(s);if(n-i<1||this.O4()){const i=e.Tn(s);0,t=i}}var r;if(!t)t=null==(r=this.Z4)?void 0:r.determineStallJumpTarget(),t&&t!==i||(t=i+.01*this.U4,n.wr(t)||(t=this.V4(i,n)));0,this.W4=t,this.U4++,this.G4=_.min(2*this.G4,1e4),this.x4(t)}},this.w4.bn(Zc.aC,this.y4),this.aO.bn(ns.jy,this.y4),this.aO.bn(wM,this.b4),this.Z4=s,this.G4=As.uI?2e3:1e3}},bM=class extends yM{O4(){if(!Ya.Ng||!this.aO.dR)return!1;const t=this.aO.RI,e=this.b3.SI,i=this.v$.gB().TB(e),s=i.NB(t);if(-1===s)return!1;return i.Sn(s)-t<=3e3}},AM=Ya.Ug||Ya.Zg,SM=Ya.Kg||Ya.$g||Ya.su,Ue=function(t){return t.M3="closed",t.zE="open",t.Ly="ended",t}({}),TM=class extends cN{get d4(){return this.H4}get f4(){return this.X4}get ct(){if(this.z4)return this.z4;const t=this.kZ.duration;return t===Eu?1/0:t}q4(t){if(S(t)||t<0)throw new m("Invalid duration");this.Y4()?this.K4(t):this.z4=t}K4(t){const e=t===1/0;if(e&&this.kZ.setLiveSeekableRange){const t=2**39;this.kZ.setLiveSeekableRange(0,t)}this.kZ.duration=e?SM?1/0:Eu:t,this.z4=void 0}get SI(){return AM?vM(this):function(t,e){let i=e;return i.V>0&&t.r$&&(i=i.AB(ee.FB(i.Tn(i.V-1)))),i}(this,ee.Cn(this.hk.buffered))}get o$(){var t;return null==(t=this.H4)?void 0:t.SI}get h$(){var t;return null==(t=this.X4)?void 0:t.SI}get cR(){return this.j4.a4().jn(new ee([0,this.ct],[!0,!0]))}Q4(t,e,i,s){this.j4=new kr(t,e,Boolean(i),Boolean(s))}get r$(){return(!this.H4||this.H4.r$())&&(!this.X4||this.X4.r$())}get aR(){return this.kZ.readyState}async nQ(){const t=this.FT,e=Do(t.J4,(t=>Cl(t.Fk,"audio"))),i=Do(t.J4,(t=>Cl(t.Fk,"video")));if(this.hk.disableRemotePlayback=!0,await this.t5(),e){const t=new vN;var s;this.e5._4(t);const i=null!=(s=this.B3(e.Fk))?s:e.Fk;this.i5=this.kZ.addSourceBuffer(i),this.H4=fM(this,this.aO,e,Fo.wE,this.i5,i,t),this.H4.bn(xs.PJ,this.H3)}if(i){const t=new vN;var n;this.e5._4(t);const e=null!=(n=this.B3(i.Fk))?n:i.Fk;this.s5=this.kZ.addSourceBuffer(e),this.X4=fM(this,this.aO,i,Fo.yE,this.s5,e,t),this.X4.bn(xs.PJ,this.H3)}this.zJ.$n(this,t)}async t5(){await super.i$(this.kZ),"open"!==this.aR&&await MA(this.kZ,"sourceopen")}Y4(){if("open"!==this.aR)return!1;const t=this.H4&&this.H4.va,e=this.X4&&this.X4.va;return!(t||e)}Y3(){this.n5=!0,this.H4&&this.H4.Y3(),this.X4&&this.X4.Y3(),this.n5=!1,this.r5()}V3(){this.H4&&this.H4.V3(),this.X4&&this.X4.V3()}ZJ(t){const e=Do(t.J4,(t=>Cl(t.Fk,"audio"))),i=Do(t.J4,(t=>Cl(t.Fk,"video")));if(this.H4){if(!e)return!1;if(!this.H4.ZJ(e))return!1}else if(e)return!1;if(this.X4){if(!i)return!1;if(!this.X4.ZJ(i))return!1}else if(i)return!1;return!!super.ZJ(t)}async XJ(t){const e=Do(t.J4,(t=>Cl(t.Fk,"audio"))),i=Do(t.J4,(t=>Cl(t.Fk,"video"))),s=[];this.H4&&s.push(this.H4.XJ(e)),this.X4&&s.push(this.X4.XJ(i)),await Promise.all(s),await super.XJ(t)}qJ(t){super.qJ(t)}async Km(){if(this.kZ.removeEventListener("sourceclose",this.o5),Ya.Ng&&await this.n$(),this.H4){if(await this.H4.Km(),this.H4=void 0,fm()&&(Ya.Ng||Ya.Rg))try{this.kZ.removeSourceBuffer(this.i5)}catch(t){}this.i5=void 0}if(this.X4){if(await this.X4.Km(),this.X4=void 0,fm()&&(Ya.Ng||Ya.Rg))try{this.kZ.removeSourceBuffer(this.s5)}catch(t){}this.s5=void 0}this.hk.src&&URL.revokeObjectURL(this.hk.src),this.hk.disableRemotePlayback=!1,this.aO.vn([ns._b,ns.ib,ns.Wy],this.pd),this.e5.yn(),Ya.Rg&&await this.n$(),await super.Km()}h4(){const t=this.FT,e=t.J4.map((t=>Cl(t.Fk,"audio")&&this.H4?this.H4.kd:Cl(t.Fk,"video")&&this.X4?this.X4.kd:t));this.FT=ne({},t,{J4:e})}K3(){this.n5||this.r5()}get h5(){if(!this.r$)return!1;const t=this.SI;return 0!==t.V&&t.Sn(t.V-1)<=this.aO.RI}r5(){this.h5&&this.Y4()&&(this.kZ.endOfStream(),this.z4=void 0,this._o(new me(wr.LJ)),this.aO.H3())}U3(){this.Y4()&&(this.r$?this.r5():void 0!==this.z4&&this.K4(this.z4))}u$(t){return this.e5.u$(t)}c$(){return!0}B3(t){return kM(this.a5,t)}static l$(t){const e=d_(t.u5);if(void 0===e)return!1;if("function"!=typeof e.isTypeSupported)return!1;const i=new l_(t.u5);for(const e of t.J4)if(void 0===kM(i,e.Fk))return!1;return!0}constructor(t,e,i,s,n,r=new l_(t.u5),o){super(t,e,s,n),this.H4=void 0,this.i5=void 0,this.X4=void 0,this.s5=void 0,this.j4=new kr(0,1/0),this.z4=void 0,this.n5=!1,this.o5=()=>{this._o(new me(wr.OJ))},this.c5=()=>{this._o(new me(wr.VJ))},this.pd=()=>{this.r5()},this.H3=()=>{this.aO.H3()},this.a5=r,this.kZ=this.a5.Vp(),this.kZ.addEventListener("sourceclose",this.o5),this.kZ.addEventListener("sourceopen",this.c5),this.aO.bn([ns._b,ns.ib,ns.Wy],this.pd),this.e5=new bM(this,i,this.aO,o)}};function kM(t,e){const i=al(e),s=eM(i),n="audio/mp4"===i.zw,r=n&&1===s.length&&"mp4a.40.34"===s[0];if(t.Up(e)&&(!r||!Ya.$g))return e;if(r){const e=['audio/mp4; codecs="mp3"',"audio/mpeg"];for(const i of e)if(t.Up(i))return i}if(n&&1===s.length&&"flac"===s[0].toLowerCase()){const i=["flac","fLaC","FLAC"];for(const s of i){const i='audio/mp4; codecs="'+s+'"';if(t.Up(e))return i}}}r(),r();var EM=class extends me{constructor(t){super(ns.Wy),this.currentTime=t}},xM=[ns.vb,ns.Qy,ns.ib,ns.Wy,ns.ho,ns.Ky],IM=class extends So{get RI(){return this.OH}get l5(){return this.d5}get f5(){return this._5}get ct(){return this.FA}get MI(){return this.v5}get JI(){return this.WH}get aR(){return this.g5}get dR(){return this.FH}get qI(){return this.VH}set qI(t){this.qI!==t&&(this.VH=t,this._o(new Ar(this.RI,this.yR)))}get tR(){return this.UH}set tR(t){this.tR!==t&&(this.UH=t,this._o(new ga(this.RI,this.tR)))}get yR(){return this.jA}set yR(t){this.yR!==t&&(this.jA=t,this._o(new Ar(this.RI,this.yR)))}Db(t,e,i){this.OH!==t&&(this.OH=t,this.d5=e,i&&!this.FH?(this._5=!0,this._o(new EM(this.RI))):(this._5=!1,this.FH=!0,this._o(new Al(this.RI))))}PR(){this.WH||(this.WH=!0,this._o(new nl(this.RI)))}DR(){this.WH&&(this.WH=!1,this._o(new he(this.RI)))}Km(){this.Ro()}constructor(t,e,i,s,n,r,o,h,a,u,c){super(),this.OH=t,this.FA=e,this.v5=i,this.WH=s,this.FH=n,this.VH=r,this.UH=o,this.jA=h,this.g5=a,this.d5=u,this._5=c}};function RM(t){return new IM(t.RI,t.ct,t.MI,t.JI,t.dR,t.qI,t.tR,t.yR,t.aR,!1,t.f5)}function CM(t,e){e.ct===t.ct||S(e.ct)&&S(t.ct)||t._o(new yn(t.ct)),t.qI=e.qI,t.yR=e.yR,t.tR=e.tR,e.JI?t.PR():t.DR().catch(M),e.RI!==t.RI||e.aR>Wt.TO&&t.aR===Wt.TO?t.Db(e.RI,e.l5,e.f5):!e.dR&&t.dR?t._o(new Al(t.RI)):e.dR&&!t.dR&&t.aR>=Wt.kO&&t._o(new Be(t.RI)),!e.MI&&t.MI&&t._o(new ss(t.RI))}r(),r();var PM=class extends So{get aR(){return this.uR()}m5(t){this.eU!==t&&(this.eU=t,this._o(new oa(this.aO.RI,t)))}p5(){this.m5(this.uR())}nr(){this.m5(Wt.TO)}Km(){this.Ro()}constructor(t){super(),this.eU=Wt.TO,this.w5=()=>{this.p5()},this.aO=t}};r();var DM=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],Xo=class extends PM{uR(){let t=this.aO.SZ.readyState;return t>Wt.kO&&this.aO.y5?Wt.kO:(this.aO.SZ.seeking&&t>Wt.Xn&&(t=Wt.Xn),t)}Km(){for(const t of DM)this.aO.SZ.removeEventListener(t,this.w5);super.Km()}constructor(t){super(t);for(const t of DM)this.aO.SZ.addEventListener(t,this.w5)}};r();var NM=class extends PM{uR(){if(this.aO.SZ.readyState===Wt.TO)return Wt.TO;const t=this.b5(),e=t?t.Tn-t.Sn:0;if(!t)return Wt.Xn;const i=this.aO.tR;return this.A5()||e>=3*i?Wt.xO:e>=3?Wt.EO:Wt.kO}b5(){const t=this.aO.RI,e=this.aO.SI.bB(.04),i=e.kB(t);if(!(i<0))return{Sn:t,Tn:e.Tn(i)}}A5(){if(this.aO.MI)return!0;const t=this.aO.ct,e=this.b5();return!!e&&t-e.Tn<=.16666666666666666}Km(){this.aO.vn([ns.ib,ns.Wy],this.w5);for(const t of DM)this.aO.SZ.removeEventListener(t,this.w5);super.Km()}constructor(t){super(t),this.aO.bn([ns.ib,ns.Wy],this.w5);for(const t of DM)this.aO.SZ.addEventListener(t,this.w5)}};r(),r();var MM=[Zc.aC,ns.ho,ns.Ky,ns.ib,ns.eb,ns.Wy,ns.Gy,ns.Ly,bo.fa],LM=class extends So{S5(){return(!this.jW.f5||!this.jW.T5)&&this.jW.aR<Wt.EO}k5(){return!this.jW.dR&&!(this.jW.JI||this.jW.MI||this.jW.lt||this.S5())}ir(){const t=this.E5;this.E5=this.k5(),!t&&this.E5&&this._o(new Xr(this.jW.RI))}nr(){this.E5=!1}Km(){this.Ro(),this.jW.vn(MM,this.HK)}constructor(t){super(),this.E5=!1,this.HK=()=>{this.ir()},this.jW=t,this.jW.bn(MM,this.HK)}},oc=class extends LM{k5(){return this.x5&&super.k5()}ir(){this.x5&&(this.hk.paused||this.hk.ended||this.hk.error)&&(this.x5=!1),super.ir()}nr(){super.nr(),this.x5=!1}Km(){this.hk.removeEventListener(Zc.uB,this.hU),super.Km()}constructor(t){super(t),this.x5=!1,this.hU=()=>{this.x5=!0,this.ir()},this.hk=t.SZ,this.hk.addEventListener(Zc.uB,this.hU)}};r();var tu=class extends me{constructor(t){super(bo.fa),this.lt=t}};function BM(t,e){return t.lF<=e&&t.dF>e}function Yi(t,e){return function(t,e){return Jd(t.lF,e.lF,$k)}(t,e)||function(t,e){return Jd(t.dF,e.dF,$k)}(t,e)}function OM(t,e){return function(t,e){return Jd(t.wF,e.wF,$k)}(t,e)||function(t,e){return Jd(t.yF,e.yF,$k)}(t,e)}function FM(t,e,i){let s=function(t,e,i,s,n,r,o){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=t.length);let h=r,a=o-1;for(;h<=a;){const o=h+(a-h>>1),u=s(i(t[o]),e);if(u<0)h=o+1;else if(u>0)a=o-1;else{if(!(n&&o>r&&0===s(i(t[o-1]),e)))return o;a=o-1}}return~h}(t,e,yo,i,!0);if(s<0)return s;for(;s<t.length&&i(e,t[s])===$c.eh;s++)if(t[s].IF(e))return s;return-(s+1)}function VM(t,e,i){const s=FM(t,e,i);return s>=0?s:-(s+1)}function WM(t){const e=t.Ht;if(!e)return-1;if(t instanceof He)return e.I5(t);const i=e.L;if(!i)return-1;const s=FM(i.mC,t,Yi);return s>=0?s:-1}function UM(t,e){const i=function(t,e,i){const s=t.length,n=e.length;let r=0,o=0;const h=[],a=[];for(;r<s&&o<n;){const s=t[r],n=e[o];s===n?(r++,o++):i(n,s)<=0?(h.push(n),o++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;o<n;)h.push(e[o]),o++;return{R5:h,C5:a}}(t,e,Yi);return function(t,e){const i=e.length;for(let s=0;s<i;s++)t[s]=e[s];t.length=i}(t,e),i}r(),r(),r(),r();var _u=class{get mC(){return this.P5}get V(){return this.P5.length}get wa(){if(this.eu){const t=this.P5;this.eu.length=t.length;for(let e=0;e<t.length;e++)this.eu[e]=t[e].wa}else this.eu=this.ka();return this.eu}ka(){return function(t){const e=[];for(let i=0;i<t.V;i++)e[i]=t.Vb(i).wa;return e.item=e=>{const i=0|e,s=t.Vb(i);return s&&s.wa||void 0},w.defineProperty(e,"constructor",{value:qk}),e}(this)}JO(t){const e=this.P5;for(let i=e.length-1;i>=0;i-=1){const s=e[i];if(t.IF(s))return!0}return!1}Vb(t){return this.P5[t]}constructor(t){this.eu=void 0,this.P5=t}};r();var GM=class extends Me{ka(){return new ZM(this.Ht.wa,this.aR)}constructor(t,e){super(gs.aC),this.Ht=t,this.aR=e}},ZM=class extends Mo{constructor(t,e){super("readystatechange"),this.track=t,this.readyState=e}};r();var HM=class extends Me{ka(){return new XM(this.Ht.wa)}constructor(t){super(gs.cC),this.Ht=t}},XM=class extends Mo{constructor(t){super("typechange"),this.track=t}};r();var zM=class extends Me{ka(){return new qM(this.uF.wa)}constructor(t){super(gs.KR),this.uF=t}},qM=class extends Mo{constructor(t){super("addcue"),this.cue=t}};r();var YM=class extends Me{ka(){return new KM(this.uF.wa)}constructor(t){super(gs.QR),this.uF=t}},KM=class extends Mo{constructor(t){super("removecue"),this.cue=t}},Is=class extends So{get q(){return this.D5}get L(){return this.N5}M5(t){return Do(this.N5.mC,(e=>e.o===t))}get XW(){return this.b_}set XW(t){this.b_=t}get XC(){return this.L5}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){return Yh(this)}get o(){return this.jS}get OC(){return this.eF}get ZC(){return this.B5}set ZC(t){this.B5=t}get Lt(){return this.O5}get Ch(){return this.iF}set Ch(t){t!==this.iF&&(this.iF=t,this._o(new te(this)))}get gs(){return this.VA}get FC(){return this.F5}get LE(){return this.Xo}set LE(t){this.V5(t)}V5(t){const e=pu(t);e!==this.LE&&(this.Xo=e,e===Ui.Mh&&(this.W5.forEach((t=>{t.so=!1})),En(this.W5),this.U5=0),this._o(new Pc(this)))}get aR(){return this.g5}set aR(t){this.g5!==t&&(this.g5=t,this._o(new GM(this,this.g5)))}get zC(){return this.G5}set zC(t){this.G5=t}get zw(){return this.Zp}set zw(t){this.Zp!==t&&(this.Zp=t,this._o(new HM(this)))}UW(t){if(!t||t.Ht)return;const e=FM(this.Z5,t,OM);if(e>=0)return;t.Ht=this;const i=-(e+1);this.Z5.splice(i,0,t);const s=VM(this.L.mC,t,Yi);this.H5(t,s),this._o(new zM(t))}H5(t,e){this.P5.splice(e,0,t),this.X5(e),t.PF=e,e<this.U5&&(this.U5=e)}RW(t){if(!t||t.Ht!==this)return;const e=this.I5(t);if(e<0)return;t.so=!1;const i=this.W5,s=FM(i,t,Yi);s>=0&&wa(i,s);const n=FM(this.Z5,t,OM);n>=0&&wa(this.Z5,n),this.z5(t,e),this._o(new YM(t))}z5(t,e){wa(this.P5,e),this.X5(e),t.PF=-1,this.U5>e&&--this.U5}SF(t){if(!t||t.Ht!==this)return;const e=this.I5(t);if(e<0)return;this.z5(t,e);const i=VM(this.L.mC,t,Yi);this.H5(t,i);const s=qr(this.W5,(e=>e===t));if(s>=0){wa(this.W5,s);const e=VM(this.W5,t,Yi);this.W5.splice(e,0,t)}}q5(t,e){const i=this.W5,s=this.P5;let n=this.U5,r=!1,o=1/0;e&&(n=0);for(let e=i.length-1;e>=0;e--){const s=i[e];BM(s,t)?s.dF<o&&(o=s.dF):(r=!0,wa(i,e))}for(;n<s.length&&s[n].lF<=t;){const e=s[n];BM(e,t)&&(fh(i,e)||(r=!0,i.push(e)),e.dF<o&&(o=e.dF)),n++}return n<s.length&&s[n].lF<o&&(o=s[n].lF),r&&Gd(i,Yi),this.U5=n,o}I5(t){return(-1===t.PF||t.PF>=this.Y5)&&this.K5(),t.PF}K5(){const t=this.P5;for(let e=this.Y5;e<t.length;e++)t[e].PF=e;this.Y5=t.length}X5(t){t<this.Y5&&(this.Y5=_.max(t,0))}HC(t){this.XC||(this.LE=t)}yn(){this.Ro();const t=this.P5.slice();for(const e of t)e.yn();En(this.P5),En(this.Z5),En(this.W5)}constructor(t,e,i,s,n,r,o,h,a){super(),this.eF=Lt(),this.b_=!1,this.Xo=Ui.Mh,this.g5=Bu.NONE,this.G5=void 0,this.P5=[],this.Z5=[],this.W5=[],this.Y5=0,this.U5=0,this.jS=e||"",this.B5=h||"",this.O5=t,this.VA=s||"",this.b_=Boolean(n),this.L5=Boolean(o),this.Zp=r||Hr.DEFAULT,this.iF=i||"",this.F5=a||[],this.N5=new _u(this.P5),this.D5=new _u(this.W5)}};r(),r(),r();var jM=class extends zk{ka(){return new QM(this.uF.wa)}constructor(t,e){super(On.IO,t),this.DV=e}},QM=class extends Ri{constructor(t){super("enter",t)}};r();var JM=class extends zk{ka(){return new $M(this.uF.wa)}constructor(t,e){super(On.RO,t),this.DV=e}},$M=class extends Ri{constructor(t){super("exit",t)}};r();var tL=class extends Me{ka(){return new eL(this.uF.wa)}constructor(t){super(gs.eC),this.uF=t}},eL=class extends Mo{constructor(t){super("entercue"),this.cue=t}};r();var iL=class extends Me{ka(){return new sL(this.uF.wa)}constructor(t){super(gs.sC),this.uF=t}},sL=class extends Mo{constructor(t){super("exitcue"),this.cue=t}},Ge=class extends en{get OC(){return this.eF}get lF(){return this.j5.startTime}set lF(t){this.j5.startTime=t}get dF(){return this.j5.endTime}set dF(t){this.j5.endTime=t}get U(){return this.kF}set U(t){this.kF=t}get EF(){return Boolean(this.j5.pauseOnExit)}set EF(t){this.j5.pauseOnExit=Boolean(t)}get Ht(){return this.AF}set Ht(t){this.AF=t}get o(){return this.j5.id||""}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){return ai(this)}get so(){return this.eo}set so(t){this.so!==t&&(this.eo=t,t?(this._o(new jM(this,this.lF)),this.AF&&this.AF._o(new tL(this))):(this._o(new JM(this,this.dF)),this.AF&&this.AF._o(new iL(this))))}IF(t){return this===t||hS(this,t)&&tE(this,t)&&this.RF(t)}RF(t){return Et(this.U,t.U)}yn(){this.Ro(),this.j5.removeEventListener("enter",this.Q5),this.j5.removeEventListener("exit",this.J5)}constructor(t){super(),this.kF=void 0,this.AF=void 0,this.eu=void 0,this.eo=!1,this.Q5=()=>{this.so=!0},this.J5=()=>{this.so=!1},this.eF=Lk(),this.j5=t,this.wF=t.startTime,this.yF=t.endTime,this.j5.addEventListener("enter",this.Q5),this.j5.addEventListener("exit",this.J5)}};r();var nL=class extends Me{ka(){return new rL(this.Ht.wa)}constructor(t){super(gs.rC),this.Ht=t}},rL=class extends Mo{constructor(t){super("cuechange"),this.track=t}};function oL(t){if(!t)return;let e=t.THEOplayerVTTRegion;return e||(e=new hL(t),t.THEOplayerVTTRegion=e),e}r(),r();var hL=class{get t6(){return this.e6}get o(){return this.e6.id||""}get ji(){return Number(this.e6.width)||0}set ji(t){this.e6.width=t||0}get DF(){return Number(this.e6.lines)||0}set DF(t){this.e6.lines=t||0}get NF(){return Number(this.e6.regionAnchorX)||0}set NF(t){this.e6.regionAnchorX=t||0}get MF(){return Number(this.e6.regionAnchorY)||0}set MF(t){this.e6.regionAnchorY=t||0}get BF(){return Number(this.e6.viewportAnchorX)||0}set BF(t){this.e6.viewportAnchorX=t||0}get OF(){return Number(this.e6.viewportAnchorY)||0}set OF(t){this.e6.viewportAnchorY=t||0}get LF(){return this.e6.scroll||""}get wa(){return this.eu||(this.eu=hE(this)),this.eu}constructor(t){this.eu=void 0,this.e6=t}};var aL=class extends Ge{get U(){return this.j5.text}set U(t){this.j5.text=t}get Pt(){return this.j5.vertical||""}set Pt(t){this.j5.vertical=t||""}get pF(){return this.j5.snapToLines}set pF(t){this.j5.snapToLines=t}get _F(){return this.j5.line}set _F(t){this.j5.line=t}get Ob(){return Number(this.j5.size)}set Ob(t){this.j5.size=bi(t,0,100)}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){return Yk(this)}RF(t){return eE(this,t)}constructor(t){super(t)}},uL=class extends aL{get mF(){return oL(this.j5.region)}get vF(){return this.j5.lineAlign||"start"}set vF(t){this.j5.lineAlign=t||"start"}get fo(){return this.j5.position}set fo(t){this.j5.position=t}get gF(){return this.j5.positionAlign||"auto"}set gF(t){this.j5.positionAlign=t||"auto"}get fF(){return this.j5.align||"center"}set fF(t){this.j5.align=t||"center"}constructor(t){super(t)}},cL=class extends aL{get mF(){return oL(this.t6)}get t6(){return function(t,e){if(void 0===e)return;const i=t&&t.regions;return i&&i.getRegionById(e)||void 0}(this.j5.track,this.j5.regionId)}get vF(){return function(t){return"middle"===t?"center":t}(this.j5.lineAlign||"start")}set vF(t){this.j5.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get fo(){return this.j5.position}set fo(t){this.j5.position=function(t,e){return Xk(t,e)}(t,this.fF)}get gF(){return function(t){return Zk[t]}(this.j5.positionAlign||"middle")}set gF(t){this.j5.positionAlign=function(t,e){return Gk[Hk(t,e)]}(t||"center",this.fF)}get fF(){return function(t){return"middle"===t?"center":t}(this.j5.align||"middle")}set fF(t){this.j5.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function lL(t,e){return t.U===e.U}function dL(t,e){if(0===e.length)return;const i=e.length-1;if(e[i].lF<t.lF)return void fL(e,i,t.lF);const s=e[0];if(s.lF>t.lF)return void(t.dF=s.lF);const n=FM(e,t,Yi);if(n>=0)return;const r=-(n+1),o=r-1;if(o>=0){e[o].lF<t.lF&&fL(e,o,t.lF)}if(r<e.length){const i=e[r];t.dF=i.lF}}function fL(t,e,i){const s=t[e].lF;for(let n=e;n>=0&&t[n].lF===s;n--)t[n].dF=i}function _L(t){return ai(t)}r(),r(),r(),r();var vL=class extends Ge{get U(){return this.i6}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){return _L(this)}RF(t){return lL(this,t)}constructor(t,e){super(t),this.i6=e}};function gL(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function mL(t){switch(t){case 0:return ro;case 1:return ep;case 2:return ip;case 3:return Dn}}function pL(t,e){const i=e.nc,s=t.byteLength,n=Lr(t);return e.Pb(s-i),Hc(n,i,s).buffer}function wL(t,e){return{id:t||"",data:e instanceof ArrayBuffer?e:void 0}}function yL(t,e,i){const s=hc(t,e);if(!gL(s))return;const n=mL(s);return{id:i,language:il(t,e,3),description:n(t,e),text:n(t,e)}}function bL(t,e,i){const s=hc(t,e);if(!gL(s))return;const n=mL(s);return{id:i,mimeType:ro(t,e),fileName:n(t,e),description:n(t,e),data:pL(t,e)}}function AL(t,e,i){const s=hc(t,e);if(!gL(s))return;const n=mL(s),r=[];for(;e.nc<t.byteLength;)r.push({involvement:n(t,e),involvee:n(t,e)});return{id:i,entries:r}}function SL(t,e,i){const s=hc(t,e);if(!gL(s))return;const n=mL(s),r=il(t,e,3),o=hc(t,e),h=hc(t,e),a=n(t,e);let u=!1;const c=[];for(;e.nc<t.byteLength;){let i;if(1===s){let s=tp(t,e);void 0===s?s=u:u=s,i=ip(t,e,s)}else i=n(t,e);if(!i||e.nc+4>t.byteLength)break;c.push({text:i,timestamp:$e(t,e)})}return{id:i,language:r,format:o,contentType:h,description:a,entries:c}}function TL(t,e,i){return{id:i,ownerIdentifier:ro(t,e),identifier:pL(t,e)}}function kL(t,e,i){const s=hc(t,e);if(!gL(s))return;const n=mL(s);return{id:i,language:il(t,e,3),description:n(t,e),text:n(t,e)}}function EL(t,e,i){const s=hc(t,e);if(!gL(s))return;return{id:i,text:mL(s)(t,e)}}function xL(t,e,i){return{id:i,url:ro(t,e)}}function IL(t,e,i){const s=hc(t,e);if(!gL(s))return;const n=mL(s);return{id:i,description:n(t,e),text:n(t,e)}}function RL(t,e,i){const s=hc(t,e);if(!gL(s))return;return{id:i,description:mL(s)(t,e),url:ro(t,e)}}function CL(t,e,i){switch(i){case"COM":return yL(t,e,i);case"GEO":return bL(t,e,i);case"IPL":return AL(t,e,i);case"PIC":return function(t,e,i){const s=hc(t,e);if(!gL(s))return;const n=mL(s),r=il(t,e,3),o=hc(t,e),h=n(t,e);let a,u;return"--\x3e"===r?(a=r,u=ro(t,e)):(a="image/"+r.toLowerCase(),u=pL(t,e)),{id:i,mimeType:a,pictureType:o,description:h,data:u}}(t,e,i);case"SLT":return SL(t,e,i);case"TXX":return IL(t,e,i);case"UFI":return TL(t,e,i);case"ULT":return kL(t,e,i);case"WXX":return RL(t,e,i);default:if("T"===i.charAt(0))return EL(t,e,i);if("W"===i.charAt(0))return xL(t,e,i)}}function PL(t,e,i){switch(i){case"APIC":return function(t,e,i){const s=hc(t,e);if(!gL(s))return;const n=mL(s),r=ro(t,e),o=hc(t,e),h=n(t,e);let a;return a="--\x3e"===r?ro(t,e):pL(t,e),{id:i,mimeType:r,pictureType:o,description:h,data:a}}(t,e,i);case"COMM":return yL(t,e,i);case"COMR":return function(t,e,i){const s=hc(t,e);if(!gL(s))return;const n=mL(s),r=ro(t,e),o=il(t,e,8),h=ro(t,e),a=hc(t,e),u=n(t,e),c=n(t,e);let l,d;return e.nc<t.byteLength&&(l=ro(t,e)||"image/",d=pL(t,e)),{id:i,price:r,validUntil:o,contactURL:h,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:l,sellerLogo:d}}(t,e,i);case"GEOB":return bL(t,e,i);case"IPLS":return AL(t,e,i);case"PRIV":return function(t,e,i){return{id:i,ownerIdentifier:ro(t,e),data:pL(t,e)}}(t,e,i);case"POSS":return function(t,e,i){return{id:i,format:hc(t,e),position:$e(t,e)}}(t,e,i);case"SYLT":return SL(t,e,i);case"TXXX":return IL(t,e,i);case"UFID":return TL(t,e,i);case"USER":return function(t,e,i){const s=hc(t,e);if(!gL(s))return;const n=mL(s);return{id:i,language:il(t,e,3),text:n(t,e)}}(t,e,i);case"USLT":return kL(t,e,i);case"WXXX":return RL(t,e,i);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return EL(t,e,i);default:{const s=i.charAt(0);if("T"===s)return EL(t,e,i);if("W"===s)return xL(t,e,i)}}}r(),r();var DL=10;function NL(t,e){return(127&hc(t,e))<<21|(127&hc(t,e))<<14|(127&hc(t,e))<<7|127&hc(t,e)}function ML(t,e){switch(t){case 4:return{s6:Um(e,0),n6:Um(e,1),r6:Um(e,2),o6:Um(e,3)};case 3:return{s6:Um(e,0),n6:Um(e,1),r6:Um(e,2)};case 2:return{s6:Um(e,0),h6:Um(e,1)}}}function LL(t,e,i){switch(i.aN){case 3:i.uN.n6&&function(t,e){const i=e.nc,s=$e(t,e)+4,n=32768&dn(t,e);e.Db(i+s),n&&$e(t,e)}(t,e);break;case 4:i.uN.n6&&function(t,e){const i=e.nc,s=NL(t,e);e.Db(i+s)}(t,e)}}function BL(t,e){if(t.byteLength-e.nc<DL)return null;if(73!==hc(t,e)||68!==hc(t,e)||51!==hc(t,e))return null;const i=hc(t,e),s=hc(t,e);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(i))return null;const n=hc(t,e),r=NL(t,e);return{aN:i,a6:s,uN:ML(i,n),u6:r}}function OL(t,e,i){switch(i){case 2:return function(t,e){if(e.nc+6>t.byteLength)return;return{o:il(t,e,3),Ob:Xm(t,e,3)}}(t,e);case 3:return function(t,e){if(e.nc+10>t.byteLength)return;const i=il(t,e,4),s=$e(t,e);hc(t,e);const n=hc(t,e);return{o:i,Ob:s,uN:{h6:Um(n,0),c6:Um(n,1),groupingIdentity:Um(n,2)}}}(t,e);case 4:return function(t,e){if(e.nc+10>t.byteLength)return;const i=il(t,e,4),s=NL(t,e);hc(t,e);const n=hc(t,e);return{o:i,Ob:s,uN:{groupingIdentity:Um(n,1),h6:Um(n,4),c6:Um(n,5),s6:Um(n,6),l6:Um(n,7)}}}(t,e)}}function FL(t){const e=Lr(t),i=new j(e.byteLength);let s=0;for(let t=0;t<e.byteLength;t++){const n=e[t];255===n&&t++,i[s]=n,s++}return sa(Hc(i,0,s))}function VL(t,e){const i=e||new er,s=BL(t,i);if(!s)return null;const n=function(t,e,i){const s=[],n=e.nc;let r=La(t,n,n+i.u6);const o=new er;switch(e.Pb(i.u6),i.aN){case 2:case 3:i.uN.s6&&(r=FL(r))}LL(t,e,i);for(;o.nc<r.byteLength;){const t=WL(r,o,i);if(void 0===t)break;s.push(t)}return s}(t,i,s);return{sN:s,d6:n}}function WL(t,e,i){const s=OL(t,e,i.aN);if(void 0===s)return;if(0===s.o.charCodeAt(0)||0===s.Ob)return;const n=e.nc;let r,o,h=La(t,n,n+s.Ob);switch(e.Pb(s.Ob),i.aN){case 2:{const t=s;o=h,r=CL(o,new er,t.o);break}case 3:{const t=s,e=new er;!function(t,e,i){const s=i.uN;let n,r,o;s.h6&&(n=$e(t,e)),s.c6&&(r=hc(t,e)),s.groupingIdentity&&(o=hc(t,e))}(h,e,t);o=La(h,e.nc,h.byteLength),r=PL(o,new er,t.o);break}case 4:{const t=s,e=new er;t.uN.s6&&(h=FL(h)),function(t,e,i){const s=i.uN;let n,r,o,h;s.groupingIdentity&&(n=hc(t,e)),s.h6&&(r=$e(t,e)),s.c6&&(o=hc(t,e)),s.l6&&(h=NL(t,e))}(h,e,t);o=La(h,e.nc,h.byteLength),r=PL(o,new er,t.o);break}}if(!r){const t=cc(Lr(o));r=wL(s.o,t.buffer)}return r}r();function UL(t){return ol(t)&&"org.id3"===t.type&&ol(t.value)}function GL(t){return function(t,e,i){return EL(t,e,i)}(new DataView(t.data),new er,t.key)}function ZL(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return GL(t);default:const e=t.key.charAt(0);if("T"===e)return function(t){return{id:t.key,text:t.data}}(t);if("W"===e)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return wL(t.key,t.data)}(t)}r(),r();var HL=class extends So{get q(){return this.D5}get XW(){return this.f6?this.f6.default:void 0}get L(){return this.N5}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){return Yh(this)}get o(){return this.tF.id||this.f6&&this.f6.id||""}get OC(){return this.eF}get ZC(){return this.tF.inBandMetadataTrackDispatchType||""}get Lt(){return this.tF.kind||Hi.TW}get Ch(){return this.iF}set Ch(t){t!==this.iF&&(this.iF=t,void 0!==this.f6&&(this.f6.label=t),this._o(new te(this)))}get gs(){return this.tF.language||""}get LE(){return this.Xo}set LE(t){const e=this.LE;this.Xo=pu(t),this._6();const i=this.LE;e!==i&&this._o(new Pc(this)),i!==Ui.Mh&&this.v6(Bu.LOADING)}get g6(){return pu(this.tF.mode)}set g6(t){this.tF.mode=t}get sF(){return this.tF}get aR(){return this.g5}get m6(){return this.f6?Number(this.f6.readyState)||Bu.NONE:Bu.LOADED}get zC(){return this.G5}get zw(){return this.Zp}set zw(t){this.Zp!==t&&(this.Zp=t,this._o(new HM(this)))}get p6(){return this.w6}set p6(t){this.w6=t,t&&(this.y6=!0,u((()=>{this.y6=!1}),50)),this._6()}UW(t){t.Ht!==this&&(t.Ht=this,this.tF.addCue(t.j5),this.b6())}RW(t){t.Ht===this&&(t.Ht=void 0,this.tF.removeCue(t.j5),this.b6())}M5(t){var e;const i=null==(e=this.tF.cues)?void 0:e.getCueById(t);if(!i)return;const s=XL(i);return s&&Fu(s)?s[0]:s}PW(t){this.A6>=t||(this.A6=t,go(this,t))}_6(){const t=this.LE;this.p6||t!==Ui.Qn?this.g6=t:this.g6=Ui.GC}S6(){const t=this.LE,e=this.g6;t!==e&&(this.p6||t!==Ui.Qn||e!==Ui.GC)&&("metadata"===this.Lt&&e===Ui.Mh?this.LE=t:this.y6&&e===Ui.Mh&&t===Ui.Qn?this.g6=t:this.LE=e)}p5(t){this.g5!==t&&(this.g5=t,this._o(new GM(this,t)))}v6(t){const e=_.max(this.g5,this.m6,t);this.p5(e)}T6(t){let e=XL(t);if(e)return e;if(e=this.k6(t),Fu(e))for(const t of e)t.Ht=this;else e.Ht=this;return e}k6(t){const e=this.E6(t);return t.THEOplayerTextTrackCue=e,e}E6(t){return t.endTime<this.A6?[]:UL(t)?(this.zw=Hr.ID3,function(t){let e;try{e=ZL(t.value)}catch(t){e=wL("")}return new vL(t,e)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.zw=Hr.ID3,function(t){const e=[];try{const i=VL(new DataView(t.data));if(i)for(const s of i.d6)e.push(new vL(t,s))}catch(t){}return e}(t)):function(t){return"text"in t}(t)?(this.zw=Hr.WEBVTT,function(t){return"regionId"in t}(t)?new cL(t):new uL(t)):new Ge(t)}x6(t){const e=[];if(!t)return e;const i=t.length;for(let n=0;n<i;n++){var s;const i=this.T6(null!=(s=t[n])?s:t.item(n));if(Fu(i))for(const t of i)e.push(t);else e.push(i)}return e}I6(){const t=this.x6(this.tF.cues),e=UM(this.P5,t);for(const t of e.C5)t.vn(On.RO,this.b6),t.vn(On.IO,this.b6),this._o(new YM(t));for(const t of e.R5)t.bn(On.IO,this.b6),t.bn(On.RO,this.b6),this._o(new zM(t))}q5(){const t=this.x6(this.tF.activeCues),e=UM(this.W5,t);for(const t of e.C5)t.so=!1;for(const t of e.R5)t.so=!0;(e.R5.length||e.C5.length)&&this._o(new nL(this))}HC(t){this.LE=t}yn(){this.Ro();const t=this.P5.slice();for(const e of t)e.yn();En(this.P5),En(this.W5),this.tF.removeEventListener("cuechange",this.R6),this.tF.removeEventListener("cuechange",this.b6),this.f6&&(this.f6.removeEventListener("load",this.C6),this.f6.removeEventListener("error",this.P6),We(this.f6))}constructor(t,e,i=!0){super(),this.P5=[],this.W5=[],this.Xo=Ui.Mh,this.g5=Bu.NONE,this.G5=void 0,this.Zp=Hr.DEFAULT,this.y6=!1,this.A6=0,this.R6=()=>{this._6(),this.tF.removeEventListener("cuechange",this.R6)},this.b6=()=>{this.LE!==Ui.Mh&&(this.I6(),this.q5(),this.P5.length&&this.v6(Bu.LOADING))},this.C6=()=>{this.v6(Bu.LOADED)},this.P6=()=>{this.v6(Bu.ERROR)},this.tF=t,this.w6=i,this.tF.addEventListener("cuechange",this.R6),this.tF.addEventListener("cuechange",this.b6),this.f6=e,this.f6&&(this.G5=Ks(this.f6.src),this.f6.addEventListener("load",this.C6),this.f6.addEventListener("error",this.P6)),this.eF=Lt(),this.iF=t.label||"",this.N5=new _u(this.P5),this.D5=new _u(this.W5),this.LE=this.g6,mi((()=>{this.b6(),this.v6(Bu.NONE)}))}};function XL(t){return null==t?void 0:t.THEOplayerTextTrackCue}r(),r();function zL(t,e){return Va(t.DV,e.DV)||function(t,e){return t.Ht===e.Ht?Qd(WM(t),WM(e)):Wx(t.Ht,e.Ht)}(t.uF,e.uF)||function(t,e){return t===e?$c.eh:t===On.IO?$c.Hm:$c.Zm}(t.type,e.type)}var qL=class{nr(){En(this.D6);for(const t of this.Hl.slice())this.it(t);this.N6(),this.M6=0,this.Pn=0,En(this.L6),this.B6=!1,this.O6=!1,this.F6=0}tt(t){fh(this.Hl,t)||(this.Hl.push(t),t.bn(gs.da,this.V6),t.LE!==Ui.Mh&&this.W6())}it(t){_e(this.Hl,t)&&(t.vn(gs.da,this.V6),t.LE!==Ui.Mh&&this.W6())}W6(){const t=this.L6,e=this.Hl.filter((t=>t.LE!==Ui.Mh));this.L6=e;for(const i of t)fh(e,i)||this.U6(i);for(const i of e)fh(t,i)||this.G6(i);this.F6=0}G6(t){if(t.bn(gs.KR,this.Z6),t.bn(gs.QR,this.H6),t.bn(gs.$R,this.X6),t.L.V>0){for(const e of t.L.mC)this.z6.push(e);this.q6()}}U6(t){if(t.vn(gs.KR,this.Z6),t.vn(gs.QR,this.H6),t.vn(gs.$R,this.X6),t.L.V>0){for(const e of t.L.mC)_e(this.D6,e),_e(this.z6,e);this.q6()}}Y6(){this.na.dR||this.na.JI?this.N6():this.q6()}q6(){this.B6&&0!==this.L6.length&&(this.F6-this.na.RI>.25*this.na.tR||this.M6||(this.M6=this.j6.K6(this.Q6)))}N6(){this.M6&&(this.j6.J6(this.M6),this.M6=0)}t9(t){0!==this.F6&&(t.so!==BM(t,this.na.RI)?this.F6=0:this.Pn<t.lF&&t.lF<this.F6?this.F6=t.lF:this.Pn<t.dF&&t.dF<this.F6&&(this.F6=t.dF))}e9(){if(!this.B6)return;if(0===this.L6.length)return;if(this.na.dR)return;const t=this.L6,e=this.Pn,i=this.na.RI,s=i-e<-.1;let n=this.O6||s;n&&i>e&&i-e<.1&&(n=!1),this.O6=!1;const r=[];let o=1/0;for(const e of t){const t=e.q5(i,n);t<o&&(o=t);for(const t of e.q.mC)r.push(t)}const h=this.D6.slice();if(n);else for(const s of t)Vx(s,e-U,i,h);for(let t=h.length-1;t>=0;t--)fh(r,h[t])&&wa(h,t);const a=[];if(!n)for(let t=h.length-1;t>=0;t--){const s=h[t];s.lF>e&&s.dF<=i&&(a.push(s),wa(h,t))}for(const t of this.z6)t.lF!==t.dF&&_e(a,t);En(this.z6);const u=[],c=[];for(const t of a)t.so||u.push(new jM(t,t.lF)),u.push(new JM(t,_.max(t.lF,t.dF))),t.so=!1;for(const t of h)t.so&&(u.push(new JM(t,_.max(t.lF,t.dF))),t.so=!1);for(const t of r)t.so||(u.push(new jM(t,t.lF)),t.so=!0);u.sort(zL);for(const t of u){const e=t.uF;e._o(t);const i=e.Ht;i&&(t.type===On.IO?i._o(new tL(e)):i._o(new iL(e)),fh(c,i)||c.push(i))}c.sort(Wx);for(const t of c)t._o(new nL(t));this.Pn=i,this.D6=r,this.F6=o}yn(){this.nr(),this.na.vn(ns._b,this.i9),this.na.vn(ns.ho,this.s9),this.na.vn(Zc.uB,this.i9),this.na.vn(ns.Ky,this.i9),this.na.vn(ns.ib,this.n9),this.na.vn(ns.eb,this.i9)}constructor(t,e){this.Hl=[],this.M6=0,this.Pn=0,this.D6=[],this.z6=[],this.L6=[],this.B6=!1,this.O6=!1,this.F6=0,this.Q6=()=>{this.M6=0,this.e9(),this.Y6()},this.i9=()=>{this.e9(),this.Y6()},this.s9=()=>{this.B6=!0,this.i9()},this.n9=()=>{this.O6=!0,this.F6=0,this.N6()},this.V6=()=>{this.W6(),this.e9(),this.Y6()},this.Z6=t=>{const e=t.uF;fh(this.z6,e)||this.z6.push(e),this.t9(e),this.q6()},this.H6=t=>{const e=t.uF;_e(this.D6,e),_e(this.z6,e),this.t9(e),this.q6()},this.X6=t=>{this.t9(t.uF),this.q6()},this.j6=e,this.na=t,t.bn(ns._b,this.i9),t.bn(ns.ho,this.s9),t.bn(Zc.uB,this.i9),t.bn(ns.Ky,this.i9),t.bn(ns.ib,this.n9),t.bn(ns.eb,this.i9),this.q6()}};r();var xr=class{K6(t){return tt(t)}J6(t){cs(t)}},YL=new xr,KL=class extends qL{constructor(t,e=YL){super(t,e)}};r(),r();var jL=class extends He{get wa(){return this.eu||(this.eu=_L(this)),this.eu}RF(t){return lL(this,t)}constructor(t,e,i){super(t,1/0,e,!1,i)}};r(),r();var QL=class extends Is{constructor(t,e,i=Hr.DEFAULT){super(Hi.xW,"",e||"","",!1,i,!1,t)}},JL=class extends QL{UW(t){dL(t,this.P5),super.UW(t)}ka(){return Yh(this)}constructor(t,e){super(t,e),this.zw=Hr.ID3}},$L=class extends JL{get o(){return this.tF.id||""}get ZC(){return this.tF.inBandMetadataTrackDispatchType||""}get gs(){return this.tF.language||""}V5(t){super.V5(t),this.g6=this.LE}get g6(){return pu(this.tF.mode)}set g6(t){this.tF.mode=t}get sF(){return this.tF}UW(t){super.UW(t),t.j5.track!==this.tF&&this.tF.addCue(t.j5)}RW(t){super.RW(t),t.j5.track===this.tF&&this.tF.removeCue(t.j5)}PW(t){this.A6>=t||(this.A6=t,go(this,t))}v6(t){this.aR=_.max(this.aR,t)}I6(){const t=this.tF.cues;if(!t)return;const e=t.length,i=[],s=[];for(let o=0;o<e;o++){var n;const e=null!=(n=t[o])?n:t.item(o);if(UL(e)&&e.endTime>=this.A6){var r;const t=null!=(r=null==e?void 0:e.THEOplayerTextTrackCue)?r:new tB(e);i.push(t)}else s.push(e)}Gd(i,Yi);const o=UM(this.L.mC.slice(),i);for(const t of s)this.tF.removeCue(t);for(const t of o.C5)t.yn(),this.RW(t);for(const t of o.R5)this.UW(t)}yn(){this.tF.removeEventListener("cuechange",this.b6),super.yn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.A6=0,this.b6=()=>{this.LE!==Ui.Mh&&(this.I6(),this.v6(Bu.LOADED))},this.tF=t,this.tF.addEventListener("cuechange",this.b6),this.LE=this.g6,mi((()=>{this.b6()}))}},tB=class extends jL{yn(){super.yn(),this.j5.THEOplayerTextTrackCue=void 0}constructor(t){super(t.startTime,ZL(t.value),t.id),this.j5=t,this.j5.THEOplayerTextTrackCue=this}};function eB(t){return"TXXX"===t.id||"TXX"===t.id}r(),r();var iB=class extends Zx{r9(){this.o9.bn(je.XR,this._Z),this.o9.bn(je.qR,this.vZ)}h9(){this.o9.vn(je.XR,this._Z),this.o9.vn(je.qR,this.vZ)}a9(t){const e=t.L.mC[0];if(!sB(e))return;const i=function(t){const e=t.match(nB);if(!e)return;return{Ht:e[1],gs:e[2]}}(e.U.description),s=i.Ht,n=i.gs;if(this.u9(s,n))return;const r=this.FW.ZR(Hi.TW,t.o,s,n,!1,Hr.TTML);this.tt(r),this.c9.set(t.OC,r);for(const e of t.L.mC)sB(e)&&this.l9(e);t.bn(gs.KR,this.d9)}u9(t,e){return this.Z.mC.some((i=>i.Ch===t&&i.gs===e))}l9(t){if(!t.Ht)return;const e=this.c9.get(t.Ht.OC),i=vx(t.U.text,e,{oW:0,hW:1/0,aW:t.lF});for(const t of i)e.UW(t)}async nr(){for(const t of this.o9.mC)t.vn(gs.KR,this.d9);for(const t of this.Z.mC)this.FW.ZW(t);this.c9.clear(),await super.nr()}async yn(){this.h9(),await super.yn()}constructor(t,e){super(),this.FW=t,this.o9=e,this.c9=Bh(),this._Z=async t=>{const e=t.Ht;if(e.zw||await e.Ay(gs.cC),e.zw===Hr.ID3){for(;0===e.L.V;)await e.Ay(gs.KR);this.a9(e)}},this.vZ=t=>{const e=t.Ht;if(e.zw!==Hr.ID3||!this.c9.has(e.OC))return;const i=this.c9.get(e.OC);this.it(i),this.FW.ZW(i),e.vn(gs.KR,this.d9)},this.d9=t=>{sB(t.uF)&&this.l9(t.uF)},this.r9()}};function sB(t){return function(t){return eB(t)&&nB.test(t.description)}(t.U)}var nB=/^Track:(.+),Lang:(.+)$/;r(),r();var eu=[ns.Ry,ns.Iy,ns.gb,ns.pb,ns.LICENSE_REQUEST_GENERATED];r();var rB=class extends me{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(t){super(ns.Iy),this.errorObject=t}};r(),r(),r();var oB=class extends me{constructor(t){super(ns.Ry),this.f9=t}};r();var hB=class extends me{constructor(t){super("mb"),this.f9=t}},aB=new dc,uB=class extends me{constructor(t){super("Ws"),this.session=t}},cB=class extends So{get _9(){return this.v9}nT(){return this.g9=!0,aB.Qo((t=>this.m9(t)),this.zT.ep)}async m9(t){try{Io(t),await this.p9.wU(t);const e=await this.p9.yU(this.w9.Yw,this.w9.Sb,t);await this.y9.nT(this.w9.Yw,this.w9.Sb,e)}catch(t){ih(t);const e=t instanceof $n?t.qb:void 0,i=new kh(Ci.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,e);throw this.Ss(i),i}}async EU(t,e){let i;try{i=function(t){return gp(t,Ap())}(t)?await this.p9.LU(new j(t),this.zT.ep):await this.p9.BU(new j(t),e,this.zT.ep)}catch(t){if(Se(t))return;throw t}if(this.zT.ep.zm)return;const s=this.b9,n=new is;this.b9=n;try{await this.y9.ir(i),await Ze(100)}catch(t){const e=t instanceof $n?t.qb:void 0;throw new kh(Ci.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,e)}finally{void 0!==s&&await s.Xb,n.Zb(),this.b9===n&&(this.b9=void 0)}}Ss(t){const e=t instanceof kh?t:new kh(Ci.CONTENT_PROTECTION_ERROR,t.message,t);this._o(new rB(e)),this.Ws()}A9(){this.y9.vn("Tb",this.cT),this.y9.vn(ns.pb,this.S9),this.y9.vn("lt",this.T9),this.k9=!1,this.v9=!1,this.zT.np(),this._o(new uB(this))}async Ws(){let t;this.Ro();do{t=this.b9,void 0!==t&&await t.Xb}while(this.b9!==t);this.A9(),await this.y9.Ws().catch(M)}constructor(t,e,i){super(),this.y9=t,this.p9=e,this.w9=i,this.g9=!1,this.k9=!1,this.zT=new Fi,this.v9=!1,this.cT=t=>{if(!this.zT.ep.zm)switch(t.Eb){case"license-request":case"license-renewal":this.EU(t.Tb,t.xb).catch((t=>this.Ss(t)));break;default:this.Ss(new kh(Ci.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.Eb))}},this.S9=t=>{this.y9.Ab.Ub(((t,e)=>{switch(t){case"usable":As.Gm((()=>{this.k9=!0,this._o(new oB(e))}),100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this._o(new hB(e))}})),this.v9=!0,this._o(t)},this.T9=t=>{this.Ss(new kh(Ci.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.bn("Tb",this.cT),t.bn(ns.pb,this.S9),t.bn("lt",this.T9),t.QS.then((()=>this.A9()),(t=>this.Ss(t)))}},lB=class extends So{get _T(){return this.aT}get E9(){return this.x9.every((t=>t._9))}pU(){return this.I9.pU()}R9(t){return this.C9||(this.C9=this.P9(t)),this.C9}async P9(t){Io(t);const e=await this.I9.LU(new j(Ap()),t);if(Io(t),!this.fT)throw new m("Invalid MediaKeys when setting ServerCertificate");await this.fT.vT(e.buffer)}async D9(t){if(!this.fT)throw new m("Invalid MediaKeys when creating KeySession");try{this.N9.push(t);const e=await this.fT.dT("temporary"),i=new cB(e,this.I9,t);return this.x9.push(i),i.bn(eu,this.M9),i.bn("Ws",this.L9),i}finally{_e(this.N9,t)}}B9(t){if(t.O9)return!1;for(const e of this.x9)if(dB(e.w9,t))return!0;for(const e of this.N9)if(dB(e,t))return!0;return!1}async yn(){this.fT=void 0,this.Ro();const t=this.x9.slice();En(this.x9),await Promise.all(t.map((t=>t.Ws()))),this.F9=void 0,this.I9.Km()}constructor(t,e,i){super(),this.x9=[],this.C9=void 0,this.N9=[],this.M9=t=>{if(t.type===ns.pb)return null!=this.F9||(this.F9=new bp),t.Ab.Ub(((t,e)=>{this.F9.Wb(e,t)})),void(this.E9&&this._o(new Sn(this.F9)));this.Ds(t)},this.L9=t=>{t.session.vn(eu,this.Ds),t.session.vn("Ws",this.L9),_e(this.x9,t.session),this.F9=void 0},this.aT=t,this.fT=e,this.I9=i}};function dB(t,e){if(t.O9)return!1;if(t.Yw!==e.Yw)return!1;if(gp(t.Sb,e.Sb))return!0;if("sinf"===t.Yw&&"sinf"===e.Yw){const e=fB(t),i=fB(t);if(e&&i)return gp(e,i)}return!1}function fB(t){try{const e=Dn(sa(new j(t.Sb)),new er),i=JSON.parse(e).sinf[0],s=new j(su(i)),n=new mu(sa(s),new er);return Es.XM(n).nL.oL.uL}catch(t){return}}var _B=class extends So{get V9(){var t;return null==(t=this.aT)?void 0:t._T}get zZ(){return this.I9}set zZ(t){this.I9=t}$n(t,e){this.kZ=t,this.XJ(e)}XJ(t){this.FT=t,this.W9(this.zT.ep).catch(vf)}qJ(t){this.U9(t,this.zT.ep).catch(vf)}async U9(t,e){var i,s;Io(e);var n;if(null==(i=this.FT)?void 0:i.CZ)for(const i of null!=(n=null==(s=this.FT)?void 0:s.CZ)?n:[]){var r;const s=Do(t,(t=>t.G9===i._T.jw));if(void 0!==(null==s?void 0:s.Z9)&&!(null==(r=i.sZ)?void 0:r.some((t=>gp(s.Z9,t)))))try{return void await this.H9(i._T.Yw,s.Z9,e)}catch(t){ih(t)}}}async W9(t){if(!As.Ys.bp||!await this.X9(t))return this.FT&&this.FT.z9?await this.q9(t):void 0}async X9(t){var e,i;if(!(null==(e=this.FT)?void 0:e.CZ))return!1;let s=!1;var n;for(const e of null!=(n=null==(i=this.FT)?void 0:i.CZ)?n:[]){if(e.rZ&&0!==e.rZ.length){try{const i={kids:e.rZ.map((t=>t.id))},n=up(JSON.stringify(i)).buffer;await this.H9(Lg,n,t),s=!0}catch(t){ih(t)}if(s)return!0}var r;for(const i of null!=(r=e.sZ)?r:[])try{await this.H9(e._T.Yw,i,t),s=!0}catch(t){ih(t)}if(s)return!0}return!1}Y9(t){return t===Jn||t===Mg||t===Ng||t===Lg}async H9(t,e,i){if(Io(i),!e.byteLength)return;if(!this.FT||!this.FT.CZ.length)throw new kh(Ci.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(!this.Y9(t))return void 0;const s=bT(t,e),n=this.FT.CZ;let r;const o=[];for(const e of n){Io(i);const n=s[e._T.Kw];if(n&&e._T.Yw===t)try{const t=await this.K9(e,i);t.pU()&&await t.R9();const s=this.aO.ZI,r={Yw:e._T.Yw,Sb:n,O9:s};if(o.push(!0),this.j9(t,r)){const e=await t.D9(r);await e.nT(),this._o(new wm(n))}return}catch(t){ih(t),r=t}else e._T.zw===O.Zw&&o.push(!1)}if(0===o.length||o.some(yo))throw await As.fw()?new kh(Ci.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",r):new kh(Ci.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",r)}async q9(t){var e;const i=null==(e=this.FT)?void 0:e.CZ;if(i)for(const e of i){Io(t);try{const i=await this.K9(e,t);return void(i.pU()&&await i.R9())}catch(t){ih(t)}}}j9(t,e){return As.Ys.yp||this.aO.vO._O||!t.B9(e)}K9(t,e){return this.Yo.Qo((e=>this.Q9(t,e)),e)}async Q9(t,e){if(Io(e),!this.FT||!this.I9||!this.kZ)throw new m("Not initialized");if(this.aT){if(this.aT._T!==t._T)throw new m("Internal key system error");return this.aT}const i=this.I9,s=ne({},t,{eH:t.eH.map((e=>{var s;return ne({},e,{persistentState:null!=(s=e.persistentState)?s:i.VU(t._T),ST:e.ST||i.ST(t._T)})}))}),n=await this.kZ.UJ(s._T,s.eH),r=i.iZ(s),o=new lB(s._T,n,r);return o.bn(eu,this.Ds),this.aT=o,o}Ss(t){if(Se(t))return;const e=t instanceof kh?t:new kh(Ci.CONTENT_PROTECTION_ERROR,t.message,t);this._o(new rB(e))}async nr(){this.kZ=void 0,this.FT=void 0,this.zT.np(),this.zT=new Fi,await this.J9()}async J9(){await this.Yo.np();const t=this.aT;t&&(t.vn(ns.gb,this.Ds),this.aT=void 0,await t.yn())}async Km(){this.Ro(),this.aO.vn(Yn.My,this.t8),await this.nr(),await this.Yo.yn()}constructor(t){super(),this.zT=new Fi,this.Yo=new dc,this.FT=void 0,this.I9=void 0,this.kZ=void 0,this.aT=void 0,this.t8=t=>{this.H9(t.Yw,t.Sb,this.zT.ep).catch((t=>this.Ss(t)))},this.aO=t,this.aO.bn(Yn.My,this.t8)}};r();var vB=class extends me{constructor(t){super(ns.Gy),this.currentTime=t}};r();var gB=class extends So{get aR(){return void 0!==this.e8?this.e8.aR:Wt.TO}p5(){var t;null==(t=this.e8)||t.p5()}nr(){var t;null==(t=this.e8)||t.nr()}Km(){this.Ro(),void 0!==this.e8&&(this.e8.Km(),this.e8=void 0)}i8(t){if(this.e8===t)return;const e=this.aR;void 0!==this.e8&&this.e8.Km(),this.e8=t,void 0!==t&&(t.bn(Zc.aC,this.Ds),t.p5());const i=this.aR;e!==i&&this._o(new oa(this.s8.RI,i))}constructor(t){super(),this.s8=t}};r();var mB=class extends Is{get wa(){var t;return null!=(t=this.eu)?t:this.eu=pB(this)}n8(t,e,i){const s=new iE(t,e,i,!1);return this.UW(s),s}r8(t){this.RW(t)}constructor(t,e,i){super(t,e,"",i,void 0,Hr.WEBVTT)}};function pB(t){return Qr(Yh(t),{get type(){return t.zw},addCue:(e,i,s)=>t.n8(e,i,s).wa,removeCue(e){t.r8(e.cF)}})}r();var wB=class extends HL{get wa(){var t;return null!=(t=this.eu)?t:this.eu=pB(this)}n8(t,e,i){const n=this.k6(new s.VTTCue(t,e,i));return this.JE?this.UW(n):this.o8.push(n),n}r8(t){_e(this.o8,t),this.RW(t)}yn(){var t;super.yn(),null==(t=this.f6)||t.removeEventListener("load",this.h8),En(this.o8)}constructor(t,e){var i;super(t,e),this.JE=!1,this.o8=[],this.h8=()=>{var t;null==(t=this.f6)||t.removeEventListener("load",this.h8),this.JE=!0;for(const t of this.o8)this.UW(t);En(this.o8)},null==(i=this.f6)||i.addEventListener("load",this.h8),this.zw=Hr.WEBVTT}},yB=Ya.Ug||Ya.Zg,bB=Ya.Bm,AB=Ya.$g,SB=Ya.$g&&Ya.su,TB=class extends So{get y5(){return this.a8}get SI(){return this.kZ?this.kZ.SI:ee.WB()}get kI(){const t=this.EZ;if(!t||S(t.getTime()))return;const e=1e3*this.RI;return new Date(t.getTime()+e)}get EZ(){if(this.SZ.getStartDate)return this.FH&&this.u8||(this.u8=this.SZ.getStartDate()),this.u8}get RI(){return this.c8?this.c8.RI:void 0!==this.l8?this.l8:this.hk.currentTime}get Hu(){return this.Ku}get ct(){return this.c8?this.c8.ct:this.kZ?this.kZ.ct:this.hk.duration}get MI(){return this.dR?this.d8():this.c8?this.c8.MI:this.hk.ended||this.f8}d8(){return void 0!==this.l8&&this.ct===this.l8}get lt(){return this.bZ}get SZ(){return this.hk}get JI(){return this._8?this.v8:this.c8?this.c8.JI:this.hk.paused}get sR(){return this.Uo.AB(ee.Cn(this.hk.played))}get Ti(){return this.hk.offsetHeight*As.Ys.pp}get ji(){return this.hk.offsetWidth*As.Ys.pp}get Sa(){return this.ea}get WZ(){return this.ta}get aR(){return this.g8.aR}get cR(){return this.kZ?this.kZ.cR:ee.WB()}get dR(){return this.c8?this.c8.dR:this.FH||this.hk.seeking&&!this._5}get f5(){return this.c8?this.c8.f5:this._5}get T5(){return 0!==this.m8}get qI(){return this.c8?this.c8.qI:this.hk.muted}set qI(t){this.c8?this.c8.qI=t:(this.hk.muted=t,this.p8())}get tR(){return this.c8?this.c8.tR:void 0!==this.w8?this.w8:this.hk.playbackRate}set tR(t){this.c8?this.c8.tR=t:this.JI||this.a8?(this.w8=t,this.y8()):(this.w8=void 0,this.hk.playbackRate=t,this.y8())}y8(){const t=this.tR;this.b8!==t&&(this.b8=t,this._o(new ga(this.RI,t)))}get A8(){return this.LH}get yR(){return this.c8?this.c8.yR:this.hk.volume}set yR(t){this.c8?this.c8.yR=t:(this.hk.volume=t,this.p8())}p8(){const t=this.yR,e=this.qI;this.S8===t&&this.T8===e||(this.S8=t,this.T8=e,this._o(new Ar(this.RI,this.yR)))}zI(){return WD(this.hk)}DR(){this.k8||(this.k8=!0);const t=this.E8();return this.x8(),t}x8(){this._8?this.v8&&(this.v8=!1,this._o(new he(this.RI))):this.I8()}I8(){if(this.c8)this.c8.DR();else{Ya.$g&&!Ya.su&&this.hk.preload===hi.xH&&(this.hk.preload=hi.xW);const t=this.tR,e=this.hk.play();t!==this.SZ.playbackRate&&(this.tR=t),this.f8=!1,ei(e)?e.then(this.C8,this.P8):this.D8.k5()&&this.N8()}}PR(){this._8?this.v8||(this.v8=!0,this._o(new nl(this.RI))):this.M8()}M8(){this.c8?this.c8.PR():(this.hk.pause(),this.D8.ir()),this.L8(new vt)}E8(){const t=new is;return this.B8.push(t),t.Xb}O8(){for(const t of this.B8)t.Zb(void 0);En(this.B8)}L8(t){for(const e of this.B8)e.Hb(t);En(this.B8)}N8(){this._8||this.c8||this.O8()}F8(t){this._8||this.c8||this.L8(t)}Db(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.c8?this.c8.Db(t,e,i):(this.V8.np(),this.V8=new Fi,this.W8=Ts(this.U8(t,e,i,this.W8,this.V8.ep),this.V8).catch(M))}wZ(t){const e=this.EZ;if(!e||S(e.getTime()))return;const i=(t.getTime()-e.getTime())/1e3;this.Db(i)}async U8(t,e,i,s,n){try{if(this.l8=t,this.G8=t,this.Z8=As.Wm(),i&&!this.FH?this._5=!0:(this.FH=!0,this._5=!1),this.f8&&!this.d8()&&(this.f8=!1),this._5?(this._o(new EM(this.RI)),(Ya.Rg||Ya.Ng)&&(t+=.05)):this._o(new Al(t)),await s.catch(M),Io(n),this.kZ&&!this.kZ.c$())return void this.H8();for(this.X8&&this.z8(),this.g8.aR===Wt.TO&&await this.g8.Ay(Zc.aC,n);0===this.hk.seekable.length||SB&&!this.k8;){const t={stack:[],error:void 0,hasError:!1};try{const e=Gi(t,Fi.hp([n]),!1);await Promise.race([MA(this.hk,"timeupdate",e.ep),Ze(100,e.ep)]),Io(n)}catch(e){t.error=e,t.hasError=!0}finally{ce(t)}}let o=mM(this.SI,t,.05),h=this.cR,a=!0,u=!1;for(;;){const t={stack:[],error:void 0,hasError:!1};try{var r;if(h=this.cR,h.V>0&&!h.wr(o)&&(o=h.mB(o),a=!0),e&&!this.hk.fastSeek){const t=this.SI;if(!t.wr(o)){const e=mM(t,o,1);e!==o&&(o=e,a=!0)}}if(AB){const t=this.q8();void 0!==t&&o>t&&(o=t,a=!0)}if(!u){const t=this.Y8();void 0!==t&&o>t&&(u=!0,await this.K8(t,!1,n),await MA(this.hk,"seeked",n),Io(n),a=!0)}if(a){a=!1,await this.K8(o,e,n),Io(n);let t=this.RI;h=this.cR,o=h.mB(o);let i=1;for(;_.abs(o-t)>=U;)h=this.cR,o=EB(o,h,i),await this.K8(o,e,n),Io(n),t=this.RI,i++}if(!(this.hk.seeking||this.g8.aR<Wt.kO))break;const i=Gi(t,Fi.hp([n]),!1);await Promise.race([MA(this.hk,"seeked",i.ep),this.Ay([ns.jy,ns.Dy],i.ep),this.g8.Ay(Zc.aC,i.ep),null==(r=this.kZ)?void 0:r.Ay(wr.LJ,i.ep)].filter(ol)),Io(n)}catch(e){t.error=e,t.hasError=!0}finally{ce(t)}}this.H8()}catch(t){if(Se(t))return;0}}async K8(t,e,i){Io(i);let s=this.cR;if(t=s.mB(t),this.X8){let e=!0;for(;e||this.g8.aR<Wt.EO;){const n={stack:[],error:void 0,hasError:!1};try{if(s=this.cR,s.wr(t)||(t=s.mB(t),e=!0),e){e=!1,this.l8=t,this.j8(this.RI);continue}const r=Gi(n,Fi.hp([i]),!1);await Promise.race([this.Ay(ns.Dy,r.ep),this.g8.Ay(Zc.aC,r.ep)])}catch(t){n.error=t,n.hasError=!0}finally{ce(n)}}Io(i)}const n=MA(this.hk,"seeking",i);e&&this.hk.fastSeek?this.hk.fastSeek(t):this.hk.currentTime=t,this.l8=void 0,this.j8(this.RI),this.hk.seeking&&await n}q8(){if(!this.kZ||!this.kZ.r$)return;const t=this.kZ.o$,e=this.kZ.h$,i=t&&e?t.jn(e):t||e;if(!i||0===i.V)return;const s=i.Sn(i.V-1),n=i.Tn(i.V-1);return _.max(s,n-.001)}Y8(){if(!this.kZ||!this.kZ.r$)return;const t=this.kZ.h$;if(!t||0===t.V)return;const e=t.Sn(t.V-1);let i=t.Tn(t.V-1)-.02;return i-=.001,_.max(e,i)}j8(t){this.G8!==t&&(this.G8=t,this._5?this._o(new EM(t)):this._o(new Al(t)))}H8(){const t=this._5;this.FH=!1,this._5=!1,this.Z8=0,this.G8=NaN,this.X8&&this.Q8(),t?(this._o(new vB(this.RI)),this.J8()):(this._o(new Be(this.RI)),this.t7=!0),this.bQ()}z8(){this._8||(this.v8=this.JI,this._8=!0,this.M8())}Q8(){this._8&&(this._8=!1,this.v8||this.x8())}l$(t){for(const e of t){if(e.zw===De.zW&&dN.l$(e,this.hk))return e;if(e.zw===De.qW&&TM.l$(e))return e}}be(){this.LH=!1,qn(this.hk)&&(this.hk.style.display="none")}ge(){this.LH=!0,qn(this.hk)&&(this.hk.style.display="block")}get nt(){return this.e7}get Wl(){return this.qH}ZR(t,e,i,s,n,r,o,h,a){const u=new Is(t,e,i,s,n,r,o,a,h);return this.Hl.tt(u),this.i7.tt(u),u}UZ(t){const{Lt:e,Ch:i,gs:n}=t;if("function"==typeof this.hk.addTextTrack&&"function"==typeof s.VTTCue){const{track:t,trackElement:s}=this.s7("data:text/vtt,WEBVTT%0A%0A",e,i,n),r=new wB(t,s);return this.n7.tt(r),this.r7.push(r),r}const r=new mB(e,i,n);return this.Hl.tt(r),this.i7.tt(r),r}BZ(){return!0}FZ(t,e,i,s,n){const{track:r,trackElement:o}=this.s7(t,e,i,s,n),h=new HL(r,o);return this.n7.tt(h),this.r7.push(h),h}s7(t,e,i,s,n){const r=h.createElement("track");r.src=Ks(t),r.kind=e,r.label=null!=i?i:"",s&&(r.srclang=s),r.default=Boolean(n),r.id=Ns(),this.hk.appendChild(r);return{track:this.hk.textTracks.getTrackById(r.id),trackElement:r}}ZW(t){this.Hl.it(t),this.i7.it(t)}GZ(){for(const t of this.Hl.mC.slice())t.yn();this.Hl.nr();for(const t of this.r7.slice())this.n7.it(t),t.yn();En(this.r7)}iH(){const t=this.hk.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this.o7),t.addEventListener("removetrack",this.h7),t.addEventListener("change",this.a7))}XZ(){const t=this.hk.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this.o7),t.removeEventListener("removetrack",this.h7),t.removeEventListener("change",this.a7))}u7(t){t.mode=Ui.GC;const e=new $L(t);this.n7.tt(e),this.i7.tt(e)}l7(t,e){const i=()=>{IB(t)&&(t.removeEventListener("cuechange",i),this.n7.tt(new HL(t,e)))};t.addEventListener("cuechange",i),t.mode=Ui.GC}d7(t){const e=this.hk.getElementsByTagName("track");for(let i=0;i<e.length;i++){const s=e[i]||e.item(i);if(s.track===t)return s}}f7(){if(0===this.n7.V)return;const t=this.cR;if(0===t.V)return;const e=t.Sn(0);if(this._7!==e){for(const t of this.n7.mC)t.PW(e);this._7=e}}$n(t){return this.v7.Qo((async e=>{if(Io(e),this.kZ)throw new m("Already loaded a media source");let i;if(t.zw===De.zW)i=new dN(t,this,this.zJ,this.ey),this.X8=!1,this.g8.i8(this.g7());else{if(t.zw!==De.qW)throw new m("Unsupported configuration");{this.X8=yB;const e=this.g7();i=new TM(t,this,e,this.zJ,this.ey,void 0,this.Z4),this.g8.i8(e),bB&&(this.bn(ns._b,this.m7),this.g8.bn(Zc.aC,this.p7))}}return this.kZ=i,await i.nQ(),i}))}g7(){return this.X8?new NM(this):new Xo(this)}w7(){if(this.a8)return;const t=this.tR;this.a8=!0,this.tR=t,this.hk.playbackRate=0,this.g8&&this.g8.p5()}y7(){if(!this.a8)return;const t=this.tR;this.a8=!1,this.tR=t,this.b7()}b7(){this.hk.currentTime=this.hk.currentTime,this.g8&&this.g8.p5()}async nr(){this.FH=!1,this._5=!1,this.t7=!1,As.Um(this.m8),this.m8=0,this.Uo=ee.WB(),this.V8.np(),this.l8=void 0,this.G8=NaN,this.u8=void 0,this.X8=!1,this._8=!1,this.bZ=void 0,this.f8=!1,this.A7=void 0,this._7=0,this.S7=!1,this.k8=!1,this.T7&&(this.k7(),this.T7=!1),this.L8(new vt),this.g8.i8(new Xo(this)),this.D8.nr(),this.n7.nr(),this.y7(),bB&&(cs(this.E7),this.E7=0,this.vn(ns._b,this.m7)),await this.v7.np(),await this.v7.Qo((async()=>{this.kZ&&(await this.kZ.Km(),this.kZ=void 0,Ya.Rg&&Ya.Pg<3&&this.x7())}))}x7(){this.I7();const t=this.hk,e=t.parentElement,i=t.tagName.toLowerCase();this.hk=Sf(i),this.retainMediaElementState(t),Tf(t),null==e||e.replaceChild(this.hk,t),this.k7(),this.g8.i8(this.g7()),this.D8.vn(Zc.uB,this.R7),this.D8.Km(),this.D8=new oc(this),this.D8.bn(Zc.uB,this.R7),this.LH?this.ge():this.be(),this._o(new Ki),this._o(new gk)}retainMediaElementState(t){this.SZ.muted=t.muted,this.SZ.volume=t.volume}async Km(){this.T7=!1,this.I7(),this.XZ(),await this.nr(),await this.v7.yn(),this.D8.Km(),this.g8.Km(),await this.zJ.Km(),this.GZ(),this.Hl.yn(),this.n7.yn(),await this.C7.yn(),this.P7.yn(),this.e7.yn(),this.Ro()}k7(){this.SZ.addEventListener("play",this.D7),this.SZ.addEventListener("pause",this.N7),this.SZ.addEventListener("timeupdate",this.M7),this.SZ.addEventListener("progress",this.L7),this.SZ.addEventListener("loadstart",this.B7),this.SZ.addEventListener("ended",this.O7),this.SZ.addEventListener("ratechange",this.F7),this.SZ.addEventListener("volumechange",this.V7),this.SZ.addEventListener("durationchange",this.W7),this.SZ.addEventListener("resize",this.U7),this.SZ.addEventListener("loadedmetadata",this.U7),this.SZ.addEventListener("error",this.G7),this.SZ.addEventListener("emptied",this.Z7),this.SZ.addEventListener("seeked",this.H7),this.SZ.addEventListener("seeking",this.X7),_o()?(this.hk.addEventListener("encrypted",this.z7),this.hk.addEventListener("waitingforkey",this.q7)):void 0!==s.WebKitMediaKeys&&"function"==typeof s.WebKitMediaKeys.isTypeSupported?this.hk.addEventListener("webkitneedkey",this.Y7):fm()?this.hk.addEventListener("webkitneedkey",this.K7):void 0!==s.MSMediaKeys&&"function"==typeof s.MSMediaKeys.isTypeSupported&&this.hk.addEventListener("msneedkey",this.j7)}I7(){this.SZ.removeEventListener("play",this.D7),this.SZ.removeEventListener("pause",this.N7),this.SZ.removeEventListener("timeupdate",this.M7),this.SZ.removeEventListener("progress",this.L7),this.SZ.removeEventListener("loadstart",this.B7),this.SZ.removeEventListener("ended",this.O7),this.SZ.removeEventListener("ratechange",this.F7),this.SZ.removeEventListener("volumechange",this.V7),this.SZ.removeEventListener("durationchange",this.W7),this.SZ.removeEventListener("resize",this.U7),this.SZ.removeEventListener("loadedmetadata",this.U7),this.SZ.removeEventListener("error",this.G7),this.SZ.removeEventListener("encrypted",this.z7),this.SZ.removeEventListener("waitingforkey",this.q7),this.SZ.removeEventListener("webkitneedkey",this.Y7),this.SZ.removeEventListener("webkitneedkey",this.K7),this.SZ.removeEventListener("msneedkey",this.j7),this.SZ.removeEventListener("emptied",this.Z7),this.SZ.removeEventListener("seeked",this.H7),this.SZ.removeEventListener("seeking",this.X7)}Q7(){this.c8||(this.Uo=this.sR,this.c8=RM(this),this.I7(),this.c8.bn(xM,this.Ds))}J7(){if(!this.c8)return;const t=this.c8;this.c8=void 0,this.g8.p5(),CM(this,t),t.Km(),this.k7()}J8(){const t=this.RI;this._o(new rl(t,void 0)),this.A7=t}bQ(){this.f8||!this.MI||this.dR||(this.f8=!0,this._o(new ss(this.RI)))}uH(t){this.bZ=t,this.L8(this.bZ),this._o(new tu(this.bZ))}get ZI(){return Boolean(this.hk.webkitCurrentPlaybackTargetIsWireless)}get ttt(){return this.ett}get vO(){return ne({},rN)}itt(){this.ett||(Ef(this.hk,As.Ys),this.ett=!0)}stt(t){t.appendChild(this.hk)}H3(){bB&&this.m7(),this.g8.p5()}get zZ(){return this.zJ.zZ}set zZ(t){this.zJ.zZ=t}get ntt(){return this.Z4}set ntt(t){this.Z4=t}get V9(){return this.zJ.V9}FR(){this.zJ.J9().catch(M),this.n7.nr()}get ER(){return this.S7}set ER(t){this.S7=t,this.T7&&!this.S7&&(this.T7=!1,this.k7())}constructor(t,e,i,s){super(),this.bZ=void 0,this.LH=!0,this.kZ=void 0,this.v7=new dc,this.c8=void 0,this.ea=new ot,this.ta=new ya,this.r7=[],this.l8=void 0,this.Z8=0,this.G8=NaN,this.u8=void 0,this.t7=!1,this.A7=void 0,this._7=0,this.FH=!1,this._5=!1,this.ott=Wt.TO,this.m8=0,this.W8=Promise.resolve(),this.V8=new Fi,this.B8=[],this.Uo=ee.WB(),this.w8=void 0,this.b8=1,this.T8=!1,this.S8=1,this.f8=!1,this.S7=!1,this.T7=!1,this.X8=!1,this._8=!1,this.v8=!1,this.a8=!1,this.ett=!1,this.E7=0,this.k8=!1,this.o7=t=>{const e=t.track,i=this.d7(e);if(!xB(this.n7,e)){if(Ya.$g){if(e.kind===Hi.xW)return void this.u7(e);if(e.kind===Hi.kW&&""===e.label&&""===e.language&&!IB(e))return void this.l7(e,i)}this.n7.tt(new HL(e,i))}},this.h7=t=>{const e=xB(this.n7,t.track);e&&this.n7.it(e)},this.a7=()=>{for(let t=0;t<this.n7.V;t++){const e=this.n7.wC(t);e instanceof HL&&e.S6()}},this.m7=()=>{if(void 0===this.kZ||!hN(this.kZ))return;if(this.JI)return;const t=this.kZ,e=t.d4,i=t.f4;if(!e||!i)return;if(t.r$)return void this.y7();if(t.aR===Ue.M3)return;const s=e.SI,n=i.SI;if(0===s.V&&0===n.V)return void this.y7();const r=this.RI;if(r<s.Sn(0)||r<n.Sn(0))return void this.y7();if(s.wr(r)!==n.wr(r)){if(t.u$(r))return;this.w7()}else if(this.y7(),!this.E7&&this.D8.k5()){s.SB(n).IB(r,r+.5)&&(this.E7=tt(this.htt))}},this.htt=()=>{this.E7=0,this.m7()},this.p7=()=>{if(this.dR||this.f5)return;if(this.g8.aR>=Wt.EO)return;if(void 0===this.kZ||!hN(this.kZ))return;const t=this.kZ,e=t.d4,i=t.f4;if(!e||!i)return;const s=this.RI,n=e.SI,r=i.SI;if(!n.wr(s)||!r.wr(s))return;n.SB(r).IB(s-5,s)&&(this.a8?this.y7():this.b7())},this.D7=()=>{this._o(new he(this.RI))},this.N7=()=>{this.F8(new vt),this._o(new nl(this.RI))},this.R7=()=>{this.N8(),this._o(new Xr(this.RI))},this.F7=()=>{this.y8()},this.W7=()=>{this._o(new yn(this.ct))},this.L7=()=>{this._o(new ki(this.RI))},this.B7=()=>{this._o(new ts)},this.H7=()=>{this.FH||this._5||this.t7?this.t7=!1:this._o(new Be(this.RI))},this.X7=()=>{this.j8(this.RI),this.t7=!1},this.M7=()=>{const t=this.RI,e=this.dR,i=this.g8.aR<Wt.EO&&!this.MI,s=void 0!==this.A7,n=s&&this.A7!==t;this.f7(),(e||!s||n&&!i)&&this.J8()},this.O7=()=>{this.bQ()},this.G7=()=>{if(null!==this.hk.error){const e=this.hk.error;var t;this.uH(new iu(null!=(t=e.code)?t:di.DECODE,e.message||"Error decoding media",void 0,e.msExtendedCode))}},this.Z7=()=>{this.S7&&(this.I7(),this.T7=!0)},this.att=t=>{if(As.Um(this.m8),this.m8=0,t.readyState<=Wt.kO)if(this.FH||this._5){const e=As.Wm()-this.Z8;if(e<250)return void(this.m8=As.Gm((()=>this.att(t)),250-e))}else if(void 0!==this.kZ&&this.kZ.u$(this.RI))return void(this.m8=As.Gm((()=>this.att(t)),250));this.ott!==t.readyState&&(this.ott=t.readyState,this._o(t))},this.V7=()=>{this.p8()},this.U7=()=>{this.pR>0&&this.vR>0&&this._o(new W)},this.z7=t=>{this._o(new bm(t.initDataType,t.initData||new ArrayBuffer(0)))},this.q7=()=>{this._o(new Am)},this.j7=t=>{const e=t.initData,i=e?cc(e).buffer:new ArrayBuffer(0);this._o(new bm(Jn,i))},this.Y7=t=>{if(t.initData){const e=function(t){try{const e=sa(t),i=new er,s=$(e,i,$e(e,i,!0));return rp(op(s,!0))}catch(t){return}}(t.initData);if(!e)return;this._o(new bm(Mg,e))}else this._o(new bm(Mg,new ArrayBuffer(0)))},this.K7=t=>{const e=t.initData,i=e?cc(e).buffer:new ArrayBuffer(0);this._o(new bm(Jn,i))},this.C8=()=>{this.N8()},this.P8=t=>{this.F8(t)},this.utt=t=>{this._o(t),t.type===ns.Iy&&this.uH(Zs(t.errorObject))},this.hk=t,this.ey=e,this.Ku=i,this.qH=s,this.g8=new gB(this),this.g8.bn(Zc.aC,this.att),this.g8.i8(new Xo(this)),this.D8=new oc(this),this.D8.bn(Zc.uB,this.R7),this.zJ=new _B(this),this.zJ.bn(eu,this.utt),this.Hl=new ca,this.n7=new ca,this.P7=new uu([this.Hl,this.n7]),this.C7=new iB(this,this.P7),this.e7=new uu([this.P7,this.C7.Z]),this.i7=new KL(this),this.k7(),this.iH()}};var kB=.01;function EB(t,e,i){if(void 0===i&&(i=0),!e.V)return 0;let s=e.mB(t);const n=kB*i;return s===e.Sn(0)?s+=n:s===e.Tn(e.V-1)&&(s-=n),s}function xB(t,e){for(const i of t.mC)if(i.sF===e)return i}function IB(t){return!!t.cues&&t.cues.length>0}r();var RB={mJ:void 0,pJ:void 0,wJ:void 0,yJ:void 0,bJ:void 0,AJ:void 0,SJ:void 0,TJ:void 0,kJ:void 0,EJ:void 0},CB=class extends So{get wa(){return this.eu||(this.eu=$D(this)),this.eu}get mJ(){}get pJ(){}get wJ(){}get yJ(){}get bJ(){}get AJ(){}get ctt(){}get SJ(){}get TJ(){}get kJ(){}get EJ(){}constructor(...t){super(...t),this.eu=void 0}},PB=class extends TB{IR(){}get vR(){return 0}get pR(){return 0}constructor(t,e,i){super(t,e,i,new CB)}};r(),r();var DB=class{get we(){return this.ltt}be(){this.ltt.style.display="none"}ge(){this.ltt.style.display="block"}stt(t){t.appendChild(this.ltt)}yn(){We(this.ltt)}constructor(t=5){const e=s.document.createElement("div");e.className="theoplayer-texttracks",e.style.position="absolute",e.style.display="none",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.width="100%",e.style.height="100%",e.style.lineHeight="1.3em",e.style.zIndex=""+t,this.ltt=e,this.ge()}};function NB(t,e){return ne({},e,aS(function(t){return{mJ:t.mJ,pJ:t.pJ,wJ:t.wJ,yJ:t.yJ,bJ:t.bJ,AJ:t.AJ,SJ:t.SJ,TJ:t.TJ,kJ:t.kJ,EJ:t.EJ}}(t)))}function MB(t){return t.wJ&&nm(t.wJ,"%")?Number(t.wJ.replace("%",""))/100:t.wJ&&nm(t.wJ,"em")?Number(t.wJ.replace("em","")):1}r(),r(),r(),r(),r();var LB=class t{get dtt(){return this.ftt+this.ji}set dtt(t){this.ftt=t-this.ji}get _tt(){return this.gtt+this.Ti}set _tt(t){this.gtt=t-this.Ti}mtt(t){return this.ftt<t.dtt&&this.dtt>t.ftt&&this.gtt<t._tt&&this._tt>t.gtt}JO(t){return this.ftt<=t.ftt&&t.dtt<=this.dtt&&this.gtt<=t.gtt&&t._tt<=this._tt}Nb(){return new t(this.ftt,this.gtt,this.ji,this.Ti)}ptt(e){const i=this.ftt+e,s=this.gtt+e,n=_.max(0,this.ji-2*e),r=_.max(0,this.Ti-2*e);return new t(i,s,n,r)}wtt(e){const i=_.min(this.ftt,e.ftt),s=_.max(this.dtt,e.dtt),n=_.min(this.gtt,e.gtt),r=_.max(this._tt,e._tt);return new t(i,n,s-i,r-n)}constructor(t,e,i,s){this.ftt=t,this.gtt=e,this.ji=i,this.Ti=s}},Xe=class{ytt(t){const e=this.btt(t);if(!e)return!1;for(const t of e)We(t);return this.Att(t),!0}get Ht(){return this.AF}get SZ(){return this.hk}get Hu(){return this.Ku}get Stt(){return this.Ttt}get ktt(){return this.Ett}nQ(){this.xtt(),this.AF.L.mC.forEach((t=>this.UW(t))),this.Hu.bn(ln.mn,this.Itt),this.re(this.Hu.Au,this.Hu.Nu)}Rtt(t){this.Ett=t,this.Ttt=NB(this.Ett,this.Ctt),this.Ttt.mJ&&(this.SZ.style.fontFamily=this.Ttt.mJ),this.re(this.Hu.Au,this.Hu.Nu),this.Ptt(!0)}Dtt(){return this.Ttt}Ntt(t){return this.Mtt.has(t.OC)}xtt(){this.AF.bn(gs.KR,this.Ltt),this.AF.bn(gs.QR,this.Btt),this.AF.bn(gs.da,this.Ott)}Ftt(){this.AF.vn(gs.KR,this.Ltt),this.AF.vn(gs.QR,this.Btt),this.AF.vn(gs.da,this.Ott)}Vtt(t){t.bn(On.IO,this.Wtt),t.bn(On.RO,this.Utt),t.bn(On.dC,this.Gtt)}Ztt(t){t.vn(On.IO,this.Wtt),t.vn(On.RO,this.Utt),t.vn(On.dC,this.Gtt)}UW(t){this.Vtt(t),t.so&&this.Htt(t)}RW(t){this.Ztt(t),this.Xtt(t)}ztt(){this.AF.LE===Ui.Qn?this.qtt():this.Ytt()}qtt(){if(!this.Ktt)return;this.Ktt=!1;const t=this.Hu.Au,e=this.Hu.Nu;this.re(t,e),this.Ptt(!1)}Ytt(){this.Ktt||(this.Ktt=!0,this.Ptt(!0))}Htt(t){this.Ktt||t.so&&!this.Ntt(t)&&this.Ptt(!1)}Xtt(t){this.Ntt(t)&&this.Ptt(!0)}jtt(t){(t.so||this.Ntt(t))&&this.Ptt(!0)}Ptt(t){const e=this.Qtt,i=this.Ktt?[]:this.AF.q.mC.slice();this.Jtt(i,e,t),this.Qtt=i}btt(t){return this.Mtt.get(t.OC)}$tt(t,e){this.Mtt.set(t.OC,e)}Att(t){this.Mtt.delete(t.OC)}tet(t){const e=[],i=this.Ttt;if(void 0!==i.SJ){const s=t.Nb();s.Ti=i.SJ,e.push(s)}if(void 0!==i.TJ){const s=t.Nb();s.Ti=i.TJ,s._tt=t._tt,e.push(s)}return e}eet(){return this.Qtt.slice()}yn(){We(this.SZ),this.Mtt.clear(),this.Ftt(),this.AF.L.mC.forEach((t=>this.Ztt(t))),this.Hu.vn(ln.mn,this.Itt)}constructor(t,e,i,s,n){this.Mtt=Bh(),this.Ktt=!0,this.Ett=ne({},RB),this.Qtt=[],this.Ltt=t=>this.UW(t.uF),this.Btt=t=>this.RW(t.uF),this.Ott=()=>this.ztt(),this.Wtt=t=>this.Htt(t.uF),this.Utt=t=>this.Xtt(t.uF),this.Gtt=t=>this.jtt(t.uF),this.Itt=t=>this.re(t.width,t.height),this.AF=t,this.Ctt=this.Ttt=n,this.hk=this.iet(i),this.Ku=s,e.appendChild(this.hk)}};function BB(t,e,i,s,n){const r=t.Nb();let o=r,h=1,a=!1;const u=C(getComputedStyle(e).lineHeight)/4;if(!S(u)&&u>0){for(let e=0;e<i.length&&!a;e++){for(;!VB(t,s,i[e],.01)&&(!s.JO(t)||OB(t,n));)FB(t,i[e],u);if(s.JO(t)){o=t.Nb(),a=!0;break}const c=WB(t,s);h>c&&(o=t.Nb(),h=c),t=r.Nb()}s.JO(t)||(o=r.Nb())}e.style.left=(o.ftt-s.ftt)/s.ji*100+"%",e.style.top=(o.gtt-s.gtt)/s.Ti*100+"%"}function OB(t,e){return e.some((e=>t.mtt(e)))}function Du(t){return new LB(t.left,t.top,t.width,t.height)}var V=function(t){return t[t.POS_X=0]="POS_X",t[t.NEG_X=1]="NEG_X",t[t.POS_Y=2]="POS_Y",t[t.NEG_Y=3]="NEG_Y",t}({});function FB(t,e,i){switch(e){case 0:t.ftt+=i;break;case 1:t.ftt-=i;break;case 2:t.gtt+=i;break;case 3:t.gtt-=i}}function VB(t,e,i,s){switch(i){case 0:return t.dtt>e.dtt+s;case 1:return t.ftt<e.ftt-s;case 2:return t._tt>e._tt+s;case 3:return t.gtt<e.gtt-s}}function WB(t,e){return _.max(0,_.min(t.dtt,e.dtt)-_.max(t.ftt,e.ftt))*_.max(0,_.min(t._tt,e._tt)-_.max(t.gtt,e.gtt))/(t.ji*t.Ti)}r();var UB=function(t){return t.Yc='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.Kc='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.Zc='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.tl='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif',t}({});function GB(t,e){return t?{net:t.net,ret:t.ret,oet:t.oet,Fl:e}:null}function ZB(t){const e=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return e?{net:x(e[1],16),ret:x(e[2],16),oet:x(e[3],16)}:null}function HB(t){return("0"+t.toString(16)).slice(-2)}function XB(t){return"#"+HB(t.net)+HB(t.ret)+HB(t.oet)}function zB(t){const e=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return e?{net:x(e[1],10),ret:x(e[2],10),oet:x(e[3],10),Fl:C(e[4])}:null}function qB(t,e){return function(t){return t?"rgba("+t.net+", "+t.ret+", "+t.oet+", "+t.Fl+")":void 0}(GB(ZB(t),e/100))}var Si=function(t){return t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent",t}({});function YB(t){return jB[t||"none"]}var KB,jB={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},QB="monospace, sans-serif",JB="Arial, Helvetica, sans-serif",$B='"Times New Roman", Times, serif',tO=Eg({monospace:"monospace",sansSerif:JB,serif:$B,monospaceSansSerif:QB,monospaceSerif:"monospace, serif",proportionalSansSerif:JB,proportionalSerif:$B,default:QB}),eO=16,iO="1.3em",sO=class extends Xe{iet(t){const e=h.createElement("div");e.className="theoplayer-ttml-texttrack-"+t;const i=e.style;return i.position="absolute",Dd(i,"flex"),i.flexDirection=i.webkitFlexDirection="column",i.overflow="hidden",i.pointerEvents="none",i.top="0",i.left="0",i.width="100%",i.height="100%",i.fontSize=eO+"px",i.lineHeight=iO,e}re(t,e){const i=_.min(t/640,e/360),s=eO*i*MB(this.Stt);this.SZ.style.fontSize=s+"px"}Jtt(t,e,i){for(const t of e)!i&&t.so||this.ytt(t);const s=[],n=Du(this.SZ.getBoundingClientRect());s.push(...this.tet(n));for(const e of t){const t=this.het(e,s,n);for(const e of t)s.push(e.ptt(.1))}}het(t,e,i){let s=this.btt(t);s||(s=this.aet(t),this.$tt(t,s));for(const t of s)this.SZ.appendChild(t);const n=[],r=[V.POS_Y,V.NEG_Y,V.POS_X,V.NEG_X];for(const t of s){BB(gO(t),t,r,i,e),n.push(gO(t))}return n}aet(t){const e=[],i=t.vW,s=t.uW,n=t.pW,r=t.U,o=t.fW,a=o?_.min(640/o.width,360/o.height):1,u=this.Stt;if(0===w.keys(s).length){const t=h.createElement("div");_O(t),nO(r,i,n,t,t,a,u),rO(t,"body",u),t.firstChild&&e.push(t)}else for(const t of w.keys(s)){const o=h.createElement("div");o.id=t,_O(o),aO(o,"region",s[t],i,a),nO(r,i,n,o,o,a,u),rO(o,"body",u),o.firstChild&&e.push(o)}return e}Rtt(t){return sN(this.SZ,t),super.Rtt(t)}constructor(t,e,i,s){super(t,e,i,s,RB)}};function nO(t,e,i,s,n,r,o){if(Oh(t)&&function(t){const e=t.Mx.toUpperCase();return"SPAN"===e||"P"===e||"BR"===e||"DIV"===e||"BODY"===e}(t)){const a=oO(t);if(!a||(null==n?void 0:n.id)===a){let a;if("BODY"===t.Mx.toUpperCase())a=n;else{if(a=function(t){let e;switch(t.Mx.toUpperCase()){case"BR":e=h.createElement("br");break;case"SPAN":e=h.createElement("span"),vO(e),hO(e,t);break;case"P":e=h.createElement("p"),function(t){vO(t);const e=t.style;e.textAlign="inherit",e.padding="0",e.margin="0"}(e),hO(e,t);break;case"DIV":e=h.createElement("div"),hO(e,t)}return e}(t),!a)return;s.appendChild(a)}!function(t,e,i,s,n){const r=e.Qx("style");lO(t,e.Mx,r,i,s,n),function(t,e,i,s){for(const n of e.Kx)dO(t,e.Mx,n.Mx,n.Fx,i,s)}(t,e,s,n)}(a,t,e,n,r),function(t,e,i){let s=null==e?void 0:e.Qx("smpte:backgroundImage");if(s){s=s.replace("#","");const n=i&&uO(i,(t=>t.Kx.some((t=>"id"===t.Mx&&t.Fx===s))));n&&cO(t,n,e,!0)}!function(t,e){const i=e.m[0];if(!i||"metadata"!==i.Mx.toLowerCase())return;const s=i.m[0];cO(t,s,e)}(t,e)}(a,t,i),rO(a,t.Mx,o);for(const s of t.Ux)nO(s,e,i,a,n,r,o)}}else if(BA(t)){const e=h.createTextNode(t.$k);if("SPAN"!==s.nodeName.toUpperCase()){const t=h.createElement("span");vO(t),rO(t,"span",o),t.appendChild(e),s.appendChild(t)}else s.appendChild(e)}}function rO(t,e,i){const s=t.style;switch(i.mJ&&(s.fontFamily=i.mJ),i.pJ&&(s.color=i.pJ),e.toLowerCase()){case"span":i.yJ&&(s.background=i.yJ);break;case"p":case"div":i.bJ&&(s.backgroundColor=i.bJ);break;case"body":i.AJ&&(s.textShadow=YB(i.AJ))}}function oO(t){const e=t.Qx("region");if("p"===t.Mx.toLowerCase())return e;const i=[];for(const e of t.m)i.push(oO(e));return xo(i),0===i.length?e:1===i.length?null!=(s=i[0])?s:e:void 0;var s}function hO(t,e){const i=e.Jx(ax,"id");i&&(t.id=i)}function aO(t,e,i,s,n){lO(t,e,i.style,s,t,n);for(const s of w.keys(i))dO(t,e,s,i[s],t,n)}function uO(t,e){if(e(t))return t;for(const i of t.m){const t=uO(i,e);if(t)return t}return null}function cO(t,e,i,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const e=t&&t.Ux.length>0?t.Ux[0]:null;return e&&BA(e)?"data:image/png;base64,"+e.$k:""}(e),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,e){const i=t.style;Dd(i,"flex"),i.flexDirection=i.webkitFlexDirection="column";const s=e.Qx("smpte:backgroundImageVertical");let n="center";if(s)switch(s.toLowerCase()){case"left":n="flex-start";break;case"center":n="center";break;case"right":n="flex-end";break;case"inherit":n="inherit"}i.justifyContent=i.webkitJustifyContent=n;const r=e.Qx("smpte:backgroundImageHorizontal");let o="center";if(r)switch(r.toLowerCase()){case"left":o="flex-start";break;case"center":o="center";break;case"right":o="flex-end";break;case"inherit":o="inherit"}i.alignItems=i.webkitAlignItems=o}(t,i),t.appendChild(n)}function lO(t,e,i,s,n,r){if(i)for(const o of i.split(" "))if(s[o])for(const i of w.keys(s[o]))"style"===i.toLowerCase()?lO(t,e,s[o][i],s,n,r):dO(t,e,i,s[o][i],n,r)}function dO(t,e,i,s,n,r){const o=t.style;switch(i){case"backgroundColor":o.backgroundColor=s;break;case"color":o.color=s;break;case"direction":o.direction=s;break;case"display":"none"===s&&(o.display="none");break;case"fontFamily":var h;o.fontFamily=null!=(h=tO.get(s))?h:s;break;case"fontSize":{let t=s;if(nm(t,"px")){const e=Number(t.slice(0,-2));t=e*r/eO+"em"}else nm(t,"c")&&(t=t.replace("c","em"));o.fontSize=t,o.lineHeight&&"inherit"!==o.lineHeight||(o.lineHeight=iO);break}case"fontStyle":o.fontStyle=s;break;case"fontWeight":o.fontWeight=s;break;case"lineHeight":{let t=s;if(nm(t,"px")){const e=Number(t.slice(0,-2));t=e*r+"px"}o.lineHeight=t;break}case"opacity":o.opacity=s;break;case"overflow":o.overflow=s;break;case"padding":o.padding=s;break;case"textAlign":o.textAlign=s;break;case"textDecoration":switch(s){case"lineThrough":o.textDecoration="line-through";break;case"underline":case"overline":o.textDecoration=s;break;case"noUnderline":case"noLineThrough":case"noOverline":o.textDecoration="none"}break;case"unicodeBidi":switch(s){case"bidiOverride":o.unicodeBidi="bidi-override";break;case"normal":case"embed":case"isolate":o.unicodeBidi=s}break;case"visibility":o.visibility=s;break;case"zIndex":o.zIndex=s;break;case"displayAlign":{let t;switch(s.toLowerCase()){case"before":t="flex-start";break;case"center":t="center";break;case"after":t="flex-end";break;case"justify":t="space-between";break;default:return}o.justifyContent=o.webkitJustifyContent=t;break}case"extent":{const i=fO(e.toLowerCase())?n:t;let r,o;const h=s.split(" ",2);2===h.length?(r=h[0],o=h[1]):r=o="100%",i&&(i.style.height=o,i.style.width=r);break}case"origin":{const i=fO(e.toLowerCase())?n:t,[r,o]=s.split(" ",2);i&&(r||o)&&(r&&(i.style.left=r),o&&(i.style.top=o));break}case"showBackground":case"textOutline":break;case"wrapOption":switch(s){case"wrap":o.whiteSpace="normal";break;case"noWrap":o.whiteSpace="nowrap"}break;case"writingMode":{let t,e,i,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",e="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",i="upright";break;case"tblr":t="vertical-lr",i="upright";break;case"rl":t="horizontal-tb",e="rtl";break;default:return}o.writingMode=t,o.setProperty("-webkit-writing-mode",t),e&&(o.direction=e),i&&(o.textOrientation=i,o.setProperty("-webkit-text-orientation",i)),n&&(o.unicodeBidi=n);break}case"linePadding":if(nm(s,"c")){const t=s.replace("c","em");o.paddingLeft=o.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?o.textAlign="":o.textAlign=s}}function fO(t){return"div"===t||"p"===t||"span"===t}function _O(t){const e=t.style;Dd(e,"flex"),e.flexDirection=e.webkitFlexDirection="column",e.top="auto",e.left="5%",e.width="90%",e.height="100%",e.maxHeight="100%",e.maxWidth="100%",e.overflow="visible",e.position="absolute",e.fontFamily=JB,e.color=Si.WHITE,e.background=Si.TRANSPARENT,e.textShadow=YB("uniform"),e.textAlign="start",e.writingMode="horizontal-tb",e.setProperty("-webkit-writing-mode","horizontal-tb"),e.padding="0",e.margin="0",e.fontSize="inherit",e.lineHeight="inherit"}function vO(t){const e=t.style;e.fontFamily="inherit",e.color="inherit",e.fontSize="inherit",e.lineHeight="inherit",e.textShadow="inherit"}function gO(t){let e=Du(t.getBoundingClientRect());if("visible"===getComputedStyle(t).overflow&&t.scrollHeight>t.clientHeight){const i=t.children;for(let t=0;t<i.length;t++){const s=i[t];e=e.wtt(Du(s.getBoundingClientRect()))}}return e}function mO(t){return KB||(KB=s.document.createElement("textarea")),KB.innerHTML=t,KB.value}function pO(t,e){let i="Data",s="";const n=[];let r=t.charAt(e.nc),o="";const h={zw:"starttag",Xx:"",uet:[]};for(;e.nc<t.length+1;){switch(r=e.nc<t.length?t.charAt(e.nc):"EOF",i){case"Data":switch(r){case"&":const n=t.substring(e.nc).match(/&#?[0-9a-zA-Z]+;/);n?(s+=mO(n[0]),e.Pb(n[0].length-1)):s+="&";break;case"<":if(s)return{zw:"string",U:s};i="Tag";break;case"EOF":return{zw:"string",U:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":i="StartTagAnnotation";break;case".":i="StartTagClass";break;case"/":i="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,i="TimestampTag";break;case">":return e.Pb(1),h;case"EOF":return h;default:s=r,i="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":i="StartTagAnnotation";break;case"\n":o=r,i="StartTagAnnotation";break;case".":i="StartTagClass";break;case">":return e.Pb(1),{zw:"starttag",Xx:s,uet:[]};case"EOF":return{zw:"starttag",Xx:s,uet:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(o),o="",i="StartTagAnnotation";break;case"\n":n.push(o),o=r,i="StartTagAnnotation";break;case".":n.push(o),o="";break;case">":return e.Pb(1),n.push(o),{zw:"starttag",Xx:s,uet:n};case"EOF":return n.push(o),{zw:"starttag",Xx:s,uet:n};default:o+=r}break;case"StartTagAnnotation":switch(r){case"&":i="CharRefInAnnotation";break;case">":e.Pb(1);let t=o.trim();return t=t.replace(/\s/," "),{zw:"starttag",Xx:s,uet:n,cet:t};default:o+=r}break;case"CharRefInAnnotation":let a="";for(let i=e.nc;">"===t.charAt(i);i++)a+=t.charAt(i);o+=a||"&",i="StartTagAnnotation";break;case"EndTag":switch(r){case">":return e.Pb(1),{zw:"endtag",Xx:s};case"EOF":return{zw:"endtag",Xx:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return e.Pb(1),{zw:"timestamp",let:s};case"EOF":return{zw:"timestamp",let:s};default:s+=r}}e.Pb(1)}return h}r(),r();var wO=function(t){return t.det="string",t.fet="starttag",t._et="endtag",t.vet="timestamp",t}({});function yO(t){let e;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};const i=h.documentElement,n=h.body,r=i.clientLeft||n.clientLeft||0,o=s.pageXOffset||n.scrollLeft,a=e.left+o-r,u=i.clientTop||n.clientTop||0,c=s.pageYOffset||n.scrollTop,l=e.top+c-u;return{left:_.round(a),top:_.round(l)}}function bO(t,e,i,s){if(void 0===s&&(s=0),!t||!e)return;t.style.left="0px";const n=t.getClientRects(),r=e.getClientRects();if(0===n.length||0===r.length)return;const o=n[0],h=r[0],a=o.width/2+o.left;AO(t,h.width/2+h.left-a,i,s)}function AO(t,e,i,s){void 0===s&&(s=0),TO(t,e,"left","right",i,s)}function SO(t,e,i,s){void 0===s&&(s=0),TO(t,e,"top","bottom",i,s)}function TO(t,e,i,s,n,r){void 0===r&&(r=0);const o=t.getClientRects();if(n&&o.length>0){const t=o[0];e=bi(e,n[i]+r-t[i],n[s]-r-t[s])}t.style[i]=e+"px"}function Nu(t,e){void 0===t.textContent?t.innerText=e:t.textContent=e}r();var kO={pJ:Si.WHITE,mJ:"sans-serif",wJ:"100%",yJ:"rgba(0,0,0,0.8)",bJ:Si.TRANSPARENT,AJ:"none",SJ:void 0,TJ:void 0,kJ:void 0,EJ:void 0},EO="theoplayer-webvtt-region-",xO="theoplayer-webvtt-styling-",IO="theoplayer-webvtt-default-style",RO=5.23,CO=1.14,PO=class extends Xe{iet(t){const e=h.createElement("div");e.className="theoplayer-webvtt-texttrack-"+t,Ka(e),e.style.overflow="hidden",e.style.pointerEvents="none";const i=this.Stt.mJ;return i&&(e.style.fontFamily=i),e.style.whiteSpace="pre-line",function(){if(h.getElementById(IO))return;const t=[];for(const[e,i]of WO)t.push("."+xO+e+" { color: "+i+" !important; }"),t.push("."+xO+"met"+e+" { background-color: "+i+" !important; }"),t.push("video::cue(."+e+") { color: "+i+"; }"),t.push("pet"+e+") { background-color: "+i+"; }");const e=h.createElement("style");e.id=IO,e.innerHTML=t.join("\n"),h.body.appendChild(e)}(),e}nQ(){this.SZ.appendChild(this.wet),super.nQ()}re(t,e){const i=_.min(t/100,e/100),s=MB(this.Stt);this.yet.forEach((t=>{let{mF:e,bet:n}=t;this.Aet(n,i,s,e)})),this.Aet(this.wet,i,s)}Rtt(t){sN(this.SZ,t),super.Rtt(t)}Jtt(t,e,i){const s=this.SZ,n=this.Hu.Nu/100,r=[];for(const e of t)void 0!==e.mF&&(fh(r,e.mF)||r.push(e.mF));this.yet.forEach(((t,e)=>{let{mF:s,bet:n}=t;!i&&fh(r,s)||(We(n),this.yet.delete(e))}));for(const t of e)!i&&t.so||this.ytt(t);const o=[],h=Du(this.wet.getBoundingClientRect());o.push(...this.tet(h));for(const t of r){let e;this.yet.has(t.o)?e=this.yet.get(t.o).bet:(e=FO(t,n),s.appendChild(e),this.yet.set(t.o,{mF:t,bet:e})),o.push(Du(e.getBoundingClientRect()))}t.sort(UO);for(const e of t){const t=this.het(e,o,h);void 0!==t&&o.push(t.ptt(.1))}}het(t,e,i){var s;let n;t.mF?(n=this.yet.get(t.mF.o).bet,"up"===t.mF.LF&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.wet;let r=null==(s=this.btt(t))?void 0:s[0];if(r||(r=this.Tet(t),this.$tt(t,[r])),n.appendChild(r),t.mF||(DO(r,t),t.pF?function(t,e,i,s){const n=VO(t),r=n?i.Ti:i.ji;let o=C(getComputedStyle(e).lineHeight);if(0===o||S(o))return;const h=Du(e.getBoundingClientRect());let a=_.round(sE(t));"rl"===t.Pt&&(a=-(a+1));let u=o*a;"rl"===t.Pt&&(u=u-h.ji+o);a<0&&(u+=r,o=-o);n?h.gtt+=u:h.ftt+=u;const c=h.Nb();let l=!1;for(;!i.JO(h)||OB(h,s);)if(n)if(o<0&&h.gtt<i.gtt||o>0&&h._tt>i._tt){if(h.gtt=c.gtt,l)break;o=-o,l=!0}else h.gtt+=o;else if(o<0&&h.ftt<i.ftt||o>0&&h.dtt>i.dtt){if(h.ftt=c.ftt,l)break;o=-o,l=!0}else h.ftt+=o;n?e.style.top=(h.gtt-i.gtt)/i.Ti*100+"%":e.style.left=(h.ftt-i.ftt)/i.ji*100+"%"}(t,r,i,e):function(t,e,i,s){const n=Du(e.getBoundingClientRect());if(0===n.ji||0===n.Ti)return;VO(t)?"center"===t.vF?n.gtt-=n.Ti/2:"end"===t.vF&&(n.gtt-=n.Ti):"center"===t.vF?n.ftt-=n.ji/2:"end"===t.vF&&(n.ftt-=n.ji);let r;r=""===t.Pt?[V.POS_Y,V.NEG_Y,V.POS_X,V.NEG_X]:"lr"===t.Pt?[V.POS_X,V.NEG_X,V.POS_Y,V.NEG_Y]:[V.NEG_X,V.POS_X,V.POS_Y,V.NEG_Y];BB(n,e,r,i,s)}(t,r,i,e)),!t.mF)return Du(r.getBoundingClientRect())}Tet(t){const e=new er,i=t.U,s=this.ket(t),n={Eet:void 0,we:s};let r=n,o="",a="";const u=[n],c=[],l=[];for(;e.nc<i.length;){const t=pO(i,e);if(t.zw===wO.det){const e=h.createElement("span");Nu(e,t.U),NO(e,u),""!==o&&(e.lang=o),this.xet(e,a),r.we.appendChild(e)}else if(t.zw===wO.fet){const e=t.Xx.toLowerCase();switch(e){case"i":case"b":case"u":case"ruby":{const i=h.createElement(e);r.we.appendChild(i),r={Eet:t,we:i},u.push(r);break}case"rt":var d;if("ruby"===(null==(d=r.Eet)?void 0:d.Xx.toLowerCase())){const e=h.createElement("rt");r.we.appendChild(e),r={Eet:t,we:e},u.push(r)}break;case"c":case"v":r={Eet:t,we:r.we},u.push(r);break;case"font":{var f;const e=null==(f=t.cet)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);e&&(a=e[1],l.push(a),r={Eet:t,we:r.we},u.push(r));break}case"lang":var _;o=null!=(_=t.cet)?_:"",c.push(o)}}else if(t.zw===wO._et){var v;const e=t.Xx.toLowerCase(),i=null==(v=r.Eet)?void 0:v.Xx.toLowerCase();i===e?(u.pop(),r=u[u.length-1],"font"===e&&(l.pop(),a=l.length>0?l[l.length-1]:"")):"rt"===i&&"ruby"===e?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===e&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.zw===wO.vet){const e=t.let,i=new er;try{UE(e,i)}catch(t){S_("ERROR collecting timestamp",t)}}}return s}xet(t,e){const i=this.Stt,s=this.ktt;i.yJ&&(t.style.background=i.yJ);const n=s.pJ||e||i.pJ;n&&(t.style.color=n)}Aet(t,e,i,s){if(s){const n=MO(s,e);t.style.height=n*i+"px",t.style.left=LO(s)+"%",t.style.top=BO(s,e)+"px"}t.style.fontSize=RO*e*i+"px"}ket(t){const e=h.createElement("div");e.style.position="absolute",e.style.margin="0",e.style.padding="0",e.style.unicodeBidi="plaintext",e.style.wordWrap="break-word",e.style.overflowWrap="break-word",e.style.width="auto",e.style.textAlign=t.fF,function(t,e){"rl"===e.Pt?t.style.writingMode="vertical-rl":"lr"===e.Pt?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(e,t),function(t,e){const i=oE(e);VO(e)?(t.style.width=i+"%",t.style.height="auto"):(t.style.height=i+"%",t.style.width="auto")}(e,t),DO(e,t);const i=this.Stt.bJ;i&&(e.style.background=i);const s=this.Stt.pJ;return s&&(e.style.color=s),e.style.textShadow=YB(this.Stt.AJ),e}constructor(t,e,i,s){super(t,e,i,s,kO),this.yet=Vh(),this.wet=OO(3)}};function DO(t,e){let i,s;const n=rE(e),r=nE(e),o=oE(e);if(VO(e)){switch(n){case"line-left":i=r;break;case"center":i=r-o/2;break;case"line-right":i=r-o}s=e.pF?0:sE(e)}else{switch(n){case"line-left":s=r;break;case"center":s=r-o/2;break;case"line-right":s=r-o}i=e.pF?0:sE(e)}t.style.left=i+"%",t.style.top=s+"%"}function NO(t,e){for(const i of e)if(i.Eet){for(const e of i.Eet.uet)hn(t,xO+e);"v"===i.Eet.Xx.toLowerCase()&&i.Eet.cet&&hn(t,"theoplayer-webvtt-voice-"+i.Eet.cet)}}function MO(t,e){return t.DF*(RO*e)*CO}function LO(t){return t.BF-t.NF*t.ji/100}function BO(t,e){const i=t.OF,s=t.MF*MO(t,e)/100;return _.max(0,i-s)}function OO(t){const e=h.createElement("div");return e.className=EO+"default",Ka(e),e.style.wordWrap="break-word",e.style.writingMode="horizontal-tb",e.style.pointerEvents="none",e.style.width="auto",e.style.height="auto",e.style.maxHeight="100%",e.style.minHeight="0px",e.style.padding="0",e.style.boxSizing="border-box",e.style.fontSize=RO*t+"px",e.style.lineHeight=CO+"em",e}function FO(t,e){const i=OO(e);i.className=EO+t.o;const s=t.ji,n=MO(t,e);return i.style.width=s+"%",i.style.height=n+"px",i.style.left=LO(t)+"%",i.style.right="",i.style.top=BO(t,e)+"px",i.style.bottom="",i.style.boxSizing="border-box",i}function VO(t){return""===t.Pt}var WO=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]];function UO(t,e){const i=sE(t),s=sE(e),n=GO(i,t.pF),r=GO(s,e.pF);return n&&r?i-s||Yi(e,t)||e.OC-t.OC:Yi(t,e)||t.OC-e.OC}function GO(t,e){return e?t<0?t>-8:t>8:t>50}r(),r(),r();var ZO=function(t){return t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics",t}({}),HO={pJ:Si.WHITE,mJ:UB.Zc,wJ:"100%",yJ:Si.BLACK,bJ:"transparent",AJ:"none",Iet:"regular",SJ:void 0,TJ:void 0,kJ:void 0,EJ:void 0},XO=[{Ret:Si.WHITE,Iet:"regular",Cet:0},{Ret:Si.WHITE,Iet:"underline",Cet:0},{Ret:Si.GREEN,Iet:"regular",Cet:0},{Ret:Si.GREEN,Iet:"underline",Cet:0},{Ret:Si.BLUE,Iet:"regular",Cet:0},{Ret:Si.BLUE,Iet:"underline",Cet:0},{Ret:Si.CYAN,Iet:"regular",Cet:0},{Ret:Si.CYAN,Iet:"underline",Cet:0},{Ret:Si.RED,Iet:"regular",Cet:0},{Ret:Si.RED,Iet:"underline",Cet:0},{Ret:Si.YELLOW,Iet:"regular",Cet:0},{Ret:Si.YELLOW,Iet:"underline",Cet:0},{Ret:Si.MAGENTA,Iet:"regular",Cet:0},{Ret:Si.MAGENTA,Iet:"underline",Cet:0},{Ret:Si.WHITE,Iet:"italics",Cet:0},{Ret:Si.WHITE,Iet:"underline-italics",Cet:0},{Ret:Si.WHITE,Iet:"regular",Cet:0},{Ret:Si.WHITE,Iet:"underline",Cet:0},{Ret:Si.WHITE,Iet:"regular",Cet:4},{Ret:Si.WHITE,Iet:"underline",Cet:4},{Ret:Si.WHITE,Iet:"regular",Cet:8},{Ret:Si.WHITE,Iet:"underline",Cet:8},{Ret:Si.WHITE,Iet:"regular",Cet:12},{Ret:Si.WHITE,Iet:"underline",Cet:12},{Ret:Si.WHITE,Iet:"regular",Cet:16},{Ret:Si.WHITE,Iet:"underline",Cet:16},{Ret:Si.WHITE,Iet:"regular",Cet:20},{Ret:Si.WHITE,Iet:"underline",Cet:20},{Ret:Si.WHITE,Iet:"regular",Cet:24},{Ret:Si.WHITE,Iet:"underline",Cet:24},{Ret:Si.WHITE,Iet:"regular",Cet:28},{Ret:Si.WHITE,Iet:"underline",Cet:28}],zO=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function qO(t,e){return gE(t.Pet,e.Pet)||Qd(t.kL,e.kL)}r();var Jt=32,YO=/CC([1-4])=(.*)/;function KO(t){if(!t)return[];const e=[],i=t.trim().split(";");if(i.every((t=>t.match(YO))))for(const t of i){const[,i,s]=t.match(YO);e.push({Det:Number(i),Net:s})}else for(let t=0;t<i.length;t++)e.push({Det:t+1,Net:i[t]});return e}var jO=class t{get Met(){return this.Bet.Let}get Oet(){return this.Bet.Fet}get Vet(){return this.Bet.Fet.Cet-this.Bet.Let.Cet+1}get Wet(){return this.Bet.Fet.Uet-this.Bet.Let.Uet+1}br(){return this.Get=this.Zet(),this.Het(),this.Xet(),this.Get}Zet(){const t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.Vet/Jt*this.qet.zet*100+"%",t.style.height=1.2*this.Wet+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.qet.Yet?"calc(1em - 1ch)":"";const e=this.Ttt.mJ;e&&(t.style.fontFamily=e);const i=this.Ttt.bJ;return i&&(t.style.backgroundColor=i),t}Het(){if(!this.Get)return;const t=this.Met.Uet/15*100;let e=this.Met.Cet/Jt*100,i=(Jt-this.Oet.Cet-1)/Jt*100;const s=(15-this.Oet.Uet-1)/15*100;this.qet.Ket||(e=i=1,this.Get.style.width="98%"),s<t?this.Get.style.bottom=s*this.qet.zet+"%":this.Get.style.top=t*this.qet.zet+"%",i<e?this.Get.style.right=i+"%":this.Get.style.left=e+"%"}Xet(){const t=this.Bet.jet.sort(QO);for(let e=0;e<t.length;e++)this.Qet(t[e-1],t[e]),this.Jet(t[e]);this.Qet(t[t.length-1],void 0)}Jet(e){var i;const s=NB(this.Ttt,e.$et),n=t.tit(s);Nu(n,e.eit),null==(i=this.Get)||i.appendChild(n)}static tit(t){const e=h.createElement("span");e.style.display="inline-block",t.Iet!==ZO.FONT_ITALICS&&t.Iet!==ZO.FONT_UNDERLINE_ITALICS||(e.style.fontStyle="italic"),t.Iet!==ZO.FONT_UNDERLINE&&t.Iet!==ZO.FONT_UNDERLINE_ITALICS||(e.style.textDecoration="underline");const i=t.pJ;i&&(e.style.color=i);const s=t.yJ;return s&&(e.style.backgroundColor=s),e.style.textShadow=YB(t.AJ),e.style.height="1.2em",e}Qet(t,e){const i=t?t.Fet.Uet:this.Bet.Let.Uet,s=e?e.Let.Uet:this.Bet.Fet.Uet;let n=t?t.Fet.Cet:this.Bet.Let.Cet;const r=e?e.Let.Cet:this.Bet.Fet.Cet;i<s&&(!e||t&&t.Let.Uet!==e.Let.Uet?this.iit():this.sit(this.Bet.Fet.Cet-n),n=this.Bet.Let.Cet),n<r&&(e?this.sit(r-n):this.iit())}iit(){var t;const e=h.createElement("br");null==(t=this.Get)||t.appendChild(e)}sit(t){var e;if(t<=0)return;const i=h.createElement("span");i.style.display="inline-block",Nu(i,rm(" ",t)),null==(e=this.Get)||e.appendChild(i)}constructor(t,e,i){this.Bet=t,this.qet=e,this.Ttt=i}};function QO(t,e){return function(t,e){if(t.Uet!==e.Uet)return t.Uet-e.Uet;return t.Cet-e.Cet}(t.Let,e.Let)}var JO=class extends Xe{iet(t){const e=h.createElement("div");return e.className="theoplayer-cea608-texttrack-"+t,e.style.position="absolute",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.top="10%",e.style.bottom="10%",this.Stt.mJ&&(e.style.fontFamily=this.Stt.mJ),e}re(t,e){this.yl()}yl(){const t=MB(this.Stt);this.nit=function(t){return{zet:t/100,Yet:t<=100,Ket:t<=150}}(100*t);const e=this.rit/Jt;this.oit=e*t,this.SZ.style.fontSize=this.oit+"px"}get rit(){let t=this.SZ.offsetWidth;return this.nit&&this.nit.Ket||(t*=.8),t}Jtt(t,e,i){for(const t of e)!i&&t.so||this.ytt(t);for(const e of t)this.het(e)}het(t){this.nit&&this.nit.Ket?this.hit(80):this.hit(100),this.yl();let e=this.btt(t);e||(e=this.aet(t),this.$tt(t,e));for(const t of e)this.SZ.appendChild(t)}aet(t){return t.U.map((t=>new jO(t,this.nit,this.Stt).br()))}hit(t){const e=(100-t)/2;this.SZ.style.left=e+"%",this.SZ.style.width=t+"%"}constructor(t,e,i,s){super(t,e,i,s,HO)}},$O=class t{ait(t){for(const e of this.uit)if(e.Ht===t)return e}static cit(t){switch(t.zw){case Hr.TTML:case Hr.SRT:case Hr.WEBVTT:case Hr.CEA608:return!0}return!1}dit(t){switch(t.zw){case Hr.TTML:return new sO(t,this.fit,t.Ch,this.Ku);case Hr.SRT:case Hr.WEBVTT:return new PO(t,this.fit,t.Ch,this.Ku);case Hr.CEA608:return new JO(t,this.fit,t.Ch,this.Ku)}}_it(t){let e=this.ait(t);e||(e=this.dit(t),e&&(e.nQ(),e.Rtt(this.qH),this.uit.push(e),t.LE===Ui.Qn&&e.qtt()))}vit(t){const e=this.uit;for(let i=e.length-1;i>=0;i-=1){const s=e[i];s.Ht===t&&(s.yn(),wa(e,i))}}git(e){Dx(e.Lt)&&t.cit(e)&&(e.aR===Bu.ERROR?this.vit(e):this._it(e))}get p6(){return this.mit.cs||this.ta.CO}nr(){for(const t of this.uit)t.Ht.vn(gs.aC,this.pit),t.Ht.vn(gs.cC,this.pit),t.yn();En(this.uit)}yn(){this.nr();for(const t of this.uit)t.yn();this.Hl.vn(je.XR,this.wit),this.Hl.vn(je.qR,this.yit),this.Hl.vn(gs.da,this.pit),this.mit.vn(Wi.da,this.Ait),this.ta.vn([Js.IO,Js.RO],this.Ait),this.qH.vn("hC",this.Sit)}constructor(t,e,i,s,n,r){this.uit=[],this.wit=t=>{const e=t.Ht;e.bn(gs.aC,this.pit),e.bn(gs.cC,this.pit),e instanceof HL&&(e.p6=this.p6),this.git(e)},this.pit=t=>{const e=t.Ht;this.git(e)},this.yit=t=>{const e=t.Ht;e.vn(gs.aC,this.pit),e.vn(gs.cC,this.pit),this.vit(e)},this.Ait=()=>{const t=this.p6;for(const e of this.Hl.mC)e instanceof HL&&(e.p6=t)},this.Sit=()=>{for(const t of this.uit)t.Rtt(this.qH)},this.fit=t,this.Ku=e,this.Hl=i,this.mit=n,this.ta=r,this.qH=s,this.Hl.bn(je.XR,this.wit),this.Hl.bn(je.qR,this.yit),this.Hl.bn(gs.da,this.pit),this.mit.bn(Wi.da,this.Ait),this.ta.bn([Js.IO,Js.RO],this.Ait),this.qH.bn("hC",this.Sit),this.Ait()}};r();var tF=class extends So{get PO(){var t;return null!=(t=this.Tit.ownerDocument.pictureInPictureEnabled)&&t}get CO(){return this.kit}async vo(){if(this.PO){if(!this.CO){const t=this.Ay([Js.IO,Js.fa]);await this.Tit.requestPictureInPicture(),await t,this.kit||this._o(new Co)}}else this._o(new Co)}async xo(){if(this.PO){if(this.kit){const t=this.Ay([Js.RO,Js.fa]);await this.Tit.ownerDocument.exitPictureInPicture(),await t,this.kit&&this._o(new Co)}}else this._o(new Co)}yn(){this.Ro(),this.Tit.removeEventListener("enterpictureinpicture",this.Eit),this.Tit.removeEventListener("leavepictureinpicture",this.xit)}constructor(t){super(),this.kit=!1,this.Eit=()=>{this.kit=!0,this._o(new mk)},this.xit=()=>{this.kit=!1,this._o(new pk)},this.Tit=t,this.Tit.addEventListener("enterpictureinpicture",this.Eit),this.Tit.addEventListener("leavepictureinpicture",this.xit)}};function eF(t){const e=new eD,i=function(t){const e=[];return $P.aa(t)&&e.push(new $P(t)),tD.aa(t)&&e.push(new tD(t)),e}(t);if(i.length>0){for(const t of i)e.BK(t);e.LK(i[0])}return e}var iF=class extends TB{get SZ(){return this.hk}get vR(){return this.hk.videoHeight}get pR(){return this.hk.videoWidth}get Sa(){return this.Iit}get WZ(){return this.Rit}IR(){return this.hk}async Km(){this.Rit.yn(),this.Iit.yn(),this.Cit.yn(),this.Pit.yn(),await super.Km()}be(){super.be(),this.Cit.be()}ge(){super.ge(),this.Cit.ge()}stt(t){super.stt(t),this.Cit.stt(t)}constructor(t,e,i,s){super(t,e,i,s),this.Iit=eF(t),this.Rit=new tF(t),this.Cit=new DB,this.Pit=new $O(this.Cit.we,this.Hu,this.nt,this.Wl,this.Sa,this.WZ)}};r(),r();r(),r();var sF=function(t){return t.Dit="HELLO",t.Nit="HI_THERE",t.Mit="INITIALIZE",t.Lit="APPEND_INIT",t.Bit="APPEND_DATA",t.Oit="ACK",t.Fit="REMOVE",t.Vit="DESTROY_SESSION",t}({}),nF=class{Wit(t){return this.Yo.Qo((async t=>{Io(t);const e=new MessageChannel,i=e.port1,s=e.port2;Bl.serviceWorker.controller||await MA(Bl.serviceWorker,"install",t),"activated"!==Bl.serviceWorker.controller.state&&await MA(Bl.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};Bl.serviceWorker.controller.postMessage(n,[s]),i.start(),this.nw=i;try{const e=await MA(i,"message",t),s=e.data;if("HI_THERE"!==s.kind)throw new m("Could not set up message channel");this.dk=s.sessionId}catch(t){throw Se(t)&&this.Uit(),t}}),t)}Git(t,e){return this.nw,this.Yo.Qo((async()=>{if(!this.nw)throw new m("MessageSession not set up yet or already closed.");e||(e=[]),this.nw.postMessage(t,e);const i=await MA(this.nw,"message");return i.data}))}Zit(){return this.Yo.Qo((()=>this.Uit()))}Uit(){if(!Bl.serviceWorker.controller)return;if("activated"!==Bl.serviceWorker.controller.state)return;if(!this.nw)return;const t={kind:"DESTROY_SESSION"};this.nw.postMessage(t),this.nw.close(),this.nw=void 0}constructor(){this.Yo=new dc}};r();var rF=class{get Hit(){return this.Xit}zit(t,e){const i=t-e;this.Xit=i>this.Hit?this.Xit:i}qit(t){this.Xit=t}constructor(){this.Xit=1/0}};r(),r(),r();var Re=function(t){return t.wE="audio",t.yE="video",t.xW="metadata",t}({}),oF=class extends So{get SI(){return void 0===this.Yit||void 0===this.Kit?ee.WB():new ee([this.Yit,this.Kit])}get kd(){return{Fk:this.VY}}get j3(){return Cl(this.VY,"audio")?Fo.wE:Cl(this.VY,"video")?Fo.yE:Fo.oE}get SY(){return this.VY}get J3(){return ee.WB()}get $j(){return 30}set $j(t){}get sQ(){return 30}set sQ(t){}i4(t,e){}s4(t,e){}r$(){return this.jit}get va(){return this.Qit}get Jit(){return this.Yit}get dF(){return this.Kit}async n4(){}async T3(t,e){}async r3(t,e,i){if(t.zw!==To.NJ)throw new m("Streaming or opaque segments are not supported yet.");const s=t.$k,n=async()=>{const t=s.buffer,i={kind:sF.Bit,mediaType:hF(this.VY),segment:s,startPts:e.$it,totalDuration:e.ct};if(await this.tst.Git(i,[t]),void 0===this.Yit){const t=e.$it+e.aW;this.Yit=t,this.Kit=t}this.Kit=this.Kit+e.ct,this._o(new me(xs.PJ))};return this.Yo.Qo((async t=>{Io(t);try{this.Qit=!0,await n()}finally{this.Qit=!1}}),i)}async a3(t,e,i){if(t.zw!==To.NJ)throw new m("Streaming or opaque initialization segments are not supported yet.");const s=t.$k,n=async()=>{const t={kind:sF.Lit,mediaType:hF(this.VY),segment:s};await this.tst.Git(t,[])};return this.Yo.Qo((async t=>{Io(t);try{this.Qit=!0,await n()}finally{this.Qit=!1}}),i)}Y3(){this.jit=!0}V3(){this.jit=!1}async rT(t,e,i){const s=async()=>{const t={kind:sF.Fit,mediaType:hF(this.VY),endTime:e};await this.tst.Git(t),this.Yit=void 0,this.Kit=void 0,this._o(new me(xs.PJ))};return this.Yo.Qo((async t=>{Io(t);try{this.Qit=!0,await s()}finally{this.Qit=!1}}),i)}ZJ(t){return this.VY===t.Fk}XJ(t){return this.VY=t.Fk,Promise.resolve()}async Km(){this.Ro(),await this.Yo.yn()}constructor(t,e){super(),this.VY=t,this.tst=e,this.Yit=void 0,this.Kit=void 0,this.Yo=new dc,this.Qit=!1,this.jit=!1}};function hF(t){return t.match(/video/)?Re.yE:Re.wE}var aF=class t{static ist(e,i,s,n){const r=[];for(let t=0;t<e.J4.length;t++){const s=e.J4[t].Fk;r.push(new oF(s,i))}return new t(e,r,s,n)}sst(){}get nst(){return[this.H4,this.X4].filter(ol)}get d4(){return this.H4}get SI(){return vM(this)}get kd(){return this.FT}get ct(){return 0}get r$(){var t,e,i;const s=null==(i=null==(t=this.H4)?void 0:t.r$())||i;var n;const r=null==(n=null==(e=this.X4)?void 0:e.r$())||n;return s&&r}get cR(){return new ee([0,1/0])}get f4(){return this.X4}async Km(){await Promise.all([this.H4,this.X4].filter(ol).map((t=>t.Km())))}q4(t){}Q4(t,e,i,s){}Y3(){var t,e;null==(t=this.H4)||t.Y3(),null==(e=this.X4)||e.Y3()}V3(){var t,e;null==(t=this.H4)||t.V3(),null==(e=this.X4)||e.V3()}ZJ(t){return!0}XJ(t){return this.FT=t,Promise.resolve()}qJ(t){}async UJ(t,e){const i=await this.ey.$w(t.qw,e),s=await i.pT();return await this.GJ(s),s}async GJ(t){if(t&&!this.hk.src)throw new kh(Ci.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.hk.src)throw new kh(Ci.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const e=this.fT;e&&(await e.gT(this.hk),this.fT=void 0),t&&(await t.kn(this.hk),this.fT=t)}constructor(t,e,i,s){this.fT=void 0,this.FT=t,this.X4=Do(e,(t=>Boolean(t.SY.match(/video/)))),this.H4=Do(e,(t=>Boolean(t.SY.match(/audio/)))),this.ey=i,this.hk=s,this.sst()}},uF=class extends So{rst(){this.Tit.addEventListener("timeupdate",this.ost),this.Tit.addEventListener("ended",this.hst),this.Tit.addEventListener("timeupdate",this.ast),this.Tit.addEventListener("ratechange",this.ust),this.Tit.addEventListener("volumechange",this.cst),this.Tit.addEventListener("durationchange",this.lst),this.Tit.addEventListener("playing",this.dst),this.Tit.addEventListener("seeking",this.fst),this.Tit.addEventListener("play",this._st),this.Tit.addEventListener("pause",this.vst),this.Tit.addEventListener("encrypted",this.z7)}gst(){this.Tit.removeEventListener("timeupdate",this.ost),this.Tit.removeEventListener("ended",this.hst),this.Tit.removeEventListener("timeupdate",this.ast),this.Tit.removeEventListener("ratechange",this.ust),this.Tit.removeEventListener("volumechange",this.cst),this.Tit.removeEventListener("durationchange",this.lst),this.Tit.removeEventListener("playing",this.dst),this.Tit.removeEventListener("seeking",this.fst),this.Tit.removeEventListener("play",this._st),this.Tit.removeEventListener("pause",this.vst)}mst(){this.g8.bn(Zc.aC,this.Ds)}pst(){this.g8.vn(Zc.aC,this.Ds)}get SZ(){return this.Tit}get y5(){return!1}get RI(){return this.Tit.currentTime+this.wst.Hit}get JI(){return this.Tit.paused}get yR(){return this.Tit.volume}set yR(t){this.Tit.volume=t}get tR(){return this.Tit.playbackRate}set tR(t){this.Tit.playbackRate=t}get yst(){return this.Tit.defaultPlaybackRate}get SI(){var t,e;return null!=(e=null==(t=this.kZ)?void 0:t.SI)?e:ee.WB()}get bst(){return ee.Cn(this.Tit.buffered)}get sR(){const t=this.Ast;return this.Uo.AB(t.Pb(this.wst.Hit))}get Ast(){return ee.Cn(this.Tit.played)}get dR(){return this.FH}get f5(){return!1}get T5(){return!1}get ct(){return this.Tit.duration}get qI(){return this.Tit.muted}set qI(t){this.Tit.muted=t}get $et(){return this.Tit.style}get vO(){return ne({},rN,{_O:!0})}Db(t,e,i){this.V8.np(),this.V8=new Fi,this.W8=Ts(this.U8(t,this.W8,this.V8.ep),this.V8).catch(M)}async U8(t,e,i){var s;this.Uo=this.sR;const n=null==(s=this.kZ)?void 0:s.nst;if(!n)return;const r=_.max(...n.map((t=>t.Jit?t.Jit:1/0)));this.FH=!0,this._o(new Al(t)),await e.catch(M),Io(i);try{for(this.Sst||this.Tst(),this.Tit.load(),this.kst||(this.Est=!1,await Lu(this.Tit.play(),i));this.aR<Wt.kO;)await this.g8.Ay(Zc.aC,i);this.xst.Zb(),this.Sst=!1,this.FH=!1,this._o(new Be(this.RI))}catch(t){throw this.xst.Hb(t),t}finally{this.Ist(),this.wst.qit(r)}}PR(){this.kst=!0,this.Tit.pause()}async DR(){this.kst&&(this.Tit.src||this.itt(),await this.xst.Xb,await this.Tit.play())}async Km(){this.tst&&this.tst.Zit().catch(M),this.V8.np(),this.gst(),this.pst(),this.g8.Km(),this.Ro(),this.Hl.yn(),this.Cit.yn(),this.Pit.yn()}async nr(){this.tst&&this.tst.Zit().catch(M),this.V8.np(),this.Tit.removeAttribute("src"),this.Tit.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.Tit.removeAttribute("x-airplay-deny"),this.Tit.disableRemotePlayback=!1,this.Tit.load(),this.g8.nr(),this.Uo=ee.WB()}itt(){this.ttt||(Ef(this.Tit,As.Ys),this.ett=!0)}get aR(){return this.g8.aR}Tst(){const t=this.Tit.getClientRects();let e;if(!(t.length>0))return;e=t[0];const i=e.width,s=this.Tit.videoWidth/this.Tit.videoHeight,n=e.height;let r,o;i/n>s?(r=n*s,o=n):(o=i/s,r=i),this.Tit.style.width=r+"px",this.Tit.style.height=o+"px",this.Tit.style.marginLeft=(i-r)/2+"px",this.Tit.style.marginTop=(n-o)/2+"px",this.Tit.style.backgroundColor="black"}Ist(){this.Tit.style.width="100%",this.Tit.style.height="100%",this.Tit.style.marginLeft="",this.Tit.style.marginTop="",this.Tit.style.backgroundColor=""}get vR(){return this.Tit.videoHeight}get pR(){return this.Tit.videoWidth}get MI(){return this.Tit.ended}get Ti(){return this.Tit.offsetHeight*As.Ys.pp}get ji(){return this.Tit.offsetWidth*As.Ys.pp}get ZI(){return!1}get ttt(){return this.ett}get kI(){}get Hu(){return this.Rst}get lt(){}get Sa(){return this.Iit}get WZ(){return this.ta}get cR(){return this.kZ?this.kZ.cR:ee.WB()}get EZ(){}get nt(){return this.Hl}get Wl(){return this.qH}get ER(){return!1}set ER(t){}FZ(t,e,i,s,n){}ZR(t,e,i,s,n,r,o,h,a){const u=new Is(t,e,i,s,n,r,o,a,h);return this.Hl.tt(u),this.i7.tt(u),u}UZ(t){throw m("Not supported.")}l$(t){}zI(){return WD(this.Tit)}get A8(){return"block"===this.Tit.style.display}ge(){this.Tit.style.display="block",this.Cit.ge()}be(){this.Tit.style.display="none",this.Cit.be()}Q7(){}async $n(t){if(t.zw===De.zW)throw new m("Not yet implemented");await this.tst.Wit();const e=Do(t.CZ,(t=>t._T.zw===O.Hw)),i={kind:sF.Mit,mediaBufferConfigs:t.J4.map((t=>t.Fk)),fairPlaySdkUri:null==e?void 0:e.lG};return await this.tst.Git(i),this.kZ=aF.ist(t,this.tst,this.ey,this.Tit),this.zJ.$n(this.kZ,t),this.Tit.setAttribute("x-webkit-airplay","deny"),this.Tit.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.Tit.disableRemotePlayback=!0,this.Tit.preload="none",this.Tit.src="https://theo.proxy/"+this.tst.dk+"/master.m3u8",this.kZ}J7(){}ZW(t){this.Hl.it(t),this.i7.it(t)}GZ(){for(const t of this.Hl.mC.slice())t.yn();this.Hl.nr()}wZ(t){}BZ(){return!1}stt(t){t.appendChild(this.Tit),this.Cit.stt(t)}IR(){return this.Tit}get zZ(){return this.zJ.zZ}set zZ(t){this.zJ.zZ=t}get ntt(){}set ntt(t){}get V9(){}FR(){}constructor(t,e,i,s){super(),this.Sst=!0,this.tst=new nF,this.wst=new rF,this.kst=!0,this.xst=new is,this.FH=!1,this.W8=Promise.resolve(),this.V8=new Fi,this.Est=!0,this.Uo=ee.WB(),this.ett=!1,this.ost=()=>{this.JI||this.bst.V<=0||this.SI.V<=0||this.wst.zit(this.SI.Tn(this.SI.V-1),this.bst.Tn(this.bst.V-1))},this.hst=()=>{this._o(new ss(this.RI))},this.ast=()=>{this._o(new rl(this.RI,this.kI))},this.ust=()=>{this._o(new ga(this.RI,this.tR))},this.cst=()=>{this._o(new Ar(this.RI,this.yR))},this.lst=()=>{this._o(new yn(this.ct))},this.dst=()=>{this._o(new Xr(this.RI))},this.fst=()=>{this.Db(this.RI)},this._st=async()=>{this.Est&&this._o(new he(this.RI)),this.kst=!1,this.Est=!0},this.vst=()=>{this.kst=!0,this._o(new nl(this.RI))},this.z7=t=>{const e=t.initDataType;var i;const s=null!=(i=t.initData)?i:new ArrayBuffer(0);this._o(new bm(e,s))},this.Tit=t,this.g8=new Xo(this),this.Rst=i,this.qH=s,this.Tit.playsInline=!0,this.Tit.style.width="100%",this.Tit.style.height="100%",this.rst(),this.mst(),this.Iit=eF(this.Tit),this.ta=new tF(this.Tit),this.zJ=new _B(this),this.ey=e,this.Hl=new ca,this.i7=new KL(this),this.Cit=new DB,this.Pit=new $O(this.Cit.we,this.Hu,this.nt,this.Wl,this.Sa,this.WZ)}},cF=[Fo.wE,Fo.yE],Vu=class{get YH(){const t=[];for(const e of this.Cst){const i=this.Pst.get(e);if(i){const e=i.map((t=>t.Dst));t.push(...e)}}return this.Nst&&t.push(this.Nst),t}Mst(t){for(const e of this.YH)e.stt(t)}lH(t){const e=this.Pst.get(t);if(!e)return;const i=Do(e,(t=>t.Lst));return i?(i.Lst=!1,i.Dst):void 0}Bst(t){if(!this.Nst){var e;const t=null==(e=this.Pst.get(Fo.yE))?void 0:e[0].Dst.SZ;if(!t)throw new m("Error creating iOS Safari MediaController");this.Nst=new uF(t,this.ey,this.Ku,this.qH),t.parentElement&&this.Nst.stt(t.parentElement)}return this.Nst}async qZ(t){const e=t.SZ,i=e.tagName.toLowerCase();await t.nr(),kf(e);const s=Do(this.Pst.get(i)||[],(e=>t===e.Dst));s&&(s.Lst=!0)}ZH(){for(const t of this.YH)t.itt()}yn(){for(const t of this.YH){const e=t.SZ;t.Km(),Tf(e),We(e)}this.Pst.clear(),this.Nst=void 0}Ost(){for(const t of this.Cst){const e=[];this.Pst.set(t,e);for(let i=0;i<this.Fst;i++){const i=Sf(t),s=t===Fo.wE?new PB(i,this.ey,this.Ku):new iF(i,this.ey,this.Ku,this.qH);e.push({Dst:s,Lst:!0})}}}constructor(t,e,i=2,s=cF,n=Sb()){this.Fst=i,this.Cst=[...s],this.ey=n,this.Ku=t,this.qH=e,this.Pst=Vh(),this.Ost()}};r(),r();var lF=class{eE(t){return this.WW.eE(t)}FE(t){this.WW.FE(t)}yn(){this.WW.yn()}constructor(t){this.WW=t}},dF=class extends lF{eE(t){const e=new Gr(t),i=this.XH.Zj.JG(e);return i?this.Vst(e,i):this.WW.eE(e)}async Vst(t,e){e.Xj(As.Wm()/1e3);const i=await this.WW.eE(t);let s;e.zj(As.Wm()/1e3),s=i.Zk?i.Ok().pipeThrough(new Gh(new fF(e))):i.Bk().then((t=>{const i=As.Wm()/1e3;return e.qj(i,new j(t)),e.Yj(i),t}));const n={$k:s,eE:i.eE};return new iA(n,i)}constructor(t,e){super(t),this.XH=e}},fF=class{start(t){this.vJ=t}transform(t){this.Wst.qj(As.Wm()/1e3,t),this.vJ.enqueue(t)}flush(){this.Wst.Yj(As.Wm()/1e3)}constructor(t){this.Wst=t}};function _F(t){return{get ratio(){return t.Vo},get thresholds(){return t.Ust.slice()}}}function vF(t){const e=[],i=_.floor(1/t);if(S(i))return[];for(let s=0;s<=i;s++){const i=bi(s*t,0,1);e.push(i)}return e}r(),r(),r();var gF=class{get Vo(){return this.Gst}get Ust(){return this.Zst}Hst(t){return e=>{const i=e[e.length-1];this.Gst=i.intersectionRatio,t(i.intersectionRatio)}}get wa(){return this.eu||(this.eu=_F(this)),this.eu}NR(){this.Xst.disconnect()}constructor(t,e,i){this.Gst=1,this.eu=void 0,this.Zst=vF(e);const n=this.Hst(i);this.Xst=new s.IntersectionObserver(n,{root:null,threshold:this.Zst}),this.Xst.observe(t)}},mF=class{get Vo(){return this.Gst}get Ust(){return this.Zst}get wa(){return this.eu||(this.eu=_F(this)),this.eu}zst(t){this.Gst=t;const e=this.Zst;let i=0;if(t>0)for(;i<e.length&&e[i]<=t;)++i;this.qst!==i&&(this.qst=i,this.Yst(t))}constructor(t,e){this.Gst=1,this.qst=-1,this.eu=void 0,this.Zst=vF(t),this.Yst=e}},pF=class extends mF{Kst(){const t=this.po.getBoundingClientRect();return bi(_.max(0,_.min(s.innerWidth,t.right)-_.max(0,t.left))*_.max(0,_.min(s.innerHeight,t.bottom)-_.max(0,t.top))/(t.width*t.height),0,1)}NR(){s.removeEventListener("scroll",this.jst)}constructor(t,e,i){super(e,i),this.jst=Fd((()=>this.zst(this.Kst())),50),this.po=t,s.addEventListener("scroll",this.jst,!!XP&&{passive:!0}),mi((()=>this.zst(this.Kst())))}},wF=.1,yF=class{get Qst(){return this.Jst}get Oo(){return this.$st}set Oo(t){if(S(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.$st=t}get wa(){return this.eu||(this.eu=function(t){return{get ratio(){return t.Qst},get visible(){return t.Qst>t.Oo},get visibleThreshold(){return t.Oo},set visibleThreshold(e){e=ao(e),t.Oo=e},addObserver:(e,i)=>(e=ao(e),t.Bo(e,i).wa),removeObserver(e){const i=t.tnt(e);i&&t.Do(i)}}}(this)),this.eu}ent(t){return e=>{this.Jst=e,null==t||t(this.Jst)}}Bo(t,e){if(S(t))throw new g("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let i;return i="function"==typeof s.IntersectionObserver?new gF(this.po,t,this.ent(e)):new pF(this.po,t,this.ent(e)),this.int.push(i),i}Do(t){t.NR(),_e(this.int,t)}tnt(t){for(const e of this.int)if(e.wa===t)return e}yn(){for(const t of this.int)t.NR();En(this.int)}constructor(t){this.Jst=1,this.$st=0,this.int=[],this.eu=void 0,this.po=t,this.Bo(.1,this.ent())}};r();var bF=class extends me{constructor(){super(ns.Py)}},AF=class extends en{get snt(){return this.XH}get KO(){return this.nnt}set KO(t){this.nnt=t,this.Ta.KO=t}get rnt(){return this.ont}get ht(){return this.Ta.ht}get rq(){return this.hnt}get Hu(){return this.ant}get VI(){return this.Ta.VI}get UI(){return this.Ta.UI}get XI(){return this.unt}get Sz(){return this.cnt}get nt(){return this.Ta.nt}get Wl(){return this.qH}get rt(){return this.Ta.rt}get SI(){return this.TI()}TI(){return this.Ta.SI}get lnt(){return this.yQ}get MQ(){return this.LQ}get RI(){return this.CI()}set RI(t){this.DI(t)}CI(){return this.Ta.RI}DI(t,e){this.Ta.DI(t,e)}dnt(){return this.CI()}get kI(){return this.Ta.kI}set kI(t){this.Ta.kI=t}get bt(){return this.Ta.bt}get ct(){return this.jd()}jd(){return this.Ta.ct}get we(){return this.Ta.we}get MI(){return this.Ta.MI}get lt(){return this.BI()}BI(){return this.Ta.lt}get OI(){return this.FI()}FI(){return this.Ta.OI}get Sa(){return this.Ta.xR()}get WZ(){return this.Ta.ja()}get ER(){return this.Ta.ER}set ER(t){this.Ta.ER=t}get qI(){return this.Ta.qI}set qI(t){const e=Boolean(t);this.KI(e)}KI(t){this.Ta.qI=t,t||this.JI||this.RR()}get JI(){return this.Ta.JI}get tR(){return this.eR()}set tR(t){this.iR(t)}eR(){return this.Ta.tR}iR(t){this.Ta.tR=t}get sR(){return this.nR()}nR(){return this.Ta.sR}get rR(){return this.Ta.rR}set rR(t){this.Ta.rR=t}get aR(){return this.Ta.aR}get cR(){return this.lR()}lR(){return this.Ta.cR}get dR(){return this.Ta.dR}get OC(){return this.eF}get vR(){return this.Ta.vR}get pR(){return this.Ta.pR}get yR(){return this.Ta.yR}set yR(t){const e=bi(Number(t),0,1)||0;this.AR(e)}get SR(){return this.zH}AR(t){this.Ta.yR=t}Aa(){fk(this,dC,this)}DR(){this.Ta.DR()}PR(){this.Ta.PR()}iu(){return this.PH}async Ca(t,e){if(this.PH=t,t){this.fnt.Hq(t).catch(this._nt);const i=function(t){t.sources;const e=t.sources.filter((t=>Sh(t.integration)));0;return t.sources=e,t}(t);await this.Ta.Ca(i,e)}}RR(){if(this.mo)return;this.Ta.RR(),this.ont.RR();const t=this.we.getElementsByTagName("video");for(let e=0;e<t.length;e++){const i=t[e];"Advertisement"===i.title&&Ef(i,As.Ys)}this.mo=!0}cs(){return this.vnt.Ho()===cu.FULLSCREEN}ge(){this.Ta.ge()}be(){this.Ta.be()}IR(){return this.Ta.IR()}FR(){this.Ta.FR()}WR(){this.Ta.WR()}ZR(t){return this.Ta.ZR(t)}async NR(){this.PH=void 0,await this.Ta.NR(),await this.Ta.nr()}async yn(){this._o(new bF),this.Ro(),this.hnt.yn(),this.mI.yn(),this.cnt.yn(),this.gnt.yn(),this.mnt.yn(),this.vnt.yn(),this.ant.yn(),this.pnt.yn(),this.ont.yn(),this.HH.yn(),await this.Ta.yn()}constructor(t,e,i,s){super(),this.nnt=!1,this.mo=!1,this.PH=void 0,this.wnt=!1,this.Ma=void 0,this._nt=t=>{if(this.wnt)return;this.wnt=!0;const e=this.ynt,i=Zs(t);this.Ta.bC=new $R(this.we,i,t),uh(e.yn())},this.bnt=t=>{t.type!==ns.Yy&&t.type!==ns.qy&&this._o(t)};const n=ao(e.uid);S(n)?this.eF=Pk++:this.eF=n,this.kd=e;const r=As.mI,o=new jD;this.pnt=new MP("9.7.0",r,o),this.XH=new PD,this.zH=new LR;const h=new dF(r,this.XH);this.mI=new yD(h,e.allowMixedContent),this.aJ=null!=i?i:new fP(e.isEmbeddable,"9.7.0",aP()),this.fnt=new KD(r,this.aJ,this.pnt,o,e,aP()),this.fnt.sJ().catch(this._nt),this.ant=new Ee(t),this.ant.bn(ln.mn,this.Ds),this.qH=new iN;const a=new(null!=s?s:Vu)(this.ant,this.qH);a.Mst(t),this.yQ=new LD,this.LQ=new OD;const u=new JR(t,e,this.mI,this.XH,this.zH,a,this.qH);this.XH.nQ(u);let c=u;c=new BD(c,this.lnt),c=new FD(c,this.MQ),this.ynt=c,this.Ta=new Tk(this.ynt),this.Ta._y(this.bnt),this.unt=new VD(this.Ta),this.cnt=new SD(this.Ta,this.mI,this.XH),this.gnt=new VP(this),this.mnt=new iD(this.Ta,e.allowNativeFullscreen),this.vnt=new hD(this.mnt,this.Ta.ja()),this.ant.kn(),this.No=new yF(t),this.HH=new Vu(this.ant,this.qH,1,[Fo.yE]),this.ont=new uD(this.HH),this.hnt=new ZD}};r(),r();var gc=class extends en{get snt(){return this.Ant()}Ant(){return this.na.snt}get zc(){return this.Snt()}Snt(){return this.na.zc}get pnt(){return this.na.pnt}get rnt(){return this.Tnt()}Tnt(){return this.na.rnt}get KO(){return this.na.KO}set KO(t){this.na.KO=t}get gnt(){return this.na.gnt}get rq(){return this.na.rq}get lnt(){return this.na.lnt}get kd(){return this.na.kd}get Hu(){return this.na.Hu}get Sa(){return this.xR()}xR(){return this.na.Sa}get WZ(){return this.ja()}ja(){return this.na.WZ}get mI(){return this.na.mI}get SR(){return this.na.SR}get fnt(){return this.na.fnt}get MQ(){return this.na.MQ}get Sz(){return this.na.Sz}get vnt(){return this.na.vnt}get ant(){return this.na.ant}get Ta(){return this.na.Ta}get Wl(){return this.na.Wl}get knt(){return this.Ent()}Ent(){return this.na.knt}get xnt(){return this.Int()}Int(){return this.na.xnt}get OC(){return this.na.OC}get No(){return this.na.No}get ht(){return this.yI()}yI(){return this.na.ht}TI(){return this.na.TI()}get kI(){return this.EI()}set kI(t){this.xI(t)}EI(){return this.na.kI}xI(t){this.na.kI=t}get bt(){return this.II()}II(){return this.na.bt}CI(){return this.na.CI()}DI(t,e){this.na.DI(t,e)}dnt(){return this.na.dnt()}jd(){return this.na.jd()}get we(){return this.NI()}NI(){return this.na.we}get MI(){return this.LI()}LI(){return this.na.MI}BI(){return this.na.BI()}FI(){return this.na.FI()}get VI(){return this.WI()}get UI(){return this.GI()}WI(){return this.na.VI}GI(){return this.na.UI}get ER(){return this.na.ER}set ER(t){this.na.ER=t}get XI(){return this.zI()}zI(){return this.na.XI}get qI(){return this.YI()}set qI(t){this.KI(t)}YI(){return this.na.qI}KI(t){this.na.KI(t)}get JI(){return this.$I()}$I(){return this.na.JI}get tR(){return this.eR()}set tR(t){this.iR(t)}eR(){return this.na.tR}iR(t){this.na.tR=t}nR(){return this.na.nR()}get rR(){return this.oR()}set rR(t){this.hR(t)}oR(){return this.na.rR}hR(t){this.na.rR=t}get aR(){return this.uR()}uR(){return this.na.aR}get Ma(){return this.na.Ma}set Ma(t){this.na.Ma=t}lR(){return this.na.lR()}get dR(){return this.fR()}fR(){return this.na.dR}get nt(){return this._R()}_R(){return this.na.nt}get vR(){return this.gR()}gR(){return this.na.vR}get rt(){return this.mR()}mR(){return this.na.rt}get pR(){return this.wR()}wR(){return this.na.pR}get yR(){return this.bR()}set yR(t){this.AR(t)}bR(){return this.na.yR}AR(t){this.na.AR(t)}RR(){this.na.RR()}PR(){this.na.PR()}DR(){this.na.DR()}ge(){this.na.ge()}be(){this.na.be()}cs(){return this.na.cs()}IR(){return this.na.IR()}FR(){this.na.FR()}WR(){this.na.WR()}ZR(t){return this.na.ZR(t)}Aa(){this.na.Aa()}iu(){return this.na.iu()}Ca(t,e){return this.na.Ca(t,e)}NR(){return this.na.NR()}GR(t){return!1}RH(){this.Rnt&&this.na._y(this.HR)}CH(){this.Rnt&&this.na.yy(this.HR)}async yn(t){this.Ro(),t||await this.na.yn(),this.CH()}constructor(t,e){super(),this.HR=t=>{this.GR(t)||this._o(t)},this.na=t,this.Rnt=!e,this.RH()}},Hh=function(t){return t[t.au=0]="au",t[t.Cnt=1]="Cnt",t[t.Pnt=2]="Pnt",t}({}),SF=df(3,(()=>[]));function zh(t,e){SF[e].push(t)}var hu=function(t){return t[t.Cnt=0]="Cnt",t[t.Dnt=1]="Dnt",t[t.Nnt=2]="Nnt",t[t.aP=3]="aP",t}({}),TF=df(4,(()=>[]));function kF(t,e){TF[e].push(t)}var EF=[];function xF(t){for(const e of EF)e(t)}r();var IF=self.CustomEvent;var RF=function(){try{const t=new IF("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,e){return new CustomEvent(t,e)}:function(t,e){const i=h.createEvent("CustomEvent");return i.initCustomEvent(t,(null==e?void 0:e.bubbles)||!1,(null==e?void 0:e.cancelable)||!1,null==e?void 0:e.detail),i};r();var CF=new class{get V(){return this.zO.length}get wa(){var t;return null!=(t=this.eu)?t:this.eu=function(t){const e=[];for(let i=0;i<t.V;i++)e[i]=t.wC(i).wa;return e.getPlayerByUID=e=>{const i=t.Mnt(e);return i&&i.wa},e}(this)}wC(t){return this.zO[t]}x$(t){this.zO.push(t),this.wa.push(t.wa)}rT(t){const e=this.zO.indexOf(t);e<0||(wa(this.zO,e),this.eu&&wa(this.eu,e))}Mnt(t){for(const e of this.zO)if(e.OC===t)return e}constructor(){this.zO=[],this.eu=void 0}};function PF(t){let e,i;const s=e=>{i=e;const s=nc(e,t.kd);t.Ca(s)},n={get abr(){return t.snt.wa},get ads(){var e;return null==(e=t.zc)?void 0:e.wa},get audioTracks(){return t.ht.wa},get autoplay(){return t.KO},set autoplay(e){t.KO=Boolean(e)},get buffered(){return t.TI()},get canvas(){return t.gnt.wa},get cast(){var e;return null==(e=t.rq)?void 0:e.wa},get clip(){return t.lnt.wa},get currentProgramDateTime(){var e;return null!=(e=t.kI)?e:null},set currentProgramDateTime(e){t.kI=null!=e?e:void 0},get currentTime(){return t.CI()},set currentTime(e){t.DI(Number(e))},get duration(){return t.jd()},get element(){return t.we},get ended(){return t.MI},get error(){return t.BI()},get errorObject(){return t.FI()},get loop(){return t.MQ.MQ},set loop(e){t.MQ.MQ=Boolean(e)},get metrics(){return t.XI.wa},get muted(){return t.qI},set muted(e){t.KI(e)},get network(){return t.Sz.wa},get paused(){return t.JI},get playbackRate(){return t.tR},set playbackRate(e){const i=Number(e);if(i<0)throw new RangeError("playbackRate must be a positive number");t.tR=i},get played(){return t.nR()},get poster(){return t.mi},set poster(e){t.mi=os(e)},get preload(){return t.rR},set preload(e){t.rR=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(e)},get presentation(){return t.vnt.wa},get readyState(){return t.aR},get seekable(){return t.lR()},get seeking(){return t.dR},get source(){return i},set source(t){s(t)},get src(){return WC(t.iu())},set src(t){s({sources:t})},get textTracks(){return t.nt.wa},get textTrackStyle(){return t.Wl.wa},get theoLive(){return t.knt},get uid(){return t.OC},get videoHeight(){return t.vR},get videoTracks(){return t.rt.wa},get videoWidth(){return t.pR},get visibility(){return t.No.wa},get volume(){return t.yR},set volume(e){t.AR(Number(e))},get latency(){return t.SR.wa},get theoads(){return t.xnt},get millicast(){return t.UI.wa},destroy(){t.yn(),t=null,i=void 0},play(){t.Lnt()},pause(){t.PR()},stop(){i=void 0,t.NR()},prepareWithUserAction(){t.RR()},addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)},setSource(t){s(t)},addTextTrack:e=>t.ZR(function(t){return{Lt:os(t.kind),Ch:os(t.label),gs:os(t.language),zw:os(t.type)}}(e)).wa};return e=new lc(n,!0),e.ru(t),e.bn("destroy",(()=>{e.yn()})),n}r(),r(),r(),r();var DF=class extends me{constructor(t){super(ns.uo),this.source=t}};r();var NF=class extends en{get kI(){}set kI(t){}get RI(){return this.CI()}set RI(t){this.DI(t)}CI(){return this.OH}dnt(){return this.CI()}DI(t,e){this.FH&&this.OH===t||(this.OH=t,this.FH=!0,this._o(new Al(this.OH)))}get JI(){return this.WH}get tR(){return this.UH}set tR(t){this.UH!==t&&(this.UH=t,this._o(new ga(this.OH,this.tR)))}get aR(){return Wt.TO}get dR(){return this.FH}DR(){this.WH&&(this.WH=!1,this._o(new he(this.OH)),this._o(new Pa(this.OH)))}PR(){this.WH||(this.WH=!0,this._o(new rl(this.OH,this.kI)),this._o(new nl(this.OH)))}nr(){this.OH=0,this.FH=!1,this.UH=1,this.PR()}yn(){this.Ro()}be(){}ge(){}constructor(){super(),this.OH=0,this.WH=!0,this.FH=!1,this.UH=1}};r();var MF={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},LF={visibility:"hidden"},BF={visibility:"visible"},OF=class{get Xu(){return void 0!==this.Bnt?this.Bnt:void 0!==this.Ont?this.Ont:void 0}set Fnt(t){this.Ont=t,this.ir()}ir(){const t=this.na.JI,e=this.Vnt;this.Xu?this.Vs.style.backgroundImage='url("'+cm(this.Xu)+'")':this.Vs.style.backgroundImage="",t&&this.Xu&&!e?this.ge():this.be()}ge(){Nd(LF,this.na.we),Nd(BF,this.Vs)}be(){Nd(LF,this.Vs),Nd(BF,this.na.we)}RH(){this.na.bn(ns.uo,this.Wnt),this.na.bn(ns.ho,this.aU)}yn(){this.na.vn(ns.uo,this.Wnt),this.na.vn(ns.ho,this.aU),We(this.Vs)}constructor(t){this.Vnt=!1,this.Wnt=t=>{var e;this.Vnt=!this.na.JI,this.Bnt=null==(e=t.source)?void 0:e.poster,this.ir()},this.aU=()=>{this.Vnt=!0,this.be()},this.na=t,this.RH(),this.Vs=function(){const t=s&&s.document&&s.document.createElement("div");return t.className="theoplayer-poster",Nd(MF,t),t}(),t.we.appendChild(this.Vs)}};r(),r(),r(),r();var FF=function(t){return t[t.Unt=0]="Unt",t[t.Gnt=1]="Gnt",t}({});function Ve(t){let e;const i={get playing(){return t.Vc},get currentAds(){return t.Znt.map((t=>t.Hnt()))},get currentAdBreak(){var e,i;return null!=(i=null==(e=t.Xnt)?void 0:e.Hnt())?i:null},get scheduledAds(){return t.znt.map((t=>t.Hnt()))},get scheduledAdBreaks(){return t.qnt.map((t=>t.Hnt()))},skip(){t.zD()},skipAdBreak(e){t.Ynt(null!=e?e:void 0)},schedule(e){const i=KC(e,Ch.Vm);i?t.K6(i,FF.Unt,!1):console.error("Invalid ad description")},registerServerSideIntegration(e,i){t.Knt(e,i)},addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)}};return e=new lt(t,i),i}var VF=class extends en{get Vc(){return!!this.Oc&&this.Oc.Vc}get Znt(){return this.Oc?this.Oc.Znt:[]}get Xnt(){return this.Oc?this.Oc.Xnt:null}get znt(){return this.Oc?this.Oc.znt:[]}get qnt(){return this.Oc?this.Oc.qnt:[]}K6(t,e,i){var s;null==(s=this.Oc)||s.K6(t,e,i)}jnt(t){var e;null==(e=this.Oc)||e.jnt(t)}zD(){var t;null==(t=this.Oc)||t.zD()}Ynt(t){var e;null==(e=this.Oc)||e.Ynt(t)}Qnt(t){var e;null==(e=this.Oc)||e.Qnt(t)}Knt(t,e){var i;null==(i=this.Oc)||i.Knt(t,e)}get wa(){var t;return null!=(t=this.eu)?t:this.eu=Ve(this)}async yn(t){this.Ro(),void 0!==this.Oc&&(this.Oc.yy(this.Ds),t||await this.Oc.yn(),this.Oc=void 0)}constructor(t){var e;super(),this.eu=void 0,this.Oc=t,null==(e=this.Oc)||e._y(this.Ds)}};r(),r();var ws=class extends $s{constructor(t,e){super(t),this.sd=e}},Ss=class extends me{get ad(){return this.adBreak}constructor(t,e){super(t),this.adBreak=e}},Pu=class extends ws{ka(){return new WF(this.sd.Hnt())}constructor(t){super("Jnt",t)}},WF=class extends Ss{constructor(t){super("removeadbreak",t)}};r();var UF=class extends ws{ka(){return new GF(this.sd.Hnt())}constructor(t){super("$nt",t)}},GF=class extends Ss{constructor(t){super("addadbreak",t)}};r(),r();var Ha=class extends $s{constructor(t,e){super(t),this.trt=e}},Wa=class extends me{constructor(t,e){super(t),this.ad=e}},Uu=class extends Ha{ka(){return new ZF(this.trt.Hnt())}constructor(t){super("ert",t)}},ZF=class extends Wa{constructor(t){super("addad",t)}};r();var $h=class extends ws{ka(){return new HF(this.sd.Hnt())}constructor(t){super("irt",t)}},HF=class extends Ss{constructor(t){super("adbreakend",t)}};r();var XF=class extends ws{ka(){return new zF(this.sd.Hnt())}constructor(t){super("nrt",t)}},zF=class extends Ss{constructor(t){super("adbreakbegin",t)}};r();var Cn=class extends Ha{ka(){return new qF(this.trt.Hnt(),this.currentTime)}constructor(t,e){super("rrt",t),this.currentTime=e}},qF=class extends Wa{constructor(t,e){super("adbegin",t),this.currentTime=e}};r();var Qn=class extends Ha{ka(){return new YF(this.trt.Hnt(),this.currentTime)}constructor(t,e){super("ort",t),this.currentTime=e}},YF=class extends Wa{constructor(t,e){super("adend",t),this.currentTime=e}};r();var un=class extends $s{ka(){return new KF}constructor(){super("hrt")}},KF=class extends me{constructor(){super("adadded")}},jF=class extends VF{get bC(){return this.Oc}set bC(t){const e=this.Oc;if(e===t)return;const i=this.Znt,s=this.Xnt,n=this.znt,r=this.qnt;null==e||e.yy(this.Ds),this.Oc=t,null==t||t._y(this.Ds);const o=this.Znt,h=this.Xnt,a=this.znt,u=this.qnt,c=[];let l=!1;for(const t of r)fh(u,t)||c.push(new Pu(t));for(const t of u)fh(r,t)||c.push(new UF(t));for(const t of a)fh(n,t)||(c.push(new Uu(t)),l=!0);l&&c.push(new un),s!==h&&(s&&c.push(new $h(s)),h&&c.push(new XF(h)));for(const t of i)fh(o,t)||c.push(new Qn(t,this.na.CI()));for(const t of o)fh(i,t)||c.push(new Cn(t,this.na.CI()));for(const t of c)this._o(t)}constructor(t){super(void 0),this.na=t}};r(),r();var QF=class extends en{get wa(){var t;return null!=(t=this.eu)?t:this.eu=Ve(this)}Qnt(t){}Knt(t,e){}K6(t,e,i){}zD(){}Ynt(t){}jnt(t){}yn(){return this.Ro(),Promise.resolve()}constructor(...t){super(...t),this.Vc=!1,this.Xnt=null,this.Znt=[],this.qnt=[],this.znt=[],this.eu=void 0}},JF=class extends QF{K6(t,e,i){this.art.push({urt:t,crt:e,lrt:i})}zD(){}Qnt(t){}Knt(t,e){this.drt.push({vP:t,frt:e})}jnt(t){const e=this.drt.slice(),i=this.art.slice();this.nr();for(const i of e)t.Knt(i.vP,i.frt);for(const e of i)t.K6(e.urt,e.crt,e.lrt)}_rt(){const t=this.art.map((t=>t.urt));return this.nr(),t}nr(){En(this.drt),En(this.art)}async yn(){this.nr(),await super.yn()}constructor(...t){super(...t),this.drt=[],this.art=[]}};r();var $F=class extends me{constructor(t){super("tizen2retry"),this.originalErrorEvent=t}};var tV=Wd((()=>{let t=AF;t=function(t){return class extends gc{constructor(e,i){let s=new t(e,i);for(const t of TF)for(const e of t)s=e(s);super(s)}}}(t);let e=function(t){return class extends en{get pnt(){return this.vrt.pnt}get zc(){return this.Oc}get gnt(){return this.vrt.gnt}get kd(){return this.vrt.kd}get mI(){return this.vrt.mI}get Sa(){return this.vrt.Sa}get WZ(){return this.vrt.WZ}get vnt(){return this.vrt.vnt}get ant(){return this.vrt.ant}get Ta(){return this.vrt.Ta}get snt(){return this.vrt.snt}get KO(){return this.vrt.KO}set KO(t){this.vrt.KO=t,this.grt()}get rnt(){return this.vrt.rnt}get ht(){return this.vrt.ht}get rq(){return this.vrt.rq}get Hu(){return this.vrt.ant}get wa(){return this.eu||(this.eu=this.ka()),this.eu}get VI(){return this.vrt.VI}get UI(){return this.vrt.UI}get ER(){return this.vrt.ER}set ER(t){this.vrt.ER=t}get XI(){return this.vrt.XI}get Sz(){return this.vrt.Sz}get nt(){return this.vrt.nt}get Wl(){return this.vrt.Wl}get rt(){return this.vrt.rt}get lnt(){return this.vrt.lnt}get MQ(){return this.vrt.MQ}get kI(){return this.na.kI}set kI(t){this.na.kI=t}get bt(){return this.vrt.bt}get we(){return this.vrt.we}get MI(){return this.vrt.MI}get qI(){return this.vrt.qI}set qI(t){this.KI(t)}get JI(){return this.na.JI}get mi(){return this.mrt.Xu||""}set mi(t){this.mrt.Fnt=t}get tR(){return this.eR()}set tR(t){this.iR(t)}eR(){return this.vrt.tR}iR(t){this.na.tR=t}get rR(){return this.vrt.rR}set rR(t){this.vrt.rR=t}get aR(){return this.na.aR}get Ma(){return this.vrt.Ma}set Ma(t){this.vrt.Ma=t}get dR(){return this.na.dR}get knt(){return this.vrt.knt}get xnt(){return this.vrt.xnt}get OC(){return this.vrt.OC}get vR(){return this.vrt.vR}get pR(){return this.vrt.pR}get yR(){return this.vrt.yR}set yR(t){this.AR(t)}get SR(){return this.vrt.SR}get fnt(){return this.vrt.fnt}get No(){return this.vrt.No}async Qo(t,e){return this.Yo.Qo(t,e).catch(vf)}async prt(t,e){Io(e),this.vrt._y(this.wrt);try{await this.vrt.Ca(t,e)}finally{this.vrt.yy(this.wrt)}}async grt(){const t=await this.yrt();this.brt(t)}async yrt(){const t=this.iu();return t&&!BC(t)&&this.KO&&this.JI?this.rnt.ij(this.qI):"none"}brt(t){var e;const i=(null==(e=this.iu())?void 0:e.mutedAutoplay)||this.kd.mutedAutoplay;switch(t){case"all":this.Lnt();break;case"muted":(this.qI||i===ak.ALL)&&(this.qI=!0,this.DR())}}Ca(t){BC(this.PH)||this._o(new $t(0,Wt.TO)),this.nr(),this.PH=t,uh(this.Qo((async e=>{Io(e);try{await this.prt(t,e)}catch(t){return ih(t),this.PH=void 0,void this.uH(hb(t,Ci.SOURCE_NOT_SUPPORTED))}finally{this.Art(this.vrt)}const i=await this.yrt();this._o(new DF(this.iu())),this.brt(i)})))}DI(t,e){this.na.DI(t,e)}BI(){var t;return null!=(t=this.QH)?t:this.vrt.BI()}FI(){var t;return null!=(t=this.bZ)?t:this.vrt.FI()}uH(t){void 0===this.FI()&&(this.bZ=t,this.QH=Zs(t),this._o(new Pi(t)))}DR(){this.na.DR()}Lnt(){this.qI||this.RR(),this.DR()}RR(){this.vrt.RR()}PR(){this.na.PR()}NR(){this.Ca(void 0)}ge(){this.LH=!0,this.na.ge()}be(){this.LH=!1,this.na.be()}Aa(){this.vrt.Aa()}AR(t){this.vrt.AR(t)}KI(t){this.vrt.KI(t)}Pa(t){this.Srt=t,t.x$(this)}cs(){return this.vrt.cs()}iu(){return this.PH}IR(){return this.vrt.IR()}CI(){return this.na.CI()}dnt(){return this.na.dnt()}jd(){return this.vrt.jd()}TI(){return this.vrt.TI()}nR(){return this.vrt.nR()}lR(){return this.vrt.lR()}FR(){this.vrt.FR()}WR(){this.vrt.WR()}ZR(t){return this.vrt.ZR(t)}nr(){this.PH=void 0,this.bZ=void 0,this.QH=void 0,this.Trt=!0,En(this.krt),this.Ert.nr(),this.Art(this.Ert),this.Yo.np(),uh(this.Yo.Qo((async t=>{Io(t),await this.vrt.NR()})))}yn(){this._o(new bF),this.mrt.yn(),this.CH(),this.nr(),uh(this.Qo((async()=>{await this.vrt.yn(),this.Srt&&(this.Srt.rT(this),this.Srt=void 0),this.Yo.yn()}))),this.Ro()}Art(t){if(this.na===t)return;const e=this.na.JI,i=this.na.CI(),s=this.na.tR,n=this.na.aR,r=this.na.dR;this.xrt=e,this.ott=n,this.CH(),t._y(this.Irt),t===this.vrt?(void 0!==this.Oc&&(this.Oc.bC=t.zc,this.Rrt.jnt(this.Oc)),(r||t.CI()!==i)&&t.DI(i),t.tR!==s&&(t.tR=s),e?t.PR():t.DR()):(void 0!==this.Oc&&(this.Oc.bC=this.Rrt,this.Rrt.nr()),this.kd.retainPlaybackRateOnSourceChange?t.tR=s:1!==s&&this._o(new ga(this.CI(),1))),t.yy(this.Irt),this.na=t,this.RH();for(const t of this.krt)this._o(t);En(this.krt),this.LH?t.ge():t.be()}RH(){this.na._y(this.UR)}CH(){this.na.yy(this.UR)}ka(){return PF(this)}constructor(e,i){super(),this.xrt=!0,this.ott=Wt.TO,this.Trt=!1,this.PH=void 0,this.bZ=void 0,this.QH=void 0,this.wrt=t=>{t.type!==ns.Qy&&this.krt.push(t)},this.Irt=t=>{(t.type!==ns.ho||this.na.JI)&&(t.type===ns.Ky&&this.na.JI||t.type===ns.ib&&this.na.dR&&this.na.CI()===t.currentTime||t.type===ns.Qy&&this.na.tR===t.playbackRate||this._o(t))},this.UR=t=>{if(this.Trt){if(t.type===Zc.aB)return;t.type!==Zc.nB&&t.type!==Zc.uB||(this.Trt=!1)}if(t.type===ns.ho){if(!this.xrt)return;this.xrt=!1}else if(t.type===ns.Ky){if(this.xrt)return;this.xrt=!0}else if(t.type===Zc.aC){if(this.ott===t.readyState)return;this.ott=t.readyState}else if(t.type===ns.Py)return;this._o(t)},this.vrt=new t(e,i),this.Ert=new NF,this.na=this.vrt,this.mrt=new OF(this),this.vrt.zc&&(this.Oc=new jF(this),this.Oc.bC=this.vrt.zc,this.Rrt=new JF),this.Yo=new dc,this.krt=[],this.LH=!0,this.RH()}}}(t);return Ya.Rg&&Ya.Pg<3&&(e=function(t){return class extends t{Ca(t){this.Crt=0,super.Ca(t)}_o(t){if(t.type===bo.fa&&this.Crt<3)return this.Crt++,super._o(new $F(t)),void super.Ca(this.iu());super._o(t)}constructor(...t){super(...t),this.Crt=0}}}(e)),e=function(t){let e=t;for(const t of SF)for(const i of t)e=i(e);return e}(e),e}));function eV(t,e){const i=ck(e),s=new(tV())(t,i);s.Ma=s;let n=s.wa;return s.Aa(),s.Pa(CF),w.defineProperty(n,"constructor",{value:eV}),n=rS(n),xF(s),n}mi((()=>{self.dispatchEvent&&self.dispatchEvent(RF("theoplayerready"))})),r();var iV={base64:new class{encode(t){return na(t)}decode(t){return Yu(t)}}};r();var sV=JSON.parse('["hbbtv","dash","hesp","millicast","hls","chromecast","ads","theoads","airplay","spotx","vr","cache","webaudio","youbora","mediamelon","moat","google-dai","streamone","lcevc","freewheel","agama","uplynk","mediatailor","ui","relatedcontent","social","upnext","contextmenu","texttrackstyle-ui","activequalitylabel","upcomingadnotification"]');r(),r(),r();var nV=class{get RI(){const t=this.na.currentTime;return isFinite(t)?t:"now"}get Prt(){return this.na.src||""}nr(){}constructor(t,e){this.Drt=!1,this.Nrt=t=>{this.Mrt.PY(t.error,this.RI)},this.Lrt=()=>{this.Mrt.xY(this.Prt),this.na.removeEventListener("playing",this.Lrt),this.Drt=!1},this.js=()=>{var t,e,i,s;this.Drt||(this.na.addEventListener("playing",this.Lrt),this.Drt=!0),null==(t=this.na.ads)||t.removeEventListener("adbegin",this.Brt),null==(e=this.na.theoads)||e.removeEventListener("interstitialbegin",this.Ort);var n,r;(null==(s=this.na.source)||null==(i=s.ads)?void 0:i.some((t=>"theoads"===t.integration)))&&(null==(n=this.na.ads)||n.addEventListener("adbegin",this.Brt),null==(r=this.na.theoads)||r.addEventListener("interstitialbegin",this.Ort))},this.Brt=t=>{"theoads"!==t.ad.integration||t.ad.isSlate||this.Mrt.CY("ad")},this.Ort=t=>{const e=t.interstitial;(function(t){return"adbreak"===t.type})(e)||this.Mrt.CY(function(t){switch(t){case"adbreak":default:return"ad";case"overlay":return"overlay"}}(e.type))},this.Mrt=e,this.na=t,this.na.addEventListener("error",this.Nrt),this.na.addEventListener("sourcechange",this.js),this.js()}};!function(t){EF.push(t)}((function(t){new nV(t.wa,t.pnt)})),r();var rV="theoplayer-stored-volume",oV="theoplayer-stored-mutedstate";zh((function(t){return class extends t{KI(t){this.kd.persistVolume&&ka.Wb(oV,""+Boolean(t)),super.KI(t)}AR(t){this.kd.persistVolume&&ka.Wb(rV,""+Number(t)),super.AR(t)}constructor(t,e){if(super(t,e),e.persistVolume){let t=ka.eJ(rV);(void 0===t||S(t))&&(t=1);const e=ka.iJ(oV)||!1;this.yR=t,this.qI=e}}}}),Hh.au);var hV="9.7.0",aV=CF.wa,uV=$S.TP.registerContentProtectionIntegration.bind($S.TP);r(),r();Ya.Lg&&Ya.Og?cD(class{ij(t){return Promise.resolve("all")}RR(){}yn(){}}):cD(aD),r(),r(),r(),r();var cV=class{async dH(t){return YT(t.type)}async fH(t){return!!await AT(t,!0)}},lV=class extends cV{async dH(t){return!!d_(t.useManagedMediaSource)&&super.dH(t)}};function dV(t){return oN(t)}function fV(t){const e=Ya.Ng||Ya.Rg,i=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some((t=>"ac-3"===t||"ec-3"===t)),s=e&&!i,n=new l_(!0);return async t=>{const e=t.Fk;if(!n.Up(e)&&!function(t,e){return!!t&&(Xh(t)?Nx(e)||Lx(e):Xa(t,ba.APPLICATION_TTML_XML)||Xa(t,ba.TEXT_VTT)||Xa(t,ba.IMAGE_JPEG))}(t.SY,t.Frt))return!1;const i=t.Frt.some((t=>"ac-3"===t||"ec-3"===t));if(s&&i)return!1;if(t.$G){const i=t.$G,s=Ye(i,(t=>sm(t.G9))).filter(ol),n=await async function(t,e){for(const i of t)if(await e(i))return!0;return!1}(s,(t=>As.yw(t,e)));if(!n)return!1}return!0}}r(),r(),r(),r();var _V=class{get Ti(){return this.Vrt.offsetHeight*As.Ys.pp}get ji(){return this.Vrt.offsetWidth*As.Ys.pp}constructor(t){this.Vrt=t}};r();var wl=class{get nt(){return this.Hl}ZR(t,e,i,s,n,r,o,h){const a=new Is(t,e,i,s,n,r,o,void 0,h);return this.Hl.tt(a),this.i7.tt(a),a}ZW(t){this.Hl.it(t),this.i7.it(t),t.yn()}UZ(t){const e=new mB(t.Lt,t.Ch,t.gs);return this.Hl.tt(e),this.i7.tt(e),e}nr(){for(const t of this.Hl.mC.slice())t.yn();this.Hl.nr(),this.i7.nr()}yn(){this.nr(),this.Hl.yn(),this.i7.yn()}constructor(t,e){this.Hl=new ca,this.i7=new qL(t,e)}};r(),r();var vV=class{lH(t){return this.eZ.lH(t)}Bst(t){return this.eZ.Bst(t)}qZ(t){return this.eZ.qZ(t)}constructor(t){this.eZ=t}};function gV(t){return class extends t{get SZ(){return this.aO.SZ}}}r(),r(),r(),r(),r();var mV=class{get kd(){return this.yT()}yT(){return this.kZ.kd}get cR(){return this.lR()}lR(){return this.kZ.cR}ZJ(t){return this.kZ.ZJ(t)}XJ(t){return this.kZ.XJ(t)}Km(){return Promise.resolve()}constructor(t){this.kZ=t}},pV=class extends mV{get d4(){return this.H4}get f4(){return this.X4}get SI(){return this.TI()}TI(){return this.kZ.SI}get ct(){return this.jd()}jd(){return this.kZ.ct}get r$(){return this.Wrt()}Wrt(){return this.kZ.r$}q4(t){this.kZ.q4(t)}Q4(t,e,i,s){this.kZ.Q4(t,e,i,s)}Y3(){this.kZ.Y3()}V3(){this.kZ.V3()}Km(){return this.H4&&(this.H4.Km(),this.H4=void 0),this.X4&&(this.X4.Km(),this.X4=void 0),super.Km()}Urt(t){this.kZ=t,this.H4?t.d4?this.H4.Grt(t.d4):(this.H4.Km(),this.H4=void 0):t.d4&&(this.H4=this.Zrt(t.d4),this.H4.bn(aN,this.Hrt)),this.X4?t.f4?this.X4.Grt(t.f4):(this.X4.Km(),this.X4=void 0):t.f4&&(this.X4=this.Zrt(t.f4),this.X4.bn(aN,this.Hrt))}qJ(t){this.kZ.qJ(t)}Xrt(t){}constructor(t){super(t),this.H4=void 0,this.X4=void 0,this.Hrt=t=>this.Xrt(t)}};r(),r(),r();var wV=class extends So{get sQ(){return this.lQ}set sQ(t){this.lQ=t}get SI(){return ee.WB()}get kd(){return this.FT}get j3(){return Fo.oE}get J3(){return ee.WB()}get zrt(){return!1}get $j(){return this.aQ}set $j(t){this.aQ=t}r3(t,e,i){return Promise.reject(new m("Invalid media buffer"))}n4(){return Promise.reject(new m("Invalid media buffer"))}a3(t,e,i){return Promise.reject(new m("Invalid media buffer"))}r$(){return!1}Y3(){}i4(t,e){}s4(t,e){}rT(t,e,i){return Promise.resolve()}T3(t,e){return Promise.reject(new m("Invalid media buffer"))}nF(t,e){return Promise.reject(new m("Invalid media buffer"))}ZJ(t){return!1}XJ(t){return Promise.reject(new m("Invalid media buffer"))}Km(){this.Ro()}constructor(t){super(),this.aQ=0,this.lQ=0,this.FT=t}},yV=class extends So{get sQ(){return this.qrt()}set sQ(t){this.Yrt(t)}qrt(){return this.Krt.sQ}Yrt(t){this.Krt.sQ=t}get SI(){return this.TI()}TI(){return this.Krt.SI}get kd(){return this.yT()}yT(){return this.Krt.kd}get j3(){return this.Krt.j3}get J3(){return this.jrt()}jrt(){return this.Krt.J3}get $j(){return this.Qrt()}set $j(t){this.Jrt(t)}Qrt(){return this.Krt.$j}Jrt(t){this.Krt.$j=t}r3(t,e,i){return this.Krt.r3(t,e,i)}n4(){return this.Krt.n4()}a3(t,e,i){return this.Krt.a3(t,e,i)}i4(t,e){this.Krt.i4(t,e)}s4(t,e){this.Krt.s4(t,e)}rT(t,e,i){return this.Krt.rT(t,e,i)}T3(t,e){return this.Krt.T3(t,e)}ZJ(t){return this.Krt.ZJ(t)}XJ(t){return this.Krt.XJ(t)}UR(t){this._o(t)}Km(){this.Ro(),this.Grt(new wV(this.kd))}Grt(t){this.Krt.vn(aN,this.$rt),this.Krt=t,this.Krt.bn(aN,this.$rt)}constructor(t){super(),this.$rt=t=>this.UR(t),this.Krt=t,this.Krt.bn(aN,this.$rt)}},bV=class extends yV{get Dst(){return this.aO}set Dst(t){this.aO=t}async r3(t,e,i){return Io(i),await this.tot(this.aO.RI,null==e?void 0:e.$it,null==e?void 0:e.ct),Io(i),t.zw===To.Ik?await this.eot(t,e,i):await this.iot(t,e,i)}async eot(t,e,i){let s=t;for(;;){const[t,n]=Vb(s.$k);s={zw:To.Ik,$k:t};try{return await this.rot(s,e,i),void n.cancel(new vt).catch(M)}catch(t){if(ac(t)){if(await this.tot(this.aO.RI,e.$it,e.ct,i)){s={zw:To.Ik,$k:n};continue}}throw n.cancel(t).catch(M),t}}}async iot(t,e,i){for(;;)try{return Io(i),await this.rot(t,e,i)}catch(t){if(ac(t)){if(await this.tot(this.aO.RI,e.$it,e.ct,i))continue}throw t}}async tot(t,e,i,s){const n=TD(t,e,i,this.SI,this.$j,this.sQ);for(const[t,e]of n)await this.oot(t,e,s);return n.length>0}rot(t,e,i){return super.r3(t,e,i)}oot(t,e,i){return super.rT(t,e,i)}constructor(t){super(t),this.aO=void 0}},AV=class extends pV{get Dst(){return this.aO}set Dst(t){this.aO=t,this.H4&&(this.H4.Dst=t),this.X4&&(this.X4.Dst=t)}Zrt(t){const e=new bV(t);return e.Dst=this.aO,e}constructor(t){super(t),this.aO=void 0,this.Urt(t)}};r();var SV=class extends mV{get rR(){return this.kZ.rR}set rR(t){this.kZ.rR=t}};function _l(t){return class extends t{get SZ(){return this.aO.SZ}get pR(){return this.aO.pR}get vR(){return this.aO.vR}IR(){return this.aO.IR()}}}r(),r(),r();var TV=class extends So{get hot(){return this.aO}get SI(){return this.TI()}TI(){return this.aO.SI}get kI(){return this.EI()}EI(){return this.aO.kI}get RI(){return this.CI()}CI(){return this.aO.RI}get Hu(){return this.aO.Hu}get ct(){return this.jd()}jd(){return this.aO.ct}get EZ(){return this.aot()}aot(){return this.aO.EZ}get MI(){return this.uot()}uot(){return this.aO.MI}get lt(){return this.aO.lt}get Ti(){return this.aO.Ti}get ji(){return this.aO.ji}get Sa(){return this.xR()}xR(){return this.aO.Sa}get WZ(){return this.ja()}ja(){return this.aO.WZ}get qI(){return this.aO.qI}set qI(t){this.aO.qI=t}get JI(){return this.cot()}cot(){return this.aO.JI}get tR(){return this.aO.tR}set tR(t){this.aO.tR=t}get sR(){return this.nR()}nR(){return this.aO.sR}get aR(){return this.uR()}uR(){return this.aO.aR}get cR(){return this.lR()}lR(){return this.aO.cR}get dR(){return this.fR()}fR(){return this.aO.dR}get f5(){return this.lot()}lot(){return this.aO.f5}get T5(){return this.dot()}dot(){return this.aO.T5}get nt(){return this._R()}_R(){return this.fot}get Wl(){return this.Dtt()}Dtt(){return this.aO.Wl}get A8(){return this.aO.A8}get yR(){return this.aO.yR}set yR(t){this.aO.yR=t}get ttt(){return this.aO.ttt}get ZI(){return this.aO.ZI}get vO(){return this.aO.vO}get zZ(){return this._ot()}set zZ(t){this.vot(t)}_ot(){return this.aO.zZ}vot(t){this.aO.zZ=t}get ntt(){return this.aO.ntt}set ntt(t){this.got(t)}got(t){this.aO.ntt=t}get V9(){return this.mot()}mot(){return this.aO.V9}zI(){return this.aO.zI()}DR(){return this.aO.DR()}PR(){this.aO.PR()}Db(t,e,i){this.aO.Db(t,e,i)}wZ(t){this.aO.wZ(t)}ge(){this.aO.ge()}be(){this.aO.be()}ZR(t,e,i,s,n,r,o,h){return this.aO.ZR(t,e,i,s,n,r,o,h)}UZ(t){return this.aO.UZ(t)}BZ(){return this.aO.BZ()}FZ(t,e,i,s,n){return this.aO.FZ(t,e,i,s,n)}ZW(t){this.aO.ZW(t)}GZ(){this.aO.GZ()}l$(t){return this.aO.l$(t)}async $n(t){const e=await this.aO.$n(t);let i;return i=t.zw===De.zW?this.pot(e):this.wot(e),this.kZ=i,i}async nr(){this.kZ&&(await this.kZ.Km(),this.kZ=void 0),await this.aO.nr()}Q7(){this.aO.Q7()}J7(){this.aO.J7()}async Km(){this.Ro(),this.aO.vn(nN,this.yot),this.fot.bC=void 0,this.fot.yn(),this.kZ&&(await this.kZ.Km(),this.kZ=void 0)}itt(){this.aO.itt()}bot(t){this.aO.vn(nN,this.yot),this.aO=t,this.fot.bC=t.nt,this.aO.bn(nN,this.yot)}UR(t){this._o(t)}constructor(t){super(),this.kZ=void 0,this.fot=new yt,this.yot=t=>this.UR(t),this.aO=t,this.fot.bC=t.nt,this.aO.bn(nN,this.yot)}},kV=class extends TV{get hot(){return this.aO}get SZ(){return this.aO.SZ}get y5(){return this.aO.y5}get ER(){return this.aO.ER}set ER(t){this.aO.ER=t}stt(t){this.aO.stt(t)}FR(){this.aO.FR()}constructor(t){super(t)}},EV=class extends kV{wot(t){const e=new AV(t);return e.Dst=this,e}pot(t){return new SV(t)}},xV=class extends(gV(EV)){constructor(t){super(t)}},IV=class extends(_l(EV)){constructor(t){super(t)}},St=class extends vV{lH(t){return t===Fo.yE?new IV(super.lH(t)):t===Fo.wE?new xV(super.lH(t)):void 0}async qZ(t){const e=t;await e.Km(),await super.qZ(e.hot)}};r();var RV=class{Aot(){this.na.WR()}yn(){s.removeEventListener("pageshow",this.Sot)}constructor(t){this.Sot=t=>{t.persisted&&this.Aot()},this.na=t,s.addEventListener("pageshow",this.Sot)}};r(),r(),r(),r(),r();var CV=class{Tot(t,e,i){return Promise.resolve()}kot(t,e,i,s){let n=[];if(s){const r={oW:e.lF,hW:e.dF,aW:i.Eot.aW};s.zw===Hr.TTML?n=_x(t,s,r,i.SY):s.zw===Hr.WEBVTT&&(n=CE(t,r,this.xot).L)}return n}nr(){}constructor(t){this.xot=t}};r(),r(),r();var Wc=function(t){return t.dD="vttc",t.Iot="vsid",t.Rot="iden",t.Cot="ctim",t.Pot="sttg",t.Dot="payl",t.Not="vtte",t.Mot="vtta",t}({}),xl=class t{static Lot(e){return Boolean(t.Bot[e])}static cN(e){const i=[],s=ci.KD(new mu(e,new er));for(const e of s)t.Lot(e.zw)&&i.push(t.Bot[e.zw](e.$k));return i}static Oot(e){const i=ci.KD(e),s=Ti(i,Wc.Iot),n=Ti(i,Wc.Rot),r=Ti(i,Wc.Cot),o=Ti(i,Wc.Pot),h=Ti(i,Wc.Dot);return{zw:Wc.dD,Fot:s?t.Vot(s):void 0,Wot:n?t.Uot(n):void 0,Got:r?t.Zot(r):void 0,Hot:o?t.Xot(o):void 0,zot:h?t.qot(h):void 0}}static Vot(t){return{zw:Wc.Iot,Yot:t.WD()}}static Uot(t){return{zw:Wc.Rot,Wot:t.XD()}}static Zot(t){return{zw:Wc.Cot,Kot:t.XD()}}static Xot(t){return{zw:Wc.Pot,jot:t.XD()}}static qot(t){return{zw:Wc.Dot,Qot:t.XD()}}static Jot(t){return{zw:Wc.Not}}static $ot(t){return{zw:Wc.Mot,tht:t.XD()}}};xl.Bot={[Wc.dD]:xl.Oot,[Wc.Not]:xl.Jot,[Wc.Mot]:xl.$ot};var PV=class{Tot(t,e,i){const s=new DataView(t.eht),n=Es.cN(s),r=Do(n,(t=>t.zw===Ai.kP));return r&&(this.iht=r.Z[0].LN.sN.RN),Promise.resolve()}kot(t,e,i){if(S(this.iht))return[];const s=sa(t),n=Es.cN(s),r=Rn(n,Ai.gD),o=Rn(n,Ai.TD);if(!r||0===r.Z.length||!o)return[];const h=function(t,e,i){const s=t.Z[0],n=s.CL?s.CL.CL.toNumber()/i:e.lF,r=[];for(const t of s.RL)r.push(...t.BL);return{sht:n,BL:r}}(r,e,this.iht),a=i.Eot.aW;return function(t,e,i,s){const n=xl.cN(sa(e.$k)),r=t.BL,o=t.sht+s,h=[];let a=0;for(let t=0;t<r.length;t++){const e=r[t],s=n[t];var u;const c=(null!=(u=e.ct)?u:0)/i;let l;s.zw===Wc.dD&&(l=DV(s,a,c,o)),l&&h.push(l),a+=c}return h}(h,o,this.iht,a)}nr(){this.iht=NaN}constructor(){this.iht=NaN}};function DV(t,e,i,s){if(!t.zot)return void 0;const n=t.Got?function(t){return UE(t.Kot,new er(0))}(t.Got):e,r=s+n,o=r+i,h=t.zot.Qot;return new iE(r,o,h,!1)}r(),r();var Iu=function(t){return t[t.aX=0]="aX",t[t.nht=1]="nht",t[t.rht=10]="rht",t[t.oht=11]="oht",t[t.hht=12]="hht",t[t.aht=13]="aht",t[t.uht=14]="uht",t[t.cht=15]="cht",t[t.dht=20]="dht",t[t.fht=21]="fht",t[t._ht=22]="_ht",t[t.vht=23]="vht",t[t.ght=24]="ght",t[t.mht=30]="mht",t[t.pht=31]="pht",t[t.wht=32]="wht",t[t.yht=33]="yht",t[t.bht=34]="bht",t[t.Aht=35]="Aht",t[t.Sht=40]="Sht",t[t.Tht=41]="Tht",t[t.kht=42]="kht",t[t.Eht=43]="Eht",t[t.xht=44]="xht",t[t.Iht=50]="Iht",t[t.Rht=51]="Rht",t[t.Cht=52]="Cht",t[t.Pht=60]="Pht",t[t.Dht=61]="Dht",t[t.Nht=62]="Nht",t[t.Mht=63]="Mht",t[t.Lht=70]="Lht",t[t.Bht=71]="Bht",t[t.Oht=72]="Oht",t[t.Fht=73]="Fht",t[t.Vht=74]="Vht",t[t.Wht=75]="Wht",t[t.Uht=76]="Uht",t[t.Ght=77]="Ght",t[t.Zht=90]="Zht",t[t.Hht=91]="Hht",t}({});function NV(t,e){const i=e.PB(((e,i)=>t.IB(e,i,!1,!1)));return t.AB(i)}function MV(t,e){const i=e.jn(t.pB()).PB(((e,i)=>t.wr(i)));return t.AB(i)}r(),r(),r(),r();var Cs=function(t){return t.Xht="zht",t.qht="Yht",t}({});r();var Qa=class extends dl{constructor(t,e,i){super("Kht"),this.Sn=t,this.Tn=e,this.jht=i}},LV=class extends me{constructor(){super("Qht")}},BV=[ns.ob,ns.ub,ns.sb,ns.Ey],OV=class extends So{get Jht(){var t,e;return(null==(t=this.eat.$ht)?void 0:t.jht)||(null==(e=this.eat.iat)?void 0:e.jht)}get sat(){return this.nat}set rat(t){this.eat.rat=t}get rat(){return this.eat.rat}get Jk(){return this.oat}aat(t){this.oat!==t&&(this.oat=t,this._o(new LV))}get uat(){return this.nat.Ht.uat}get lt(){return this.bZ}async Sn(t){if(!this.dat&&!this.fat)return;const e=this.Ay("Qht");this.dat?(this._at.np(),this._at=new Fi,Ts(this.vat(this._at.ep),this._at)):(this.gat.Zb(void 0),this.gat=new is),await e}get dat(){return"mat"===this.oat}get fat(){return"pat"===this.oat}get wat(){return"yat"===this.oat}get bat(){return"Aat"===this.oat}async NR(t){if(this.wat||this.fat)for(0,this._at.np();!this.dat&&!this.bat;)await this.Ay("Qht")}async nr(t){this.bat?(this.bZ=void 0,this.aat("mat")):await this.NR(t),this.eat.nr(),this.nat.nr()}uH(t){this.bZ=t,this.aat("Aat"),this._o(new Pi(t))}Sat(){this.s8.bn(ns._b,this.pd),this.s8.bn([ns.ib,ns.Wy],this.Ge),this.eat.bn(BV,this.Ds),this.Tat.bn(Cs.Xht,this.pd)}Eat(){this.s8.vn(ns._b,this.pd),this.s8.vn([ns.ib,ns.Wy],this.Ge),this.eat.vn(BV,this.Ds),this.Tat.vn(Cs.Xht,this.pd)}async xat(t){this.Eat(),this.Iat.np(),await this.NR(null!=t?t:Iu.Eht),this.eat.nr()}async Rat(t){this.Sat(),await this.Sn(null!=t?t:Iu.cht)}Cat(t,e,i){if(this.dat)for(const s of t.nat.Pat())s.Dat<=i&&e<=s.Nat&&this.Tat.Mat.some((t=>t.o===s.Lat))&&this.nat.Bat(s)}async yn(){this.Ro(),this.Eat(),this.Iat.np(),await this.NR(Iu.xht),this.eat.yn()}async vat(t){for(;;)try{Io(t),this.aat("yat"),await this.eat.Oat(t),Io(t),this.aat("pat"),await Lu(this.gat.Xb,t)}catch(t){if(Se(t))this.aat("mat");else{const e=t instanceof Z?t:new Z(Ci.MEDIA_LOAD_ERROR,t.message,t);this.uH(e)}break}}async Fat(t){Io(t),await this.NR(Iu.kht),this.eat.nr(),Io(t),await this.Sn(Iu.aht)}constructor(t,e,i,s,n){super(),this.Vat=t,this.Tat=e,this.nat=i,this.eat=s,this.s8=n,this.oat="mat",this.bZ=void 0,this.gat=new is,this.Iat=new Fi,this._at=new Fi,this.Ge=t=>{if(this.dat||this.bat)return;if(!As.lI&&this.eat.Wat(t.currentTime))return;this.Iat.np(),this.Iat=new Fi;Ts(this.Fat(this.Iat.ep),this.Iat).catch(vf)},this.pd=Fd((()=>{if(this.fat){try{this.eat.Uat();if(this.eat.Gat())return}catch(t){if(!(t instanceof Qa))throw t}this.Sn(Iu.uht)}}),250),this.Sat()}};r(),r();var FV=class t{Zat(t,e){return this.Hat(t,!1,e)}Xat(t,e){return this.Hat(t,!0,e)}async Hat(e,i,s){Io(s.ep);const n=await this.zat(e,i,s);return n.Zk?t.qat(n):this.Yat(n)}Yat(t){return t}static qat(t){return t}zat(t,e,i){var s;const n=new Gr({Xu:t.Xu,tE:Te.Ek,iE:t.Kat?{Range:"bytes="+t.Kat[0]+"-"+(null!=(s=t.Kat[1])?s:"")}:void 0,DE:t.DE,EE:Ce.GET,zw:Bn.aE,CE:e?Cu.lE:Cu.oE,PE:this.jat,xE:i.Qat,RE:i.RE,ep:i.ep,BE:i.BE});return this.WW.eE(n)}constructor(t,e){this.WW=t,this.jat=e}};r(),r();var VV=class{Jat(t,e){const i=this.$at**t,s=e*(1-i)+i*this.zit;S(s)||(this.zit=s,this.tut+=t)}eut(){const t=1-this.$at**this.tut;return this.zit/t}constructor(t){this.zit=0,this.tut=0,this.$at=_.exp(_.log(.5)/t)}},WV=class{Jat(t,e){const i=8e3*e/t,s=t/1e3;this.iut+=e,this.sut.Jat(s,i),this.nut.Jat(s,i)}eut(){return this.rut()?_.min(this.sut.eut(),this.nut.eut()):this.out}rut(){return this.iut>=this.hut}constructor(t=2,e=5,i=128e3){this.iut=0,this.out=RR,this.sut=new VV(t),this.nut=new VV(e),this.hut=i}},UV=class{get aut(){return this.uut.eut()}get rut(){return this.uut.rut()}cut(t){const e=t.lut,i=this.fut?t._ut-t.vut:t._ut-t.gut,s=t.mut;!s&&e<this.wut||(s?this.uut.Jat(2*i,e):this.uut.Jat(i,e))}constructor(t,e){this.fut=e,e&&xT(t)?t===Fo.yE?(this.wut=5e3,this.uut=new WV(.05,1,0)):(this.wut=0,this.uut=new WV(.005,.1,0)):(this.wut=16e3,this.uut=new WV)}};r(),r(),r();var GV=class{transform(t,e){this.Jd.write(t).catch(M),e.enqueue(t)}flush(){this.Jd.close().catch(M)}constructor(t){this.Jd=t}},Sl=class{yut(){return new ZV(Ob(this.eht),this.but,this.Aut)}constructor(t,e,i){this.eht=t,this.but=e,this.Aut=i}},ZV=class t{get Ok(){return this.Sut}Bk(t){return zn(this.Sut,t)}Nb(){const[e,i]=Vb(this.Sut);return this.Sut=e,new t(i,this.but,this.Aut)}Tut(){const[e,i]=function(t){const e=new Gh,i=e.writable.getWriter(),s=new Gh(new GV(i));return t.pipeTo(s.writable).catch((t=>{i.abort(t).catch(M)})),[s.readable,e.readable]}(this.Sut);return this.Sut=e,new t(i,this.but,this.Aut)}kut(t){return this.Bk(t).then((t=>new Sl(t,this.but,this.Aut)))}constructor(t,e,i){this.Sut=t,this.but=e,this.Aut=i}};r();var HV=class extends dl{constructor(t,e,i){super(e,i),this.Eut=t}},XV="Cache lookup failed.",zV=class extends So{async xut(t,e){Io(e);const i=await this.Rut.Iut(t.Xu.Xu,t.Xu.Kat);if(Io(e),!i)throw new HV(t,XV);const s=new Sl(i.buffer,i.byteLength,i.reference);return{Eut:t.Eut,Cut:{zw:To.NJ,$k:s},jht:t.jht,Xu:t.Xu}}async Put(t,e){Io(e);const i=await this.Rut.Iut(t.Xu,t.Kat);if(Io(e),!i)throw new HV(t,XV);const s=new Sl(i.buffer,i.byteLength,i.reference);return{zw:To.NJ,$k:s}}yn(){this.Ro()}constructor(t){super(),this.Rut=t}};r();var qV=["hb","fb"],YV=class extends So{async xut(t,e){let i;for(const s of this.Dut)try{return await s.xut(t,e)}catch(t){ih(t),i=t}throw i}async Put(t,e){let i;for(const s of this.Dut)try{return await s.Put(t,e)}catch(t){ih(t),i=t}throw i}yn(){for(const t of this.Dut)t.vn(qV,this.Ds),t.yn()}constructor(t){super(),this.Dut=t;for(const t of this.Dut)t.bn(qV,this.Ds)}};function KV(t){return Vr(t.Nut)}function jV(t){return KV(t)?t.Nut:t.Mut}r(),r(),r(),r();var QV=class extends me{constructor(t,e,i,s,n,r){super(t),this.Lut=e,this.jz=i,this.kL=s,this.VN=n,this.PE=r}},JV=class extends QV{constructor(t,e,i,s,n){super(ns.ob,t,e,i,s,n)}};r(),r();var $V=class{constructor(t,e){this.But=t,this.Out=e}},tW=class extends $V{get lut(){return this.Fut}start(){}transform(t,e){this.Fut+=t.byteLength,e.enqueue(t)}flush(){this.Vut(!1)}np(){this.Vut(!0)}Vut(t){this.But(this.Out,As.Wm(),this.lut,t)}constructor(...t){super(...t),this.Fut=0}},eW=class extends $V{get lut(){return this.Fut}start(){this.Out=As.Wm()}transform(t,e){this.Fut+=t.byteLength,this.Wut||this.Uut(t)&&this.Vut(!1),e.enqueue(t)}flush(){}np(){this.Vut(!0)}Uut(t){const e=this.Gut(t),i=this.Zut(e);return Boolean(Do(i,iW))}Gut(t){return this.Hut&&void 0!==this.Xut?(this.Hut=gu([this.Hut,t]),new mu(sa(this.Hut),new er(this.Xut))):(this.Hut=t,new mu(sa(t),new er))}Zut(t){const e=ci.jD(t.$k,t.BD,!0);return e.QD?(this.Hut=void 0,this.Xut=void 0):this.Xut=t.BD.nc,e.m}Vut(t){this.Wut||(this.But(this.Out,As.Wm(),this.lut,t),this.Wut=!0)}constructor(...t){super(...t),this.Fut=0,this.Wut=!1}};function iW(t){return t.zw===Ai.TD}var sW=class{zut(t){const e=t.nE?this.qut:As.Wm(),i=this.Yut(e),s=new Gh(i),n=t.Ok().pipeTo(s.writable).then((()=>({XI:{lut:i.lut}})),(t=>{throw i.np(),t}));return this.Kut.rp(n),s.readable}jut(t){const e=t.nE?this.qut:As.Wm(),i=t.Bk(),s=i.then((t=>{const i=As.Wm();return this.cut(e,i,t.byteLength,!1),{XI:{lut:t.byteLength}}}),(t=>{const i=As.Wm();throw this.cut(e,i,0,!0),t}));return this.Kut.rp(s),i}get Qut(){return this.Kut.Xb}constructor(t){this.Jut=t,this.Kut=new is,this.cut=(t,e,i,s)=>{const n={gut:this.qut,vut:t,_ut:e,lut:i,mut:s};this.Jut.cut(n),this.Jut.rut&&bu.Vm.BG(this.Jut.aut)},this.Kut.Xb.catch(M),this.qut=As.Wm()}},nW=class extends sW{Yut(t){return new tW(this.cut,t)}},rW=class extends sW{Yut(t){return new eW(this.cut,t)}};r();var oW=class extends QV{constructor(t,e,i,s,n,r,o){super(ns.ub,t,e,i,s,n),this.$ut=r,this.HO=o}};r();var Tl=class extends dl{constructor(t,e,i){super("Error downloading segment "+jV(e),t),this.tct=e.lF,this.ect=e.dF,this.ict=i}},hW=class extends So{sct(){return this.fut?new rW(this.Jut):new nW(this.Jut)}async xut(t,e){Io(e);const i=t.jht,s=t.Xu,n=t.Eut,r=jV(n),o=i.jht?i.jht.OC:-1,h=function(t){const e=t.jht;let i;i=e===function(t){return t.Mat.reduce(((t,e)=>t.jG<e.jG?t:e))}(e.nct)?An(5*t.Eut.ct):An(1.2*t.Eut.ct);return bi(i,1e3,18e3)}(t);this._o(new JV(s,i.jG,r,o,i.zw));try{const t=this.sct(),a=await this.rct.Zat(s,{BE:this.fut,Qat:h,ep:e}),u=await this.hct(a,a.Zk,e,t);return uh(this.act(t.Qut,i,s,r,o,a)),{Cut:u,jht:i,Eut:n,Xu:s}}catch(t){throw ih(t),new Tl(t,n,i)}}async Put(t,e){Io(e);const i=await this.rct.Xat(t,{BE:false,Qat:1e4,ep:e});return await this.hct(i,false,e)}async hct(t,e,i,s){if(e){const e=s?s.zut(t):t.Ok();return{zw:To.Ik,$k:new ZV(e)}}{const e=s?await s.jut(t):await t.Bk(i);return{zw:To.NJ,$k:new Sl(e)}}}async act(t,e,i,s,n,r){try{const o=await t;this._o(new oW(i,e.jG,s,n,e.zw,r.Jk,o.XI.lut))}catch(t){}}yn(){this.Ro()}constructor(t,e,i){super(),this.rct=t,this.Jut=e,this.fut=i}};r();var aW=.001,uW=class{get SI(){return this.uct.SI}get cct(){return this.uct.cct}get v$(){return this.uct.v$}get lct(){if(this.w4.aR<Wt.Xn)return!1;if(this.uct.Tn<=this.dct&&this.uct.fct())return!0;const t=this.uct.pZ;if(!t||0===t.V)return!1;const e=ee.VB(this.s8.RI,1/0);return t.jn(e).TB(this.uct.v$).OB>=this.XH.uQ}get dct(){const t=this.uct.pZ;let e;if(t&&t.V>0)e=t.Tn(0);else{e=this.s8.RI;const t=this.uct.v$,i=t.kB(e);i>=0&&(e=t.Tn(i))}const i=this.uct.cR.Sn(0);if(i>e){if(this.uct.Sn<=e&&this.uct.Tn>=e&&i>e+aW)throw new Qa(e,i);e=i}return e=this.uct._ct.mB(e),e}constructor(t,e,i,s){this.uct=t,this.s8=e,this.w4=i,this.XH=s}};r();var cW=class{get vct(){if(0===this.P_.size)return this.gct;let t=ee.VB(0,1/0);return t=t.jn(this.gct),this.P_.forEach((e=>{t=t.jn(e)})),t}mct(t){return this.P_.get(t.o)}pct(){let t=this.gct;return this.P_.forEach((e=>{t=t.AB(e)})),t}wct(t){if(this.gct.wr(t))return!0;let e=!1;return this.P_.forEach((i=>{e=e||i.wr(t)})),e}yct(t,e){const i=this.P_.get(e.o);return!!i&&i.wr(t)}EB(t,e){if(this.gct.EB(t,e))return!0;let i=!1;return this.P_.forEach((s=>{i=i||s.EB(t,e)})),i}bct(t,e){const i=this.P_.get(e),s=i?i.AB(t):t;this.P_.set(e,s),this.gct=this.gct.AB(t)}Act(t){this.P_.forEach(((e,i)=>{this.P_.set(i,e.AB(t))})),this.gct=this.gct.AB(t)}Sct(t){this.P_.forEach(((e,i)=>{this.P_.set(i,e.jn(t))})),this.gct=this.gct.jn(t)}nr(){this.P_.forEach(((t,e)=>{this.P_.set(e,ee.WB())})),this.gct=ee.WB()}constructor(){this.P_=Vh(),this.gct=ee.WB()}},lW=class{get Tct(){return this.kct}get v$(){return this.g$}Ect(t){for(const e of this.xct){if(e.Dat>t)break;if(e.Nat>t)return e}}Ict(t){for(const e of this.xct){if(e.Rct>t)break;if(e.Cct>=t)return e}}Pct(t,e){const i=[];for(const s of this.xct){if(s.Dat>t)break;s.Nat>=e&&i.push(s)}return i}Pat(){return this.xct}Bat(t){const e=ee.VB(t.Rct,t.Cct),i=e.pB();this.kct.Sct(i),this.kct.bct(e,t.Lat),this.Dct(i);const s=qr(this.xct,(e=>t.Dat<=e.Dat));if(s<0)this.xct.push(t);else{this.xct[s].Nat<=t.Nat?this.xct.splice(s,1,t):this.xct.splice(s,0,t)}}m$(t,e){this.g$.bct(t,e)}Nct(t){this.g$.Act(t)}Sct(t){this.kct.Sct(t),this.g$.Sct(t);const e=this.kct.pct();this.Dct(e)}Dct(t){this.xct=this.xct.filter((e=>t.IB(e.Rct,e.Cct))).map((e=>e.Mct&&!t.EB(e.Rct,e.Cct)?function(t,e){return{Lat:t.Lat,Dat:t.Dat,Nat:t.Nat,Rct:t.Rct,Cct:t.Cct,Mct:e}}(e,!1):e))}nr(){this.kct.nr(),this.g$.nr(),this.xct=[]}yn(){this.nr()}constructor(t){this.xct=[],this.Ht=t,this.kct=new cW,this.g$=new cW}};r(),r();var dW=class{get rat(){return this.Lct}set rat(t){this.Lct=t}get uat(){return this.nat.Ht.uat}async Bct(t,e,i){let s;Io(i);const n=this.nat.Ict(t);s=n&&rs(n.Cct,t,1e-5)?n.Nat:t;const r=this.Oct(s),o=function(t){return fW.bind(void 0,t)}(s);let h=await this.Kp.Fct(o,r,e,i);for(Io(i);h&&this.Vct(h.Eut);){const t=mW(h.Eut),s=h.jht;h=await this.Kp.Fct(t,[s],e,i),Io(i)}if(!h)return void 0;if(!this.Wct(h.Eut))return h;const a=this.Uct(h.Eut);if(t<a.Sn)return await this.findFirstNonAppendedSegmentBeforeSegment(h,e,i,a);if(t>=a.Tn)return await this.findFirstNonAppendedSegmentAfterSegment(h,e,i);if(!h.jht.Gct(h.Eut))throw new m("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,e,i){let s=t;do{const n=mW(s.Eut),r=t.jht;s=await this.Kp.Fct(n,[r],e,i),Io(i)}while(s&&this.Wct(s.Eut));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,e,i,s){let n=t;do{const s=gW(n.Eut),r=t.jht;n=await this.Kp.Fct(s,[r],e,i),Io(i)}while(n&&this.Wct(n.Eut));if(!n){0;const e=t.jht.Zct.Sn;throw new Qa(e,s.Sn,t.jht)}return n}Hct(t){return this.nat.Tct.wct(t)}Xct(t){return this.nat.Pct(t.lF,t.dF)}Wct(t){const e=this.Xct(t);return e.length>0&&function(t,e){return function(t){let e=ee.WB();for(const i of t)e=e.AB(ee.VB(i.Dat,i.Nat));return e}(t).EB(e.lF,e.dF)}(e,t)&&e.every(pW)}Vct(t){return this.nat.v$.EB(t.lF,t.dF)}Uct(t){const e=this.Xct(t);return{Sn:e[0].Rct,Tn:e[e.length-1].Cct}}Oct(t){const e=this.zct(t);if(0===e.length){const t=this.Lct?this.Lct:this.nat.Ht.Mat;return[t[t.length-1]]}const i=e.filter((t=>{var e;return(null==(e=t.jht)?void 0:e.Lst)&&!t.qct}));return i.length>0?i:[e[e.length-1]]}zct(t){return(this.Lct?this.Lct:this.nat.Ht.Mat).filter((e=>!this.nat.v$.yct(t,e)))}constructor(t,e,i){this.Vat=t,this.nat=e,this.Kp=i}};async function fW(t,e,i,s){const n=e.Eot.Yct(t);if(n){if(e.Kct(n)){return(await e.Qct(n,i,s)).jct(t)}return n}}async function _W(t,e,i,s){if(KV(t)){if(0===t.Nut)return;const n=e.Eot.Jct(t);if(!n)return;return(await e.Qct(n,i,s)).$ct(t.Nut-1)}return e.Eot.tlt(t)}async function vW(t,e,i,s){if(KV(t)){const n=e.Eot.Jct(t);if(!n)return;const r=await e.Qct(n,i,s);if(t.Nut+1===r.V)return;return r.$ct(t.Nut+1)}return e.Eot.elt(t)}function gW(t){return _W.bind(void 0,t)}function mW(t){return vW.bind(void 0,t)}function pW(t){return t.Mct}r();var wW=class{async Fct(t,e,i,s){Io(s);const n=this.ilt(e,i);if(!n)return;const r=await t(n,this.slt,s);if(!r)return;const o=n.nlt(r);return{jht:n,Eut:r,Xu:o}}ilt(t,e){if(0===t.length)return;const i=this.olt.rlt(t,this.hlt?e:void 0,this.uct,this.XH.oQ);return this.hlt||(this.hlt=!0),i}constructor(t,e,i,s){this.olt=t,this.uct=e,this.XH=i,this.slt=s,this.hlt=!1}};r();var yW=class{async Fct(t,e,i,s){Io(s);const n=this.olt.ult(e,i,this.uct);if(!n.length)return;let r;for(const e of n)try{Io(s);const i=await t(e,this.slt,s);if(i){const t=e.nlt(i);if(await this.Rut.clt(t.Xu,t.Kat))return{Eut:i,jht:e,Xu:t}}}catch(t){ih(t),r=t}if(r)throw r}constructor(t,e,i,s){this.olt=t,this.uct=e,this.Rut=i,this.slt=s}};function bW(t){return void 0!==t.tR}function AW(t,e){const i=t.ji&&e.ji,s=t.Ti&&e.Ti;if(i||s){if(i&&s)return t.ji*t.Ti-e.ji*e.Ti;if(i)return t.ji-e.ji;if(s)return t.Ti-e.Ti;return(t.ji||1)*(t.Ti||1)-(e.ji||1)*(e.Ti||1)}return 0}function SW(t,e){return AW(t,e)||function(t,e){return t.jG-e.jG}(t,e)}r(),r();var Sr=class t{rlt(e,i,s,n){let r=t.sortByQuality(e);if(void 0!==this.llt&&void 0===i&&e.length>1){const e=t.dlt(r,this.llt);e&&(r=e)}const o=this.ult(r,i,s,n);return o.length?o[o.length-1]:r[0]}ult(e,i,s,n){var r;const o=t.sortByQuality(e),h={aut:void 0===n||this.flt.rut?this.flt.aut:n,tR:bW(s)&&s.tR?s.tR:1,_lt:s.ji,vlt:s.Ti,glt:null==(r=this.plt)?void 0:r.restrictToPlayerSize};let a=o;for(const t of this.g_)a=t(a,i,h,this.Iw,this.wlt);return a}static ylt(e){return t.sortByQuality(e)[0]}static blt(e,i){var s;return i?t.ylt(null!=(s=t.dlt(e,i))?s:e):t.ylt(e)}static dlt(t,e){for(const i of e){const e=t.filter((t=>hM(t.Op,i)));if(e.length>0)return e}}static sortByQuality(t){const e=[...t];return e.sort(SW),e}constructor(t,e,i,s,n,r){this.g_=t,this.flt=e,this.Iw=i,this.plt=s,this.llt=n,this.wlt=r}};r();var TW=(t,e,i,s,n)=>t.filter((t=>n.ZJ(t)&&s.Np(e,t)));r();var kW=(t,e,i)=>t.filter((t=>function(t,e,i){const s=i.aut;if(s<=0)return!1;return.8*s>t.jG*i.tR}(t,0,i)));r();var EW=(t,e,i,s,n)=>{const r=i.glt;if(void 0===r&&!s.Qs)return t;if(!1===r)return t;if(t.length>0&&t[0].zw!==Fo.yE)return t;for(let e=t.length-1;e>=0;e--){const s=t[e];if(s.Ti===i.vlt&&s.ji===i._lt)return t.slice(0,e+1);if(s.Ti<i.vlt||s.ji<i._lt)return t.slice(0,e+2)}return[]};r();var xW=class{async Fct(t,e,i,s){let n;for(const r of this.Alt)try{const n=await r.Fct(t,e,i,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this.Alt=t}};r(),r();var IW=class{async Slt(t,e,i,s){let n;for(const r of this.Tlt)try{return await r.Slt(t,e,i,s)}catch(t){ih(t),n=t}throw n}constructor(t){this.Tlt=t}};r();var RW=class{async Slt(t,e,i,s){var n;const r=await this.WW.eE({Xu:t,tE:Te.Ek,iE:e?{Range:"bytes="+e[0]+"-"+(null!=(n=e[1])?n:"")}:void 0,DE:i,EE:Ce.GET,zw:Bn.oE,ep:s});return await r.Bk()}constructor(t){this.WW=t}};r();var CW=class{async Slt(t,e,i,s){const n=await this.Rut.Iut(t,e);if(n)return n.buffer;if(e){const i=await this.Rut.Iut(t);if(i)return Hc(new j(i.buffer),e[0],e[1])}throw new HV({Xu:t,Kat:e,DE:!1})}constructor(t){this.Rut=t}};r();var PW=1.05,DW=(t,e,i,s)=>{if(!1===i.glt)return t;if(s.gp)return t;const n=s.mp;var r;const o=(null!=(r=null==n?void 0:n.width)?r:i._lt)*PW;var h;const a=(null!=(h=null==n?void 0:n.height)?h:i.vlt)*PW;for(let e=t.length-1;e>=0;e--){const i=t[e];if(i.Ti<=a&&i.ji<=o)return t.slice(0,e+1)}return[]},NW=class{static ist(t,e,i,s,n,r,o,h,a,u){const c=function(t,e){return new IW([new CW(e),new RW(t)])}(r,o),l=new Sr([TW],n,As.Ys,h,a,u),d=new yW(l,e,o,c),f=new Sr([kW,TW,EW,DW],n,As.Ys,h,a,u),_=new wW(f,e,s,c),v=new xW([d,_]);return new dW(t,i,v)}};r(),r();var MW=class extends me{constructor(t,e,i,s,n,r=0){super(ns.sb),this.segmentStartTime=t,this.error=e,this.trackType=i,this.track=s,this.quality=n,this.retryCount=r}};r();var LW=class extends me{constructor(t,e){super(ns.Ey),this.track=t,this.segments=e}},BW=class extends dl{constructor(t,e){super(e),this.klt=t}},OW=[ns.ob,ns.ub],FW=class extends So{get $ht(){return this.Elt}get iat(){return this.xlt}set rat(t){this.Ilt.rat=t}get rat(){return this.Ilt.rat}get uat(){return this.nat.Ht.uat}Rlt(t){return!this.v3||!t||!gp(this.v3.eht,t.eht)}Wat(t){if(!this.Elt)return!1;const e=this.Elt.Eut,i=ee.VB(e.lF,e.dF),s=this.Clt.cct,n=s.kB(t);return n<0?i.wr(t,aW):i.IB(t,s.Tn(n),!0,!0,aW)}async Oat(t){const e=this.nat.Ht.Mat;for(;;){let n;try{var i;Io(t),this.Uat();if(this.Gat())break;n=this.Plt();const r=await this.Fct(n,t);if(void 0===r)break;if(this.Elt=r,!VW(this.Elt)){await this.Dlt(this.Elt,t);continue}var s;if(this.xlt&&!iM(this.xlt.jht.Frt,this.Elt.jht.Frt)&&await this.wlt.XJ(this.Elt.jht),this.Elt.jht.$G&&(!this.iat||(null==(i=this.xlt)?void 0:i.jht)!==this.Elt.jht))null==(s=this.MZ)||s.oZ(this.Elt.jht.$G);await this.Nlt(n,this.Elt.Eut,t),this.v3=await this.Mlt(this.Elt.jht,t);const o=await this.xut(this.Elt,t),h=this.Clt.SI,a=this.xlt;this.xlt=await this.Llt(o,t);const u=this.Clt.SI;this.Blt(a,this.Elt,h,u,n),e.forEach((t=>t.qct=!1)),this.Olt=0,this.Flt=0}catch(i){if(i instanceof Qa){this.i4(i.Sn,i.Tn,i.jht);continue}if(i instanceof BW){let s=500;if(e.every((t=>t.qct))){if(2===this.Olt){const t=this.Clt.SI;if(this.Vlt(this.Elt),this.Blt(this.xlt,this.Elt,t,t,n),e.forEach((t=>t.qct=!1)),this.Flt+=1,this.Olt=0,this.Flt===this.Wlt.maxRetries)throw new Z(Ci.MEDIA_LOAD_ERROR,"The segments could not be loaded.",i);continue}this.Olt++;const t=this.Wlt.minimumBackoff*2**(this.Olt-1);s=_.min(t,this.Wlt.maximumBackoff)}await Ze(s,t);continue}throw this.Ult=ee.WB(),i}finally{this.Elt=void 0}}}Blt(t,e,i,s,n){const r=s.TB(i),o=e.jht,h=o.Glt(e.Eut),a=o.Gct(e.Eut);let u=e.Eut.lF,c=e.Eut.dF;h&&(u=_.min(u,_.max(0,o.Zct.Sn-.05))),a&&(c=_.max(c,o.Zct.Tn));const l=ee.VB(u,c).TB(s);if(0===r.V)return void this.Zlt(i,l,u,n);if(h||this.Ult.V>0){const t=l.jn(ee.VB(u,r.Sn(0)));this.Hlt(t)}const d=r.pB().jn(ee.VB(r.Sn(0),r.Tn(r.V-1)));if(this.Hlt(d),a){const t=l.jn(ee.VB(r.Tn(r.V-1),c));this.Hlt(t)}if(this.Ult.V>0){const t=this.Ult.TB(r);this.Hlt(t),this.Ult=ee.WB()}const f=o.Eot,v=KV(e.Eut)?void 0:f.tlt(e.Eut);var g;const m=null!=(g=null==t?void 0:t.Eut)?g:this.Xlt(v)?v:void 0;if(m){const t=this.nat.Pct(m.lF,m.dF);if(t.length>0){const e=ee.VB(t[t.length-1].Cct,r.Sn(0));this.Hlt(e)}}const p=KV(e.Eut)?void 0:f.elt(e.Eut);if(p&&this.Xlt(p)){const t=this.nat.Pct(p.lF,p.dF);if(t.length>0){const e=ee.VB(r.Tn(r.V-1),t[0].Rct);this.Hlt(e)}}}Zlt(t,e,i,s){let n=e;0===this.Ult.V&&(this.Ult=ee.VB(t.Tn(t.V-1),i)),0===n.V&&void 0!==s&&(n=ee.FB(s)),this.Ult=this.Ult.AB(n),this.nat.Nct(this.Ult)}Xlt(t){return!!t&&this.nat.Pct(t.lF,t.dF).length>0}Hlt(t){const e=t.TB(this.Clt.SI);for(let t=0;t<e.V;t++)e.Sn(t)!==e.Tn(t)&&this.zlt.m$(e.Sn(t),e.Tn(t))}qlt(t,e){throw new BW(t,e)}Uat(){if(this.Ult.V>0)return;var t;const e=this.Clt.cct.AB(null!=(t=this.Clt.v$.gB().BB(this.Clt.dct))?t:ee.WB());this.nat.Sct(e),this.Ylt&&!this.Klt(this.Ylt)&&(this.Ylt=void 0),this._o(new LW(this.nat.Ht.uat,this.nat.Pat()))}Gat(){return this.xlt&&this.xlt.jht.Gct(this.xlt.Eut)?(this.zlt.Y3(),!0):(this.Ylt&&this.Ylt.jht.Gct(this.Ylt.Eut)&&this.Klt(this.Ylt)&&this.zlt.Y3(),!!this.Clt.lct)}Klt(t){return this.nat.Tct.EB(t.jlt,t.Qlt)}Jlt(t,e,i){(!this.Ylt||this.Ylt.Eut.dF<t.Eut.dF)&&(this.Ylt=ne({},t,{jlt:e,Qlt:i}))}Plt(){const t=this.Clt.dct;return t}async Fct(t,e){Io(e);const i=this.xlt?this.xlt.jht:void 0,s=await this.Ilt.Bct(t,i,e);if(s)return s}async Dlt(t,e){const i={stack:[],error:void 0,hasError:!1};try{const s=t.jht,n=s.Eot,r=KV(t.Eut)?n.Jct(t.Eut):t.Eut,o=s.tdt.$lt(),h=n.edt(r);if(h&&h.getTime()<=o.getTime())return this.qlt(Iu._ht,"Segment is not available.");const a=n.idt(r).getTime()-o.getTime();0;const u=Gi(i,Fi.hp([e]),!1);await Promise.race([Ze(a,u.ep),s.Ay(Cs.Xht,u.ep)])}catch(t){i.error=t,i.hasError=!0}finally{ce(i)}}async Mlt(t,e,i){void 0===i&&(i=0),Io(e);const s=t.sdt;if(!s)return this.v3;try{if(!t.ndt){const i=await this.rdt.Put(s,e);t.ndt=i.$k}}catch(s){if(ih(s),Li(s)){if(2===i)return t.qct=!0,this.qlt(Iu.Aht,"Could not fetch the initializer.");const s=_.min(this.Wlt.minimumBackoff*2**i,this.Wlt.maximumBackoff);return await Ze(s,e),this.Mlt(t,e,i+1)}throw new Z(Ci.MEDIA_LOAD_ERROR,s.message,s)}Io(e);try{this.Rlt(t.ndt)&&await this.zlt.Tot(t.ndt,t,e)}catch(t){if(ih(t),Li(t))return this.qlt(Iu.Aht,"Could not append the initializer.");throw new Z(Ci.MEDIA_DECODE_ERROR,t.message,t)}return t.ndt}async xut(t,e,i){void 0===i&&(i=0);try{return Io(e),await this.rdt.xut(t,e)}catch(s){if(ih(s),s instanceof Tl){if(function(t){return t instanceof Gc}(s.cause))return this.odt(new Tl(s,t.Eut,t.jht),i),this.qlt(Iu._ht,"Could not append the segment.");if(2===i)return t.jht.qct=!0,this.odt(s,i),this.qlt(Iu._ht,"Could not fetch the segment.");const n=_.min(this.Wlt.minimumBackoff*2**i,this.Wlt.maximumBackoff);return await Ze(n,e),await this.xut(t,e,i+1)}throw new Z(Ci.MEDIA_LOAD_ERROR,s.message,s)}}async Nlt(t,e,i){const s=this.nat.Pct(e.lF,e.dF),n=this.Clt.cct.BB(t);let r=ee.WB();for(const t of s){Io(i);const e=t.Rct,s=t.Cct,o=n&&n.IB(e,s)?_.max(e,n.Tn(0)):e,h=s;o<h&&(r=r.AB(ee.VB(o,h)))}for(let t=0;t<r.V;t++)await this.zlt.hdt(r.Sn(t),r.Tn(t),i);this.Uat()}async Llt(t,e){try{Io(e);const i=await this.zlt.adt(t.Cut,t.Eut,t.jht,e);return this.udt(t,i.jlt,i.Qlt),this.Jlt(t,i.jlt,i.Qlt),t}catch(e){if(ih(e),Li(e))return this.odt(new Tl(e,t.Eut,t.jht),0),this.qlt(Iu._ht,"Could not append the segment.");if(ac(e)&&this.zlt._Q())return this.qlt(Iu.ght,"Buffer is full. Could not reduce the buffer.");throw new Z(Ci.MEDIA_DECODE_ERROR,e.message,e)}}udt(t,e,i){const s=t.jht,n=t.Eut;this.Bat(n,s,e,i)}Bat(t,e,i,s){this.nat.Bat({Lat:e.o,Dat:t.lF,Nat:t.dF,Rct:i,Cct:s,Mct:!0}),this.zlt.p$(i,s)}i4(t,e,i){const s=ee.VB(t,e);i?this.nat.m$(s,i.o):this.nat.Nct(s),this.zlt.m$(t,e)}Vlt(t){const e=ee.VB(t.Eut.lF,t.Eut.dF);t.jht?this.nat.m$(e,t.jht.o):this.nat.Nct(e)}odt(t,e){const i=t.tct,s=this.nat.Ht.uat,n=this.nat.Ht.wa,r=t.ict.jht&&t.ict.jht.wa,o=new MW(i,t.message,s,n,r,e);this._o(o)}nr(){this.v3=void 0,this.xlt=void 0}yn(){this.nr(),this.Ylt=void 0,this.rdt.vn(OW,this.Ds),this.rdt.yn()}constructor(t,e,i,s,n,r,o,h,a){super(),this.Vat=t,this.nat=e,this.Clt=i,this.Ilt=s,this.rdt=n,this.zlt=r,this.wlt=o,this.Wlt=h,this.MZ=a,this.Elt=void 0,this.v3=void 0,this.xlt=void 0,this.Ylt=void 0,this.Olt=0,this.Flt=0,this.Ult=ee.WB(),this.rdt.bn(OW,this.Ds)}};function VW(t){const e=t.jht,i=e.Eot,s=KV(t.Eut)?i.Jct(t.Eut):t.Eut;return i.cdt(s,e.tdt.$lt())}var WW=0,UW=class{ist(t){const e=WW++,i=this.uct.j3,s=new lW(t),n=this.ldt&&xT(i),r=new UV(i,n),o=new uW(this.uct,this.s8,this.w4,this.XH),h=NW.ist(e,this.uct,s,this.XH,r,this.WW,this.Rut,this.plt,this.llt,this.wlt),a=function(t){switch(t){case Fo.wE:return sA.wE;case Fo.yE:return sA.yE;case Fo.Rk:return sA.Rk;case Fo.bE:return sA.bE;default:return sA.oE}}(i),u=function(t,e,i,s){const n=new zV(s),r=new hW(t,e,i);return new YV([n,r])}(new FV(this.WW,a),r,n,this.Rut),c=new FW(e,s,o,h,u,this.uct,this.wlt,this.Wlt,this.MZ);return new OV(e,t.nct,s,c,this.s8)}ddt(t,e){const i={uat:Fo.Rk,nct:e,Mat:e.Mat,wa:t.wa};return this.ist(i)}constructor(t,e,i,s,n,r,o,h,a,u,c,l){this.uct=t,this.s8=e,this.w4=i,this.WW=s,this.XH=n,this.ldt=r,this.Rut=o,this.plt=h,this.llt=a,this.wlt=u,this.Wlt=c,this.MZ=l}};r();var GW=class{ZJ(t){return this.Krt.ZJ(t)}XJ(t){return this.Krt.XJ(t)}constructor(t){this.Krt=t}},ZW=class{ZJ(t){return!0}XJ(t){return Promise.resolve(void 0)}};r(),r();var HW=class extends $s{ka(){return new XW(this.VC.map((t=>t.wa)))}constructor(t,e){super(gs.vC),this.VC=t||[],this.Ht=e}},XW=class extends me{constructor(t){super("targetqualitychanged"),this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}};r();var zW=class extends Me{ka(){return new qW(this.quality.wa)}constructor(t){super(gs.QUALITY_UNAVAILABLE),this.quality=t}},qW=class extends Mo{constructor(t){super("qualityunavailable"),this.quality=t}};r();var YW=class extends me{constructor(){super(gs.NO_QUALITY)}};function KW(t){return{jG:t.jG,Op:t.Frt,Ti:jW(t)?t.Ti:0,zw:jW(t)?Fo.yE:Fo.wE,ji:jW(t)?t.ji:0}}function jW(t){const e=t;return void 0!==e.Ti&&void 0!==e.ji}r();var QW=0,JW=class extends So{get FC(){return this.Tat.fdt.map($W).filter(ol)}_dt(t){for(const e of t)e.bn("update",this.vdt),this.jO.QO(e)}gdt(t){if(!this.jO.JO(t))return;t.LW();const e=this.mdt();if(this.pdt&&fh(this.pdt,t)){const t=this.pdt.filter((t=>t.Lst));0===t.length&&e.length>0?this.WC=e:this.WC=t}else this.WC=e;this._o(new zW(t))}wdt(t){if(!this.jO.JO(t))return;const e=this.mdt();t.MW(),this.pdt&&!function(t,e){return rf(t,e,((t,e)=>t===e))}(this.pdt,e)||(this.WC=this.mdt())}mdt(){return this.jO.mC.filter((t=>t.Lst))}get BC(){return this.ydt}bdt(t){this.ydt=t.jht,this._o(t)}get nct(){return this.Tat}get Rt(){return this.qe}set Rt(t){this.nF(t)}get wa(){return this.eu||(this.eu=xi(this)),this.eu}get Adt(){return this.Sdt}set Adt(t){this.Sdt=t}get o(){return this.jS}get OC(){return this.eF}get Lt(){return this.O5}get gs(){return this.VA}get Ch(){return this.iF}set Ch(t){t!==this.iF&&(this.iF=t,this._o(new te(this)))}get LE(){return this.Rt?"enabled":"disabled"}get WC(){return this.pdt}set WC(t){let e;if(t){const i=this.BC?KW(this.BC):void 0;e=t.filter((t=>t.Lst&&As.Ys.Np(i,KW(t))))}else e=this.mdt();0!==e.length?(this.pdt=t&&this.jO.JO(t)?t:void 0,this.Tdt=this.kdt(this.pdt),this._o(new HW(t,this))):this._o(new YW)}get Edt(){return this.Tdt}kdt(t){if(!t||0===t.length)return;const e=[];for(const i of this.Mat)for(const s of t)s===i.jht&&s.Lst&&e.push(i);return e}get VC(){return this.jO}get Mat(){return this.xdt}Idt(t){this.Rdt.push(t),this.xdt.push(...t.Mat);const e=t.Mat.map((t=>t.jht));this._dt(e)}get uat(){return this.Cdt}get Pdt(){return this.Rdt}get Ddt(){return this.Mat.every((t=>t.Ddt))}nF(t){this.qe=t,this.Sdt&&(t?this.Sdt.MW(this):this.Sdt.LW(this))}Ndt(t){this.qe=t,this.Mdt!==t&&(this.Mdt=t,this._o(new Pc(this)))}yn(){for(const t of this.jO.mC)t.vn("update",this.vdt);this.jO.nr()}constructor(t,e,i="alternative"){super(),this.ydt=void 0,this.qe=!1,this.eu=void 0,this.Sdt=void 0,this.jS="",this.Mdt=!1,this.jO=new tl,this.xdt=[],this.pdt=void 0,this.Tdt=void 0,this.vdt=()=>this._o(new te(this)),this.Rdt=[],this.Tat=t,this.jS=String(QW++),this.eF=Lt(),this.O5=i,this.VA=t.Net,this.iF=t.Ch,this.Cdt=t.zw,this.xdt=t.Mat.slice(),this._dt(e)}};function $W(t){if("urn:mpeg:dash:role:2011"===t.G9)return tU(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.G9){if("1"===t.Fx)return Pe.RC;if("2"===t.Fx)return Pe.NC}}function tU(t){if(void 0!==(null==t?void 0:t.Fx))switch(t.Fx){case"caption":return Pe.IC;case"sign":return Pe.DC;case"description":return Pe.RC;case"enhanced-audio-intelligibility":return Pe.NC;default:return}}var eU=class t extends Zx{get Ldt(){return this.Bdt}set Ldt(t){this.Bdt=t}get Rt(){for(const t of this.Z.mC)if(t.LE!==Ui.Mh)return!0;return!1}get pZ(){const t=this.s8.RI;return this.cct.BB(t,.01)}get Odt(){return this.Ldt&&this.Fdt[this.Ldt.OC]?this.Fdt[this.Ldt.OC]:ee.WB()}get Vdt(){return this.Ldt&&this.Wdt[this.Ldt.OC]?this.Wdt[this.Ldt.OC]:ee.WB()}get _ct(){return new ee([0,1/0])}get SI(){return this.Odt}get v$(){return this.Udt?this.Udt.sat.v$.vct:ee.WB()}get cct(){return NV(this.SI,this.v$).bB(2*this.Gdt)}get Sn(){return this.Zdt?this.Zdt.Zct.Sn:NaN}get Tn(){return this.Zdt?this.Zdt.Zct.Tn:NaN}get MI(){const t=this.Tn;return!!t&&this.s8.RI>=t}get Gdt(){var t;const e=this.Hdt();if(!e)return.04;var i;return 1/(null!=(i=this.Ldt&&(null==e||null==(t=e.Xdt)?void 0:t.VF()))?i:25)}get Ti(){return this.$A}get j3(){return Fo.Rk}get tR(){return this.UH}set tR(t){this.UH=t}get sR(){return this.Vdt}get cR(){if(!this.Ldt)return ee.FB(0);const t=this.zdt(this.Ldt),e=null==t?void 0:t.qdt,i=null==t?void 0:t.Ydt;if(void 0===i||void 0===e)return ee.FB(0);const s=_.max(e,this.s8.RI);return new ee([i,s]).gB()}get ji(){return this.JA}Y3(){}fct(){return this.cct.wr(this.Tn)}async adt(t,e,i,s){const n=t.zw===To.NJ?t.$k.eht:await t.$k.Bk(s),r=this.findTrackForRepresentation(i),o=this.Fdt[r.OC],h=e.lF,a=e.dF,u=new ee([h,a]);o||(this.Fdt[r.OC]=ee.WB(),this.Wdt[r.OC]=ee.WB()),this.tot(s);const c=this.kot(new j(n),e,i,r);for(const t of c)r.UW(t);return this.Fdt[r.OC]=this.Fdt[r.OC].AB(u),{jlt:h,Qlt:a}}tot(t){const e=TD(this.s8.RI,void 0,void 0,this.SI,this.XH.uQ,this.XH.sQ);for(const[i,s]of e)uh(this.hdt(i,s,t))}Tot(t,e,i){return this.Kdt.Tot(t,e,i)}kot(t,e,i,s){return this.Kdt.kot(t,e,i,s)}hdt(t,e,i){const s=t,n=e;let r=new ee([t,e]);for(const t of this.Z.mC){const e=[];for(const i of t.L.mC)i.lF>=s&&i.dF<=n?e.push(i):r=r.TB(new ee([i.lF,i.dF]));for(const i of e)t.RW(i);const i=this.Fdt[t.OC];i&&(this.Fdt[t.OC]=i.TB(r))}return Promise.resolve()}m$(t,e){}p$(t,e){}_Q(){return!1}MW(t){const e=this.jdt(t);if(e&&this.Ldt!==e){this.Ldt=e;for(const t of this.Z.mC)t!==e&&(t.LE=Ui.Mh);if(this.Kdt.nr(),this.Udt&&(this.Udt.yn(),this.Udt=void 0),this.Ldt){const t=this.zdt(this.Ldt);this.Udt=new UW(this,this.s8,this.s8,this.WW,this.XH,!1,this.Rut,void 0,void 0,new ZW,hk,void 0).ddt(this.Ldt,t),this.Udt.bn(bo.fa,this.Qdt),this.Udt.Sn(Iu.oht)}}}LW(t){if(this.Ldt===t){const e=this.jdt(t);e&&this.Ldt===e&&(this.Ldt=void 0),this.Udt&&(this.Udt.yn(),this.Udt=void 0)}}async $n(t){await this.nr(),this.Zdt=t,this.Jdt(t)}$dt(t){const e=function(t){const e=t.Mat&&t.Mat.length>0&&t.Mat[0],i=e&&Nx(e.Frt),s=Nx(t.Frt),n=t.SY===ba.APPLICATION_TTML_XML;return i||s||n?Hr.TTML:t.SY===ba.TEXT_VTT||Ox(t.SY,t.Frt)?Hr.WEBVTT:Hr.DEFAULT}(t);if(!e)throw new m("Unknown TextTrack type for Representation");const i=t.tft.concat(t.fdt);return this.eft(function(t){return fh(t.filter((t=>"urn:mpeg:dash:role:2011"===t.G9)).map((t=>t.Fx)).filter(ol),"caption")?Hi.kW:Hi.TW}(i),t.Ch,t.Net,!1,e,t,function(t){return t.filter((t=>"urn:mpeg:dash:role:2011"===t.G9)).some((t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.Fx)))}(t.tft),t.fdt.map(tU).filter(ol))}Jdt(t){for(const e of t.ift){const t=this.$dt(e);this.sft.set(t.OC,e),t.aR=Bu.LOADED,this.tt(t)}}it(t){this.sft.delete(t.OC),super.it(t)}eft(t,e,i,s,n,r,o,h){var a;const u=r.Mat.reduce(((t,e)=>t||e.o),void 0);var c;const l=null!=(c=null!=u?u:null==(a=r.o)?void 0:a.toString())?c:"";return this.FW.ZR(t,l,e,i,s,n,o,h)}async nr(){await super.nr(),this.Udt&&(await this.Udt.nr(Iu.Rht),this.Udt.vn(bo.fa,this.Qdt),this.Udt=void 0),this.Zdt=void 0,this.Fdt={},this.Wdt={}}nft(){this.Fdt={},this.Wdt={}}findTrackForRepresentation(e){for(const i of this.Z.mC){const s=this.zdt(i);if(s&&t.rft(s)===e)return i}}jdt(t){return Do(this.Z.mC,(e=>t.OC===e.OC))}zdt(t){return this.sft.get(t.OC)}Hdt(){if(!this.Ldt)return;const e=this.zdt(this.Ldt);return e?t.rft(e):void 0}static rft(t){return t.Mat&&t.Mat.length>0?t.Mat[0]:void 0}yn(){for(const t of this.Z.mC)this.FW.ZW(t);return super.yn()}constructor(t,e,i,s,n,r){super(),this.$A=0,this.UH=1,this.Udt=void 0,this.Fdt={},this.Wdt={},this.JA=0,this.sft=Bh(),this.Qdt=t=>{0},this.s8=t,this.WW=e,this.XH=i,this.Kdt=s,this.Rut=n,this.FW=r}},iU=class{get nt(){return this.Hl}async VW(t){if(t.zw!==Fo.Rk)return;const e=function(t,e,i){return Nx(e)||t===ba.APPLICATION_TTML_XML||t===ba.TEXT_VTT?new CV(i):Ox(t,e)?new PV:void 0}(t.SY,t.Frt,this.xot);if(e){const i=this.oft(e);return this.hft(i),await i.$n(t),i}}oft(t){return new eU(this.s8,this.WW,this.XH,t,this.Rut,this.FW)}hft(t){this.aft.push(t),this.Hl.aZ(t.Z)}async nr(){for(const t of this.aft.slice())await t.nr();En(this.aft),this.Hl.nr()}async yn(){for(const t of this.aft)await t.yn();En(this.aft),this.Hl.yn()}constructor(t,e,i,s,n,r){this.aft=[],this.Hl=new uu([]),this.s8=t,this.WW=e,this.XH=i,this.Rut=s,this.FW=n,this.xot=r}};r();var sU=class extends me{constructor(t){super(ns.zy),this.error=t}};r();var Rs=function(t){return t.zW="static",t.qW="dynamic",t}({});r(),r();var nU=function(t){return t.uft="cft",t}({}),rU=class extends me{constructor(){super(nU.uft)}};r(),r();var oU=class extends me{constructor(t,e){super(ns.Jy),this.representation=t,this.previousRepresentation=e}};r(),r(),r();var Ou=function(t){return t[t.lft=0]="lft",t[t.dft=1]="dft",t[t.fft=2]="fft",t[t._ft=3]="_ft",t[t.vft=4]="vft",t[t.gft=5]="gft",t}({}),hU=function(t){return t[t.mft=0]="mft",t[t.pft=1]="pft",t[t.wft=2]="wft",t[t.yft=3]="yft",t}({});function aU(t,e,i){return i===Ou.lft?i:e!==hU.mft&&e!==hU.pft||i!==Ou.dft&&i!==Ou.fft?t?e===hU.wft?Ou.vft:e===hU.yft?Ou._ft:Ou.lft:Ou.gft:Ou.fft}function uU(t,e,i,s){const n={byte:i};let r=Ou.dft;const o=[],h=31&xu(e,n,s);n.byte+=1;for(let i=0;i<h;i+=1){const h=xu(e,n,s),a=4&h,u=3&h;r=aU(Boolean(a),u,r);const c=xu(e,n,s),l=xu(e,n,s);o.push({bft:t,kL:-1,Aft:!i,Sft:Boolean(a),zw:u,Tft:r,kft:c,Eft:l})}return o}function cU(t,e,i){const s=xu(t,e,i);if(!S(s))return String.fromCharCode(s)}function lU(t){const e=t.A1,i={byte:t.w1},s=t.b1,n=xu(e,i,s);if(255===n&&(i.byte+=1),181!==n)return;const r=WN(e,i);if(47!==r&&49!==r)return;if(49===r){const t=function(t,e,i){let s="",n=i;for(;n>0;)n-=1,s+=cU(t,e);return s}(e,i,4);if("GA94"!==t)return}if(3!==xu(e,i,s))return;47===r&&(i.byte+=1);const o=t;return o.xft=i.byte,o}function dU(t){return 4===t.g1}function fU(t){const e=t.filter(dU).map(lU).filter(ol),i=[];for(const t of e)i.push(...uU(t.v1,t.A1,t.xft,t.b1));return i}r();var _U="und";function vU(t){if(t===_U)return;const e=t.toLowerCase();for(const t of gU)if(t[1]===e||t[2]===e||t["2T"]===e||t["2B"]===e||t[3]===e)return t}var gU=[{l:"Abkhaz",mh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",mh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",mh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",mh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",mh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",mh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",mh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",mh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",mh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",mh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",mh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",mh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",mh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",mh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",mh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",mh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",mh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",mh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",mh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",mh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",mh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",mh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",mh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",mh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",mh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",mh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",mh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",mh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",mh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",mh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",mh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",mh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",mh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",mh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",mh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",mh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",mh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",mh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",mh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",mh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",mh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",mh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",mh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",mh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",mh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",mh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",mh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",mh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",mh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",mh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",mh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",mh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",mh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",mh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",mh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",mh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",mh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",mh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",mh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",mh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",mh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",mh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",mh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",mh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",mh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",mh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",mh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",mh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",mh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",mh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",mh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",mh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",mh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",mh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",mh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",mh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",mh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",mh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",mh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",mh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",mh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",mh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",mh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",mh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",mh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",mh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",mh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",mh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",mh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",mh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",mh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",mh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",mh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",mh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",mh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",mh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",mh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",mh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",mh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",mh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",mh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",mh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",mh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",mh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",mh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",mh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",mh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",mh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",mh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",mh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",mh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",mh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",mh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",mh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",mh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",mh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",mh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",mh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",mh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",mh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",mh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",mh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",mh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",mh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",mh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",mh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",mh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",mh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",mh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",mh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",mh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",mh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",mh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",mh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",mh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",mh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",mh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",mh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",mh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",mh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",mh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",mh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",mh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",mh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",mh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",mh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",mh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",mh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",mh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",mh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",mh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",mh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",mh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",mh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",mh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",mh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",mh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",mh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",mh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",mh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",mh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",mh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",mh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",mh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",mh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",mh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",mh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",mh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",mh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",mh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",mh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",mh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",mh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",mh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",mh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",mh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",mh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",mh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",mh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",mh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",mh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",mh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",mh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",mh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];r();function mU(t){var e;const i=null!=(e=function(t){const e=t.t1,i=new Oe;return i.o1(e,0,e.byteLength),jN(i).V1}(t))?e:24;return t.Ift/i}function pU(t){return t.zw===Ai.gD}function wU(t,e,i,s,n){const r=function(t,e,i,s){const n=i.Ift,r=po.fromNumber(t.OL||0),o=s.QO(Ic.eV(r,n));return{Rft:s.VF(),Cft:s,Pft:o,Dft:s}}(t,0,i,s),o=Ic.iV(t.ct||0,i.Ift),h=t.uN||0,a=!(65536&h)&&1!==(h>>24&3);let u;const c=sa(n),l=new er;for(;l.nc<c.byteLength;){const t=$e(c,l);if((31&Xm(c,l,1))===zN.C1){const e=new Oe;e.o1(n,l.nc-1,l.nc+t-1);const i=new KN(e),s=ZN(r.Pft,i);u=u||[],u.push(...fU(s))}l.Pb(t-1)}return ne({},r,{ct:o.VF(),Nft:o,Mft:r.Pft.VF(),Lft:r.Rft,Bft:a,Oft:u,Fft:!1,Vft:!1})}function yU(t){return{VN:t.sN.VN,Ift:t.LN.sN.RN}}function bU(t){return t.zw===Ai.kP}r(),r(),r(),r(),r(),r(),r(),r();var yc=class{IF(t){return this.Uet===t.Uet&&this.Cet===t.Cet}constructor(t,e){this.Uet=t,this.Cet=e}};r();var AU=class{get eit(){return this.Wft}get jet(){return[this]}get $et(){return this.IJ}get Let(){return this.Uft}get Fet(){return new yc(this.Let.Uet,this.Let.Cet+this.eit.length-1)}Gft(t){this.Wft+=t}Zft(t){for(const e of t)this.Gft(e)}constructor(t,e){this.IJ=t,this.Uft=e,this.Wft=""}};function SU(t,e){return t===e||t.eit===e.eit&&t.Let.IF(e.Let)&&Et(t.$et,e.$et)}function TU(t,e){return t===e||t.Let.IF(e.Let)&&t.Fet.IF(e.Fet)&&rf(t.jet,e.jet,SU)}var kU=class extends He{RF(t){return rf(this.U,t.U,TU)}constructor(t,e,i){super(t,e,i,!1)}};r();var EU=class{Hft(t){return t.tW(this)}Xft(t){return Ye(t,((t,e)=>t.tW(this,e)))}zft(t,e){return new xU(t,e).qft()}},xU=class{qft(){if(this.Yft)return[];for(let t=0;t<this.Uet.length;t++)this.Kft(t);return this.jft(),this.Qft}Jft(t){this.$ft=new AU(HO,new yc(this.t_t,t))}jft(){this.$ft&&(this.Qft.push(this.$ft),this.$ft=null)}Kft(t){const e=this.Uet[t];IU(e)?this.$ft&&this.jft():(this.$ft||this.Jft(t),this.$ft.Gft(e))}get Yft(){return this.Uet.every(IU)}constructor(t,e){this.Uet=t,this.t_t=e,this.Qft=[],this.$ft=null}};function IU(t){return null==t}var RU=class{static e_t(t,e,i){if(e>=i)return;const s=Ye(t,((t,e)=>new xU(t.map((t=>t?t.i_t():null)),e).qft()));return 0!==s.length?new kU(e,i,s):void 0}},Ml="black",Tr="white";r(),r();var CU=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce(((t,e)=>(t[e[0]]=e[1],t)),{}),PU=class{s_t(t){for(let e=0;e<Jt;e++)t&&(this.n_t[e]=t.n_t[e])}IF(t){for(let e=0;e<Jt;e++)if(this.n_t[e]!==t.n_t[e])return!1;return!0}r_t(){for(let t=0;t<Jt;t++)if(null!==this.n_t[t])return!1;return!0}o_t(t){this.h_t!==t&&(this.h_t=t),this.h_t<0?this.h_t=0:this.h_t>Jt&&(this.h_t=31)}a_t(t){const e=this.h_t+t;this.o_t(e)}u_t(){this.a_t(-1),this.n_t[this.h_t]=null}Gft(t){t>=144&&this.u_t();const e=function(t){return CU[t]?String.fromCharCode(CU[t]):String.fromCharCode(t)}(t);this.addParsedChar(e)}addParsedChar(t){this.h_t>=Jt||(32===Number(t)?(this.n_t[this.h_t]=this.c_t?"</i>":"<i>",this.c_t=!this.c_t):this.n_t[this.h_t]=t,this.a_t(1))}l_t(t){for(let e=t;e<Jt;e++)this.n_t[e]=null}Gb(){this.l_t(0),this.h_t=0}d_t(){this.l_t(this.h_t)}f_t(t,e){const i=this.n_t;let s=null;for(let n=0;n<Jt;n++){const r=i[n];null===r?s=null:(s||(s={qh:n,zh:t,ji:0,Ti:1,n_t:[[]]},e.push(s)),s.n_t[0].push(r),s.ji++)}}tW(t,e){return t.zft(this.n_t,e)}constructor(){this.n_t=[],this.h_t=0;for(let t=0;t<Jt;t++)this.n_t.push(null);this.c_t=!1}};var DU=class{__t(t,e){const i="CC"+(this.v_t<<1|this.g_t+1);if(t>=e)return null;const s=(new EU).Xft(this.m_t.slice(1));return 0===s.length?null:{uF:new kU(t,e,s),Ok:i,p_t:this.v_t<<1|this.g_t+1}}nr(){this.w_t(),this.y_t=1}b_t(){return this.y_t}A_t(t){this.y_t=t}o_t(t){this.m_t[this.y_t].o_t(t)}a_t(t){this.m_t[this.y_t].a_t(t)}S_t(){return this.T_t}k_t(t){this.T_t=t}Gft(t,e){if(e<32||e>127)return;let i="";switch(t){case 0:i=void 0!==LU[e]?LU[e]:String.fromCharCode(e);break;case 1:i=BU[e];break;case 2:this.E_t(),i=OU[e];break;case 3:this.E_t(),i=FU[e]}i&&this.m_t[this.y_t].addParsedChar(i)}E_t(){this.m_t[this.y_t].u_t()}x_t(t,e,i){if(t>=e)for(let s=i-1;s>=0;s--)this.m_t[t+s]=this.m_t[e+s];else for(let s=0;s<i;s++)this.m_t[t+s]=this.m_t[e+s]}I_t(t,e){for(let i=0;i<=e;i++)this.m_t[t+i]=new PU}w_t(){this.I_t(0,NU)}R_t(){this.y_t=this.T_t>0?this.T_t:0,this.w_t()}C_t(t){this.P_t=t}D_t(t){this.N_t=t}M_t(t){this.L_t=t}B_t(t){this.O_t=t}constructor(t,e){this.m_t=new Array(NU+1);for(let t=0;t<=NU;t++)this.m_t[t]=new PU;this.y_t=1,this.T_t=0,this.v_t=t,this.g_t=e,this.P_t=!1,this.N_t=!1,this.L_t=Tr,this.O_t=Ml,this.nr()}},NU=15,MU=function(t){return t[t.F_t=0]="F_t",t[t.V_t=1]="V_t",t[t.W_t=2]="W_t",t[t.U_t=3]="U_t",t}({}),LU={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},BU={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},OU={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},FU={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"},jr=class{nr(){this.G_t=!0,this.Z_t=0,this.Zp=0,this.H_t=this.X_t,this.z_t=void 0,this.X_t.nr(),this.q_t.nr(),this.Y_t.nr()}K_t(t,e){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|e>>5&1]}j_t(t,e){const i=this.K_t(t,e),s=(30&e)>>1;let n=Tr,r=!1;s<7?n=UU[s]:7===s&&(r=!0);const o=1==(1&e);if(4===this.Zp)return;const h=this.H_t;if(3===this.Zp&&i!==h.b_t()){const t=1+h.b_t()-h.S_t(),e=1+i-h.S_t();h.x_t(e,t,h.S_t()),h.I_t(0,e-1),h.I_t(i+1,NU-i)}h.A_t(i);const a=zO[t<<1&14|e>>5&1]-1;if(a<0)return;const u=function(t,e){const i=e>95?e-96:e-64;return{Ret:XO[i].Ret,Iet:XO[i].Iet,Cet:XO[i].Cet,Uet:t}}(a,e);h.o_t(u.Cet),this.H_t.C_t(o),this.H_t.D_t(r),this.H_t.M_t(n),this.H_t.B_t(Ml)}Q_t(t,e){this.H_t.C_t(!1),this.H_t.D_t(!1),this.H_t.M_t(Tr);const i=this.J_t(t,MU.F_t," ".charCodeAt(0));let s=Tr,n=!1;const r=1==(1&e);return s=UU[(14&e)>>1],"white_italics"===s&&(s="white",n=!0),this.H_t.C_t(r),this.H_t.D_t(n),this.H_t.M_t(s),i}J_t(t,e,i){if(this.H_t.Gft(e,i),2===this.Zp||3===this.Zp){const e=this.$_t(this.H_t,this.Z_t,t);return this.Z_t=t,e}return null}$_t(t,e,i){return this.G_t?null:2===this.Zp||3===this.Zp?t.__t(i,i+10):t.__t(e,i)}tvt(t,e){let i=Ml;0==(7&t)&&(i=WU[(14&e)>>1]),this.H_t.B_t(i)}evt(t){const e=VU,i=t.ivt,s=t.svt;let n=null;switch(i){case e.RCL:this.nvt();break;case e.BS:this.rvt();break;case e.AOD:case e.AON:case e.DER:break;case e.RU2:n=this.ovt(2,s);break;case e.RU3:n=this.ovt(3,s);break;case e.RU4:n=this.ovt(4,s);break;case e.FON:n=this.avt(s);break;case e.RDC:this.uvt(s);break;case e.TR:this.cvt();break;case e.RTD:this.lvt();break;case e.EDM:n=this.dvt(s);break;case e.CR:n=this.fvt(s);break;case e.ENM:this._vt();break;case e.EOC:n=this.vvt(s)}return n}fvt(t){const e=this.H_t;if(3!==this.Zp)return null;const i=this.$_t(e,this.Z_t,t),s=e.b_t()-e.S_t()+1;return e.x_t(s-1,s,e.S_t()),e.I_t(0,s-1),e.I_t(e.b_t(),NU-e.b_t()),this.Z_t=t,i}ovt(t,e){this.H_t=this.X_t;const i=this.H_t;let s=null;return 3!==this.Zp&&4!==this.Zp&&(s=this.$_t(i,this.Z_t,e),this.X_t.R_t(),this.q_t.R_t(),this.G_t=!1,i.A_t(NU)),this.Zp=3,i.k_t(t),s}avt(t){return this.J_t(t,MU.F_t," ".charCodeAt(0))}dvt(t){const e=this.X_t;let i=null;return 4!==this.Zp&&(i=this.$_t(e,this.Z_t,t)),e.w_t(),this.G_t=!1,i}uvt(t){this.Zp=2,this.H_t=this.X_t,this.H_t.k_t(0),this.Z_t=t}_vt(){this.q_t.w_t()}vvt(t){let e=null;4!==this.Zp&&(e=this.$_t(this.X_t,this.Z_t,t));const i=this.q_t;return this.q_t=this.X_t,this.X_t=i,this.nvt(),this.Z_t=t,e}nvt(){this.Zp=1,this.H_t=this.q_t,this.H_t.k_t(0)}rvt(){this.H_t.E_t()}cvt(){this.Y_t.nr(),this.G_t=!1,this.lvt()}lvt(){this.H_t=this.Y_t,this.Zp=4}gvt(t,e,i){return this.H_t.Gft(MU.F_t,e),this.J_t(t,MU.F_t,i)}mvt(t,e,i){const s=1&e?MU.U_t:MU.W_t;return this.J_t(t,s,i)}pvt(t){const e=t.wvt,i=t.ivt,s=t.svt;if(this.z_t===(e<<8|i))return this.z_t=void 0,null;if(this.z_t=e<<8|i,this.yvt(e,i))this.j_t(e,i);else{if(this.bvt(e,i))return this.Q_t(s,i);if(this.Avt(e,i))this.tvt(e,i);else{if(this.Svt(e,i))return this.J_t(s,MU.V_t,i);if(this.Tvt(e,i))return this.mvt(s,e,i);if(this.kvt(e,i))return this.evt(t);this.isTabOffset(e)&&this.H_t.a_t(i-32)}}return null}isTabOffset(t){return 23===t||31===t}kvt(t,e){return 20==(246&t)&&32==(240&e)}yvt(t,e){return 16==(240&t)&&64==(192&e)}bvt(t,e){return 17==(247&t)&&32==(240&e)}Avt(t,e){return 16==(247&t)&&32==(240&e)||23==(247&t)&&45==(255&e)}Svt(t,e){return 17==(247&t)&&48==(240&e)}Tvt(t,e){return 18==(246&t)&&32==(224&e)}static Evt(t){return 16==(112&t)}constructor(t,e){this.Zp=0,this.Y_t=new DU(t,e),this.X_t=new DU(t,e),this.q_t=new DU(t,e),this.H_t=this.X_t,this.Z_t=0,this.z_t=void 0,this.G_t=!1}},VU={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47},WU=["black","green","blue","cyan","red","yellow","magenta","black"],UU=["white","green","blue","cyan","red","yellow","magenta","white_italics"];r(),r(),r();var GU=class{i_t(){return this.xvt}Ivt(){return this.P_t}Rvt(){return this.N_t}Cvt(){return this.O_t}Pvt(){return this.L_t}constructor(t,e,i,s,n){this.xvt=t,this.P_t=e,this.N_t=i,this.O_t=s,this.L_t=n}},ZU=class{Dvt(t,e,i,s,n,r,o){this.LH=t,this.Nvt=e,this.Mvt=i,this.Lvt=s,this.Bvt=n,this.Ovt=r,this.Fvt=o}Vvt(){this.Wvt=[];for(let t=0;t<XU;t++)this.Wvt.push(this.Uvt())}Uvt(){const t=[];for(let e=0;e<HU;e++)t.push(null);return t}Gvt(t){this.Zvt()&&(this.Wvt[this.y_t][this.Hvt]=new GU(t,this.P_t,this.N_t,this.O_t,this.L_t),this.Hvt++)}Xvt(){this.Zvt()&&(this.Hvt<=0&&this.y_t<=0||(this.Hvt<=0?(this.Hvt=this.Fvt-1,this.y_t--):this.Hvt--,this.Wvt[this.y_t][this.Hvt]=null))}Zvt(){const t=this.y_t<this.Ovt&&this.y_t>=0,e=this.Hvt<this.Fvt&&this.Hvt>=0;return t&&e}De(){return this.LH}zvt(t){let e=0;for(let i=t;i<XU;i++,e++)this.Wvt[e]=this.Wvt[i];for(let i=0;i<t;i++,e++)this.Wvt[e]=this.Uvt()}qvt(){if(this.y_t+1>=this.Ovt)return this.zvt(1),void(this.Hvt=0);this.y_t++,this.Hvt=0}Yvt(){this.Wvt[this.y_t]=this.Uvt(),this.Hvt=0}__t(t,e){if(this.bF>=t)return null;const i=RU.e_t(this.Wvt,this.bF,t);return i?(this.Kvt(t),{uF:i,Ok:"svc"+e,p_t:e}):null}jvt(t,e){this.y_t=t,this.Hvt=e}Qvt(t){this.O_t=t}Jvt(t){this.L_t=t}$vt(t){this.P_t=t}tgt(t){this.N_t=t}egt(){this.y_t=0,this.Hvt=0,this.P_t=!1,this.N_t=!1,this.L_t=Tr,this.O_t=Ml}igt(t){this.sgt=t}ngt(){this.LH=!0}be(){this.LH=!1}Sh(){this.LH=!this.LH}Kvt(t){this.bF=t}constructor(t){this.rgt=t,this.LH=!1,this.Bvt=!1,this.Mvt=0,this.Nvt=0,this.Lvt=0,this.Ovt=0,this.Fvt=0,this.sgt=2,this.Wvt=[],this.bF=0,this.y_t=0,this.Hvt=0,this.N_t=!1,this.P_t=!1,this.L_t=Tr,this.O_t=Ml,this.Vvt()}},HU=42,XU=15,zU=class{ogt(t){const e=t.hgt();let i=e.Fx;const s=e.svt;if(i===QU){i=i<<16|t.hgt().Fx}return i>=0&&i<=31?this.agt(i,s):i>=128&&i<=159?this.ugt(t,i,s):(i>=4096&&i<=4127?this.cgt(t,255&i):i>=4224&&i<=4255?this.lgt(t,255&i):i>=32&&i<=127?this.dgt(i):i>=160&&i<=255?this.fgt(i):i>=4128&&i<=4223?this._gt(255&i):i>=4256&&i<=4351&&this.vgt(255&i),null)}dgt(t){this.ggt&&(127!==t?this.ggt.Gvt(String.fromCharCode(t)):this.ggt.Gvt("\u266a"))}fgt(t){this.ggt&&this.ggt.Gvt(String.fromCharCode(t))}_gt(t){if(!this.ggt)return;if(void 0===JU[t])return void this.ggt.Gvt("_");const e=JU[t];this.ggt.Gvt(e)}vgt(t){this.ggt&&(160===t?this.ggt.Gvt("[CC]"):this.ggt.Gvt("_"))}agt(t,e){if(!this.ggt)return null;const i=this.ggt;let s=null;switch(t){case qU:i.Xvt();break;case KU:i.De()&&(s=i.__t(e,this.mgt)),i.qvt();break;case jU:i.De()&&(s=i.__t(e,this.mgt)),i.Yvt();break;case YU:i.De()&&(s=i.__t(e,this.mgt)),i.Vvt(),i.jvt(0,0)}return s}ugt(t,e,i){if(e>=128&&e<=135){const t=7&e;this.pgt(t)}else{if(136===e){const e=t.hgt().Fx;return this.wgt(e,i)}if(137===e){const e=t.hgt().Fx;this.ygt(e,i)}else{if(138===e){const e=t.hgt().Fx;return this.bgt(e,i)}if(139===e){const e=t.hgt().Fx;return this.Agt(e,i)}if(140===e){const e=t.hgt().Fx;return this.Sgt(e,i)}if(143===e)return this.nr(i);if(144===e)this.Tgt(t);else if(145===e)this.kgt(t);else if(146===e)this.jvt(t);else if(151===e)this.Egt(t);else if(e>=152&&e<=159){const s=(15&e)-8;this.Dvt(t,s,i)}}}return null}cgt(t,e){e>=8&&e<=15?t.zD(1):e>=16&&e<=23?t.zD(2):e>=24&&e<=31&&t.zD(3)}lgt(t,e){e>=128&&e<=135?t.zD(4):e>=136&&e<=143&&t.zD(5)}pgt(t){this.xgt[t]&&(this.ggt=this.xgt[t])}*Igt(t){for(let e=0;e<8;e++){1==(1&t)&&this.xgt[e]&&(yield e),t>>=1}}wgt(t,e){let i=null;for(const s of this.Igt(t)){const t=this.xgt[s];t.De()&&(i=t.__t(e,this.mgt)),t.Vvt()}return i}ygt(t,e){for(const i of this.Igt(t)){const t=this.xgt[i];t.De()||t.Kvt(e),t.ngt()}}bgt(t,e){let i=null;for(const s of this.Igt(t)){const t=this.xgt[s];t.De()&&(i=t.__t(e,this.mgt)),t.be()}return i}Agt(t,e){let i=null;for(const s of this.Igt(t)){const t=this.xgt[s];t.De()?i=t.__t(e,this.mgt):t.Kvt(e),t.Sh()}return i}Sgt(t,e){let i=null;for(const s of this.Igt(t)){const t=this.xgt[s];t.De()&&(i=t.__t(e,this.mgt)),this.xgt[s]=void 0}return i}nr(t){const e=this.Sgt(255,t);return this.Gb(),e}Gb(){this.ggt=void 0,this.xgt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}Tgt(t){t.zD(1);const e=t.hgt().Fx;if(!this.ggt)return;const i=(128&e)>0,s=(64&e)>0;this.ggt.tgt(i),this.ggt.$vt(s)}kgt(t){const e=t.hgt().Fx,i=t.hgt().Fx;if(t.zD(1),!this.ggt)return;const s=3&e,n=(12&e)>>2,r=(48&e)>>4,o=3&i,h=(12&i)>>2,a=(48&i)>>4,u=this.Rgt(r,n,s),c=this.Rgt(a,h,o);this.ggt.Jvt(u),this.ggt.Qvt(c)}jvt(t){const e=t.hgt().Fx,i=t.hgt().Fx;if(!this.ggt)return;const s=15&e,n=63&i;this.ggt.jvt(s,n)}Egt(t){t.zD(1),t.zD(1);const e=t.hgt().Fx;if(t.zD(1),!this.ggt)return;const i=3&e;this.ggt.igt(i)}Dvt(t,e,i){const s=void 0!==this.xgt[e];if(!s){const t=new ZU(e);t.Kvt(i),this.xgt[e]=t}const n=t.hgt().Fx,r=t.hgt().Fx,o=t.hgt().Fx,h=t.hgt().Fx,a=t.hgt().Fx,u=t.hgt().Fx,c=(32&n)>0,l=127&r,d=(128&r)>0,f=o,_=1+(15&h),v=(240&h)>>4,g=1+(63&a);s&&0===(7&u)||this.xgt[e].egt(),this.xgt[e].Dvt(c,l,f,v,d,_,g),this.ggt=this.xgt[e]}Rgt(t,e,i){const s={0:0,1:0,2:1,3:1};return $U[s[t]<<2|s[e]<<1|s[i]]}constructor(t){this.mgt=t,this.xgt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.ggt=void 0}},qU=8,YU=12,KU=13,jU=14,QU=16,JU={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},$U=["black","blue","green","cyan","red","magenta","yellow","white"];r();var tG=class{Cgt(t){if(t.zw===hU.yft){const e=63&t.Fx;return this.Pgt=2*e-1,void(this.Dgt=[])}if(this.Dgt&&(this.Pgt>0&&(this.Dgt.push(t),this.Pgt--),0===this.Pgt)){const t=new eG(this.Dgt);this.Ngt.push(t),this.Dgt=null,this.Pgt=0}}Mgt(){return this.Ngt}Lgt(){this.Ngt=[]}Gb(){this.Ngt=[],this.Dgt=[],this.Pgt=0}constructor(){this.Ngt=[],this.Dgt=null,this.Pgt=0}},eG=class{Bgt(){return this.Ogt<this.Fgt.length}Vgt(){return this.Ogt}hgt(){if(!this.Bgt())throw new Z(Ci.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.Fgt[this.Ogt++]}zD(t){if(this.Ogt+t>this.Fgt.length)throw new Z(Ci.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this.Ogt+=t}constructor(t){this.Ogt=0,this.Fgt=t}},iG=class{Gb(){this.Wgt=0,this.Ugt=[],this.Ggt=[],this.Zgt.Gb(),this.nr(),this.Hgt.forEach((t=>{t.Gb()}))}nr(){this.Xgt=0,this.zgt=0,this.qgt.forEach((t=>{t.nr()}))}Ygt(t,e){if(t.Sft){const i=t.kft,s=t.Eft,n=t.zw;n===hU.mft||n===hU.pft?this.Ugt.push({svt:e,zw:n,wvt:i,ivt:s,Kgt:this.Ugt.length}):this.jgt&&(this.Ggt.push({svt:e,zw:n,Fx:i,Kgt:this.Ggt.length}),this.Ggt.push({svt:e,zw:hU.wft,Fx:s,Kgt:this.Ggt.length}))}}Tq(){const t=[];this.Ugt.sort(((t,e)=>t.svt-e.svt||t.Kgt-e.Kgt)),this.Ggt.sort(((t,e)=>t.svt-e.svt||t.Kgt-e.Kgt));for(const e of this.Ugt){const i=this.Qgt(e);i&&t.push(i)}for(const t of this.Ggt)this.Zgt.Cgt(t);const e=this.Zgt.Mgt();for(const i of e){const e=this.Jgt(i);t.push(...e)}return this.Zgt.Lgt(),this.Ugt=[],this.Ggt=[],t}Qgt(t){const e=t.zw;if(jr.Evt(t.wvt)){const i=t.wvt>>3&1;0===e?this.Xgt=i:this.zgt=i}const i="CC"+(e<<1|(e?this.zgt:this.Xgt)+1),s=this.qgt.get(i);return 255===t.wvt&&255===t.ivt||!t.wvt&&!t.ivt||!this.$gt(t.wvt)||!this.$gt(t.ivt)?(++this.Wgt>=45&&this.nr(),null):(this.Wgt=0,t.wvt&=127,t.ivt&=127,t.wvt||t.ivt?jr.Evt(t.wvt)?s.pvt(t):s.gvt(t.svt,t.wvt,t.ivt):null)}Jgt(t){const e=[];try{for(;t.Bgt();){const i=t.hgt().Fx;let s=(224&i)>>5;const n=31&i;if(7===s&&0!==n){s=63&t.hgt().Fx}if(0!==s){if(!this.Hgt.has(s)){const t=new zU(s);this.Hgt.set(s,t)}const i=this.Hgt.get(s),r=t.Vgt();for(;t.Vgt()-r<n;){const s=i.ogt(t);s&&e.push(s)}}}}catch(t){if(!(t instanceof Z&&t.code===Ci.SUBTITLE_PARSE_ERROR))throw t}return e}$gt(t){let e=0;for(;t;)e^=1&t,t>>=1;return 1===e}constructor(){this.jgt=!1,this.Ugt=[],this.Ggt=[],this.Zgt=new tG,this.Wgt=0,this.qgt=Eg({CC1:new jr(0,0),CC2:new jr(0,1),CC3:new jr(1,0),CC4:new jr(1,1)}),this.Xgt=0,this.zgt=0,this.Hgt=Bh(),this.nr()}};r();var sG=class extends me{constructor(t,e){super("tmt"),this.p_t=t,this.uF=e}},nG=Ic.GV(.1),rG=class extends So{emt(t,e){this.imt.Ygt(t,e)}Tq(){const t=this.imt.Tq();for(const e of t)this._o(new sG(e.p_t,e.uF))}nr(){this.imt.Gb()}yn(){this.Ro(),this.imt.Gb()}constructor(){super(),this.imt=new iG}},oG=class extends rG{smt(t,e,i,s){const n=this.nmt(t,s);this.omt(n,e,i),this.Tq()}nmt(t,e){const i=t.slice().sort(qO),s=this.hmt;if(0===s.length)return i;if(0===i.length)return s;let n;const r=s[0].Pet,o=s[s.length-1].Pet,h=i[0].Pet,a=s[0].jht===i[0].jht;if(o.jF(h).qF().zF(Ic.GV(2.5*e))&&a)n=s.concat(i).sort(qO);else if(h.GF(r)){let t=0;for(;t<s.length&&s[t].Pet.zF(h);)t++;let e=!1,r=!1;for(let n=t,o=0;n<s.length&&o<i.length;n++,o++)hG(s[n],i[o])?e=!0:r=!0;const o=e&&!r,a=e&&r;!e&&r?n=s.concat(i).sort(qO):o?n=s.slice(0,t).concat(i):(n=i,a&&this.nr())}else n=i,this.nr();return n}omt(t,e,i){for(let s=0;s<t.length;s++){const n=t[s],r=n.Pet.VF();if(!i&&e-r<nG.VF())return void(this.hmt=t.slice(s));this.emt(n,r)}this.hmt=[]}constructor(...t){super(...t),this.hmt=[]}};function hG(t,e){return t.Pet.IF(e.Pet)&&t.zw===e.zw&&t.kft===e.kft&&t.Eft===e.Eft}var aG=class extends Zx{amt(t){return this.umt.get(t)}cmt(t){let e=this.umt.get(t.Det);return e||(e=this.lmt(t),this.umt.set(t.Det,e)),e}lmt(t){const e=[Pe.IC],i=vU(t.Net);let s=i?i.l:"";t.dmt&&(s="easy "+s,e.push(Pe.MC));const n=t.Ch||s||"CC"+t.Det,r=this.doCreateTrack(n,t.Net,e);return this.tt(r),r}Tot(t){const e=Es.cN(sa(t));this.fmt=function(t){for(const e of t.Z){const t=yU(e),i=e.LN.zN.KN.QN.$N;let s=Do(i,(t=>t.zw===Ai.FP));if(!s){const t=i.filter((t=>t.zw===Ai.vD)),e=Do(t,(t=>{var e;return(null==(e=t.zM)?void 0:e.zw)===Ai.FP}));e&&(s=e.zM)}if(!s)continue;const n=VN(sa(s.NM.$k),new er),r=s.LM;return ne({},t,{VN:e.sN.VN,NM:dp(s.NM.$k),ji:s.ji,Ti:s.Ti,gL:r&&r.gL,vL:r&&r.vL,b2:n.j0,_mt:n.Q0,A2:n.J0,t1:n.t1[0],e1:n.e1[0]})}}(Do(e,bU))}adt(t,e,i,s,n,r){var o;if(!this.fmt)return;if(!S(this.vmt)&&rs(this.vmt,e,1e-5))return;S(this.gmt)||rs(this.gmt,e,.1)||this.mmt.nr();const h=function(t,e,i,s,n){const r=[],o=e.filter(pU),h=s(i);for(const e of o){const s=Do(e.Z,(t=>t.sN.VN===i.VN));if(!s)continue;const o=s.sN.wL||0,u=s.sN.yL||0;let c=s.CL?s.CL.CL:po.ZERO;var a;const l=e.TL+(null!=(a=s.sN.PL)?a:po.ZERO).toNumber();for(const a of s.RL){let s=l+(a.TL||0);for(const l of a.BL){const a=l.Ob||u,d=new Oe;d.o1(t,s,s+a);const f=Ic.eV(c,i.Ift);d.pW=n(l,e,i,f,Hc(t,s,s+a)),r.push(d),s+=a,c=c.add(l.ct||o||h)}}}return r}(t,Es.cN(sa(t)),this.fmt,mU,wU);var a;const u=null!=(a=null==(o=uf(h,(t=>t.pW.ct)))?void 0:o.pW.ct)?a:0,c=function(t){const e=[];for(const i of t)i.pW.Oft&&e.push(...i.pW.Oft),delete i.pW.Oft;for(let t=0;t<e.length;t+=1)e[t].kL=t;return e}(h),l=Ic.GV(s),d=[];for(const t of c)d.push(ne({},t,{jht:n,Pet:t.bft.QO(l)}));this.mmt.smt(d,i,r,u),this.vmt=e,this.gmt=i}nr(){return this.mmt.nr(),this.umt.forEach((t=>{t.yn(),this.it(t),this.pmt(t)})),this.umt.clear(),this.fmt=void 0,this.vmt=NaN,this.gmt=NaN,super.nr()}yn(){return this.mmt.vn("tmt",this.wmt),this.mmt.yn(),super.yn()}constructor(t){super(),this.fmt=void 0,this.vmt=NaN,this.gmt=NaN,this.wmt=t=>{const e=this.cmt({Det:t.p_t,Net:""}),i=t.uF;for(const t of e.L.mC)i.lF<t.lF&&i.dF>t.lF?i.dF=t.lF:i.lF>t.lF&&t.dF>i.lF?t.dF=i.lF:i.lF===t.lF&&(i.dF=t.dF);this.addCueToTrack(e,i)},this.FW=t,this.umt=Bh(),this.mmt=new oG,this.mmt.bn("tmt",this.wmt)}},uG=class extends aG{pmt(t){}addCueToTrack(t,e){if(t.LE===Ui.Mh)return;const i=e.U.map((t=>t.eit)).join("\n"),s=t.L.V>0?t.L.mC[t.L.V-1]:void 0;s&&s.U===i&&s.lF<=e.lF&&e.lF<=s.dF?s.dF=_.max(s.dF,e.dF):t.n8(e.lF,e.dF,i)}doCreateTrack(t,e,i){return this.FW.UZ({zw:"webvtt",Lt:Hi.kW,Ch:t,gs:e})}},ft=class extends aG{pmt(t){this.FW.ZW(t)}addCueToTrack(t,e){t.UW(e)}doCreateTrack(t,e,i){return this.FW.ZR(Hi.kW,t,t,e,!1,Hr.CEA608,void 0,i)}};r(),r();var cG=/(.*)=(.*)/,lG=/(.*):(.*)/;function dG(t){if(!t)return[];const e=[],i=t.trim().split(";");for(const t of i){const i=t.match(cG);if(i){const[,t,s]=i;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(lG)){const[,e,i]=t.match(lG);switch(e){case"lang":n=i;break;case"er":r=Boolean(Number(i))}}e.push({Det:Number(t),Net:n,dmt:r})}}return e}var fG={1:1,2:3,3:2,4:4},_G="urn:scte:dash:cc:cea-608:2015",vG="urn:scte:dash:cc:cea-708:2015";r(),r();var $u=class extends $s{ka(){return new gG(this.jht&&this.jht.wa)}constructor(t,e,i){super(gs.fC),this.jht=t,this.ict=e,this.ymt=i}},gG=class extends me{constructor(t){super("activequalitychanged"),this.quality=t}},mG=[ns.ho,Zc.aC,ns._b],pG=class extends So{bmt(t){const e=this.Udt.sat;for(const i of e.Ht.Mat)if(e.Tct.yct(t,i))return i}yn(){this.Ro(),this.aO.vn(mG,this.Amt)}constructor(t,e){super(),this.Amt=t=>{const e=this.Smt,i=this.bmt(t.currentTime)||this.Udt.Jht;i&&e!==i&&(this.Smt=i,i.jht&&this._o(new $u(i.jht,null==i?void 0:i.wa,null==e?void 0:e.wa)))},this.aO=t,this.aO.bn(mG,this.Amt),this.Udt=e}};function wG(t,e,i){const s=new mu(sa(t),new er),n=ci.eN(s,Ai.kP);if(!n)return;const r=ci.KD(n.$k),o=Do(r,(t=>t.zw===Ai.xP)),h=Do(r,(t=>t.zw===Ai.kD));if(!o)return;const a=ci.eN(o.$k,Ai.RP);if(!a)return;const u=ci.eN(a.$k,Ai.DP);if(!u)return;const c=ci.eN(u.$k,Ai.NP);if(!c)return;const l=ci.KD(c.$k),d=Do(l,(t=>t.zw===Ai.MP));if(!d)return;const f=ci.hN(d.$k,Ai.MP,!1),_=new mu(sa(f.$k),new er);_.zD(4);const v=ci.KD(_),g=[];for(const t of v){if(t.zw===Ai._D||t.zw===Ai.vD)return;t.zw===Ai.FP?g.push({Tmt:t,kmt:Ai.vD}):t.zw===Ai.hD&&g.push({Tmt:t,kmt:Ai._D})}if(!function(t,e){return void 0===t&&void 0!==e&&e.length>0}(h,e)&&0===g.length)return;let m=cc(t);const p=Do(r,(t=>t.zw===Ai.BP)),w=p?ci.eN(p.$k,Ai.OP):void 0,y=w?function(t){const e=t.$k.Nb();return e.zD(4),e.zD(4),e.VD()}(w):1,b=Do(l,(t=>t.zw===Ai.LP));b&&function(t,e,i){const s=AG(sa(t),e),n=ci.tN(s,new er),r=n.$k;r.zD(4);const o=r.VD();for(let t=0;t<o;t++){r.zD(4),r.zD(4);const t=r.BD.Nb(),e=r.VD();Ym(r.$k,t,e+i)}}(m,b,g.length),w&&function(t,e,i){const s=AG(sa(t),e),n=ci.tN(s,new er),r=n.$k;r.zD(4),r.zD(4),Ym(r.$k,r.BD,i)}(m,w,1),m=function(t,e,i,s){if(i||!s)return t;let n=t;for(const t of s)n=yG(n,e,new j(t));return n}(m,n,h,e);const A=[n,o,a,u,c,d];for(let t=g.length-1;t>=0;t--){const e=g[t];m=bG(m,e.Tmt,d,A,e.kmt,i)}return{Emt:m,xmt:{Imt:g.length,pL:y}}}function yG(t,e,i){const s=wp(t,i,e.$k.$k.byteOffset+e.$k.$k.byteLength);return SG(AG(sa(s),e),i.byteLength),s}function bG(t,e,i,s,n,r){const o=function(t,e,i){0;const s=t.$k.$k,n=IG(),r=new j(s.byteLength+n.byteLength),o=sa(r);r.set(Lr(s),0),SG(o,n.byteLength),$m(o,new er(PG),e),r.set(n,s.byteLength),$m(o,new er(s.byteLength+RG),t.zw),i&&Zm(o,new er(s.byteLength+CG),i);return r}(e,n,r),h=wp(t,o,e.$k.$k.byteOffset),a=sa(h);!function(t,e){const i=ci.tN(t,new er),s=ci.hN(i.$k,Ai.MP,!1),n=sa(s.$k),r=n.getUint32(0);n.setUint32(0,r+e)}(AG(a,i),1);for(const t of s)SG(AG(a,t),o.byteLength);return h}function AG(t,e){const i=e.$k.$k.byteOffset;return La(t,i,i+e.$k.$k.byteLength)}function SG(t,e){const i=new er,s=$e(t,i);if(0===s);else if(1===s){i.Pb(4);const s=no(t,i.Nb());Km(t,i,s.add(e))}else i.Db(0),Ym(t,i,s+e)}r();var TG=class extends Lo{start(t){this.vJ=t}transform(t){this.F$(t),this.Rmt()}flush(){this.W$(),this.Rmt()}Y$(t){return t===Ai.gD}j$(t){let e=cc(Lr(t.$k.$k));const i=ci.tN(sa(e),new er);e=kG(e,i,this.Cmt),this.Pmt.push(e)}J$(t){this.Pmt.push(t)}Rmt(){for(const t of function(t){if(t.length<2)return t;const e=[];let{buffer:i,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const o=t[r];i===o.buffer&&s+n===o.byteOffset?n+=o.byteLength:(e.push(new j(i,s,n)),({buffer:i,byteOffset:s,byteLength:n}=o))}return e.push(new j(i,s,n)),e}(this.Pmt))this.vJ.enqueue(t);En(this.Pmt)}constructor(t){super(),this.Pmt=[],this.Cmt=t}};function kG(t,e,i){let s=t;const n=ci.KD(e.$k);for(let t=n.length-1;t>=0;t--){const r=n[t];r.zw===Ai.pD&&(s=EG(s,r,e,i))}return s}function EG(t,e,i,s){const n=AG(sa(t),e),r=ci.tN(n,new er),o=ci.KD(r.$k),h=Do(o,(t=>t.zw===Ai.wD));if(!h)return t;const a=h.$k,u=a.BD.Nb(),c=a.VD(),{flags:l}=Jc(c);a.zD(4),l.Mb(to.BASE_DATA_OFFSET_PRESENT)&&a.zD(8);const d=a.BD.Nb();if(l.Mb(to.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const e=$e(a.$k,d);return Ym(a.$k,a.BD,e+s.Imt),t}{Ym(a.$k,u,c|to.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new j(4);sa(n).setUint32(0,s.pL+s.Imt);const r=a.$k.byteOffset+d.nc;for(const t of o.filter((t=>t.zw===Ai.yD)))xG(t,n.byteLength);for(const s of[h,e,i])SG(AG(sa(t),s),n.byteLength);return wp(t,n,r)}}function xG(t,e){const i=t.$k,s=i.VD(),{flags:n}=Jc(s);if(i.zD(4),n.Mb(br.DATA_OFFSET_PRESENT)){const t=i.Nb().VD();Ym(i.$k,i.BD,t+e)}}var IG=Wd((()=>new j([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),RG=16,CG=64,PG=4,DG=[bo.fa,ns.sb,ns.ob,ns.ub,ns.Ey],NG=class extends So{get Ldt(){return this.Bdt}get o(){return this.jS}get j3(){return this.Q3}get nt(){return this.Dmt}get Xdt(){return function(t){const e=29.97,i=1024,s=44100;return t===Fo.wE?s/i:e}(this.Q3)}get Gdt(){return 1/this.Xdt}get Rt(){return Boolean(this.Bdt&&this.Bdt.Rt)}get v$(){const t=this.Udt?this.Udt.sat.v$.vct:ee.WB();return this.Nmt().AB(t)}get SI(){let t=this.Mmt();const e=this.Lmt;return void 0!==e&&t.gB().wr(e)&&(t=t.AB(ee.FB(e))),t}get cct(){return NV(this.Mmt(),this.v$.AB(this.Bmt)).bB(2*this.Gdt)}get Bmt(){const t=this.Lmt;if(t&&isFinite(t)){const e=this.Omt.Tn;if(isFinite(e)&&t<e)return new ee([t,e],[!1,!0])}return ee.WB()}get cR(){const t=this.Bdt;if(!t)return ee.FB(0);const e=t.nct.qdt,i=t.nct.Ydt;if(void 0===i||void 0===e)return ee.FB(0);const s=i;let n=e>=t.nct.Zct.Tn?_.max(e,this.Tn):e;return n=_.max(s,n),ee.VB(s,n).gB()}get pZ(){return this.cct.BB(this.RI)}get _ct(){return this.Omt._ct}get RI(){return this.aO.RI}get Sn(){return this.Bdt?this.Bdt.nct.Zct.Sn:NaN}get Tn(){const t=this.Fmt(),e=this.Lmt;return void 0===t?NaN:void 0!==e?e:t}Fmt(){var t;return null==(t=this.Bdt)?void 0:t.nct.Zct.Tn}get Ti(){return this.Omt.Ti}get ji(){return this.Omt.ji}get Vmt(){return this.Lmt}wat(){return void 0!==this.Udt&&this.Udt.wat}fct(){if(void 0===this.Lmt)return!1;const t=this.Mmt().gB(),e=t.kB(this.Lmt);return!(e<0)&&t.Sn(e)!==this.Lmt}Y3(){const t=this.Omt._ct,e=this.Mmt().jn(t);this.Lmt=e.V>0?e.Tn(e.V-1):0;const i=t.Tn(0);isFinite(i)&&this.Lmt<i&&this.m$(this.Lmt,i),this.Wmt()}async adt(t,e,i,s){const n=i.Eot.aW,r=this.Umt(t,e,i,n,s),o=this.Gmt(t,e,i,n,s),[h]=await qe([o,r]);return h}async Umt(t,e,i,s,n){if(!Xh(i.SY))return;let r;if(t.zw===To.Ik){const e=t.$k.Tut(),i=await e.Bk(n);r=new j(i)}else r=new j(t.$k.eht);const o=[];if(void 0!==this.Zmt&&(this.Zmt.adt(r,e.lF,s),o.push(this.Zmt)),void 0!==this.Hmt){const t=i.Gct(e);this.Hmt.adt(r,e.lF,e.dF,s,i.jht,t),o.push(this.Hmt)}Gx(this.SI,o)}async Gmt(t,e,i,s,n){var r;let o;if(Io(n),t.zw===To.Ik){let e=t.$k.Ok;this.Xmt&&(e=function(t,e){return t.pipeThrough(new Gh(new TG(e)))}(e,this.Xmt)),o={zw:To.Ik,$k:e}}else{let e=new j(t.$k.eht);this.Xmt&&(e=function(t,e){let i=cc(t);const s=new mu(sa(i),new er),n=ci.KD(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.zw===Ai.gD&&(i=kG(i,s,e))}return i}(e,this.Xmt)),o={zw:To.NJ,$k:e}}const h={$it:e.lF,ct:e.ct,aW:s,A2:null==(r=i.jht)?void 0:r.OC},a=this.Krt.SI;await this.zmt(),await this.Krt.r3(o,h,n);return function(t,e,i,s){let n,r,o=e.TB(t.gB());o=o.TB(i.TB(e)),!1;0===o.V?(n=s.dF,r=n):(n=o.Sn(0),r=o.Tn(0));return{jlt:n,Qlt:r}}(a,this.Krt.SI,this.Krt.J3,e)}async Tot(t,e,i){var s,n;Io(i),this.Hmt&&this.Hmt.Tot(new j(t.eht));let r=new j(t.eht);if(this.qmt(e)){const t=this.Omt.Ymt;let e,i=[];t&&(i=Ye(t.Kmt,(t=>t.sZ)),e=t.jmt.NU?kP(t.jmt.NU):void 0);const s=wG(r,i,e);s?(this.Xmt=s.xmt,r=s.Emt):this.Xmt=void 0}if((null==(s=this.Krt)?void 0:s.kd)&&this.Krt.kd.Fk!==e.Fk){const t={Fk:e.Fk};this.Krt.ZJ(t)&&(await this.Krt.XJ(t),Io(i))}const o={zw:To.NJ,$k:r};await this.zmt(),await this.Krt.a3(o,{A2:null==(n=e.jht)?void 0:n.OC},i)}hdt(t,e,i){return this.Krt.rT(t,e,i)}m$(t,e){this.Krt.i4(t,e)}p$(t,e){this.Krt.s4(t,e)}Mmt(){return this.Krt?this.Krt.SI:ee.WB()}Nmt(){return this.Krt?this.Krt.J3:ee.WB()}Qmt(){return this.Krt?this.Krt.rT(0,1/0):Promise.resolve()}Jmt(){return this.Krt&&(this.Krt.vn(xs.PJ,this.Ds),this.Krt=void 0),Promise.resolve()}async $mt(t){var e;const i=Sr.blt(null!=(e=t.Edt)?e:t.Mat,this.llt).SY;this.Krt||(this.Krt=this.Omt.tpt(i),this.Krt.bn(xs.PJ,this.Ds),this.wlt=new GW(this.Krt)),await this.zmt()}$n(t,e){const i=Fi.hp([e]);this.GW.np(),this.GW=i;const s=this.ept(t,this.ipt,i.ep);return this.ipt=s,s}spt(t){if(fh(this.npt,Hr.CEA608))return;const e=t.nct.fdt;if(function(t){return t.some((t=>t.G9===_G||t.G9===vG))}(e)){this.Hmt=new ft(this.FW);const t=function(t){const e=[];for(const i of t)if(i.G9===_G){const t=KO(i.Fx);for(const i of t)e.push(i)}else if(i.G9===vG){const t=dG(i.Fx);for(const i of t)if(i.Det<=4){const t=fG[i.Det];e.push(ne({},i,{Det:t}))}}return e}(e);for(const e of t)this.Hmt.cmt(e);this.Dmt.aZ(this.Hmt.Z)}}async ept(t,e,i){Io(i),e&&await e.catch(M),this.Bdt===t&&this.rpt||(await this.opt(),Io(i),await this.Qmt(),Io(i),t&&await this.VW(t))}async opt(){const t=this.Bdt;this.Bdt=void 0,this.rpt=!1,this.Lmt=void 0,t&&(t.vn(gs.vC,this.hpt),t.Ndt(!1),t.vn(gs.NO_QUALITY,this.Ds)),this.upt&&(this.upt.yn(),this.upt=void 0),this.Udt&&(await this.Udt.yn(),this.Udt=void 0),this.Hmt&&(this.Dmt.lZ(this.Hmt.Z),await this.Hmt.yn())}async VW(t){this.Bdt=t,this.spt(t),t.bn(gs.vC,this.hpt),t.bn(gs.NO_QUALITY,this.Ds),await this.$mt(t),this.Udt=this.cpt(t),this.Udt.bn(DG,this.Ds),this.Udt.bn("Qht",this.Wmt),this.Udt.rat=t.Edt,this.upt=new pG(this.aO,this.Udt),this.upt.bn(gs.fC,this.bdt),t.Ndt(!0),this.rpt=!0}cpt(t){return new UW(this,this.aO,this.aO,this.WW,this.XH,this.ldt,this.Rut,this.plt,this.llt,this.wlt,this.Wlt,this.MZ).ist(t)}async nr(t){this.GW.np(),this.ipt&&(await this.ipt.catch(M),this.ipt=void 0),await this.opt(),t||await this.Qmt(),await this.Jmt()}async lpt(){await this.opt()}wdt(t){var e;null==(e=this.Ldt)||e.wdt(t)}async gdt(t,e){var i,s;await this.xat(),null==(i=this.Ldt)||i.gdt(e);const n=null==(s=this.Udt)?void 0:s.sat.Tct.mct(t);if(n&&n.V>0)for(let t=0;t<n.V;t++){var r;await(null==(r=this.Krt)?void 0:r.rT(n.Sn(t),n.Tn(t)))}await this.Rat()}dpt(t){const e=t.Ht.Edt;if(void 0===e)return this.fpt(t);if(e.some((t=>this.wlt.ZJ(t))))return this.fpt(t);this._o(new me("_pt"))}fpt(t){this.Udt&&this.Bdt&&this.Bdt===t.Ht&&(this.Udt.rat=this.Bdt.Edt)}async xat(t){this.Udt&&await this.Udt.xat(t)}async Rat(t){this.Udt&&await this.Udt.Rat(t)}_Q(){const t=this.SI.OB;return this.XH._Q(t)}zmt(){const t=this.Omt._ct,e=_.max(0,t.Sn(0)-.1),i=t.Tn(0)+.01;return this.Krt.T3(e,i)}qmt(t){if(!Xh(t.SY))return!1;if(this.Omt.V9)return!0;return void 0!==this.Omt.Ymt}Cat(t){if(!xT(this.Q3))return;const e=this.Udt,i=t.Udt;void 0!==e&&void 0!==i&&e.Cat(i,this.Sn,this.Tn)}async yn(t){this.Ro();try{await this.nr(t),await this.lpt()}catch(t){}}constructor(t,e,i,s,n,r,o,h,a,u,c,l,d){super(),this.Bdt=void 0,this.Udt=void 0,this.rpt=!1,this.GW=new Fi,this.ipt=void 0,this.Lmt=void 0,this.Krt=void 0,this.wlt=new ZW,this.Xmt=void 0,this.Hmt=void 0,this.Dmt=new uu([]),this.Wmt=()=>{!this.wat()&&this.fct()&&this.Omt.Wmt()},this.bdt=t=>{this.Bdt.bdt(t),this._o(new oU(t.ict,t.ymt))},this.hpt=t=>{this.dpt(t)},this.jS=function(){const t=MG;return MG+=1,t}(),this.Q3=t,this.WW=s,this.XH=n,this.Omt=e,this.aO=i,this.Rut=r,this.FW=o,this.Zmt=h,this.plt=a,this.llt=a?DT(t,a):void 0,this.Wlt=u,this.npt=c,this.ldt=l,this.MZ=d}};var MG=0;var LG=class extends So{nQ(t,e){return this.vpt(t,e)}async vpt(t,e){for(const e of t)this.gpt(e);await this.$n(e);for(const t of this.ppt.mpt)t.zw===Fo.Rk&&(t.Mat&&0!==t.Mat.length?await this.wpt.VW(t):this._o(new sU("No supported representation found in the AdaptationSet with mimetype : "+t.zw)))}get OC(){return this.eF}get ct(){return this.aO.ct}ypt(t){return new NG(t,this,this.aO,this.WW,this.XH,this.Rut,this.FW,this.Zmt,this.bpt,this.Wlt,this.npt,this.ldt,this.MZ)}wat(){return this.aft.some((t=>t.wat()))}fct(){return 0!==this.aft.length&&this.aft.every((t=>t.fct()))}Wmt(){this.Apt()&&this._o(new rU)}tpt(t){if(Cl(t,"audio")){if(this.C3.d4)return this.C3.d4}else if(Cl(t,"video")&&this.C3.f4)return this.C3.f4;throw new m("Cannot allocate source buffer for mime type "+t)}Spt(t){t.bn([bo.fa,ns.Jy,ns.sb,ns.ob,ns.ub,ns.Ey],this.Ds),t.bn(xs.PJ,this.Tpt),t.bn("_pt",this.Ds)}get Rt(){return this.aft.some((t=>t.Rt))}async kpt(t){await Promise.all(this.aft.map((e=>e.yn(t)))),En(this.aft)}get ht(){return this.LO}get SI(){if(0===this.aft.length)return ee.WB();const t=this.aft.map((t=>t.SI));let e=ee.VB(0,1/0);for(const i of t)e=e.jn(i);if(0===e.V)return e;if(this.fct()){const t=e.jn(this._ct);if(0===t.V)return e;const i=t.Tn(t.V-1);let s=0;for(const t of this.aft)s=_.max(s,t.Vmt);i<=s&&(e=e.AB(new ee([i,s],[!0,!0])))}return e}get V9(){return this.aO.V9}get RI(){return this.aO.RI}get Ymt(){return this.Ept}get Tn(){if(this.xpt){const t=this.ct;if(!S(t)&&t!==Eu)return t}if(!this.aft.length)return NaN;let t=0;for(const e of this.aft)t=_.max(t,e.Tn);return t}get xpt(){const t=this.ppt.tdt;if(t.zw===Rs.qW)return!1;const e=t.Ipt;return 0!==e.length&&this.ppt===e[e.length-1]}get cR(){if(!this.aft.length)return ee.WB();let t=new ee([0,1/0]);for(const e of this.aft)t=t.jn(e.cR);if(t.V>0&&this.xpt&&isFinite(this.ct)){const e=this.ct,i=t.Tn(t.V-1);e>i&&(t=t.AB(ee.VB(i,e).gB()))}return t}get Cc(){return this.ppt}get nt(){return this.Hl}get rt(){return this.FO}get ji(){return this.xu.ji}get Ti(){return this.xu.Ti}get pZ(){const t=this.RI,e=this.SI,i=e.kB(t);if(-1!==i)return{Sn:e.Sn(i),Tn:e.Tn(i)}}get _ct(){const t=this.ppt.Sn,e=this.xpt?1/0:this.ppt.Tn;return ee.VB(t,e)}Apt(){if(this.wat())return!1;if(!this.fct())return!1;const t=this.SI;if(0===t.V)return!1;const e=this.RI;if(this.xpt)return t.Sn(t.V-1)<=e;{const i=t.jn(this._ct);if(0===i.V)return!0;const s=i.Sn(i.V-1),n=i.Tn(i.V-1)+.1;return s<=e&&e<=n}}get Rpt(){return this.Cpt}async xat(t){this.Cpt||(this.Cpt=!0,await Promise.all(this.aft.map((e=>e.xat(t)))))}async Rat(t){this.Cpt&&(this.Cpt=!1,await Promise.all(this.aft.map((e=>e.Rat(t)))))}async yn(t){this.aO.vn(ns.gb,this.Ppt),this.aO.vn(ns.Ry,this.Dpt),this.aO.vn(ns.LICENSE_REQUEST_GENERATED,this.Npt),this.Ro(),this.ppt.vn(Cs.qht,this.Ds),this.Mpt.np(),this.ipt&&(await this.ipt.catch(M),this.ipt=void 0),await this.kpt(t),await this.wpt.yn(),this.LO.yn(),this.FO.yn(),this.Hl.yn(),this.Lpt()}gpt(t){this.Bpt.push(t),t.bn("Opt",this.Fpt);const e=t.zw===Fo.wE?this.LO:this.FO;for(const i of t.Z)e.tt(i)}Vpt(t){const e=t.zw===Fo.wE?this.LO:this.FO;for(const i of t.Z)e.it(i),i.yn();t.yn(),_e(this.Bpt,t)}Lpt(){for(let t=this.Bpt.length-1;t>=0;t--)this.Vpt(this.Bpt[t])}get Wpt(){return this.Bpt.map((t=>t.Ldt)).filter(ol)}get Upt(){return this.aft.map((t=>t.Ldt)).filter(ol)}$n(t,e){return this.Mpt.np(),this.Mpt=Fi.hp([e]),this.ipt=Ts(this.ix(t,this.ipt,this.Mpt.ep),this.Mpt).catch(this.Gpt),this.ipt}async ix(t,e,i){e&&await e.catch(M),Io(i);const s=[],n=this.aft.slice(),r=t.slice();En(this.aft);for(const t of n){const e=t.Ldt;e&&fh(r,e)?(this.aft.push(t),s.push(t.$n(e,i)),_e(r,e)):(this.Hl.lZ(t.nt),await t.yn(),Io(i))}for(const t of r){const e=this.ypt(t.uat);this.Hl.aZ(e.nt),this.aft.push(e),this.Spt(e),s.push(e.$n(t,i))}await Promise.all(s)}async XJ(t,e,i){this.C3!==i&&(this.C3=i,await this.kpt(!1)),await this.$n(t),this.Ept=e}async Zpt(t){for(const e of this.aft){const i=e.Ldt;if(void 0!==i)for(const s of i.nct.Mat){(s.$G||[]).some((e=>e.NU&&ho(Uh(t),kP(e.NU))))&&!s.Ddt&&(s.Ddt=!0,await e.gdt(s,s.jht),this._o(new rB(new kh(Ci.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions"))))}}}async Hpt(t){for(const e of this.aft){const i=e.Ldt;if(void 0!==i)for(const s of i.Mat){const i=s.$G,n=s.jht;if(void 0===i||0===i.length||void 0===n)continue;if(!i.some((t=>fh(s.Xpt,t))))continue;const r=this.zpt(i,t.Ab);n.Lst!==r&&(r?e.wdt(n):await e.gdt(s,n))}}}zpt(t,e){let i=!1;const s=t.reduce(((t,e)=>!e.NU||fh(t,e.NU)?t:[...t,e.NU]),[]);return 0===s.length||(e.Ub(((n,r)=>{if("usable"!==n)return;(t.some((t=>t.NU&&ho(Uh(r),kP(t.NU))))||mp(r,xc)&&1===s.length&&1===e.Ob)&&(i=!0)})),i)}Cat(t){if(void 0===t)return;const e=t.ppt;if(this.ppt.qpt===e||this.ppt.Ypt===e)for(const e of this.aft){const i=Do(t.aft,(t=>t.j3===e.j3));void 0!==i&&e.Cat(i)}}get Kpt(){return this.Bpt}constructor(t,e,i,s,n,r,o,h,a,u,c,l,d,f){var _,v;super(),this.LO=new an,this.FO=new an,this.Bpt=[],this.Mpt=new Fi,this.Cpt=!0,this.aft=[],this.ipt=void 0,this.Tpt=Fd((()=>{this._o(new ki(this.RI))}),350),this.Fpt=t=>{const e=t.jpt.Ldt;if(e)for(const t of this.Bpt){var i;t.Ldt&&t.Ldt!==e&&t.zw===(null==(i=e.Adt)?void 0:i.zw)&&(t.vn("Opt",this.Fpt),t.Ldt.Rt=!1,t.bn("Opt",this.Fpt))}this.Ds(t)},this.Gpt=t=>{Se(t)||this._o(new Pi(hb(t,Ci.MEDIA_LOAD_ERROR)))},this.Ppt=t=>{const e=t.f9;e&&this.Zpt(e).catch(this.Gpt)},this.Qpt=t=>{this.Hpt(t).catch(this.Gpt)},this.Npt=t=>{for(const e of this.aft){const i=e.Ldt;if(void 0!==i)for(const e of i.Mat){const i=e.$G;if(void 0===i||0===i.length)continue;const s=t.Sb;i.filter((t=>t.Z9&&ho(new j(s),new j(t.Z9)))).forEach((t=>{e.Jpt(t)}))}}},this.Dpt=t=>{const e=t.f9;if(e)for(const t of this.Upt)for(const i of t.nct.Mat){const s=(i.$G||[]).some((t=>t.NU&&ho(Uh(e),kP(t.NU))));i.Ddt&&s&&(i.Ddt=!1,i.jht&&t.wdt(i.jht))}},this.WW=i,this.XH=s,this.Rut=n,this.aO=t,this.eF=Lt(),this.Bpt=[],this.ppt=o,this.Ept=h,this.MZ=f,this.FW=u,this.wpt=new iU(t,i,s,n,u,null==(v=null==r||null==(_=r.dash)?void 0:_.segmentRelativeVttTiming)||v),this.Hl=new uu([this.wpt.nt]),this.Wlt=l,this.npt=d,this.ppt.bn(Cs.qht,this.Ds),this.xu=a,this.C3=e,this.ldt=r.lowLatency,this.Zmt=c,this.bpt=r.abr,this.aO.bn(ns.gb,this.Ppt),this.aO.bn(ns.Ry,this.Dpt),this.aO.bn(ns.LICENSE_REQUEST_GENERATED,this.Npt)}};r(),r(),r();var BG=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,OG=class t{static cN(e){const i=e.match(BG);if(!i)throw new m("The given value could not be parsed as a valid DateTimeInterval");const s=Number(i[1])||0,n=Number(i[2])||0,r=Number(i[3])||0,o=Number(i[4])||0,h=Number(i[5])||0,a=Number(i[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*o+60*h+a)}get Rft(){return Ic.GV(this.$pt,1e3)}twt(){return this.$pt}ewt(){return 1e3*this.$pt}constructor(t){this.$pt=t}};r();var FG=function(t){return t.iwt="progressive",t.swt="interlaced",t.oE="unknown",t}({});r();var VG=class{VF(){return this.nwt/this.rwt}constructor(t,e){this.nwt=t,this.rwt=e}};r();var WG=1886614376;function UG(t){const e=kP(Bg),i=t.byteLength,s=12+e.length+4+i,n=new j(s),r=sa(n),o=new er;return Ym(r,o,s),Ym(r,o,WG),Ym(r,o,0),Zm(r,o,e),Ym(r,o,i),Zm(r,o,new j(t)),n}var GG=/^(?:true|false)$/i,ZG=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function HG(t){if(void 0!==t)return OG.cN(t)}function XG(t){if(void 0===t)return;const e=t.match(ZG);if(!e)throw new m("The given value could not be parsed as a valid Date");const[,i,s,n,r,o,h,a,u,c,l,d]=e,f=("-"===i?-1:1)*Number(s),v=Number(n)-1,g=Number(r),p=Number(o);let w=Number(h);const y=Number(a),b=Number("0."+(u||"")),A=_.round(1e3*b);if(c){w-=("-"===c?-1:1)*(60*Number(l)+Number(d))}const T=new Date(Date.UTC(f,v,g,p,w,y,A));if(S(T.getTime()))throw new m("The given value could not be parsed as a valid Date");return T}function zG(t){if(!t)return;const e=/(\d+)-(\d+)/.exec(t);return e?[Ba(e[1]),Ba(e[2])]:void 0}function qG(t){if(void 0!==t){if(!S(Number(t)))try{return po.fromString(t,!0)}catch(t){}throw new m("The given value could not be parsed as a valid unsigned long")}}function Ba(t){if(void 0===t)return;const e=Number(t);if(!S(e))return e;throw new m("The given value could not be parsed as a valid Number")}function YG(t){if(void 0===t)return;const e=t.split("/"),i=Number(e[0]),s=Number(e[1]||1);if(!S(i)&&!S(s))return new VG(i,s);throw new m("The given value could not be parsed as a valid frame rate")}function tn(t){if(void 0!==t){if(GG.test(t))return"true"===t.toLowerCase();if(!S(x(t)))return Boolean(x(t));throw new m("The given value could not be parsed as a valid Boolean.")}}function KG(t){return{Xu:t.jx,owt:tn(t.Qx("availabilityTimeComplete")),hwt:Ba(t.Qx("availabilityTimeOffset"))}}function jG(t){return t.map(KG)}function QG(t){const e=hZ(t),i=function(t,e,i,s){let n=t.Jx(i,e);return void 0===n&&(n=t.Qx(s+":"+e)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=ux(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=su(n.jx)),!s){const e=ux(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==e&&(s=function(t){const e=su(t.jx);return UG(e)}(e))}return{NU:i,Z9:s,G9:e.G9,Fx:e.Fx}}function JG(t){return{awt:t.Qx("sourceURL"),Kat:zG(t.Qx("range"))}}function $G(t,e){const i=t.Qx("d"),s=t.Qx("t"),n=Ba(t.Qx("r"));e.push({ct:i,lF:s,uwt:n})}function tZ(t){return{Mut:t.Qx("index"),cwt:zG(t.Qx("indexRange")),LN:t.Qx("media"),lwt:zG(t.Qx("mediaRange"))}}function eZ(t){const e=sZ(t),i=function(t){const e=t.map(tZ);return e.length>0?e:void 0}(t.Hx("SegmentURL"));return ne({},e,{dwt:i,fwt:t.Qx("xlink:href"),_wt:t.Qx("xlink:actuate")})}function iZ(t){const e=tn(t.Qx("availabilityTimeComplete")),i=Ba(t.Qx("availabilityTimeOffset")),s=zG(t.Qx("indexRange")),n=tn(t.Qx("indexRangeExact")),r=t.Hx("Initialization");if(r.length>1)throw new m("The provided MPEG-DASH document's "+t.Xx+" element can not have more than one Initialization element.");const o=1===r.length?JG(r[0]):void 0,h=qG(t.Qx("presentationTimeOffset")),a=t.Hx("RepresentationIndex");if(a.length>1)throw new m("The provided MPEG-DASH document's "+t.Xx+" element can not have more than one RepresentationIndex element.");return{owt:e,hwt:i,cwt:s,vwt:n,gwt:o,mwt:h,pwt:1===a.length?JG(a[0]):void 0,wwt:HG(t.Qx("timeShiftBufferDepth")),RN:Ba(t.Qx("timescale"))}}function sZ(t){const e=iZ(t),i=t.Hx("BitstreamSwitching"),s=i.length>0?JG(i[0]):void 0,n=Ba(t.Qx("duration")),r=t.Hx("SegmentTimeline");if(r.length>1)throw new m("The provided MPEG-DASH document's "+t.Xx+" element can not have more than one SegmentTimeline element.");const o=1===r.length?function(t){const e=[],i=t.Hx("S");for(const t of i)$G(t,e);return e}(r[0]):void 0;return ne({},e,{ywt:s,ct:n,Eot:o,bwt:Ba(t.Qx("startNumber")),Awt:Ba(t.Qx("endNumber"))})}function nZ(t){return{Swt:function(t){if(!t)return;const e=t.split(/\s/);return e.length>1?(e.length=2,e.map(Ba)):1===e.length?e.map(Ba)[0]:void 0}(t.Qx("audioSamplingRate")),Frt:t.Qx("codecs"),Twt:tn(t.Qx("codingDependency")),$G:function(t){if(0!==t.length)return t.map(QG)}(t.Hx("ContentProtection")),kwt:function(t){return t.map(aZ)}(t.Hx("EssentialProperty")),Ewt:function(t){return t.map(uZ)}(t.Hx("SupplementalProperty")),Xdt:YG(t.Qx("frameRate")),Ti:Ba(t.Qx("height")),xwt:Ba(t.Qx("maxPlayoutRate")),Iwt:Ba(t.Qx("maximumSAPPeriod")),SY:t.Qx("mimeType"),Rwt:t.Qx("profiles"),Cwt:t.Qx("sar"),Pwt:function(t){switch(t){case FG.iwt:case FG.swt:case FG.oE:return t;default:return}}(t.Qx("scanType")),Dwt:t.Qx("segmentProfiles"),Nwt:Ba(t.Qx("startWithSAP")),ji:Ba(t.Qx("width"))}}function rZ(t){const e=jG(t.Hx("BaseURL")),i=t.Hx("SegmentBase");if(i.length>1)throw new m("The provided MPEG-DASH document's "+t.Mx+" element can not have more than one SegmentBase element.");const s=1===i.length?iZ(i[0]):void 0,n=function(t){const e=t.map(eZ);return e.length>0?e:void 0}(t.Hx("SegmentList")),r=t.Hx("SegmentTemplate");if(r.length>1)throw new m("The provided MPEG-DASH document's "+t.Mx+" element can not have more than one SegmentTemplate element.");const o=1===r.length?function(t){return ne({},sZ(t),{Mwt:t.Qx("bitstreamSwitching"),Lwt:t.Qx("index"),Bwt:t.Qx("initialization"),Owt:t.Qx("media")})}(r[0]):void 0;return{Fwt:e,Vwt:s,Wwt:n,Uwt:o}}function oZ(t){const e=nZ(t),i=rZ(t),s=Ba(t.Qx("bandwidth")),n=t.Qx("dependencyId"),r=t.Qx("id"),o=t.Qx("mediaStreamStructureId"),h=Ba(t.Qx("qualityRanking"));if(t.Hx("SegmentBase").length>1)throw new m("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return ne({},e,i,{jG:s,Gwt:n,o:r,Zwt:o,Hwt:h})}function hZ(t){return{G9:t.Qx("schemeIdUri"),Fx:t.Qx("value")}}function aZ(t){return hZ(t)}function uZ(t){return hZ(t)}function cZ(t){return hZ(t)}function lZ(t){return hZ(t)}function dZ(t){var e;const i=nZ(t),s=rZ(t),n=function(t){return t.map(lZ)}(t.Hx("Accessibility")),r=tn(t.Qx("bitstreamSwitching")),o=t.Qx("contentType"),h=Ba(t.Qx("group")),a=Ba(t.Qx("id")),u=(null==(e=t.Hx("Label")[0])?void 0:e.jx)||"",c=t.Qx("lang"),l=Ba(t.Qx("maxBandwidth")),d=YG(t.Qx("maxFrameRate")),f=Ba(t.Qx("maxHeight")),_=Ba(t.Qx("maxWidth")),v=Ba(t.Qx("minBandwidth")),g=YG(t.Qx("minFrameRate")),p=Ba(t.Qx("minHeight")),w=Ba(t.Qx("minWidth")),y=t.Qx("par"),b=function(t){return t.map(oZ)}(t.Hx("Representation"));if(0===b.length)throw new m("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const A=function(t){return t.map(cZ)}(t.Hx("Role")),S=tn(t.Qx("segmentAlignment"))||!1,T=Ba(t.Qx("selectionPriority")),k=T||1,E=tn(t.Qx("subsegmentAlignment"))||!1;let x;try{x=Ba(t.Qx("subsegmentStartsWithSAP"))}catch(t){}return ne({},i,s,{fdt:n,ywt:r,Fk:o,Adt:h,o:a,Ch:u,gs:c,Xwt:l,zwt:d,qwt:f,Ywt:_,Kwt:v,Qwt:g,Jwt:p,$wt:w,tyt:y,Mat:b,tft:A,eyt:S,vH:k,iyt:E,syt:x,nyt:t.Qx("xlink:actuate")||"onRequest",ryt:t.Qx("xlink:href")})}function fZ(t){const e=qG(t.Qx("presentationTime"))||po.ZERO,i=qG(t.Qx("duration")),s=Ba(t.Qx("id")),n=function(t){const e=t.Kx,i={};for(let t=0;t<e.length;t++)i[e[t].l]=e[t].Fx;return i}(t),r=t.jx;return{VL:e,ct:i,o:s,Kx:n,$k:""!==r.trim()?r:t.Qx("messageData")||""}}function _Z(t){return{ryt:t.Qx("xlink:href"),nyt:t.Qx("xlink:actuate"),G9:t.Qx("schemeIdUri"),Fx:t.Qx("value"),RN:Ba(t.Qx("timescale")),mwt:qG(t.Qx("presentationTimeOffset")),TY:t.Hx("Event").map(fZ)}}function vZ(t){const e=rZ(t),i=t.Hx("AssetIdentifier");if(i.length>1)throw new m("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===i.length?function(t){return hZ(t)}(i[0]):void 0,n=function(t){return t.map(dZ)}(t.Hx("AdaptationSet")),r=tn(t.Qx("bitstreamSwitching")),o=HG(t.Qx("duration")),h=function(t){return t.map(_Z)}(t.Hx("EventStream")),a=t.Qx("id"),u=HG(t.Qx("start")),c=(t.Hx("Subset"),t.Qx("xlink:href"));return ne({},e,{ift:n,oyt:s,ywt:r,ct:o,hyt:h,o:a,Sn:u,nyt:t.Qx("xlink:actuate"),ryt:c})}function gZ(t){const e=t.Qx("schemeIdUri");if(!e)return;return{G9:e,Fx:t.Qx("value")}}function mZ(t,e){const i=XG(t.Qx("availabilityEndTime")),s=XG(t.Qx("availabilityStartTime")),n=jG(t.Hx("BaseURL")),r=t.Qx("id"),o=function(t){return t.map((t=>""+t.jx))}(t.Hx("Location")),h=HG(t.Qx("maxSegmentDuration")),a=HG(t.Qx("maxSubsegmentDuration")),u=HG(t.Qx("mediaPresentationDuration")),c=(t.Hx("Metrics"),HG(t.Qx("minBufferTime")));if(!c)throw new m("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const l=HG(t.Qx("minimumUpdatePeriod")),d=function(t){return t.map((t=>vZ(t)))}(t.Hx("Period"));if(!d.length)throw new m("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.Qx("profiles");if(!f)throw new m("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const _=XG(t.Qx("publishTime")),v=HG(t.Qx("suggestedPresentationDelay")),g=HG(t.Qx("timeShiftBufferDepth")),p=function(t){switch(t){case Rs.zW:case Rs.qW:return t;default:return}}(t.Qx("type")),w=function(t){const e=[];for(const i of t){const t=gZ(i);t&&e.push(t)}return e}(t.Hx("UTCTiming")),y=function(t){if(0===t.length)return;const e=t[0],i=e.Hx("Latency");if(0===i.length)return;const s=function(t){const e=t[0],i=Ba(e.Qx("target"));if(void 0===i)return;const s=Ba(e.Qx("min")),n=Ba(e.Qx("max"));return{ayt:i,BV:s,LV:n}}(i);if(void 0===s)return;const n=function(t){if(0===t.length)return;const e=t[0],i=Ba(e.Qx("max")),s=Ba(e.Qx("min"));return{BV:s,LV:i}}(e.Hx("PlaybackRate"));return{uyt:s,tR:n}}(t.Hx("ServiceDescription"));return{cyt:i,lyt:s,Fwt:n,o:r,dyt:o,fyt:e,_yt:h,vyt:a,gyt:u,myt:c,pyt:l,Ipt:d,Rwt:f,wyt:_,yyt:v,wwt:g,zw:p,byt:w,Ayt:y}}var pZ=class{Syt(t,e){return function(t,e){if(!t)throw new m("The provided MPEG-DASH document does not contain a valid MPD root element.");return mZ(t,e)}(As.Nx(t).sI,e)}};function wZ(t){return{get bandwidth(){return t.jG},get codecs(){return t.Frt},get id(){return t.o},get uid(){return t.OC},get name(){return t.Ch},get averageBandwidth(){return t.Tyt},get label(){return t.Ch},set label(e){t.Ch=os(e)},get available(){return t.Lst},get score(){return t.kyt},addEventListener(e,i){t.bn(e,i)},removeEventListener(e,i){t.vn(e,i)}}}function yZ(t){return Qr(wZ(t),{get height(){return t.Ti},get width(){return t.ji},get frameRate(){return t.Xdt},get firstFrame(){return t.Eyt}})}function bZ(t){return Qr(wZ(t),{get audioSamplingRate(){return t.Swt}})}r(),r(),r(),r(),r(),r(),r(),r();var AZ=class extends me{constructor(t){super("update"),this.quality=t}},SZ=class extends So{get Ch(){return this.iF}set Ch(t){this.iF!==t&&(this.iF=t,this._o(new AZ(this.wa)))}get Tyt(){}get Lst(){return this.xyt}get kyt(){}LW(){this.xyt=!1,this._o(new AZ(this.wa))}MW(){this.xyt=!0,this._o(new AZ(this.wa))}constructor(t,e,i,s,n){super(),this.o=t,this.jG=e,this.Frt=i,this.Iyt=n,this.OC=Nk(),this.iF=s||"",this.xyt=!0}},TZ=class extends SZ{get wa(){return this.eu||(this.eu=yZ(this)),this.eu}constructor(t,e,i,s,n,r,o,h,a=0){super(t,e,i,s,n),this.Xdt=r,this.ji=o,this.Ti=h,this.Eyt=a,this.eu=void 0}},kZ=class extends SZ{get wa(){return this.eu||(this.eu=bZ(this)),this.eu}constructor(t,e,i,s,n,r){super(t,e,i,s,n),this.Swt=r,this.eu=void 0}};r(),r();var EZ=class extends So{get Ryt(){const t=this.Cyt();return null==t?void 0:t.Sn}get Pyt(){const t=this.Cyt();return null==t?void 0:t.Tn}constructor(...t){super(...t),this.Dyt=t=>{this._o(t)}}},xZ=class extends EZ{get nct(){return this.Tat}get Swt(){var t;return null!=(t=this.Nyt.$k.Swt)?t:this.nct.Swt}get jG(){return this.Nyt.$k.jG||0}get Frt(){const t=this.Nyt.$k;return t.Frt?[t.Frt]:this.nct.Frt}get Myt(){const t=this.Nyt.$k;return t.Frt?[t.Frt]:[]}get Op(){return this.Nyt.$k.Frt||this.nct.Op}get Twt(){return this.Nyt.$k.Twt||this.nct.Twt}get $G(){return this.Nyt.$k.$G||this.nct.$G}get Xpt(){return this.Lyt}get Fk(){return this.SY+'; codecs="'+this.Op+'"'}get kwt(){const t=this.Nyt.$k;return t.kwt.length?t.kwt:this.nct.kwt}get wa(){return this.eu||(this.eu=function(t){return{get id(){return t.o},get type(){return t.zw},get bandwidth(){return t.jG},get width(){return t.ji},get height(){return t.Ti},get frameRate(){var e,i;return null!=(i=null==(e=t.Xdt)?void 0:e.VF())?i:NaN},get audioSamplingRate(){return t.Swt}}}(this))}get Xdt(){var t;return null!=(t=this.Nyt.$k.Xdt)?t:this.nct.Xdt}get Ti(){return this.Nyt.$k.Ti||this.nct.Ti}get o(){return this.Nyt.$k.o||""}get ndt(){return this.Byt}set ndt(t){this.Byt=t}get sdt(){const t=this.Nyt.Oyt();if(t)return{Xu:t.Xu,Kat:t.Kat,DE:this.tdt.DE}}get xwt(){return this.Nyt.$k.xwt||this.nct.xwt||1}get Iwt(){return this.Nyt.$k.Iwt||this.nct.Iwt}get tdt(){return this.Zct.tdt}get SY(){return this.Nyt.$k.SY||this.nct.SY}get Zct(){return this.nct.Zct}get Rwt(){return this.Nyt.$k.Rwt||this.nct.Rwt}get jht(){return this.Fyt}get Cwt(){return this.Nyt.$k.Cwt||this.nct.Cwt}get Pwt(){return this.Nyt.$k.Pwt||this.nct.Pwt}get Vyt(){return this.Nyt.Vyt}get Dwt(){return this.Nyt.$k.Dwt||this.nct.Dwt}get Eot(){return this.Nyt.Eot}get Nwt(){return this.Nyt.$k.Nwt||this.nct.Nwt}get zw(){const t=this.SY.split("/")[0];return"application"===t||"text"===t||Ox(this.SY,this.Frt)?Fo.Rk:"video"===t?Fo.yE:"audio"===t?Fo.wE:"image"===t?Fo.bE:Fo.oE}get ji(){return this.Nyt.$k.ji||this.nct.ji}get qct(){return this.Wyt}set qct(t){this.Wyt=t}get Ddt(){return this.Uyt}set Ddt(t){this.Uyt=t}nlt(t){const e=KV(t)?this.Nyt.Gyt(t):this.Nyt.nlt(t);return{Xu:e.Xu,Kat:e.Kat,DE:this.tdt.DE}}Zyt(){return this.Nyt.Zyt()}Cyt(){return this.Nyt.Cyt()}Hyt(){return this.Nyt.Hyt()}Kct(t){return this.Nyt.Kct(t)}Qct(t,e,i){return this.Nyt.Qct(t,this.tdt.DE,e,i)}Glt(t){return KV(t)?this.Eot.Xyt(t,this.Nyt):this.Eot.Glt(t)}Gct(t){return KV(t)?this.Eot.zyt(t,this.Nyt):this.Eot.Gct(t)}Jpt(t){fh(this.Lyt,t)||this.Lyt.push(t)}yn(){this.Nyt.vn(Cs.Xht,this.Dyt),this.Lyt=[]}constructor(t,e){if(super(),this.eu=void 0,this.Byt=void 0,this.Wyt=!1,this.Uyt=!1,this.Lyt=[],this.Tat=t,this.Nyt=e,this.Nyt.bn(Cs.Xht,this.Dyt),this.zw===Fo.yE){var i,s;const t=null!=(s=null==(i=this.Xdt)?void 0:i.VF())?s:NaN;this.Fyt=new TZ(this.o,this.jG,this.Op,"","",t,this.ji,this.Ti)}else this.zw===Fo.wE?this.Fyt=new kZ(this.o,this.jG,this.Op,"","",this.Swt):this.Fyt=void 0}},IZ=class extends EZ{get fdt(){return this.Nyt.$k.fdt}get Swt(){var t;return null!=(t=this.Nyt.$k.Swt)?t:-1}get Frt(){if(this.Nyt.$k.Frt)return[this.Nyt.$k.Frt];{const t=[];for(const e of this.Mat)e.Myt.length&&-1===t.indexOf(e.Op)&&t.push(e.Op);return t}}get Op(){return this.Frt.join()}get Twt(){return this.Nyt.$k.Twt}get $G(){return this.Nyt.$k.$G}get Fk(){return this.SY+'; codecs="'+this.Op+'"'}get kwt(){return this.Nyt.kwt}get Ewt(){return this.Nyt.Ewt}get Xdt(){return this.Nyt.$k.Xdt}get Adt(){return this.Nyt.$k.Adt}get Ti(){return this.Nyt.$k.Ti||0}get o(){return this.Nyt.$k.o}get Ch(){return this.Nyt.$k.Ch||""}get xwt(){return this.Nyt.$k.xwt}get Iwt(){return this.Nyt.$k.Iwt}get tdt(){return this.Zct.tdt}get SY(){return this.Nyt.$k.SY||this.xdt[0].SY}get Zct(){return this.ppt}get Rwt(){return this.Nyt.$k.Rwt}get Mat(){return this.xdt}get tft(){return this.Nyt.$k.tft||[]}get Cwt(){return this.Nyt.$k.Cwt}get Pwt(){return this.Nyt.$k.Pwt}get Dwt(){return this.Nyt.$k.Dwt}get vH(){return this.Nyt.$k.vH}get Nwt(){return this.Nyt.$k.Nwt}get zw(){const t=(this.Nyt.$k.Fk||this.SY).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||Ox(this.SY,this.Frt)?Fo.Rk:"video"===t?Fo.yE:"audio"===t?Fo.wE:"image"===t?Fo.bE:Fo.oE}get ji(){return this.Nyt.$k.ji||0}get Net(){return this.Nyt.$k.gs||""}get Ydt(){return this.Ryt}get qdt(){const t=this.Ydt,e=this.Pyt;if(void 0===t||void 0===e)return;const i=_.min(e,this.tdt.qyt);return _.max(t,i)}async ir(t,e){if(0===this.xdt.length){const i=this.Nyt.Mat.map((i=>this.Yyt(i,t,e)));this.xdt=(await Promise.all(i)).filter(ol)}this.Kyt()}async Yyt(t,e,i){const s=new xZ(this,t),n=await e(s);if(Io(i),n)return s}Kyt(){if(!this.xdt.length)throw new m("Detected an AdaptationSet without any supported Representations.")}Cyt(){return this.Nyt.Cyt()}Hyt(){return this.Nyt.Hyt()}yn(){this.Nyt.vn(Cs.Xht,this.Dyt);for(const t of this.xdt)t.yn();En(this.xdt)}constructor(t,e){super(),this.xdt=[],this.ppt=t,this.Nyt=e,this.Nyt.bn(Cs.Xht,this.Dyt)}};function RZ(t,e){const i=[];for(const s of e)for(const e of t)i.push(As.Bh(e,s));return i}r(),r(),r(),r(),r(),r(),r();var CZ=class{jyt(t){const e=t-this.ppt.Sn;if(e<0||e>=this.ppt.ct)return;const i=this.Qyt();return void 0!==i&&rs(i,e,1e-5)?this.Jyt():this.$yt(e)}Yct(t){const e=t-this.ppt.Sn;if(!(e<0))return this.tbt(_.min(e,this.ppt.ct))}Jyt(){return this.ebt(0)}ibt(){const t=this.ppt.ct;if(isFinite(t))return this.tbt(t)}get sbt(){return this.ppt.rbt.nbt&&void 0!==this.obt()}Zyt(t){if(this.ppt.rbt.zw===Rs.qW){if(this.sbt){const e=this.Jyt(),i=this.obt();if(void 0===e||void 0===i)return;return{hbt:t,abt:e,ubt:i}}const e=this.cbt(t);if(!e)return;return{hbt:t,abt:this.lbt(t),ubt:e}}{0;const e=this.Jyt();if(e)return{hbt:t,abt:e,ubt:this.ibt()}}}Hyt(t,e){if(e){let t=this.edt(e.abt);const i=this.elt(e.ubt);if(i){const e=this.idt(i);(!t||e.getTime()<t.getTime())&&(t=e)}return t}{const e=this.Jyt();if(e){const i=this.idt(e);if(t.getTime()<i.getTime())return i}const i=this.ppt.rbt.lyt;return t.getTime()<i.getTime()?i:void 0}}cbt(t){const e=(t.getTime()-this.ppt.rbt.lyt.getTime())/1e3-this.ppt.Sn+this.dbt;let i=this.tbt(bi(e,0,this.ppt.ct));if(!i)return;if(i=this.fbt(i,t),!i)return;let s=this.elt(i);for(;s&&this.cdt(s,t);)i=s,s=this.elt(i);return i}lbt(t){let e;const i=this._bt.wwt;if(i){const s=(t.getTime()-this.ppt.rbt.lyt.getTime())/1e3-this.ppt.Sn-i.twt();e=this.tbt(bi(s,0,this.ppt.ct)),e||(e=this.Jyt())}else e=this.Jyt();if(!e)return;if(e=this.fbt(e,t),!e)return;let s=this.tlt(e);for(;s&&this.cdt(s,t);)e=s,s=this.tlt(e);return e}fbt(t,e){let i=t;for(;i&&this.idt(i).getTime()>e.getTime();)i=this.tlt(i);if(!i)return;const s=this.edt(i);if(s&&s.getTime()<=e.getTime()){const t=this.tlt(i);for(t&&this.cdt(t,e)&&(i=t);i;){if(this.idt(i).getTime()>e.getTime())return;if(this.cdt(i,e))break;i=this.elt(i)}if(!i)return}return i}cdt(t,e){if(this.sbt)return!0;if(this.idt(t).getTime()>e.getTime())return!1;const i=this.edt(t);return!(i&&e.getTime()>=i.getTime())}vbt(t,e){if(this.sbt)return!0;if(this.gbt(t).getTime()>e.getTime())return!1;const i=this.edt(t);return!(i&&e.getTime()>=i.getTime())}mbt(t,e,i){const s=fo(e,this.OA)+this.ppt.Sn;return{Mut:t,pbt:e,lF:s,ct:i,dF:s+i}}gbt(t){return this.ppt.rbt.zw===Rs.qW?new Date(this.ppt.rbt.lyt.getTime()+1e3*(t.lF+t.ct)):this.ppt.rbt.lyt}idt(t){const e=this.gbt(t);return this.ppt.rbt.zw===Rs.qW?new Date(e.getTime()-1e3*this.dbt):e}edt(t){let e=1/0;if(this.ppt.rbt.zw===Rs.qW){const i=this._bt.wwt;i&&(e=this.gbt(t).getTime()+1e3*t.ct+i.ewt())}const i=this.ppt.rbt.cyt;return i&&(e=_.min(e,i.getTime())),e===1/0?void 0:new Date(e)}wbt(t,e){return t.Mut+e}get aW(){return this.ppt.Sn-fo(this.ybt,this.OA)}get mwt(){return fo(this.ybt,this.OA)}Kct(t){return!1}Qct(t,e,i,s,n){const r=this.bbt(t);if(!r)return Promise.reject(new m("Invalid segment"));const o=this.Abt(r.Mut,e);return o?Promise.resolve(o):Lu(this.Sbt(r.Mut,e,i,s),n)}Abt(t,e){}Sbt(t,e,i,s){return Promise.reject(new m("Not supported"))}tlt(t){const e=this.bbt(t);if(e)return this.ebt(e.Mut-1)}elt(t){const e=this.bbt(t);if(e)return this.ebt(e.Mut+1)}bbt(t){const e=this.ebt(t.Mut);if(e&&e.lF===t.lF)return e;const i=this.jyt(t.lF);return i&&i.lF===t.lF?i:void 0}Tbt(t,e){const i=this.Jct(t);if(!i||!this.Kct(i.Mut))return;const s=this.Abt(i.Mut,e);return s?s.Tbt(t):void 0}Jct(t){return this.ebt(t.kbt)}Glt(t){const e=this.bbt(t);return!!e&&0===e.Mut}Xyt(t,e){const i=this.Tbt(t,e);return!!i&&0===i.Nut}Gct(t){const e=this.bbt(t);if(!e)return!1;const i=this.ibt();return!!i&&e.Mut===i.Mut}zyt(t,e){const i=this.Tbt(t,e);if(!i)return!1;const s=this.ibt();if(!s||i.kbt!==s.Mut)return!1;const n=this.Abt(i.kbt,e);return i.Nut+1===n.V}Km(){}constructor(t,e){this.ppt=t,this._bt=e,this.OA=e.RN,this.dbt=e.hwt,this.ybt=e.mwt}},PZ=class extends CZ{ebt(t){if(t<0)return;const e=this.Ebt.multiply(t),i=fo(e,this.OA),s=this.ppt.ct;if(i>=s)return;const n=this.xbt();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.mbt(t,e,s-i)}return isFinite(s)&&i+this.Ibt>s?this.mbt(t,e,s-i):this.mbt(t,e,this.Ibt)}Qyt(){return 0}$yt(t){const e=_.floor(t/this.Ibt),i=this.xbt();return void 0!==i&&e>=i?this.ebt(i):this.ebt(e)}tbt(t){if(t>=this.ppt.ct){const t=_.ceil(this.ppt.ct/this.Ibt)-1,e=this.xbt();return void 0!==e&&t>=e?this.ebt(e):this.ebt(t)}return this.$yt(t)}xbt(){const t=this._bt.Awt;var e;if(void 0!==t)return t-(null!=(e=this._bt.bwt)?e:1);const i=this._bt.Rbt;return void 0!==i&&i>0?i-1:void 0}obt(){if(isFinite(this.ppt.ct))return this.ibt()}Cbt(t,e){return this.Ebt.multiply(t.Mut+(e-1))}ir(){}constructor(t,e){super(e,t);const i=t.Pbt,s=t.ct;if(void 0===i||void 0===s)throw new m("MultipleSegmentBase does not have a segment duration specified.");this.Ebt=i,this.Ibt=s}};function DZ(t,e,i){const s=e.length;if(0===s)return-1;let n=0,r=s-1,o=t.Dbt(e[n]),h=t.Nbt(e[r]);for(;n<=r&&t.Mbt(o,i)<=0&&t.Mbt(i,h)<0;){const a=n+_.floor(t.Lbt(i,o,h)*(r-n)),u=e[a],c=t.Dbt(u),l=a+1<s?t.Dbt(e[a+1]):t.Nbt(u);if(t.Mbt(l,i)<=0)n=a+1,o=l;else{if(!(t.Mbt(i,c)<0))return a;r=a-1,h=c}}return-1}function NZ(t,e){return DZ(MZ.Vm,t,e)}r(),r(),r();var MZ=class t{static get Vm(){return null!=this.Bbt||(this.Bbt=new t),this.Bbt}Dbt(t){return t.lF}Nbt(t){return t.dF}Mbt(t,e){return t.compare(e)}Lbt(t,e,i){return t.subtract(e).toNumber()/i.subtract(e).toNumber()}},LZ=.01,BZ=class extends CZ{ebt(t){if(!(t<0))return t<this.Obt.length?this.Obt[t].Eut:this.Fbt(t-this.Obt.length)}Qyt(){if(this.Obt.length>0)return fo(this.Obt[0].lF,this.OA)}$yt(t){if(this.Vbt&&fo(this.Vbt.lF,this.OA)<=t){const e=fo(this.Vbt.lF,this.OA),i=fo(this.Vbt.ct,this.OA),s=_.floor((t-e)/i);return this.Fbt(s)}if(this.Obt.length>0&&rs(t,fo(this.Obt[0].lF,this.OA),1e-5))return this.Obt[0].Eut;const e=NZ(this.Obt,po.fromNumber(t*this.OA));return e<0?void 0:this.Obt[e].Eut}tbt(t){if(!this.Vbt&&this.Obt.length>0){const e=this.Obt[this.Obt.length-1];if(function(t,e,i){return Jd(t,e,i)>=0}(t,fo(e.dF,this.OA),1e-5))return e.Eut}const e=this.Qyt();return e&&t<e?this.Obt[0].Eut:this.$yt(t)}obt(){return isFinite(this.ppt.ct)?this.ibt():this.ebt(this.Obt.length-1)}Cbt(t){return this.Wbt(t)}Fbt(t){if(!this.Vbt)return;const e=this.Vbt.lF,i=this.Vbt.ct,s=e.add(i.multiply(t)),n=fo(s,this.OA),r=this.ppt.ct;if(n>=r)return;const o=this.Obt.length+t,h=_.min(fo(i,this.OA),n+r);return this.mbt(o,s,h)}Wbt(t){return t.pbt.add(this.ybt)}ir(){const t=this._bt.$k.Eot;if(!t)throw new m("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.Ubt(t)}Ubt(t){const e=this.ybt;this.Gbt(t,e);const i=this.Zbt(t);this.Hbt(t,e,i.Xbt,i.kbt)}Gbt(t,e){const i=this.Obt;if(0===t.length)En(i);else{const s=t[0];let n=0;const r=fo(s.lF?po.fromString(s.lF,!1).subtract(e):po.ZERO,this.OA);for(;n<i.length&&fo(i[n].lF,this.OA)<r-LZ;)n++;n>0&&i.splice(0,n)}}Zbt(t){const e=this.Obt,i=this.vmt;let s=0,n=0;for(;s<t.length&&n<e.length;){const r=t[s].uwt||0;if(r<0)break;const o=n+r;if(o>=e.length)break;if(e[o].lF.greaterThanOrEqual(i))break;if(e[n].Eut.Mut===n)n=o+1;else for(;n<=o;)e[n].Eut.Mut=n,n++;0,s++}return{Xbt:s,kbt:n}}Hbt(t,e,i,s){const n=this.Obt;let r,o=i,h=s;for(;o<t.length;){const i=t[o],s=po.fromString(i.ct,!1),a=i.uwt||0;let u;if(i.lF){if(u=po.fromString(i.lF,!1).subtract(e),h>0){const t=n[h-1];t.dF.greaterThan(u)&&(t.ct=u.subtract(t.lF),t.dF=t.lF.add(t.ct))}}else u=h>0?n[h-1].dF:po.ZERO;if(a<0){if(o+1===t.length){r={lF:u,ct:s};break}const i=po.fromString(t[o+1].lF,!1).subtract(e);for(;u.lessThan(i);){const t=u.add(s);this.zbt(n,h,u,s,t),u=t,h++}}else{const t=h+a;for(;h<=t;){const t=u.add(s);this.zbt(n,h,u,s,t),u=t,h++}}o++}h<n.length&&n.splice(h),n.length>0&&(this.vmt=n[n.length-1].lF),this.Vbt=r}zbt(t,e,i,s,n){if(e<t.length){const r=t[e];0,r.ct.equals(s)?r.Eut.Mut=e:t[e]={lF:i,ct:s,dF:n,Eut:this.mbt(e,i,fo(s,this.OA))}}else t.push({lF:i,ct:s,dF:n,Eut:this.mbt(e,i,fo(s,this.OA))})}constructor(t,e){super(e,t),this.Obt=[],this.Vbt=void 0,this.vmt=po.ZERO,this.ir()}};r();var OZ=class{get $k(){return this.Xp}get hwt(){return this.Xp&&void 0!==this.Xp.hwt?this.Xp.hwt:this.qbt?this.qbt.hwt:0}get mwt(){return this.Xp&&void 0!==this.Xp.mwt?this.Xp.mwt:this.qbt?this.qbt.mwt:po.ZERO}get wwt(){return this.Xp&&void 0!==this.Xp.wwt?this.Xp.wwt:this.qbt?this.qbt.wwt:this.Zct.rbt.wwt}get RN(){return this.Xp&&void 0!==this.Xp.RN?this.Xp.RN:this.qbt&&this.qbt.RN?this.qbt.RN:1}get cwt(){return this.Xp&&void 0!==this.Xp.cwt?this.Xp.cwt:this.qbt?this.qbt.cwt:void 0}get gwt(){return this.Xp&&void 0!==this.Xp.gwt?this.Xp.gwt:this.qbt?this.qbt.gwt:void 0}get Eot(){return this.Ybt||(this.Ybt=this.Kbt()),this.Ybt}Kbt(){if(this.jbt=this.Qbt(),this.jbt)return this.jbt;if(this.qbt)return this.qbt.Eot;throw new m("Missing media segment information.")}Oyt(t){const e=this.gwt;if(e){return{Xu:(void 0!==e.awt?As.Bh(e.awt,t.Fwt[0]):t.Fwt[0]).href,Kat:e.Kat}}const i=this.cwt;if(i)return{Xu:t.Fwt[0].href,Kat:[0,i[0]-1]}}ir(t){this.Xp=t,this.jbt&&this.jbt.ir()}Km(){this.jbt&&(this.jbt.Km(),this.jbt=void 0)}constructor(t,e,i){this.Ybt=void 0,this.jbt=void 0,this.Zct=t,this.qbt=e,this.Xp=i}},FZ=class extends OZ{get ct(){return void 0!==this.Xp.ct?this.Xp.ct/this.RN:this.qbt&&VZ(this.qbt)?this.qbt.ct:void 0}get Pbt(){return void 0!==this.Xp.ct?po.fromNumber(this.Xp.ct):this.qbt&&VZ(this.qbt)?this.qbt.Pbt:void 0}get bwt(){return void 0!==this.Xp.bwt?this.Xp.bwt:this.qbt&&VZ(this.qbt)?this.qbt.bwt:void 0}get Awt(){return void 0!==this.Xp.Awt?this.Xp.Awt:this.qbt&&VZ(this.qbt)?this.qbt.Awt:void 0}Qbt(){return void 0!==this.Xp.Eot?new BZ(this,this.Zct):void 0!==this.Xp.ct?new PZ(this,this.Zct):void 0}};function VZ(t){return t instanceof FZ}r();var WZ=class{Zb(t){return this.Jbt.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,((e,i,s,n)=>{if("$$"===e)return"$";const r=t[i];if(void 0===r)return e;if(void 0===s)return r.toString();let o=function(t,e){switch(e){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===o?e:(o=Sa(o,Number(s),"0"),o)}))}constructor(t){this.Jbt=t}};var UZ=class t extends FZ{get Bwt(){return this.$bt?this.$bt:this.qbt&&this.qbt instanceof t?this.qbt.Bwt:void 0}get Owt(){return this.tAt?this.tAt:this.qbt&&this.qbt instanceof t?this.qbt.Owt:void 0}Oyt(t){const e=this.Bwt;if(!e)return super.Oyt(t);const i=e.Zb({Bandwidth:t.$k.jG,RepresentationID:t.$k.o});return{Xu:As.Ew(i,t.Fwt[0])}}nlt(t,e){var i;const s=null!=(i=e.Vyt.bwt)?i:1,n=this.Owt.Zb({Bandwidth:e.$k.jG,Number:e.Eot.wbt(t,s),RepresentationID:e.$k.o,Time:e.Eot.Cbt(t,s)});return{Xu:As.Ew(n,e.Fwt[0])}}Gyt(t,e){}get Rbt(){}constructor(t,e,i){super(t,e,i),this.$bt=i.Bwt?new WZ(i.Bwt):void 0,this.tAt=i.Owt?new WZ(i.Owt):void 0}};r();var GZ=class t extends FZ{nlt(t,e){const i=this.dwt[t.Mut],s=e.Fwt[0];let n;return n=i.LN?As.Bh(i.LN,s):s,{Xu:n.href,Kat:i.lwt}}Gyt(t,e){}get dwt(){return void 0!==this.Xp.dwt?this.Xp.dwt:this.qbt&&this.qbt instanceof t?this.qbt.dwt:void 0}get Rbt(){var t;return null==(t=this.dwt)?void 0:t.length}};r(),r(),r(),r();var ZZ=class{Tbt(t){const e=this.$ct(t.Nut);if(e&&e.lF===t.lF)return e;const i=this.eAt(t.lF);return i&&i.lF===t.lF?i:void 0}},HZ=class extends ZZ{get V(){return this.iAt.length}$ct(t){if(t>=0&&t<this.V)return this.sAt(this.iAt[t])}eAt(t){const e=this.nAt(t);if(this.iAt.length>0){const t=this.iAt[0];if(e<=fo(t.lF,this.RN))return this.sAt(t)}const i=NZ(this.iAt,po.fromNumber(e*this.RN));if(!(i<0))return this.sAt(this.iAt[i])}jct(t){const e=this.nAt(t),i=Jr(this.iAt,-1);return void 0!==i&&e>=fo(i.dF,this.RN)?this.sAt(i):this.eAt(t)}sAt(t){const e=fo(t.lF,this.RN)-this.mwt,i=e+this.rAt,s=fo(t.ct,this.RN);return{kbt:this.kbt,Nut:t.Mut,lF:i,pbt:po.fromNumber(e*this.RN),ct:s,dF:i+s,oAt:[t.hAt,t.aAt]}}nAt(t){return t-this.rAt+this.mwt}constructor(t,e,i,s,n){super(),this.kbt=t,this.RN=e,this.rAt=i,this.mwt=s,this.iAt=n}};r(),r(),r();var XZ=class t{Bgt(){return this.BD.nc<this.$k.byteLength}uAt(){const e=this.cAt(),i=this.lAt(),s=this.BD.nc,n=this.$k.byteLength;let r;r=t.dAt(i)?n-s:t.fAt(i);const o=s+r<=n?r:n-s,h=$(this.$k,this.BD,o);return new qZ(e,sa(h))}cAt(){const t=this.lAt();if(t.length>7)throw new RangeError("Invalid EBML ID size");let e=0;for(let i=0;i<t.length;i++)e=256*e+t[i];return e}lAt(){const t=hc(this.$k,this.BD.Nb());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const e=8-(31-Pm(t));return As.cw(e<=8&&e>=1,"Incorrect log2 value"),$(this.$k,this.BD,e)}static fAt(t){if(8===t.length&&224&t[1])throw new g("EBML variable sized integer is too large");let e=0;for(let i=0;i<t.length;i++){const s=t[i];if(0===i){e=s&(1<<8-t.length)-1}else e=256*e+s}return e}static dAt(t){for(const e of zZ)if(ho(t,new j(e)))return!0;return!1}constructor(t){this.$k=t,this.BD=new er}},zZ=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],qZ=class{_At(){return this.vAt.byteOffset}gAt(){return new XZ(this.vAt)}mAt(){const t=this.vAt.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.vAt.getUint8(0))throw new RangeError("EMBL integer field value is too large");let e=0;for(let i=0;i<t;i++){e=256*e+this.vAt.getUint8(i)}return e}eJ(){if(4===this.vAt.byteLength)return this.vAt.getFloat32(0);if(8===this.vAt.byteLength)return this.vAt.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,e){this.id=t,this.vAt=e}};function YZ(t,e){const i=function(t){const e=new XZ(sa(t)),i=e.uAt();if(i.id!==jZ)throw new g("Missing WebM EBML header");const s=e.uAt();if(s.id!==QZ)throw new g("Missing WebM SegmentElement");const n=s._At(),r=function(t){const e=t.gAt();let i;for(;e.Bgt();){const t=e.uAt();if(t.id===JZ){i=t;break}}if(!i)throw new g("Missing WebM InfoElement");return function(t){const e=t.gAt();let i,s=1e6;for(;e.Bgt();){const t=e.uAt();t.id===$Z?s=t.mAt():t.id===tH&&(i=t.eJ())}if(void 0===i)throw new g("Missing Duration in WebM InfoElement");const n=s/1e9,r=i*n;return{timecodeScale:n,duration:r}}(i)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(e),s=new XZ(sa(t)).uAt();if(s.id!==eH)throw new g("Missing WebM CuesElement");const n=function(t,e,i,s){const n=[],r=t.gAt();let o,h;for(;r.Bgt();){const t=r.uAt();if(t.id!==iH)continue;const i=KZ(t);if(!i)continue;const s=i.unscaledTime,a=e+i.relativeOffset;void 0!==o&&n.push({Mut:n.length,lF:o,ct:s.subtract(o),dF:s,hAt:h,aAt:a-1}),o=s,h=a}if(void 0!==o){0;const t=po.fromNumber(s/i);n.push({Mut:n.length,lF:o,ct:t.subtract(o),dF:t,hAt:h,aAt:void 0})}return n}(s,i.segmentOffset,i.timecodeScale,i.duration);return{RN:_.round(1/i.timecodeScale),pAt:n}}function KZ(t){const e=t.gAt(),i=e.uAt();if(i.id!==sH)throw new g("Missing CueTime in WebM CuePointElement");const s=po.fromNumber(i.mAt()),n=e.uAt();if(n.id!==nH)throw new g("Missing CueTrackPositions in WebM CuePointElement");const r=n.gAt();let o=0;for(;r.Bgt();){const t=r.uAt();if(t.id===rH){o=t.mAt();break}}return{unscaledTime:s,relativeOffset:o}}var jZ=440786851,QZ=408125543,JZ=357149030,$Z=2807729,tH=17545,eH=475249515,iH=187,sH=179,nH=183,rH=241,oH=class extends CZ{ebt(t){if(0===t)return this.wAt}Qyt(){return 0}$yt(t){return this.wAt}tbt(t){return this.$yt(t)}obt(){return this.wAt}Cbt(t,e){return po.ZERO}Zyt(t){const e=this.yAt(t);return e&&{hbt:t,abt:e,ubt:e}}yAt(t){const e=this.wAt;return this.cdt(e,t)?e:void 0}cbt(t){return this.yAt(t)}lbt(t){return this.yAt(t)}ir(){}Kct(t){return 0===t&&void 0!==this.bAt}Abt(t,e){const i=e.Fwt[0].href;return this.AAt.get(i)}Sbt(t,e,i,s){const n=e.Fwt[0].href;let r=this.SAt.get(n);if(void 0===r){const o=e.SY,h=this.TAt.ep;if(Xh(o))r=this.kAt(t,n,i,s,h);else{if(!Uy(o))throw new Z(Ci.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+o);r=this.EAt(t,n,e,i,s,h)}this.SAt.set(n,r)}return r}async kAt(t,e,i,s,n){const r=this.bAt,o=await s.Slt(e,r,i,n),h=this.xAt(t,o);return this.AAt.set(e,h),h}xAt(t,e){const i=this.bAt,s=ci.tN(new DataView(e),new er);if(s.zw!==Ai.xD)throw new m("Invalid segment index");const n=Es.yN(s.$k),r=function(t,e){const i=[];let s=t.tB,n=e+t.eB.toNumber(),r=0;for(const e of t.sB){const t=e.KL,o=po.fromNumber(e.ct),h=s.add(o);0===e.YL&&i.push({Mut:r++,lF:s,ct:o,dF:h,hAt:n,aAt:n+t-1}),n+=t,s=h}return i}(n,i[1]+1);return new HZ(t,n.RN,this.ppt.Sn,fo(this.ybt,this.OA),r)}async EAt(t,e,i,s,n,r){const o=i.Oyt(),h=this.bAt,a=n.Slt(o.Xu,o.Kat,s,r),u=n.Slt(e,h,s,r),[c,l]=await Promise.all([a,u]),d=this.IAt(t,l,c);return this.AAt.set(e,d),d}IAt(t,e,i){const s=YZ(new j(e),new j(i));return new HZ(t,s.RN,this.ppt.Sn,fo(this.ybt,this.OA),s.pAt)}Km(){super.Km(),this.TAt.np()}constructor(t,e){super(e,t),this.AAt=Vh(),this.SAt=Vh(),this.TAt=new Fi,this.bAt=t.cwt,this.wAt=this.mbt(0,po.ZERO,this.ppt.ct)}},hH=class extends OZ{get bwt(){}nlt(t,e){return{Xu:e.Fwt[0].href}}Gyt(t,e){return{Xu:e.Fwt[0].href,Kat:t.oAt}}Qbt(){return new oH(this,this.Zct)}};r();var aH=class extends me{constructor(){super(Cs.Xht)}};r();var uH=class extends So{get $k(){return this.Xp}get Fwt(){return this.RAt}CAt(){var t,e;return null!=(e=this._bt)?e:null==(t=this.ux)?void 0:t.CAt()}PAt(t){const e=this.Zct,i=this.ux&&this.ux.CAt();this.Xp.Uwt?this._bt=new UZ(e,i,this.Xp.Uwt):this.Xp.Wwt?this._bt=new GZ(e,i,this.Xp.Wwt[0]):this.Xp.Vwt?this._bt=new hH(e,i,this.Xp.Vwt):t&&!i&&(this._bt=new hH(e,i,void 0))}DAt(t,e){this.Xp=t,this.RAt=t.Fwt&&t.Fwt.length>0?RZ(t.Fwt.map((t=>t.Xu)),e):e.slice(),this._bt&&(t.Uwt?this._bt.ir(t.Uwt):t.Wwt?this._bt.ir(t.Wwt[0]):t.Vwt&&this._bt.ir(t.Vwt))}Cyt(){var t;return null==(t=this.NAt)?void 0:t.MAt}Hyt(){var t;return null==(t=this.NAt)?void 0:t.LAt}BAt(t){const e=this.OAt,i=this.Zct.ct,s=this.NAt,n=this.FAt(t);s&&rs(i,e,1e-5)&&fH(s,n)||(this.OAt=i,this.NAt=n,this._o(new aH))}Km(){this.Ro(),this._bt&&(this._bt.Km(),this._bt=void 0)}constructor(t,e,i){super(),this._bt=void 0,this.OAt=1/0,this.NAt=void 0,this.ux=e,this.DAt(t,i)}};function cH(t){let e,i;for(const i of t){const t=i.Cyt();if(t){e=t.Sn;break}}if(void 0!==e){for(let e=t.length-1;e>=0;e--){const s=t[e].Cyt();if(s){i=s.Tn;break}}return void 0!==i?{Sn:e,Tn:i}:void 0}}function lH(t){if(0===t.length)return;let e=0,i=1/0;for(const s of t){const t=s.Cyt();if(!t)return;if(e=_.max(e,t.Sn),i=_.min(i,t.Tn),e>=i)return}return{Sn:e,Tn:i}}function dH(t){let e;for(const i of t){const t=i.Hyt();t&&(!e||t.getTime()<e.getTime())&&(e=t)}return e}function fH(t,e){return function(t,e){return t&&e?t.getTime()===e.getTime():t===e}(t.LAt,e.LAt)&&function(t,e){return t&&e?rs(t.Sn,e.Sn,1e-5)&&rs(t.Tn,e.Tn,1e-5):t===e}(t.MAt,e.MAt)}var _H=class extends EZ{get ift(){return this.VAt}get Frt(){return this.ift.reduce(((t,e)=>{for(const i of e.Frt)fh(t,i)||t.push(i);return t}),[])}get Op(){return this.Frt.length>0?this.Frt[0]:""}get zw(){return this.VAt[0].zw}get o(){return this.jS}get tdt(){return this.ppt.tdt}get SY(){return this.VAt[0].SY}get Zct(){return this.ppt}get Mat(){return Ye(this.ift,(t=>t.Mat))}Cyt(){return lH(this.VAt)}Hyt(){let t;for(const e of this.VAt){const i=e.Hyt();i&&(!t||i.getTime()<t.getTime())&&(t=i)}return t}yn(){this.Ro();for(const t of this.VAt)t.vn(Cs.Xht,this.Dyt)}constructor(t,e,i){super(),this.ppt=t,this.jS=e,this.VAt=i.slice();for(const t of i)t.bn(Cs.Xht,this.Dyt)}};r();var vH=class extends me{constructor(){super(Cs.qht)}};function gH(t){const e=[];for(const i of t){let t;const s=i.Adt;void 0===s||(t=Do(e,(t=>t.o===s))),t||(t={o:s,ift:[]},e.push(t)),t.ift.push(i)}return e}r();var mH=class extends EZ{get ift(){return this.VAt}get mpt(){return this.WAt}get oyt(){return this.Nyt.$k.oyt}get ct(){return this.Nyt.ct}get Tn(){return this.Sn+this.ct}get hyt(){return this.Nyt.$k.hyt||[]}get o(){return this.Nyt.o}get Yht(){return this.UAt}get tdt(){return this.GAt}get Ypt(){return this.GAt.ZAt(this)}get Zct(){return this}get qpt(){return this.GAt.HAt(this)}get XAt(){return this.zAt(1/0,_.min)}get qAt(){return this.zAt(0,_.max)}zAt(t,e){if(0===this.WAt.length)return;let i=t;for(const t of this.WAt)if(xT(t.zw)){const s=t.Pyt;if(void 0===s)return;i=e(i,s)}return i}get Sn(){return this.Nyt.Sn}get DE(){return this.tdt.DE}YAt(){this.UAt||(this.UAt=!0,this._o(new vH),this.yn())}async ir(t,e){0===this.VAt.length?(await this.KAt(this.Nyt.ift,t,e),this.jAt(this.VAt),Io(e)):await this.QAt(t,e)}async KAt(t,e,i){for(const s of t){const t=new IZ(this,s);try{await t.ir(e,i),this.VAt.push(t)}catch(t){ih(t)}}}jAt(t){const e=gH(t);for(const t of e){const e=new _H(this,t.o,t.ift);this.WAt.push(e)}}async QAt(t,e){for(const i of this.VAt)await i.ir(t,e)}Cyt(){return this.Nyt.Cyt()}Hyt(){return this.Nyt.Hyt()}yn(){this.Ro(),this.Nyt.vn(Cs.Xht,this.Dyt);for(const t of this.WAt)t.yn();for(const t of this.VAt)t.yn();En(this.VAt),En(this.WAt)}constructor(t,e){super(),this.VAt=[],this.WAt=[],this.UAt=!1,this.GAt=t,this.Nyt=e,this.Nyt.bn(Cs.Xht,this.Dyt)}};r();var pH=class extends me{constructor(){super(ns.Xy)}};r(),r();var wH=function(t){return t.JAt="$At",t}({}),yH=class extends me{constructor(){super(wH.JAt)}};r(),r(),r(),r();var bH=class extends uH{get nct(){return this.Tat}get Zct(){return this.Tat.Zct}get rbt(){return this.Tat.rbt}get SY(){return this.Xp.SY||this.Tat.SY}get Vyt(){return this.CAt()}get Eot(){return this.Vyt.Eot}Kct(t){const e=this.SY;return!(!Xh(e)&&!Uy(e))&&this.Eot.Kct(t.Mut)}Qct(t,e,i,s){return this.Eot.Qct(t,this,e,i,s)}Oyt(){return this.Vyt.Oyt(this)}nlt(t){return this.Vyt.nlt(t,this)}Gyt(t){return this.Vyt.Gyt(t,this)}Zyt(){return this.tSt}FAt(t){const e=this.Eot,i=e.Zyt(t),s=i&&function(t,e){const{abt:i,ubt:s,hbt:n}=t,r=i.lF;let o;const h=e.gbt(s);if(h.getTime()<=n.getTime())o=s.dF;else{const t=(h.getTime()-n.getTime())/1e3,e=_.max(s.ct-t,0);o=s.lF+e}return{Sn:r,Tn:o}}(i,e),n=this.Eot.Hyt(t,i);return this.tSt=i,{hbt:t,MAt:s,LAt:n}}ir(t){this.DAt(t,this.Tat.Fwt)}constructor(t,e){super(t,e,e.Fwt),this.tSt=void 0,this.Tat=e,this.PAt(!0)}},AH=class extends uH{get Mat(){return this.xdt}get Zct(){return this.ppt}get rbt(){return this.ppt.rbt}get Adt(){return this.Xp.Adt}get SY(){var t;return this.Xp.SY||(null==(t=this.xdt[0])?void 0:t.$k.SY)||""}get kwt(){return this.$k.kwt}get Ewt(){return this.$k.Ewt}ir(t){this.DAt(t,this.ppt.Fwt);const e=t.Mat||[];if(this.xdt.length!==e.length)throw new m("Expected "+this.xdt.length+' representations in adaptation set "'+t.o+'", found '+e.length);for(let t=0;t<e.length;t++)this.xdt[t].ir(e[t])}BAt(t){for(const e of this.xdt)e.BAt(t);super.BAt(t)}FAt(t){return{hbt:t,MAt:lH(this.xdt),LAt:dH(this.xdt)}}Km(){for(const t of this.xdt)t.Km();super.Km()}constructor(t,e){super(t,e,e.Fwt),this.ppt=e,this.PAt(!1),this.xdt=t.Mat.map((t=>new bH(t,this)))}},SH=class extends uH{get ift(){return this.VAt}get mpt(){return this.WAt}get Zct(){return this}get rbt(){return this.eSt}get o(){return this.Xp.o}get Sn(){return this.bW}get ct(){return this.FA}ir(t,e){this.DAt(t,this.eSt.Fwt),this.FA=e;const i=t.ift||[];if(this.VAt.length!==i.length)throw new m("Expected "+this.VAt.length+' adaptation sets in period "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.VAt[t].ir(i[t])}BAt(t){for(const e of this.VAt)e.BAt(t);super.BAt(t)}FAt(t){return{hbt:t,MAt:lH(this.VAt),LAt:dH(this.VAt)}}Km(){for(const t of this.VAt)t.Km();super.Km()}constructor(t,e,i,s){super(e,void 0,t.Fwt),this.WAt=[],this.eSt=t,this.bW=i,this.FA=s,this.PAt(!1),this.VAt=(e.ift||[]).map((t=>new AH(t,this))),this.WAt=gH(this.VAt)}};r();var TH=class{get iSt(){return this.sSt.uyt.BV}get nSt(){return this.sSt.uyt.LV}get rSt(){return this.sSt.uyt.ayt}get oSt(){var t;return null==(t=this.sSt.tR)?void 0:t.BV}get hSt(){var t;return null==(t=this.sSt.tR)?void 0:t.BV}constructor(t){this.sSt=t}},kH=new Date("2000-01-01"),EH=class extends So{get $k(){return this.Xp}get zw(){return this.Xp.zw||Rs.zW}get lyt(){return this.aSt||this.Xp.lyt||this.wyt}get cyt(){return this.Xp.cyt}get nbt(){var t,e;return null!=(e=null==(t=this.uSt)?void 0:t.ignoreAvailabilityWindow)&&e}get gyt(){return this.cSt}get Fwt(){return this.RAt}get dyt(){return this.lSt}get Ipt(){return this.dSt}get wyt(){return this.Xp.wyt||this.Pn}get wwt(){return this.Xp.wwt}get fSt(){return this._St}get vSt(){return this.Pn}get Ayt(){return this.sSt}Cyt(){var t;return null==(t=this.NAt)?void 0:t.MAt}Hyt(){var t;return null==(t=this.NAt)?void 0:t.LAt}ir(t,e,i,s){var n;const r=void 0!==this.Xp&&this.Xp.zw===Rs.qW;this.Xp=t,this._St=null!=s?s:i,this.Pn=i;const o=[cA(e)];this.RAt=t.Fwt&&t.Fwt.length>0?RZ(t.Fwt.map((t=>t.Xu)),o):o,this.lSt=t.dyt&&t.dyt.length>0?RZ(t.dyt,this.RAt):[];const h=this.lSt.map((t=>t.href)),a=e.href;fh(h,a)||(this.lSt.push(e),h.push(a));const u=this.gSt.href;fh(h,u)||(this.lSt.push(this.gSt),h.push(u)),this.cSt=null==(n=t.gyt)?void 0:n.twt(),t.Ayt&&(this.sSt=new TH(t.Ayt));const c=t.zw===Rs.qW,l=function(t,e,i){const s=[];for(let i=0;i<t.length;i++){const n=t[i];let r;if(n.Sn)r=n.Sn.twt();else if(i>0&&t[i-1].ct){r=s[i-1]+t[i-1].ct.twt()}else{if(0!==i||e)break;r=0}s.push(r)}const n=[];for(let e=0;e<s.length-1;e++)n.push({$k:t[e],Sn:s[e],ct:s[e+1]-s[e]});if(s.length>0){const r=s.length-1,o=t[r],h=s[r];let a=1/0;e||(a=o.ct?o.ct.twt():i-h),n.push({$k:o,Sn:h,ct:a})}return n}(t.Ipt,c,this.cSt);this.mSt(l,r,c),this.BAt(i)}mSt(t,e,i){const s=this.dSt;if(0===t.length)return void En(s);const n=t[0].$k.o;let r=0;for(;r<s.length&&s[r].o!==n;)r++;const o=s.splice(0,r);for(const t of o)t.Km();if(e&&!i&&s.length>0&&t.length>0){var h;const e=null!=(h=xH(s[0].$k))?h:Ic.nV;var a;const i=null!=(a=xH(t[0].$k))?a:Ic.nV;if(i.WF(e)){const n=i.jF(e);void 0!==this.cSt&&(this.cSt+=n.VF());for(let e=0;e<t.length;e++){const i=t[e];if(e<s.length){const t=s[e];i.Sn=t.Sn,DH(i.$k,t.$k)}e===t.length-1&&(i.ct+=n.VF())}}}for(let e=0;e<t.length;e++){const i=t[e];if(e<s.length){const t=s[e];0,t.ir(i.$k,i.ct)}else s.push(new SH(this,i.$k,i.Sn,i.ct))}}BAt(t){for(const e of this.dSt)e.BAt(t);const e=this.NAt,i=this.FAt(t);e&&fH(e,i)||(this.NAt=i,this._o(new aH))}FAt(t){return{hbt:t,MAt:cH(this.dSt),LAt:dH(this.dSt)}}obt(){const t=Jr(this.dSt,-1);if(void 0===t)return;if(isFinite(t.ct))return;if(0===t.ift.length)return;const e=t.ift[0];if(0===e.Mat.length)return;const i=e.Mat[0].Eot,s=i.obt();return s?{Eut:s,cyt:i.edt(s)}:void 0}Km(){this.Ro();for(const t of this.dSt)t.Km()}constructor(t,e,i,s,n){if(super(),this.NAt=void 0,this.cSt=void 0,this.aSt=void 0,this.dSt=[],this.gSt=e,this.uSt=n,this.ir(t,i,s),t.zw===Rs.qW){const t=this.obt();t&&t.cyt&&t.cyt.getTime()<kH.getTime()&&(this.aSt=new Date(this.wyt.getTime()-1e3*(t.Eut.lF+t.Eut.ct)),this.BAt(s))}}};function xH(t){let e=CH(t);var i,s;for(const s of null!=(i=t.ift)?i:[])e=mE(e,IH(s));for(const i of null!=(s=t.hyt)?s:[])e=mE(e,PH(i));return e}function IH(t){let e=CH(t);for(const i of t.Mat)e=mE(e,RH(i));return e}function RH(t){return CH(t)}function CH(t){let e;if(void 0!==t.Uwt&&(e=mE(e,PH(t.Uwt))),void 0!==t.Vwt&&(e=mE(e,PH(t.Vwt))),void 0!==t.Wwt)for(const i of t.Wwt)e=mE(e,PH(i));return e}function PH(t){var e,i;return Ic.eV(null!=(e=t.mwt)?e:po.ZERO,null!=(i=t.RN)?i:1)}function DH(t,e){if(LH(t,e),t.Sn=e.Sn,void 0!==t.ift&&void 0!==e.ift&&t.ift.length===e.ift.length)for(let i=0;i<t.ift.length;i++)NH(t.ift[i],e.ift[i]);if(void 0!==t.hyt&&void 0!==e.hyt&&t.hyt.length===e.hyt.length)for(let i=0;i<t.hyt.length;i++)BH(t.hyt[i],e.hyt[i])}function NH(t,e){if(LH(t,e),void 0!==t.Mat&&void 0!==e.Mat&&t.Mat.length===e.Mat.length)for(let i=0;i<t.Mat.length;i++)MH(t.Mat[i],e.Mat[i])}function MH(t,e){LH(t,e)}function LH(t,e){if(void 0!==t.Uwt&&void 0!==e.Uwt&&BH(t.Uwt,e.Uwt),void 0!==t.Vwt&&void 0!==e.Vwt&&BH(t.Vwt,e.Vwt),void 0!==t.Wwt&&void 0!==e.Wwt&&t.Wwt.length===e.Wwt.length)for(let i=0;i<t.Wwt.length;i++)BH(t.Wwt[i],e.Wwt[i])}function BH(t,e){t.RN=e.RN,t.mwt=e.mwt}r();var OH=class{async nQ(t){await this.pSt(t,this.WW,this.wSt,this.ySt).catch(vf)}$lt(){return new Date(qf()+this.bSt)}async pSt(t,e,i,s){let n;if(s&&(n=await this.ASt(e,s,i)),void 0===n){Io(i);for(const s of t)if(n=await this.SSt(e,s,i),void 0!==n)break}this.bSt=void 0===n?0:n-qf()}async SSt(t,e,i){switch(e.G9){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=e.Fx;if(s)return await this.ASt(t,s,i);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=e.Fx;if(t){const e=new Date(t).getTime();if(!S(e))return e}break}default:return}}async ASt(t,e,i){try{const s=await t.eE({Xu:e,EE:Ce.GET,tE:Te.Rk,ep:i}),n=await s.Mk(),r=new Date(n).getTime();if(!S(r))return r}catch(t){ih(t)}}constructor(t,e,i){this.WW=t,this.wSt=e,this.ySt=i,this.bSt=0}},FH=class extends So{get cyt(){return this.Nyt&&this.Nyt.cyt}get lyt(){return this.Nyt&&this.Nyt.lyt}get nbt(){return this.Nyt&&this.Nyt.nbt}get o(){return this.Nyt&&this.Nyt.$k.o}get fSt(){var t;return null==(t=this.Nyt)?void 0:t.fSt}get TSt(){var t;return null==(t=this.Nyt)?void 0:t.vSt}get dyt(){return this.Nyt?this.Nyt.dyt.map((t=>t.href)):[this.kSt]}get kSt(){return this.ESt.href}get _yt(){return this.Nyt&&this.Nyt.$k._yt}get vyt(){return this.Nyt&&this.Nyt.$k.vyt}get gyt(){return this.Nyt&&this.Nyt.$k.gyt}get myt(){return this.Nyt&&this.Nyt.$k.myt}get pyt(){var t,e;const i=(null==(e=this.Nyt)||null==(t=e.$k.pyt)?void 0:t.ewt())||0;return _.max(i,WH)}get jI(){return this.xSt}ISt(t){const e=this.jI;this.xSt=t,e!==this.jI&&this._o(new yH)}get Ipt(){return this.dSt}get RSt(){return this.zw===Rs.qW?this.qyt:this.CSt}get PSt(){const t=this.RSt;if(void 0!==t)for(const e of this.Ipt)if(e.Sn<=t&&e.Tn>t)return e}get Rwt(){return this.Nyt&&this.Nyt.$k.Rwt}get wyt(){return this.Nyt&&this.Nyt.wyt}get XAt(){for(let t=this.dSt.length-1;t>=0;t-=1){const e=this.dSt[t].XAt;if(e)return e}}get qyt(){const t=this.XAt;if(void 0===t)return;const e=t-this.DSt;return _.max(e,this.CSt)}get CSt(){for(const t of this.dSt){const e=t.Ryt;if(void 0!==e)return e}}get DE(){return Boolean(this.NSt.DE)}get DSt(){var t,e;if(this.NSt.MSt&&this.zw===Rs.qW)return this.NSt.MSt;const i=null==(e=this.Nyt)||null==(t=e.$k.yyt)?void 0:t.twt();return void 0!==i?i:this.zw===Rs.qW?1.5*this.myt.twt():0}get wwt(){return this.Nyt&&this.Nyt.wwt}get zw(){return this.Nyt?this.Nyt.zw:void 0}get Ayt(){var t;return null==(t=this.Nyt)?void 0:t.Ayt}async ir(t,e,i){const s=[],n=[],r=t.fyt?As.Bh(t.fyt,this.ESt):this.ESt;void 0===this.Nyt?(await this.LSt.nQ(t.byt),this.Nyt=new EH(t,this.ESt,r,this.$lt(),this.uSt),this.Nyt.bn(Cs.Xht,this.Ds)):this.Nyt.ir(t,r,this.$lt(),e);const o=this.Nyt.Ipt;let h;if(0===o.length)h=this.dSt.slice(),En(this.dSt);else{const t=o[0].o;let e=0;for(;e<this.dSt.length&&this.dSt[e].o!==t;)e++;h=this.dSt.splice(0,e);for(let t=0;t<o.length;t++){const e=o[t];let r;t<this.dSt.length?r=this.dSt[t]:(r=new mH(this,e),s.push(r)),n.push(r.ir(this.BSt,i))}}await Promise.all(n),this.dSt.push(...s);for(const t of h)t.YAt();this._o(new pH)}$lt(){return this.LSt.$lt()}HAt(t){const e=this.dSt.indexOf(t);if(e>0)return this.dSt[e-1]}ZAt(t){const e=this.dSt.indexOf(t);if(e>=0&&e+1<this.dSt.length)return this.dSt[e+1]}Cyt(){return this.Nyt?this.Nyt.Cyt():void 0}Hyt(){return this.Nyt&&this.Nyt.Hyt()}BAt(t){this.Nyt&&this.Nyt.BAt(t)}yn(){this.Ro(),this.OSt=void 0,this.ISt(!1);for(const t of this.dSt)t.yn();En(this.dSt),this.Nyt&&this.Nyt.Km()}constructor(t,e,i,s,n){super(),this.Nyt=void 0,this.xSt=!0,this.dSt=[],this.OSt=void 0,this.NSt=t,this.ESt=t.zC,this.BSt=e,this.WW=i,this.FSt=s,this.LSt=new OH(this.WW,this.FSt,this.NSt.VSt),this.uSt=n}},VH=class{get tdt(){return this.GAt}constructor(t,e,i,s,n){this.GAt=new FH(t,e,i,s,n)}},WH=1e3,UH=class{get Nr(){return this.Nyt}get W(){return this.WSt||(this.WSt=this.ix(this.USt.ep),uh(this.WSt)),this.WSt}async ix(t){this.Nyt.tdt._o(new ts);try{await this.GSt(t),this.Nyt.tdt.ISt(!0)}catch(t){throw ih(t),this.WSt=void 0,this.Nyt.tdt.ISt(!1),new m("The provided MPEG-DASH document could not be loaded - "+t.message)}this.ZSt=this.HSt(this.USt.ep)}async HSt(t){try{for(;this.Nyt.tdt.zw===Rs.qW;)await Lu(this.XSt,t)}catch(t){}}get XSt(){return this.Nyt.tdt.TSt&&this.Nyt.tdt.zw===Rs.qW?this.zSt(this.USt.ep):this.W}async qSt(t){Io(t);const e=this.YSt();if(e>0){const i=_.min(e,2147483647);await Ze(i,t)}try{await this.GSt(t),this.Nyt.tdt.ISt(!0)}catch(t){throw new m("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.KSt=void 0}}YSt(){const t=this.Nyt.tdt.$lt().getTime()-this.Nyt.tdt.fSt.getTime();return this.Nyt.tdt.pyt-t}jSt(t){const e=this.Nyt.tdt.Hyt();if(e){const i=e.getTime()-t.getTime();if(i>0)return i}this.Nyt.tdt.BAt(t);const i=this.Nyt.tdt.Hyt();return i?i.getTime()-t.getTime():NaN}async zSt(t){const e={stack:[],error:void 0,hasError:!1};try{null!=this.KSt||(this.KSt=this.qSt(t));const i=Gi(e,Fi.hp([t]),!1),s=[this.KSt,this.QSt(i.ep)].filter(ol);await Promise.race(s).catch(vf)}catch(t){e.error=t,e.hasError=!0}finally{ce(e)}}QSt(t){const e=this.Nyt.tdt.$lt(),i=this.jSt(e);if(!S(i)&&!this.Nr.tdt.nbt)return this.JSt(i,t)}async JSt(t,e){await Ze(t,e);const i=this.Nyt.tdt.$lt();this.Nyt.tdt.BAt(i)}async $St(t,e){const i=await this.eTt.tTt(t,{},e);return(new pZ).Syt(i.iTt,i.rE)}yn(){return this.USt.np(),this.ZSt=void 0,this.WSt=void 0,this.KSt=void 0,this.Nyt.tdt.yn(),Promise.resolve()}constructor(t,e,i,s,n){this.USt=new Fi,this.GSt=async t=>{try{const e=this.Nyt.tdt.$lt(),i=await this.$St(this.Nyt.tdt.dyt,t);await this.Nyt.tdt.ir(i,e,t)}catch(t){throw Li(t)&&this.Nyt.tdt.ISt(!1),t}},this.eTt=s,this.Nyt=new VH(t,e,i,this.USt.ep,n)}};r(),r();var GH=class extends me{constructor(t,e){super("Opt"),this.jpt=t,this.Ldt=e}},ZH=class extends So{get Ldt(){return this.Bdt}get zw(){return this.Zp}get Z(){return this.pC.slice()}MW(t){t&&this.Bdt!==t&&this.sTt(t)}LW(t){this.Bdt===t&&this.sTt(void 0)}sTt(t){this.Bdt=t,this._o(new GH(this,this.Bdt))}yn(){this.Ro();for(const t of this.pC)t.Adt=void 0;En(this.pC)}constructor(t,e){super(),this.Bdt=void 0,this.Zp=t,this.pC=e;for(const t of this.pC)t.Adt=this}};r(),r(),r();var Su=class extends me{constructor(t,e,i){super(ns.My),this.currentTime=t,this.initDataType=e,this.initData=i}};function jc(t,e,i,s,n){let r=[],o=[];for(const t of e)t.zw===Fo.wE?r=r.concat(t.Z):t.zw===Fo.yE&&(o=o.concat(t.Z));return[HH(t,r,i,s,null==n?void 0:n.preferredAudioCodecs),XH(t,o,i,s,null==n?void 0:n.preferredVideoCodecs)].filter(ol)}function HH(t,e,i,s,n){const r=Do(s||[],(t=>t.uat===Fo.wE&&t.Rt)),o=[qH(r,i,t),YH(r),KH(r),jH(r,n),QH(),t=>{const e=t.filter((t=>"main"===t.Lt));return e.length>0?e:t}];return zH(e,o)}function XH(t,e,i,s,n){const r=Do(s||[],(t=>t.uat===Fo.yE&&t.Rt)),o=[qH(r,i,t),jH(r,n),QH(),t=>{const e=t.filter((t=>"main"===t.Lt));return e.length>0?e:t}];return zH(e,o)}function zH(t,e){if(0===t.length)return;let i=t;for(const t of e){if(1===i.length)return i[0];i=t(i)}return i[0]}function qH(t,e,i){return s=>{const n=t?t.nct.o:void 0;if(!ol(n))return s;const r=null==e?void 0:e.oyt,o=i.oyt,h=r&&o&&r.Fx===o.Fx,a=Do(s,(t=>t.nct.o===n));return h&&a?[a]:s}}function YH(t){return e=>{const i=t?t.gs:"",s=e.some((t=>""!==t.gs))?e.filter((t=>""!==t.gs)):e;if(""===i)return s;const n=s.filter((t=>t.gs===i));return n.length>0?n:s}}function KH(t){return e=>{const i=t?t.Lt:"";if(""===i)return e;const s=e.filter((t=>t.Lt===i));return s.length>0?s:e}}function jH(t,e){return t=>{if(e&&e.length>0)for(const i of e){const e=t.filter((t=>t.VC.mC.some((t=>hM(t.Frt,i)))));if(e.length>0)return e}return t}}function QH(){return t=>{let e=[],i=-1/0;for(const s of t){const t=s.nct.vH;t>i?(i=t,e=[s]):t===i&&e.push(s)}return e}}r(),r();var JH=function(t){return t.nTt="api",t.rTt="start",t}({});r();var $H={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},tX=class{oTt(t,e,i){const s=this.Wlt.maxRetries===1/0?$H:this.Wlt;return K((()=>this.hTt(t,e,i)),i,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async hTt(t,e,i){let s;for(const n of t)try{const t=new Gr({Xu:n,tE:Te.Rk,iE:e,DE:this.aTt,EE:Ce.GET,zw:Bn.hE,CE:Cu.oE,ep:i,xE:15e3,RE:5e3}),s=await this.WW.eE(t),r=await s.Mk(i);return{iTt:r,uTt:n,rE:s.rE}}catch(t){s=t}throw s}constructor(t,e,i=$H){this.WW=t,this.aTt=e,this.Wlt=i}};function eX(t){return Ks(t)}function iX(t,e){const i=Ks(t);return e?""+i+e:""+i}r(),r();var sX=class{async tTt(t,e,i){let s;for(const n of this.cTt)try{return await n.tTt(t,e,i)}catch(t){ih(t),s=t}throw s}constructor(t){this.cTt=t}},nX=class{async tTt(t,e,i){const s=await this.Rut.lTt(t);if(s)return{iTt:s.data,uTt:s.locationURL,rE:s.responseURL};throw new m("Manifest fetch from cache unsuccesful")}constructor(t){this.Rut=t}},rX=class{async tTt(t,e,i){return await this.dTt.oTt(t,e,i)}constructor(t){this.dTt=t}};function oX(t,e){return new sX([new nX(e),new rX(t)])}var hX=class{async tTt(t,e,i){const s=await this.eTt.tTt(t,e,i);return await this.fTt(s),s}async fTt(t){await this.d_._Tt({key:eX(t.uTt),locationURL:Ks(t.uTt),responseURL:Ks(t.rE),data:t.iTt,references:[this.vTt.o]})}constructor(t,e,i){this.eTt=t,this.d_=e,this.vTt=i}};r();var nt=class extends me{constructor(){super(ns.Yy)}};r();var aX=class extends me{constructor(){super(ns.qy)}};r(),r();var pt=class extends Zx{gTt(t){return t.aR=Bu.LOADED,this.tt(t),t}mTt(t){for(const e of this.Z.mC)if(e.ZC===t)return e}constructor(){super()}};function uX(t,e){return""===e?t:t+" "+e}r(),r(),r();var cX=class extends He{get wa(){return this.eu||(this.eu=function(t){return Qr(ai(t),{get attributes(){return t.Kx},get eventID(){var e;return""+(null!=(e=t.pTt)?e:"")}})}(this)),this.eu}RF(t){return this.U===t.U}constructor(t,e,i,s,n){super(t,e,i,!1,null==n?void 0:n.toString()),this.Kx=s,this.pTt=n}},lX=class extends pt{wTt(t){const e=this.FW.ZR(Hi.xW,"","","",void 0,Hr.EVENT_STREAM);return e.ZC=t,this.gTt(e),e}yTt(t,e,i){const s=t.G9;var n;const r=null!=(n=t.Fx)?n:"";var o;const h=null!=(o=t.RN)?o:1;var a;const u=null!=(a=t.mwt)?a:po.ZERO,c=uX(s,r);let l=this.mTt(c);l||(l=this.wTt(c));for(const s of t.TY)if(!dX(s,l)){const t=fX(s,h,u,e);t.dF>i&&l.UW(t)}}async $n(t){await this.nr(),this.eSt=t,this.eSt.bn(ns.Xy,this.bTt),this.bTt()}async nr(){this.eSt&&(this.eSt.vn(ns.Xy,this.bTt),this.eSt=void 0);for(const t of this.Z.mC)this.FW.ZW(t);await super.nr()}constructor(t){super(),this.eSt=void 0,this.bTt=()=>{var t,e;const i=null!=(e=null==(t=this.eSt.Cyt())?void 0:t.Sn)?e:0;if(i>0)for(const t of this.Z.mC)go(t,i);for(const t of this.eSt.Ipt)if(t.Tn>i)for(const e of t.hyt)this.yTt(e,t,i)},this.FW=t}};function dX(t,e){const i=t.o;if(void 0!==i){if(Do(e.L.mC,(e=>e.pTt===i&&e.U===t.$k)))return!0}return!1}function fX(t,e,i,s){const n=t.o,r=t.VL.toSigned().subtract(i),o=t.ct,h=t.$k,a=t.Kx,u=r.toNumber()/e+s.Sn,c=o?o.toNumber()/e:void 0,l=void 0!==c?u+c:s.qAt;return new cX(u,l,h,a,n)}function _X(t,e,i,s,n){const r=[],o=Do(i,(t=>t.G9===Dg));if(void 0===o)return;const h=o.Fx?function(t){const e=t.split(":",1)[0];switch(e){case"cbcs":case"cenc":return e;default:return}}(o.Fx.toLowerCase()):"cenc";if(void 0!==h){for(const e of i)if(e.G9!==Dg)for(const i of sm(e.G9)){var a;const s=n&&e.Z9?[e.Z9]:[];var u;const o=null!=(u=null==(a=t.clearkey)?void 0:a.keys)?u:[];r.push({_T:i,sZ:s,nZ:void 0,lG:void 0,rZ:o})}if(r.length)return{DU:t,jmt:{ATt:h,NU:o.NU},Kmt:r,STt:e===Fo.wE?s.slice():[],TTt:e===Fo.yE?s.slice():[],z9:!1}}}function vX(t,e){if(!t)return e;if(!e)return t;const i=[],s=Vh();var n;return gX(i,s,t.Kmt),gX(i,s,e.Kmt),{DU:t.DU,jmt:{ATt:t.jmt.ATt,NU:null!=(n=t.jmt.NU)?n:e.jmt.NU},Kmt:i,STt:mX(t.STt,e.STt,fh),TTt:mX(t.TTt,e.TTt,fh),z9:t.z9||e.z9||!1}}function gX(t,e,i){for(const s of i){const i=s._T.jw;let n;e.has(i)?(n=e.get(i),n.sZ=mX(n.sZ,s.sZ,pX)):(n=ne({},s),t.push(n),e.set(i,n))}}function mX(t,e,i){const s=t.slice();for(const t of e)i(s,t)||s.push(t);return s}function pX(t,e){for(const i of t)if(gp(i,e))return!0;return!1}function wX(t,e,i){let s;const n=t.$G;if(n){const r=t.SY,o=[];for(const e of t.Frt)o.push(r+'; codecs="'+e+'"');s=_X(e||{},t.zw,n,o,i)}for(const n of t.Mat)s=vX(s,yX(n,e,i));return s}function yX(t,e,i){return _X(e||{},t.zw,t.$G||[],[t.Fk],i)}function bX(t){return t?t.Kmt.map((e=>{const i=AX(t.DU,e._T),s=t.jmt.ATt;return{_T:e._T,sZ:e.sZ,lG:e.lG,eH:[{initDataTypes:[e._T.Yw],audioCapabilities:SX(t.STt,s,null==i?void 0:i.audioRobustness),videoCapabilities:SX(t.TTt,s,null==i?void 0:i.videoRobustness),persistentState:null==i?void 0:i.persistentState,distinctiveIdentifier:null==i?void 0:i.distinctiveIdentifier}],rZ:e.rZ}})):[]}function AX(t,e){switch(e.zw){case O.Uw:return t.widevine;case O.Ww:return t.playready;case O.Hw:return t.fairplay;case O.Gw:case O.Zw:return t.clearkey}}function SX(t,e,i){if(0!==t.length)return t.map((t=>({contentType:t,encryptionScheme:e,robustness:i})))}function TX(t,e){const i=t=>{const i=e.indexOf(t._T.jw);return i>=0?i:e.length};return Le(t,((t,e)=>i(t)-i(e)))}r(),r();var kX=class extends pt{wTt(t){const e=this.FW.ZR(Hi.xW,t.o,"thumbnails","",!1,Hr.DEFAULT);return e.LE=Ui.Qn,this.gTt(e),e}async $n(t){await this.nr(),this.eSt=t,this.eSt.bn(ns.Xy,this.ir),this.ir()}kTt(t){this.ETt(t),this.xTt()}xTt(){const t=[];for(const e of this.Z.mC)this.ITt(e)||t.push(e);for(const e of t)this.it(e)}ETt(t){const e=[];for(const i of this.xdt)-1===t.indexOf(i)&&e.push(i);for(const t of e)_e(this.xdt,t)}async nr(){this.eSt&&(this.eSt.vn(ns.Xy,this.ir),this.eSt=void 0);for(const t of this.xdt)t.vn(Cs.Xht,this.RTt);this.xdt.length=0;for(const t of this.Z.mC)this.FW.ZW(t);await super.nr()}yn(){return this.RTt=void 0,super.yn()}CTt(){var t,e;const i=null!=(e=null==(t=this.eSt.Cyt())?void 0:t.Sn)?e:0;if(i>0)for(const t of this.Z.mC)go(t,i)}PTt(t){return this.Z.mC.some((e=>e.o===t.o))}DTt(t){return Do(this.Z.mC,(e=>e.o===t.o))}ITt(t){return this.xdt.some((e=>t.o===e.o))}constructor(t){super(),this.xdt=[],this.ir=()=>{const t=[];for(const e of this.eSt.Ipt)for(const i of e.ift)if(i.zw===Fo.bE&&i.Mat.length>0){const e=i.Mat[0];t.push(e),this.PTt(e)||this.wTt(e),-1===this.xdt.indexOf(e)&&(this.xdt.push(e),e.bn(Cs.Xht,this.RTt)),this.NTt(e)}this.kTt(t)},this.NTt=t=>{const e=this.DTt(t);e&&t&&e.LE!==Ui.Mh&&(this.CTt(),function(t,e){const i=t.Eot,s=t.Zyt();if(!s)return;const n=s.abt,r=s.ubt,o=t.ji,h=t.Ti,[a,u]=function(t){for(const e of t)if(Th(e.G9,xX)||Th(e.G9,IX)){const t=e.Fx.match(EX);if(t){const[,e,i]=t;return[Number(e),Number(i)]}}return[1,1]}(t.kwt);let c=n;for(;c&&c.Mut<=r.Mut;){const s=t.Vyt.ct||c.ct,n=RX(e,c,t.nlt(c).Xu,o,h,a,u,s);for(const t of n)e.UW(t);c=i.elt(c)}}(t,e))},this.FW=t;const e=this;this.RTt=function(){e.NTt(this)}}},EX=/^(\d+)x(\d+)$/,xX="http://dashif.org/guidelines/thumbnail_tile",IX="http://dashif.org/thumbnail_tile";function RX(t,e,i,s,n,r,o,h){const a=[],u=e.lF,c=r*o,l=s/r,d=n/o,f=_.round(l),v=_.round(d),g=h/c;if(1===c){const e=u+g;return CX(t,u,e,i)?a:[new He(u,e,i,!1)]}for(let s=0;s<o;s++)for(let n=0;n<r;n++){const o=u+(s*r+n)*g,h=o+g,c=i+"#xywh="+_.round(n*l)+","+_.round(s*d)+","+f+","+v;if(CX(t,o,h,c)||a.push(new He(o,h,c,!1)),h>=e.dF)return a}return a}function CX(t,e,i,s){return t.L.mC.some((t=>t.lF===e&&t.dF===i&&t.U===s))}r(),r(),r(),r();var PX=class extends He{get FL(){return this.MTt}get Fx(){return this.LTt}get BTt(){return this.OTt}get wa(){return this.eu||(this.eu=function(t){return Qr(ai(t),{get schemeIDURI(){return t.FL},get value(){return t.Fx},get emsgID(){return t.BTt}})}(this)),this.eu}RF(t){return ho(this.U,t.U)}constructor(t,e,i,s,n,r){super(t,e,r,!1),this.MTt=i,this.LTt=s,this.OTt=n}},DX=class t extends pt{adt(e,i,s){const n=Es.cN(sa(e));if(!n)return;const r=function(t,e){const i=[];for(const s of t)eT(s,e)&&i.push(s);return i}(n,Ai.ED);if(r.length){const e=t.FTt(n,i,s);this.VTt(r,e,s)}}VTt(t,e,i){for(const s of t){let t;t=1===s.aN?s.VL.toNumber()/s.RN+i:e+s.GL/s.RN;const n=t+s.WL/s.RN;"https://aomedia.org/emsg/ID3"===s.FL||"https://developer.apple.com/streaming/emsg-id3"===s.FL?this.WTt(s,t):this.UTt(s,t,n)}}UTt(t,e,i){const s=uX(t.FL,t.Fx);let n=this.mTt(s);n||(n=this.GTt(s),this.gTt(n)),n.UW(new PX(e,i,t.FL,t.Fx,t.o,t.UL))}WTt(t,e){const i=VL(sa(t.UL));if(!i)return;const s=uX(t.FL,t.Fx);let n=this.mTt(s);n||(n=this.ZTt(s),this.gTt(n));for(const t of i.d6){const i=new jL(e,t);dL(i,n.L.mC),n.UW(i)}}static FTt(t,e,i){const s=Rn(t,Ai.xD);return s?fo(s.tB,s.RN)+i:e}GTt(t){const e=this.FW.ZR(Hi.xW,"","","",void 0,Hr.EMSG);return e.ZC=t,e.LE=Ui.GC,e}ZTt(t){const e=this.FW.ZR(Hi.xW,"","","",void 0,Hr.ID3);return e.ZC=t,e.LE=Ui.GC,e}async nr(){for(const t of this.Z.mC)this.FW.ZW(t);await super.nr()}constructor(t){super(),this.FW=t}},NX=class extends DX{async $n(t){await this.nr(),this.eSt=t,this.eSt.bn(ns.Xy,this.bTt),this.bTt()}async nr(){this.eSt&&(this.eSt.vn(ns.Xy,this.bTt),this.eSt=void 0),await super.nr()}constructor(...t){super(...t),this.bTt=()=>{var t,e;const i=null!=(e=null==(t=this.eSt.Cyt())?void 0:t.Sn)?e:0;this.PW(i)}}};r(),r();var MX=class{clt(t,e){return this.HTt?this.Rut.clt(t,e):Promise.resolve(!1)}Iut(t,e){return this.HTt?this.Rut.Iut(t,e):Promise.resolve(void 0)}async lTt(t){const e=await this.Rut.lTt(t);return this.HTt=void 0!==e,e}hJ(t){return this.Rut.hJ(t)}constructor(t){this.HTt=!1,this.Rut=t}};r();var st=class extends BT{pO(){var t;return null!=(t=this.gO)?t:0}JC(){this.na.RI=1/0}wO(t,e,i){return!1}yO(){return!0}constructor(t,e,i){super(t,e,i)}},LX=[ns.jy,ns.Jy,ns.sb,ns.zy,ns.ob],BX=[ns.Qy,ns.vb,ns.Fy,ns.By],OX=class t extends So{XTt(t){return!!this.kZ&&this.kZ.ZJ(t)}async Vp(t){this.kZ=await this.aO.$n(t),this.zTt(),this.qTt(),this.kZ.q4(this.ct)}YTt(t){return this.kZ.XJ(t)}KTt(t){return this.kZ.qJ(t)}async jTt(){this.QTt=this.JTt,this.kZ&&(await this.aO.nr(),this.kZ=void 0)}Y3(){this.kZ.Y3()}V3(){const t=this.ct;this.kZ.ct<t&&this.kZ.q4(t),this.kZ.V3()}async $Tt(t){const e=this.kZ,i=[];e.d4&&i.push(gM(e.d4,t)),e.f4&&i.push(gM(e.f4,t)),await Promise.all(i)}tkt(t,e,i,s,n,r){const o=this.aO,h=this.kZ;return new LG(o,h,t,e,i,s,n,r,this.ekt,o,this.Zmt,this.Wlt,this.npt,this.MZ)}ikt(t,e,i){return t.XJ(e,i,this.kZ)}async skt(t,e,i,s){const n=this.tkt(this.WW,this.XH,this.Rut,this.Sc,t,s);return n.bn(Cs.qht,this.nkt),n.bn(ns.zy,this.Ds),await n.nQ(e,i),n}rkt(t){void 0===t&&(t=!1),this.okt.np(),this.V8.np(),this.hkt.np(),this.hkt=new Fi,this.akt=Ts(this.ukt(this.ckt,this.W8,this.akt,t,this.hkt.ep),this.hkt).catch(this.Gpt)}async ukt(t,e,i,s,n){await Promise.all([t,e,i]),Io(n),await Lu(this.lkt.Xb,n);const r=this.dkt;await r.xat(),this.V3(),Io(n);const o=r.Cc,h=r.Upt,a=r.Wpt;let u=this.fkt(o,a,o,h,!1),c=this._kt(a,u);!s&&this.XTt(c)?await this.vkt(a,u,c):(u=this.fkt(o,a,o,h,!0),c=this._kt(a,u),await this.gkt(a,u,c,n)),Io(n),this.dR?this.Db(this.RI):this.mkt(),this.pkt()}async vkt(t,e,i){const s=this.dkt;await this.YTt(i),this.wkt=i,await this.ikt(s,t,e),await s.Rat(Iu.oht)}async gkt(t,e,i,s){const n=this.dkt;this.z8(),this.ykt();const r=this.bkt;await this.jTt(),await this.Vp(i),this.wkt=i,await this.ikt(n,t,e);try{const t=this.Akt(r,!1,!0,s);uh(t),await n.Rat(Iu.oht),await t}finally{this.Q8(),this.Skt()}}get ht(){return this.LO}get pZ(){const t=this.bkt,e=this.Tkt,i=e.kB(t);if(-1!==i)return{Sn:e.Sn(i),Tn:e.Tn(i)}}get Tkt(){var t,e,i;const s=null!=(i=null==(t=this.dkt)?void 0:t.SI)?i:ee.WB();var n;const r=null!=(n=null==(e=this.kkt)?void 0:e.SI)?n:ee.WB();return s.AB(r)}get SI(){return this.Tkt.ks()}get kI(){var t;const e=null==(t=this.Nyt)?void 0:t.tdt,i=null==e?void 0:e.lyt;if(!e||!i)return;const s=i.getTime(),n=1e3*this.RI;return new Date(n+s)}set kI(t){var e;const i=null==(e=this.Nyt)?void 0:e.tdt,s=null==i?void 0:i.lyt;if(!t||!i||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.Db(r-n)}get bt(){return this.Sc}get bkt(){return void 0!==this.l8?this.l8:void 0!==this.Ekt?this.Ekt:this.aO.RI}get RI(){return this.bkt}set RI(t){this.DI(t)}DI(t,e){this.Db(t,t===1/0)}get ct(){let t=NaN;return this.dkt&&this.dkt.xpt?t=this.dkt.Tn:this.Nyt&&void 0!==this.Nyt.tdt.zw&&(t=this.Nyt.tdt.gyt?this.Nyt.tdt.gyt.twt():1/0),t}get Tn(){return this.ct}get MI(){return this.dR?this.d8():!(!this.dkt||!this.dkt.xpt)&&this.aO.MI}d8(){return!!this.dR&&(!(!this.dkt||!this.dkt.xpt)&&this.bkt===this.dkt.Tn)}get lt(){return this.bZ}get OI(){return this.AZ}get VI(){}get UI(){}xkt(){var t;const e=this.Ikt;if(0===e.V)return!0;var i;const s=null!=(i=null==(t=this.pZ)?void 0:t.Tn)?i:this.bkt,n=e.Sn(0);return s>=n||rs(s,n,.001)}Rkt(){var t;if(!this.Nyt)return!1;if(this.Nyt.tdt.zw!==Rs.qW)return!1;const e=null==(t=this.dkt)?void 0:t.Cc;if(e&&e.Yht)return!0;const i=[];for(const t of this.Nyt.tdt.Ipt){const e=t.Ryt,s=t.qAt;void 0!==e&&void 0!==s&&i.push(e,s)}const s=new ee(i).bB();return function(t,e,i){if(!e.V||!i.V)return ee.WB();const s=e.Sn(0),n=e.Tn(e.V-1),r=t.jn(i).pB().jn(t).AB(e);return ee.VB(r.Sn(0),r.Tn(r.V-1)).SB(r).PB(((t,e)=>t<s&&e<=n&&e-t>U))}(this.Tkt,this.Ikt,s).V>0}get XI(){return ne({},this.JTt,{ZO:bu.Vm.VG(),HO:this.Ckt,XO:{amountOfBufferedAudioSegments:this.Pkt,amountOfBufferedVideoSegments:this.Dkt}})}get JTt(){return function(t,e){return{WO:t.WO+e.WO,UO:t.UO+e.UO,GO:t.GO+e.GO}}(this.QTt,this.aO.zI())}get qI(){return this.aO.qI}set qI(t){this.aO.qI=t}get JI(){return this._8?this.Nkt:this.dkt&&this.dkt.xpt?this.Mkt:this.Nkt}get tR(){return this.aO.tR}set tR(t){this.aO.tR=t}get sR(){let t=this.Uo;return this.dkt&&(t=t.AB(this.Lkt)),t.bB(.1).ks()}get Lkt(){return this.aO.sR}Bkt(t){this.Uo=this.Uo.AB(t)}get rR(){return this.TZ}set rR(t){this.TZ=t,this.Okt()}get aR(){let t=this.aO.aR;return this.Fkt&&(t=_.max(Wt.Xn,t)),t}get Ikt(){return this.Vkt(!1)}get Wkt(){return this.Vkt(!0)}get cR(){return this.Ikt.ks()}get dR(){return this.FH||this.Ukt}get Ukt(){return this.aO.dR}get f5(){return this.aO.f5}get EZ(){}get Gkt(){var t,e;return null!=(e=null==(t=this.Nyt)?void 0:t.tdt.zw)?e:Rs.zW}get nt(){return this.Hl}get rt(){return this.FO}get vR(){var t;return oN(this.aO)&&(this.aO.vR||(null==(t=this.Zkt())?void 0:t.Ti))||0}get pR(){var t;return oN(this.aO)&&(this.aO.pR||(null==(t=this.Zkt())?void 0:t.ji))||0}get yR(){return this.aO.yR}set yR(t){this.aO.yR=bi(t,0,1)}get SR(){return this.xZ}get ER(){return!1}set ER(t){}get IZ(){return this.RZ}Hkt(t){t.bn(LX,this.Ds),t.bn(ns.ub,this.Xkt),t.bn(ns.Ey,this.zkt),t.bn(bo.fa,this.qkt),t.bn(ns.Iy,this.Ykt),t.bn(ns.Jy,this.Kkt),t.bn("Opt",this.jkt),t.bn("_pt",this.jkt)}Qkt(t){t.vn(LX,this.Ds),t.vn(ns.ub,this.Xkt),t.vn(ns.Ey,this.zkt),t.vn(bo.fa,this.qkt),t.vn(ns.Iy,this.Ykt),t.vn(ns.Jy,this.Kkt),t.vn("Opt",this.jkt),t.vn("_pt",this.jkt)}Jkt(t){t.bn(ns.jy,this.Ds)}$kt(t){t.vn(ns.jy,this.Ds)}Zkt(){if(!this.dkt)return;const t=Do(this.dkt.Wpt,(t=>t.uat===Fo.yE));return t?t.BC:void 0}Vkt(t){var e;const i=null==(e=this.Nyt)?void 0:e.tdt;if(!i)return ee.WB();const s=i.CSt;let n=t?i.XAt:i.qyt;if(void 0===s||void 0===n)return ee.WB();if(!t){const t=this.Lkt;t.V>0&&t.Tn(t.V-1)>n&&(n=_.min(t.Tn(t.V-1),i.XAt))}const r=this.ct;return isFinite(r)&&r>n&&(n=r),ee.VB(s,n).gB()}async $n(t,e){let i,s;Io(e);const n=this.Nyt.tdt;try{i=n.PSt,s=n.RSt}catch(t){throw new m("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!i)throw new m("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new m("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.tEt(t.textTracks),this.z8();const r=this.Jdt(i),o=jc(i,r,void 0,void 0,this.bpt),h=this.fkt(i,o,i,o,!0);o.forEach((t=>t.Rt=!0));const a=this._kt(o,h);await this.Vp(a),this.wkt=a,Io(e);const u=await this.skt(i,r,o,h);Io(e),this.eEt(u),this.Q8(),Io(e),await u.Rat(),Io(e),!this.iEt&&s>0&&this.Db(s,!0,JH.rTt),this.FH||(this.mkt(),this.sEt())}mkt(){this.okt.np(),this.okt=new Fi,this.ckt=Ts(this.nEt(this.ckt,this.akt,this.okt.ep),this.okt).catch(this.Gpt)}rEt(){this.okt.np()}async nEt(t,e,i){for(await Promise.all([t,e]),Io(i);;){var s;const t=null==(s=this.dkt)?void 0:s.Cc;if(!t){0;break}if(!await this.oEt(t,i)){0;break}}}async oEt(t,e){var i;Io(e);const s=this.dkt;for(0;this.Nyt.tdt.zw===Rs.qW&&void 0===(null==(i=this.ZAt(t))?void 0:i.Ryt);)await Lu(this.hEt.XSt,e),await this.aEt();for(Io(e),await this.aEt(),Io(e);!s.Apt();)await s.Ay(nU.uft,e),await this.aEt();Io(e),await this.aEt(),Io(e);const n=this.ZAt(t);return n?(this.uEt(n)?await this.cEt(n,e):await this.lEt(n,e),!0):(this.Y3(),!1)}uEt(t){var e,i,s,n,r;const o=null!=(r=null==(e=this.Sc)?void 0:e.seamlessSwitchStrategy)?r:Gu.bO;if(o===Gu.AO)return!0;if(o===Gu.SO)return!1;const h=this.dkt,a=null==h?void 0:h.Cc,u=null==h?void 0:h.Wpt,c=jc(t,this.Jdt(t),a,u,this.bpt),l=this.fkt(t,c,a,u,!1);if(o===Gu.CLEAR_ONLY&&((null==(i=this.dkt)?void 0:i.Ymt)||l)||o===Gu.SAME_DRM_ONLY&&!((null==(s=this.dkt)?void 0:s.Ymt)&&l||!(null==(n=this.dkt)?void 0:n.Ymt)&&!l))return!1;const d=this._kt(c,l);return this.XTt(d)}dEt(){return!0}fEt(t){const e=this._Et();for(const i of e)i!==t&&(i.LE=Ui.Mh)}pkt(){if(void 0!==this.vEt){if(this.vEt.XC){const t=Do(this.ht.mC,(t=>t.Rt));void 0!==t&&this.vEt.gs===t.gs||(this.vEt.LE=Ui.Mh)}}else this.gEt()}gEt(){if(this._Et().length)return;const t=Do(this.ht.mC,(t=>t.Rt));if(void 0===t)return;const e=this.nt.mC.filter((t=>t.XC));for(const i of e)if(i.gs===t.gs)return i.LE=Ui.Qn,void(this.vEt=i)}_Et(){return this.nt.mC.filter((t=>t.LE===Ui.Qn&&(t.Lt===Hi.kW||t.Lt===Hi.TW)))}mEt(t){if(t&&this.vEt){const e=function(t,e){if(""===t.gs)return;return e.filter((e=>e.gs===t.gs))[0]}(this.vEt,t.nt.mC);e&&(e.LE=Ui.Qn)}}async cEt(t,e){var i,s;const n=this.dkt;let r=this.kkt;const o=this.wkt;try{Io(e);const i=n.Cc,s=n.Wpt,o=this.Jdt(t);UX(n.Kpt,o);const h=jc(t,o,i,s,this.bpt),a=this.fkt(t,h,i,s,!1);h.forEach((t=>t.Rt=!0));const u=this._kt(h,a);for(0,await n.xat(),this.V3(),Io(e),r&&r.Cc===t?(this.XTt(u)&&await this.YTt(u),this.wkt=u):(r&&await r.yn(!0),this.XTt(u)&&await this.YTt(u),this.wkt=u,r=await this.skt(t,o,h,a),this.kkt=r,this.Jkt(r),this.pEt.bC=r.nt,r.Cat(n)),await r.Rat(),Io(e);this.bkt<t.Sn;)await this.aO.Ay(ns._b,e);Io(e),this.eEt(r)}catch(t){throw Se(t)&&(r&&await r.xat(),o&&this.wkt!==o&&(this.XTt(o)&&await this.YTt(o),this.wkt=o)),t}(null==(s=this.Sc)||null==(i=s.dash)?void 0:i.forceSeekToSynchronize)&&await this.wEt(t,e)}async wEt(t,e){const i=Date.now()/1e3;if(void 0===this.yEt)this.yEt=i;else if(i-this.yEt>900){this.yEt=i,this.ykt();const s=_.max(this.bkt,t.Sn);try{await this.Akt(s,!1,!0,e)}finally{this.Skt()}}}async lEt(t,e){for(Io(e),await this.dkt.xat(),this.V3(),await this.$Tt(t.Sn),Io(e),this.Y3();!this.aO.MI&&this.bkt<t.Sn;)await this.aO.Ay([ns._b,ns.Ly],e);Io(e);const i=this.dkt.Cc,s=this.dkt.Wpt,n=this.Jdt(t);UX(this.dkt.Kpt,n);const r=jc(t,n,i,s,this.bpt),o=this.fkt(t,r,i,s,!0);r.forEach((t=>t.Rt=!0));const h=this._kt(r,o);this.dkt&&(this.bEt.vn(gs.da,this.AEt),await this.dkt.yn(),this.bEt.bn(gs.da,this.AEt),this.dkt=void 0),this.kkt&&(await this.kkt.yn(),this.kkt=void 0),this.ykt(),this.z8();const a=_.max(this.bkt,t.Sn);await this.jTt(),await this.Vp(h),this.wkt=h;const u=await this.skt(t,n,r,o);this.eEt(u);try{const t={stack:[],error:void 0,hasError:!1};try{const i=this.Akt(a,!1,!0,e);uh(i),await u.Rat();const s=Gi(t,Fi.hp([e]),!1);await Promise.race([i,u.Ay([nU.uft],s.ep)])}catch(e){t.error=e,t.hasError=!0}finally{ce(t)}}finally{this.Q8(),this.Skt()}}async aEt(){const t=this.kkt;t&&t.Cc.Yht&&(await t.yn(!0),this.kkt=void 0)}static SEt(t,e){const i=[],s=[];let n=!e.some((t=>t.tft.some((t=>"main"===t.Fx))));for(const t of e){if(-1!==i.indexOf(t))continue;const r=VX(t.fdt.concat(t.tft),n);n=!1;const o=t.Mat.map((t=>t.jht)),h=new JW(t,o,r),a=WX(t,e);for(const t of a)h.Idt(t),i.push(t);s.push(h)}return new ZH(t,s)}Jdt(e){const i=[],s=[];for(const t of e.mpt)xT(t.zw)&&(0===t.Mat.length?this._o(new sU("No supported representation found in the AdaptationSet with mimetype : "+t.zw)):t.zw===Fo.wE?i.push(...t.ift):s.push(...t.ift));const n=[];return i.length>0&&n.push(t.SEt(Fo.wE,i)),s.length>0&&n.push(t.SEt(Fo.yE,s)),n}_kt(t,e){var i,s,n,r,o,h,a,u;const c=t.map((t=>{var e;return Sr.blt(null!=(e=t.Edt)?e:t.Mat,DT(t.uat,this.bpt))})).map((t=>({Fk:t.Fk}))),l=null==(s=this.Sc)||null==(i=s.dash)?void 0:i.desiredTimescale;var d;const f=(null==(n=this.Sc)?void 0:n.seamlessSwitchStrategy)!==Gu.SO&&(null==(r=this.Sc)?void 0:r.seamlessSwitchStrategy)!==Gu.CLEAR_ONLY&&(null==(o=this.Sc)?void 0:o.seamlessSwitchStrategy)!==Gu.SAME_DRM_ONLY&&(null!=(d=null==(a=this.Sc)||null==(h=a.dash)?void 0:h.needsTimescaleShifting)?d:As.Ys.Cp),_=null==(u=this.Sc)?void 0:u.useManagedMediaSource;return{zw:De.qW,J4:c,CZ:bX(e),z9:null==e?void 0:e.z9,Cp:f,X3:l,u5:_}}static TEt(t,e){if(!t.length)return;let i;for(const s of t){const t=0===s.Pdt.length;i=vX(i,wX(s.nct,e,t))}return(null==e?void 0:e.preferredKeySystems)&&i&&(i.Kmt=TX(i.Kmt,e.preferredKeySystems)),i}fkt(e,i,s,n,r){var o,h;const a=this.Sc.contentProtection;let u=t.TEt(i,a);if(void 0!==u)return u;var c;const l=null!=(c=null==(o=this.Sc)?void 0:o.seamlessSwitchStrategy)?c:Gu.bO;if(l===Gu.SO||l===Gu.CLEAR_ONLY||l===Gu.SAME_DRM_ONLY)return;const d=null==(h=this.dkt)?void 0:h.Ymt;if(!r&&void 0!==d){const t=!d.z9;if(l===Gu.bO&&t&&!this.dEt())return;return d}const f=!r&&l===Gu.bO;return u=this.kEt(e,a,s,n,f),void 0!==u?(u.z9=!0,u):void 0}kEt(e,i,s,n,r){let o=e,h=!1;for(;;){if(o=h?this.HAt(o):this.ZAt(o),void 0===o){if(h)return;h=!0,o=e;continue}const a=jc(o,this.Jdt(o),s,n,this.bpt),u=t.TEt(a,i);if(r){const t=this._kt(a,u);if(!this.XTt(t))return}if(void 0!==u)return u}}tEt(t){for(const e of t)e.src&&this.VZ.OW(e);jx(this.VZ.Z)}PR(){var t;const e=this.JI;this.Nkt=!0,e||(this._8||(this.EEt(new vt),this.xEt()),(null==(t=this.mZ)?void 0:t.UB)&&this.mZ.NR(),this.IEt())}DR(){this.REt||(this.REt=new is),this.CEt();const t=this.REt.Xb;return uh(t),t}CEt(){if(this.Nkt=!1,this.k8=!0,this.PEt=!1,this.Okt(),this.MI){const t=this.Ikt;t.V>0&&this.Db(t.Sn(0))}this._8||this.x8().then(this.DEt,this.EEt),this.nkt(),this.IEt()}get Mkt(){return this.aO.JI}x8(){return this.aO.DR()}xEt(){this.aO.PR()}z8(){this._8||(this.Nkt=this.JI,this._8=!0,this.xEt())}Q8(){this._8&&(this._8=!1,this.Nkt||this.x8().then(this.DEt,this.EEt),this.nkt(),this.IEt())}IEt(){const t=this.oU,e=this.JI;t!==e&&(this.oU=e,e?this._o(new nl(this.RI)):this._o(new he(this.RI)))}Db(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=JH.nTt),this.iEt=!0,this.okt.np(),this.V8.np(),this.FH=!0,this.l8=t,this.PEt=this.PEt&&this.d8(),this.Bkt(this.Lkt),this.NEt(new Al(this.RI)),this.V8=new Fi,this.W8=Ts(this.U8(t,this.ckt,this.W8,this.akt,this.V8.ep,e,i),this.V8).catch(this.Gpt),this.W8}MEt(){this.V8.np()}async U8(t,e,i,s,n,r,o,h){var a;void 0===r&&(r=!1),void 0===o&&(o=JH.nTt),void 0===h&&(h=!1),null==(a=this.mZ)||a.NR();try{var u,c;0,await Promise.all([e,i,s]),Io(n),await Lu(this.lkt.Xb,n);const a=this.Ikt.mB(t);this.l8=a;const l=h||(null==(c=this.Sc)||null==(u=c.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&a<=this.RI,d=this.LEt(a),f=this.dkt;if(l||!f||!f.cR.wr(a)&&o!==JH.rTt&&f.Cc!==d){if(d){let t=this.kkt;if(this.z8(),f&&await f.xat(),t&&t.Cc===d&&!l){const e=this._kt(t.Upt,t.Ymt);this.V3(),this.XTt(e)&&await this.YTt(e),this.wkt=e}else{t&&await t.yn(!0);const e=this.Jdt(d);f&&UX(f.Kpt,e);const i=null==f?void 0:f.Cc,s=null==f?void 0:f.Wpt,n=jc(d,e,i,s,this.bpt);let r=this.fkt(d,n,i,s,!1);n.forEach((t=>t.Rt=!0));let o=this._kt(n,r);this.uEt(d)&&!l?(this.V3(),this.XTt(o)&&await this.YTt(o)):(r=this.fkt(d,n,i,s,!0),o=this._kt(n,r),f&&(this.bEt.vn(gs.da,this.AEt),await f.yn(),this.bEt.bn(gs.da,this.AEt),this.dkt=void 0),await this.jTt(),await this.Vp(o)),this.wkt=o,t=await this.skt(d,e,n,r),this.kkt=t,this.pEt.bC=t.nt,this.Jkt(t),t.Cat(this.dkt)}await t.Rat(Iu.aht),this.eEt(t)}}else{0;const t=this.kkt;if(t&&!t.Rpt){await t.xat(),this.V3();const e=this._kt(f.Upt,f.Ymt);this.XTt(e)&&await this.YTt(e),this.wkt=e}}0;const _=this.Akt(a,r,!1,n);uh(_),this.l8=void 0,await this.dkt.Rat(Iu.aht),Io(n),this.mkt(),await _,Io(n),this.Q8(),this.FH=!1,this.BEt(new Be(this.RI)),this.sEt()}catch(t){if(Se(t))return void 0;0}}sEt(){if(this.JI||this.dR||void 0===this.mO)return;const t=this.RI;var e,i;this.RI+this.mO-this.SR.kd.maximumOffset<t?null==(e=this.mZ)||e.Sn():null==(i=this.mZ)||i.NR()}async Akt(t,e,i,s){let n,r,o=!0,h=t;for(;;){const a={stack:[],error:void 0,hasError:!1};try{const u=this.Wkt;if(u.V>0){const e=u.mB(t);h!==e&&(u.wr(h)&&this.Nyt.tdt.zw===Rs.qW||(h=e,o=!0))}if(o)o=!1,null==r||r.np(),r=new Fi,r.rp(s),n=Ts(this.OEt(h,e,i,r.ep),r),uh(n);else if(!this.Ukt&&!this.f5)break;const c=Gi(a,Fi.hp([s]),!1);await Promise.race([n,this.Ay([ns.sb,ns.Dy],c.ep),this.Nyt.tdt.Ay(Cs.Xht,c.ep)])}catch(t){a.error=t,a.hasError=!0}finally{ce(a)}}}async OEt(t,e,i,s){for(this.aO.Db(t,e,i);this.Ukt||this.f5;)await this.aO.Ay([ns.eb,ns.Gy],s)}ykt(){void 0===this.Ekt&&(this.Ekt=this.bkt,this.aO.vn(ns.ib,this.NEt),this.aO.vn(ns.eb,this.BEt))}Skt(){if(void 0===this.Ekt)return;const t=this.bkt;this.Ekt=void 0,this.aO.bn(ns.ib,this.NEt),this.aO.bn(ns.eb,this.BEt),this.bkt!==t&&this.Tc()}FEt(t){this.Uo=this.Uo.AB(t)}LEt(t){const e=this.Nyt.tdt,i=e.Ipt.filter((t=>t.ct>=.2));if(0===i.length)return;const s=i[0];if(t<=s.Sn)return s;for(const e of i)if(e.Tn>t)return e;return e.zw!==Rs.qW?i[i.length-1]:void 0}HAt(t){let e=t.qpt;for(;e&&e.ct<.2;)e=e.qpt;return e}ZAt(t){let e=t.Ypt;for(;e&&e.ct<.2;)e=e.Ypt;return e}async Ca(t,e,i){const s={stack:[],error:void 0,hasError:!1};try{var n;if(this.MZ.tZ(t.contentProtection),this.VEt(),this.Sc&&!Gn(this.Sc)&&await this.nr(),!t||Gn(t))return;const o=Gi(s,Fi.hp([i]),!1);this.GW=Fi.hp([o.ep]),this.Sc=t,this.WEt=e,this.bpt=t.abr,this.npt=t.ignoreEmbeddedTextTrackTypes;const h=oX(new tX(this.WW,Boolean(this.Sc.useCredentials),this.Wlt),this.Rut);var r;if(this.ISt(!0),this.hEt=new UH({zC:As.Bh(this.Sc.src),MSt:null!=(r=null==(n=this.Sc.latencyConfiguration)?void 0:n.targetOffset)?r:this.Sc.liveOffset,VSt:this.Sc.timeServer,DE:this.Sc.useCredentials},this.UEt(this.bpt),this.WW,h,this.Sc.dash),this.Nyt=this.hEt.Nr,this.Nyt.tdt.bn(ns.Hy,this.GEt),this.Nyt.tdt.bn(ns.Xy,this.ZEt),this.Nyt.tdt.bn(wH.JAt,this.HEt),this.Nyt.tdt.bn(Cs.Xht,this.nkt),await this.XEt.$n(this.Nyt.tdt),await this.zEt.$n(this.Nyt.tdt),fh(this.npt,Hr.EMSG)||(this.Zmt=new NX(this.FW),this.Hl.aZ(this.Zmt.Z),await this.Zmt.$n(this.Nyt.tdt)),t.latencyConfiguration){const e=t.latencyConfiguration;this.mZ=new st(this,this.aO,e),this.mZ.Rt=!0,this.xZ.Aa(this.mZ)}this.Okt(),o.Km()}catch(t){s.error=t,s.hasError=!0}finally{ce(s)}}async qEt(){const t=this.Nyt.tdt.jI;var e,i;(this.ISt(t),t)?this.jkt():(await Promise.all([null==(e=this.dkt)?void 0:e.xat(Iu.Tht),null==(i=this.kkt)?void 0:i.xat(Iu.Tht)].filter(ol)),this.rEt(),this.MEt(),this.hkt.np())}get jI(){return this.xSt}ISt(t){this.xSt!==t&&(this.xSt=t,this._o(t?new nt:new aX))}Okt(){this.Nyt&&(this.YEt=this.KEt(this.YEt,this.GW.ep).catch(this.Gpt))}async KEt(t,e){t&&(await t,Io(e));try{this.rR===hi.bO||this.k8?await this.jEt(e):this.rR===hi.xW&&await this.QEt(e)}catch(t){throw ih(t),this.uH(new Z(Ci.MANIFEST_LOAD_ERROR,t.message,t)),t}}async jEt(t){await this.QEt(t),this.JEt||(this.JEt=!0,this.lkt.rp(this.$n(this.WEt,t)));try{await this.lkt.Xb}catch(t){ih(t),this.uH(new Z(Ci.MEDIA_DECODE_ERROR,t.message,t))}}async QEt(t){await Lu(this.hEt.W,t);const e=this.Nyt.tdt;if(void 0===this.mZ&&e.zw===Rs.qW){const t=e.Ayt,i=(null==t?void 0:t.rSt)?(null==t?void 0:t.rSt)/1e3:e.DSt,s={minimumOffset:(null==t?void 0:t.iSt)?(null==t?void 0:t.iSt)/1e3:.5*i,maximumOffset:(null==t?void 0:t.nSt)?(null==t?void 0:t.nSt)/1e3:1.5*i,targetOffset:i,forceSeekOffset:2.5*i,minimumPlaybackRate:T,maximumPlaybackRate:_t};this.mZ=new st(this,this.aO,s),this.xZ.Aa(this.mZ)}}eEt(e){const i=this.dkt;e!==i&&(this.dkt&&this.Qkt(this.dkt),this.kkt&&this.$kt(this.kkt),i&&this.Bkt(this.Lkt),this.dkt=e,this.kkt=i,this.Hkt(this.dkt),this.kkt&&this.Jkt(this.kkt),this.LO.bC=e.ht,this.FO.bC=e.rt,this.mEt(e),this.bEt.vn(gs.da,this.AEt),t.$Et(this.bEt),this.bEt.bn(gs.da,this.AEt),this.bEt.bC=e.nt,this.pEt.bC=void 0,this.gEt())}static $Et(t){for(const e of t.mC)e.LE=Ui.Mh}ge(){this.aO.ge()}be(){this.aO.be()}uH(t){this.bZ||(uh(this.nr()),this.bZ=Zs(t),this.AZ=t,this._o(new Pi(t)))}VEt(){this.bZ=void 0,this.AZ=void 0}zTt(){const t=this.kZ;t&&(t.f4&&(t.f4.$j=this.XH.uQ),t.d4&&(t.d4.$j=this.XH.uQ))}qTt(){const t=this.kZ;t&&(t.f4&&(t.f4.sQ=this.XH.sQ),t.d4&&(t.d4.sQ=this.XH.sQ))}determineStallJumpTarget(){if(this.dkt)return this.dkt.Apt()&&this.RI>this.dkt.Tn-pM&&!this.dkt.xpt?this.dkt.Tn:void 0}async nr(){if(this.txt)return this.txt;try{this.txt=this.ixt(),await this.txt}finally{this.txt=void 0}}async ixt(){this.tR=1,this.GW.np(),this.MEt(),this.rEt(),this.hkt.np(),this.lkt.np(),this.iEt=!1,this.PR(),this.k8=!1,this.PEt=!1,this.LO.bC=void 0,this.FO.bC=void 0,this.bEt.bC=void 0,this.pEt.bC=void 0,this.YEt&&(await this.YEt.catch(M),this.YEt=void 0),await Promise.all([this.ckt,this.W8,this.akt,this.lkt.Xb.catch(M)]),this.dkt&&(await this.dkt.yn(!0),this.dkt=void 0),this.kkt&&(this.$kt(this.kkt),await this.kkt.yn(!0),this.kkt=void 0),await this.jTt(),this.wkt=void 0,this.vEt=void 0,this.ZZ.nr(),await this.XEt.nr(),await this.zEt.nr(),void 0!==this.Zmt&&(this.Hl.lZ(this.Zmt.Z),await this.Zmt.yn(),this.Zmt=void 0),this.FW.nr(),this.Nyt&&(this.Nyt.tdt.vn(ns.Hy,this.GEt),this.Nyt.tdt.vn(ns.Xy,this.ZEt),this.Nyt.tdt.vn(wH.JAt,this.HEt),await this.hEt.yn(),this.Nyt=void 0),this.Fkt=!1,this.sxt=NaN,this.nxt=0,this.rxt=0,this.Ekt=void 0,this._8=!1,this.Uo=ee.WB(),this.oU=!0,this.l8=void 0,this.oxt=!1,this.FH=!1,this.JEt=!1,this.lkt=new is,this.Ckt=0,this.Pkt=0,this.Dkt=0,this.Sc=void 0,this.WEt=void 0,this.npt=[],this.yEt=void 0,this.xZ.nr(),this.mZ=void 0,this.QTt={WO:0,UO:0,GO:0},await this.VZ.nr(),this.aO.GZ(),this.hxt.nr()}async yn(){this.Ro(),this.VEt(),await this.nr(),this.Ro(),this.LO.yn(),this.FO.yn(),this.bEt.yn(),this.pEt.yn(),this.Hl.yn(),this.ZZ.yn(),this.axt.Km(),await this.XEt.yn(),await this.zEt.yn(),this.FW.yn(),this.hxt.yn(),this.aO.vn(ns.Dy,this.W7),this.aO.vn(Yn.My,this.t8),this.aO.vn(ns.Ly,this.uxt),this.aO.vn(ns.ib,this.NEt),this.aO.vn(ns.eb,this.BEt),this.aO.vn(ns.$y,this.Kkt),this.aO.vn(ns._b,this.Tc),this.aO.vn([ns.ho,ns.Ky],this.cxt),this.aO.vn(BX,this.Ds),await this.VZ.yn(),this.Hl.yn(),this.XH.vn("Jj",this.lxt),this.XH.vn("iQ",this.dxt),this.aO.vn(bo.fa,this.fxt),this.aO.vn([ns.Ry,ns.Iy],this.Ds),this.aO.vn(ns.pb,this.Qpt),this.aO.vn(ns.LICENSE_REQUEST_GENERATED,this.Npt),this.aO.zZ=void 0,this.MZ.vn("contentProtectionsTracked",this._xt),this.aO.ntt=void 0}xR(){return this.aO.Sa}ja(){return this.aO.WZ}get ZI(){return!1}MR(){return!1}LR(){}OR(){}FR(){}WR(){this.rkt(!0)}get mO(){var t;const e=null==(t=this.Nyt)?void 0:t.tdt;if(e&&e.zw===Rs.qW&&e.lyt)return e.$lt().getTime()/1e3-e.lyt.getTime()/1e3-this.RI}ZR(t){const e=this.aO.UZ(t);return this.hxt.tt(e),e}constructor(t,e,i,s,n,r,o){var h;super(),this.dkt=void 0,this.kkt=void 0,this.k8=!1,this.sxt=NaN,this.bZ=void 0,this.AZ=void 0,this._8=!1,this.Ekt=void 0,this.l8=void 0,this.oxt=!1,this.nxt=0,this.rxt=0,this.Fkt=!1,this.GW=new Fi,this.lkt=new is,this.JEt=!1,this.Nyt=void 0,this.hEt=void 0,this.xSt=!0,this.Nkt=!0,this.REt=void 0,this.Uo=ee.WB(),this.TZ=hi.xH,this.YEt=void 0,this.oU=!0,this.Sc=void 0,this.WEt=void 0,this.bpt=void 0,this.npt=[],this.FH=!1,this.okt=new Fi,this.ckt=Promise.resolve(),this.V8=new Fi,this.W8=Promise.resolve(),this.iEt=!1,this.PEt=!1,this.hkt=new Fi,this.akt=Promise.resolve(),this.wkt=void 0,this.Zmt=void 0,this.Ckt=0,this.Pkt=0,this.Dkt=0,this.RZ=new Qo,this.yEt=void 0,this.QTt={WO:0,UO:0,GO:0},this.kZ=void 0,this.mZ=void 0,this.jkt=t=>{var e,i,s;let n;"Opt"===(null==t?void 0:t.type)&&(n=t.Ldt),n&&(null==(e=n.Adt)?void 0:e.zw)===Fo.wE&&(null==(s=this.bt)||null==(i=s.dash)?void 0:i.forceRecreateMediaSourceOnAudioSwitch)?this.rkt(!0):this.rkt()},this.Qpt=t=>{var e;null==(e=this.dkt)||e.Qpt(t)},this.Npt=t=>{var e;null==(e=this.dkt)||e.Npt(t)},this.Tc=()=>{this._o(new rl(this.RI,this.kI))},this.t8=t=>{this._o(new Su(this.RI,t.Yw,t.Sb))},this.Xkt=t=>{this.Ckt+=t.HO,this._o(t)},this.zkt=t=>{const e=t.segments.filter((t=>t.Mct));t.track===Fo.wE?this.Pkt=e.length:t.track===Fo.yE&&(this.Dkt=e.length)},this.W7=()=>{const t=this.ct;S(t)||t===this.sxt||(this.sxt=t,this._o(new yn(this.sxt)))},this.cxt=()=>{this.nkt(),this.IEt()},this.uxt=t=>{this.PEt||!this.MI||this.dR||(this.PEt=!0,this._o(null!=t?t:new ss(this.RI)))},this.ZEt=t=>{this.Ds(t),this.Fkt||(this.Fkt=!0,this.axt.vxt())},this.GEt=()=>{this.Nyt.tdt.vn(ns.Hy,this.GEt),this._o(new ts)},this.Ykt=t=>{var e;if(t.errorObject.code===Ci.CONTENT_PROTECTION_OUTPUT_RESTRICTED&&(null==(e=this.dkt)?void 0:e.Upt.every((t=>!t.Ddt))))return;this.uH(t.errorObject),this._o(t)},this.qkt=t=>{this.uH(t.errorObject)},this.Gpt=t=>{Se(t)||this.uH(new Z(Ci.MEDIA_DECODE_ERROR,t.message,t))},this.nkt=()=>{if(!this.JI)if(this.xkt())if(this.Rkt()){const t=this.Nyt.tdt.RSt;this.Db(t,!0)}else;else{const t=this.Nyt.tdt.RSt;this.Db(t,!0)}},this.NEt=t=>{this.oxt=this.dR,this._o(t)},this.BEt=t=>{const e=this.oxt,i=this.dR;this.oxt=i,e&&!i&&this._o(t),this.uxt()},this.Kkt=()=>{const t=this.pR,e=this.vR;this.nxt===t&&this.rxt===e||(this.nxt=t,this.rxt=e,this._o(new W))},this.AEt=t=>{const e=t.Ht;e.LE===Ui.Qn?(this.fEt(e),this.vEt=e):e===this.vEt&&e.LE===Ui.Mh&&(this.vEt=void 0,this.gEt())},this.DEt=()=>{this._8||this.REt&&(this.REt.Zb(),this.REt=void 0)},this.EEt=t=>{this._8||this.REt&&(this.REt.Hb(t),this.REt=void 0)},this.HEt=()=>{this.qEt().catch(this.Gpt)},this.fxt=t=>{this.uH(xk(t.lt))},this.lxt=()=>{this.zTt()},this.dxt=()=>{this.qTt()},this._xt=t=>{this.KTt(t.$G)},this.WW=t,this.Rut=new MX(n),this.aO=r,this.ekt=o,this.XH=i,this.XH.bn("Jj",this.lxt),this.XH.bn("iQ",this.dxt),this.xZ=s,this.Wlt=ne({},e.retryConfiguration,{maxRetries:null!=(h=e.retryConfiguration.maxRetries)?h:1/0}),this.LO=new pS,this.FO=new pS,this.MZ=new Jh(t),this.MZ.bn("contentProtectionsTracked",this._xt),this.aO.bn(ns.Dy,this.W7),this.aO.bn(Yn.My,this.t8),this.aO.bn(ns.Ly,this.uxt),this.aO.bn(ns.ib,this.NEt),this.aO.bn(ns.eb,this.BEt),this.aO.bn(ns.$y,this.Kkt),this.aO.bn(ns._b,this.Tc),this.aO.bn([ns.ho,ns.Ky],this.cxt),this.aO.bn(BX,this.Ds),this.aO.bn(bo.fa,this.fxt),this.aO.zZ=this.MZ,this.aO.ntt=this,this.aO.bn([ns.Ry,ns.Iy],this.Ds),this.aO.bn(ns.pb,this.Qpt),this.aO.bn(ns.LICENSE_REQUEST_GENERATED,this.Npt),this.axt=new FX(this,this.aO),this.ZZ=new I(this.axt,!0),this.ZZ.bn(Zc.aB,this.nkt),this.ZZ.bn(co,this.Ds),this.bEt=new yt,this.bEt.bn(gs.da,this.AEt),this.pEt=new yt,this.FW=this.gxt(),this.XEt=new lX(this.FW),this.zEt=new kX(this.FW),this.VZ=new Xx(this.aO,this.WW),this.hxt=new ca,this.Hl=new uu([this.bEt,this.XEt.Z,this.zEt.Z,this.VZ.Z,this.hxt])}},FX=class extends Jx{get aR(){return this.na.aR}vxt(){this._o(new oa(this.RI,this.aR))}constructor(t,e){super(e),this.na=t}};function VX(t,e){const i=t.filter((t=>"urn:mpeg:dash:role:2011"===t.G9)).map((t=>t.Fx)).filter(ol);return e||fh(i,"main")?fh(i,"caption")?"captions":fh(i,"subtitle")?"subtitles":fh(i,"dub")?"translation":"main":fh(i,"sign")?"sign":fh(i,"description")?"descriptions":fh(i,"commentary")?"commentary":"alternative"}function WX(t,e){var i;const s=Do([...t.kwt,...t.Ewt],(t=>"urn:mpeg:dash:adaptation-set-switching:2016"===t.G9));var n;const r=null!=(n=null==s||null==(i=s.Fx)?void 0:i.split(","))?n:[],o=[];for(const t of r){const i=Number(t),s=Do(e,(t=>t.o===i));s&&o.push(s)}return o}function UX(t,e){for(const i of t){const t=Do(e,(t=>t.zw===i.zw));if(!t)continue;const s=i.Z,n=t.Z;for(const t of s){const e=t.WC;if(!e)continue;const i=t.Mat.map((t=>t.o)),s=Do(n,(t=>{const e=t.Mat.map((t=>t.o));return of(i,e)}));if(!s)continue;const r=e.map((t=>t.o));s.WC=s.VC.mC.filter((t=>fh(r,t.o)))}}}r();var bt=class{async lTt(t){return(await this.pxt.mxt(t.map(eX))).shift()}clt(t,e){const i=iX(t,e);return this.wxt.Fb(i)}async Iut(t,e){var i;const s=iX(t,e);return null==(i=await this.yxt.Vb(s))?void 0:i.data}hJ(t){return this.bxt.Vb(t)}constructor(t,e,i,s){this.pxt=t,this.wxt=e,this.yxt=i,this.bxt=s}};r(),r(),r();var wt=class{Axt(t){return Promise.resolve(!1)}_Tt(t){return Promise.reject(GX)}Sxt(t){return Promise.reject(GX)}Fb(t){return Promise.resolve(!1)}Vb(t){return Promise.resolve(void 0)}Txt(t,e){return Promise.resolve(void 0)}mxt(t){return Promise.resolve([])}kxt(){return Promise.resolve([])}Ext(t){return Promise.resolve([])}xxt(t,e){return Promise.resolve([])}rT(t){return Promise.reject(GX)}Ixt(t){return Promise.reject(GX)}Rxt(){return Promise.reject(GX)}},GX="Storage disabled",ZX="Storage disabled";r(),r(),r();var HX=class{get Cxt(){return this.sp.Xb}async Axt(t){return(this.Pxt||await this.Cxt).Axt(t)}async _Tt(t,e){return(this.Pxt||await this.Cxt)._Tt(t,e)}async Sxt(t,e){return(this.Pxt||await this.Cxt).Sxt(t,e)}async Fb(t){return(this.Pxt||await this.Cxt).Fb(t)}async Vb(t){return(this.Pxt||await this.Cxt).Vb(t)}async Txt(t,e){return(this.Pxt||await this.Cxt).Txt(t,e)}async mxt(t){return(this.Pxt||await this.Cxt).mxt(t)}async kxt(){return(this.Pxt||await this.Cxt).kxt()}async Ext(t){return(this.Pxt||await this.Cxt).Ext(t)}async xxt(t,e){return(this.Pxt||await this.Cxt).xxt(t,e)}async rT(t){return(this.Pxt||await this.Cxt).rT(t)}async Ixt(t){return(this.Pxt||await this.Cxt).Ixt(t)}async Rxt(){return(this.Pxt||await this.Cxt).Rxt()}constructor(t){this.sp=new is,this.Pxt=void 0,this.sp.rp(t),this.sp.Xb.then((t=>{this.Pxt=t}))}},XX=class{get Dxt(){return this.sp.Xb}async Nxt(t){const e=this.Mxt||await this.Dxt;return await e.Nxt(t)}constructor(t){this.sp=new is,this.Mxt=void 0,this.sp.rp(t);const e=this.sp.Xb;e.then((t=>{this.Mxt=t})),this.xct=new HX(e.then((t=>t.xct))),this.Lxt=new HX(e.then((t=>t.Lxt))),this.Bxt=new HX(e.then((t=>t.Bxt))),this.Oxt=new HX(e.then((t=>t.Oxt))),this.Fxt=new HX(e.then((t=>t.Fxt)))}};function zX(t){return new m("This storage cannot handle persistency type "+t)}r(),r(),r();var ju=function(t){return t.Vxt="readonly",t.Wxt="readwrite",t}({}),qX=class{Axt(t){return Promise.resolve("temporary"===t)}_Tt(t,e){return void 0===e&&(e="temporary"),"temporary"!==e?Promise.reject(zX(e)):(this.Uxt(t.key),this.AA.push(t),Promise.resolve())}Sxt(t,e){if(void 0===e&&(e="temporary"),"temporary"!==e)return Promise.reject(zX(e));for(const e of t)this.Uxt(e.key);for(const e of t)this.AA.push(e);return Promise.resolve()}Fb(t){return Promise.resolve(Boolean(this.Gxt(t)))}Vb(t){return Promise.resolve(this.Gxt(t))}Txt(t,e){return Promise.resolve(this.Zxt(t,e))}mxt(t){const e=t?t.map((t=>this.Gxt(t))):this.AA;return Promise.resolve(e.filter(ol))}kxt(){return Promise.resolve([...this.AA])}Ext(t){return this.xxt(t,"key")}xxt(t,e){const i=this.AA.filter((i=>i[e]===t));return Promise.resolve(i)}rT(t){return this.Uxt(t),Promise.resolve()}Ixt(t){for(const e of t)this.Uxt(e);return Promise.resolve()}Rxt(){return En(this.AA),Promise.resolve()}Gxt(t){return this.Zxt(t,"key")}Zxt(t,e){for(const i of this.AA)if(i[e]===t)return i}Uxt(t){const e=this.Gxt(t);e&&_e(this.AA,e)}constructor(){this.AA=[]}},YX=class t{static ist(){return Promise.resolve(new t)}Nxt(t){return t(this)}constructor(){this.Lxt=new qX,this.xct=new qX,this.Bxt=new qX,this.Oxt=new qX,this.Fxt=new qX}};r(),r();var gt=class{async Axt(t){for(const e of this.Hxt)if(await e.Axt(t))return!0;return!1}async _Tt(t,e){void 0===e&&(e="persistent");for(const i of this.Hxt)if(await i.Axt(e))return i._Tt(t);throw zX(e)}async Sxt(t,e){void 0===e&&(e="persistent");for(const i of this.Hxt)if(await i.Axt(e))return i.Sxt(t);throw zX(e)}async Fb(t){for(const e of this.Hxt)if(await e.Fb(t))return!0;return!1}async Vb(t){for(const e of this.Hxt){const i=await e.Vb(t);if(i)return i}}async Txt(t,e){for(const i of this.Hxt){const s=await i.Txt(t,e);if(s)return s}}async mxt(t){const e=[];for(const i of this.Hxt)e.push(...await i.mxt(t));return e}async kxt(){const t=[];for(const e of this.Hxt)t.push(...await e.kxt());return t}async Ext(t){const e=[];for(const i of this.Hxt)e.push(...await i.Ext(t));return e}async xxt(t,e){const i=[];for(const s of this.Hxt)i.push(...await s.xxt(t,e));return i}async rT(t){for(const e of this.Hxt)await e.rT(t)}async Ixt(t){for(const e of this.Hxt)await e.Ixt(t)}async Rxt(){for(const t of this.Hxt)await t.Rxt()}constructor(t){this.Hxt=t}};function KX(t){return async()=>{const e=await Promise.all(t.map((t=>t())));return jX.ist(e)}}var jX=class t{static ist(e){return Promise.resolve(new t(e))}get Oxt(){return this.Xxt}get Fxt(){return this.zxt}get Bxt(){return this.qxt}get Lxt(){return this.Yxt}get xct(){return this.Kxt}Nxt(e){if(0===this.jxt.length)return e(this);const i=[];let s=0;const n=r=>(i.push(r),s++,s<this.jxt.length?this.jxt[s].Nxt(n):e(new t(i)));return this.jxt[s].Nxt(n)}constructor(t){this.jxt=t,this.Xxt=new gt(t.map((t=>t.Oxt))),this.zxt=new gt(t.map((t=>t.Fxt))),this.qxt=new gt(t.map((t=>t.Bxt))),this.Yxt=new gt(t.map((t=>t.Lxt))),this.Kxt=new gt(t.map((t=>t.xct)))}},Sc=class t{static Pa(e){t.eZ.Pa(e)}static get Vm(){var e,i;return null!=(i=(e=t).Bbt)?i:e.Bbt=t.eZ.ist()}};Sc.eZ=new class{ist(){return new XX(this.Qxt())}async Qxt(){this.Jxt&&(await Promise.resolve(),this.Jxt=!1);for(const t of this.$xt)try{return await KX([YX.ist,t])()}catch(t){}return await KX([YX.ist,this.tIt])()}Pa(t){if(!this.Jxt)throw new m("Registration overdue");this.$xt.push(t)}constructor(t){this.$xt=[],this.Jxt=!0,this.tIt=t}}(class t{static ist(){return Promise.resolve(new t)}Nxt(t){return Promise.reject(ZX)}constructor(){this.Lxt=new wt,this.xct=new wt,this.Bxt=new wt,this.Oxt=new wt,this.Fxt=new wt}}.ist),Sc.Bbt=void 0;var QX=class extends OX{IR(){if(dV(this.aO))return this.aO.IR()}async yn(){var t;await super.yn(),null==(t=this.eIt)||t.yn()}uEt(t){var e,i;return((null!=(i=null==(e=this.Sc)?void 0:e.seamlessSwitchStrategy)?i:Gu.bO)!==Gu.bO||!Ya.Sm)&&super.uEt(t)}dEt(){return!(Ya.Rg&&Ya.Pg<3)&&super.dEt()}gxt(){return new wl(this,new xr)}UEt(t){return fV(t)}constructor(t,e,i,s,n,r){super(t,e,i,s,new bt(Sc.Vm.Bxt,Sc.Vm.Lxt,Sc.Vm.xct,Sc.Vm.Fxt),n,new _V(r)),this.Vrt=r,Ya.$g&&(this.eIt=new RV(this))}},JX=class extends QX{async yn(){await super.yn(),await this.YZ.qZ(this.aO)}constructor(t,e,i,s,n,r,o){const h=new St(n);super(t,e,i,s,h.lH(r),o),this.YZ=h}};r(),r(),r(),r(),r();var $X=class extends yV{get iIt(){return this.ux.iIt}TI(){return super.TI().Pb(this.iIt)}jrt(){return super.jrt().Pb(this.iIt)}r3(t,e,i){const s=this.iIt;return super.r3(t,{$it:e.$it-s,ct:e.ct,aW:e.aW-s},i)}T3(t,e){const i=this.iIt;return super.T3(_.max(0,t-i),_.max(0,e-i))}rT(t,e,i){const s=this.iIt;return super.rT(_.max(0,t-s),_.max(0,e-s),i)}i4(t,e){const i=this.iIt;super.i4(_.max(0,t-i),_.max(0,e-i))}s4(t,e){const i=this.iIt;super.s4(_.max(0,t-i),_.max(0,e-i))}constructor(t,e){super(e),this.ux=t}},tz=class extends pV{get iIt(){return this.ux.iIt}jd(){return super.jd()+this.iIt}q4(t){super.q4(t-this.iIt)}lR(){return super.lR().Pb(this.iIt)}Q4(t,e,i,s){const n=this.iIt;super.Q4(t-n,e-n,i,s)}Zrt(t){return new $X(this,t)}constructor(t,e){super(e),this.Urt(e),this.ux=t}},ez=class extends kV{get iIt(){return this.sIt}set iIt(t){this.sIt=t}TI(){return super.TI().Pb(this.sIt)}EI(){return nz(super.EI(),this.sIt)}CI(){return super.CI()+this.sIt}jd(){return super.jd()+this.sIt}nR(){return super.nR().Pb(this.sIt)}lR(){return super.lR().Pb(this.sIt)}Db(t,e,i){const s=_.max(0,t-this.sIt);super.Db(s,e,i)}wZ(t){super.wZ(nz(t,-this.sIt))}_R(){return this.Hl}ZR(t,e,i,s,n,r,o,h){return this.FW.ZR(t,e,i,s,n,r,o,h)}UZ(t){return this.FW.UZ(t)}ZW(t){this.FW.ZW(t)}GZ(){this.FW.nr(),super.GZ()}BZ(){return!1}FZ(t,e,i,s,n){throw new m("Not supported")}Km(){return this.Pit.yn(),this.Cit.yn(),this.FW.yn(),this.Hl.yn(),super.Km()}wot(t){return new tz(this,t)}pot(t){return new SV(t)}UR(t){let e;switch(t.type){case ns.ho:e=new he(t.currentTime+this.sIt);break;case ns.Ky:e=new nl(t.currentTime+this.sIt);break;case Zc.uB:e=new Xr(t.currentTime+this.sIt);break;case ns._b:e=new rl(t.currentTime+this.sIt,nz(t.currentProgramDateTime,this.sIt));break;case ns.jy:e=new ki(t.currentTime+this.sIt);break;case ns.ib:e=new Al(t.currentTime+this.sIt);break;case ns.eb:e=new Be(t.currentTime+this.sIt);break;case ns.Wy:e=new EM(t.currentTime+this.sIt);break;case ns.Gy:e=new vB(t.currentTime+this.sIt);break;case ns.Ly:e=new ss(t.currentTime+this.sIt);break;case ns.Qy:e=new ga(t.currentTime+this.sIt,t.playbackRate);break;case ns.vb:e=new Ar(t.currentTime+this.sIt,t.volume);break;case ns.Dy:e=new yn(t.duration+this.sIt);break;case Zc.aC:e=new oa(t.currentTime+this.sIt,t.readyState);break;default:e=t}super.UR(e)}be(){super.be(),this.Cit.be()}ge(){super.ge(),this.Cit.ge()}constructor(t){super(t),this.sIt=0,this.FW=new wl(this,new xr),this.Hl=new uu([this.FW.nt,super._R()]),this.Cit=new DB,this.Cit.stt(this.SZ.parentElement),this.Pit=new $O(this.Cit.we,this.Hu,this.Hl,this.Wl,this.Sa,this.WZ)}},iz=class extends(gV(ez)){constructor(t){super(t)}},sz=class extends(_l(ez)){constructor(t){super(t)}};function nz(t,e){return t?new Date(t.getTime()+1e3*e):void 0}var rz=class extends vV{lH(t){return t===Fo.yE?new sz(super.lH(t)):t===Fo.wE?new iz(super.lH(t)):void 0}async qZ(t){const e=t;await e.Km(),await super.qZ(e.hot)}},oz=class extends QX{async Vp(t){await super.Vp(t),void 0===this.nIt&&(this.nIt=this.rIt(),this.aO.iIt=this.nIt)}rIt(){if(this.ct===1/0){const t=this.Ikt;if(t.V>0)return _.max(0,t.Sn(0)-300)}return 0}U8(t,e,i,s,n,r,o,h){return void 0===r&&(r=!1),void 0===o&&(o=JH.nTt),void 0===h&&(h=!1),h||(h=this.ct===1/0&&Ya.Rg&&Ya.Pg<3&&t<=this.RI),super.U8(t,e,i,s,n,r,o,h)}async nr(){await super.nr(),this.nIt=void 0,this.aO.iIt=0}async yn(){await super.yn(),await this.aO.Km(),await this.YZ.qZ(this.aO)}static TT(t){var e;return(!t||"google-dai"!==(null==t||null==(e=t.ssai)?void 0:e.integration))&&(Ya.Rg&&Ya.Pg<4)}constructor(t,e,i,s,n,r,o){const h=new rz(new St(n));super(t,e,i,s,h.lH(r),o),this.YZ=h,this.nIt=void 0}};r(),r(),r(),r(),r();var hz=class extends TV{get hot(){return this.aO}get vR(){return this.aO.vR}get pR(){return this.aO.pR}constructor(t){super(t)}};r(),r(),r();var az=class extends yV{qrt(){return this.oIt?this.lQ:super.qrt()}Yrt(t){this.oIt?this.lQ=t:super.Yrt(t)}TI(){return this.oIt?this.hIt:super.TI()}yT(){return this.oIt?this.FT:super.yT()}jrt(){return this.oIt?this.aIt:super.jrt()}Qrt(){return this.oIt?this.aQ:super.Qrt()}Jrt(t){this.oIt?this.aQ=t:super.Jrt(t)}r3(t,e,i){return this.o3((i=>this.uIt(t,e,i)),i)}uIt(t,e,i){return super.r3(t,e,i)}n4(){return this.o3((()=>this.cIt()))}cIt(){return super.n4()}a3(t,e,i){return this.o3((i=>this.lIt(t,e,i)),i)}lIt(t,e,i){return super.a3(t,e,i)}i4(t,e){this.oIt?(this.aIt=this.aIt.AB(new ee([t,e])),this.dIt.push({zw:"bct",lF:t,dF:e})):this.fIt(t,e)}fIt(t,e){super.i4(t,e)}T3(t,e){return this.o3((()=>this._It(t,e)))}_It(t,e){return super.T3(t,e)}s4(t,e){this.oIt?(this.aIt=this.aIt.TB(new ee([t,e])),this.dIt.push({zw:"rT",lF:t,dF:e})):this.vIt(t,e)}vIt(t,e){super.s4(t,e)}rT(t,e,i){return this.o3((i=>this.gIt(t,e,i)),i)}gIt(t,e,i){return super.rT(t,e,i)}XJ(t){return this.o3((()=>this.mIt(t)))}mIt(t){return super.XJ(t)}async o3(t,e){for(this.N3();this.oIt;)await Lu(this.oIt.Xb,e),this.N3();Io(e);try{this.W3=t(e),await this.W3}finally{this.W3=void 0}}N3(){if(this.W3)throw new m("Internal error")}async pIt(){if(this.oIt)throw new g("Already locked");this.oIt=new is,this.wIt(),this.W3&&(await this.W3.catch(M),this.wIt())}yIt(){const t=this.oIt;void 0!==t&&(t.Zb(),this.oIt=void 0,this.bIt())}wIt(){this.FT=super.yT(),this.lQ=super.qrt(),this.aQ=super.Qrt(),this.hIt=super.TI(),this.aIt=super.jrt(),this.AIt=!1}bIt(){this.N3(),super.Yrt(this.lQ),super.Jrt(this.aQ);const t=this.dIt.slice();En(this.dIt);for(const e of t)"bct"===e.zw?this.fIt(e.lF,e.dF):this.vIt(e.lF,e.dF);this.hIt.CB(super.TI())||this._o(new me(xs.PJ))}Km(){var t;null==(t=this.oIt)||t.np(),this.oIt=void 0,super.Km()}constructor(t){super(t),this.W3=void 0,this.oIt=void 0,this.lQ=0,this.hIt=ee.WB(),this.aIt=ee.WB(),this.dIt=[],this.AIt=!1,this.aQ=0,this.FT=t.kd}},uz=class extends az{TI(){var t,e;return super.TI().AB(null!=(e=null==(t=this.SIt)?void 0:t.SI)?e:ee.WB())}jrt(){var t,e;return super.jrt().AB(null!=(e=null==(t=this.SIt)?void 0:t.J3)?e:ee.WB())}Yrt(t){super.Yrt(t),this.SIt&&(this.SIt.sQ=t)}Jrt(t){super.Jrt(t),this.SIt&&(this.SIt.$j=t)}fIt(t,e){super.fIt(t,e),this.SIt&&this.SIt.i4(t,e)}vIt(t,e){super.vIt(t,e),this.SIt&&this.SIt.s4(t,e)}async gIt(t,e,i){Io(i);const s=[];s.push(super.gIt(t,e,i)),this.SIt&&s.push(this.SIt.rT(t,e,i)),await Promise.all(s)}ZJ(t){return!!super.ZJ(t)||this.ux.TIt(t)}mIt(t){return super.ZJ(t)?super.mIt(t):this.ux.kIt(t)}EIt(t){var e,i;null==(e=this.SIt)||e.vn(aN,this.$rt),this.SIt=t,null==(i=this.SIt)||i.bn(aN,this.$rt)}constructor(t,e){super(e),this.SIt=void 0,this.ux=t}},cz=class extends pV{ZJ(t){const e=void 0!==this.H4,i=void 0!==this.X4,s=t.J4.some((t=>Cl(t.Fk,"audio"))),n=t.J4.some((t=>Cl(t.Fk,"video")));return e===s&&i===n&&(!!super.ZJ(t)||(!(!this.xIt||!this.xIt.ZJ(t))||this.ux.IIt(t)))}async XJ(t){return super.ZJ(t)?await super.XJ(t):this.xIt&&this.xIt.ZJ(t)?(this.RIt(),await this.XJ(t)):(await this.ux.CIt(t),await this.XJ(t))}TIt(t){return this.ZJ(this.PIt(t))}kIt(t){return this.XJ(this.PIt(t))}PIt(t){const e=this.kd,i=e.J4.map((e=>Cl(t.Fk,"audio")&&Cl(e.Fk,"audio")||Cl(t.Fk,"video")&&Cl(e.Fk,"video")?t:e));return ne({},e,{J4:i})}Q4(t,e,i,s){super.Q4(t,e,i,s),this.xIt&&this.xIt.Q4(t,e,i,s)}DIt(){return!this.NIt&&this.MIt}jd(){return void 0!==this.LIt?this.LIt:this.DIt()?this.FA:super.jd()}q4(t){this.FA=t,this.LIt=void 0,this.DIt()||super.q4(t)}Wrt(){return!this.DIt()&&super.Wrt()}Y3(){this.LIt=_.max(lz(this.kZ.d4),lz(this.kZ.f4)),this.DIt()||super.Y3()}V3(){this.LIt=void 0,this.DIt()||super.V3()}Zrt(t){return new uz(this,t)}BIt(){this.NIt=!this.NIt}RIt(){const t=this.kZ,e=this.xIt;e&&(this.NIt=!this.NIt,this.Urt(e),this.OIt(t),this.DIt()&&this.FIt())}OIt(t){var e,i;this.xIt=t,null==(e=this.H4)||e.EIt(null==t?void 0:t.d4),null==(i=this.X4)||i.EIt(null==t?void 0:t.f4)}VIt(t){const e=this.kZ,i=this.xIt;if(!i)return;const s=this.NIt,n=s?e:i,r=(s?i:e).SI.BB(t);if(!r)return;const o=MV(n.SI,this.jrt()).BB(r.Tn(0),U);return!o||r.Tn(0)+U>=o.Tn(0)?void 0:_.max(r.Tn(0),o.Sn(0))}WIt(t,e){if(this.MIt)return Promise.resolve();const i=this.NIt?this.xIt:this.kZ;return i?(this.MIt=!0,this.UIt((e=>{if(Io(e),this.MIt)return async function(t,e,i){Io(i);const s=[];t.d4&&s.push(gM(t.d4,e,i));t.f4&&s.push(gM(t.f4,e,i));await Promise.all(s),t.Y3()}(i,t,e)}),e)):Promise.resolve()}FIt(){if(!this.MIt)return;const t=this.NIt?this.xIt:this.kZ;if(!t)return;var e;this.MIt=!1;const i=null!=(e=this.LIt)?e:this.FA;t.ct<i&&t.q4(i),t.V3()}GIt(t){var e;const i=null!=(e=this.LIt)?e:this.FA;t.q4(i),this.NIt?this.Urt(t):this.OIt(t)}jrt(){var t,e,i;const s=null!=(i=null==(t=this.H4)?void 0:t.J3)?i:ee.WB();var n;const r=null!=(n=null==(e=this.X4)?void 0:e.J3)?n:ee.WB();return s.AB(r)}async UIt(t,e){const i=[];this.H4&&i.push(this.H4.pIt()),this.X4&&i.push(this.X4.pIt());try{await Promise.all(i),await t(e)}finally{this.H4&&this.H4.yIt(),this.X4&&this.X4.yIt()}}Xrt(t){t.type===xs.PJ&&this.ux.H3(),super.Xrt(t)}constructor(t,e){super(e),this.xIt=void 0,this.FA=NaN,this.NIt=!1,this.MIt=!1,this.LIt=void 0,this.Urt(e),this.ux=t}};function lz(t){if(!t)return 0;const e=t.SI;return e.V>0?e.Tn(e.V-1):0}function Ru(t){return t.kd.zw===De.qW}r();var dz=class extends hz{get ZIt(){return this.HIt}TI(){return super.TI().AB(this.HIt.SI)}jd(){if(!this.XIt){const t=this.kZ;if(t&&Ru(t))return t.ct}return super.jd()}uot(){return!!super.uot()&&!(!this.XIt&&!this.r$())}cot(){return!!super.cot()&&!(!this.XIt&&super.uot()&&!this.r$())}r$(){const t=this.kZ;return!(!t||!Ru(t))&&t.r$}nR(){return this.Uo.AB(this.aO.sR)}lR(){return super.lR().AB(this.HIt.cR)}uR(){return super.uR()}aot(){var t;return null!=(t=super.aot())?t:this.HIt.EZ}DR(){return this.WH=!1,super.DR()}PR(){this.WH=!0,super.PR()}Q7(){this.XIt=!0,super.Q7(),this.HIt.Q7()}J7(){this.XIt=!1,super.J7(),this.HIt.Q7()}CI(){var t;return null!=(t=this.l8)?t:super.CI()}fR(){return void 0!==this.l8||super.fR()}Db(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.zIt.np(),this.V8.np(),this.V8=new Fi,this.qIt=Ts(this.U8(t,e,i,this.qIt,this.V8.ep),this.V8).catch(M)}async U8(t,e,i,s,n){this.l8=t,this.G8=t,this._o(new Al(t)),s&&await s.catch(M),Io(n),this.kZ&&Ru(this.kZ)&&this.kZ.FIt(),this.l8=void 0,super.Db(t,e,i),this.HIt.Db(t,e,i),this.YIt()}wZ(t){const e=this.EZ;if(!e||S(e.getTime()))return;const i=(t.getTime()-e.getTime())/1e3;this.Db(i)}itt(){super.itt(),this.HIt.itt()}get vR(){return this.KIt.vR}get pR(){return this.KIt.pR}be(){this.LH&&(this.LH=!1,this.KIt.be())}ge(){this.LH||(this.LH=!0,this.KIt.ge())}async jIt(){var t;this.l8=void 0,this.G8=NaN,this.Uo=ee.WB(),null==(t=this.QIt)||t.np(),this.zIt.np(),this.V8.np(),this.qIt&&(await this.qIt.catch(M),this.qIt=void 0)}vot(t){super.vot(t),this.HIt.zZ=t}got(t){super.got(t),this.HIt.ntt=t}_R(){return this.Hl}ZR(t,e,i,s,n,r,o,h){return this.FW.ZR(t,e,i,s,n,r,o,h)}UZ(t){return this.FW.UZ(t)}FZ(t,e,i,s,n){throw new m("Not implemented yet")}BZ(){return!1}ZW(t){this.FW.ZW(t)}GZ(){this.FW.nr(),super.GZ()}async $n(t){const e=await super.$n(t);return Ru(e)&&this.YIt(),e}async nr(){await this.jIt(),await super.nr(),await this.HIt.nr()}async Km(){await this.jIt(),this.FW.yn(),this.Hl.yn(),await super.Km()}wot(t){return new cz(this,t)}pot(t){return new SV(t)}YIt(){this.zIt.np(),this.zIt=new Fi,this.qIt=Ts(this.JIt(this.qIt,this.zIt.ep),this.zIt).catch(M)}async JIt(t,e){if(t&&await t.catch(M),this.kZ&&Ru(this.kZ))for(;;){let t;for(Io(e),this.$It()&&this.BIt(),this.kZ.FIt(),Io(e);;){const i={stack:[],error:void 0,hasError:!1};try{if(Io(e),this.$It())break;if(t=this.kZ.VIt(this.CI()),void 0!==t){0,this.tRt(),await this.kZ.WIt(t,e),Io(e),this.HIt.Db(t);break}const s=Gi(i,Fi.hp([e]),!1);await Promise.race([this.Ay(ns._b,s.ep),this.eRt(s.ep)])}catch(t){i.error=t,i.hasError=!0}finally{ce(i)}}for(Io(e);!this.$It();)await this.aO.Ay([ns._b,ns.Ly,Zc.aC],e)}}$It(){const t=this.kZ;if(void 0===t||!Ru(t))return!1;const e=this.CI(),i=this.aO.SI;if(!this.aO.MI&&i.wr(e))return!1;return!!MV(this.HIt.SI,t.jrt()).IB(e,e+U)}BIt(){if(this.iRt)return;this.iRt=!0,this.Uo=this.nR();const t=RM(this),e=this.fR(),i=this.uR(),s=this.aO,n=this.HIt,r=this.kZ;r.FIt(),r.BIt(),CM(n,t),this.bot(n),this.HIt=s,s.PR(),s.qI=!0,this.iRt=!1;const o=this.fR();e!==o&&(o?this._o(new Al(this.RI)):this._o(new Be(this.RI)));const h=this.uR();i!==h&&this._o(new oa(this.RI,h)),o||this.tRt()}tRt(){const t=this.aO,e=this.KIt;if(e===t)return;const i=this.pR,s=this.vR;this.KIt=t,this.LH&&(e.be(),t.ge());const n=this.pR,r=this.vR;n>0&&r>0&&(i!==n||s!==r)&&this._o(new W)}IIt(t){return void 0!==this.HIt.l$([t])}async CIt(t){this.tRt();const e=this.kZ,i=this.HIt;await i.nr();const s=await i.$n(t);e.GIt(s)}eRt(t){return this.QIt=new is,Lu(this.QIt.Xb,t)}H3(){var t;null==(t=this.QIt)||t.Zb()}UR(t){t.type===ns.ib&&this.G8===t.currentTime||(t.type===ns.eb&&(this.G8=NaN,this.tRt()),t.type!==Zc.aC&&t.type!==ns.Ky&&t.type!==ns.Ly||this.iRt||!this.$It()?(t.type!==ns.Ly||this.MI)&&super.UR(t):this.YIt())}constructor(t,e,i){super(t),this.XIt=!1,this.l8=void 0,this.G8=NaN,this.Uo=ee.WB(),this.WH=!0,this.iRt=!1,this.LH=!0,this.QIt=void 0,this.qIt=void 0,this.zIt=new Fi,this.V8=new Fi,this.HIt=e,this.KIt=t,this.aO.ge(),this.HIt.be(),this.FW=new wl(this,i),this.Hl=new uu([this.FW.nt,super._R()])}},fz=class extends dz{get hot(){return this.aO}get ZIt(){return this.HIt}be(){super.be(),this.Cit.be()}ge(){super.ge(),this.Cit.ge()}get SZ(){return this.aO.SZ}get y5(){return this.aO.y5}get ER(){return this.aO.ER}set ER(t){this.aO.ER=t}stt(t){this.aO.stt(t),this.HIt.stt(t)}FR(){this.aO.FR(),this.HIt.FR()}IR(){return this.aO.IR()}ja(){return this.MO}bot(t){const e=this.xR(),i=this.IR();super.bot(t),this.MO.bC=t.WZ,this.xR()!==e&&this._o(new Ki),this.IR()!==i&&this._o(new gk)}Km(){return this.MO.yn(),this.Pit.yn(),this.Cit.yn(),super.Km()}constructor(t,e){super(t,e,new xr),this.MO=new Lh(t.WZ),this.Cit=new DB,this.Cit.stt(t.SZ.parentElement),this.Pit=new $O(this.Cit.we,this.Hu,this.nt,this.Wl,this.Sa,this.WZ)}},_z=class extends vV{lH(t){if(t===Fo.yE){const e=super.lH(t),i=super.lH(t);return new fz(e,i)}return super.lH(t)}async qZ(t){t instanceof fz?(await t.Km(),await super.qZ(t.hot),await super.qZ(t.ZIt)):await super.qZ(t)}},vz=class extends QX{async yn(){await super.yn(),await this.YZ.qZ(this.aO)}static TT(t){var e;return!Ya.Qs&&!Ya.gm&&!(t&&"google-dai"===(null==(e=t.ssai)?void 0:e.integration))}constructor(t,e,i,s,n,r,o){const h=new St(new _z(n));super(t,e,i,s,h.lH(r),o),this.YZ=h}};r(),r(),r();var gz=class extends pV{Zrt(t){return new az(t)}yT(){return this.sRt?this.FT:super.yT()}TI(){return this.sRt?this.hIt:super.TI()}jd(){return this.sRt?this.FA:super.jd()}q4(t){this.sRt?(this.FA=t,this.nRt=!0):super.q4(t)}lR(){return this.sRt?this.rRt?this.rRt.a4():this.j4:super.lR()}Q4(t,e,i,s){this.sRt?this.rRt=new kr(t,e,i,s):super.Q4(t,e,i,s)}Wrt(){return this.sRt?this.jit&&!1!==this.AIt:super.Wrt()}Y3(){this.sRt?this.AIt=!0:super.Y3()}V3(){this.sRt?this.AIt=!1:super.V3()}ZJ(t){return!this.sRt&&super.ZJ(t)}XJ(t){return this.sRt?Promise.reject(new g("Not supported")):super.XJ(t)}async pIt(){if(this.sRt)throw new g("Already locked");this.sRt=!0,this.wIt();const t=[];this.H4&&t.push(this.H4.pIt()),this.X4&&t.push(this.X4.pIt()),await Promise.all(t)}yIt(){this.sRt=!1,this.H4&&this.H4.yIt(),this.X4&&this.X4.yIt(),this.bIt()}wIt(){this.FT=super.yT(),this.hIt=super.TI(),this.FA=super.jd(),this.j4=super.lR(),this.nRt=!1,this.AIt=void 0,this.rRt=void 0}bIt(){if(this.nRt&&(super.q4(this.FA),this.nRt=!1),void 0!==this.rRt){const t=this.rRt;super.Q4(t.Sn,t.Tn,t.u4,t.c4),this.rRt=void 0}void 0!==this.AIt&&(this.AIt?super.Y3():super.V3(),this.AIt=void 0)}constructor(t){super(t),this.sRt=!1,this.hIt=ee.WB(),this.FA=0,this.nRt=!1,this.jit=!1,this.AIt=void 0,this.j4=ee.WB(),this.rRt=void 0,this.Urt(t),this.FT=t.kd}},mz=class extends kV{DR(){return void 0!==this.kZ&&Ru(this.kZ)&&this.MI&&this.Db(0),super.DR()}Db(t,e,i){void 0!==this.kZ&&Ru(this.kZ)&&this.MI&&t<this.ct&&this.oRt(),super.Db(t,e,i)}Q7(){this.hRt=!0,super.Q7()}J7(){this.hRt=!1,this.aRt()||super.J7()}aRt(){return this.hRt||this.uRt}cRt(){this.uRt||(this.uRt=!0,super.Q7())}lRt(){this.uRt&&(this.uRt=!1,this.aRt()||super.J7())}$n(t){this.dRt.np();const e=this.ix(t,this.fRt);return this._Rt=e,e}async ix(t,e){return e&&await e.catch(M),this.lRt(),await super.$n(t)}wot(t){return new gz(t)}pot(t){return new SV(t)}nr(){this.dRt.np();const t=this.ixt(this.fRt);return this._Rt=t,t}async ixt(t){return t&&await t.catch(M),this.lRt(),await super.nr()}oRt(){this.cRt(),this.dRt.np(),this.dRt=new Fi,this.fRt=Ts(this.vRt(this._Rt,this.fRt,this.dRt.ep),this.dRt).catch(vf)}async vRt(t,e,i){t&&await t.catch(M),e&&await e.catch(M),Io(i);const s=this.kZ;if(!s||!Ru(s))return;const n=s.kd;await s.pIt(),await this.aO.nr();const r=await this.aO.$n(n);r.q4(s.ct),s.Urt(r),s.yIt(),this.lRt()}async Km(){this.dRt.np(),this.fRt&&(await this.fRt.catch(M),this.fRt=void 0),this.aRt()&&super.J7(),await super.Km()}constructor(...t){super(...t),this.hRt=!1,this.uRt=!1,this._Rt=void 0,this.fRt=void 0,this.dRt=new Fi}},pz=class extends(gV(mz)){constructor(t){super(t)}},wz=class extends(_l(mz)){constructor(t){super(t)}},Bt=class extends vV{lH(t){return t===Fo.yE?new wz(super.lH(t)):t===Fo.wE?new pz(super.lH(t)):void 0}async qZ(t){const e=t;await e.Km(),await super.qZ(e.hot)}static TT(){return Ya.wm}};et(new class extends lV{mP(t,e,i,s,n,r,o,h){let a;a=oz.TT(h)?oz:vz.TT(h)?vz:JX;let u=e;return Bt.TT()&&(u=new Bt(u)),new a(i,s,n,r,u,Fo.yE,t)}_H(){return!0}constructor(...t){super(...t),this.vH=CR.HG}}),r(),r(),zh((function(t){return class extends t{ka(){const t=this.VI.wa;return Qr(super.ka(),{get hesp(){return t}})}}}),Hh.au),r(),r(),r(),r(),r();var yz=0;function bz(t,e){if(void 0===e&&(e=!0),!t)return;let i=t;return"/"===i.charAt(0)&&(i=i.substring(1)),e&&"/"!==i.charAt(i.length-1)&&(i+="/"),i}function Az(t){var e,i,s;return ne({},t,{baseUrl:bz(t.baseUrl),id:null!=(e=t.id)?e:String(yz++),timeBounds:ne({},t.timeBounds,{scale:null!=(i=t.timeBounds.timescale)?i:1e3}),currentTime:t.currentTime?{value:t.currentTime.timestamp,scale:null!=(s=t.currentTime.timescale)?s:1e3}:void 0,audio:t.audio.map(Iz),video:t.video.map(Cz),metadata:t.metadata.map(Dz),events:t.events.map(Oz)})}var Sz=0;function Tz(t){const e=bz(t.initPattern,!1),i=bz(t.contPattern,!1);var s;return ne({},t,{id:null!=(s=t.id)?s:String(Sz++),continuationPattern:i?dh(i,"${segmentId}","{segmentId}"):void 0,initializationPattern:e?dh(e,"${initId}","{initId}"):void 0})}function kz(t){var e;const i=bz(t.initPattern,!1),s=bz(t.contPattern,!1);return ne({},t,{continuationPattern:s?dh(s,"${segmentId}","{segmentId}"):void 0,initializationPattern:i?dh(i,"${initId}","{initId}"):void 0,segmentDuration:t.segmentDuration?{value:t.segmentDuration.duration,scale:t.segmentDuration.timescale}:void 0,segments:t.segments.map(Ez),activeSegment:null==(e=Do(t.segments,(t=>t.active)))?void 0:e.id})}function Ez(t){var e;return ne({},t,{timeBounds:ne({},t.timeBounds,{endTime:void 0!==t.timeBounds.duration?t.timeBounds.startTime+t.timeBounds.duration:void 0,scale:null!=(e=t.timeBounds.timescale)?e:1e3})})}function xz(t){return t&&"-"===t.charAt(0)}function Iz(t){let e;try{var i;e=x(null!=(i=t.channels)?i:"2")}catch(t){e=2}return xz(t.contPattern)||xz(t.initPattern)?function(t,e){const i=t.initPattern,s=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,ne({},Tz(t),{baseUrl:bz(t.baseUrl),language:"eng",channels:e,sampleRate:t.samplerate,tracks:t.tracks.map((t=>{var e,n;return t.initPattern=null!=(e=t.initPattern)?e:i,t.contPattern=null!=(n=t.contPattern)?n:s,Rz(t)}))})}(t,e):ne({},Tz(t),{baseUrl:bz(t.baseUrl),language:"eng",channels:e,sampleRate:t.samplerate,tracks:t.tracks.map(Rz)})}function Rz(t){let e;try{var i;e=x(null!=(i=t.channels)?i:"2")}catch(t){e=2}return xz(t.contPattern)||xz(t.initPattern)?function(t,e){return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,ne({},kz(t),{baseUrl:"./",channels:e,sampleRate:t.samplerate})}(t,e):ne({},kz(t),{baseUrl:bz(t.baseUrl),channels:e,sampleRate:t.samplerate})}function Cz(t){return xz(t.contPattern)||xz(t.initPattern)?function(t){const e=t.initPattern,i=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,ne({},Tz(t),{baseUrl:bz(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map((t=>(t.initPattern=e,t.contPattern=i,Pz(t))))})}(t):ne({},Tz(t),{baseUrl:bz(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map(Pz)})}function Pz(t){var e,i;return xz(t.contPattern)||xz(t.initPattern)?function(t){var e,i;return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,ne({},kz(t),{baseUrl:"./",frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:ne({},t.resolution,{sarWidth:null==(e=t.resolution.sar)?void 0:e.width,sarHeight:null==(i=t.resolution.sar)?void 0:i.height})})}(t):ne({},kz(t),{baseUrl:bz(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:ne({},t.resolution,{sarWidth:null==(e=t.resolution.sar)?void 0:e.width,sarHeight:null==(i=t.resolution.sar)?void 0:i.height})})}function Dz(t){var e;return ne({},t,{id:null!=(e=t.id)?e:String(Sz++),schemeId:"",tracks:t.tracks.map(Nz)})}function Nz(t){return ne({},t,{segments:t.segments.map(Lz)})}var Mz=0;function Lz(t){return{id:Mz++,timeBounds:ne({},t.timeBounds,{scale:t.timeBounds.timescale})}}var Bz=0;function Oz(t){var e,i;return ne({},t,{id:null!=(e=t.id)?e:String(Bz++),timeBounds:ne({},t.timestamp,{scale:null!=(i=t.timestamp.timescale)?i:1e3})})}var Fz=class{async gRt(t,e){const i={Xu:t,ep:e},s=await this.mI.eE(i);let n=await s.Nk(e);return function(t){const e=t;if(oi(e.manifestVersion)&&Xa(e.manifestVersion,"alpha"))return!0;let i,s;for(const t of e.presentations){for(const e of[...t.video,...t.audio])if(e.tracks.length>0){i=e.tracks[0],s=e;break}if(ol(i))break}return(oi(null==s?void 0:s.initPattern)||oi(null==i?void 0:i.initPattern))&&!oi(null==i?void 0:i.initializationPattern)&&!oi(null==s?void 0:s.initializationPattern)}(n)&&(n=function(t){return ne({},t,{availabilityDuration:{value:t.dvrDuration?t.dvrDuration.duration/t.dvrDuration.timescale:0},manifestVersion:"1.0.0",presentations:t.presentations.map(Az),contentBaseUrl:t.contentBaseUrl||"./"})}(n)),n}constructor(t){this.mI=t}};r();var Vz=class extends So{get wa(){return this.eu||(this.eu=SS(this)),this.eu}JC(){return this.mRt.JC()}get qC(){return this.mRt.qC}get YC(){return this.mRt.YC}get KC(){return this.mRt.KC}get jC(){return this.mRt.jC}get QC(){return this.mRt.QC}bn(t,e){this.mRt.bn(t,e)}vn(t,e){this.mRt.vn(t,e)}constructor(t){super(),this.mRt=t}};r(),r(),r();var Wz=class{get zit(){const t=1-this.pRt**this.wRt;return this.yRt/t}Jat(t,e){const i=this.pRt**t,s=e*(1-i)+i*this.yRt;S(s)||(this.yRt=s,this.wRt+=t)}XJ(t){const e=_.exp(_.log(.5)/t);if(e===this.pRt)return;if(0===this.wRt)return void(this.pRt=e);const i=this.zit,s=1-e**this.wRt;this.yRt=i*s,this.pRt=e}constructor(t){this.yRt=0,this.wRt=0,this.pRt=_.exp(_.log(.5)/t)}},Uz=class t{get zit(){return this.rut()?_.max(this.bRt.zit,this.ARt.zit):this.SRt}Jat(t){const e=As.Wm(),i=t;this.TRt&&void 0!==this.kRt&&e-this.kRt>=this.ERt&&this.nr(),this.xRt+=1,this.bRt.Jat(1,i),this.ARt.Jat(1,i),this.IRt.push(i),this.IRt.length>this.RRt&&this.IRt.shift(),this.kRt=e}rut(){return void 0!==this.kRt&&As.Wm()-this.kRt<=this.ERt}nr(){this.bRt=new Wz(this.CRt),this.ARt=new Wz(this.PRt),this.xRt=0,this.IRt=[],this.kRt=void 0}constructor(e=t.DRt,i=t.NRt,s=t.out,n=!1){this.xRt=0,this.IRt=[],this.kRt=void 0,this.ERt=6e4,this.RRt=10,this.CRt=e,this.PRt=i,this.SRt=s,this.TRt=n,this.bRt=new Wz(e),this.ARt=new Wz(i)}};Uz.DRt=2,Uz.NRt=5,Uz.out=.1,r();var Gz=class{Xj(t){for(const e of this.MRt)e.Xj(t)}zj(t){for(const e of this.MRt)e.zj(t)}qj(t,e){for(const i of this.MRt)i.qj(t,e)}Yj(t){for(const e of this.MRt)e.Yj(t)}constructor(t){this.MRt=t}};r();var Zz=class{Xj(t){this.LRt=t}zj(t){this.BRt.Jat(t-this.LRt)}qj(t){}Yj(t){}constructor(t){this.LRt=0,this.BRt=t}};r();var Hz=class{zj(t){this.ORt=t}qj(t,e){this.uut.Jat(t-this.ORt,e.byteLength),this.ORt=t}Yj(t){}Xj(t){}constructor(t){this.ORt=0,this.uut=t}};r();var Xz=class{Xj(t){}qj(t,e){const i=e.byteLength,s=this.FRt;this.FRt=i;const n=t-this.Pn;this.Pn=t,this.VRt.F$(e);const r=!this.VRt.WRt(),o=i>=this.URt;s!==As.Ys.Ip&&r&&o&&this.uut.Jat(n,i)}zj(t){this.Pn=t}Yj(t){}constructor(t,e=0){this.VRt=new zz,this.Pn=0,this.FRt=0,this.uut=t,this.URt=e}},zz=class extends Lo{WRt(){return this.GRt}F$(t){this.GRt=!1,super.F$(t)}B$(t,e){this.ZRt&&this.ZRt!==Ai.TD||(this.GRt=!0),super.B$(t,e),this.ZRt=t}Y$(t){return!1}j$(t){}J$(t){}constructor(...t){super(...t),this.ZRt=void 0,this.GRt=!1}};r();var qz=function(t){return t.HRt="sample",t}({}),Yz=class extends So{BG(){if(!this.rut())return;const t=As.Wm();t-this.XRt>1e3&&(this.XRt=t,bu.Vm.BG(this.zit))}constructor(...t){super(...t),this.XRt=0}};r();var Kz=class extends Yz{get zit(){return this.rut()?this.yRt:this.zRt}rut(){return this.hS.length>=3}Jat(t,e){if(0===t)return;const i={jG:8*e/t,qRt:e};if(this.hS.push(i),this.YRt+=i.qRt,this.hS.length>30){const t=this.hS.shift();this.YRt-=t.qRt}const s=this.hS.slice().sort(((t,e)=>t.jG-e.jG));let n=0;for(let t=0;t<s.length;t++){const e=s[t];if(n+=e.qRt/this.YRt,this.yRt=e.jG,n>=.5)break}this.BG(),this._o(new me(qz.HRt))}constructor(t){super(),this.hS=[],this.YRt=0,this.zRt=t,this.yRt=t}};r();var Gt=class t extends Yz{Jat(t,e){const i=8*e/t;this.bRt.Jat(t,i),this.ARt.Jat(t,i),this.KRt+=e,this.BG(),this._o(new me(qz.HRt))}get zit(){return this.rut()?_.min(this.bRt.zit,this.ARt.zit):this.SRt}rut(){return this.KRt>=this.jRt}constructor(e=t.DRt,i=t.NRt,s=t.QRt,n=t.out){super(),this.KRt=0,this.jRt=s,this.bRt=new Wz(e),this.ARt=new Wz(i),this.SRt=n}};Gt.QRt=128e3,Gt.out=RR,Gt.DRt=.5,Gt.NRt=5;var jz=class{JRt(t){var e;null==(e=this.uut)||e.vn(qz.HRt,this.$Rt),this.uut=new Kz(t),this.uut.bn(qz.HRt,this.$Rt)}tCt(t){this.eCt.push(t)}iCt(t){_e(this.eCt,t)}get jG(){var t,e;return null!=(e=null==(t=this.uut)?void 0:t.zit)?e:this.sCt}get QG(){return this.nCt.zit}JG(t){if("segment"!==t.zw)return;if("video"!==t.PE)return;const e=[new Zz(this.nCt)];return this.uut&&("stream"===t.tE&&"initialization-segment"!==t.CE?e.push(new Xz(this.uut,1e3)):e.push(new Hz(this.uut))),new Gz(e)}constructor(t,e){this.eCt=[],this.$Rt=()=>{for(const t of this.eCt)t()},this.sCt=t>0?t:Gt.out,this.nCt=new Uz(Uz.DRt,Uz.NRt,e>0?e:Uz.out),this.JRt(this.sCt)}};r();var Qz=class{rCt(t,e){const i=e-t;(!this.oCt||i<this.oCt)&&(this.oCt=i)}hCt(t,e){this.aCt=e-t}uCt(t,e){this.cCt=e-t}lCt(t,e){this.dCt=e-t}get fCt(){const t=Ei([this.cCt,this.dCt].filter(ol),yo);return void 0!==t?As.Wm()/1e3+t:void 0!==this.aCt?As.Wm()/1e3+this.aCt:void 0!==this.oCt?As.Wm()/1e3+this.oCt:void 0}_Ct(t){const e=this.fCt;if(void 0!==e)return e-t}nr(){this.oCt=void 0,this.aCt=void 0,this.dCt=void 0,this.cCt=void 0}};r();var Jz=.25,$z=400,tq={minimumOffset:.2,targetOffset:.45,maximumOffset:.7,forceSeekOffset:3,minimumPlaybackRate:T,maximumPlaybackRate:_t},eq={minimumOffset:.4,targetOffset:.65,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:T,maximumPlaybackRate:_t},iq={minimumOffset:.4,targetOffset:.7,maximumOffset:.9,forceSeekOffset:3,minimumPlaybackRate:T,maximumPlaybackRate:_t},sq={minimumOffset:.2,targetOffset:.45,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:T,maximumPlaybackRate:_t},nq={minimumOffset:.5,targetOffset:1.125,maximumOffset:1.75,forceSeekOffset:2.55,minimumPlaybackRate:T,maximumPlaybackRate:_t};function rq(t){if(As.Rw.Pw){const e=($z+250)/1e3,i=_.max(e,t.minimumOffset),s=_.max(i+Jz,t.targetOffset),n=_.max(s+Jz,t.maximumOffset);return{minimumOffset:i,targetOffset:s,maximumOffset:n,forceSeekOffset:_.max(n+Jz,t.forceSeekOffset),minimumPlaybackRate:T,maximumPlaybackRate:_t}}return t}function oq(){let t;return t=As.Ys.Ap?sq:As.Ys.xp?eq:As.Ys.Ep?"Android"===As.Rw.Cw?iq:tq:nq,As.Rw.Pw?rq(t):t}r(),r(),r();var hq=class{vCt(t){for(const e of this.hIt)e[1]=e[1].jn(t)}gCt(t,e){let i=!0;for(const s of this.hIt){let n=s[1];n=n.TB(e),t===s[0]&&(n=n.AB(e),i=!1),s[1]=n.bB(1e-5)}i&&this.hIt.push([t,e])}mCt(t){for(const e of this.hIt)e[1]=e[1].TB(t)}pCt(t){for(let e=0;e<this.hIt.length;e++)if(this.hIt[e][1].wr(t))return this.hIt[e][0]}constructor(){this.hIt=[]}},aq=class extends So{get SI(){let t=ee.WB();for(const[,e]of this.wCt){const i=e.$it+e.aW,s=i+e.ct;t=t.AB(ee.VB(i,s))}return this.Krt.SI.AB(t)}pCt(t){return this.yCt.pCt(t)}get bCt(){return void 0!==this.ACt}get SCt(){return this.ACt?this.ACt.Xb:Promise.resolve()}async appendStream(t,e,i){if(this.bCt)throw new m("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const n=Gi(s,Fi.hp([i,this.G3.ep]),!1).ep;this.yCt.vCt(this.SI),this.ACt=new is;const r=gN(t).getReader();for(;;){const t=await Lu(r.read(),n);if(t.done)break;const i=t.value,s={zw:To.NJ,$k:gu(i.map((t=>t.Eut)))},o={ct:Mh(i,(t=>t.ct)),$it:i[0].svt,aW:-e.jht.TCt};await this.h3(s,o,n);const h=o.$it+o.aW,a=h+o.ct;this.yCt.gCt(e.jht,ee.VB(h,a))}}catch(t){s.error=t,s.hasError=!0}finally{ce(s)}}catch(t){throw e.kCt(),t}finally{e.ECt();const t=this.ACt;this.ACt=void 0,null==t||t.Zb()}}async r3(t,e,i,s){if(this.bCt)throw new m("Concurrent appends are not supported.");try{const n={stack:[],error:void 0,hasError:!1};try{const r=Gi(n,Fi.hp([s,this.G3.ep]),!1).ep;this.ACt=new is,await this.h3(t,e,r);const o=e.$it+e.aW,h=o+e.ct;this.yCt.vCt(this.SI),this.yCt.gCt(i,ee.VB(o,h))}catch(t){n.error=t,n.hasError=!0}finally{ce(n)}}finally{const t=this.ACt;this.ACt=void 0,null==t||t.Zb()}}async h3(t,e,i){this.Krt.j3===Fo.yE&&this.xCt.adt(t.$k,e.$it,e.$it+e.ct,e.aW,this.Fyt,!1);const s=this.aO.vO._O,n=this.Krt.SI.wr(this.aO.RI);if(s||n)return await this.ICt(i),await this.Krt.r3(t,e,i);this.wCt.push([t,e]);const r=this.wCt[0][1].$it;return this.wCt[this.wCt.length-1][1].$it-r>=.4?await this.ICt(i):void 0}async a3(t,e){if(this.bCt)throw new m("Concurrent appends are not supported.");try{const i={stack:[],error:void 0,hasError:!1};try{const s=Gi(i,Fi.hp([e,this.G3.ep]),!1).ep;this.ACt=new is,await this.ICt(s),await this.Krt.a3(t,{},s),this.Krt.j3===Fo.yE&&this.xCt.Tot(t.$k)}catch(t){i.error=t,i.hasError=!0}finally{ce(i)}}finally{const t=this.ACt;this.ACt=void 0,null==t||t.Zb()}}async rT(t,e,i){if(this.bCt)throw new m("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const n=Gi(s,Fi.hp([i,this.G3.ep]),!1).ep;this.ACt=new is,await this.ICt(n),await this.Krt.rT(t,e,n),this.yCt.mCt(ee.VB(t,e))}catch(t){s.error=t,s.hasError=!0}finally{ce(s)}}finally{const t=this.ACt;this.ACt=void 0,null==t||t.Zb()}}async OY(t){if(this.bCt)throw new m("Concurrent appends are not supported.");try{const e={stack:[],error:void 0,hasError:!1};try{const i=Gi(e,Fi.hp([t,this.G3.ep]),!1).ep;this.ACt=new is,await this.ICt(i)}catch(t){e.error=t,e.hasError=!0}finally{ce(e)}}finally{const t=this.ACt;this.ACt=void 0,null==t||t.Zb()}}async ICt(t){for(const[e,i]of this.wCt)await this.Krt.r3(e,i,t);En(this.wCt)}async Km(){for(this.G3.Km();this.bCt;)await this.SCt}constructor(t,e,i,s){super(),this.wCt=[],this.ACt=void 0,this.G3=new Fi,this.aO=e,this.Krt=t,this.Fyt=i,this.xCt=s,this.yCt=new hq,this.Krt.bn(xs.PJ,this.Ds)}};r(),r();var uq=class{async RCt(t,e){if(this.CCt>=this.PCt.maxRetries)throw t;const i=this.DCt(this.CCt++);await Ze(i,e)}DCt(t){let e=0;return 0!==t&&(e+=_.min(this.PCt.maximumBackoff,this.PCt.minimumBackoff*2**(t-1))),e}constructor(t){this.CCt=0,this.PCt=t}};r(),r();var cq=function(t){return t.NCt="emsgdata",t}({}),lq=class extends me{constructor(t,e){super("emsgdata"),this.value=t,this.data=e}};r();var dq=class{start(t){this.vJ=t}MCt(t){this.vJ.enqueue(t)}};r(),r();var fq=function(t){return t.LCt="initdata",t.MANIFEST_UPDATE="manifestupdate",t.BCt="timestamps:v1",t}({});var _q="urn:theo:hesp:2020";function vq(t){if(t.FL!==_q)return;const e=t.Fx;if(e===fq.LCt){return function(t){if(!t||!Vt(t))return;const e=t;return!Vr(e.index)||!Vr(e.offset)||e.index<0&&e.offset<0?void 0:{zw:"initdata",index:e.index,offset:e.offset}}(JSON.parse(Dn(sa(t.UL),new er)))}if(e===fq.MANIFEST_UPDATE){return function(t){if(!t||!Vt(t))return;const e=t;return!ol(e.url)||oi(e.url)?{zw:"manifestupdate",url:e.url}:void 0}(JSON.parse(Dn(sa(t.UL),new er)))}if(e===fq.BCt){const e=sa(t.UL),i=new er,s=no(e,i).toNumber()/t.RN,n=no(e,i).toNumber()/1e3,r=$e(e,i)/1e3;let o;return i.nc+8<=e.byteLength&&(o={hours:$e(e,i),minutes:zm(e,i),seconds:zm(e,i),frames:dn(e,i)}),{zw:fq.BCt,OCt:s,FCt:n,VCt:r,WCt:o}}}var gq=class extends dq{transform(t){if(t.zw===Ai.ED)try{const e=vq(Es.bN(t.$k));e&&this.UCt._o(new lq(e.zw,e))}catch(t){false}this.MCt(t)}Km(){this.UCt.Ro()}constructor(...t){super(...t),this.UCt=new So}};r();var mq=class{start(t){this.A_=new pq(t)}transform(t){this.A_.F$(t)}flush(){this.A_.W$()}},pq=class extends Lo{Y$(t){return!0}j$(t){this.vJ.enqueue(t)}J$(t){}constructor(t){super(),this.vJ=t}};r(),r();var wq=po.fromNumber(Eu);var yq=class extends So{async eE(t){for(;;)try{return await this.WW.eE(t)}catch(e){if(Se(e))throw e;await this.GCt.RCt(e,t.ep)}}constructor(t,e){super(),this.WW=t,this.GCt=e}};function bq(t,e,i,s,n,r,o,h){const a=new Cb;return n&&a.Dk(function(t,e){return void 0===e&&(e=wq),new Cb({Range:"bytes="+t.toString()+"-"+e.toString()})}(n.start,n.end)),{Xu:t,iE:a,DE:!1,ep:h,zw:Bn.aE,CE:i,PE:s,xE:r,RE:o,tE:e,BE:e===Te.Ik}}r(),r();var Aq=function(t){return t[t.INITIALIZER=0]="INITIALIZER",t[t.FRAMES=1]="FRAMES",t}({}),Sq=class extends dq{transform(t){this.ZCt.push(t),t.zw===Ai.TD&&this.HCt(this.ZCt.splice(0),Aq.FRAMES)}HCt(t,e){const i={RN:this.OA,SY:this.VY},s=gu(t.map((t=>Lr(t.$k.$k)))),n=Do(t,Tq),r=Es.cN(n.$k.$k)[0],o={PE:this.jat,Sb:i,Eut:s,zw:e,ct:this.jd(r)/this.OA,svt:fo(this.XCt(r),this.OA)};this.MCt(o)}jd(t){const e=t.Z[0];if(!e||0===e.RL.length)return 0;var i;const s=null!=(i=e.sN.wL)?i:0;return e.RL[0].BL.reduce(((t,e)=>{var i;return t+(null!=(i=e.ct)?i:s)}),0)}XCt(t){var e,i;return null!=(i=null==(e=t.Z[0].CL)?void 0:e.CL)?i:po.UZERO}constructor(t,e){super(),this.ZCt=[],this.VY=t,this.jat=this.VY.match(/video/)?Re.yE:Re.wE,this.OA=e}};function Tq(t){return t.zw===Ai.gD}r();var kq=class extends So{get jht(){return this.zCt}elt(t){return t+1}get qCt(){return!1}get YCt(){return this.KCt}get bCt(){return void 0!==this.ACt}get SCt(){return this.ACt?this.ACt.Xb:Promise.resolve()}Db(t){this.KCt=t,this.jCt=void 0,this.QCt=void 0}JCt(){return void 0!==this.jCt}async $Ct(){if(this.bCt)throw new m("Concurrent downloads are not supported.");try{this.ACt=new is;let t;if("now"===this.KCt)t=As.Ew(this.zCt.tPt("now"),this.zCt.ePt);else{const e=this.KCt,i=0===e?1:this.zCt.iPt(e);t=As.Ew(this.zCt.tPt(i),this.zCt.ePt)}const e=bq(t,Te.Ek,Cu.lE,this.jat,void 0,3e3,1e3,this.sPt.ep),i=await this.nPt.eE(e),s=await i.Bk(this.sPt.ep),n=new j(s),{rPt:r,LN:o}=function(t){const e=ci.KD(new mu(sa(t),new er)),i=Do(e,(t=>t.zw===Ai.RD||t.zw===Ai.gD));if(void 0===i)return{rPt:t,LN:void 0};const s=fi(t,0,i.nc),n=fi(t,i.nc);return{rPt:s,LN:0===n.byteLength?void 0:n}}(n),h=Es.cN(sa(n));this.OA=function(t){const e=Do(t,(t=>t.zw===Ai.kP));return e.Z[0].LN.sN.RN}(h);const a=function(t){const e=t.filter((t=>t.zw===Ai.ED)),i=e.map((t=>vq(t))),s=Do(i,(t=>(null==t?void 0:t.zw)===fq.LCt));if(!s)throw new m("No init data in init response");return s}(h);let u;if(this.jCt=a.index,this.QCt=a.offset,o){u=function(t,e,i){var s;const n=Do(t,(t=>t.zw===Ai.gD));var r;const o=fo(null!=(r=null==(s=n.Z[0].CL)?void 0:s.CL)?r:po.UZERO,i),h=n.Z[0];var a;const u=null!=(a=h.sN.wL)?a:0,c=h.RL[0],l=c.BL.reduce(((t,e)=>{var i;return t+(null!=(i=e.ct)?i:u)}),0)/i;return{$it:o,ct:l,aW:e}}(Es.cN(sa(n)),-this.jht.TCt,this.OA)}return{initialization:r,data:o,metadata:u}}finally{const t=this.ACt;this.ACt=void 0,null==t||t.Zb()}}oPt(){if(this.bCt)throw new m("Concurrent downloads are not supported.");this.ACt=new is;const t=void 0!==this.QCt?po.fromNumber(this.QCt):void 0;return Fb(this.hPt(this.jCt,t,this.sPt.ep)).pipeThrough(new Gh(new Sq(this.jht.SY,this.OA))).pipeThrough(new Gh(new Eq(this.sPt.ep)))}async hPt(t,e,i){const s=this.aPt(t,e,i);return(await this.nPt.eE(s)).Ok().pipeThrough(new Gh(new mq)).pipeThrough(new Gh(this.uPt))}aPt(t,e,i){const s=this.zCt.cPt(t),n=void 0!==e?{start:e,end:void 0}:void 0;return bq(As.Ew(s,this.zCt.ePt),Te.Ik,Cu.oE,this.jat,n,25e3,1e3,i)}kCt(){this.jCt=void 0,this.QCt=void 0}ECt(){void 0!==this.jCt&&(this.jCt=this.elt(this.jCt)),this.QCt=void 0;const t=this.ACt;this.ACt=void 0,null==t||t.Zb()}cancelDownload(){var t;this.sPt.np(),this.sPt=new Fi,this.ACt=null!=(t=this.ACt)?t:new is,this.kCt();const e=this.ACt;this.ACt=void 0,null==e||e.Zb()}async Km(){this.Ro(),this.uPt.Km(),this.sPt.np(),await this.SCt,this.jCt=void 0,this.QCt=void 0}constructor(t,e,i){super(),this.KCt="now",this.sPt=new Fi,this.ACt=void 0,this.zCt=t,this.GCt=new uq(i),this.uPt=new gq,this.uPt.UCt.bn(cq.NCt,this.Ds),this.WW=e,this.jat=function(t){switch(t){case Re.wE:return sA.wE;case Re.yE:return sA.yE;default:return sA.oE}}(t.zw),this.nPt=new yq(this.WW,this.GCt)}};var Eq=class{start(t){this.vJ=t,this.sp.Qm(this.lPt)}flush(){this.sp.Jm(this.lPt)}constructor(t){this.lPt=()=>{this.vJ.error(new vt)},this.sp=t}};function vn(t){var e;return t.value/(null!=(e=t.scale)?e:1)}r(),r(),r(),r(),r();var xq="{initId}",Iq=/{initId(?::0(?:\d+)d)?}/,Rq=/{segmentId(?::0(?:\d+)d)?}/,Cq=class{get o(){return this.jS}get jG(){return this.OG}get Tyt(){return this.dPt}get xct(){return this.Obt}get fPt(){return this._Pt}get vPt(){return this.gPt}get ePt(){return As.Ew(this.mPt,this.pPt.ePt)}get Frt(){return this.wPt}get Ch(){return this.iF}get yPt(){return this.bPt}get APt(){return this.SPt}get TCt(){return this.TPt}get kPt(){return this.Ibt}ir(t){this._Pt=t.activeSegment,this.gPt=t.activeSequenceNumber,this.Obt=t.segments}constructor(t,e,i){var s,n,r,o;this.Obt=[],this.AF=t,this.EPt=i,this.jS=t.id,this.OG=t.bandwidth,this.dPt=t.averageBandwidth,this.mPt=null!=(s=t.baseUrl)?s:"",this.wPt=null!=(n=t.codecs)?n:e.codecs,this.bPt=null!=(r=t.continuationPattern)?r:e.continuationPattern,this.SPt=null!=(o=t.initializationPattern)?o:e.initializationPattern,this.iF=t.label,this.TPt=t.mediaTimeOffset?vn(t.mediaTimeOffset):0,this.Ibt=t.segmentDuration?vn(t.segmentDuration):0,this.ir(t)}},Pq=class extends Cq{get zw(){return Re.wE}get pPt(){return this.EPt}get xPt(){return this.IPt}get Xdt(){return this.RPt}get wM(){return this.bA}get SY(){return'audio/mp4; codecs="'+this.Frt+'"'}constructor(t,e,i){var s,n,r,o;super(t,e,i),this.IPt=null!=(s=t.channels)?s:1,this.RPt=null!=(r=null!=(n=t.frameRate)?n:e.frameRate)?r:1024,this.bA=null!=(o=t.sampleRate)?o:e.sampleRate}},Dq=class extends Cq{get zw(){return Re.yE}get pPt(){return this.EPt}get CPt(){return this.Gp}get Xdt(){return this.RPt}get SY(){return'video/mp4; codecs="'+this.Frt+'"'}constructor(t,e,i){var s;super(t,e,i),this.Gp=t.resolution,this.RPt=vn(null!=(s=t.frameRate)?s:e.frameRate)}};function Nq(t,e){const i=String(e);if(t===xq||"now"===e)return i;const s=x(t.substring(9,t.lastIndexOf("d")));return Sa(i,s,"0")}function Mq(t,e){const i=String(e);if(t===xq)return i;const s=x(t.substring(12,t.lastIndexOf("d")));return Sa(i,s,"0")}var Lq=class{get vnt(){return this.PPt}get o(){return this.jS}get DPt(){return this.NPt}get ePt(){return As.Ew(this.mPt,this.vnt.ePt)}get Ch(){return this.iF}get TCt(){return this.TPt}get MPt(){return this.LPt}ir(t){for(const e of this.pC){const i=Do(t.tracks,(t=>e.o===t.id));i&&e.ir(i)}}constructor(t,e,i){var s;this.EPt=t,this.pC=i,this.PPt=e,this.jS=t.id,this.NPt=t.alignId,this.mPt=null!=(s=t.baseUrl)?s:"",this.iF=t.label,this.TPt=t.mediaTimeOffset?vn(t.mediaTimeOffset):0,this.LPt=t.protection,this.ir(t)}},Bq=class extends Lq{get pPt(){return this.EPt}get Z(){return this.pC}get gs(){return this.VA}get xPt(){return this.IPt}ir(t){var e,i;super.ir(t),this.VA=t.language,this.IPt=null!=(e=t.channels)?e:1,this.VY=null!=(i=t.mimeType)?i:"audio/mp4"}constructor(t,e){const i=[];super(t,e,i);for(const e of t.tracks)i.push(new Pq(e,t,this))}},Oq=class extends Lq{get pPt(){return this.EPt}get Z(){return this.pC}get BPt(){return this.EPt.captions}ir(t){var e;super.ir(t),this.VY=null!=(e=t.mimeType)?e:"video/mp4"}constructor(t,e){const i=[];super(t,e,i);for(const e of t.tracks)i.push(new Dq(e,t,this))}},Fq=class{get o(){return this.jS}get ePt(){return As.Ew(this.mPt,this.FPt.OPt)}get VPt(){return this.WPt}get RI(){return this.OH}get TY(){return this.Kf}get UPt(){return this.GPt}get ZPt(){return this.HPt}ir(t){var e;this.WPt=t.timeBounds,this.Kf=null!=(e=t.events)?e:[],this.OH=t.currentTime?vn(t.currentTime):void 0}constructor(t,e){var i,s,n;this.GPt=[],this.HPt=[],this.FPt=t,this.jS=e.id,this.mPt=null!=(i=e.baseUrl)?i:"";for(const t of null!=(s=e.audio)?s:[])this.GPt.push(new Bq(t,this));for(const t of null!=(n=e.video)?n:[])this.HPt.push(new Oq(t,this));this.ir(e)}},Vq=class{get QC(){return this.FPt}get XPt(){return this.zPt}get qPt(){return this.YPt}get KPt(){return this.jPt}get QPt(){return this.JPt}get $Pt(){return this.tDt}get V0(){return this.cA}get eDt(){return this.iDt}get OPt(){var t;return As.Ew(null!=(t=this.sDt)?t:"",this.nDt)}get rDt(){return this.oDt}ir(t){var e;this.zPt=vn(t.availabilityDuration),this.YPt=t.creationDate,this.jPt=t.fallbackPollRate,this.JPt=t.manifestVersion,this.cA=t.streamType,this.iDt=t.activePresentation,this.sDt=t.contentBaseUrl,this.oDt=null==(e=t.timeSource)?void 0:e.url,this.FPt=t;for(const e of t.presentations){const t=Do(this.tDt,(t=>t.o===e.id));t?t.ir(e):this.tDt.push(new Fq(this,e))}this.tDt=this.tDt.filter((e=>t.presentations.some((t=>t.id===e.o))))}constructor(t,e){this.tDt=[],this.nDt=t,this.FPt=e,this.ir(e)}};r(),r();var Wq=0,Uq=class extends So{get Lst(){return!0}get Tyt(){return this.hDt.Tyt}get jG(){return this.hDt.jG}get Frt(){return this.hDt.Frt}get o(){return this.hDt.o}get Ch(){var t;return null!=(t=this.hDt.Ch)?t:""}get OC(){return this.eF}get Iyt(){return this.hDt.ePt}get kyt(){}get SY(){return this.hDt.SY}get TCt(){return this.hDt.TCt}get ePt(){return this.hDt.ePt}get zw(){return this.hDt.zw}iPt(t){const e=(t-this.hDt.pPt.vnt.RI)*this.framesPerSecond();return _.round(this.hDt.vPt+e)}aDt(t){return t+1}tPt(t){var e;let i,s=this.hDt.APt;for(;i=null==(e=s.match(Iq))?void 0:e.pop();)s=s.split(i).join(Nq(i,t));return s+("now"===t?"?uuid="+se():"")}cPt(t){var e;let i,s=this.hDt.yPt;for(;i=null==(e=s.match(Rq))?void 0:e.pop();)s=s.split(i).join(Mq(i,t));return s}LW(){}MW(){}constructor(t){super(),this.eF=Wq++,this.hDt=t}},Gq=class extends Uq{get uDt(){return this.hDt}get Swt(){return this.hDt.wM}get Ht(){return this.AF}framesPerSecond(){return this.hDt.wM/this.hDt.Xdt}get wa(){return this.eu||(this.eu=bZ(this)),this.eu}constructor(t,e){super(t),this.eu=void 0,this.AF=e}},Zq=class extends Uq{get uDt(){return this.hDt}get Eyt(){return 0}get Xdt(){return this.hDt.Xdt}get Ti(){return this.hDt.CPt.height}get ji(){return this.hDt.CPt.width}get CPt(){return this.hDt.CPt}get Ht(){return this.AF}framesPerSecond(){return this.hDt.Xdt}get wa(){return this.eu||(this.eu=yZ(this)),this.eu}constructor(t,e){super(t),this.eu=void 0,this.AF=e}};r();var cn=function(t){return t.cDt="alternative",t.lDt="main",t.dDt="commentary",t.fDt="",t.EW="descriptions",t._Dt="main-desc",t.vDt="translation",t}({}),Eo=function(t){return t.cDt="alternative",t.lDt="main",t.dDt="commentary",t.fDt="",t.kW="captions",t.DC="sign",t.TW="subtitles",t}({}),Hq=0,Xq=class extends So{get BC(){return this.gDt()}get Rt(){return this.qe}set Rt(t){this.Rt!==t&&(this.qe=t,t&&this.mDt(),this.wDt.pDt(),this._o(new Pc(this)))}get wa(){return this.eu||(this.eu=xi(this)),this.eu}get Adt(){return this.yDt}get o(){return this.EPt.o}get OC(){return this.eF}get Ch(){var t;return null!=(t=this.EPt.Ch)?t:""}get LE(){return this.Rt?"enabled":"disabled"}set LE(t){"enabled"===t?this.Rt=!0:"disabled"===t&&(this.Rt=!1)}get VC(){return this.jO}get WC(){return this.Lct}set WC(t){this.Lct=t,this.wDt.pDt(),this._o(new HW(t,this))}nF(t){this.Rt=t}bDt(t){for(const e of this.jO.mC)e===t&&this._o(new $u(e))}constructor(t,e,i){super(),this.jO=new tl,this.eF=Hq++,this.qe=!1,this.Lct=void 0,this.EPt=e,this.wDt=i,this.yDt=new ZH(t,[]);for(const t of e.Z)this.jO.QO(this.createQuality(t))}},zq=class extends Xq{get zw(){return Re.wE}get Lt(){return cn.lDt}get gs(){return this.EPt.gs}get pPt(){return this.EPt}mDt(){this.wDt.ADt(this)}gDt(){const t=this.wDt.SDt;return(null==t?void 0:t.Ht)===this?t:void 0}createQuality(t){return new Gq(t,this)}constructor(t,e){super(Fo.wE,t,e)}},qq=class extends Xq{get zw(){return Re.yE}get Lt(){return Eo.lDt}get gs(){return""}get pPt(){return this.EPt}get BPt(){return this.EPt.BPt}mDt(){this.wDt.TDt(this)}gDt(){const t=this.wDt.kDt;return(null==t?void 0:t.Ht)===this?t:void 0}createQuality(t){return new Zq(t,this)}constructor(t,e){super(Fo.yE,t,e)}};function Yq(t,e,i,s){if(!t)return;const n=function(t,e,i){const s=[];for(const t of e){var n;const e=null!=(n=t.mimeType)?n:"audio/mp4";var r;const i=null!=(r=t.codecs)?r:t.tracks.map((t=>t.codecs))[0];s.push(e+'; codecs="'+i+'"')}return Kq(t,e,s,[],i)}(t,e?[e]:[],!s),r=function(t,e,i){const s=[];for(const t of e){var n;const e=null!=(n=t.mimeType)?n:"video/mp4";var r;const i=null!=(r=t.codecs)?r:t.tracks.map((t=>t.codecs))[0];s.push(e+'; codecs="'+i+'"')}return Kq(t,e,[],s,i)}(t,i?[i]:[],!s),o=vX(n,r);return t.preferredKeySystems&&(null==o?void 0:o.Kmt)&&(o.Kmt=TX(o.Kmt,t.preferredKeySystems)),o}function Kq(t,e,i,s,n){const r=e.map((t=>t.protection)).filter(ol);if(!r.length)return;const o=r[0].type,h=Ye(r,(t=>t.systems)),a=Ye(h,(t=>function(t,e){void 0===e&&(e=!0);const i=[],s=e?function(t){return im.filter((e=>e.Kw===t.toLowerCase()))}(t.schemeId):function(t){return em.filter((e=>e.Kw===t.toLowerCase()))}(t.schemeId);for(const e of s)i.push({lG:jq(t)?t.uri:void 0,_T:e,nZ:void 0,sZ:t.pssh?[Yu(t.pssh).buffer]:[],rZ:[]});return i}(t,n)));return{DU:t,jmt:{ATt:o},Kmt:a,STt:i,TTt:s}}function jq(t){return t.schemeId===Pg.Hw&&void 0!==t.keyFormat&&void 0!==t.keyFormatVersions}r(),r(),r();var Qq;function Jq(t){const e=t.RI,i=t.SI.BB(e);return i?i.Tn(0)-e:0}Qq="Android"===As.Rw.Cw?200:300;var $q=As.Ys.xp?1:.5,tY=class{Sn(){1!==this.Fa&&(this.Fa=1,this.EDt=As.lw((()=>{this.xDt()}),Qq),this.IDt.tCt(this.RDt),this.aO.JI?this.CDt.bn(Zc.uB,this.PDt):this.PDt())}NR(){0!==this.Fa&&(this.Fa=0,void 0!==this.EDt&&As.dw(this.EDt),this.IDt.iCt(this.RDt),this.CDt.vn(Zc.aB,this.DDt),this.CDt.vn(Zc.uB,this.PDt),this.NDt=void 0,this.qB())}get MDt(){return eY(this.LDt.SDt,this.LDt.kDt)}async xDt(){await this.BDt,this.BDt=this.ODt(),await this.BDt}FDt(t,e){var i,s;const n=this.VDt(t,e),r=this.WDt.eQ;if(r.type===ic.PERFORMANCE)return n[n.length-1];if(r.type===ic.QUALITY)return n[0];const o=(null==(i=r.metadata)?void 0:i.bitrate)?1.3*(null==(s=r.metadata)?void 0:s.bitrate):this.IDt.jG;for(const t of n){if(t.UDt<=o)return t}return n[n.length-1]}async ODt(){var t,e;const i=null==(t=this.LDt.SDt)?void 0:t.Ht,s=null==(e=this.LDt.kDt)?void 0:e.Ht,n=this.VDt(i,s);if(0===n.length)return void 0;const r=this.maybeSwitchToTargetQuality(n);if(r)return void await this.GDt(r);const o=this.maybeGetUpSwitch(n);o&&await this.GDt(o)}maybeSwitchToTargetQuality(t){const e=this.MDt;if(t.some((t=>iY(t,e))))return;const i=this.IDt.jG;for(const e of t){if(e.UDt<=i)return e}return t[t.length-1]}maybeGetUpSwitch(t){var e,i;const s=this.IDt.jG;var n;var r;const o=1.3*((null!=(n=null==(e=this.LDt.SDt)?void 0:e.jG)?n:0)+(null!=(r=null==(i=this.LDt.kDt)?void 0:i.jG)?r:0));let h;for(const e of t)if(e.UDt<s&&e.UDt>o){h={ZDt:e,Rft:As.Wm()};break}if(!this.NDt||!iY(this.NDt.ZDt,null==h?void 0:h.ZDt))return void(this.NDt=h);const a=As.Wm()-this.NDt.Rft,u=this.NDt.ZDt.UDt,c=this.HDt.length>=3&&this.HDt.every((t=>t>u));if(a>1e3&&c){if(this.aO.vO._O||As.Ys.Ap){const t=2*this.IDt.QG;if(!(Jq(this.aO)>t))return}else{const t=_.max(2*this.IDt.QG+$q,this.mZ.GB.minimumOffset);if(!(Jq(this.aO)>t))return void(this.XDt&&this.XDt.minimumOffset===t||(this.qB(),this.XDt={minimumOffset:t},this.mZ.HB(this.XDt)))}return this.NDt.ZDt}}async GDt(t,e){void 0===e&&(e=!1),this.NDt=void 0,this.qB();const i=this.MDt;if(i.zDt===t.zDt&&i.qDt===t.qDt)return;const s=t.zDt,n=t.qDt;i.qDt&&n&&i.qDt.jG>n.jG&&e&&(this.IDt.JRt(t.UDt),this.HDt=[]),await this.LDt.YDt(n,s)}qB(){this.XDt&&(this.mZ.qB(this.XDt),this.XDt=void 0)}VDt(t,e){let i=[],s=[];var n;t&&(i=(null==(n=t.WC)?void 0:n.length)?t.WC:t.VC.mC);if(e){var r;const t=(null==(r=e.WC)?void 0:r.length)?e.WC:e.VC.mC,i=t.slice().sort(((t,e)=>t.jG-e.jG)),n=this.KDt(i);0===n.length&&t.length>0&&n.push(Ei(t,(t=>t.jG))),s=n}const o=[],h=i.length>0?i:[void 0],a=s.length>0?s:[void 0];for(const t of h)for(const e of a)o.push(eY(t,e));return function(t){return t.sort(((t,e)=>e.UDt-t.UDt))}(o)}KDt(t){const e=Do(t,(t=>t.Ti>=this.aO.Ti&&t.ji>=this.aO.ji));return e?t.filter((t=>t.Ti<=e.Ti&&t.ji<=e.ji)):t.slice()}Km(){this.NDt=void 0,this.CDt.nr(),this.qB()}constructor(t,e,i,s,n,r){this.aO=t,this.mZ=e,this.LDt=i,this.jDt=s,this.IDt=n,this.WDt=r,this.Fa=0,this.BDt=Promise.resolve(),this.HDt=[],this.XDt=void 0,this.DDt=()=>{var t,e;if(this.jDt.dR)return;const i=null==(t=this.LDt.SDt)?void 0:t.Ht,s=null==(e=this.LDt.kDt)?void 0:e.Ht,n=Ei(this.VDt(i,s),(t=>t.UDt));n&&(uh(this.GDt(n,!0)),this.aO.vO._O&&this.jDt.JC())},this.PDt=()=>{this.CDt.bn(Zc.aB,this.DDt),this.CDt.vn(Zc.uB,this.PDt)},this.RDt=()=>{if(this.HDt.unshift(this.IDt.jG),this.HDt=this.HDt.slice(0,3),this.NDt){const t=this.NDt.ZDt.UDt;this.IDt.jG<t&&(this.NDt=void 0,this.qB())}},this.CDt=new I(this.aO)}};function eY(t,e){var i;var s;return{zDt:t,qDt:e,UDt:1.3*((null!=(i=null==t?void 0:t.jG)?i:0)+(null!=(s=null==e?void 0:e.jG)?s:0))}}function iY(t,e){var i,s,n,r;return void 0===t||void 0===e?t===e:(null==(i=t.zDt)?void 0:i.o)===(null==(s=e.zDt)?void 0:s.o)&&(null==(n=t.qDt)?void 0:n.o)===(null==(r=e.qDt)?void 0:r.o)&&t.UDt===e.UDt}r();var sY=class t{static async create(e,i,s){const n=await nY(e,i,s);return new t(n,e,i)}get hbt(){return(this.QDt.serverTimeMs+(As.Wm()-this.QDt.localTimeMs))/1e3}get JDt(){return(this.QDt.localTimeMs-this.QDt.serverTimeMs)/1e3}async JIt(t,e,i){for(;!i.zm;){await Ze(6e5,i);try{this.QDt=await nY(t,e,i)}catch(t){ih(t)}}}Km(){this.zT.np()}constructor(t,e,i){this.zT=new Fi,this.QDt=t,this.JIt(e,i,this.zT.ep).catch(M)}};async function nY(t,e,i){let[s,n,r]=await rY(t,e,i);return n>20&&([s,n,r]=await rY(t,e,i)),{localTimeMs:s,serverTimeMs:r-n/2}}async function rY(t,e,i){const s=As.Wm(),n=await e.eE({EE:Ce.GET,Xu:t,ep:i}),r=As.Wm()-s,o=await n.Mk(i);return[s,r,1e3*Number(o)]}var oY=class extends me{constructor(){super("seek")}},hY=function(t){return t.oX="seek",t}({}),aY=[ns.ho,Zc.aC,ns._b],uY=class extends So{get QC(){return this.FPt}get SI(){return this.$Dt&&this.tNt?this.$Dt.SI.jn(this.tNt.SI):this.$Dt?this.$Dt.SI:this.tNt?this.tNt.SI:ee.WB()}get SDt(){return this.eNt}get kDt(){return this.iNt}get ht(){return this.LO}get rt(){return this.FO}get sNt(){return this.nNt.Xb}get W(){return this.rNt.Xb}get cR(){return this.FPt?function(t,e,i){var s;const n=null==(s=t.$Pt[0])?void 0:s.RI,r=t.XPt;if(void 0===n||void 0===r)return i>0&&i<Eu?new ee([0,i],[!0,!0]):ee.WB();let o=e.fCt;if(!o){const e=XG(t.qPt).getTime()/1e3;o=n+(Date.now()/1e3-e)}return new ee([o-r,o],[!0,!0])}(this.FPt,this.oNt,this.aO.ct):ee.WB()}async hNt(){this.$Dt&&await this.$Dt.rT(0,1/0),this.tNt&&await this.tNt.rT(0,1/0)}$n(){if(!this.Sc.src)throw new Z(Ci.SOURCE_INVALID,"No src property found in given source.");this.ipt||(this.ipt=this.ix(this.GW.ep).catch(this.T9))}async ix(t){this._o(new ts);const e=this.Sc.src,i=await this.aNt.gRt(e,t);this.FPt=new Vq(e,i),this.FPt.rDt&&(this.uNt=await sY.create(this.FPt.rDt,this.WW,t)),this.cNt();const s=Jr(this.FPt.$Pt,-1);this.createTracksForPresentation(s),this.nNt.Zb(),this.pDt()}ADt(t){for(const e of this.LO.mC)e.nF(e===t)}TDt(t){for(const e of this.FO.mC)e.nF(e===t)}pDt(){const t=Do(this.LO.mC,(t=>t.Rt)),e=Do(this.FO.mC,(t=>t.Rt)),i=this.XH.FDt(t,e);uh(this.YDt(i.qDt,i.zDt))}cNt(){if(!this.FPt||"live"!==this.FPt.V0||!this.uNt)return;const t=this.FPt.$Pt.filter((t=>t.o===this.FPt.eDt))[0].RI,e=this.uNt.JDt+new Date(this.FPt.qPt).getTime()/1e3;this.oNt.hCt(e,t)}createTracksForPresentation(t){var e,i,s,n;for(const e of null!=(s=t.UPt)?s:[])this.LO.tt(new zq(e,this));for(const e of null!=(n=t.ZPt)?n:[])this.FO.tt(new qq(e,this));null==(e=this.LO.wC(0))||e.nF(!0),null==(i=this.FO.wC(0))||i.nF(!0)}get qC(){return Ei([this.lNt,this.dNt].filter(ol),(t=>t.theolive))}get YC(){return this.lNt}get KC(){return this.dNt}get fNt(){const t=this.oNt.fCt;if(void 0!==t)return t}Sn(){this._Nt=!0,this.vNt()}NR(){var t;this._Nt=!1,this.gNt().catch(this.T9),"live"===(null==(t=this.QC)?void 0:t.V0)&&(this.mNt(),this.pNt())}mNt(){this.wNt&&this.wNt.cancelDownload()}pNt(){this.yNt&&this.yNt.cancelDownload()}JC(t){this.V8.np(),this.V8=new Fi,this.W8=gf((e=>this.bNt(t,this.W8,e)),this.V8).catch(this.T9)}async bNt(t,e,i){if(e&&await e,await Lu(this.W,i),"live"!==this.FPt.V0)throw new m("The current video source does not support Live playback.");if(Io(i),await this.gNt(),Io(i),this.wNt&&(this.wNt.JCt()||this.wNt.YCt!==(null!=t?t:"now"))){var s;if(this.mNt(),this.$Dt){for(;this.$Dt.bCt;)await Lu(this.$Dt.SCt,i);await this.$Dt.rT(0,1/0)}null==(s=this.wNt)||s.Db(null!=t?t:"now")}if(this.yNt&&(this.yNt.JCt()||this.yNt.YCt!==(null!=t?t:"now"))){var n;if(this.pNt(),this.tNt){for(;this.tNt.bCt;)await Lu(this.tNt.SCt,i);await this.tNt.rT(0,1/0)}null==(n=this.yNt)||n.Db(null!=t?t:"now")}this._o(new oY),Io(i),this.W8=void 0,this.vNt()}Db(t){this.V8.np(),this.V8=new Fi,this.W8=gf((e=>this.U8(t,this.W8,e)),this.V8).catch(this.T9)}async U8(t,e,i){var s,n;e&&await e,await Lu(this.W,i),Io(i),await this.gNt(),Io(i),this.wNt&&(this.wNt.JCt()||this.wNt.YCt!==t)&&this.mNt(),this.yNt&&(this.yNt.JCt()||this.yNt.YCt!==t)&&this.pNt(),this._o(new oY),Io(i),null==(s=this.wNt)||s.Db(t),null==(n=this.yNt)||n.Db(t),this.W8=void 0,this.vNt()}YDt(t,e){var i,s;return(null==(i=this.wNt)?void 0:i.jht)===e&&(null==(s=this.yNt)?void 0:s.jht)===t?Promise.resolve():(this.ANt.np(),this.ANt=new Fi,this.SNt=gf((i=>this.TNt(t,e,this.SNt,i)),this.ANt).catch(this.T9),this.SNt)}async TNt(t,e,i,s){var n,r;i&&await i,await Lu(this.nNt.Xb,s),Io(s),await this.gNt(),Io(s),await this.kNt(t,e),await this.ENt(t,e),Io(s);for(const e of null!=(r=null==t||null==(n=t.Ht)?void 0:n.BPt)?r:[])this.xNt.cmt({Det:e.channel,Net:e.language,Ch:e.label});this.SNt=void 0,this.vNt()}async kNt(t,e){var i,s,n;const r=null!=(n=this.fNt)?n:"now";if((null==(i=this.wNt)?void 0:i.jht)!==e){var o;const t=this.wNt&&!this.wNt.JCt(),i=null==(o=this.wNt)?void 0:o.YCt;if(this.wNt&&(await this.wNt.Km(),this.wNt=void 0),this.$Dt&&await this.$Dt.SCt,e){var h,a;const s=null!=(a=null==(h=this.$Dt)?void 0:h.SI)?a:ee.WB(),n=t?i:s.Tn(s.V-1);this.wNt=new kq(e,this.WW,this.Wlt),this.wNt.bn(cq.NCt,(t=>this.INt(Fo.wE,t))),this.wNt.Db(null!=n?n:r)}}if((null==(s=this.yNt)?void 0:s.jht)!==t){var u;const e=this.yNt&&!this.yNt.JCt(),i=null==(u=this.yNt)?void 0:u.YCt;if(this.yNt&&(await this.yNt.Km(),this.yNt=void 0),this.tNt&&await this.tNt.SCt,t){var c,l;const s=null!=(l=null==(c=this.tNt)?void 0:c.SI)?l:ee.WB(),n=e?i:s.Tn(s.V-1);this.yNt=new kq(t,this.WW,this.Wlt),this.yNt.bn(cq.NCt,(t=>this.INt(Fo.yE,t))),this.yNt.Db(null!=n?n:r)}}}async ENt(t,e){const i=function(t,e,i,s,n){const r=Yq(t,null==e?void 0:e.Ht.pPt.pPt,null==i?void 0:i.Ht.pPt.pPt,s),o=bX(r),h=[];e&&h.push({Fk:e.SY});i&&h.push({Fk:i.SY});return{zw:De.qW,J4:h,CZ:o,u5:n&&!s}}(this.Sc.contentProtection,e,t,this.aO.vO._O,this.Sc.useManagedMediaSource);if(this.kZ&&this.kZ.ZJ(i)){var s,n;const t=!(null==(s=this.wNt)?void 0:s.JCt());if(this.$Dt&&t){for(;this.$Dt.bCt;)await this.$Dt.SCt;await this.$Dt.OY()}const e=!(null==(n=this.yNt)?void 0:n.JCt());if(this.tNt&&e){for(var r,o;null==(r=this.tNt)?void 0:r.bCt;)await this.tNt.SCt;await(null==(o=this.tNt)?void 0:o.OY())}await this.kZ.XJ(i)}else{this.mNt(),this.pNt(),this.$Dt&&(await this.$Dt.Km(),this.$Dt=void 0),this.tNt&&(await this.tNt.Km(),this.tNt=void 0),this.aO.Q7();try{await this.aO.nr(),this.kZ=await this.aO.$n(i),this.rNt.Zb(),this.kZ.d4&&this.wNt&&(this.kZ.d4.bn(xs.PJ,this.Ds),this.$Dt=new aq(this.kZ.d4,this.aO,e,this.xNt)),this.kZ.f4&&this.yNt&&(this.kZ.f4.bn(xs.PJ,this.Ds),this.tNt=new aq(this.kZ.f4,this.aO,t,this.xNt)),"live"===this.FPt.V0&&this.kZ.q4(1/0)}finally{this.aO.J7()}}}vNt(){!this._Nt||this.W8||this.SNt||this.RNt||this.CNt||(this.XH.Sn(),this.PNt=new Fi,this.yNt&&this.tNt&&(this.RNt=this.DNt(this.yNt,this.tNt,this.PNt.ep).catch(this.T9)),this.wNt&&this.$Dt&&(this.CNt=this.DNt(this.wNt,this.$Dt,this.PNt.ep).catch(this.T9)))}async gNt(){this.XH.NR(),this.PNt&&(this.PNt.np(),this.PNt=void 0),this.RNt&&(await this.RNt,this.RNt=void 0),this.CNt&&(await this.CNt,this.CNt=void 0)}async DNt(t,e,i){for(await this.W;t.bCt;)await Lu(t.SCt,i);for(;e.bCt;)await Lu(e.SCt,i);if(!t.JCt()){const i=As.Wm()/1e3,s="now"===t.YCt,{initialization:n,data:r,metadata:o}=await t.$Ct(),h={zw:To.NJ,$k:n},a=r?{zw:To.NJ,$k:r}:void 0,u=e.SI;!As.Ys.Tp&&!this.aO.vO._O&&o&&u.Tn(u.V-1)>o.$it&&await e.rT(o.$it,1/0),await e.a3(h),a&&await e.r3(a,o,t.jht);const c=e.SI.TB(u);s&&c.V>0&&this.oNt.rCt(i,c.Tn(c.V-1))}for(;!t.qCt;){Io(i);const s=t.oPt();await Lu(e.appendStream(s,t),i)}}async Km(){this.GW.np(),this.ipt&&await this.ipt.catch(M),this.W8&&(this.V8.np(),this.mNt(),this.pNt(),await this.W8.catch(M)),this.SNt&&(this.ANt.np(),this.mNt(),this.pNt(),await this.SNt.catch(M)),await this.gNt(),this.wNt&&await this.wNt.Km(),this.yNt&&await this.yNt.Km(),this.wNt=void 0,this.yNt=void 0,this.rNt.np(),this.nNt.np(),this.kZ&&(await this.aO.nr(),this.kZ=void 0),this.$Dt=void 0,this.tNt=void 0,this.aO.vn(Zc.uB,this.fO),this.aO.vn(aY,this.updateActiveQualities),this.LO.nr(),this.eNt=void 0,this.FO.nr(),this.iNt=void 0,this.FPt=void 0,this.uNt&&(this.uNt.Km(),this.uNt=void 0),this._Nt=!1}constructor(t,e,i,s,n,r,o,h,a,u,c){super(),this._Nt=!1,this.NNt=!1,this.LO=new an,this.FO=new an,this.MNt=void 0,this.eNt=void 0,this.iNt=void 0,this.nNt=new is,this.kZ=void 0,this.ipt=void 0,this.rNt=new is,this.GW=new Fi,this.SNt=void 0,this.ANt=new Fi,this.W8=void 0,this.V8=new Fi,this.wNt=void 0,this.$Dt=void 0,this.CNt=void 0,this.yNt=void 0,this.tNt=void 0,this.RNt=void 0,this.PNt=void 0,this.fO=()=>{this.NNt=!0},this.updateActiveQualities=()=>{var t,e;const i=this.aO.RI,s=null==(t=this.$Dt)?void 0:t.pCt(i),n=null==(e=this.tNt)?void 0:e.pCt(i);if(this.eNt!==s&&(this.eNt=s,s))for(const t of this.LO.mC)t.bDt(s);if(this.iNt!==n&&(this.iNt=n,n))for(const t of this.FO.mC)t.bDt(n)},this.INt=(t,e)=>{const i=e.data;if(i.zw===fq.BCt){const{FCt:e,VCt:n,OCt:r,WCt:o}=i;if(this.uNt){const i=this.uNt.hbt,s=this.aO.RI;if(this.NNt&&0!==s){const o={theolive:i-e+r-s,engine:n,distribution:_.max(i-(e+n),0),player:_.min(r-s,this.mZ.GB.forceSeekOffset)};t===Fo.wE?(this.dNt=o,this.oNt.lCt(this.uNt.JDt+e,r)):(this.lNt=o,this.oNt.uCt(this.uNt.JDt+e,r))}}var s;if(o)null!=this.MNt||(this.MNt=this.aO.ZR(Hi.xW,"timecode","timecode",void 0,!1,Hr.DEFAULT,!1,void 0)),this.MNt.UW(new He(r,r,o,!1,void 0)),go(this.MNt,null!=(s=this.aO.SI.Sn(0))?s:-1)}this._o(e)},this.T9=t=>{Se(t)||(this.NR(),this._o(new Pi(new Z(Ci.MEDIA_LOAD_ERROR,t.message))))},this.Sc=t,this.aNt=e,this.aO=i,this.WW=n,this.oNt=r,this.XH=new tY(i,o,this,a,s,c),this.Wlt=h,this.xNt=u,this.mZ=o,this.aO.bn(Zc.uB,this.fO),this.aO.bn(aY,this.updateActiveQualities)}};r();var cY=class extends BT{pO(){const t=this.aO.SI;return 0===t.V?0:t.Tn(t.V-1)-this.aO.RI}JC(){this.na.JC()}wO(t,e,i){if(t>i+2){const i=t-e;if(i<=this.lastAmountToSeekForward&&!this.na.dR)return this.na.RI+=i,this.lastAmountToSeekForward=0,!0;this.lastAmountToSeekForward=i}else this.lastAmountToSeekForward=0;return!1}YB(){return rq(super.YB())}yO(){return!As.Ys.Ap}constructor(t,e,i){super(t,e,i),this.lastAmountToSeekForward=0}},lY=[ns.$y,ns.jy,ns._b,ns.Ly,ns.Qy,ns.vb,ns.Dy,ns.Fy,ns.By,ns.Ry,ns.Iy],dY=class extends So{kC(){this.aO.bn(lY,this.Ds),this.aO.bn(Zc.uB,this.iz),this.aO.bn([ns.ho,ns.Ky],this.LNt),this.aO.bn(bo.fa,this.BNt),this.aO.bn(ns._b,this.pd),this.ZZ.bn(co,this.Ds)}SC(){this.aO.vn(lY,this.Ds),this.aO.vn(Zc.uB,this.iz),this.aO.vn([ns.ho,ns.Ky],this.LNt),this.aO.vn(bo.fa,this.BNt),this.aO.vn(ns._b,this.pd),this.ZZ.vn(co,this.Ds)}get ht(){return this.LO}get rt(){return this.FO}get QC(){var t,e;return null==(e=this.LDt)||null==(t=e.QC)?void 0:t.QC}get yR(){return this.aO.yR}set yR(t){this.aO.yR=t}get ER(){return!1}set ER(t){}get IZ(){return this.RZ}MR(){return!1}xR(){return this.aO.Sa}ja(){return this.aO.WZ}ZR(t){return this.aO.UZ(t)}be(){this.aO.be()}ge(){return this.aO.ge()}FR(){}WR(){}LR(){}OR(){}get qI(){return this.aO.qI}set qI(t){this.aO.qI=t}get RI(){var t;return null!=(t=this.ONt)?t:this.aO.RI}set RI(t){this.DI(t)}DI(t,e){this.V8.np(),this.V8=new Fi,this.W8=gf((e=>this.U8(t,e,this.W8)),this.V8)}get kI(){const t=this.FNt();if(t)return new Date(t.getTime()+1e3*this.RI)}set kI(t){const e=this.FNt();t&&e&&(this.RI=e.getTime()-t.getTime())}FNt(){const t=this.QC;if(!t)return;const e=new Date(t.creationDate).getTime();let i=NaN;for(const e of t.presentations)e.currentTime&&(i=e.currentTime.value/(e.currentTime.scale||1)*1e3);return S(i)?void 0:new Date(e-i)}get bt(){return this.Sc}get tR(){return this.aO.tR}set tR(t){this.aO.tR=t}get ct(){const t=this.aO.ct;return t===Eu?1/0:t}get MI(){return!1}get OI(){return this.AZ}get lt(){return this.bZ}get VI(){return this.VNt}get UI(){}get ZI(){return!1}get XI(){return ne({},{WO:0,UO:0,GO:0,ZO:0,HO:0,XO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.aO.zI())}get jI(){return!0}get dR(){return this.FH}get EZ(){}get nt(){return this.Hl}get vR(){return this.aO.vR}get pR(){return this.aO.pR}get SI(){return this.Tkt.ks()}get Tkt(){return this.LDt?this.LDt.SI:ee.WB()}get sR(){return this.aO.sR.ks()}get cR(){var t,e;return null!=(e=null==(t=this.LDt)?void 0:t.cR.ks())?e:ee.WB().ks()}get JI(){return this.kst}get jC(){return!0}get SR(){return this.zH}get fNt(){var t;return null==(t=this.LDt)?void 0:t.fNt}get mO(){if(this.JI)return;if(!this.NNt)return;const t=this.RI,e=this.oNt._Ct(t);if(void 0===e)return;const i=this.Tkt;let s=0;if(i.V>0){const e=i.Tn(i.V-1);s=_.max(e-t,0)}return _.max(e,s)}get qC(){var t;return null==(t=this.LDt)?void 0:t.qC}get YC(){var t;return null==(t=this.LDt)?void 0:t.YC}get KC(){var t;return null==(t=this.LDt)?void 0:t.KC}get aR(){return this.aO.aR}get rR(){return this.WNt}set rR(t){this.WNt=t,this.UNt()}async UNt(){this.WNt!==hi.xH&&this.LDt&&(this.LDt.$n(),this.WNt!==hi.bO&&this.WNt!==hi.KG||(await this.LDt.sNt,"vod"===this.LDt.QC.V0&&this.LDt.Sn()))}async Ca(t,e,i){if(Io(i),await this.nr(),Io(i),!$T(t))return this.AZ=new Z(Ci.SOURCE_INVALID,"HESP source incorrectly configured"),this.bZ=Zs(this.AZ),this.GNt(this.AZ),Promise.resolve();const s=t;this.Sc=s;const n=new Fz(this.WW);this.ZNt=this.HNt(t),this.mZ=new cY(this,this.aO,this.ZNt),this.mZ.Rt=!0,this.mZ.bn("latencyrecoveryseek",this.Ds),this.SR.Aa(this.mZ),this.LDt=new uY(s,n,this.aO,this.RZ,this.WW,this.oNt,this.mZ,this.Wlt,this,this.xNt,this.XH),this.LDt.bn(ns.Hy,this.Ds),this.LDt.bn(bo.fa,this.XNt),this.LO.bC=this.LDt.ht,this.FO.bC=this.LDt.rt,this.MZ.tZ(t.contentProtection),uh(this.UNt())}HNt(t){return t.latencyConfiguration?t.latencyConfiguration:oq()}async DR(){var t;if(!this.LDt)return;this.kst=!1,this.LDt.$n(),await this.LDt.W,this._o(new he(this.RI));const e=this.LDt.Ay(hY.oX);this.JC(),await e,this.LDt.Sn(),await this.aO.DR(),null==(t=this.mZ)||t.Sn()}PR(){var t;this.LDt&&(this.kst=!0,this._o(new nl(this.RI)),this.LDt.NR(),null==(t=this.mZ)||t.NR(),this.aO.PR())}JC(){if(this.txt)throw new m("Cannot seek while resetting");this.V8.np(),this.V8=new Fi,this.W8=gf((t=>this.bNt(this.W8,t)),this.V8)}async U8(t,e,i){if(this.txt)throw new m("Cannot seek while resetting");let s=t;if(this.zNt(s),this.cR.length>0&&(s=ee.Cn(this.cR).mB(s),this.zNt(s)),this.LDt){i&&(await i.catch(M),Io(e));try{const t=this.aO.Ay(ns.eb,e);this.aO.Db(s),this.LDt.Db(s),await t}catch(t){throw ih(t),this.LDt.NR(),this.qNt(),t}this.YNt()}}async bNt(t,e){this._o(new me("golive"));const i=this.fNt;if(this.zNt(i),this.LDt){t&&(await t.catch(M),Io(e));try{let t,s=this.mZ.GB.targetOffset;if(await this.LDt.sNt,i&&s>=1){if(!this.mZ.yO()){s-=_.min(1,.5*s)}t=i-s}else t=this.fNt?this.fNt-.2:void 0;for(this.LDt.JC(t);this.Tkt.V>0;)await this.LDt.Ay(xs.PJ,e);const n=this.Tkt;for(;0===this.Tkt.TB(n).V;)await this.LDt.Ay(xs.PJ,e);t=this.Tkt.Sn(this.Tkt.V-1),t=this.KNt(t),this.zNt(t);const r=this.aO.Ay(ns.eb,e);this.aO.Db(t,!0),await r}catch(t){var s;if(Se(t))throw null==(s=this.mZ)||s.Sn(),t;throw this.LDt.NR(),await this.LDt.hNt(),this.qNt(),t}this.YNt()}}zNt(t){this.FH=!0,this.ONt=t,this._o(new Al(this.RI))}YNt(){this.FH&&(this.ONt=void 0,this.FH=!1,this._o(new Be(this.RI)))}qNt(){this.ONt=void 0,this.FH=!1}KNt(t){return t}jNt(){var t;null==(t=this.LDt)||t.NR()}GNt(t){this._o(new Pi(t)),this.jNt()}async ixt(t,e,i){var s;Io(i),t&&await t.catch(M),e&&await e.catch(M),await this.xNt.nr(),null==(s=this.mZ)||s.NR(),this.LDt&&(await this.LDt.Km(),this.LDt=void 0),Io(i),await this.aO.nr(),Io(i),this.aO.GZ(),this.FO.nr(),this.LO.nr(),this.qNt(),this.ZZ.nr(),this.oNt.nr(),this.AZ=void 0,this.bZ=void 0,this.kst=!0,this.NNt=!1,this.Sc=void 0,this.txt=void 0,this.ZNt=void 0}nr(){return this.V8.np(),this.V8=new Fi,this.QNt.np(),this.QNt=new Fi,this.txt=this.ixt(this.W8,this.txt,this.QNt.ep),this.txt}async yn(){var t,e;this.SC(),this.ZZ.yn(),this.Sc&&await this.nr(),this.Ro(),this.aO.zZ=void 0,null==(t=this.mZ)||t.vn("latencyrecoveryseek",this.Ds),null==(e=this.mZ)||e.Km(),await this.xNt.yn(),this.Hl.yn(),this.LO.yn(),this.FO.yn()}constructor(t,e,i,s,n){var r;super(),this.LDt=void 0,this.FH=!1,this.V8=new Fi,this.W8=void 0,this.txt=void 0,this.QNt=new Fi,this.kst=!0,this.NNt=!1,this.LO=new pS,this.FO=new pS,this.AZ=void 0,this.bZ=void 0,this.WNt=hi.xH,this.pd=()=>{const t=this.SI;t.length>0&&this.xNt.PW(t.start(0))},this.LNt=()=>{this.aO.JI!==this.kst&&(this.aO.JI?this.PR():this.DR().catch(M))},this.iz=()=>{this.NNt=!0},this.XNt=t=>{this.AZ=t.errorObject,this.bZ=Zs(this.AZ),this.GNt(this.AZ)},this.BNt=t=>{this.AZ=xk(t.lt),this.bZ=t.lt,this.GNt(this.AZ)},this.aO=t,this.ZZ=new I(this.aO,!0),this.WW=e,this.XH=i,this.RZ=new jz(i.oQ,i.Zj.QG),this.MZ=new Jh(e),this.aO.zZ=this.MZ,n.allowNativeFullscreen?this.xNt=new uG(this.aO):this.xNt=new ft(this.aO),this.Hl=new uu([this.xNt.Z]),this.oNt=new Qz,this.VNt=new Vz(this),this.zH=s,this.Wlt=ne({},n.retryConfiguration,{maxRetries:null!=(r=n.retryConfiguration.maxRetries)?r:3}),this.kC()}},fY=class extends dY{_o(t){if(this.JNt){if(t.type===ns.eb)return void this.$Nt();if(t.type===Zc.aB||t.type===ns.ib||t.type===Zc.uB)return void this.tMt.push(t)}super._o(t)}$Nt(){this.JNt=!1,void 0!==this.eMt&&As.Um(this.eMt);const t=Do(this.tMt,(t=>t.type===Zc.uB));t&&super._o(t),En(this.tMt)}IR(){if(dV(this.aO))return this.aO.IR()}async nr(){this.iMt=!1,this.$Nt(),await super.nr()}async yn(){h.removeEventListener("visibilitychange",this.sMt),this.$Nt(),await super.yn(),await this.aO.Km(),await this.YZ.qZ(this.nMt)}KNt(t){return Ya.$g&&Ya.nm>=15&&Ya.Kv?t+.25:t}constructor(t,e,i,s,n,r){super(t,e,i,s,r),this.iMt=!1,this.JNt=!1,this.tMt=[],this.eMt=void 0,this.sMt=()=>{const t=this.qI||0===this.yR;"hidden"===h.visibilityState&&!this.JI&&t?(this.PR(),this.iMt=!0):"visible"===h.visibilityState&&this.iMt&&(this.JNt=!0,this.eMt=As.Gm((()=>{for(const t of this.tMt)super._o(t);this.eMt=void 0,this.JNt=!1}),2e3),uh(this.DR()),this.iMt=!1)},this.YZ=n,this.nMt=t,Ya.Bm&&h.addEventListener("visibilitychange",this.sMt)}};r();var _Y=class{get vH(){return CR.oP}async dH(t,e){return function(t){if(!t)return!1;const e=t.toLowerCase();return Cl(e,ti.rP)||Cl(e,ti.oP)}(t.type)}async fH(t){return AT(t)}};et(new class extends _Y{mP(t,e,i,s,n,r,o){const h=new St(e),a=h.lH(Fo.yE);return new fY(a,i,n,r,h,s)}dH(t,e){return As.rI&&Mb?Ya.Rg&&Ya.Pg<6?Promise.resolve(!1):d_(t.useManagedMediaSource)?super.dH(t,e):Promise.resolve(!1):Promise.resolve(!1)}_H(){return!1}}),r(),r();var vY=class extends dY{IR(){if(dV(this.aO))return this.aO.IR()}async yn(){await super.yn(),await this.YZ.qZ(this.aO)}constructor(t,e,i,s,n,r){super(t,e,i,s,r),this.YZ=n}};Ya.$g&&Ya.su&&et(new class extends _Y{get vH(){return CR.YG}async dH(t,e){var i,s;if(Ya.IS_IOS_CHROME)return!1;const n=await super.dH(t,e);var r;if(null==(r=null==(s=bf())||null==(i=s.canPlayType)?void 0:i.call(s,ti.iP))||!r||!n||!("serviceWorker"in Bl))return!1;try{const t=Bl.serviceWorker.ready;return await pf(t,1e3),!0}catch(t){return!1}}async fH(t){return!!t.fairplay&&await super.fH(t)}mP(t,e,i,s,n,r,o){if(t instanceof HTMLDivElement){const t=e.Bst(Fo.yE);return new vY(t,i,n,r,e,s)}throw new Z(Ci.CONFIGURATION_ERROR,"Container Div element expected.")}_H(){return!1}}),r(),r(),r(),r();var gY="theo_live_user_id",mY=class{incrementSequenceNumber(){this.aS+=1}get sequenceNumber(){return this.aS}constructor(t){this.externalId=t,this.id=se(),this.userId=pY(),this.aS=0}};function pY(){try{const t=localStorage.getItem(gY);if(t)return t;const e=se();return localStorage.setItem(gY,e),e}catch(t){return se()}}function wY(t){var e;return{hespSrc:t.hespSrc,type:"theo.live",hlsSrc:t.hlsSrc,maxMobileBitrate:t.maxMobileBitrate,targetLatency:null==(e=t.metadata.customization)?void 0:e.targetLatency,contentProtection:t.drmConfig?t.drmConfig:void 0}}function yY(t){const{integration:e,widevine:i,playready:s,fairplay:n}=t;return ne({integration:e},i&&{widevine:{licenseAcquisitionURL:i.licenseUrl}},s&&{playready:{licenseAcquisitionURL:s.licenseUrl}},n&&{fairplay:{licenseAcquisitionURL:n.licenseUrl,certificateURL:n.certificateUrl}})}function bY(t,e){return{id:t.id,name:t.name,deleted:"deleted"===t.status,targetLatency:t.source.targetLatency,maxMobileBitrate:t.source.maxMobileBitrate,endpoints:[{hespSrc:t.source.hespSrc,hlsSrc:t.source.hlsSrc,weight:1,priority:1,drm:t.source.contentProtection},t.fallback&&e?{hespSrc:t.fallback.hespSrc,hlsSrc:t.fallback.hlsSrc,weight:1,priority:2,drm:t.fallback.contentProtection}:void 0].filter(ol)}}function AY(t){return void 0!==t.mode}r(),r();var SY=class extends Z{constructor(t,e,i){super(t,"Could not load channel with id "+e+": "+i),this.channelId=e,this.reason=i}},TY=class extends SY{constructor(t){super(Ci.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel could not be found")}},kY=class extends SY{constructor(t){super(Ci.THEO_LIVE_CHANNEL_NOT_FOUND,t,"This account has been locked")}},EY=class extends SY{constructor(t){super(Ci.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel got deleted")}},xY=class{amt(t){const e=this.rMt.get(t);if(e)return e;const i=new IY(t,this.WW,this.oMt);return this.rMt.set(t,i),i}constructor(t,e){this.WW=t,this.oMt=e,this.rMt=new Map}},IY=class{get hMt(){return qf()-this.aMt>36e5}ir(){this.uMt=!1,this.aMt=qf(),this.cMt=this.tTt(),this.cMt.catch((()=>this.uMt=!0))}async tTt(){for(const e of this.oMt.discoveryUrls){const i=await this.lMt(this.jS,e,this.dMt);if(i){if(AY(i)){const{mode:s,status:n,fallback:r,metadata:o}=i;if("locked"===s)throw new kY(this.jS);if("deleted"===n)throw new EY(this.jS);var t;return bY({id:this.jS,name:o.name,mode:s,status:n,source:wY(i),fallback:r?await this.fMt(r,e,this.dMt):void 0,insights:null==o?void 0:o.insights,enhancedLogging:null==o?void 0:o.enhancedLogging,customization:null==o?void 0:o.customization,sseEndpoint:i.sseEndpoint},null==(t=this.oMt.fallbackEnabled)||t)}return i}}throw new TY(this.jS)}async fMt(t,e,i){if("theo.live"!==t.type)return{hespSrc:t.src,type:t.type};const s=await this.lMt(t.src,e,i);return s?wY(s):void 0}async lMt(t,e,i){try{const s=As.Bh(t,e);s.searchParams.set("osName",function(){const t=As.Ys._p;if("ios"===t||"macos"===t)return"apple";return t}()),s.searchParams.set("deviceType",As.Ys.vp),s.searchParams.set("sdkType","web");const n=await this.WW.eE({Xu:s.toString(),iE:i});return await n.Nk()}catch(t){return}}get _Mt(){return(this.uMt||this.hMt)&&this.ir(),this.cMt}constructor(t,e,i){this.jS=t,this.WW=e,this.oMt=i,this.dMt=new Cb,this.oMt.discoveryHeader&&this.dMt.append("x-theolive-discovery",this.oMt.discoveryHeader),this.ir()}};r(),r();var pn=function(t){return t.STARTING="s",t.PLAYING="p",t.SEEKING="k",t.REBUFFERING="r",t.PAUSED="a",t.ENDED="e",t.QUIT="q",t}({}),RY=function(t){return t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.OTHER="o",t}({});function CY(t){return 100*_.round(t/100)}function PY(t){const e=t.CI(),i=t.TI();for(let t=0;t<i.length;t++)if(i.start(t)<=e&&e<=i.end(t))return 1e3*(i.end(t)-e);return 0}function DY(t){return Do(t.mC,(t=>t.Rt))}function NY(t){return Ei(t.VC.mC,(t=>t.jG))}function MY(t){return hf(t.VC.mC,(t=>t.jG))}r(),r();var ms=class t{static starting(e,i,s){return new t(pn.STARTING,e,i,s)}static playing(e){return new t(pn.PLAYING,e)}static seeking(e,i){return new t(pn.SEEKING,e,i)}static rebuffering(e,i){return new t(pn.REBUFFERING,e,i)}static paused(e){return new t(pn.PAUSED,e)}static ended(e){return new t(pn.ENDED,e)}static quit(e){return new t(pn.QUIT,e)}get ct(){return Date.now()-this.vMt}gMt(){const t=this.na.Sz.Zj.jG,e=this.na.SR.mO,i=PY(this.na);t>0&&void 0!==i&&void 0!==e&&(this.mMt+=1,this.pMt=this.wMt(this.pMt,i),this.yMt=this.wMt(this.yMt,1e3*this.na.SR.kd.targetOffset),this.xZ=this.wMt(this.xZ,1e3*e),this.bMt=this.wMt(this.bMt,t/1e3))}wMt(t,e){return t+(e-t)/this.mMt}mP(){const t={sta:this.Zp,ts:this.vMt,"theo-vt":this.AMt,"theo-at":this.SMt,"theo-d":this.ct,"theo-r":this.lf};return this.mMt>0?ne({},t,{bl:CY(this.pMt),tbl:CY(this.yMt),ltc:CY(this.xZ),mtp:CY(this.bMt),"theo-w":this.mMt}):t}TMt(){return new t(this.Zp,this.na,this.lf)}constructor(t,e,i,s){var n,r,o,h;this.vMt=Date.now(),this.pMt=0,this.yMt=0,this.xZ=0,this.bMt=0,this.mMt=0,this.Zp=t,this.na=e,this.AMt=null==(r=DY(this.na.rt))||null==(n=r.BC)?void 0:n.o,this.SMt=null==(h=DY(this.na.ht))||null==(o=h.BC)?void 0:o.o,this.lf=i,this.bZ=s}},LY=class{kMt(){var t;const e=this.na.SR.mO,i=PY(this.na),s=this.na.Sz.Zj.jG;return BY({bl:void 0!==i?CY(i):void 0,tbl:CY(1e3*this.na.SR.kd.targetOffset),ltc:void 0!==e?CY(1e3*e):void 0,mtp:void 0!==s?CY(s/1e3):void 0,sta:null==(t=this.EMt)?void 0:t.Zp,su:!this.NNt||void 0,"theo-sq":this.xMt.sequenceNumber})}IMt(t){var e,i;const s=function(t,e){switch(e){case RY.VIDEO:return DY(t.rt);case RY.AUDIO:return DY(t.ht)}}(this.na,t);return BY({br:(null==s||null==(e=s.BC)?void 0:e.jG)?CY((null==s||null==(i=s.BC)?void 0:i.jG)/1e3):void 0,ot:t,tb:s?CY(MY(s).jG/1e3):void 0,lb:s?CY(NY(s).jG/1e3):void 0})}RMt(){return BY({"theo-cw":this.na.we.clientWidth,"theo-ch":this.na.we.clientHeight,"theo-m":this.na.qI,"theo-vo":_.ceil(100*this.na.yR)})}CMt(){var t;return BY({sf:OY(this.na.bt),sid:this.xMt.id,st:"l",v:2,"theo-eid":null==(t=this.xMt.externalId)?void 0:t.substring(0,128),"theo-cn":this.PMt.name.substring(0,128),"theo-v":"9.7.0","theo-t":"web","theo-u":this.xMt.userId})}DMt(){const t={"CMCD-States":btoa(JSON.stringify(this.NMt))};return this.NMt=[],t}MMt(t){this.EMt&&this.NMt.push(this.EMt.mP()),this.EMt=t}destroy(){this.LMt(),s.removeEventListener("beforeunload",this.LMt),this.na.vn(Zc.uB,this.fO),this.na.vn(Zc.aB,this.dO),this.na.vn(ns.Ky,this.BMt),this.na.VI.vn("latencyrecoveryseek",this.OMt),this.na.VI.vn("golive",this.FMt),this.na.rt.vn(je.XR,this._Z),this.na.ht.vn(je.XR,this._Z),this.na.rt.mC.forEach((t=>t.vn(gs.fC,this.Zr))),this.na.ht.mC.forEach((t=>t.vn(gs.fC,this.Zr))),this.na.knt.removeEventListener("intenttofallback",this.VMt),this.na.knt.removeEventListener("publicationloadstart",this.WMt),this.na.knt.removeEventListener("publicationoffline",this.UMt),this.na.Sz.Oj(this.GMt),As.dw(this.ZMt)}constructor(t,e,i){this.NMt=[],this.NNt=!1,this.yz=!1,this.VMt=()=>{var t;this.MMt(ms.starting(this.na,"fallback",null==(t=this.na.FI())?void 0:t.message))},this.WMt=()=>{this.MMt(ms.starting(this.na,"loadChannel"))},this.UMt=()=>{this.MMt(ms.ended(this.na))},this._Z=t=>{t.Ht.bn(gs.fC,this.Zr)},this.Zr=()=>{var t,e,i,s;const n=null==(e=DY(this.na.rt))||null==(t=e.BC)?void 0:t.o,r=null==(s=DY(this.na.ht))||null==(i=s.BC)?void 0:i.o;n&&r&&(this.EMt&&this.EMt.Zp===pn.PLAYING&&this.EMt.AMt===n&&this.EMt.SMt===r||this.MMt(ms.playing(this.na)))},this.fO=()=>{this.NNt=!0,this.yz=!1,this.MMt(ms.playing(this.na))},this.OMt=()=>{this.NNt&&!this.yz&&(this.yz=!0,this.MMt(ms.seeking(this.na,"latencyRecovery")))},this.FMt=()=>{this.NNt&&!this.yz&&(this.yz=!0,this.MMt(ms.seeking(this.na,"goLive")))},this.dO=()=>{this.na.dR||this.MMt(ms.rebuffering(this.na,"visible"===h.visibilityState?void 0:"invisible"))},this.BMt=()=>{this.MMt(ms.paused(this.na))},this.GMt=t=>{const e=As.Bh(t.url),i=function(t){const{pathname:e}=t;if(nm(e,"manifest.json"))return RY.MANIFEST;if(Xa(e,"/video/"))return RY.VIDEO;if(Xa(e,"/audio/"))return RY.AUDIO;return RY.OTHER}(e);if("o"===i)return;this.xMt.incrementSequenceNumber();let s=ne({},t.headers,{"CMCD-Request":this.kMt(),"CMCD-Object":this.IMt(i),"CMCD-Status":this.RMt(),"CMCD-Session":this.CMt()});i===RY.VIDEO&&nm(e.pathname,".hspc")&&this.EMt&&(this.MMt(this.EMt.TMt()),s=ne({},s,this.DMt())),t.redirect(ne({},t,{headers:s}))},this.LMt=()=>{this.EMt&&(this.NMt.push(this.EMt.mP()),this.EMt=void 0),this.NMt.push(ms.quit(this.na).mP()),uh(this.na.mI.eE({Xu:this.HMt,iE:this.DMt(),OE:!0}))},this.na=t,this.PMt=e,this.xMt=i;const n=e.endpoints[0],r=(null==n?void 0:n.hespSrc)||(null==n?void 0:n.hlsSrc)||"";this.HMt=As.Bh("bye",r).href,s.addEventListener("beforeunload",this.LMt),this.na.bn(Zc.uB,this.fO),this.na.bn(Zc.aB,this.dO),this.na.bn(ns.Ky,this.BMt),this.na.VI.bn("latencyrecoveryseek",this.OMt),this.na.VI.bn("golive",this.FMt),this.na.Sz.Mj(this.GMt),this.na.rt.bn(je.XR,this._Z),this.na.ht.bn(je.XR,this._Z),this.na.knt.addEventListener("intenttofallback",this.VMt),this.na.knt.addEventListener("publicationloadstart",this.WMt),this.na.knt.addEventListener("publicationoffline",this.UMt),this.EMt=ms.starting(this.na,"loadchannel"),this.ZMt=As.lw((()=>{var t;null==(t=this.EMt)||t.gMt()}),1e3)}};function BY(t){return w.keys(t).map((e=>function(t,e){switch(typeof e){case"boolean":return e?t:t+"=false";case"number":return t+"="+e;case"string":return t+'="'+e+'"';default:return}}(e,t[e]))).filter(Boolean).sort().join(",")}function OY(t){if(t)return t.type===ti.iP||t.type===ti.sP?"h":t.type===ti.oP?"e":void 0}r();var FY=class extends me{constructor(t){super("publicationloadstart"),this.publicationId=t}},VY=class extends me{constructor(t){super("distributionloadstart"),this.distributionId=t}},WY=class extends me{constructor(t){super("publicationoffline"),this.publicationId=t}},UY=class extends me{constructor(t){super("distributionoffline"),this.distributionId=t}},GY=class extends me{constructor(t,e){super("publicationloaded"),this.publicationId=t,this.channelName=e}},ZY=class extends me{constructor(t){super("endpointloaded"),this.endpoint=t}},HY=class extends me{constructor(){super("intenttofallback")}},XY=class extends me{constructor(){super("enterbadnetworkmode")}},zY=class extends me{constructor(){super("exitbadnetworkmode")}},qY=class extends So{get wa(){return this.eu||(this.eu=function(t){return{addEventListener(e,i){t.bn(e,i)},removeEventListener(e,i){t.vn(e,i)},get badNetworkMode(){return t.XMt},set badNetworkMode(e){t.XMt=e},preloadPublications:async e=>(await t.zMt(e)).map((t=>({name:t.name})))}}(this)),this.eu}get XMt(){return this.na.XMt}set XMt(t){this.na.XMt=t}zMt(t){return this.na.zMt(t)}constructor(t){super(),this.na=t}};var YY=["https://discovery.theo.live/channels/"],KY=8e5,jY=class extends gc{qMt(){this.na.VI.bn("latencyrecoveryseek",this.OMt),this.na.rt.bn(je.XR,this._Z)}YMt(){this.na.VI.vn("latencyrecoveryseek",this.OMt),this.na.rt.vn(je.XR,this._Z)}GR(t){return this._Nt?t.type===Zc.uB?(void 0!==this.KMt?(As.Um(this.KMt),this.KMt=void 0,this.NNt||this._o(new Xr(this.CI()))):this._o(new Xr(this.CI())),this.NNt=!0,!0):t.type===Zc.aB?(this.KMt||(this.KMt=As.Gm((()=>{this._o(new Pa(this.CI())),this.KMt=void 0}),100)),!0):"error"===t.type?(null==(e=this.IH)?void 0:e.src)&&tK(this.IH.src)?(this.dispatchErrorEvent(t.errorObject),!0):(this.jMt._o(new HY),this.na.NR().then((()=>this.QMt(!0))),!0):(t.type===ns.ho?(this.JMt=As.Wm(),void 0===this.$Mt&&(this.$Mt=As.lw((()=>{var t;As.Wm()-(null!=(t=this.JMt)?t:0)>15e3&&this.na.NR().then((()=>this.QMt(!0)))}),1e3))):t.type===ns.Ky?void 0!==this.$Mt&&(As.dw(this.$Mt),this.$Mt=void 0):t.type===ns._b&&(this.JMt=As.Wm()),super.GR(t)):super.GR(t);var e}Ent(){return this.jMt.wa}BI(){return this._Nt?this.QH:super.BI()}FI(){return this._Nt?this.bZ:super.FI()}get XMt(){return this.tLt}set XMt(t){this._Nt&&(t?this.eLt():this.iLt())}eLt(){if(this.tLt)return;if(this.tLt=!0,this.jMt._o(new XY),0===this.na.rt.V)return;const t=this.rt.wC(0),e=af(t.VC.mC,(t=>t.jG));var i;(null!=(i=e.Tyt)?i:e.jG)<KY?(t.WC=[e],Promise.resolve().then((()=>t.WC=t.VC.mC.slice()))):this.iLt()}iLt(){if(!this.tLt)return;if(this.tLt=!1,this.jMt._o(new zY),0===this.na.rt.V)return;const t=this.na.rt.wC(0);var e;const i=QY(null!=(e=t.WC)?e:t.VC.mC);t.WC=i.length>0?i:QY(t.VC.mC)}zMt(t){return Promise.all(t.map((async t=>{const e=this.sLt.amt(t);return await Lu(e._Mt,this.zT.ep)})))}async Ca(t,e){var i;this._Nt=!1;for(const s of null!=(i=null==t?void 0:t.sources)?i:[])if(nk(s)&&s.type===ti.aP&&s.src){if(this._Nt=!0,this.Sc=t,this.IH=s,this.jMt._o(new FY(s.src)),this.jMt._o(new VY(s.src)),this.qMt(),tK(s.src)){const i=ne({},t,{sources:[ne({},s,{type:ti.oP,useManagedMediaSource:!0})]});return void await super.Ca(i,e)}this.nLt=this.sLt.amt(s.src);try{const t=await this.nLt._Mt;this.PMt=t,this.rLt.analyticsEnabled&&(this.oLt=new LY(this,t,this.xMt));const i=this.jMt.Ay("publicationloaded");return this.QMt(!1),void await Lu(i,e).catch(ih)}catch(t){throw ih(t),await this.NR().catch(M),this.dispatchErrorEvent(t),t}}return await super.Ca(t,e)}QMt(t){if(!this.nLt)return;if(this.hLt)return;void 0!==this.aLt&&(As.Um(this.aLt),this.aLt=void 0);const e=()=>{this.hLt=void 0};this.hLt=this.uLt(this.nLt,t).then(e).catch(e)}async uLt(t,e){const i=await t._Mt;this.PMt=i;const s=await async function(t,e){const i=xo(t.endpoints.map((t=>t.priority))),s=i.sort();for(const i of s){const s=t.endpoints.filter((t=>t.priority===i));for(;s.length>0;){const t=$Y(s),i=t.hespSrc||t.hlsSrc;try{const s=await e.eE({Xu:i});if(s.Jk>=200&&s.Jk<300)return t}catch(t){}_e(s,t)}}return}(i,this.na.mI);if(s){const t=this.convertEndpointToSource(i,s);await this.na.Ca(t,(new Fi).ep),this.jMt._o(new GY(i.id,i.name)),this.jMt._o(new ZY(s)),e&&this.na.DR()}else this.jMt._o(new WY(i.id)),this.jMt._o(new UY(i.id)),this.aLt=As.Gm((()=>this.QMt(e)),15e3)}convertEndpointToSource(t,e){var i,s,n,r;const o={sources:[e.hespSrc?{type:"application/vnd.theo.hesp+json",src:e.hespSrc,contentProtection:e.contentProtection?yY(e.contentProtection):void 0,useManagedMediaSource:!0,latencyConfiguration:null!=(r=null==(i=this.IH)?void 0:i.latencyConfiguration)?r:JY(t.targetLatency),hesp:{maxMobileBitrate:t.maxMobileBitrate}}:void 0,e.hlsSrc?{type:"application/x-mpegurl",src:e.hlsSrc,contentProtection:e.contentProtection?yY(e.contentProtection):void 0}:void 0].filter(ol),ads:this.NNt?[]:null==(s=this.Sc)?void 0:s.ads,blockContentIfAdError:null==(n=this.Sc)?void 0:n.blockContentIfAdError,streamType:"live"};if(e.adSrc){var h;const t=null!=(h=o.ads)?h:[],i=t.filter((t=>"theoads"===t.integration));i.length>0?i.forEach((t=>{t.sseEndpoint=e.adSrc})):t.push({integration:"theoads",sseEndpoint:e.adSrc}),o.ads=t}const a=nc(o);return a.sources[0].bypassLicense=!0,a}dispatchErrorEvent(t){const e=t instanceof Z?t:new Z(Ci.THEO_LIVE_UNKNOWN_ERROR,t.message,t);this.QH=Zs(e),this.bZ=e,this._o(new Pi(e))}NR(){var t;return this.zT.np(),this.zT=new Fi,this.YMt(),void 0!==this.KMt&&(As.Um(this.KMt),this.KMt=void 0),void 0!==this.aLt&&(As.Um(this.aLt),this.aLt=void 0),void 0!==this.$Mt&&(As.dw(this.$Mt),this.$Mt=void 0),this.JMt=void 0,this._Nt=!1,this.NNt=!1,null==(t=this.oLt)||t.destroy(),this.oLt=void 0,this.Sc=void 0,this.IH=void 0,this.nLt=void 0,this.PMt=void 0,this.bZ=void 0,this.QH=void 0,this.cLt=[],this.tLt&&this.iLt(),super.NR()}async yn(t){var e;this.zT.np(),void 0!==this.KMt&&(As.Um(this.KMt),this.KMt=void 0),this.Ro(),this.YMt(),null==(e=this.oLt)||e.destroy(),this.na.VI.vn("latencyrecoveryseek",this.OMt),await super.yn(t)}constructor(t,e){var i;super(t,e),this._Nt=!1,this.QH=void 0,this.bZ=void 0,this.zT=new Fi,this.KMt=void 0,this.NNt=!1,this.hLt=void 0,this.cLt=[],this.tLt=!1,this._Z=t=>{var e;const i=t.Ht,s=null==(e=this.PMt)?void 0:e.maxMobileBitrate;if(void 0!==s&&As.Ys.Qs){i.VC.mC.filter((t=>t.jG>s)).forEach((t=>i.VC.rT(t)))}var n;i.bn(gs.fC,this.Zr);const r=QY(null!=(n=i.WC)?n:i.VC.mC);i.WC=r.length>0?r:QY(i.VC.mC)},this.Zr=t=>{const e=t.jht;var i;(!e||(null!=(i=e.Tyt)?i:e.jG)>=KY)&&this.iLt()},this.OMt=()=>{this.eLt(),this.cLt.push(As.Wm()),this.cLt=this.cLt.filter((t=>As.Wm()-t<=3e5)),this.cLt.length>=3&&(this.cLt=[],this.jMt._o(new HY),this.QMt(!0))},this.jMt=new qY(this);const s=t.kd.theoLive;var n,r,o;this.rLt={sessionId:null!=(n=null==s?void 0:s.sessionId)?n:se(),userId:null!=(r=null==s?void 0:s.userId)?r:pY(),externalSessionId:null==s?void 0:s.externalSessionId,analyticsEnabled:!1!==(null==s?void 0:s.analyticsEnabled),fallbackEnabled:!1!==(null==s?void 0:s.fallbackEnabled),discoveryUrls:[null==s?void 0:s.discoveryUrl,...null!=(o=null==s?void 0:s.discoveryUrls)?o:[],...YY].filter(ol)},this.xMt=new mY(null==(i=this.rLt)?void 0:i.externalSessionId),this.sLt=new xY(t.mI,this.rLt),this.na.VI.bn("latencyrecoveryseek",this.OMt)}};function QY(t){return t.filter((t=>{var e;return(null!=(e=t.Tyt)?e:t.jG)>=KY}))}function JY(t){return void 0===t?ne({},oq(),{forceSeekOffset:20}):{minimumOffset:t-LT,targetOffset:t,maximumOffset:t+LT,forceSeekOffset:20,minimumPlaybackRate:T,maximumPlaybackRate:_t}}function $Y(t){const e=t.reduce(((t,e)=>t+e.weight),0);if(0===e){return t[_.floor(_.random()*t.length)]}const i=_.random()*e;let s=0;for(const e of t)if(s+=e.weight,i<=s)return e;return t[t.length-1]}function tK(t){try{return nm(As.Bh(t).pathname,"manifest.json")}catch(t){return!1}}kF((t=>new jY(t)),hu.aP),r(),r(),r();var eK=Qs(Yl());r(),r(),r();var iK=class extends So{get WN(){return this.lLt}ir(t,e){this.tS=t,this.lLt=e,this.eu&&this._o(new AZ(this.eu))}get wa(){var t;return null!=(t=this.eu)?t:this.eu=this.ka()}get o(){return this.tS.id}get OC(){return this.eF}get jG(){return this.tS.bitrate}get Tyt(){}get Frt(){return""}get Ch(){return""}get Iyt(){return""}get Lst(){return!0}get kyt(){}MW(){throw new m("Method not implemented.")}LW(){throw new m("Method not implemented.")}yn(){this.Ro()}constructor(t,e){super(),this.eF=Nk(),this.eu=void 0,this.tS=t,this.lLt=e}},sK=class extends iK{ka(){return yZ(this)}get Xdt(){return 0}get ji(){return this.tS.width}get Ti(){return this.tS.height}get Eyt(){return 0}constructor(t,e){super(t,e)}};r();var nK=class extends So{get Rt(){return!0}set Rt(t){}get wa(){var t;return null!=(t=this.eu)?t:this.eu=xi(this)}nF(t){this.Rt=t}get Adt(){}get Lt(){return this.O5}get o(){return this.jS||"millitrack"}get OC(){return this.eF}get Ch(){return""}get gs(){return""}get LE(){return this.Rt?"enabled":"disabled"}set LE(t){this.nF("enabled"===t)}get BC(){}get VC(){return this.jO}get WC(){return this.dLt}set WC(t){if(this.dLt=t,this.Rt){const e=1===(null==t?void 0:t.length)?t[0].WN:void 0;this.fLt(e)}this._o(new HW(this.jO.mC.slice(),this)),((null==t?void 0:t.length)||this.jO.V)&&this._o(new $u((null==t?void 0:t[0])||this.jO.wC(0)))}get FC(){}yn(){this.Ro();for(const t of this.jO.mC)t.yn();this.jO.nr()}constructor(t,e){super(),this.eF=Lt(),this.jO=new tl,this.jS=t,this.O5=e}},rK=class extends nK{ir(t){for(const e of t.active){const i=Do(t.layers,(t=>t.encodingId===e.id)),s=Do(this.jO.mC,(t=>t.o===e.id));s?s.ir(e,i):this.jO.QO(new sK(e,i))}this._o(new te(this))}get zw(){return Fo.yE}fLt(t){var e;null==(e=this._Lt)||e.vLt(t)}yn(){this._Lt=void 0,super.yn()}constructor(t,e,i){super(t,e),this._Lt=i}};r();var oK=class{ir(t){this.gLt=t}get jG(){var t,e,i,s,n;var r;return(null!=(n=null==(e=this.gLt)||null==(t=e.video.inbounds)?void 0:t.reduce(((t,e)=>t+e.bitrateBitsPerSecond),0))?n:0)+(null!=(r=null==(s=this.gLt)||null==(i=s.audio.inbounds)?void 0:i.reduce(((t,e)=>t+e.bitrateBitsPerSecond),0))?r:0)}get QG(){var t,e;return null!=(e=null==(t=this.gLt)?void 0:t.currentRoundTripTime)?e:0}JG(t){}};r(),r();var hK=class extends iK{ka(){return bZ(this)}get Swt(){return this.mLt}constructor(t,e){super(t,e),this.mLt=0}},aK=class extends nK{ir(t){for(const e of t.active){const i=Do(t.layers,(t=>t.encodingId===e.id)),s=Do(this.jO.mC,(t=>t.o===e.id));s?s.ir(e,i):this.jO.QO(new hK(e,i))}this._o(new te(this))}get zw(){return Fo.wE}fLt(t){var e;null==(e=this._Lt)||e.pLt(t)}yn(){this._Lt=void 0,super.yn()}constructor(t,e,i){super(t,e),this._Lt=i}};r();var uK=class extends He{ka(){return function(t){return Qr(ai(t),{get mid(){return t.pW.mid},get uuid(){return t.pW.uuid},get timecode(){return t.pW.timecode},get unregistered(){return t.pW.unregistered}})}(this)}constructor(t,e){super(t,t,void 0,!1),this.pW=e}};r(),r();var cK=Qs(Yl()),lK=class extends So{get wa(){return this.eu||(this.eu=yk(this)),this.eu}DO(t){return cK.Logger.diagnose(t)}bn(t,e){this.wLt.bn(t,e)}vn(t,e){this.wLt.vn(t,e)}constructor(t){super(),this.wLt=t}},dK=[ns.ho,ns.Ky,Zc.uB,ns._b,ns.jy,ns.Hy,ns.ib,ns.eb,ns.Ly,ns.Qy,ns.vb,ns.Dy,ns.$y,ns.Ry,ns.Iy,ns.Fy,ns.By],fK=["active","inactive","stopped","vad","layers","migrate","viewercount"],_K=1e3,vK=class extends me{get stats(){return this.gLt}constructor(t){super("stats"),this.gLt=t}},gK=class extends So{vLt(t){var e;null==(e=this.Nf)||e.select(t).catch(this.Gpt)}pLt(t){var e;null==(e=this.Nf)||e.select(t).catch(this.Gpt)}get ER(){return!1}IR(){return this.aO.IR()}get ht(){return this.LO}get SI(){return this.aO.SI.ks()}get kI(){return this.aO.kI}set kI(t){}get bt(){return this.Sc}get RI(){return this.aO.RI}set RI(t){this.DI(t)}DI(t,e){}get ct(){return this.aO.ct}get MI(){return this.aO.MI}get lt(){return this.bZ}get OI(){return this.AZ}get VI(){}get UI(){return this.yLt}get ZI(){return this.aO.ZI}get XI(){var t,e;const i=this.bLt,s=null==i||null==(t=i.video.inbounds)?void 0:t[0],n=null==i||null==(e=i.audio.inbounds)?void 0:e[0];var r,o,h,a;return{ZO:this.XH.Zj.jG,WO:null!=(r=null==s?void 0:s.framesDropped)?r:0,UO:0,GO:null!=(o=null==s?void 0:s.framesReceived)?o:0,HO:(null!=(h=null==s?void 0:s.totalBytesReceived)?h:0)+(null!=(a=null==n?void 0:n.totalBytesReceived)?a:0),XO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get qI(){return this.aO.qI}set qI(t){this.aO.qI=t}get jI(){var t,e;return null!=(e=null==(t=this.Nf)?void 0:t.isActive())&&e}get JI(){return this.aO.JI}get tR(){return 1}set tR(t){}get sR(){return this.aO.sR.ks()}get rR(){return hi.xH}set rR(t){}get aR(){return this.aO.aR}get cR(){return this.aO.cR.ks()}get dR(){return this.aO.dR}get EZ(){return this.aO.EZ}get nt(){return this.aO.nt}get vR(){return this.aO.vR}get rt(){return this.FO}get pR(){return this.aO.pR}get yR(){return this.aO.yR}set yR(t){this.aO.yR=t}get SR(){return this.zH}get IZ(){return this.RZ}get mO(){return this.zH.mO}ge(){this.aO.ge()}be(){this.aO.be()}async DR(){this.$n(),await this.aO.DR()}PR(){this.aO.PR()}async nr(){var t;this.ALt(),this.Sc=void 0,this.zT.np(),null==(t=this.Nf)||t.stop(),this.Nf=void 0,this.ipt&&(await this.ipt.catch(M),this.ipt=void 0),this.SLt=void 0,await this.aO.nr(),this.TLt=void 0,this.kLt=0,this.aO.GZ();for(const t of this.FO.mC)t.yn();this.LO.nr(),this.FO.nr()}async yn(){this.ALt(),this.Ro(),await this.nr(),this.LO.yn(),this.FO.yn(),this.ZZ.yn(),this.aO.vn(dK,this.Ds),this.aO.vn(bo.fa,this.Ss),await this.HH.qZ(this.aO)}async Ca(t,e,i){Io(i),this.VEt(),this.ALt();const s=t;this.Sc=s,this.zT=new Fi,s.apiUrl&&eK.Director.setEndpoint(s.apiUrl);this.Nf=new eK.View(void 0,(()=>eK.Director.getSubscriber({streamName:s.src,streamAccountId:s.streamAccountId,subscriberToken:s.subscriberToken})),void 0,!0),this.ELt=ne({},s.connectOptions,{events:fK}),this.xLt()}$n(){if(void 0!==this.ipt)return;const t=this.Nf;void 0!==t&&(this.ipt=this.ix(t,this.ELt,this.zT.ep).catch(this.Gpt))}async ix(t,e,i){Io(i);try{var s,n;await Lu(t.connect(e),i),t.webRTCPeer.initStats({autoInitStats:!0,statsIntervalMs:_.min(null!=(n=null==(s=this.Sc)?void 0:s.statsIntervalMs)?n:_K,_K)})}catch(e){ih(e),function(t){return Vt(t)&&"FetchError"===t.name}(e)&&400===e.status&&(As.aw("[THEOplayer] Millicast connect error, reconnecting.",e),await Lu(t.reconnect(),i)),this.uH(new Z(Ci.NETWORK_ERROR,e.message,e))}}async ILt(t,e){Io(e);try{this.aO.Q7(),this.SLt=t,await this.aO.nr(),await this.aO.$n({zw:De.zW,zC:"",a$:t,Fk:ti.hP,CZ:[]})}finally{this.aO.J7()}}xLt(){var t;const e=this.Nf;e.on("track",(t=>this.RLt(t))),e.on("broadcastEvent",(t=>this.CLt(t))),e.webRTCPeer.on("stats",(t=>{this.bLt=t,this.RZ.ir(t),this.PLt()})),(null==(t=this.ELt)?void 0:t.metadata)&&e.on("metadata",(t=>this.DLt(t)))}PLt(){var t,e;void 0===this.NLt&&(this._o(new vK(this.bLt)),this.NLt=As.lw((()=>{this._o(new vK(this.bLt))}),null!=(e=null==(t=this.Sc)?void 0:t.statsIntervalMs)?e:_K))}ALt(){void 0!==this.NLt&&(As.dw(this.NLt),this.NLt=void 0)}RLt(t){const e=this.LO.V>0,i=this.FO.V>0,s=e&&!i;if(i&&t.track.kind===Fo.yE||s&&t.track.kind===Fo.wE){const e=t.streams[0];if(s){const t=e.getVideoTracks().slice();for(const i of t)e.removeTrack(i)}this.ILt(e,this.zT.ep).catch(this.Gpt)}}CLt(t){switch(t.name){case"active":{this._o(new nt);const e=t.data;for(const t of e.tracks)t.media===Fo.yE?this.FO.tt(new rK(t.trackId,this.FO.V?Eo.cDt:Eo.lDt,this)):t.media===Fo.wE&&this.LO.tt(new aK(t.trackId,this.LO.V?cn.cDt:cn.lDt,this));break}case"inactive":this._o(new aX),this.FO.nr(),this.LO.nr();break;case"stopped":this._o(new aX);break;case"viewercount":default:break;case"layers":{const e=t.data;if(0===this.FO.V){const t=new rK("",Eo.lDt,this);t.ir(e.medias[0]),this.FO.tt(t)}else{const t=Do(this.FO.mC,(t=>t.Lt===Eo.lDt));null==t||t.ir(e.medias[0])}break}}}DLt(t){let e=this.TLt;void 0===e&&(e=this.aO.ZR(Hi.xW,void 0,void 0,void 0,void 0,Hr.MILLICAST),e.LE=Ui.GC,this.TLt=e);const i=this.RI,s=_.max(0,i-10);this.kLt<s&&(go(e,s),this.kLt=s);const n=new uK(i+.001,t);e.UW(n)}uH(t){this.bZ||(uh(this.nr()),this.bZ=Zs(t),this.AZ=t,this._o(new Pi(t)))}VEt(){this.bZ=void 0,this.AZ=void 0}MR(){return!1}LR(){}OR(){}FR(){this.aO.FR()}WR(){const t=this.SLt;void 0!==t&&this.ILt(t,this.zT.ep).catch(this.Gpt)}xR(){return this.aO.Sa}ja(){return this.aO.WZ}ZR(t){return this.aO.UZ(t)}constructor(t,e,i){super(),this.HH=t,this.XH=e,this.zH=i,this.zT=new Fi,this.ipt=void 0,this.SLt=void 0,this.FO=new an,this.LO=new an,this.kLt=0,this.RZ=new oK,this.Ss=t=>{this.uH(xk(t.lt))},this.Gpt=t=>{Se(t)||this.uH(new Z(Ci.MEDIA_DECODE_ERROR,t.message,t))},this.aO=this.HH.lH(Fo.yE),this.ZZ=new I(this.aO,!0),this.aO.bn(dK,this.Ds),this.aO.bn(bo.fa,this.Ss),this.ZZ.bn(co,this.Ds),this.yLt=new lK(this)}};et(new class{get vH(){return CR.hP}mP(t,e,i,s,n,r,o,h){return new gK(e,n,r)}dH(t,e){return t.type===ti.hP}async fH(t){let e=await AT(t);return e&&(e=Boolean(t.widevine||t.fairplay)),e&&!1}_H(){return!1}}),r(),r(),r(),r();var ut=function(t){return t.MLt="currentbufferingrenditionchange",t.LLt="BLt",t.OLt="FLt",t.VLt="WLt",t}({});r(),r();var mK=class{constructor(t,e){var i,s;this.Frt=void 0,this.OC=Nk(),this.ULt=e,this.zw=t.zw,this.GLt=t.GLt,this.ZLt=t.ZLt,this.HLt=t.HLt,this.l=t.l,this.gs=t.gs,this.XLt=t.XLt,this.zLt=t.zLt,this.qLt=void 0===t.Iyt,this.YLt=null!=(s=null==(i=t.YLt)?void 0:i.split(","))?s:[]}};function pK(t,e){return t.zw===e.zw&&(t.l===e.l||!(!t.GLt||!e.GLt))}function wK(t,e){return void 0!==t&&void 0!==e&&yK(t,e)}function yK(t,e){return t.ULt===e.ULt}function bK(t,e){return yK(t,e)&&t.XLt===e.XLt}function AK(t,e){for(const i of t)if(bK(i,e))return!0;return!1}var SK=class extends So{get FC(){return this.KLt}get Rt(){const t=this.jLt();if(!t)return!1;for(const e of this.VC.mC)if(e.QLt===t)return!0;return!1}set Rt(t){if(t!==this.Rt)if(t){var e;let t=null==(e=this.VC.wC(0))?void 0:e.QLt;const i=this.na.JLt;for(const e of this.VC.mC)if(e.$Lt===i){t=e.QLt;break}this.tBt(t)}else this.tBt(void 0)}get BC(){if(!this.Rt)return;const t=this.na.eBt;for(const e of this.VC.mC)if(AK(t,e.QLt))return e}get wa(){return this.eu||(this.eu=xi(this)),this.eu}get o(){return this.eF.toString()}get OC(){return this.eF}get Ch(){return this.iF}set Ch(t){t!==this.iF&&(this.iF=t,this._o(new te(this)))}get gs(){return this.VA}get LE(){return this.Rt?"enabled":"disabled"}get WC(){return this.Lct}set WC(t){let e=[];if(t){e=t.filter((t=>{const e=this.BC?KW(this.BC):void 0;return As.Ys.Np(e,KW(t))})).filter((e=>this.VC.JO(t)&&e.Lst))}else e=this.VC.mC.filter((t=>t.Lst));if(0!==e.length){if(!(t===this.Lct||this.Lct&&of(this.Lct,e))){if(this.Lct=t?e:void 0,this.na.iBt(e.map((t=>t.$Lt))),1===e.length){const t=e[0].$Lt,i=this.Zp===Fo.yE,s=this.XH.vQ;uh(this.na.sBt(t,{nBt:!0,rBt:s&&i,oBt:s&&!i}))}this._o(new HW(e,this))}}else this._o(new YW)}nF(t){this.Rt=t}yn(){this.Ro(),this.na.vn(ut.MLt,this.hBt),this.na.vn(ut.LLt,this.aBt);for(const t of this.VC.mC)t.yn();this.VC.nr()}constructor(t,e,i,s,n){var r;super(),this.Zp=t,this.na=e,this.XH=i,this.yh=s,this.VC=n,this.Lct=void 0,this.uBt=void 0,this.cBt=()=>this._o(new te(this)),this.hBt=()=>{const t=this.BC;t&&this.uBt!==t&&(this.uBt=t,this._o(new $u(t)))},this.aBt=()=>{const t=this.Rt;this.lBt!==t&&(this.lBt=t,this.yh._o(new Pc(this)),this._o(new Pc(this)))},this.uBt=this.BC,this.lBt=this.Rt;const o=n.wC(0);var h,a;this.iF=null!=(h=null==o?void 0:o.QLt.l)?h:"",this.VA=null!=(a=null==o?void 0:o.QLt.gs)?a:"",this.KLt=null==o||null==(r=o.QLt)?void 0:r.YLt.map(RK).filter(ol),this.eF=Lt(),this.na.bn(ut.MLt,this.hBt),this.na.bn(ut.LLt,this.aBt);for(let t=0;t<this.VC.V;t++){this.VC.wC(t).bn("update",this.cBt)}}},TK=class extends SK{get Lt(){return cn.lDt}jLt(){return this.na.dBt}tBt(t){uh(this.na.fBt(t))}constructor(t,e,i,s){super(Fo.wE,t,e,i,s)}},kK=class extends SK{get Lt(){return Eo.lDt}jLt(){return this.na._Bt}tBt(t){uh(this.na.vBt(t))}constructor(t,e,i,s){super(Fo.yE,t,e,i,s)}},EK=class extends So{get o(){return String(this.$Lt.o)}get OC(){return this.$Lt.o}get jG(){return this.$Lt.jG}get Tyt(){return this.$Lt.Tyt}get Ch(){var t;return null!=(t=this.iF)?t:this.QLt.l}set Ch(t){this.Ch!==t&&(this.iF=t,this._o(new AZ(this.wa)))}get Iyt(){return this.QLt.ULt.gBt()}get kyt(){return this.$Lt.kyt}LW(){}MW(){}yn(){this.Ro()}constructor(t,e){super(),this.$Lt=t,this.QLt=e,this.iF="",this.Lst=!0}},xK=class extends EK{get Swt(){return 0}get Frt(){var t;return(null==(t=this.$Lt.Frt)?void 0:t.UPt)||""}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){return bZ(this)}constructor(t,e){super(t,e),this.eu=void 0}},IK=class extends EK{get Frt(){var t;return(null==(t=this.$Lt.Frt)?void 0:t.ZPt)||""}get Eyt(){return this.mBt}set Eyt(t){this.mBt!==t&&(this.mBt=t,this._o(new AZ(this.wa)))}get Xdt(){var t,e;return null!=(e=null!=(t=this.RPt)?t:this.$Lt.Xdt)?e:0}set Xdt(t){this.Xdt!==t&&(this.RPt=t,this._o(new AZ(this.wa)))}get Ti(){var t,e;return null!=(e=null==(t=this.$Lt.CPt)?void 0:t.Ti)?e:0}get ji(){var t,e;return null!=(e=null==(t=this.$Lt.CPt)?void 0:t.ji)?e:0}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){return yZ(this)}constructor(t,e){super(t,e),this.eu=void 0,this.mBt=0,this.RPt=void 0}};function RK(t){return"public.accessibility.describes-video"===t?Pe.LC:"public.accessibility.transcribes-spoken-dialog"===t?Pe.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?Pe.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?Pe.MC:void 0}r(),r();var Ur=new class{pBt(t){if(!this.Rt())return!1;const e=[];return!(e.length>0)||e.some((e=>e.toLowerCase()===t.toLowerCase()))}wBt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.pBt(t)&&As.hw("DEBUG "+t+" -",...i)}zN(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.pBt(t)&&As.hw("INFO "+t+" -",...i)}yBt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.pBt(t)&&As.aw("WARNING "+t+" -",...i)}lt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.pBt(t)&&As.uw("ERROR "+t+" -",...i)}bBt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.pBt(t)&&As.uw("FATAL "+t+" -",...i)}constructor(){this.Rt=()=>!1}},Xt="HLSPlaylistParser",kc="Discontinuity",Wu="Buffering",CK=class{Jdt(){var t;const e=null==(t=this.na.Nr)?void 0:t.ABt;if(!e||0===e.length)return void Ur.yBt("LLHLSTrackConfigurator","The HLSModel contains no variant streams.");var i;const s=null!=(i=Do(e,(t=>0!==t.SBt.length&&0!==t.TBt.length)))?i:e[0],n=e.filter((t=>t!==s));for(const t of s.SBt){const e=new tl,i=[];e.QO(new xK(s,t)),i.push(t);for(const s of n)for(const n of s.SBt)if(pK(n,t)&&!AK(i,n)){e.QO(new xK(s,n)),i.push(n);break}this.kBt.tt(new TK(this.na,this.XH,this.kBt,e))}for(const t of s.TBt){const e=new tl,i=[];e.QO(new IK(s,t)),i.push(t);for(const s of n)for(const n of s.TBt)if(pK(n,t)&&!AK(i,n)){e.QO(new IK(s,n)),i.push(n);break}this.EBt.tt(new kK(this.na,this.XH,this.EBt,e))}}xBt(){this.IBt(this.kBt),this.IBt(this.EBt)}IBt(t){const e=[];for(const i of t.mC){const t=[];for(const e of i.VC.mC)fh(e.$Lt.RBt,e.QLt)||t.push(e);for(const e of t)i.VC.rT(e),e.yn();0===i.VC.V&&e.push(i)}for(const i of e)t.it(i),i.yn()}CBt(t,e){const i=this.PBt(t);void 0!==i&&(i.Xdt=e)}DBt(t,e){const i=this.PBt(t);void 0!==i&&(i.Eyt=e)}PBt(t){for(const e of this.EBt.mC){const i=Do(e.VC.mC,(e=>e.QLt===t));if(void 0!==i)return i}}constructor(t,e,i,s){this.na=t,this.XH=e,this.kBt=i,this.EBt=s}};r();var PK=class{get jG(){return this.uut.zit}get QG(){return this.nCt.zit}JG(t){if("segment"!==t.zw&&"preload-hint"!==t.zw)return;const e=[new Zz(this.nCt)];return"stream"!==t.tE||!function(t){return"segment"===t.zw&&"initialization-segment"!==t.CE}(t)&&"preload-hint"!==t.zw?e.push(new Hz(this.uut)):e.push(new Xz(this.uut,1e3)),new Gz(e)}JRt(t){this.uut=new Gt(Gt.DRt,Gt.NRt,1,t)}constructor(t){const e=t.jG>0?t.jG:Gt.out,i=t.QG>0?t.QG:Uz.out;this.uut=new Gt(Gt.DRt,Gt.NRt,1,e),this.nCt=new Uz(Uz.DRt,Uz.NRt,i)}};r();var DK=class extends me{constructor(t){super(ut.VLt),this.lt=t}};r();var NK=class{l$(t,e){const i={zw:De.qW,CZ:[],J4:t.map((t=>({Fk:t}))),u5:e};return Promise.resolve(void 0!==this.Dst.l$([i]))}constructor(t){this.Dst=t}};r(),r();var MK=(t,e,i,s,n)=>t.filter((t=>!!fh(s,t)||1.1*t.jG<=i.jG)),LK=(t,e,i,s,n)=>t.filter((t=>{if(fh(s,t))return!0;let r=1/0;for(const e of t.RBt){var o,h;r=_.min(r,null!=(h=null!=(o=e.ULt.NBt)?o:e.ULt.MBt)?h:1/0)}r===1/0&&(r=1);const a=2*i.QG+t.jG*r/i.jG;return t.jG<=e.jG||n.LBt>a})),BK=(t,e,i,s,n)=>Le(t,((t,e)=>e.jG-t.jG)),OK=(t,e,i,s,n)=>t.every((t=>t.kyt&&!S(t.kyt)))?Le(t,((t,e)=>e.kyt-t.kyt)):t,FK=(t,e,i,s,n)=>0===s.length?t:Le(t,((t,e)=>{const i=fh(s,t)?1:0;return(fh(s,e)?1:0)-i})),VK=(t,e,i,s,n,r)=>t.filter((t=>!t.Frt||!e.Frt||!(void 0!==e.Frt.ZPt&&void 0!==t.Frt.ZPt&&!hM(e.Frt.ZPt,t.Frt.ZPt)&&!r.BBt({Fk:'video/mp4; codecs="'+t.Frt.ZPt+'"'}))&&!(void 0!==e.Frt.UPt&&void 0!==t.Frt.UPt&&!hM(e.Frt.UPt,t.Frt.UPt)&&!r.OBt({Fk:'audio/mp4; codecs="'+t.Frt.UPt+'"'})))),WK=(t,e,i,s,n)=>{if(!1===n.glt)return t;if(As.Ys.gp)return t;const r=As.Ys.mp;var o;const h=(null!=(o=null==r?void 0:r.width)?o:n.ji)*PW;var a;const u=(null!=(a=null==r?void 0:r.height)?a:n.Ti)*PW;for(let e=0;e<t.length;e++){const i=t[e];if(void 0===i.CPt)return t;const s=i.CPt.Ti,n=i.CPt.ji;if(s<=u&&n<=h)return t.slice(e,t.length)}return[]},UK=(t,e,i,s,n)=>function(t,e){const i=e.glt;if(void 0===i&&!As.Ys.Qs)return t;if(!1===i)return t;for(let i=0;i<t.length;i++){const s=t[i];if(void 0===s.CPt)return t;const n=s.CPt.Ti,r=s.CPt.ji;if(n===e.Ti&&r===e.ji)return t.slice(i,t.length);if(n<e.Ti||r<e.ji)return t.slice(0===i?i:i-1,t.length)}return[]}(t,n);var GK="AbrEvaluator",ZK=class{get FBt(){return this.XH.Zj}VBt(t){this.g_=t}async WBt(t,e,i,s,n){return(await this.UBt(t,e,i,s,n))[0]}async UBt(t,e,i,s,n){if(0===t.length)throw new m("AbrEvaluator - Unable to select optimal variant stream from an empty list.");Ur.wBt(GK,"Performing optimal variant stream selection.");const r=this.FBt;let o=t;for(const t of this.g_){const h=t(o,e,r,i,s,n);o=Qc(h)?h:await h}if(0===o.length){Ur.yBt(GK,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[Ei(t,(t=>t.jG))]}return o}constructor(t){this.XH=t,this.g_=[VK,MK,LK,BK,WK,UK,OK,FK]}};function Bc(t,e){return[t,void 0!==e?t+e-1:Eu]}function HK(t){return Boolean(t.LN)}function XK(t){return Boolean(t.xct)}r(),r(),r(),r(),r();var el=function(t){return t[t.wE=0]="wE",t[t.yE=1]="yE",t[t.TW=2]="TW",t[t.GBt=3]="GBt",t}({}),zK=function(t){return t[t.ZBt=0]="ZBt",t[t.HBt=1]="HBt",t}({}),G=function(t){return t[t.xH=0]="xH",t[t.XBt=1]="XBt",t[t.zBt=2]="zBt",t}({}),mn=function(t){return t[t.oE=0]="oE",t[t.qBt=1]="qBt",t[t.YBt=2]="YBt",t}({});function rh(t){return t?t.oAt?t.Fx+"@"+t.oAt.Sn+"-"+(null!=(e=t.oAt.V)?e:""):""+t.Fx:"";var e}function qK(t,e){if(e===t)return!0;if(e.Fx!==t.Fx)return!1;if(!t.oAt)return!0;if(e.oAt){const i=Bc(t.oAt.Sn,t.oAt.V),s=Bc(e.oAt.Sn,e.oAt.V);if(i[0]<=s[0])return void 0===i[1]||void 0!==s[1]&&i[1]>=s[1]}return!1}function YK(t,e){return t===e||t.Fx===e.Fx&&(t.oAt&&e.oAt?t.oAt.Sn===e.oAt.Sn&&t.oAt.V===e.oAt.V:t.oAt===e.oAt)}function KK(t){const e=!!t.KBt||void 0;return{o:t.o,jBt:t.jBt,EZ:t.EZ,QBt:t.QBt,ct:t.ct,JBt:t.JBt,KBt:e,$Bt:t.tOt,eOt:t.iOt,sOt:t.sOt,nOt:t.nOt}}function jK(t,e){var i,s,n;return{UPt:null!=(i=e.UPt)?i:null==t?void 0:t.UPt,ZPt:null!=(s=e.ZPt)?s:null==t?void 0:t.ZPt,rOt:null!=(n=e.rOt)?n:null==t?void 0:t.rOt}}async function QK(t,e,i,s,n){const r=e.filter((t=>Xa(t,"audio"))),o=e.filter((t=>Xa(t,"video"))),h=[],a=i.map((t=>async function(t,e,i){if(!t.Iyt)return;if(!t.oOt)return;if(t.EE!==G.zBt)return;const s=JK(t.oOt);if(!s)return;if(s.jw===Zi)return{_T:s,sZ:[],nZ:void 0,lG:t.Iyt,rZ:[]};if(s.jw===Gg&&t.oOt===Kg)return{_T:s,sZ:[],nZ:t.Iyt,lG:void 0,rZ:[]};{Ur.zN("HLSDrmUtils","Fetching key uri "+t.Iyt+".");const n=await e.eE({Xu:t.Iyt,DE:i});let r=await n.Bk();return s.jw===Og&&(r=function(t){const e=new DataView(t);return e.byteLength>=8&&e.getUint32(4)===WG?t:UG(t)}(r)),{_T:s,sZ:[r],nZ:void 0,lG:void 0,rZ:[]}}}(t,s,n)));var u;const c=function(t,e){if(0===e.length)return t;const i=t=>{const i=e.indexOf(t._T.jw);return i>=0?i:e.length};return Le(t,((t,e)=>i(t)-i(e)))}((await Promise.all(a)).filter(ol),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const e of c){const i=AX(null!=t?t:{},e._T),s="cbcs";h.push({_T:e._T,sZ:e.sZ,nZ:e.nZ,lG:e.lG,eH:[{initDataTypes:[e._T.Yw],audioCapabilities:SX(r,s,null==i?void 0:i.audioRobustness),videoCapabilities:SX(o,s,null==i?void 0:i.videoRobustness),persistentState:null==i?void 0:i.persistentState,distinctiveIdentifier:null==i?void 0:i.distinctiveIdentifier}],rZ:e.rZ})}return h}function JK(t){return t===Vg?Qg:t===Ja?jg:t===Yg?$g:t===Kg?Ao:void 0}function $K(t){if("#"!==t[0])throw new m("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function tj(t){return"#"!==t[0]?t:t.split(":",1)[0]}function ej(t){const e=t.indexOf(":");if(-1===e||t.length<e+1)throw new m("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(e+1)}function ij(t){const e=yu(ej(t));if(void 0===e)throw new m("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return e}function sj(t){const e={},i=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=i.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?e[n]=r:Ur.yBt(Xt,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=i.exec(t)}return e}function nj(t,e){const i=sj(t);let s,n;try{s=i.URI?As.Ew(i.URI,e):void 0,n=function(t){switch(t){case"AUDIO":return el.wE;case"VIDEO":return el.yE;case"SUBTITLES":return el.TW;case"CLOSED-CAPTIONS":return el.GBt}throw new m("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(i.TYPE)}catch(e){throw new m("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const r=i["GROUP-ID"],o=i.LANGUAGE,h=i["ASSOC-LANGUAGE"],a=i.NAME,u="YES"===i.DEFAULT;let c="YES"===i.AUTOSELECT;const l="YES"===i.FORCED,d=i["INSTREAM-ID"],f=i.CHARACTERISTICS,_=i.CHANNELS;if(r||Ur.yBt(Xt,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),o||Ur.yBt(Xt,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),a||Ur.yBt(Xt,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),n===el.GBt?(s&&Ur.yBt(Xt,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),d?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(d)||Ur.yBt(Xt,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):Ur.yBt(Xt,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):d&&Ur.yBt(Xt,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),u&&!c&&(c=!0,i.AUTOSELECT&&Ur.yBt(Xt,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),i.FORCED&&n!==el.TW&&Ur.yBt(Xt,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===r||void 0===a)throw new m("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{hOt:h,xPt:_,YLt:f,XLt:r,ZLt:c,GLt:u,HLt:l,zLt:d,gs:o,l:a,zw:n,Iyt:s}}function rj(t,e,i){const s=sj(t);let n,r,o;try{n=As.Ew(i,e),o=function(t){if(void 0===t)return;const e=t.split("x"),i=Number(e[0]),s=Number(e[1]);if(S(i)||S(s))throw new m("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{ji:i,Ti:s}}(s.RESOLUTION),r=function(t){if(!t)return;let e,i,s;const n=t.split(",");for(const t of n){const n=t.trim();Cl(n,"mp4a")?e="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n||"flac"===n.toLowerCase()?e=n:Cl(n,"avc")||Cl(n,"hvc1")||Cl(n,"hev1")||Cl(n,"dvh")||Cl(n,"vp09")||Cl(n,"av01")?i=n:s=s?s+","+n:n}return{UPt:e,ZPt:i,rOt:s}}(s.CODECS)}catch(e){throw new m("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const h=yu(s.BANDWIDTH),a=yu(s["AVERAGE-BANDWIDTH"]),u=yu(s.SCORE),c=yu(s["FRAME-RATE"]),l=s["HDCP-LEVEL"],d=[];if(void 0!==s["ALLOWED-CPC"]){const t=s["ALLOWED-CPC"].split(",");d.push(...t.map((t=>{const e=t.split(":");return{keysystem:e[0],label:e[1]}})))}const f=s["VIDEO-RANGE"],_=s.AUDIO,v=s.VIDEO,g=s.SUBTITLES,p=s["CLOSED-CAPTIONS"];if(void 0===h?Ur.yBt(Xt,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==a&&a>h&&Ur.yBt(Xt,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),r||Ur.zN(Xt,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),r&&r.ZPt&&void 0===o&&Ur.zN(Xt,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===l||fh(["TYPE-0","TYPE-1","NONE"],l)||Ur.yBt(Xt,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===f||fh(["SDR","PQ","HLG"],f)||Ur.yBt(Xt,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===h)throw new m("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{aOt:d,uOt:_,Tyt:a,jG:h,cOt:p,Frt:r,Xdt:c,lOt:l,CPt:o,kyt:u,dOt:g,Iyt:n,fOt:v,_Ot:f}}function oj(t,e){const i=sj(t);if(!i.URI)throw new m("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return rj(t,e,i.URI)}catch(e){throw new m("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function yu(t){const e=Number(t);return S(e)?void 0:e}function hj(t,e){const i=sj(t);let s,n;try{s=function(t){switch(t){case"NONE":return G.xH;case"AES-128":return G.XBt;case"SAMPLE-AES":return G.zBt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new m("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(i.METHOD),n=i.URI?vj(i.URI,e):void 0}catch(e){throw new m("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=i.KEYFORMAT,o=i.IV,h=i.KEYFORMATVERSIONS;let a,u,c,l,d;if(s!==G.xH){if(c=r||Kg,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(JK(c)!==Qg)throw new m("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=G.zBt}else a=s;u=n,l=o?fp(o):void 0,d=h?h.split("/").map((t=>Number(t))):[1]}else a=G.xH,(n||r||h||o)&&Ur.yBt(Xt,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{EE:a,Iyt:u,vOt:l,oOt:c,gOt:d}}function aj(t){const e=ej(t);if(!e)return[void 0,""];const[i,s]=e.split(",");return[yu(i),s]}function uj(t,e){const i=t.split("@"),s=yu(i[0]),n=i.length>1?yu(i[1]):e;if(void 0===s||void 0===n)throw new m("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{Sn:n,V:s}}function cj(t){if(void 0!==t)return uj(t,void 0)}function lj(t,e){return uj(ej(t),e)}function dj(t,e){const i=sj(t);try{const t=vj(i.URI,e);return{Fx:t,oAt:cj(i.BYTERANGE)}}catch(e){throw new m("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function fj(t){const e=ej(t);if(!e)throw new m("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const i=new Date(e.trim());if(!zf(i))throw new m("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return i}function _j(t){const e=sj(t),i=e["START-DATE"],s=e["END-DATE"],n=yu(e["PLANNED-DURATION"]);let r,o,h,a=yu(e.DURATION);void 0!==e["SCTE35-CMD"]&&(r=fp(e["SCTE35-CMD"]).buffer),e["SCTE35-IN"]&&(o=fp(e["SCTE35-IN"]).buffer),e["SCTE35-OUT"]&&(h=fp(e["SCTE35-OUT"]).buffer);const u="YES"===e["END-ON-NEXT"],c=function(t){const e={};for(const i of w.keys(t)){const s=t[i];void 0!==s&&Cl(i,"X-")&&(e[i]=s)}return e}(e),l=e.ID,d=e.CLASS;let f,_;if(void 0===i)Ur.yBt(Xt,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+i+".");else if(f=new Date(i),_=void 0!==s?new Date(s):void 0,zf(f)||Ur.yBt(Xt,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const e=new Date(f.getTime()+1e3*a);_?_.getTime()!==e.getTime()&&(Ur.yBt(Xt,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),_=e):_=e}else _&&(a=(f.getTime()-_.getTime())/1e3);if(u&&(e.CLASS||Ur.yBt(Xt,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),e.DURATION&&Ur.yBt(Xt,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),_&&Ur.yBt(Xt,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===l&&Ur.yBt(Xt,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===l||void 0===f)throw new m("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:l,jBt:d,EZ:f,QBt:_,ct:a,JBt:n,iOt:r,nOt:o,sOt:h,KBt:u,tOt:c}}function vj(t,e){if(void 0===t)throw new m("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return As.Ew(t,e)}function gj(t,e){const i=sj(t),s=yu(i.DURATION),n=vj(i.URI,e),r=cj(i.BYTERANGE),o="YES"===i.INDEPENDENT,h="YES"===i.GAP;if(void 0===s)throw new m("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:s,Iyt:{Fx:n,oAt:r},mOt:o,pOt:h}}function mj(t){const e=sj(t);return{wOt:"YES"===e["CAN-BLOCK-RELOAD"],yOt:yu(e["CAN-SKIP-UNTIL"]),bOt:"YES"===e["CAN-SKIP-DATERANGES"],AOt:yu(e["HOLD-BACK"]),SOt:yu(e["PART-HOLD-BACK"])}}function pj(t,e){const i=sj(t);if(void 0===i.URI)throw new m("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=vj(i.URI,e),n=yu(i["LAST-MSN"]),r=yu(i["LAST-PART"]);if(void 0===n)throw new m("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{Iyt:s,TOt:n,kOt:r}}function wj(t,e){var i;const s=sj(t),n=yu(s["SKIPPED-SEGMENTS"]),r=null==(i=s["RECENTLY-REMOVED-DATERANGES"])?void 0:i.split("\t");if(void 0===n)throw new m("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{EOt:n,xOt:r,IOt:e}}function yj(t){const e=yu(sj(t)["PART-TARGET"]);if(void 0===e)throw new m("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return e}function bj(t){switch(ej(t)){case"VOD":return mn.qBt;case"EVENT":return mn.YBt;default:return Ur.yBt(Xt,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),mn.oE}}function Aj(t,e){const i=sj(t);let s,n;try{s=function(t){if(void 0===t)throw new m("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return zK.ZBt;if("PART"===t)return zK.HBt;throw new m("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(i.TYPE),n=vj(i.URI,e)}catch(e){throw new m("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=yu(i["BYTERANGE-START"]),o=yu(i["BYTERANGE-LENGTH"]);let h;return void 0===r&&void 0===o||(h={Sn:r||0,V:o}),{zw:s,Iyt:{Fx:n,oAt:h}}}r(),r(),r();var Sj=class t{ROt(){const t=this.COt[this.POt];return this.POt+=1,t}DOt(){return this.COt[this.POt]}Nb(){const e=new t("");return e.POt=0,e.COt=this.COt.slice(this.POt),e}static NOt(t){if(!t)return[];return t.split(/[\r\n]+/).map((t=>t.trim())).filter((t=>t))}constructor(e){this.POt=0,this.COt=t.NOt(e)}};function Tj(t,e,i){const s=t.Iyt;let n=t.aN,r=t.MOt,o=t.Sn;switch(i){case"#EXT-X-VERSION":n=function(t){const e=ij(t);return S(e)?(Ur.yBt(Xt,"Playlist version is NaN: "+t+"."),1):e}(e);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":o=function(t){const e=sj(t),i=yu(e["TIME-OFFSET"]);if(void 0===i)throw new m("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{LOt:i,BOt:"YES"===e.PRECISE}}(e);break;case"#EXT-X-DEFINE":Ur.yBt(Xt,"Ignoring unsupported #EXT-X-DEFINE: "+e+".");break;default:Ur.zN(Xt,"Ignoring unrecognized line or comment: "+e+".")}return{Iyt:s,aN:n,MOt:r,Sn:o}}function kj(t,e){return t.map((t=>t.EE===G.xH||t.vOt?t:ne({},t,{vOt:Ej(e)})))}function Ej(t){const e=new DataView(new ArrayBuffer(16)),i=new er;return i.Pb(8),Km(e,i,po.fromNumber(t)),new j(e.buffer)}function xj(t,e,i){Ur.zN(Xt,"Parsing M3U8 playlist at "+t+".");const s=new Sj(i);if("#EXTM3U"!==s.ROt())throw new m("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(i)?function(t,e){let i;try{i=As.Ew(t)}catch(e){throw Ur.yBt(Xt,"The master playlist has no valid base URI: "+t+"."),new m("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let s={Iyt:i,MOt:void 0,Sn:void 0,aN:void 0};const n=[],r=[],o=[],h=[];for(;;){const t=e.ROt();if(!t)break;try{const a=$K(t);switch(a){case"#EXT-X-MEDIA":{const e=nj(t,i);n.push(e);break}case"#EXT-X-STREAM-INF":{const s=rj(t,i,e.ROt());r.push(s);break}case"#EXT-X-I-FRAME-STREAM-INF":{const e=oj(t,i);o.push(e);break}case"#EXT-X-SESSION-DATA":Ur.yBt(Xt,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const e=hj(t,i);h.push(e);break}default:s=Tj(s,t,a)}}catch(e){Ur.yBt(Xt,"Ignoring unparsable line: "+t,e)}}let a=s.aN;var u;const c=null!=(u=s.MOt)&&u,l=s.Sn;return void 0===a&&(Ur.yBt(Xt,"The playlist has no #EXT-X-VERSION, assuming version is 2."),a=2),a>=8&&(r.some((t=>void 0!==t.kyt))||o.some((t=>void 0!==t.kyt)))&&(r.some((t=>void 0===t.kyt))||o.some((t=>void 0===t.kyt)))&&Ur.yBt(Xt,"If one master playlist variant stream has a SCORE, all variants should have it."),{Iyt:i,aN:a,MOt:c,Sn:l,OOt:o,rZ:h,LN:n,FOt:r}}(t,s):function(t,e,i){let s={Iyt:t,MOt:void 0,Sn:void 0,aN:void 0};const n=[];let r,o,h,a,u=!1,c=!1;const l=[],d=Vh();let f,_,v,g,p,w,y,b,A,S=[],T=[],k=!1,E=!1;const x=[],I=[];let R,C,P,D,N,M=0,L=!1,B=mn.oE,O=!1,F=0;try{N=As.Ew(t)}catch(e){throw Ur.yBt(Xt,"The media playlist has no valid base URI: "+t+".",e),new m("HLSPlaylistParser - Could not parse HLS media playlist.")}const V=i.Nb();for(;void 0===C||void 0===P;){const t=V.ROt();if(!t)break;try{switch(tj(t)){case"#EXT-X-MEDIA-SEQUENCE":C=ij(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":P=ij(t)}}catch(e){Ur.yBt(Xt,"Ignoring unparsable line: "+t,e)}}void 0===C&&(Ur.zN(Xt,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),C=0),void 0===P&&(Ur.zN(Xt,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),P=0);let W=C,U=P;for(;;){const t=i.ROt();if(!t)break;let e=!1;try{const i=tj(t);switch(i){case"#EXTINF":e=!0,[f,_]=aj(t);break;case"#EXT-X-BYTERANGE":e=!0,v=lj(t,M),v&&(M=v.Sn+v.V);break;case"#EXT-X-DISCONTINUITY":e=!0,k=!0,U++;break;case"#EXT-X-KEY":{var Z;e=!0;const i=hj(t,N);if(i.EE===G.xH){d.clear(),A=void 0;break}var H;const s=null!=(H=null==(Z=i.oOt)?void 0:Z.toString())?H:"identity";d.set(s,i),i.EE===G.XBt&&(A=i);break}case"#EXT-X-MAP":e=!0,p=dj(t,N),w=A;break;case"#EXT-X-PROGRAM-DATE-TIME":e=!0,y=fj(t);break;case"#EXT-X-GAP":e=!0,E=!0;break;case"#EXT-X-BITRATE":e=!0,b=ij(t);break;case"#EXT-X-TARGETDURATION":r=ij(t);break;case"#EXT-X-DATERANGE":{const e=_j(t);n.push(e);break}case"#EXT-X-PART":{e=!0;const i=gj(t,N);T.push(i);break}case"#EXT-X-PRELOAD-HINT":{const e=Aj(t,N);x.push(e);break}case"#EXT-X-SKIP":{l.length>0&&Ur.yBt(Xt,"#EXT-X-SKIP must appear before any #EXTINF tags."),e=!0;const i=wj(t,W);F=i.EOt,D=i.xOt,W+=i.EOt;break}case"#EXT-X-SERVER-CONTROL":{const e=mj(t);u=e.wOt,o=e.yOt,c=e.bOt,h=e.AOt,a=e.SOt;break}case"#EXT-X-RENDITION-REPORT":{const e=pj(t,N);I.push(e);break}case"#EXT-X-PART-INF":R=yj(t);break;case"#EXT-X-MEDIA-SEQUENCE":e&&Ur.yBt(Xt,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":e&&Ur.yBt(Xt,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":L=!0;break;case"#EXT-X-PLAYLIST-TYPE":B=bj(t);break;case"#EXT-X-I-FRAMES-ONLY":O=!0;break;default:if(Cl(i,"#"))s=Tj(s,t,i);else{g=As.Ew(t,N);const e=p?{Iyt:p,VOt:w}:void 0,i={rZ:kj(xg(d),W),pW:S,WOt:T,ct:f,NZ:_,UOt:k,Iyt:{oAt:v,Fx:g},GOt:e,ZOt:y,pOt:E,HOt:b,IOt:W,XOt:U};l.push(i),W++,S=[],T=[],f=void 0,_=void 0,k=!1,v=void 0,g=void 0,y=void 0,E=!1,b=void 0}}}catch(e){Ur.yBt(Xt,"Ignoring unparsable line: "+t,e)}}if(T.length){const t=p?{Iyt:p,VOt:A}:void 0,e={rZ:kj(xg(d),W),pW:S,WOt:T,ct:f,NZ:_,UOt:k,Iyt:void 0,GOt:t,ZOt:y,pOt:E,HOt:b,IOt:W,XOt:U};l.push(e)}let X=s.aN;var z;const q=null!=(z=s.MOt)&&z,Y=s.Sn;void 0===X&&(Ur.yBt(Xt,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),X=2),void 0===r&&Ur.yBt(Xt,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const K=l.length,j=K>0;j||Ur.yBt(Xt,"The HLS media playlist contains no segments.");const Q=j&&l[K-1].WOt.length>0;return Q&&void 0===R&&Ur.yBt(Xt,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),Q&&void 0===a&&Ur.yBt(Xt,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{wOt:u,yOt:o,bOt:c,zOt:n,XOt:P,qOt:L,MOt:q,AOt:h,YOt:O,IOt:C,EOt:F,SOt:a,NBt:R,KOt:B,jOt:x,xOt:D,QOt:I,JOt:r,xct:l,Sn:Y,Iyt:N,$Ot:e,aN:X}}(t,e,s)}r(),r();var Ij=class{get Iyt(){return this.ULt.Iyt}get Frt(){return this.wPt}set Frt(t){this.wPt=t?Cj(t):void 0,this.tFt=function(t,e){return!(void 0!==(null==t?void 0:t.UPt)&&void 0===(null==e?void 0:e.UPt)||void 0!==(null==t?void 0:t.ZPt)&&void 0===(null==e?void 0:e.ZPt))}(this.eFt,this.wPt)}get iFt(){return this.tFt}get RBt(){return this.sFt}get SBt(){return this.sFt.filter((t=>t.zw===el.wE))}get TBt(){return this.sFt.filter((t=>t.zw===el.yE))}get nFt(){return this.sFt.filter((t=>t.zw===el.TW))}get rFt(){return this.sFt.filter((t=>t.zw===el.GBt))}oFt(t){for(const e of this.sFt){const i=e.ULt.oFt(t);if(void 0!==i)return i}}hFt(t){for(const e of this.sFt){const i=e.ULt.hFt(t);if(void 0!==i)return i}}aFt(t){_e(this.sFt,t)}constructor(t,e,i){var s,n,r,o;this.o=Rj++,this.kyt=void 0,this.CPt=void 0,this.Tyt=void 0,this.tFt=!1,this.sFt=[],this.ULt=e,this.jG=t.jG,this.Tyt=t.Tyt,this.kyt=t.kyt,this.eFt=t.Frt?Cj(t.Frt):void 0,this.wPt=this.eFt,this.CPt=t.CPt,this.Xdt=t.Xdt,this.uOt=null!=(s=t.uOt)?s:"uFt"+this.o,this.fOt=null!=(n=t.fOt)?n:"cFt"+this.o,this.dOt=null!=(r=t.dOt)?r:"lFt"+this.o,this.cOt=null!=(o=t.cOt)?o:"dFt"+this.o,this.sFt=i}},Rj=0;function Cj(t){return ne({},t,{ZPt:t.ZPt?Xy(t.ZPt):void 0})}r(),r(),r();var Pj=class{get lF(){var t;return this.bF+(null!=(t=this.fFt)?t:0)}get _Ft(){return this.vFt}get gFt(){return this.mFt}get rZ(){return this.pFt.rZ}wFt(t,e,i){this.bF=t,this.vFt=e,this.mFt=i}constructor(t,e,i,s,n,r){this.$it=void 0,this.pFt=t,this.yFt=e,this.bF=i,this.vFt=s,this.mFt=n,this.ct=r.ct,this.Iyt=r.Iyt,this.mOt=r.mOt,this.pOt=r.pOt}},Dj=class{get lF(){var t;return this.bF+(null!=(t=this.bFt)?t:0)}get AFt(){return this.bF}get ct(){return this.FA}get Iyt(){return this.SFt}get _Ft(){return this.vFt}get gFt(){return this.mFt}get WOt(){return this.Av}get TFt(){return this.kFt}get dF(){var t;return this.lF+(null!=(t=this.FA)?t:this.kFt)}set fFt(t){this.bFt=t;for(const e of this.Av)e.fFt=t}get fFt(){return this.bFt}EFt(t){return this.Av[t]}xFt(t){for(let e=0;e<this.Av.length;e++){const i=this.Av[e],s=i.lF,n=s+i.ct;if(s<=t&&t<=n)return t===n&&e+1<this.Av.length?this.Av[e+1]:i}}IFt(t){for(let e=this.Av.length-1;e>=0;e--){const i=this.Av[e];if(i.lF<=t)return i}}RFt(t){let e=this.IFt(t);for(;e&&!e.mOt&&e.yFt>0;)e=this.EFt(e.yFt-1);return e}wFt(t,e,i){const s=t.WOt.length!==this.Av.length||i!==this.mFt;this.vFt=e,this.mFt=i,this.FA=t.ct,null!=this.ZOt||(this.ZOt=t.ZOt),void 0===this.SFt&&(this.SFt=t.Iyt),s&&this.CFt(t.WOt)}CFt(t){this.Av.length>t.length&&(this.Av.length=t.length);let e=0;for(let i=0;i<t.length;i++){const s=t[i],n=this.vFt&&0===i,r=this.mFt&&i===t.length-1,o=this.bF+e;if(i<this.Av.length)this.Av[i].wFt(o,n,r);else{const t=new Pj(this,i,o,n,r,s);t.fFt=this.bFt,this.Av.push(t)}e+=s.ct}this.kFt=e}PFt(){En(this.Av),this.kFt=0}constructor(t,e,i,s,n){this.$it=void 0,this.Av=[],this.kFt=0,this.bF=t,this.GOt=n.GOt,this.vFt=i,this.mFt=s,this.FA=n.ct,this.ZOt=n.ZOt,this.SFt=n.Iyt,this.pOt=n.pOt,this.IOt=n.IOt,this.UOt=n.UOt,this.XOt=e,this.rZ=n.rZ,this.CFt(n.WOt)}};r();var Nj=function(t){return t.DFt="YES",t.NFt="v2",t}({});r();var Mj=class extends dl{};r(),r(),r();var Lj=class extends He{get wa(){return this.eu||(this.eu=function(t){return Qr(ai(t),{get content(){return t.U},get class(){return t.jBt},get startDate(){return t.EZ},get endDate(){return t.QBt},get duration(){return t.ct},get plannedDuration(){return t.JBt},get endOnNext(){return t.KBt},get scte35Cmd(){return t.eOt},get scte35Out(){return t.sOt},get scte35In(){return t.nOt},get customAttributes(){return t.$Bt}})}(this)),this.eu}get jBt(){return this.MFt}get EZ(){return this.LFt}get QBt(){return this.BFt}get ct(){return this.FA}get JBt(){return this.OFt}get KBt(){return this.FFt}get eOt(){return this.VFt}get sOt(){return this.WFt}get nOt(){return this.UFt}get $Bt(){return this.GFt}ir(t){let e=!1;var i;(void 0===this.MFt&&void 0!==t.jBt&&(e=!0,this.MFt=t.jBt),void 0===this.BFt&&void 0!==t.QBt&&(e=!0,this.BFt=t.QBt),void 0===this.FA&&void 0!==t.ct&&(e=!0,this.FA=t.ct),void 0===this.OFt&&void 0!==t.JBt&&(e=!0,this.OFt=t.JBt),!this.FFt&&t.KBt&&(e=!0,this.FFt=t.KBt),e=this.updateCustomAttributes(t,e),void 0===this.VFt&&void 0!==t.eOt&&(e=!0,this.VFt=t.eOt),void 0===this.WFt&&void 0!==t.sOt&&(e=!0,this.WFt=t.sOt),void 0===this.UFt&&void 0!==t.nOt&&(e=!0,this.UFt=t.nOt),this.ZFt(),this.HFt(),this.XFt(),e)&&(this._o(new Kk(this)),null==(i=this.AF)||i._o(new Qk(this)))}updateCustomAttributes(t,e){let i=e;if(t.$Bt)for(const e of w.keys(t.$Bt))void 0===this.GFt[e]&&(i=!0,this.GFt[e]=t.$Bt[e]);return i}ZFt(){this.FA&&!this.BFt&&(this.BFt=new Date(this.LFt.getTime()+An(this.FA)))}HFt(){this.BFt&&!this.FA&&(this.FA=Yf(this.BFt.getTime()-this.LFt.getTime()))}XFt(){this.TF===1/0&&(this.BFt||this.FA)&&(this.TF=Bj(this.bF,this.FA,this.LFt,this.BFt))}constructor(t,e){super(e,Bj(e,t.ct,t.EZ,t.QBt),void 0,!1,t.o),this.MFt=t.jBt,this.LFt=t.EZ,this.BFt=t.QBt,this.FA=t.ct,this.OFt=t.JBt,this.FFt=Boolean(t.KBt),this.GFt=t.$Bt||{},this.VFt=t.eOt,this.WFt=t.sOt,this.UFt=t.nOt,this.ZFt(),this.HFt()}};function Bj(t,e,i,s){return ol(e)?t+e:s?t+(Yf(s.getTime())-Yf(i.getTime())):1/0}var Oj=class extends QL{ir(t,e){Fj(this,Vj(t),e)}UW(t){Wj(this.L.mC,t),super.UW(t)}constructor(){super(void 0,void 0,Hr.DATE_RANGE)}};function Fj(t,e,i){const s=t.L.mC;for(let i=s.length-1;i>=0;i--){const n=s[i],r=Do(e,(t=>t.o===n.o));r?n.ir(r):t.RW(n)}for(const s of e){const e=s.EZ;if(void 0!==e&&!t.M5(s.o)){const n=i(e),r=new Lj(s,n);Wj(t.L.mC,r),t.UW(r)}}}function Vj(t){const e=Vh(),i=[];for(const s of t)if(e.has(s.o)){const t=e.get(s.o),i=ne({},t,aS(s),{$Bt:ne({},t.$Bt,s.$Bt)});e.set(s.o,i)}else e.set(s.o,s),i.push(s.o);return i.map((t=>e.get(t)))}function Wj(t,e){const i=sr(t,(t=>t.jBt===e.jBt));i&&i.KBt&&i.ir({o:i.o,QBt:e.EZ})}var Uj=String.fromCharCode(95),Gj=Uj+"HLS_msn",Zj=Uj+"HLS_part",Hj=Uj+"HLS_skip",Xj="HLSMediaPlaylist",zj=class{get qOt(){if(0===this.Obt.length)return!1;return this.Obt[this.Obt.length-1].gFt}get ct(){return this.FA}get cR(){return this.j4}get zFt(){return this.qFt}get MBt(){return this.YFt}get NBt(){return this.KFt}get AOt(){return this.qOt?0:this.jFt?this.jFt:this.YFt?3*this.YFt:void 0}get SOt(){var t;return null!=(t=this.QFt)?t:this.KFt?3*this.KFt:void 0}get wOt(){return this.JFt}get yOt(){return this.$Ft}get bOt(){return this.tVt}get KOt(){return this.eVt}get iVt(){return void 0!==this.NBt}get sVt(){if(this.qOt)return!0;const t=As.Wm()/1e3,e=this.nVt,i=this.rVt;return void 0!==e&&t-e<i}get nVt(){return this.oVt}get hVt(){if(this.aVt)return As.Wm()/1e3-this.aVt}get fFt(){return this.bFt}get rVt(){var t;return null!=(t=this.YFt)?t:void 0===this.oVt?5:1}get xct(){return this.Obt}get zOt(){return this.uVt}get cVt(){return this.lVt}set cVt(t){this.lVt=t}get Sn(){return this.bW}get dVt(){return this.fVt}gBt(t){if(!t)return this.Iyt;const e=As.Bh(this.Iyt);return void 0!==t.IOt&&e.searchParams.append(Gj,String(t.IOt)),void 0!==t._Vt&&e.searchParams.append(Zj,String(t._Vt)),void 0!==t.zD&&e.searchParams.append(Hj,t.zD),e.href}Hat(t){const e=this.vVt(t);return e<0?void 0:this.Obt[e]}vVt(t){const e=this.Obt;if(0===e.length)return-1;const i=t-e[0].IOt;return i<0||i>=e.length?-1:i}gVt(t){if(0===this.Obt.length)return;const e=DZ(qj.Vm,this.Obt,t);if(!(e<0)){const i=this.Obt[e];return t===i.dF&&e+1<this.Obt.length?this.Obt[e+1]:i}{const e=this.Obt[this.Obt.length-1];if(t===e.dF)return e}}mVt(t){if(0===this.Obt.length)return;const e=this.Obt[0];if(t<e.dF)return e;const i=this.Obt[this.Obt.length-1];return t>=i.lF?i:this.gVt(t)}oFt(t){const e=this.mVt(t);if(void 0===e)return;for(let i=e.IOt-this.Obt[0].IOt;i>=0;i--){const e=this.Obt[i];if(void 0!==e.ZOt)return new Date(e.ZOt.getTime()+1e3*(t-e.lF))}}hFt(t){let e;for(const i of this.Obt)if(Yj(i))if(void 0===e)e=i;else{if(!(i.ZOt.getTime()<=t.getTime()))break;e=i}if(void 0!==e)return e.lF+(t.getTime()-e.ZOt.getTime())/1e3}pVt(t){switch(t){case zK.ZBt:return this.wVt;case zK.HBt:return this.yVt;default:return}}wFt(t){var e;void 0===this.YFt&&(this.YFt=null!=(e=t.JOt)?e:this.bVt(t));void 0===this.jFt&&void 0!==t.AOt&&(this.jFt=t.AOt),void 0===this.KFt&&void 0!==t.NBt&&(this.KFt=t.NBt),void 0===this.QFt&&void 0!==t.SOt&&(this.QFt=t.SOt),this.JFt=t.wOt,this.$Ft=t.yOt,this.tVt=t.bOt,this.eVt=t.KOt,this.Ubt(t),this.AVt(t);const i=Do(t.jOt,(t=>t.zw===zK.ZBt)),s=Do(t.jOt,(t=>t.zw===zK.HBt));this.wVt=i?{Iyt:i.Iyt,zw:i.zw,XOt:t.XOt}:void 0,this.yVt=s?{Iyt:s.Iyt,zw:s.zw,XOt:t.XOt}:void 0,this.oVt=As.Wm()/1e3;const n=this.j4.Tn(this.j4.V-1);this.SVt();const r=this.j4.Tn(this.j4.V-1);(!this.aVt||r-n>0)&&(this.aVt=this.oVt),null!=this.bW||(this.bW=t.Sn)}SVt(){this.qFt=this.TVt(),this.j4=this.kVt(this.qFt),this.FA=this.EVt()}TVt(){const t=this.xct;if(0===t.length)return ee.WB();const e=t[0].lF,i=t[t.length-1].dF;return new ee([e,i])}kVt(t){if(0===t.V||this.qOt)return t;const e=t.Sn(0),i=t.Tn(0)-this.MSt;return i<e?ee.FB(e):new ee([e,i])}get MSt(){return this.qOt?0:null!=(i=null!=(e=null!=(t=this.xVt)?t:this.SOt)?e:this.AOt)?i:0;var t,e,i}EVt(){return 0===this.Obt.length?0:this.qOt?Mh(this.Obt,(t=>{var e;return null!=(e=t.ct)?e:t.TFt})):1/0}bVt(t){let e;for(const i of t.xct)if(void 0!==i.ct){const t=_.max(1,_.round(i.ct));(void 0===e||e<t)&&(e=t)}if(void 0===e)throw new m("HLSModel - Could not determine required segment target duration.");return e}Ubt(t){if(0===t.xct.length)return En(this.Obt),void this.IVt();const e=this.RVt(t);if(!e)return;let i,s,n;e.CVt>0&&this.Obt.splice(0,e.CVt);const r=t.EOt;if(r>0){if(r>this.Obt.length)throw new Mj("New playlist skips over missing segments.");const e=this.Obt[r-1];if(void 0===e.ct)throw new Mj("New playlist skips over an incomplete segment.");i=e.AFt+e.ct,n=e.XOt-t.XOt,s=r;for(let t=0;t<r;t++)this.Obt[t].PFt()}else i=e.PVt,n=0,s=0;for(let e=0;e<t.xct.length;e++,s++){const r=t.xct[e],o=0===e,h=t.qOt&&e===t.xct.length-1,a=r.ct,u=r.XOt+n;if(s<this.Obt.length){const t=this.Obt[s];0,t.wFt(r,o,h)}else{let t=r;if(this.Obt.length>0&&void 0===t.GOt){t=ne({},t,{GOt:this.Obt[this.Obt.length-1].GOt})}const e=new Dj(i,u,o,h,t);e.fFt=this.bFt,this.Obt.push(e)}void 0!==a&&(i+=a)}}RVt(t){if(0===this.Obt.length)return{CVt:0,PVt:0};const e=this.Obt[0].IOt,i=this.Obt[this.Obt.length-1].IOt,s=t.xct[0].IOt-t.EOt,n=t.xct[t.xct.length-1].IOt;let r=0,o=0;if(s<e){const i=this.xct[0].ZOt,n=t.xct[0].ZOt;if(!(i&&n&&i<n))return void Ur.yBt(Xj,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+e+")");r=this.Obt.length,this.IVt()}else{if(n<i)return void Ur.yBt(Xj,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+i+")");if(i<s){var h;o=null!=(h=function(t,e){const i=sr(t,(t=>void 0!==t.ZOt));if(void 0===i)return;const s=function(t){let e=0;for(const s of t){if(s.UOt)return;if(s.ZOt)return[s,e];var i;e+=null!=(i=s.ct)?i:0}return}(e.xct);if(void 0===s)return;const[n,r]=s;if(i.XOt!==n.XOt)return;const o=(n.ZOt.getTime()-i.ZOt.getTime())/1e3;return i.AFt+o-r}(this.Obt,t))?h:function(t,e,i){const s=t[t.length-1];var n;const r=null!=(n=s.ct)?n:_.max(i,s.TFt),o=i*(e-s.IOt-1);return s.AFt+r+o}(this.Obt,s,this.YFt),Ur.wBt(Xj,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+i+"), resetting playlist and restarting at "+o+"s"),r=this.Obt.length,this.IVt()}else{0;const t=qr(this.Obt,(t=>t.IOt===s));0,o=this.Obt[t].AFt,t>0&&(r=t)}}return{CVt:r,PVt:o}}AVt(t){let e=t.zOt.map(KK);if(t.bOt&&t.$Ot.zD===Nj.NFt&&(e=this.uVt.concat(e)),this.uVt=Vj(e),t.xOt)for(const e of t.xOt){const t=qr(this.uVt,(t=>t.o===e));t>=0&&wa(this.uVt,t)}}DVt(t,e){if(this.bFt!==t){this.bFt=t;for(const t of this.Obt)t.fFt=this.bFt;this.SVt()}this.fVt=e}IVt(){this.bFt=void 0,this.fVt=void 0}constructor(t,e,i){this.oVt=void 0,this.aVt=void 0,this.wVt=void 0,this.yVt=void 0,this.YFt=void 0,this.KFt=void 0,this.jFt=void 0,this.QFt=void 0,this.Obt=[],this.uVt=[],this.JFt=!1,this.$Ft=void 0,this.tVt=!1,this.eVt=mn.oE,this.j4=ee.WB(),this.qFt=ee.WB(),this.FA=void 0,this.lVt=-1/0,this.fVt=void 0,this.Iyt=t,this.bW=e,this.xVt=i}},qj=class t{static get Vm(){return null!=this.Bbt||(this.Bbt=new t),this.Bbt}Dbt(t){return t.lF}Nbt(t){return t.dF}Mbt(t,e){return Va(t,e)}Lbt(t,e,i){return(t-e)/(i-e)}};function Yj(t){return void 0!==t.ZOt}function Qu(t){return void 0!==t.WOt}function Kj(t){return Qu(t)?t._Ft:0===t.yFt&&t.pFt._Ft}function jj(t,e){return Qu(t)?Qu(e)?t.IOt+1===e.IOt:0===e.yFt&&jj(t,e.pFt):t.yFt===t.pFt.WOt.length-1?jj(t.pFt,e):!Qu(e)&&t.pFt===e.pFt&&t.yFt+1===e.yFt}r(),r(),r();var Qj=class extends dl{get name(){return"DiscontinuityMisalignmentError"}constructor(){super("Tried to wait for multiple discontinuity mappings at the same time")}};var Jj=class{NVt(t){const e=this.MVt.get(t);return void 0!==e&&$j(e)}LVt(t){if(this.BVt()>t)return Promise.reject(new Qj);const e=[];for(const s of this.OVt){var i;if(s<t)null==(i=this.MVt.get(s))||i.FVt.Hb(new Qj),this.MVt.delete(s);else e.push(s)}return this.OVt=e,-1===this.OVt.indexOf(t)&&this.OVt.push(t),this.VVt(t).FVt.Xb}WVt(t){const e=this.MVt.get(t);if(!e||!$j(e))throw new m("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return e}UVt(t){return this.WVt(t).aW}GVt(t,e){const i=Qu(e)?e:e.pFt,s=this.WVt(i.XOt);let n=t.QO(s.aW);if(s.ZVt){const t=Ic.GV(e.lF).jF(n);if(t.qF().WF(yE())){const e=_.round(t.VF()/wE().VF());n=n.QO(wE().kV(e))}}return n}HVt(t,e){return this.GVt(t,e).jF(t)}XVt(t,e,i,s,n,r){this.zVt<t&&(this.zVt=t);const o=this.VVt(t);void 0===o.aW&&(o.qVt.some((t=>t.uat===e))||(o.qVt.push({uat:e,YVt:i,KVt:s.OV(i.RN),jVt:n,ZVt:r}),this.QVt(o,t)))}QVt(t,e){if(t.aW||!this.JVt(t))return;const i=function(t){return uf(t,tQ)}(t.qVt);t.aW=i.KVt.jF(i.YVt),t.ZVt=t.qVt.some((t=>t.ZVt)),t.FVt.Zb(),En(t.qVt),_e(this.OVt,e)}JVt(t){return this.$Vt.length>0&&this.$Vt.every((e=>t.qVt.some((t=>t.uat===e))))}VVt(t){if(this.MVt.has(t))return this.MVt.get(t);{const e={aW:void 0,ZVt:!1,FVt:new is,qVt:[]};return this.MVt.set(t,e),e}}tWt(t){this.$Vt=t,this.MVt.forEach(((t,e)=>this.QVt(t,e)))}eWt(){this.zVt=-1}BVt(){return this.zVt}Km(){this.MVt.forEach((t=>t.FVt.np())),this.MVt.clear()}constructor(){this.$Vt=[],this.MVt=Bh(),this.OVt=[],this.zVt=-1}};function $j(t){return void 0!==t.aW}function tQ(t,e){return-function(t,e){if(t.ZVt||e.ZVt)return function(t,e){let i=t.jF(e);return t.JF()||e.JF()||(i.GF(yE())?i=i.jF(wE()):i.zF(yE().KF())&&(i=i.QO(wE()))),i}(t.YVt,e.YVt).UF(Ic.nV);return t.YVt.UF(e.YVt)}(t,e)||function(t,e){return t.jVt===e.jVt?$c.eh:t.jVt?$c.Zm:$c.Hm}(t,e)||function(t,e){return t.KVt.UF(e.KVt)}(t,e)}var eQ=class{get iWt(){return this.sWt}get ABt(){return this.nWt}get sB(){return this.rWt}wFt(t,e){if(XK(t))if(0===this.nWt.length)this.oWt(t);else{if(!e)return void Ur.yBt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");e.ULt.wFt(t)}else{if(0!==this.nWt.length)return void Ur.yBt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.hWt(t)}}oWt(t){const e=this.aWt(t.Iyt);e.wFt(t);const i=this.uWt(el.wE,e),s=this.uWt(el.yE,e),n=new Ij({Iyt:e.Iyt,jG:0,Tyt:0,kyt:NaN,Frt:void 0,CPt:void 0,Xdt:0,aOt:[],lOt:void 0,_Ot:void 0,uOt:void 0,fOt:void 0,dOt:void 0,cOt:void 0},e,[i,s]);this.nWt.push(n)}hWt(t){this.sWt.push(...t.rZ);const e=this.cWt(t);for(const i of t.FOt){const s=e.filter((t=>sQ(t,i)));this.lWt(i,s);const n=new Ij(i,this.aWt(i.Iyt,t.Sn),s);this.nWt.push(n)}}aWt(t,e){let i=this.dWt.get(t);return void 0===i&&(i=new zj(t,e,this.xVt),this.dWt.set(t,i)),i}cWt(t){const e=[];for(const i of t.LN)if(void 0===i.Iyt){for(const s of t.FOt)if(iQ(i.zw,i.XLt,s)){const t=new mK(i,this.aWt(s.Iyt));e.push(t)}}else{const t=new mK(i,this.aWt(i.Iyt));e.push(t)}return e}uWt(t,e){return new mK({zw:t,Iyt:void 0,XLt:"",gs:void 0,hOt:void 0,l:"",GLt:!0,ZLt:!1,HLt:!1,YLt:void 0,zLt:void 0,xPt:void 0},e)}lWt(t,e){const i=e.filter((t=>t.zw===el.wE)),s=e.filter((t=>t.zw===el.yE)),n=t.Frt&&(t.Frt.ZPt||t.Frt.UPt);if((!n||t.Frt.ZPt)&&0===s.length){const i=this.uWt(el.yE,this.aWt(t.Iyt));e.push(i)}if((!n||t.Frt.UPt)&&0===i.length){const i=this.uWt(el.wE,this.aWt(t.Iyt));e.push(i)}t.Frt&&t.Frt.rOt}fWt(t){for(const e of this.nWt)for(const i of e.RBt)if(i===t)return i}_Wt(t){for(const e of this.nWt)if(e===t)return e}vWt(t){for(const e of this.nWt)if(fh(e.RBt,t))return e}Km(){En(this.nWt),En(this.sWt),this.dWt.clear(),this.rWt.Km()}constructor(t,e){this.nWt=[],this.sWt=[],this.dWt=Vh(),this.rWt=new Jj,this.gWt=t,this.xVt=e}};function iQ(t,e,i){switch(t){case el.wE:return i.uOt===e;case el.yE:return i.fOt===e;case el.TW:return i.dOt===e;case el.GBt:return i.cOt===e}return!1}function sQ(t,e){return iQ(t.zw,t.XLt,e)&&(!t.qLt||t.ULt.Iyt===e.Iyt)}r();var nQ=class extends me{constructor(t){super(Ir.mWt),this.QLt=t}};r();var rQ=class extends me{constructor(t){super(Ir.pWt),this.QLt=t}},Rt="HlsModelUpdater",Ir=function(t){return t.mWt="wWt",t.pWt="yWt",t}({}),oQ=class extends So{get bWt(){return this.AWt}get SWt(){return this.TWt}get Nr(){return this.Nyt}get kWt(){return this.EWt}async xWt(t){const e=this.Nyt.gWt;if(!e)throw new m("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this._o(new ts);const i=await this.IWt(e,{},2,!0,t),s=i.ULt;if(!HK(s)&&!XK(s))throw new m("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");HK(s)||Ur.zN(Rt,"Detected media playlist only HLS stream."),this.RWt(s),i.CWt&&(this.TWt=!0,await this.PWt(t)),this.AWt=!0}async DWt(t,e,i,s){const n=this.Nyt.fWt(t);if(!n)throw new m("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={IOt:e,_Vt:i,zD:cQ(n)},o=An(_.max(1,3*t.ULt.rVt));try{await this.NWt(n,r,s,o)}catch(t){throw ih(t),this.MWt(n),t}}LWt(t,e){const i=this.Nyt.fWt(t);if(!i)throw new m("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={IOt:void 0,_Vt:void 0,zD:cQ(i)},n=An(_.max(1,3*t.ULt.rVt));return this.NWt(i,s,e,n)}BWt(t,e){return this.OWt.has(t.OC)||this.OWt.set(t.OC,new is),Lu(this.OWt.get(t.OC).Xb,e)}MWt(t){this._o(new rQ(t))}async NWt(t,e,i,s){const n=t.ULt.gBt(e);let r;try{r=(await this.IWt(n,e,0,this.TWt,i,s)).ULt}catch(e){throw ih(e),t.ULt.cVt=As.Wm(),e}if(!XK(r))throw new m("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");if(this.FWt&&t!==this.FWt&&!this.FWt.ULt.sVt)try{await this.LWt(this.FWt,i)}catch(e){ih(e),this.FWt=t,this.VWt()}try{this.RWt(r,t)}catch(n){if(n instanceof Mj&&void 0!==e.zD){const n=ne({},e,{zD:void 0});return this.NWt(t,n,i,s)}throw n}this.FWt=t}async IWt(t,e,i,s,n,r){if(Ur.zN(Rt,"Loading HLS playlist at "+t+"."),s){const e=await this.WWt(t,n);if(void 0!==e)return{ULt:e,CWt:!0}}return{ULt:await this.UWt(t,e,i,n,r),CWt:!1}}async WWt(t,e){try{const i=await this.Rut.lTt([t]);if(Io(e),void 0!==i)return xj(i.responseURL,{},i.data)}catch(t){ih(t)}}async UWt(t,e,i,s,n){const r={Xu:t,tE:Te.Rk,DE:this.aTt,EE:Ce.GET,zw:Bn.hE,ep:s,xE:n},o=await K((()=>this.GWt(r)),s,i);return xj(o.rE,e,o.$k)}async GWt(t){const e=await this.WW.eE(t);return{$k:await e.Mk(),rE:e.rE}}async PWt(t){Io(t);const e=[];for(const i of this.Nyt.ABt)for(const s of i.RBt)e.push(this.ZWt(s,t));await Promise.all(e)}async ZWt(t,e){try{const i=await this.Rut.lTt([t.ULt.Iyt]);Io(e),void 0===i||t.ULt.sVt||await this.LWt(t,e)}catch(t){ih(t)}}VWt(){for(const t of this.Nyt.ABt)for(const e of t.RBt)e!==this.FWt&&void 0!==e.ULt.fFt&&(e.ULt.sVt?this.HWt(e):e.ULt.IVt())}HWt(t){if(0!==t.ULt.xct.length){if(!this.FWt)return this.FWt=t,void this.FWt.ULt.DVt(0,void 0);if(this.XWt(this.FWt),!this.XWt(t)&&void 0===t.ULt.fFt){const e=this.zWt(t,this.FWt);Ur.wBt(Rt,"Assuming global timeline offset of "+e+"s for rendition "+t.ULt.Iyt+"."),t.ULt.DVt(e,void 0)}}}zWt(t,e){if(hQ(t)){const i=t.ULt.xct[0],s=e.ULt.xct[0];return Ur.wBt(Rt,"Synchronizing by start of VOD: "+s.lF+" vs "+i.lF),s.lF-i.AFt}const i=function(t,e){let i=t.length-1,s=e.length-1;for(;i>=0&&s>=0;){const n=t[i],r=e[s];if(n.XOt>r.XOt)i--;else if(n.XOt<r.XOt)s--;else if(n.UOt){if(r.UOt)return{segment:n,referenceSegment:r};s--}else i--}return}(t.ULt.xct,e.ULt.xct);if(void 0!==i){const{segment:t,referenceSegment:e}=i;return Ur.wBt(Rt,"Synchronizing by start of discontinuity #"+e.XOt+": "+e.lF+" vs "+t.lF),e.lF-t.AFt}const s=uQ(t.ULt.xct);if(void 0!==s){const t=uQ(e.ULt.xct);if(void 0!==t){Ur.wBt(Rt,"Synchronizing by PDT:",t.ZOt.toISOString()+" vs "+s.ZOt.getTime());return t.lF-s.AFt-(t.ZOt.getTime()-s.ZOt.getTime())/1e3}}const n=aQ(e),r=aQ(t);var o;const h=null!=(o=t.ULt.fFt)?o:0;return Ur.wBt(Rt,"Synchronizing by last segment:",n+" vs "+r),n-r+h}XWt(t){const e=this.Nyt.fWt(t);if(!e)return!1;if(hQ(e))return!1;const i=function(t,e){return sr(t,(t=>void 0!==t.$it&&e.NVt(t.XOt)))}(e.ULt.xct,this.Nyt.sB);if(void 0===i)return!1;if(e.ULt.dVt===i.XOt)return!0;const s=this.Nyt.sB.GVt(i.$it,i).VF()-i.AFt;return Ur.wBt(Rt,"Synchronize by media timestamp: "+s+"s for rendition "+t.ULt.Iyt+"."),e.ULt.DVt(s,i.XOt),(void 0===this.FWt||void 0===this.FWt.ULt.dVt||this.FWt.ULt.dVt<i.XOt)&&(this.FWt=e),!0}RWt(t,e){var i;(this.Nyt.wFt(t,e),XK(t)&&e)&&(this.EWt=e,this.HWt(e),this._o(new nQ(e)),null==(i=this.OWt.get(e.OC))||i.Zb(),this.OWt.delete(e.OC));this._o(new pH)}qWt(t,e){for(const i of this.Nyt.ABt){const s=Do(i.TBt,(t=>t.ULt===e));void 0!==s&&void 0!==t.ZPt&&(s.Frt=jK(s.Frt,t));const n=Do(i.SBt,(t=>t.ULt===e));void 0!==n&&void 0!==t.UPt&&(n.Frt=jK(n.Frt,t)),i.iFt||void 0===s&&void 0===n||(i.Frt=jK(i.Frt,t))}}YWt(t,e){for(const i of this.Nyt.ABt){const s=Do(i.TBt,(t=>t.ULt===e));void 0!==s&&void 0===t.ZPt&&i.aFt(s);const n=Do(i.SBt,(t=>t.ULt===e));void 0!==n&&void 0===t.UPt&&i.aFt(n)}}Km(){this.Ro(),this.Nyt.Km(),this.OWt.forEach((t=>t.np())),this.OWt.clear()}constructor(t,e,i,s,n){super(),this.WW=t,this.Rut=e,this.aTt=i,this.AWt=!1,this.TWt=!1,this.FWt=void 0,this.EWt=void 0,this.OWt=Bh(),this.Nyt=new eQ(s,n)}};function hQ(t){return t.ULt.qOt||t.ULt.KOt===mn.YBt}function aQ(t){const e=t.ULt.xct;return e[e.length-1].dF}function uQ(t){return sr(t,(t=>void 0!==t.ZOt))}function cQ(t){if(void 0!==t.ULt.yOt&&!t.ULt.qOt&&!(void 0===t.ULt.nVt||As.Wm()/1e3-t.ULt.nVt>=t.ULt.yOt/2))return t.ULt.bOt?Nj.NFt:Nj.DFt}var lQ=class{get nt(){return this.Dmt}AVt(t){if(0===t.ULt.zOt.length)return;this.KWt||(this.KWt=this.aO.ZR(Hi.xW,void 0,void 0,void 0,void 0,Hr.DATE_RANGE),this.Dmt.tt(this.KWt));Fj(this.KWt,t.ULt.zOt,(e=>{var i;return null!=(i=t.ULt.hFt(e))?i:NaN}))}constructor(t,e){this.jWt=t=>{this.AVt(t.QLt)},this.hEt=t,this.aO=e,this.Dmt=new ca,this.hEt.bn(Ir.mWt,this.jWt)}};r();var dQ=class extends me{constructor(){super(ut.MLt)}};r(),r(),r();var fQ=class{get QWt(){return this.v3}get SI(){return NV(this.Krt.SI,this.Krt.J3)}get xct(){return this.Obt}get Vmt(){return this.Lmt}JWt(t){var e;return null==(e=this.$Wt(t))?void 0:e.QLt}tUt(t){this.v3=t,this.eUt()}adt(t,e,i,s,n,r){this.Obt.push({QLt:t,Eut:e,iUt:ee.VB(n,r),sUt:ee.VB(i,s)}),this.eUt()}$Wt(t){return Do(this.Obt,(e=>e.sUt.wr(t)))}Hat(t){return Do(this.Obt,(e=>e.Eut===t))}tlt(t,e){return Do(this.Obt,(i=>i.QLt===t&&jj(i.Eut,e)))}Y3(){const t=this.SI;t.V>0&&(this.Lmt=t.Tn(t.V-1))}eUt(){const t=this.Krt.SI;this.Obt=this.Obt.filter((e=>0!==t.jn(e.sUt).V))}constructor(t){this.Krt=t,this.Obt=[],this.v3=void 0,this.Lmt=void 0}},_Q=class{get zw(){return this.Zp}get nUt(){return xT(this.Zp)}get rUt(){return this.nat}get oUt(){return this.hUt}get bCt(){return void 0!==this.aUt}get uUt(){return this.cUt}lUt(){if(this.bCt)throw new m("Cannot perform new operation while BufferAppender is still busy")}Grt(t){this.Krt!==t&&(this.lUt(),this.Krt=t,this.nat=new fQ(t))}dUt(){return this.aUt?this.aUt.Xb:Promise.resolve()}fUt(t){const e=this.nat.Vmt;return void 0!==e&&this._Ut(t,e)}_Ut(t,e){var i;const s=_.min(t,e);var n;return null!=(n=null==(i=this.nat.SI.gB().TB(this.oUt).BB(s))?void 0:i.wr(e))&&n}vUt(t){return this.nat.JWt(t)}np(){this.zT.np(),this.zT=new Fi}a3(t){this.lUt(),this.aUt=new is;const e=e=>{this.mUt.gUt(t),this.pUt(e)};this.u3(t,this.zT.ep).then(e,e)}async u3(t,e){Ur.wBt(Wu,"Appending initializer",rh(t.wUt.Iyt)),await this.Krt.a3(t,e),Ur.wBt(Wu,"Appended initializer",rh(t.wUt.Iyt)),this.nat.tUt(t)}Llt(t){this.lUt(),this.aUt=new is;const e=e=>{this.mUt.gUt(t),this.pUt(e)};this.yUt(t,this.zT.ep).then(e,e)}async yUt(t,e){const i=t.QLt;if(void 0===i.ULt.MBt)throw new m("MediaBufferWrapper - Cannot append HLSAsset to "+this.Zp+" MediaBuffer for a HLSRendition with an undefined targetDuration.");const s=this.nat.SI.cB,n=this.Krt.SI;Ur.wBt(Wu,"Appending",rh(t.wUt.Iyt)),await this.Krt.r3(t,e),Ur.wBt(Wu,"Appended",rh(t.wUt.Iyt),s,this.nat.SI.cB);const r=t.lF,o=r+t.ct,h=t.wUt,a=h.lF;var u;const c=h.lF+(null!=(u=h.ct)?u:0);this.nat.adt(i,h,r,o,a,c);const l=this.Krt.SI.TB(n),d=this.nat.tlt(i,h);if(this.zw===Fo.yE)if(d)if(this.bUt(d))if(0===l.V){if(void 0===this.nat.Hat(h)){const t=this.Krt.J3.jn(new ee([r,o]));this.hUt=this.hUt.AB(t)}}else{const t=l.Sn(0),e=new ee([t,o]);if(this.hUt=this.hUt.TB(e),t>r){const e=this.Krt.J3.jn(new ee([r,t]));this.hUt=this.hUt.AB(e)}}else{const t=l.V>0&&l.Sn(0)<r?l.Sn(0):r;this.hUt=this.hUt.TB(new ee([t,o]))}else if(0===l.V){const t=this.Krt.J3.jn(new ee([r,o]));this.hUt=this.hUt.AB(t)}else{var f;if(t.wUt._Ft)return;const e=l.Sn(0),i=null==(f=n.BB(r))?void 0:f.Tn(0),s=i&&i>r?i:r;if(e>s){const t=this.Krt.J3.jn(new ee([s,l.Sn(0)]));this.hUt=this.hUt.AB(t)}}t.wUt.gFt&&this.nat.Y3()}bUt(t){const e=t.sUt,i=e.Sn(0),s=e.Tn(e.V-1),n=e.dB(0),r=e._B(e.V-1);return this.hUt.EB(i,s,n,r)}i4(t,e){this.Krt.i4(t,e)}constructor(t,e,i,s,n){this.aUt=void 0,this.zT=new Fi,this.hUt=ee.WB(),this.cUt=!1,this.pUt=t=>{this.aUt&&(t?ac(t)&&this.nUt?this.AUt._Q(this.Krt.SI.OB)?this.aUt.Zb():this.aUt.Hb(t):Se(t)?this.aUt.Zb():(this.cUt=!0,this.aUt.Hb(t)):this.aUt.Zb(),this.aUt=void 0)},this.Zp=t,this.mUt=i,this.Krt=e,this.nat=s,this.AUt=n}};r(),r();var vQ=class{async SUt(t,e,i,s){const n=await this.TUt(e,s);return await this.kUt.SUt(t,n,i)}async TUt(t,e){var i;if((null==(i=this.EUt)?void 0:i.Xu)!==t){Ur.wBt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const i=await this.WW.eE({Xu:t,tE:Te.Ek,EE:Ce.GET,ep:e,zw:Bn.cE,CE:Cu.pE,DE:this.aTt}),s=await i.Bk(),n=new j(s);this.EUt={Xu:t,$k:n}}return this.EUt.$k}constructor(t,e,i){this.kUt=t,this.WW=e,this.aTt=i,this.EUt=void 0}};r();var gQ=class{async eE(t,e,i,s,n){const r=await this.xUt(t,e,i,Te.Ek,s,n),o=await r.Bk(n);return{httpStatusCode:r.Jk,response:new j(o)}}async IUt(t,e,i,s,n){return(await this.xUt(t,e,i,Te.Ik,s,n)).Ok(n)}async xUt(t,e,i,s,n,r){let o;t.oAt&&(o=Bc(t.oAt.Sn,t.oAt.V),0===o[0]&&o[1]===Eu&&(o=void 0));const h=o?{Range:"bytes="+o[0]+"-"+o[1]}:void 0,a=new Gr({Xu:t.Fx,tE:s,iE:h,DE:this.aTt,EE:Ce.GET,zw:e,CE:i,PE:this.jat,BE:s===Te.Ik,NE:n,ep:r});try{const e=await this.Rut.Iut(t.Fx,o);if(Io(r),void 0!==e)return null==n||n(e.buffer.byteLength,e.buffer.byteLength),new iA({eE:a,tE:a.tE,$k:e.buffer})}catch(t){ih(t)}return await K((()=>Lu(this.WW.eE(a),a.ep)),r,this.Crt)}constructor(t,e,i,s,n=2){this.WW=t,this.Rut=e,this.jat=i,this.aTt=s,this.Crt=n}};r();var mQ=class{RUt(){return this.CUt.ULt.wOt}async PUt(t,e,i){if(!this.RUt())throw new m("Could not perform blocking playlist update.");const s=this.DUt,n={IOt:t,_Vt:e};return void 0!==s&&function(t,e,i){if(t.IOt===e.IOt){if(t._Vt===e._Vt)return!0;if(0===t._Vt&&void 0===e._Vt)return!0}if(t.IOt===e.IOt+1&&0===t._Vt&&void 0!==e._Vt){const t=i.Hat(e.IOt);if(t&&t.Iyt&&e._Vt>=t.WOt.length)return!0}return!1}(s,n,this.CUt.ULt)||(await this.NUt(),this.MUt(n)),this.hEt.BWt(this.CUt,i)}LUt(t){return this.MUt(),this.hEt.BWt(this.CUt,t)}MUt(t){if(!this.BUt&&!this.OUt){const e=()=>{this.BUt=void 0};this.BUt=this.FUt(t,this.VUt.ep).then(e,e)}}async NUt(){this.BUt&&(this.VUt.np(),this.VUt=new Fi,await this.BUt.catch(M),this.BUt=void 0)}async FUt(t,e){let i=t;for(;;){if(Io(e),this.CUt.ULt.qOt&&this.CUt.ULt.sVt)return;null!=i||(i=this.WUt()),this.DUt=i;try{if(i)await this.hEt.DWt(this.CUt,i.IOt,i._Vt,e);else{const t=As.Wm()-this.Pn,i=1e3*this.CUt.ULt.rVt;t<i&&await Ze(i-t,e),await this.hEt.LWt(this.CUt,e)}}catch(t){throw this.DUt=void 0,ih(t),this.hEt.MWt(this.CUt),t}i=void 0,this.Pn=As.Wm()}}WUt(){const t=this.CUt.ULt;if(!t.wOt||t.qOt||0===t.xct.length)return;const e=t.xct[t.xct.length-1];return e.Iyt?{IOt:e.IOt+1,_Vt:t.iVt?0:void 0}:{IOt:e.IOt,_Vt:e.WOt.length}}Km(){this.OUt=!0,uh(this.NUt())}constructor(t,e){this.BUt=void 0,this.VUt=new Fi,this.Pn=-1/0,this.DUt=void 0,this.OUt=!1,this.hEt=t,this.CUt=e,this.MUt()}};r();var pQ=function(t){return t[t.ZBt=0]="ZBt",t[t.HBt=1]="HBt",t[t.aE=2]="aE",t[t.uE=3]="uE",t}({});r(),r();var Tt="AssetExtractor",wQ=class{UUt(t,e,i){let s=e;for(const e of this.GUt){if(s>=t)return!0;if(s<e.Sn)return!1;if(s<e.Tn){if(i<=e.Tn)return!0;s=e.Tn}}return s>=t}ZUt(t,e){const i=[];for(let s=0;s<this.GUt.length;s+=1){const n=this.GUt[s],r=t-n.Sn,o=n.$k.length,h=_.min(o,_.max(r,0)),a=_.max(0,e+r),u=Hc(n.$k,h,a);u.length&&(s=this.HUt(s,n,t,h,a),i.push(u))}return i}XUt(t,e){this.GUt.push({Sn:t,Tn:t+e.length,$k:e})}HUt(t,e,i,s,n){let r=t;this.GUt.splice(r,1),r-=1,e.Sn<i&&(r+=1,this.GUt.splice(r,0,{Sn:e.Sn,Tn:i,$k:Hc(e.$k,0,s)}));const o=i+n-s;return o<e.Tn&&(r+=1,this.GUt.splice(r,0,{Sn:o,Tn:e.Tn,$k:Hc(e.$k,n)})),r}constructor(){this.GUt=[]}},yQ=class{get zUt(){return this.qUt}async YUt(){const t=await this.Od.read();if(t.done)throw this.qUt=1/0,new m("No more data can be read from the given stream.");return this.qUt+=t.value.length,t.value}async KUt(t){await this.Od.cancel(t)}constructor(t,e){this.qUt=e,this.Od=t.getReader()}},bQ=class{jUt(){this.QUt.Zb(),this.QUt=new is}JUt(t){const{hAt:e,aAt:i}=SQ(this.SFt.oAt),s=this.$Ut.ZUt(e,i-e);Ur.wBt(Tt,"Collected "+s.length+" chunks.");for(const e of s)t.enqueue(e)}async readAndSliceOutAssetBytes(t){await this.tGt.Xb;const{hAt:e,aAt:i}=SQ(this.SFt.oAt);try{for(;;){const s=this.Od.zUt,n=await this.Od.YUt(),r=n.length;Ur.wBt(Tt,"Read "+r+" at "+s+" for extraction of "+rh(this.SFt));const o=_.min(s+r,e)-s;if(!(o>0)){if(s+r<=i)return Ur.wBt(Tt,"Extracting the read data range for extraction of "+rh(this.SFt)),t.enqueue(n),this.jUt(),uh(this.readAndSliceOutAssetBytes(t));{const e=i-s,o=Hc(n,0,e),h=Hc(n,e);return o.length>0&&(Ur.wBt(Tt,"Extracting "+o.length+" bytes for extraction of "+rh(this.SFt)),t.enqueue(o)),Ur.wBt(Tt,"Of the read "+r+" bytes, the last "+h.length+" will be stored locally for extraction of "+rh(this.SFt)),this.$Ut.XUt(s+e,h),Ur.wBt(Tt,"Extraction of "+rh(this.SFt)+" completed as the entire request has been fulfilled."),this.eGt(t),void(this.iGt&&(Ur.wBt(Tt,"Aborting stream upstream as no more bytes are needed from "+rh(this.SFt)+"."),await this.Od.KUt("AssetExtraction - AbortOnEnd")))}}{const e=Hc(n,0,o),i=Hc(n,o);if(Ur.wBt(Tt,"Of the read "+r+" bytes, the first "+o+" will be stored locally for extraction of "+rh(this.SFt)),this.$Ut.XUt(s,e),i.length>0)return Ur.wBt(Tt,"Extracting "+i.length+" bytes for extraction of "+rh(this.SFt)),t.enqueue(i),this.jUt(),uh(this.readAndSliceOutAssetBytes(t))}}}catch(e){Ur.wBt(Tt,"Extraction of "+rh(this.SFt)+" completed as the entire source stream has been read."),this.eGt(t)}}eGt(t){t.close(),this.jUt(),this.sGt.Zb()}start(t){Ur.wBt(Tt,"Preparing to push all collected data to controller for extraction of "+rh(this.SFt)),this.JUt(t),Ur.wBt(Tt,"Collected data pushed to controller for extraction of "+rh(this.SFt));const{aAt:e}=SQ(this.SFt.oAt);this.Od.zUt>=e?(Ur.wBt(Tt,"Extraction of "+rh(this.SFt)+" completed as the entire request has been fulfilled."),this.eGt(t)):(Ur.wBt(Tt,"Continuing read from original stream for extraction of "+rh(this.SFt)),uh(this.readAndSliceOutAssetBytes(t)))}get nGt(){return this.sGt.Xb}pull(){return this.tGt.Zb(),this.tGt=new is,this.QUt.Xb}constructor(t,e,i,s){this.sGt=new is,this.SFt=t,this.Od=e,this.$Ut=i,this.iGt=s,this.tGt=new is,this.QUt=new is}},AQ=class{JO(t){if(!qK(this.SFt,t))return!1;const{hAt:e,aAt:i}=SQ(t.oAt);return this.$Ut.UUt(this.rGt.zUt,e,i)}async Ygt(t,e){void 0===e&&(e=!1);const i=this.rGt,s=this.$Ut;if(Ur.zN(Tt,"Extracting data from "+rh(t)+" out of "+rh(this.SFt)),this.oGt&&(Ur.wBt(Tt,"Awaiting previous extraction before extracting "+rh(t)+" out of "+rh(this.SFt)),await this.oGt),!this.JO(t))throw new m("The extractor does not contain the data requested");const n=new bQ(t,i,s,e);return this.oGt=n.nGt,new vr(n)}constructor(t,e){this.SFt=e;const{hAt:i}=SQ(this.SFt.oAt);this.rGt=new yQ(t,i),this.$Ut=new wQ}};function SQ(t){if(t){const e=t.Sn;return{hAt:e,aAt:void 0!==t.V?e+t.V:Eu}}return{hAt:0,aAt:Eu}}var TQ=class{async $n(){const t=await this.hGt.IUt(this.SFt,Bn.uE,Cu.oE,void 0,this.zT.ep);return new AQ(t,this.SFt)}JO(t){return qK(this.SFt,t)}async Ygt(t,e){void 0===e&&(e=!1);const i=await this.ipt;return await Lu(i.Ygt(t,e),this.zT.ep)}np(){this.ipt.catch(M),this.zT.np()}constructor(t,e){this.SFt=t,this.hGt=e,this.zT=new Fi,this.ipt=this.$n()}};r();var kQ=class extends me{constructor(t){super(DQ.aGt),this.PE=t}};r();var EQ=class extends me{constructor(t,e,i,s,n,r,o){super(DQ.uGt),this.uri=t,this.cGt=e,this.PE=i,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.lGt=r,this.httpStatusCode=o}};function xQ(t,e,i){const s=Qu(i)?i:i.pFt;if(e.NVt(s.XOt)){if(void 0!==i.$it)return e.GVt(i.$it,i).VF();if(i!==s&&void 0!==s.$it){const t=e.GVt(s.$it,s).VF();return i.lF+(t-s.lF)}}const n=t.ULt.Hat(s.IOt-1);if(void 0!==n&&e.NVt(n.XOt)){if(n.WOt.length>0){const t=n.EFt(n.WOt.length-1);if(void 0!==t.$it){const s=e.GVt(t.$it,t).VF();return i.lF+(s-t.lF)}}if(void 0!==n.$it){const t=e.GVt(n.$it,n).VF();return i.lF+(t-n.lF)}}const r=t.ULt.Hat(s.IOt+1);if(void 0!==r&&e.NVt(r.XOt)){if(r.WOt.length>0){const t=r.EFt(0);if(void 0!==t.$it){const s=e.GVt(t.$it,t).VF();return i.lF+(s-t.lF)}}if(void 0!==r.$it){const t=e.GVt(r.$it,r).VF();return i.lF+(t-r.lF)}}return i.lF}function IQ(t){return void 0!==t.$it}function RQ(t,e,i,s){for(let n=e;n<t.length;n++){const e=t[n];if(e.XOt!==i)break;if(IQ(e)){if(s(e,n))break}}}function CQ(t,e,i,s){for(let n=e;n>=0;n--){const e=t[n];if(e.XOt!==i)break;if(IQ(e)){if(s(e,n))break}}}r();var PQ="HlsPlaylistDownloader",DQ=function(t){return t.aGt="segmentdownloadprogress",t.uGt="segmentdownloaded",t}({}),NQ=class extends So{dGt(t){this.fGt.Km(),this.fGt=new mQ(this.hEt,t),this.bCt?this._Gt=t:(this.CUt=t,this.vGt=0,this.gGt=void 0,this.mGt=void 0,this.pGt=void 0)}get bCt(){return void 0!==this.wGt}get yGt(){return void 0!==this.pGt}dUt(){return this.wGt?this.wGt.Xb:Promise.resolve()}bGt(){return this.mUt.bGt()}AGt(t){this.mUt.AGt(t)}np(){var t,e,i;this.SGt.np(),this.SGt=new Fi,null==(t=this.TGt)||t.np(),this.TGt=void 0,null==(e=this.kGt)||e.np(),null==(i=this.EGt)||i.np(),this.kGt=void 0,this.EGt=void 0,this.vGt=0,this.gGt=void 0,this.mGt=void 0,this.pGt=void 0}Km(){this.fGt.Km()}get QLt(){var t;return null!=(t=this._Gt)?t:this.CUt}get qCt(){if(!this.CUt.ULt.qOt||void 0===this.gGt)return!1;const t=this.CUt.ULt.Hat(this.gGt);if(!t.gFt)return!1;if(void 0!==this.mGt){if(!t.EFt(this.mGt).gFt)return!1}return!0}xGt(t){const e=this.CUt.ULt.gVt(t);if(!e)return!1;if(void 0!==this.gGt){const i=e.IOt===this.gGt;return void 0!==this.mGt?e.xFt(t)===e.EFt(this.mGt)&&i:i}return!1}IGt(t){let e;var i,s;if(!this.yGt&&(void 0===this.gGt||t<this.vGt-1e-6))e=this.RGt(t);else if(e=this.CGt(_.max(null!=(i=this.gGt)?i:0,null!=(s=this.pGt)?s:0),this.mGt),void 0!==e&&void 0===this.pGt){const[i,s]=e,n=xQ(this.CUt,this.hEt.Nr.sB,null!=s?s:i),r=3*this.CUt.ULt.MBt;_.abs(n-t)>=r&&(e=this.RGt(t))}else if(this.CUt.ULt.qOt&&void 0!==this.gGt){if(this.CUt.ULt.Hat(this.gGt).gFt&&(e=this.RGt(t),void 0!==e&&e[0].IOt===this.gGt))return}if(e){this.vGt=t;const[i,s]=e;var n;return this.pGt=i.pOt?_.max(i.IOt,null!=(n=this.pGt)?n:0):void 0,0===(null==s?void 0:s.yFt)&&void 0!==i.ct?[i,void 0]:[i,s]}}PGt(t){void 0!==t&&(this.pGt=t-1)}RGt(t){let e,i;const s=this.CUt.ULt.xct;if(0===s.length)return;const n=this.hEt.Nr.sB,r=Ic.GV(t),o=function(t,e,i){const s=t.ULt.xct;if(0===s.length)return;const n=t.ULt.mVt(i.VF());if(!e.NVt(n.XOt))return;const r=n.IOt-s[0].IOt,o=n.XOt;let h,a,u,c=0;if(CQ(s,r,o,((t,e)=>(h=t,c=e,!0))),void 0===h&&(RQ(s,r+1,o,((t,e)=>(h=t,c=e,!0))),void 0===h))return;return e.GVt(h.$it,h).HF(i)?(a=h,RQ(s,c+1,o,(t=>e.GVt(t.$it,t).WF(i)?(u=t,!0):(a=t,!1)))):(u=h,CQ(s,c-1,o,(t=>e.GVt(t.$it,t).HF(i)?(a=t,!0):(u=t,!1)))),void 0!==a&&void 0!==u?[a,u]:void 0}(this.CUt,n,r);let h;if(void 0!==o){const[t,e]=o,i=n.GVt(t.$it,t),s=n.GVt(e.$it,e),a=r.jF(i).VF()/s.jF(i).VF()*(e.lF-t.lF);h=t.lF+a}else h=t;const a=s[s.length-1];return a.dF<=h?(e=a,i=a.RFt(h)):s[0].lF>h?(e=s[0],i=e.EFt(0)):(e=this.CUt.ULt.gVt(h),i=null==e?void 0:e.RFt(h)),e?[e,i]:void 0}CGt(t,e){let i,s;if(i=this.CUt.ULt.Hat(t),i&&void 0!==e){if(0===i.WOt.length)return[i,void 0];s=i.EFt(e+1)}return void 0!==i&&void 0!==s||(i=this.CUt.ULt.Hat(t+1),s=null==i?void 0:i.EFt(0)),i?[i,s]:void 0}lUt(){if(this.bCt)throw new m("Cannot perform new operation while PlaylistDownloader is still busy")}DGt(t){this.lUt(),this.wGt=new is,this.NGt(t,this.SGt.ep).then(this.MGt,this.MGt)}LGt(){this.fGt.MUt()}async NGt(t,e){if(this.CUt.ULt.qOt)return;let i=this.IGt(t);for(!i&&this.fGt.RUt()&&void 0!==this.gGt&&(await this.fGt.PUt(void 0===this.mGt?this.gGt+1:this.gGt,void 0!==this.mGt?this.mGt+1:void 0,e),i=this.IGt(t)),!i&&this.fGt.RUt()&&void 0!==this.gGt&&(await this.fGt.PUt(this.gGt+1,0,e),i=this.IGt(t));!i;){Ur.zN(PQ,"No next segment / part available, need to update playlist before continuing."),await this.fGt.LUt(e);const s=this.QLt.ULt.xct;s[0].lF>t&&(this.mGt=void 0,this.gGt=void 0,this.pGt=void 0);s[s.length-1].IOt<this.gGt&&(this.mGt=void 0,this.gGt=void 0,this.pGt=void 0),i=this.IGt(t)}}BGt(){return this.mUt.OGt()}FGt(){this.lUt();try{const t=this.CUt.ULt.pVt(zK.ZBt);t&&this.VGt(t);const e=this.CUt.ULt.pVt(zK.HBt);e&&this.WGt(e)}catch(t){throw ih(t),this.CUt.ULt.cVt=As.Wm(),this.hEt.MWt(this.CUt),t}}VGt(t){this.EGt&&!this.EGt.JO(t.Iyt)&&(this.EGt.np(),this.EGt=void 0),this.EGt||(this.EGt=new TQ(t.Iyt,this.hGt))}WGt(t){this.kGt&&!this.kGt.JO(t.Iyt)&&(this.kGt.np(),this.kGt=void 0),this.kGt||(this.kGt=new TQ(t.Iyt,this.hGt))}Zat(t,e,i){this.lUt(),Ur.zN(PQ,"Starting download of segment "+rh(t.Iyt)+" and part "+(null==e?void 0:e.yFt)),this.wGt=new is,this.UGt(t,e,i,this.SGt.ep).catch((t=>{throw ih(t),this.CUt.ULt.cVt=As.Wm(),this.hEt.MWt(this.CUt),t})).then(this.MGt,this.MGt)}async UGt(t,e,i,s){let n;if(t.GOt){var r,o;if(!i||!YK(i.wUt.Iyt,null==(r=t.GOt)?void 0:r.Iyt)||t.XOt!==i.XOt){var h;null==(h=this.TGt)||h.np(),this.TGt=new is;const e=this.GGt(t.GOt,t,s).then((()=>{this.TGt=void 0}));this.TGt.rp(e)}n=null==(o=this.TGt)?void 0:o.Xb}await this.ZGt(t,e,n,s)}async GGt(t,e,i){const s=await this.HGt(t,e,i),n=s.GOt.$k.$k.byteLength;this.mUt.XGt(s),this._o(new EQ(s.GOt.wUt.Iyt,s.zw,this.Zp,e.IOt,s.QLt.OC,n,s.GOt.$ut)),Ur.wBt(Wu,"Download initializer complete",rh(t.Iyt))}async ZGt(t,e,i,s){const n=await this.zGt(t,e,s),r=n.Eut.$k.$k.byteLength;var o;i&&await Lu(i,s),this.mUt.XGt(n),this._o(new EQ(n.Eut.wUt.Iyt,n.zw,this.Zp,t.IOt,n.QLt.OC,r,n.Eut.$ut)),Ur.wBt(Wu,"Download complete",rh(null!=(o=null==e?void 0:e.Iyt)?o:t.Iyt))}async zGt(t,e,i){let s;if(e){if(this.kGt)if(this.kGt.JO(e.Iyt)){const t=await this.kGt.Ygt(e.Iyt),n=await zn(t,i),r=new j(n);s=LQ(e,await this.SUt(r,e.rZ,i),200)}else this.kGt.np(),this.kGt=void 0;s||(Ur.wBt(Wu,"Start download",rh(e.Iyt)),s=await this.qGt(e,i))}else Ur.wBt(Wu,"Start download",rh(t.Iyt)),s=await this.zat(t,i);return this.gGt=t.IOt,this.mGt=null==e?void 0:e.yFt,{zw:"Eut",Eut:s,QLt:this.CUt,XOt:t.XOt}}async HGt(t,e,i){let s;if(this.EGt){var n;if(this.EGt.JO(t.Iyt)){const n=await Lu(this.EGt.Ygt(t.Iyt),i),r=await zn(n,i),o=new j(r);s=MQ(t,e,await this.SUt(o,t.VOt?[t.VOt]:[],i),200)}Ur.zN(PQ,"MAP is required for segment, downloading MAP data."),null==(n=this.EGt)||n.np(),this.EGt=void 0}return s||(Ur.wBt(Wu,"Start download",rh(t.Iyt)),s=await this.YGt(t,e,i)),{zw:"GOt",GOt:s,QLt:this.CUt,lF:e.lF,XOt:e.XOt,rZ:e.rZ}}async YGt(t,e,i){const{response:s,httpStatusCode:n}=await this.hGt.eE(t.Iyt,Bn.aE,Cu.lE,void 0,i),r=t.VOt?[t.VOt]:[];return MQ(t,e,await this.SUt(s,r,i),n)}async zat(t,e){if(!t.Iyt)throw new m("Internal error: attempted to download an incomplete segment");let i,s;try{this.KGt(t);const n=await this.hGt.eE(t.Iyt,Bn.aE,Cu.oE,this.jGt,e);i=n.response,s=n.httpStatusCode}finally{this.QGt()}return function(t,e,i){return{$k:{$k:e,zw:To.NJ},zw:pQ.aE,$ut:i,wUt:t,XOt:t.XOt}}(t,await this.SUt(i,t.rZ,e),s)}async qGt(t,e){let i,s;try{this.KGt(t);const n=await this.hGt.eE(t.Iyt,Bn.aE,Cu.oE,this.jGt,e);i=n.response,s=n.httpStatusCode}finally{this.QGt()}return LQ(t,await this.SUt(i,t.rZ,e),s)}async SUt(t,e,i){const s=Do(e,(t=>t.EE===G.XBt));return s?s.Iyt&&s.vOt?await this.JGt.SUt(t,s.Iyt,s.vOt,i):(Ur.lt(PQ,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}KGt(t){var e,i,s;this.$Gt=t,this.tZt=0,this.eZt=As.Wm(),this.iZt=0,this.sZt=null!=(s=null==(i=t.Iyt)||null==(e=i.oAt)?void 0:e.V)?s:0}QGt(){this.$Gt=void 0,this.tZt=0,this.eZt=0,this.iZt=0,this.sZt=0}nZt(){if(void 0!==this.$Gt)return{Eut:this.$Gt,rZt:this.iZt,oZt:this.sZt,hZt:As.Wm()-this.eZt}}aZt(t){return void 0!==this.$Gt&&(0!==this.tZt&&(!(this.sZt>0&&this.iZt>=this.sZt)&&!(t-this.tZt<500)))}constructor(t,e,i,s,n,r,o,h){super(),this._Gt=void 0,this.wGt=void 0,this.$Gt=void 0,this.tZt=0,this.eZt=0,this.iZt=0,this.sZt=0,this.SGt=new Fi,this.TGt=void 0,this.vGt=0,this.gGt=void 0,this.mGt=void 0,this.pGt=void 0,this.EGt=void 0,this.kGt=void 0,this.MGt=t=>{this._Gt&&(this.CUt=this._Gt,this._Gt=void 0,this.vGt=0,this.gGt=void 0,this.mGt=void 0,this.pGt=void 0),this.wGt&&(t&&!Se(t)?this.wGt.Hb(t):this.wGt.Zb(),this.wGt=void 0)},this.jGt=(t,e)=>{this.iZt=t,t>0&&0===this.tZt&&(this.tZt=As.Wm()),void 0!==e&&(this.sZt=e),this._o(new kQ(this.Zp))},this.Zp=t,this.hEt=i,this.mUt=s,this.CUt=e,this.fGt=new mQ(i,e),this.JGt=new vQ(o,n,h),this.hGt=new gQ(n,r,function(t){switch(t){case el.yE:return sA.yE;case el.wE:return sA.wE;case el.TW:case el.GBt:return sA.Rk;default:return sA.oE}}(e.zw),h)}};function MQ(t,e,i,s){return{$k:{$k:i,zw:To.NJ},zw:pQ.ZBt,$ut:s,wUt:t,XOt:e.XOt}}function LQ(t,e,i){return{$k:{$k:e,zw:To.NJ},$ut:i,zw:pQ.HBt,wUt:t,XOt:t.pFt.XOt}}r();var BQ=class{get QWt(){return this.uZt}get cZt(){const t=[];for(const i of this.lZt)if("Eut"===i.zw){const s=i.Eut.wUt,n=xQ(i.QLt,this.rWt,s);var e;t.push({Eut:s,QLt:i.QLt,lF:n,dF:n+(null!=(e=s.ct)?e:0)})}return t}get dZt(){const t=[];return this.fZt.forEach((e=>{for(const i of e._Zt)"Eut"===i.zw&&t.push({Eut:i.wUt,QLt:i.QLt,lF:i.lF,dF:i.lF+i.ct})})),t}XGt(t){"GOt"===t.zw&&(this.uZt=t.GOt),this.lZt.push(t),this.vZt&&(this.vZt.Zb(),this.vZt=void 0)}bGt(){return this.lZt[0]}AGt(t){_e(this.lZt,t)}OGt(){return null!=this.vZt||(this.vZt=new is),this.vZt.Xb}gZt(t){this.mZt(t.uat).gZt(t)}pZt(t){return this.mZt(t).pZt()}gUt(t){this.mZt(t.uat).gUt(t)}wZt(t){var e;null==(e=this.fZt.get(t))||e.Km()}yZt(t){return this.mZt(t).yZt()}mZt(t){if(this.fZt.has(t))return this.fZt.get(t);{const e=new OQ;return this.fZt.set(t,e),e}}Gb(){this.bZt(),this.AZt()}bZt(){this.uZt=void 0,En(this.lZt)}AZt(){this.fZt.forEach((t=>t.Gb()))}Km(){this.fZt.forEach((t=>t.Km())),this.fZt.clear(),this.Gb(),this.vZt&&(this.vZt.np(),this.vZt=void 0)}constructor(t){this.lZt=[],this.fZt=Vh(),this.vZt=void 0,this.uZt=void 0,this.rWt=t}},OQ=class{get _Zt(){return this.SZt}gZt(t){this.SZt.push(t),this.TZt&&(this.TZt.Zb(),this.TZt=void 0)}pZt(){return this.SZt[0]}gUt(t){_e(this.SZt,t)}yZt(){return null!=this.TZt||(this.TZt=new is),this.TZt.Xb}Gb(){En(this.SZt)}Km(){this.Gb(),this.TZt&&(this.TZt.np(),this.TZt=void 0)}constructor(){this.SZt=[],this.TZt=void 0}};r();var FQ=1e-6,VQ=class{get SI(){return this.hIt}get J3(){return this.aIt}async a3(t,e){const i=t.$k.$k;if(this.kZt(i),this.EZt.zw===Hr.TTML){this.rWt.NVt(t.XOt)||await Lu(this.rWt.LVt(t.XOt),e);const s=this.xZt(i,t.XOt);for(const t of s)this.EZt.UW(t)}}async r3(t,e){if(void 0===t.$k)return;const i=t.lF,s=i+t.ct;this.hIt=this.hIt.AB(ee.VB(i,s)).bB(FQ),this.i4(t.IZt,t.RZt),this.s4(i,s),this.rWt.NVt(t.XOt)||await Lu(this.rWt.LVt(t.XOt),e),this.h3(t.$k.$k,t.XOt,t.wUt)}h3(t,e,i){let s;this.kZt(t),s=this.EZt.zw===Hr.WEBVTT?this.CZt(t,i):this.xZt(t,e);for(const t of s)this.EZt.UW(t)}CZt(t,e){const i=CE(t),s=i.L;var n;const r=null!=(n=i.lW)?n:{dW:Ic.nV,mh:Ic.nV};for(const t of s){const i=Ic.GV(t.lF).jF(r.mh).QO(r.dW),s=this.rWt.GVt(i,e).VF(),n=s+(t.dF-t.lF);t.CF(s,n)}return s}xZt(t,e){const i=this.rWt.UVt(e).VF();return _x(t,this.EZt,{oW:0,hW:1/0,aW:i},ba.APPLICATION_MP4)}kZt(t){this.EZt.zw===Hr.DEFAULT&&(this.EZt.zw=this.PZt(t)?Hr.WEBVTT:Hr.TTML)}PZt(t){return GE(cp(La(sa(t),0,_.min(t.byteLength,16)),new er))}i4(t,e){this.aIt=this.aIt.AB(ee.VB(t,e)).bB(FQ)}s4(t,e){this.aIt=this.aIt.TB(ee.VB(t,e))}constructor(t,e){this.hIt=ee.WB(),this.aIt=ee.WB(),this.EZt=t,this.rWt=e}};r(),r(),r();var WQ=class extends me{constructor(t,e){super(Ji.DZt),this.QLt=t,this.Frt=e}};r();var UQ=class extends me{constructor(t){super(Ji.NZt),this.QLt=t}};r();var GQ=class extends me{constructor(t,e){super(Ji.MZt),this.QLt=t,this.Xdt=e}};r();var ZQ=class extends me{constructor(t,e){super(Ji.LZt),this.QLt=t,this.BZt=e}},Ji=function(t){return t.DZt="OZt",t.MZt="FZt",t.LZt="VZt",t.NZt="WZt",t}({}),HQ=class extends So{get UZt(){return this.GZt}ZZt(t){for(const e of this.GZt)fh(t,e)||this.mUt.wZt(e);this.GZt=t}get bCt(){return void 0!==this.HZt}dUt(){var t,e;return null!=(e=null==(t=this.HZt)?void 0:t.Xb)?e:Promise.resolve()}lUt(){if(this.bCt)throw new m("Cannot perform new operation while transmuxer is still busy")}XZt(t,e){}zZt(t){this.lUt(),this.HZt=new is;const e=e=>{this.qZt(t,e)};this.YZt(t,this.zT.ep).then(e,e)}KZt(t){this.lUt(),this.HZt=new is;const e=e=>{this.qZt(t,e)};this.jZt(t,this.zT.ep).then(e,e)}qZt(t,e){this.HZt&&(!e||Se(e)||function(t){return t instanceof Qj}(e)?(Se(e)||this.mUt.AGt(t),this.HZt.Zb(),this.HZt=void 0):this.HZt.Hb(e))}QZt(t,e){this._o(new WQ(t,e))}JZt(t,e){this._o(new GQ(t,e))}$Zt(t,e,i){Kj(e)&&this._o(new ZQ(t,i))}tHt(t){this._o(new UQ(t))}gZt(t){fh(this.GZt,t.uat)&&this.mUt.gZt(t)}eHt(t){return this.mUt.pZt(t)}gUt(t){this.mUt.gUt(t)}iHt(t){return this.mUt.yZt(t)}np(){this.zT.np(),this.zT=new Fi}constructor(t,e,i){super(),this.HZt=void 0,this.zT=new Fi,this.mUt=t,this.rWt=e,this.GZt=i}};function XQ(t,e){return Kj(t)?0:_.min(t.lF,e)}function zQ(t,e){var i;return _.max(t.lF,e)+(null!=(i=t.ct)?i:0)}var qQ=class extends HQ{YZt(t,e){Io(e);const i={zw:"rPt",$k:t.GOt.$k,uat:this.UZt[0],XOt:t.XOt,sHt:{Frt:"",rZ:t.rZ},lF:t.lF,QLt:t.QLt,wUt:t.GOt.wUt};return this.gZt(i),Promise.resolve()}async jZt(t,e){Io(e);const i=t.Eut.wUt;let s;void 0!==i.$it?(this.rWt.NVt(t.XOt)||await Lu(this.rWt.LVt(t.XOt),e),s=this.rWt.GVt(i.$it,i).VF()):s=i.lF;const n=XQ(i,s),r=zQ(i,n);var o;const h={zw:"Eut",$k:t.Eut.$k,uat:this.UZt[0],IZt:n,RZt:r,lF:s,ct:null!=(o=i.ct)?o:0,aW:0,XOt:t.XOt,QLt:t.QLt,wUt:t.Eut.wUt};this.gZt(h)}constructor(t,e,i){super(t,e,[i])}};function YQ(t,e){let i=ee.WB();for(const s of t){let n=s.lF;if(s.QLt.ULt.qOt&&Kj(s.Eut))n=0;else{const i=t=>s.QLt===t.QLt&&jj(t.Eut,s.Eut),r=Do(t,i);if(void 0!==r)n=_.min(n,r.dF);else{const t=Do(e,i);void 0!==t&&(n=_.min(n,t.sUt.Tn(0)))}}i=i.AB(ee.VB(n,s.dF))}return i}r();var KQ=.001,jQ=class{get nHt(){return this.rHt}get QLt(){return this.oHt.QLt}dGt(t){this.oHt.dGt(t)}get bCt(){return this.oHt.bCt||this.hHt.bCt||this.rHt.some((t=>t.bCt))}aHt(t){const e=t.slice();for(let t=this.rHt.length-1;t>=0;t--){const i=this.rHt[t];if(!i.nUt)throw new m("Invalid state");const s=qr(e,(t=>t.zw===i.zw));s>=0&&!i.uUt?(i.Grt(e[s]),wa(e,s)):wa(this.rHt,t)}for(const t of e){const e=new fQ(t);this.rHt.push(new _Q(t.zw,t,this.uHt,e,this))}e.length>0&&this.uHt.Gb();const i=t.map((t=>t.zw));this.hHt.ZZt(i)}_Q(t){var e;const i=(null==(e=this.XH)?void 0:e._Q(t))||!1;return i&&(this.np(),this.uHt.Gb()),i}cHt(t){for(const t of this.rHt)if(t.zw!==Fo.Rk||t.bCt)throw new m("Invalid state");const e=new fQ(t),i=new _Q(Fo.Rk,t,this.uHt,e,this);this.rHt=[i]}get QWt(){const t=this.uHt.QWt;if(t)return t;if(this.rHt.length>0){const t=this.rHt[0].rUt.QWt;if(t&&this.rHt.every((e=>e.rUt.QWt===t)))return t}}Uat(){for(const t of this.rHt)t.rUt.eUt()}get lHt(){if(0===this.rHt.length)return ee.WB();const t=YQ(this.uHt.cZt.concat(this.uHt.dZt),Ye(this.rHt,(t=>t.rUt.xct))).gB();let e=new ee([0,1/0]);for(const t of this.rHt)e=e.jn(t.rUt.SI);for(const t of this.rHt)e=e.TB(t.oUt);return e=e.AB(t),e.bB(KQ)}get dHt(){if(0===this.rHt.length)return ee.WB();const t=YQ(this.uHt.dZt,Ye(this.rHt,(t=>t.rUt.xct))).gB();let e=new ee([0,1/0]);for(const t of this.rHt)e=e.jn(t.rUt.SI);return e=e.AB(t),e}Plt(t){const e=this.lHt.BB(t,KQ);return e?e.Tn(e.V-1):t}xGt(t){return!!this.lHt.BB(t,KQ)||this.oHt.xGt(t)}fHt(t){return this.dHt.wr(t,KQ)}_Ht(t,e,i){for(const t of this.rHt){const i=t.rUt,s=i.Vmt;if(void 0!==s&&e>=s&&!i.SI.gB().wr(s))return!0}return e-t<i}np(){this.vHt(),this.gHt()}vHt(){this.oHt.np()}gHt(){this.hHt.np(),this.nHt.forEach((t=>t.np()))}Km(){this.np(),this.oHt.Km()}constructor(t,e,i,s){this.oHt=t,this.uHt=e,this.hHt=i,this.XH=s,this.rHt=[]}};r();var QQ=class extends me{constructor(){super(ut.OLt)}};r();var JQ=class extends me{constructor(){super(ut.LLt)}};r(),r();var $Q="LazyMediaBuffer",tJ=class extends So{get Fk(){return this.NT}get j3(){return this.Zp}get kd(){if(!this.Krt)throw new Z(Ci.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.Krt.kd}get $j(){return this.aQ}set $j(t){this.aQ=t,this.Krt&&(this.Krt.$j=t)}get SI(){return this.Krt?this.Krt.SI:ee.WB()}get J3(){return this.Krt?this.Krt.J3:this.t4.v$}get sQ(){return this.lQ}set sQ(t){this.lQ=t,this.Krt&&(this.Krt.sQ=t)}i4(t,e){Ur.wBt($Q,"Marking gap from "+t+" to "+e+"."),this.t4.m$(t,e),this.Krt&&this.Krt.i4(t,e)}s4(t,e){Ur.wBt($Q,"Removing gap from "+t+" to "+e+"."),this.t4.p$(t,e),this.Krt&&this.Krt.s4(t,e)}mHt(t){this.Krt=t,this.Krt.sQ=this.lQ,this.Krt.$j=this.aQ;const e=this.t4.v$;for(let t=0;t<e.V;t++)this.Krt.i4(e.Sn(t),e.Tn(t));this.Krt.bn(xs.PJ,this.Ds),this.pHt.Zb(t)}wHt(t){return Lu(this.pHt.Xb,t)}async r3(t,e,i){const s=await this.wHt(i);await s.r3(t,e,i)}async n4(){const t=await this.wHt();await t.n4()}async a3(t,e,i){const s=await this.wHt(i);await s.a3(t,e,i)}async rT(t,e,i){const s=await this.wHt(i);await s.rT(t,e,i)}async T3(t,e){const i=await this.wHt();await i.T3(t,e)}ZJ(t){return!!this.Krt&&this.Krt.ZJ(t)}async XJ(t){const e=await this.wHt();await e.XJ(t)}yn(){var t;this.Ro(),null==(t=this.Krt)||t.vn(xs.PJ,this.Ds),this.Krt=void 0}constructor(t,e){super(),this.Zp=t,this.yHt=e,this.NT=void 0,this.Krt=void 0,this.pHt=new is,this.aQ=20,this.lQ=30,this.t4=new vN}},eJ="LazyMediaSource",iJ=class{get kd(){return{zw:De.qW,J4:[],CZ:[]}}get d4(){return this.bHt}get f4(){return this.AHt}get SI(){return this.kZ?this.kZ.SI:ee.WB()}get ct(){return this.kZ?this.kZ.ct:this.FA}get r$(){return!!this.kZ&&this.kZ.r$}get cR(){return this.kZ?this.kZ.cR:new ee([0,1/0])}q4(t){this.FA=t,this.kZ&&this.kZ.q4(t)}Y3(){this.jit=!0,this.kZ&&this.kZ.Y3()}V3(){this.jit=!1,this.kZ&&this.kZ.V3()}Q4(t,e,i,s){this.SHt=t,this.THt=e,this.kHt=Boolean(i),this.EHt=Boolean(s),this.kZ&&this.kZ.Q4(t,e,i,s)}ZJ(t){return!this.kZ||this.kZ.ZJ(t)}async XJ(t){if(!this.ZJ(t))throw new m("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.kZ)await this.kZ.XJ(t);else{var e,i;this.aO.Q7();const s=await this.aO.$n(t);S(this.FA)||s.q4(this.FA),this.jit&&s.Y3(),s.Q4(this.SHt,this.THt,this.kHt,this.EHt),Ur.wBt(eJ,"The MediaSource has been loaded."),this.xHt=!0,this.kZ=s,null==(e=this.bHt)||e.mHt(this.kZ.d4),null==(i=this.AHt)||i.mHt(this.kZ.f4),this.IHt.Zb(s),this.aO.J7()}}qJ(t){this.kZ.qJ(t)}async Km(){var t,e;null==(t=this.bHt)||t.yn(),null==(e=this.AHt)||e.yn(),this.kZ&&await this.kZ.Km()}constructor(t,e,i){this.aO=t,this.bHt=void 0,this.AHt=void 0,this.IHt=new is,this.kZ=void 0,this.xHt=!1,this.FA=NaN,this.jit=!1,this.SHt=0,this.THt=1/0,this.kHt=!1,this.EHt=!1,e&&(Ur.wBt(eJ,"Created lazy media buffer for audio."),this.bHt=new tJ(Fo.wE,this)),i&&(Ur.wBt(eJ,"Created lazy media buffer for video."),this.AHt=new tJ(Fo.yE,this))}};function sJ(t,e){return void 0===e&&(e=!1),function(i,s){void 0===s&&(s="*");let n=rJ(i,"tag");const r=rJ(null==s?"*":s,"range"),o=[];let h,a,u,c=-1;for(;++c<r.length;)if(h=r[c].toLowerCase(),e||"*"!==h){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),h)){if(!e)return n[a];o.push(n[a])}else u.push(n[a]);n=u}return e?o:void 0}}r();sJ(((t,e)=>"*"===e||t===e||Xa(t,e+"-")),!0),sJ(((t,e)=>{const i=t.split("-"),s=e.split("-");let n=0,r=0;if("*"!==s[r]&&i[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!i[n])return!1;if(i[n]!==s[r]){if(1===i[n].length)return!1;n++}else n++,r++}else r++;return!0}),!0);var nJ=sJ(((t,e)=>{let i,s=e;for(;;){if("*"===s||t===s)return!0;if(i=s.lastIndexOf("-"),i<0)return!1;"-"===s.charAt(i-2)&&(i-=2),s=s.slice(0,i)}}));function rJ(t,e){const i=t&&"string"==typeof t?[t]:t;if(!i||"object"!=typeof i||!("length"in i))throw new m("Invalid "+e+" `"+i+"`, expected non-empty string");return i}r(),r();var oJ=16384,hJ=71,aJ=188,uJ=2,cJ=3,lJ=function(t){return t[t.oE=0]="oE",t[t.nP=1]="nP",t[t.RHt=2]="RHt",t[t.CHt=3]="CHt",t}({});function dJ(t){return fJ(t)?1:function(t){return function(t){if(t.length<uJ*aJ)return-1;const e=t.length<cJ*aJ?uJ:cJ,i=_.min(1e3,t.length-e*aJ);for(let s=0;s<=i;s++){let i=!0;for(let n=0;n<e;n++)if(t[s+n*aJ]!==hJ){i=!1;break}if(i)return s}return-1}(t)>=0}(t)?2:function(t){return null!==BL(sa(t),new er)}(t)?3:0}function fJ(t){const e=fi(t,0,_.min(t.length,oJ));return Es.dN(sa(e))}var Ec=class{get zw(){return this.Zp}get SI(){return this.Krt.SI}get J3(){return this.Krt.J3}PHt(t){return this.Krt===t}async a3(t,e){if(this.Krt.kd.Fk!==t.sHt.Frt){const i={Fk:t.sHt.Frt};if(!this.Krt.ZJ(i))throw new aM(this.Krt.kd.Fk,t.sHt.Frt);await this.Krt.XJ(i),Io(e)}await this.Krt.a3(t.$k,{A2:t.QLt.OC},e),void 0!==this.xNt&&this.Zp===Fo.yE&&fJ(t.$k.$k)&&this.xNt.Tot(t.$k.$k)}async r3(t,e){Io(e),Ur.zN("HlsMediaBuffer","Got media data, appending to "+this.Zp+" MediaBuffer: "+rh(t.wUt.Iyt));const i=t.IZt,s=t.RZt,n={$it:t.lF,ct:t.ct,aW:t.aW,A2:t.QLt.OC};void 0!==t.$k&&(await this.Krt.r3(t.$k,n,e),this.DHt(t.$k,t)),this.NHt(i,s)}DHt(t,e){var i;if(!fJ(t.$k))return;const s=e.lF,n=s+e.ct,r=e.aW;if(null==(i=this.Zmt)||i.adt(t.$k,s,r),void 0!==this.xNt&&this.Zp===Fo.yE){const i=e.wUt.gFt;this.xNt.adt(t.$k,s,n,r,e.QLt,i)}const o=[];void 0!==this.Zmt&&o.push(this.Zmt),void 0!==this.xNt&&o.push(this.xNt),Gx(this.SI,o)}NHt(t,e){const i=this.Krt.SI,s=new ee([t,e]).TB(i);for(let t=0;t<s.V;t++)this.Krt.i4(s.Sn(t),s.Tn(t));for(let t=0;t<i.V;t++)this.Krt.s4(i.Sn(t),i.Tn(t))}i4(t,e){this.Krt.i4(t,e)}s4(t,e){this.Krt.s4(t,e)}constructor(t,e,i,s){this.Zp=t,this.Krt=e,this.Zmt=i,this.xNt=s}};function _J(t){if(t.zw!==el.GBt||void 0===t.zLt)return;const e=t.zLt.match(/^CC([1-4])$/);if(e)return Number(e[1]);const i=t.zLt.match(/^SERVICE([\d+])$/);return i?Number(i[1]):void 0}r(),r(),r();var vJ=class{BBt(t){var e,i,s;return null==(s=null==(i=this.kZ)||null==(e=i.f4)?void 0:e.ZJ(t))||s}OBt(t){var e,i,s;return null==(s=null==(i=this.kZ)||null==(e=i.d4)?void 0:e.ZJ(t))||s}constructor(t){this.kZ=t}},xa="LLHLSPlayer",gJ=[Zc.rB,Zc.oB,Zc.hB,Zc.aC],mJ=[ns.Qy,ns.Ry,ns.Fy,ns.By],pJ=2e3,wJ=class extends So{get mO(){var t;const e=[this.MHt,this.LHt].filter(ol);if(0===e.length||this.ct!==1/0)return;const i=null==(t=this.kI)?void 0:t.getTime();if(i){return(Date.now()-i)/1e3}let s;for(const t of e){const e=t.ULt.cR;if(0===e.V)continue;const i=e.Tn(e.V-1)+t.ULt.MSt,n=t.ULt.hVt,r=i+(null!=n?n:0)-this.RI;(!s||s<r)&&(s=r)}return s}BHt(){if(void 0===this.OHt)return!1;const t=As.Wm();if(!this.OHt.oHt.aZt(t))return!1;const e=this.OHt.oHt.nZt();if(void 0===e||void 0===e.Eut.ct)return!1;const i=this.RI,s=this.tR,n=this.OHt.lHt.BB(i);if((void 0!==n?n.Tn(0)-i:0)>=2*e.Eut.ct*s)return!1;if(e.rZt>0&&0===e.oZt)return e.hZt>1e3*e.Eut.ct*.8;return 8*e.oZt/this.XH.Zj.jG>=1.8*e.Eut.ct}async FHt(){var t;const e=await this.WBt();if(void 0===e)return;const i=null==(t=this.OHt)?void 0:t.oHt.nZt();if(void 0===i)return;const s=this.VHt;if(i.oZt>0){if(_.max(0,i.oZt-i.rZt)<=i.oZt*(e.jG/s.jG))return}const n=e.jG<s.jG;await this.sBt(e,{nBt:n})}WHt(t){return Ei(t,(t=>t.jG))}async UHt(){let t=await this.GHt();if(0===t.length)return;const e=await this.ZHt(t);e.length>0&&(t=e);const i=this.WHt(t);void 0!==i&&(await this.sBt(i,{nBt:!0}),this.RZ.JRt(i.jG))}get HHt(){const t=[this.LHt,this.MHt].filter(ol);for(const e of t){if(!e.ULt.qOt)return!1;const t=Jr(e.ULt.xct,-1);if(t&&t.XOt!==this.XHt)return!1}return!0}get JLt(){return this.VHt}get dBt(){return this.LHt}get _Bt(){return this.MHt}get zHt(){return this.qHt}get ht(){return this.LO}get SI(){return this.aO.SI.ks()}get eBt(){const t=[];if(this.VHt){const e=this.aO.RI;for(const i of this.YHt)for(const s of i.nHt){const i=s.vUt(e);i&&!fh(t,i)&&t.push(i)}}return t}get kI(){if(this.VHt){const t=this.aO.RI;return this.VHt.oFt(t)}}set kI(t){if(!t||!this.VHt)return;const e=this.VHt.hFt(t);void 0!==e&&this.DI(e,{KHt:!1,jHt:!0})}get bt(){return this.QHt}get RI(){var t;return null!=(t=this.JHt)?t:this.aO.RI}set RI(t){this.DI(t)}DI(t,e){var i,s,n,r;Ur.zN(xa,"Seeking to "+t+" s.");const o={KHt:null!=(s=null==e?void 0:e.KHt)?s:t===1/0,jHt:null==(n=null==e?void 0:e.jHt)||n,BOt:null!=(r=null==e?void 0:e.BOt)&&r};this.JHt=t,this.$Ht=o,this.tXt=!0,this.iEt=!0,null==(i=this.mZ)||i.NR(),this._o(new Al(t)),this.V8.np(),this.eXt&&(As.Um(this.iXt),o.jHt?this.iXt=As.Gm((()=>this.sXt(t,o)),50):this.sXt(t,o))}sXt(t,e){As.Um(this.iXt);const i=[this.ipt,this.nXt,this.W8].filter(ol);this.V8=new Fi,this.V8.rp(this.GW.ep),this.W8=Ts(this.U8(i,t,e,this.V8.ep),this.V8).catch(this.rXt)}get ct(){var t,e,i,s,n,r,o;if(!this.HHt)return null!=(o=null!=(r=null!=(n=null==(t=this.LHt)?void 0:t.ULt.ct)?n:null==(e=this.MHt)?void 0:e.ULt.ct)?r:null==(s=this.hEt)||null==(i=s.kWt)?void 0:i.ULt.ct)?o:[this.LHt,this.MHt].filter(ol).every((t=>function(t){if(void 0===t)return!1;return t.ULt.xct.length>0&&!t.ULt.qOt}(t)))?1/0:NaN;const h=this.aO.ct;if(S(h)){var a,u;const t=null==(u=this.hEt)||null==(a=u.kWt)?void 0:a.ULt.ct;if(void 0!==t)return t}return h}get MI(){if(!this.HHt)return!1;if(this.dR&&this.eXt){var t,e;const i=this.RI,s=null==(t=this.LHt)?void 0:t.ULt.ct,n=null==(e=this.MHt)?void 0:e.ULt.ct;return!(void 0!==s&&i<s)&&!(void 0!==n&&i<n)}return this.aO.MI}get lt(){return this.bZ}get OI(){return this.AZ}get VI(){}get UI(){}get ZI(){return!1}get XI(){return ne({},{WO:0,UO:0,GO:0,ZO:0,HO:0,XO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.aO.zI(),{HO:this.Ckt,ZO:this.XH.Zj.jG})}get Nr(){var t;return null==(t=this.hEt)?void 0:t.Nr}get qI(){return this.aO.qI}set qI(t){this.aO.qI=t}get jI(){return this.xSt}set jI(t){this.xSt!==t&&(this.xSt=t,this._o(t?new nt:new aX))}get JI(){return this.aO.JI}get tR(){return this.aO.tR}set tR(t){Ur.zN(xa,"Setting playback rate to "+t+"."),this.aO.tR=t}get sR(){return this.Lkt.ks()}get Lkt(){return this.aO.sR}get rR(){return this.TZ}set rR(t){this.TZ!==t&&(this.TZ=t,this.oXt())}get aR(){let t=this.aO.aR;return this.Fkt&&(t=_.max(Wt.Xn,t)),t}get cR(){return this.Ikt.ks()}get Ikt(){let t=this.j4;const e=[this.LHt,this.MHt].filter(ol);if(t.V>0&&e.some((t=>!t.ULt.qOt))){const i=this.Lkt,s=t.Tn(t.V-1);if(i.V>0&&i.Tn(i.V-1)>s){let n=i.Tn(i.V-1);const r=AJ(e);r.V>0&&(n=_.min(n,r.Tn(r.V-1))),t=t.AB(new ee([s,n]))}}return t}SVt(){let t=function(t){if(0===t.length)return ee.WB();let e=new ee([0,1/0]),i=0;for(const s of t){const t=s.ULt.cR;t.V>0&&(e=e.jn(t),i=_.max(i,t.Sn(0)))}if(e.V>0)return e;return ee.FB(i)}([this.LHt,this.MHt].filter(ol));0!==t.V&&(this.kZ&&this.HHt&&this.kZ.ct!==1/0&&(t=new ee([t.Sn(0),this.kZ.ct])),this.j4=t,this.hXt&&this.Zmt.PW(t.Sn(0)),this.aXt&&this.xNt.PW(t.Sn(0)))}get dR(){var t;return null!=(t=this.tXt)?t:this.aO.dR}get EZ(){}get nt(){return this.Hl}get rt(){return this.FO}get vR(){var t,e;return this.aO.vR||(null==(e=this.VHt)||null==(t=e.CPt)?void 0:t.Ti)||0}get pR(){var t,e;return this.aO.pR||(null==(e=this.VHt)||null==(t=e.CPt)?void 0:t.ji)||0}get yR(){return this.aO.yR}set yR(t){Ur.zN(xa,"Setting volume to "+t+"."),this.aO.yR=t}get SR(){return this.zH}get ER(){return!1}set ER(t){}get IZ(){return this.RZ}MR(){return!1}xR(){return this.aO.Sa}ja(){return this.aO.WZ}ZR(t){return this.aO.UZ(t)}be(){Ur.zN(xa,"Hiding the player."),this.aO.be()}PR(){var t;Ur.zN(xa,"Pausing the player."),this.aO.PR(),(null==(t=this.mZ)?void 0:t.UB)&&this.mZ.NR()}async DR(){this.k8=!0;const t=this.aO.DR();if(this.MI){const t=this.Ikt;t.V>0&&this.DI(t.Sn(0),{jHt:!1})}this.eXt||await this.oXt(),this.nkt(),await t,this.sEt()}nkt(){var t;if(!this.xkt())if(null==(t=this.JLt)?void 0:t.ULt.qOt){var e;let t=!0,i=0;const s=null==(e=this.VHt)?void 0:e.ULt.Sn;if(!this.iEt&&s&&(t=!s.BOt,i=s.LOt,i<0)){const t=this.JLt.ULt.zFt;i+=t.Tn(t.V-1)}this.sXt(i,{KHt:t})}else this.sXt(1/0,{KHt:!0});this.uXt()&&this.sXt(1/0,{KHt:!0})}xkt(){var t;const e=this.Ikt;if(0===e.V)return!0;const i=null==(t=this.cXt)?void 0:t.kB(this.RI);return(i&&i>0?this.cXt.Tn(i):this.RI)>=e.Sn(0)}get cXt(){var t,e;const i=null==(t=this.lXt)?void 0:t.lHt,s=null==(e=this.OHt)?void 0:e.lHt;return i?s?s.jn(i):i:s}uXt(){return IJ(this.RI,this.LHt)||IJ(this.RI,this.MHt)}VEt(){this.bZ=void 0,this.AZ=void 0}uH(t){this.bZ||(uh(this.nr()),this.bZ=Zs(t),this.AZ=t,this._o(new Pi(t)))}ge(){Ur.zN(xa,"Showing the player."),this.aO.ge()}LR(){throw new m("Not implemented")}OR(){throw new m("Not implemented")}FR(){}WR(){this.eXt&&uh(this.dXt(this.LHt,this.MHt,this.qHt,{WR:!0}))}async Ca(t,e,i){const s={stack:[],error:void 0,hasError:!1};try{var n;if(Ur.zN(xa,"Setting the player source to "+t.src+"."),this.VEt(),this.QHt&&!Gn(this.QHt)&&(await this.nr(),Io(i)),!t.src||Gn(t))return;const o=Gi(s,Fi.hp([i]),!1);var r;this.GW=Fi.hp([o.ep]),this.MZ.tZ(t.contentProtection),this.QHt=t,this.fXt=t.seamlessSwitchStrategy,this.aXt=!fh(t.ignoreEmbeddedTextTrackTypes,Hr.CEA608),this.hXt=!fh(t.ignoreEmbeddedTextTrackTypes,Hr.EMSG),this.bn(ut.VLt,this.handleBufferingErrorEvent);const h=null!=(r=null==(n=t.latencyConfiguration)?void 0:n.targetOffset)?r:t.liveOffset;if(this.hEt=new oQ(this.WW,this.Rut,t.useCredentials,As.Ew(t.src),h),this.hEt.bn(Ir.mWt,this.jWt),this.hEt.bn(Ir.pWt,this._Xt),this.hEt.bn(ns.Hy,this.Ds),this.hEt.bn(ns.Xy,this.Ds),t.hlsDateRange&&(this.vXt=new lQ(this.hEt,this.aO),this.Hl.aZ(this.vXt.nt)),null!=this.gXt||(this.gXt=this.mXt.ist()),e.textTracks&&this.LZ(e.textTracks),t.latencyConfiguration){const e=t.latencyConfiguration;this.mZ=new st(this,this.aO,e),this.mZ.Rt=!0,this.SR.Aa(this.mZ)}jx(this.Hl),this.oXt(),o.Km()}catch(t){s.error=t,s.hasError=!0}finally{ce(s)}}oXt(){return this.ipt=this.pXt(this.ipt,this.GW.ep).catch(this.Gpt),this.ipt}async pXt(t,e){if(t&&(await t,Io(e)),!this.hEt)return;const i=this.TZ;i===hi.bO||this.k8?await this.ix(e):i===hi.xW&&await this.wXt(e)}async wXt(t){if(void 0===this.hEt||this.Fkt)return;if(!this.hEt.bWt){try{await this.hEt.xWt(t)}catch(t){throw ih(t),this.jI=!1,new Z(Ci.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.yXt.Jdt()}const e=await this.bXt();this.AXt(e);const i=this.SXt(e.SBt),s=this.TXt(e.TBt),n=this.kXt(e.nFt);if(!n){const t=SJ(e.rFt);t&&(Ur.zN(xa,"Detected initial closed caption rendition."),this.EXt(e,t))}await this.dXt(i,s,n,{xXt:!0}),this.Fkt=!0,this.axt.vxt(),this.IXt()}IXt(){const t=[this.LHt,this.MHt].filter(ol);if(t.some((t=>t.ULt.qOt)))return;if(this.mZ)return;const e=_.max(...t.map((t=>{var e;return null!=(e=t.ULt.MSt)?e:0}))),i={minimumOffset:.66*e,maximumOffset:2*e,targetOffset:1*e,forceSeekOffset:3*e,minimumPlaybackRate:T,maximumPlaybackRate:_t};this.mZ=new st(this,this.aO,i),this.zH.Aa(this.mZ)}async bXt(){if(this.RXt=this.hEt.Nr.ABt,!this.RXt.length)throw new Z(Ci.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.CXt(this.RXt);if(0===t.length)throw new Z(Ci.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const e=await this.ZHt(t);return e.length>0&&(t=e),Ur.zN(xa,"Selecting initial active variant stream."),function(t,e,i,s){void 0===s&&(s=hk.maximumBackoff);const n=function(t,e){if(void 0===e)return t;const i=e.preferredVideoCodecs,s=e.preferredAudioCodecs;if(void 0!==i){let e;for(const n of i){const i=t.filter((t=>t.Frt&&t.Frt.ZPt&&hM(t.Frt.ZPt,n)));if(0===i.length)continue;if(void 0===s)return i;void 0===e&&(e=i);const r=TJ(i,s);if(void 0!==r)return r}if(void 0!==e)return e}if(void 0!==s){const e=TJ(t,s);if(void 0!==e)return e}return t}(t,e),r=EJ(n,s),o=r.length>0?r:n;switch(i.eQ.type){case ic.BANDWIDTH:{const t=i.oQ,e=o.filter((e=>e.jG<=t));if(e.length>0)return hf(e,(t=>t.jG))}case ic.PERFORMANCE:return Ei(o,(t=>t.jG));case ic.QUALITY:return hf(o,(t=>t.jG))}}(t,this.QHt.abr,this.XH,this.Wlt.maximumBackoff)}SXt(t){if(this.PXt){const t=this.DXt(this.PXt);if(t)return t}return kJ(t)}TXt(t){if(this.NXt){const t=this.DXt(this.NXt);if(t)return t}return kJ(t)}kXt(t){for(const t of this.Hl.mC)t.LE===Ui.Qn&&(this.MXt=this.LXt(t));if(this.MXt){const t=this.DXt(this.MXt);if(t)return t}return SJ(t)}LXt(t){return Do(this.VHt.nFt,(e=>t===this.BXt.get(e.OC)))}async ix(t){this.eXt||(await this.wXt(t),Io(t),this.eXt=!0,await this.dXt(this.LHt,this.MHt,this.qHt,{xXt:!0}))}LZ(t){for(const e of t)e.src&&this.VZ.OW(e)}EXt(t,e){if(!this.aXt)return;const i=function(t){const e=[];for(const i of t){const t=_J(i);void 0!==t&&e.push({Det:t,Net:i.gs||"",Ch:i.l})}return e}(t.rFt);for(const t of i)this.xNt.cmt(t);if(void 0!==e){const t=_J(e);this.xNt.amt(t).LE=Ui.Qn}}get YHt(){return[this.lXt,this.OHt,this.OXt].filter(ol)}iBt(t){for(const e of t)if(!this.FXt(e))throw new m("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.RXt=t}FXt(t){const e=this.Nr;return!!e&&fh(e.ABt,t)}DXt(t){if(t&&this.VHt)return Do(this.VHt.RBt,(e=>e===t))}AXt(t){var e;if(Ur.zN(xa,"Setting active variant stream."),this.VHt===t)return;const i=(null==(e=this.VHt)?void 0:e.dOt)!==(null==t?void 0:t.dOt);if(this.VHt&&i)for(const t of this.VHt.nFt)this.ZW(t);if(this.VHt=t,this._o(new QQ),this.Kkt(),t&&i)for(const e of t.nFt)this.VXt(e)}VXt(t){const e=this.aO.ZR(Hi.TW,void 0,t.l,t.gs,t.GLt,void 0,void 0,t.YLt.map(RK).filter(ol));e.bn(gs.da,this.onTextTrackChange),this.BXt.set(t.OC,e),this.WXt.tt(e)}ZW(t){const e=this.BXt.get(t.OC);e&&(e.vn(gs.da,this.onTextTrackChange),this.WXt.it(e),this.BXt.delete(t.OC),this.aO.ZW(e))}async GHt(){var t;const e=null!=(t=this.RXt)?t:this.Nr.ABt;if(0===e.length&&!this.RXt)return Ur.zN(xa,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===e.length&&!this.RXt)return Ur.zN(xa,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const i=await this.CXt(e);if(0===i.length)return Ur.yBt(xa,"LLHLSPlayer - No variant streams with supported codecs available to perform ABR selection on."),[];const s=EJ(i,this.Wlt.maximumBackoff);return 0===s.length?(this.UXt||(Ur.yBt(xa,"LLHLSPlayer - No variant streams with online renditions available to perform ABR selection on."),this.GXt++,await this.ZXt(i)),[]):s}async HXt(){const t=await this.WBt();if(void 0===t)return;const e=!!this.VHt&&t.jG<this.VHt.jG;await this.sBt(t,{nBt:e})}async WBt(){var t,e;const i=await this.GHt();if(0===i.length)return;const s=Jq(this.aO),n=await this.ZHt(i),r={ji:this.aO.ji,Ti:this.aO.Ti,LBt:s,glt:null==(e=this.QHt)||null==(t=e.abr)?void 0:t.restrictToPlayerSize},o=await this.XXt.WBt(i,this.VHt,n,r,new vJ(this.kZ));return!!this.VHt&&o.jG<this.VHt.jG||this.zXt(o,s)?o:void 0}zXt(t,e){var i;if(t===this.JLt)return!1;const s=this.JLt&&xJ(this.JLt,this.Wlt.maximumBackoff),n=xJ(t,this.Wlt.maximumBackoff);if(!s&&n)return!0;(!this.NDt||this.NDt.$Lt.jG>t.jG)&&(this.NDt={$Lt:t,Rft:As.Wm()});const r=As.Wm()-this.NDt.Rft;var o;const h=null!=(o=null==(i=this._Bt)?void 0:i.ULt.MBt)?o:1/0;return e>=_.max(h-1,5)||r>1e3}async ZXt(t){this.UXt=!0;let e=!1;for(const i of t)try{const t=this.MHt?Do(i.TBt,(t=>pK(t,this.MHt))):void 0;if(void 0===t)continue;await this.LWt(t),t.ULt.cVt=-1/0,e=!0}catch(t){}if(e)this.GXt=0,await this.qXt();else{if(this.GXt>=this.Wlt.maxRetries)return void this.uH(new Z(Ci.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=_.min(this.Wlt.minimumBackoff*2**(this.GXt-1),this.Wlt.maximumBackoff);await Ze(t)}this.UXt=!1,await this.HXt()}async CXt(t){let e=await cf(t,(async t=>{var e,i,s;const n=[(null==(e=t.Frt)?void 0:e.UPt)?'audio/mp4; codecs="'+t.Frt.UPt+'"':void 0,(null==(i=t.Frt)?void 0:i.ZPt)?'video/mp4; codecs="'+t.Frt.ZPt+'"':void 0].filter(ol);return 0===n.length||await this.YXt.l$(n,null==(s=this.QHt)?void 0:s.useManagedMediaSource)}));return e.some((t=>{var e;return null==(e=t.Frt)?void 0:e.ZPt}))&&(e=e.filter((t=>!t.Frt||t.Frt.ZPt||0!==t.TBt.length))),e.some((t=>{var e;return null==(e=t.Frt)?void 0:e.UPt}))&&(e=e.filter((t=>!t.Frt||t.Frt.UPt||0!==t.SBt.length))),e}ZHt(t){return this.hEt.SWt?cf(t,(t=>async function(t,e){for(const i of t)if(!await e(i))return!1;return!0}([kJ(t.SBt),kJ(t.TBt),SJ(t.nFt),SJ(t.rFt)].filter(ol),(t=>this.KXt(t))))):Promise.resolve([])}async KXt(t){if(0===t.ULt.xct.length)return!1;const e=t.ULt.xct[0];if(!e.Iyt)return!1;const i=e.Iyt,s=i.oAt?Bc(i.oAt.Sn,i.oAt.V):void 0;try{return await this.Rut.clt(i.Fx,s)}catch(t){return!1}}async sBt(t,e){if(!this.eXt)throw new m("LLHLSPlayer - The LLHLSPlayer is not loaded.");if(!t)throw new m("LLHLSPlayer - Cannot explicitly set the active variant stream to undefined.");if(!this.FXt(t))throw new m("LLHLSPlayer - Trying to set an active variant stream that does not exists on the internal model.");if(t===this.VHt)return void Ur.zN(xa,"Trying to set the already active variant stream, ignoring.");const i=this.LHt?Do(t.SBt,(t=>pK(t,this.LHt))):void 0,s=this.MHt?Do(t.TBt,(t=>pK(t,this.MHt))):void 0,n=this.qHt?Do(t.nFt,(t=>pK(t,this.qHt))):void 0;this.AXt(t),this.NDt=void 0,await this.dXt(i,s,n,e)}async fBt(t){if(!this.VHt)return void(this.PXt=t);const e=this.DXt(t);if(t&&!e)throw new m("LLHLSPlayer - Trying to set an invalid rendition as the active audio rendition.");if(this.dBt===e)return;const i=ol(e)!==ol(this.LHt);Ur.zN(xa,"Switching audio rendition"),await this.dXt(e,this.MHt,this.qHt,{oBt:!0,nBt:i})}async vBt(t){if(!this.VHt)return void(this.NXt=t);const e=this.DXt(t);if(t&&!e)throw new m("LLHLSPlayer - Trying to set an invalid rendition as the active video rendition.");if(this._Bt===e)return;const i=ol(e)!==ol(this.MHt);Ur.zN(xa,"Switching video rendition"),await this.dXt(this.LHt,e,this.qHt,{rBt:!0,nBt:i})}async jXt(t){if(!t)throw new m("LLHLSPlayer - Cannot explicitly set the active subtitle rendition to undefined.");if(!this.Fkt)return void(this.MXt=t);const e=this.DXt(t);if(!e)throw new m("LLHLSPlayer - Trying to set an invalid rendition as the active subtitle rendition.");Ur.zN(xa,"Switching subtitle rendition"),await this.dXt(this.LHt,this.MHt,e)}async QXt(t,e){if(this.UXt)return;const i=0===this.rt.V;t.zw===el.yE||t.zw===el.wE&&i?this.RXt&&this.RXt.length<=1?(t.zw===el.yE&&this.MHt!==t?await this.dXt(this.LHt,t,this.qHt):t.zw===el.wE&&i&&this.LHt!==t&&await this.dXt(t,this.MHt,this.qHt),await this.JXt(t,e)):await this.HXt():await this.JXt(t,e)}async LWt(t,e){try{await this.hEt.LWt(t,e)}catch(i){throw ih(i),(Li(i)||TA(i))&&await this.QXt(t,e),i}}async JXt(t,e){if(!fh(this.$Xt,t)){this.$Xt.push(t);try{const i=t.zw===el.TW||t.zw===el.GBt?1/0:this.Wlt.maxRetries;await K((()=>this.retryOfflineRenditionsCallback(t,e)),e,i,this.Wlt.minimumBackoff,this.Wlt.maximumBackoff)}catch(t){this.uH(new Z(Ci.MEDIA_LOAD_ERROR,t.message,t))}finally{_e(this.$Xt,t),t.ULt.cVt===-1/0&&await this.qXt()}}}dXt(t,e,i,s){void 0===s&&(s={});const n={nBt:s.nBt||!1,oBt:s.oBt||!1,rBt:s.rBt||!1,WR:s.WR||!1,xXt:s.xXt||!1};return n.xXt||n.WR||this.LHt!==t||this.MHt!==e||this.qHt!==i?void 0===t&&void 0===e?Promise.reject(new m("Trying to buffer no media renditions.")):(this.LHt=t,this.MHt=e,this.qHt=i,this.SVt(),this._o(new JQ),this.V8.np(),this.V8=new Fi,this.V8.rp(this.GW.ep),this.tzt.np(),this.tzt=new Fi,this.tzt.rp(this.GW.ep),this.nXt=Ts(this.ezt([this.nXt,this.W8].filter(ol),t,e,i,n,this.tzt.ep),this.tzt).catch(this.rXt),this.nXt):Promise.resolve()}async izt(t,e,i,s){var n,r;const o=[];if(o.push(this.szt(e,s)),wK(t,e)||o.push(this.szt(t,s)),null==(r=this.QHt)||null==(n=r.hls)?void 0:n.delaySubtitlePreload)return Promise.all(o).then((()=>this.szt(i,s)));const h=this.szt(i,s);return Promise.all([...o,h])}async szt(t,e){if(t)try{await this.hEt.LWt(t,e)}catch(i){ih(i),(Li(i)||TA(i))&&await this.nzt(t,e)}}async nzt(t,e){if(this.UXt)return;const i=0===this.rt.V;if(t.zw===el.yE||t.zw===el.wE&&i)if(this.RXt&&this.RXt.length<=1)await this.JXt(t,e);else{const t=await this.bXt();this.AXt(t);const e=this.SXt(t.SBt),i=this.TXt(t.TBt),s=this.kXt(t.nFt);await this.dXt(e,i,s)}else await this.JXt(t,e)}async ezt(t,e,i,s,n,r){var o;if(!this.eXt)return void await this.izt(e,i,s,r);await Promise.all(t.map((t=>t.catch(M)))),this.rzt(),await this.ozt(r),await this.hzt();const h=[];n.oBt&&this.kZ&&this.kZ.d4&&h.push(this.kZ.d4.rT(0,1/0)),n.rBt&&this.kZ&&this.kZ.f4&&h.push(this.kZ.f4.rT(0,1/0)),await Promise.all(h),Io(r);const a=await this.azt(e,i,n.WR,r);this.uzt(e,i,n.nBt||a),this.czt(s,n.nBt),Io(r);const u=[i,wK(e,i)?void 0:e,s].filter(ol);try{await Promise.all(u.filter((t=>!t.ULt.sVt)).map((t=>{var e;return null==(e=this.hEt)?void 0:e.BWt(t,r)})))}catch(t){ih(t)}if(Io(r),this.K4(),this.SVt(),void 0!==this.JHt)this.sXt(this.JHt,this.$Ht);else if(!this.iEt&&(null==(o=this.VHt)?void 0:o.ULt.Sn)){const t=this.VHt.ULt,e=t.Sn;let i=e.LOt;if(e.LOt<0){const e=t.zFt;i+=e.Tn(e.V-1)}this.sXt(i,{KHt:!e.BOt})}else!this.iEt&&u.every((t=>!t.ULt.qOt))?this.sXt(1/0,{KHt:!0}):this.YHt.length>0&&this.lzt()}async azt(t,e,i,s){var n,r;const o=void 0!==t&&t!==e,h=void 0!==e,a=await this.dzt(t,e,this.VHt);if(Io(s),!i&&this.kZ&&!a)return!1;const u=void 0!==(null==(n=this.kZ)?void 0:n.d4),c=void 0!==(null==(r=this.kZ)?void 0:r.f4);if(!i&&!(o!==u||h!==c)&&a&&this.kZ&&this.kZ.ZJ(a))return await this.ozt(s),await this.kZ.XJ(a),!0;for(const t of this.YHt)t.nHt.forEach((t=>t.np()));this.aO.Q7();try{this.kZ&&await this.aO.nr(),this.kZ=await this.fzt(a,o,h)}finally{this.aO.J7()}return!0}async dzt(t,e,i){var s,n;const r=i.Frt,o=[];if(void 0!==t){var h,a;const e=null!=(a=null==(h=t.Frt)?void 0:h.UPt)?a:null==r?void 0:r.UPt;if(!e)return;{const t='audio/mp4; codecs="'+e+'"';Ur.zN(xa,"Configuring MediaSource for initial audio rendition with codec: "+t+"."),o.push(t)}}if(void 0!==e){var u,c;const t=null!=(c=null==(u=e.Frt)?void 0:u.ZPt)?c:null==r?void 0:r.ZPt;if(!t)return;{const e='video/mp4; codecs="'+t+'"';Ur.zN(xa,"Configuring MediaSource for initial video rendition with codec: "+e+"."),o.push(e)}}if(0===o.length)return void Ur.yBt(xa,"No codecs found on the active variant stream.");var l;const d=null!=(l=null==e||null==(s=e.ULt.xct[0])?void 0:s.rZ)?l:[];var f;const _=null!=(f=null==t||null==(n=t.ULt.xct[0])?void 0:n.rZ)?f:[],v=this.hEt.Nr,g=await QK(this.QHt.contentProtection,o,v.iWt.concat(_).concat(d),this.WW,this.QHt.useCredentials);return{zw:De.qW,J4:o.map((t=>({Fk:t}))),CZ:g,u5:this.QHt.useManagedMediaSource}}async fzt(t,e,i){let s;return s=t?await this.aO.$n(t):new iJ(this.aO,e,i),this.kZ=s,this.K4(),this.zTt(),this.qTt(),s}K4(){const t=this.kZ;if(t&&S(t.ct)){var e,i,s;const n=null!=(s=null==(e=this.LHt)?void 0:e.ULt.ct)?s:null==(i=this.MHt)?void 0:i.ULt.ct;void 0!==n&&n>0&&t.q4(n)}this.SVt()}zTt(){const t=this.kZ;t&&(t.f4&&(t.f4.$j=this.XH.uQ),t.d4&&(t.d4.$j=this.XH.uQ))}qTt(){const t=this.kZ;t&&(t.f4&&(t.f4.sQ=this.XH.sQ),t.d4&&(t.d4.sQ=this.XH.sQ))}uzt(t,e,i){if(!this.kZ)throw new m("Invalid state");this.kZ.d4?this.H4&&this.H4.PHt(this.kZ.d4)||(this.H4=new Ec(Fo.wE,this.kZ.d4,this.hXt?this.Zmt:void 0,this.aXt?this.xNt:void 0)):this.H4=void 0,this.kZ.f4?this.X4&&this.X4.PHt(this.kZ.f4)||(this.X4=new Ec(Fo.yE,this.kZ.f4,this.hXt?this.Zmt:void 0,this.aXt?this.xNt:void 0)):this.X4=void 0;const s=wK(t,e);if(this.X4&&e){const t=s&&this.H4?[this.X4,this.H4]:[this.X4];this.OHt?(i&&(this.OHt.np(),this.OHt.uHt.Gb()),this.OHt.QLt!==e&&this.OHt.dGt(e)):(this.OHt=function(t,e,i,s,n,r,o,h,a,u){const c=s.Nr.sB,l=new BQ(c),d=new NQ(Fo.yE,t,s,l,n,r,o,u),f=e.map((t=>t.zw)),_=h.wTt(l,s.Nr.sB,f),v=new jQ(d,l,_,a);return v.aHt(e),v}(e,t,this.aO,this.hEt,this.WW,this.Rut,this.kUt,this.gXt,this.XH,this.QHt.useCredentials),this.OHt.oHt.bn(DQ.aGt,this._zt),this.OHt.oHt.bn(DQ.uGt,this.vzt),this.OHt.hHt.bn(Ji.DZt,this.gzt),this.OHt.hHt.bn(Ji.MZt,this.mzt),this.OHt.hHt.bn(Ji.LZt,this.pzt),this.OHt.hHt.bn(Ji.NZt,this.wzt)),this.OHt.aHt(t)}else{var n;null==(n=this.OHt)||n.Km(),this.OHt=void 0}var r;this.H4&&t&&!s?(this.lXt?(i&&(this.lXt.np(),this.lXt.uHt.Gb()),this.lXt.QLt!==t&&this.lXt.dGt(t)):(this.lXt=function(t,e,i,s,n,r,o,h,a,u){const c=s.Nr.sB,l=new BQ(c),d=new NQ(Fo.wE,t,s,l,n,r,o,u),f=h.wTt(l,s.Nr.sB,[e.zw]),_=new jQ(d,l,f,a);return _.aHt([e]),_}(t,this.H4,this.aO,this.hEt,this.WW,this.Rut,this.kUt,this.gXt,this.XH,this.QHt.useCredentials),this.lXt.oHt.bn(DQ.uGt,this.vzt),this.lXt.hHt.bn(Ji.DZt,this.gzt),this.lXt.hHt.bn(Ji.NZt,this.wzt)),this.lXt.aHt([this.H4])):(null==(r=this.lXt)||r.Km(),this.lXt=void 0);this.yzt()}czt(t,e){if(this.OXt){this.OXt.oHt.QLt===t?e&&(this.OXt.np(),this.OXt.uHt.Gb()):(this.OXt.Km(),this.OXt=void 0)}if(!this.OXt&&t){const e=this.BXt.get(t.OC);e.LE=Ui.Qn,this.OXt=function(t,e,i,s,n,r,o){const h=i.Nr.sB,a=new VQ(e,h),u=new BQ(h),c=new NQ(Fo.Rk,t,i,u,s,n,r,o),l=new qQ(u,h,Fo.Rk),d=new jQ(c,u,l);return d.cHt(a),d}(t,e,this.hEt,this.WW,this.Rut,this.kUt,this.QHt.useCredentials)}}yzt(){const t=[this.H4,this.X4].filter(ol).map((t=>t.zw));this.hEt.Nr.sB.tWt(t)}async U8(t,e,i,s){let n;if(await Promise.all(t.map((t=>t.catch(M)))),Io(s),await this.hzt(),Io(s),this.JHt=void 0,this.tXt=void 0,this.iEt=!0,i.BOt){n=AJ([this.LHt,this.MHt].filter(ol))}else n=this.Ikt;const r=n.mB(e),o=this.aO.Ay(ns.eb,s);this.aO.Db(r,i.KHt),this.eXt&&this.YHt.length>0&&(this.hEt.Nr.sB.eWt(),this.bzt(this.aO.RI),this.lzt()),await o,this.sEt()}sEt(){const t=this.mO;if(this.JI||this.dR||void 0===t)return;const e=this.RI;var i,s;t+this.RI-this.SR.kd.maximumOffset<e?null==(i=this.mZ)||i.Sn():null==(s=this.mZ)||s.NR()}bzt(t){for(const e of this.YHt)e.xGt(t)||(e.vHt(),e.uHt.bZt()),e.fHt(t)||(e.gHt(),e.uHt.AZt())}rzt(){for(const t of this.YHt)t.np()}hzt(){return Promise.all([this.gNt(),this.Azt(),this.Szt()])}lzt(){this.vNt(),this.Tzt(),this.kzt()}async qXt(){this.eXt&&this.YHt.length>0&&(this.YHt.forEach((t=>t.vHt())),await this.gNt(),this.vNt(),this.YHt.forEach((t=>t.oHt.LGt())))}vNt(){if(this.Ezt)return;const t=()=>{this.Ezt=void 0};this.xzt=new Fi,this.xzt.rp(this.GW.ep),this.Ezt=Ts(this.DNt(this.xzt.ep),this.xzt).catch(this.rXt).then(t,t)}async gNt(){var t;null==(t=this.xzt)||t.np();const e=this.Ezt;this.Ezt=void 0,e&&await e}async DNt(t){Io(t);const e=this.YHt;for(;;){const i={stack:[],error:void 0,hasError:!1};try{const s=[],n=this.aO.RI;for(const t of e){const e=t.oHt,i=t.Plt(n);if(e.bCt)s.push(e.dUt());else if(t._Ht(n,i,this.XH.uQ)||e.yGt){const n=e.QLt.ULt,r=n.xct,o=e.IGt(i);if(void 0===o){if(e.QLt.ULt.qOt)continue;r.length&&r[0].lF>i&&(this.RI=1/0),e.FGt(),e.DGt(i)}else{const[i,s]=o;if(i.pOt){const s=n.vVt(i.IOt),o=Do(r.slice(s),(t=>!t.pOt));e.PGt(null==o?void 0:o.IOt),t.nHt.forEach((t=>{var e;t.i4(i.lF,null!=(e=null==o?void 0:o.lF)?e:i.dF)}))}else e.Zat(i,s,t.QWt),t.hHt.XZt(i,s)}s.push(e.dUt())}}const r=Gi(i,Fi.hp([t]),!1);if(0===s.length){e.every((t=>t.oHt.qCt))||s.push(this.aO.Ay(ns._b,r.ep));for(const t of e)s.push(t.hHt.Ay(Ji.NZt,r.ep))}await Lu(Promise.race(s),r.ep)}catch(t){i.error=t,i.hasError=!0}finally{ce(i)}}}Tzt(){if(this.Izt)return;const t=()=>{this.Izt=void 0};this.Rzt=new Fi,this.Rzt.rp(this.GW.ep),this.Izt=Ts(this.Czt(this.Rzt.ep),this.Rzt).catch(this.rXt).then(t,t)}async Azt(){var t;null==(t=this.Rzt)||t.np();const e=this.Izt;this.Izt=void 0,e&&await e}async Czt(t){Io(t);const e=this.YHt;for(;;){const i=[];for(const t of e){const e=t.oHt,s=t.hHt;if(s.bCt)i.push(s.dUt());else{const t=e.bGt();t?"Eut"===t.zw?(s.KZt(t),i.push(s.dUt())):"GOt"===t.zw&&(s.zZt(t),i.push(s.dUt())):i.push(e.BGt())}}if(0===i.length)break;await Lu(Promise.race(i),t)}}kzt(){if(this.Pzt)return;this.Dzt=new Fi,this.Dzt.rp(this.GW.ep);const t=()=>{this.Pzt=void 0};this.Pzt=Ts(this.Nzt(this.Dzt.ep),this.Dzt).catch(this.rXt).then(t,t)}async Szt(){var t;null==(t=this.Dzt)||t.np();const e=this.Pzt;this.Pzt=void 0,e&&await e}async Nzt(t){for(;;){const e=this.YHt;e.forEach((t=>t.Uat()));const i=this.aO.RI,s=[],n=[];for(const t of e){const e=t.hHt;for(const r of t.nHt){const t=r.nUt?s:n;if(r.bCt)t.push(r.dUt());else if(!r.fUt(i)){const i=e.eHt(r.zw);i?"Eut"===i.zw&&i.XOt===this.XHt?(r.Llt(i),t.push(r.dUt())):"rPt"===i.zw&&i.XOt===this.XHt&&(r.a3(i),t.push(r.dUt())):n.push(e.iHt(r.zw))}}}if(0===s.length){if(await this.Mzt(e,i,t))continue}if(0===s.length&&0===n.length){e.every((t=>t.nHt.length>0&&t.nHt.every((t=>t.fUt(i)))))&&this.kZ.Y3();break}await Lu(Promise.race([...s,...n]),t)}}async Mzt(t,e,i){const s=[],n=[];for(const i of t){const t=i.Plt(e);for(const r of i.nHt){if(!r.nUt)continue;const o=i.hHt.eHt(r.zw);if(void 0!==o){if(o.XOt===this.XHt)return!1;s.push(o)}else{if(i.bCt||i._Ht(e,t,this.XH.uQ)||!r._Ut(e,t))return!1;{const t=r.rUt.QWt;void 0!==t&&n.push(t)}}}}if(0===s.length)return!1;const r=hf(s,(t=>t.XOt)).XOt;if(s.every((t=>"rPt"===t.zw&&t.XOt===r))){const t=Ei(s,(t=>t.lF)).lF,e=[...s,...n],r=await this.Lzt(e);this.Bzt(r)?(Ur.wBt(kc,"Seamless switch from",this.kZ.kd,"to",r),await this.kZ.XJ(r),Ur.wBt(kc,"Seamless switch complete.")):await this.Ozt(t,r,i),this.XHt=s[0].XOt}else for(const e of t)for(const t of e.nHt){let i=e.hHt.eHt(t.zw);for(;void 0!==i&&("rPt"!==i.zw||i.XOt!==r);)Ur.wBt(kc,"Removing append for other discontinuity, expecting "+r,i),e.hHt.gUt(i),i=e.hHt.eHt(t.zw)}return!0}Bzt(t){return this.fXt===Gu.AO||this.fXt!==Gu.SO&&this.kZ.ZJ(t)}async Lzt(t){const e=t.map((t=>t.sHt.Frt)),i=e.map((t=>({Fk:t}))),s=Ye(t,(t=>t.sHt.rZ));s.push(...this.hEt.Nr.iWt);let n=await QK(this.QHt.contentProtection,e,s,this.WW,this.QHt.useCredentials);return 0===n.length&&this.kZ&&this.kZ.kd.CZ.length>0&&(n=this.kZ.kd.CZ),{zw:De.qW,J4:i,CZ:n,u5:this.QHt.useManagedMediaSource}}async Ozt(t,e,i){var s;const n=this.kZ,r=n.ct,o=this.SI.length>0&&this.RI<t;if(o)try{for(Ur.wBt(kc,"Marking end of stream and waiting for ended to switch discontinuity."),n.Y3();!this.aO.MI&&this.aO.RI<t;)await this.aO.Ay([ns._b,ns.Ly],i)}catch(t){throw n.V3(),n.q4(r),t}Ur.wBt(kc,"Perform hard switch from",null==(s=this.kZ)?void 0:s.kd,"to",e);try{this.aO.Q7(),this.RI<t&&this.aO.Db(t,!0,!0),this.X4=void 0,this.H4=void 0,this.yzt(),await this.aO.nr(),this.kZ=await this.aO.$n(e),this.K4(),this.zTt(),this.qTt(),this.kZ.f4&&(this.X4=new Ec(Fo.yE,this.kZ.f4,this.hXt?this.Zmt:void 0,this.aXt?this.xNt:void 0),this.X4.i4(t-1,t)),this.kZ.d4&&(this.H4=new Ec(Fo.wE,this.kZ.d4,this.hXt?this.Zmt:void 0,this.aXt?this.xNt:void 0),this.H4.i4(t-1,t)),this.yzt()}finally{o&&uh(this.aO.DR()),this.aO.J7()}if(this.OHt){const t=void 0!==this.H4&&void 0===this.lXt?[this.X4,this.H4]:[this.X4];this.OHt.aHt(t)}this.lXt&&this.lXt.aHt([this.H4]),Ur.wBt(kc,"Hard switch complete.")}ozt(t){return Lu(qe(Ye(this.YHt,(t=>t.nHt.map((t=>t.dUt()))))),t)}Kkt(){const t=this.pR,e=this.vR;this.nxt===t&&this.rxt===e||(this.nxt=t,this.rxt=e,this._o(new W))}async yn(){Ur.zN(xa,"Unloading the player."),this.Fzt(),this.VEt(),await this.nr(),this.aO.zZ=void 0,this.WXt.yn(),await this.VZ.yn(),await this.Zmt.yn(),await this.xNt.yn(),this.LO.yn(),this.FO.yn(),this.Hl.yn(),this.Vzt.yn(),this.axt.Km(),this.kUt.Km(),this.gXt&&(this.gXt.Km(),this.gXt=void 0)}async nr(){Ur.zN(xa,"Resetting the player."),this.vn(ut.VLt,this.handleBufferingErrorEvent),this.XHt=-1,this.GW.np(),this.V8.np(),this.V8=new Fi,this.V8.rp(this.GW.ep),this.tzt.np(),this.tzt=new Fi,this.tzt.rp(this.GW.ep);const t=[this.ipt,this.W8,this.nXt].filter(ol);await Promise.all(t.map((t=>t.catch(M)))),this.ipt=void 0,this.W8=void 0,this.nXt=void 0,this.LHt=void 0,this.MHt=void 0,this.qHt=void 0,this.RXt=void 0,this.PXt=void 0,this.NXt=void 0,this.MXt=void 0,this.PXt=void 0,this.NXt=void 0,this.MXt=void 0,this.mZ=void 0,this.zH.nr(),this.$Xt=[],this.AXt(void 0),this.rzt(),await this.hzt(),this.lXt&&(this.lXt.Km(),this.lXt=void 0),this.OHt&&(this.OHt.Km(),this.OHt=void 0),this.OXt&&(this.OXt.Km(),this.OXt=void 0),this.H4=void 0,this.X4=void 0,this.kZ=void 0,this.hEt&&(this.hEt.Km(),this.hEt=void 0),this.vXt&&(this.Hl.lZ(this.vXt.nt),this.vXt=void 0),await this.VZ.nr(),await this.Zmt.nr(),await this.xNt.nr(),this.aO.GZ(),await this.aO.nr(),this.QHt=void 0,this.eXt=!1,this.j4=ee.WB(),this.JHt=void 0,this.sxt=void 0,this.nxt=0,this.rxt=0,this.tXt=void 0,this.iEt=!1,this.k8=!1,As.Um(this.iXt),this.Fkt=!1,this.Wzt=!1,this.Ckt=0,this.fXt=Gu.bO,this.Vzt.nr(),this.Uzt(),this._o(new $t(this.RI,this.aR))}Uzt(){for(const t of this.LO.mC)t.yn();for(const t of this.FO.mC)t.yn();for(const t of this.Hl.mC)t.yn();this.LO.nr(),this.FO.nr(),this.Hl.nr(),this.BXt.clear()}Gzt(){this.Vzt.bn(gJ,this.Ds),this.Vzt.bn(Zc.uB,this.fO),this.Vzt.bn(Zc.aB,this.Zzt),this.Vzt.bn(Zc.nB,this.Hzt),this.XH.bn("Jj",this.lxt),this.XH.bn("iQ",this.dxt),this.aO.bn(mJ,this.Ds),this.aO.bn(bo.fa,this.fxt),this.aO.bn(ns.Iy,this.handleContentProtectionErrorEvent),this.aO.bn(ns.Dy,this.Xzt),this.aO.bn(ns.Ly,this.Ah),this.aO.bn(ns.Ky,this.BMt),this.aO.bn(ns.ho,this.zzt),this.aO.bn(ns.jy,this.qzt),this.aO.bn(Zc.aC,this.cU),this.aO.bn(ns._b,this.i9),this.aO.bn(ns.ib,this.Ge),this.aO.bn(ns.eb,this.jZ),this.aO.bn(ns.$y,this.Yzt),this.aO.bn(ns.vb,this.Kzt)}Fzt(){this.Vzt.vn(gJ,this.Ds),this.Vzt.vn(Zc.uB,this.fO),this.Vzt.vn(Zc.aB,this.Zzt),this.Vzt.vn(Zc.nB,this.Hzt),this.XH.vn("Jj",this.lxt),this.XH.vn("iQ",this.dxt),this.aO.vn(mJ,this.Ds),this.aO.vn(bo.fa,this.fxt),this.aO.vn(ns.Iy,this.handleContentProtectionErrorEvent),this.aO.vn(ns.Dy,this.Xzt),this.aO.vn(ns.Ly,this.Ah),this.aO.vn(ns.Ky,this.BMt),this.aO.vn(ns.ho,this.zzt),this.aO.vn(ns.jy,this.qzt),this.aO.vn(Zc.aC,this.cU),this.aO.vn(ns._b,this.i9),this.aO.vn(ns.ib,this.Ge),this.aO.vn(ns.eb,this.jZ),this.aO.vn(ns.$y,this.Yzt),this.aO.vn(ns.vb,this.Kzt)}constructor(t,e,i,s,n,r,o,h){var a;super(),this.XH=i,this.zH=s,this.kUt=n,this.mXt=r,this.BXt=Bh(),this.aXt=!0,this.hXt=!0,this.eXt=!1,this.QHt=void 0,this.kZ=void 0,this.ipt=void 0,this.GW=new Fi,this.hEt=void 0,this.PXt=void 0,this.NXt=void 0,this.MXt=void 0,this.VHt=void 0,this.LHt=void 0,this.MHt=void 0,this.qHt=void 0,this.RXt=void 0,this.$Xt=[],this.H4=void 0,this.X4=void 0,this.lXt=void 0,this.OHt=void 0,this.OXt=void 0,this.gXt=void 0,this.tzt=new Fi,this.nXt=void 0,this.V8=new Fi,this.W8=void 0,this.XHt=-1,this.xzt=void 0,this.Rzt=void 0,this.Dzt=void 0,this.Ezt=void 0,this.Izt=void 0,this.Pzt=void 0,this.xSt=!0,this.GXt=0,this.UXt=!1,this.TZ=hi.xH,this.bZ=void 0,this.AZ=void 0,this.j4=ee.WB(),this.jzt=[],this.JHt=void 0,this.$Ht=void 0,this.iEt=!1,this.k8=!1,this.sxt=void 0,this.nxt=0,this.rxt=0,this.tXt=void 0,this.iXt=0,this.Fkt=!1,this.Wzt=!1,this.fXt=Gu.bO,this.NDt=void 0,this.Qzt=void 0,this.Ckt=0,this.handleContentProtectionErrorEvent=t=>{this.bZ=Zs(t.errorObject),this.AZ=t.errorObject,this.Ds(t)},this.handleBufferingErrorEvent=t=>{!function(t){return t instanceof aM}(t.lt)?this.uH(new Z(Ci.MEDIA_LOAD_ERROR,t.lt.message,t.lt)):uh(this.dXt(this.dBt,this._Bt,this.qHt,{WR:!0}))},this.fxt=t=>{this.uH(xk(t.lt))},this.Xzt=()=>{this.SVt();const t=this.ct;t!==this.sxt&&(this.sxt=t,this._o(new yn(this.sxt)))},this.Ah=()=>{this.MI&&this._o(new ss(this.RI))},this.BMt=()=>{this._o(new nl(this.RI))},this.zzt=()=>{this.nkt(),this._o(new he(this.RI))},this.fO=()=>{void 0!==this.Qzt&&(As.Um(this.Qzt),this.Qzt=void 0),this._o(new Xr(this.RI))},this.qzt=()=>{this._o(new ki(this.RI))},this.cU=()=>{this._o(new oa(this.RI,this.aR))},this.i9=()=>{const t=this.eBt;of(this.jzt,t)||(this._o(new dQ),this.jzt=t),this._o(new rl(this.RI,this.kI))},this._zt=Fd((t=>{t.PE===Fo.yE&&this.BHt()&&uh(this.FHt())}),200),this.vzt=t=>{var e;this.Ckt+=t.lGt;const i=this.rt.V>0?t.PE===Fo.yE:t.PE===Fo.wE;"Eut"===t.cGt&&i&&uh(this.HXt()),this._o(new oW(function(t){if(t){if(void 0!==t.oAt){var e,i;const s=t.oAt.Sn+(null!=(i=t.oAt.V)?i:0);return{Xu:t.Fx,Kat:[null==(e=t.oAt)?void 0:e.Sn,s],DE:!0}}return{Xu:t.Fx.toString()||"",DE:!0}}return{Xu:"",DE:!0}}(t.uri),(null==(e=this.JLt)?void 0:e.jG)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.PE,t.httpStatusCode,t.lGt))},this.Ge=()=>{this._o(new Al(this.RI))},this.jZ=()=>{this._o(new Be(this.RI))},this.Yzt=()=>{this.Kkt()},this.Kzt=()=>{this._o(new Ar(this.RI,this.yR))},this.Zzt=()=>{this.aO.dR?this._o(new Pa(this.RI)):(null!=this.Qzt||(this.Qzt=As.Gm((()=>{this.Wzt&&(this.NDt=void 0,uh(this.UHt()))}),2500)),this.nkt(),this._o(new Pa(this.RI)))},this.Hzt=()=>{this.Wzt=!0,this._o(new rt(this.RI,this.aR))},this.rXt=t=>{Se(t)||Li(t)||TA(t)||(this.rzt(),uh(this.hzt()),this._o(new DK(t)))},this.jWt=()=>{this.SVt()},this._Xt=t=>{uh(this.QXt(t.QLt,this.GW.ep))},this.Gpt=t=>{if(Se(t))return;const e=t instanceof Z?t:new Z(Ci.MEDIA_DECODE_ERROR,t.message,t);this.uH(e)},this.onTextTrackChange=t=>{if(!this.VHt)return;const e=t.Ht,i=this.LXt(e);i&&(e.LE===Ui.GC||e.LE===Ui.Qn?(uh(this.jXt(i)),this.BXt.forEach((t=>{t!==e&&(t.LE=Ui.Mh)}))):this.qHt&&this.qHt===i&&uh(this.dXt(this.LHt,this.MHt,void 0)))},this.retryOfflineRenditionsCallback=async(t,e)=>{this.zHt!==t&&this.dBt!==t&&this._Bt!==t||(await this.hEt.LWt(t,e),t.ULt.cVt=-1/0)},this.lxt=()=>{this.zTt()},this.dxt=()=>{this.qTt()},this.gzt=t=>{const e=this.VHt,i=null==e?void 0:e.iFt;if(this.hEt.qWt(t.Frt,t.QLt.ULt),!i&&(this.hEt.YWt(t.Frt,t.QLt.ULt),this.yXt.xBt(),e)){const t=void 0!==this.LHt&&!fh(e.SBt,this.LHt),i=void 0!==this.MHt&&!fh(e.TBt,this.MHt);(t||i)&&this.dXt(t?void 0:this.LHt,i?void 0:this.MHt,this.qHt).catch(M)}},this.mzt=t=>{this.yXt.CBt(t.QLt,t.Xdt)},this.pzt=t=>{this.yXt.DBt(t.QLt,t.BZt.VF())},this.wzt=t=>{this.hEt.XWt(t.QLt)},this.Rut=new MX(o),this.aO=t,this.WW=e,this.RZ=new PK(this.XH.Zj),this.YXt=new NK(this.aO),this.XXt=new ZK(this.XH),this.Wlt=ne({},h.retryConfiguration,{maxRetries:null!=(a=h.retryConfiguration.maxRetries)?a:1/0}),this.LO=new an,this.FO=new an,this.yXt=new CK(this,this.XH,this.LO,this.FO),this.WXt=new ca,this.VZ=new Xx(this.aO,this.WW),this.Zmt=new DX(this.aO),this.xNt=new ft(this.aO),this.Hl=new uu([this.WXt,this.VZ.Z,this.Zmt.Z,this.xNt.Z,this.aO.nt]),this.MZ=new Jh(this.WW),this.aO.zZ=this.MZ,this.axt=new bJ(this,this.aO),this.Vzt=new I(this.axt,!0),this.Gzt()}},yJ=class{dH(t,e){return!!Wh(t.type)&&!t.useNativePlayback}async fH(t){return!!t.aes128||await AT(t,!0)}},bJ=class extends Jx{get aR(){return this.na.aR}vxt(){this._o(new oa(this.RI,this.aR))}constructor(t,e){super(e),this.na=t}};function AJ(t){return t.reduce(((t,e)=>t.jn(e.ULt.zFt)),new ee([0,1/0]))}function SJ(t){const e=Do(t,(t=>t.GLt)),i=t.filter((t=>t.ZLt)),s=As.Nw,n=i.map((t=>t.gs)).filter(ol),r=nJ(n,s);return r?Do(i,(t=>t.gs===r)):e}function TJ(t,e){for(const i of e){const e=t.filter((t=>t.Frt&&t.Frt.UPt&&hM(t.Frt.UPt,i)));if(0!==e.length)return e}}function kJ(t){var e;return null!=(e=SJ(t))?e:t[0]}function EJ(t,e){return t.filter((t=>xJ(t,e)))}function xJ(t,e){const i=e+pJ,s=0===t.TBt.length||t.TBt.some((t=>t.ULt.cVt<As.Wm()-i)),n=0===t.SBt.length||t.SBt.some((t=>t.ULt.cVt<As.Wm()-i));return s&&n}function IJ(t,e){if(!e||e.ULt.qOt)return!1;const i=e.ULt.xct;return 0!==i.length&&i[0].lF>t}r(),r();var RJ=class{async SUt(t,e,i){try{const s=await crypto.subtle.importKey("raw",e,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:i},s,t);return new j(n)}catch(t){throw new Z(Ci.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}Km(){}static TT(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}};r(),r(),r(),r();var Uc=class extends me{constructor(t,e){super(t),this.data=e}},CJ=["message","messageerror","error"];r();var PJ=class extends me{constructor(t){super(bo.fa),this.error=t}},DJ=class extends So{get Jzt(){return this.$zt.ep.zm}tqt(t,e){this.Jzt||(void 0!==this.eqt?this.eqt.tqt(t,e):this.iqt.push({Tb:t,sqt:e}))}nqt(){this.Jzt||(this.$zt.np(),En(this.iqt),void 0!==this.eqt&&this.eqt.nqt())}constructor(t){super(),this.eqt=void 0,this.iqt=[],this.rqt=t=>{if(this.Jzt)t.nqt();else{this.eqt=t,this.eqt.bn(CJ,this.Ds);for(const e of this.iqt)t.tqt(e.Tb,e.sqt);En(this.iqt)}},this.oqt=t=>{if(this.Jzt)return;const e=t instanceof m?t:new m("Could not create Worker.");this._o(new PJ(e)),this.nqt()},this.$zt=new Fi,t(this.$zt.ep).then(this.rqt,this.oqt)}};r(),r();var NJ=class extends So{tqt(t,e){e?this.eqt.postMessage(t,e):this.eqt.postMessage(t)}nqt(){this.Ro(),this.eqt.removeEventListener("message",this.hqt),this.eqt.removeEventListener("messageerror",this.aqt),this.eqt.removeEventListener("error",this.G7),this.eqt.terminate()}constructor(t,e){super(),this.hqt=t=>{this._o(new Uc("message",t.data))},this.aqt=t=>{this._o(new Uc("messageerror",t.data))},this.G7=t=>{null==t.preventDefault||t.preventDefault.call(t);const e=t.error instanceof m?t.error:new m(t.message);this._o(new PJ(e)),this.nqt()},this.eqt=new Ol(t,e),this.eqt.addEventListener("message",this.hqt),this.eqt.addEventListener("messageerror",this.aqt),this.eqt.addEventListener("error",this.G7)}};r();var MJ=0,LJ=class extends So{tqt(t,e){e?this.uqt.contentWindow.postMessage({type:"message",data:t},"*",e):this.uqt.contentWindow.postMessage({type:"message",data:t},"*")}nqt(){var t;this.uqt.removeEventListener("load",this.cqt),self.removeEventListener("message",this.lqt),null==(t=this.uqt.contentWindow)||t.postMessage({type:"terminate"},"*"),We(this.uqt)}constructor(t,e){super(),this.cqt=()=>{this.uqt.removeEventListener("load",this.cqt),this.uqt.contentWindow.postMessage({type:"initialize",id:this.jS,script:this.dqt},"*")},this.lqt=t=>{t.origin===this.fqt&&t.data.id===this.jS&&("initialized"===t.data.type||("error"===t.data.type?(this._o(new PJ(new m(t.data.data.message))),this.nqt()):this._o(new Uc("message",t.data.data))))},this.jS=MJ++,this.dqt=t;const i=As.Bh("iframe.html",e);this.uqt=function(t){const e=h.createElement("iframe");return e.width="0",e.height="0",e.style.display="none",e.role="",e.src=t,h.body.appendChild(e),e}(i.href),this.fqt=i.origin,this.uqt.addEventListener("load",this.cqt),self.addEventListener("message",this.lqt)}};function BJ(t,e,i){const s=As.Ew(t,e);return new DJ((t=>async function(t,e,i,s){let n;try{return n=new NJ(t,i),await FJ(n,s),n}catch(t){null==n||n.nqt(),ih(t)}if(OJ&&xb){let e;try{const i=await As.mI.eE({Xu:t,EE:Ce.GET,tE:Te.Rk,ep:s});e=await i.Mk(s)}catch(t){ih(t)}if(e){let t;try{const r=xb([e],{type:"application/javascript"});return t=URL.createObjectURL(r),n=new NJ(t,i),await FJ(n,s),n}catch(t){null==n||n.nqt(),ih(t),OJ=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return n=new LJ(t,e),await FJ(n,s),n}catch(t){throw null==n||n.nqt(),t}}(s,e,i,t)))}var OJ=!0;async function FJ(t,e){const i=await t.Ay(["message","error"],e);if("error"===i.type)throw function(t){return new Z(Ci.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(i.error);if(!function(t){return wd(t)&&"9.7.0"===t._qt}(i.data))throw new Z(Ci.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (9.7.0).");return i}r();var VJ=function(t){return t.vqt="SUt",t.gqt="KUt",t}({}),WJ=function(t){return t.mqt="pqt",t.wqt="yqt",t}({}),UJ=class{bqt(){const t=BJ(this.Aqt,this.Sqt,{name:"THEOplayer decrypt worker"});return t.bn("message",this.Tqt),t.bn("error",this.kqt),t}SUt(t,e,i){const s=""+ ++this.Eqt,n={xqt:VJ.vqt,Iqt:s,Rqt:t,Cqt:e,Pqt:i},r=new is;return this.Dqt.set(s,r),null!=this.eqt||(this.eqt=this.bqt()),this.eqt.tqt(n),r.Xb}Km(t){void 0===t&&(t=new vt),this.Dqt.forEach((e=>e.Hb(t))),this.Dqt.clear(),this.eqt&&(this.eqt.nqt(),this.eqt=void 0)}constructor(t){this.eqt=void 0,this.Eqt=0,this.Dqt=Vh(),this.Tqt=t=>{const e=t.data,i=e.Nqt,s=this.Dqt.get(i);if(s)if(this.Dqt.delete(i),e.Mqt===WJ.mqt)s.Zb(e.Lqt);else if(e.Mqt===WJ.wqt){const t=e.Bqt,i=e.Oqt?new m(e.Oqt):void 0,n=new Z(Ci.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt. (code: "+t+")",i);s.Hb(n)}},this.kqt=t=>{const e=new Z(Ci.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.Km(e)},this.Sqt=t;try{this.Aqt=As.Ew("theoplayer.d.js",t)}catch(t){throw new Z(Ci.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function GJ(t){const e=Do(t.boxes,AN);if(!e)return;const i=Do(e.boxes,SN);return i?i.handlerType:void 0}function ZJ(t){const e=new Cy;return e.boxes.push(...t.boxes),e}function HJ(t){const e=new Fc;return e.boxes.push(...t.boxes),e}r(),r(),r(),r();var XJ=8;function zJ(t,e){const i=function(t){const e=new ny;return e.boxes.push(...t.boxes),e}(t),s=YJ(e);for(let t=0;t<i.boxes.length;t++){const n=i.boxes[t];if(n===e)i.boxes[t]=new ww(new j(e.getSize()-XJ));else if(TN(n)){const e=n,r=qr(e.boxes,(t=>t instanceof Xw&&t.trackId===s));if(r>=0){const s=e.boxes[r],n=HJ(e);n.boxes[r]=new ww(new j(s.getSize()-XJ)),i.boxes[t]=n}}}return i}function qJ(t,e){const i=function(t){const e=new _y;return e.boxes.push(...t.boxes),e}(t);for(let t=0;t<i.boxes.length;t++){const s=i.boxes[t];if(xN(s)){const n=Do(s.boxes,IN);n&&n.trackId===e&&(i.boxes[t]=new ww(new j(s.getSize()-XJ)))}}return i}function YJ(t){return Do(t.boxes,bN).trackId}function KJ(t,e,i,s){const n=Do(t.boxes,IN),r=i.OV(e)._V();let o=po.ZERO;for(const e of t.boxes){if(e instanceof Dc){o=Xf(e.baseMediaDecodeTime,r),e.baseMediaDecodeTime=e.baseMediaDecodeTime.subtract(o);break}if(e instanceof hy){o=Xf(po.fromNumber(e.baseMediaDecodeTime),r),e.baseMediaDecodeTime-=o.toNumber();break}}if(o.isZero())return;const h=Do(t.boxes,RN);if(void 0!==h&&h.samples.length>0){const t=h.samples;if(!h.flags.sampleDurationPresent){h.flags.sampleDurationPresent=!0;const e=null!=s?s:n.defaultSampleDuration;for(const i of t)i.duration=e}t[0].duration+=o.toNumber(),h.samples=t}}r();var jJ="Mp4Transmuxer",QJ=class extends HQ{YZt(t,e){Io(e);const i=t.QLt,s=QN(sa(t.GOt.$k.$k));if(!s)throw new m("Mp4Transmuxer - Unable to parse "+i.zw+" MP4 initializer.");this.d3=s;const n=function(t){let e,i;for(const s of t.Z)e||(e=s.Z1),i||(i=s.G1);if(e||i)return{UPt:e,ZPt:i,rOt:void 0};return}(s);n&&this.QZt(i,n);const r=function(t){for(const e of t.Z)if(void 0!==e.H1)return e.H1;return}(s);void 0!==r&&this.JZt(i,r);const o=function(t){var e;const i=By(t),s=Do(i.boxes,wN),n=s.boxes.filter(yN),r=Do(n,(t=>GJ(t)===Rw.AUDIO)),o=Do(n,(t=>GJ(t)===Rw.VIDEO)),h={UPt:{VN:r?YJ(r):void 0},ZPt:{VN:o?YJ(o):void 0}},a=null==(e=Do(s.boxes,TN))?void 0:e.boxes.filter(kN);var u,c;const l=a?{UPt:null!=(u=Do(a,(t=>t.trackId===h.UPt.VN)))?u:void 0,ZPt:null!=(c=Do(a,(t=>t.trackId===h.ZPt.VN)))?c:void 0}:void 0;var d,f;if(l&&(h.UPt.wL=null==(d=l.UPt)?void 0:d.defaultSampleDuration,h.ZPt.wL=null==(f=l.ZPt)?void 0:f.defaultSampleDuration),!r||!o)return{UPt:r?t:void 0,ZPt:o?t:void 0,pW:h};const _=ZJ(i),v=ZJ(i),g=i.boxes.indexOf(s);_.boxes[g]=zJ(s,o),v.boxes[g]=zJ(s,r);const m=_.serialize().join(),p=v.serialize().join();return{UPt:m,ZPt:p,pW:h}}(t.GOt.$k.$k);if(this.Fqt=o.pW,o.ZPt){const e=Do(s.Z,(t=>t.VN===o.pW.ZPt.VN)),i={zw:"rPt",$k:{zw:To.NJ,$k:o.ZPt},uat:Fo.yE,XOt:t.XOt,sHt:{Frt:'video/mp4; codecs="'+e.G1+'"',rZ:t.rZ},lF:t.lF,QLt:t.QLt,wUt:t.GOt.wUt};this.gZt(i)}if(o.UPt){const e=Do(s.Z,(t=>t.VN===o.pW.UPt.VN)),i={zw:"rPt",$k:{zw:To.NJ,$k:o.UPt},uat:Fo.wE,XOt:t.XOt,sHt:{Frt:'audio/mp4; codecs="'+e.Z1+'"',rZ:t.rZ},lF:t.lF,QLt:t.QLt,wUt:t.GOt.wUt};this.gZt(i)}return Promise.resolve()}async jZt(t,e){Io(e);const i=t.Eut.wUt;Ur.zN(jJ,"Transmuxing fMP4: "+rh(i.Iyt));const s=t.Eut.$k,n=JJ(s.$k,this.d3),r=af(n.map((t=>t.Jit)),gE);if(void 0!==r&&(i.$it=r,this.tHt(t.QLt)),!this.rWt.NVt(t.XOt)){const s=Ic.GV(i.lF);if(n.length>0){const e=af(n.map((t=>t.Vqt)),gE);for(const n of this.UZt)this.rWt.XVt(t.XOt,n,e,s,$J(i),!1);this.tHt(t.QLt)}this.rWt.NVt(t.XOt)||await Lu(this.rWt.LVt(t.XOt),e)}const o=this.rWt.UVt(t.XOt),h=i.$it?this.rWt.GVt(i.$it,i).VF():i.lF,a=XQ(i,h);var u;const c={IZt:a,RZt:zQ(i,a),lF:h,ct:null!=(u=i.ct)?u:0,aW:o.VF(),XOt:t.XOt,QLt:t.QLt,wUt:t.Eut.wUt},l=function(t,e){if(void 0===e.UPt.VN)return{UPt:void 0,ZPt:t};if(void 0===e.ZPt.VN)return{UPt:t,ZPt:void 0};const i=By(t),s=ZJ(i),n=ZJ(i);for(let t=0;t<i.boxes.length;t++){const r=i.boxes[t];EN(r)&&(s.boxes[t]=qJ(r,e.ZPt.VN),n.boxes[t]=qJ(r,e.UPt.VN))}const r=s.serialize().join(),o=n.serialize().join();return{UPt:r,ZPt:o}}(s.$k,this.Fqt);if(l.ZPt){var d;const e=this.Fqt.ZPt.VN,s=Do(this.d3.Z,(t=>t.VN===e)),o=Do(n,(t=>t.VN===e)),h=this.Wqt(l.ZPt,s,o,null==(d=this.Fqt)?void 0:d.ZPt.wL,i);this.Uqt=s,this.$Zt(t.QLt,i,o.Jit.jF(r));const a=ne({zw:"Eut",$k:{zw:To.NJ,$k:h},uat:Fo.yE},c);this.gZt(a)}if(l.UPt){const t=ne({zw:"Eut",$k:{zw:To.NJ,$k:l.UPt},uat:Fo.wE},c);this.gZt(t)}this.Gqt=i,this.Zqt=n}Wqt(t,e,i,s,n){if(!$J(n))return t;if(!this.Gqt||!this.Uqt||!this.Zqt)return t;const r=this.Uqt.VN,o=Do(this.Zqt,(t=>t.VN===r)),h=this.rWt.GVt(o.Hqt,this.Gqt),a=this.rWt.GVt(i.Jit,n).jF(h).OV(e.RN);if(a.HF(Ic.nV))return t;if(a.WF(Ic.GV(.5)))return t;const u=Qu(n)?n:n.pFt;return Ur.wBt(jJ,"Stretching first video frame of segment #"+u.IOt+" to fill gap of "+a.VF()+"s"),function(t,e,i,s){const n=By(t),r=Do(n.boxes,EN);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof Eh&&KJ(t,e,i,s);const n=r.getSize();if(n!==t){const e=n-t;for(const t of r.boxes)t instanceof Eh&&CN(t,e)}}return n.serialize().join()}(t,e.RN,a,s)}constructor(...t){super(...t),this.d3=void 0,this.Fqt=void 0,this.Gqt=void 0,this.Zqt=void 0,this.Uqt=void 0}};function JJ(t,e){const i=Rn(Es.cN(sa(t)),Ai.gD);if(!i)throw new m("Mp4Transmuxer - Unable to parse segment or part.");return function(t,e){const i=[];for(const n of t.Z){if(!n.CL||0===n.RL.length||0===n.RL[0].BL.length)continue;const t=n.sN.VN,r=Do(e.Z,(e=>e.VN===t));let o=0,h=1/0,a=0;const u=n.sN.wL||0;for(const t of n.RL)for(const e of t.BL){const t=e.OL||0,i=o+t;var s;o+=null!=(s=e.ct)?s:u;const n=o+t;i<h&&(h=i),n>a&&(a=n)}const c=Ic.eV(n.CL.CL,r.RN);i.push({VN:t,Vqt:c,Jit:c.QO(Ic.iV(h,r.RN)),Xqt:c.QO(Ic.iV(o,r.RN)),Hqt:c.QO(Ic.iV(a,r.RN))})}return i}(i,e)}function $J(t){return Qu(t)?t.UOt:0===t.yFt&&t.pFt.UOt}var t$="MpegtsTransmuxer",e$=class extends QJ{YZt(t,e){return super.YZt(t,e)}XZt(t,e){if(super.XZt(t,e),this.ux.zqt())return;var i;const s=null!=(i=null==e?void 0:e.Iyt)?i:t.Iyt;if(!s)return;/\.(ts|aac|mp3)/i.test(s.Fx)&&this.ux.qqt()}Yqt(t){let e;return t.QLt===this.Kqt&&this.jqt.has(t.XOt)?e=this.jqt.get(t.XOt):(e=dJ(t.Eut.$k.$k),this.Kqt=t.QLt,this.jqt.set(t.XOt,e)),e}async jZt(t,e){Io(e);const i=this.Yqt(t),s=t.Eut;if(i!==lJ.RHt&&i!==lJ.CHt)return super.jZt(t,e);if(s.wUt.rZ.some(s$))throw new Z(Ci.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.ux.qqt();let r;i===lJ.RHt?(Ur.zN(t$,"Transmuxing MPEG-TS: "+rh(s.wUt.Iyt)),r=await n.Qqt({data:s.$k.$k,metadata:this.Jqt})):(Ur.zN(t$,"Transmuxing raw audio: "+rh(s.wUt.Iyt)),r=await n.$qt({data:s.$k.$k,metadata:this.Jqt})),Io(e),this.QZt(t.QLt,{UPt:r.metadata.audio_codec,ZPt:r.metadata.video_codec,rOt:void 0}),r.metadata.video_frame_rate&&this.JZt(t.QLt,r.metadata.video_frame_rate);const o=n$(r.metadata.first_decode_timestamp),h=n$(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?n$(r.metadata.first_video_presentation_timestamp):void 0;if(s.wUt.$it=h,this.tHt(t.QLt),void 0!==a&&this.$Zt(t.QLt,s.wUt,function(t,e){let i=t.jF(e);return i.zF(Ic.nV)&&(i=i.QO(wE())),i}(a,h)),!this.rWt.NVt(t.XOt)){const i=Ic.GV(s.wUt.lF);for(const e of this.UZt)this.rWt.XVt(t.XOt,e,o,i,$J(s.wUt),!0);this.tHt(t.QLt),this.rWt.NVt(t.XOt)||await Lu(this.rWt.LVt(t.XOt),e)}const u=this.rWt.HVt(o,s.wUt);this.Jqt=r.metadata;const c=this.rWt.GVt(h,s.wUt).VF(),l=XQ(s.wUt,c);var d;const f={IZt:l,RZt:zQ(s.wUt,l),lF:c,ct:null!=(d=s.wUt.ct)?d:0,aW:u.VF(),XOt:t.XOt,QLt:t.QLt,wUt:s.wUt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.UZt){const e=ne({zw:"Eut",$k:void 0,uat:t},f);this.gZt(e)}return}const _=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.tYt||this.eYt!==t.XOt||!ho(this.tYt,r.data.audio_init))){const e=this.rWt.GVt(s.wUt.$it,s.wUt).VF(),i={zw:"rPt",$k:{zw:To.NJ,$k:r.data.audio_init},uat:Fo.wE,XOt:t.XOt,sHt:{Frt:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',rZ:s.wUt.rZ},lF:e,QLt:t.QLt,wUt:s.wUt};this.tYt=r.data.audio_init,this.eYt=t.XOt,this.gZt(i)}const e=ne({zw:"Eut",$k:{zw:To.NJ,$k:r.data.audio_media},uat:Fo.wE},f);this.gZt(e)}else if(t.Eut.wUt.gFt&&fh(this.UZt,Fo.wE)){const t=ne({zw:"Eut",$k:void 0,uat:Fo.wE},f);this.gZt(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.iYt||this.sYt!==t.XOt||!ho(this.iYt,r.data.video_init))){const e=this.rWt.GVt(s.wUt.$it,s.wUt).VF(),i={zw:"rPt",$k:{zw:To.NJ,$k:r.data.video_init},uat:Fo.yE,XOt:t.XOt,sHt:{Frt:'video/mp4; codecs="'+r.metadata.video_codec+'"',rZ:s.wUt.rZ},lF:e,QLt:t.QLt,wUt:s.wUt};this.iYt=r.data.video_init,this.sYt=t.XOt,this.nYt=QN(sa(r.data.video_init)),this.gZt(i)}const e=this.nYt.Z[0],i=JJ(r.data.video_media,this.nYt)[0],n=this.Wqt(r.data.video_media,e,i,void 0,s.wUt);this.Uqt=e;const o=ne({zw:"Eut",$k:{zw:To.NJ,$k:n},uat:Fo.yE},f);this.gZt(o),_.push(i)}else if(t.Eut.wUt.gFt&&fh(this.UZt,Fo.yE)){const t=ne({zw:"Eut",$k:void 0,uat:Fo.yE},f);this.gZt(t)}this.Gqt=s.wUt,this.Zqt=_}np(){this.tYt=void 0,this.iYt=void 0,this.eYt=-1,this.sYt=-1,super.np()}constructor(t,e,i,s){super(e,i,s),this.Jqt=void 0,this.tYt=void 0,this.iYt=void 0,this.nYt=void 0,this.eYt=-1,this.sYt=-1,this.Kqt=void 0,this.jqt=Bh(),this.ux=t}},i$=class{wTt(t,e,i){return new e$(this,t,e,i)}};function s$(t){return t.EE===G.zBt}function n$(t){return Ic.eV(po.fromBits(t.low,t.high),t.base)}r(),r();var r$=function(t){return t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4",t}({}),o$=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=Ya.wg;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module(Yu("AGFzbQEAAAA="))}catch(t){return!1}}();return o$=()=>t,t};var h$=class{Qqt(t){return this.rYt(r$.MPEGTS_TO_FMP4,t)}$qt(t){return this.rYt(r$.RAW_AUDIO_TO_FMP4,t)}bqt(){const t=BJ(this.Aqt,this.Sqt,{name:"THEOplayer transmux worker"});return t.bn("message",this.Tqt),t.bn("error",this.kqt),t}rYt(t,e){const i=++this.Eqt,s={type:t,id:i,input:e},n=new is;return this.Dqt.set(i,n),this.eqt.tqt(s),n.Xb}Km(t){void 0===t&&(t=new vt),this.Dqt.forEach((e=>e.Hb(t))),this.Dqt.clear(),this.eqt.nqt()}constructor(t){this.Eqt=0,this.Dqt=Bh(),this.Tqt=t=>{const e=t.data;if(void 0!==e.requestId){const t=this.Dqt.get(e.requestId);if(!t)return;this.Dqt.delete(e.requestId),e.success?t.Zb(e.output):t.Hb(new Z(e.errorCode,e.error))}else e.success||this.Km(new Z(e.errorCode,e.error))},this.kqt=t=>{const e=new Z(Ci.MEDIA_DECODE_ERROR,t.error.message,t.error);this.Km(e)},this.Sqt=t;const e=o$()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.Aqt=As.Ew(e,t)}catch(t){throw new Z(Ci.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.eqt=this.bqt()}},a$=class extends i${zqt(){return void 0!==this.eqt}qqt(){var t;return null!=(t=this.eqt)?t:this.eqt=new h$(this.oYt)}Km(){this.eqt&&(this.eqt.Km(),this.eqt=void 0)}constructor(t){super(),this.oYt=t,this.eqt=void 0}},u$=class{ist(){return new a$(this.oYt)}constructor(t){this.oYt=t}},c$=class extends wJ{IR(){return this.aO.IR()}get ER(){return this.aO.ER}set ER(t){this.aO.ER=t}async yn(){var t;await super.yn(),null==(t=this.eIt)||t.yn()}constructor(t,e,i,s,n){const r=function(t){return RJ.TT()?new RJ:new UJ(t)}(n.libraryLocation);super(t,e,i,s,r,new u$(n.libraryLocation),new bt(Sc.Vm.Bxt,Sc.Vm.Lxt,Sc.Vm.xct,Sc.Vm.Fxt),n),Ya.$g&&(this.eIt=new RV(this))}},l$=class extends c${async yn(){await super.yn(),await this.YZ.qZ(this.aO)}constructor(t,e,i,s,n){const r=new St(t);super(r.lH(Fo.yE),e,i,s,n),this.YZ=r}},d$=class extends yJ{dH(t,e){return!!d_(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(Ya.su||Ya.Cm))&&super.dH(t,e))}async fH(t){return!(t.clearkey&&!t.fairplay&&Ya.$g)&&super.fH(t)}};et(new class extends d${mP(t,e,i,s,n,r,o){return new l$(e,i,n,r,s)}_H(){return!0}constructor(...t){super(...t),this.vH=CR.iP}}),Ur.Rt=()=>{var t;return Boolean(null==(t=s)?void 0:t.THEOplayerDebugLogsEnabled)},r(),r(),r(),r();var f$=class{clt(t,e){return Promise.resolve(!1)}Iut(t,e){return Promise.resolve(void 0)}lTt(t){return Promise.resolve(void 0)}hJ(t){return Promise.resolve(void 0)}},_$=class extends So{hYt(){var t;return null==(t=this.aYt)?void 0:t.ULt}Sn(){uh(K((()=>this.uYt(this.zT.ep)),this.zT.ep))}async uYt(t){await this.hEt.xWt(t),this.cYt&&(this.lYt(this.cYt.ji,this.cYt.Ti),this.cYt=void 0),this.g9=!0}dYt(t,e){this.g9?this.lYt(t,e):this.cYt={ji:t,Ti:e}}lYt(t,e){const i=this.fYt(t,e),s=null==i?void 0:i.TBt[0];s!==this.aYt&&(this._Yt(),void 0!==s&&(this.aYt=s,this.vYt=new mQ(this.hEt,s),this.vYt.MUt()))}_Yt(){this.aYt=void 0,this.vYt&&(this.vYt.Km(),this.vYt=void 0)}fYt(t,e){const i=Do(this.hEt.Nr.ABt,(i=>void 0!==i.CPt&&i.CPt.ji===t&&i.CPt.Ti===e));return null!=i?i:this.hEt.Nr.ABt[0]}yn(){this.Ro(),this.zT.np(),this.zT.Km(),this._Yt(),this.hEt.Km()}constructor(t,e,i){super(),this.aYt=void 0,this.vYt=void 0,this.cYt=void 0,this.zT=new Fi,this.Sc=t,this.hEt=new oQ(i,new f$,t.useCredentials,t.src,t.liveOffset),this.hEt.bn(ns.Xy,this.Ds),this.g9=!1}};r();var v$=class extends en{get ht(){return this.e8.ht}get SI(){return this.e8.SI}get kI(){return this.e8.kI}set kI(t){this.e8.kI=t}get bt(){return this.e8.bt}get RI(){return this.e8.RI}set RI(t){this.e8.RI=t}DI(t,e){this.RI=t}get ct(){return this.e8.ct}get MI(){return this.e8.MI}get OI(){return this.e8.OI}get VI(){return this.e8.VI}get UI(){return this.e8.UI}get lt(){return this.e8.lt}get ZI(){return this.e8.ZI}get XI(){return this.e8.XI}get qI(){return this.e8.qI}set qI(t){this.e8.qI=t}get jI(){return this.e8.jI}get JI(){return this.e8.JI}get tR(){return this.e8.tR}set tR(t){this.e8.tR=t}get sR(){return this.e8.sR}get rR(){return this.e8.rR}set rR(t){this.e8.rR=t}get aR(){return this.e8.aR}get cR(){return this.e8.cR}get dR(){return this.e8.dR}get EZ(){return this.e8.EZ}get nt(){return this.e8.nt}get vR(){return this.e8.vR}get rt(){return this.e8.rt}get pR(){return this.e8.pR}get yR(){return this.e8.yR}set yR(t){this.e8.yR=t}get SR(){return this.e8.SR}get ER(){return this.e8.ER}set ER(t){this.e8.ER=t}get IZ(){return this.e8.IZ}get mO(){}MR(){return this.e8.MR()}xR(){return this.e8.xR()}ja(){return this.e8.ja()}ZR(t){return this.e8.ZR(t)}IR(){return this.e8.IR()}be(){return this.e8.be()}FR(){return this.e8.FR()}WR(){return this.e8.WR()}PR(){return this.e8.PR()}DR(){return this.e8.DR()}nr(){return this.e8.nr()}Ca(t,e,i){return this.e8.Ca(t,e,i)}ge(){return this.e8.ge()}LR(){return this.e8.LR()}OR(){return this.e8.OR()}yn(){this.Ro();for(const t of qR)this.e8.vn(t,this.Ds);return this.e8.yn()}constructor(t){super(),this.e8=t;for(const t of qR)this.e8.bn(t,this.Ds)}},g$=class extends v${async Ca(t,e,i){await super.Ca(t,e,i),t.hlsDateRange&&this.Syt(t,e)}Syt(t,e){this.gYt=new _$(t,e,this.mYt),this.gYt.bn(ns.Xy,this.handleManifestUpdate),this.gYt.Sn()}nr(){return this.KWt&&(this.nt.it(this.KWt),this.i7.it(this.KWt),this.KWt.yn(),this.KWt=void 0,this.pYt=!1),this.gYt&&(this.gYt.yn(),this.gYt=void 0),this.i7.nr(),super.nr()}yn(){return this.vn(ns.$y,this.Yzt),this.gYt&&(this.gYt.yn(),this.gYt=void 0),this.i7.yn(),super.yn()}constructor(t,e,i){super(t),this.gYt=void 0,this.pYt=!1,this.KWt=void 0,this.handleManifestUpdate=t=>{this._o(t);const e=this.gYt.hYt();if(e){const t=this.EZ;if(t){const i=t.getTime();let s=this.KWt;s||(s=new Oj,this.KWt=s),s.ir(e.zOt,(t=>(t.getTime()-i)/1e3)),!this.pYt&&s.L.V>0&&(this.nt.tt(s),this.i7.tt(s),this.pYt=!0)}}},this.Yzt=()=>{this.gYt&&this.gYt.dYt(this.pR,this.vR)},this.mYt=e,this.i7=new KL(this),this.bn(ns.$y,this.Yzt)}};!function(t){GR.gH().mH(t)}((function(t,e,i){return new g$(t,e,i)})),r(),r(),r(),r();var m$=class extends dl{get name(){return"CastError"}constructor(t,e=""){super("An error occurred while casting."),this.errorCode=t,this.description=e}};async function p$(t){b$()||await async function(t){if(null==t?void 0:t.zm)return Promise.reject(new vt);const{Xb:e,Zb:i,Hb:n}=function(){let t,e;return{Xb:new Promise(((i,s)=>{t=i,e=s})),Zb:t,Hb:e}}(),r=s.__onGCastApiAvailable,o=()=>{s.__onGCastApiAvailable=r,n(new vt)};return s.__onGCastApiAvailable=(e,h)=>{e?i():n(new m(h)),null==t||t.Jm(o),s.__onGCastApiAvailable=r,r&&r(e,h)},null==t||t.Qm(o),e}(t),y$()||await Ze(100,t),y$()||(As.aw('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await w$())}var w$=Wd((()=>function(t){return new Promise(((e,i)=>{const s=h.createElement("script");s.onload=()=>e(),s.onerror=t=>i((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(h.head||h.documentElement).appendChild(s)}))}("//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js").catch((()=>{throw new m$("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}))));function y$(){return Boolean("undefined"!=typeof cast&&cast.framework)}function b$(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function A$(t,e,i,s){if(ol(e))for(const i of w.keys(e)){if("type"===i||"images"===i)continue;const s=e[i];ol(s)&&(t[i]=s)}!function(t,e,i,s){if(!ol(i)&&!ol(null==e?void 0:e.images))return;t.images=[],i&&t.images.push(new s.Image(i));if(null==e?void 0:e.images)if(oi(e.images))t.images.push(new s.Image(e.images));else if(Qc(e.images))for(const i of e.images){let e;var n,r;if(oi(i))e=new s.Image(i);else e=new s.Image(i.src),e.height=null!=(n=i.height)?n:null,e.width=null!=(r=i.width)?r:null;t.images.push(e)}}(t,e,i,s)}function S$(t,e,i){return void 0===i&&(i=chrome),function(t,e,i){switch(null==t?void 0:t.type){case"movie":{const s=new i.MovieMediaMetadata;return A$(s,t,e,i),s}case"audio":{const s=new i.MusicTrackMediaMetadata;return A$(s,t,e,i),!ol(s.artist)&&ol(t.artistName)&&(s.artist=t.artistName),s}case"tv-show":{const s=new i.TvShowMediaMetadata;return A$(s,t,e,i),!ol(s.title)&&ol(t.episodeTitle)&&(s.title=t.episodeTitle),!ol(s.season)&&ol(t.seasonNumber)&&(s.season=t.seasonNumber),!ol(s.episode)&&ol(t.episodeNumber)&&(s.episode=t.episodeNumber),s}default:{const s=new i.GenericMediaMetadata;return A$(s,t,e,i),s}}}(t,e,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(i))}function kn(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function T$(t){if(t.items&&t.items.length>0&&t.currentItemId>=0)return Do(t.items,(e=>e.itemId===t.currentItemId))}r(),r(),r(),r(),r();var k$="urn:x-cast:com.theoplayer.cast";r(),r();var E$=function(t){return t.wYt="theoplayer_receiver_info",t.yYt="theoplayer_trackpropertychange",t.bYt="theoplayer_propertychange",t}({});r();var x$=function(t){return t.SKIP_AD="SKIP_AD",t}({});r();function I$(t){h.createElement("img").src=t}r(),r(),r();var R$=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function C$(t){if(!oi(t))return;const e=t.match(R$);return e?3600*x(e[1],10)+60*x(e[2],10)+Number(e[3])+(Number(e[4])||0)/1e3:void 0}function P$(t){if(void 0===t)return;const e=t.match(/^([1-9]?\d|100)%$/);return e?x(e[1])/100:void 0}function D$(t,e){return"vmap"===t.type||!ol(t.type)&&!ol(e)}function N$(t,e){return"vast"===t.type||!ol(t.type)&&ol(e)}r(),r(),r();var M$=class{},L$=class extends M${get AYt(){return this.Oc}SYt(){return null!=this.TYt||(this.TYt=Ye(this.Oc,(t=>t.SYt()))),this.TYt}constructor(t){super(),this.Oc=t.sort(((t,e)=>t.kL-e.kL))}};r(),r();var B$=class extends M${get o(){return this.kYt}get kL(){return this.EYt}get xYt(){return this.IYt}constructor(t,e){super(),this.kYt=t,this.EYt=e,this.IYt=!1}},O$=class extends B${get RYt(){return this.CYt}get PYt(){return this.DYt}get NYt(){return this.MYt}get LYt(){return this.BYt}get lt(){return this.bZ}SYt(){if(void 0===this.OYt){let t,e,i,s=[];for(const n of this.CYt)n.FYt&&(t=n.FYt),n.VYt&&(e=n.VYt),n.WYt&&(i=n.WYt),s=s.concat(n.universalAdIds);this.OYt={LYt:this.LYt,FYt:t,UYt:e,WYt:i,lt:this.lt,GYt:s}}return[this.OYt]}constructor(t,e,i,s,n,r,o){super(t,e),this.DYt=i,this.MYt=s,this.BYt=n,this.CYt=r,this.bZ=o}};r(),r();var F$=class{get ZYt(){return this.HYt}get XYt(){return this.zYt}constructor(t,e){this.HYt=t,this.zYt=e}},V$=class{get qYt(){return this.YYt}get KYt(){return this.jYt}get QYt(){return this.JYt}get $Yt(){return this.tKt}get sd(){return this.eKt}set sd(t){this.eKt=t}get iKt(){return this.sKt}get nKt(){return this.rKt}oKt(){this.rKt=!0}get PYt(){return this.DYt}constructor(t,e,i,s,n,r){this.YYt=t,this.jYt=e,this.JYt=i,this.tKt=s,this.rKt=!1,this.sKt=n,this.DYt=r}};r();var W$=function(t){return t.hKt="all",t.aKt="any",t.xH="none",t}({});var U$=class{get uKt(){return this.cKt}get lKt(){return this.dKt}constructor(t,e){this.cKt=t,this.dKt=e}},G$=class{get o(){return this.jS}get ji(){return this.JA}get Ti(){return this.$A}get fKt(){return this._Kt}get vKt(){return this.gKt}get mKt(){return this.pKt}get wKt(){return this.yKt}get bKt(){return this.AKt}get SKt(){return this.TKt}get kKt(){return this.EKt}get qYt(){return this.YYt}get KYt(){return this.jYt}get QYt(){return this.JYt}get xKt(){return this.IKt}get XYt(){return this.RKt}get CKt(){return this.PKt}constructor(t,e,i,s,n,r,o,h,a,u,c,l,d,f,_,v){this.JA=t,this.$A=e,this.jS=i,this._Kt=s,this.gKt=n,this.pKt=r,this.yKt=o,this.AKt=h,this.TKt=a,this.EKt=u,this.YYt=c,this.jYt=l,this.JYt=d,this.IKt=f,this.RKt=_,this.PKt=v}};r();var Z$=class{get id(){return this.jS}get uri(){return this.SFt}constructor(t,e){this.jS=t,this.SFt=e}},wn=class{get DKt(){return this.NKt}get MKt(){return this.LKt}get BKt(){return this.OKt}get FKt(){return this.VKt}constructor(t,e,i,s){this.NKt=t,this.LKt=e,this.OKt=i,this.VKt=s}},H$=class extends B${get LYt(){return this.BYt}get WKt(){return this.UKt}get GKt(){return this.ZKt}get RYt(){return this.CYt}get HKt(){return this.XKt}get zKt(){return this.qKt}get lt(){return this.bZ}SYt(){return void 0===this.UKt?[]:(null!=this.TYt||(this.TYt=this.UKt.SYt().map((t=>this.YKt(t)))),this.TYt)}YKt(t){let e,i,s;for(const t of this.RYt)t.FYt&&(e=t.FYt),t.VYt&&(i=t.VYt),t.WYt&&(s=t.WYt);const n=t.LYt.concat(this.LYt);let r=t.FYt;if(e&&t.FYt){const i=new wn(t.FYt.KKt.DKt,t.FYt.KKt.MKt,t.FYt.KKt.BKt.concat(e.KKt.BKt),t.FYt.KKt.FKt.concat(e.KKt.FKt));r=t.FYt,r.KKt=i,r.XYt=r.XYt.concat(e.XYt)}let o=t.UYt;if(i&&i.ZYt){var h,a;const s=[];for(const t of i.ZYt)s.concat(t.$Yt.BKt);const n=[];var u,c;for(const i of null!=(u=null==(h=t.UYt)?void 0:h.ZYt)?u:[]){var l,d,f;const r=new wn(i.$Yt.DKt,i.$Yt.MKt,i.$Yt.BKt.concat(s),(null!=(d=null==(l=t.FYt)?void 0:l.KKt.FKt)?d:[]).concat(null!=(f=null==e?void 0:e.KKt.FKt)?f:[]));n.push(new V$(i.qYt,i.KYt,i.QYt,r,i.iKt,i.PYt))}o=new F$(n,(null!=(c=null==(a=t.UYt)?void 0:a.XYt)?c:[]).concat(i.XYt))}let _=t.WYt;if(_){var v;let e=_.uKt;var g,m;s&&s.uKt&&(e=s.uKt),_=new U$(e,(null!=(g=null==(v=t.WYt)?void 0:v.lKt)?g:[]).concat(null!=(m=null==s?void 0:s.lKt)?m:[]))}let p=t.lt;return this.lt&&(p=this.lt),{LYt:n,FYt:r,UYt:o,WYt:_,lt:p,GYt:t.GYt}}constructor(t,e,i,s,n,r,o,h,a){super(t,e),this.BYt=i,this.UKt=s,this.ZKt=n,this.CYt=r,this.XKt=o,this.qKt=h,this.bZ=a}};r();var X$=class{get o(){return this.jS}get jKt(){return this.QKt}get JKt(){return this.$Kt}get bKt(){return this.AKt}get FYt(){return this.tjt}get VYt(){return this.ejt}get WYt(){return this.ijt}get universalAdIds(){return this.sjt}constructor(t,e,i,s,n,r,o,h){this.jS=t,this.QKt=e,this.$Kt=i,this.AKt=s,this.tjt=n,this.ejt=r,this.ijt=o,this.sjt=h}};r();var z$=class{get ct(){return this.njt}get rjt(){return this.ojt}get XYt(){return this.zYt}set XYt(t){this.zYt=t}set KKt(t){this.hjt=t}get KKt(){return this.hjt}get ajt(){return this.ujt}set ajt(t){this.ujt=t}get cjt(){return this.rKt}get sd(){return this.eKt}set sd(t){this.eKt=t}get iKt(){return this.sKt}get PYt(){return this.DYt}oKt(){this.rKt=!0}get ljt(){return this.djt}set ljt(t){this.djt=t}get fjt(){return this._jt}get vjt(){return this.gjt}constructor(t,e,i,s,n,r,o,h,a){this.njt=t,this.ojt=e,this.zYt=i,this.hjt=s,this.ujt=n,this.rKt=!1,this.sKt=r,this.DYt=o,this._jt=h,this.gjt=a}};function B(t,e){return K$(t)&&t.getAttribute(e)||void 0}function q$(t,e){return Y$(t,e,void 0,!1)}function Y$(t,e,i,s){return e===(t.localName?t.localName:t.nodeName)&&(s&&i?i===t.namespaceURI:!i||!t.namespaceURI||i===t.namespaceURI)}function ds(t,e){const i=[];for(let s=0;s<t.childNodes.length;s+=1){const n=t.childNodes.item(s);K$(n)&&q$(n,e)&&i.push(n)}return i}function K$(t){return t&&1===t.nodeType}function j$(t,e){const i=(new DOMParser).parseFromString(t,e);if(!i||i.getElementsByTagName("parsererror").length>0)throw new m('Invalid document for MIME type "'+e+'"');return i}function Q$(t){return t.replace(/[<>&'"]/g,(t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}}))}function J$(t){return"data:application/xml,"+encodeURIComponent(t)}r(),r();var Rc=function(t){return t.mjt="mute",t.pjt="unmute",t.Ky="pause",t.wjt="resume",t.yjt="rewind",t.bjt="skip",t.Ajt="playerExpand",t.Sjt="playerCollapse",t.Tjt="fullscreen",t.kjt="exitFullscreen",t.Ejt="expand",t.COLLAPSE="collapse",t.rTt="start",t.xjt="firstQuartile",t.Ijt="thirdQuartile",t.Rjt="midpoint",t.Cjt="complete",t.Pjt="acceptInvitationLinear",t.Djt="acceptInvitation",t.Njt="timeSpentViewing",t.Mjt="otherAdInteraction",t.jy="progress",t.Ljt="creativeView",t.Bjt="adExpand",t.Ojt="adCollapse",t.Fjt="minimize",t.Vjt="close",t.Wjt="closeLinear",t.Ujt="overlayViewDuration",t.Gjt="breakStart",t.Zjt="breakEnd",t.fa="error",t}({});function $$(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}var t0=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function e0(t){return void 0!==t&&-1!==t0.indexOf(t)}var i0=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function s0(t){return void 0!==t&&-1!==i0.indexOf(t)}var n0=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function r0(t){return void 0!==t&&-1!==n0.indexOf(t)}function o0(t,e){if(void 0===t||""===t||void 0===e)return;let i=t.match(/^(\d+):(\d+):(\d+)$/);return i?C(i[1]||"0")+60*C(i[2]||"0")+C(i[3]||"0"):(i=t.match(/^(100|[1-9]\d|\d)%$/),i?C(i[1]||"0")*e/100:void 0)}var h0=class{get pz(){return this.Hjt}get nc(){return this.Xjt}get eventURL(){return this.zjt}constructor(t,e,i){this.Hjt=t,this.Xjt=e,this.zjt=i}};r();var a0=class{get qjt(){return this.Yjt}constructor(t){this.Yjt=t}},u0=class extends a0{get DKt(){return this.NKt}get CKt(){return this.PKt}get Kjt(){return this.jjt}constructor(t,e,i,s){super(t),this.jjt=e,this.NKt=i,this.PKt=s}},c0=class extends a0{constructor(t){super(t)}},l0=class extends a0{constructor(t){super(t)}};r();var d0={Qjt:{zb:100,Tb:"XML parsing error."},Jjt:{zb:303,Tb:"Empty or invalid VAST error."},$jt:{zb:400,Tb:"General linear error"},tQt:{zb:403,Tb:"Unsupported MIME-type or missing mediafiles error"},eQt:{zb:500,Tb:"General nonlinear error"},UX:{zb:900,Tb:"Network error"}},f0=class{get iQt(){return this.sQt}nQt(t){if(!this.iQt)return;const e=this.iQt.replace(/\[ERRORCODE]/,""+t.zb);I$(e)}constructor(t){this.sQt=t}};r();var Ws=class extends dl{get rQt(){return this.oQt}get hQt(){var t;return null!=(t=this.aQt)?t:900}constructor(t,e,i,s){super(i||e&&_0[e]||t,s),this.oQt=t,this.aQt=e,this.i3=i}},dt=function(t){return t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general",t}({}),lo=function(t){return t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED",t}({}),_0={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};function v0(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case ti.iP:case ti.sP:case ti.eP:return!0;default:return!1}}function g0(t){const e=bf();return!!(v0(t)||t&&e&&(null==e?void 0:e.canPlayType)&&e.canPlayType(t))||(Ho("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function m0(t,e){for(const i of e){new f0(i).nQt(t)}}function Ho(t){0}r(),r();var p0=class{get uQt(){return this.cQt}get lQt(){return this.dQt}constructor(t,e){this.cQt=t,this.dQt=e}},w0=class t{async fQt(e,i){if(D$(e.sources,e.timeOffset)){const s=await t._Qt(e.sources.src,i),n=s&&s.documentElement;if(!n)throw new Ws(dt.NETWORK,lo.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(q$(n,"VMAP"))return await this.vQt(n,e,i);if(q$(n,"VAST")){const t=await this.gQt(n,i,!1);if(t){const i=new A0("",!0,!0,t);return[new Ac("start",i,y0.mQt,"",[],!1,!0,e)]}return[]}throw new Ws(dt.GENERAL,lo.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if(N$(e.sources,e.timeOffset))return[new b0(String(e.timeOffset),e,i)];throw new Ws(dt.GENERAL,lo.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async pQt(e,i,s,n){let r;void 0===n&&(n=[]);try{r=await t._Qt(e,i)}catch(t){throw m0(t instanceof Ws&&t.hQt===lo.VAST_MALFORMED_RESPONSE?d0.Jjt:d0.UX,n),t}const o=r&&r.documentElement;if(o&&q$(o,"VAST"))return await this.gQt(o,i,s,n);o&&q$(o,"VMAP")&&vl("Received VMAP ad when expecting VAST. Please set the type of your ad source in the configuration, or make sure to not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included.")}async wQt(t,e,i,s){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new Ws(dt.GENERAL,lo.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.pQt(t.sources.src,s,!1),o=new A0("",!0,!0,r),h=new Ac(e,o,y0.mQt,"",[],!1,!0,t);return h.yQt=i,h}static async requestSuccessOnly(t,e){let i;try{i=await e.eE(t)}catch(t){throw new Ws(dt.NETWORK,lo.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!eA(i))throw new Ws(dt.NETWORK,lo.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return i}static async _Qt(t,e){const i=new Gr({Xu:t,tE:Te.Rk,EE:Ce.GET}),s=await this.requestSuccessOnly(i,e);try{return function(t){return j$(t,"text/xml")}(await s.$k())}catch(t){throw new Ws(dt.NETWORK,lo.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async gQt(t,e,i,s){void 0===s&&(s=[]);const n=[],r=[],o=[];if(!t||!q$(t,"VAST")){if(m0(d0.Jjt,s),i)throw new Ws(dt.PARSING,lo.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new Ws(dt.PARSING,lo.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}if(0!==ds(t,"Ad").length){for(const i of ds(t,"Ad"))try{const t=await this.bQt(i,e,s);0===t.kL?n.push(t):r.push(t)}catch(t){o.push(t)}if(0===n.length&&0===r.length&&o.length>0)throw o[0];if(1===n.length&&0===r.length)return n[0];if(0===n.length&&0!==r.length)return new L$(r);if(n.length>0||r.length>0)return new L$(r.concat(n))}if(0!==ds(t,"Error").length)for(const e of ds(t,"Error")){Ho(d0.Jjt.Tb);const t=e.textContent;t&&s.push(t.trim())}if(m0(d0.Jjt,s),i)throw new Ws(dt.PARSING,lo.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new Ws(dt.PARSING,lo.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}async vQt(t,e,i){const s=[],n=ds(t,"AdBreak");if(0===n.length)throw new Ws(dt.PARSING,lo.VAST_EMPTY_RESPONSE,"The VMAP element was empty.");for(const t of n)try{const n=await this.AQt(t,e,i);n&&s.push(n)}catch(t){As.hw(t)}return s}async bQt(e,i,s){const n=B(e,"id")||"";let r=Ba(B(e,"sequence"));r||(r=0);const o=ds(e,"InLine"),h=ds(e,"Wrapper");if(0!==h.length)return await this.SQt(h[0],n,r,i,s);if(0!==o.length)return t.TQt(o[0],n,r,s);throw new Ws(dt.PARSING,lo.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static TQt(e,i,s,n){const r=ds(e,"Error")[0];let o;r&&r.textContent&&(o=r.textContent,n.push(o));const h=t.kQt(ds(e,"Extensions")[0]),a=ds(e,"AdSystem")[0];let u,c="";a&&(c=a.textContent||c);const l=ds(e,"AdTitle")[0];l&&(u=l.textContent||void 0);const d=[];for(const t of ds(e,"Impression"))t.textContent&&d.push(t.textContent);const f=t.EQt(ds(e,"Creatives")[0],c,h,n);return new O$(i,s,c,u,d,f,new f0(o))}async SQt(e,i,s,n,r){const o=ds(e,"Error")[0];let h="";o&&o.textContent&&(h=o.textContent,r.push(h));const a=ds(e,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of ds(e,"Impression"))t.textContent&&c.push(t.textContent);const l=ds(e,"VASTAdTagURI")[0];let d="";l&&l.textContent&&(d=l.textContent);const f=await this.pQt(d,n,!0,r),_=t.kQt(ds(e,"Extensions")[0]),v=ds(e,"Creatives")[0];let g=[];v&&(g=t.xQt(v,u,_,r));let m=tn(B(e,"followAdditionalWrappers"));m||(m=!0);let p=tn(B(e,"allowMultipleAds"));p||(p=!0);let w=tn(B(e,"fallbackOnNoAd"));return w||(w=!1),new H$(i,s,c,f,m,g,p,w,new f0(h))}static xQt(e,i,s,n){const r=[];for(const o of ds(e,"Creative")){let e=B(o,"id");e||(e="");let h=Ba(B(o,"sequence"));h||(h=0);let a=B(o,"adId");a||(a="");const u=ds(o,"Linear")[0];let c;u&&(c=t.IQt(u,"wrapper",e,i,s,n));const l=ds(o,"NonLinearAds")[0];let d,f;if(l)try{f=t.RQt(l,e,i),d=f}catch(t){}const _=ds(o,"CompanionAds")[0];let v;_&&(v=t.CQt(_)),r.push(new X$(e,a,h,"",c,d,v,[]))}return r}static EQt(e,i,s,n){const r=[];for(const o of ds(e,"Creative")){let e=B(o,"id");e||(e="");let h=Ba(B(o,"sequence"));h||(h=0);let a=B(o,"adId");a||(a="");let u=B(o,"apiFramework");u||(u="");const c=ds(o,"Linear")[0];let l;if(c)try{l=t.IQt(c,"inline",e,i,s,n)}catch(t){}if(0===(null==l?void 0:l.ct))throw new Ws(dt.PARSING,lo.VAST_UNEXPECTED_DURATION_ERROR,"The VAST response had a duration of 0 seconds, so skipping the ad(s).");const d=ds(o,"NonLinearAds")[0];let f,_;if(d)try{_=t.RQt(d,e,i),f=_}catch(t){}const v=ds(o,"CompanionAds")[0];let g;v&&(g=t.CQt(v));const m=ds(o,"UniversalAdId"),p=t.parseUniversalAdIds(m);r.push(new X$(e,a,h,u,l,f,g,p))}return r}static kQt(t){const e=[];if(!t)return e;for(const s of ds(t,"Extension")){var i;const t=null!=(i=B(s,"type"))?i:"",n=s.outerHTML;e.push({type:t,xml:n})}return e}static IQt(e,i,s,n,r,o){const h=ds(e,"Duration")[0];let a=0;if(h)a=C$(h.textContent)||0;else if(!h&&"inline"===i)throw new Ws(dt.PARSING,lo.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const u=B(e,"skipoffset");let c=-1;if(u){let t=C$(u);if(void 0===t&&u.indexOf("%")>-1){const e=_.abs(Number(u.replace(/(?![0-9])./g,"")))/100;S(e)||(t=a*e)}void 0!==t&&(c=t)}const l=ds(e,"MediaFiles")[0];let d=[],f=[];if(l&&(d=function(t,e){const i=[];for(const s of ds(t,"MediaFile")){const t=B(s,"delivery"),n=B(s,"type");if(!n){Ho();continue}if(!e(n))continue;let r=Ba(B(s,"width")),o=Ba(B(s,"height"));r||(Ho(),r=0),o||(Ho(),o=0);const h={delivery:t,type:n,width:r,height:o,contentURL:""+s.textContent};i.push(h)}return i}(l,g0),f=function(t){const e=ds(t,"ClosedCaptionFiles");if(0===e.length)return[];const i=e[0],s=[];for(const t of ds(i,"ClosedCaptionFile")){const e=B(t,"type");e||Ho();const i=B(t,"language");i||Ho();const n={type:null!=e?e:"",language:null!=i?i:"",contentURL:(""+t.textContent).trim()};s.push(n)}return s}(l)),"inline"===i&&(!l||0===d.length))throw m0(d0.tQt,o),new Ws(dt.PARSING,lo.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const v=ds(e,"TrackingEvents")[0];let g=[];v&&(g=t.PQt(v,e0,"linear"));const m=ds(e,"VideoClicks")[0],p=t.DQt(m);return new z$(a,d,g,p,c,s,n,f,r)}static DQt(e){if(!e)return new wn("","",[],[]);const i=ds(e,"ClickThrough")[0];let s,n="";i&&(s=i.textContent||void 0,n=B(i,"id")||"");const r=t.NQt(ds(e,"ClickTracking")),o=t.NQt(ds(e,"CustomClick"));return new wn(s,n,r,o)}static NQt(t){const e=[];for(const i of t){const t=i.textContent;if(!t)continue;const s=B(i,"id")||"";e.push(new Z$(s,t))}return e}static PQt(t,e,i){const s=[];for(const n of ds(t,"Tracking")){const r=B(n,"event");if(!e(r)){Ho();continue}let o="";"linear"===i&&(o=B(t,"offset")||"0");const h=n.textContent;h&&s.push(new h0(r,o,h))}return s}static RQt(e,i,s){const n=[];for(const r of ds(e,"NonLinear")){const e=ds(r,"NonLinearClickThrough")[0];let o;e&&(o=e.textContent||void 0);const h=t.NQt(ds(r,"NonLinearClickTracking")),a=ds(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=B(a,"creativeType"),e=a.textContent||"",i=ds(a.parentNode,"NonLinearClickThrough")[0];let s="";i&&(s=i.textContent||""),u=new u0(e,t,s,"")}const c=t.MQt(r),l=t.parseHtmlResource(r);if(!u&&!c&&!l){Ho();continue}const d=new wn(o,"",h,[]);n.push(new V$(u,c,l,d,i,s))}if(0===n.length)throw new Ws(dt.PARSING,lo.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=ds(e,"TrackingEvents")[0];let o=[];return r&&(o=t.PQt(r,s0,"nonlinear")),new F$(n,o)}static parseUniversalAdIds(t){const e=[];for(const r of t){var i;const t=null!=(i=B(r,"idRegistry"))?i:"";var s,n;const o=null!=(n=null!=(s=B(r,"idValue"))?s:r.textContent)?n:"";e.push(new p0(t,o))}return e}static CQt(e){let i=B(e,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(i)||(i=W$.xH);const s=[];for(const i of ds(e,"Companion")){let e=Ba(B(i,"width")),n=Ba(B(i,"height")),r=B(i,"id"),o=Ba(B(i,"assetWidth")),h=Ba(B(i,"assetHeight")),a=Ba(B(i,"expandedWidth")),u=Ba(B(i,"rxpandedHeight")),c=B(i,"apiFramework"),l=B(i,"adSlotId"),d=Ba(B(i,"pxratio"));const f=ds(i,"AltText")[0];let _=f?f.textContent:"";e||(Ho(),e=0),n||(Ho(),n=0),r||(r=""),o||(o=0),h||(h=0),a||(a=0),u||(u=0),c||(c=""),l||(l=""),d||(d=1),_||(_="");const v=t.LQt(i),g=t.MQt(i),m=t.parseHtmlResource(i),p=ds(i,"TrackingEvents")[0];let w=[];p&&(w=t.PQt(p,r0,"companion"));const y=ds(i,"CompanionClickThrough")[0];let b;y&&(b=y.textContent||void 0);const A=t.NQt(ds(i,"CompanionClickTracking"));(v||g||m)&&s.push(new G$(e,n,r,o,h,a,u,c,l,d,v,g,m,new wn(b,"",A,[]),w,_))}return new U$(i,s)}static LQt(t){const e=ds(t,"StaticResource")[0];let i;if(e&&e.parentNode){let t=B(e,"creativeType");t||(t="");const s=e.textContent,n=ds(e.parentNode,"AltText")[0],r=ds(e.parentNode,"CompanionClickThrough")[0];let o,h="";n&&(h=n.textContent||""),r&&(o=r.textContent||void 0),s&&(i=new u0(s,t,o,h))}return i}static MQt(t){const e=ds(t,"IFrameResource")[0];let i;if(e){const t=e.textContent||"";i=new c0(t)}return i}static parseHtmlResource(t){const e=ds(t,"HTMLResource")[0];let i;if(e){const t=e.textContent||"";i=new l0(t)}return i}async AQt(e,i,s){const n=B(e,"timeOffset")||"0",r=B(e,"breakType")||y0.oE;let o=B(e,"breakId"),h=tn(B(e,"repeatAfter"));if(void 0===o&&(o=""),void 0===h&&(h=!1),!(void 0!==va.BQt(n)))throw new Ws(dt.PARSING,lo.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=ds(e,"AdSource")[0],u=ds(e,"TrackingEvents")[0];let c=[];u&&(c=t.PQt(u,$$,"vmap"));let l=B(a,"id");l||(l="");let d=tn(B(a,"allowMultipleAds"));void 0===d&&(d=!0);let f=tn(B(a,"followRedirects"));f||(f=!0);const _=ds(a,"AdTagURI")[0];let v="";const g=ds(a,"VASTAdData")[0];if(!_||!_.textContent){if(g){if(g.firstElementChild&&Y$(g.firstElementChild,"VAST")){const t=await this.gQt(g.firstElementChild,s,!1);if(t){const e=new A0(l,d,f,t);return new Ac(n,e,r,o,c,h,!1,i)}return}throw new Ws(dt.PARSING,lo.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new Ws(dt.PARSING,lo.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{v=_.textContent;const t=Fa(i);return t.sources.src=v,new b0(n,t,s)}catch(t){return}}},y0=function(t){return t.oE="",t.mQt="linear",t.OQt="nonlinear",t.FQt="display",t}({}),va=class{static VQt(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static WQt(t){}static UQt(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static GQt(t){const e=t.split(":");let i=0;return i+=3600*Number(e[0]),i+=60*Number(e[1]),i+=Number(e[2]),i}static ZQt(t){if(t<=0)return"00:00:00.000";const e=_.floor(t),i=t-e;return this.HQt(e/3600,2)+":"+this.HQt(e/60%60,2)+":"+this.HQt(e%60,2)+"."+this.HQt(1e3*i,3)}static HQt(t,e){return("00"+_.floor(t)).slice(-e)}static XQt(t,e){const i=this.BQt(t);if(0===i)switch(t){case"start":return 0;case"end":return-1}else{if(2===i)return P$(t)*e;if(1===i)return C$(t);if(3===i)return this.UQt(t);if(4===i){const e=Number(t);if(!S(e)&&e>=-1)return e}}}static BQt(t){return"start"===t||"end"===t?0:void 0!==C$(t.toString())?1:void 0!==P$(t.toString())?2:void 0!==this.WQt(t.toString())?3:S(Number(t))?void 0:4}},Ac=class{get zQt(){return this.qQt.integration}get YQt(){return this.KQt}get LOt(){return this.jQt}get ajt(){return this.ujt}set ajt(t){this.ujt=t}get XYt(){return this.RKt}get QQt(){return this.JQt}get $Qt(){return this.tJt}get urt(){return this.qQt}get eJt(){return this.yQt.od}get W(){return!0}$n(){return Promise.resolve()}get yQt(){return this.iJt}set yQt(t){this.iJt=t}constructor(t,e,i,s,n,r,o,h){this.ujt=-1,this.KQt=e,this.jQt=t,this.sJt=i,this.JQt=s,this.tJt=r,this.RKt=n,this.nJt=o,this.qQt=h}},b0=class{get zQt(){return this.eKt.zQt}get YQt(){return this.eKt.YQt}get LOt(){return this.eKt.LOt}get ajt(){return this.eKt.ajt}set ajt(t){this.eKt.ajt=t}get XYt(){return this.eKt.XYt}get QQt(){return this.eKt.QQt}get $Qt(){return this.eKt.$Qt}get urt(){return this.eKt.urt}get eJt(){return this.eKt.eJt}get W(){return this.JE}$n(){var t;return null!=(t=this.rJt)?t:this.rJt=this.ix()}async ix(){const t=new w0;this.eKt=await t.wQt(this.urt,this.LOt,this.yQt,this.WW),this.JE=!0}get yQt(){return this.eKt.yQt}set yQt(t){this.eKt.yQt=t}constructor(t,e,i){this.JE=!1,this.WW=i,this.eKt=new Ac(t,void 0,"","",[],!1,!1,e)}},A0=class{get o(){return this.jS}get HKt(){return this.oJt}get hJt(){return this.aJt}get AYt(){return this.uJt}constructor(t,e,i,s){this.jS=t,this.oJt=e,this.uJt=s,this.aJt=i}};function S0(t,e){let i;if(t.vastAdsRequest&&(i=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return J$(t.adsResponse);return}(t.vastAdsRequest)),!i){const e=function(t){const e=t.contentUrl||t.contentId;if(!e)return;const i=t.contentType||"video/mp4",s=zT(i)||Wh(t.contentType)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+va.ZQt(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+va.ZQt(t.whenSkippable)+'"':"",o='<MediaFile delivery="'+s+'" type="'+i+'">'+Q$(e)+"</MediaFile>",h=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+Q$(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+o+"</MediaFiles>"+h+"</Linear>",u=t.title?"<AdTitle>"+Q$(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);e&&(i=J$(e))}const s=t.customData;if(i){const n={integration:null==s?void 0:s.integration,sources:{src:i,type:"vast"},timeOffset:e};return n.integration&&"csai"!==n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}var T0=function(t){return t.cJt="error",t.lJt="sourceupdate",t}({}),k0=class extends me{constructor(t){super("error"),this.lt=t}},E0=class extends me{constructor(t,e){super("sourceupdate"),this.bt=t,this.Cc=e}},x0=class extends So{get LN(){return this.dJt}fJt(t){this._Jt.fJt(t)}vJt(t){this._Jt.vJt(t)}gJt(t){this._Jt.gJt(t)}mJt(t){this._Jt.mJt(t)}pJt(t){this.dJt.addUpdateListener(t)}wJt(t){this.dJt.removeUpdateListener(t)}yJt(){const t=new is,e=new chrome.cast.media.GetStatusRequest;return this.dJt.getStatus(e,(()=>{t.Zb({bt:this.II(),Cc:this.iu()})}),(e=>t.Hb(e))),t.Xb}II(){var t;return null==(t=this.dJt.customData)?void 0:t.currentSource}iu(){var t;let e;if(null==(t=this.xMt.bJt())?void 0:t.version){var i;e=null==(i=this.dJt.customData)?void 0:i.sourceDescription}else{var s;const t=null==(s=T$(this.dJt))?void 0:s.customData;(function(t){return Vt(t)&&t.theoplayer_version>=1&&ol(t.streamStart)&&ol(t.isLive)&&ol(t.sourceDescription)})(t)&&(e=t.sourceDescription),e||(e=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:I0(t)}}(this.dJt.media))}return e}PR(){const t=new chrome.cast.media.PauseRequest;this.dJt.pause(t,M,this.AJt)}NR(){const t=new chrome.cast.media.StopRequest;this.dJt.stop(t,M,this.AJt)}DR(){const t=new chrome.cast.media.PlayRequest;this.dJt.play(t,M,this.AJt)}Db(t,e){const i=new chrome.cast.media.SeekRequest;return i.currentTime=t,i.resumeState=e?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise(((t,e)=>{this.dJt.seek(i,t,(t=>{var i;e(new m$(kn(t.code),null!=(i=t.description)?i:void 0))}))}))}iR(t){this._Jt.Git(k$,function(t){return{type:E$.bYt,properties:{playbackRate:t}}}(t)).catch(this.SJt)}TJt(t){const e=new chrome.cast.media.EditTracksInfoRequest(t);this.dJt.editTracksInfo(e,M,this.AJt)}kJt(){return this.dJt.getEstimatedTime()}EJt(){return this.dJt.getEstimatedBreakClipTime()}xJt(){return this.dJt.getEstimatedBreakTime()}IJt(){this._Jt.Git("urn:x-cast:com.google.cast.media",{type:x$.SKIP_AD,requestId:this.RJt++,mediaSessionId:this.dJt.mediaSessionId}).catch(this.SJt)}yn(){this.Ro()}constructor(t,e,i){super(e),this.RJt=0,this.SJt=t=>{this._o(new k0(t))},this.AJt=t=>{var e;const i=new m$(kn(t.code),null!=(e=t.description)?e:void 0);this.SJt(i)},this.xMt=t,this._Jt=e,this.dJt=i}};function I0(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?Ye(t.breaks,(e=>function(t,e){const i=[];if(t.isWatched)return i;for(const s of t.breakClipIds){const n=Do(e,(t=>t.id===s));if(n){const e=S0(n,t.position);e&&i.push(e)}}return i}(e,t.breakClips))):[]}r();var R0=class{CJt(t,e){this.xMt.addMessageListener(t,e)}PJt(t,e){this.xMt.removeMessageListener(t,e)}Git(t,e){return new Promise(((i,s)=>{this.xMt.sendMessage(t,e,i,(t=>{var e;s(new m$(kn(t.code),null!=(e=t.description)?e:void 0))}))}))}yn(){}constructor(t){this.xMt=t}};function C0(t){return"vmap"===t||"adrule"===t}function P0(t){if(t)return oi(t)&&""!==t?{src:os(t),type:void 0}:function(t){return Vt(t)&&Boolean(t.src)}(t)&&""!==t.src?{src:os(t.src),type:D0(t.type)}:void 0}function D0(t){if(oi(t)){const e=t.toLowerCase();switch(e){case"vast":case"vmap":case"adrule":return e;default:return void vl("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||vl("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function N0(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return R$.test(t)}(t))return va.GQt(t);if(M0(t))return t}return Number(t)>=0?Number(t):void 0}}function M0(t){return new RegExp(/^\d{1,2}%$/).test(t)}function L0(t){const e=[],i=(t,s)=>{if(Qc(s))for(let e=0,n=s.length;e<n;e++){const n=Vt(s[e])&&s[e]?String(e):"";i(t+"["+encodeURIComponent(n)+"]",s[e])}else if(Vt(s))for(const e of w.keys(s))i(t+"["+encodeURIComponent(e)+"]",s[e]);else((t,i)=>{e.push(t+"="+encodeURIComponent(null!=i?i:""))})(t,String(s))};for(const e of w.keys(t))i(encodeURIComponent(e),t[e]);return e.join("&")}r(),r(),r();var B0=function(t){return t.wYt="receiver_info",t.YBt="event",t.DJt="propertychange",t.yYt="trackevent",t}({}),O0=class{NJt(t){let e;try{e=JSON.parse(t)}catch(t){0}return e}fJt(t){this.MJt.push(t)}vJt(t){_e(this.MJt,t)}gJt(t){this.LJt.push(t)}mJt(t){_e(this.LJt,t)}BJt(t){this.OJt=t}Git(t,e){return this.FJt.Git(t,e)}yn(){this.FJt.PJt(k$,this.VJt),En(this.LJt),En(this.MJt),this.OJt=void 0}constructor(t){this.MJt=[],this.LJt=[],this.VJt=(t,e)=>{const i=this.NJt(e);if(i)if(i.type===B0.DJt)for(const t of this.MJt)for(const e of w.keys(i.properties))t(e,i.properties[e]);else if(i.type===B0.YBt)for(const t of this.LJt)t(i.event);else i.type===B0.yYt&&this.OJt&&i.event.trackState&&this.OJt(i.event.trackId,i.event.trackState.targetQualityIds)},this.FJt=t,this.FJt.CJt(k$,this.VJt)}};r(),r();var Xu=function(t){return t.WJt="medialoadedchange",t.vb="volumechange",t.cJt="casterror",t.UJt="playererror",t.GJt="targetqualitychanged",t.ZJt="receiverinfochanged",t}({}),F0=class extends me{constructor(){super("medialoadedchange")}},V0=class extends me{constructor(t,e){super("volumechange"),this.yR=t,this.qI=e}},W0=class extends me{constructor(t){super("casterror"),this.lt=t}},U0=class extends me{constructor(t){super("playererror"),this.lt=t}},G0=class extends me{constructor(t,e){super("targetqualitychanged"),this.VN=t,this.HJt=e}},Z0=class extends me{constructor(){super("receiverinfochanged")}},H0=class extends So{XJt(t,e,i){this._Jt.Git(k$,function(t,e,i){return{type:E$.yYt,trackID:t,trackType:e,properties:{targetQuality:i}}}(t,e,i)).catch(this.SJt)}zJt(){this.FJt.CJt(k$,this.qJt),this._Jt.Git(k$,{type:E$.wYt}).catch(M)}bJt(){return this.YJt}KJt(){return this.xMt.getSessionObj()}jJt(t){!this.QJt&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this.QJt=new x0(this,this._Jt,t),this.JJt(),this._o(new F0),this.QJt.pJt(this.$Jt))}t$t(){return this.QJt}async e$t(t){const e=function(t){const e=function(t,e,i,s){const[n,r]=function(t){for(const i of t.sources)if(Kn(i)){const t=i.src;if(t){var e;const s=null!=(e=i.type)?e:Au(t);if(X0(s))return[t,s]}}var i,s;return[null!=(i=WC(t))?i:"",null!=(s=FC(t))?s:""]}(t),o=new chrome.cast.media.MediaInfo(n,r);return o.metadata=S$(t.metadata,t.poster),o.streamType=s,function(t,e,i){const s=[],n=[];let r,o=0,h=0;for(const t of e){const e=P0(t.sources);if(e)if(D$(e,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=e.src;else if(N$(e,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const l=null!=(u=va.XQt(r,i))?u:0,d=void 0!==c?va.XQt(c,i):void 0,f=new chrome.cast.media.BreakClip("bc"+h++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=e.src,f.whenSkippable=d,f.customData={integration:t.integration};let _=Do(n,(t=>t.position===l));void 0===_&&(_=new chrome.cast.media.Break("b"+o++,[],l),n.push(_)),_.breakClipIds.push(f.id),s.push(f)}else 0;else 0}t.breakClips=s,t.breaks=n,t.vmapAdsRequest=r}(o,e,i),o}(t.i$t,t.zc,t.ct,t.V0),i=new chrome.cast.media.LoadRequest(e);return i.autoplay=!0,i.currentTime=t.RI,i.customData=t.s$t,i}(t);let i;try{i=await this.xMt.loadMedia(e)}catch(t){i=t}if(i)throw new m$(kn(i))}KI(t){this.KJt().setReceiverMuted(t,M,this.n$t)}AR(t){this.KJt().setReceiverVolumeLevel(t,M,this.n$t)}r$t(){return this.KJt().receiver.friendlyName}yn(){this.Ro(),this.xMt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.o$t),this.KJt().removeUpdateListener(this.JJt),this.FJt.PJt(k$,this.qJt),this._Jt.yn(),this.FJt.yn()}constructor(t){super(),this.YJt=void 0,this.SJt=t=>{this._o(new W0(t))},this.h$t=(t,e)=>{"error"===t&&this._o(new U0(e))},this.a$t=(t,e)=>{this._o(new G0(t,e))},this.qJt=(t,e)=>{const i=JSON.parse(e);i.type===B0.wYt&&(this.YJt=i.info,this._o(new Z0))},this.JJt=()=>{const t=this.KJt(),{level:e,muted:i}=t.receiver.volume;this._o(new V0(null!=e?e:void 0,null!=i?i:void 0))},this.o$t=()=>this.jJt(this.xMt.getMediaSession()),this.$Jt=t=>{var e;t||(null==(e=this.QJt)||e.wJt(this.$Jt),this.QJt=void 0,this._o(new F0))},this.n$t=t=>{var e;const i=new m$(kn(t.code),null!=(e=t.description)?e:void 0);this.SJt(i)},this.xMt=t,this.xMt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.o$t),this.FJt=new R0(t.getSessionObj()),this._Jt=new O0(this.FJt),this._Jt.fJt(this.h$t),this._Jt.BJt(this.a$t),this.KJt().addUpdateListener(this.JJt),this.JJt(),this.zJt();const e=this.xMt.getMediaSession();e&&this.jJt(e)}};function X0(t){switch(t){case ti.iP:case ti.eP:case ti.sP:case ti.nP:return!0}return!1}var z0=function(t){return t.u$t="statechange",t}({}),q0=class extends me{constructor(t){super("statechange"),this.Tft=t}};r(),r(),r(),r();var Y0=class extends So{Snt(){return this.Oc}TI(){return ee.WB()}CI(){return this.OH+this.c$t}dnt(){return this.CI()}EI(){}jd(){return this.FA}LI(){return this.v5}BI(){}$I(){return this.WH}l$t(){}eR(){return this.UH}iR(t){this.UH!==t&&(this.UH=t,this._o(new ga(this.na.RI,t)))}uR(){return Wt.TO}nR(){return ee.WB()}lR(){return ee.WB()}fR(){return!1}yI(){return this.LO}mR(){return this.FO}_R(){return this.Hl}TJt(t){}wR(){return this.d$t}gR(){return this.f$t}DR(){this.WH=!1}PR(){this.WH=!0}Db(t){this.OH=t-this.c$t}_$t(){return this.c$t}v$t(t){this.c$t=t}jnt(t){this.Oc.jnt(t)}NR(){}yn(){this.Ro(),this.LO.yn(),this.FO.yn(),this.Hl.yn(),this.Oc.yn()}constructor(t,e,i,s,n,r,o,h,a){super(),this.na=t,this.c$t=0,this.LO=new an,this.FO=new an,this.Hl=new ca,this.Oc=new JF,this.c$t=e,this.OH=i-e,this.FA=s,this.v5=n,this.WH=r,this.UH=o,this.d$t=h,this.f$t=a}};r(),r(),r(),r();var Wo=function(t){return t.g$t="ccmodechangerequest",t.m$t="cctargetqualitychangerequest",t.p$t="cctrackchangerequest",t}({}),K0=class extends me{constructor(t,e,i){super(Wo.g$t),this.track=t,this.trackId=e,this.mode=i}};r();var j0=function(t){return t.Rk="TEXT",t.wE="AUDIO",t.yE="VIDEO",t}({}),Q0=function(t){return t.TW="SUBTITLES",t.kW="CAPTIONS",t.EW="DESCRIPTIONS",t.Jn="CHAPTERS",t.xW="METADATA",t}({});function J0(t){return"AUDIO"===t.type}function $0(t){return"VIDEO"===t.type}function t1(t){return"TEXT"===t.type}var e1=class extends So{get wa(){return this.eu||(this.eu=Yh(this)),this.eu}get Ch(){return this.iF}set Ch(t){t!==this.iF&&(this.iF=t,this._o(new te(this)))}get q(){return this.D5}get L(){return this.N5}get LE(){return this.Xo}set LE(t){const e=pu(t);this.Xo!==e&&(this.Xo=e,this.w$t!==e&&this._o(new K0(this,this.OC,e)),this._o(new Pc(this)))}get y$t(){return this.w$t}set y$t(t){const e=pu(t),i=this.Xo!==e;this.Xo=e,this.w$t=e,i&&this._o(new Pc(this))}M5(t){return Do(this.N5.mC,(e=>e.o===t))}HC(t){this.LE=t}b$t(t){}yn(){}nr(){}constructor(t){super(),this.eu=void 0;const e=t.customData;this.OC=Number(t.trackId)||0,this.o=""+(e&&e.id||this.OC),this.iF=e&&e.label||t.name||"",this.gs=e&&e.language||t.language||"",this.ZC=e&&e.inBandMetadataTrackDispatchType||"",this.Lt=e&&e.kind||function(t){switch(t){case Q0.TW:return Hi.TW;case Q0.kW:return Hi.kW;case Q0.EW:return Hi.EW;case Q0.Jn:return Hi.Jn;case Q0.xW:return Hi.xW}return}(t.subtype)||"subtitles",this.aR=Bu.NONE,this.zw=e&&void 0!==e.type?function(t){return XT(t)?t:Hr.DEFAULT}(e.type):Hr.WEBVTT,this.P5=[],this.N5=new _u(this.P5),this.W5=[],this.D5=new _u(this.W5),this.Xo=pu(e&&e.mode||Ui.Mh),this.w$t=this.Xo}};r(),r();var i1=class extends me{constructor(t,e){super(Wo.p$t),this.trackId=t,this.enabled=e}};r();var s1=class extends me{constructor(t,e){super(Wo.m$t),this.track=t,this.targetQuality=e}};r();var n1=function(t){return t.wE="audio",t.yE="video",t.Rk="text",t}({}),r1=class extends So{get BC(){return this.ydt}get WC(){return this.pdt}set WC(t){this.A$t(t),this._o(new s1(this,t))}get VC(){return this.jO}get Ch(){return this.iF}set Ch(t){t!==this.iF&&(this.iF=t,this._o(new te(this)))}get Rt(){return this.qe}set Rt(t){this.qe!==t&&(this.qe=t,this.S$t!==t&&this._o(new i1(this.OC,t)),this._o(new Pc(this)))}get T$t(){return this.S$t}set T$t(t){const e=this.qe!==t;this.qe=t,this.S$t=t,e&&this._o(new Pc(this))}get wa(){return this.eu||(this.eu=xi(this)),this.eu}get LE(){return this.Rt?"enabled":"disabled"}nF(t){this.Rt=t}b$t(t){if(t.targetQualityIds){const e=[];for(const i of this.jO.mC)t.targetQualityIds.indexOf(i.o)>-1&&e.push(i);const i=e.length?e:void 0;this.A$t(i)}}A$t(t){(function(t,e){return!t&&e||t&&!e||t&&e&&!of(t,e)})(this.pdt,t)&&(this.pdt=t&&this.jO.JO(t)?t:void 0,this._o(new HW(this.pdt,this)))}unload(){for(const t of this.jO.mC)t.vn("update",this.cBt);this.jO.nr()}constructor(t){super(),this.ydt=void 0,this.jO=new tl,this.pdt=void 0,this.eu=void 0,this.cBt=()=>this._o(new te(this));const e=t.customData;if(this.OC=Number(t.trackId)||0,this.o=""+(e&&e.id||this.OC),this.iF=e&&e.label||t.name||"",this.gs=e&&e.language||t.language||"",this.Lt=e&&e.kind||"main",this.qe=e&&e.enabled,this.S$t=this.qe,J0(t)){this.j3=n1.wE;const e=t.customData&&t.customData.qualities;if(e)for(const t of e){const e=new kZ(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);e.bn("update",this.cBt),this.jO.QO(e)}}else{this.j3=n1.yE;const e=t.customData&&t.customData.qualities;if(e)for(const t of e){const e=new TZ(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);e.bn("update",this.cBt),this.jO.QO(e)}}}};r();var o1=function(t){return t.k$t="legacy",t.E$t="caf",t}({});r(),r(),r(),r();var h1=class{Ic(){if(this.x$t>=this.Oc.length)return;const t=this.Oc[this.x$t];return this.x$t+=1,t}lt(){return this.Ic()}constructor(t){this.x$t=0,this.Oc=t}};function xn(t){var e,i,s;return null!=(s=null==(i=t.YQt)||null==(e=i.AYt)?void 0:e.SYt())?s:[]}var a1=class{},Lc=class{Hnt(){var t;return null!=(t=this.eu)?t:this.eu=function(t){return{get ads(){return t.zc.map((t=>t.Hnt()))},get integration(){return t.zQt},get maxDuration(){return t.I$t},get maxRemainingDuration(){return t.R$t},get timeOffset(){return t.LOt},get customData(){return t.s$t}}}(this)}constructor(){this.eu=void 0}},u1=class{get C$t(){return this.P$t}get t(){return this.na}constructor(t,e){this.P$t=t,this.na=e}},c1=class extends Lc{get yQt(){return this.iJt}get zc(){const t=[];for(const s of this.iJt.D$t)for(const n of xn(s)){var e,i;const r=null!=(i=null==(e=n.WYt)?void 0:e.lKt)?i:[];if(n.FYt&&t.push(this.N$t(n.FYt,r,n.GYt,s.urt)),n.UYt)for(const e of n.UYt.ZYt)t.push(this.M$t(e,r,n.UYt,n.GYt,s.urt))}return t}N$t(t,e,i,s){const n=Do(this.L$t,(e=>e.FYt===t));if(void 0!==n)return n;const r=new _1(t,e,this,this.B$t,i,s);return this.L$t.push(r),r}M$t(t,e,i,s,n){const r=Do(this.O$t,(e=>e.UYt===t));if(void 0!==r)return r;const o=new f1(t,e,i,this,this.B$t,s,n);return this.O$t.push(o),o}get zQt(){return vu.CSAI}get LOt(){const t=this.iJt.od;return t>=0?t:this.B$t.t.jd()}get R$t(){let t=0;for(const e of this.iJt.D$t)for(const i of xn(e))i.FYt&&!i.FYt.cjt&&(t+=i.FYt.ct);return this.B$t&&this.B$t.C$t&&(t+=this.B$t.C$t.ct-this.B$t.C$t.RI),t}get I$t(){let t=0;for(const e of this.iJt.D$t)for(const i of xn(e))i.FYt&&(t+=i.FYt.ct);return t}get s$t(){}constructor(t,e){super(),this.L$t=[],this.O$t=[],this.iJt=t,this.B$t=e}},l1={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},d1=class extends a1{get sd(){return this.eKt}get urt(){return this.qQt}get GYt(){return this.sjt}F$t(){return this.V$t}W$t(){this.V$t=!0}U$t(t){return ne({},l1,{resourceURI:t.qjt||""})}G$t(t){return ne({},l1,{contentHTML:t.qjt.trim(),type:"HTMLResource"})}Z$t(t){var e,i;return ne({},l1,{clickThrough:(null==(e=t.DKt)?void 0:e.trim())||"",resourceURI:(null==(i=t.qjt)?void 0:i.trim())||"",altText:t.CKt||"",type:"StaticResource"})}H$t(t,e,i){if(!t||!e)return;const s="<img "+(i?"title='"+i+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(e)+"' target='_blank' rel='noopener'>"+s+"</a>"}WYt(t){return t?t.map((t=>{let e;const i={adSlotId:t.SKt||"",height:t.Ti||0,width:t.ji||0};if(t.qYt){var s;const i=this.Z$t(t.qYt),n=i.clickThrough||(null==(s=t.xKt)?void 0:s.DKt);e=ne({},i,{contentHTML:this.H$t(i.resourceURI,n,i.altText)||""})}else if(t.QYt)e=this.G$t(t.QYt);else{if(!t.KYt)return;e=this.U$t(t.KYt)}return Qr(e,i)})).filter((t=>void 0!==t)):[]}X$t(){return this.z$t.PYt}constructor(t,e,i,s,n,r){super(),this.V$t=!1,this.z$t=t,this.dKt=e,this.eKt=i,this.B$t=s,this.sjt=n,this.qQt=r}},f1=class extends d1{get UYt(){return this.z$t}get VYt(){return this.q$t}ka(){const t=this.eKt,e={companions:this.WYt(this.dKt),type:"nonlinear",id:this.z$t.iKt,skipOffset:this.ajt,integration:this.qQt.integration,adSystem:this.z$t.PYt,get adBreak(){return t.Hnt()},creativeId:this.z$t.iKt,universalAdIds:this.sjt.map((t=>({adIdRegistry:t.uQt,adIdValue:t.lQt})))};return this.z$t.KYt?Qr(this.U$t(this.z$t.KYt),e):this.z$t.QYt?Qr(this.G$t(this.z$t.QYt),e):this.z$t.qYt?Qr(this.Z$t(this.z$t.qYt),e):e}Hnt(){var t;return null!=(t=this.eu)?t:this.eu=this.ka()}Y$t(){var t,e;return null!=(e=null==(t=this.z$t.qYt)?void 0:t.qjt)?e:""}K$t(){var t,e,i;return null!=(i=null==(e=this.z$t)||null==(t=e.qYt)?void 0:t.Kjt)?i:""}get ajt(){const t=this.z$t.sd;return t&&t.urt&&void 0!==t.urt.skipOffset?va.XQt(t.urt.skipOffset,this.B$t.C$t.ct):(null==(e=this.z$t.sd)?void 0:e.ajt)||-1;var e}constructor(t,e,i,s,n,r,o){super(t,e,s,n,r,o),this.q$t=i}},_1=class extends d1{get FYt(){return this.z$t}ka(){var t;const e=this.eKt,i=this.z$t;return{companions:this.WYt(this.dKt),duration:i.ct,id:i.iKt,mediaFiles:i.rjt,get mediaUrl(){return i.ljt},skipOffset:this.ajt,type:"linear",integration:this.qQt.integration,adSystem:i.PYt,width:void 0,height:void 0,get adBreak(){return e.Hnt()},clickThrough:null==(t=i.KKt)?void 0:t.DKt,creativeId:i.iKt,universalAdIds:this.sjt.map((t=>({adIdRegistry:t.uQt,adIdValue:t.lQt}))),closedCaptionFiles:i.fjt,extensions:i.vjt}}Hnt(){var t;return null!=(t=this.eu)?t:this.eu=this.ka()}Y$t(){return this.z$t.rjt.length>0?this.z$t.rjt[0].contentURL:""}K$t(){return this.z$t.rjt.length>0?this.z$t.rjt[0].type:""}get ajt(){const t=this.z$t.sd;return t&&t.urt&&void 0!==t.urt.skipOffset?va.XQt(t.urt.skipOffset,this.B$t.C$t.ct):this.z$t.ajt||-1}constructor(t,e,i,s,n,r){super(t,e,i,s,n,r)}};function v1(t){return t instanceof _1}r();var ji=function(t){return t.j$t="csai",t.Q$t="google-ima",t.Kh="google-dai",t.J$t="freewheel",t.$$t="mediatailor",t.Cv="chromecast",t.Dnt="theoads",t}({});r();var Nr=class extends Ha{ka(){return new g1(this.trt.Hnt())}constructor(t){super("t0t",t)}},g1=class extends Wa{constructor(t){super("updatead",t)}};r();var m1=class extends Ha{ka(){return new p1(this.trt.Hnt())}constructor(t){super("e0t",t)}},p1=class extends Wa{constructor(t){super("adloaded",t)}},w1=class extends en{get Vc(){return void 0!==this.i0t}get Znt(){return this.z$t?[this.z$t]:[]}get Xnt(){var t;return null!=(t=this.i0t)?t:null}get znt(){return Ye(this.s0t,(t=>{const e=t.zc;if(t===this.i0t&&void 0!==this.z$t){const t=e.indexOf(this.z$t);if(t>=0)return e.slice(t+1)}return t.n0t()?[]:e}))}get qnt(){return this.s0t.filter((t=>t===this.i0t||!t.n0t()))}get wa(){var t;return null!=(t=this.eu)?t:this.eu=Ve(this)}K6(t,e,i){throw new g("Scheduling ads while casting is not supported.")}zD(){this.dJt.IJt()}Qnt(t){var e;null==(e=this.r0t)||e.Qnt(t)}Knt(t,e){var i;null==(i=this.r0t)||i.Knt(t,e)}o0t(t){return Do(this.s0t,(e=>e.o===t))}h0t(t,e,i,s){const n=this.s0t,r=[];let o=!1;for(const n of t){let t=this.o0t(n.id);void 0===t&&(t=new y1(n),s.push(new UF(t))),!ol(t.a0t)&&ol(i)&&(t.a0t=this.u0t(t.c0t,i));const h=t.zc;t.ir(n,e,i,s);const a=t.zc;for(const t of a)fh(h,t)||(s.push(new Uu(t)),o=!0);r.push(t)}this.s0t=r,o&&s.push(new un);for(const t of n)fh(r,t)||s.push(new Pu(t))}l0t(t,e){const i=this.i0t,s=this.z$t;let n,r;if(t){var o;const{breakId:e,breakClipId:i}=t;n=e?this.o0t(e):void 0,r=i?null==(o=this.i0t)?void 0:o.d0t(i):void 0}if(this.i0t=n,this.z$t=r,n!==i&&(void 0!==i&&(i.f0t=void 0,e.push(new $h(i))),void 0!==n&&(n.f0t=this.dJt,e.push(new XF(n)))),r!==s){const t=this.na.CI();void 0!==s&&e.push(new Qn(s,t)),void 0!==r&&e.push(new Cn(r,t))}}u0t(t,e){if(!e||!e.breaks)return;const i=Do(e.breaks,(e=>e.id===t.id));return i}jnt(t){const e=[];for(const t of this.s0t){let i=t.zc;if(t===this.i0t&&void 0!==this.z$t){const t=i.indexOf(this.z$t);t>=0&&(i=i.slice(t))}else if(t.n0t())continue;for(const t of i){const i=t._0t();i&&e.push(i)}}for(const i of e)t.K6(i,FF.Unt,!1)}yn(){return this.Ro(),this.dJt.wJt(this.ih),void 0!==this.i0t&&(this.i0t.f0t=void 0,this.i0t=void 0),this.z$t=void 0,En(this.s0t),Promise.resolve(void 0)}Ynt(t){}constructor(t,e,i){super(),this.s0t=[],this.i0t=void 0,this.z$t=void 0,this.eu=void 0,this.ih=t=>{var e;if(!t)return;const i=this.dJt.LN,{breakStatus:s}=i,{breakClips:n,breaks:r}=i.media,o=null==(e=T$(i))?void 0:e.media,h=[];r&&n&&this.h0t(r,n,o,h),this.l0t(s,h);for(const t of h)this._o(t)},this.na=t,this.dJt=e,this.r0t=i,this.dJt.pJt(this.ih)}},y1=class extends Lc{get c0t(){return this.v0t}get o(){return this.v0t.id}get zc(){return this.Oc}get zQt(){return ji.Cv}get I$t(){let t=this.v0t.duration;return void 0===t&&this.Oc.length>0&&(t=Mh(this.Oc,(t=>t.ct)),S(t)&&(t=void 0)),t}get R$t(){const t=this.I$t;if(void 0!==t&&void 0!==this.f0t){const e=this.f0t.xJt();if(void 0!==e)return _.max(0,t-e)}return t}get LOt(){return this.v0t.position}get s$t(){}n0t(){return this.v0t.isWatched}d0t(t){return Do(this.Oc,(e=>e.o===t))}ir(t,e,i,s){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const o=t.breakClipIds[r],h=Do(e,(t=>t.id===o));if(void 0===h)continue;const a=r<this.Oc.length?this.Oc[r]:new b1(h,this);!ol(a.g0t)&&ol(i)&&(a.g0t=this.m0t(i,o,r)),a.ir(h,s),n.push(a)}this.v0t=t,this.Oc=n}m0t(t,e,i){if(!t||!t.breakClips)return;let s=Do(t.breakClips,(t=>t.id===e));if(!s){var n;const e=null==(n=this.a0t)?void 0:n.breakClipIds[i];e&&(s=Do(t.breakClips,(t=>t.id===e)))}return s}constructor(t){super(),this.a0t=void 0,this.Oc=[],this.f0t=void 0,this.v0t=t}},b1=class{get p0t(){return this.w0t}get o(){return this.w0t.id}get lKt(){return[]}get ct(){var t;return null!=(t=this.w0t.duration)?t:NaN}get rjt(){const t=this.Y$t();return t?[{contentURL:t,delivery:"progressive",type:this.K$t(),width:0,height:0}]:[]}get ljt(){return this.Y$t()}get ajt(){const{whenSkippable:t}=this.w0t;return void 0===t?void 0:t<0?-1:t}get DKt(){return this.w0t.clickThroughUrl}get iKt(){}get GYt(){return[]}get s$t(){}X$t(){return""}K$t(){var t;return null!=(t=this.w0t.contentType)?t:""}Y$t(){var t,e;return null!=(e=null!=(t=this.w0t.contentUrl)?t:this.w0t.contentId)?e:""}ir(t,e){const i=this.o,s=this.ct,n=this.w0t.contentUrl;this.w0t=t;const r=this.o,o=this.ct,h=this.w0t.contentUrl;i===r&&(s===o||S(s)&&S(o))&&n===h||e.push(new Nr(this)),S(s)&&!S(o)&&e.push(new m1(this))}_0t(){let t;return this.g0t&&(t=S0(this.g0t,this.sd.LOt)),t||(t=S0(this.w0t,this.sd.LOt)),t}Hnt(){var t;return null!=(t=this.eu)?t:this.eu=this.ka()}ka(){const t=this;return{get extensions(){return[]},get companions(){return t.lKt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.rjt},get mediaUrl(){return t.ljt},get closedCaptionFiles(){return[]},get skipOffset(){return t.ajt},type:"linear",integration:ji.Cv,get adSystem(){return t.X$t()},width:void 0,height:void 0,get adBreak(){return t.sd.Hnt()},get resourceURI(){return t.Y$t()},get clickThrough(){return t.DKt},get creativeId(){return t.iKt},get customData(){return t.s$t},get isSlate(){return!1},get universalAdIds(){return t.GYt.map((t=>({adIdRegistry:t.uQt,adIdValue:t.lQt})))}}}constructor(t,e){this.eu=void 0,this.w0t=t,this.sd=e}};r();var A1=class extends So{get y0t(){return this.b0t}set y0t(t){this.b0t!==t&&(this.b0t=t,this.Vs.href=null!=t?t:"",t?this.MW():this.LW())}MW(){if(this.qe)return;this.qe=!0,this.Vs.style.display="",this.A0t||(this.ux.style.cursor="pointer");const t=this.A0t?this.Vs:this.ux;As.Ys.Qe?(t.addEventListener("touchstart",this.S0t),t.addEventListener("touchend",this.T0t)):(t.addEventListener("mousedown",this.S0t),t.addEventListener("click",this.T0t))}LW(){if(!this.qe)return;this.qe=!1,this.Vs.style.display="none",this.A0t||(this.ux.style.cursor="");const t=this.A0t?this.Vs:this.ux;As.Ys.Qe?(t.removeEventListener("touchstart",this.S0t),t.removeEventListener("touchend",this.T0t)):(t.removeEventListener("mousedown",this.S0t),t.removeEventListener("click",this.T0t))}Km(){this.Ro(),this.LW(),this.ux.removeChild(this.Vs)}constructor(t,e=As.Ys.Qe){super(),this.qe=!1,this.S0t=t=>{t.stopPropagation(),this._o(new me("clickstart"))},this.T0t=t=>{t.stopPropagation(),this._o(new me("click"))},this.ux=t,this.A0t=e,this.Vs=h.createElement("a"),this.Vs.style.position="absolute",this.Vs.style.zIndex="11",this.Vs.target="zu",this.A0t?(Nu(this.Vs,"learn more"),this.Vs.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Vs.setAttribute("rel","noopener")):Ka(this.Vs),this.ux.appendChild(this.Vs),this.LW()}};r(),r();var S1=[1200,992,768,576],T1={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},k1=class{k0t(t){const e=E1(t);e!==this.E0t&&(hn(this.Vs,e),Rd(this.Vs,this.E0t),this.E0t=e)}yn(){this.Ku.vn(ln.mn,this.gn)}constructor(t,e){this.Vs=t,this.Ku=e,this.gn=t=>{this.k0t(t.width)},this.E0t=E1(e.Au),hn(this.Vs,this.E0t),e.bn(ln.mn,this.gn)}};function E1(t){for(const e of S1)if(t>e)return T1[e];return"theo-size-xs"}var x1=class extends So{get we(){return this.Vs}get LE(){return this.Xo}get Mk(){return this.nd.textContent||""}set Mk(t){Nu(this.nd,t)}x0t(t){"countdown"!==this.Xo&&(this.Xo="countdown",this.I0t(),this.we.classList.remove("theoplayer-ad-skip-button"),this.we.classList.add("theoplayer-ad-skip-countdown")),this.Mk="You can skip in "+_.round(t)+" seconds"}R0t(){"skip"!==this.Xo&&(this.Xo="skip",this.Mk="Skip Ad",this.C0t(),this.we.classList.remove("theoplayer-ad-skip-countdown"),this.we.classList.add("theoplayer-ad-skip-button"))}C0t(){this.we.addEventListener("mouseup",this.P0t),this.we.addEventListener("touchend",this.P0t)}I0t(){this.we.removeEventListener("mouseup",this.P0t),this.we.removeEventListener("touchend",this.P0t)}yn(){this.Ro(),this.I0t(),this.Yu.yn(),We(this.Vs),We(this.nd),this.D0t&&We(this.D0t)}constructor(t,e){super(),this.P0t=()=>{this._o(new me("zD"))},this.Vs=h.createElement("div"),this.we.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.we.style.position="absolute",this.nd=h.createElement("span"),this.we.appendChild(this.nd),e&&(this.D0t=h.createElement("div"),this.D0t.className="theoplayer-ad-skip-poster",this.D0t.style.backgroundImage='url("'+cm(e)+'")',this.we.appendChild(this.D0t)),this.Xo="countdown",this.Yu=new k1(this.we,t)}},I1=class extends So{N0t(){const t=this.dJt.LN.activeTrackIds;if(t){if(this.M0t()){const e=this.FO.mC.map((t=>t.o)),i=this.LO.mC.map((t=>t.o));fh(e.concat(i),"0")&&t.push(0)}N1(t,this.LO),N1(t,this.FO),function(t,e){const i=!1;for(const i of e.mC)i.y$t=fh(t,i.OC)?Ui.Qn:Ui.Mh}(t,this.Hl)}}L0t(){var t;const e=null==(t=this.dJt.LN.media)?void 0:t.tracks;if(!e)return;const i=e.filter(J0),s=e.filter($0),n=e.filter(t1);if(this.M0t()&&0===s.length&&0!==this.wR()){const t=this.B0t();s.push(t)}if(this.M0t()&&0===i.length){const t=this.O0t();i.push(t)}P1(this.LO,i.map((t=>t.trackId))),P1(this.FO,s.map((t=>t.trackId))),P1(this.Hl,n.map((t=>t.trackId))),D1(i,this.LO),D1(s,this.FO),function(t,e){let i=!1;for(const s of t){let t=C1(e,s.trackId);t||(t=new e1(s),e.tt(t),i=!0)}}(n,this.Hl)}F0t(){this.WH||(this.V0t=v(this.pd,250))}W0t(){p(this.V0t)}U0t(){this.W0t(),this.F0t()}G0t(){var t;const e=this.dJt.LN,i=e.media;var s;const n=null!=(s=null==i?void 0:i.duration)?s:NaN,r=(null==i?void 0:i.streamType)===chrome.cast.media.StreamType.LIVE||n<0,o=r?1/0:n;this.FA=o,this.Z0t();const h=e.getEstimatedLiveSeekableRange(),a=null==(t=e.customData)?void 0:t.buffers;if(ol(h)){const{start:t,end:e,isMovingWindow:i=r,isLiveDone:s=!1}=h;this.SVt(t,e,i,s)}else if(ol(a)){const[t,e]=a.seekable;this.SVt(t,e,r,!1)}else r?this.SVt(void 0,void 0,!0,!1):this.SVt(0,o,!1,!1)}H0t(){const t=this.dJt.LN,e=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||R1(t);this.X0t=e,this.WH!==e&&(this.WH=e,this.WH?this._o(new nl(this.CI())):this._o(new he(this.CI())))}nh(){const{playbackRate:t}=this.dJt.LN;this.z0t!==t&&(this.z0t=void 0,this.UH!==t&&(this.UH=t,this._o(new ga(this.CI(),t))))}q0t(){const{playerState:t}=this.dJt.LN;let e;switch(t){case chrome.cast.media.PlayerState.IDLE:e=Wt.TO;break;case chrome.cast.media.PlayerState.BUFFERING:e=Wt.Xn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:e=Wt.EO}this.p5(e),this.Y0t()}SVt(t,e,i,s){ol(t)&&ol(e)?this.j4=new kr(t,e,i,i&&!s):this.j4=void 0}K0t(t,e){this.f$t=null!=e?e:this.f$t,this.d$t=null!=t?t:this.d$t,this._o(new W)}Ge(t){this.j0t!==t?(this.FH=!0,this._o(new Al(this.CI()))):this.j0t=void 0}jZ(){if(!this.FH)return;this.FH=!1;const t=this.CI();this._o(new rl(t,this.EI())),this._o(new Be(t))}Ah(){this.v5=!0,this.LI()&&this._o(new ss(this.CI()))}Z0t(){const t=this.sxt,e=this.jd();t===e||S(t)&&S(e)||(this.sxt=e,this._o(new yn(e)))}Q0t(){const t=this.CI();this.FH||this.J0t===t||(this.J0t=t,this._o(new rl(t,this.EI())))}l$t(){this.WH&&(this.WH=!1,this._o(new he(this.CI())),this.p5(Wt.TO))}Snt(){return this.Oc}TI(){return this.hIt.Pb(this.c$t)}CI(){if(this.Oc.Vc){const t=this.dJt.EJt();if(void 0!==t)return t}return this.dnt()}dnt(){return void 0!==this.$0t?this.c$t+this.$0t:this.v5?this.jd():this.c$t+this.dJt.kJt()}EI(){if(this.t1t)return new Date(this.dnt()+this.t1t)}jd(){if(this.Oc.Vc){var t;const e=null==(t=this.Oc.Znt[0])?void 0:t.ct;if(void 0!==e&&!S(e))return e}return this.c$t+this.FA}BI(){return this.bZ}LI(){return!this.Oc.Vc&&this.v5}$I(){return this.WH}eR(){return this.UH}iR(t){this.UH!==t&&(this.z0t=this.UH,this.UH=t,this._o(new ga(this.CI(),t)),this.dJt.iR(t))}uR(){return this.g5}nR(){return this.Oc.Vc?ee.VB(0,this.CI()):this.Uo.Pb(this.c$t)}lR(){var t,e;if(this.Oc.Vc)return ee.WB();let i=null!=(e=null==(t=this.j4)?void 0:t.a4().Pb(this.c$t))?e:ee.WB();if(i.V>0){const t=i.Tn(i.V-1);i=i.AB(ee.VB(t,this.CI()))}return i}fR(){return this.FH}yI(){return this.LO}mR(){return this.FO}_R(){return this.Hl}B0t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.gR(),id:"0",name:"",width:this.wR()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:j0.yE}}O0t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:j0.wE}}M0t(){var t,e;return!(void 0!==(null==(t=this.xMt.bJt())?void 0:t.version))||(null==(e=this.xMt.bJt())?void 0:e.sdkType)===o1.E$t}TJt(t){this.M0t()&&_e(t,0),this.dJt.TJt(t)}wR(){return this.d$t}gR(){return this.f$t}DR(){this.WH&&(this.WH=!1,this.X0t=!1,this._o(new he(this.CI()))),this.dJt.DR()}PR(){this.WH||(this.WH=!0,this.X0t=!0,this._o(new nl(this.CI()))),this.dJt.PR()}Db(t){if(this.Oc.Vc)return;let e=_.max(0,t-this.c$t);e=_.round(1e6*e)/1e6;const i=this.$0t;this.$0t=e,this.X0t=this.$I(),this.j0t=e,this.FH=!0,this._o(new Al(this.CI())),void 0===i&&(this.M0t()?this.e1t(e):this.U8(e))}U8(t){this.dJt.Db(t,this.X0t).then(this.i1t(t)).catch(this.SJt)}i1t(t){return()=>{void 0!==this.$0t&&(this.$0t===t?this.$0t=void 0:this.U8(this.$0t))}}p5(t){this.g5!==t&&(this.g5=t,this._o(new oa(this.CI(),t))),void 0===this.$0t&&this.FH&&t>=Wt.kO&&this.jZ(),this.Y0t()}Y0t(){if(this.WH)return void(this.s1t=!1);const t=this.g5>=Wt.EO;this.s1t!==t&&(this.s1t=t,t?this._o(new Xr(this.CI())):this._o(new Pa(this.CI())))}n1t(){this.r1t||(this.r1t=h.createElement("div"),this.na.we.appendChild(this.r1t),this.r1t.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.r1t.style.zIndex="10",Ka(this.r1t)),this.r1t.style.display=this.Oc.Vc?"":"none"}o1t(){var t;const e=null==(t=this.Oc.Znt[0])?void 0:t.DKt;e&&!this.h1t?(this.h1t=new A1(this.r1t,!0),this.h1t.y0t=e,this.h1t.bn("clickstart",this.a1t)):this.h1t&&(this.h1t.y0t=e)}u1t(){var t;const e=null==(t=this.Oc.Znt[0])?void 0:t.ajt;if(void 0===e||e<0)return void(this.c1t&&(this.c1t.yn(),this.c1t=void 0));if(!this.c1t){var i;const t=null==(i=this.na.Ma)?void 0:i.mi;this.c1t=new x1(this.na.Hu,t),this.r1t.appendChild(this.c1t.we),this.c1t.bn("zD",this.l1t)}const s=this.dJt.EJt();void 0!==s&&(s<e?this.c1t.x0t(e-s):this.c1t.R0t())}_$t(){return this.c$t}v$t(t){this.c$t=t}jnt(t){}NR(){this.dJt.NR()}yn(){this.Ro(),this.Oc.yn(),this.h1t&&(this.h1t.Km(),this.h1t=void 0),this.c1t&&(this.c1t.yn(),this.c1t=void 0),this.r1t&&(We(this.r1t),this.r1t=void 0),this.dJt.mJt(this.y4),this.dJt.vJt(this.d1t),this.dJt.wJt(this.$Jt),this.dJt.vn(T0.cJt,this.f1t),this.dJt.yn()}constructor(t,e,i,s,n){super(),this.hIt=ee.WB(),this.t1t=void 0,this.v5=!1,this.bZ=void 0,this.z0t=void 0,this.g5=Wt.TO,this.s1t=!1,this.Uo=ee.WB(),this.j4=void 0,this.FH=!1,this.LO=new an,this.FO=new an,this.Hl=new ca,this.sxt=NaN,this.$0t=void 0,this.X0t=!1,this.J0t=NaN,this.j0t=void 0,this.V0t=0,this.d1t=(t,e)=>{switch(t){case"buffered":this.hIt=new ee(e),this._o(new ki(this.CI()));break;case"currentProgramDateTime":this.t1t=new Date(e).getTime()-this.CI();break;case"played":this.Uo=new ee(e);break;case"seekable":this.G0t();break;case"videoHeight":this.K0t(void 0,e);break;case"videoWidth":this.K0t(e,void 0)}},this.y4=t=>{switch(t.type){case ns.ib:this.Ge(t.currentTime);break;case ns.eb:this.jZ();break;case ns.Jy:this._o(new oU(t.representation,t.previousRepresentation));break;case ns.sb:this._o(new MW(t.segmentStartTime,t.error,t.trackType,t.track,t.quality,t.retryCount));break;case ns.My:this._o(new Su(t.currentTime,t.initDataType,t.initData));break;case ns.Iy:this._o(new rB(new kh(Ci.CONTENT_PROTECTION_ERROR,t.error,void 0,t.licenseAcquisitionURL,t.status,t.statusText,t.licenseAcquisitionMessage,t.systemCode)));break;case ns.Ry:this._o(new oB)}},this.$Jt=t=>{this.G0t(),this.H0t(),this.nh(),this.q0t(),this.Q0t(),this.U0t(),this.L0t(),this.N0t(),this.n1t(),this.o1t(),this.u1t(),t||R1(this.dJt.LN)&&this.Ah()},this.pd=()=>{this.Q0t(),this.u1t()},this.f1t=t=>{this._o(t)},this.e1t=Vd((t=>this.U8(t)),50),this.SJt=t=>{this.$0t=void 0,this._o(new k0(t))},this.a1t=()=>{this.PR()},this.l1t=()=>{this.Oc.zD()},this.na=t,this.xMt=i,this.dJt=s,this.Oc=new w1(t,s,e.zc),this.c$t=n._$t(),this.FA=n.jd()-this.c$t,this.WH=n.$I(),this.UH=n.eR(),this.d$t=n.wR(),this.f$t=n.gR(),this.dJt.gJt(this.y4),this.dJt.fJt(this.d1t),this.dJt.pJt(this.$Jt),this.dJt.bn(T0.cJt,this.f1t),this.dJt.yJt().then((t=>{this._o(new E0(t.bt,t.Cc))}),this.SJt)}};function R1(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function C1(t,e){for(const i of t.mC)if(i.OC===e)return i}function P1(t,e){let i=!1;for(let s=0;s<t.V;s++){const n=t.wC(s);-1===e.indexOf(n.OC)&&(t.it(n),s--,i=!0)}return i}function D1(t,e){let i=!1;for(const s of t){let t=C1(e,s.trackId);t||(t=new r1(s),e.tt(t),i=!0)}return i}function N1(t,e){for(const i of e.mC)i.T$t=fh(t,i.OC);return!1}r();var M1=class{ij(t){return Promise.resolve("all")}RR(){}yn(){}};r();function L1(t,e,i){if(S(t))return i;if(t===1/0){if("live"===i||"dvr"===i)return i;if(e&&e.length>0){if(e.end(e.length-1)-e.start(0)>60)return"dvr"}return"live"}return"vod"}var B1=[ns.Ly,ns.Dy,ns.Qy,ns.$y,ns.Ky,ns.ho,ns.jy,ns._b,ns.ib,ns.eb,Zc.aB,Zc.uB,ns.Jy,ns.sb,ns.My,ns.Iy,ns.Ry],O1=class extends gc{BH(t){if(!t)return;Et(this.IH&&uS(this.IH),t&&uS(t))||(this.IH=t,this._o(new vk(t)))}_1t(t){if(!t)return;const e=nc(t,this.na.kd);Et(this.Sc&&uS(this.Sc),e&&uS(e))||(this.Fa.v$t(0),this.Sc=e,this._o(new DF(e)),this.Fa.l$t())}v1t(t){for(const e of this.rt.mC)if(e.OC===t)return e;for(const e of this.ht.mC)if(e.OC===t)return e}get Tft(){return this.Fa}set Tft(t){const e=this.Fa;e&&(e.vn(T0.cJt,this.f1t),e.vn(T0.lJt,this.g1t),e.vn(B1,this.Ds),e.vn(Zc.aC,this.cU),t.v$t(e._$t()),e.jnt(t.Snt())),this.Fa=t,this.LO.bC=t.yI(),this.FO.bC=t.mR(),this.Hl.bC=t._R(),this.Oc.bC=t.Snt(),e&&e.yn(),t.bn(T0.cJt,this.f1t),t.bn(T0.lJt,this.g1t),t.bn(B1,this.Ds),t.bn(Zc.aC,this.cU)}get so(){return this.eo}get zc(){return this.Snt()}Snt(){return this.Oc}Tnt(){return this.ont}yI(){return this.LO}TI(){return this.Fa.TI().ks()}get m1t(){return this.p1t||this.Sc}set m1t(t){this.p1t=t}async $n(t,e){var i;t&&await this.e$t(t,null!=(i=t.ads)?i:[],t.streamType,NaN,0,null!=e?e:0)}async w1t(t){var e;const i=null!=(e=this.p1t)?e:this.Sc;if(!i)return;var s;const n=this.p1t?null!=(s=this.p1t.ads)?s:[]:this._rt(),r=this.na.jd(),o=this.na.lR(),h=L1(r,o,i.streamType),a=o.length>0?o.start(0):0,u=null!=t?t:this.dnt();await this.e$t(i,n,h,r,a,u)}_rt(){const t=new JF;return this.Oc.jnt(t),t._rt()}EI(){return this.Fa.EI()}II(){return this.IH}get RI(){return this.CI()}set RI(t){this.DI(t)}CI(){return this.Fa.CI()}dnt(){return this.Fa.dnt()}DI(t,e){this.y1t||(this.xMt.t$t()||this.y1t||!this.Sc?this.Fa.Db(t):this.$n(this.Sc,t))}jd(){return this.Fa.jd()}LI(){return this.Fa.LI()}BI(){return this.bZ}FI(){return this.AZ}WI(){return this.OO}zI(){return this.na.XI}YI(){return this.VH}KI(t){this.VH=t,this._o(new Ar(this.RI,this.yR)),this.xMt.KI(t)}$I(){return this.Fa.$I()}eR(){return this.Fa.eR()}iR(t){this.Fa.iR(t)}nR(){return this.Fa.nR().ks()}oR(){return hi.bO}hR(t){}uR(){return this.Fa.uR()}lR(){return this.Fa.lR().ks()}fR(){return this.Fa.fR()}iu(){return this.Sc}async Ca(t){this.Sc=t,await this.$n(t),this.p1t=void 0,this.Fa.l$t()}_R(){return this.Hl}gR(){return this.Fa.gR()}wR(){return this.Fa.wR()}mR(){return this.FO}bR(){return this.jA}AR(t){this.jA=t,this._o(new Ar(this.RI,this.yR)),this.xMt.AR(t)}get ER(){return!1}set ER(t){}IR(){}xR(){return this.ea}RR(){}DR(){this.xMt.t$t()||this.y1t||!this.Sc?this.Fa.DR():this.$n(this.Sc)}PR(){this.Fa.PR()}pr(){this.eo=!0}dr(){this.IH=void 0,this.eo=!1}ge(){}be(){}async e$t(t,e,i,s,n,r){this.y1t=!0,this.b1t(),this.Fa.v$t(n);const o="live"===i||"dvr"===i,h=function(t,e,i){return{theoplayer_version:1,streamStart:t,isLive:e,sourceDescription:i}}(n,o,t),a={i$t:t,zc:e,RI:_.max(0,r-n),ct:s,V0:o?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,s$t:h};try{await this.xMt.e$t(a)}catch(t){this.A1t(t)}finally{this.y1t=!1}}S1t(){this.T1t(this.LO),this.T1t(this.FO),this.k1t(this.Hl)}T1t(t){for(const e of t.mC)this.E1t(e);t.bn(je.XR,(t=>{this.E1t(t.Ht),this.x1t()}))}k1t(t){for(const e of t.mC)this.I1t(e);t.bn(je.XR,(t=>{this.I1t(t.Ht),this.x1t()}))}E1t(t){t.bn(Wo.m$t,this.hpt),t.bn(Wo.p$t,this.R1t),t.bn(Wo.p$t,this.N0t)}I1t(t){t.bn(Wo.g$t,this.C1t),t.bn(Wo.g$t,this.N0t)}P1t(){const t=[];for(const e of this.rt.mC)e.Rt&&t.push(e.OC);for(const e of this.ht.mC)e.Rt&&t.push(e.OC);for(const e of this.nt.mC)e.LE===Ui.Qn&&t.push(e.OC);this.Fa.TJt(t)}D1t(t,e,i){this.N1t=t,this.M1t=e,this.L1t=i}B1t(t){var e,i;if(!t)return!1;return(null!=(i=null==(e=this.xMt.bJt())?void 0:e.version)?i:-1)>=2?t.map((t=>t.o)):[t[0].o]}O1t(t){this.F1t=t}FR(){}WR(){}ZR(t){throw new m("Can't add a track while casting.")}async NR(){this.Fa.NR(),this.b1t()}b1t(){this.eU=Wt.TO,this.KW=!1,this.JW=!1,this.bZ=void 0,this.AZ=void 0}async yn(){this.b1t(),this.Ro(),this.Tft=this.V1t(),this.xMt.vn(Xu.cJt,this.f1t),this.xMt.vn(Xu.UJt,this.W1t),this.xMt.vn(Xu.vb,this.U1t),this.xMt.vn(Xu.WJt,this.G1t),this.xMt.vn(Xu.GJt,this.Z1t),this.xMt.yn()}V1t(){return new Y0(this,this.Fa._$t(),this.Fa.CI(),this.Fa.jd(),this.Fa.LI(),this.Fa.$I(),this.Fa.eR(),this.Fa.wR(),this.Fa.gR())}constructor(t,e){super(t,!0),this.eo=!1,this.F1t=M,this.eU=Wt.TO,this.KW=!1,this.JW=!1,this.y1t=!1,this.p1t=void 0,this.bZ=void 0,this.AZ=void 0,this.LO=new pS,this.FO=new pS,this.Hl=new yt,this.ea=new ot,this.OO=new AS,this.ont=new M1,this.N1t=void 0,this.M1t=void 0,this.L1t=void 0,this.U1t=t=>{var e,i;(ol(t.yR)&&!rs(t.yR,this.jA,1e-5)||ol(t.qI)&&t.qI!==this.VH)&&(this.jA=null!=(e=t.yR)?e:this.jA,this.VH=null!=(i=t.qI)?i:this.VH,this._o(new Ar(this.RI,this.jA)))},this.G1t=()=>{const t=this.xMt.t$t();this.Tft=t?new I1(this,this.na,this.xMt,t,this.Fa):this.V1t()},this.g1t=t=>{this.BH(t.bt),this._1t(t.Cc)},this.Z1t=t=>{const e=this.v1t(t.VN);if(!e)return void 0;const i={targetQualityIds:t.HJt};e.b$t(i)},this.f1t=t=>{this.A1t(t.lt)},this.A1t=t=>{this.F1t&&this.F1t(t)},this.W1t=t=>{this.bZ=t.lt,this.AZ=xk(this.bZ),this._o(new Pi(this.AZ))},this.R1t=t=>{if(!t.enabled)return;const e=this.rt.mC.some((e=>e.OC===t.trackId))?this.rt:this.ht;for(const i of e.mC)i.Rt&&i.OC!==t.trackId&&(i.Rt=!1)},this.C1t=t=>{if(t.mode===Ui.Qn)for(const e of this.nt.mC)e.LE===Ui.Qn&&e.OC!==t.trackId&&Cx(e.Lt,t.track.Lt)&&(e.LE=Ui.Mh)},this.N0t=Vd((()=>{this.P1t()}),50),this.x1t=()=>{const t=[];var e;const i=null!=(e=Do(this.ht.mC,(t=>q1(t,this.N1t))))?e:Do(this.ht.mC,(t=>t.Rt));var s;i&&t.push(i.OC);const n=null!=(s=Do(this.nt.mC,(t=>q1(t,this.M1t))))?s:Do(this.nt.mC,(t=>t.LE===Ui.Qn));var r;n&&t.push(n.OC);const o=null!=(r=Do(this.rt.mC,(t=>q1(t,this.L1t))))?r:Do(this.rt.mC,(t=>t.Rt));o&&t.push(o.OC),0!==t.length&&this.Fa.TJt(t)},this.hpt=t=>{const e=this.B1t(t.targetQuality),i=t.track;this.xMt.XJt(i.OC,i.j3,e)},this.cU=t=>{this._o(t);const e=t.readyState;!this.KW&&this.eU===Wt.TO&&e>=Wt.Xn&&(this.KW=!0,this._o(new vo(t.currentTime))),!this.JW&&this.eU<=Wt.Xn&&e>=Wt.kO&&(this.JW=!0,this._o(new uo(t.currentTime))),this.eU<=Wt.kO&&e>=Wt.EO&&this._o(new rt(t.currentTime)),this.eU<=Wt.EO&&e===Wt.xO&&this._o(new $i(t.currentTime)),this.eU=e},this.jA=this.na.yR,this.VH=this.na.qI,this.xMt=e,this.xMt.bn(Xu.cJt,this.f1t),this.xMt.bn(Xu.UJt,this.W1t),this.xMt.bn(Xu.vb,this.U1t),this.xMt.bn(Xu.WJt,this.G1t),this.xMt.bn(Xu.GJt,this.Z1t),this.Oc=new jF(this),this.IH=this.na.bt,this.Sc=this.na.iu(),this.Tft=new Y0(this,0,this.na.dnt(),this.na.jd(),this.na.MI,this.na.JI,this.na.tR,this.na.pR,this.na.vR),this.S1t()}};r();var F1=class extends $s{ka(){return new V1(this.lt)}constructor(t){super("error"),this.lt=t}},V1=class extends me{constructor(t){super("error"),this.error=t}};r();var W1=class extends me{constructor(t){super("statechange"),this.state=t}};function U1(t,e){let i;return{get casting(){return t.UQ},get error(){return t.lt},get receiverName(){return t.H1t},get state(){return t.Tft},start(){t.Sn()},stop(){t.NR()},join(){t.X1t()},leave(){t.z1t()},set connectionCallback(t){null==e||e.q1t(t)},get connectionCallback(){return null==e?void 0:e.Y1t()},get source(){return i||t.Cc},set source(e){i=e,t.Cc=e},addEventListener(e,i){const s=Ta(e,os);t.bn(s,i)},removeEventListener(e,i){const s=Ta(e,os);t.vn(s,i)}}}r();var G1=class extends en{get UQ(){return this.Tft===hh.CONNECTING||this.Tft===hh.CONNECTED}get lt(){return this.bZ}get wa(){return this.eu||(this.eu=U1(this,this.K1t)),this.eu}get H1t(){var t;return null==(t=this.K1t.j1t())?void 0:t.r$t()}get Cc(){return this.na?this.na.m1t:this.p1t}set Cc(t){this.p1t=t?nc(t,this.Q1t.kd):void 0,this.na&&(this.na.m1t=this.p1t,this.p1t&&this.na.$n(this.p1t))}get Tft(){return this.Fa}set Tft(t){let e=t;this.J1t||e!==hh.CONNECTING&&e!==hh.CONNECTED||(e=hh.AVAILABLE),this.Fa!==e&&(this.Fa=e,this._o(new W1(this.Tft)))}async $1t(){if(!this.t2t)throw new m("Chromecast must be initialized before starting a session");await this.t2t,this.K1t.j1t()||await this.K1t.e2t()}async Sn(){this.J1t=!0;try{if(this.Tft=hh.CONNECTING,await this.$1t(),await this.i2t(),this.na){const t=this.Q1t.iu(),e=this.K1t.s2t(t);this.na.m1t=e?nc(e,this.Q1t.kd):this.p1t,this.na.w1t()}this.Tft=hh.CONNECTED,await this.Q1t.NR()}catch(t){this.n2t(!1).catch(M),this.Tft=hh.AVAILABLE,Se(t)||this.T9(t)}}async X1t(){this.J1t=!0;try{if(this.Tft=hh.CONNECTING,await this.$1t(),await this.i2t(),this.na){const t=this.Q1t.iu(),e=this.K1t.r2t(t);e&&(this.na.m1t=nc(e,this.Q1t.kd))}this.Tft=hh.CONNECTED,await this.Q1t.NR()}catch(t){await this.n2t(!0).catch(M),this.Tft=hh.AVAILABLE,Se(t)||this.T9(t)}}async o2t(){this.K1t.j1t()&&await this.Sn()}async i2t(){null!=this.na||(this.na=this.h2t()),this.bZ=void 0,this.Q1t.PR(),await this.Kj.a2t(this.na)}h2t(){const t=new O1(this.Q1t,this.K1t.j1t());return t.O1t(this.T9),t}u2t(){this.na&&(this.na.yn(),this.na=void 0)}async n2t(t){if(this.J1t=!1,!this.na)return;const e=this.na.so,i=this.na.iu(),s=this.na.dnt();try{if(e){let e;e=t?this.K1t.c2t(i):this.K1t.l2t(i),null!=e||(e=i),await this.Kj.d2t(e,e===i),this.Q1t.DI(s),this.Q1t.DR()}}finally{this.u2t()}}z1t(){this.UQ&&(this.K1t.f2t(!1),this.n2t(!0).catch(this.T9))}NR(){this.UQ&&(this.K1t.f2t(!0),this.n2t(!1).catch(this.T9))}yn(){this.GW.np(),this.K1t.vn(z0.u$t,this._2t),this.Ro(),this.u2t()}constructor(t,e,i,s){super(),this.bZ=void 0,this.eu=void 0,this.na=void 0,this.Fa=hh.UNAVAILABLE,this.J1t=!1,this.GW=new Fi,this.v2t=()=>{this.K1t.bn(z0.u$t,this._2t),this.Tft=this.K1t.g2t()},this._2t=t=>{const e=t.Tft;this.Tft=e,e!==hh.UNAVAILABLE&&e!==hh.AVAILABLE||this.n2t(!1).catch(this.T9)},this.p1t=void 0,this.T9=t=>{Se(t)||t instanceof m$&&(this.bZ=t,this._o(new F1(t).wa))},this.Kj=t,this.Q1t=e,this.K1t=s,this.FT=i.chromecast,this.t2t=Ts(this.K1t.nQ(this.FT,this.GW.ep),this.GW),this.t2t.then(this.v2t).catch(this.T9)}};r();var Z1=class extends en{get UQ(){return!1}get lt(){}get H1t(){}get Cc(){}set Cc(t){}get Tft(){return hh.UNAVAILABLE}get wa(){return this.eu||(this.eu=U1(this)),this.eu}X1t(){As.aw("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}z1t(){As.aw("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}Sn(){As.aw("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}NR(){As.aw("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}o2t(){return Promise.resolve()}yn(){}};function H1(t){return{bt:t.bt,RI:t.CI(),ct:t.jd(),MI:t.MI,lt:t.BI(),OI:t.FI(),qI:t.qI,JI:t.JI,tR:t.tR,aR:t.aR,dR:t.dR,vR:t.vR,pR:t.pR,yR:t.yR}}r(),r();var X1=class extends gc{Snt(){return this.Oc}yI(){return this.LO}get VI(){return this.WI()}get UI(){return this.GI()}WI(){return this.OO}GI(){return this.BO}ja(){return this.MO}_R(){return this.Hl}mR(){return this.FO}switchContexts(t){this.na=t,this.LO.bC=t.ht,this.FO.bC=t.rt,this.Hl.bC=t.nt,this.MO.bC=t.WZ,this.OO.bC=t.VI,this.BO.bC=t.UI,this.Oc.bC=t.zc}m2t(t){this.na!==t&&(this.CH(),this.switchContexts(t),this.RH())}VO(t){if(this.na===t)return;let e;this.CH(),this.Rnt&&(e=H1(this));const i=this.II(),s=this.xR(),n=this.IR();if(this.switchContexts(t),void 0!==e){fk(this,e,H1(this))}const r=this.II();r!==i&&this._o(new vk(r)),this.xR()!==s&&this._o(new Ki),this.IR()!==n&&this._o(new gk),this.RH()}async yn(t){await super.yn(t),this.MO.yn(t),this.LO.yn(t),this.FO.yn(t),this.Hl.yn(t),this.OO.yn(),this.BO.yn(),await this.Oc.yn(t)}constructor(t,e){super(t,e),this.LO=new pS,this.FO=new pS,this.Hl=new yt,this.OO=new Kc,this.BO=new Qi,this.MO=new Lh(t.WZ),this.LO.bC=t.ht,this.FO.bC=t.rt,this.Hl.bC=t.nt,this.OO.bC=t.VI,this.BO.bC=t.UI,this.Oc=new jF(this),this.Oc.bC=t.zc}},z1=class extends X1{iu(){const t=super.iu();return!t&&this.p2t.UQ&&this.p2t.Cc?this.p2t.Cc:t}Ca(t,e){return this.Yo.Qo((e=>(this.w2t=new Fi,this.w2t.rp(e),Ts(super.Ca(t,this.w2t.ep),this.w2t))),e)}DR(){super.DR(),this.kd.cast.strategy!==xS.AUTO||this.p2t.UQ||this.p2t.o2t()}a2t(t){return this.Yo.Qo((e=>this.y2t(t,e)))}d2t(t,e){return void 0===t&&(t=void 0),void 0===e&&(e=!1),this.Yo.Qo((i=>this.b2t(t,e,i)))}y2t(t,e){Io(e),this.A2t.zc&&this.A2t.zc.jnt(t.zc),this.S2t(),this.T2t=Do(this.A2t.ht.mC,(t=>t.Rt)),this.vEt=Do(this.A2t.nt.mC,(t=>"showing"===t.LE)),this.k2t=Do(this.A2t.rt.mC,(t=>t.Rt)),this.E2t=t,this.E2t.D1t(this.T2t,this.vEt,this.k2t),this.VO(t),this.E2t.pr()}async b2t(t,e,i){Io(i);const s=this.E2t;if(void 0!==s)try{if(t){await this.A2t.NR(),Io(i);const s=nc(t,this.A2t.kd);e&&(s.ads=void 0),this.w2t=new Fi,this.w2t.rp(i),await Ts(this.A2t.Ca(s,this.w2t.ep),this.w2t)}e&&this.A2t.zc&&s.zc.jnt(this.A2t.zc)}catch(t){vf(t)}finally{s.dr(),this.VO(this.A2t),this.T2t=Do(this.E2t.ht.mC,(t=>t.Rt)),this.vEt=Do(this.E2t.nt.mC,(t=>"showing"===t.LE)),this.k2t=Do(this.E2t.rt.mC,(t=>t.Rt)),this.A2t.ht.bn(je.XR,this.x2t),this.A2t.nt.bn(je.XR,this.I2t),this.A2t.rt.bn(je.XR,this.R2t),this.A2t.bn(Zc.hB,this.S2t),this.E2t===s&&(this.E2t=void 0)}}NR(){var t;return this.T2t=void 0,this.vEt=void 0,this.k2t=void 0,this.S2t(),null==(t=this.w2t)||t.np(),this.Yo.Qo((()=>super.NR()))}async yn(){var t;null==(t=this.w2t)||t.np(),this.p2t.yn(),await this.d2t(),await this.Yo.yn(),await super.yn()}constructor(t,e){super(t),this.Yo=new dc,this.T2t=void 0,this.vEt=void 0,this.k2t=void 0,this.x2t=t=>{const e=t.Ht;q1(this.T2t,e)&&(e.Rt=!0)},this.I2t=t=>{const e=t.Ht;q1(this.vEt,e)&&(e.LE=Ui.Qn)},this.R2t=t=>{const e=t.Ht;q1(this.k2t,e)&&(e.Rt=!0)},this.S2t=()=>{this.A2t.ht.vn(je.XR,this.x2t),this.A2t.nt.vn(je.XR,this.I2t),this.A2t.rt.vn(je.XR,this.R2t)},this.A2t=t,this.kd.cast.strategy!==xS.DISABLED?this.p2t=new G1(this,t,this.kd.cast,e):this.p2t=new Z1,this.rq.YQ(this.p2t)}};function q1(t,e){return void 0!==t&&void 0!==e&&(t.gs===e.gs&&e.Ch===t.Ch)}r();var Y1=new class extends So{q1t(t){this.C2t=t}Y1t(){return this.C2t}j1t(){return this.P2t}g2t(){switch(this.D2t.getCastState()){case cast.framework.CastState.CONNECTED:return hh.CONNECTED;case cast.framework.CastState.CONNECTING:return hh.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return hh.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return hh.UNAVAILABLE}}async nQ(t,e){await p$(e),this.D2t=cast.framework.CastContext.getInstance(),this.D2t.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.KQ),this.D2t.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async e2t(){try{const t=await this.D2t.requestSession();if(t)throw t}catch(t){throw new m$(kn(t))}}s2t(t){var e;return null==(e=this.C2t)?void 0:e.onStart(t)}l2t(t){var e;return null==(e=this.C2t)?void 0:e.onStop(t)}r2t(t){var e;return null==(e=this.C2t)?void 0:e.onJoin(t)}c2t(t){var e;return null==(e=this.C2t)?void 0:e.onLeave(t)}f2t(t){this.D2t.endCurrentSession(t)}constructor(...t){super(...t),this.P2t=void 0,this.C2t=void 0,this.KQ=()=>{const t=this.g2t();this.P2t=t===hh.CONNECTED?new H0(this.D2t.getCurrentSession()):void 0,this._o(new q0(t))}}},K1=new class{get wa(){return this.eu||(this.eu=function(t){return{initialize(e){const i=t.nQ(IS(e));return i.catch(M),i},startSession(){const e=t.e2t();return e.catch(M),e},endSession(){t.N2t()}}}(this)),this.eu}async nQ(t){this.t2t||(this.t2t=this.M2t(t)),await this.t2t}async M2t(t){await this.K1t.nQ(t)}async e2t(){if(!this.t2t)throw new m("Chromecast must be initialized before starting a session");await this.t2t,this.K1t.j1t()||await this.K1t.e2t()}L2t(){this.K1t.f2t(!1)}N2t(){this.K1t.f2t(!0)}constructor(t){this.t2t=void 0,this.eu=void 0,this.K1t=t}}(Y1),j1={get chromecast(){return K1.wa}};kF((t=>new z1(t,Y1)),hu.Nnt),r(),r(),r(),r(),r(),r(),r();var Q1=class{B2t(t,e,i,s){t.tX.forEach((t=>{if(!this.O2t(t.F2t)){const n=t.V2t(e,i,s);n&&this.W2t(n)}}))}O2t(t){return this.U2t.get(t)}W2t(t){this.U2t.set(t.G2t,t),this.Z2t.set(t.G2t,t.H2t),this.X2t.ru(t.z2t)}Qnt(t){this.Z2t.has(t.G2t)||(this.Z2t.set(t.G2t,t),this.X2t.ru(t.z2t))}q2t(t){return this.Z2t.forEach(t)}Y2t(t){return this.U2t.forEach(t)}K2t(t){let e=!1;return this.U2t.forEach((i=>{e=i.K2t(t)||e})),e}async yn(){const t=[];this.U2t.forEach((e=>t.push(e.yn()))),this.Z2t.forEach((e=>t.push(e.yn()))),await Promise.all(t),this.U2t.clear(),this.Z2t.clear()}constructor(t){this.X2t=t,this.U2t=Vh(),this.Z2t=Vh()}};r();var Qh=class t extends $s{ka(){return new J1(this.rQt,this.Tb,this.zb,this.Cc)}static j2t(e){return new t(dt.GENERAL,e.Tb,e.hQt)}static Q2t(e,i){return new t(e.rQt,e.message,e.hQt,i)}constructor(t,e,i,s){super("J2t"),this.rQt=t,this.Tb=e,this.zb=i,this.Cc=s}},J1=class extends me{constructor(t,e,i,s){super("aderror"),this.problemType=t,this.message=e,this.errorCode=i,this.source=s}},$1=class extends lc{get $2t(){return this.t3t}get Vc(){let t=!1;return this.e3t((e=>{t=t||e.i3t})),t}get Znt(){const t=[];return this.e3t((e=>{const i=e.Znt;i.length&&t.push(...i)})),t}get Xnt(){let t=null;return this.e3t((e=>{null!=t||(t=e.Xnt)})),t}get znt(){const t=[];return this.e3t((e=>{t.push(...e.znt)})),t}get qnt(){const t=[];return this.e3t((e=>{t.push(...e.qnt)})),t}jnt(t){this.e3t((e=>{e.jnt(t)}))}get wa(){var t;return null!=(t=this.eu)?t:this.eu=Ve(this)}K6(t,e,i){try{this.s3t=i;const s=Ch.Vm.iX(t);if(s.F2t===ji.Dnt)return;const n=this.t3t.O2t(s.F2t);if(!n)throw new Ws(dt.ADBLOCK,void 0,"Ads could not be loaded.");e!==FF.Gnt&&this.k8||this.r3t.n3t(n),s.K6(t,e,n,this.s3t)}catch(e){0,this._o(Qh.Q2t(e,t.sources))}}zD(){this.e3t((t=>{t.zD()}))}Ynt(t){this.e3t((e=>{e.Ynt(t)}))}Qnt(t){this.t3t.Qnt(t)}Knt(t,e){return this.r3t.Knt(t,e)}o3t(t){this.t3t.Y2t((e=>{e.o3t(t)}))}K2t(t){return this.t3t.K2t(t)}e3t(t){return this.t3t.q2t(t)}RR(){this.t3t.Y2t((t=>t.RR()))}async nr(){this.k8=!1;const t=[];this.t3t.Y2t((e=>t.push(e.NR()))),await Promise.all(t)}async yn(){this.Ro(),await this.t3t.yn(),this.r3t.vn(ns.ho,this._st),this.vn("J2t",this.h3t)}constructor(t){super(),this.s3t=!1,this.k8=!1,this.eu=void 0,this.h3t=t=>{if(!this.s3t)return;if(t.zb===lo.VAST_NO_ADS_AFTER_WRAPPER||t.zb===lo.VAST_EMPTY_RESPONSE)return;const e=new iu(di.ADVERTISEMENT_ERROR,t.Tb),i=new Z(Ci.AD_BLOCKER_DETECTED,t.Tb+" Turn off your AdBlocker and try again.",e);this.r3t.uH(i)},this._st=()=>{this.k8=!0},this.r3t=t,this.t3t=new Q1(this),this.bn("J2t",this.h3t),t.bn(ns.ho,this._st)}};r(),r(),r();var ps=class extends Lc{get zc(){return this.Oc}get I$t(){return this.a3t}set I$t(t){this.a3t=t}get R$t(){return this.u3t}set R$t(t){this.u3t=t}set LOt(t){this.jQt=t}get LOt(){return this.jQt}get s$t(){return this.c3t}l3t(){this.d3t=!0}f3t(t){this.Oc.push(t),this.d3t=!1}_3t(t){_e(this.Oc,t)}get sR(){return this.d3t}constructor(t){super(),this.jQt=t,this.Oc=[],this.a3t=-1,this.u3t=-1,this.c3t=void 0,this.d3t=!1}},t2=class extends ps{get zQt(){return this.v3t}get znt(){return this.g3t}ir(t){void 0!==t.maxDuration&&(this.a3t=t.maxDuration),void 0!==t.customData&&(this.c3t=t.customData)}m3t(t){const e=this.Oc.indexOf(t);return e>=0&&e<this.Oc.length-1}f3t(t){super.f3t(t),this.g3t.push(t)}p3t(t){_e(this.g3t,t)}_3t(t){super._3t(t),_e(this.g3t,t)}constructor(t,e){super(e.timeOffset),this.g3t=[],this.v3t=t,this.ir(e)}};r(),r();var Ls=function(t){return t.mQt="linear",t.w3t="nonlinear",t.oE="unknown",t}({}),e2=function(t){return t.NONE="none",t.READY="ready",t}({}),Vs=class extends a1{y3t(t,e,i,s,n,r){this.jS=t,this.JA=e,this.$A=i,this.FA=s,this.dKt=n,this.ujt=r,this.b3t="ready"}get A3t(){return this.b3t}get lKt(){return this.dKt}get ct(){return this.FA}Hnt(){var t;return null!=(t=this.eu)?t:this.eu=this.ka()}get Ti(){return this.$A}get o(){return this.jS}get ajt(){return this.ujt}get ji(){return this.JA}get S3t(){return this.T3t}get DKt(){return this.NKt}get iKt(){return this.sKt}get GYt(){return this.sjt}get s$t(){return this.c3t}get k3t(){return this.E3t}X$t(){}K$t(){return""}Y$t(){return this.x3t}constructor(t,e){super(),this.T3t=e,this.jS=void 0,this.ujt=void 0,this.JA=void 0,this.$A=void 0,this.FA=void 0,this.sjt=[],this.dKt=[],this.b3t="none",this.c3t=void 0,this.E3t=!1,this.sd=t}};function qo(t){return{get adSystem(){return t.X$t()},get readyState(){return t.A3t},get adBreak(){return t.sd.Hnt()},get duration(){return t.ct},get companions(){return t.lKt.map((t=>t.wa))},get resourceURI(){return t.Y$t()},get clickThrough(){return t.DKt},get width(){return t.ji},get type(){return function(t){switch(t){case"linear":case"unknown":return"linear";case"nonlinear":return"nonlinear"}}(t.S3t)},get height(){return t.Ti},get id(){return t.o},get skipOffset(){return t.ajt},get integration(){return t.zQt},get creativeId(){return t.iKt},get universalAdIds(){return t.GYt},get customData(){return t.s$t},get isSlate(){return t.k3t}}}r();var i2=class{get SKt(){return this.TKt}get CKt(){return this.PKt}get I3t(){return this.R3t}get DKt(){return this.NKt}get Ti(){return this.$A}get qjt(){return this.x3t}get ji(){return this.JA}get wa(){var t;return null!=(t=this.eu)?t:this.eu=function(t){return{get adSlotId(){return t.SKt},get altText(){return t.CKt},get contentHTML(){return t.I3t},get clickThrough(){return t.DKt},get height(){return t.Ti},get resourceURI(){return t.qjt},get width(){return t.ji}}}(this)}C3t(t){if(t.DKt&&t.qjt)return;const e=function(t){try{return j$(t,"text/html")}catch(t){return}}(t.I3t);e&&(this.NKt=s2(e,"a","href"),this.x3t=s2(e,"img","src"))}constructor(t){var e;this.eu=void 0,this.NKt=void 0,this.x3t=void 0,this.TKt=t.SKt,this.JA=t.ji,this.$A=t.Ti,this.R3t=t.I3t,this.NKt=t.DKt,this.x3t=t.qjt,this.PKt=null!=(e=t.CKt)?e:"",this.C3t(t)}};function s2(t,e,i){const s=t.querySelector(e);return s&&s.getAttribute(i)||""}var n2=class extends Vs{get zQt(){return this.v3t}get P3t(){return this.D3t}set P3t(t){this.D3t=t}ka(){return qo(this)}ir(t){t.id&&(this.jS=t.id),void 0!==t.skipOffset&&(this.ujt=t.skipOffset),void 0!==t.width&&(this.JA=t.width),void 0!==t.height&&(this.$A=t.height),void 0!==t.duration&&(this.FA=t.duration),void 0!==t.readyState&&(this.b3t=function(t){return"ready"===t?e2.READY:e2.NONE}(t.readyState)),void 0!==t.resourceURI&&(this.x3t=t.resourceURI),void 0!==t.clickThrough&&(this.NKt=t.clickThrough),void 0!==t.companions&&(this.dKt=[...t.companions].map(r2)),void 0!==t.creativeId&&(this.sKt=t.creativeId),void 0!==t.universalAdIds&&(this.sjt=t.universalAdIds),void 0!==t.customData&&(this.c3t=t.customData)}constructor(t,e,i){super(i,function(t){return"linear"===t?Ls.mQt:"nonlinear"===t?Ls.w3t:Ls.oE}(e.type)),this.D3t=0,this.v3t=t,this.ir(e)}};function r2(t){const e={SKt:t.adSlotId,CKt:t.altText,I3t:t.contentHTML,Fk:void 0,DKt:t.clickThrough,Ti:t.height,qjt:t.resourceURI,ji:t.width};return new i2(e)}r();var Jo=class extends Ha{ka(){return new o2(this.trt.Hnt(),this.N3t)}get N3t(){return this.M3t}constructor(t,e){super("L3t",t),this.M3t=e}},o2=class extends Wa{constructor(t,e){super("adskip",t),this.playedPercentage=e}};r();var h2=class extends ws{ka(){return new a2(this.sd.Hnt())}constructor(t){super("B3t",t)}},a2=class extends Ss{constructor(t){super("updateadbreak",t)}};r();var u2=class extends ws{ka(){return new c2(this.sd.Hnt())}constructor(t){super("O3t",t)}},c2=class extends Ss{constructor(t){super("adbreakchange",t)}};r();var _s=class extends Ha{ka(){return new l2(this.trt.Hnt(),this.currentTime)}constructor(t,e){super("F3t",t),this.currentTime=e}},l2=class extends Wa{constructor(t,e){super("adfirstquartile",t),this.currentTime=e}};r();var oe=class extends Ha{ka(){return new d2(this.trt.Hnt(),this.currentTime)}constructor(t,e){super("V3t",t),this.currentTime=e}},d2=class extends Wa{constructor(t,e){super("admidpoint",t),this.currentTime=e}};r();var ks=class extends Ha{ka(){return new f2(this.trt.Hnt(),this.currentTime)}constructor(t,e){super("W3t",t),this.currentTime=e}},f2=class extends Wa{constructor(t,e){super("adthirdquartile",t),this.ad=t,this.currentTime=e}},_2=class{get zc(){return this.Oc}get D$t(){return this.s0t}get wa(){var t;return null!=(t=this.eu)?t:this.eu=function(t){return{get integration(){return t.zQt},get ads(){return t.zc.map((t=>t.Hnt()))},get adBreaks(){return t.D$t.map((t=>t.Hnt()))},createAd:(e,i)=>t.U3t(e,i?t.G3t(i):void 0).Hnt(),updateAd(e,i){t.Z3t(t.H3t(e),i)},updateAdProgress(e,i){const s=bi(Number(i),0,1);t.X3t(t.H3t(e),s)},beginAd(e){t.p3t(t.H3t(e))},endAd(e){t.z3t(t.H3t(e))},skipAd(e){t.IJt(t.H3t(e))},removeAd(e){t._3t(t.H3t(e))},createAdBreak:e=>t.q3t(e).Hnt(),updateAdBreak(e,i){t.Y3t(t.G3t(e),i)},removeAdBreak(e){t.K3t(t.G3t(e))},removeAllAds(){t.j3t()},error(e){t.Q3t(e)},fatalError(e,i){const s=i?Number(i):void 0;t.J3t(e,s)}}}(this)}get XN(){return this.I9}set XN(t){this.I9=t}get i3t(){return this.$3t.some((t=>t.S3t===Ls.mQt))}get G2t(){return this.zQt}get Znt(){return this.$3t}get Xnt(){var t;return null!=(t=this.i0t)?t:null}get znt(){return Ye(this.s0t,(t=>t.znt))}get qnt(){return this.s0t.filter((t=>!t.sR))}zD(){var t;if(0===this.$3t.length)return;const e=this.$3t[0];(null==(t=this.I9)?void 0:t.skipAd)?this.I9.skipAd(e.Hnt()):this.IJt(e)}Ynt(t){}jnt(t){}U3t(t,e){var i;const s=null!=e?e:this.t4t({timeOffset:null!=(i=t.timeOffset)?i:0}),n=new n2(this.zQt,t,s);return s.f3t(n),this.Oc.push(n),this.z2t._o(new Uu(n)),n}Z3t(t,e){t.ir(e),this.z2t._o(new Nr(t))}X3t(t,e){if(!fh(this.$3t,t))throw new m("Cannot update ad progress on a non-started ad");const i=t.P3t,s=_.max(i,e);t.P3t=s;const n=this.r3t.CI();i<.25&&s>=.25&&this.z2t._o(new _s(t,n)),i<.5&&s>=.5&&this.z2t._o(new oe(t,n)),i<.75&&s>=.75&&this.z2t._o(new ks(t,n))}p3t(t){fh(this.$3t,t)||(this.$3t.push(t),t.sd.p3t(t),this.e4t(t.sd),this.z2t._o(new Cn(t,this.r3t.CI())))}IJt(t){if(!fh(this.$3t,t))return;const e=t.sd.m3t(t);this.z2t._o(new Jo(t,t.P3t)),this.i4t(t,e)}z3t(t){if(!fh(this.$3t,t))return;const e=t.sd.m3t(t);this.z2t._o(new Qn(t,this.r3t.CI())),this.i4t(t,e)}_3t(t){if(!fh(this.Oc,t))return;const e=t.sd.m3t(t);_e(this.Oc,t),t.sd._3t(t),this.z2t._o(new u2(t.sd)),this.i4t(t,e)}q3t(t){const e=new t2(this.zQt,t);return this.s0t.push(e),this.z2t._o(new UF(e)),e}Y3t(t,e){t.ir(e),this.z2t._o(new h2(t))}K3t(t){if(fh(this.s0t,t)){for(const e of t.zc.slice())this._3t(e);_e(this.s0t,t),this.z2t._o(new Pu(t))}}j3t(){for(const t of this.s0t.slice())this.K3t(t)}Q3t(t){this.z2t._o(new Qh(dt.GENERAL,t.message))}J3t(t,e){const i=new Z(null!=e?e:Ci.AD_ERROR,t.message,t);this.r3t.uH(i)}s4t(t){return Do(this.s0t,(e=>e.LOt===t))}t4t(t){var e;return null!=(e=this.s4t(t.timeOffset))?e:this.q3t(t)}i4t(t,e){_e(this.$3t,t);const i=t.sd;0!==this.$3t.length||this.i0t!==i||e||(i.l3t(),this.e4t(void 0))}e4t(t){this.i0t!==t&&(void 0!==this.i0t&&this.z2t._o(new $h(this.i0t)),this.i0t=t,void 0!==t&&this.z2t._o(new XF(t)))}H3t(t){const e=Do(this.Oc,(e=>e.Hnt()===t));if(void 0===e)throw new m('Invalid ad for integration "'+this.zQt+'"');return e}G3t(t){const e=Do(this.s0t,(e=>e.Hnt()===t));if(void 0===e)throw new m('Invalid ad break for integration "'+this.zQt+'"');return e}async Ca(t,e){var i;if(Io(e),null==(i=this.I9)?void 0:i.setSource){let e=await Promise.resolve(this.I9.setSource(t));return BC(e)&&(e=t),nc(e,this.r3t.kd)}return t}async n4t(){var t;(null==(t=this.I9)?void 0:t.resetSource)?await Promise.resolve(this.I9.resetSource()):this.j3t()}async yn(){var t;(null==(t=this.I9)?void 0:t.destroy)&&await Promise.resolve(this.I9.destroy()).catch(M),this.j3t(),this.e4t(void 0),this.I9=void 0,this.z2t.yn()}constructor(t,e){this.z2t=new lc,this.Oc=[],this.s0t=[],this.$3t=[],this.zQt=t,this.r3t=e}};r();var v2=class{destroy(){this.removeAdListeners()}get player(){return this.na}set player(t){this.na&&this.removeAdListeners(),this.na=t,this.addAdListeners()}get inAdBreak(){return this.r4t}addAdListeners(){var t,e;null==(t=this.na.zc)||t.bn("nrt",this.Td),null==(e=this.na.zc)||e.bn("irt",this.Md)}removeAdListeners(){var t,e;null==(t=this.na.zc)||t.vn("nrt",this.Td),null==(e=this.na.zc)||e.vn("irt",this.Md)}constructor(t){this.w8=void 0,this.r4t=!1,this.Td=t=>{1!==this.na.tR&&(this.w8=this.na.tR,this.na.tR=1),this.r4t=!0},this.Md=t=>{this.r4t=!1,void 0!==this.w8&&(this.na.tR=this.w8,this.w8=void 0)},this.na=t,this.addAdListeners()}},g2=class extends X1{Snt(){return this.o4t}get h4t(){return this.a4t}RR(){this.A2t.RR(),this.o4t.RR()}DR(){void 0===this.bZ?(void 0!==this.u4t&&this.c4t(this.u4t),super.DR()):this._o(new Pi(this.bZ))}async Ca(t,e){Io(e);let i=t;if(i)for(const t of this.l4t)i=await t.Ca(i,e);if(await super.Ca(i,e),Io(e),null==i?void 0:i.ads){const t=Boolean(i.blockContentIfAdError);this.o4t.o3t(i.playAdsAfterTime);for(const e of i.ads)this.o4t.K6(e,FF.Gnt,t)}}async NR(){this.bZ=void 0,this.QH=void 0,await this.o4t.nr(),this.d2t(),await super.NR();for(const t of this.l4t)await t.n4t()}c4t(t){this.d4t=this.na.tR;const e=this.na.yR,i=this.na.qI;t.AR(e),t.KI(i),this.a4t=t,this.u4t=void 0,this.VO(t)}n3t(t){void 0===this.a4t&&(this.u4t=t)}d2t(){this.u4t=void 0,void 0!==this.a4t&&(this.A2t.tR=this.d4t,this.A2t.yR=this.yR,this.A2t.qI=this.qI,this.VO(this.A2t),this.a4t=void 0)}BI(){var t;return null!=(t=this.QH)?t:super.BI()}FI(){var t;return null!=(t=this.bZ)?t:super.FI()}uH(t){void 0===this.FI()&&(this.bZ=t,this.QH=Zs(t),this._o(new Pi(t)))}GR(t){return void 0===this.a4t&&this.o4t.K2t(t)}Knt(t,e){try{const i=new _2(t,this);i.XN=e(i.wa),this.o4t.Qnt(i),this.l4t.push(i),t!==vu.UPLYNK&&(this.f4t=new v2(this))}catch(e){this.o4t._o(new Qh(dt.GENERAL,'Error while constructing ad integration "'+t+'": '+e+'"'))}}iR(t){var e;(null==(e=this.f4t)?void 0:e.inAdBreak)||super.iR(t)}async yn(){var t;for(const t of this.l4t)await t.yn().catch(M);await this.o4t.yn(),this.d2t(),null==(t=this.f4t)||t.destroy(),this.f4t=void 0,await super.yn()}constructor(t,e){super(t),this.l4t=[],this.bZ=void 0,this.QH=void 0,this.d4t=1,this.A2t=t,this.o4t=new $1(this),this.o4t.$2t.B2t(e,t,this,t.kd)}};kF((t=>new g2(t,Ch.Vm)),hu.Cnt),r(),r(),r();var m2=Ya.su&&Ya.nm<12,p2=class extends gc{get RI(){return this.CI()}set RI(t){this.DI(t)}dnt(){return this.na.dnt()}get ct(){return this.jd()}get VI(){return this.OO}get UI(){return this.BO}get cR(){return this.lR()}get SR(){return this.xZ}get z2t(){return this._4t}get ht(){return this.LO}get i3t(){return this.r3t.h4t===this}TI(){return ee.WB().ks()}EI(){}xI(t){}eR(){return 1}iR(t){}nR(){return new ee([0,this.RI]).ks()}fR(){return!1}_R(){return this.Hl}mR(){return this.FO}cs(){return this.xR().cs}xR(){return this.ea}Aa(){}async yn(){this.Ro(),this.LO.yn(),this.FO.yn(),this.Hl.yn(),this._4t.yn(),this.na.vn(ns.Cy,this.Ds)}v4t(){m2&&this.g4t(),this.i3t||this.r3t.c4t(this)}d2t(){this.i3t&&(m2&&this.m4t(),Ya.Cm&&this.we.querySelectorAll("video[src]").forEach((t=>{t.src=""})),As.Ys.Pp&&this.na.WR(),this.r3t.d2t())}g4t(){this.p4t||(s.addEventListener("blur",this.w4t),s.addEventListener("focus",this.y4t),this.p4t=!0)}m4t(){s.removeEventListener("blur",this.w4t),s.removeEventListener("focus",this.y4t),this.p4t=!1}b4t(){requestAnimationFrame((()=>this.na.be()))}constructor(t,e){super(t,!0),this.r3t=e,this.p4t=!1,this.FO=new an,this.LO=new an,this.Hl=new ca,this.OO=new AS,this.BO=new wk,this._4t=new lc,this.ea=new ot,this.xZ=new LR,this.w4t=()=>{this.na.ge()},this.y4t=()=>{this.b4t()},this.na.bn(ns.Cy,this.Ds)}};r(),r();var w2=0,y2="theoplayer-wrapper",b2=class t{get A4t(){return this.S4t}get T4t(){return this.k4t}get E4t(){return 1===this.k4t.length&&C0(this.k4t[0].sources.type)}get x4t(){return this.I4t}R4t(t){const e=this.C4t===t.timeOffset;return!this.P4t&&e}get D4t(){return this.N4t}get M4t(){return M0(this.L4t)&&!this.P4t}get C4t(){return this.L4t}get od(){return this.B4t}O4t(){if(S(this.B4t)){let t=this.C4t;if(void 0===t)return void(this.B4t=0);if("string"==typeof t&&M0(t)){const e=this.na.jd();S(e)||e===1/0||(t=P$(t)*e)}S(t)||(this.B4t=t)}}get F4t(){return this.V4t}set F4t(t){this.V4t=t}get W4t(){return this.U4t}set W4t(t){this.U4t=t,this.G4t=!1}get Z4t(){return this.H4t}X4t(t){this.H4t.push(t)}z4t(){if(!this.P4t){let t,e,i=this.S4t===FF.Gnt&&void 0===this.q4t&&1===this.k4t.length;const s=this.k4t[0];if(!i&&1===this.k4t.length){const t=As.Bh(s.sources.src).searchParams.get("output");t&&t.toLowerCase().indexOf("vmap")>-1&&(i=!0,void 0!==this.q4t&&vl("Do not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included."))}if(C0(s.sources.type)||i)t=s.sources.src;else{if(S(this.na.jd())&&"end"===this.Y4t())return;e=this.K4t()}let n=this.na.jd();(S(n)||n===1/0)&&(n=-3),this.P4t={j4t:this.na.we.offsetWidth,Q4t:this.na.we.offsetHeight,J4t:this.na.we.offsetWidth,$4t:this.na.we.offsetHeight,t5t:this.nnt,e5t:this.VH,i5t:t,s5t:e,n5t:s.omidAccessModeRules,r5t:n}}return this.P4t}K4t(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.k4t.map(((t,e)=>this.o5t(t.sources,e))).join("\n")+"</vmap:VMAP>"}o5t(t,e){const i=this.Y4t(),s=t.src;return'<vmap:AdBreak timeOffset="'+i+'" breakType="linear,nonlinear" breakId="theoplayer-break-'+this.OC+"-"+e+'"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:VASTAdData><VAST version="3.0"><Ad id="'+y2+"-"+this.OC+"-"+e+'"><Wrapper allowMultipleAds="true" followAdditionalWrappers="true"><VASTAdTagURI><![CDATA['+s+"]]></VASTAdTagURI></Wrapper></Ad></VAST></vmap:VASTAdData></vmap:AdSource></vmap:AdBreak>"}Y4t(){if(0===this.C4t)return"start";if(this.C4t===1/0)return"end";const t=this.C4t;if("string"==typeof t&&M0(t)){const e=P$(t)*this.na.jd();return va.ZQt(e)}return va.ZQt(this.C4t||0)}h5t(t){this.k4t.push(t)}a5t(t){const e=y2+"-"+this.OC+"-";for(const i of t)if(Cl(i,e)){const t=Number(i.slice(e.length));if(!S(t)&&t>=0&&t<this.k4t.length)return t}return-1}static u5t(t){if(void 0!==t)return-1===t?1/0:t}c5t(){this.N4t=!0}get KO(){return this.nnt}set KO(t){this.nnt=t}get qI(){return this.VH}set qI(t){this.VH=t}constructor(e,i,s,n){this.S4t=i,this.na=s,this.I4t=n,this.B4t=NaN,this.V4t=!1,this.U4t=!1,this.N4t=!1,this.H4t=[],this.nnt=!1,this.VH=!1,this.k4t=[],this.OC=++w2,this.q4t=e.timeOffset,this.L4t=t.u5t(this.q4t),this.O4t(),this.k4t.push(e)}};r();var A2=class{get l5t(){return this.d5t.l5t}get f5t(){return this.d5t.f5t}get znt(){return this.d5t.znt}get t(){return this.d5t.t}o3t(t){this._5t=t}v5t(t){return!(this.l5t&&!this.l5t.D4t&&"nonlinear"!==this.f5t.S3t)||this.l5t.od>t.od&&this.l5t.od!==t.od}g5t(t){if(t.length)return t.sort(((t,e)=>t.od-e.od))[0]}m5t(){if(this.znt.length)return this.g5t(this.p5t(this.t.CI()))}w5t(){if(!(void 0!==this._5t&&this._5t>=0))return this.znt.filter((t=>!t.F4t&&0===t.od&&t!==this.l5t))[0]}p5t(t){if(!this.y5t&&(this.y5t=!this.znt.some((t=>S(t.od))),!this.y5t))return[];const e=this.znt.filter((e=>!e.F4t&&(e.E4t||!S(e.od)&&t<=e.od)));return void 0===this._5t?e:e.filter((t=>t.E4t||void 0===t.C4t||t.od>this._5t))}constructor(t){this.y5t=!1,this.d5t=t,this._5t=void 0}},S2=function(t){return t[t.b5t=0]="b5t",t[t.A5t=1]="A5t",t[t.S5t=2]="S5t",t}({}),T2=class{RR(){this.mo=!0,this.T5t&&this.k5t()}E5t(t,e){this.x5t(t,e);const i=Do(this.znt,(e=>e.R4t(t)));if(i)i.h5t(t);else{var s;const i=new b2(t,e,this.na,null==(s=t.replaceContent)||s);this.g3t.push(i),2===this.I5t&&this.R5t.q3t(i.od,i,i.C4t),this.C5t(e,i)}}get f5t(){return this.P5t}get znt(){return this.g3t}get t(){return this.na}get xXt(){return Boolean(this.ipt)}get I5t(){return this.D5t}N5t(){if(_e(this.znt,this.l5t),this.l5t){for(const t of this.l5t.Z4t)this.R5t.M5t();this.l5t=void 0}}L5t(){for(const t of this.g3t)for(const e of t.Z4t)this.R5t.B5t(e,!0);En(this.g3t)}async O5t(t){this.N5t(),this.F5t=!0,this.l5t=t,this.V5t=t.od,this.ipt=this.W5t(t),await this.ipt,this.ipt=void 0}async W5t(t){await this.U5t(t);const e=t.z4t();if(!e)return this.F5t=!1,void(this.l5t=void 0);const i=this.P5t.G5t(e);t.F4t=!0;try{await i,t.A4t===FF.Unt&&this.P5t.Z5t()}catch(t){0,this.l5t=void 0,await this.k5t()}}async U5t(t){if(t.qI=this.r3t.qI,!this.r3t.KO)return void(t.KO=!1);switch(await this.ont.ij(this.r3t.qI)){case"all":case"muted":t.KO=!0;break;case"none":t.KO=!1}}H5t(){var t;return null!=(t=this.X5t.w5t())?t:this.X5t.m5t()}async k5t(){if(this.l5t&&!this.l5t.D4t)return this.ipt;const t=this.H5t();t&&await this.O5t(t)}get l5t(){return this.z5t}set l5t(t){this.z5t=t}get F5t(){return this.q5t}set F5t(t){this.q5t=t}nr(){this.N5t(),En(this.g3t),this.V5t=0,this.l5t=void 0,this.ipt=void 0,this.F5t=!1}W4t(){this.F5t=!1,this.l5t&&(this.l5t.W4t=!0)}async C5t(t,e){t===FF.Unt&&this.mo&&this.X5t.v5t(e)&&!this.xXt&&"linear"!==this.P5t.S3t&&(!this.l5t||this.l5t&&this.l5t.F4t)&&(await Promise.resolve(),await this.O5t(e))}c5t(){this.l5t&&this.l5t.c5t()}get Y5t(){if(this.xXt||this.F5t)return!1;if(this.l5t&&!this.l5t.D4t)return!1;return!!this.g3t.filter((t=>this.l5t!==t)).length&&Boolean(this.H5t())}async K5t(){if(!this.Y5t)return void 0;const t=this.H5t();t&&await this.O5t(t)}x5t(t,e){const i=t.sources.type,s=e===FF.Gnt&&void 0===t.timeOffset,n=C0(i)||s?1:2;n!==this.D5t&&(this.D5t=n,this.L5t(),this.P5t.C$t&&!this.xXt&&"linear"!==this.P5t.S3t&&(this.P5t.C$t.Km(),this.l5t=void 0,this.ipt=void 0),this.V5t=0,this.T5t=!0)}o3t(t){this.X5t.o3t(t)}yn(){this.na.vn(ns.Dy,this.kz)}constructor(t,e,i,s,n){this.D5t=0,this.ipt=void 0,this.q5t=!1,this.kz=()=>{const t=this.g3t.filter((t=>t.M4t));for(const e of t){e.O4t();const t=e.C4t;this.R5t.j5t(t,e.od)}this.mo&&this.Y5t&&this.k5t()},this.g3t=[],this.P5t=t,this.mo=!1,this.T5t=!1,this.na=e,this.r3t=i,this.l5t=void 0,this.V5t=0,this.X5t=new A2(this),this.ont=s,this.R5t=n,this.na.bn(ns.Dy,this.kz)}};r(),r();var Qe=function(t){return t.Q5t="contentResumeRequested",t.J5t="contentPauseRequested",t.$5t="click",t.Dy="durationChange",t.t6t="expandedChanged",t.e6t="start",t.i6t="impression",t.rX="pause",t.s6t="resume",t.n6t="adProgress",t.r6t="adBuffering",t.o6t="firstQuartile",t.Rjt="midpoint",t.h6t="thirdQuartile",t.Cjt="complete",t.a6t="userClose",t.u6t="linearChanged",t.c6t="loaded",t.l6t="adCanPlay",t.d6t="adMetadata",t.f6t="adBreakReady",t._6t="interaction",t.v6t="allAdsCompleted",t.g6t="skip",t.m6t="skippableStateChanged",t.p6t="log",t.w6t="viewableImpression",t.y6t="volumeChange",t.b6t="mute",t}({});r();var k2=function(t){return t.A6t="adError",t}({});r();var _n=function(t){return t[t.S6t=-1]="S6t",t[t.T6t=-1]="T6t",t[t.k6t=-1]="k6t",t[t.E6t=101]="E6t",t[t.x6t=102]="x6t",t[t.I6t=200]="I6t",t[t.R6t=201]="R6t",t[t.C6t=202]="C6t",t[t.P6t=300]="P6t",t[t.D6t=301]="D6t",t[t.N6t=302]="N6t",t[t.M6t=303]="M6t",t[t.L6t=400]="L6t",t[t.B6t=402]="B6t",t[t.O6t=403]="O6t",t[t.F6t=405]="F6t",t[t.V6t=500]="V6t",t[t.W6t=501]="W6t",t[t.U6t=-1]="U6t",t[t.G6t=503]="G6t",t[t.Z6t=602]="Z6t",t[t.H6t=900]="H6t",t[t.X6t=901]="X6t",t[t.z6t=1005]="z6t",t[t.q6t=1007]="q6t",t[t.Y6t=1009]="Y6t",t[t.K6t=1010]="K6t",t[t.j6t=1011]="j6t",t[t.Q6t=1012]="Q6t",t[t.J6t=1013]="J6t",t[t.$6t=1020]="$6t",t[t.t9t=1021]="t9t",t[t.e9t=1101]="e9t",t[t.i9t=1204]="i9t",t[t.s9t=1205]="s9t",t[t.n9t=1300]="n9t",t[t.r9t=-1]="r9t",t[t.o9t=-1]="o9t",t[t.h9t=-1]="h9t",t[t.a9t=-1]="a9t",t}({}),E2=function(t){return t.u9t="adLoadError",t.c9t="adPlayError",t}({});function x2(t,e){if(t===Qe.n6t){const t=e;return{l9t:t.adBreakDuration,d9t:t.adPosition,RI:t.currentTime,ct:t.duration,f9t:t.totalAds}}return e}function I2(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return E2.u9t;case google.ima.AdError.Type.AD_PLAY:return E2.c9t}}function R2(t){return Vt(t)&&Ad(t.getVastErrorCode)}function C2(t){const e=t.getInnerError(),i=e&&R2(e)?C2(e):void 0;return{Tb:t.getMessage(),hQt:t.getErrorCode(),_9t:t.getVastErrorCode(),zw:I2(t.getType()),v9t:i}}function P2(t){if(ol(t))return t}r(),r();var D2=class extends So{g9t(t){this.P5t._o(t)}m9t(t){this.P$t=t,this.P$t.bn(k2.A6t,this.p9t),this.P$t.bn(Qe.J5t,this.w9t),this.P$t.bn(Qe.Q5t,this.y9t),this.P$t.bn(Qe.v6t,this.b9t),this.P$t.bn(Qe.e6t,this.A9t),this.P$t.bn(Qe.Cjt,this.S9t),this.P$t.bn(Qe.g6t,this.T9t),this.P$t.bn(Qe.a6t,this.k9t),this.P$t.bn(Qe.$5t,this.E9t),this.P$t.bn(Qe.l6t,this.x9t),this.P$t.bn(Qe.rX,(()=>{this.P5t.JI||(this.P5t.I9t(!0),this.P5t._o(new nl(this.P5t.RI))),this.R9t(!0)})),this.P$t.bn(Qe.s6t,(()=>{this.P5t.JI&&(this.P5t.I9t(!1),this.P5t._o(new he(this.P5t.RI)))})),this.P$t.bn(Qe.b6t,(()=>{const e=t.bR();e>=0&&this.C9t(e)})),this.P$t.bn(Qe.y6t,(()=>{const e=t.bR();e>=0&&this.C9t(e)})),this.P$t.bn(Qe.d6t,(t=>{this.D9t.P9t(t.type)})),this.P$t.bn(Qe.Dy,(t=>{t.trt&&this.N9t(t.trt.ct)})),this.P$t.bn(Qe.p6t,(async t=>{const e=t.M9t.adError,i=R2(e)?C2(e):void 0;i&&(this.L9t(i)?await this.B9t(t):this.O9t(i)?await this.F9t(i):this.V9t(i)&&this.W9t(i))})),this.P$t.bn(Qe.c6t,(t=>{if(t.trt&&(this.P5t.W4t(),this.D9t.U9t(t.trt),this.G9t=0,t.trt.Z9t)){var e;const t=this.P5t.aR,i=Wt.TO;this.P5t.m5(i);const s=this.P5t.RI,n=this.P5t.aR;n!==t&&this.g9t(new $t(s,n)),null==(e=this.P$t)||e.AR(this.P5t.H9t()),this.g9t(new vo(s,i))}})),this.P$t.bn([Qe.r6t,Qe.i6t,Qe.o6t,Qe.Rjt,Qe.h6t],(t=>{t.trt&&this.D9t.X9t(t.trt,t.type,this.P5t.RI)})),this.P$t.bn(Qe.o6t,this.z9t),this.P$t.bn(Qe.n6t,this.q9t)}async switchToPlayerIfNoNextAd(){if(this.P$t){const t=this.P$t.Y9t();t&&this.K9t(t)||(this.P5t.Y5t()?await this.P5t.K5t():(this.P5t.j9t(),this.na.JI&&!this.na.MI&&this.na.DR()))}else if(this.P5t.Y5t())await this.P5t.K5t();else{const t=this.P5t.JI;this.P5t.j9t(),t||this.na.DR()}}K9t(t){const e=t.Q9t,i=null==e?void 0:e.f9t;return(null==e?void 0:e.d9t)!==i}dw(){this.P5t.Ec&&(p(this.P5t.Ec),this.P5t.Ec=null)}V9t(t){return t.zw===E2.u9t}O9t(t){return t.zw===E2.c9t}L9t(t){return t.hQt===_n.Y6t}async F9t(t){var e;(this.W9t(t),this.J9t(t))&&(this.P5t.$9t.F5t=!1,null==(e=this.P5t.$9t.l5t)||e.c5t(),await this.switchToPlayerIfNoNextAd())}J9t(t){var e;if(N2(t))return!0;if(this.P5t.lrt)return!1;const i=[_n.L6t,_n.X6t,_n.t9t,_n.s9t];return!(fh(i,t.hQt)||fh(i,null==(e=t.v9t)?void 0:e.hQt))}W9t(t){this.P5t.Q3t(t)}async t8t(){this.D9t.M5t(),this.P5t.c5t(),"nonlinear"===this.P5t.S3t&&(this.D9t.e8t(-1,!1),this.P5t.i8t(void 0)),"nonlinear"!==this.P5t.S3t&&"none"!==this.P5t.S3t||this.P5t.Y5t()&&await this.P5t.K5t(),this.P5t.s8t(),this.P5t.i3t?this.P5t.d2t():this.n8t()&&this.na._o(new ss(this.na.CI()))}n8t(){return this.P5t.r8t&&!this.P5t.o8t&&this.na.MI}setCountdownTimer(){this.dw(),this.P5t.Ec=v((()=>this.R9t()),250)}async B9t(t){void 0!==t.trt&&(this.P5t.$9t.F5t=!1,this.P5t.c5t(),this.P5t.Y5t()?await this.P5t.K5t():this.P5t.I9t(!0))}N9t(t){this.P5t.ct!==t&&t>=0&&(this.P5t.q4(t),this.g9t(new yn(this.P5t.ct)))}C9t(t){this.P5t.H9t()!==t&&(0===t?this.P5t.h8t(t,!0,!1):this.P5t.h8t(t,!1,!1))}async a8t(){this.P5t.u8t&&void 0!==this.na.BI()&&(this.c8t=new Fi,await Ts(this.na.Ca(this.na.iu(),this.c8t.ep),this.c8t),this.l8t&&this.na.DI(this.l8t),this.l8t=void 0)}R9t(t){if(this.P$t){const t=this.P$t.d8t();t>this.P5t.ct&&this.N9t(_.round(t))}const e=this.P5t.RI;(t||!this.P5t.JI&&e!==this.P5t.f8t)&&(this.P5t._o(new rl(e,void 0)),this.P5t.f8t=e)}nr(){this.c8t&&(this.c8t.np(),this.c8t=void 0),this._8t=!1,this.G9t=0}yn(){this.nr(),this.Ro()}constructor(t,e,i){super(),this.P5t=t,this.na=e,this.D9t=i,this._8t=!1,this.c8t=void 0,this.l8t=void 0,this.G9t=0,this.z9t=t=>{if(!t.trt||!t.trt.Q9t)return;const e=t.trt.Q9t;this.D9t.Y3t(e.LOt,e.f9t,e.I$t)},this.q9t=t=>{var e,i,s;if(this.G9t>=5)return;this.G9t++;const n=t.M9t;if(!function(t){return Vt(t)&&void 0!==t.l9t&&void 0!==t.f9t}(n))return;const r=null==(s=this.P$t)||null==(i=s.Y9t())||null==(e=i.Q9t)?void 0:e.LOt;void 0!==r&&this.D9t.Y3t(r,n.f9t,n.l9t)},this.p9t=async t=>{t.M9t.v8t&&await this.F9t(t.M9t.v8t)},this.b9t=async()=>{this._8t=!0,this.P5t.c5t(),await this.y9t()},this.A9t=t=>{if(!t.trt)return;const e=t.trt;this.P5t.i8t(e),this.P5t.ge(),this.P5t.g8t(),this.P5t.m8t=!0,this.D9t.p8t(e);const i=e.ct;if(this.N9t(i),e.Z9t){const t=this.P5t.RI,e=this.P5t.aR;this.P5t.m5(Wt.EO),this.g9t(new uo(t,e)),this.g9t(new rt(t,e)),this.g9t(new $i(t,e)),this.P5t.JI||this.g9t(new Xr(this.P5t.RI)),this.setCountdownTimer(),this.R9t(!0)}else this.P5t.d2t(),this.na.ge(),this.P5t.JI||this.na.DR()},this.S9t=t=>{var e;if(!t.trt)return;const i=t.trt;if(this.dw(),this.D9t.e8t(this.P5t.ct,i.Z9t),this.P5t.aR!==Wt.TO){const t=Wt.TO;this.P5t.m5(t);const e=this.P5t.RI;this.g9t(new $t(e,t))}this.N9t(NaN),this.P5t.m8t=!1,null==(e=this.P$t)||e.AR(this.P5t.H9t())},this.T9t=t=>{t.trt&&(this.S9t(t),this.D9t.T9t(t.trt,this.P5t.RI,this.P5t.ct))},this.k9t=t=>{t.trt&&(this.D9t.e8t(-1,t.trt.Z9t),this.P5t.c5t(),!t.trt.Z9t&&this.P5t.Y5t()&&this.P5t.K5t())},this.E9t=t=>{t.trt&&(t.trt.Z9t?this.P5t.PR():this.na.PR())},this.x9t=()=>{var t;(this.P5t.m8t=!0,this.P5t.w8t)&&(null==(t=this.P$t)||t.PR(),this.P5t.w8t=!1)},this.w9t=t=>{var e;if(!t.trt)return;this.P5t.u8t&&(this.l8t=this.na.CI(),this.na.FR(),this.na.ER=!0),this.P5t.y8t=!0;const i=t.trt;this.D9t.Td(i);const s=i.ct;this.P5t.i8t(i),this.N9t(s),this.P5t.I9t(!1),this.P5t.ge(),this.P5t.v4t(),this.P5t.u8t||this.na.be(),this.na.PR(),this.P5t.b8t(i);0===(null==(e=i.Q9t)?void 0:e.LOt)||this.P5t._o(new Pa(this.P5t.RI))},this.y9t=async t=>{const e=null==t?void 0:t.trt;this.P5t.y8t=!1,"linear"===this.P5t.S3t&&this.D9t.Md(),e&&e.ct>=0&&this.N9t(e.ct),this.na.jd()===1/0&&this.P5t.A8t(),this.P5t.m8t=!1,this._8t&&await this.t8t(),this.P5t.I9t(!0);try{await this.a8t()}catch(t){return void(Se(t)||this._o(new PJ(t)))}if(this.P5t.d2t(),this.P5t.be(),this.na.MI||this.na.DR(),e&&this.P5t.i8t(e),this.P5t.r8t){if(this.P5t.u8t){var i;const t=this.na.IR(),e=null==(i=this.na.bt)?void 0:i.src;t&&e&&(t.src=e)}this.P5t.o8t=!0}this.na.ER=!1,this.P5t.Y5t()&&await this.P5t.K5t()}}};function N2(t){var e,i;return t._9t===_n.M6t||(null==(e=t.v9t)?void 0:e._9t)===_n.M6t||t.hQt===_n.Y6t||(null==(i=t.v9t)?void 0:i.hQt)===_n.Y6t}r(),r();var M2=class extends ps{get zQt(){return ji.Q$t}constructor(t,e,i){super(t),this.S8t=e,this.T8t=i}};r(),r(),r();var L2=class extends Vs{set k8t(t){this.E8t=t}get k8t(){return this.E8t}get zQt(){return ji.Kh}X$t(){var t;return null==(t=this.x8t)?void 0:t.PYt}get I8t(){var t;return null==(t=this.x8t)?void 0:t.bKt}get iKt(){var t;return null==(t=this.x8t)?void 0:t.iKt}get QN(){var t;return null==(t=this.x8t)?void 0:t.QN}get NZ(){var t;return null==(t=this.x8t)?void 0:t.NZ}get R8t(){var t,e;return null!=(e=null==(t=this.x8t)?void 0:t.R8t)?e:[]}get C8t(){var t,e;return null!=(e=null==(t=this.x8t)?void 0:t.C8t)?e:[]}get P8t(){var t,e;return null!=(e=null==(t=this.x8t)?void 0:t.P8t)?e:[]}ka(){return function(t,e){return Qr(t,{bitrate:0,contentType:void 0,mediaUrl:void 0,traffickingParameters:void 0,traffickingParametersString:void 0,universalAdIds:[],get description(){return e.QN},get apiFramework(){return e.I8t},get creativeId(){return e.iKt},get title(){return e.NZ},get wrapperAdIds(){return e.R8t},get wrapperAdSystems(){return e.C8t},get wrapperCreativeIds(){return e.P8t}})}(qo(this),this)}D8t(t){this.x8t=t;const e=B2(t);this.y3t(t.jKt,t.N8t,t.M8t,t.ct,e,-1)}constructor(t,e){super(t,e),this.E8t=0,this.x8t=void 0}};function B2(t){return t.WYt.map((t=>new i2(t)))}var O2=class extends Vs{ka(){return function(t,e){return Qr(t,{get adSystem(){return e.X$t()},get apiFramework(){return e.I8t},get bitrate(){return e.L8t},get contentType(){return e.Fk},get creativeId(){return e.iKt},get description(){return e.QN},get mediaUrl(){return e.ljt},get title(){return e.NZ},get traffickingParameters(){return e.B8t},get traffickingParametersString(){return e.O8t},get wrapperAdIds(){return e.R8t},get wrapperAdSystems(){return e.C8t},get wrapperCreativeIds(){return e.P8t},get universalAdIds(){return e.GYt}})}(qo(this),this)}D8t(t){this.x8t=t,this.y3t(t.jKt,t.N8t,t.M8t,t.ct,B2(t),t.F8t),this.T3t=t.Z9t?Ls.mQt:Ls.w3t}get zQt(){return ji.Q$t}X$t(){return this.x8t?F2(this.x8t.PYt):void 0}get I8t(){return this.x8t?F2(this.x8t.bKt):void 0}get L8t(){return this.x8t?this.x8t.V8t:0}get Fk(){return this.x8t?F2(this.x8t.Fk):void 0}get iKt(){return this.x8t?F2(this.x8t.iKt):void 0}get W8t(){return this.x8t?F2(this.x8t.W8t):void 0}get QN(){var t;return null==(t=this.x8t)?void 0:t.QN}get ljt(){var t;const e=null==(t=this.x8t)?void 0:t.ljt;return ol(e)?e:this.djt}set ljt(t){this.djt=t}get NZ(){var t;return null==(t=this.x8t)?void 0:t.NZ}get B8t(){return this.x8t?F2(this.x8t.B8t):void 0}get O8t(){return this.x8t?F2(this.x8t.O8t):void 0}get R8t(){var t,e;return null!=(e=null==(t=this.x8t)?void 0:t.R8t)?e:[]}get C8t(){var t,e;return null!=(e=null==(t=this.x8t)?void 0:t.C8t)?e:[]}get P8t(){var t,e;return null!=(e=null==(t=this.x8t)?void 0:t.P8t)?e:[]}get GYt(){var t,e;return null!=(e=null==(t=this.x8t)?void 0:t.GYt.map((t=>({adIdRegistry:t.U8t,adIdValue:t.G8t}))))?e:[]}constructor(t){super(t,Ls.oE),this.x8t=void 0,this.djt=void 0}};function F2(t){return null===t?void 0:t}r(),r();var V2=class{get z2t(){return this.D9t.z2t}get G2t(){return this.Z8t}get i3t(){return this.D9t.i3t}get Xnt(){var t;return null!=(t=this.D9t.Xnt)?t:null}get Znt(){const t=this.D9t.H8t;return t?[t]:[]}get znt(){return this.D9t.znt}get qnt(){return this.D9t.qnt}jnt(t){this.D9t.jnt(t)}zD(){this.D9t.zD()}Ynt(t){this.D9t.Ynt(t)}yn(){return Promise.resolve()}constructor(t,e){this.D9t=t,this.Z8t=e}},W2=class{get X8t(){return this.z8t}get z2t(){return this._4t}get i3t(){return this.q8t}get H8t(){return this.z$t}get Xnt(){return this.i0t}get znt(){return Ye(this.s0t,(t=>{if(t.sR)return[];const e=t.zc;if(t===this.i0t&&void 0!==this.z$t){const t=e.indexOf(this.z$t);if(t>=0)return e.slice(t+1)}return e}))}get qnt(){return this.s0t.filter((t=>!t.sR))}constructor(t,e){this._4t=t,this.s0t=[],this.q8t=!1,this.z8t=new V2(this,e)}};r();var U2=class extends Ha{ka(){return new G2(this.trt.Hnt())}constructor(t){super("Y8t",t)}},G2=class extends Wa{constructor(t){super("adimpression",t)}};r();var Z2=class extends $s{ka(){return new H2(this.trt.Hnt())}constructor(t){super("K8t"),this.trt=t}},H2=class extends me{constructor(t){super("adbuffering"),this.ad=t}};r();var X2=class extends $s{ka(){return new z2}constructor(){super("j8t")}},z2=class extends me{constructor(){super("admetadata")}},q2=class t extends W2{Q8t(t,e){for(let i=0;i<t;i++){const t=new O2(e);e.f3t(t),this.z2t._o(new Uu(t))}}q3t(t,e,i){let s=t;s===1/0&&(s=-1);const n=new M2(s,i,e);this.s0t.push(n),e.X4t(n),this.z2t._o(new UF(n))}j5t(t,e){for(const i of this.s0t)S(i.LOt)&&i.S8t===t&&(i.LOt=e,this.z2t._o(new h2(i)))}B5t(t,e){void 0===e&&(e=!1),e&&_e(this.s0t,t),this.z2t._o(new Pu(t))}M5t(){if(this.Xnt){this.B5t(this.Xnt,!0);const t=Boolean(this.z$t&&this.z$t.S3t===Ls.mQt);this.J8t(void 0,t)}}Z3t(t,e){const i=e.Q9t;if(!i)return;const s=i.d9t-1,n=t.zc[s];return n.D8t(e),this.z2t._o(new Nr(n)),n.sd.I$t=i.I$t,n}get i3t(){return this.$8t.i3t}t7t(t){if(!fh(this.e7t,t)){if(t){if(this.z$t===t)return;this.z$t=t;for(const e of this.i7t)this.P9t(e,t,this.$8t.RI)}else{if(!this.z$t)return;const t=new Qn(this.z$t,this.z$t.sd.LOt);this.e7t.push(this.z$t),this.z$t=void 0,this._4t._o(t)}En(this.i7t)}}J8t(t,e){if(t){var i;if((null==(i=this.Xnt)?void 0:i.LOt)===t.LOt)return;this.i0t=t,e&&this.z2t._o(new XF(this.i0t))}else{if(!this.i0t)return;const t=new $h(this.i0t);this.i0t=void 0,En(this.e7t),e&&this._4t._o(t)}}s7t(t){return this.s0t.filter((e=>rs(e.LOt,t,.01)))[0]}static n7t(t,e){if(e.Q9t)return t.zc[e.Q9t.d9t-1]}Td(t){if(!t.Q9t)return;const e=t.Q9t,i=this.s7t(e.LOt);i&&(En(this.i7t),this.J8t(i,t.Z9t))}Md(){this.Xnt&&this.z2t._o(new $h(this.Xnt)),En(this.i7t),this.M5t()}p8t(e){if(!this.i0t&&e.Q9t){const t=this.s7t(e.Q9t.LOt);this.J8t(t,e.Z9t)}if(this.i0t){const i=t.n7t(this.i0t,e);if(!i)return;this.Z3t(this.i0t,e);const s=e.ljt;ol(s)&&!ol(i.ljt)&&(i.ljt=s,this.z2t._o(new Nr(i))),this.t7t(i),this.z2t._o(new Cn(this.z$t,i.sd.LOt))}else 0}e8t(t,e){if(this.t7t(void 0),!e&&this.Xnt){const t=this.Xnt;this.J8t(void 0,!1),this.B5t(t)}}U9t(t){const e=t.Q9t;if(!e)return;const i=this.s7t(e.LOt);if(!i)return;this.Y3t(e.LOt,e.f9t,e.I$t);const s=this.Z3t(i,t);s&&this.z2t._o(new m1(s))}Y3t(t,e,i){const s=this.s7t(t);if(!s)return;const n=s.zc.length;if(e>n){const t=e-n;this.Q8t(t,s),s.I$t=i,this.z2t._o(new h2(s))}}T9t(e,i,s){if(!this.i0t)return;const n=t.n7t(this.i0t,e);if(n){const t=i/s;this.z2t._o(new Jo(n,t))}}X9t(e,i,s){if(!this.i0t)return;let n=this.z$t;if(!n){const s=t.n7t(this.i0t,e);if(!s||fh(this.e7t,s))return void this.i7t.push(i);n=s,this.Z3t(this.i0t,e),this.t7t(n)}this.P9t(i,n,s)}P9t(t,e,i){t===Qe.d6t?this.z2t._o(new X2):t===Qe.i6t&&e?this.z2t._o(new U2(e)):t===Qe.r6t&&e?this.z2t._o(new Z2(e)):t===Qe.o6t&&e&&i?this.z2t._o(new _s(e,i)):t===Qe.Rjt&&e&&i?this.z2t._o(new oe(e,i)):t===Qe.h6t&&e&&i&&this.z2t._o(new ks(e,i))}zD(){this.$8t.zD()}jnt(t){this.$8t.jnt(t)}nr(){const t=Boolean(this.z$t&&this.z$t.S3t===Ls.mQt);this.t7t(void 0),this.J8t(void 0,t);for(const t of this.s0t)this.B5t(t);En(this.s0t),En(this.i7t),En(this.e7t)}yn(){this.nr()}Ynt(t){}constructor(t,e){super(t,ji.Q$t),this.$8t=e,this.i7t=[],this.e7t=[]}};function Y2(t){const e=s.google.ima.settings;t.ads&&t.ads.vpaidMode&&s.google.ima.settings.setVpaidMode(function(t){const e=s.google.ima.ImaSdkSettings.VpaidMode;switch(t){case Fn.ENABLED:return e.ENABLED;case Fn.INSECURE:return e.INSECURE;case Fn.DISABLED:default:return e.DISABLED}}(t.ads.vpaidMode)),e.setPlayerVersion("9.7.0"),e.setPlayerType("THEOplayer"),e.setAutoPlayAdBreaks(!0),e.setDisableCustomPlaybackForIOS10Plus(!K2(t));const i=function(t){var e,i,s;const n=null==(i=t.ads)||null==(e=i.googleIma)?void 0:e.language;if(void 0!==n)return n;const r=null==(s=t.ui)?void 0:s.language;if(oi(r))return r;return}(t);i&&e.setLocale(i)}function K2(t){return Ya.su&&t.allowNativeFullscreen}r();var j2=class t extends p2{get H2t(){return this.R5t.X8t}get r7t(){return this.R5t}get $9t(){return this.d5t}get u8t(){return K2(this.rJ)}o7t(t,e,i){e===FF.Gnt&&void 0!==i&&(this.s3t=i),this.d5t.E5t(t,e)}static get G2t(){return ji.Q$t}get G2t(){return t.G2t}get h7t(){return this.rJ.ads.preload===HT.MIDROLL_AND_POSTROLL}jnt(t){const e=this.a7t();for(const i of e)D$(i.sources,i.timeOffset)||t.K6(i,FF.Unt,!1)}a7t(){const t=[],{Znt:e,znt:i}=this.H2t,s=[];for(const n of e.concat(i)){const e=n.sd.T8t;if(fh(s,e.OC))continue;const i=e.a5t(n.R8t);i>=0?t.push(...e.T4t.slice(i)):t.push(...e.T4t),s.push(e.OC)}for(const e of this.d5t.znt)e.F4t||t.push(...e.T4t);return xo(t)}set S3t(t){this.T3t=t}get S3t(){return this.T3t}get C$t(){return this.P$t}set C$t(t){this.P$t=t,this.u7t=!1}CI(){if(!this.C$t)return 0;const t=this.C$t.d8t();return S(this.ct)||t<0?0:this.ct-t}DI(t,e){}jd(){return this.FA||NaN}q4(t){this.FA=t}YI(){return this.na.qI}KI(t){this.h8t(this.yR,t,!0)}$I(){return this.WH}I9t(t){this.WH=t}get m8t(){return this.c7t}set m8t(t){this.c7t=t}get lrt(){return this.s3t}get r8t(){return this.l7t}get w8t(){return this.d7t}set w8t(t){this.d7t=t}get o8t(){return this.f7t}set o8t(t){this.f7t=t}gR(){var t,e,i;return null!=(i=null==(e=this.C$t)||null==(t=e.Y9t())?void 0:t.M8t)?i:0}wR(){var t,e,i;return null!=(i=null==(e=this.C$t)||null==(t=e.Y9t())?void 0:t.N8t)?i:0}AI(){return[]}o3t(t){this._5t=t,this.d5t.o3t(t)}Z5t(){!this.u7t&&this.C$t&&(this.C$t.Sn(),this.u7t=!0)}i8t(t){this.S3t=t?t.Z9t?"linear":"nonlinear":"none"}lR(){return ee.WB().ks()}bR(){return this.na.yR}AR(t){this.h8t(t,this.qI,!0)}H9t(){return this.na.qI?0:this.na.yR}h8t(t,e,i){const s=this.na.yR!==t||this.na.qI!==e;s&&(this.na.yR=t,this.na.qI=e),this.C$t&&i&&this.C$t.AR(this.H9t()),s&&this._o(new Ar(this.RI,this.yR))}LI(){return!1}BI(){if(this._7t&&this.s3t)return this._7t}FI(){if(this.v7t&&this.s3t)return this.v7t}uR(){return this.g5}m5(t){this.g5=t,this._o(new oa(this.RI,t))}get y8t(){return this.g7t}set y8t(t){this.g7t=t}RR(){this.na.vn(ns.ho,this.m7t),this.mo||(this.mo=!0,this.d5t.RR(),this.g8t())}async DR(){if(this.p7t)return;this.w7t.np(),this.w7t=new Fi;const t=this.JI;this.I9t(!1),this._o(new he(this.RI)),this.y7t()||(this.u8t||this.na.be(),this._o(new Pa(this.RI))),this.m8t||(this.w8t=!1);const e=Boolean(this.C$t);this.p7t=this.d5t.k5t();try{await this.p7t}finally{this.p7t=void 0}try{Io(this.w7t.ep)}catch(t){return}if(this.mo||this.m7t(),!this._7t||!this.s3t)if(this.C$t){if(t)if(e)try{Io(this.w7t.ep),this.C$t.b7t(),this._o(new Xr(this.RI))}catch(t){return}else this.Z5t()}else this.s3t||(this.d2t(),this.r3t.DR())}PR(){var t;this.JI||(this.I9t(!0),this._o(new nl(this.RI))),this.w7t.np(),this.m8t?null==(t=this.C$t)||t.PR():this.w8t=!0}zD(){var t;null==(t=this.C$t)||t.zD()}s8t(){this.C$t&&(this.S7t.A7t(),this.C$t.NR(),this.C$t.Km(),this.C$t=void 0,this.S3t="none",this.u7t=!1)}async NR(){var t;this.f8t=0,this.d5t.nr(),this.w7t.np(),this.I9t(!0),this.l7t=!1,this.f7t=!1,this.m8t=!1,this.R5t.nr(),this.s8t(),this.j9t(),null==(t=this.T7t)||t.nr(),this.w8t=!1,this.S7t.Km()}ge(){this.k7t.ge(),this.u8t&&this.na.ge()}be(){this.k7t.be()}E7t(){return Boolean(this.C$t)&&fh(this.C$t.x7t(),-1)&&!this.l7t}W4t(){this.d5t.W4t()}Y5t(){return this.d5t.Y5t}c5t(){this.d5t.c5t()}K5t(){return this.d5t.K5t()}K2t(t){if(this.E7t()){if(t.type===ns.Ky&&this.na.MI)return!0;if(t.type===ns.Ly)return this.l7t=!0,this.S7t.A7t(),!0}return!1}y7t(){return Boolean(this.C$t&&this.C$t.Y9t())}async G5t(t){try{this.s8t();const e=this.I7t();this.k7t.nQ(),this.C$t=await this.S7t.G5t(t,this.T7t,e),this.R7t(this.C$t)}catch(t){this.C7t.F9t(t)}}R7t(t){if(t.AR(this.H9t()),this.d5t.I5t===S2.A5t){const e=t.x7t();if(e.length)for(const t of e)this.R5t.q3t(t,this.d5t.l5t);else this.R5t.q3t(this.d5t.l5t.od,this.d5t.l5t)}this.C7t.nr(),this.C7t.m9t(t)}IR(){if(this.P$t&&this.u8t&&this.y7t())return this.na.IR()}xR(){return this.u8t&&this.i3t?this.na.Sa:super.xR()}I7t(){const t=!!(this.d5t.I5t===S2.A5t)&&this.h7t;let e,i;void 0!==this.rJ.ads.googleIma.uiElements?e=this.rJ.ads.googleIma.uiElements:this.rJ.ads.showCountdown||(e=[]),void 0!==this.rJ.ads.allowedMimeTypes&&(i=this.rJ.ads.allowedMimeTypes);return{P7t:i,D7t:e,N7t:t,L8t:this.rJ.ads.googleIma.bitrate,M7t:void 0,L7t:this._5t}}g8t(){if(this.P$t){const t=this.I7t();this.P$t.B7t(t)}}Q3t(t){N2(t)||(this._7t=new iu(di.ADVERTISEMENT_ERROR,t.Tb),this.v7t=new Z(Ci.AD_ERROR,"There was a problem playing ads.",this._7t)),this.z2t._o(Qh.j2t(t))}j9t(){this.i3t&&(this.na.ge(),this.d2t(),this.be())}A8t(){var t;if(this.na.CI()===1/0||0===this.na.lR().length)return;(null==(t=this.d5t.l5t)?void 0:t.x4t)&&-1!==this.O7t&&(this.na.DI(this.na.CI()+this.O7t),this.O7t=-1)}b8t(t){var e,i;this.O7t=null!=(i=null==(e=t.Q9t)?void 0:e.I$t)?i:-1}d2t(){super.d2t(),this.na.ge(),this.u8t&&!this.na.MI&&this.na.DR()}b4t(){this.u8t||super.b4t()}async yn(){this.C7t.vn(bo.fa,this.F7t),await super.yn(),this.s8t(),this.S7t.vn("V7t",this.W7t),this.S7t.Km(),this.k7t.Km(),this.d5t.yn(),this.C7t.yn()}constructor(t,e,i,s,n,r,o){super(t,e),this.mo=!1,this.s3t=!1,this._7t=void 0,this.v7t=void 0,this.O7t=-1,this.T3t="none",this.g7t=!1,this.u7t=!1,this.w7t=new Fi,this.c7t=!1,this.d7t=!1,this.W7t=t=>{this.z2t._o(t)},this.F7t=t=>{this._7t=new iu(di.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.v7t=xk(this._7t)},this.f8t=NaN,this.m7t=()=>{this.mo||this.RR()},this.rJ=i,this.WH=!0,this.FA=NaN,this.g5=Wt.TO,this.l7t=!1,this.f7t=!1,this.R5t=new q2(this.z2t,this),this.C7t=new D2(this,this.na,this.R5t),this.C7t.bn(bo.fa,this.F7t),this.na.bn(ns.ho,this.m7t),this.d5t=new T2(this,this.na,this.r3t,s,this.R5t),this.T7t=o,this.S7t=r,this.k7t=n,this.be(),this.S7t.bn("V7t",this.W7t)}};r();var Q2=class{registerWebImaAdPlayerConstructor(t){this.U7t=t}createAdPlayer(t,e,i){return J2()&&this.U7t?this.U7t(t,e,i):void 0}};function J2(){if(Boolean(s.google&&s.google.ima)){return!(1===w.keys(s.google.ima).length&&Boolean(s.google.ima.dai))}return!1}Q2.Vm=new Q2;var $2=class{get F2t(){return j2.G2t}sX(t){return t&&t.integration===vu.GOOGLE_IMA}V2t(t,e,i){return Q2.Vm.createAdPlayer(t,e,i)}K6(t,e,i,s){i.o7t(t,e,s)}Aq(t){const e=P0(t.sources);if(!e)return;const i={integration:vu.GOOGLE_IMA,sources:e,omidAccessModeRules:P2(t.omidAccessModeRules)},s=N0(t.timeOffset);return void 0!==s&&(i.timeOffset=s),i}};Ch.Vm.nX(new $2),r(),r(),r(),r();var t3=class extends $s{ka(){return new e3}constructor(){super("e0t")}},e3=class extends me{constructor(){super("adloaded")}},i3=-1,s3=class{get D$t(){return this.s0t}get G7t(){return this.Z7t}get Mut(){return this.Yp}get H7t(){return this.L4t}get X7t(){return this.z7t}get od(){if(S(this.q7t)){const t=va.XQt(this.L4t,this.B$t.t.jd());void 0===t||S(t)||(this.q7t=t)}return this.q7t}Y7t(){return this.Yp<this.s0t.length}Ic(){let t;return this.Yp<this.s0t.length&&(t=this.s0t[this.Yp],this.Yp++),t}K7t(t){t.yQt=this,this.s0t.push(t)}async j7t(t){let e=!1;for(const i of this.s0t)try{await i.$n(),e=!0}catch(e){0,_e(this.s0t,i);const s=i.urt.sources,n="string"==typeof s?s:s.src;t._o(Qh.Q2t(e,n))}return this.z7t=!0,e}W$t(){this.V$t=!0}F$t(){return this.V$t}Q7t(){return this.s0t.some((t=>xn(t).some((t=>t.FYt))))}constructor(t,e){this.s0t=[],this.V$t=!1,this.L4t=t,this.Yp=0,this.B$t=e,this.q7t=NaN,this.z7t=!1,this.Z7t=new c1(this,this.B$t)}},n3=class t extends en{get J7t(){let t=0;for(const e of this.$7t)e.F$t()||(t+=1);return t}tte(){this.ite.ete()}Sn(){this.Mo(),this.ste.bn("ort",this.ite.nte)}Tn(){this.Fo(),this.ste.vn("ort",this.ite.nte),this.W4=this.bF,this.ite.nr();for(const t of this.$7t)t.W$t();En(this.$7t)}Mo(){this.rte||(this.na.bn(ns._b,this.ote),this.rte=!0)}Fo(){this.rte&&(this.na.vn(ns._b,this.ote),this.rte=!1)}get znt(){return this.$7t}hte(){return this.ate(new rl(i3,void 0))}ute(t){return this.cte(t,0,0).length>0}dte(t,e){let i,s=0;for(const n of this.$7t){if(n.F$t())continue;const r=n.od;r>=t&&r<=e&&r>=s&&!S(r)&&(i=n,s=i.od)}return i}fte(t){return this.ate(new rl(t,void 0))}_te(){if(!this.vte&&void 0!==this._5t){this.vte=!this.$7t.some((t=>S(t.od)));for(const t of this.$7t)t.od!==i3&&t.od<=this._5t&&!t.F$t()&&t.W$t()}}mte(t){for(const e of t)e.W$t();this.a4t.pte(t),0===this.J7t&&this.Fo()}cte(t,e,i){return this.$7t.filter((s=>{if(s.F$t())return!1;const n=s.od;return this.wte(n,t)||this.yte(n,t,e,i)}))}wte(t,e){switch(e){case 0:return 0===t;case i3:return t===i3;default:return!1}}yte(t,e,i,s){if(t<0)return!1;const n=t-e;return-1!==n&&n<=i&&n>=-s}bte(e){if(e&&e.length>0){for(const i of e){const e=t.u5t(i.LOt);let s=this.Vgt(i);-1===s&&(this.vte=void 0===this._5t,this.$7t.push(new s3(e,this.Ate)),s=this.$7t.length-1);this.$7t[s].K7t(i)}this.Mo()}}static u5t(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}Vgt(e){const i=t.u5t(e.LOt);return qr(this.$7t,(e=>i===t.u5t(e.H7t)))}Ste(t){_e(this.$7t,t)}o3t(t){this._5t=t,this.vte=void 0===t}constructor(t,e,i,s){super(),this.vte=!1,this.ote=t=>uh(this.ate(t)),this.ate=async t=>{this._te();const e=t.currentTime,i=t.currentTime!==i3?this.dte(this.W4,t.currentTime):this.cte(t.currentTime,0,0)[0];let s,n;const r=this.na.jd()-10;if(n=this.ute(i3)&&_.ceil(e)===_.ceil(r)?this.cte(i3,10,0).filter((t=>!t.X7t)):this.cte(e,10,0).filter((t=>!t.X7t)),n.length){const t=(await Promise.all(n.map((t=>t.j7t(this.ste))))).some((t=>!0===t));t&&this._o(new t3),(!t||!this.ite.Tte||n[0].od<this.ite.Tte.od)&&(s=n[0])}i&&(i!==this.ite.Tte&&(s=i),this.mte([i])),s&&(this.ite.nte(),this.ite.Tte=s,await this.ite.ete()),S(this.na.jd())||(this.W4=t.currentTime)},this.na=t,this.a4t=e,this.Ate=new u1(this.a4t,this.na),this._5t=void 0,this.vte=!1,t.jd()!==1/0?this.bF=0:this.bF=t.CI(),this.W4=this.bF,this.$7t=[],this.ste=i,this.ite=s,this.rte=!1}};r(),r();var r3=class extends en{get kte(){return this.r1t}get z2t(){return this._4t}Ete(){this.xte(),this.Ite(),this.bZ=void 0}Rte(t){this.Cte=this.Cte.concat(t)}Pte(t){this.Dte=this.Dte.concat(t)}Ite(){this.Cte=[]}xte(){this.Dte=[]}Nte(t){for(const e of this.Cte)e.pz===t&&I$(e.eventURL)}ge(){this.kte.style.display=""}be(){this.kte.style.display="none"}yn(){this.Ro(),this._4t.Ro(),We(this.r1t)}constructor(t,e){super(),this.Dte=[],this.Cte=[],this.bZ=void 0,this._4t=new en,this.Mte=t=>{t.stopPropagation(),this.Lte()},this.Lte=()=>{for(const t of this.Dte)for(const e of t.BKt)I$(e.uri)},this.r1t=h.createElement("div"),this.r1t.style.display="none",this.Bte=t,this.Ote=e}};function o3(t,e){let i=e;if(!function(t){return"ui"in t}(t))return i;const s=t.ui.language;let n;if(oi(s)){const e=t.ui.languages;if(!e)return i;n=e[s]}else n=s;return n&&n[e]&&(i=n[e]),i}r(),r();var h3={[ti.eP]:1,[ti.iP]:2,[ti.sP]:2};function a3(t,e){const i=e?e.map((t=>t.toLowerCase())):e;return Le(t.filter((t=>{const e=t.type.toLowerCase();return!!Qc(i)&&-1!==i.indexOf(e)&&v0(e)})),((t,e)=>h3[t.type]-h3[e.type])).map(u3)}function u3(t){return ll({src:t.contentURL,type:t.type,isAdvertisement:!0})}function c3(t,e){return AW(l3(t),l3(e))}function l3(t){return{Ti:t.height,ji:t.width}}function d3(t,e,i,s){const n=function(t,e,i,s){let n,r=1/0;const o=t.filter((t=>!v0(t.type))).filter((t=>void 0===s||-1!==s.indexOf(t.type)));if(o.length){for(const t of o){const s=(_.abs(t.width/e-1)+_.abs(t.height/i-1))/2;s<r&&(r=s,n=t)}return n||o.sort(c3)[0]}}(t.rjt,e.width,e.height,i),r=a3(t.rjt,i);if(n){const t=u3(n);t&&r.push(t)}var o;r.length>0&&(t.ljt=null==(o=r[0].src)?void 0:o.trim());return nc({sources:r},s)}var f3=class extends r3{get Fte(){return this.Vte}get RI(){return this.Wte.RI}get ct(){let t=this.Wte.ct;return S(t)&&this.tjt&&(t=this.tjt.ct||0),t}get MI(){return this.Wte.MI}get qI(){return this.Wte.qI}set qI(t){this.Wte.qI=t,t?this.Nte(Rc.mjt):this.Nte(Rc.pjt)}get JI(){return this.Wte.JI}get aR(){return this.Wte.aR}get yR(){return this.Wte.yR}set yR(t){this.Wte.yR=t}get vR(){return this.Wte.vR}get pR(){return this.Wte.pR}get Ute(){return this.Gte}DR(){this.Wte.JI&&(this.Wte.DR(),this._o(new he(this.RI)),this.Vte&&this.Nte(Rc.wjt),this.Vte=!0)}PR(){this.Wte.JI||(this.Wte.PR(),this._o(new nl(this.RI)),this.Nte(Rc.Ky))}async NR(){var t;null==(t=this.zT)||t.np(),this.zT=void 0,this.be(),this.Vte=!1,this.Zte=!0,this.Hte(),this.Xte(),await this.zte()}qte(t){void 0===t&&(t=!0),this.Vte=!1,t&&this.Nte(Rc.Cjt),this.be(),this.Ote()}Yte(){var t;const e=null==(t=this.a4t.Ma)?void 0:t.mi,i=new x1(this.Ku,e);return this.kte.appendChild(i.we),i.bn("zD",this.Kte),i}jte(){this.tjt&&this.tjt.KKt.DKt&&(this.h1t=new A1(this.kte),this.h1t.y0t=this.tjt.KKt.DKt,this.h1t.bn("clickstart",this.Qte),this.h1t.bn("click",this.Lte))}Jte(t,e){for(const i of this.Cte)if(i.pz===Rc.jy){const s=o0(i.nc,e);void 0!==s&&this.W4<s&&s<=t&&I$(i.eventURL)}}async $te(){if(!this.tjt||!this.eee)return;const t=d3(this.tjt,this.eee,this.FT.ads.allowedMimeTypes,this.FT);if(!t.sources.length)return await this.Wte.nr(),this.Bte(""),void this.tjt.oKt();this.zT=new Fi,this.Zte=!0,await Ts(this.Wte.Ca(t,this.zT.ep),this.zT),this.Wte.ge(),this.tjt.oKt(),this.jte()}async iee(t,e,i){this.Gte=t,this.tjt=t.FYt,this.Wte.bn(ns._b,this.see),this.Wte.bn(ns.Dy,this.nee),this.Wte.bn(ns.vb,this.ree),this.Wte.bn(co,this.Ds),this.tjt.XYt&&0!==this.tjt.XYt.length&&this.Rte(this.tjt.XYt),this.tjt.KKt&&this.Pte(this.tjt.KKt),this.bZ=e,this.eee=i,0!==this.tjt.rjt.length&&(this.Wte.bn(bo.fa,this.oee),await this.$te(),this.Wte.bn(ns.Ly,this.hee),this.Wte.bn(ns._b,this.aee),this.Wte.bn(Zc.uB,this.uee),this.Wte.bn(ns.$y,this.Ds))}IJt(){this.Fte&&this.cee&&this.Kte()}get cee(){return this.tjt&&-1!==this.tjt.ajt&&this.Wte.RI>=this.tjt.ajt}lee(){this.Nte(Rc.rTt),this.Gte&&this.z2t._o(new Cn(this.Gte,this.RI))}async zte(){this.Wte.vn(bo.fa,this.oee),this.Wte.vn(ns.Ly,this.hee),this.Wte.vn(ns._b,this.aee),this.Wte.vn(Zc.uB,this.Ds),this.Wte.vn(Zc.uB,this.uee),this.Wte.vn(ns.$y,this.Ds),this.Wte.vn(ns._b,this.see),this.Wte.vn(ns.Dy,this.nee),this.Wte.vn(ns.vb,this.ree),this.Wte.vn(co,this.Ds),this.Gte&&(this.Gte.W$t(),this.z2t._o(new Qn(this.Gte,this.RI))),this.dee(),this.Ete(),this.Hte(),this.Xte(),this.Gte=void 0,this.tjt=void 0,this.eee=void 0,await this.Wte.nr(),this.Wte.be(),this.kte.style.cursor="",this.fee=0,this.W4=-1,this._ee&&(this.vee.zte(),this._ee=!1)}dee(){this.h1t&&(this.h1t.Km(),this.h1t=void 0)}Xte(){this.gee&&(We(this.gee),this.gee=void 0)}Hte(){this.c1t&&(this.c1t.yn(),this.c1t=void 0)}mee(){this._ee=!0}pee(){var t;this.gee||(this.gee=h.createElement("div"),this.gee.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this.kte.appendChild(this.gee));const e=null==(t=this.Gte)?void 0:t.sd;if(!e)return;const i=e.zc.filter(v1);let s=o3(this.FT,"The content will play in")+" "+_.round(e.R$t)+" "+o3(this.FT,"seconds");if(i.length>1){const t=i.filter((t=>t.F$t())).length;s+=". "+o3(this.FT,"Ad")+" "+(t+1)+"/"+i.length}Nu(this.gee,s)}constructor(t,e,i,s,n,r,o){super(t,e),this.vee=i,this.FT=s,this.a4t=n,this.Ku=r,this.Wte=o,this.Vte=!1,this.fee=0,this.W4=-1,this.zT=new Fi,this.Zte=!0,this.hee=()=>{this.qte()},this.uee=()=>{this.zT=void 0,this.Vte||(this.lee(),this.Vte=!0),this.Zte&&(this.Zte=!1,this.a4t.tte()),this.kte.style.display="block",this.Wte.vn(Zc.uB,this.uee),this.Vte=!0},this.aee=()=>{const t=this.RI,e=this.ct,i=t/e;(0===this.fee&&i>=.25?(this.Nte(Rc.xjt),this.fee=1):1===this.fee&&i>=.5?(this.Nte(Rc.Rjt),this.fee=2):2===this.fee&&i>=.75&&(this.Nte(Rc.Ijt),this.fee=3),this.Jte(t,e),this.pee(),this.W4=t,this.tjt)&&(-1!==this.tjt.ajt&&this.tjt.ajt<this.tjt.ct&&(null!=this.c1t||(this.c1t=this.Yte()),this.RI<this.tjt.ajt?this.c1t.x0t(this.tjt.ajt-this.RI):this.c1t.R0t()))},this.oee=()=>{var t,e;this.zT=void 0,this.Wte.vn(bo.fa,this.oee),this.Zte=!0,null==(t=this.bZ)||t.nQt(d0.$jt),this.Vte=!1,this.Wte.be();const i=(null==(e=this.Wte.bt)?void 0:e.src)||"";this.Bte(i)},this.see=()=>{this.Ds(new rl(this.RI,void 0))},this.nee=()=>{this.Ds(new yn(this.ct))},this.ree=()=>{this.Ds(new Ar(this.RI,this.yR))},this.Qte=()=>{this.a4t.PR()},this.Kte=()=>{this.Gte&&(this.Nte(Rc.bjt),this.z2t._o(new Jo(this.Gte,this.RI/this.ct)),this.qte(!1))},this.kte.className="theoplayer-ad-linear",this.kte.style.zIndex="10",Ka(this.kte),this.Wte.be(),this._ee=!1}};r(),r();var _3=class t extends So{get we(){return this.Vs}C0t(){this.we.addEventListener("mouseup",this.P0t),this.we.addEventListener("touchend",this.P0t),this.we.addEventListener("mousedown",this.wee)}I0t(){this.we.removeEventListener("mouseup",this.P0t),this.we.removeEventListener("touchend",this.P0t),this.we.removeEventListener("mousedown",this.wee)}static mr(){const t=h.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}yn(){this.I0t(),We(this.Vs)}constructor(){super(),this.P0t=t=>{this._o(new me("zD")),this.wee(t)},this.wee=t=>{t.stopPropagation()},this.Vs=t.mr(),this.C0t()}},v3=class extends r3{get yee(){return this.bee}get Aee(){return this.pu}Ete(){super.Ete(),this.kte&&Or(this.kte)}async iee(t,e,i){this.q$t&&this.zte(),this.bee=t,this.q$t=t.VYt,0!==this.q$t.XYt.length&&this.Rte(this.q$t.XYt),this.bZ=e,0!==this.q$t.ZYt.length&&(this.Pte(this.q$t.ZYt[0].$Yt),this.kte.addEventListener("error",this.See),this.kte.addEventListener("load",this.Tee),await this.$te(),this.kee())}IJt(){var t;if(void 0!==this.Eee)return;const e=null==(t=this.q$t)?void 0:t.ZYt[0];e&&e.sd&&-1!==e.sd.ajt&&(this.Nte(Rc.bjt),this.z2t._o(new Jo(this.bee,0)),this.xee())}lee(){void 0!==this.bee&&this.z2t._o(new Cn(this.bee,this.a4t.RI))}NR(){this.zte(),this.bee=void 0,this.q$t=void 0}zte(){this.Iee(),void 0!==this.bee&&(this.bee.W$t(),this.z2t._o(new Qn(this.bee,this.a4t.RI))),this.Ete(),this.Ree(),void 0!==this.Eee&&(c(this.Eee),this.Eee=void 0)}Iee(){this.kte.removeEventListener("load",this.Tee),this.kte.removeEventListener("error",this.See)}async $te(){const t=h.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const e=this.q$t.ZYt[0],i=h.createElement("a");if(e.$Yt.DKt&&(i.href=e.$Yt.DKt,i.target="zu",i.setAttribute("rel","noopener")),e.KYt){const t=e.KYt,s=h.createElement("iframe");s.src=t.qjt,i.appendChild(s)}else if(e.qYt){const t=e.qYt,s=h.createElement("img");s.src=t.qjt,i.appendChild(s)}else if(e.QYt){const t=e.QYt,s=h.createElement("iframe");s.src=t.qjt,i.appendChild(s)}e.oKt(),i.addEventListener("mousedown",this.Mte),i.addEventListener("touchend",this.Mte),this.kte.firstChild&&(Or(this.kte),this.zte()),t.appendChild(i),this.kte.appendChild(t),this.ge()}kee(){var t;if(!this.q$t)return;const e=null==(t=this.q$t.ZYt[0].sd)?void 0:t.ajt;void 0!==e&&-1!==e&&(this.Eee=s.setTimeout(this.Cee,1e3*e))}Ree(){this.pu&&(this.pu.vn("zD",this.Pee),this.pu.yn()),this.pu=void 0}get Dee(){return this.a4t.Nee()}constructor(t,e,i){super(t,e),this.Tee=()=>{this.Iee(),this.Nte(Rc.Ljt),this.Ote()},this.See=t=>{var e,i;this.Iee(),null==(e=this.bZ)||e.nQt(d0.eQt);const s=null==(i=this.q$t)?void 0:i.ZYt[0];var n,r;const o=null!=(r=null!=(n=null==s?void 0:s.KYt)?n:null==s?void 0:s.qYt)?r:null==s?void 0:s.QYt;var h;this.Bte(null!=(h=null==o?void 0:o.qjt)?h:"")},this.xee=()=>{this.be(),Or(this.kte),this.Ote(),this.bee=void 0,this.q$t=void 0},this.Cee=()=>{this.pu||(this.Eee=void 0,this.pu=new _3,this.kte.children[0].appendChild(this.pu.we),this.pu.bn("zD",this.Pee))},this.Pee=()=>{this.Nte(Rc.bjt),this.IJt()},this.kte.className="theoplayer-ad-nonlinear",this.kte.style.position="absolute",this.kte.style.width="100%",this.kte.style.bottom="3em",this.kte.style.zIndex="10",this.kte.style.textAlign="center",this.a4t=i}};r();var g3=class{static async Mee(t,e,i){let s=[],n=t.shift();const r=[];for(;n;){try{const t=await(new w0).fQt(n,e);s=s.concat(t)}catch(t){0;const e=Qh.Q2t(t,n.sources.src);i._o(e),r.push(e.zb)}n=t.shift()}return[s,r]}};r(),r(),r();var qu=class extends $s{ka(){return new m3}constructor(){super("Qht")}},m3=class extends me{constructor(){super("statechange")}};r();var Ht=function(t){return t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted",t}({});r(),r();var p3=class{get Zu(){return this.tc}get V(){return this.tc.length}get wa(){return this.eu||(this.eu=this.ka()),this.eu}wC(t){return this.tc[t]}QO(t){this.tc.push(t),this.eu&&this.eu.push(t.wa),this.Lee(t)}Bee(t){for(const e of t)this.QO(e)}Oee(t,e){e>=0&&e<=this.tc.length&&(this.tc.splice(e,0,t),this.eu&&this.eu.splice(e,0,t.wa),this.Lee(t))}JO(t){return fh(this.tc,t)}rT(t){this.Fee(this.tc.indexOf(t))}Fee(t){if(!(t>=0&&t<this.tc.length))return;const e=this.tc[t];wa(this.tc,t),this.eu&&wa(this.eu,t),this.Vee(e)}Gb(){const t=this.tc.slice();En(this.tc),this.eu&&En(this.eu);for(const e of t)this.Vee(e)}constructor(){this.tc=[],this.eu=void 0}},Pn=class extends p3{ka(){return function(t){const e=function(t){const e=t.Zu.map((t=>t.wa));return e.item=e=>{const i=0|e,s=t.wC(i);return s&&s.wa||void 0},e}(t),i=new lt(t,e);return e.addEventListener=(t,e)=>{i.bn(t,e)},e.removeEventListener=(t,e)=>{i.vn(t,e)},e}(this)}bn(t,e){this.Wee.bn(t,e)}_y(t){this.Wee._y(t)}Ro(){this.Wee.Ro()}_o(t){this.Wee._o(t)}vn(t,e){this.Wee.vn(t,e)}wy(t){this.Wee.wy(t)}yy(t){this.Wee.yy(t)}Ay(t,e){return this.Wee.Ay(t,e)}constructor(...t){super(...t),this.Wee=new en,this.Ds=t=>{this._o(t)}}};r();var w3=class extends me{constructor(t){super("addtask"),this.task=t}},y3=class extends $s{ka(){return new w3(this.Uee.wa)}constructor(t){super("Gee"),this.Uee=t}};r();var b3=class extends me{constructor(t){super("removetask"),this.task=t}},A3=class extends $s{ka(){return new b3(this.task.wa)}constructor(t){super("Zee"),this.task=t}},S3=class extends Pn{Lee(t){this._o(new y3(t))}Vee(t){this._o(new A3(t))}constructor(){super()}},T3=class extends So{async RR(){await this.Hee(),this.aat("initialised")}async Hee(){try{await this.Xee()}catch(t){0}}async Xee(){const t=await this.d_.kxt();for(const e of t){const t=this.qee.zee(e.id,e.sourceDescription,e.parameters,this.Yee);this.Kee(t),this.qT.QO(t),await t.jee}}get Jk(){return this.oat}aat(t){this.oat=t,this._o(new qu)}get Qee(){return this.qT}zee(t,e,i){void 0===i&&(i="persistent");const s=this.qee.Jee(t,e,i);return this.$ee(s,i),this.qT.QO(s),this.Kee(s),s}async $ee(t,e){try{await this.tie(t,e)}catch(t){throw m("Unable to persist task - "+t)}}async tie(t,e){await this.d_._Tt({key:t.o,id:t.o,sourceDescription:t.Cc,parameters:t.AT},e)}Kee(t){t.bn("Qht",(()=>{t.Jk===Ht.EVICTED&&this.qT.rT(t)}))}constructor(t,e,i){super(),this.oat="uninitialised",this.qT=new S3,this.qee=e,this.Yee=i,this.d_=t,this.RR()}};r(),r(),r(),r();var k3=class{get OB(){return this.eie}get iie(){return this.sie}get nie(){return this.rie.OB}get oie(){let t=0,e=0;return this.jO.forEach((i=>{t+=i.timeRanges.OB,e+=i.totalQualityDurationToCache})),0===e?0:_.min(1,t/e)}get rie(){return this.hie}IF(t){return!!Et(this.jO,t.jO)&&(!!Kd(this.sie,t.sie)&&(!!Kd(this.OB,t.OB)&&(!!Kd(this.nie,t.nie)&&this.rie.CB(t.rie))))}constructor(t,e,i){if(this.sie=t,this.jO=e,this.eie=i,0===this.jO.size)this.hie=ee.WB();else{let t=new ee([-1/0,1/0]);this.jO.forEach((e=>{t=t.jn(e.timeRanges)})),this.hie=t}}};k3.QUALITY_TIME_RANGES_NULL_OBJECT=Vh(),k3.CACHE_PROGRESSION_NULL_OBJECT=new k3(0,k3.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),k3.aie=k3.CACHE_PROGRESSION_NULL_OBJECT,r(),r(),r(),r();var E3=class extends me{constructor(){super("progress")}},x3=class extends $s{ka(){return new E3}constructor(){super("P3t")}};r(),r();var I3=class extends dl{get name(){return"uie"}constructor(t,e){super(t,e)}};r(),r(),r();var R3=function(t){return t[t.eP=0]="eP",t[t.iP=1]="iP",t}({});async function C3(t,e,i){const s=[];for(const n of t.mpt)s.push(P3(n,e,i));return{Kpt:await Promise.all(s)}}async function P3(t,e,i){const s=[];for(const n of t.ift)D3(n)||s.push(L3(n,e,i));return{Z:await Promise.all(s),zw:t.zw}}function D3(t){return t.Mat.every(M3)}var N3=1;function M3(t){return t.xwt!==N3&&Boolean(t.xwt)}async function L3(t,e,i){const s=[];for(const e of t.Mat)M3(e)||s.push(B3(e,i));const n=await Promise.all(s),r=t.Frt[0],o=t.$G,h=o?function(t,e){const i=[],s=function(t){return t?Xa(t,"avc")?ba.VIDEO_H264:Xa(t,"hev")||Xa(t,"hvc")||Xa(t,"hvt")||Xa(t,"lhv")||Xa(t,"lhe")||Xa(t,"lht")?ba.VIDEO_H265:Xa(t,"mp4")?ba.VIDEO_MP4:Xa(t,"mpeg2")?ba.VIDEO_MPEG2:Xa(t,"mpeg")?ba.VIDEO_MPEG:ba.VIDEO_UNKNOWN:ba.VIDEO_UNKNOWN}(t);for(const t of e){const e=t.G9.split(":").pop(),n=t.Z9;i.push({mimeType:s,uuid:e,data:n})}const n=R3.eP,r=Jn;return{type:n,schemeType:r,schemeDatas:i}}(r,o):void 0,a=wX(t,e,!0);return{VC:n,gs:t.Net,zw:t.zw,CZ:h,Ymt:a}}async function B3(t,e){const i={stack:[],error:void 0,hasError:!1};try{const r=Gi(i,new Fi,!1),o=await async function(t,e,i){const s=[],n=t.Eot;t.sdt&&s.push({lF:0,ct:0,cie:t.sdt});const r=n.Jyt();let o=r;for(;o;){if(t.Kct(o)){const n=await t.Qct(o,e,i);for(let e=0;e<n.V;e++)s.push(O3(n.$ct(e),t))}else s.push(O3(o,t));o=n.elt(o)}const h=n.ibt(),a=h.dF-r.lF;return{ct:a,xct:s}}(t,e,r.ep),h={o:F3(t),sB:o,jG:t.jG,Op:t.Op,Ti:t.Ti,zw:t.zw,ji:t.ji};switch(t.zw){case Fo.Rk:break;case Fo.yE:var s,n;h.Xdt=null!=(n=null==(s=t.Xdt)?void 0:s.VF())?n:NaN;break;case Fo.wE:h.audioSamplingRate=t.Swt}return h}catch(t){i.error=t,i.hasError=!0}finally{ce(i)}}function O3(t,e){return{lF:t.lF,ct:t.ct,cie:e.nlt(t)}}function F3(t){return t.Zct.Sn+"-"+(""+t.o)}function V3(t,e){const i=function(t){const e=function(t){const e=Vh();for(const i of t){let t=e.get(i.XLt);t||(t={zw:i.zw,LN:[]},e.set(i.XLt,t)),t.LN.push(i)}return e}(t),i=Bh();return e.forEach((t=>{for(const e of t.LN){let s=i.get(t.zw);s||(s=Vh(),i.set(t.zw,s));let n=s.get(e.l);n||(n=[],s.set(e.l,n)),n.push(e)}})),i}(t);return function(t,e){const i=Bh();return t.forEach(((t,s)=>{const n=Vh();t.forEach(((t,i)=>{const r=[];for(const i of t){const t=W3(i,s,e);r.push(t)}n.set(i,r)})),i.set(s,n)})),i}(i,e)}function W3(t,e,i){const s=t.XLt,n={QLt:t,ABt:[]};for(const t of i)iQ(e,s,t)&&n.ABt.push(t);return n}async function U3(t,e){const i=await e.tTt([t],{});return xj(i.rE,{},i.iTt)}async function G3(t,e){return HK(t)?async function(t,e){const i=V3(t.LN,t.FOt),s=await async function(t,e){const i=[],s=t.entries();for(let t=s.next();!t.done;t=s.next()){const[s,n]=t.value,r=await X3(n,s,e);i.push(r)}return i}(i,e),n=await async function(t,e){const i=[];for(const h of t){var s,n;const t=await K3(h.Iyt,e);var r,o;t.jG=h.jG,t.Op=h.Frt?H3(h.Frt):"",t.Ti=null!=(r=null==(s=h.CPt)?void 0:s.Ti)?r:0,t.ji=null!=(o=null==(n=h.CPt)?void 0:n.ji)?o:0,i.push(t)}return{zw:Fo.oE,Z:[{gs:_U,zw:Fo.oE,VC:i}]}}(t.FOt,e);return s.push(n),{ct:Z3(s),lie:[t.Iyt],Ipt:[{Kpt:s}]}}(t,e):function(t){const e=j3(t);return{ct:e.ct,lie:[t.Iyt],Ipt:[{Kpt:[{zw:Fo.oE,Z:[{zw:Fo.oE,gs:_U,VC:[{o:t.Iyt,sB:e,jG:0,Op:"",Ti:0,zw:Fo.oE,ji:0}]}]}]}]}}(t)}function Z3(t){let e=-1/0;for(const i of t)for(const t of i.Z)e=_.max(e,...t.VC.map((t=>t.sB.ct)));return e}function H3(t){return[t.UPt,t.ZPt,t.rOt].filter(ol).join(",")}async function X3(t,e,i){const s=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,e]=t.value,n=await z3(e,i);s.push(n)}return{zw:q3(e),Z:s}}async function z3(t,e){const i=[],s=t[0].QLt;for(const s of t){const t=await Y3(s,e);i.push(t)}return{gs:s.gs||_U,zw:q3(s.zw),VC:i}}function q3(t){switch(t){case el.wE:return Fo.wE;case el.yE:return Fo.yE;case el.TW:case el.GBt:return Fo.Rk;default:return Fo.oE}}function Y3(t,e){const i=function(t){const e=t.QLt.Iyt,i=t.ABt.map((t=>t.Iyt));return e||(i.length?i[0]:void 0)}(t);return K3(i,e)}async function K3(t,e){let i={ct:0,xct:[]};if(t){const s=await U3(t,e);XK(s)&&(i=j3(s))}return{o:t||"default",die:t,sB:i,jG:0,Op:"",Ti:0,zw:Fo.oE,ji:0}}function j3(t){const e=[];let i,s=0;for(const n of t.xct){const t=s;!n.GOt||void 0!==i&&YK(n.GOt.Iyt,i)||(e.push(Q3(n.GOt,t)),i=n.GOt.Iyt),e.push(J3(n,t)),s+=n.ct}return{ct:s,xct:e}}function Q3(t,e){return{lF:e,ct:0,cie:$3(t.Iyt)}}function J3(t,e){return{lF:e,ct:t.ct,cie:$3(t.Iyt)}}function $3(t){return{Xu:t.Fx,Kat:t.oAt?[t.oAt.Sn,t.oAt.Sn+t.oAt.V]:void 0,DE:!1}}r(),r();var t4=class{async fie(t){if(!t.src)throw new m("Invalid typed source");const e=t.type;if(Wh(e))return await this._ie(t);if(YT(e))return await this.gie(t);throw new m("Unexpected source type")}async _ie(t){try{const e=await U3(t.src,this.eTt);return await G3(e,this.eTt)}catch(t){throw new m("Unable to fetch HLS manifest")}}async gie(t){try{const e=new UH({zC:As.Bh(t.src),MSt:t.liveOffset,VSt:t.timeServer,DE:t.useCredentials},this.mie,fr.VE,this.eTt,t.dash);return await e.W,await async function(t,e,i){const s=[];for(const n of t.Ipt)s.push(C3(n,e,i));const n=await Promise.all(s);return{ct:t.gyt.twt(),lie:[t.kSt],Ipt:n}}(e.Nr.tdt,t.contentProtection,this.slt)}catch(t){throw new m("Unable to fetch DASH manifest")}}constructor(t,e,i){this.eTt=t,this.slt=e,this.mie=i}};r();var e4=class{pie(){const t=new is;return this.wie.push(t),this.yie(),t.Xb}async bie(t,e){try{await t}finally{this.Aie-=1,this.yie(),0===this.wie.length&&0===this.Aie&&e.Zb(!0)}}yie(){if(this.wie.length>0&&this.Aie<this.Sie){this.wie.shift().Zb(),this.Aie+=1}}constructor(t){this.wie=[],this.Aie=0,this.Sie=t}};var i4=class extends So{get jee(){return this.RR()}async RR(){const t=new t4(this.eTt,this.slt,this.mie);this.FPt=await t.fie(this.Tie);const e=function(t,e){if(oi(t)){if(Xa(t,"%"))return C(t)/100*e;throw new m("Unexpected - Invalid string supplied as amount to cache.")}return e<t?e:t}(this.vTt.AT.amount,this.FPt.ct);let i;this.eie=e;const s=eX(this.FPt.lie[0]),n=(await this.Mxt.Lxt.xxt(s,"manifestURL")).filter((t=>fh(t.references,this.vTt.o))),r=[],o=this.vTt.AT.bandwidth;for(const t of this.FPt.Ipt)for(const e of t.Kpt)for(const t of n4(e,this.vTt.AT.preferredTrackSelection))for(const e of o4(t.VC,o))r.push(e);this.kie=_.ceil(r.map((t=>t.jG*function(t,e){let i=0;for(const s of t.sB.xct.map((t=>t.ct)))if(i+=s,i>=e)return i;return i}(t,e)/8)).reduce(((t,e)=>t+e),0));const h=Vh();if(n&&0!==n.length){const t=n.reduce(((t,e)=>t+e.byteSize),0);for(const t of n){const e=t.qualityId,i=new ee(t.startsAndEnds);if(h.has(e))h.get(e).timeRanges=h.get(e).timeRanges.AB(i).bB(5e-4);else{const t=Do(r,(t=>t.o===e));var a;const s=_.min(this.eie,null!=(a=null==t?void 0:t.sB.ct)?a:1/0);h.set(e,{timeRanges:i,totalQualityDurationToCache:s})}}i=new k3(t,h,this.eie)}else{for(const t of r)h.set(t.o,{timeRanges:ee.WB(),totalQualityDurationToCache:_.min(t.sB.ct,this.eie)});i=new k3(0,h,this.eie)}this.Eie=i}get xie(){return this.kie}get Eie(){return this.Iie}set Eie(t){this.Iie.IF(t)||(this.Iie=t,t.IF(k3.aie)||this._o(new x3))}async pi(t){await this.mo,await this.Rie(this.FPt,t)}async Rie(t,e){if(!t.lie)throw new m("Unexpected - manifest is missing locations");await this.Cie();const i=[];for(const s of t.Ipt)i.push(this.Pie(s,t.lie[0],e));return qe(i)}async Cie(){const t=await this.Die.kxt();for(const e of t){const t=await this.Mxt.Bxt.Vb(e.key);if(t)await s4(t,this.vTt.o,this.Mxt.Bxt,this.Yee);else try{await this.Mxt.Bxt._Tt(e,this.Yee)}catch(t){throw new I3("Unable to store manifest with url: "+e.locationURL,t)}}await this.Die.Rxt()}Pie(t,e,i){const s=[];for(const n of t.Kpt){const t=n4(n,this.vTt.AT.preferredTrackSelection);for(const n of t)s.push(this.Nie(n,e,i))}return qe(s)}async Nie(t,e,i){const s=this.vTt.AT.bandwidth,n=o4(t.VC,s);t.zw===Fo.yE&&t.Ymt&&t.Ymt.DU.widevine&&"persistent"===t.Ymt.DU.widevine.licenseType&&(await this.Mie(t.Ymt),Io(i));const r=[];for(const t of n)r.push(this.Lie(t,e,i));return qe(r)}async Lie(t,e,i){Io(i);const s=t.sB.xct[0].lF+this.eie,n=[];let r=!1;for(const o of t.sB.xct){if(o.lF>=s||this.stopIfFailed(r))break;await this.Bie(i),await this.Oie.pie(),n.push(this.Oie.bie(this.Fie(o,t,e),this.Vie).catch((t=>(r=!0,Promise.reject(t)))))}return qe(n)}async Bie(t){if(null==t?void 0:t.zm)throw await this.Vie.Xb,new vt}async Wie(){return await this.mo.catch(M),this.FPt}Mie(t){return Promise.resolve()}Uie(){return As.aw("License renewal unsupported in this SDK."),Promise.resolve()}async Fie(t,e,i){const s=this.Mxt.Lxt,n=iX(t.cie.Xu,t.cie.Kat),r=await s.Vb(n);if(r)await s4(r,this.vTt.o,s,this.Yee),this.Gie(r,!1);else try{const s=await this.Zie(t.cie),{segmentMetadataEntry:n,segmentEntry:r}=this.Hie(t,e,i,s);await this.Mxt.Nxt((async t=>{await t.Lxt._Tt(n,this.Yee),await t.xct._Tt(r,this.Yee)})),this.Gie(n,!0)}catch(e){throw new I3("Unable to store segment with url: "+t.cie.Xu,e)}}async Zie(t){const e=await this.rct.Zat(t,{Qat:this.DEFAULT_CACHING_SEGMENT_TIMEOUT,RE:this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT});return await this.hct(e)}async hct(t){return{buffer:await t.Bk()}}Hie(t,e,i,s){const n=iX(t.cie.Xu,t.cie.Kat),r=t.lF,o=t.ct,h=this.Xie(s);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:eX(i),qualityId:e.o,byteSize:h,startsAndEnds:new ee([r,r+o]).cB,references:[this.vTt.o]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:eX(i),data:s,references:[this.vTt.o]}}}Xie(t){return t.buffer.byteLength}Gie(t,e){const i=t.qualityId,s=this.Iie,n=s.jO;n.get(i).timeRanges=n.get(i).timeRanges.AB(new ee(t.startsAndEnds)).bB(5e-4),this.Eie=new k3(e?s.iie+t.byteSize:s.iie,n,this.eie)}stopIfFailed(t){return!1}constructor(t,e,i,s,n,r,o,h){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this.Vie=new is,this.Iie=k3.aie,this.vTt=t,this.Mxt=e,this.eTt=i,this.Die=s,this.rct=n,this.slt=r,this.mie=h,this.Yee=o,this.kie=-1;const a=this.vTt.Cc.sources[0];this.Tie=a,this.mo=this.RR(),this.Oie=new e4(this.vTt.AT.parallelTasksThreshold)}};async function s4(t,e,i,s){fh(t.references,e)||(t.references.push(e),await i._Tt(t,s))}function n4(t,e){switch(t.zw){case Fo.wE:return r4(t.Z,e.audioTrackSelection);case Fo.Rk:return r4(t.Z,e.textTrackSelection);default:return r4(t.Z,[])}}function r4(t,e){if(0===e.length)return t.length?[t[0]]:[];const i=[];for(const s of t)e.indexOf(s.gs)>-1&&i.push(s);return i}function o4(t,e){if(!t.length)return[];const i=[...t].sort(SW),s=i.filter((t=>t.jG<=e));return s.length>0?[s.pop()]:[i.shift()]}var h4=class{async zie(){await this.Mxt.Nxt((async t=>{await this.qie(t),await this.Yie(t),await this.Kie(t),await this.jie(t)}))}async qie(t){const e=t.Oxt,i=this.vTt.o;await e.rT(i)}async Yie(t){const e=t.Lxt,i=t.xct,s=this.vTt.Cc.sources[0];if(!Kn(s))return;const n=eX(s.src),r=(await e.xxt(n,"manifestURL")).filter((t=>fh(t.references,this.vTt.o)));for(const t of r)_e(t.references,this.vTt.o),0===t.references.length?(await e.rT(t.key),await i.rT(t.key)):await e._Tt(t)}async Kie(t){const e=t.Bxt,i=this.Qie(),s=(await e.mxt(i)).filter((t=>fh(t.references,this.vTt.o)));for(const t of s)_e(t.references,this.vTt.o),0===t.references.length?await e.rT(t.key):await e._Tt(t)}Qie(){if(!this.FPt)return[];const t=this.vTt.Cc.sources[0];if(!Kn(t))return[];const e=eX(t.src),i=function(t){if(!t)return[];const e=[];for(const i of t.Ipt)for(const t of i.Kpt)for(const i of t.Z)for(const t of i.VC)t.die&&e.push(t.die);return function(t){return t.reduce(((t,e)=>(t.indexOf(e)<0&&t.push(e),t)),[])}(e)}(this.FPt).map((t=>({src:t}))).map((t=>eX(t.src)));return[e,...i]}async jie(t){const e=t.Fxt,i=(await e.kxt()).filter((t=>fh(t.references,this.vTt.o)));for(const t of i)_e(t.references,this.vTt.o),0===t.references.length?(await e.rT(t.key),this.Jie(t)):await e._Tt(t)}Jie(t){}constructor(t,e,i){this.vTt=t,this.Mxt=e,this.FPt=i}},a4=new class{ist(t,e,i){return new h4(t,e,i)}};r(),r();var u4=class{get wa(){return this.eu||(this.eu=function(t){return{renew(e){t.$ie(e)}}}(this)),this.eu}$ie(t){this.tse(t)}async tse(t){try{await this.ese.Uie(t)}catch(t){0,this.ux.aat(Ht.ERROR)}}constructor(t,e){this.ux=t,this.ese=e}},c4=class extends en{get jee(){return this.ese.jee}get wa(){return this.eu||(this.eu=function(t){let e;const i={get id(){return t.o},get status(){return t.Jk},get source(){return t.Cc},get parameters(){return t.AT},get duration(){return t.ct},get cached(){return t.ise.ks()},get secondsCached(){return t.sse},get percentageCached(){return t.nse},get bytes(){return t.rse},get bytesCached(){return t.ose},get license(){return t.IY.wa},start(){t.Sn()},pause(){t.PR()},remove(){t.rT()},addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)}};return e=new MD(t,["P3t","Qht"],i),i}(this)),this.eu}get o(){return this.jS}get IY(){return this.hse}get Jk(){return this.oat}aat(t){this.oat!==t&&(this.oat=t,this._o(new qu))}get Cc(){return this.Sc}get AT(){return this.ase}get ct(){return this.ese.Eie.OB}get ise(){return this.ese.Eie.rie}get sse(){return this.ese.Eie.nie}get nse(){return this.ese.Eie.oie}get rse(){return this.ese.xie}get ose(){return this.ese.Eie.iie}Sn(){this.oat===Ht.EVICTED||this.oat===Ht.DONE||this.use()}async use(){try{this.aat(Ht.LOADING);const t=new Fi;this.cse=t,await this.ese.pi(t.ep),this.aat(Ht.DONE)}catch(t){Se(t)?this.aat(Ht.IDLE):this.aat(Ht.ERROR)}finally{this.cse.Km()}}PR(){this.cse.np()}rT(){this.Jk===Ht.LOADING?(this.bn("Qht",this.evictOnLoading),this.PR()):this.lse()}async lse(){try{const t=await this.ese.Wie();await a4.ist(this,this.Mxt,t).zie(),this.ese.Eie=k3.aie,this.aat(Ht.EVICTED)}catch(t){0,this.aat(Ht.ERROR)}}constructor(t,e,i,s,n,r){super(),this.cse=new Fi,this.evictOnLoading=()=>{this.vn("Qht",this.evictOnLoading),this.lse()},this.jS=t,this.Sc=e,this.ase=i,this.Mxt=s,this.ese=n.ist(this,this.Mxt,r),this.hse=new u4(this,this.ese),this.oat=1===this.ese.Eie.oie?Ht.DONE:Ht.IDLE,this.ese.bn("P3t",(t=>{this.Ds(t),1===this.nse&&this.aat(Ht.DONE)}));const o=new Date,h=this.ase.expirationDate.getTime()-o.getTime();(function(t){return t<2147483647})(h)&&u((()=>this.lse()),h)}};var l4=class{Jee(t,e,i){const s=Ns();return this.zee(s,t,e,i)}zee(t,e,i,s){return new c4(t,e,i,this.Mxt,this.dse,s)}constructor(t,e){this.Mxt=t,this.dse=e}};r();var d4=30,f4=5;function _4(t){if(!t)throw new m("Unexpected - The cache parameters are undefined");const e=function(t){if(oi(t)&&!Xa(t,"%"))return x(t);return t}(t.amount);!function(t){if(function(t){return oi(t)&&Xa(t,"%")}(t)){const e=C(t);if(S(e)||e<0||e>100)throw new m("The amount as percentage must be between 0 and 100 percent.")}if(!oi(t)&&S(t))throw new m("The amount must be a number or a string")}(e);const i=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+d4),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||bd(t)&&t>new Date}(t))throw new m("Invalid expiration date for the cache parameters")}(i);const s=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(S(t)||t<0)throw new m("The bandwidth must be between zero and infinity.")}(s);const n=function(t){if(!t)return f4;if(S(t))throw new m("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:e,expirationDate:i,bandwidth:s,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}var v4=class{set Tte(t){this.fse=t,this._se=0,this.vse=0,this.gse=void 0}get Tte(){return this.fse}H5t(){if(!this.fse)return;const t=this.fse.D$t;for(;this._se<t.length;){const e=t[this._se];for(void 0===this.gse&&(this.gse=xn(e),this.vse=0);this.vse<this.gse.length;){const t=this.gse[this.vse];if(this.vse++,void 0!==t.FYt)return t.FYt}this._se++,this.gse=void 0}}nr(){for(this.Tte=void 0,this.zT.np(),this.zT=new Fi;this.pse.length;)this.nte()}wse(t){return new T3(this.Mxt.Oxt,t,"temporary")}async pXt(t){const e=a3(t.rjt,this.rJ.ads.allowedMimeTypes);if(!e.length)return;const i=await XR.Vm.EH(e,nc({sources:e}));if(!i.t._H())return;this.ese||(this.ese=new this.dse(this.WW));const s=this.Mxt,n=new l4(s,this.ese),r=this.wse(n).zee(nc({sources:i.Cc}),_4({amount:10,bandwidth:bu.Vm.VG()||this.XH.oQ}),"temporary");this.pse.push(r);const o=this.ese.ist(r,s,"temporary");this.zT.np(),this.zT=new Fi,Ts(o.pi(this.zT.ep),this.zT).then(M),this.yse(o,t)}constructor(t,e,i,s){this.pse=[],this._se=0,this.vse=0,this.ete=async()=>{const t=this.H5t();t&&await this.pXt(t)},this.nte=()=>{const t=this.pse.shift();null==t||t.rT()},this.yse=async(t,e)=>{let i=!1;for(;!i;)await t.Ay("P3t"),i=1===t.Eie.oie;e.ct<5&&this.ete()},this.rJ=t,this.WW=e,this.zT=new Fi,this.dse=i,this.XH=s,this.Mxt=new YX}};r(),r();var g4={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new ee([0,0]).cB,references:[]},m4={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},p4=class t extends CW{async Slt(t,e,i,s){try{return await super.Slt(t,e,i,s)}catch(t){ih(t)}const n=await this.bse.Slt(t,e,i,s);return await this.Ase(t,e,n),n}async Ase(e,i,s){if(void 0===this.Sse)return;const n=this.Mxt.Lxt,r=iX(e,i),o=await n.Vb(r);if(o)await s4(o,this.Sse,n,this.Yee);else try{const e={buffer:s},{segmentMetadataEntry:i,segmentEntry:n}=t.Hie(r,e,this.Sse);await this.Mxt.Nxt((async t=>{await t.Lxt._Tt(i,this.Yee),await t.xct._Tt(n,this.Yee)}))}catch(t){throw new I3("Unable to store segment with url: "+e,t)}}static Hie(t,e,i){return{segmentMetadataEntry:ne({},g4,{key:t,segmentURLsegmentByteRange:t,references:[i]}),segmentEntry:ne({},m4,{key:t,segmentURLsegmentByteRange:t,data:e,references:[i]})}}constructor(t,e,i,s,n){super(t),this.bse=new RW(e),this.Mxt=i,this.Sse=s,this.Yee=n}};var w4=class{ist(t,e,i){void 0===i&&(i="persistent");const s=t.Cc.sources[0];if(KT(s))throw new m("Caching THEOlive sources is not supported");const n=Boolean(s.useCredentials),r=new FV(this.WW,sA.oE),o=new tX(this.WW,n),h=new bt(e.Bxt,e.Lxt,e.xct,e.Fxt),a=function(t,e,i,s,n){return new p4(e,t,i,s,n)}(this.WW,h,e,t.o,i),u=new qX,c=new hX(oX(o,h),u,t);return this.Tse(t,e,c,u,r,a,i)}constructor(t){this.WW=t}},y4=class extends w4{Tse(t,e,i,s,n,r,o){return new i4(t,e,i,s,n,r,o,fV())}},b4=y4,A4=class t extends p2{get H2t(){return this}static get G2t(){return ji.j$t}get G2t(){return t.G2t}o7t(t,e,i){e===FF.Unt&&this.k8?uh(this.G5t([t])):this.kse.push(t)}CI(){return this.Ese.Fte?this.Ese.RI:this.dnt()}DI(t,e){}jd(){return this.Ese.ct}LI(){return this.Ese.MI}BI(){}FI(){}YI(){return this.Ese.qI}KI(t){this.qI!==t&&(this.Ese.qI=t,this._o(new Ar(this.RI,this.yR)))}$I(){return this.Ese.JI}uR(){return this.Ese.aR}lR(){return ee.WB().ks()}gR(){return this.Ese.vR}wR(){return this.Ese.pR}bR(){return this.Ese.yR}AR(t){this.yR!==t&&(this.Ese.yR=t,this._o(new Ar(this.RI,this.yR)))}async DR(){if(this.xse)return;this._o(new he(this.RI)),this.Ise(),this.kse.length&&(this.xse=this.G5t(this.kse),await this.xse,this.xse=void 0),await this.Rse.fte(this.na.CI());const t=this.Cse;4!==t&&1!==t&&5!==t||(!this.i0t&&this.Pse.length?this.Dse():this.i0t?(this.Nse=!0,this.Ese.DR()):(this.d2t(),this.na.DR()),this.Cse=3)}PR(){3===this.Cse&&(this.Ese.PR(),this.Cse=4)}tte(){this.Rse.tte()}Sn(){this.Cse=1,this.Rse.Sn()}async NR(){this.Rse&&(this.Rse.Tn(),this.Mse(!1),this.vee.NR(),this.Cse=5,this.i0t&&(this.Rse.Ste(this.i0t.yQt),this.i0t=void 0)),this.k8=!1,this.Nse=!1,En(this.Pse),this.i3t&&(this.d2t(),this.na.ge()),En(this.kse),await this.Ese.NR(),await this.Wte.nr()}zD(){this.Ese.IJt(),this.vee.IJt()}Ynt(t){this.kd.ads.allowSkipAdBreak&&(this.Lse=!0,this.Bse=t,this.zD())}RR(){this.Wte.RR(),this.Ise()}K2t(t){return!(t.type!==ns.Ly||!this.Rse||!this.Rse.ute(-1))&&(this.Rse.hte().then(M),!0)}ge(){void 0!==this.Ese.Ute&&(this.Wte.ge(),this.Ese.ge()),void 0!==this.vee.yee&&this.vee.ge()}be(){this.Wte.be(),this.Ese.be(),this.vee.be()}async G5t(t){const[e,i]=await g3.Mee(t,this.WW,this.z2t);if(e.length)this.Rse.bte(e),this.z2t._o(new un),this.i3t||this.na.JI||await this.Rse.fte(this.na.CI()),0!==this.Cse&&5!==this.Cse||this.Sn();else{if(0===i.length||i.some((t=>t!==lo.VAST_EMPTY_RESPONSE&&t!==lo.VAST_NO_ADS_AFTER_WRAPPER))){const t="Ads could not be loaded.";this.z2t._o(Qh.Q2t(new Ws(dt.ADBLOCK,lo.FILE_NOT_FOUND),t))}this.k8&&!this.i0t&&0===this.Pse.length&&this.Ose()}}pte(t){for(const e of t)fh(this.Pse,e)||this.Pse.push(e);for(const e of t)this.k8&&!this.i3t&&this.Dse()}async Dse(){if(2!==this.Cse&&!this.Fse){0,this.Fse=!0,this.Cse=2;const t=this.i0t;this.Vse(),this.i0t?(await this.i0t.yQt.j7t(this.z2t),this.Wse()||(this.Fse=!1),this.z2t._o(new u2(this.Use(this.i0t))),await this.Gse()):((null==t?void 0:t.yQt.Q7t())&&this.z2t._o(new $h(this.Use(t))),this.Fse=!1,this.Cse=1,this.Ose())}}Ose(){this.d2t(),this.na.ge(),this.na.MI?this.na._o(new ss(this.na.CI())):this.na.DR()}Vse(){let t;if(this.i0t&&this.Wse())t=this.i0t.yQt;else{if(0===this.Pse.length)return;t=this.Pse.shift()}if(!t)return;const e=t.Ic();e?this.i0t=e:(this.i0t&&(this.Rse.Ste(this.i0t.yQt),this.i0t=void 0),this.i0t=void 0)}async Gse(){const t=this.i0t?function(t){var e,i;const s=null==(i=t.YQt)||null==(e=i.AYt)?void 0:e.SYt();return void 0===s?void 0:new h1(s)}(this.i0t):void 0;if(t){if(!this.i0t)return;this.Zse=t,this.Hse(this.i0t.XYt),this.Xse(Rc.Gjt);const e=this.Zse.Ic();this.i0t.yQt.Q7t()&&(this.vee.zte(),1===this.i0t.yQt.Mut&&this.z2t._o(new XF(this.Use(this.i0t)))),await this.iee(e)}else this.Cse=1,this.Fse=!1,this.i0t=void 0,this.Dse()}async iee(t){if(t){var e;let s=ol(t.FYt),n=ol(t.UYt);var i;const r=null!=(i=null==(e=t.WYt)?void 0:e.lKt)?i:[],o=r.length>0,h=this.i0t,a=this.Use(h);if(t.FYt){if(t.FYt.sd=h,void 0!==h.urt.skipOffset){const e=va.XQt(h.urt.skipOffset,t.FYt.ct);void 0!==e&&e<t.FYt.ct&&(t.FYt.ajt=e)}const e=a.N$t(t.FYt,r,t.GYt,h.urt);this.vee.zte(),this.v4t(),await this.Ese.iee(e,t.lt,{width:this.na.we.offsetWidth,height:this.na.we.offsetHeight}),s=!0}if(t.UYt){const e=t.UYt.ZYt[0];if(e.sd=h,void 0!==h.urt.skipOffset){const t=va.XQt(h.urt.skipOffset,this.na.jd());t&&(e.sd.ajt=t)}const i=s?[]:r,o=a.M$t(e,i,t.UYt,t.GYt,h.urt);s&&this.Ese.mee(),await this.vee.iee(o,t.lt,{width:this.na.we.offsetWidth,height:this.na.we.offsetHeight}),n=!0}if(s){this.Cse=3,this.Ese.ge();const t=0===a.LOt;this.Nse=t,this.Wte.PR(),this.Ese.DR(),this.na.PR(),this.na.be(),this.v4t(),this.Ese.lee()}n&&(this.Cse=3,this.vee.ge(),this.vee.lee()),(s||n||o)&&this.zse(t.LYt),s||n||await this.qse(),!s&&n&&(this.Wse()||this.Pse.length>0?this.Dse():(this.Ose(),this.i0t=h))}else null===t?await this.qse():this.Mse(!0)}qse(){const t=this.Zse;return this.iee(t&&t.Ic())}Mse(t){this.Xse(Rc.Zjt),this.Yse(),this.Cse=1;const e=void 0!==this.i0t&&this.i0t.yQt.Y7t();if(this.Fse=!1,!e||this.Lse){if(!this.i3t)return;this.na.ge(),!this.na.MI&&t&&this.na.DR(),void 0!==this.Bse&&this.na.DI(this.Bse),this.d2t(),this.Lse=!1,this.Bse=void 0}else t&&(this.Cse=1,this.Dse())}d2t(){this.Kse(),super.d2t()}Kse(){if(this.na.MI&&(this.Cse=5),this.i0t){const t=this.i0t.yQt;t.Q7t()&&this.z2t._o(new $h(this.Use(this.i0t))),this.Rse.Ste(t),this.i0t=void 0}}Hse(t){this.jse=this.jse.concat(t)}Yse(){this.jse=[]}Qse(t){this.na.we.appendChild(t)}Xse(t){for(const e of this.jse)e.pz===t&&I$(e.eventURL)}zse(t){this.Ese.Nte(Rc.Ljt);for(const e of t)I$(e)}get Xnt(){return this.i0t?this.Use(this.i0t):null}get Znt(){return this.i0t?[this.Ese.Ute,this.vee.yee].filter(ol):[]}get znt(){const t=this.Pse.concat(this.Rse.znt.filter((t=>!t.F$t())));return Ye(t,(t=>t.G7t.zc.filter((t=>!t.F$t()))))}get qnt(){return this.Rse.znt.map((t=>t.G7t))}jnt(t){const e=this.a7t();for(const i of e)D$(i.sources,i.timeOffset)||t.K6(i,FF.Unt,!1)}a7t(){const t=[];for(const e of this.Znt.concat(this.znt))t.push(e.urt);const e=this.Pse.concat(this.Rse.znt.filter((t=>!t.F$t())));for(const i of e)for(const e of i.D$t)e.W||t.push(e.urt);return t.push(...this.kse),xo(t)}Wse(){return!!this.i0t&&xn(this.i0t).some((t=>t.FYt))}Use(t){return t.yQt.G7t}Nee(){return this.Jse}IR(){return this.Wte.IR()}AI(){return this.Wte.AI()}o3t(t){this.Rse.o3t(t)}async yn(){await super.yn(),this.na.vn(ns.ho,this.Ise),this.z2t.qK(this.Ese.z2t),this.z2t.qK(this.vee.z2t),this.z2t.qK(this.Rse),this.Ese.yn(),this.vee.yn(),await this.Wte.yn()}constructor(t,e,i,s,n,r){super(t,e),this.Pse=[],this.Cse=0,this.jse=[],this.Fse=!1,this.k8=!1,this.Nse=!0,this.Lse=!1,this.kse=[],this.$se=t=>{t.type===ns.ho&&this.Nse?this.Nse=!1:this._o(t)},this.Ise=()=>{this.k8=!0},this.tne=async()=>(this.Cse=1,await this.Ese.zte(),this.iee(this.Zse.Ic())),this.ene=async t=>{const e=new Ws(dt.PLAYBACK,lo.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.z2t._o(Qh.Q2t(e,t)),await this.Ese.zte(),this.iee(this.Zse.Ic())},this.ine=()=>(this.vee.zte(),this.iee(this.Zse.Ic())),this.sne=t=>{const e=new Ws(dt.PLAYBACK,lo.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.z2t._o(Qh.Q2t(e,t)),this.vee.zte(),this.iee(this.Zse.Ic())},this.WW=r,this.Wte=i,this.vee=new v3(this.sne,this.ine,this),this.Ese=new f3(this.ene,this.tne,this.vee,s,this,t.Hu,i),this.Qse(this.vee.kte),this.Qse(this.Ese.kte);const o=new v4(s,r,y4,n);this.Rse=new n3(this.na,this,this.z2t,o),this.Ese._y(this.$se),this.vee._y(this.Ds),this.z2t.ru(this.Ese.z2t),this.z2t.ru(this.vee.z2t),this.z2t.ru(this.Rse),this.Jse=new u1(this,this.na),this.Hu.bn(ln.mn,this.Ds),this.na.bn(ns.ho,this.Ise)}};Ch.Vm.nX(new class{get F2t(){return A4.G2t}sX(t){return t&&("string"!=typeof t.integration||t.integration===vu.DEFAULT||t.integration===vu.CSAI||t.integration===vu.THEO)}V2t(t,e,i){const s=new Vu(t.ant,t.Wl);s.Mst(t.we);const n=new JR(t.we,i,t.mI,t.snt,t.SR,s,t.Wl);return new A4(t,e,n,i,t.snt,t.mI)}K6(t,e,i,s){i.o7t(t,e,s)}Aq(t){const e=P0(t.sources);if(!e)return;const i={integration:vu.CSAI,sources:e};"vast"===i.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===i.sources.type&&void 0!==t.timeOffset&&vl("Do not set timeOffset for VMAP ad sources. VMAP ads have their own offsets included.");const s=N0(t.timeOffset);void 0!==s&&(i.timeOffset=s);const n=N0(t.skipOffset);return void 0!==n&&(i.skipOffset=n),i}}),r(),r();var S4=class{nQ(){var t;this.g9||(null==(t=this.k7t)||t.initialize(),this.g9=!0)}get kte(){return this.r1t}get nne(){return this.rne.offsetHeight}get hne(){return this.rne.offsetWidth}get ane(){return this.k7t}une(t){"linear"===t?this.r1t.style.marginTop="0px":"nonlinear"===t&&(this.r1t.style.marginTop="-45px")}ge(){this.r1t.style.opacity="1",this.r1t.style.pointerEvents=""}be(){this.r1t.style.opacity="0",this.r1t.style.pointerEvents="none"}Km(){var t;null==(t=this.k7t)||t.destroy(),this.k7t=void 0}constructor(t,e){this.k7t=void 0,this.g9=!1,this.Tit=t;const i=h.createElement("div");i.className="theoplayer-ima-wrapper",Ka(i),i.style.zIndex="10",Ya.Qs&&function(t,e){t.addEventListener(e,Pd)}(i,"mousedown"),e.appendChild(i);const s=h.createElement("div");s.className="theoplayer-ima",s.style.height="100%",this.rne=s,i.appendChild(s),this.r1t=i,this.k7t=new google.ima.AdDisplayContainer(this.rne,this.Tit)}};r(),r(),r();var T4=class{get jKt(){return this.cne.getAdId()}get Q9t(){const t=this.cne.getAdPodInfo();if(void 0!==t)try{return{d9t:t.getAdPosition(),I$t:t.getMaxDuration(),lne:t.getPodIndex(),LOt:t.getTimeOffset(),f9t:t.getTotalAds(),dne:t.getIsBumper()}}catch(t){return}}get PYt(){return this.cne.getAdSystem()}get fne(){return this.cne.getAdvertiserName()}get bKt(){var t;return null!=(t=this.cne.getApiFramework())?t:void 0}get WYt(){return this.dKt.map((t=>({SKt:t.getAdSlotId(),Fk:t.getContentType(),I3t:t.getContent(),Ti:t.getHeight(),ji:t.getWidth()})))}get Fk(){var t;return null!=(t=this.cne.getContentType())?t:void 0}get iKt(){return this.cne.getCreativeId()}get W8t(){return this.cne.getCreativeAdId()}get _ne(){return this.cne.getDealId()}get QN(){return this.cne.getDescription()}get ct(){return this.cne.getDuration()}get ji(){return this.cne.getWidth()}get Ti(){return this.cne.getHeight()}get ljt(){var t;return null!=(t=this.cne.getMediaUrl())?t:void 0}get vne(){return this.cne.getMinSuggestedDuration()}get F8t(){return this.cne.getSkipTimeOffset()}get gne(){return this.cne.getSurveyUrl()}get NZ(){return this.cne.getTitle()}get B8t(){return this.cne.getTraffickingParameters()}get O8t(){return this.cne.getTraffickingParametersString()}get GYt(){return this.cne.getUniversalAdIds().map((t=>({U8t:t.getAdIdRegistry(),G8t:t.getAdIdValue()})))}get D7t(){return this.cne.getUiElements()}get V8t(){return this.cne.getVastMediaBitrate()}get M8t(){return this.cne.getVastMediaHeight()}get N8t(){return this.cne.getVastMediaWidth()}get R8t(){return this.cne.getWrapperAdIds()}get C8t(){return this.cne.getWrapperAdSystems()}get P8t(){return this.cne.getWrapperCreativeIds()}get Z9t(){return this.cne.isLinear()}constructor(t){this.cne=t;const e=new google.ima.CompanionAdSelectionSettings;e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,e.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,e.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,this.dKt=t.getCompanionAds(0,0,e)}};function k4(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}var E4=class extends So{AR(t){var e;null==(e=this.P$t)||e.setVolume(t)}bR(){return this.P$t.getVolume()}d8t(){return this.P$t.getRemainingTime()}Km(){En(this.Oc),this.Ku.vn(ln.mn,this.mne),this.P$t.removeEventListener(google.ima.AdEvent.Type.LOADED,this.pne),this.P$t.removeEventListener(k4(),this.forwardAdEventListener),this.P$t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener),this.P$t.destroy()}Sn(){this.P$t.start()}b7t(){this.P$t.resume()}PR(){this.P$t.pause()}zD(){this.P$t.skip()}NR(){this.P$t.stop()}Y9t(){const t=this.P$t.getCurrentAd();if(t)return this.wne(t)}x7t(){return this.P$t.getCuePoints()}wne(t){let e=Do(this.Oc,(e=>e.cne===t));return e||(e=new T4(t),this.Oc.push(e)),e}B7t(t){this.P$t.updateAdsRenderingSettings(C4(t))}constructor(t,e,i){super(),this.Oc=[],this.pne=t=>{t.getAd().isLinear()?this.k7t.une("linear"):this.k7t.une("nonlinear")},this.mne=()=>{this.P$t.resize(this.k7t.hne,this.k7t.nne,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const e=t.getAd(),i=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:Qe.Q5t,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:Qe.J5t,[google.ima.AdEvent.Type.CLICK]:Qe.$5t,[google.ima.AdEvent.Type.DURATION_CHANGE]:Qe.Dy,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:Qe.t6t,[google.ima.AdEvent.Type.STARTED]:Qe.e6t,[google.ima.AdEvent.Type.IMPRESSION]:Qe.i6t,[google.ima.AdEvent.Type.PAUSED]:Qe.rX,[google.ima.AdEvent.Type.RESUMED]:Qe.s6t,[google.ima.AdEvent.Type.AD_PROGRESS]:Qe.n6t,[google.ima.AdEvent.Type.AD_BUFFERING]:Qe.r6t,[google.ima.AdEvent.Type.FIRST_QUARTILE]:Qe.o6t,[google.ima.AdEvent.Type.MIDPOINT]:Qe.Rjt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:Qe.h6t,[google.ima.AdEvent.Type.COMPLETE]:Qe.Cjt,[google.ima.AdEvent.Type.USER_CLOSE]:Qe.a6t,[google.ima.AdEvent.Type.LINEAR_CHANGED]:Qe.u6t,[google.ima.AdEvent.Type.LOADED]:Qe.c6t,[google.ima.AdEvent.Type.AD_CAN_PLAY]:Qe.l6t,[google.ima.AdEvent.Type.AD_METADATA]:Qe.d6t,[google.ima.AdEvent.Type.AD_BREAK_READY]:Qe.f6t,[google.ima.AdEvent.Type.INTERACTION]:Qe._6t,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:Qe.v6t,[google.ima.AdEvent.Type.SKIPPED]:Qe.g6t,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:Qe.m6t,[google.ima.AdEvent.Type.LOG]:Qe.p6t,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:Qe.w6t,[google.ima.AdEvent.Type.VOLUME_CHANGED]:Qe.y6t,[google.ima.AdEvent.Type.VOLUME_MUTED]:Qe.b6t}[t]}(t.type),s={type:i,date:new Date,trt:e?this.wne(e):void 0,M9t:x2(i,t.getAdData())};this._o(s)},this.forwardAdErrorEventListener=t=>{this._o({date:new Date,trt:void 0,type:k2.A6t,M9t:{v8t:C2(t.getError())}})},this.P$t=t,this.k7t=e,this.Ku=i,this.Ku.bn(ln.mn,this.mne),this.P$t.init(this.k7t.hne,this.k7t.nne,google.ima.ViewMode.NORMAL),this.P$t.addEventListener(google.ima.AdEvent.Type.LOADED,this.pne),this.P$t.addEventListener(k4(),this.forwardAdEventListener),this.P$t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener)}};r();var x4=class extends $s{get yne(){return this.bne}get kte(){return this.r1t}ka(){return new I4(this.bne)}constructor(t,e){super("V7t"),this.bne=t,this.r1t=e}},I4=class extends me{get adsManager(){return this.bne}constructor(t){super("adsmanagerloaded"),this.bne=t}},R4=class extends So{A7t(){var t;null==(t=this.S7t)||t.contentComplete()}async G5t(t,e,i){if(this.Ane)throw new m("Only one ImaAdsRequest can be made at a time.");if(!this.Sne.ane)throw new m("AdDisplayContainer is not initialized.");this.S7t=new google.ima.AdsLoader(this.Sne.ane),this.S7t.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.S7t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.Ane=new is,this.Tne=e,this.kne=i;const s=new google.ima.AdsRequest;return t.i5t?s.adTagUrl=t.i5t:t.s5t&&(s.adsResponse=t.s5t),s.linearAdSlotWidth=t.j4t,s.linearAdSlotHeight=t.Q4t,s.nonLinearAdSlotWidth=t.J4t,s.nonLinearAdSlotHeight=t.$4t,s.contentDuration=t.r5t,s.setAdWillAutoPlay(t.t5t),s.setAdWillPlayMuted(t.e5t),t.n5t&&(s.omidAccessModeRules=t.n5t),this.S7t.requestAds(s),this.Ane.Xb}Km(){var t;void 0!==this.S7t&&(this.S7t.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.S7t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.S7t.destroy(),this.S7t=void 0),null==(t=this.Ane)||t.Hb("AdsLoader destroyed"),this.Ane=void 0}constructor(t,e){super(),this.onAdsManagerLoadedListener=t=>{if(this.Tne&&this.kne&&this.Ane){var e;const i=C4(this.kne),s=this.Tne,n=t.getAdsManager({get currentTime(){return s.RI},get duration(){return s.ct}},i),r=new E4(n,this.Sne,this.Ku);this._o(new x4(n,this.Sne.kte)),null==(e=this.Ane)||e.Zb(r),this.Ane=void 0}},this.onAdsManagerErrorListener=t=>{var e;const i={Tb:t.getError().getMessage(),_9t:t.getError().getVastErrorCode(),hQt:t.getError().getErrorCode(),zw:I2(t.getError().getType()),v9t:void 0};null==(e=this.Ane)||e.Hb(i),this.Ane=void 0},this.Ku=e,this.Sne=t}};function C4(t){const e=new google.ima.AdsRenderingSettings;return e.enablePreloading=t.N7t,t.D7t&&(e.uiElements=t.D7t),e.mimeTypes=t.P7t,void 0!==t.L7t&&(e.playAdsAfterTime=t.L7t),void 0!==t.M7t&&(e.loadVideoTimeout=t.M7t),void 0!==t.L8t&&(e.bitrate=t.L8t),void 0!==t.L7t&&(e.playAdsAfterTime=t.L7t),e.restoreCustomPlaybackStateOnAdBreakComplete=!0,e}r();var P4=class extends So{get RI(){return this.na.dR?this.Ene:this.na.CI()}get ct(){return this.na.jd()}get qI(){return this.na.qI}get yR(){return this.na.yR}nr(){this.Ene=0}constructor(t){super(),this.na=t,this.Ene=this.na.CI(),this.na.bn(ns._b,(()=>{this.na.dR||(this.Ene=this.na.CI()),this._o(new rl(this.RI,void 0))}))}};Q2.Vm.registerWebImaAdPlayerConstructor((function(t,e,i){Y2(i);const s=K2(i)?t.IR():void 0,n=new S4(s,t.we),r=new R4(n,t.Hu),o=new P4(t);return new j2(t,e,i,t.rnt,n,r,o)})),r(),r(),r();var D4=class extends gc{get xne(){return this.na===this.ynt?this.a4t:this.ynt}pr(t,e,i,s,n){(n||!s.JI||s.MI)&&this.na.DR()}DI(t,e){}xI(t){}Ine(t,e){const i=t-this.a4t.Rne;return super.DI(i,e)}Cne(t){return super.xI(t)}II(){return this.ynt.bt}iu(){return this.ynt.iu()}jd(){return this.ynt.jd()}lR(){const t=ee.Cn(this.ynt.lR()).Pb(this.a4t.Rne);if(this.Pne())return t.ks();const e=ee.Cn(this.a4t.lR());let i=e;return c6(this.ynt)||(i=t.AB(e)),i=i.jn(ee.VB(0,this.CI())),i.ks()}CI(){return this.Dne(super.CI())}Dne(t){return this.a4t.Nne?this.a4t.Nne:this.na===this.a4t?this.a4t.Mne+t:this.a4t.Rne+t}EI(){return this.Lne(super.CI())}Lne(t){return this.a4t.Bne?this.a4t.Bne:this.na===this.a4t&&this.a4t.One?new Date(this.a4t.One.getTime()+1e3*t):this.ynt.kI}TI(){const t=ee.Cn(this.ynt.TI()).Pb(this.a4t.Rne);if(this.Pne())return t.ks();const e=ee.Cn(this.a4t.TI());if(t.Tn(t.V-1)<e.Sn(0))return e.ks();return t.AB(e).ks()}GR(t){switch(t.type){case ns._b:return this._o(new rl(this.Dne(t.currentTime),t.currentProgramDateTime)),!0;case ns.jy:return this._o(new ki(this.Dne(t.currentTime))),!0;case ns.ho:return this._o(new he(this.Dne(t.currentTime))),!0;case ns.Ky:return this._o(new nl(this.Dne(t.currentTime))),!0;case ns.Ly:return this._o(new ss(this.Dne(t.currentTime))),!0;case ns.ib:return this._o(new Al(this.Dne(t.currentTime))),!0;case ns.eb:return this._o(new Be(this.Dne(t.currentTime))),!0;case ns.Qy:return this._o(new ga(this.Dne(t.currentTime),t.playbackRate)),!0;case ns.vb:return this.Fne?(this._o(new Ar(this.Dne(t.currentTime),t.volume)),!0):(this.Fne=!0,!0);case ns.Ny:return this._o(new $t(this.Dne(t.currentTime),t.readyState)),!0;case Zc.nB:return this._o(new rt(this.Dne(t.currentTime),t.readyState)),!0;case Zc.rB:return this._o(new $i(this.Dne(t.currentTime),t.readyState)),!0;case Zc.oB:return this._o(new uo(this.Dne(t.currentTime),t.readyState)),!0;case Zc.hB:return this._o(new vo(this.Dne(t.currentTime),t.readyState)),!0;case Zc.aC:return this._o(new oa(this.Dne(t.currentTime),t.readyState)),!0;case Zc.aB:return this._o(new Pa(this.Dne(t.currentTime))),!0;case Zc.uB:return this._o(new Xr(this.Dne(t.currentTime))),!0;case ns.My:return this._o(new Su(this.Dne(t.currentTime),t.initDataType,t.initData)),!0}return super.GR(t)}async yn(){await super.yn(!0)}constructor(t,e,i){super(i),this.Fne=!0,this.ynt=t,this.a4t=e}};function N4(t,e){e.qI=t.qI,e.yR=t.yR,e.tR=t.tR}r();var M4=class extends D4{pr(t,e,i,s,n){super.pr(t,e,i,s,n),this.xne.PR();this.Vne(e,i).style.display="block"}dr(t,e,i){this.Vne(e,i).style.display="none"}constructor(t,e,i){super(t,e,i)}},L4=class extends M4{Pne(){return!0}Vne(t,e){return t}Wne(t,e){return e}DI(t,e){return super.Ine(t,e)}xI(t){return super.Cne(t)}constructor(t,e){super(t,e,t)}},B4=class extends D4{Pne(){return!1}pr(t,e,i,s,n){super.pr(t,e,i,s,n),this.Fne=!1,this.na.Une(),e.style.display="block"}dr(t,e,i){this.na.Gne(),e.style.display="none"}jd(){return this.na.jd()}constructor(t,e){super(t,e,e)}},O4=class extends M4{Pne(){return!1}Vne(t,e){return e}Wne(t,e){return t}pr(t,e,i,s,n){super.pr(t,e,i,s,n);for(const t of[e,i])t.style.transition=""}dr(t,e,i){super.dr(t,e,i)}constructor(t,e){super(t,e,e)}};function F4(t){return t instanceof B4}r(),r();var V4=class extends $s{ka(){return new W4(this.interstitial.Hnt())}constructor(t){super("Zne"),this.interstitial=t}},W4=class extends me{constructor(t){super("interstitialupdate"),this.interstitial=t}},In=function(t){return t.SINGLE="SINGLE",t.DOUBLE="DOUBLE",t.LSHAPE_AD="LSHAPE_AD",t.LSHAPE_CONTENT="LSHAPE_CONTENT",t}({}),U4=class extends So{get Hne(){var t,e;const i=null!=(e=null!=(t=this.Xne)?t:this.FA)?e:this.OFt;return void 0!==i?this.lF+i:this.TF?this.TF:void 0}get ct(){const t=this.Hne;return void 0===t?void 0:t-this.lF}get P3t(){var t;return null!=(t=this.D3t)?t:0}zne(t){if(!this.ct)return;const e=(t-(this.lF+this.qne))/this.ct;e<this.P3t||(this.D3t=_.min(e,1),1===this.D3t&&(this.sR=!0))}ir(t){var e,i,s,n;this.FA=null!=(e=t.ct)?e:this.FA,this.TF=null!=(i=t.dF)?i:this.TF,this.Xne=null!=(s=t.Yne)?s:this.Xne,this.qne=null!=(n=t.Kne)?n:this.qne,this.jne(),this._o(new V4(this))}jne(){void 0===this.FA&&void 0!==this.TF?this.FA=this.TF-this.lF:void 0===this.TF&&void 0!==this.FA&&(this.TF=this.lF+this.FA)}constructor(t){super(),this.qne=0,this.sR=!1,this.o=t.o,this.lF=t.lF,this.TF=t.dF,this.OFt=t.JBt,this.FA=t.ct,this.Xne=t.Yne,this.svt=t.svt,this.Qne=t.Qne,this.jne()}};r();var G4=class extends D4{Pne(){return!0}pr(t,e,i,s,n){super.pr(t,e,i,s,n),N4(this.na,this.xne),this.xne.qI=!0,this.Jne=this.ynt.nt.mC.filter((t=>t.LE===Ui.Qn));for(const t of this.Jne)t.LE=Ui.Mh;t.style.backgroundImage="url('"+this.$ne+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center",e.style.display="block",e.style.width="45%",e.style.transform="scale("+100/45+")",e.style.transformOrigin="left center",i.style.right="0",i.style.display="block",i.style.width="45%",i.style.transformOrigin="right center",i.style.transform="scale(0)",i.getBoundingClientRect(),i.style.transition="transform 1s ease-in-out",i.style.transform="scale(1) translateX(-"+2.5/45*100+"%)",e.style.transition="transform 1s ease-in-out",e.style.transform="scale(1) translateX("+2.5/45*100+"%)"}dr(t,e,i){var s;e.style.width="100%",e.style.transform="scale(0.45) translateX("+2.5/45*100+"%)",e.style.transformOrigin="left center",e.style.transition="",e.getBoundingClientRect(),e.style.transform="",e.style.transition="transform 1s ease-in-out",e.addEventListener("transitionend",this.tre),i.style.transform="scale(0)",i.addEventListener("transitionend",this.ere);for(const t of null!=(s=this.Jne)?s:[])t.LE=Ui.Qn;this.Jne=void 0}BI(){return this.ynt.BI()||this.a4t.BI()}FI(){return this.ynt.FI()||this.a4t.FI()}uR(){return _.min(this.ynt.aR,this.a4t.aR)}DR(){this.ynt.DR(),this.a4t.DR()}PR(){this.ynt.PR(),this.a4t.PR()}constructor(t,e,i){super(t,e,e),this.Jne=void 0,this.tre=t=>{const e=t.target;e.removeEventListener("transitionend",this.tre),e.style.transform="",e.style.transition="",e.style.transformOrigin=""},this.ere=t=>{const e=t.target;e.removeEventListener("transitionend",this.ere),e.style.display="none",e.style.width="100%",e.style.right="",e.style.transition="",e.style.transform="",e.style.transformOrigin=""},this.$ne=i}};r();var Z4=class extends D4{pr(t,e,i,s,n){super.pr(t,e,i,s,n),t.style.backgroundImage="url('"+this.$ne+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center",this.xne.PR();const r=this.Vne(e,i);r.style.display="block",r.getBoundingClientRect();for(const t of[e,i])t.style.transform="\n                translate(-50%, -50%)\n                scale(calc(43/60))\n                translate(calc(50% + 100%/30), calc(50% + 100%/30))\n            ",t.style.transition="transform 1s ease-in-out"}dr(t,e,i){const s=this.Vne(e,i);s.style.display="none",s.style.transform="",s.style.transition="";const n=this.Wne(e,i);n.style.display="",n.getBoundingClientRect(),n.style.transform="",n.addEventListener("transitionend",this.ire)}constructor(t,e,i,s){super(t,e,i),this.ire=t=>{const e=t.target;e.removeEventListener("transitionend",this.ire),e.style.transition=""},this.$ne=s}},H4=class extends Z4{Pne(){return!0}Vne(t,e){return t}Wne(t,e){return e}constructor(t,e,i){super(t,e,t,i)}},X4=class extends Z4{Pne(){return!1}Vne(t,e){return e}Wne(t,e){return t}constructor(t,e,i){super(t,e,e,i)}};r();function z4(t){const e=t.style;e.boxSizing="border-box",e.position="absolute",e.display="none",e.border="0 solid transparent",e.borderWidth="0px",e.width="100%",e.height="100%"}function q4(t){const e=t.style;e.display="",e.backgroundColor="",e.backgroundRepeat="",e.backgroundAttachment="",e.border="",e.borderWidth="",e.flex="",e.transform="",e.transition="",e.backgroundImage="",e.backgroundSize="",e.backgroundPosition="",e.alignItems="",e.position=""}function Y4(t,e,i,s,n){const r=e/i;let o=1,h=0,a=0;if(r>=s/n){const t=s/r;h=(n-t)/2,o=t/i}else{const t=n*r;a=(s-t)/2,o=t/e}t.style.left=a/s*100+"%",t.style.top=h/n*100+"%",t.style.width=e*o/s*100+"%",t.style.height=i*o/n*100+"%"}function K4(t){return!Cl(t.Iyt,"theo-ads://dai.break")}r(),r(),r();var j4=class extends gc{pr(t,e){}dr(t){}},Q4=class extends j4{pr(t,e){e.style.backgroundImage="url('"+this.$ne+"')",e.style.backgroundSize="contain",e.style.backgroundPosition="center",t.style.transition="transform 1s ease-in-out",t.style.transform="\n          translate(-50%, -50%)\n          scale(calc(43/60))\n          translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        "}dr(t){t.style.transform="",t.addEventListener("transitionend",this.ire)}constructor(t,e){super(t),this.ire=t=>{const e=t.target;e.removeEventListener("transitionend",this.ire),e.style.transition="transform 1s ease-in-out"},this.$ne=e}};r();var J4=class extends $s{ka(){return new $4(this.interstitial.Hnt())}constructor(t){super("sre"),this.interstitial=t}},$4=class extends me{constructor(t){super("interstitialbegin"),this.interstitial=t}};function t5(t){return{get id(){return t.o},get duration(){return t.ct},get startTime(){return t.lF},get type(){return"adbreak"},get layout(){return function(t){switch(t){case In.SINGLE:return"single";case In.DOUBLE:return"double";case In.LSHAPE_CONTENT:case In.LSHAPE_AD:return"l-shape"}}(t.nre)},get ads(){return t.zc.map((t=>t.Hnt()))},get backdropUri(){return t.rre}}}r(),r(),r(),r();var e5=function(t){return t.image="image",t}({}),i5=function(t){return t.png="png",t.svg="svg",t}({}),s5=class extends U4{get zw(){return"overlay"}get DKt(){return this.ore}get hre(){return this.are}ir(t){var e,i;this.are=null!=(e=t.imageUrl)?e:this.are,this.ore=null!=(i=t.clickThrough)?i:this.ore,super.ir(t)}Hnt(){var t;return null!=(t=this.eu)?t:this.eu=function(t){return{get type(){return"overlay"},get id(){return t.o},get duration(){return t.ct},get startTime(){return t.lF},get clickThrough(){return t.DKt},get imageUrl(){return t.hre},get position(){return function(t){return{get top(){return t.gtt},get bottom(){return t._tt},get left(){return t.ftt},get right(){return t.dtt}}}(t.fo)},get size(){return function(t){return{get width(){return t.ji},get height(){return t.Ti}}}(t.Ob)}}}(this)}constructor(t){super(t),this.ure=t.zw,this.fo=t.fo,this.Ob=t.Ob,this.lre=t.lre,this.dre=t.dre,this.qjt=t.qjt,this.ore=t._re}};r();var n5=class extends U4{get zw(){return"adbreak"}get zc(){return this.Oc}ir(t){var e;t.ad&&this.Oc.push(t.ad),this.rre=null!=(e=t.backdropUri)?e:this.rre,super.ir(t)}Hnt(){var t;return null!=(t=this.eu)?t:this.eu=t5(this)}constructor(t){super(t),this.Oc=[],this.Iyt=t.Iyt,this.nre=t.nre||In.SINGLE,this.vre=t.vre,this.mre=t.mre,this.rre=t.wre,this.yre=t.yre}},r5="com.theoplayer.theoads.interstitial",o5="com.theoplayer.theoads.overlay",h5=class{get Are(){return this.Sre}Tre(t){this.kre=new EventSource(t),this.kre.addEventListener("adbreak",this.Ere),this.kre.addEventListener("streaminfo",this.xre)}Ire(t){if(!fh(this.Rre,t)){this.Rre.push(t);for(const e of t.mC)this.Cre(e);t.bn(je.XR,this.qn),t.bn(je.qR,this.zn)}}Pre(t){if(fh(this.Rre,t)){_e(this.Rre,t),t.vn(je.XR,this.qn),t.vn(je.qR,this.zn);for(const e of t.mC)this.Dre(e)}}Cre(t){!this.Nre&&function(t){return t.Lt===Hi.xW&&t.zw===Hr.DATE_RANGE}(t)&&this.Mre!==t?this.Lre(t):this.Nre&&function(t){return t.Lt===Hi.xW&&t.zw===Hr.ID3}(t)&&this.Bre!==t&&this.Ore(t)}Dre(t){this.Mre===t?this.Lre(void 0):this.Bre===t&&this.Ore(void 0)}Lre(t){const e=this.Mre;if(void 0!==e){if(e.L)for(const t of e.L.mC)this.Fre(t);e.vn(gs.KR,this.Vre),e.vn(gs.$R,this.Wre),e.vn(gs.eC,this.Ure),e.vn(gs.QR,this.Gre),e.LE=Ui.GC}if(this.Mre=t,void 0!==t){if(t.L)for(const e of t.L.mC)this.Zre(e);t.bn(gs.KR,this.Vre),t.bn(gs.$R,this.Wre),t.bn(gs.eC,this.Ure),t.bn(gs.QR,this.Gre),t.LE=Ui.GC}}Ore(t){const e=this.Bre;if(void 0!==e){if(e.L)for(const t of e.L.mC)this.Fre(t);e.vn(gs.KR,this.Hre),e.vn(gs.eC,this.Ure),e.vn(gs.QR,this.Gre),e.LE=Ui.GC}if(this.Bre=t,void 0!==t){if(t.L)for(const e of t.L.mC)this.Xre(e);t.bn(gs.KR,this.Hre),t.bn(gs.eC,this.Ure),t.bn(gs.QR,this.Gre),t.LE=Ui.GC}}zre(t){try{var e,i;const s=JSON.parse(t.data),n=s.networkCode,r=null==(e=s.assetKeys)?void 0:e[0];this.Yre.qre(n,r),null==(i=this.kre)||i.removeEventListener("streaminfo",this.xre)}catch(t){As.uw("Error parsing the Server sent stream info",t)}}Kre(t){const e=this.Yre.kI;if(void 0!==e)try{const n=JSON.parse(t.data);var i;const r=null!=(i=n.podDuration)?i:n.adBreakDuration;if(void 0===r)return void As.uw("Tried to schedule an ad break without knowing the duration");const o=(Date.parse(n.startDate)-e.getTime())/1e3;if(o<=-r)return;const h="theo-ads://dai.break/?d="+r,a=this.Yre.CI()+o,u=n.networkCode,c=n.assetKey,l=n.podId?x(n.podId):void 0;var s;const d=new n5({o:n.id,lF:a,Iyt:null!=(s=n.assetURI)?s:h,nre:this.jre||In[n.layout],vre:u,mre:c,JBt:r,Qne:l,wre:n.backdropURI,svt:n.startPTS,yre:n.eabnVersion});this.Qre(d,void 0)}catch(t){As.uw("Error parsing the Server sent event",t)}else As.uw("Tried to schedule an ad break without knowing the Program Date Time of the player")}Zre(t){if((t.jBt===r5||t.jBt===o5)&&t.$Bt["X-ASSET-URI"])switch(t.jBt){case o5:this.Jre(t);break;case r5:this.$re(t)}}Jre(t){try{var e;if(void 0===t.ct&&void 0===t.JBt)return;const i=atob(t.$Bt["X-COM-THEOPLAYER-THEOADS-OVERLAY-PROPERTIES"]),s=JSON.parse(i),n=e5[s.type],r=this.Yre.toe(t.lF),o=isFinite(t.dF)?this.Yre.toe(t.dF):void 0,h=new s5({o:t.o,zw:n||e5.image,lF:r,dF:o,ct:t.ct,JBt:t.JBt,fo:u5(s.position),Ob:c5(s.size),lre:s.opacity,dre:a5(s.gamProperties),qjt:null==(e=s.resourceURI)?void 0:e.map((t=>function(t){const e=i5[t.type];let i=t.default;Ya.Qs&&t.phone?i=t.phone:Ya.gm&&t.tv&&(i=t.tv);return{zw:e,Iyt:i}}(t))),_re:s.clickThroughURI});this.Qre(h,t)}catch(t){As.uw(t)}}$re(t){const e=t.$Bt["X-RESUME-OFFSET"];if(void 0===t.ct&&void 0===t.JBt&&void 0===e)return;const i=this.eoe||t.$Bt["X-ASSET-URI"],s=As.Bh(i);var n;const r=null!=(n=s.searchParams.get("n"))?n:void 0;var o;const h=null!=(o=s.searchParams.get("k"))?o:void 0,a=this.Yre.toe(t.lF),u=isFinite(t.dF)?this.Yre.toe(t.dF):void 0;let c;(function(t){return Cl(t,"theo-ads://dai.break")})(i)&&(c=function(t){const e=t.split("?")[1],i={},s=new URLSearchParams(e);return i.d=Number(s.get("d"))||void 0,i.k=s.get("k")||void 0,i.n=s.get("n")||void 0,i.p=Number(s.get("p"))||void 0,i}(i));const l=new n5({o:t.o,lF:a,Iyt:i,nre:this.jre||In[t.$Bt["X-COM-THEOPLAYER-THEOADS-LAYOUT"]]||In.SINGLE,vre:r,mre:h,wre:t.$Bt["X-COM-THEOPLAYER-THEOADS-BACKDROP"],dF:u,ct:t.ct,JBt:t.JBt,Qne:null==c?void 0:c.p,Yne:void 0!==e?Number(e):void 0});this.Qre(l,t),this.ioe=l}Xre(t){const e=t.U;if(!function(t){return"GEO"===t.id||"GEOB"===t.id}(e)||!function(t){return"Anvatos"===t.description&&"application/json"===t.mimeType}(e))return;const i=Dn(new DataView(e.data),new er),s=new lu(i),n=s.get("type");if("cue"===n){let e=Number(s.get("duration"))/1e3||void 0;const i=new lu(s.get("payload")),n=Number(i.get("dur"))||void 0,r=Number(i.get("s_bd"))||void 0;if(void 0!==n?e=n:void 0!==r&&(e=r/10),!e)return void 0;const o="theo-ads://dai.break/?d="+e,h=Number(s.get("pts"))||void 0,a=this.Yre.toe(t.lF),u=new n5({o:this.eoe||t.o,lF:a,Iyt:o,nre:this.jre||In.SINGLE,JBt:e,svt:h});this.Qre(u,t)}else if("cue_end"===n){const e=this.ioe;e&&e.ir({ct:this.Yre.toe(t.lF)-e.lF})}}soe(t){const e=this.noe.get(t.OC);e&&this.Yre.roe(e.lF)}ooe(t){for(const e of this.Sre)if(t.o===e.o&&t.zw===e.zw)return!0;return!1}hoe(t){const e=[];if(0===this.Yre.lR().length)return As.aw("Seekable is undefined."),!1;const i=this.Yre.lR().start(0);for(const s of this.aoe)if(s.Hne<i)e.push(s);else if(t.o===s.o&&t.zw===s.zw)return!0;for(const t of e)_e(this.aoe,t);return!1}Qre(t,e){var i;const s=t.lF+(null!=(i=t.ct)?i:1/0);this.ooe(t)||this.hoe(t)||this.Yre.CI()>=s||(this.Sre.push(t),e?this.noe.set(e.OC,t):this.aoe.push(t),this.Yre.Qre(t))}uoe(t){const e=this.noe.get(t.OC);if(void 0===e)return;const i=t.$Bt["X-RESUME-OFFSET"],s=isFinite(t.dF)?this.Yre.toe(t.dF):void 0;e.ir({ct:t.ct,dF:s,Yne:void 0!==i?Number(i):void 0})}Fre(t){this.coe(t)}coe(t){void 0!==this.noe.get(t.OC)&&this.noe.delete(t.OC)}loe(t){t.forEach((t=>this.doe(t)))}doe(t){_e(this.Sre,t)}nr(){var t,e,i;this.ioe=void 0,this.Lre(void 0),this.Ore(void 0);for(const t of this.Rre.slice())this.Pre(t);En(this.Rre),En(this.Sre),En(this.aoe),this.noe.clear(),null==(t=this.kre)||t.removeEventListener("adbreak",this.Ere),null==(e=this.kre)||e.removeEventListener("streaminfo",this.xre),null==(i=this.kre)||i.close(),this.kre=void 0}yn(){this.nr()}constructor(t){this.Nre=!1,this.Sre=[],this.aoe=[],this.noe=Bh(),this.Rre=[],this.qn=t=>{this.Cre(t.Ht)},this.zn=t=>{this.Dre(t.Ht)},this.Vre=t=>{this.Zre(t.uF)},this.Hre=t=>{this.Xre(t.uF)},this.Ure=t=>{this.soe(t.uF)},this.Gre=t=>{this.Fre(t.uF)},this.Wre=t=>{this.uoe(t.uF)},this.Ere=t=>{this.Kre(t)},this.xre=t=>{this.zre(t)},this.Yre=t}};function a5(t){if(!t)return;let e=t.sz.default;return Ya.Qs&&t.sz.phone?e=t.sz.phone:Ya.gm&&t.sz.tv&&(e=t.sz.tv),{foe:t.iu,_oe:e}}function u5(t){let e,i,s,n;return t.top&&t.top>=0&&t.top<=100?e=t.top:t.bottom&&t.bottom>=0&&t.bottom<=100?i=t.bottom:e=10,t.left&&t.left>=0&&t.left<=100?s=t.left:t.right&&t.right>=0&&t.right<=100?n=t.right:s=10,{gtt:e,_tt:i,ftt:s,dtt:n}}function c5(t){let e,i;return e=t.width&&t.width>=0&&t.width<=100?t.width:10,i=t.height&&t.height>=0&&t.height<=100?t.height:10,{ji:e,Ti:i}}r();var l5=class extends So{get voe(){return this.na.voe.map((t=>t.Hnt()))}get goe(){return this.na.goe.map((t=>t.Hnt()))}moe(t){this.na.moe(t)}get wa(){var t;return null!=(t=this.eu)?t:this.eu=function(t){return{get currentInterstitials(){return t.voe},get scheduledInterstitials(){return t.goe},replaceAdTagParameters(e){t.moe(e)},addEventListener(e,i){t.bn(e,i)},removeEventListener(e,i){t.vn(e,i)}}}(this)}constructor(t){super(),this.na=t}};r(),r();var d5=class extends ps{poe(t){this.Oc.push(t)}get sR(){return this.woe.sR}get zQt(){return ji.Dnt}get I$t(){var t;return null!=(t=this.woe.ct)?t:-1}get LOt(){return this.woe.lF}get s$t(){}get yoe(){return this.woe}constructor(t){var e;super(t.lF),this.woe=t,this.R$t=null!=(e=this.woe.ct)?e:-1}},f5=function(t){return t.AD_LOADING="adloading",t.AD_LOADED="adloaded",t.AD_PAUSED="adpaused",t.AD_ERROR="aderror",t.AD_ENDED="adended",t}({}),_5=function(t){return t[t.GOOGLE=0]="GOOGLE",t[t.DEFAULT=1]="DEFAULT",t}({}),v5=class extends So{get D$t(){return this.s0t}get boe(){return this.Aoe}get Xnt(){return this.i0t}get H8t(){return this.z$t}isPlayingAd(){return Boolean(this.Aoe)}Soe(t){}Qre(t){const e=new d5(t);this.s0t.push(e)}doe(t){const e=this.s4t(t);_e(this.s0t,e)}s4t(t){return Do(this.s0t,(e=>e.yoe===t))}Toe(){this.a4t.bn(ns.Hy,this.koe),this.a4t.bn(Zc.rB,this.Eoe),this.a4t.bn(ns._b,this.i9),this.a4t.bn(ns.Ly,this.xoe)}Ioe(){this.a4t.vn(ns.Hy,this.koe),this.a4t.vn(Zc.rB,this.Eoe),this.a4t.vn(ns._b,this.i9),this.a4t.vn(ns.Ly,this.xoe)}pd(t){var e;null==(e=this.Aoe)||e.zne(this.Dne(t.currentTime))}async Roe(t,e,i,s){const n={stack:[],error:void 0,hasError:!1};try{var r;null==(r=this.GW)||r.np();const o=Gi(n,Fi.hp([e]),!1);this.GW=o;const h=o.ep;return Io(h),await this.a4t.Roe(nc(t),i,s,h)}catch(t){n.error=t,n.hasError=!0}finally{ce(n)}}Md(t){this.Aoe&&(this.Aoe.zne(t),this.Aoe.sR=!0,this.doe(this.Aoe),this.Aoe=void 0),this.z$t&&(this._4t._o(new Qn(this.z$t,t)),this.z$t=void 0),this.i0t?(this._4t._o(new $h(this.i0t)),this.i0t=void 0):(As.aw("An ad break has ended without realizing we are in an ad break."),this._o(new me("adended")))}Dne(t){var e,i;return(null!=(i=null==(e=this.Aoe)?void 0:e.lF)?i:0)+t}async nr(){var t;null==(t=this.GW)||t.np(),this.GW=void 0,this.Ioe(),this.s0t=[],this.z$t=void 0,this.i0t=void 0,this.Aoe=void 0,this.Coe=void 0}async yn(){await this.nr(),await this.Poe.yn()}constructor(t,e,i){super(),this._4t=new lc,this.s0t=[],this.i9=t=>{this.pd(t)},this.koe=()=>{this._o(new me("adloading"))},this.Eoe=()=>{this._o(new me("adloaded"))},this.xoe=t=>{this.Md(this.Dne(this.a4t.CI()))},this.a4t=t,this.Poe=e,this.s0t=i,this.Poe.Doe(this),this._4t=e.z2t}};r();var g5=class{Doe(t){this.Noe=t}get z2t(){return this._4t}get i3t(){var t;return void 0!==(null==(t=this.Noe)?void 0:t.Xnt)}get G2t(){return ji.Dnt}get Znt(){var t;return(null==(t=this.Noe)?void 0:t.H8t)?[this.Noe.H8t]:[]}get Xnt(){var t,e;return null!=(e=null==(t=this.Noe)?void 0:t.Xnt)?e:null}get znt(){return this.Noe?Ye(this.Noe.D$t,(t=>{var e;const i=t.zc;if(t===(null==(e=this.Noe)?void 0:e.Xnt)&&void 0!==this.Noe.H8t){const t=i.indexOf(this.Noe.H8t);if(t>=0)return i.slice(t+1)}return t.sR?[]:i})):[]}get qnt(){return this.Noe?this.Noe.D$t.filter((t=>{var e;return t===(null==(e=this.Noe)?void 0:e.Xnt)||!t.sR})):[]}zD(){}Ynt(t){}jnt(t){}yn(){return this.Noe=void 0,Promise.resolve()}constructor(){this._4t=new lc}};r(),r(),r();var m5=Promise;r(),r();var sn=class extends me{constructor(t,e,i){super(t,new Date),this.Moe=e,this.trt=i}},ye=function(t){return t.LOADED="DAILoaded",t.AD_BREAK_STARTED="DAIAdBreakStarted",t.AD_BREAK_ENDED="DAIAdBreakEnded",t.AD_PERIOD_STARTED="DAIAdPeriodStarted",t.AD_PERIOD_ENDED="DAIAdPeriodEnded",t.AD_PROGRESS="DAIAdProgress",t.CUEPOINTS_CHANGED="DAICuePointsChanged",t.CLICK="DAIClick",t.ERROR="DAIError",t.STARTED="DAIStarted",t.FIRST_QUARTILE="DAIFirstQuartile",t.MIDPOINT="DAIMidpoint",t.STREAM_INITIALIZED="DAIStreamInitialized",t.THIRD_QUARTILE="DAIThirdQuartile",t.COMPLETE="DAIComplete",t}({}),p5=class extends sn{constructor(t,e){super("DAILoaded",t,e)}},w5=class extends sn{constructor(t,e){super("DAIAdBreakStarted",t,e)}},y5=class extends sn{constructor(t,e){super("DAIAdBreakEnded",t,e)}},b5=class extends sn{constructor(t,e){super("DAIAdProgress",t,e)}},A5=class extends sn{constructor(t,e){super("DAICuePointsChanged",t,e)}},S5=class extends sn{constructor(t,e){super("DAIClick",t,e)}},T5=class extends sn{constructor(t,e){super("DAIError",t,e)}},k5=class extends sn{constructor(t,e){super("DAIStarted",t,e)}},E5=class extends sn{constructor(t,e){super("DAIFirstQuartile",t,e)}},x5=class extends sn{constructor(t,e){super("DAIMidpoint",t,e)}},I5=class extends sn{constructor(t,e){super("DAIStreamInitialized",t,e)}},R5=class extends sn{constructor(t,e){super("DAIThirdQuartile",t,e)}},C5=class extends sn{constructor(t,e){super("DAIComplete",t,e)}};var P5=class extends So{replaceAdTagParameters(t){return this.Loe.replaceAdTagParameters(null!=t?t:null)}Boe(t){return this.Loe.contentTimeForStreamTime(t)}Ooe(t){return this.Loe.streamTimeForContentTime(t)}IUt(t,e){const i=function(t){return"vod"===t.availabilityType?new s.google.ima.dai.api.VODStreamRequest(ne({},D5(t),{contentSourceId:t.contentSourceID,videoId:t.videoID})):new s.google.ima.dai.api.LiveStreamRequest(ne({},D5(t),{assetKey:t.assetKey}))}(t);t.enableNonce&&(i.enableNonce=!0),this.Loe.requestStream(i)}nr(){this.Foe(!1),this.Loe.reset()}yn(){this.Ro();const t=google.ima.dai.api.StreamEvent.Type;this.Loe.removeEventListener(t.AD_BREAK_STARTED,this.Voe),this.Loe.removeEventListener(t.AD_PROGRESS,this.Woe),this.Loe.removeEventListener(t.CLICK,this.P0t),this.Loe.removeEventListener(t.COMPLETE,this.Uoe),this.Loe.removeEventListener(t.CUEPOINTS_CHANGED,this.Goe),this.Loe.removeEventListener(t.ERROR,this.Ss),this.Loe.removeEventListener(t.FIRST_QUARTILE,this.Zoe),this.Loe.removeEventListener(t.LOADED,this.Hoe),this.Loe.removeEventListener(t.MIDPOINT,this.Xoe),this.Loe.removeEventListener(t.STARTED,this.zoe),this.Loe.removeEventListener(t.STREAM_INITIALIZED,this.qoe),this.Loe.removeEventListener(t.THIRD_QUARTILE,this.Yoe),this.Loe.removeEventListener(t.AD_BREAK_ENDED,this.Koe),this.nr(),this.joe&&We(this.joe)}Qoe(t){this.Loe.onTimedMetadata(t)}Joe(t,e,i){this.Loe.processMetadata(t,e,i)}$oe(t){const e=this.Loe.previousCuePointForStreamTime(t);if(e)return{dF:e.end,lF:e.start,sR:e.played}}the(t,e){const i=this.$oe(t);if(!i)return;const s=t>e&&i.dF>e,n=i.dF>t&&i.lF<=t;return i.sR||!s&&!n?void 0:i.lF}Foe(t){this.h1t&&(this.h1t.style.display=t?"block":"none")}constructor(t,e,i){super(),this.Loe=t,this.h1t=e,this.joe=i,this.Voe=t=>{this.Foe(!0);const e=N5(t),i=L5(t);this._o(new w5(e,i))},this.Koe=t=>{this.Foe(!1);const e=N5(t),i=L5(t);this._o(new y5(e,i))},this.Woe=t=>{const e=N5(t),i=L5(t);this._o(new b5(e,i))},this.P0t=t=>{const e=N5(t),i=L5(t);this._o(new S5(e,i))},this.Uoe=t=>{const e=N5(t),i=L5(t);this._o(new C5(e,i))},this.Goe=t=>{const e=N5(t),i=L5(t);this._o(new A5(e,i))},this.Ss=t=>{const e=N5(t),i=L5(t);this._o(new T5(e,i))},this.Zoe=t=>{const e=N5(t),i=L5(t);this._o(new E5(e,i))},this.Hoe=t=>{const e=N5(t),i=L5(t);this._o(new p5(e,i))},this.Xoe=t=>{const e=N5(t),i=L5(t);this._o(new x5(e,i))},this.zoe=t=>{const e=N5(t),i=L5(t);this._o(new k5(e,i))},this.qoe=t=>{const e=N5(t),i=L5(t);this._o(new I5(e,i))},this.Yoe=t=>{const e=N5(t),i=L5(t);this._o(new R5(e,i))},this.h1t&&(this.h1t.style.display="none",this.Loe.setClickElement(this.h1t));const s=google.ima.dai.api.StreamEvent.Type;this.Loe.addEventListener(s.AD_BREAK_STARTED,this.Voe),this.Loe.addEventListener(s.AD_PROGRESS,this.Woe),this.Loe.addEventListener(s.CLICK,this.P0t),this.Loe.addEventListener(s.COMPLETE,this.Uoe),this.Loe.addEventListener(s.CUEPOINTS_CHANGED,this.Goe),this.Loe.addEventListener(s.ERROR,this.Ss),this.Loe.addEventListener(s.FIRST_QUARTILE,this.Zoe),this.Loe.addEventListener(s.LOADED,this.Hoe),this.Loe.addEventListener(s.MIDPOINT,this.Xoe),this.Loe.addEventListener(s.STARTED,this.zoe),this.Loe.addEventListener(s.STREAM_INITIALIZED,this.qoe),this.Loe.addEventListener(s.THIRD_QUARTILE,this.Yoe),this.Loe.addEventListener(s.AD_BREAK_ENDED,this.Koe)}};function D5(t){const e=google.ima.dai.api.StreamRequest.StreamFormat;var i;return{apiKey:t.apiKey,authToken:t.authToken,format:"dash"===t.format?e.DASH:e.HLS,networkCode:t.networkCode,streamActivityMonitorId:t.streamActivityMonitorID,adTagParameters:t.adTagParameters,omidAccessModeRules:null!=(i=P2(t.omidAccessModeRules))?i:{}}}function N5(t){const e=t.getStreamData(),i=e.adProgressData;let s;i&&(s={l9t:i.adBreakDuration,ehe:i.duration,d9t:i.adPosition,RI:i.currentTime,ct:i.duration,f9t:i.totalAds});return{ihe:s,she:(e.cuepoints||[]).map((t=>({lF:t.start,dF:t.end,sR:t.played}))),nhe:e.errorMessage||void 0,rhe:e.manifestFormat||void 0,ohe:e.streamId||void 0,hhe:(e.subtitles||[]).map((t=>({ahe:t.webvtt,uhe:t.ttml,gs:t.language}))),Xu:e.url}}function M5(t){return{SKt:t.getAdSlotId(),I3t:t.getContent(),Fk:t.getContentType(),Ti:t.getHeight(),ji:t.getWidth()}}function L5(t){const e=t.getAd();if(!e)return;const i=e.getAdPodInfo(),s=e.getCompanionAds().map(M5);return{jKt:e.getAdId(),Q9t:{d9t:i.getAdPosition(),I$t:i.getMaxDuration(),lne:i.getPodIndex(),LOt:i.getTimeOffset(),f9t:i.getTotalAds()},PYt:e.getAdSystem(),fne:e.getAdvertiserName(),bKt:e.getApiFramework(),WYt:s,iKt:e.getCreativeId(),W8t:e.getCreativeAdId(),_ne:e.getDealId(),QN:e.getDescription(),ct:e.getDuration(),NZ:e.getTitle(),dhe:e.getUniversalAdIdRegistry(),fhe:e.getUniversalAdIdValue(),M8t:e.getVastMediaHeight(),N8t:e.getVastMediaWidth(),R8t:e.getWrapperAdIds(),C8t:e.getWrapperAdSystems(),P8t:e.getWrapperCreativeIds()}}function B5(){const t=h.body.lastElementChild;if(t instanceof HTMLIFrameElement&&"Advertisement"===t.title)return t}r(),r();var O5=class extends Vs{ka(){return qo(this)}get zQt(){return ji.Dnt}constructor(t){super(t,function(t){return t===In.LSHAPE_CONTENT?Ls.w3t:Ls.mQt}(t.yoe.nre)),t.poe(this)}};var F5=class extends O5{X$t(){return this._he.getAdSystem()}Y$t(){return this.sd.yoe.Iyt}get o(){return this._he.getAdId()}get ct(){return this._he.getDuration()}get DKt(){var t,e;return null==(e=this._he)||null==(t=e.ad)?void 0:t.clickThroughUrl}get iKt(){return this._he.getCreativeId()}get ajt(){return this._he.getSkipTimeOffset()}constructor(t,e){super(t),this._he=e}};r();var V5=class extends O5{constructor(t){super(t),this.E3t=!0,this.FA=t.R$t}},W5="ott_placement",U5="urn:google:dai:2018",G5=class extends v5{get vhe(){return _5.GOOGLE}Soe(t){if(t){const t=this.Loe;this.Loe=this.ghe,this.ghe=t;const e=this.mhe;this.mhe=this.phe,this.phe=e}for(const t of this.a4t.nt.mC)this.whe(t)}async tZ(t,e,i){if(!t||!e||t===this.yhe&&e===this.bhe)return;if(void 0===this.Loe){var n,r;if(void 0===(null==(r=s.google)||null==(n=r.ima)?void 0:n.dai))throw new m("IMA DAI SDK missing for THEOads");this.Loe=new google.ima.dai.api.StreamManager(this.a4t.we.querySelector("video"),this.Ahe)}this.yhe=t,this.bhe=e;const o=this.She(!1),h=this.She(!0);this.khe=Lu(m5.all([o,h]),i),await this.khe}She(t){let e=this.Loe;if(t&&(e=this.ghe),!e)return m5.resolve();this.Ehe(e),e.reset();const i=new google.ima.dai.api.PodStreamRequest;i.networkCode=this.yhe,i.customAssetKey=this.bhe,i.adTagParameters=this.xhe,this.Ihe&&(i.streamActivityMonitorId=this.Ihe),i.format="hls";const s=this.Rhe(e,[google.ima.dai.api.StreamEvent.Type.STREAM_INITIALIZED,google.ima.dai.api.StreamEvent.Type.ERROR]).then((i=>{if(i.type===google.ima.dai.api.StreamEvent.Type.ERROR)throw new m("DAI stream request failed");t?this.phe=i.getStreamData():this.mhe=i.getStreamData(),this.Che(e)}));return e.requestStream(i),s}Rhe(t,e,i){return new m5(((s,n)=>{if(i&&i.zm)return n(new vt);const r=t=>{h(),s(t)},o=()=>{h(),n(new vt)},h=()=>{for(const i of e)t.removeEventListener(i,r);i&&i.Jm(o)};for(const i of e)t.addEventListener(i,r);i&&i.Qm(o)}))}moe(t){var e,i;void 0===t&&(t={}),this.xhe=this.Phe(t),this.Dhe=!t[W5],null==(e=this.Loe)||e.replaceAdTagParameters(this.xhe),null==(i=this.ghe)||i.replaceAdTagParameters(this.xhe)}Nhe(t){var e,i;const s=new lu(this.xhe.cust_params);s.set("theoads_slot",function(t){switch(t){case In.DOUBLE:return"double";case In.SINGLE:return"single";case In.LSHAPE_AD:case In.LSHAPE_CONTENT:return"l-shape"}}(t)),this.xhe.cust_params=s.toString(),this.Dhe&&(this.xhe[W5]=Z5(t)),null==(e=this.Loe)||e.replaceAdTagParameters(this.xhe),null==(i=this.ghe)||i.replaceAdTagParameters(this.xhe)}Phe(t){const e=Fa(t);return t[W5]||(e[W5]=Z5(In.SINGLE)),e}async Mhe(t){var e,i;return(null==(e=this.Coe)?void 0:e.Qne)&&!S(this.Coe.Qne)?this.Coe.Qne:this.Lhe&&(null==(i=this.Coe)?void 0:i.svt)?await K((()=>this.Bhe()),t,4,500,5e3):void 0}async Bhe(){const t=this.Lhe+"/"+this.yhe+"/"+this.bhe+"/"+this.Coe.svt+".json",e=new Gr({Xu:t,tE:Te.xk,EE:Ce.GET,xE:1e3});let i;try{i=await this.a4t.mI.eE(e)}catch(t){throw new Ws(dt.NETWORK,lo.UNKNOWN_AD_RESPONSE,"The ad's PodId could not be loaded.")}if(!eA(i))throw new Ws(dt.NETWORK,lo.UNKNOWN_ERROR,"Something went wrong while requesting JSON from server.");const s=await i.$k();if(s)return s.podid}async Ohe(t,e,i,s){void 0===s&&(s=!1);const n=await this.Fhe(t,e,i);return this.Roe({sources:{src:n}},i,void 0,s)}async Fhe(t,e,i){var s;this.Coe=t;const n=t.vre,r=t.mre;this.Nhe(t.nre),await this.tZ(n,r,i);const o=As.Bh(t.Iyt),h=Number(o.searchParams.get("d")),a=_.floor(1e3*_.min(h,t.Hne-e)),u=await this.Mhe(i);if(!u)throw new m("Something went wrong with retrieving the PodID from the server.");(null==(s=this.mhe)?void 0:s.streamId)||await this.khe;const c=As.Bh("https://dai.google.com/linear/pods/v1/hls/network/"+this.yhe+"/custom_asset/"+this.bhe);"V2"===t.yre?c.pathname+="/ad_break_id/"+u+".m3u8":c.pathname+="/pod/"+u+".m3u8";let l=this.mhe.streamId;if(this.Aoe){const t=this.a4t.Vhe();void 0!==t&&void 0===this.ghe&&(this.ghe=new google.ima.dai.api.StreamManager(t.we.querySelector("video"),this.Ahe),await Lu(this.She(!0),i)),this.phe&&(l=this.phe.streamId)}return c.searchParams.set("stream_id",l),c.searchParams.set("pd",String(a)),c.toString()}Toe(){this.a4t.nt.bn(je.XR,this.qn),super.Toe()}Ioe(){super.Ioe(),this.a4t.nt.vn(je.XR,this.qn)}whe(t){if(t.Lt===Hi.xW&&!(t.zw!==Hr.ID3&&t.zw!==Hr.EVENT_STREAM||t.zw===Hr.EVENT_STREAM&&t.ZC!==U5)){if(t.bn(gs.KR,this.Whe),t.bn(gs.QR,this.Gre),t.L)for(const e of t.L.mC)this.Whe(new zM(e));t.LE=Ui.GC,this.Uhe=t}}Che(t){t&&(t.addEventListener(google.ima.dai.api.StreamEvent.Type.ERROR,this.Ghe),t.addEventListener(google.ima.dai.api.StreamEvent.Type.CLICK,this.Ghe),t.addEventListener(google.ima.dai.api.StreamEvent.Type.STARTED,this.Ghe),t.addEventListener(google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,this.Ghe),t.addEventListener(google.ima.dai.api.StreamEvent.Type.MIDPOINT,this.Ghe),t.addEventListener(google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,this.Ghe),t.addEventListener(google.ima.dai.api.StreamEvent.Type.COMPLETE,this.Ghe),t.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,this.Ghe),t.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,this.Ghe),t.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,this.Ghe),t.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,this.Ghe),t.addEventListener(google.ima.dai.api.StreamEvent.Type.RESUMED,this.Ghe))}Ehe(t){t&&(t.removeEventListener(google.ima.dai.api.StreamEvent.Type.ERROR,this.Ghe),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.CLICK,this.Ghe),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.STARTED,this.Ghe),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,this.Ghe),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.MIDPOINT,this.Ghe),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,this.Ghe),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.COMPLETE,this.Ghe),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,this.Ghe),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,this.Ghe),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,this.Ghe),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,this.Ghe),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.RESUMED,this.Ghe))}Md(t){super.Md(t),this.Zhe=void 0}async nr(){var t,e;await super.nr(),this.Ehe(this.Loe),this.Ehe(this.ghe),null==(t=this.Loe)||t.reset(),this.Loe=void 0,null==(e=this.ghe)||e.reset(),this.ghe=void 0,this.mhe=void 0,this.phe=void 0,this.khe=void 0,this.Ihe=void 0,this.bhe=void 0,this.yhe=void 0,this.Dhe=!0;const i=B5();void 0!==i&&We(i)}async yn(){var t;await super.yn(),null==(t=this.Uhe)||t.yn()}constructor(t,e,i,s,n={},r,o){super(t,e,s),this.Dhe=!0,this.qn=t=>{const e=t.Ht;this.whe(e)},this.Whe=t=>{t.uF.bn(On.IO,this.Hhe)},this.Gre=t=>{t.uF.vn(On.IO,this.Hhe)},this.Hhe=t=>{var e,i;if(this.mhe)if((null==(e=this.Uhe)?void 0:e.zw)===Hr.ID3){const e=t.uF.U;var s;if(eB(e))if(this.Zhe!==e.text)this.Zhe=e.text,null==(s=this.Loe)||s.processMetadata("ID3",e.text,t.uF.lF)}else if((null==(i=this.Uhe)?void 0:i.zw)===Hr.EVENT_STREAM){var n;const e=t.uF.U;null==(n=this.Loe)||n.processMetadata(U5,e,t.uF.lF)}},this.Ghe=t=>{switch(this.i0t&&(this.i0t.R$t=this.a4t.jd()-this.a4t.CI()),t.type){case google.ima.dai.api.StreamEvent.Type.ERROR:this._4t._o(new Qh(dt.GENERAL));break;case google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED:this.Aoe=this.Coe,this.Coe=void 0,this.i0t=this.s4t(this.Aoe),this._4t._o(new XF(this.i0t)),this.Xhe=As.Gm(this.zhe,250);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:As.Um(this.Xhe);break;case google.ima.dai.api.StreamEvent.Type.STARTED:{var e;const i=t.getAd();this.z$t=new F5(this.i0t,i),null==(e=this.Aoe)||e.ir({ad:this.z$t}),this._4t._o(new Cn(this.z$t,this.Dne(this.a4t.CI())));break}case google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE:this._4t._o(new _s(this.z$t,this.Dne(this.a4t.CI())));break;case google.ima.dai.api.StreamEvent.Type.MIDPOINT:this._4t._o(new oe(this.z$t,this.Dne(this.a4t.CI())));break;case google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE:this._4t._o(new ks(this.z$t,this.Dne(this.a4t.CI())));break;case google.ima.dai.api.StreamEvent.Type.COMPLETE:this._4t._o(new Qn(this.z$t,this.Dne(this.a4t.CI()))),this.z$t=void 0;break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:if(!this.i0t)break;this.i0t.R$t>1&&this.zhe()}},this.zhe=()=>{var t;this.z$t=new V5(this.i0t),null==(t=this.Aoe)||t.ir({ad:this.z$t}),this._4t._o(new Cn(this.z$t,this.Dne(this.a4t.CI())))},this.Ahe=i,this.xhe=this.Phe(n),this.Dhe=!n[W5],this.Ihe=r,this.Lhe=o}};function Z5(t){switch(t){case In.DOUBLE:return"3";case In.SINGLE:return"0";case In.LSHAPE_AD:case In.LSHAPE_CONTENT:return"4"}}var H5=class{get voe(){return this.qhe}get Yhe(){return this.Khe}get jhe(){return this.xhe}set jhe(t){this.xhe=t}async Qhe(t){this.qhe.push(t),this.Khe.style.display="";const e=h.createElement("div");e.className="theoplayer-theoads-overlay",e.style.display="",this.Jhe.set(t.o,e);const i=h.createElement("a"),s=await this.$he(t);if(s.clickThroughURI&&(this.Khe.style.zIndex="11",i.href=s.clickThroughURI,i.target="zu",i.setAttribute("rel","noopener"),i.addEventListener("mousedown",this.Mte),i.addEventListener("touchend",this.Mte)),t.ure===e5.image&&(i.style.backgroundImage="url("+s.resourceURI+")",i.style.backgroundSize="contain",i.style.backgroundPosition="center",i.style.backgroundRepeat="no-repeat",s.impressionURI)){const t=h.createElement("img");t.src=s.impressionURI,t.style.display="none",i.appendChild(t)}Ka(i),function(t,e){t.style.position="absolute";const i=e.fo;i.ftt&&(t.style.left=i.ftt+"%");i.dtt&&(t.style.right=i.dtt+"%");i.gtt&&(t.style.top=i.gtt+"%");i._tt&&(t.style.bottom=i._tt+"%");const s=e.Ob;s.ji&&(t.style.width=s.ji+"%");s.Ti&&(t.style.height=s.Ti+"%");e.lre&&e.lre>0&&e.lre<=100&&(t.style.opacity=""+e.lre/100)}(e,t),e.appendChild(i),this.Khe.appendChild(e)}tae(t){const e=this.Jhe.get(t.o);e&&(this.Khe.contains(e)&&this.Khe.removeChild(e),this.Jhe.delete(t.o),0===this.Jhe.size&&(this.Khe.style.display="none"),_e(this.qhe,t))}eae(){this.Jhe.forEach(((t,e)=>{this.Khe.contains(t)&&this.Khe.removeChild(t)})),this.Jhe.clear(),this.qhe=[]}async iae(t){if(!t)return;const e=this.sae(t);return e?await this.nae(e,this.WW):void 0}async $he(t){const e={resourceURI:""},i=await this.iae(t.dre);if(i)e.resourceURI=i.image,e.impressionURI=i.impression;else if(t.qjt){const i=Do(t.qjt,(t=>t.zw===i5.svg));i&&(e.resourceURI=i.Iyt);const s=Do(t.qjt,(t=>t.zw===i5.png));s&&(e.resourceURI=s.Iyt)}var s;return e.clickThroughURI=null!=(s=null==i?void 0:i.clickThrough)?s:t.DKt,t.ir({imageUrl:e.resourceURI,clickThrough:e.clickThroughURI}),e}sae(t){const e=new lu(this.xhe);return e.set("iu",t.foe),e.set("sz",t._oe),e.set("c",String(this.rae)),e.get(W5)||e.set(W5,"5"),"https://securepubads.g.doubleclick.net/gampad/adx?"+e.toString()}async nae(t,e){const i=new Gr({Xu:t,tE:Te.xk,EE:Ce.GET});try{const t=await e.eE(i);return await t.$k()}catch(t){throw new Ws(dt.NETWORK,lo.UNKNOWN_AD_RESPONSE,"The ad source could not be loaded.",t)}}nr(){this.eae(),this.Khe.style.display="none"}constructor(t,e){this.qhe=[],this.Jhe=Vh(),this.rae=(new Date).getTime(),this.Itt=t=>{Y4(this.Khe,this.na.pR,this.na.vR,t.width,t.height)},this.Yzt=()=>{Y4(this.Khe,this.na.pR,this.na.vR,this.pn.Au,this.pn.Nu)},this.Mte=t=>{t.stopPropagation()},this.na=t,this.WW=As.mI;const i=h.createElement("div");i.style.display="none",i.className="theoads-image-overlays-container",Ka(i),e.appendChild(i),this.Khe=i,this.pn=new Ee(e),this.pn.kn(),this.pn.bn(ln.mn,this.Itt),this.na.bn(ns.$y,this.Yzt)}};r();function X5(t){return t&&t.integration===vu.THEOADS}Ch.Vm.nX(new class{get F2t(){return ji.Dnt}sX(t){return X5(t)}V2t(t,e,i){}K6(t,e,i,s){}Aq(t){const e={integration:vu.THEOADS,adTagParameters:Vt(t.adTagParameters)?t.adTagParameters:{},useId3:Boolean(t.useId3)};return oi(t.networkCode)&&(e.networkCode=os(t.networkCode)),oi(t.customAssetKey)&&(e.customAssetKey=os(t.customAssetKey)),oi(t.backdropDoubleBox)&&(e.backdropDoubleBox=os(t.backdropDoubleBox)),oi(t.backdropLShape)&&(e.backdropLShape=os(t.backdropLShape)),oi(t.overrideLayout)&&(e.overrideLayout=function(t){switch(t){case"single":case"l-shape":case"double":case"single-if-mobile":return t;default:return}}(t.overrideLayout)),oi(t.overrideAdSrc)&&(e.overrideAdSrc=os(t.overrideAdSrc)),oi(t.retrievePodIdURI)&&(e.retrievePodIdURI=os(t.retrievePodIdURI)),oi(t.sseEndpoint)&&(e.sseEndpoint=os(t.sseEndpoint)),oi(t.streamActivityMonitorId)&&(e.streamActivityMonitorId=os(t.streamActivityMonitorId)),e}}),r();var z5=class extends me{constructor(t){super("addinterstitial"),this.interstitial=t}};r();var q5=class extends $s{ka(){return new Y5(this.interstitial.Hnt())}constructor(t){super("oae"),this.interstitial=t}},Y5=class extends me{constructor(t){super("interstitialend"),this.interstitial=t}};r();var K5=class extends $s{ka(){return new j5(this.interstitial.Hnt(),this.Tb)}constructor(t,e){super("hae"),this.interstitial=t,this.Tb=e}},j5=class extends me{constructor(t,e){super("interstitialerror"),this.interstitial=t,this.message=e}};r(),r();var Q5=class extends O5{constructor(t,e){super(t),this.FA=_.min(e,this.sd.I$t)}},J5=class extends v5{get vhe(){return _5.DEFAULT}tZ(t,e,i){return m5.resolve()}moe(t){}Ohe(t,e,i,s){let n;if(void 0===s&&(s=!1),this.Coe=t,t.lF<e){const i=_.min(t.ct,t.Hne-e);n=t.ct-i,t.ir({ct:i,Kne:n})}return this.Roe({sources:{src:t.Iyt}},i,n,s)}async Fhe(t,e,i){return this.Coe=t,t.Iyt}Toe(){super.Toe(),this.a4t.bn(Zc.uB,this.aae),this.a4t.bn(bo.fa,this.kqt)}Ioe(){this.a4t.vn(Zc.uB,this.aae),this.a4t.vn(bo.fa,this.kqt),super.Ioe()}pd(t){if(!this.Aoe)return void As.aw("Got timeupdate without a current interstitital");const e=this.Dne(t.currentTime),i=this.Aoe.P3t;this.Aoe.zne(e);const s=this.Aoe.P3t;i<.25&&s>=.25?this._4t._o(new _s(this.z$t,e)):i<.5&&s>.5?this._4t._o(new oe(this.z$t,e)):i<.75&&s>=.75?this._4t._o(new ks(this.z$t,e)):this.Aoe.sR&&this.Md(e)}Md(t){super.Md(t),this.k8=!1}async nr(){await super.nr(),this.k8=!1}constructor(...t){super(...t),this.k8=!1,this.kqt=()=>{this._o(new Qh(dt.GENERAL))},this.aae=t=>{!this.k8&&this.Coe&&(this.k8=!0,this.Aoe=this.Coe,this.Coe=void 0,this.i0t=this.s4t(this.Aoe),this.z$t=new Q5(this.i0t,this.a4t.jd()),this.Aoe.ir({ad:this.H8t}),this._4t._o(new XF(this.i0t)),this._4t._o(new Cn(this.z$t,this.Dne(t.currentTime))))},this.xoe=t=>{this.Md(this.Dne(t.currentTime))}}};r();var $5=class extends X1{Vhe(){}async Roe(t,e,i,s){await this.na.Ca(t,s),this.uae(this.na,e,i)}uae(t,e,i){Ya.su&&Ya.$g&&(t.DR(),t.PR()),e&&t.DI(e),i&&t.DR()}cae(t){}constructor(t){super(t)}},t6=.5,e6=class extends X1{get voe(){var t;return[null==(t=this.Noe)?void 0:t.boe,...this.lae.voe].filter(ol)}get goe(){return this.dae.Are}Snt(){return this.ynt.zc}Int(){return this.fae.wa}get jhe(){var t,e,i;return null!=(i=null!=(e=this.xhe)?e:null==(t=this._ae)?void 0:t.adTagParameters)?i:{}}NI(){return this.Vs}Ant(){return this.ynt.snt}BI(){var t;return null!=(t=this.QH)?t:super.BI()}FI(){var t;return null!=(t=this.bZ)?t:super.FI()}RR(){this.ynt.RR()}toe(t){return t}async Ca(t,e){if(await super.Ca(t,e),await this.nr(),void 0===t||void 0===t.ads)return;const i=Do(t.ads,X5);if(void 0===i)return;this.vae(),this.gae(),this.mae(),this._ae=i,this.pae=i.backdropLShape,this.lae.jhe=i.adTagParameters,this.ynt.bn(Zc.hB,this.cH),this.ynt.bn(Zc.oB,this.Sd),this.Hu.bn(ln.mn,this.Itt),this.bn(ns.$y,this.Yzt),this.wae(),this.dae.jre=function(t){switch(t){case"single":return In.SINGLE;case"l-shape":return In.LSHAPE_AD;case"double":return In.DOUBLE;case"single-if-mobile":return Ya.Qs?In.SINGLE:void 0;default:return}}(this._ae.overrideLayout),this.dae.eoe=this._ae.overrideAdSrc,this.dae.Nre=this._ae.useId3;const s=void 0===i.networkCode||void 0===i.customAssetKey;await this.yae(s)}gae(){Td(this.Vs,this.bae),Ka(this.Aae),Ka(this.bae),this.Aae.appendChild(this.bae),this.Vs.appendChild(this.Aae)}Sae(){Td(this.bae,this.Vs),Md(this.bae),Md(this.Aae),We(this.bae),We(this.Aae)}async yae(t){var e,i,s;const n=this.O2t();if(!n)return;const r=this.Tae();var o;const h=null!=(o=null==(e=this.Noe)?void 0:e.D$t)?o:[];var a;t&&(null==(i=this.Noe)?void 0:i.vhe)!==_5.DEFAULT&&(await(null==(a=this.Noe)?void 0:a.nr()),this.Noe=new J5(n,this.kae,h));if(!t&&(null==(s=this.Noe)?void 0:s.vhe)!==_5.GOOGLE){var u,c,l,d,f,_,v,g,m;await(null==(u=this.Noe)?void 0:u.nr()),this.Noe=new G5(n,this.kae,r,h,this.jhe,null==(c=this._ae)?void 0:c.streamActivityMonitorId,null==(l=this._ae)?void 0:l.retrievePodIdURI);const t=null!=(m=null==(d=this.Eae)?void 0:d.vre)?m:null==(f=this._ae)?void 0:f.networkCode;var p;const e=null!=(p=null==(_=this.Eae)?void 0:_.mre)?p:null==(v=this._ae)?void 0:v.customAssetKey;await(null==(g=this.Noe)?void 0:g.tZ(t,e))}}async qre(t,e){var i,s;this.Eae||void 0===t||void 0===e||((null==(i=this.Noe)?void 0:i.vhe)===_5.GOOGLE?await(null==(s=this.Noe)?void 0:s.tZ(t,e)):await this.yae(!1))}uH(t){void 0===this.FI()&&(this.bZ=t,this.QH=Zs(t),this._o(new Pi(t)))}wae(){this.ynt.bn(ns._b,this.xae),this.ynt.bn(ns.ib,this.nz)}Iae(){this.ynt.vn(ns._b,this.xae),this.ynt.vn(ns.ib,this.nz)}Rae(){var t;this.kae.z2t.bn("irt",this.Cae),null==(t=this.Noe)||t.bn(f5.AD_ENDED,this.Cae)}Pae(){var t;this.kae.z2t.vn("irt",this.Cae),null==(t=this.Noe)||t.bn(f5.AD_ENDED,this.Cae)}async Dae(){this.Nae(),this.Mae=this.Eae,this.Eae=void 0}async d2t(){var t;this.Nae(),null==(t=this.Noe)||t.Ioe(),this.doe(this.Mae),this.Mae=void 0}async Lae(){var t;this.Nae(),null==(t=this.Noe)||t.Toe(),this.Mae=this.Eae,this.Eae=void 0}Nae(){const t=this.na.vR,e=this.na.pR;t===this.Bae&&e===this.Oae||(this.Bae=t,this.Oae=e,this._o(new W))}Qre(t){var e;i6(t)&&(null==(e=this.Noe)||e.Qre(t),this.roe(this.CI()));t.bn("Zne",this.Fae),this.fae._o(new z5(t.Hnt()))}doe(t){if(fh(this.dae.Are,t)){var e;if(this.dae.doe(t),i6(t))null==(e=this.Noe)||e.doe(t);else s6(t)&&(this.lae.tae(t),this.Vae.delete(t.o));t.vn("Zne",this.Fae),this.fae._o(new q5(t).wa)}}roe(t){this.Wae(t),this.Uae()}Wae(t){this.Gae(t),this.Zae(t),this.Hae(t)}Gae(t){let e;const i=[];for(const s of this.dae.Are.filter(i6)){if(s.sR){i.push(s);continue}if(s===this.Mae)continue;const n=s.Hne;void 0!==n&&t>=n?(s.sR=!0,i.push(s)):this.Mae&&s.lF+t6<this.Mae.Hne?(s.sR=!0,i.push(s)):void 0!==e&&e.lF<s.lF||(e=s)}for(const t of i)this.doe(t);this.Eae!==e&&(this.Xae(),this.Eae=e)}Xae(){var t;if(void 0!==this.Eae){var e;const t=void 0!==this.Mae;null==(e=this.O2t())||e.cae(t)}null==(t=this.zae)||t.np(),this.qae=void 0,this.Yae=void 0}Kae(t,e){let i=!1;const s=ee.Cn(this.na.TI()).BB(e,t6);void 0!==s&&(i=s.Tn(0)>=t.lF);const n=t.Hne,r=e>=t.lF&&(void 0===n||e<n);return i||r}Zae(t){if(void 0===this.Eae||void 0!==this.qae)return;const e=this.Eae;i6(e)&&void 0===this.jae&&this.Kae(e,t)&&(this.zae=new Fi,this.qae=Ts(this.Ohe(e,t,this.zae.ep),this.zae).catch((t=>{Se(t)||(this.fae._o(new K5(e,"Could not load the ad break.").wa),e.sR=!0,this.Eae=void 0)})))}Hae(t){if(void 0===this.Eae||void 0!==this.Yae||void 0!==this.Mae)return;const e=this.Eae.Hne;var i;t>=this.Eae.lF&&(void 0===e||t<e)&&(this.Yae=null==(i=this.qae)?void 0:i.then((()=>this.Lae())))}moe(t){var e,i,s;this.xhe=t,null==(i=this.Noe)||i.moe(null!=(s=null!=t?t:null==(e=this._ae)?void 0:e.adTagParameters)?s:{}),this.lae.jhe=t}Uae(){const t=this.CI(),e=[];this.Vae.forEach((i=>{t>=i.lF&&(void 0===i.Hne||t<i.Hne)||e.push(i)})),e.forEach((t=>{this.lae.tae(t),this.Vae.delete(t.o)}));for(const e of this.dae.Are.filter(s6)){const i=e.Hne;if(void 0!==i&&t>=i)continue;const s=e.lF,n=e.lF+e.ct;t>=s&&t<=n&&!this.Vae.has(e.o)&&(this.lae.Qhe(e).catch((t=>{this.fae._o(new K5(e,"Could not load the overlay.").wa)})),this.fae._o(new J4(e).wa),this.Vae.set(e.o,e))}}Qae(){return void 0!==this.Mae&&void 0!==this.Eae&&rs(this.Mae.Hne,this.Eae.lF,t6)}async nr(){var t,e;this.bZ=void 0,this.QH=void 0,this._ae=void 0,this.Jae=!0,this.$ae=NaN,this.Oae=NaN,this.Bae=NaN,this.Mae=void 0,null==(t=this.zae)||t.np(),this.qae=void 0,this.Yae=void 0,this.Eae=void 0,this.jae=void 0,await(null==(e=this.Noe)?void 0:e.nr()),this.Noe=void 0,this.dae.nr(),this.lae.nr(),this.Vae.clear(),this.Hu.vn(ln.mn,this.Itt),this.na.vn(ns.$y,this.Yzt),this.ynt.vn(Zc.hB,this.cH),this.ynt.vn(Zc.oB,this.Sd),this.Iae(),this.Pae(),this.Sae()}async NR(){await this.nr(),await super.NR()}async yn(){var t;await this.NR().catch(M),this.dae.yn(),await(null==(t=this.Noe)?void 0:t.yn()),await super.yn()}GR(t){switch(t.type){case ns.Hy:case ns.Cy:case Zc.hB:return!this.Jae;case Zc.oB:return!this.Jae||(this.Jae=!1,!1);case ns.Dy:{const t=this.jd();return t!==this.$ae&&(this.$ae=t,this._o(new yn(t))),!0}case ns.$y:return this.Nae(),!0}return super.GR(t)}constructor(t){var e;super(t),this.bZ=void 0,this.QH=void 0,this.Vae=Vh(),this.Jae=!0,this.$ae=NaN,this.Oae=NaN,this.Bae=NaN,this.Sd=()=>{this.ynt.vn(Zc.oB,this.cH),this.dae.Ire(this.na.nt)},this.vae=async()=>{try{await this.fnt.Kq([Ms.THEOADS])}catch(t){await this.NR().catch(M),this.uH(hb(t,Ci.LICENSE_INVALID_FEATURE))}},this.Itt=t=>{Y4(this.Aae,this.na.pR,this.na.vR,t.width,t.height)},this.Yzt=()=>{Y4(this.Aae,this.na.pR,this.na.vR,this.Hu.Au,this.Hu.Nu)},this.cH=()=>{var t;this.ynt.vn(Zc.hB,this.cH),(null==(t=this._ae)?void 0:t.sseEndpoint)&&this.dae.Tre(this._ae.sseEndpoint)},this.xae=()=>{this.Wae(this.CI()),this.Uae()},this.nz=()=>{this.Wae(this.CI()),this.Uae()},this.Cae=()=>{const t=()=>{this.jae=void 0};this.Qae()?this.jae=this.Dae().then(t).catch(t):this.jae=this.d2t().then(t).catch(t)},this.Fae=t=>{this.fae._o(t.wa)},this.ynt=new $5(t),this.Vs=t.we,this.Aae=function(){const t=h.createElement("div");return hn(t,"theo-ads-sgai-container"),t}(),this.bae=function(){const t=h.createElement("div");return hn(t,"theo-ads-sgai-content-player"),t}(),this.fae=new l5(this),this.kae=new g5,null==(e=this.ynt.zc)||e.Qnt(this.kae),this.dae=new h5(this),this.lae=new H5(this.ynt,this.bae)}};function i6(t){return"adbreak"===t.zw}function s6(t){return"overlay"===t.zw}var n6=class extends e6{jd(){var t;return null!=(t=this.FA)?t:super.jd()}iu(){var t;return null!=(t=this.Sc)?t:super.iu()}CI(){return this.toe(super.CI())}EI(){return this.tue?new Date(this.tue.getTime()+An(this.ynt.CI())):super.EI()}TI(){const t=super.TI();return ee.Cn(t).Pb(this.eue).ks()}lR(){const t=super.lR();return ee.Cn(t).Pb(this.eue).ks()}toe(t){return t+this.eue}async Ca(t,e){await super.Ca(t,e),this._ae&&(this.Sc=t,this.iue=new j4(this.ynt),this.iue.pr(this.ynt.we,this.ynt.we.parentElement),this.VO(this.iue))}mae(){}wae(){super.wae(),this.sue()}Iae(){super.Iae(),this.nue()}sue(){this.ynt.bn(ns.Dy,this.Xzt),this.ynt.bn(Zc.uB,this.hU)}nue(){this.ynt.vn(ns.Dy,this.Xzt),this.ynt.vn(Zc.uB,this.hU)}O2t(){return this.ynt}Tae(){return this.bae}DI(t,e){this.rue=!0,super.DI(t,e)}DR(){super.DR(),this._o(new he(this.CI())),this.oue=!0,this.hue=!1}PR(){this.hue=!0,super.PR()}async Ohe(t,e,i){var s;const n=K4(t);await this.yae(n),this.aue=await(null==(s=this.Noe)?void 0:s.Fhe(t,e,i));const r=new l4(this.Mxt,this.uue),o=new T3(this.Mxt.Oxt,r,"temporary");this.lue=o.zee(nc(nc({sources:{src:this.aue}})),_4({amount:30,bandwidth:bu.Vm.VG()||this.snt.oQ}),"temporary"),this.due.np(),this.due=new Fi;const h=this.uue.ist(this.lue,this.Mxt,"temporary");await h.pi(this.due.ep)}fue(t,e){switch(t){case In.LSHAPE_AD:return new Q4(this.ynt,e);case In.SINGLE:default:return new j4(this.ynt)}}async _ue(){var t,e,i;null==(t=this.zae)||t.np(),this.zae=new Fi;const s=K4(this.Eae);await this.yae(s),null==(e=this.iue)||e.dr(this.ynt.we),this.vue=!0,this.eue=this.CI(),this.tue=this.EI(),this.ynt.bn(Zc.uB,this.hU),this.fae._o(new J4(this.Eae).wa),await(null==(i=this.Noe)?void 0:i.Roe({sources:{src:this.aue}},this.zae.ep,void 0,!0)),this.iue=this.fue(this.Eae.nre,this.pae),this.m2t(this.iue),this.iue.pr(this.we,this.ynt.we.parentElement)}async Lae(){if(void 0!==this.Eae&&void 0!==this.aue)return this.nue(),await this._ue(),this.Rae(),this.gue=!1,super.Lae()}async Dae(){return this.doe(this.Mae),await this._ue(),super.Dae()}async d2t(){var t,e;if(this.Mae)return null==(t=this.lue)||t.rT(),this.lue=void 0,this.Pae(),this.vue=!0,this.Fne=!1,this.eue=this.CI(),this.tue=this.EI(),this.dae.Pre(this.ynt.nt),this.ynt.bn(Zc.oB,this.mue),this.ynt.bn(Zc.oB,this.Sd),this.ynt.bn(Zc.uB,this.hU),await this.ynt.Ca(this.Sc,(new Fi).ep),null==(e=this.iue)||e.dr(this.ynt.we),this.iue=new j4(this.ynt),this.iue.pr(this.ynt.we,this.ynt.we.parentElement),this.m2t(this.iue),this.ynt.DR(),this.gue=!0,this.sue(),super.d2t()}async NR(){var t;this.iue=void 0,this.FA=void 0,this.eue=0,this.aue=void 0,this.tue=void 0,this.gue=!0,this.vue=!1,this.oue=!0,this.hue=!0,this.due.np(),this.due=new Fi,null==(t=this.lue)||t.rT(),this.lue=void 0,this.ynt.vn(Zc.oB,this.mue),await super.NR()}GR(t){if(void 0!==this.iue)switch(t.type){case ns.ho:return!0;case ns.Ky:return!this.hue||(this.hue=!1,this._o(new nl(this.toe(t.currentTime))),!0);case Zc.uB:return!this.oue||(this.oue=!1,this._o(new Xr(this.toe(t.currentTime))),!0);case Zc.aB:return this.vue||(this.oue=!0,this._o(new Pa(this.toe(t.currentTime)))),!0;case ns.eb:return this.vue&&!this.rue||(this.rue=!1,this._o(new Be(this.toe(t.currentTime)))),!0;case ns.ib:return this.vue&&!this.rue||this._o(new Al(this.toe(t.currentTime))),!0;case ns.Ly:return!this.gue||(this._o(new ss(this.toe(t.currentTime))),!0);case ns._b:return this._o(new rl(this.toe(t.currentTime),t.currentProgramDateTime)),!0;case ns.jy:return this._o(new ki(this.toe(t.currentTime))),!0;case ns.Qy:return this._o(new ga(this.toe(t.currentTime),t.playbackRate)),!0;case ns.vb:return this.Fne?(this._o(new Ar(this.toe(t.currentTime),t.volume)),!0):(this.Fne=!0,!0);case ns.Ny:return this._o(new $t(this.toe(t.currentTime),t.readyState)),!0;case Zc.nB:return this._o(new rt(this.toe(t.currentTime),t.readyState)),!0;case Zc.rB:return this._o(new $i(this.toe(t.currentTime),t.readyState)),!0;case Zc.oB:return this._o(new uo(this.toe(t.currentTime),t.readyState)),!0;case Zc.hB:return this._o(new vo(this.toe(t.currentTime),t.readyState)),!0;case Zc.aC:return this._o(new oa(this.toe(t.currentTime),t.readyState)),!0;case ns.My:return this._o(new Su(this.toe(t.currentTime),t.initDataType,t.initData)),!0}return super.GR(t)}constructor(t){super(t),this.eue=0,this.vue=!0,this.rue=!1,this.due=new Fi,this.oue=!0,this.hue=!0,this.gue=!0,this.Fne=!0,this.Xzt=t=>{this.FA=t.duration},this.hU=()=>{this.ynt.vn(Zc.uB,this.hU),this.vue=!1},this.mue=()=>{this.ynt.vn(Zc.oB,this.mue),this.tue&&(this.ynt.kI=this.tue,this.tue=void 0),this.ynt.CI()>0&&(this.eue-=this.ynt.CI())},this.Mxt=Sc.Vm,this.uue=new y4(As.mI)}};r(),r();var r6=class extends $5{Vhe(){if(void 0===this.pue){const t=function(){const t=h.createElement("div");return hn(t,"theo-ads-sgai-ad-player-two"),t}();this.pue=o6(this.wue,t,this.na.kd)}return this.na===this.yue?this.pue:this.yue}async Roe(t,e,i,s){let n;n=this.na.iu()?this.Vhe():this.na,await n.Ca(t,s),this.uae(n,e,i)}async cae(t){t?await this.Vhe().NR():await this.na.NR()}async bue(){N4(this.na,this.Vhe()),this.m2t(this.Vhe()),this.na.we.style.display="",this.Vhe().we.style.display="none",await this.Vhe().NR()}async nr(){await this.na.NR(),await this.Vhe().NR()}constructor(t,e){const i=function(){const t=h.createElement("div");return hn(t,"theo-ads-sgai-ad-player-one"),t}(),s=o6(t,i,e);i.style.display="block",super(s),this.wue=t,this.yue=s}};function o6(t,e,i){const s=t.children[t.children.length-1];t.insertBefore(e,s),z4(e);const n=new g2(new AF(e,i,new _P),Ch.Vm);return n.rR=hi.bO,n.KO=!1,n}var h6=class extends $5{get Mne(){return this.Aue}get One(){return this.Sue}get Rne(){return this.Tue}get Nne(){return this.JHt}get Bne(){return this.kue}Vhe(){return this.a4t.Vhe()}Roe(t,e,i,s){return this.a4t.Roe(t,e,i,s)}Eue(t,e,i,s){var n,r;this.Aue=t,s?this.xue=0:this.xue+=i,this.Sue=e,null==(r=this.Sue)||r.setSeconds((null==(n=this.Sue)?void 0:n.getSeconds())+this.xue)}Une(){var t;if(void 0!==this.Iue)return;this.JHt=void 0,this.kue=void 0;const e=this.Rue;this.Rue=void 0,null==(t=this.Cue)||t.np(),c6(this.ynt)&&(this.Pue=new Fi,this.Iue=Ts(this.Due(e,this.Pue.ep),this.Pue).catch(vf))}Gne(){var t;this.JHt=this.Aue+this.na.CI(),this.One&&(this.kue=new Date(this.One.getTime()+1e3*this.na.CI()));const e=this.Iue;this.Iue=void 0,null==(t=this.Pue)||t.np(),this.Cue=new Fi,this.Rue=Ts(this.Nue(e,this.Cue.ep),this.Cue).catch(vf)}ja(){return this.ynt.WZ}Mue(){this.Lue||(this.Lue={source:this.ynt.iu(),duration:this.ynt.jd(),currentTime:this.ynt.CI(),preload:this.ynt.rR,autoplay:this.ynt.KO})}async Bue(t){this.ynt.rR=hi.bO,this.ynt.KO=!1,this.a4t.qI=!0;const e=this.a4t.iu();await this.ynt.Ca(e,t),this.ynt.DI(this.a4t.CI())}async Oue(t){this.Lue&&(this.ynt.rR=this.Lue.preload,this.ynt.KO=this.Lue.autoplay,await this.ynt.Ca(this.Lue.source,t),this.Lue=void 0)}async Due(t,e){await(null==t?void 0:t.catch(M)),this.Mue(),await this.ynt.NR(),await this.Bue(e),this.m2t(this.ynt),this.ynt.DR()}async Nue(t,e){await(null==t?void 0:t.catch(M)),this.Fue=this.a4t.CI(),this.Tue=this.Fue+this.Mne,await this.ynt.NR(),await this.Oue(e),this.m2t(this.a4t),this.ynt.bn(Zc.hB,this.Vue),this.ynt.DR()}iu(){return this.Lue?this.Lue.source:super.iu()}jd(){return this.Lue?this.Lue.duration:super.jd()}Wue(){return super.jd()}lR(){const t=super.lR();return ee.Cn(t).Pb(this.Mne).ks()}TI(){const t=super.TI();return ee.Cn(t).Pb(this.Mne).ks()}NR(){return this.a4t.NR()}async bue(){await this.a4t.bue(),this.m2t(this.a4t)}async cae(t){await this.a4t.cae(t)}async nr(){this.Tue=0,this.Aue=0,this.Fue=0,this.Sue=void 0,this.ynt.vn(Zc.hB,this.Vue),await this.a4t.nr()}async yn(){await this.nr(),await super.yn()}constructor(t,e,i){const s=new r6(e,i);super(s),this.Aue=0,this.Tue=0,this.Fue=0,this.xue=0,this.Vue=()=>{if(this.ynt.vn(Zc.hB,this.Vue),this.Sue){const t=this.Sue;t.setSeconds(this.Sue.getSeconds()+this.Fue),this.ynt.kI=t,this.Sue=void 0}this.Tue-=this.ynt.CI(),this.JHt=void 0,this.kue=void 0},this.ynt=t,this.a4t=s}};r();var a6=class extends gc{Ca(t,e){var i;return void 0!==Do(null!=(i=null==t?void 0:t.ads)?i:[],X5)?Promise.reject(new Z(Ci.CONFIGURATION_ERROR,"THEOads must be enabled in the player configuration.")):super.Ca(t,e)}},u6=class extends e6{Uue(){this.ynt.vnt.bn("presentationmodechange",this.Gue)}Zue(){this.ynt.vnt.vn("presentationmodechange",this.Gue)}KI(t){t||this.JI||this.RR(),super.KI(t)}get vnt(){return this.ynt.vnt}async Ca(t,e){await super.Ca(t,e),this._ae&&(this.Hue=this._ae.backdropDoubleBox,this.Xue(new L4(this.ynt,this.a4t),!1,!0))}mae(){this.a4t=new h6(this.ynt,this.wue,this.na.kd)}gae(){super.gae(),this.wue=function(){const t=h.createElement("div");return hn(t,"theo-ads-sgai-ad-player"),t}(),this.Aae.appendChild(this.wue),this.Ahe=function(t){const e=h.createElement("div");return hn(e,"theo-ads-sgai-ima-container"),function(t){t.style.boxSizing="border-box",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%"}(e),t.appendChild(e),e}(this.wue),this.zue()}zue(){Md(this.bae),function(t){const e=t.style;e.boxSizing="border-box",e.position="relative",e.alignItems="center",e.border="0 solid transparent",e.borderWidth="0px",e.backgroundColor="transparent",e.backgroundRepeat="no-repeat",e.backgroundAttachment="scroll"}(this.Aae),z4(this.bae),z4(this.wue)}Sae(){this.Yue(),super.Sae(),this.wue&&(We(this.wue),this.wue=void 0)}Yue(){q4(this.Vs),q4(this.bae)}Xue(t,e,i){var s;const n=null!=(s=this.Kue)?s:this,r=null!=t?t:this.ynt;N4(n,r),void 0!==this.Kue&&(this.Kue.dr(this.Aae,this.bae,this.wue),this.Kue.yn()),null==t||t.pr(this.Aae,this.bae,this.wue,n,e),this.Kue=t,i?this.VO(r):this.m2t(r)}O2t(){return this.a4t}Tae(){return this.Ahe}RR(){var t;super.RR(),null==(t=this.a4t)||t.RR()}DI(t,e){this.jue=!0,super.DI(t,e)}toe(t){var e,i;return t+(null!=(i=null==(e=this.a4t)?void 0:e.Rne)?i:0)}Rae(){var t;super.Rae(),null==(t=this.a4t)||t.bn(ns._b,this.Que),this.ynt.bn(ns.Xy,this.Jue)}Pae(){var t;super.Pae(),null==(t=this.a4t)||t.vn(ns._b,this.Que),this.ynt.vn(ns.Xy,this.Jue)}$ue(){this.Wae(this.CI()),this.tce()}tce(){var t,e;if(this.Qae()||F4(this.Kue))return;const i=null==(t=this.Mae)?void 0:t.Hne;if(void 0===i||(null==(e=this.Kue)?void 0:e.Pne())||rs(this.ynt.CI(),i,.001))return;const s=ee.Cn(this.a4t.TI()),n=this.a4t.lR();if(0===n.length)return;const r=_.min(n.end(n.length-1),i);s.gB().wr(r)&&!this.ynt.dR&&this.ynt.DI(i,{BOt:!0})}async Ohe(t,e,i){var s;const n=K4(t);await this.yae(n),await(null==(s=this.Noe)?void 0:s.Ohe(t,e,i))}fue(t,e){if(c6(this.ynt))return new B4(this.ynt,this.a4t);switch(t){case In.DOUBLE:return e.rre||e.ir({backdropUri:this.Hue}),new G4(this.ynt,this.a4t,e.rre);case In.LSHAPE_AD:return e.rre||e.ir({backdropUri:this.pae}),new X4(this.ynt,this.a4t,e.rre);case In.LSHAPE_CONTENT:return e.rre||e.ir({backdropUri:this.pae}),new H4(this.ynt,this.a4t,e.rre);case In.SINGLE:default:return new O4(this.ynt,this.a4t)}}uae(t){const e=t.nre,i=this.fue(e,t);var s;Ya.$g&&Ya.nm>=16&&Ya.nm<18&&(null==(s=this.a4t)||s.DI(this.a4t.CI()));this.Xue(i,this.oue,!1),Ya.Xv&&!i.Pne()&&(q4(this.bae),Ka(this.bae)),this.fae._o(new J4(t).wa),this.ece=!1,this.qae=void 0,this.Yae=void 0}Kae(t,e){let i=!1;if(this.Qae()){var s,n,r;if(!(null==(s=this.Noe)?void 0:s.isPlayingAd()))return!1;let t=null==(r=this.a4t)?void 0:r.TI().end((null==(n=this.a4t)?void 0:n.TI().length)-1);t&&(t-=this.a4t.Mne,i=this.a4t.jd()-t6<t)}return i||super.Kae(t,e)}async Lae(){var t,e;const i=this.Eae;if(void 0!==i)return this.Iae(),this.sce=this.ynt.kI,null==(t=this.a4t)||t.Eue(this.CI(),this.sce,0,!0),null==(e=this.Noe)||e.Soe(!1),this.na.dR&&this._o(new Be(this.CI())),this.uae(i),this.Rae(),super.Lae()}async Dae(){var t,e;if(this.Yae)return;this.Yae=this.qae,await this.Yae,this.doe(this.Mae);const i=this.Eae;return null==(e=this.a4t)||e.Eue(this.CI(),this.sce,null==(t=this.a4t)?void 0:t.Wue(),!1),await this.bue(),this.uae(i),this.na.DR(),super.Dae()}async d2t(){var t,e;if(void 0===this.Mae)return;this.Pae(),function(t){return t instanceof B4}(this.Kue)&&(this.dae.Pre(this.ynt.nt),this.ynt.bn(Zc.oB,this.Sd));const i=null==(t=this.Kue)?void 0:t.Pne();return this.Xue(new L4(this.ynt,this.a4t),!0,!1),i||(this.jue=!1,this.ynt.DI(this.Mae.Hne,{BOt:!0})),await(null==(e=this.a4t)?void 0:e.NR()),this.Eae&&this.qae&&this.bue(),this.wae(),this.ece=!1,super.d2t()}async bue(){var t;this.a4t&&(await this.a4t.bue(),null==(t=this.Noe)||t.Soe(!0))}async NR(){var t;this.oue=!0,this.jue=!0,this.ece=!0,this.Xue(void 0,!1,!0),await(null==(t=this.a4t)?void 0:t.yn()),this.sce=void 0,this.a4t=void 0,this.Ahe=void 0,await super.NR()}async yn(){var t;this.Zue(),await(null==(t=this.a4t)?void 0:t.yn()),await super.yn()}GR(t){if(void 0!==this.Kue)switch(t.type){case ns.ho:if(!this.ece)return this.ece=!0,!0;this.oue=!0;break;case ns.Ky:if(this.MI&&void 0!==this.Mae)return!0;break;case Zc.uB:if(!this.oue)return!0;this.oue=!1;break;case Zc.aB:this.oue=!0;break;case ns.ib:if(!this.jue)return!0;break;case ns.eb:if(!this.jue)return this.jue=!0,!0;break;case ns.Ly:if(void 0!==this.Mae)return!0}return super.GR(t)}constructor(t){super(t),this.ece=!0,this.oue=!0,this.jue=!0,this.Gue=t=>{if(this.Kue&&!F4(this.Kue)&&this.a4t&&this.Mae)switch(t.presentationMode){case"native-picture-in-picture":this.Xue(new B4(this.ynt,this.a4t),!1,!1);break;case"fullscreen":K2(this.kd)&&this.Xue(new B4(this.ynt,this.a4t),!1,!1);break}},this.Que=t=>{this.$ue()},this.Jue=t=>{this.$ue()},this.Uue()}};function c6(t){const e=t.vnt.Ho()===cu.FULLSCREEN&&K2(t.kd);return t.WZ.CO||e}kF((t=>t.kd.ads.theoads?Ya.Rg||Ya.Ng||Ya.Vg?new n6(t):new u6(t):new a6(t)),hu.Dnt),r(),r(),r(),r(),r();var l6=class extends So{get wa(){return this.eu||(this.eu=function(t){return{get casting(){return t.UQ},get state(){return t.Tft},start(){t.LR()},stop(){t.OR()},addEventListener(e,i){const s=Ta(e,os);t.bn(s,i)},removeEventListener(e,i){const s=Ta(e,os);t.vn(s,i)}}}(this)),this.eu}constructor(...t){super(...t),this.eu=void 0}},d6=class extends l6{get UQ(){return this.Tft===hh.CONNECTED}get Tft(){return this.Fa}nce(){this.rce(),this.Omt.bn(ns.uo,this.oce),this.Da(hh.AVAILABLE)}rce(){this.na&&this.na.vn(ns.Sy,this.handleAirplayChangedEvent),this.hce?this.na=this.Kj:this.na=this.ace,this.na.bn(ns.Sy,this.handleAirplayChangedEvent)}get hce(){return this.Kj.MR()}async uce(){if(this.na){if(this.hce){if(!this.na.JI){const t=new Promise((t=>u(t,800))),e=this.na.Ay(ns.Ky,this.cce.ep);await Promise.race([e,t])}this.na.DR()}else{this.lce=this.Kj.RI,this.dce=this.Kj.kI,this.ace.bn(ns._b,this.handleAirplayPlayerTimeUpdate),this.fce=this.Kj.bC,this.Kj.bC=this.ace,this.fce.PR(),this.fce.be(),this.ace.ge(),this.ace.qI=this.fce.qI,this.ace.tR=this.fce.tR,this.ace.yR=this.fce.yR;const t=this.ace.Ay(ns.eb);this.ace.RI=this.fce.RI,await t,this.ace.DR(),this.ace.qI=this.fce.qI,this.ace.tR=this.fce.tR,this.ace.yR=this.fce.yR}this.Da(hh.CONNECTED)}}_ce(){if(this.fce){this.ace.vn(ns._b,this.handleAirplayPlayerTimeUpdate),this.fce.qI=this.ace.qI,this.fce.tR=this.ace.tR,this.fce.yR=this.ace.yR;Ya.$g&&!Ya.su&&this.Kj.ct===1/0?this.dce?this.fce.kI=this.dce:this.fce.RI=1/0:this.fce.RI=this.lce,this.dce=void 0,this.lce=void 0,this.fce.ge(),this.ace.be(),this.ace.JI||this.fce.DR(),this.Kj.bC=this.fce,this.ace.nr(),this.fce=void 0}else this.na&&(this.na.RI=this.na.RI+1e-4);this.Da(hh.AVAILABLE)}preloadPlayer(t){if(Io(t),this.na.aR<Wt.Xn){const e=this.na.Ay(Zc.hB,t);return this.na.rR=hi.xW,e}return Promise.resolve()}Da(t){t!==this.Fa&&(this.Fa=t,this._o(new W1(this.Fa)))}LR(){let t;this.Omt.RR(),this.cce.np(),this.cce=new Fi,t=this.hce?this.vce(this.cce.ep):this.gce(this.cce.ep),uh(Ts(t,this.cce))}async vce(t){await this.preloadPlayer(t),this.Kj.LR()}async gce(t){try{await this.ace.nr();const e=this.Kj.iu();if(void 0===e)throw new m("Not possible to start Airplay without a source");await this.ace.Ca(e,t);const i=this.ace.Ay(Zc.uB,t);this.ace.DR(),await pf(i,3e3),this.ace.PR(),Io(t),this.ace.LR()}catch(t){if(Se(t))return;0}}OR(){this.na.OR()}yn(){var t;this.Ro(),this.Omt.vn(ns.uo,this.oce),this.cce.np(),this.Kj.YO(this.ace),null==(t=this.ace)||t.yn()}constructor(t,e,i){super(),this.Fa=hh.UNAVAILABLE,this.cce=new Fi,this.oce=()=>{var t;const e=null==(t=this.Kj.iu())?void 0:t.sources.filter(nk);(null==e?void 0:e.some(FR))?this.Da(hh.AVAILABLE):this.Da(hh.UNAVAILABLE)},this.handleAirplayChangedEvent=()=>{this.na&&this.na.ZI?this.uce():this.Tft===hh.CONNECTED&&this._ce()},this.handleAirplayPlayerTimeUpdate=t=>{this.lce=t.currentTime,this.dce=this.Kj.kI},this.Omt=t,this.Kj=e,this.ace=i,this.ace.be(),e.qO(i),this.nce()}};r();var f6=class extends l6{get UQ(){return!1}get Tft(){return hh.UNAVAILABLE}LR(){}OR(){}};r();var _6=class extends en{WR(){this.mce.WR()}ZR(t){throw new m("Can't add a track while using AirPlay.")}get ht(){return this.mce.ht}get SI(){return this.mce.SI}get bt(){return this.IH}get RI(){return this.mce.RI}set RI(t){this.DI(t)}DI(t,e){this.mce.DI(t,e)}get kI(){return this.mce.kI}get ct(){return this.mce.ct}get we(){return this.Vs}get MI(){return this.mce.MI}get lt(){return this.mce.lt}get OI(){return this.mce.OI}get VI(){return this.mce.VI}get UI(){return this.mce.UI}get ZI(){return this.mce.ZI}get ER(){return this.mce.ER}get SR(){return this.mce.SR}get XI(){return this.mce.XI}get qI(){return this.mce.qI}set qI(t){this.mce.qI=t}get jI(){return this.mce.jI}get JI(){return this.mce.JI}get tR(){return this.mce.tR}set tR(t){this.mce.tR=t}get sR(){return this.mce.sR}get rR(){return this.mce.rR}set rR(t){this.mce.rR=t}get aR(){return this.mce.aR}get cR(){return this.mce.cR}get dR(){return this.mce.dR}MR(){return this.mce.MR()}LR(){this.mce.LR()}OR(){this.mce.OR()}get nt(){return this.mce.nt}get vR(){return this.mce.vR}get pR(){return this.mce.pR}get rt(){return this.mce.rt}get yR(){return this.mce.yR}set yR(t){this.mce.yR=t}DR(){uh(this.mce.DR())}PR(){this.mce.PR()}async NR(){}iu(){return this.Sc}async Ca(t,e){let i;if(Io(e),this.Sc=t,Gn(t.sources))i=ll({src:""});else{const e=t.sources.filter(nk);for(const t of e)if(FR(t)){i=t;break}}if(!i)throw new m("Unsupported source.");await this.mce.Ca(i,t,e),this.BH(i)}BH(t){this.IH!==t&&(this.IH=t,this._o(new vk(t)))}IR(){return this.mce.IR()}AI(){return[]}RR(){this.pce.ZH()}pr(t){dk(this,t)}dr(){}UR(t){return!1}FR(){this.mce.FR()}async nr(){this.IH=void 0,this.Sc=void 0,await this.mce.nr()}ge(){this.mce.ge()}be(){this.mce.be()}xR(){return this.mce.xR()}ja(){return this.mce.ja()}async yn(){this.Ro(),this.pce.yn(),await this.mce.yn(),this.LO.yn(),this.FO.yn(),this.Hl.yn()}constructor(t,e,i,s,n,r,o){super(),this.IH=void 0,this.Sc=void 0,this.LO=new pS,this.FO=new pS,this.Hl=new yt,this.Vs=t,this.pce=new Vu(r,o,1,[Fo.yE]),this.pce.Mst(t),this.mce=new OR(t,this.pce,e,i,s,n),this.mce._y(this.Ds),this.LO.bC=this.mce.ht,this.FO.bC=this.mce.rt,this.Hl.bC=this.mce.nt}},v6=class extends gc{async yn(){this.wce.yn(),await super.yn()}constructor(t){super(t);const e=new _6(this.Ta.we,this.mI,this.kd,this.snt,this.SR,this.ant,this.Wl);this.wce=new d6(this,this.Ta,e),this.rq.zQ(this.wce),this.bn(ns.Cy,(()=>{this.wce.rce()}))}};kF((t=>As.Ys.wp?new v6(t):(t.rq.zQ(new f6),t)),hu.Nnt),r(),r();var g6="VPAID";function m6(t){return"spotx"===t.integration}Ch.Vm.nX(new class t{get F2t(){return this.yce.F2t}sX(t){return m6(t)}V2t(e,i,s){return s.ads||(s.ads=ik({})),s.ads.vpaidMode=s.ads.vpaidMode||t.bce(),this.yce.V2t(e,i,s)}K6(e,i,s,n){!function(t){if(!m6(t))throw new m("Unknown ad integration: "+t.integration)}(e);const r=t.Ace(e,s.we);this.yce.K6(r,i,s,n)}Aq(t){const e=Fa(t);if(!S(e.id))return e.queryParameters||(e.queryParameters={}),e.custom&&(e.queryParameters.custom?vl('"custom" parameter is redefined in queryParameters! Please use "queryParameters.custom" only!'):(e.queryParameters.custom=e.custom,delete e.custom)),e.app&&(e.queryParameters.app?vl('"app" parameter is redefined in queryParameters! Please use "queryParameters.app" only!'):(e.queryParameters.app=e.app,delete e.app)),e.device&&(e.queryParameters.device?vl('"device" parameter is redefined in queryParameters! Please use "queryParameters.device" only!'):(e.queryParameters.device=e.device,delete e.device)),e.user&&(e.queryParameters.user?vl('"user" parameter is redefined in queryParameters! Please use "queryParameters.user" only!'):(e.queryParameters.user=e.user,delete e.user)),e.ipAddress&&(e.queryParameters.ip_addr?vl('"ipAddress" parameter is redefined in queryParameters! Please use "queryParameters.ip_addr" or "ipAddress" only!'):(e.queryParameters.ip_addr=e.ipAddress,delete e.ipAddress)),e.maximumAdDuration&&(e.queryParameters.VMaxd?vl('"maximumAdDuration" parameter is redefined in queryParameters! Please use "queryParameters.VMaxd" or "maximumAdDuration" only!'):(e.queryParameters.VMaxd=e.maximumAdDuration,delete e.maximumAdDuration)),e}static Ace(e,i){return{integration:vu.SPOTX,sources:{src:t.Sce(e,s.location.href,i.offsetWidth,i.offsetHeight,Ya.Cm)}}}static Sce(e,i,s,n,r){if(e.sources)return e.sources;let o=n,h=s;r&&0===h&&(h=320,o=180);const a={custom_skin:1,player_width:h,player_height:o};e.cacheBuster&&(a.cb=_.random()),t.Tce(i)&&(a.content_page_url=i);const u=ne({},a,e.queryParameters);return u[g6]||u.VPI||(u[g6]="js"),"https://search.spotxchange.com/vast/2.0/"+e.id+"?"+t.kce(u)}static Tce(t){return Cl(t,"http://")||Cl(t,"https://")}static kce(t){return L0(t)}static bce(){return Ya.Ug?Fn.ENABLED:Fn.INSECURE}constructor(){this.yce=new $2}}),r(),r(),r(),r();var p6=_.PI/180,w6=180/_.PI,y6=class{Wb(t,e){return this.x=t,this.y=e,this}s_t(t){return this.x=t.x,this.y=t.y,this}Ece(t){return this.Wb(t[0],t[1])}xce(){const t=new Float32Array(2);return t[0]=this.x,t[1]=this.y,t}Ice(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}constructor(t,e){this.x=t||0,this.y=e||0}},Ku=class{Wb(t,e,i){return this.x=t,this.y=e,this.z=i,this}s_t(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}Ece(t){return this.Wb(t[0],t[1],t[2])}xce(){const t=new Float32Array(3);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t}V(){return _.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}Rce(){const t=this.V();if(0!==t){const e=1/t;this.Cce(e)}else this.x=0,this.y=0,this.z=0;return this}Cce(t){this.x*=t,this.y*=t,this.z*=t}Pce(t){const e=this.x,i=this.y,s=this.z,n=t.x,r=t.y,o=t.z,h=t.w,a=h*e+r*s-o*i,u=h*i+o*e-n*s,c=h*s+n*i-r*e,l=-n*e-r*i-o*s;return this.x=a*h+l*-n+u*-o-c*-r,this.y=u*h+l*-r+c*-n-a*-o,this.z=c*h+l*-o+a*-r-u*-n,this}Dce(t){return this.x*t.x+this.y*t.y+this.z*t.z}Nce(t,e){const i=t.x,s=t.y,n=t.z,r=e.x,o=e.y,h=e.z;return this.x=s*h-n*o,this.y=n*r-i*h,this.z=i*o-s*r,this}constructor(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}},Zo=class{Wb(t,e,i,s){return this.x=t,this.y=e,this.z=i,this.w=s,this}s_t(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}Ece(t){return this.Wb(t[0],t[1],t[2],t[3])}xce(){const t=new Float32Array(4);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=this.w,t}Dce(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}kV(t){return this.Mce(this,t)}Mce(t,e){const i=t.x,s=t.y,n=t.z,r=t.w,o=e.x,h=e.y,a=e.z,u=e.w;return this.x=i*u+r*o+s*a-n*h,this.y=s*u+r*h+n*o-i*a,this.z=n*u+r*a+i*h-s*o,this.w=r*u-i*o-s*h-n*a,this}Lce(){return this.x*=-1,this.y*=-1,this.z*=-1,this.Rce(),this}Bce(){const t=this.x,e=this.y,i=this.z,s=this.w,n=t*e+i*s;let r,o,h;if(n>.499)r=2*_.atan2(t,s),o=_.PI/2,h=0;else if(n<-.499)r=-2*_.atan2(t,s),o=-_.PI/2,h=0;else{const a=t*t,u=e*e,c=i*i;r=_.atan2(2*e*s-2*t*i,1-2*u-2*c),o=_.asin(2*n),h=_.atan2(2*t*s-2*e*i,1-2*a-2*c)}return new b6(r,h,o)}Rce(){let t=_.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this}constructor(t,e,i,s){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==s?s:1}},b6=class{Wb(t,e,i){return this.Oce=t,this.Fce=e,this.Vce=i,this}s_t(t){return this.Wb(t.Oce,t.Fce,t.Vce)}QO(t){return this.Oce+=t.Oce,this.Fce+=t.Fce,this.Vce+=t.Vce,this}jF(t){return this.Oce-=t.Oce,this.Fce-=t.Fce,this.Vce-=t.Vce,this}Wce(){const t=this.Oce,e=this.Vce,i=this.Fce,s=_.cos(t/2),n=_.cos(e/2),r=_.cos(i/2),o=_.sin(t/2),h=_.sin(e/2),a=_.sin(i/2),u=s*n,c=o*h;return new Zo(u*a+c*r,o*n*r+s*h*a,s*h*r-o*n*a,u*r-c*a)}constructor(t,e,i){this.Oce=t||0,this.Fce=e||0,this.Vce=i||0}};r();var A6=["Uce","Qht","Gce","error"];r();var S6=function(t){return t.Rs="unavailable",t.Zce="available",t.Xa="presenting",t}({});r();var T6=class{MW(){this.qe||(this.qe=!0,this.Vs.addEventListener("mousedown",this.Hce),this.Vs.addEventListener("touchstart",this.Xce),s.addEventListener("mousemove",this.ar),s.addEventListener("touchmove",this.zce),s.addEventListener("mouseup",this.qce),s.addEventListener("touchend",this.Yce),this.Kce(s))}LW(){this.qe&&(this.qe=!1,this.Vs.removeEventListener("mousedown",this.Hce),this.Vs.removeEventListener("touchstart",this.Xce),s.removeEventListener("mousemove",this.ar),s.removeEventListener("touchmove",this.zce),s.removeEventListener("mouseup",this.qce),s.removeEventListener("touchend",this.Yce),this.jce(s))}Kce(t){if(function(t){try{return Boolean(t)&&t===t.top}catch(t){return!1}}(t));else if(Od(t))try{t.parent.addEventListener("mouseup",this.qce),this.Kce(t.parent)}catch(e){t.document.documentElement.addEventListener("mouseleave",this.Qce)}}jce(t){if(t.document.documentElement.removeEventListener("mouseleave",this.Qce),Od(t))try{t.parent.removeEventListener("mouseup",this.qce),this.jce(t.parent)}catch(t){}}Jce(){this.$ce=!1}tle(){const t=this.sle.ele;t.yaw+=2*_.PI*this.nle.x*.4/this.Vs.clientWidth,t.pitch+=2*_.PI*this.nle.y*.5/this.Vs.clientHeight,t.pitch=bi(t.pitch,-_.PI/2,_.PI/2),this.sle.ele=t}rle(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.Vs}yn(){this.LW()}constructor(t,e){this.qe=!1,this.ole=new y6,this.hle=new y6,this.nle=new y6,this.$ce=!1,this.Hce=t=>{this.ole.Wb(t.clientX,t.clientY),this.$ce=!0,t.preventDefault(),t.stopPropagation()},this.Xce=t=>{t.touches&&1===t.touches.length&&(this.ole.Wb(t.touches[0].pageX,t.touches[0].pageY),this.$ce=!0,t.preventDefault())},this.ar=t=>{if(this.$ce||this.rle()){if(this.rle()){const e=t.movementX||t.mozMovementX||0,i=t.movementY||t.mozMovementY||0;this.hle.Wb(this.ole.x-e,this.ole.y-i)}else this.hle.Wb(t.clientX,t.clientY);this.nle.Ice(this.hle,this.ole),this.ole.s_t(this.hle),this.tle()}},this.zce=t=>{this.$ce&&(this.hle.Wb(t.touches[0].pageX,t.touches[0].pageY),this.nle.Ice(this.hle,this.ole),this.ole.s_t(this.hle),this.tle())},this.qce=()=>{this.Jce()},this.Yce=()=>{this.Jce()},this.Qce=()=>{this.Jce()},this.sle=t,this.Vs=e}};r();var k6=class extends $s{ka(){return new E6}constructor(){super("Gce")}},E6=class extends me{constructor(){super("stereochange")}};r();var x6=class{ale(t){t.clearColor(...this.yJ),t.clear(t.COLOR_BUFFER_BIT)}ule(t,e){t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.DEPTH_BUFFER_BIT),this.cle.forEach((i=>{i.ule(t,e)}))}lle(t){this.cle.push(t)}dle(){this.cle=[]}constructor(){this.yJ=[0,0,0,1],this.cle=[]}};r(),r(),r();var I6=class{fle(t,e,i){const s=t.createBuffer();return null===s?(vl("Failed to create buffer."),null):(t.bindBuffer(e,s),t.bufferData(e,i,t.STATIC_DRAW),s)}constructor(t,e,i,s,n){this._le=t,this.jb=this.fle(t,e,i),this.vle=s,this.Zp=n,this.mle=!1,this.ple=0,this.rc=0}},R6=class extends I6{MW(t){if(null===this.jb)return void vl("Attempted to enable buffer that failed to initialize.");if(null===t)return void vl("Attempted to enable attribute without location.");const e=this._le;e.bindBuffer(e.ARRAY_BUFFER,this.jb),e.vertexAttribPointer(t,this.vle,this.Zp,this.mle,this.ple,this.rc),e.enableVertexAttribArray(t)}LW(t){t&&this._le.disableVertexAttribArray(t)}constructor(t,e,i){super(t,t.ARRAY_BUFFER,e,i,t.FLOAT)}};var C6=class extends I6{wle(){const t=this._le;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.jb),t.drawElements(t.TRIANGLES,this.yle,this.Zp,this.rc)}constructor(t,e){super(t,t.ELEMENT_ARRAY_BUFFER,e,1,t.UNSIGNED_SHORT),this.yle=e.length}};r();var P6=function(t){return t.VertexPos="aVertexPosition",t.VertexUV="aVertexUV",t.VertexColor="aVertexColor",t}({}),ia=function(t){return t.ProjectionMat="uProjectionMatrix",t.ModelViewMat="uModelViewMatrix",t.Texture="uTexture",t}({}),D6=function(t){return t.Normal="vNormal",t.Color="vColor",t.UV="vUV",t}({}),N6=class{ble(t,e,i){const s=this.Ale(t,t.VERTEX_SHADER,e),n=this.Ale(t,t.FRAGMENT_SHADER,i);if(null===s||null===n)return vl("Failed to create vertex or fragment shader."),null;const r=t.createProgram();return null===r?(vl("Failed to create shader program"),null):(t.attachShader(r,s),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(vl("Failed to initialize shader program"),null))}Ale(t,e,i){const s=t.createShader(e);if(null===s)return vl("failed to create shader."),null;if(t.shaderSource(s,i),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){const e=t.getShaderInfoLog(s);return vl("Failed to compile shader with error: "+e),t.deleteShader(s),null}return s}Sle(){return this.Tle}kle(t){const e=this.Tle;if(null===e)return vl("Attempted to retrieve attribute location when shader program was not initialized"),null;const i=this._le.getAttribLocation(e,t);return-1===i?null:i}Ele(t){const e=this.Tle;if(null===e)return vl("Attempted to retrieve uniform location when shader program was not initialized"),null;const i=this._le.getUniformLocation(e,t);return null===i&&S_("Attempted to retrieve nonexistent uniform: "+t),i}constructor(t,e,i){this._le=t,this.Tle=this.ble(this._le,e,i)}},M6=class{xle(){const t=this.Ile.length,e=_.max(...this.Rle);return e>=t?(S_("Created geometry where largest index ("+e+") is larger than/equal to attribute array size ("+t+")"),!1):(e<t-1&&vl("Created geometry where largest index ("+e+") is smaller than attribute buffer - 1 ("+(t-1)+") resulting in unused vertices"),!this.Cle||this.Cle.length===t||(S_("Created geometry where position ("+t+") and uv ("+this.Cle.length+") buffers have different length."),!1))}Ple(t,e){if(!this.xle())throw new m("Failed to validate buffers for WebGLGeometry.");const i=function(t,e){const i=[];return e.forEach((t=>{i.push(t.x,t.y,t.z)})),new R6(t,new Float32Array(i),3)}(t,this.Ile),s=function(t,e){return new C6(t,new Uint16Array(e))}(t,this.Rle),n=function(t,e){const i=[];return e.forEach((t=>{i.push(t.x,t.y)})),new R6(t,new Float32Array(i),2)}(t,this.Cle);return new L6(i,s,n,e)}constructor(t,e,i){this.Ile=t,this.Rle=e,this.Cle=i}},L6=class{Dle(){this.Ile.MW(this.Nle),null!==this.Mle&&this.Cle.MW(this.Mle)}Lle(){this.Ile.LW(this.Nle),null!==this.Mle&&this.Cle.LW(this.Mle)}ule(){this.Rle.wle()}constructor(t,e,i,s){this.Ile=t;const n=s.kle(P6.VertexPos);if(null===n)throw new m("Failed to get position attribute location.");this.Nle=n,this.Cle=i,this.Mle=s.kle(P6.VertexUV),this.Rle=e}},B6=class extends M6{constructor(t=1,e=32,i=16,s=0,n=2*_.PI,r=0,o=_.PI){let h=0;const a=_.min(r+o,_.PI),u=[],c=[],l=[],d=[];for(let u=0;u<=i;u++){const f=[],v=u/i;let g=0;0===u&&0===r?g=.5/e:u===i&&a===_.PI&&(g=-.5/e);for(let i=0;i<=e;i++){const a=i/e,u=-t*_.cos(s+a*n)*_.sin(r+v*o),d=t*_.cos(r+v*o),m=t*_.sin(s+a*n)*_.sin(r+v*o);c.push(new Ku(u,d,m)),l.push(new y6(a+g,1-v)),f.push(h++)}d.push(f)}for(let t=0;t<i;t++)for(let s=0;s<e;s++){const e=d[t][s+1],n=d[t][s],o=d[t+1][s],h=d[t+1][s+1];(0!==t||r>0)&&u.push(e,n,h),(t!==i-1||a<_.PI)&&u.push(n,o,h)}super(c,u,l)}};r(),r();var O6=[0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,255],F6=class{Ble(){const t=this._le;t.activeTexture(this.Ole),t.bindTexture(t.TEXTURE_2D,this.Fle)}pr(){const t=this._le;t.activeTexture(this.Ole),t.bindTexture(t.TEXTURE_2D,this.Fle),t.uniform1i(this.Vle,0)}Wle(t){const e=this._le;e.bindTexture(e.TEXTURE_2D,this.Fle),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,this.A2,this.Ule,this.Gle,this.Zle,t),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1)}Hle(t){const e=this._le;e.bindTexture(e.TEXTURE_2D,this.Fle),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),t.gnt.qY(e,e.TEXTURE_2D,this.A2,this.Ule,this.Gle,this.Zle),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1)}constructor(t,e){if(this._le=t,this.Fle=t.createTexture(),null===this.Fle)throw new m("Failed to create texture");const i=e.Ele(ia.Texture);if(null===i)throw new m("Failed to get texture location.");this.Vle=i,t.bindTexture(t.TEXTURE_2D,this.Fle),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.Ole=t.TEXTURE0,this.A2=0,this.Ule=t.RGBA,this.Gle=t.RGBA,this.Zle=t.UNSIGNED_BYTE,t.texImage2D(t.TEXTURE_2D,this.A2,this.Ule,2,2,0,this.Gle,this.Zle,new j(O6))}},V6="\n    attribute vec4 "+P6.VertexPos+";\n    attribute vec2 "+P6.VertexUV+";\n\n    uniform mat4 "+ia.ModelViewMat+";\n    uniform mat4 "+ia.ProjectionMat+";\n    \n    varying mediump vec2 "+D6.UV+";\n    \n    void main() {\n      gl_Position = "+ia.ProjectionMat+" * "+ia.ModelViewMat+" * "+P6.VertexPos+";\n      "+D6.UV+" = "+P6.VertexUV+";\n    }\n",W6="\n    varying mediump vec2 "+D6.UV+";\n    \n    uniform sampler2D "+ia.Texture+";\n\n    void main() {\n      gl_FragColor = texture2D("+ia.Texture+", "+D6.UV+");\n    }\n",U6=class{Sle(){return this.Tle}MW(){this._le.useProgram(this.Tle.Sle()),this.Fle.pr()}Xle(t){this.Fle.Wle(t)}zle(t){this.Fle.Hle(t)}constructor(t){this._le=t,this.Tle=new N6(t,V6,W6),this.Fle=new F6(t,this.Tle)}};r(),r();var G6=Qs(Kl()),Z6=Qs(Ql()),H6=(Qs(Jl()),Qs($l())),X6=(Qs(td()),Qs(ed())),z6=Qs(id()),q6=Qs(sd()),Y6=Qs(nd()),K6=Qs(rd()),j6=class{ule(t,e){if(this.qle(e.Yle)){this.Kle.Dle(),this.jle.MW();const i=this.Qle,s=e.Jle,n=(0,z6.default)(s,s,i);t.uniformMatrix4fv(this.$le,!1,n);const r=e.tde;t.uniformMatrix4fv(this.ede,!1,r),this.Kle.ule(),this.Kle.Lle()}}qle(t){return"none"===this.Yle||"right"!==t&&"left"===this.Yle||"right"===t&&"right"===this.Yle}get Qle(){const t=(0,G6.default)(),e=this.fo;return(0,K6.default)(t,t,e.xce()),(0,Y6.default)(t,t,this.ide.x,new Float32Array([1,0,0])),(0,Y6.default)(t,t,this.ide.y,new Float32Array([0,1,0])),(0,Y6.default)(t,t,this.ide.z,new Float32Array([0,0,1])),t}constructor(t,e,i,s){this.fo=new Ku,this.ide=new Ku,this.Yle="none",this.jle=i;const n=i.Sle();this.Kle=e.Ple(t,n),s&&(this.Yle=s);const r=n.Ele(ia.ModelViewMat);if(null===r)throw new m("Failed to get model view matrix location.");this.$le=r;const o=n.Ele(ia.ProjectionMat);if(null===o)throw new m("Failed to get projection matrix location.");this.ede=o}};r();var Q6=class{sde(){const t=(0,G6.default)();return(0,q6.default)(t,this.rde,this.ode,this.hde,this.ade)}ude(){this.cde=this.sde()}get tde(){return new Float32Array(this.cde)}set tde(t){this.cde=t}lde(){const t=(0,G6.default)(),e=(0,H6.default)((0,G6.default)(),this.dde.xce()),i=(0,Z6.default)((0,G6.default)(),this.fde.xce());return(0,z6.default)(t,e,i),(0,X6.default)(t,t),t}_de(){this.vde=this.lde()}get Jle(){return new Float32Array(this.vde)}gde(){this._de(),this.ude()}nr(){this.dde=new Ku,this.ide=new Zo,this.gde()}mde(t){const e=this.fde.Bce();e.QO(t),this.ide=e.Wce()}pde(t){this.ide=t.Wce()}get wde(){return this.rde}set wde(t){this.rde=t,this.ude()}get yde(){return this.ode}set yde(t){this.ode=t,this.ude()}get fo(){return(new Ku).s_t(this.dde)}set fo(t){this.dde=t,this._de()}get ide(){return(new Zo).s_t(this.fde)}set ide(t){this.fde=t,this._de()}constructor(t){this.rde=72*_.PI/180,this.ode=1.77,this.hde=.1,this.ade=100,this.Yle="none",this.dde=new Ku,this.fde=new Zo,this.cde=this.sde(),this.vde=this.lde(),t&&(this.Yle=t)}};r();var J6=class extends $s{ka(){return new $6}constructor(){super("Uce")}},$6=class extends me{constructor(){super("directionchange")}},t9=1e-4,e9=class extends So{bde(){Bl.xr?(Bl.xr.addEventListener("devicechange",this.Ade),this.Ade()):this.GNt("Your browser does not support WebXR",Ci.VR_PLATFORM_UNSUPPORTED)}Sde(){this.na.Sa.bn(Wi.da,this.gn),this.na.bn(ln.mn,this.gn),this.na.bn(ns.uo,this.co),this.na.bn(ns.eb,this.rz)}Tde(){var t;this.kde||(this.kde=h.createElement("canvas"),this.kde.className="theoplayer-vr",this.kde.style.zIndex="2",this.kde.style.background="black",this.kde.style.display="none",this.na.we.appendChild(this.kde),Ka(this.kde));const e=null!=(t=this.kde.getContext("webgl2"))?t:this.kde.getContext("webgl");e?(this._le=e,this.Ede=new T6(this,this.kde)):this.GNt("Your browser does not support WebGL",Ci.VR_PLATFORM_UNSUPPORTED)}async xde(){if(!Bl.xr)return this.Ide=!1,void(this.Rde=!1);await Promise.all([Bl.xr.isSessionSupported("inline").then((t=>{this.Ide=t})).catch((t=>{this.Ide=!1,this.GNt("exception when calling xr.isSessionSupported for inline session: "+t,Ci.VR_PRESENTATION_ERROR)})),Bl.xr.isSessionSupported("immersive-vr").then((t=>{this.Rde=t})).catch((t=>{this.Rde=!1,this.GNt("exception when calling xr.isSessionSupported for immersive-vr session: "+t,Ci.VR_PRESENTATION_ERROR)}))])}Cde(){this.Pde&&(this.Dde(this.Nde,this.Mde),this.Lde())}Dde(t,e){const i=this._le;if(!i||t===PC.NONE)return;let s,n;this.Bde.dle(),t===PC.PM360?(s=2*_.PI,n=-_.PI/2):(s=_.PI,n=-_.PI);const r=new B6(16,60,40,0,s),o=[],h=[];for(let t=0;t<r.Cle.length;t++){const i=r.Cle[t];switch(e){case wu.NONE:o.push(i),h.push(i);break;case wu.VERTICAL:o.push(new y6(i.x,.5*i.y)),h.push(new y6(i.x,.5*i.y+.5));break;case wu.HORIZONTAL:o.push(new y6(.5*i.x,i.y)),h.push(new y6(.5*i.x+.5,i.y))}}r.Ile.forEach((t=>{t.x*=-1}));const a=new M6(r.Ile,r.Rle,o),u=new M6(r.Ile,r.Rle,h);this.Ode=new U6(i);const c=new j6(i,a,this.Ode,"left");c.ide.y=n,this.Bde.lle(c);const l=new j6(i,u,this.Ode,"right");l.ide.y=n,this.Bde.lle(l)}Lde(){this._le&&(this.kde.style.display="block",this.Fde(),this.na.vn(ns.ho,this.Vde),this.Ide&&(this.na.JI?this.na.bn(ns.ho,this.Vde):this.Vde()))}Wde(){this.Ude(),this.na.vn(ns.ho,this.Vde),this.kde&&(this.kde.style.display="none")}Gde(){this.Zde(),this.Hde()}async Xde(){if(!this.zde&&this.Ide)try{const t=await Lu(Bl.xr.requestSession("inline"),this.GW.ep);let e;e=Ya.Qs?Ya.gg?"viewer":"local":"viewer";const i=await t.requestReferenceSpace(e);t.addEventListener("end",this.Zde),this.qde=i,this.zde=t,this.Ede.MW(),this.Yde(),await t.updateRenderState({baseLayer:new XRWebGLLayer(t,this._le),inlineVerticalFieldOfView:this.rde*p6})}catch(t){this.Zde(),this.GNt(t,Ci.VR_PRESENTATION_ERROR)}}Zde(){this.zde&&(this.Ude(),this.Ede.LW(),this.zde.removeEventListener("end",this.Zde),this.zde.end().catch(M),this.zde=null,this.Fde())}async Kde(){if(!this.jde&&this.Rde){this.Ude();try{const t=await Lu(Bl.xr.requestSession("immersive-vr"),this.GW.ep),e=await t.requestReferenceSpace("local");t.addEventListener("end",this.Hde),this.Qde=e,this.jde=t,await this.Jde(),this.Yde()}catch(t){this.Hde(),this.GNt(t,Ci.VR_PRESENTATION_ERROR)}}}async Jde(){const t=this._le,e=this.jde;this.kde&&t&&e&&!this.$de&&(this.kde.addEventListener("webglcontextlost",(t=>{t.preventDefault()})),this.kde.addEventListener("webglcontextrestored",(()=>{this.Dde(this.Nde,this.Mde)})),this.$de=!0,await t.makeXRCompatible(),await e.updateRenderState({baseLayer:new XRWebGLLayer(e,t)}))}Fde(){if(!this.jde&&this._le){const t=this._le,e=this.kde.clientWidth,i=this.kde.clientHeight;if(0===e||0===i)return;const s=As.Ys.pp;this.kde.width=e*s,this.kde.height=i*s,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}}Yde(){null===this.tfe&&(this.efe(),this.ife?this.tfe=this.ife.requestAnimationFrame(this.sfe):this.nfe())}Ude(){null!==this.tfe&&(this.nfe(),this.ife&&this.ife.cancelAnimationFrame(this.tfe),this.tfe=null)}efe(){if(null!==this.rfe)return;const t=this.na.IR();if(void 0===t||!(t instanceof HTMLVideoElement))return void 0;if("function"!=typeof t.requestVideoFrameCallback)return;const e=()=>{this.Ode.zle(this.na),this.rfe=t.requestVideoFrameCallback(e)};this.ofe=t,this.rfe=t.requestVideoFrameCallback(e)}nfe(){var t,e;null!==this.rfe&&(null==(e=this.ofe)||null==(t=e.cancelVideoFrameCallback)||t.call(e,this.rfe),this.ofe=null,this.rfe=null)}hfe(){return!!this.afe||(Ya.su?this.ufe&&this.cfe:this.ufe)}lfe(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().then((t=>{this.cfe="granted"===t}))}dfe(){return(!this.JI()||Boolean(this.ffe))&&this._fe()}JI(){return this.na.JI}_fe(){return this.na.aR>=2}get vfe(){return this.gfe}set vfe(t){const e=this.Tft;this.gfe=t,this.Tft!==e&&this._o(new qu)}get Pde(){return this.Nde!==PC.NONE}get Nde(){return this.mfe}set Nde(t){const e=this.Tft;this.mfe=t,this.Tft!==e&&this._o(new qu)}get Rde(){return this.pfe}set Rde(t){const e=this.pfe;this.pfe=t,this.pfe!==e&&this._o(new qu)}get wfe(){return this.Rde}get ife(){return this.jde||this.zde}get jde(){return this.afe}set jde(t){const e=this.Tft;this.afe=t,this.Tft!==e&&this._o(new qu)}get yfe(){return this.Qde||this.qde}get bfe(){const t=this.Afe.Bce();return{yaw:t.Oce*w6,pitch:t.Fce*w6,roll:t.Vce*w6}}set bfe(t){const e=i9(t&&t.pitch||0)*p6,i=i9(t&&t.roll||0)*p6,s=i9(t&&t.yaw||0)*p6,n=new b6(s,e,i),r=this.Afe.Bce(),o=this.Sfe.Bce();this.Afe=n.Wce(),this.Sfe=n.jF(r).QO(o).Wce()}get ele(){const t=this.Sfe.Bce();return{yaw:t.Oce,pitch:t.Fce,roll:t.Vce}}set ele(t){const e=s9(t&&t.pitch||0),i=s9(t&&t.roll||0),s=s9(t&&t.yaw||0),n=new b6(s,e,i);this.Sfe=n.Wce()}get Tft(){return this.vfe?this.jde?S6.Xa:S6.Zce:S6.Rs}get Tfe(){return null!==this.jde}set Tfe(t){const e=this.Tfe;t&&this.Rde?this.Kde():this.Hde(),this.Tfe!==e&&this._o(new k6)}get kfe(){return this.ufe}set kfe(t){null===this.afe&&(this.ufe=t,t&&Ya.su&&this.lfe())}get Efe(){return this.rde}set Efe(t){t&&t>=0&&t<=180&&(this.rde=t,null!==this.zde&&this.zde.updateRenderState({inlineVerticalFieldOfView:this.rde*p6}))}GNt(t,e){this._o(new Pi(new Z(e,t)))}xfe(){const t=this.na.iu();return t&&t.vr}yn(){this.GW.np(),this.Gde(),this.Ro(),this.kde&&(We(this.kde),this.kde=void 0),this._le=void 0,this.Ede&&(this.Ede.yn(),this.Ede=void 0),this.na=void 0}constructor(t){super(),this.GW=new Fi,this.Ide=!1,this.pfe=!1,this.Afe=new Zo,this.Ife=new Zo,this.Sfe=new Zo,this.rde=74,this.ufe=!1,this.FT=void 0,this.Mde=wu.NONE,this.gfe=!1,this.mfe=PC.NONE,this.Bde=new x6,this.zde=null,this.afe=null,this.qde=null,this.Qde=null,this.$de=!1,this.tfe=null,this.ofe=null,this.rfe=null,this.ffe=0,this.cfe=!1,this.Ade=()=>{const t=this.Ide;this.xde().then((()=>{this.Ide?t||this.zde||this.afe||this.Cde():this.GNt("Inline session not available. Panorama functionality will not work.",Ci.VR_PRESENTATION_ERROR)}))},this.co=()=>{var t;this.Wde(),this.Gde(),null==(t=Bl.xr)||t.removeEventListener("devicechange",this.Ade);const e=this.xfe();this.FT=e,this.vfe=ol(e),this.Mde=(null==e?void 0:e.stereoMode)||wu.NONE,this.Nde=(null==e?void 0:e.panoramaMode)||PC.NONE,e&&(this.Tde(),this.Cde(),this.bde())},this.Vde=()=>{this.Xde()},this.Hde=()=>{this.jde&&(this.Ude(),this.jde.removeEventListener("end",this.Hde),this.jde.end().catch(M),this.jde=null,this.Qde=null,this.$de=!1,this.zde?this.Yde():this.Xde())},this.gn=()=>{this.Fde()},this.sfe=(t,e)=>{if(!this._le)return;const i=this._le,s=this.ife;if(null===this.rfe&&this.dfe()&&(this.Ode.zle(this.na),this.ffe>0&&(this.ffe-=1)),null===s||void 0===e)return void 0;this.tfe=s.requestAnimationFrame(this.sfe);const n=s.renderState.baseLayer,r=e.getViewerPose(this.yfe);if(void 0===n||void 0===r)return void 0;i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer);let o=new b6,h=0;for(const t of r.views){const e=new Q6(t.eye);if(e.tde=t.projectionMatrix,this.hfe()){let i;if(Ya.Qs&&Ya.gg&&null===this.afe){if(i=t.transform.inverse.orientation,0===i.x&&0===i.y&&0===i.z&&1===i.w)return}else i=t.transform.orientation;e.ide=new Zo(i.x,i.y,i.z,i.w)}this.zde&&e.mde(this.Sfe.Bce()),o=o.QO(e.ide.Bce()),h+=1;const s=n.getViewport(t);s&&i.viewport(s.x,s.y,s.width,s.height),this.Bde.ule(i,e)}const a=new b6(o.Oce/h,o.Fce/h,o.Vce);this.Afe=a.Wce(),function(t,e){const i=t.Dce(e);return 1-i*i<t9}(this.Afe,this.Ife)||(this.Ife.s_t(this.Afe),this._o(new J6))},this.rz=()=>{this.ffe=5},this.na=t,this.wa=function(t){let e;const i={get stereo(){return t.Tfe},set stereo(e){t.Tfe=e},get useDeviceMotionControls(){return t.kfe},set useDeviceMotionControls(e){t.kfe=e},get direction(){return t.bfe},set direction(e){t.bfe=e},get verticalFOV(){return t.Efe},set verticalFOV(e){t.Efe=e},get canPresentVR(){return t.wfe},get state(){return t.Tft},addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)}};return e=new MD(t,A6,i),i}(this),this.Sde()}};function i9(t){return qd(t+180,360)-180}function s9(t){return qd(t+_.PI,2*_.PI)-_.PI}zh((function(t){return class extends t{ka(){return Qr(super.ka(),{vr:this.sle.wa})}yn(){this.sle.yn(),super.yn()}constructor(t,e){super(t,e),this.sle=new e9(this)}}}),Hh.au),r(),r();var n9=class extends en{get wa(){return this.eu||(this.eu=function(t){let e;const i={get status(){return t.Jk},get tasks(){return t.Qee},get network(){return t.Sz.wa},createTask:(e,i)=>t.Rfe(e,i),addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)}};return e=new lt(t,i),i}(this)),this.eu}get Jk(){return this.Cfe.Jk}get Qee(){return this.Cfe.Qee.wa}get Sz(){return this.cnt}Rfe(t,e,i){let s,n;if(void 0===i&&(i="persistent"),!t)throw new m("Unexpected - The source description is undefined");if(s=nc(t),n=_4(e),BC(s))throw new m("Invalid source description");return this.Cfe.zee(s,n).wa}constructor(t,e){super(),this.Cfe=t,this.cnt=e,this.Cfe.bn("Qht",this.Ds)}};var r9=function(){const t=new yD(As.mI,!1),e=Sc.Vm,i=new b4(t),s=new l4(e,i),n=new AD(t),r=new T3(e.Oxt,s,"persistent");return new n9(r,n)}().wa;function o9(t,e){if("function"==typeof t.getAll){return Pr(void 0===e?t.getAll():t.getAll(e))}return function(t){const e=new is,i=[];return t.onsuccess=()=>{const s=t.result;s&&s.value?(i.push(s.value),s.continue()):e.Zb(i),M()},t.onerror=()=>{e.Hb(t.error),M()},e.Xb}(void 0===e?t.openCursor():t.openCursor(e))}function Pr(t){return new Promise(((e,i)=>{t.onsuccess=()=>{e(t.result),M()},t.onerror=()=>{i(t.error),M()}}))}r(),r(),r(),r(),r(),r();var h9=class{np(){if(this.so)try{this.Nxt.abort(),this.so=!1}catch(t){}}constructor(t){this.Nxt=t,this.so=!0,this.Xb=new Promise(((t,e)=>{this.Nxt.oncomplete=()=>{this.so=!1,t(),M()},this.Nxt.onerror=()=>{this.so&&(this.so=!1,e(this.Nxt.error||new m("Transaction error")),M())},this.Nxt.onabort=()=>{this.so=!1,e(new m("Transaction aborted")),M()}}))}};async function a9(t,e,i){const s=new h9(t);try{const[t]=await Promise.all([e(i),s.Xb]);return t}catch(t){if(!s.so)throw new I3("IDBTransaction committed prematurely",t);throw t}finally{s.np()}}var u9=class{get l(){return this.ux.l}Axt(t){return Promise.resolve("persistent"===t)}_Tt(t,e){if(void 0===e&&(e="persistent"),"persistent"!==e)return Promise.reject(zX(e));return Pr(this.Pfe(ju.Wxt).put(t))}async Sxt(t,e){if(void 0===e&&(e="persistent"),"persistent"!==e)return Promise.reject(zX(e));for(const i of t)await this._Tt(i,e)}async Fb(t){return Boolean(await this.Vb(t))}Vb(t){return Pr(this.Pfe(ju.Vxt).get(t))}Txt(t,e){return Pr(this.Pfe(ju.Vxt).index(e).get(t))}async mxt(t){const e=[];for(const i of t){const t=await this.Vb(i);t&&e.push(t)}return e}kxt(){return o9(this.Pfe(ju.Vxt))}Ext(t){return o9(this.Pfe(ju.Vxt),t)}xxt(t,e){return o9(this.Pfe(ju.Vxt).index(e),t)}rT(t){return Pr(this.Pfe(ju.Wxt).delete(t))}async Ixt(t){for(const e of t)await this.rT(e)}Rxt(){return Pr(this.Pfe(ju.Wxt).clear())}Pfe(t){if(!this.Dfe)throw new m("Lock was released");if(!function(t,e){return t===ju.Vxt&&e===ju.Vxt||e===ju.Wxt}(t,this.Dfe.mode))throw new m("Incompatible transaction mode: "+this.Dfe.mode+", expected "+t);return this.Dfe.objectStore(this.l)}Nfe(){this.ux.Mfe(this),this.Dfe=void 0}constructor(t,e){this.ux=t,this.Dfe=e}};var c9=class{Axt(t){return Promise.resolve("persistent"===t)}_Tt(t,e){return void 0===e&&(e="persistent"),"persistent"!==e?Promise.reject(zX(e)):this.Nxt(ju.Wxt,(e=>e._Tt(t)))}Sxt(t,e){return void 0===e&&(e="persistent"),"persistent"!==e?Promise.reject(zX(e)):this.Nxt(ju.Wxt,(e=>e.Sxt(t)))}Fb(t){return this.Nxt(ju.Vxt,(e=>e.Fb(t)))}Vb(t){return this.Nxt(ju.Vxt,(e=>e.Vb(t)))}Txt(t,e){return this.Nxt(ju.Vxt,(i=>i.Txt(t,e)))}mxt(t){return this.Nxt(ju.Vxt,(e=>e.mxt(t)))}kxt(){return this.Nxt(ju.Vxt,(t=>t.kxt()))}Ext(t){return this.Nxt(ju.Vxt,(e=>e.Ext(t)))}xxt(t,e){return this.Nxt(ju.Vxt,(i=>i.xxt(t,e)))}rT(t){return this.Nxt(ju.Wxt,(e=>e.rT(t)))}Ixt(t){return this.Nxt(ju.Wxt,(e=>e.Ixt(t)))}Rxt(){return this.Nxt(ju.Wxt,(t=>t.Rxt()))}pIt(t){return this.Lfe(),this.oIt=new u9(this,t),this.oIt}Lfe(){if(void 0!==this.oIt)throw new m("Already locked")}Mfe(t){if(this.oIt!==t)throw new m("Incorrect lock");this.oIt=void 0}Qo(t){return this.Yo.Qo(t)}Nxt(t,e){return this.Qo((()=>this.Bfe(t,e)))}async Bfe(t,e){this.Lfe();const i=this.Ofe.transaction(this.l,t),s=this.pIt(i);try{return await a9(i,e,s)}finally{s.Nfe()}}Ffe(t){this.Lfe();const e=this.Ofe.transaction(this.l,t);return this.pIt(e)}static Vfe(t,e){let i;const s=new Promise((t=>{i=t})),n=t.reduce(((t,e)=>t.then((()=>{let t;const i=new Promise((e=>{t=e}));return e.Qo((()=>(t(),s))).catch(M),i}))),Promise.resolve());return i(n.then(e)),s}constructor(t,e){this.oIt=void 0,this.Yo=new dc,this.Ofe=t,this.l=e}};r(),r(),r(),r(),r();var l9={aN:17,Wfe:async t=>{const{transaction:e,database:i}=t,s=e.objectStoreNames;if(s&&s.length)for(let t=0;t<s.length;t++)i.deleteObjectStore(s[t]);i.createObjectStore(g9,{keyPath:"id"}),i.createObjectStore(m9,{keyPath:"key"}),i.createObjectStore(p9,{keyPath:"key"});i.createObjectStore(w9,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");i.createObjectStore(y9,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},d9=class{async Ufe(t){for(const e of this.Gfe)this.Zfe<e.aN&&await e.Wfe(t)}constructor(t){this.Zfe=t}},f9=class extends d9{get Gfe(){return[l9]}},_9=new class{Hfe(t){this.Xfe=t}ist(t){return this.Xfe(t)}constructor(){this.Xfe=t=>new f9(t)}},v9=18,g9="cachingTask",m9="licences",p9="manifest",w9="segment",y9="segmentMetadata";async function b9(){!function(){if("undefined"==typeof indexedDB)throw new m("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",v9);return t.addEventListener("upgradeneeded",A9),await Pr(t)}async function A9(t){const e=t.oldVersion<=v9?t.oldVersion:-1,i=t.target,s=i.result,n=i.transaction,r=_9.ist(e),o={database:s,transaction:n};await a9(n,(t=>r.Ufe(t)),o)}var S9=class{static get Vm(){return this.Bbt||(this.Bbt=b9()),this.Bbt}};S9.Bbt=void 0,r();var T9=class{Nxt(t){return t(this)}Nfe(){this.Lxt.Nfe(),this.xct.Nfe(),this.Bxt.Nfe(),this.Oxt.Nfe(),this.Fxt.Nfe()}constructor(t,e){this.Lxt=t.Lxt.pIt(e),this.xct=t.xct.pIt(e),this.Bxt=t.Bxt.pIt(e),this.Oxt=t.Oxt.pIt(e),this.Fxt=t.Fxt.pIt(e)}};Sc.Pa(class t{static async ist(){const e=await S9.Vm;return new t(e)}Nxt(t){const e=this.allCollections;return c9.Vfe(e,(()=>this.Bfe(e,t)))}async Bfe(t,e){const i=t.map((t=>t.l)),s=this.Ofe.transaction(i,ju.Wxt),n=new T9(this,s);try{return await a9(s,e,n)}finally{n.Nfe()}}get allCollections(){return[this.xct,this.Lxt,this.Bxt,this.Oxt,this.Fxt]}constructor(t){this.Ofe=t,this.Lxt=new c9(t,y9),this.xct=new c9(t,w9),this.Bxt=new c9(t,p9),this.Oxt=new c9(t,g9),this.Fxt=new c9(t,m9)}}.ist),r(),r(),r();var k9=class{zfe(t){const e=this.Kj.AI(),i=t.createGain();for(const s of e){t.createMediaElementSource(s).connect(i)}return i}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){const t=this;return{createAudioSourceNode:e=>t.zfe(e)}}constructor(t){this.eu=void 0,this.Kj=t}};zh((function(t){return class extends t{ka(){const t=this.qfe.wa;return Qr(super.ka(),{get audio(){return t}})}constructor(t,e){super(t,e),this.qfe=new k9(this.Ta)}}}),Hh.au),r(),r();zh((function(t){return class e extends t{Ca(t){const i=e.Yfe(this.kd.analytics),s=e.Yfe(t?t.analytics:void 0);i||s?this.Kfe(ne({},i,s)):this.jfe&&this.jfe.disable(),super.Ca(t)}Kfe(t){if(this.jfe)this.jfe.enable(),this.jfe.setOptions(t);else{const e=s.youbora;if(!e)throw new m("Youbora JavaScript library not loaded.");if(!e.adapters.TheoPlayer2)throw new m("TheoPlayer2 adapter not available on Youbora JavasScript library");const i=new e.Plugin(t);i.setAdapter(new e.adapters.TheoPlayer2(this.wa)),this.zc&&e.adapters.TheoPlayer2.NativeAdsAdapter&&i.setAdsAdapter(new e.adapters.TheoPlayer2.NativeAdsAdapter(this.wa)),this.jfe=i}}static Yfe(t){if(t){const e=t.filter((t=>"youbora"===t.integration));if(0===e.length)return;if(e.length>1)throw new m("Only one youbora analytics configuration expected");const i=e[0],{integration:s}=i;return qS(i,["integration"])}}yn(){this.jfe&&this.jfe.disable(),super.yn()}constructor(t,e){super(t,e)}}}),Hh.Pnt),r(),r(),r();var E9=1,x9=0,I9=1e3,R9=class t extends KA{Qfe(){const t=this.ct===1/0,e=t?E9:x9,i=t?-1:this.ct,s=Ye(this.na.rt.mC,this.Jfe);this.$fe.setPresentationInformation(new this.t_e(e,i,s))}Jfe(t){const e=t.VC.mC,i=[];for(let t=0;t<e.length;t++){const s=e[t];s.ji&&s.Ti&&i.push({trackIdx:t,bitrate:s.jG,width:s.ji,height:s.Ti,codecIdentifier:s.Frt})}return i}e_e(){return this.na.CI()*I9}get ct(){return this.na.jd()*I9}get i_e(){return this.s_e}get n_e(){return this.r_e}set n_e(t){this.r_e=t,t&&this.$fe.reportPlayerState(t)}set o_e(t){this.h_e=t}a_e(){return v((()=>{this.u_e(),this.c_e()}),t.l_e)}qMt(){this.na.zc&&(this.na.zc.bn("rrt",this.d_e),this.na.zc.bn("ort",this.f_e),this.na.zc.bn("J2t",this.__e),this.na.zc.bn("L3t",this.v_e)),this.na.bn(ns.Ly,this.g_e),this.na.bn(bo.fa,this.T9),this.na.bn(ns.Ky,this.m_e),this.na.bn(ns.ho,this.Vde),this.na.bn(Zc.uB,this.iz),this.na.bn(ns.$y,this.lK),this.na.bn(ns.eb,this.rz),this.na.bn(Zc.aB,this.tz),this.na.bn(ns.ob,this.p_e)}YMt(){this.na.zc&&(this.na.zc.vn("rrt",this.d_e),this.na.zc.vn("ort",this.f_e),this.na.zc.vn("J2t",this.__e),this.na.zc.vn("L3t",this.v_e)),this.na.vn(ns.Ly,this.g_e),this.na.vn(bo.fa,this.T9),this.na.vn(ns.Ky,this.m_e),this.na.vn(ns.ho,this.Vde),this.na.vn(Zc.uB,this.iz),this.na.vn(ns.$y,this.lK),this.na.vn(ns.eb,this.rz),this.na.vn(Zc.aB,this.tz),this.na.vn(ns.ob,this.p_e)}yn(){p(this.w_e),this.YMt()}constructor(t,e,i,s=MMPlayerState,n=MMAdState,r=MMPresentationInfo){super(),this.na=t,this.FT=e,this.$fe=i,this.y_e=s,this.b_e=n,this.t_e=r,this.A_e=!0,this.s_e=!1,this.h_e=void 0,this.r_e=void 0,this.S_e=void 0,this.d_e=t=>{const e=t.trt;e.Y$t();var i;i=e.Hnt().duration;const s="linear"===e.Hnt().type;e.K$t(),e.X$t();s&&(this.s_e=!0),this.o_e=this.b_e.AD_IMPRESSION,this.o_e=this.b_e.AD_STARTED},this.f_e=t=>{this.s_e=!1,this.o_e=this.b_e.AD_COMPLETED},this.__e=t=>{t.rQt===dt.ADBLOCK?this.o_e=this.b_e.AD_BLOCKED:this.o_e=this.b_e.AD_ERROR},this.v_e=()=>{this.o_e=this.b_e.AD_SKIPPED},this.p_e=t=>{var e,i,s,n;t.PE===Fo.yE&&(this.S_e&&t.jz!==this.S_e&&this.$fe.reportABRSwitch(this.S_e,t.jz),this.S_e=t.jz,this.$fe.reportChunkRequest(new MMChunkInformation(t.VN,t.jz,t.kL,t.Lut.Xu,void 0,void 0,null!=(s=null==(e=t.Lut.Kat)?void 0:e[0])?s:0,null!=(n=null==(i=t.Lut.Kat)?void 0:i[1])?n:-1)))},this.g_e=t=>{this.n_e=this.y_e.STOPPED,this._o(t)},this.T9=t=>{this.n_e=this.y_e.ERROR,this.$fe.reportError(t.error,this.e_e())},this.m_e=()=>{this.i_e?this.o_e=this.b_e.AD_PAUSED:this.n_e=this.y_e.PAUSED},this.Vde=()=>{this.i_e&&(this.o_e=this.b_e.AD_PLAY)},this.iz=()=>{this.i_e?(this.h_e===this.b_e.AD_PAUSED&&(this.o_e=this.b_e.AD_RESUMED),this.o_e=this.b_e.AD_PLAYING):(this.A_e&&(this.A_e=!1,this.Qfe(),this.n_e=this.y_e.STARTED),this.n_e!==this.y_e.PAUSED&&this.n_e!==this.y_e.BUFFERING||(this.n_e=this.y_e.RESUMED))},this.lK=()=>{this.$fe.reportPresentationSize(this.na.pR,this.na.vR)},this.rz=t=>{this.i_e||this.n_e!==this.y_e.PAUSED||this.$fe.reportPlayerSeekCompleted(t.currentTime*I9)},this.tz=()=>{this.i_e||(this.n_e=this.y_e.BUFFERING)},this.c_e=()=>{this.$fe.reportDownloadRate(_.floor(bu.Vm.VG()))},this.u_e=()=>{this.i_e||this.$fe.reportPlaybackPosition(this.e_e())},this.n_e=this.y_e.INITIALIZED,this.qMt(),this.w_e=this.a_e()}};R9.l_e=2e3,zh((function(t){return class extends t{yn(){super.yn(),this.T_e()}constructor(t,e){super(t,e),this.k_e=void 0,this.E_e=void 0,this.x_e=()=>{this.E_e=void 0,this.T_e();const t=super.iu();t&&(this.E_e=function(t,e){const i=function(t,e){if(t&&t.analytics)for(const e of t.analytics)if("smartsight"===e.integration)return e;if(e&&e.analytics)for(const t of e.analytics)if("smartsight"===t.integration)return t;return}(t,e);if(!i)return;return i}(t,this.kd)),this.I_e()},this.I_e=()=>{if(!this.k_e&&this.E_e&&this.bt&&this.bt.src&&!this.JI){const t=MMSmartStreaming.getInstance();!function(t,e,i){t.registerMMSmartStreaming(i.playerName,i.customerID,i.subscriberID,i.domainName),t.reportComponent("THEOSDK"),t.reportPlayerInfo("THEOplayer","THEOplayer","9.7.0"),t.reportDeviceInfo(void 0,void 0,void 0,void 0,void 0,s.innerWidth,s.innerHeight),t.initializeSession("QBRModeDisabled",e,i.metaURL,i.assetID)}(t,this.bt.src,this.E_e),this.k_e=new R9(this,this.E_e,t),this.k_e.bn("ended",this.T_e)}},this.T_e=()=>{this.k_e&&(this.k_e.yn(),this.k_e=void 0)},this.bn(ns.uo,this.x_e),this.bn(ns.Cy,this.I_e),this.bn(ns.ho,this.I_e)}}}),Hh.Pnt),r(),r();var C9=String.fromCharCode(95);var P9=class t{get wa(){return this.eu||(this.eu=function(t){return{get adsManager(){return t.adsManager},get ids(){return t.ids},get adContainer(){return t.adContainer},get imaSDK(){return t.imaSDK},get sendEvent(){return t.sendEvent},set sendEvent(e){t.sendEvent=e}}}(this)),this.eu}get id(){return this.jS}get adsManager(){return this.bne}get ids(){return this.u_}get adContainer(){return this.r1t}get sendEvent(){return this.R_e}set sendEvent(t){for(const t of this.C_e)this.bne.removeEventListener(t.type,t.listener);this.C_e=[],this.R_e=t,this.P_e()}get imaSDK(){return!0}D_e(){for(const t in google.ima.AdEvent.Type){const e=google.ima.AdEvent.Type[t];this.bne.addEventListener(e,this.N_e),this.C_e.push({type:e,listener:this.N_e})}}M_e(){En(this.C_e);for(const t in google.ima.AdEvent.Type){const e=google.ima.AdEvent.Type[t];this.bne.removeEventListener(e,this.N_e)}}L_e(t){this.Kf.push({type:t.type,adVolume:this.adsManager.getVolume()})}P_e(){null==this.R_e||this.R_e.call(this,this.Kf),this.Kf=[]}static B_e(e){return t.O_e[e]||e}constructor(e,i,s,n){this.N_e=e=>{this.L_e({type:t.B_e(e.type)})},this.jS=e,this.bne=i,this.u_=s,this.r1t=n,this.C_e=[],this.Kf=[]}};P9.O_e={loaded:"AdLoaded",impression:"AdImpression",start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",skip:"AdSkipped",volumeChange:"AdVolumeChange"};var D9=class{F_e(t,e){this.V_e=h.createElement("script"),this.V_e.id=t.id,this.V_e.type="text/javascript",t.adContainer.appendChild(this.V_e),this.V_e.src="https://z.moatads.com/"+e+"/moatvideo.js#"+t.id,this.W_e=t.id,s[this.W_e]=t.wa}U_e(){this.V_e&&We(this.V_e),this.W_e&&(s[this.W_e]=void 0)}constructor(){this.V_e=void 0,this.W_e=void 0}};zh((function(t){return class e extends t{Ca(t){var i,s,n;this.G_e(),null==(i=this.Z_e)||i.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.H_e),null==(s=this.Z_e)||s.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.G_e),null==(n=this.Z_e)||n.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.X_e),this.Z_e=void 0,this.r1t=void 0,super.Ca(t);const r=t&&t.analytics;this.z_e=e.q_e(r);this.zc&&this.z_e&&J2()&&this.Y_e()}yn(){var t,e,i;this.G_e(),null==(t=this.Z_e)||t.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.H_e),null==(e=this.Z_e)||e.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.G_e),null==(i=this.Z_e)||i.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.X_e),this.Z_e=void 0,this.r1t=void 0,this.zc&&this.zc.vn("V7t",this.W7t),super.yn()}Y_e(){this.zc&&this.zc.bn("V7t",this.W7t)}K_e(t,e,i){const s=C9+"moatApi"+_.floor(1e8*_.random());this.j_e=new P9(s,t,e,i),this.j_e.D_e(),this.Q_e.F_e(this.j_e,this.z_e.partnerCode)}static q_e(t){if(t){const e=t.filter((t=>"moat"===t.integration));if(0===e.length)return;if(e.length>1)throw new m("Only one Moat analytics configuration expected");return e[0]}}constructor(t,e){super(t,e),this.z_e=void 0,this.j_e=void 0,this.Z_e=void 0,this.r1t=void 0,this.X_e=()=>{this.K_e(this.Z_e,{partnerCode:this.z_e.partnerCode,viewMode:google.ima.ViewMode.NORMAL},this.r1t)},this.W7t=t=>{this.Z_e=t.yne,this.r1t=t.kte,this.G_e(),this.Z_e.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.H_e),this.Z_e.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.G_e),this.Z_e.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.X_e)},this.H_e=t=>{const e=t.getAd().getAdPodInfo();e.getAdPosition()<e.getTotalAds()&&(this.G_e(),this.X_e())},this.G_e=()=>{this.j_e&&(this.j_e.M_e(),this.j_e=void 0),this.Q_e.U_e()},this.Q_e=new D9}}}),Hh.Pnt),r(),r(),r(),r();var N9="theo-dai-clickthrough",M9="urn:google:dai:2018",L9=class{get wa(){const t=this,e=this.J_e;return{contentTimeForStreamTime:e=>t.Loe?t.Loe.Boe(e):e,streamTimeForContentTime:e=>t.Loe?t.Loe.Ooe(e):e,replaceAdTagParameters(e){t.Loe&&t.Loe.replaceAdTagParameters(e)},get snapback(){return t.$_e},set snapback(e){t.$_e=e},get sourceTransformer(){return e.tve},set sourceTransformer(t){e.tve=t}}}DI(t){this.V8.np(),this.V8=new Fi;uh(Ts(this.Ine(t,this.V8.ep),this.V8))}async Ine(t,e){if(Io(e),!this.eve||!this.Loe)return this.na.ive(t);if(this.eve.Xnt&&!this.sve)return;const i=this.na.CI();if(this.$_e){const s=this.Loe.the(t,i);if(s){this.na.ive(s),await this.Loe.Ay(ye.AD_BREAK_ENDED,e);if(this.Loe.$oe(t).dF>t)return}}this.na.ive(t)}lR(){const t=this.eve&&this.eve.Xnt;if(t){const e=ee.Cn(this.na.nve()),i=t.LOt,s=i+t.I$t,n=new ee([i,s]);return e.jn(n).ks()}return this.na.nve()}async prt(t,e){if(!t)return this.na.rve(t,e);let i=t;try{this.na.nt.bn(je.XR,this.ove),i=await this.J_e.hve(t,e),this.eve&&this.Loe&&(this.uve=!0)}catch(t){if(ih(t),t.code===di.LICENSE_INVALID)return;const e=new Z(Ci.SOURCE_NOT_SUPPORTED,"Something went wrong while setting up a Google DAI stream.",t);throw this.bZ=Zs(e),this.AZ=e,this.na._o(new Pi(e)),e}await this.na.rve(i,e)}nr(){if(this.uve){if(this.na.nt.vn(je.XR,this.ove),this.Uhe){this.Uhe.vn(gs.KR,this.cve);for(const t of this.Uhe.L.mC)t.vn(On.IO,this.lve);this.Uhe=void 0}this.bZ=void 0,this.AZ=void 0,this.V8.np(),this.eve&&this.eve.nr(),this.Loe&&this.Loe.nr(),this.uve=!1}}get lt(){return this.bZ||this.na.dve()}get OI(){return this.AZ||this.na.fve()}yn(){this.nr(),this.na._ve(),this.Loe&&this.Loe.yn()}constructor(t,e,i,s,n){this.Uhe=void 0,this.bZ=void 0,this.AZ=void 0,this.V8=new Fi,this.uve=!1,this.$_e=!0,this.ove=t=>{const e=t.Ht;e.Lt===Hi.xW&&(e.zw===Hr.ID3||e.zw===Hr.EVENT_STREAM&&e.ZC===M9)&&(e.LE=Ui.GC,this.Uhe=e,e.bn(gs.KR,this.cve))},this.cve=t=>{t.uF.bn(On.IO,this.lve)},this.lve=t=>{var e,i;if(this.Loe)if((null==(e=this.Uhe)?void 0:e.zw)===Hr.ID3){const e=t.uF.U;"TXXX"===e.id&&this.Loe.Qoe({TXXX:e.text})}else if((null==(i=this.Uhe)?void 0:i.zw)===Hr.EVENT_STREAM){const e=t.uF.U;this.Loe.Joe(M9,e,t.DV)}},this.na=t,this.Loe=e,this.eve=i,this.J_e=s,this.sve=n,i&&e&&this.na.zc&&this.na.zc.Qnt(i.X8t)}};r(),r();var B9=class extends ps{get vve(){return this.gve}get zQt(){return ji.Kh}constructor(t,e,i,s=!0){super(i),this.gve=s,this.a3t=t,this.u3t=e}},O9=class extends W2{mve(){const t=[ye.STARTED,ye.FIRST_QUARTILE,ye.MIDPOINT,ye.THIRD_QUARTILE,ye.COMPLETE];this.Loe.bn(t,this.pve),this.Loe.bn(ye.AD_BREAK_ENDED,this.Koe),this.Loe.bn(ye.AD_PROGRESS,this.Woe),this.Loe.bn(ye.CUEPOINTS_CHANGED,this.Goe)}get i3t(){return this.q8t}get z2t(){return this._4t}wve(t){let e=t.Q9t.LOt,i=this.i0t||this.findAdBreakWithPredicate(e,(t=>!t.sR));if(!i){const s=t.Q9t.I$t;e=this.na.CI(),i=new B9(s,s,e,!1),i.l3t(),this.s0t.push(i)}return i}yve(t){switch(t){case ye.STARTED:this.q8t=!0;break;case ye.AD_BREAK_ENDED:this.q8t=!1}}bve(t,e,i){if(e)switch(t){case ye.STARTED:case ye.FIRST_QUARTILE:case ye.MIDPOINT:case ye.THIRD_QUARTILE:case ye.COMPLETE:this.z2t._o(new XF(this.i0t))}if(i)switch(t){case ye.STARTED:case ye.FIRST_QUARTILE:case ye.MIDPOINT:case ye.THIRD_QUARTILE:case ye.COMPLETE:this.z2t._o(new Cn(this.z$t,this.z$t.k8t))}switch(t){case ye.COMPLETE:this.z2t._o(new Qn(this.z$t,this.H8t.k8t));break;case ye.AD_BREAK_ENDED:this.z2t._o(new $h(this.Xnt))}switch(t){case ye.FIRST_QUARTILE:this.z2t._o(new _s(this.z$t,this.H8t.k8t));break;case ye.MIDPOINT:this.z2t._o(new oe(this.z$t,this.H8t.k8t));break;case ye.THIRD_QUARTILE:this.z2t._o(new ks(this.z$t,this.H8t.k8t))}}Ave(t){const e=t.trt,i=this.wve(e),s=function(t,e){if(t.zc.length)return!1;for(let i=0;i<e;i++){const e=new L2(t,Ls.mQt);t.f3t(e)}return!0}(i,e.Q9t.f9t),n=function(t,e){const i=e.Q9t.d9t-1;return t.zc[i]}(i,e),r=function(t,e){return t.A3t!==e2.READY&&(t.D8t(e),!0)}(n,e);this.z$t=n,this.i0t=i,i.l3t(),this.bve(t.type,s,r)}Sve(t){for(const e of this.s0t)if(zd(t,e.LOt))return e}findAdBreakWithPredicate(t,e){for(const i of this.s0t)if(zd(i.LOt,t)&&e(i))return i}get Tve(){const t=this.findAdBreakWithPredicate(0,(t=>t.vve));let e=0;return t&&(e=t.I$t),e}kve(t,e){let i;for(const s of this.s0t)s.LOt>=t&&s.LOt<=e&&!s.sR&&(!i||s.LOt>=i.LOt)&&(i=s);return i}zD(){}jnt(t){}nr(){this.z$t&&(this.z2t._o(new Qn(this.z$t,this.z$t.k8t)),this.z$t=void 0),this.i0t&&(this.z2t._o(new $h(this.i0t)),this.i0t=void 0),this.q8t=!1,En(this.s0t)}yn(){this.nr(),this.z2t.yn()}Ynt(t){}constructor(t,e){super(new lc,ji.Kh),this.Loe=t,this.na=e,this.Woe=t=>{const e=this.i0t;if(!e||!this.z$t)return;const i=t.Moe.ihe;this.z$t.k8t=i.RI,function(t,e){const i=e.d9t,s=e.l9t,n=e.RI,r=Mh(t.zc.slice(0,i-1),(t=>{var e;return null!=(e=t.ct)?e:0}));t.R$t=s-n-r}(e,i)},this.Goe=t=>{const e=t.Moe.she;if(e)for(const t of e)if(!this.Sve(t.lF)){const e=t.dF-t.lF,i=new B9(e,e,t.lF,!0);this.s0t.push(i)}},this.pve=t=>{this.yve(t.type),this.Ave(t)},this.Koe=t=>{this.q8t=!1,this.z$t=void 0;const e=this.Xnt;e&&(e.R$t=0,this.bve(t.type,!1,!1),this.i0t=void 0)},this.mve()}};function F9(t){if(t.sources)if(Qc(t.sources)){for(const e of t.sources)if(bl(e))return!0}else if(Vt(t.sources))return bl(t.sources);return!1}r();var V9=class{async hve(t,e){const i=[],s=[];for(const e of t.sources)if(bl(e)){if(!this.Loe)continue;i.push(e)}else s.push(e);if(0===i.length)return t;let n,r;for(;void 0===n&&0!==i.length;){const{Cc:o}=await XR.Vm.EH(i,t),h=o;Io(e);try{n=await this.Eve(h,e),s.push(n)}catch(t){ih(t),r=t,_e(i,h)}}if(0!==t.sources.length&&0===s.length)throw new m("Fatal: unable to play DAI streams.");return r&&vl(r.message),ne({},t,{sources:s})}async Eve(t,e){if(!this.Loe)throw new m("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const i=this.Loe.Ay(ye.LOADED,e),s=this.Loe.Ay(ye.ERROR,e),n=t.type===ti.eP?"dash":"hls";this.Loe.IUt(ne({},t.ssai,{format:n}));const r=await Promise.race([i,s]);if(r.type===ye.LOADED){const e=t.type===ti.eP?ti.eP:ti.sP;return ll(ne({},t,{src:this.tve?await this.tve(r.Moe.Xu||""):r.Moe.Xu,type:e}))}throw m(r.Moe.nhe)}constructor(t){this.Loe=t,this.tve=t=>t}};zh(function(t){return e=>class extends e{ka(){const t=super.ka(),e=t.ads;if(e){const t=this.xve.wa;Qr(e,{get dai(){return t}})}return t}get Xl(){return this.Ive}ive(t){super.DI(t)}DI(t,e){this.xve.DI(t)}nve(){return super.lR()}lR(){return this.xve.lR()}Ca(t){return this.xve.nr(),super.Ca(t)}async rve(t,e){return super.prt(t,e)}async prt(t,e){return this.xve.prt(t,e)}dve(){return super.BI()}fve(){return super.FI()}BI(){return this.xve.lt}FI(){return this.xve.OI}_ve(){super.yn()}yn(){this.xve.yn(),this.h1t&&(We(this.h1t),this.h1t.removeEventListener("keydown",this.Rve),this.h1t.removeEventListener("click",this.Rve),this.h1t=void 0),this.Cve&&(We(this.Cve),this.Cve=void 0)}constructor(e,i){super(e,i),this.Ive=!1,this.Rve=t=>{13===t.which&&this.h1t.click(),this.PR()};const s=this.IR(),n=i.ads.googleIma.useAdUiElementForSsai;var r;const o=null!=(r=i.ads.googleIma.allowSeekingForGoogleDai)&&r;let a,u;try{var c;n?(this.Cve=h.createElement("div"),Ka(this.Cve),this.Cve.className="theo-dai-ad-ui"):(this.h1t=h.createElement("button"),this.h1t.className=N9),a=t(s,this.h1t,this.Cve),u=new O9(a,this);const e=null!=(c=this.h1t)?c:this.Cve;e&&this.we.appendChild(e),this.Ive=!0}catch(t){this.h1t=void 0,this.Cve=void 0}const l=new V9(a);this.xve=new L9(this,a,u,l,o),this.h1t&&(this.h1t.addEventListener("keydown",this.Rve),this.h1t.addEventListener("click",this.Rve))}}}((function(t,e,i){if(!(s.google&&s.google.ima&&Vt(s.google.ima.dai)))throw new m("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const n=B5(),r=new google.ima.dai.api.StreamManager(t,i),o=B5();return new P5(r,e,o&&o!==n?o:void 0)})),Hh.Cnt),r(),r(),r();var W9=class{get Pve(){return void 0===this.Dve?0:(performance.now()-this.Dve)/1e3}Nve(t){this.Mve=t,this.Bve.Lve(t),this.na.bn(ns.ho,this.Vde),this.na.bn(ns.Ly,this.g_e),this.na.bn(ns._b,this.xae),this.na.bn(bo.fa,this.T9),this.na.bn(Zc.aB,this.Ove),this.na.bn([Zc.nB,Zc.rB,Zc.uB],this.Fve),this.na.bn(ns.Dy,this.Vve),s.addEventListener("beforeunload",this.LMt)}Wve(){this.na.vn(ns.ho,this.Vde),this.na.vn(ns.Ly,this.g_e),this.na.vn(ns._b,this.xae),this.na.vn(bo.fa,this.T9),this.na.vn(Zc.aB,this.Ove),this.na.vn([Zc.nB,Zc.rB,Zc.uB],this.Fve),this.na.vn(ns.Dy,this.Vve),s.removeEventListener("beforeunload",this.LMt),this.Uve||(this.Bve.Gve(this.Zve),this.Bve.Hve()),this.Xve&&this.zve(),this.Mve=void 0,this.qve=!1,this.Uve=!1,this.Zve=-1/0,En(this.Yve)}Kve(){this.qve&&this.Bve.jve(),this.Dve=performance.now(),this.Qve=v(this.Jve,6e4)}zve(){this.Bve.$ve(this.Pve),this.Xve=!1,this.Dve=void 0,this.Qve&&(p(this.Qve),this.Qve=void 0)}tge(){if(S(this.na.jd()))return;const t=10*function(t,e){return _.floor(t/e)}(this.na.CI()/this.na.jd()*100,10);fh(this.Yve,t)||(this.Yve.push(t),this.Bve.ege(t))}constructor(t,e){this.na=t,this.Bve=e,this.qve=!1,this.Uve=!1,this.Yve=[],this.Zve=-1/0,this.Xve=!1,this.Vde=()=>{this.qve||(this.Bve.ige(),this.Xve&&this.Bve.jve(),this.qve=!0)},this.g_e=()=>{this.Bve.sge(),this.Uve=!0},this.xae=()=>{this.Zve<this.na.CI()&&(this.Zve=this.na.CI()),this.tge()},this.Ove=()=>{this.qve&&(this.nge=performance.now(),this.Bve.rge(this.na.CI()))},this.Fve=()=>{this.nge&&(this.Bve.oge((performance.now()-this.nge)/1e3),this.nge=void 0)},this.T9=()=>{this.Zve<this.na.CI()&&(this.Zve=this.na.CI()),this.Bve.Nrt(this.na.BI().message)},this.Vve=()=>{const t=this.na.jd()===1/0;t&&!this.Xve&&(this.Xve=t,this.Kve())},this.LMt=()=>{this.Bve.Gve(this.Zve),this.Bve.hge()},this.Jve=()=>{void 0!==this.Dve&&this.Bve.age(this.Pve)}}};r();var U9=class{Lve(t){this.uge(["setDocumentTitle",t.itemTitle]),this.uge(["setCustomUrl","https://content.streamone.net/embed/cust=Xo9oT45EptMG/account="+t.accountID+"/item="+t.itemID]),this.uge(["trackPageView"])}ige(){this.cge("item first play","viewing","1")}Hve(){this.cge("item skipped","skipped","1")}ege(t){this.cge("item progress","percent",""+t)}hge(){this.cge("item abandoned","window closed","1")}Gve(t){this.cge("item time","watched",""+t)}sge(){this.cge("item finished","ended","1")}rge(t){this.cge("buffering started","timestamp",""+t)}oge(t){this.cge("buffering ended","duration",""+t)}Nrt(t){this.cge("error","message",""+t)}jve(){this.cge("livestream first play","viewing","1")}age(t){this.cge("livestream progress","duration",""+t)}$ve(t){this.cge("livestream time","watched",""+t)}cge(t,e,i){this.uge(["trackEvent","Video",t,e,i])}uge(t){const e="undefined"!=typeof _paq?_paq:void 0;e?e.push(t):console.warn("The Piwik library required for the StreamOne pre-integration was not found. Make sure it is loaded before instantiating THEOplayer.")}};r();var G9=class{get lge(){if(!this.dge)return;const t=this.na.CI()/this.dge;return _.floor(4*t)+1}get fge(){return void 0!==this.dge}Nve(){this.Oc.bn("rrt",this.d_e),this.Oc.bn("ort",this.f_e),this.Oc.bn("L3t",this.v_e),this.Oc.bn("J2t",this.__e),this.na.bn(ns._b,this.xae),s.addEventListener("beforeunload",this.LMt)}Wve(){this.Oc.vn("rrt",this.d_e),this.Oc.vn("ort",this.f_e),this.Oc.vn("L3t",this.v_e),this.Oc.vn("J2t",this.__e),this.na.vn(ns._b,this.xae),En(this._ge),s.removeEventListener("beforeunload",this.LMt),this.dge=void 0}constructor(t,e,i){this.na=t,this.Oc=e,this.Bve=i,this._ge=[],this.d_e=()=>{this.dge=this.na.jd(),this.Bve.vge(this.dge)},this.f_e=()=>{this.dge&&(this.Bve.gge(this.dge),En(this._ge),this.dge=void 0)},this.v_e=t=>{if(!this.dge)return;const e=this.dge-this.dge*t.N3t;this.Bve.mge(e),this.dge=void 0},this.__e=()=>{this.dge=this.na.jd(),this.Bve.pge()},this.xae=()=>{const t=this.lge;if(this.fge&&t&&!fh(this._ge,t)){switch(t){case 1:this.Bve.wge();break;case 2:this.Bve.yge();break;case 3:this.Bve.bge();break;case 4:this.Bve.Age()}this._ge.push(t)}},this.LMt=()=>{this.Bve.Sge()}}};r();var Z9=class{vge(t){this.Bve.cge("ad start","duration",""+t)}gge(t){this.Bve.cge("ad finished","duration",""+t)}mge(t){this.Bve.cge("ad skipped","remaining time",""+t)}pge(){this.Bve.cge("ad blocker","detected","1")}wge(){this.Bve.cge("ad progress","firstQuartile","")}yge(){this.Bve.cge("ad progress","secondQuartile","")}bge(){this.Bve.cge("ad progress","thirdQuartile","")}Age(){this.Bve.cge("ad progress","fourthQuartile","")}Sge(){this.Bve.cge("ad abandoned","window closed","1")}constructor(t){this.Bve=t}};function H9(t){return t&&"streamone"===t.integration}zh((function(t){return class extends t{yn(){this.vn(ns.uo,this.co),this.Tge&&(this.kge&&this.kge.Wve(),this.Ege&&this.Ege.Wve(),this.Tge=!1),super.yn()}constructor(t,e){super(t,e),this.Tge=!1,this.co=()=>{this.Tge&&(this.kge.Wve(),this.Ege&&this.Ege.Wve());const t=this.iu();if(this.Tge=!1,!t)return;const e=function(t){if(t.analytics)for(const e of t.analytics)if(H9(e))return e}(t);e&&(this.Tge=!0,this.kge.Nve(e),this.Ege&&this.Ege.Nve())};const i=new U9;if(this.kge=new W9(this,i),this.zc){const t=new Z9(i);this.Ege=new G9(this,this.zc,t)}this.bn(ns.uo,this.co)}}}),Hh.Pnt),r(),r(),r(),r(),r(),r();var X9=class extends yV{async a3(t,e,i){const s=await z9(t);await super.a3(s,e,i),this.xge(s,e)}async r3(t,e,i){const s=await z9(t);await super.r3(s,e,i),this.xge(s,e)}xge(t,e){const i=this.Rge.Ige;if(void 0===i)return;const s=e.A2;let n;if(this.Cge!==s&&(this.Cge=s,i.setLevelSwitching(s),i.setContainerFormat(2)),function(t){return Da.call(t,"$it")}(e)){const t=e.$it,r=e.$it+e.ct;n=e.aW,i.newPts(t,r,"video",s)}else 0;i.appendBuffer(t.$k,"video",s,n)}async rT(t,e,i){var s;await super.rT(t,e,i),null==(s=this.Rge.Ige)||s.flushBuffer(t,e)}constructor(t,e){super(t),this.Rge=e,this.Cge=void 0}};async function z9(t){switch(t.zw){case To.NJ:return t;case To.Ik:{const e=await zn(t.$k);return{zw:To.NJ,$k:new j(e)}}case To.MJ:throw new m("Opaque initialization segments are not supported on web.")}}var q9=class extends pV{Zrt(t){return t.j3===Fo.yE?new X9(t,this.Rge):new yV(t)}constructor(t,e){super(t),this.Rge=e,this.Urt(t)}},Y9=class extends(_l(kV)){get Ige(){return this.Pge}Dge(){this.Pge=new LCEVCdec.LCEVCdec(this.SZ,this.Nge,{})}ge(){super.ge(),this.Mge()}be(){super.be(),this.Nge.style.display="none"}nr(){return this.Nge.style.display="none",void 0!==this.Pge&&(this.Pge.close(),this.Dge()),super.nr()}Km(){return this.Lge=!0,void 0!==this.Pge&&(this.Pge.close(),this.Pge=void 0),We(this.Nge),super.Km()}uH(t){this._o(new tu(new iu(di.ABORTED,t)))}Mge(){this.aO.SZ.style.display="none",this.Nge.style.display="block"}wot(t){return new q9(t,this)}pot(t){return new SV(t)}constructor(t){super(t),this.Lge=!1,this.Bge=t=>{this.Lge||(t||this.uH("LCEVC SDK failed to initialize."),this.Dge())},this.Oge=()=>{this.Lge||this.uH("LCEVC SDK failed to initialize.")},this.Nge=h.createElement("canvas"),Ka(this.Nge),this.Nge.style.display="none";const e=t.SZ;var i;e.parentElement.insertBefore(this.Nge,null!=(i=e.nextSibling)?i:null),LCEVCdec.ready.then(this.Bge,this.Oge)}},K9=class extends vV{lH(t){return t===Fo.yE?(this.Fge=new Y9(super.lH(t)),this.Fge):super.lH(t)}async qZ(t){if(t instanceof Y9){this.Fge=void 0;const e=t;await e.Km(),await super.qZ(e.hot)}else await super.qZ(t)}get Vge(){return this.Fge}},j9=class extends QX{async yn(){for(const t of this.FO.mC)t.vn(gs.fC,this.Wge);this.rt.vn(je.XR,this.Uge),this.rt.vn(je.qR,this.Gge),await super.yn(),await this.aO.Km(),await this.YZ.qZ(this.aO)}constructor(t,e,i,s,n,r,o){const h=new K9(n),a=new St(h);super(t,e,i,s,a.lH(r),o),this.Uge=t=>{t.Ht.bn(gs.fC,this.Wge)},this.Gge=t=>{t.Ht.vn(gs.fC,this.Wge)},this.Wge=t=>{var e;const i=null==(e=this.Zge.Vge)?void 0:e.Ige,s=t.jht.OC;null==i||i.setCurrentLevel(s)},this.YZ=a,this.Zge=h,this.FO.bn(je.XR,this.Uge),this.FO.bn(je.qR,this.Gge)}};et(new class extends lV{mP(t,e,i,s,n,r,o){let h=e;return Bt.TT()&&(h=new Bt(h)),new j9(i,s,n,r,h,Fo.yE,t)}async dH(t){if(!t.lcevc)return!1;if(!await super.dH(t))return!1;if(void 0===s.LCEVCdec)throw new Z(Ci.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}_H(){return!1}constructor(...t){super(...t),this.vH=CR.UG}}),r();var Q9=class extends c${async yn(){for(const t of this.FO.mC)t.vn(gs.fC,this.Wge);this.rt.vn(je.XR,this.Uge),this.rt.vn(je.qR,this.Gge),await super.yn(),await this.YZ.qZ(this.aO)}constructor(t,e,i,s,n){const r=new K9(t),o=new St(r);super(o.lH(Fo.yE),e,i,s,n),this.Uge=t=>{t.Ht.bn(gs.fC,this.Wge)},this.Gge=t=>{t.Ht.vn(gs.fC,this.Wge)},this.Wge=t=>{var e;const i=null==(e=this.Zge.Vge)?void 0:e.Ige,s=t.jht.QLt.OC;null==i||i.setCurrentLevel(s)},this.YZ=o,this.Zge=r,this.FO.bn(je.XR,this.Uge),this.FO.bn(je.qR,this.Gge)}};et(new class extends d${mP(t,e,i,s,n,r,o){return new Q9(e,i,n,r,s)}dH(t,e){if(!t.lcevc)return!1;if(!super.dH(t,e))return!1;if(void 0===s.LCEVCdec)throw new Z(Ci.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}_H(){return!1}constructor(...t){super(...t),this.vH=CR.XG}}),r(),r(),r(),r();var J9=function(t){return t.Hge="nr",t.Xge="zge",t}({}),$9="freewheel-nonlinear-ad",t8=[ns.Dy,ns._b,ns.vb,ns.Ky,Zc.uB,ns.ho],e8=class t extends p2{RR(){this.YZ.ZH()}qge(){this.Yge.bn("nrt",this.Kge),this.Yge.bn(["rrt","ort"],this.jge),this.Yge.bn("irt",this.Ose)}Qge(){this.Yge.vn("nrt",this.Kge),this.Yge.vn(["rrt","ort"],this.jge),this.Yge.vn("irt",this.Ose)}Jge(){this.z2t.ru(this.Yge.$ge)}tme(){this.Yge.eme.bn(t8,this.Ds)}ime(){this.Yge.eme.vn(t8,this.Ds)}get H2t(){return this}static get G2t(){return ji.J$t}get G2t(){return t.G2t}get Xnt(){var t;return null!=(t=this.Yge.$ge.Xnt)?t:null}get Znt(){const t=this.Yge.$ge.H8t;return t?[t]:[]}jnt(t){}CI(){return this.Yge.eme.RI}DI(t,e){}jd(){return this.Yge.eme.ct}LI(){return this.Yge.eme.MI}BI(){return this.bZ}FI(){return this.AZ}gR(){return 0}wR(){return 0}bR(){return this.Yge.eme.yR}AR(t){this.Yge.eme.yR=t}YI(){return this.Yge.eme.qI}KI(t){this.Yge.eme.qI=t}uR(){return this.Yge.eme.aR}get znt(){return this.Yge.$ge.znt}get qnt(){return this.Yge.$ge.qnt}lR(){return this.Yge.eme.cR}$I(){return this.Yge.eme.JI}K2t(t){if(this.i3t||this.Yge.K2t(t),this.Yge.nme){if(t.type===ns.Ky&&this.na.MI)return!0;if(t.type===ns.Ly)return this.Yge.ome.rme(),!0}return!1}be(){this.Yge.be()}PR(){this.JI||this.Yge.eme.PR()}async hme(){if(!this.Yge.ame)try{await this.Yge.G5t()}catch(t){this.ume(t,dt.GENERAL)}}async cme(){if(this.Yge.eme.lme)return this.Yge.eme.DR(),!1;if(this.Yge.dme)try{await this.Yge.ome.fme()}catch(t){this.ume(t,dt.PLAYBACK)}return!0}get _me(){return ol(this.BI())}ume(t,e){t.name!==J9.Hge&&this.z2t._o(new Qh(e,"Ads could not be loaded."))}async DR(){if(this.JI&&this._o(new he(this.RI)),await this.hme(),this._me)return;const t=await this.cme();!this._me&&t&&this.Ose()}o7t(t,e,i){e===FF.Gnt&&this.Yge.o7t(t)}ge(){this.Yge.ge()}zD(){this.Yge.eme.zD()}Ynt(t){}IR(){return this.Tit}AI(){return this.YZ.YH.map((t=>t.SZ))}o3t(t){}async yn(){await this.NR(),this.Yge.yn(),await this.YZ.qZ(this.aO),this.Qge(),this.ime(),this.z2t.qK(this.Yge.$ge)}async NR(){this.Yge.nr(),this.i3t&&(this.na.ge(),this.d2t(),this.be())}constructor(t,e,i,s,n){super(t,e),this.bZ=void 0,this.AZ=void 0,this.jge=t=>{const e=t.trt,i="rrt"===t.type;if(e.S3t===Ls.w3t){const t=this.na.we.classList;i?t.add($9):t.remove($9)}i?this.ge():this.be()},this.Kge=()=>{this.v4t(),this.na.PR(),this.na.be()},this.Ose=()=>{this.Yge.ame&&(this.na.MI||this.na.DR(),this.be(),this.na.ge(),this.d2t())},this.Yge=s,this.YZ=i,this.aO=n,this.Tit=n.SZ,this.Tit.controls=!1,this.qge(),this.Jge(),this.tme()}};r(),r(),r();var i8=class extends ps{get vme(){return this.gme}get mme(){return this.zc[this.pme]}set wme(t){this.pme=t}get wme(){return this.pme}get S3t(){return this.T3t}get zQt(){return ji.J$t}constructor(t,e,i,s){super(i),this.gme=s,this.pme=0,this.T3t=n8(s),this.a3t=t,this.u3t=e}};r();var s8=class extends Vs{get yme(){return this.bme}set yme(t){this.bme!==t&&(this.bme=t)}get Ti(){return this.sd.vme.getHeight()}get ji(){return this.sd.vme.getWidth()}get DKt(){return this.yme.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]}get zQt(){return ji.J$t}ka(){return qo(this)}constructor(t,e,i){super(t,e),this.bme=i}};function n8(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY?Ls.w3t:Ls.mQt}var r8=class t extends en{async Ame(t,e){this.Sme=t,this.Tme=e,this.kme(t),await e,this.Eme()}get xme(){return this.Ime}get Rme(){return this.Cme}get Pme(){return this.Dme}get Xnt(){return this.i0t}get H8t(){return this.z$t}get znt(){const t=[];if(this.i0t){const e=this.i0t.wme;e>=0&&t.push(...this.i0t.zc.slice(e+1))}for(const e of this.Nme)t.push(...e.zc);return t}get qnt(){return this.Nme}Eme(){this.Mme()}kme(t){t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Lme),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Bme),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Ome),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.Fme),t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.Vme)}Wme(){this.Sme&&(this.Sme.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Lme),this.Sme.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Bme),this.Sme.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Ome),this.Sme.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.Fme),this.Sme.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.Vme))}Mme(){this.Ime=this.Ume(this.Gme),this.Cme=this.Ume(this.Zme).concat(this.Ume(this.Hme)),this.Dme=this.Ume(this.Xme),this.Nme=this.Ime.concat(this.Cme).concat(this.Dme)}Ume(t){if(!this.Sme)return[];const e=this.Sme.getSlotsByTimePositionClass(t);return this.zme(e)}qme(t){if(!this.i0t)return void 0;const e=t.getSlot().getAdInstances().indexOf(t);-1!==e&&(this.i0t.wme=e);const i=this.i0t.mme;return i&&(i.yme=t),i}Yme(t){return Do(this.Nme,(e=>e.vme===t))}zme(e){return e.map((e=>{const i=e.getTotalDuration(),s=t.Kme(e);return new i8(i,i,s,e)}))}static jme(t,e){const i=t.getAdInstances(),s=[];for(const t of i){const i=n8(t.getSlot()),n=new s8(e,i,t),r=[];n.y3t(t.getAdId(),t.getSlot().getWidth(),t.getSlot().getHeight(),t.getDuration(),r,0),e.f3t(n),s.push(n)}return s}l1t(){const t=this.H8t;t&&this._o(new Jo(t,this.Qme()))}Jme(){const t=this.H8t;t&&(this._o(new Qn(t,t.yme.getPlayheadTime())),this.z$t=void 0)}$me(t){const e=this.Xnt;e&&(e.R$t=function(t,e,i){void 0===i&&(i=0);let s=0;const n=t.zc.length;for(let r=e;r<n;r++){const n=t.zc[r],o=n.ct;if(n){let t=o;r===e&&(t=bi(o-i,0,o)),s+=t}}return s}(e,e.wme,t))}static Kme(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL?-1:t.getTimePosition()}Qme(){const t=this.H8t;if(!t)return 0;const e=t.yme;return e.getPlayheadTime()/e.getDuration()}tpe(t){_e(this.Nme,t),_e(this.Ime,t),_e(this.Cme,t),_e(this.Dme,t)}nr(){this.Wme(),this.Ime.length=0,this.Cme.length=0,this.Dme.length=0,this.Nme.length=0,this.z$t=void 0,this.i0t=void 0,this.Sme=void 0,this.Tme=void 0}yn(){this.nr(),this.Ro()}constructor(e,i){super(),this.Vs=e,this.hk=i,this.Gme=tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,this.Zme=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,this.Xme=tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL,this.Hme=tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY,this.Ime=[],this.Cme=[],this.Dme=[],this.Nme=[],this.Lme=e=>{const i=e.slot,s=this.Yme(i);s&&(t.jme(i,s),this.i0t=s,s.l3t(),this.tpe(s),s.S3t===Ls.mQt&&this._o(new XF(s)))},this.Bme=()=>{const t=this.Xnt;t&&t.S3t===Ls.mQt&&(this._o(new $h(t)),this.hk.src=""),this.i0t=void 0},this.Ome=t=>{const e=this.qme(t.adInstance);e&&(this._o(new Cn(e,e.yme.getPlayheadTime())),this.z$t=e),t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&(this.Vs.style.cursor="pointer",this.Vs.addEventListener("click",this.epe))},this.Fme=()=>{this.Vs.style.cursor="",this.Vs.removeEventListener("click",this.epe)},this.epe=()=>{this.H8t&&this.H8t.yme.getRendererController().processEvent({name:tv.freewheel.SDK.EVENT_AD_CLICK})},this.Vme=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.Jme();break;case tv.freewheel.SDK.EVENT_AD_SKIPPED:this.l1t(),this.Jme()}}}};r();var o8=class t extends en{ipe(){if(this.Cmt){this.Cmt.setAdVolume(h8(this.qI,this.yR))}}spe(t){this.Cmt=t,this.kme(t)}kme(t){t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.npe),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.rpe),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.ope),t.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.hpe),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.ape),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.upe)}cpe(){const t=this.Cmt;t&&(t.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.npe),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.rpe),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.ope),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.hpe),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.ape),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.upe))}DR(){this.Nyt.Xnt&&(this.Nyt.Xnt.vme.resume(),this.JI=!1)}PR(){this.Nyt.Xnt&&(this.Nyt.Xnt.vme.pause(),this.JI=!0)}get RI(){const t=this.Nyt.H8t;return t&&(this.RI=t.yme.getPlayheadTime()),this.OH}set RI(t){this.OH=t}get ct(){return this.FA}get lme(){return!!this.Nyt&&void 0!==this.Nyt.Xnt}get JI(){return this.WH}set JI(t){this.WH=t}get yR(){return this.jA}set yR(t){this.Cmt&&this.Cmt.setAdVolume(t),this.jA=t}get qI(){return this.Cmt&&(this.lpe=0===this.Cmt.getAdVolume()),this.lpe}set qI(t){this.Cmt&&this.Cmt.setAdVolume(h8(t,this.yR)),this.lpe=t}get cR(){return this.j4}get MI(){return this.v5}set MI(t){this.v5=t}get aR(){return this.g5}static dpe(t){switch(t){case"pause":return tv.freewheel.SDK.VIDEO_STATE_PAUSED;case"playing":return tv.freewheel.SDK.VIDEO_STATE_PLAYING;case"ended":return tv.freewheel.SDK.VIDEO_STATE_COMPLETED;case"stop":return tv.freewheel.SDK.VIDEO_STATE_STOPPED}}fpe(e){const i=t.dpe(e);this.Cmt&&i&&this.Cmt.setVideoState(i)}zD(){const t=this.Nyt.H8t;t&&t.yme.skip()}nr(){if(this.cpe(),this.Cmt){this.fpe("stop"),this.Cmt.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);const t=this.Cmt.getTemporalSlots();for(const e of t)e.stop();this.Cmt.dispose(),this.Cmt=void 0}this.FA=NaN,this.MI=!1,this.g5=Wt.TO,this.RI=0,this._pe=0,this.JI=!0,void 0!==this.vpe&&(p(this.vpe),this.vpe=void 0)}yn(){this.nr(),this.Ro(),this.Nyt.vn("nrt",this.Td),this.Ku.vn(ln.mn,this.rpe),this.r1t.removeEventListener("click",this.gpe)}constructor(t,e,i,s){super(),this.na=t,this.Ku=e,this.Nyt=i,this.r1t=s,this.j4=ee.WB().ks(),this.WH=!0,this.FA=NaN,this.lpe=!1,this.v5=!1,this.g5=Wt.TO,this.OH=0,this._pe=0,this.npe=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_PAUSE:(function(t){if(!t)return!0;const e=t.yme,i=e.getPlayheadTime(),s=e.getDuration();return i>=s||zd(s,i)})(this.Nyt.H8t)||(this.JI=!0,this._o(new nl(this.RI)));break;case tv.freewheel.SDK.EVENT_AD_RESUME:this.JI=!1,this._o(new Xr(this.RI));break;case tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE:if(this.Cmt){const t=this.Cmt.getAdVolume();0===t?this.lpe=!0:this.jA=t,this._o(new Ar(this.RI,this.yR))}}},this.ope=()=>{this.MI=!1;const t=this.JI;if(this.JI=!1,t&&(this._o(new he(this.RI)),this._o(new Xr(this.RI))),this.g5=Wt.EO,this.RI=0,!this.Nyt.H8t)return;const e=this.Nyt.H8t.yme;this.FA=e.getDuration(),this._o(new yn(this.FA)),this.vpe=v((()=>{if(!this.lme)return void this.dw();this.Nyt.$me(this.RI);const t=e.getPlayheadTime();rs(t,this._pe,.001)||this._o(new rl(t,void 0)),this._pe=t}),250),this.Cmt&&this.Cmt.setAdVolume(h8(this.qI,this.yR))},this.gpe=()=>{const t=this.Nyt.H8t;t&&(t.S3t===Ls.w3t?this.na.PR():this.JI||this.PR())},this.dw=()=>{p(this.vpe),this.vpe=void 0},this.hpe=()=>{this.dw(),this.MI=!0},this.ape=()=>{this.fpe("pause")},this.upe=()=>{this.fpe("playing")},this.Td=t=>{t.sd.S3t===Ls.mQt&&(this.JI=!1)},this.rpe=()=>{this.Cmt&&this.Cmt.resize(this.Ku.Au,this.Ku.Nu)},this.jA=t.yR,i.bn("nrt",this.Td),this.Ku.bn(ln.mn,this.rpe),this.r1t.addEventListener("click",this.gpe)}};function h8(t,e){return t?0:e}r(),r();var a8=class extends dl{get name(){return J9.Xge}constructor(){super("A FreeWheel Ad Error occurred")}};r();var u8=class extends dl{get name(){return J9.Hge}constructor(){super("A FreeWheel Reset Error Occurred")}},c8=0;var l8=class{mpe(t,e,i){t.setNetwork(e.networkId),t.setServer(e.adServerUrl);const s=this.Cmt;if(s.setProfile(e.profile),e.assetId&&e.assetDuration&&s.setVideoAsset(e.assetId,e.assetDuration),e.siteSectionId&&s.setSiteSection(e.siteSectionId),s.registerVideoDisplayBase(i),e.cuePoints&&e.cuePoints.length)for(const t of e.cuePoints)s.addTemporalSlot("cue-"+ ++c8,t.adUnit,t.timeOffset);const n=e.customData;if(Vt(n)){const t=w.keys(n);for(const e of t){const t=n[e];s.addKeyValue(e,t)}}}async ppe(){this.Cmt.submitRequest(),await this.wpe.Xb}nr(){this.Cmt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.ype),this.wpe.Hb(new u8)}constructor(t,e,i,s){this.Cmt=e,this.ype=t=>{this.Cmt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.ype),t.success?this.wpe.Zb(void 0):this.wpe.Hb(new a8)},this.mpe(t,i,s),e.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.ype),this.wpe=new is}};r(),r();var d8=class{bpe(){this.Sme.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Bme),this.Sme.removeEventListener(tv.freewheel.SDK.EVENT_ERROR,this.Bme)}get Ape(){return this.sp.Xb}KUt(){this.bpe(),this.sp.Hb(new u8)}constructor(t){this.Sme=t,this.Bme=t=>{this.bpe(),this.sp.Zb(void 0)},this.F9t=t=>{this.bpe(),this.sp.Hb(new a8)},this.sp=new is,t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Bme),t.addEventListener(tv.freewheel.SDK.EVENT_ERROR,this.F9t)}},f8=class{qO(t){this.Sme=t}fme(){return this.Spe(this.Tpe.xme)}rme(){this.Spe(this.Tpe.Pme)}async Spe(t){if(this.Sme)for(;t.length>0;){this.kpe=new d8(this.Sme);const e=this.kpe.Ape,i=this.Tpe.Xnt;i&&i.S3t===Ls.w3t&&i.vme.stop();t.shift().vme.play();try{await e}finally{this.kpe=void 0}}}nr(){this.kpe&&(this.kpe.KUt(),this.kpe=void 0),this.JMt=0}yn(){this.na.vn(ns._b,this.Epe)}constructor(t,e){this.na=t,this.Tpe=e,this.JMt=0,this.Epe=()=>{const t=this.na.CI();for(const e of this.Tpe.Rme){const i=new ee([this.JMt,t],[!0,!0]),s=e.vme.getTimePosition();if(i.wr(s))switch(e.vme.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.Spe([e]);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:e.vme.play(),e.vme.setVisible(!0)}}this.JMt=t},t.bn(ns._b,this.Epe)}},_8=0,v8=class t extends lc{static createUniqueDisplayBaseId(){return"theo-freewheel-"+ ++_8}get nme(){return 0!==this.$ge.Pme.length}get dme(){return 0!==this.$ge.xme.length}async G5t(){if(!this.qQt)throw new m("Invalid state");const t=this.xpe,e=t.newContext();e.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),e.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);const i=new l8(t,e,this.qQt,this.Ipe),s=this.$ge.Ame(e,i.ppe());this.Rpe.qO(e),this.eme.spe(e),this.Cpe=i;try{await s}finally{this.eme.ipe(),this.Ppe=!0}}get eme(){return this.D9t}get $ge(){return this.Dpe}get ame(){return this.Ppe}static Npe(t,e,i){const s=h.createElement("div");return s.id=i,s.className="theo-freewheel",e.classList.add("theo-freewheel-video"),s.appendChild(e),t.appendChild(s),s}get ome(){return this.Rpe}K2t(t){this.eme.fpe(t.type)}ge(){this.r1t.style.display="block",this.hk.style.display="block"}be(){this.r1t.style.display="none",this.hk.style.display="none"}o7t(t){this.qQt=t}nr(){this.Ppe=!1,this.qQt=void 0,this.$ge.nr(),this.Rpe.nr(),this.Cpe&&(this.Cpe.nr(),this.Cpe=void 0),this.eme.nr(),this.hk.src=""}yn(){this.nr(),this.D9t.yn(),this.Rpe.yn(),this.$ge.yn(),this.r1t.remove(),We(this.r1t)}constructor(e,i,n){super(),this.na=e,this.hk=i,this.Ppe=!1,this.Ipe=t.createUniqueDisplayBaseId(),this.r1t=t.Npe(e.we,i,this.Ipe),this.xpe=new s.tv.freewheel.SDK.AdManager,this.Dpe=new r8(this.r1t,this.hk),this.Rpe=new f8(this.na,this.$ge),this.ru(this.$ge),this.D9t=new o8(e,n,this.$ge,this.r1t)}};function g8(t){if(s.tv)switch(t){case"preroll":return tv.freewheel.SDK.ADUNIT_PREROLL;case"midroll":return tv.freewheel.SDK.ADUNIT_MIDROLL;case"postroll":return tv.freewheel.SDK.ADUNIT_POSTROLL;case"overlay":return tv.freewheel.SDK.ADUNIT_OVERLAY}}function m8(t,e,i){if(void 0!==e&&S(e)||e<0||e===1/0)return NaN;switch(t){case"preroll":return 0;case"postroll":return i}return N0(e)}Ch.Vm.nX(new class{get F2t(){return ji.J$t}sX(t){return t.integration===vu.FREEWHEEL}V2t(t,e,i){if(!Boolean(s.tv&&s.tv.freewheel&&s.tv.freewheel.SDK&&s.tv.freewheel.SDK.AdManager))return;const n=new Vu(t.Hu,t.Wl,1,[Fo.yE]);n.Mst(t.we);const r=n.lH(Fo.yE),o=new v8(t,r.SZ,t.Hu);return new e8(t,e,n,o,r)}Aq(t){const e=Fa(t);Qc(e.cuePoints)||(e.cuePoints=[]);const i=[],s=t.assetDuration||0;for(const t of e.cuePoints){const e=m8(t.adUnit,t.timeOffset,s),n=g8(t.adUnit);!S(e)&&oi(n)?(t.adUnit=n,t.timeOffset=e,i.push(t)):As.aw("Invalid adUnit/timeOffset combination. Cue was removed.")}return e.cuePoints=i,e}K6(t,e,i,s){i.o7t(t,e,s)}}),r(),r(),r(),r(),r();var p8=self.theoplayerDeviceMetadata;function ea(t){return t.navigator&&t.navigator.userAgent||""}r(),r(),r(),r();var w8={"Windows 10":/(Windows 10.0|Windows NT 10.0)/i,"Windows 8.1":/(Windows 8.1|Windows NT 6.3)/i,"Windows 8":/(Windows 8|Windows NT 6.2)/i,"Windows 7":/(Windows 7|Windows NT 6.1)/i,"Windows Vista":/Windows NT 6.0/i,"Windows Server 2003":/Windows NT 5.2/i,"Windows XP":/(Windows NT 5.1|Windows XP)/i,"Windows Phone":/Windows Phone/i,Android:/Android/i,Linux:/(Linux(?!.*Ubuntu)|X11)/,Ubuntu:/Ubuntu/i,iOS:/(iPhone|iPad|iPod)/i,"Mac OS X":/Mac OS X/i,"Mac OS":/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i,"Chrome OS":/CrOS/i};function bn(t,e){const i=w8[e];return!!i&&Boolean(ea(t).match(i))}function y8(t){return bn(t,"Android")}function b8(t){return bn(t,"Windows Phone")}function A8(t){return bn(t,"iOS")&&!b8(t)}function S8(t){return bn(t,"Ubuntu")}var cl=/Windows (NT|Phone) ([0-9.]+)/i,T8=/Mac.*?(OS |OS X )(\d+(([_.])\d+)?(([_.])\d+)?)/i,k8={"Windows 10":cl,"Windows 8.1":cl,"Windows 8":cl,"Windows 7":cl,"Windows Vista":cl,"Windows Server 2003":cl,"Windows XP":cl,"Windows Phone":/Windows Phone ([0-9.]+)/i,Android:/Android (\d+(([_.])\d+)?(([_.])\d+)?)/i,Linux:void 0,Ubuntu:void 0,iOS:/(iPad|iPhone|iPod).*?(OS |os |OS_)(\d+(([_.])\d+)?(([_.])\d+)?)/i,"Mac OS X":T8,"Mac OS":T8,"Chrome OS":void 0};function E8(t,e){const i=k8[e];return i?ea(t).match(i):null}function x8(t){return t.split(/[_.]/).map((t=>x(t,10)))}function I8(t){if(function(t){return Boolean(ea(t).match(/Windows/i))}(t)){if(function(t){return bn(t,"Windows 10")}(t))return"Windows 10";if(b8(t))return"Windows Phone";if(function(t){return bn(t,"Windows 8.1")}(t))return"Windows 8.1";if(function(t){return bn(t,"Windows 8")}(t))return"Windows 8";if(function(t){return bn(t,"Windows 7")}(t))return"Windows 7";if(function(t){return bn(t,"Windows Vista")}(t))return"Windows Vista";if(function(t){return bn(t,"Windows Server 2003")}(t))return"Windows Server 2003";if(function(t){return bn(t,"Windows XP")}(t))return"Windows XP"}else{if(y8(t))return"Android";if(A8(t))return"iOS";if(function(t){return bn(t,"Mac OS X")}(t))return"Mac OS X";if(function(t){return bn(t,"Mac OS")}(t))return"Mac OS";if(S8(t))return"Ubuntu";if(function(t){return bn(t,"Chrome OS")}(t))return"Chrome OS";if(function(t){return bn(t,"Linux")&&!S8(t)}(t))return"Linux"}}function R8(t,e){const i=function(t){const e=E8(t,"Windows 10");return e&&e.length>2?x8(e[2]):void 0}(t),s=function(t){const e=E8(t,"Mac OS X");return e&&e.length>2?x8(e[2]):void 0}(t),n=function(t){const e=E8(t,"Android");return e&&e.length>1?x8(e[1]):void 0}(t),r=function(t){const e=E8(t,"iOS");return e&&e.length>3?x8(e[3]):void 0}(t),o=function(t){const e=E8(t,"Chrome OS");return e&&e.length>0?x8(e[0]):void 0}(t);return i?i.length>e?i[e]:void 0:s?s.length>e?s[e]:void 0:n?n.length>e?n[e]:void 0:r?r.length>e?r[e]:void 0:o&&o.length>e?o[e]:void 0}function C8(t){const e=function(t){return R8(t,0)}(t),i=function(t){return R8(t,1)}(t),s=function(t){return R8(t,2)}(t);if(void 0!==e)return void 0===i?""+e:void 0===s?e+"."+i:e+"."+i+"."+s}var P8={Chrome:/Chrome/i,"Chrome Mobile":void 0,"Chrome iOS":/CriOS/i,Chromium:/Chromium/i,HeadlessChrome:/HeadlessChrome/i,Firefox:/Firefox/i,Seamonkey:/Seamonkey/i,"Firefox iOS":/FxiOS/i,Safari:/Safari/i,Edge:/Edge\/\d+/i,"Edge Chromium":/Edg\/\d+/i,IE:/Trident/i,Opera:/Opera|OPR/i,Vivaldi:/Vivaldi/i,"Android Browser":void 0};function D8(t,e){const i=P8[e];return!!i&&Boolean(ea(t).match(i))}function N8(t){return Boolean(ea(t).match(/Mobi/i))}function M8(t){return Boolean(t.chrome&&t.navigator&&t.navigator.vendor&&/google/i.test(t.navigator.vendor))||L8(t)}function L8(t){return D8(t,"Chrome iOS")}function B8(t){return D8(t,"Firefox")&&!F8(t)}function O8(t){return D8(t,"Firefox Mobile")&&!F8(t)&&N8(t)}function F8(t){return D8(t,"Seamonkey")}function V8(t){return D8(t,"Firefox iOS")&&!F8(t)}function W8(t){return D8(t,"Safari")&&!D8(t,"Chrome")&&!Ya.Zv}function U8(t){return Boolean(K8(t))}function G8(t){return D8(t,"Edge")}function Z8(t){return D8(t,"Edge Chromium")}function H8(t){return D8(t,"IE")}function X8(t){return D8(t,"Vivaldi")}var z8=/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,q8={Chrome:z8,"Chrome Mobile":z8,"Chrome iOS":/CriOS\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,Chromium:z8,HeadlessChrome:z8,Firefox:/Firefox\/([0-9.]+)/i,"Firefox iOS":/FxiOS\/([0-9.]+)/i,Safari:/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/,"Safari Mobile":void 0,Edge:/Edge\/(\d+)/i,"Edge Chromium":/Edg\/(\d+)/i,"Edge Mobile":void 0,IE:/(MSIE |Trident.*?rv:)(\d+)/i,Opera:/(OPR\/(\d+\.\d+))|(Opera(?=.*Version\/((\d+)\.(\d+))))/i,"Opera Mobile":void 0,Vivaldi:/Vivaldi\/((\d+)\.(\d+)\.(\d+)(?:\.(\d+))?)/i,"Android Browser":void 0};function Y8(t,e){const i=q8[e];return i?ea(t).match(i):null}function K8(t){return Y8(t,"Opera")}function j8(t){const e=function(t){return Y8(t,"Firefox")}(t);return e?C(e[1]):0}function Q8(t){const e=function(t){return Y8(t,"Firefox iOS")}(t);return e?C(e[1].split(".")[0]):0}function J8(t){const e=function(t){return Y8(t,"Safari")}(t);return e?C(e[2].split(".")[0]):0}function $8(t){const e=function(t){return Y8(t,"Edge")}(t);return e?C(e[1]):0}function t7(t){const e=function(t){return Y8(t,"Edge Chromium")}(t);return e?C(e[1]):0}function e7(t){const e=function(t){return Y8(t,"IE")}(t);return e?C(e[2]):0}function i7(t){const e=function(t){return Y8(t,"Vivaldi")}(t);return e?C(e[1]):0}function s7(t){if(y8(t))return M8(t)?"Chrome Mobile":B8(t)||O8(t)?"Firefox Mobile":G8(t)?"Edge Mobile":U8(t)?"Opera Mobile":"Android Browser";if(A8(t)){if(M8(t)||L8(t))return"Chrome iOS";if(B8(t)||V8(t))return"Firefox iOS";if(G8(t))return"Edge Mobile";if(W8(t)||function(t){return W8(t)&&N8(t)}(t))return"Safari Mobile";if(U8(t))return"Opera Mobile"}return function(t){return D8(t,"Chromium")}(t)?"Chromium":function(t){return D8(t,"HeadlessChrome")}(t)?"HeadlessChrome":M8(t)?"Chrome":B8(t)?"Firefox":W8(t)?"Safari":G8(t)?"Edge":Z8(t)?"Edge Chromium":H8(t)?"IE":U8(t)?"Opera":X8(t)?"Vivaldi":void 0}function n7(t){return X8(t)?i7(t):L8(t)?Number(function(t){const e=q8["Chrome iOS"];return e&&e.exec(ea(t))||[]}(t)[1]):M8(t)?Number(function(t){const e=q8.Chrome;return e&&e.exec(ea(t))||[]}(t)[1]):B8(t)||O8(t)?j8(t):V8(t)?Q8(t):W8(t)?J8(t):G8(t)?$8(t):Z8(t)?t7(t):H8(t)?e7(t):U8(t)?function(t){const e=K8(t);return e&&e[0].indexOf("Opera")>-1?C(e[5]):e?C(e[2].split(".")[0]):0}(t):void 0}var r7=function(t){return t.Mpe="pc",t.Lpe="console",t.Bpe="settop",t.Ope="mobile",t.Fpe="tablet",t.Vpe="smarttv",t.Wpe="searchbot",t}({});function o7(t){const e=ea(t);return e.match(/CrKey|Roku|AFTS|AppleTV|Nexus Player/i)?"settop":e.match(/Xbox|Playstation|Wii|Nintendo/i)?"console":/(iPad|Tablet|(Android(?!.*Mobi))|(Windows(?!.*Phone)(.*Touch))|Kindle|Playbook|Silk|(Puffin(?!.*(IP|AP|WP))))/i.test(e)?"tablet":/Mobi/.test(e)?"mobile":e.match(/GoogleTV|SmartTV|SMART-TV|Internet TV|NetCast|NETTV|boxee|Kylo|DLNADOC|hbbtv|CE-HTML/i)?"smarttv":e.match(/(nuhk|Googlebot|bingbot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/i)?"searchbot":function(t){return Boolean(s7(t))}(t)?"pc":void 0}var h7=class{bq(t){this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_ID,t.deviceID||function(){const t=kb.Vb("deviceId");if(t)return t;const e=xC();return kb.Wb("deviceId",e),e}()),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER,"THEOplayer"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER_VERSION,"9.7.0"),this.Upe(t),this.Gpe(),this.Zpe(t),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_VERSION,"3.0"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_BUILDDATE,"2023-04-17 12:00:00"),t.application&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION,t.application),t.applicationVersion&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION_VERSION,t.applicationVersion),t.userAccountID&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.USER_ACCOUNT_ID,t.userAccountID);const e=t.connectionType;e?this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,e):(this.Hpe(),Bl.connection&&Bl.connection.addEventListener&&Bl.connection.addEventListener("change",this.Hpe))}Upe(t){this.Xpe(t);const e=t.deviceManufacturer||p8&&p8.manufacturer;e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MANUFACTURER,e);const i=t.deviceModel||p8&&p8.model;i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MODEL,i)}Xpe(t){const e=t.deviceType||function(){const t=o7(self);switch(t){case r7.Lpe:return"game-console";case r7.Vpe:return"tv";case r7.Bpe:return"media-streamer";default:return t}}();e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_TYPE,e)}Gpe(){const t=s7(self);t&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER,t);const e=n7(self);void 0!==e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER_VERSION,e.toString())}Zpe(t){const e=t.deviceOs||I8(self);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS,e);const i=t.deviceOsVersion||C8(self);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS_VERSION,i.toString())}yn(){Bl.connection&&Bl.connection.removeEventListener&&Bl.connection.removeEventListener("change",this.Hpe)}constructor(t,e){this.empClient=t,this.agama=e,this.Hpe=()=>{const t=As.gI;switch(t){case"wifi":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,"wlan");break;case"ethernet":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,t);break;case"cellular":const e=function(t){switch(t){case"3g":return"mobile/3G";case"4g":return"mobile/4G";default:return}}(As.vI);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,e)}}}};zh(function(t){return e=>class extends e{DI(t,e){this.zpe&&this.zpe.oz(),super.DI(t)}yn(){this.zpe&&this.zpe.yn(),super.yn()}constructor(e,i){super(e,i),this.YX=new t,this.zpe=new RC(this,this.YX,i)}}}(class extends mC{RR(t){this.qpe=t,this.Ype&&(this.YX=function(t,e){const i=function(t,e){switch(e){case"info":return t.LogLevel.INFO;case"debug":return t.LogLevel.DEBUG;case"warning":return t.LogLevel.WARNING;case"error":return t.LogLevel.ERROR;default:return t.LogLevel.FATAL}}(e,t.logLevel);e.setLogLevel(i);const s=new e.EMPClient(t.config);return function(t,e){return t.setExternalConfig(e.config),t}(s,t)}(t,this.Ype),this.YX&&(this.Kpe=new h7(this.YX,this.Ype),this.mo=!0))}yq(){return this.Ype||console.warn("Please load the Agama Library (empclient.min.js) in order to use the integration"),Boolean(this.Ype)}pq(){return this.mo}Kz(t,e){if(this.YX&&this.Ype)switch(t){case ra.gX:this.YX.setMeasurement(this.Ype.Measurement.BUFFER_LENGTH,e);break;case ra.mX:this.YX.setMeasurement(this.Ype.Measurement.BYTES_RECEIVED,e);break;case ra.wX:this.YX.setMeasurement(this.Ype.Measurement.SEGMENT_PROFILE_BITRATE,e);break;case ra.yX:this.YX.setMeasurement(this.Ype.Measurement.VIDEO_PROFILE_BITRATE,e);break;case ra.pX:this.YX.setMeasurement(this.Ype.Measurement.SEGMENT_READ_BITRATE,e);break;case ra.lX:this.YX.setMeasurement(this.Ype.Measurement.HTTP_REQUEST_STATUS_CODE_1XX,e);break;case ra.dX:this.YX.setMeasurement(this.Ype.Measurement.HTTP_REQUEST_STATUS_CODE_2XX,e);break;case ra.fX:this.YX.setMeasurement(this.Ype.Measurement.HTTP_REQUEST_STATUS_CODE_3XX,e);break;case ra._X:this.YX.setMeasurement(this.Ype.Measurement.HTTP_REQUEST_STATUS_CODE_4XX,e);break;case ra.vX:this.YX.setMeasurement(this.Ype.Measurement.HTTP_REQUEST_STATUS_CODE_5XX,e);break;case ra.AX:this.YX.setMeasurement(this.Ype.Measurement.PLAYBACK_POSITION,e);break;case ra.SX:this.YX.setMeasurement(this.Ype.Measurement.NUMBER_OF_FRAMES_DECODED,e);break;case ra.bX:this.YX.setMeasurement(this.Ype.Measurement.NUMBER_OF_FRAMES_DROPPED,e)}}Rz(t,e){if(this.YX&&this.Ype)switch(t){case fC.IX:this.YX.setSessionMetadata(this.Ype.SessionMetadata.ASSET_DURATION,e);break;case fC.xX:this.YX.setSessionMetadata(this.Ype.SessionMetadata.MANIFEST_URI,e);break;case fC.RX:this.YX.setSessionMetadata(this.Ype.SessionMetadata.NUMBER_OF_CONTENT_PROFILES,e);break;case fC.DX:this.YX.setSessionMetadata(this.Ype.SessionMetadata.SERVICE_NAME,e);break;case fC.CX:this.YX.setSessionMetadata(this.Ype.SessionMetadata.CDN,e);break;case fC.PX:this.YX.setSessionMetadata(this.Ype.SessionMetadata.CONTENT_TITLE,e);break;case fC.NX:this.YX.setSessionMetadata(this.Ype.SessionMetadata.CONTENT_TYPE,e);break;case fC.MX:this.YX.setSessionMetadata(this.Ype.SessionMetadata.CONTENT_DESCRIPTION,e)}}bq(){this.Kpe&&this.qpe&&this.Kpe.bq(this.qpe)}wq(t,e){this.Ype&&this.YX&&(this.iq(),function(t,e,i,s){const n=IC(t,i,s);e.abrSession(n,t.ViewState.INITIAL_BUFFERING)}(this.Ype,this.YX,t,e),this.jpe=!0)}yn(){this.Kpe&&this.Kpe.yn(),this.Qpe(_C.LX),this.YX=void 0}vz(t){this.Jpe(t)}pz(t,e){this.YX&&this.YX.event(t.code,e)}iq(){this.YX&&this.jpe&&(this.YX.exitSession(),this.jpe=!1)}Qpe(t){if(this.YX&&this.Ype&&(this.iq(),t===_C.LX))this.YX.shutdown(this.Ype.ShutdownType.NORMAL_SHUTDOWN)}gz(t,e,i){this.Jpe(t,e,i)}Jpe(t,e,i){if(this.YX&&this.Ype)switch(t){case ke.uB:this.$pe(this.Ype.ViewState.PLAYING,e,i);break;case ke.aX:this.$pe(this.Ype.ViewState.FAILED,e,i);break;case ke.uX:this.$pe(this.Ype.ViewState.INITIAL_BUFFERING,e,i);break;case ke.rX:this.$pe(this.Ype.ViewState.PAUSED,e,i);break;case ke.oX:this.$pe(this.Ype.ViewState.SEEK,e,i);break;case ke.hX:this.$pe(this.Ype.ViewState.STALLED,e,i);break;case ke.cX:this.$pe(this.Ype.ViewState.NO_ACCESS,e,i)}}$pe(t,e,i){if(this.YX)if(e){const s=function(t){return t||""}(i);this.YX.viewStateExtended(t,e.code,s)}else this.YX.viewStateChanged(t)}constructor(){super(),this.mo=!1,this.jpe=!1,this.Ype=s.Agama}}),Hh.Pnt),r(),r(),r(),r(),r();var a7=function(t){return t.PLAY_ALL="play-all",t.PLAY_NONE="play-none",t.PLAY_LAST="play-last",t}({});r();var Fr=function(t){return t.VOD="vod",t.LIVE="live",t}({}),u7=class{get wa(){return this.twe.wa}get lt(){return this.bZ}get OI(){return this.AZ}iwe(t){this.bZ=Zs(t),this.AZ=t,this.na._o(new Pi(t))}Ca(t){this.nwe.resetSource(),this.rwe.Gb(),this.owe=!1,this.na.hwe(t)}async prt(t,e){if(this.awe.nr(),this.owe=!1,!t||!function(t){return t.sources.some((t=>t.integration===UT.UPLYNK))}(t))return await this.na.uwe(t,e);try{this.cwe=await this.lwe.hve(t),await this.na.uwe(this.cwe,e)}catch(t){this.iwe(new Z(Ci.MANIFEST_LOAD_ERROR,t.message,t))}}yn(){this.V8.np(),this.dwe.np(),this.na.vn(ns.Cy,this.fwe),this.na.vn(ns.ho,this.Vde),this.na.vn(ns._b,this.xae),this.na.vn(ns.Ly,this.g_e),this.na.vn(Zc.oB,this.Sd);for(const t of this.nwe.D$t.Zu)t.vn("_we",this.vwe),t.vn("nrt",this.gwe),t.vn("irt",this.mwe);this.nwe.D$t.vn("$nt",this.pwe),this.nwe.D$t.vn("Jnt",this.wwe),this.nwe.destroy(),this.h1t&&(this.h1t.Km(),this.h1t=void 0),this.owe=!1}async fetchAssetInfo(t){if(t&&t.integrationData)try{const e=await this.ywe.tTt(t.integrationData.source.prefix,t.integrationData.source.id,this.dwe.ep,t.integrationData.preplayResponse.sid);this.twe.bwe(e),this.rwe.Awe(e,this.nwe.D$t.Zu)}catch(t){0}}Swe(t){this.nwe.Twe(t),this.nwe.Znt.forEach((e=>e.kwe(t))),this.nwe.xwe(this.na.lR()),this.o1t()}DI(t){if(this.nwe.Xnt)return;this.V8.np(),this.V8=new Fi;uh(Ts(this.Ine(t,this.V8.ep),this.V8))}async Ine(t,e){if(Io(e),t<this.na.CI())return void this.Iwe(t);let i=[];switch(this.nwe.Rwe){case a7.PLAY_ALL:i=this.nwe.Cwe(this.na.CI(),t),await this.Pwe(t,i,e);break;case a7.PLAY_LAST:const s=this.nwe.Cwe(this.na.CI(),t).pop();i=s?[s]:[],await this.Pwe(t,i,e);break;case a7.PLAY_NONE:this.Dwe(t)}}Iwe(t){const e=Do(this.nwe.D$t.Zu,(e=>e.Kat.wr(t)));e?this.na.Nwe(e.lF):this.na.Nwe(t)}Dwe(t){const e=this.nwe.Cwe(this.na.CI(),t).pop();e&&e.Kat.wr(t)?this.na.Nwe(e.dF):this.na.Nwe(t)}async Pwe(t,e,i){for(const t of e)await this.Mwe(t,i);const s=Jr(e,-1);s&&s.Kat.wr(t)?this.na.CI()<t&&this.na.Nwe(s.dF):this.na.Nwe(t)}async Mwe(t,e){t.vn("_we",this.vwe);const i=Promise.race([t.Ay("irt",e),t.Ay("_we",e)]);this.Swe(this.na.CI()),t.so||this.na.Nwe(t.lF),await i,t.bn("_we",this.vwe)}o1t(){const t=Do(this.nwe.Znt,(t=>t.Lwe.length>0));if(t){const e=t.Lwe[0];this.h1t||(this.h1t=new A1(this.na.we),this.h1t.bn("clickstart",this.Bwe)),this.h1t.y0t=e}else this.h1t&&(this.h1t.Km(),this.h1t=void 0)}constructor(t,e,i,s,n,r,o){this.na=t,this.awe=e,this.lwe=i,this.nwe=s,this.twe=n,this.ywe=r,this.rwe=o,this.bZ=void 0,this.AZ=void 0,this.V8=new Fi,this.dwe=new Fi,this.Owe=void 0,this.owe=!1,this.h1t=void 0,this.fwe=t=>{const e=t.currentSource;if(!e||!e.integrationData)return;const{preplayResponse:i,source:s}=e.integrationData;this.twe.Fwe(i),i&&i.type===Fr.VOD&&i.ads&&this.nwe.Awe(i.ads),this.awe.Vwe=e.integrationData,s.assetInfo&&uh(this.fetchAssetInfo(e))},this.Vde=()=>{this.owe=!0},this.xae=()=>{this.owe&&this.Swe(this.na.CI())},this.g_e=()=>{this.owe&&(this.Swe(1/0),this.owe=!1)},this.Sd=()=>{uh(this.awe.Sn())},this.vwe=t=>{this.V8.np(),this.V8=new Fi;uh(Ts(this.Ine(t.sd.dF,this.V8.ep),this.V8))},this.gwe=()=>{1!==this.na.tR&&(this.Owe=this.na.tR,this.na.tR=1)},this.mwe=()=>{void 0!==this.Owe&&(this.na.tR=this.Owe,this.Owe=void 0)},this.pwe=t=>{t.sd.bn("_we",this.vwe),t.sd.bn("nrt",this.gwe),t.sd.bn("irt",this.mwe)},this.wwe=t=>{t.sd.vn("_we",this.vwe),t.sd.vn("nrt",this.gwe),t.sd.vn("irt",this.mwe)},this.Bwe=()=>{this.na.PR()},this.na.bn(ns.Cy,this.fwe),this.na.bn(ns.ho,this.Vde),this.na.bn(ns._b,this.xae),this.na.bn(ns.Ly,this.g_e),this.na.bn(Zc.oB,this.Sd),this.nwe.D$t.bn("$nt",this.pwe),this.nwe.D$t.bn("Jnt",this.wwe)}};r(),r();var c7=ze({breaksIndex:mt,adsIndex:mt,startTime:mt,endTime:mt}),l7=ze({index:mt,timeOffset:mt}),d7=ze({duration:mt,apiFramework:Ae(ul,jI),creative:ul,mimeType:ul,width:mt,height:mt,companions:fc(function(t){return new oR(t)}((()=>d7))),extensions:Ae(Fh,fc(KI)),fw_parameters:Ae(Fh,rR(ul)),events:rR(fc(ul))}),f7=ze({type:eR(["linear","nonlinear"]),position:eR(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:mt,duration:mt,ads:fc(d7),events:rR(fc(ul))}),_7=ze({breaks:fc(f7),breakOffsets:Ae(Fh,fc(l7)),placeholderOffsets:Ae(Fh,fc(c7))}),v7=ze({required:Ae(Fh,YI),fairplayCertificateURL:Ae(Fh,ul),widevineLicenseURL:Ae(Fh,ul),playreadyLicenseURL:Ae(Fh,ul)}),g7={type:eR($I(Fr)),playURL:ul,prefix:ul,sid:ul,drm:Ae(Fh,v7)},m7=ze(ne({},g7,{type:eR([Fr.VOD]),ads:_7,interstitialURL:Ae(ul,jI,Fh)})),p7=Ae(m7,ze(ne({},g7,{type:eR([Fr.LIVE])})));r();var w7=ul,y7=ze({userId:ul,externalId:Ae(ul,fc(ul))}),b7=class{async tTt(t){try{return this.Wwe(t)}catch(t){throw t}}async Wwe(t){const e=await async function(t){const e=t.prefix,i=A7[t.assetType],s=function(t){if(fc(w7).fG(t))return 1===t.length?t[0]:t.join(",")+"/multiple";if(w7.fG(t))return t;if(y7.fG(t)&&Qc(t.externalId))return 1===t.externalId.length?"ext/"+t.userId+"/"+t.externalId[0]:"ext/"+t.userId+"/"+t.externalId.join(",")+"/multiple";if(y7.fG(t))return"ext/"+t.userId+"/"+t.externalId;throw new g("Invalid asset id")}(t.id),n=await async function(t){if(t&&await As.mw())return{rmt:"fps",manifest:"m3u8"};if(t&&await As.ww())return{rmt:"wv",manifest:"mpd"};if(t&&await As.pw())return{rmt:"pr",manifest:"mpd"};return{}}(t.contentProtected),r=function(t,e){const i=S7(t,e);return i?{"ad.cping":"1","ad.pingf":String(i)}:{}}(t.assetType,t.ping);let o={};Qc(t.preplayParameters)?t.preplayParameters.forEach((t=>{o[t[0]]=t[1]})):o=t.preplayParameters;const h=e+"/preplay/"+i+s+".json";return Vc(h,ne({v:"2"},o,n,r,o))}(t),i=this.WW.eE({EE:Ce.GET,Xu:e,tE:Te.xk}),s=await i,n=ne({},await s.$k(),{type:t.assetType===MC.ASSET?Fr.VOD:Fr.LIVE});return p7.fG(n)||p7.vG(n,"PreplayResponse"),n}constructor(t){this.WW=t}},A7={[MC.ASSET]:"",[MC.CHANNEL]:"channel/",[MC.EVENT]:"event/"};function S7(t,e){const i=t!==MC.ASSET;return(!i&&e.adImpressions?1:0)+(!i&&e.freeWheelVideoViews?2:0)+(i&&e.linearAdData?4:0)}r(),r();var T7=ze({ad_id:ul,apiFramework:Ae(jI,ul),companions:fc(KI),creative:ul,duration:mt,mimeType:ul,height:mt,width:mt,extensions:Ae(Fh,fc(KI)),fw_parameters:Ae(Fh,rR(ul))}),k7=ze({breakId:ul,ads:fc(T7),type:eR(["linear","nonlinear"]),position:eR(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:mt,duration:mt,height:Ae(Fh,mt),width:Ae(Fh,mt),events:rR(fc(ul))}),E7=ze({breaks:fc(k7)}),x7=ze({next_time:mt,ads:Ae(Fh,E7),extensions:Ae(Fh,fc(KI)),error:Ae(Fh,ul),currentBreakEnd:Ae(Fh,mt)}),I7=function(t){return t.rTt="start",t.oX="seek",t}({}),R7=class{async tTt(t,e){try{return this.Wwe(t,e)}catch(t){throw t}}async Wwe(t,e){const i=function(t){const e={v:"3",pt:String(t.currentTime)};(function(t){return void 0!==t.seekTime})(t)&&t.hasFreeWheelVideoViews&&(e.ft=String(t.seekTime));t.event&&(e.ev=t.event);return Vc(t.zonePrefix+"/session/ping/"+t.sessionId+".json",ne({},e))}(t),s=this.WW.eE({EE:Ce.GET,Xu:i,tE:Te.xk,ep:e}),n=await s,r=await n.$k();return x7.fG(r)||x7.vG(r,"PingResponse"),r}constructor(t){this.WW=t}};r(),r();var C7=class extends $s{get jE(){return this.QE}ka(){return new P7(this.QE)}constructor(t){super("Uwe"),this.QE=t}},P7=class extends me{constructor(t){super("pingresponse"),this.response=t}};r();var D7=class extends $s{get lt(){return this.bZ}ka(){return new N7(this.bZ)}constructor(t){super("Gwe"),this.bZ=t}},N7=class extends me{constructor(t){super("pingerror"),this.error=t}},M7=class extends So{set Vwe(t){this.Zwe=t}get Hwe(){return this.Xwe}async Sn(){const t=this.Zwe;if(!t)return;0!==S7(t.source.assetType,t.source.ping)&&(this.Xwe=this.na.lR().start(0),await this.zwe(I7.rTt),this.na.bn("timeupdate",this.qwe),this.na.bn("seeking",this.Ywe))}async zwe(t,e){const i=this.Zwe.preplayResponse,s={};if(S(this.Xwe))return void 0;if(ol(this.Kwe)&&zd(this.Kwe,this.na.CI()-this.Xwe))return;void 0!==e&&(s.seekTime=e),void 0!==t&&(s.event=t);let n,r=this.na.CI()-this.Xwe;t===I7.rTt?r=0:t!==I7.oX&&this.jwe&&(r=_.min(r,this.jwe)),this.Kwe=r;try{var o;const t=await this.Qwe.tTt(ne({zonePrefix:i.prefix,sessionId:i.sid,currentTime:r,hasFreeWheelVideoViews:null==(o=this.Zwe)?void 0:o.source.ping.freeWheelVideoViews},s),this.zT.ep);this._o(new C7(t)),this.jwe=-1!==t.next_time?t.next_time:void 0,n=t.error}catch(t){Se(t)||(n=t.message)}finally{n&&this._o(new D7(n))}}nr(){this.jwe=void 0,this.Zwe=void 0,this.Xwe=NaN,this.Jwe=!1,this.$we=NaN,this.Kwe=void 0,this.na.vn("seeking",this.Ywe),this.na.vn("timeupdate",this.qwe),this.tye()}tye(){this.zT.np(),this.zT=new Fi}yn(){this.nr()}constructor(t,e){super(),this.Qwe=t,this.na=e,this.Xwe=NaN,this.jwe=void 0,this.Jwe=!1,this.$we=NaN,this.zT=new Fi,this.Kwe=void 0,this.qwe=async()=>{const t=this.na.CI();if(this.$we=t,this.Jwe||Sh(this.jwe)||S(this.Xwe))return;this.Xwe+this.jwe<=t&&(this.Jwe=!0,await this.zwe(),this.Jwe=!1)},this.Ywe=()=>{if(this.na.CI()===this.Xwe)return;this.Jwe&&this.tye(),this.$we=this.na.CI();const t=this.$we-(this.Xwe||0);S(t)?uh(this.zwe(I7.oX,0)):uh(this.zwe(I7.oX,t))}}};r();var L7=class{async hve(t){const e=[];for(const i of t.sources)if(Vi(i))try{const s=O7({source:i,preplayResponse:await this.iye.tTt(i)},t,this.rJ);s.src&&(s.src=Vc(s.src,i.playbackUrlParameters)),e.push(s)}catch(t){0}else e.push(i);if(0!==t.sources.length&&0===e.length)throw new m("Fatal: unable to play UplynkSources.");return ne({},t,{sources:e})}constructor(t,e){this.iye=t,this.rJ=e}};function B7(t){return!!t.sources&&(Qc(t.sources)?t.sources.some(Vi):Vi(t.sources))}function O7(t,e,i){const s=t.preplayResponse;let n;t.source.contentProtected&&s.drm&&(n={integration:"uplynk"},s.drm.fairplayCertificateURL&&(n.fairplay={certificateURL:s.drm.fairplayCertificateURL}),s.drm.widevineLicenseURL&&(n.widevine={licenseAcquisitionURL:s.drm.widevineLicenseURL}),s.drm.playreadyLicenseURL&&(n.playready={licenseAcquisitionURL:s.drm.playreadyLicenseURL}));const r=ll({src:s.playURL,contentProtection:n,useNativePlayback:t.source.useNativePlayback,hls:t.source.hls,dash:t.source.dash,seamlessSwitchStrategy:t.source.seamlessSwitchStrategy},e,i);return r.integrationData=t,r}r(),r(),r();var F7=class extends $s{ka(){return new V7(this.sd.wa)}constructor(t,e){super("nrt"),this.sd=t,this.DV=e}},V7=class extends me{constructor(t){super("adbreakbegin"),this.adBreak=t}};r();var W7=class extends $s{ka(){return new U7(this.sd.wa)}constructor(t,e){super("irt"),this.sd=t,this.DV=e}},U7=class extends me{constructor(t){super("adbreakend"),this.adBreak=t}};r();var G7=class extends $s{ka(){return new Z7(this.sd.wa)}constructor(t){super("_we"),this.sd=t}},Z7=class extends me{constructor(t){super("adbreakskip"),this.adBreak=t}};r(),r();var H7=class extends $s{ka(){return new X7(this.sd.wa)}constructor(t){super("B3t"),this.sd=t}},X7=class extends me{constructor(t){super("updateadbreak"),this.adBreak=t}},z7=class extends en{get wa(){return this.eu||(this.eu=function(t){let e;const i={get startTime(){return t.lF},get endTime(){return t.dF},get duration(){return t.ct},get ads(){return t.zc.wa},get skipOffset(){return t.ajt},set skipOffset(e){t.ajt=e},addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)}};return e=new lt(t,i),i}(this)),this.eu}get lF(){return this.bF}get dF(){return this.FA?this.bF+this.FA:void 0}sye(t){this.FA=t-this.lF;for(const e of this.zc.Zu)e.lF>t&&this.zc.rT(e);this._o(new H7(this))}get ct(){return this.FA}get Kat(){const t=this.dF;return ol(t)?new ee([this.lF,t]):ee.WB()}get zc(){return this.Oc}get nye(){return this.rye}get so(){return this.eo}get ajt(){return this.Xve?-1:this.ujt}set ajt(t){this.Xve||(this.ujt=t)}wct(t){return t>=this.lF&&(Sh(this.ct)||t<=this.lF+this.ct)}oye(t){return-1!==this.ajt&&(!!ol(this.dF)&&t-this.lF>=this.ajt)}zD(){this.Oc.Zu.forEach((t=>t.zD())),this._o(new G7(this))}aye(t){const e=ol(this.dF)&&t>=this.dF,i=this.lF<=t&&!e&&!this.so,s=this.so&&this.dF&&t>=this.dF;i&&(this.eo=!0,this._o(new F7(this,this.lF))),this.Oc.Zu.forEach((e=>e.aye(t))),s&&(this.rye=!0,this.eo=!1,this._o(new W7(this,this.dF)))}constructor(t,e,i,s,n){super(),this.bF=t,this.FA=e,this.Oc=i,this.Xve=s,this.eo=!1,this.rye=!1,this.ujt=n}};r(),r();var q7=class extends $s{ka(){return new Y7(this.trt.wa)}constructor(t,e){super("rrt"),this.trt=t,this.DV=e}},Y7=class extends me{constructor(t){super("adbegin"),this.ad=t}};r();var K7=class extends $s{ka(){return new j7(this.trt.wa)}constructor(t,e){super("ort"),this.trt=t,this.DV=e}},j7=class extends me{constructor(t){super("adend"),this.ad=t}};r(),r();var Q7=class extends $s{ka(){return new J7(this.trt.wa)}constructor(t){super("uye"),this.trt=t}},J7=class extends me{constructor(t){super("removead"),this.ad=t}},$7=class extends Pn{Lee(t){}Vee(t){this._o(new Q7(t))}constructor(){super()}};r();var ttt=class extends $s{ka(){return new ett(this.trt.wa)}constructor(t){super("F3t"),this.trt=t}},ett=class extends me{constructor(t){super("adfirstquartile"),this.ad=t}},itt=class extends $s{ka(){return new stt(this.trt.wa)}constructor(t){super("V3t"),this.trt=t}},stt=class extends me{constructor(t){super("admidpoint"),this.ad=t}},ntt=class extends $s{ka(){return new rtt(this.trt.wa)}constructor(t){super("W3t"),this.trt=t}},rtt=class extends me{constructor(t){super("adthirdquartile"),this.ad=t}},ott=class extends $s{ka(){return new htt(this.trt.wa)}constructor(t){super("cye"),this.trt=t}},htt=class extends me{constructor(t){super("adcomplete"),this.ad=t}};r();var att=class t extends en{static lye(e,i){return new t(e,i.duration,i.apiFramework||"",i.creative,i.mimeType,i.width,i.height,i.companions.map((i=>t.lye(e,i))),i.extensions,i.fw_parameters,i.events,void 0)}static dye(e,i){return new t(e,i.duration,i.apiFramework||"",i.creative,i.mimeType,i.width,i.height,i.companions.map((i=>t.dye(e,i))),i.extensions,i.fw_parameters,void 0,i.ad_id)}get wa(){return this.eu||(this.eu=function(t){let e;const i={get apiFramework(){return t.bKt},get companions(){return t.lKt.wa},get creative(){return t.fye},get duration(){return t.ct},get endTime(){return t.dF},get events(){return t.TY},get extensions(){return t.vjt},get freeWheelParameters(){return t._ye},get height(){return t.Ti},get mimeType(){return t.SY},get startTime(){return t.lF},get width(){return t.ji},addEventListener(t,i){e.bn(t,i)},removeEventListener(t,i){e.vn(t,i)}};return e=new lt(t,i),i}(this)),this.eu}get lF(){return this.bF}get dF(){return this.bF+this.FA}get ct(){return this.FA}get bKt(){return this.AKt}get fye(){return this.vye}get SY(){return this.VY}get ji(){return this.JA}get Ti(){return this.$A}get TY(){return this.Kf}get lKt(){return this.dKt}get vjt(){return this.gjt}get _ye(){return this.gye}get so(){return this.eo}get Lwe(){var t;return null!=(t=this.Kf.clickthroughs)?t:[]}aye(t){const e=this.lF<=t&&t<this.dF,i=e&&!this.so,s=!e&&this.so;i&&(this.mye=!1,this.pye=!1,this.wye=!1,this.yye=!1,this.eo=!0,this._o(new q7(this,this.lF))),s&&(this.eo=!1,this._o(new K7(this,this.dF)))}kwe(t){const e=(t-this.lF)/this.ct;!this.mye&&e>=.25&&(this.mye=!0,this._o(new ttt(this))),!this.pye&&e>=.5&&(this.pye=!0,this._o(new itt(this))),!this.wye&&e>=.75&&(this.wye=!0,this._o(new ntt(this))),!this.yye&&e>=.9999&&(this.yye=!0,this._o(new ott(this)))}zD(){this.mye=!0,this.pye=!0,this.wye=!0,this.yye=!0}yn(){this.vn("rrt",this.Aye),this.vn("ort",this.Sye)}constructor(t,e,i,s,n,r,o,h,a=[],u={},c={},l){super(),this.bF=t,this.FA=e,this.AKt=i,this.vye=s,this.VY=n,this.JA=r,this.$A=o,this.gjt=a,this.gye=u,this.Kf=c,this.QKt=l,this.dKt=new $7,this.eo=!1,this.mye=!1,this.pye=!1,this.wye=!1,this.yye=!1,this.Aye=()=>this.kwe(this.bF),this.Sye=()=>this.kwe(this.dF),this.dKt.Bee(h),this.bn("rrt",this.Aye),this.bn("ort",this.Sye)}};r(),r();var utt=class extends $s{ka(){return new ctt(this.sd.wa)}constructor(t){super("$nt"),this.sd=t}},ctt=class extends me{constructor(t){super("addadbreak"),this.adBreak=t}};r();var ltt=class extends $s{ka(){return new dtt(this.sd.wa)}constructor(t){super("Jnt"),this.sd=t}},dtt=class extends me{constructor(t){super("removeadbreak"),this.adBreak=t}},ftt=class extends Pn{Lee(t){this._o(new utt(t))}Vee(t){this._o(new ltt(t))}constructor(){super()}},_tt=class{get wa(){return this.eu||(this.eu=function(t){return{get adBreaks(){return t.D$t.wa},get currentAdBreak(){if(t.Xnt)return t.Xnt.wa},get currentAds(){return t.Xnt?t.Xnt.zc.wa:(new $7).wa},skip(){t.zD()}}}(this)),this.eu}get D$t(){return this.s0t}get Xnt(){return Do(this.s0t.Zu,(t=>t.so))}get Znt(){return this.Xnt?this.Xnt.zc.Zu.filter((t=>t.so)):[]}get Tye(){if(0===this.D$t.V||0===this.na.lR().length)return;const t=this.na.lR().end(this.na.lR().length-1);return Do(this.D$t.Zu,(e=>e.wct(t)))}get Rwe(){return this.kye}xwe(t){if(0===t.length)return;const e=ee.Cn(t);for(const t of this.s0t.Zu.slice())ol(t.dF)&&e.Sn(0)>t.dF&&this.s0t.rT(t)}Awe(t){const e=!function(t){return ol(t.breakOffsets)}(t),i=e?this.awe.Hwe:0;for(const s of t.breaks){if(0===s.ads.length)continue;let t=s.timeOffset+i;const n=new $7;let r=0;for(const i of s.ads){const s=e?att.dye(t,i):att.lye(t,i);n.QO(s),t+=s.ct,r+=s.ct}const o=s.timeOffset+i,h=e?void 0:s.duration,a=new z7(o,h,n,e,this.Eye);e&&this.xye.push({eKt:a,yRt:o+r}),this.s0t.QO(a)}}Iye(t){const e=this.Tye;e&&e.sye(t+this.awe.Hwe)}Twe(t){this.Rye=t,this.s0t.Zu.forEach((e=>e.aye(t)))}zD(){const t=this.Rye,e=this.Xnt;t&&e&&e.oye(t)&&e.zD()}skipAd(t){this.zD()}Cwe(t,e){const i=[];for(const s of this.D$t.Zu)!s.nye&&s.lF>=t&&s.lF<e&&i.push(s);return i}destroy(){this.na.vn("timeupdate",this.Cye),this.awe.vn("Uwe",this.Pye)}resetSource(){var t;for(const t of this.D$t.Zu){for(const e of t.zc.Zu)e.Ro();t.Ro()}this.D$t.Gb(),null==(t=this.Dye)||t.removeAllAds(),this.Rye=void 0,this.xye=[]}Nye(t){return Do(this.Dye.ads,(e=>e.creativeId===t.fye))}constructor(t,e,i,s){var n;this.xye=[],this.Dye=void 0,this.Mye=t=>(this.Dye=t,this),this.Pye=t=>{t.jE.ads&&this.Awe(t.jE.ads),t.jE.currentBreakEnd&&this.Iye(t.jE.currentBreakEnd)},this.Cye=t=>{if(0===this.xye.length||0===this.na.lR().length)return;const e=this.na.lR().end(this.na.lR().length-1);for(const t of this.xye.slice())ol(t.eKt.ct)?_e(this.xye,t):t.yRt<e&&(t.eKt.sye(t.yRt),_e(this.xye,t))},this._d=t=>{var e;const i=null==(e=this.Dye)?void 0:e.createAdBreak({timeOffset:t.sd.lF,maxDuration:t.sd.ct,customData:t.sd});t.sd.bn("_we",this.Lye);for(const e of t.sd.zc.Zu){var s,n;const r={type:"linear",timeOffset:e.lF,duration:e.ct,creativeId:e.fye,skipOffset:t.sd.ajt,clickThrough:null==(s=e.Lwe)?void 0:s[0],customData:e};null==(n=this.Dye)||n.createAd(r,i),e.bn("rrt",this.p8t),e.bn("ort",this.Bye),e.bn("F3t",this.Oye),e.bn("V3t",this.Fye),e.bn("W3t",this.Vye),e.bn("cye",this.Jme)}},this.Lye=t=>{for(const s of t.sd.zc.Zu){const t=this.Nye(s);var e,i;if(t)null==(e=this.Dye)||e.beginAd(t),null==(i=this.Dye)||i.skipAd(t)}},this.xd=t=>{for(const e of t.sd.zc.Zu)e.Ro();t.sd.Ro()},this.p8t=t=>{const e=this.Nye(t.trt);var i;e&&(null==(i=this.Dye)||i.beginAd(e))},this.Bye=t=>{const e=this.Nye(t.trt);var i;e&&(null==(i=this.Dye)||i.endAd(e))},this.Oye=t=>{const e=this.Nye(t.trt);var i;e&&(null==(i=this.Dye)||i.updateAdProgress(e,.25))},this.Fye=t=>{const e=this.Nye(t.trt);var i;e&&(null==(i=this.Dye)||i.updateAdProgress(e,.5))},this.Vye=t=>{const e=this.Nye(t.trt);var i;e&&(null==(i=this.Dye)||i.updateAdProgress(e,.75))},this.Jme=t=>{const e=this.Nye(t.trt);var i;e&&(null==(i=this.Dye)||i.updateAdProgress(e,1))},this.na=t,this.awe=e,this.s0t=new ftt,this.s0t.bn("$nt",this._d),this.s0t.bn("Jnt",this.xd),this.Eye=i,this.kye=s,t.bn("timeupdate",this.Cye),this.awe.bn("Uwe",this.Pye),null==(n=this.na.zc)||n.Knt(vu.UPLYNK,this.Mye)}};r(),r(),r();var vtt=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.G=1]="G",t[t.PG=2]="PG",t[t.PG_13=3]="PG_13",t[t.R=4]="R",t[t.NC_17=5]="NC_17",t[t.X=6]="X",t[t.NOT_RATED=7]="NOT_RATED",t}({}),gtt=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.TV_Y=1]="TV_Y",t[t.TV_Y7=2]="TV_Y7",t[t.TV_G=3]="TV_G",t[t.TV_PG=4]="TV_PG",t[t.TV_14=5]="TV_14",t[t.TV_MA=6]="TV_MA",t[t.NOT_RATED=7]="NOT_RATED",t}({}),mtt=class t{static Wye(e,i,s){const n=new Vm(e.rating_flags);return new t(i,s,e.duration,Boolean(e.audio_only),e.boundary_details,Boolean(e.error),e.tv_rating,e.max_slice,e.thumb_prefix,e.slice_dur,e.movie_rating,e.owner,e.meta,e.rates,e.thumbs,e.poster_url,e.default_poster_url,e.desc,n.Mb(1),n.Mb(2),n.Mb(4),n.Mb(8),e.external_id,Boolean(e.is_ad),e.asset)}get wa(){return this.eu||(this.eu=function(t){return{startTime:t.lF,endTime:t.dF,duration:t.ct,audioOnly:t.Uye,boundaryDetails:t.Gye,error:t.lt,tvRating:t.Zye,maxSlice:t.Hye,thumbPrefix:t.Xye,sliceDuration:t.zye,movieRating:t.qye,ownerId:t.Yye,metadata:t.pW,rates:t.Kye,thumbnailResolutions:t.jye,posterUrl:t.Qye,defaultPosterUrl:t.Jye,description:t.QN,hasAdultLanguage:t.$ye,hasSexualSituations:t.tbe,hasViolence:t.ebe,hasDrugSituations:t.ibe,externalId:t.sbe,isAd:t.nbe,assetId:t.rbe}}(this)),this.eu}constructor(t,e,i,s,n,r,o,h,a,u,c,l,d,f,_,v,g,m,p,w,y,b,A,S,T){this.lF=t,this.dF=e,this.ct=i,this.Uye=s,this.Gye=n,this.lt=r,this.Zye=o,this.Hye=h,this.Xye=a,this.zye=u,this.qye=c,this.Yye=l,this.pW=d,this.Kye=f,this.jye=_,this.Qye=v,this.Jye=g,this.QN=m,this.$ye=p,this.tbe=w,this.ebe=y,this.ibe=b,this.sbe=A,this.nbe=S,this.rbe=T}};var ptt=ze({duration:mt,offset:mt}),wtt=ze({c3:ptt}),ytt=ze({c7:ptt}),btt=ze({halftime:ptt}),Att=eR($I(gtt)),Stt=eR($I(vtt)),Ttt=ze({width:Ae(Fh,mt),prefix:ul,bw:mt,bh:mt,height:Ae(Fh,mt)}),ktt=ze({audio_only:mt,boundary_details:Ae(Fh,fc(Ae(wtt,ytt,btt))),error:mt,tv_rating:Att,max_slice:mt,thumb_prefix:ul,slice_dur:mt,movie_rating:Stt,owner:ul,meta:KI,rates:fc(mt),thumbs:fc(Ttt),poster_url:ul,duration:mt,default_poster_url:ul,desc:ul,rating_flags:mt,external_id:ul,is_ad:mt,asset:ul}),Ett=class{async tTt(t,e,i,s){const n=function(t,e,i){if(w7.fG(e))return[xtt(t,e,i)];if(fc(w7).fG(e))return e.map((e=>xtt(t,e,i)));if(y7.fG(e)){return(Qc(e.externalId)?e.externalId:[e.externalId]).map((s=>xtt(t,"ext/"+e.userId+"/"+s,i)))}throw new g("Invalid asset id")}(t,e,s),r=n.map((t=>K((()=>this.Wwe(t)),i)));return(await Promise.all(r)).filter(ol)}async Wwe(t){const e=this.WW.eE({EE:Ce.GET,Xu:t,tE:Te.xk}),i=await e,s=await i.$k();return ktt.fG(s)||ktt.vG(s,"AssetInfoResponse"),s}constructor(t){this.WW=t}};function xtt(t,e,i){return i?t+"/player/assetinfo/"+e+".json?pbs="+i:t+"/player/assetinfo/"+e+".json"}r(),r();var Itt=class extends $s{ka(){return new Rtt(this.ld.wa)}constructor(t){super("obe"),this.ld=t}},Rtt=class extends me{constructor(t){super("removeasset"),this.asset=t}};r();var Ctt=class extends $s{ka(){return new Ptt(this.ld.wa)}constructor(t){super("hbe"),this.ld=t}},Ptt=class extends me{constructor(t){super("addasset"),this.asset=t}},Dtt=class extends Pn{Awe(t,e){let i,s=0;for(const n of t){i=s+n.duration;for(const t of e)s<=t.lF&&t.lF<i&&(i+=t.ct||0);this.QO(mtt.Wye(n,s,i)),s=i}}Lee(t){this._o(new Ctt(t))}Vee(t){this._o(new Itt(t))}constructor(){super()}};r(),r();var Ntt=class extends $s{ka(){return new Mtt(this.jE)}constructor(t){super("abe"),this.jE=t}},Mtt=class extends me{constructor(t){super("preplayresponse"),this.response=t}};r();var Ltt=class extends $s{ka(){return new Btt(this.jE)}constructor(t){super("ube"),this.jE=t}},Btt=class extends me{constructor(t){super("assetinforesponse"),this.response=t}},Ott=class extends en{Fwe(t){t&&this._o(new Ntt(Fa(t)))}bwe(t){t.forEach((t=>this._o(new Ltt(t))))}get wa(){return this.eu||(this.eu=this.ka()),this.eu}ka(){let t;const e=this,i={get ads(){return e.nwe.wa},get assets(){return e.rwe.wa},addEventListener(e,i){t.bn(e,i)},removeEventListener(e,i){t.vn(e,i)}};return t=new lt(e,i),i}constructor(t,e,i){super(),this.nwe=t,this.rwe=e,this.awe=i,i.bn("Uwe",this.Ds),i.bn("Gwe",this.Ds)}},Ftt=class{cbe(t,e){const i=new b7(t.mI),s=new R7(t.mI),n=function(t){if(t.uplynk&&ol(t.uplynk.defaultSkipOffset))return function(t){return Vr(t)?t:-1}(t.uplynk.defaultSkipOffset);return-1}(e),r=function(t){var e,i;const s=null!=(i=null==(e=t.uplynk)?void 0:e.onSeekOverAd)?i:void 0;return function(t){if(!t)return"play-none";switch(t.toLowerCase()){case"play-all":return"play-all";case"play-none":default:return"play-none";case"play-last":return"play-last"}}(s)}(e),o=new M7(s,t),h=new L7(i,e),a=new _tt(t,o,n,r),u=new Ett(t.mI),c=new Dtt,l=new Ott(a,c,o);return new u7(t,o,h,a,l,u,c)}};zh((function(t){return class extends t{hwe(t){super.Ca(t)}uwe(t,e){return super.prt(t,e)}Nwe(t){super.DI(t)}BI(){var t;return null!=(t=this.lbe.lt)?t:super.BI()}FI(){var t;return null!=(t=this.lbe.OI)?t:super.FI()}DI(t,e){this.lbe.DI(t)}Ca(t){this.lbe.Ca(t)}prt(t,e){return this.lbe.prt(t,e)}ka(){const t=this.lbe.wa;return Qr(super.ka(),{get uplynk(){return t}})}yn(){this.lbe.yn(),super.yn()}constructor(t,e){super(t,e),this.lbe=(new Ftt).cbe(this,e)}}}),Hh.Cnt),r(),r(),r(),r();var $a=function(t){return t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error",t}({});r();var Vtt=class extends Vs{ka(){return qo(this)}get zQt(){return ji.$$t}get lF(){return this.bF}get XYt(){return this.RKt}constructor(t,e,i,s){super(t,e),this.RKt=s,this.bF=i}};r();var Wtt=class extends ps{get ZOt(){return this.dbe}get zQt(){return ji.$$t}constructor(t,e,i){if(super(e),this.a3t=t,this.u3t=t,i){const t=new Date(i);zf(t)&&(this.dbe=t)}}},Utt=class{kC(){this.na.bn(Zc.uB,this.fO),this.na.bn(ns.Ky,this.BMt),this.na.bn(ns.ho,this.zzt),this.na.bn(ns.ib,this.Ge),this.na.bn(ns.Ly,this.Ah),this.na.bn(ns._b,this.pd),this.na.bn(ns.vb,this.U1t),this.na.bn(mc.MODE_CHANGE,this.fbe)}SC(){this.na.vn(Zc.uB,this.fO),this.na.vn(ns.Ky,this.BMt),this.na.vn(ns.ho,this.zzt),this.na.vn(ns.ib,this.Ge),this.na.vn(ns.Ly,this.Ah),this.na.vn(ns._b,this.pd),this.na.vn(ns.vb,this.U1t),this.na.vn(mc.MODE_CHANGE,this.fbe)}get _be(){return this.vbe}get Znt(){const t=this._be;if(!t)return[];const e=[],i=this.gbe();for(const s of t.zc)i>=s.lF&&this.JMt<=s.lF+s.ct&&e.push(s);return e}gbe(){return this.na.CI()-this.mbe}pbe(){if(this.wbe)return;if(this.na.jd()!==1/0)return void(0===this.ybe.length&&(this.wbe=this.bbe()));const t=()=>{var t;null==(t=this.Abe)||t.Km(),this.Abe=void 0,this.wbe=void 0};this.Abe=new Fi,this.wbe=this.Sbe(this.Abe.ep).catch(this.T9).then(t,t)}async Tbe(){const t=_.min(1e3*2**this.kbe,3e4);try{var e;await Ze(t,null==(e=this.Abe)?void 0:e.ep),this.kbe++}catch(t){if(Se(t))return void(this.kbe=0)}this.pbe()}async Sbe(t){for(;Io(t),!this.na.JI;){const e=As.Wm()-this.Ebe;if(e>1e4)await this.bbe(t),this.Ebe=As.Wm(),this.kbe=0;else{const i=1e4-e;await Ze(i,t)}}}xbe(t){const e=t.ZOt;if(e&&this.na.kI&&0===this.mbe&&!this.Ibe&&0!==_.floor(this.na.lR().start(0))){const i=(this.na.kI.getTime()-e.getTime())/1e3,s=this.na.CI()-t.LOt;this.mbe=s-i}}async bbe(t){try{const e=await this.na.mI.eE({Xu:this.Rbe}),i=await e.Nk(t);if(0===i.avails.length)return void(0!==this.ybe.length&&(this.ybe=[]));if(i.avails.length===this.ybe.length&&i.avails[0].startTimeInSeconds===this.ybe[0].LOt)return void this.xbe(this.ybe[0]);const s=[];for(const t of i.avails){const e=new Wtt(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const i of t.ads){const t=new Vtt(e,Ls.mQt,i.startTimeInSeconds,i.trackingEvents);t.y3t(i.adId,i.width,i.height,i.durationInSeconds,[],i.skipoffset),e.f3t(t)}s.push(e),this.xbe(e)}this.ybe=Le(s,((t,e)=>t.LOt-e.LOt))}catch(t){throw ih(t),new m("Failed to poll MediaTailor tracking events")}}Cbe(){var t;null==(t=this.Abe)||t.np(),this.Abe=void 0,this.wbe=void 0,this.Ebe=-1/0}Pbe(){if(0===this.ybe.length)return;const t=this.ybe[this.ybe.length-1],e=this.gbe();if(t.LOt+t.I$t<this.JMt){var i;this.vbe&&(null==(i=this.na.zc)||i._o(new $h(this.vbe)),this.vbe=void 0)}else{for(const t of this.ybe){const i=t.LOt;if(!(i+t.I$t<this.JMt)&&(i<=e&&i+t.I$t>this.JMt)){var s;if(this._be===t)return;return this.vbe=t,void(null==(s=this.na.zc)||s._o(new XF(this.vbe)))}}var n;if(this.vbe)null==(n=this.na.zc)||n._o(new $h(this.vbe)),this.vbe=void 0}}Dbe(){const t=this.Znt;if(0===t.length)return;let e=[];for(const i of t){const t=i.XYt.filter((t=>fh(this.Nbe,t.eventType)));e=e.concat(t)}for(const t of e)this.Mbe(t.startTimeInSeconds)&&(t.eventType===$a.COMPLETE&&this.Lbe($a.ENGAGED_VIEW),this.Bbe(t))}Obe(t,e){return e.XYt.filter((e=>Th(e.eventType,t)))[0]}Lbe(t){const e=this.Znt;if(0===e.length)return;const i=this.Obe(t,e[0]);i&&this.Bbe(i)}Bbe(t){this.bve(t.eventType);for(const e of t.beaconUrls){const t={EE:Ce.GET,Xu:e,Vk:"",tE:Te.xk};0,uh(this.Fbe(t))}}bve(t){let e;const i=this.Znt;switch(t){case $a.START:e=new Cn(i[i.length-1],this.na.CI());break;case $a.COMPLETE:e=new Qn(i[0],this.na.CI());break;case $a.FIRST_QUARTILE:e=new _s(i[0],this.na.CI());break;case $a.MID_POINT:e=new oe(i[0],this.na.CI());break;case $a.THIRD_QUARTILE:e=new ks(i[0],this.na.CI())}var s;void 0!==e&&(null==(s=this.na.zc)||s._o(e))}async Fbe(t){const e=await this.na.mI.eE(t);e.Jk}Mbe(t){const e=this.gbe();return t>=this.JMt&&t<e}yn(){this.SC(),this.Cbe(),this.JMt=-1}constructor(t,e,i){this.Ebe=-1/0,this.vbe=void 0,this.mbe=0,this.ybe=[],this.lpe=!1,this.NK=!1,this.JMt=-1,this.Abe=void 0,this.wbe=void 0,this.kbe=0,this.fO=()=>{this.pbe()},this.zzt=()=>{this.Lbe($a.RESUME)},this.BMt=()=>{this.Cbe(),this.Lbe($a.PAUSE)},this.Ge=()=>{this.Cbe(),this.JMt=-1},this.Ah=()=>{this.Cbe()},this.pd=()=>{-1===this.JMt&&(this.JMt=this.gbe()),this.Pbe(),this.Dbe(),this.JMt=this.gbe()},this.U1t=()=>{if(this.lpe!==this.na.qI){this.lpe=this.na.qI;const t=this.lpe?$a.MUTE:$a.UNMUTE;this.Lbe(t)}},this.fbe=()=>{if(this.NK!==this.na.cs()){this.NK=this.na.cs();const t=this.NK?$a.FULL_SCREEN:$a.EXIT_FULL_SCREEN;this.Lbe(t)}},this.T9=t=>{Se(t)||(this.Lbe($a.ERROR),uh(this.Tbe()))},this.Nbe=[$a.START,$a.FIRST_QUARTILE,$a.MID_POINT,$a.THIRD_QUARTILE,$a.COMPLETE,$a.IMPRESSION,$a.CREATIVE_VIEW],this.na=t,this.Rbe=e,this.Ibe=i,this.kC()}};zh((function(t){return class extends t{Ca(t){return this.Vbe&&(this.Vbe.yn(),this.Vbe=void 0,this.VEt()),super.Ca(t)}async prt(t,e){if(!t||!function(t){return t.sources.some((t=>t.integration===UT.MEDIATAILOR))}(t))return super.prt(t,e);try{const i=await this.Wbe(t,e);this.Ube=new v2(this),await super.prt(i,e)}catch(t){this.uH(new Z(Ci.MANIFEST_LOAD_ERROR,t.message,t))}}iR(t){var e;(null==(e=this.Ube)?void 0:e.inAdBreak)||super.iR(t)}DI(t,e){var i;(null==(i=this.Vbe)?void 0:i._be)||super.DI(t,e)}BI(){var t;return null!=(t=this.bZ)?t:super.BI()}FI(){var t;return null!=(t=this.AZ)?t:super.FI()}uH(t){this.bZ=Zs(t),this.AZ=t,this._o(new Pi(t))}VEt(){this.bZ=void 0,this.AZ=void 0}async Wbe(t,e){const i=[];for(const s of t.sources){if(!jT(s)){i.push(s);continue}const t=s;if(!t.src){i.push(s);continue}const n=await this.Gbe(t,e);Io(e);const r=ne({},t,{integration:void 0,src:n});i.push(r)}const s=Fa(t);return s.sources=i,s}async Gbe(t,e){const i=t.src||"",s=i.match(/.+?(?=\/v1\/)/);if(!s)throw new m("Could not find MediaTailor session initialization url");const n=s[0],r=Xa(i,"?ads."),o=r?{Xu:i,tE:Te.xk}:{Xu:i,EE:Ce.POST,Vk:JSON.stringify({adsParams:t.adsParams}),tE:Te.xk},h=await K((()=>this.Zbe(o,e)),e);let a;try{if(a=n+h.manifestUrl,!r){const t=n+h.trackingUrl,e=zT(a);this.Vbe=new Utt(this,t,e)}}catch(t){throw new m("Something went wrong parsing the MediaTailor session initialization response")}return a}async Zbe(t,e){try{const i=await this.mI.eE(t);return await i.Nk(e)}catch(t){throw ih(t),new m("Failed to initialize MediaTailor session manifest")}}yn(){var t;this.Vbe&&(this.Vbe.yn(),this.Vbe=void 0),this.VEt(),null==(t=this.Ube)||t.destroy(),this.Ube=void 0,super.yn()}constructor(t,e){super(t,e),this.Vbe=void 0,this.bZ=void 0,this.AZ=void 0,this.Ube=void 0}}}),Hh.Pnt),r(),r(),r(),r(),r();var Aa=function(t){return t[t.Hbe=0]="Hbe",t[t.uB=1]="uB",t[t.rX=2]="rX",t[t.Xbe=3]="Xbe",t[t.zbe=4]="zbe",t[t.qbe=5]="qbe",t[t.fa=6]="fa",t}({});r();var Gtt=class extends So{get BC(){}get Rt(){return this.qe}set Rt(t){this.nF(t)}get wa(){var t;return null!=(t=this.eu)?t:this.eu=xi(this)}get o(){return String(this.lu.componentTag)||"hbbtvaudiotrack"}get Lt(){return this.O5}get Ch(){return this.iF}get gs(){return""}get LE(){return this.Rt?"enabled":"disabled"}set LE(t){this.nF("enabled"===t)}get VC(){return this.jO}get WC(){}set WC(t){}get OC(){return this.eF}nF(t){this.qe=t,t?this._Lt.Ybe(this.lu):this._Lt.Kbe(this.lu)}constructor(t,e,i,s,n=!1){super(),this.eF=Lt(),this.jO=new tl,this.lu=t,this.iF=e,this.O5=i,this.qe=n,this._Lt=s}};r(),r(),r();var Ztt=function(t){return t.Ww="urn:dvb:casystemid:19219",t.Uw="urn:dvb:casystemid:19156",t}({}),Htt=function(t){return t.Ww="application/vnd.ms-playready.initiator+xml",t.Uw="application/widevine+xml",t}({});function Xtt(t,e,i){switch(t){case"urn:dvb:casystemid:19219":return function(t){return'<?xml version="1.0" encoding="utf-8"?><PlayReadyInitiator xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols/"><LicenseServerUriOverride><LA_URL>'+(null!=t?t:"")+"</LA_URL></LicenseServerUriOverride></PlayReadyInitiator>"}(e);case"urn:dvb:casystemid:19156":if(!i)throw new m("Content URL is needed for Widevine license request");return function(t,e){return'<?xml version="1.0" encoding="utf-8"?><WidevineCredentialsInfo xmlns="http://www.smarttv-alliance.org/DRM/widevine/2012/protocols/"><ContentURL>'+Q$(null!=e?e:"")+"</ContentURL><DeviceID></DeviceID><StreamID></StreamID><ClientIP></ClientIP><DRMServerURL>"+Q$(null!=t?t:"")+"</DRMServerURL><DRMAckServerURL></DRMAckServerURL><DRMHeartBeatURL></DRMHeartBeatURL><DRMHeartBeatPeriod></DRMHeartBeatPeriod><UserData></UserData><Portal></Portal><StoreFront></StoreFront><BandwidthCheckURL></BandwidthCheckURL><BandwidthCheckInterval></BandwidthCheckInterval></WidevineCredentialsInfo>"}(e,i);default:throw new m("DRM key system is not supported")}}var ztt=class extends _B{jbe(t){this.Qbe(),this.Cu=t}async Jbe(t){if(!t.CZ.length)return void this.Qbe();if(!this.Cu)throw new m("The OIPF DRM agent has to be attached to the DOM");let e;this.$be||(this.$be=h.createElement("object"),this.$be.type="application/oipfDrmAgent",this.Cu.appendChild(this.$be),this.$be.onDRMMessageResult=this.tAe,this.$be.onDRMRightsError=this.eAe,this.iAe=h.createElement("object"),this.iAe.type="application/oipfCapabilities",this.Cu.appendChild(this.iAe));for(const i of t.CZ){let s,n,r;if(i._T===jg)s=Ztt.Ww,n=Htt.Ww,r=Xtt(Ztt.Ww,i.nZ);else{if(i._T!==Qg)continue;s=Ztt.Uw,n=Htt.Uw,r=Xtt(Ztt.Uw,i.nZ,t.zC)}try{return await this.Git(n,r,s),void this._o(new oB)}catch(t){e=t}}e&&this._o(new rB(e))}Km(){return this.sAe=void 0,this.Cu=void 0,super.Km()}Git(t,e,i){var s,n;return this.sAe=new is,this.nAe=null==(n=this.$be)||null==(s=n.sendDRMMessage)?void 0:s.call(n,t,e,i),this.nAe||null==this.sAe.Hb||this.sAe.Hb.call(this.sAe,new kh(Ci.CONTENT_PROTECTION_INTERNAL_ERROR,"No DRM message returned by OIPF DRM agent")),this.sAe.Xb}rAe(t){switch(t){case 5:return Ci.CONTENT_PROTECTION_NOT_SUPPORTED;case 2:case 1:case 3:case 4:case 6:return Ci.CONTENT_PROTECTION_INTERNAL_ERROR;default:return Ci.CONTENT_PROTECTION_ERROR}}oAe(t){switch(t){case 2:return"The DRM agent was unable to complete the request";case 3:return"The specified MIME type is unknown for the specified DRM system";case 4:return"User consent is needed for that action";case 5:return"The specified DRM System is unknown";case 6:return"The license message has the wrong format";default:return"Unspecified error occurred"}}hAe(t){return 0===t?Ci.CONTENT_PROTECTION_LICENSE_ERROR:1===t?Ci.CONTENT_PROTECTION_LICENSE_INVALID:Ci.CONTENT_PROTECTION_ERROR}aAe(t){switch(t){case 0:return"No license, consumption of the content is blocked";case 1:return"Invalid license, consumption of the content is blocked";case 2:return"Valid license, consumption of the content is unblocked";default:return"Unknown error occurred"}}Qbe(){this.$be&&(We(this.$be),this.$be=void 0),this.iAe&&(We(this.iAe),this.iAe=void 0)}async H9(t,e,i){}constructor(...t){super(...t),this.$be=void 0,this.iAe=void 0,this.Cu=void 0,this.nAe=void 0,this.sAe=void 0,this.tAe=(t,e,i)=>{var s,n,r,o;if(0===i)return void(null==(o=this.sAe)||null==(r=o.Zb)||r.call(o,t));const h=this.rAe(i),a=this.oAe(i),u=new kh(h,a);null==(n=this.sAe)||null==(s=n.Hb)||s.call(n,u)},this.eAe=(t,e,i,s)=>{const n=this.hAe(t),r=this.aAe(t),o=new kh(n,r);this._o(new rB(o))}}};r();var qtt=class{get cR(){return ee.VB(0,this.aO.ct)}get rR(){return hi.xH}set rR(t){}get kd(){return this.FT}ZJ(t){return!1}XJ(t){return m5.resolve(void 0)}async Jbe(t){await this.zJ.Jbe(this.FT)}Km(){return m5.resolve(void 0)}constructor(t,e,i){this.FT=t,this.aO=e,this.zJ=i}},Ytt=class extends So{get SI(){return ee.WB()}get kI(){}get EZ(){}get Hu(){return this.Ku}get cR(){var t,e;return null!=(e=null==(t=this.kZ)?void 0:t.cR)?e:ee.WB()}get dR(){return this.FH}get T5(){return!1}get ZI(){return!1}get vO(){return ne({},rN)}get lt(){return this.bZ}get y5(){return!1}get Sa(){return this.ea}get ttt(){return!0}get f5(){return!1}get ER(){return!0}set ER(t){}get Wl(){return this.qH}get nt(){return this.e7}get A8(){return this.LH}get WZ(){return this.ta}stt(t){this.zJ.jbe(t),this.Cit.stt(t)}l$(t){for(const e of t)if(e.zw===De.zW)return e}async $n(t){if(this.kZ)throw new m("Already loaded a media source");if(t.zw===De.zW)return this.kZ=new qtt(t,this,this.zJ),await this.kZ.Jbe(t),this.kZ;throw new m("Unsupported media source configuration for HbbTV")}async uAe(t){await this.cAe()}async DR(){await this.cAe()}wZ(t){}async nr(){this.kZ=void 0,this.lAe=void 0}async Km(){await this.nr(),this.Hl.yn(),this.e7.yn(),this.Cit.yn(),this.Pit.yn(),this.zJ.vn(eu,this.Ds),await this.zJ.Km()}ge(){this.LH=!0,this.Cit.ge()}be(){this.LH=!1,this.Cit.be()}BZ(){return!1}FZ(t,e,i,s,n){throw new m("Adding native sideloaded text tracks is not supported on HbbTV")}Q7(){}J7(){}itt(){}zI(){return{WO:0,UO:0,GO:0}}FR(){}UZ(t){throw new m("Adding custom text tracks is not supported on HbbTV")}IR(){}ZR(t,e,i,s,n,r,o,h,a){const u=new Is(t,e,i,s,n,r,o,a,h);return this.Hl.tt(u),this.i7.tt(u),u}GZ(){for(const t of this.Hl.mC.slice())t.yn();this.Hl.nr()}ZW(t){this.Hl.it(t),this.i7.it(t)}dAe(){const t=h.getElementsByTagName("object");for(let e=0;e<t.length;e++){const i=t.item(e);if("video/broadcast"===i.type){const t=i;return t.onPlayStateChange=this.fAe,0===t.playState&&(null==t.bindToCurrentChannel||t.bindToCurrentChannel.call(t)),t}}}cAe(){var t,e;if(!this._Ae||3===this._Ae.playState||0===this._Ae.playState)return Promise.resolve("");if(null==(t=this.lAe)?void 0:t.Xb)return null==(e=this.lAe)?void 0:e.Xb;this.lAe=new is;try{null==this._Ae.stop||this._Ae.stop.call(this._Ae)}catch(t){As.uw("Unable to stop broadcast for HbbTV",t),this.lAe.Hb(new m("Unable to stop broadcast for HbbTV"))}return this.lAe.Xb}constructor(t,e){super(),this.Ku=t,this.qH=e,this.ea=new ot,this.ta=new ya,this.Hl=new ca,this.kZ=void 0,this.FH=!1,this.bZ=void 0,this.eU=Wt.TO,this.LH=!0,this.lAe=void 0,this.fAe=()=>{var t,e,i,s;(null==(t=this._Ae)?void 0:t.playState)&&((null==(e=this.lAe)?void 0:e.Xb)||2!==this._Ae.playState||this.cAe().catch(M),3===this._Ae.playState&&(null==(s=this.lAe)||null==(i=s.Zb)||i.call(s,String(this._Ae.playState)),this.lAe=void 0))},this.zJ=new ztt(this),this.zJ.bn(eu,this.Ds),this.e7=new uu([this.Hl]),this.i7=new KL(this),this.Cit=new DB,this.Pit=new $O(this.Cit.we,this.Hu,this.nt,this.Wl,this.Sa,this.WZ),this._Ae=this.dAe(),this.cAe().catch(M)}},Ktt=class extends Ytt{get SZ(){}get ht(){return this.LO}get rt(){return this.FO}get tR(){return this.UH}set tR(t){this.UH=t,this.JI||this.vAe.play(t)}get qI(){return this.vAe.muted}set qI(t){this.vAe.muted=t}get yR(){var t,e;return(null!=(e=null!=(t=this.vAe.volume)?t:null==this.vAe.getVolume?void 0:this.vAe.getVolume.call(this.vAe))?e:100)/100}set yR(t){null==this.vAe.setVolume||this.vAe.setVolume.call(this.vAe,100*t)}get RI(){return this.vAe.playPosition?this.vAe.playPosition/1e3:0}get ct(){return!this.vAe.playTime||this.vAe.playTime<0?1/0:this.vAe.playTime/1e3}get MI(){return this.vAe.playState===Aa.qbe}get Ti(){return this.vAe.offsetHeight*As.Ys.pp}get ji(){return this.vAe.offsetWidth*As.Ys.pp}get JI(){return this.vAe.playState===Aa.rX}get sR(){return ee.WB()}get aR(){return this.g5}get vR(){return 0}get pR(){return 0}stt(t){super.stt(t),t.appendChild(this.vAe)}async $n(t){if(t.zw===De.zW){const e=await super.$n(t);return await this.uAe(t),this.vAe.onPlayStateChange=this.gAe,e}throw new m("Unsupported media source configuration for HbbTV")}async uAe(t){this.vAe.type=Au(t.zC),this.vAe.data=t.zC,await super.uAe(t)}async DR(){await super.DR(),this.vAe.play(this.UH),this._o(new he(this.RI))}PR(){this.vAe.play(0),this._o(new nl(this.RI))}Db(t,e,i){this.vAe.seek(1e3*t),this.FH=!0,this._o(new Al(this.RI))}async nr(){void 0!==this.kZ&&this.vAe.stop(),this.mAe&&(As.dw(this.mAe),this.mAe=void 0),await super.nr(),Or(this.vAe),this.vAe.data&&this.vAe.removeAttribute("data"),this.LO.nr(),this.FO.nr()}async Km(){await super.Km(),We(this.vAe)}ge(){super.ge(),this.vAe.style.display="block"}be(){super.be(),this.vAe.style.display="none"}Ybe(t){const e=this.pAe(t);if(!e)throw new m("Selected track does not exist on HbbTV");null==this.vAe.selectComponent||this.vAe.selectComponent.call(this.vAe,e)}Kbe(t){const e=this.pAe(t);if(!e)throw new m("Selected track does not exist on HbbTV");null==this.vAe.unselectComponent||this.vAe.unselectComponent.call(this.vAe,e)}pAe(t){var e;const i=null!=(e=null==this.vAe.getComponents?void 0:this.vAe.getComponents.call(this.vAe,t.type))?e:this.wAe();return this.yAe(i,t)}bAe(t){var e;const i=null!=(e=null==this.vAe.getCurrentActiveComponents?void 0:this.vAe.getCurrentActiveComponents.call(this.vAe,1))?e:this.wAe();this.LO.nr();for(let e=0;e<t.length;e++){const s=t.item(e);this.LO.tt(new Gtt(s,s.language,this.LO.V?cn.cDt:cn.lDt,this,this.AAe(i,s)))}}SAe(t){var e;const i=null!=(e=null==this.vAe.getCurrentActiveComponents?void 0:this.vAe.getCurrentActiveComponents.call(this.vAe,0))?e:this.wAe();this.FO.nr();for(let e=0;e<t.length;e++){const s=t.item(e);this.FO.tt(new Gtt(s,String(s.aspectRatio),this.FO.V?Eo.cDt:Eo.lDt,this,this.AAe(i,s)))}}wAe(){return{length:0,item:t=>{}}}AAe(t,e){return void 0!==this.yAe(t,e)}yAe(t,e){for(let i=0;i<t.length;i++){const s=t.item(i);if(this.TAe(s,e))return s}}TAe(t,e){return t.pid===e.pid&&t.componentTag===e.componentTag&&t.type===e.type&&t.encoding===e.encoding&&t.encrypted===e.encrypted}kAe(t){switch(t){case 0:return di.SRC_NOT_SUPPORTED;case 1:case 5:case 6:return di.NETWORK;default:return di.DECODE}}constructor(t,e,i){super(e,i),this.vAe=t,this.UH=1,this.LO=new an,this.FO=new an,this.g5=Wt.TO,this.EAe=void 0,this.mAe=void 0,this.gAe=()=>{if(!this.vAe.playState)return;this.eU=this.g5,this.xAe=this.IAe,this.IAe=this.vAe.playState;const t=this.ct;switch(t!==this.EAe&&(this._o(new yn(t)),this.EAe=t),this.mAe&&this.IAe!==Aa.uB&&(As.dw(this.mAe),this.mAe=void 0),this.IAe){case Aa.Xbe:this.g5=Wt.TO;break;case Aa.zbe:if(this.xAe===Aa.Xbe){var e;const t=null!=(e=null==this.vAe.getComponents?void 0:this.vAe.getComponents.call(this.vAe,1))?e:this.wAe();var i;const s=null!=(i=null==this.vAe.getComponents?void 0:this.vAe.getComponents.call(this.vAe,0))?i:this.wAe();if(0===t.length&&0===s.length)break;this.bAe(t),this.SAe(s)}this.g5=Wt.Xn;break;case Aa.uB:this.FH&&(this.FH=!1,this._o(new Be(this.RI))),this._o(new Xr(this.RI)),this.g5=Wt.EO,this.mAe=As.lw(this.RAe,250);break;case Aa.fa:this.g5=Wt.TO,this._o(new tu(new iu(this.kAe(this.vAe.error))));break;case Aa.qbe:this._o(new ss(this.RI));case Aa.rX:case Aa.Hbe:}this.g5!==this.eU&&this._o(new oa(this.RI,this.g5))},this.RAe=()=>{this._o(new rl(this.RI,void 0))}}};r();var jtt=class extends Ytt{get SZ(){return this.hk}get ht(){return this.LO}get rt(){return this.FO}get tR(){return this.hk.playbackRate}set tR(t){this.hk.playbackRate=t}get qI(){return this.hk.muted}set qI(t){this.hk.muted=t}get yR(){return this.hk.volume}set yR(t){this.hk.volume=t}get RI(){return this.hk.currentTime}get ct(){return this.hk.duration}get MI(){return this.hk.ended}get Ti(){return this.hk.offsetHeight*As.Ys.pp}get ji(){return this.hk.offsetWidth*As.Ys.pp}get JI(){return this.hk.paused}get sR(){return ee.Cn(this.hk.played)}get aR(){return this.g8.aR}get vR(){return this.hk.videoHeight}get pR(){return this.hk.videoWidth}stt(t){super.stt(t),t.appendChild(this.hk)}async $n(t){if(t.zw===De.zW){const e=await super.$n(t);return await this.uAe(t),e}throw new m("Unsupported media source configuration for HbbTV")}async uAe(t){switch(t.DZ){case Ih.$C:case Ih.tP:this.hk.setAttribute("crossorigin",t.DZ);break;case Ih.SE:default:this.hk.removeAttribute("crossorigin")}void 0!==t.rR?this.hk.preload=t.rR:this.hk.preload=hi.KG,void 0!==t.NZ?this.hk.title=t.NZ:Ld(this.hk);const e=this.tR;this.hk.src=t.zC,this.tR=e,await super.uAe(t)}async DR(){await super.DR(),await this.hk.play()}PR(){this.hk.pause()}Db(t,e,i){e&&this.hk.fastSeek?this.hk.fastSeek(t):this.hk.currentTime=t,this.FH=!0,this._o(new Al(this.RI))}async nr(){await super.nr(),Or(this.hk),this.hk.src&&this.hk.removeAttribute("src"),this.LO.nr(),this.FO.nr()}async Km(){await super.Km(),this.D8.Km(),this.g8.Km(),this.I7(),this.XZ(),We(this.hk)}ge(){super.ge(),this.hk.style.display="block",this.hk.style.height="100%",this.hk.style.width="100%"}be(){super.be(),this.hk.style.display="none"}k7(){this.SZ.addEventListener("play",this.aU),this.SZ.addEventListener("pause",this.uU),this.SZ.addEventListener("timeupdate",this.Tc),this.SZ.addEventListener("progress",this.CAe),this.SZ.addEventListener("loadstart",this.Ts),this.SZ.addEventListener("ended",this.Mc),this.SZ.addEventListener("ratechange",this.PAe),this.SZ.addEventListener("volumechange",this.Kzt),this.SZ.addEventListener("durationchange",this.Xzt),this.SZ.addEventListener("loadedmetadata",this.DAe),this.SZ.addEventListener("emptied",this.NAe),this.SZ.addEventListener("seeked",this.MAe),this.SZ.addEventListener("seeking",this.LAe),this.SZ.addEventListener("error",this.BAe),_o()&&this.SZ.addEventListener("encrypted",this.t8)}I7(){this.SZ.removeEventListener("play",this.aU),this.SZ.removeEventListener("pause",this.uU),this.SZ.removeEventListener("timeupdate",this.Tc),this.SZ.removeEventListener("progress",this.CAe),this.SZ.removeEventListener("loadstart",this.Ts),this.SZ.removeEventListener("ended",this.Mc),this.SZ.removeEventListener("ratechange",this.PAe),this.SZ.removeEventListener("volumechange",this.Kzt),this.SZ.removeEventListener("durationchange",this.Xzt),this.SZ.removeEventListener("loadedmetadata",this.DAe),this.SZ.removeEventListener("emptied",this.NAe),this.SZ.removeEventListener("seeked",this.MAe),this.SZ.removeEventListener("seeking",this.LAe),this.SZ.removeEventListener("error",this.BAe),this.SZ.removeEventListener("encrypted",this.t8)}uH(t){this.bZ=t,this._o(new tu(this.bZ))}iH(){const t=this.hk.audioTracks,e=this.hk.videoTracks;t&&(t.addEventListener("addtrack",this.OAe),t.addEventListener("removetrack",this.FAe),t.addEventListener("change",this.VAe)),e&&(e.addEventListener("addtrack",this.WAe),e.addEventListener("removetrack",this.UAe),e.addEventListener("change",this.GAe))}XZ(){const t=this.hk.audioTracks,e=this.hk.videoTracks;t&&(t.removeEventListener("addtrack",this.OAe),t.removeEventListener("removetrack",this.FAe),t.removeEventListener("change",this.VAe)),e&&(e.removeEventListener("addtrack",this.WAe),e.removeEventListener("removetrack",this.UAe),e.removeEventListener("change",this.GAe))}ah(t){for(let e=0;e<t.V;e++){t.wC(e).rF()}}constructor(t,e,i){super(e,i),this.hk=t,this.LO=new an,this.FO=new an,this.ZAe=void 0,this.aU=()=>{this._o(new he(this.RI))},this.uU=()=>{this._o(new nl(this.RI))},this.Tc=()=>{const t=this.RI,e=this.dR,i=void 0!==this.ZAe,s=i&&this.ZAe!==t;(e||!i||s)&&(this._o(new rl(t,void 0)),this.ZAe=t)},this.CAe=()=>{this._o(new ki(this.RI))},this.Ts=()=>{this._o(new ts)},this.Mc=()=>{this._o(new ss(this.RI))},this.PAe=()=>{this._o(new ga(this.RI,this.tR))},this.Kzt=()=>{this._o(new Ar(this.RI,this.yR))},this.Xzt=()=>{this._o(new yn(this.ct))},this.DAe=()=>{},this.NAe=()=>{},this.MAe=()=>{this.FH&&(this.FH=!1),this._o(new Be(this.RI))},this.LAe=()=>{this._o(new Al(this.RI))},this.cU=t=>{this.eU!==t.readyState&&(this.eU=t.readyState,this._o(t))},this.hU=()=>{this._o(new Xr(this.RI))},this.BAe=()=>{if(null!==this.hk.error){const e=this.hk.error;var t;this.uH(new iu(null!=(t=e.code)?t:di.DECODE,e.message||"Error decoding media",void 0,e.msExtendedCode))}},this.t8=t=>{this._o(new bm(t.initDataType,t.initData||new ArrayBuffer(0)))},this.WAe=t=>{const e=this.hk.videoTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];WR(this.FO,i)||this.FO.tt(new Vk(i))}},this.UAe=t=>{const e=[],i=this.hk.videoTracks;if(i){for(const t of this.FO.mC)UR(i,t.sF)||e.push(t);for(const t of e)this.FO.it(t)}},this.GAe=t=>{this.ah(this.FO)},this.OAe=t=>{const e=this.hk.audioTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];WR(this.LO,i)||this.LO.tt(new Ok(i))}},this.FAe=t=>{const e=[],i=this.hk.audioTracks;if(i){for(const t of this.LO.mC)UR(i,t.sF)||e.push(t);for(const t of e)this.LO.it(t)}},this.VAe=t=>{this.ah(this.LO)},this.g8=new gB(this),this.g8.bn(Zc.aC,this.cU),this.g8.i8(new Xo(this)),this.D8=new oc(this),this.D8.bn(Zc.uB,this.hU),this.k7(),this.iH()}},Qtt=[ns.ho,ns.Ky,Zc.uB,ns.ib,ns.eb,ns.Ly,ns.Dy,ns.Ry,ns.Iy,ns._b,ns.jy,ns.Hy,ns.Qy,ns.vb,ns.$y,ns.Fy,ns.By],Jtt=class extends So{get ht(){return this.aO.ht}get SI(){return this.aO.SI.ks()}get mO(){}get kI(){return this.aO.kI}set kI(t){t&&this.aO.wZ(t)}get bt(){return this.Sc}get RI(){return this.aO.RI}set RI(t){this.aO.Db(t)}get IZ(){return this.RZ}get ct(){return this.aO.ct}get MI(){return this.aO.MI}get OI(){return this.AZ}get lt(){return this.bZ}get VI(){}get UI(){}get ZI(){return!1}get ER(){return this.aO.ER}set ER(t){this.aO.ER=t}get SR(){return this.zH}get XI(){return ne({},{WO:0,UO:0,GO:0,ZO:0,HO:0,XO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.aO.zI())}get qI(){return this.aO.qI}set qI(t){this.aO.qI=t}get jI(){return!0}get JI(){return this.aO.JI}get tR(){return this.aO.tR}set tR(t){this.aO.tR=t}get sR(){return this.aO.sR.ks()}get rR(){return this.TZ}set rR(t){this.TZ=t,this.kZ&&(this.kZ.rR=t)}get aR(){return this.aO.aR}get cR(){return this.aO.cR.ks()}get dR(){return this.aO.dR}get EZ(){return this.aO.EZ}get nt(){return this.Hl}get vR(){return this.aO.vR}get rt(){return this.aO.rt}get pR(){return this.aO.pR}get yR(){return this.aO.yR}set yR(t){this.aO.yR=t}ZR(t){return this.aO.UZ(t)}MR(){return!1}xR(){return this.aO.Sa}IR(){}be(){this.aO.be()}FR(){this.aO.FR()}PR(){this.aO.PR()}async DR(){await this.aO.DR()}WR(){throw new m("Recreate media source is not supported on HbbTV")}DI(t,e){this.aO.Db(t)}async Ca(t,e,i){var s;Io(i),this.Sc=t;const n={zw:De.zW,zC:t.src,Fk:t.type,CZ:this.PZ(t),rR:this.TZ,DZ:t.crossOrigin,NZ:null==(s=e.metadata)?void 0:s.title};this.kZ=await this.aO.$n(n),e.textTracks&&this.LZ(e.textTracks),jx(this.nt)}ge(){this.aO.ge()}LR(){}OR(){}ja(){return this.aO.WZ}async nr(){this.Sc=void 0,this.bZ=void 0,this.AZ=void 0,this.kZ=void 0,await this.VZ.nr(),this.aO.GZ(),await this.aO.nr()}async yn(){await this.nr(),this.ZZ.yn(),this.aO.vn(Qtt,this.Ds),this.aO.vn(bo.fa,this.JZ),await this.aO.Km(),this.pn.yn(),this.Hl.yn(),await this.VZ.yn()}uH(t,e){this.bZ||(this.bZ=e,this.AZ=t,this._o(new Pi(t)))}LZ(t){for(const e of t)void 0!==e.src&&this.VZ.OW(e)}PZ(t){if(!t.contentProtection)return[];const e=[];return t.contentProtection.widevine&&e.push({_T:Qg,nZ:t.contentProtection.widevine.licenseAcquisitionURL,eH:[]}),t.contentProtection.playready&&e.push({_T:jg,nZ:t.contentProtection.playready.licenseAcquisitionURL,eH:[]}),this.HAe(e,t.contentProtection.preferredKeySystems)}HAe(t,e){if(void 0===e||0===e.length)return t;const i=t=>{const i=e.indexOf(t._T.jw);return i>=0?i:e.length};return Le(t,((t,e)=>i(t)-i(e)))}constructor(t,e,i,s){super(),this.kZ=void 0,this.RZ=new Qo,this.Sc=void 0,this.bZ=void 0,this.AZ=void 0,this.TZ=hi.xH,this.JZ=t=>{const e=t.lt,i=e.code,s=new Z(Ik(i),"Something went wrong during HbbTV playback.",e),n=Zs(s);this.uH(s,n)},this.pn=new Ee(t),this.pn.kn(),this.aO=Af()?new jtt(h.createElement(Fo.yE),this.pn,s):new Ktt(h.createElement("object"),this.pn,s),this.aO.stt(t),this.aO.bn(Qtt,this.Ds),this.aO.bn(bo.fa,this.JZ),this.ZZ=new I(this.aO,!0),this.ZZ.bn(co,this.Ds),this.VZ=new Xx(this.aO,e),this.Hl=new uu([this.aO.nt,this.VZ.Z]),this.zH=i}};et(new class{mP(t,e,i,s,n,r,o,h){return new Jtt(t,i,r,o)}dH(t,e){var i;return!(!Ya.Lg||t.type!==ti.nP&&!YT(t.type)&&!Wh(t.type))&&!(Af()&&!(null==(i=t.contentProtection)?void 0:i.useOipfDrmAgent)&&(!t.contentProtection||_o()))}async fH(t){return!!await AT(t,!0)}_H(){return!1}constructor(){this.vH=CR.WG}});export{El as a,Nt as b,r as c,Ya as d,ol as e,Qc as f,Vt as g,oi as h,We as i,kd as j,Id as k,hn as l,Rd as m,Cd as n,Ka as o,Ld as p,Bd as q,As as r,M as s,Fd as t,Wd as u,Le as v,bi as w,$c as x,Va as y,Do as z,_e as A,fh as B,En as C,Io as D,uh as E,h_ as F,a_ as G,bg as H,ne as I,Xa as J,cm as K,So as L,me as M,ns as N,Ci as O,lr as P,rS as Q,Qr as R,Et as S,oS as T,bc as U,ao as V,Ek as W,Bu as X,Je as Y,Ui as Z,Hi as _,Cx as $,Dx as aa,Wt as ba,Pa as ca,Hh as da,zh as ea,xF as fa,ee as ga,QT as ha,$t as ia,yn as ja,cu as ka,ck as la,_k as ma,Wi as na,hh as oa,OC as pa,tt as qa,ln as ra,WP as sa,qP as ta,Ee as ua,QP as va,bs as wa,$P as xa,mc as ya,sD as za,nD as Aa,hD as Ba,ts as Ca,UB as Da,GB as Ea,ZB as Fa,XB as Ga,zB as Ha,qB as Ia,yO as Ja,bO as Ka,AO as La,SO as Ma,Nu as Na,wF as Oa,yF as Pa,CF as Qa,tV as Ra,eV as Sa,iV as Ta,sV as Ua,hV as Va,aV as Wa,uV as Xa,_U as Ya,vU as Za,ji as _a,k1 as $a,L1 as ab,j1 as bb,S6 as cb,r9 as db,N9 as eb,F9 as fb,B7 as gb};