/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 8.0.0
 Created: 2024-09-09T14:45:41.736Z
 */
var Ui,r,nl,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==s?s:"undefined"!=typeof global?global:this,s=a.window,h=a.document,td=a.location,id=a.navigator,u=a.setTimeout,c=a.clearTimeout,v=a.setInterval,m=a.clearInterval,g=a.Error,b=a.TypeError,w=(a.SyntaxError,a.Object),_=a.Math,x=a.parseInt,C=a.parseFloat,S=a.isNaN,j=a.Uint8Array,ed=a.Worker,sd=(a.WorkerGlobalScope,a.XMLHttpRequest),nd=w.create,rd=w.defineProperty,hd=w.getOwnPropertyDescriptor,od=w.getOwnPropertyNames,ad=w.getPrototypeOf,ud=w.prototype.hasOwnProperty,eo=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),so=(t,i,e)=>(e=null!=t?nd(ad(t)):{},((t,i,e,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let n of od(i))ud.call(t,n)||n===e||rd(t,n,{get:()=>i[n],enumerable:!(s=hd(i,n))||s.enumerable});return t})(!i&&t&&t.__esModule?e:rd(e,"default",{value:t,enumerable:!0}),t)),cd=eo(((t,i)=>{i.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),dd=eo(((t,i)=>{i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=e+e,o=s+s,a=n+n,u=e*h,c=s*h,d=s*o,l=n*h,f=n*o,_=n*a,g=r*h,w=r*o,A=r*a;return t[0]=1-d-_,t[1]=c+A,t[2]=l-w,t[3]=0,t[4]=c-A,t[5]=1-u-_,t[6]=f+g,t[7]=0,t[8]=l+w,t[9]=f-g,t[10]=1-u-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),ld=eo(((t,i)=>{i.exports=function(t,i,e){var s,n,r,h=e[0],o=e[1],a=e[2],u=_.sqrt(h*h+o*o+a*a);if(_.abs(u)<1e-6)return null;return h*=u=1/u,o*=u,a*=u,s=_.sin(i),n=_.cos(i),r=1-n,t[0]=h*h*r+n,t[1]=o*h*r+a*s,t[2]=a*h*r-o*s,t[3]=0,t[4]=h*o*r-a*s,t[5]=o*o*r+n,t[6]=a*o*r+h*s,t[7]=0,t[8]=h*a*r+o*s,t[9]=o*a*r-h*s,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),fd=eo(((t,i)=>{i.exports=function(t,i){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}})),_d=eo(((t,i)=>{i.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),gd=eo(((t,i)=>{i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=i[4],o=i[5],a=i[6],u=i[7],c=i[8],d=i[9],l=i[10],f=i[11],_=i[12],g=i[13],w=i[14],A=i[15],v=e*o-s*h,m=e*a-n*h,p=e*u-r*h,y=s*a-n*o,M=s*u-r*o,T=n*u-r*a,N=c*g-d*_,D=c*w-l*_,I=c*A-f*_,S=d*w-l*g,E=d*A-f*g,b=l*A-f*w,L=v*b-m*E+p*S+y*I-M*D+T*N;if(!L)return null;return L=1/L,t[0]=(o*b-a*E+u*S)*L,t[1]=(n*E-s*b-r*S)*L,t[2]=(g*T-w*M+A*y)*L,t[3]=(l*M-d*T-f*y)*L,t[4]=(a*I-h*b-u*D)*L,t[5]=(e*b-n*I+r*D)*L,t[6]=(w*p-_*T-A*m)*L,t[7]=(c*T-l*p+f*m)*L,t[8]=(h*E-o*I+u*N)*L,t[9]=(s*I-e*E-r*N)*L,t[10]=(_*M-g*p+A*v)*L,t[11]=(d*p-c*M-f*v)*L,t[12]=(o*D-h*S-a*N)*L,t[13]=(e*S-s*D+n*N)*L,t[14]=(g*m-_*y-w*v)*L,t[15]=(c*y-d*m+l*v)*L,t}})),wd=eo(((t,i)=>{i.exports=function(t,i,e){var s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],d=i[8],l=i[9],f=i[10],_=i[11],g=i[12],w=i[13],A=i[14],v=i[15],m=e[0],p=e[1],y=e[2],M=e[3];return t[0]=m*s+p*o+y*d+M*g,t[1]=m*n+p*a+y*l+M*w,t[2]=m*r+p*u+y*f+M*A,t[3]=m*h+p*c+y*_+M*v,m=e[4],p=e[5],y=e[6],M=e[7],t[4]=m*s+p*o+y*d+M*g,t[5]=m*n+p*a+y*l+M*w,t[6]=m*r+p*u+y*f+M*A,t[7]=m*h+p*c+y*_+M*v,m=e[8],p=e[9],y=e[10],M=e[11],t[8]=m*s+p*o+y*d+M*g,t[9]=m*n+p*a+y*l+M*w,t[10]=m*r+p*u+y*f+M*A,t[11]=m*h+p*c+y*_+M*v,m=e[12],p=e[13],y=e[14],M=e[15],t[12]=m*s+p*o+y*d+M*g,t[13]=m*n+p*a+y*l+M*w,t[14]=m*r+p*u+y*f+M*A,t[15]=m*h+p*c+y*_+M*v,t}})),Ad=eo(((t,i)=>{i.exports=function(t,i,e,s,n){var r=1/_.tan(i/2),h=1/(s-n);return t[0]=r/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+s)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*s*h,t[15]=0,t}})),vd=eo(((t,i)=>{i.exports=function(t,i,e,s){var n,r,h,o,a,u,c,d,l,f,g,w,A,v,m,p,y,M,T,N,D,I,S,E,b=s[0],L=s[1],k=s[2],C=_.sqrt(b*b+L*L+k*k);if(_.abs(C)<1e-6)return null;b*=C=1/C,L*=C,k*=C,n=_.sin(e),r=_.cos(e),h=1-r,o=i[0],a=i[1],u=i[2],c=i[3],d=i[4],l=i[5],f=i[6],g=i[7],w=i[8],A=i[9],v=i[10],m=i[11],p=b*b*h+r,y=L*b*h+k*n,M=k*b*h-L*n,T=b*L*h-k*n,N=L*L*h+r,D=k*L*h+b*n,I=b*k*h+L*n,S=L*k*h-b*n,E=k*k*h+r,t[0]=o*p+d*y+w*M,t[1]=a*p+l*y+A*M,t[2]=u*p+f*y+v*M,t[3]=c*p+g*y+m*M,t[4]=o*T+d*N+w*D,t[5]=a*T+l*N+A*D,t[6]=u*T+f*N+v*D,t[7]=c*T+g*N+m*D,t[8]=o*I+d*S+w*E,t[9]=a*I+l*S+A*E,t[10]=u*I+f*S+v*E,t[11]=c*I+g*S+m*E,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]);return t}})),md=eo(((t,i)=>{i.exports=function(t,i,e){var s,n,r,h,o,a,u,c,d,l,f,_,g=e[0],w=e[1],A=e[2];i===t?(t[12]=i[0]*g+i[4]*w+i[8]*A+i[12],t[13]=i[1]*g+i[5]*w+i[9]*A+i[13],t[14]=i[2]*g+i[6]*w+i[10]*A+i[14],t[15]=i[3]*g+i[7]*w+i[11]*A+i[15]):(s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],d=i[8],l=i[9],f=i[10],_=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=u,t[7]=c,t[8]=d,t[9]=l,t[10]=f,t[11]=_,t[12]=s*g+o*w+d*A+i[12],t[13]=n*g+a*w+l*A+i[13],t[14]=r*g+u*w+f*A+i[14],t[15]=h*g+c*w+_*A+i[15]);return t}}));function zc(t,i){return yd(t.slice(),i)}function pd(t,i){const e=yd(t,i);return e!==t&&Md(e,void 0,t.length,t),t}function yd(t,i){let e=t;const s=e.length;if(s<=1)return e;let n=new Array(s);for(let t=1;t<s;t*=2){Md(e,i,t,n);const s=e;e=n,n=s}return e}function Md(t,i,e,s){const n=t.length;let r=0;const h=2*e;let o,a,u,c,d;for(a=0;a<n;a+=h)for(u=a+e,o=u+e,u>n&&(u=n),o>n&&(o=n),c=a,d=u;;)if(c<u&&d<o)i&&i(t[c],t[d])<=0?s[r++]=t[c++]:s[r++]=t[d++];else if(c<u)s[r++]=t[c++];else{if(!(d<o))break;s[r++]=t[d++]}}(r=Ui||(Ui={}))[r.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",r[r.LICENSE_ERROR=2e3]="LICENSE_ERROR",r[r.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",r[r.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",r[r.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",r[r.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",r[r.SOURCE_INVALID=3e3]="SOURCE_INVALID",r[r.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",r[r.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",r[r.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",r[r.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",r[r.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",r[r.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",r[r.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",r[r.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",r[r.MEDIA_ABORTED=5004]="MEDIA_ABORTED",r[r.NETWORK_ERROR=6e3]="NETWORK_ERROR",r[r.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",r[r.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",r[r.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",r[r.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",r[r.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",r[r.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",r[r.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",r[r.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",r[r.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",r[r.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",r[r.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",r[r.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",r[r.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",r[r.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",r[r.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",r[r.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",r[r.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",r[r.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",r[r.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",r[r.AD_ERROR=1e4]="AD_ERROR",r[r.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",r[r.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",r[r.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",r[r.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",r[r.THEO_LIVE_UNKNOWN_ERROR=13e3]="THEO_LIVE_UNKNOWN_ERROR",r[r.THEO_LIVE_CHANNEL_NOT_FOUND=13001]="THEO_LIVE_CHANNEL_NOT_FOUND",r[r.THEO_LIVE_END_OF_DEMO=13002]="THEO_LIVE_END_OF_DEMO",r[r.THEO_LIVE_ANALYTICS_ERROR=13003]="THEO_LIVE_ANALYTICS_ERROR",function(t){t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE",t[t.THEOLIVE=13]="THEOLIVE"}(nl||(nl={})),function(t){t.fromCode=function(i){const e=_.floor(i/1e3);if(e in t)return e;throw new b("Invalid error code: "+i)}}(nl||(nl={}));var xs={}.hasOwnProperty,Td={}.toString;function Yt(t){return null!=t}function Nd(t){return void 0===t}var Gt=Array.isArray||function(t){return"[object Array]"===Td.call(t)};function mi(t){return Ut(t)&&xs.call(t,"length")&&bd(t.length)}function Ut(t){return"object"==typeof t&&null!==t}function Dd(t){return Ut(t)&&t.constructor&&t.constructor===w}function Qs(t){return"string"==typeof t}function Id(t){return"boolean"==typeof t}function Sd(t){return Yt(t)&&"function"==typeof t.then}function Ed(t){return"[object Date]"===Td.call(t)}function bd(t){return"number"==typeof t}function Ld(t){return"function"==typeof t}function qr(t){return Ld(t)||Ut(t)}var It,Oa=9007199254740991,kd=2**-52;function os(t,i,e){return _.min(_.max(t,i),e)}function Ua(t,i,e){return t===i||_.abs(t-i)<=e}function Cd(t,i){if(t===i)return!0;const e=_.abs(t-i);if(e<kd)return!0;return e<_.max(_.abs(t),_.abs(i))*kd}function xd(t,i){return t%i+(t<0?i:0)}function Od(t){return t!=t}function jd(t,i){return t===i||Od(t)&&Od(i)}function zd(t,i){let e=t,s=i;for(;0!==s;){const t=e%s;e=s,s=t}return e<0?-e:e}function co(t,i){return t.reduce(((t,e)=>t+i(e)),0)}!function(t){t[t.Zr=0]="Zr",t[t.hd=1]="hd",t[t.Nd=-1]="Nd"}(It||(It={}));var Xo=(t,i)=>(0|t)-(0|i),Ge=(t,i)=>t===i?0:t<i?-1:t>i?1:S(t)?S(i)?0:1:-1;function Pd(t,i,e){return Ua(t,i,e)?0:Ge(t,i)}var Bd=(t,i)=>Cd(t,i)?0:Ge(t,i);var Rd="function"==typeof Array.prototype.find?(t,i)=>t.find(i):(t,i)=>{const e=Ka(t,i);return-1===e?void 0:t[e]},Zt=Rd,Ud="function"==typeof Array.prototype.findLast?(t,i)=>t.findLast(i):(t,i)=>{const e=Fd(t,i);return-1===e?void 0:t[e]},Qd=Ud,Ka="function"==typeof Array.prototype.findIndex?(t,i)=>t.findIndex(i):(t,i)=>{for(let e=0;e<t.length;e+=1){if(i(t[e],e,t))return e}return-1},Fd="function"==typeof Array.prototype.findLastIndex?(t,i)=>t.findLastIndex(i):(t,i)=>{for(let e=t.length-1;e>=0;e-=1){if(i(t[e],e,t))return e}return-1};function To(t,i){const e=t.indexOf(i);return-1!==e&&(M(t,e),!0)}function M(t,i){0===i?t.shift():t.splice(i,1)}function Yd(t,i){const e=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===i){n++,e.length-=1;break}e[s++]=t[n++]}for(;n<t.length;)e[s++]=t[n++];return e}function qt(t,i){return-1!==t.indexOf(i)}function Gd(t,i,e){if(t===i)return!0;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s+=1)if(!e(t[s],i[s]))return!1;return!0}function No(t){t.length=0}function mo(t,i){if(t.length!==i.length)return!1;for(const e of t)if(!qt(i,e))return!1;return!0}Array.prototype.flat;var ge="function"==typeof Array.prototype.flatMap?(t,i)=>t.flatMap(i):(t,i)=>{const e=[];for(let s=0;s<t.length;s++)e.push(...i(t[s],s));return e};function xo(t,i){return kc(t,((t,e)=>Ge(i(t),i(e))))}function Vd(t,i){return Wd(t,((t,e)=>Ge(i(t),i(e))))}function kc(t,i){if(0!==t.length)return t.reduce(((t,e)=>i(t,e)<=0?t:e))}function Wd(t,i){return kc(t,((t,e)=>i(e,t)))}function Oo(t){return t.filter(((i,e)=>t.indexOf(i)===e))}function Hd(t,i){return Promise.all(t.map(i)).then((i=>t.filter(((t,e)=>i[e]))))}function qd(t,i,e){if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(!e(t[s],i[s]))return!1;return!0}function Xd(){const t=w.create(null);return t.Dd=void 0,delete t.Dd,t}function cs(){return new $d}function pt(){return new Nl}function Zd(t){const i=cs();for(const e in t)xs.call(t,e)&&i.set(e,t[e]);return i}function Kd(t){const i=[];return t.forEach((t=>i.push(t))),i}var Jd="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,$d=Jd||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,i){this.index=0,this.data=t,this.selector=i,this.keys=w.keys(t)}}return class{get(t){return this.data[t]}set(t,i){return this.has(t)||this.size++,this.data[t]=i,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=Xd(),this.size=0}keys(){return new t(this.data,((t,i)=>i))}values(){return new t(this.data,((t,i)=>t[i]))}entries(){return new t(this.data,((t,i)=>[i,t[i]]))}forEach(t){for(const i in this.data)t(this.data[i],i)}constructor(){this.data=Xd(),this.size=0}}}();var Nl=Jd||function(){class t{next(){const t=this.Id.next();return t.done?t:{value:this.Ld(t.value),done:!1}}constructor(t,i){this.Id=t,this.Ld=i}}return class{get size(){return this.Od.size}get(t){return this.Od.get(""+t)}set(t,i){return this.Od.set(""+t,i),this}has(t){return this.Od.has(""+t)}delete(t){return this.Od.delete(""+t)}clear(){this.Od.clear()}keys(){return new t(this.Od.keys(),(t=>Number(t)))}values(){return this.Od.values()}entries(){return new t(this.Od.entries(),(t=>{let[i,e]=t;return[Number(i),e]}))}forEach(t){this.Od.forEach(((i,e)=>{t(i,Number(e))}))}constructor(){this.Od=cs()}}}();var Dl=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];g.apply(this,i)};(Dl.prototype=w.create(g.prototype)).constructor=Dl;var i,fh=class extends Dl{get name(){return"BaseError"}constructor(t,i){super(),this.message=t||"Unknown error",this.cause=i,g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}},Il=class{zd(){if(!this.Bd&&!this.Rd){this.Bd=!0;for(const t of this.Ud.slice())t();this.Qd()}}Qd(){if(!this.Rd){this.Rd=!0;for(const t of this.Fd.slice())t();No(this.Ud),No(this.Fd)}}Yd(t){this.Rd||this.Ud.push(t)}Gd(t){this.Rd||To(this.Ud,t)}Vd(t){this.Rd||this.Fd.push(t)}Wd(t){this.Rd||To(this.Fd,t)}constructor(){this.Bd=!1,this.Rd=!1,this.Ud=[],this.Fd=[]}},na=class t{get Hd(){return this.qd}Xd(){this.qd.zd()}Qd(){this.qd.Qd()}Zd(t){const i=this.qd;if(i.Bd)return;if(t.Bd)return void i.zd();if(i.Rd||t.Rd)return;const e=()=>{s(),i.zd()},s=()=>{t.Gd(e),t.Wd(s),i.Gd(e),i.Wd(s)};t.Yd(e),t.Vd(s),i.Yd(e),i.Vd(s)}Kd(){const i=new t,e=new t,s=i.Hd,n=e.Hd,r=this.qd,h=()=>{s.Bd&&n.Rd||n.Bd&&s.Rd?r.zd():s.Rd&&n.Rd&&r.Qd()};s.Yd(h),n.Yd(h),s.Vd(h),n.Vd(h),i.Zd(r),e.Zd(r);return r.Vd((()=>{s.Gd(h),n.Gd(h),s.Wd(h),n.Wd(h)})),[i,e]}constructor(){this.qd=new Il}};var El=()=>{},Ll=t=>t;function ho(t,e){let s=-1/0;return function(){for(var n=arguments.length,r=new Array(n),h=0;h<n;h++)r[h]=arguments[h];const o=i.Jd();o-s>=e&&(t.apply(this,r),s=o)}}function mc(t,e){let s=0;return function(){for(var n=arguments.length,r=new Array(n),h=0;h<n;h++)r[h]=arguments[h];const o=this;0!==s&&i.$d(s),s=i.ul((()=>{s=0,t.apply(o,r)}),e)}}function qc(t){let i;return()=>(void 0!==t&&(i=t(),t=void 0),i)}var pe=class extends fh{get name(){return"AbortError"}constructor(t,i){super(t||"Aborted",i)}};function ut(t){return t instanceof g&&"AbortError"===t.name}function Bo(t){if(t&&t.Bd)throw new pe}function Ao(t){if(ut(t))throw t}function el(t){if(!ut(t))throw t}function dt(t,i){return i?new Promise(((e,s)=>{if(i.Bd)return t.catch(El),s(new pe);const n=()=>{i.Gd(n),s(new pe)};i.Yd(n),t.then((t=>{i.Gd(n),e(t)}),(t=>{i.Gd(n),s(t)}))})):t}function Wi(t,i){return t.then((t=>(i.Xd(),t)),(t=>{throw i.Xd(),t}))}function vu(t,i){const e=new na;return i&&e.Zd(i),Wi(t(e.Hd),e)}var Ol=Promise.resolve(),ac="function"==typeof queueMicrotask?queueMicrotask:t=>{Ol.then(t)};function D(t){t.then(El,El)}async function Zc(t){try{return await Promise.all(t)}catch(i){throw await Promise.all(t.map((t=>t.catch(El)))),i}}function ri(t,e){return new Promise(((s,n)=>{if(void 0!==e&&e.Bd)return void n(new pe);const r=i.ul((()=>{void 0!==e&&e.Gd(h),s()}),t),h=()=>{i.$d(r),n(new pe)};void 0!==e&&e.Yd(h)}))}function zl(t,i,e){if("function"==typeof e)e.call(t,i);else for(const s of e)s.call(t,i)}var Mi,Pl=class{yn(t,i){if("function"==typeof i)if("string"==typeof t)this.tf(t,i);else for(const e of t)this.tf(e,i)}tf(t,i){const e=this.if[t];void 0===e?this.if[t]=i:"function"==typeof e?this.if[t]=[e,i]:0===this.ef?e.push(i):this.if[t]=e.concat(i)}sf(t){if("function"!=typeof t)return;const i=this.nf;void 0===i?this.nf=t:"function"==typeof i?this.nf=[i,t]:0===this.ef?i.push(t):this.nf=i.concat(t)}Vo(){this.if=Xd(),this.nf=void 0}Co(t){this.ef++;const i=this.if[t.type],e=this.nf;void 0!==i&&zl(this.rf,t,i),void 0!==e&&zl(this.rf,t,e),this.ef--}fn(t,i){if("function"==typeof i)if("string"==typeof t)this.hf(t,i);else for(const e of t)this.hf(e,i)}hf(t,i){const e=this.if[t];void 0!==e&&("function"==typeof e?e===i&&(this.if[t]=void 0):0===this.ef?To(e,i):this.if[t]=Yd(e,i))}uf(t){if("string"==typeof t)this.if[t]=void 0;else for(const i of t)this.if[i]=void 0}cf(t){const i=this.nf;void 0!==i&&("function"==typeof i?i===t&&(this.nf=void 0):0===this.ef?To(i,t):this.nf=Yd(i,t))}df(t,i){return new Promise(((e,s)=>{if(i&&i.Bd)return s(new pe);const n=t=>{h(),e(t)},r=()=>{h(),s(new pe)},h=()=>{this.fn(t,n),i&&i.Gd(r)};this.yn(t,n),i&&i.Yd(r)}))}constructor(t){this.if=Xd(),this.nf=void 0,this.ef=0,this.Ds=t=>{this.Co(t)},this.rf=null!=t?t:this}},wt=class extends Pl{Co(t){ac((()=>{super.Co(t)}))}},Ys=class extends Pl{sf(t){super.sf(t)}cf(t){super.cf(t)}},Bl=class extends Ys{},Qo=class extends Ys{get ht(){return this.lf()}lf(){return this._f.ht}gf(){return this._f.gf()}get wf(){return this.Af()}Af(){return this._f.wf}get vf(){return this.mf()}set vf(t){this.pf(t)}mf(){return this._f.vf}pf(t){this._f.vf=t}get bt(){return this.yf()}yf(){return this._f.bt}get Mf(){return this.Tf()}set Mf(t){this.Nf(t)}Tf(){return this._f.Mf}Nf(t){this._f.Mf=t}get ct(){return this.Td()}Td(){return this._f.ct}get we(){return this.Df()}Df(){return this._f.we}get If(){return this.Sf()}Sf(){return this._f.If}get lt(){return this.Ef()}get bf(){return this.Lf()}Ef(){return this._f.lt}Lf(){return this._f.bf}get kf(){return this.Cf()}Cf(){return this._f.kf}get xf(){return this.Of()}Of(){return this._f.xf}get jf(){return this.zf()}zf(){return this._f.jf}get Pf(){return this.Bf()}set Pf(t){this.Rf(t)}Bf(){return this._f.Pf}Rf(t){this._f.Pf=t}get Uf(){return this.Qf()}Qf(){return this._f.Uf}get Ff(){return this.Yf()}Yf(){return this._f.Ff}get Gf(){return this.Vf()}set Gf(t){this.Wf(t)}Vf(){return this._f.Gf}Wf(t){this._f.Gf=t}get Hf(){return this.qf()}qf(){return this._f.Hf}get Xf(){return this.Zf()}set Xf(t){this.Kf(t)}Zf(){return this._f.Xf}Kf(t){this._f.Xf=t}get Jf(){return this.$f()}$f(){return this._f.Jf}get t_(){return this.i_()}i_(){return this._f.t_}get e_(){return this.s_()}s_(){return this._f.e_}Wa(){return this._f.Wa()}ga(t,i){return this._f.ga(t,i)}get nt(){return this.n_()}n_(){return this._f.nt}get r_(){return this.h_()}h_(){return this._f.r_}get rt(){return this.o_()}o_(){return this._f.rt}get a_(){return this.u_()}u_(){return this._f.a_}get c_(){return this.d_()}set c_(t){this.l_(t)}get f_(){return this.__()}__(){return this._f.f_}d_(){return this._f.c_}l_(t){this._f.c_=t}get g_(){return this._f.g_}set g_(t){this._f.g_=t}w_(){return this._f.w_()}A_(){return this._f.A_()}ur(t){this._f.ur(t)}ar(){this._f.ar()}be(){this._f.be()}v_(){this._f.v_()}m_(){this._f.m_()}p_(){this._f.p_()}ge(){this._f.ge()}y_(){return this._f.y_()}M_(){return this._f.M_()}T_(){this._f.T_()}N_(){this._f.N_()}tr(){return this._f.tr()}D_(){this._f.D_()}I_(){this._f.I_()}S_(t){return this._f.S_(t)}E_(t){return!1}async gn(){this.Vo(),await this._f.gn()}constructor(t){super(),this.b_=t=>{this.E_(t)||this.Co(t)},this._f=t,t.sf(this.b_)}};!function(t){t.L_="k_",t.C_="x_"}(Mi||(Mi={}));var wn=class{constructor(t,i=new Date){this.type=t,this.date=i}},yo=class extends wn{get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}constructor(t,i){super(t,i),this.Xa=void 0}};function Rl(t){return Boolean(t&&t.va)}var Ce,ts=class extends yo{constructor(t){super(t)}},ks=class extends wn{constructor(t){super(t)}},Ul=class extends ts{fa(){return new Ql(this.Lt.va)}constructor(t){super(Mi.L_),this.Lt=t}},Ql=class extends ks{constructor(t){super("addtrack"),this.track=t}},Fl=class extends ts{fa(){return new Yl(this.Lt.va)}constructor(t){super(Mi.C_),this.Lt=t}},Yl=class extends ks{constructor(t){super("removetrack"),this.track=t}};!function(t){t.O_="j_",t.z_="P_",t.B_="R_",t.U_="Q_",t.F_="Y_",t.G_="V_",t.ra="W_",t.H_="q_",t.X_="Z_",t.K_="Yn",t.J_="eg",t.rg="hg",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality"}(Ce||(Ce={}));var uo=class extends Pl{get og(){return this.ag}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}get U(){return this.ag.length}cg(t){return this.ag[t]}tt(t){return!(!t||qt(this.ag,t))&&(this.ag.push(t),this.Xa&&this.Xa.push(t.va),t.yn(Ce.ra,this.Ds),this.Co(new Ul(t)),!0)}it(t){if(!t)return!1;const i=this.ag.indexOf(t);return!(i<0)&&(M(this.ag,i),this.Xa&&M(this.Xa,i),t.fn(Ce.ra,this.Ds),this.Co(new Fl(t)),!0)}dg(t){return qt(this.ag,t)}tr(){const t=this.ag;for(let i=t.length-1;i>=0;i-=1)this.it(t[i])}gn(){this.tr(),this.Vo()}constructor(){super(),this.ag=[],this.Xa=void 0}},Tn=class extends ts{fa(){return new Gl(this.Lt.va)}constructor(t){super(Ce.ra),this.Lt=t}},Gl=class extends ks{constructor(t){super("change"),this.track=t}},$o=class extends uo{get fg(){return this._g}set fg(t){const i=this._g;if(t!==i){if(i){this.gg(i);for(const e of i.og)t&&t.dg(e)||this.it(e)}if(this._g=t,t){const i=[];for(const e of t.og)this.tt(e),this.wg(e)&&i.push(e);this.Ag(t);for(const t of i)t.Co(new Tn(t))}}}Ag(t){t.yn(Mi.L_,this.vg),t.yn(Mi.C_,this.pg)}gg(t){t.fn(Mi.L_,this.vg),t.fn(Mi.C_,this.pg)}gn(t){!t&&this._g&&this._g.gn(),super.gn()}constructor(){super(),this._g=void 0,this.vg=t=>{const i=t.Lt;this.tt(i)},this.pg=t=>{const i=t.Lt;this.it(i)}}},Vl=w.freeze||Ll;function Do(t,i,e){w.defineProperty(t,i,{writable:!1,enumerable:!0,value:e})}function Wl(t){return Vl(t)}function xl(t,i){for(const e of w.getOwnPropertyNames(i))w.defineProperty(t,e,w.getOwnPropertyDescriptor(i,e));return t}function ms(t){if(Dd(t)){const i={};for(const e in t)xs.call(t,e)&&(i[e]=ms(t[e]));return i}if(Gt(t)){const i=new Array(t.length);for(let e=0;e<i.length;e++)e in t&&(i[e]=ms(t[e]));return i}return t}function fl(t,i){return t===i||!(!t||!i)&&(!(!Ut(t)||!Ut(i))&&(mi(t)?!!mi(i)&&function(t,i){const e=t.length,s=i.length;if(e!==s)return!1;for(let s=0;s<e;s+=1)if(!fl(t[s],i[s]))return!1;return!0}(t,i):!mi(i)&&function(t,i){const e=w.keys(t),s=w.keys(i);if(!e||!s||e.length!==s.length)return!1;for(const s of e)if(!xs.call(i,s)||!fl(t[s],i[s]))return!1;return!0}(t,i)))}function Hl(t,i){if(!Ut(t))return!1;for(const e of i)if(!(e in t))return!1;return!0}function ql(t,i){return t.constructor===i.constructor}function Xl(t){const i={};for(const e of w.keys(t)){const s=t[e];null!=s&&(i[e]=s)}return i}function Ic(t){const i={};for(const e of w.keys(t)){const s=t[e];if(mi(s)){const t=[];for(let i=0;i<s.length;i+=1){const e=s[i];if(null!=e){const i=Ut(e)?Ic(e):e;t.push(i)}}i[e]=t}else null!=s&&(i[e]=Ut(s)?Ic(s):s)}return i}function Ws(t){let i=t;if("string"==typeof i){if(i=i.toLowerCase(),"true"===i)return!0;if("false"===i)return!1}return Boolean(i)}function uu(t){return Yt(t)?Ws(t):void 0}function Na(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function Zl(t){const i=Na(t);if(S(i))throw new g("Expected a valid number.");return i}function Va(t){return"string"==typeof t?t:""}function Kl(t,i){if(!mi(t))return[];const e=0|t.length,s=new Array(e);for(let n=0;n<e;n++)s[n]=i(t[n]);return s}function ln(t,i){let e;return e=mi(t)?Kl(t,i):i(t),e}var Nu,Jl=[Mi.L_,Mi.C_,Ce.ra];function $l(t){let i;const e=t.og.map((t=>t.va));return e.item=i=>{const e=0|i,s=t.cg(e);return s&&s.va||void 0},e.addEventListener=(t,e)=>{i.yn(t,e)},e.removeEventListener=(t,e)=>{i.fn(t,e)},i=new wt(e),t.yn(Jl,(t=>i.Co(t.va))),e}function tf(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function ef(){}function Fi(t){const i=[Ce.K_,Ce.ra,Ce.J_,Ce.rg,Ce.QUALITY_UNAVAILABLE];let e;const s={get activeQuality(){return t.yg&&t.yg.va},get enabled(){return t.Rt},set enabled(i){t.Rt=Ws(i)},get id(){return t.o},get uid(){return t.Mg},get kind(){return t.zt},get label(){return t.kh},set label(i){t.kh=Va(i)},get accessibility(){var i,e;return null!=(e=null==(i=t.Tg)?void 0:i.map(tf))?e:[]},get language(){return t.gs},get qualities(){return t.Ng.va},set targetQuality(i){let e;e=i?function(t,i){const e=[];for(const s of t.Ng.og)for(const t of i)s.va===t&&e.push(s);return e}(t,Gt(i)?i:[i]):[],e.length>0?t.Dg=e:t.Dg=void 0},get targetQuality(){if(t.Dg)return 1===t.Dg.length?t.Dg[0].va:t.Dg.map((t=>t.va))},addEventListener(t,i){const s=ln(t,Va);e.yn(s,i)},removeEventListener(t,i){const s=ln(t,Va);e.fn(s,i)}};return e=new wt(s),t.yn(i,(t=>e.Co(t.va))),w.defineProperty(s,"constructor",{value:ef}),s}function sf(){}function nf(t){const i=$l(t);return w.defineProperty(i,"constructor",{value:sf}),i}!function(t){t[t.Ig=0]="Ig",t[t.Sg=1]="Sg",t[t.Eg=2]="Eg",t[t.Lg=3]="Lg",t[t.Cg=4]="Cg",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.xg=7]="xg"}(Nu||(Nu={}));var Ha,hh,zs=class extends $o{fa(){return nf(this)}wg(t){return t.Rt}};function zi(t){if("string"==typeof t){const i=t.toLowerCase();switch(i){case"disabled":case"hidden":case"showing":return i}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}function rf(){}function ra(t){const i=[Ce.ra,Ce.K_,Ce.O_,Ce.z_,Ce.U_,Ce.F_,Ce.B_,Ce.G_,Ce.H_,Ce.X_],e=[hh.ha];let s;const n={get kind(){return t.zt},get label(){return t.kh},set label(i){t.kh=Va(i)},get language(){return t.gs},get id(){return t.o},get uid(){return t.Mg},get inBandMetadataTrackDispatchType(){return t.Og},get mode(){return t.jg},set mode(i){i!==Ha.Jn&&i!==Ha.zg&&i!==Ha.Ch||t.Pg(i)},get forced(){return Boolean(t.Bg)},get accessibility(){var i,e;return null!=(e=null==(i=t.Tg)?void 0:i.map(tf))?e:[]},get type(){return t.Rg},get readyState(){return t.Jf},get cues(){return t.jg===Ha.Ch?null:t.L.va},get activeCues(){return t.jg===Ha.Ch?null:t.q.va},get src(){return t.Ug||""},addEventListener(t,i){const e=ln(t,Va);s.yn(e,i)},removeEventListener(t,i){const e=ln(t,Va);s.fn(e,i)}};return s=new wt(t),t.yn(i,(t=>s.Co(t.va))),t.yn(e,(t=>s.Co(t))),w.defineProperty(n,"constructor",{value:rf}),n}function hf(){}function So(t){const i=$l(t);return w.defineProperty(i,"constructor",{value:hf}),i}!function(t){t.Ch="disabled",t.zg="hidden",t.Jn="showing"}(Ha||(Ha={})),(hh||(hh={})).ha="error";var l,er,tu=class extends $o{fa(){return So(this)}wg(t){return t.jg===Ha.Jn}};!function(t){t.Qg="Fg",t.Yg="Gg",t.Vg="contentprotectionerror",t.Wg="contentprotectionsuccess",t.Hg="currentsourcechange",t.qg="destroy",t.Xg="durationchange",t.Zg="emptied",t.Kg="encrypted",t.Jg="ended",t.$g="iw",t.ew="nw",t.hw="ow",t.aw="uw",t.cw="loadstart",t.dw="manifestupdate",t.lw="nosupportedrepresentationfound",t.fw="offline",t._w="online",t.Sh="pause",t.jh="play",t.gw="progress",t.ww="ratechange",t.Aw="representationchange",t.mw="resize",t.pw="seeked",t.yw="seeking",t.Mw="segmentnotfound",t.Tw="Nw",t.Dw="Iw",t.lo="sourcechange",t.Sw="timeupdate",t.Ew="volumechange",t.Lw="Cw",t.xw="metricschange"}(l||(l={})),function(t){t.Ow="canplay",t.jw="canplaythrough",t.zw="loadeddata",t.Pw="loadedmetadata",t.H_="readystatechange",t.Bw="waiting",t.Rw="playing"}(er||(er={}));var of,af=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"],pu=.92,uf=1.08,cf=.25;!function(t){t[t.Ch=0]="Ch",t[t.Uw=1]="Uw",t[t.Qw=2]="Qw"}(of||(of={}));var df=class extends Pl{Fw(){this.Yw(),this.Gw=i.ul((()=>this.Vw()),500)}Yw(){void 0!==this.Gw&&(i.$d(this.Gw),this.Gw=void 0)}get Ww(){return this.Le&&0!==this.ja}get Hw(){return this.qw}get Xw(){return this.Zw}set Xw(t){this.Zw=t,this.Kw()}get Rt(){return this.Le}set Rt(t){this.Le=t,t?this.Cn():this.y_()}Jw(t){this.$w.push(t),this.Kw()}tA(t){To(this.$w,t),this.Kw()}Kw(){this.qw=this.iA(),1===this.ja&&this.Vw()}Cn(){this.Le&&this.eA&&(1!==this.ja&&this.sA.yn(l.Sw,this.Vw),this.Fw(),this.ja=1)}y_(){this.nA(),this.ja=0}m_(){this.nA(),this.ja=2}Qd(){this.y_(),this.ja=0,this.Qo.fn(er.Bw,this.rA),this.Vo()}nA(){1===this.ja&&(this.Yw(),this.sA.fn(l.Sw,this.Vw),this.hA(1))}hA(t){this.canChangePlaybackRate()&&this.Qo.Gf!==t&&(this.Qo.Gf=t)}iA(){const t=this.oA+this.getMinimumLatencyMargin();var i;const e=[null!=(i=this.Zw)?i:this.aA,...this.$w],s=e.reduce(((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.minimumOffset)?e:0)}),t),n=e.reduce(((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.targetOffset)?e:0)}),s+cf),r=e.reduce(((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.maximumOffset)?e:0)}),n+cf);return{minimumOffset:s,targetOffset:n,maximumOffset:r,forceSeekOffset:e.reduce(((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.forceSeekOffset)?e:0)}),r+cf),minimumPlaybackRate:pu,maximumPlaybackRate:uf}}get uA(){return this.Qo.cA}constructor(t,e,s){super(),this.ja=0,this.Gw=void 0,this.oA=0,this.Le=!1,this.eA=!1,this.Zw=void 0,this.$w=[],this.rA=()=>{const t=this.sA.wf,i=this.sA.Mf,e=t.dA(i);e&&(this.oA=_.min(_.max(this.oA,e.jn(0)-i),.5),this.Kw())},this.lA=()=>{this.eA=!0,this.Qo.fn(er.Rw,this.lA),this.Le&&this.Cn()},this.Vw=()=>{this.Yw(),this.Fw();const t=this.uA;if(!t)return;if(t>this.qw.forceSeekOffset)return this.Co(new wn("latencyrecoveryseek")),void this.fA();const{minimumOffset:e,targetOffset:s,maximumOffset:n}=this.qw,r=this.sA.Gf;t>n?this.hA(this.qw.maximumPlaybackRate):t<e&&!i.Ys._A?this.hA(this.qw.minimumPlaybackRate):(r>1&&t<s||r<1&&t>s)&&this.hA(1)},this.Qo=t,this.sA=e,this.aA=s,this.qw=s,this.Qo.yn(er.Bw,this.rA),this.Qo.yn(er.Rw,this.lA)}},lf=.25,ff=400,_f={minimumOffset:.2,targetOffset:.45,maximumOffset:.7,forceSeekOffset:3,minimumPlaybackRate:pu,maximumPlaybackRate:uf},gf={minimumOffset:.4,targetOffset:.65,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:pu,maximumPlaybackRate:uf},wf={minimumOffset:.4,targetOffset:.7,maximumOffset:.9,forceSeekOffset:3,minimumPlaybackRate:pu,maximumPlaybackRate:uf},Af={minimumOffset:.2,targetOffset:.45,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:pu,maximumPlaybackRate:uf},vf={minimumOffset:.5,targetOffset:1.125,maximumOffset:1.75,forceSeekOffset:2.55,minimumPlaybackRate:pu,maximumPlaybackRate:uf};function mf(){let t;return t=i.Ys._A?Af:i.Ys.gA?gf:i.Ys.wA?"Android"===i.vA.AA?wf:_f:vf,i.vA.mA?function(t){if(i.vA.mA){const i=(ff+250)/1e3,e=_.max(i,t.minimumOffset),s=_.max(e+lf,t.targetOffset),n=_.max(s+lf,t.maximumOffset);return{minimumOffset:e,targetOffset:s,maximumOffset:n,forceSeekOffset:_.max(n+lf,t.forceSeekOffset),minimumPlaybackRate:pu,maximumPlaybackRate:uf}}return t}(t):t}function pf(t){return{windowStart:t.minimumOffset,windowEnd:t.maximumOffset,target:t.targetOffset,maxOffset:t.forceSeekOffset}}var Wo=class extends Pl{get pA(){return pf(mf())}get yA(){}get cA(){}get MA(){}get Ww(){return!1}get TA(){}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=yf(this)}fA(){}constructor(...t){super(...t),this.NA=void 0}};function yf(t){return{goLive:()=>t.fA(),get isLive(){return t.Ww},get currentServerLiveTime(){return t.yA},get currentLatency(){return t.cA},get latencies(){return t.MA},get latency(){return t.pA},set latency(i){if(!function(t){if(!Ut(t))return!1;const i=t;return"number"==typeof i.target&&"number"==typeof i.windowEnd&&"number"==typeof i.windowStart&&"number"==typeof i.maxOffset&&(i.windowStart>=0&&i.windowStart<=i.target&&i.target<=i.windowEnd&&i.maxOffset>=i.windowEnd)}(i))throw new g("Invalid latency configuration");t.NA=i},get manifest(){return t.TA},addEventListener(i,e){t.yn(Tf(i),e)},removeEventListener(i,e){t.fn(Tf(i),e)}}}var Mf=["golive","latencyrecoveryseek"];function Tf(t){const i=ln(t,Va);return(Qs(i)?[i]:i).filter((t=>qt(Mf,t)))}var ua=class extends Pl{set fg(t){const i=this._g;t!==i&&(i&&this.gg(i),t&&this.Ag(t),this._g=t,this._g&&(this._g.NA=this.DA))}get fg(){return this._g}get va(){return this.Xa||(this.Xa=yf(this)),this.Xa}Ag(t){t.yn(Mf,this.Ds)}gg(t){t.fn(Mf,this.Ds)}fA(){var t;null==(t=this._g)||t.fA()}get yA(){var t;return null==(t=this._g)?void 0:t.yA}get cA(){var t;return null==(t=this._g)?void 0:t.cA}get MA(){var t;return null==(t=this._g)?void 0:t.MA}get Ww(){return!!this._g&&this._g.Ww}get pA(){return this._g?this._g.pA:null!=(t=this.DA)?t:pf(mf());var t}get NA(){return this._g?this._g.NA:this.DA}set NA(t){this._g&&(this._g.NA=t),this.DA=t}get TA(){var t;return null==(t=this._g)?void 0:t.TA}gn(){this.Vo(),this._g&&this.gg(this._g),this._g=void 0}constructor(){super(),this._g=void 0,this.Xa=void 0,this.DA=void 0,this._g=void 0}};function Tt(){return Tt=w.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var s in e)w.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Tt.apply(this,arguments)}var Nf="function"==typeof String.prototype.replaceAll?(t,i,e)=>t.replaceAll(i,e):(t,i,e)=>t.split(i).join(e);function Ni(t,i){return Yt(t)&&-1!==t.indexOf(i)}var Df="function"==typeof String.prototype.startsWith?(t,i)=>Yt(t)&&t.startsWith(i):(t,i)=>Yt(t)&&t.substr(0,i.length)===i,ll="function"==typeof String.prototype.endsWith?(t,i)=>Yt(t)&&t.endsWith(i):(t,i)=>Yt(t)&&t.substr(t.length-i.length,i.length)===i;function Pi(t,i){return t.length===i.length&&t.toUpperCase()===i.toUpperCase()}var If="function"==typeof String.prototype.repeat?(t,i)=>t.repeat(i):(t,i)=>{let e=0|i;if(0===t.length||0===e)return"";let s=t,n="";for(;1==(1&e)&&(n+=s),e>>>=1,0!==e;)s+=s;return n},xu="function"==typeof String.prototype.padStart?(t,i,e)=>(void 0===e&&(e=" "),t.padStart(i,e)):(t,i,e)=>{void 0===e&&(e=" ");let s=e;const n=(0|i)-t.length;return n<=0?t:(n>s.length&&(s+=If(s,n/s.length)),s.slice(0,n)+t)},Sf=(String.prototype.padEnd,16384),Ef="function"==typeof String.fromCodePoint?t=>t.length<=Sf?String.fromCodePoint(...t):bf(t,String.fromCodePoint):t=>{const i=[];for(let e of t)e>65535&&(e-=65536,i.push(e>>>10&1023|55296),e=56320|1023&e),i.push(e);return vl(i)};function vl(t){return t.length<=Sf?String.fromCharCode(...t):bf(t,String.fromCharCode)}function bf(t,i){const e=[];for(let s=0;s<t.length;s+=Sf)e.push(i(...t.slice(s,s+Sf)));return e.join("")}function Lf(t){return t.replace(/[\\"]/g,(t=>"\\"+t))}function pa(t,e){const s=i.Dh(t);return zo(s,e),s.toString()}function zo(t,i){for(const e of w.keys(i))t.searchParams.set(e,i[e])}function ma(t,e){let s=i.IA(t);return e&&!ll(s,"/")&&(s+="/"),s}var kf=/cache:(.+)?(?=&|$)/,Cf="http://webcache.googleusercontent.com/search?q=cache:";function xf(t){if(!Df(t,Cf))return"";const e=i.Dh(t).search.match(kf);return e&&e.length>1?e[1]:""}function Of(t){return i.Dh(".",t)}var ul,Kr,Z,jf="8E80B9CE";function zf(t){return{appID:t&&t.appID?Va(t.appID):jf}}function _o(t){if(null!==t)return t}function Pf(t){const e={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:_o(t.streamActivityMonitorID),adTagParameters:Ut(t.adTagParameters)?t.adTagParameters:{},authToken:_o(t.authToken),omidAccessModeRules:_o(t.omidAccessModeRules)};if("vod"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.videoID&&i.contentSourceID)}(t)){const s=t.videoID,n=t.contentSourceID;return s?n?Tt({},e,{availabilityType:"vod",videoID:s,contentSourceID:n}):void i.SA("A VOD DAI configuration was provided without valid contentSourceID which is required."):void i.SA("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.assetKey)}(t)){const s=t.assetKey;return s?Tt({},e,{availabilityType:"live",assetKey:s}):void i.SA("A Live DAI configuration was provided without valid assetKey which is required.")}i.SA("A DAI configuration was provided without a valid availabilityType which is required.")}function Bf(t){switch(t.integration){case"google-dai":return Pf(t);case"imagine":return function(t){return{integration:t.integration}}(t);default:return{integration:t.integration}}}!function(t){t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled"}(ul||(ul={})),function(t){t.EA="",t.bA="anonymous",t.LA="use-credentials"}(Kr||(Kr={})),function(t){t.kA="application/dash+xml",t.CA="application/vnd.apple.mpegurl",t.xA="application/x-mpegurl",t.OA="video/mp4",t.jA="application/vnd.theoplayer.hesp+json",t.zA="application/vnd.theo.hesp+json"}(Z||(Z={}));var N,Ji,Rf="titanium",Fc="conax",Uf="ezdrm",Qf="irdeto",Ff="vudrm",Cl="verimatrix",Yf="keyos",fn="drmtoday",Gf="expressplay",Vc="azure",pn="xstream",_l="vimond",vn="axinom",wl="uplynk",Vf="comcast",Wf="custom";function Hf(t,i){if(null==t)return{};var e,s,n={},r=w.keys(t);for(s=0;s<r.length;s++)e=r[s],i.indexOf(e)>=0||(n[e]=t[e]);return n}function qf(t){return Yt(t.token&&t.deviceId)}function Xf(t){var i;const e=null==(i=t.fairplay)?void 0:i.headers;return void 0!==e&&Yt(e.PreAuthorization)}function kl(t){const i=t;return qf(i)&&""!==i.token&&""!==i.deviceId&&!Xf(i)}!function(t){t.PA="playready",t.BA="widevine",t.RA="fairplay",t.UA="clearkey",t.QA="aes128"}(N||(N={})),function(t){t.FA=!1,t.YA=!1,t.GA=!1,t.VA=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.WA=!1,t.HA=!1,t.LOG_LCEVC_DETAILS=!1}(Ji||(Ji={}));var $i=class extends fh{get name(){return"THEOplayerError"}get category(){return nl.fromCode(this.code)}constructor(t,i,e){super(i,e),this.code=t}};var Qr=class extends $i{get name(){return"ContentProtectionError"}constructor(t,i,e,s,n,r,h,o){super(t,i,e),this.url=s,this.status=n,this.statusText=r,this.response=h,this.systemCode=o}};var Zf,Kf=class{get qA(){return this.XA}get ZA(){return this.KA}JA(t){return function(t){const i=t.onCertificateRequest;if(void 0!==i&&"function"!=typeof i)throw new b("ContentProtectionIntegration.onCertificateRequest is not a function.");const e=t.onCertificateResponse;if(void 0!==e&&"function"!=typeof e)throw new b("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new b("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new b("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new b("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.$A.build(t))}constructor(t,i,e){this.XA=t,this.KA=i,this.$A=e}};!function(t){t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED"}(Zf||(Zf={}));var Jf,da=class{registerContentProtectionIntegration(t,e,s){switch(this.rv(t,e,s)){case Zf.FAILED:throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+e+".");case Zf.OVERRIDDEN:{const s=Hc(e);i.SA("Warning: Overwriting an earlier registered integration for "+t+" and "+s+".");break}case Zf.SUCCEEDED:Hc(e);0;break}}rv(t,i,e){const s=Hc(i);if(!s)return Zf.FAILED;let n=Zf.SUCCEEDED;for(const i of this.hv.slice())i.qA===t&&i.ZA===s&&(n=Zf.OVERRIDDEN,To(this.hv,i));return this.hv.push(new Kf(t,s,e)),n}ov(t,i){return void 0!==this.uv(t,i)}fv(t,i,e){const s=this.uv(t,i);if(!s)throw g("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+i);return s.JA(e)}uv(t,i){for(const e of this.hv)if(e.qA===t&&(!i||e.ZA===i))return e}constructor(){this.hv=[]}};da._v=new da,function(t){t.PA="9a04f079-9840-4286-ab92-e65be0885f95",t.BA="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t.UA="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.RA="94ce86fb-07ff-4f43-adb8-93d2fa968ca2"}(Jf||(Jf={}));var Po,$f,ga,ui,Ee,t_="urn:mpeg:dash:mp4protection:2011",i_="cenc",e_="sinf",mn="skd",s_="9a04f079-9840-4286-ab92-e65be0885f95",qi="urn:uuid:"+s_,n_="com.microsoft.playready",r_="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",et="urn:uuid:"+r_,h_="com.widevine.alpha",o_="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",a_="urn:uuid:"+o_,Lc="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",ka="urn:uuid:"+Lc,u_="com.apple.fps.1_0",c_="com.apple.streamingkeydelivery",Ml="identity";!function(t){t.Av="moov",t.vv="mvhd",t.mv="trak",t.pv="tkhd",t.yv="mdia",t.Mv="mdhd",t.Tv="hdlr",t.Nv="minf",t.Dv="stbl",t.Iv="stsd",t.Sv="stsc",t.Ev="mvex",t.bv="trex",t.Lv="avc1",t.Cv="avcC",t.xv="hev1",t.Ov="hvc1",t.zv="hvcC",t.Pv="vp09",t.Bv="vpcC",t.Rv="av01",t.Uv="av1C",t.Qv="colr",t.Fv="pasp",t.Yv="mp4a",t.Gv="esds",t.Vv="fLaC",t.Wv="dfLa",t.Hv="wvtt",t.qv="vttC",t.Xv="vlab",t.Zv="enca",t.Kv="encv",t.Jv="moof",t.$v="mfhd",t.tm="traf",t.im="tfhd",t.nm="trun",t.hm="tfdt",t.um="senc",t.dm="mdat",t.lm="pssh",t.fm="emsg",t._m="sidx",t.gm="styp",t.wm="ftyp",t.Am="sinf",t.vm="frma"}(Po||(Po={})),function(t){t.pm="vide",t.ym="soun",t.Mm="subt",t.Tm="hint",t.Nm="meta",t.Dm="auxv"}($f||($f={})),function(t){t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof"}(ga||(ga={})),function(t){t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF"}(ui||(ui={})),function(t){t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT"}(Ee||(Ee={}));var d_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),l_=16383,f_=/[\t\n\f\r ]/g;function __(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:g_()}function g_(){throw new g("Invalid base64 input")}function Al(t){let i=t;f_.test(i)&&(i=i.replace(f_,""));let e=i.length;e%4==0&&e>=1&&"="===i[e-1]&&(e>=2&&"="===i[e-2]?e-=2:e-=1,i=i.substr(0,e));const s=e%4;if(1===s)return g_();const n=0===s?0:4-s,r=new j(function(t,i){return 3*(t+i)/4-i}(e,n)),h=n>0?e-4:e;let o,a=0,u=0;for(;a<h;a+=4)o=__(i.charCodeAt(a))<<18|__(i.charCodeAt(a+1))<<12|__(i.charCodeAt(a+2))<<6|__(i.charCodeAt(a+3)),r[u++]=o>>16&255,r[u++]=o>>8&255,r[u++]=255&o;return 2===n?(o=__(i.charCodeAt(a))<<2|__(i.charCodeAt(a+1))>>4,r[u++]=255&o):1===n&&(o=__(i.charCodeAt(a))<<10|__(i.charCodeAt(a+1))<<4|__(i.charCodeAt(a+2))>>2,r[u++]=o>>8&255,r[u++]=255&o),r}function w_(t,i,e){return d_[t>>2]+d_[(3&t)<<4|i>>4]+d_[(15&i)<<2|e>>6]+d_[63&e]}function A_(t,i,e){const s=[];for(let n=i;n<e;n+=3)s.push(w_(t[n],t[n+1],t[n+2]));return s.join("")}function Pe(t){const i=t.length,e=i%3,s=[],n=i-e;for(let i=0;i<n;i+=l_)s.push(A_(t,i,_.min(n,i+l_)));if(1===e){const e=t[i-1];s.push(d_[e>>2]+d_[(3&e)<<4]+"==")}else if(2===e){const e=t[i-2],n=t[i-1];s.push(d_[e>>2]+d_[(3&e)<<4|n>>4]+d_[(15&n)<<2]+"=")}return s.join("")}function v_(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}var m_=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],ba=ArrayBuffer.isView||(t=>t&&qt(m_,Td.call(t)));function p_(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;return Gi(new j(t),new j(i))}function Gi(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;for(let e=0;e<t.length;e+=1)if(t[e]!==i[e])return!1;return!0}function y_(t){const i=t.reduce(((t,i)=>t+i.byteLength),0);return jl(t,i)}function jl(t,i){const e=new j(i);let s=0;for(const i of t)e.set(i,s),s+=i.byteLength;return e}function M_(t,i,e){const s=new j(t.byteLength+i.byteLength),n=Xc(t,0,e),r=Xc(t,e);return s.set(n),s.set(i,e),s.set(r,e+i.byteLength),s}function Aa(t){return Al(t).buffer}function T_(t){return Pe(new j(t))}function wa(t){return Pe(Sa(t))}function rn(t,i){const e=i.Ku,s=t.getUint8(e>>3),n=1<<7-(7&e);return i.Im(1),(s&n)===n?1:0}function Eo(t,i,e){let s=0;for(let n=0;n<e;n++)s=2*s+rn(t,i);return s}var Wc=class t{get Ku(){return this.Zu}Im(t){this.Zu+=t}Sm(t){this.Zu=t}Em(){return new t(this.Ku)}constructor(t=0){this.Zu=t}};var N_=_.clz32||function(t){let i=32,e=t>>16;return e&&(i-=16,t=e),e=t>>8,e&&(i-=8,t=e),e=t>>4,e&&(i-=4,t=e),e=t>>2,e&&(i-=2,t=e),e=t>>1,e?i-2:i-t},J=null;try{J=new WebAssembly.Instance(new WebAssembly.Module(new j([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(r){}function ii(t,i,e){this.low=0|t,this.high=0|i,this.unsigned=!!e}function Bc(t){return!0===(t&&t.Lm)}function D_(t){var i=_.clz32(t&-t);return t?31-i:i}ii.prototype.Lm,w.defineProperty(ii.prototype,"Lm",{value:!0}),ii.isLong=Bc;var I_={},S_={};function E_(t,i){var e,s,n;return i?(n=0<=(t>>>=0)&&t<256)&&(s=S_[t])?s:(e=vi(t,0,!0),n&&(S_[t]=e),e):(n=-128<=(t|=0)&&t<128)&&(s=I_[t])?s:(e=vi(t,t<0?-1:0,!1),n&&(I_[t]=e),e)}function rt(t,i){if(S(t))return i?O_:qs;if(i){if(t<0)return O_;if(t>=k_)return B_}else{if(t<=-C_)return Da;if(t+1>=C_)return P_}return t<0?rt(-t,i).neg():vi(t%Qc|0,t/Qc|0,i)}function vi(t,i,e){return new ii(t,i,e)}ii.fromInt=E_,ii.fromNumber=rt,ii.fromBits=vi;var b_=_.pow;function L_(t,i,e){if(0===t.length)throw g("empty string");if("number"==typeof i?(e=i,i=!1):i=!!i,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return i?O_:qs;if((e=e||10)<2||36<e)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw g("interior hyphen");if(0===s)return L_(t.substring(1),i,e).neg();for(var n=rt(b_(e,8)),r=qs,h=0;h<t.length;h+=8){var o=_.min(8,t.length-h),a=x(t.substring(h,h+o),e);if(o<8){var u=rt(b_(e,o));r=r.mul(u).add(rt(a))}else r=(r=r.mul(n)).add(rt(a))}return r.unsigned=i,r}function Xe(t,i){return"number"==typeof t?rt(t,i):"string"==typeof t?L_(t,i):vi(t.low,t.high,"boolean"==typeof i?i:t.unsigned)}ii.fromString=L_,ii.fromValue=Xe;var Qc=4294967296,k_=Qc*Qc,C_=k_/2,x_=E_(1<<24),qs=E_(0);ii.ZERO=qs;var O_=E_(0,!0);ii.UZERO=O_;var Gc=E_(1);ii.ONE=Gc;var j_=E_(1,!0);ii.UONE=j_;var z_=E_(-1);ii.NEG_ONE=z_;var P_=vi(-1,2147483647,!1);ii.MAX_VALUE=P_;var B_=vi(-1,-1,!0);ii.MAX_UNSIGNED_VALUE=B_;var Da=vi(0,-2147483648,!1);ii.MIN_VALUE=Da;var _s=ii.prototype;_s.toInt=function(){return this.unsigned?this.low>>>0:this.low},_s.toNumber=function(){return this.unsigned?(this.high>>>0)*Qc+(this.low>>>0):this.high*Qc+(this.low>>>0)},_s.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(Da)){var i=rt(t),e=this.div(i),s=e.mul(i).sub(this);return e.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=rt(b_(t,6),this.unsigned),r=this,h="";;){var o=r.div(n),a=(r.sub(o.mul(n)).toInt()>>>0).toString(t);if((r=o).isZero())return a+h;for(;a.length<6;)a="0"+a;h=""+a+h}},_s.getHighBits=function(){return this.high},_s.getHighBitsUnsigned=function(){return this.high>>>0},_s.getLowBits=function(){return this.low},_s.getLowBitsUnsigned=function(){return this.low>>>0},_s.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Da)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,i=31;i>0&&0==(t&1<<i);i--);return 0!=this.high?i+33:i+1},_s.isZero=function(){return 0===this.high&&0===this.low},_s.eqz=_s.isZero,_s.isNegative=function(){return!this.unsigned&&this.high<0},_s.isPositive=function(){return this.unsigned||this.high>=0},_s.isOdd=function(){return 1==(1&this.low)},_s.isEven=function(){return 0==(1&this.low)},_s.equals=function(t){return Bc(t)||(t=Xe(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},_s.eq=_s.equals,_s.notEquals=function(t){return!this.eq(t)},_s.neq=_s.notEquals,_s.ne=_s.notEquals,_s.lessThan=function(t){return this.comp(t)<0},_s.lt=_s.lessThan,_s.lessThanOrEqual=function(t){return this.comp(t)<=0},_s.lte=_s.lessThanOrEqual,_s.le=_s.lessThanOrEqual,_s.greaterThan=function(t){return this.comp(t)>0},_s.gt=_s.greaterThan,_s.greaterThanOrEqual=function(t){return this.comp(t)>=0},_s.gte=_s.greaterThanOrEqual,_s.ge=_s.greaterThanOrEqual,_s.compare=function(t){if(Bc(t)||(t=Xe(t)),this.eq(t))return 0;var i=this.isNegative(),e=t.isNegative();return i&&!e?-1:!i&&e?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},_s.comp=_s.compare,_s.negate=function(){return!this.unsigned&&this.eq(Da)?Da:this.not().add(Gc)},_s.neg=_s.negate,_s.add=function(t){Bc(t)||(t=Xe(t));var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=0,u=0,c=0,d=0;return c+=(d+=n+(65535&t.low))>>>16,u+=(c+=s+o)>>>16,a+=(u+=e+h)>>>16,a+=i+r,vi((c&=65535)<<16|(d&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},_s.subtract=function(t){return Bc(t)||(t=Xe(t)),this.add(t.neg())},_s.sub=_s.subtract,_s.multiply=function(t){if(this.isZero())return this;if(Bc(t)||(t=Xe(t)),J)return vi(J.mul(this.low,this.high,t.low,t.high),J.get_high(),this.unsigned);if(t.isZero())return this.unsigned?O_:qs;if(this.eq(Da))return t.isOdd()?Da:qs;if(t.eq(Da))return this.isOdd()?Da:qs;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(x_)&&t.lt(x_))return rt(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=65535&t.low,u=0,c=0,d=0,l=0;return d+=(l+=n*a)>>>16,c+=(d+=s*a)>>>16,d&=65535,c+=(d+=n*o)>>>16,u+=(c+=e*a)>>>16,c&=65535,u+=(c+=s*o)>>>16,c&=65535,u+=(c+=n*h)>>>16,u+=i*a+e*o+s*h+n*r,vi((d&=65535)<<16|(l&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},_s.mul=_s.multiply,_s.divide=function(t){if(Bc(t)||(t=Xe(t)),t.isZero())throw g("division by zero");var i,e,s;if(J)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?vi((this.unsigned?J.div_u:J.div_s)(this.low,this.high,t.low,t.high),J.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?O_:qs;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return O_;if(t.gt(this.shru(1)))return j_;s=O_}else{if(this.eq(Da))return t.eq(Gc)||t.eq(z_)?Da:t.eq(Da)?Gc:(i=this.shr(1).div(t).shl(1)).eq(qs)?t.isNegative()?Gc:z_:(e=this.sub(t.mul(i)),s=i.add(e.div(t)));if(t.eq(Da))return this.unsigned?O_:qs;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=qs}for(e=this;e.gte(t);){i=_.max(1,_.floor(e.toNumber()/t.toNumber()));for(var n=_.ceil(_.log(i)/_.LN2),r=n<=48?1:b_(2,n-48),h=rt(i),o=h.mul(t);o.isNegative()||o.gt(e);)o=(h=rt(i-=r,this.unsigned)).mul(t);h.isZero()&&(h=Gc),s=s.add(h),e=e.sub(o)}return s},_s.div=_s.divide,_s.modulo=function(t){return Bc(t)||(t=Xe(t)),J?vi((this.unsigned?J.rem_u:J.rem_s)(this.low,this.high,t.low,t.high),J.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},_s.mod=_s.modulo,_s.rem=_s.modulo,_s.not=function(){return vi(~this.low,~this.high,this.unsigned)},_s.countLeadingZeros=function(){return this.high?_.clz32(this.high):_.clz32(this.low)+32},_s.clz=_s.countLeadingZeros,_s.countTrailingZeros=function(){return this.low?D_(this.low):D_(this.high)+32},_s.ctz=_s.countTrailingZeros,_s.and=function(t){return Bc(t)||(t=Xe(t)),vi(this.low&t.low,this.high&t.high,this.unsigned)},_s.or=function(t){return Bc(t)||(t=Xe(t)),vi(this.low|t.low,this.high|t.high,this.unsigned)},_s.xor=function(t){return Bc(t)||(t=Xe(t)),vi(this.low^t.low,this.high^t.high,this.unsigned)},_s.shiftLeft=function(t){return Bc(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?vi(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):vi(0,this.low<<t-32,this.unsigned)},_s.shl=_s.shiftLeft,_s.shiftRight=function(t){return Bc(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?vi(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):vi(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},_s.shr=_s.shiftRight,_s.shiftRightUnsigned=function(t){return Bc(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?vi(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):vi(32===t?this.high:this.high>>>t-32,0,this.unsigned)},_s.shru=_s.shiftRightUnsigned,_s.shr_u=_s.shiftRightUnsigned,_s.rotateLeft=function(t){var i;return Bc(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?vi(this.high,this.low,this.unsigned):t<32?(i=32-t,vi(this.low<<t|this.high>>>i,this.high<<t|this.low>>>i,this.unsigned)):(i=32-(t-=32),vi(this.high<<t|this.low>>>i,this.low<<t|this.high>>>i,this.unsigned))},_s.rotl=_s.rotateLeft,_s.rotateRight=function(t){var i;return Bc(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?vi(this.high,this.low,this.unsigned):t<32?(i=32-t,vi(this.high<<i|this.low>>>t,this.low<<i|this.high>>>t,this.unsigned)):(i=32-(t-=32),vi(this.low<<i|this.high>>>t,this.high<<i|this.low>>>t,this.unsigned))},_s.rotr=_s.rotateRight,_s.toSigned=function(){return this.unsigned?vi(this.low,this.high,!1):this},_s.toUnsigned=function(){return this.unsigned?this:vi(this.low,this.high,!0)},_s.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},_s.toBytesLE=function(){var t=this.high,i=this.low;return[255&i,i>>>8&255,i>>>16&255,i>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},_s.toBytesBE=function(){var t=this.high,i=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i]},ii.fromBytes=function(t,i,e){return e?ii.fromBytesLE(t,i):ii.fromBytesBE(t,i)},ii.fromBytesLE=function(t,i){return new ii(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,i)},ii.fromBytesBE=function(t,i){return new ii(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],i)};var qo=ii;function R_(t,i){return t.lessThan(i)?t:i}function U_(t){if(t>=55296&&t<=57343)throw new g("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Q_(t,i){return t>>i&63|128}function F_(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(U_(t),i.push(t>>12&15|224),i.push(Q_(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(Q_(t,12)),i.push(Q_(t,6))),i.push(63&t|128)):i.push(t)}function Yc(t,i){if(i.Ku>=t.length)throw new g("Invalid byte index");const e=255&t[i.Ku];if(i.Im(1),128==(192&e))return 63&e;throw new g("Invalid continuation byte")}function Y_(t,i){const e=i.Ku;if(e>t.length)throw new g("Invalid byte index");if(e===t.length)return!1;const s=255&t[e];if(i.Im(1),0==(128&s))return s;if(192==(224&s)){const e=(31&s)<<6|Yc(t,i);if(e>=128)return e;throw new g("Invalid continuation byte")}if(224==(240&s)){const e=(15&s)<<12|Yc(t,i)<<6|Yc(t,i);if(e>=2048)return U_(e),e;throw new g("Invalid continuation byte")}if(240==(248&s)){const e=(7&s)<<18|Yc(t,i)<<12|Yc(t,i)<<6|Yc(t,i);if(e>=65536&&e<=1114111)return e}throw new g("Invalid UTF-8 detected")}var G_=65279;var V_=[128,64,32,16,8,4,2,1],W_=class{Cm(t){return H_(this.xm,t)}constructor(t){this.xm=t}};function H_(t,i){return(t&i)===i}function su(t,i){return H_(t,V_[i])}function hl(t,i){const e=t.getUint8(i.Ku);return i.Im(1),e}function q_(t,i,e){t.setUint8(i.Ku,e),i.Im(1)}function Eu(t,i,e){const s=Xc(Zn(t),i.Ku,i.Ku+e);return i.Im(s.byteLength),s}function bn(t,i,e){Zn(t).set(Zn(e),i.Ku),i.Im(e.byteLength)}function X_(t,i,e){return i.Ku+e<=t.byteLength}function ol(t,i,e,s){return void 0===s&&(s=!1),s?function(t,i,e){let s=0,n=1;for(let r=0;r<e;r++)s+=hl(t,i)*n,n*=256;return s}(t,i,e):function(t,i,e){let s=0;for(let n=0;n<e;n++)s=256*s+hl(t,i);return s}(t,i,e)}function tl(t,i,e){void 0===e&&(e=!1);const s=t.getUint16(i.Ku,e);return i.Im(2),s}function Z_(t,i,e,s){void 0===s&&(s=!1),t.setUint16(i.Ku,e,s),i.Im(2)}function oo(t,i,e){void 0===e&&(e=!1);const s=t.getUint32(i.Ku,e);return i.Im(4),s}function ea(t,i,e,s){void 0===s&&(s=!1),t.setUint32(i.Ku,e,s),i.Im(4)}function Fe(t,i,e){void 0===e&&(e=!1);const s=oo(t,i,e),n=oo(t,i,e),r=e?n:s,h=e?s:n;return qo.fromBits(h,r,!0)}function K_(t,i,e,s){void 0===s&&(s=!1);const n=e.getHighBitsUnsigned(),r=e.getLowBitsUnsigned(),h=s?n:r;ea(t,i,s?r:n,s),ea(t,i,h,s)}function dl(t,i){return $_(t,i)}function _h(t,i,e){return vl(dg(Eu(t,i,e)))}function J_(t,i){const e=hl(t,i);let s;return 0==(128&e)?s=e:192==(224&e)?s=64*(31&e)+(63&hl(t,i)):224==(240&e)?s=4096*(15&e)+64*(63&hl(t,i))+(63&hl(t,i)):240==(248&e)&&(s=262144*(7&e)+4096*(63&hl(t,i))+64*(63&hl(t,i))+(63&hl(t,i))),s}function $_(t,i){return tg(t,i,!0)}function tg(t,i,e){const s=[];for(;i.Ku<t.byteLength;){const n=hl(t,i);if(e&&!n)break;s.push(n)}return vl(s)}function ig(t,i,e){const s=e.length;for(let n=0;n<s;n+=1){q_(t,i,e.charCodeAt(n))}}function eg(t,i){if(!(i.Ku+2<=t.byteLength))return;const e=t.getUint8(i.Ku),s=t.getUint8(i.Ku+1);return(254!==e||255!==s)&&(255===e&&254===s||void 0)}function sg(t,i){const e=eg(t,i);return void 0!==e&&i.Im(2),Ta(t,i,!0===e)}function Ta(t,i,e){return void 0===e&&(e=!1),ng(t,i,e,!0)}function ng(t,i,e,s){const n=[];for(;i.Ku+2<=t.byteLength;){const r=tl(t,i,e);if(s&&!r)break;n.push(r)}return vl(n)}function rg(t,i,e,s){void 0===s&&(s=!1);const n=e.length;for(let r=0;r<n;r+=1){Z_(t,i,e.charCodeAt(r),s)}}function Qi(t){return tg(ha(t),new L,!1)}function Sa(t){const i=new j(t.length);return ig(ha(i),new L,t),i}function hg(t,i){return void 0===i&&(i=!1),ng(ha(t),new L,i,!1)}function og(t,i){void 0===i&&(i=!1);const e=new j(2*t.length);return rg(ha(e),new L,t,i),e}function ag(t,i){return i.Ku+3<=t.byteLength&&(239===t.getUint8(i.Ku)&&187===t.getUint8(i.Ku+1)&&191===t.getUint8(i.Ku+2))}function yl(t,i){return function(t,i,e){const s=[],n=ag(t,i);n&&i.Im(3);for(;i.Ku<t.byteLength;){const n=J_(t,i);if(void 0===n)break;if(e&&0===n)break;s.push(n)}return Ef(s)}(t,i,!0)}function _a(t){return function(t){return Ef(t)}(function(t,i){const e=[],s=new L;let n;if(!i){if(n=Y_(t,s),!1===n)return e;n===G_||e.push(n)}for(;!1!==(n=Y_(t,s));)e.push(n);return e}(Zn(t)))}function ug(t){return new j(function(t){const i=[];for(const e of t)F_(e,i);return i}(function(t){const i=[];let e=0;const s=t.length;for(;e<s;){const n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){const s=t.charCodeAt(e++);56320==(64512&s)?i.push(((1023&n)<<10)+(1023&s)+65536):(i.push(n),e--)}else i.push(n)}return i}(t)))}function pl(t,i){if(ag(t,i))return yl(t,i);if(void 0!==eg(t,i))return sg(t,i);if(i.Ku+4<=t.byteLength){if(0===t.getUint8(i.Ku)&&0===t.getUint8(i.Ku+2))return Ta(t,i,!1);if(0===t.getUint8(i.Ku+1)&&0===t.getUint8(i.Ku+3))return Ta(t,i,!0)}return yl(t,i)}function Xc(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new j(t.buffer,t.byteOffset+i,e-i)}function qe(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function ha(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Zn(t){return new j(t.buffer,t.byteOffset,t.byteLength)}function cg(t){return t instanceof ArrayBuffer||ba(t)}function ve(t){return t instanceof ArrayBuffer?new j(t):Zn(t)}function Nh(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),t.slice?t.slice(i,e):it(Xc(t,i,e))}function it(t){if(t.slice)return t.slice(0);{const i=new j(t.byteLength);return i.set(t,0),i}}function dg(t){return[].slice.call(t)}var L=class t{get Ku(){return this.Zu}Im(t){this.Zu+=t}Sm(t){this.Zu=t}Em(){return new t(this.Ku)}Om(){return new Wc(this.Ku<<3)}constructor(t=0){this.Zu=t}};function lg(t){let i=t.toLowerCase(),e=0,s=0;Df(i,"0x")&&(i=i.substring(2));const n=new j(_.ceil(i.length/2));for(1==(1&i.length)&&(e=1,n[s++]=x(i[0],16));e<i.length;e+=2)n[s++]=x(i.substr(e,2),16);return n}function fg(t){return.001*t}var Th=class t{jm(){return hl(this.zm,this.Pm)}Bm(){return tl(this.zm,this.Pm)}Rm(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt16(i.Ku,e);return i.Im(2),s}(this.zm,this.Pm)}Um(){return oo(this.zm,this.Pm)}Qm(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt32(i.Ku,e);return i.Im(4),s}(this.zm,this.Pm)}Fm(){return Fe(this.zm,this.Pm)}Ym(t){return Eu(this.zm,this.Pm,t)}Gm(t){return function(t,i,e){const s=[];for(let n=0;n<e;n++)s.push(oo(t,i));return s}(this.zm,this.Pm,t)}Vm(t){return _h(this.zm,this.Pm,t)}Wm(){return yl(this.zm,this.Pm)}Hm(t){this.Pm.Im(t)}Em(){return new t(this.zm,this.Pm.Em())}constructor(t,i){this.zm=t,this.Pm=i}};function _g(t,i){return t.Rg===i}function il(t,i){for(const e of t)if(_g(e,i))return e}var gl=class extends fh{get name(){return"DataIncompleteError"}constructor(t,i){super(),this.qm=t,this.Xm=i}},At=class t{static Zm(i){const e=i.zm,s=i.Pm,n=t.Km(e,s,!1);if(!n.Jm)throw new gl(s.Ku,n.m);return n.m}static Km(i,e,s){const n=[];for(;e.Ku<i.byteLength;){const r=t.$m(i,e,s);if(!r.Jm)return{Jm:!1,m:n};n.push(r.tp)}return{Jm:!0,m:n}}static ip(i,e){const s=t.$m(i,e,!1);if(!s.Jm)throw new gl(e.Ku);return s.tp}static ep(i,e){const s=i.zm,n=i.Pm;for(;n.Ku<s.byteLength;){const i=t.$m(s,n,!1);if(!i.Jm)return;if(i.tp.Rg===e)return i.tp}}static $m(i,e,s){const n=e.Ku,r=t.sp(i,e);if(!r.Jm)return r;const h=r.np;let o=h.rp;if(0===o){if(s)return e.Sm(n),{Jm:!1,hp:1/0};o=i.byteLength-n}const a=n+o;if(a>i.byteLength){const t=a;return e.Sm(n),{Jm:!1,hp:t}}const u={Rg:h.Rg,Ku:n,zm:new Th(qe(i,n,a),new L(h.op))};return e.Sm(a),{Jm:!0,tp:u}}static sp(t,i){const e=i.Ku;if(!X_(t,i,8)){return{Jm:!1,hp:i.Ku+8}}let s=oo(t,i),n=_h(t,i,4);if(1===s){if(!X_(t,i,8)){const t=i.Ku+8;return i.Sm(e),{Jm:!1,hp:t}}s=Fe(t,i).toNumber()}if("uuid"===n){if(!X_(t,i,16)){const t=i.Ku+16;return i.Sm(e),{Jm:!1,hp:t}}n=_h(t,i,16)}return{Jm:!0,np:{Rg:n,rp:s,op:i.Ku-e}}}static ap(t,i,e){const s=t.zm,n=t.Pm;let r=Xc(Zn(s),n.Ku,s.byteLength);return e&&(r=it(r)),n.Im(r.byteLength),{Rg:i,zm:r}}static cp(i,e,s){const n=i.Um(),{version:r,flags:h}=gg(n);return{Rg:e,dp:r,lp:h,zm:t.ap(i,e,s).zm}}};function gs(t,i){const e=ml(t,i);if(!e)throw new g("Missing "+i+" atom");return e}function ml(t,i){for(const e of t)if(e.Rg===i)return e.zm}function xn(t,i){const e=[];for(const s of t)s.Rg===i&&e.push(s.zm);return e}function gg(t){return{version:t>>24,flags:new W_(16777215&t)}}var no=class t{static fp(i){const e=[],s=At.Zm(new Th(i,new L));for(const i of s){const s=t._p(i);s&&e.push(s)}return e}static gp(t){return At.Km(t,new L,!1).m.some(this.wp)}static Ap(i){return xn(At.Zm(new Th(i,new L)),Po.lm).map(t.vp)}static mp(i){return xn(At.Zm(i.zm),Po.lm).map(t.vp)}static wp(t){return t.Rg===Po.wm||t.Rg===Po.gm||t.Rg===Po.Av||t.Rg===Po.Jv||t.Rg===Po.dm||t.Rg===Po._m||t.Rg===Po.fm}static _p(i){switch(i.Rg){case Po.Av:return t.pp(i.zm);case Po.Jv:return t.yp(i.zm,i.Ku);case Po.dm:return t.Mp(i.zm);case Po._m:return t.Tp(i.zm);case Po.fm:return t.Np(i.zm)}}static pp(i){const e=At.Zm(i),s=gs(e,Po.vv),n=xn(e,Po.mv),r=ml(e,Po.Ev),h=t.Dp(s),o=n.map(t.Ip),a=r?t.Sp(r):void 0;return{Rg:Po.Av,np:h,Z:o,Ep:a}}static Dp(t){const i=t.Um(),{version:e,flags:s}=gg(i),n=1===e?t.Fm():t.Um(),r=1===e?t.Fm():t.Um(),h=t.Um(),o=1===e?t.Fm():t.Um(),a=t.Um(),u=t.Bm()>>8;t.Hm(2),t.Hm(8);const c=t.Gm(9);t.Hm(24);const d=t.Um();return{Rg:Po.vv,dp:e,lp:s,bp:n,Lp:r,kp:h,ct:o,Cp:a,c_:u,xp:c,Op:d}}static Ip(i){const e=At.Zm(i),s=gs(e,Po.pv),n=gs(e,Po.yv),r=t.jp(s),h=t.zp(n);return{Rg:Po.mv,np:r,Pp:h}}static jp(t){const i=t.Um(),{version:e,flags:s}=gg(i),n=1===e?t.Fm():t.Um(),r=1===e?t.Fm():t.Um(),h=t.Um();t.Hm(4);const o=1===e?t.Fm():t.Um();t.Hm(8);const a=t.Rm(),u=t.Rm(),c=t.Rm()/256;t.Hm(2);const d=t.Gm(9),l=t.Um()/65536,f=t.Um()/65536;return{Rg:Po.pv,Bp:s.Cm(1),Rp:s.Cm(2),Up:s.Cm(4),bp:n,Lp:r,Qp:h,ct:o,Fp:a,Yp:u,c_:c,xp:d,ji:l,Ti:f}}static zp(i){const e=At.Zm(i),s=gs(e,Po.Mv),n=gs(e,Po.Tv),r=gs(e,Po.Nv),h=t.Gp(s),o=t.Vp(n),a=t.Wp(r);return{Rg:Po.yv,np:h,Hp:o,qp:a}}static Gp(t){const i=t.Um(),{version:e,flags:s}=gg(i),n=1===e?t.Fm():t.Um(),r=1===e?t.Fm():t.Um(),h=t.Um(),o=1===e?t.Fm():t.Um();t.Bm();return t.Hm(2),{Rg:Po.Mv,dp:e,lp:s,bp:n,Lp:r,kp:h,ct:o}}static Vp(t){const i=t.Um(),{version:e,flags:s}=gg(i);t.Hm(4);const n=t.Vm(4);t.Hm(12);const r=t.Wm();return{Rg:Po.Tv,dp:e,lp:s,Xp:n,l:r}}static Wp(i){const e=gs(At.Zm(i),Po.Dv),s=t.Zp(e);return{Rg:Po.Nv,Kp:s}}static Zp(i){const e=gs(At.Zm(i),Po.Iv),s=t.Jp(e);return{Rg:Po.Dv,$p:s}}static Jp(i){const e=i.Um(),{version:s,flags:n}=gg(e),r=(i.Um(),[]),h=At.Zm(i);for(const i of h){const e=t.iy(i.zm,i.Rg);e&&r.push(e)}return{Rg:Po.Iv,dp:s,lp:n,ey:r}}static iy(i,e){let s=t.sy(i,e);return s||(s=t.oy(i,e),s||(e===Po.Hv?t.uy(i):void 0))}static sy(i,e){return e===Po.Yv?t.ly(i):e===Po.Vv||e===Po.Vv.toLowerCase()||e===Po.Vv.toUpperCase()?t._y(i):e===Po.Zv?t.gy(i):void 0}static oy(i,e){return e===Po.Lv?t.wy(i):e===Po.xv||e===Po.Ov?t.Ay(i,e):e===Po.Pv?t.vy(i,e):e===Po.Rv?t.py(i,e):e===Po.Kv?t.yy(i):void 0}static My(t,i){t.Hm(6);return{Rg:i,Ty:t.Bm()}}static Ny(i,e){const s=t.My(i,e);i.Hm(8);const n=i.Bm(),r=i.Bm();i.Hm(2),i.Hm(2);return Tt({},s,{Dy:n,Iy:r,Sy:i.Um()>>>16})}static Ey(i,e){const s=t.My(i,e);i.Hm(2),i.Hm(2),i.Hm(12);const n=i.Bm(),r=i.Bm(),h=i.Um(),o=i.Um();i.Hm(4);const a=i.Bm();i.Hm(32);const u=i.Bm();return i.Hm(2),Tt({},s,{ji:n,Ti:r,by:h,Ly:o,Cy:a,xy:u})}static ly(i){const e=t.Ny(i,Po.Yv),s=gs(At.Zm(i),Po.Gv);return Tt({},e,{Oy:t.jy(s)})}static _y(i){const e=t.Ny(i,Po.Vv),s=gs(At.Zm(i),Po.Wv);return Tt({},e,{zy:t.Py(s)})}static uy(i){const e=t.My(i,Po.Hv),s=At.Zm(i),n=gs(s,Po.qv),r=t.By(n),h=ml(s,Po.Xv);return Tt({},e,{Ry:r,Uy:h?t.Qy(h):void 0})}static By(t){return{Rg:Po.qv,wd:t.Wm()}}static Qy(t){return{Rg:Po.Xv,kh:t.Wm()}}static jy(t){return At.cp(t,Po.Gv,!0)}static Py(t){return At.cp(t,Po.Wv,!0)}static wy(i){const e=t.Ey(i,Po.Lv),s=At.Zm(i),n=gs(s,Po.Cv),r=ml(s,Po.Fv);return Tt({},e,{Fy:t.Yy(n),Gy:r?t.Vy(r):void 0})}static Ay(i,e){const s=t.Ey(i,e),n=gs(At.Zm(i),Po.zv);return Tt({},s,{Wy:t.Hy(n)})}static vy(i,e){const s=t.Ey(i,e),n=gs(At.Zm(i),Po.Bv);return Tt({},s,{qy:t.Xy(n)})}static py(i,e){const s=t.Ey(i,e),n=At.Zm(i),r=gs(n,Po.Uv),h=t.Zy(r),o=ml(n,Po.Qv);return Tt({},s,{Ky:h,Jy:o?t.$y(o):void 0})}static yy(i){const e=i.Em(),s=t.Ey(i,Po.Kv),n=gs(At.Zm(i),Po.Am),r=t.tM(n);return Tt({},s,{iM:t.oy(e,r.sM.eM),nM:r})}static gy(i){const e=i.Em(),s=t.Ny(i,Po.Zv),n=gs(At.Zm(i),Po.Am),r=t.tM(n);return Tt({},s,{iM:t.sy(e,r.sM.eM),nM:r})}static tM(i){const e=gs(At.Zm(i),Po.vm),s=t.rM(e);return{Rg:Po.Am,sM:s}}static rM(t){const i=t.Vm(4);return{Rg:Po.vm,eM:i}}static Yy(t){return At.ap(t,Po.Cv,!0)}static Hy(t){return At.ap(t,Po.zv,!0)}static Xy(t){return At.ap(t,Po.Bv,!0)}static Zy(t){return At.ap(t,Po.Uv,!0)}static $y(t){const i=t.Vm(4);switch(i){case"nclx":return{hM:ga.ON_SCREEN_COLOURS,oM:t.Bm(),aM:t.Bm(),uM:t.Bm(),cM:0!=(128&t.jm())};case"rICC":return{hM:ga.RESTRICTED_ICC_PROFILE};case"prof":return{hM:ga.UNRESTRICED_ICC_PROFILE};default:throw g("Could not parse ColourInformationBox: unknown type '"+i+"'.")}}static Vy(t){const i=t.Um(),e=t.Um();return{Rg:Po.Fv,dM:i,lM:e}}static Sp(i){const e=xn(At.Zm(i),Po.bv).map(t.fM);return{Rg:Po.Ev,Z:e}}static fM(t){const i=t.Um(),{version:e,flags:s}=gg(i),n=t.Um(),r=t.Um(),h=t.Um(),o=t.Um(),a=t.Um();return{Rg:Po.bv,dp:e,lp:s,Qp:n,_M:r,gM:h,wM:o,AM:a}}static yp(i,e){const s=At.Zm(i),n=gs(s,Po.$v),r=xn(s,Po.tm),h=t.vM(n),o=r.map(t.mM);return{Rg:Po.Jv,pM:e,np:h,Z:o}}static vM(t){const i=t.Um(),{version:e,flags:s}=gg(i),n=t.Um();return{Rg:Po.$v,dp:e,lp:s,yM:n}}static mM(i){const e=At.Zm(i),s=gs(e,Po.im),n=xn(e,Po.nm),r=ml(e,Po.hm),h=t.MM(s),o=n.map((i=>t.TM(i,h))),a=r?t.NM(r):void 0;return{Rg:Po.tm,np:h,DM:o,IM:a}}static MM(t){const i=t.Um(),{version:e,flags:s}=gg(i),n=t.Um(),r=s.Cm(ui.BASE_DATA_OFFSET_PRESENT)?t.Fm():void 0,h=s.Cm(ui.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.Um():void 0,o=s.Cm(ui.DEFAULT_SAMPLE_DURATION_PRESENT)?t.Um():void 0,a=s.Cm(ui.DEFAULT_SAMPLE_SIZE_PRESENT)?t.Um():void 0,u=s.Cm(ui.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.Um():void 0;return{Rg:Po.im,dp:e,lp:s,Qp:n,SM:r,EM:h,gM:o,wM:a,AM:u}}static TM(i,e){const s=i.Um(),{version:n,flags:r}=gg(s),h=i.Um(),o=r.Cm(Ee.DATA_OFFSET_PRESENT)?i.Qm():void 0,a=r.Cm(Ee.FIRST_SAMPLE_FLAGS_PRESENT)?i.Um():void 0,u=[];for(let s=0;s<h;s++){const h=t.bM(i,r,n,e);0===s&&void 0!==a&&(h.lp=a),u.push(h)}return{Rg:Po.nm,dp:n,lp:r,LM:h,pM:o,kM:a,CM:u}}static bM(t,i,e,s){return{ct:i.Cm(Ee.SAMPLE_DURATION_PRESENT)?t.Um():s.gM,rp:i.Cm(Ee.SAMPLE_SIZE_PRESENT)?t.Um():s.wM,lp:i.Cm(Ee.SAMPLE_FLAGS_PRESENT)?t.Um():s.AM,xM:i.Cm(Ee.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===e?t.Um():t.Qm():void 0}}static Np(t){const i=t.zm,e=t.Pm,s=oo(i,e),{version:n,flags:r}=gg(s);if(1===n){const t=oo(i,e),s=Fe(i,e),h=oo(i,e),o=oo(i,e),a=dl(i,e),u=dl(i,e),c=Nh(Zn(i),e.Ku,i.byteLength);return e.Im(c.byteLength),{Rg:Po.fm,dp:n,lp:r,OM:a,jM:u,kp:t,zM:s,PM:h,o:o,BM:c}}{const t=dl(i,e),s=dl(i,e),h=oo(i,e),o=oo(i,e),a=oo(i,e),u=oo(i,e),c=Nh(Zn(i),e.Ku,i.byteLength);return e.Im(c.byteLength),{Rg:Po.fm,lp:r,dp:n,OM:t,jM:s,kp:h,RM:o,PM:a,o:u,BM:c}}}static Mp(t){return At.ap(t,Po.dm,!1)}static vp(i){const e=i.zm,s=i.Pm,n=it(Zn(e)).buffer,r=oo(e,s),{version:h,flags:o}=gg(r),a=t.UM(e,s),u=[];if(h>0){const t=oo(e,s);for(let i=0;i<t;i++){const t=Eu(e,s,16);u.push(t)}}const c=oo(e,s),d=new j(n,s.Ku,c);return s.Im(e.byteLength),{Rg:Po.lm,dp:h,lp:o,QM:a,FM:u,YM:c,zm:d,GM:n}}static UM(t,i){let e="";for(let s=0;s<4;s++){const s=hl(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=hl(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=hl(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=hl(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<6;s++){const s=hl(t,i).toString(16);e+=1===s.length?"0"+s:s}return e.toLowerCase()}static Tp(t){const i=t.zm,e=t.Pm,s=oo(i,e),{version:n,flags:r}=gg(s),h=oo(i,e),o=oo(i,e);let a,u;0===n?(a=qo.fromBits(oo(i,e),0,!0),u=qo.fromBits(oo(i,e),0,!0)):(a=Fe(i,e),u=Fe(i,e)),e.Im(2);const c=tl(i,e),d=[];for(let t=0;t<c;t+=1){const t=oo(i,e),s=t>>31&1,n=2147483647&t,r=oo(i,e),h=oo(i,e),o=h>>31&1,a=h>>28&7,u=268435455&h;d.push({VM:s,WM:n,ct:r,HM:o,qM:a,XM:u})}return{Rg:Po._m,dp:n,lp:r,ZM:h,kp:o,KM:a,JM:u,$M:c,tT:d}}static NM(t){const i=t.zm,e=t.Pm,s=oo(i,e),{version:n,flags:r}=gg(s);let h;return h=0===n?qo.fromBits(oo(i,e),0,!0):Fe(i,e),{Rg:Po.hm,dp:n,lp:r,IM:h}}},wg={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function Ag(t){if(!t)return!0;const i=t.licenseAcquisitionURL,e=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,h=t.queryParameters;return!(i||e||s||n||r||h)}function vg(t){return t&&void 0!==t.licenseAcquisitionURL}var mg,pg,yg=vg,Mg=vg;function Tg(t){if(!t)return!0;if(Ig(t))return!1;const i=t.fairplay,e=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return Ag(i)&&Ag(e)&&Ag(s)&&void 0===n&&Ag(r)}function Ng(t){const i=kl(t),e=function(t){var i;const e=t;return Xf(e)&&""!==(null==(i=e.fairplay)?void 0:i.headers.PreAuthorization)&&!qf(e)}(t);return(!i||!e)&&(i||e)}function Dg(t){return t.integration===Qf}function cl(t){const i=t;if(!i)return!1;if(Tg(i))return!1;const e=i.fairplay,s=i.playready,n=i.widevine,r=i.clearkey;if(Ig(t))return!0;if(e&&!function(t){const i=t;return i&&(void 0!==i.certificateURL||void 0!==i.certificate)}(e))return!1;if(s&&!yg(s))return!1;if(n&&!Mg(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(i.integration){if(da._v.ov(i.integration))return!0;switch(i.integration){case Rf:if(!function(t){const i=t,e=i.integration===Rf;return e&&(Sg(t)||Eg(t))}(t))return!1;break;case Ff:if(!bg(t))return!1;break;case Cl:if(!function(t){const i=t;return i.integration===Cl}(t))return!1;break;case Qf:if(!Dg(t))return!1;break;case Fc:if(!Ng(t))return!1;break;case Uf:if(!function(t){const i=t;return i.integration===Uf}(t))return!1;break;case Yf:if(!Ig(t))return!1;break;case fn:if(!function(t){const i=t;return i.integration===fn&&(void 0!==i.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(i))}(t))return!1;break;case Gf:if(!function(t){const i=t;return i.integration===Gf}(t))return!1;break;case pn:if(!Lg(t))return!1;break;case _l:if(!function(t){return t.integration===_l}(t))return!1;break;case vn:if(!kg(t))return!1;break;case Vc:if(!function(t){const i=t;return i.integration===Vc&&void 0!==i.token}(t))return!1;break;case wl:if(!function(t){const i=t;return i.integration===wl}(t))return!1;break;case Vf:if(!function(t){const i=t;return i&&Yt(i.releasePid)&&Yt(i.accountId)&&Yt(i.token)}(t))return!1;break;case Wf:return!0;default:return!1}}return!0}function Ig(t){return t.integration===Yf}function Sg(t){return void 0!==t.authToken}function Eg(t){const i=t;return void 0!==i.accountName&&void 0!==i.customerName&&void 0!==i.portalId}function bg(t){const i=t;return i.integration===Ff&&void 0!==i.token}function Lg(t){const i=t;return i&&i.integration===pn&&Qs(i.ticketAcquisitionURL)&&Qs(i.streamId)}function kg(t){const i=t;return i.integration===vn&&void 0!==i.token}function Cg(t,i){const e=i[t];var s;const n=null!=(s=null==e?void 0:e.licenseAcquisitionURL)?s:wg[t];var r;const h=null!=(r=null==e?void 0:e.customdata)?r:i.customdata,o=h?{customData:h}:{};var a;const u=Tt({},null!=(a=null==e?void 0:e.headers)?a:{},o),c=null!=e?e:{},{customdata:d}=c;return Tt({},Hf(c,["customdata"]),{licenseAcquisitionURL:n,headers:u})}function Hc(t){switch(t.toLowerCase()){case"widevine":case et:return et;case"playready":case qi:return qi;case"fairplay":case ka:return ka}}function xg(t,i){switch(t){case i_:return function(t){const i={},e=no.Ap(new DataView(t));for(const t of e)i[t.QM]=t.GM;return i}(i);case e_:case mn:return function(t){return{[Lc]:t}}(i);default:throw new $i(Ui.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}function Og(t,i,e){const s=function(t,i,e){var s;const{useCredentials:n,crossOrigin:r}=function(t,i){let e=Kr.EA;return t.useCredentials?e=Kr.LA:t.crossOrigin&&(e=Zg(t.crossOrigin)),e===Kr.EA&&i&&i.vr&&i.vr[360]&&(e=Kr.bA),{useCredentials:e===Kr.LA,crossOrigin:e}}(t,i);let h=t.liveOffset;Yt(h)||(h=e&&Yt(e.liveOffset)?e.liveOffset:void 0);let o=t.timeServer;Yt(o)||(o=i&&Yt(i.timeServer)?i.timeServer:void 0);let a=t.hlsDateRange;Yt(a)||(a=e&&Yt(e.hlsDateRange)?Boolean(e.hlsDateRange):void 0);const u=Boolean(t.experimentalRendering),c=Boolean(t.nativeUiRendering),d=Boolean(t.lowLatency),l=Boolean(t.useNativePlayback),f=Boolean(t.useManagedMediaSource),_=Yt(t.dash)?zg(t.dash):void 0,g=Yt(t.hls)?Pg(t.hls):void 0,w=Rg(Tl(t.abr),null==e?void 0:e.abr),A=uu(t.lcevc),v=Yt(t.ignoreEmbeddedTextTrackTypes)?aw(t.ignoreEmbeddedTextTrackTypes):[];var m;const p=Hg(null!=(m=t.seamlessSwitchStrategy)?m:null==(s=t.dash)?void 0:s.useSeamlessPeriodSwitch),y=Wg(t.latencyConfiguration);return{crossOrigin:r,useCredentials:n,liveOffset:h,timeServer:o,hlsDateRange:a,experimentalRendering:u,nativeUiRendering:c,lowLatency:d,useNativePlayback:l,useManagedMediaSource:f,dash:_,hls:g,abr:w,lcevc:A,ignoreEmbeddedTextTrackTypes:v,seamlessSwitchStrategy:p,latencyConfiguration:y}}(t,i,e),n=_o(t.src);let r=t.type;r||(r=t.src?Xg(t.src):void 0);const h=function(t,i){let e;e=Yt(t.contentProtection)?t.contentProtection:Yt(t.drm)?t.drm:Yt(i)&&Yt(i.contentProtection)?i.contentProtection:Yt(i)&&Yt(i.drm)?i.drm:void 0;return jg(e)}(t,i);return Tt({},s,{src:n,type:r,contentProtection:h,ssai:Yt(t.ssai)?Bf(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function jg(t){return cl(t)&&t.integration&&t.integration===Yf?function(t){const i=Cg(N.BA,t),e=Cg(N.PA,t),s=t[N.RA]&&Cg(N.RA,t);return Tt({integration:"keyos",widevine:i,playready:e},s?{fairplay:s}:{})}(t):t}function zg(t){return{useSeamlessPeriodSwitch:Hg(null==t?void 0:t.useSeamlessPeriodSwitch),needsTimescaleShifting:uu(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?Na(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:uu(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:uu(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:uu(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards)}}function Pg(t){return{discontinuityAlignment:Bg(null==t?void 0:t.discontinuityAlignment),delaySubtitlePreload:Ws(null==t?void 0:t.delaySubtitlePreload)}}function Bg(t){if(!t||!Qs(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}function Tl(t){if(!Yt(t))return;return Ug(Kl(null==t?void 0:t.preferredAudioCodecs,Va),Kl(null==t?void 0:t.preferredVideoCodecs,Va),uu(null==t?void 0:t.restrictToPlayerSize))}function Rg(t,i){if(!Yt(t)&&!Yt(i))return;var e;return Ug(Qg(null==t?void 0:t.preferredAudioCodecs,null==i?void 0:i.preferredAudioCodecs),Qg(null==t?void 0:t.preferredVideoCodecs,null==i?void 0:i.preferredVideoCodecs),null!=(e=null==t?void 0:t.restrictToPlayerSize)?e:null==i?void 0:i.restrictToPlayerSize)}function Ug(t,i,e){if(0!==t.length||0!==i.length||void 0!==e)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===i.length?void 0:i,restrictToPlayerSize:e}}function Qg(t,i){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=i?i:[]}function Fg(t,i){if(void 0!==i)switch(t){case pg.pm:return i.preferredVideoCodecs;case pg.ym:return i.preferredAudioCodecs;default:return}}!function(t){t.iT="auto",t.eT="playlist",t.sT="media"}(mg||(mg={})),function(t){t.ym="audio",t.pm="video",t.Ru="text",t.nT="image",t.rT="unknown"}(pg||(pg={}));var si,es,oa,In,Kc,ae,Yg=.66,Gg=1.5,Vg=3;function Wg(t){if(!Yt(t))return;const i=t.targetOffset;var e;var s;var n;var r;var h;return{minimumOffset:null!=(e=t.minimumOffset)?e:i*Yg,targetOffset:i,maximumOffset:null!=(s=t.maximumOffset)?s:i*Gg,forceSeekOffset:null!=(n=t.forceSeekOffset)?n:i*Vg,minimumPlaybackRate:null!=(r=t.minimumPlaybackRate)?r:pu,maximumPlaybackRate:null!=(h=t.maximumPlaybackRate)?h:uf}}function Hg(t){if(!t||!Qs(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}function Ei(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":return!0;default:return!1}}function qg(t){return!!t&&Ni(t,"mpd")}function Xg(t){let i=Z.OA;return qg(t)&&(i=Z.kA),function(t){return!!t&&Ni(t,"m3u8")}(t)&&(i=Z.CA),i}function Zg(t){switch(t){case Kr.bA:case Kr.LA:return t;default:return Kr.EA}}function Kg(t){if(!t)return!1;const i=t.toLowerCase();return Df(i,Z.kA)}function Fa(t){if(!t)return!1;const i=t.toLowerCase();return Df(i,Z.CA)||Df(i,Z.xA)}function Ia(t){return Ut(t)&&Ut(t.ssai)&&"google-dai"===t.ssai.integration}function Jg(t){return Ut(t)&&Qs(t.integration)&&"verizon-media"===t.integration}function $g(t){return Ut(t)&&Qs(t.integration)&&"theolive"===t.integration}function tw(t){return Ut(t)&&Qs(t.integration)&&"mediatailor"===t.integration}function iw(t){if(Qs(t))return!t;if(Jg(t))return!t.id;if(Ia(t)){const i=t.ssai,e="live"===i.availabilityType&&i.assetKey,s="vod"===i.availabilityType&&i.contentSourceID&&i.videoID;return Boolean(e&&s)}return!t.src}function tr(t){return Boolean(Ut(t)&&Qs(t.src))}function ew(t){return t.type===Z.jA||t.type===Z.zA}function Ra(t){return Qs(t)||tr(t)||Ia(t)||Jg(t)}function bl(t){if(t){if(Ra(t))return iw(t);for(const i of t)if(!iw(i))return!1;return!0}return!0}function sw(){return{crossOrigin:Kr.EA,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[],seamlessSwitchStrategy:si.iT,latencyConfiguration:void 0}}function nw(){return Tt({},sw(),{src:void 0,type:Z.OA,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function rw(t){const i={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:oa.ENABLED,googleIma:{useNativeIma:!1,bitrate:-1,language:void 0,uiElements:void 0}};return void 0===t||(void 0!==t.preload&&(i.preload=function(t){return"none"===t?In.NONE:In.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(i.showCountdown=Ws(t.showCountdown)),void 0!==t.vpaidMode&&(i.vpaidMode=function(t){switch(t){case"insecure":return oa.INSECURE;case"disabled":return oa.DISABLED;default:return oa.ENABLED}}(t.vpaidMode)),Gt(t.allowedMimeTypes)&&(i.allowedMimeTypes=t.allowedMimeTypes.filter(Qs)),void 0!==t.googleIma&&(i.googleIma=function(t){return void 0===t?{useNativeIma:!1,bitrate:-1,language:void 0,uiElements:void 0}:{useNativeIma:Ws(t.useNativeIma),bitrate:null!=(i=t.bitrate)?i:-1,language:Yt(t.language)?Va(t.language):void 0,uiElements:t.uiElements};var i}(t.googleIma))),i}function hw(t){if(!mi(t))return[];const i=[];for(const e of t)Ut(e)&&i.push(e);return i}function ow(t){return Qs(t.src)}function aw(t){return Gt(t)?t.filter(Ei):[]}!function(t){t.iT="auto",t.hT="always",t.oT="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only"}(si||(si={})),function(t){t.VERIZON_MEDIA="verizon-media",t.MEDIATAILOR="mediatailor",t.THEOLIVE="theolive"}(es||(es={})),function(t){t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled"}(oa||(oa={})),function(t){t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll"}(In||(In={})),function(t){t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange"}(Kc||(Kc={})),function(t){t[t.aT=0]="aT",t[t.Xn=1]="Xn",t[t.uT=2]="uT",t[t.cT=3]="cT",t[t.dT=4]="dT"}(ae||(ae={}));var uw=class extends wn{constructor(t,i=ae.aT){super(l.Zg),this.currentTime=t,this.readyState=i}},ye=class extends wn{constructor(t){super(l.Sh),this.currentTime=t}},Ps=class extends wn{constructor(t){super(l.jh),this.currentTime=t}},ps=class extends wn{constructor(t,i=ae.Xn){super(er.Pw),this.currentTime=t,this.readyState=i}},ht=class extends wn{constructor(t){super(l.Xg),this.duration=t}},Oi=class extends wn{constructor(t,i){super(l.ww),this.currentTime=t,this.playbackRate=i}},nc=class extends wn{constructor(t,i){super(l.Sw),this.currentTime=t,this.currentProgramDateTime=i}},ie=class extends wn{constructor(t){super(l.Jg),this.currentTime=t}},ns=class extends wn{constructor(t,i=ae.uT){super(er.zw),this.currentTime=t,this.readyState=i}},Oe=class extends wn{constructor(t){super(l.yw),this.currentTime=t}},Ms=class extends wn{constructor(t){super(l.pw),this.currentTime=t}},lo=class extends wn{constructor(t,i){super(l.Ew),this.currentTime=t,this.volume=i}},gt=class extends wn{constructor(t,i=ae.cT){super(er.Ow),this.currentTime=t,this.readyState=i}},us=class extends wn{constructor(t,i=ae.dT){super(er.jw),this.currentTime=t,this.readyState=i}},Lr=class extends wn{constructor(t,i){super(er.H_),this.currentTime=t,this.readyState=i}},Bi=class extends yo{get error(){return this.errorObject.message}fa(){return this}constructor(t){super(hh.ha),this.errorObject=t}};async function hu(t,i,e,s,n){void 0===e&&(e=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(i)}catch(t){if(Ao(t),r<e){const t=_.min(s*2**r,n);r++,await ri(t,i);continue}throw t}}var cw,dw={maxRetries:1/0,minimumBackoff:200,maximumBackoff:3e4};function lw(t){switch(t){case"all":case"content":return t;default:return"none"}}function fw(t){const e=ms(t||{});return e.libraryLocation&&(e.libraryLocation=ma(e.libraryLocation,!0)),e.isEmbeddable=Boolean(e.isEmbeddable),e.cast=function(t){const i=zf(t?t.chromecast:void 0),e=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:i,strategy:e}}(e.cast),e.ads=rw(e.ads),e.analytics=hw(e.analytics),e.mutedAutoplay=lw(e.mutedAutoplay),e.allowNativeFullscreen=Boolean(e.allowNativeFullscreen),e.allowMixedContent=Boolean(e.allowMixedContent),e.persistVolume=Boolean(e.persistVolume),e.liveOffset=function(t){return Number(t)||void 0}(e.liveOffset),e.hlsDateRange=function(t){return Boolean(t)}(e.hlsDateRange),e.retainPlaybackRateOnSourceChange=Boolean(e.retainPlaybackRateOnSourceChange),e.license=function(t){return Qs(t)?t:void 0}(e.license),e.licenseUrl=function(t){if(!t)return;try{return ma(t)}catch(t){return void i.SA("Invalid 'licenseUrl', falling back to default URL")}}(e.licenseUrl),e.vr=function(t){return{useWebXR:Boolean(t&&t.useWebXR)}}(e.vr),e.abr=Tl(e.abr),e.retryConfiguration=function(t){const i=Tt({},dw);return void 0!==t&&(void 0!==t.maxRetries&&(i.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(i.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(i.maximumBackoff=Number(t.maximumBackoff))),i}(e.retryConfiguration),e.hideDeprecationWarnings=Boolean(e.hideDeprecationWarnings),e.theoLive=function(t){if(!t)return t;return Tt({},t,{externalSessionId:t.externalSessionId?Va(t.externalSessionId):void 0,fallbackEnabled:uu(t.fallbackEnabled)})}(e.theoLive),e}function _w(t){return{bt:t.bt,Mf:t.Mf,ct:t.ct,If:t.If,lt:t.lt,bf:t.bf,Pf:t.Pf,Ff:t.Ff,Gf:t.Gf,Jf:t.Jf,e_:t.e_,r_:t.r_,a_:t.a_,c_:t.c_}}function gw(t,i){const e=i.c_,s=i.Pf;t.c_=e,t.Pf=s}function au(t,i,e){if(i===e)return;const s=i.bt!==e.bt,n=i.Mf,r=i.ct,h=i.Pf,o=i.Ff,a=i.Gf,u=i.Jf,c=i.e_,d=(i.a_,i.r_,i.c_),l=e.Mf,f=e.ct,_=e.If,g=e.bf,w=e.Pf,A=e.Ff,v=e.Gf,m=e.Jf,p=e.e_,y=(e.a_,e.r_,e.c_);(s||u>ae.aT&&m===ae.aT)&&t.Co(new uw(l,m)),A&&!o?t.Co(new ye(l)):!A&&o&&t.Co(new Ps(l)),m>=ae.Xn&&(s||u<ae.Xn)&&t.Co(new ps(l,m)),f===r||S(f)&&S(r)||t.Co(new ht(f)),v!==a&&t.Co(new Oi(l,v)),l!==n&&t.Co(new nc(l,void 0)),_&&t.Co(new ie(l)),m>=ae.uT&&(s||u<ae.uT)&&t.Co(new ns(l,m)),p&&!c?t.Co(new Oe(l)):!p&&c&&t.Co(new Ms(l)),y===d&&w===h||t.Co(new lo(l,y)),m>=ae.cT&&(s||u<ae.cT)&&t.Co(new gt(l,m)),m>=ae.dT&&(s||u<ae.dT)&&t.Co(new us(l,m)),m!==u&&t.Co(new Lr(l,m)),g&&t.Co(new Bi(g))}!function(t){t.NONE="none",t.ALL="all",t.CONTENT="content"}(cw||(cw={}));var T=class extends wn{constructor(t){super(l.Hg),this.currentSource=t}},mu=class extends wn{constructor(){super(l.$g)}},ft=class extends wn{constructor(){super(l.ew)}},ww=class extends Qo{lf(){return this.lT}get kf(){return this.Cf()}Cf(){return this.fT}n_(){return this.Dl}o_(){return this._T}gT(t){const i=this._f;if(i===t)return;i.cf(this.b_);const e=_w(this),s=this.yf(),n=this.w_(),r=this.A_();this._f=t,this.lT.fg=t.ht,this._T.fg=t.rt,this.Dl.fg=t.nt,this.fT.fg=t.kf,void 0!==e&&au(this,e,this);const h=this.yf();h!==s&&this.Co(new T(h)),this.w_()!==n&&this.Co(new mu),this.A_()!==r&&this.Co(new ft),t.sf(this.b_)}async gn(){await super.gn(),this.lT.gn(),this._T.gn(),this.Dl.gn(),this.fT.gn()}constructor(t){super(t),this.lT=new zs,this._T=new zs,this.Dl=new tu,this.fT=new ua,this.lT.fg=t.ht,this._T.fg=t.rt,this.Dl.fg=t.nt,this.fT.fg=t.kf}};var Aw,vw=class extends ww{zf(){return function(t){let i=0,e=0,s=0,n=0,r=0,h=0,o=0;for(const a of t)i+=a.wT,e+=a.AT,s+=a.vT,n+=a.mT,r+=a.pT,h+=a.yT.amountOfBufferedAudioSegments,o+=a.yT.amountOfBufferedVideoSegments;return{wT:i,AT:e,vT:s,mT:n,pT:r,yT:{amountOfBufferedAudioSegments:h,amountOfBufferedVideoSegments:o}}}(this.MT.map((t=>t.jf)))}y_(){return Zc(this.MT.map((t=>t.y_()))).then(El)}tr(){return Zc(this.MT.map((t=>t.tr()))).then(El)}v_(){if(!this.bo){for(const t of this.MT)t.v_();this.bo=!0}}gf(){const t=[];for(const i of this.MT)t.push(...i.gf());return t}S_(t){let i=!1;for(const e of this.MT)i=e.S_(t)||i;return i}Co(t){this.S_(t)||super.Co(t)}get fg(){return this._f}set fg(t){this.gT(t)}TT(t){this.MT.push(t)}NT(t){To(this.MT,t)}gT(t){if(t===this._f)return;const i=this._f;i.ar(),super.gT(t),t.ur(i)}D_(){for(const t of this.MT)t.D_()}async gn(){this.Vo(),this._f.ar();for(const t of this.MT)this._f!==t&&await t.gn();await super.gn()}constructor(t){super(t),this.MT=[],this.bo=!1,this.DT=!1,this.TT(t)}};!function(t){t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR"}(Aw||(Aw={}));var Hu=class extends Dl{get name(){return"MediaError"}constructor(t,i,e,s){super(i),this.code=t,this.message=null!=i?i:"Unknown error",this.cause=e,this.systemCode=s,g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}};function mw(t){Do(t,"MEDIA_ERR_ABORTED",1),Do(t,"MEDIA_ERR_NETWORK",2),Do(t,"MEDIA_ERR_DECODE",3),Do(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),Do(t,"MEDIA_ERR_ENCRYPTED",5)}function De(t){var i,e;return function(t){return t.category===nl.CONTENT_PROTECTION}(t)?new Hu(5,t.message,null==(i=t.cause)?void 0:i.message,t.systemCode):new Hu(pw(t.code),t.message,null==(e=t.cause)?void 0:e.message)}function pw(t){if(t===Ui.MEDIA_ABORTED)return 1;if(t===Ui.MANIFEST_LOAD_ERROR||t===Ui.MEDIA_LOAD_ERROR||t===Ui.SUBTITLE_LOAD_ERROR)return 2;if(t===Ui.MEDIA_DECODE_ERROR)return 3;if(t===Ui.MEDIA_NOT_SUPPORTED)return 4;const i=nl.fromCode(t);return i===nl.NETWORK?2:i===nl.SOURCE?4:i===nl.LICENSE?6:i===nl.CONTENT_PROTECTION?5:i===nl.AD?7:3}function yw(t){return new $i(Mw(t.code),t.message,t)}function Mw(t){switch(t){case 1:return Ui.MEDIA_ABORTED;case 2:return Ui.NETWORK_ERROR;case 3:return Ui.MEDIA_DECODE_ERROR;case 4:return Ui.SOURCE_NOT_SUPPORTED;case 5:return Ui.CONTENT_PROTECTION_ERROR;case 6:return Ui.LICENSE_ERROR;case 7:return Ui.AD_ERROR}}mw(Hu),mw(Hu.prototype);var yi=class extends uo{tt(t){return super.tt(t)}fa(){return nf(this)}};var Tw=class{get og(){return this.IT}get U(){return this.IT.length}get va(){return this.Xa||(this.Xa=function(t){const i=t.og.map((t=>t.va));return i.item=i=>{const e=0|i,s=t.cg(e);return s&&s.va||void 0},i}(this)),this.Xa}ST(t){this.IT.push(t),this.Xa&&this.Xa.push(t.va)}ET(t){To(this.IT,t),this.Xa&&To(this.Xa,t.va)}cg(t){return this.IT[t]}bT(t){return Gt(t)?function(t,i){for(const e of i)if(!qt(t,e))return!1;return!0}(this.IT,t):qt(this.IT,t)}tr(){No(this.IT),this.Xa&&No(this.Xa)}constructor(){this.IT=[],this.Xa=void 0}},js=class extends ts{fa(){return new Nw(this.Lt.va)}constructor(t){super(Ce.K_),this.Lt=t}},Nw=class extends ks{constructor(t){super("update"),this.track=t}},Dw=0;function Iw(){return Dw++}var Sw=0;var Ew=0;function bw(){return Ew++}var Lw=0;function kw(){return Lw++}var Cw=0;var xw=class extends Pl{get yg(){}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.LT=t,this.Co(new Tn(this)))}get LT(){return this.kT.enabled}set LT(t){this.kT.enabled=t}get va(){return this.Xa||(this.Xa=Fi(this)),this.Xa}get o(){return this.CT}get Mg(){return this.xT}get zt(){return this.kT.kind}get kh(){return this.OT}set kh(t){t!==this.OT&&(this.OT=t,this.Co(new js(this)))}get gs(){return this.kT.language}get jg(){return this.Rt?"enabled":"disabled"}get jT(){return this.kT}get Ng(){return this.IT}get Dg(){}set Dg(t){}zT(t){this.Rt=t}PT(){this.Rt=this.LT}constructor(t){super(),this.Rg=pg.ym,this.Le=!1,this.Xa=void 0,this.kT=t,this.xT=Iw(),this.CT=Cw+++"",this.OT=t.label,this.IT=new Tw,this.PT()}},Ow=0;var Zs,Ja,jw=class extends Pl{get yg(){}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.LT=t,this.Co(new Tn(this)))}get LT(){return!!this.kT.selected}set LT(t){this.kT.selected=t}get va(){return this.Xa||(this.Xa=Fi(this)),this.Xa}get o(){return this.CT}get Mg(){return this.xT}get zt(){return"main"}get kh(){return this.OT}set kh(t){t!==this.OT&&(this.OT=t,this.Co(new js(this)))}get gs(){return this.kT.language}get jg(){return this.Rt?"enabled":"disabled"}get jT(){return this.kT}get Ng(){return this.IT}get Dg(){}set Dg(t){}PT(){this.Rt=this.LT}zT(t){this.Rt=t}constructor(t){super(),this.Rg=pg.pm,this.Le=!1,this.Xa=void 0,this.kT=t,this.xT=Iw(),this.CT=Ow+++"",this.IT=new Tw,this.OT=t.label,this.PT()}},zw=class extends wn{constructor(t){super(l.Qg),this.xf=t}};!function(t){t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR"}(Zs||(Zs={})),function(t){t.BT="cue",t.RT="region",t.UT="stylesheet"}(Ja||(Ja={}));var ku,Pw={"line-left":"start",center:"middle","line-right":"end"},Bw={start:"line-left",middle:"center",end:"line-right"};function Rw(t,i){if("auto"===t)switch(i){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function Uw(t,i){if("auto"===t)switch(i){case"left":return 0;case"right":return 100;default:return 50}return function(t,i){const e="number"==typeof t?t:C(t);return S(e)?i:e}(t,50)}!function(t){t.QT="mo",t.FT="So",t.K_="Yn"}(ku||(ku={}));var yu=class extends ts{constructor(t,i){super(t),this.YT=i}},za=class extends ks{constructor(t,i){super(t),this.cue=i}};function Mh(t){const i=[ku.QT,ku.FT,ku.K_];let e;const s={get track(){return t.Lt.va},get id(){return t.o},get uid(){return t.Mg},get startTime(){return t.GT},set startTime(i){t.GT=i},get endTime(){return t.VT},set endTime(i){t.VT=i},get content(){return t.O},addEventListener(t,i){const s=ln(t,Va);e.yn(s,i)},removeEventListener(t,i){const s=ln(t,Va);e.fn(s,i)}};return e=new wt(s),t.yn(i,(t=>e.Co(t.va))),s}function Qw(){}function Fw(t){return xl(Mh(t),{get align(){return t.WT},get line(){return t.HT},get lineAlign(){return t.qT},get position(){return t.po},get positionAlign(){return t.XT},get region(){return t.ZT?t.ZT.va:null},get size(){return t.rp},get snapToLines(){return t.KT},get text(){return t.O},get vertical(){return t.Pt}})}var $a=class extends yu{fa(){return new Yw(this.YT.va)}constructor(t){super(ku.K_,t)}},Yw=class extends za{constructor(t){super("update",t)}},fu=class extends ts{fa(){return new Gw(this.YT.va)}constructor(t){super(Ce.B_),this.YT=t}},Gw=class extends ks{constructor(t){super("updatecue"),this.cue=t}},Fn=.02;function Vw(t,i){return Ua(t.JT,i.JT,Fn)&&Ua(t.$T,i.$T,Fn)&&t.o===i.o}var Gs=class extends Pl{get GT(){return this.tN}set GT(t){var i,e;this.tN!==t&&(this.tN=t,null==(i=this.iN)||i.eN(this),this.Co(new $a(this)),null==(e=this.iN)||e.Co(new fu(this)))}get VT(){return this.sN}set VT(t){var i,e;this.sN!==t&&(this.sN=t,null==(i=this.iN)||i.eN(this),this.Co(new $a(this)),null==(e=this.iN)||e.Co(new fu(this)))}get o(){return this.CT}get Mg(){return this.xT}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return Mh(this)}get ro(){return this.ho}set ro(t){this.ho=t}get Lt(){return this.iN}set Lt(t){this.iN=t}get O(){return this.nN}set O(t){var i;this.nN!==t&&(this.nN=t,this.Co(new $a(this)),null==(i=this.iN)||i.Co(new fu(this)))}get rN(){return this.hN}set rN(t){this.hN=t}oN(t){return this===t||ql(this,t)&&Vw(this,t)&&this.aN(t)}aN(t){return fl(this.O,t.O)}uN(t,i){this.tN=t,this.sN=i,this.JT=t,this.$T=i}gn(){this.Vo()}constructor(t,i,e,s,n){super(),this.Xa=void 0,this.iN=void 0,this.ho=!1,this.cN=-1,this.xT=kw(),this.tN=t,this.sN=i,this.JT=t,this.$T=i,this.nN=e,this.hN=Boolean(s),this.CT=null!=n?n:""}};function Ww(t,i){return t.O===i.O&&t.HT===i.HT&&t.qT===i.qT&&t.po===i.po&&t.XT===i.XT&&t.ZT===i.ZT&&t.KT===i.KT&&t.rp===i.rp&&t.WT===i.WT&&t.Pt===i.Pt}var Hw=class extends Gs{get va(){return this.Xa||(this.Xa=Fw(this)),this.Xa}get Rg(){return Ja.BT}aN(t){return Ww(this,t)}constructor(t,i,e,s,n){super(t,i,e,s,n),this.HT="auto",this.qT="start",this.po="auto",this.XT="auto",this.ZT=void 0,this.KT=!0,this.rp=100,this.WT="center",this.Pt=""}};function qw(t){const i=t.HT,e=bd(i);return e&&!t.KT&&(i<0||i>100)?100:e?Number(i):t.KT?-1:100}function Xw(t){return Uw(t.po,t.WT)}function Zw(t){return Rw(t.XT,t.WT)}function Kw(t){const i=Zw(t),e=Xw(t);let s;switch(i){case"line-left":s=100-e;break;case"line-right":s=e;break;case"center":s=e<=50?2*e:2*(100-e)}return _.min(t.rp,s)}function Jw(t){return{get id(){return t.o},get identifier(){return t.o},get lines(){return t.dN},get regionAnchorX(){return t.lN},get regionAnchorY(){return t.fN},get scrollValue(){return t._N},get viewportAnchorX(){return t.gN},get viewportAnchorY(){return t.wN},get width(){return t.ji}}}var $w=class{get va(){return this.Xa||(this.Xa=Jw(this)),this.Xa}get Rg(){return Ja.RT}constructor(t,i,e,s,n,r,h,o){this.o=t,this.ji=i,this.dN=e,this.lN=s,this.fN=n,this.gN=r,this.wN=h,this._N=o}},tA=1e6,Hs=class{AN(t){return this.vN()*t}mN(t){return this.pN(t)>0}yN(t){return this.pN(t)>=0}MN(t,i){return this.NN(t).TN(i)}oN(t){return 0===this.pN(t)}DN(t){return this.pN(t)<0}TN(t){return this.pN(t)<=0}IN(){return this.SN()?this.EN():this}bN(t){return this.ST(t.EN())}NN(t){return this.bN(t).IN()}};function iA(t,i){return t.LN()?i.LN()?It.Zr:It.hd:i.LN()?It.Nd:t.kN()?i.kN()&&t.SN()===i.SN()?It.Zr:t.SN()?It.Nd:It.hd:i.SN()?It.hd:It.Nd}var eA=4294967296,sA=eA*eA,nA=sA*sA,rA=nA/2,rs=class t{static CN(i,e,s){return s?new t(i.toUnsigned(),e.toUnsigned()):new t(i.toSigned(),e.toSigned())}static xN(i){return i.unsigned?new t(i,qo.UZERO):new t(i,i.isNegative()?qo.NEG_ONE:qo.ZERO)}static ON(i,e){if(S(i))return e?t.jN:t.zN;if(e){if(i<0)return t.jN;if(i>=nA)return t.PN}else{if(i<=-rA)return t.BN;if(i+1>=rA)return t.RN}return i<0?t.ON(-i,e).EN():t.CN(qo.fromNumber(i%sA),qo.fromNumber(i/sA),e)}UN(){return this.QN.unsigned}FN(){return this.YN.isZero()&&this.QN.isZero()}SN(){return this.QN.isNegative()}GN(){return this.UN()?t.CN(this.YN,this.QN,!1):this}VN(){return this.UN()?this:t.CN(this.YN,this.QN,!0)}WN(){return this.YN}vN(){return this.SN()?-this.EN().vN():this.QN.toNumber()*sA+this.YN.toUnsigned().toNumber()}HN(){return this.YN.toInt()}oN(t){return(this.UN()===t.UN()||this.QN.getHighBits()>>>31!=1||t.QN.getHighBits()>>>31!=1)&&(this.QN.toUnsigned().eq(t.QN.toUnsigned())&&this.YN.toUnsigned().eq(t.YN.toUnsigned()))}pN(t){if(this.oN(t))return It.Zr;const i=this.SN(),e=t.SN();if(i&&!e)return It.Nd;if(!i&&e)return It.hd;if(!this.UN())return this.bN(t).SN()?It.Nd:It.hd;const s=this.VN(),n=t.VN(),r=n.QN.comp(s.QN);return r>0||0===r&&n.YN.gt(s.YN)?It.Nd:It.hd}DN(t){return this.pN(t)<0}TN(t){return this.pN(t)<=0}qN(t){return this.pN(t)>0}XN(t){return this.pN(t)>=0}ZN(){return new t(this.YN.not(),this.QN.not())}KN(i){return new t(this.YN.and(i.YN),this.QN.and(i.QN))}JN(i){return new t(this.YN.or(i.YN),this.QN.or(i.QN))}$N(i){const e=127&i;return 0===e?this:e<64?t.CN(this.YN.shl(e),this.QN.shl(e).or(this.YN.shru(64-e)),this.UN()):t.CN(qo.ZERO,this.YN.shl(e-64),this.UN())}tD(i){const e=127&i;return 0===e?this:e<64?t.CN(this.YN.shru(e).or(this.QN.shl(64-e)),this.QN.shr(e),this.UN()):t.CN(this.QN.shr(e-64),this.QN.isNegative()?qo.NEG_ONE:qo.ZERO,this.UN())}iD(i){const e=127&i;return 0===e?this:e<64?t.CN(this.YN.shru(e).or(this.QN.shl(64-e)),this.QN.shru(e),this.UN()):64===e?t.CN(this.QN,qo.ZERO,this.UN()):t.CN(this.QN.shru(e-64),qo.ZERO,this.UN())}ST(i){const e=this.QN.high>>>16,s=65535&this.QN.high,n=this.QN.low>>>16,r=65535&this.QN.low,h=this.YN.high>>>16,o=65535&this.YN.high,a=this.YN.low>>>16,u=65535&this.YN.low,c=i.QN.high>>>16,d=65535&i.QN.high,l=i.QN.low>>>16,f=65535&i.QN.low,_=i.YN.high>>>16,g=65535&i.YN.high,w=i.YN.low>>>16;let A=0,v=0,m=0,p=0,y=0,M=0,T=0,N=0;N+=u+(65535&i.YN.low),T+=N>>>16,N&=65535,T+=a+w,M+=T>>>16,T&=65535,M+=o+g,y+=M>>>16,M&=65535,y+=h+_,p+=y>>>16,y&=65535,p+=r+f,m+=p>>>16,p&=65535,m+=n+l,v+=m>>>16,m&=65535,v+=s+d,A+=v>>>16,v&=65535,A+=e+c,A&=65535;const D=this.UN(),I=qo.fromBits(m<<16|p,A<<16|v,D),S=qo.fromBits(T<<16|N,y<<16|M,D);return t.CN(S,I,D)}bN(t){return this.ST(t.EN())}EN(){return this.ZN().ST(t.eD)}sD(i){if(this.FN()||i.FN())return this.UN()?t.jN:t.zN;if(this.SN())return i.SN()?this.EN().sD(i.EN()):this.EN().sD(i).EN();if(i.SN())return this.sD(i.EN()).EN();if(this.QN.isZero()&&0===this.YN.high&&i.QN.isZero()&&0===i.YN.high)return t.xN(this.YN.multiply(i.YN));const e=qo.fromBits(4294967295,0,!0),s=this.YN.and(e),n=this.YN.shru(32),r=this.QN.and(e),h=this.QN.shru(32),o=i.YN.and(e),a=i.YN.shru(32),u=i.QN.and(e),c=i.QN.shru(32);let d=qo.UZERO,l=qo.UZERO,f=qo.UZERO,_=qo.UZERO;d=d.add(s.mul(o)),l=l.add(d.shru(32)),d=d.and(e),l=l.add(n.mul(o)),f=f.add(l.shru(32)),l=l.and(e),l=l.add(s.mul(a)),f=f.add(l.shru(32)),l=l.and(e),f=f.add(r.mul(o)),_=_.add(f.shru(32)),f=f.and(e),f=f.add(n.mul(a)),_=_.add(f.shru(32)),f=f.and(e),f=f.add(s.mul(u)),_=_.add(f.shru(32)),f=f.and(e),_=_.add(h.mul(o)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(e);const g=qo.fromBits(d.getLowBitsUnsigned(),l.getLowBitsUnsigned(),!0),w=qo.fromBits(f.getLowBitsUnsigned(),_.getLowBitsUnsigned(),!0);return t.CN(g,w,this.UN())}nD(i){let e,s,n=i;if(n.FN())throw new RangeError("division by zero");if(this.FN())return this.UN()?[t.jN,t.jN]:[t.zN,t.zN];if(this.UN()){if(n.UN()||(n=n.VN()),n.qN(this))return[t.jN,this];if(n.qN(this.iD(1)))return s=t.rD,e=this.bN(n),[s,e];s=t.jN}else{if(this.oN(t.BN)){if(n.oN(t.eD)||n.oN(t.hD))return[t.BN,t.zN];if(n.oN(t.BN))return[t.eD,t.zN];{const i=this.tD(1).oD(n).$N(1);return i.oN(t.zN)?s=n.SN()?t.eD:t.hD:(e=this.bN(n.sD(i)),s=i.ST(e.oD(n))),e=this.bN(n.sD(s)),[s,e]}}if(n.oN(t.BN))return this.UN()?[t.jN,this]:[t.zN,this];if(this.SN())return n.SN()?this.EN().nD(n.EN()):([s,e]=this.EN().nD(n),[s.EN(),e.EN()]);if(n.SN())return[s,e]=this.nD(n.EN()),[s.EN(),e.EN()];s=t.zN}for(e=this;e.XN(n);){let i=_.max(1,_.floor(e.vN()/n.vN()));const r=_.ceil(_.log(i)/_.LN2),h=r<=48?1:2**(r-48);let o=t.ON(i),a=o.sD(n);for(;a.SN()||a.qN(e);)i-=h,o=t.ON(i,this.UN()),a=o.sD(n);o.FN()&&(o=t.eD),s=s.ST(o),e=e.bN(a)}return[s,e]}oD(t){return this.nD(t)[0]}aD(t){return this.nD(t)[1]}toString(i){const e=i||10;if(e<2||e>36)throw new RangeError("radix");if(this.FN())return"0";if(this.SN()){if(this.oN(t.BN)){const i=t.ON(e),s=this.oD(i),n=s.sD(i).bN(this);return s.toString(e)+n.HN().toString(e)}return"-"+this.EN().toString(e)}const s=t.ON(e**6,this.UN());let n=this,r="";for(;;){const t=n.oD(s);let i=(n.bN(t.sD(s)).HN()>>>0).toString(e);if(n=t,n.FN())return i+r;for(;i.length<6;)i="0"+i;r=String(i)+r}}constructor(t,i){this.YN=t,this.QN=i}};rs.zN=rs.xN(qo.ZERO),rs.jN=rs.xN(qo.UZERO),rs.eD=rs.xN(qo.ONE),rs.rD=rs.xN(qo.UONE),rs.hD=rs.xN(qo.NEG_ONE),rs.RN=rs.CN(qo.NEG_ONE,qo.MAX_VALUE,!1),rs.PN=rs.CN(qo.MAX_UNSIGNED_VALUE,qo.MAX_UNSIGNED_VALUE,!0),rs.BN=rs.CN(qo.ZERO,qo.MIN_VALUE,!1);var hA=class t{get kN(){return!isFinite(this.uD)}get Kl(){return this.uD/this.kp}static cD(i){return new t(_.ceil(i.uD),i.kp)}static dD(i){return new t(_.floor(i.uD),i.kp)}static lD(t,i){return t.yN(i)?t:i}static fD(t,i){return t.TN(i)?t:i}ST(i){return this.kp>=i.kp?new t(this.uD+i._D(this.kp).uD,this.kp):new t(this._D(i.kp).uD+i.uD,i.kp)}mN(t){return t.DN(this)}yN(t){return t.TN(this)}NN(i){if(this.kp>=i.kp){const e=_.abs(this.uD-i._D(this.kp).uD),s=this.kp;return new t(e,s)}return i.NN(this)}MN(t,i){return this.NN(t).TN(i)}pN(t){return function(t,i){return t.kp>=i.kp?Bd(t.uD,i._D(t.kp).uD):Bd(t._D(i.kp).uD,i.uD)}(this,t)}oN(t){return 0===this.pN(t)}DN(t){return this.pN(t)<0}TN(t){return this.pN(t)<=0}_D(i){return new t(this.uD*(i/this.kp),i)}bN(i){return this.kp>=i.kp?new t(this.uD-i._D(this.kp).uD,this.kp):new t(this._D(i.kp).uD-i.uD,i.kp)}gD(i){return new t(this.uD*i,this.kp)}constructor(t,i=1){this.uD=t,this.kp=i}};hA.Zl=new hA(1/6,1),hA.zN=new hA(0),hA.wD=new hA(1/0),hA.vD=1e6;var Ah=class t extends Hs{static mD(i,e){return void 0===e&&(e=tA),t.ON(i*e,e)}static ON(i,e){return S(i)?t.pD:i===1/0?t.yD:i===-1/0?t.MD:new t(qo.fromNumber(i),e)}static xN(i,e){return new t(i,e)}static TD(i){return t.mD(i.Kl,tA)}static ND(i){return new t(qo.fromNumber(i.getTime()),1e3)}static lD(t,i){return t.yN(i)?t:i}static fD(t,i){return t.TN(i)?t:i}static DD(i,e,s){return t.lD(e,t.fD(s,i))}SN(){return this.jM.isNegative()}FN(){return 0!==this.kp&&this.jM.isZero()}kN(){return 0===this.kp&&!this.jM.isZero()}LN(){return 0===this.kp&&this.jM.isZero()}vN(){if(0===this.kp)return this.jM.isZero()?NaN:this.jM.isNegative()?-1/0:1/0;const t=this.jM.divide(this.kp),i=this.jM.subtract(t.multiply(this.kp));return t.toNumber()+i.toNumber()/this.kp}WN(){if(0===this.kp)throw new g("Failed to convert timestamp");return this.jM}SD(){return new Date(0===this.kp?NaN:this._D(1e3).jM.toNumber())}ED(){return new hA(0===this.kp?this.vN():this.jM.toNumber(),this.kp)}_D(i,e){void 0===e&&(e=va.bD);const s=this.kp;if(s===i)return this;if(0===s)return this;const n=zd(s,i),r=function(t,i,e){const[s,n]=t.nD(i);if(n.FN())return s;if(e===va.bD)return n.SN()?s.bN(rs.eD):s;if(e===va.LD)return n.SN()?s:s.ST(rs.eD);{const t=n.sD(rs.ON(2));return t.SN()?t.EN().DN(i)?s:s.bN(rs.eD):t.DN(i)?s:s.ST(rs.eD)}}(rs.xN(this.jM).sD(rs.ON(i/n)),rs.ON(s/n),e);return new t(r.WN(),i)}pN(t){if(this===t)return It.Zr;if(0===this.kp||0===t.kp)return iA(this,t);if(this.FN())return t.FN()?It.Zr:t.SN()?It.hd:It.Nd;if(t.FN())return this.SN()?It.Nd:It.hd;const i=_.min(this.kp,t.kp),e=this._D(i,va.kD).jM,s=t._D(i,va.kD).jM;return e.compare(s)}EN(){return 0===this.kp?function(t){0;return t.LN()?t:t.SN()?Ah.yD:Ah.MD}(this):new t(this.jM.negate(),this.kp)}ST(i){if(0===this.kp||0===i.kp)return function(t,i){0;if(t.LN()||i.LN())return Ah.pD;if(t.kN()&&i.kN())return t.SN()===i.SN()?t:Ah.pD;return t.kN()?t:i}(this,i);if(this.FN())return i;if(i.FN())return this;const e=_.max(this.kp,i.kp),s=this._D(e,va.kD),n=i._D(e,va.kD);return new t(s.jM.add(n.jM),e)}sD(i){if(this.LN()||S(i))return t.pD;if(this.kN()||!isFinite(i)){if(this.FN()||0===i)return t.pD;{const e=this.SN()?t.MD:t.yD;return i<0?e.EN():e}}return this.FN()?this:new t(0===i?qo.ZERO:this.jM.multiply(i),this.kp)}oD(i){if(this.LN()||S(i))return t.pD;if(this.kN())return isFinite(i)?0===i?1/i<0?this.EN():this:i<0?this.EN():this:t.pD;if(!isFinite(i))return new t(qo.ZERO,this.kp);if(this.FN())return 0===i?t.pD:new t(qo.ZERO,this.kp);if(0===i){const e=this.SN()?t.MD:t.yD;return 1/i<0?e.EN():e}return new t(this.jM.divide(i),this.kp)}CD(){return[this.jM.low,this.jM.high,this.kp]}constructor(t,i){super(),this.jM=t.toSigned(),this.kp=i>>>0}};Ah.zN=new Ah(qo.ZERO,tA),Ah.pD=new Ah(qo.ZERO,0),Ah.yD=new Ah(qo.ONE,0),Ah.MD=new Ah(qo.NEG_ONE,0);var va,Pt=class t extends Hs{static mD(i,e){return void 0===e&&(e=tA),t.ON(i*e,e)}static ON(i,e){return S(i)?t.pD:i===1/0?t.yD:i===-1/0?t.MD:new t(BigInt(_.floor(i)),e)}static xN(i,e){return new t(BigInt(i.high)<<BigInt(32)|BigInt(i.low>>>0),e)}static TD(i){return t.mD(i.Kl,tA)}static ND(i){return t.ON(i.getTime(),1e3)}static get zN(){return t.xD||(t.xD=new t(BigInt(0),tA)),t.xD}static get pD(){return t.OD||(t.OD=new t(BigInt(0),0)),t.OD}static get yD(){return t.jD||(t.jD=new t(BigInt(1),0)),t.jD}static get MD(){return t.zD||(t.zD=new t(BigInt(-1),0)),t.zD}static lD(t,i){return t.yN(i)?t:i}static fD(t,i){return t.TN(i)?t:i}static DD(i,e,s){return t.lD(e,t.fD(s,i))}SN(){return this.jM<BigInt(0)}FN(){return 0!==this.kp&&this.jM===BigInt(0)}kN(){return 0===this.kp&&this.jM!==BigInt(0)}LN(){return 0===this.kp&&this.jM===BigInt(0)}vN(){if(0===this.kp)return this.jM===BigInt(0)?NaN:this.jM<BigInt(0)?-1/0:1/0;const t=this.jM/BigInt(this.kp),i=this.jM-t*BigInt(this.kp);return Number(t)+Number(i)/this.kp}WN(){if(0===this.kp)throw new g("Failed to convert timestamp");return this.PD()}PD(){const t=this.jM&BigInt(4294967295),i=this.jM>>BigInt(32)&BigInt(4294967295);return qo.fromBits(Number(t),Number(i))}SD(){return new Date(0===this.kp?NaN:Number(this._D(1e3).jM))}ED(){return new hA(0===this.kp?this.vN():Number(this.jM),this.kp)}_D(i,e){void 0===e&&(e=va.bD);const s=this.kp;if(s===i)return this;if(0===s)return this;const n=zd(s,i),r=function(t,i,e){const s=t/i,n=t-s*i;if(n===BigInt(0))return s;if(e===va.bD)return n<BigInt(0)?s-BigInt(1):s;if(e===va.LD)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<i?s:s-BigInt(1):t<i?s:s+BigInt(1)}}(this.jM*BigInt(i/n),BigInt(s/n),e);return new t(r,i)}pN(t){if(this===t)return It.Zr;if(0===this.kp||0===t.kp)return iA(this,t);if(this.FN())return t.FN()?It.Zr:t.SN()?It.hd:It.Nd;if(t.FN())return this.SN()?It.Nd:It.hd;const i=_.min(this.kp,t.kp),e=this._D(i,va.kD).jM,s=t._D(i,va.kD).jM;return e>s?It.hd:e<s?It.Nd:It.Zr}EN(){return 0===this.kp?function(t){0;return t.LN()?t:t.SN()?Pt.yD:Pt.MD}(this):new t(-this.jM,this.kp)}ST(i){if(0===this.kp||0===i.kp)return function(t,i){0;if(t.LN()||i.LN())return Pt.pD;if(t.kN()&&i.kN())return t.SN()===i.SN()?t:Pt.pD;return t.kN()?t:i}(this,i);if(this.FN())return i;if(i.FN())return this;const e=_.max(this.kp,i.kp),s=this._D(e,va.kD),n=i._D(e,va.kD);return new t(s.jM+n.jM,e)}sD(i){if(this.LN()||S(i))return t.pD;if(this.kN()||!isFinite(i)){if(this.FN()||0===i)return t.pD;{const e=this.SN()?t.MD:t.yD;return i<0?e.EN():e}}return this.FN()?this:new t(0===i?BigInt(0):this.jM*BigInt(i),this.kp)}oD(i){if(this.LN()||S(i))return t.pD;if(this.kN())return isFinite(i)?0===i?1/i<0?this.EN():this:i<0?this.EN():this:t.pD;if(!isFinite(i))return new t(BigInt(0),this.kp);if(this.FN())return 0===i?t.pD:new t(BigInt(0),this.kp);if(0===i){const e=this.SN()?t.MD:t.yD;return 1/i<0?e.EN():e}return new t(this.jM/BigInt(i),this.kp)}CD(){const t=this.PD();return[t.low,t.high,this.kp]}constructor(t,i){super(),this.jM=BigInt.asIntN(64,t),this.kp=i>>>0}};Pt.xD=void 0,Pt.OD=void 0,Pt.jD=void 0,Pt.zD=void 0,function(t){t[t.bD=0]="bD",t[t.LD=1]="LD",t[t.kD=2]="kD"}(va||(va={}));var Ri=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?Pt:Ah;function oA(t,i){return t.pN(i)}function Nn(t,i){return void 0!==t?void 0!==i?Ri.fD(t,i):t:i}var aA=9e4,$n=qc((()=>Ri.ON(8589934592,aA))),uA=qc((()=>$n().oD(2)));var Li={BD:0,RD:1/0,UD:0},cA=6,dA=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],lA=[" ","\t","\n","\f","\r"],fA=/^\d*$/,_A=/.*[0-9]+.*/,gA=/^[\d.-]+$/,wA=/(^\.|\.$)/,AA=/(\D\.|\.\D)/;function vA(t,i){void 0===i&&(i=Li);return mA(pl(ha(t),new L),i)}function mA(t,i){void 0===i&&(i=Li);const e={L:[],QD:[],FD:[]},s=pA(t),n=new L;if(LA(s),gu(s,(t=>"\n"!==t),n),n.Ku>=s.length)return e;if(n.Im(1),"\n"!==s.charAt(n.Ku)){DA(yA(s,n,false,!0,e,i),e)}else n.Im(1);for(gu(s,(t=>"\n"===t),n);n.Ku<s.length;){DA(yA(s,n,false,!1,e,i),e),gu(s,(t=>"\n"===t),n)}return e}function pA(t){const i=Nf(t,"\0"," "),e=Nf(i,"\r\n","\n");return Nf(e,"\r","\n")}function gu(t,i,e){const s=e.Ku;for(;e.Ku<t.length&&i(t.charAt(e.Ku));)e.Im(1);return t.substring(s,e.Ku)}function yA(t,e,s,n,r,h){let o,a=0,u=e.Ku,c="",d=!1,l=!1,f=null,_=null,g=null;for(;!d;)if(o=gu(t,(t=>"\n"!==t),e),a++,e.Ku>=t.length?d=!0:e.Im(1),Ni(o,"--\x3e")){if(n||1!==a&&(2!==a||l)){e.Sm(u);break}l=!0,u=e.Ku,f=new Hw(0,0,"",!1,c);try{IA(o,r.QD,f,h),c=""}catch(t){i.SA(t),f=null}}else{if(""===o)break;n&&Df(o,"X-TIMESTAMP-MAP")&&(r.YD=MA(o)),n||2!==a||s||(Pi("STYLE",c.replace(/ /g,""))?(_={Rg:Ja.UT},c=""):Pi("REGION",c.replace(/ /g,""))&&(g=new $w("",100,3,0,100,0,100,""),c="")),c&&(c+="\n"),c+=o,u=e.Ku}if(f)return f.O=c,f;if(_);else if(g)return function(t,i){const e=t.split(/\s/),s=":";for(const t of e)if(0!==t.length&&Ni(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const e=t.indexOf(s),n=t.substring(0,e),r=t.substring(e+1,t.length);switch(n.toUpperCase()){case"ID":QA(r,i);break;case"WIDTH":GA(r,i);break;case"LINES":YA(r,i);break;case"REGIONANCHOR":{const t=UA(r);t&&(i.lN=t[0],i.fN=t[1]);break}case"VIEWPORTANCHOR":{const t=UA(r);t&&(i.gN=t[0],i.wN=t[1]);break}case"SCROLL":FA(r,i)}}}(c,g),g;return null}function MA(t){const i=t.split("=")[1].trim().split(","),e=NA(i[0].trim(),"MPEGTS")?i[0]:i[1],s=NA(i[0].trim(),"LOCAL")?i[0]:i[1];var n;return{GD:TA(Number(e.split(/:(.*)/)[1].trim())||0),lh:Ri.mD(null!=(n=Un(s.split(/:(.*)/)[1].trim(),new L))?n:0)}}function TA(t){return Ri.ON(t,aA)}function NA(t,i){return Df(t,i)}function DA(t,i){t&&function(t){return"cue"===t.Rg}(t)?i.L.push(t):t&&function(t){return"region"===t.Rg}(t)?i.QD.push(t):t&&function(t){return"stylesheet"===t.Rg}(t)&&i.FD.push(t)}function IA(t,i,e,s){const n=new L;CA(t,n);const r=SA(Un(t,n),s);if(CA(t,n),"--\x3e"!==t.substring(n.Ku,n.Ku+3))throw g("Something went wrong with parsing a WebVTT Cue");n.Im(3),CA(t,n);const h=SA(Un(t,n),s);e.uN(r,h);!function(t,i,e){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&Ni(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),h=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":zA(h,i,e);break;case"VERTICAL":BA(h,i);break;case"D":RA(h,i);break;case"LINE":case"L":OA(h,i);break;case"POSITION":case"T":jA(h,i);break;case"SIZE":case"S":PA(h,i);break;case"ALIGN":case"A":xA(h,i)}}}(t.substring(n.Ku,t.length),e,i)}function SA(t,i){return t+i.BD}function EA(t){return/^[0-9]$/.test(t)}function Un(t,i){const e=Nf(t,",",".");let s,n,r,h=!1;if(i.Ku>=e.length||!EA(e.charAt(i.Ku)))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");const o=gu(e,EA,i),a=x(o,10);if((o.length>2||a>59)&&(h=!0),i.Ku>=e.length||":"!==e.charAt(i.Ku))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");i.Im(1);const u=gu(e,EA,i);if(2!==u.length)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");const c=x(u,10);if(h||i.Ku<e.length&&":"===e.charAt(i.Ku)){if(i.Ku>=e.length||":"!==e.charAt(i.Ku))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");i.Im(1);const t=gu(e,EA,i);if(2!==u.length)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=x(t,10)}else s=0,n=a,r=c;if(i.Ku>=e.length||"."!==e.charAt(i.Ku))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");i.Im(1);const d=gu(e,EA,i),l=x(d,10);if(c>59||r>59)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+l/1e3}function bA(t){return LA(pA(t))}function LA(t){if(t.length<cA)return!1;for(const i of dA)if(Df(t,i))return!0;return!1}function kA(t){return qt(lA,t)}function CA(t,i){for(;i.Ku<t.length&&kA(t.charAt(i.Ku));)i.Im(1)}function Ii(t){const i=t.lastIndexOf("%");if(i>-1){const e=C(t.substring(0,i));if(!S(e)&&e>=0&&e<=100)return e}return null}function xA(t,i){const e=t.toLowerCase();switch(e){case"start":case"center":case"end":case"left":case"right":i.WT=e;break;case"middle":i.WT="center"}}function OA(t,i){let e,s;const n=t.indexOf(",");if(n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s=""),!_A.test(e))return;let r,h;if(ll(e,"%")){const t=Ii(e);if(null===t)return;r=t,h=!1}else{if(!gA.test(e)||e.lastIndexOf("-")>0)return;const t=e.indexOf(".");if(t>=0&&(t!==e.lastIndexOf(".")||!AA.test(e)||wA.test(e)))return;if(r=C(e),S(r))return;h=!0}switch(i.HT=r,i.KT=h,s=s.toLowerCase(),s){case"start":case"center":case"end":i.qT=s;break;case"middle":i.qT="center"}}function jA(t,i){let e,s;const n=t.indexOf(",");n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s="");const r=Ii(e);if(null!==r)switch(i.po=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":i.XT=s;break;case"start":i.XT="line-left";break;case"middle":i.XT="center";break;case"end":i.XT="line-right"}}function zA(t,i,e){const s=Qd(e,(i=>i.o===t));void 0!==s&&(i.ZT=s)}function PA(t,i){const e=Ii(t);null!==e&&(i.rp=e)}function BA(t,i){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":i.Pt="rl";break;case"lr":case"vertical:lr":case"vertical-lr":i.Pt="lr";break;default:i.Pt=""}}function RA(t,i){"VERTICAL"===t.toUpperCase()?i.Pt="rl":"VERTICAL-LR"===t.toUpperCase()&&(i.Pt="lr")}function UA(t){if(t.indexOf(",")>=0){const i=Ii(t.substring(0,t.indexOf(","))),e=Ii(t.substring(t.indexOf(",")+1,t.length));return[os(i||0,0,100),os(e||100,0,100)]}return null}function QA(t,i){i.o=t}function FA(t,i){"up"===t.toLowerCase()&&(i._N="up")}function YA(t,i){fA.test(t)&&(i.dN=x(t))}function GA(t,i){const e=Ii(t);null!==e&&(i.ji=e)}function VA(t){return t&&"VD"in t?t.VD:t}var WA,HA=class extends Gs{get WD(){return this.HD}get QD(){return this.qD}get XD(){return this.ZD}get va(){return this.Xa||(this.Xa=function(t){return xl(Mh(t),{get styles(){return t.WD},get regions(){return t.QD},get metadata(){return VA(t.XD)},get content(){return VA(t.O)}})}(this)),this.Xa}aN(t){return!!fl(this.WD,t.WD)&&(!!fl(this.QD,t.QD)&&(this.XD&&t.XD?!!this.XD.KD(t.XD)&&(this.O&&t.O?this.O.KD(t.O):this.O===t.O):this.XD===t.XD))}constructor(t,i,e,s,n,r,h){super(t,i,e,s),this.HD=n,this.qD=r,this.ZD=h||void 0}};function ds(t){return 1===t.JD}function qA(t){return 3===t.JD}!function(t){t[t.$D=1]="$D",t[t.tI=2]="tI",t[t.Ru=3]="Ru",t[t.iI=4]="iI",t[t.eI=9]="eI"}(WA||(WA={}));var XA=class{get sI(){return this.rI.nI(!0)}get GT(){return this.hI}get VT(){return this.oI}constructor(t,i,e){this.hI=t,this.oI=i,ds(e)?this.rI=function(t,i,e){for(const t of["begin","end","dur"])e.aI(t);return e}(0,0,e):this.rI=e}};var Kn={VIDEO_H264:"video/avc",VIDEO_H265:"video/hevc",VIDEO_MP4:"video/mp4",VIDEO_MPEG:"video/mpeg",VIDEO_MPEG2:"video/mpeg2",VIDEO_WEBM:"video/webm",VIDEO_UNKNOWN:"video/x-unknown",AUDIO_AAC:"audio/mp4a-latm",AUDIO_MP4:"audio/mp4",AUDIO_WEBM:"audio/webm",AUDIO_UNKOWN:"audio/x-unknown",IMAGE_JPEG:"image/jpeg",APPLICATION_TTML_XML:"application/ttml+xml",APPLICATION_MP4:"application/mp4",TEXT_VTT:"text/vtt"};function as(t){return Ni(t,Kn.APPLICATION_MP4)||Ni(t,Kn.VIDEO_MP4)||Ni(t,Kn.AUDIO_MP4)}function ZA(t){return Ni(t,Kn.VIDEO_WEBM)||Ni(t,Kn.AUDIO_WEBM)}var KA=class{uI(t){for(const[i,e]of this.cI)if(i.toLowerCase()===t.toLowerCase())return e}constructor(t,i){this.Rg=t,this.cI=i}};function JA(t){const i=t.trim(),e=i.indexOf(";");if(e<0)return new KA(i,[]);const s=i.substr(0,e).trim(),n=i.substr(e+1).trim(),r=[];let h=0,o=!1;for(let t=0;t<n.length;t++){const i=n[t];if(o||";"!==i)'"'===i&&(o=!o);else{const i=$A(n.substr(h,t));i&&r.push(i),h=t+1}}if(h!==n.length){const t=$A(n.substr(h));t&&r.push(t)}return new KA(s,r)}function $A(t){const i=t.indexOf("=");if(i<0)return;const e=t.substr(0,i).trim();let s=t.substr(i+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[e,s]}function iv(t){const i=t.trim(),e=i.indexOf(";");return e<0?i:i.substr(0,e).trim()}function ev(t){let i=t;const e=i.match(/^avc1\.(\d+)\.(\d+)$/);if(e){const t=Number(e[1]),s=Number(e[2]);i="avc1."+xu((t<<16|s).toString(16),6,"0")}return i}var sv="http://www.w3.org/XML/1998/namespace";function nv(t,i,e,s){let n=t.dI(e,i);return 0===n.length&&(n=t.lI(s+":"+i)),n}function rv(t){const i={};for(const e of t.fI)i[e._I]=e.jM;return i}var hv=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,ov=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,av="http://www.w3.org/ns/ttml";function uv(t,i,e,s){void 0===e&&(e=Li),void 0===s&&(s=Kn.APPLICATION_TTML_XML);let n=[];const r=ha(t);return s===Kn.APPLICATION_MP4?n=function(t,i,e){const s=no.fp(t),n=il(s,Po.dm);if(!n)return[];return lv(ha(n.zm),i,e)}(r,i,e):s===Kn.APPLICATION_TTML_XML&&(n=lv(r,i,e)),n}function cv(t,i,e){return void 0===e&&(e=Li),fv(t,i,e)}function dv(t,i){const e=yv(i.sI),s={};for(const i of e)s[i]=t[i];return s}function lv(t,i,e){return fv(pl(t,new L),i,e)}function fv(t,e,s){const n=[];let r;try{r=i.gI(t)}catch(t){return n}const h=r.wI;if("tt"!==h._I)return n;const o=h&&h.dI(av,"head")[0],a=h&&h.dI(av,"body")[0];if(!a||!o)return n;const u=function(t){const i={},e=t.dI(av,"styling")[0],s=e&&e.dI(av,"style")||[];for(const t of s){i[t.AI(sv,"id")]=rv(t)}return i}(o),c=function(t){const i={},e=t.dI(av,"layout")[0],s=e&&e.dI(av,"region")||[];for(const t of s){const e=t.AI(sv,"id");if(!e)continue;i[e]=rv(t);const s=pv(t);for(const t in s)xs.call(s,t)&&(i[e][t]=s[t])}return i}(o),d=function(t,i){const e=ms(t),s=wv(i.vI("tts:extent"));if(!s)return e;for(const t of w.keys(e)){const i=wv(e[t].extent);if(i){const n=_v(i[0],s[0]),r=_v(i[1],s[1]);e[t].extent=n+" "+r}const n=wv(e[t].origin);if(n){const i=_v(n[0],s[0]),r=_v(n[1],s[1]);e[t].origin=i+" "+r}}return e}(c,h),l=o.dI(av,"metadata")[0],f=Av(a,s.BD,s.RD,s.UD);for(const t of f){const i=dv(d,t);n.push(new HA(t.GT,t.VT,t.sI,!1,u,i,l))}return n}function _v(t,i){const e=gv(t),s=gv(i);if(e&&s&&e===s){const n=Number(t.slice(0,-e.length)),r=Number(i.slice(0,-s.length));return S(n)||S(r)?t:n/r*100+"%"}return t}function gv(t){return ll(t,"px")?"px":ll(t,"em")?"em":ll(t,"c")?"c":ll(t,"%")?"%":void 0}function wv(t){if(!t)return;const i=t.split(" ");return 2===i.length?[i[0],i[1]]:void 0}function Av(t,i,e,s){let n,r=i,h=e,o=[];const a=[];if(ds(t)){var u,c;r=null!=(u=mv(t.vI("begin"),s))?u:r,n=mv(t.vI("dur"),0),h=null!=(c=mv(t.vI("end"),s))?c:void 0!==n?r+n:h;const i=t.mI;for(let e=0;e<i.length;e++)("body"===t._I||"div"===t._I)&&i[e].JD>1||(o=o.concat(Av(i[e],r,h,s)))}const d=function(t,i,e){const s=[];s.push(t,i);for(const t of e)s.push(t.GT,t.VT);s.sort(Ge);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(M(s,t+1),t--,n=s.length);return s}(r,h,o);for(let i=0;i<d.length-1;i++){const e=vv(d[i],d[i+1],o);if(e.length<=0&&Mv(t)){const e=t.nI(!1);a.push(new XA(d[i],d[i+1],e))}else if(e.length>0){const s=t.nI(!1);e.forEach((t=>s.pI(t.sI))),a.push(new XA(d[i],d[i+1],s))}}return a}function vv(t,i,e){const s=[];for(let n=0;n<e.length;n++){const r=e[n].GT,h=e[n].VT;(r>=t&&h<=i||r<i&&h>=i||r<t&&h>t)&&s.push(e[n])}return s}function mv(t,i){if(t){if(hv.test(t)){const e=hv.exec(t);if(!e)return;const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,h=e[6];return 3600*s+60*n+r+(h?Number(h)*.1**h.length:0)+i}if(ov.test(t)){const e=ov.exec(t);if(!e)return;const s=Number(e[1]);let n;switch(e[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+i}}}function pv(t){const i={},e=t.lI("style")||[];for(const t of e){const e=rv(t);for(const t in e)xs.call(e,t)&&(i[t]=e[t])}return i}function yv(t){let i,e=[];if(ds(t)){i=t.vI("region"),i&&e.push(i);const s=t.mI;for(let t=0;t<s.length;t++)e=e.concat(yv(s[t]))}return e}function Mv(t){if(ds(t)){const i=t._I.toUpperCase(),e=Boolean(t.vI("smpte:backgroundImage"));return"BR"===i||e}return t.JD===WA.Ru}function Tv(t){const e=function(t){try{return i.gI(t).wI}catch(t){}}(t);return"tt"===(null==e?void 0:e._I)}var jo,We=class extends uo{tt(t){return super.tt(t)}it(t){const i=super.it(t);return i&&(t.jg=Ha.Ch),i}fa(){return So(this)}};!function(t){t.Mm="subtitles",t.yI="captions",t.MI="descriptions",t.Fn="chapters",t.Nm="metadata",t.TI="thumbnails"}(jo||(jo={}));var Nv=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function Dv(t){return"string"==typeof t&&qt(Nv,t)}function Iv(t,i){return!(!Dv(t)||!Dv(i))&&(t===i||"subtitles"===t&&"captions"===i||"captions"===t&&"subtitles"===i)}var vs,Cs=class extends $i{constructor(t,i,e,s,n){super(t,i,n),this.url=e,this.status=s}};!function(t){t.NI="HttpOpenError",t.DI="HttpResponseError",t.II="HttpTimeoutError"}(vs||(vs={}));var xt=class extends fh{get SI(){return this.EI}constructor(t,i,e){super(i,e),this.EI=t}};var Sv=class extends xt{get name(){return vs.DI}get bI(){return this.LI}constructor(t,i,e){super(t.SI,null!=e?e:function(t){return"Error while loading "+t.SI.zu+", status code "+t.kI}(t),i),this.LI=t}};var Ev,Ya=class extends xt{get name(){return vs.II}constructor(t,i){super(t,function(t){return"Request for "+t.zu+" timed out after "+t.CI+" seconds."}(t),i)}};function du(t){return t instanceof xt}function bv(t){return t instanceof Sv}function Lv(t){return t===jo.Mm||t===jo.yI}function kv(t){return t.some(Cv)}function Cv(t){return Ni(t,"stpp")}function xv(t){return t.some(Ov)}function Ov(t){return Ni(t,"vtt")||Ni(t,"wvtt")}function Wn(t,i){return as(t)&&xv(i)}function jv(t,i){return t===jo.TI||t===jo.Nm&&i===jo.TI}function zv(t,i,e,s){for(const n of t.L.og){if(n.GT>e)break;i<=n.VT&&!qt(s,n)&&s.push(n)}}function Pv(t,i){return Xo(t.Mg,i.Mg)}function Bv(t,i,e,s){const n=function(t){switch(t){case Kc.WEBVTT:return"WebVTT";case Kc.SRT:return"SRT";case Kc.TTML:return"TTML";default:return""}}(t);return new Cs(Ui.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",i,e,s)}function Js(t,i){const e=[];for(const s of t.L.og)if(s.VT<=i)e.push(s);else if(s.GT>=i)break;for(const i of e)t.xI(i)}function Rv(t,i){if(t.U>0){const e=10,s=t.Cn(0),n=_.max(0,s-e);for(const t of i)t.OI(n)}}!function(t){t.jI="vtt",t.Hv="wvtt",t.zI="stpp"}(Ev||(Ev={}));var Uv,St=class extends Pl{tt(t){t.yn(Ce.ra,this.BI),this.Z.tt(t),this.RI(t)}it(t){t.fn(Ce.ra,this.BI),t.jg=Ha.Ch,this.Z.it(t)}UI(t){}QI(t){}RI(t){t.jg!==Ha.Ch?this.UI(t):this.QI(t)}FI(){for(const t of this.Z.og)t.fn(Ce.ra,this.BI),t.gn()}OI(t){if(t>0)for(const i of this.Z.og)Js(i,t)}tr(){return this.FI(),this.Z.tr(),Promise.resolve()}async gn(){this.Vo(),await this.tr(),this.Z.gn()}constructor(...t){super(...t),this.Z=new We,this.BI=t=>{const i=t.Lt;this.RI(i)}}};!function(t){t.YI="arraybuffer",t.GI="json",t.VI="stream",t.Ru="text"}(Uv||(Uv={}));var Nr,iu,Kt,Xn,Qv,Jh=class t{append(t,i){let e=t,s=i;e=Fv(e),s=Yv(s);const n=e.toLowerCase();if(this.Od.hasOwnProperty(n)){const t=this.Od[n],i=t[1];t[1]=i?i+", "+s:s}else this.Od[n]=[e,s]}delete(t){const i=Fv(t).toLowerCase();delete this.Od[i]}get(t){const i=Fv(t).toLowerCase();return this.Od.hasOwnProperty(i)?this.Od[i][1]:null}has(t){const i=Fv(t).toLowerCase();return this.Od.hasOwnProperty(i)}set(t,i){let e=t;e=Fv(e);const s=e.toLowerCase();this.Od[s]=[e,Yv(i)]}forEach(t,i){for(const e in this.Od)this.Od.hasOwnProperty(e)&&t.call(i,this.Od[e][1],e,this)}asList(){const t=[];for(const i in this.Od)if(this.Od.hasOwnProperty(i)){const[e,s]=this.Od[i];t.push([e,s])}return t}WI(){const t={};return this.forEach(((i,e)=>{t[e]=i})),t}HI(t){t.forEach(((t,i)=>{this.append(i,t)}))}qI(t){t.forEach(((t,i)=>{this.set(i,t)}))}constructor(i){this.Od={},i instanceof t?i.asList().forEach((t=>{let[i,e]=t;this.append(i,e)})):Array.isArray(i)?i.forEach((t=>{let[i,e]=t;this.append(i,e)})):i&&w.getOwnPropertyNames(i).forEach((t=>{this.append(t,i[t])}))}};function Fv(t){let i=t;if("string"!=typeof i&&(i=String(i)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(i))throw new b("Invalid character in header field name");return i}function Yv(t){let i=t;return"string"!=typeof i&&(i=String(i)),i}!function(t){t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT"}(Nr||(Nr={})),function(t){t.rT="",t.XI="manifest",t.ZI="segment",t.KI="preload-hint",t.JI="content-protection"}(iu||(iu={})),function(t){t.rT="",t.$I="initialization-segment",t.tS="fairplay-license",t.iS="fairplay-certificate",t.eS="widevine-license",t.sS="widevine-certificate",t.nS="playready-license",t.rS="clearkey-license",t.hS="aes128-key"}(Kt||(Kt={})),function(t){t.rT="",t.ym="audio",t.pm="video",t.Ru="text",t.nT="image"}(Xn||(Xn={})),function(t){t.oS="same-origin",t.EA="no-cors",t.aS="cors",t.uS="navigate"}(Qv||(Qv={}));var Ph,Pc=class{constructor(t,i){const e=t.zu;let s,n,r,h,o,a,u,c,d,l,f,_,g,w;var A,v;i?(s=i.cS,n=i.dS,r=i.lS,h=i.fS,o=i.CI,a=i._S,u=i.Hd,c=i.Rg,d=i.gS,l=i.wS,f=i.AS,_=i.vS,g=i.jg,w=i.mS):(s=null,n={},r="GET",h=Uv.Ru,o=0,a=0,c="",d="",l="",f=!1,g=void 0,w=!1),this.zu=e,this.cS=t.cS||s,this.dS=new Jh(t.dS||n),this.lS=t.lS||r,this.fS=t.fS||h,this.CI=void 0!==t.CI?Number(t.CI)||0:o,this._S=void 0!==t._S?Number(t._S)||0:a,this.Hd=t.Hd||u||(new na).Hd,this.Rg=t.Rg||c,this.gS=t.gS||d,this.wS=t.wS||l,this.AS=void 0!==t.AS?Boolean(t.AS):f,this.vS=t.vS||_,this.jg=null!=(A=t.jg)?A:g,this.mS=null!=(v=t.mS)?v:w}},Gv=class extends yo{get error(){return this.errorObject.message}fa(){return this}constructor(t){super(hh.ha),this.errorObject=t}},bu=class extends St{pS(t){if(!t.src)return;const i=t.kind||jo.Mm,e=this.MS.yS(i,t.id,t.label,t.srclang,t.default);return e.Ug=ma(t.src),this.tt(e),e}async TS(t,i){t.Jf=Zs.LOADING;const e=new Pc({zu:t.Ug,fS:Uv.Ru,lS:Nr.GET,Hd:i});let s,n;try{const t=await this.NS.SI(e);n=t.kI,s=await t.DS()}catch(i){return Ao(i),t.Jf=Zs.ERROR,void t.Co(new Gv(function(t,i){let e=i,s=0;if(du(t)&&t.name===vs.NI)e=t.SI.zu;else if(bv(t)){const i=t.bI;if(e=i.IS,s=i.kI,0===s)return new Cs(Ui.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",e,s,t)}return new Cs(Ui.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",e,s,t)}(i,t.Ug)))}try{const i=function(t){return bA(t)?Kc.WEBVTT:Tv(t)?Kc.TTML:Kc.SRT}(s);t.Rg=i;let e=[];if(i===Kc.WEBVTT||i===Kc.SRT){e=mA(s).L}else i===Kc.TTML&&(e=cv(s,t));for(const i of e)t.SS(i)}catch(i){return Ao(i),t.Jf=Zs.ERROR,void t.Co(new Gv(Bv(t.Rg,t.Ug,n,i)))}t.Jf=Zs.LOADED}UI(t){qt(this.Z.og,t)&&t.Jf===Zs.NONE&&this.TS(t,this.ES.Hd).catch(el)}$n(){}async tr(){this.ES.Xd(),this.ES=new na;for(const t of this.Z.og)this.MS.bS(t);await super.tr()}constructor(t,i){super(),this.ES=new na,this.MS=t,this.NS=i}};function Vv(t,i){for(const e of t)if(e.zt===i&&e.LS)return e}function Wv(t,i){Hv(Vv(t.og,i))}function Hv(t){void 0!==t&&(t.jg=Ha.Jn)}function qv(t,i){const e=Vv(t.og,i)||function(t,i){for(const e of t)if(e.zt===i)return e}(t.og,i);Hv(e)}function ws(t){for(const i of Nv)i===jo.Fn?qv(t,i):Wv(t,i)}!function(t){t.kS="web",t.CS="android",t.xS="android-tv",t.OS="ios",t.jS="tvos",t.zS="chromecast",t.PS="theoliveweb"}(Ph||(Ph={}));var sa=id?id.userAgent:"",Xv=sa.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Zv=sa.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Kv=sa.match(/Android ([0-9\.]+)/i),Jv=sa.match(/Windows NT ([0-9\.]+)/i),$v=sa.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),tm=sa.match(/Firefox\/([0-9\.]+)/i),im=sa.match(/OPR\/(\d+\.\d+)/i),em=sa.match(/Tizen ([0-9\.]+)/i),sm=sa.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),nm=class{get Je(){return this.RS}get US(){return this.QS}get FS(){return this.YS}get GS(){return this.VS}get WS(){return this.HS}get qS(){return this.XS}get ZS(){return this.KS}get JS(){return this.$S}get tE(){return this.iE}get eE(){return this.sE}get nE(){return this.rE}get Ga(){return this.hE}get oE(){return this.aE}get uE(){return this.cE||this.dE}get td(){return this.lE}get Qs(){return this.fE}get _E(){return this.gE}get wE(){return this.AE}get vE(){var t;return null!=(t=this.mE)?t:this.pE}get yE(){return this.ME}get TE(){return this.NE}get DE(){return this.SE}get EE(){return this.bE}get LE(){return this.kE}get CE(){return this.xE}get OE(){return this.jE}get zE(){return this.PE}get BE(){return this.RE}get UE(){return this.QE}get FE(){return this.YE}get GE(){return this.VE}get WE(){return this.HE}get qE(){return this.XE}get ZE(){return this.KE}get JE(){return this.$E}get ib(){return this.eb}get sb(){return this.hb}get ob(){return!(!this.LE&&!this.DE)&&this.vE<=56}get ub(){return this.fb}get _b(){return this.gb}get wb(){return this.Ab}get vb(){return this.mb}get pb(){return this.yb}get Mb(){return this.Tb}get Nb(){return this.Db}constructor(){this.RS=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||id&&id.msMaxTouchPoints),this.QS=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(sa)||/(macintosh|mac(?=_powerpc)\s)/i.test(sa),this.YS=/Windows NT/i.test(sa),this.VS=Jv?C(Jv[1]):0,this.HS=/Android/i.test(sa),this.XS=Kv?C(Kv[1]):0,this.KS=/windows phone (8|8\.1)/i.test(sa),this.$S=/iPhone/i.test(sa),this.iE=/iPad/i.test(sa),this.sE=this.QS&&this.RS&&!this.iE,this.rE=/iPod/i.test(sa),this.lE=/Mobile Safari/i.test(sa),this.cE=/EOS\d*STB/i.test(sa),this.dE=/APP\d*STB/i.test(sa),this.hE=(this.$S||this.iE||this.sE||this.rE)&&!this.KS,this.aE=sm?C(sm[2]):0,this.fE=this.KS||this.hE||this.HS||this.lE,this.gE=/CriOS/i.test(sa),this.AE=Boolean(self.chrome&&/google/i.test(id.vendor))||this.gE,this.ME=this.AE&&/Edg\//i.test(id.userAgent),this.NE=Zv?x(Zv[1],10):0,this.Db=Boolean(self.chrome||/Chrome/i.test(sa)||/CriOS/i.test(sa)),this.pE=Xv?x(Xv[1],10):0,this.SE=/SMART-TV.*Tizen/i.test(sa),this.bE=em?C(em[1]):0,this.mE=this.bE>0?function(t){return t>=8?108:t>=7?94:t>=6.5?85:t>=6?76:t>=5.5?69:t>=5?63:t>=4?56:t>=3?47:0}(this.bE):void 0,this.kE=/webos|web0s/i.test(sa),this.xE=/VIZIO/i.test(sa),this.jE=/Edge\/\d+/i.test(sa),this.PE=/Trident/i.test(sa),this.RE=this.PE&&!self.ActiveXObject&&"ActiveXObject"in self,this.QE=/Vivaldi/i.test(sa),this.YE=/Firefox/i.test(sa)&&!/Seamonkey/i.test(sa),this.VE=tm?C(tm[1]):0,this.HE=/Safari/i.test(sa)&&!/Chrome/i.test(sa)&&!this.KS&&!this.SE,this.XE=$v?C($v[2]):0,this.KE=Boolean(im),this.$E=im?C(im[1]):0,this.eb=/CrKey/.test(sa),this.hb=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(sa),this.fb="web"===Ph.xS,this.gb="web"===Ph.CS,this.Ab=this.gb||this.fb,this.mb="web"===Ph.OS,this.yb="web"===Ph.jS,this.Tb="web"===Ph.zS}};nm.Ib=new nm;var rm,hm,ys,Or,om,am,Vt=nm.Ib,Vu=class extends wn{constructor(){super(l.mw)}};var um={Rg:N.PA,Sb:n_,Eb:"cenc",bb:s_,Lb:qi,kb:"PlayReady"},cm={Rg:N.BA,Sb:h_,Eb:"cenc",bb:r_,Lb:et,kb:"Widevine"},As={Rg:N.RA,Sb:u_,Eb:"skd",bb:Lc,Lb:ka,kb:"FairPlay"},dm={Rg:N.RA,Sb:"com.apple.fps",Eb:"sinf",bb:Lc,Lb:ka,kb:"FairPlay"},Dn={Rg:N.UA,Sb:"org.w3.clearkey",Eb:"cenc",bb:o_,Lb:a_,kb:"ClearKey"},lm=[um,cm,As,Dn];function fm(t){return lm.filter((i=>i.Lb===t.toLowerCase()))}var fe,_m=["cenc"],gm=["cbcs","cbcs-1-9"],cn=class extends wn{constructor(t){super("Cb"),this.xb=t}},fs=class extends wn{constructor(t,i,e,s){super("Ob"),this.xb=t,this.jb=i,this.Ob=e,this.zb=s}},wm=class extends wn{constructor(){super("lt")}};!function(t){t.Kg="Pb",t.Bb="Rb"}(fe||(fe={}));var Ns=class extends wn{constructor(t,i){super("Pb"),this.Eb=t,this.Ub=i}},Am=class extends wn{constructor(){super("Rb")}},vm=new j([0]).buffer,Us=class{get rp(){return this.Xu.length}Qb(t){for(const i of this.Xu)if(i[0]===t)return!0;return!1}Fb(t){for(const i of this.Xu)if(i[0]===t)return i[1]}Yb(t,i){this.Xu.forEach((i=>t(i[1],i[0])),i)}Gb(t,i){this.Xu.push([t,i])}Vb(){No(this.Xu)}constructor(){this.Xu=[]}},Rs=class{Wb(t){this.Hb&&(this.Hb(t),this.Qd())}qb(t){this.Xb&&(this.Xb(t),this.Qd())}Xd(){this.Zb.catch(El),this.qb(new pe)}Zd(t){t.then((t=>this.Wb(t)),(t=>this.qb(t)))}Qd(){this.Hb=void 0,this.Xb=void 0}constructor(){this.Zb=new Promise(((t,i)=>{this.Hb=t,this.Xb=i}))}};function mm(){return new j([8,4]).buffer}function pm(t,i){return t===n_?function(t){if(t.byteLength<2*ym.length)return t;const i=new DataView(t,0,2*ym.length),e=hg(i,!0);if(e===ym)return t;return function(t){const i='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',e='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+i+T_(t)+e;return og(s,!0).buffer}(t)}(i):i}var ym="<PlayReady";var Mm=class extends fh{constructor(t,i,e,s){super(t,s),this.Kb=i,this.Jb=e}},Tm=function(t,i){return(Tm=w.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)w.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)};function Nm(t,i){if("function"!=typeof i&&null!==i)throw new b("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}Tm(t,i),t.prototype=null===i?w.create(i):(e.prototype=i.prototype,new e)}function Dm(t,i,e){return t.indexOf?t.indexOf(i,e):Array.prototype.indexOf.call(t,i,e)}(function(){function t(t,i){this.$b=t,this.tL=i}t.prototype.get=function(t){var i=this.$b.get(t);if(0===this.tL||void 0===i)return i;var e=this.$b.get(t+1)||0,s=i&(1<<8-this.tL)-1,n=e>>8-this.tL;return(s<<this.tL)+n},t.prototype.getBit=function(t){if(!(t<0)){var i=this.$b.get(_.floor((t+this.tL)/8));if(void 0!==i)return(i&1<<7-this.tL-t%8)>0?1:0}},w.defineProperty(t.prototype,"bitLength",{get:function(){return this.$b.bitLength-this.tL},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"length",{get:function(){return this.$b.length},enumerable:!1,configurable:!0})})(),_.pow(2,-52);function Im(t,i,e){return _.min(_.max(t,i),e)}function Se(t,i){return t>>8-i}function Sm(t,i){return t&(1<<i)-1}var Em=function(){function t(t){this.iL=t,this.eL=0,this.sL=0}return w.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.eL+this.sL},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"done",{get:function(){return this.eL===this.iL.length&&0===this.sL},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"location",{get:function(){return{byte:this.eL,bit:this.sL}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var i=new t(this.iL);return i.seek(this.eL,this.sL),i},t.prototype.canReadBits=function(t){return 8*this.eL+t+this.sL<=8*this.iL.length},t.prototype.canReadBytes=function(t){return 0===this.sL?this.eL+t<=this.iL.length:this.eL+t<this.iL.length},t.prototype.incBit=function(){this.sL++,this.sL>7&&(this.eL++,this.sL=0)},t.prototype.seek=function(t,i){this.eL=t,this.sL=i},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new g("Cannot read past end of buffer.");return this.iL.get(this.eL)>>7-this.sL&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new g("Cannot read past end of buffer.");if(0===this.sL)return this.iL.get(this.eL++);var t=Sm(this.iL.get(this.eL),8-this.sL),i=Se(this.iL.get(this.eL+1),this.sL);return this.eL++,t<<this.sL|i},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readBit());return i},t.prototype.readUInt=function(t){if(t>32)throw new g("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");var i=0;if(0===this.sL&&t%8==0)for(var e=t-8;e>=0;e-=8)i|=this.readByte()<<e;else for(e=t-1;e>=0;e--)i|=this.readBit()<<e;return i},t.prototype.readInt=function(t){if(t>32)throw new g("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");var i=this.readUInt(t);return 0===(i&1<<t-1)?i:i-_.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var i=1<<t;return i+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new g("Skipping over the buffer edge is not allowed.");var i=this.sL+t;this.eL+=i>>3,this.sL=7&i},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new g("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readByte());return String.fromCharCode.apply(String,i)},t}(),bm=function(t,i){return t===i?0:t<i?-1:t>i?1:S(t)?S(i)?0:1:-1},hs=function(){function t(){this.nL=[],this.rL=[],this.hL=0}return t.from=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var s=new t,n=0,r=i;n<r.length;n++){var h=r[n];s.pushRange(h)}return s},t.prototype.pushRange=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=t.length),e<0)throw new g("The buffer length must be positive.");if(0!==e){if(0===this.rL.length)this.rL.push(0);else{var s=this.rL[this.rL.length-1]+this.nL[this.nL.length-1].length;this.rL.push(s)}this.nL.push(t.subarray(i,i+e)),this.hL+=e}},t.prototype.concat=function(i){var e=new t;return e.pushRange(this.join()),e.pushRange(i.join()),e},t.prototype.copy=function(t,i,e,s){if(void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=this.length),i<0||e<0||s<0)throw new RangeError;return this.slice(e,s).copyInternal(t,i)},t.prototype.copyInternal=function(t,i){for(var e=0,s=i,n=0,r=this.nL;n<r.length;n++){var h=r[n];t.set(h,s),e+=h.length,s+=h.length}return e},t.prototype.clear=function(){this.nL=[],this.rL=[],this.hL=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var i=this.findContainingBufferIndex(t),e=t-this.rL[i];return this.nL[i][e]}},w.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.nL.length<1)return-1;if(this.nL.length>1){var i=this.join();this.clear(),this.pushRange(i)}var e=this.nL[0];return"number"==typeof t?Dm(e,t):"undefined"!=typeof Buffer?Buffer.from(e.buffer,e.byteOffset,e.byteLength).indexOf(t):function(t,i){if(0===i.length)return 0;for(var e=i[0],s=i.length,n=t.length-s,r=0;r<=n&&!((r=Dm(t,e,r))<0||r>n);r++){for(var h=r+1,o=r+s,a=1;h<o&&t[h]===i[a];h++,a++);if(h===o)return r}return-1}(e,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,i,e){if(0!==t.length){var s=0,n=t.length-1;if(1!==e(t[s],i)){if(1===e(i,t[n]))return n;for(;s!==n;){var r=_.ceil((s+n)/2);e(t[r],i)<=0?s=r:n=r-1}return s}}}(this.rL,t,bm)},t.prototype.join=function(){if(1===this.nL.length)return this.nL[0];var t=new j(this.length);return this.copyInternal(t,0),t},w.defineProperty(t.prototype,"length",{get:function(){return this.hL},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,i){if(i<=0||i>4)throw new g("Expected byteLength to be between 0 and 4 but was "+i);if(t<0||t>this.length-i)throw new g("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-i)+")");if(1===i)return this.get(t);for(var e=0,s=0;s<i;s++)e+=this.get(t+s)*_.pow(2,8*(i-s-1));return e},t.prototype.slice=function(i,e){void 0===e&&(e=this.length);var s=Im(i,0,this.length),n=Im(e,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,h=this.findContainingBufferIndex(s),o=this.nL[h],a=s,u=a-this.rL[h];a+o.length-u<n;)r.pushRange(o,u,o.length-u),h+=1,u=(a+=o.length-u)-this.rL[h],o=this.nL[h];var c=n-a;return r.pushRange(o,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var i=this.length-1,e=this.nL.length-1,s=this.nL[e],n=s.length-1;i>=0&&e>=0;){if(0!==s[n])break;if(0===n){if(0===e)return new t;e-=1,n=(s=this.nL[e]).length-1}else n-=1;i-=1}return this.slice(0,i+1)},t}(),Lm=function(){function t(i){this.oL=i||t.BUFFER_CHUNK_SIZE,this.aL=!1,this.uL=new hs,this.iL=new j(this.oL),this.cL=0,this.dL=0,this.sL=7}return t.prototype.closeByte=function(){this.iL[this.cL++]=this.dL,this.cL>=this.oL&&this.closeBuffer(),this.dL=0,this.sL=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.cL&&(this.uL.pushRange(this.iL,0,this.cL),t&&(this.iL=new j(this.oL)),this.cL=0)},w.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.sL},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.aL)throw new g("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.aL=!0,this.uL},t.prototype.writeBit=function(t){if(this.aL)throw new g("Cannot write to a closed BitWriter.");this.dL|=t<<this.sL,0===this.sL?this.closeByte():this.sL--},t.prototype.writeByte=function(t){if(this.aL)throw new g("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.dL=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var i=this.sL;this.dL|=Se(t,i+1),this.closeByte(),this.dL=Sm(t,8-i)<<i+1,this.sL=i},t.prototype.writeBits=function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.aL)throw new g("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.cL+t.length<=this.oL?(this.iL.set(t,this.cL),this.cL+=t.length,this.cL===this.oL&&this.closeBuffer()):(this.closeBuffer(),this.uL.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var i=this.sL;this.dL|=Se(t[0],i+1),this.closeByte();for(var e=1;e<t.length;e++){var s=Sm(t[e-1],8-i),n=Se(t[e],i+1);this.dL=s<<i+1|n,this.closeByte()}this.dL=Sm(t[t.length-1],8-i)<<i+1,this.sL=i}},t.prototype.writeUInt=function(t,i){if(t<0)throw new g("Received a negative number.");if(i>32)throw new g("The max bitlength that can be provided is 32.");if(t>=_.pow(2,i))throw new g("Uint "+t+" cannot be represented in "+i+" bit(s).");if(this.isWritingStartBit&&i%8==0)for(var e=i-8;e>=0;e-=8)this.writeByte(t>>e&255);else for(e=i-1;e>=0;e--)this.writeBool((t&1<<e)>0)},t.prototype.writeInt=function(t,i){if(i>32)throw new g("The max bitlength that can be provided is 32.");if(_.abs(t)>=_.pow(2,i-1))throw new g("Signed integer "+t+" cannot be represented in "+i+" bit(s).");t<0?this.writeUInt(t+_.pow(2,i),i):this.writeUInt(t,i)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new g("Received a negative number.");for(var i=_.floor(_.log2(t+1))+1,e=0;e<i-1;e++)this.writeBit(0);this.writeUInt(t+1,i)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var i=function(t){for(var i=new j(t.length),e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}(t),e=0;e<i.length;e++)this.writeByte(i[e])},t.BUFFER_CHUNK_SIZE=1024,t}(),km=function(){function t(t){this.rb=new hs,this.lL=t}return t.prototype.closeWriter=function(){void 0!==this.lL&&(this.rb=this.rb.concat(this.lL.close()),this.lL=void 0)},w.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.lL&&(this.lL=new Lm),this.lL},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),He=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new g("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(i){var e=this.getSize(),s=e>=t.LARGE_SIZE/8,n=16===this.boxType.length;i.writeUInt(s?1:e,32),i.writeString(n?"uuid":this.boxType),s&&(i.writeUInt(_.floor(e/t.LARGE_SIZE),32),i.writeUInt(e%t.LARGE_SIZE,32)),n&&i.writeString(this.boxType)},t.prototype.getSize=function(){var i=8+(this.boxType.length>4?16:0),e=this.getBoxContentSize()+i;return e>=t.LARGE_SIZE/8&&(e+=8),e},t.prototype.serialize=function(){var t=new km;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=_.pow(2,32),t}();function fi(t,i){return t instanceof qo?64===i:t<_.pow(2,i)}function Sl(t,i){return _.round(t*_.pow(2,i))}function Cm(t,i){for(var e=0;e<i.length;e++)t.writeByte(i[e])}function Ku(t,i){return t/_.pow(2,i)}var Mo=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!fi(e,8))throw new g("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Nm(i,t),w.defineProperty(i.prototype,"flags",{get:function(){return this.fL},set:function(t){this.fL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new g("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(He),xm=function(t){function i(i,e){var s=t.call(this,i)||this;return s.data=e,s}return Nm(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(hs.from(this.data))},i}(He),Om=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();var jm=16384;function zm(t){var i=t.length;if(i<=jm)return String.fromCharCode.apply(String,t);for(var e=[],s=0;s<i;s+=jm)e.push(String.fromCharCode.apply(String,t.slice(s,s+jm)));return e.join("")}var Pm=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,i){return(t&i)===i}(this.raw,t)},t}();function Bm(t,i){var e=t.getUint8(i.offset);return i.shift(1),e}function Rm(t,i,e){var s=Wm(Xm(t),i.offset,i.offset+e);return i.shift(s.byteLength),s}function Um(t,i,e){return i.offset+e<=t.byteLength}function Qm(t,i,e){void 0===e&&(e=!1);var s=t.getUint32(i.offset,e);return i.shift(4),s}function Fm(t,i,e){void 0===e&&(e=!1);var s=Qm(t,i,e),n=Qm(t,i,e),r=e?n:s,h=e?s:n;return qo.fromBits(h,r,!0)}function Ym(t,i,e){return zm(function(t){return[].slice.call(t)}(Rm(t,i,e)))}function Gm(t,i){var e,s=Bm(t,i);return 0==(128&s)?e=s:192==(224&s)?e=64*(31&s)+(63&Bm(t,i)):224==(240&s)?e=4096*(15&s)+64*(63&Bm(t,i))+(63&Bm(t,i)):240==(248&s)&&(e=262144*(7&s)+4096*(63&Bm(t,i))+64*(63&Bm(t,i))+(63&Bm(t,i))),e}function Vm(t,i){return function(t,i,e){var s=[],n=function(t,i){return i.offset+3<=t.byteLength&&239===t.getUint8(i.offset)&&187===t.getUint8(i.offset+1)&&191===t.getUint8(i.offset+2)}(t,i);n&&i.shift(3);for(;i.offset<t.byteLength;){var r=Gm(t,i);if(void 0===r)break;if(e&&0===r)break;s.push(r)}return function(t){for(var i=[],e=0,s=t;e<s.length;e++){var n=s[e];n>65535&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n)}return zm(i)}(s)}(t,i,!0)}function Wm(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new j(t.buffer,t.byteOffset+i,e-i)}function Hm(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function qm(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Xm(t){return new j(t.buffer,t.byteOffset,t.byteLength)}var Zm=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new Om(this.offset<<3)},t}(),Km=function(){function t(t,i){this.data=t,this.cursor=i}return t.prototype.nextUint8=function(){return Bm(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getUint16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return Qm(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt32(i.offset,e);return i.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,i,e){void 0===e&&(e=!1);var s=Qm(t,i,e),n=Qm(t,i,e),r=e?n:s,h=e?s:n;return qo.fromBits(h,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return Fm(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return Rm(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,i,e){for(var s=[],n=0;n<e;n++)s.push(Qm(t,i));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return Ym(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return Vm(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function Je(t,i){return t.type===i}var Jm=8;function Dh(t){var i=function(t,i){var e=[];for(;i.offset<t.byteLength;){var s=$m(t,i);if(!s.complete)return{complete:!1,boxes:e};e.push(s.box)}return{complete:!0,boxes:e}}(t.data,t.cursor);if(!i.complete)throw new g("Data incomplete");return i.boxes}function $m(t,i){var e=i.offset,s=function(t,i){var e=i.offset;if(!Um(t,i,Jm)){return{complete:!1,neededOffset:r=i.offset+Jm}}var s=Qm(t,i),n=Ym(t,i,4);if(1===s){if(!Um(t,i,8)){var r=i.offset+8;return i.seek(e),{complete:!1,neededOffset:r}}s=Fm(t,i).toNumber()}if("uuid"===n){if(!Um(t,i,16)){r=i.offset+16;return i.seek(e),{complete:!1,neededOffset:r}}n=Ym(t,i,16)}var h=i.offset,o={type:n,size:s,headerSize:h-e};return{complete:!0,header:o}}(t,i);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-e);var h=e+r;if(h>t.byteLength){var o=h;return i.seek(e),{complete:!1,neededOffset:o}}var a={type:n.type,offset:e,data:new Km(Hm(t,e,h),new Zm(n.headerSize))};return i.seek(h),{complete:!0,box:a}}function Pu(t){return{version:t>>24,flags:new Pm(16777215&t)}}function tp(t,i){var e,s,n,r;return 1===i?(e=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(e=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:e,modification:s,scale:n,duration:r}}function ip(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function ep(t){var i=t.nextUint32Array(9);return{a:Ku(i[0],16),b:Ku(i[1],16),u:Ku(i[2],30),c:Ku(i[3],16),d:Ku(i[4],16),v:Ku(i[5],30),x:Ku(i[6],16),y:Ku(i[7],16),w:Ku(i[8],30)}}function $h(t){return new xm(t.type,Wm(Xm(t.data.data),t.data.cursor.offset))}var sp=function(t){function i(i,e,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=e,r.handlerType=i,r}return Nm(i,t),w.defineProperty(i.prototype,"handlerType",{get:function(){return this._L},set:function(t){this._L=t},enumerable:!1,configurable:!0}),i.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(e=null===(i=this.name)||void 0===i?void 0:i.length)&&void 0!==e?e:0)+1},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeString(this.handlerType),this.serializeReserved(i),this.name&&i.writer.writeString(this.name),i.writer.writeByte(0)},i}(Mo);function np(t){var i=t.data,e=Pu(i.nextUint32()),s=e.version,n=e.flags;i.skip(4);var r=i.nextChars(4);i.skip(12);var h=i.nextUTF8String();return new sp(r,h,s,n.raw)}!function(t){function i(){return t.call(this,"mdir")||this}Nm(i,t),i.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(sp);var rp=function(){function t(t,i){void 0===i&&(i=!1),this.fixed28BitMode=i,this.tag=t}return t.prototype.encodeSize=function(t){for(var i=[];t>0;)i.length>0&&(i[i.length-1]+=128),i.push(t%128),t>>=7;if(this.fixed28BitMode)for(;i.length<4;)i.push(128);return i.reverse()},w.defineProperty(t.prototype,"tag",{get:function(){return this.gL},set:function(t){if(!fi(t,8))throw new g("Provided tag does not fit in 8 bits.");this.gL=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var i=0,e=this.encodeSize(this.getDescriptorSize());i<e.length;i++){var s=e[i];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}(),hp=(function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o={});var a=t.call(this,4,o.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=h,a.objectTypeIndication=i,a.streamType=e,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}Nm(i,t),w.defineProperty(i.prototype,"objectTypeIndication",{get:function(){return this.wL},set:function(t){if(!fi(t,8))throw new g("Provided objectTypeIndication does not fit in 8 bits.");this.wL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"streamType",{get:function(){return this.AL},set:function(t){if(!fi(t,6))throw new g("Provided streamType does not fit in 6 bits.");this.AL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.vL},set:function(t){if(!fi(t,24))throw new g("Provided bufferSizeDb does not fit in 24 bits.");this.vL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"maxBitrate",{get:function(){return this.mL},set:function(t){if(!fi(t,32))throw new g("Provided maxBitrate does not fit in 32 bits.");this.mL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"avgBitrate",{get:function(){return this.pL},set:function(t){if(!fi(t,32))throw new g("Provided avgBitrate does not fit in 32 bits.");this.pL=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var i=0,e=this.decoderSpecificInfo;i<e.length;i++){e[i].serialize(t)}}}(rp),function(t){function i(i,e){void 0===e&&(e={});var s=t.call(this,5,e.fixed28BitMode)||this;return s.data=i,s}Nm(i,t),i.prototype.getDescriptorSize=function(){return this.data.length},i.prototype.serializeDescriptorContent=function(t){t.concat(hs.from(this.data))}}(rp),function(t){function i(i){void 0===i&&(i=!1);var e=t.call(this,6,i)||this;return e.predefined=2,e}return Nm(i,t),i.prototype.getDescriptorSize=function(){return 1},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},i}(rp)),op=(function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=i,r.streamPriority=e,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new hp(n.fixed28BitMode),r}Nm(i,t),w.defineProperty(i.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"esId",{get:function(){return this.yL},set:function(t){if(!fi(t,16))throw new g("Provided esId does not fit in 16 bits.");this.yL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"streamPriority",{get:function(){return this.ML},set:function(t){if(!fi(t,5))throw new g("Provided streamPriority does not fit in 5 bits.");this.ML=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"dependsOnEsId",{get:function(){return this.TL},set:function(t){if(t&&!fi(t,16))throw new g("Provided dependsOnEsId does not fit in 16 bits.");this.TL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"ocrEsId",{get:function(){return this.NL},set:function(t){if(t&&!fi(t,16))throw new g("Provided ocrEsId does not fit in 16 bits.");this.NL=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},i.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(rp),function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.boxes=[],i}return Nm(i,t),i.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serialize=function(){for(var i=t.prototype.serialize.call(this),e=0,s=this.boxes;e<s.length;e++){var n=s[e];i=i.concat(n.serialize())}return i},i}(He)),ja=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Nm(i,t),i.prototype.serializeBoxContent=function(t){},i.prototype.getBoxContentSize=function(){return 0},i}(op),ap=function(t){function i(i,e){var s=t.call(this,i)||this;return s.dataReferenceIndex=e,s}return Nm(i,t),w.defineProperty(i.prototype,"dataReferenceIndex",{get:function(){return this.DL},set:function(t){if(!fi(t,16))throw new g("Provided dataReferenceIndex does not fit in 16 bits.");this.DL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){for(var i=0;i<6;i++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},i}(ja),up=function(t){function i(i,e,s,n){var r,h,o=this;return(o=t.call(this,i,e)||this).extra=n,o.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,o.sampleSize=null!==(h=s.sampleSize)&&void 0!==h?h:16,o.sampleRate=s.sampleRate,o}return Nm(i,t),w.defineProperty(i.prototype,"channelCount",{get:function(){return this.IL},set:function(t){if(!fi(t,16))throw new g("Provided channelCount does not fit in 16 bits.");this.IL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleSize",{get:function(){return this.SL},set:function(t){if(!fi(t,16))throw new g("Provided sampleSize does not fit in 16 bits.");this.SL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleRate",{get:function(){return this.EL},set:function(t){if(!fi(Sl(t,16),32))throw new g("Provided rate does not fit in 32 bits (fixed 16.16).");this.EL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(e=null===(i=this.extra)||void 0===i?void 0:i.length)&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.channelCount,16),i.writer.writeUInt(this.sampleSize,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(Sl(this.sampleRate,16),32),this.extra&&Cm(i.writer,this.extra)},i}(ap),cp=(function(t){function i(i){var e=t.call(this,"stco",0,0)||this;return e.entries=i,e}Nm(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.bL},set:function(t){if(!fi(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!fi(t,32)})))throw new g("Not all entries can be represented in 32 bits.");this.bL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(Mo),function(t){function i(i){var e=t.call(this,"clap")||this;return e.cleanApertureWidthN=i.cleanApertureWidthN,e.cleanApertureWidthD=i.cleanApertureWidthD,e.cleanApertureHeightN=i.cleanApertureHeightN,e.cleanApertureHeightD=i.cleanApertureHeightD,e.horizOffN=i.horizOffN,e.horizOffD=i.horizOffD,e.vertOffN=i.vertOffN,e.vertOffD=i.vertOffD,e}Nm(i,t),w.defineProperty(i.prototype,"cleanApertureWidthN",{get:function(){return this.LL},set:function(t){if(!fi(t,32))throw new g("Provided cleanApertureWidthN does not fit in 32 bits.");this.LL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureWidthD",{get:function(){return this.kL},set:function(t){if(!fi(t,32))throw new g("Provided cleanApertureWidthD does not fit in 32 bits.");this.kL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureHeightN",{get:function(){return this.CL},set:function(t){if(!fi(t,32))throw new g("Provided cleanApertureHeightN does not fit in 32 bits.");this.CL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureHeightD",{get:function(){return this.xL},set:function(t){if(!fi(t,32))throw new g("Provided cleanApertureHeightD does not fit in 32 bits.");this.xL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizOffN",{get:function(){return this.OL},set:function(t){if(!fi(t,32))throw new g("Provided horizOffN does not fit in 32 bits.");this.OL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizOffD",{get:function(){return this.jL},set:function(t){if(!fi(t,32))throw new g("Provided horizOffD does not fit in 32 bits.");this.jL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vertOffN",{get:function(){return this.zL},set:function(t){if(!fi(t,32))throw new g("Provided vertOffN does not fit in 32 bits.");this.zL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vertOffD",{get:function(){return this.PL},set:function(t){if(!fi(t,32))throw new g("Provided vertOffD does not fit in 32 bits.");this.PL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 32},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(He),function(t){function i(i,e){var s=t.call(this,"ctts",i,0)||this;return s.entries=e,s}Nm(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.bL},set:function(t){if(!fi(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!fi(t.sampleCount,32)||!fi(t.sampleOffset,32)})))throw new g("Not all entries can be represented in 64 bits.");this.bL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),0===this.version?i.writer.writeUInt(n.sampleOffset,32):1===this.version&&i.writer.writeInt(n.sampleOffset,32)}}}(Mo),function(t){function i(i){var e=t.call(this,"url ",0,void 0===i?1:0)||this;return e.location=i,e}Nm(i,t),w.defineProperty(i.prototype,"location",{get:function(){return this.BL},set:function(t){this.flags=void 0===t?1:0,this.BL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this);return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(Mo),function(t){function i(i,e,s){var n=t.call(this,"urn ",0,s)||this;return n.name=i,n.location=e,n}Nm(i,t),w.defineProperty(i.prototype,"location",{get:function(){return this.BL},set:function(t){if(1&this.flags)throw new g("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.BL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.name),i.writer.writeByte(0),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(Mo),function(t){function i(){return t.call(this,"dinf")||this}Nm(i,t)}(ja),function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!fi(e,8))throw new g("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Nm(i,t),w.defineProperty(i.prototype,"flags",{get:function(){return this.fL},set:function(t){this.fL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new g("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(op)),dp=(function(t){function i(){return t.call(this,"dref",0,0)||this}Nm(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(cp),function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"elst",e,s)||this;return n.entries=i,n}return Nm(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"entries",{get:function(){return this.bL},set:function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!fi(s.segmentDuration,this.bitSize))throw new g("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!fi(s.mediaTime,this.bitSize))throw new g("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!fi(s.mediaRateInteger,16))throw new g("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!fi(s.mediaRateFraction,16))throw new g("Provided mediaRateFraction does not fit in 16 bits.")}this.bL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(i)},i}(Mo)),lp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Nm(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(dp),fp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Nm(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(dp);function _p(t){for(var i=t.data,e=Pu(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),h=[],o=0;o<r;o++){var a=void 0,u=void 0;0===s?(a=i.nextUint32(),u=i.nextInt32()):(a=i.nextUint64(),u=i.nextInt64());var c=i.nextInt16(),d=i.nextInt16();h.push({segmentDuration:a,mediaTime:u,mediaRateFraction:d,mediaRateInteger:c})}return 0===s?new lp(h,n.raw):new fp(h,n.raw)}var gp=function(t){function i(){return t.call(this,"edts")||this}return Nm(i,t),i}(ja);function wp(t){for(var i=new gp,e=0,s=Dh(t.data);e<s.length;e++){var n=s[e];Je(n,"elst")?i.boxes.push(_p(n)):i.boxes.push($h(n))}return i}var Ap=function(t){function i(i,e,s,n){var r=t.call(this,i)||this;return r.majorBrand=e,r.minorVersion=s,r.compatibleBrands=n,r}return Nm(i,t),w.defineProperty(i.prototype,"majorBrand",{get:function(){return this.RL},set:function(t){if(4!==t.length)throw new g("the provided major brand does not conform to the 4 character requirement");this.RL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"minorVersion",{get:function(){return this.UL},set:function(t){if(!fi(t,32))throw new g("the provided minor version does not fit in 32 bits.");this.UL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"compatibleBrands",{get:function(){return this.QL},set:function(t){if(t.some((function(t){return 4!==t.length})))throw new g("Some of the compatible brands do not conform to the 4 character requirement");this.QL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var i=0,e=this.compatibleBrands;i<e.length;i++){var s=e[i];t.writer.writeString(s)}},i}(He),vp=function(t){function i(i,e,s){return t.call(this,"ftyp",i,e,s)||this}return Nm(i,t),i}(Ap);function mp(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new vp(e,s,n)}var pp=function(t){function i(i,e){void 0===e&&(e="free");var s=t.call(this,e)||this;return s.data=i,s}return Nm(i,t),i.prototype.getBoxContentSize=function(){var t,i;return null!==(i=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==i?i:0},i.prototype.serializeBoxContent=function(t){this.data&&t.concat(hs.from(this.data))},i}(He),yp=function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=i.creation,r.modificationTime=i.modification,r.timescale=i.scale,r.duration=i.duration,r.language=e,r}return Nm(i,t),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.FL},set:function(t){if(!fi(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.FL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.YL},set:function(t){if(!fi(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.YL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.GL},set:function(t){if(!fi(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.GL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.VL},set:function(t){if(!fi(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.VL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"language",{get:function(){return this.WL},set:function(t){if(!Dp(t))throw new g("Expected an ISO-639-2/T language code");this.WL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMdiaContent(i),i.writer.writeBit(0);for(var e=0,s=this.language;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.charCodeAt(0)-96,5)}i.writer.writeUInt(0,16)},i}(Mo),Mp=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,0,s)||this}return Nm(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(yp),Tp=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,1,s)||this}return Nm(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(yp);function Np(t){var i=t.data,e=Pu(i.nextUint32()),s=e.version,n=e.flags,r=tp(i,s),h=new Em(hs.from(i.nextUint8Array(2)));h.skipBits(1);for(var o=[],a=0;a<3;a++)o.push(h.readUInt(5));var u=o.map((function(t){return String.fromCharCode(t+96)})).join("");return Dp(u)||(u="und"),i.skip(2),0===s?new Mp(r,u,n.raw):new Tp(r,u,n.raw)}function Dp(t){return/^[a-z]{3}$/.test(t)}var Ip=function(t){function i(){return t.call(this,"mdia")||this}return Nm(i,t),i}(ja);function Sp(t){for(var i=new Ip,e=0,s=Dh(t.data);e<s.length;e++){var n=s[e];Je(n,"mdhd")?i.boxes.push(Np(n)):Je(n,"hdlr")?i.boxes.push(np(n)):i.boxes.push($h(n))}return i}var Ep=function(t){function i(){var i=t.call(this,"mdat")||this;return i.data=new hs,i}return Nm(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(this.data)},i}(He);function bp(t){var i=t.data,e=i.nextUint8Array(i.data.byteLength-i.cursor.offset),s=new Ep;return s.data.pushRange(e),s}var Lp;(function(t){function i(){return t.call(this,"minf")||this}Nm(i,t)})(ja),function(t){function i(i){var e=t.call(this,"meta",0,0)||this;return e.handler=i,e}Nm(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.handler.serialize())}}(cp);!function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(Lp||(Lp={}));var kp,Cp,xp={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function Op(t,i){i.writer.writeUInt(Sl(t.a,16),32),i.writer.writeUInt(Sl(t.b,16),32),i.writer.writeUInt(Sl(0,30),32),i.writer.writeUInt(Sl(t.c,16),32),i.writer.writeUInt(Sl(t.d,16),32),i.writer.writeUInt(Sl(0,30),32),i.writer.writeUInt(Sl(t.x,16),32),i.writer.writeUInt(Sl(t.y,16),32),i.writer.writeUInt(Sl(1,30),32)}function jp(t,i){var e,s,n,r;i.writer.writeUInt(null!==(e=t.isLeading)&&void 0!==e?e:kp.UNKNOWN,2),i.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:Cp.UNKNOWN,2),i.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:Cp.UNKNOWN,2),i.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:Cp.UNKNOWN,2)}function zp(t,i){var e,s,n;i.writer.writeUInt(0,4),jp(t,i),i.writer.writeUInt(null!==(e=t.samplePaddingValue)&&void 0!==e?e:0,3),i.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),i.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(kp||(kp={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(Cp||(Cp={}));var Pp=function(){},Bp=function(t){function i(i,e,s){var n=t.call(this,"pssh",i,0)||this;return n.systemId=e,n.data=s,n}return Nm(i,t),w.defineProperty(i.prototype,"systemId",{get:function(){return this.HL},set:function(t){if(16!==t.length)throw new g("Provided systemId length is not 16.");this.HL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"data",{get:function(){return this.qL},set:function(t){if(!fi(t.length,32))throw new g("Provided data length does not fit in 32 bits.");this.qL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},i.prototype.serializeVersionBoxContent=function(t){},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(hs.from(this.systemId)),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.data.length,32),i.concat(hs.from(this.data))},i}(Mo),Rp=function(t){function i(i,e){return t.call(this,0,i,e)||this}return Nm(i,t),i}(Bp),Up=function(t){function i(i,e,s){var n=t.call(this,1,i,e)||this;return n.kIds=s,n}return Nm(i,t),w.defineProperty(i.prototype,"kIds",{get:function(){return this.XL},set:function(t){if(!fi(t.length,32))throw new g("Provided kIds length cannot fit in 32 bits.");if(t.some((function(t){return 16!==t.length})))throw new g("Not all provided key ids are 16 bytes long.");this.XL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var i=0,e=this.kIds;i<e.length;i++){var s=e[i];t.concat(hs.from(s))}},i}(Bp);function Qp(t){var i=t.data.nextUint8();t.data.skip(3);var e=t.data.nextUint8Array(16),s=[];if(1===i)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var h=t.data.nextUint32(),o=t.data.nextUint8Array(h);return 1===i?new Up(e,o,s):new Rp(e,o)}var Fp=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"mehd",e,s)||this;return n.fragmentDuration=i,n}return Nm(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"fragmentDuration",{get:function(){return this.ZL},set:function(t){if(!fi(t,this.bitSize))throw new g("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.ZL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(Mo),Yp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Nm(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration,32)},i}(Fp),Gp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Nm(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),i.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},i}(Fp);function Vp(t){var i=t.data,e=Pu(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new Yp(i.nextUint32(),n.raw):new Gp(i.nextUint64(),n.raw)}var Wp=function(t){function i(i,e,s,n){void 0===e&&(e={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,h,o,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=i,a.defaultSampleDescriptionIndex=null!==(r=null==e?void 0:e.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(h=e.sampleDuration)&&void 0!==h?h:0,a.defaultSampleSize=null!==(o=e.sampleSize)&&void 0!==o?o:0,a.defaultSampleFlags=e.sampleFlags,a}return Nm(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.KL},set:function(t){if(!fi(t,32))throw new g("Provided track id does not fit in 32 bits.");this.KL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.JL},set:function(t){if(!fi(t,32))throw new g("Provided default sample description index does not fit in 32 bits.");this.JL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.$L},set:function(t){if(!fi(t,32))throw new g("Provided default sample duration does not fit in 32 bits.");this.$L=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.ek},set:function(t){if(!fi(t,32))throw new g("Provided default sample size does not fit in 32 bits.");this.ek=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.nk},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!fi(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!fi(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.nk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},i.prototype.serializeBoxContent=function(i){var e;t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),i.writer.writeUInt(this.defaultSampleDescriptionIndex,32),i.writer.writeUInt(this.defaultSampleDuration,32),i.writer.writeUInt(this.defaultSampleSize,32),zp(null!==(e=this.defaultSampleFlags)&&void 0!==e?e:{},i)},i}(Mo);function Hp(t){var i=t.data,e=Pu(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),h=i.nextUint32(),o=i.nextUint32(),a=i.nextUint32(),u=ip(new Em(hs.from(i.nextUint8Array(4))));return new Wp(r,{sampleDescriptionIndex:h,sampleDuration:o,sampleSize:a,sampleFlags:u},s,n.raw)}var qp=function(t){function i(){return t.call(this,"mvex")||this}return Nm(i,t),i}(ja);function Xp(t){for(var i=new qp,e=0,s=Dh(t.data);e<s.length;e++){var n=s[e];Je(n,"mehd")?i.boxes.push(Vp(n)):Je(n,"trex")?i.boxes.push(Hp(n)):i.boxes.push($h(n))}return i}var Zp=function(t){function i(e,s,n,r,h){void 0===h&&(h=0);var o,a,u,c=this;return(c=t.call(this,"mvhd",r,h)||this).creationTime=e.creation,c.modificationTime=e.modification,c.timescale=e.scale,c.duration=e.duration,c.rate=null!==(o=n.rate)&&void 0!==o?o:i.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:i.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:xp,c.rk=s,c}return Nm(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.FL},set:function(t){if(!fi(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.FL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.YL},set:function(t){if(!fi(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.YL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.GL},set:function(t){if(!fi(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.GL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.VL},set:function(t){if(!fi(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.VL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"rate",{get:function(){return this.hk},set:function(t){if(!fi(Sl(t,16),32))throw new g("Provided rate does not fit in 32 bits (fixed 16.16).");this.hk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"volume",{get:function(){return this.ck},set:function(t){if(!fi(Sl(t,8),16))throw new g("Provided volume does not fit in 16 bits (fixed 8.8).");this.ck=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"matrix",{get:function(){return this.dk},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new g("(u, v, w) does not match the required (0, 0, 1)");this.dk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"nextTrackId",{get:function(){return this.rk},set:function(t){if(0===t)throw new g("NextTrackId cannot be 0.");if(!fi(t,32))throw new g("NextTrackId cannot exceed 32 bits.");this.rk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMvhdContent(i),i.writer.writeUInt(Sl(this.rate,16),32),i.writer.writeUInt(Sl(this.volume,8),16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),Op(this.matrix,i);for(var e=0;e<6;e++)i.writer.writeUInt(0,32);i.writer.writeUInt(this.nextTrackId,32)},i.DEFAULT_RATE=1,i.DEFAULT_VOLUME=1,i}(Mo),Kp=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,0,n)||this}return Nm(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(Zp),Jp=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,1,n)||this}return Nm(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(Zp);function $p(t){var i=t.data,e=Pu(i.nextUint32()),s=e.version,n=e.flags,r=tp(i,s),h=Ku(i.nextUint32(),16),o=Ku(i.nextUint16(),8);i.skip(2),i.skip(8);var a=ep(i);i.skip(24);var u=i.nextUint32();return 0===s?new Kp(r,u,{rate:h,volume:o,matrix:a},n.raw):new Jp(r,u,{rate:h,volume:o,matrix:a},n.raw)}var ty=function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o={});var a,u,c,d=this;return d=t.call(this,"tkhd",i,function(t){var i,e,s,n;return{trackEnabled:null===(i=null==t?void 0:t.trackEnabled)||void 0===i||i,trackInMovie:null===(e=null==t?void 0:t.trackInMovie)||void 0===e||e,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(o))||this,d.creationTime=e.creation,d.modificationTime=e.modification,d.trackId=s,d.duration=e.duration,d.volume=n,d.width=r,d.height=h,d.layer=null!==(a=o.layer)&&void 0!==a?a:0,d.alternateGroup=null!==(u=o.alternateGroup)&&void 0!==u?u:0,d.matrix=null!==(c=o.matrix)&&void 0!==c?c:xp,d}return Nm(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.FL},set:function(t){if(!fi(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.FL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.YL},set:function(t){if(!fi(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.YL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"trackId",{get:function(){return this.KL},set:function(t){if(0===t)throw new g("trackId cannot be 0.");if(!fi(t,32))throw new g("trackId cannot exceed 32 bits.");this.KL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.VL},set:function(t){if(!fi(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.VL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"volume",{get:function(){return this.ck},set:function(t){if(!fi(Sl(t,8),16))throw new g("Provided volume does not fit in 16 bits (fixed 8.8).");this.ck=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"width",{get:function(){return this.lk},set:function(t){if(!fi(Sl(t,16),32))throw new g("Provided width does not fit in 32 bits (fixed 16.16).");this.lk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"height",{get:function(){return this.fk},set:function(t){if(!fi(Sl(t,16),32))throw new g("Provided height does not fit in 32 bits (fixed 16.16).");this.fk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"layer",{get:function(){return this._k},set:function(t){if(!fi(t,16))throw new g("Provided layer does not fit in 16 bits.");this._k=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"alternateGroup",{get:function(){return this.gk},set:function(t){if(!fi(t,16))throw new g("Provided alternateGroup does not fit in 16 bits.");this.gk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"matrix",{get:function(){return this.dk},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new g("(u, v, w) does not match the required (0, 0, 1)");this.dk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeTkhdContent(i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.layer,16),i.writer.writeUInt(this.alternateGroup,16),i.writer.writeUInt(Sl(this.volume,8),16),i.writer.writeUInt(0,16),Op(this.matrix,i),i.writer.writeUInt(Sl(this.width,16),32),i.writer.writeUInt(Sl(this.height,16),32)},i}(Mo),se=function(t){function i(i,e,s,n,r,h){return t.call(this,0,i,e,s,n,r,h)||this}return Nm(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},i}(ty),On=function(t){function i(i,e,s,n,r,h){return t.call(this,1,i,e,s,n,r,h)||this}return Nm(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(ty);function iy(t){var i,e,s,n,r=t.data,h=Pu(r.nextUint32()),o=h.version,a=h.flags,u=a.isSet(8),c=a.isSet(4),d=a.isSet(2),l=a.isSet(1);0===o?(i=r.nextUint32(),e=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(i=r.nextUint64(),e=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),_=r.nextInt16(),g=Ku(r.nextInt16(),8);r.skip(2);var w=ep(r),A=Ku(r.nextUint32(),16),v=Ku(r.nextUint32(),16);return 0===o?new se({creation:i,modification:e,duration:n},s,g,A,v,{layer:f,matrix:w,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:l,trackInPreview:c,trackInMovie:d}):new On({creation:i,modification:e,duration:n},s,g,A,v,{layer:f,matrix:w,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:l,trackInPreview:c,trackInMovie:d})}var ey=function(t){function i(){return t.call(this,"trak")||this}return Nm(i,t),i}(ja);function sy(t){for(var i=new ey,e=0,s=Dh(t.data);e<s.length;e++){var n=s[e];Je(n,"tkhd")?i.boxes.push(iy(n)):Je(n,"mdia")?i.boxes.push(Sp(n)):Je(n,"edts")?i.boxes.push(wp(n)):i.boxes.push($h(n))}return i}var ny=function(t){function i(){return t.call(this,"moov")||this}return Nm(i,t),i}(ja);function ry(t){for(var i=new ny,e=0,s=Dh(t.data);e<s.length;e++){var n=s[e];Je(n,"mvhd")?i.boxes.push($p(n)):Je(n,"trak")?i.boxes.push(sy(n)):Je(n,"mvex")?i.boxes.push(Xp(n)):Je(n,"pssh")?i.boxes.push(Qp(n)):i.boxes.push($h(n))}return i}var hy=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",e,s)||this;return n.baseMediaDecodeTime=i,n}return Nm(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"baseMediaDecodeTime",{get:function(){return this.wk},set:function(t){if(!fi(t,this.bitSize))throw new g("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.wk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(Mo),oy=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Nm(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime,32)},i}(hy),ru=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Nm(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},i}(hy);function ay(t){var i=t.data,e=Pu(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new oy(i.nextUint32(),n.raw):new ru(i.nextUint64(),n.raw)}var Ie=function(t){function i(i,e){void 0===e&&(e=0);var s=t.call(this,"tfhd",e,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(i))||this;return s.trackId=i.trackId,s.baseDataOffset=i.baseDataOffset,s.sampleDescriptionIndex=i.sampleDescriptionIndex,s.defaultSampleDuration=i.defaultSampleDuration,s.defaultSampleSize=i.defaultSampleSize,s.defaultSampleFlags=i.defaultSampleFlags,s}return Nm(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.KL},set:function(t){if(!fi(t,32))throw new g("Provided track id does not fit in 32 bits.");this.KL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"baseDataOffset",{get:function(){return this.Ak},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new g("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new g("The base data offset present flag is not set.");if(t&&!fi(t,64))throw new g("Provided baseDataOffset does not fit in 32 bits.");this.Ak=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleDescriptionIndex",{get:function(){return this.vk},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new g("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new g("The sample description index flag is not set.");if(t&&!fi(t,32))throw new g("Provided sampleDescriptionIndex does not fit in 32 bits.");this.vk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.$L},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new g("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new g("The default sample duration present flag is not set.");if(t&&!fi(t,32))throw new g("Provided defaultSampleDuration does not fit in 32 bits.");this.$L=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.ek},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new g("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new g("The default sample size present flag is not set.");if(t&&!fi(t,32))throw new g("Provided defaultSampleSize does not fit in 32 bits.");this.ek=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.nk},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new g("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new g("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!fi(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!fi(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.nk=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(i+=8),this.flags.sampleDescriptionIndexPresent&&(i+=4),this.flags.defaultSampleDurationPresent&&(i+=4),this.flags.defaultSampleSizePresent&&(i+=4),this.flags.defaultSampleFlagsPresent&&(i+=4),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(i.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&i.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&i.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&i.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&zp(this.defaultSampleFlags,i)},i}(Mo);function uy(t){var i=t.data,e=i.nextUint8(),s=new Em(hs.from(i.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var h=Boolean(s.readBit()),o=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),d=i.nextUint32(),l=c?i.nextUint64():void 0,f=u?i.nextUint32():void 0,_=a?i.nextUint32():void 0,g=o?i.nextUint32():void 0,w=h?ip(new Em(hs.from(i.nextUint8Array(4)))):void 0;return new Ie({trackId:d,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:l,sampleDescriptionIndex:f,defaultSampleDuration:_,defaultSampleSize:g,defaultSampleFlags:w},e)}var zn=function(t){function i(i,e,s){var n=t.call(this,"trun",i,function(t){var i,e,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(i=t.sampleDurationPresent)&&void 0!==i&&i,sampleSizePresent:null!==(e=t.sampleSizePresent)&&void 0!==e&&e,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(e))||this;return n.dataOffset=e.dataOffset,n.samples=s,n.firstSampleFlags=e.firstSampleFlags,n}return Nm(i,t),w.defineProperty(i.prototype,"dataOffset",{get:function(){return this.pk},set:function(t){if(t&&!fi(t,32))throw new g("Provided data offset does not fit in 32 bits.");this.pk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"firstSampleFlags",{get:function(){return this.yk},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!fi(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!fi(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.yk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"samples",{get:function(){return this.Mk},set:function(t){var i,e;if(!fi(t.length,32))throw new g("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new g("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new g("The sample duration present flag is not set.");if(r.duration&&!fi(r.duration,32))throw new g("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new g("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new g("The sample size present flag is not set.");if(r.size&&!fi(r.size,32))throw new g("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new g("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new g("The sample flags present flag is not set.");if((null===(i=r.flags)||void 0===i?void 0:i.samplePaddingValue)&&!fi(r.flags.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null===(e=r.flags)||void 0===e?void 0:e.sampleDegradationPriority)&&!fi(r.flags.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new g("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new g("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!fi(r.compositionTimeOffset,32))throw new g("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.Mk=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(i+=4),this.flags.firstSampleFlagsPresent&&(i+=4),this.flags.sampleDurationPresent&&(i+=4*this.samples.length),this.flags.sampleSizePresent&&(i+=4*this.samples.length),this.flags.sampleFlagsPresent&&(i+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(i+=4*this.samples.length),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&i.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&zp(this.firstSampleFlags,i);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];this.flags.sampleDurationPresent&&i.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&i.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&zp(n.flags,i),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?i.writer.writeUInt(n.compositionTimeOffset,32):i.writer.writeInt(n.compositionTimeOffset,32))}},i}(Mo);function cy(t){var i=t.data,e=i.nextUint8(),s=new Em(hs.from(i.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),h=Boolean(s.readBit()),o=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=i.nextUint32(),d={sampleDurationPresent:o,sampleSizePresent:h,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(d.dataOffset=i.nextInt32()),a&&(d.firstSampleFlags=ip(new Em(hs.from(i.nextUint8Array(4)))));for(var l=[],f=0;f<c;f++){var _={};o&&(_.duration=i.nextUint32()),h&&(_.size=i.nextUint32()),r&&(_.flags=ip(new Em(hs.from(i.nextUint8Array(4))))),n&&(_.compositionTimeOffset=0===e?i.nextUint32():i.nextInt32()),l.push(_)}return new zn(e,d,l)}var Is=function(t){function i(){return t.call(this,"traf")||this}return Nm(i,t),i}(ja);function dy(t){for(var i=new Is,e=0,s=Dh(t.data);e<s.length;e++){var n=s[e];Je(n,"tfhd")?i.boxes.push(uy(n)):Je(n,"tfdt")?i.boxes.push(ay(n)):Je(n,"trun")?i.boxes.push(cy(n)):i.boxes.push($h(n))}return i}var ly=function(t){function i(){return t.call(this,"moof")||this}return Nm(i,t),i}(ja);function fy(t){for(var i=new ly,e=0,s=Dh(t.data);e<s.length;e++){var n=s[e];Je(n,"traf")?i.boxes.push(dy(n)):Je(n,"pssh")?i.boxes.push(Qp(n)):i.boxes.push($h(n))}return i}!function(t){function i(i){var e=t.call(this,"mfhd",0,0)||this;return e.sequenceNumber=i,e}Nm(i,t),w.defineProperty(i.prototype,"sequenceNumber",{get:function(){return this.Tk},set:function(t){if(!fi(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.Tk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.sequenceNumber,32)}}(Mo);var _y=function(t){function i(i){var e=t.call(this,"frma")||this;return e.codingName=i,e}return Nm(i,t),w.defineProperty(i.prototype,"codingName",{get:function(){return this.Nk},set:function(t){if(4!==t.length)throw new g("Provided coding name was not 4 characters long.");this.Nk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},i}(He),gy=(function(t){function i(i,e){var s=t.call(this,"pasp")||this;return s.hSpacing=i,s.vSpacing=e,s}Nm(i,t),w.defineProperty(i.prototype,"hSpacing",{get:function(){return this.Dk},set:function(t){if(!fi(t,32))throw new g("Provided hSpacing does not fit in 32 bits.");this.Dk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vSpacing",{get:function(){return this.Ik},set:function(t){if(!fi(t,32))throw new g("Provided vSpacing does not fit in 32 bits.");this.Ik=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(He),function(t){function i(i,e,s){var n=t.call(this,i)||this;return n.sample=e,n.sinf=s,n}Nm(i,t),i.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},i.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(ja),function(t){function i(i,e,s){var n=t.call(this,"sinf")||this;return n.schm=e,n.schi=s,n.frma=new _y(i),n}Nm(i,t),i.prototype.getBoxContentSize=function(){var t,i,e,s;return this.frma.getSize()+(null!==(i=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==i?i:0)+(null!==(s=null===(e=this.schi)||void 0===e?void 0:e.getSize())&&void 0!==s?s:0)},i.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(He),function(t){function i(i,e,s){var n=t.call(this,"saio",i,void 0===s?0:1)||this;return n.entries=e,n.explicitAuxInfoType=s,n}return Nm(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"entries",{get:function(){return this.bL},set:function(t){var i=this;if(!fi(t.length,32))throw new g("Number of entries provided does not fit in 32 bits.");if(t.some((function(t){return!fi(t,i.bitSize)})))throw new g("Not all provided entries fit in ".concat(this.bitSize," bits."));this.bL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.Sk},set:function(t){if(void 0===t)this.flags=0;else{if(!fi(t.auxInfoType,32))throw new g("Provided auxInfoType does not fit in 32 bits.");if(!fi(t.auxInfoTypeParameter,32))throw new g("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.Sk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(i)},i}(Mo)),wy=(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Nm(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s,32)}}}(gy),function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Nm(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}(gy),function(t){function i(i,e,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=i,n.sampleInfoSizes=e,n.explicitAuxInfoType=s,n}Nm(i,t),w.defineProperty(i.prototype,"defaultSampleInfoSize",{get:function(){return this.Ek},set:function(t){if(!fi(t,8))throw new g("Provided defaultSampleInfoSize does not fit in a single byte.");this.Ek=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleInfoSizes",{get:function(){return this.bk},set:function(t){if(!fi(t.length,32))throw new g("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some((function(t){return!fi(t,8)})))throw new g("Not all provided sampleInfoSizes fit in a byte.");this.bk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.Sk},set:function(t){if(void 0===t)this.flags=0;else{if(!fi(t.auxInfoType,32))throw new g("Provided auxInfoType does not fit in 32 bits.");if(!fi(t.auxInfoTypeParameter,32))throw new g("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.Sk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},i.prototype.serializeBoxContent=function(i){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new g("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeByte(this.defaultSampleInfoSize),i.writer.writeUInt(this.sampleInfoSizes.length,32);for(var e=0,s=this.sampleInfoSizes;e<s.length;e++){var n=s[e];i.writer.writeByte(n)}}}(Mo),function(t){function i(i){var e=t.call(this,"sdtp",0,0)||this;return e.samples=i,e}Nm(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i);for(var e=0,s=this.samples;e<s.length;e++){jp(s[e],i)}}}(Mo),function(t){function i(i){return t.call(this,"stsd",i,0)||this}Nm(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(cp),function(t){function i(i,e,s){var n=t.call(this,"sgpd",i,0)||this;return n.entries=s,n.groupingType=e,n}return Nm(i,t),w.defineProperty(i.prototype,"groupingType",{get:function(){return this.Lk},set:function(t){if(4!==t.length)throw new g("The provided groupingType does not equal 4 characters.");this.Lk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.groupingType),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];this.serializeEntryBoxContent(i,n)}},i.prototype.serializeEntryBoxContent=function(t,i){i.serializeBoxContent(t)},i}(Mo)),Ay=(function(t){function i(i,e){return t.call(this,0,i,e)||this}Nm(i,t),i.prototype.serializeVersionBoxContent=function(t){}}(wy),function(t){function i(i,e,s){var n=t.call(this,1,i,s)||this;return n.defaultLength=e,n}Nm(i,t),w.defineProperty(i.prototype,"defaultLength",{get:function(){return this.Ck},set:function(t){if(!fi(t,32))throw new g("The provided defaultLength does not fit in 32 bits.");this.Ck=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},i.prototype.serializeEntryBoxContent=function(t,i){0===this.defaultLength&&t.writer.writeUInt(i.getBoxContentSize(),32),i.serializeBoxContent(t)}}(wy),function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=this;if(i<2)throw new g("This constructor is only meant for versions 2 and up.");return(r=t.call(this,i,e,s)||this).defaultSampleDescriptionIndex=n,r}Nm(i,t),w.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.JL},set:function(t){if(!fi(t,32))throw new g("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.JL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(wy),function(t){function i(i){void 0===i&&(i=[]);var e=t.call(this,"stsz",0,0)||this;return e.sampleSizes=i,e}Nm(i,t),w.defineProperty(i.prototype,"sampleSizes",{get:function(){return this.xk},set:function(t){if(!fi(t.length,32))throw new g("Number of allowed samples cannot fit in 32 bits.");if(t.some((function(t){return!fi(t,32)})))throw new g("Not all sampleSizes can be represented in 32 bits.");this.xk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(this.sampleSizes.length,32);for(var e=0,s=this.sampleSizes;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(Mo),function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=i,s.samples=e,s}Nm(i,t),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.ek},set:function(t){if(!fi(t,32))throw new g("Provided defaultSampleSize does not fit in 32 bits.");this.ek=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"samples",{get:function(){return this.Mk},set:function(t){if(!fi(t,32))throw new g("Number of allowed samples cannot fit in 32 bits.");this.Mk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.defaultSampleSize,32),i.writer.writeUInt(this.samples,32)}}(Mo),function(t){function i(){return t.call(this,"stbl")||this}Nm(i,t)}(ja),function(t){function i(i){var e=t.call(this,"stsc",0,0)||this;return e.entries=i,e}Nm(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.bL},set:function(t){if(!fi(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!fi(t.firstChunk,32)||!fi(t.sampleDescriptionIndex,32)||!fi(t.samplesPerChunk,32)})))throw new g("Not all entries can be represented in 96 bits.");this.bL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.firstChunk,32),i.writer.writeUInt(n.samplesPerChunk,32),i.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(Mo),function(t){function i(){return t.call(this,"schi")||this}Nm(i,t)}(ja),function(t){function i(i,e,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=i,n.schemeVersion=e,n.schemeUri=s,n}Nm(i,t),w.defineProperty(i.prototype,"schemeType",{get:function(){return this.Ok},set:function(t){if(4!==t.length)throw new g("The provided schemeType does not have a length of 4.");this.Ok=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"schemeVersion",{get:function(){return this.jk},set:function(t){if(!fi(t,32))throw new g("The provided schemeVersion does not fit in 23 bits.");this.jk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"schemeUri",{get:function(){return this.zk},set:function(t){if(t&&4!==t.length)throw new g("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this.zk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeType),i.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(i.writer.writeString(this.schemeUri),i.writer.writeByte(0))}}(Mo),function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o=0);var a=t.call(this,"sidx",i,o)||this;return a.referenceId=e,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=h,a}return Nm(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"referenceId",{get:function(){return this.Pk},set:function(t){if(!fi(t,32))throw new g("Provided referenceId does not fit in 32 bits.");this.Pk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.GL},set:function(t){if(!fi(t,32))throw new g("Provided timescale does not fit in 32 bits.");this.GL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"earliestPresentationTime",{get:function(){return this.Bk},set:function(t){if(!fi(t,this.bitSize))throw new g("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.Bk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"firstOffset",{get:function(){return this.Rk},set:function(t){if(!fi(t,this.bitSize))throw new g("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.Rk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"references",{get:function(){return this.Uk},set:function(t){if(!fi(t.length,16))throw new g("The number of provided reference items does not fit in 16 bits.");for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!fi(s.referencedSize,31))throw new g("Provided referenced size does not fit in 31 bits.");if(!fi(s.subsegmentDuration,32))throw new g("Provided subsegment duration does not fit in 31 bits.");if(!fi(s.sapType,3))throw new g("Provided SAP type does not fit in 3 bits.");if(!fi(s.sapDeltaTime,28))throw new g("Provided SAP delta time does not fit in 28 bits.")}this.Uk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.referenceId,32),i.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(i),i.writer.writeUInt(0,16),i.writer.writeUInt(this.references.length,16);for(var e=0,s=this.references;e<s.length;e++){var n=s[e];i.writer.writeBit(n.referenceType),i.writer.writeUInt(n.referencedSize,31),i.writer.writeUInt(n.subsegmentDuration,32),i.writer.writeBool(n.startsWithSap),i.writer.writeUInt(n.sapType,3),i.writer.writeUInt(n.sapDeltaTime,28)}},i}(Mo)),vy=function(t){function i(i,e,s,n,r,h){return void 0===h&&(h=0),t.call(this,0,i,e,s,n,r,h)||this}return Nm(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},i}(Ay),my=function(t){function i(i,e,s,n,r,h){return void 0===h&&(h=0),t.call(this,1,i,e,s,n,r,h)||this}return Nm(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},i}(Ay);var py=function(t){function i(i,e,s){return t.call(this,"styp",i,e,s)||this}return Nm(i,t),i}(Ap);function yy(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new py(e,s,n)}(function(t){function i(i){void 0===i&&(i=0);var e=t.call(this,"smhd",0,0)||this;return e.balance=i,e}Nm(i,t),w.defineProperty(i.prototype,"balance",{get:function(){return this.Qk},set:function(t){if(t<-1||t>1)throw new g("Provided balance does not fit in the allowed range [-1, 1].");if(!fi(Sl(t,8),16))throw new g("Provided balance does not fit in 16 bits (fixed 8.8).");this.Qk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(Sl(this.balance,8),16),i.writer.writeUInt(0,16)}})(Mo),function(t){function i(i){var e=t.call(this,"stss",0,0)||this;return e.entries=i,e}Nm(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.bL},set:function(t){if(!fi(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!fi(t,32)})))throw new g("Not all entries can be represented in 32 bits.");this.bL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(Mo),function(t){function i(i){var e=t.call(this,"stts",0,0)||this;return e.entries=i,e}Nm(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.bL},set:function(t){if(!fi(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!fi(t.sampleCount,32)||!fi(t.sampleDelta,32)})))throw new g("Not all entries can be represented in 64 bits.");this.bL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),i.writer.writeUInt(n.sampleDelta,32)}}}(Mo),function(t){function i(i){var e=t.call(this,"trep",0,0)||this;return e.trackId=i,e}Nm(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.KL},set:function(t){if(!fi(t,32))throw new g("The provided trackId does not fit in 32 bits.");this.KL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32)}}(cp),function(t){function i(){return t.call(this,"udta")||this}Nm(i,t)}(ja);var My={red:0,green:0,blue:0},Ty=(function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=My);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=i,s.opColor=e,s}Nm(i,t),w.defineProperty(i.prototype,"opColor",{get:function(){return this.Fk},set:function(t){if(!fi(t.red,16)||!fi(t.green,16)||!fi(t.blue,16))throw new g("Not all colors could be represented in 16 bits.");this.Fk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.graphicsMode,16),i.writer.writeUInt(this.opColor.red,16),i.writer.writeUInt(this.opColor.green,16),i.writer.writeUInt(this.opColor.blue,16)}}(Mo),function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h,o,a,u,c,d=this;return(d=t.call(this,i,e)||this).width=s.width,d.height=s.height,d.horizontalResolution=null!==(h=s.horizontal)&&void 0!==h?h:72,d.verticalResolution=null!==(o=s.vertical)&&void 0!==o?o:72,d.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",d.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,d.depth=null!==(c=n.depth)&&void 0!==c?c:24,d.clap=n.clap,d.pasp=n.pasp,d.extra=r,d}return Nm(i,t),w.defineProperty(i.prototype,"width",{get:function(){return this.lk},set:function(t){if(!fi(t,16))throw new g("Provided width does not fit in 16 bits.");this.lk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"height",{get:function(){return this.fk},set:function(t){if(!fi(t,16))throw new g("Provided height does not fit in 16 bits.");this.fk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizontalResolution",{get:function(){return this.Yk},set:function(t){if(!fi(Sl(t,16),32))throw new g("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.Yk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"verticalResolution",{get:function(){return this.Gk},set:function(t){if(!fi(Sl(t,16),32))throw new g("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.Gk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"compressorName",{get:function(){return this.Vk},set:function(t){if(t.length>31)throw new g("The provided compressorName should at most be 31 characters long.");this.Vk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"frameCount",{get:function(){return this.Wk},set:function(t){if(!fi(t,16))throw new g("Provided frameCount does not fit in 16 bits.");this.Wk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"depth",{get:function(){return this.Hk},set:function(t){if(!fi(t,16))throw new g("Provided depth does not fit in 16 bits.");this.Hk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e,s,n,r,h;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(e=null===(i=this.clap)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(h=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==h?h:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.width,16),i.writer.writeUInt(this.height,16),i.writer.writeUInt(Sl(this.horizontalResolution,16),32),i.writer.writeUInt(Sl(this.verticalResolution,16),32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.frameCount,16),i.writer.writeByte(this.compressorName.length),i.writer.writeString(this.compressorName);for(var e=0;e<31-this.compressorName.length;e++)i.writer.writeByte(0);i.writer.writeUInt(this.depth,16),i.writer.writeInt(-1,16),this.clap&&i.concat(this.clap.serialize()),this.pasp&&i.concat(this.pasp.serialize()),this.extra&&Cm(i.writer,this.extra)},i}(ap)),Ny=(function(t){function i(i){var e=t.call(this,"esds",0,0)||this;return e.esDescriptor=i,e}Nm(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof j?this.esDescriptor.length:this.esDescriptor.getSize())},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor instanceof j?i.concat(hs.from(this.esDescriptor)):this.esDescriptor.serialize(i)}}(Mo),function(t){function i(i,e,s){var n=t.call(this,"mp4a",i,s)||this;return n.esd=e,n}Nm(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.esd.serialize())}}(up),function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",i,e,n)||this;return r.esDescriptor=s,r}Nm(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(Ty),function(t){function i(i,e){var s=t.call(this,"mp4s",i)||this;return s.esDescriptor=e,s}Nm(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(ap),function(t){function i(i){var e=t.call(this,"avcC")||this;return e.decoderConfig=i,e}Nm(i,t),i.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},i.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(He),function(){function t(t,i,e,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=e,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=i,this.spsSets=s,this.ppsSets=n}w.defineProperty(t.prototype,"version",{get:function(){return this.qk},set:function(t){if(!fi(t,8))throw new g("Provided version does not fit in 8 bits.");this.qk=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileIndication",{get:function(){return this.Xk},set:function(t){if(!fi(t,8))throw new g("Provided profileIndication does not fit in 8 bits.");this.Xk=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.Zk},set:function(t){if(!fi(t,8))throw new g("Provided profileCompatibility does not fit in 8 bits.");this.Zk=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"levelIndication",{get:function(){return this.Kk},set:function(t){if(!fi(t,8))throw new g("Provided levelIndication does not fit in 8 bits.");this.Kk=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"spsSets",{get:function(){return this.Jk},set:function(t){if(!fi(t.length,5))throw new g("Provided number of spsSets exceeds the max (32)");this.Jk=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"ppsSets",{get:function(){return this.$k},set:function(t){if(!fi(t.length,8))throw new g("Provided number of ppsSets exceeds the max (256)");this.$k=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce((function(t,i){return t+i.length}),0)+2*this.ppsSets.length+this.ppsSets.reduce((function(t,i){return t+i.length}),0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var i=0,e=this.spsSets;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.length,16),t.concat(hs.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var h=r[n];t.writer.writeUInt(h.length,16),t.concat(hs.from(h))}}}(),function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h=t.call(this,"avc1",i,e,n)||this;return h.configurationBox=s,h.bitrateBox=r,h}Nm(i,t),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(e=null===(i=this.bitrateBox)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.configurationBox.serialize()),this.bitrateBox&&i.concat(this.bitrateBox.serialize())}}(Ty),function(t){function i(i,e,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=i,n.max=e,n.avg=s,n}Nm(i,t),w.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.vL},set:function(t){if(!fi(t,32))throw new g("Provided bufferSizeDb does not fit in 32 bits.");this.vL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"max",{get:function(){return this.tC},set:function(t){if(!fi(t,32))throw new g("Provided max does not fit in 32 bits.");this.tC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"avg",{get:function(){return this.iC},set:function(t){if(!fi(t,32))throw new g("Provided avg does not fit in 32 bits.");this.iC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 12},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(He),function(t){function i(i,e){var s,n,r,h,o=this;if(o=t.call(this,"tenc",i,0)||this,e.perSampleIvSize>0&&(null!==(n=null===(s=e.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new g("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return o.kId=e.kId,o.isProtected=null!==(r=e.isProtected)&&void 0!==r?r:1,e.perSampleIvSize>0?o.perSampleIvSize=e.perSampleIvSize:o.constantIv=null!==(h=e.constantIv)&&void 0!==h?h:new j(0),o}return Nm(i,t),w.defineProperty(i.prototype,"isProtected",{get:function(){return this.eC},set:function(t){if(!fi(t,8))throw new g("Provided isProtected does not fit in 1 byte.");this.eC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"perSampleIvSize",{get:function(){return this.sC},set:function(t){if(![8,16].includes(t))throw new g("Provided perSampleIvSize does not match any allowed value [8, 16].");this.sC=t,this.nC=new j(0)},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"kId",{get:function(){return this.rC},set:function(t){if(16!==t.length)throw new g("Provided kId length is not 16.");this.rC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"constantIv",{get:function(){return this.nC},set:function(t){if(![8,16].includes(t.length))throw new g("Provided constant IV length does not match any allowed value [8, 16].");this.nC=t,this.sC=0},enumerable:!1,configurable:!0}),i.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeOwnContent(i)},i.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),Cm(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),Cm(t.writer,this.constantIv))},i}(Mo)),Dy=(function(t){function i(i){return t.call(this,0,i)||this}Nm(i,t)}(Ny),function(t){function i(i){var e=t.call(this,1,i)||this;return e.cryptByteBlocks=i.cryptByteBlock,e.skipByteBlocks=i.skipByteBlock,e}return Nm(i,t),w.defineProperty(i.prototype,"cryptByteBlocks",{get:function(){return this.hC},set:function(t){if(!fi(t,4))throw new g("Provided cryptByteBlocks does not fit in 4 bits.");this.hC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"skipByteBlocks",{get:function(){return this.oC},set:function(t){if(!fi(t,4))throw new g("Provided skipByteBlocks does not fit in 4 bits.");this.oC=t},enumerable:!1,configurable:!0}),i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},i}(Ny));!function(t){function i(i){var e=t.call(this)||this;return e.tencBox=new Dy(i),e}Nm(i,t),i.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},i.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(Pp);function Iy(t){return void 0!==t.iv}function Ve(t){return void 0!==t.subsamples}(function(t){function i(i){var e=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return e.samples=i,e}Nm(i,t),w.defineProperty(i.prototype,"samples",{get:function(){return this.Mk},set:function(t){var i;if(!fi(t.length,32))throw new g("The number of samples provided does not fit in 32 bits.");for(var e=0,s=t;e<s.length;e++){var n=s[e];if(Iy(n)&&![8,16].includes(n.iv.length))throw new g("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===i&&(i=Ve(n)),!0===i&&!Ve(n)||!1===i&&Ve(n))throw new g("Mix of samples with and without subsamples detected.");if(Ve(n)){if(!fi(n.subsamples.length,16))throw new g("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];if(!fi(o.clearData,16))throw new g("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!fi(o.protectedData,23))throw new g("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=i&&i,this.Mk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){for(var i=0,e=0,s=this.samples;e<s.length;e++){var n=s[e];Iy(n)&&(i+=n.iv.length),Ve(n)&&(i+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];if(Iy(n)&&Cm(i.writer,n.iv),Ve(n)){i.writer.writeUInt(n.subsamples.length,16);for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];i.writer.writeUInt(o.clearData,16),i.writer.writeUInt(o.protectedData,32)}}}},i.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}})(Mo),function(t){function i(i,e,s,n,r){var h=t.call(this,"emsg",0,0)||this;return h.schemeIdUri=i,h.value=e,h.data=r,h.id=s,h.timescale=n.timescale,h.presentationTimeDelta=n.presentationTimeDelta,h.eventDuration=n.eventDuration,h}Nm(i,t),w.defineProperty(i.prototype,"timescale",{get:function(){return this.GL},set:function(t){if(!fi(t,32))throw new g("The provided timescale does not fit in 32 bits.");this.GL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"presentationTimeDelta",{get:function(){return this.aC},set:function(t){if(!fi(t,32))throw new g("The provided presentationTimeDelta does not fit in 32 bits.");this.aC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"eventDuration",{get:function(){return this.uC},set:function(t){if(!fi(t,32))throw new g("The provided eventDuration does not fit in 32 bits.");this.uC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"id",{get:function(){return this.CT},set:function(t){if(!fi(t,32))throw new g("The provided id does not fit in 32 bits.");this.CT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeIdUri),i.writer.writeByte(0),i.writer.writeString(this.value),i.writer.writeByte(0),i.writer.writeUInt(this.timescale,32),i.writer.writeUInt(this.presentationTimeDelta,32),i.writer.writeUInt(this.eventDuration,32),i.writer.writeUInt(this.id,32),i.concat(hs.from(this.data))}}(Mo);var Sy=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new km,i=0,e=this.boxes;i<e.length;i++){var s=e[i];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function Ey(t,i){return function(e){var s=function(t,i){for(var e=t.data,s=t.cursor;s.offset<e.byteLength;){var n=$m(e,s);if(!n.complete)return;if(Je(n.box,i))return n.box}}(new Km(qm(e),new Zm),t);if(!s)throw new g("".concat(t," box not found"));return i(s)}}var by=Ey("moov",ry),Ly=Ey("sidx",(function(t){var i,e,s=t.data,n=Pu(s.nextUint32()),r=n.version,h=n.flags,o=s.nextUint32(),a=s.nextUint32();0===r?(i=s.nextUint32(),e=s.nextUint32()):(i=s.nextUint64(),e=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],d=0;d<u;d++){var l=new Em(hs.from(s.nextUint8Array(12))),f=l.readBit(),_=l.readUInt(31),g=l.readUInt(32),w=Boolean(l.readBit()),A=l.readUInt(3),v=l.readUInt(28);c.push({referenceType:f,referencedSize:_,subsegmentDuration:g,startsWithSap:w,sapType:A,sapDeltaTime:v})}return 0===r?new vy(o,a,i,e,c,h.raw):new my(o,a,i,e,c,h.raw)})),ky=Ey("moof",fy),Cy=Ey("pssh",Qp);function xy(t){return function(t){for(var i=new Sy,e=0,s=Dh(t);e<s.length;e++){var n=s[e];Je(n,"ftyp")?i.boxes.push(mp(n)):Je(n,"styp")?i.boxes.push(yy(n)):Je(n,"moov")?i.boxes.push(ry(n)):Je(n,"moof")?i.boxes.push(fy(n)):Je(n,"mdat")?i.boxes.push(bp(n)):i.boxes.push($h(n))}return i}(new Km(qm(t),new Zm))}var Oy=class extends Pl{get cC(){return this.dC}get lC(){return this.fC.expiration}get _C(){return this.gC}get wC(){return this.fC.sessionId}Ws(){if(this.AC)return this.dC;const t=[];return t.push(Promise.resolve(this.fC.close())),t.push(ri(1e3)),this.vC.Zd(Promise.race(t).catch(jy)),this.AC=!0,this.dC}mC(t,i,e){if(Vt.uE){const t=Cy(ve(i));if(1===t.version){i=new Rp(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.fC.generateRequest(t,i)).catch(jy)}$n(t){return Promise.resolve(this.fC.load(t)).catch(jy)}ET(){return Promise.resolve(this.fC.remove()).catch(jy)}Yn(t){return Promise.resolve(this.fC.update(t)).catch(jy)}pC(){this.gC.Vb(),this.fC.keyStatuses.forEach(((t,i)=>{this.yC(i,t)})),this.Co(new cn(this))}yC(t,i){if("string"==typeof t){const e=t;t=i,i=e}const e=ve(t);if(this.KA===n_&&16===e.byteLength){let t=ha(e),i=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,i,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.KA===n_&&"status-pending"===i&&(i="usable"),this.gC.Gb(e,i)}constructor(t,i){super(),this.fC=t,this.KA=i,this.AC=!1,this.MC=()=>{this.pC()},this.TC=t=>{this.Co(new fs(this,t.messageType,pm(this.KA,t.message)))},this.NC=()=>{this.AC=!0,this.gC.rp>0&&(this.gC.Vb(),this.Co(new cn(this))),this.fC.removeEventListener("keystatuseschange",this.MC),this.fC.removeEventListener("message",this.TC)},this.fC.addEventListener("keystatuseschange",this.MC),this.fC.addEventListener("message",this.TC),this.gC=new Us;const e=[];this.fC.closed&&e.push(Promise.resolve(this.fC.closed)),this.vC=new Rs,e.push(this.vC.Zb),this.dC=Promise.race(e).then(this.NC,this.NC),this.pC()}};function jy(t){let i;if(t.message){const e=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);e&&(i=0|x(e[1],16))}throw new Mm(t.message,void 0,i,t)}var zy=class{async DC(t){return new Oy(this.IC.createSession(t),this.ZA)}SC(t){return Promise.resolve(this.IC.setServerCertificate(t))}bn(t){return Promise.resolve(t.setMediaKeys(this.IC))}EC(t){return Promise.resolve(t.setMediaKeys(null))}tr(){return Promise.resolve()}constructor(t,i,e){this.IC=t,this.ZA=i,this.wd=e}},Py=class{get ZA(){return this.bC.keySystem}async LC(){const t=await this.bC.createMediaKeys();return new zy(t,this.KA,this.kC)}xC(){return this.kC}constructor(t,i,e){this.bC=t,this.KA=i,this.kC=e}},By=Vt.wE&&Vt.vE>=42||Vt.FE&&Vt.GE>=38||Vt.OE||Vt.BE||Vt.ZE&&Vt.JE>=29;function Ry(t,i){return Ni(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[Tt({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[Tt({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function Uy(){return void 0!==id&&"function"==typeof id.requestMediaKeySystemAccess}function Hn(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var Qy=class{OC(){return this.jC(cm)}zC(){return this.jC(Dn)}BC(){return this.jC(um)}RC(){return this.jC(As)}jC(t){const i=t.Lb,e=this.UC.get(i);if(e)return e;const s=this.QC(t,'video/mp4; codecs="avc1.42000a"');return this.UC.set(i,s),s}async QC(t,i){try{return await this.YC.FC(t.Sb,[Ry(i,!0)]),!0}catch(e){try{return await this.YC.FC(t.Sb,[Ry(i,!1)]),!0}catch(t){return!1}}}GC(){return this.VC||(this.VC=this.WC()),this.VC}async WC(){return"https:"!==om.protocol&&(!!By&&!await this.zC())}constructor(t){this.UC=cs(),this.VC=void 0,this.YC=t}};function Ne(t,i,e,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,HC:s.HC};let h=!1;if(s.audioCapabilities){const o=s.audioCapabilities.filter((t=>Boolean(t.contentType)));o.length&&(r.audioCapabilities=o.filter((s=>Fy(t,i,e,s))),h=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const o=s.videoCapabilities.filter((t=>Boolean(t.contentType)));o.length&&(r.videoCapabilities=o.filter((s=>Fy(t,i,e,s))),h=!0,r.videoCapabilities.length&&(n=!0))}return h||(n=t(e,"video/mp4")),n?r:void 0}function Fy(t,i,e,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!qt(i,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(e,iv(s.contentType))}function Yy(t){if(t.videoCapabilities)for(const i of t.videoCapabilities)if(i.contentType)return i.contentType;if(t.audioCapabilities)for(const i of t.audioCapabilities)if(i.contentType)return i.contentType}function Gy(t){const i=[];for(const e of t)e.encryptionScheme&&i.push({contentType:e.contentType,robustness:e.robustness});return t.concat(i)}function Vy(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(Wy))||!(!t.videoCapabilities||!t.videoCapabilities.some(Wy))}function Wy(t){return!t.robustness}function Hy(t,i){const e=[];for(const s of t)s.robustness?e.push(s):e.push(Tt({},s,{robustness:i}));return e}var qy=class{async FC(t,i){i=i.filter((t=>!t.HC));for(const t of i)t.audioCapabilities&&(t.audioCapabilities=Gy(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=Gy(t.videoCapabilities));if(t===h_&&i.some(Vy)){const e=i.map((t=>function(t,i){return Tt({},t,{videoCapabilities:t.videoCapabilities?Hy(t.videoCapabilities,i):void 0,audioCapabilities:t.audioCapabilities?Hy(t.audioCapabilities,i):void 0})}(t,"SW_SECURE_CRYPTO")));try{const i=await id.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new Py(i,t,s)}catch(t){}}const e=await id.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new Py(e,t,s)}static qC(){return Uy()}},Xy=class extends Pl{get wC(){return this.XC&&this.XC.sessionId||""}get lC(){return NaN}get cC(){return this.ZC.Zb}get _C(){return this.KC}async mC(t,i,e){this.JC(),this.$C=new Rs,this.DC(ve(i),e),await this.$C.Zb}DC(t,i){if(!t)throw new b("Expected initData to be defined but was "+t+".");const e=i&&i.playready&&i.playready.tx;let s;return s=i?this.ix.createSession(this.sx,t,e):this.ix.createSession(this.sx,t),s.addEventListener("mskeyclose",this.NC),s.addEventListener("mskeymessage",this.nx),s.addEventListener("mskeyerror",this.Ss),s.addEventListener("mskeyadded",this.hx),this.XC=s,this.ox("status-pending"),s}async $n(t){return this.JC(),!0}async Yn(t){if(this.ux=new Rs,this.JC(),!this.XC)return Promise.resolve();const i=ve(t);if(0===i.byteLength)throw new b("Cannot call update with an empty response.");this.XC.update(i),await this.ux.Zb}Ws(){return!this.AC&&this.XC&&(this.AC=!0,this.XC.close()),this.ZC.Zb}async ET(){this.JC()}JC(){if(this.AC)throw new b("Already closing or closed.")}ox(t){this.KC.Vb(),this.KC.Gb(vm,t),this.Co(new cn(this))}constructor(t,i){super(),this.ix=t,this.sx=i,this.AC=!1,this.ux=void 0,this.$C=void 0,this.XC=void 0,this.NC=()=>{this.AC=!0,this.ZC.Wb(void 0),this.XC&&(this.XC.removeEventListener("mskeyclose",this.NC),this.XC.removeEventListener("mskeymessage",this.nx),this.XC.removeEventListener("mskeyerror",this.Ss),this.XC.removeEventListener("mskeyadded",this.hx))},this.nx=t=>{this.$C&&(this.$C.Wb(void 0),this.$C=void 0),this.Co(new fs(this,"license-request",it(t.message).buffer,t.destinationURL||void 0))},this.Ss=()=>{const t=this.XC&&this.XC.error;if(!t)return;const i=new Mm("Unknown CDM error",t.code,t.systemCode);if(this.$C)this.$C.qb(i),this.$C=void 0;else if(this.ux)this.ux.qb(i),this.ux=void 0;else switch(i.Kb){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.ox("output-not-allowed");break;default:this.ox("internal-error")}},this.hx=()=>{this.$C&&(this.ox("usable"),this.$C.Wb(void 0),this.$C=void 0),this.ux&&(this.ox("usable"),this.ux.Wb(void 0),this.ux=void 0)},this.ZC=new Rs,this.KC=new Us}},Zy=class{async DC(t){return new Xy(this.ix,this.sx)}SC(t){return Promise.resolve(!1)}bn(t){const i=()=>{t.msSetMediaKeys(this.ix),t.removeEventListener("loadedmetadata",i)};return t.readyState>=1?t.msSetMediaKeys(this.ix):t.addEventListener("loadedmetadata",i),Promise.resolve()}EC(t){return Promise.resolve()}tr(){return Promise.resolve()}constructor(t,i,e){this.ix=t,this.ZA=i,this.wd=e;const s=Yy(e)||"video/mp4";this.sx=iv(s)}},Ky=class{get ZA(){return this.KA}xC(){return this.lx}LC(){const t=new Or.MSMediaKeys(this.KA);return Promise.resolve(new Zy(t,this.KA,this.lx))}constructor(t,i){this.KA=t,this.lx=i}},Jy=class{FC(t,i){try{return Promise.resolve(function(t,i){if(!$y())throw new b("Unsupported key system "+t);for(let e of i){let i=Ne(tM,_m,t,e);if(i)return new Ky(t,i)}throw new b("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static qC(){return $y()}};function $y(){return void 0!==Or.MSMediaKeys&&"function"==typeof Or.MSMediaKeys.isTypeSupported}function tM(t,i){return Or.MSMediaKeys.isTypeSupported(t,i)}var iM=class extends Pl{get wC(){return this._x?this._x.sessionId:""}get lC(){return NaN}get cC(){return this.ZC.Zb}get _C(){return this.KC}mC(t,i,e){const s=e&&e.fairplay&&e.fairplay.gx;if(!s)throw new b("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,i,e){const s=_a(t),n=2*s.length,r=2*i.length;let h=new ArrayBuffer(4+n+4+r+4+e.byteLength),o=new DataView(h),a=new L;return ea(o,a,n,!0),rg(o,a,s,!0),ea(o,a,r,!0),rg(o,a,i,!0),ea(o,a,e.byteLength,!0),bn(o,a,e),new j(h)}(ve(i),s,this.wx);return this._x=this.Ax.createSession(this.sx,n),this._x.addEventListener("webkitkeymessage",this.nx,!1),this._x.addEventListener("webkitkeyadded",this.hx,!1),this._x.addEventListener("webkitkeyerror",this.Ss,!1),this.ox("status-pending"),this.vx.Wb(this._x),this.vx=new Rs,Promise.resolve()}$n(t){return Promise.resolve(!0)}async Yn(t){const i=ve(t);if(0===i.byteLength)throw new b("Cannot call update with an empty response.");this.mx=new Rs;(this._x||await this.vx.Zb).update(i),await this.mx.Zb}Ws(){var t;const i=this._x;return i&&(i.removeEventListener("webkitkeymessage",this.nx,!1),i.removeEventListener("webkitkeyadded",this.hx,!1),i.removeEventListener("webkitkeyerror",this.Ss,!1),i.close()),this.vx.Xd(),null==(t=this.mx)||t.Xd(),this.ZC.Wb(void 0),this.ZC.Zb}ET(){return Promise.resolve(void 0)}ox(t){this.KC.Vb(),this.KC.Gb(vm,t),this.Co(new cn(this))}constructor(t,i,e){super(),this.Ax=t,this.sx=i,this.wx=e,this.ZC=new Rs,this.mx=void 0,this.KC=new Us,this._x=void 0,this.vx=new Rs,this.Ss=()=>{const t=this._x&&this._x.error;if(!t)return;const i=new Mm("Unknown CDM error",t.code,t.systemCode);this.mx?(this.mx.qb(i),this.mx=void 0):i.Kb===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.ox("output-not-allowed"):this.ox("internal-error"),this.Co(new wm)},this.nx=t=>{this.Co(new fs(this,"license-request",it(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.hx=()=>{this.mx&&(this.mx.Wb(void 0),this.mx=void 0),this.ox("usable")}}};var eM=class{getInternalMediaKeys(){return this.Ax}async DC(t){if(!this.wx)throw new $i(Ui.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new iM(this.Ax,this.sx,this.wx)}SC(t){return this.wx=ve(t),Promise.resolve(!0)}bn(t){return t.webkitSetMediaKeys(this.Ax),Promise.resolve()}EC(t){return t.webkitSetMediaKeys(null),Promise.resolve()}tr(){return Promise.resolve()}constructor(t,i,e){this.Ax=t,this.ZA=i,this.wd=e,this.wx=void 0;const s=Yy(e)||"video/mp4";this.sx=iv(s)}},sM=class{get ZA(){return this.KA}xC(){return this.lx}LC(){const t=new Or.WebKitMediaKeys(this.KA);return Promise.resolve(new eM(t,this.KA,this.lx))}constructor(t,i){this.KA=t,this.lx=i}},nM=class{FC(t,i){try{return Promise.resolve(function(t,i){if(t!==u_)throw new b(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!rM())throw new b("Unsupported key system "+t);for(let e of i){let i=Ne(hM,gm,t,e);if(i)return new sM(t,i)}throw new b("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static qC(){return rM()}};function rM(){return void 0!==Or.WebKitMediaKeys&&"function"==typeof Or.WebKitMediaKeys.isTypeSupported}function hM(t,i){return Or.WebKitMediaKeys.isTypeSupported(t,i)}var oM=class{async FC(t,i){for(let e of this.yx)try{return await e.FC(t,i)}catch(t){}throw new b("Unsupported key system configuration for "+t)}constructor(t){this.yx=t}},jn=class{Mx(t,i){return new Promise((e=>{const s=new na;s.Zd(this.Tx.Hd),i&&s.Zd(i);const n=()=>{s.Qd()};this.Nx.push((()=>{const i=aM(t,s.Hd);return e(i),i.then(n,n)})),this.Dx||(this.Dx=this.Ix())}))}Xd(){return this.Sx(!0)}gn(){return this.Ex=void 0,this.Sx(!1)}Sx(t){const i=this.Dx;return this.Tx.Xd(),t&&(this.Tx=new na),Promise.resolve(i)}constructor(t){this.Nx=[],this.Dx=void 0,this.Tx=new na,this.Ix=()=>{if(0===this.Nx.length)return this.Ex?aM(this.Ex,this.Tx.Hd).then(this.bx,this.bx):this.bx();return this.Nx.shift()().then(this.Ix)},this.bx=()=>{if(0!==this.Nx.length)return this.Ix();this.Dx=void 0},this.Ex=t}};function aM(t,i){return new Promise((e=>e(t(i))))}var uM,cM=new jn,dM=class extends Pl{Lx(){this.mx&&(this.ox("usable"),this.mx.Wb(void 0),this.mx=void 0)}kx(t){const i=new Mm("Unknown CDM error",t.errorCode,t.systemCode);this.mx?(this.mx.qb(i),this.mx=void 0):this.$C?(this.$C.qb(i),this.$C=void 0):i.Kb===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.ox("output-restricted"):1===i.Jb?this.ox("expired"):this.ox("internal-error")}Cx(t){0!==t.message.byteLength?(this.$C&&(this.$C.Wb(void 0),this.$C=void 0),this.Co(new fs(this,"license-request",pm(this.KA,it(t.message).buffer),t.defaultURL||void 0))):this.$C&&(this.$C.qb("Empty key message"),this.$C=void 0)}xx(t){this.Ox||(this.Ox=t,this.jx.Wb(t))}get _C(){return this.zx}get wC(){return this.Px}set wC(t){this.Px=t}get cC(){return this.ZC.Zb}get lC(){return NaN}async Ws(){this.throwIfClosed(),this.mx&&(this.mx.qb(void 0),this.mx=void 0),this.aL=!0,this.ZC.Wb(void 0)}async mC(t,i){this.throwIfClosed(),this.$C=new Rs,this.Bx=ve(i);(this.Ox||await this.jx.Zb).webkitGenerateKeyRequest(this.KA,this.Bx),await this.$C.Zb}async $n(t){return this.throwIfClosed(),!1}async ET(){this.throwIfClosed()}async Yn(t){if(this.throwIfClosed(),this.mx=new Rs,Vt.LE||Vt.DE)return cM.Mx((async()=>{await this.doUpdate(t)}));await this.doUpdate(t)}async doUpdate(t){if(void 0===this.mx)return;(this.Ox||await this.jx.Zb).webkitAddKey(this.KA,ve(t),this.Bx,this.wC),await this.mx.Zb,Vt.DE&&await ri(500)}throwIfClosed(){if(this.aL)throw new b("Already closing or closed.")}ox(t){this.zx.Vb(),this.zx.Gb(vm,t),this.Co(new cn(this))}async Rx(){const t=this.Ox||await this.jx.Zb;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.KA,this.Px)}catch(t){}finally{await ri(500)}}constructor(t){super(),this.KA=t,this.$C=void 0,this.mx=void 0,this.aL=!1,this.Bx=void 0,this.Ox=void 0,this.ZC=new Rs,this.Px="",this.jx=new Rs,this.zx=new Us}},lM=class{bn(t){return this.Ox=t,this.Ox.addEventListener("webkitkeyadded",this.hx),this.Ox.addEventListener("webkitkeyerror",this.Ux),this.Ox.addEventListener("webkitkeymessage",this.Qx),this.Fx.forEach(((i,e)=>i.xx(t))),this.Yx.forEach((i=>i.xx(t))),Promise.resolve()}EC(t){return t.removeEventListener("webkitkeyadded",this.hx),t.removeEventListener("webkitkeyerror",this.Ux),t.removeEventListener("webkitkeymessage",this.Qx),this.Ox=void 0,Promise.resolve()}async tr(){let t=this.Fx.entries(),i=t.next();for(;!i.done;)await i.value[1].Rx(),i=t.next();this.Fx.clear()}async DC(t,i,e){const s=new dM(this.ZA);return this.Ox&&s.xx(this.Ox),this.Yx.push(s),s}SC(t){return Promise.resolve(!1)}Gx(t){if(!t)return;let i=this.Fx.get(t);return i||(i=this.Yx.shift(),i?(i.wC=t,this.Fx.set(t,i),i):void 0)}constructor(t,i){this.ZA=t,this.wd=i,this.Ox=void 0,this.Fx=cs(),this.Yx=[],this.hx=t=>{const i=this.Gx(t.sessionId);i&&i.Lx()},this.Ux=t=>{const i=this.Gx(t.sessionId);i&&i.kx(t)},this.Qx=t=>{const i=this.Gx(t.sessionId);i&&i.Cx(t)}}},fM=class{LC(){return Promise.resolve(new lM(this.ZA,this.Vx))}xC(){return this.Vx}constructor(t,i){this.ZA=t,this.Vx=i}};function sh(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Be(t){let i;for(;Yt(i=t.firstChild);)t.removeChild(i)}function _M(t,i){t.insertBefore(i,t.firstChild)}function gM(t){const i=t.className;return"string"==typeof i?i:i&&"string"==typeof i.baseVal?i.baseVal:""}function wM(t,i){const e=t.className;"string"==typeof e?t.className=i:e&&"string"==typeof e.baseVal&&(e.baseVal=i)}function AM(t,i){return void 0!==t.classList?t.classList.contains(i):void 0!==t.className&&-1!==(" "+gM(t)+" ").indexOf(" "+i+" ")}function vM(t,i){if(void 0!==t.classList)t.classList.add(i);else if(void 0!==t.className){const e=gM(t);-1===(" "+e+" ").indexOf(" "+i+" ")&&wM(t,(e+" "+i).trim())}}function mM(t,i){if(void 0!==t.classList)t.classList.remove(i);else if(void 0!==t.className){let e=" "+gM(t)+" ";const s=" "+i+" ";for(;-1!==e.indexOf(s);)e=e.replace(s," ");wM(t,e.trim())}}function pM(t,i,e){void 0===e&&(e=!AM(t,i)),e?vM(t,i):mM(t,i)}function yM(t){t.stopPropagation()}function MM(t,i){Vt.DE&&Vt.EE<3?function(t,i){let e=i;switch(i){case"flex":e="-webkit-flex";break;case"inline-flex":e="-webkit-inline-flex"}t.display=e}(t,i):function(t,i){if(t.display=i,t.display!==i){let e=i;switch(i){case"flex":e="-ms-flexbox";break;case"inline-flex":e="-ms-inline-flexbox"}t.display=e}}(t,i)}function TM(t,i){const e=i.style;if(e)for(const i of w.keys(t)){const s=t[i];void 0!==s&&(e[i]=s)}}function yc(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.top="0",i.bottom="0",i.width="100%",i.height="100%"}function NM(t){t.removeAttribute("title")}function DM(t){t.addEventListener("mouseover",(t=>{NM(t.target)}))}function IM(t){try{return Boolean(t)&&t===t.top}catch(t){return!1}}function SM(t){try{return Boolean(t)&&t.parent!==t}catch(t){return!1}}function me(t){return"video"===function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}(t)}function EM(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load())}function bM(){return void 0!==h?h.createElement("video"):void 0}function LM(){return uM||(uM=bM()),uM}var kM,wi,on=class{FC(t,i){try{return Promise.resolve(function(t,i){if(!on.qC())throw new b("Unsupported key system "+t);for(let e of i){let i=Ne(CM,_m,t,e);if(i)return new fM(t,i)}throw new b("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static qC(){return Hn()}};function CM(t,i){const e=LM();return!(!e||!e.canPlayType||""===e.canPlayType(i,t))}function sn(){return kM||(kM=function(){const t=[];nM.qC()&&t.push(new nM);qy.qC()&&t.push(new qy);Jy.qC()&&t.push(new Jy);on.qC()&&t.push(new on);return new oM(t)}()),kM}!function(t){t[t.Wx=0]="Wx",t[t.Hx=1]="Hx"}(wi||(wi={}));var Yu=class extends wn{constructor(t){super(er.Bw),this.currentTime=t}},tn=class extends wn{constructor(t){super(er.Rw),this.currentTime=t}},xM=[er.H_,er.Rw,l.jh,l.Sh],OM=class extends Pl{qx(t){!this.Xx&&t>=ae.Xn&&(this.Xx=!0,this.Co(new ps(this.Zx.Mf,t)))}Kx(t){!this.Jx&&t>=ae.uT&&(this.Jx=!0,this.Co(new ns(this.Zx.Mf,t)))}$x(t){this.tO||(t>=ae.cT&&this.iO<ae.cT&&!this.Zx.Ff||this.eO&&t>=ae.cT)&&this.Co(new tn(this.Zx.Mf))}sO(t){!this.nO(t)||this.Zx.If||this.Zx.lt||this.Co(new Yu(this.Zx.Mf))}rO(t){this.iO<=ae.uT&&t>=ae.cT&&this.Co(new gt(this.Zx.Mf,t))}maybeDispatchCanPlayThroughEvent(t){t===ae.dT&&this.Co(new us(this.Zx.Mf,t))}nO(t){const i=!this.Zx.Ff&&t<=ae.uT,e=!this.hO&&this.iO<=ae.uT;return i&&!e}get eO(){return!this.Zx.Ff&&this.hO}tr(){this.iO=ae.aT,this.hO=!0,this.Jx=!1,this.Xx=!1}gn(){this.Vo(),this.tO&&this.Zx.fn(er.Rw,this.oO),this.Zx.fn(l.jh,this.aO),this.Zx.fn(l.Sh,this.uO),this.Zx.fn(er.H_,this.cO)}constructor(t,i=!1){super(),this.Zx=t,this.tO=i,this.iO=ae.aT,this.hO=!0,this.Jx=!1,this.Xx=!1,this.cO=t=>{const i=this.Zx.Jf;i!==this.iO&&this.Co(new Lr(t.currentTime,i)),i===ae.aT&&(this.Jx=!1,this.Xx=!1),this.qx(i),this.Kx(i),this.rO(i),this.maybeDispatchCanPlayThroughEvent(i),this.$x(i),this.sO(i),this.iO=i},this.aO=()=>{this.sO(this.iO),this.$x(this.iO),this.hO=this.Zx.Ff},this.uO=()=>{this.hO=this.Zx.Ff},this.oO=t=>{this.Co(new tn(t.currentTime))},this.Zx.yn(er.H_,this.cO),this.Zx.yn(l.jh,this.aO),this.Zx.yn(l.Sh,this.uO),this.tO&&this.Zx.yn(er.Rw,this.oO)}},en=class extends Pl{get Mf(){return this.Zx.Mf}get If(){return this.Zx.If}get lt(){return this.Zx.lt}get Ff(){return this.Zx.Ff}get Jf(){return this.Zx.Jf}Qd(){this.Vo(),this.Zx.fn(xM,this.Ds)}constructor(t){super(),this.Zx=t,this.Zx.yn(xM,this.Ds)}},Bs=class{dO(){return this.lO}fO(t){this.lO=t}get _O(){return this.NS}get gO(){return!1}get wO(){const t=this.AO.certificate;if(t)return Qs(t)?Al(t):ve(t)}vO(){return this.AO.licenseAcquisitionURL||this.dO()}get mO(){return!1}pO(t){return Promise.resolve()}yO(t,i){return Promise.resolve(void 0)}get AS(){return Boolean(this.AO.useCredentials)}async MO(t,i,e,s){const n=this.TO(t,i,e,s);if(""===n.zu)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this._O.SI(n);return await t.DO(i)}catch(t){return Ao(t),void await this.IO(t,n.zu,s)}}TO(t,i,e,s){const n=this.SO().WI(),r=this.AS,h={zu:this.EO(),fS:i,dS:n,cS:t,AS:r,lS:Nr.POST,CI:0,Hd:s,Rg:iu.JI,gS:e};return new Pc(h)}bO(t,i){return Promise.resolve(t)}LO(t,i,e,s){return Promise.resolve(t)}SO(){return new Jh(this.AO.headers||{})}async IO(t,i,e){throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}EO(t,e){let s=e;const n=this.AO.queryParameters;if(!s){const t=this.vO();if(!t)return"";s=t}if(n||t){const e=i.Dh(s);t&&zo(e,t),n&&zo(e,n),s=e.href}return s}kO(t,i){return jM(t)}CO(t){return new j(t)}async xO(t,i,e){const s=await this.kO(t,e),n=await this.MO(s,this.OO,i,e);return this.CO(n)}gn(){}constructor(t,i,e,s,n){this.lO=void 0,this.ZA=t,this.jO=i,this.zO=e,this.NS=s,this.OO=n,this.AO=this.PO(i)}};function jM(t){return Promise.resolve(it(t).buffer)}var zM,we=class extends Bs{PO(t){return t.widevine||{}}async BO(t,i){return this.wO?this.wO:this.RO(new j(t),i)}RO(t,i){return super.xO(t,Kt.eS,i)}constructor(t,i,e,s){super(cm,t,i,e,s)}};!function(t){t.BA="Widevine",t.UO="PlayreadyV2",t.QO="PlayreadyV3",t.PA="PlayreadyV2",t.RA="Fairplay"}(zM||(zM={}));var PM={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function BM(t,e){var s,n,r,h;const o=PM[e],a=t.accountName;return{CustomerName:t.customerName,AccountName:a,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(s=i.FO)?void 0:s.Ys,OSVersion:null==(n=i.FO)?void 0:n.YO,DRMProvider:o.DRMProvider,DRMVersion:o.DRMVersion,DRMType:o.DRMType,DeviceVendor:null==(r=i.FO)?void 0:r.GO,DeviceModel:null==(h=i.FO)?void 0:h.VO}}}function RM(t,i){if(!t.accountName)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, accountName is not set.");if(!t.customerName)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, customerName is not set.");if(!t.portalId)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, portalId is not set.");throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration.")}function UM(t,i,e){let s;if(Sg(t))s={AuthToken:t.authToken,Payload:i};else{if(!Eg(t))throw RM(t,e);s={LatensRegistration:BM(t,e),Payload:i}}return wa(JSON.stringify(s))}async function QM(t,i,e){const s=t.bI;if(!s)throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,i);const n=s;let r,h;try{r=await n.WO(e),h=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){h=""}throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.SI.zu,n.kI,n.HO,h)}var FM=class extends we{static qO(){return i.Ys.XO?"required":"optional"}IO(t,i,e){return QM(t,i,e)}pO(t){return this.ZO?dt(this.ZO.Zb,t):(this.ZO=new Rs,Promise.resolve())}async kO(t,i){const e=this.jO;if(!e)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return UM(e,Pe(t),zM.BA)}CO(t){let i;if(!t.license)throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return i=Al(t.license),i}KO(t){return Promise.resolve(new j(t))}async BO(t,i){this.JO();const e=await this.kO(t,i),s=await this.MO(e,Uv.YI,Kt.sS,i);return await this.KO(s)}async RO(t,i){const e=await super.RO(t,i);return this.JO(),e}JO(){this.ZO||(this.ZO=new Rs),this.ZO.Wb()}gn(){this.ZO&&this.ZO.Xd(),super.gn()}constructor(t,i,e){super(t,i,e,Uv.GI),this.ZO=void 0}},YM=class extends we{get $O(){if(bg(this.jO))return this.jO.token}async kO(t,i){const e=await jM(t),s=this.zO,n=dg(new j(e)),r=this.$O;if(!r)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:s})}constructor(t,i,e){super(t,i,e,Uv.YI),this.fO("https://widevine-proxy.drm.technology/proxy")}};function GM(t,i){let e=i||{};return t.ticket&&t.sessionId&&(e=Tt({},e,{SessionId:t.sessionId,Ticket:t.ticket})),Tt({},e,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}var VM=class extends we{EO(t,i){let e=t;return Dg(this.jO)&&(e=GM(this.jO,e)),super.EO(e,i)}constructor(t,i,e){super(t,i,e,Uv.YI),this.fO("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}},WM="Conax-Custom-Data";function HM(t,i,e){const s=t&&Ng(t)&&t;if(s&&!e.has(WM)){const t=kl(s)?s.token:void 0,n=kl(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:i+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});e.set(WM,r)}return e}var qM=class extends we{SO(){const t=super.SO();return HM(this.jO,"Widevine",t)}constructor(t,i,e){super(t,i,e,Uv.YI),this.fO("https://connect.conax.com:8094/license")}};function XM(t){const i=Qi(new j(t));return Al(JSON.parse(i).license)}function ZM(t){return"string"==typeof t.token?t.token:wa(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function un(t,i,e){let s;return s=e.token?"x-dt-auth-token":"dt-custom-data",t.set(s,i),t}var KM=class extends we{get $O(){return ZM(this.jO)}CO(t){return XM(t)}SO(){return un(super.SO(),this.$O,this.jO)}constructor(t,i,e){super(t,i,e,Uv.YI),this.fO("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}},JM=class extends we{SO(){const t=super.SO(),i=this.jO.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e){super(t,i,e,Uv.YI)}};async function an(t,i,e,s){if(!Lg(t))throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new Jh;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const h=t.streamId;let o;o=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:i,licenseType:o,streamId:h},u={zu:t.ticketAcquisitionURL,fS:Uv.GI,dS:n,lS:Nr.POST,cS:JSON.stringify(a),Hd:s},c=await e.SI(u);return await c.WO()}var $M=class extends we{SO(){const t=super.SO();return t.set("Content-Type","application/json"),t}async kO(t,i){const e=T_(t.buffer),s=this.jO,n=await an(s,"widevine_modular",this._O,i);this.fO(n.licenseServerUrl);const r=Sa(JSON.stringify({payload:e,ticket:n.ticket}));return super.kO(r,i)}CO(t){return Al(t.license)}constructor(t,i,e){super(t,i,e,Uv.GI)}},tT=class extends we{SO(){if(!kg(this.jO))throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.SO();return t.set("X-AxDRM-Message",this.jO.token),t}constructor(t,i,e){super(t,i,e,Uv.YI)}};function iT(t){const i=new j(2*t.length);for(let e=0;e<t.length;e+=1)i[2*e]=t.charCodeAt(e),i[2*e+1]=0;return i}var Es=class extends Bs{PO(t){return t.playready||{}}SO(){const t=new Jh(this.tj);return t.qI(super.SO()),t}ij(t){return t.length>=1&&t[0].mI.length>0}yO(t){const i=this.jO.playready.customData;if(i){const t=iT(i),e=iT('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+Pe(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{tx:e}})}return super.yO(t)}async kO(t,i){const e=await jM(t);return this.ej(e)}async ej(t){var e,s;let n=null;const r=Ta(new DataView(t),new L,!0);let h;try{h=i.gI(r)}catch(t){return n}const o=null==(e=h.lI("PlayReadyKeyMessage")[0])?void 0:e.lI("LicenseAcquisition")[0];var a;const u=null!=(a=null==o?void 0:o.lI("Challenge"))?a:[];this.ij(u)&&(n=Aa(u[0].sj));const c=new Jh;var d;const l=null!=(d=null==o||null==(s=o.lI("HttpHeaders")[0])?void 0:s.lI("HttpHeader"))?d:[];for(const t of l){const i=t.lI("name")[0].sj,e=t.lI("value")[0].sj;c.append(i,e)}return this.tj=c,n}BO(t,i){return Promise.resolve(t)}RO(t,i){return super.xO(t,Kt.nS,i)}constructor(t,i,e){super(um,t,i,e,Uv.YI),this.tj=void 0}},Ue=class t{static nj(t){return"3"===t.version?zM.QO:zM.UO}rj(){const t={};if(this.qk===zM.QO){const i={LatensRegistration:BM(this.hj,zM.QO)};t["X-TITANIUM-DRM-CDATA"]=wa(JSON.stringify(i))}return t}get aj(){return this.qk}get HC(){return this.qk===zM.UO}constructor(i){this.hj=i,this.qk=t.nj(i)}};var eT=class extends Es{yO(t){const i=this.jO;if(!this.jO)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(Eg(i)){const t={};return t.playready={tx:sT(i,this.uj.aj)},Promise.resolve(t)}return Promise.reject(RM(i,zM.PA))}SO(){const t=new Jh(this.uj.rj());return t.qI(super.SO()),t}async IO(t,e,s){const n=t.bI;if(!n)throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e);let r,h;try{const t=await n.cj(s),e=Qi(new j(t)),a=i.gI(e);if(a){const t=function(t,i){return function(t,i){const e=t.m.slice(),s=[];for(;e.length>0;){const t=e.shift();i(t)?s.push(t):e.push(...t.m)}return s}(t,(t=>t.dj===i))}(a,"CustomData");var o;if(t.length>0)r=JSON.parse(t[0].sj),h=null==(o=r.DrmErr)?void 0:o.desc}}catch(t){}throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e,n.kI,n.HO,h)}ij(t){if(1!==t.length)throw new Qr(Ui.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,i,e){super(t,i,e),this.uj=new Ue(this.jO)}};function sT(t,i){const e=BM(t,i),s=e.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+wa('<LatensRegistration formatversion="'+s+'"><AccountName>'+e.AccountName+"</AccountName><CustomerName>"+e.CustomerName+"</CustomerName><PortalID>"+e.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+e.DeviceInfo.DeviceType+"</DeviceType><OSType>"+e.DeviceInfo.OSType+"</OSType><OSVersion>"+e.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+e.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+e.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+e.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+e.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+e.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=og(n,!0);return og('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+Pe(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}var nT,rT=class extends Es{get $O(){if(bg(this.jO))return this.jO.token}ij(t){if(1!==t.length)throw new Qr(Ui.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}EO(t,i){const e=Tt({},t||{},{token:this.$O});return super.EO(e,i)}constructor(t,i,e){super(t,i,e),this.fO("https://playready-license.drm.technology/rightsmanager.asmx")}},hT=class extends Es{EO(t,i){let e=t;return Dg(this.jO)&&(e=GM(this.jO,e)),super.EO(e,i)}constructor(t,i,e){super(t,i,e),this.fO("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}},oT=class extends Es{SO(){const t=super.SO();return HM(this.jO,"PlayReady",t)}constructor(t,i,e){super(t,i,e),this.fO("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}},aT=class extends Es{get $O(){return ZM(this.jO)}CO(t){const i=function(t){const i=Qi(new j(t));return Df(i,"<?xml")?0:1}(t);return 1===i?XM(t):super.CO(new j(t))}SO(){return un(super.SO(),this.$O,this.jO)}constructor(t,i,e){super(t,i,e),this.fO("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};!function(t){t[t.lj=0]="lj",t[t.WO=1]="WO"}(nT||(nT={}));var ls,uT=class extends Es{SO(){const t=super.SO();return this._j&&t.set("Ticket",this._j),t.set("Content-Type","text/xml"),t}async kO(t,i){const e=this.jO,s=await an(e,"playready",this._O,i);return this.fO(s.licenseServerUrl),this._j=s.ticket,super.kO(t,i)}constructor(t,i,e){super(t,i,e)}},cT=class extends Es{SO(){if(!kg(this.jO))throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.SO();return t.set("X-AxDRM-Message",this.jO.token),t}};!function(t){t.GI="application/json",t.gj="application/x-www-form-urlencoded",t.wj="application/octet-stream",t.Ru="text/plain;charset=UTF-8"}(ls||(ls={}));var Zo=class extends Bs{get mO(){return!0}Aj(){return this.AO.certificateURL||this.vj}mj(t){this.vj=t}kO(t){return Promise.resolve(this.pj(t,this.yj))}pj(t,i){return"spc="+encodeURIComponent(Pe(t))+"&assetId="+encodeURIComponent(i)}get Mj(){return ls.gj}PO(t){return t.fairplay||{}}Tj(t){const i=t.indexOf("?");if(i>=0)return Promise.resolve(t.substr(i+1));{const i=t.split("skd://").pop();if(i){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(i))return Promise.resolve(i)}const e=t.split("/");return Promise.resolve(e[e.length-1])}}async yO(t){var i;const e=null!=(i=this.Nj)?i:_a(new j(t)),s=await this.Tj(e);this.yj=s;const n={};return n.fairplay={gx:s},n}SO(){const t=super.SO();return t.set("Content-Type",this.Mj),t}async BO(t,i){return this.wO?this.wO:await this.Dj(i)}RO(t,i){return super.xO(t,Kt.tS,i)}Ij(t){const i=this.Aj(),e=this.SO(),s={zu:i,fS:Uv.YI,dS:e,lS:Nr.GET,AS:!1,cS:null,CI:0,Hd:t,Rg:iu.JI,gS:Kt.iS};return new Pc(s)}async Dj(t){const i=this.Ij(t),e=await this._O.SI(i),s=await e.cj();return new j(s)}CO(t){let i;if("string"==typeof t){let e=t.trim();"<ckc>"===e.substr(0,5)&&"</ckc>"===e.substr(-6)&&(e=e.slice(5,-6)),i=Al(e)}else i=new j(t);return i}EO(t,i){let e=super.EO(t,i);return Df(e,"skd:")&&(e=e.substr(4)),e}constructor(t,i,e,s,n){super(t.ZA,i,e,s,n),this.yj="",this.vj=void 0,this.Nj=t.Sj}};function dT(t){return!S(t.getTime())}function eu(){return Date.now()||(new Date).getTime()}function lT(t){return t/1e3}function ir(t){return 1e3*t}var Ac=1/6,fT=qo.fromNumber(Oa);function Y(t,i){if(0===i)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(fT))return t.toNumber()/i;const e=t.divide(i),s=t.subtract(e.multiply(i));return e.toNumber()+s.toNumber()/i}var _T=class extends Zo{get Mj(){return ls.wj}Tj(t){let i=t.split("://",1);return"skd"!==i[0].slice(-3).toLowerCase()?Promise.resolve(""):(i=t.split(";",2),i.length>1?Promise.resolve(i[1]):Promise.resolve(super.Tj(t)))}async kO(t){return t}CO(t){return new j(t)}EO(t,i){const e=t||{};return e.p1=eu(),super.EO(e,i)}constructor(t,i,e,s){super(t,i,e,s,Uv.YI)}},gT=class extends Zo{get Mj(){return ls.GI}get $O(){if(!bg(this.jO))throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.jO.token}pj(t,i){const e={token:this.$O,contentId:i,payload:Pe(t)};return JSON.stringify(e)}CO(t){return new j(t)}SO(){const t=super.SO();return t.set("x-vudrm-token",this.$O),t}constructor(t,i,e,s){super(t,i,e,s,Uv.YI),this.fO("https://fairplay-license.drm.technology/license"),this.mj("https://fairplay-license.drm.technology/certificate")}},wT="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",AT="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",vT=class extends Zo{CO(t){const i=function(t){let i;try{i=JSON.parse(t).ckc}catch(t){throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_INVALID,wT)}if(!i)throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,AT);return i}(Qi(new DataView(t)));return super.CO(i)}constructor(t,i,e,s){super(t,i,e,s,Uv.YI)}};var mT=class extends Zo{get Mj(){return ls.GI}async kO(t){const i=this.jO;if(!i)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return UM(i,Pe(t),zM.RA)}CO(t){try{let i;if(Qs(t)){const e=t.trim();i=JSON.parse(e)}else i=t;if(i.license){const t=Aa(i.license);return new j(t)}throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}IO(t,i,e){return QM(t,i,e)}constructor(t,i,e,s){super(t,i,e,s,Uv.GI)}},pT=class extends Zo{Aj(){const t=super.Aj();if(!t)return t;const e=i.Dh(t),s=this.jO;return Dg(s)&&zo(e,{accountId:s.accountId,applicationId:s.applicationId||""}),e.href}Tj(t){return Dg(this.jO)?Promise.resolve(this.jO.contentId):super.Tj(t)}async kO(t){return t}CO(t){return new j(t)}get Mj(){return ls.wj}EO(t,i){let e=t;return Dg(this.jO)&&(e=function(t,i){return Tt({},GM(t,i),{KeyId:t.keyId})}(this.jO,e)),super.EO(e,i)}constructor(t,i,e,s){super(t,i,e,s,Uv.YI),this.fO("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.mj("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}},yT=class extends Zo{SO(){const t=super.SO();return HM(this.jO,"FairPlay",t)}async Dj(t){const i={zu:this.Aj(),fS:Uv.YI,dS:{},lS:Nr.GET,AS:!1,cS:null,CI:0,Hd:t,Rg:iu.JI,gS:Kt.iS},e=await this._O.SI(i),s=await e.cj();return new j(s)}async kO(t){return t}Tj(t){const i=t.indexOf("?");if(0===t.indexOf("skd://")){let e;return e=i>=0?t.substring(6,i):t.substring(6),Promise.resolve(function(t){return Qi(Al(t))}(e))}return Promise.resolve("unknown")}CO(t){try{const i=JSON.parse(t);return new j(Aa(i.CkcMessage))}catch(t){throw new g("CFLRW-66")}}constructor(t,i,e,s){if(super(t,i,e,s,Uv.Ru),!Ng(i))throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.fO("https://connect.conax.com:8097/license")}},MT=class extends Zo{Tj(t){return Df(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new Qr(Ui.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}pj(t,i){return"spc="+Pe(t)+"&assetId="+i}constructor(t,i,e,s){super(t,i,e,s,Uv.Ru),this.fO(wg[N.RA])}},TT=class extends Zo{get $O(){return ZM(this.jO)}pj(t,i){const e="spc="+encodeURIComponent(Pe(t))+"&"+encodeURI(i);return"persistent"===this.AO.licenseType?e+"&offline=true":e}SO(){return un(super.SO(),this.$O,this.jO)}constructor(t,i,e,s){super(t,i,e,s,Uv.Ru),this.fO("https://lic.drmtoday.com/license-server-fairplay/")}},NT=class extends Zo{Tj(t){let e=t;return Df(e,"skd:")&&(e="http:"+e.substring(4)),Df(e,"http:")||Df(e,"https:")?Promise.resolve(i.Dh(e).hostname):Promise.reject(new g("Could not parse ExpressPlay FairPlay content ID."))}async kO(t){return t}CO(t){return new j(t)}get Mj(){return ls.wj}constructor(t,i,e,s){super(t,i,e,s,Uv.YI)}},DT=class extends Zo{SO(){const t=super.SO(),i=this.jO.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e,s){super(t,i,e,s,Uv.Ru)}},IT=class extends Zo{async Dj(t){const i=this.Aj(),e=this.SO(),s={zu:i,fS:Uv.GI,dS:e,lS:Nr.POST,Hd:t,Rg:iu.JI,gS:Kt.iS},n=await this._O.SI(s),r=await n.WO();return new j(Al(r.certificate))}get Mj(){return ls.GI}async RO(t,i,e){void 0===e&&(e=Uv.Ru);const s=Pe(t),n=this.jO,r=await an(n,"fairplay",this._O,i),h=Sa(JSON.stringify({spc:s,ticket:r.ticket})),o={zu:this.vO(),fS:Uv.GI,dS:this.SO(),lS:Nr.POST,cS:h,CI:0,Hd:i,Rg:iu.JI,gS:Kt.tS},a=await this._O.SI(o);return Al((await a.WO()).licence)}constructor(t,i,e,s){if(super(t,i,e,s,Uv.GI),!Lg(i))throw new g("Invalid Xstream DRM configuration")}},ST=class extends Zo{pj(t,i){return Pe(t)}CO(t){if(0===t.length)throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.CO(t)}SO(){const t=super.SO();return t.set("Content-Type","text/plain"),t}constructor(t,i,e,s){super(t,i,e,s,Uv.Ru)}},ET=class extends Zo{get Mj(){return ls.GI}pj(t,i){return t}CO(t){return new j(t)}SO(){if(!kg(this.jO))throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.SO();return t.set("X-AxDRM-Message",this.jO.token),t}constructor(t,i,e,s){super(t,i,e,s,Uv.YI)}},bT=class extends Zo{get Mj(){return ls.Ru}pj(t,i){const e={spc:Pe(t)};return JSON.stringify(e)}Tj(t){const e=i.Dh(t);return this.Ej=t,e.searchParams.has("b")?Promise.resolve(e.searchParams.get("b")):Promise.reject(new Qr(Ui.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}EO(t,i){let e=this.vO();return!e&&this.Ej&&(e=this.Ej),e&&(e=e.replace("skd://","https://")),super.EO(t,i||e)}CO(t){try{let i;if(i=Qs(t)?JSON.parse(t.trim()):t,i.ckc)return Al(i.ckc)}catch(t){throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,i,e,s){super(t,i,e,s,Uv.GI),this.Ej=void 0}},Ke=class{bj(t){return this.Lj(t)}Cj(t,i){throw new b(i+" must be "+this.xj+". (Received: "+t+")")}constructor(t,i){this.Lj=t,this.xj=i}},Qn=(new Ke((function(t){return!0}),"any"),new Ke(bd,"a number")),$=new Ke(Qs,"a string"),LT=new Ke(Id,"a boolean"),Re=(new Ke(Ed,"a date"),new Ke(Nd,"undefined")),Su=new Ke(Ut,"an object"),kT=new Ke((function(t){return null===t}),"null");new Ke((function(t){return null==t}),"null or undefined");function CT(t,i){throw new b(i+" has an incorrect type")}var xT=class{bj(t){if(!Ut(t))return!1;for(const i of w.keys(this.Oj)){if(!this.Oj[i].bj(t[i]))return!1}return!0}Cj(t,i){if(!Ut(t))throw new b(i+" must be an object.");for(const e of w.keys(this.Oj)){const s=this.Oj[e];if(!s.bj(t[e]))return s.Cj(t[e],i+"."+String(e))}throw new b}constructor(t){this.Oj=t}};function Ae(t){return new xT(t)}function OT(t){return w.keys(t).map((i=>t[i]))}var jT=class{bj(t){return qt(this.jj,t)}Cj(t,i){return CT(0,i)}constructor(t){this.jj=t}};function Xt(t){return new jT(t)}var zT=class{bj(t){return this.zj.some((i=>i.bj(t)))}Cj(t,i){return CT(0,i)}constructor(t){this.zj=t}};function Bn(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return new zT(i)}var PT=class{bj(t){return Gt(t)&&t.every((t=>this.Pj.bj(t)))}Cj(t,i){if(!Gt(t))throw new b(i+" must be an array.");for(let e=0;e<t.length;e++){const s=t[e];this.Pj.bj(s)||this.Pj.Cj(s,i+"["+e+"]")}return CT(0,i)}constructor(t){this.Pj=t}};function Dt(t){return new PT(t)}var BT=class{bj(t){return Ut(t)&&w.keys(t).every((i=>this.Pj.bj(t[i])))}Cj(t,i){if(!Ut(t))throw new b(i+" must be an object.");for(const e of w.keys(t))if(!this.Pj.bj(t[e]))return this.Pj.Cj(t[e],i+"."+e);return CT(0,i)}constructor(t){this.Pj=t}};function RT(t){return new BT(t)}var UT=class{bj(t){return this.Pj().bj(t)}Cj(t,i){return this.Pj().Cj(t,i)}constructor(t){this.Pj=qc(t)}};var QT=Ae({responseCode:Qn,isException:LT,description:$,title:$,correlationId:$});async function FT(t,i,e,s,n){const r=function(t,i,e,s){const n={token:i.token,account:i.accountId,form:"json"},r=decodeURIComponent(pa(e,n)),h=new Jh({});h.append("Content-Type","application/json");const o=Pe(t),a={getFairplayLicense:{releasePid:i.releasePid,spcMessage:o}};return{zu:r,fS:Uv.Ru,dS:h,lS:Nr.POST,cS:JSON.stringify(a),Hd:s,Rg:iu.JI,gS:Kt.tS}}(t,i,e,n);return await async function(t,i){const e=await i.SI(t),s=await e.WO();if(QT.bj(s))throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.zu,s.responseCode);return Al(s.getFairplayLicenseResponse.ckcResponse)}(r,s)}var YT=class extends Zo{Tj(t){const i=t.replace("FairPlay",this.Bj.releasePid);return super.Tj(i)}async RO(t,i){return await FT(t,this.Bj,this.vO(),this._O,i)}constructor(t,i,e,s){super(t,i,e,s,Uv.YI),this.Bj=i}},GT=class extends Bs{PO(t){return t.clearkey||{}}async MO(t,i,e,s){const n=this.AO;if(this.vO())return super.MO(t,this.OO,e,s);if(n.keys&&n.keys.length){const t={keys:n.keys.map((t=>{let i=t;return i||(i={}),{kty:"oct",kid:i.id,k:i.value}}))};return ug(JSON.stringify(t)).buffer}throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}BO(t,i){return Promise.resolve(new j(0))}async RO(t,i){const e=await super.xO(t,Kt.rS,i),s=JSON.parse(_a(e));if(s.keys)for(const t of s.keys)t.k&&(t.k=v_(t.k)),t.kid&&(t.kid=v_(t.kid));return ug(JSON.stringify(s))}constructor(t,i,e){super(Dn,t,i,e,Uv.YI)}},VT=class extends we{},WT={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function HT(t,i,e){const s=tN(i),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(i);const r=await dt(Promise.resolve(n.call(t,s)),e);return cg(r)?ve(r):$T(Tt({},WT,r))}async function qT(t,i,e,s,n){const r=t.onCertificateResponse,h=JT(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);return ve(await dt(Promise.resolve(r.call(t,h)),n))}async function XT(t,i,e,s){const n=await async function(t,i,e,s){const n=null==t?void 0:t.onLicenseRequest,r=KT(i,e);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const h=await dt(Promise.resolve(n.call(t,r)),s);if(cg(h))return ve(h).buffer;return Tt({fairplaySkdUrl:void 0},WT,h)}(t,i,e,s);return n instanceof ArrayBuffer?n:$T(n)}async function ZT(t,i,e,s,n,r){const h=KT(e,n),o=await async function(t,i,e,s,n){const r=null==t?void 0:t.onLicenseResponse,h=JT(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);0;const o=await dt(Promise.resolve(r.call(t,h)),n);return ve(o)}(t,new j(i),h,s,r);return ve(o)}function KT(t,i){return Tt({},tN(t),{fairplaySkdUrl:i})}function JT(t,i,e){return{url:e.IS,status:e.kI,statusText:e.HO,headers:e.dS.WI(),body:t,request:i}}function $T(t){return new Pc({zu:t.url,lS:t.method,dS:t.headers,cS:t.body,AS:t.useCredentials})}function tN(t){var i;return{url:t.zu,body:null!=(i=iN(t.cS))?i:null,headers:t.dS.WI(),method:t.lS,useCredentials:t.AS}}function iN(t){if(t)return"string"==typeof t?ug(t):t instanceof ArrayBuffer?new j(t):ba(t)?Zn(t):void 0}var eN=class extends Es{BO(t,i){return Promise.resolve(t)}async RO(t,i){const e=await this.ej(it(t).buffer),s=this.TO(e,Uv.YI,Kt.nS,i),n=await XT(this.Rj,s,void 0,i);if(n instanceof ArrayBuffer)return new j(n);if(""===n.zu)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this._O.SI(n),e=await t.cj(i);return await ZT(this.Rj,e,s,t,void 0,i)}catch(t){throw Ao(t),new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,i,e,s){super(t,i,e),this.Rj=s}},sN=class extends VT{async BO(t,i){if(this.wO)return this.wO;const e=this.TO(t,Uv.YI,Kt.sS,i),s=await HT(this.Rj,e,i);if(s instanceof j)return s;if(""===s.zu)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this._O.SI(s),r=await n.cj(i)}catch(t){throw Ao(t),new Qr(Ui.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const h=KT(e,void 0);return await qT(this.Rj,new j(r),h,n,i)}async RO(t,i){const e=this.TO(t,Uv.YI,Kt.eS,i),s=await XT(this.Rj,e,void 0,i);if(s instanceof ArrayBuffer)return new j(s);if(""===s.zu)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this._O.SI(s),n=await t.cj(i);return await ZT(this.Rj,n,e,t,void 0,i)}catch(t){throw Ao(t),new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,i,e,s){super(t,i,e,Uv.YI),this.Rj=s}},nN=class extends Zo{async BO(t,i){if(this.wO)return this.wO;const e=this.Ij(i),s=await HT(this.Rj,e,i);if(ba(s))return s;try{const t=await this._O.SI(s),n=await t.cj(),r=KT(e,void 0);return await qT(this.Rj,new j(n),r,t,i)}catch(t){throw Ao(t),new Qr(Ui.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async RO(t,i){const e=this.TO(t,Uv.YI,Kt.tS,i),s=await XT(this.Rj,e,this.Uj,i);if(s instanceof ArrayBuffer)return new j(s);if(""===s.zu)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this._O.SI(s),n=await t.cj(i);return await ZT(this.Rj,n,e,t,this.Uj,i)}catch(t){throw Ao(t),new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}Tj(t){var i;return this.Uj=t,(null==(i=this.Rj)?void 0:i.extractFairplayContentId)?Promise.resolve(this.Rj.extractFairplayContentId(t)):super.Tj(t)}constructor(t,i,e,s,n){super(t,i,e,s,Uv.YI),this.Rj=n}},rN=class{Qj(t,i,e,s){switch(t.ZA.Rg){case N.BA:return this.Fj(i,e,s);case N.PA:return this.Yj(i,e,s);case N.RA:return this.Gj(t,i,e,s);case N.UA:default:return this.Vj(i,e,s)}}Fj(t,i,e){const s=function(t){return t.integration===Wf&&Qs(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&da._v.ov(s,et)){const n=da._v.fv(s,et,t);return new sN(t,i,e,n)}switch(s){case Rf:return new FM(t,i,e);case Ff:return new YM(t,i,e);case Qf:return new VM(t,i,e);case Fc:return new qM(t,i,e);case fn:return new KM(t,i,e);case Vc:return new JM(t,i,e);case pn:return new $M(t,i,e);case vn:return new tT(t,i,e);default:return new VT(t,i,e,Uv.YI)}}Yj(t,i,e){const s=t.integration;if(s&&da._v.ov(s,qi)){const n=da._v.fv(s,qi,t);return new eN(t,i,e,n)}switch(s){case Rf:return new eT(t,i,e);case Ff:return new rT(t,i,e);case Qf:return new hT(t,i,e);case Fc:return new oT(t,i,e);case fn:return new aT(t,i,e);case pn:return new uT(t,i,e);case vn:return new cT(t,i,e);default:return new Es(t,i,e)}}Gj(t,i,e,s){const n=i.integration;if(n&&da._v.ov(n,ka)){const r=da._v.fv(n,ka,i);return new nN(t,i,e,s,r)}switch(n){case Uf:return new _T(t,i,e,s);case Ff:return new gT(t,i,e,s);case Cl:return new vT(t,i,e,s);case Rf:return new mT(t,i,e,s);case Qf:return new pT(t,i,e,s);case Fc:return new yT(t,i,e,s);case Yf:return new MT(t,i,e,s);case fn:return new TT(t,i,e,s);case Gf:return new NT(t,i,e,s);case Vc:return new DT(t,i,e,s);case pn:return new IT(t,i,e,s);case _l:return new ST(t,i,e,s);case vn:return new ET(t,i,e,s);case wl:return new bT(t,i,e,s);case Vf:return new YT(t,i,e,s);default:return new Zo(t,i,e,s,Uv.Ru)}}Vj(t,i,e){return new GT(t,i,e)}Wj(t){return t.Rg===N.PA||t.Rg===N.BA||t.Rg===N.RA||t.Rg===N.UA}HC(t,i){var e;if(t.Rg!==N.PA)return!1;if(Yt(null==(e=i.playready)?void 0:e.customData))return!0;const s=i.integration;return(!s||!da._v.ov(s,ka))&&(s===Rf&&new Ue(i).HC)}qO(t,i){if(t.Rg!==N.BA)return;const e=i.integration;return e&&da._v.ov(e,ka)?void 0:e===Rf?FM.qO():void 0}};var Mt,hN="default",oN="theoplayer-stored-network-info-v2",aN=25e5,Vo=class{Hj(t){var e;const s=null==(e=i.qj)?void 0:e.Fb(t);if(void 0===s)return;const n=JSON.parse(s);if(void 0!==n&&void 0!==n[this.Xj]){if(!this.Zj(n))return n[this.Xj].availableBandwidth;var r;null==(r=i.qj)||r.Kj(t,JSON.stringify({}))}}Jj(){const t=this.Hj(oN);if(void 0!==t)return t;const i=this.Hj("theoplayer-stored-network-info");return i?8*i:void 0}Zj(t){const i=t[this.Xj].storedTimestamp;return!!i&&eu()-i>36e5}$j(t){this.tz=t,this.iz()}ez(){var t;return null!=this.tz||(this.tz=null!=(t=this.Jj())?t:aN),this.tz}constructor(){this.Xj=hN,this.tz=void 0,this.iz=ho((()=>{var t;const e={[this.Xj]:{availableBandwidth:this.tz,storedTimestamp:eu()}};null==(t=i.qj)||t.Kj(oN,JSON.stringify(e))}),1e4)}};Vo.Ib=new Vo,function(t){t[t.sz=0]="sz",t[t.nz=1]="nz",t[t.rz=2]="rz",t[t.oz=3]="oz",t[t.cz=4]="cz",t[t.CA=5]="CA",t[t.lz=6]="lz",t[t.fz=7]="fz",t[t.zA=8]="zA",t[t._z=9]="_z",t[t.gz=10]="gz"}(Mt||(Mt={}));var lu=class{get wz(){return 0}get Az(){return 0}vz(t){}},Cu=class{mz(t){this.hj=t}qO(t){const i=this.hj;if(void 0!==i)return this.pz.qO(t,i)}HC(t){const i=this.hj;return void 0!==i&&this.pz.HC(t,i)}yz(t){const i={ZA:t.ZA,Mz:t.Mz||[],Tz:t.Tz,Sj:t.Sj},e=this.pz.Qj(i,this.hj||{},t.zO,this.NS);return i.Tz&&e.fO(i.Tz),new uN(e)}constructor(t,i=new rN){this.hj=void 0,this.NS=t,this.pz=i}},uN=class{pO(t){return this.Nz.pO(t)}yO(t,i,e){return this.Nz.yO(i,e)}mO(){return this.Nz.mO||void 0!==this.Nz.wO}BO(t,i){return this.Nz.BO(t,i)}RO(t,i,e){return i&&this.Nz.fO(i),this.Nz.RO(t,e)}Qd(){this.Nz.gn()}constructor(t){this.Nz=t}},Ln=class extends uo{Dz(t){this.Iz.push(t);for(const i of t.og)this.tt(i);this.Sz(t)}Ez(t){To(this.Iz,t),this.bz(t);for(const i of t.og)this.Lz(i)||this.it(i)}Lz(t){for(const i of this.Iz)if(i.dg(t))return!0;return!1}Sz(t){t.yn(Mi.L_,this.kz),t.yn(Mi.C_,this.Cz)}bz(t){t.fn(Mi.L_,this.kz),t.fn(Mi.C_,this.Cz)}gn(){for(;this.Iz.length>0;)this.Ez(this.Iz[0]);super.gn()}fa(){return So(this)}constructor(t){super(),this.Iz=[],this.kz=t=>{this.tt(t.Lt)},this.Cz=t=>{const i=t.Lt;this.Lz(i)||this.it(i)};for(const i of t)this.Dz(i)}};var cN,dN={forceSeekOffset:0,maximumOffset:0,maximumPlaybackRate:0,minimumOffset:0,minimumPlaybackRate:0,targetOffset:0},Ht=class{get va(){return null!=this.Xa||(this.Xa=function(t){return{get enabled(){return t.Rt},set enabled(i){t.Rt=Ws(i)},get monitoringLivePlayback(){return t.xz},get currentLatency(){return t.cA},get currentConfiguration(){return function(t){if(void 0!==t)return{get minimumOffset(){return t.minimumOffset},get maximumOffset(){return t.maximumOffset},get targetOffset(){return t.targetOffset},get forceSeekOffset(){return t.forceSeekOffset},get minimumPlaybackRate(){return t.minimumPlaybackRate},get maximumPlaybackRate(){return t.maximumPlaybackRate}}}(t.wd)}}}(this)),this.Xa}get Rt(){var t,i;return null!=(i=this.Le)?i:Boolean(null==(t=this.Oz)?void 0:t.Rt)}set Rt(t){this.Le=t,this.Oz&&(this.Oz.Rt=t)}get xz(){var t,i;return null!=(i=null==(t=this.Oz)?void 0:t.Ww)&&i}get cA(){var t;return null==(t=this.Oz)?void 0:t.uA}get wd(){return this.Oz?this.Oz.Hw:dN}ka(t){this.Oz=t,void 0!==this.Le&&(this.Oz.Rt=this.Le)}tr(){this.Oz=void 0,this.Le=!1}};function lN(){return cN||(cN=Or&&Or.document&&Or.document.createElement("video")),cN}var fN=!(!Or||!Or.TextTrack),_N=class extends Ys{get cA(){}get jz(){const t=this.sA.wf,i=this.Mf;return t.gr(i,.01)}get ht(){return this.lT}get wf(){return this.sA.wf.ks()}get vf(){return this.sA.vf}set vf(t){t&&this.sA.zz(t)}get bt(){return this.bc}get Mf(){return void 0!==this.Pz?this.Pz:this.sA.Mf}set Mf(t){this.xf&&(this.Pz=t),this.sA.Sm(t)}get ct(){return this.sA.ct}get If(){return this.sA.If}get lt(){return this.Bz}get bf(){return this.Rz}get kf(){}get xf(){return this.sA.xf}get jf(){return Tt({},{wT:0,AT:0,vT:0,mT:0,pT:0,yT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.sA.zf())}get Pf(){return this.sA.Pf}set Pf(t){this.sA.Pf=t}get Uf(){return!0}get Ff(){return this.sA.Ff}get Gf(){return this.sA.Gf}set Gf(t){this.sA.Gf=t}get Hf(){return this.sA.Uz.played}get Xf(){return this.Qz}set Xf(t){this.Qz=t,this.Fz&&(this.Fz.Xf=t)}get Jf(){return this.sA.Jf}get t_(){return this.sA.t_.ks()}get e_(){return this.sA.e_}get Yz(){return this.sA.Yz}get nt(){return this.Dl}get rt(){return this._T}get r_(){return this.sA.r_}get a_(){return this.sA.a_}get c_(){return this.sA.c_}set c_(t){this.sA.c_=t}get f_(){return this.Gz}get g_(){return this.sA.g_}set g_(t){this.sA.g_=t}get Vz(){return this.Wz}be(){this.sA.be()}ge(){this.sA.ge()}async ga(t,i,e){Bo(e),this.bc=t;const s={Rg:wi.Wx,Ug:t.src,qz:t.type,Xz:this.Zz(t),Xf:this.Qz,Kz:t.crossOrigin,Jz:i.metadata&&i.metadata.title};this.$z.mz(t.contentProtection),this.Fz=await this.sA.$n(s),Bo(e),i.textTracks&&this.tP(i.textTracks),ws(this.nt)}tP(t){for(let e of t)if(this.sA.iP()&&Vt.Ga&&fN&&!jv(e.kind,e.label)&&this.eP(e)){var i;const t=null!=(i=e.kind)?i:jo.Mm;this.sA.sP(e.src,t,e.label,e.srclang,e.default)}else{if(void 0===e.src)continue;this.nP.pS(e)}}eP(t){return!t.format||"webvtt"===t.format}async p_(){try{await this.sA.p_()}catch(t){}for(;!this.jz;)await this.sA.df(l.gw)}m_(){this.sA.m_()}M_(){return void 0!==this.sA.Uz.webkitShowPlaybackTargetPicker}T_(){this.sA.Uz.webkitShowPlaybackTargetPicker&&this.sA.Uz.webkitShowPlaybackTargetPicker()}N_(){this.sA.Uz.webkitShowPlaybackTargetPicker&&this.sA.Uz.webkitShowPlaybackTargetPicker()}A_(){return this.sA.Uz}w_(){return this.sA.ya}async tr(){this.bc=void 0,this.Bz=void 0,this.Rz=void 0,this.Fz=void 0,await this.nP.tr(),this.sA.rP(),await this.sA.tr(),this.hP.tr(),this.Xf=this.Qz,this.ht.tr(),this.rt.tr(),this.Pz=void 0}async gn(){await this.tr(),this.Vo(),this.oP(),this.aP(),this.hP.gn(),this.sA.uP=void 0,await this.dP.cP(this.sA),this.lT.gn(),this._T.gn(),this.Dl.gn(),await this.nP.gn()}lP(){this.sA.yn(l.jh,this.Ds),this.sA.yn(l.Sh,this.Ds),this.sA.yn(l.Sw,this.wc),this.sA.yn(l.gw,this.Ds),this.sA.yn(l.cw,this.Ds),this.sA.yn(l.yw,this.Ds),this.sA.yn(l.pw,this.fP),this.sA.yn(l.Jg,this.Ds),this.sA.yn(l.ww,this.Ds),this.sA.yn(l.Ew,this.Ds),this.sA.yn(l.Xg,this.Ds),this.sA.yn(l.mw,this._P),this.sA.yn(er.Rw,this.lA),this.sA.yn(hh.ha,this.gP),this.sA.yn(l.Wg,this.Ds),this.sA.yn(l.Vg,this.wP),this.sA.Uz.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.AP)}oP(){this.sA.fn(l.jh,this.Ds),this.sA.fn(l.Sh,this.Ds),this.sA.fn(l.Sw,this.wc),this.sA.fn(l.gw,this.Ds),this.sA.fn(l.cw,this.Ds),this.sA.fn(l.yw,this.Ds),this.sA.fn(l.pw,this.fP),this.sA.fn(l.Jg,this.Ds),this.sA.fn(l.ww,this.Ds),this.sA.fn(l.Ew,this.Ds),this.sA.fn(l.Xg,this.Ds),this.sA.fn(l.mw,this._P),this.sA.fn(er.Rw,this.lA),this.sA.fn(hh.ha,this.gP),this.sA.fn(l.Wg,this.Ds),this.sA.fn(l.Vg,this.wP),this.sA.Uz.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.AP)}Zz(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{ZA:As,vP:[{initDataTypes:[As.Eb],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}mP(){let t=this.sA.Uz.audioTracks,i=this.sA.Uz.videoTracks;t&&(t.addEventListener("addtrack",this.pP),t.addEventListener("removetrack",this.yP),t.addEventListener("change",this.MP)),i&&(i.addEventListener("addtrack",this.TP),i.addEventListener("removetrack",this.NP),i.addEventListener("change",this.DP))}aP(){let t=this.sA.Uz.audioTracks,i=this.sA.Uz.videoTracks;t&&(t.removeEventListener("addtrack",this.pP),t.removeEventListener("removetrack",this.yP),t.removeEventListener("change",this.MP)),i&&(i.removeEventListener("addtrack",this.TP),i.removeEventListener("removetrack",this.NP),i.removeEventListener("change",this.DP))}nh(t){for(let i=0;i<t.U;i++){t.cg(i).PT()}}D_(){this.sA.D_()}I_(){}IP(t,i){this.Bz||(this.Bz=i,this.Rz=t,this.Co(new Bi(t)))}constructor(t,i,e,s,n,r,h=new rN,o=sn()){super(),this.Fz=void 0,this.bc=void 0,this.Bz=void 0,this.Rz=void 0,this.Wz=new lu,this.Gz=new Ht,this.gP=t=>{const i=t.lt,e=i.code,s=new $i(Mw(e),"Something went wrong during native playback.",i),n=new Hu(e,s.message,i.message);this.IP(s,n)},this.wc=()=>{this.Co(new nc(this.Mf,this.vf))},this.fP=t=>{this.Ff||(this.Pz=void 0),this.Co(t)},this.lA=t=>{this.Pz=void 0},this.AP=()=>{this.Co(new zw(this.xf))},this._P=()=>{this.a_>0&&this.r_>0&&this.Co(new Vu)},this.pP=t=>{this.lT.tt(new xw(t.track))},this.yP=t=>{const i=AN(this.lT,t.track);i&&this.lT.it(i)},this.MP=()=>{this.nh(this.lT)},this.TP=t=>{this._T.tt(new jw(t.track))},this.NP=t=>{const i=AN(this._T,t.track);i&&this._T.it(i)},this.DP=()=>{this.nh(this._T)},this.wP=t=>{this.Co(t),this.IP(t.errorObject,De(t.errorObject))},this.dP=i,this.NS=e,this.YC=o,this.sA=this.dP.SP(pg.pm),this.Qz=this.sA.Uz.preload,this.hP=new OM(this.sA,!0),this.hP.yn(af,this.Ds),this.$z=new Cu(e,h),this.sA.uP=this.$z,this.lP(),this.lT=new yi,this._T=new yi,this.mP(),this.nP=new bu(this.sA,this.NS),this.Dl=new Ln([this.sA.nt]),this.ge()}};function gN(t){return!t.type||!(!lN().canPlayType||!lN().canPlayType(t.type))}var wN=class{JA(t,i,e,s,n,r,h){return new _N(t,i,e,s,n,r)}EP(t,i){return gN(t)}bP(){return!1}constructor(){this.LP=Mt.gz}};function AN(t,i){for(let e of t.og)if(e.jT===i)return e}var vN=class{static kP(){return this.Ib}CP(t){this.xP.push(t)}get LP(){return this.OP.LP}JA(t,i,e,s,n,r,h){let o=this.OP.JA(t,i,e,s,n,r,h);for(const t of this.xP)o=t(o,e,s);return o}EP(t,i){return this.OP.EP(t,i)}bP(){return!1}constructor(){this.OP=new wN,this.xP=[]}};function mN(t,i){return Xo(t.LP,i.LP)}vN.Ib=new vN;var pN=class{jP(t){this.zP.push(t),this.zP.sort(mN)}async PP(t,i){for(const e of this.zP){const s=e.EP(t,i);if(Sd(s)?await s:Boolean(s))return e}}constructor(){this.zP=[]}};function yN(t){MN.Ib.jP(t)}var MN=class extends pN{BP(t){this.RP=t}UP(){return this.RP}async QP(t,i){for(let e of t){let t=await this.PP(e,i);if(t)return{yc:e,t:t}}const e=this.RP;for(let s of t)if(e.EP(s,i))return{yc:s,t:e};return{yc:t[0],t:e}}constructor(...t){super(...t),this.RP=vN.kP()}};MN.Ib=new MN;var Qe,TN=class{gn(){sh(this.Us)}constructor(t){this.Us=Or&&Or.document&&Or.document.createElement("div"),yc(this.Us),t.appendChild(this.Us)}};!function(t){t.gz="",t.FP="none",t.Nm="metadata",t.iT="auto"}(Qe||(Qe={}));var NN=[hh.ha,l.Zg,l.Kg,l.xw,l.Qg,l.$g,l.ew,l.fw,l._w,l.Tw,l.Dw,er.Ow,er.jw,er.zw,er.Pw,er.H_,er.Bw,er.Rw,l.Vg,l.Wg,l.Xg,l.Jg,l.cw,l.dw,l.jh,l.gw,l.Sh,l.ww,l.mw,l.yw,l.pw,l.Sw,l.Ew,l.Aw,l.lw,l.Mw],DN=class extends Ys{get ht(){return this.lT}get wf(){return this.Qo.wf}get lt(){return this.Qo.lt}get bf(){return this.Qo.bf}get vf(){return this.Qo.vf}set vf(t){this.Qo.vf=t}get bt(){return this.YP}get Mf(){return this.Qo.Mf}set Mf(t){this.Qo.Mf=t}get ct(){return this.Qo.ct}get If(){return this.Qo.If}get kf(){return this.fT}get xf(){return this.Qo.xf}get jf(){return this.Qo.jf}get Pf(){return this.Qo.Pf}set Pf(t){this.Qo.Pf=t}get Uf(){return this.Qo.Uf}get Ff(){return this.Qo.Ff}get Gf(){return this.Qo.Gf}set Gf(t){this.Qo.Gf=t}get Hf(){return this.Qo.Hf}get Xf(){return this.Qz}set Xf(t){this.Qz=t,this.Qo&&(this.Qo.Xf=this.Qz)}get Jf(){return this.Qo.Jf}get t_(){return this.Qo.t_}get e_(){return this.Qo.e_}get nt(){return this.Dl}get r_(){return this.Qo.r_}get rt(){return this._T}get a_(){return this.Qo.a_}get c_(){return this.Qo.c_}set c_(t){this.Qo.c_=t}get f_(){return this.Qo.f_}get Vz(){return this.Qo.Vz}m_(){this.Qo.m_()}p_(){const t=this.Qo.p_();Sd(t)&&D(t)}y_(){return this.ga(void 0)}v_(){}GP(){this.lT.fg=this.Qo.ht,this._T.fg=this.Qo.rt,this.Dl.fg=this.Qo.nt,this.fT.fg=this.Qo.kf,this.Qo.yn(NN,this.Ds)}VP(){this.Qo.fn(NN,this.Ds),this.lT.fg=void 0,this._T.fg=void 0,this.Dl.fg=void 0,this.fT.fg=void 0}Wa(){return this.WP}async ga(t,i){if(Bo(i),this.WP=t,!t)return;const e=t.sources.filter(ow);if(bl(e))return;const s=await this.HP.QP(e,t);Bo(i);const n=s.yc,r=s.t,h=this.w_(),o=_w(this);(this.qP!==r||this.lt)&&(this.VP(),await this.Qo.gn(),Bo(i),this.qP=r,this.Qo=this.XP(r,n),function(t,i){t.Pf!==i.Pf&&(t.Pf=i.Pf);t.c_!==i.c_&&(t.c_=i.c_);t.Gf!==i.Gf&&(t.Gf=i.Gf)}(this.Qo,o),au(this,o,this),this.GP()),this.Qo.Xf=this.Xf,this.ZP?this.Qo.ge():this.Qo.be(),await this.Qo.ga(n,t,i),Bo(i),this.KP(n),this.w_()!==h&&this.Co(new mu)}KP(t){this.YP!==t&&(this.YP=t,this.Co(new T(t)))}M_(){return this.Qo.M_()}T_(){this.Qo.T_()}N_(){this.Qo.N_()}w_(){return this.Qo.w_()}D_(){this.Qo.D_()}I_(){this.Qo.I_()}async tr(){this.WP=void 0,this.KP(void 0),await this.Qo.tr()}async gn(){this.Vo(),await this.tr(),await this.Qo.gn(),this.lT.gn(),this._T.gn(),this.Dl.gn(),this.fT.gn()}ge(){this.ZP=!0,this.Qo.ge()}be(){this.ZP=!1,this.Qo.be()}constructor(t,i){super(),this.qP=void 0,this.YP=void 0,this.Qz=Qe.FP,this.WP=void 0,this.ZP=!0,this.lT=new zs,this._T=new zs,this.Dl=new tu,this.fT=new ua,this.HP=t,this.Qo=i,this.Qo.Xf=this.Xf,this.GP()}};function IN(t,i,e){return e?t<=i:t<i}var Tc,Ai=class t{get JP(){return this.$P.slice()}Cn(t){return this.$P[2*t]}jn(t){return this.$P[2*t+1]}tB(t){return this.iB[2*t]}eB(t){return this.iB[2*t+1]}ks(){const t=this;return{get length(){return t.U},start(i){const e=0|i;return t.sB(e),t.Cn(e)},end(i){const e=0|i;return t.sB(e),t.jn(e)}}}nB(){const i=new Array(2*this.U),e=new Array(2*this.U);for(let t=0;t<this.U;t++)i[2*t]=this.Cn(t),i[2*t+1]=this.jn(t),e[2*t]=!0,e[2*t+1]=!0;return new t(i,e)}sB(t){if(t<0)throw new g("The index provided ("+t+") must be non-negative");if(t>=this.U)throw new g("The index provided ("+t+") is greater than the maximum bound ("+this.U+")")}rB(t){if(0===this.U)return 0;if(this.gr(t))return t;if(t<=this.Cn(0))return this.Cn(0);if(t>=this.jn(this.U-1))return this.jn(this.U-1);{let i=0,e=1/0;for(let s=0;s<this.U;s++){const n=this.Cn(s),r=_.abs(n-t);r<e&&(i=n,e=r);const h=this.jn(s),o=_.abs(h-t);o<e&&(i=h,e=o)}return i}}Sn(i){let e=0,s=0;const n=[],r=[];for(;e<this.U&&s<i.U;){const t=this.Cn(e),h=this.jn(e),o=this.tB(e),a=this.eB(e),u=i.Cn(s),c=i.jn(s),d=i.tB(s),l=i.eB(s),f=_.max(t,u),g=_.min(h,c);let w,A;w=t===u?o&&d:f===t?o:d,A=h===c?a&&l:g===h?a:l,(f<g||w&&A&&f===g)&&(n.push(f,g),r.push(w,A)),h===c?(e+=1,s+=1):h<c?e+=1:s+=1}return new t(n,r)}hB(){const i=this.oB(),e=i.U;if(0===e)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=i.Cn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!i.tB(0)));for(let t=0;t<e-1;t++)s.push(i.jn(t),i.Cn(t+1)),n.push(!i.eB(t),!i.tB(t+1));const h=i.jn(e-1);return h!==1/0&&(s.push(h,1/0),n.push(!i.eB(e-1),!1)),new t(s,n)}aB(i){let e=0,s=0;const n=this.U,r=i.U,h=new Array(2*(n+r)),o=new Array(2*(n+r));let a=0;for(;e<n&&s<r;){const t=this.Cn(e),n=this.jn(e),r=i.Cn(s),u=i.jn(s);t<r||t===r&&n<u?(h[a]=t,h[a+1]=n,o[a]=this.tB(e),o[a+1]=this.eB(e),e++):(h[a]=r,h[a+1]=u,o[a]=i.tB(s),o[a+1]=i.eB(s),s++),a+=2}for(;e<n;)h[a]=this.Cn(e),h[a+1]=this.jn(e),o[a]=this.tB(e),o[a+1]=this.eB(e),e++,a+=2;for(;s<r;)h[a]=i.Cn(s),h[a+1]=i.jn(s),o[a]=i.tB(s),o[a+1]=i.eB(s),s++,a+=2;return new t(h,o)}uB(i){void 0===i&&(i=0);const e=this.U;if(e<2)return this;const s=[],n=[];let r=this.Cn(0),h=this.jn(0),o=this.tB(0),a=this.eB(0);for(let t=1;t<e;t++){const e=this.Cn(t),u=this.jn(t);let c=this.tB(t),d=this.eB(t);r<e&&h>u||(r===e&&(c=o||c,o=c),h===u&&(d=a||d,a=d),IN(e,h+i,a||c)?(h=u,a=d):(s.push(r,h),n.push(o,a),r=e,h=u,o=c,a=d))}return s.push(r,h),n.push(o,a),new t(s,n).oB()}oB(){const i=[],e=[];for(let t=0;t<this.U;t++){const s=this.Cn(t),n=this.jn(t),r=this.tB(t),h=this.eB(t);s===n?(r||h)&&(i.push(s,n),e.push(!0,!0)):(i.push(s,n),e.push(r,h))}return new t(i,e)}cB(t){if(0===this.U)return t;if(0===t.U)return this;return this.aB(t).uB()}dB(t){const i=this.oB(),e=t.oB(),s=i.hB(),n=e.hB(),r=s.Sn(e),h=n.Sn(i);return r.cB(h)}Im(i){if(0===this.U||0===i)return this;const e=[],s=[];for(let t=0;t<this.U;t++){const n=this.Cn(t)+i,r=this.jn(t)+i;e.push(n,r),s.push(this.tB(t),this.eB(t))}return new t(e,s)}lB(t){return 0===this.U||0===t.U?this:this.oB().Sn(t.oB().hB())}gr(t,i){return this.fB(t,i)>=0}_B(t,i,e,s,n){return this.gB(t,i,e,s,n)>=0}wB(t,i,e,s,n){return this.AB(t,i,e,s,n)>=0}vB(t){if(t.U!==this.U)return!1;for(let i=0;i<this.U;i++)if(this.Cn(i)!==t.Cn(i)||this.jn(i)!==t.jn(i)||this.tB(i)!==t.tB(i)||this.eB(i)!==t.eB(i))return!1;return!0}mB(i){const e=[],s=[];for(let t=0;t<this.U;t++){const n=this.Cn(t),r=this.jn(t),h=this.tB(t),o=this.eB(t);i(n,r,h,o)&&(e.push(n,r),s.push(h,o))}return new t(e,s)}AB(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,h=i+n;for(let t=0;t<this.U;t+=1)if(IN(this.Cn(t),h,!s||this.tB(t))&&IN(r,this.jn(t),!e||this.eB(t)))return t;return-1}gB(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,h=i-n;for(let t=0;t<this.U;t+=1)if(IN(this.Cn(t),r,!e||this.tB(t))&&IN(h,this.jn(t),!s||this.eB(t)))return t;return-1}fB(t,i){return this.gB(t,t,!0,!0,i)}pB(t,i){void 0===i&&(i=0);const e=t+i;for(let t=this.U-1;t>=0;t-=1)if(IN(this.Cn(t),e,this.tB(t)))return t;return-1}yB(t,i){void 0===i&&(i=0);const e=t-i;for(let t=0;t<this.U;t+=1)if(IN(e,this.jn(t),this.eB(t)))return t;return-1}MB(t,i){void 0===i&&(i=0);const e=t+i;for(let t=0;t<this.U;t+=1)if(this.Cn(t)>e)return t;return-1}TB(i){return this.sB(i),new t([this.Cn(i),this.jn(i)],[this.tB(i),this.eB(i)])}dA(t,i){const e=this.fB(t,i);return e<0?void 0:this.TB(e)}get NB(){let t=0;for(let i=0;i<this.U;i++){t+=this.jn(i)-this.Cn(i)}return t}static xn(i){const e=[];for(let t=0;t<i.length;t++)e.push(i.start(t),i.end(t));return new t(e)}static DB(i){return new t([i,i],[!0,!0])}static IB(i,e){return i<=e?new t([i,e]):t.SB()}static SB(){return SN}constructor(t,i){this.U=t.length>>1,this.$P=t,this.iB=i||function(t){const i=new Array(2*t);for(let e=0,s=0;e<t;e+=1,s+=2)i[s]=!0,i[s+1]=!1;return i}(this.U)}},SN=new Ai([]);!function(t){t.ra="fullscreenchange",t.ca="fullscreensupportchange",t.ha="fullscreenerror"}(Tc||(Tc={}));var Yn=class extends wn{constructor(){super(Tc.ha)}},Wu=(Tc.ra,Tc.ca,Tc.ha,class extends Pl{get cs(){return!1}get ta(){return!1}mo(){this.Co(new Yn)}So(){}gn(){this.Vo()}}),EN=class extends Pl{get vf(){}set vf(t){}get bt(){}get Mf(){return this.EB}set Mf(t){this.EB!==t&&(this.EB=t,this.bB=!0,this.Co(new Oe(this.Mf)))}get jf(){return{wT:0,AT:0,vT:0,mT:0,pT:0,yT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get Pf(){return this.LB}set Pf(t){this.LB!==t&&(this.LB=t,this.Co(new lo(this.Mf,this.c_)))}get Ff(){return this.kB}get Gf(){return this.CB}set Gf(t){this.CB!==t&&(this.CB=t,this.Co(new Oi(this.Mf,this.Gf)))}get e_(){return this.bB}get c_(){return this.ck}set c_(t){this.ck!==t&&(this.ck=t,this.Co(new lo(this.Mf,this.c_)))}get g_(){return!1}set g_(t){}get Vz(){return this.Wz}get cA(){}ge(){}be(){}p_(){this.kB&&(this.kB=!1,this.Co(new Ps(this.Mf)),this.Co(new Yu(this.Mf)))}m_(){this.kB||(this.kB=!0,this.Co(new nc(this.Mf,this.vf)),this.Co(new ye(this.Mf)))}ga(t,i){return Promise.resolve()}M_(){return!1}T_(){}N_(){}w_(){return this.xB}D_(){}I_(){}async tr(){this.EB=0,this.bB=!1,this.m_(),this.Co(new uw(this.EB))}async gn(){this.Vo(),this.ht.gn(),this.nt.gn(),this.rt.gn()}constructor(...t){super(...t),this.EB=0,this.LB=!1,this.kB=!0,this.CB=1,this.bB=!1,this.ck=1,this.ht=new yi,this.wf=Ai.SB().ks(),this.ct=NaN,this.If=!1,this.lt=void 0,this.bf=void 0,this.kf=void 0,this.xf=!1,this.Uf=!0,this.Hf=Ai.SB().ks(),this.Xf=Qe.FP,this.Jf=ae.aT,this.t_=Ai.SB().ks(),this.Yz=void 0,this.nt=new We,this.r_=0,this.rt=new yi,this.a_=0,this.f_=new Ht,this.Wz=new lu,this.xB=new Wu}},bN=class extends EN{set OB(t){this.dP=t,this.sA=t.SP(pg.pm)}A_(){var t;return null==(t=this.sA)?void 0:t.Uz}async gn(){await super.gn(),this.sA&&(await this.dP.cP(this.sA),this.sA=void 0)}constructor(...t){super(...t),this.dP=void 0,this.sA=void 0}},LN=class extends DN{get we(){return this.pu}get g_(){return this.Qo.g_}set g_(t){this.Qo.g_=t}v_(){super.v_(),this.zB.jB()}ur(t){gw(this,t)}ar(){}S_(t){return!1}async ga(t,i){const e=this.w_(),s=this.A_();await super.ga(t,i),this.w_()!==e&&this.Co(new mu),this.A_()!==s&&this.Co(new ft)}XP(t,i){return t.JA(this.pu,this.zB,this.NS,this.lx,this.PB,this.BB,this.RB,i)}A_(){return this.Qo.A_()}gf(){return this.zB.UB.map((t=>t.Uz))}async gn(){await super.gn(),this.zB.gn(),this.QB.gn()}constructor(t,i,e,s,n,r,h){const o=new bN;super(MN.Ib,o),this.pu=t,this.lx=i,this.NS=e,this.PB=s,this.BB=n,this.RB=h,this.zB=new rm(r,this.RB),this.zB.FB(this.pu),o.OB=this.zB,this.QB=new TN(this.pu)}},kN=class extends Ys{get ht(){return this.YB}get wf(){return Ai.SB().ks()}get vf(){return new Date(NaN)}set vf(t){}get bt(){}get Mf(){return 0}set Mf(t){}get ct(){return 0}get we(){return this.pu}get If(){return!0}get lt(){return this.GB}get bf(){return this.VB}get kf(){}get jf(){return{wT:0,AT:0,vT:0,mT:0,pT:0,yT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get Pf(){return!1}set Pf(t){}get Uf(){return!0}get Ff(){return!0}get Gf(){return 0}set Gf(t){}get Hf(){return Ai.SB().ks()}get Xf(){return Qe.FP}set Xf(t){}get Jf(){return ae.aT}get t_(){return Ai.SB().ks()}get e_(){return!1}get nt(){return this.WB}get r_(){return 0}get rt(){return this.YB}get a_(){return 0}get c_(){return 1}set c_(t){}get f_(){return this.Gz}get g_(){return!1}set g_(t){}S_(t){return!0}be(){}p_(){throw this.Co(new Bi(this.VB)),this.GB}m_(){}Wa(){}async ga(t,i){throw Bo(i),this.Co(new Bi(this.VB)),this.GB}ge(){}y_(){return Promise.resolve()}A_(){}w_(){return this.xB}gf(){return[]}v_(){}ur(t){}ar(){}get xf(){return!1}M_(){return!1}T_(){}N_(){}D_(){}I_(){}tr(){return Promise.resolve()}gn(){return this.Vo(),this.YB.gn(),this.WB.gn(),Promise.resolve()}constructor(t,i,e){super(),this.xB=new Wu,this.Gz=new Ht,this.pu=t,this.GB=i,this.YB=new yi,this.WB=new We,this.VB=e}};function CN(t){if(t&&Ut(t))return Tt({},t,{integration:xN(t.integration),fairplay:RN(t.fairplay),widevine:ON(t.widevine),playready:jN(t.playready),clearkey:UN(t.clearkey),aes128:QN(t.aes128),integrationParameters:FN(t.integrationParameters),preferredKeySystems:YN(t.preferredKeySystems)})}function xN(t){if(Qs(t))return t}function ON(t){if(t&&Ut(t))return{persistentState:zN(t.persistentState),distinctiveIdentifier:zN(t.distinctiveIdentifier),audioRobustness:PN(t.audioRobustness),videoRobustness:PN(t.videoRobustness),licenseAcquisitionURL:Qs(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:BN(t.licenseType),headers:t.headers,useCredentials:!!Id(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:Qs(t.certificate)||cg(t.certificate)?t.certificate:void 0}}function jN(t){if(!t)return;const i=ON(t);if(!i)return;return Tt({},i,{customData:Qs(t.customData)?t.customData:void 0})}function zN(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function PN(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function BN(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function RN(t){if(!t)return;const i=ON(t);if(!i)return;return Tt({},i,{certificateURL:Qs(t.certificateURL)?t.certificateURL:void 0})}function UN(t){if(!t)return;const i=ON(t);if(!i)return;const e=Gt(t.keys)?t.keys.map((t=>function(t){if(!t||!Ut(t))return;const i=t.id,e=t.value;if(!Qs(i)||!Qs(e))return;return{id:i,value:e}}(t))).filter(Yt):void 0;return Tt({},i,{keys:e})}function QN(t){if(Ut(t))return{useCredentials:Id(t.useCredentials)?t.useCredentials:void 0}}function FN(t){if(Ut(t))return t}function YN(t){return t&&Gt(t)?t.map((t=>Hc(t))).filter(Yt):[et,qi,ka]}var GN=class extends wn{constructor(t){super("presentationmodechange"),this.presentationMode=t}};function ci(t,i,e){return new Promise(((s,n)=>{if(e&&e.Bd)return n(new pe);const r=t=>{o(),s(t)},h=()=>{o(),n(new pe)},o=()=>{t.removeEventListener(i,r),e&&e.Gd(h)};t.addEventListener(i,r),e&&e.Yd(h)}))}var VN,WN=class extends Pl{Qa(t){for(const i of this.HB)t.yn(i,this.qB);this.XB.push(t)}ZB(t){for(const i of this.HB)t.fn(i,this.qB);this.XB.push(t)}gn(){this.Vo();for(const t of this.XB)this.ZB(t);No(this.XB)}constructor(t,i=!1,e){super(e),this.XB=[],this.KB=t=>{ac((()=>{this.Ds(t)}))},this.HB=t,this.qB=i?this.KB:this.Ds}},Rh=class extends Ys{Qa(t){t.sf(this.JB),this.XB.push(t)}ZB(t){t.cf(this.JB),To(this.XB,t)}gn(){this.Vo();for(const t of this.XB)t.cf(this.JB);No(this.XB)}constructor(t,i=!1){super(t),this.XB=[],this.KB=t=>{ac((()=>{this.Ds(t)}))},this.JB=i?this.KB:this.Ds}};!function(t){t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture"}(VN||(VN={}));var ya,HN=class extends Ys{get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return function(t){let i,e={get currentMode(){return t.qo()},requestMode(i){const e=XN(i);e&&t.Zo(e)},supportsMode(i){const e=XN(i);return!!e&&t.Go(e)},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Rh(e,!0),i.Qa(t),e}(this)}Zo(t){this.Xo(t,t)}Xo(t,i){this.$B!==i&&(this.tR=!0,this.iR=t,this.Jo(i,this.$B),"fullscreen"!==t&&(this.eR=t),this.tR=!1,this.Yr())}qo(){return this.sR?"fullscreen":"inline"}Go(t){switch(t){case"fullscreen":return this.xB.ta;case"inline":return!0}return!1}Yr(){if(this.tR)return;const t=this.$B,i=this.qo();this.$B=i,"fullscreen"!==i&&(this.nR=i),t!==i&&this.Co(new GN(i))}Jo(t,i){const e="fullscreen"===t;this.sR=e,e!==this.xB.cs&&(e?this.xB.mo():this.xB.So())}wi(){if(this.tR)return;const t=this.xB.cs;this.sR=t,t?this.Xo("fullscreen","fullscreen"):t||"fullscreen"!==this.iR?this.Yr():this.Xo(this.eR,this.nR)}rR(){this.wi(),this.Co(new Bi(new $i(Ui.FULLSCREEN_ERROR,"Failed to enter fullscreen.")))}gn(){this.xB.gn(),this.Vo()}constructor(t){super(),this.iR="inline",this.$B="inline",this.tR=!1,this.sR=!1,this.eR="inline",this.nR="inline",this.Xa=void 0,this.hR=()=>this.wi(),this.oR=()=>this.rR(),this.xB=t,this.xB.yn(Tc.ra,this.hR),this.xB.yn(Tc.ha,this.oR),this.Yr()}},qN={bt:void 0,Mf:0,ct:NaN,If:!1,lt:void 0,bf:void 0,Pf:!1,Ff:!0,Gf:1,Jf:ae.aT,e_:!1,r_:0,a_:0,c_:1};function XN(t){switch(t){case VN.INLINE:case VN.FULLSCREEN:case VN.PICTURE_IN_PICTURE:return t;default:return}}!function(t){t.DEFAULT="",t.THEO="theo",t.CSAI="csai",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor",t.THEOADS="theoads"}(ya||(ya={}));var cc,Ih,Ks,ZN,KN,Ds=class{get aR(){return this.uR}cR(t){const i=this.uR.filter((i=>i.dR(t)));if(i.length>1)0;else if(0===i.length)throw g("Unknown ad integration: "+t.integration);return i[0]||null}lR(t){this.uR.push(t)}constructor(){this.uR=[]}};Ds.Ib=new Ds,function(t){t.Rw="PLAYING",t.Qw="PAUSED",t.fR="SEEK",t._R="STALLED",t.gR="FAILED",t.wR="INITIAL_BUFFERING",t.AR="NO_ACCESS"}(cc||(cc={})),function(t){t.vR="HTTP_REQUEST_STATUS_CODE_1XX",t.mR="HTTP_REQUEST_STATUS_CODE_2XX",t.pR="HTTP_REQUEST_STATUS_CODE_3XX",t.yR="HTTP_REQUEST_STATUS_CODE_4XX",t.MR="HTTP_REQUEST_STATUS_CODE_5XX",t.NR="BUFFER_LENGTH",t.DR="BYTES_RECEIVED",t.IR="SEGMENT_READ_BITRATE",t.SR="SEGMENT_PROFILE_BITRATE",t.ER="VIDEO_PROFILE_BITRATE",t.bR="NUMBER_OF_FRAMES_DROPPED",t.LR="PLAYBACK_POSITION",t.kR="NUMBER_OF_FRAMES_DECODED",t.xR="PLAYBACK_DELTA_TO_ORIGIN",t.OR="STREAM_DELTA_TO_ORIGIN",t.jR="ORIGIN_TIMESTAMP"}(Ih||(Ih={})),function(t){t.zR="MANIFEST_URI",t.PR="ASSET_DURATION",t.RR="NUMBER_OF_CONTENT_PROFILES",t.UR="CDN",t.QR="CONTENT_TITLE",t.FR="SERVICE_NAME",t.YR="CONTENT_TYPE",t.GR="CONTENT_DESCRIPTION"}(Ks||(Ks={})),(ZN||(ZN={})).WR="shutdown_normal_shutdown",function(t){t.HR="session/",t.qR="content/",t.XR="internalError/",t.ZR="drmError/",t.KR="caError/",t.JR="networkError/"}(KN||(KN={}));var JN,$N=class{get code(){return this.category+this.statusCode}constructor(t,i){this.category=t,this.statusCode=i}};!function(t){t.$R="userAction",t.tU="endOfStreamReached"}(JN||(JN={}));var tD,iD=class extends Pl{};!function(t){t.PAUSE="iU",t.RESUME="eU"}(tD||(tD={}));var eD=class extends wn{constructor(){super("sU")}},Uu=class extends Pl{nU(){this.rU=!0}hU(){}gn(){this.rU=!1,this.oU.fn(tD.PAUSE,this.aU),this.oU.fn(tD.RESUME,this.uU)}cU(){return isFinite(this.Qo.Td())}constructor(t,i){super(),this.Qo=t,this.oU=i,this.rU=!1,this.aU=()=>{this.hU(),this.rU=!1},this.uU=()=>{this.rU=!0},this.oU.yn(tD.PAUSE,this.aU),this.oU.yn(tD.RESUME,this.uU)}},sD=class extends Uu{nU(){super.nU(),this.dU()}gn(){this.lU(),super.gn()}dU(){this.Qo.yn(er.Bw,this.fU),this.Qo.yn(l.Sh,this._U),this.Qo.yn(er.Rw,this.gU),this.Qo.yn(l.yw,this.wU),this.Qo.yn(l.pw,this.AU)}lU(){this.Qo.fn(er.Bw,this.fU),this.Qo.fn(l.Sh,this._U),this.Qo.fn(er.Rw,this.gU),this.Qo.fn(l.yw,this.wU),this.Qo.fn(l.pw,this.AU)}vU(){this.mU=!0}pU(){const t=this.Qo.Ef(),i=new $N(KN.XR,String(t.code));this.yU(cc.gR,i,t.message)}MU(t){this.rU&&(this.oU.TU(t),this.Co(new eD))}yU(t,i,e){this.oU.NU(t,i,e),this.Co(new eD)}DU(t,i){this.oU.IU(t,i)}constructor(...t){super(...t),this.mU=!1,this.SU=!1,this.EU=!1,this.fU=()=>{this.SU&&!this.EU&&this.MU(cc._R)},this.gU=()=>{this.Qo.Ff||(this.SU||this.DU(new $N(KN.qR,"firstFrameDisplayed"),"now"),this.SU=!0,this.MU(cc.Rw))},this._U=()=>{this.Qo.Ff&&(this.SU=!0,this.MU(cc.Qw))},this.wU=()=>{this.mU&&(this.EU=!0,this.mU=!1,this.MU(cc.fR))},this.AU=()=>{this.EU=!1,this.Qo.Ff&&this.MU(cc.Qw)}}},nD=class extends Uu{nU(){super.nU(),this.bU(),this.dU()}gn(){this.lU(),super.gn()}dU(){this.Qo.rt.yn(Ce.ra,this.bU),this.Qo.kU.LU(this.CU),this.Qo.yn(l.Xg,this.xU)}lU(){this.Qo.rt.fn(Ce.ra,this.bU),this.Qo.kU.OU(this.CU),this.Qo.fn(l.Xg,this.xU)}jU(t){t.serviceName&&this.zU(Ks.FR,t.serviceName),t.cdn&&this.zU(Ks.UR,t.cdn),t.contentTitle&&this.zU(Ks.QR,t.contentTitle),t.contentType&&this.zU(Ks.YR,t.contentType),t.contentDescription&&this.zU(Ks.GR,t.contentDescription)}zU(t,i){this.rU&&this.oU.PU(t,i)}constructor(...t){super(...t),this.xU=()=>{this.cU()&&this.zU(Ks.PR,_.round(this.Qo.Td()))},this.CU=t=>{"manifest"===t.request.type&&this.zU(Ks.zR,t.url)},this.bU=()=>{const t=Zt(this.Qo.rt.og,(t=>t.Rt));t&&this.zU(Ks.RR,t.Ng.U)}}},rD=class extends Uu{nU(){super.nU(),this.BU=this.Qo.jf.wT,this.RU=this.Qo.jf.vT,this.dU(),this.UU.push(v(this.QU,1e3))}hU(){super.hU(),this.FU()}gn(){this.FU(),this.lU(),this.UU.forEach(m),No(this.UU),super.gn()}dU(){this.Qo.kU.LU(this.YU),this.Qo.yn(l.Dw,this.GU)}lU(){this.Qo.kU.OU(this.YU),this.Qo.fn(l.Dw,this.GU)}VU(){this.FU()}WU(t){this.HU+=t,this.qU(Ih.DR,this.HU)}XU(t,i){const e=this.ZU.get(i)||0;this.qU(t,e)}KU(){const t=this.Qo.jf.wT-this.BU;this.qU(Ih.bR,t)}JU(){const t=this.Qo.jf.vT-this.RU;this.qU(Ih.kR,t)}$U(){const t=Vo.Ib.ez();this.qU(Ih.IR,fg(t))}tQ(t){this.qU(Ih.SR,fg(t)),this.qU(Ih.ER,fg(t))}FU(){if(!this.cU())return;const t=_.round(ir(this.Qo.Tf()));this.qU(Ih.LR,t)}iQ(){const t=Ai.xn(this.Qo.Af()),i=this.Qo.Tf(),e=t.dA(i),s=e?ir(e.jn(0)-i):0;this.qU(Ih.NR,s)}qU(t,i){this.rU&&this.oU.eQ(t,i)}constructor(...t){super(...t),this.ZU=cs(),this.HU=0,this.BU=0,this.RU=0,this.UU=[],this.QU=()=>{this.KU(),this.JU(),this.iQ()},this.GU=t=>{t.wS===pg.pm&&(this.WU(t.pT),this.$U(),this.tQ(t.sQ),this.FU())},this.YU=t=>{const i=t.status.toString()[0],e=this.ZU.get(i)||0;this.ZU.set(i,e+1),this.XU(Ih.vR,"1"),this.XU(Ih.mR,"2"),this.XU(Ih.pR,"3"),this.XU(Ih.yR,"4"),this.XU(Ih.MR,"5")}}},O=class{Vb(t){this.nQ.delete(t)}rQ(){this.nQ.clear()}Fb(t){return this.nQ.get(t)}Kj(t,i){this.nQ.set(t,i)}constructor(){this.nQ=cs()}},Qt=class t{static hQ(){return t.Ib||(t.Ib=hD.qC()?new hD:new O),t.Ib}static Vb(i){t.hQ().Vb(i)}static rQ(){t.hQ().rQ()}static Fb(i){return t.hQ().Fb(i)}static Kj(i,e){t.hQ().Kj(i,e)}};Qt.Ib=void 0;var Xr,hD=class extends Qt{static qC(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}Vb(t){self.sessionStorage.removeItem(t)}rQ(){self.sessionStorage.clear()}Fb(t){var i;return null!=(i=self.sessionStorage.getItem(t))?i:void 0}Kj(t,i){self.sessionStorage.setItem(t,i)}};function oD(t){return t&&t.integration===fD}function aD(t){if(!Qs(t.asset))throw new b("Agama source configuration: expected 'asset' to be a string");if(!function(t){return!!Qs(t)&&("live"===t||"vod"===t)}(t.streamType))throw new b("Agama source configuration: expected 'streamType' to be 'live' or 'vod'");if(void 0!==t.serviceName&&!function(t){return!!Qs(t)&&("live"===t||"svod"===t||"nvod"===t||"tvod"===t||"avod"===t||"catchuptv"===t)}(t.serviceName))throw new b("Agama source configuration: expected 'serviceName' to be 'live', 'svod', 'nvod','tvod', 'avod' or 'catchuptv'");if(void 0!==t.cdn&&!Qs(t.cdn))throw new b("Agama source configuration: expected 'cdn' to be a string");if(void 0!==t.contentTitle&&!Qs(t.contentTitle))throw new b("Agama source configuration: expected 'contentTitle' to be a string");if(void 0!==t.contentType&&!Qs(t.contentType))throw new b("Agama source configuration: expected 'contentType' to be a string");if(void 0!==t.contentDescription&&!Qs(t.contentDescription))throw new b("Agama source configuration: expected 'contentDescription' to be a string");return t}function uD(t){if(!Qs(t.config))throw new b("Agama player configuration: expected 'config' to be a string");if(void 0!==t.logLevel&&!function(t){return!!Qs(t)&&("info"===t||"debug"===t||"warning"===t||"error"===t||"fatal"===t)}(t.logLevel))throw new b("Agama player configuration: expected 'logLevel' to be 'info', 'debug', 'warning','error' or 'fatal'");if(void 0!==t.application&&!Qs(t.application))throw new b("Agama player configuration: expected 'application' to be a string");if(void 0!==t.applicationVersion&&!Qs(t.applicationVersion))throw new b("Agama player configuration: expected 'applicationVersion' to be a string");if(void 0!==t.userAccountID&&!Qs(t.userAccountID))throw new b("Agama player configuration: expected 'userAccountID' to be a string");if(void 0!==t.deviceID&&!Qs(t.deviceID))throw new b("Agama player configuration: expected 'deviceID' to be a string");return t}function cD(){let t="00000000-0000-0000-0000-000000000000",i=s.navigator,e=s.screen,n=""+i.mimeTypes.length;n+=i.userAgent.replace(/\D+/g,""),n+=i.plugins.length,n+=e.height||"",n+=e.width||"",n+=e.pixelDepth||"",n+=_.floor(1e3*_.random());let r=function(t){let i,e,s=0;if(0===t.length)return"0";for(i=0;i<t.length;i++)e=t.charCodeAt(i),s=(s<<5)-s+e,s|=0;return _.abs(s).toString().substring(0,12)}(n);return t=[t.slice(0,t.length-r.length),r].join(""),t}function dD(t,i,e){const s=i,n=function(t,i){return Fa(i)?t.DsProtocol.APPLE_HLS:t.DsProtocol.MPEG_DASH}(t,s.type),r=function(t,i){let e=t.DsPlaylistType.VOD;"live"===i&&(e=t.DsPlaylistType.LIVE);return e}(t,e.streamType);return{asset:e.asset,playlistType:r,protocol:n,uri:s.src}}!function(t){t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected"}(Xr||(Xr={}));var Ca,lc,Ba,lD=class{oQ(){this.Qo.fn(hh.ha,this.aQ),this.uQ(),this.cQ(),this.oU.dQ()}lQ(){this.Qo.fQ.va.chromecast&&this.Qo.fQ.va.chromecast.addEventListener("statechange",this._Q)}cQ(){this.Qo.fQ.va.chromecast&&this.Qo.fQ.va.chromecast.removeEventListener("statechange",this._Q)}gQ(){return void 0!==this.Qo.fQ.va.chromecast&&this.Qo.fQ.va.chromecast.state===Xr.CONNECTED}gn(){this.Qo.fn(l.lo,this.do),this.Qo.fn(l.jh,this.wQ),this.Qo.fn(l.Jg,this.AQ),this.oQ(),this.oU.gn()}vQ(){this.mQ||(this.mQ=new sD(this.Qo,this.oU)),this.pQ||(this.pQ=new rD(this.Qo,this.oU)),this.yQ||(this.yQ=new nD(this.Qo,this.oU))}nU(){this.mQ&&(this.mQ.nU(),this.mQ.yn("sU",this.MQ)),this.pQ&&this.pQ.nU(),this.yQ&&this.yQ.nU()}uQ(){this.mQ&&(this.mQ.fn("sU",this.MQ),this.mQ.gn(),this.mQ=void 0),this.pQ&&(this.pQ.gn(),this.pQ=void 0),this.yQ&&(this.yQ.gn(),this.yQ=void 0)}jU(t){this.yQ&&this.yQ.jU(t)}TQ(){this.mQ&&this.mQ.pU()}vU(){this.mQ&&this.mQ.vU()}constructor(t,i,e){this.Qo=t,this.oU=i,this.do=()=>{this.NQ(),this.AQ()},this.NQ=()=>{const t=this.Qo.Wa(),i=t&&t.analytics;this.DQ=function(t){void 0===t&&(t=[]);for(let i of t)if(oD(i))return aD(i)}(i)},this.AQ=()=>{this.oQ(),this.Qo.fn(l.jh,this.wQ),!this.gQ()&&this.oU.IQ()&&this.Qo.bt&&this.DQ&&(this.vQ(),this.Qo.Ff||this.Qo.If?this.Qo.yn(l.jh,this.wQ):this.wQ())},this.wQ=()=>{this.Qo.bt&&this.DQ&&(this.oU.SQ(this.Qo.bt,this.DQ),this.nU(),this.jU(this.DQ),this.lQ(),this.Qo.yn(hh.ha,this.aQ),this.Qo.fn(l.jh,this.wQ))},this._Q=()=>{this.gQ()&&this.oQ()},this.aQ=()=>{this.TQ(),this.oQ()},this.MQ=()=>{this.pQ&&this.pQ.VU()};const s=function(t){void 0===t&&(t=[]);for(const i of t)if(oD(i))return uD(i)}(e.analytics);s&&this.oU.EQ()&&(this.oU.v_(s),this.oU.IQ()?(this.oU.bQ(),this.Qo.yn(l.lo,this.do),this.Qo.yn(l.Jg,this.AQ)):console.warn("An error occurred while initializing an Agama EMP client. Please check your configuration"))}},fD="agama";function _D(t){switch(t){case"":return Ca.NONE;case"horizontal":return Ca.HORIZONTAL;case"vertical":return Ca.VERTICAL;default:throw new b}}function gD(t,i){if(i)return lc.PM360;if(null==t)return lc.NONE;switch(t){case"":return lc.NONE;case"360":return lc.PM360;case"180":return lc.PM180;default:throw new b("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}!function(t){t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(Ca||(Ca={})),function(t){t.NONE="",t.PM360="360",t.PM180="180"}(lc||(lc={})),function(t){t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event"}(Ba||(Ba={}));var wD="https://content.uplynk.com";function Xs(t){if(!t)return!0;const i=!function(t){return Ra(t)||mi(t)&&Ra(t[0])}(t.sources)||bl(t.sources),e=!t.ads||AD(t.ads),s=""!==t.poster&&!t.poster;return i&&e&&s}function AD(t){return!t||Gt(t)&&0===t.length}function vD(t){if(t&&t.sources)return mD(t.sources)}function mD(t){return Qs(t)?Xg(t):tr(t)?t.type||t.src&&Xg(t.src):mi(t)&&t.length>0?mD(t[0]):void 0}function pD(t){if(t&&t.sources)return yD(t.sources)}function yD(t){return Qs(t)?t:tr(t)?t.src:mi(t)&&t.length>0?yD(t[0]):void 0}function MD(t,i,e){return Jg(t)?function(t,i,e){let s=Tt({},sw(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:es.VERIZON_MEDIA,id:"",prefix:wD,preplayParameters:{},playbackUrlParameters:{},assetType:Ba.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(Qs(t))return t;if(mi(t)&&Qs(t[0]))return t;if(function(t){return Ut(t)&&Qs(t.userId)&&(mi(t.externalId)||Qs(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return Ba.CHANNEL;case"event":return Ba.EVENT;default:return Ba.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=Ws(t.contentProtected));t.assetInfo?s.assetInfo=Ws(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=Va(t.prefix)||wD);return s.ping=function(t,i){let e=!1,s=!1,n=!1;i?(e=!!Id(i.adImpressions)&&i.adImpressions,s=!!Id(i.freeWheelVideoViews)&&i.freeWheelVideoViews,n=Id(i.linearAdData)?i.linearAdData:t!==Ba.ASSET):t!==Ba.ASSET&&(n=!0);return{adImpressions:e,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=ND(s,t),s=ID(s,i,e),s=DD(s,t,e),s}(t,i,e):tw(t)?function(t,i,e){var s;return Tt({},TD(t,i,e),{integration:es.MEDIATAILOR,adParams:null!=(s=t.adParams)?s:{}})}(t,i,e):$g(t)?function(t,i,e){return Tt({},TD(t,i,e),{integration:es.THEOLIVE})}(t,i,e):TD(t,i,e)}function TD(t,i,e){let s=nw();const n=i&&(i.contentProtection||i.drm);if(Qs(t)){if(s.src=t,s.type=Xg(t),n){const t=CN(n);s.contentProtection=jg(t)}}else if(tr(t)||Ia(t)){s.src=t.src,s.type=t.type||Xg(t.src),s.isAdvertisement=t.isAdvertisement;const i=ew(t)?t.hesp:void 0;void 0!==i&&(s.hesp=i);tw(t)&&(s.integration=t.integration);const e=CN(t.contentProtection||t.drm||n);s.contentProtection=jg(e),t.ssai&&(s.ssai=Bf(t.ssai)),s=ND(s,t)}return s=ID(s,i,e),s=DD(s,t,e),s}function ND(t,i){var e,s;i.useCredentials?t.crossOrigin=Kr.LA:i.crossOrigin&&(t.crossOrigin=Zg(i.crossOrigin)),Qs(i.timeServer)&&(t.timeServer=i.timeServer),i.liveOffset&&(t.liveOffset=i.liveOffset),i.hlsDateRange&&(t.hlsDateRange=i.hlsDateRange),i.lowLatency&&(t.lowLatency=Ws(i.lowLatency)),i.useNativePlayback&&(t.useNativePlayback=Ws(i.useNativePlayback)),i.useManagedMediaSource&&(t.useManagedMediaSource=Ws(i.useManagedMediaSource)),i.dash&&(t.dash=zg(i.dash)),i.hls&&(t.hls=Pg(i.hls)),i.lcevc&&(t.lcevc=Ws(i.lcevc)),i.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=aw(i.ignoreEmbeddedTextTrackTypes)),i.latencyConfiguration&&(t.latencyConfiguration=Wg(i.latencyConfiguration)),t.seamlessSwitchStrategy=Hg(null!=(s=i.seamlessSwitchStrategy)?s:null==(e=i.dash)?void 0:e.useSeamlessPeriodSwitch);const n=uu(i.experimentalRendering);void 0!==n&&(t.experimentalRendering=n);const r=uu(i.nativeUiRendering);return void 0!==r&&(t.nativeUiRendering=r),t}function DD(t,i,e){return t.abr=Rg(Qs(i)?void 0:Tl(i.abr),null==e?void 0:e.abr),t}function ID(t,i,e){var s;const n=i&&i.timeServer;return e&&e.liveOffset&&!Yt(t.liveOffset)&&(t.liveOffset=e.liveOffset),e&&e.hlsDateRange&&!Yt(t.hlsDateRange)&&(t.hlsDateRange=e.hlsDateRange),t.crossOrigin===Kr.EA&&(null==i||null==(s=i.vr)?void 0:s[360])&&(t.crossOrigin=Kr.bA),t.useCredentials=t.crossOrigin===Kr.LA,Qs(n)&&!t.timeServer&&(t.timeServer=n),t}function SD(t){const i={src:""};if(t&&t.src){if(i.src=Va(t.src),"default"in t&&(i.default=Ws(t.default)),i.kind=function(t){const i=String(t||"").toLowerCase();return Dv(i)?i:i?"metadata":"subtitles"}(t.kind),Ei(t.format)&&(i.format=t.format),"srclang"in t){const e=t.srclang;"string"==typeof e&&""!==e&&(i.srclang=e)}if("label"in t){const e=t.label;"string"==typeof e&&""!==e&&(i.label=e)}}return i}function ED(t,i){if(Ut(t))try{return i.cR(t).LQ(t)}catch(t){return}}function jh(t,i,e){if(void 0===e&&(e=Ds.Ib),Xs(t))return{sources:[nw()]};const s=ms(t);if(s.sources=function(t,i,e){if(Ra(t))return[MD(t,i,e)];if(mi(t)&&Ra(t[0])){const s=[];for(const n of t)s.push(MD(n,i,e));return s}return[nw()]}(s.sources,s,i),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,i){if(!mi(t))return[];const e=[];for(let s of t)s=ED(s,i),s&&e.push(s);return e}(s.ads,e);0===t.length?delete s.ads:s.ads=t}const n=!bl(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!mi(t))return[];const i=[];for(let e of t)e=SD(e),""!==e.src&&i.push(e);return i}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=Va(s.poster)),"streamType"in s&&(s.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(s.streamType)),"vr"in s&&(s.vr=function(t){const i=t||{};return i.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(i.stereoMode),{panoramaMode:gD(i.panoramaMode,Boolean(i[360])),stereoMode:i.stereoMode?_D(i.stereoMode):Ca.NONE,nativeVR:Boolean(i.nativeVR)}}(s.vr));if("analytics"in s||(null==i?void 0:i.analytics)){const t=hw(s.analytics),e=i&&i.analytics||[];s.analytics=function(t,i){const e=ms(t);for(const s of i){const i=!t.some((t=>t.integration===s.integration));i&&s.integration!==fD&&e.push(s)}return e}(t,e)}return"mutedAutoplay"in s&&(s.mutedAutoplay=lw(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=Na(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}var bD=!(Vt.zE&&!Vt.BE),Tu=self.console;function LD(t){if(Ut(t))try{return JSON.stringify(t)}catch(t){}return t}function kD(t){return t.map(LD).join(" ")}function CD(t){const i=Tu&&Tu[t];return i?i.bind&&bD?i.bind(Tu):function(){for(var i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];Tu[t](kD(e))}:void 0}var mt=CD("log")||El,is=CD("warn")||mt.bind(void 0,"WARNING:"),xD=CD("error")||mt.bind(void 0,"ERROR:"),OD=(()=>{const t=Tu&&Tu.assert;return t?t.bind&&bD?t.bind(Tu):function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];Tu.assert(t,kD(e))}:function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];t||xD("Assertion failed:",...e)}})();var jD=function(){function t(t){this.kQ=t}return t.prototype.CQ=function(t){var i,e,s,n,r,h,o,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.kQ.charAt(64);for(i=0;i<t.length;i+=4)e=(o=this.kQ.indexOf(t.charAt(i))<<18|this.kQ.indexOf(t.charAt(i+1))<<12|(r=this.kQ.indexOf(t.charAt(i+2)))<<6|(h=this.kQ.indexOf(t.charAt(i+3))))>>>16&255,s=o>>>8&255,n=255&o,a[i/4]=String.fromCharCode(e,s,n),64===h&&(a[i/4]=String.fromCharCode(e,s)),64===r&&(a[i/4]=String.fromCharCode(e));return a.join("")},t.prototype.xQ=function(t,i){var e,s,n,r,h,o,a,u=[],c="";if((o=t.length%3)>0)for(;o++<3;)c+=this.kQ.charAt(64),t+="\0";for(o=0;o<t.length;o+=3)s=(e=t.charCodeAt(o)<<16|t.charCodeAt(o+1)<<8|t.charCodeAt(o+2))>>18&63,n=e>>12&63,r=e>>6&63,h=63&e,u[o/3]=this.kQ.charAt(s)+this.kQ.charAt(n)+this.kQ.charAt(r)+this.kQ.charAt(h);return a=(a=u.join("")).slice(0,a.length-c.length),i||(a+=c),a},t.lh=new t(function(){var t,i,e,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(i=r[t],e=0;e<i.length;e+=1)s=i.charAt(e),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.OQ=new t(function(t){return t.CQ("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.lh)),t}();function Jn(t){return"string"==typeof t}function zD(t){return"number"==typeof t}var PD={}.toString;var Et,BD=Array.isArray||function(t){return"[object Array]"===PD.call(t)};function sr(t,i){return BD(t)&&t.every(i)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb",t.KEPLER="kepler"}(Et||(Et={}));var tt,RD=w.keys(Et).map((function(t){return Et[t]}));function UD(t){return-1!==RD.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview",t.THEOADS="theoads"}(tt||(tt={}));var QD,FD=w.keys(tt).map((function(t){return tt[t]}));function YD(t){return-1!==FD.indexOf(t)}function GD(t){try{var i=jD.OQ.CQ(t),e=JSON.parse(i);if(!function(t,i){var e,s=function(t){return"object"==typeof t&&null!==t}(t),n=Jn(t.key),r=Jn(t.customer_id),h=zD(t.generation_date),o=zD(t.expiration_date),a=sr(t.domains_page,Jn),u=sr(t.domains_source,Jn),c=sr(t.sdks,i?UD:Jn),d=function(t){return"boolean"==typeof t}(t.send_impression);t.features?e=sr(t.features,i?YD:Jn):(e=!0,t.features=[]);if(!(s&&n&&r&&h&&o&&a&&u&&c&&d&&e))return!1;return!0}(e,!1))throw new g("The provided license could not be decoded correctly.");return e}catch(t){throw new g("The provided license could not be decoded correctly.")}}function VD(){return QD||(QD={zu:om.href,jQ:Or.parent&&Or.parent!==s,zQ:HD()}),QD}var ne,WD=["http:","https:","ftp:","ws:","wss:"];function HD(){var t;try{if(null==Or?void 0:Or.top)return Or.top.location.href}catch(t){}return null==Or||null==(t=Or.document)?void 0:t.referrer}!function(t){t[t.BQ=0]="BQ",t[t.RQ=1]="RQ",t[t.UQ=2]="UQ"}(ne||(ne={}));var qD,U=class{constructor(t,i,e,s,n=[],r="",h=Date.now(),o=[],a=!0){this.QQ=t,this.FQ=i,this.YQ=e,this.GQ=s,this.VQ=n,this.WQ=r,this.HQ=h,this.qQ=o,this.XQ=a}};!function(t){t.RQ="expired",t.ZQ="invaliddomain",t.KQ="invalidsource",t.JQ="invalidfeature",t.ha="error"}(qD||(qD={}));var XD=class t{$Q(t,i){let e=[];Ra(t.sources)?e=[t.sources]:mi(t.sources)&&(e=t.sources),this.tF(t,e,i),this.iF(e,i)}tF(t,i,e){if(Xs(t)||0===e.YQ.length||JD(e.YQ))return;if(!i.every((t=>this.eF(t,e)))){const t="invalidsource",i=hi.sF(t);throw new $i(ZD(t),i)}}iF(t,i){for(const e of t)tr(e)&&ew(e)&&!e.bypassLicense&&this.nF([tt.HESP],i)}rF(i){return this.hF(i.qQ)&&this.oF(i)?t.aF(i.GQ)?0:1:2}nF(t,i){for(const e of t)if(!qt(i.VQ,e)){const t="invalidfeature",i=hi.uF(t,e);throw new $i(ZD(t),i)}}hF(t){return 0===t.length||t.some((t=>this.cF(t)))}cF(t){return"web"===function(t){switch(t){case Et.ANDROID:return Ph.CS;case Et.ANDROIDTV:case Et.FIRETV:return Ph.xS;case Et.IOS:return Ph.OS;case Et.TVOS:return Ph.jS;case Et.CHROMECAST:case Et.CHROMECASTCAF:return Ph.zS;case Et.THEOLIVEWEB:return Ph.PS;default:return Ph.kS}}(t)}static aF(t){const i=Number(new Date);return!!t&&i<=t}oF(t){return!(this.dF&&0!==t.FQ.length&&!JD(t.FQ))||!!(this.dF&&this.lF(t.FQ)&&this.fF(t.FQ))}lF(t){return $D(this.BL.zu,t)}fF(t){if(!this.BL.jQ)return!0;if(this._F)return!0;const i=this.gF();return!!i&&$D(i,t)}gF(){if(!this.BL.jQ)return;const t=td.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.BL.zQ?this.BL.zQ:void 0}eF(i,e){return!!t.wF(i,e.YQ)}static wF(t,i){return $D(this.AF(t),i)}static AF(t){return Qs(t)?t:tr(t)&&t.src||""}constructor(t,i,e){this._F=t,this.vF=i,this.BL=e,this.dF=iI(this.BL)}};function ZD(t){switch(t){case"invaliddomain":return Ui.LICENSE_INVALID_DOMAIN;case"invalidsource":return Ui.LICENSE_INVALID_SOURCE;case"expired":return Ui.LICENSE_EXPIRED;case"invalidfeature":return Ui.LICENSE_INVALID_FEATURE;case"error":return Ui.LICENSE_ERROR}}function KD(t,i){let e=t,s=i;if(!e)return!1;if(s=s.trim(),"*"===s)return!0;if(e=e.replace(/\.+$/,""),s===e)return!0;const n="\\.",r="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",h="(\\*|"+r+")",o=new RegExp("ip-range\\("+h+n+h+n+h+n+h+"\\)"),a=s.match(o),u=t=>"*"===t?"("+r+")":t;if(null!==a&&5===a.length){const t=new RegExp("^"+a[1]+n+u(a[2])+n+u(a[3])+n+u(a[4])+"$");return null!==e.match(t)}return s="."+s,-1!==e.indexOf(s,e.length-s.length)}function JD(t){return t.some((t=>"*"===t))}function $D(t,e){const s=i.Dh(t);if(!tI(s))return!0;for(const i of e){if(KD(s.hostname,i))return!0;if(KD(xf(t),i))return!0}return!1}function tI(t){return-1!==WD.indexOf(t.protocol)}function iI(t){const e=i.Dh(t.zu);return tI(e)&&!function(t){return KD(t.hostname,"localhost")}(e)&&!function(t){return KD(t.hostname,"theoplayer.doubleclick.net")}(e)}var Ye,hi=class{static uF(t,i){return"The requested feature '"+i+"' is not available with the license for this player."}static sF(t){return"invaliddomain"===t?this.mF:"invalidsource"===t?this.pF:"expired"===t?this.yF:"invalidfeature"===t?this.MF:this.TF}};function eI(t){const i=[t.yM,t.NF,t.DF];switch(t.NF){case 1:i.push(t.Ug);break;case 4:i.push(t.Mf),i.push(t.lt);break;case 5:i.push(t.lt)}return i}hi.TF="The license for this player is invalid.",hi.yF="The usage license for this video player has expired.",hi.mF="The current domain is incompatible with the license for this player.",hi.pF="The provided video source is incompatible with the license for this player.",hi.MF="The requested feature is not available with the license for this player.",function(t){t[t.IF=1]="IF",t[t.SF=4]="SF",t[t.EF=5]="EF",t[t.bF=9]="bF"}(Ye||(Ye={}));var Jc=new Array(256);for(let t=0;t<256;t+=1)Jc[t]=(t<16?"0":"")+t.toString(16);function sI(){const t=eu(),i=(4294967296*_.random()|0)+t&3029421624,e=(4294967296*_.random()|0)+t&3595553209,s=(4294967296*_.random()|0)+t&1130486254,n=(4294967296*_.random()|0)+t&1284287105;return Jc[255&i]+Jc[i>>>8&255]+Jc[i>>>16&255]+Jc[i>>>24&255]+"-"+Jc[255&e]+Jc[e>>>8&255]+"-"+Jc[e>>>16&15|64]+Jc[e>>>24&255]+"-"+Jc[63&s|128]+Jc[s>>>8&255]+"-"+Jc[s>>>16&255]+Jc[s>>>24&255]+Jc[255&n]+Jc[n>>>8&255]+Jc[n>>>16&255]+Jc[n>>>24&255]}function nI(t){return lg(t.replace(/-/g,""))}function Fu(){return i.Jd()}var rI,hI="theoplayer-session-id";function oI(){if(!rI){const t=Qt.Fb(hI);t?rI=t:(rI=sI(),Qt.Kj(hI,rI))}return rI}var aI=/[^\x00-\x7E]/g;function uI(t){return"\\u"+xu(t.charCodeAt(0).toString(16),4,"0")}var cI="https://license.theoplayer.com";function dI(t){const i=function(t){const i=[];return function(t,i,e){return JSON.stringify(t,i,e).replace(aI,uI)}(t,((t,e)=>{if(Ut(e)){if(-1!==i.indexOf(e))return null;i.push(e)}return e}))}(function(t){return[t.LF,t.wC,t.QQ,t.dp,t.kF,t.CF,t.xF.map(eI)]}(t));return jD.OQ.xQ(i)}var lI=class{get xF(){return this.HB}OF(){return Boolean(this.kF)}get kF(){return this.jF}async zF(t){if(!(await this.BF.PF()).XQ)return;const i={NF:Ye.IF,DF:eu(),Ug:t};await this.DU(i)}async RF(){if(!(await this.BF.PF()).XQ)return;const t={NF:Ye.bF,DF:eu()};await this.DU(t)}async UF(t,i){const e={NF:Ye.SF,DF:eu(),Mf:i,lt:t};await this.DU(e)}async QF(t){const i={NF:Ye.EF,DF:eu(),lt:t};await this.DU(i)}async DU(t){const i=await this.BF.PF();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.FF.xQ(i.QQ)&&t.NF!==Ye.EF||(t.NF===Ye.IF?this.YF():this.OF()||this.YF(),t.yM=this.Tk++,this.HB.push(t),!function(t){return t===Ye.IF||t===Ye.EF}(t.NF)?this.HB.length>this.GF&&await this.VF():await this.WF())}async WF(t){for(void 0===t&&(t=!1);this.HB.length>0;)await this.VF(t)}async HF(t){const i=await this.BF.PF();return{LF:eu(),wC:oI(),QQ:this.FF.xQ(i.QQ)||"dev",dp:this.qk,kF:this.jF,CF:this.qF,xF:t}}async VF(t){void 0===t&&(t=!1);const i=this.HB.splice(0,this.XF),e=await this.HF(i);t?this.ZF(e):this.KF(e),this.JF=Fu()}async KF(t){const i=dI(t),e=new Pc({zu:cI,cS:i,AS:!1,fS:Uv.Ru,dS:{"Content-Type":ls.gj},CI:4e3,lS:Nr.POST});try{const t=await this.NS.SI(e);await t.cj()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+i}}ZF(t){const i=dI(t);this.NS.ZF({zu:cI,cS:i,qz:ls.gj})}YF(){this.OF()&&this.WF(),this.jF=sI(),this.Tk=0}gn(){ys.tY(this.iY),m(this.eY),this.WF()}constructor(t,i,e,s=jD.lh,n=0,r=1){this.qk=t,this.NS=i,this.BF=e,this.FF=s,this.GF=n,this.XF=r,this.HB=[],this.jF=null,this.JF=0,this.qF="unknown",this.Tk=0,this.sY=()=>{Fu()-this.JF>6e4&&this.WF()},this.iY=()=>{this.WF(!0)},ys.nY(this.iY),this.eY=v(this.sY,6e4)}};var fI=0;var _I=c,_r=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,gn=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;_r&&gn||(_r=function(t){const i=Fu(),e=_.max(0,16-(i-fI)),s=u((()=>t(i+e)),e);return fI=i+e,s},gn=_I),_r=_r.bind(self),gn=gn.bind(self);var gI=Vt.zE||Vt.Ga&&Vt.qE<13;function wI(t,i,e){const s=t.getImageData(i,e,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var _i,AI=class{get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{drawImage(i){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];return t.rY(i,...s)},texImage2D:(i,e,s,n,r,h)=>t.hY(i,e,s,n,r,h),requestVideoFrameCallback:i=>t.oY(i),cancelVideoFrameCallback:i=>t.aY(i)}}(this)}rY(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];const n=this.uY;return void 0!==n&&(t.drawImage(n,...e),!0)}hY(t,i,e,s,n,r){let h=this.uY;return void 0!==h&&(gI&&(h=this.cY(h)),t.texImage2D(i,e,s,n,r,h),!0)}oY(t){const i=this.dY++,e=this.lY(t,i);return this.fY.set(i,{_Y:t,gY:e}),i}aY(t){const i=this.fY.get(t);void 0!==i&&(this.fY.delete(t),i.gY())}lY(t,i){const e=this.uY;if(void 0===e)return El;if(e instanceof HTMLVideoElement&&e.requestVideoFrameCallback){const s=e.requestVideoFrameCallback(((e,s)=>{this.fY.delete(i),t(e,s)}));return()=>e.cancelVideoFrameCallback(s)}{let e;const s=n=>{this.wY()?(this.fY.delete(i),this.AY=!1,t(n,void 0)):e=_r(s)};return e=_r(s),()=>gn(e)}}wY(){return(!this.t.Ff||this.AY)&&!this.t.e_&&this.t.Jf>=ae.uT}cY(t){let i=this.vY;void 0===i&&(i=h.createElement("canvas"),this.vY=i);const e=i.getContext("2d"),s=this.t,n=s.a_,r=s.r_,o=i.width,a=i.height;e.clearRect(0,0,i.width,i.height),o===n&&a===r||(i.width=n,i.height=r),e.drawImage(t,0,0,n,r);let u=!1;return n>0&&wI(e,n-1,0)&&(i.width=o,u=!0),r>0&&wI(e,0,r-1)&&(i.height=a,u=!0),u&&e.drawImage(t,0,0,n,r),i}gn(){this.fY.forEach((t=>t.gY())),this.fY.clear(),this.t.fn(l.ew,this.mY),this.t.fn(l.pw,this.pY),this.uY=void 0,this.vY=void 0}constructor(t){this.uY=void 0,this.Xa=void 0,this.vY=void 0,this.fY=pt(),this.dY=1,this.AY=!0,this.pY=()=>{this.AY=!0},this.mY=()=>{this.uY=this.t.A_(),this.fY.forEach(((t,i)=>{t.gY(),t.gY=this.lY(t._Y,i)}))},this.t=t,this.t.yn(l.ew,this.mY),this.t.yn(l.pw,this.pY),this.mY()}};(_i||(_i={})).pn="dimensionchange";var vI,mI=class extends wn{constructor(t,i){super(_i.pn),this.width=t,this.height=i}},Q=class{constructor(t,i){this.we=t,this._Y=i}},pI=class extends Q{get _u(){return this.yY}get ku(){return this.MY}gn(){this.TY.disconnect()}constructor(t,i){super(t,i),this.yY=0,this.MY=0,this.NY=t=>{if(t.length>0){const i=t[t.length-1].contentRect;this.MY=i.width,this.yY=i.height,this._Y(this.MY,this.yY)}},this.TY=new Or.ResizeObserver(this.NY),this.TY.observe(this.we)}};var yI=["Webkit","Moz","O","ms"],MI=(()=>{let t=!1;try{if(void 0!==Or&&"function"==typeof Or.addEventListener){const i=w.defineProperty({},"passive",{get(){t=!0}});Or.addEventListener("testPassiveEventSupport",El,i),Or.removeEventListener("testPassiveEventSupport",El,i)}}catch(t){}return t})(),TI=cs();function NI(t){return TI.has(t)||TI.set(t,function(t){const i=(vI||(vI=Or&&Or.document&&Or.document.createElement("span")),vI);if(!i||!i.style)return t;if(void 0!==i.style[t])return t;const e=t.charAt(0).toUpperCase()+t.slice(1);for(const t of yI){const s=t+e;if(void 0!==i.style[s])return s}return t}(t)),TI.get(t)}function DI(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.bottom="0",i.top="0",i.overflow="scroll",i.zIndex="-1",i.visibility="hidden"}function II(t){const i=t.style;i.position="absolute",i.left="0",i.top="0",i[NI("transition")]="0s"}var SI=class extends Q{gn(){gn(this.DY),this.DY=0,this.IY.removeEventListener("scroll",this.SY),this.EY.removeEventListener("scroll",this.SY),sh(this.bY),s&&s.removeEventListener("resize",this.LY)}get _u(){return this.we.getBoundingClientRect().height||this.yY||0}get ku(){return this.we.getBoundingClientRect().width||this.MY||0}constructor(t,i,e){super(t,i),this.DY=0,this.MY=NaN,this.yY=NaN,this.kY=void 0,this.tr=()=>{const t=1e5;this.CY.style.width=t+"px",this.CY.style.height=t+"px",this.IY.scrollLeft=t,this.IY.scrollTop=t,this.EY.scrollLeft=t,this.EY.scrollTop=t,0===this.EY.scrollTop&&_r(this.tr)},this.xY=()=>{const t=this.ku,i=this._u;this._Y(t,i),this.MY=t,this.yY=i,this.tr(),this.DY=0},this.SY=()=>{if(this.DY)return;const t=this.ku,i=this._u;t===this.MY&&i===this.yY||(this.DY=_r(this.xY))},this.LY=()=>{this.kY||(this.kY=u(this.OY,66))},this.OY=()=>{this.kY=void 0,this.jY()},this.jY=()=>{this.SY()};const n=function(t,i){return s.getComputedStyle(t,void 0).getPropertyValue(i)||t.style[i]}(t,"position");e||"static"!==n||(t.style.position="relative");const r=h.createElement("div");this.bY=r,this.IY=h.createElement("div"),this.CY=h.createElement("div"),this.EY=h.createElement("div"),this.zY=h.createElement("div"),DI(this.IY),DI(this.EY),II(this.CY),function(t){II(t),t.style.width="200%",t.style.height="200%"}(this.zY),r.appendChild(this.IY),r.appendChild(this.EY),this.IY.appendChild(this.CY),this.EY.appendChild(this.zY),t.appendChild(r),this.IY.addEventListener("scroll",this.SY),this.EY.addEventListener("scroll",this.SY),s&&s.addEventListener("resize",this.LY),this.SY()}},EI=class extends Pl{bn(t){this.TY||("function"==typeof Or.ResizeObserver?this.TY=new pI(this.we,this.NY):this.TY=new SI(this.we,this.NY,t))}gn(){this.Vo(),this.TY&&(this.TY.gn(),this.TY=void 0)}get _u(){return this.TY?this.TY._u:0}get ku(){return this.TY?this.TY.ku:0}constructor(t){super(),this.TY=void 0,this.NY=(t,i)=>{this.Co(new mI(t,i))},this.we=t}},bI=class extends wn{constructor(){super(Tc.ra)}};var Mu=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(let i of t)if(i[1]in h)return{PY:i[0],BY:i[1],RY:i[2],UY:i[3],Qe:i[4],QY:i[5]}}(),LI=class extends wn{constructor(){super(Tc.ca)}},kI=class t extends Pl{static ia(t){return Boolean(Mu&&h[Mu.UY]&&Mu.PY in t)}mo(){const t=this.we[Mu.PY]();t&&t.then?t.then(this.FY,this.YY):(h.removeEventListener(Mu.QY,this.YY),h.addEventListener(Mu.QY,this.YY))}So(){const t=h[Mu.BY]();t&&t.then?t.then(this.FY,this.YY):(h.removeEventListener(Mu.QY,this.YY),h.addEventListener(Mu.QY,this.YY))}hR(){const t=this.cs,i=this.we===h[Mu.RY];this.cs=i,t!==i&&this.Co(new bI)}oR(){this.Co(new Yn)}gn(){this.Vo(),h.removeEventListener(Mu.Qe,this.FY),h.removeEventListener(Mu.QY,this.YY)}constructor(i){super(),this.cs=!1,this.FY=()=>this.hR(),this.YY=()=>this.oR(),this.we=i,this.ta=t.ia(i),h.addEventListener(Mu.Qe,this.FY),this.hR()}},CI=class t extends Pl{static ia(t){return Vt.Ga&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}mo(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("fullscreen")?Vt.Ga?requestAnimationFrame((()=>this.we.webkitSetPresentationMode("fullscreen"))):this.we.webkitSetPresentationMode("fullscreen"):this.we.webkitEnterFullscreen()}So(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("inline")?this.we.webkitSetPresentationMode("inline"):this.we.webkitExitFullscreen()}hR(){const t=this.cs;let i;i=this.we.webkitPresentationMode?"fullscreen"===this.we.webkitPresentationMode:Boolean(this.we.webkitDisplayingFullscreen),this.cs=i,t!==i&&this.Co(new bI)}gn(){this.Vo(),this.we.removeEventListener("webkitbeginfullscreen",this.FY),this.we.removeEventListener("webkitendfullscreen",this.FY),this.we.removeEventListener("webkitpresentationmodechanged",this.FY)}constructor(i){super(),this.cs=!1,this.FY=()=>this.hR(),this.we=i,this.ta=t.ia(i),this.we.addEventListener("webkitbeginfullscreen",this.FY),this.we.addEventListener("webkitendfullscreen",this.FY),this.we.addEventListener("webkitpresentationmodechanged",this.FY),this.hR()}},xI=class extends Pl{get ta(){return!!this.GY&&this.GY.ta}get cs(){return this.sR}mo(){this.GY?this.GY.mo():this.Co(new Yn)}So(){for(const t of this.VY)t.cs&&t.So()}WY(t){this.GY=t}HY(t){this.VY.push(t),t.yn(Tc.ra,this.hR),t.yn(Tc.ha,this.Ds),this.hR()}qY(t){To(this.VY,t),t.fn(Tc.ra,this.hR),t.fn(Tc.ha,this.Ds)}XY(){for(const t of this.VY)if(t.cs)return!0;return!1}tr(){this.GY=void 0,this.sR=!1;const t=this.VY.slice();for(const i of t)this.qY(i),i.gn();this.hR()}gn(){this.Vo(),this.tr()}constructor(...t){super(...t),this.VY=[],this.GY=void 0,this.sR=!1,this.hR=()=>{const t=this.sR,i=this.XY();t!==i&&(this.sR=i,this.Co(new bI))}}},OI=class extends Pl{get ta(){return!!this.ZY&&this.KY.ta}get cs(){return this.KY.cs}mo(){this.ZY&&this.KY.mo()}So(){this.KY.So()}JY(){this.KY.yn([Tc.ra,Tc.ca],this.hR),this.KY.yn(Tc.ha,this.Ds)}$Y(){this.KY.fn([Tc.ra,Tc.ca],this.hR),this.KY.fn(Tc.ha,this.Ds)}Yn(){const t=this.KY,i=this.t.w_();if(t===i)return;this.oa=!0;const e=this.cs,s=this.ta;e&&this.So(),this.$Y(),this.KY=i,this.JY(),e&&!this.cs&&this.ta?this.mo():this.So(),this.oa=!1,s!==this.ta&&this.Co(new LI),e!==this.cs&&this.Co(new bI)}gn(){this.Vo(),this.$Y(),this.t.fn(l.$g,this.tG)}constructor(t,i){super(),this.oa=!1,this.tG=()=>this.Yn(),this.hR=t=>{this.oa||this.Co(t)},this.t=t,this.ZY=i,this.KY=new Wu,this.JY(),this.t.yn(l.$g,this.tG),this.Yn()}},jI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:function(t){return"Symbol("+t+")"};function zI(){}var PI=Number.isNaN||function(t){return t!=t},BI=zI;function ni(t){return"object"==typeof t&&null!==t||"function"==typeof t}function RI(t){return t.slice()}function UI(t,i,e,s,n){new j(t).set(new j(e,s,n),i)}function QI(t){return!1!==function(t){if("number"!=typeof t)return!1;if(PI(t))return!1;if(t<0)return!1;return!0}(t)&&t!==1/0}function FI(t,i,e){if("function"!=typeof t)throw new b("Argument is not a function");return Function.prototype.apply.call(t,i,e)}function Ju(t,i,e,s){var n=t[i];if(void 0!==n){if("function"!=typeof n)throw new b(n+" is not a method");switch(e){case 0:return function(){return GI(n,t,s)};case 1:return function(i){var e=[i].concat(s);return GI(n,t,e)}}}return function(){return ro(void 0)}}function YI(t,i,e){var s=t[i];if(void 0!==s)return FI(s,t,e)}function GI(t,i,e){try{return ro(FI(t,i,e))}catch(t){return Ho(t)}}function kt(t){if(t=Number(t),PI(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function VI(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new b("size property of a queuing strategy must be a function");return function(i){return t(i)}}var WI=Promise,HI=Promise.prototype.then,qI=Promise.resolve.bind(WI),XI=Promise.reject.bind(WI);function ZI(t){return new WI(t)}function ro(t){return qI(t)}function Ho(t){return XI(t)}function KI(t,i,e){return HI.call(t,i,e)}function JI(t,i,e){KI(KI(t,i,e),void 0,BI)}function $I(t,i){JI(t,i)}function tS(t,i){JI(t,void 0,i)}function lr(t,i,e){return KI(t,i,e)}function iS(t){KI(t,void 0,BI)}var te=function(){function t(){this.iG=0,this.eG=0,this.sG={nG:[],rG:void 0},this.hG=this.sG,this.iG=0,this.eG=0}return w.defineProperty(t.prototype,"length",{get:function(){return this.eG},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var i=this.hG,e=i;16383===i.nG.length&&(e={nG:[],rG:void 0}),i.nG.push(t),e!==i&&(this.hG=e,i.rG=e),++this.eG},t.prototype.shift=function(){var t=this.sG,i=t,e=this.iG,s=e+1,n=t.nG,r=n[e];return 16384===s&&(i=t.rG,s=0),--this.eG,this.iG=s,t!==i&&(this.sG=i),n[e]=void 0,r},t.prototype.forEach=function(t){for(var i=this.iG,e=this.sG,s=e.nG;!(i===s.length&&void 0===e.rG||i===s.length&&(i=0,0===(s=(e=e.rG).nG).length));)t(s[i]),++i},t.prototype.peek=function(){var t=this.sG,i=this.iG;return t.nG[i]},t}();function Ze(t,i,e){var s=null;!0===e&&(s=w.prototype);var n=w.create(s);return n.value=t,n.done=i,n}function eS(t,i){t.oG=!0,t.aG=i,i.uG=t,"readable"===i.ja?nS(t):"closed"===i.ja?function(t){nS(t),oS(t)}(t):rS(t,i.cG)}function sS(t,i){return fr(t.aG,i)}function X(t){"readable"===t.aG.ja?hS(t,new b("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,i){rS(t,i)}(t,new b("Reader was released and can no longer be used to monitor the stream's closedness")),t.aG.uG=void 0,t.aG=void 0}function st(t){return new b("Cannot "+t+" a stream using a released reader")}function nS(t){t.dC=ZI((function(i,e){t.dG=i,t.lG=e}))}function rS(t,i){nS(t),hS(t,i)}function hS(t,i){iS(t.dC),t.lG(i),t.dG=void 0,t.lG=void 0}function oS(t){t.dG(void 0),t.dG=void 0,t.lG=void 0}var aS=jI("[[CancelSteps]]"),uS=jI("[[PullSteps]]");function cS(t,i){void 0===i&&(i=!1);var e=new AS(t);return e.oG=i,e}function dS(t){return ZI((function(i,e){var s={Hb:i,Xb:e};t.uG.fG.push(s)}))}function lS(t,i,e){var s=t.uG;s.fG.shift().Hb(Ze(i,e,s.oG))}function fS(t){return t.uG.fG.length}function _S(t){var i=t.uG;return void 0!==i&&!!hr(i)}var gS,wS,AS=function(){function t(t){if(!1===$s(t))throw new b("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===Ru(t))throw new b("This stream has already been locked for exclusive reading by another reader");eS(this,t),this.fG=new te}return w.defineProperty(t.prototype,"closed",{get:function(){return hr(this)?this.dC:Ho(mS("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return hr(this)?void 0===this.aG?Ho(st("cancel")):sS(this,t):Ho(mS("cancel"))},t.prototype.read=function(){return hr(this)?void 0===this.aG?Ho(st("read from")):vS(this):Ho(mS("read"))},t.prototype.releaseLock=function(){if(!hr(this))throw mS("releaseLock");if(void 0!==this.aG){if(this.fG.length>0)throw new b("Tried to release a reader lock when that reader has pending read() calls un-settled");X(this)}},t}();function hr(t){return!!ni(t)&&!!w.prototype.hasOwnProperty.call(t,"fG")}function vS(t){var i=t.aG;return i._G=!0,"closed"===i.ja?ro(Ze(void 0,!0,t.oG)):"errored"===i.ja?Ho(i.cG):i.gG[uS]()}function mS(t){return new b("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof jI.asyncIterator&&((gS={})[jI.asyncIterator]=function(){return this},wS=gS,w.defineProperty(wS,jI.asyncIterator,{enumerable:!1}));var pS={next:function(){if(!1===yS(this))return Ho(MS("next"));var t=this.wG;return void 0===t.aG?Ho(st("iterate")):lr(vS(t),(function(i){var e=i.done;return e&&X(t),Ze(i.value,e,!0)}))},return:function(t){if(!1===yS(this))return Ho(MS("next"));var i=this.wG;if(void 0===i.aG)return Ho(st("finish iterating"));if(i.fG.length>0)return Ho(new b("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.AG){var e=sS(i,t);return X(i),lr(e,(function(){return Ze(t,!0,!0)}))}return X(i),ro(Ze(t,!0,!0))}};function yS(t){return!!ni(t)&&!!w.prototype.hasOwnProperty.call(t,"wG")}function MS(t){return new b("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function TS(t){var i=t.vG.shift();return t.mG-=i.size,t.mG<0&&(t.mG=0),i.value}function NS(t,i,e){if(!QI(e=Number(e)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.vG.push({value:i,size:e}),t.mG+=e}function Gu(t){t.vG=new te,t.mG=0}void 0!==wS&&w.setPrototypeOf(pS,wS),w.defineProperty(pS,"next",{enumerable:!1}),w.defineProperty(pS,"return",{enumerable:!1});var DS=jI("[[AbortSteps]]"),IS=jI("[[ErrorSteps]]"),SS=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),bS(this);var e=i.size,s=i.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=VI(e);void 0===s&&(s=1),function(t,i,e,s){var n=w.create(YS.prototype);function r(){return YI(i,"start",[n])}var h=Ju(i,"write",1,[n]),o=Ju(i,"close",0,[]),a=Ju(i,"abort",1,[]);GS(t,n,r,h,o,a,e,s)}(this,t,s=kt(s),n)}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===or(this))throw KS("locked");return nt(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===or(this)?Ho(KS("abort")):!0===nt(this)?Ho(new b("Cannot abort a stream that already has a writer")):LS(this,t)},t.prototype.close=function(){return!1===or(this)?Ho(KS("close")):!0===nt(this)?Ho(new b("Cannot close a stream that already has a writer")):!0===$e(this)?Ho(new b("Cannot close an already-closing stream")):kS(this)},t.prototype.getWriter=function(){if(!1===or(this))throw KS("getWriter");return ES(this)},t}();function ES(t){return new PS(t)}function bS(t){t.ja="writable",t.cG=void 0,t.lL=void 0,t.pG=void 0,t.yG=new te,t.MG=void 0,t.TG=void 0,t.NG=void 0,t.DG=void 0,t.IG=!1}function or(t){return!!ni(t)&&!!w.prototype.hasOwnProperty.call(t,"pG")}function nt(t){return void 0!==t.lL}function LS(t,i){var e=t.ja;if("closed"===e||"errored"===e)return ro(void 0);if(void 0!==t.DG)return t.DG.SG;var s=!1;"erroring"===e&&(s=!0,i=void 0);var n=ZI((function(e,n){t.DG={SG:void 0,Hb:e,Xb:n,EG:i,bG:s}}));return t.DG.SG=n,!1===s&&xS(t,i),n}function kS(t){var i=t.ja;if("closed"===i||"errored"===i)return Ho(new b("The stream (in "+i+" state) is not in the writable state and cannot be closed"));var e=ZI((function(i,e){var s={Hb:i,Xb:e};t.TG=s})),s=t.lL;return void 0!==s&&!0===t.IG&&"writable"===i&&aE(s),function(t){NS(t,"close",0),HS(t)}(t.pG),e}function CS(t,i){"writable"!==t.ja?OS(t):xS(t,i)}function xS(t,i){var e=t.pG;t.ja="erroring",t.cG=i;var s=t.lL;void 0!==s&&US(s,i),!1===function(t){if(void 0===t.MG&&void 0===t.NG)return!1;return!0}(t)&&!0===e.LG&&OS(t)}function OS(t){t.ja="errored",t.pG[IS]();var i=t.cG;if(t.yG.forEach((function(t){t.Xb(i)})),t.yG=new te,void 0!==t.DG){var e=t.DG;if(t.DG=void 0,!0===e.bG)return e.Xb(i),void jS(t);JI(t.pG[DS](e.EG),(function(){e.Hb(),jS(t)}),(function(i){e.Xb(i),jS(t)}))}else jS(t)}function $e(t){return void 0!==t.TG||void 0!==t.NG}function jS(t){void 0!==t.TG&&(t.TG.Xb(t.cG),t.TG=void 0);var i=t.lL;void 0!==i&&eE(i,t.cG)}function zS(t,i){var e=t.lL;void 0!==e&&i!==t.IG&&(!0===i?function(t){nE(t)}(e):aE(e)),t.IG=i}var PS=function(){function t(t){if(!1===or(t))throw new b("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===nt(t))throw new b("This stream has already been locked for exclusive writing by another writer");this.kG=t,t.lL=this;var i=t.ja;if("writable"===i)!1===$e(t)&&!0===t.IG?nE(this):hE(this),tE(this);else if("erroring"===i)rE(this,t.cG),tE(this);else if("closed"===i)hE(this),function(t){tE(t),sE(t)}(this);else{var e=t.cG;rE(this,e),iE(this,e)}}return w.defineProperty(t.prototype,"closed",{get:function(){return!1===ur(this)?Ho(JS("closed")):this.dC},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===ur(this))throw JS("desiredSize");if(void 0===this.kG)throw $S("desiredSize");return function(t){var i=t.kG,e=i.ja;if("errored"===e||"erroring"===e)return null;if("closed"===e)return 0;return WS(i.pG)}(this)},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"ready",{get:function(){return!1===ur(this)?Ho(JS("ready")):this.CG},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===ur(this)?Ho(JS("abort")):void 0===this.kG?Ho($S("abort")):function(t,i){var e=t.kG;return LS(e,i)}(this,t)},t.prototype.close=function(){if(!1===ur(this))return Ho(JS("close"));var t=this.kG;return void 0===t?Ho($S("close")):!0===$e(t)?Ho(new b("Cannot close an already-closing stream")):BS(this)},t.prototype.releaseLock=function(){if(!1===ur(this))throw JS("releaseLock");void 0!==this.kG&&QS(this)},t.prototype.write=function(t){return!1===ur(this)?Ho(JS("write")):void 0===this.kG?Ho($S("write to")):FS(this,t)},t}();function ur(t){return!!ni(t)&&!!w.prototype.hasOwnProperty.call(t,"kG")}function BS(t){return kS(t.kG)}function RS(t,i){"pending"===t.xG?eE(t,i):function(t,i){iE(t,i)}(t,i)}function US(t,i){"pending"===t.OG?oE(t,i):function(t,i){rE(t,i)}(t,i)}function QS(t){var i=t.kG,e=new b("Writer was released and can no longer be used to monitor the stream's closedness");US(t,e),RS(t,e),i.lL=void 0,t.kG=void 0}function FS(t,i){var e=t.kG,s=e.pG,n=function(t,i){try{return t.jG(i)}catch(i){return qS(t,i),1}}(s,i);if(e!==t.kG)return Ho($S("write to"));var r=e.ja;if("errored"===r)return Ho(e.cG);if(!0===$e(e)||"closed"===r)return Ho(new b("The stream is closing or closed and cannot be written to"));if("erroring"===r)return Ho(e.cG);var h=function(t){return ZI((function(i,e){var s={Hb:i,Xb:e};t.yG.push(s)}))}(e);return function(t,i,e){var s={chunk:i};try{NS(t,s,e)}catch(i){return void qS(t,i)}var n=t.zG;if(!1===$e(n)&&"writable"===n.ja){zS(n,XS(t))}HS(t)}(s,i,n),h}var YS=function(){function t(){throw new b("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){if(!ni(t))return!1;if(!w.prototype.hasOwnProperty.call(t,"zG"))return!1;return!0}(this))throw new b("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.zG.ja&&ZS(this,t)},t.prototype[DS]=function(t){var i=this.BG(t);return VS(this),i},t.prototype[IS]=function(){Gu(this)},t}();function GS(t,i,e,s,n,r,h,o){i.zG=t,t.pG=i,i.vG=void 0,i.mG=void 0,Gu(i),i.LG=!1,i.jG=o,i.UG=h,i.QG=s,i.FG=n,i.BG=r;var a=XS(i);zS(t,a),JI(ro(e()),(function(){i.LG=!0,HS(i)}),(function(e){i.LG=!0,CS(t,e)}))}function VS(t){t.QG=void 0,t.FG=void 0,t.BG=void 0,t.jG=void 0}function WS(t){return t.UG-t.mG}function HS(t){var i=t.zG;if(!1!==t.LG&&void 0===i.MG)if("erroring"!==i.ja){if(0!==t.vG.length){var e=function(t){return t.vG.peek().value}(t);"close"===e?function(t){var i=t.zG;(function(t){t.NG=t.TG,t.TG=void 0})(i),TS(t);var e=t.FG();VS(t),JI(e,(function(){!function(t){t.NG.Hb(void 0),t.NG=void 0,"erroring"===t.ja&&(t.cG=void 0,void 0!==t.DG&&(t.DG.Hb(),t.DG=void 0)),t.ja="closed";var i=t.lL;void 0!==i&&sE(i)}(i)}),(function(t){!function(t,i){t.NG.Xb(i),t.NG=void 0,void 0!==t.DG&&(t.DG.Xb(i),t.DG=void 0),CS(t,i)}(i,t)}))}(t):function(t,i){var e=t.zG;!function(t){t.MG=t.yG.shift()}(e);var s=t.QG(i);JI(s,(function(){!function(t){t.MG.Hb(void 0),t.MG=void 0}(e);var i=e.ja;if(TS(t),!1===$e(e)&&"writable"===i){var s=XS(t);zS(e,s)}HS(t)}),(function(i){"writable"===e.ja&&VS(t),function(t,i){t.MG.Xb(i),t.MG=void 0,CS(t,i)}(e,i)}))}(t,e.chunk)}}else OS(i)}function qS(t,i){"writable"===t.zG.ja&&ZS(t,i)}function XS(t){return WS(t)<=0}function ZS(t,i){var e=t.zG;VS(t),xS(e,i)}function KS(t){return new b("WritableStream.prototype."+t+" can only be used on a WritableStream")}function JS(t){return new b("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function $S(t){return new b("Cannot "+t+" a stream using a released writer")}function tE(t){t.dC=ZI((function(i,e){t.dG=i,t.lG=e,t.xG="pending"}))}function iE(t,i){tE(t),eE(t,i)}function eE(t,i){iS(t.dC),t.lG(i),t.dG=void 0,t.lG=void 0,t.xG="rejected"}function sE(t){t.dG(void 0),t.dG=void 0,t.lG=void 0,t.xG="resolved"}function nE(t){t.CG=ZI((function(i,e){t.YG=i,t.GG=e})),t.OG="pending"}function rE(t,i){nE(t),oE(t,i)}function hE(t){nE(t),aE(t)}function oE(t,i){iS(t.CG),t.GG(i),t.YG=void 0,t.GG=void 0,t.OG="rejected"}function aE(t){t.YG(void 0),t.YG=void 0,t.GG=void 0,t.OG="fulfilled"}function uE(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var cE="undefined"!=typeof DOMException?DOMException:void 0;var dE=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}(cE)?cE:function(){var t=function(t,i){this.message=t||"",this.name=i||"Error",g.captureStackTrace&&g.captureStackTrace(this,this.constructor)};return t.prototype=w.create(g.prototype),w.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),t}();function lE(t,i,e,s,n,r){var h=cS(t),o=ES(i);t._G=!0;var a=!1,u=ro(void 0);return ZI((function(c,d){var l,f,_,g;if(void 0!==r){if(l=function(){var e=new dE("Aborted","AbortError"),r=[];!1===s&&r.push((function(){return"writable"===i.ja?LS(i,e):ro(void 0)})),!1===n&&r.push((function(){return"readable"===t.ja?fr(t,e):ro(void 0)})),m((function(){return Promise.all(r.map((function(t){return t()})))}),!0,e)},!0===r.aborted)return void l();r.addEventListener("abort",l)}if(v(t,h.dC,(function(t){!1===s?m((function(){return LS(i,t)}),!0,t):p(!0,t)})),v(i,o.dC,(function(i){!1===n?m((function(){return fr(t,i)}),!0,i):p(!0,i)})),f=t,_=h.dC,g=function(){!1===e?m((function(){return function(t){var i=t.kG,e=i.ja;return!0===$e(i)||"closed"===e?ro(void 0):"errored"===e?Ho(i.cG):BS(t)}(o)})):p()},"closed"===f.ja?g():$I(_,g),!0===$e(i)||"closed"===i.ja){var w=new b("the destination writable stream closed before all data could be piped to it");!1===n?m((function(){return fr(t,w)}),!0,w):p(!0,w)}function A(){var t=u;return KI(u,(function(){return t!==u?A():void 0}))}function v(t,i,e){"errored"===t.ja?e(t.cG):tS(i,e)}function m(t,e,s){function n(){JI(t(),(function(){return y(e,s)}),(function(t){return y(!0,t)}))}!0!==a&&(a=!0,"writable"===i.ja&&!1===$e(i)?$I(A(),n):n())}function p(t,e){!0!==a&&(a=!0,"writable"===i.ja&&!1===$e(i)?$I(A(),(function(){return y(t,e)})):y(t,e))}function y(t,i){QS(o),X(h),void 0!==r&&r.removeEventListener("abort",l),t?d(i):c(void 0)}iS(ZI((function(t,i){!function e(s){s?t():KI(!0===a?ro(!0):KI(o.CG,(function(){return KI(vS(h),(function(t){return!0===t.done||(u=KI(FS(o,t.value),void 0,zI),!1)}))})),e,i)}(!1)})))}))}var fE=function(){function t(){throw new b}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===_E(this))throw TE("desiredSize");return pE(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===_E(this))throw TE("close");if(!1===yE(this))throw new b("The stream is not in a state that permits close");vE(this)},t.prototype.enqueue=function(t){if(!1===_E(this))throw TE("enqueue");if(!1===yE(this))throw new b("The stream is not in a state that permits enqueue");return mE(this,t)},t.prototype.error=function(t){if(!1===_E(this))throw TE("error");Lu(this,t)},t.prototype[aS]=function(t){Gu(this);var i=this.VG(t);return AE(this),i},t.prototype[uS]=function(){var t=this.WG;if(this.vG.length>0){var i=TS(this);return!0===this.HG&&0===this.vG.length?(AE(this),$E(t)):gE(this),ro(Ze(i,!1,t.uG.oG))}var e=dS(t);return gE(this),e},t}();function _E(t){return!!ni(t)&&!!w.prototype.hasOwnProperty.call(t,"WG")}function gE(t){!1!==wE(t)&&(!0!==t.qG?(t.qG=!0,JI(t.XG(),(function(){t.qG=!1,!0===t.ZG&&(t.ZG=!1,gE(t))}),(function(i){Lu(t,i)}))):t.ZG=!0)}function wE(t){var i=t.WG;return!1!==yE(t)&&(!1!==t.LG&&(!0===Ru(i)&&fS(i)>0||pE(t)>0))}function AE(t){t.XG=void 0,t.VG=void 0,t.jG=void 0}function vE(t){var i=t.WG;t.HG=!0,0===t.vG.length&&(AE(t),$E(i))}function mE(t,i){var e=t.WG;if(!0===Ru(e)&&fS(e)>0)lS(e,i,!1);else{var s=void 0;try{s=t.jG(i)}catch(i){throw Lu(t,i),i}try{NS(t,i,s)}catch(i){throw Lu(t,i),i}}gE(t)}function Lu(t,i){var e=t.WG;"readable"===e.ja&&(Gu(t),AE(t),tb(e,i))}function pE(t){var i=t.WG.ja;return"errored"===i?null:"closed"===i?0:t.UG-t.mG}function yE(t){var i=t.WG.ja;return!1===t.HG&&"readable"===i}function ME(t,i,e,s,n,r,h){i.WG=t,i.vG=void 0,i.mG=void 0,Gu(i),i.LG=!1,i.HG=!1,i.ZG=!1,i.qG=!1,i.jG=h,i.UG=r,i.XG=s,i.VG=n,t.gG=i,JI(ro(e()),(function(){i.LG=!0,gE(i)}),(function(t){Lu(i,t)}))}function TE(t){return new b("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}var NE=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&_.floor(t)===t},DE=function(){function t(){throw new b("ReadableStreamBYOBRequest cannot be used directly")}return w.defineProperty(t.prototype,"view",{get:function(){if(!1===SE(this))throw YE("view");return this.rI},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===SE(this))throw YE("respond");if(void 0===this.KG)throw new b("This BYOB request has been invalidated");this.rI.buffer,function(t,i){if(i=Number(i),!1===QI(i))throw new RangeError("bytesWritten must be a finite");PE(t,i)}(this.KG,t)},t.prototype.respondWithNewView=function(t){if(!1===SE(this))throw YE("respond");if(void 0===this.KG)throw new b("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new b("You can only respond with array buffer views");t.buffer,function(t,i){var e=t.JG.peek();if(e.byteOffset+e.bytesFilled!==i.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(e.byteLength!==i.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");e.buffer=i.buffer,PE(t,i.byteLength)}(this.KG,t)},t}(),IE=function(){function t(){throw new b("ReadableByteStreamController constructor cannot be used directly")}return w.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===K(this))throw GE("byobRequest");if(void 0===this.$G&&this.JG.length>0){var t=this.JG.peek(),i=new j(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),e=w.create(DE.prototype);!function(t,i,e){t.KG=i,t.rI=e}(e,this,i),this.$G=e}return this.$G},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===K(this))throw GE("desiredSize");return QE(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===K(this))throw GE("close");if(!0===this.HG)throw new b("The stream has already been closed; do not close it again!");var t=this.tV.ja;if("readable"!==t)throw new b("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var i=t.tV;if(t.mG>0)return void(t.HG=!0);if(t.JG.length>0){if(t.JG.peek().bytesFilled>0){var e=new b("Insufficient bytes to fill elements in the given buffer");throw UE(t,e),e}}RE(t),$E(i)}(this)},t.prototype.enqueue=function(t){if(!1===K(this))throw GE("enqueue");if(!0===this.HG)throw new b("stream is closed or draining");var i=this.tV.ja;if("readable"!==i)throw new b("The stream (in "+i+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new b("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,i){var e=t.tV,s=i.buffer,n=i.byteOffset,r=i.byteLength,h=s;if(!0===_S(e)){if(0===fS(e))kE(t,h,n,r);else lS(e,new j(h,n,r),!1)}else!0===HE(e)?(kE(t,h,n,r),zE(t)):kE(t,h,n,r);EE(t)}(this,t)},t.prototype.error=function(t){if(!1===K(this))throw GE("error");UE(this,t)},t.prototype[aS]=function(t){this.JG.length>0&&(this.JG.peek().bytesFilled=0);Gu(this);var i=this.VG(t);return RE(this),i},t.prototype[uS]=function(){var t=this.tV;if(this.mG>0){var i=this.vG.shift();this.mG-=i.byteLength,OE(this);var e=void 0;try{e=new j(i.buffer,i.byteOffset,i.byteLength)}catch(t){return Ho(t)}return ro(Ze(e,!1,t.uG.oG))}var s=this.iV;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return Ho(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:j,readerType:"default"};this.JG.push(r)}var h=dS(t);return EE(this),h},t}();function K(t){return!!ni(t)&&!!w.prototype.hasOwnProperty.call(t,"tV")}function SE(t){return!!ni(t)&&!!w.prototype.hasOwnProperty.call(t,"KG")}function EE(t){var i=function(t){var i=t.tV;if("readable"!==i.ja)return!1;if(!0===t.HG)return!1;if(!1===t.LG)return!1;if(!0===_S(i)&&fS(i)>0)return!0;if(!0===HE(i)&&WE(i)>0)return!0;var e=QE(t);if(e>0)return!0;return!1}(t);!1!==i&&(!0!==t.qG?(t.qG=!0,JI(t.XG(),(function(){t.qG=!1,!0===t.ZG&&(t.ZG=!1,EE(t))}),(function(i){UE(t,i)}))):t.ZG=!0)}function bE(t,i){var e=!1;"closed"===t.ja&&(e=!0);var s=LE(i);"default"===i.readerType?lS(t,s,e):function(t,i,e){var s=t.uG,n=s.eV.shift();n.Hb(Ze(i,e,s.oG))}(t,s,e)}function LE(t){var i=t.bytesFilled,e=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,i/e)}function kE(t,i,e,s){t.vG.push({buffer:i,byteOffset:e,byteLength:s}),t.mG+=s}function CE(t,i){var e=i.elementSize,s=i.bytesFilled-i.bytesFilled%e,n=_.min(t.mG,i.byteLength-i.bytesFilled),r=i.bytesFilled+n,h=r-r%e,o=n,a=!1;h>s&&(o=h-i.bytesFilled,a=!0);for(var u=t.vG;o>0;){var c=u.peek(),d=_.min(o,c.byteLength),l=i.byteOffset+i.bytesFilled;UI(i.buffer,l,c.buffer,c.byteOffset,d),c.byteLength===d?u.shift():(c.byteOffset+=d,c.byteLength-=d),t.mG-=d,xE(t,d,i),o-=d}return a}function xE(t,i,e){jE(t),e.bytesFilled+=i}function OE(t){0===t.mG&&!0===t.HG?(RE(t),$E(t.tV)):EE(t)}function jE(t){void 0!==t.$G&&(t.$G.KG=void 0,t.$G.rI=void 0,t.$G=void 0)}function zE(t){for(;t.JG.length>0;){if(0===t.mG)return;var i=t.JG.peek();!0===CE(t,i)&&(BE(t),bE(t.tV,i))}}function PE(t,i){var e=t.JG.peek();if("closed"===t.tV.ja){if(0!==i)throw new b("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,i){i.buffer=i.buffer;var e=t.tV;if(!0===HE(e))for(;WE(e)>0;)bE(e,BE(t))}(t,e)}else!function(t,i,e){if(e.bytesFilled+i>e.byteLength)throw new RangeError("bytesWritten out of range");if(xE(t,i,e),!(e.bytesFilled<e.elementSize)){BE(t);var s=e.bytesFilled%e.elementSize;if(s>0){var n=e.byteOffset+e.bytesFilled,r=e.buffer.slice(n-s,n);kE(t,r,0,r.byteLength)}e.buffer=e.buffer,e.bytesFilled-=s,bE(t.tV,e),zE(t)}}(t,i,e);EE(t)}function BE(t){var i=t.JG.shift();return jE(t),i}function RE(t){t.XG=void 0,t.VG=void 0}function UE(t,i){var e=t.tV;"readable"===e.ja&&(!function(t){jE(t),t.JG=new te}(t),Gu(t),RE(t),tb(e,i))}function QE(t){var i=t.tV.ja;return"errored"===i?null:"closed"===i?0:t.UG-t.mG}function FE(t,i,e){var s=w.create(IE.prototype);var n=Ju(i,"pull",0,[s]),r=Ju(i,"cancel",1,[]),h=i.autoAllocateChunkSize;if(void 0!==h&&(h=Number(h),!1===NE(h)||h<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,i,e,s,n,r,h){i.tV=t,i.ZG=!1,i.qG=!1,i.$G=void 0,i.vG=i.mG=void 0,Gu(i),i.HG=!1,i.LG=!1,i.UG=kt(r),i.XG=s,i.VG=n,i.iV=h,i.JG=new te,t.gG=i,JI(ro(e()),(function(){i.LG=!0,EE(i)}),(function(t){UE(i,t)}))}(t,s,(function(){return YI(i,"start",[s])}),n,r,e,h)}function YE(t){return new b("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function GE(t){return new b("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function VE(t){return ZI((function(i,e){var s={Hb:i,Xb:e};t.uG.eV.push(s)}))}function WE(t){return t.uG.eV.length}function HE(t){var i=t.uG;return void 0!==i&&!!XE(i)}var qE=function(){function t(t){if(!$s(t))throw new b("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===K(t.gG))throw new b("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(Ru(t))throw new b("This stream has already been locked for exclusive reading by another reader");eS(this,t),this.eV=new te}return w.defineProperty(t.prototype,"closed",{get:function(){return XE(this)?this.dC:Ho(ZE("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return XE(this)?void 0===this.aG?Ho(st("cancel")):sS(this,t):Ho(ZE("cancel"))},t.prototype.read=function(t){return XE(this)?void 0===this.aG?Ho(st("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?Ho(new b("view must have non-zero byteLength")):function(t,i){var e=t.aG;if(e._G=!0,"errored"===e.ja)return Ho(e.cG);return function(t,i){var e=t.tV,s=1;i.constructor!==DataView&&(s=i.constructor.BYTES_PER_ELEMENT);var n=i.constructor,r={buffer:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.JG.length>0)return t.JG.push(r),VE(e);if("closed"===e.ja)return ro(Ze(new n(r.buffer,r.byteOffset,0),!0,e.uG.oG));if(t.mG>0){if(!0===CE(t,r)){var h=LE(r);return OE(t),ro(Ze(h,!1,e.uG.oG))}if(!0===t.HG){var o=new b("Insufficient bytes to fill elements in the given buffer");return UE(t,o),Ho(o)}}t.JG.push(r);var a=VE(e);return EE(t),a}(e.gG,i)}(this,t)):Ho(new b("view must be an array buffer view")):Ho(ZE("read"))},t.prototype.releaseLock=function(){if(!XE(this))throw ZE("releaseLock");if(void 0!==this.aG){if(this.eV.length>0)throw new b("Tried to release a reader lock when that reader has pending read() calls un-settled");X(this)}},t}();function XE(t){return!!ni(t)&&!!w.prototype.hasOwnProperty.call(t,"eV")}function ZE(t){return new b("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var Ft=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),JE(this);var e=i.size,s=i.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==e)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),FE(this,t,s=kt(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=VI(e);void 0===s&&(s=1),function(t,i,e,s){var n=w.create(fE.prototype),r=Ju(i,"pull",0,[n]),h=Ju(i,"cancel",1,[]);ME(t,n,(function(){return YI(i,"start",[n])}),r,h,e,s)}(this,t,s=kt(s),r)}}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===$s(this))throw dr("locked");return Ru(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===$s(this)?Ho(dr("cancel")):!0===Ru(this)?Ho(new b("Cannot cancel a stream that already has a reader")):fr(this,t)},t.prototype.getReader=function(t){var i=(void 0===t?{}:t).mode;if(!1===$s(this))throw dr("getReader");if(void 0===i)return cS(this,!0);if("byob"===(i=String(i)))return function(t,i){void 0===i&&(i=!1);var e=new qE(t);return e.oG=i,e}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,i){var e=t.writable,s=t.readable,n=void 0===i?{}:i,r=n.preventClose,h=n.preventAbort,o=n.preventCancel,a=n.signal;if(!1===$s(this))throw dr("pipeThrough");if(!1===or(e))throw new b("writable argument to pipeThrough must be a WritableStream");if(!1===$s(s))throw new b("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),h=Boolean(h),o=Boolean(o),void 0!==a&&!uE(a))throw new b("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===Ru(this))throw new b("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===nt(e))throw new b("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return iS(lE(this,e,r,h,o,a)),s},t.prototype.pipeTo=function(t,i){var e=void 0===i?{}:i,s=e.preventClose,n=e.preventAbort,r=e.preventCancel,h=e.signal;return!1===$s(this)?Ho(dr("pipeTo")):!1===or(t)?Ho(new b("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===h||uE(h)?!0===Ru(this)?Ho(new b("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===nt(t)?Ho(new b("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):lE(this,t,s,n,r,h):Ho(new b("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===$s(this))throw dr("tee");var t=function(t,i){var e,s,n,r,h,o=cS(t),a=!1,u=!1,c=!1,d=ZI((function(t){h=t}));function l(){return!0===a||(a=!0,iS(lr(vS(o),(function(t){if(a=!1,!0===t.done)return!1===u&&vE(n.gG),void(!1===c&&vE(r.gG));var i=t.value,e=i,s=i;!1===u&&mE(n.gG,e),!1===c&&mE(r.gG,s)})))),ro(void 0)}function f(){}return n=KE(f,l,(function(i){if(u=!0,e=i,!0===c){var n=RI([e,s]),r=fr(t,n);h(r)}return d})),r=KE(f,l,(function(i){if(c=!0,s=i,!0===u){var n=RI([e,s]),r=fr(t,n);h(r)}return d})),tS(o.dC,(function(t){Lu(n.gG,t),Lu(r.gG,t)})),[n,r]}(this);return RI(t)},t.prototype.getIterator=function(t){var i=(void 0===t?{}:t).preventCancel,e=void 0!==i&&i;if(!1===$s(this))throw dr("getIterator");return function(t,i){void 0===i&&(i=!1);var e=cS(t),s=w.create(pS);return s.wG=e,s.AG=Boolean(i),s}(this,e)},t}();function KE(t,i,e,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=w.create(Ft.prototype);return JE(r),ME(r,w.create(fE.prototype),t,i,e,s,n),r}function JE(t){t.ja="readable",t.uG=void 0,t.cG=void 0,t._G=!1}function $s(t){return!!ni(t)&&!!w.prototype.hasOwnProperty.call(t,"gG")}function Ru(t){return void 0!==t.uG}function fr(t,i){return t._G=!0,"closed"===t.ja?ro(void 0):"errored"===t.ja?Ho(t.cG):($E(t),lr(t.gG[aS](i),zI))}function $E(t){t.ja="closed";var i=t.uG;void 0!==i&&(hr(i)&&(i.fG.forEach((function(t){t.Hb(Ze(void 0,!0,i.oG))})),i.fG=new te),oS(i))}function tb(t,i){t.ja="errored",t.cG=i;var e=t.uG;void 0!==e&&(hr(e)?(e.fG.forEach((function(t){t.Xb(i)})),e.fG=new te):(e.eV.forEach((function(t){t.Xb(i)})),e.eV=new te),hS(e,i))}function dr(t){return new b("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof jI.asyncIterator&&w.defineProperty(Ft.prototype,jI.asyncIterator,{value:Ft.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});!function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}t.prototype.size=function(t){return t.byteLength}}();var ib=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(){return 1},t}(),Ko=function(){function t(t,i,e){void 0===t&&(t={}),void 0===i&&(i={}),void 0===e&&(e={});var s=i.size,n=i.highWaterMark,r=e.size,h=e.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var o=VI(s);if(void 0===n&&(n=1),n=kt(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=VI(r);void 0===h&&(h=0),h=kt(h),function(t,i,e,s,n,r){function h(){return i}function o(i){return function(t,i){var e=t.sV;if(!0===t.IG){return lr(t.nV,(function(){var s=t.rV;if("erroring"===s.ja)throw s.cG;return cb(e,i)}))}return cb(e,i)}(t,i)}function a(i){return function(t,i){return sb(t,i),ro(void 0)}(t,i)}function u(){return function(t){var i=t.hV,e=t.sV,s=e.oV();return ab(e),lr(s,(function(){if("errored"===i.ja)throw i.cG;var t=i.gG;!0===yE(t)&&vE(t)}),(function(e){throw sb(t,e),i.cG}))}(t)}function c(){return function(t){return rb(t,!1),t.nV}(t)}function d(i){return nb(t,i),ro(void 0)}t.rV=function(t,i,e,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var h=w.create(SS.prototype);return bS(h),GS(h,w.create(YS.prototype),t,i,e,s,n,r),h}(h,o,u,a,e,s),t.hV=KE(h,c,d,n,r),t.IG=void 0,t.nV=void 0,t.aV=void 0,rb(t,!0),t.sV=void 0}(this,ZI((function(t){a=t})),n,o,h,u),function(t,i){var e=w.create(hb.prototype),s=function(t){try{return ub(e,t),ro(void 0)}catch(t){return Ho(t)}},n=i.transform;if(void 0!==n){if("function"!=typeof n)throw new b("transform is not a method");s=function(t){return GI(n,i,[t,e])}}var r=Ju(i,"flush",0,[e]);!function(t,i,e,s){i.uV=t,t.sV=i,i.cV=e,i.oV=s}(t,e,s,r)}(this,t);var c=YI(t,"start",[this.sV]);a(c)}return w.defineProperty(t.prototype,"readable",{get:function(){if(!1===eb(this))throw lb("readable");return this.hV},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"writable",{get:function(){if(!1===eb(this))throw lb("writable");return this.rV},enumerable:!0,configurable:!0}),t}();function eb(t){return!!ni(t)&&!!w.prototype.hasOwnProperty.call(t,"sV")}function sb(t,i){Lu(t.hV.gG,i),nb(t,i)}function nb(t,i){ab(t.sV),qS(t.rV.pG,i),!0===t.IG&&rb(t,!1)}function rb(t,i){void 0!==t.nV&&t.aV(),t.nV=ZI((function(i){t.aV=i})),t.IG=i}var hb=function(){function t(){throw new b("TransformStreamDefaultController instances cannot be created directly")}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===ob(this))throw db("desiredSize");return pE(this.uV.hV.gG)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===ob(this))throw db("enqueue");ub(this,t)},t.prototype.error=function(t){if(!1===ob(this))throw db("error");!function(t,i){sb(t.uV,i)}(this,t)},t.prototype.terminate=function(){if(!1===ob(this))throw db("terminate");!function(t){var i=t.uV,e=i.hV.gG;!0===yE(e)&&vE(e);var s=new b("TransformStream terminated");nb(i,s)}(this)},t}();function ob(t){return!!ni(t)&&!!w.prototype.hasOwnProperty.call(t,"uV")}function ab(t){t.cV=void 0,t.oV=void 0}function ub(t,i){var e=t.uV,s=e.hV.gG;if(!1===yE(s))throw new b("Readable side is not in a state that permits enqueue");try{mE(s,i)}catch(t){throw nb(e,t),e.hV.cG}var n=function(t){return!0!==wE(t)}(s);n!==e.IG&&rb(e,!0)}function cb(t,i){return lr(t.cV(i),void 0,(function(i){throw sb(t.uV,i),i}))}function db(t){return new b("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function lb(t){return new b("TransformStream.prototype."+t+" can only be used on a TransformStream")}var fb,_b=class extends fh{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=t}};function gb(t){return function(t){return new Ft({start(i){for(const e of t)i.enqueue(e);i.close()}})}([t])}function wb(t){return gb(function(t){return new j(t)}(t))}function oi(t,i){return function(t,i){let e=i;const s=t.getReader(),n=new Rs,r=()=>{h();const t=new pe;s.cancel(t).catch(El),n.qb(t)},h=()=>{e&&(e.Gd(r),e=void 0)};e&&(e.Bd?r():e.Yd(r));const o=[],a=t=>t.done?(h(),Promise.resolve(o)):(o.push(t.value),Promise.resolve(s.read()).then(a));return Promise.resolve(s.read()).then(a).then((t=>{h(),n.Wb(t)}),(t=>{h(),n.qb(t)})),n.Zb}(t,i).then((t=>y_(t).buffer))}function Ab(t,i){let e=i;const{readable:s,writable:n}=new Ko,r=n.getWriter(),h=()=>{e&&e.Xd()};return r.closed.then(h,h),t.then((t=>(e=void 0,r.releaseLock(),t.pipeTo(n).catch(El))),(t=>(e=void 0,r.releaseLock(),n.abort(t).catch(El)))),s}function vb(t){const{readable:i,writable:e}=new Ko;return t.pipeTo(e,{preventCancel:!0}).catch((i=>{let e;e=Gt(i)?i[0]===i[1]||ut(i[0])&&ut(i[1])?i[0]:new _b(i):i,t.cancel(e).catch(El)})),i.tee()}function mb(t){return _a(new j(t))}function pb(t){return ug(t).buffer}!function(t){t[t.VI=0]="VI",t[t.dV=1]="dV"}(fb||(fb={}));var yb="content-type",Mb="text/plain;charset=UTF-8",Tb=class{WO(t){return this.DS(t).then(JSON.parse)}DO(t,i){switch(t){case Uv.YI:return this.cj(i);case Uv.GI:return this.WO(i);case Uv.VI:return this.lV();case Uv.Ru:return this.DS(i);default:throw new b}}};function Nb(t,i,e){if(t instanceof Tb)return t;if(t instanceof Ft)return function(t,i){return new Ib({Rg:0,lV:t,qz:Db(i)})}(t,e);const s=Db(e),n=Promise.resolve(t).then((t=>function(t,i){if(t){if("string"==typeof t)return{Rg:Uv.Ru,cS:t,qz:i||Mb};if(t instanceof ArrayBuffer||ba(t))return{Rg:Uv.YI,cS:xb(t),qz:i};if(Dd(t)||Gt(t))return{Rg:Uv.GI,cS:t,qz:i};throw new b("Unsupported BodyInit type")}return{Rg:Uv.Ru,cS:null,qz:i}}(t,s)));return new Ib({Rg:1,Zb:n,fV:i})}function Db(t){return(t.get(yb)||"").toLowerCase()}var Ib=class t extends Tb{get _V(){return this.gV}get wV(){return 0===this.AV.Rg}vV(){return this.mV.Zb}DS(t){return this.pV(Sb,t)}WO(t){return this.pV(bb,t)}cj(t){return this.pV(kb,t)}lV(){return this.yV(function(t){return 0===t.Rg?t.lV:Ab(t.Zb.then(Cb).then(wb),t.fV)}(this.AV))}pV(t,i){if(this.gV)return Promise.reject(new b("Already used"));this.gV=!0;const e=t(this.AV,i);return this.mV.Zd(e.then(El)),e}yV(t){if(this.gV)throw new b("Already used");if(t.locked)throw new b("Body stream is locked");this.gV=!0;const i=new Ko,e=Promise.resolve(t.pipeTo(i.writable));return this.mV.Zd(e),i.readable}MV(t){this.AV=t,1===t.Rg&&t.Zb.catch(El)}TV(){if(this.gV)throw new b("Already used");const i=function(t){if(0===t.Rg){const[i,e]=t.lV.tee();return[{Rg:t.Rg,lV:i,qz:t.qz},{Rg:t.Rg,lV:e,qz:t.qz}]}{const[i,e]=t.fV.Kd();return[{Rg:t.Rg,Zb:t.Zb,fV:i},{Rg:t.Rg,Zb:t.Zb,fV:e}]}}(this.AV),e=i[0],s=i[1];return this.MV(e),new t(s)}constructor(t){super(),this.gV=!1,this.mV=new Rs,this.mV.Zb.catch(El),this.MV(t)}};function Sb(t,i){return 0===t.Rg?oi(t.lV,i).then(mb):(i&&t.fV.Zd(i),Wi(t.Zb.then(Eb),t.fV))}function Eb(t){switch(t.Rg){case Uv.Ru:return Promise.resolve(t.cS||"");case Uv.YI:return Promise.resolve(t.cS).then(mb);case Uv.GI:return Promise.resolve(t.cS).then(JSON.stringify)}}function bb(t,i){return 0===t.Rg?Sb(t,i).then(JSON.parse):(i&&t.fV.Zd(i),Wi(t.Zb.then(Lb),t.fV))}function Lb(t){return t.Rg===Uv.GI?Promise.resolve(t.cS):Eb(t).then(JSON.parse)}function kb(t,i){return 0===t.Rg?oi(t.lV,i):(i&&t.fV.Zd(i),Wi(t.Zb.then(Cb),t.fV))}function Cb(t){switch(t.Rg){case Uv.YI:return Promise.resolve(t.cS);case Uv.Ru:case Uv.GI:return Eb(t).then(pb)}}function xb(t){return t instanceof ArrayBuffer?t:it(Zn(t)).buffer}var Ob=class extends Tb{get _V(){return this.NV._V}get wV(){return this.NV.wV}vV(){return this.NV.vV()}DS(t){return this.NV.DS(t)}WO(t){return this.NV.WO(t)}cj(t){return this.NV.cj(t)}lV(t){return this.NV.lV(t)}TV(){return this.NV.TV()}constructor(t){super(),this.NV=t}};function kr(t){return t.kI>=200&&t.kI<=299||304===t.kI}var Fr=class t extends Ob{zm(t){return this.DO(this.fS,t)}Em(){return new t({zm:this.TV(),SI:this.SI},this)}constructor(t,i){let e,s,n,r,h;i?(e=i.dS,s=i.fS,n=i.kI,r=i.HO,h=i.DV):(e=[],s=Uv.Ru,n=200,r="OK",h=!1);const o=t.SI,a=new Jh(t.dS||e),u=t.fS||s,c=t.IS||(i&&i.SI===o?i.IS:o.zu),d=i?i.NV:null;super(Nb(void 0!==t.zm?t.zm:d,t.fV||new na,a)),this.dS=a,this.SI=o,this.IS=c,this.fS=u,this.kI=void 0!==t.kI?t.kI:n,this.HO=void 0!==t.HO?String(t.HO):r,this.DV=t.DV||h}},jb=class{SI(t){const i=function(t){return new Fr({zm:null,dS:{},SI:t,IS:t.zu,fS:t.fS,kI:0,HO:l.fw})}(new Pc(t));return Promise.resolve(i)}ZF(t){}gn(){}};var zb=class t{static get SV(){return t.EV||(t.EV=new t(new jb)),t.EV}SI(t){const i=this.bV(t);return this.LV.SI(i)}ZF(t){return this.LV.ZF(this.kV(t))}bV(i){let e=new Pc(i);if(!this.CV){const i=t.xV(e.zu);e=new Pc({zu:i},e)}return e}kV(i){let e=i.zu;return this.CV||(e=t.xV(e)),{zu:e,cS:i.cS}}static xV(t){return i.OV&&Df(t,"http://")?t.replace(":","s:"):t}gn(){this.LV.gn()}constructor(t,i=!0){this.LV=t,this.CV=i}};function Pb(t){let i;return{get url(){return t.zu},get method(){return t.lS},get headers(){return i||(i=t.dS.WI()),i},get body(){return t.cS},get useCredentials(){return t.AS},get type(){return t.Rg},get subType(){return t.gS},get mediaType(){return t.wS},get responseType(){return t.fS}}}function Bb(t){switch(t.toLowerCase()){case"arraybuffer":return Uv.YI;case"json":return Uv.GI;case"stream":return Uv.VI;default:return Uv.Ru}}function Rb(t){switch(t.toUpperCase()){case"POST":return Nr.POST;case"PUT":return Nr.PUT;case"DELETE":return Nr.DELETE;case"HEAD":return Nr.HEAD;case"OPTIONS":return Nr.OPTIONS;default:return Nr.GET}}function Ub(t){switch(t.toLowerCase()){case"manifest":return iu.XI;case"segment":return iu.ZI;case"preload-hint":return iu.KI;case"content-protection":return iu.JI;default:return iu.rT}}function Qb(t){switch(t.toLowerCase()){case"initialization-segment":return Kt.$I;case"fairplay-license":return Kt.tS;case"fairplay-certificate":return Kt.iS;case"widevine-license":return Kt.eS;case"widevine-certificate":return Kt.sS;case"playready-license":return Kt.nS;case"clearkey-license":return Kt.rS;case"aes128-key":return Kt.hS;default:return Kt.rT}}function Fb(t){switch(t.toLowerCase()){case"audio":return Xn.ym;case"video":return Xn.pm;case"text":return Xn.Ru;case"image":return Xn.nT;default:return Xn.rT}}zb.EV=void 0;var Yb=class{get jV(){return this.zV.Zb}get va(){return this.Xa||(this.Xa=this.PV()),this.Xa}get BV(){return this.RV}get QV(){return!this.RV}get FV(){return this.YV>0}get bI(){return this.LI}Jm(){this.RV=!0,this.zV.Wb(null)}GV(){this.zV.qb(new _b(this.VV))}WV(t){if(!this.QV)throw new b("Cannot respond more than once");if(!Ut(t))throw new b("Expected valid response");this.LI=this.HV(t),this.Jm()}qV(){try{const t=this.XV(this.va);t?this.ZV(t):this.FV||this.BV||this.Jm()}catch(t){this.VV.push(t),this.GV()}}ZV(t){if(this.BV)throw new g("Request has been redirected or a response already exists");if(Sd(t))this.KV(t);else{if("function"!=typeof t)throw new b("Expected promise or function");{const i=new Rs,e=t=>{t?i.qb(t):i.Wb(void 0)};try{const s=t(e);Sd(s)&&i.Zd(s)}catch(t){i.qb(t)}this.KV(i.Zb)}}}async KV(t){try{this.YV++,await t,this.YV--,this.FV||this.BV||(this.VV.length?this.GV():this.Jm())}catch(t){this.YV--,this.VV.push(t),this.FV||this.BV||this.GV()}}constructor(t,i){this.JV=t,this.XV=i,this.zV=new Rs,this.VV=[],this.Xa=void 0,this.RV=!1,this.LI=void 0,this.YV=0}},Gb=class t extends Yb{get cS(){return this.$V}get dS(){return this.JV.dS}get SI(){return this.JV.SI}get bI(){return this.LI}get kI(){return this.JV.kI}get HO(){return this.JV.HO}get zu(){return this.JV.IS}static tW(t,i,e){const s=void 0===t.body?e:t.body;return new Fr({zm:s,SI:i.SI,fS:i.SI.fS,dS:t.headers,kI:t.status,HO:t.statusText,IS:t.url,DV:!0},i)}PV(){return function(t){let i;const e=Pb(t.SI);return{get closed(){return!t.QV},get request(){return e},get url(){return t.zu},get status(){return t.kI},get statusText(){return t.HO},get headers(){return i||(i=t.dS.WI()),i},get body(){return t.cS},respondWith:i=>t.WV(i),waitUntil:i=>t.ZV(i)}}(this)}HV(i){return t.tW(i,this.JV,this.$V)}constructor(t,i,e){super(t,i),this.$V=e,this.qV()}},Vb=class extends Yb{get cS(){return this.JV.cS}get QV(){return this.iW&&!this.RV}get dS(){return this.JV.dS}get lS(){return this.JV.lS}get eW(){return this.sW}get bI(){return this.LI}get fS(){return this.JV.fS}get CI(){return this.JV.CI}get _S(){return this.JV._S}get Hd(){return this.JV.Hd}get Rg(){return this.JV.Rg}get gS(){return this.JV.gS}get wS(){return this.JV.wS}get zu(){return this.JV.zu}get AS(){return this.JV.AS}get mS(){return this.JV.mS}get vS(){return this.JV.vS}get jg(){return this.JV.jg}PV(){return function(t){let i;return{get url(){return t.zu},get method(){return t.lS},get headers(){return i||(i=t.dS.WI()),i},get body(){return t.cS},get closed(){return!t.QV},get useCredentials(){return t.AS},get type(){return t.Rg},get subType(){return t.gS},get mediaType(){return t.wS},get responseType(){return t.fS},redirect:i=>t.nW(i),respondWith:i=>t.WV(i),waitUntil:i=>t.ZV(i)}}(this)}HV(t){const i=this.JV.cS,e=new Fr({zm:i,dS:{},SI:this.JV,IS:this.JV.zu,fS:this.JV.fS,kI:200,HO:"OK"});return Gb.tW(t,e,i)}nW(t){if(!this.QV)throw new b("Cannot redirect, already redirected or has a response");let i;i=Qs(t)?{url:t}:t,this.sW=function(t,i){return new Pc({zu:void 0===t.url?i.zu:t.url,lS:void 0!==t.method?Rb(t.method):void 0,dS:t.headers,cS:t.body,AS:t.useCredentials,Rg:void 0!==t.type?Ub(t.type):void 0,gS:void 0!==t.subType?Qb(t.subType):void 0,wS:void 0!==t.mediaType?Fb(t.mediaType):void 0,fS:void 0!==t.responseType?Bb(t.responseType):void 0},i)}(i,this.JV),this.Jm()}constructor(t,i,e){super(t,i),this.sW=void 0,this.iW=e,this.qV()}};var ia,Wb=class extends zb{rW(t){this.hW.rW(t)}oW(t){this.hW.oW(t)}aW(t){this.hW.aW(t)}LU(t){this.hW.LU(t)}OU(t){this.hW.OU(t)}constructor(t,i=!0){const e=new Hb(t);super(e,i),this.hW=e}},Hb=class{async SI(t){let i;try{i=await this.uW(t,t.Hd)}catch(i){if(i instanceof xt)return await this.cW(i,t.Hd);throw i}if(i=await this.dW(i,t.Hd),kr(i))return i;throw new Sv(i)}ZF(t){return this.LV.ZF(t)}async uW(t,i){Bo(i);let e,s=t;for(const t of this.lW.slice()){Bo(i);const n=new Vb(s,t,!e);if(!n.BV)try{await n.jV}catch(t){0;continue}n.eW&&!e?s=n.eW:n.bI&&!e&&(e=n.bI)}return e||this.LV.SI(s)}async cW(t,i){let e;if(t instanceof Sv)e=t.bI;else{const i=t.SI;e=new Fr({zm:null,SI:i,fS:i.fS,kI:0,HO:""})}const s=await this.dW(e,i);if(s===e)throw t;if(kr(s))return s;throw new Sv(s)}async dW(t,i){let e=t;for(const t of this.fW.slice()){Bo(i);const s=await Promise.resolve(e.Em().zm(i)),n=new Gb(e,t,s);if(!n.BV)try{await n.jV}catch(t){0;continue}e=n.bI||e}return e}rW(t){this.lW.unshift(t)}oW(t){this.lW.push(t)}aW(t){To(this.lW,t)}LU(t){this.fW.unshift(t)}OU(t){To(this.fW,t)}gn(){this.LV.gn(),No(this.lW),No(this.fW)}constructor(t){this.lW=[],this.fW=[],this.LV=t}},qb=class{get va(){return this.Xa||(this.Xa=function(t){return{addRequestInterceptor(i){t.rW(i)},removeRequestInterceptor(i){t.aW(i)},addResponseInterceptor(i){t.LU(i)},removeResponseInterceptor(i){t.OU(i)}}}(this)),this.Xa}rW(t){this.NS.rW(t)}aW(t){this.NS.aW(t)}LU(t){this.NS.LU(t)}OU(t){this.NS.OU(t)}constructor(t){this.NS=t}},Xb=class extends Pl{get va(){return this.Xa||(this.Xa=function(t){return{get online(){return t.Uf},get estimator(){return function(t){return{get bandwidth(){return t.wz},get roundTripTime(){return t.Az}}}(t._W)},setEstimator(i){t.gW(function(t){if(!t)return;return{get wz(){return Zl(t.bandwidth)},get Az(){return Zl(t.roundTripTime)},vz:i=>function(t){if(!t)return;return{wW(i){t.markRequestStart(i)},AW(i){t.markResponseStart(i)},vW(i,e){t.markResponseData(i,e)},mW(i){t.markResponseEnd(i)}}}(t.createMeasurer(Pb(i)))}}(i))},addRequestInterceptor(i){t.rW(i)},removeRequestInterceptor(i){t.aW(i)},addResponseInterceptor(i){t.LU(i)},removeResponseInterceptor(i){t.OU(i)},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}(this)),this.Xa}get Uf(){return this.pW.Uf}get _W(){return this.PB._W}gW(t){this.PB.gW(t)}rW(t){this.NS.rW(t)}aW(t){this.NS.aW(t)}LU(t){this.NS.LU(t)}OU(t){this.NS.OU(t)}gn(){this.Vo(),this.pW.fn(l._w,this.yW),this.pW.fn(l.fw,this.MW)}constructor(t,i,e){super(i),this.pW=t,this.NS=i,this.PB=e,this.yW=t=>{this.Co(t)},this.MW=t=>{this.Co(t)},this.pW.yn(l._w,this.yW),this.pW.yn(l.fw,this.MW)}};!function(t){t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth"}(ia||(ia={}));function Zb(t,i,e,s,n,r){const h=[];let o=t-_.max(r,1),a=t+n;if(i&&e){const t=os(e,1,5),s=i-t;o=_.min(o,s);const n=i+e+t;a=_.max(a,n)}0!==o&&s.wB(0,o)&&h.push([0,o]);return s.wB(a,1/0)&&h.push([a,1/0]),h}function vr(t){return t instanceof g&&"QuotaExceededError"===t.name}var Kb={type:ia.BANDWIDTH};function Jb(t){const i=ms(Kb);return Qs(t)?i.type=$b(t):Ut(t)&&function(t){switch(t){case ia.PERFORMANCE:case ia.QUALITY:case ia.BANDWIDTH:return!0;default:return!1}}(t.type)&&(i.type=$b(t.type)),Ut(t)&&Ut(t.metadata)&&(i.metadata=function(t){const i={},e=Na(t.bitrate);return S(e)||(i.bitrate=e),i}(t.metadata)),i}function $b(t){switch(t){case"bandwidth":return ia.BANDWIDTH;case"performance":return ia.PERFORMANCE;case"quality":return ia.QUALITY}}var tL=class extends wn{constructor(t){super("TW"),this.NW=t}},iL=class extends wn{constructor(t){super("DW"),this.IW=t}},eL=class extends wn{constructor(t){super("SW"),this.EW=t}},sL=class extends Pl{bW(t){this.LW=t}get kW(){switch(this.xW.type){case ia.PERFORMANCE:return 0;case ia.QUALITY:return 1/0;case ia.BANDWIDTH:return this.xW.metadata&&void 0!==this.xW.metadata.bitrate?this.xW.metadata.bitrate:Vo.Ib.ez();default:return Vo.Ib.ez()}}get va(){return this.Xa}get IW(){return this.xW}set IW(t){this.xW=t,this.Co(new iL(t))}get NW(){return this.OW}set NW(t){this.OW=t,this.Co(new tL(t))}get jW(){return _.min(this.OW,this.zW)}get EW(){return this.PW}set EW(t){this.PW=t,this.Co(new eL(t))}get BW(){return this.zW}get _W(){var t;return null!=(t=this.RW)?t:this.LW.Vz}gW(t){this.RW=t}UW(t){let i=_.min(t,.8*this.zW);if(i=_.max(10,i),this.zW===i)return!1;const e=this.jW;this.zW=i;const s=this.jW;return s!==e&&this.Co(new tL(s)),!0}get QW(){return this.FW}set QW(t){this.FW=t}constructor(...t){super(...t),this.Xa=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.IW)},set strategy(i){t.IW=Jb(i)},get targetBuffer(){return t.NW},set targetBuffer(i){const e=Na(i);S(e)||(t.NW=e)},get bufferLookbackWindow(){return t.EW},set bufferLookbackWindow(i){const e=Na(i);S(e)||(t.EW=e<=0?30:e)},get maxBufferLength(){return t.BW},get clearBufferWhenSettingTargetQuality(){return t.QW},set clearBufferWhenSettingTargetQuality(i){t.QW=Ws(i)}}}(this),this.xW=Kb,this.OW=20,this.PW=30,this.zW=1/0,this.FW=!1,this.RW=void 0}},nL=class extends yo{fa(){return new rL}constructor(){super("W_")}},rL=class extends wn{constructor(){super("change")}},hL=class extends Pl{gn(){this.Vo();for(const t of this.HB)this.YW.fn(t,this.GW)}constructor(t,i,e){super(e),this.GW=t=>{Rl(t)&&ac((()=>{this.Co(t.va)}))},this.YW=t,this.HB=i;for(const t of this.HB)this.YW.yn(t,this.GW)}},Vh=class extends Ys{gn(){this.Vo(),this.YW.cf(this.GW)}constructor(t,i){super(i),this.GW=t=>{Rl(t)&&ac((()=>{this.Co(t.va)}))},this.YW=t,this.YW.sf(this.GW)}};var oL=class extends Ys{get GT(){return this.tN}set GT(t){if(this.VT<=t)throw new g("Start time of a clip should be smaller than the end time.");this.tN!==t&&(this.tN=t,this.Co(new nL))}get VT(){return this.sN}set VT(t){if(t<=this.GT)throw new g("End time of a clip should be larger than the start time.");this.sN!==t&&(this.sN=t,this.Co(new nL))}get va(){return this.Xa||(this.Xa=function(t){let i,e={get startTime(){return t.GT},set startTime(i){t.GT=i},get endTime(){return t.VT},set endTime(i){t.VT=i},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Vh(t,e),e}(this)),this.Xa}tr(){0===this.tN&&this.sN===1/0||(this.tN=0,this.sN=1/0,this.Co(new nL))}VW(){return new Ai([this.GT,this.VT],[!0,!0])}constructor(...t){super(...t),this.tN=0,this.sN=1/0}},aL=class t extends Qo{Nf(t){const i=this.WW.VW().rB(t);super.Nf(i),this.HW()}Sf(){return super.Sf()||this.qW}get XW(){return this.i_().length?this.i_():this.WW.VW().ks()}i_(){return Ai.xn(super.i_()).Sn(this.WW.VW()).ks()}p_(){this.Sf()?this.Nf(this.XW.start(0)):this.ZW(),super.p_(),this.HW()}async ga(t,i){Bo(i),this.qW=!1,this.WW.tr(),await super.ga(t,i)}gn(){return this.WW.fn("W_",this.KW),this._f.fn(l.Sw,this.wc),this.JW(),super.gn()}E_(t){switch(t.type){case l.yw:return this.Co(t),this.$W(),!0;case l.pw:case l.Zg:return this.Co(t),this.tH(),!0;case l.Jg:if(this.iH)return!0}return super.E_(t)}get iH(){return this.WW.VT<this.ct}JW(){this.eH&&(gn(this.eH),this.eH=void 0)}HW(){const i=this.Mf,e=this.iH&&i>=this.WW.VT-t.Zl;this.qW&&!e?(this.qW=!1,this.Ff&&this.p_()):this.qW||!e||this.e_||this.sH||(this.qW=!0,this.Co(new ie(i)),this.m_())}ZW(){if(this.ct===1/0)return;const i=this.XW,e=Ai.xn(i).rB(this.Mf);Ua(this.Mf,e,t.Zl)||this.Nf(e)}constructor(i,e){super(i),this.qW=!1,this.eH=void 0,this.sH=!1,this.KW=()=>{this.ZW(),this.HW()},this.wc=()=>{this.JW(),this.HW();this.iH&&this.Mf>=this.WW.VT-t.nH&&!this.If&&(this.eH=_r(this.wc))},this.$W=()=>{this.sH=!0},this.tH=()=>{this.sH&&(this.sH=!1,this.HW())},this.WW=e,this.WW.yn("W_",this.KW),this._f.yn(l.Sw,this.wc)}};aL.nH=1,aL.Zl=.001;var uL=class{get rH(){return this.hH}set rH(t){this.hH=t}constructor(){this.hH=!1}},cL=class extends Qo{Sf(){return!this.hH.rH&&super.Sf()}m_(){this.oH=!0,super.m_()}p_(){this.oH=!1,super.p_()}E_(t){if(this.hH.rH)switch(t.type){case l.Jg:return this.Mf=0,this.oH||(this.e_?this.aH=!0:this.p_()),!0;case l.pw:this.aH&&(this.aH=!1,this.p_());break;case l.Sh:if(this.aH||super.Sf())return!0}return super.E_(t)}constructor(t,i){super(t),this.aH=!1,this.oH=!1,this.hH=i}};var dL=class{get va(){return this.Xa}get AT(){return this.Qo.jf.AT}get mT(){return this.Qo.jf.mT}get wT(){return this.Qo.jf.wT}get uH(){throw new g("Not implemented")}get cH(){throw new g("Not implemented")}get pT(){return this.Qo.jf.pT}get vT(){return this.Qo.jf.vT}get yT(){return this.Qo.jf.yT}constructor(t){this.Qo=t,this.Xa=function(t){return{get currentBandwidthEstimate(){return t.mT},get corruptedVideoFrames(){return t.AT},get droppedVideoFrames(){return t.wT},get totalBytesLoaded(){return t.pT},get bufferedSegments(){return t.yT}}}(this)}};function lL(t){if(!t||!me(t))return{wT:0,AT:0,vT:0,mT:0,pT:0,yT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const i=t.getVideoPlaybackQuality();return{wT:i.droppedVideoFrames,AT:i.corruptedVideoFrames||0,vT:i.totalVideoFrames}}return{wT:t.webkitDroppedFrameCount||0,AT:0,vT:t.webkitDecodedFrameCount||0}}var fL=class extends yo{fa(){return new _L}constructor(){super("dH")}},_L=class extends wn{constructor(){super("castingchange")}};var gL=class extends Pl{get lH(){var t,i;return(null==(t=this.fH)?void 0:t.lH)||(null==(i=this._H)?void 0:i.lH)||!1}get gH(){return this.fH}get wH(){return this._H}AH(t){this.fH=t,this.vH(t)}mH(t){this._H=t,this.vH(t)}vH(t){t.yn("statechange",this.pH)}yH(t){t.fn("statechange",this.pH)}get va(){return this.Xa||(this.Xa=function(t){let i;const e={get casting(){return t.lH},get airplay(){var i;return null==(i=t.gH)?void 0:i.va},get chromecast(){var i;return null==(i=t.wH)?void 0:i.va},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new hL(t,["dH"],e),e}(this)),this.Xa}gn(){this.Vo(),this.fH&&(this.yH(this.fH),this.fH=void 0),this._H&&(this.yH(this._H),this._H=void 0)}constructor(...t){super(...t),this.fH=void 0,this._H=void 0,this.MH=!1,this.Xa=void 0,this.pH=()=>{const t=this.MH,i=this.lH;t!==i&&(this.MH=i,this.Co(new fL))}}},wL=class{static async TH(t,i){try{const e=new Pc({zu:t,fS:Uv.Ru,lS:Nr.GET}),s=await i.SI(e);return(await s.zm()).trim()}catch(t){return void ut(t)}}static NH(t){try{const i=GD(t);return new U(i.key,i.domains_page,i.domains_source,i.expiration_date,i.features,i.customer_id,i.generation_date,i.sdks,i.send_impression)}catch(t){throw new $i(Ui.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static DH(t){void 0===t&&(t=jD.lh),i.SA("The baked-in license is used. Please update the configuration with your license.");const e=t.CQ("F2b-iL'[FL[S"),s=JSON.parse('["F$(:_L50F|aY"]').map((i=>t.CQ(i))),n=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map((i=>t.CQ(i))),r=Number(new Date(Number(t.CQ('COD|aHpHa:p3Ceo3Co""')))),h=JSON.parse("[]").map((i=>t.CQ(i)));return new U(e,s,n,r,h)}static convertLicenseToDummyLicense(t){return new U(t.QQ,t.FQ,t.YQ,864e13,t.VQ,t.WQ,Date.now(),t.qQ,t.XQ)}},jc=class t{static hQ(){return t.Ib||(t.Ib=AL.qC()?new AL:new O),t.Ib}static Vb(i){t.hQ().Vb(i)}static rQ(){t.hQ().rQ()}static Fb(i){return t.hQ().Fb(i)}static Kj(i,e){t.hQ().Kj(i,e)}static IH(i){const e=t.Fb(i);if(void 0!==e)return C(e)}static SH(i){return"true"===t.Fb(i)}};jc.Ib=void 0;var AL=class extends jc{static qC(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}Vb(t){self.localStorage.removeItem(t)}rQ(){self.localStorage.clear()}Fb(t){var i;return null!=(i=self.localStorage.getItem(t))?i:void 0}Kj(t,i){self.localStorage.setItem(t,i)}},vL="https://validate.theoplayer.com/1/",mL=72e5,pL=_.floor(14399999*_.random()-mL),yL="THEOplayer.license",ML=class{async EH(){const t=await this.bH(this.LH.license,this.LH.licenseUrl);this.BF.kH(t)}async bH(t,i){let e,s=i;t?e=wL.NH(t):s||(e=wL.DH()),s||(s=vL+e.QQ);const n=this.CH();let r;if(e&&(r=this.xH.rF(e),r===ne.BQ)){if(this.OH(e.GQ)&&this.OH(null==n?void 0:n.GQ)){const t=await this.jH(s);if(t)return t}return e}if(n){if(this.xH.rF(n)===ne.BQ){if(this.OH(null==n?void 0:n.GQ)){const t=await this.jH(s);if(t)return t}return n}jc.Vb(yL)}const h=await wL.TH(s,this.NS);let o;if(h){o=wL.NH(h);if(this.xH.rF(o)===ne.BQ)return jc.Kj(yL,h),o;jc.Vb(yL)}else if(!this.dF&&e&&r===ne.RQ&&s===vL+e.QQ)return wL.convertLicenseToDummyLicense(e);if(!e&&!o)throw new $i(Ui.LICENSE_ERROR,"The given license is invalid!");this.zH(null!=e?e:o,new $i(Ui.LICENSE_ERROR,"The given license is invalid!"))}async $Q(t){let i=await this.BF.PF();if(this.OH(i.GQ)){var e;const t=null!=(e=this.LH.licenseUrl)?e:vL+i.QQ,s=await this.jH(t);s&&(this.BF.kH(s),i=s)}try{const e=this.xH.rF(i);if(e===ne.UQ){const t=qD.ZQ;throw new $i(ZD(t),hi.sF(t))}if(e===ne.RQ){const t=qD.RQ;throw new $i(ZD(t),hi.sF(t))}this.xH.$Q(t,i)}catch(t){this.PH(t)}}async nF(t){const i=await this.BF.PF();try{this.xH.nF(t,i)}catch(t){this.PH(t)}}async jH(t){try{const i=await wL.TH(t,this.NS);if(void 0===i)return;const e=wL.NH(i);return this.xH.rF(e)===ne.BQ?(jc.Kj(yL,i),e):void 0}catch(t){return}}OH(t){return!t||Number(new Date)+2592e5+pL>=t}CH(){const t=jc.Fb(yL);if(t)return wL.NH(t)}zH(t,i){this.BF.kH(t),this.PH(i)}PH(t){throw xD(t.message),this.BH.QF(t.message),t}constructor(t,i,e,s,n,r){this.NS=t,this.xH=i,this.BH=e,this.BF=s,this.LH=n,this.BL=r,this.dF=iI(r)}},TL=class{kH(t){this.RH=t,this.UH.Wb()}get QH(){return this.RH}async PF(){return this.RH?Promise.resolve(this.RH):(await this.UH.Zb,this.RH)}constructor(){this.UH=new Rs}},NL=class extends yo{fa(){return new DL}constructor(){super("W_")}},DL=class extends wn{constructor(){super("change")}};function IL(t){let i;const e={get fontFamily(){return t.FH},set fontFamily(i){t.FH=i},get fontColor(){return t.YH},set fontColor(i){t.YH=i},get fontSize(){return t.GH},set fontSize(i){t.GH=i},get backgroundColor(){return t.VH},set backgroundColor(i){t.VH=i},get windowColor(){return t.WH},set windowColor(i){t.WH=i},get edgeStyle(){return t.HH},set edgeStyle(i){t.HH=i},get marginTop(){return t.qH},set marginTop(i){t.qH=i},get marginBottom(){return t.XH},set marginBottom(i){t.XH=i},get marginLeft(){return t.ZH},set marginLeft(i){t.ZH=i},get marginRight(){return t.KH},set marginRight(i){t.KH=i},addEventListener(t,e){const s=ln(t,Va);i.yn(s,e)},removeEventListener(t,e){const s=ln(t,Va);i.fn(s,e)}};return i=new wt(e),t.yn(["W_"],(t=>i.Co(t.va))),e}var SL={FH:void 0,YH:void 0,GH:void 0,VH:void 0,WH:void 0,HH:void 0,JH:void 0,qH:void 0,XH:void 0,ZH:void 0,KH:void 0},ti="THEOplayer.textTrackStyle.",EL=class t extends Pl{get $H(){return this.tq}get FH(){return this.tq.FH}set FH(t){this.Yn({FH:t})}get YH(){return this.tq.YH}set YH(t){this.Yn({YH:t})}get GH(){return this.tq.GH}set GH(t){this.Yn({GH:t})}get VH(){return this.tq.VH}set VH(t){this.Yn({VH:t})}get WH(){return this.tq.WH}set WH(t){this.Yn({WH:t})}get HH(){return this.tq.HH}set HH(t){this.Yn({HH:t})}get JH(){return this.tq.JH}get qH(){return this.tq.qH}set qH(t){this.Yn({qH:t})}get XH(){return this.tq.XH}set XH(t){this.Yn({XH:t})}get KH(){return this.tq.KH}set KH(t){this.Yn({KH:t})}get ZH(){return this.tq.ZH}set ZH(t){this.Yn({ZH:t})}get va(){return this.Xa||(this.Xa=IL(this)),this.Xa}Yn(i){this.tq=Tt({},this.tq,i),t.iq(this.tq),this.Co(new NL)}static nq(){let t=Tt({},SL);return t.FH=jc.Fb(ti+"fontFamily")||t.FH,t.YH=jc.Fb(ti+"fontColor")||t.YH,t.GH=jc.Fb(ti+"fontSize")||t.GH,t.VH=jc.Fb(ti+"backgroundColor")||t.VH,t.WH=jc.Fb(ti+"windowColor")||t.WH,t.HH=jc.Fb(ti+"edgeStyle")||t.HH,t}static iq(t){jc.Kj(ti+"fontFamily",t.FH||""),jc.Kj(ti+"fontColor",t.YH||""),jc.Kj(ti+"fontSize",t.GH||""),jc.Kj(ti+"backgroundColor",t.VH||""),jc.Kj(ti+"windowColor",t.WH||""),jc.Kj(ti+"edgeStyle",t.HH||"")}constructor(){super(),this.Xa=void 0,this.tq=t.nq()}};function bL(t,i){var e,s;t.style.marginLeft=(null!=(e=i.ZH)?e:0)+"px",t.style.marginRight=(null!=(s=i.KH)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}var _e,LL=[l.jh,l.Sh,er.Rw,l.Sw,l.gw,l.cw,l.yw,l.pw,l.Jg,l.ww,l.Ew,l.Xg,er.H_,l.mw,hh.ha,fe.Kg,fe.Bb,l.Wg,l.Vg,l.Lw,l.hw,l.aw,l.ew,l.$g],kL={rq:!1};function CL(t){return t.wd.Rg===wi.Hx}(_e||(_e={})).hq="oq";var ji,re=["oq"];!function(t){t[t.aq=0]="aq",t[t.VI=1]="VI",t[t.uq=2]="uq"}(ji||(ji={}));var An,xL=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"];!function(t){t.tU="cq",t.dq="lq"}(An||(An={}));var OL=class extends Pl{get ht(){throw new g("Not implemented")}get wd(){return this.lx}get Uz(){return this.Ox}get rt(){throw new g("Not implemented")}async fq(t,i){const e=await this.YC.FC(t.Sb,i),s=await e.LC();return await this._q(s),s}gq(t){const i=this.IC;return i?0!==t.Xz.length&&t.Xz.some((t=>t.ZA.Sb===i.ZA)):0!==this.lx.Xz.length?t.Xz.some((t=>this.lx.Xz.some((i=>t.ZA===i.ZA)))):0===t.Xz.length||!this.wq}Aq(t){return this.vq.Aq(t),this.lx=t,Promise.resolve()}mq(t){return!1}async Qd(){this.Vo(),this.Ox.removeEventListener("loadedmetadata",this.pq);for(const t of xL)this.Ox.removeEventListener(t,this.yq);await this.Mq.gn(),this.Tq(),await this.vq.tr(),await this.Nq(void 0)}Dq(t){t!==this.Iq&&(this.Iq=t,t?this.Sq.Wb(void 0):this.Sq=new Rs)}_q(t){return this.Mq.Mx((()=>this.Nq(t)))}async Nq(t){if(t&&!this.Ox.src&&!this.Ox.srcObject)throw new Qr(Ui.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&(this.Ox.src||this.Ox.srcObject))throw new Qr(Ui.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this.Iq&&await this.Sq.Zb;const i=this.IC;i&&(await i.EC(this.Ox),this.IC=void 0),t&&(await t.bn(this.Ox),this.IC=t)}ga(t){return this.Mq.Mx((()=>this.Eq(t)))}Eq(t){this.Dq(!1);const i=this.sA.Gf;if(function(t){if(void 0!==s.ManagedMediaSource&&t instanceof s.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&Vt.Ga&&Vt.qE>=17}(this.Ox))try{this.Ox.srcObject=t}catch(i){this.Ox.src=URL.createObjectURL(t)}else this.Ox.src=URL.createObjectURL(t);else this.Ox.src=t;this.sA.Gf=i}bq(t){return this.Mq.Mx((()=>this.Lq(t)))}Lq(t){this.Eq(t),this.Ox.load()}Tq(){this.Dq(!1),EM(this.Ox)}async kq(){this.IC&&await this.IC.tr()}constructor(t,i,e,s){super(),this.Iq=!1,this.Sq=new Rs,this.wq=!1,this.Mq=new jn,this.IC=void 0,this.pq=()=>{this.wq=!0},this.yq=()=>{this.Dq(!0)},this.lx=t,this.sA=i,this.Ox=i.Uz,this.vq=e,this.YC=s,this.Ox.addEventListener("loadedmetadata",this.pq);for(const t of xL)this.Ox.addEventListener(t,this.yq)}};var jL,zL=class extends OL{get wf(){return Ai.xn(this.Ox.buffered)}get ct(){return this.Ox.duration}get Cq(){const t=this.ct;if(!isFinite(t))return!1;const i=this.wf;if(0===i.U)return!1;return t-i.jn(i.U-1)<Ac}get Xf(){return this.Ox.preload}set Xf(t){this.Ox.preload=t}get t_(){return Ai.xn(this.Ox.seekable)}get xq(){return this.wf}get Oq(){if(me(this.Ox)&&(this.Ox.videoWidth>0||this.Ox.videoHeight>0))return this.wf}async bW(){const t=this.wd;switch(t.Kz){case Kr.bA:case Kr.LA:this.Ox.setAttribute("crossorigin",t.Kz);break;case Kr.EA:default:this.Ox.removeAttribute("crossorigin")}void 0!==t.Xf?this.Ox.preload=t.Xf:this.Ox.preload=Qe.gz,void 0!==t.Jz?this.Ox.title=t.Jz:NM(this.Ox),await this.ga(t.Ug),this.vq.$n(this,t)}gq(t){return!1}Aq(t){return Promise.resolve(void 0)}async Qd(){NM(this.Ox),await super.Qd()}static jq(t,i){return!!i.canPlayType&&Boolean(i.canPlayType(t.qz))}},ki=class extends wn{constructor(t){super(l.gw),this.currentTime=t}},kn=class extends wn{constructor(){super(l.cw)}};(jL||(jL={})).zq="Pq";var PL=class extends wn{constructor(t){super("Pq"),this.Bq=t}},br=class extends Pl{get Rq(){return this.Uq}Qq(t,i){const e=new Ai([t,i]);this.Uq=this.Uq.cB(e),this.Co(new PL(e))}Fq(t,i){this.Uq=this.Uq.lB(new Ai([t,i]))}tr(){this.Uq=Ai.SB()}gn(){this.Vo()}constructor(...t){super(...t),this.Uq=Ai.SB()}};var BL,RL=class{start(t){this.UH=t,this.Yq()&&this.Gq()}pull(){this.vG.length>0?this.Vq():this.Wq=!0,this.Yq()&&this.Gq()}cancel(t){return No(this.vG),this.mG=0,this.Wq=!1,this.uG.cancel(t)}Vq(){if(0===this.vG.length)return;const t=this.vG;this.vG=[],this.mG=0,this.Wq=!1,this.UH.enqueue(t)}Yq(){if(this.Wq)return!0;return this.Hq-this.mG>0}Gq(){if(this.qq)return;const t=this.uG.read().then(this.Xq).catch(this.Zq);this.qq=t;const i=()=>{this.qq===t&&(this.qq=void 0)};t.then(i,i)}constructor(t,{size:i=(()=>1),highWaterMark:e=1}){this.vG=[],this.mG=0,this.UH=void 0,this.Wq=!1,this.qq=void 0,this.Xq=t=>t.done?(this.Vq(),void this.UH.close()):(this.vG.push(t.value),this.mG+=this.Kq(t.value),this.Wq&&this.Vq(),this.Yq()?this.uG.read().then(this.Xq):void 0),this.Zq=t=>{this.Vq(),this.UH.error(t)},this.uG=t.getReader(),this.Kq=i,this.Hq=e}},UL=class{Jq(t){this.$q.push(t),this.rp+=t.byteLength}tX(t){if(this.rp<=t)return this.iX();const i=this.$q;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.slice(0,s);if(s<i.length&&e<t){const r=t-e;0,n.push(Xc(i[s],0,r)),e+=r}return{$q:n,rp:e}}eX(t){const i=this.tX(t);return 1===i.$q.length?i.$q[0]:jl(i.$q,i.rp)}iX(){return{$q:this.$q,rp:this.rp}}sX(t){if(this.rp<=t)return this.nX();const i=this.$q;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.splice(0,s);if(i.length>0&&e<t){const s=t-e;0,n.push(Xc(i[0],0,s)),i[0]=Xc(i[0],s),e+=s}return this.rp-=e,{$q:n,rp:e}}rX(t){const i=this.sX(t);return 1===i.$q.length?i.$q[0]:jl(i.$q,i.rp)}nX(){const t=this.iX();return this.$q=[],this.rp=0,t}hX(){const t=1===this.$q.length?this.$q[0]:jl(this.$q,this.rp);return this.$q=[],this.rp=0,t}constructor(){this.$q=[],this.rp=0}};!function(t){t[t.oX=0]="oX",t[t.aX=1]="aX",t[t.uX=2]="uX"}(BL||(BL={}));var QL=class{cX(t,i){}dX(){}lX(t){this.vG.Jq(t),this.fX(!1)}_X(){this.fX(!0)}gX(){return 0!==this.ja||0!==this.vG.rp}fX(t){for(;0!==this.vG.rp;){if(!t&&this.wX>this.vG.rp)return;switch(this.ja){case 0:this.AX(t);break;case 1:this.vX(t);break;case 2:this.mX(t)}}}pX(){this.ja=0,this.wX=8}AX(t){const i=ha(this.vG.eX(this.wX)),e=new L,s=At.sp(i,e);if(!s.Jm)return this.wX=s.hp,void(t&&this.wX>this.vG.rp&&this.yX(this.vG.rp));const n=s.np.Rg;let r=s.np.rp;0===r&&(r=1/0),this.cX(n,r),this.MX(n)?this.TX(r):this.yX(r)}TX(t){this.ja=1,this.wX=t}vX(t){const i=ha(this.vG.rX(this.wX)),e=new L,s=At.$m(i,e,!t);if(!s.Jm)throw new gl(e.Ku);this.dX(),this.NX(s.tp),this.pX()}yX(t){this.ja=2,this.wX=0,this.DX=t}mX(t){const i=this.vG.sX(this.DX);this.DX-=i.rp;for(const t of i.$q)this.IX(t);(0===this.DX||t&&this.DX===1/0)&&(this.dX(),this.pX())}constructor(){this.vG=new UL,this.ja=0,this.wX=0,this.DX=0,this.pX()}};function FL(t){return t instanceof ny}function YL(t){return t instanceof ey}function GL(t){return t instanceof se||t instanceof On}function VL(t){return t instanceof Ip}function WL(t){return t instanceof sp}function HL(t){return t instanceof qp}function qL(t){return t instanceof Wp}function XL(t){return t instanceof ly}function ZL(t){return t instanceof Is}function KL(t){return t instanceof Ie}function JL(t){return t instanceof zn}function $L(t,i){const e=Zt(t.boxes,KL);if(e&&e.flags.baseDataOffsetPresent)e.baseDataOffset=e.baseDataOffset.add(i);else for(const e of t.boxes)e instanceof zn&&e.flags.dataOffsetPresent&&(e.dataOffset=e.dataOffset+i)}var tk=class extends QL{start(t){this.UH=t}transform(t){this.lX(t)}flush(){this._X()}MX(t){return t===Po.Av||t===Po.Jv||t===Po._m}NX(t){const i=this.SX(t);this.UH.enqueue(i)}IX(t){this.UH.enqueue(t)}SX(t){const i=Zn(t.zm.zm);switch(t.Rg){case"moov":return this.EX(i);case"sidx":return this.bX(i);case"moof":return this.LX(i)}return i}get kX(){if(void 0===this.CX)throw new g("Expected to have found a movie header timescale.");return this.CX}xX(t){const i=this.OX.get(t);if(void 0===i)throw new g("Expected to have found a media header timescale for track ID "+t+".");return i}EX(t){const i=by(t);for(let t=0;t<i.boxes.length;t++){const e=i.boxes[t];e instanceof Kp?i.boxes[t]=this.jX(e):e instanceof Jp?i.boxes[t]=this.zX(e):e instanceof ey&&this.PX(e)}for(const t of i.boxes)t instanceof qp&&this.BX(t);return i.serialize().join()}jX(t){this.CX=t.timescale;const i=ek(qo.fromNumber(t.duration,!0),this.kX,this.RX);return 0!==i.getHighBits()?this.zX(function(t){return new Jp({creation:qo.fromNumber(t.creationTime,!0),modification:qo.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:qo.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.RX,t.duration=i.toInt(),t)}zX(t){return this.CX=t.timescale,t.timescale=this.RX,t.duration=ek(t.duration,this.kX,this.RX),t}PX(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof se?(i=s.trackId,t.boxes[e]=this.UX(s)):s instanceof On?(i=s.trackId,t.boxes[e]=this.QX(s)):s instanceof Ip?this.FX(s,i):s instanceof gp&&this.YX(s)}}UX(t){const i=ek(qo.fromNumber(t.duration,!0),this.kX,this.RX);return 0!==i.getHighBits()?this.QX(function(t){return new On({creation:qo.fromNumber(t.creationTime,!0),modification:qo.fromNumber(t.modificationTime,!0),duration:qo.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=i.toInt(),t)}QX(t){return t.duration=ek(t.duration,this.kX,this.RX),t}FX(t,i){for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof Mp?t.boxes[e]=this.GX(s,i):s instanceof Tp&&(t.boxes[e]=this.VX(s,i))}}GX(t,i){this.OX.set(i,t.timescale);const e=ek(qo.fromNumber(t.duration,!0),t.timescale,this.RX);return 0!==e.getHighBits()?this.VX(function(t){return new Tp({creation:qo.fromNumber(t.creationTime,!0),modification:qo.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:qo.fromNumber(t.duration,!0)},t.language,t.flags)}(t),i):(t.timescale=this.RX,t.duration=e.toInt(),t)}VX(t,i){return this.OX.set(i,t.timescale),t.timescale=this.RX,t.duration=ek(t.duration,t.timescale,this.RX),t}YX(t){for(const i of t.boxes)i instanceof lp?this.WX(i):i instanceof fp&&this.HX(i)}WX(t){for(const i of t.entries)i.mediaTime=yr(i.mediaTime,this.kX,this.RX),i.segmentDuration=yr(i.segmentDuration,this.kX,this.RX)}HX(t){for(const i of t.entries)i.mediaTime=ek(i.mediaTime,this.kX,this.RX),i.segmentDuration=ek(i.segmentDuration,this.kX,this.RX)}BX(t){for(let i=0;i<t.boxes.length;i++){const e=t.boxes[i];e instanceof Wp?this.qX(e):e instanceof Yp?t.boxes[i]=this.XX(e):e instanceof Gp&&(t.boxes[i]=this.ZX(e))}}qX(t){const i=this.xX(t.trackId);t.defaultSampleDuration=yr(t.defaultSampleDuration,i,this.RX)}XX(t){const i=ek(qo.fromNumber(t.fragmentDuration,!0),this.kX,this.RX);return 0!==i.getHighBits()?this.ZX(function(t){return new Gp(qo.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=i.toInt(),t)}ZX(t){return t.fragmentDuration=ek(t.fragmentDuration,this.kX,this.RX),t}bX(t){let i=Ly(t);return i=i instanceof vy?this.KX(i):this.JX(i),i.serialize().join()}KX(t){const i=t.timescale,e=ek(qo.fromNumber(t.earliestPresentationTime,!0),i,this.RX);if(0!==e.getHighBits())return this.JX(function(t){return new my(t.referenceId,t.timescale,qo.fromNumber(t.earliestPresentationTime,!0),qo.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.RX,t.earliestPresentationTime=e.toInt();for(const e of t.references)e.subsegmentDuration=yr(e.subsegmentDuration,i,this.RX);return t}JX(t){const i=t.timescale;t.timescale=this.RX,t.earliestPresentationTime=ek(t.earliestPresentationTime,i,this.RX);for(const e of t.references)e.subsegmentDuration=yr(e.subsegmentDuration,i,this.RX);return t}LX(t){const i=ky(t),e=i.getSize();for(const t of i.boxes)t instanceof Is&&this.$X(t);const s=i.getSize();if(s!==e){const t=s-e;for(const e of i.boxes)e instanceof Is&&$L(e,t)}return i.serialize().join()}$X(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof Ie?(i=this.xX(s.trackId),this.tZ(s,i)):s instanceof oy?t.boxes[e]=this.iZ(s,i):s instanceof ru?t.boxes[e]=this.eZ(s,i):s instanceof zn&&this.sZ(s,i)}}tZ(t,i){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=yr(t.defaultSampleDuration,i,this.RX))}iZ(t,i){const e=ek(qo.fromNumber(t.baseMediaDecodeTime,!0),i,this.RX);return 0!==e.getHighBits()?this.eZ(function(t){return new ru(qo.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),i):(t.baseMediaDecodeTime=e.toInt(),t)}eZ(t,i){return t.baseMediaDecodeTime=ek(t.baseMediaDecodeTime,i,this.RX),t}sZ(t,i){let e=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=yr(s,i,this.RX);n.duration=t-e,e=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=ik(n.compositionTimeOffset,i,this.RX))}}constructor(t){super(),this.OX=pt(),this.RX=t}};function ik(t,i,e){return qo.fromInt(t,!1).multiply(e).divide(i).toNumber()}function yr(t,i,e){return qo.fromInt(t,!0).multiply(e).divide(i).toNumber()}function ek(t,i,e){return rs.xN(t).sD(rs.ON(e,!0)).oD(rs.ON(i,!0)).WN()}var sk,nk,rk,hk=class{nZ(t){return t.pipeThrough(new Ko(this.rZ))}constructor(t){this.rZ=new tk(t)}};function ok(t,i,e){const s=hl(t,i);if(s!==e)throw new b("Expected descriptor with tag "+e+", but found "+s)}function ak(t,i){ok(t,i,3);const e=uk(t,i),s=i.Ku+e,n=tl(t,i),r=hl(t,i),h=0!=(64&r),o=0!=(32&r),a=31&r;let u,c,d;if(0!=(128&r)&&(u=tl(t,i)),h){c=_h(t,i,hl(t,i))}o&&(d=_h(t,i,2));const l=function(t,i){ok(t,i,4);const e=uk(t,i),s=i.Ku+e,n=hl(t,i),r=hl(t,i),h=r>>2,o=0!=(2&r),a=ol(t,i,3),u=oo(t,i),c=oo(t,i);let d;if(i.Ku<s){const e=function(t,i){return t.getUint8(i.Ku)}(t,i);5===e&&(d=function(t,i){ok(t,i,5);const e=uk(t,i),s=Eu(t,i,e);return{hZ:5,oZ:s}}(t,i))}return i.Sm(s),{hZ:4,aZ:n,uZ:h,cZ:o,dZ:a,lZ:u,fZ:c,_Z:d}}(t,i);return i.Sm(s),{hZ:3,o:n,gZ:u,zu:c,wZ:a,AZ:d,vZ:l}}function uk(t,i){let e=0;for(let s=0;s<4;s++){const s=hl(t,i);if(e=e<<7|127&s,!(128&s))break}return e}function ck(t,i){const e=hl(t,i),s=hl(t,i),n=hl(t,i),r=hl(t,i),h=3&hl(t,i),o=31&hl(t,i),a=[];for(let e=0;e<o;e++){const e=tl(t,i);a.push(Eu(t,i,e))}const u=hl(t,i),c=[];for(let e=0;e<u;e++){const e=tl(t,i);c.push(Eu(t,i,e))}return{mZ:e,pZ:s,yZ:n,MZ:r,TZ:h,NZ:a,DZ:c}}function dn(t,i,e){if(e&&i.byte>=e)return;const s=t.Fb(i.byte);return i.byte+=1,s}function dk(t,i){return function(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=256*s+dn(t,i);return s}(t,i,2)}!function(t){t[t.IZ=3]="IZ",t[t.SZ=4]="SZ",t[t.EZ=5]="EZ"}(sk||(sk={})),function(t){t[t.bZ=64]="bZ",t[t.LZ=103]="LZ",t[t.kZ=107]="kZ"}(nk||(nk={})),function(t){t[t.CZ=0]="CZ",t[t.xZ=1]="xZ",t[t.LZ=2]="LZ",t[t.OZ=5]="OZ",t[t.jZ=34]="jZ"}(rk||(rk={}));var lk,fk=class t{zZ(t){this.PZ=this.PZ.concat(t.PZ),this.BZ+=t.U}RZ(t,i,e){const s=this.BZ,n=e-i;n>0&&(this.PZ.push({UZ:i,QZ:e,FZ:n,YZ:s,GZ:t}),this.BZ+=n)}Fb(t){for(const i of this.PZ)if(i.YZ<=t&&t<i.YZ+i.FZ)return i.GZ[t+i.UZ-i.YZ]}VZ(t,i){let e=i;for(const i of this.PZ){const s=i.QZ;for(let n=i.UZ;n<s;n+=1,e+=1)t[e]=i.GZ[n]}return e}get U(){return this.BZ}set U(t){const i=this.PZ;let e=this.BZ-t;if(!(t>=this.BZ))if(this.BZ=t,0!==t)for(let t=i.length-1;t>=0;t-=1){const s=i[t];if(e<=s.FZ)return s.QZ-=e,s.FZ-=e,void(i.length!==t+1&&(i.length=t+1));e-=s.FZ}else i.length=0}get zm(){const t=new Array(this.BZ);let i=0;for(const e of this.PZ){const s=e.QZ;for(let n=e.UZ;n<s;n+=1,i+=1)t[i]=e.GZ[n]}return t}WZ(){const t=new j(this.BZ);let i=0;for(const e of this.PZ){const s=e.QZ;for(let n=e.UZ;n<s;n+=1,i+=1)t[i]=e.GZ[n]}return t}Em(i){const e=new t;for(const t of this.PZ)e.RZ(t.GZ,t.UZ,t.QZ);return e.XD=i||Tt({},this.XD),e}constructor(){this.BZ=0,this.PZ=[],this.XD={}}},_k=[128,64,32,16,8,4,2,1];function Os(t,i){const e=_.floor(i.bit/8),s=0==(t.Fb(e)&_k[i.bit%8])?0:1;return i.bit+=1,s}function Vs(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=2*s+Os(t,i);return s}function _u(t,i){let e=0;for(;0===Os(t,i)&&e<32;)e+=1;return Vs(t,i,e)+2**e-1}function gk(t,i){const e=_u(t,i);return 1&e?_.floor((e+1)/2):-_.floor(e/2)}function wk(t,i){const e=[],s={byte:1};let n;do{e.push(vk(t,i,s)),n=i.Fb(s.byte)}while(void 0!==n&&128!==n);return e}function Ak(t,i){let e,s=0;do{e=dn(t,i),s+=e}while(255===e);return s}function vk(t,i,e){const s=Ak(i,e),n=Ak(i,e),r=e.byte,h=r+n;return e.byte=h,{HZ:t,qZ:s,XZ:n,ZZ:r,KZ:h,JZ:i}}!function(t){t[t.$Z=1]="$Z",t[t.tK=2]="tK",t[t.iK=3]="iK",t[t.eK=4]="eK",t[t.sK=5]="sK",t[t.nK=6]="nK",t[t.rK=7]="rK",t[t.hK=8]="hK",t[t.oK=9]="oK"}(lk||(lk={}));var mk=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function pk(t,i,e){let s=8,n=8;for(let r=0;r<e;r+=1){if(0!==n){n=(s+gk(t,i)+256)%256}s=0===n?s:n}}var yk=class{aK(){const t=this.uK;let i=_.max(0,this.cK+t.length-2);const e=this.dK,s=e.U;let n=0;for(;i<s;i+=1){const s=e.Fb(i);0===s?n+=1:(3===s&&n>=2&&t.push(i),n=0)}this.cK=i-t.length}lK(t){const i=this.uK;let e=t;for(const t of i){if(!(t<=e))return e;e+=1}return e}Fb(t){if(!(t>this.dK.U))return t>this.cK&&this.aK(),this.dK.Fb(this.lK(t))}constructor(t){this.uK=[],this.cK=0,this.dK=t}};function Mk(t){const i=new yk(t);let e,s,n,r,h,o,a=0,u=0,c=0,d=0;const l=i.Fb(1),f={bit:32};if(_u(i,f),100===l||110===l||122===l||144===l){const t=_u(i,f);3===t&&(e=Os(i,f)),_u(i,f),_u(i,f),Os(i,f);if(1===Os(i,f))for(let e=0;e<(3!==t?8:12);e+=1){1===Os(i,f)&&pk(i,f,e<6?16:64)}}const g=_u(i,f),w=_u(i,f);if(0===w)_u(i,f);else if(1===w){Os(i,f),gk(i,f),gk(i,f);const t=_u(i,f);for(let e=0;e<t;e+=1)gk(i,f)}_u(i,f),Os(i,f);const A=_u(i,f),v=_u(i,f),m=Os(i,f);0===m&&Os(i,f),Os(i,f);1===Os(i,f)&&(a=_u(i,f),u=_u(i,f),c=_u(i,f),d=_u(i,f));if(1===Os(i,f)){if(1===Os(i,f)){const t=Vs(i,f,8);if(255===t)s=Vs(i,f,16),n=Vs(i,f,16);else{const i=mk[t];i&&(s=i[0],n=i[1])}}1===Os(i,f)&&Os(i,f);if(1===Os(i,f)){Vs(i,f,3),Os(i,f);1===Os(i,f)&&(Vs(i,f,8),Vs(i,f,8),Vs(i,f,8))}1===Os(i,f)&&(_u(i,f),_u(i,f)),r=Os(i,f),1===r&&(h=Vs(i,f,32),o=Vs(i,f,32),Os(i,f))}return{width:_.floor(16*(A+1)-2*a-2*u),height:_.floor((2-m)*(v+1)*16-2*c-2*d),dM:s,lM:n,fK:r?o/(2*h):void 0,_K:e,gK:g}}function Tk(t){const i=il(no.fp(t),Po.Av);if(!i)return;const e=i.np.kp,s=[];for(const t of i.Z){const i=t.np.Qp,e=t.Pp.np.kp;let o,a,u;for(const i of t.Pp.qp.Kp.$p.ey){const t=Nk(i);var n,r,h;if(t)o=null!=(n=t.wK)?n:o,a=null!=(r=t.AK)?r:a,u=null!=(h=t.vK)?h:u}s.push({Qp:i,kp:e,wK:o,AK:a,vK:u})}return{kp:e,Z:s}}function Nk(t){let i,e,s;if(t.Rg===Po.Lv){var n;const e=ck(ha(t.Fy.zm),new L);i=function(t){return"avc1."+Dk(t.pZ,2)+Dk(t.yZ,2)+Dk(t.MZ,2)}(e),s=null==(n=function(t){if(0===t.NZ.length)return;const i=t.NZ[0],e=new fk;return e.RZ(i,0,i.byteLength),Mk(e)}(e))?void 0:n.fK}else if(t.Rg===Po.xv||t.Rg===Po.Ov){const e=function(t,i){const e=i.Om(),s=Eo(t,e,8),n=Eo(t,e,2),r=Eo(t,e,1),h=Eo(t,e,5),o=Eo(t,e,32),a=[];for(let i=0;i<6;i++)a.push(Eo(t,e,8));const u=Eo(t,e,8);e.Im(4);const c=Eo(t,e,12);e.Im(6);const d=Eo(t,e,2);e.Im(6);const l=Eo(t,e,2);e.Im(5);const f=Eo(t,e,3);e.Im(5);const _=Eo(t,e,3),g=Eo(t,e,16),w=Eo(t,e,2),A=Eo(t,e,3),v=Eo(t,e,1),m=Eo(t,e,2),p=Eo(t,e,8),y=[];for(let i=0;i<p;i++){const i=Eo(t,e,1);e.Im(1);const s=Eo(t,e,6),n=Eo(t,e,16),r=[];for(let i=0;i<n;i++){const i=Eo(t,e,16),s=Eu(t,new L(e.Ku>>3),i);e.Im(8*i),r.push({mK:i,pK:s})}y.push({yK:i,MK:s,TK:n,NK:r})}return{mZ:s,DK:n,IK:r,SK:h,EK:a,bK:u,LK:c,kK:d,CK:o,xK:l,jK:f,zK:_,PK:g,BK:A,RK:v,UK:w,TZ:m,QK:p,FK:y}}(ha(t.Wy.zm),new L);i=function(t,i){let e=t.toString()+".";switch(i.DK){case 0:break;case 1:e+="A";break;case 2:e+="B";break;case 3:e+="C";break;default:return}switch(e+=i.SK.toString()+".",e+=function(t){let i=t;return i=i>>>1&1431655765|(1431655765&i)<<1,i=i>>>2&858993459|(858993459&i)<<2,i=i>>>4&252645135|(252645135&i)<<4,i=i>>>8&16711935|(16711935&i)<<8,i=i>>>16|i<<16,i}(i.CK).toString(16)+".",i.IK){case 0:e+="L";break;case 1:e+="H";break;default:return}e+=i.bK.toString();const s=i.EK.reduce(((t,i)=>0===t?i:i+1),0);for(let t=0;t<s;t++)e+="."+i.EK[t].toString(16).toUpperCase();return e}(t.Rg,e)}else if(t.Rg===Po.Pv){const e=function(t,i){const e=i.Om(),s=Eo(t,e,8);e.Im(24);const n=Eo(t,e,8),r=Eo(t,e,8),h=Eo(t,e,4),o=Eo(t,e,3),a=rn(t,e),u=Eo(t,e,8),c=Eo(t,e,8),d=Eo(t,e,8),l=Eo(t,e,16),f=new Array(8);for(let i=0;i<l;i++)f[i]=Eo(t,e,8);return{mZ:s,YK:n,GK:r,VK:h,WK:o,HK:a,oM:u,aM:c,uM:d,qK:l,XK:f}}(ha(t.qy.zm),new L);i=function(t,i){let e=t.toString()+".";return e+="0"+i.YK+".",e+=xu(""+i.GK,2,"0")+".",e+=xu(""+i.VK,2,"0")+".",e+=xu(""+i.WK,2,"0")+".",e+=xu(""+i.oM,2,"0")+".",e+=xu(""+i.aM,2,"0")+".",e+=xu(""+i.uM,2,"0")+".",e+="0"+i.HK,e}(t.Rg,e)}else if(t.Rg===Po.Rv){const e=function(t,i){const e=i.Om();e.Im(1);const s=Eo(t,e,7),n=Eo(t,e,3),r=Eo(t,e,5),h=rn(t,e),o=rn(t,e),a=rn(t,e),u=rn(t,e),c=rn(t,e),d=rn(t,e),l=Eo(t,e,2);e.Im(3);const f=rn(t,e);let _;return f?_=Eo(t,e,4):e.Im(4),{dp:s,ZK:n,KK:r,JK:h,$K:o,tJ:a,iJ:u,eJ:c,sJ:d,nJ:l,rJ:f,hJ:_}}(ha(t.Ky.zm),new L);i=function(t,i,e){let s=t.toString()+".";if(s+=i.ZK+".",s+=""+xu(""+i.KK,2,"0"),s+=(0===i.JK?"M":"H")+".",s+=(1===i.tJ?12:10)+".",s+=(1===i.ZK?0:i.iJ)+".",s+=""+i.eJ+i.sJ+(1===i.eJ&&1===i.sJ?i.nJ:"0"),e&&e.hM===ga.ON_SCREEN_COLOURS){const t=e;s+="."+xu(""+t.oM,2,"0")+"."+xu(""+t.aM,2,"0")+"."+xu(""+t.uM,2,"0")+"."+(t.cM?1:0)}return s}(t.Rg,e,t.Jy)}else if(t.Rg===Po.Yv){e=function(t){const i=t.vZ;switch(i.aZ){case nk.bZ:return function(t){var i;if(!(null==(i=t._Z)?void 0:i.oZ))return"mp4a.40";const e=function(t,i){let e=Eo(t,i,5);31===e&&(e=32+Eo(t,i,6));const s=Eo(t,i,4);let n;return 15===s&&(n=Eo(t,i,24)),{oJ:e,aJ:s,uJ:n,cJ:Eo(t,i,4)}}(ha(t._Z.oZ),new Wc);return"mp4a.40."+e.oJ}(i);case nk.LZ:return"mp4a.40.2";case nk.kZ:return"mp4a.40.34"}}(ak(ha(t.Oy.zm),new L))}else{if(t.Rg!==Po.Vv)return(t.Rg===Po.Kv||t.Rg===Po.Zv)&&t.iM?Nk(t.iM):void 0;e="fLaC"}return{wK:i,AK:e,vK:s}}function Dk(t,i){const e=t.toString(16);return xu(e,i,"0")}function Ik(t,i){const e=no.fp(ha(t)),s=function(t,i){let e;for(const n of t.Z){var s;const t=null==(s=n.IM)?void 0:s.IM;if(t){const s=n.np.Qp,r=Zt(i.Z,(t=>t.Qp===s)),h=Ri.xN(t,r.kp);e&&!h.DN(e)||(e=h)}}return e}(il(e,Po.Jv),i),n=il(e,Po.dm);return{GT:s.vN(),dJ:n.zm}}var Sk=Vt.WE,Ek=class extends Pl{get NW(){return this.OW}set NW(t){this.OW=t}get EW(){return this.PW}set EW(t){this.PW=t}get oa(){return this.lJ||this.fJ.updating}_J(t,i,e){switch(t.Rg){case ji.aq:case ji.VI:return this.gJ((e=>this.wJ(t,i,e)),e);case ji.uq:throw new g("Opaque segments are not supported on web.")}}AJ(t,i){switch(t.Rg){case ji.aq:return this.gJ((i=>this.vJ(t,i)),i);case ji.VI:throw new g("Streaming initialization segments are not supported on web.");case ji.uq:throw new g("Opaque initialization segments are not supported on web.")}}async vJ(t,i){this.mJ?this.pJ=Tk(ha(t.zm)):(await this.yJ(t,void 0,i),Sk&&(this.MJ=!1,this.TJ=t))}async wJ(t,i,e){Sk&&this.MJ&&this.TJ&&await this.vJ(this.TJ,e);try{if(Bo(e),this.mJ&&this.pJ){const n=await async function(t,i){switch(t.Rg){case ji.aq:return t;case ji.VI:{const e=await oi(t.zm,i);return Bo(i),{Rg:ji.aq,zm:new j(e)}}case ji.uq:throw new g("MediaBufferWrapper - Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,e),r=Ik(n.zm,this.pJ);var s;t={Rg:ji.aq,zm:r.dJ},i=Tt({},i,{UD:r.GT+(null!=(s=i.UD)?s:0)})}await this.yJ(t,i,e),this.Co(new wn(_e.hq))}finally{t.Rg===ji.VI&&t.zm.cancel(new pe).catch(El)}}async yJ(t,i,e){switch(Bo(e),i&&await this.NJ(i),t.Rg){case ji.aq:if(this.DJ){const i=this.DJ.nZ(gb(t.zm));return await this.IJ(i,e)}return await this.SJ(t.zm);case ji.VI:if(this.DJ){const i=this.DJ.nZ(t.zm);return await this.IJ(i,e)}return await this.IJ(t.zm,e)}}async IJ(t,i){const e=this.EJ.wf,s=function(t,i){return void 0===i&&(i=new ib({highWaterMark:1/0})),new Ft(new RL(t,i),{highWaterMark:0})}(t),n=s.getReader();let r=!1;try{for(;;){const t=await dt(n.read(),i);if(t.done){r=!1;break}Bo(i);const e=y_(t.value);r=!0,await this.SJ(e)}}catch(t){if(n.cancel(t).catch(El),r){await this.bJ();const t=this.EJ.wf.Sn(e.hB());for(let i=0;i<t.U;i++)await this.LJ(t.Cn(i),t.jn(i))}throw t}}kJ(t,i){return this.gJ((()=>this.CJ(t,i)))}async CJ(t,i){this.fJ.appendWindowStart===t&&this.fJ.appendWindowEnd===i||(await this.bJ(),this.fJ.appendWindowStart=0,this.fJ.appendWindowEnd=i,this.fJ.appendWindowStart=t)}async NJ(t){if(this.fJ.timestampOffset!==t.UD)try{this.fJ.timestampOffset=t.UD}catch(i){await this.bJ(),this.fJ.timestampOffset=t.UD}}async SJ(t){this.fJ.appendBuffer(t),this.xJ=!0,await this.OJ()}jJ(t,i,e){return this.gJ((e=>this.LJ(t,i,e)),e)}async LJ(t,i,e){Bo(e),this.fJ.remove(t,i),await this.OJ()}OJ(){const t=this.EJ.wf;return new Promise(((i,e)=>{let s,n=!1,r=()=>{n=!0},h=()=>{n=!1,s="error"},o=()=>{n=!1,s="aborted"},a=()=>{n=!1,s="sourceclose",u()},u=()=>{c(),n&&!s?(t.vB(this.EJ.wf)||this.Co(new wn(_e.hq)),i()):e(new g(s))},c=()=>{this.fJ.removeEventListener("update",r),this.fJ.removeEventListener("error",h),this.fJ.removeEventListener("abort",o),this.fJ.removeEventListener("updateend",u),this.zJ.fn(An.dq,a)};this.fJ.addEventListener("update",r),this.fJ.addEventListener("error",h),this.fJ.addEventListener("abort",o),this.fJ.addEventListener("updateend",u),Vt.DE&&Vt.EE<3&&this.zJ.yn(An.dq,a)}))}PJ(){return this.gJ((()=>this.bJ()))}async bJ(){if(this.zJ.Jf===Pn.NI){Sk&&(this.MJ=!0),this.fJ.updating&&(this.lJ=!0);try{this.fJ.abort()}catch(t){0,this.lJ=!1}this.oa&&await this.OJ().catch(El)}}BJ(){return"function"==typeof this.fJ.changeType}Aq(t){if(this.RJ(),this.zJ.Jf===Pn.UJ)return;var i;this.QJ=t;const e=null!=(i=this.zJ.FJ(t.qz))?i:t.qz;this.mJ=bk(t.qz,this.YJ),this.BJ()&&!Pi(this.YJ,e)&&(this.YJ=e,this.fJ.changeType(this.YJ))}GJ(){this.zJ.Jf!==Pn.Jg||this.VJ||this.oa||(this.fJ.timestampOffset=this.fJ.timestampOffset,this.zJ.WJ())}async gJ(t,i){this.RJ();const e=new na;e.Zd(this.HJ.Hd),i&&e.Zd(i);try{this.VJ=t(e.Hd),await this.VJ,this.zJ.WJ(),this.oa&&await this.OJ()}finally{this.VJ=void 0,e.Qd()}}RJ(){if(this.VJ)throw new g("Internal error")}async Qd(){this.Vo(),this.HJ.Xd(),this.VJ&&(await this.VJ.catch(El),this.VJ=void 0),this.fJ.removeEventListener("updateend",this.qJ),this.fJ.removeEventListener("bufferedchange",this.XJ)}constructor(t,i,e,s,n){var r;if(super(),this.OW=20,this.PW=30,this.lJ=!1,this.xJ=!1,this.VJ=void 0,this.HJ=new na,this.MJ=!1,this.TJ=void 0,this.mJ=!1,this.pJ=void 0,this.qJ=()=>{this.lJ=!1},this.XJ=t=>{t.removedRanges&&this.Co(new wn(_e.hq))},this.zJ=i,this.EJ=t,this.fJ=e,this.fJ.addEventListener("updateend",this.qJ),this.fJ.addEventListener("bufferedchange",this.XJ),this.QJ=s,this.YJ=n,this.mJ=bk(s.qz,n),null==(r=i.wd)?void 0:r.ZJ){var h;const t=null!=(h=i.wd.KJ)?h:1e5;this.DJ=new hk(t)}}};function bk(t,i){return Df(t,"audio/mp4")&&Df(i,"audio/mpeg")}var Lk=class{get wf(){if(this.JJ.Jf===Pn.UJ)return Ai.SB();let t=Ai.xn(this.fJ.buffered).Sn(new Ai([0,1/0]));const i=this.$J;return void 0!==i&&t.U>0&&t.jn(t.U-1)===i&&(t=t.cB(Ai.DB(i))),t}Cq(){return!!this.$J&&this.wf.nB().gr(this.$J)}t$(){const t=this.wf;this.$J=t.U>0?t.jn(t.U-1):0,this.JJ.i$()}GJ(){this.$J=void 0}constructor(t,i){this.$J=void 0,this.JJ=i,this.fJ=t}};function kk(t){const i=t.uI("codecs");return i?i.split(",").map((t=>t.trim())):[]}function Ck(t,i){return!("opus"===t)&&!("opus"===i)||t===i}function xk(t,i){const e=Ok(t)||jk(t),s=Ok(i)||jk(i);return!e&&!s||t===i}function Ok(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function jk(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function Lt(t,i){if(t===i)return!0;const e=t.split("."),s=i.split("."),n=e[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,i]=e,[,n,r]=s;if(t!==n)return!1;if(Number(i)!==Number(r))return!1}return!0}function zk(t,i,e,s,n,r,h){const o=new Lk(n,t),a=new Ek(o,t,n,e,r);return new Pk(t,i,e,s,o,a,h)}var Pk=class extends Pl{get wf(){return this.EJ.wf}get wd(){return this.lx}get qz(){return this.sx}get e$(){return this.s$}get n$(){return this.r$.Rq}get NW(){return this.h$.NW}set NW(t){this.h$.NW=t}get EW(){return this.h$.EW}set EW(t){this.h$.EW=t}get oa(){return this.h$.oa}Cq(){return this.EJ.Cq()}t$(){this.EJ.t$()}GJ(){this.EJ.GJ(),this.h$.GJ()}o$(t,i){this.r$.Qq(t,i)}a$(t,i){this.r$.Fq(t,i)}u$(){return this.h$.PJ()}_J(t,i,e){return this.h$._J(t,i,e)}AJ(t,i,e){return this.h$.AJ(t,e)}kJ(t,i){return Vt.DE&&Vt.EE<3?this.h$.kJ(t,1/0):this.h$.kJ(t,i)}async ET(t,i,e){this.a$(t,i);const s=this.wf;await this.h$.jJ(t,i,e);const n=0!==s.U&&0===this.wf.U;(Vt.ib||Vt.LE)&&n&&this.sA.Sm(this.sA.Mf)}gq(t){const i=t.qz;if(this.sx===i)return!0;const e=this.c$.get(i);if(void 0!==e)return e;const s=this.d$(t);return this.c$.set(i,s),s}d$(t){const i=this.zJ.FJ(t.qz);if(void 0===i)return!1;const e=JA(this.sx),s=JA(i),n=kk(e),r=kk(s);if(this.h$.BJ()){if(!function(t,i){return qd(t,i,xk)}(n,r))return!1;if(Vt.sb&&!function(t,i){return qd(t,i,Ck)}(n,r))return!1}else{if(e.Rg!==s.Rg)return!1;if(!function(t,i){return qd(t,i,Lt)}(n,r))return!1}return!0}async Aq(t){const i=t.qz;this.sx!==i&&(this.c$.clear(),this.h$.Aq(t),this.sx=i),this.lx=t,this.zJ.l$()}async Qd(){this.c$.clear(),this.Vo(),this.r$.gn();try{this.h$.fn(_e.hq,this.Ds),await this.h$.Qd()}catch(t){}}constructor(t,i,e,s,n,r,h){super(),this.c$=cs(),this.zJ=t,this.lx=e,this.sx=e.qz,this.s$=s,this.sA=i,this.EJ=n,this.h$=r,this.r$=h,this.h$.yn(_e.hq,this.Ds)}},Bk=class{f$(){let t=this.Cn,e=this.jn;if(this._$||this.g$){const s=.001*(i.Jd()-this.w$);this._$&&(t+=s),this.g$&&(e+=s)}return Ai.IB(t,e)}constructor(t,e,s=!1,n=!1){this.Cn=t,this.jn=e,this._$=s,this.g$=n,this.w$=i.Jd()}},Rk=.5,Uk=[l.jh,l.Sh,l.yw,l.pw,l.hw,l.aw,l.Jg,l.ww,er.H_,hh.ha],Qk=class{A$(t){this.v$.push(t),t.yn(jL.zq,this.m$)}get Rq(){return this.v$.reduce(((t,i)=>t.cB(i.Rq)),Ai.SB())}gn(){this.p$(),this.y$.fn(er.H_,this.M$),this.sA.fn(l.gw,this.M$),this.sA.fn(Uk,this.T$),this.v$.forEach((t=>t.fn(jL.zq,this.m$))),0!==this.N$&&(i.$d(this.N$),this.N$=0),this.D$=!0}mq(t){if(this.sA.If)return!1;if(0!==this.N$)return!1;const e=this.EJ.wf,s=e.fB(t);if(s>=0&&t+Rk<e.jn(s))return!1;const n=s>=0?s+1:e.MB(t);if(n<0||n>=e.U)return!1;const r=e.Cn(n);if(Ai.IB(t,r).lB(this.Rq).NB>1)return!1;if(i.I$)return this.S$=this.sA.Mf,this.N$=i.ul((()=>{this.S$===this.sA.Mf&&this.E$(r),this.N$=0}),250),!0;return!(_.abs(r-t)<=.001)&&(this.E$(r),!0)}E$(t){this.sA.Sm(t,!1,!0)}b$(){0!==this.L$&&(i.$d(this.L$),this.L$=0),this.sA.fn(l.Sw,this.Jl)}k$(){this.D$||0===this.C$&&(this.b$(),this.C$=i.x$(this.O$,250))}p$(){0!==this.C$&&(i.j$(this.C$),this.C$=0),this.b$(),this.sA.e_||(this.z$=0)}P$(){return!this.sA.Ff&&!this.sA.e_&&0!==this.sA.Gf&&!this.sA.If&&!this.sA.lt&&(this.B$()||this.y$.Jf>=ae.cT)}B$(){const t=this.sA.Mf,i=this.EJ.wf,e=i.fB(t);return-1!==e&&i.jn(e)>t+Rk}R$(t,i){const e=i.fB(t);return e>-1?i.jn(e):t}constructor(t,e,s,n){this.EJ=t,this.y$=e,this.sA=s,this.D$=!1,this.v$=[],this.N$=0,this.L$=0,this.U$=0,this.S$=0,this.z$=0,this.C$=0,this.Q$=1,this.m$=t=>{const i=this.sA.Mf,e=t.Bq.gr(i),s=t.Bq.gr(i,Rk)&&this.sA.Jf<=ae.uT;(e||s)&&this.mq(i)},this.M$=mc((t=>{if(this.D$)return;if(this.y$.Jf<=ae.uT){const t=this.sA.Mf;this.mq(t)||this.O$()}}),100),this.Jl=mc((t=>{this.k$()}),100),this.T$=()=>{this.P$()?0===this.C$&&(this.sA.yn(l.Sw,this.Jl),this.L$=i.ul((()=>{this.k$()}),3500)):this.p$()},this.O$=()=>{const t=this.U$,e=this.z$,s=this.sA.Mf,n=i.Jd(),r=this.EJ.wf;if(t!==s)return this.U$=s,this.z$=n,this.Q$=1,void(this.F$=i.Y$?2e3:1e3);if(this.P$()&&0!==r.U&&e>0&&n>e+this.F$){let t;const i=this.Rq.nB().lB(r),e=i.yB(s);if(-1!==e){const n=i.Cn(e);if(n-s<1){const s=i.jn(e);0,t=s}}var h;if(!t)t=null==(h=this.G$)?void 0:h.determineStallJumpTarget(),t||(t=s+.01*this.Q$,r.gr(t)||(t=this.R$(s,r)));0,this.U$=t,this.Q$++,this.F$=_.min(2*this.F$,1e4),this.E$(t)}},this.y$.yn(er.H_,this.M$),this.sA.yn(l.gw,this.M$),this.sA.yn(Uk,this.T$),this.G$=n,this.F$=i.Y$?2e3:1e3}};function Fk(t){const i=[];if(t.V$&&i.push(t.V$.wf),t.W$&&i.push(t.W$.wf),0===i.length)return Ai.SB();let e=0;for(const t of i)t.U>0&&(e=_.max(e,t.jn(t.U-1)));const s=t.Cq;let n=new Ai([0,e],[!0,s]);for(let t of i)s&&t.U>0&&(t=t.cB(new Ai([t.jn(t.U-1),e],[!0,!0]))),n=n.Sn(t);return n}function Yk(t,i,e){const s=t.wf;let n,r=s.fB(i);if(r>=0){if(!(r+1<s.U))return Promise.resolve();n=s.Cn(r+1)}else{if(r=s.MB(i),!(r>=0))return Promise.resolve();n=s.Cn(r)}return t.ET(n,1/0,e)}function Gk(t,i,e){if(!t.gr(i)){const s=t.fB(i,e);if(s>=0){const e=t.Cn(s);if(i<e)return e}}return i}var mr=class{H$(){return new this.q$}X$(t){return this.q$.isTypeSupported(t)}constructor(t){this.q$=Vk(t)}};function Vk(t){return t&&qr(Or.ManagedMediaSource)?Or.ManagedMediaSource:qr(Or.MediaSource)?Or.MediaSource:void 0}var Pn,Wk=Vt.OE||Vt.zE,Hk=Vt.FE||Vt.WE&&Vt.qE>=17;!function(t){t.UJ="closed",t.NI="open",t.Jg="ended"}(Pn||(Pn={}));var qk=class extends OL{get V$(){return this.Z$}get W$(){return this.K$}get ct(){if(this.J$)return this.J$;const t=this.Fz.duration;return t===Oa?1/0:t}t0(t){if(S(t)||t<0)throw new g("Invalid duration");this.i0()?this.e0(t):this.J$=t}e0(t){const i=t===1/0;if(i&&this.Fz.setLiveSeekableRange){const t=2**39;this.Fz.setLiveSeekableRange(0,t)}this.Fz.duration=i?Hk?1/0:Oa:t,this.J$=void 0}get wf(){return Wk?Fk(this):function(t,i){let e=i;return e.U>0&&t.Cq&&(e=e.cB(Ai.DB(e.jn(e.U-1)))),e}(this,Ai.xn(this.Ox.buffered))}get xq(){var t;return null==(t=this.Z$)?void 0:t.wf}get Oq(){var t;return null==(t=this.K$)?void 0:t.wf}get t_(){return this.s0.f$().Sn(new Ai([0,this.ct],[!0,!0]))}n0(t,i,e,s){this.s0=new Bk(t,i,!!e,!!s)}get Cq(){return(!this.Z$||this.Z$.Cq())&&(!this.K$||this.K$.Cq())}get Jf(){return this.Fz.readyState}async bW(){const t=this.lx,i=Zt(t.r0,(t=>Df(t.qz,"audio"))),e=Zt(t.r0,(t=>Df(t.qz,"video")));if(this.Ox.disableRemotePlayback=!0,await this.h0(),i){const t=new br;var s;this.o0.A$(t);const e=null!=(s=this.FJ(i.qz))?s:i.qz;this.a0=this.Fz.addSourceBuffer(e),this.Z$=zk(this,this.sA,i,pg.ym,this.a0,e,t),this.Z$.yn(_e.hq,this.XJ)}if(e){const t=new br;var n;this.o0.A$(t);const i=null!=(n=this.FJ(e.qz))?n:e.qz;this.u0=this.Fz.addSourceBuffer(i),this.K$=zk(this,this.sA,e,pg.pm,this.u0,i,t),this.K$.yn(_e.hq,this.XJ)}this.vq.$n(this,t)}async h0(){await super.bq(this.Fz),"open"!==this.Jf&&await ci(this.Fz,"sourceopen")}i0(){if("open"!==this.Jf)return!1;const t=this.Z$&&this.Z$.oa,i=this.K$&&this.K$.oa;return!(t||i)}t$(){this.c0=!0,this.Z$&&this.Z$.t$(),this.K$&&this.K$.t$(),this.c0=!1,this.d0()}GJ(){this.Z$&&this.Z$.GJ(),this.K$&&this.K$.GJ()}gq(t){const i=Zt(t.r0,(t=>Df(t.qz,"audio"))),e=Zt(t.r0,(t=>Df(t.qz,"video")));if(this.Z$){if(!i)return!1;if(!this.Z$.gq(i))return!1}else if(i)return!1;if(this.K$){if(!e)return!1;if(!this.K$.gq(e))return!1}else if(e)return!1;return!!super.gq(t)}async Aq(t){const i=Zt(t.r0,(t=>Df(t.qz,"audio"))),e=Zt(t.r0,(t=>Df(t.qz,"video"))),s=[];this.Z$&&s.push(this.Z$.Aq(i)),this.K$&&s.push(this.K$.Aq(e)),await Promise.all(s),await super.Aq(t)}async Qd(){if(this.Fz.removeEventListener("sourceclose",this.l0),Vt.LE&&await this.kq(),this.Z$){if(await this.Z$.Qd(),this.Z$=void 0,Hn()&&(Vt.LE||Vt.DE))try{this.Fz.removeSourceBuffer(this.a0)}catch(t){}this.a0=void 0}if(this.K$){if(await this.K$.Qd(),this.K$=void 0,Hn()&&(Vt.LE||Vt.DE))try{this.Fz.removeSourceBuffer(this.u0)}catch(t){}this.u0=void 0}this.Ox.src&&URL.revokeObjectURL(this.Ox.src),this.Ox.disableRemotePlayback=!1,this.sA.fn([l.yw,l.hw],this.f0),this.o0.gn(),Vt.DE&&await this.kq(),await super.Qd()}l$(){const t=this.lx,i=t.r0.map((t=>Df(t.qz,"audio")&&this.Z$?this.Z$.wd:Df(t.qz,"video")&&this.K$?this.K$.wd:t));this.lx=Tt({},t,{r0:i})}i$(){this.c0||this.d0()}get _0(){if(!this.Cq)return!1;const t=this.wf;return 0!==t.U&&t.Cn(t.U-1)<=this.sA.Mf}d0(){this._0&&this.i0()&&(this.Fz.endOfStream(),this.J$=void 0,this.Co(new wn(An.tU)),this.sA.XJ())}WJ(){this.i0()&&(this.Cq?this.d0():void 0!==this.J$&&this.e0(this.J$))}mq(t){return this.o0.mq(t)}FJ(t){return Xk(this.g0,t)}static jq(t){const i=Vk(t.w0);if(void 0===i)return!1;if("function"!=typeof i.isTypeSupported)return!1;const e=new mr(t.w0);for(const i of t.r0)if(void 0===Xk(e,i.qz))return!1;return!0}constructor(t,i,e,s,n,r=new mr(t.w0),h){super(t,i,s,n),this.Z$=void 0,this.a0=void 0,this.K$=void 0,this.u0=void 0,this.s0=new Bk(0,1/0),this.J$=void 0,this.c0=!1,this.l0=()=>{this.Co(new wn(An.dq))},this.f0=()=>{this.d0()},this.XJ=()=>{this.sA.XJ()},this.g0=r,this.Fz=this.g0.H$(),this.Fz.addEventListener("sourceclose",this.l0),this.sA.yn([l.yw,l.hw],this.f0),this.o0=new Qk(this,e,this.sA,h)}};function Xk(t,i){const e=JA(i),s=kk(e),n="audio/mp4"===e.Rg,r=n&&1===s.length&&"mp4a.40.34"===s[0];if(t.X$(i)&&(!r||!Vt.WE))return i;if(r){const i=['audio/mp4; codecs="mp3"',"audio/mpeg"];for(const e of i)if(t.X$(e))return e}if(n&&1===s.length&&"flac"===s[0].toLowerCase()){const e=["flac","fLaC","FLAC"];for(const s of e){const e='audio/mp4; codecs="'+s+'"';if(t.X$(i))return e}}}var Zk=class extends wn{constructor(t){super(l.hw),this.currentTime=t}},Kk=[l.Ew,l.ww,l.yw,l.hw,l.jh,l.Sh],Jk=class extends Pl{get Mf(){return this.EB}get A0(){return this.v0}get m0(){return this.p0}get ct(){return this.VL}get If(){return this.y0}get Ff(){return this.kB}get Jf(){return this.M0}get e_(){return this.bB}get Pf(){return this.LB}set Pf(t){this.Pf!==t&&(this.LB=t,this.Co(new lo(this.Mf,this.c_)))}get Gf(){return this.CB}set Gf(t){this.Gf!==t&&(this.CB=t,this.Co(new Oi(this.Mf,this.Gf)))}get c_(){return this.ck}set c_(t){this.c_!==t&&(this.ck=t,this.Co(new lo(this.Mf,this.c_)))}Sm(t,i,e){this.EB!==t&&(this.EB=t,this.v0=i,e&&!this.bB?(this.p0=!0,this.Co(new Zk(this.Mf))):(this.p0=!1,this.bB=!0,this.Co(new Oe(this.Mf))))}m_(){this.kB||(this.kB=!0,this.Co(new ye(this.Mf)))}p_(){this.kB&&(this.kB=!1,this.Co(new Ps(this.Mf)))}Qd(){this.Vo()}constructor(t,i,e,s,n,r,h,o,a,u,c){super(),this.EB=t,this.VL=i,this.y0=e,this.kB=s,this.bB=n,this.LB=r,this.CB=h,this.ck=o,this.M0=a,this.v0=u,this.p0=c}};function $k(t){return new Jk(t.Mf,t.ct,t.If,t.Ff,t.e_,t.Pf,t.Gf,t.c_,t.Jf,!1,t.m0)}function tC(t,i){i.ct===t.ct||S(i.ct)&&S(t.ct)||t.Co(new ht(t.ct)),t.Pf=i.Pf,t.c_=i.c_,t.Gf=i.Gf,i.Ff?t.m_():t.p_().catch(El),i.Mf!==t.Mf||i.Jf>ae.aT&&t.Jf===ae.aT?t.Sm(i.Mf,i.A0,i.m0):!i.e_&&t.e_?t.Co(new Oe(t.Mf)):i.e_&&!t.e_&&t.Jf>=ae.uT&&t.Co(new Ms(t.Mf)),!i.If&&t.If&&t.Co(new ie(t.Mf))}var iC=class extends Pl{get Jf(){return this.$f()}T0(t){this.iO!==t&&(this.iO=t,this.Co(new Lr(this.sA.Mf,t)))}N0(){this.T0(this.$f())}tr(){this.T0(ae.aT)}Qd(){this.Vo()}constructor(t){super(),this.iO=ae.aT,this.D0=()=>{this.N0()},this.sA=t}},eC=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],ic=class extends iC{$f(){let t=this.sA.Uz.readyState;return t>ae.uT&&this.sA.I0?ae.uT:(this.sA.Uz.seeking&&t>ae.Xn&&(t=ae.Xn),t)}Qd(){for(const t of eC)this.sA.Uz.removeEventListener(t,this.D0);super.Qd()}constructor(t){super(t);for(const t of eC)this.sA.Uz.addEventListener(t,this.D0)}},sC=class extends iC{$f(){if(this.sA.Uz.readyState===ae.aT)return ae.aT;const t=this.S0(),i=t?t.jn-t.Cn:0;if(!t)return ae.Xn;const e=this.sA.Gf;return this.E0()||i>=3*e?ae.dT:i>=3?ae.cT:ae.uT}S0(){const t=this.sA.Mf,i=this.sA.wf.uB(.04),e=i.fB(t);if(!(e<0))return{Cn:t,jn:i.jn(e)}}E0(){if(this.sA.If)return!0;const t=this.sA.ct,i=this.S0();return!!i&&t-i.jn<=.16666666666666666}Qd(){this.sA.fn([l.yw,l.hw],this.D0);for(const t of eC)this.sA.Uz.removeEventListener(t,this.D0);super.Qd()}constructor(t){super(t),this.sA.yn([l.yw,l.hw],this.D0);for(const t of eC)this.sA.Uz.addEventListener(t,this.D0)}},nC=[er.H_,l.jh,l.Sh,l.yw,l.pw,l.hw,l.aw,l.Jg,hh.ha],rC=class extends Pl{b0(){return(!this.Zx.m0||!this.Zx.L0)&&this.Zx.Jf<ae.cT}k0(){return!this.Zx.e_&&!(this.Zx.Ff||this.Zx.If||this.Zx.lt||this.b0())}Yn(){const t=this.C0;this.C0=this.k0(),!t&&this.C0&&this.Co(new tn(this.Zx.Mf))}tr(){this.C0=!1}Qd(){this.Vo(),this.Zx.fn(nC,this.tG)}constructor(t){super(),this.C0=!1,this.tG=()=>{this.Yn()},this.Zx=t,this.Zx.yn(nC,this.tG)}},hC=class extends rC{k0(){return this.x0&&super.k0()}Yn(){this.x0&&(this.Ox.paused||this.Ox.ended||this.Ox.error)&&(this.x0=!1),super.Yn()}tr(){super.tr(),this.x0=!1}Qd(){this.Ox.removeEventListener(er.Rw,this.oO),super.Qd()}constructor(t){super(t),this.x0=!1,this.oO=()=>{this.x0=!0,this.Yn()},this.Ox=t.Uz,this.Ox.addEventListener(er.Rw,this.oO)}},oC=class extends wn{constructor(t){super(hh.ha),this.lt=t}};function aC(t,i){return t.GT<=i&&t.VT>i}function Ma(t,i){return function(t,i){return Pd(t.GT,i.GT,Fn)}(t,i)||function(t,i){return Pd(t.VT,i.VT,Fn)}(t,i)}function uC(t,i){return function(t,i){return Pd(t.JT,i.JT,Fn)}(t,i)||function(t,i){return Pd(t.$T,i.$T,Fn)}(t,i)}function cC(t,i,e){let s=function(t,i,e,s,n,r,h){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===h&&(h=t.length);let o=r,a=h-1;for(;o<=a;){const h=o+(a-o>>1),u=s(e(t[h]),i);if(u<0)o=h+1;else if(u>0)a=h-1;else{if(!(n&&h>r&&0===s(e(t[h-1]),i)))return h;a=h-1}}return~o}(t,i,Ll,e,!0);if(s<0)return s;for(;s<t.length&&e(i,t[s])===It.Zr;s++)if(t[s].oN(i))return s;return-(s+1)}function dC(t,i,e){const s=cC(t,i,e);return s>=0?s:-(s+1)}function lC(t){const i=t.Lt;if(!i)return-1;if(t instanceof Gs)return i.O0(t);const e=i.L;if(!e)return-1;const s=cC(e.og,t,Ma);return s>=0?s:-1}function fC(t,i){const e=function(t,i,e){const s=t.length,n=i.length;let r=0,h=0;const o=[],a=[];for(;r<s&&h<n;){const s=t[r],n=i[h];s===n?(r++,h++):e(n,s)<=0?(o.push(n),h++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;h<n;)o.push(i[h]),h++;return{j0:o,z0:a}}(t,i,Ma);return function(t,i){const e=i.length;for(let s=0;s<e;s++)t[s]=i[s];t.length=e}(t,i),e}var $r=class{get og(){return this.P0}get U(){return this.P0.length}get va(){if(this.Xa){const t=this.P0;this.Xa.length=t.length;for(let i=0;i<t.length;i++)this.Xa[i]=t[i].va}else this.Xa=this.fa();return this.Xa}fa(){return function(t){const i=[];for(let e=0;e<t.U;e++)i[e]=t.Fb(e).va;return i.item=i=>{const e=0|i,s=t.Fb(e);return s&&s.va||void 0},w.defineProperty(i,"constructor",{value:Qw}),i}(this)}bT(t){const i=this.P0;for(let e=i.length-1;e>=0;e-=1){const s=i[e];if(t.oN(s))return!0}return!1}Fb(t){return this.P0[t]}constructor(t){this.Xa=void 0,this.P0=t}},_C=class extends ts{fa(){return new gC(this.Lt.va,this.Jf)}constructor(t,i){super(Ce.H_),this.Lt=t,this.Jf=i}},gC=class extends ks{constructor(t,i){super("readystatechange"),this.track=t,this.readyState=i}},wC=class extends ts{fa(){return new AC(this.Lt.va)}constructor(t){super(Ce.X_),this.Lt=t}},AC=class extends ks{constructor(t){super("typechange"),this.track=t}},vC=class extends ts{fa(){return new mC(this.YT.va)}constructor(t){super(Ce.O_),this.YT=t}},mC=class extends ks{constructor(t){super("addcue"),this.cue=t}},pC=class extends ts{fa(){return new yC(this.YT.va)}constructor(t){super(Ce.z_),this.YT=t}},yC=class extends ks{constructor(t){super("removecue"),this.cue=t}},ze=class extends Pl{get q(){return this.B0}get L(){return this.R0}U0(t){return Zt(this.R0.og,(i=>i.o===t))}get LS(){return this.Q0}set LS(t){this.Q0=t}get Bg(){return this.F0}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return ra(this)}get o(){return this.CT}get Mg(){return this.xT}get Og(){return this.Y0}set Og(t){this.Y0=t}get zt(){return this.G0}get kh(){return this.OT}set kh(t){t!==this.OT&&(this.OT=t,this.Co(new js(this)))}get gs(){return this.WL}get Tg(){return this.V0}get jg(){return this.iR}set jg(t){this.Xo(t)}Xo(t){const i=zi(t);i!==this.jg&&(this.iR=i,i===Ha.Ch&&(this.W0.forEach((t=>{t.ro=!1})),No(this.W0),this.H0=0),this.Co(new Tn(this)))}get Jf(){return this.M0}set Jf(t){this.M0!==t&&(this.M0=t,this.Co(new _C(this,this.M0)))}get Ug(){return this.q0}set Ug(t){this.q0=t}get Rg(){return this.X0}set Rg(t){this.X0!==t&&(this.X0=t,this.Co(new wC(this)))}SS(t){if(!t||t.Lt)return;const i=cC(this.Z0,t,uC);if(i>=0)return;t.Lt=this;const e=-(i+1);this.Z0.splice(e,0,t);const s=dC(this.L.og,t,Ma);this.K0(t,s),this.Co(new vC(t))}K0(t,i){this.P0.splice(i,0,t),this.J0(i),t.cN=i,i<this.H0&&(this.H0=i)}xI(t){if(!t||t.Lt!==this)return;const i=this.O0(t);if(i<0)return;t.ro=!1;const e=this.W0,s=cC(e,t,Ma);s>=0&&M(e,s);const n=cC(this.Z0,t,uC);n>=0&&M(this.Z0,n),this.$0(t,i),this.Co(new pC(t))}$0(t,i){M(this.P0,i),this.J0(i),t.cN=-1,this.H0>i&&--this.H0}eN(t){if(!t||t.Lt!==this)return;const i=this.O0(t);if(i<0)return;this.$0(t,i);const e=dC(this.L.og,t,Ma);this.K0(t,e);const s=Ka(this.W0,(i=>i===t));if(s>=0){M(this.W0,s);const i=dC(this.W0,t,Ma);this.W0.splice(i,0,t)}}t1(t,i){const e=this.W0,s=this.P0;let n=this.H0,r=!1;i&&(n=0);for(let i=e.length-1;i>=0;i--){aC(e[i],t)||(r=!0,M(e,i))}for(;n<s.length&&s[n].GT<=t;){const i=s[n];if(0===t)break;aC(i,t)&&!qt(e,i)&&(r=!0,e.push(i)),n++}r&&pd(e,Ma),this.H0=n}O0(t){return(-1===t.cN||t.cN>=this.i1)&&this.e1(),t.cN}e1(){const t=this.P0;for(let i=this.i1;i<t.length;i++)t[i].cN=i;this.i1=t.length}J0(t){t<this.i1&&(this.i1=_.max(t,0))}Pg(t){this.Bg||(this.jg=t)}gn(){this.Vo();const t=this.P0.slice();for(const i of t)i.gn();No(this.P0),No(this.Z0),No(this.W0)}constructor(t,i,e,s,n,r,h,o,a){super(),this.xT=Iw(),this.Q0=!1,this.iR=Ha.Ch,this.M0=Zs.NONE,this.q0=void 0,this.P0=[],this.Z0=[],this.W0=[],this.i1=0,this.H0=0,this.CT=i||"",this.Y0=o||"",this.G0=t,this.WL=s||"",this.Q0=Boolean(n),this.F0=Boolean(h),this.X0=r||Kc.DEFAULT,this.OT=e||"",this.V0=a||[],this.R0=new $r(this.P0),this.B0=new $r(this.W0)}},MC=class extends yu{fa(){return new TC(this.YT.va)}constructor(t,i){super(ku.QT,t),this.uD=i}},TC=class extends za{constructor(t){super("enter",t)}},NC=class extends yu{fa(){return new DC(this.YT.va)}constructor(t,i){super(ku.FT,t),this.uD=i}},DC=class extends za{constructor(t){super("exit",t)}},IC=class extends ts{fa(){return new SC(this.YT.va)}constructor(t){super(Ce.U_),this.YT=t}},SC=class extends ks{constructor(t){super("entercue"),this.cue=t}},EC=class extends ts{fa(){return new bC(this.YT.va)}constructor(t){super(Ce.F_),this.YT=t}},bC=class extends ks{constructor(t){super("exitcue"),this.cue=t}},qu=class extends Ys{get Mg(){return this.xT}get GT(){return this.s1.startTime}set GT(t){this.s1.startTime=t}get VT(){return this.s1.endTime}set VT(t){this.s1.endTime=t}get O(){return this.nN}set O(t){this.nN=t}get rN(){return!!this.s1.pauseOnExit}set rN(t){this.s1.pauseOnExit=!!t}get Lt(){return this.iN}set Lt(t){this.iN=t}get o(){return this.s1.id||""}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return Mh(this)}get ro(){return this.ho}set ro(t){this.ro!==t&&(this.ho=t,t?(this.Co(new MC(this,this.GT)),this.iN&&this.iN.Co(new IC(this))):(this.Co(new NC(this,this.VT)),this.iN&&this.iN.Co(new EC(this))))}oN(t){return this===t||ql(this,t)&&Vw(this,t)&&this.aN(t)}aN(t){return fl(this.O,t.O)}gn(){this.Vo(),this.s1.removeEventListener("enter",this.n1),this.s1.removeEventListener("exit",this.o1)}constructor(t){super(),this.nN=void 0,this.iN=void 0,this.Xa=void 0,this.ho=!1,this.n1=()=>{this.ro=!0},this.o1=()=>{this.ro=!1},this.xT=kw(),this.s1=t,this.JT=t.startTime,this.$T=t.endTime,this.s1.addEventListener("enter",this.n1),this.s1.addEventListener("exit",this.o1)}},LC=class extends ts{fa(){return new kC(this.Lt.va)}constructor(t){super(Ce.G_),this.Lt=t}},kC=class extends ks{constructor(t){super("cuechange"),this.track=t}};function CC(t){if(!t)return;let i=t.THEOplayerVTTRegion;return i||(i=new xC(t),t.THEOplayerVTTRegion=i),i}var xC=class{get a1(){return this.u1}get o(){return this.u1.id||""}get ji(){return+this.u1.width||0}set ji(t){this.u1.width=t||0}get dN(){return+this.u1.lines||0}set dN(t){this.u1.lines=t||0}get lN(){return+this.u1.regionAnchorX||0}set lN(t){this.u1.regionAnchorX=t||0}get fN(){return+this.u1.regionAnchorY||0}set fN(t){this.u1.regionAnchorY=t||0}get gN(){return+this.u1.viewportAnchorX||0}set gN(t){this.u1.viewportAnchorX=t||0}get wN(){return+this.u1.viewportAnchorY||0}set wN(t){this.u1.viewportAnchorY=t||0}get _N(){return this.u1.scroll||""}get va(){return this.Xa||(this.Xa=Jw(this)),this.Xa}constructor(t){this.Xa=void 0,this.u1=t}};var OC=class extends qu{get O(){return this.s1.text}set O(t){this.s1.text=t}get Pt(){return this.s1.vertical||""}set Pt(t){this.s1.vertical=t||""}get KT(){return this.s1.snapToLines}set KT(t){this.s1.snapToLines=t}get HT(){return this.s1.line}set HT(t){this.s1.line=t}get rp(){return+this.s1.size}set rp(t){this.s1.size=os(t,0,100)}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return Fw(this)}aN(t){return Ww(this,t)}constructor(t){super(t)}},jC=class extends OC{get ZT(){return CC(this.s1.region)}get qT(){return this.s1.lineAlign||"start"}set qT(t){this.s1.lineAlign=t||"start"}get po(){return this.s1.position}set po(t){this.s1.position=t}get XT(){return this.s1.positionAlign||"auto"}set XT(t){this.s1.positionAlign=t||"auto"}get WT(){return this.s1.align||"center"}set WT(t){this.s1.align=t||"center"}constructor(t){super(t)}},zC=class extends OC{get ZT(){return CC(this.a1)}get a1(){return function(t,i){if(void 0===i)return;let e=t&&t.regions;return e&&e.getRegionById(i)||void 0}(this.s1.track,this.s1.regionId)}get qT(){return function(t){return"middle"===t?"center":t}(this.s1.lineAlign||"start")}set qT(t){this.s1.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get po(){return this.s1.position}set po(t){this.s1.position=function(t,i){return Uw(t,i)}(t,this.WT)}get XT(){return function(t){return Bw[t]}(this.s1.positionAlign||"middle")}set XT(t){this.s1.positionAlign=function(t,i){return Pw[Rw(t,i)]}(t||"center",this.WT)}get WT(){return function(t){return"middle"===t?"center":t}(this.s1.align||"middle")}set WT(t){this.s1.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function PC(t,i){return t.O===i.O}function BC(t,i){if(0===i.length)return;const e=i.length-1;if(i[e].GT<t.GT)return void RC(i,e,t.GT);const s=i[0];if(s.GT>t.GT)return void(t.VT=s.GT);const n=cC(i,t,Ma);if(n>=0)return;const r=-(n+1),h=r-1;if(h>=0){i[h].GT<t.GT&&RC(i,h,t.GT)}if(r<i.length){const e=i[r];t.VT=e.GT}}function RC(t,i,e){const s=t[i].GT;for(let n=i;n>=0&&t[n].GT===s;n--)t[n].VT=e}function UC(t){return Mh(t)}var QC,FC,YC=class extends qu{get O(){return this.c1}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return UC(this)}aN(t){return PC(this,t)}constructor(t,i){super(t),this.c1=i}};function di(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function zt(t){switch(t){case 0:return $_;case 1:return sg;case 2:return Ta;case 3:return yl}}function GC(t,i){const e=i.Ku,s=t.byteLength,n=Zn(t);return i.Im(s-e),Nh(n,e,s).buffer}function VC(t,i){return{id:t||"",data:i instanceof ArrayBuffer?i:void 0}}function WC(t,i,e){const s=hl(t,i);if(!di(s))return;const n=zt(s);return{id:e,language:_h(t,i,3),description:n(t,i),text:n(t,i)}}function HC(t,i,e){const s=hl(t,i);if(!di(s))return;const n=zt(s);return{id:e,mimeType:$_(t,i),fileName:n(t,i),description:n(t,i),data:GC(t,i)}}function qC(t,i,e){const s=hl(t,i);if(!di(s))return;const n=zt(s),r=[];for(;i.Ku<t.byteLength;)r.push({involvement:n(t,i),involvee:n(t,i)});return{id:e,entries:r}}function XC(t,i,e){const s=hl(t,i);if(!di(s))return;const n=zt(s),r=_h(t,i,3),h=hl(t,i),o=hl(t,i),a=n(t,i);let u=!1;const c=[];for(;i.Ku<t.byteLength;){let e;if(1===s){let s=eg(t,i);void 0===s?s=u:u=s,e=Ta(t,i,s)}else e=n(t,i);if(!e||i.Ku+4>t.byteLength)break;c.push({text:e,timestamp:oo(t,i)})}return{id:e,language:r,format:h,contentType:o,description:a,entries:c}}function ZC(t,i,e){return{id:e,ownerIdentifier:$_(t,i),identifier:GC(t,i)}}function KC(t,i,e){const s=hl(t,i);if(!di(s))return;const n=zt(s);return{id:e,language:_h(t,i,3),description:n(t,i),text:n(t,i)}}function JC(t,i,e){const s=hl(t,i);if(!di(s))return;return{id:e,text:zt(s)(t,i)}}function $C(t,i,e){return{id:e,url:$_(t,i)}}function tx(t,i,e){const s=hl(t,i);if(!di(s))return;const n=zt(s);return{id:e,description:n(t,i),text:n(t,i)}}function ix(t,i,e){const s=hl(t,i);if(!di(s))return;return{id:e,description:zt(s)(t,i),url:$_(t,i)}}function ex(t,i,e){switch(e){case"COM":return WC(t,i,e);case"GEO":return HC(t,i,e);case"IPL":return qC(t,i,e);case"PIC":return function(t,i,e){const s=hl(t,i);if(!di(s))return;const n=zt(s),r=_h(t,i,3),h=hl(t,i),o=n(t,i);let a,u;return"--\x3e"===r?(a=r,u=$_(t,i)):(a="image/"+r.toLowerCase(),u=GC(t,i)),{id:e,mimeType:a,pictureType:h,description:o,data:u}}(t,i,e);case"SLT":return XC(t,i,e);case"TXX":return tx(t,i,e);case"UFI":return ZC(t,i,e);case"ULT":return KC(t,i,e);case"WXX":return ix(t,i,e);default:if("T"===e.charAt(0))return JC(t,i,e);if("W"===e.charAt(0))return $C(t,i,e)}}function sx(t,i,e){switch(e){case"APIC":return function(t,i,e){const s=hl(t,i);if(!di(s))return;const n=zt(s),r=$_(t,i),h=hl(t,i),o=n(t,i);let a;return a="--\x3e"===r?$_(t,i):GC(t,i),{id:e,mimeType:r,pictureType:h,description:o,data:a}}(t,i,e);case"COMM":return WC(t,i,e);case"COMR":return function(t,i,e){const s=hl(t,i);if(!di(s))return;const n=zt(s),r=$_(t,i),h=_h(t,i,8),o=$_(t,i),a=hl(t,i),u=n(t,i),c=n(t,i);let d,l;return i.Ku<t.byteLength&&(d=$_(t,i)||"image/",l=GC(t,i)),{id:e,price:r,validUntil:h,contactURL:o,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:d,sellerLogo:l}}(t,i,e);case"GEOB":return HC(t,i,e);case"IPLS":return qC(t,i,e);case"PRIV":return function(t,i,e){return{id:e,ownerIdentifier:$_(t,i),data:GC(t,i)}}(t,i,e);case"POSS":return function(t,i,e){return{id:e,format:hl(t,i),position:oo(t,i)}}(t,i,e);case"SYLT":return XC(t,i,e);case"TXXX":return tx(t,i,e);case"UFID":return ZC(t,i,e);case"USER":return function(t,i,e){const s=hl(t,i);if(!di(s))return;const n=zt(s);return{id:e,language:_h(t,i,3),text:n(t,i)}}(t,i,e);case"USLT":return KC(t,i,e);case"WXXX":return ix(t,i,e);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return JC(t,i,e);default:{const s=e.charAt(0);if("T"===s)return JC(t,i,e);if("W"===s)return $C(t,i,e)}}}!function(t){t[t.ISO_8859_1=0]="ISO_8859_1",t[t.UTF16_BOM=1]="UTF16_BOM",t[t.UTF16=2]="UTF16",t[t.UTF8=3]="UTF8"}(QC||(QC={})),function(t){t[t.V22=2]="V22",t[t.V23=3]="V23",t[t.V24=4]="V24"}(FC||(FC={}));var nx=10;function rx(t,i){return(127&hl(t,i))<<21|(127&hl(t,i))<<14|(127&hl(t,i))<<7|127&hl(t,i)}function hx(t,i){switch(t){case 4:return{d1:su(i,0),l1:su(i,1),f1:su(i,2),_1:su(i,3)};case 3:return{d1:su(i,0),l1:su(i,1),f1:su(i,2)};case 2:return{d1:su(i,0),g1:su(i,1)}}}function ox(t,i,e){switch(e.dp){case 3:e.lp.l1&&function(t,i){const e=i.Ku,s=oo(t,i)+4,n=32768&tl(t,i);i.Sm(e+s),n&&oo(t,i)}(t,i);break;case 4:e.lp.l1&&function(t,i){const e=i.Ku,s=rx(t,i);i.Sm(e+s)}(t,i)}}function ax(t,i){if(t.byteLength-i.Ku<nx)return null;if(73!==hl(t,i)||68!==hl(t,i)||51!==hl(t,i))return null;const e=hl(t,i),s=hl(t,i);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(e))return null;const n=hl(t,i),r=rx(t,i);return{dp:e,w1:s,lp:hx(e,n),A1:r}}function ux(t,i,e){switch(e){case 2:return function(t,i){if(i.Ku+6>t.byteLength)return;return{o:_h(t,i,3),rp:ol(t,i,3)}}(t,i);case 3:return function(t,i){if(i.Ku+10>t.byteLength)return;const e=_h(t,i,4),s=oo(t,i);hl(t,i);const n=hl(t,i);return{o:e,rp:s,lp:{g1:su(n,0),v1:su(n,1),groupingIdentity:su(n,2)}}}(t,i);case 4:return function(t,i){if(i.Ku+10>t.byteLength)return;const e=_h(t,i,4),s=rx(t,i);hl(t,i);const n=hl(t,i);return{o:e,rp:s,lp:{groupingIdentity:su(n,1),g1:su(n,4),v1:su(n,5),d1:su(n,6),m1:su(n,7)}}}(t,i)}}function cx(t){const i=Zn(t),e=new j(i.byteLength);let s=0;for(let t=0;t<i.byteLength;t++){const n=i[t];255===n&&t++,e[s]=n,s++}return ha(Nh(e,0,s))}function dx(t,i){const e=i||new L,s=ax(t,e);if(!s)return null;const n=function(t,i,e){const s=[],n=i.Ku;let r=qe(t,n,n+e.A1);const h=new L;switch(i.Im(e.A1),e.dp){case 2:case 3:e.lp.d1&&(r=cx(r))}ox(t,i,e);for(;h.Ku<r.byteLength;){const t=lx(r,h,e);if(void 0===t)break;s.push(t)}return s}(t,e,s);return{np:s,M1:n}}function lx(t,i,e){const s=ux(t,i,e.dp);if(void 0===s)return;if(0===s.o.charCodeAt(0)||0===s.rp)return;const n=i.Ku;let r,h,o=qe(t,n,n+s.rp);switch(i.Im(s.rp),e.dp){case 2:{const t=s;h=o,r=ex(h,new L,t.o);break}case 3:{const t=s,i=new L;!function(t,i,e){const s=e.lp;let n,r,h;s.g1&&(n=oo(t,i)),s.v1&&(r=hl(t,i)),s.groupingIdentity&&(h=hl(t,i))}(o,i,t);h=qe(o,i.Ku,o.byteLength),r=sx(h,new L,t.o);break}case 4:{const t=s,i=new L;t.lp.d1&&(o=cx(o)),function(t,i,e){const s=e.lp;let n,r,h,o;s.groupingIdentity&&(n=hl(t,i)),s.g1&&(r=oo(t,i)),s.v1&&(h=hl(t,i)),s.m1&&(o=rx(t,i))}(o,i,t);h=qe(o,i.Ku,o.byteLength),r=sx(h,new L,t.o);break}}if(!r){const t=it(Zn(h));r=VC(s.o,t.buffer)}return r}function fx(t){return function(t,i,e){return JC(t,i,e)}(new DataView(t.data),new L,t.key)}function _x(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return fx(t);default:let i=t.key.charAt(0);if("T"===i)return function(t){return{id:t.key,text:t.data}}(t);if("W"===i)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return VC(t.key,t.data)}(t)}var Ls=class t extends Pl{get q(){return this.B0}get LS(){return this.T1?this.T1.default:void 0}get L(){return this.R0}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return ra(this)}get o(){return this.kT.id||this.T1&&this.T1.id||""}get Mg(){return this.xT}get Og(){return this.kT.inBandMetadataTrackDispatchType||""}get zt(){return this.kT.kind||jo.Mm}get kh(){return this.OT}set kh(t){t!==this.OT&&(this.OT=t,void 0!==this.T1&&(this.T1.label=t),this.Co(new js(this)))}get gs(){return this.kT.language||""}get jg(){return this.iR}set jg(t){let i=this.jg;this.iR=zi(t),this.N1();let e=this.jg;i!==e&&this.Co(new Tn(this)),e!==Ha.Ch&&this.D1(Zs.LOADING)}get I1(){return zi(this.kT.mode)}set I1(t){this.kT.mode=t}get jT(){return this.kT}get Jf(){return this.M0}get S1(){return this.T1?+this.T1.readyState||Zs.NONE:Zs.LOADED}get Ug(){return this.q0}get Rg(){return this.X0}set Rg(t){this.X0!==t&&(this.X0=t,this.Co(new wC(this)))}get E1(){return this.b1}set E1(t){this.b1=t,t&&(this.L1=!0,u((()=>{this.L1=!1}),50)),this.N1()}N1(){let t=this.jg;this.E1||t!==Ha.Jn?this.I1=t:this.I1=Ha.zg}C1(){let t=this.jg,i=this.I1;t!==i&&(this.E1||t!==Ha.Jn||i!==Ha.zg)&&("metadata"===this.zt&&i===Ha.Ch?this.jg=t:this.L1&&i===Ha.Ch&&t===Ha.Jn?this.I1=t:this.jg=i)}N0(t){this.M0!==t&&(this.M0=t,this.Co(new _C(this,t)))}D1(t){let i=_.max(this.M0,this.S1,t);this.N0(i)}static O1(t){return t&&t.THEOplayerTextTrackCue||void 0}j1(i){let e=t.O1(i);if(e)return e;if(e=this.z1(i),mi(e))for(let t of e)t.Lt=this;else e.Lt=this;return i.THEOplayerTextTrackCue=e,e}z1(t){return function(t){return!(!t||"org.id3"!==t.type||!t.value)}(t)?(this.Rg=Kc.ID3,function(t){let i;try{i=_x(t.value)}catch(t){i=VC("")}return new YC(t,i)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.Rg=Kc.ID3,function(t){let i=[];try{let e=dx(new DataView(t.data));if(e)for(let s of e.M1)i.push(new YC(t,s))}catch(t){}return i}(t)):function(t){return"text"in t}(t)?(this.Rg=Kc.WEBVTT,function(t){return"regionId"in t}(t)?new zC(t):new jC(t)):new qu(t)}P1(t){let i=[];if(!t)return i;let e=t.length;for(let s=0;s<e;s++){let e=this.j1(t[s]||t.item(s));if(mi(e))for(let t of e)i.push(t);else i.push(e)}return i}B1(){let t=this.P1(this.kT.cues),i=fC(this.P0,t);for(let t of i.z0)t.fn(ku.FT,this.R1),t.fn(ku.QT,this.R1),this.Co(new pC(t));for(let t of i.j0)t.yn(ku.QT,this.R1),t.yn(ku.FT,this.R1),this.Co(new vC(t))}t1(){let t=this.P1(this.kT.activeCues),i=fC(this.W0,t);for(let t of i.z0)t.ro=!1;for(let t of i.j0)t.ro=!0;(i.j0.length||i.z0.length)&&this.Co(new LC(this))}Pg(t){this.jg=t}gn(){this.Vo();const t=this.P0.slice();for(let i of t)i.gn();No(this.P0),No(this.W0),this.kT.removeEventListener("cuechange",this.U1),this.kT.removeEventListener("cuechange",this.R1),this.T1&&(this.T1.removeEventListener("load",this.Q1),this.T1.removeEventListener("error",this.F1),sh(this.T1))}constructor(t,i,e=!0){super(),this.P0=[],this.W0=[],this.iR=Ha.Ch,this.M0=Zs.NONE,this.q0=void 0,this.X0=Kc.DEFAULT,this.L1=!1,this.U1=()=>{this.N1(),this.kT.removeEventListener("cuechange",this.U1)},this.R1=()=>{this.jg!==Ha.Ch&&(this.B1(),this.t1(),this.P0.length&&this.D1(Zs.LOADING))},this.Q1=()=>{this.D1(Zs.LOADED)},this.F1=()=>{this.D1(Zs.ERROR)},this.kT=t,this.b1=e,this.kT.addEventListener("cuechange",this.U1),this.kT.addEventListener("cuechange",this.R1),this.T1=i,this.T1&&(this.q0=ma(this.T1.src),this.T1.addEventListener("load",this.Q1),this.T1.addEventListener("error",this.F1)),this.xT=Iw(),this.OT=t.label||"",this.R0=new $r(this.P0),this.B0=new $r(this.W0),this.jg=this.I1,ac((()=>{this.R1(),this.D1(Zs.NONE)}))}};function gx(t,i){return Ge(t.uD,i.uD)||function(t,i){return t.Lt===i.Lt?Xo(lC(t),lC(i)):Pv(t.Lt,i.Lt)}(t.YT,i.YT)||function(t,i){return t===i?It.Zr:t===ku.QT?It.Nd:It.hd}(t.type,i.type)}var wx=class{tr(){No(this.Y1);for(const t of this.Dl.slice())this.it(t);this.G1(),this.V1=0,this.An=0,this.W1=!1,this.H1=!1,this.q1=void 0}tt(t){if(!qt(this.Dl,t)){if(this.Dl.push(t),t.yn(Ce.O_,this.X1),t.yn(Ce.z_,this.Z1),t.yn(Ce.B_,this.K1),t.yn(Ce.ra,this.J1),t.L.U>0){for(const i of t.L.og)this.t4.push(i);this.i4()}this.e4()}}it(t){if(To(this.Dl,t)){if(t.fn(Ce.O_,this.X1),t.fn(Ce.z_,this.Z1),t.fn(Ce.B_,this.K1),t.fn(Ce.ra,this.J1),t.L.U>0){for(const i of t.L.og)To(this.Y1,i),To(this.t4,i);this.i4()}this.e4()}}e4(){this.W1=this.Dl.some((t=>t.jg!==Ha.Ch))}s4(){this.Qo.e_||this.Qo.Ff?this.G1():this.i4()}i4(){this.W1&&(this.V1||(this.V1=this.r4.n4(this.h4)))}G1(){this.V1&&(this.r4.o4(this.V1),this.V1=0)}a4(){if(!this.W1)return;if(this.Qo.e_)return;const t=this.Dl,i=this.An;var e;const s=null!=(e=this.q1)?e:this.Qo.Mf,n=s-i<-.1;let r=this.H1||n;r&&s>i&&s-i<.1&&(r=!1),this.H1=!1,this.q1=void 0;const h=[];for(const i of t)if(i.jg!==Ha.Ch){i.t1(s,r);for(const t of i.q.og)h.push(t)}const o=this.Y1.slice();if(r);else for(const e of t)e.jg!==Ha.Ch&&zv(e,i-Ac,s,o);for(let t=o.length-1;t>=0;t--)qt(h,o[t])&&M(o,t);const a=[];if(!r)for(let t=o.length-1;t>=0;t--){const e=o[t];e.GT>i&&e.VT<=s&&(a.push(e),M(o,t))}for(const t of this.t4)To(a,t);No(this.t4);const u=[],c=[];for(const t of a)t.ro||u.push(new MC(t,t.GT)),u.push(new NC(t,_.max(t.GT,t.VT))),t.ro=!1;for(const t of o)t.ro&&(u.push(new NC(t,_.max(t.GT,t.VT))),t.ro=!1);for(const t of h)t.ro||(u.push(new MC(t,t.GT)),t.ro=!0);u.sort(gx);for(const t of u){const i=t.YT;i.Co(t);const e=i.Lt;e&&(t.type===ku.QT?e.Co(new IC(i)):e.Co(new EC(i)),qt(c,e)||c.push(e))}c.sort(Pv);for(const t of c)t.Co(new LC(t));this.An=s,this.Y1=h}gn(){this.tr(),this.Qo.fn(l.Sw,this.u4),this.Qo.fn(l.jh,this.u4),this.Qo.fn(er.Rw,this.u4),this.Qo.fn(l.Sh,this.u4),this.Qo.fn(l.yw,this.c4),this.Qo.fn(l.pw,this.d4)}constructor(t,i){this.Dl=[],this.V1=0,this.An=0,this.Y1=[],this.t4=[],this.W1=!1,this.H1=!1,this.q1=void 0,this.h4=()=>{this.V1=0,this.a4(),this.s4()},this.u4=()=>{this.a4(),this.s4()},this.c4=()=>{this.H1=!0,this.q1=this.Qo.Mf,this.G1()},this.d4=()=>{this.a4(),this.s4()},this.J1=()=>{this.e4(),this.a4(),this.s4()},this.X1=t=>{const i=t.YT;qt(this.t4,i)||this.t4.push(i),this.i4()},this.Z1=t=>{const i=t.YT;To(this.Y1,i),To(this.t4,i),this.i4()},this.K1=t=>{this.i4()},this.r4=i,this.Qo=t,t.yn(l.Sw,this.u4),t.yn(l.jh,this.u4),t.yn(er.Rw,this.u4),t.yn(l.Sh,this.u4),t.yn(l.yw,this.c4),t.yn(l.pw,this.d4),this.i4()}},Ax=class{n4(t){return _r(t)}o4(t){gn(t)}},vx=new Ax,zr=class extends wx{constructor(t,i=vx){super(t,i)}},mx=class extends Gs{get va(){return this.Xa||(this.Xa=UC(this)),this.Xa}aN(t){return PC(this,t)}constructor(t,i,e){super(t,1/0,i,!1,e)}},px=class extends ze{constructor(t,i,e=Kc.DEFAULT){super(jo.Nm,"",i||"","",!1,e,!1,t)}},yx=class extends px{SS(t){BC(t,this.P0),super.SS(t)}fa(){return ra(this)}constructor(t,i){super(t,i),this.Rg=Kc.ID3}};function Mx(t){const i=t&&t.THEOplayerTextTrackCue||void 0;if(i)return i;const e=t.startTime,s=_x(t.value);return t.THEOplayerTextTrackCue=new mx(e,s),t.THEOplayerTextTrackCue}var Tx=class extends yx{get o(){return this.kT.id||""}get Og(){return this.kT.inBandMetadataTrackDispatchType||""}get gs(){return this.kT.language||""}Xo(t){super.Xo(t),this.I1=this.jg}get I1(){return zi(this.kT.mode)}set I1(t){this.kT.mode=t}get jT(){return this.kT}D1(t){this.Jf=_.max(this.Jf,t)}B1(){let t=this.kT.cues;if(!t)return;let i=function(t){const i=t.length,e=[];for(let s=0;s<i;s++)e.push(Mx(t[s]||t.item(s)));return pd(e,Ma),e}(t),e=fC(this.L.og.slice(),i);for(let t of e.z0)this.xI(t);for(let t of e.j0)this.SS(t)}gn(){this.kT.removeEventListener("cuechange",this.R1),super.gn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.R1=()=>{this.jg!==Ha.Ch&&(this.B1(),this.D1(Zs.LOADED))},this.kT=t,this.kT.addEventListener("cuechange",this.R1),this.jg=this.I1,ac((()=>{this.R1()}))}};var Nx=class extends St{l4(){this.f4.yn(Mi.L_,this.kz),this.f4.yn(Mi.C_,this.Cz)}_4(){this.f4.fn(Mi.L_,this.kz),this.f4.fn(Mi.C_,this.Cz)}g4(t){const i=t.L.og[0];if(!Dx(i))return;const e=function(t){const i=t.match(Ix);if(!i)return;return{Lt:i[1],gs:i[2]}}(i.O.description),s=e.Lt,n=e.gs;if(this.w4(s,n))return;const r=this.MS.yS(jo.Mm,t.o,s,n,!1,Kc.TTML);this.tt(r),this.A4.set(t.Mg,r);for(let i of t.L.og)Dx(i)&&this.v4(i);t.yn(Ce.O_,this.m4)}w4(t,i){return this.Z.og.some((e=>e.kh===t&&e.gs===i))}v4(t){if(!t.Lt)return;const i=this.A4.get(t.Lt.Mg),e=cv(t.O.text,i,{BD:0,RD:1/0,UD:t.GT});for(let t of e)i.SS(t)}async tr(){for(let t of this.f4.og)t.fn(Ce.O_,this.m4);for(let t of this.Z.og)this.MS.bS(t);this.A4.clear(),await super.tr()}async gn(){this._4(),await super.gn()}constructor(t,i){super(),this.MS=t,this.f4=i,this.A4=pt(),this.kz=async t=>{const i=t.Lt;if(i.Rg||await i.df(Ce.X_),i.Rg===Kc.ID3){for(;0===i.L.U;)await i.df(Ce.O_);this.g4(i)}},this.Cz=t=>{const i=t.Lt;if(i.Rg!==Kc.ID3||!this.A4.has(i.Mg))return;const e=this.A4.get(i.Mg);this.it(e),this.MS.bS(e),i.fn(Ce.O_,this.m4)},this.m4=t=>{Dx(t.YT)&&this.v4(t.YT)},this.l4()}};function Dx(t){return function(t){return function(t){return"TXXX"===t.id||"TXX"===t.id}(t)&&Ix.test(t.description)}(t.O)}var Ix=/^Track:(.+),Lang:(.+)$/;var hn=class extends wn{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(t){super(l.Vg),this.errorObject=t}},Sx=class extends wn{constructor(){super(l.Wg)}},Ex=class extends wn{constructor(t){super("Cw"),this.y4=t}},bx=new jn,Lx=class extends wn{constructor(t){super("Ws"),this.session=t}},kx=class extends Pl{mC(){return this.M4=!0,bx.Mx((t=>this.T4(t)),this.Tx.Hd)}async T4(t){try{Bo(t),await this.N4.pO(t);const i=await this.N4.yO(this.D4.Eb,this.D4.Ub,t);await this.I4.mC(this.D4.Eb,this.D4.Ub,i)}catch(t){Ao(t);const i=t instanceof Mm?t.Jb:void 0,e=new Qr(Ui.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,i);throw this.Ss(e),e}}async bO(t,i){let e;try{e=function(t){return p_(t,mm())}(t)?await this.N4.BO(new j(t),this.Tx.Hd):await this.N4.RO(new j(t),i,this.Tx.Hd)}catch(t){if(ut(t))return;throw t}if(this.Tx.Hd.Bd)return;const s=this.S4,n=new Rs;this.S4=n;try{await this.I4.Yn(e),await ri(100)}catch(t){const i=t instanceof Mm?t.Jb:void 0;throw new Qr(Ui.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,i)}finally{void 0!==s&&await s.Zb,n.Wb(),this.S4===n&&(this.S4=void 0)}}Ss(t){const i=t instanceof Qr?t:new Qr(Ui.CONTENT_PROTECTION_ERROR,t.message,t);this.Co(new hn(i)),this.Ws()}E4(){this.I4.fn("Ob",this.TC),this.I4.fn("Cb",this.b4),this.I4.fn("lt",this.L4),this.C4=!1,this.Tx.Xd(),this.Co(new Lx(this))}async Ws(){let t;this.Vo();do{t=this.S4,void 0!==t&&await t.Zb}while(this.S4!==t);this.E4(),await this.I4.Ws().catch(El)}constructor(t,e,s){super(),this.I4=t,this.N4=e,this.D4=s,this.M4=!1,this.C4=!1,this.Tx=new na,this.TC=t=>{if(!this.Tx.Hd.Bd)switch(t.jb){case"license-request":case"license-renewal":this.bO(t.Ob,t.zb).catch((t=>this.Ss(t)));break;default:this.Ss(new Qr(Ui.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.jb))}},this.b4=t=>{this.I4._C.Yb(((t,e)=>{switch(t){case"usable":i.ul((()=>{this.C4=!0,this.Co(new Sx)}),100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this.Co(new Ex(e))}}))},this.L4=t=>{this.Ss(new Qr(Ui.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.yn("Ob",this.TC),t.yn("Cb",this.b4),t.yn("lt",this.L4),t.cC.then((()=>this.E4()),(t=>this.Ss(t)))}},Cx=[l.Wg,l.Vg,l.Lw],xx=class extends Pl{get ZA(){return this.KA}mO(){return this.x4.mO()}O4(t){return this.j4||(this.j4=this.z4(t)),this.j4}async z4(t){Bo(t);const i=await this.x4.BO(new j(mm()),t);if(Bo(t),!this.IC)throw new g("Invalid MediaKeys when setting ServerCertificate");await this.IC.SC(i.buffer)}async P4(t){if(!this.IC)throw new g("Invalid MediaKeys when creating KeySession");try{this.B4.push(t);const i=await this.IC.DC("temporary"),e=new kx(i,this.x4,t);return this.R4.push(e),e.yn(Cx,this.Ds),e.yn("Ws",this.U4),e}finally{To(this.B4,t)}}Q4(t){if(t.F4)return!1;for(const i of this.R4)if(Ox(i.D4,t))return!0;for(const i of this.B4)if(Ox(i,t))return!0;return!1}async gn(){this.IC=void 0,this.Vo();const t=this.R4.slice();No(this.R4),await Promise.all(t.map((t=>t.Ws()))),this.x4.Qd()}constructor(t,i,e){super(),this.R4=[],this.j4=void 0,this.B4=[],this.U4=t=>{t.session.fn(Cx,this.Ds),t.session.fn("Ws",this.U4),To(this.R4,t.session)},this.KA=t,this.IC=i,this.x4=e}};function Ox(t,i){return!t.F4&&t.Eb===i.Eb&&p_(t.Ub,i.Ub)}var jx=class extends Pl{get Y4(){var t;return null==(t=this.KA)?void 0:t.ZA}get uP(){return this.x4}set uP(t){this.x4=t}$n(t,i){this.Fz=t,this.Aq(i)}Aq(t){this.lx=t,this.G4(this.Tx.Hd).catch(el)}async G4(t){if(!i.Ys.V4||!await this.W4(t))return this.lx&&this.lx.H4?await this.q4(t):void 0}async W4(t){var i,e;if(!(null==(i=this.lx)?void 0:i.Xz))return!1;let s=!1;var n;for(const i of null!=(n=null==(e=this.lx)?void 0:e.Xz)?n:[]){var r;for(const e of null!=(r=i.Mz)?r:[])try{await this.X4(i.ZA.Eb,e,t),s=!0}catch(t){Ao(t)}if(s)return!0}return!1}async X4(t,e,s){if(Bo(s),!e.byteLength)return;if(!this.lx||!this.lx.Xz.length)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(t!==i_&&t!==mn&&t!==e_)return void 0;const n=xg(t,e),r=this.lx.Xz;let h;for(const i of r){Bo(s);const e=n[i.ZA.bb];if(e&&i.ZA.Eb===t)try{const t=await this.Z4(i,s);t.mO()&&await t.O4();const n=this.sA.xf,r={Eb:i.ZA.Eb,Ub:e,F4:n};if(this.K4(t,r)){const i=await t.P4(r);await i.mC()}return}catch(t){Ao(t),h=t}}throw await i.GC()?new Qr(Ui.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",h):new Qr(Ui.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",h)}async q4(t){var i;const e=null==(i=this.lx)?void 0:i.Xz;if(e)for(const i of e){Bo(t);try{const e=await this.Z4(i,t);return void(e.mO()&&await e.O4())}catch(t){Ao(t)}}}K4(t,e){return i.Ys.J4||this.sA.t2.rq||!t.Q4(e)}Z4(t,i){return this.Mq.Mx((i=>this.i2(t,i)),i)}async i2(t,i){if(Bo(i),!this.lx||!this.x4||!this.Fz)throw new g("Not initialized");if(this.KA){if(this.KA.ZA!==t.ZA)throw new g("Internal key system error");return this.KA}const e=this.x4,s=Tt({},t,{vP:t.vP.map((i=>{var s;return Tt({},i,{persistentState:null!=(s=i.persistentState)?s:e.qO(t.ZA),HC:i.HC||e.HC(t.ZA)})}))}),n=await this.Fz.fq(s.ZA,s.vP),r=e.yz(s),h=new xx(s.ZA,n,r);return h.yn([l.Wg,l.Vg,l.Lw],this.Ds),this.KA=h,h}Ss(t){if(ut(t))return;const i=t instanceof Qr?t:new Qr(Ui.CONTENT_PROTECTION_ERROR,t.message,t);this.Co(new hn(i))}async tr(){this.Fz=void 0,this.lx=void 0,this.Tx.Xd(),this.Tx=new na,await this.e2()}async e2(){await this.Mq.Xd();const t=this.KA;t&&(t.fn(l.Lw,this.Ds),this.KA=void 0,await t.gn())}async Qd(){this.Vo(),this.sA.fn(fe.Kg,this.s2),await this.tr(),await this.Mq.gn()}constructor(t){super(),this.Tx=new na,this.Mq=new jn,this.lx=void 0,this.x4=void 0,this.Fz=void 0,this.KA=void 0,this.s2=t=>{this.X4(t.Eb,t.Ub,this.Tx.Hd).catch((t=>this.Ss(t)))},this.sA=t,this.sA.yn(fe.Kg,this.s2)}},zx=class extends wn{constructor(t){super(l.aw),this.currentTime=t}},Px=class extends Pl{get Jf(){return void 0!==this.n2?this.n2.Jf:ae.aT}N0(){var t;null==(t=this.n2)||t.N0()}tr(){var t;null==(t=this.n2)||t.tr()}Qd(){this.Vo(),void 0!==this.n2&&(this.n2.Qd(),this.n2=void 0)}h2(t){if(this.n2===t)return;const i=this.Jf;void 0!==this.n2&&this.n2.Qd(),this.n2=t,void 0!==t&&(t.yn(er.H_,this.Ds),t.N0());const e=this.Jf;i!==e&&this.Co(new Lr(this.o2.Mf,e))}constructor(t){super(),this.o2=t}},Bx=Vt.OE||Vt.zE,Rx=Vt.Nb,Ux=Vt.WE,Qx=Vt.WE&&Vt.Ga,Fx=class extends Pl{a2(){this.Uz.ended||this.Mf===this.ct||(this.u2=!1)}get I0(){return this.c2}get wf(){return this.Fz?this.Fz.wf:Ai.SB()}get vf(){const t=this.Yz;if(!t||S(t.getTime()))return;const i=1e3*this.Mf;return new Date(t.getTime()+i)}get Yz(){if(this.Uz.getStartDate)return this.bB&&this.d2||(this.d2=this.Uz.getStartDate()),this.d2}get Mf(){return this.l2?this.l2.Mf:void 0!==this.f2?this.f2:this.Ox.currentTime}get Iu(){return this.Wu}get ct(){return this.l2?this.l2.ct:this.Fz?this.Fz.ct:this.Ox.duration}get If(){return this.e_?this._2():this.l2?this.l2.If:this.Ox.ended||this.u2}_2(){return void 0!==this.f2&&this.ct===this.f2}get lt(){return this.Bz}get Uz(){return this.Ox}get Ff(){return this.g2?this.w2:this.l2?this.l2.Ff:this.Ox.paused}get Hf(){return this.Uo.cB(Ai.xn(this.Ox.played))}get Ti(){return this.Ox.offsetHeight*i.Ys.A2}get ji(){return this.Ox.offsetWidth*i.Ys.A2}get ya(){return this.xB}get Jf(){return this.m2.Jf}get t_(){return this.Fz?this.Fz.t_:Ai.SB()}get e_(){return this.l2?this.l2.e_:this.bB}get m0(){return this.l2?this.l2.m0:this.p0}get L0(){return 0!==this.M2}get Pf(){return this.l2?this.l2.Pf:this.Ox.muted}set Pf(t){this.l2?this.l2.Pf=t:(this.Ox.muted=t,this.T2())}get Gf(){return this.l2?this.l2.Gf:void 0!==this.N2?this.N2:this.Ox.playbackRate}set Gf(t){this.l2?this.l2.Gf=t:this.Ff||this.c2?(this.N2=t,this.D2()):(this.N2=void 0,this.Ox.playbackRate=t,this.D2())}D2(){const t=this.Gf;this.I2!==t&&(this.I2=t,this.Co(new Oi(this.Mf,t)))}get S2(){return this.ZP}get c_(){return this.l2?this.l2.c_:this.Ox.volume}set c_(t){this.l2?this.l2.c_=t:(this.Ox.volume=t,this.T2())}T2(){const t=this.c_,i=this.Pf;this.E2===t&&this.b2===i||(this.E2=t,this.b2=i,this.Co(new lo(this.Mf,this.c_)))}zf(){return lL(this.Ox)}p_(){this.L2||(this.L2=!0);const t=this.C2();return this.O2(),t}O2(){this.g2?this.w2&&(this.w2=!1,this.Co(new Ps(this.Mf))):this.j2()}j2(){if(this.l2)this.l2.p_();else{Vt.WE&&!Vt.Ga&&this.Ox.preload===Qe.FP&&(this.Ox.preload=Qe.Nm);const t=this.Gf,i=this.Ox.play();t!==this.Uz.playbackRate&&(this.Gf=t),Sd(i)?i.then(this.z2,this.P2):this.B2.k0()&&this.R2()}}m_(){this.g2?this.w2||(this.w2=!0,this.Co(new ye(this.Mf))):this.U2()}U2(){this.l2?this.l2.m_():(this.Ox.pause(),this.B2.Yn()),this.Q2(new pe)}C2(){const t=new Rs;return this.F2.push(t),t.Zb}Y2(){for(const t of this.F2)t.Wb(void 0);No(this.F2)}Q2(t){for(const i of this.F2)i.qb(t);No(this.F2)}R2(){this.g2||this.l2||this.Y2()}G2(t){this.g2||this.l2||this.Q2(t)}Sm(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.l2?this.l2.Sm(t,i,e):(this.V2.Xd(),this.V2=new na,this.W2=this.H2(t,i,e,this.W2,this.V2.Hd).catch(El))}zz(t){const i=this.Yz;if(!i||S(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Sm(e)}async H2(t,e,s,n,r){try{for(this.f2=t,this.q2=t,this.X2=i.Jd(),s&&!this.bB?this.p0=!0:(this.bB=!0,this.p0=!1),this.u2&&!this._2()&&(this.u2=!1),this.p0?this.Co(new Zk(this.Mf)):this.Co(new Oe(t)),await n.catch(El),Bo(r),this.Z2&&this.K2(),this.m2.Jf===ae.aT&&await this.m2.df(er.H_,r);0===this.Ox.seekable.length||Qx&&!this.L2;)await Promise.race([ci(this.Ox,"timeupdate",r),ri(100,r)]),Bo(r);let h=Gk(this.wf,t,.05),o=this.t_,a=!0,u=!1;for(;;){if(o=this.t_,o.U>0&&!o.gr(h)&&(h=o.rB(h),a=!0),e&&!this.Ox.fastSeek){const t=this.wf;if(!t.gr(h)){const i=Gk(t,h,1);i!==h&&(h=i,a=!0)}}if(Ux){const t=this.J2();void 0!==t&&h>t&&(h=t,a=!0)}if(!u){const t=this.t3();void 0!==t&&h>t&&(u=!0,await this.i3(t,!1,r),await ci(this.Ox,"seeked",r),Bo(r),a=!0)}if(a){a=!1,await this.i3(h,e,r),Bo(r);let t=this.Mf;o=this.t_,h=o.rB(h);let i=1;for(;_.abs(h-t)>=Ac;)o=this.t_,h=Gx(h,o,i),await this.i3(h,e,r),Bo(r),t=this.Mf,i++}if(!(this.Ox.seeking||this.m2.Jf<ae.uT))break;await vu((t=>{var i;return Promise.race([ci(this.Ox,"seeked",t),this.df([l.gw,l.Xg],t),this.m2.df(er.H_,t),null==(i=this.Fz)?void 0:i.df(An.tU,t)].filter(Yt))}),r),Bo(r)}this.e3()}catch(t){if(ut(t))return;0}}async i3(t,i,e){Bo(e);let s=this.t_;if(t=s.rB(t),this.Z2){let i=!0;for(;i||this.m2.Jf<ae.cT;)s=this.t_,s.gr(t)||(t=s.rB(t),i=!0),i?(i=!1,this.f2=t,this.s3(this.Mf)):await vu((t=>Promise.race([this.df(l.Xg,t),this.m2.df(er.H_,t)])),e);Bo(e)}const n=ci(this.Ox,"seeking",e);i&&this.Ox.fastSeek?this.Ox.fastSeek(t):this.Ox.currentTime=t,this.f2=void 0,this.s3(this.Mf),this.Ox.seeking&&await n}J2(){if(!this.Fz||!this.Fz.Cq)return;const t=this.Fz.xq,i=this.Fz.Oq,e=t&&i?t.Sn(i):t||i;if(!e||0===e.U)return;const s=e.Cn(e.U-1),n=e.jn(e.U-1);return _.max(s,n-.001)}t3(){if(!this.Fz||!this.Fz.Cq)return;const t=this.Fz.Oq;if(!t||0===t.U)return;const i=t.Cn(t.U-1);let e=t.jn(t.U-1)-.02;return e-=.001,_.max(i,e)}s3(t){this.q2!==t&&(this.q2=t,this.p0?this.Co(new Zk(t)):this.Co(new Oe(t)))}e3(){const t=this.p0;this.bB=!1,this.p0=!1,this.X2=0,this.q2=NaN,this.Z2&&this.n3(),t?(this.Co(new zx(this.Mf)),this.r3()):this.Co(new Ms(this.Mf))}K2(){this.g2||(this.w2=this.Ff,this.g2=!0,this.U2())}n3(){this.g2&&(this.g2=!1,this.w2||this.O2())}jq(t){for(const i of t){if(i.Rg===wi.Wx&&zL.jq(i,this.Ox))return i;if(i.Rg===wi.Hx&&qk.jq(i))return i}}be(){this.ZP=!1,me(this.Ox)&&(this.Ox.style.display="none")}ge(){this.ZP=!0,me(this.Ox)&&(this.Ox.style.display="block")}get nt(){return this.h3}get Ol(){return this.RB}yS(t,i,e,s,n,r,h,o,a){const u=new ze(t,i,e,s,n,r,h,a,o);return this.Dl.tt(u),this.o3.tt(u),u}iP(){return!0}sP(t,i,e,s,n){const r=h.createElement("track");r.src=ma(t),r.kind=i,r.label=null!=e?e:"",s&&(r.srclang=s),r.default=!!n,r.id=sI(),this.Ox.appendChild(r);const o=this.Ox.textTracks.getTrackById(r.id),a=new Ls(o,r);return this.a3.tt(a),this.u3.push(a),a}bS(t){this.Dl.it(t),this.o3.it(t)}rP(){for(const t of this.Dl.og.slice())t.gn();this.Dl.tr();for(const t of this.u3.slice())this.a3.it(t),t.gn();No(this.u3)}mP(){let t=this.Ox.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this.d3),t.addEventListener("removetrack",this.l3),t.addEventListener("change",this.f3))}aP(){let t=this.Ox.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this.d3),t.removeEventListener("removetrack",this.l3),t.removeEventListener("change",this.f3))}_3(t,i){if(Vt.WE){if(t.kind===jo.Nm)return void this.g3(t);if(t.kind===jo.yI&&""===t.label&&""===t.language&&!Wx(t))return void this.w3(t,i)}Vx(this.a3,t)||this.a3.tt(new Ls(t,i))}g3(t){t.mode=Ha.zg;const i=new Tx(t);this.a3.tt(i),this.o3.tt(i)}w3(t,i){const e=()=>{Wx(t)&&(t.removeEventListener("cuechange",e),this.a3.tt(new Ls(t,i)))};t.addEventListener("cuechange",e),t.mode=Ha.zg}A3(t){let i=this.Ox.getElementsByTagName("track");for(let e=0;e<i.length;e++){let s=i[e]||i.item(e);if(s.track===t)return s}}$n(t){return this.v3.Mx((async i=>{if(Bo(i),this.Fz)throw new g("Already loaded a media source");let e;if(t.Rg===wi.Wx)e=new zL(t,this,this.vq,this.YC),this.Z2=!1,this.m2.h2(this.m3());else{if(t.Rg!==wi.Hx)throw new g("Unsupported configuration");{this.Z2=Bx;const i=this.m3();e=new qk(t,this,i,this.vq,this.YC,void 0,this.G$),this.m2.h2(i),Rx&&(this.yn(l.Sw,this.y3),this.m2.yn(er.H_,this.M3))}}return this.Fz=e,await e.bW(),e}))}m3(){return this.Z2?new sC(this):new ic(this)}T3(){if(this.c2)return;const t=this.Gf;this.c2=!0,this.Gf=t,this.Ox.playbackRate=0,this.m2&&this.m2.N0()}N3(){if(!this.c2)return;const t=this.Gf;this.c2=!1,this.Gf=t,this.D3()}D3(){this.Ox.currentTime=this.Ox.currentTime,this.m2&&this.m2.N0()}async tr(){this.bB=!1,this.p0=!1,i.$d(this.M2),this.M2=0,this.Uo=Ai.SB(),this.V2.Xd(),this.f2=void 0,this.q2=NaN,this.d2=void 0,this.Z2=!1,this.g2=!1,this.Bz=void 0,this.u2=!1,this.I3=void 0,this.S3=!1,this.L2=!1,this.E3&&(this.b3(),this.E3=!1),this.Q2(new pe),this.m2.h2(new ic(this)),this.B2.tr(),this.a3.tr(),this.N3(),Rx&&(gn(this.L3),this.L3=0,this.fn(l.Sw,this.y3)),await this.v3.Xd(),await this.v3.Mx((async()=>{this.Fz&&(await this.Fz.Qd(),this.Fz=void 0,Vt.DE&&Vt.EE<3&&this.C3())}))}C3(){this.x3();const t=this.Ox,i=t.parentElement,e=t.tagName.toLowerCase();this.Ox=pj(e),this.retainMediaElementState(t),yj(t),null==i||i.replaceChild(this.Ox,t),this.b3(),this.m2.h2(this.m3()),this.B2.fn(er.Rw,this.O3),this.B2.Qd(),this.B2=new hC(this),this.B2.yn(er.Rw,this.O3),this.ZP?this.ge():this.be(),this.Co(new mu),this.Co(new ft)}retainMediaElementState(t){this.Uz.muted=t.muted,this.Uz.volume=t.volume}async Qd(){this.E3=!1,this.x3(),this.aP(),await this.tr(),await this.v3.gn(),this.B2.Qd(),this.m2.Qd(),await this.vq.Qd(),this.rP(),this.Dl.gn(),this.a3.gn(),await this.j3.gn(),this.z3.gn(),this.h3.gn(),this.Vo()}b3(){this.Uz.addEventListener("play",this.P3),this.Uz.addEventListener("pause",this.B3),this.Uz.addEventListener("timeupdate",this.R3),this.Uz.addEventListener("progress",this.U3),this.Uz.addEventListener("loadstart",this.Q3),this.Uz.addEventListener("ended",this.F3),this.Uz.addEventListener("ratechange",this.Y3),this.Uz.addEventListener("volumechange",this.G3),this.Uz.addEventListener("durationchange",this.V3),this.Uz.addEventListener("resize",this.W3),this.Uz.addEventListener("loadedmetadata",this.W3),this.Uz.addEventListener("error",this.H3),this.Uz.addEventListener("emptied",this.q3),Uy()?(this.Ox.addEventListener("encrypted",this.X3),this.Ox.addEventListener("waitingforkey",this.Z3)):void 0!==Or.WebKitMediaKeys&&"function"==typeof Or.WebKitMediaKeys.isTypeSupported?this.Ox.addEventListener("webkitneedkey",this.K3):Hn()?this.Ox.addEventListener("webkitneedkey",this.J3):void 0!==Or.MSMediaKeys&&"function"==typeof Or.MSMediaKeys.isTypeSupported&&this.Ox.addEventListener("msneedkey",this.t5)}x3(){this.Uz.removeEventListener("play",this.P3),this.Uz.removeEventListener("pause",this.B3),this.Uz.removeEventListener("timeupdate",this.R3),this.Uz.removeEventListener("progress",this.U3),this.Uz.removeEventListener("loadstart",this.Q3),this.Uz.removeEventListener("ended",this.F3),this.Uz.removeEventListener("ratechange",this.Y3),this.Uz.removeEventListener("volumechange",this.G3),this.Uz.removeEventListener("durationchange",this.V3),this.Uz.removeEventListener("resize",this.W3),this.Uz.removeEventListener("loadedmetadata",this.W3),this.Uz.removeEventListener("error",this.H3),this.Uz.removeEventListener("encrypted",this.X3),this.Uz.removeEventListener("waitingforkey",this.Z3),this.Uz.removeEventListener("webkitneedkey",this.K3),this.Uz.removeEventListener("webkitneedkey",this.J3),this.Uz.removeEventListener("msneedkey",this.t5),this.Uz.removeEventListener("emptied",this.q3)}i5(){this.l2||(this.Uo=this.Hf,this.l2=$k(this),this.x3(),this.l2.yn(Kk,this.Ds))}e5(){if(!this.l2)return;const t=this.l2;this.l2=void 0,this.m2.N0(),tC(this,t),t.Qd(),this.b3()}r3(){const t=this.Mf;this.Co(new nc(t,void 0)),this.I3=t}IP(t){this.Bz=t,this.Q2(this.Bz),this.Co(new oC(this.Bz))}get xf(){return!!this.Ox.webkitCurrentPlaybackTargetIsWireless}get s5(){return this.n5}get t2(){return Tt({},kL)}r5(){this.s5||(Tj(this.Ox,i.Ys),this.n5=!0)}h5(t){t.appendChild(this.Ox)}XJ(){Rx&&this.y3(),this.m2.N0()}get uP(){return this.vq.uP}set uP(t){this.vq.uP=t}get o5(){return this.G$}set o5(t){this.G$=t}get Y4(){return this.vq.Y4}D_(){this.vq.e2().catch(El),this.a3.tr()}get g_(){return this.S3}set g_(t){this.S3=t,this.E3&&!this.S3&&(this.E3=!1,this.b3())}constructor(t,e,s,n){super(),this.Bz=void 0,this.ZP=!0,this.Fz=void 0,this.v3=new jn,this.l2=void 0,this.xB=new Wu,this.u3=[],this.f2=void 0,this.X2=0,this.q2=NaN,this.d2=void 0,this.I3=void 0,this.bB=!1,this.p0=!1,this.a5=ae.aT,this.M2=0,this.W2=Promise.resolve(),this.V2=new na,this.F2=[],this.Uo=Ai.SB(),this.N2=void 0,this.I2=1,this.b2=!1,this.E2=1,this.u2=!1,this.S3=!1,this.E3=!1,this.Z2=!1,this.g2=!1,this.w2=!1,this.c2=!1,this.n5=!1,this.L3=0,this.L2=!1,this.d3=t=>{const i=t.track,e=this.A3(i);this._3(i,e)},this.l3=t=>{const i=Vx(this.a3,t.track);i&&this.a3.it(i)},this.f3=()=>{for(let t=0;t<this.a3.U;t++){let i=this.a3.cg(t);i instanceof Ls&&i.C1()}},this.y3=()=>{if(void 0===this.Fz||!CL(this.Fz))return;const t=this.Fz,i=t.V$,e=t.W$;if(!i||!e)return;if(t.Cq)return void this.N3();if(t.Jf===Pn.UJ)return;const s=i.wf,n=e.wf;if(0===s.U&&0===n.U)return void this.N3();const r=this.Mf;if(r<s.Cn(0)||r<n.Cn(0))return void this.N3();if(s.gr(r)!==n.gr(r)){if(t.mq(r))return;this.T3()}else if(this.N3(),!this.L3&&this.B2.k0()){s.dB(n).wB(r,r+.5)&&(this.L3=_r(this.u5))}},this.u5=()=>{this.L3=0,this.y3()},this.M3=()=>{if(this.e_||this.m0)return;if(this.m2.Jf>=ae.cT)return;if(void 0===this.Fz||!CL(this.Fz))return;const t=this.Fz,i=t.V$,e=t.W$;if(!i||!e)return;const s=this.Mf,n=i.wf,r=e.wf;if(!n.gr(s)||!r.gr(s))return;n.dB(r).wB(s-5,s)&&(this.c2?this.N3():this.D3())},this.P3=()=>{this.Co(new Ps(this.Mf))},this.B3=()=>{this.G2(new pe),this.Co(new ye(this.Mf))},this.O3=()=>{this.R2(),this.Co(new tn(this.Mf))},this.Y3=()=>{this.D2()},this.V3=()=>{this.Co(new ht(this.ct))},this.U3=()=>{this.Co(new ki(this.Mf))},this.Q3=()=>{this.Co(new kn)},this.R3=()=>{const t=this.Mf,i=this.e_,e=this.m2.Jf<ae.cT&&!this.If,s=void 0!==this.I3,n=s&&this.I3!==t;(i||!s||n&&!e)&&this.r3()},this.F3=()=>{!this.u2&&this.If&&(this.u2=!0,this.Co(new ie(this.Mf)))},this.H3=()=>{if(null!==this.Ox.error){const i=this.Ox.error;var t;this.IP(new Hu(null!=(t=i.code)?t:Aw.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.q3=()=>{this.S3&&(this.x3(),this.E3=!0)},this.c5=t=>{if(i.$d(this.M2),this.M2=0,t.readyState<=ae.uT)if(this.bB||this.p0){const e=i.Jd()-this.X2;if(e<250)return void(this.M2=i.ul((()=>this.c5(t)),250-e))}else if(void 0!==this.Fz&&this.Fz.mq(this.Mf))return void(this.M2=i.ul((()=>this.c5(t)),250));this.a5!==t.readyState&&(this.a5=t.readyState,this.Co(t))},this.G3=()=>{this.T2()},this.W3=()=>{this.a_>0&&this.r_>0&&this.Co(new Vu)},this.X3=t=>{this.Co(new Ns(t.initDataType,t.initData||new ArrayBuffer(0)))},this.Z3=()=>{this.Co(new Am)},this.t5=t=>{const i=t.initData,e=i?it(i).buffer:new ArrayBuffer(0);this.Co(new Ns(i_,e))},this.K3=t=>{if(t.initData){const i=function(t){try{const i=ha(t),e=new L,s=Eu(i,e,oo(i,e,!0));return Sa(hg(s,!0))}catch(t){return}}(t.initData);if(!i)return;this.Co(new Ns(mn,i))}else this.Co(new Ns(mn,new ArrayBuffer(0)))},this.J3=t=>{const i=t.initData,e=i?it(i).buffer:new ArrayBuffer(0);this.Co(new Ns(i_,e))},this.z2=()=>{this.R2()},this.P2=t=>{this.G2(t)},this.d5=t=>{this.Co(t),t.type===l.Vg&&this.IP(De(t.errorObject))},this.Ox=t,this.YC=e,this.Wu=s,this.RB=n,this.m2=new Px(this),this.m2.yn(er.H_,this.c5),this.m2.h2(new ic(this)),this.B2=new hC(this),this.B2.yn(er.Rw,this.O3),this.vq=new jx(this),this.vq.yn([l.Wg,l.Vg,l.Lw],this.d5),this.Dl=new We,this.a3=new We,this.z3=new Ln([this.Dl,this.a3]),this.j3=new Nx(this,this.z3),this.h3=new Ln([this.z3,this.j3.Z]),this.o3=new zr(this),this.b3(),this.mP()}};var Yx=.01;function Gx(t,i,e){if(void 0===e&&(e=0),!i.U)return 0;let s=i.rB(t);const n=Yx*e;return s===i.Cn(0)?s+=n:s===i.jn(i.U-1)&&(s-=n),s}function Vx(t,i){for(let e of t.og)if(e.jT===i)return e}function Wx(t){return!!t.cues&&t.cues.length>0}var Hx={FH:void 0,YH:void 0,GH:void 0,VH:void 0,WH:void 0,HH:void 0,JH:void 0,qH:void 0,XH:void 0,ZH:void 0,KH:void 0},qx=class extends Pl{get va(){return this.Xa||(this.Xa=IL(this)),this.Xa}get FH(){}get YH(){}get GH(){}get VH(){}get WH(){}get HH(){}get JH(){}get qH(){}get XH(){}get ZH(){}get KH(){}constructor(...t){super(...t),this.Xa=void 0}},Xx=class extends Fx{A_(){}get r_(){return 0}get a_(){return 0}constructor(t,i,e){super(t,i,e,new qx)}},Hr=class{get we(){return this.l5}be(){this.l5.style.display="none"}ge(){this.l5.style.display="block"}h5(t){t.appendChild(this.l5)}gn(){sh(this.l5)}constructor(t=5){let i=Or.document.createElement("div");i.className="theoplayer-texttracks",i.style.position="absolute",i.style.display="none",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.width="100%",i.style.height="100%",i.style.lineHeight="1.3em",i.style.zIndex=""+t,this.l5=i,this.ge()}};function Zx(t,i){return Tt({},i,Xl(function(t){return{FH:t.FH,YH:t.YH,GH:t.GH,VH:t.VH,WH:t.WH,HH:t.HH,JH:t.JH,qH:t.qH,XH:t.XH,ZH:t.ZH,KH:t.KH}}(t)))}function Kx(t){return t.GH&&ll(t.GH,"%")?Number(t.GH.replace("%",""))/100:t.GH&&ll(t.GH,"em")?Number(t.GH.replace("em","")):1}var Jx,gi,rh=class{f5(t){const i=this._5(t);if(!i)return!1;for(const t of i)sh(t);return this.g5(t),!0}get Lt(){return this.iN}get Uz(){return this.Ox}get Iu(){return this.Wu}get w5(){return this.A5}get v5(){return this.m5}bW(){this.p5(),this.iN.L.og.forEach((t=>this.SS(t))),this.Iu.yn(_i.pn,this.y5),this.M5(this.Iu.ku,this.Iu._u)}T5(t){this.m5=t,this.A5=Zx(this.m5,this.N5),this.A5.FH&&(this.Uz.style.fontFamily=this.A5.FH),this.A5.JH&&(this.Uz.style.visibility=this.A5.JH),this.M5(this.Iu.ku,this.Iu._u),this.D5(!0)}I5(){return this.A5}S5(t){return this.E5.has(t.Mg)}p5(){this.iN.yn(Ce.O_,this.b5),this.iN.yn(Ce.z_,this.L5),this.iN.yn(Ce.ra,this.k5)}C5(){this.iN.fn(Ce.O_,this.b5),this.iN.fn(Ce.z_,this.L5),this.iN.fn(Ce.ra,this.k5)}x5(t){t.yn(ku.QT,this.O5),t.yn(ku.FT,this.j5),t.yn(ku.K_,this.z5)}P5(t){t.fn(ku.QT,this.O5),t.fn(ku.FT,this.j5),t.fn(ku.K_,this.z5)}SS(t){this.x5(t),t.ro&&this.B5(t)}xI(t){this.P5(t),this.R5(t)}U5(){this.iN.jg===Ha.Jn?this.Q5():this.F5()}Q5(){if(!this.Y5)return;this.Y5=!1;const t=this.Iu.ku,i=this.Iu._u;this.M5(t,i),this.D5(!1)}F5(){this.Y5||(this.Y5=!0,this.D5(!0))}B5(t){this.Y5||t.ro&&!this.S5(t)&&this.D5(!1)}R5(t){this.S5(t)&&this.D5(!0)}G5(t){(t.ro||this.S5(t))&&this.D5(!0)}D5(t){const i=this.V5,e=this.Y5?[]:this.iN.q.og.slice();this.W5(e,i,t),this.V5=e}_5(t){return this.E5.get(t.Mg)}H5(t,i){this.E5.set(t.Mg,i)}g5(t){this.E5.delete(t.Mg)}q5(){return this.V5.slice()}gn(){sh(this.Uz),this.E5.clear(),this.C5(),this.iN.L.og.forEach((t=>this.P5(t))),this.Iu.fn(_i.pn,this.y5)}constructor(t,i,e,s,n){this.E5=pt(),this.Y5=!0,this.m5=Tt({},Hx),this.V5=[],this.b5=t=>this.SS(t.YT),this.L5=t=>this.xI(t.YT),this.k5=()=>this.U5(),this.O5=t=>this.B5(t.YT),this.j5=t=>this.R5(t.YT),this.z5=t=>this.G5(t.YT),this.y5=t=>{this.M5(t.width,t.height)},this.iN=t,this.N5=this.A5=n,this.Ox=this.X5(e),this.Wu=s,i.appendChild(this.Ox)}};function $x(t,i){return t?{Z5:t.Z5,K5:t.K5,J5:t.J5,Ml:i}:null}function tO(t){const i=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return i?{Z5:x(i[1],16),K5:x(i[2],16),J5:x(i[3],16)}:null}function iO(t){return("0"+t.toString(16)).slice(-2)}function eO(t){return"#"+iO(t.Z5)+iO(t.K5)+iO(t.J5)}function sO(t){const i=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return i?{Z5:x(i[1],10),K5:x(i[2],10),J5:x(i[3],10),Ml:C(i[4])}:null}function nO(t,i){return function(t){return t?"rgba("+t.Z5+", "+t.K5+", "+t.J5+", "+t.Ml+")":void 0}($x(tO(t),i/100))}function rO(t){return hO[t||"none"]}!function(t){t.qc='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.Wc='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.Gc='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.Xc='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif'}(Jx||(Jx={})),function(t){t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent"}(gi||(gi={}));var hO={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},oO=Zd({monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:"monospace, sans-serif",monospaceSerif:"monospace, serif",proportionalSansSerif:"Arial",proportionalSerif:"Times New Roman",default:"monospace, sans-serif"}),aO={YH:gi.WHITE,FH:"Arial, Helvetica, Sans-Serif",GH:"100%",VH:gi.TRANSPARENT,WH:gi.TRANSPARENT,HH:"none",JH:"visible",qH:void 0,XH:void 0,ZH:void 0,KH:void 0},uO=class extends rh{X5(t){let i=h.createElement("div");i.className="theoplayer-ttml-texttrack-"+t;const e=i.style;return e.position="absolute",MM(e,"flex"),e.overflow="hidden",e.pointerEvents="none",e.top="0",e.left="0",e.width="100%",e.height="100%",i}M5(t,i){let e=_.min(t,i)/15;this.Uz.style.fontSize=e+"px"}W5(t,i,e){for(const t of i)!e&&t.ro||this.f5(t);for(const i of t)this.t6(i)}t6(t){let i=this._5(t);i||(i=this.i6(t),this.H5(t,i));for(const t of i)this.Uz.appendChild(t)}i6(t){let i=[],e=t.WD,s=t.QD,n=t.O;if(0===w.keys(s).length){const s=h.createElement("div");mO(s),cO(n,e,t.XD,s,s),s.firstChild&&i.push(s)}else for(let r of w.keys(s)){let o=h.createElement("div");o.id=r,mO(o),fO(o,"region",s[r],e),cO(n,e,t.XD,o,o),o.firstChild&&i.push(o)}return i}T5(t){!function(t,i){var e,s;t.style.marginTop=(null!=(e=i.qH)?e:0)+"px",t.style.marginBottom=(null!=(s=i.XH)?s:0)+"px",t.style.height="calc(100% - "+t.style.marginTop+" - "+t.style.marginBottom+")"}(this.Uz,t),bL(this.Uz,t)}constructor(t,i,e,s){super(t,i,e,s,aO)}};function cO(t,i,e,s,n){if(ds(t)&&function(t){return"SPAN"===t._I.toUpperCase()||"P"===t._I.toUpperCase()||"BR"===t._I.toUpperCase()||"DIV"===t._I.toUpperCase()||"BODY"===t._I.toUpperCase()}(t)){let r=dO(t);if(!r||(null==n?void 0:n.id)===r){let r;if("BODY"===t._I.toUpperCase())r=n;else{if(r=function(t){let i;switch(t._I.toUpperCase()){case"BR":i=h.createElement("br");break;case"SPAN":i=h.createElement("span"),lO(i,t);break;case"P":i=h.createElement("p"),function(t){const i=t.style;i.fontFamily="inherit",i.color="inherit",i.textAlign="inherit",i.padding="0",i.margin="0",i.lineHeight="inherit"}(i),lO(i,t);break;case"DIV":i=h.createElement("div"),lO(i,t)}return i}(t),!r)return;s.appendChild(r)}!function(t,i,e,s){let n=i.vI("style");wO(t,i._I,n,e,s),function(t,i,e){for(const s of i.fI)AO(t,i._I,s._I,s.jM,e)}(t,i,s)}(r,t,i,n),function(t,i,e){let s=null==i?void 0:i.vI("smpte:backgroundImage");if(s){s=s.replace("#","");let n=e&&_O(e,(t=>t.fI.some((t=>"id"===t._I&&t.jM===s))));n&&gO(t,n,i,!0)}!function(t,i){const[e]=i.m;if(!e||"metadata"!==e._I.toLowerCase())return;const[s]=e.m;gO(t,s,i)}(t,i)}(r,t,e);for(const s of t.mI)cO(s,i,e,r,n)}}else if(qA(t)){const i=h.createTextNode(t.zm);s.appendChild(i)}}function dO(t){const i=t.vI("region");if("p"===t._I.toLowerCase())return i;const e=[];for(const i of t.m)e.push(dO(i));return Oo(e),0===e.length?i:1===e.length?null!=(s=e[0])?s:i:void 0;var s}function lO(t,i){let e=i.AI(sv,"id");e&&(t.id=e)}function fO(t,i,e,s){wO(t,i,e.style,s,t);for(const s of w.keys(e))AO(t,i,s,e[s],t)}function _O(t,i){if(i(t))return t;for(let e of t.m){const t=_O(e,i);if(t)return t}return null}function gO(t,i,e,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const i=t&&t.mI.length>0?t.mI[0]:null;return i&&qA(i)?"data:image/png;base64,"+i.zm:""}(i),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,i){const e=t.style;MM(e,"flex");let s=i.vI("smpte:backgroundImageVertical");if(s)switch(s.toLowerCase()){case"left":e.alignItems="flex-start";break;case"center":e.alignItems="center";break;case"right":e.alignItems="flex-end";break;case"inherit":e.alignItems="inherit"}else e.alignItems="center";let n=i.vI("smpte:backgroundImageHorizontal");if(n)switch(n.toLowerCase()){case"left":e.justifyContent="flex-start";break;case"center":e.justifyContent="center";break;case"right":e.justifyContent="flex-end";break;case"inherit":e.justifyContent="inherit"}else e.justifyContent="center"}(t,e),t.appendChild(n)}function wO(t,i,e,s,n){if(e)for(const r of e.split(" "))if(s[r])for(const e of w.keys(s[r]))"style"===e.toLowerCase()?wO(t,i,s[r][e],s,n):AO(t,i,e,s[r][e],n)}function AO(t,i,e,s,n){const r=t.style;switch(e){case"backgroundColor":r.backgroundColor=s;break;case"color":r.color=s;break;case"direction":r.direction=s;break;case"display":"none"===s&&(r.display="none");break;case"fontFamily":{const t=oO.get(s);r.fontFamily=t||s;break}case"fontSize":ll(s,"px")?s=x(s)/24+"em":ll(s,"c")&&(s=s.replace("c","em")),r.fontSize=s;break;case"fontStyle":r.fontStyle=s;break;case"fontWeight":r.fontWeight=s;break;case"lineHeight":r.lineHeight=s;break;case"opacity":r.opacity=s;break;case"overflow":r.overflow=s;break;case"padding":r.padding=s;break;case"textAlign":"right"===s?(r.textAlign="right",r.justifyContent="flex-end"):"start"===s?(r.textAlign="start",r.justifyContent="flex-start"):"center"===s?(r.textAlign="center",r.justifyContent="center"):"end"===s?(r.textAlign="end",r.justifyContent="flex-end"):"left"===s&&(r.textAlign="left",r.justifyContent="flex-start");break;case"textDecoration":{let t=s;t=t.replace("lineThrough","line-through"),t=t.replace("noUnderline","none"),t=t.replace("noLineThrough","none"),t=t.replace("noOverline","none"),r.textDecoration=t;break}case"unicodeBidi":r.unicodeBidi=s.replace("bidiOverride","bidi-override");break;case"visibility":r.visibility=s;break;case"zIndex":r.zIndex=s;break;case"displayAlign":{let t;if("before"===s.toLowerCase())t="flex-start";else if("center"===s.toLowerCase())t="center";else{if("after"!==s.toLowerCase())return;t="flex-end"}r.alignItems=t;break}case"extent":{const e=vO(i.toLowerCase())?n:t;let r,h,o=s.split(" ");o.length>=2?(r=o[0],h=o[1]):r=h="100%",e&&(e.style.height=h,e.style.width=r);break}case"origin":{const e=vO(i.toLowerCase())?n:t,[r,h]=s.split(" ");e&&(r||h)&&(r&&(e.style.left=r),h&&(e.style.top=h));break}case"showBackground":case"textOutline":break;case"wrapOption":r.whiteSpace=s.replace("noWrap","nowrp").replace("wrap","normal").replace("nowrp","nowrap");break;case"writingMode":{let t,i,e,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",i="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",e="upright";break;case"tblr":t="vertical-lr",e="upright";break;case"rl":t="horizontal-tb",i="rtl";break;default:return}r.writingMode=t,r.setProperty("-webkit-writing-mode",t),i&&(r.direction=i),e&&(r.textOrientation=e,r.setProperty("-webkit-text-orientation",e)),n&&(r.unicodeBidi=n);break}case"linePadding":if(ll(s,"c")){let t=s.replace("c","em");r.paddingLeft=r.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?r.textAlign="":r.textAlign=s}}function vO(t){return"div"===t||"p"===t||"span"===t}function mO(t){const i=t.style;MM(i,"flex"),i.top="auto",i.left="5%",i.width="90%",i.height="100%",i.maxHeight="100%",i.maxWidth="100%",i.alignItems="flex-start",i.overflow="visible",i.position="absolute",i.fontFamily="Arial, Helvetica, Sans-Serif",i.color="white",i.textShadow="rgb(0, 0, 0) -1px -1px 0px, rgb(0, 0, 0) 1px -1px 0px, rgb(0, 0, 0) -1px 1px 0px, rgb(0, 0, 0) 1px 1px 0px",i.textAlign="start",i.writingMode="horizontal-tb",i.setProperty("-webkit-writing-mode","horizontal-tb"),i.padding="0",i.margin="0",i.lineHeight="1.3em"}var pO,yO,MO=void 0;function TO(t){return MO||(MO=Or.document.createElement("textarea")),MO.innerHTML=t,MO.value}function NO(t,i){let e="Data",s="",n=[],r=t.charAt(i.Ku),h="",o={Rg:"starttag",dj:"",e6:[]};for(;i.Ku<t.length+1;){switch(r=i.Ku<t.length?t.charAt(i.Ku):"EOF",e){case"Data":switch(r){case"&":let n=t.substring(i.Ku).match(/&#?[0-9a-zA-Z]+;/);n?(s+=TO(n[0]),i.Im(n[0].length-1)):s+="&";break;case"<":if(s)return{Rg:"string",O:s};e="Tag";break;case"EOF":return{Rg:"string",O:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":e="StartTagAnnotation";break;case".":e="StartTagClass";break;case"/":e="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,e="TimestampTag";break;case">":return i.Im(1),o;case"EOF":return o;default:s=r,e="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":e="StartTagAnnotation";break;case"\n":h=r,e="StartTagAnnotation";break;case".":e="StartTagClass";break;case">":return i.Im(1),{Rg:"starttag",dj:s,e6:[]};case"EOF":return{Rg:"starttag",dj:s,e6:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(h),h="",e="StartTagAnnotation";break;case"\n":n.push(h),h=r,e="StartTagAnnotation";break;case".":n.push(h),h="";break;case">":return i.Im(1),n.push(h),{Rg:"starttag",dj:s,e6:n};case"EOF":return n.push(h),{Rg:"starttag",dj:s,e6:n};default:h+=r}break;case"StartTagAnnotation":switch(r){case"&":e="CharRefInAnnotation";break;case">":i.Im(1);let t=h.trim();return t=t.replace(/\s/," "),{Rg:"starttag",dj:s,e6:n,s6:t};default:h+=r}break;case"CharRefInAnnotation":let a="";for(let e=i.Ku;">"===t.charAt(e);e++)a+=t.charAt(e);h+=a||"&",e="StartTagAnnotation";break;case"EndTag":switch(r){case">":return i.Im(1),{Rg:"endtag",dj:s};case"EOF":return{Rg:"endtag",dj:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return i.Im(1),{Rg:"timestamp",n6:s};case"EOF":return{Rg:"timestamp",n6:s};default:s+=r}}i.Im(1)}return o}function DO(t){let i;if(t.getBoundingClientRect&&t.parentNode&&(i=t.getBoundingClientRect()),!i)return{left:0,top:0};const e=h.documentElement,n=h.body,r=e.clientLeft||n.clientLeft||0,o=s.pageXOffset||n.scrollLeft,a=i.left+o-r,u=e.clientTop||n.clientTop||0,c=s.pageYOffset||n.scrollTop,d=i.top+c-u;return{left:_.round(a),top:_.round(d)}}function IO(t,i,e,s){if(void 0===s&&(s=0),!t||!i)return;t.style.left="0px";let n=t.getClientRects(),r=i.getClientRects();if(0===n.length||0===r.length)return;let h=n[0],o=r[0],a=h.width/2+h.left;SO(t,o.width/2+o.left-a,e,s)}function SO(t,i,e,s){void 0===s&&(s=0),bO(t,i,"left","right",e,s)}function EO(t,i,e,s){void 0===s&&(s=0),bO(t,i,"top","bottom",e,s)}function bO(t,i,e,s,n,r){void 0===r&&(r=0);const h=t.getClientRects();if(n&&h.length>0){const t=h[0];i=os(i,n[e]+r-t[e],n[s]-r-t[s])}t.style[e]=i+"px"}function nr(t,i){void 0===t.textContent?t.innerText=i:t.textContent=i}!function(t){t.r6="Data",t.h6="Tag",t.o6="StartTag",t.a6="StartTagClass",t.u6="StartTagAnnotation",t.c6="CharRefInAnnotation",t.d6="EndTag",t.l6="TimestampTag"}(pO||(pO={})),function(t){t.f6="string",t._6="starttag",t.g6="endtag",t.w6="timestamp"}(yO||(yO={}));var LO=class t{get A6(){return this.v6+this.ji}set A6(t){this.v6=t-this.ji}get m6(){return this.p6+this.Ti}set m6(t){this.p6=t-this.Ti}y6(t){return this.v6<t.A6&&this.A6>t.v6&&this.p6<t.m6&&this.m6>t.p6}bT(t){return this.v6<=t.v6&&t.A6<=this.A6&&this.p6<=t.p6&&t.m6<=this.m6}Em(){return new t(this.v6,this.p6,this.ji,this.Ti)}M6(i){const e=this.v6+i,s=this.p6+i,n=_.max(0,this.ji-2*i),r=_.max(0,this.Ti-2*i);return new t(e,s,n,r)}constructor(t,i,e,s){this.v6=t,this.p6=i,this.ji=e,this.Ti=s}},kO={YH:gi.WHITE,FH:"sans-serif",GH:"100%",VH:"rgba(0,0,0,0.8)",WH:gi.TRANSPARENT,HH:"none",JH:"visible",qH:void 0,XH:void 0,ZH:void 0,KH:void 0},CO="theoplayer-webvtt-region-",xO="theoplayer-webvtt-styling-",OO="theoplayer-webvtt-default-style",jO=5.23,zO=1.14,PO=class extends rh{X5(t){let i=h.createElement("div");i.className="theoplayer-webvtt-texttrack-"+t,yc(i),i.style.overflow="hidden",i.style.pointerEvents="none";const e=this.w5.FH;return e&&(i.style.fontFamily=e),i.style.whiteSpace="pre-line",function(){if(h.getElementById(OO))return;const t=[];for(const[i,e]of JO)t.push("."+xO+i+" { color: "+e+" !important; }"),t.push("."+xO+"T6"+i+" { background-color: "+e+" !important; }"),t.push("video::cue(."+i+") { color: "+e+"; }"),t.push("N6"+i+") { background-color: "+e+"; }");const i=h.createElement("style");i.id=OO,i.innerHTML=t.join("\n"),h.body.appendChild(i)}(),i}bW(){this.Uz.appendChild(this.D6),super.bW()}M5(t,i){const e=_.min(t/100,i/100),s=Kx(this.w5);this.I6.forEach((t=>{let{ZT:i,S6:n}=t;this.E6(n,e,s,i)})),this.E6(this.D6,e,s)}T5(t){bL(this.Uz,t),super.T5(t)}W5(t,i,e){const s=this.Uz,n=this.Iu._u/100;let r=[];for(const i of t)void 0!==i.ZT&&(qt(r,i.ZT)||r.push(i.ZT));this.I6.forEach(((t,i)=>{let{ZT:s,S6:n}=t;!e&&qt(r,s)||(sh(n),this.I6.delete(i))}));for(const t of i)!e&&t.ro||this.f5(t);let h=[];const o=HO(this.D6.getBoundingClientRect());h.push(...this.b6(o));for(const t of r){let i;this.I6.has(t.o)?i=this.I6.get(t.o).S6:(i=GO(t,n),s.appendChild(i),this.I6.set(t.o,{ZT:t,S6:i})),h.push(HO(i.getBoundingClientRect()))}t.sort($O);for(const i of t){const t=this.t6(i,h,o);void 0!==t&&h.push(t.M6(.1))}}b6(t){const i=[],e=this.w5;if(void 0!==e.qH){const s=t.Em();s.Ti=e.qH,i.push(s)}if(void 0!==e.XH){const s=t.Em();s.Ti=e.XH,s.m6=t.m6,i.push(s)}return i}t6(t,i,e){var s;let n;t.ZT?(n=this.I6.get(t.ZT.o).S6,"up"===t.ZT._N&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.D6;let r=null==(s=this._5(t))?void 0:s[0];if(r||(r=this.L6(t),this.H5(t,[r])),n.appendChild(r),t.ZT||(BO(r,t),t.KT?function(t,i,e,s){const n=VO(t),r=n?e.Ti:e.ji;let h=C(getComputedStyle(i).lineHeight);if(0===h||S(h))return;let o=HO(i.getBoundingClientRect()),a=_.round(qw(t));"rl"===t.Pt&&(a=-(a+1));let u=h*a;"rl"===t.Pt&&(u=u-o.ji+h);a<0&&(u+=r,h=-h);n?o.p6+=u:o.v6+=u;const c=o.Em();let d=!1;for(;!e.bT(o)||WO(o,s);)if(n)if(h<0&&o.p6<e.p6||h>0&&o.m6>e.m6){if(o.p6=c.p6,d)break;h=-h,d=!0}else o.p6+=h;else if(h<0&&o.v6<e.v6||h>0&&o.A6>e.A6){if(o.v6=c.v6,d)break;h=-h,d=!0}else o.v6+=h;n?i.style.top=(o.p6-e.p6)/e.Ti*100+"%":i.style.left=(o.v6-e.v6)/e.ji*100+"%"}(t,r,e,i):function(t,i,e,s){let n=HO(i.getBoundingClientRect());if(0===n.ji||0===n.Ti)return;VO(t)?"center"===t.qT?n.p6-=n.Ti/2:"end"===t.qT&&(n.p6-=n.Ti):"center"===t.qT?n.v6-=n.ji/2:"end"===t.qT&&(n.v6-=n.ji);let r,h=n.Em(),o=h,a=1,u=!1;r=""===t.Pt?[2,3,0,1]:"lr"===t.Pt?[0,1,2,3]:[1,0,2,3];const c=4,d=C(getComputedStyle(i).lineHeight)/c;if(!S(d)&&d>0){for(let t=0;t<r.length&&!u;t++){for(;!XO(n,e,r[t],.01)&&(!e.bT(n)||WO(n,s));)qO(n,r[t],d);if(e.bT(n)){o=n.Em(),u=!0;break}let i=ZO(n,e);a>i&&(o=n.Em(),a=i),n=h.Em()}e.bT(n)||(o=h.Em())}i.style.left=(o.v6-e.v6)/e.ji*100+"%",i.style.top=(o.p6-e.p6)/e.Ti*100+"%"}(t,r,e,i)),!t.ZT)return HO(r.getBoundingClientRect())}L6(t){let i=new L,e=t.O,s=this.k6(t),n={C6:void 0,we:s},r=n,o="",a="",u=[n],c=[],d=[];for(;i.Ku<e.length;){let t=NO(e,i);if(t.Rg===yO.f6){const i=h.createElement("span");nr(i,t.O),RO(i,u),""!==o&&(i.lang=o),this.x6(i,a),r.we.appendChild(i)}else if(t.Rg===yO._6){const i=t.dj.toLowerCase();switch(i){case"i":case"b":case"u":case"ruby":{let e=h.createElement(i);r.we.appendChild(e),r={C6:t,we:e},u.push(r);break}case"rt":var l;if("ruby"===(null==(l=r.C6)?void 0:l.dj.toLowerCase())){let i=h.createElement("rt");r.we.appendChild(i),r={C6:t,we:i},u.push(r)}break;case"c":case"v":r={C6:t,we:r.we},u.push(r);break;case"font":{var f;const i=null==(f=t.s6)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);i&&(a=i[1],d.push(a),r={C6:t,we:r.we},u.push(r));break}case"lang":var _;o=null!=(_=t.s6)?_:"",c.push(o)}}else if(t.Rg===yO.g6){var g;const i=t.dj.toLowerCase(),e=null==(g=r.C6)?void 0:g.dj.toLowerCase();e===i?(u.pop(),r=u[u.length-1],"font"===i&&(d.pop(),a=d.length>0?d[d.length-1]:"")):"rt"===e&&"ruby"===i?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===i&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.Rg===yO.w6){let i=t.n6,e=new L;try{Un(i,e)}catch(t){xD("ERROR collecting timestamp",t)}}}return s}x6(t,i){const e=this.w5,s=this.v5;e.VH&&(t.style.background=e.VH);const n=s.YH||i||e.YH;n&&(t.style.color=n)}E6(t,i,e,s){if(s){let n=UO(s,i);t.style.height=n*e+"px",t.style.left=QO(s)+"%",t.style.top=FO(s,i)+"px"}t.style.fontSize=jO*i*e+"px"}k6(t){const i=h.createElement("div");i.style.position="absolute",i.style.margin="0",i.style.padding="0",i.style.unicodeBidi="plaintext",i.style.wordWrap="break-word",i.style.overflowWrap="break-word",i.style.width="auto",i.style.textAlign=t.WT,function(t,i){"rl"===i.Pt?t.style.writingMode="vertical-rl":"lr"===i.Pt?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(i,t),function(t,i){let e=Kw(i);VO(i)?(t.style.width=e+"%",t.style.height="auto"):(t.style.height=e+"%",t.style.width="auto")}(i,t),BO(i,t);const e=this.w5.WH;e&&(i.style.background=e);const s=this.w5.YH;return s&&(i.style.color=s),i.style.textShadow=rO(this.w5.HH),i}constructor(t,i,e,s){super(t,i,e,s,kO),this.I6=cs(),this.D6=YO(3)}};function BO(t,i){let e,s,n=Zw(i),r=Xw(i),h=Kw(i);if(VO(i)){switch(n){case"line-left":e=r;break;case"center":e=r-h/2;break;case"line-right":e=r-h}s=i.KT?0:qw(i)}else{switch(n){case"line-left":s=r;break;case"center":s=r-h/2;break;case"line-right":s=r-h}e=i.KT?0:qw(i)}t.style.left=e+"%",t.style.top=s+"%"}function RO(t,i){for(const e of i)if(e.C6){for(const i of e.C6.e6)vM(t,xO+i);"v"===e.C6.dj.toLowerCase()&&e.C6.s6&&vM(t,"theoplayer-webvtt-voice-"+e.C6.s6)}}function UO(t,i){return t.dN*(jO*i)*zO}function QO(t){return t.gN-t.lN*t.ji/100}function FO(t,i){let e=t.wN,s=t.fN*UO(t,i)/100;return _.max(0,e-s)}function YO(t){let i=h.createElement("div");return i.className=CO+"default",yc(i),i.style.wordWrap="break-word",i.style.writingMode="horizontal-tb",i.style.pointerEvents="none",i.style.width="auto",i.style.height="auto",i.style.maxHeight="100%",i.style.minHeight="0px",i.style.padding="0",i.style.boxSizing="border-box",i.style.fontSize=jO*t+"px",i.style.lineHeight=zO+"em",i}function GO(t,i){let e=YO(i);e.className=CO+t.o;let s=t.ji,n=UO(t,i);return e.style.width=s+"%",e.style.height=n+"px",e.style.left=QO(t)+"%",e.style.right="",e.style.top=FO(t,i)+"px",e.style.bottom="",e.style.boxSizing="border-box",e}function VO(t){return""===t.Pt}function WO(t,i){return i.some((i=>t.y6(i)))}function HO(t){return new LO(t.left,t.top,t.width,t.height)}function qO(t,i,e){switch(i){case 0:t.v6+=e;break;case 1:t.v6-=e;break;case 2:t.p6+=e;break;case 3:t.p6-=e}}function XO(t,i,e,s){switch(e){case 0:return t.A6>i.A6+s;case 1:return t.v6<i.v6-s;case 2:return t.m6>i.m6+s;case 3:return t.p6<i.p6-s}}function ZO(t,i){return _.max(0,_.min(t.A6,i.A6)-_.max(t.v6,i.v6))*_.max(0,_.min(t.m6,i.m6)-_.max(t.p6,i.p6))/(t.ji*t.Ti)}var KO,JO=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]];function $O(t,i){const e=qw(t),s=qw(i),n=tj(e,t.KT),r=tj(s,i.KT);return n&&r?e-s||Ma(i,t)||i.Mg-t.Mg:Ma(t,i)||t.Mg-i.Mg}function tj(t,i){return i?t<0?t>-8:t>8:t>50}!function(t){t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics"}(KO||(KO={}));var ij={YH:gi.WHITE,FH:Jx.Gc,GH:"100%",VH:gi.BLACK,WH:"transparent",HH:"none",O6:"regular",JH:"visible",qH:void 0,XH:void 0,ZH:void 0,KH:void 0},ej=[{j6:gi.WHITE,O6:"regular",z6:0},{j6:gi.WHITE,O6:"underline",z6:0},{j6:gi.GREEN,O6:"regular",z6:0},{j6:gi.GREEN,O6:"underline",z6:0},{j6:gi.BLUE,O6:"regular",z6:0},{j6:gi.BLUE,O6:"underline",z6:0},{j6:gi.CYAN,O6:"regular",z6:0},{j6:gi.CYAN,O6:"underline",z6:0},{j6:gi.RED,O6:"regular",z6:0},{j6:gi.RED,O6:"underline",z6:0},{j6:gi.YELLOW,O6:"regular",z6:0},{j6:gi.YELLOW,O6:"underline",z6:0},{j6:gi.MAGENTA,O6:"regular",z6:0},{j6:gi.MAGENTA,O6:"underline",z6:0},{j6:gi.WHITE,O6:"italics",z6:0},{j6:gi.WHITE,O6:"underline-italics",z6:0},{j6:gi.WHITE,O6:"regular",z6:0},{j6:gi.WHITE,O6:"underline",z6:0},{j6:gi.WHITE,O6:"regular",z6:4},{j6:gi.WHITE,O6:"underline",z6:4},{j6:gi.WHITE,O6:"regular",z6:8},{j6:gi.WHITE,O6:"underline",z6:8},{j6:gi.WHITE,O6:"regular",z6:12},{j6:gi.WHITE,O6:"underline",z6:12},{j6:gi.WHITE,O6:"regular",z6:16},{j6:gi.WHITE,O6:"underline",z6:16},{j6:gi.WHITE,O6:"regular",z6:20},{j6:gi.WHITE,O6:"underline",z6:20},{j6:gi.WHITE,O6:"regular",z6:24},{j6:gi.WHITE,O6:"underline",z6:24},{j6:gi.WHITE,O6:"regular",z6:28},{j6:gi.WHITE,O6:"underline",z6:28}],sj=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function nj(t,i){return oA(t.P6,i.P6)||Xo(t.yM,i.yM)}var wc=32,rj=/CC([1-4])=(.*)/;function hj(t){if(!t)return[];const i=[],e=t.trim().split(";");if(e.every((t=>t.match(rj))))for(const t of e){const[,e,s]=t.match(rj);i.push({B6:Number(e),R6:s})}else for(let t=0;t<e.length;t++)i.push({B6:t+1,R6:e[t]});return i}var oj=class t{get U6(){return this.F6.Q6}get Y6(){return this.F6.G6}get V6(){return this.F6.G6.z6-this.F6.Q6.z6+1}get W6(){return this.F6.G6.H6-this.F6.Q6.H6+1}pr(){return this.q6=this.X6(),this.Z6(),this.K6(),this.q6}X6(){let t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.V6/wc*this.t8.J6*100+"%",t.style.height=1.2*this.W6+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.t8.i8?"calc(1em - 1ch)":"";const i=this.A5.FH;i&&(t.style.fontFamily=i);const e=this.A5.WH;return e&&(t.style.backgroundColor=e),t}Z6(){if(!this.q6)return;let t=this.U6.H6/15*100,i=this.U6.z6/wc*100,e=(wc-this.Y6.z6-1)/wc*100,s=(15-this.Y6.H6-1)/15*100;this.t8.e8||(i=e=1,this.q6.style.width="98%"),s<t?this.q6.style.bottom=s*this.t8.J6+"%":this.q6.style.top=t*this.t8.J6+"%",e<i?this.q6.style.right=e+"%":this.q6.style.left=i+"%"}K6(){const t=this.F6.s8.sort(aj);for(let i=0;i<t.length;i++)this.n8(t[i-1],t[i]),this.r8(t[i]);this.n8(t[t.length-1],void 0)}r8(i){var e;const s=Zx(this.A5,i.h8),n=t.o8(s);nr(n,i.a8),null==(e=this.q6)||e.appendChild(n)}static o8(t){const i=h.createElement("span");i.style.display="inline-block",t.O6!==KO.FONT_ITALICS&&t.O6!==KO.FONT_UNDERLINE_ITALICS||(i.style.fontStyle="italic"),t.O6!==KO.FONT_UNDERLINE&&t.O6!==KO.FONT_UNDERLINE_ITALICS||(i.style.textDecoration="underline");const e=t.YH;e&&(i.style.color=e);const s=t.VH;return s&&(i.style.backgroundColor=s),i.style.textShadow=rO(t.HH),i.style.height="1.2em",i}n8(t,i){let e=t?t.G6.H6:this.F6.Q6.H6;const s=i?i.Q6.H6:this.F6.G6.H6;let n=t?t.G6.z6:this.F6.Q6.z6;const r=i?i.Q6.z6:this.F6.G6.z6;e<s&&(!i||t&&t.Q6.H6!==i.Q6.H6?this.u8():this.c8(this.F6.G6.z6-n),n=this.F6.Q6.z6),n<r&&(i?this.c8(r-n):this.u8())}u8(){var t;const i=h.createElement("br");null==(t=this.q6)||t.appendChild(i)}c8(t){var i;if(t<=0)return;const e=h.createElement("span");e.style.display="inline-block",nr(e,If(" ",t)),null==(i=this.q6)||i.appendChild(e)}constructor(t,i,e){this.F6=t,this.t8=i,this.A5=e}};function aj(t,i){return function(t,i){if(t.H6!==i.H6)return t.H6-i.H6;return t.z6-i.z6}(t.Q6,i.Q6)}var uj=class extends rh{X5(t){let i=h.createElement("div");return i.className="theoplayer-cea608-texttrack-"+t,i.style.position="absolute",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.top="10%",i.style.bottom="10%",this.w5.FH&&(i.style.fontFamily=this.w5.FH),i}M5(t,i){this.ll()}ll(){let t=Kx(this.w5);this.d8=function(t){return{J6:t/100,i8:t<=100,e8:t<=150}}(100*t);const i=this.l8/wc;this.f8=i*t,this.Uz.style.fontSize=this.f8+"px"}get l8(){let t=this.Uz.offsetWidth;return this.d8&&this.d8.e8||(t*=.8),t}W5(t,i,e){for(const t of i)!e&&t.ro||this.f5(t);for(const i of t)this.t6(i)}t6(t){this.d8&&this.d8.e8?this._8(80):this._8(100),this.ll();let i=this._5(t);i||(i=this.i6(t),this.H5(t,i));for(const t of i)this.Uz.appendChild(t)}i6(t){return t.O.map((t=>new oj(t,this.d8,this.w5).pr()))}_8(t){const i=(100-t)/2;this.Uz.style.left=i+"%",this.Uz.style.width=t+"%"}constructor(t,i,e,s){super(t,i,e,s,ij)}},eh=class t{g8(t){for(let i of this.w8)if(i.Lt===t)return i}static A8(t){switch(t.Rg){case Kc.TTML:case Kc.SRT:case Kc.WEBVTT:case Kc.CEA608:return!0}return!1}v8(t){switch(t.Rg){case Kc.TTML:return new uO(t,this.m8,t.kh,this.Wu);case Kc.SRT:case Kc.WEBVTT:return new PO(t,this.m8,t.kh,this.Wu);case Kc.CEA608:return new uj(t,this.m8,t.kh,this.Wu)}}p8(t){let i=this.g8(t);i||(i=this.v8(t),i&&(i.bW(),i.T5(this.RB),this.w8.push(i),t.jg===Ha.Jn&&i.Q5()))}y8(t){let i=this.w8;for(let e=i.length-1;e>=0;e-=1){let s=i[e];s.Lt===t&&(s.gn(),M(i,e))}}M8(i){Lv(i.zt)&&t.A8(i)&&(i.Jf===Zs.ERROR?this.y8(i):this.p8(i))}get E1(){return this.T8.cs}tr(){for(let t of this.w8)t.Lt.fn(Ce.H_,this.N8),t.Lt.fn(Ce.X_,this.N8),t.gn();No(this.w8)}gn(){this.tr();for(let t of this.w8)t.gn();this.Dl.fn(Mi.L_,this.D8),this.Dl.fn(Mi.C_,this.I8),this.Dl.fn(Ce.ra,this.N8),this.T8.fn(Tc.ra,this.S8),this.RB.fn("W_",this.E8)}constructor(t,i,e,s,n){this.w8=[],this.D8=t=>{let i=t.Lt;i.yn(Ce.H_,this.N8),i.yn(Ce.X_,this.N8),i instanceof Ls&&(i.E1=this.E1),this.M8(i)},this.N8=t=>{let i=t.Lt;this.M8(i)},this.I8=t=>{let i=t.Lt;i.fn(Ce.H_,this.N8),i.fn(Ce.X_,this.N8),this.y8(i)},this.S8=()=>{let t=this.E1;for(let i of this.Dl.og)i instanceof Ls&&(i.E1=t)},this.E8=()=>{for(let t of this.w8)t.T5(this.RB)},this.b8=()=>{for(let t of this.w8)t.T5(Tt({},t.I5(),{JH:"hidden"}))},this.L8=()=>{for(let t of this.w8)t.T5(Tt({},t.I5(),{JH:"visible"}))},this.m8=t,this.Wu=i,this.Dl=e,this.T8=n,this.RB=s,this.Dl.yn(Mi.L_,this.D8),this.Dl.yn(Mi.C_,this.I8),this.Dl.yn(Ce.ra,this.N8),this.T8.yn(Tc.ra,this.S8),this.RB.yn("W_",this.E8),this.S8()}};function cj(t){const i=new xI,e=function(t){const i=[];return kI.ia(t)&&i.push(new kI(t)),CI.ia(t)&&i.push(new CI(t)),i}(t);if(e.length>0){for(const t of e)i.HY(t);i.WY(e[0])}return i}var bh,dj=class extends Fx{get Uz(){return this.Ox}get r_(){return this.Ox.videoHeight}get a_(){return this.Ox.videoWidth}get ya(){return this.k8}A_(){return this.Ox}async Qd(){this.k8.gn(),this.C8.gn(),this.x8.gn(),await super.Qd()}be(){super.be(),this.C8.be()}ge(){super.ge(),this.C8.ge()}h5(t){super.h5(t),this.C8.h5(t)}constructor(t,i,e,s){super(t,i,e,s),this.k8=cj(t),this.C8=new Hr,this.x8=new eh(this.C8.we,this.Iu,this.nt,this.Ol,this.ya)}};!function(t){t.O8="HELLO",t.j8="HI_THERE",t.z8="INITIALIZE",t.P8="APPEND_INIT",t.B8="APPEND_DATA",t.U8="ACK",t.Q8="REMOVE",t.F8="DESTROY_SESSION"}(bh||(bh={}));var lj,fj=class{Y8(t){return this.Mq.Mx((async t=>{Bo(t);const i=new MessageChannel,e=i.port1,s=i.port2;id.serviceWorker.controller||await ci(id.serviceWorker,"install",t),"activated"!==id.serviceWorker.controller.state&&await ci(id.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};id.serviceWorker.controller.postMessage(n,[s]),e.start(),this.G8=e;try{const i=await ci(e,"message",t),s=i.data;if("HI_THERE"!==s.kind)throw new g("Could not set up message channel");this.Px=s.sessionId}catch(t){throw ut(t)&&this.V8(),t}}),t)}W8(t,i){return this.G8,this.Mq.Mx((async()=>{if(!this.G8)throw new g("MessageSession not set up yet or already closed.");i||(i=[]),this.G8.postMessage(t,i);const e=await ci(this.G8,"message");return e.data}))}H8(){return this.Mq.Mx((()=>this.V8()))}V8(){if(!id.serviceWorker.controller)return;if("activated"!==id.serviceWorker.controller.state)return;if(!this.G8)return;const t={kind:"DESTROY_SESSION"};this.G8.postMessage(t),this.G8.close(),this.G8=void 0}constructor(){this.Mq=new jn}},_j=class{get q8(){return this.X8}Z8(t,i){const e=t-i;this.X8=e>this.q8?this.X8:e}K8(t){this.X8=t}constructor(){this.X8=1/0}};!function(t){t.ym="audio",t.pm="video",t.Nm="metadata"}(lj||(lj={}));var gj=class extends Pl{get wf(){return void 0===this.J8||void 0===this.t9?Ai.SB():new Ai([this.J8,this.t9])}get wd(){return{qz:this.qF}}get e$(){return pg.rT}get CF(){return this.qF}get n$(){return Ai.SB()}get NW(){return 30}set NW(t){}get EW(){return 30}set EW(t){}o$(t,i){}a$(t,i){}Cq(){return this.i9}get oa(){return this.e9}get s9(){return this.J8}get VT(){return this.t9}async u$(){}async kJ(t,i){}async _J(t,i,e){if(t.Rg!==ji.aq)throw new g("Streaming or opaque segments are not supported yet.");const s=t.zm,n=async()=>{const t=s.buffer,e={kind:bh.B8,mediaType:wj(this.qF),segment:s,startPts:i.n9,totalDuration:i.ct};if(await this.r9.W8(e,[t]),void 0===this.J8){const t=i.n9+i.UD;this.J8=t,this.t9=t}this.t9=this.t9+i.ct,this.Co(new wn(_e.hq))};return this.Mq.Mx((async t=>{Bo(t);try{this.e9=!0,await n()}finally{this.e9=!1}}),e)}async AJ(t,i,e){if(t.Rg!==ji.aq)throw new g("Streaming or opaque initialization segments are not supported yet.");const s=t.zm,n=async()=>{const t={kind:bh.P8,mediaType:wj(this.qF),segment:s};await this.r9.W8(t,[])};return this.Mq.Mx((async t=>{Bo(t);try{this.e9=!0,await n()}finally{this.e9=!1}}),e)}t$(){this.i9=!0}GJ(){this.i9=!1}async ET(t,i,e){const s=async()=>{const t={kind:bh.Q8,mediaType:wj(this.qF),endTime:i};await this.r9.W8(t),this.J8=void 0,this.t9=void 0,this.Co(new wn(_e.hq))};return this.Mq.Mx((async t=>{Bo(t);try{this.e9=!0,await s()}finally{this.e9=!1}}),e)}gq(t){return this.qF===t.qz}Aq(t){return this.qF=t.qz,Promise.resolve()}async Qd(){this.Vo(),await this.Mq.gn()}constructor(t,i){super(),this.qF=t,this.r9=i,this.J8=void 0,this.t9=void 0,this.Mq=new jn,this.e9=!1,this.i9=!1}};function wj(t){return t.match(/video/)?lj.pm:lj.ym}var Aj=class t{static h9(i,e,s,n){const r=[];for(let t=0;t<i.r0.length;t++){const s=i.r0[t].qz;r.push(new gj(s,e))}return new t(i,r,s,n)}o9(){}get a9(){return[this.Z$,this.K$].filter(Yt)}get V$(){return this.Z$}get wf(){return Fk(this)}get wd(){return this.lx}get ct(){return 0}get Cq(){var t,i,e;const s=null==(e=null==(t=this.Z$)?void 0:t.Cq())||e;var n;const r=null==(n=null==(i=this.K$)?void 0:i.Cq())||n;return s&&r}get t_(){return new Ai([0,1/0])}get W$(){return this.K$}get rt(){throw new g("Not implemented")}async Qd(){await Promise.all([this.Z$,this.K$].filter(Yt).map((t=>t.Qd())))}t0(t){}n0(t,i,e,s){}t$(){var t,i;null==(t=this.Z$)||t.t$(),null==(i=this.K$)||i.t$()}GJ(){var t,i;null==(t=this.Z$)||t.GJ(),null==(i=this.K$)||i.GJ()}gq(t){return!0}Aq(t){return this.lx=t,Promise.resolve()}async fq(t,i){const e=await this.YC.FC(t.Sb,i),s=await e.LC();return await this._q(s),s}async _q(t){if(t&&!this.Ox.src)throw new Qr(Ui.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.Ox.src)throw new Qr(Ui.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const i=this.IC;i&&(await i.EC(this.Ox),this.IC=void 0),t&&(await t.bn(this.Ox),this.IC=t)}constructor(t,i,e,s){this.IC=void 0,this.lx=t,this.K$=Zt(i,(t=>Boolean(t.CF.match(/video/)))),this.Z$=Zt(i,(t=>Boolean(t.CF.match(/audio/)))),this.YC=e,this.Ox=s,this.o9()}},vj=class extends Pl{u9(){this.c9.addEventListener("timeupdate",this.d9),this.c9.addEventListener("ended",this.l9),this.c9.addEventListener("timeupdate",this.f9),this.c9.addEventListener("ratechange",this._9),this.c9.addEventListener("volumechange",this.g9),this.c9.addEventListener("durationchange",this.w9),this.c9.addEventListener("playing",this.A9),this.c9.addEventListener("seeking",this.v9),this.c9.addEventListener("play",this.m9),this.c9.addEventListener("pause",this.p9),this.c9.addEventListener("encrypted",this.X3)}y9(){this.c9.removeEventListener("timeupdate",this.d9),this.c9.removeEventListener("ended",this.l9),this.c9.removeEventListener("timeupdate",this.f9),this.c9.removeEventListener("ratechange",this._9),this.c9.removeEventListener("volumechange",this.g9),this.c9.removeEventListener("durationchange",this.w9),this.c9.removeEventListener("playing",this.A9),this.c9.removeEventListener("seeking",this.v9),this.c9.removeEventListener("play",this.m9),this.c9.removeEventListener("pause",this.p9)}M9(){this.m2.yn(er.H_,this.Ds)}T9(){this.m2.fn(er.H_,this.Ds)}get Uz(){return this.c9}get I0(){return!1}get Mf(){return this.c9.currentTime+this.N9.q8}get Ff(){return this.c9.paused}get c_(){return this.c9.volume}set c_(t){this.c9.volume=t}get Gf(){return this.c9.playbackRate}set Gf(t){this.c9.playbackRate=t}get D9(){return this.c9.defaultPlaybackRate}get wf(){var t,i;return null!=(i=null==(t=this.Fz)?void 0:t.wf)?i:Ai.SB()}get I9(){return Ai.xn(this.c9.buffered)}get Hf(){const t=this.S9;return this.Uo.cB(t.Im(this.N9.q8))}get S9(){return Ai.xn(this.c9.played)}get e_(){return this.bB}get m0(){return!1}get L0(){return!1}get ct(){return this.c9.duration}get Pf(){return this.c9.muted}set Pf(t){this.c9.muted=t}get h8(){return this.c9.style}get t2(){return Tt({},kL,{rq:!0})}Sm(t,i,e){this.V2.Xd(),this.V2=new na,this.W2=this.H2(t,this.W2,this.V2.Hd).catch(El)}async H2(t,i,e){var s;this.Uo=this.Hf;const n=null==(s=this.Fz)?void 0:s.a9;if(!n)return;const r=_.max(...n.map((t=>t.s9?t.s9:1/0)));this.bB=!0,this.Co(new Oe(t)),await i.catch(El),Bo(e);try{for(this.E9||this.b9(),this.c9.load(),this.L9||(this.k9=!1,await dt(this.c9.play(),e));this.Jf<ae.uT;)await this.m2.df(er.H_,e);this.C9.Wb(),this.E9=!1,this.bB=!1,this.Co(new Ms(this.Mf))}catch(t){throw this.C9.qb(t),t}finally{this.x9(),this.N9.K8(r)}}m_(){this.L9=!0,this.c9.pause()}async p_(){this.L9&&(this.c9.src||this.r5(),await this.C9.Zb,await this.c9.play())}async Qd(){this.r9&&this.r9.H8().catch(El),this.V2.Xd(),this.y9(),this.T9(),this.m2.Qd(),this.Vo(),this.Dl.gn()}async tr(){this.r9&&this.r9.H8().catch(El),this.V2.Xd(),this.c9.removeAttribute("src"),this.c9.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.c9.removeAttribute("x-airplay-deny"),this.c9.disableRemotePlayback=!1,this.c9.load(),this.m2.tr(),this.Uo=Ai.SB()}r5(){this.s5||(Tj(this.c9,i.Ys),this.n5=!0)}get Jf(){return this.m2.Jf}b9(){const t=this.c9.getClientRects();let i;if(!(t.length>0))return;i=t[0];const e=i.width,s=this.c9.videoWidth/this.c9.videoHeight,n=i.height;let r,h;e/n>s?(r=n*s,h=n):(h=e/s,r=e),this.c9.style.width=r+"px",this.c9.style.height=h+"px",this.c9.style.marginLeft=(e-r)/2+"px",this.c9.style.marginTop=(n-h)/2+"px",this.c9.style.backgroundColor="black"}x9(){this.c9.style.width="100%",this.c9.style.height="100%",this.c9.style.marginLeft="",this.c9.style.marginTop="",this.c9.style.backgroundColor=""}get r_(){return this.c9.videoHeight}get a_(){return this.c9.videoWidth}get If(){return this.c9.ended}get Ti(){return this.c9.offsetHeight*i.Ys.A2}get ji(){return this.c9.offsetWidth*i.Ys.A2}get xf(){return!1}get s5(){return this.n5}get vf(){}get Iu(){}get lt(){}get ya(){return this.k8}get t_(){return this.Fz?this.Fz.t_:Ai.SB()}get Yz(){}get nt(){return this.Dl}get Ol(){}get g_(){return!1}set g_(t){}sP(t,i,e,s,n){}yS(t,i,e,s,n,r,h,o,a){const u=new ze(t,i,e,s,n,r,h,a,o);return this.Dl.tt(u),this.o3.tt(u),u}jq(t){}zf(){return lL(this.c9)}get S2(){return"block"===this.c9.style.display}ge(){this.c9.style.display="block"}be(){this.c9.style.display="none"}i5(){}async $n(t){if(t.Rg===wi.Wx)throw new g("Not yet implemented");await this.r9.Y8();const i=Zt(t.Xz,(t=>t.ZA.Rg===N.RA)),e={kind:bh.z8,mediaBufferConfigs:t.r0.map((t=>t.qz)),fairPlaySdkUri:null==i?void 0:i.Sj};return await this.r9.W8(e),this.Fz=Aj.h9(t,this.r9,this.YC,this.c9),this.vq.$n(this.Fz,t),this.c9.setAttribute("x-webkit-airplay","deny"),this.c9.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.c9.disableRemotePlayback=!0,this.c9.preload="none",this.c9.src="https://theo.proxy/"+this.r9.Px+"/master.m3u8",this.Fz}e5(){}bS(t){this.Dl.it(t),this.o3.it(t)}rP(){for(const t of this.Dl.og.slice())t.gn();this.Dl.tr()}zz(t){}iP(){return!1}h5(t){t.appendChild(this.c9)}A_(){return this.c9}a2(){}get uP(){return this.vq.uP}set uP(t){this.vq.uP=t}get o5(){}set o5(t){}get Y4(){}D_(){}constructor(t,i){super(),this.E9=!0,this.r9=new fj,this.N9=new _j,this.L9=!0,this.C9=new Rs,this.bB=!1,this.W2=Promise.resolve(),this.V2=new na,this.k9=!0,this.Uo=Ai.SB(),this.n5=!1,this.d9=()=>{this.Ff||this.I9.U<=0||this.wf.U<=0||this.N9.Z8(this.wf.jn(this.wf.U-1),this.I9.jn(this.I9.U-1))},this.l9=()=>{this.Co(new ie(this.Mf))},this.f9=()=>{this.Co(new nc(this.Mf,this.vf))},this._9=()=>{this.Co(new Oi(this.Mf,this.Gf))},this.g9=()=>{this.Co(new lo(this.Mf,this.c_))},this.w9=()=>{this.Co(new ht(this.ct))},this.A9=()=>{this.Co(new tn(this.Mf))},this.v9=()=>{this.Sm(this.Mf)},this.m9=async()=>{this.k9&&this.Co(new Ps(this.Mf)),this.L9=!1,this.k9=!0},this.p9=()=>{this.L9=!0,this.Co(new ye(this.Mf))},this.X3=t=>{const i=t.initDataType;var e;const s=null!=(e=t.initData)?e:new ArrayBuffer(0);this.Co(new Ns(i,s))},this.c9=t,this.m2=new ic(this),this.c9.playsInline=!0,this.c9.style.width="100%",this.c9.style.height="100%",this.u9(),this.M9(),this.k8=cj(this.c9),this.vq=new jx(this),this.YC=i,this.Dl=new We,this.o3=new zr(this)}},mj=[pg.ym,pg.pm];function pj(t){const i=h.createElement(t);return me(i)&&i.addEventListener("contextmenu",Nj),Mj(i),i}function yj(t){Mj(t),t.removeEventListener("contextmenu",Nj)}function Mj(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),Be(t),EM(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload=Qe.iT,t.controls=!1,t.style.display="none",me(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function Tj(t,i){if(i.O9){const i=t.muted;t.muted=!0,t.muted=!1,t.muted=i}else if(t.paused){const i=t.play();Sd(i)&&D(i),t.pause()}}function Nj(t){t.preventDefault()}var Dj=class{SI(t){return this.NS.SI(t)}ZF(t){this.NS.ZF(t)}gn(){this.NS.gn()}constructor(t){this.NS=t}},Ij=class extends Dj{SI(t){const i=new Pc(t),e=this.PB._W.vz(i);return e?this.j9(i,e):this.NS.SI(i)}async j9(t,e){e.wW(i.Jd()/1e3);const s=await this.NS.SI(t);let n;e.AW(i.Jd()/1e3),n=s.wV?s.lV().pipeThrough(new Ko(new Sj(e))):s.cj().then((t=>{const s=i.Jd()/1e3;return e.vW(s,new j(t)),e.mW(s),t}));const r={zm:n,SI:s.SI};return new Fr(r,s)}constructor(t,i){super(t),this.PB=i}},Sj=class{start(t){this.UH=t}transform(t){this.z9.vW(i.Jd()/1e3,t),this.UH.enqueue(t)}flush(){this.z9.mW(i.Jd()/1e3)}constructor(t){this.z9=t}};function Ej(t){return{get ratio(){return t.Lo},get thresholds(){return t.P9.slice()}}}function bj(t){const i=[],e=_.floor(1/t);if(S(e))return[];for(let s=0;s<=e;s++){const e=os(s*t,0,1);i.push(e)}return i}var Lj=class{get Lo(){return this.B9}get P9(){return this.R9}U9(t){return i=>{const e=i[i.length-1];this.B9=e.intersectionRatio,t(e.intersectionRatio)}}get va(){return this.Xa||(this.Xa=Ej(this)),this.Xa}y_(){this.Q9.disconnect()}constructor(t,i,e){this.B9=1,this.Xa=void 0,this.R9=bj(i);const n=this.U9(e);this.Q9=new s.IntersectionObserver(n,{root:null,threshold:this.R9}),this.Q9.observe(t)}},kj=class{get Lo(){return this.B9}get P9(){return this.R9}get va(){return this.Xa||(this.Xa=Ej(this)),this.Xa}F9(t){this.B9=t;const i=this.R9;let e=0;if(t>0)for(;e<i.length&&i[e]<=t;)++e;this.Y9!==e&&(this.Y9=e,this.G9(t))}constructor(t,i){this.B9=1,this.Y9=-1,this.Xa=void 0,this.R9=bj(t),this.G9=i}},Cj=class extends kj{V9(){const t=this.yo.getBoundingClientRect();return os(_.max(0,_.min(s.innerWidth,t.right)-_.max(0,t.left))*_.max(0,_.min(s.innerHeight,t.bottom)-_.max(0,t.top))/(t.width*t.height),0,1)}y_(){s.removeEventListener("scroll",this.W9)}constructor(t,i,e){super(i,e),this.W9=ho((()=>this.F9(this.V9())),50),this.yo=t,s.addEventListener("scroll",this.W9,!!MI&&{passive:!0}),ac((()=>this.F9(this.V9())))}},xj=.1,Oj=class{get H9(){return this.q9}get zo(){return this.X9}set zo(t){if(S(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.X9=t}get va(){return this.Xa||(this.Xa=function(t){return{get ratio(){return t.H9},get visible(){return t.H9>t.zo},get visibleThreshold(){return t.zo},set visibleThreshold(i){i=Na(i),t.zo=i},addObserver:(i,e)=>(i=Na(i),t.Fo(i,e).va),removeObserver(i){let e=t.Z9(i);e&&t.Ro(e)}}}(this)),this.Xa}K9(t){return i=>{this.q9=i,null==t||t(this.q9)}}Fo(t,i){if(S(t))throw new b("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let e;return e="function"==typeof s.IntersectionObserver?new Lj(this.yo,t,this.K9(i)):new Cj(this.yo,t,this.K9(i)),this.J9.push(e),e}Ro(t){t.y_(),To(this.J9,t)}Z9(t){for(const i of this.J9)if(i.va===t)return i}gn(){for(const t of this.J9)t.y_();No(this.J9)}constructor(t){this.q9=1,this.X9=0,this.J9=[],this.Xa=void 0,this.yo=t,this.Fo(.1,this.K9())}},jj=class extends wn{constructor(){super(l.qg)}},zj=class extends Ys{get t7(){return this.PB}get DT(){return this.i7}set DT(t){this.i7=t,this.e7.DT=t}get s7(){return this.n7}get ht(){return this.e7.ht}get fQ(){return this.r7}get Iu(){return this.h7}get kf(){return this.e7.kf}get jf(){return this.o7}get kU(){return this.a7}get nt(){return this.e7.nt}get Ol(){return this.RB}get rt(){return this.e7.rt}get wf(){return this.Af()}Af(){return this.e7.wf}get u7(){return this.WW}get rH(){return this.hH}get Mf(){return this.Tf()}set Mf(t){this.Nf(t)}Tf(){return this.e7.Mf}Nf(t){this.e7.Mf=t}d7(){return this.Tf()}get vf(){return this.e7.vf}set vf(t){this.e7.vf=t}get bt(){return this.e7.bt}get ct(){return this.Td()}Td(){return this.e7.ct}get we(){return this.e7.we}get If(){return this.e7.If}get lt(){return this.Ef()}Ef(){return this.e7.lt}get bf(){return this.Lf()}Lf(){return this.e7.bf}get ya(){return this.e7.w_()}get g_(){return this.e7.g_}set g_(t){this.e7.g_=t}get Pf(){return this.e7.Pf}set Pf(t){const i=Boolean(t);this.Rf(i)}Rf(t){this.e7.Pf=t,t||this.Ff||this.v_()}get Ff(){return this.e7.Ff}get Gf(){return this.e7.Gf}set Gf(t){this.e7.Gf=t}get Hf(){return this.qf()}qf(){return this.e7.Hf}get Xf(){return this.e7.Xf}set Xf(t){this.e7.Xf=t}get Jf(){return this.e7.Jf}get t_(){return this.i_()}i_(){return this.e7.t_}get e_(){return this.e7.e_}get Mg(){return this.xT}get r_(){return this.e7.r_}get a_(){return this.e7.a_}get c_(){return this.e7.c_}set c_(t){const i=os(Number(t),0,1)||0;this.l_(i)}get f_(){return this.BB}l_(t){this.e7.c_=t}ka(){au(this,qN,this)}p_(){this.e7.p_()}m_(){this.e7.m_()}Wa(){return this.WP}async ga(t,i){if(this.WP=t,t){this.l7.$Q(t).catch(this.f7);const e=function(t){t.sources;const i=t.sources.filter((t=>Nd(t.integration)));0;return t.sources=i,t}(t);await this.e7.ga(e,i)}}v_(){if(this.bo)return;this.e7.v_(),this.n7.v_();const t=this.we.getElementsByTagName("video");for(let e=0;e<t.length;e++){const s=t[e];"Advertisement"===s.title&&Tj(s,i.Ys)}this.bo=!0}cs(){return this._7.qo()===VN.FULLSCREEN}ge(){this.e7.ge()}be(){this.e7.be()}A_(){return this.e7.A_()}D_(){this.e7.D_()}I_(){this.e7.I_()}async y_(){this.WP=void 0,await this.e7.y_(),await this.e7.tr()}async gn(){this.Co(new jj),this.Vo(),this.r7.gn(),this._O.gn(),this.a7.gn(),this.g7.gn(),this.w7.gn(),this._7.gn(),this.h7.gn(),this.A7.gn(),this.n7.gn(),this.zB.gn(),await this.e7.gn()}constructor(t,e,s){super(),this.i7=!1,this.bo=!1,this.WP=void 0,this.v7=!1,this.ba=void 0,this.f7=t=>{if(this.v7)return;this.v7=!0;const i=this.m7,e=De(t);this.e7.fg=new kN(this.we,e,t),D(i.gn())},this.p7=t=>{t.type!==l._w&&t.type!==l.fw&&this.Co(t)};const n=Na(e.uid);S(n)?this.xT=Sw++:this.xT=n,this.wd=e;const r=i._O,h=new TL;this.A7=new lI("8.0.0",r,h),this.PB=new sL,this.BB=new Ht;const o=new Ij(r,this.PB);this._O=new Wb(o,e.allowMixedContent),this.xH=null!=s?s:new XD(e.isEmbeddable,"8.0.0",VD()),this.l7=new ML(r,this.xH,this.A7,h,e,VD()),this.l7.EH().catch(this.f7),this.h7=new EI(t),this.h7.yn(_i.pn,this.Ds),this.RB=new EL,this.WW=new oL,this.hH=new uL;const a=new LN(t,e,this._O,this.PB,this.BB,this.h7,this.RB);this.PB.bW(a);let u=a;u=new aL(u,this.u7),u=new cL(u,this.rH),this.m7=u,this.e7=new vw(this.m7),this.e7.sf(this.p7),this.o7=new dL(this.e7),this.a7=new Xb(this.e7,this._O,this.PB),this.g7=new AI(this),this.w7=new OI(this.e7,e.allowNativeFullscreen),this._7=new HN(this.w7),this.h7.bn(),this.Bo=new Oj(t),this.zB=new rm(this.h7,this.RB,1,[pg.pm]),this.n7=new hm(this.zB),this.r7=new gL}};var lt,Ci=class extends Ys{get t7(){return this.y7()}y7(){return this.Qo.t7}get Oc(){return this.M7()}M7(){return this.Qo.Oc}get A7(){return this.Qo.A7}get s7(){return this.T7()}T7(){return this.Qo.s7}get DT(){return this.Qo.DT}set DT(t){this.Qo.DT=t}get g7(){return this.Qo.g7}get fQ(){return this.Qo.fQ}get u7(){return this.Qo.u7}get wd(){return this.Qo.wd}get Iu(){return this.Qo.Iu}get ya(){return this.w_()}w_(){return this.Qo.ya}get _O(){return this.Qo._O}get f_(){return this.Qo.f_}get l7(){return this.Qo.l7}get rH(){return this.Qo.rH}get kU(){return this.Qo.kU}get _7(){return this.Qo._7}get h7(){return this.Qo.h7}get e7(){return this.Qo.e7}get Ol(){return this.Qo.Ol}get N7(){return this.D7()}D7(){return this.Qo.N7}get Mg(){return this.Qo.Mg}get Bo(){return this.Qo.Bo}get ht(){return this.lf()}lf(){return this.Qo.ht}Af(){return this.Qo.Af()}get vf(){return this.mf()}set vf(t){this.pf(t)}mf(){return this.Qo.vf}pf(t){this.Qo.vf=t}get bt(){return this.yf()}yf(){return this.Qo.bt}Tf(){return this.Qo.Tf()}Nf(t){this.Qo.Nf(t)}d7(){return this.Qo.d7()}Td(){return this.Qo.Td()}get we(){return this.Df()}Df(){return this.Qo.we}get If(){return this.Sf()}Sf(){return this.Qo.If}Ef(){return this.Qo.Ef()}Lf(){return this.Qo.Lf()}get kf(){return this.Cf()}Cf(){return this.Qo.kf}get g_(){return this.Qo.g_}set g_(t){this.Qo.g_=t}get jf(){return this.zf()}zf(){return this.Qo.jf}get Pf(){return this.Bf()}set Pf(t){this.Rf(t)}Bf(){return this.Qo.Pf}Rf(t){this.Qo.Rf(t)}get Ff(){return this.Yf()}Yf(){return this.Qo.Ff}get Gf(){return this.Vf()}set Gf(t){this.Wf(t)}Vf(){return this.Qo.Gf}Wf(t){this.Qo.Gf=t}qf(){return this.Qo.qf()}get Xf(){return this.Zf()}set Xf(t){this.Kf(t)}Zf(){return this.Qo.Xf}Kf(t){this.Qo.Xf=t}get Jf(){return this.$f()}$f(){return this.Qo.Jf}get ba(){return this.Qo.ba}set ba(t){this.Qo.ba=t}i_(){return this.Qo.i_()}get e_(){return this.s_()}s_(){return this.Qo.e_}get nt(){return this.n_()}n_(){return this.Qo.nt}get r_(){return this.h_()}h_(){return this.Qo.r_}get rt(){return this.o_()}o_(){return this.Qo.rt}get a_(){return this.u_()}u_(){return this.Qo.a_}get c_(){return this.d_()}set c_(t){this.l_(t)}d_(){return this.Qo.c_}l_(t){this.Qo.l_(t)}v_(){this.Qo.v_()}m_(){this.Qo.m_()}p_(){this.Qo.p_()}ge(){this.Qo.ge()}be(){this.Qo.be()}cs(){return this.Qo.cs()}A_(){return this.Qo.A_()}D_(){this.Qo.D_()}I_(){this.Qo.I_()}ka(){this.Qo.ka()}Wa(){return this.Qo.Wa()}ga(t,i){return this.Qo.ga(t,i)}y_(){return this.Qo.y_()}E_(t){return!1}GP(){this.I7&&this.Qo.sf(this.b_)}VP(){this.I7&&this.Qo.cf(this.b_)}async gn(t){this.Vo(),t||await this.Qo.gn(),this.VP()}constructor(t,i){super(),this.b_=t=>{this.E_(t)||this.Co(t)},this.Qo=t,this.I7=!i,this.GP()}};!function(t){t[t.Za=0]="Za",t[t.S7=1]="S7",t[t.E7=2]="E7",t[t.b7=3]="b7",t[t.L7=4]="L7"}(lt||(lt={}));var Pj=[0,1,2,3,4],Bj={};function Zr(t,i){(Bj[i]||(Bj[i]=[])).push(t)}var Rj={};function Uj(t,i){(Rj[i]||(Rj[i]=[])).push(t)}var Qj=[];function Fj(t){for(const i of Qj)i(t)}var Yj=self.CustomEvent;var Gj=function(){try{const t=new Yj("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,i){return new CustomEvent(t,i)}:function(t,i){const e=h.createEvent("CustomEvent");return e.initCustomEvent(t,(null==i?void 0:i.bubbles)||!1,(null==i?void 0:i.cancelable)||!1,null==i?void 0:i.detail),e};var Vj=new class{get U(){return this.MT.length}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){const i=[];for(let e=0;e<t.U;e++)i[e]=t.cg(e).va;return i.getPlayerByUID=i=>{const e=t.k7(i);return e&&e.va},i}(this)}cg(t){return this.MT[t]}Jq(t){this.MT.push(t),this.va.push(t.va)}ET(t){const i=this.MT.indexOf(t);i<0||(M(this.MT,i),this.Xa&&M(this.Xa,i))}k7(t){for(const i of this.MT)if(i.Mg===t)return i}constructor(){this.MT=[],this.Xa=void 0}};var Ur,Wj=class extends wn{constructor(t){super(l.lo),this.source=t}},Hj=class extends Ys{get vf(){}set vf(t){}get Mf(){return this.Tf()}set Mf(t){this.Nf(t)}Tf(){return this.EB}d7(){return this.Tf()}Nf(t){this.bB&&this.EB===t||(this.EB=t,this.bB=!0,this.Co(new Oe(this.EB)))}get Ff(){return this.kB}get Gf(){return this.CB}set Gf(t){this.CB!==t&&(this.CB=t,this.Co(new Oi(this.EB,this.Gf)))}get Jf(){return ae.aT}get e_(){return this.bB}p_(){this.kB&&(this.kB=!1,this.Co(new Ps(this.EB)),this.Co(new Yu(this.EB)))}m_(){this.kB||(this.kB=!0,this.Co(new nc(this.EB,this.vf)),this.Co(new ye(this.EB)))}tr(){this.EB=0,this.bB=!1,this.CB=1,this.m_()}gn(){this.Vo()}be(){}ge(){}constructor(){super(),this.EB=0,this.kB=!0,this.bB=!1,this.CB=1}},qj={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},Xj={visibility:"hidden"},Zj={visibility:"visible"},Kj=class{get zu(){return void 0!==this.C7?this.C7:void 0!==this.x7?this.x7:void 0}set O7(t){this.x7=t,this.Yn()}Yn(){const t=this.Qo.Ff,i=this.j7;this.zu?this.Us.style.backgroundImage='url("'+Lf(this.zu)+'")':this.Us.style.backgroundImage="",t&&this.zu&&!i?this.ge():this.be()}ge(){TM(Xj,this.Qo.we),TM(Zj,this.Us)}be(){TM(Xj,this.Us),TM(Zj,this.Qo.we)}GP(){this.Qo.yn(l.lo,this.z7),this.Qo.yn(l.jh,this.aO)}gn(){this.Qo.fn(l.lo,this.z7),this.Qo.fn(l.jh,this.aO),sh(this.Us)}constructor(t){this.j7=!1,this.z7=t=>{var i;this.j7=!this.Qo.Ff,this.C7=null==(i=t.source)?void 0:i.poster,this.Yn()},this.aO=()=>{this.j7=!0,this.be()},this.Qo=t,this.GP(),this.Us=function(){let t=Or&&Or.document&&Or.document.createElement("div");return t.className="theoplayer-poster",TM(qj,t),t}(),t.we.appendChild(this.Us)}};function kh(t){let i;const e={get playing(){return t.Fc},get currentAds(){return t.P7.map((t=>t.B7()))},get currentAdBreak(){var i,e;return null!=(e=null==(i=t.R7)?void 0:i.B7())?e:null},get scheduledAds(){return t.U7.map((t=>t.B7()))},get scheduledAdBreaks(){return t.Q7.map((t=>t.B7()))},skip(){t.Hm()},schedule(i){let e=ED(i,Ds.Ib);e?t.n4(e,Ur.F7,!1):console.error("Invalid ad description")},registerServerSideIntegration(i,e){t.Y7(i,e)},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Vh(t,e),e}!function(t){t[t.F7=0]="F7",t[t.G7=1]="G7"}(Ur||(Ur={}));var Cc=class extends yo{constructor(t,i){super(t),this.Xl=i}},tc=class extends wn{get ad(){return this.adBreak}constructor(t,i){super(t),this.adBreak=i}},yn=class extends Cc{fa(){return new Jj(this.Xl.B7())}constructor(t){super("V7",t)}},Jj=class extends tc{constructor(t){super("removeadbreak",t)}},Mn=class extends Cc{fa(){return new $j(this.Xl.B7())}constructor(t){super("W7",t)}},$j=class extends tc{constructor(t){super("addadbreak",t)}},ee=class extends yo{constructor(t,i){super(t),this.H7=i}},vo=class extends wn{constructor(t,i){super(t),this.ad=i}},Vn=class extends ee{fa(){return new tz(this.H7.B7())}constructor(t){super("q7",t)}},tz=class extends vo{constructor(t){super("addad",t)}},Ss=class extends Cc{fa(){return new iz(this.Xl.B7())}constructor(t){super("X7",t)}},iz=class extends tc{constructor(t){super("adbreakend",t)}},sc=class extends Cc{fa(){return new ez(this.Xl.B7())}constructor(t){super("Z7",t)}},ez=class extends tc{constructor(t){super("adbreakbegin",t)}},ta=class extends ee{fa(){return new sz(this.H7.B7(),this.currentTime)}constructor(t,i){super("K7",t),this.currentTime=i}},sz=class extends vo{constructor(t,i){super("adbegin",t),this.currentTime=i}},nn=class extends ee{fa(){return new nz(this.H7.B7(),this.currentTime)}constructor(t,i){super("J7",t),this.currentTime=i}},nz=class extends vo{constructor(t,i){super("adend",t),this.currentTime=i}},xh=class extends yo{fa(){return new rz}constructor(){super("ttt")}},rz=class extends wn{constructor(){super("adadded")}},Ch=class extends Ys{get Fc(){return!!this.Ic&&this.Ic.Fc}get P7(){return this.Ic?this.Ic.P7:[]}get R7(){return this.Ic?this.Ic.R7:null}get U7(){return this.Ic?this.Ic.U7:[]}get Q7(){return this.Ic?this.Ic.Q7:[]}n4(t,i,e){var s;null==(s=this.Ic)||s.n4(t,i,e)}itt(t){var i;null==(i=this.Ic)||i.itt(t)}Hm(){var t;null==(t=this.Ic)||t.Hm()}ett(t){var i;null==(i=this.Ic)||i.ett(t)}Y7(t,i){var e;null==(e=this.Ic)||e.Y7(t,i)}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=kh(this)}get fg(){return this.Ic}set fg(t){const i=this.Ic;if(i===t)return;const e=this.P7,s=this.R7,n=this.U7,r=this.Q7;null==i||i.cf(this.Ds),this.Ic=t,null==t||t.sf(this.Ds);const h=this.P7,o=this.R7,a=this.U7,u=this.Q7,c=[];let d=!1;for(const t of r)qt(u,t)||c.push(new yn(t));for(const t of u)qt(r,t)||c.push(new Mn(t));for(const t of a)qt(n,t)||(c.push(new Vn(t)),d=!0);d&&c.push(new xh),s!==o&&(s&&c.push(new Ss(s)),o&&c.push(new sc(o)));for(const t of e)qt(h,t)||c.push(new nn(t,this.Qo.Tf()));for(const t of h)qt(e,t)||c.push(new ta(t,this.Qo.Tf()));for(const t of c)this.Co(t)}gn(){var t;return this.Vo(),null==(t=this.Ic)||t.cf(this.Ds),this.Ic=void 0,Promise.resolve()}constructor(t){super(),this.Xa=void 0,this.Qo=t}},qh=class extends Ys{get Fc(){return!1}get P7(){return[]}get R7(){return null}get U7(){return[]}get Q7(){return[]}n4(t,i,e){this.stt.push({ntt:t,htt:i,ott:e})}Hm(){}ett(t){}Y7(t,i){this.att.push({qA:t,utt:i})}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=kh(this)}itt(t){const i=this.att.slice(),e=this.stt.slice();this.tr();for(const e of i)t.Y7(e.qA,e.utt);for(const i of e)t.n4(i.ntt,i.htt,i.ott)}ctt(){const t=this.stt.map((t=>t.ntt));return this.tr(),t}tr(){No(this.att),No(this.stt)}gn(){return this.Vo(),this.tr(),Promise.resolve()}constructor(...t){super(...t),this.Xa=void 0,this.att=[],this.stt=[]}};function hz(t){return class extends Ys{get A7(){return this.dtt.A7}get Oc(){return this.Ic}get g7(){return this.dtt.g7}get wd(){return this.dtt.wd}get _O(){return this.dtt._O}get ya(){return this.dtt.ya}get _7(){return this.dtt._7}get h7(){return this.dtt.h7}get e7(){return this.dtt.e7}get t7(){return this.dtt.t7}get DT(){return this.dtt.DT}set DT(t){this.dtt.DT=t,this.ltt()}get s7(){return this.dtt.s7}get ht(){return this.dtt.ht}get fQ(){return this.dtt.fQ}get Iu(){return this.dtt.h7}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}get kf(){return this.dtt.kf}get g_(){return this.dtt.g_}set g_(t){this.dtt.g_=t}get jf(){return this.dtt.jf}get kU(){return this.dtt.kU}get nt(){return this.dtt.nt}get Ol(){return this.dtt.Ol}get rt(){return this.dtt.rt}get u7(){return this.dtt.u7}get rH(){return this.dtt.rH}get vf(){return this.Qo.vf}set vf(t){this.Qo.vf=t}get bt(){return this.dtt.bt}get we(){return this.dtt.we}get If(){return this.dtt.If}get Pf(){return this.dtt.Pf}set Pf(t){this.Rf(t)}get Ff(){return this.Qo.Ff}get mi(){return this.ftt.zu||""}set mi(t){this.ftt.O7=t}get Gf(){return this.dtt.Gf}set Gf(t){this.Qo.Gf=t}get Xf(){return this.dtt.Xf}set Xf(t){this.dtt.Xf=t}get Jf(){return this.Qo.Jf}get ba(){return this.dtt.ba}set ba(t){this.dtt.ba=t}get e_(){return this.Qo.e_}get N7(){return this.dtt.N7}get Mg(){return this.dtt.Mg}get r_(){return this.dtt.r_}get a_(){return this.dtt.a_}get c_(){return this.dtt.c_}set c_(t){this.l_(t)}get f_(){return this.dtt.f_}get l7(){return this.dtt.l7}get Bo(){return this.dtt.Bo}async Mx(t,i){return this.Mq.Mx(t,i).catch(el)}async _tt(t,i){Bo(i),this.dtt.sf(this.gtt);try{await this.dtt.ga(t,i)}finally{this.dtt.cf(this.gtt)}}async ltt(){const t=await this.wtt();this.Att(t)}async wtt(){const t=this.Wa();return t&&!Xs(t)&&this.DT&&this.Ff?this.s7.mtt(this.Pf):"none"}Att(t){var i;const e=(null==(i=this.Wa())?void 0:i.mutedAutoplay)||this.wd.mutedAutoplay;switch(t){case"all":this.ptt();break;case"muted":(this.Pf||e===cw.ALL)&&(this.Pf=!0,this.p_())}}ga(t){Xs(this.WP)||this.Co(new uw(0,ae.aT)),this.tr(),this.WP=t,D(this.Mx((async i=>{Bo(i);try{await this._tt(t,i)}catch(t){return Ao(t),this.WP=void 0,void this.IP(function(t,i){return t instanceof $i?t:t instanceof g?new $i(i,t.message,t):new $i(i,String(t))}(t,Ui.SOURCE_NOT_SUPPORTED))}finally{this.ytt(this.dtt)}const e=await this.wtt();this.Co(new Wj(this.Wa())),this.Att(e)})))}Nf(t){this.Qo.Nf(t)}Ef(){var t;return null!=(t=this.GB)?t:this.dtt.Ef()}Lf(){var t;return null!=(t=this.Bz)?t:this.dtt.Lf()}IP(t){void 0===this.Lf()&&(this.Bz=t,this.GB=De(t),this.Co(new Bi(t)))}p_(){this.Qo.p_()}ptt(){this.Pf||this.v_(),this.p_()}v_(){this.dtt.v_()}m_(){this.Qo.m_()}y_(){this.ga(void 0)}ge(){this.ZP=!0,this.Qo.ge()}be(){this.ZP=!1,this.Qo.be()}ka(){this.dtt.ka()}l_(t){this.dtt.l_(t)}Rf(t){this.dtt.Rf(t)}wa(t){this.Mtt=t,t.Jq(this)}cs(){return this.dtt.cs()}Wa(){return this.WP}A_(){return this.dtt.A_()}Tf(){return this.Qo.Tf()}d7(){return this.Qo.d7()}Td(){return this.dtt.Td()}Af(){return this.dtt.Af()}qf(){return this.dtt.qf()}i_(){return this.dtt.i_()}D_(){this.dtt.D_()}I_(){this.dtt.I_()}tr(){this.WP=void 0,this.Bz=void 0,this.GB=void 0,this.Ttt=!0,No(this.Ntt),this.Dtt.tr(),this.ytt(this.Dtt),this.Mq.Xd(),D(this.Mq.Mx((async t=>{Bo(t),await this.dtt.y_()})))}gn(){this.Co(new jj),this.ftt.gn(),this.VP(),this.tr(),D(this.Mx((async()=>{await this.dtt.gn(),this.Mtt&&(this.Mtt.ET(this),this.Mtt=void 0),this.Mq.gn()}))),this.Vo()}ytt(t){if(this.Qo===t)return;const i=this.Qo.Ff,e=this.Qo.Tf(),s=this.Qo.Gf,n=this.Qo.Jf,r=this.Qo.e_;this.Itt=i,this.a5=n,this.VP(),t.sf(this.Stt),t===this.dtt?(void 0!==this.Ic&&(this.Ic.fg=t.Oc,this.Ett.itt(this.Ic)),(r||t.Tf()!==e)&&t.Nf(e),t.Gf!==s&&(t.Gf=s),i?t.m_():t.p_()):(void 0!==this.Ic&&(this.Ic.fg=this.Ett,this.Ett.tr()),this.wd.retainPlaybackRateOnSourceChange?t.Gf=s:1!==s&&this.Co(new Oi(this.Tf(),1))),t.cf(this.Stt),this.Qo=t,this.GP();for(const t of this.Ntt)this.Co(t);No(this.Ntt),this.ZP?t.ge():t.be()}GP(){this.Qo.sf(this.S_)}VP(){this.Qo.cf(this.S_)}fa(){return function(t){let i,e;const s=i=>{e=i;const s=jh(i,t.wd);t.ga(s)};let n={get abr(){return t.t7.va},get ads(){var i;return null==(i=t.Oc)?void 0:i.va},get audioTracks(){return t.ht.va},get autoplay(){return t.DT},set autoplay(i){t.DT=Boolean(i)},get buffered(){return t.Af()},get canvas(){return t.g7.va},get cast(){var i;return null==(i=t.fQ)?void 0:i.va},get clip(){return t.u7.va},get currentProgramDateTime(){var i;return null!=(i=t.vf)?i:null},set currentProgramDateTime(i){t.vf=null!=i?i:void 0},get currentTime(){return t.Tf()},set currentTime(i){t.Nf(Number(i))},get duration(){return t.Td()},get element(){return t.we},get ended(){return t.If},get error(){return t.Ef()},get errorObject(){return t.Lf()},get loop(){return t.rH.rH},set loop(i){t.rH.rH=Boolean(i)},get metrics(){return t.jf.va},get muted(){return t.Pf},set muted(i){t.Rf(i)},get network(){return t.kU.va},get paused(){return t.Ff},get playbackRate(){return t.Gf},set playbackRate(i){const e=Number(i);if(e<0)throw new RangeError("playbackRate must be a positive number");t.Gf=e},get played(){return t.qf()},get poster(){return t.mi},set poster(i){t.mi=Va(i)},get preload(){return t.Xf},set preload(i){t.Xf=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(i)},get presentation(){return t._7.va},get readyState(){return t.Jf},get seekable(){return t.i_()},get seeking(){return t.e_},get source(){return e},set source(t){s(t)},get src(){return pD(t.Wa())},set src(t){s({sources:t})},get textTracks(){return t.nt.va},get textTrackStyle(){return t.Ol.va},get theoLive(){return t.N7},get uid(){return t.Mg},get videoHeight(){return t.r_},get videoTracks(){return t.rt.va},get videoWidth(){return t.a_},get visibility(){return t.Bo.va},get volume(){return t.c_},set volume(i){t.l_(Number(i))},get latency(){return t.f_.va},destroy(){t.gn(),t=null,e=void 0},play(){t.ptt()},pause(){t.m_()},stop(){e=void 0,t.y_()},prepareWithUserAction(){t.v_()},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)},setSource(t){s(t)}};return i=new Rh(n,!0),i.Qa(t),i.yn("destroy",(()=>{i.gn()})),n}(this)}constructor(i,e){super(),this.Itt=!0,this.a5=ae.aT,this.Ttt=!1,this.WP=void 0,this.Bz=void 0,this.GB=void 0,this.gtt=t=>{t.type!==l.ww&&this.Ntt.push(t)},this.Stt=t=>{(t.type!==l.jh||this.Qo.Ff)&&(t.type===l.Sh&&this.Qo.Ff||t.type===l.yw&&this.Qo.e_&&this.Qo.Tf()===t.currentTime||t.type===l.ww&&this.Qo.Gf===t.playbackRate||this.Co(t))},this.S_=t=>{if(this.Ttt){if(t.type===er.Bw)return;t.type!==er.Ow&&t.type!==er.Rw||(this.Ttt=!1)}if(t.type===l.jh){if(!this.Itt)return;this.Itt=!1}else if(t.type===l.Sh){if(this.Itt)return;this.Itt=!0}else if(t.type===er.H_){if(this.a5===t.readyState)return;this.a5=t.readyState}else if(t.type===l.qg)return;this.Co(t)},this.dtt=new t(i,e),this.Dtt=new Hj,this.Qo=this.dtt,this.ftt=new Kj(this),this.dtt.Oc&&(this.Ic=new Ch(this),this.Ic.fg=this.dtt.Oc,this.Ett=new qh),this.Mq=new jn,this.Ntt=[],this.ZP=!0,this.GP()}}}var oz,az=class extends wn{constructor(t){super("tizen2retry"),this.originalErrorEvent=t}};function uz(){if(!oz){let t=zj;t=function(t){return class extends Ci{constructor(i,e){let s=new t(i,e);for(const t of Pj)if(Rj[t])for(const i of Rj[t])s=i(s);super(s)}}}(t);let i=hz(t);Vt.DE&&Vt.EE<3&&(i=function(t){return class extends t{ga(t){this.btt=0,super.ga(t)}Co(t){if(t.type===hh.ha&&this.btt<3)return this.btt++,super.Co(new az(t)),void super.ga(this.Wa());super.Co(t)}constructor(...t){super(...t),this.btt=0}}}(i)),i=function(t){let i=t;for(const t of Pj)if(Bj[t])for(const e of Bj[t])i=e(i);return i}(i),oz=i}return oz}function cz(t,i){const e=fw(i),s=new(uz())(t,e);s.ba=s;let n=s.va;return s.ka(),s.wa(Vj),w.defineProperty(n,"constructor",{value:cz}),n=Wl(n),Fj(s),n}ac((()=>{self.dispatchEvent&&self.dispatchEvent(Gj("theoplayerready"))}));var dz={base64:new class{encode(t){return Pe(t)}decode(t){return Al(t)}}},lz=JSON.parse('["dash","hls","chromecast","ads","airplay","spotx","vr","vr-webxr","cache","webaudio","youbora","mediamelon","moat","google-dai","streamone","lcevc","freewheel","agama","verizonmedia","mediatailor","ui","relatedcontent","social","upnext","contextmenu","texttrackstyle-ui","activequalitylabel","upcomingadnotification"]');function fz(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),w.defineProperty(t,s.key,s)}}function _z(t,i){var e=function(t,i){var e=t.length;if(e<=1)return t;for(var s=new Array(e),n=1;n<e;n*=2){gz(t,i,n,s);var r=t;t=s,s=r}return t}(t,i);return e!==t&&gz(e,null,t.length,t),t}function gz(t,i,e,s){var n,r,h,o,a,u=t.length,c=0,d=2*e;for(n=0;n<u;n+=d)for(h=(r=n+e)+e,r>u&&(r=u),h>u&&(h=u),o=n,a=r;;)if(o<r&&a<h)i(t[o],t[a])<=0?s[c++]=t[o++]:s[c++]=t[a++];else if(o<r)s[c++]=t[o++];else{if(!(a<h))break;s[c++]=t[a++]}}var wz=/[a-zA-Z]/,Az=/[0-9]/,vz=/[0-9a-fA-F]/,mz=/^0x/i,pz=/^[0-9]+$/,yz=/^[0-9a-fA-F]+$/,Mz=/^[0-7]+$/,Tz=w.prototype.toString,Nz=Array.isArray||function(t){return"[object Array]"===Tz.call(t)},Dz="undefined"!=typeof Symbol&&"symbol"==typeof Symbol.iterator;function Iz(t){return Nz(t)?t:Array.from(t)}function Sz(t,i,e){var s=t[i];t[i]=t[e],t[e]=s}function Ez(t){return t>=65&&t<=90}function bz(t){return Ez(t)||function(t){return t>=97&&t<=122}(t)}function Lz(t){return t>=48&&t<=57}function kz(t){return Lz(t)||bz(t)}function Cz(t){return Lz(t)||t>=65&&t<=70||t>=97&&t<=102}function xz(t){return Ez(t)?t+32:t}function Oz(t){return Lz(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function jz(t,i){return void 0===i&&(i=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(i?87:55):-1}var zz=_.min,Pz=String.fromCharCode,Bz=16384;function Rz(t){for(var i=t.length,e=[],s=0;s<i;s+=Bz){var n=zz(s+Bz,i);e.push(Pz.apply(null,t.slice(s,n)))}return e.join("")}var Uz=2147483647,Qz=/[^\0-\x7E]/,Fz=/[\x2E\u3002\uFF0E\uFF61]/g,Yz={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Gz=_.floor,Vz=String.fromCharCode;function Wz(t){throw new RangeError(Yz[t])}function Hz(t){for(var i=[],e=0,s=t.length;e<s;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){var r=t.charCodeAt(e++);56320==(64512&r)?i.push(((1023&n)<<10)+(1023&r)+65536):(i.push(n),e--)}else i.push(n)}return i}var qz,Xz,Sh,Zz=function(t,i){return t+22+75*(t<26)-((0!=i)<<5)},Kz=function(t,i,e){var s=0;for(t=e?Gz(t/700):t>>1,t+=Gz(t/i);t>455;s+=36)t=Gz(t/35);return Gz(s+36*t/(t+38))},Jz=function(t){return function(t,i){var e=t.split("@"),s="";e.length>1&&(s=e[0]+"@",t=e[1]);var n=function(t,i){for(var e=[],s=t.length;s--;)e[s]=i(t[s]);return e}((t=t.replace(Fz,".")).split("."),i).join(".");return s+n}(t,(function(t){return Qz.test(t)?"xn--"+function(t){for(var i=[],e=(t=Hz(t)).length,s=128,n=0,r=72,h=0,o=t;h<o.length;h++){var a=o[h];a<128&&i.push(Vz(a))}var u=i.length,c=u;for(u&&i.push("-");c<e;){for(var d=Uz,l=0,f=t;l<f.length;l++){var _=f[l];_>=s&&_<d&&(d=_)}var g=c+1;d-s>Gz((Uz-n)/g)&&Wz("overflow"),n+=(d-s)*g,s=d;for(var w=0,A=t;w<A.length;w++){var v=A[w];if(v<s&&++n>Uz&&Wz("overflow"),v==s){for(var m=n,p=36;;p+=36){var y=p<=r?1:p>=r+26?26:p-r;if(m<y)break;var M=m-y,T=36-y;i.push(Vz(Zz(y+M%T,0))),m=Gz(M/T)}i.push(Vz(Zz(m,0))),r=Kz(n,g,c==u),n=0,++c}}++n,++s}return i.join("")}(t):t}))};function Ot(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s)}return Rz(i)}function $z(t){if(t>=55296&&t<=57343)throw new g("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function tP(t,i){return t>>i&63|128}function iP(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?($z(t),i.push(t>>12&15|224),i.push(tP(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(tP(t,12)),i.push(tP(t,6))),i.push(63&t|128)):i.push(t)}function eP(t){for(var i=[],e=0;e<t.length;e++){iP(t[e],i)}return i}function sP(){if(Sh>=Xz)throw new g("Invalid byte index");var t=255&qz[Sh];if(Sh++,128==(192&t))return 63&t;throw new g("Invalid continuation byte")}function nP(){var t,i;if(Sh>Xz)throw new g("Invalid byte index");if(Sh===Xz)return!1;if(t=255&qz[Sh],Sh++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|sP())>=128)return i;throw new g("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|sP()<<6|sP())>=2048)return $z(i),i;throw new g("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|sP()<<12|sP()<<6|sP())>=65536&&i<=1114111)return i;throw new g("Invalid UTF-8 detected")}function rP(t){return[37,jz(t>>4),jz(15&t)]}function hP(t){return function(t){return t>=0&&t<=31}(t)||t>126}function oP(t){return hP(t)||32===t||34===t||60===t||62===t||96===t}function aP(t){return oP(t)||35===t||63===t||123===t||125===t}function uP(t){return aP(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function cP(t){return t<33||t>126||34===t||35===t||60===t||62===t}function dP(t){return cP(t)||39===t}function lP(t,i){if(!i(t))return[t];for(var e=eP([t]),s=[],n=0;n<e.length;n++){var r=e[n];s.push.apply(s,rP(r))}return s}function fP(t,i){for(var e=[],s=0,n=Hz(t);s<n.length;s++){var r=n[s];e.push.apply(e,lP(r,i))}return Ot(e)}function _P(t){return function(t){for(var i=[],e=t.length,s=0;s<e;s++){var n=t[s];if(37===n&&s+2<e&&Cz(t[s+1])&&Cz(t[s+2])){var r=Oz(t[s+1])<<4|Oz(t[s+2]);i.push(r),s+=2}else i.push(n)}return i}(eP(t))}function gP(t){return Ot(function(t){qz=t.slice(),Xz=qz.length,Sh=0;for(var i,e=[];!1!==(i=nP());)e.push(i);return e}(_P(Hz(t))))}function wP(t){var i=t.length,e=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<i&&":"===t[r]){if(!(r+1<i&&":"===t[r+1]))throw new b;r+=2,n=s+=1}for(;r<i;){if(8===s)throw new b("Too many groups");if(":"!==t[r]){for(var h=0,o=0;o<4&&r<i&&vz.test(t[r]);)h=h<<4|x(t[r],16),r+=1,o+=1;if("."===t[r]){if(0===o)throw new b;if(r-=o,s>6)throw new b;for(var a=0;r<i;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new b;r+=1}if(!Az.test(t[r]))throw new b;for(;r<i&&Az.test(t[r]);){var c=x(t[r],10);if(null===u)u=c;else{if(0===u)throw new b;if((u=10*u+c)>255)throw new b}r+=1}e[s]=e[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new b;break}if(":"===t[r]){if((r+=1)===i)throw new b}else if(r<i)throw new b;e[s]=h,s+=1}else{if(null!==n)throw new b("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var d=s-n;for(s=7;0!==s&&d>0;)Sz(e,s,n+d-1),s-=1,d-=1}else if(8!==s)throw new b;return e}function AP(t){var i=10,e=pz;return mz.test(t)?(t=t.slice(2),i=16,e=yz):t.length>=2&&"0"===t[0]&&(t=t.slice(1),i=8,e=Mz),""===t?0:e.test(t)?x(t,i):void 0}var Uh={X0:4},vP=/[\0\t\n\r #%/:?@\[\\\]]/,mP=/[\0\t\n\r #/:?@\[\\\]]/;function pP(t,i){if("["===t[0]){if("]"!==t[t.length-1])throw new b("Invalid IPv6 address");return{X0:2,Ltt:wP(t.slice(1,-1))}}if(!i)return function(t){if(mP.test(t))throw new b("Invalid code point in opaque host");var i=fP(t,hP);return""===i?Uh:{X0:3,qL:i}}(t);var e=function(t){var i=function(t){return Jz(t.toLowerCase())}(t);return i}(gP(t));if(vP.test(e))throw new b("Invalid code point in host");var s=function(t){var i=t.split(".");if(""===i[i.length-1]&&i.pop(),!(i.length>4)){for(var e=[],s=0;s<i.length;s++){var n=i[s];if(""===n)return;var r=AP(n);if(void 0===r)return;e.push(r)}for(var h=0;h<e.length-1;h++)if(e[h]>255)throw new b;if(e[e.length-1]>=_.pow(256,5-e.length))throw new b;for(var o=e.pop(),a=0;a<e.length;a++)o+=e[a]*_.pow(256,3-a);return o}}(e);return void 0!==s?{X0:1,Ltt:s}:""===e?Uh:{X0:0,ktt:e}}function yP(t){switch(t.X0){case 0:return t.ktt;case 1:return function(t){for(var i=[],e=t,s=1;s<=4;s++)i.push(""+(255&e)),4!==s&&i.push("."),e>>>=8;return i.reverse().join("")}(t.Ltt);case 2:return"["+function(t){for(var i="",e=function(t){for(var i=0,e=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>e&&(i=s,e=n),n=0);return n>e&&(i=s,e=n),e>1?i:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}e!==n?(i+=t[n].toString(16),7!==n&&(i+=":")):(i+=0===n?"::":":",s=!0)}return i}(t.Ltt)+"]";case 3:return t.qL;case 4:return""}}var MP=/\+/g;function TP(t){return 42===t||45===t||46===t||95===t||kz(t)}function NP(t){for(var i=t.split("&"),e=[],s=0;s<i.length;s++){var n=i[s];if(""!==n){var r=n.indexOf("="),h=void 0,o=void 0;-1!==r?(h=n.slice(0,r),o=n.slice(r+1)):(h=n,o=""),h=h.replace(MP," "),o=o.replace(MP," ");var a=gP(h),u=gP(o);e.push([a,u])}}return e}function DP(t){for(var i="",e=0;e<t.length;e++){var s=t[e];e>0&&(i+="&"),i+=IP(eP(Hz(s[0])))+"="+IP(eP(Hz(s[1])))}return i}function IP(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];32===s?i.push(43):TP(s)?i.push(s):i.push.apply(i,rP(s))}return Rz(i)}var SP=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function pc(t){var i=""+t,e=SP.exec(i);return e?function(t,i){for(var e=t.length,s=[],n=i;n<e;n++){var r=t.charCodeAt(n);if(bP(r))if(LP(r)||n===e-1)s.push(EP);else{var h=t.charCodeAt(n+1);LP(h)?(s.push(r,h),n++):s.push(EP)}else s.push(r)}return t.slice(0,i)+Rz(s)}(i,e.index):i}var EP=65533,bP=function(t){return 55296==(63488&t)},LP=function(t){return 0!=(1024&t)};function kP(t,i){var e=t[0],s=i[0];return e===s?0:e<s?-1:1}function CP(t){t.Ctt.length=0}function xP(t,i){!function(t,i){for(var e=0;e<i.length;e++)t[e]=i[e];t.length=i.length}(t.Ctt,NP(i))}function OP(t){if(t.Ju){var i=DP(t.Ctt);""===i&&(i=null),t.Ju.Ju.xtt=i}}var jP=function(){function t(t){if(void 0===t&&(t=void 0),this.Ju=null,null==t)this.Ctt=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof jP&&!!Nz(t.Ctt)&&(!Dz||t[Symbol.iterator]===zP)}(t))this.Ctt=t.Ctt.slice();else if(function(t){return null!=t&&(!!Nz(t)||!!Dz&&"function"==typeof t[Symbol.iterator])}(t)){this.Ctt=[];for(var i=0,e=Iz(t);i<e.length;i++){var s=Iz(e[i]);if(2!==s.length)throw new b("Invalid name-value pair");this.Ctt.push([pc(s[0]),pc(s[1])])}}else for(var n in this.Ctt=[],t)w.prototype.hasOwnProperty.call(t,n)&&this.Ctt.push([pc(n),pc(t[n])]);else(t=pc(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.Ctt=NP(t)}var i=t.prototype;return i.append=function(t,i){t=pc(t),i=pc(i),this.Ctt.push([t,i]),OP(this)},i.delete=function(t){t=pc(t);for(var i=this.Ctt,e=0;e<i.length;){i[e][0]===t?i.splice(e,1):e++}OP(this)},i.get=function(t){t=pc(t);for(var i=this.Ctt,e=0;e<i.length;e++){var s=i[e];if(s[0]===t)return s[1]}return null},i.getAll=function(t){t=pc(t);for(var i=this.Ctt,e=[],s=0;s<i.length;s++){var n=i[s];n[0]===t&&e.push(n[1])}return e},i.has=function(t){t=pc(t);for(var i=this.Ctt,e=0;e<i.length;e++){if(i[e][0]===t)return!0}return!1},i.set=function(t,i){t=pc(t),i=pc(i);for(var e=this.Ctt,s=!1,n=0;n<e.length;){var r=e[n];r[0]===t?s?e.splice(n,1):(r[1]=i,s=!0,n++):n++}s||e.push([t,i]),OP(this)},i.sort=function(){_z(this.Ctt,kP),OP(this)},i.toString=function(){return DP(this.Ctt)},i.entries=function(){return new UP(this.Ctt,PP)},i.keys=function(){return new UP(this.Ctt,BP)},i.values=function(){return new UP(this.Ctt,RP)},i.forEach=function(t){var i=this;this.Ctt.forEach((function(e){return t(e[1],e[0],i)}))},t}(),zP=jP.prototype.entries;Dz&&(jP.prototype[Symbol.iterator]=zP);var PP=function(t){return[t[0],t[1]]},BP=function(t){return t[0]},RP=function(t){return t[1]},UP=function(){function t(t,i){this.Ott=0,this.Ctt=t,this.jtt=i}return t.prototype.next=function(){return this.Ott<this.Ctt.length?{done:!1,value:this.jtt(this.Ctt[this.Ott++])}:{done:!0,value:void 0}},t}(),QP="null";var _n=w.create(null);_n.ftp=21,_n.file=0,_n.gopher=70,_n.http=80,_n.https=443,_n.ws=80,_n.wss=443;var FP=/^(?:\.|%2e)$/i,YP=/^(?:\.|%2e){2}$/i;function GP(t){return FP.test(t)}function VP(t){return YP.test(t)}function WP(t){return void 0!==_n[t]}function Dc(t){return WP(t.Oj)}function HP(t){return""!==t.ztt||""!==t.Ptt}function qP(t){var i=t.length;if(!(i>=2))return!1;if(!ZP(t.slice(0,2)))return!1;if(2!==i){var e=t[2];if(47!==e&&92!==e&&63!==e&&35!==e)return!1}return!0}function XP(t){return 2===t.length&&wz.test(t[0])&&(":"===t[1]||"|"===t[1])}function ZP(t){return 2===t.length&&XP(Rz(t))}function KP(t){return XP(t)&&":"===t[1]}function JP(t){var i=t.Btt;0!==i.length&&("file"===t.Oj&&1===i.length&&KP(i[0])||i.pop())}function $P(t){return null===t.Rtt||Uh===t.Rtt||t.Utt||"file"===t.Oj}var P=-1,tB=/\t|\n|\r/g,iB=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function eB(t,i,e,s){void 0===e&&(e=null),void 0===s&&(s=null),e||(e=new sB,t=t.replace(iB,""));var n=null!==s?s:0;i=i||null;for(var r=[],h=!1,o=!1,a=!1,u=Hz(t=t.replace(tB,"")),c=u.length,d=0;d<=c;){var l=d<c?u[d]:P;switch(n){case 0:if(!bz(l)){if(null===s){r.length=0,n=2;continue}throw new b("Invalid scheme")}r.push(xz(l)),n=1;break;case 1:if(kz(l)||43===l||45===l||46===l)r.push(xz(l));else{if(58!==l){if(null===s){r.length=0,n=2,d=0;continue}throw new b("Invalid scheme")}var f=Ot(r);if(null!==s){if(WP(e.Oj)&&!WP(f))return;if(!WP(e.Oj)&&WP(f))return;if((HP(e)||null!==e.G8)&&"file"===f)return;if("file"===e.Oj&&(e.Rtt===Uh||null===e.Rtt))return}if(e.Oj=f,null!==s)return void(Dc(e)&&e.G8===_n[e.Oj]&&(e.G8=null));r.length=0,"file"===e.Oj?n=13:Dc(e)&&i&&i.Oj===e.Oj?n=3:Dc(e)?n=7:47===u[d+1]?(n=4,d+=1):(e.Utt=!0,e.Btt.push(""),n=18)}break;case 2:if(!i||i.Utt&&35!==l)throw new b("Invalid scheme");i.Utt&&35===l?(e.Oj=i.Oj,e.Btt=i.Btt.slice(),e.xtt=i.xtt,e.Qtt="",e.Utt=!0,n=20):"file"!==i.Oj?(n=5,d-=1):(n=13,d-=1);break;case 3:47===l&&47===u[d+1]?n=8:(n=5,d-=1);break;case 4:47===l?n=9:(n=17,d-=1);break;case 5:e.Oj=i.Oj,P===l?(e.ztt=i.ztt,e.Ptt=i.Ptt,e.Rtt=i.Rtt,e.G8=i.G8,e.Btt=i.Btt.slice(),e.xtt=i.xtt):47===l?n=6:63===l?(e.ztt=i.ztt,e.Ptt=i.Ptt,e.Rtt=i.Rtt,e.G8=i.G8,e.Btt=i.Btt.slice(),e.xtt="",n=19):35===l?(e.ztt=i.ztt,e.Ptt=i.Ptt,e.Rtt=i.Rtt,e.G8=i.G8,e.Btt=i.Btt.slice(),e.xtt=i.xtt,e.Qtt="",n=20):92===l&&Dc(e)?n=6:(e.ztt=i.ztt,e.Ptt=i.Ptt,e.Rtt=i.Rtt,e.G8=i.G8,e.Btt=i.Btt.slice(),e.Btt.pop(),n=17,d-=1);break;case 6:!Dc(e)||47!==l&&92!==l?47===l?n=9:(e.ztt=i.ztt,e.Ptt=i.Ptt,e.Rtt=i.Rtt,e.G8=i.G8,n=17,d-=1):n=8;break;case 7:if(47!==l||47!==u[d+1]){n=8;continue}n=8,d+=1;break;case 8:47!==l&&92!==l&&(n=9,d-=1);break;case 9:if(64===l){h&&r.unshift(37,52,48),h=!0;for(var _=0;_<r.length;_++){var g=r[_];if(58!==g||a){var w=Ot(lP(g,uP));a?e.Ptt+=w:e.ztt+=w}else a=!0}r.length=0}else if(P===l||47===l||63===l||35===l||Dc(e)&&92===l){if(h&&0===r.length)throw new b("Invalid host");d-=r.length+1,r.length=0,n=10}else r.push(l);break;case 10:case 11:if(null!==s&&"file"===e.Oj)d-=1,n=15;else if(58!==l||o)if(P===l||47===l||63===l||35===l||Dc(e)&&92===l){if(d-=1,Dc(e)&&0===r.length)throw new b("Invalid host");if(null!==s&&0===r.length&&(HP(e)||null!==e.G8))return;var A=pP(Ot(r),Dc(e));if(e.Rtt=A,r.length=0,n=16,null!==s)return}else 91===l?o=!0:93===l&&(o=!1),r.push(l);else{if(0===r.length)throw new b("Invalid host");var v=pP(Ot(r),Dc(e));if(e.Rtt=v,r.length=0,n=12,11===s)return}break;case 12:if(Lz(l))r.push(l);else{if(!(P===l||47===l||63===l||35===l||Dc(e)&&92===l||null!==s))throw new b("Invalid port");if(0!==r.length){var m=x(Ot(r),10);if(m>65535)throw new b("Invalid port");e.G8=m===_n[e.Oj]?null:m,r.length=0}if(null!==s)return;n=16,d-=1}break;case 13:e.Oj="file",47===l||92===l?n=14:i&&"file"===i.Oj?P===l?(e.Rtt=i.Rtt,e.Btt=i.Btt.slice(),e.xtt=i.xtt):63===l?(e.Rtt=i.Rtt,e.Btt=i.Btt.slice(),e.xtt="",n=19):35===l?(e.Rtt=i.Rtt,e.Btt=i.Btt.slice(),e.xtt=i.xtt,e.Qtt="",n=20):(qP(u.slice(d))||(e.Rtt=i.Rtt,e.Btt=i.Btt.slice(),JP(e)),n=17,d-=1):(n=17,d-=1);break;case 14:47===l||92===l?n=15:(i&&"file"===i.Oj&&!qP(u.slice(d))&&(KP(i.Btt[0])?e.Btt.push(i.Btt[0]):e.Rtt=i.Rtt),n=17,d-=1);break;case 15:if(P===l||47===l||92===l||63===l||35===l)if(d-=1,null===s&&ZP(r))n=17;else if(0===r.length){if(e.Rtt=Uh,null!==s)return;n=16}else{var p=pP(Ot(r),Dc(e));if(0===p.X0&&"localhost"===p.ktt&&(p=Uh),e.Rtt=p,null!==s)return;r.length=0,n=16}else r.push(l);break;case 16:Dc(e)?(n=17,47!==l&&92!==l&&(d-=1)):null===s&&63===l?(e.xtt="",n=19):null===s&&35===l?(e.Qtt="",n=20):P!==l&&(n=17,47!==l&&(d-=1));break;case 17:if(P===l||47===l||Dc(e)&&92===l||null===s&&(63===l||35===l)){var y=Ot(r);if(VP(y)?(JP(e),47===l||Dc(e)&&92===l||e.Btt.push("")):!GP(y)||47===l||Dc(e)&&92===l?GP(y)||("file"===e.Oj&&0===e.Btt.length&&ZP(r)&&(Uh!==e.Rtt&&null!==e.Rtt&&(e.Rtt=Uh),r[1]=58,y=Ot(r)),e.Btt.push(y)):e.Btt.push(""),r.length=0,"file"===e.Oj&&(P===l||63===l||35===l))for(;e.Btt.length>1&&""===e.Btt[0];)e.Btt.shift();63===l?(e.xtt="",n=19):35===l&&(e.Qtt="",n=20)}else r.push.apply(r,lP(l,aP));break;case 18:63===l?(e.xtt="",n=19):35===l?(e.Qtt="",n=20):P!==l&&(e.Btt[0]+=Ot(lP(l,hP)));break;case 19:null===s&&35===l?(e.Qtt="",n=20):P!==l&&(e.xtt+=Ot(lP(l,Dc(e)?dP:cP)));break;case 20:P===l||0===l||(e.Qtt+=Ot(lP(l,oP)))}d++}return e}function xr(t,i,e,s){try{eB(t,i,e,s)}catch(t){}}var sB=function(){this.Oj="",this.ztt="",this.Ptt="",this.Rtt=null,this.G8=null,this.Btt=[],this.xtt=null,this.Qtt=null,this.Utt=!1};function nB(t){switch(t.Oj){case"blob":var i;try{i=eB(t.Btt[0],null)}catch(t){return QP}return nB(i);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,i,e){return t+"://"+yP(i)+(null===e?"":":"+e)}(t.Oj,t.Rtt,t.G8);default:return QP}}var rB=function(){function t(t,i){var e,s=null;if(null!=i)if(function(t){return null!=t&&t instanceof rB&&"object"==typeof t.Ju}(i))s=i.Ju;else try{s=eB(String(i),null)}catch(t){throw new b("Invalid base URL: "+t.message)}try{e=eB(String(t),s)}catch(t){throw new b("Invalid URL: "+t.message)}var n=e.xtt;this.Ju=e,this.xtt=function(t){var i=new jP;return null!==t&&xP(i,t),i}(n),this.xtt.Ju=this}var i=t.prototype;return i.toString=function(){return this.href},i.toJSON=function(){return this.href},function(t,i,e){i&&fz(t.prototype,i),e&&fz(t,e)}(t,[{key:"href",get:function(){return function(t,i){void 0===i&&(i=!1);var e=t.Oj+":";if(null!==t.Rtt?(e+="//",HP(t)&&(e+=t.ztt,""!==t.Ptt&&(e+=":"+t.Ptt),e+="@"),e+=yP(t.Rtt),null!==t.G8&&(e+=":"+t.G8)):null===t.Rtt&&"file"===t.Oj&&(e+="//"),t.Utt)e+=t.Btt[0];else for(var s=0,n=t.Btt;s<n.length;s++)e+="/"+n[s];return null!==t.xtt&&(e+="?"+t.xtt),i||null===t.Qtt||(e+="#"+t.Qtt),e}(this.Ju)},set:function(t){var i;try{i=eB(String(t),null)}catch(t){throw new b("Invalid URL: "+t.message)}this.Ju=i,CP(this.xtt);var e=this.Ju.xtt;null!==e&&xP(this.xtt,e)}},{key:"origin",get:function(){return nB(this.Ju)}},{key:"protocol",get:function(){return this.Ju.Oj+":"},set:function(t){xr(t+":",null,this.Ju,0)}},{key:"username",get:function(){return this.Ju.ztt},set:function(t){$P(this.Ju)||(this.Ju.ztt=fP(t,uP))}},{key:"password",get:function(){return this.Ju.Ptt},set:function(t){$P(this.Ju)||(this.Ju.Ptt=fP(t,uP))}},{key:"host",get:function(){var t=this.Ju,i=t.Rtt;if(null===i)return"";var e=t.G8,s=yP(i);return null!==e&&(s+=":"+e),s},set:function(t){this.Ju.Utt||xr(t,null,this.Ju,10)}},{key:"hostname",get:function(){var t=this.Ju.Rtt;return null===t?"":yP(t)},set:function(t){this.Ju.Utt||xr(t,null,this.Ju,11)}},{key:"port",get:function(){var t=this.Ju.G8;return null===t?"":""+t},set:function(t){$P(this.Ju)||(""===t?this.Ju.G8=null:xr(t,null,this.Ju,12))}},{key:"pathname",get:function(){var t=this.Ju.Btt;return this.Ju.Utt?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.Ju.Utt||(this.Ju.Btt.length=0,xr(t,null,this.Ju,16))}},{key:"search",get:function(){var t=this.Ju.xtt;return null===t||""===t?"":"?"+t},set:function(t){t=pc(t);var i=this.Ju;if(""===t)return i.xtt=null,void CP(this.xtt);"?"===t[0]&&(t=t.slice(1)),i.xtt="",xr(t,null,i,19),xP(this.xtt,t)}},{key:"searchParams",get:function(){return this.xtt}},{key:"hash",get:function(){var t=this.Ju.Qtt;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.Ju.Qtt="",xr(t,null,this.Ju,20)):this.Ju.Qtt=null}}]),t}();function hB(t){return t.document&&t.document.baseURI||t.location.href||""}function oB(){let t=Or,i=t.location.href;for(;t!==s.top;){t=t.parent;try{i=t.location.href}catch(t){}}return i}var aB=!!("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||!(!id||!id.msMaxTouchPoints),uB=LM(),cB=!(!uB||!uB.webkitShowPlaybackTargetPicker),dB=class{get Ftt(){return void 0===this.Ytt&&(this.Ytt=this.Gtt()),this.Ytt}Gtt(){return 0}get Vtt(){return!Vt.sb}get Wtt(){if(s.screen)return{width:s.screen.width,height:s.screen.height}}get A2(){return s.devicePixelRatio||1}get Htt(){return cB}get J4(){return!1}get V4(){return!0}get _A(){return Vt.WE||Vt.Ga}get qtt(){return!Vt.Ga}get XO(){return!0}get wA(){return!0}get gA(){return!1}get Xtt(){}get Ztt(){return!0}get ZJ(){return!1}get Ktt(){return Vt.CE}Jtt(t,i){return!0}$tt(t){return t>=2*Ac}constructor(){this.Ytt=void 0,this.tit=!1,this.Je=aB,this.Qs=!1,this.O9=!0}},lB=function(){const t=bM();if(!t)return!1;const i=t.muted;return t.muted=!i,t.muted!==i}(),fB=function(){if(Vt.eE)return!1;const t=bM();if(!t)return!1;const i=t.volume;return t.volume=i/2+.1,i!==t.volume}();var B=class extends dB{Gtt(){return this.iit?this.iit.Ftt:super.Gtt()}get Xtt(){var t;return null==(t=this.iit)?void 0:t.Xtt}get Ztt(){var t,i;return null==(i=null==(t=this.iit)?void 0:t.Ztt)||i}Jtt(t,i){return this.iit?this.iit.Jtt(t,i):super.Jtt(t,i)}$tt(t){return this.iit?this.iit.$tt(t):super.$tt(t)}constructor(t){super(),this.iit=t,this.iit&&(this.tit=this.iit.tit,this.Je=this.iit.Je,this.O9=lB&&this.iit.O9)}},_B=class extends B{get gA(){return Vt.Ga}constructor(t){super(t),this.tit=!0,this.Qs=!0}},gB=class extends _B{get gA(){return!0}Gtt(){return Vk(!0)?super.Gtt():1}},wB=class extends B{get J4(){return Vt.EE<3}get V4(){return Vt.EE>=3}get Wtt(){return s.tizen&&!this.eit&&s.tizen.systeminfo.getPropertyValue("DISPLAY",(t=>{const i=t.resolutionWidth,e=t.resolutionHeight;1===i&&1===e||(this.eit={width:i,height:e})})),this.eit}get ZJ(){return Vt.EE<3}Jtt(t,i){return super.Jtt(t,i)}},R=class extends dB{constructor(){super()}},AB=class extends R{get Xtt(){if(Vt.US)return 4096}Jtt(t,i){if(t&&t.sit&&i&&i.sit){let e=F(t.sit,"mp4a.40.2")&&F(i.sit,"mp4a.40.5"),s=F(t.sit,"mp4a.40.5")&&F(i.sit,"mp4a.40.2"),n=F(t.sit,"mp4a.40.2")&&F(i.sit,"mp4a.40.34"),r=F(t.sit,"mp4a.40.34")&&F(i.sit,"mp4a.40.2"),h=F(t.sit,"mp4a.40.5")&&F(i.sit,"mp4a.40.34"),o=F(t.sit,"mp4a.40.34")&&F(i.sit,"mp4a.40.5");return!(e||s||n||r||h||o)}return!0}};function F(t,i){return t.indexOf(i)>-1}var vB=class extends R{$tt(t){return t>=2}},mB=class extends R{constructor(){super(),this.tit=Vt.qE>=11,this.O9=Vt.WE&&!(Vt.Ga&&Vt.qE<10)}},pB=class extends B{get Wtt(){return s.webOS&&!this.eit&&s.webOS.deviceInfo((t=>{this.eit={width:t.screenWidth,height:t.screenHeight}})),this.eit}get XO(){return!1}},yB=class extends R{get Ztt(){return!Vt.FS||(Vt.yE?92!==Vt.TE:Vt.vE>=100)}},MB=class extends B{get gA(){return!0}},TB=class{nit(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];mt(...i)}SA(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];is(...i)}rit(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];xD(...i)}hit(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];OD(t,...e)}ul(t,i){return u(t,i)}x$(t,i){return v(t,i)}$d(t){c(t)}j$(t){m(t)}GC(){return this.oit.GC()}zC(){return this.oit.zC()}RC(){return this.oit.RC()}BC(){return this.oit.BC()}OC(){return this.oit.OC()}QC(t,i){return this.oit.QC(t,i)}jC(t){return this.oit.jC(t)}get FO(){return this.ait}Dh(t,i){let e;return void 0===i&&(i=hB(Or)),e="object"!=typeof i||i instanceof rB?i:i.href,new rB(t,e)}IA(t,i){if(void 0===i&&(i=hB(Or)),this.uit){const e=Qs(i)?i:i.toString();return new self.URL(t,e).href}return this.Dh(t,i).href}get Ys(){return this.cit}get vA(){return{AA:id&&id.userAgent.match(/Android /i)?"Android":"other",mA:Boolean(id&&id.userAgent.match(/Android 8.0.0/i))}}get OV(){return self&&self.location&&"https:"===self.location.protocol}get dit(){return"languages"in id?id.languages.slice():[id.language]}constructor(){this.ait=new NB,this.cit=function(){const t=function(){if(Vt.FE)return new AB;if(Vt.OE||Vt.zE)return new vB;if(Vt.WE)return new mB;if(Vt.wE)return new yB;return new R}();return Vt.Ga?new gB(t):Vt.Qs?new _B(t):Vt.DE?new wB(t):Vt.LE?new pB(t):Vt.US?new MB(t):new B(t)}(),this.uit=DB(),self.performance&&self.performance.now?this.Jd=()=>self.performance.now():this.Jd=eu}},NB=class{get YO(){return id.oscpu}get Ys(){return id.platform}get GO(){return id.vendor}get VO(){return id.vendorSub}};function DB(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}var IB=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(i,e)=>new t(i,e)}(t)}catch(t){}const i=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(i)return function(t){return(i,e)=>{const s=new t;if(i)for(const t of i)s.append(t);return s.getBlob(e&&e.type||"")}}(i)})();function SB(t,i,e){const s=IB([i],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,i){let e=t;const s=e.indexOf("?");if(s>=0&&(e=e.substr(0,s)),e=e.substr(e.lastIndexOf("/")+1),i){let t=e.indexOf(".");t<0&&(t=e.length),e=e.substr(0,t)+i+e.substr(t)}return e}(t,e),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}var EB=class extends xt{get name(){return vs.NI}constructor(t,i){super(t,function(t){return"Error while opening "+t+". Invalid URL."}(t.zu),i)}},bB=self.fetch,LB=self.Request,kB=self.Response,CB=self.Headers,xB=self.ReadableStream,OB=self.AbortSignal,jB=self.AbortController,zB=qc((()=>{try{return Ld(bB)&&qr(LB)&&qr(kB)&&qr(CB)&&"forEach"in CB.prototype&&DB()}catch(t){return!1}})),PB=["http:","https:"];var BB=qc((()=>{try{return zB()&&qr(OB)&&qr(jB)&&"signal"in LB.prototype}catch(t){return!1}})),RB=qc((()=>{try{return zB()&&qr(xB)&&"body"in kB.prototype&&!Vt.uE}catch(t){return!1}}));function UB(t,i){const e=t.dS.has("content-length")?Number(t.dS.get("content-length")):void 0;let s;return s=t.wV?function(t,i,e){return t.pipeThrough(new Ko(new QB(i,e)))}(t.lV(),i,e):async function(t,i,e){await Promise.resolve(),i(0,e);const s=await t,n=s.byteLength;return i(n,null!=e?e:n),s}(t.cj(),i,e),new Fr({zm:s,SI:t.SI},t)}var QB=class{transform(t,i){this.fit+=t.byteLength,this._it(this.fit,this.git),i.enqueue(t)}flush(t){var i;this._it(this.fit,null!=(i=this.git)?i:this.fit)}constructor(t,i){this._it=t,this.git=i,this.fit=0}};var FB=class{async wit(){const t=this.EI;let e,s;t.CI&&u((()=>{this.Ait=!0,this.Tx.Xd()}),t.CI);try{e=bB(t.zu,{method:t.lS,headers:t.dS.WI(),body:t.cS,credentials:t.AS?"include":"same-origin",signal:VB(this.Tx.Hd),mode:t.jg})}catch(i){throw new EB(t,i)}try{s=await e}catch(t){const i=this.vit(t);throw ut(i)&&this.Tx.Xd(),i}const n=s.url||t.zu,r=0===s.status&&"file:"===function(t){return i.Dh(t).protocol}(n)?200:s.status,h=new YB(this,s,this.Tx);let o=new Fr({zm:h,SI:t,fS:t.fS,dS:WB(s.headers),kI:r,HO:s.statusText,IS:n});if(!kr(o))throw new Sv(o);return t.vS&&(o=UB(o,t.vS)),o}vit(t){return du(t)?t:ut(t)?this.Ait?new Ya(this.EI):new pe(t.message,t):this.LI?new Sv(this.LI,t):new EB(this.EI,t)}constructor(t){this.Tx=new na,this.LI=void 0,this.Ait=!1,this.EI=t,this.Tx.Zd(t.Hd),this.bI=this.wit()}},YB=class t extends Tb{get _V(){return this.mit.bodyUsed}get wV(){return Yt(this.mit.body)}vV(){return this.mV.Zb}DS(t){return this.pV(this.mit.text(),t)}cj(t){return this.pV(this.mit.arrayBuffer(),t)}lV(){const t=this.mit.body;return t?this.yV(t):Ab(this.cj().then(wb),this.Tx)}TV(){const i=this.mit.clone(),[e,s]=this.Tx.Kd();return this.Tx=e,new t(this.pit,i,s)}pV(t,i){i&&this.Tx.Zd(i);let e=dt(Promise.resolve(t),this.Tx.Hd).catch((t=>{throw this.pit.vit(t)}));return e=Wi(e,this.Tx),this.mV.Zd(e.then(El)),e}yV(t){return new Ft(new qB(t,(t=>this.pit.vit(t)),this.Tx,this.mV),{highWaterMark:0})}constructor(t,i,e){super(),this.mV=new Rs,this.pit=t,this.mit=i,this.Tx=e,this.mV.Zb.catch(El)}},GB="abort";function VB(t){if(!BB())return;const i=new jB;if(t.Bd)i.abort();else if(!t.Rd){const e=()=>{s(),i.abort()},s=()=>{i.signal.removeEventListener(GB,e),t.Gd(e),t.Wd(s)};i.signal.addEventListener(GB,e),t.Yd(e),t.Vd(s)}return i.signal}function WB(t){if(function(t){return Ut(t)&&"function"==typeof t.forEach}(t)){const i=new Jh;return t.forEach(((t,e)=>{Array.isArray(t)&&2===t.length?i.append(t[0],t[1]):i.append(e,t)})),i}return new Jh(t)}var HB,qB=class{start(t){this.uG=this.yit.getReader()}async pull(t){let i;try{i=await dt(this.uG.read(),this.Tx.Hd)}catch(i){const e=this.Mit(i);return this.mV.qb(e),this.Tx.Xd(),this.uG.cancel(e).catch(El),void t.error(e)}i.done?(this.mV.Wb(),this.Tx.Xd(),t.close()):t.enqueue(i.value)}cancel(t){return this.Tx.Xd(),this.mV.qb(t),this.uG.cancel(t)}constructor(t,i,e,s){this.yit=t,this.Mit=i,this.Tx=e,this.mV=s}};!function(t){t[t.UNSENT=0]="UNSENT",t[t.OPENED=1]="OPENED",t[t.HEADERS_RECEIVED=2]="HEADERS_RECEIVED",t[t.LOADING=3]="LOADING",t[t.DONE=4]="DONE"}(HB||(HB={}));var XB=class{get bI(){return this.Tit.Zb}wit(){const t=this.Nit,i=this.EI;if(i.Hd.Bd)return this.Dit();t.onreadystatechange=()=>this.Iit(),t.onprogress=t=>this._it(t),t.onload=()=>this.Sit(),t.onloadend=()=>this.Eit(),t.onerror=()=>this.Zq(),t.ontimeout=()=>this.Lit(),t.onabort=()=>this.Dit(),t.open(i.lS,i.zu,!0),t.withCredentials=Boolean(i.AS),"responseType"in t&&i.fS&&(i.fS===Uv.Ru?t.responseType="text":t.responseType="arraybuffer"),i.dS.forEach(((i,e)=>{t.setRequestHeader(e,i)})),i.CI&&(t.timeout=i.CI),this.Tx.Hd.Yd(this.kit);const e=i.cS;e?t.send(e):t.send()}Iit(){const t=this.Nit;void 0!==t&&t.readyState>=2&&!this.Cit&&(this.Cit=!0,this.xit())}xit(){var t;const i=this.Nit,e=function(t){const i=new Jh,e=t.replace(/\r?\n[\t ]+/g," ");return e.split(/\r?\n/).forEach((t=>{const e=t.split(":"),s=e.shift().trim();if(s){const t=e.join(":").trim();i.append(s,t)}})),i}(i.getAllResponseHeaders()||""),s=this.EI;var n;this.Oit=new Rs,this.LI=new Fr({SI:s,fS:s.fS,zm:this.Oit.Zb,kI:i.status,HO:i.statusText,dS:e,IS:null!=(n=i.responseURL)?n:e.get("X-Request-URL")}),null==(t=this.Tit)||t.Wb(this.LI)}Sit(){var t;const i=this.Nit;if(void 0===i)return;let e=i.response;if(!Yt(e)){const t=this.EI.fS;e=t===Uv.Ru?i.responseText:t===Uv.YI?new ArrayBuffer(0):{}}null==(t=this.Oit)||t.Wb(e)}Eit(){this.gn()}_it(t){void 0!==this.Nit&&(null==this.EI.vS||this.EI.vS.call(this.EI,t.loaded,t.lengthComputable?t.total:void 0))}Zq(){const t=new g("Network request failed");this.LI?this.Ss(new Sv(this.LI,t)):this.Ss(new EB(this.EI,t))}Lit(){this.Ss(new Ya(this.EI))}Dit(){this.Ss(new pe),this.gn()}Ss(t){var i,e;null==(i=null!=(e=this.Oit)?e:this.Tit)||i.qb(t)}gn(){this.Nit=void 0,this.LI=void 0,this.Tit=void 0,this.Oit=void 0,this.Tx.Qd()}constructor(t){this.Tx=new na,this.LI=void 0,this.Tit=new Rs,this.Cit=!1,this.kit=()=>{var t;this.Dit(),null==(t=this.Nit)||t.abort()},this.EI=t,this.Tx.Zd(t.Hd),this.Nit=new sd,this.wit()}};var ZB=class{SI(t){return function(t){if(!zB()||!function(t){try{return PB.indexOf(new self.URL(t,self.location.href).protocol)>=0}catch(t){return!1}}(t.zu))return!1;if(!RB()&&t.vS)return!1;if(!t.mS){if(Vt.LE&&Vt.vE<=68)return!1;if(Vt.DE)return!1}return!0}(t)?new FB(t).bI:new XB(t).bI}ZF(t){if(am&&am.sendBeacon)am.sendBeacon(t.zu,IB([t.cS],{type:t.qz}));else{const i=t.qz?{"Content-type":t.qz}:void 0;this.SI(new Pc({lS:Nr.POST,zu:t.zu,cS:t.cS,dS:i,jg:Qv.EA})).then((t=>{D(t.cj())}),El)}}gn(){}};var KB=class extends fh{constructor(t){super("Invalid XML",t)}},JB=class{gI(t){const i=new DOMParser;let e;try{e=i.parseFromString(t,"text/xml")}catch(t){throw new KB(t)}if(!e||e.getElementsByTagName("parsererror").length>0)throw new KB;return new rR(e)}},$B=class t{get JD(){return WA.tI}get _I(){var t;return null!=(t=this.jit.localName)?t:aR(this.jit.nodeName)}get l(){return this.jit.nodeName}get zit(){var t;return null!=(t=this.jit.namespaceURI)?t:void 0}get Pit(){var t;return null!=(t=this.jit.prefix)?t:void 0}get jM(){return this.jit.nodeValue}KD(t){return this.jit.isEqualNode(t.jit)}nI(i){return new t(this.jit.cloneNode(i))}constructor(t){this.jit=t}},tR=class{get mI(){return void 0===this.Bit&&(this.Bit=function(t){const i=[];for(let e=0;e<t.length;e++){const s=oR(t.item(e));s&&i.push(s)}return i}(this.Rit.childNodes)),this.Bit}get m(){return this.mI.filter(hR)}lI(t){return this.mI.filter((i=>hR(i)&&i.dj===t))}dI(t,i){return this.mI.filter((e=>hR(e)&&e._I===i&&e.zit===t))}get VD(){return this.Rit}pI(t){this.Rit.appendChild(t.VD),this.Bit&&this.Bit.push(t)}KD(t){return this.Rit.isEqualNode(t.VD)}constructor(t){this.Bit=void 0,this.Rit=t}},iR=class t extends tR{get JD(){return WA.$D}get _I(){var t;return null!=(t=this.Rit.localName)?t:aR(this.Rit.nodeName)}get zit(){var t;return null!=(t=this.Rit.namespaceURI)?t:void 0}get Pit(){var t;return null!=(t=this.Rit.prefix)?t:void 0}get dj(){return this.Rit.nodeName}get fI(){return function(t){const i=[];for(let e=0;e<t.length;e++)i.push(new $B(t.item(e)));return i}(this.Rit.attributes)}get sj(){return this.Rit.textContent}vI(t){if(this.Rit.hasAttribute(t))return this.Rit.getAttribute(t)}AI(t,i){if(this.Rit.hasAttributeNS(t,i))return this.Rit.getAttributeNS(t,i)}aI(t){this.Rit.removeAttribute(t)}Uit(t,i){this.Rit.removeAttributeNS(t,i)}Qit(t,i){this.Rit.setAttribute(t,i)}Fit(t,i,e){this.Rit.setAttributeNS(t,i,e)}nI(i){return new t(this.Rit.cloneNode(i))}constructor(t){super(t)}},eR=class{get zm(){return this.Rit.nodeValue}get VD(){return this.Rit}KD(t){return this.zm===t.zm}constructor(t){this.Rit=t}},sR=class t extends eR{get JD(){return WA.Ru}nI(i){return new t(this.Rit.cloneNode(i))}constructor(t){super(t)}},nR=class t extends eR{get JD(){return WA.iI}nI(i){return new t(this.Rit.cloneNode(i))}constructor(t){super(t)}},rR=class t extends tR{get JD(){return WA.eI}get wI(){return new iR(this.Rit.documentElement)}nI(i){return new t(this.Rit.cloneNode(i))}constructor(t){super(t)}};function hR(t){return ds(t)}function oR(t){switch(t.nodeType){case WA.$D:return new iR(t);case WA.Ru:return new sR(t);case WA.iI:return new nR(t)}}function aR(t){const i=t.indexOf(":");return i<0?t:t.substr(i+1)}!function(t){i=t}(new class extends TB{get oit(){return this.Yit||(this.Yit=new Qy(sn())),this.Yit}get Git(){return this.Vit}get I$(){return this.Wit}get Y$(){return this.Hit}get qit(){return!1}get qj(){return Qt.hQ()}get Xit(){return{Zit:SB}}get Kit(){return id.connection&&id.connection.effectiveType||hN}get Jit(){return id.connection&&id.connection.type||"unknown"}get _O(){return this.$it||(this.$it=new zb(new ZB)),this.$it}gI(t){return this.tet.gI(t)}constructor(...t){super(...t),this.Yit=void 0,this.Vit=RB(),this.Wit=Vt.ob||Vt.uE,this.Hit=(Vt.ob||Vt.LE&&Vt.vE<=68||Vt.uE)&&!(Vt.DE&&Vt.EE<3),this.$it=void 0,this.tet=new JB}});var uR=class{get Mf(){const t=this.Qo.currentTime;return isFinite(t)?t:"now"}get iet(){return this.Qo.src||""}tr(){}constructor(t,i){this.eet=!1,this.net=!1,this.ret=t=>{this.het.UF(t.error,this.Mf)},this.oet=()=>{this.het.zF(this.iet),this.Qo.removeEventListener("playing",this.oet),this.eet=!1},this.js=()=>{var t,i;this.eet||(this.Qo.addEventListener("playing",this.oet),this.eet=!0);var e;if((null==(i=this.Qo.source)||null==(t=i.ads)?void 0:t.some((t=>"theoads"===t.integration)))&&!this.net)this.net=!0,null==(e=this.Qo.ads)||e.addEventListener("adbreakbegin",this.aet);else if(this.net){var s;this.net=!1,null==(s=this.Qo.ads)||s.removeEventListener("adbreakbegin",this.aet)}},this.aet=t=>{"theoads"===t.adBreak.integration&&this.het.RF()},this.het=i,this.Qo=t,this.Qo.addEventListener("error",this.ret),this.Qo.addEventListener("sourcechange",this.js),this.js()}};!function(t){Qj.push(t)}((function(t){new uR(t.va,t.A7)}));var cR="theoplayer-stored-volume",dR="theoplayer-stored-mutedstate";Zr((function(t){return class extends t{Rf(t){this.wd.persistVolume&&jc.Kj(dR,""+Boolean(t)),super.Rf(t)}l_(t){this.wd.persistVolume&&jc.Kj(cR,""+Number(t)),super.l_(t)}constructor(t,i){if(super(t,i),i.persistVolume){let t=jc.IH(cR);(void 0===t||S(t))&&(t=1);const i=jc.SH(dR)||!1;this.c_=t,this.Pf=i}}}}),lt.Za);var lR="8.0.0",fR="2024.3.6",_R=Vj.va,gR=da._v.registerContentProtectionIntegration.bind(da._v),wR={nY(t){Or.addEventListener("beforeunload",t)},tY(t){Or.removeEventListener("beforeunload",t)}};!function(t){rm=t.uet,hm=t.cet,ys=t.det,Or=t.let,om=Or&&Or.location,am=Or&&Or.navigator}({uet:class{get UB(){const t=[];for(const i of this.fet){const e=this._et.get(i);if(e){const i=e.map((t=>t.wet));t.push(...i)}}return this.Aet&&t.push(this.Aet),t}FB(t){for(const i of this.UB)i.h5(t)}SP(t){const i=Zt(this._et.get(t),(t=>t.vet));if(i)return i.vet=!1,i.wet}met(t){if(!this.Aet){var i;const t=null==(i=this._et.get(pg.pm))?void 0:i[0].wet.Uz;if(!t)throw new g("Error creating iOS Safari MediaController");this.Aet=new vj(t,this.YC)}return this.Aet}async cP(t){const i=t.Uz,e=i.tagName.toLowerCase();await t.tr(),Mj(i);const s=Zt(this._et.get(e)||[],(i=>t===i.wet));s&&(s.vet=!0)}jB(){for(const t of this.UB)t.r5()}gn(){for(const t of this.UB){const i=t.Uz;t.Qd(),yj(i),sh(i)}this._et.clear(),this.Aet=void 0}pet(){for(const t of this.fet){const i=[];this._et.set(t,i);for(let e=0;e<this.yet;e++){const e=pj(t),s=t===pg.ym?new Xx(e,this.YC,this.Wu):new dj(e,this.YC,this.Wu,this.RB);i.push({wet:s,vet:!0})}}}constructor(t,i,e=2,s=mj,n=sn()){this.yet=e,this.fet=[...s],this.YC=n,this.Wu=t,this.RB=i,this._et=cs(),this.pet()}},cet:class t{mtt(t){return this.Met.Mx((()=>this.Tet(t)))}v_(){this.zB.jB()}async Tet(i){const e=this.zB.SP(pg.pm),s=e.Uz,n=await t.Net(s,i);return await this.zB.cP(e),n}static async Net(i,e){return Vt.LE||Vt.DE?"all":(i.src||(i.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.Det(),!e&&await t.Iet(i,!1)?"all":await t.Iet(i,!0)?"muted":"none")}static async Iet(t,i){t.muted=i;const e=t.play();try{if(!Sd(e))return!Vt.Qs;const t=ri(250);return await Promise.race([e,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static Det(){return new Promise((t=>{if("function"==typeof MessageChannel){const i=new MessageChannel;i.port1.onmessage=()=>t(),i.port2.postMessage("")}else u(t,0)}))}gn(){this.Met.gn()}constructor(t){this.zB=t,this.Met=new jn}},det:wR,let:s});var AR=class t{async EP(i){if(!Kg(i.type))return!1;const e=i.contentProtection;if(e&&!Tg(e)){if(!cl(e))return!1;if(!await t.Eet(e))return!1}return!0}static async Eet(t){return!(!t.playready||!await i.BC())||(!(!t.widevine||!await i.OC())||(!(!t.clearkey||!await i.zC())||!!await i.GC()))}},vR=class extends AR{async EP(t){return!!Vk(t.useManagedMediaSource)&&super.EP(t)}};function V(t){return ma(t)}function Fh(t,i){const e=ma(t);return i?""+e+i:""+e}var ko,z=class{async bet(t){return(await this.ket.Let(t.map(V))).shift()}Cet(t,i){const e=Fh(t,i);return this.xet.Qb(e)}async Oet(t,i){var e;const s=Fh(t,i);return null==(e=await this.jet.Fb(s))?void 0:e.data}CH(t){return this.zet.Fb(t)}constructor(t,i,e,s){this.ket=t,this.xet=i,this.jet=e,this.zet=s}},Oh=class{Pet(t){return Promise.resolve(!1)}Bet(t){return Promise.reject(mR)}Ret(t){return Promise.reject(mR)}Qb(t){return Promise.resolve(!1)}Fb(t){return Promise.resolve(void 0)}Uet(t,i){return Promise.resolve(void 0)}Let(t){return Promise.resolve([])}Qet(){return Promise.resolve([])}Fet(t){return Promise.resolve([])}Yet(t,i){return Promise.resolve([])}ET(t){return Promise.reject(mR)}Get(t){return Promise.reject(mR)}Vet(){return Promise.reject(mR)}},mR="Storage disabled",pR="Storage disabled",Bh=class{get Wet(){return this.qd.Zb}async Pet(t){return(this.Het||await this.Wet).Pet(t)}async Bet(t,i){return(this.Het||await this.Wet).Bet(t,i)}async Ret(t,i){return(this.Het||await this.Wet).Ret(t,i)}async Qb(t){return(this.Het||await this.Wet).Qb(t)}async Fb(t){return(this.Het||await this.Wet).Fb(t)}async Uet(t,i){return(this.Het||await this.Wet).Uet(t,i)}async Let(t){return(this.Het||await this.Wet).Let(t)}async Qet(){return(this.Het||await this.Wet).Qet()}async Fet(t){return(this.Het||await this.Wet).Fet(t)}async Yet(t,i){return(this.Het||await this.Wet).Yet(t,i)}async ET(t){return(this.Het||await this.Wet).ET(t)}async Get(t){return(this.Het||await this.Wet).Get(t)}async Vet(){return(this.Het||await this.Wet).Vet()}constructor(t){this.qd=new Rs,this.Het=void 0,this.qd.Zd(t),this.qd.Zb.then((t=>{this.Het=t}))}},yR=class{get qet(){return this.qd.Zb}async Xet(t){const i=this.Zet||await this.qet;return await i.Xet(t)}constructor(t){this.qd=new Rs,this.Zet=void 0,this.qd.Zd(t);const i=this.qd.Zb;i.then((t=>{this.Zet=t})),this.Ket=new Bh(i.then((t=>t.Ket))),this.Jet=new Bh(i.then((t=>t.Jet))),this.$et=new Bh(i.then((t=>t.$et))),this.tst=new Bh(i.then((t=>t.tst))),this.ist=new Bh(i.then((t=>t.ist)))}};function H(t){return new g("This storage cannot handle persistency type "+t)}!function(t){t.sst="readonly",t.nst="readwrite"}(ko||(ko={}));var ar=class{Pet(t){return Promise.resolve("temporary"===t)}Bet(t,i){return void 0===i&&(i="temporary"),"temporary"!==i?Promise.reject(H(i)):(this.rst(t.key),this.bL.push(t),Promise.resolve())}Ret(t,i){if(void 0===i&&(i="temporary"),"temporary"!==i)return Promise.reject(H(i));for(const i of t)this.rst(i.key);for(const i of t)this.bL.push(i);return Promise.resolve()}Qb(t){return Promise.resolve(Boolean(this.hst(t)))}Fb(t){return Promise.resolve(this.hst(t))}Uet(t,i){return Promise.resolve(this.ost(t,i))}Let(t){const i=t?t.map((t=>this.hst(t))):this.bL;return Promise.resolve(i.filter(Yt))}Qet(){return Promise.resolve([...this.bL])}Fet(t){return this.Yet(t,"key")}Yet(t,i){const e=this.bL.filter((e=>e[i]===t));return Promise.resolve(e)}ET(t){return this.rst(t),Promise.resolve()}Get(t){for(const i of t)this.rst(i);return Promise.resolve()}Vet(){return No(this.bL),Promise.resolve()}hst(t){return this.ost(t,"key")}ost(t,i){for(const e of this.bL)if(e[i]===t)return e}rst(t){const i=this.hst(t);i&&To(this.bL,i)}constructor(){this.bL=[]}},MR=class t{static h9(){return Promise.resolve(new t)}Xet(t){return t(this)}constructor(){this.Jet=new ar,this.Ket=new ar,this.$et=new ar,this.tst=new ar,this.ist=new ar}},Hh=class{async Pet(t){for(let i of this.ast)if(await i.Pet(t))return!0;return!1}async Bet(t,i){void 0===i&&(i="persistent");for(let e of this.ast)if(await e.Pet(i))return e.Bet(t);throw H(i)}async Ret(t,i){void 0===i&&(i="persistent");for(let e of this.ast)if(await e.Pet(i))return e.Ret(t);throw H(i)}async Qb(t){for(let i of this.ast)if(await i.Qb(t))return!0;return!1}async Fb(t){for(let i of this.ast){const e=await i.Fb(t);if(e)return e}}async Uet(t,i){for(let e of this.ast){const s=await e.Uet(t,i);if(s)return s}}async Let(t){const i=[];for(let e of this.ast)i.push(...await e.Let(t));return i}async Qet(){const t=[];for(let i of this.ast)t.push(...await i.Qet());return t}async Fet(t){const i=[];for(let e of this.ast)i.push(...await e.Fet(t));return i}async Yet(t,i){const e=[];for(let s of this.ast)e.push(...await s.Yet(t,i));return e}async ET(t){for(let i of this.ast)await i.ET(t)}async Get(t){for(let i of this.ast)await i.Get(t)}async Vet(){for(let t of this.ast)await t.Vet()}constructor(t){this.ast=t}};function TR(t){return async()=>{const i=await Promise.all(t.map((t=>t())));return NR.h9(i)}}var NR=class t{static h9(i){return Promise.resolve(new t(i))}get tst(){return this.ust}get ist(){return this.cst}get $et(){return this.dst}get Jet(){return this.lst}get Ket(){return this.fst}Xet(i){if(0===this._st.length)return i(this);const e=[];let s=0;const n=r=>(e.push(r),s++,s<this._st.length?this._st[s].Xet(n):i(new t(e)));return this._st[s].Xet(n)}constructor(t){this._st=t,this.ust=new Hh(t.map((t=>t.tst))),this.cst=new Hh(t.map((t=>t.ist))),this.dst=new Hh(t.map((t=>t.$et))),this.lst=new Hh(t.map((t=>t.Jet))),this.fst=new Hh(t.map((t=>t.Ket)))}},$t=class t{static wa(i){t.pz.wa(i)}static get Ib(){return t.gst||(t.gst=t.pz.h9()),t.gst}};function DR(t){return void 0!==t.r_}function IR(t){const e=Vt.LE||Vt.DE,s=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some((t=>"ac-3"===t||"ec-3"===t)),n=e&&!s,r=new mr(!0);return async t=>{const e=t.qz;if(!r.X$(e)&&!function(t,i){return!!t&&(as(t)?kv(i)||xv(i):Ni(t,Kn.APPLICATION_TTML_XML)||Ni(t,Kn.TEXT_VTT)||Ni(t,Kn.IMAGE_JPEG))}(t.CF,t.wst))return!1;const s=t.wst.some((t=>"ac-3"===t||"ec-3"===t));if(n&&s)return!1;if(t.Ast){const s=t.Ast,n=ge(s,(t=>fm(t.vst))).filter(Yt),r=await async function(t,i){for(const e of t)if(await i(e))return!0;return!1}(n,(t=>i.QC(t,e)));if(!r)return!1}return!0}}$t.pz=new class{h9(){return new yR(this.mst())}async mst(){this.pst&&(await Promise.resolve(),this.pst=!1);for(const t of this.yst)try{return await TR([MR.h9,t])()}catch(t){}return await TR([MR.h9,this.Mst])()}wa(t){if(!this.pst)throw new g("Registration overdue");this.yst.push(t)}constructor(t){this.yst=[],this.pst=!0,this.Mst=t}}(class t{static h9(){return Promise.resolve(new t)}Xet(t){return Promise.reject(pR)}constructor(){this.Jet=new Oh,this.Ket=new Oh,this.$et=new Oh,this.tst=new Oh,this.ist=new Oh}}.h9),$t.gst=void 0;var gh,SR=class{get Ti(){return this.Tst.offsetHeight*i.Ys.A2}get ji(){return this.Tst.offsetWidth*i.Ys.A2}constructor(t){this.Tst=t}},Gh=class{get nt(){return this.Dl}yS(t,i,e,s,n,r,h,o){const a=new ze(t,i,e,s,n,r,h,void 0,o);return this.Dl.tt(a),this.o3.tt(a),a}bS(t){this.Dl.it(t),this.o3.it(t),t.gn()}tr(){for(const t of this.Dl.og.slice())t.gn();this.Dl.tr(),this.o3.tr()}gn(){this.tr(),this.Dl.gn(),this.o3.gn()}constructor(t,i){this.Dl=new We,this.o3=new wx(t,i)}},W=class{SP(t){return this.pz.SP(t)}met(t){return this.pz.met(t)}cP(t){return this.pz.cP(t)}constructor(t){this.pz=t}},zh=class extends Pl{get Nst(){return this.sA}get wf(){return this.Af()}Af(){return this.sA.wf}get vf(){return this.mf()}mf(){return this.sA.vf}get Mf(){return this.Tf()}Tf(){return this.sA.Mf}get Iu(){return this.sA.Iu}get ct(){return this.Td()}Td(){return this.sA.ct}get Yz(){return this.Dst()}Dst(){return this.sA.Yz}get If(){return this.Ist()}Ist(){return this.sA.If}get lt(){return this.sA.lt}get Ti(){return this.sA.Ti}get ji(){return this.sA.ji}get ya(){return this.w_()}w_(){return this.sA.ya}get Pf(){return this.sA.Pf}set Pf(t){this.sA.Pf=t}get Ff(){return this.Sst()}Sst(){return this.sA.Ff}get Gf(){return this.sA.Gf}set Gf(t){this.sA.Gf=t}get Hf(){return this.qf()}qf(){return this.sA.Hf}get Jf(){return this.$f()}$f(){return this.sA.Jf}get t_(){return this.i_()}i_(){return this.sA.t_}get e_(){return this.s_()}s_(){return this.sA.e_}get m0(){return this.Est()}Est(){return this.sA.m0}get L0(){return this.bst()}bst(){return this.sA.L0}get nt(){return this.n_()}n_(){return this.Lst}get Ol(){return this.I5()}I5(){return this.sA.Ol}get S2(){return this.sA.S2}get c_(){return this.sA.c_}set c_(t){this.sA.c_=t}get s5(){return this.sA.s5}get xf(){return this.sA.xf}get t2(){return this.sA.t2}get uP(){return this.kst()}set uP(t){this.Cst(t)}kst(){return this.sA.uP}Cst(t){this.sA.uP=t}get o5(){return this.sA.o5}set o5(t){this.xst(t)}xst(t){this.sA.o5=t}get Y4(){return this.Ost()}Ost(){return this.sA.Y4}zf(){return this.sA.zf()}p_(){return this.sA.p_()}m_(){this.sA.m_()}Sm(t,i,e){this.sA.Sm(t,i,e)}zz(t){this.sA.zz(t)}ge(){this.sA.ge()}be(){this.sA.be()}yS(t,i,e,s,n,r,h,o){return this.sA.yS(t,i,e,s,n,r,h,o)}iP(){return this.sA.iP()}sP(t,i,e,s,n){return this.sA.sP(t,i,e,s,n)}bS(t){this.sA.bS(t)}rP(){this.sA.rP()}jq(t){return this.sA.jq(t)}async $n(t){const i=await this.sA.$n(t);let e;return e=t.Rg===wi.Wx?this.jst(i):this.zst(i),this.Fz=e,e}async tr(){this.Fz&&(await this.Fz.Qd(),this.Fz=void 0),await this.sA.tr()}i5(){this.sA.i5()}e5(){this.sA.e5()}async Qd(){this.Vo(),this.sA.fn(LL,this.Pst),this.Lst.fg=void 0,this.Lst.gn(),this.Fz&&(await this.Fz.Qd(),this.Fz=void 0)}r5(){this.sA.r5()}Bst(t){this.sA.fn(LL,this.Pst),this.sA=t,this.Lst.fg=t.nt,this.sA.yn(LL,this.Pst)}S_(t){this.Co(t)}constructor(t){super(),this.Fz=void 0,this.Lst=new tu,this.Pst=t=>this.S_(t),this.sA=t,this.Lst.fg=t.nt,this.sA.yn(LL,this.Pst)}},ER=class extends zh{get Uz(){return this.sA.Uz}get I0(){return this.sA.I0}get g_(){return this.sA.g_}set g_(t){this.sA.g_=t}h5(t){this.sA.h5(t)}a2(){this.sA.a2()}D_(){this.sA.D_()}constructor(t){super(t)}},bR=class{get wd(){return this.xC()}xC(){return this.Fz.wd}get t_(){return this.i_()}i_(){return this.Fz.t_}get rt(){return this.Fz.rt}gq(t){return this.Fz.gq(t)}Aq(t){return this.Fz.Aq(t)}Qd(){return Promise.resolve()}constructor(t){this.Fz=t}},Ti=class extends bR{get V$(){return this.Z$}get W$(){return this.K$}get wf(){return this.Af()}Af(){return this.Fz.wf}get ct(){return this.Td()}Td(){return this.Fz.ct}get Cq(){return this.Rst()}Rst(){return this.Fz.Cq}t0(t){this.Fz.t0(t)}n0(t,i,e,s){this.Fz.n0(t,i,e,s)}t$(){this.Fz.t$()}GJ(){this.Fz.GJ()}Qd(){return this.Z$&&(this.Z$.Qd(),this.Z$=void 0),this.K$&&(this.K$.Qd(),this.K$=void 0),super.Qd()}Ust(t){this.Fz=t,this.Z$?t.V$?this.Z$.Qst(t.V$):(this.Z$.Qd(),this.Z$=void 0):t.V$&&(this.Z$=this.Fst(t.V$),this.Z$.yn(re,this.Yst)),this.K$?t.W$?this.K$.Qst(t.W$):(this.K$.Qd(),this.K$=void 0):t.W$&&(this.K$=this.Fst(t.W$),this.K$.yn(re,this.Yst))}Gst(t){}constructor(t){super(t),this.Z$=void 0,this.K$=void 0,this.Yst=t=>this.Gst(t)}},LR=class extends Pl{get EW(){return this.PW}set EW(t){this.PW=t}get wf(){return Ai.SB()}get wd(){return this.lx}get e$(){return pg.rT}get n$(){return Ai.SB()}get Vst(){return!1}get NW(){return this.OW}set NW(t){this.OW=t}_J(t,i,e){return Promise.reject(new g("Invalid media buffer"))}u$(){return Promise.reject(new g("Invalid media buffer"))}AJ(t,i,e){return Promise.reject(new g("Invalid media buffer"))}Cq(){return!1}t$(){}o$(t,i){}a$(t,i){}ET(t,i,e){return Promise.resolve()}kJ(t,i){return Promise.reject(new g("Invalid media buffer"))}zT(t,i){return Promise.reject(new g("Invalid media buffer"))}gq(t){return!1}Aq(t){return Promise.reject(new g("Invalid media buffer"))}Qd(){this.Vo()}constructor(t){super(),this.OW=0,this.PW=0,this.lx=t}},jt=class extends Pl{get EW(){return this.Wst()}set EW(t){this.Hst(t)}Wst(){return this.qst.EW}Hst(t){this.qst.EW=t}get wf(){return this.Af()}Af(){return this.qst.wf}get wd(){return this.xC()}xC(){return this.qst.wd}get e$(){return this.qst.e$}get n$(){return this.Xst()}Xst(){return this.qst.n$}get NW(){return this.Zst()}set NW(t){this.Kst(t)}Zst(){return this.qst.NW}Kst(t){this.qst.NW=t}_J(t,i,e){return this.qst._J(t,i,e)}u$(){return this.qst.u$()}AJ(t,i,e){return this.qst.AJ(t,i,e)}Cq(){return this.qst.Cq()}t$(){this.qst.t$()}o$(t,i){this.qst.o$(t,i)}a$(t,i){this.qst.a$(t,i)}ET(t,i,e){return this.qst.ET(t,i,e)}kJ(t,i){return this.qst.kJ(t,i)}gq(t){return this.qst.gq(t)}Aq(t){return this.qst.Aq(t)}S_(t){this.Co(t)}Qd(){this.Vo(),this.Qst(new LR(this.wd))}Qst(t){this.qst.fn(re,this.Jst),this.qst=t,this.qst.yn(re,this.Jst)}constructor(t){super(),this.Jst=t=>this.S_(t),this.qst=t,this.qst.yn(re,this.Jst)}},kR=class extends jt{get wet(){return this.sA}set wet(t){this.sA=t}async _J(t,i,e){return Bo(e),await this.$st(this.sA.Mf,null==i?void 0:i.n9,null==i?void 0:i.ct),Bo(e),t.Rg===ji.VI?await this.tnt(t,i,e):await this.int(t,i,e)}async tnt(t,i,e){let s=t;for(;;){const[t,n]=vb(s.zm);s={Rg:ji.VI,zm:t};try{return await this.ent(s,i,e),void n.cancel(new pe).catch(El)}catch(t){if(vr(t)){if(await this.$st(this.sA.Mf,i.n9,i.ct,e)){s={Rg:ji.VI,zm:n};continue}}throw n.cancel(t).catch(El),t}}}async int(t,i,e){for(;;)try{return Bo(e),await this.ent(t,i,e)}catch(t){if(vr(t)){if(await this.$st(this.sA.Mf,i.n9,i.ct,e))continue}throw t}}async $st(t,i,e,s){const n=Zb(t,i,e,this.wf,this.NW,this.EW);for(const[t,i]of n)await this.snt(t,i,s);return n.length>0}ent(t,i,e){return super._J(t,i,e)}snt(t,i,e){return super.ET(t,i,e)}constructor(t){super(t),this.sA=void 0}},CR=class extends Ti{get wet(){return this.sA}set wet(t){this.sA=t,this.Z$&&(this.Z$.wet=t),this.K$&&(this.K$.wet=t)}Fst(t){const i=new kR(t);return i.wet=this.sA,i}constructor(t){super(t),this.sA=void 0,this.Ust(t)}},Bt=class extends bR{get Xf(){return this.Fz.Xf}set Xf(t){this.Fz.Xf=t}},En=class extends zh{get Uz(){return this.sA.Uz}get I0(){return this.sA.I0}get a_(){return this.sA.a_}get r_(){return this.sA.r_}get g_(){return this.sA.g_}set g_(t){this.sA.g_=t}h5(t){this.sA.h5(t)}a2(){this.sA.a2()}D_(){this.sA.D_()}A_(){return this.sA.A_()}constructor(t){super(t)}},xR=class extends ER{get Nst(){return this.sA}zst(t){const i=new CR(t);return i.wet=this,i}jst(t){return new Bt(t)}},OR=class extends En{get Nst(){return this.sA}zst(t){const i=new CR(t);return i.wet=this,i}jst(t){return new Bt(t)}},uc=class extends W{SP(t){return t===pg.pm?new OR(super.SP(t)):t===pg.ym?new xR(super.SP(t)):void 0}async cP(t){const i=t;await i.Qd(),await super.cP(i.Nst)}},jR=class{nnt(){this.Qo.I_()}gn(){s.removeEventListener("pageshow",this.rnt)}constructor(t){this.rnt=t=>{t.persisted&&this.nnt()},this.Qo=t,s.addEventListener("pageshow",this.rnt)}},zR=class{hnt(t,i,e){return Promise.resolve()}ont(t,i,e,s){let n=[];if(s){const r={BD:i.GT,RD:i.VT,UD:e.ant.UD};s.Rg===Kc.TTML?n=uv(t,s,r,e.CF):s.Rg===Kc.WEBVTT&&(n=vA(t,r).L)}return n}tr(){}};!function(t){t.qv="vttc",t.unt="vsid",t.cnt="iden",t.dnt="ctim",t.lnt="sttg",t.fnt="payl",t._nt="vtte",t.gnt="vtta"}(gh||(gh={}));var ao=class t{static wnt(i){return Boolean(t.Ant[i])}static fp(i){const e=[],s=At.Zm(new Th(i,new L));for(const i of s)t.wnt(i.Rg)&&e.push(t.Ant[i.Rg](i.zm));return e}static vnt(i){const e=At.Zm(i),s=ml(e,gh.unt),n=ml(e,gh.cnt),r=ml(e,gh.dnt),h=ml(e,gh.lnt),o=ml(e,gh.fnt);return{Rg:gh.qv,mnt:s?t.pnt(s):void 0,ynt:n?t.Mnt(n):void 0,Tnt:r?t.Nnt(r):void 0,Dnt:h?t.Int(h):void 0,Snt:o?t.Ent(o):void 0}}static pnt(t){return{Rg:gh.unt,bnt:t.Qm()}}static Mnt(t){return{Rg:gh.cnt,ynt:t.Wm()}}static Nnt(t){return{Rg:gh.dnt,Lnt:t.Wm()}}static Int(t){return{Rg:gh.lnt,knt:t.Wm()}}static Ent(t){return{Rg:gh.fnt,Cnt:t.Wm()}}static xnt(t){return{Rg:gh._nt}}static Ont(t){return{Rg:gh.gnt,jnt:t.Wm()}}};ao.Ant={[gh.qv]:ao.vnt,[gh._nt]:ao.xnt,[gh.gnt]:ao.Ont};var PR=class{hnt(t,i,e){const s=new DataView(t.znt),n=no.fp(s),r=Zt(n,(t=>t.Rg===Po.Av));return r&&(this.Pnt=r.Z[0].Pp.np.kp),Promise.resolve()}ont(t,i,e){if(S(this.Pnt))return[];const s=ha(t),n=no.fp(s),r=il(n,Po.Jv),h=il(n,Po.dm);if(!r||0===r.Z.length||!h)return[];const o=function(t,i,e){const s=t.Z[0],n=s.IM?s.IM.IM.toNumber()/e:i.GT,r=[];for(const t of s.DM)r.push(...t.CM);return{Bnt:n,CM:r}}(r,i,this.Pnt),a=e.ant.UD;return function(t,i,e,s){const n=ao.fp(ha(i.zm)),r=t.CM,h=t.Bnt+s,o=[];let a=0;for(let t=0;t<r.length;t++){const i=r[t],s=n[t];var u;const c=(null!=(u=i.ct)?u:0)/e;let d;s.Rg===gh.qv&&(d=BR(s,a,c,h)),d&&o.push(d),a+=c}return o}(o,h,this.Pnt,a)}tr(){this.Pnt=NaN}constructor(){this.Pnt=NaN}};function BR(t,i,e,s){if(!t.Snt)return void 0;const n=t.Tnt?function(t){return Un(t.Lnt,new L(0))}(t.Tnt):i,r=s+n,h=r+e,o=t.Snt.Cnt;return new Hw(r,h,o,!1)}var Eh,Ou,RR=class t extends St{get Rnt(){return this.Unt}set Rnt(t){this.Unt=t}get Rt(){for(const t of this.Z.og)if(t.jg!==Ha.Ch)return!0;return!1}async $n(t){await this.tr(),this.Qnt=t,this.Fnt(t)}Fnt(t){for(const i of t.Ynt){const t=this.Gnt(i);this.Vnt(t,i),t.Jf=Zs.LOADED,this.tt(t)}}it(t){this.Wnt(t),super.it(t)}UI(t){const i=this.Hnt(t);if(i&&this.Rnt!==i){this.Rnt=i;for(const t of this.Z.og)t!==i&&(t.jg=Ha.Ch)}}QI(t){const i=this.Hnt(t);i&&this.Rnt===i&&(this.Rnt=void 0)}Hnt(t){return Zt(this.Z.og,(i=>t.Mg===i.Mg))}Vnt(t,i){this.qnt.set(t.Mg,i)}Xnt(t){return this.qnt.get(t.Mg)}Wnt(t){this.qnt.delete(t.Mg)}Znt(){if(!this.Rnt)return;const i=this.Xnt(this.Rnt);return i?t.Knt(i):void 0}static Knt(t){return t.Jnt&&t.Jnt.length>0?t.Jnt[0]:void 0}constructor(...t){super(...t),this.qnt=pt()}};function UR(t,i){const e=i.mB(((i,e)=>t.wB(i,e,!1,!1)));return t.cB(e)}function QR(t,i){const e=i.Sn(t.hB()).mB(((i,e)=>t.gr(e)));return t.cB(e)}!function(t){t[t.gR=0]="gR",t[t.$nt=1]="$nt",t[t.trt=10]="trt",t[t.irt=11]="irt",t[t.ert=12]="ert",t[t.nrt=13]="nrt",t[t.rrt=14]="rrt",t[t.hrt=15]="hrt",t[t.ort=20]="ort",t[t.art=21]="art",t[t.urt=22]="urt",t[t.crt=23]="crt",t[t.drt=24]="drt",t[t.lrt=30]="lrt",t[t.frt=31]="frt",t[t._rt=32]="_rt",t[t.grt=33]="grt",t[t.wrt=34]="wrt",t[t.Art=35]="Art",t[t.vrt=40]="vrt",t[t.mrt=41]="mrt",t[t.prt=42]="prt",t[t.yrt=43]="yrt",t[t.Mrt=44]="Mrt",t[t.Trt=50]="Trt",t[t.Nrt=51]="Nrt",t[t.Drt=60]="Drt",t[t.Irt=61]="Irt",t[t.Srt=62]="Srt",t[t.Ert=63]="Ert",t[t.brt=70]="brt",t[t.Lrt=71]="Lrt",t[t.krt=72]="krt",t[t.Crt=73]="Crt",t[t.xrt=74]="xrt",t[t.Ort=75]="Ort",t[t.jrt=76]="jrt",t[t.zrt=77]="zrt",t[t.Prt=90]="Prt",t[t.Brt=91]="Brt"}(Eh||(Eh={})),function(t){t.Rrt="Urt",t.Qrt="Frt"}(Ou||(Ou={}));var FR,Rn=class extends fh{constructor(t,i,e){super("Yrt"),this.Cn=t,this.jn=i,this.Grt=e}},YR=class extends wn{constructor(){super("Vrt")}};!function(t){t.Wrt="Hrt",t.qrt="Xrt",t.Zrt="Krt",t.gR="Jrt"}(FR||(FR={}));var GR=[l.Tw,l.Dw,l.Mw,l.Yg],VR=class extends Pl{get $rt(){var t,i;return(null==(t=this.iht.tht)?void 0:t.Grt)||(null==(i=this.iht.eht)?void 0:i.Grt)}get sht(){return this.nht}set rht(t){this.iht.rht=t}get rht(){return this.iht.rht}get kI(){return this.hht}oht(t){this.hht!==t&&(this.hht=t,this.Co(new YR))}get aht(){return this.nht.Lt.aht}get lt(){return this.Bz}async Cn(t){if(!this.uht&&!this.cht)return;const i=this.df("Vrt");this.uht?(this.dht.Xd(),this.dht=new na,this.fht(this.dht.Hd)):(this._ht.Wb(void 0),this._ht=new Rs),await i}get uht(){return"Hrt"===this.hht}get cht(){return"Xrt"===this.hht}get ght(){return"Krt"===this.hht}get wht(){return"Jrt"===this.hht}async y_(t){if(this.ght||this.cht)for(0,this.dht.Xd();!this.uht&&!this.wht;)await this.df("Vrt")}async tr(t){this.wht?(this.Bz=void 0,this.oht("Hrt")):await this.y_(t),this.iht.tr(),this.nht.tr()}IP(t){this.Bz=t,this.oht("Jrt"),this.Co(new Bi(t))}Aht(){this.o2.yn(l.Sw,this.od),this.o2.yn([l.yw,l.hw],this.We),this.iht.yn(GR,this.Ds),this.vht.yn(Ou.Rrt,this.od)}mht(){this.o2.fn(l.Sw,this.od),this.o2.fn([l.yw,l.hw],this.We),this.iht.fn(GR,this.Ds),this.vht.fn(Ou.Rrt,this.od)}async pht(t){this.mht(),this.yht.Xd(),await this.y_(null!=t?t:Eh.yrt),this.iht.tr()}async Mht(t){this.Aht(),await this.Cn(null!=t?t:Eh.hrt)}async gn(){this.Vo(),this.mht(),this.yht.Xd(),await this.y_(Eh.Mrt),this.iht.gn()}async fht(t){for(;;)try{Bo(t),this.oht("Krt"),await this.iht.Tht(t),Bo(t),this.oht("Xrt"),await dt(this._ht.Zb,t)}catch(t){if(ut(t))this.oht("Hrt");else{const i=t instanceof $i?t:new $i(Ui.MEDIA_LOAD_ERROR,t.message,t);this.IP(i)}break}}async Nht(t){Bo(t),await this.y_(Eh.prt),this.iht.tr(),Bo(t),await this.Cn(Eh.nrt)}constructor(t,e,s,n,r){super(),this.Dht=t,this.vht=e,this.nht=s,this.iht=n,this.o2=r,this.hht="Hrt",this.Bz=void 0,this._ht=new Rs,this.yht=new na,this.dht=new na,this.We=t=>{this.uht||this.wht||!i.qit&&this.iht.Iht(t.currentTime)||(this.yht.Xd(),this.yht=new na,this.Nht(this.yht.Hd).catch(el))},this.od=ho((()=>{if(this.cht){try{this.iht.Sht();if(this.iht.Eht())return}catch(t){if(!(t instanceof Rn))throw t}this.Cn(Eh.rrt)}}),250),this.Aht()}},WR=class t{bht(t,i){return this.Lht(t,!1,i)}kht(t,i){return this.Lht(t,!0,i)}async Lht(i,e,s){Bo(s.Hd);const n=await this.Cht(i,e,s);return n.wV?t.xht(n):this.Oht(n)}Oht(t){return t}static xht(t){return t}Cht(t,i,e){var s;const n=new Pc({zu:t.zu,fS:Uv.YI,dS:t.jht?{Range:"bytes="+t.jht[0]+"-"+(null!=(s=t.jht[1])?s:"")}:void 0,AS:t.AS,lS:Nr.GET,Rg:iu.ZI,gS:i?Kt.$I:Kt.rT,wS:this.zht,CI:e.Pht,_S:e._S,Hd:e.Hd,mS:e.mS});return this.NS.SI(n)}constructor(t,i){this.NS=t,this.zht=i}},HR=class{Bht(t,i){const e=this.Rht**t,s=i*(1-e)+e*this.Z8;S(s)||(this.Z8=s,this.Uht+=t)}Qht(){const t=1-this.Rht**this.Uht;return this.Z8/t}constructor(t){this.Z8=0,this.Uht=0,this.Rht=_.exp(_.log(.5)/t)}},qR=class{Bht(t,i){const e=8e3*i/t,s=t/1e3;this.Fht+=i,this.Yht.Bht(s,e),this.Ght.Bht(s,e)}Qht(){return this.Vht()?_.min(this.Yht.Qht(),this.Ght.Qht()):this.Wht}Vht(){return this.Fht>=this.Hht}constructor(t=2,i=5,e=128e3){this.Fht=0,this.Wht=aN,this.Yht=new HR(t),this.Ght=new HR(i),this.Hht=e}},XR=class{get qht(){return this.Xht.Qht()}get Vht(){return this.Xht.Vht()}Zht(t){const i=t.Kht,e=this.Jht?t.$ht-t.tot:t.$ht-t.iot,s=t.eot;!s&&i<this.rot||(s?this.Xht.Bht(2*e,i):this.Xht.Bht(e,i))}constructor(t,i){this.Jht=i,!i||t!==pg.pm&&t!==pg.ym?(this.rot=16e3,this.Xht=new qR):t===pg.pm?(this.rot=5e3,this.Xht=new qR(.05,1,0)):(this.rot=0,this.Xht=new qR(.005,.1,0))}},ZR=["Nw","Iw"],KR=class extends Pl{async hot(t,i){let e;for(const s of this.oot)try{return await s.hot(t,i)}catch(t){Ao(t),e=t}throw e}async aot(t,i){let e;for(const s of this.oot)try{return await s.aot(t,i)}catch(t){Ao(t),e=t}throw e}gn(){for(const t of this.oot)t.fn(ZR,this.Ds),t.gn()}constructor(t){super(),this.oot=t;for(const t of this.oot)t.yn(ZR,this.Ds)}};var JR=class{transform(t,i){this.lL.write(t).catch(El),i.enqueue(t)}flush(){this.lL.close().catch(El)}constructor(t){this.lL=t}},$R=class{uot(){return new tU(wb(this.znt),this.cot,this.lot)}constructor(t,i,e){this.znt=t,this.cot=i,this.lot=e}},tU=class t{get lV(){return this.fot}cj(t){return oi(this.fot,t)}Em(){const[i,e]=vb(this.fot);return this.fot=i,new t(e,this.cot,this.lot)}_ot(){const[i,e]=function(t){const i=new Ko,e=i.writable.getWriter(),s=new Ko(new JR(e));return t.pipeTo(s.writable).catch((t=>{e.abort(t).catch(El)})),[s.readable,i.readable]}(this.fot);return this.fot=i,new t(e,this.cot,this.lot)}got(t){return this.cj(t).then((t=>new $R(t,this.cot,this.lot)))}constructor(t,i,e){this.fot=t,this.cot=i,this.lot=e}},Cr=class extends fh{constructor(t,i,e){super(i,e),this.wot=t}},iU="Cache lookup failed.",eU=class extends Pl{async hot(t,i){Bo(i);const e=await this.Aot.Oet(t.zu.zu,t.zu.jht);if(Bo(i),!e)throw new Cr(t,iU);const s=new $R(e.buffer,e.byteLength,e.reference);return{wot:t.wot,vot:{Rg:ji.aq,zm:s},Grt:t.Grt,zu:t.zu}}async aot(t,i){Bo(i);const e=await this.Aot.Oet(t.zu,t.jht);if(Bo(i),!e)throw new Cr(t,iU);const s=new $R(e.buffer,e.byteLength,e.reference);return{Rg:ji.aq,zm:s}}gn(){this.Vo()}constructor(t){super(),this.Aot=t}};function li(t){return bd(t.mot)}function sU(t){return li(t)?t.mot:t.pot}var nU=class extends wn{constructor(t,i,e,s,n,r){super(t),this.yot=i,this.sQ=e,this.yM=s,this.Qp=n,this.wS=r}},rU=class extends nU{constructor(t,i,e,s,n){super(l.Tw,t,i,e,s,n)}},hU=class{constructor(t,i){this.Mot=t,this.Tot=i}},oU=class extends hU{get Kht(){return this.Not}start(){}transform(t,i){this.Not+=t.byteLength,i.enqueue(t)}flush(){this.Dot(!1)}Xd(){this.Dot(!0)}Dot(t){this.Mot(this.Tot,i.Jd(),this.Kht,t)}constructor(...t){super(...t),this.Not=0}},aU=class extends hU{get Kht(){return this.Not}start(){this.Tot=i.Jd()}transform(t,i){this.Not+=t.byteLength,this.Iot||this.Sot(t)&&this.Dot(!1),i.enqueue(t)}flush(){}Xd(){this.Dot(!0)}Sot(t){const i=this.Eot(t),e=this.bot(i);return Boolean(Zt(e,uU))}Eot(t){return this.Lot&&void 0!==this.kot?(this.Lot=y_([this.Lot,t]),new Th(ha(this.Lot),new L(this.kot))):(this.Lot=t,new Th(ha(t),new L))}bot(t){const i=At.Km(t.zm,t.Pm,!0);return i.Jm?(this.Lot=void 0,this.kot=void 0):this.kot=t.Pm.Ku,i.m}Dot(t){this.Iot||(this.Mot(this.Tot,i.Jd(),this.Kht,t),this.Iot=!0)}constructor(...t){super(...t),this.Not=0,this.Iot=!1}};function uU(t){return t.Rg===Po.dm}var cU=class{Cot(t){const e=t.DV?this.xot:i.Jd(),s=this.Oot(e),n=new Ko(s),r=t.lV().pipeTo(n.writable).then((()=>({jf:{Kht:s.Kht}})),(t=>{throw s.Xd(),t}));return this.jot.Zd(r),n.readable}zot(t){const e=t.DV?this.xot:i.Jd(),s=t.cj(),n=s.then((t=>{const s=i.Jd();return this.Zht(e,s,t.byteLength,!1),{jf:{Kht:t.byteLength}}}),(t=>{const s=i.Jd();throw this.Zht(e,s,0,!0),t}));return this.jot.Zd(n),s}get Pot(){return this.jot.Zb}constructor(t){this.Bot=t,this.jot=new Rs,this.Zht=(t,i,e,s)=>{const n={iot:this.xot,tot:t,$ht:i,Kht:e,eot:s};this.Bot.Zht(n),this.Bot.Vht&&Vo.Ib.$j(this.Bot.qht)},this.jot.Zb.catch(El),this.xot=i.Jd()}},dU=class extends cU{Oot(t){return new oU(this.Zht,t)}},lU=class extends cU{Oot(t){return new aU(this.Zht,t)}},fU=class extends nU{constructor(t,i,e,s,n,r,h){super(l.Dw,t,i,e,s,n),this.Rot=r,this.pT=h}},_U=class extends fh{constructor(t,i,e){super("Error downloading segment "+sU(i),t),this.Uot=i.GT,this.Qot=i.VT,this.Fot=e}},gU=class extends Pl{Yot(){return this.Jht?new lU(this.Bot):new dU(this.Bot)}async hot(t,i){Bo(i);const e=t.Grt,s=t.zu,n=t.wot,r=sU(n),h=e.Grt?e.Grt.Mg:-1,o=function(t){const i=t.Grt;let e;e=i===function(t){return t.Jnt.reduce(((t,i)=>t.wz<i.wz?t:i))}(i.Got)?ir(5*t.wot.ct):ir(1.2*t.wot.ct);return os(e,1e3,18e3)}(t);this.Co(new rU(s,e.wz,r,h,e.Rg));try{const t=this.Yot(),a=await this.Vot.bht(s,{mS:this.Jht,Pht:o,Hd:i}),u=await this.Wot(a,a.wV,i,t);return D(this.Hot(t.Pot,e,s,r,h,a)),{vot:u,Grt:e,wot:n,zu:s}}catch(t){throw Ao(t),new _U(t,n,e)}}async aot(t,i){Bo(i);const e=await this.Vot.kht(t,{mS:false,Pht:1e4,Hd:i});return await this.Wot(e,false,i)}async Wot(t,i,e,s){if(i){const i=s?s.Cot(t):t.lV();return{Rg:ji.VI,zm:new tU(i)}}{const i=s?await s.zot(t):await t.cj(e);return{Rg:ji.aq,zm:new $R(i)}}}async Hot(t,i,e,s,n,r){try{const h=await t;this.Co(new fU(e,i.wz,s,n,i.Rg,r.kI,h.jf.Kht))}catch(t){}}gn(){this.Vo()}constructor(t,i,e){super(),this.Vot=t,this.Bot=i,this.Jht=e}};var wU=class{qot(t,i,e,s,n){const r=new eU(n),h=this.Xot(t,e,s);return new KR([r,h])}Xot(t,i,e){return new gU(t,i,e)}},AU=.001,vU=class{get wf(){return this.Zot.wf}get Kot(){return this.Zot.Kot}get Rq(){return this.Zot.Rq}get Jot(){if(this.y$.Jf<ae.Xn)return!1;if(this.Zot.jn<=this.$ot&&this.Zot.iat())return!0;const t=this.Zot.jz;if(!t||0===t.U)return!1;const i=Ai.IB(this.o2.Mf,1/0);return t.Sn(i).lB(this.Zot.Rq).NB>=this.PB.jW}get $ot(){const t=this.Zot.jz;let i;if(t&&t.U>0)i=t.jn(0);else{i=this.o2.Mf;const t=this.Zot.Rq,e=t.fB(i);e>=0&&(i=t.jn(e))}const e=this.Zot.t_.Cn(0);if(e>i){if(this.Zot.Cn<=i&&this.Zot.jn>=i&&e>i+AU)throw new Rn(i,e);i=e}return i=this.Zot.eat.rB(i),i}constructor(t,i,e,s){this.Zot=t,this.o2=i,this.y$=e,this.PB=s}};var mU=class{get sat(){if(0===this.Od.size)return Ai.SB();let t=Ai.IB(0,1/0);return this.Od.forEach((i=>{t=t.Sn(i)})),t}nat(){let t=Ai.SB();return this.Od.forEach((i=>{t=t.cB(i)})),t}rat(t){let i=!1;return this.Od.forEach((e=>{i=i||e.gr(t)})),i}oat(t,i){const e=this.Od.get(i.o);return!!e&&e.gr(t)}_B(t,i){let e=!1;return this.Od.forEach((s=>{e=e||s._B(t,i)})),e}aat(t,i){const e=this.Od.get(i.o).cB(t);this.Od.set(i.o,e)}uat(t){this.Od.forEach(((i,e)=>{const s=i.cB(t);this.Od.set(e,s)}))}dat(t){this.Od.forEach(((i,e)=>{this.Od.set(e,i.Sn(t))}))}tr(){this.Od.forEach(((t,i)=>{this.Od.set(i,Ai.SB())}))}constructor(t){this.Od=function(t){const i=cs();for(const e of t)i.set(e.o,Ai.SB());return i}(t)}},pU=class{get fat(){return this._at}get Rq(){return this.Uq}gat(t){for(const i of this.Ket){if(i.wat>t)break;if(i.Aat>t)return i}}vat(t){for(const i of this.Ket){if(i.mat>t)break;if(i.pat>=t)return i}}yat(t,i){const e=[];for(const s of this.Ket){if(s.wat>t)break;s.Aat>=i&&e.push(s)}return e}Mat(){return this.Ket}Tat(t,i){const e=Ai.IB(t.mat,t.pat),s=e.hB();this._at.dat(s),this._at.aat(e,i),this.Nat(s);const n=Ka(this.Ket,(i=>t.wat<=i.wat));if(n<0)this.Ket.push(t);else{this.Ket[n].Aat<=t.Aat?this.Ket.splice(n,1,t):this.Ket.splice(n,0,t)}}Qq(t,i){this.Uq.aat(t,i)}Dat(t){this.Uq.uat(t)}dat(t){this._at.dat(t),this.Uq.dat(t);const i=this._at.nat();this.Nat(i)}Nat(t){this.Ket=this.Ket.filter((i=>t.wB(i.mat,i.pat))).map((i=>i.Iat&&!t._B(i.mat,i.pat)?function(t,i){return{wat:t.wat,Aat:t.Aat,mat:t.mat,pat:t.pat,Iat:i}}(i,!1):i))}tr(){this._at.tr(),this.Uq.tr(),this.Ket=[]}gn(){this.tr()}constructor(t){this.Ket=[],this.Lt=t,this._at=new mU(t.Jnt),this.Uq=new mU(t.Jnt)}},yU=class{get rht(){return this.Sat}set rht(t){this.Sat=t}get aht(){return this.nht.Lt.aht}async Eat(t,i,e){let s;Bo(e);const n=this.nht.vat(t);s=n&&Ua(n.pat,t,1e-5)?_.max(n.Aat,t):t;const r=this.bat(s),h=function(t){return MU.bind(void 0,t)}(s);let o=await this.jtt.Lat(h,r,i,e);for(Bo(e);o&&this.Cat(o.wot);){const t=IU(o.wot),s=o.Grt;o=await this.jtt.Lat(t,[s],i,e),Bo(e)}if(!o)return void 0;if(!this.xat(o.wot))return o;const a=this.Oat(o.wot);if(t<a.Cn)return await this.findFirstNonAppendedSegmentBeforeSegment(o,i,e,a);if(t>=a.jn)return await this.findFirstNonAppendedSegmentAfterSegment(o,i,e);if(!o.Grt.jat(o.wot))throw new g("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,i,e){let s=t;do{const n=IU(s.wot),r=t.Grt;s=await this.jtt.Lat(n,[r],i,e),Bo(e)}while(s&&this.xat(s.wot));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,i,e,s){let n=t;do{const s=DU(n.wot),r=t.Grt;n=await this.jtt.Lat(s,[r],i,e),Bo(e)}while(n&&this.xat(n.wot));if(!n){0;const i=t.Grt.zat.Cn;throw new Rn(i,s.Cn,t.Grt)}return n}Pat(t){return this.nht.fat.rat(t)}Bat(t){return this.nht.yat(t.GT,t.VT)}xat(t){const i=this.Bat(t);return i.length>0&&function(t,i){return function(t){let i=Ai.SB();for(const e of t)i=i.cB(Ai.IB(e.wat,e.Aat));return i}(t)._B(i.GT,i.VT)}(i,t)&&i.every(SU)}Cat(t){return this.nht.Rq._B(t.GT,t.VT)}Oat(t){const i=this.Bat(t);return{Cn:i[0].mat,jn:i[i.length-1].pat}}bat(t){const i=this.Rat(t);if(0===i.length){const t=this.Sat?this.Sat:this.nht.Lt.Jnt;return[t[t.length-1]]}const e=i.filter((t=>!t.Uat));return e.length>0?e:[i[i.length-1]]}Rat(t){return(this.Sat?this.Sat:this.nht.Lt.Jnt).filter((i=>!this.nht.Rq.oat(t,i)))}constructor(t,i,e){this.Dht=t,this.nht=i,this.jtt=e}};async function MU(t,i,e,s){const n=i.ant.Qat(t);if(n){if(i.Fat(n)){return(await i.Gat(n,e,s)).Yat(t)}return n}}async function TU(t,i,e,s){if(li(t)){if(0===t.mot)return;const n=i.ant.Vat(t);if(!n)return;return(await i.Gat(n,e,s)).Wat(t.mot-1)}return i.ant.Hat(t)}async function NU(t,i,e,s){if(li(t)){const n=i.ant.Vat(t);if(!n)return;const r=await i.Gat(n,e,s);if(t.mot+1===r.U)return;return r.Wat(t.mot+1)}return i.ant.qat(t)}function DU(t){return TU.bind(void 0,t)}function IU(t){return NU.bind(void 0,t)}function SU(t){return t.Iat}var EU=class{async Lat(t,i,e,s){Bo(s);const n=this.Xat(i,e);if(!n)return;const r=await t(n,this.Zat,s);if(!r)return;const h=n.Kat(r);return{Grt:n,wot:r,zu:h}}Xat(t,i){if(0===t.length)return;const e=this.$at.Jat(t,this.tut?i:void 0,this.Zot,this.PB.kW);return this.tut||(this.tut=!0),e}constructor(t,i,e,s){this.$at=t,this.Zot=i,this.PB=e,this.Zat=s,this.tut=!1}},bU=class{async Lat(t,i,e,s){Bo(s);const n=this.$at.iut(i,e,this.Zot);if(!n.length)return;let r;for(const i of n)try{Bo(s);const e=await t(i,this.Zat,s);if(e){const t=i.Kat(e);if(await this.Aot.Cet(t.zu,t.jht))return{wot:e,Grt:i,zu:t}}}catch(t){Ao(t),r=t}if(r)throw r}constructor(t,i,e,s){this.$at=t,this.Zot=i,this.Aot=e,this.Zat=s}};function LU(t){return void 0!==t.Gf}function kU(t,i){const e=t.ji&&i.ji,s=t.Ti&&i.Ti;if(e||s){if(e&&s)return t.ji*t.Ti-i.ji*i.Ti;if(e)return t.ji-i.ji;if(s)return t.Ti-i.Ti;return(t.ji||1)*(t.Ti||1)-(i.ji||1)*(i.Ti||1)}return 0}function CU(t,i){return kU(t,i)||function(t,i){return t.wz-i.wz}(t,i)}var xU=class t{Jat(i,e,s,n){let r=t.sortByQuality(i);if(void 0!==this.eut&&void 0===e&&i.length>1){const i=t.sut(r,this.eut);i&&(r=i)}const h=this.iut(r,e,s,n);return h.length?h[h.length-1]:r[0]}iut(i,e,s,n){var r;const h=t.sortByQuality(i),o={qht:void 0===n||this.nut.Vht?this.nut.qht:n,Gf:LU(s)&&s.Gf?s.Gf:1,rut:s.ji,hut:s.Ti,out:null==(r=this.aut)?void 0:r.restrictToPlayerSize};let a=h;for(const t of this.uut)a=t(a,e,o,this.cit,this.cut);return a}static lut(i){return t.sortByQuality(i)[0]}static fut(i,e){var s;return e?t.lut(null!=(s=t.sut(i,e))?s:i):t.lut(i)}static sut(t,i){for(const e of i){const i=t.filter((t=>Lt(t.sit,e)));if(i.length>0)return i}}static sortByQuality(t){const i=[...t];return i.sort(CU),i}constructor(t,i,e,s,n,r){this.uut=t,this.nut=i,this.cit=e,this.aut=s,this.eut=n,this.cut=r}},OU=(t,i,e,s,n)=>t.filter((t=>n.gq(t)&&s.Jtt(i,t))),jU=(t,i,e)=>t.filter((t=>function(t,i,e){const s=e.qht;if(s<=0)return!1;return.8*s>t.wz*e.Gf}(t,0,e)));var zU=(t,i,e,s,n)=>{const r=e.out;if(void 0===r&&!s.Qs)return t;if(!1===r)return t;if(t.length>0&&t[0].Rg!==pg.pm)return t;for(let i=t.length-1;i>=0;i--){const s=t[i];if(s.Ti===e.hut&&s.ji===e.rut)return t.slice(0,i+1);if(s.Ti<e.hut||s.ji<e.rut)return t.slice(0,i+2)}return[]},PU=class{async Lat(t,i,e,s){let n;for(const r of this._ut)try{const n=await r.Lat(t,i,e,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this._ut=t}},BU=class{async gut(t,i,e,s){let n;for(const r of this.wut)try{return await r.gut(t,i,e,s)}catch(t){Ao(t),n=t}throw n}constructor(t){this.wut=t}},RU=class{async gut(t,i,e,s){var n;const r=await this.NS.SI({zu:t,fS:Uv.YI,dS:i?{Range:"bytes="+i[0]+"-"+(null!=(n=i[1])?n:"")}:void 0,AS:e,lS:Nr.GET,Rg:iu.rT,Hd:s});return await r.cj()}constructor(t){this.NS=t}},UU=class{async gut(t,i,e,s){const n=await this.Aot.Oet(t,i);if(n)return n.buffer;if(i){const e=await this.Aot.Oet(t);if(e)return Nh(new j(e.buffer),i[0],i[1])}throw new Cr({zu:t,jht:i,AS:!1})}constructor(t){this.Aot=t}};var QU=1.05,FU=(t,i,e,s)=>{if(!1===e.out)return t;if(s.Vtt)return t;const n=s.Wtt;var r;const h=(null!=(r=null==n?void 0:n.width)?r:e.rut)*QU;var o;const a=(null!=(o=null==n?void 0:n.height)?o:e.hut)*QU;for(let i=t.length-1;i>=0;i--){const e=t[i];if(e.Ti<=a&&e.ji<=h)return t.slice(0,i+1)}return[]},YU=class{static h9(t,e,s,n,r,h,o,a,u,c){const d=function(t,i){return new BU([new UU(i),new RU(t)])}(h,o),l=new xU([OU],r,i.Ys,a,u,c),f=new bU(l,e,o,d),_=new xU([jU,OU,zU,FU],r,i.Ys,a,u,c),g=new EU(_,e,n,d),w=new PU([f,g]);return new yU(t,s,w)}},GU=class{Aut(t,i,e,s){return this.Zot.Aut(t,i,e,s)}vut(t,i,e){return this.Zot.hnt(t,i,e)}mut(t,i,e){return this.Zot.mut(t,i,e)}Qq(t,i){this.Zot.Qq(t,i)}Fq(t,i){this.Zot.Fq(t,i)}t$(){this.Zot.t$()}UW(){return this.Zot.UW()}constructor(t){this.Zot=t}},VU=class extends wn{constructor(t,i,e,s,n,r=0){super(l.Mw),this.segmentStartTime=t,this.error=i,this.trackType=e,this.track=s,this.quality=n,this.retryCount=r}},WU=class extends wn{constructor(t,i){super(l.Yg),this.track=t,this.segments=i}},HU=class extends fh{constructor(t,i){super(i),this.yut=t}},qU=[l.Tw,l.Dw],XU=class extends Pl{get tht(){return this.Mut}get eht(){return this.Tut}set rht(t){this.Nut.rht=t}get rht(){return this.Nut.rht}get aht(){return this.nht.Lt.aht}Dut(t){return!this.TJ||!t||!p_(this.TJ.znt,t.znt)}Iht(t){if(!this.Mut)return!1;const i=this.Mut.wot,e=Ai.IB(i.GT,i.VT),s=this.Iut.Kot,n=s.fB(t);return n<0?e.gr(t,AU):e.wB(t,s.jn(n),!0,!0,AU)}async Tht(t){const i=this.nht.Lt.Jnt;for(;;)try{Bo(t),this.Sht();if(this.Eht())break;const e=this.Sut(),s=await this.Lat(e,t);if(void 0===s)break;if(this.Mut=s,!ZU(this.Mut)){await this.Eut(this.Mut,t);continue}this.Tut&&!Lt(this.Tut.Grt.qz,this.Mut.Grt.qz)&&await this.cut.Aq(this.Mut.Grt),await this.but(e,this.Mut.wot,t),this.TJ=await this.Lut(this.Mut.Grt,t);const n=await this.hot(this.Mut,t),r=this.Iut.wf,h=this.Tut;this.Tut=await this.kut(n,t);const o=this.Iut.wf;this.Cut(h,this.Mut,r,o),i.forEach((t=>t.Uat=!1)),this.xut=0,this.Out=0}catch(e){if(e instanceof Rn){this.o$(e.Cn,e.jn,e.Grt);continue}if(e instanceof HU){let s=500;if(i.every((t=>t.Uat))){if(2===this.xut){const t=this.Iut.wf;if(this.jut(this.Mut),this.Cut(this.Tut,this.Mut,t,t),i.forEach((t=>t.Uat=!1)),this.Out+=1,this.xut=0,this.Out===this.zut.maxRetries)throw new $i(Ui.MEDIA_LOAD_ERROR,"The segments could not be loaded.",e);continue}this.xut++;const t=this.zut.minimumBackoff*2**(this.xut-1);s=_.min(t,this.zut.maximumBackoff)}await ri(s,t);continue}throw this.Put=Ai.SB(),e}finally{this.Mut=void 0}}Cut(t,i,e,s){const n=s.lB(e),r=i.Grt.But(i.wot),h=i.Grt.jat(i.wot);let o=i.wot.GT,a=i.wot.VT;r&&(o=_.min(o,_.max(0,i.Grt.zat.Cn-.05))),h&&(a=_.max(a,i.Grt.zat.jn));const u=Ai.IB(o,a).lB(s);if(0===n.U)return 0===this.Put.U&&this.Put.cB(Ai.IB(e.jn(e.U-1),o)),this.Put=this.Put.cB(u),void this.nht.Dat(this.Put);if(r||this.Put.U>0){const t=u.Sn(Ai.IB(o,n.Cn(0)));this.Rut(t)}const c=n.hB().Sn(Ai.IB(n.Cn(0),n.jn(n.U-1)));if(this.Rut(c),h){const t=u.Sn(Ai.IB(n.jn(n.U-1),a));this.Rut(t)}if(this.Put.U>0){const t=this.Put.lB(n);this.Rut(t),this.Put=Ai.SB()}const d=i.Grt.ant,l=li(i.wot)?void 0:d.Hat(i.wot);var f;const g=null!=(f=null==t?void 0:t.wot)?f:this.Uut(l)?l:void 0;if(g){const t=this.nht.yat(g.GT,g.VT);if(t.length>0){const i=Ai.IB(t[t.length-1].pat,n.Cn(0));this.Rut(i)}}const w=li(i.wot)?void 0:d.qat(i.wot);if(w&&this.Uut(w)){const t=this.nht.yat(w.GT,w.VT);if(t.length>0){const i=Ai.IB(n.jn(n.U-1),t[0].mat);this.Rut(i)}}}Uut(t){return!!t&&this.nht.yat(t.GT,t.VT).length>0}Rut(t){const i=t.lB(this.Iut.wf);for(let t=0;t<i.U;t++)i.Cn(t)!==i.jn(t)&&this.Qut.Qq(i.Cn(t),i.jn(t))}Fut(t,i){throw new HU(t,i)}Sht(){if(this.Put.U>0)return;var t;const i=this.Iut.Kot.cB(null!=(t=this.Iut.Rq.nB().dA(this.Iut.$ot))?t:Ai.SB());this.nht.dat(i),this.Yut&&!this.Gut(this.Yut)&&(this.Yut=void 0),this.Co(new WU(this.nht.Lt.aht,this.nht.Mat()))}Eht(){return this.Tut&&this.Tut.Grt.jat(this.Tut.wot)?(this.Qut.t$(),!0):(this.Yut&&this.Yut.Grt.jat(this.Yut.wot)&&this.Gut(this.Yut)&&this.Qut.t$(),!!this.Iut.Jot)}Gut(t){return this.nht.fat._B(t.Vut,t.Wut)}Hut(t,i,e){(!this.Yut||this.Yut.wot.VT<t.wot.VT)&&(this.Yut=Tt({},t,{Vut:i,Wut:e}))}Sut(){const t=this.Iut.$ot;return t}async Lat(t,i){Bo(i);const e=this.Tut?this.Tut.Grt:void 0,s=await this.Nut.Eat(t,e,i);if(s)return s}async Eut(t,i){const e=t.Grt,s=e.ant,n=li(t.wot)?s.Vat(t.wot):t.wot,r=e.Xut.qut(),h=s.Zut(n);if(h&&h.getTime()<=r.getTime())return this.Fut(Eh.urt,"Segment is not available.");const o=s.Kut(n).getTime()-r.getTime();await vu((t=>Promise.race([ri(o,t),e.df(Ou.Rrt,t)])),i)}async Lut(t,i,e){void 0===e&&(e=0),Bo(i);const s=t.Jut;if(!s)return this.TJ;try{if(!t.$ut){const e=await this.tct.aot(s,i);t.$ut=e.zm}}catch(s){if(Ao(s),du(s)){if(2===e)return t.Uat=!0,this.Fut(Eh.Art,"Could not fetch the initializer.");const s=_.min(this.zut.minimumBackoff*2**e,this.zut.maximumBackoff);return await ri(s,i),this.Lut(t,i,e+1)}throw new $i(Ui.MEDIA_LOAD_ERROR,s.message,s)}Bo(i);try{this.Dut(t.$ut)&&await this.Qut.vut(t.$ut,t,i)}catch(t){if(Ao(t),du(t))return this.Fut(Eh.Art,"Could not append the initializer.");throw new $i(Ui.MEDIA_DECODE_ERROR,t.message,t)}return t.$ut}async hot(t,i,e){void 0===e&&(e=0);try{return Bo(i),await this.tct.hot(t,i)}catch(s){if(Ao(s),s instanceof _U){if(function(t){return t instanceof Ya}(s.cause))return this.ict(new _U(s,t.wot,t.Grt),e),this.Fut(Eh.urt,"Could not append the segment.");if(2===e)return t.Grt.Uat=!0,this.ict(s,e),this.Fut(Eh.urt,"Could not fetch the segment.");const n=_.min(this.zut.minimumBackoff*2**e,this.zut.maximumBackoff);return await ri(n,i),await this.hot(t,i,e+1)}throw new $i(Ui.MEDIA_LOAD_ERROR,s.message,s)}}async but(t,i,e){const s=this.nht.yat(i.GT,i.VT),n=this.Iut.Kot.dA(t);let r=Ai.SB();for(const t of s){Bo(e);const i=t.mat,s=t.pat,h=n&&n.wB(i,s)?_.max(i,n.jn(0)):i,o=s;h<o&&(r=r.cB(Ai.IB(h,o)))}for(let t=0;t<r.U;t++)await this.Qut.mut(r.Cn(t),r.jn(t),e);this.Sht()}async kut(t,i){try{Bo(i);const e=await this.Qut.Aut(t.vot,t.wot,t.Grt,i);return this.ect(t,e.Vut,e.Wut),this.Hut(t,e.Vut,e.Wut),t}catch(i){if(Ao(i),du(i))return this.ict(new _U(i,t.wot,t.Grt),0),this.Fut(Eh.urt,"Could not append the segment.");if(vr(i)&&this.Qut.UW())return this.Fut(Eh.drt,"Buffer is full. Could not reduce the buffer.");throw new $i(Ui.MEDIA_DECODE_ERROR,i.message,i)}}ect(t,i,e){const s=t.Grt,n=t.wot;this.Tat(n,s,i,e)}Tat(t,i,e,s){this.nht.Tat({wat:t.GT,Aat:t.VT,mat:e,pat:s,Iat:!0},i),this.Qut.Fq(e,s)}o$(t,i,e){const s=Ai.IB(t,i);e?this.nht.Qq(s,e):this.nht.Dat(s),this.Qut.Qq(t,i)}jut(t){const i=Ai.IB(t.wot.GT,t.wot.VT);t.Grt?this.nht.Qq(i,t.Grt):this.nht.Dat(i)}ict(t,i){const e=t.Uot,s=this.nht.Lt.aht,n=this.nht.Lt.va,r=t.Fot.Grt&&t.Fot.Grt.va,h=new VU(e,t.message,s,n,r,i);this.Co(h)}tr(){this.TJ=void 0,this.Tut=void 0}gn(){this.tr(),this.Yut=void 0,this.tct.fn(qU,this.Ds),this.tct.gn()}constructor(t,i,e,s,n,r,h,o){super(),this.Dht=t,this.nht=i,this.Iut=e,this.Nut=s,this.tct=n,this.Qut=r,this.cut=h,this.zut=o,this.Mut=void 0,this.TJ=void 0,this.Tut=void 0,this.Yut=void 0,this.xut=0,this.Out=0,this.Put=Ai.SB(),this.tct.yn(qU,this.Ds)}};function ZU(t){const i=t.Grt,e=i.ant,s=li(t.wot)?e.Vat(t.wot):t.wot;return e.sct(s,i.Xut.qut())}var KU=0,JU=class{h9(t){const i=KU++,e=this.Zot.e$,s=new pU(t),n=new XR(e,this.nct),r=new vU(this.Zot,this.o2,this.y$,this.PB),h=YU.h9(i,this.Zot,s,this.PB,n,this.NS,this.Aot,this.aut,this.eut,this.cut),o=function(t){switch(t){case pg.ym:return Xn.ym;case pg.pm:return Xn.pm;case pg.Ru:return Xn.Ru;case pg.nT:return Xn.nT;default:return Xn.rT}}(e),a=new WR(this.NS,o),u=this.qot(a,n,this.nct),c=new GU(this.Zot),d=new XU(i,s,r,h,u,c,this.cut,this.zut);return new VR(i,t.Got,s,d,this.o2)}constructor(t,i,e,s,n,r,h,o,a,u,c){this.Zot=t,this.o2=i,this.y$=e,this.NS=s,this.PB=n,this.nct=r,this.Aot=h,this.aut=o,this.eut=a,this.cut=u,this.zut=c}},$U=class extends JU{qot(t,i,e){return(new wU).qot(t,this.Zot,i,e,this.Aot)}},tQ=class extends JU{rct(t,i){const e={aht:pg.Ru,Got:i,Jnt:i.Jnt,va:t.va};return super.h9(e)}qot(t,i){return(new wU).qot(t,this.Zot,i,!1,this.Aot)}};var iQ=class{gq(t){return this.qst.gq(t)}Aq(t){return this.qst.Aq(t)}constructor(t){this.qst=t}},eQ=class{gq(t){return!0}Aq(t){return Promise.resolve(void 0)}},Ga=class extends yo{fa(){return new sQ(this.Ng.map((t=>t.va)))}constructor(t,i){super(Ce.rg),this.Ng=t||[],this.Lt=i}},sQ=class extends wn{constructor(t){super("targetqualitychanged"),this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}},nQ=class extends ts{fa(){return new rQ(this.quality.va)}constructor(t){super(Ce.QUALITY_UNAVAILABLE),this.quality=t}},rQ=class extends ks{constructor(t){super("qualityunavailable"),this.quality=t}},hQ=class extends wn{constructor(){super(Ce.NO_QUALITY)}};function oQ(t){return{wz:t.wz,sit:t.wst,Ti:aQ(t)?t.Ti:0,Rg:aQ(t)?pg.pm:pg.ym,ji:aQ(t)?t.ji:0}}function aQ(t){const i=t;return void 0!==i.Ti&&void 0!==i.ji}var uQ=0,cQ=class extends Pl{get Tg(){return this.vht.hct.map(dQ).filter(Yt)}act(t){for(const i of t)i.yn("update",this.uct),this.IT.ST(i)}cct(t){if(!this.IT.bT(t))return;t.QI();const i=this.dct();if(this.lct&&qt(this.lct,t)){const t=this.lct.filter((t=>t.vet));0===t.length&&i.length>0?this.Dg=i:this.Dg=t}else this.Dg=i;this.Co(new nQ(t))}dct(){const t=[];for(const i of this.IT.og)i.vet&&t.push(i);return t}get yg(){return this.fct}_ct(t){this.fct=t.Grt,this.Co(t)}get Got(){return this.vht}get Rt(){return this.Le}set Rt(t){this.zT(t)}get va(){return this.Xa||(this.Xa=Fi(this)),this.Xa}get gct(){return this.wct}set gct(t){this.wct=t}get o(){return this.CT}get Mg(){return this.xT}get zt(){return this.G0}get gs(){return this.WL}get kh(){return this.OT}set kh(t){t!==this.OT&&(this.OT=t,this.Co(new js(this)))}get jg(){return this.Rt?"enabled":"disabled"}get Dg(){return this.lct}set Dg(t){let e=[];if(t){const s=(null!=t?t:[]).filter((t=>{const e=this.yg?oQ(this.yg):void 0;return i.Ys.Jtt(e,oQ(t))}));if(0===s.length)return;e=s.filter((t=>t.vet))}else e=this.dct();0===e.length&&this.Co(new hQ),this.lct=t&&this.IT.bT(t)?t:void 0,this.Act=this.vct(this.lct),this.Co(new Ga(t,this))}get mct(){return this.Act}vct(t){if(!t||0===t.length)return;const i=[];for(const e of this.Jnt)for(const s of t)s===e.Grt&&s.vet&&i.push(e);return i}get Ng(){return this.IT}get Jnt(){return this.pct}yct(t){this.Mct.push(t),this.pct.push(...t.Jnt);const i=t.Jnt.map((t=>t.Grt));this.act(i)}get aht(){return this.Tct}get Nct(){return this.Mct}zT(t){this.Le=t,this.wct&&(t?this.wct.UI(this):this.wct.QI(this))}Dct(t){this.Le=t,this.Ict!==t&&(this.Ict=t,this.Co(new Tn(this)))}gn(){for(const t of this.IT.og)t.fn("update",this.uct);this.IT.tr()}constructor(t,i,e="alternative"){super(),this.fct=void 0,this.Le=!1,this.Xa=void 0,this.wct=void 0,this.CT="",this.Ict=!1,this.IT=new Tw,this.pct=[],this.lct=void 0,this.Act=void 0,this.uct=()=>this.Co(new js(this)),this.Mct=[],this.vht=t,this.CT=String(uQ++),this.xT=Iw(),this.G0=e,this.WL=t.R6,this.OT=t.kh,this.Tct=t.Rg,this.pct=t.Jnt,this.act(i)}};function dQ(t){if("urn:mpeg:dash:role:2011"===t.vst)return lQ(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.vst){if("1"===t.jM)return Nu.Sg;if("2"===t.jM)return Nu.Lg}}function lQ(t){if(void 0!==(null==t?void 0:t.jM))switch(t.jM){case"caption":return Nu.Ig;case"sign":return Nu.Eg;case"description":return Nu.Sg;case"enhanced-audio-intelligibility":return Nu.Lg;default:return}}var Le,Sr,fQ=class extends RR{get jz(){const t=this.o2.Mf;return this.Kot.dA(t,.01)}get Sct(){return this.Rnt&&this.Ect[this.Rnt.Mg]?this.Ect[this.Rnt.Mg]:Ai.SB()}get bct(){return this.Rnt&&this.Lct[this.Rnt.Mg]?this.Lct[this.Rnt.Mg]:Ai.SB()}get eat(){return new Ai([0,1/0])}get wf(){return this.Sct}get Rq(){return this.kct?this.kct.sht.Rq.sat:Ai.SB()}get Kot(){return UR(this.wf,this.Rq).uB(2*this.Cct)}get Cn(){return this.Qnt?this.Qnt.zat.Cn:NaN}get jn(){return this.Qnt?this.Qnt.zat.jn:NaN}get If(){const t=this.jn;return!!t&&this.o2.Mf>=t}get Cct(){var t;const i=this.Znt();if(!i)return.04;var e;return 1/(null!=(e=this.Rnt&&(null==i||null==(t=i.xct)?void 0:t.vN()))?e:25)}get Ti(){return this.fk}get e$(){return pg.Ru}get Gf(){return this.CB}set Gf(t){this.CB=t}get Hf(){return this.bct}get t_(){if(!this.Rnt)return Ai.DB(0);const t=this.Xnt(this.Rnt),i=null==t?void 0:t.Oct,e=null==t?void 0:t.jct;if(void 0===e||void 0===i)return Ai.DB(0);const s=_.max(i,this.o2.Mf);return new Ai([e,s]).nB()}get ji(){return this.lk}t$(){}iat(){return this.Kot.gr(this.jn)}async Aut(t,i,e,s){const n=t.Rg===ji.aq?t.zm.znt:await t.zm.cj(s),r=this.findTrackForRepresentation(e),h=this.Ect[r.Mg],o=i.GT,a=i.VT,u=new Ai([o,a]);h||(this.Ect[r.Mg]=Ai.SB(),this.Lct[r.Mg]=Ai.SB()),this.$st(s);const c=this.ont(new j(n),i,e,r);for(const t of c)r.SS(t);return this.Ect[r.Mg]=this.Ect[r.Mg].cB(u),{Vut:o,Wut:a}}$st(t){const i=Zb(this.o2.Mf,void 0,void 0,this.wf,this.PB.jW,this.PB.EW);for(const[e,s]of i)D(this.mut(e,s,t))}hnt(t,i,e){return this.zct.hnt(t,i,e)}ont(t,i,e,s){return this.zct.ont(t,i,e,s)}mut(t,i,e){const s=t,n=i;let r=new Ai([t,i]);for(const t of this.Z.og){const i=[];for(const e of t.L.og)e.GT>=s&&e.VT<=n?i.push(e):r=r.lB(new Ai([e.GT,e.VT]));for(const e of i)t.xI(e);const e=this.Ect[t.Mg];e&&(this.Ect[t.Mg]=e.lB(r))}return Promise.resolve()}Qq(t,i){}Fq(t,i){}UW(){return!1}UI(t){if(super.UI(t),this.zct.tr(),this.kct&&(this.kct.gn(),this.kct=void 0),this.Rnt){const t=this.Xnt(this.Rnt);this.kct=new tQ(this,this.o2,this.o2,this.NS,this.PB,!1,this.Aot,void 0,void 0,new eQ,dw).rct(this.Rnt,t),this.kct.yn(hh.ha,this.Pct),this.kct.Cn(Eh.irt)}}QI(t){this.Rnt===t&&(super.QI(t),this.kct&&(this.kct.gn(),this.kct=void 0))}Gnt(t){const i=function(t){const i=t.Jnt&&t.Jnt.length>0&&t.Jnt[0],e=i&&kv(i.wst),s=kv(t.wst),n=t.CF===Kn.APPLICATION_TTML_XML;return e||s||n?Kc.TTML:t.CF===Kn.TEXT_VTT||Wn(t.CF,t.wst)?Kc.WEBVTT:Kc.DEFAULT}(t);if(!i)throw new g("Unknown TextTrack type for Representation");const e=t.Bct.concat(t.hct);return this.Rct(function(t){return qt(t.filter((t=>"urn:mpeg:dash:role:2011"===t.vst)).map((t=>t.jM)).filter(Yt),"caption")?jo.yI:jo.Mm}(e),t.kh,t.R6,!1,i,t,function(t){return t.filter((t=>"urn:mpeg:dash:role:2011"===t.vst)).some((t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.jM)))}(t.Bct),t.hct.map(lQ).filter(Yt))}async tr(){await super.tr(),this.kct&&(await this.kct.tr(Eh.Nrt),this.kct.fn(hh.ha,this.Pct),this.kct=void 0),this.Qnt=void 0,this.Ect={},this.Lct={}}Uct(){this.Ect={},this.Lct={}}findTrackForRepresentation(t){for(const i of this.Z.og){const e=this.Xnt(i);if(e&&RR.Knt(e)===t)return i}}constructor(t,i,e,s,n){super(),this.fk=0,this.CB=1,this.kct=void 0,this.Ect={},this.Lct={},this.lk=0,this.Pct=t=>{0},this.o2=t,this.NS=i,this.PB=e,this.zct=s,this.Aot=n}},_Q=class extends fQ{Rct(t,i,e,s,n,r,h,o){var a;const u=r.Jnt.reduce(((t,i)=>t||i.o),void 0);var c;const d=null!=(c=null!=u?u:null==(a=r.o)?void 0:a.toString())?c:"";return this.MS.yS(t,d,i,e,s,n,h,o)}gn(){for(const t of this.Z.og)this.MS.bS(t);return super.gn()}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.MS=r}},gQ=class{get nt(){return this.Dl}async TS(t){if(t.Rg!==pg.Ru)return;const i=function(t,i){return kv(i)||t===Kn.APPLICATION_TTML_XML||t===Kn.TEXT_VTT?new zR:Wn(t,i)?new PR:void 0}(t.CF,t.wst);if(i){const e=this.Qct(i);return this.Fct(e),await e.$n(t),e}}Qct(t){return new _Q(this.o2,this.NS,this.PB,t,this.Aot,this.MS)}Fct(t){this.Yct.push(t),this.Dl.Dz(t.Z)}async tr(){for(const t of this.Yct.slice())await t.tr();No(this.Yct),this.Dl.tr()}async gn(){for(const t of this.Yct)await t.gn();No(this.Yct),this.Dl.gn()}constructor(t,i,e,s,n){this.Yct=[],this.Dl=new Ln([]),this.o2=t,this.NS=i,this.PB=e,this.Aot=s,this.MS=n}},wQ=class extends wn{constructor(t){super(l.lw),this.error=t}};!function(t){t.Wx="static",t.Hx="dynamic"}(Le||(Le={})),(Sr||(Sr={})).Gct="Vct";var AQ=class extends wn{constructor(){super(Sr.Gct)}},vQ=0;var at,bi,mQ,pQ=class extends wn{constructor(t,i){super(l.Aw),this.representation=t,this.previousRepresentation=i}};function yQ(t,i,e){return e===at.Wct?e:i!==bi.Hct&&i!==bi.qct||e!==at.Xct&&e!==at.Zct?t?i===bi.Kct?at.Jct:i===bi.$ct?at.tdt:at.Wct:at.idt:at.Zct}function MQ(t,i,e,s){const n={byte:e};let r=at.Xct;const h=[],o=31&dn(i,n,s);n.byte+=1;for(let e=0;e<o;e+=1){const o=dn(i,n,s),a=4&o,u=3&o;r=yQ(Boolean(a),u,r);const c=dn(i,n,s),d=dn(i,n,s);h.push({edt:t,yM:-1,sdt:!e,ndt:Boolean(a),Rg:u,rdt:r,hdt:c,odt:d})}return h}function TQ(t,i,e){const s=dn(t,i,e);if(!S(s))return String.fromCharCode(s)}function NQ(t){const i=t.JZ,e={byte:t.ZZ},s=t.KZ,n=dn(i,e,s);if(255===n&&(e.byte+=1),181!==n)return;const r=dk(i,e);if(47!==r&&49!==r)return;if(49===r){const t=function(t,i,e){let s="",n=e;for(;n>0;)n-=1,s+=TQ(t,i);return s}(i,e,4);if("GA94"!==t)return}if(3!==dn(i,e,s))return;47===r&&(e.byte+=1);const h=t;return h.adt=e.byte,h}function DQ(t){return 4===t.qZ}function IQ(t){const i=t.filter(DQ).map(NQ).filter(Yt),e=[];for(const t of i)e.push(...MQ(t.HZ,t.JZ,t.adt,t.KZ));return e}!function(t){t[t.Wct=0]="Wct",t[t.Xct=1]="Xct",t[t.Zct=2]="Zct",t[t.tdt=3]="tdt",t[t.Jct=4]="Jct",t[t.idt=5]="idt"}(at||(at={})),function(t){t[t.Hct=0]="Hct",t[t.qct=1]="qct",t[t.Kct=2]="Kct",t[t.$ct=3]="$ct"}(bi||(bi={})),function(t){t[t.udt=47]="udt",t[t.cdt=49]="cdt"}(mQ||(mQ={}));var SQ="und";function EQ(t){if(t===SQ)return;const i=t.toLowerCase();for(const t of bQ)if(t[1]===i||t[2]===i||t["2T"]===i||t["2B"]===i||t[3]===i)return t}var bQ=[{l:"Abkhaz",lh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",lh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",lh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",lh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",lh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",lh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",lh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",lh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",lh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",lh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",lh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",lh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",lh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",lh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",lh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",lh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",lh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",lh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",lh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",lh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",lh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",lh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",lh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",lh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",lh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",lh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",lh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",lh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",lh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",lh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",lh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",lh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",lh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",lh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",lh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",lh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",lh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",lh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",lh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",lh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",lh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",lh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",lh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",lh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",lh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",lh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",lh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",lh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",lh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",lh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",lh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",lh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",lh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",lh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",lh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",lh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",lh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",lh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",lh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",lh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",lh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",lh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",lh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",lh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",lh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",lh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",lh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",lh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",lh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",lh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",lh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",lh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",lh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",lh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",lh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",lh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",lh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",lh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",lh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",lh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",lh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",lh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",lh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",lh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",lh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",lh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",lh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",lh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",lh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",lh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",lh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",lh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",lh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",lh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",lh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",lh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",lh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",lh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",lh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",lh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",lh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",lh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",lh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",lh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",lh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",lh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",lh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",lh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",lh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",lh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",lh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",lh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",lh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",lh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",lh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",lh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",lh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",lh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",lh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",lh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",lh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",lh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",lh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",lh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",lh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",lh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",lh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",lh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",lh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",lh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",lh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",lh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",lh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",lh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",lh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",lh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",lh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",lh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",lh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",lh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",lh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",lh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",lh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",lh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",lh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",lh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",lh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",lh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",lh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",lh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",lh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",lh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",lh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",lh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",lh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",lh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",lh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",lh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",lh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",lh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",lh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",lh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",lh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",lh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",lh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",lh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",lh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",lh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",lh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",lh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",lh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",lh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",lh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",lh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",lh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",lh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",lh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",lh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",lh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",lh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",lh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",lh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",lh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",lh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];function LQ(t){var i;const e=null!=(i=function(t){const i=t.NZ,e=new fk;return e.RZ(i,0,i.byteLength),Mk(e).fK}(t))?i:24;return t.ddt/e}function kQ(t){return t.Rg===Po.Jv}var CQ;function xQ(t,i,e,s,n){const r=function(t,i,e,s){const n=e.ddt,r=qo.fromNumber(t.xM||0),h=s.ST(Ri.xN(r,n));return{ldt:s.vN(),fdt:s,_dt:h,gdt:s}}(t,0,e,s),h=Ri.ON(t.ct||0,e.ddt),o=t.lp||0,a=!(65536&o)&&1!==(o>>24&3);let u;const c=ha(n),d=new L;for(;d.Ku<c.byteLength;){const t=oo(c,d);if((31&ol(c,d,1))===lk.nK){const i=new fk;i.RZ(n,d.Ku-1,d.Ku+t-1);const e=new yk(i),s=wk(r._dt,e);u=u||[],u.push(...IQ(s))}d.Im(t-1)}return Tt({},r,{ct:h.vN(),wdt:h,Adt:r._dt.vN(),vdt:r.ldt,mdt:a,pdt:u,ydt:!1,Mdt:!1})}function OQ(t){return{Qp:t.np.Qp,ddt:t.Pp.np.kp}}function jQ(t){return t.Rg===Po.Av}!function(t){t[t.SAMPLE_DEPENDS_ON_UNKNOWN=0]="SAMPLE_DEPENDS_ON_UNKNOWN",t[t.SAMPLE_DEPENDS_ON_OTHERS=1]="SAMPLE_DEPENDS_ON_OTHERS",t[t.SAMPLE_DEPENDS_ON_NO_OTHER=2]="SAMPLE_DEPENDS_ON_NO_OTHER",t[t.SAMPLE_DEPENDS_ON_RESERVED=3]="SAMPLE_DEPENDS_ON_RESERVED"}(CQ||(CQ={}));var zQ=class{oN(t){return this.H6===t.H6&&this.z6===t.z6}constructor(t,i){this.H6=t,this.z6=i}},PQ=class{get a8(){return this.Tdt}get s8(){return[this]}get h8(){return this.tq}get Q6(){return this.Ndt}get G6(){return new zQ(this.Q6.H6,this.Q6.z6+this.a8.length-1)}Ddt(t){this.Tdt+=t}Idt(t){for(const i of t)this.Ddt(i)}constructor(t,i){this.tq=t,this.Ndt=i,this.Tdt=""}};function BQ(t,i){return t===i||t.a8===i.a8&&t.Q6.oN(i.Q6)&&fl(t.h8,i.h8)}function RQ(t,i){return t===i||t.Q6.oN(i.Q6)&&t.G6.oN(i.G6)&&Gd(t.s8,i.s8,BQ)}var UQ=class extends Gs{aN(t){return Gd(this.O,t.O,RQ)}constructor(t,i,e){super(t,i,e,!1)}},QQ=class{Sdt(t){return t.CD(this)}Edt(t){return ge(t,((t,i)=>t.CD(this,i)))}bdt(t,i){return new FQ(t,i).Ldt()}},FQ=class{Ldt(){if(this.kdt)return[];for(let t=0;t<this.H6.length;t++)this.Cdt(t);return this.xdt(),this.Odt}jdt(t){this.zdt=new PQ(ij,new zQ(this.Pdt,t))}xdt(){this.zdt&&(this.Odt.push(this.zdt),this.zdt=null)}Cdt(t){const i=this.H6[t];YQ(i)?this.zdt&&this.xdt():(this.zdt||this.jdt(t),this.zdt.Ddt(i))}get kdt(){return this.H6.every(YQ)}constructor(t,i){this.H6=t,this.Pdt=i,this.Odt=[],this.zdt=null}};function YQ(t){return null==t}var GQ=class{static Bdt(t,i,e){if(i>=e)return;const s=ge(t,((t,i)=>new FQ(t.map((t=>t?t.Rdt():null)),i).Ldt()));return 0!==s.length?new UQ(i,e,s):void 0}},go="black",VQ="white",WQ=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce(((t,i)=>(t[i[0]]=i[1],t)),{}),HQ=class{Udt(t){for(let i=0;i<wc;i++)t&&(this.Qdt[i]=t.Qdt[i])}oN(t){for(let i=0;i<wc;i++)if(this.Qdt[i]!==t.Qdt[i])return!1;return!0}Fdt(){for(let t=0;t<wc;t++)if(null!==this.Qdt[t])return!1;return!0}Ydt(t){this.Gdt!==t&&(this.Gdt=t),this.Gdt<0?this.Gdt=0:this.Gdt>wc&&(this.Gdt=31)}Vdt(t){const i=this.Gdt+t;this.Ydt(i)}Wdt(){this.Vdt(-1),this.Qdt[this.Gdt]=null}Ddt(t){t>=144&&this.Wdt();const i=function(t){return WQ[t]?String.fromCharCode(WQ[t]):String.fromCharCode(t)}(t);this.addParsedChar(i)}addParsedChar(t){this.Gdt>=wc||(32===Number(t)?(this.Qdt[this.Gdt]=this.Hdt?"</i>":"<i>",this.Hdt=!this.Hdt):this.Qdt[this.Gdt]=t,this.Vdt(1))}qdt(t){for(let i=t;i<wc;i++)this.Qdt[i]=null}Vb(){this.qdt(0),this.Gdt=0}Xdt(){this.qdt(this.Gdt)}Zdt(t,i){const e=this.Qdt;let s=null;for(let n=0;n<wc;n++){const r=e[n];null===r?s=null:(s||(s={Gh:n,Xh:t,ji:0,Ti:1,Qdt:[[]]},i.push(s)),s.Qdt[0].push(r),s.ji++)}}CD(t,i){return t.bdt(this.Qdt,i)}constructor(){this.Qdt=[],this.Gdt=0;for(let t=0;t<wc;t++)this.Qdt.push(null);this.Hdt=!1}};var gr,qQ=class{Kdt(t,i){const e="CC"+(this.Jdt<<1|this.$dt+1);if(t>=i)return null;const s=(new QQ).Edt(this.tlt.slice(1));return 0===s.length?null:{YT:new UQ(t,i,s),lV:e,ilt:this.Jdt<<1|this.$dt+1}}tr(){this.elt(),this.slt=1}nlt(){return this.slt}rlt(t){this.slt=t}Ydt(t){this.tlt[this.slt].Ydt(t)}Vdt(t){this.tlt[this.slt].Vdt(t)}hlt(){return this.olt}ult(t){this.olt=t}Ddt(t,i){if(i<32||i>127)return;let e="";switch(t){case 0:e=void 0!==KQ[i]?KQ[i]:String.fromCharCode(i);break;case 1:e=JQ[i];break;case 2:this.clt(),e=$Q[i];break;case 3:this.clt(),e=tF[i]}e&&this.tlt[this.slt].addParsedChar(e)}clt(){this.tlt[this.slt].Wdt()}dlt(t,i,e){if(t>=i)for(let s=e-1;s>=0;s--)this.tlt[t+s]=this.tlt[i+s];else for(let s=0;s<e;s++)this.tlt[t+s]=this.tlt[i+s]}llt(t,i){for(let e=0;e<=i;e++)this.tlt[t+e]=new HQ}elt(){this.llt(0,XQ)}flt(){this.slt=this.olt>0?this.olt:0,this.elt()}_lt(t){this.glt=t}wlt(t){this.Alt=t}vlt(t){this.plt=t}ylt(t){this.Mlt=t}constructor(t,i){this.tlt=new Array(XQ+1);for(let t=0;t<=XQ;t++)this.tlt[t]=new HQ;this.slt=1,this.olt=0,this.Jdt=t,this.$dt=i,this.glt=!1,this.Alt=!1,this.plt=VQ,this.Mlt=go,this.tr()}},XQ=15;!function(t){t[t.Tlt=0]="Tlt",t[t.Nlt=1]="Nlt",t[t.Dlt=2]="Dlt",t[t.Ilt=3]="Ilt"}(gr||(gr={}));var ZQ,KQ={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},JQ={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},$Q={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},tF={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"},iF=class{tr(){this.Slt=!0,this.Elt=0,this.X0=0,this.blt=this.Llt,this.klt=void 0,this.Llt.tr(),this.Clt.tr(),this.xlt.tr()}Olt(t,i){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|i>>5&1]}jlt(t,i){const e=this.Olt(t,i),s=(30&i)>>1;let n=VQ,r=!1;s<7?n=rF[s]:7===s&&(r=!0);const h=1==(1&i);if(4===this.X0)return;const o=this.blt;if(3===this.X0&&e!==o.nlt()){const t=1+o.nlt()-o.hlt(),i=1+e-o.hlt();o.dlt(i,t,o.hlt()),o.llt(0,i-1),o.llt(e+1,XQ-e)}o.rlt(e);const a=sj[t<<1&14|i>>5&1]-1;if(a<0)return;const u=function(t,i){const e=i>95?i-96:i-64;return{j6:ej[e].j6,O6:ej[e].O6,z6:ej[e].z6,H6:t}}(a,i);o.Ydt(u.z6),this.blt._lt(h),this.blt.wlt(r),this.blt.vlt(n),this.blt.ylt(go)}zlt(t,i){this.blt._lt(!1),this.blt.wlt(!1),this.blt.vlt(VQ);const e=this.Plt(t,gr.Tlt," ".charCodeAt(0));let s=VQ,n=!1;const r=1==(1&i);return s=rF[(14&i)>>1],"white_italics"===s&&(s="white",n=!0),this.blt._lt(r),this.blt.wlt(n),this.blt.vlt(s),e}Plt(t,i,e){if(this.blt.Ddt(i,e),2===this.X0||3===this.X0){const i=this.Blt(this.blt,this.Elt,t);return this.Elt=t,i}return null}Blt(t,i,e){return this.Slt?null:2===this.X0||3===this.X0?t.Kdt(e,e+10):t.Kdt(i,e)}Rlt(t,i){let e=go;0==(7&t)&&(e=nF[(14&i)>>1]),this.blt.ylt(e)}Ult(t){const i=eF,e=t.Qlt,s=t.Flt;let n=null;switch(e){case i.RCL:this.Ylt();break;case i.BS:this.Glt();break;case i.AOD:case i.AON:case i.DER:break;case i.RU2:n=this.Vlt(2,s);break;case i.RU3:n=this.Vlt(3,s);break;case i.RU4:n=this.Vlt(4,s);break;case i.FON:n=this.Wlt(s);break;case i.RDC:this.Hlt(s);break;case i.TR:this.qlt();break;case i.RTD:this.Xlt();break;case i.EDM:n=this.Zlt(s);break;case i.CR:n=this.Klt(s);break;case i.ENM:this.Jlt();break;case i.EOC:n=this.$lt(s)}return n}Klt(t){const i=this.blt;if(3!==this.X0)return null;const e=this.Blt(i,this.Elt,t),s=i.nlt()-i.hlt()+1;return i.dlt(s-1,s,i.hlt()),i.llt(0,s-1),i.llt(i.nlt(),XQ-i.nlt()),this.Elt=t,e}Vlt(t,i){this.blt=this.Llt;const e=this.blt;let s=null;return 3!==this.X0&&4!==this.X0&&(s=this.Blt(e,this.Elt,i),this.Llt.flt(),this.Clt.flt(),this.Slt=!1,e.rlt(XQ)),this.X0=3,e.ult(t),s}Wlt(t){return this.Plt(t,gr.Tlt," ".charCodeAt(0))}Zlt(t){const i=this.Llt;let e=null;return 4!==this.X0&&(e=this.Blt(i,this.Elt,t)),i.elt(),this.Slt=!1,e}Hlt(t){this.X0=2,this.blt=this.Llt,this.blt.ult(0),this.Elt=t}Jlt(){this.Clt.elt()}$lt(t){let i=null;4!==this.X0&&(i=this.Blt(this.Llt,this.Elt,t));const e=this.Clt;return this.Clt=this.Llt,this.Llt=e,this.Ylt(),this.Elt=t,i}Ylt(){this.X0=1,this.blt=this.Clt,this.blt.ult(0)}Glt(){this.blt.clt()}qlt(){this.xlt.tr(),this.Slt=!1,this.Xlt()}Xlt(){this.blt=this.xlt,this.X0=4}tft(t,i,e){return this.blt.Ddt(gr.Tlt,i),this.Plt(t,gr.Tlt,e)}ift(t,i,e){const s=1&i?gr.Ilt:gr.Dlt;return this.Plt(t,s,e)}eft(t){const i=t.sft,e=t.Qlt,s=t.Flt;if(this.klt===(i<<8|e))return this.klt=void 0,null;if(this.klt=i<<8|e,this.nft(i,e))this.jlt(i,e);else{if(this.rft(i,e))return this.zlt(s,e);if(this.hft(i,e))this.Rlt(i,e);else{if(this.oft(i,e))return this.Plt(s,gr.Nlt,e);if(this.aft(i,e))return this.ift(s,i,e);if(this.uft(i,e))return this.Ult(t);this.isTabOffset(i)&&this.blt.Vdt(e-32)}}return null}isTabOffset(t){return 23===t||31===t}uft(t,i){return 20==(246&t)&&32==(240&i)}nft(t,i){return 16==(240&t)&&64==(192&i)}rft(t,i){return 17==(247&t)&&32==(240&i)}hft(t,i){return 16==(247&t)&&32==(240&i)||23==(247&t)&&45==(255&i)}oft(t,i){return 17==(247&t)&&48==(240&i)}aft(t,i){return 18==(246&t)&&32==(224&i)}static cft(t){return 16==(112&t)}constructor(t,i){this.X0=0,this.xlt=new qQ(t,i),this.Llt=new qQ(t,i),this.Clt=new qQ(t,i),this.blt=this.Llt,this.Elt=0,this.klt=void 0,this.Slt=!1}},eF={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47};!function(t){t[t.FP=0]="FP",t[t.dft=1]="dft",t[t.lft=2]="lft",t[t.fft=3]="fft",t[t.Ru=4]="Ru"}(ZQ||(ZQ={}));var sF,nF=["black","green","blue","cyan","red","yellow","magenta","black"],rF=["white","green","blue","cyan","red","yellow","magenta","white_italics"],hF=class{Rdt(){return this._ft}gft(){return this.glt}wft(){return this.Alt}Aft(){return this.Mlt}vft(){return this.plt}constructor(t,i,e,s,n){this._ft=t,this.glt=i,this.Alt=e,this.Mlt=s,this.plt=n}},oF=class{mft(t,i,e,s,n,r,h){this.ZP=t,this.pft=i,this.yft=e,this.Mft=s,this.Tft=n,this.Nft=r,this.Dft=h}Ift(){this.Sft=[];for(let t=0;t<uF;t++)this.Sft.push(this.Eft())}Eft(){const t=[];for(let i=0;i<aF;i++)t.push(null);return t}bft(t){this.Lft()&&(this.Sft[this.slt][this.kft]=new hF(t,this.glt,this.Alt,this.Mlt,this.plt),this.kft++)}Cft(){this.Lft()&&(this.kft<=0&&this.slt<=0||(this.kft<=0?(this.kft=this.Dft-1,this.slt--):this.kft--,this.Sft[this.slt][this.kft]=null))}Lft(){const t=this.slt<this.Nft&&this.slt>=0,i=this.kft<this.Dft&&this.kft>=0;return t&&i}xft(){return this.ZP}Oft(t){let i=0;for(let e=t;e<uF;e++,i++)this.Sft[i]=this.Sft[e];for(let e=0;e<t;e++,i++)this.Sft[i]=this.Eft()}jft(){if(this.slt+1>=this.Nft)return this.Oft(1),void(this.kft=0);this.slt++,this.kft=0}zft(){this.Sft[this.slt]=this.Eft(),this.kft=0}Kdt(t,i){if(this.tN>=t)return null;const e=GQ.Bdt(this.Sft,this.tN,t);return e?(this.Pft(t),{YT:e,lV:"svc"+i,ilt:i}):null}Bft(t,i){this.slt=t,this.kft=i}Rft(t){this.Mlt=t}Uft(t){this.plt=t}Qft(t){this.glt=t}Fft(t){this.Alt=t}Yft(){this.slt=0,this.kft=0,this.glt=!1,this.Alt=!1,this.plt=VQ,this.Mlt=go}Gft(t){this.Vft=t}Wft(){this.ZP=!0}be(){this.ZP=!1}wh(){this.ZP=!this.ZP}Pft(t){this.tN=t}constructor(t){this.Hft=t,this.ZP=!1,this.Tft=!1,this.yft=0,this.pft=0,this.Mft=0,this.Nft=0,this.Dft=0,this.Vft=2,this.Sft=[],this.tN=0,this.slt=0,this.kft=0,this.Alt=!1,this.glt=!1,this.plt=VQ,this.Mlt=go,this.Ift()}};!function(t){t[t.qft=0]="qft",t[t.Xft=1]="Xft",t[t.Zft=2]="Zft",t[t.Kft=3]="Kft"}(sF||(sF={}));var aF=42,uF=15,cF=class{Jft(t){const i=t.$ft();let e=i.jM;const s=i.Flt;if(e===gF){e=e<<16|t.$ft().jM}return e>=0&&e<=31?this.t_t(e,s):e>=128&&e<=159?this.i_t(t,e,s):(e>=4096&&e<=4127?this.e_t(t,255&e):e>=4224&&e<=4255?this.s_t(t,255&e):e>=32&&e<=127?this.n_t(e):e>=160&&e<=255?this.r_t(e):e>=4128&&e<=4223?this.h_t(255&e):e>=4256&&e<=4351&&this.o_t(255&e),null)}n_t(t){this.a_t&&(127!==t?this.a_t.bft(String.fromCharCode(t)):this.a_t.bft("\u266a"))}r_t(t){this.a_t&&this.a_t.bft(String.fromCharCode(t))}h_t(t){if(!this.a_t)return;if(void 0===wF[t])return void this.a_t.bft("_");const i=wF[t];this.a_t.bft(i)}o_t(t){this.a_t&&(160===t?this.a_t.bft("[CC]"):this.a_t.bft("_"))}t_t(t,i){if(!this.a_t)return null;const e=this.a_t;let s=null;switch(t){case dF:e.Cft();break;case fF:e.xft()&&(s=e.Kdt(i,this.u_t)),e.jft();break;case _F:e.xft()&&(s=e.Kdt(i,this.u_t)),e.zft();break;case lF:e.xft()&&(s=e.Kdt(i,this.u_t)),e.Ift(),e.Bft(0,0)}return s}i_t(t,i,e){if(i>=128&&i<=135){const t=7&i;this.c_t(t)}else{if(136===i){const i=t.$ft().jM;return this.d_t(i,e)}if(137===i){const i=t.$ft().jM;this.l_t(i,e)}else{if(138===i){const i=t.$ft().jM;return this.f_t(i,e)}if(139===i){const i=t.$ft().jM;return this.__t(i,e)}if(140===i){const i=t.$ft().jM;return this.g_t(i,e)}if(143===i)return this.tr(e);if(144===i)this.w_t(t);else if(145===i)this.A_t(t);else if(146===i)this.Bft(t);else if(151===i)this.v_t(t);else if(i>=152&&i<=159){const s=(15&i)-8;this.mft(t,s,e)}}}return null}e_t(t,i){i>=8&&i<=15?t.Hm(1):i>=16&&i<=23?t.Hm(2):i>=24&&i<=31&&t.Hm(3)}s_t(t,i){i>=128&&i<=135?t.Hm(4):i>=136&&i<=143&&t.Hm(5)}c_t(t){this.m_t[t]&&(this.a_t=this.m_t[t])}*p_t(t){for(let i=0;i<8;i++){1==(1&t)&&this.m_t[i]&&(yield i),t>>=1}}d_t(t,i){let e=null;for(const s of this.p_t(t)){const t=this.m_t[s];t.xft()&&(e=t.Kdt(i,this.u_t)),t.Ift()}return e}l_t(t,i){for(const e of this.p_t(t)){const t=this.m_t[e];t.xft()||t.Pft(i),t.Wft()}}f_t(t,i){let e=null;for(const s of this.p_t(t)){const t=this.m_t[s];t.xft()&&(e=t.Kdt(i,this.u_t)),t.be()}return e}__t(t,i){let e=null;for(const s of this.p_t(t)){const t=this.m_t[s];t.xft()?e=t.Kdt(i,this.u_t):t.Pft(i),t.wh()}return e}g_t(t,i){let e=null;for(const s of this.p_t(t)){const t=this.m_t[s];t.xft()&&(e=t.Kdt(i,this.u_t)),this.m_t[s]=void 0}return e}tr(t){const i=this.g_t(255,t);return this.Vb(),i}Vb(){this.a_t=void 0,this.m_t=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}w_t(t){t.Hm(1);const i=t.$ft().jM;if(!this.a_t)return;const e=(128&i)>0,s=(64&i)>0;this.a_t.Fft(e),this.a_t.Qft(s)}A_t(t){const i=t.$ft().jM,e=t.$ft().jM;if(t.Hm(1),!this.a_t)return;const s=3&i,n=(12&i)>>2,r=(48&i)>>4,h=3&e,o=(12&e)>>2,a=(48&e)>>4,u=this.y_t(r,n,s),c=this.y_t(a,o,h);this.a_t.Uft(u),this.a_t.Rft(c)}Bft(t){const i=t.$ft().jM,e=t.$ft().jM;if(!this.a_t)return;const s=15&i,n=63&e;this.a_t.Bft(s,n)}v_t(t){t.Hm(1),t.Hm(1);const i=t.$ft().jM;if(t.Hm(1),!this.a_t)return;const e=3&i;this.a_t.Gft(e)}mft(t,i,e){const s=void 0!==this.m_t[i];if(!s){const t=new oF(i);t.Pft(e),this.m_t[i]=t}const n=t.$ft().jM,r=t.$ft().jM,h=t.$ft().jM,o=t.$ft().jM,a=t.$ft().jM,u=t.$ft().jM,c=(32&n)>0,d=127&r,l=(128&r)>0,f=h,_=1+(15&o),g=(240&o)>>4,w=1+(63&a);s&&0===(7&u)||this.m_t[i].Yft(),this.m_t[i].mft(c,d,f,g,l,_,w),this.a_t=this.m_t[i]}y_t(t,i,e){const s={0:0,1:0,2:1,3:1};return AF[s[t]<<2|s[i]<<1|s[e]]}constructor(t){this.u_t=t,this.m_t=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.a_t=void 0}},dF=8,lF=12,fF=13,_F=14,gF=16,wF={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},AF=["black","blue","green","cyan","red","magenta","yellow","white"],vF=class{M_t(t){if(t.Rg===bi.$ct){const i=63&t.jM;return this.T_t=2*i-1,void(this.N_t=[])}if(this.N_t&&(this.T_t>0&&(this.N_t.push(t),this.T_t--),0===this.T_t)){const t=new mF(this.N_t);this.D_t.push(t),this.N_t=null,this.T_t=0}}I_t(){return this.D_t}S_t(){this.D_t=[]}Vb(){this.D_t=[],this.N_t=[],this.T_t=0}constructor(){this.D_t=[],this.N_t=null,this.T_t=0}},mF=class{E_t(){return this.b_t<this.L_t.length}k_t(){return this.b_t}$ft(){if(!this.E_t())throw new $i(Ui.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.L_t[this.b_t++]}Hm(t){if(this.b_t+t>this.L_t.length)throw new $i(Ui.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this.b_t+=t}constructor(t){this.b_t=0,this.L_t=t}},pF=class{Vb(){this.C_t=0,this.x_t=[],this.O_t=[],this.j_t.Vb(),this.tr(),this.z_t.forEach((t=>{t.Vb()}))}tr(){this.P_t=0,this.B_t=0,this.R_t.forEach((t=>{t.tr()}))}U_t(t,i){if(t.ndt){const e=t.hdt,s=t.odt,n=t.Rg;n===bi.Hct||n===bi.qct?this.x_t.push({Flt:i,Rg:n,sft:e,Qlt:s,Q_t:this.x_t.length}):this.F_t&&(this.O_t.push({Flt:i,Rg:n,jM:e,Q_t:this.O_t.length}),this.O_t.push({Flt:i,Rg:bi.Kct,jM:s,Q_t:this.O_t.length}))}}CQ(){const t=[];this.x_t.sort(((t,i)=>t.Flt-i.Flt||t.Q_t-i.Q_t)),this.O_t.sort(((t,i)=>t.Flt-i.Flt||t.Q_t-i.Q_t));for(const i of this.x_t){const e=this.Y_t(i);e&&t.push(e)}for(const t of this.O_t)this.j_t.M_t(t);const i=this.j_t.I_t();for(const e of i){const i=this.G_t(e);t.push(...i)}return this.j_t.S_t(),this.x_t=[],this.O_t=[],t}Y_t(t){const i=t.Rg;if(iF.cft(t.sft)){const e=t.sft>>3&1;0===i?this.P_t=e:this.B_t=e}const e="CC"+(i<<1|(i?this.B_t:this.P_t)+1),s=this.R_t.get(e);return 255===t.sft&&255===t.Qlt||!t.sft&&!t.Qlt||!this.V_t(t.sft)||!this.V_t(t.Qlt)?(++this.C_t>=45&&this.tr(),null):(this.C_t=0,t.sft&=127,t.Qlt&=127,t.sft||t.Qlt?iF.cft(t.sft)?s.eft(t):s.tft(t.Flt,t.sft,t.Qlt):null)}G_t(t){const i=[];try{for(;t.E_t();){const e=t.$ft().jM;let s=(224&e)>>5;const n=31&e;if(7===s&&0!==n){s=63&t.$ft().jM}if(0!==s){if(!this.z_t.has(s)){const t=new cF(s);this.z_t.set(s,t)}const e=this.z_t.get(s),r=t.k_t();for(;t.k_t()-r<n;){const s=e.Jft(t);s&&i.push(s)}}}}catch(t){if(!(t instanceof $i&&t.code===Ui.SUBTITLE_PARSE_ERROR))throw t}return i}V_t(t){let i=0;for(;t;)i^=1&t,t>>=1;return 1===i}constructor(){this.F_t=!1,this.x_t=[],this.O_t=[],this.j_t=new vF,this.C_t=0,this.R_t=Zd({CC1:new iF(0,0),CC2:new iF(0,1),CC3:new iF(1,0),CC4:new iF(1,1)}),this.P_t=0,this.B_t=0,this.z_t=pt(),this.tr()}},yF=class extends wn{constructor(t,i){super("W_t"),this.ilt=t,this.YT=i}},MF=Ri.mD(.1),TF=class extends Pl{H_t(t,i){this.q_t.U_t(t,i)}CQ(){const t=this.q_t.CQ();for(const i of t)this.Co(new yF(i.ilt,i.YT))}tr(){this.q_t.Vb()}gn(){this.Vo(),this.q_t.Vb()}constructor(){super(),this.q_t=new pF}},NF=class extends TF{X_t(t,i,e,s){const n=this.Z_t(t,s);this.K_t(n,i,e),this.CQ()}Z_t(t,i){const e=t.slice().sort(nj),s=this.J_t;if(0===s.length)return e;if(0===e.length)return s;let n;const r=s[0].P6,h=s[s.length-1].P6,o=e[0].P6,a=s[0].Grt===e[0].Grt;if(h.bN(o).IN().DN(Ri.mD(2.5*i))&&a)n=s.concat(e).sort(nj);else if(o.yN(r)){let t=0;for(;t<s.length&&s[t].P6.DN(o);)t++;let i=!1,r=!1;for(let n=t,h=0;n<s.length&&h<e.length;n++,h++)DF(s[n],e[h])?i=!0:r=!0;const h=i&&!r,a=i&&r;!i&&r?n=s.concat(e).sort(nj):h?n=s.slice(0,t).concat(e):(n=e,a&&this.tr())}else n=e,this.tr();return n}K_t(t,i,e){for(let s=0;s<t.length;s++){const n=t[s],r=n.P6.vN();if(!e&&i-r<MF.vN())return void(this.J_t=t.slice(s));this.H_t(n,r)}this.J_t=[]}constructor(...t){super(...t),this.J_t=[]}};function DF(t,i){return t.P6.oN(i.P6)&&t.Rg===i.Rg&&t.hdt===i.hdt&&t.odt===i.odt}var IF=class extends St{$_t(t){return this.tgt.get(t)}igt(t){let i=this.tgt.get(t.B6);return i||(i=this.egt(t),this.tgt.set(t.B6,i)),i}egt(t){const i=[Nu.Ig],e=EQ(t.R6);let s,n=e?e.l:"";t.sgt&&(n="easy "+n,i.push(Nu.Cg)),s=t.kh?"CC "+t.kh:n?"CC "+n:"CC"+t.B6;const r=this.MS.yS(jo.yI,s,s,t.R6,!1,Kc.CEA608,void 0,i);return this.tt(r),r}hnt(t){const i=no.fp(ha(t));this.ngt=function(t){for(const i of t.Z){const t=OQ(i),e=i.Pp.qp.Kp.$p.ey;let s=Zt(e,(t=>t.Rg===Po.Lv));if(!s){const t=e.filter((t=>t.Rg===Po.Kv)),i=Zt(t,(t=>{var i;return(null==(i=t.iM)?void 0:i.Rg)===Po.Lv}));i&&(s=i.iM)}if(!s)continue;const n=ck(ha(s.Fy.zm),new L),r=s.Gy;return Tt({},t,{Qp:i.np.Qp,Fy:dg(s.Fy.zm),ji:s.ji,Ti:s.Ti,lM:r&&r.lM,dM:r&&r.dM,YK:n.pZ,rgt:n.yZ,GK:n.MZ,NZ:n.NZ[0],DZ:n.DZ[0]})}}(Zt(i,jQ))}Aut(t,i,e,s,n,r){var h;if(!this.ngt)return;if(!S(this.hgt)&&Ua(this.hgt,i,1e-5))return;S(this.ogt)||Ua(this.ogt,i,.1)||this.agt.tr();const o=function(t,i,e,s,n){const r=[],h=i.filter(kQ),o=s(e);for(const i of h){const s=Zt(i.Z,(t=>t.np.Qp===e.Qp));if(!s)continue;const h=s.np.gM||0,u=s.np.wM||0;let c=s.IM?s.IM.IM:qo.ZERO;var a;const d=i.pM+(null!=(a=s.np.SM)?a:qo.ZERO).toNumber();for(const a of s.DM){let s=d+(a.pM||0);for(const d of a.CM){const a=d.rp||u,l=new fk;l.RZ(t,s,s+a);const f=Ri.xN(c,e.ddt);l.XD=n(d,i,e,f,Nh(t,s,s+a)),r.push(l),s+=a,c=c.add(d.ct||h||o)}}}return r}(t,no.fp(ha(t)),this.ngt,LQ,xQ);var a;const u=null!=(a=null==(h=Wd(o,(t=>t.XD.ct)))?void 0:h.XD.ct)?a:0,c=function(t){const i=[];for(const e of t)e.XD.pdt&&i.push(...e.XD.pdt),delete e.XD.pdt;for(let t=0;t<i.length;t+=1)i[t].yM=t;return i}(o),d=Ri.mD(s),l=[];for(const t of c)l.push(Tt({},t,{Grt:n,P6:t.edt.ST(d)}));this.agt.X_t(l,e,r,u),this.hgt=i,this.ogt=e}tr(){return this.agt.tr(),this.tgt.forEach((t=>{t.gn(),this.it(t),this.MS.bS(t)})),this.tgt.clear(),this.ngt=void 0,this.hgt=NaN,this.ogt=NaN,super.tr()}gn(){return this.agt.fn("W_t",this.ugt),this.agt.gn(),super.gn()}constructor(t){super(),this.ngt=void 0,this.hgt=NaN,this.ogt=NaN,this.ugt=t=>{const i=this.igt({B6:t.ilt,R6:""}),e=t.YT;for(const t of i.L.og)e.GT<t.GT&&e.VT>t.GT?e.VT=t.GT:e.GT>t.GT&&t.VT>e.GT?t.VT=e.GT:e.GT===t.GT&&(e.VT=t.VT);i.SS(e)},this.MS=t,this.tgt=pt(),this.agt=new NF,this.agt.yn("W_t",this.ugt)}},SF=/(.*)=(.*)/,EF=/(.*):(.*)/;function bF(t){if(!t)return[];const i=[],e=t.trim().split(";");for(const t of e){const e=t.match(SF);if(e){const[,t,s]=e;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(EF)){const[,i,e]=t.match(EF);switch(i){case"lang":n=e;break;case"er":r=Boolean(Number(e))}}i.push({B6:Number(t),R6:n,sgt:r})}}return i}var LF={1:1,2:3,3:2,4:4},kF="urn:scte:dash:cc:cea-608:2015",CF="urn:scte:dash:cc:cea-708:2015";var xF=class extends yo{fa(){return new OF(this.Grt&&this.Grt.va)}constructor(t,i,e){super(Ce.J_),this.Grt=t,this.Fot=i,this.cgt=e}},OF=class extends wn{constructor(t){super("activequalitychanged"),this.quality=t}},jF=[l.jh,er.H_,l.Sw],zF=class extends Pl{dgt(t){const i=this.kct.sht;for(const e of i.Lt.Jnt)if(i.fat.oat(t,e))return e}gn(){this.Vo(),this.sA.fn(jF,this.lgt)}constructor(t,i){super(),this.lgt=t=>{const i=this.fgt,e=this.dgt(t.currentTime)||this.kct.$rt;e&&i!==e&&(this.fgt=e,e.Grt&&this.Co(new xF(e.Grt,null==e?void 0:e.va,null==i?void 0:i.va)))},this.sA=t,this.sA.yn(jF,this.lgt),this.kct=i}};function PF(t,i,e){const s=new Th(ha(t),new L),n=At.ep(s,Po.Av);if(!n)return;const r=At.Zm(n.zm),h=Zt(r,(t=>t.Rg===Po.mv)),o=Zt(r,(t=>t.Rg===Po.lm));if(!h)return;const a=At.ep(h.zm,Po.yv);if(!a)return;const u=At.ep(a.zm,Po.Nv);if(!u)return;const c=At.ep(u.zm,Po.Dv);if(!c)return;const d=At.Zm(c.zm),l=Zt(d,(t=>t.Rg===Po.Iv));if(!l)return;const f=At.cp(l.zm,Po.Iv,!1),_=new Th(ha(f.zm),new L);_.Hm(4);const g=At.Zm(_),w=[];for(const t of g){if(t.Rg===Po.Zv||t.Rg===Po.Kv)return;t.Rg===Po.Lv?w.push({_gt:t,ggt:Po.Kv}):t.Rg===Po.Yv&&w.push({_gt:t,ggt:Po.Zv})}if(!function(t,i){return void 0===t&&void 0!==i&&i.length>0}(o,i)&&0===w.length)return;let A=it(t);const v=Zt(r,(t=>t.Rg===Po.Ev)),m=v?At.ep(v.zm,Po.bv):void 0,p=m?function(t){const i=t.zm.Em();return i.Hm(4),i.Hm(4),i.Um()}(m):1,y=Zt(d,(t=>t.Rg===Po.Sv));y&&function(t,i,e){const s=UF(ha(t),i),n=At.ip(s,new L),r=n.zm;r.Hm(4);const h=r.Um();for(let t=0;t<h;t++){r.Hm(4),r.Hm(4);const t=r.Pm.Em(),i=r.Um();ea(r.zm,t,i+e)}}(A,y,w.length),m&&function(t,i,e){const s=UF(ha(t),i),n=At.ip(s,new L),r=n.zm;r.Hm(4),r.Hm(4),ea(r.zm,r.Pm,e)}(A,m,1),A=function(t,i,e,s){if(e||!s)return t;let n=t;for(const t of s)n=BF(n,i,new j(t));return n}(A,n,o,i);const M=[n,h,a,u,c,l];for(let t=w.length-1;t>=0;t--){const i=w[t];A=RF(A,i._gt,l,M,i.ggt,e)}return{wgt:A,Agt:{vgt:w.length,_M:p}}}function BF(t,i,e){const s=M_(t,e,i.zm.zm.byteOffset+i.zm.zm.byteLength);return QF(UF(ha(s),i),e.byteLength),s}function RF(t,i,e,s,n,r){const h=function(t,i,e){0;const s=t.zm.zm,n=WF(),r=new j(s.byteLength+n.byteLength),h=ha(r);r.set(Zn(s),0),QF(h,n.byteLength),ig(h,new L(XF),i),r.set(n,s.byteLength),ig(h,new L(s.byteLength+HF),t.Rg),e&&bn(h,new L(s.byteLength+qF),e);return r}(i,n,r),o=M_(t,h,i.zm.zm.byteOffset),a=ha(o);!function(t,i){const e=At.ip(t,new L),s=At.cp(e.zm,Po.Iv,!1),n=ha(s.zm),r=n.getUint32(0);n.setUint32(0,r+i)}(UF(a,e),1);for(const t of s)QF(UF(a,t),h.byteLength);return o}function UF(t,i){const e=i.zm.zm.byteOffset;return qe(t,e,e+i.zm.zm.byteLength)}function QF(t,i){const e=new L,s=oo(t,e);if(0===s);else if(1===s){e.Im(4);const s=Fe(t,e.Em());K_(t,e,s.add(i))}else e.Sm(0),ea(t,e,s+i)}var FF=class extends QL{start(t){this.UH=t}transform(t){this.lX(t),this.mgt()}flush(){this._X(),this.mgt()}MX(t){return t===Po.Jv}NX(t){let i=it(Zn(t.zm.zm));const e=At.ip(ha(i),new L);i=YF(i,e,this.pgt),this.ygt.push(i)}IX(t){this.ygt.push(t)}mgt(){for(const t of function(t){if(t.length<2)return t;const i=[];let{buffer:e,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const h=t[r];e===h.buffer&&s+n===h.byteOffset?n+=h.byteLength:(i.push(new j(e,s,n)),({buffer:e,byteOffset:s,byteLength:n}=h))}return i.push(new j(e,s,n)),i}(this.ygt))this.UH.enqueue(t);No(this.ygt)}constructor(t){super(),this.ygt=[],this.pgt=t}};function YF(t,i,e){let s=t;const n=At.Zm(i.zm);for(let t=n.length-1;t>=0;t--){const r=n[t];r.Rg===Po.tm&&(s=GF(s,r,i,e))}return s}function GF(t,i,e,s){const n=UF(ha(t),i),r=At.ip(n,new L),h=At.Zm(r.zm),o=Zt(h,(t=>t.Rg===Po.im));if(!o)return t;const a=o.zm,u=a.Pm.Em(),c=a.Um(),{flags:d}=gg(c);a.Hm(4),d.Cm(ui.BASE_DATA_OFFSET_PRESENT)&&a.Hm(8);const l=a.Pm.Em();if(d.Cm(ui.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const i=oo(a.zm,l);return ea(a.zm,a.Pm,i+s.vgt),t}{ea(a.zm,u,c|ui.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new j(4);ha(n).setUint32(0,s._M+s.vgt);const r=a.zm.byteOffset+l.Ku;for(const t of h.filter((t=>t.Rg===Po.nm)))VF(t,n.byteLength);for(const s of[o,i,e])QF(UF(ha(t),s),n.byteLength);return M_(t,n,r)}}function VF(t,i){const e=t.zm,s=e.Um(),{flags:n}=gg(s);if(e.Hm(4),n.Cm(Ee.DATA_OFFSET_PRESENT)){const t=e.Em().Um();ea(e.zm,e.Pm,t+i)}}var WF=qc((()=>new j([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),HF=16,qF=64,XF=4,ZF=[hh.ha,l.Mw,l.Tw,l.Dw,l.Yg],KF=class extends Pl{get Rnt(){return this.Unt}get o(){return this.CT}get e$(){return this.s$}get nt(){return this.Mgt}get xct(){return function(t){const i=29.97,e=1024,s=44100;return t===pg.ym?s/e:i}(this.s$)}get Cct(){return 1/this.xct}get Rt(){return Boolean(this.Unt&&this.Unt.Rt)}get Rq(){const t=this.kct?this.kct.sht.Rq.sat:Ai.SB();return this.Tgt().cB(t)}get wf(){let t=this.Ngt();const i=this.Dgt;return void 0!==i&&t.nB().gr(i)&&(t=t.cB(Ai.DB(i))),t}get Kot(){return UR(this.Ngt(),this.Rq.cB(this.Igt)).uB(2*this.Cct)}get Igt(){const t=this.Dgt;if(t&&isFinite(t)){const i=this.Sgt.jn;if(isFinite(i)&&t<i)return new Ai([t,i],[!1,!0])}return Ai.SB()}get t_(){const t=this.Unt;if(!t)return Ai.DB(0);const i=t.Got.Oct,e=t.Got.jct;if(void 0===e||void 0===i)return Ai.DB(0);const s=e;let n=i>=t.Got.zat.jn?_.max(i,this.jn):i;return n=_.max(s,n),Ai.IB(s,n).nB()}get jz(){return this.Kot.dA(this.Mf)}get eat(){return this.Sgt.eat}get Mf(){return this.sA.Mf}get Cn(){return this.Unt?this.Unt.Got.zat.Cn:NaN}get jn(){const t=this.Egt(),i=this.Dgt;return void 0===t?NaN:void 0!==i?i:t}Egt(){var t;return null==(t=this.Unt)?void 0:t.Got.zat.jn}get Ti(){return this.Sgt.Ti}get ji(){return this.Sgt.ji}get bgt(){return this.Dgt}ght(){return void 0!==this.kct&&this.kct.ght}iat(){if(void 0===this.Dgt)return!1;const t=this.Ngt().nB(),i=t.fB(this.Dgt);return!(i<0)&&t.Cn(i)!==this.Dgt}t$(){const t=this.Sgt.eat,i=this.Ngt().Sn(t);this.Dgt=i.U>0?i.jn(i.U-1):0;const e=t.jn(0);isFinite(e)&&this.Dgt<e&&this.Qq(this.Dgt,e),this.Lgt()}async Aut(t,i,e,s){const n=e.ant.UD,r=this.kgt(t,i,e,n,s),h=this.Cgt(t,i,e,n,s),[o]=await Zc([h,r]);return o}async kgt(t,i,e,s,n){if(!as(e.CF))return;let r;if(t.Rg===ji.VI){const i=t.zm._ot(),e=await i.cj(n);r=new j(e)}else r=new j(t.zm.znt);const h=[];if(void 0!==this.xgt&&(this.xgt.Aut(r,i.GT,s),h.push(this.xgt)),void 0!==this.Ogt){const t=e.jat(i);this.Ogt.Aut(r,i.GT,i.VT,s,e.Grt,t),h.push(this.Ogt)}Rv(this.wf,h)}async Cgt(t,i,e,s,n){var r;let h;if(Bo(n),t.Rg===ji.VI){let i=t.zm.lV;this.jgt&&(i=function(t,i){return t.pipeThrough(new Ko(new FF(i)))}(i,this.jgt)),h={Rg:ji.VI,zm:i}}else{let i=new j(t.zm.znt);this.jgt&&(i=function(t,i){let e=it(t);const s=new Th(ha(e),new L),n=At.Zm(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.Rg===Po.Jv&&(e=YF(e,s,i))}return e}(i,this.jgt)),h={Rg:ji.aq,zm:i}}const o={n9:i.GT,ct:i.ct,UD:s,GK:null==(r=e.Grt)?void 0:r.Mg},a=this.qst.wf;await this.zgt(),await this.qst._J(h,o,n);return function(t,i,e,s){let n,r,h=i.lB(t.nB());h=h.lB(e.lB(i)),!1;0===h.U?(n=s.VT,r=n):(n=h.Cn(0),r=h.jn(0));return{Vut:n,Wut:r}}(a,this.qst.wf,this.qst.n$,i)}async hnt(t,i,e){var s;Bo(e),this.Ogt&&this.Ogt.hnt(new j(t.znt));let n=new j(t.znt);if(this.Pgt(i)){const t=this.Sgt.Bgt;let i,e=[];t&&(e=ge(t.Rgt,(t=>t.Mz)),i=t.Ugt.zO?nI(t.Ugt.zO):void 0);const s=PF(n,e,i);s?(this.jgt=s.Agt,n=s.wgt):this.jgt=void 0}const r={Rg:ji.aq,zm:n};await this.zgt(),await this.qst.AJ(r,{GK:null==(s=i.Grt)?void 0:s.Mg},e)}mut(t,i,e){return this.qst.ET(t,i,e)}Qq(t,i){this.qst.o$(t,i)}Fq(t,i){this.qst.a$(t,i)}Ngt(){return this.qst?this.qst.wf:Ai.SB()}Tgt(){return this.qst?this.qst.n$:Ai.SB()}Qgt(){return this.qst?this.qst.ET(0,1/0):Promise.resolve()}Fgt(){return this.qst&&(this.qst.fn(_e.hq,this.Ds),this.qst=void 0),Promise.resolve()}async Ygt(t){var i;const e=xU.fut(null!=(i=t.mct)?i:t.Jnt,this.eut).CF;this.qst||(this.qst=this.Sgt.Ggt(e),this.qst.yn(_e.hq,this.Ds),this.cut=new iQ(this.qst)),await this.zgt()}$n(t,i){const e=new na;i&&e.Zd(i),this.ES.Xd(),this.ES=e;const s=this.Vgt(t,this.Wgt,e.Hd);return this.Wgt=s,s}Hgt(t){if(qt(this.qgt,Kc.CEA608))return;const i=t.Got.hct;if(function(t){return t.some((t=>t.vst===kF||t.vst===CF))}(i)){this.Ogt=new IF(this.MS);const t=function(t){const i=[];for(const e of t)if(e.vst===kF){const t=hj(e.jM);for(const e of t)i.push(e)}else if(e.vst===CF){const t=bF(e.jM);for(const e of t)if(e.B6<=4){const t=LF[e.B6];i.push(Tt({},e,{B6:t}))}}return i}(i);for(const i of t)this.Ogt.igt(i);this.Mgt.Dz(this.Ogt.Z)}}async Vgt(t,i,e){Bo(e),i&&await i.catch(El),this.Unt===t&&this.Xgt||(await this.Zgt(),Bo(e),await this.Qgt(),Bo(e),t&&await this.TS(t))}async Zgt(){const t=this.Unt;this.Unt=void 0,this.Xgt=!1,this.Dgt=void 0,t&&(t.fn(Ce.rg,this.Kgt),t.Dct(!1),t.fn(Ce.NO_QUALITY,this.Ds)),this.Jgt&&(this.Jgt.gn(),this.Jgt=void 0),this.kct&&(await this.kct.gn(),this.kct=void 0),this.Ogt&&(this.Mgt.Ez(this.Ogt.Z),await this.Ogt.gn())}async TS(t){this.Unt=t,this.Hgt(t),t.yn(Ce.rg,this.Kgt),t.yn(Ce.NO_QUALITY,this.Ds),await this.Ygt(t),this.kct=this.$gt(t),this.kct.yn(ZF,this.Ds),this.kct.yn("Vrt",this.Lgt),this.kct.rht=t.mct,this.Jgt=new zF(this.sA,this.kct),this.Jgt.yn(Ce.J_,this._ct),t.Dct(!0),this.Xgt=!0}$gt(t){return new $U(this,this.sA,this.sA,this.NS,this.PB,this.nct,this.Aot,this.aut,this.eut,this.cut,this.zut).h9(t)}async tr(t){this.ES.Xd(),this.Wgt&&(await this.Wgt.catch(El),this.Wgt=void 0),await this.Zgt(),t||await this.Qgt(),await this.Fgt()}async twt(){await this.Zgt()}iwt(t){const i=t.Lt.mct;if(void 0===i)return this.ewt(t);if(i.some((t=>this.cut.gq(t))))return this.ewt(t);this.Co(new wn("swt"))}ewt(t){this.kct&&this.Unt&&this.Unt===t.Lt&&(this.kct.rht=this.Unt.mct)}async pht(t){this.kct&&await this.kct.pht(t)}async Mht(t){this.kct&&await this.kct.Mht(t)}UW(){const t=this.wf.NB;return this.PB.UW(t)}zgt(){const t=this.Sgt.eat,i=_.max(0,t.Cn(0)-.1),e=t.jn(0)+.01;return this.qst.kJ(i,e)}Pgt(t){if(!as(t.CF))return!1;if(this.Sgt.Y4)return!0;return void 0!==this.Sgt.Bgt}async gn(t){this.Vo();try{await this.tr(t),await this.twt()}catch(t){}}constructor(t,i,e,s,n,r,h,o,a,u,c,d){super(),this.Unt=void 0,this.kct=void 0,this.Xgt=!1,this.ES=new na,this.Wgt=void 0,this.Dgt=void 0,this.qst=void 0,this.cut=new eQ,this.jgt=void 0,this.Ogt=void 0,this.Mgt=new Ln([]),this.Lgt=()=>{!this.ght()&&this.iat()&&this.Sgt.Lgt()},this._ct=t=>{this.Unt._ct(t),this.Co(new pQ(t.Fot,t.cgt))},this.Kgt=t=>{this.iwt(t)},this.CT=function(){const t=vQ;return vQ+=1,t}(),this.s$=t,this.NS=s,this.PB=n,this.Sgt=i,this.sA=e,this.Aot=r,this.MS=h,this.xgt=o,this.aut=a,this.eut=a?Fg(t,a):void 0,this.zut=u,this.qgt=c,this.nct=d}};var JF,$F=class extends Pl{bW(t,i){return this.nwt(t,i)}async nwt(t,i){for(const i of t)this.rwt(i);await this.$n(i);for(const t of this.owt.hwt)t.Rg===pg.Ru&&(t.Jnt&&0!==t.Jnt.length?await this.awt.TS(t):this.Co(new wQ("No supported representation found in the AdaptationSet with mimetype : "+t.Rg)))}get Mg(){return this.xT}get ct(){return this.sA.ct}uwt(t){return new KF(t,this,this.sA,this.NS,this.PB,this.Aot,this.MS,this.xgt,this.cwt,this.zut,this.qgt,this.nct)}ght(){return this.Yct.some((t=>t.ght()))}iat(){return 0!==this.Yct.length&&this.Yct.every((t=>t.iat()))}Lgt(){this.dwt()&&this.Co(new AQ)}Ggt(t){if(Df(t,"audio")){if(this.zJ.V$)return this.zJ.V$}else if(Df(t,"video")&&this.zJ.W$)return this.zJ.W$;throw new g("Cannot allocate source buffer for mime type "+t)}lwt(t){t.yn([hh.ha,l.Aw,l.Mw,l.Tw,l.Dw,l.Yg],this.Ds),t.yn(_e.hq,this.fwt),t.yn("swt",this.Ds)}get Rt(){return this.Yct.some((t=>t.Rt))}async _wt(t){await Promise.all(this.Yct.map((i=>i.gn(t)))),No(this.Yct)}get ht(){return this.lT}get wf(){if(0===this.Yct.length)return Ai.SB();const t=this.Yct.map((t=>t.wf));let i=Ai.IB(0,1/0);for(const e of t)i=i.Sn(e);if(0===i.U)return i;if(this.iat()){const t=i.Sn(this.eat);if(0===t.U)return i;const e=t.jn(t.U-1);let s=0;for(const t of this.Yct)s=_.max(s,t.bgt);e<=s&&(i=i.cB(new Ai([e,s],[!0,!0])))}return i}get Y4(){return this.sA.Y4}get Mf(){return this.sA.Mf}get Bgt(){return this.gwt}get jn(){if(this.wwt){const t=this.ct;if(!S(t)&&t!==Oa)return t}if(!this.Yct.length)return NaN;let t=0;for(const i of this.Yct)t=_.max(t,i.jn);return t}get wwt(){const t=this.owt.Xut;if(t.Rg===Le.Hx)return!1;const i=t.Awt;return 0!==i.length&&this.owt===i[i.length-1]}get t_(){if(!this.Yct.length)return Ai.SB();let t=new Ai([0,1/0]);for(const i of this.Yct)t=t.Sn(i.t_);if(t.U>0&&this.wwt&&isFinite(this.ct)){const i=this.ct,e=t.jn(t.U-1);i>e&&(t=t.cB(Ai.IB(e,i).nB()))}return t}get yc(){return this.owt}get nt(){return this.Dl}get rt(){return this._T}get ji(){return this.vu.ji}get Ti(){return this.vu.Ti}get jz(){const t=this.Mf,i=this.wf,e=i.fB(t);if(-1!==e)return{Cn:i.Cn(e),jn:i.jn(e)}}get eat(){const t=this.owt.Cn,i=this.wwt?1/0:this.owt.jn;return Ai.IB(t,i)}dwt(){if(this.ght())return!1;if(!this.iat())return!1;const t=this.wf;if(0===t.U)return!1;const i=this.Mf;if(this.wwt)return t.Cn(t.U-1)<=i;{const e=t.Sn(this.eat);if(0===e.U)return!0;const s=e.Cn(e.U-1),n=e.jn(e.U-1)+.1;return s<=i&&i<=n}}get vwt(){return this.mwt}async pht(t){this.mwt||(this.mwt=!0,await Promise.all(this.Yct.map((i=>i.pht(t)))))}async Mht(t){this.mwt&&(this.mwt=!1,await Promise.all(this.Yct.map((i=>i.Mht(t)))))}async gn(t){this.sA.fn(l.Lw,this.pwt),this.Vo(),this.owt.fn(Ou.Qrt,this.Ds),this.ywt.Xd(),this.Wgt&&(await this.Wgt.catch(El),this.Wgt=void 0),await this._wt(t),await this.awt.gn(),this.lT.gn(),this._T.gn(),this.Dl.gn(),this.Mwt()}rwt(t){this.Twt.push(t),t.yn("Nwt",this.Dwt);const i=t.Rg===pg.ym?this.lT:this._T;for(const e of t.Z)i.tt(e)}Iwt(t){const i=t.Rg===pg.ym?this.lT:this._T;for(const e of t.Z)i.it(e),e.gn();t.gn(),To(this.Twt,t)}Mwt(){for(let t=this.Twt.length-1;t>=0;t--)this.Iwt(this.Twt[t])}get Swt(){return this.Twt.map((t=>t.Rnt)).filter(Yt)}get Ewt(){return this.Yct.map((t=>t.Rnt)).filter(Yt)}$n(t,i){return this.ywt.Xd(),this.ywt=new na,i&&this.ywt.Zd(i),this.Wgt=Wi(this.wit(t,this.Wgt,this.ywt.Hd),this.ywt).catch(this.bwt),this.Wgt}async wit(t,i,e){i&&await i.catch(El),Bo(e);const s=[],n=this.Yct.slice(),r=t.slice();No(this.Yct);for(const t of n){const i=t.Rnt;i&&qt(r,i)?(this.Yct.push(t),s.push(t.$n(i,e)),To(r,i)):(this.Dl.Ez(t.nt),await t.gn(),Bo(e))}for(const t of r){const i=this.uwt(t.aht);this.Dl.Dz(i.nt),this.Yct.push(i),this.lwt(i),s.push(i.$n(t,e))}await Promise.all(s)}async Aq(t,i,e){this.zJ!==e&&(this.zJ=e,await this._wt(!1)),await this.$n(t),this.gwt=i}constructor(t,i,e,s,n,r,h,o,a,u,c,d,f){super(),this.lT=new yi,this._T=new yi,this.Twt=[],this.ywt=new na,this.mwt=!0,this.Yct=[],this.Wgt=void 0,this.fwt=ho((()=>{this.Co(new ki(this.Mf))}),350),this.Dwt=t=>{const i=t.Lwt.Rnt;if(i)for(const t of this.Twt){var e;t.Rnt&&t.Rnt!==i&&t.Rg===(null==(e=i.gct)?void 0:e.Rg)&&(t.fn("Nwt",this.Dwt),t.Rnt.Rt=!1,t.yn("Nwt",this.Dwt))}this.Ds(t)},this.bwt=t=>{ut(t)||this.Co(new Bi(new $i(Ui.MEDIA_LOAD_ERROR,t.message,t)))},this.pwt=t=>{const i=t.y4;if(i)for(const t of this.Ewt){if((t.Got.Ast||[]).some((t=>t.zO&&Gi(ve(i),nI(t.zO)))))return void this.Co(new hn(new Qr(Ui.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions")))}},this.NS=e,this.PB=s,this.Aot=n,this.sA=t,this.xT=Iw(),this.Twt=[],this.owt=h,this.gwt=o,this.MS=u,this.awt=new gQ(t,e,s,n,u),this.Dl=new Ln([this.awt.nt]),this.zut=d,this.qgt=f,this.owt.yn(Ou.Qrt,this.Ds),this.vu=a,this.zJ=i,this.nct=r.lowLatency,this.xgt=c,this.cwt=r.abr,this.sA.yn(l.Lw,this.pwt)}},tY=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,iY=class t{static fp(i){const e=i.match(tY);if(!e)throw new g("The given value could not be parsed as a valid DateTimeInterval");const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,h=Number(e[4])||0,o=Number(e[5])||0,a=Number(e[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*h+60*o+a)}get ldt(){return Ri.mD(this.kwt,1e3)}Cwt(){return this.kwt}xwt(){return 1e3*this.kwt}constructor(t){this.kwt=t}};!function(t){t.Owt="progressive",t.jwt="interlaced",t.rT="unknown"}(JF||(JF={}));var eY=class{vN(){return this.zwt/this.Pwt}constructor(t,i){this.zwt=t,this.Pwt=i}},sY=/^(?:true|false)$/i,nY=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function qn(t){if(void 0!==t)return iY.fp(t)}function rY(t){if(void 0===t)return;const i=t.match(nY);if(!i)throw new g("The given value could not be parsed as a valid Date");const[,e,s,n,r,h,o,a,u,c,d,l]=i,f=("-"===e?-1:1)*Number(s),w=Number(n)-1,A=Number(r),v=Number(h);let m=Number(o);const p=Number(a),y=Number("0."+(u||"")),M=_.round(1e3*y);if(c){m-=("-"===c?-1:1)*(60*Number(d)+Number(l))}const T=new Date(Date.UTC(f,w,A,v,m,p,M));if(S(T.getTime()))throw new g("The given value could not be parsed as a valid Date");return T}function hY(t){if(!t)return;const i=/(\d+)-(\d+)/.exec(t);return i?[aa(i[1]),aa(i[2])]:void 0}function oY(t){if(void 0!==t){if(!S(Number(t)))try{return qo.fromString(t,!0)}catch(t){}throw new g("The given value could not be parsed as a valid unsigned long")}}function aa(t){if(void 0===t)return;const i=Number(t);if(!S(i))return i;throw new g("The given value could not be parsed as a valid Number")}function aY(t){if(void 0===t)return;const i=t.split("/"),e=Number(i[0]),s=Number(i[1]||1);if(!S(e)&&!S(s))return new eY(e,s);throw new g("The given value could not be parsed as a valid frame rate")}function Wa(t){if(void 0!==t){if(sY.test(t))return"true"===t.toLowerCase();if(!S(x(t)))return Boolean(x(t));throw new g("The given value could not be parsed as a valid Boolean.")}}function uY(t){return{zu:t.sj,Bwt:Wa(t.vI("availabilityTimeComplete")),Rwt:aa(t.vI("availabilityTimeOffset"))}}function cY(t){return t.map(uY)}function dY(t){const i=yY(t),e=function(t,i,e,s){let n=t.AI(e,i);return void 0===n&&(n=t.vI(s+":"+i)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=nv(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=Aa(n.sj)),!s){const i=nv(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==i&&(s=function(t){const i=Al(t.sj),e=new j([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=i.length,n=12+e.length+4+s,r=new ArrayBuffer(n),h=new j(r),o=new DataView(r),a=new L;ea(o,a,n),ea(o,a,1886614376),ea(o,a,0),bn(o,a,e),ea(o,a,s),bn(o,a,i),!1;return h.buffer}(i))}return{zO:e,Uwt:s,vst:i.vst,jM:i.jM}}function lY(t){return{Qwt:t.vI("sourceURL"),jht:hY(t.vI("range"))}}function fY(t,i){const e=t.vI("d"),s=t.vI("t"),n=aa(t.vI("r"));i.push({ct:e,GT:s,Fwt:n})}function _Y(t){return{pot:t.vI("index"),Ywt:hY(t.vI("indexRange")),Pp:t.vI("media"),Gwt:hY(t.vI("mediaRange"))}}function gY(t){const i=AY(t),e=function(t){const i=t.map(_Y);return i.length>0?i:void 0}(t.lI("SegmentURL"));return Tt({},i,{Vwt:e,Wwt:t.vI("xlink:href"),Hwt:t.vI("xlink:actuate")})}function wY(t){const i=Wa(t.vI("availabilityTimeComplete")),e=aa(t.vI("availabilityTimeOffset")),s=hY(t.vI("indexRange")),n=Wa(t.vI("indexRangeExact")),r=t.lI("Initialization");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.dj+" element can not have more than one Initialization element.");const h=1===r.length?lY(r[0]):void 0,o=oY(t.vI("presentationTimeOffset")),a=t.lI("RepresentationIndex");if(a.length>1)throw new g("The provided MPEG-DASH document's "+t.dj+" element can not have more than one RepresentationIndex element.");return{Bwt:i,Rwt:e,Ywt:s,qwt:n,Xwt:h,Zwt:o,Kwt:1===a.length?lY(a[0]):void 0,Jwt:qn(t.vI("timeShiftBufferDepth")),kp:aa(t.vI("timescale"))}}function AY(t){const i=wY(t),e=t.lI("BitstreamSwitching"),s=e.length>0?lY(e[0]):void 0,n=aa(t.vI("duration")),r=t.lI("SegmentTimeline");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.dj+" element can not have more than one SegmentTimeline element.");const h=1===r.length?function(t){const i=[],e=t.lI("S");for(const t of e)fY(t,i);return i}(r[0]):void 0;return Tt({},i,{$wt:s,ct:n,ant:h,tAt:aa(t.vI("startNumber")),iAt:aa(t.vI("endNumber"))})}function vY(t){return{eAt:function(t){if(!t)return;const i=t.split(/\s/);return i.length>1?(i.length=2,i.map(aa)):1===i.length?i.map(aa)[0]:void 0}(t.vI("audioSamplingRate")),wst:t.vI("codecs"),sAt:Wa(t.vI("codingDependency")),Ast:function(t){if(0!==t.length)return t.map(dY)}(t.lI("ContentProtection")),nAt:function(t){return t.map(MY)}(t.lI("EssentialProperty")),rAt:function(t){return t.map(TY)}(t.lI("SupplementalProperty")),xct:aY(t.vI("frameRate")),Ti:aa(t.vI("height")),hAt:aa(t.vI("maxPlayoutRate")),oAt:aa(t.vI("maximumSAPPeriod")),CF:t.vI("mimeType"),aAt:t.vI("profiles"),uAt:t.vI("sar"),cAt:function(t){switch(t){case JF.Owt:case JF.jwt:case JF.rT:return t;default:return}}(t.vI("scanType")),dAt:t.vI("segmentProfiles"),lAt:aa(t.vI("startWithSAP")),ji:aa(t.vI("width"))}}function mY(t){const i=cY(t.lI("BaseURL")),e=t.lI("SegmentBase");if(e.length>1)throw new g("The provided MPEG-DASH document's "+t._I+" element can not have more than one SegmentBase element.");const s=1===e.length?wY(e[0]):void 0,n=function(t){const i=t.map(gY);return i.length>0?i:void 0}(t.lI("SegmentList")),r=t.lI("SegmentTemplate");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t._I+" element can not have more than one SegmentTemplate element.");const h=1===r.length?function(t){return Tt({},AY(t),{fAt:t.vI("bitstreamSwitching"),_At:t.vI("index"),gAt:t.vI("initialization"),wAt:t.vI("media")})}(r[0]):void 0;return{AAt:i,vAt:s,mAt:n,pAt:h}}function pY(t){const i=vY(t),e=mY(t),s=aa(t.vI("bandwidth")),n=t.vI("dependencyId"),r=t.vI("id"),h=t.vI("mediaStreamStructureId"),o=aa(t.vI("qualityRanking"));if(t.lI("SegmentBase").length>1)throw new g("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return Tt({},i,e,{wz:s,yAt:n,o:r,MAt:h,TAt:o})}function yY(t){return{vst:t.vI("schemeIdUri"),jM:t.vI("value")}}function MY(t){return yY(t)}function TY(t){return yY(t)}function NY(t){return yY(t)}function DY(t){return yY(t)}function IY(t){var i;const e=vY(t),s=mY(t),n=function(t){return t.map(DY)}(t.lI("Accessibility")),r=Wa(t.vI("bitstreamSwitching")),h=t.vI("contentType"),o=aa(t.vI("group")),a=aa(t.vI("id")),u=(null==(i=t.lI("Label")[0])?void 0:i.sj)||"",c=t.vI("lang"),d=aa(t.vI("maxBandwidth")),l=aY(t.vI("maxFrameRate")),f=aa(t.vI("maxHeight")),_=aa(t.vI("maxWidth")),w=aa(t.vI("minBandwidth")),A=aY(t.vI("minFrameRate")),v=aa(t.vI("minHeight")),m=aa(t.vI("minWidth")),p=t.vI("par"),y=function(t){return t.map(pY)}(t.lI("Representation"));if(0===y.length)throw new g("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const M=function(t){return t.map(NY)}(t.lI("Role")),T=Wa(t.vI("segmentAlignment"))||!1,N=aa(t.vI("selectionPriority")),D=N||1,I=Wa(t.vI("subsegmentAlignment"))||!1;let S;try{S=aa(t.vI("subsegmentStartsWithSAP"))}catch(t){}return Tt({},e,s,{hct:n,$wt:r,qz:h,gct:o,o:a,kh:u,gs:c,NAt:d,DAt:l,IAt:f,SAt:_,EAt:w,bAt:A,LAt:v,kAt:m,CAt:p,Jnt:y,Bct:M,xAt:T,LP:D,OAt:I,jAt:S,zAt:t.vI("xlink:actuate")||"onRequest",PAt:t.vI("xlink:href")})}function SY(t){const i=oY(t.vI("presentationTime"))||qo.ZERO,e=oY(t.vI("duration")),s=aa(t.vI("id")),n=function(t){const i=t.fI,e={};for(let t=0;t<i.length;t++)e[i[t].l]=i[t].jM;return e}(t),r=t.sj;return{zM:i,ct:e,o:s,fI:n,zm:""!==r.trim()?r:t.vI("messageData")||""}}function EY(t){return{PAt:t.vI("xlink:href"),zAt:t.vI("xlink:actuate"),vst:t.vI("schemeIdUri"),jM:t.vI("value"),kp:aa(t.vI("timescale")),Zwt:oY(t.vI("presentationTimeOffset")),xF:t.lI("Event").map(SY)}}function bY(t){const i=mY(t),e=t.lI("AssetIdentifier");if(e.length>1)throw new g("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===e.length?function(t){return yY(t)}(e[0]):void 0,n=function(t){return t.map(IY)}(t.lI("AdaptationSet")),r=Wa(t.vI("bitstreamSwitching")),h=qn(t.vI("duration")),o=function(t){return t.map(EY)}(t.lI("EventStream")),a=t.vI("id"),u=qn(t.vI("start")),c=(t.lI("Subset"),t.vI("xlink:href"));return Tt({},i,{Ynt:n,BAt:s,$wt:r,ct:h,RAt:o,o:a,Cn:u,zAt:t.vI("xlink:actuate"),PAt:c})}function LY(t){const i=t.vI("schemeIdUri");if(!i)return;return{vst:i,jM:t.vI("value")}}function kY(t,i){const e=rY(t.vI("availabilityEndTime")),s=rY(t.vI("availabilityStartTime")),n=cY(t.lI("BaseURL")),r=t.vI("id"),h=function(t){return t.map((t=>""+t.sj))}(t.lI("Location")),o=qn(t.vI("maxSegmentDuration")),a=qn(t.vI("maxSubsegmentDuration")),u=qn(t.vI("mediaPresentationDuration")),c=(t.lI("Metrics"),qn(t.vI("minBufferTime")));if(!c)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const d=qn(t.vI("minimumUpdatePeriod")),l=function(t){return t.map((t=>bY(t)))}(t.lI("Period"));if(!l.length)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.vI("profiles");if(!f)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const _=rY(t.vI("publishTime")),w=qn(t.vI("suggestedPresentationDelay")),A=qn(t.vI("timeShiftBufferDepth")),v=function(t){switch(t){case Le.Wx:case Le.Hx:return t;default:return}}(t.vI("type")),m=function(t){const i=[];for(const e of t){const t=LY(e);t&&i.push(t)}return i}(t.lI("UTCTiming")),p=function(t){if(0===t.length)return;const i=t[0],e=i.lI("Latency");if(0===e.length)return;const s=function(t){const i=t[0],e=aa(i.vI("target"));if(void 0===e)return;const s=aa(i.vI("min")),n=aa(i.vI("max"));return{UAt:e,fD:s,lD:n}}(e);if(void 0===s)return;const n=function(t){if(0===t.length)return;const i=t[0],e=aa(i.vI("max")),s=aa(i.vI("min"));return{fD:s,lD:e}}(i.lI("PlaybackRate"));return{QAt:s,Gf:n}}(t.lI("ServiceDescription"));return{FAt:e,YAt:s,AAt:n,o:r,GAt:h,VAt:i,WAt:o,HAt:a,qAt:u,XAt:c,ZAt:d,Awt:l,aAt:f,KAt:_,JAt:w,Jwt:A,Rg:v,$At:m,tvt:p}}var CY=class{ivt(t,e){return function(t,i){if(!t)throw new g("The provided MPEG-DASH document does not contain a valid MPD root element.");return kY(t,i)}(i.gI(t).wI,e)}};function xY(t){return{get bandwidth(){return t.wz},get codecs(){return t.wst},get id(){return t.o},get uid(){return t.Mg},get name(){return t.kh},get averageBandwidth(){return t.evt},get label(){return t.kh},set label(i){t.kh=Va(i)},get available(){return t.vet},get score(){return t.svt},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}function OY(t){return xl(xY(t),{get height(){return t.Ti},get width(){return t.ji},get frameRate(){return t.xct},get firstFrame(){return t.nvt}})}function jY(t){return xl(xY(t),{get audioSamplingRate(){return t.eAt}})}var zY=class extends wn{constructor(t){super("update"),this.quality=t}},PY=class extends Pl{get kh(){return this.OT}set kh(t){this.OT!==t&&(this.OT=t,this.Co(new zY(this.va)))}get evt(){}get vet(){return this.rvt}get svt(){}QI(){this.rvt=!1,this.Co(new zY(this.va))}constructor(t,i,e,s,n){super(),this.o=t,this.wz=i,this.wst=e,this.ovt=n,this.Mg=bw(),this.OT=s||"",this.rvt=!0}},BY=class extends PY{get va(){return this.Xa||(this.Xa=OY(this)),this.Xa}constructor(t,i,e,s,n,r,h,o,a=0){super(t,i,e,s,n),this.xct=r,this.ji=h,this.Ti=o,this.nvt=a,this.Xa=void 0}},RY=class extends PY{get va(){return this.Xa||(this.Xa=jY(this)),this.Xa}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.eAt=r,this.Xa=void 0}};var pr=class extends Pl{get avt(){const t=this.uvt();return null==t?void 0:t.Cn}get cvt(){const t=this.uvt();return null==t?void 0:t.jn}constructor(...t){super(...t),this.dvt=t=>{this.Co(t)}}},UY=class extends pr{get Got(){return this.vht}get eAt(){var t;return null!=(t=this.lvt.zm.eAt)?t:this.Got.eAt}get wz(){return this.lvt.zm.wz||0}get wst(){const t=this.lvt.zm;return t.wst?[t.wst]:this.Got.wst}get fvt(){const t=this.lvt.zm;return t.wst?[t.wst]:[]}get sit(){return this.lvt.zm.wst||this.Got.sit}get sAt(){return this.lvt.zm.sAt||this.Got.sAt}get Ast(){return this.lvt.zm.Ast||this.Got.Ast}get qz(){return this.CF+'; codecs="'+this.sit+'"'}get nAt(){const t=this.lvt.zm;return t.nAt.length?t.nAt:this.Got.nAt}get va(){return this.Xa||(this.Xa=function(t){return{get id(){return t.o},get type(){return t.Rg},get bandwidth(){return t.wz},get width(){return t.ji},get height(){return t.Ti},get frameRate(){var i,e;return null!=(e=null==(i=t.xct)?void 0:i.vN())?e:NaN},get audioSamplingRate(){return t.eAt}}}(this))}get xct(){var t;return null!=(t=this.lvt.zm.xct)?t:this.Got.xct}get Ti(){return this.lvt.zm.Ti||this.Got.Ti}get o(){return this.lvt.zm.o||""}get $ut(){return this._vt}set $ut(t){this._vt=t}get Jut(){const t=this.lvt.gvt();if(t)return{zu:t.zu,jht:t.jht,AS:this.Xut.AS}}get hAt(){return this.lvt.zm.hAt||this.Got.hAt||1}get oAt(){return this.lvt.zm.oAt||this.Got.oAt}get Xut(){return this.zat.Xut}get CF(){return this.lvt.zm.CF||this.Got.CF}get zat(){return this.Got.zat}get aAt(){return this.lvt.zm.aAt||this.Got.aAt}get Grt(){return this.wvt}get uAt(){return this.lvt.zm.uAt||this.Got.uAt}get cAt(){return this.lvt.zm.cAt||this.Got.cAt}get Avt(){return this.lvt.Avt}get dAt(){return this.lvt.zm.dAt||this.Got.dAt}get ant(){return this.lvt.ant}get lAt(){return this.lvt.zm.lAt||this.Got.lAt}get Rg(){const t=this.CF.split("/")[0];return"application"===t||"text"===t||Wn(this.CF,this.wst)?pg.Ru:"video"===t?pg.pm:"audio"===t?pg.ym:"image"===t?pg.nT:pg.rT}get ji(){return this.lvt.zm.ji||this.Got.ji}get Uat(){return this.vvt}set Uat(t){this.vvt=t}Kat(t){const i=li(t)?this.lvt.mvt(t):this.lvt.Kat(t);return{zu:i.zu,jht:i.jht,AS:this.Xut.AS}}pvt(){return this.lvt.pvt()}uvt(){return this.lvt.uvt()}yvt(){return this.lvt.yvt()}Fat(t){return this.lvt.Fat(t)}Gat(t,i,e){return this.lvt.Gat(t,this.Xut.AS,i,e)}But(t){return li(t)?this.ant.Mvt(t,this.lvt):this.ant.But(t)}jat(t){return li(t)?this.ant.Tvt(t,this.lvt):this.ant.jat(t)}gn(){this.lvt.fn(Ou.Rrt,this.dvt)}constructor(t,i){if(super(),this.Xa=void 0,this._vt=void 0,this.vvt=!1,this.vht=t,this.lvt=i,this.lvt.yn(Ou.Rrt,this.dvt),this.Rg===pg.pm){var e,s;const t=null!=(s=null==(e=this.xct)?void 0:e.vN())?s:NaN;this.wvt=new BY(this.o,this.wz,this.sit,"","",t,this.ji,this.Ti)}else this.Rg===pg.ym?this.wvt=new RY(this.o,this.wz,this.sit,"","",this.eAt):this.wvt=void 0}},QY=class extends pr{get hct(){return this.lvt.zm.hct}get eAt(){var t;return null!=(t=this.lvt.zm.eAt)?t:-1}get wst(){if(this.lvt.zm.wst)return[this.lvt.zm.wst];{const t=[];for(const i of this.Jnt)i.fvt.length&&-1===t.indexOf(i.sit)&&t.push(i.sit);return t}}get sit(){return this.wst.join()}get sAt(){return this.lvt.zm.sAt}get Ast(){return this.lvt.zm.Ast}get qz(){return this.CF+'; codecs="'+this.sit+'"'}get nAt(){return this.lvt.nAt}get rAt(){return this.lvt.rAt}get xct(){return this.lvt.zm.xct}get gct(){return this.lvt.zm.gct}get Ti(){return this.lvt.zm.Ti||0}get o(){return this.lvt.zm.o}get kh(){return this.lvt.zm.kh||""}get hAt(){return this.lvt.zm.hAt}get oAt(){return this.lvt.zm.oAt}get Xut(){return this.zat.Xut}get CF(){return this.lvt.zm.CF||this.pct[0].CF}get zat(){return this.owt}get aAt(){return this.lvt.zm.aAt}get Jnt(){return this.pct}get Bct(){return this.lvt.zm.Bct||[]}get uAt(){return this.lvt.zm.uAt}get cAt(){return this.lvt.zm.cAt}get dAt(){return this.lvt.zm.dAt}get LP(){return this.lvt.zm.LP}get lAt(){return this.lvt.zm.lAt}get Rg(){const t=(this.lvt.zm.qz||this.CF).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||Wn(this.CF,this.wst)?pg.Ru:"video"===t?pg.pm:"audio"===t?pg.ym:"image"===t?pg.nT:pg.rT}get ji(){return this.lvt.zm.ji||0}get R6(){return this.lvt.zm.gs||""}get jct(){return this.avt}get Oct(){const t=this.jct,i=this.cvt;if(void 0===t||void 0===i)return;const e=_.min(i,this.Xut.Nvt);return _.max(t,e)}async Yn(t,i){if(0===this.pct.length){this.pct=[];const e=this.lvt.Jnt.map((e=>this.Dvt(e,t,i)));this.pct=(await Promise.all(e)).filter(Yt)}this.Ivt()}async Dvt(t,i,e){const s=new UY(this,t),n=await i(s);if(Bo(e),n)return s}Ivt(){if(!this.pct.length)throw new g("Detected an AdaptationSet without any supported Representations.")}uvt(){return this.lvt.uvt()}yvt(){return this.lvt.yvt()}gn(){this.lvt.fn(Ou.Rrt,this.dvt);for(const t of this.pct)t.gn();No(this.pct)}constructor(t,i){super(),this.pct=[],this.owt=t,this.lvt=i,this.lvt.yn(Ou.Rrt,this.dvt)}};function FY(t,e){const s=[];for(const n of e)for(const e of t)s.push(i.Dh(e,n));return s}var Xh=class{Svt(t){const i=t-this.owt.Cn;if(i<0||i>=this.owt.ct)return;const e=this.Evt();return void 0!==e&&Ua(e,i,1e-5)?this.bvt():this.Lvt(i)}Qat(t){const i=t-this.owt.Cn;if(!(i<0))return this.kvt(_.min(i,this.owt.ct))}bvt(){return this.Cvt(0)}xvt(){const t=this.owt.ct;if(isFinite(t))return this.kvt(t)}get Ovt(){return this.owt.zvt.jvt&&void 0!==this.Pvt()}pvt(t){if(this.owt.zvt.Rg===Le.Hx){if(this.Ovt){const i=this.bvt(),e=this.Pvt();if(void 0===i||void 0===e)return;return{Bvt:t,Rvt:i,Uvt:e}}const i=this.Qvt(t);if(!i)return;return{Bvt:t,Rvt:this.Fvt(t),Uvt:i}}{0;const i=this.bvt();if(i)return{Bvt:t,Rvt:i,Uvt:this.xvt()}}}yvt(t,i){if(i){let t=this.Zut(i.Rvt);const e=this.qat(i.Uvt);if(e){const i=this.Kut(e);(!t||i.getTime()<t.getTime())&&(t=i)}return t}{const i=this.bvt();if(i){const e=this.Kut(i);if(t.getTime()<e.getTime())return e}const e=this.owt.zvt.YAt;return t.getTime()<e.getTime()?e:void 0}}Qvt(t){const i=(t.getTime()-this.owt.zvt.YAt.getTime())/1e3-this.owt.Cn+this.Yvt;let e=this.kvt(os(i,0,this.owt.ct));if(!e)return;if(e=this.Gvt(e,t),!e)return;let s=this.qat(e);for(;s&&this.sct(s,t);)e=s,s=this.qat(e);return e}Fvt(t){let i;const e=this.Vvt.Jwt;if(e){const s=(t.getTime()-this.owt.zvt.YAt.getTime())/1e3-this.owt.Cn-e.Cwt();i=this.kvt(os(s,0,this.owt.ct)),i||(i=this.bvt())}else i=this.bvt();if(!i)return;if(i=this.Gvt(i,t),!i)return;let s=this.Hat(i);for(;s&&this.sct(s,t);)i=s,s=this.Hat(i);return i}Gvt(t,i){let e=t;for(;e&&this.Kut(e).getTime()>i.getTime();)e=this.Hat(e);if(!e)return;const s=this.Zut(e);if(s&&s.getTime()<=i.getTime()){const t=this.Hat(e);for(t&&this.sct(t,i)&&(e=t);e;){if(this.Kut(e).getTime()>i.getTime())return;if(this.sct(e,i))break;e=this.qat(e)}if(!e)return}return e}sct(t,i){if(this.Ovt)return!0;if(this.Kut(t).getTime()>i.getTime())return!1;const e=this.Zut(t);return!(e&&i.getTime()>=e.getTime())}Wvt(t,i){if(this.Ovt)return!0;if(this.Hvt(t).getTime()>i.getTime())return!1;const e=this.Zut(t);return!(e&&i.getTime()>=e.getTime())}qvt(t,i,e){const s=Y(i,this.GL)+this.owt.Cn;return{pot:t,Xvt:i,GT:s,ct:e,VT:s+e}}Hvt(t){return this.owt.zvt.Rg===Le.Hx?new Date(this.owt.zvt.YAt.getTime()+1e3*(t.GT+t.ct)):this.owt.zvt.YAt}Kut(t){const i=this.Hvt(t);return this.owt.zvt.Rg===Le.Hx?new Date(i.getTime()-1e3*this.Yvt):i}Zut(t){let i=1/0;if(this.owt.zvt.Rg===Le.Hx){const e=this.Vvt.Jwt;e&&(i=this.Hvt(t).getTime()+1e3*t.ct+e.xwt())}const e=this.owt.zvt.FAt;return e&&(i=_.min(i,e.getTime())),i===1/0?void 0:new Date(i)}Zvt(t,i){return t.pot+i}get UD(){return this.owt.Cn-Y(this.Kvt,this.GL)}get Zwt(){return Y(this.Kvt,this.GL)}Fat(t){return!1}Gat(t,i,e,s,n){const r=this.Jvt(t);if(!r)return Promise.reject(new g("Invalid segment"));const h=this.$vt(r.pot,i);return h?Promise.resolve(h):dt(this.tmt(r.pot,i,e,s),n)}$vt(t,i){}tmt(t,i,e,s){return Promise.reject(new g("Not supported"))}Hat(t){const i=this.Jvt(t);if(i)return this.Cvt(i.pot-1)}qat(t){const i=this.Jvt(t);if(i)return this.Cvt(i.pot+1)}Jvt(t){const i=this.Cvt(t.pot);if(i&&i.GT===t.GT)return i;const e=this.Svt(t.GT);return e&&e.GT===t.GT?e:void 0}imt(t,i){const e=this.Vat(t);if(!e||!this.Fat(e.pot))return;const s=this.$vt(e.pot,i);return s?s.imt(t):void 0}Vat(t){return this.Cvt(t.emt)}But(t){const i=this.Jvt(t);return!!i&&0===i.pot}Mvt(t,i){const e=this.imt(t,i);return!!e&&0===e.mot}jat(t){const i=this.Jvt(t);if(!i)return!1;const e=this.xvt();return!!e&&i.pot===e.pot}Tvt(t,i){const e=this.imt(t,i);if(!e)return!1;const s=this.xvt();if(!s||e.emt!==s.pot)return!1;const n=this.$vt(e.emt,i);return e.mot+1===n.U}Qd(){}constructor(t,i){this.owt=t,this.Vvt=i,this.GL=i.kp,this.Yvt=i.Rwt,this.Kvt=i.Zwt}},YY=class extends Xh{Cvt(t){if(t<0)return;const i=this.smt.multiply(t),e=Y(i,this.GL),s=this.owt.ct;if(e>=s)return;const n=this.nmt();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.qvt(t,i,s-e)}return isFinite(s)&&e+this.hmt>s?this.qvt(t,i,s-e):this.qvt(t,i,this.hmt)}Evt(){return 0}Lvt(t){const i=_.floor(t/this.hmt),e=this.nmt();return void 0!==e&&i>=e?this.Cvt(e):this.Cvt(i)}kvt(t){if(t>=this.owt.ct){const t=_.ceil(this.owt.ct/this.hmt)-1,i=this.nmt();return void 0!==i&&t>=i?this.Cvt(i):this.Cvt(t)}return this.Lvt(t)}nmt(){const t=this.Vvt.iAt;var i;if(void 0!==t)return t-(null!=(i=this.Vvt.tAt)?i:1);const e=this.Vvt.omt;return void 0!==e&&e>0?e-1:void 0}Pvt(){if(isFinite(this.owt.ct))return this.xvt()}amt(t,i){return this.smt.multiply(t.pot+(i-1))}Yn(){}constructor(t,i){super(i,t);const e=t.umt,s=t.ct;if(void 0===e||void 0===s)throw new g("MultipleSegmentBase does not have a segment duration specified.");this.smt=e,this.hmt=s}};function GY(t,i,e){const s=i.length;if(0===s)return-1;let n=0,r=s-1,h=t.cmt(i[n]),o=t.dmt(i[r]);for(;n<=r&&t.lmt(h,e)<=0&&t.lmt(e,o)<0;){const a=n+_.floor(t.fmt(e,h,o)*(r-n)),u=i[a],c=t.cmt(u),d=a+1<s?t.cmt(i[a+1]):t.dmt(u);if(t.lmt(d,e)<=0)n=a+1,h=d;else{if(!(t.lmt(e,c)<0))return a;r=a-1,o=c}}return-1}function VY(t,i){return GY(WY.Ib,t,i)}var WY=class t{static get Ib(){return null!=this.gst||(this.gst=new t),this.gst}cmt(t){return t.GT}dmt(t){return t.VT}lmt(t,i){return t.compare(i)}fmt(t,i,e){return t.subtract(i).toNumber()/e.subtract(i).toNumber()}},HY=class extends Xh{Cvt(t){if(!(t<0))return t<this._mt.length?this._mt[t].wot:this.gmt(t-this._mt.length)}Evt(){if(this._mt.length>0)return Y(this._mt[0].GT,this.GL)}Lvt(t){if(this.wmt&&Y(this.wmt.GT,this.GL)<=t){const i=Y(this.wmt.GT,this.GL),e=Y(this.wmt.ct,this.GL),s=_.floor((t-i)/e);return this.gmt(s)}if(this._mt.length>0&&Ua(t,Y(this._mt[0].GT,this.GL),1e-5))return this._mt[0].wot;const i=VY(this._mt,qo.fromNumber(t*this.GL));return i<0?void 0:this._mt[i].wot}kvt(t){if(!this.wmt&&this._mt.length>0){const i=this._mt[this._mt.length-1];if(function(t,i,e){return Pd(t,i,e)>=0}(t,Y(i.VT,this.GL),1e-5))return i.wot}const i=this.Evt();return i&&t<i?this._mt[0].wot:this.Lvt(t)}Pvt(){return isFinite(this.owt.ct)?this.xvt():this.Cvt(this._mt.length-1)}amt(t){return this.Amt(t)}gmt(t){if(!this.wmt)return;const i=this.wmt.GT,e=this.wmt.ct,s=i.add(e.multiply(t)),n=Y(s,this.GL),r=this.owt.ct;if(n>=r)return;const h=this._mt.length+t,o=_.min(Y(e,this.GL),n+r);return this.qvt(h,s,o)}Amt(t){return t.Xvt.add(this.Kvt)}Yn(){const t=this.Vvt.zm.ant;if(!t)throw new g("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.vmt(t)}vmt(t){const i=this.Kvt;this.mmt(t,i);const e=this.pmt(t);this.ymt(t,i,e.Mmt,e.emt)}mmt(t,i){const e=this._mt;if(0===t.length)No(e);else{const s=t[0],n=s.GT?qo.fromString(s.GT,!1).subtract(i):qo.ZERO;let r=0;for(;r<e.length&&e[r].GT.lessThan(n);)r++;r>0&&e.splice(0,r)}}pmt(t){const i=this._mt,e=this.hgt;let s=0,n=0;for(;s<t.length&&n<i.length;){const r=t[s].Fwt||0;if(r<0)break;const h=n+r;if(h>=i.length)break;if(i[h].GT.greaterThanOrEqual(e))break;if(i[n].wot.pot===n)n=h+1;else for(;n<=h;)i[n].wot.pot=n,n++;0,s++}return{Mmt:s,emt:n}}ymt(t,i,e,s){const n=this._mt;let r,h=e,o=s;for(;h<t.length;){const e=t[h],s=qo.fromString(e.ct,!1),a=e.Fwt||0;let u;if(e.GT){if(u=qo.fromString(e.GT,!1).subtract(i),o>0){const t=n[o-1];t.VT.greaterThan(u)&&(t.ct=u.subtract(t.GT),t.VT=t.GT.add(t.ct))}}else u=o>0?n[o-1].VT:qo.ZERO;if(a<0){if(h+1===t.length){r={GT:u,ct:s};break}const e=qo.fromString(t[h+1].GT,!1).subtract(i);for(;u.lessThan(e);){const t=u.add(s);this.Tmt(n,o,u,s,t),u=t,o++}}else{const t=o+a;for(;o<=t;){const t=u.add(s);this.Tmt(n,o,u,s,t),u=t,o++}}h++}o<n.length&&n.splice(o),n.length>0&&(this.hgt=n[n.length-1].GT),this.wmt=r}Tmt(t,i,e,s,n){if(i<t.length){const r=t[i];0,r.ct.equals(s)?r.wot.pot=i:t[i]={GT:e,ct:s,VT:n,wot:this.qvt(i,e,Y(s,this.GL))}}else t.push({GT:e,ct:s,VT:n,wot:this.qvt(i,e,Y(s,this.GL))})}constructor(t,i){super(i,t),this._mt=[],this.wmt=void 0,this.hgt=qo.ZERO,this.Yn()}},qY=class{get zm(){return this.qL}get Rwt(){return this.qL&&void 0!==this.qL.Rwt?this.qL.Rwt:this.Nmt?this.Nmt.Rwt:0}get Zwt(){return this.qL&&void 0!==this.qL.Zwt?this.qL.Zwt:this.Nmt?this.Nmt.Zwt:qo.ZERO}get Jwt(){return this.qL&&void 0!==this.qL.Jwt?this.qL.Jwt:this.Nmt?this.Nmt.Jwt:this.zat.zvt.Jwt}get kp(){return this.qL&&void 0!==this.qL.kp?this.qL.kp:this.Nmt&&this.Nmt.kp?this.Nmt.kp:1}get Ywt(){return this.qL&&void 0!==this.qL.Ywt?this.qL.Ywt:this.Nmt?this.Nmt.Ywt:void 0}get Xwt(){return this.qL&&void 0!==this.qL.Xwt?this.qL.Xwt:this.Nmt?this.Nmt.Xwt:void 0}get ant(){return this.Dmt||(this.Dmt=this.Imt()),this.Dmt}Imt(){if(this.Smt=this.Emt(),this.Smt)return this.Smt;if(this.Nmt)return this.Nmt.ant;throw new g("Missing media segment information.")}gvt(t){const e=this.Xwt;if(e){return{zu:(void 0!==e.Qwt?i.Dh(e.Qwt,t.AAt[0]):t.AAt[0]).href,jht:e.jht}}const s=this.Ywt;if(s)return{zu:t.AAt[0].href,jht:[0,s[0]-1]}}Yn(t){this.qL=t,this.Smt&&this.Smt.Yn()}Qd(){this.Smt&&(this.Smt.Qd(),this.Smt=void 0)}constructor(t,i,e){this.Dmt=void 0,this.Smt=void 0,this.zat=t,this.Nmt=i,this.qL=e}},Mr=class extends qY{get ct(){return void 0!==this.qL.ct?this.qL.ct/this.kp:this.Nmt&&XY(this.Nmt)?this.Nmt.ct:void 0}get umt(){return void 0!==this.qL.ct?qo.fromNumber(this.qL.ct):this.Nmt&&XY(this.Nmt)?this.Nmt.umt:void 0}get tAt(){return void 0!==this.qL.tAt?this.qL.tAt:this.Nmt&&XY(this.Nmt)?this.Nmt.tAt:void 0}get iAt(){return void 0!==this.qL.iAt?this.qL.iAt:this.Nmt&&XY(this.Nmt)?this.Nmt.iAt:void 0}Emt(){return void 0!==this.qL.ant?new HY(this,this.zat):void 0!==this.qL.ct?new YY(this,this.zat):void 0}};function XY(t){return t instanceof Mr}var ZY=class{Wb(t){return this.bmt.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,((i,e,s,n)=>{if("$$"===i)return"$";const r=t[e];if(void 0===r)return i;if(void 0===s)return r.toString();let h=function(t,i){switch(i){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===h?i:(h=xu(h,Number(s),"0"),h)}))}constructor(t){this.bmt=t}};var KY=class t extends Mr{get gAt(){return this.Lmt?this.Lmt:this.Nmt&&this.Nmt instanceof t?this.Nmt.gAt:void 0}get wAt(){return this.kmt?this.kmt:this.Nmt&&this.Nmt instanceof t?this.Nmt.wAt:void 0}gvt(t){const e=this.gAt;if(!e)return super.gvt(t);const s=e.Wb({Bandwidth:t.zm.wz,RepresentationID:t.zm.o});return{zu:i.IA(s,t.AAt[0])}}Kat(t,e){var s;const n=null!=(s=e.Avt.tAt)?s:1,r=this.wAt.Wb({Bandwidth:e.zm.wz,Number:e.ant.Zvt(t,n),RepresentationID:e.zm.o,Time:e.ant.amt(t,n)});return{zu:i.IA(r,e.AAt[0])}}mvt(t,i){}get omt(){}constructor(t,i,e){super(t,i,e),this.Lmt=e.gAt?new ZY(e.gAt):void 0,this.kmt=e.wAt?new ZY(e.wAt):void 0}},JY=class t extends Mr{Kat(t,e){const s=this.Vwt[t.pot],n=e.AAt[0];let r;return r=s.Pp?i.Dh(s.Pp,n):n,{zu:r.href,jht:s.Gwt}}mvt(t,i){}get Vwt(){return void 0!==this.qL.Vwt?this.qL.Vwt:this.Nmt&&this.Nmt instanceof t?this.Nmt.Vwt:void 0}get omt(){var t;return null==(t=this.Vwt)?void 0:t.length}},$Y=class{imt(t){const i=this.Wat(t.mot);if(i&&i.GT===t.GT)return i;const e=this.Cmt(t.GT);return e&&e.GT===t.GT?e:void 0}},tG=class extends $Y{get U(){return this.xmt.length}Wat(t){if(t>=0&&t<this.U)return this.Omt(this.xmt[t])}Cmt(t){const i=this.jmt(t);if(this.xmt.length>0){const t=this.xmt[0];if(i<=Y(t.GT,this.kp))return this.Omt(t)}const e=VY(this.xmt,qo.fromNumber(i*this.kp));if(!(e<0))return this.Omt(this.xmt[e])}Yat(t){const i=this.jmt(t);if(this.xmt.length>0){const t=this.xmt[this.xmt.length-1];if(i>=Y(t.VT,this.kp))return this.Omt(t)}return this.Cmt(t)}Omt(t){const i=Y(t.GT,this.kp)-this.Zwt,e=i+this.zmt,s=Y(t.ct,this.kp);return{emt:this.emt,mot:t.pot,GT:e,Xvt:qo.fromNumber(i*this.kp),ct:s,VT:e+s,Pmt:[t.Bmt,t.Rmt]}}jmt(t){return t-this.zmt+this.Zwt}constructor(t,i,e,s,n){super(),this.emt=t,this.kp=i,this.zmt=e,this.Zwt=s,this.xmt=n}};var iG=class t{E_t(){return this.Pm.Ku<this.zm.byteLength}Umt(){const i=this.Qmt(),e=this.Fmt(),s=this.Pm.Ku,n=this.zm.byteLength;let r;r=t.Ymt(e)?n-s:t.Gmt(e);const h=s+r<=n?r:n-s,o=Eu(this.zm,this.Pm,h);return new sG(i,ha(o))}Qmt(){const t=this.Fmt();if(t.length>7)throw new RangeError("Invalid EBML ID size");let i=0;for(let e=0;e<t.length;e++)i=256*i+t[e];return i}Fmt(){const t=hl(this.zm,this.Pm.Em());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const e=8-(31-N_(t));return i.hit(e<=8&&e>=1,"Incorrect log2 value"),Eu(this.zm,this.Pm,e)}static Gmt(t){if(8===t.length&&224&t[1])throw new b("EBML variable sized integer is too large");let i=0;for(let e=0;e<t.length;e++){const s=t[e];if(0===e){i=s&(1<<8-t.length)-1}else i=256*i+s}return i}static Ymt(t){for(const i of eG)if(Gi(t,new j(i)))return!0;return!1}constructor(t){this.zm=t,this.Pm=new L}},eG=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],sG=class{Vmt(){return this.Wmt.byteOffset}Hmt(){return new iG(this.Wmt)}qmt(){const t=this.Wmt.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.Wmt.getUint8(0))throw new RangeError("EMBL integer field value is too large");let i=0;for(let e=0;e<t;e++){i=256*i+this.Wmt.getUint8(e)}return i}IH(){if(4===this.Wmt.byteLength)return this.Wmt.getFloat32(0);if(8===this.Wmt.byteLength)return this.Wmt.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,i){this.id=t,this.Wmt=i}};function nG(t,i){const e=function(t){const i=new iG(ha(t)),e=i.Umt();if(e.id!==hG)throw new b("Missing WebM EBML header");const s=i.Umt();if(s.id!==oG)throw new b("Missing WebM SegmentElement");const n=s.Vmt(),r=function(t){const i=t.Hmt();let e;for(;i.E_t();){const t=i.Umt();if(t.id===aG){e=t;break}}if(!e)throw new b("Missing WebM InfoElement");return function(t){const i=t.Hmt();let e,s=1e6;for(;i.E_t();){const t=i.Umt();t.id===uG?s=t.qmt():t.id===cG&&(e=t.IH())}if(void 0===e)throw new b("Missing Duration in WebM InfoElement");const n=s/1e9,r=e*n;return{timecodeScale:n,duration:r}}(e)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(i),s=new iG(ha(t)).Umt();if(s.id!==dG)throw new b("Missing WebM CuesElement");const n=function(t,i,e,s){const n=[],r=t.Hmt();let h,o;for(;r.E_t();){const t=r.Umt();if(t.id!==lG)continue;const e=rG(t);if(!e)continue;const s=e.unscaledTime,a=i+e.relativeOffset;void 0!==h&&n.push({pot:n.length,GT:h,ct:s.subtract(h),VT:s,Bmt:o,Rmt:a-1}),h=s,o=a}if(void 0!==h){0;const t=qo.fromNumber(s/e);n.push({pot:n.length,GT:h,ct:t.subtract(h),VT:t,Bmt:o,Rmt:void 0})}return n}(s,e.segmentOffset,e.timecodeScale,e.duration);return{kp:_.round(1/e.timecodeScale),Xmt:n}}function rG(t){const i=t.Hmt(),e=i.Umt();if(e.id!==fG)throw new b("Missing CueTime in WebM CuePointElement");const s=qo.fromNumber(e.qmt()),n=i.Umt();if(n.id!==_G)throw new b("Missing CueTrackPositions in WebM CuePointElement");const r=n.Hmt();let h=0;for(;r.E_t();){const t=r.Umt();if(t.id===gG){h=t.qmt();break}}return{unscaledTime:s,relativeOffset:h}}var hG=440786851,oG=408125543,aG=357149030,uG=2807729,cG=17545,dG=475249515,lG=187,fG=179,_G=183,gG=241,wG=class extends Xh{Cvt(t){if(0===t)return this.Zmt}Evt(){return 0}Lvt(t){return this.Zmt}kvt(t){return this.Lvt(t)}Pvt(){return this.Zmt}amt(t,i){return qo.ZERO}pvt(t){const i=this.Kmt(t);return i&&{Bvt:t,Rvt:i,Uvt:i}}Kmt(t){const i=this.Zmt;return this.sct(i,t)?i:void 0}Qvt(t){return this.Kmt(t)}Fvt(t){return this.Kmt(t)}Yn(){}Fat(t){return 0===t&&void 0!==this.Jmt}$vt(t,i){const e=i.AAt[0].href;return this.$mt.get(e)}tmt(t,i,e,s){const n=i.AAt[0].href;let r=this.tpt.get(n);if(void 0===r){const h=i.CF,o=this.ipt.Hd;if(as(h))r=this.ept(t,n,e,s,o);else{if(!ZA(h))throw new $i(Ui.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+h);r=this.spt(t,n,i,e,s,o)}this.tpt.set(n,r)}return r}async ept(t,i,e,s,n){const r=this.Jmt,h=await s.gut(i,r,e,n),o=this.npt(t,h);return this.$mt.set(i,o),o}npt(t,i){const e=this.Jmt,s=At.ip(new DataView(i),new L);if(s.Rg!==Po._m)throw new g("Invalid segment index");const n=no.Tp(s.zm),r=function(t,i){const e=[];let s=t.KM,n=i+t.JM.toNumber(),r=0;for(const i of t.tT){const t=i.WM,h=qo.fromNumber(i.ct),o=s.add(h);0===i.VM&&e.push({pot:r++,GT:s,ct:h,VT:o,Bmt:n,Rmt:n+t-1}),n+=t,s=o}return e}(n,e[1]+1);return new tG(t,n.kp,this.owt.Cn,Y(this.Kvt,this.GL),r)}async spt(t,i,e,s,n,r){const h=e.gvt(),o=this.Jmt,a=n.gut(h.zu,h.jht,s,r),u=n.gut(i,o,s,r),[c,d]=await Promise.all([a,u]),l=this.rpt(t,d,c);return this.$mt.set(i,l),l}rpt(t,i,e){const s=nG(new j(i),new j(e));return new tG(t,s.kp,this.owt.Cn,Y(this.Kvt,this.GL),s.Xmt)}Qd(){super.Qd(),this.ipt.Xd()}constructor(t,i){super(i,t),this.$mt=cs(),this.tpt=cs(),this.ipt=new na,this.Jmt=t.Ywt,this.Zmt=this.qvt(0,qo.ZERO,this.owt.ct)}},AG=class extends qY{get tAt(){}Kat(t,i){return{zu:i.AAt[0].href}}mvt(t,i){return{zu:i.AAt[0].href,jht:t.Pmt}}Emt(){return new wG(this,this.zat)}},vG=class extends wn{constructor(){super(Ou.Rrt)}};var Uo=class extends Pl{get zm(){return this.qL}get AAt(){return this.hpt}opt(){var t,i;return null!=(i=this.Vvt)?i:null==(t=this.pit)?void 0:t.opt()}apt(t){const i=this.zat,e=this.pit&&this.pit.opt();this.qL.pAt?this.Vvt=new KY(i,e,this.qL.pAt):this.qL.mAt?this.Vvt=new JY(i,e,this.qL.mAt[0]):this.qL.vAt?this.Vvt=new AG(i,e,this.qL.vAt):t&&!e&&(this.Vvt=new AG(i,e,void 0))}upt(t,i){this.qL=t,this.hpt=t.AAt&&t.AAt.length>0?FY(t.AAt.map((t=>t.zu)),i):i.slice(),this.Vvt&&(t.pAt?this.Vvt.Yn(t.pAt):t.mAt?this.Vvt.Yn(t.mAt[0]):t.vAt&&this.Vvt.Yn(t.vAt))}uvt(){var t;return null==(t=this.cpt)?void 0:t.dpt}yvt(){var t;return null==(t=this.cpt)?void 0:t.lpt}fpt(t){const i=this._pt,e=this.zat.ct,s=this.cpt,n=this.gpt(t);s&&Ua(e,i,1e-5)&&MG(s,n)||(this._pt=e,this.cpt=n,this.Co(new vG))}Qd(){this.Vo(),this.Vvt&&(this.Vvt.Qd(),this.Vvt=void 0)}constructor(t,i,e){super(),this.Vvt=void 0,this._pt=1/0,this.cpt=void 0,this.pit=i,this.upt(t,e)}};function mG(t){let i,e;for(const e of t){const t=e.uvt();if(t){i=t.Cn;break}}if(void 0!==i){for(let i=t.length-1;i>=0;i--){const s=t[i].uvt();if(s){e=s.jn;break}}return void 0!==e?{Cn:i,jn:e}:void 0}}function pG(t){if(0===t.length)return;let i=0,e=1/0;for(const s of t){const t=s.uvt();if(!t)return;if(i=_.max(i,t.Cn),e=_.min(e,t.jn),i>=e)return}return{Cn:i,jn:e}}function yG(t){let i;for(const e of t){const t=e.yvt();t&&(!i||t.getTime()<i.getTime())&&(i=t)}return i}function MG(t,i){return function(t,i){return t&&i?t.getTime()===i.getTime():t===i}(t.lpt,i.lpt)&&function(t,i){return t&&i?Ua(t.Cn,i.Cn,1e-5)&&Ua(t.jn,i.jn,1e-5):t===i}(t.dpt,i.dpt)}var TG=class extends pr{get Ynt(){return this.wpt}get wst(){return this.Ynt.reduce(((t,i)=>{for(const e of i.wst)qt(t,e)||t.push(e);return t}),[])}get sit(){return this.wst.length>0?this.wst[0]:""}get Rg(){return this.wpt[0].Rg}get o(){return this.CT}get Xut(){return this.owt.Xut}get CF(){return this.wpt[0].CF}get zat(){return this.owt}get Jnt(){return ge(this.Ynt,(t=>t.Jnt))}uvt(){return pG(this.wpt)}yvt(){let t;for(const i of this.wpt){const e=i.yvt();e&&(!t||e.getTime()<t.getTime())&&(t=e)}return t}gn(){this.Vo();for(const t of this.wpt)t.fn(Ou.Rrt,this.dvt)}constructor(t,i,e){super(),this.owt=t,this.CT=i,this.wpt=e.slice();for(const t of e)t.yn(Ou.Rrt,this.dvt)}},NG=class extends wn{constructor(){super(Ou.Qrt)}};function DG(t){const i=[];for(const e of t){let t;const s=e.gct;void 0===s||(t=Zt(i,(t=>t.o===s))),t||(t={o:s,Ynt:[]},i.push(t)),t.Ynt.push(e)}return i}var Ar,IG=class extends pr{get Ynt(){return this.wpt}get hwt(){return this.Apt}get BAt(){return this.lvt.zm.BAt}get ct(){return this.lvt.ct}get jn(){return this.Cn+this.ct}get RAt(){return this.lvt.zm.RAt||[]}get o(){return this.lvt.o}get Frt(){return this.vpt}get Xut(){return this.mpt}get ppt(){return this.mpt.ypt(this)}get zat(){return this}get Mpt(){return this.mpt.Tpt(this)}get Npt(){return this.Dpt(1/0,_.min)}get Ipt(){return this.Dpt(0,_.max)}Dpt(t,i){if(0===this.Apt.length)return;let e=t;for(const t of this.Apt){const s=t.Rg;if(s===pg.ym||s===pg.pm){const s=t.cvt;if(void 0===s)return;e=i(e,s)}}return e}get Cn(){return this.lvt.Cn}get AS(){return this.Xut.AS}Spt(){this.vpt||(this.vpt=!0,this.Co(new NG),this.gn())}async Yn(t,i){0===this.wpt.length?(await this.Ept(this.lvt.Ynt,t,i),this.bpt(this.wpt),Bo(i)):await this.Lpt(t,i)}async Ept(t,i,e){for(const s of t){const t=new QY(this,s);try{await t.Yn(i,e),this.wpt.push(t)}catch(t){Ao(t)}}}bpt(t){const i=DG(t);for(const t of i){const i=new TG(this,t.o,t.Ynt);this.Apt.push(i)}}async Lpt(t,i){for(const e of this.wpt)await e.Yn(t,i)}uvt(){return this.lvt.uvt()}yvt(){return this.lvt.yvt()}gn(){this.Vo(),this.lvt.fn(Ou.Rrt,this.dvt);for(const t of this.Apt)t.gn();for(const t of this.wpt)t.gn();No(this.wpt),No(this.Apt)}constructor(t,i){super(),this.wpt=[],this.Apt=[],this.vpt=!1,this.mpt=t,this.lvt=i,this.lvt.yn(Ou.Rrt,this.dvt)}},la=class extends wn{constructor(){super(l.dw)}};(Ar||(Ar={})).kpt="Cpt";var SG=class extends wn{constructor(){super(Ar.kpt)}},EG=class extends Uo{get Got(){return this.vht}get zat(){return this.vht.zat}get zvt(){return this.vht.zvt}get CF(){return this.qL.CF||this.vht.CF}get Avt(){return this.opt()}get ant(){return this.Avt.ant}Fat(t){const i=this.CF;return!(!as(i)&&!ZA(i))&&this.ant.Fat(t.pot)}Gat(t,i,e,s){return this.ant.Gat(t,this,i,e,s)}gvt(){return this.Avt.gvt(this)}Kat(t){return this.Avt.Kat(t,this)}mvt(t){return this.Avt.mvt(t,this)}pvt(){return this.xpt}gpt(t){const i=this.ant,e=i.pvt(t),s=e&&function(t,i){const{Rvt:e,Uvt:s,Bvt:n}=t,r=e.GT;let h;const o=i.Hvt(s);if(o.getTime()<=n.getTime())h=s.VT;else{const t=(o.getTime()-n.getTime())/1e3,i=_.max(s.ct-t,0);h=s.GT+i}return{Cn:r,jn:h}}(e,i),n=this.ant.yvt(t,e);return this.xpt=e,{Bvt:t,dpt:s,lpt:n}}Yn(t){this.upt(t,this.vht.AAt)}constructor(t,i){super(t,i,i.AAt),this.xpt=void 0,this.vht=i,this.apt(!0)}},bG=class extends Uo{get Jnt(){return this.pct}get zat(){return this.owt}get zvt(){return this.owt.zvt}get gct(){return this.qL.gct}get CF(){var t;return this.qL.CF||(null==(t=this.pct[0])?void 0:t.zm.CF)||""}get nAt(){return this.zm.nAt}get rAt(){return this.zm.rAt}Yn(t){this.upt(t,this.owt.AAt);const i=t.Jnt||[];if(this.pct.length!==i.length)throw new g("Expected "+this.pct.length+' representations in adaptation set "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.pct[t].Yn(i[t])}fpt(t){for(const i of this.pct)i.fpt(t);super.fpt(t)}gpt(t){return{Bvt:t,dpt:pG(this.pct),lpt:yG(this.pct)}}Qd(){for(const t of this.pct)t.Qd();super.Qd()}constructor(t,i){super(t,i,i.AAt),this.owt=i,this.apt(!1),this.pct=t.Jnt.map((t=>new EG(t,this)))}},LG=class extends Uo{get Ynt(){return this.wpt}get hwt(){return this.Apt}get zat(){return this}get zvt(){return this.Opt}get o(){return this.qL.o}get Cn(){return this.hI}get ct(){return this.VL}Yn(t,i){this.upt(t,this.Opt.AAt),this.VL=i;const e=t.Ynt||[];if(this.wpt.length!==e.length)throw new g("Expected "+this.wpt.length+' adaptation sets in period "'+t.o+'", found '+e.length);for(let t=0;t<e.length;t++)this.wpt[t].Yn(e[t])}fpt(t){for(const i of this.wpt)i.fpt(t);super.fpt(t)}gpt(t){return{Bvt:t,dpt:pG(this.wpt),lpt:yG(this.wpt)}}Qd(){for(const t of this.wpt)t.Qd();super.Qd()}constructor(t,i,e,s){super(i,void 0,t.AAt),this.Apt=[],this.Opt=t,this.hI=e,this.VL=s,this.apt(!1),this.wpt=(i.Ynt||[]).map((t=>new bG(t,this))),this.Apt=DG(this.wpt)}},kG=class{get jpt(){return this.zpt.QAt.fD}get Ppt(){return this.zpt.QAt.lD}get Bpt(){return this.zpt.QAt.UAt}get Rpt(){var t;return null==(t=this.zpt.Gf)?void 0:t.fD}get Upt(){var t;return null==(t=this.zpt.Gf)?void 0:t.fD}constructor(t){this.zpt=t}},CG=new Date("2000-01-01"),xG=class extends Pl{get zm(){return this.qL}get Rg(){return this.qL.Rg||Le.Wx}get YAt(){return this.Qpt||this.qL.YAt||this.KAt}get FAt(){return this.qL.FAt}get jvt(){var t,i;return null!=(i=null==(t=this.Fpt)?void 0:t.ignoreAvailabilityWindow)&&i}get qAt(){return this.Ypt}get AAt(){return this.hpt}get GAt(){return this.Gpt}get Awt(){return this.Vpt}get KAt(){return this.qL.KAt||this.An}get Jwt(){return this.qL.Jwt}get Wpt(){return this.Hpt}get qpt(){return this.An}get tvt(){return this.zpt}uvt(){var t;return null==(t=this.cpt)?void 0:t.dpt}yvt(){var t;return null==(t=this.cpt)?void 0:t.lpt}Yn(t,i,e,s){var n;const r=void 0!==this.qL&&this.qL.Rg===Le.Hx;this.qL=t,this.Hpt=null!=s?s:e,this.An=e;const h=[Of(i)];this.hpt=t.AAt&&t.AAt.length>0?FY(t.AAt.map((t=>t.zu)),h):h,this.Gpt=t.GAt&&t.GAt.length>0?FY(t.GAt,this.hpt):[];const o=this.Gpt.map((t=>t.href)),a=i.href;qt(o,a)||(this.Gpt.push(i),o.push(a));const u=this.Xpt.href;qt(o,u)||(this.Gpt.push(this.Xpt),o.push(u)),this.Ypt=null==(n=t.qAt)?void 0:n.Cwt(),t.tvt&&(this.zpt=new kG(t.tvt));const c=t.Rg===Le.Hx,d=function(t,i,e){const s=[];for(let e=0;e<t.length;e++){const n=t[e];let r;if(n.Cn)r=n.Cn.Cwt();else if(e>0&&t[e-1].ct){r=s[e-1]+t[e-1].ct.Cwt()}else{if(0!==e||i)break;r=0}s.push(r)}const n=[];for(let i=0;i<s.length-1;i++)n.push({zm:t[i],Cn:s[i],ct:s[i+1]-s[i]});if(s.length>0){const r=s.length-1,h=t[r],o=s[r];let a=1/0;i||(a=h.ct?h.ct.Cwt():e-o),n.push({zm:h,Cn:o,ct:a})}return n}(t.Awt,c,this.Ypt);this.Zpt(d,r,c),this.fpt(e)}Zpt(t,i,e){const s=this.Vpt;if(0===t.length)return void No(s);const n=t[0].zm.o;let r=0;for(;r<s.length&&s[r].o!==n;)r++;const h=s.splice(0,r);for(const t of h)t.Qd();if(i&&!e&&s.length>0&&t.length>0){var o;const i=null!=(o=OG(s[0].zm))?o:Ri.zN;var a;const e=null!=(a=OG(t[0].zm))?a:Ri.zN;if(e.mN(i)){const n=e.bN(i);void 0!==this.Ypt&&(this.Ypt+=n.vN());for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];e.Cn=t.Cn,RG(e.zm,t.zm)}i===t.length-1&&(e.ct+=n.vN())}}}for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];0,t.Yn(e.zm,e.ct)}else s.push(new LG(this,e.zm,e.Cn,e.ct))}}fpt(t){for(const i of this.Vpt)i.fpt(t);const i=this.cpt,e=this.gpt(t);i&&MG(i,e)||(this.cpt=e,this.Co(new vG))}gpt(t){return{Bvt:t,dpt:mG(this.Vpt),lpt:yG(this.Vpt)}}Pvt(){if(0===this.Vpt.length)return;const t=this.Vpt[this.Vpt.length-1];if(isFinite(t.ct))return;if(0===t.Ynt.length)return;const i=t.Ynt[0];if(0===i.Jnt.length)return;const e=i.Jnt[0].ant,s=e.Pvt();return s?{wot:s,FAt:e.Zut(s)}:void 0}Qd(){this.Vo();for(const t of this.Vpt)t.Qd()}constructor(t,i,e,s,n){if(super(),this.cpt=void 0,this.Ypt=void 0,this.Qpt=void 0,this.Vpt=[],this.Xpt=i,this.Fpt=n,this.Yn(t,e,s),t.Rg===Le.Hx){const t=this.Pvt();t&&t.FAt&&t.FAt.getTime()<CG.getTime()&&(this.Qpt=new Date(this.KAt.getTime()-1e3*(t.wot.GT+t.wot.ct)),this.fpt(s))}}};function OG(t){let i=PG(t);var e,s;for(const s of null!=(e=t.Ynt)?e:[])i=Nn(i,jG(s));for(const e of null!=(s=t.RAt)?s:[])i=Nn(i,BG(e));return i}function jG(t){let i=PG(t);for(const e of t.Jnt)i=Nn(i,zG(e));return i}function zG(t){return PG(t)}function PG(t){let i;if(void 0!==t.pAt&&(i=Nn(i,BG(t.pAt))),void 0!==t.vAt&&(i=Nn(i,BG(t.vAt))),void 0!==t.mAt)for(const e of t.mAt)i=Nn(i,BG(e));return i}function BG(t){var i,e;return Ri.xN(null!=(i=t.Zwt)?i:qo.ZERO,null!=(e=t.kp)?e:1)}function RG(t,i){if(FG(t,i),t.Cn=i.Cn,void 0!==t.Ynt&&void 0!==i.Ynt&&t.Ynt.length===i.Ynt.length)for(let e=0;e<t.Ynt.length;e++)UG(t.Ynt[e],i.Ynt[e]);if(void 0!==t.RAt&&void 0!==i.RAt&&t.RAt.length===i.RAt.length)for(let e=0;e<t.RAt.length;e++)YG(t.RAt[e],i.RAt[e])}function UG(t,i){if(FG(t,i),void 0!==t.Jnt&&void 0!==i.Jnt&&t.Jnt.length===i.Jnt.length)for(let e=0;e<t.Jnt.length;e++)QG(t.Jnt[e],i.Jnt[e])}function QG(t,i){FG(t,i)}function FG(t,i){if(void 0!==t.pAt&&void 0!==i.pAt&&YG(t.pAt,i.pAt),void 0!==t.vAt&&void 0!==i.vAt&&YG(t.vAt,i.vAt),void 0!==t.mAt&&void 0!==i.mAt&&t.mAt.length===i.mAt.length)for(let e=0;e<t.mAt.length;e++)YG(t.mAt[e],i.mAt[e])}function YG(t,i){t.kp=i.kp,t.Zwt=i.Zwt}var GG=class{async bW(t){await this.Kpt(t,this.NS,this.Jpt,this.$pt).catch(el)}qut(){return new Date(eu()+this.tyt)}async Kpt(t,i,e,s){let n;if(s&&(n=await this.iyt(i,s,e)),void 0===n){Bo(e);for(const s of t)if(n=await this.eyt(i,s,e),void 0!==n)break}this.tyt=void 0===n?0:n-eu()}async eyt(t,i,e){switch(i.vst){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=i.jM;if(s)return await this.iyt(t,s,e);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=i.jM;if(t){const i=new Date(t).getTime();if(!S(i))return i}break}default:return}}async iyt(t,i,e){try{const s=await t.SI({zu:i,lS:Nr.GET,fS:Uv.Ru,Hd:e}),n=await s.DS(),r=new Date(n).getTime();if(!S(r))return r}catch(t){Ao(t)}}constructor(t,i,e){this.NS=t,this.Jpt=i,this.$pt=e,this.tyt=0}},VG=class extends Pl{get FAt(){return this.lvt&&this.lvt.FAt}get YAt(){return this.lvt&&this.lvt.YAt}get jvt(){return this.lvt&&this.lvt.jvt}get o(){return this.lvt&&this.lvt.zm.o}get Wpt(){var t;return null==(t=this.lvt)?void 0:t.Wpt}get syt(){var t;return null==(t=this.lvt)?void 0:t.qpt}get GAt(){return this.lvt?this.lvt.GAt.map((t=>t.href)):[this.nyt]}get nyt(){return this.ryt.href}get WAt(){return this.lvt&&this.lvt.zm.WAt}get HAt(){return this.lvt&&this.lvt.zm.HAt}get qAt(){return this.lvt&&this.lvt.zm.qAt}get XAt(){return this.lvt&&this.lvt.zm.XAt}get ZAt(){var t,i;const e=(null==(i=this.lvt)||null==(t=i.zm.ZAt)?void 0:t.xwt())||0;return _.max(e,HG)}get Uf(){return this.hyt}oyt(t){const i=this.Uf;this.hyt=t,i!==this.Uf&&this.Co(new SG)}get Awt(){return this.Vpt}get ayt(){return this.Rg===Le.Hx?this.Nvt:this.uyt}get cyt(){const t=this.ayt;if(void 0!==t)for(const i of this.Awt)if(i.Cn<=t&&i.jn>t)return i}get aAt(){return this.lvt&&this.lvt.zm.aAt}get KAt(){return this.lvt&&this.lvt.KAt}get Npt(){for(let t=this.Vpt.length-1;t>=0;t-=1){const i=this.Vpt[t].Npt;if(i)return i}}get Nvt(){const t=this.Npt;if(void 0===t)return;const i=t-this.dyt;return _.max(i,this.uyt)}get uyt(){for(const t of this.Vpt){const i=t.avt;if(void 0!==i)return i}}get AS(){return Boolean(this.lyt.AS)}get dyt(){var t,i;if(this.lyt.fyt&&this.Rg===Le.Hx)return this.lyt.fyt;const e=null==(i=this.lvt)||null==(t=i.zm.JAt)?void 0:t.Cwt();return void 0!==e?e:this.Rg===Le.Hx?1.5*this.XAt.Cwt():0}get Jwt(){return this.lvt&&this.lvt.Jwt}get Rg(){return this.lvt?this.lvt.Rg:void 0}get tvt(){var t;return null==(t=this.lvt)?void 0:t.tvt}async Yn(t,e,s){const n=[],r=[],h=t.VAt?i.Dh(t.VAt,this.ryt):this.ryt;void 0===this.lvt?(await this._yt.bW(t.$At),this.lvt=new xG(t,this.ryt,h,this.qut(),this.Fpt),this.lvt.yn(Ou.Rrt,this.Ds)):this.lvt.Yn(t,h,this.qut(),e);const o=this.lvt.Awt;let a;if(0===o.length)a=this.Vpt.slice(),No(this.Vpt);else{const t=o[0].o;let i=0;for(;i<this.Vpt.length&&this.Vpt[i].o!==t;)i++;a=this.Vpt.splice(0,i);for(let t=0;t<o.length;t++){const i=o[t];let e;t<this.Vpt.length?e=this.Vpt[t]:(e=new IG(this,i),n.push(e)),r.push(e.Yn(this.gyt,s))}}await Promise.all(r),this.Vpt.push(...n);for(const t of a)t.Spt();this.Co(new la)}qut(){return this._yt.qut()}Tpt(t){const i=this.Vpt.indexOf(t);if(i>0)return this.Vpt[i-1]}ypt(t){const i=this.Vpt.indexOf(t);if(i>=0&&i+1<this.Vpt.length)return this.Vpt[i+1]}uvt(){return this.lvt?this.lvt.uvt():void 0}yvt(){return this.lvt&&this.lvt.yvt()}fpt(t){this.lvt&&this.lvt.fpt(t)}gn(){this.Vo(),this.wyt=void 0,this.oyt(!1);for(const t of this.Vpt)t.gn();No(this.Vpt),this.lvt&&this.lvt.Qd()}constructor(t,i,e,s,n){super(),this.lvt=void 0,this.hyt=!0,this.Vpt=[],this.wyt=void 0,this.lyt=t,this.ryt=t.Ug,this.gyt=i,this.NS=e,this.Ayt=s,this._yt=new GG(this.NS,this.Ayt,this.lyt.vyt),this.Fpt=n}},WG=class{get Xut(){return this.mpt}constructor(t,i,e,s,n){this.mpt=new VG(t,i,e,s,n)}},HG=1e3,qG=class{get Tr(){return this.lvt}get W(){return this.myt||(this.myt=this.wit(this.pyt.Hd),D(this.myt)),this.myt}async wit(t){this.lvt.Xut.Co(new kn);try{await this.yyt(t),this.lvt.Xut.oyt(!0)}catch(t){throw Ao(t),this.myt=void 0,this.lvt.Xut.oyt(!1),new g("The provided MPEG-DASH document could not be loaded - "+t.message)}this.Myt=this.Tyt(this.pyt.Hd)}async Tyt(t){try{for(;this.lvt.Xut.Rg===Le.Hx;)await dt(this.Nyt,t)}catch(t){}}get Nyt(){return this.lvt.Xut.syt&&this.lvt.Xut.Rg===Le.Hx?this.Dyt(this.pyt.Hd):this.W}async Iyt(t){Bo(t);const i=this.Syt();if(i>0){const e=_.min(i,2147483647);await ri(e,t)}try{await this.yyt(t),this.lvt.Xut.oyt(!0)}catch(t){throw new g("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.Eyt=void 0}}Syt(){const t=this.lvt.Xut.qut().getTime()-this.lvt.Xut.Wpt.getTime();return this.lvt.Xut.ZAt-t}byt(t){const i=this.lvt.Xut.yvt();if(i){const e=i.getTime()-t.getTime();if(e>0)return e}this.lvt.Xut.fpt(t);const e=this.lvt.Xut.yvt();return e?e.getTime()-t.getTime():NaN}async Dyt(t){this.Eyt||(this.Eyt=this.Iyt(t));const i=new na;i.Zd(t);try{await Promise.race([this.Eyt,this.Lyt(i.Hd)].filter(Yt))}catch(t){el(t)}finally{i.Xd()}}Lyt(t){const i=this.lvt.Xut.qut(),e=this.byt(i);if(!S(e)&&!this.Tr.Xut.jvt)return this.kyt(e,t)}async kyt(t,i){await ri(t,i);const e=this.lvt.Xut.qut();this.lvt.Xut.fpt(e)}async Cyt(t,i){const e=await this.Oyt.xyt(t,{},i);return(new CY).ivt(e.jyt,e.IS)}gn(){return this.pyt.Xd(),this.Myt=void 0,this.myt=void 0,this.Eyt=void 0,this.lvt.Xut.gn(),Promise.resolve()}constructor(t,i,e,s,n){this.pyt=new na,this.yyt=async t=>{try{const i=this.lvt.Xut.qut(),e=await this.Cyt(this.lvt.Xut.GAt,t);await this.lvt.Xut.Yn(e,i,t)}catch(t){throw du(t)&&this.lvt.Xut.oyt(!1),t}},this.Oyt=s,this.lvt=new WG(t,i,e,this.pyt.Hd,n)}},XG=class extends wn{constructor(t,i){super("Nwt"),this.Lwt=t,this.Rnt=i}},ZG=class extends Pl{get Rnt(){return this.Unt}get Rg(){return this.X0}get Z(){return this.ag.slice()}UI(t){t&&this.Unt!==t&&this.zyt(t)}QI(t){this.Unt===t&&this.zyt(void 0)}zyt(t){this.Unt=t,this.Co(new XG(this,this.Unt))}gn(){this.Vo();for(const t of this.ag)t.gct=void 0;No(this.ag)}constructor(t,i){super(),this.Unt=void 0,this.X0=t,this.ag=i;for(const t of this.ag)t.gct=this}};var KG,JG=class extends wn{constructor(t,i,e){super(l.Kg),this.currentTime=t,this.initDataType=i,this.initData=e}};function Tr(t,i,e,s,n){let r=[],h=[];for(const t of i)t.Rg===pg.ym?r=r.concat(t.Z):t.Rg===pg.pm&&(h=h.concat(t.Z));return[$G(t,r,e,s,null==n?void 0:n.preferredAudioCodecs),tV(t,h,e,s,null==n?void 0:n.preferredVideoCodecs)].filter(Yt)}function $G(t,i,e,s,n){const r=Zt(s||[],(t=>t.aht===pg.ym&&t.Rt)),h=[eV(r,e,t),sV(r),nV(r,n),rV(),t=>{const i=t.filter((t=>"main"===t.zt));return i.length>0?i:t}];return iV(i,h)}function tV(t,i,e,s,n){const r=Zt(s||[],(t=>t.aht===pg.pm&&t.Rt)),h=[eV(r,e,t),nV(r,n),rV(),t=>{const i=t.filter((t=>"main"===t.zt));return i.length>0?i:t}];return iV(i,h)}function iV(t,i){if(0===t.length)return;let e=t;for(const t of i){if(1===e.length)return e[0];e=t(e)}return e[0]}function eV(t,i,e){return s=>{const n=t?t.Got.o:void 0;if(!Yt(n))return s;const r=null==i?void 0:i.BAt,h=e.BAt,o=r&&h&&r.jM===h.jM,a=Zt(s,(t=>t.Got.o===n));return o&&a?[a]:s}}function sV(t){return i=>{const e=t?t.gs:"",s=i.some((t=>""!==t.gs))?i.filter((t=>""!==t.gs)):i;if(""===e)return s;const n=s.filter((t=>t.gs===e));return n.length>0?n:s}}function nV(t,i){return t=>{if(i&&i.length>0)for(const e of i){const i=t.filter((t=>t.Ng.og.some((t=>Lt(t.wst,e)))));if(i.length>0)return i}return t}}function rV(){return t=>{let i=[],e=-1/0;for(const s of t){const t=s.Got.LP;t>e?(e=t,i=[s]):t===e&&i.push(s)}return i}}!function(t){t.Pyt="api",t.Byt="start"}(KG||(KG={}));var hV={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},oV=class{Ryt(t,i,e){const s=this.zut.maxRetries===1/0?hV:this.zut;return hu((()=>this.Uyt(t,i,e)),e,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async Uyt(t,i,e){let s;for(const n of t)try{const t=new Pc({zu:n,fS:Uv.Ru,dS:i,AS:this.Qyt,lS:Nr.GET,Rg:iu.XI,gS:Kt.rT,Hd:e,CI:15e3,_S:5e3}),s=await this.NS.SI(t),r=await s.DS(e);return{jyt:r,Fyt:n,IS:s.IS}}catch(t){s=t}throw s}constructor(t,i,e=hV){this.NS=t,this.Qyt=i,this.zut=e}},aV=class{async xyt(t,i,e){let s;for(const n of this.Yyt)try{return await n.xyt(t,i,e)}catch(t){Ao(t),s=t}throw s}constructor(t){this.Yyt=t}},uV=class{async xyt(t,i,e){const s=await this.Aot.bet(t);if(s)return{jyt:s.data,Fyt:s.locationURL,IS:s.responseURL};throw new g("Manifest fetch from cache unsuccesful")}constructor(t){this.Aot=t}},cV=class{async xyt(t,i,e){return await this.Gyt.Ryt(t,i,e)}constructor(t){this.Gyt=t}};function dV(t,i){return new aV([new uV(i),new cV(t)])}var lV=class{async xyt(t,i,e){const s=await this.Oyt.xyt(t,i,e);return await this.Vyt(s),s}async Vyt(t){await this.Wyt.Bet({key:V(t.Fyt),locationURL:ma(t.Fyt),responseURL:ma(t.IS),data:t.jyt,references:[this.Hyt.o]})}constructor(t,i,e){this.Oyt=t,this.Wyt=i,this.Hyt=e}},fV=class extends wn{constructor(){super(l._w)}},_V=class extends wn{constructor(){super(l.fw)}},gV=class extends St{qyt(t){return t.Jf=Zs.LOADED,this.tt(t),t}Xyt(t){for(const i of this.Z.og)if(i.Og===t)return i}constructor(){super()}};function wV(t,i){return""===i?t:t+" "+i}var AV=class extends Gs{get va(){return this.Xa||(this.Xa=function(t){return xl(Mh(t),{get attributes(){return t.fI},get eventID(){var i;return""+(null!=(i=t.Zyt)?i:"")}})}(this)),this.Xa}aN(t){return this.O===t.O}constructor(t,i,e,s,n){super(t,i,e,!1,null==n?void 0:n.toString()),this.fI=s,this.Zyt=n}},vV=class extends gV{Kyt(t){const i=this.MS.yS(jo.Nm,"","","",void 0,Kc.EVENT_STREAM);return i.Og=t,this.qyt(i),i}Jyt(t,i,e){const s=t.vst;var n;const r=null!=(n=t.jM)?n:"";var h;const o=null!=(h=t.kp)?h:1;var a;const u=null!=(a=t.Zwt)?a:qo.ZERO,c=wV(s,r);let d=this.Xyt(c);d||(d=this.Kyt(c));for(const s of t.xF)if(!mV(s,d)){const t=pV(s,o,u,i);t.VT>e&&d.SS(t)}}async $n(t){await this.tr(),this.Opt=t,this.Opt.yn(l.dw,this.$yt),this.$yt()}async tr(){this.Opt&&(this.Opt.fn(l.dw,this.$yt),this.Opt=void 0);for(const t of this.Z.og)this.MS.bS(t);await super.tr()}constructor(t){super(),this.Opt=void 0,this.$yt=()=>{var t,i;const e=null!=(i=null==(t=this.Opt.uvt())?void 0:t.Cn)?i:0;if(e>0)for(const t of this.Z.og)Js(t,e);for(const t of this.Opt.Awt)if(t.jn>e)for(const i of t.RAt)this.Jyt(i,t,e)},this.MS=t}};function mV(t,i){const e=t.o;if(void 0!==e){if(Zt(i.L.og,(i=>i.Zyt===e&&i.O===t.zm)))return!0}return!1}function pV(t,i,e,s){const n=t.o,r=t.zM.toSigned().subtract(e),h=t.ct,o=t.zm,a=t.fI,u=r.toNumber()/i+s.Cn,c=h?h.toNumber()/i:void 0,d=void 0!==c?u+c:s.Ipt;return new AV(u,d,o,a,n)}function yV(t,i,e,s,n){const r=[],h=Zt(e,(t=>t.vst===t_));if(void 0===h)return;const o=h.jM?function(t){const i=t.split(":",1)[0];switch(i){case"cbcs":case"cenc":return i;default:return}}(h.jM.toLowerCase()):"cenc";if(void 0!==o){for(const t of e)if(t.vst!==t_)for(const i of fm(t.vst)){const e=n&&t.Uwt?[t.Uwt]:[];r.push({ZA:i,Mz:e,Tz:void 0,Sj:void 0})}if(r.length)return{jO:t,Ugt:{tMt:o,zO:h.zO},Rgt:r,iMt:i===pg.ym?s.slice():[],eMt:i===pg.pm?s.slice():[],H4:!1}}}function MV(t,i){if(!t)return i;if(!i)return t;const e=[],s=cs();var n;return TV(e,s,t.Rgt),TV(e,s,i.Rgt),{jO:t.jO,Ugt:{tMt:t.Ugt.tMt,zO:null!=(n=t.Ugt.zO)?n:i.Ugt.zO},Rgt:e,iMt:NV(t.iMt,i.iMt,qt),eMt:NV(t.eMt,i.eMt,qt),H4:t.H4||i.H4||!1}}function TV(t,i,e){for(const s of e){const e=s.ZA.Lb;let n;i.has(e)?(n=i.get(e),n.Mz=NV(n.Mz,s.Mz,DV)):(n=Tt({},s),t.push(n),i.set(e,n))}}function NV(t,i,e){const s=t.slice();for(const t of i)e(s,t)||s.push(t);return s}function DV(t,i){for(const e of t)if(p_(e,i))return!0;return!1}function IV(t,i,e){let s;const n=t.Ast;if(n){const r=t.CF,h=[];for(const i of t.wst)h.push(r+'; codecs="'+i+'"');s=yV(i||{},t.Rg,n,h,e)}for(const n of t.Jnt)s=MV(s,SV(n,i,e));return s}function SV(t,i,e){return yV(i||{},t.Rg,t.Ast||[],[t.qz],e)}function EV(t){return t?t.Rgt.map((i=>{const e=bV(t.jO,i.ZA),s=t.Ugt.tMt;return{ZA:i.ZA,Mz:i.Mz,Sj:i.Sj,vP:[{initDataTypes:[i.ZA.Eb],audioCapabilities:LV(t.iMt,s,null==e?void 0:e.audioRobustness),videoCapabilities:LV(t.eMt,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]}})):[]}function bV(t,i){switch(i.Rg){case N.BA:return t.widevine;case N.PA:return t.playready;case N.RA:return t.fairplay;case N.UA:return t.clearkey}}function LV(t,i,e){if(0!==t.length)return t.map((t=>({contentType:t,encryptionScheme:i,robustness:e})))}var kV=class extends gV{Kyt(t){const i=this.MS.yS(jo.Nm,t.o,"thumbnails","",!1,Kc.DEFAULT);return i.jg=Ha.Jn,this.qyt(i),i}async $n(t){await this.tr(),this.Opt=t,this.Opt.yn(l.dw,this.Yn),this.Yn()}sMt(t){this.nMt(t),this.rMt()}rMt(){const t=[];for(const i of this.Z.og)this.hMt(i)||t.push(i);for(const i of t)this.it(i)}nMt(t){const i=[];for(const e of this.pct)-1===t.indexOf(e)&&i.push(e);for(const t of i)To(this.pct,t)}async tr(){this.Opt&&(this.Opt.fn(l.dw,this.Yn),this.Opt=void 0);for(const t of this.pct)t.fn(Ou.Rrt,this.oMt);this.pct.length=0;for(const t of this.Z.og)this.MS.bS(t);await super.tr()}gn(){return this.oMt=void 0,super.gn()}aMt(){var t,i;const e=null!=(i=null==(t=this.Opt.uvt())?void 0:t.Cn)?i:0;if(e>0)for(const t of this.Z.og)Js(t,e)}uMt(t){return this.Z.og.some((i=>i.o===t.o))}cMt(t){return Zt(this.Z.og,(i=>i.o===t.o))}hMt(t){return this.pct.some((i=>t.o===i.o))}constructor(t){super(),this.pct=[],this.Yn=()=>{const t=[];for(const i of this.Opt.Awt)for(const e of i.Ynt)if(e.Rg===pg.nT&&e.Jnt.length>0){const i=e.Jnt[0];t.push(i),this.uMt(i)||this.Kyt(i),-1===this.pct.indexOf(i)&&(this.pct.push(i),i.yn(Ou.Rrt,this.oMt)),this.dMt(i)}this.sMt(t)},this.dMt=t=>{const i=this.cMt(t);i&&t&&i.jg!==Ha.Ch&&(this.aMt(),function(t,i){const e=t.ant,s=t.pvt();if(!s)return;const n=s.Rvt,r=s.Uvt,h=t.ji,o=t.Ti,[a,u]=function(t){for(const i of t)if(Pi(i.vst,xV)||Pi(i.vst,OV)){const t=i.jM.match(CV);if(t){const[,i,e]=t;return[Number(i),Number(e)]}}return[1,1]}(t.nAt);let c=n;for(;c&&c.pot<=r.pot;){const s=t.Avt.ct||c.ct,n=jV(i,c,t.Kat(c).zu,h,o,a,u,s);for(const t of n)i.SS(t);c=e.qat(c)}}(t,i))},this.MS=t;const i=this;this.oMt=function(){i.dMt(this)}}},CV=/^(\d+)x(\d+)$/,xV="http://dashif.org/guidelines/thumbnail_tile",OV="http://dashif.org/thumbnail_tile";function jV(t,i,e,s,n,r,h,o){const a=[],u=i.GT,c=r*h,d=s/r,l=n/h,f=_.round(d),g=_.round(l),w=o/c;if(1===c){const i=u+w;return zV(t,u,i,e)?a:[new Gs(u,i,e,!1)]}for(let s=0;s<h;s++)for(let n=0;n<r;n++){const h=u+(s*r+n)*w,o=h+w,c=e+"#xywh="+_.round(n*d)+","+_.round(s*l)+","+f+","+g;if(zV(t,h,o,c)||a.push(new Gs(h,o,c,!1)),o>=i.VT)return a}return a}function zV(t,i,e,s){return t.L.og.some((t=>t.GT===i&&t.VT===e&&t.O===s))}var PV=class extends Gs{get OM(){return this.lMt}get jM(){return this.fMt}get _Mt(){return this.gMt}get va(){return this.Xa||(this.Xa=function(t){return xl(Mh(t),{get schemeIDURI(){return t.OM},get value(){return t.jM},get emsgID(){return t._Mt}})}(this)),this.Xa}aN(t){return Gi(this.O,t.O)}constructor(t,i,e,s,n,r){super(t,i,r,!1),this.lMt=e,this.fMt=s,this.gMt=n}},BV=class t extends gV{Aut(i,e,s){const n=no.fp(ha(i));if(!n)return;const r=function(t,i){const e=[];for(const s of t)_g(s,i)&&e.push(s);return e}(n,Po.fm);if(r.length){const i=t.wMt(n,e,s);this.AMt(r,i,s)}}AMt(t,i,e){for(const s of t){let t;t=1===s.dp?s.zM.toNumber()/s.kp+e:i+s.RM/s.kp;const n=t+s.PM/s.kp;"https://aomedia.org/emsg/ID3"===s.OM||"https://developer.apple.com/streaming/emsg-id3"===s.OM?this.vMt(s,t):this.mMt(s,t,n)}}mMt(t,i,e){const s=wV(t.OM,t.jM);let n=this.Xyt(s);n||(n=this.pMt(s),this.qyt(n)),n.SS(new PV(i,e,t.OM,t.jM,t.o,t.BM))}vMt(t,i){const e=dx(ha(t.BM));if(!e)return;const s=wV(t.OM,t.jM);let n=this.Xyt(s);n||(n=this.yMt(s),this.qyt(n));for(const t of e.M1){const e=new mx(i,t);BC(e,n.L.og),n.SS(e)}}static wMt(t,i,e){const s=il(t,Po._m);return s?Y(s.KM,s.kp)+e:i}pMt(t){const i=this.MS.yS(jo.Nm,"","","",void 0,Kc.EMSG);return i.Og=t,i.jg=Ha.zg,i}yMt(t){const i=this.MS.yS(jo.Nm,"","","",void 0,Kc.ID3);return i.Og=t,i.jg=Ha.zg,i}async tr(){for(const t of this.Z.og)this.MS.bS(t);await super.tr()}constructor(t){super(),this.MS=t}},RV=class extends BV{async $n(t){await this.tr(),this.Opt=t,this.Opt.yn(l.dw,this.$yt),this.$yt()}async tr(){this.Opt&&(this.Opt.fn(l.dw,this.$yt),this.Opt=void 0),await super.tr()}constructor(...t){super(...t),this.$yt=()=>{var t,i;const e=null!=(i=null==(t=this.Opt.uvt())?void 0:t.Cn)?i:0;this.OI(e)}}};var UV=class{Cet(t,i){return this.MMt?this.Aot.Cet(t,i):Promise.resolve(!1)}Oet(t,i){return this.MMt?this.Aot.Oet(t,i):Promise.resolve(void 0)}async bet(t){const i=await this.Aot.bet(t);return this.MMt=void 0!==i,i}CH(t){return this.Aot.CH(t)}constructor(t){this.MMt=!1,this.Aot=t}},Qa=class extends df{fA(){this.Qo.Mf=1/0}canChangePlaybackRate(){return!0}getMinimumLatencyMargin(){return 0}constructor(t,i,e){super(t,i,e)}},QV=[l.gw,l.Aw,l.Mw,l.lw,l.Tw],FV=[l.ww,l.Ew,l.ew,l.$g],YV=class t extends Pl{TMt(t){return!!this.Fz&&this.Fz.gq(t)}async H$(t){this.Fz=await this.sA.$n(t),this.NMt(),this.DMt(),this.Fz.t0(this.ct)}IMt(t){return this.Fz.Aq(t)}async SMt(){this.EMt=this.bMt,this.Fz&&(await this.sA.tr(),this.Fz=void 0)}t$(){this.Fz.t$()}GJ(){const t=this.ct;this.Fz.ct<t&&this.Fz.t0(t),this.Fz.GJ()}async LMt(t){const i=this.Fz,e=[];i.V$&&e.push(Yk(i.V$,t)),i.W$&&e.push(Yk(i.W$,t)),await Promise.all(e)}kMt(t,i,e,s,n,r){const h=this.sA,o=this.Fz;return new $F(h,o,t,i,e,s,n,r,this.CMt,h,this.xgt,this.zut,this.qgt)}xMt(t,i,e){return t.Aq(i,e,this.Fz)}async OMt(t,i,e,s){const n=this.kMt(this.NS,this.PB,this.Aot,this.bc,t,s);return n.yn(Ou.Qrt,this.jMt),n.yn(l.lw,this.Ds),await n.bW(i,e),n}zMt(t){void 0===t&&(t=!1),this.PMt.Xd(),this.V2.Xd(),this.BMt.Xd(),this.BMt=new na,this.RMt=this.UMt(this.QMt,this.W2,this.RMt,t,this.BMt.Hd).catch(this.bwt)}async UMt(t,i,e,s,n){await Promise.all([t,i,e]),Bo(n),await dt(this.FMt.Zb,n);const r=this.YMt;await r.pht(),this.GJ(),Bo(n);const h=r.yc,o=r.Ewt,a=r.Swt;let u=this.GMt(h,a,h,o,!1),c=this.VMt(a,u);!s&&this.TMt(c)?await this.WMt(a,u,c):(u=this.GMt(h,a,h,o,!0),c=this.VMt(a,u),await this.HMt(a,u,c,n)),Bo(n),this.e_?this.Sm(this.Mf):this.qMt(),this.XMt()}async WMt(t,i,e){const s=this.YMt;await this.IMt(e),this.ZMt=e,await this.xMt(s,t,i),await s.Mht(Eh.irt)}async HMt(t,i,e,s){const n=this.YMt;this.K2(),this.KMt();const r=this.JMt;await this.SMt(),await this.H$(e),this.ZMt=e,await this.xMt(n,t,i);try{const t=this.$Mt(r,!1,!0,s);await n.Mht(Eh.irt),await t}finally{this.n3(),this.tTt()}}get ht(){return this.lT}get jz(){const t=this.JMt,i=this.iTt,e=i.fB(t);if(-1!==e)return{Cn:i.Cn(e),jn:i.jn(e)}}get iTt(){var t,i,e;const s=null!=(e=null==(t=this.YMt)?void 0:t.wf)?e:Ai.SB();var n;const r=null!=(n=null==(i=this.eTt)?void 0:i.wf)?n:Ai.SB();return s.cB(r)}get wf(){return this.iTt.ks()}get vf(){var t;const i=null==(t=this.lvt)?void 0:t.Xut,e=null==i?void 0:i.YAt;if(!i||!e)return;const s=e.getTime(),n=1e3*this.Mf;return new Date(n+s)}set vf(t){var i;const e=null==(i=this.lvt)?void 0:i.Xut,s=null==e?void 0:e.YAt;if(!t||!e||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.Sm(r-n)}get bt(){return this.bc}get JMt(){return void 0!==this.f2?this.f2:void 0!==this.sTt?this.sTt:this.sA.Mf}get Mf(){return this.JMt}set Mf(t){this.Sm(t,t===1/0)}get ct(){let t=NaN;return this.YMt&&this.YMt.wwt?t=this.YMt.jn:this.lvt&&void 0!==this.lvt.Xut.Rg&&(t=this.lvt.Xut.qAt?this.lvt.Xut.qAt.Cwt():1/0),t}get jn(){return this.ct}get If(){return!(!this.YMt||!this.YMt.wwt)&&(this.e_?this.JMt===this.YMt.jn:this.sA.If)}get lt(){return this.Bz}get bf(){return this.Rz}get kf(){}nTt(){var t;const i=this.rTt;if(0===i.U)return!0;var e;return(null!=(e=null==(t=this.jz)?void 0:t.jn)?e:this.JMt)>=i.Cn(0)}hTt(){var t;if(!this.lvt)return!1;if(this.lvt.Xut.Rg!==Le.Hx)return!1;const i=null==(t=this.YMt)?void 0:t.yc;if(i&&i.Frt)return!0;const e=[];for(const t of this.lvt.Xut.Awt){const i=t.avt,s=t.Ipt;void 0!==i&&void 0!==s&&e.push(i,s)}const s=new Ai(e).uB();return function(t,i,e){if(!i.U||!e.U)return Ai.SB();const s=i.Cn(0),n=i.jn(i.U-1),r=t.Sn(e).hB().Sn(t).cB(i);return Ai.IB(r.Cn(0),r.jn(r.U-1)).dB(r).mB(((t,i)=>t<s&&i<=n&&i-t>Ac))}(this.iTt,this.rTt,s).U>0}get jf(){return Tt({},this.bMt,{mT:Vo.Ib.ez(),pT:this.oTt,yT:{amountOfBufferedAudioSegments:this.aTt,amountOfBufferedVideoSegments:this.uTt}})}get bMt(){return function(t,i){return{wT:t.wT+i.wT,AT:t.AT+i.AT,vT:t.vT+i.vT}}(this.EMt,this.sA.zf())}get Pf(){return this.sA.Pf}set Pf(t){this.sA.Pf=t}get Ff(){return this.g2?this.cTt:this.YMt&&this.YMt.wwt?this.dTt:this.cTt}get Gf(){return this.sA.Gf}set Gf(t){this.sA.Gf=t}get Hf(){let t=this.Uo;return this.YMt&&(t=t.cB(this.lTt)),t.uB(.1).ks()}get lTt(){return this.sA.Hf}fTt(t){this.Uo=this.Uo.cB(t)}get Xf(){return this.Qz}set Xf(t){this.Qz=t,this._Tt()}get Jf(){let t=this.sA.Jf;return this.gTt&&(t=_.max(ae.Xn,t)),t}get rTt(){return this.wTt(!1)}get ATt(){return this.wTt(!0)}get t_(){return this.rTt.ks()}get e_(){return this.bB||this.vTt}get vTt(){return this.sA.e_}get m0(){return this.sA.m0}get Yz(){}get mTt(){var t,i;return null!=(i=null==(t=this.lvt)?void 0:t.Xut.Rg)?i:Le.Wx}get nt(){return this.Dl}get rt(){return this._T}get r_(){var t;return this.pTt||(null==(t=this.yTt())?void 0:t.Ti)||0}get a_(){var t;return this.MTt||(null==(t=this.yTt())?void 0:t.ji)||0}get c_(){return this.sA.c_}set c_(t){this.sA.c_=os(t,0,1)}get f_(){return this.Gz}get g_(){return!1}set g_(t){}get Vz(){return this.Wz}TTt(t){t.yn(QV,this.Ds),t.yn(l.Dw,this.NTt),t.yn(l.Yg,this.DTt),t.yn(hh.ha,this.ITt),t.yn(l.Vg,this.STt),t.yn(l.Aw,this.ETt),t.yn("Nwt",this.bTt),t.yn("swt",this.bTt)}LTt(t){t.fn(QV,this.Ds),t.fn(l.Dw,this.NTt),t.fn(l.Yg,this.DTt),t.fn(hh.ha,this.ITt),t.fn(l.Vg,this.STt),t.fn(l.Aw,this.ETt),t.fn("Nwt",this.bTt),t.fn("swt",this.bTt)}kTt(t){t.yn(l.gw,this.Ds)}CTt(t){t.fn(l.gw,this.Ds)}yTt(){if(!this.YMt)return;const t=Zt(this.YMt.Swt,(t=>t.aht===pg.pm));return t?t.yg:void 0}wTt(t){var i;const e=null==(i=this.lvt)?void 0:i.Xut;if(!e)return Ai.SB();const s=e.uyt;let n=t?e.Npt:e.Nvt;if(void 0===s||void 0===n)return Ai.SB();if(!t){const t=this.lTt;t.U>0&&t.jn(t.U-1)>n&&(n=_.min(t.jn(t.U-1),e.Npt))}const r=this.ct;return isFinite(r)&&r>n&&(n=r),Ai.IB(s,n).nB()}async $n(t,i){let e,s;Bo(i);const n=this.lvt.Xut;try{e=n.cyt,s=n.ayt}catch(t){throw new g("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!e)throw new g("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new g("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.xTt(t.textTracks),this.K2();const r=this.Fnt(e),h=Tr(e,r,void 0,void 0,this.cwt),o=this.GMt(e,h,e,h,!0);h.forEach((t=>t.Rt=!0));const a=this.VMt(h,o);await this.H$(a),this.ZMt=a,Bo(i);const u=await this.OMt(e,r,h,o);Bo(i),this.OTt(u),this.n3(),Bo(i),await u.Mht(),Bo(i),this.jTt||this.Sm(s,!0,KG.Byt)}qMt(){this.PMt.Xd(),this.PMt=new na,this.QMt=this.zTt(this.QMt,this.RMt,this.PMt.Hd).catch(this.bwt)}PTt(){this.PMt.Xd()}async zTt(t,i,e){for(await Promise.all([t,i]),Bo(e);;){var s;const t=null==(s=this.YMt)?void 0:s.yc;if(!t){0;break}if(!await this.BTt(t,e)){0;break}}}async BTt(t,i){var e;Bo(i);const s=this.YMt;for(0;this.lvt.Xut.Rg===Le.Hx&&void 0===(null==(e=this.ypt(t))?void 0:e.avt);)await dt(this.RTt.Nyt,i),await this.UTt();for(Bo(i),await this.UTt(),Bo(i);!s.dwt();)await s.df(Sr.Gct,i),await this.UTt();Bo(i),await this.UTt(),Bo(i);const n=this.ypt(t);return n?(this.QTt(n)?await this.FTt(n,i):await this.YTt(n,i),!0):(this.t$(),!1)}QTt(t){var i,e,s,n,r;const h=null!=(r=null==(i=this.bc)?void 0:i.seamlessSwitchStrategy)?r:si.iT;if(h===si.hT)return!0;if(h===si.oT)return!1;const o=this.YMt,a=null==o?void 0:o.yc,u=null==o?void 0:o.Swt,c=Tr(t,this.Fnt(t),a,u,this.cwt),d=this.GMt(t,c,a,u,!1);if(h===si.CLEAR_ONLY&&((null==(e=this.YMt)?void 0:e.Bgt)||d)||h===si.SAME_DRM_ONLY&&!((null==(s=this.YMt)?void 0:s.Bgt)&&d||!(null==(n=this.YMt)?void 0:n.Bgt)&&!d))return!1;const l=this.VMt(c,d);return this.TMt(l)}GTt(){return!0}VTt(t){const i=this.WTt();for(const e of i)e!==t&&(e.jg=Ha.Ch)}XMt(){if(void 0!==this.HTt){if(this.HTt.Bg){const t=Zt(this.ht.og,(t=>t.Rt));void 0!==t&&this.HTt.gs===t.gs||(this.HTt.jg=Ha.Ch)}}else this.qTt()}qTt(){if(this.WTt().length)return;const t=Zt(this.ht.og,(t=>t.Rt));if(void 0===t)return;const i=this.nt.og.filter((t=>t.Bg));for(const e of i)if(e.gs===t.gs)return e.jg=Ha.Jn,void(this.HTt=e)}WTt(){return this.nt.og.filter((t=>t.jg===Ha.Jn&&(t.zt===jo.yI||t.zt===jo.Mm)))}XTt(t){if(t&&this.HTt){const i=function(t,i){if(""===t.gs)return;return i.filter((i=>i.gs===t.gs))[0]}(this.HTt,t.nt.og);i&&(i.jg=Ha.Jn)}}async FTt(t,i){var e,s;const n=this.YMt;let r=this.eTt;const h=this.ZMt;try{Bo(i);const e=n.yc,s=n.Swt,h=this.Fnt(t),o=Tr(t,h,e,s,this.cwt),a=this.GMt(t,o,e,s,!1);o.forEach((t=>t.Rt=!0));const u=this.VMt(o,a);for(0,await n.pht(),this.GJ(),Bo(i),r&&r.yc===t?(this.TMt(u)&&await this.IMt(u),this.ZMt=u):(r&&await r.gn(!0),this.TMt(u)&&await this.IMt(u),this.ZMt=u,r=await this.OMt(t,h,o,a),this.eTt=r,this.kTt(r),this.ZTt.fg=r.nt),await r.Mht(),Bo(i);this.JMt<t.Cn;)await this.sA.df(l.Sw,i);Bo(i),this.OTt(r)}catch(t){throw ut(t)&&(r&&await r.pht(),h&&this.ZMt!==h&&(this.TMt(h)&&await this.IMt(h),this.ZMt=h)),t}(null==(s=this.bc)||null==(e=s.dash)?void 0:e.forceSeekToSynchronize)&&await this.KTt(t,i)}async KTt(t,i){const e=Date.now()/1e3;if(void 0===this.JTt)this.JTt=e;else if(e-this.JTt>900){this.JTt=e,this.KMt();const s=_.max(this.JMt,t.Cn);try{await this.$Mt(s,!1,!0,i)}finally{this.tTt()}}}async YTt(t,i){for(Bo(i),await this.YMt.pht(),this.GJ(),await this.LMt(t.Cn),Bo(i),this.t$();!this.sA.If&&this.JMt<t.Cn;)await this.sA.df([l.Sw,l.Jg],i);Bo(i);const e=this.YMt.yc,s=this.YMt.Swt,n=this.Fnt(t),r=Tr(t,n,e,s,this.cwt),h=this.GMt(t,r,e,s,!0);r.forEach((t=>t.Rt=!0));const o=this.VMt(r,h);this.YMt&&(this.$Tt.fn(Ce.ra,this.tNt),await this.YMt.gn(),this.$Tt.yn(Ce.ra,this.tNt),this.YMt=void 0),this.eTt&&(await this.eTt.gn(),this.eTt=void 0),this.KMt(),this.K2();const a=_.max(this.JMt,t.Cn);await this.SMt(),await this.H$(o),this.ZMt=o;const u=await this.OMt(t,n,r,h);this.OTt(u);try{const t=this.$Mt(a,!1,!0,i);await u.Mht(),await vu((i=>Promise.race([t,u.df([Sr.Gct],i)])),i)}finally{this.n3(),this.tTt()}}async UTt(){const t=this.eTt;t&&t.yc.Frt&&(await t.gn(!0),this.eTt=void 0)}static iNt(t,i){const e=[],s=[];let n=!i.some((t=>t.Bct.some((t=>"main"===t.jM))));for(const t of i){if(-1!==e.indexOf(t))continue;const r=VV(t.hct.concat(t.Bct),n);n=!1;const h=t.Jnt.map((t=>t.Grt)),o=new cQ(t,h,r),a=WV(t,i);for(const t of a)o.yct(t),e.push(t);s.push(o)}return new ZG(t,s)}Fnt(i){const e=[],s=[];for(const t of i.hwt)t.Rg!==pg.ym&&t.Rg!==pg.pm||(0===t.Jnt.length?this.Co(new wQ("No supported representation found in the AdaptationSet with mimetype : "+t.Rg)):t.Rg===pg.ym?e.push(...t.Ynt):s.push(...t.Ynt));const n=[];return e.length>0&&n.push(t.iNt(pg.ym,e)),s.length>0&&n.push(t.iNt(pg.pm,s)),n}VMt(t,e){var s,n,r,h,o,a,u,c;const d=t.map((t=>{var i;return xU.fut(null!=(i=t.mct)?i:t.Jnt,Fg(t.aht,this.cwt))})).map((t=>({qz:t.qz}))),l=null==(n=this.bc)||null==(s=n.dash)?void 0:s.desiredTimescale;var f;const _=(null==(r=this.bc)?void 0:r.seamlessSwitchStrategy)!==si.oT&&(null==(h=this.bc)?void 0:h.seamlessSwitchStrategy)!==si.CLEAR_ONLY&&(null==(o=this.bc)?void 0:o.seamlessSwitchStrategy)!==si.SAME_DRM_ONLY&&(null!=(f=null==(u=this.bc)||null==(a=u.dash)?void 0:a.needsTimescaleShifting)?f:i.Ys.ZJ),g=null==(c=this.bc)?void 0:c.useManagedMediaSource;return{Rg:wi.Hx,r0:d,Xz:EV(e),H4:null==e?void 0:e.H4,ZJ:_,KJ:l,w0:g}}static eNt(t,i){if(!t.length)return;let e;for(const s of t){const t=0===s.Nct.length;e=MV(e,IV(s.Got,i,t))}return(null==i?void 0:i.preferredKeySystems)&&e&&(e.Rgt=function(t,i){const e=t=>{const e=i.indexOf(t.ZA.Lb);return e>=0?e:i.length};return zc(t,((t,i)=>e(t)-e(i)))}(e.Rgt,i.preferredKeySystems)),e}GMt(i,e,s,n,r){var h,o;const a=this.bc.contentProtection;let u=t.eNt(e,a);if(void 0!==u)return u;var c;const d=null!=(c=null==(h=this.bc)?void 0:h.seamlessSwitchStrategy)?c:si.iT;if(d===si.oT||d===si.CLEAR_ONLY||d===si.SAME_DRM_ONLY)return;const l=null==(o=this.YMt)?void 0:o.Bgt;if(!r&&void 0!==l){const t=!l.H4;if(d===si.iT&&t&&!this.GTt())return;return l}const f=!r&&d===si.iT;return u=this.sNt(i,a,s,n,f),void 0!==u?(u.H4=!0,u):void 0}sNt(i,e,s,n,r){let h=i,o=!1;for(;;){if(h=o?this.Tpt(h):this.ypt(h),void 0===h){if(o)return;o=!0,h=i;continue}const a=Tr(h,this.Fnt(h),s,n,this.cwt),u=t.eNt(a,e);if(r){const t=this.VMt(a,u);if(!this.TMt(t))return}if(void 0!==u)return u}}xTt(t){for(const i of t)i.src&&this.nP.pS(i);ws(this.nP.Z)}m_(){var t;const i=this.Ff;this.cTt=!0,i||(this.g2||(this.nNt(new pe),this.rNt()),(null==(t=this.Oz)?void 0:t.Ww)&&this.Oz.m_(),this.hNt())}p_(){this.oNt||(this.oNt=new Rs),this.aNt();const t=this.oNt.Zb;return D(t),t}aNt(){if(this.cTt=!1,this.L2=!0,this._Tt(),this.If){const t=this.rTt;t.U>0&&this.Sm(t.Cn(0))}this.g2||this.O2().then(this.uNt,this.nNt),this.jMt(),this.hNt()}get dTt(){return this.sA.Ff}O2(){return this.sA.p_()}rNt(){this.sA.m_()}K2(){this.g2||(this.cTt=this.Ff,this.g2=!0,this.rNt())}n3(){this.g2&&(this.g2=!1,this.cTt||this.O2().then(this.uNt,this.nNt),this.jMt(),this.hNt())}hNt(){const t=this.hO,i=this.Ff;t!==i&&(this.hO=i,i?this.Co(new ye(this.Mf)):this.Co(new Ps(this.Mf)))}Sm(t,i,e){return void 0===i&&(i=!1),void 0===e&&(e=KG.Pyt),this.jTt=!0,this.PMt.Xd(),this.V2.Xd(),this.bB=!0,this.f2=t,this.fTt(this.lTt),this.cNt(new Oe(this.Mf)),this.V2=new na,this.W2=this.H2(t,this.QMt,this.W2,this.RMt,this.V2.Hd,i,e).catch(this.bwt),this.W2}dNt(){this.V2.Xd()}async H2(t,i,e,s,n,r,h,o){var a;void 0===r&&(r=!1),void 0===h&&(h=KG.Pyt),void 0===o&&(o=!1),null==(a=this.Oz)||a.y_();try{var u,c;0,await Promise.all([i,e,s]),Bo(n),await dt(this.FMt.Zb,n);const a=this.rTt.rB(t);this.f2=a;const d=o||(null==(c=this.bc)||null==(u=c.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&a<=this.Mf,l=this.lNt(a),f=this.YMt;if(d||!f||!f.t_.gr(a)&&h!==KG.Byt&&f.yc!==l){if(l){let t=this.eTt;if(this.K2(),f&&await f.pht(),t&&t.yc===l&&!d){const i=this.VMt(t.Ewt,t.Bgt);this.GJ(),this.TMt(i)&&await this.IMt(i),this.ZMt=i}else{t&&await t.gn(!0);const i=this.Fnt(l),e=null==f?void 0:f.yc,s=null==f?void 0:f.Swt,n=Tr(l,i,e,s,this.cwt);let r=this.GMt(l,n,e,s,!1);n.forEach((t=>t.Rt=!0));let h=this.VMt(n,r);this.QTt(l)&&!d?(this.GJ(),this.TMt(h)&&await this.IMt(h)):(r=this.GMt(l,n,e,s,!0),h=this.VMt(n,r),f&&(this.$Tt.fn(Ce.ra,this.tNt),await f.gn(),this.$Tt.yn(Ce.ra,this.tNt),this.YMt=void 0),await this.SMt(),await this.H$(h)),this.ZMt=h,t=await this.OMt(l,i,n,r),this.eTt=t,this.ZTt.fg=t.nt,this.kTt(t)}await t.Mht(Eh.nrt),this.OTt(t)}}else{0;const t=this.eTt;if(t&&!t.vwt){await t.pht(),this.GJ();const i=this.VMt(f.Ewt,f.Bgt);this.TMt(i)&&await this.IMt(i),this.ZMt=i}}0;const _=this.$Mt(a,r,!1,n);this.f2=void 0,await this.YMt.Mht(Eh.nrt),Bo(n),this.qMt(),await _,Bo(n),this.n3(),this.bB=!1,this.fNt(new Ms(this.Mf)),this._Nt()}catch(t){if(ut(t))return void 0;0}}_Nt(){if(this.Ff||this.e_||void 0===this.cA)return;const t=this.Mf;var i,e;this.Mf+this.cA-this.f_.wd.maximumOffset<t?null==(i=this.Oz)||i.Cn():null==(e=this.Oz)||e.y_()}async $Mt(t,i,e,s){let n,r,h=!0,o=t;for(;;){const a=this.ATt;if(a.U>0){const i=a.rB(t);o!==i&&(a.gr(o)&&this.lvt.Xut.Rg===Le.Hx||(o=i,h=!0))}if(h)h=!1,n&&D(n),null==r||r.Xd(),r=new na,r.Zd(s),n=this.gNt(o,i,e,r.Hd);else if(!this.vTt&&!this.m0)break;await vu((t=>Promise.race([n,this.df([l.Mw,l.Xg],t),this.lvt.Xut.df(Ou.Rrt,t)])),s)}}async gNt(t,i,e,s){for(this.sA.Sm(t,i,e);this.vTt||this.m0;)await this.sA.df([l.pw,l.aw],s)}KMt(){void 0===this.sTt&&(this.sTt=this.JMt,this.sA.fn(l.yw,this.cNt),this.sA.fn(l.pw,this.fNt))}tTt(){if(void 0===this.sTt)return;const t=this.JMt;this.sTt=void 0,this.sA.yn(l.yw,this.cNt),this.sA.yn(l.pw,this.fNt),this.JMt!==t&&this.wc()}wNt(t){this.Uo=this.Uo.cB(t)}lNt(t){const i=this.lvt.Xut,e=i.Awt.filter((t=>t.ct>=.2));if(0===e.length)return;const s=e[0];if(t<=s.Cn)return s;for(const i of e)if(i.jn>t)return i;return i.Rg!==Le.Hx?e[e.length-1]:void 0}Tpt(t){let i=t.Mpt;for(;i&&i.ct<.2;)i=i.Mpt;return i}ypt(t){let i=t.ppt;for(;i&&i.ct<.2;)i=i.ppt;return i}async ga(t,e,s){var n;if(this.$z.mz(t.contentProtection),this.ANt(),this.bc&&!bl(this.bc)&&await this.tr(),!t||bl(t))return;this.ES=new na,s&&this.ES.Zd(s),this.bc=t,this.vNt=e,this.cwt=t.abr,this.qgt=t.ignoreEmbeddedTextTrackTypes;const r=dV(new oV(this.NS,Boolean(this.bc.useCredentials),this.zut),this.Aot);var h;if(this.oyt(!0),this.RTt=new qG({Ug:i.Dh(this.bc.src),fyt:null!=(h=null==(n=this.bc.latencyConfiguration)?void 0:n.targetOffset)?h:this.bc.liveOffset,vyt:this.bc.timeServer,AS:this.bc.useCredentials},this.mNt(this.cwt),this.NS,r,this.bc.dash),this.lvt=this.RTt.Tr,this.lvt.Xut.yn(l.cw,this.pNt),this.lvt.Xut.yn(l.dw,this.yNt),this.lvt.Xut.yn(Ar.kpt,this.MNt),this.lvt.Xut.yn(Ou.Rrt,this.jMt),await this.TNt.$n(this.lvt.Xut),await this.NNt.$n(this.lvt.Xut),qt(this.qgt,Kc.EMSG)||(this.xgt=new RV(this.MS),this.Dl.Dz(this.xgt.Z),await this.xgt.$n(this.lvt.Xut)),t.latencyConfiguration){const i=t.latencyConfiguration;this.Oz=new Qa(this,this.sA,i),this.Oz.Rt=!0,this.Gz.ka(this.Oz)}this._Tt()}async DNt(){const t=this.lvt.Xut.Uf;var i,e;(this.oyt(t),t)?this.bTt():(await Promise.all([null==(i=this.YMt)?void 0:i.pht(Eh.mrt),null==(e=this.eTt)?void 0:e.pht(Eh.mrt)].filter(Yt)),this.PTt(),this.dNt(),this.BMt.Xd())}get Uf(){return this.hyt}oyt(t){this.hyt!==t&&(this.hyt=t,this.Co(t?new fV:new _V))}_Tt(){return this.lvt?(this.INt=this.SNt(this.INt,this.ES.Hd),this.INt.catch(this.bwt)):Promise.resolve()}async SNt(t,i){t&&(await t,Bo(i));try{this.Xf===Qe.iT||this.L2?await this.ENt(i):this.Xf===Qe.Nm&&await this.bNt(i)}catch(t){throw Ao(t),this.IP(new $i(Ui.MANIFEST_LOAD_ERROR,t.message,t)),t}}async ENt(t){await this.bNt(t),this.LNt||(this.LNt=!0,this.FMt.Zd(this.$n(this.vNt,t)));try{await this.FMt.Zb}catch(t){Ao(t),this.IP(new $i(Ui.MEDIA_DECODE_ERROR,t.message,t))}}async bNt(t){await dt(this.RTt.W,t);const i=this.lvt.Xut;if(void 0===this.Oz&&i.Rg===Le.Hx){const t=i.tvt,e=(null==t?void 0:t.Bpt)?(null==t?void 0:t.Bpt)/1e3:i.dyt,s={minimumOffset:(null==t?void 0:t.jpt)?(null==t?void 0:t.jpt)/1e3:.5*e,maximumOffset:(null==t?void 0:t.Ppt)?(null==t?void 0:t.Ppt)/1e3:1.5*e,targetOffset:e,forceSeekOffset:2.5*e,minimumPlaybackRate:pu,maximumPlaybackRate:uf};this.Oz=new Qa(this,this.sA,s),this.Gz.ka(this.Oz)}}OTt(i){const e=this.YMt;i!==e&&(this.YMt&&this.LTt(this.YMt),this.eTt&&this.CTt(this.eTt),e&&this.fTt(this.lTt),this.YMt=i,this.eTt=e,this.TTt(this.YMt),this.eTt&&this.kTt(this.eTt),this.lT.fg=i.ht,this._T.fg=i.rt,this.XTt(i),this.$Tt.fn(Ce.ra,this.tNt),t.kNt(this.$Tt),this.$Tt.yn(Ce.ra,this.tNt),this.$Tt.fg=i.nt,this.ZTt.fg=void 0,this.qTt())}static kNt(t){for(const i of t.og)i.jg=Ha.Ch}ge(){this.sA.ge()}be(){this.sA.be()}IP(t){this.Bz||(D(this.tr()),this.Bz=De(t),this.Rz=t,this.Co(new Bi(t)))}ANt(){this.Bz=void 0,this.Rz=void 0}NMt(){const t=this.Fz;t&&(t.W$&&(t.W$.NW=this.PB.jW),t.V$&&(t.V$.NW=this.PB.jW))}DMt(){const t=this.Fz;t&&(t.W$&&(t.W$.EW=this.PB.EW),t.V$&&(t.V$.EW=this.PB.EW))}determineStallJumpTarget(){if(this.YMt)return this.YMt.dwt()&&this.Mf>this.YMt.jn-Rk&&!this.YMt.wwt?this.YMt.jn:void 0}async tr(){if(this.CNt)return this.CNt;try{this.CNt=this.xNt(),await this.CNt}finally{this.CNt=void 0}}async xNt(){this.Gf=1,this.ES.Xd(),this.dNt(),this.PTt(),this.BMt.Xd(),this.FMt.Xd(),this.jTt=!1,this.m_(),this.L2=!1,this.lT.fg=void 0,this._T.fg=void 0,this.$Tt.fg=void 0,this.ZTt.fg=void 0,this.INt&&(await this.INt.catch(El),this.INt=void 0),await Promise.all([this.QMt,this.W2,this.RMt,this.FMt.Zb.catch(El)]),this.YMt&&(await this.YMt.gn(!0),this.YMt=void 0),this.eTt&&(this.CTt(this.eTt),await this.eTt.gn(!0),this.eTt=void 0),await this.SMt(),this.ZMt=void 0,this.HTt=void 0,this.hP.tr(),await this.TNt.tr(),await this.NNt.tr(),void 0!==this.xgt&&(this.Dl.Ez(this.xgt.Z),await this.xgt.gn(),this.xgt=void 0),this.MS.tr(),this.lvt&&(this.lvt.Xut.fn(l.cw,this.pNt),this.lvt.Xut.fn(l.dw,this.yNt),this.lvt.Xut.fn(Ar.kpt,this.MNt),await this.RTt.gn(),this.lvt=void 0),this.gTt=!1,this.ONt=NaN,this.jNt=0,this.zNt=0,this.sTt=void 0,this.g2=!1,this.Uo=Ai.SB(),this.hO=!0,this.f2=void 0,this.PNt=!1,this.bB=!1,this.LNt=!1,this.FMt=new Rs,this.oTt=0,this.aTt=0,this.uTt=0,this.bc=void 0,this.vNt=void 0,this.qgt=[],this.JTt=void 0,this.Gz.tr(),this.Oz=void 0,this.EMt={wT:0,AT:0,vT:0},await this.nP.tr(),this.sA.rP()}async gn(){this.Vo(),this.ANt(),await this.tr(),this.Vo(),this.lT.gn(),this._T.gn(),this.$Tt.gn(),this.ZTt.gn(),this.Dl.gn(),this.hP.gn(),this.BNt.Qd(),await this.TNt.gn(),await this.NNt.gn(),this.MS.gn(),this.sA.fn(l.Xg,this.V3),this.sA.fn(fe.Kg,this.s2),this.sA.fn(l.Jg,this.F3),this.sA.fn(l.yw,this.cNt),this.sA.fn(l.pw,this.fNt),this.sA.fn(l.mw,this.ETt),this.sA.fn(l.Sw,this.wc),this.sA.fn([l.jh,l.Sh],this.RNt),this.sA.fn(FV,this.Ds),await this.nP.gn(),this.Dl.gn(),this.PB.fn("TW",this.UNt),this.PB.fn("SW",this.QNt),this.sA.fn(hh.ha,this.FNt),this.sA.fn([l.Wg,l.Vg],this.Ds),this.sA.uP=void 0,this.sA.o5=void 0}w_(){return this.sA.ya}get xf(){return!1}M_(){return!1}T_(){}N_(){}D_(){}I_(){this.zMt(!0)}get cA(){var t;const i=null==(t=this.lvt)?void 0:t.Xut;if(i&&i.Rg===Le.Hx&&i.YAt)return i.qut().getTime()/1e3-i.YAt.getTime()/1e3-this.Mf}constructor(t,i,e,s,n,r,h){super(),this.YMt=void 0,this.eTt=void 0,this.L2=!1,this.ONt=NaN,this.Bz=void 0,this.Rz=void 0,this.g2=!1,this.sTt=void 0,this.f2=void 0,this.PNt=!1,this.jNt=0,this.zNt=0,this.gTt=!1,this.ES=new na,this.FMt=new Rs,this.LNt=!1,this.lvt=void 0,this.RTt=void 0,this.hyt=!0,this.cTt=!0,this.oNt=void 0,this.Uo=Ai.SB(),this.Qz=Qe.FP,this.INt=void 0,this.hO=!0,this.bc=void 0,this.vNt=void 0,this.cwt=void 0,this.qgt=[],this.bB=!1,this.PMt=new na,this.QMt=Promise.resolve(),this.V2=new na,this.W2=Promise.resolve(),this.jTt=!1,this.BMt=new na,this.RMt=Promise.resolve(),this.ZMt=void 0,this.xgt=void 0,this.oTt=0,this.aTt=0,this.uTt=0,this.Wz=new lu,this.JTt=void 0,this.EMt={wT:0,AT:0,vT:0},this.Fz=void 0,this.Oz=void 0,this.bTt=()=>{this.zMt()},this.wc=()=>{this.Co(new nc(this.Mf,this.vf))},this.s2=t=>{this.Co(new JG(this.Mf,t.Eb,t.Ub))},this.NTt=t=>{this.oTt+=t.pT,this.Co(t)},this.DTt=t=>{const i=t.segments.filter((t=>t.Iat));t.track===pg.ym?this.aTt=i.length:t.track===pg.pm&&(this.uTt=i.length)},this.V3=()=>{const t=this.ct;S(t)||t===this.ONt||(this.ONt=t,this.Co(new ht(this.ONt)))},this.RNt=()=>{this.jMt(),this.hNt()},this.F3=t=>{this.If&&this.Co(t)},this.yNt=t=>{this.Ds(t),this.gTt||(this.gTt=!0,this.BNt.YNt())},this.pNt=()=>{this.lvt.Xut.fn(l.cw,this.pNt),this.Co(new kn)},this.STt=t=>{this.IP(t.errorObject),this.Co(t)},this.ITt=t=>{this.IP(t.errorObject)},this.bwt=t=>{ut(t)||this.IP(new $i(Ui.MEDIA_DECODE_ERROR,t.message,t))},this.jMt=()=>{if(!this.Ff)if(this.nTt())if(this.hTt()){const t=this.lvt.Xut.ayt;this.Sm(t,!0)}else;else{const t=this.lvt.Xut.ayt;this.Sm(t,!0)}},this.cNt=t=>{this.PNt=this.e_,this.Co(t)},this.fNt=t=>{const i=this.PNt,e=this.e_;this.PNt=e,i&&!e&&this.Co(t)},this.ETt=()=>{const t=this.a_,i=this.r_;this.jNt===t&&this.zNt===i||(this.jNt=t,this.zNt=i,this.Co(new Vu))},this.tNt=t=>{const i=t.Lt;i.jg===Ha.Jn?(this.VTt(i),this.HTt=i):i===this.HTt&&i.jg===Ha.Ch&&(this.HTt=void 0,this.qTt())},this.uNt=()=>{this.g2||this.oNt&&(this.oNt.Wb(),this.oNt=void 0)},this.nNt=t=>{this.g2||this.oNt&&(this.oNt.qb(t),this.oNt=void 0)},this.MNt=()=>{this.DNt().catch(this.bwt)},this.FNt=t=>{this.IP(yw(t.lt))},this.UNt=()=>{this.NMt()},this.QNt=()=>{this.DMt()},this.NS=t,this.Aot=new UV(n),this.sA=r,this.CMt=h,this.PB=e,this.PB.yn("TW",this.UNt),this.PB.yn("SW",this.QNt),this.Gz=s,this.zut=i.retryConfiguration,this.lT=new zs,this._T=new zs,this.$z=new Cu(t),this.sA.yn(l.Xg,this.V3),this.sA.yn(fe.Kg,this.s2),this.sA.yn(l.Jg,this.F3),this.sA.yn(l.yw,this.cNt),this.sA.yn(l.pw,this.fNt),this.sA.yn(l.mw,this.ETt),this.sA.yn(l.Sw,this.wc),this.sA.yn([l.jh,l.Sh],this.RNt),this.sA.yn(FV,this.Ds),this.sA.yn(hh.ha,this.FNt),this.sA.uP=this.$z,this.sA.o5=this,this.sA.yn([l.Wg,l.Vg],this.Ds),this.BNt=new GV(this,this.sA),this.hP=new OM(this.BNt,!0),this.hP.yn(er.Bw,this.jMt),this.hP.yn(af,this.Ds),this.$Tt=new tu,this.$Tt.yn(Ce.ra,this.tNt),this.ZTt=new tu,this.MS=this.GNt(),this.TNt=new vV(this.MS),this.NNt=new kV(this.MS),this.nP=new bu(this.sA,this.NS),this.Dl=new Ln([this.$Tt,this.TNt.Z,this.NNt.Z,this.nP.Z])}},GV=class extends en{get Jf(){return this.Qo.Jf}YNt(){this.Co(new Lr(this.Mf,this.Jf))}constructor(t,i){super(i),this.Qo=t}};function VV(t,i){const e=t.filter((t=>"urn:mpeg:dash:role:2011"===t.vst)).map((t=>t.jM)).filter(Yt);return i||qt(e,"main")?qt(e,"caption")?"captions":qt(e,"subtitle")?"subtitles":qt(e,"dub")?"translation":"main":qt(e,"sign")?"sign":qt(e,"description")?"descriptions":qt(e,"commentary")?"commentary":"alternative"}function WV(t,i){var e;const s=Zt([...t.nAt,...t.rAt],(t=>"urn:mpeg:dash:adaptation-set-switching:2016"===t.vst));var n;const r=null!=(n=null==s||null==(e=s.jM)?void 0:e.split(","))?n:[],h=[];for(const t of r){const e=Number(t),s=Zt(i,(t=>t.o===e));s&&h.push(s)}return h}var HV=class extends YV{A_(){if(DR(this.sA))return this.sA.A_()}get pTt(){return DR(this.sA)?this.sA.r_:0}get MTt(){return DR(this.sA)?this.sA.a_:0}async gn(){var t;await super.gn(),null==(t=this.VNt)||t.gn()}QTt(t){var i,e;return((null!=(e=null==(i=this.bc)?void 0:i.seamlessSwitchStrategy)?e:si.iT)!==si.iT||!Vt.ub)&&super.QTt(t)}GTt(){return!(Vt.DE&&Vt.EE<3)&&super.GTt()}GNt(){return new Gh(this,new Ax)}mNt(t){return IR(t)}constructor(t,i,e,s,n,r,h){super(t,i,e,s,n,r,new SR(h)),this.Tst=h,Vt.WE&&(this.VNt=new jR(this))}},qV=class extends HV{async gn(){await super.gn(),await this.dP.cP(this.sA)}constructor(t,i,e,s,n,r,h,o){const a=new uc(r);super(t,i,e,s,n,a.SP(h),o),this.dP=a}},XV=class extends jt{get WNt(){return this.pit.WNt}Af(){return super.Af().Im(this.WNt)}Xst(){return super.Xst().Im(this.WNt)}_J(t,i,e){const s=this.WNt;return super._J(t,{n9:i.n9-s,ct:i.ct,UD:i.UD-s},e)}kJ(t,i){const e=this.WNt;return super.kJ(_.max(0,t-e),_.max(0,i-e))}ET(t,i,e){const s=this.WNt;return super.ET(_.max(0,t-s),_.max(0,i-s),e)}o$(t,i){const e=this.WNt;super.o$(_.max(0,t-e),_.max(0,i-e))}a$(t,i){const e=this.WNt;super.a$(_.max(0,t-e),_.max(0,i-e))}constructor(t,i){super(i),this.pit=t}},ZV=class extends Ti{get WNt(){return this.pit.WNt}Td(){return super.Td()+this.WNt}t0(t){super.t0(t-this.WNt)}i_(){return super.i_().Im(this.WNt)}n0(t,i,e,s){const n=this.WNt;super.n0(t-n,i-n,e,s)}Fst(t){return new XV(this,t)}constructor(t,i){super(i),this.Ust(i),this.pit=t}},KV=class extends En{get Nst(){return this.sA}get WNt(){return this.HNt}set WNt(t){this.HNt=t}Af(){return super.Af().Im(this.HNt)}mf(){return JV(super.mf(),this.HNt)}Tf(){return super.Tf()+this.HNt}Td(){return super.Td()+this.HNt}qf(){return super.qf().Im(this.HNt)}i_(){return super.i_().Im(this.HNt)}Sm(t,i,e){const s=_.max(0,t-this.HNt);super.Sm(s,i,e)}zz(t){super.zz(JV(t,-this.HNt))}n_(){return this.Dl}yS(t,i,e,s,n,r,h,o){return this.MS.yS(t,i,e,s,n,r,h,o)}bS(t){this.MS.bS(t)}rP(){this.MS.tr(),super.rP()}iP(){return!1}sP(t,i,e,s,n){throw new g("Not supported")}Qd(){return this.x8.gn(),this.C8.gn(),this.MS.gn(),this.Dl.gn(),super.Qd()}zst(t){return new ZV(this,t)}jst(t){return new Bt(t)}S_(t){let i;switch(t.type){case l.jh:i=new Ps(t.currentTime+this.HNt);break;case l.Sh:i=new ye(t.currentTime+this.HNt);break;case er.Rw:i=new tn(t.currentTime+this.HNt);break;case l.Sw:i=new nc(t.currentTime+this.HNt,JV(t.currentProgramDateTime,this.HNt));break;case l.gw:i=new ki(t.currentTime+this.HNt);break;case l.yw:i=new Oe(t.currentTime+this.HNt);break;case l.pw:i=new Ms(t.currentTime+this.HNt);break;case l.hw:i=new Zk(t.currentTime+this.HNt);break;case l.aw:i=new zx(t.currentTime+this.HNt);break;case l.Jg:i=new ie(t.currentTime+this.HNt);break;case l.ww:i=new Oi(t.currentTime+this.HNt,t.playbackRate);break;case l.Ew:i=new lo(t.currentTime+this.HNt,t.volume);break;case l.Xg:i=new ht(t.duration+this.HNt);break;case er.H_:i=new Lr(t.currentTime+this.HNt,t.readyState);break;default:i=t}super.S_(i)}be(){super.be(),this.C8.be()}ge(){super.ge(),this.C8.ge()}constructor(t){super(t),this.HNt=0,this.MS=new Gh(this,new Ax),this.Dl=new Ln([this.MS.nt,super.n_()]),this.C8=new Hr,this.C8.h5(this.Uz.parentElement),this.x8=new eh(this.C8.we,this.Iu,this.Dl,this.Ol,this.ya)}};function JV(t,i){return t?new Date(t.getTime()+1e3*i):void 0}var $V=class extends W{SP(t){if(t===pg.pm)return new KV(super.SP(t))}async cP(t){const i=t;await i.Qd(),await super.cP(i.Nst)}},tW=class extends HV{async H$(t){await super.H$(t),void 0===this.qNt&&(this.qNt=this.XNt(),this.sA.WNt=this.qNt)}XNt(){if(this.ct===1/0){const t=this.rTt;if(t.U>0)return _.max(0,t.Cn(0)-300)}return 0}H2(t,i,e,s,n,r,h,o){return void 0===r&&(r=!1),void 0===h&&(h=KG.Pyt),void 0===o&&(o=!1),o||(o=this.ct===1/0&&Vt.DE&&Vt.EE<3&&t<=this.Mf),super.H2(t,i,e,s,n,r,h,o)}async tr(){await super.tr(),this.qNt=void 0,this.sA.WNt=0}async gn(){await super.gn(),await this.sA.Qd(),await this.dP.cP(this.sA)}static qC(t){var i;return(!t||"google-dai"!==(null==t||null==(i=t.ssai)?void 0:i.integration))&&(Vt.DE&&Vt.EE<4)}constructor(t,i,e,s,n,r,h,o){const a=new $V(new uc(r));super(t,i,e,s,n,a.SP(h),o),this.dP=a,this.qNt=void 0}},iW=class extends zh{get Nst(){return this.sA}get r_(){return this.sA.r_}get a_(){return this.sA.a_}constructor(t){super(t)}},eW=class extends jt{Wst(){return this.ZNt?this.PW:super.Wst()}Hst(t){this.ZNt?this.PW=t:super.Hst(t)}Af(){return this.ZNt?this.KNt:super.Af()}xC(){return this.ZNt?this.lx:super.xC()}Xst(){return this.ZNt?this.JNt:super.Xst()}Zst(){return this.ZNt?this.OW:super.Zst()}Kst(t){this.ZNt?this.OW=t:super.Kst(t)}_J(t,i,e){return this.gJ((e=>this.$Nt(t,i,e)),e)}$Nt(t,i,e){return super._J(t,i,e)}u$(){return this.gJ((()=>this.tDt()))}tDt(){return super.u$()}AJ(t,i,e){return this.gJ((e=>this.iDt(t,i,e)),e)}iDt(t,i,e){return super.AJ(t,i,e)}Cq(){return this.ZNt?this.i9:super.Cq()}t$(){this.ZNt?this.eDt=!0:super.t$()}o$(t,i){this.RJ(),this.ZNt?(this.JNt=this.JNt.cB(new Ai([t,i])),this.sDt.push({Rg:"aat",GT:t,VT:i})):this.nDt(t,i)}nDt(t,i){super.o$(t,i)}kJ(t,i){return this.gJ((()=>this.rDt(t,i)))}rDt(t,i){return super.kJ(t,i)}a$(t,i){this.RJ(),this.ZNt?(this.JNt=this.JNt.lB(new Ai([t,i])),this.sDt.push({Rg:"ET",GT:t,VT:i})):this.hDt(t,i)}hDt(t,i){super.a$(t,i)}ET(t,i,e){return this.gJ((e=>this.oDt(t,i,e)),e)}oDt(t,i,e){return super.ET(t,i,e)}Aq(t){return this.gJ((()=>this.aDt(t)))}aDt(t){return super.Aq(t)}async gJ(t,i){this.RJ(),this.ZNt&&(await dt(this.ZNt.Zb,i),this.RJ()),Bo(i);try{this.VJ=t(i),await this.VJ}finally{this.VJ=void 0}}RJ(){if(this.VJ)throw new g("Internal error")}async uDt(){if(this.ZNt)throw new b("Already locked");this.ZNt=new Rs,this.cDt(),this.VJ&&(await this.VJ.catch(El),this.cDt())}dDt(){var t;null==(t=this.ZNt)||t.Wb(),this.ZNt=void 0,this.lDt()}cDt(){this.lx=super.xC(),this.PW=super.Wst(),this.OW=super.Zst(),this.KNt=super.Af(),this.JNt=super.Xst(),this.i9=super.Cq(),this.eDt=!1}lDt(){this.RJ(),super.Hst(this.PW),super.Kst(this.OW);const t=this.sDt.slice();No(this.sDt);for(const i of t)"aat"===i.Rg?this.nDt(i.GT,i.VT):this.hDt(i.GT,i.VT);this.eDt&&super.t$(),this.KNt.vB(super.Af())||this.Co(new wn(_e.hq))}Qd(){var t;null==(t=this.ZNt)||t.Xd(),this.ZNt=void 0,super.Qd()}constructor(t){super(t),this.VJ=void 0,this.ZNt=void 0,this.PW=0,this.KNt=Ai.SB(),this.JNt=Ai.SB(),this.sDt=[],this.i9=!1,this.eDt=!1,this.OW=0,this.lx=t.wd}},sW=class extends eW{Af(){var t,i;return super.Af().cB(null!=(i=null==(t=this.fDt)?void 0:t.wf)?i:Ai.SB())}Xst(){var t,i;return super.Xst().cB(null!=(i=null==(t=this.fDt)?void 0:t.n$)?i:Ai.SB())}Hst(t){super.Hst(t),this.fDt&&(this.fDt.EW=t)}Kst(t){super.Kst(t),this.fDt&&(this.fDt.NW=t)}nDt(t,i){super.nDt(t,i),this.fDt&&this.fDt.o$(t,i)}hDt(t,i){super.hDt(t,i),this.fDt&&this.fDt.a$(t,i)}async oDt(t,i,e){Bo(e);const s=[];s.push(super.oDt(t,i,e)),this.fDt&&s.push(this.fDt.ET(t,i,e)),await Promise.all(s)}gq(t){return!!super.gq(t)||this.pit._Dt(t)}aDt(t){return super.gq(t)?super.aDt(t):this.pit.gDt(t)}wDt(t){var i,e;null==(i=this.fDt)||i.fn(re,this.Jst),this.fDt=t,null==(e=this.fDt)||e.yn(re,this.Jst)}constructor(t,i){super(i),this.fDt=void 0,this.pit=t}},nW=class extends Ti{gq(t){const i=void 0!==this.Z$,e=void 0!==this.K$,s=t.r0.some((t=>Df(t.qz,"audio"))),n=t.r0.some((t=>Df(t.qz,"video")));return i===s&&e===n&&(!!super.gq(t)||(!(!this.ADt||!this.ADt.gq(t))||this.pit.vDt(t)))}async Aq(t){return super.gq(t)?await super.Aq(t):this.ADt&&this.ADt.gq(t)?(this.mDt(),await this.Aq(t)):(await this.pit.pDt(t),await this.Aq(t))}_Dt(t){return this.gq(this.yDt(t))}gDt(t){return this.Aq(this.yDt(t))}yDt(t){const i=this.wd,e=i.r0.map((i=>Df(t.qz,"audio")&&Df(i.qz,"audio")||Df(t.qz,"video")&&Df(i.qz,"video")?t:i));return Tt({},i,{r0:e})}n0(t,i,e,s){super.n0(t,i,e,s),this.ADt&&this.ADt.n0(t,i,e,s)}MDt(){return!this.TDt&&this.NDt}Td(){return void 0!==this.DDt?this.DDt:this.MDt()?this.VL:super.Td()}t0(t){this.VL=t,this.DDt=void 0,this.MDt()||super.t0(t)}Rst(){return!this.MDt()&&super.Rst()}t$(){this.DDt=_.max(rW(this.Fz.V$),rW(this.Fz.W$)),this.MDt()||super.t$()}GJ(){this.DDt=void 0,this.MDt()||super.GJ()}Fst(t){return new sW(this,t)}IDt(){this.TDt=!this.TDt}mDt(){const t=this.Fz,i=this.ADt;i&&(this.TDt=!this.TDt,this.Ust(i),this.SDt(t),this.MDt()&&this.EDt())}SDt(t){var i,e;this.ADt=t,null==(i=this.Z$)||i.wDt(null==t?void 0:t.V$),null==(e=this.K$)||e.wDt(null==t?void 0:t.W$)}bDt(t){const i=this.Fz,e=this.ADt;if(!e)return;const s=this.TDt,n=s?i:e,r=(s?e:i).wf.dA(t);if(!r)return;const h=QR(n.wf,this.Xst()).dA(r.jn(0),Ac);return!h||r.jn(0)+Ac>=h.jn(0)?void 0:_.max(r.jn(0),h.Cn(0))}LDt(t,i){if(this.NDt)return Promise.resolve();const e=this.TDt?this.ADt:this.Fz;return e?(this.NDt=!0,this.kDt((i=>{if(Bo(i),this.NDt)return async function(t,i,e){Bo(e);const s=[];t.V$&&s.push(Yk(t.V$,i,e));t.W$&&s.push(Yk(t.W$,i,e));await Promise.all(s),t.t$()}(e,t,i)}),i)):Promise.resolve()}EDt(){if(!this.NDt)return;const t=this.TDt?this.ADt:this.Fz;if(!t)return;var i;this.NDt=!1;const e=null!=(i=this.DDt)?i:this.VL;t.ct<e&&t.t0(e),t.GJ()}CDt(t){var i;const e=null!=(i=this.DDt)?i:this.VL;t.t0(e),this.TDt?this.Ust(t):this.SDt(t)}Xst(){var t,i,e;const s=null!=(e=null==(t=this.Z$)?void 0:t.n$)?e:Ai.SB();var n;const r=null!=(n=null==(i=this.K$)?void 0:i.n$)?n:Ai.SB();return s.cB(r)}async kDt(t,i){const e=[];this.Z$&&e.push(this.Z$.uDt()),this.K$&&e.push(this.K$.uDt());try{await Promise.all(e),await t(i)}finally{this.Z$&&this.Z$.dDt(),this.K$&&this.K$.dDt()}}Gst(t){t.type===_e.hq&&this.pit.XJ(),super.Gst(t)}constructor(t,i){super(i),this.ADt=void 0,this.VL=NaN,this.TDt=!1,this.NDt=!1,this.DDt=void 0,this.Ust(i),this.pit=t}};function rW(t){if(!t)return 0;const i=t.wf;return i.U>0?i.jn(i.U-1):0}function rr(t){return t.wd.Rg===wi.Hx}var Xu,hW=class extends iW{get xDt(){return this.ODt}Af(){return super.Af().cB(this.ODt.wf)}Td(){if(!this.jDt){const t=this.Fz;if(t&&rr(t))return t.ct}return super.Td()}Ist(){return!!super.Ist()&&!(!this.jDt&&!this.Cq())}Sst(){return!!super.Sst()&&!(!this.jDt&&super.Ist()&&!this.Cq())}Cq(){const t=this.Fz;return!(!t||!rr(t))&&t.Cq}qf(){return this.Uo.cB(this.sA.Hf)}i_(){return super.i_().cB(this.ODt.t_)}$f(){return super.$f()}Dst(){var t;return null!=(t=super.Dst())?t:this.ODt.Yz}p_(){return this.kB=!1,super.p_()}m_(){this.kB=!0,super.m_()}i5(){this.jDt=!0,super.i5(),this.ODt.i5()}e5(){this.jDt=!1,super.e5(),this.ODt.i5()}Tf(){var t;return null!=(t=this.f2)?t:super.Tf()}s_(){return void 0!==this.f2||super.s_()}Sm(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.zDt.Xd(),this.V2.Xd(),this.V2=new na,this.PDt=this.H2(t,i,e,this.PDt,this.V2.Hd).catch(El)}async H2(t,i,e,s,n){this.f2=t,this.q2=t,this.Co(new Oe(t)),s&&await s.catch(El),Bo(n),this.Fz&&rr(this.Fz)&&this.Fz.EDt(),this.f2=void 0,super.Sm(t,i,e),this.ODt.Sm(t,i,e),this.BDt()}zz(t){const i=this.Yz;if(!i||S(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Sm(e)}r5(){super.r5(),this.ODt.r5()}get r_(){return this.RDt.r_}get a_(){return this.RDt.a_}be(){this.ZP&&(this.ZP=!1,this.RDt.be())}ge(){this.ZP||(this.ZP=!0,this.RDt.ge())}async UDt(){var t;this.f2=void 0,this.q2=NaN,this.Uo=Ai.SB(),null==(t=this.QDt)||t.Xd(),this.zDt.Xd(),this.V2.Xd(),this.PDt&&(await this.PDt.catch(El),this.PDt=void 0)}Cst(t){super.Cst(t),this.ODt.uP=t}xst(t){super.xst(t),this.ODt.o5=t}n_(){return this.Dl}yS(t,i,e,s,n,r,h,o){return this.MS.yS(t,i,e,s,n,r,h,o)}bS(t){this.MS.bS(t)}rP(){this.MS.tr(),super.rP()}async $n(t){const i=await super.$n(t);return rr(i)&&this.BDt(),i}async tr(){await this.UDt(),await super.tr(),await this.ODt.tr()}async Qd(){await this.UDt(),this.MS.gn(),this.Dl.gn(),await super.Qd()}zst(t){return new nW(this,t)}jst(t){return new Bt(t)}BDt(){this.zDt.Xd(),this.zDt=new na,this.PDt=this.FDt(this.PDt,this.zDt.Hd).catch(El)}async FDt(t,i){if(t&&await t.catch(El),this.Fz&&rr(this.Fz))for(;;){let t;for(Bo(i),this.YDt()&&this.IDt(),this.Fz.EDt(),Bo(i);Bo(i),!this.YDt();){if(t=this.Fz.bDt(this.Tf()),void 0!==t){0,this.GDt(),await this.Fz.LDt(t,i),Bo(i),this.ODt.Sm(t);break}await vu((t=>Promise.race([this.df(l.Sw,t),this.VDt(t)])),i)}for(Bo(i);!this.YDt();)await this.sA.df([l.Sw,l.Jg,er.H_],i)}}YDt(){const t=this.Fz;if(void 0===t||!rr(t))return!1;const i=this.Tf(),e=this.sA.wf;if(!this.sA.If&&e.gr(i))return!1;return!!QR(this.ODt.wf,t.Xst()).wB(i,i+Ac)}IDt(){if(this.WDt)return;this.WDt=!0,this.Uo=this.qf();const t=$k(this),i=this.s_(),e=this.$f(),s=this.sA,n=this.ODt,r=this.Fz;r.EDt(),r.IDt(),tC(n,t),this.Bst(n),this.ODt=s,s.m_(),s.Pf=!0,this.WDt=!1;const h=this.s_();i!==h&&(h?this.Co(new Oe(this.Mf)):this.Co(new Ms(this.Mf)));const o=this.$f();e!==o&&this.Co(new Lr(this.Mf,o)),h||this.GDt()}GDt(){const t=this.sA,i=this.RDt;if(i===t)return;const e=this.a_,s=this.r_;this.RDt=t,this.ZP&&(i.be(),t.ge());const n=this.a_,r=this.r_;n>0&&r>0&&(e!==n||s!==r)&&this.Co(new Vu)}vDt(t){return void 0!==this.ODt.jq([t])}async pDt(t){this.GDt();const i=this.Fz,e=this.ODt;await e.tr();const s=await e.$n(t);i.CDt(s)}VDt(t){return this.QDt=new Rs,dt(this.QDt.Zb,t)}XJ(){var t;null==(t=this.QDt)||t.Wb()}S_(t){t.type===l.yw&&this.q2===t.currentTime||(t.type===l.pw&&(this.q2=NaN,this.GDt()),t.type!==er.H_&&t.type!==l.Sh&&t.type!==l.Jg||this.WDt||!this.YDt()?(t.type!==l.Jg||this.If)&&super.S_(t):this.BDt())}constructor(t,i,e){super(t),this.jDt=!1,this.f2=void 0,this.q2=NaN,this.Uo=Ai.SB(),this.kB=!0,this.WDt=!1,this.ZP=!0,this.QDt=void 0,this.PDt=void 0,this.zDt=new na,this.V2=new na,this.ODt=i,this.RDt=t,this.sA.ge(),this.ODt.be(),this.MS=new Gh(this,e),this.Dl=new Ln([this.MS.nt,super.n_()])}},oW=class extends hW{get Nst(){return this.sA}get xDt(){return this.ODt}be(){super.be(),this.C8.be()}ge(){super.ge(),this.C8.ge()}get Uz(){return this.sA.Uz}get I0(){return this.sA.I0}get g_(){return this.sA.g_}set g_(t){this.sA.g_=t}h5(t){this.sA.h5(t),this.ODt.h5(t)}a2(){this.sA.a2()}D_(){this.sA.D_(),this.ODt.D_()}A_(){return this.sA.A_()}Bst(t){const i=this.w_(),e=this.A_();super.Bst(t),this.w_()!==i&&this.Co(new mu),this.A_()!==e&&this.Co(new ft)}Qd(){return this.x8.gn(),this.C8.gn(),super.Qd()}constructor(t,i){super(t,i,new Ax),this.C8=new Hr,this.C8.h5(t.Uz.parentElement),this.x8=new eh(this.C8.we,this.Iu,this.nt,this.Ol,this.ya)}},aW=class extends W{SP(t){if(t===pg.pm){const i=super.SP(t),e=super.SP(t);return new oW(i,e)}return super.SP(t)}async cP(t){t instanceof oW?(await t.Qd(),await super.cP(t.Nst),await super.cP(t.xDt)):await super.cP(t)}},uW=class extends HV{async gn(){await super.gn(),await this.dP.cP(this.sA)}static qC(t){var i;return!Vt.Qs&&!Vt.sb&&!(t&&"google-dai"===(null==(i=t.ssai)?void 0:i.integration))}constructor(t,i,e,s,n,r,h,o){const a=new uc(new aW(r));super(t,i,e,s,n,a.SP(h),o),this.dP=a}},cW=class extends Ti{Fst(t){return new eW(t)}xC(){return this.HDt?this.lx:super.xC()}Af(){return this.HDt?this.KNt:super.Af()}Td(){return this.HDt?this.VL:super.Td()}t0(t){this.HDt?(this.VL=t,this.qDt=!0):super.t0(t)}i_(){return this.HDt?this.XDt?this.XDt.f$():this.s0:super.i_()}n0(t,i,e,s){this.HDt?this.XDt=new Bk(t,i,e,s):super.n0(t,i,e,s)}Rst(){return this.HDt?this.i9&&!1!==this.eDt:super.Rst()}t$(){this.HDt?this.eDt=!0:super.t$()}GJ(){this.HDt?this.eDt=!1:super.GJ()}gq(t){return!this.HDt&&super.gq(t)}Aq(t){return this.HDt?Promise.reject(new b("Not supported")):super.Aq(t)}async uDt(){if(this.HDt)throw new b("Already locked");this.HDt=!0,this.cDt();const t=[];this.Z$&&t.push(this.Z$.uDt()),this.K$&&t.push(this.K$.uDt()),await Promise.all(t)}dDt(){this.HDt=!1,this.Z$&&this.Z$.dDt(),this.K$&&this.K$.dDt(),this.lDt()}cDt(){this.lx=super.xC(),this.KNt=super.Af(),this.VL=super.Td(),this.s0=super.i_(),this.qDt=!1,this.eDt=void 0,this.XDt=void 0}lDt(){if(this.qDt&&(super.t0(this.VL),this.qDt=!1),void 0!==this.XDt){const t=this.XDt;super.n0(t.Cn,t.jn,t._$,t.g$),this.XDt=void 0}void 0!==this.eDt&&(this.eDt?super.t$():super.GJ(),this.eDt=void 0)}constructor(t){super(t),this.HDt=!1,this.KNt=Ai.SB(),this.VL=0,this.qDt=!1,this.i9=!1,this.eDt=void 0,this.s0=Ai.SB(),this.XDt=void 0,this.Ust(t),this.lx=t.wd}},dW=class extends En{get Nst(){return this.sA}p_(){return void 0!==this.Fz&&rr(this.Fz)&&this.If&&this.Sm(0),super.p_()}Sm(t,i,e){void 0!==this.Fz&&rr(this.Fz)&&this.If&&t<this.ct&&this.ZDt(),super.Sm(t,i,e)}i5(){this.KDt=!0,super.i5()}e5(){this.KDt=!1,this.JDt()||super.e5()}JDt(){return this.KDt||this.$Dt}tIt(){this.$Dt||(this.$Dt=!0,super.i5())}iIt(){this.$Dt&&(this.$Dt=!1,this.JDt()||super.e5())}$n(t){this.eIt.Xd();const i=this.wit(t,this.sIt);return this.nIt=i,i}async wit(t,i){return i&&await i.catch(El),this.iIt(),await super.$n(t)}zst(t){return new cW(t)}jst(t){return new Bt(t)}tr(){this.eIt.Xd();const t=this.xNt(this.sIt);return this.nIt=t,t}async xNt(t){return t&&await t.catch(El),this.iIt(),await super.tr()}ZDt(){this.tIt(),this.eIt.Xd(),this.eIt=new na,this.sIt=Wi(this.rIt(this.nIt,this.sIt,this.eIt.Hd),this.eIt).catch(el)}async rIt(t,i,e){t&&await t.catch(El),i&&await i.catch(El),Bo(e);const s=this.Fz;if(!s||!rr(s))return;const n=s.wd;await s.uDt(),await this.sA.tr();const r=await this.sA.$n(n);r.t0(s.ct),s.Ust(r),s.dDt(),this.iIt()}async Qd(){this.eIt.Xd(),this.sIt&&(await this.sIt.catch(El),this.sIt=void 0),this.JDt()&&super.e5(),await super.Qd()}constructor(...t){super(...t),this.KDt=!1,this.$Dt=!1,this.nIt=void 0,this.sIt=void 0,this.eIt=new na}},Lo=class extends W{SP(t){if(t===pg.pm)return new dW(super.SP(t))}async cP(t){const i=t;await i.Qd(),await super.cP(i.Nst)}static qC(){return Vt.ob}};yN(new class extends vR{JA(t,i,e,s,n,r,h,o){const a=new z($t.Ib.$et,$t.Ib.Jet,$t.Ib.Ket,$t.Ib.ist);let u;u=tW.qC(o)?tW:uW.qC(o)?uW:qV;let c=i;return Lo.qC()&&(c=new Lo(c)),new u(e,s,n,r,a,c,pg.pm,t)}bP(){return!0}constructor(...t){super(...t),this.LP=Mt.oz}}),function(t){t.hIt="currentbufferingrenditionchange",t.oIt="aIt",t.uIt="cIt",t.dIt="lIt"}(Xu||(Xu={}));var lW,fW,_W=class{constructor(t,i){var e,s;this.wst=void 0,this.Mg=bw(),this.fIt=i,this.Rg=t.Rg,this._It=t._It,this.gIt=t.gIt,this.wIt=t.wIt,this.l=t.l,this.gs=t.gs,this.AIt=t.AIt,this.vIt=t.vIt,this.mIt=void 0===t.ovt,this.pIt=null!=(s=null==(e=t.pIt)?void 0:e.split(","))?s:[]}};function La(t,i){return t.Rg===i.Rg&&(t.l===i.l||!(!t._It||!i._It))}function gW(t,i){return void 0!==t&&void 0!==i&&wW(t,i)}function wW(t,i){return t.fIt===i.fIt}function AW(t,i){return wW(t,i)&&t.AIt===i.AIt}function vW(t,i){for(const e of t)if(AW(e,i))return!0;return!1}!function(t){t.yIt="alternative",t.MIt="main",t.TIt="commentary",t.NIt="",t.MI="descriptions",t.DIt="main-desc",t.IIt="translation"}(lW||(lW={})),function(t){t.yIt="alternative",t.MIt="main",t.TIt="commentary",t.NIt="",t.yI="captions",t.Eg="sign",t.Mm="subtitles"}(fW||(fW={}));var mW,pW=class extends Pl{get Tg(){return this.SIt}get Rt(){const t=this.EIt();if(!t)return!1;for(const i of this.Ng.og)if(i.bIt===t)return!0;return!1}set Rt(t){if(t!==this.Rt)if(t){var i;let t=null==(i=this.Ng.cg(0))?void 0:i.bIt;const e=this.Qo.LIt;for(const i of this.Ng.og)if(i.kIt===e){t=i.bIt;break}this.CIt(t)}else this.CIt(void 0)}get yg(){if(!this.Rt)return;const t=this.Qo.xIt;for(const i of this.Ng.og)if(vW(t,i.bIt))return i}get va(){return this.Xa||(this.Xa=Fi(this)),this.Xa}get o(){return this.xT.toString()}get Mg(){return this.xT}get kh(){return this.OT}set kh(t){t!==this.OT&&(this.OT=t,this.Co(new js(this)))}get gs(){return this.WL}get jg(){return this.Rt?"enabled":"disabled"}get Dg(){return this.Sat}set Dg(t){let e=[];if(t){e=t.filter((t=>{const e=this.yg?oQ(this.yg):void 0;return i.Ys.Jtt(e,oQ(t))})).filter((i=>this.Ng.bT(t)&&i.vet))}else e=this.Ng.og.filter((t=>t.vet));if(0!==e.length){if(!(t===this.Sat||this.Sat&&mo(this.Sat,e))){if(this.Sat=t?e:void 0,this.Qo.OIt(e.map((t=>t.kIt))),1===e.length){const t=e[0].kIt,i=this.X0===pg.pm,s=this.PB.QW;D(this.Qo.jIt(t,{zIt:!0,PIt:s&&i,BIt:s&&!i}))}this.Co(new Ga(e,this))}}else this.Co(new hQ)}zT(t){this.Rt=t}gn(){this.Vo(),this.Qo.fn(Xu.hIt,this.RIt),this.Qo.fn(Xu.oIt,this.UIt);for(const t of this.Ng.og)t.gn();this.Ng.tr()}constructor(t,i,e,s,n){var r;super(),this.X0=t,this.Qo=i,this.PB=e,this.fh=s,this.Ng=n,this.Sat=void 0,this.QIt=void 0,this.FIt=()=>this.Co(new js(this)),this.RIt=()=>{const t=this.yg;t&&this.QIt!==t&&(this.QIt=t,this.Co(new xF(t)))},this.UIt=()=>{const t=this.Rt;this.YIt!==t&&(this.YIt=t,this.fh.Co(new Tn(this)),this.Co(new Tn(this)))},this.QIt=this.yg,this.YIt=this.Rt;const h=n.cg(0);var o,a;this.OT=null!=(o=null==h?void 0:h.bIt.l)?o:"",this.WL=null!=(a=null==h?void 0:h.bIt.gs)?a:"",this.SIt=null==h||null==(r=h.bIt)?void 0:r.pIt.map(IW).filter(Yt),this.xT=Iw(),this.Qo.yn(Xu.hIt,this.RIt),this.Qo.yn(Xu.oIt,this.UIt);for(let t=0;t<this.Ng.U;t++){this.Ng.cg(t).yn("update",this.FIt)}}},yW=class extends pW{get zt(){return lW.MIt}EIt(){return this.Qo.GIt}CIt(t){D(this.Qo.VIt(t))}constructor(t,i,e,s){super(pg.ym,t,i,e,s)}},MW=class extends pW{get zt(){return fW.MIt}EIt(){return this.Qo.WIt}CIt(t){D(this.Qo.HIt(t))}constructor(t,i,e,s){super(pg.pm,t,i,e,s)}},TW=class extends Pl{get o(){return String(this.kIt.o)}get Mg(){return this.kIt.o}get wz(){return this.kIt.wz}get evt(){return this.kIt.evt}get kh(){var t;return null!=(t=this.OT)?t:this.bIt.l}set kh(t){this.kh!==t&&(this.OT=t,this.Co(new zY(this.va)))}get ovt(){return this.bIt.fIt.qIt()}get svt(){return this.kIt.svt}QI(){}gn(){this.Vo()}constructor(t,i){super(),this.kIt=t,this.bIt=i,this.OT="",this.vet=!0}},NW=class extends TW{get eAt(){return 0}get wst(){var t;return(null==(t=this.kIt.wst)?void 0:t.XIt)||""}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return jY(this)}constructor(t,i){super(t,i),this.Xa=void 0}},DW=class extends TW{get wst(){var t;return(null==(t=this.kIt.wst)?void 0:t.ZIt)||""}get nvt(){return this.KIt}set nvt(t){this.KIt!==t&&(this.KIt=t,this.Co(new zY(this.va)))}get xct(){var t,i;return null!=(i=null!=(t=this.JIt)?t:this.kIt.xct)?i:0}set xct(t){this.xct!==t&&(this.JIt=t,this.Co(new zY(this.va)))}get Ti(){var t,i;return null!=(i=null==(t=this.kIt.$It)?void 0:t.Ti)?i:0}get ji(){var t,i;return null!=(i=null==(t=this.kIt.$It)?void 0:t.ji)?i:0}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return OY(this)}constructor(t,i){super(t,i),this.Xa=void 0,this.KIt=0,this.JIt=void 0}};function IW(t){return"public.accessibility.describes-video"===t?Nu.xg:"public.accessibility.transcribes-spoken-dialog"===t?Nu.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?Nu.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?Nu.Cg:void 0}!function(t){t.tSt="FATAL",t.ha="ERROR",t.iSt="WARNING",t.eSt="INFO",t.sSt="DEBUG"}(mW||(mW={}));var he=new class{nSt(t){if(!this.Rt())return!1;const i=[];return!(i.length>0)||i.some((i=>i.toLowerCase()===t.toLowerCase()))}rSt(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this.nSt(t)&&i.nit("DEBUG "+t+" -",...s)}qp(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this.nSt(t)&&i.nit("INFO "+t+" -",...s)}hSt(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this.nSt(t)&&i.SA("WARNING "+t+" -",...s)}lt(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this.nSt(t)&&i.rit("ERROR "+t+" -",...s)}oSt(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this.nSt(t)&&i.rit("FATAL "+t+" -",...s)}constructor(){this.Rt=()=>!1}},Xi="HLSPlaylistParser",SW="Discontinuity",Qh="Buffering",EW=class{Fnt(){var t;const i=null==(t=this.Qo.Tr)?void 0:t.aSt;if(!i||0===i.length)return void he.hSt("LLHLSTrackConfigurator","The HLSModel contains no variant streams.");var e;const s=null!=(e=Zt(i,(t=>0!==t.uSt.length&&0!==t.cSt.length)))?e:i[0],n=i.filter((t=>t!==s));for(const t of s.uSt){const i=new Tw,e=[];i.ST(new NW(s,t)),e.push(t);for(const s of n)for(const n of s.uSt)if(La(n,t)&&!vW(e,n)){i.ST(new NW(s,n)),e.push(n);break}this.dSt.tt(new yW(this.Qo,this.PB,this.dSt,i))}for(const t of s.cSt){const i=new Tw,e=[];i.ST(new DW(s,t)),e.push(t);for(const s of n)for(const n of s.cSt)if(La(n,t)&&!vW(e,n)){i.ST(new DW(s,n)),e.push(n);break}this.lSt.tt(new MW(this.Qo,this.PB,this.lSt,i))}}fSt(){this._St(this.dSt),this._St(this.lSt)}_St(t){const i=[];for(const e of t.og){const t=[];for(const i of e.Ng.og)qt(i.kIt.gSt,i.bIt)||t.push(i);for(const i of t)e.Ng.ET(i),i.gn();0===e.Ng.U&&i.push(e)}for(const e of i)t.it(e),e.gn()}wSt(t,i){const e=this.ASt(t);void 0!==e&&(e.xct=i)}vSt(t,i){const e=this.ASt(t);void 0!==e&&(e.nvt=i)}ASt(t){for(const i of this.lSt.og){const e=Zt(i.Ng.og,(i=>i.bIt===t));if(void 0!==e)return e}}constructor(t,i,e,s){this.Qo=t,this.PB=i,this.dSt=e,this.lSt=s}},Br=class{get Z8(){const t=1-this.mSt**this.pSt;return this.ySt/t}Bht(t,i){const e=this.mSt**t,s=i*(1-e)+e*this.ySt;S(s)||(this.ySt=s,this.pSt+=t)}Aq(t){const i=_.exp(_.log(.5)/t);if(i===this.mSt)return;if(0===this.pSt)return void(this.mSt=i);const e=this.Z8,s=1-i**this.pSt;this.ySt=e*s,this.mSt=i}constructor(t){this.ySt=0,this.pSt=0,this.mSt=_.exp(_.log(.5)/t)}},wr=class t{get Z8(){return this.Vht()?_.max(this.MSt.Z8,this.TSt.Z8):this.NSt}Bht(t){const e=i.Jd(),s=t;this.DSt&&void 0!==this.ISt&&e-this.ISt>=this.SSt&&this.tr(),this.ESt+=1,this.MSt.Bht(1,s),this.TSt.Bht(1,s),this.bSt.push(s),this.bSt.length>this.LSt&&this.bSt.shift(),this.ISt=e}Vht(){return void 0!==this.ISt&&i.Jd()-this.ISt<=this.SSt}tr(){this.MSt=new Br(this.kSt),this.TSt=new Br(this.CSt),this.ESt=0,this.bSt=[],this.ISt=void 0}constructor(i=t.xSt,e=t.OSt,s=t.Wht,n=!1){this.ESt=0,this.bSt=[],this.ISt=void 0,this.SSt=6e4,this.LSt=10,this.kSt=i,this.CSt=e,this.NSt=s,this.DSt=n,this.MSt=new Br(i),this.TSt=new Br(e)}};wr.xSt=2,wr.OSt=5,wr.Wht=.1;var bW,LW=class{wW(t){for(const i of this.jSt)i.wW(t)}AW(t){for(const i of this.jSt)i.AW(t)}vW(t,i){for(const e of this.jSt)e.vW(t,i)}mW(t){for(const i of this.jSt)i.mW(t)}constructor(t){this.jSt=t}},kW=class{wW(t){this.zSt=t}AW(t){this.PSt.Bht(t-this.zSt)}vW(t){}mW(t){}constructor(t){this.zSt=0,this.PSt=t}},CW=class{AW(t){this.BSt=t}vW(t,i){this.Xht.Bht(t-this.BSt,i.byteLength),this.BSt=t}mW(t){}wW(t){}constructor(t){this.BSt=0,this.Xht=t}},xW=class{wW(t){}vW(t,e){const s=e.byteLength,n=this.RSt;this.RSt=s;const r=t-this.An;this.An=t,this.USt.lX(e);const h=!this.USt.QSt(),o=s>=this.FSt;n!==i.Ys.Xtt&&h&&o&&this.Xht.Bht(r,s)}AW(t){this.An=t}mW(t){}constructor(t,i=0){this.USt=new OW,this.An=0,this.RSt=0,this.Xht=t,this.FSt=i}},OW=class extends QL{QSt(){return this.YSt}lX(t){this.YSt=!1,super.lX(t)}cX(t,i){this.GSt&&this.GSt!==Po.dm||(this.YSt=!0),super.cX(t,i),this.GSt=t}MX(t){return!1}NX(t){}IX(t){}constructor(...t){super(...t),this.GSt=void 0,this.YSt=!1}};(bW||(bW={})).VSt="sample";var jW=class extends Pl{$j(){if(!this.Vht())return;const t=i.Jd();t-this.WSt>1e3&&(this.WSt=t,Vo.Ib.$j(this.Z8))}constructor(...t){super(...t),this.WSt=0}},Zu=class t extends jW{Bht(t,i){const e=8*i/t;this.MSt.Bht(t,e),this.TSt.Bht(t,e),this.HSt+=i,this.$j(),this.Co(new wn(bW.VSt))}get Z8(){return this.Vht()?_.min(this.MSt.Z8,this.TSt.Z8):this.NSt}Vht(){return this.HSt>=this.qSt}constructor(i=t.xSt,e=t.OSt,s=t.XSt,n=t.Wht){super(),this.HSt=0,this.qSt=s,this.MSt=new Br(i),this.TSt=new Br(e),this.NSt=n}};Zu.XSt=128e3,Zu.Wht=aN,Zu.xSt=.5,Zu.OSt=5;var zW=class{get wz(){return this.Xht.Z8}get Az(){return this.ZSt.Z8}vz(t){if("segment"!==t.Rg&&"preload-hint"!==t.Rg)return;const i=[new kW(this.ZSt)];return"stream"!==t.fS||!function(t){return"segment"===t.Rg&&"initialization-segment"!==t.gS}(t)&&"preload-hint"!==t.Rg?i.push(new CW(this.Xht)):i.push(new xW(this.Xht,1e3)),new LW(i)}KSt(t){this.Xht=new Zu(Zu.xSt,Zu.OSt,1,t)}constructor(t){const i=t.wz>0?t.wz:Zu.Wht,e=t.Az>0?t.Az:wr.Wht;this.Xht=new Zu(Zu.xSt,Zu.OSt,1,i),this.ZSt=new wr(wr.xSt,wr.OSt,e)}};var PW=class extends wn{constructor(t){super(Xu.dIt),this.lt=t}},BW=class{jq(t,i){const e={Rg:wi.Hx,Xz:[],r0:t.map((t=>({qz:t}))),w0:i};return Promise.resolve(void 0!==this.wet.jq([e]))}constructor(t){this.wet=t}},RW=(t,i,e,s,n)=>t.filter((t=>!!qt(s,t)||1.1*t.wz<=e.wz)),UW=(t,i,e,s,n)=>t.filter((t=>{if(qt(s,t))return!0;let r=1/0;for(const i of t.gSt){var h,o;r=_.min(r,null!=(o=null!=(h=i.fIt.JSt)?h:i.fIt.$St)?o:1/0)}r===1/0&&(r=1);const a=2*e.Az+t.wz*r/e.wz;return t.wz<=i.wz||n.tEt>a})),QW=(t,i,e,s,n)=>zc(t,((t,i)=>i.wz-t.wz)),FW=(t,i,e,s,n)=>t.every((t=>t.svt&&!S(t.svt)))?zc(t,((t,i)=>i.svt-t.svt)):t,YW=(t,i,e,s,n)=>0===s.length?t:zc(t,((t,i)=>{const e=qt(s,t)?1:0;return(qt(s,i)?1:0)-e})),GW=(t,i,e,s,n,r)=>t.filter((t=>!t.wst||!i.wst||!(void 0!==i.wst.ZIt&&void 0!==t.wst.ZIt&&!Lt(i.wst.ZIt,t.wst.ZIt)&&!r.iEt({qz:'video/mp4; codecs="'+t.wst.ZIt+'"'}))&&!(void 0!==i.wst.XIt&&void 0!==t.wst.XIt&&!Lt(i.wst.XIt,t.wst.XIt)&&!r.eEt({qz:'audio/mp4; codecs="'+t.wst.XIt+'"'})))),VW=(t,e,s,n,r)=>{if(!1===r.out)return t;if(i.Ys.Vtt)return t;const h=i.Ys.Wtt;var o;const a=(null!=(o=null==h?void 0:h.width)?o:r.ji)*QU;var u;const c=(null!=(u=null==h?void 0:h.height)?u:r.Ti)*QU;for(let i=0;i<t.length;i++){const e=t[i];if(void 0===e.$It)return t;const s=e.$It.Ti,n=e.$It.ji;if(s<=c&&n<=a)return t.slice(i,t.length)}return[]},WW=(t,e,s,n,r)=>function(t,e){const s=e.out;if(void 0===s&&!i.Ys.Qs)return t;if(!1===s)return t;for(let i=0;i<t.length;i++){const s=t[i];if(void 0===s.$It)return t;const n=s.$It.Ti,r=s.$It.ji;if(n===e.Ti&&r===e.ji)return t.slice(i,t.length);if(n<e.Ti||r<e.ji)return t.slice(0===i?i:i-1,t.length)}return[]}(t,r);var Cn,Jt,Yo,vt,HW="AbrEvaluator",qW=class{get sEt(){return this.PB._W}nEt(t){this.uut=t}async rEt(t,i,e,s,n){return(await this.hEt(t,i,e,s,n))[0]}async hEt(t,i,e,s,n){if(0===t.length)throw new g("AbrEvaluator - Unable to select optimal variant stream from an empty list.");he.rSt(HW,"Performing optimal variant stream selection.");const r=this.sEt;let h=t;for(const t of this.uut){const o=t(h,i,r,e,s,n);h=Gt(o)?o:await o}if(0===h.length){he.hSt(HW,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[xo(t,(t=>t.wz))]}return h}constructor(t){this.PB=t,this.uut=[GW,RW,UW,QW,VW,WW,FW,YW]}};function XW(t,i){return[t,void 0!==i?t+i-1:Oa]}function ZW(t){return Boolean(t.Pp)}function KW(t){return Boolean(t.Ket)}function E(t){return t?t.Pmt?t.jM+"@"+t.Pmt.Cn+"-"+(null!=(i=t.Pmt.U)?i:""):""+t.jM:"";var i}function JW(t,i){if(i===t)return!0;if(i.jM!==t.jM)return!1;if(!t.Pmt)return!0;if(i.Pmt){const e=XW(t.Pmt.Cn,t.Pmt.U),s=XW(i.Pmt.Cn,i.Pmt.U);if(e[0]<=s[0])return void 0===e[1]||void 0!==s[1]&&e[1]>=s[1]}return!1}function $W(t,i){return t===i||t.jM===i.jM&&(t.Pmt&&i.Pmt?t.Pmt.Cn===i.Pmt.Cn&&t.Pmt.U===i.Pmt.U:t.Pmt===i.Pmt)}function tH(t){const i=!!t.oEt||void 0;return{o:t.o,aEt:t.aEt,Yz:t.Yz,uEt:t.uEt,ct:t.ct,cEt:t.cEt,oEt:i,dEt:t.lEt,fEt:t._Et,gEt:t.gEt,wEt:t.wEt}}function iH(t,i){var e,s,n;return{XIt:null!=(e=i.XIt)?e:null==t?void 0:t.XIt,ZIt:null!=(s=i.ZIt)?s:null==t?void 0:t.ZIt,AEt:null!=(n=i.AEt)?n:null==t?void 0:t.AEt}}async function eH(t,i,e,s,n){const r=i.filter((t=>Ni(t,"audio"))),h=i.filter((t=>Ni(t,"video"))),o=[],a=e.map((t=>async function(t,i,e){if(!t.ovt)return;if(!t.vEt)return;if(t.lS!==Yo.mEt)return;const s=sH(t.vEt);if(!s)return;if(s.Lb===ka)return{ZA:s,Mz:[],Tz:void 0,Sj:t.ovt};if(s.Lb===a_&&t.vEt===Ml)return{ZA:s,Mz:[],Tz:t.ovt,Sj:void 0};{he.qp("HLSDrmUtils","Fetching key uri "+t.ovt+".");const n=await i.SI({zu:t.ovt,AS:e});return{ZA:s,Mz:[await n.cj()],Tz:void 0,Sj:void 0}}}(t,s,n)));var u;const c=function(t,i){if(0===i.length)return t;const e=t=>{const e=i.indexOf(t.ZA.Lb);return e>=0?e:i.length};return zc(t,((t,i)=>e(t)-e(i)))}((await Promise.all(a)).filter(Yt),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const i of c){const e=bV(null!=t?t:{},i.ZA),s="cbcs";o.push({ZA:i.ZA,Mz:i.Mz,Tz:i.Tz,Sj:i.Sj,vP:[{initDataTypes:[i.ZA.Eb],audioCapabilities:LV(r,s,null==e?void 0:e.audioRobustness),videoCapabilities:LV(h,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]})}return o}function sH(t){return t===et?cm:t===n_?um:t===c_?dm:t===Ml?Dn:void 0}function nH(t){if("#"!==t[0])throw new g("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function rH(t){return"#"!==t[0]?t:t.split(":",1)[0]}function hH(t){const i=t.indexOf(":");if(-1===i||t.length<i+1)throw new g("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(i+1)}function oH(t){const i=dh(hH(t));if(void 0===i)throw new g("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return i}function q(t){const i={},e=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=e.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?i[n]=r:he.hSt(Xi,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=e.exec(t)}return i}function aH(t,e){const s=q(t);let n,r;try{n=s.URI?i.IA(s.URI,e):void 0,r=function(t){switch(t){case"AUDIO":return Cn.ym;case"VIDEO":return Cn.pm;case"SUBTITLES":return Cn.Mm;case"CLOSED-CAPTIONS":return Cn.pEt}throw new g("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(s.TYPE)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const h=s["GROUP-ID"],o=s.LANGUAGE,a=s["ASSOC-LANGUAGE"],u=s.NAME,c="YES"===s.DEFAULT;let d="YES"===s.AUTOSELECT;const l="YES"===s.FORCED,f=s["INSTREAM-ID"],_=s.CHARACTERISTICS,w=s.CHANNELS;if(h||he.hSt(Xi,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),o||he.hSt(Xi,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),u||he.hSt(Xi,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),r===Cn.pEt?(n&&he.hSt(Xi,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),f?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(f)||he.hSt(Xi,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):he.hSt(Xi,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):f&&he.hSt(Xi,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),c&&!d&&(d=!0,s.AUTOSELECT&&he.hSt(Xi,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),s.FORCED&&r!==Cn.Mm&&he.hSt(Xi,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===h||void 0===u)throw new g("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{yEt:a,MEt:w,pIt:_,AIt:h,gIt:d,_It:c,wIt:l,vIt:f,gs:o,l:u,Rg:r,ovt:n}}function uH(t,e,s){const n=q(t);let r,h,o;try{r=i.IA(s,e),o=function(t){if(void 0===t)return;const i=t.split("x"),e=Number(i[0]),s=Number(i[1]);if(S(e)||S(s))throw new g("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{ji:e,Ti:s}}(n.RESOLUTION),h=function(t){if(!t)return;let i,e,s;const n=t.split(",");for(const t of n){const n=t.trim();Df(n,"mp4a")?i="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n||"flac"===n.toLowerCase()?i=n:Df(n,"avc")||Df(n,"hvc1")||Df(n,"hev1")||Df(n,"dvh")||Df(n,"vp09")||Df(n,"av01")?e=n:s=s?s+","+n:n}return{XIt:i,ZIt:e,AEt:s}}(n.CODECS)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const a=dh(n.BANDWIDTH),u=dh(n["AVERAGE-BANDWIDTH"]),c=dh(n.SCORE),d=dh(n["FRAME-RATE"]),l=n["HDCP-LEVEL"],f=[];if(void 0!==n["ALLOWED-CPC"]){const t=n["ALLOWED-CPC"].split(",");f.push(...t.map((t=>{const i=t.split(":");return{keysystem:i[0],label:i[1]}})))}const _=n["VIDEO-RANGE"],w=n.AUDIO,A=n.VIDEO,v=n.SUBTITLES,m=n["CLOSED-CAPTIONS"];if(void 0===a?he.hSt(Xi,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==u&&u>a&&he.hSt(Xi,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),h||he.qp(Xi,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),h&&h.ZIt&&void 0===o&&he.qp(Xi,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===l||qt(["TYPE-0","TYPE-1","NONE"],l)||he.hSt(Xi,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===_||qt(["SDR","PQ","HLG"],_)||he.hSt(Xi,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===a)throw new g("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{TEt:f,NEt:w,evt:u,wz:a,DEt:m,wst:h,xct:d,IEt:l,$It:o,svt:c,SEt:v,ovt:r,EEt:A,bEt:_}}function cH(t,i){const e=q(t);if(!e.URI)throw new g("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return uH(t,i,e.URI)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function dh(t){const i=Number(t);return S(i)?void 0:i}function dH(t,i){const e=q(t);let s,n;try{s=function(t){switch(t){case"NONE":return Yo.FP;case"AES-128":return Yo.LEt;case"SAMPLE-AES":return Yo.mEt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new g("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(e.METHOD),n=e.URI?mH(e.URI,i):void 0}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=e.KEYFORMAT,h=e.IV,o=e.KEYFORMATVERSIONS;let a,u,c,d,l;if(s!==Yo.FP){if(c=r||Ml,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(sH(c)!==cm)throw new g("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=Yo.mEt}else a=s;u=n,d=h?lg(h):void 0,l=o?o.split("/").map((t=>Number(t))):[1]}else a=Yo.FP,(n||r||o||h)&&he.hSt(Xi,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{lS:a,ovt:u,kEt:d,vEt:c,CEt:l}}function lH(t){const i=hH(t);if(!i)return[void 0,""];const[e,s]=i.split(",");return[dh(e),s]}function fH(t,i){const e=t.split("@"),s=dh(e[0]),n=e.length>1?dh(e[1]):i;if(void 0===s||void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{Cn:n,U:s}}function _H(t){if(void 0!==t)return fH(t,void 0)}function gH(t,i){return fH(hH(t),i)}function wH(t,i){const e=q(t);try{const t=mH(e.URI,i);return{jM:t,Pmt:_H(e.BYTERANGE)}}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function AH(t){const i=hH(t);if(!i)throw new g("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const e=new Date(i);if(!dT(e))throw new g("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return e}function vH(t){const i=q(t),e=i["START-DATE"],s=i["END-DATE"],n=dh(i["PLANNED-DURATION"]);let r,h,o,a=dh(i.DURATION);void 0!==i["SCTE35-CMD"]&&(r=lg(i["SCTE35-CMD"]).buffer),i["SCTE35-IN"]&&(h=lg(i["SCTE35-IN"]).buffer),i["SCTE35-OUT"]&&(o=lg(i["SCTE35-OUT"]).buffer);const u="YES"===i["END-ON-NEXT"],c=function(t){const i={};for(const e of w.keys(t)){const s=t[e];void 0!==s&&Df(e,"X-")&&(i[e]=s)}return i}(i),d=i.ID,l=i.CLASS;let f,_;if(void 0===e)he.hSt(Xi,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+e+".");else if(f=new Date(e),_=void 0!==s?new Date(s):void 0,dT(f)||he.hSt(Xi,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const i=new Date(f.getTime()+1e3*a);_?_.getTime()!==i.getTime()&&(he.hSt(Xi,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),_=i):_=i}else _&&(a=(f.getTime()-_.getTime())/1e3);if(u&&(i.CLASS||he.hSt(Xi,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),i.DURATION&&he.hSt(Xi,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),_&&he.hSt(Xi,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===d&&he.hSt(Xi,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===d||void 0===f)throw new g("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:d,aEt:l,Yz:f,uEt:_,ct:a,cEt:n,_Et:r,wEt:h,gEt:o,oEt:u,lEt:c}}function mH(t,e){if(void 0===t)throw new g("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return i.IA(t,e)}function pH(t,i){const e=q(t),s=dh(e.DURATION),n=mH(e.URI,i),r=_H(e.BYTERANGE),h="YES"===e.INDEPENDENT,o="YES"===e.GAP;if(void 0===s)throw new g("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:s,ovt:{jM:n,Pmt:r},xEt:h,OEt:o}}function yH(t){const i=q(t);return{jEt:"YES"===i["CAN-BLOCK-RELOAD"],zEt:dh(i["CAN-SKIP-UNTIL"]),PEt:"YES"===i["CAN-SKIP-DATERANGES"],BEt:dh(i["HOLD-BACK"]),REt:dh(i["PART-HOLD-BACK"])}}function MH(t,i){const e=q(t);if(void 0===e.URI)throw new g("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=mH(e.URI,i),n=dh(e["LAST-MSN"]),r=dh(e["LAST-PART"]);if(void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{ovt:s,UEt:n,QEt:r}}function TH(t,i){var e;const s=q(t),n=dh(s["SKIPPED-SEGMENTS"]),r=null==(e=s["RECENTLY-REMOVED-DATERANGES"])?void 0:e.split("\t");if(void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{FEt:n,YEt:r,GEt:i}}function NH(t){const i=dh(q(t)["PART-TARGET"]);if(void 0===i)throw new g("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return i}function DH(t){switch(hH(t)){case"VOD":return vt.VEt;case"EVENT":return vt.WEt;default:return he.hSt(Xi,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),vt.rT}}function IH(t,i){const e=q(t);let s,n;try{s=function(t){if(void 0===t)throw new g("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return Jt.HEt;if("PART"===t)return Jt.qEt;throw new g("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(e.TYPE),n=mH(e.URI,i)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=dh(e["BYTERANGE-START"]),h=dh(e["BYTERANGE-LENGTH"]);let o;return void 0===r&&void 0===h||(o={Cn:r||0,U:h}),{Rg:s,ovt:{jM:n,Pmt:o}}}!function(t){t[t.ym=0]="ym",t[t.pm=1]="pm",t[t.Mm=2]="Mm",t[t.pEt=3]="pEt"}(Cn||(Cn={})),function(t){t[t.HEt=0]="HEt",t[t.qEt=1]="qEt"}(Jt||(Jt={})),function(t){t[t.FP=0]="FP",t[t.LEt=1]="LEt",t[t.mEt=2]="mEt"}(Yo||(Yo={})),function(t){t[t.rT=0]="rT",t[t.VEt=1]="VEt",t[t.WEt=2]="WEt"}(vt||(vt={}));var SH=class t{XEt(){const t=this.ZEt[this.KEt];return this.KEt+=1,t}JEt(){return this.ZEt[this.KEt]}Em(){const i=new t("");return i.KEt=0,i.ZEt=this.ZEt.slice(this.KEt),i}static $Et(t){if(!t)return[];return t.split(/[\r\n]+/).map((t=>t.trim())).filter((t=>t))}constructor(i){this.KEt=0,this.ZEt=t.$Et(i)}};function EH(t,i,e){const s=t.ovt;let n=t.dp,r=t.tbt,h=t.Cn;switch(e){case"#EXT-X-VERSION":n=function(t){const i=oH(t);return S(i)?(he.hSt(Xi,"Playlist version is NaN: "+t+"."),1):i}(i);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":h=function(t){const i=q(t),e=dh(i["TIME-OFFSET"]);if(void 0===e)throw new g("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{ibt:e,ebt:"YES"===i.PRECISE}}(i);break;case"#EXT-X-DEFINE":he.hSt(Xi,"Ignoring unsupported #EXT-X-DEFINE: "+i+".");break;default:he.qp(Xi,"Ignoring unrecognized line or comment: "+i+".")}return{ovt:s,dp:n,tbt:r,Cn:h}}function bH(t,i){return t.map((t=>t.lS===Yo.FP||t.kEt?t:Tt({},t,{kEt:LH(i)})))}function LH(t){const i=new DataView(new ArrayBuffer(16)),e=new L;return e.Im(8),K_(i,e,qo.fromNumber(t)),new j(i.buffer)}function kH(t,e,s){he.qp(Xi,"Parsing M3U8 playlist at "+t+".");const n=new SH(s);if("#EXTM3U"!==n.XEt())throw new g("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(s)?function(t,e){let s;try{s=i.IA(t)}catch(i){throw he.hSt(Xi,"The master playlist has no valid base URI: "+t+"."),new g("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let n={ovt:s,tbt:void 0,Cn:void 0,dp:void 0};const r=[],h=[],o=[],a=[];for(;;){const t=e.XEt();if(!t)break;try{const i=nH(t);switch(i){case"#EXT-X-MEDIA":{const i=aH(t,s);r.push(i);break}case"#EXT-X-STREAM-INF":{const i=uH(t,s,e.XEt());h.push(i);break}case"#EXT-X-I-FRAME-STREAM-INF":{const i=cH(t,s);o.push(i);break}case"#EXT-X-SESSION-DATA":he.hSt(Xi,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const i=dH(t,s);a.push(i);break}default:n=EH(n,t,i)}}catch(i){he.hSt(Xi,"Ignoring unparsable line: "+t,i)}}let u=n.dp;var c;const d=null!=(c=n.tbt)&&c,l=n.Cn;return void 0===u&&(he.hSt(Xi,"The playlist has no #EXT-X-VERSION, assuming version is 2."),u=2),u>=8&&(h.some((t=>void 0!==t.svt))||o.some((t=>void 0!==t.svt)))&&(h.some((t=>void 0===t.svt))||o.some((t=>void 0===t.svt)))&&he.hSt(Xi,"If one master playlist variant stream has a SCORE, all variants should have it."),{ovt:s,dp:u,tbt:d,Cn:l,sbt:o,nbt:a,Pp:r,rbt:h}}(t,n):function(t,e,s){let n={ovt:t,tbt:void 0,Cn:void 0,dp:void 0};const r=[];let h,o,a,u,c=!1,d=!1;const l=[],f=cs();let _,w,A,v,m,p,y,M,T,N=[],D=[],I=!1,S=!1;const E=[],b=[];let L,k,C,x,O,j=0,z=!1,P=vt.rT,B=!1,R=0;try{O=i.IA(t)}catch(i){throw he.hSt(Xi,"The media playlist has no valid base URI: "+t+".",i),new g("HLSPlaylistParser - Could not parse HLS media playlist.")}const U=s.Em();for(;void 0===k||void 0===C;){const t=U.XEt();if(!t)break;try{switch(rH(t)){case"#EXT-X-MEDIA-SEQUENCE":k=oH(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":C=oH(t)}}catch(i){he.hSt(Xi,"Ignoring unparsable line: "+t,i)}}void 0===k&&(he.qp(Xi,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),k=0),void 0===C&&(he.qp(Xi,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),C=0);let Q=k,F=C;for(;;){const t=s.XEt();if(!t)break;let e=!1;try{const s=rH(t);switch(s){case"#EXTINF":e=!0,[_,w]=lH(t);break;case"#EXT-X-BYTERANGE":e=!0,A=gH(t,j),A&&(j=A.Cn+A.U);break;case"#EXT-X-DISCONTINUITY":e=!0,I=!0,F++;break;case"#EXT-X-KEY":{var Y;e=!0;const i=dH(t,O);if(i.lS===Yo.FP){f.clear(),T=void 0;break}var G;const s=null!=(G=null==(Y=i.vEt)?void 0:Y.toString())?G:"identity";f.set(s,i),i.lS===Yo.LEt&&(T=i);break}case"#EXT-X-MAP":e=!0,m=wH(t,O),p=T;break;case"#EXT-X-PROGRAM-DATE-TIME":e=!0,y=AH(t);break;case"#EXT-X-GAP":e=!0,S=!0;break;case"#EXT-X-BITRATE":e=!0,M=oH(t);break;case"#EXT-X-TARGETDURATION":h=oH(t);break;case"#EXT-X-DATERANGE":{const i=vH(t);r.push(i);break}case"#EXT-X-PART":{e=!0;const i=pH(t,O);D.push(i);break}case"#EXT-X-PRELOAD-HINT":{const i=IH(t,O);E.push(i);break}case"#EXT-X-SKIP":{l.length>0&&he.hSt(Xi,"#EXT-X-SKIP must appear before any #EXTINF tags."),e=!0;const i=TH(t,Q);R=i.FEt,x=i.YEt,Q+=i.FEt;break}case"#EXT-X-SERVER-CONTROL":{const i=yH(t);c=i.jEt,o=i.zEt,d=i.PEt,a=i.BEt,u=i.REt;break}case"#EXT-X-RENDITION-REPORT":{const i=MH(t,O);b.push(i);break}case"#EXT-X-PART-INF":L=NH(t);break;case"#EXT-X-MEDIA-SEQUENCE":e&&he.hSt(Xi,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":e&&he.hSt(Xi,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":z=!0;break;case"#EXT-X-PLAYLIST-TYPE":P=DH(t);break;case"#EXT-X-I-FRAMES-ONLY":B=!0;break;default:if(Df(s,"#"))n=EH(n,t,s);else{v=i.IA(t,O);const e=m?{ovt:m,hbt:p}:void 0,s={nbt:bH(Kd(f),Q),XD:N,obt:D,ct:_,Jz:w,abt:I,ovt:{Pmt:A,jM:v},ubt:e,cbt:y,OEt:S,dbt:M,GEt:Q,lbt:F};l.push(s),Q++,N=[],D=[],_=void 0,w=void 0,I=!1,A=void 0,v=void 0,y=void 0,S=!1,M=void 0}}}catch(i){he.hSt(Xi,"Ignoring unparsable line: "+t,i)}}if(D.length){const t=m?{ovt:m,hbt:T}:void 0,i={nbt:bH(Kd(f),Q),XD:N,obt:D,ct:_,Jz:w,abt:I,ovt:void 0,ubt:t,cbt:y,OEt:S,dbt:M,GEt:Q,lbt:F};l.push(i)}let V=n.dp;var W;const H=null!=(W=n.tbt)&&W,q=n.Cn;void 0===V&&(he.hSt(Xi,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),V=2),void 0===h&&he.hSt(Xi,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const X=l.length,Z=X>0;Z||he.hSt(Xi,"The HLS media playlist contains no segments.");const K=Z&&l[X-1].obt.length>0;return K&&void 0===L&&he.hSt(Xi,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),K&&void 0===u&&he.hSt(Xi,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{jEt:c,zEt:o,PEt:d,fbt:r,lbt:C,_bt:z,tbt:H,BEt:a,gbt:B,GEt:k,FEt:R,REt:u,JSt:L,wbt:P,Abt:E,YEt:x,vbt:b,mbt:h,Ket:l,Cn:q,ovt:O,pbt:e,dp:V}}(t,e,n)}var CH=class{get ovt(){return this.fIt.ovt}get wst(){return this.ybt}set wst(t){this.ybt=t?OH(t):void 0,this.Mbt=function(t,i){return!(void 0!==(null==t?void 0:t.XIt)&&void 0===(null==i?void 0:i.XIt)||void 0!==(null==t?void 0:t.ZIt)&&void 0===(null==i?void 0:i.ZIt))}(this.Tbt,this.ybt)}get Nbt(){return this.Mbt}get gSt(){return this.Dbt}get uSt(){return this.Dbt.filter((t=>t.Rg===Cn.ym))}get cSt(){return this.Dbt.filter((t=>t.Rg===Cn.pm))}get Ibt(){return this.Dbt.filter((t=>t.Rg===Cn.Mm))}get Sbt(){return this.Dbt.filter((t=>t.Rg===Cn.pEt))}Ebt(t){for(const i of this.Dbt){const e=i.fIt.Ebt(t);if(void 0!==e)return e}}bbt(t){for(const i of this.Dbt){const e=i.fIt.bbt(t);if(void 0!==e)return e}}Lbt(t){To(this.Dbt,t)}constructor(t,i,e){var s,n,r,h;this.o=xH++,this.svt=void 0,this.$It=void 0,this.evt=void 0,this.Mbt=!1,this.Dbt=[],this.fIt=i,this.wz=t.wz,this.evt=t.evt,this.svt=t.svt,this.Tbt=t.wst?OH(t.wst):void 0,this.ybt=this.Tbt,this.$It=t.$It,this.xct=t.xct,this.NEt=null!=(s=t.NEt)?s:"kbt"+this.o,this.EEt=null!=(n=t.EEt)?n:"Cbt"+this.o,this.SEt=null!=(r=t.SEt)?r:"xbt"+this.o,this.DEt=null!=(h=t.DEt)?h:"Obt"+this.o,this.Dbt=e}},xH=0;function OH(t){return Tt({},t,{ZIt:t.ZIt?ev(t.ZIt):void 0})}var jH,zH=class{get GT(){var t;return this.tN+(null!=(t=this.jbt)?t:0)}get zbt(){return this.Pbt}get nbt(){return this.Bbt.nbt}Rbt(t,i){this.tN=t,this.Pbt=i}constructor(t,i,e,s,n){this.n9=void 0,this.Bbt=t,this.Ubt=i,this.tN=e,this.Pbt=s,this.ct=n.ct,this.ovt=n.ovt,this.xEt=n.xEt,this.OEt=n.OEt}},PH=class{get GT(){var t;return this.tN+(null!=(t=this.Qbt)?t:0)}get Fbt(){return this.tN}get ct(){return this.VL}get ovt(){return this.Ybt}get Gbt(){return this.Vbt}get zbt(){return this.Pbt}get obt(){return this.Wbt}get Hbt(){return this.qbt}get VT(){var t;return this.GT+(null!=(t=this.VL)?t:this.qbt)}set jbt(t){this.Qbt=t;for(const i of this.Wbt)i.jbt=t}get jbt(){return this.Qbt}Xbt(t){return this.Wbt[t]}Zbt(t){for(let i=0;i<this.Wbt.length;i++){const e=this.Wbt[i],s=e.GT,n=s+e.ct;if(s<=t&&t<=n)return t===n&&i+1<this.Wbt.length?this.Wbt[i+1]:e}}Kbt(t){for(let i=this.Wbt.length-1;i>=0;i--){const e=this.Wbt[i];if(e.GT<=t)return e}}Jbt(t){let i=this.Kbt(t);for(;i&&!i.xEt&&i.Ubt>0;)i=this.Xbt(i.Ubt-1);return i}Rbt(t,i,e){const s=t.obt.length!==this.Wbt.length||e!==this.Pbt;this.Vbt=i,this.Pbt=e,this.VL=t.ct,null!=this.cbt||(this.cbt=t.cbt),void 0===this.Ybt&&(this.Ybt=t.ovt),s&&this.$bt(t.obt)}$bt(t){this.Wbt.length>t.length&&(this.Wbt.length=t.length);let i=0;for(let e=0;e<t.length;e++){const s=t[e],n=this.Pbt&&e===t.length-1,r=this.tN+i;if(e<this.Wbt.length)this.Wbt[e].Rbt(r,n);else{const t=new zH(this,e,r,n,s);this.Wbt.push(t)}i+=s.ct}this.qbt=i}tLt(){No(this.Wbt),this.qbt=0}constructor(t,i,e,s,n){this.n9=void 0,this.Wbt=[],this.qbt=0,this.tN=t,this.ubt=n.ubt,this.Vbt=e,this.Pbt=s,this.VL=n.ct,this.cbt=n.cbt,this.Ybt=n.ovt,this.OEt=n.OEt,this.GEt=n.GEt,this.abt=n.abt,this.lbt=i,this.nbt=n.nbt,this.$bt(n.obt)}};!function(t){t.iLt="YES",t.eLt="v2"}(jH||(jH={}));var BH=class extends fh{};var RH=class extends Gs{get va(){return this.Xa||(this.Xa=function(t){return xl(Mh(t),{get content(){return t.O},get class(){return t.aEt},get startDate(){return t.Yz},get endDate(){return t.uEt},get duration(){return t.ct},get plannedDuration(){return t.cEt},get endOnNext(){return t.oEt},get scte35Cmd(){return t.fEt},get scte35Out(){return t.gEt},get scte35In(){return t.wEt},get customAttributes(){return t.dEt}})}(this)),this.Xa}get aEt(){return this.sLt}get Yz(){return this.nLt}get uEt(){return this.rLt}get ct(){return this.VL}get cEt(){return this.hLt}get oEt(){return this.oLt}get fEt(){return this.aLt}get gEt(){return this.uLt}get wEt(){return this.cLt}get dEt(){return this.dLt}Yn(t){let i=!1;var e;(void 0===this.sLt&&void 0!==t.aEt&&(i=!0,this.sLt=t.aEt),void 0===this.rLt&&void 0!==t.uEt&&(i=!0,this.rLt=t.uEt),void 0===this.VL&&void 0!==t.ct&&(i=!0,this.VL=t.ct),void 0===this.hLt&&void 0!==t.cEt&&(i=!0,this.hLt=t.cEt),!this.oLt&&t.oEt&&(i=!0,this.oLt=t.oEt),i=this.updateCustomAttributes(t,i),void 0===this.aLt&&void 0!==t.fEt&&(i=!0,this.aLt=t.fEt),void 0===this.uLt&&void 0!==t.gEt&&(i=!0,this.uLt=t.gEt),void 0===this.cLt&&void 0!==t.wEt&&(i=!0,this.cLt=t.wEt),this.lLt(),this.fLt(),this._Lt(),i)&&(this.Co(new $a(this)),null==(e=this.iN)||e.Co(new fu(this)))}updateCustomAttributes(t,i){let e=i;if(t.dEt)for(const i of w.keys(t.dEt))void 0===this.dLt[i]&&(e=!0,this.dLt[i]=t.dEt[i]);return e}lLt(){this.VL&&!this.rLt&&(this.rLt=new Date(this.nLt.getTime()+ir(this.VL)))}fLt(){this.rLt&&!this.VL&&(this.VL=lT(this.rLt.getTime()-this.nLt.getTime()))}_Lt(){this.sN===1/0&&(this.rLt||this.VL)&&(this.sN=UH(this.tN,this.VL,this.nLt,this.rLt))}constructor(t,i){super(i,UH(i,t.ct,t.Yz,t.uEt),void 0,!1,t.o),this.sLt=t.aEt,this.nLt=t.Yz,this.rLt=t.uEt,this.VL=t.ct,this.hLt=t.cEt,this.oLt=Boolean(t.oEt),this.dLt=t.dEt||{},this.aLt=t.fEt,this.uLt=t.gEt,this.cLt=t.wEt,this.lLt(),this.fLt()}};function UH(t,i,e,s){return Yt(i)?t+i:s?t+(lT(s.getTime())-lT(e.getTime())):1/0}var QH=class extends px{Yn(t,i){FH(this,YH(t),i)}SS(t){GH(this.L.og,t),super.SS(t)}constructor(){super(void 0,void 0,Kc.DATE_RANGE)}};function FH(t,i,e){const s=t.L.og;for(let e=s.length-1;e>=0;e--){const n=s[e],r=Zt(i,(t=>t.o===n.o));r?n.Yn(r):t.xI(n)}for(const s of i){const i=s.Yz;if(void 0!==i&&!t.U0(s.o)){const n=e(i),r=new RH(s,n);GH(t.L.og,r),t.SS(r)}}}function YH(t){const i=cs(),e=[];for(const s of t)if(i.has(s.o)){const t=i.get(s.o),e=Tt({},t,Xl(s),{dEt:Tt({},t.dEt,s.dEt)});i.set(s.o,e)}else i.set(s.o,s),e.push(s.o);return e.map((t=>i.get(t)))}function GH(t,i){const e=Qd(t,(t=>t.aEt===i.aEt));e&&e.oEt&&e.Yn({o:e.o,uEt:i.Yz})}var VH=String.fromCharCode(95),WH=VH+"HLS_msn",HH=VH+"HLS_part",qH=VH+"HLS_skip",XH="HLSMediaPlaylist",ZH=class{get _bt(){if(0===this._mt.length)return!1;return this._mt[this._mt.length-1].zbt}get ct(){return this.VL}get t_(){return this.s0}get gLt(){return this.wLt}get $St(){return this.ALt}get JSt(){return this.vLt}get BEt(){return this._bt?0:this.mLt?this.mLt:this.ALt?3*this.ALt:void 0}get REt(){var t;return null!=(t=this.pLt)?t:this.vLt?3*this.vLt:void 0}get jEt(){return this.yLt}get zEt(){return this.MLt}get PEt(){return this.TLt}get wbt(){return this.NLt}get DLt(){return void 0!==this.JSt}get ILt(){if(this._bt)return!0;const t=i.Jd()/1e3,e=this.SLt,s=this.ELt;return void 0!==e&&t-e<s}get SLt(){return this.bLt}get LLt(){if(this.kLt)return i.Jd()/1e3-this.kLt}get jbt(){return this.Qbt}get ELt(){var t;return null!=(t=this.ALt)?t:void 0===this.bLt?5:1}get Ket(){return this._mt}get fbt(){return this.CLt}get xLt(){return this.OLt}set xLt(t){this.OLt=t}get Cn(){return this.hI}get jLt(){return this.zLt}qIt(t){if(!t)return this.ovt;const e=i.Dh(this.ovt);return void 0!==t.GEt&&e.searchParams.append(WH,String(t.GEt)),void 0!==t.PLt&&e.searchParams.append(HH,String(t.PLt)),void 0!==t.Hm&&e.searchParams.append(qH,t.Hm),e.href}Lht(t){const i=this._mt;if(0===i.length)return;const e=t-i[0].GEt;return e<0||e>=i.length?void 0:i[e]}BLt(t){if(0===this._mt.length)return;const i=GY(KH.Ib,this._mt,t);if(!(i<0)){const e=this._mt[i];return t===e.VT&&i+1<this._mt.length?this._mt[i+1]:e}{const i=this._mt[this._mt.length-1];if(t===i.VT)return i}}RLt(t){if(0===this._mt.length)return;const i=this._mt[0];if(t<i.VT)return i;const e=this._mt[this._mt.length-1];return t>=e.GT?e:this.BLt(t)}Ebt(t){const i=this.RLt(t);if(void 0===i)return;for(let e=i.GEt-this._mt[0].GEt;e>=0;e--){const i=this._mt[e];if(void 0!==i.cbt)return new Date(i.cbt.getTime()+1e3*(t-i.GT))}}bbt(t){let i;for(const e of this._mt)if(JH(e))if(void 0===i)i=e;else{if(!(e.cbt.getTime()<=t.getTime()))break;i=e}if(void 0!==i)return i.GT+(t.getTime()-i.cbt.getTime())/1e3}ULt(t){switch(t){case Jt.HEt:return this.QLt;case Jt.qEt:return this.FLt;default:return}}Rbt(t){var e;void 0===this.ALt&&(this.ALt=null!=(e=t.mbt)?e:this.YLt(t));void 0===this.mLt&&void 0!==t.BEt&&(this.mLt=t.BEt),void 0===this.vLt&&void 0!==t.JSt&&(this.vLt=t.JSt),void 0===this.pLt&&void 0!==t.REt&&(this.pLt=t.REt),this.yLt=t.jEt,this.MLt=t.zEt,this.TLt=t.PEt,this.NLt=t.wbt,this.vmt(t),this.GLt(t);const s=Zt(t.Abt,(t=>t.Rg===Jt.HEt)),n=Zt(t.Abt,(t=>t.Rg===Jt.qEt));this.QLt=s?{ovt:s.ovt,Rg:s.Rg,lbt:t.lbt}:void 0,this.FLt=n?{ovt:n.ovt,Rg:n.Rg,lbt:t.lbt}:void 0,this.bLt=i.Jd()/1e3;const r=this.s0.jn(this.s0.U-1);this.VLt();const h=this.s0.jn(this.s0.U-1);(!this.kLt||h-r>0)&&(this.kLt=this.bLt),null!=this.hI||(this.hI=t.Cn)}VLt(){this.wLt=this.WLt(),this.s0=this.HLt(this.wLt),this.VL=this.qLt()}WLt(){const t=this.Ket;if(0===t.length)return Ai.SB();const i=t[0].GT,e=t[t.length-1].VT;return new Ai([i,e])}HLt(t){if(0===t.U||this._bt)return t;const i=t.Cn(0),e=t.jn(0)-this.fyt;return e<i?Ai.DB(i):new Ai([i,e])}get fyt(){return this._bt?0:null!=(e=null!=(i=null!=(t=this.XLt)?t:this.REt)?i:this.BEt)?e:0;var t,i,e}qLt(){return 0===this._mt.length?0:this._bt?co(this._mt,(t=>{var i;return null!=(i=t.ct)?i:t.Hbt})):1/0}YLt(t){let i;for(const e of t.Ket)if(void 0!==e.ct){const t=_.max(1,_.round(e.ct));(void 0===i||i<t)&&(i=t)}if(void 0===i)throw new g("HLSModel - Could not determine required segment target duration.");return i}vmt(t){if(0===t.Ket.length)return No(this._mt),void this.ZLt();const i=this.KLt(t);if(!i)return;let e,s,n;i.JLt>0&&this._mt.splice(0,i.JLt);const r=t.FEt;if(r>0){if(r>this._mt.length)throw new BH("New playlist skips over missing segments.");const i=this._mt[r-1];if(void 0===i.ct)throw new BH("New playlist skips over an incomplete segment.");e=i.Fbt+i.ct,n=i.lbt-t.lbt,s=r;for(let t=0;t<r;t++)this._mt[t].tLt()}else e=i.$Lt,n=0,s=0;for(let i=0;i<t.Ket.length;i++,s++){const r=t.Ket[i],h=0===i,o=t._bt&&i===t.Ket.length-1,a=r.ct,u=r.lbt+n;if(s<this._mt.length){const t=this._mt[s];0,t.Rbt(r,h,o)}else{let t=r;if(this._mt.length>0&&void 0===t.ubt){t=Tt({},t,{ubt:this._mt[this._mt.length-1].ubt})}const i=new PH(e,u,h,o,t);i.jbt=this.Qbt,this._mt.push(i)}void 0!==a&&(e+=a)}}KLt(t){if(0===this._mt.length)return{JLt:0,$Lt:0};const i=this._mt[0].GEt,e=this._mt[this._mt.length-1].GEt,s=t.Ket[0].GEt-t.FEt,n=t.Ket[t.Ket.length-1].GEt;let r=0,h=0;if(s<i){const e=this.Ket[0].cbt,n=t.Ket[0].cbt;if(!(e&&n&&e<n))return void he.hSt(XH,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+i+")");r=this._mt.length,this.ZLt()}else{if(n<e)return void he.hSt(XH,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+e+")");if(e<s){var o;h=null!=(o=function(t,i){const e=Qd(t,(t=>void 0!==t.cbt));if(void 0===e)return;const s=function(t){let i=0;for(const s of t){if(s.abt)return;if(s.cbt)return[s,i];var e;i+=null!=(e=s.ct)?e:0}return}(i.Ket);if(void 0===s)return;const[n,r]=s;if(e.lbt!==n.lbt)return;const h=(n.cbt.getTime()-e.cbt.getTime())/1e3;return e.Fbt+h-r}(this._mt,t))?o:function(t,i,e){const s=t[t.length-1];var n;const r=null!=(n=s.ct)?n:_.max(e,s.Hbt),h=e*(i-s.GEt-1);return s.Fbt+r+h}(this._mt,s,this.ALt),he.rSt(XH,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+e+"), resetting playlist and restarting at "+h+"s"),r=this._mt.length,this.ZLt()}else{0;const t=Ka(this._mt,(t=>t.GEt===s));0,h=this._mt[t].Fbt,t>0&&(r=t)}}return{JLt:r,$Lt:h}}GLt(t){let i=t.fbt.map(tH);if(t.PEt&&t.pbt.Hm===jH.eLt&&(i=this.CLt.concat(i)),this.CLt=YH(i),t.YEt)for(const i of t.YEt){const t=Ka(this.CLt,(t=>t.o===i));t>=0&&M(this.CLt,t)}}tkt(t,i){if(this.Qbt!==t){this.Qbt=t;for(const t of this._mt)t.jbt=this.Qbt;this.VLt()}this.zLt=i}ZLt(){this.Qbt=void 0,this.zLt=void 0}constructor(t,i,e){this.bLt=void 0,this.kLt=void 0,this.QLt=void 0,this.FLt=void 0,this.ALt=void 0,this.vLt=void 0,this.mLt=void 0,this.pLt=void 0,this._mt=[],this.CLt=[],this.yLt=!1,this.MLt=void 0,this.TLt=!1,this.NLt=vt.rT,this.s0=Ai.SB(),this.wLt=Ai.SB(),this.VL=void 0,this.OLt=-1/0,this.zLt=void 0,this.ovt=t,this.hI=i,this.XLt=e}},KH=class t{static get Ib(){return null!=this.gst||(this.gst=new t),this.gst}cmt(t){return t.GT}dmt(t){return t.VT}lmt(t,i){return Ge(t,i)}fmt(t,i,e){return(t-i)/(e-i)}};function JH(t){return void 0!==t.cbt}function Ir(t){return void 0!==t.obt}function $H(t){return Ir(t)?t.Gbt:0===t.Ubt&&t.Bbt.Gbt}function tq(t,i){return Ir(t)?Ir(i)?t.GEt+1===i.GEt:0===i.Ubt&&tq(t,i.Bbt):t.Ubt===t.Bbt.obt.length-1?tq(t.Bbt,i):!Ir(i)&&t.Bbt===i.Bbt&&t.Ubt+1===i.Ubt}var iq=class extends fh{get name(){return"DiscontinuityMisalignmentError"}constructor(){super("Tried to wait for multiple discontinuity mappings at the same time")}};var eq=class{ikt(t){const i=this.ekt.get(t);return void 0!==i&&sq(i)}skt(t){if(this.nkt()>t)return Promise.reject(new iq);const i=[];for(const s of this.rkt){var e;if(s<t)null==(e=this.ekt.get(s))||e.hkt.qb(new iq),this.ekt.delete(s);else i.push(s)}return this.rkt=i,-1===this.rkt.indexOf(t)&&this.rkt.push(t),this.okt(t).hkt.Zb}akt(t){const i=this.ekt.get(t);if(!i||!sq(i))throw new g("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return i}ukt(t){return this.akt(t).UD}ckt(t,i){const e=Ir(i)?i:i.Bbt,s=this.akt(e.lbt);let n=t.ST(s.UD);if(s.dkt){const t=Ri.mD(i.GT).bN(n);if(t.IN().mN(uA())){const i=_.round(t.vN()/$n().vN());n=n.ST($n().sD(i))}}return n}lkt(t,i){return this.ckt(t,i).bN(t)}fkt(t,i,e,s,n){this._kt<t&&(this._kt=t);const r=this.okt(t);void 0===r.UD&&(r.gkt.some((t=>t.aht===i))||(r.gkt.push({aht:i,wkt:e,Akt:s._D(e.kp),dkt:n}),this.vkt(r,t)))}vkt(t,i){if(t.UD||!this.mkt(t))return;const e=kc(t.gkt,nq);No(t.gkt),t.UD=e.Akt.bN(e.wkt),t.dkt=e.dkt,t.hkt.Wb(),To(this.rkt,i)}mkt(t){return this.pkt.length>0&&this.pkt.every((i=>t.gkt.some((t=>t.aht===i))))}okt(t){if(this.ekt.has(t))return this.ekt.get(t);{const i={UD:void 0,dkt:!1,hkt:new Rs,gkt:[]};return this.ekt.set(t,i),i}}ykt(t){this.pkt=t,this.ekt.forEach(((t,i)=>this.vkt(t,i)))}Mkt(){this._kt=-1}nkt(){return this._kt}Qd(){this.ekt.forEach((t=>t.hkt.Xd())),this.ekt.clear()}constructor(){this.pkt=[],this.ekt=pt(),this.rkt=[],this._kt=-1}};function sq(t){return void 0!==t.UD}function nq(t,i){return t.dkt||i.dkt?function(t,i){let e=t.bN(i);return t.kN()||i.kN()||(e.yN(uA())?e=e.bN($n()):e.DN(uA().EN())&&(e=e.ST($n()))),e}(t.wkt,i.wkt).pN(Ri.zN):t.wkt.pN(i.wkt)}var rq=class{get Tkt(){return this.Nkt}get aSt(){return this.Dkt}get tT(){return this.Ikt}Rbt(t,i){if(KW(t))if(0===this.Dkt.length)this.Skt(t);else{if(!i)return void he.hSt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");i.fIt.Rbt(t)}else{if(0!==this.Dkt.length)return void he.hSt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.Ekt(t)}}Skt(t){const i=this.bkt(t.ovt);i.Rbt(t);const e=this.Lkt(Cn.ym,i),s=this.Lkt(Cn.pm,i),n=new CH({ovt:i.ovt,wz:0,evt:0,svt:NaN,wst:void 0,$It:void 0,xct:0,TEt:[],IEt:void 0,bEt:void 0,NEt:void 0,EEt:void 0,SEt:void 0,DEt:void 0},i,[e,s]);this.Dkt.push(n)}Ekt(t){this.Nkt.push(...t.nbt);const i=this.kkt(t);for(const e of t.rbt){const s=i.filter((t=>oq(t,e)));this.Ckt(e,s);const n=new CH(e,this.bkt(e.ovt,t.Cn),s);this.Dkt.push(n)}}bkt(t,i){let e=this.xkt.get(t);return void 0===e&&(e=new ZH(t,i,this.XLt),this.xkt.set(t,e)),e}kkt(t){const i=[];for(const e of t.Pp)if(void 0===e.ovt){for(const s of t.rbt)if(hq(e.Rg,e.AIt,s)){const t=new _W(e,this.bkt(s.ovt));i.push(t)}}else{const t=new _W(e,this.bkt(e.ovt));i.push(t)}return i}Lkt(t,i){return new _W({Rg:t,ovt:void 0,AIt:"",gs:void 0,yEt:void 0,l:"",_It:!0,gIt:!1,wIt:!1,pIt:void 0,vIt:void 0,MEt:void 0},i)}Ckt(t,i){const e=i.filter((t=>t.Rg===Cn.ym)),s=i.filter((t=>t.Rg===Cn.pm)),n=t.wst&&(t.wst.ZIt||t.wst.XIt);if((!n||t.wst.ZIt)&&0===s.length){const e=this.Lkt(Cn.pm,this.bkt(t.ovt));i.push(e)}if((!n||t.wst.XIt)&&0===e.length){const e=this.Lkt(Cn.ym,this.bkt(t.ovt));i.push(e)}t.wst&&t.wst.AEt}Okt(t){for(const i of this.Dkt)for(const e of i.gSt)if(e===t)return e}jkt(t){for(const i of this.Dkt)if(i===t)return i}zkt(t){for(const i of this.Dkt)if(qt(i.gSt,t))return i}Qd(){No(this.Dkt),No(this.Nkt),this.xkt.clear(),this.Ikt.Qd()}constructor(t,i){this.Dkt=[],this.Nkt=[],this.xkt=cs(),this.Ikt=new eq,this.Pkt=t,this.XLt=i}};function hq(t,i,e){switch(t){case Cn.ym:return e.NEt===i;case Cn.pm:return e.EEt===i;case Cn.Mm:return e.SEt===i;case Cn.pEt:return e.DEt===i}return!1}function oq(t,i){return hq(t.Rg,t.AIt,i)&&(!t.mIt||t.fIt.ovt===i.ovt)}var aq,uq=class extends wn{constructor(t){super(aq.Bkt),this.bIt=t}},cq=class extends wn{constructor(t){super(aq.Rkt),this.bIt=t}},cu="HlsModelUpdater";!function(t){t.Bkt="Ukt",t.Rkt="Qkt"}(aq||(aq={}));var dq=class extends Pl{get Fkt(){return this.Ykt}get Gkt(){return this.Vkt}get Tr(){return this.lvt}get Wkt(){return this.Hkt}async qkt(t){const i=this.lvt.Pkt;if(!i)throw new g("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this.Co(new kn);const e=await this.Xkt(i,{},2,!0,t),s=e.fIt;if(!ZW(s)&&!KW(s))throw new g("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");ZW(s)||he.qp(cu,"Detected media playlist only HLS stream."),this.Zkt(s),e.Kkt&&(this.Vkt=!0,await this.Jkt(t)),this.Ykt=!0}async $kt(t,i,e,s){const n=this.lvt.Okt(t);if(!n)throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={GEt:i,PLt:e,Hm:gq(n)},h=ir(_.max(1,3*t.fIt.ELt));try{await this.tCt(n,r,s,h)}catch(t){throw Ao(t),this.iCt(n),t}}eCt(t,i){const e=this.lvt.Okt(t);if(!e)throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={GEt:void 0,PLt:void 0,Hm:gq(e)},n=ir(_.max(1,3*t.fIt.ELt));return this.tCt(e,s,i,n)}sCt(t,i){return this.nCt.has(t.Mg)||this.nCt.set(t.Mg,new Rs),dt(this.nCt.get(t.Mg).Zb,i)}iCt(t){this.Co(new cq(t))}async tCt(t,e,s,n){const r=t.fIt.qIt(e);let h;try{h=(await this.Xkt(r,e,0,this.Vkt,s,n)).fIt}catch(e){throw Ao(e),t.fIt.xLt=i.Jd(),e}if(!KW(h))throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");if(this.rCt&&t!==this.rCt&&!this.rCt.fIt.ILt)try{await this.eCt(this.rCt,s)}catch(i){Ao(i),this.rCt=t,this.hCt()}try{this.Zkt(h,t)}catch(i){if(i instanceof BH&&void 0!==e.Hm){const i=Tt({},e,{Hm:void 0});return this.tCt(t,i,s,n)}throw i}this.oCt(t),this.rCt=t}async Xkt(t,i,e,s,n,r){if(he.qp(cu,"Loading HLS playlist at "+t+"."),s){const i=await this.aCt(t,n);if(void 0!==i)return{fIt:i,Kkt:!0}}return{fIt:await this.uCt(t,i,e,n,r),Kkt:!1}}async aCt(t,i){try{const e=await this.Aot.bet([t]);if(Bo(i),void 0!==e)return kH(e.responseURL,{},e.data)}catch(t){Ao(t)}}async uCt(t,i,e,s,n){const r={zu:t,fS:Uv.Ru,AS:this.Qyt,lS:Nr.GET,Rg:iu.XI,Hd:s,CI:n},h=await hu((()=>this.cCt(r)),s,e);return kH(h.IS,i,h.zm)}async cCt(t){const i=await this.NS.SI(t);return{zm:await i.DS(),IS:i.IS}}async Jkt(t){Bo(t);const i=[];for(const e of this.lvt.aSt)for(const s of e.gSt)i.push(this.dCt(s,t));await Promise.all(i)}async dCt(t,i){try{const e=await this.Aot.bet([t.fIt.ovt]);Bo(i),void 0===e||t.fIt.ILt||await this.eCt(t,i)}catch(t){Ao(t)}}hCt(){for(const t of this.lvt.aSt)for(const i of t.gSt)i!==this.rCt&&void 0!==i.fIt.jbt&&(i.fIt.ILt?this.oCt(i):i.fIt.ZLt())}oCt(t){if(0!==t.fIt.Ket.length){if(!this.rCt)return this.rCt=t,void this.rCt.fIt.tkt(0,void 0);if(this.lCt(this.rCt),!this.lCt(t)&&void 0===t.fIt.jbt){const i=this.fCt(t,this.rCt);he.rSt(cu,"Assuming global timeline offset of "+i+"s for rendition "+t.fIt.ovt+"."),t.fIt.tkt(i,void 0)}}}fCt(t,i){if(lq(t)){const e=t.fIt.Ket[0],s=i.fIt.Ket[0];return he.rSt(cu,"Synchronizing by start of VOD: "+s.GT+" vs "+e.GT),s.GT-e.Fbt}const e=function(t,i){let e=t.length-1,s=i.length-1;for(;e>=0&&s>=0;){const n=t[e],r=i[s];if(n.lbt>r.lbt)e--;else if(n.lbt<r.lbt)s--;else if(n.abt){if(r.abt)return{segment:n,referenceSegment:r};s--}else e--}return}(t.fIt.Ket,i.fIt.Ket);if(void 0!==e){const{segment:t,referenceSegment:i}=e;return he.rSt(cu,"Synchronizing by start of discontinuity #"+i.lbt+": "+i.GT+" vs "+t.GT),i.GT-t.Fbt}const s=_q(t.fIt.Ket);if(void 0!==s){const t=_q(i.fIt.Ket);if(void 0!==t){he.rSt(cu,"Synchronizing by PDT:",t.cbt.toISOString()+" vs "+s.cbt.getTime());return t.GT-s.Fbt-(t.cbt.getTime()-s.cbt.getTime())/1e3}}const n=fq(i),r=fq(t);var h;const o=null!=(h=t.fIt.jbt)?h:0;return he.rSt(cu,"Synchronizing by last segment:",n+" vs "+r),n-r+o}lCt(t){const i=this.lvt.Okt(t);if(!i)return!1;if(lq(i))return!1;const e=function(t,i){return Qd(t,(t=>void 0!==t.n9&&i.ikt(t.lbt)))}(i.fIt.Ket,this.lvt.tT);if(void 0===e)return!1;if(i.fIt.jLt===e.lbt)return!0;const s=this.lvt.tT.ckt(e.n9,e).vN()-e.Fbt;return he.rSt(cu,"Synchronize by media timestamp: "+s+"s for rendition "+t.fIt.ovt+"."),i.fIt.tkt(s,e.lbt),(void 0===this.rCt||void 0===this.rCt.fIt.jLt||this.rCt.fIt.jLt<e.lbt)&&(this.rCt=i),!0}Zkt(t,i){var e;(this.lvt.Rbt(t,i),KW(t)&&i)&&(this.Hkt=i,this.Co(new uq(i)),null==(e=this.nCt.get(i.Mg))||e.Wb(),this.nCt.delete(i.Mg));this.Co(new la)}_Ct(t,i){for(const e of this.lvt.aSt){const s=Zt(e.cSt,(t=>t.fIt===i));void 0!==s&&void 0!==t.ZIt&&(s.wst=iH(s.wst,t));const n=Zt(e.uSt,(t=>t.fIt===i));void 0!==n&&void 0!==t.XIt&&(n.wst=iH(n.wst,t)),e.Nbt||void 0===s&&void 0===n||(e.wst=iH(e.wst,t))}}gCt(t,i){for(const e of this.lvt.aSt){const s=Zt(e.cSt,(t=>t.fIt===i));void 0!==s&&void 0===t.ZIt&&e.Lbt(s);const n=Zt(e.uSt,(t=>t.fIt===i));void 0!==n&&void 0===t.XIt&&e.Lbt(n)}}Qd(){this.Vo(),this.lvt.Qd(),this.nCt.forEach((t=>t.Xd())),this.nCt.clear()}constructor(t,i,e,s,n){super(),this.NS=t,this.Aot=i,this.Qyt=e,this.Ykt=!1,this.Vkt=!1,this.rCt=void 0,this.Hkt=void 0,this.nCt=pt(),this.lvt=new rq(s,n)}};function lq(t){return t.fIt._bt||t.fIt.wbt===vt.WEt}function fq(t){const i=t.fIt.Ket;return i[i.length-1].VT}function _q(t){return Qd(t,(t=>void 0!==t.cbt))}function gq(t){if(void 0!==t.fIt.zEt&&!t.fIt._bt&&!(void 0===t.fIt.SLt||i.Jd()/1e3-t.fIt.SLt>=t.fIt.zEt/2))return t.fIt.PEt?jH.eLt:jH.iLt}var wq,Aq=class{get nt(){return this.Mgt}GLt(t){if(0===t.fIt.fbt.length)return;this.wCt||(this.wCt=this.sA.yS(jo.Nm,void 0,void 0,void 0,void 0,Kc.DATE_RANGE),this.Mgt.tt(this.wCt));FH(this.wCt,t.fIt.fbt,(i=>{var e;return null!=(e=t.fIt.bbt(i))?e:NaN}))}constructor(t,i){this.ACt=t=>{this.GLt(t.bIt)},this.RTt=t,this.sA=i,this.Mgt=new We,this.RTt.yn(aq.Bkt,this.ACt)}},vq=class extends wn{constructor(){super(Xu.hIt)}},Yr=class{get vCt(){return this.TJ}get wf(){return UR(this.qst.wf,this.qst.n$)}get Ket(){return this._mt}get bgt(){return this.Dgt}mCt(t){var i;return null==(i=this.pCt(t))?void 0:i.bIt}vut(t){this.TJ=t,this.yCt()}Aut(t,i,e,s,n,r){this._mt.push({bIt:t,wot:i,MCt:Ai.IB(n,r),TCt:Ai.IB(e,s)}),this.yCt()}pCt(t){return Zt(this._mt,(i=>i.TCt.gr(t)))}Lht(t){return Zt(this._mt,(i=>i.wot===t))}Hat(t,i){return Zt(this._mt,(e=>e.bIt===t&&tq(e.wot,i)))}t$(){const t=this.wf;t.U>0&&(this.Dgt=t.jn(t.U-1))}yCt(){const t=this.qst.wf;this._mt=this._mt.filter((i=>0!==t.Sn(i.TCt).U))}constructor(t){this.qst=t,this._mt=[],this.TJ=void 0,this.Dgt=void 0}},mq=class{get Rg(){return this.X0}get NCt(){return this.X0===pg.ym||this.X0===pg.pm}get DCt(){return this.nht}get ICt(){return this.SCt}get ECt(){return void 0!==this.bCt}LCt(){if(this.ECt)throw new g("Cannot perform new operation while BufferAppender is still busy")}Qst(t){this.qst!==t&&(this.LCt(),this.qst=t,this.nht=new Yr(t))}kCt(){return this.bCt?this.bCt.Zb:Promise.resolve()}CCt(t){const i=this.nht.bgt;return void 0!==i&&this.xCt(t,i)}xCt(t,i){var e;const s=_.min(t,i);var n;return null!=(n=null==(e=this.nht.wf.nB().lB(this.ICt).dA(s))?void 0:e.gr(i))&&n}OCt(t){return this.nht.mCt(t)}Xd(){this.Tx.Xd(),this.Tx=new na}AJ(t){this.LCt(),this.bCt=new Rs;const i=i=>{this.zCt.jCt(t),this.PCt(i)};this.vJ(t,this.Tx.Hd).then(i,i)}async vJ(t,i){he.rSt(Qh,"Appending initializer",E(t.BCt.ovt)),await this.qst.AJ(t,i),he.rSt(Qh,"Appended initializer",E(t.BCt.ovt)),this.nht.vut(t)}kut(t){this.LCt(),this.bCt=new Rs;const i=i=>{this.zCt.jCt(t),this.PCt(i)};this.RCt(t,this.Tx.Hd).then(i,i)}async RCt(t,i){const e=t.bIt;if(void 0===e.fIt.$St)throw new g("MediaBufferWrapper - Cannot append HLSAsset to "+this.X0+" MediaBuffer for a HLSRendition with an undefined targetDuration.");const s=this.nht.wf.JP,n=this.qst.wf;he.rSt(Qh,"Appending",E(t.BCt.ovt)),await this.qst._J(t,i),he.rSt(Qh,"Appended",E(t.BCt.ovt),s,this.nht.wf.JP);const r=t.GT,h=r+t.ct,o=t.BCt,a=o.GT;var u;const c=o.GT+(null!=(u=o.ct)?u:0);this.nht.Aut(e,o,r,h,a,c);const d=this.qst.wf.lB(n),l=this.nht.Hat(e,o);if(this.Rg===pg.pm)if(l)if(this.UCt(l))if(0===d.U){if(void 0===this.nht.Lht(o)){const t=this.qst.n$.Sn(new Ai([r,h]));this.SCt=this.SCt.cB(t)}}else{const t=d.Cn(0),i=new Ai([t,h]);if(this.SCt=this.SCt.lB(i),t>r){const i=this.qst.n$.Sn(new Ai([r,t]));this.SCt=this.SCt.cB(i)}}else{const t=d.U>0&&d.Cn(0)<r?d.Cn(0):r;this.SCt=this.SCt.lB(new Ai([t,h]))}else if(0===d.U){const t=this.qst.n$.Sn(new Ai([r,h]));this.SCt=this.SCt.cB(t)}else{var f;const t=d.Cn(0),i=null==(f=n.dA(r))?void 0:f.jn(0),e=i&&i>r?i:r;if(t>e){const t=this.qst.n$.Sn(new Ai([e,d.Cn(0)]));this.SCt=this.SCt.cB(t)}}t.BCt.zbt&&this.nht.t$()}UCt(t){const i=t.TCt,e=i.Cn(0),s=i.jn(i.U-1),n=i.tB(0),r=i.eB(i.U-1);return this.SCt._B(e,s,n,r)}constructor(t,i,e,s,n){this.bCt=void 0,this.Tx=new na,this.SCt=Ai.SB(),this.PCt=t=>{this.bCt&&(t?vr(t)&&this.NCt?this.QCt.UW(this.qst.wf.NB)?this.bCt.Wb():this.bCt.qb(t):ut(t)?this.bCt.Wb():this.bCt.qb(t):this.bCt.Wb(),this.bCt=void 0)},this.X0=t,this.zCt=e,this.qst=i,this.nht=s,this.QCt=n}},pq=class{async FCt(t,i,e,s){const n=await this.YCt(i,s);return await this.GCt.FCt(t,n,e)}async YCt(t,i){var e;if((null==(e=this.VCt)?void 0:e.zu)!==t){he.rSt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const e=await this.NS.SI({zu:t,fS:Uv.YI,lS:Nr.GET,Hd:i,Rg:iu.JI,gS:Kt.hS,AS:this.Qyt}),s=await e.cj(),n=new j(s);this.VCt={zu:t,zm:n}}return this.VCt.zm}constructor(t,i,e){this.GCt=t,this.NS=i,this.Qyt=e,this.VCt=void 0}},yq=class{async SI(t,i,e,s,n){const r=await this.WCt(t,i,e,Uv.YI,s,n),h=await r.cj(n);return{httpStatusCode:r.kI,response:new j(h)}}async HCt(t,i,e,s,n){return(await this.WCt(t,i,e,Uv.VI,s,n)).lV(n)}async WCt(t,i,e,s,n,r){let h;t.Pmt&&(h=XW(t.Pmt.Cn,t.Pmt.U),0===h[0]&&h[1]===Oa&&(h=void 0));const o=h?{Range:"bytes="+h[0]+"-"+h[1]}:void 0,a=new Pc({zu:t.jM,fS:s,dS:o,AS:this.Qyt,lS:Nr.GET,Rg:i,gS:e,wS:this.zht,mS:s===Uv.VI,vS:n,Hd:r});try{const i=await this.Aot.Oet(t.jM,h);if(Bo(r),void 0!==i)return null==n||n(i.buffer.byteLength,i.buffer.byteLength),new Fr({SI:a,fS:a.fS,zm:i.buffer})}catch(t){Ao(t)}return await hu((()=>dt(this.NS.SI(a),a.Hd)),r,this.btt)}constructor(t,i,e,s,n=2){this.NS=t,this.Aot=i,this.zht=e,this.Qyt=s,this.btt=n}},Mq=class{qCt(){return this.XCt.fIt.jEt}async ZCt(t,e,s){if(!this.qCt())throw new g("Could not perform blocking playlist update.");try{await this.KCt(),Bo(s),await this.RTt.$kt(this.XCt,t,e,s),this.An=i.Jd()}catch(t){throw ut(t)&&this.JCt(),t}this.JCt()}$Ct(t){return this.RTt.sCt(this.XCt,t)}JCt(){if(!this.txt&&!this.ixt){const t=()=>{this.txt=void 0};this.txt=this.ext(this.sxt.Hd).then(t,t)}}async KCt(){this.txt&&(this.sxt.Xd(),this.sxt=new na,await this.txt.catch(El),this.txt=void 0)}async ext(t){for(;;){if(this.XCt.fIt._bt&&this.XCt.fIt.ILt)return;const e=i.Jd()-this.An,s=1e3*this.XCt.fIt.ELt;e<s&&await ri(s-e,t);try{await this.RTt.eCt(this.XCt,t)}catch(t){throw Ao(t),this.RTt.iCt(this.XCt),t}this.An=i.Jd()}}Qd(){this.ixt=!0,D(this.KCt())}constructor(t,i){this.txt=void 0,this.sxt=new na,this.An=-1/0,this.ixt=!1,this.RTt=t,this.XCt=i,this.JCt()}};!function(t){t[t.HEt=0]="HEt",t[t.qEt=1]="qEt",t[t.ZI=2]="ZI",t[t.KI=3]="KI"}(wq||(wq={}));var Io="AssetExtractor",Tq=class{nxt(t,i,e){let s=i;for(const i of this.rxt){if(s>=t)return!0;if(s<i.Cn)return!1;if(s<i.jn){if(e<=i.jn)return!0;s=i.jn}}return s>=t}hxt(t,i){const e=[];for(let s=0;s<this.rxt.length;s+=1){const n=this.rxt[s],r=t-n.Cn,h=n.zm.length,o=_.min(h,_.max(r,0)),a=_.max(0,i+r),u=Nh(n.zm,o,a);u.length&&(s=this.oxt(s,n,t,o,a),e.push(u))}return e}axt(t,i){this.rxt.push({Cn:t,jn:t+i.length,zm:i})}oxt(t,i,e,s,n){let r=t;this.rxt.splice(r,1),r-=1,i.Cn<e&&(r+=1,this.rxt.splice(r,0,{Cn:i.Cn,jn:e,zm:Nh(i.zm,0,s)}));const h=e+n-s;return h<i.jn&&(r+=1,this.rxt.splice(r,0,{Cn:h,jn:i.jn,zm:Nh(i.zm,n)})),r}constructor(){this.rxt=[]}},Nq=class{get uxt(){return this.cxt}async dxt(){const t=await this.uG.read();if(t.done)throw this.cxt=1/0,new g("No more data can be read from the given stream.");return this.cxt+=t.value.length,t.value}async lxt(t){await this.uG.cancel(t)}constructor(t,i){this.cxt=i,this.uG=t.getReader()}},Dq=class{fxt(){this._xt.Wb(),this._xt=new Rs}gxt(t){const{Bmt:i,Rmt:e}=Sq(this.Ybt.Pmt),s=this.wxt.hxt(i,e-i);he.rSt(Io,"Collected "+s.length+" chunks.");for(const i of s)t.enqueue(i)}async readAndSliceOutAssetBytes(t){await this.Axt.Zb;const{Bmt:i,Rmt:e}=Sq(this.Ybt.Pmt);try{for(;;){const s=this.uG.uxt,n=await this.uG.dxt(),r=n.length;he.rSt(Io,"Read "+r+" at "+s+" for extraction of "+E(this.Ybt));const h=_.min(s+r,i)-s;if(!(h>0)){if(s+r<=e)return he.rSt(Io,"Extracting the read data range for extraction of "+E(this.Ybt)),t.enqueue(n),this.fxt(),D(this.readAndSliceOutAssetBytes(t));{const i=e-s,h=Nh(n,0,i),o=Nh(n,i);return h.length>0&&(he.rSt(Io,"Extracting "+h.length+" bytes for extraction of "+E(this.Ybt)),t.enqueue(h)),he.rSt(Io,"Of the read "+r+" bytes, the last "+o.length+" will be stored locally for extraction of "+E(this.Ybt)),this.wxt.axt(s+i,o),he.rSt(Io,"Extraction of "+E(this.Ybt)+" completed as the entire request has been fulfilled."),this.vxt(t),void(this.mxt&&(he.rSt(Io,"Aborting stream upstream as no more bytes are needed from "+E(this.Ybt)+"."),await this.uG.lxt("AssetExtraction - AbortOnEnd")))}}{const i=Nh(n,0,h),e=Nh(n,h);if(he.rSt(Io,"Of the read "+r+" bytes, the first "+h+" will be stored locally for extraction of "+E(this.Ybt)),this.wxt.axt(s,i),e.length>0)return he.rSt(Io,"Extracting "+e.length+" bytes for extraction of "+E(this.Ybt)),t.enqueue(e),this.fxt(),D(this.readAndSliceOutAssetBytes(t))}}}catch(i){he.rSt(Io,"Extraction of "+E(this.Ybt)+" completed as the entire source stream has been read."),this.vxt(t)}}vxt(t){t.close(),this.fxt(),this.pxt.Wb()}start(t){he.rSt(Io,"Preparing to push all collected data to controller for extraction of "+E(this.Ybt)),this.gxt(t),he.rSt(Io,"Collected data pushed to controller for extraction of "+E(this.Ybt));const{Rmt:i}=Sq(this.Ybt.Pmt);this.uG.uxt>=i?(he.rSt(Io,"Extraction of "+E(this.Ybt)+" completed as the entire request has been fulfilled."),this.vxt(t)):(he.rSt(Io,"Continuing read from original stream for extraction of "+E(this.Ybt)),D(this.readAndSliceOutAssetBytes(t)))}get yxt(){return this.pxt.Zb}pull(){return this.Axt.Wb(),this.Axt=new Rs,this._xt.Zb}constructor(t,i,e,s){this.pxt=new Rs,this.Ybt=t,this.uG=i,this.wxt=e,this.mxt=s,this.Axt=new Rs,this._xt=new Rs}},Iq=class{bT(t){if(!JW(this.Ybt,t))return!1;const{Bmt:i,Rmt:e}=Sq(t.Pmt);return this.wxt.nxt(this.Mxt.uxt,i,e)}async U_t(t,i){void 0===i&&(i=!1);const e=this.Mxt,s=this.wxt;if(he.qp(Io,"Extracting data from "+E(t)+" out of "+E(this.Ybt)),this.Txt&&(he.rSt(Io,"Awaiting previous extraction before extracting "+E(t)+" out of "+E(this.Ybt)),await this.Txt),!this.bT(t))throw new g("The extractor does not contain the data requested");const n=new Dq(t,e,s,i);return this.Txt=n.yxt,new Ft(n)}constructor(t,i){this.Ybt=i;const{Bmt:e}=Sq(this.Ybt.Pmt);this.Mxt=new Nq(t,e),this.wxt=new Tq}};function Sq(t){if(t){const i=t.Cn;return{Bmt:i,Rmt:void 0!==t.U?i+t.U:Oa}}return{Bmt:0,Rmt:Oa}}var Eq=class{async $n(){const t=await this.Nxt.HCt(this.Ybt,iu.KI,Kt.rT,void 0,this.Tx.Hd);return new Iq(t,this.Ybt)}bT(t){return JW(this.Ybt,t)}async U_t(t,i){void 0===i&&(i=!1);const e=await this.Wgt;return await dt(e.U_t(t,i),this.Tx.Hd)}Xd(){this.Wgt.catch(El),this.Tx.Xd()}constructor(t,i){this.Ybt=t,this.Nxt=i,this.Tx=new na,this.Wgt=this.$n()}},bq=class extends wn{constructor(t){super(Er.Dxt),this.wS=t}},Lq=class extends wn{constructor(t,i,e,s,n,r,h){super(Er.Ixt),this.uri=t,this.Sxt=i,this.wS=e,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.Ext=r,this.httpStatusCode=h}};function kq(t,i,e){const s=Ir(e)?e:e.Bbt;if(i.ikt(s.lbt)){if(void 0!==e.n9)return i.ckt(e.n9,e).vN();if(e!==s&&void 0!==s.n9){const t=i.ckt(s.n9,s).vN();return e.GT+(t-s.GT)}}const n=t.fIt.Lht(s.GEt-1);if(void 0!==n&&i.ikt(n.lbt)){if(n.obt.length>0){const t=n.Xbt(n.obt.length-1);if(void 0!==t.n9){const s=i.ckt(t.n9,t).vN();return e.GT+(s-t.GT)}}if(void 0!==n.n9){const t=i.ckt(n.n9,n).vN();return e.GT+(t-n.GT)}}const r=t.fIt.Lht(s.GEt+1);if(void 0!==r&&i.ikt(r.lbt)){if(r.obt.length>0){const t=r.Xbt(0);if(void 0!==t.n9){const s=i.ckt(t.n9,t).vN();return e.GT+(s-t.GT)}}if(void 0!==r.n9){const t=i.ckt(r.n9,r).vN();return e.GT+(t-r.GT)}}return e.GT}function Cq(t){return void 0!==t.n9}function xq(t,i,e,s){for(let n=i;n<t.length;n++){const i=t[n];if(i.lbt!==e)break;if(Cq(i)){if(s(i,n))break}}}function Oq(t,i,e,s){for(let n=i;n>=0;n--){const i=t[n];if(i.lbt!==e)break;if(Cq(i)){if(s(i,n))break}}}var Er,jq="HlsPlaylistDownloader";!function(t){t.Dxt="segmentdownloadprogress",t.Ixt="segmentdownloaded"}(Er||(Er={}));var zq=class extends Pl{bxt(t){this.Lxt.Qd(),this.Lxt=new Mq(this.RTt,t),this.ECt?this.kxt=t:(this.XCt=t,this.Cxt=0,this.xxt=void 0,this.Oxt=void 0)}get ECt(){return void 0!==this.jxt}kCt(){return this.jxt?this.jxt.Zb:Promise.resolve()}zxt(){return this.zCt.zxt()}Pxt(t){this.zCt.Pxt(t)}Xd(){var t,i,e;this.Bxt.Xd(),this.Bxt=new na,null==(t=this.Rxt)||t.Xd(),this.Rxt=void 0,null==(i=this.Uxt)||i.Xd(),null==(e=this.Qxt)||e.Xd(),this.Uxt=void 0,this.Qxt=void 0,this.Cxt=0,this.xxt=void 0,this.Oxt=void 0}Qd(){this.Lxt.Qd()}get bIt(){var t;return null!=(t=this.kxt)?t:this.XCt}get Fxt(){if(!this.XCt.fIt._bt||void 0===this.xxt)return!1;const t=this.XCt.fIt.Lht(this.xxt);if(!t.zbt)return!1;if(void 0!==this.Oxt){if(!t.Xbt(this.Oxt).zbt)return!1}return!0}Yxt(t){const i=this.XCt.fIt.BLt(t);if(!i)return!1;if(void 0!==this.xxt){const e=i.GEt===this.xxt;return void 0!==this.Oxt?i.Zbt(t)===i.Xbt(this.Oxt)&&e:e}return!1}Gxt(t){let i;if(void 0===this.xxt||t<this.Cxt-1e-6)i=this.Vxt(t);else if(i=this.Wxt(this.xxt,this.Oxt),void 0!==i){const[e,s]=i,n=kq(this.XCt,this.RTt.Tr.tT,null!=s?s:e),r=3*this.XCt.fIt.$St;_.abs(n-t)>=r&&(i=this.Vxt(t))}else if(this.XCt.fIt._bt){if(this.XCt.fIt.Lht(this.xxt).zbt&&(i=this.Vxt(t),void 0!==i&&i[0].GEt===this.xxt))return}if(i){this.Cxt=t;const[e,s]=i;return 0===(null==s?void 0:s.Ubt)&&void 0!==e.ct?[e,void 0]:[e,s]}}Vxt(t){let i,e;const s=this.XCt.fIt.Ket;if(0===s.length)return;const n=this.RTt.Tr.tT,r=Ri.mD(t),h=function(t,i,e){const s=t.fIt.Ket;if(0===s.length)return;const n=t.fIt.RLt(e.vN());if(!i.ikt(n.lbt))return;const r=n.GEt-s[0].GEt,h=n.lbt;let o,a,u,c=0;if(Oq(s,r,h,((t,i)=>(o=t,c=i,!0))),void 0===o&&(xq(s,r+1,h,((t,i)=>(o=t,c=i,!0))),void 0===o))return;return i.ckt(o.n9,o).TN(e)?(a=o,xq(s,c+1,h,(t=>i.ckt(t.n9,t).mN(e)?(u=t,!0):(a=t,!1)))):(u=o,Oq(s,c-1,h,(t=>i.ckt(t.n9,t).TN(e)?(a=t,!0):(u=t,!1)))),void 0!==a&&void 0!==u?[a,u]:void 0}(this.XCt,n,r);let o;if(void 0!==h){const[t,i]=h,e=n.ckt(t.n9,t),s=n.ckt(i.n9,i),a=r.bN(e).vN()/s.bN(e).vN()*(i.GT-t.GT);o=t.GT+a}else o=t;const a=s[s.length-1];return a.VT<=o?(i=a,e=a.Jbt(o)):s[0].GT>o?(i=s[0],e=i.Xbt(0)):(i=this.XCt.fIt.BLt(o),e=null==i?void 0:i.Jbt(o)),i?[i,e]:void 0}Wxt(t,i){let e,s;if(e=this.XCt.fIt.Lht(t),e&&void 0!==i){if(0===e.obt.length)return[e,void 0];s=e.Xbt(i+1)}return void 0!==e&&void 0!==s||(e=this.XCt.fIt.Lht(t+1),s=null==e?void 0:e.Xbt(0)),e?[e,s]:void 0}LCt(){if(this.ECt)throw new g("Cannot perform new operation while PlaylistDownloader is still busy")}Hxt(t){this.LCt(),this.jxt=new Rs,this.qxt(t,this.Bxt.Hd).then(this.Xxt,this.Xxt)}Zxt(){this.Lxt.JCt()}async qxt(t,i){if(this.XCt.fIt._bt)return;let e=this.Gxt(t);for(!e&&this.Lxt.qCt()&&void 0!==this.xxt&&(await this.Lxt.ZCt(void 0===this.Oxt?this.xxt+1:this.xxt,void 0!==this.Oxt?this.Oxt+1:void 0,i),e=this.Gxt(t)),!e&&this.Lxt.qCt()&&void 0!==this.xxt&&(await this.Lxt.ZCt(this.xxt+1,0,i),e=this.Gxt(t));!e;){he.qp(jq,"No next segment / part available, need to update playlist before continuing."),await this.Lxt.$Ct(i);const s=this.bIt.fIt.Ket;s[0].GT>t&&(this.Oxt=void 0,this.xxt=void 0);s[s.length-1].GEt<this.xxt&&(this.Oxt=void 0,this.xxt=void 0),e=this.Gxt(t)}}Kxt(){return this.zCt.Jxt()}$xt(){this.LCt();try{const t=this.XCt.fIt.ULt(Jt.HEt);t&&this.tOt(t);const i=this.XCt.fIt.ULt(Jt.qEt);i&&this.iOt(i)}catch(t){throw Ao(t),this.XCt.fIt.xLt=i.Jd(),this.RTt.iCt(this.XCt),t}}tOt(t){this.Qxt&&!this.Qxt.bT(t.ovt)&&(this.Qxt.Xd(),this.Qxt=void 0),this.Qxt||(this.Qxt=new Eq(t.ovt,this.Nxt))}iOt(t){this.Uxt&&!this.Uxt.bT(t.ovt)&&(this.Uxt.Xd(),this.Uxt=void 0),this.Uxt||(this.Uxt=new Eq(t.ovt,this.Nxt))}bht(t,e,s){this.LCt(),he.qp(jq,"Starting download of segment "+E(t.ovt)+" and part "+(null==e?void 0:e.Ubt)),this.jxt=new Rs,this.eOt(t,e,s,this.Bxt.Hd).catch((t=>{throw Ao(t),this.XCt.fIt.xLt=i.Jd(),this.RTt.iCt(this.XCt),t})).then(this.Xxt,this.Xxt)}async eOt(t,i,e,s){let n;if(t.ubt){var r,h;if(!e||!$W(e.BCt.ovt,null==(r=t.ubt)?void 0:r.ovt)||t.lbt!==e.lbt){var o;null==(o=this.Rxt)||o.Xd(),this.Rxt=new Rs;const i=this.sOt(t.ubt,t,s).then((()=>{this.Rxt=void 0}));this.Rxt.Zd(i)}n=null==(h=this.Rxt)?void 0:h.Zb}await this.nOt(t,i,n,s)}async sOt(t,i,e){const s=await this.rOt(t,i,e),n=s.ubt.zm.zm.byteLength;this.zCt.hOt(s),this.Co(new Lq(s.ubt.BCt.ovt,s.Rg,this.X0,i.GEt,s.bIt.Mg,n,s.ubt.Rot)),he.rSt(Qh,"Download initializer complete",E(t.ovt))}async nOt(t,i,e,s){const n=await this.oOt(t,i,s),r=n.wot.zm.zm.byteLength;var h;e&&await dt(e,s),this.zCt.hOt(n),this.Co(new Lq(n.wot.BCt.ovt,n.Rg,this.X0,t.GEt,n.bIt.Mg,r,n.wot.Rot)),he.rSt(Qh,"Download complete",E(null!=(h=null==i?void 0:i.ovt)?h:t.ovt))}async oOt(t,i,e){let s;if(i){if(this.Uxt)if(this.Uxt.bT(i.ovt)){const t=await this.Uxt.U_t(i.ovt),n=await oi(t,e),r=new j(n);s=Bq(i,await this.FCt(r,i.nbt,e),200)}else this.Uxt.Xd(),this.Uxt=void 0;s||(he.rSt(Qh,"Start download",E(i.ovt)),s=await this.aOt(i,e))}else he.rSt(Qh,"Start download",E(t.ovt)),s=await this.Cht(t,e);return this.xxt=t.GEt,this.Oxt=null==i?void 0:i.Ubt,{Rg:"wot",wot:s,bIt:this.XCt,lbt:t.lbt}}async rOt(t,i,e){let s;if(this.Qxt){var n;if(this.Qxt.bT(t.ovt)){const n=await dt(this.Qxt.U_t(t.ovt),e),r=await oi(n,e),h=new j(r);s=Pq(t,i,await this.FCt(h,t.hbt?[t.hbt]:[],e),200)}he.qp(jq,"MAP is required for segment, downloading MAP data."),null==(n=this.Qxt)||n.Xd(),this.Qxt=void 0}return s||(he.rSt(Qh,"Start download",E(t.ovt)),s=await this.uOt(t,i,e)),{Rg:"ubt",ubt:s,bIt:this.XCt,GT:i.GT,lbt:i.lbt,nbt:i.nbt}}async uOt(t,i,e){const{response:s,httpStatusCode:n}=await this.Nxt.SI(t.ovt,iu.ZI,Kt.$I,void 0,e),r=t.hbt?[t.hbt]:[];return Pq(t,i,await this.FCt(s,r,e),n)}async Cht(t,i){if(!t.ovt)throw new g("Internal error: attempted to download an incomplete segment");let e,s;try{this.cOt(t);const n=await this.Nxt.SI(t.ovt,iu.ZI,Kt.rT,this.dOt,i);e=n.response,s=n.httpStatusCode}finally{this.lOt()}return function(t,i,e){return{zm:{zm:i,Rg:ji.aq},Rg:wq.ZI,Rot:e,BCt:t,lbt:t.lbt}}(t,await this.FCt(e,t.nbt,i),s)}async aOt(t,i){let e,s;try{this.cOt(t);const n=await this.Nxt.SI(t.ovt,iu.ZI,Kt.rT,this.dOt,i);e=n.response,s=n.httpStatusCode}finally{this.lOt()}return Bq(t,await this.FCt(e,t.nbt,i),s)}async FCt(t,i,e){const s=Zt(i,(t=>t.lS===Yo.LEt));return s?s.ovt&&s.kEt?await this.fOt.FCt(t,s.ovt,s.kEt,e):(he.lt(jq,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}cOt(t){var e,s,n;this._Ot=t,this.gOt=0,this.wOt=i.Jd(),this.AOt=0,this.vOt=null!=(n=null==(s=t.ovt)||null==(e=s.Pmt)?void 0:e.U)?n:0}lOt(){this._Ot=void 0,this.gOt=0,this.wOt=0,this.AOt=0,this.vOt=0}mOt(){if(void 0!==this._Ot)return{wot:this._Ot,pOt:this.AOt,yOt:this.vOt,MOt:i.Jd()-this.wOt}}TOt(t){return void 0!==this._Ot&&(0!==this.gOt&&(!(this.vOt>0&&this.AOt>=this.vOt)&&!(t-this.gOt<500)))}constructor(t,e,s,n,r,h,o,a){super(),this.kxt=void 0,this.jxt=void 0,this._Ot=void 0,this.gOt=0,this.wOt=0,this.AOt=0,this.vOt=0,this.Bxt=new na,this.Rxt=void 0,this.Cxt=0,this.xxt=void 0,this.Oxt=void 0,this.Qxt=void 0,this.Uxt=void 0,this.Xxt=t=>{this.kxt&&(this.XCt=this.kxt,this.kxt=void 0,this.Cxt=0,this.xxt=void 0,this.Oxt=void 0),this.jxt&&(t&&!ut(t)?this.jxt.qb(t):this.jxt.Wb(),this.jxt=void 0)},this.dOt=(t,e)=>{this.AOt=t,t>0&&0===this.gOt&&(this.gOt=i.Jd()),void 0!==e&&(this.vOt=e),this.Co(new bq(this.X0))},this.X0=t,this.RTt=s,this.zCt=n,this.XCt=e,this.Lxt=new Mq(s,e),this.fOt=new pq(o,r,a),this.Nxt=new yq(r,h,function(t){switch(t){case Cn.pm:return Xn.pm;case Cn.ym:return Xn.ym;case Cn.Mm:case Cn.pEt:return Xn.Ru;default:return Xn.rT}}(e.Rg),a)}};function Pq(t,i,e,s){return{zm:{zm:e,Rg:ji.aq},Rg:wq.HEt,Rot:s,BCt:t,lbt:i.lbt}}function Bq(t,i,e){return{zm:{zm:i,Rg:ji.aq},Rot:e,Rg:wq.qEt,BCt:t,lbt:t.Bbt.lbt}}var Ea,Rq=class{get vCt(){return this.NOt}get DOt(){const t=[];for(const e of this.IOt)if("wot"===e.Rg){const s=e.wot.BCt,n=kq(e.bIt,this.Ikt,s);var i;t.push({wot:s,bIt:e.bIt,GT:n,VT:n+(null!=(i=s.ct)?i:0)})}return t}get SOt(){const t=[];return this.EOt.forEach((i=>{for(const e of i.bOt)"wot"===e.Rg&&t.push({wot:e.BCt,bIt:e.bIt,GT:e.GT,VT:e.GT+e.ct})})),t}hOt(t){"ubt"===t.Rg&&(this.NOt=t.ubt),this.IOt.push(t),this.LOt&&(this.LOt.Wb(),this.LOt=void 0)}zxt(){return this.IOt[0]}Pxt(t){To(this.IOt,t)}Jxt(){return null!=this.LOt||(this.LOt=new Rs),this.LOt.Zb}kOt(t){this.COt(t.aht).kOt(t)}xOt(t){return this.COt(t).xOt()}jCt(t){this.COt(t.aht).jCt(t)}OOt(t){var i;null==(i=this.EOt.get(t))||i.Qd()}jOt(t){return this.COt(t).jOt()}COt(t){if(this.EOt.has(t))return this.EOt.get(t);{const i=new Uq;return this.EOt.set(t,i),i}}Vb(){this.zOt(),this.POt()}zOt(){this.NOt=void 0,No(this.IOt)}POt(){this.EOt.forEach((t=>t.Vb()))}Qd(){this.EOt.forEach((t=>t.Qd())),this.EOt.clear(),this.Vb(),this.LOt&&(this.LOt.Xd(),this.LOt=void 0)}constructor(t){this.IOt=[],this.EOt=cs(),this.LOt=void 0,this.NOt=void 0,this.Ikt=t}},Uq=class{get bOt(){return this.BOt}kOt(t){this.BOt.push(t),this.ROt&&(this.ROt.Wb(),this.ROt=void 0)}xOt(){return this.BOt[0]}jCt(t){To(this.BOt,t)}jOt(){return null!=this.ROt||(this.ROt=new Rs),this.ROt.Zb}Vb(){No(this.BOt)}Qd(){this.Vb(),this.ROt&&(this.ROt.Xd(),this.ROt=void 0)}constructor(){this.BOt=[],this.ROt=void 0}},Qq=1e-6,Fq=class{get wf(){return this.KNt}get n$(){return this.JNt}async AJ(t,i){const e=t.zm.zm;if(this.UOt(e),this.QOt.Rg===Kc.TTML){this.Ikt.ikt(t.lbt)||await dt(this.Ikt.skt(t.lbt),i);const s=this.FOt(e,t.lbt);for(const t of s)this.QOt.SS(t)}}async _J(t,i){if(void 0===t.zm)return;const e=t.GT,s=e+t.ct;this.KNt=this.KNt.cB(Ai.IB(e,s)).uB(Qq),this.o$(t.YOt,t.GOt),this.a$(e,s),this.Ikt.ikt(t.lbt)||await dt(this.Ikt.skt(t.lbt),i),this.wJ(t.zm.zm,t.lbt,t.BCt)}wJ(t,i,e){let s;this.UOt(t),s=this.QOt.Rg===Kc.WEBVTT?this.VOt(t,e):this.FOt(t,i);for(const t of s)this.QOt.SS(t)}VOt(t,i){const e=vA(t),s=e.L;var n;const r=null!=(n=e.YD)?n:{GD:Ri.zN,lh:Ri.zN};for(const t of s){const e=Ri.mD(t.GT).bN(r.lh).ST(r.GD),s=this.Ikt.ckt(e,i).vN(),n=s+(t.VT-t.GT);t.uN(s,n)}return s}FOt(t,i){const e=this.Ikt.ukt(i).vN();return uv(t,this.QOt,{BD:0,RD:1/0,UD:e},Kn.APPLICATION_MP4)}UOt(t){this.QOt.Rg===Kc.DEFAULT&&(this.QOt.Rg=this.WOt(t)?Kc.WEBVTT:Kc.TTML)}WOt(t){return bA(pl(qe(ha(t),0,_.min(t.byteLength,16)),new L))}o$(t,i){this.JNt=this.JNt.cB(Ai.IB(t,i)).uB(Qq)}a$(t,i){this.JNt=this.JNt.lB(Ai.IB(t,i))}constructor(t,i){this.KNt=Ai.SB(),this.JNt=Ai.SB(),this.QOt=t,this.Ikt=i}},Yq=class extends wn{constructor(t,i){super(Ea.HOt),this.bIt=t,this.wst=i}},Gq=class extends wn{constructor(t){super(Ea.qOt),this.bIt=t}},Vq=class extends wn{constructor(t,i){super(Ea.XOt),this.bIt=t,this.xct=i}},Wq=class extends wn{constructor(t,i){super(Ea.ZOt),this.bIt=t,this.KOt=i}};!function(t){t.HOt="JOt",t.XOt="$Ot",t.ZOt="tjt",t.qOt="ijt"}(Ea||(Ea={}));var Hq=class extends Pl{get ejt(){return this.sjt}njt(t){for(const i of this.sjt)qt(t,i)||this.zCt.OOt(i);this.sjt=t}get ECt(){return void 0!==this.rjt}kCt(){var t,i;return null!=(i=null==(t=this.rjt)?void 0:t.Zb)?i:Promise.resolve()}LCt(){if(this.ECt)throw new g("Cannot perform new operation while transmuxer is still busy")}hjt(t,i){}ojt(t){this.LCt(),this.rjt=new Rs;const i=i=>{this.ajt(t,i)};this.ujt(t,this.Tx.Hd).then(i,i)}cjt(t){this.LCt(),this.rjt=new Rs;const i=i=>{this.ajt(t,i)};this.djt(t,this.Tx.Hd).then(i,i)}ajt(t,i){this.rjt&&(!i||ut(i)||function(t){return t instanceof iq}(i)?(ut(i)||this.zCt.Pxt(t),this.rjt.Wb(),this.rjt=void 0):this.rjt.qb(i))}ljt(t,i){this.Co(new Yq(t,i))}fjt(t,i){this.Co(new Vq(t,i))}_jt(t,i,e){$H(i)&&this.Co(new Wq(t,e))}gjt(t){this.Co(new Gq(t))}kOt(t){qt(this.sjt,t.aht)&&this.zCt.kOt(t)}wjt(t){return this.zCt.xOt(t)}jCt(t){this.zCt.jCt(t)}Ajt(t){return this.zCt.jOt(t)}Xd(){this.Tx.Xd(),this.Tx=new na}constructor(t,i,e){super(),this.rjt=void 0,this.Tx=new na,this.zCt=t,this.Ikt=i,this.sjt=e}};function qq(t,i){return $H(t)?0:_.min(t.GT,i)}function Xq(t,i){var e;return _.max(t.GT,i)+(null!=(e=t.ct)?e:0)}var Zq=class extends Hq{ujt(t,i){Bo(i);const e={Rg:"vjt",zm:t.ubt.zm,aht:this.ejt[0],lbt:t.lbt,mjt:{wst:"",nbt:t.nbt},GT:t.GT,bIt:t.bIt,BCt:t.ubt.BCt};return this.kOt(e),Promise.resolve()}async djt(t,i){Bo(i);const e=t.wot.BCt;let s;void 0!==e.n9?(this.Ikt.ikt(t.lbt)||await dt(this.Ikt.skt(t.lbt),i),s=this.Ikt.ckt(e.n9,e).vN()):s=e.GT;const n=qq(e,s),r=Xq(e,n);var h;const o={Rg:"wot",zm:t.wot.zm,aht:this.ejt[0],YOt:n,GOt:r,GT:s,ct:null!=(h=e.ct)?h:0,UD:0,lbt:t.lbt,bIt:t.bIt,BCt:t.wot.BCt};this.kOt(o)}constructor(t,i,e){super(t,i,[e])}};function Kq(t,i){let e=Ai.SB();for(const s of t){let n=s.GT;if(s.bIt.fIt._bt&&$H(s.wot))n=0;else{const e=t=>s.bIt===t.bIt&&tq(t.wot,s.wot),r=Zt(t,e);if(void 0!==r)n=_.min(n,r.VT);else{const t=Zt(i,e);void 0!==t&&(n=_.min(n,t.TCt.jn(0)))}}e=e.cB(Ai.IB(n,s.VT))}return e}var Jq=.001,$q=class{get pjt(){return this.yjt}get bIt(){return this.Mjt.bIt}bxt(t){this.Mjt.bxt(t)}get ECt(){return this.Mjt.ECt||this.Tjt.ECt||this.yjt.some((t=>t.ECt))}Njt(t){const i=t.slice();for(let t=this.yjt.length-1;t>=0;t--){const e=this.yjt[t];if(!e.NCt)throw new g("Invalid state");const s=Ka(i,(t=>t.Rg===e.Rg));s>=0?(e.Qst(i[s]),M(i,s)):M(this.yjt,t)}for(const t of i){const i=new Yr(t);this.yjt.push(new mq(t.Rg,t,this.Djt,i,this))}i.length>0&&this.Djt.Vb();const e=t.map((t=>t.Rg));this.Tjt.njt(e)}UW(t){var i;const e=(null==(i=this.PB)?void 0:i.UW(t))||!1;return e&&(this.Xd(),this.Djt.Vb()),e}Ijt(t){for(const t of this.yjt)if(t.Rg!==pg.Ru||t.ECt)throw new g("Invalid state");const i=new Yr(t),e=new mq(pg.Ru,t,this.Djt,i,this);this.yjt=[e]}get vCt(){const t=this.Djt.vCt;if(t)return t;if(this.yjt.length>0){const t=this.yjt[0].DCt.vCt;if(t&&this.yjt.every((i=>i.DCt.vCt===t)))return t}}Sht(){for(const t of this.yjt)t.DCt.yCt()}get Sjt(){if(0===this.yjt.length)return Ai.SB();const t=Kq(this.Djt.DOt.concat(this.Djt.SOt),ge(this.yjt,(t=>t.DCt.Ket))).nB();let i=new Ai([0,1/0]);for(const t of this.yjt)i=i.Sn(t.DCt.wf);for(const t of this.yjt)i=i.lB(t.ICt);return i=i.cB(t),i.uB(Jq)}get Ejt(){if(0===this.yjt.length)return Ai.SB();const t=Kq(this.Djt.SOt,ge(this.yjt,(t=>t.DCt.Ket))).nB();let i=new Ai([0,1/0]);for(const t of this.yjt)i=i.Sn(t.DCt.wf);return i=i.cB(t),i}Sut(t){const i=this.Sjt.dA(t,Jq);return i?i.jn(i.U-1):t}Yxt(t){return!!this.Sjt.dA(t,Jq)||this.Mjt.Yxt(t)}bjt(t){return this.Ejt.gr(t,Jq)}Ljt(t,i,e){for(const t of this.yjt){const e=t.DCt,s=e.bgt;if(void 0!==s&&i>=s&&!e.wf.nB().gr(s))return!0}return i-t<e}Xd(){this.kjt(),this.Cjt()}kjt(){this.Mjt.Xd()}Cjt(){this.Tjt.Xd(),this.pjt.forEach((t=>t.Xd()))}Qd(){this.Xd(),this.Mjt.Qd()}constructor(t,i,e,s){this.Mjt=t,this.Djt=i,this.Tjt=e,this.PB=s,this.yjt=[]}};var tX=class extends wn{constructor(){super(Xu.uIt)}},iX=class extends wn{constructor(){super(Xu.oIt)}},eX="LazyMediaBuffer",sX=class extends Pl{get qz(){return this.sx}get e$(){return this.X0}get wd(){if(!this.qst)throw new $i(Ui.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.qst.wd}get NW(){return this.OW}set NW(t){this.OW=t,this.qst&&(this.qst.NW=t)}Cq(){return this.qst?this.qst.Cq():this.xjt}get wf(){return this.qst?this.qst.wf:Ai.SB()}get n$(){return this.qst?this.qst.n$:this.r$.Rq}get EW(){return this.PW}set EW(t){this.PW=t,this.qst&&(this.qst.EW=t)}o$(t,i){he.rSt(eX,"Marking gap from "+t+" to "+i+"."),this.r$.Qq(t,i),this.qst&&this.qst.o$(t,i)}a$(t,i){he.rSt(eX,"Removing gap from "+t+" to "+i+"."),this.r$.Fq(t,i),this.qst&&this.qst.a$(t,i)}Ojt(t){this.qst=t,this.qst.EW=this.PW,this.qst.NW=this.OW;const i=this.r$.Rq;for(let t=0;t<i.U;t++)this.qst.o$(i.Cn(t),i.jn(t));var e;this.xjt&&(he.rSt(eX,"End of stream"),null==(e=this.qst)||e.t$());this.qst.yn(_e.hq,this.Ds),this.jjt.Wb(t)}zjt(t){return dt(this.jjt.Zb,t)}async _J(t,i,e){const s=await this.zjt(e);await s._J(t,i,e)}async u$(){const t=await this.zjt();await t.u$()}async AJ(t,i,e){const s=await this.zjt(e);await s.AJ(t,i,e)}async ET(t,i,e){const s=await this.zjt(e);await s.ET(t,i,e)}async kJ(t,i){const e=await this.zjt();await e.kJ(t,i)}t$(){this.xjt=!0,this.qst&&this.qst.t$()}gq(t){return!!this.qst&&this.qst.gq(t)}async Aq(t){const i=await this.zjt();await i.Aq(t)}async gn(){var t;this.Vo(),null==(t=this.qst)||t.fn(_e.hq,this.Ds)}constructor(t,i){super(),this.X0=t,this.Pjt=i,this.sx=void 0,this.qst=void 0,this.jjt=new Rs,this.OW=20,this.xjt=!1,this.PW=30,this.r$=new br}},nX="LazyMediaSource",rX=class{get wd(){return{Rg:wi.Hx,r0:[],Xz:[]}}get rt(){throw new g("Not implemented")}get V$(){return this.Bjt}get W$(){return this.Rjt}get wf(){return this.Fz?this.Fz.wf:Ai.SB()}get ct(){return this.Fz?this.Fz.ct:this.VL}get Cq(){return!!this.Fz&&this.Fz.Cq}get t_(){return this.Fz?this.Fz.t_:new Ai([0,1/0])}t0(t){this.VL=t,this.Fz&&this.Fz.t0(t)}t$(){this.i9=!0,this.Fz&&this.Fz.t$()}GJ(){this.i9=!1,this.Fz&&this.Fz.GJ()}n0(t,i,e,s){this.Ujt=t,this.Qjt=i,this.Fjt=Boolean(e),this.Yjt=Boolean(s),this.Fz&&this.Fz.n0(t,i,e,s)}gq(t){return!this.Fz||this.Fz.gq(t)}async Aq(t){if(!this.gq(t))throw new g("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.Fz)await this.Fz.Aq(t);else{var i,e;this.sA.i5();const s=await this.sA.$n(t);S(this.VL)||s.t0(this.VL),this.i9&&s.t$(),s.n0(this.Ujt,this.Qjt,this.Fjt,this.Yjt),he.rSt(nX,"The MediaSource has been loaded."),this.Gjt=!0,this.Fz=s,null==(i=this.Bjt)||i.Ojt(this.Fz.V$),null==(e=this.Rjt)||e.Ojt(this.Fz.W$),this.Vjt.Wb(s),this.sA.e5()}}async Qd(){this.Fz&&await this.Fz.Qd()}constructor(t,i,e){this.sA=t,this.Bjt=void 0,this.Rjt=void 0,this.Vjt=new Rs,this.Fz=void 0,this.Gjt=!1,this.VL=NaN,this.i9=!1,this.Ujt=0,this.Qjt=1/0,this.Fjt=!1,this.Yjt=!1,i&&(he.rSt(nX,"Created lazy media buffer for audio."),this.Bjt=new sX(pg.ym,this)),e&&(he.rSt(nX,"Created lazy media buffer for video."),this.Rjt=new sX(pg.pm,this))}};function hX(t,i){return void 0===i&&(i=!1),function(e,s){void 0===s&&(s="*");let n=aX(e,"tag");const r=aX(null==s?"*":s,"range"),h=[];let o,a,u,c=-1;for(;++c<r.length;)if(o=r[c].toLowerCase(),i||"*"!==o){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),o)){if(!i)return n[a];h.push(n[a])}else u.push(n[a]);n=u}return i?h:void 0}}hX(((t,i)=>"*"===i||t===i||Ni(t,i+"-")),!0),hX(((t,i)=>{const e=t.split("-"),s=i.split("-");let n=0,r=0;if("*"!==s[r]&&e[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!e[n])return!1;if(e[n]!==s[r]){if(1===e[n].length)return!1;n++}else n++,r++}else r++;return!0}),!0);var oX=hX(((t,i)=>{let e,s=i;for(;;){if("*"===s||t===s)return!0;if(e=s.lastIndexOf("-"),e<0)return!1;"-"===s.charAt(e-2)&&(e-=2),s=s.slice(0,e)}}));function aX(t,i){const e=t&&"string"==typeof t?[t]:t;if(!e||"object"!=typeof e||!("length"in e))throw new g("Invalid "+i+" `"+e+"`, expected non-empty string");return e}var ec,uX=16384,cX=71,dX=188,lX=2,fX=3;function _X(t){return gX(t)?1:function(t){return function(t){if(t.length<lX*dX)return-1;const i=t.length<fX*dX?lX:fX,e=_.min(1e3,t.length-i*dX);for(let s=0;s<=e;s++){let e=!0;for(let n=0;n<i;n++)if(t[s+n*dX]!==cX){e=!1;break}if(e)return s}return-1}(t)>=0}(t)?2:function(t){return null!==ax(ha(t),new L)}(t)?3:0}function gX(t){const i=Xc(t,0,_.min(t.length,uX));return no.gp(ha(i))}!function(t){t[t.rT=0]="rT",t[t.OA=1]="OA",t[t.Wjt=2]="Wjt",t[t.Hjt=3]="Hjt"}(ec||(ec={}));var uh=class{get Rg(){return this.X0}get wf(){return this.qst.wf}get n$(){return this.qst.n$}qjt(t){return this.qst===t}async AJ(t,i){if(this.qst.wd.qz!==t.mjt.wst){const e={qz:t.mjt.wst};this.qst.gq(e)&&(await this.qst.Aq(e),Bo(i))}await this.qst.AJ(t.zm,{GK:t.bIt.Mg},i),void 0!==this.Xjt&&this.X0===pg.pm&&gX(t.zm.zm)&&this.Xjt.hnt(t.zm.zm)}async _J(t,i){Bo(i),he.qp("HlsMediaBuffer","Got media data, appending to "+this.X0+" MediaBuffer: "+E(t.BCt.ovt));const e=t.YOt,s=t.GOt,n={n9:t.GT,ct:t.ct,UD:t.UD,GK:t.bIt.Mg};void 0!==t.zm&&(await this.qst._J(t.zm,n,i),this.Zjt(t.zm,t)),this.Kjt(e,s)}Zjt(t,i){var e;if(!gX(t.zm))return;const s=i.GT,n=s+i.ct,r=i.UD;if(null==(e=this.xgt)||e.Aut(t.zm,s,r),void 0!==this.Xjt&&this.X0===pg.pm){const e=i.BCt.zbt;this.Xjt.Aut(t.zm,s,n,r,i.bIt,e)}const h=[];void 0!==this.xgt&&h.push(this.xgt),void 0!==this.Xjt&&h.push(this.Xjt),Rv(this.wf,h)}Kjt(t,i){const e=this.qst.wf,s=new Ai([t,i]).lB(e);for(let t=0;t<s.U;t++)this.qst.o$(s.Cn(t),s.jn(t));for(let t=0;t<e.U;t++)this.qst.a$(e.Cn(t),e.jn(t))}o$(t,i){this.qst.o$(t,i)}a$(t,i){this.qst.a$(t,i)}constructor(t,i,e,s){this.X0=t,this.qst=i,this.xgt=e,this.Xjt=s}};function wX(t){if(t.Rg!==Cn.pEt||void 0===t.vIt)return;const i=t.vIt.match(/^CC([1-4])$/);if(i)return Number(i[1]);const e=t.vIt.match(/^SERVICE([\d+])$/);return e?Number(e[1]):void 0}var AX=class{iEt(t){var i,e,s;return null==(s=null==(e=this.Fz)||null==(i=e.W$)?void 0:i.gq(t))||s}eEt(t){var i,e,s;return null==(s=null==(e=this.Fz)||null==(i=e.V$)?void 0:i.gq(t))||s}constructor(t){this.Fz=t}},Ki="LLHLSPlayer",vX=[er.jw,er.zw,er.Pw,er.H_],mX=[l.ww,l.Wg,l.ew,l.$g],pX=2e3,yX=class extends Pl{get cA(){var t;const i=[this.Jjt,this.$jt].filter(Yt);if(0===i.length||this.ct!==1/0)return;const e=null==(t=this.vf)?void 0:t.getTime();if(e){return(Date.now()-e)/1e3}let s;for(const t of i){const i=t.fIt.t_;if(0===i.U)continue;const e=i.jn(i.U-1)+t.fIt.fyt,n=t.fIt.LLt,r=e+(null!=n?n:0)-this.Mf;(!s||s<r)&&(s=r)}return s}tzt(){if(void 0===this.izt)return!1;const t=i.Jd();if(!this.izt.Mjt.TOt(t))return!1;const e=this.izt.Mjt.mOt();if(void 0===e||void 0===e.wot.ct)return!1;const s=this.Mf,n=this.Gf,r=this.izt.Sjt.dA(s);if((void 0!==r?r.jn(0)-s:0)>=2*e.wot.ct*n)return!1;if(e.pOt>0&&0===e.yOt)return e.MOt>1e3*e.wot.ct*.8;return 8*e.yOt/this.PB._W.wz>=1.8*e.wot.ct}async ezt(){var t;const i=await this.rEt();if(void 0===i)return;const e=null==(t=this.izt)?void 0:t.Mjt.mOt();if(void 0===e)return;const s=this.szt;if(e.yOt>0){if(_.max(0,e.yOt-e.pOt)<=e.yOt*(i.wz/s.wz))return}const n=i.wz<s.wz;await this.jIt(i,{zIt:n})}nzt(t){return xo(t,(t=>t.wz))}async rzt(){let t=await this.hzt();if(0===t.length)return;const i=await this.ozt(t);i.length>0&&(t=i);const e=this.nzt(t);void 0!==e&&(await this.jIt(e,{zIt:!0}),this.Wz.KSt(e.wz))}get azt(){const t=[this.$jt,this.Jjt].filter(Yt);for(const i of t){if(!i.fIt._bt)return!1;const t=i.fIt.Ket,e=t[t.length-1];if(e&&e.lbt!==this.uzt)return!1}return!0}get LIt(){return this.szt}get GIt(){return this.$jt}get WIt(){return this.Jjt}get czt(){return this.dzt}get ht(){return this.lT}get wf(){return this.sA.wf.ks()}get xIt(){const t=[];if(this.szt){const i=this.sA.Mf;for(const e of this.lzt)for(const s of e.pjt){const e=s.OCt(i);e&&!qt(t,e)&&t.push(e)}}return t}get vf(){if(this.szt){const t=this.sA.Mf;return this.szt.Ebt(t)}}set vf(t){if(!t||!this.szt)return;const i=this.szt.bbt(t);void 0!==i&&this.Sm(i,!1,!0)}get bt(){return this.fzt}get Mf(){var t;return null!=(t=this._zt)?t:this.sA.Mf}set Mf(t){this.Sm(t,t===1/0,!0)}Sm(t,e,s){var n;void 0===e&&(e=!1),void 0===s&&(s=!1),he.qp(Ki,"Seeking to "+t+" s."),this._zt=t,this.gzt=e,this.wzt=!0,this.jTt=!0,null==(n=this.Oz)||n.y_(),this.Co(new Oe(t)),this.V2.Xd(),this.Azt&&(i.$d(this.vzt),s?this.vzt=i.ul((()=>this.mzt(t,e)),50):this.mzt(t,e))}mzt(t,e){i.$d(this.vzt);const s=[this.Wgt,this.pzt,this.W2].filter(Yt);this.V2=new na,this.W2=this.H2(s,t,e,this.V2.Hd).catch(this.yzt)}get ct(){var t,i,e,s,n,r,h;if(!this.azt)return null!=(h=null!=(r=null!=(n=null==(t=this.$jt)?void 0:t.fIt.ct)?n:null==(i=this.Jjt)?void 0:i.fIt.ct)?r:null==(s=this.RTt)||null==(e=s.Wkt)?void 0:e.fIt.ct)?h:[this.$jt,this.Jjt].filter(Yt).every((t=>function(t){if(void 0===t)return!1;return t.fIt.Ket.length>0&&!t.fIt._bt}(t)))?1/0:NaN;const o=this.sA.ct;if(S(o)){var a,u;const t=null==(u=this.RTt)||null==(a=u.Wkt)?void 0:a.fIt.ct;if(void 0!==t)return t}return o}get If(){if(!this.azt)return!1;if(this.e_&&this.Azt){var t,i;const e=this.Mf,s=null==(t=this.$jt)?void 0:t.fIt.ct,n=null==(i=this.Jjt)?void 0:i.fIt.ct;return!(void 0!==s&&e<s)&&!(void 0!==n&&e<n)}return this.sA.If}get lt(){return this.Bz}get bf(){return this.Rz}get kf(){}get xf(){return!1}get jf(){return Tt({},{wT:0,AT:0,vT:0,mT:0,pT:0,yT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.sA.zf(),{pT:this.oTt,mT:this.PB._W.wz})}get Tr(){var t;return null==(t=this.RTt)?void 0:t.Tr}get Pf(){return this.sA.Pf}set Pf(t){this.sA.Pf=t}get Uf(){return this.hyt}set Uf(t){this.hyt!==t&&(this.hyt=t,this.Co(t?new fV:new _V))}get Ff(){return this.sA.Ff}get Gf(){return this.sA.Gf}set Gf(t){he.qp(Ki,"Setting playback rate to "+t+"."),this.sA.Gf=t}get Hf(){return this.lTt.ks()}get lTt(){return this.sA.Hf}get Xf(){return this.Qz}set Xf(t){this.Qz!==t&&(this.Qz=t,this.Mzt())}get Jf(){let t=this.sA.Jf;return this.gTt&&(t=_.max(ae.Xn,t)),t}get t_(){return this.rTt.ks()}get rTt(){let t=this.s0;const i=[this.$jt,this.Jjt].filter(Yt);if(t.U>0&&i.some((t=>!t.fIt._bt))){const e=this.lTt,s=t.jn(t.U-1);if(e.U>0&&e.jn(e.U-1)>s){let n=e.jn(e.U-1);const r=function(t){return t.reduce(((t,i)=>t.Sn(i.fIt.gLt)),new Ai([0,1/0]))}(i);r.U>0&&(n=_.min(n,r.jn(r.U-1))),t=t.cB(new Ai([s,n]))}}return t}VLt(){let t=function(t){if(0===t.length)return Ai.SB();let i=new Ai([0,1/0]),e=0;for(const s of t){const t=s.fIt.t_;t.U>0&&(i=i.Sn(t),e=_.max(e,t.Cn(0)))}if(i.U>0)return i;return Ai.DB(e)}([this.$jt,this.Jjt].filter(Yt));0!==t.U&&(this.Fz&&this.azt&&this.Fz.ct!==1/0&&(t=new Ai([t.Cn(0),this.Fz.ct])),this.s0=t,this.Tzt&&this.xgt.OI(t.Cn(0)),this.Nzt&&this.Xjt.OI(t.Cn(0)))}get e_(){var t;return null!=(t=this.wzt)?t:this.sA.e_}get Yz(){}get nt(){return this.Dl}get rt(){return this._T}get r_(){var t,i;return this.sA.r_||(null==(i=this.szt)||null==(t=i.$It)?void 0:t.Ti)||0}get a_(){var t,i;return this.sA.a_||(null==(i=this.szt)||null==(t=i.$It)?void 0:t.ji)||0}get c_(){return this.sA.c_}set c_(t){he.qp(Ki,"Setting volume to "+t+"."),this.sA.c_=t}get f_(){return this.BB}get g_(){return!1}set g_(t){}get Vz(){return this.Wz}M_(){return!1}w_(){return this.sA.ya}be(){he.qp(Ki,"Hiding the player."),this.sA.be()}m_(){var t;he.qp(Ki,"Pausing the player."),this.sA.m_(),(null==(t=this.Oz)?void 0:t.Ww)&&this.Oz.m_()}async p_(){this.L2=!0;const t=this.sA.p_();if(this.If){const t=this.rTt;t.U>0&&this.Sm(t.Cn(0))}this.Azt||await this.Mzt(),this.jMt(),await t,this._Nt()}jMt(){var t;if(!this.nTt())if(null==(t=this.LIt)?void 0:t.fIt._bt){var i;let t=!0,e=0;const s=null==(i=this.szt)?void 0:i.fIt.Cn;if(!this.jTt&&s&&(t=!s.ebt,e=s.ibt,e<0)){const t=this.LIt.fIt.gLt;e+=t.jn(t.U-1)}this.mzt(e,t)}else this.mzt(1/0,!0);this.Dzt()&&this.mzt(1/0,!0)}nTt(){var t;const i=this.rTt;if(0===i.U)return!0;const e=null==(t=this.Izt)?void 0:t.fB(this.Mf);return(e&&e>0?this.Izt.jn(e):this.Mf)>=i.Cn(0)}get Izt(){var t,i;const e=null==(t=this.Szt)?void 0:t.Sjt,s=null==(i=this.izt)?void 0:i.Sjt;return e?s?s.Sn(e):e:s}Dzt(){return bX(this.Mf,this.$jt)||bX(this.Mf,this.Jjt)}ANt(){this.Bz=void 0,this.Rz=void 0}IP(t){this.Bz||(D(this.tr()),this.Bz=De(t),this.Rz=t,this.Co(new Bi(t)))}ge(){he.qp(Ki,"Showing the player."),this.sA.ge()}T_(){throw new g("Not implemented")}N_(){throw new g("Not implemented")}D_(){}I_(){this.Azt&&D(this.Ezt(this.$jt,this.Jjt,this.dzt,{I_:!0}))}async ga(t,e,s){var n,r;if(he.qp(Ki,"Setting the player source to "+t.src+"."),this.ANt(),this.fzt&&!bl(this.fzt)&&(await this.tr(),Bo(s)),!t.src||bl(t))return;this.$z.mz(t.contentProtection),this.fzt=t,this.bzt=t.seamlessSwitchStrategy,this.Nzt=!qt(t.ignoreEmbeddedTextTrackTypes,Kc.CEA608),this.Tzt=!qt(t.ignoreEmbeddedTextTrackTypes,Kc.EMSG),this.yn(Xu.dIt,this.handleBufferingErrorEvent);const h=null!=(r=null==(n=t.latencyConfiguration)?void 0:n.targetOffset)?r:t.liveOffset;if(this.RTt=new dq(this.NS,this.Aot,t.useCredentials,i.IA(t.src),h),this.RTt.yn(aq.Bkt,this.ACt),this.RTt.yn(aq.Rkt,this.Lzt),this.RTt.yn(l.cw,this.Ds),this.RTt.yn(l.dw,this.Ds),t.hlsDateRange&&(this.kzt=new Aq(this.RTt,this.sA),this.Dl.Dz(this.kzt.nt)),null!=this.Czt||(this.Czt=this.xzt.h9()),e.textTracks&&this.tP(e.textTracks),t.latencyConfiguration){const i=t.latencyConfiguration;this.Oz=new Qa(this,this.sA,i),this.Oz.Rt=!0,this.f_.ka(this.Oz)}ws(this.Dl),this.Mzt()}Mzt(){return this.Wgt=this.Ozt(this.Wgt,this.ES.Hd).catch(this.bwt),this.Wgt}async Ozt(t,i){if(t&&(await t,Bo(i)),!this.RTt)return;const e=this.Qz;e===Qe.iT||this.L2?await this.wit(i):e===Qe.Nm&&await this.jzt(i)}async jzt(t){if(void 0===this.RTt||this.gTt)return;if(!this.RTt.Fkt){try{await this.RTt.qkt(t)}catch(t){throw Ao(t),this.Uf=!1,new $i(Ui.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.zzt.Fnt()}const i=await this.Pzt();this.Bzt(i);const e=this.Rzt(i.uSt),s=this.Uzt(i.cSt),n=this.Qzt(i.Ibt);if(!n){const t=NX(i.Sbt);t&&(he.qp(Ki,"Detected initial closed caption rendition."),this.Fzt(i,t))}await this.Ezt(e,s,n,{Yzt:!0}),this.gTt=!0,this.BNt.YNt(),this.Gzt()}Gzt(){const t=[this.$jt,this.Jjt].filter(Yt);if(t.some((t=>t.fIt._bt)))return;if(this.Oz)return;const i=_.max(...t.map((t=>{var i;return null!=(i=t.fIt.fyt)?i:0}))),e={minimumOffset:.66*i,maximumOffset:2*i,targetOffset:1*i,forceSeekOffset:3*i,minimumPlaybackRate:pu,maximumPlaybackRate:uf};this.Oz=new Qa(this,this.sA,e),this.BB.ka(this.Oz)}async Pzt(){if(this.Vzt=this.RTt.Tr.aSt,!this.Vzt.length)throw new $i(Ui.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.Wzt(this.Vzt);if(0===t.length)throw new $i(Ui.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const i=await this.ozt(t);return i.length>0&&(t=i),he.qp(Ki,"Selecting initial active variant stream."),function(t,i,e,s){void 0===s&&(s=dw.maximumBackoff);const n=function(t,i){if(void 0===i)return t;const e=i.preferredVideoCodecs,s=i.preferredAudioCodecs;if(void 0!==e){let i;for(const n of e){const e=t.filter((t=>t.wst&&t.wst.ZIt&&Lt(t.wst.ZIt,n)));if(0===e.length)continue;if(void 0===s)return e;void 0===i&&(i=e);const r=DX(e,s);if(void 0!==r)return r}if(void 0!==i)return i}if(void 0!==s){const i=DX(t,s);if(void 0!==i)return i}return t}(t,i),r=SX(n,s);switch(e.IW.type){case ia.BANDWIDTH:{const t=e.kW,i=r.filter((i=>i.wz<=t));if(i.length>0)return Vd(i,(t=>t.wz))}case ia.PERFORMANCE:return xo(r,(t=>t.wz));case ia.QUALITY:return Vd(r,(t=>t.wz))}}(t,this.fzt.abr,this.PB,this.zut.maximumBackoff)}Rzt(t){if(this.Hzt){const t=this.qzt(this.Hzt);if(t)return t}return IX(t)}Uzt(t){if(this.Xzt){const t=this.qzt(this.Xzt);if(t)return t}return IX(t)}Qzt(t){for(const t of this.Dl.og)t.jg===Ha.Jn&&(this.Zzt=this.Kzt(t));if(this.Zzt){const t=this.qzt(this.Zzt);if(t)return t}return NX(t)}Kzt(t){return Zt(this.szt.Ibt,(i=>t===this.Jzt.get(i.Mg)))}async wit(t){this.Azt||(await this.jzt(t),this.Azt=!0,await this.Ezt(this.$jt,this.Jjt,this.dzt,{Yzt:!0}))}tP(t){for(const i of t)i.src&&this.nP.pS(i)}Fzt(t,i){if(!this.Nzt)return;const e=function(t){const i=[];for(const e of t){const t=wX(e);void 0!==t&&i.push({B6:t,R6:e.gs||"",kh:e.l})}return i}(t.Sbt);for(const t of e)this.Xjt.igt(t);if(void 0!==i){const t=wX(i);this.Xjt.$_t(t).jg=Ha.Jn}}get lzt(){return[this.Szt,this.izt,this.$zt].filter(Yt)}OIt(t){for(const i of t)if(!this.tPt(i))throw new g("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.Vzt=t}tPt(t){const i=this.Tr;return!!i&&qt(i.aSt,t)}qzt(t){if(t&&this.szt)return Zt(this.szt.gSt,(i=>i===t))}Bzt(t){var i;if(he.qp(Ki,"Setting active variant stream."),this.szt===t)return;const e=(null==(i=this.szt)?void 0:i.SEt)!==(null==t?void 0:t.SEt);if(this.szt&&e)for(const t of this.szt.Ibt)this.bS(t);if(this.szt=t,this.Co(new tX),this.ETt(),t&&e)for(const i of t.Ibt)this.iPt(i)}iPt(t){const i=this.sA.yS(jo.Mm,void 0,t.l,t.gs,t._It,void 0,void 0,t.pIt.map(IW).filter(Yt));i.yn(Ce.ra,this.onTextTrackChange),this.Jzt.set(t.Mg,i),this.ePt.tt(i)}bS(t){const i=this.Jzt.get(t.Mg);i&&(i.fn(Ce.ra,this.onTextTrackChange),this.ePt.it(i),this.Jzt.delete(t.Mg),this.sA.bS(i))}async hzt(){var t;const i=null!=(t=this.Vzt)?t:this.Tr.aSt;if(0===i.length&&!this.Vzt)return he.qp(Ki,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===i.length&&!this.Vzt)return he.qp(Ki,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const e=await this.Wzt(i);if(0===e.length)return he.hSt(Ki,"LLHLSPlayer - No variant streams with supported codecs available to perform ABR selection on."),[];const s=SX(e,this.zut.maximumBackoff);return 0===s.length?(this.sPt||(he.hSt(Ki,"LLHLSPlayer - No variant streams with online renditions available to perform ABR selection on."),this.nPt++,await this.rPt(e)),[]):s}async hPt(){const t=await this.rEt();if(void 0===t)return;const i=!!this.szt&&t.wz<this.szt.wz;await this.jIt(t,{zIt:i})}async rEt(){var t,i;const e=await this.hzt();if(0===e.length)return;const s=function(t){const i=t.Mf,e=t.wf.dA(i);return e?e.jn(0)-i:0}(this.sA),n=await this.ozt(e),r={ji:this.sA.ji,Ti:this.sA.Ti,tEt:s,out:null==(i=this.fzt)||null==(t=i.abr)?void 0:t.restrictToPlayerSize},h=await this.oPt.rEt(e,this.szt,n,r,new AX(this.Fz));return!!this.szt&&h.wz<this.szt.wz||this.aPt(h,s)?h:void 0}aPt(t,e){var s;if(t===this.LIt)return!1;const n=this.LIt&&EX(this.LIt,this.zut.maximumBackoff),r=EX(t,this.zut.maximumBackoff);if(!n&&r)return!0;(!this.uPt||this.uPt.kIt.wz>t.wz)&&(this.uPt={kIt:t,ldt:i.Jd()});const h=i.Jd()-this.uPt.ldt;var o;const a=null!=(o=null==(s=this.WIt)?void 0:s.fIt.$St)?o:1/0;return e>=_.max(a-1,5)||h>1e3}async rPt(t){this.sPt=!0;let i=!1;for(const e of t)try{const t=this.Jjt?Zt(e.cSt,(t=>La(t,this.Jjt))):void 0;if(void 0===t)continue;await this.eCt(t),t.fIt.xLt=-1/0,i=!0}catch(t){}if(i)this.nPt=0,await this.cPt();else{if(this.nPt>=this.zut.maxRetries)return void this.IP(new $i(Ui.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=_.min(this.zut.minimumBackoff*2**(this.nPt-1),this.zut.maximumBackoff);await ri(t)}this.sPt=!1,await this.hPt()}async Wzt(t){let i=await Hd(t,(async t=>{var i,e,s;const n=[(null==(i=t.wst)?void 0:i.XIt)?'audio/mp4; codecs="'+t.wst.XIt+'"':void 0,(null==(e=t.wst)?void 0:e.ZIt)?'video/mp4; codecs="'+t.wst.ZIt+'"':void 0].filter(Yt);return 0===n.length||await this.dPt.jq(n,null==(s=this.fzt)?void 0:s.useManagedMediaSource)}));return i.some((t=>{var i;return null==(i=t.wst)?void 0:i.ZIt}))&&(i=i.filter((t=>!t.wst||t.wst.ZIt||0!==t.cSt.length))),i.some((t=>{var i;return null==(i=t.wst)?void 0:i.XIt}))&&(i=i.filter((t=>!t.wst||t.wst.XIt||0!==t.uSt.length))),i}ozt(t){return this.RTt.Gkt?Hd(t,(t=>async function(t,i){for(const e of t)if(!await i(e))return!1;return!0}([IX(t.uSt),IX(t.cSt),NX(t.Ibt),NX(t.Sbt)].filter(Yt),(t=>this.lPt(t))))):Promise.resolve([])}async lPt(t){if(0===t.fIt.Ket.length)return!1;const i=t.fIt.Ket[0];if(!i.ovt)return!1;const e=i.ovt,s=e.Pmt?XW(e.Pmt.Cn,e.Pmt.U):void 0;try{return await this.Aot.Cet(e.jM,s)}catch(t){return!1}}async jIt(t,i){if(!this.Azt)throw new g("LLHLSPlayer - The LLHLSPlayer is not loaded.");if(!t)throw new g("LLHLSPlayer - Cannot explicitly set the active variant stream to undefined.");if(!this.tPt(t))throw new g("LLHLSPlayer - Trying to set an active variant stream that does not exists on the internal model.");if(t===this.szt)return void he.qp(Ki,"Trying to set the already active variant stream, ignoring.");const e=this.$jt?Zt(t.uSt,(t=>La(t,this.$jt))):void 0,s=this.Jjt?Zt(t.cSt,(t=>La(t,this.Jjt))):void 0,n=this.dzt?Zt(t.Ibt,(t=>La(t,this.dzt))):void 0;this.Bzt(t),this.uPt=void 0,await this.Ezt(e,s,n,i)}async VIt(t){if(!this.szt)return void(this.Hzt=t);const i=this.qzt(t);if(t&&!i)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active audio rendition.");this.GIt!==i&&(he.qp(Ki,"Switching audio rendition"),await this.Ezt(i,this.Jjt,this.dzt,{BIt:!0}))}async HIt(t){if(!this.szt)return void(this.Xzt=t);const i=this.qzt(t);if(t&&!i)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active video rendition.");this.WIt!==i&&(he.qp(Ki,"Switching video rendition"),await this.Ezt(this.$jt,i,this.dzt,{PIt:!0}))}async fPt(t){if(!t)throw new g("LLHLSPlayer - Cannot explicitly set the active subtitle rendition to undefined.");if(!this.gTt)return void(this.Zzt=t);const i=this.qzt(t);if(!i)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active subtitle rendition.");he.qp(Ki,"Switching subtitle rendition"),await this.Ezt(this.$jt,this.Jjt,i)}async _Pt(t,i){if(this.sPt)return;const e=0===this.rt.U;t.Rg===Cn.pm||t.Rg===Cn.ym&&e?this.Vzt&&this.Vzt.length<=1?(t.Rg===Cn.pm&&this.Jjt!==t?await this.Ezt(this.$jt,t,this.dzt):t.Rg===Cn.ym&&e&&this.$jt!==t&&await this.Ezt(t,this.Jjt,this.dzt),await this.gPt(t,i)):await this.hPt():await this.gPt(t,i)}async eCt(t,i){try{await this.RTt.eCt(t,i)}catch(e){throw Ao(e),(du(e)||bv(e))&&await this._Pt(t,i),e}}async gPt(t,i){if(!qt(this.wPt,t)){this.wPt.push(t);try{const e=t.Rg===Cn.Mm||t.Rg===Cn.pEt?1/0:this.zut.maxRetries;await hu((()=>this.retryOfflineRenditionsCallback(t,i)),i,e,this.zut.minimumBackoff,this.zut.maximumBackoff)}catch(t){this.IP(new $i(Ui.MEDIA_LOAD_ERROR,t.message,t))}finally{To(this.wPt,t),t.fIt.xLt===-1/0&&await this.cPt()}}}Ezt(t,i,e,s){void 0===s&&(s={});const n={zIt:s.zIt||!1,BIt:s.BIt||!1,PIt:s.PIt||!1,I_:s.I_||!1,Yzt:s.Yzt||!1};return n.Yzt||n.I_||this.$jt!==t||this.Jjt!==i||this.dzt!==e?void 0===t&&void 0===i?Promise.reject(new g("Trying to buffer no media renditions.")):(this.$jt=t,this.Jjt=i,this.dzt=e,this.VLt(),this.Co(new iX),this.V2.Xd(),this.V2=new na,this.APt.Xd(),this.APt=new na,this.pzt=this.vPt([this.pzt,this.W2].filter(Yt),t,i,e,n,this.APt.Hd).catch(this.yzt),this.pzt):Promise.resolve()}async mPt(t,i,e,s){var n,r;const h=[];if(h.push(this.pPt(i,s)),gW(t,i)||h.push(this.pPt(t,s)),null==(r=this.fzt)||null==(n=r.hls)?void 0:n.delaySubtitlePreload)return Promise.all(h).then((()=>this.pPt(e,s)));const o=this.pPt(e,s);return Promise.all([...h,o])}async pPt(t,i){if(t)try{await this.RTt.eCt(t,i)}catch(e){Ao(e),(du(e)||bv(e))&&await this.yPt(t,i)}}async yPt(t,i){if(this.sPt)return;const e=0===this.rt.U;if(t.Rg===Cn.pm||t.Rg===Cn.ym&&e)if(this.Vzt&&this.Vzt.length<=1)await this.gPt(t,i);else{const t=await this.Pzt();this.Bzt(t);const i=this.Rzt(t.uSt),e=this.Uzt(t.cSt),s=this.Qzt(t.Ibt);await this.Ezt(i,e,s)}else await this.gPt(t,i)}async vPt(t,i,e,s,n,r){var h;if(!this.Azt)return void await this.mPt(i,e,s,r);await Promise.all(t.map((t=>t.catch(El)))),this.MPt(),await this.TPt(r),await this.NPt();const o=[];n.BIt&&this.Fz&&this.Fz.V$&&o.push(this.Fz.V$.ET(0,1/0)),n.PIt&&this.Fz&&this.Fz.W$&&o.push(this.Fz.W$.ET(0,1/0)),await Promise.all(o),Bo(r);const a=await this.DPt(i,e,n.I_,r);this.IPt(i,e,n.zIt||a),this.SPt(s,n.zIt),Bo(r);const u=[e,gW(i,e)?void 0:i,s].filter(Yt);try{await Promise.all(u.filter((t=>!t.fIt.ILt)).map((t=>{var i;return null==(i=this.RTt)?void 0:i.sCt(t,r)})))}catch(t){Ao(t)}if(Bo(r),this.e0(),this.VLt(),void 0!==this._zt)this.mzt(this._zt,this.gzt);else if(!this.jTt&&(null==(h=this.szt)?void 0:h.fIt.Cn)){const t=this.szt.fIt,i=t.Cn;let e=i.ibt;if(i.ibt<0){const i=t.gLt;e+=i.jn(i.U-1)}this.mzt(e,!i.ebt)}else!this.jTt&&u.every((t=>!t.fIt._bt))?this.mzt(1/0,!0):this.lzt.length>0&&this.EPt()}async DPt(t,i,e,s){var n,r;const h=void 0!==t&&t!==i,o=void 0!==i,a=await this.bPt(t,i,this.szt);if(Bo(s),!e&&this.Fz&&!a)return!1;const u=void 0!==(null==(n=this.Fz)?void 0:n.V$),c=void 0!==(null==(r=this.Fz)?void 0:r.W$);if(!e&&!(h!==u||o!==c)&&a&&this.Fz&&this.Fz.gq(a))return await this.TPt(s),await this.Fz.Aq(a),!0;for(const t of this.lzt)t.pjt.forEach((t=>t.Xd()));this.sA.i5();try{this.Fz&&await this.sA.tr(),this.Fz=await this.LPt(a,h,o)}finally{this.sA.e5()}return!0}async bPt(t,i,e){var s,n;const r=e.wst,h=[];if(void 0!==t){var o,a;const i=null!=(a=null==(o=t.wst)?void 0:o.XIt)?a:null==r?void 0:r.XIt;if(!i)return;{const t='audio/mp4; codecs="'+i+'"';he.qp(Ki,"Configuring MediaSource for initial audio rendition with codec: "+t+"."),h.push(t)}}if(void 0!==i){var u,c;const t=null!=(c=null==(u=i.wst)?void 0:u.ZIt)?c:null==r?void 0:r.ZIt;if(!t)return;{const i='video/mp4; codecs="'+t+'"';he.qp(Ki,"Configuring MediaSource for initial video rendition with codec: "+i+"."),h.push(i)}}if(0===h.length)return void he.hSt(Ki,"No codecs found on the active variant stream.");var d;const l=null!=(d=null==i||null==(s=i.fIt.Ket[0])?void 0:s.nbt)?d:[];var f;const _=null!=(f=null==t||null==(n=t.fIt.Ket[0])?void 0:n.nbt)?f:[],g=this.RTt.Tr,w=await eH(this.fzt.contentProtection,h,g.Tkt.concat(_).concat(l),this.NS,this.fzt.useCredentials);return{Rg:wi.Hx,r0:h.map((t=>({qz:t}))),Xz:w,w0:this.fzt.useManagedMediaSource}}async LPt(t,i,e){let s;return s=t?await this.sA.$n(t):new rX(this.sA,i,e),this.Fz=s,this.e0(),this.NMt(),this.DMt(),s}e0(){const t=this.Fz;if(t&&S(t.ct)){var i,e,s;const n=null!=(s=null==(i=this.$jt)?void 0:i.fIt.ct)?s:null==(e=this.Jjt)?void 0:e.fIt.ct;void 0!==n&&n>0&&t.t0(n)}this.VLt()}NMt(){const t=this.Fz;t&&(t.W$&&(t.W$.NW=this.PB.jW),t.V$&&(t.V$.NW=this.PB.jW))}DMt(){const t=this.Fz;t&&(t.W$&&(t.W$.EW=this.PB.EW),t.V$&&(t.V$.EW=this.PB.EW))}IPt(t,i,e){if(!this.Fz)throw new g("Invalid state");this.Fz.V$?this.Z$&&this.Z$.qjt(this.Fz.V$)||(this.Z$=new uh(pg.ym,this.Fz.V$,this.Tzt?this.xgt:void 0,this.Nzt?this.Xjt:void 0)):this.Z$=void 0,this.Fz.W$?this.K$&&this.K$.qjt(this.Fz.W$)||(this.K$=new uh(pg.pm,this.Fz.W$,this.Tzt?this.xgt:void 0,this.Nzt?this.Xjt:void 0)):this.K$=void 0;const s=gW(t,i);if(this.K$&&i){const t=s&&this.Z$?[this.K$,this.Z$]:[this.K$];this.izt?this.izt.bIt!==i&&(e&&(this.izt.Xd(),this.izt.Djt.Vb()),this.izt.bxt(i)):(this.izt=function(t,i,e,s,n,r,h,o,a,u){const c=s.Tr.tT,d=new Rq(c),l=new zq(pg.pm,t,s,d,n,r,h,u),f=i.map((t=>t.Rg)),_=o.Kyt(d,s.Tr.tT,f),g=new $q(l,d,_,a);return g.Njt(i),g}(i,t,this.sA,this.RTt,this.NS,this.Aot,this.GCt,this.Czt,this.PB,this.fzt.useCredentials),this.izt.Mjt.yn(Er.Dxt,this.kPt),this.izt.Mjt.yn(Er.Ixt,this.CPt),this.izt.Tjt.yn(Ea.HOt,this.xPt),this.izt.Tjt.yn(Ea.XOt,this.OPt),this.izt.Tjt.yn(Ea.ZOt,this.jPt),this.izt.Tjt.yn(Ea.qOt,this.zPt)),this.izt.Njt(t)}else{var n;null==(n=this.izt)||n.Qd(),this.izt=void 0}var r;this.Z$&&t&&!s?(this.Szt?this.Szt.bIt!==t&&(e&&(this.Szt.Xd(),this.Szt.Djt.Vb()),this.Szt.bxt(t)):(this.Szt=function(t,i,e,s,n,r,h,o,a,u){const c=s.Tr.tT,d=new Rq(c),l=new zq(pg.ym,t,s,d,n,r,h,u),f=o.Kyt(d,s.Tr.tT,[i.Rg]),_=new $q(l,d,f,a);return _.Njt([i]),_}(t,this.Z$,this.sA,this.RTt,this.NS,this.Aot,this.GCt,this.Czt,this.PB,this.fzt.useCredentials),this.Szt.Mjt.yn(Er.Ixt,this.CPt),this.Szt.Tjt.yn(Ea.HOt,this.xPt),this.Szt.Tjt.yn(Ea.qOt,this.zPt)),this.Szt.Njt([this.Z$])):(null==(r=this.Szt)||r.Qd(),this.Szt=void 0);this.PPt()}SPt(t,i){if(this.$zt){this.$zt.Mjt.bIt===t?i&&(this.$zt.Xd(),this.$zt.Djt.Vb()):(this.$zt.Qd(),this.$zt=void 0)}if(!this.$zt&&t){const i=this.Jzt.get(t.Mg);i.jg=Ha.Jn,this.$zt=function(t,i,e,s,n,r,h){const o=e.Tr.tT,a=new Fq(i,o),u=new Rq(o),c=new zq(pg.Ru,t,e,u,s,n,r,h),d=new Zq(u,o,pg.Ru),l=new $q(c,u,d);return l.Ijt(a),l}(t,i,this.RTt,this.NS,this.Aot,this.GCt,this.fzt.useCredentials)}}PPt(){const t=[this.Z$,this.K$].filter(Yt).map((t=>t.Rg));this.RTt.Tr.tT.ykt(t)}async H2(t,i,e,s){await Promise.all(t.map((t=>t.catch(El)))),Bo(s),await this.NPt(),Bo(s),this._zt=void 0,this.wzt=void 0,this.jTt=!0;const n=this.rTt.rB(i),r=this.sA.df(l.pw,s);this.sA.Sm(n,e),this.Azt&&this.lzt.length>0&&(this.RTt.Tr.tT.Mkt(),this.BPt(this.sA.Mf),this.EPt()),await r,this._Nt()}_Nt(){const t=this.cA;if(this.Ff||this.e_||void 0===t)return;const i=this.Mf;var e,s;t+this.Mf-this.f_.wd.maximumOffset<i?null==(e=this.Oz)||e.Cn():null==(s=this.Oz)||s.y_()}BPt(t){for(const i of this.lzt)i.Yxt(t)||(i.kjt(),i.Djt.zOt()),i.bjt(t)||(i.Cjt(),i.Djt.POt())}MPt(){for(const t of this.lzt)t.Xd()}NPt(){return Promise.all([this.RPt(),this.UPt(),this.QPt()])}EPt(){this.FPt(),this.YPt(),this.GPt()}async cPt(){this.Azt&&this.lzt.length>0&&(this.lzt.forEach((t=>t.kjt())),await this.RPt(),this.FPt(),this.lzt.forEach((t=>t.Mjt.Zxt())))}FPt(){if(this.VPt)return;const t=()=>{this.VPt=void 0};this.WPt=new na,this.VPt=this.HPt(this.WPt.Hd).catch(this.yzt).then(t,t)}async RPt(){var t;null==(t=this.WPt)||t.Xd();const i=this.VPt;this.VPt=void 0,i&&await i}async HPt(t){Bo(t);const i=this.lzt;for(;;){const e=[],s=this.sA.Mf;for(const t of i){const i=t.Mjt,n=t.Sut(s);if(i.ECt)e.push(i.kCt());else if(t.Ljt(s,n,this.PB.jW)){const s=i.Gxt(n);if(void 0===s){if(i.bIt.fIt._bt)continue;const t=i.bIt.fIt.Ket;t.length&&t[0].GT>n&&(this.Mf=1/0),i.$xt(),i.Hxt(n)}else{const[e,n]=s;i.bht(e,n,t.vCt),t.Tjt.hjt(e,n)}e.push(i.kCt())}}await vu((t=>{if(0===e.length){i.every((t=>t.Mjt.Fxt))||e.push(this.sA.df(l.Sw,t));for(const s of i)e.push(s.Tjt.df(Ea.qOt,t))}return dt(Promise.race(e),t)}),t)}}YPt(){if(this.qPt)return;const t=()=>{this.qPt=void 0};this.XPt=new na,this.qPt=this.ZPt(this.XPt.Hd).catch(this.yzt).then(t,t)}async UPt(){var t;null==(t=this.XPt)||t.Xd();const i=this.qPt;this.qPt=void 0,i&&await i}async ZPt(t){Bo(t);const i=this.lzt;for(;;){const e=[];for(const t of i){const i=t.Mjt,s=t.Tjt;if(s.ECt)e.push(s.kCt());else{const t=i.zxt();t?"wot"===t.Rg?(s.cjt(t),e.push(s.kCt())):"ubt"===t.Rg&&(s.ojt(t),e.push(s.kCt())):e.push(i.Kxt())}}if(0===e.length)break;await dt(Promise.race(e),t)}}GPt(){if(this.KPt)return;this.JPt=new na;const t=()=>{this.KPt=void 0};this.KPt=this.$Pt(this.JPt.Hd).catch(this.yzt).then(t,t)}async QPt(){var t;null==(t=this.JPt)||t.Xd();const i=this.KPt;this.KPt=void 0,i&&await i}async $Pt(t){for(;;){const i=this.lzt;i.forEach((t=>t.Sht()));const e=this.sA.Mf,s=[],n=[];for(const t of i){const i=t.Tjt;for(const r of t.pjt){const t=r.NCt?s:n;if(r.ECt)t.push(r.kCt());else if(!r.CCt(e)){const e=i.wjt(r.Rg);e?"wot"===e.Rg&&e.lbt===this.uzt?(r.kut(e),t.push(r.kCt())):"vjt"===e.Rg&&e.lbt===this.uzt&&(r.AJ(e),t.push(r.kCt())):n.push(i.Ajt(r.Rg))}}}if(0===s.length){if(await this.tBt(i,e,t))continue}if(0===s.length&&0===n.length){i.every((t=>t.pjt.length>0&&t.pjt.every((t=>t.CCt(e)))))&&this.Fz.t$();break}await dt(Promise.race([...s,...n]),t)}}async tBt(t,i,e){const s=[],n=[];for(const e of t){const t=e.Sut(i);for(const r of e.pjt){if(!r.NCt)continue;const h=e.Tjt.wjt(r.Rg);if(void 0!==h){if(h.lbt===this.uzt)return!1;s.push(h)}else{if(e.ECt||e.Ljt(i,t,this.PB.jW)||!r.xCt(i,t))return!1;{const t=r.DCt.vCt;void 0!==t&&n.push(t)}}}}if(0===s.length)return!1;const r=Vd(s,(t=>t.lbt)).lbt;if(s.every((t=>"vjt"===t.Rg&&t.lbt===r))){const t=xo(s,(t=>t.GT)).GT,i=[...s,...n],r=await this.iBt(i);this.eBt(r)?(he.rSt(SW,"Seamless switch from",this.Fz.wd,"to",r),await this.Fz.Aq(r),he.rSt(SW,"Seamless switch complete.")):await this.sBt(t,r,e),this.uzt=s[0].lbt}else for(const i of t)for(const t of i.pjt){let e=i.Tjt.wjt(t.Rg);for(;void 0!==e&&("vjt"!==e.Rg||e.lbt!==r);)he.rSt(SW,"Removing append for other discontinuity, expecting "+r,e),i.Tjt.jCt(e),e=i.Tjt.wjt(t.Rg)}return!0}eBt(t){return this.bzt===si.hT||this.bzt!==si.oT&&this.Fz.gq(t)}async iBt(t){const i=t.map((t=>t.mjt.wst)),e=i.map((t=>({qz:t}))),s=ge(t,(t=>t.mjt.nbt));s.push(...this.RTt.Tr.Tkt);let n=await eH(this.fzt.contentProtection,i,s,this.NS,this.fzt.useCredentials);return 0===n.length&&this.Fz&&this.Fz.wd.Xz.length>0&&(n=this.Fz.wd.Xz),{Rg:wi.Hx,r0:e,Xz:n,w0:this.fzt.useManagedMediaSource}}async sBt(t,i,e){var s;const n=this.Fz,r=n.ct,h=this.wf.length>0&&this.Mf<t;if(h)try{for(he.rSt(SW,"Marking end of stream and waiting for ended to switch discontinuity."),n.t$();!this.sA.If&&this.sA.Mf<t;)await this.sA.df([l.Sw,l.Jg],e)}catch(t){throw n.GJ(),n.t0(r),t}he.rSt(SW,"Perform hard switch from",null==(s=this.Fz)?void 0:s.wd,"to",i);try{this.sA.i5(),this.Mf<t&&this.sA.Sm(t,!0,!0),this.K$=void 0,this.Z$=void 0,this.PPt(),await this.sA.tr(),this.Fz=await this.sA.$n(i),this.e0(),this.NMt(),this.DMt(),this.Fz.W$&&(this.K$=new uh(pg.pm,this.Fz.W$,this.Tzt?this.xgt:void 0,this.Nzt?this.Xjt:void 0),this.K$.o$(t-1,t)),this.Fz.V$&&(this.Z$=new uh(pg.ym,this.Fz.V$,this.Tzt?this.xgt:void 0,this.Nzt?this.Xjt:void 0),this.Z$.o$(t-1,t)),this.PPt()}finally{h&&D(this.sA.p_()),this.sA.e5()}if(this.izt){const t=void 0!==this.Z$&&void 0===this.Szt?[this.K$,this.Z$]:[this.K$];this.izt.Njt(t)}this.Szt&&this.Szt.Njt([this.Z$]),he.rSt(SW,"Hard switch complete.")}TPt(t){return dt(Zc(ge(this.lzt,(t=>t.pjt.map((t=>t.kCt()))))),t)}ETt(){const t=this.a_,i=this.r_;this.jNt===t&&this.zNt===i||(this.jNt=t,this.zNt=i,this.Co(new Vu))}async gn(){he.qp(Ki,"Unloading the player."),this.nBt(),this.ANt(),await this.tr(),this.sA.uP=void 0,this.ePt.gn(),await this.nP.gn(),await this.xgt.gn(),await this.Xjt.gn(),this.lT.gn(),this._T.gn(),this.Dl.gn(),this.rBt.gn(),this.BNt.Qd(),this.GCt.Qd(),this.Czt&&(this.Czt.Qd(),this.Czt=void 0)}async tr(){he.qp(Ki,"Resetting the player."),this.fn(Xu.dIt,this.handleBufferingErrorEvent),this.uzt=-1,this.ES.Xd(),this.ES=new na,this.V2.Xd(),this.V2=new na,this.APt.Xd(),this.APt=new na;const t=[this.Wgt,this.W2,this.pzt].filter(Yt);await Promise.all(t.map((t=>t.catch(El)))),this.Wgt=void 0,this.W2=void 0,this.pzt=void 0,this.$jt=void 0,this.Jjt=void 0,this.dzt=void 0,this.Vzt=void 0,this.Hzt=void 0,this.Xzt=void 0,this.Zzt=void 0,this.Hzt=void 0,this.Xzt=void 0,this.Zzt=void 0,this.Oz=void 0,this.BB.tr(),this.wPt=[],this.Bzt(void 0),this.MPt(),await this.NPt(),this.Szt&&(this.Szt.Qd(),this.Szt=void 0),this.izt&&(this.izt.Qd(),this.izt=void 0),this.$zt&&(this.$zt.Qd(),this.$zt=void 0),this.Z$=void 0,this.K$=void 0,this.Fz=void 0,this.RTt&&(this.RTt.Qd(),this.RTt=void 0),this.kzt&&(this.Dl.Ez(this.kzt.nt),this.kzt=void 0),await this.nP.tr(),await this.xgt.tr(),await this.Xjt.tr(),this.sA.rP(),await this.sA.tr(),this.fzt=void 0,this.Azt=!1,this.s0=Ai.SB(),this._zt=void 0,this.ONt=void 0,this.jNt=0,this.zNt=0,this.wzt=void 0,this.jTt=!1,this.L2=!1,i.$d(this.vzt),this.gTt=!1,this.hBt=!1,this.oTt=0,this.bzt=si.iT,this.rBt.tr(),this.oBt(),this.Co(new uw(this.Mf,this.Jf))}oBt(){for(const t of this.lT.og)t.gn();for(const t of this._T.og)t.gn();for(const t of this.Dl.og)t.gn();this.lT.tr(),this._T.tr(),this.Dl.tr(),this.Jzt.clear()}aBt(){this.rBt.yn(vX,this.Ds),this.rBt.yn(er.Rw,this.lA),this.rBt.yn(er.Bw,this.uBt),this.rBt.yn(er.Ow,this.cBt),this.PB.yn("TW",this.UNt),this.PB.yn("SW",this.QNt),this.sA.yn(mX,this.Ds),this.sA.yn(l.Vg,this.handleContentProtectionErrorEvent),this.sA.yn(l.Xg,this.dBt),this.sA.yn(l.Jg,this.Mh),this.sA.yn(l.Sh,this.lBt),this.sA.yn(l.jh,this.fBt),this.sA.yn(l.gw,this._Bt),this.sA.yn(er.H_,this.cO),this.sA.yn(l.Sw,this.u4),this.sA.yn(l.yw,this.We),this.sA.yn(l.pw,this.fP),this.sA.yn(l.mw,this.gBt),this.sA.yn(l.Ew,this.wBt)}nBt(){this.rBt.fn(vX,this.Ds),this.rBt.fn(er.Rw,this.lA),this.rBt.fn(er.Bw,this.uBt),this.rBt.fn(er.Ow,this.cBt),this.PB.fn("TW",this.UNt),this.PB.fn("SW",this.QNt),this.sA.fn(mX,this.Ds),this.sA.fn(l.Vg,this.handleContentProtectionErrorEvent),this.sA.fn(l.Xg,this.dBt),this.sA.fn(l.Jg,this.Mh),this.sA.fn(l.Sh,this.lBt),this.sA.fn(l.jh,this.fBt),this.sA.fn(l.gw,this._Bt),this.sA.fn(er.H_,this.cO),this.sA.fn(l.Sw,this.u4),this.sA.fn(l.yw,this.We),this.sA.fn(l.pw,this.fP),this.sA.fn(l.mw,this.gBt),this.sA.fn(l.Ew,this.wBt)}constructor(t,e,s,n,r,h,o,a){super(),this.PB=s,this.BB=n,this.GCt=r,this.xzt=h,this.Jzt=pt(),this.Nzt=!0,this.Tzt=!0,this.Azt=!1,this.fzt=void 0,this.Fz=void 0,this.Wgt=void 0,this.ES=new na,this.RTt=void 0,this.Hzt=void 0,this.Xzt=void 0,this.Zzt=void 0,this.szt=void 0,this.$jt=void 0,this.Jjt=void 0,this.dzt=void 0,this.Vzt=void 0,this.wPt=[],this.Z$=void 0,this.K$=void 0,this.Szt=void 0,this.izt=void 0,this.$zt=void 0,this.Czt=void 0,this.APt=new na,this.pzt=void 0,this.V2=new na,this.W2=void 0,this.uzt=-1,this.WPt=void 0,this.XPt=void 0,this.JPt=void 0,this.VPt=void 0,this.qPt=void 0,this.KPt=void 0,this.hyt=!0,this.nPt=0,this.sPt=!1,this.Qz=Qe.FP,this.Bz=void 0,this.Rz=void 0,this.s0=Ai.SB(),this.ABt=[],this._zt=void 0,this.gzt=!1,this.jTt=!1,this.L2=!1,this.ONt=void 0,this.jNt=0,this.zNt=0,this.wzt=void 0,this.vzt=0,this.gTt=!1,this.hBt=!1,this.bzt=si.iT,this.uPt=void 0,this.vBt=void 0,this.oTt=0,this.handleContentProtectionErrorEvent=t=>{this.Bz=De(t.errorObject),this.Rz=t.errorObject,this.Ds(t)},this.handleBufferingErrorEvent=t=>{this.IP(new $i(Ui.MEDIA_LOAD_ERROR,t.lt.message,t.lt))},this.dBt=()=>{this.VLt();const t=this.ct;t!==this.ONt&&(this.ONt=t,this.Co(new ht(this.ONt)))},this.Mh=()=>{this.If&&this.Co(new ie(this.Mf))},this.lBt=()=>{this.Co(new ye(this.Mf))},this.fBt=()=>{this.jMt(),this.Co(new Ps(this.Mf))},this.lA=()=>{void 0!==this.vBt&&(i.$d(this.vBt),this.vBt=void 0),this.Co(new tn(this.Mf))},this._Bt=()=>{this.Co(new ki(this.Mf))},this.cO=()=>{this.Co(new Lr(this.Mf,this.Jf))},this.u4=()=>{const t=this.xIt;mo(this.ABt,t)||(this.Co(new vq),this.ABt=t),this.Co(new nc(this.Mf,this.vf))},this.kPt=ho((t=>{t.wS===pg.pm&&this.tzt()&&D(this.ezt())}),200),this.CPt=t=>{var i;this.oTt+=t.Ext;const e=this.rt.U>0?t.wS===pg.pm:t.wS===pg.ym;"wot"===t.Sxt&&e&&D(this.hPt()),this.Co(new fU(function(t){if(t){if(void 0!==t.Pmt){var i,e;const s=t.Pmt.Cn+(null!=(e=t.Pmt.U)?e:0);return{zu:t.jM,jht:[null==(i=t.Pmt)?void 0:i.Cn,s],AS:!0}}return{zu:t.jM.toString()||"",AS:!0}}return{zu:"",AS:!0}}(t.uri),(null==(i=this.LIt)?void 0:i.wz)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.wS,t.httpStatusCode,t.Ext))},this.We=()=>{this.Co(new Oe(this.Mf))},this.fP=()=>{this.Co(new Ms(this.Mf))},this.gBt=()=>{this.ETt()},this.wBt=()=>{this.Co(new lo(this.Mf,this.c_))},this.uBt=()=>{this.sA.e_?this.Co(new Yu(this.Mf)):(null!=this.vBt||(this.vBt=i.ul((()=>{this.hBt&&(this.uPt=void 0,D(this.rzt()))}),2500)),this.jMt(),this.Co(new Yu(this.Mf)))},this.cBt=()=>{this.hBt=!0,this.Co(new gt(this.Mf,this.Jf))},this.yzt=t=>{ut(t)||du(t)||bv(t)||(this.MPt(),D(this.NPt()),this.Co(new PW(t)))},this.ACt=()=>{this.VLt()},this.Lzt=t=>{D(this._Pt(t.bIt))},this.bwt=t=>{if(ut(t))return;const i=t instanceof $i?t:new $i(Ui.MEDIA_DECODE_ERROR,t.message,t);this.IP(i)},this.onTextTrackChange=t=>{if(!this.szt)return;const i=t.Lt,e=this.Kzt(i);e&&(i.jg===Ha.zg||i.jg===Ha.Jn?(D(this.fPt(e)),this.Jzt.forEach((t=>{t!==i&&(t.jg=Ha.Ch)}))):this.dzt&&this.dzt===e&&D(this.Ezt(this.$jt,this.Jjt,void 0)))},this.retryOfflineRenditionsCallback=async(t,i)=>{this.czt!==t&&this.GIt!==t&&this.WIt!==t||(await this.RTt.eCt(t,i),t.fIt.xLt=-1/0)},this.UNt=()=>{this.NMt()},this.QNt=()=>{this.DMt()},this.xPt=t=>{const i=this.szt,e=null==i?void 0:i.Nbt;if(this.RTt._Ct(t.wst,t.bIt.fIt),!e&&(this.RTt.gCt(t.wst,t.bIt.fIt),this.zzt.fSt(),i)){const t=void 0!==this.$jt&&!qt(i.uSt,this.$jt),e=void 0!==this.Jjt&&!qt(i.cSt,this.Jjt);(t||e)&&this.Ezt(t?void 0:this.$jt,e?void 0:this.Jjt,this.dzt).catch(El)}},this.OPt=t=>{this.zzt.wSt(t.bIt,t.xct)},this.jPt=t=>{this.zzt.vSt(t.bIt,t.KOt.vN())},this.zPt=t=>{this.RTt.lCt(t.bIt)},this.Aot=new UV(o),this.sA=t,this.NS=e,this.Wz=new zW(this.PB._W),this.dPt=new BW(this.sA),this.oPt=new qW(this.PB),this.zut=a.retryConfiguration,this.lT=new yi,this._T=new yi,this.zzt=new EW(this,this.PB,this.lT,this._T),this.ePt=new We,this.nP=new bu(this.sA,this.NS),this.xgt=new BV(this.sA),this.Xjt=new IF(this.sA),this.Dl=new Ln([this.ePt,this.nP.Z,this.xgt.Z,this.Xjt.Z,this.sA.nt]),this.$z=new Cu(this.NS),this.sA.uP=this.$z,this.BNt=new TX(this,this.sA),this.rBt=new OM(this.BNt,!0),this.aBt()}},MX=class{async EP(t,i){if(!Fa(t.type))return!1;if(t.useNativePlayback)return!1;const e=t.contentProtection;if(e&&!Tg(e)){if(!cl(e))return!1;if(!await this.Eet(e))return!1}return!0}async Eet(t){return!!t.aes128||(!(!t.playready||!await i.BC())||(!(!t.widevine||!await i.OC())||(!(!t.clearkey||!await i.zC())||!t.fairplay&&await i.GC())))}},TX=class extends en{get Jf(){return this.Qo.Jf}YNt(){this.Co(new Lr(this.Mf,this.Jf))}constructor(t,i){super(i),this.Qo=t}};function NX(t){const e=Zt(t,(t=>t._It)),s=t.filter((t=>t.gIt)),n=i.dit,r=s.map((t=>t.gs)).filter(Yt),h=oX(r,n);return h?Zt(s,(t=>t.gs===h)):e}function DX(t,i){for(const e of i){const i=t.filter((t=>t.wst&&t.wst.XIt&&Lt(t.wst.XIt,e)));if(0!==i.length)return i}}function IX(t){var i;return null!=(i=NX(t))?i:t[0]}function SX(t,i){return t.filter((t=>EX(t,i)))}function EX(t,e){const s=e+pX,n=0===t.cSt.length||t.cSt.some((t=>t.fIt.xLt<i.Jd()-s)),r=0===t.uSt.length||t.uSt.some((t=>t.fIt.xLt<i.Jd()-s));return n&&r}function bX(t,i){if(!i||i.fIt._bt)return!1;const e=i.fIt.Ket;return 0!==e.length&&e[0].GT>t}var LX=class{async FCt(t,i,e){try{const s=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:e},s,t);return new j(n)}catch(t){throw new $i(Ui.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}Qd(){}static qC(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}},Rr=class extends wn{constructor(t,i){super(t),this.data=i}},kX=["message","messageerror","error"],Pr=class extends wn{constructor(t){super(hh.ha),this.error=t}},CX=class extends Pl{get mBt(){return this.pBt.Hd.Bd}yBt(t,i){this.mBt||(void 0!==this.MBt?this.MBt.yBt(t,i):this.TBt.push({Ob:t,NBt:i}))}DBt(){this.mBt||(this.pBt.Xd(),No(this.TBt),void 0!==this.MBt&&this.MBt.DBt())}constructor(t){super(),this.MBt=void 0,this.TBt=[],this.IBt=t=>{if(this.mBt)t.DBt();else{this.MBt=t,this.MBt.yn(kX,this.Ds);for(const i of this.TBt)t.yBt(i.Ob,i.NBt);No(this.TBt)}},this.SBt=t=>{if(this.mBt)return;const i=t instanceof g?t:new g("Could not create Worker.");this.Co(new Pr(i)),this.DBt()},this.pBt=new na,t(this.pBt.Hd).then(this.IBt,this.SBt)}};var xX=class extends Pl{yBt(t,i){i?this.MBt.postMessage(t,i):this.MBt.postMessage(t)}DBt(){this.Vo(),this.MBt.removeEventListener("message",this.EBt),this.MBt.removeEventListener("messageerror",this.bBt),this.MBt.removeEventListener("error",this.H3),this.MBt.terminate()}constructor(t,i){super(),this.EBt=t=>{this.Co(new Rr("message",t.data))},this.bBt=t=>{this.Co(new Rr("messageerror",t.data))},this.H3=t=>{null==t.preventDefault||t.preventDefault.call(t);const i=t.error instanceof g?t.error:new g(t.message);this.Co(new Pr(i)),this.DBt()},this.MBt=new ed(t,i),this.MBt.addEventListener("message",this.EBt),this.MBt.addEventListener("messageerror",this.bBt),this.MBt.addEventListener("error",this.H3)}},OX=0,jX=class extends Pl{yBt(t,i){i?this.LBt.contentWindow.postMessage({type:"message",data:t},"*",i):this.LBt.contentWindow.postMessage({type:"message",data:t},"*")}DBt(){var t;this.LBt.removeEventListener("load",this.kBt),self.removeEventListener("message",this.CBt),null==(t=this.LBt.contentWindow)||t.postMessage({type:"terminate"},"*"),sh(this.LBt)}constructor(t,e){super(),this.kBt=()=>{this.LBt.removeEventListener("load",this.kBt),this.LBt.contentWindow.postMessage({type:"initialize",id:this.CT,script:this.xBt},"*")},this.CBt=t=>{t.origin===this.OBt&&t.data.id===this.CT&&("initialized"===t.data.type||("error"===t.data.type?(this.Co(new Pr(new g(t.data.data.message))),this.DBt()):this.Co(new Rr("message",t.data.data))))},this.CT=OX++,this.xBt=t;const s=i.Dh("iframe.html",e);this.LBt=function(t){const i=h.createElement("iframe");return i.width="0",i.height="0",i.style.display="none",i.role="",i.src=t,h.body.appendChild(i),i}(s.href),this.OBt=s.origin,this.LBt.addEventListener("load",this.kBt),self.addEventListener("message",this.CBt)}};function zX(t,e,s){const n=i.IA(t,e);return new CX((t=>async function(t,e,s,n){let r;try{return r=new xX(t,s),await UX(r,n),r}catch(t){null==r||r.DBt(),Ao(t)}if(RX&&IB){let e;try{const s=await i._O.SI({zu:t,lS:Nr.GET,fS:Uv.Ru,Hd:n});e=await s.DS(n)}catch(t){Ao(t)}if(e){let t;try{const i=IB([e],{type:"application/javascript"});return t=URL.createObjectURL(i),r=new xX(t,s),await UX(r,n),r}catch(t){null==r||r.DBt(),Ao(t),RX=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return r=new jX(t,e),await UX(r,n),r}catch(t){throw null==r||r.DBt(),t}}(n,e,s,t)))}var PX,BX,RX=!0;async function UX(t,i){const e=await t.df(["message","error"],i);if("error"===e.type)throw function(t){return new $i(Ui.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(e.error);if(!function(t){return Dd(t)&&"8.0.0"===t.jBt}(e.data))throw new $i(Ui.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (8.0.0).");return e}!function(t){t.zBt="FCt",t.PBt="lxt"}(PX||(PX={})),function(t){t.BBt="RBt",t.UBt="QBt"}(BX||(BX={}));var QX=class{FBt(){const t=zX(this.YBt,this.GBt,{name:"THEOplayer decrypt worker"});return t.yn("message",this.VBt),t.yn("error",this.WBt),t}FCt(t,i,e){const s=""+ ++this.HBt,n={qBt:PX.zBt,XBt:s,ZBt:t,KBt:i,JBt:e},r=new Rs;return this.$Bt.set(s,r),null!=this.MBt||(this.MBt=this.FBt()),this.MBt.yBt(n),r.Zb}Qd(t){void 0===t&&(t=new pe),this.$Bt.forEach((i=>i.qb(t))),this.$Bt.clear(),this.MBt&&(this.MBt.DBt(),this.MBt=void 0)}constructor(t){this.MBt=void 0,this.HBt=0,this.$Bt=cs(),this.VBt=t=>{const i=t.data,e=i.tRt,s=this.$Bt.get(e);if(s)if(this.$Bt.delete(e),i.iRt===BX.BBt)s.Wb(i.eRt);else if(i.iRt===BX.UBt){const t=i.sRt,e=i.nRt?new g(i.nRt):void 0,n=new $i(Ui.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt. (code: "+t+")",e);s.qb(n)}},this.WBt=t=>{const i=new $i(Ui.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.Qd(i)},this.GBt=t;try{this.YBt=i.IA("theoplayer.d.js",t)}catch(t){throw new $i(Ui.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function FX(t){return LX.qC()?new LX:new QX(t)}function YX(t){const i=Zt(t.boxes,VL);if(!i)return;const e=Zt(i.boxes,WL);return e?e.handlerType:void 0}function GX(t){const i=new Sy;return i.boxes.push(...t.boxes),i}function VX(t){const i=new qp;return i.boxes.push(...t.boxes),i}var WX=8;function HX(t,i){const e=function(t){const i=new ny;return i.boxes.push(...t.boxes),i}(t),s=XX(i);for(let t=0;t<e.boxes.length;t++){const n=e.boxes[t];if(n===i)e.boxes[t]=new pp(new j(i.getSize()-WX));else if(HL(n)){const i=n,r=Ka(i.boxes,(t=>t instanceof Wp&&t.trackId===s));if(r>=0){const s=i.boxes[r],n=VX(i);n.boxes[r]=new pp(new j(s.getSize()-WX)),e.boxes[t]=n}}}return e}function qX(t,i){const e=function(t){const i=new ly;return i.boxes.push(...t.boxes),i}(t);for(let t=0;t<e.boxes.length;t++){const s=e.boxes[t];if(ZL(s)){const n=Zt(s.boxes,KL);n&&n.trackId===i&&(e.boxes[t]=new pp(new j(s.getSize()-WX)))}}return e}function XX(t){return Zt(t.boxes,GL).trackId}function ZX(t,i,e,s){const n=Zt(t.boxes,KL),r=e._D(i).WN();let h=qo.ZERO;for(const i of t.boxes){if(i instanceof ru){h=R_(i.baseMediaDecodeTime,r),i.baseMediaDecodeTime=i.baseMediaDecodeTime.subtract(h);break}if(i instanceof oy){h=R_(qo.fromNumber(i.baseMediaDecodeTime),r),i.baseMediaDecodeTime-=h.toNumber();break}}if(h.isZero())return;const o=Zt(t.boxes,JL);if(void 0!==o&&o.samples.length>0){const t=o.samples;if(!o.flags.sampleDurationPresent){o.flags.sampleDurationPresent=!0;const i=null!=s?s:n.defaultSampleDuration;for(const e of t)e.duration=i}t[0].duration+=h.toNumber(),o.samples=t}}var KX="Mp4Transmuxer",JX=class extends Hq{ujt(t,i){Bo(i);const e=t.bIt,s=Tk(ha(t.ubt.zm.zm));if(!s)throw new g("Mp4Transmuxer - Unable to parse "+e.Rg+" MP4 initializer.");this.pJ=s;const n=function(t){let i,e;for(const s of t.Z)i||(i=s.AK),e||(e=s.wK);if(i||e)return{XIt:i,ZIt:e,AEt:void 0};return}(s);n&&this.ljt(e,n);const r=function(t){for(const i of t.Z)if(void 0!==i.vK)return i.vK;return}(s);void 0!==r&&this.fjt(e,r);const h=function(t){var i;const e=xy(t),s=Zt(e.boxes,FL),n=s.boxes.filter(YL),r=Zt(n,(t=>YX(t)===Lp.AUDIO)),h=Zt(n,(t=>YX(t)===Lp.VIDEO)),o={XIt:{Qp:r?XX(r):void 0},ZIt:{Qp:h?XX(h):void 0}},a=null==(i=Zt(s.boxes,HL))?void 0:i.boxes.filter(qL);var u,c;const d=a?{XIt:null!=(u=Zt(a,(t=>t.trackId===o.XIt.Qp)))?u:void 0,ZIt:null!=(c=Zt(a,(t=>t.trackId===o.ZIt.Qp)))?c:void 0}:void 0;var l,f;if(d&&(o.XIt.gM=null==(l=d.XIt)?void 0:l.defaultSampleDuration,o.ZIt.gM=null==(f=d.ZIt)?void 0:f.defaultSampleDuration),!r||!h)return{XIt:r?t:void 0,ZIt:h?t:void 0,XD:o};const _=GX(e),g=GX(e),w=e.boxes.indexOf(s);_.boxes[w]=HX(s,h),g.boxes[w]=HX(s,r);const A=_.serialize().join(),v=g.serialize().join();return{XIt:A,ZIt:v,XD:o}}(t.ubt.zm.zm);if(this.rRt=h.XD,h.ZIt){const i=Zt(s.Z,(t=>t.Qp===h.XD.ZIt.Qp)),e={Rg:"vjt",zm:{Rg:ji.aq,zm:h.ZIt},aht:pg.pm,lbt:t.lbt,mjt:{wst:'video/mp4; codecs="'+i.wK+'"',nbt:t.nbt},GT:t.GT,bIt:t.bIt,BCt:t.ubt.BCt};this.kOt(e)}if(h.XIt){const i=Zt(s.Z,(t=>t.Qp===h.XD.XIt.Qp)),e={Rg:"vjt",zm:{Rg:ji.aq,zm:h.XIt},aht:pg.ym,lbt:t.lbt,mjt:{wst:'audio/mp4; codecs="'+i.AK+'"',nbt:t.nbt},GT:t.GT,bIt:t.bIt,BCt:t.ubt.BCt};this.kOt(e)}return Promise.resolve()}async djt(t,i){Bo(i);const e=t.wot.BCt;he.qp(KX,"Transmuxing fMP4: "+E(e.ovt));const s=t.wot.zm,n=$X(s.zm,this.pJ),r=kc(n.map((t=>t.s9)),oA);if(void 0!==r&&(e.n9=r,this.gjt(t.bIt)),!this.Ikt.ikt(t.lbt)){const s=Ri.mD(e.GT);if(n.length>0){const i=kc(n.map((t=>t.hRt)),oA);for(const e of this.ejt)this.Ikt.fkt(t.lbt,e,i,s,!1);this.gjt(t.bIt)}this.Ikt.ikt(t.lbt)||await dt(this.Ikt.skt(t.lbt),i)}const h=this.Ikt.ukt(t.lbt),o=e.n9?this.Ikt.ckt(e.n9,e).vN():e.GT,a=qq(e,o);var u;const c={YOt:a,GOt:Xq(e,a),GT:o,ct:null!=(u=e.ct)?u:0,UD:h.vN(),lbt:t.lbt,bIt:t.bIt,BCt:t.wot.BCt},d=function(t,i){if(void 0===i.XIt.Qp)return{XIt:void 0,ZIt:t};if(void 0===i.ZIt.Qp)return{XIt:t,ZIt:void 0};const e=xy(t),s=GX(e),n=GX(e);for(let t=0;t<e.boxes.length;t++){const r=e.boxes[t];XL(r)&&(s.boxes[t]=qX(r,i.ZIt.Qp),n.boxes[t]=qX(r,i.XIt.Qp))}const r=s.serialize().join(),h=n.serialize().join();return{XIt:r,ZIt:h}}(s.zm,this.rRt);if(d.ZIt){var l;const i=this.rRt.ZIt.Qp,s=Zt(this.pJ.Z,(t=>t.Qp===i)),h=Zt(n,(t=>t.Qp===i)),o=this.oRt(d.ZIt,s,h,null==(l=this.rRt)?void 0:l.ZIt.gM,e);this.aRt=s,this._jt(t.bIt,e,h.s9.bN(r));const a=Tt({Rg:"wot",zm:{Rg:ji.aq,zm:o},aht:pg.pm},c);this.kOt(a)}if(d.XIt){const t=Tt({Rg:"wot",zm:{Rg:ji.aq,zm:d.XIt},aht:pg.ym},c);this.kOt(t)}this.uRt=e,this.cRt=n}oRt(t,i,e,s,n){if(!function(t){return Ir(t)?t.abt:0===t.Ubt&&t.Bbt.abt}(n))return t;if(!this.uRt||!this.aRt||!this.cRt)return t;const r=this.aRt.Qp,h=Zt(this.cRt,(t=>t.Qp===r)),o=this.Ikt.ckt(h.dRt,this.uRt),a=this.Ikt.ckt(e.s9,n).bN(o)._D(i.kp);if(a.TN(Ri.zN))return t;if(a.mN(Ri.mD(.5)))return t;const u=Ir(n)?n:n.Bbt;return he.rSt(KX,"Stretching first video frame of segment #"+u.GEt+" to fill gap of "+a.vN()+"s"),function(t,i,e,s){const n=xy(t),r=Zt(n.boxes,XL);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof Is&&ZX(t,i,e,s);const n=r.getSize();if(n!==t){const i=n-t;for(const t of r.boxes)t instanceof Is&&$L(t,i)}}return n.serialize().join()}(t,i.kp,a,s)}constructor(...t){super(...t),this.pJ=void 0,this.rRt=void 0,this.uRt=void 0,this.cRt=void 0,this.aRt=void 0}};function $X(t,i){const e=il(no.fp(ha(t)),Po.Jv);if(!e)throw new g("Mp4Transmuxer - Unable to parse segment or part.");return function(t,i){const e=[];for(const n of t.Z){if(!n.IM||0===n.DM.length||0===n.DM[0].CM.length)continue;const t=n.np.Qp,r=Zt(i.Z,(i=>i.Qp===t));let h=0,o=1/0,a=0;const u=n.np.gM||0;for(const t of n.DM)for(const i of t.CM){const t=i.xM||0,e=h+t;var s;h+=null!=(s=i.ct)?s:u;const n=h+t;e<o&&(o=e),n>a&&(a=n)}const c=Ri.xN(n.IM.IM,r.kp);e.push({Qp:t,hRt:c,s9:c.ST(Ri.ON(o,r.kp)),lRt:c.ST(Ri.ON(h,r.kp)),dRt:c.ST(Ri.ON(a,r.kp))})}return e}(e,i)}var tZ,iZ="MpegtsTransmuxer",eZ=class extends JX{ujt(t,i){return super.ujt(t,i)}hjt(t,i){if(super.hjt(t,i),this.pit.fRt())return;var e;const s=null!=(e=null==i?void 0:i.ovt)?e:t.ovt;if(!s)return;/\.(ts|aac|mp3)/i.test(s.jM)&&this.pit._Rt()}gRt(t){let i;return t.bIt===this.wRt&&this.ARt.has(t.lbt)?i=this.ARt.get(t.lbt):(i=_X(t.wot.zm.zm),this.wRt=t.bIt,this.ARt.set(t.lbt,i)),i}async djt(t,i){Bo(i);const e=this.gRt(t),s=t.wot;if(e!==ec.Wjt&&e!==ec.Hjt)return super.djt(t,i);if(s.BCt.nbt.some(nZ))throw new $i(Ui.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.pit._Rt();let r;e===ec.Wjt?(he.qp(iZ,"Transmuxing MPEG-TS: "+E(s.BCt.ovt)),r=await n.vRt({data:s.zm.zm,metadata:this.mRt})):(he.qp(iZ,"Transmuxing raw audio: "+E(s.BCt.ovt)),r=await n.pRt({data:s.zm.zm,metadata:this.mRt})),Bo(i),this.ljt(t.bIt,{XIt:r.metadata.audio_codec,ZIt:r.metadata.video_codec,AEt:void 0}),r.metadata.video_frame_rate&&this.fjt(t.bIt,r.metadata.video_frame_rate);const h=rZ(r.metadata.first_decode_timestamp),o=rZ(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?rZ(r.metadata.first_video_presentation_timestamp):void 0;if(s.BCt.n9=o,this.gjt(t.bIt),void 0!==a&&this._jt(t.bIt,s.BCt,function(t,i){let e=t.bN(i);return e.DN(Ri.zN)&&(e=e.ST($n())),e}(a,o)),!this.Ikt.ikt(t.lbt)){const e=Ri.mD(s.BCt.GT);for(const i of this.ejt)this.Ikt.fkt(t.lbt,i,h,e,!0);this.gjt(t.bIt),this.Ikt.ikt(t.lbt)||await dt(this.Ikt.skt(t.lbt),i)}const u=this.Ikt.lkt(h,s.BCt);this.mRt=r.metadata;const c=this.Ikt.ckt(o,s.BCt).vN(),d=qq(s.BCt,c);var l;const f={YOt:d,GOt:Xq(s.BCt,d),GT:c,ct:null!=(l=s.BCt.ct)?l:0,UD:u.vN(),lbt:t.lbt,bIt:t.bIt,BCt:s.BCt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.ejt){const i=Tt({Rg:"wot",zm:void 0,aht:t},f);this.kOt(i)}return}const _=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.yRt||this.MRt!==t.lbt||!Gi(this.yRt,r.data.audio_init))){const i=this.Ikt.ckt(s.BCt.n9,s.BCt).vN(),e={Rg:"vjt",zm:{Rg:ji.aq,zm:r.data.audio_init},aht:pg.ym,lbt:t.lbt,mjt:{wst:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',nbt:s.BCt.nbt},GT:i,bIt:t.bIt,BCt:s.BCt};this.yRt=r.data.audio_init,this.MRt=t.lbt,this.kOt(e)}const i=Tt({Rg:"wot",zm:{Rg:ji.aq,zm:r.data.audio_media},aht:pg.ym},f);this.kOt(i)}else if(t.wot.BCt.zbt&&qt(this.ejt,pg.ym)){const t=Tt({Rg:"wot",zm:void 0,aht:pg.ym},f);this.kOt(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.TRt||this.NRt!==t.lbt||!Gi(this.TRt,r.data.video_init))){const i=this.Ikt.ckt(s.BCt.n9,s.BCt).vN(),e={Rg:"vjt",zm:{Rg:ji.aq,zm:r.data.video_init},aht:pg.pm,lbt:t.lbt,mjt:{wst:'video/mp4; codecs="'+r.metadata.video_codec+'"',nbt:s.BCt.nbt},GT:i,bIt:t.bIt,BCt:s.BCt};this.TRt=r.data.video_init,this.NRt=t.lbt,this.DRt=Tk(ha(r.data.video_init)),this.kOt(e)}const i=this.DRt.Z[0],e=$X(r.data.video_media,this.DRt)[0],n=this.oRt(r.data.video_media,i,e,void 0,s.BCt);this.aRt=i;const h=Tt({Rg:"wot",zm:{Rg:ji.aq,zm:n},aht:pg.pm},f);this.kOt(h),_.push(e)}else if(t.wot.BCt.zbt&&qt(this.ejt,pg.pm)){const t=Tt({Rg:"wot",zm:void 0,aht:pg.pm},f);this.kOt(t)}this.uRt=s.BCt,this.cRt=_}Xd(){this.yRt=void 0,this.TRt=void 0,this.MRt=-1,this.NRt=-1,super.Xd()}constructor(t,i,e,s){super(i,e,s),this.mRt=void 0,this.yRt=void 0,this.TRt=void 0,this.DRt=void 0,this.MRt=-1,this.NRt=-1,this.wRt=void 0,this.ARt=pt(),this.pit=t}},sZ=class{Kyt(t,i,e){return new eZ(this,t,i,e)}};function nZ(t){return t.lS===Yo.mEt}function rZ(t){return Ri.xN(qo.fromBits(t.low,t.high),t.base)}!function(t){t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4"}(tZ||(tZ={}));var hZ=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=Vt.vE;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module(Al("AGFzbQEAAAA="))}catch(t){return!1}}();return hZ=()=>t,t};var oZ=class{vRt(t){return this.IRt(tZ.MPEGTS_TO_FMP4,t)}pRt(t){return this.IRt(tZ.RAW_AUDIO_TO_FMP4,t)}FBt(){const t=zX(this.YBt,this.GBt,{name:"THEOplayer transmux worker"});return t.yn("message",this.VBt),t.yn("error",this.WBt),t}IRt(t,i){const e=++this.HBt,s={type:t,id:e,input:i},n=new Rs;return this.$Bt.set(e,n),this.MBt.yBt(s),n.Zb}Qd(t){void 0===t&&(t=new pe),this.$Bt.forEach((i=>i.qb(t))),this.$Bt.clear(),this.MBt.DBt()}constructor(t){this.HBt=0,this.$Bt=pt(),this.VBt=t=>{const i=t.data;if(void 0!==i.requestId){const t=this.$Bt.get(i.requestId);if(!t)return;this.$Bt.delete(i.requestId),i.success?t.Wb(i.output):t.qb(new $i(i.errorCode,i.error))}else i.success||this.Qd(new $i(i.errorCode,i.error))},this.WBt=t=>{const i=new $i(Ui.MEDIA_DECODE_ERROR,t.error.message,t.error);this.Qd(i)},this.GBt=t;const e=hZ()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.YBt=i.IA(e,t)}catch(t){throw new $i(Ui.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.MBt=this.FBt()}},aZ=class extends sZ{fRt(){return void 0!==this.MBt}_Rt(){var t;return null!=(t=this.MBt)?t:this.MBt=new oZ(this.SRt)}Qd(){this.MBt&&(this.MBt.Qd(),this.MBt=void 0)}constructor(t){super(),this.SRt=t,this.MBt=void 0}},uZ=class{h9(){return new aZ(this.SRt)}constructor(t){this.SRt=t}},cZ=class extends yX{A_(){if(DR(this.sA))return this.sA.A_()}get g_(){return!1}set g_(t){}async gn(){var t;await super.gn(),null==(t=this.VNt)||t.gn()}constructor(t,i,e,s,n,r,h,o){super(t,i,e,s,n,r,h,o),Vt.WE&&(this.VNt=new jR(this))}},dZ=class extends cZ{async gn(){await super.gn(),await this.dP.cP(this.sA)}constructor(t,i,e,s,n,r,h,o){const a=new uc(t);super(a.SP(pg.pm),i,e,s,n,r,h,o),this.dP=a}},lZ=class extends MX{async EP(t,i){return!!Vk(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(Vt.Ga||Vt.vb))&&super.EP(t,i))}async Eet(t){return(!t.clearkey||!Vt.WE)&&super.Eet(t)}};yN(new class extends lZ{JA(t,i,e,s,n,r,h){return new dZ(i,e,n,r,FX(s.libraryLocation),new uZ(s.libraryLocation),new z($t.Ib.$et,$t.Ib.Jet,$t.Ib.Ket,$t.Ib.ist),s)}bP(){return!0}constructor(...t){super(...t),this.LP=Mt.CA}}),he.Rt=()=>{var t;return Boolean(null==(t=s)?void 0:t.THEOplayerDebugLogsEnabled)};var fZ=class{Cet(t,i){return Promise.resolve(!1)}Oet(t,i){return Promise.resolve(void 0)}bet(t){return Promise.resolve(void 0)}CH(t){return Promise.resolve(void 0)}},_Z=class extends Pl{ERt(){var t;return null==(t=this.bRt)?void 0:t.fIt}Cn(t){D(hu((()=>this.LRt(t)),t))}async LRt(t){await this.RTt.qkt(t),this.kRt&&(this.CRt(this.kRt.ji,this.kRt.Ti),this.kRt=void 0),this.M4=!0}xRt(t,i){this.M4?this.CRt(t,i):this.kRt={ji:t,Ti:i}}CRt(t,i){const e=this.ORt(t,i),s=null==e?void 0:e.cSt[0];s!==this.bRt&&(this.jRt(),void 0!==s&&(this.bRt=s,this.zRt=new Mq(this.RTt,s),this.zRt.JCt()))}jRt(){this.bRt=void 0,this.zRt&&(this.zRt.Qd(),this.zRt=void 0)}ORt(t,i){const e=Zt(this.RTt.Tr.aSt,(e=>void 0!==e.$It&&e.$It.ji===t&&e.$It.Ti===i));return null!=e?e:this.RTt.Tr.aSt[0]}gn(){this.Vo(),this.jRt(),this.RTt.Qd()}constructor(t,i,e){super(),this.bRt=void 0,this.zRt=void 0,this.kRt=void 0,this.PRt=()=>{this.Co(new la)},this.bc=t,this.RTt=new dq(e,new fZ,t.useCredentials,t.src,t.liveOffset),this.RTt.yn(l.dw,this.Ds),this.M4=!1}},gZ=class extends Ys{get ht(){return this.n2.ht}get wf(){return this.n2.wf}get vf(){return this.n2.vf}set vf(t){this.n2.vf=t}get bt(){return this.n2.bt}get Mf(){return this.n2.Mf}set Mf(t){this.n2.Mf=t}get ct(){return this.n2.ct}get If(){return this.n2.If}get bf(){return this.n2.bf}get kf(){return this.n2.kf}get lt(){return this.n2.lt}get xf(){return this.n2.xf}get jf(){return this.n2.jf}get Pf(){return this.n2.Pf}set Pf(t){this.n2.Pf=t}get Uf(){return this.n2.Uf}get Ff(){return this.n2.Ff}get Gf(){return this.n2.Gf}set Gf(t){this.n2.Gf=t}get Hf(){return this.n2.Hf}get Xf(){return this.n2.Xf}set Xf(t){this.n2.Xf=t}get Jf(){return this.n2.Jf}get t_(){return this.n2.t_}get e_(){return this.n2.e_}get Yz(){return this.n2.Yz}get nt(){return this.n2.nt}get r_(){return this.n2.r_}get rt(){return this.n2.rt}get a_(){return this.n2.a_}get c_(){return this.n2.c_}set c_(t){this.n2.c_=t}get f_(){return this.n2.f_}get g_(){return this.n2.g_}set g_(t){this.n2.g_=t}get Vz(){return this.n2.Vz}get cA(){}M_(){return this.n2.M_()}w_(){return this.n2.w_()}A_(){return this.n2.A_()}be(){return this.n2.be()}D_(){return this.n2.D_()}I_(){return this.n2.I_()}m_(){return this.n2.m_()}p_(){return this.n2.p_()}tr(){return this.n2.tr()}ga(t,i,e){return this.n2.ga(t,i,e)}ge(){return this.n2.ge()}T_(){return this.n2.T_()}N_(){return this.n2.N_()}gn(){this.Vo();for(const t of NN)this.n2.fn(t,this.Ds);return this.n2.gn()}constructor(t){super(),this.n2=t;for(const t of NN)this.n2.yn(t,this.Ds)}},wZ=class extends gZ{async ga(t,i,e){await super.ga(t,i,e),t.hlsDateRange&&this.ivt(t,i,e)}ivt(t,i,e){this.BRt=new _Z(t,i,this.RRt),this.BRt.yn(l.dw,this.handleManifestUpdate),this.BRt.Cn(e)}tr(){return this.wCt&&(this.nt.it(this.wCt),this.o3.it(this.wCt),this.wCt.gn(),this.wCt=void 0,this.URt=!1),this.BRt&&(this.BRt.gn(),this.BRt=void 0),this.o3.tr(),super.tr()}gn(){return this.fn(l.mw,this.gBt),this.BRt&&(this.BRt.gn(),this.BRt=void 0),this.o3.gn(),super.gn()}constructor(t,i,e){super(t),this.BRt=void 0,this.URt=!1,this.wCt=void 0,this.handleManifestUpdate=()=>{const t=this.BRt.ERt();if(t){const i=this.Yz;if(i){const e=i.getTime();let s=this.wCt;s||(s=new QH,this.wCt=s),s.Yn(t.fbt,(t=>(t.getTime()-e)/1e3)),!this.URt&&s.L.U>0&&(this.nt.tt(s),this.o3.tt(s),this.URt=!0)}}},this.gBt=()=>{this.BRt&&this.BRt.xRt(this.a_,this.r_)},this.RRt=i,this.LH=e,this.o3=new zr(this),this.yn(l.mw,this.gBt)}};!function(t){vN.kP().CP(t)}((function(t,i,e){return new wZ(t,i,e)}));var Ro=class extends fh{get name(){return"CastError"}constructor(t,i=""){super("An error occurred while casting."),this.errorCode=t,this.description=i}};async function AZ(t){pZ()||await async function(t){if(null==t?void 0:t.Bd)return Promise.reject(new pe);const{Zb:i,Wb:e,qb:n}=function(){let t,i;return{Zb:new Promise(((e,s)=>{t=e,i=s})),Wb:t,qb:i}}(),r=s.__onGCastApiAvailable,h=()=>{s.__onGCastApiAvailable=r,n(new pe)};return s.__onGCastApiAvailable=(i,o)=>{i?e():n(new g(o)),null==t||t.Gd(h),s.__onGCastApiAvailable=r,r&&r(i,o)},null==t||t.Yd(h),i}(t),mZ()||await ri(100,t),mZ()||(i.SA('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await vZ())}var vZ=qc((()=>function(t){return new Promise(((i,e)=>{const s=h.createElement("script");s.onload=()=>i(),s.onerror=t=>e((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(h.head||h.documentElement).appendChild(s)}))}("//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js").catch((()=>{throw new Ro("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}))));function mZ(){return Boolean("undefined"!=typeof cast&&cast.framework)}function pZ(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function yZ(t,i,e,s){if(Yt(i))for(const e of w.keys(i)){if("type"===e||"images"===e)continue;const s=i[e];Yt(s)&&(t[e]=s)}!function(t,i,e,s){if(!Yt(e)&&!Yt(null==i?void 0:i.images))return;t.images=[],e&&t.images.push(new s.Image(e));if(null==i?void 0:i.images)if(Qs(i.images))t.images.push(new s.Image(i.images));else if(Gt(i.images))for(const e of i.images){let i;var n,r;if(Qs(e))i=new s.Image(e);else i=new s.Image(e.src),i.height=null!=(n=e.height)?n:null,i.width=null!=(r=e.width)?r:null;t.images.push(i)}}(t,i,e,s)}function MZ(t,i,e){return void 0===e&&(e=chrome),function(t,i,e){switch(null==t?void 0:t.type){case"movie":{const s=new e.MovieMediaMetadata;return yZ(s,t,i,e),s}case"audio":{const s=new e.MusicTrackMediaMetadata;return yZ(s,t,i,e),!Yt(s.artist)&&Yt(t.artistName)&&(s.artist=t.artistName),s}case"tv-show":{const s=new e.TvShowMediaMetadata;return yZ(s,t,i,e),!Yt(s.title)&&Yt(t.episodeTitle)&&(s.title=t.episodeTitle),!Yt(s.season)&&Yt(t.seasonNumber)&&(s.season=t.seasonNumber),!Yt(s.episode)&&Yt(t.episodeNumber)&&(s.episode=t.episodeNumber),s}default:{const s=new e.GenericMediaMetadata;return yZ(s,t,i,e),s}}}(t,i,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(e))}function jr(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function TZ(t){if(t.items&&t.items.length>0&&t.currentItemId>=0)return Zt(t.items,(i=>i.itemId===t.currentItemId))}var Fo,NZ="urn:x-cast:com.theoplayer.cast";!function(t){t.QRt="theoplayer_receiver_info",t.FRt="theoplayer_trackpropertychange",t.YRt="theoplayer_propertychange"}(Fo||(Fo={}));var DZ;(DZ||(DZ={})).SKIP_AD="SKIP_AD";function IZ(t){h.createElement("img").src=t}var SZ=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function EZ(t){if(!Qs(t))return;const i=t.match(SZ);return i?3600*x(i[1],10)+60*x(i[2],10)+Number(i[3])+(Number(i[4])||0)/1e3:void 0}function bZ(t){if(void 0===t)return;const i=t.match(/^([1-9]?\d|100)%$/);return i?x(i[1])/100:void 0}function Bu(t,i){return"vmap"===t.type||!Yt(t.type)&&!Yt(i)}function LZ(t,i){return"vast"===t.type||!Yt(t.type)&&Yt(i)}var kZ,CZ=class{},xZ=class extends CZ{get GRt(){return this.Ic}VRt(){return null!=this.WRt||(this.WRt=ge(this.Ic,(t=>t.VRt()))),this.WRt}constructor(t){super(),this.Ic=t.sort(((t,i)=>t.yM-i.yM))}},rc=class extends CZ{get o(){return this.HRt}get yM(){return this.qRt}get XRt(){return this.ZRt}constructor(t,i){super(),this.HRt=t,this.qRt=i,this.ZRt=!1}},OZ=class extends rc{get KRt(){return this.JRt}get $Rt(){return this.tUt}get iUt(){return this.eUt}get sUt(){return this.nUt}get lt(){return this.Bz}VRt(){if(void 0===this.rUt){let t,i,e,s=[];for(const n of this.JRt)n.hUt&&(t=n.hUt),n.oUt&&(i=n.oUt),n.aUt&&(e=n.aUt),s=s.concat(n.universalAdIds);this.rUt={sUt:this.sUt,hUt:t,uUt:i,aUt:e,lt:this.lt,cUt:s}}return[this.rUt]}constructor(t,i,e,s,n,r,h){super(t,i),this.tUt=e,this.eUt=s,this.nUt=n,this.JRt=r,this.Bz=h}},hc=class{get dUt(){return this.lUt}get fUt(){return this._Ut}constructor(t,i){this.lUt=t,this._Ut=i}},oc=class{get gUt(){return this.wUt}get AUt(){return this.vUt}get mUt(){return this.pUt}get yUt(){return this.MUt}get Xl(){return this.TUt}set Xl(t){this.TUt=t}get NUt(){return this.DUt}get IUt(){return this.SUt}EUt(){this.SUt=!0}get $Rt(){return this.tUt}constructor(t,i,e,s,n,r){this.wUt=t,this.vUt=i,this.pUt=e,this.MUt=s,this.SUt=!1,this.DUt=n,this.tUt=r}};!function(t){t.bUt="all",t.LUt="any",t.FP="none"}(kZ||(kZ={}));var je,bc=class{get kUt(){return this.CUt}get xUt(){return this.OUt}constructor(t,i){this.CUt=t,this.OUt=i}},jZ=class{get o(){return this.CT}get ji(){return this.lk}get Ti(){return this.fk}get jUt(){return this.zUt}get PUt(){return this.BUt}get RUt(){return this.UUt}get QUt(){return this.FUt}get YUt(){return this.GUt}get VUt(){return this.WUt}get HUt(){return this.qUt}get gUt(){return this.wUt}get AUt(){return this.vUt}get mUt(){return this.pUt}get XUt(){return this.ZUt}get fUt(){return this.KUt}get JUt(){return this.$Ut}constructor(t,i,e,s,n,r,h,o,a,u,c,d,l,f,_,g){this.lk=t,this.fk=i,this.CT=e,this.zUt=s,this.BUt=n,this.UUt=r,this.FUt=h,this.GUt=o,this.WUt=a,this.qUt=u,this.wUt=c,this.vUt=d,this.pUt=l,this.ZUt=f,this.KUt=_,this.$Ut=g}},zZ=class{get id(){return this.CT}get uri(){return this.Ybt}constructor(t,i){this.CT=t,this.Ybt=i}},cr=class{get tQt(){return this.iQt}get eQt(){return this.sQt}get nQt(){return this.rQt}get hQt(){return this.oQt}constructor(t,i,e,s){this.iQt=t,this.sQt=i,this.rQt=e,this.oQt=s}},PZ=class extends rc{get sUt(){return this.nUt}get aQt(){return this.uQt}get cQt(){return this.dQt}get KRt(){return this.JRt}get lQt(){return this.fQt}get _Qt(){return this.gQt}get lt(){return this.Bz}VRt(){return void 0===this.uQt?[]:(null!=this.WRt||(this.WRt=this.uQt.VRt().map((t=>this.wQt(t)))),this.WRt)}wQt(t){let i,e,s;for(const t of this.KRt)t.hUt&&(i=t.hUt),t.oUt&&(e=t.oUt),t.aUt&&(s=t.aUt);const n=t.sUt.concat(this.sUt);let r=t.hUt;if(i&&t.hUt){const e=new cr(t.hUt.AQt.tQt,t.hUt.AQt.eQt,t.hUt.AQt.nQt.concat(i.AQt.nQt),t.hUt.AQt.hQt.concat(i.AQt.hQt));r=t.hUt,r.AQt=e,r.fUt=r.fUt.concat(i.fUt)}let h=t.uUt;if(e&&e.dUt){var o,a;const s=[];for(const t of e.dUt)s.concat(t.yUt.nQt);const n=[];var u,c;for(const e of null!=(u=null==(o=t.uUt)?void 0:o.dUt)?u:[]){var d,l,f;const r=new cr(e.yUt.tQt,e.yUt.eQt,e.yUt.nQt.concat(s),(null!=(l=null==(d=t.hUt)?void 0:d.AQt.hQt)?l:[]).concat(null!=(f=null==i?void 0:i.AQt.hQt)?f:[]));n.push(new oc(e.gUt,e.AUt,e.mUt,r,e.NUt,e.$Rt))}h=new hc(n,(null!=(c=null==(a=t.uUt)?void 0:a.fUt)?c:[]).concat(e.fUt))}let _=t.aUt;if(_){var g;let i=_.kUt;var w,A;s&&s.kUt&&(i=s.kUt),_=new bc(i,(null!=(w=null==(g=t.aUt)?void 0:g.xUt)?w:[]).concat(null!=(A=null==s?void 0:s.xUt)?A:[]))}let v=t.lt;return this.lt&&(v=this.lt),{sUt:n,hUt:r,uUt:h,aUt:_,lt:v,cUt:t.cUt}}constructor(t,i,e,s,n,r,h,o,a){super(t,i),this.nUt=e,this.uQt=s,this.dQt=n,this.JRt=r,this.fQt=h,this.gQt=o,this.Bz=a}},BZ=class{get o(){return this.CT}get vQt(){return this.mQt}get pQt(){return this.yQt}get YUt(){return this.GUt}get hUt(){return this.MQt}get oUt(){return this.TQt}get aUt(){return this.NQt}get universalAdIds(){return this.DQt}constructor(t,i,e,s,n,r,h,o){this.CT=t,this.mQt=i,this.yQt=e,this.GUt=s,this.MQt=n,this.TQt=r,this.NQt=h,this.DQt=o}},RZ=class{get ct(){return this.IQt}get SQt(){return this.EQt}get fUt(){return this._Ut}set fUt(t){this._Ut=t}set AQt(t){this.bQt=t}get AQt(){return this.bQt}get LQt(){return this.kQt}set LQt(t){this.kQt=t}get CQt(){return this.SUt}get Xl(){return this.TUt}set Xl(t){this.TUt=t}get NUt(){return this.DUt}get $Rt(){return this.tUt}EUt(){this.SUt=!0}constructor(t,i,e,s,n,r,h){this.IQt=t,this.EQt=i,this._Ut=e,this.bQt=s,this.kQt=n,this.SUt=!1,this.DUt=r,this.tUt=h}};function ke(t,i){return FZ(t)&&t.getAttribute(i)||void 0}function UZ(t,i){return QZ(t,i,void 0,!1)}function QZ(t,i,e,s){return i===(t.localName?t.localName:t.nodeName)&&(s&&e?e===t.namespaceURI:!e||!t.namespaceURI||e===t.namespaceURI)}function yt(t,i){const e=[];for(let s=0;s<t.childNodes.length;s+=1){const n=t.childNodes.item(s);FZ(n)&&UZ(n,i)&&e.push(n)}return e}function FZ(t){return t&&1===t.nodeType}function YZ(t,i){const e=(new DOMParser).parseFromString(t,i);if(!e||e.getElementsByTagName("parsererror").length>0)throw new g('Invalid document for MIME type "'+i+'"');return e}function GZ(t){return t.replace(/[<>&'"]/g,(t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}}))}function VZ(t){return"data:application/xml,"+encodeURIComponent(t)}function WZ(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}!function(t){t.xQt="mute",t.OQt="unmute",t.Sh="pause",t.jQt="resume",t.zQt="rewind",t.PQt="skip",t.BQt="playerExpand",t.RQt="playerCollapse",t.Ah="fullscreen",t.UQt="exitFullscreen",t.QQt="expand",t.COLLAPSE="collapse",t.Byt="start",t.FQt="firstQuartile",t.YQt="thirdQuartile",t.GQt="midpoint",t.VQt="complete",t.WQt="acceptInvitationLinear",t.HQt="acceptInvitation",t.qQt="timeSpentViewing",t.XQt="otherAdInteraction",t.gw="progress",t.ZQt="creativeView",t.KQt="adExpand",t.JQt="adCollapse",t.$Qt="minimize",t.tFt="close",t.iFt="closeLinear",t.eFt="overlayViewDuration",t.sFt="breakStart",t.nFt="breakEnd",t.ha="error"}(je||(je={}));var HZ=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function qZ(t){return void 0!==t&&-1!==HZ.indexOf(t)}var XZ=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function ZZ(t){return void 0!==t&&-1!==XZ.indexOf(t)}var KZ=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function JZ(t){return void 0!==t&&-1!==KZ.indexOf(t)}function $Z(t,i){if(void 0===t||""===t||void 0===i)return;let e=t.match(/^(\d+):(\d+):(\d+)$/);return e?C(e[1]||"0")+60*C(e[2]||"0")+C(e[3]||"0"):(e=t.match(/^(100|[1-9]\d|\d)%$/),e?C(e[1]||"0")*i/100:void 0)}var Jo,_t,tK=class{get IU(){return this.rFt}get Ku(){return this.hFt}get eventURL(){return this.oFt}constructor(t,i,e){this.rFt=t,this.hFt=i,this.oFt=e}},iK=class{get aFt(){return this.uFt}constructor(t){this.uFt=t}},eK=class extends iK{get tQt(){return this.iQt}get JUt(){return this.$Ut}get cFt(){return this.dFt}constructor(t,i,e,s){super(t),this.dFt=i,this.iQt=e,this.$Ut=s}},sK=class extends iK{constructor(t){super(t)}},nK=class extends iK{constructor(t){super(t)}},Ct={lFt:{Kb:100,Ob:"XML parsing error."},fFt:{Kb:303,Ob:"Empty or invalid VAST error."},_Ft:{Kb:400,Ob:"General linear error"},gFt:{Kb:403,Ob:"Unsupported MIME-type or missing mediafiles error"},wFt:{Kb:500,Ob:"General nonlinear error"},JR:{Kb:900,Ob:"Network error"}},rK=class{get AFt(){return this.vFt}mFt(t){if(!this.AFt)return;const i=this.AFt.replace(/\[ERRORCODE]/,""+t.Kb);IZ(i)}constructor(t){this.vFt=t}},wo=class extends fh{get pFt(){return this.yFt}get MFt(){var t;return null!=(t=this.TFt)?t:900}constructor(t,i,e,s){super(e||i&&hK[i]||t,s),this.yFt=t,this.TFt=i,this.NFt=e}};!function(t){t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general"}(Jo||(Jo={})),function(t){t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED"}(_t||(_t={}));var hK={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};function oK(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case Z.CA:case Z.xA:case Z.kA:return!0;default:return!1}}function aK(t){const i=LM();return!!(oK(t)||t&&i&&(null==i?void 0:i.canPlayType)&&i.canPlayType(t))||(cK("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function uK(t,i){for(const e of i){new rK(e).mFt(t)}}function cK(t){0}var dK,lK=class{get DFt(){return this.IFt}get SFt(){return this.EFt}constructor(t,i){this.IFt=t,this.EFt=i}};!function(t){t.bFt="linear",t.LFt="nonlinear",t.kFt="companion",t.CFt="vmap"}(dK||(dK={}));var fK,vc=class t{async xFt(i,e){if(Bu(i.sources,i.timeOffset)){const s=await t.OFt(i.sources.src,e),n=s&&s.documentElement;if(!n)throw new wo(Jo.NETWORK,_t.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(UZ(n,"VMAP"))return await this.jFt(n,i,e);if(UZ(n,"VAST")){const t=await this.zFt(n,e,!1);if(t){const e=new AK("",!0,!0,t);return[new ih("start",e,fK.bFt,"",[],!1,!0,i)]}return[]}throw new wo(Jo.GENERAL,_t.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if(LZ(i.sources,i.timeOffset))return[new wK(String(i.timeOffset),i,e)];throw new wo(Jo.GENERAL,_t.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async PFt(i,e,s,n){let r;void 0===n&&(n=[]);try{r=await t.OFt(i,e)}catch(t){throw uK(t instanceof wo&&t.MFt===_t.VAST_MALFORMED_RESPONSE?Ct.fFt:Ct.JR,n),t}const h=r&&r.documentElement;if(h&&UZ(h,"VAST"))return await this.zFt(h,e,s,n)}async BFt(t,i,e,s){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new wo(Jo.GENERAL,_t.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.PFt(t.sources.src,s,!1),h=new AK("",!0,!0,r),o=new ih(i,h,fK.bFt,"",[],!1,!0,t);return o.RFt=e,o}static async requestSuccessOnly(t,i){let e;try{e=await i.SI(t)}catch(t){throw new wo(Jo.NETWORK,_t.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!kr(e))throw new wo(Jo.NETWORK,_t.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return e}static async OFt(t,i){const e=new Pc({zu:t,fS:Uv.Ru,lS:Nr.GET}),s=await this.requestSuccessOnly(e,i);try{return function(t){return YZ(t,"text/xml")}(await s.zm())}catch(t){throw new wo(Jo.NETWORK,_t.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async zFt(t,i,e,s){void 0===s&&(s=[]);const n=[],r=[],h=[];if(t&&UZ(t,"VAST")){if(0!==yt(t,"Ad").length){for(const e of yt(t,"Ad"))try{const t=await this.UFt(e,i,s);0===t.yM?n.push(t):r.push(t)}catch(t){h.push(t)}if(0===n.length&&0===r.length&&h.length>0)throw h[0];return 1===n.length&&0===r.length?n[0]:0===n.length&&0!==r.length?new xZ(r):n.length>0||r.length>0?new xZ(r.concat(n)):void 0}if(0!==yt(t,"Error").length){for(const i of yt(t,"Error")){cK(Ct.lFt.Ob);const t=i.textContent;t&&s.push(t),uK(Ct.lFt,s)}throw new wo(Jo.GENERAL,_t.VAST_MALFORMED_RESPONSE,"The Ad Server responded with a VAST Error")}if(e)throw uK(Ct.fFt,s),new wo(Jo.PARSING,_t.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.")}else if(e)throw uK(Ct.fFt,s),new wo(Jo.PARSING,_t.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.")}async jFt(t,e,s){const n=[],r=yt(t,"AdBreak");for(const t of r)try{const i=await this.QFt(t,e,s);i&&n.push(i)}catch(t){i.nit(t)}return n}async UFt(i,e,s){const n=ke(i,"id")||"";let r=aa(ke(i,"sequence"));r||(r=0);const h=yt(i,"InLine"),o=yt(i,"Wrapper");if(0!==o.length)return await this.FFt(o[0],n,r,e,s);if(0!==h.length)return t.YFt(h[0],n,r,s);throw new wo(Jo.PARSING,_t.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static YFt(i,e,s,n){const r=yt(i,"Error")[0];let h;r&&r.textContent&&(h=r.textContent,n.push(h));const o=yt(i,"AdSystem")[0];let a,u="";o&&(u=o.textContent||u);const c=yt(i,"AdTitle")[0];c&&(a=c.textContent||void 0);const d=[];for(const t of yt(i,"Impression"))t.textContent&&d.push(t.textContent);const l=t.GFt(yt(i,"Creatives")[0],u,n);return new OZ(e,s,u,a,d,l,new rK(h))}async FFt(i,e,s,n,r){const h=yt(i,"Error")[0];let o="";h&&h.textContent&&(o=h.textContent,r.push(o));const a=yt(i,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of yt(i,"Impression"))t.textContent&&c.push(t.textContent);const d=yt(i,"VASTAdTagURI")[0];let l="";d&&d.textContent&&(l=d.textContent);const f=await this.PFt(l,n,!0,r),_=yt(i,"Creatives")[0];let g=[];_&&(g=t.VFt(_,u,r));let w=Wa(ke(i,"followAdditionalWrappers"));w||(w=!0);let A=Wa(ke(i,"allowMultipleAds"));A||(A=!0);let v=Wa(ke(i,"fallbackOnNoAd"));return v||(v=!1),new PZ(e,s,c,f,w,g,A,v,new rK(o))}static VFt(i,e,s){const n=[];for(const r of yt(i,"Creative")){let i=ke(r,"id");i||(i="");let h=aa(ke(r,"sequence"));h||(h=0);let o=ke(r,"adId");o||(o="");const a=yt(r,"Linear")[0];let u;a&&(u=t.WFt(a,"wrapper",i,e,s));const c=yt(r,"NonLinearAds")[0];let d,l;if(c)try{l=t.HFt(c,i,e),d=l}catch(t){}const f=yt(r,"CompanionAds")[0];let _;f&&(_=t.qFt(f)),n.push(new BZ(i,o,h,"",u,d,_,[]))}return n}static GFt(i,e,s){const n=[];for(const r of yt(i,"Creative")){let i=ke(r,"id");i||(i="");let h=aa(ke(r,"sequence"));h||(h=0);let o=ke(r,"adId");o||(o="");let a=ke(r,"apiFramework");a||(a="");const u=yt(r,"Linear")[0];let c;if(u)try{c=t.WFt(u,"inline",i,e,s)}catch(t){}const d=yt(r,"NonLinearAds")[0];let l,f;if(d)try{f=t.HFt(d,i,e),l=f}catch(t){}const _=yt(r,"CompanionAds")[0];let g;_&&(g=t.qFt(_));const w=yt(r,"UniversalAdId"),A=t.parseUniversalAdIds(w);n.push(new BZ(i,o,h,a,c,l,g,A))}return n}static WFt(i,e,s,n,r){const h=yt(i,"Duration")[0];let o=0;if(h)o=EZ(h.textContent)||0;else if(!h&&"inline"===e)throw new wo(Jo.PARSING,_t.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const a=ke(i,"skipoffset");let u=-1;if(a){let t=EZ(a);if(void 0===t&&a.indexOf("%")>-1){const i=_.abs(Number(a.replace(/(?![0-9])./g,"")))/100;S(i)||(t=o*i)}void 0!==t&&(u=t)}const c=yt(i,"MediaFiles")[0];let d=[];if(c&&(d=function(t,i){const e=[];for(const s of yt(t,"MediaFile")){const t=ke(s,"delivery"),n=ke(s,"type");if(!n){cK();continue}if(!i(n))continue;let r=aa(ke(s,"width")),h=aa(ke(s,"height"));r||(cK(),r=0),h||(cK(),h=0);const o={delivery:t,type:n,width:r,height:h,contentURL:""+s.textContent};e.push(o)}return e}(c,aK)),"inline"===e&&(!c||0===d.length))throw uK(Ct.gFt,r),new wo(Jo.PARSING,_t.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const l=yt(i,"TrackingEvents")[0];let f=[];l&&(f=t.XFt(l,qZ,"linear"));const g=yt(i,"VideoClicks")[0],w=t.ZFt(g);return new RZ(o,d,f,w,u,s,n)}static ZFt(i){if(!i)return new cr("","",[],[]);const e=yt(i,"ClickThrough")[0];let s,n="";e&&(s=e.textContent||void 0,n=ke(e,"id")||"");const r=t.KFt(yt(i,"ClickTracking")),h=t.KFt(yt(i,"CustomClick"));return new cr(s,n,r,h)}static KFt(t){const i=[];for(const e of t){const t=e.textContent;if(!t)continue;const s=ke(e,"id")||"";i.push(new zZ(s,t))}return i}static XFt(t,i,e){const s=[];for(const n of yt(t,"Tracking")){const r=ke(n,"event");if(!i(r)){cK();continue}let h="";"linear"===e&&(h=ke(t,"offset")||"0");const o=n.textContent;o&&s.push(new tK(r,h,o))}return s}static HFt(i,e,s){const n=[];for(const r of yt(i,"NonLinear")){const i=yt(r,"NonLinearClickThrough")[0];let h;i&&(h=i.textContent||void 0);const o=t.KFt(yt(r,"NonLinearClickTracking")),a=yt(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=ke(a,"creativeType"),i=a.textContent||"",e=yt(a.parentNode,"NonLinearClickThrough")[0];let s="";e&&(s=e.textContent||""),u=new eK(i,t,s,"")}const c=t.JFt(r),d=t.parseHtmlResource(r);if(!u&&!c&&!d){cK();continue}const l=new cr(h,"",o,[]);n.push(new oc(u,c,d,l,e,s))}if(0===n.length)throw new wo(Jo.PARSING,_t.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=yt(i,"TrackingEvents")[0];let h=[];return r&&(h=t.XFt(r,ZZ,"nonlinear")),new hc(n,h)}static parseUniversalAdIds(t){const i=[];for(const r of t){var e;const t=null!=(e=ke(r,"idRegistry"))?e:"";var s,n;const h=null!=(n=null!=(s=ke(r,"idValue"))?s:r.textContent)?n:"";i.push(new lK(t,h))}return i}static qFt(i){let e=ke(i,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(e)||(e=kZ.FP);const s=[];for(const e of yt(i,"Companion")){let i=aa(ke(e,"width")),n=aa(ke(e,"height")),r=ke(e,"id"),h=aa(ke(e,"assetWidth")),o=aa(ke(e,"assetHeight")),a=aa(ke(e,"expandedWidth")),u=aa(ke(e,"rxpandedHeight")),c=ke(e,"apiFramework"),d=ke(e,"adSlotId"),l=aa(ke(e,"pxratio"));const f=yt(e,"AltText")[0];let _=f?f.textContent:"";i||(cK(),i=0),n||(cK(),n=0),r||(r=""),h||(h=0),o||(o=0),a||(a=0),u||(u=0),c||(c=""),d||(d=""),l||(l=1),_||(_="");const g=t.$Ft(e),w=t.JFt(e),A=t.parseHtmlResource(e),v=yt(e,"TrackingEvents")[0];let m=[];v&&(m=t.XFt(v,JZ,"companion"));const p=yt(e,"CompanionClickThrough")[0];let y;p&&(y=p.textContent||void 0);const M=t.KFt(yt(e,"CompanionClickTracking"));(g||w||A)&&s.push(new jZ(i,n,r,h,o,a,u,c,d,l,g,w,A,new cr(y,"",M,[]),m,_))}return new bc(e,s)}static $Ft(t){const i=yt(t,"StaticResource")[0];let e;if(i&&i.parentNode){let t=ke(i,"creativeType");t||(t="");const s=i.textContent,n=yt(i.parentNode,"AltText")[0],r=yt(i.parentNode,"CompanionClickThrough")[0];let h,o="";n&&(o=n.textContent||""),r&&(h=r.textContent||void 0),s&&(e=new eK(s,t,h,o))}return e}static JFt(t){const i=yt(t,"IFrameResource")[0];let e;if(i){const t=i.textContent||"";e=new sK(t)}return e}static parseHtmlResource(t){const i=yt(t,"HTMLResource")[0];let e;if(i){const t=i.textContent||"";e=new nK(t)}return e}async QFt(i,e,s){const n=ke(i,"timeOffset")||"0",r=ke(i,"breakType")||fK.rT;let h=ke(i,"breakId"),o=Wa(ke(i,"repeatAfter"));if(void 0===h&&(h=""),void 0===o&&(o=!1),!(void 0!==Vi.tYt(n)))throw new wo(Jo.PARSING,_t.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=yt(i,"AdSource")[0],u=yt(i,"TrackingEvents")[0];let c=[];u&&(c=t.XFt(u,WZ,"vmap"));let d=ke(a,"id");d||(d="");let l=Wa(ke(a,"allowMultipleAds"));void 0===l&&(l=!0);let f=Wa(ke(a,"followRedirects"));f||(f=!0);const _=yt(a,"AdTagURI")[0];let g="";const w=yt(a,"VASTAdData")[0];if(!_||!_.textContent){if(w){if(w.firstElementChild&&QZ(w.firstElementChild,"VAST")){const t=await this.zFt(w.firstElementChild,s,!1);if(t){const i=new AK(d,l,f,t);return new ih(n,i,r,h,c,o,!1,e)}return}throw new wo(Jo.PARSING,_t.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new wo(Jo.PARSING,_t.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{g=_.textContent;const t=ms(e);return t.sources.src=g,new wK(n,t,s)}catch(t){return}}};!function(t){t.rT="",t.bFt="linear",t.iYt="nonlinear",t.eYt="display"}(fK||(fK={}));var _K,Vi=class{static sYt(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static nYt(t){}static rYt(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static hYt(t){const i=t.split(":");let e=0;return e+=3600*Number(i[0]),e+=60*Number(i[1]),e+=Number(i[2]),e}static oYt(t){if(t<=0)return"00:00:00.000";const i=_.floor(t),e=t-i;return this.aYt(i/3600,2)+":"+this.aYt(i/60%60,2)+":"+this.aYt(i%60,2)+"."+this.aYt(1e3*e,3)}static aYt(t,i){return("00"+_.floor(t)).slice(-i)}static uYt(t,i){const e=this.tYt(t);if(0===e)switch(t){case"start":return 0;case"end":return-1}else{if(2===e)return bZ(t)*i;if(1===e)return EZ(t);if(3===e)return this.rYt(t);if(4===e){const i=Number(t);if(!S(i)&&i>=-1)return i}}}static tYt(t){return"start"===t||"end"===t?0:void 0!==EZ(t.toString())?1:void 0!==bZ(t.toString())?2:void 0!==this.nYt(t.toString())?3:S(Number(t))?void 0:4}};!function(t){t[t.f6=0]="f6",t[t.cYt=1]="cYt",t[t.dYt=2]="dYt",t[t.lYt=3]="lYt",t[t.fYt=4]="fYt"}(_K||(_K={}));var gK,ih=class{get _Yt(){return this.gYt.integration}get wYt(){return this.AYt}get ibt(){return this.vYt}get LQt(){return this.kQt}set LQt(t){this.kQt=t}get fUt(){return this.KUt}get mYt(){return this.pYt}get yYt(){return this.MYt}get ntt(){return this.gYt}get TYt(){return this.RFt.Kl}get W(){return!0}$n(){return Promise.resolve()}get RFt(){return this.NYt}set RFt(t){this.NYt=t}constructor(t,i,e,s,n,r,h,o){this.kQt=-1,this.AYt=i,this.vYt=t,this.DYt=e,this.pYt=s,this.MYt=r,this.KUt=n,this.IYt=h,this.gYt=o}},wK=class{get _Yt(){return this.TUt._Yt}get wYt(){return this.TUt.wYt}get ibt(){return this.TUt.ibt}get LQt(){return this.TUt.LQt}set LQt(t){this.TUt.LQt=t}get fUt(){return this.TUt.fUt}get mYt(){return this.TUt.mYt}get yYt(){return this.TUt.yYt}get ntt(){return this.TUt.ntt}get TYt(){return this.TUt.TYt}get W(){return this.fit}$n(){var t;return null!=(t=this.SYt)?t:this.SYt=this.wit()}async wit(){const t=new vc;this.TUt=await t.BFt(this.ntt,this.ibt,this.RFt,this.NS),this.fit=!0}get RFt(){return this.TUt.RFt}set RFt(t){this.TUt.RFt=t}constructor(t,i,e){this.fit=!1,this.NS=e,this.TUt=new ih(t,void 0,"","",[],!1,!1,i)}},AK=class{get o(){return this.CT}get lQt(){return this.EYt}get bYt(){return this.LYt}get GRt(){return this.kYt}constructor(t,i,e,s){this.CT=t,this.EYt=i,this.kYt=s,this.LYt=e}};function vK(t,i){let e;if(t.vastAdsRequest&&(e=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return VZ(t.adsResponse);return}(t.vastAdsRequest)),!e){const i=function(t){const i=t.contentUrl||t.contentId;if(!i)return;const e=t.contentType||"video/mp4",s=qg(e)||Fa(t.contentType)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+Vi.oYt(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+Vi.oYt(t.whenSkippable)+'"':"",h='<MediaFile delivery="'+s+'" type="'+e+'">'+GZ(i)+"</MediaFile>",o=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+GZ(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+h+"</MediaFiles>"+o+"</Linear>",u=t.title?"<AdTitle>"+GZ(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);i&&(e=VZ(i))}const s=t.customData;if(e){const n={integration:null==s?void 0:s.integration,sources:{src:e,type:"vast"},timeOffset:i};return n.integration&&"csai"!==n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}!function(t){t.CYt="error",t.xYt="sourceupdate"}(gK||(gK={}));var mK=class extends wn{constructor(t){super("error"),this.lt=t}},pK=class extends wn{constructor(t,i){super("sourceupdate"),this.bt=t,this.yc=i}},yK=class extends Pl{get Pp(){return this.OYt}jYt(t){this.zYt.jYt(t)}PYt(t){this.zYt.PYt(t)}BYt(t){this.zYt.BYt(t)}RYt(t){this.zYt.RYt(t)}UYt(t){this.OYt.addUpdateListener(t)}QYt(t){this.OYt.removeUpdateListener(t)}FYt(){const t=new Rs,i=new chrome.cast.media.GetStatusRequest;return this.OYt.getStatus(i,(()=>{t.Wb({bt:this.yf(),yc:this.Wa()})}),(i=>t.qb(i))),t.Zb}yf(){var t;return null==(t=this.OYt.customData)?void 0:t.currentSource}Wa(){var t;let i;if(null==(t=this.GYt.YYt())?void 0:t.version){var e;i=null==(e=this.OYt.customData)?void 0:e.sourceDescription}else{var s;const t=null==(s=TZ(this.OYt))?void 0:s.customData;(function(t){return Ut(t)&&t.theoplayer_version>=1&&Yt(t.streamStart)&&Yt(t.isLive)&&Yt(t.sourceDescription)})(t)&&(i=t.sourceDescription),i||(i=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:MK(t)}}(this.OYt.media))}return i}m_(){const t=new chrome.cast.media.PauseRequest;this.OYt.pause(t,El,this.VYt)}y_(){const t=new chrome.cast.media.StopRequest;this.OYt.stop(t,El,this.VYt)}p_(){const t=new chrome.cast.media.PlayRequest;this.OYt.play(t,El,this.VYt)}Sm(t,i){const e=new chrome.cast.media.SeekRequest;return e.currentTime=t,e.resumeState=i?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise(((t,i)=>{this.OYt.seek(e,t,(t=>{var e;i(new Ro(jr(t.code),null!=(e=t.description)?e:void 0))}))}))}Wf(t){this.zYt.W8(NZ,function(t){return{type:Fo.YRt,properties:{playbackRate:t}}}(t)).catch(this.WYt)}HYt(t){const i=new chrome.cast.media.EditTracksInfoRequest(t);this.OYt.editTracksInfo(i,El,this.VYt)}qYt(){return this.OYt.getEstimatedTime()}XYt(){return this.OYt.getEstimatedBreakClipTime()}ZYt(){return this.OYt.getEstimatedBreakTime()}KYt(){this.zYt.W8("urn:x-cast:com.google.cast.media",{type:DZ.SKIP_AD,requestId:this.JYt++,mediaSessionId:this.OYt.mediaSessionId}).catch(this.WYt)}gn(){this.Vo()}constructor(t,i,e){super(i),this.JYt=0,this.WYt=t=>{this.Co(new mK(t))},this.VYt=t=>{var i;const e=new Ro(jr(t.code),null!=(i=t.description)?i:void 0);this.WYt(e)},this.GYt=t,this.zYt=i,this.OYt=e}};function MK(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?ge(t.breaks,(i=>function(t,i){const e=[];if(t.isWatched)return e;for(const s of t.breakClipIds){const n=Zt(i,(t=>t.id===s));if(n){const i=vK(n,t.position);i&&e.push(i)}}return e}(i,t.breakClips))):[]}var nu,TK=class{$Yt(t,i){this.GYt.addMessageListener(t,i)}tGt(t,i){this.GYt.removeMessageListener(t,i)}W8(t,i){return new Promise(((e,s)=>{this.GYt.sendMessage(t,i,e,(t=>{var i;s(new Ro(jr(t.code),null!=(i=t.description)?i:void 0))}))}))}gn(){}constructor(t){this.GYt=t}};function NK(t){return"vmap"===t||"adrule"===t}function DK(t){if(t)return Qs(t)&&""!==t?{src:Va(t),type:void 0}:function(t){return Ut(t)&&Boolean(t.src)}(t)&&""!==t.src?{src:Va(t.src),type:IK(t.type)}:void 0}function IK(t){if(Qs(t)){const i=t.toLowerCase();switch(i){case"vast":case"vmap":case"adrule":return i;default:return void is("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||is("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function oh(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return SZ.test(t)}(t))return Vi.hYt(t);if(SK(t))return t}return Number(t)>=0?Number(t):void 0}}function SK(t){return new RegExp(/^\d{1,2}%$/).test(t)}function EK(t){const i=[],e=(t,s)=>{if(Gt(s))for(let i=0,n=s.length;i<n;i++){const n=Ut(s[i])&&s[i]?String(i):"";e(t+"["+encodeURIComponent(n)+"]",s[i])}else if(Ut(s))for(const i of w.keys(s))e(t+"["+encodeURIComponent(i)+"]",s[i]);else((t,e)=>{i.push(t+"="+encodeURIComponent(null!=e?e:""))})(t,String(s))};for(const i of w.keys(t))e(encodeURIComponent(i),t[i]);return i.join("&")}!function(t){t.QRt="receiver_info",t.WEt="event",t.iGt="propertychange",t.FRt="trackevent"}(nu||(nu={}));var pi,bK=class{eGt(t){let i;try{i=JSON.parse(t)}catch(t){0}return i}jYt(t){this.sGt.push(t)}PYt(t){To(this.sGt,t)}BYt(t){this.nGt.push(t)}RYt(t){To(this.nGt,t)}rGt(t){this.hGt=t}W8(t,i){return this.oGt.W8(t,i)}gn(){this.oGt.tGt(NZ,this.aGt),No(this.nGt),No(this.sGt),this.hGt=void 0}constructor(t){this.sGt=[],this.nGt=[],this.aGt=(t,i)=>{const e=this.eGt(i);if(e)if(e.type===nu.iGt)for(const t of this.sGt)for(const i of w.keys(e.properties))t(i,e.properties[i]);else if(e.type===nu.WEt)for(const t of this.nGt)t(e.event);else e.type===nu.FRt&&this.hGt&&e.event.trackState&&this.hGt(e.event.trackId,e.event.trackState.targetQualityIds)},this.oGt=t,this.oGt.$Yt(NZ,this.aGt)}};!function(t){t.uGt="medialoadedchange",t.Ew="volumechange",t.CYt="casterror",t.cGt="playererror",t.dGt="targetqualitychanged",t.lGt="receiverinfochanged"}(pi||(pi={}));var LK,kK=class extends wn{constructor(){super("medialoadedchange")}},CK=class extends wn{constructor(t,i){super("volumechange"),this.c_=t,this.Pf=i}},xK=class extends wn{constructor(t){super("casterror"),this.lt=t}},OK=class extends wn{constructor(t){super("playererror"),this.lt=t}},jK=class extends wn{constructor(t,i){super("targetqualitychanged"),this.Qp=t,this.fGt=i}},zK=class extends wn{constructor(){super("receiverinfochanged")}},PK=class extends Pl{_Gt(t,i,e){this.zYt.W8(NZ,function(t,i,e){return{type:Fo.FRt,trackID:t,trackType:i,properties:{targetQuality:e}}}(t,i,e)).catch(this.WYt)}gGt(){this.oGt.$Yt(NZ,this.wGt),this.zYt.W8(NZ,{type:Fo.QRt}).catch(El)}YYt(){return this.AGt}vGt(){return this.GYt.getSessionObj()}mGt(t){!this.pGt&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this.pGt=new yK(this,this.zYt,t),this.yGt(),this.Co(new kK),this.pGt.UYt(this.MGt))}TGt(){return this.pGt}async NGt(t){const i=function(t){const i=function(t,i,e,s){const n=pD(t)||"",r=vD(t)||"",h=new chrome.cast.media.MediaInfo(n,r);return h.metadata=MZ(t.metadata,t.poster),h.streamType=s,function(t,i,e){const s=[],n=[];let r,h=0,o=0;for(const t of i){const i=DK(t.sources);if(i)if(Bu(i,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=i.src;else if(LZ(i,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const d=null!=(u=Vi.uYt(r,e))?u:0,l=void 0!==c?Vi.uYt(c,e):void 0,f=new chrome.cast.media.BreakClip("bc"+o++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=i.src,f.whenSkippable=l,f.customData={integration:t.integration};let _=Zt(n,(t=>t.position===d));void 0===_&&(_=new chrome.cast.media.Break("b"+h++,[],d),n.push(_)),_.breakClipIds.push(f.id),s.push(f)}else 0;else 0}t.breakClips=s,t.breaks=n,t.vmapAdsRequest=r}(h,i,e),h}(t.DGt,t.Oc,t.ct,t.uZ),e=new chrome.cast.media.LoadRequest(i);return e.autoplay=!0,e.currentTime=t.Mf,e.customData=t.IGt,e}(t);let e;try{e=await this.GYt.loadMedia(i)}catch(t){e=t}if(e)throw new Ro(jr(e))}Rf(t){this.vGt().setReceiverMuted(t,El,this.SGt)}l_(t){this.vGt().setReceiverVolumeLevel(t,El,this.SGt)}EGt(){return this.vGt().receiver.friendlyName}gn(){this.Vo(),this.GYt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.bGt),this.vGt().removeUpdateListener(this.yGt),this.oGt.tGt(NZ,this.wGt),this.zYt.gn(),this.oGt.gn()}constructor(t){super(),this.AGt=void 0,this.WYt=t=>{this.Co(new xK(t))},this.LGt=(t,i)=>{"error"===t&&this.Co(new OK(i))},this.kGt=(t,i)=>{this.Co(new jK(t,i))},this.wGt=(t,i)=>{const e=JSON.parse(i);e.type===nu.QRt&&(this.AGt=e.info,this.Co(new zK))},this.yGt=()=>{const t=this.vGt(),{level:i,muted:e}=t.receiver.volume;this.Co(new CK(null!=i?i:void 0,null!=e?e:void 0))},this.bGt=()=>this.mGt(this.GYt.getMediaSession()),this.MGt=t=>{var i;t||(null==(i=this.pGt)||i.QYt(this.MGt),this.pGt=void 0,this.Co(new kK))},this.SGt=t=>{var i;const e=new Ro(jr(t.code),null!=(i=t.description)?i:void 0);this.WYt(e)},this.GYt=t,this.GYt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.bGt),this.oGt=new TK(t.getSessionObj()),this.zYt=new bK(this.oGt),this.zYt.jYt(this.LGt),this.zYt.rGt(this.kGt),this.vGt().addUpdateListener(this.yGt),this.yGt(),this.gGt();const i=this.GYt.getMediaSession();i&&this.mGt(i)}};(LK||(LK={})).CGt="statechange";var Oc,BK=class extends wn{constructor(t){super("statechange"),this.rdt=t}},RK=class extends Pl{M7(){return this.Ic}Af(){return Ai.SB()}Tf(){return this.EB+this.xGt}d7(){return this.Tf()}mf(){}Td(){return this.VL}Sf(){return this.y0}Ef(){}Yf(){return this.kB}OGt(){}Vf(){return this.CB}Wf(t){this.CB!==t&&(this.CB=t,this.Co(new Oi(this.Qo.Mf,t)))}$f(){return ae.aT}qf(){return Ai.SB()}i_(){return Ai.SB()}s_(){return!1}lf(){return this.lT}o_(){return this._T}n_(){return this.Dl}HYt(t){}u_(){return this.jGt}h_(){return this.zGt}p_(){this.kB=!1}m_(){this.kB=!0}Sm(t){this.EB=t-this.xGt}PGt(){return this.xGt}BGt(t){this.xGt=t}itt(t){this.Ic.itt(t)}y_(){}gn(){this.Vo(),this.lT.gn(),this._T.gn(),this.Dl.gn(),this.Ic.gn()}constructor(t,i,e,s,n,r,h,o,a){super(),this.Qo=t,this.xGt=0,this.lT=new yi,this._T=new yi,this.Dl=new We,this.Ic=new qh,this.xGt=i,this.EB=e-i,this.VL=s,this.y0=n,this.kB=r,this.CB=h,this.jGt=o,this.zGt=a}};!function(t){t.RGt="ccmodechangerequest",t.UGt="cctargetqualitychangerequest",t.QGt="cctrackchangerequest"}(Oc||(Oc={}));var UK,QK,FK=class extends wn{constructor(t,i,e){super(Oc.RGt),this.track=t,this.trackId=i,this.mode=e}};function YK(t){return"AUDIO"===t.type}function GK(t){return"VIDEO"===t.type}function VK(t){return"TEXT"===t.type}!function(t){t.Ru="TEXT",t.ym="AUDIO",t.pm="VIDEO"}(UK||(UK={})),function(t){t.Mm="SUBTITLES",t.yI="CAPTIONS",t.MI="DESCRIPTIONS",t.Fn="CHAPTERS",t.Nm="METADATA"}(QK||(QK={}));var WK=class extends Pl{get va(){return this.Xa||(this.Xa=ra(this)),this.Xa}get kh(){return this.OT}set kh(t){t!==this.OT&&(this.OT=t,this.Co(new js(this)))}get q(){return this.B0}get L(){return this.R0}get jg(){return this.iR}set jg(t){const i=zi(t);this.iR!==i&&(this.iR=i,this.FGt!==i&&this.Co(new FK(this,this.Mg,i)),this.Co(new Tn(this)))}get YGt(){return this.FGt}set YGt(t){const i=zi(t),e=this.iR!==i;this.iR=i,this.FGt=i,e&&this.Co(new Tn(this))}Pg(t){this.jg=t}GGt(t){}gn(){}tr(){}constructor(t){super(),this.Xa=void 0;const i=t.customData;this.Mg=Number(t.trackId)||0,this.o=""+(i&&i.id||this.Mg),this.OT=i&&i.label||t.name||"",this.gs=i&&i.language||t.language||"",this.Og=i&&i.inBandMetadataTrackDispatchType||"",this.zt=i&&i.kind||function(t){switch(t){case QK.Mm:return jo.Mm;case QK.yI:return jo.yI;case QK.MI:return jo.MI;case QK.Fn:return jo.Fn;case QK.Nm:return jo.Nm}return}(t.subtype)||"subtitles",this.Jf=Zs.NONE,this.Rg=i&&void 0!==i.type?function(t){return Ei(t)?t:Kc.DEFAULT}(i.type):Kc.WEBVTT,this.P0=[],this.R0=new $r(this.P0),this.W0=[],this.B0=new $r(this.W0),this.iR=zi(i&&i.mode||Ha.Ch),this.FGt=this.iR}};var HK,qK=class extends wn{constructor(t,i){super(Oc.QGt),this.trackId=t,this.enabled=i}},XK=class extends wn{constructor(t,i){super(Oc.UGt),this.track=t,this.targetQuality=i}};!function(t){t.ym="audio",t.pm="video",t.Ru="text"}(HK||(HK={}));var ZK,KK=class extends Pl{get yg(){return this.fct}get Dg(){return this.lct}set Dg(t){this.VGt(t),this.Co(new XK(this,t))}get Ng(){return this.IT}get kh(){return this.OT}set kh(t){t!==this.OT&&(this.OT=t,this.Co(new js(this)))}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.WGt!==t&&this.Co(new qK(this.Mg,t)),this.Co(new Tn(this)))}get HGt(){return this.WGt}set HGt(t){const i=this.Le!==t;this.Le=t,this.WGt=t,i&&this.Co(new Tn(this))}get va(){return this.Xa||(this.Xa=Fi(this)),this.Xa}get jg(){return this.Rt?"enabled":"disabled"}zT(t){this.Rt=t}GGt(t){if(t.targetQualityIds){const i=[];for(const e of this.IT.og)t.targetQualityIds.indexOf(e.o)>-1&&i.push(e);const e=i.length?i:void 0;this.VGt(e)}}VGt(t){(function(t,i){return!t&&i||t&&!i||t&&i&&!mo(t,i)})(this.lct,t)&&(this.lct=t&&this.IT.bT(t)?t:void 0,this.Co(new Ga(this.lct,this)))}unload(){for(const t of this.IT.og)t.fn("update",this.FIt);this.IT.tr()}constructor(t){super(),this.fct=void 0,this.IT=new Tw,this.lct=void 0,this.Xa=void 0,this.FIt=()=>this.Co(new js(this));const i=t.customData;if(this.Mg=Number(t.trackId)||0,this.o=""+(i&&i.id||this.Mg),this.OT=i&&i.label||t.name||"",this.gs=i&&i.language||t.language||"",this.zt=i&&i.kind||"main",this.Le=i&&i.enabled,this.WGt=this.Le,YK(t)){this.e$=HK.ym;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new RY(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);i.yn("update",this.FIt),this.IT.ST(i)}}else{this.e$=HK.pm;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new BY(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);i.yn("update",this.FIt),this.IT.ST(i)}}}};!function(t){t.qGt="legacy",t.XGt="caf"}(ZK||(ZK={}));var JK=class{Mc(){if(this.ZGt>=this.Ic.length)return;const t=this.Ic[this.ZGt];return this.ZGt+=1,t}lt(){return this.Mc()}constructor(t){this.ZGt=0,this.Ic=t}};function $K(t){var i,e,s;return null!=(s=null==(e=t.wYt)||null==(i=e.GRt)?void 0:i.VRt())?s:[]}var zu,tJ=class{},Gr=class{B7(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{get ads(){return t.Oc.map((t=>t.B7()))},get integration(){return t._Yt},get maxDuration(){return t.KGt},get maxRemainingDuration(){return t.JGt},get timeOffset(){return t.ibt},get customData(){return t.IGt}}}(this)}constructor(){this.Xa=void 0}},iJ=class{get $Gt(){return this.tVt}get t(){return this.Qo}constructor(t,i){this.tVt=t,this.Qo=i}},eJ=class extends Gr{get RFt(){return this.NYt}get Oc(){const t=[];for(const s of this.NYt.iVt)for(const n of $K(s)){var i,e;const r=null!=(e=null==(i=n.aUt)?void 0:i.xUt)?e:[];if(n.hUt&&t.push(this.eVt(n.hUt,r,n.cUt,s.ntt)),n.uUt)for(const i of n.uUt.dUt)t.push(this.sVt(i,r,n.uUt,n.cUt,s.ntt))}return t}eVt(t,i,e,s){const n=Zt(this.nVt,(i=>i.hUt===t));if(void 0!==n)return n;const r=new hJ(t,i,this,this.rVt,e,s);return this.nVt.push(r),r}sVt(t,i,e,s,n){const r=Zt(this.hVt,(i=>i.uUt===t));if(void 0!==r)return r;const h=new rJ(t,i,e,this,this.rVt,s,n);return this.hVt.push(h),h}get _Yt(){return ya.CSAI}get ibt(){const t=this.NYt.Kl;return t>=0?t:this.rVt.t.Td()}get JGt(){let t=0;for(const i of this.NYt.iVt)for(const e of $K(i))e.hUt&&!e.hUt.CQt&&(t+=e.hUt.ct);return this.rVt&&this.rVt.$Gt&&(t+=this.rVt.$Gt.ct-this.rVt.$Gt.Mf),t}get KGt(){let t=0;for(const i of this.NYt.iVt)for(const e of $K(i))e.hUt&&(t+=e.hUt.ct);return t}get IGt(){}constructor(t,i){super(),this.nVt=[],this.hVt=[],this.NYt=t,this.rVt=i}},sJ={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},nJ=class extends tJ{get Xl(){return this.TUt}get ntt(){return this.gYt}get cUt(){return this.DQt}oVt(){return this.aVt}uVt(){this.aVt=!0}cVt(t){return Tt({},sJ,{resourceURI:t.aFt||""})}dVt(t){return Tt({},sJ,{contentHTML:t.aFt.trim(),type:"HTMLResource"})}lVt(t){var i,e;return Tt({},sJ,{clickThrough:(null==(i=t.tQt)?void 0:i.trim())||"",resourceURI:(null==(e=t.aFt)?void 0:e.trim())||"",altText:t.JUt||"",type:"StaticResource"})}fVt(t,i,e){if(!t||!i)return;const s="<img "+(e?"title='"+e+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(i)+"' target='_blank' rel='noopener'>"+s+"</a>"}aUt(t){return t?t.map((t=>{let i;const e={adSlotId:t.VUt||"",height:t.Ti||0,width:t.ji||0};if(t.gUt){var s;const e=this.lVt(t.gUt),n=e.clickThrough||(null==(s=t.XUt)?void 0:s.tQt);i=Tt({},e,{contentHTML:this.fVt(e.resourceURI,n,e.altText)||""})}else if(t.mUt)i=this.dVt(t.mUt);else{if(!t.AUt)return;i=this.cVt(t.AUt)}return xl(i,e)})).filter((t=>void 0!==t)):[]}_Vt(){return this.gVt.$Rt}constructor(t,i,e,s,n,r){super(),this.aVt=!1,this.gVt=t,this.OUt=i,this.TUt=e,this.rVt=s,this.DQt=n,this.gYt=r}},rJ=class extends nJ{get uUt(){return this.gVt}get oUt(){return this.wVt}fa(){const t=this.TUt,i={companions:this.aUt(this.OUt),type:"nonlinear",id:this.gVt.NUt,skipOffset:this.LQt,integration:this.gYt.integration,adSystem:this.gVt.$Rt,get adBreak(){return t.B7()},creativeId:this.gVt.NUt,universalAdIds:this.DQt.map((t=>({adIdRegistry:t.DFt,adIdValue:t.SFt})))};return this.gVt.AUt?xl(this.cVt(this.gVt.AUt),i):this.gVt.mUt?xl(this.dVt(this.gVt.mUt),i):this.gVt.gUt?xl(this.lVt(this.gVt.gUt),i):i}B7(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}AVt(){var t,i;return null!=(i=null==(t=this.gVt.gUt)?void 0:t.aFt)?i:""}vVt(){var t,i,e;return null!=(e=null==(i=this.gVt)||null==(t=i.gUt)?void 0:t.cFt)?e:""}get LQt(){const t=this.gVt.Xl;return t&&t.ntt&&void 0!==t.ntt.skipOffset?Vi.uYt(t.ntt.skipOffset,this.rVt.$Gt.ct):(null==(i=this.gVt.Xl)?void 0:i.LQt)||-1;var i}constructor(t,i,e,s,n,r,h){super(t,i,s,n,r,h),this.wVt=e}},hJ=class extends nJ{get hUt(){return this.gVt}fa(){var t;const i=this.TUt;return{companions:this.aUt(this.OUt),duration:this.gVt.ct,id:this.gVt.NUt,mediaFiles:this.gVt.SQt,skipOffset:this.LQt,type:"linear",integration:this.gYt.integration,adSystem:this.gVt.$Rt,width:void 0,height:void 0,get adBreak(){return i.B7()},clickThrough:null==(t=this.gVt.AQt)?void 0:t.tQt,creativeId:this.gVt.NUt,universalAdIds:this.DQt.map((t=>({adIdRegistry:t.DFt,adIdValue:t.SFt})))}}B7(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}AVt(){return this.gVt.SQt.length>0?this.gVt.SQt[0].contentURL:""}vVt(){return this.gVt.SQt.length>0?this.gVt.SQt[0].type:""}get LQt(){const t=this.gVt.Xl;return t&&t.ntt&&void 0!==t.ntt.skipOffset?Vi.uYt(t.ntt.skipOffset,this.rVt.$Gt.ct):this.gVt.LQt||-1}constructor(t,i,e,s,n,r){super(t,i,e,s,n,r)}};function oJ(t){return t instanceof hJ}!function(t){t.mVt="csai",t.pVt="google-ima",t.so="google-dai",t.yVt="freewheel",t.MVt="mediatailor",t.zS="chromecast",t.E7="theoads"}(zu||(zu={}));var aJ,uJ=class extends ee{fa(){return new cJ(this.H7.B7())}constructor(t){super("TVt",t)}},cJ=class extends vo{constructor(t){super("updatead",t)}},gc=class extends ee{fa(){return new dJ(this.H7.B7())}constructor(t){super("NVt",t)}},dJ=class extends vo{constructor(t){super("adloaded",t)}},lJ=class extends Ys{get Fc(){return void 0!==this.DVt}get P7(){return this.gVt?[this.gVt]:[]}get R7(){var t;return null!=(t=this.DVt)?t:null}get U7(){return ge(this.IVt,(t=>{const i=t.Oc;if(t===this.DVt&&void 0!==this.gVt){const t=i.indexOf(this.gVt);if(t>=0)return i.slice(t+1)}return t.SVt()?[]:i}))}get Q7(){return this.IVt.filter((t=>t===this.DVt||!t.SVt()))}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=kh(this)}n4(t,i,e){throw new b("Scheduling ads while casting is not supported.")}Hm(){this.OYt.KYt()}ett(t){var i;null==(i=this.EVt)||i.ett(t)}Y7(t,i){var e;null==(e=this.EVt)||e.Y7(t,i)}bVt(t){return Zt(this.IVt,(i=>i.o===t))}LVt(t,i,e,s){const n=this.IVt,r=[];let h=!1;for(const n of t){let t=this.bVt(n.id);void 0===t&&(t=new fJ(n),s.push(new Mn(t))),!Yt(t.kVt)&&Yt(e)&&(t.kVt=this.CVt(t.xVt,e));const o=t.Oc;t.Yn(n,i,e,s);const a=t.Oc;for(const t of a)qt(o,t)||(s.push(new Vn(t)),h=!0);r.push(t)}this.IVt=r,h&&s.push(new xh);for(const t of n)qt(r,t)||s.push(new yn(t))}OVt(t,i){const e=this.DVt,s=this.gVt;let n,r;if(t){var h;const{breakId:i,breakClipId:e}=t;n=i?this.bVt(i):void 0,r=e?null==(h=this.DVt)?void 0:h.jVt(e):void 0}if(this.DVt=n,this.gVt=r,n!==e&&(void 0!==e&&(e.zVt=void 0,i.push(new Ss(e))),void 0!==n&&(n.zVt=this.OYt,i.push(new sc(n)))),r!==s){const t=this.Qo.Tf();void 0!==s&&i.push(new nn(s,t)),void 0!==r&&i.push(new ta(r,t))}}CVt(t,i){if(!i||!i.breaks)return;const e=Zt(i.breaks,(i=>i.id===t.id));return e}itt(t){const i=[];for(const t of this.IVt){let e=t.Oc;if(t===this.DVt&&void 0!==this.gVt){const t=e.indexOf(this.gVt);t>=0&&(e=e.slice(t))}else if(t.SVt())continue;for(const t of e){const e=t.PVt();e&&i.push(e)}}for(const e of i)t.n4(e,Ur.F7,!1)}gn(){return this.Vo(),this.OYt.QYt(this.Yr),void 0!==this.DVt&&(this.DVt.zVt=void 0,this.DVt=void 0),this.gVt=void 0,No(this.IVt),Promise.resolve(void 0)}constructor(t,i,e){super(),this.IVt=[],this.DVt=void 0,this.gVt=void 0,this.Xa=void 0,this.Yr=t=>{var i;if(!t)return;const e=this.OYt.Pp,{breakStatus:s}=e,{breakClips:n,breaks:r}=e.media,h=null==(i=TZ(e))?void 0:i.media,o=[];r&&n&&this.LVt(r,n,h,o),this.OVt(s,o);for(const t of o)this.Co(t)},this.Qo=t,this.OYt=i,this.EVt=e,this.OYt.UYt(this.Yr)}},fJ=class extends Gr{get xVt(){return this.BVt}get o(){return this.BVt.id}get Oc(){return this.Ic}get _Yt(){return zu.zS}get KGt(){let t=this.BVt.duration;return void 0===t&&this.Ic.length>0&&(t=co(this.Ic,(t=>t.ct)),S(t)&&(t=void 0)),t}get JGt(){const t=this.KGt;if(void 0!==t&&void 0!==this.zVt){const i=this.zVt.ZYt();if(void 0!==i)return _.max(0,t-i)}return t}get ibt(){return this.BVt.position}get IGt(){}SVt(){return this.BVt.isWatched}jVt(t){return Zt(this.Ic,(i=>i.o===t))}Yn(t,i,e,s){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const h=t.breakClipIds[r],o=Zt(i,(t=>t.id===h));if(void 0===o)continue;const a=r<this.Ic.length?this.Ic[r]:new _J(o,this);!Yt(a.RVt)&&Yt(e)&&(a.RVt=this.UVt(e,h,r)),a.Yn(o,s),n.push(a)}this.BVt=t,this.Ic=n}UVt(t,i,e){if(!t||!t.breakClips)return;let s=Zt(t.breakClips,(t=>t.id===i));if(!s){var n;const i=null==(n=this.kVt)?void 0:n.breakClipIds[e];i&&(s=Zt(t.breakClips,(t=>t.id===i)))}return s}constructor(t){super(),this.kVt=void 0,this.Ic=[],this.zVt=void 0,this.BVt=t}},_J=class{get QVt(){return this.FVt}get o(){return this.FVt.id}get xUt(){return[]}get ct(){var t;return null!=(t=this.FVt.duration)?t:NaN}get SQt(){const t=this.AVt();return t?[{contentURL:t,delivery:"progressive",type:this.vVt(),width:0,height:0}]:[]}get LQt(){const{whenSkippable:t}=this.FVt;return void 0===t?void 0:t<0?-1:t}get tQt(){return this.FVt.clickThroughUrl}get NUt(){}get cUt(){return[]}get IGt(){}_Vt(){return""}vVt(){var t;return null!=(t=this.FVt.contentType)?t:""}AVt(){var t,i;return null!=(i=null!=(t=this.FVt.contentUrl)?t:this.FVt.contentId)?i:""}Yn(t,i){const e=this.o,s=this.ct,n=this.FVt.contentUrl;this.FVt=t;const r=this.o,h=this.ct,o=this.FVt.contentUrl;e===r&&(s===h||S(s)&&S(h))&&n===o||i.push(new uJ(this)),S(s)&&!S(h)&&i.push(new gc(this))}PVt(){let t;return this.RVt&&(t=vK(this.RVt,this.Xl.ibt)),t||(t=vK(this.FVt,this.Xl.ibt)),t}B7(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}fa(){const t=this;return{get companions(){return t.xUt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.SQt},get skipOffset(){return t.LQt},type:"linear",integration:zu.zS,get adSystem(){return t._Vt()},width:void 0,height:void 0,get adBreak(){return t.Xl.B7()},get resourceURI(){return t.AVt()},get clickThrough(){return t.tQt},get creativeId(){return t.NUt},get customData(){return t.IGt},get isSlate(){return!1},get universalAdIds(){return t.cUt.map((t=>({adIdRegistry:t.DFt,adIdValue:t.SFt})))}}}constructor(t,i){this.Xa=void 0,this.FVt=t,this.Xl=i}},Za=class extends Pl{get YVt(){return this.GVt}set YVt(t){this.GVt!==t&&(this.GVt=t,this.Us.href=null!=t?t:"",t?this.UI():this.QI())}UI(){if(this.Le)return;this.Le=!0,this.Us.style.display="",this.VVt||(this.pit.style.cursor="pointer");const t=this.VVt?this.Us:this.pit;i.Ys.Je?(t.addEventListener("touchstart",this.WVt),t.addEventListener("touchend",this.HVt)):(t.addEventListener("mousedown",this.WVt),t.addEventListener("click",this.HVt))}QI(){if(!this.Le)return;this.Le=!1,this.Us.style.display="none",this.VVt||(this.pit.style.cursor="");const t=this.VVt?this.Us:this.pit;i.Ys.Je?(t.removeEventListener("touchstart",this.WVt),t.removeEventListener("touchend",this.HVt)):(t.removeEventListener("mousedown",this.WVt),t.removeEventListener("click",this.HVt))}Qd(){this.Vo(),this.QI(),this.pit.removeChild(this.Us)}constructor(t,e=i.Ys.Je){super(),this.Le=!1,this.WVt=t=>{t.stopPropagation(),this.Co(new wn("clickstart"))},this.HVt=t=>{t.stopPropagation(),this.Co(new wn("click"))},this.pit=t,this.VVt=e,this.Us=h.createElement("a"),this.Us.style.position="absolute",this.Us.style.zIndex="11",this.Us.target="Du",this.VVt?(nr(this.Us,"learn more"),this.Us.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Us.setAttribute("rel","noopener")):yc(this.Us),this.pit.appendChild(this.Us),this.QI()}};!function(t){t.qVt="theo-size-xs",t.XVt="theo-size-s",t.ZVt="theo-size-m",t.KVt="theo-size-l",t.JVt="theo-size-xl"}(aJ||(aJ={}));var gJ=[1200,992,768,576],wJ={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},AJ=class{$Vt(t){let i=vJ(t);i!==this.tWt&&(vM(this.Us,i),mM(this.Us,this.tWt),this.tWt=i)}gn(){this.Wu.fn(_i.pn,this.mn)}constructor(t,i){this.Us=t,this.Wu=i,this.mn=t=>{this.$Vt(t.width)},this.tWt=vJ(i.ku),vM(this.Us,this.tWt),i.yn(_i.pn,this.mn)}};function vJ(t){for(let i of gJ)if(t>i)return wJ[i];return"theo-size-xs"}var mJ=class extends Pl{get we(){return this.Us}get jg(){return this.iR}get DS(){return this.Ql.textContent||""}set DS(t){nr(this.Ql,t)}iWt(t){"countdown"!==this.iR&&(this.iR="countdown",this.eWt(),this.we.classList.remove("theoplayer-ad-skip-button"),this.we.classList.add("theoplayer-ad-skip-countdown")),this.DS="You can skip in "+_.round(t)+" seconds"}sWt(){"skip"!==this.iR&&(this.iR="skip",this.DS="Skip Ad",this.nWt(),this.we.classList.remove("theoplayer-ad-skip-countdown"),this.we.classList.add("theoplayer-ad-skip-button"))}nWt(){this.we.addEventListener("mouseup",this.rWt),this.we.addEventListener("touchend",this.rWt)}eWt(){this.we.removeEventListener("mouseup",this.rWt),this.we.removeEventListener("touchend",this.rWt)}gn(){this.Vo(),this.eWt(),this.qu.gn(),sh(this.Us),sh(this.Ql),this.hWt&&sh(this.hWt)}constructor(t,i){super(),this.rWt=()=>{this.Co(new wn("Hm"))},this.Us=h.createElement("div"),this.we.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.we.style.position="absolute",this.Ql=h.createElement("span"),this.we.appendChild(this.Ql),i&&(this.hWt=h.createElement("div"),this.hWt.className="theoplayer-ad-skip-poster",this.hWt.style.backgroundImage='url("'+Lf(i)+'")',this.we.appendChild(this.hWt)),this.iR="countdown",this.qu=new AJ(this.we,t)}},pJ=class extends Pl{oWt(){const t=this.OYt.Pp.activeTrackIds;if(t){if(this.aWt()){const i=this._T.og.map((t=>t.o)),e=this.lT.og.map((t=>t.o));qt(i.concat(e),"0")&&t.push(0)}DJ(t,this.lT),DJ(t,this._T),function(t,i){const e=!1;for(const e of i.og)e.YGt=qt(t,e.Mg)?Ha.Jn:Ha.Ch}(t,this.Dl)}}uWt(){var t;const i=null==(t=this.OYt.Pp.media)?void 0:t.tracks;if(!i)return;const e=i.filter(YK),s=i.filter(GK),n=i.filter(VK);if(this.aWt()&&0===s.length&&0!==this.u_()){const t=this.cWt();s.push(t)}if(this.aWt()&&0===e.length){const t=this.dWt();e.push(t)}TJ(this.lT,e.map((t=>t.trackId))),TJ(this._T,s.map((t=>t.trackId))),TJ(this.Dl,n.map((t=>t.trackId))),NJ(e,this.lT),NJ(s,this._T),function(t,i){let e=!1;for(const s of t){let t=MJ(i,s.trackId);t||(t=new WK(s),i.tt(t),e=!0)}}(n,this.Dl)}lWt(){this.kB||(this.fWt=v(this.od,250))}_Wt(){m(this.fWt)}gWt(){this._Wt(),this.lWt()}wWt(){var t;const i=this.OYt.Pp,e=i.media;var s;const n=null!=(s=null==e?void 0:e.duration)?s:NaN,r=(null==e?void 0:e.streamType)===chrome.cast.media.StreamType.LIVE||n<0,h=r?1/0:n;this.VL=h,this.AWt();const o=i.getEstimatedLiveSeekableRange(),a=null==(t=i.customData)?void 0:t.buffers;if(Yt(o)){const{start:t,end:i,isMovingWindow:e=r,isLiveDone:s=!1}=o;this.VLt(t,i,e,s)}else if(Yt(a)){const[t,i]=a.seekable;this.VLt(t,i,r,!1)}else r?this.VLt(void 0,void 0,!0,!1):this.VLt(0,h,!1,!1)}vWt(){const t=this.OYt.Pp,i=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||yJ(t);this.mWt=i,this.kB!==i&&(this.kB=i,this.kB?this.Co(new ye(this.Tf())):this.Co(new Ps(this.Tf())))}th(){const{playbackRate:t}=this.OYt.Pp;this.pWt!==t&&(this.pWt=void 0,this.CB!==t&&(this.CB=t,this.Co(new Oi(this.Tf(),t))))}yWt(){const{playerState:t}=this.OYt.Pp;let i;switch(t){case chrome.cast.media.PlayerState.IDLE:i=ae.aT;break;case chrome.cast.media.PlayerState.BUFFERING:i=ae.Xn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:i=ae.cT}this.N0(i),this.MWt()}VLt(t,i,e,s){Yt(t)&&Yt(i)?this.s0=new Bk(t,i,e,e&&!s):this.s0=void 0}TWt(t,i){this.zGt=null!=i?i:this.zGt,this.jGt=null!=t?t:this.jGt,this.Co(new Vu)}We(t){this.NWt!==t?(this.bB=!0,this.Co(new Oe(this.Tf()))):this.NWt=void 0}fP(){if(!this.bB)return;this.bB=!1;const t=this.Tf();this.Co(new nc(t,this.mf())),this.Co(new Ms(t))}Mh(){this.y0=!0,this.Sf()&&this.Co(new ie(this.Tf()))}AWt(){const t=this.ONt,i=this.Td();t===i||S(t)&&S(i)||(this.ONt=i,this.Co(new ht(i)))}DWt(){const t=this.Tf();this.bB||this.IWt===t||(this.IWt=t,this.Co(new nc(t,this.mf())))}OGt(){this.kB&&(this.kB=!1,this.Co(new Ps(this.Tf())),this.N0(ae.aT))}M7(){return this.Ic}Af(){return this.KNt.Im(this.xGt)}Tf(){if(this.Ic.Fc){const t=this.OYt.XYt();if(void 0!==t)return t}return this.d7()}d7(){return void 0!==this.SWt?this.xGt+this.SWt:this.y0?this.Td():this.xGt+this.OYt.qYt()}mf(){if(this.EWt)return new Date(this.d7()+this.EWt)}Td(){if(this.Ic.Fc){var t;const i=null==(t=this.Ic.P7[0])?void 0:t.ct;if(void 0!==i&&!S(i))return i}return this.xGt+this.VL}Ef(){return this.Bz}Sf(){return!this.Ic.Fc&&this.y0}Yf(){return this.kB}Vf(){return this.CB}Wf(t){this.CB!==t&&(this.pWt=this.CB,this.CB=t,this.Co(new Oi(this.Tf(),t)),this.OYt.Wf(t))}$f(){return this.M0}qf(){return this.Ic.Fc?Ai.IB(0,this.Tf()):this.Uo.Im(this.xGt)}i_(){var t,i;if(this.Ic.Fc)return Ai.SB();let e=null!=(i=null==(t=this.s0)?void 0:t.f$().Im(this.xGt))?i:Ai.SB();if(e.U>0){const t=e.jn(e.U-1);e=e.cB(Ai.IB(t,this.Tf()))}return e}s_(){return this.bB}lf(){return this.lT}o_(){return this._T}n_(){return this.Dl}cWt(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.h_(),id:"0",name:"",width:this.u_()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:UK.pm}}dWt(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:UK.ym}}aWt(){var t,i;return!(void 0!==(null==(t=this.GYt.YYt())?void 0:t.version))||(null==(i=this.GYt.YYt())?void 0:i.sdkType)===ZK.XGt}HYt(t){this.aWt()&&To(t,0),this.OYt.HYt(t)}u_(){return this.jGt}h_(){return this.zGt}p_(){this.kB&&(this.kB=!1,this.mWt=!1,this.Co(new Ps(this.Tf()))),this.OYt.p_()}m_(){this.kB||(this.kB=!0,this.mWt=!0,this.Co(new ye(this.Tf()))),this.OYt.m_()}Sm(t){if(this.Ic.Fc)return;let i=_.max(0,t-this.xGt);i=_.round(1e6*i)/1e6;const e=this.SWt;this.SWt=i,this.mWt=this.Yf(),this.NWt=i,this.bB=!0,this.Co(new Oe(this.Tf())),void 0===e&&(this.aWt()?this.bWt(i):this.H2(i))}H2(t){this.OYt.Sm(t,this.mWt).then(this.LWt(t)).catch(this.WYt)}LWt(t){return()=>{void 0!==this.SWt&&(this.SWt===t?this.SWt=void 0:this.H2(this.SWt))}}N0(t){this.M0!==t&&(this.M0=t,this.Co(new Lr(this.Tf(),t))),void 0===this.SWt&&this.bB&&t>=ae.uT&&this.fP(),this.MWt()}MWt(){if(this.kB)return void(this.kWt=!1);const t=this.M0>=ae.cT;this.kWt!==t&&(this.kWt=t,t?this.Co(new tn(this.Tf())):this.Co(new Yu(this.Tf())))}CWt(){this.xWt||(this.xWt=h.createElement("div"),this.Qo.we.appendChild(this.xWt),this.xWt.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.xWt.style.zIndex="10",yc(this.xWt)),this.xWt.style.display=this.Ic.Fc?"":"none"}OWt(){var t;const i=null==(t=this.Ic.P7[0])?void 0:t.tQt;i&&!this.jWt?(this.jWt=new Za(this.xWt,!0),this.jWt.YVt=i,this.jWt.yn("clickstart",this.zWt)):this.jWt&&(this.jWt.YVt=i)}PWt(){var t;const i=null==(t=this.Ic.P7[0])?void 0:t.LQt;if(void 0===i||i<0)return void(this.BWt&&(this.BWt.gn(),this.BWt=void 0));if(!this.BWt){var e;const t=null==(e=this.Qo.ba)?void 0:e.mi;this.BWt=new mJ(this.Qo.Iu,t),this.xWt.appendChild(this.BWt.we),this.BWt.yn("Hm",this.RWt)}const s=this.OYt.XYt();void 0!==s&&(s<i?this.BWt.iWt(i-s):this.BWt.sWt())}PGt(){return this.xGt}BGt(t){this.xGt=t}itt(t){}y_(){this.OYt.y_()}gn(){this.Vo(),this.Ic.gn(),this.jWt&&(this.jWt.Qd(),this.jWt=void 0),this.BWt&&(this.BWt.gn(),this.BWt=void 0),this.xWt&&(sh(this.xWt),this.xWt=void 0),this.OYt.RYt(this.M$),this.OYt.PYt(this.UWt),this.OYt.QYt(this.MGt),this.OYt.fn(gK.CYt,this.QWt),this.OYt.gn()}constructor(t,i,e,s,n){super(),this.KNt=Ai.SB(),this.EWt=void 0,this.y0=!1,this.Bz=void 0,this.pWt=void 0,this.M0=ae.aT,this.kWt=!1,this.Uo=Ai.SB(),this.s0=void 0,this.bB=!1,this.lT=new yi,this._T=new yi,this.Dl=new We,this.ONt=NaN,this.SWt=void 0,this.mWt=!1,this.IWt=NaN,this.NWt=void 0,this.fWt=0,this.UWt=(t,i)=>{switch(t){case"buffered":this.KNt=new Ai(i),this.Co(new ki(this.Tf()));break;case"currentProgramDateTime":this.EWt=new Date(i).getTime()-this.Tf();break;case"played":this.Uo=new Ai(i);break;case"seekable":this.wWt();break;case"videoHeight":this.TWt(void 0,i);break;case"videoWidth":this.TWt(i,void 0)}},this.M$=t=>{switch(t.type){case l.yw:this.We(t.currentTime);break;case l.pw:this.fP();break;case l.Aw:this.Co(new pQ(t.representation,t.previousRepresentation));break;case l.Mw:this.Co(new VU(t.segmentStartTime,t.error,t.trackType,t.track,t.quality,t.retryCount));break;case l.Kg:this.Co(new JG(t.currentTime,t.initDataType,t.initData));break;case l.Vg:this.Co(new hn(new Qr(Ui.CONTENT_PROTECTION_ERROR,t.error,void 0,t.licenseAcquisitionURL,t.status,t.statusText,t.licenseAcquisitionMessage,t.systemCode)));break;case l.Wg:this.Co(new Sx)}},this.MGt=t=>{this.wWt(),this.vWt(),this.th(),this.yWt(),this.DWt(),this.gWt(),this.uWt(),this.oWt(),this.CWt(),this.OWt(),this.PWt(),t||yJ(this.OYt.Pp)&&this.Mh()},this.od=()=>{this.DWt(),this.PWt()},this.QWt=t=>{this.Co(t)},this.bWt=mc((t=>this.H2(t)),50),this.WYt=t=>{this.SWt=void 0,this.Co(new mK(t))},this.zWt=()=>{this.m_()},this.RWt=()=>{this.Ic.Hm()},this.Qo=t,this.GYt=e,this.OYt=s,this.Ic=new lJ(t,s,i.Oc),this.xGt=n.PGt(),this.VL=n.Td()-this.xGt,this.kB=n.Yf(),this.CB=n.Vf(),this.jGt=n.u_(),this.zGt=n.h_(),this.OYt.BYt(this.M$),this.OYt.jYt(this.UWt),this.OYt.UYt(this.MGt),this.OYt.yn(gK.CYt,this.QWt),this.OYt.FYt().then((t=>{this.Co(new pK(t.bt,t.yc))}),this.WYt)}};function yJ(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function MJ(t,i){for(const e of t.og)if(e.Mg===i)return e}function TJ(t,i){let e=!1;for(let s=0;s<t.U;s++){const n=t.cg(s);-1===i.indexOf(n.Mg)&&(t.it(n),s--,e=!0)}return e}function NJ(t,i){let e=!1;for(const s of t){let t=MJ(i,s.trackId);t||(t=new KK(s),i.tt(t),e=!0)}return e}function DJ(t,i){for(const e of i.og)e.HGt=qt(t,e.Mg);return!1}var IJ=class{mtt(t){return Promise.resolve("all")}v_(){}gn(){}};function SJ(t,i,e){if(S(t))return e;if(t===1/0){if("live"===e||"dvr"===e)return e;if(i&&i.length>0){if(i.end(i.length-1)-i.start(0)>60)return"dvr"}return"live"}return"vod"}var EJ=[l.Jg,l.Xg,l.ww,l.mw,l.Sh,l.jh,l.gw,l.Sw,l.yw,l.pw,er.Bw,er.Rw,l.Aw,l.Mw,l.Kg,l.Vg,l.Wg],bJ=class extends Ci{KP(t){if(!t)return;fl(this.YP&&Ic(this.YP),t&&Ic(t))||(this.YP=t,this.Co(new T(t)))}FWt(t){if(!t)return;const i=jh(t,this.Qo.wd);fl(this.bc&&Ic(this.bc),i&&Ic(i))||(this.ja.BGt(0),this.bc=i,this.Co(new Wj(i)),this.ja.OGt())}YWt(t){for(const i of this.rt.og)if(i.Mg===t)return i;for(const i of this.ht.og)if(i.Mg===t)return i}get rdt(){return this.ja}set rdt(t){const i=this.ja;i&&(i.fn(gK.CYt,this.QWt),i.fn(gK.xYt,this.GWt),i.fn(EJ,this.Ds),i.fn(er.H_,this.cO),t.BGt(i.PGt()),i.itt(t.M7())),this.ja=t,this.lT.fg=t.lf(),this._T.fg=t.o_(),this.Dl.fg=t.n_(),this.Ic.fg=t.M7(),i&&i.gn(),t.yn(gK.CYt,this.QWt),t.yn(gK.xYt,this.GWt),t.yn(EJ,this.Ds),t.yn(er.H_,this.cO)}get ro(){return this.ho}get Oc(){return this.M7()}M7(){return this.Ic}T7(){return this.n7}lf(){return this.lT}Af(){return this.ja.Af().ks()}get VWt(){return this.WWt||this.bc}set VWt(t){this.WWt=t}async $n(t,i){var e;t&&await this.NGt(t,null!=(e=t.ads)?e:[],t.streamType,NaN,0,null!=i?i:0)}async HWt(t){var i;const e=null!=(i=this.WWt)?i:this.bc;if(!e)return;var s;const n=this.WWt?null!=(s=this.WWt.ads)?s:[]:this.ctt(),r=this.Qo.Td(),h=this.Qo.i_(),o=SJ(r,h,e.streamType),a=h.length>0?h.start(0):0,u=null!=t?t:this.d7();await this.NGt(e,n,o,r,a,u)}ctt(){const t=new qh;return this.Ic.itt(t),t.ctt()}mf(){return this.ja.mf()}yf(){return this.YP}get Mf(){return this.Tf()}set Mf(t){this.Nf(t)}Tf(){return this.ja.Tf()}d7(){return this.ja.d7()}Nf(t){this.qWt||(this.GYt.TGt()||this.qWt||!this.bc?this.ja.Sm(t):this.$n(this.bc,t))}Td(){return this.ja.Td()}Sf(){return this.ja.Sf()}Ef(){return this.Bz}Lf(){return this.Rz}Cf(){return this.fT}zf(){return this.Qo.jf}Bf(){return this.LB}Rf(t){this.LB=t,this.Co(new lo(this.Mf,this.c_)),this.GYt.Rf(t)}Yf(){return this.ja.Yf()}Vf(){return this.ja.Vf()}Wf(t){this.ja.Wf(t)}qf(){return this.ja.qf().ks()}Zf(){return Qe.iT}Kf(t){}$f(){return this.ja.$f()}i_(){return this.ja.i_().ks()}s_(){return this.ja.s_()}Wa(){return this.bc}async ga(t){this.bc=t,await this.$n(t),this.WWt=void 0,this.ja.OGt()}n_(){return this.Dl}h_(){return this.ja.h_()}u_(){return this.ja.u_()}o_(){return this._T}d_(){return this.ck}l_(t){this.ck=t,this.Co(new lo(this.Mf,this.c_)),this.GYt.l_(t)}get g_(){return!1}set g_(t){}A_(){}w_(){return this.xB}v_(){}p_(){this.GYt.TGt()||this.qWt||!this.bc?this.ja.p_():this.$n(this.bc)}m_(){this.ja.m_()}ur(){this.ho=!0}ar(){this.YP=void 0,this.ho=!1}ge(){}be(){}async NGt(t,i,e,s,n,r){this.qWt=!0,this.XWt(),this.ja.BGt(n);const h="live"===e||"dvr"===e,o=function(t,i,e){return{theoplayer_version:1,streamStart:t,isLive:i,sourceDescription:e}}(n,h,t),a={DGt:t,Oc:i,Mf:_.max(0,r-n),ct:s,uZ:h?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,IGt:o};try{await this.GYt.NGt(a)}catch(t){this.ZWt(t)}finally{this.qWt=!1}}KWt(){this.JWt(this.lT),this.JWt(this._T),this.$Wt(this.Dl)}JWt(t){for(const i of t.og)this.tHt(i);t.yn(Mi.L_,(t=>{this.tHt(t.Lt),this.iHt()}))}$Wt(t){for(const i of t.og)this.eHt(i);t.yn(Mi.L_,(t=>{this.eHt(t.Lt),this.iHt()}))}tHt(t){t.yn(Oc.UGt,this.Kgt),t.yn(Oc.QGt,this.sHt),t.yn(Oc.QGt,this.oWt)}eHt(t){t.yn(Oc.RGt,this.nHt),t.yn(Oc.RGt,this.oWt)}rHt(){const t=[];for(const i of this.rt.og)i.Rt&&t.push(i.Mg);for(const i of this.ht.og)i.Rt&&t.push(i.Mg);for(const i of this.nt.og)i.jg===Ha.Jn&&t.push(i.Mg);this.ja.HYt(t)}hHt(t,i){this.oHt=t,this.aHt=i}uHt(t){var i,e;if(!t)return!1;return(null!=(e=null==(i=this.GYt.YYt())?void 0:i.version)?e:-1)>=2?t.map((t=>t.o)):[t[0].o]}cHt(t){this.dHt=t}D_(){}I_(){}async y_(){this.ja.y_(),this.XWt()}XWt(){this.iO=ae.aT,this.Xx=!1,this.Jx=!1,this.Bz=void 0,this.Rz=void 0}async gn(){this.XWt(),this.Vo(),this.rdt=this.lHt(),this.GYt.fn(pi.CYt,this.QWt),this.GYt.fn(pi.cGt,this.fHt),this.GYt.fn(pi.Ew,this._Ht),this.GYt.fn(pi.uGt,this.gHt),this.GYt.fn(pi.dGt,this.wHt),this.GYt.gn()}lHt(){return new RK(this,this.ja.PGt(),this.ja.Tf(),this.ja.Td(),this.ja.Sf(),this.ja.Yf(),this.ja.Vf(),this.ja.u_(),this.ja.h_())}constructor(t,i){super(t,!0),this.ho=!1,this.dHt=El,this.iO=ae.aT,this.Xx=!1,this.Jx=!1,this.qWt=!1,this.WWt=void 0,this.Bz=void 0,this.Rz=void 0,this.lT=new zs,this._T=new zs,this.Dl=new tu,this.xB=new Wu,this.fT=new Wo,this.n7=new IJ,this.oHt=void 0,this.aHt=void 0,this._Ht=t=>{var i,e;(Yt(t.c_)&&!Ua(t.c_,this.ck,1e-5)||Yt(t.Pf)&&t.Pf!==this.LB)&&(this.ck=null!=(i=t.c_)?i:this.ck,this.LB=null!=(e=t.Pf)?e:this.LB,this.Co(new lo(this.Mf,this.ck)))},this.gHt=()=>{const t=this.GYt.TGt();this.rdt=t?new pJ(this,this.Qo,this.GYt,t,this.ja):this.lHt()},this.GWt=t=>{this.KP(t.bt),this.FWt(t.yc)},this.wHt=t=>{const i=this.YWt(t.Qp);if(!i)return void 0;const e={targetQualityIds:t.fGt};i.GGt(e)},this.QWt=t=>{this.ZWt(t.lt)},this.ZWt=t=>{this.dHt&&this.dHt(t)},this.fHt=t=>{this.Bz=t.lt,this.Rz=yw(this.Bz),this.Co(new Bi(this.Rz))},this.sHt=t=>{if(!t.enabled)return;const i=this.rt.og.some((i=>i.Mg===t.trackId))?this.rt:this.ht;for(const e of i.og)e.Rt&&e.Mg!==t.trackId&&(e.Rt=!1)},this.nHt=t=>{if(t.mode===Ha.Jn)for(const i of this.nt.og)i.jg===Ha.Jn&&i.Mg!==t.trackId&&Iv(i.zt,t.track.zt)&&(i.jg=Ha.Ch)},this.oWt=mc((()=>{this.rHt()}),50),this.iHt=()=>{const t=[];var i;const e=null!=(i=Zt(this.ht.og,(t=>BJ(t,this.oHt))))?i:Zt(this.ht.og,(t=>t.Rt));var s;e&&t.push(e.Mg);const n=null!=(s=Zt(this.nt.og,(t=>BJ(t,this.aHt))))?s:Zt(this.nt.og,(t=>t.jg===Ha.Jn));n&&t.push(n.Mg);const r=Zt(this.rt.og,(t=>t.Rt));r&&t.push(r.Mg),0!==t.length&&this.ja.HYt(t)},this.Kgt=t=>{const i=this.uHt(t.targetQuality),e=t.track;this.GYt._Gt(e.Mg,e.e$,i)},this.cO=t=>{this.Co(t);const i=t.readyState;!this.Xx&&this.iO===ae.aT&&i>=ae.Xn&&(this.Xx=!0,this.Co(new ps(t.currentTime))),!this.Jx&&this.iO<=ae.Xn&&i>=ae.uT&&(this.Jx=!0,this.Co(new ns(t.currentTime))),this.iO<=ae.uT&&i>=ae.cT&&this.Co(new gt(t.currentTime)),this.iO<=ae.cT&&i===ae.dT&&this.Co(new us(t.currentTime)),this.iO=i},this.ck=this.Qo.c_,this.LB=this.Qo.Pf,this.GYt=i,this.GYt.yn(pi.CYt,this.QWt),this.GYt.yn(pi.cGt,this.fHt),this.GYt.yn(pi.Ew,this._Ht),this.GYt.yn(pi.uGt,this.gHt),this.GYt.yn(pi.dGt,this.wHt),this.Ic=new Ch(this),this.YP=this.Qo.bt,this.bc=this.Qo.Wa(),this.rdt=new RK(this,0,this.Qo.d7(),this.Qo.Td(),this.Qo.If,this.Qo.Ff,this.Qo.Gf,this.Qo.a_,this.Qo.r_),this.KWt()}},LJ=class extends yo{fa(){return new kJ(this.lt)}constructor(t){super("error"),this.lt=t}},kJ=class extends wn{constructor(t){super("error"),this.error=t}},Mc=class extends wn{constructor(t){super("statechange"),this.state=t}};function CJ(t,i){let e;return{get casting(){return t.lH},get error(){return t.lt},get receiverName(){return t.AHt},get state(){return t.rdt},start(){t.Cn()},stop(){t.y_()},join(){t.vHt()},leave(){t.mHt()},set connectionCallback(t){null==i||i.pHt(t)},get connectionCallback(){return null==i?void 0:i.yHt()},get source(){return e||t.yc},set source(i){e=i,t.yc=i},addEventListener(i,e){const s=ln(i,Va);t.yn(s,e)},removeEventListener(i,e){const s=ln(i,Va);t.fn(s,e)}}}var xJ=class extends Ys{get lH(){return this.rdt===Xr.CONNECTING||this.rdt===Xr.CONNECTED}get lt(){return this.Bz}get va(){return this.Xa||(this.Xa=CJ(this,this.MHt)),this.Xa}get AHt(){var t;return null==(t=this.MHt.THt())?void 0:t.EGt()}get yc(){return this.Qo?this.Qo.VWt:this.WWt}set yc(t){this.WWt=t?jh(t,this.NHt.wd):void 0,this.Qo&&(this.Qo.VWt=this.WWt,this.WWt&&this.Qo.$n(this.WWt))}get rdt(){return this.ja}set rdt(t){let i=t;this.DHt||i!==Xr.CONNECTING&&i!==Xr.CONNECTED||(i=Xr.AVAILABLE),this.ja!==i&&(this.ja=i,this.Co(new Mc(this.rdt)))}async IHt(){if(!this.SHt)throw new g("Chromecast must be initialized before starting a session");await this.SHt,this.MHt.THt()||await this.MHt.EHt()}async Cn(){this.DHt=!0;try{if(this.rdt=Xr.CONNECTING,await this.IHt(),await this.bHt(),this.Qo){const t=this.NHt.Wa(),i=this.MHt.LHt(t);this.Qo.VWt=i?jh(i,this.NHt.wd):this.WWt,this.Qo.HWt()}this.rdt=Xr.CONNECTED,await this.NHt.y_()}catch(t){this.kHt(!1).catch(El),this.rdt=Xr.AVAILABLE,ut(t)||this.L4(t)}}async vHt(){this.DHt=!0;try{if(this.rdt=Xr.CONNECTING,await this.IHt(),await this.bHt(),this.Qo){const t=this.NHt.Wa(),i=this.MHt.CHt(t);i&&(this.Qo.VWt=jh(i,this.NHt.wd))}this.rdt=Xr.CONNECTED,await this.NHt.y_()}catch(t){await this.kHt(!0).catch(El),this.rdt=Xr.AVAILABLE,ut(t)||this.L4(t)}}async xHt(){this.MHt.THt()&&await this.Cn()}async bHt(){null!=this.Qo||(this.Qo=this.OHt()),this.Bz=void 0,this.NHt.m_(),await this.pW.jHt(this.Qo)}OHt(){const t=new bJ(this.NHt,this.MHt.THt());return t.cHt(this.L4),t}zHt(){this.Qo&&(this.Qo.gn(),this.Qo=void 0)}async kHt(t){if(this.DHt=!1,!this.Qo)return;const i=this.Qo.ro,e=this.Qo.Wa(),s=this.Qo.d7();try{if(i){let i;i=t?this.MHt.PHt(e):this.MHt.BHt(e),null!=i||(i=e),await this.pW.RHt(i,i===e),this.NHt.Nf(s),this.NHt.p_()}}finally{this.zHt()}}mHt(){this.lH&&(this.MHt.UHt(!1),this.kHt(!0).catch(this.L4))}y_(){this.lH&&(this.MHt.UHt(!0),this.kHt(!1).catch(this.L4))}gn(){this.ES.Xd(),this.MHt.fn(LK.CGt,this.QHt),this.Vo(),this.zHt()}constructor(t,i,e,s){super(),this.Bz=void 0,this.Xa=void 0,this.Qo=void 0,this.ja=Xr.UNAVAILABLE,this.DHt=!1,this.ES=new na,this.FHt=()=>{this.MHt.yn(LK.CGt,this.QHt),this.rdt=this.MHt.YHt()},this.QHt=t=>{const i=t.rdt;this.rdt=i,i!==Xr.UNAVAILABLE&&i!==Xr.AVAILABLE||this.kHt(!1).catch(this.L4)},this.WWt=void 0,this.L4=t=>{ut(t)||t instanceof Ro&&(this.Bz=t,this.Co(new LJ(t).va))},this.pW=t,this.NHt=i,this.MHt=s,this.lx=e.chromecast,this.SHt=this.MHt.bW(this.lx,this.ES.Hd),this.SHt.then(this.FHt).catch(this.L4)}},OJ=class extends Ys{get lH(){return!1}get lt(){}get AHt(){}get yc(){}set yc(t){}get rdt(){return Xr.UNAVAILABLE}get va(){return this.Xa||(this.Xa=CJ(this)),this.Xa}vHt(){i.SA("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}mHt(){i.SA("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}Cn(){i.SA("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}y_(){i.SA("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}xHt(){return Promise.resolve()}gn(){}};function jJ(t){return{bt:t.bt,Mf:t.Tf(),ct:t.Td(),If:t.If,lt:t.Ef(),bf:t.Lf(),Pf:t.Pf,Ff:t.Ff,Gf:t.Gf,Jf:t.Jf,e_:t.e_,r_:t.r_,a_:t.a_,c_:t.c_}}var zJ=class extends Ci{M7(){return this.Ic}lf(){return this.lT}get kf(){return this.Cf()}Cf(){return this.fT}n_(){return this.Dl}o_(){return this._T}gT(t){if(this.Qo===t)return;let i;this.VP(),this.I7&&(i=jJ(this));const e=this.yf(),s=this.w_(),n=this.A_();if(this.Qo=t,this.lT.fg=t.ht,this._T.fg=t.rt,this.Dl.fg=t.nt,this.fT.fg=t.kf,this.Ic.fg=t.Oc,void 0!==i){au(this,i,jJ(this))}const r=this.yf();r!==e&&this.Co(new T(r)),this.w_()!==s&&this.Co(new mu),this.A_()!==n&&this.Co(new ft),this.GP()}async gn(t){await super.gn(t),this.lT.gn(t),this._T.gn(t),this.Dl.gn(t),this.fT.gn(),await this.Ic.gn()}constructor(t,i){super(t,i),this.lT=new zs,this._T=new zs,this.Dl=new tu,this.fT=new ua,this.lT.fg=t.ht,this._T.fg=t.rt,this.Dl.fg=t.nt,this.fT.fg=t.kf,this.Ic=new Ch(this),this.Ic.fg=t.Oc}},PJ=class extends zJ{Wa(){const t=super.Wa();return!t&&this.GHt.lH&&this.GHt.yc?this.GHt.yc:t}ga(t,i){return this.Mq.Mx((i=>(this.VHt=new na,this.VHt.Zd(i),super.ga(t,this.VHt.Hd))),i)}p_(){super.p_(),this.wd.cast.strategy!==ul.AUTO||this.GHt.lH||this.GHt.xHt()}jHt(t){return this.Mq.Mx((i=>this.WHt(t,i)))}RHt(t,i){return void 0===t&&(t=void 0),void 0===i&&(i=!1),this.Mq.Mx((e=>this.HHt(t,i,e)))}WHt(t,i){Bo(i),this.qHt.Oc&&this.qHt.Oc.itt(t.Oc),this.XHt(),this.ZHt=Zt(this.qHt.ht.og,(t=>t.Rt)),this.HTt=Zt(this.qHt.nt.og,(t=>"showing"===t.jg)),this.KHt=t,this.KHt.hHt(this.ZHt,this.HTt),this.gT(t),this.KHt.ur()}async HHt(t,i,e){Bo(e);const s=this.KHt;if(void 0!==s)try{if(t){await this.qHt.y_(),Bo(e);const s=jh(t,this.qHt.wd);i&&(s.ads=void 0),this.VHt=new na,this.VHt.Zd(e),await this.qHt.ga(s,this.VHt.Hd)}i&&this.qHt.Oc&&s.Oc.itt(this.qHt.Oc)}catch(t){el(t)}finally{s.ar(),this.gT(this.qHt),this.ZHt=Zt(this.KHt.ht.og,(t=>t.Rt)),this.HTt=Zt(this.KHt.nt.og,(t=>"showing"===t.jg)),this.qHt.ht.yn(Mi.L_,this.JHt),this.qHt.nt.yn(Mi.L_,this.$Ht),this.qHt.yn(er.Pw,this.XHt),this.KHt===s&&(this.KHt=void 0)}}y_(){var t;return this.ZHt=void 0,this.HTt=void 0,this.XHt(),null==(t=this.VHt)||t.Xd(),this.Mq.Mx((()=>super.y_()))}async gn(){var t;null==(t=this.VHt)||t.Xd(),this.GHt.gn(),await this.RHt(),await this.Mq.gn(),await super.gn()}constructor(t,i){super(t),this.Mq=new jn,this.ZHt=void 0,this.HTt=void 0,this.JHt=t=>{const i=t.Lt;BJ(this.ZHt,i)&&(i.Rt=!0)},this.$Ht=t=>{const i=t.Lt;BJ(this.HTt,i)&&(i.jg=Ha.Jn)},this.XHt=()=>{this.qHt.ht.fn(Mi.L_,this.JHt),this.qHt.nt.fn(Mi.L_,this.$Ht)},this.qHt=t,this.wd.cast.strategy!==ul.DISABLED?this.GHt=new xJ(this,t,this.wd.cast,i):this.GHt=new OJ,this.fQ.mH(this.GHt)}};function BJ(t,i){return void 0!==t&&void 0!==i&&(t.gs===i.gs&&i.kh===t.kh)}var RJ=new class extends Pl{pHt(t){this.tqt=t}yHt(){return this.tqt}THt(){return this.iqt}YHt(){switch(this.eqt.getCastState()){case cast.framework.CastState.CONNECTED:return Xr.CONNECTED;case cast.framework.CastState.CONNECTING:return Xr.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return Xr.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return Xr.UNAVAILABLE}}async bW(t,i){await AZ(i),this.eqt=cast.framework.CastContext.getInstance(),this.eqt.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.pH),this.eqt.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async EHt(){try{const t=await this.eqt.requestSession();if(t)throw t}catch(t){throw new Ro(jr(t))}}LHt(t){var i;return null==(i=this.tqt)?void 0:i.onStart(t)}BHt(t){var i;return null==(i=this.tqt)?void 0:i.onStop(t)}CHt(t){var i;return null==(i=this.tqt)?void 0:i.onJoin(t)}PHt(t){var i;return null==(i=this.tqt)?void 0:i.onLeave(t)}UHt(t){this.eqt.endCurrentSession(t)}constructor(...t){super(...t),this.iqt=void 0,this.tqt=void 0,this.pH=()=>{const t=this.YHt();this.iqt=t===Xr.CONNECTED?new PK(this.eqt.getCurrentSession()):void 0,this.Co(new BK(t))}}},UJ=new class{get va(){return this.Xa||(this.Xa=function(t){return{initialize(i){const e=t.bW(zf(i));return e.catch(El),e},startSession(){const i=t.EHt();return i.catch(El),i},endSession(){t.sqt()}}}(this)),this.Xa}async bW(t){this.SHt||(this.SHt=this.nqt(t)),await this.SHt}async nqt(t){await this.MHt.bW(t)}async EHt(){if(!this.SHt)throw new g("Chromecast must be initialized before starting a session");await this.SHt,this.MHt.THt()||await this.MHt.EHt()}rqt(){this.MHt.UHt(!1)}sqt(){this.MHt.UHt(!0)}constructor(t){this.SHt=void 0,this.Xa=void 0,this.MHt=t}}(RJ),QJ={get chromecast(){return UJ.va}};Uj((t=>new PJ(t,RJ)),lt.b7);var be,ch,FJ=class{hqt(t,i,e,s){t.aR.forEach((t=>{if(!this.oqt(t.aqt)){const n=t.uqt(i,e,s);n&&this.cqt(n)}}))}oqt(t){return this.dqt.get(t)}cqt(t){this.dqt.set(t.lqt,t),this.fqt.set(t.lqt,t._qt),this.gqt.Qa(t.wqt)}ett(t){this.fqt.has(t.lqt)||(this.fqt.set(t.lqt,t),this.gqt.Qa(t.wqt))}Aqt(t){return this.fqt.forEach(t)}vqt(t){return this.dqt.forEach(t)}mqt(t){let i=!1;return this.dqt.forEach((e=>{i=e.mqt(t)||i})),i}async gn(){const t=[];this.dqt.forEach((i=>t.push(i.gn()))),this.fqt.forEach((i=>t.push(i.gn()))),await Promise.all(t),this.dqt.clear(),this.fqt.clear()}constructor(t){this.gqt=t,this.dqt=cs(),this.fqt=cs()}},Go=class t extends yo{fa(){return new YJ(this.pFt,this.Ob,this.Kb,this.yc)}static pqt(i){return new t(Jo.GENERAL,i.Ob,i.MFt)}static yqt(i,e){return new t(i.pFt,i.message,i.MFt,e)}constructor(t,i,e,s){super("Mqt"),this.pFt=t,this.Ob=i,this.Kb=e,this.yc=s}},YJ=class extends wn{constructor(t,i,e,s){super("aderror"),this.problemType=t,this.message=i,this.errorCode=e,this.source=s}},GJ=class extends Rh{get Tqt(){return this.Nqt}get Fc(){let t=!1;return this.Dqt((i=>{t=t||i.Iqt})),t}get P7(){const t=[];return this.Dqt((i=>{const e=i.P7;e.length&&t.push(...e)})),t}get R7(){let t=null;return this.Dqt((i=>{null!=t||(t=i.R7)})),t}get U7(){const t=[];return this.Dqt((i=>{t.push(...i.U7)})),t}get Q7(){const t=[];return this.Dqt((i=>{t.push(...i.Q7)})),t}itt(t){this.Dqt((i=>{i.itt(t)}))}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=kh(this)}Hm(){this.Dqt((t=>{t.Hm()}))}ett(t){this.Nqt.ett(t)}Y7(t,i){return this.Sqt.Y7(t,i)}Eqt(t){this.Nqt.vqt((i=>{i.Eqt(t)}))}mqt(t){return this.Nqt.mqt(t)}Dqt(t){return this.Nqt.Aqt(t)}v_(){this.Nqt.vqt((t=>t.v_()))}async tr(){const t=[];this.Nqt.vqt((i=>t.push(i.y_()))),await Promise.all(t)}async gn(){this.Vo(),await this.Nqt.gn()}constructor(t){super(),this.Xa=void 0,this.Sqt=t,this.Nqt=new FJ(this)}},VJ=class extends GJ{n4(t,i,e){try{this.bqt=e;const s=Ds.Ib.cR(t);if(s.aqt===zu.E7)return;const n=this.Nqt.oqt(s.aqt);if(!n)throw new wo(Jo.ADBLOCK,void 0,"Ads could not be loaded.");i!==Ur.G7&&this.L2||this.Sqt.Lqt(n),s.n4(t,i,n,this.bqt)}catch(i){0,this.Co(Go.yqt(i,t.sources))}}async tr(){await super.tr(),this.L2=!1}async gn(){await super.gn(),this.Sqt.fn(l.jh,this.m9),this.fn("Mqt",this.kqt)}constructor(t){super(t),this.bqt=!1,this.L2=!1,this.kqt=t=>{if(!this.bqt)return;const i=new Hu(Aw.ADVERTISEMENT_ERROR,t.Ob),e=new $i(Ui.AD_BLOCKER_DETECTED,t.Ob+" Turn off your AdBlocker and try again.",i);this.Sqt.IP(e)},this.m9=()=>{this.L2=!0},this.yn("Mqt",this.kqt),t.yn(l.jh,this.m9)}},ct=class extends Gr{get Oc(){return this.Ic}get KGt(){return this.Cqt}set KGt(t){this.Cqt=t}get JGt(){return this.xqt}set JGt(t){this.xqt=t}set ibt(t){this.vYt=t}get ibt(){return this.vYt}get IGt(){return this.Oqt}jqt(){this.zqt=!0}Pqt(t){this.Ic.push(t),this.zqt=!1}Bqt(t){To(this.Ic,t)}get Hf(){return this.zqt}constructor(t){super(),this.vYt=t,this.Ic=[],this.Cqt=-1,this.xqt=-1,this.Oqt=void 0,this.zqt=!1}},WJ=class extends ct{get _Yt(){return this.Rqt}get U7(){return this.Uqt}Yn(t){void 0!==t.maxDuration&&(this.Cqt=t.maxDuration),void 0!==t.customData&&(this.Oqt=t.customData)}Qqt(t){const i=this.Ic.indexOf(t);return i>=0&&i<this.Ic.length-1}Pqt(t){super.Pqt(t),this.Uqt.push(t)}Fqt(t){To(this.Uqt,t)}Bqt(t){super.Bqt(t),To(this.Uqt,t)}constructor(t,i){super(i.timeOffset),this.Uqt=[],this.Rqt=t,this.Yn(i)}};!function(t){t.bFt="linear",t.LFt="nonlinear",t.rT="unknown"}(be||(be={})),function(t){t.NONE="none",t.READY="ready"}(ch||(ch={}));var HJ=class extends tJ{Yqt(t,i,e,s,n,r){this.CT=t,this.lk=i,this.fk=e,this.VL=s,this.OUt=n,this.kQt=r,this.Gqt="ready"}get Vqt(){return this.Gqt}get xUt(){return this.OUt}get ct(){return this.VL}B7(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}get Ti(){return this.fk}get o(){return this.CT}get LQt(){return this.kQt}get ji(){return this.lk}get Wqt(){return this.Hqt}get tQt(){return this.iQt}get NUt(){return this.DUt}get cUt(){return this.DQt}get IGt(){return this.Oqt}get qqt(){return this.Xqt}_Vt(){}vVt(){return""}AVt(){return this.Zqt}constructor(t,i){super(),this.Hqt=i,this.CT=void 0,this.kQt=void 0,this.lk=void 0,this.fk=void 0,this.VL=void 0,this.DQt=[],this.OUt=[],this.Gqt="none",this.Oqt=void 0,this.Xqt=!1,this.Xl=t}};function qJ(t){return{get adSystem(){return t._Vt()},get readyState(){return t.Vqt},get adBreak(){return t.Xl.B7()},get duration(){return t.ct},get companions(){return t.xUt.map((t=>t.va))},get resourceURI(){return t.AVt()},get clickThrough(){return t.tQt},get width(){return t.ji},get type(){return function(t){switch(t){case"linear":case"unknown":return"linear";case"nonlinear":return"nonlinear"}}(t.Wqt)},get height(){return t.Ti},get id(){return t.o},get skipOffset(){return t.LQt},get integration(){return t._Yt},get creativeId(){return t.NUt},get universalAdIds(){return t.cUt},get customData(){return t.IGt},get isSlate(){return t.qqt}}}var XJ=class{get VUt(){return this.WUt}get JUt(){return this.$Ut}get Kqt(){return this.Jqt}get tQt(){return this.iQt}get Ti(){return this.fk}get aFt(){return this.Zqt}get ji(){return this.lk}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{get adSlotId(){return t.VUt},get altText(){return t.JUt},get contentHTML(){return t.Kqt},get clickThrough(){return t.tQt},get height(){return t.Ti},get resourceURI(){return t.aFt},get width(){return t.ji}}}(this)}$qt(t){if(t.tQt&&t.aFt)return;const i=function(t){try{return YZ(t,"text/html")}catch(t){return}}(t.Kqt);i&&(this.iQt=ZJ(i,"a","href"),this.Zqt=ZJ(i,"img","src"))}constructor(t){var i;this.Xa=void 0,this.iQt=void 0,this.Zqt=void 0,this.WUt=t.VUt,this.lk=t.ji,this.fk=t.Ti,this.Jqt=t.Kqt,this.iQt=t.tQt,this.Zqt=t.aFt,this.$Ut=null!=(i=t.JUt)?i:"",this.$qt(t)}};function ZJ(t,i,e){const s=t.querySelector(i);return s&&s.getAttribute(e)||""}var KJ=class extends HJ{get _Yt(){return this.Rqt}get tXt(){return this.iXt}set tXt(t){this.iXt=t}fa(){return qJ(this)}Yn(t){t.id&&(this.CT=t.id),void 0!==t.skipOffset&&(this.kQt=t.skipOffset),void 0!==t.width&&(this.lk=t.width),void 0!==t.height&&(this.fk=t.height),void 0!==t.duration&&(this.VL=t.duration),void 0!==t.readyState&&(this.Gqt=function(t){return"ready"===t?ch.READY:ch.NONE}(t.readyState)),void 0!==t.resourceURI&&(this.Zqt=t.resourceURI),void 0!==t.clickThrough&&(this.iQt=t.clickThrough),void 0!==t.companions&&(this.OUt=[...t.companions].map(JJ)),void 0!==t.creativeId&&(this.DUt=t.creativeId),void 0!==t.universalAdIds&&(this.DQt=t.universalAdIds),void 0!==t.customData&&(this.Oqt=t.customData)}constructor(t,i,e){super(e,function(t){return"linear"===t?be.bFt:"nonlinear"===t?be.LFt:be.rT}(i.type)),this.iXt=0,this.Rqt=t,this.Yn(i)}};function JJ(t){const i={VUt:t.adSlotId,JUt:t.altText,Kqt:t.contentHTML,qz:void 0,tQt:t.clickThrough,Ti:t.height,aFt:t.resourceURI,ji:t.width};return new XJ(i)}var $J=class extends ee{fa(){return new t$(this.H7.B7(),this.eXt)}get eXt(){return this.sXt}constructor(t,i){super("nXt",t),this.sXt=i}},t$=class extends vo{constructor(t,i){super("adskip",t),this.playedPercentage=i}},nh=class extends Cc{fa(){return new i$(this.Xl.B7())}constructor(t){super("rXt",t)}},i$=class extends tc{constructor(t){super("updateadbreak",t)}},e$=class extends Cc{fa(){return new s$(this.Xl.B7())}constructor(t){super("hXt",t)}},s$=class extends tc{constructor(t){super("adbreakchange",t)}},n$=class extends ee{fa(){return new r$(this.H7.B7(),this.currentTime)}constructor(t,i){super("oXt",t),this.currentTime=i}},r$=class extends vo{constructor(t,i){super("adfirstquartile",t),this.currentTime=i}},h$=class extends ee{fa(){return new o$(this.H7.B7(),this.currentTime)}constructor(t,i){super("aXt",t),this.currentTime=i}},o$=class extends vo{constructor(t,i){super("admidpoint",t),this.currentTime=i}},a$=class extends ee{fa(){return new u$(this.H7.B7(),this.currentTime)}constructor(t,i){super("uXt",t),this.currentTime=i}},u$=class extends vo{constructor(t,i){super("adthirdquartile",t),this.ad=t,this.currentTime=i}},c$=class{get Oc(){return this.Ic}get iVt(){return this.IVt}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{get integration(){return t._Yt},get ads(){return t.Oc.map((t=>t.B7()))},get adBreaks(){return t.iVt.map((t=>t.B7()))},createAd:(i,e)=>t.cXt(i,e?t.dXt(e):void 0).B7(),updateAd(i,e){t.lXt(t.fXt(i),e)},updateAdProgress(i,e){const s=os(Number(e),0,1);t._Xt(t.fXt(i),s)},beginAd(i){t.Fqt(t.fXt(i))},endAd(i){t.gXt(t.fXt(i))},skipAd(i){t.KYt(t.fXt(i))},removeAd(i){t.Bqt(t.fXt(i))},createAdBreak:i=>t.wXt(i).B7(),updateAdBreak(i,e){t.AXt(t.dXt(i),e)},removeAdBreak(i){t.vXt(t.dXt(i))},removeAllAds(){t.mXt()},error(i){t.pXt(i)},fatalError(i,e){const s=e?Number(e):void 0;t.yXt(i,s)}}}(this)}get Hp(){return this.x4}set Hp(t){this.x4=t}get Iqt(){return this.MXt.some((t=>t.Wqt===be.bFt))}get lqt(){return this._Yt}get P7(){return this.MXt}get R7(){var t;return null!=(t=this.DVt)?t:null}get U7(){return ge(this.IVt,(t=>t.U7))}get Q7(){return this.IVt.filter((t=>!t.Hf))}Hm(){var t;if(0===this.MXt.length)return;const i=this.MXt[0];(null==(t=this.x4)?void 0:t.skipAd)?this.x4.skipAd(i.B7()):this.KYt(i)}itt(t){}cXt(t,i){var e;const s=null!=i?i:this.TXt({timeOffset:null!=(e=t.timeOffset)?e:0}),n=new KJ(this._Yt,t,s);return s.Pqt(n),this.Ic.push(n),this.wqt.Co(new Vn(n)),n}lXt(t,i){t.Yn(i),this.wqt.Co(new uJ(t))}_Xt(t,i){if(!qt(this.MXt,t))throw new g("Cannot update ad progress on a non-started ad");const e=t.tXt,s=_.max(e,i);t.tXt=s;const n=this.Sqt.Tf();e<.25&&s>=.25&&this.wqt.Co(new n$(t,n)),e<.5&&s>=.5&&this.wqt.Co(new h$(t,n)),e<.75&&s>=.75&&this.wqt.Co(new a$(t,n))}Fqt(t){qt(this.MXt,t)||(this.MXt.push(t),t.Xl.Fqt(t),this.NXt(t.Xl),this.wqt.Co(new ta(t,this.Sqt.Tf())))}KYt(t){if(!qt(this.MXt,t))return;const i=t.Xl.Qqt(t);this.wqt.Co(new $J(t,t.tXt)),this.DXt(t,i)}gXt(t){if(!qt(this.MXt,t))return;const i=t.Xl.Qqt(t);this.wqt.Co(new nn(t,this.Sqt.Tf())),this.DXt(t,i)}Bqt(t){if(!qt(this.Ic,t))return;const i=t.Xl.Qqt(t);To(this.Ic,t),t.Xl.Bqt(t),this.wqt.Co(new e$(t.Xl)),this.DXt(t,i)}wXt(t){const i=new WJ(this._Yt,t);return this.IVt.push(i),this.wqt.Co(new Mn(i)),i}AXt(t,i){t.Yn(i),this.wqt.Co(new nh(t))}vXt(t){if(qt(this.IVt,t)){for(const i of t.Oc.slice())this.Bqt(i);To(this.IVt,t),this.wqt.Co(new yn(t))}}mXt(){for(const t of this.IVt.slice())this.vXt(t)}pXt(t){this.wqt.Co(new Go(Jo.GENERAL,t.message))}yXt(t,i){const e=new $i(null!=i?i:Ui.AD_ERROR,t.message,t);this.Sqt.IP(e)}IXt(t){return Zt(this.IVt,(i=>i.ibt===t))}TXt(t){var i;return null!=(i=this.IXt(t.timeOffset))?i:this.wXt(t)}DXt(t,i){To(this.MXt,t);const e=t.Xl;0!==this.MXt.length||this.DVt!==e||i||(e.jqt(),this.NXt(void 0))}NXt(t){this.DVt!==t&&(void 0!==this.DVt&&this.wqt.Co(new Ss(this.DVt)),this.DVt=t,void 0!==t&&this.wqt.Co(new sc(t)))}fXt(t){const i=Zt(this.Ic,(i=>i.B7()===t));if(void 0===i)throw new g('Invalid ad for integration "'+this._Yt+'"');return i}dXt(t){const i=Zt(this.IVt,(i=>i.B7()===t));if(void 0===i)throw new g('Invalid ad break for integration "'+this._Yt+'"');return i}async ga(t,i){var e;if(Bo(i),null==(e=this.x4)?void 0:e.setSource){let i=await Promise.resolve(this.x4.setSource(t));return Xs(i)&&(i=t),jh(i,this.Sqt.wd)}return t}async SXt(){var t;(null==(t=this.x4)?void 0:t.resetSource)?await Promise.resolve(this.x4.resetSource()):this.mXt()}async gn(){var t;(null==(t=this.x4)?void 0:t.destroy)&&await Promise.resolve(this.x4.destroy()).catch(El),this.mXt(),this.NXt(void 0),this.x4=void 0,this.wqt.gn()}constructor(t,i){this.wqt=new Rh,this.Ic=[],this.IVt=[],this.MXt=[],this._Yt=t,this.Sqt=i}};var d$=class extends zJ{M7(){return this.EXt}get bXt(){return this.LXt}v_(){this.qHt.v_(),this.EXt.v_()}p_(){void 0===this.Bz?(void 0!==this.kXt&&this.CXt(this.kXt),super.p_()):this.Co(new Bi(this.Bz))}async ga(t,i){Bo(i);let e=t;if(e)for(const t of this.xXt)e=await t.ga(e,i);if(await super.ga(e,i),Bo(i),null==e?void 0:e.ads){const t=Boolean(e.blockContentIfAdError);this.EXt.Eqt(e.playAdsAfterTime);for(const i of e.ads)this.EXt.n4(i,Ur.G7,t)}}async y_(){this.Bz=void 0,this.GB=void 0,await this.EXt.tr(),this.RHt(),await super.y_();for(const t of this.xXt)await t.SXt()}CXt(t){this.OXt=this.Qo.Gf;const i=this.Qo.c_,e=this.Qo.Pf;t.l_(i),t.Rf(e),this.LXt=t,this.kXt=void 0,this.gT(t)}Lqt(t){void 0===this.LXt&&(this.kXt=t)}RHt(){this.kXt=void 0,void 0!==this.LXt&&(this.qHt.Gf=this.OXt,this.qHt.c_=this.c_,this.qHt.Pf=this.Pf,this.gT(this.qHt),this.LXt=void 0)}Ef(){var t;return null!=(t=this.GB)?t:super.Ef()}Lf(){var t;return null!=(t=this.Bz)?t:super.Lf()}IP(t){void 0===this.Lf()&&(this.Bz=t,this.GB=De(t),this.Co(new Bi(t)))}E_(t){return void 0===this.LXt&&this.EXt.mqt(t)}Y7(t,i){try{const e=new c$(t,this);e.Hp=i(e.va),this.EXt.ett(e),this.xXt.push(e)}catch(i){this.EXt.Co(new Go(Jo.GENERAL,'Error while constructing ad integration "'+t+'": '+i+'"'))}}async gn(){for(const t of this.xXt)await t.gn().catch(El);await this.EXt.gn(),this.RHt(),await super.gn()}constructor(t,i){super(t),this.xXt=[],this.Bz=void 0,this.GB=void 0,this.OXt=1,this.qHt=t,this.EXt=new VJ(this),this.EXt.Tqt.hqt(i,t,this,t.wd)}};Uj((t=>new d$(t,Ds.Ib)),lt.S7);var l$,f$=0!==Vt.qE?Vt.qE:Vt.oE,_$=Vt.Ga&&f$<12,ou=class extends Ci{get Mf(){return this.Tf()}set Mf(t){this.Nf(t)}d7(){return this.Qo.d7()}get ct(){return this.Td()}get kf(){return this.fT}get t_(){return this.i_()}get f_(){return this.Gz}get wqt(){return this.jXt}get ht(){return this.lT}get Iqt(){return this.Sqt.bXt===this}Af(){return Ai.SB().ks()}mf(){}pf(t){}Vf(){return 1}Wf(t){}qf(){return new Ai([0,this.Mf]).ks()}s_(){return!1}n_(){return this.Dl}o_(){return this._T}cs(){return this.w_().cs}w_(){return this.xB}ka(){}async gn(){this.Vo(),this.lT.gn(),this._T.gn(),this.Dl.gn(),this.jXt.gn(),this.Qo.fn(l.Hg,this.Ds)}zXt(){_$&&this.PXt(),this.Iqt||this.Sqt.CXt(this)}RHt(){this.Iqt&&(_$&&this.BXt(),Vt.vb&&this.we.querySelectorAll("video[src]").forEach((t=>{t.src=""})),i.Ys.Ktt&&this.Qo.I_(),this.Sqt.RHt())}PXt(){this.RXt||(Or.addEventListener("blur",this.UXt),Or.addEventListener("focus",this.QXt),this.RXt=!0)}BXt(){Or.removeEventListener("blur",this.UXt),Or.removeEventListener("focus",this.QXt),this.RXt=!1}FXt(){requestAnimationFrame((()=>this.Qo.be()))}constructor(t,i){super(t,!0),this.Sqt=i,this.RXt=!1,this._T=new yi,this.lT=new yi,this.Dl=new We,this.fT=new Wo,this.jXt=new Rh,this.xB=new Wu,this.Gz=new Ht,this.UXt=()=>{this.Qo.ge()},this.QXt=()=>{this.FXt()},this.Qo.yn(l.Hg,this.Ds)}},g$=0,w$="theoplayer-wrapper",A$=class t{get YXt(){return this.GXt}get VXt(){return this.WXt}get HXt(){return 1===this.WXt.length&&NK(this.WXt[0].sources.type)}get qXt(){return this.XXt}ZXt(t){const i=this.KXt===t.timeOffset;return!this.JXt&&i}get $Xt(){return this.tZt}get iZt(){return SK(this.eZt)&&!this.JXt}get KXt(){return this.eZt}get Kl(){return this.sZt}nZt(){if(S(this.sZt)){let t=this.KXt;if(void 0===t)return void(this.sZt=0);if("string"==typeof t&&SK(t)){const i=this.Qo.Td();S(i)||i===1/0||(t=bZ(t)*i)}S(t)||(this.sZt=t)}}get rZt(){return this.hZt}set rZt(t){this.hZt=t}get oZt(){return this.aZt}set oZt(t){this.aZt=t,this.uZt=!1}get cZt(){return this.dZt}lZt(t){this.dZt.push(t)}fZt(){if(!this.JXt){let t,i;const e=this.GXt===Ur.G7&&void 0===this._Zt&&1===this.WXt.length,s=this.WXt[0];if(NK(s.sources.type)||e)t=s.sources.src;else{if(S(this.Qo.Td())&&"end"===this.gZt())return;i=this.wZt()}let n=this.Qo.Td();(S(n)||n===1/0)&&(n=-3),this.JXt={AZt:this.Qo.we.offsetWidth,vZt:this.Qo.we.offsetHeight,mZt:this.Qo.we.offsetWidth,pZt:this.Qo.we.offsetHeight,yZt:this.i7,MZt:this.LB,TZt:t,NZt:i,DZt:s.omidAccessModeRules,IZt:n}}return this.JXt}wZt(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.WXt.map(((t,i)=>this.SZt(t.sources,i))).join("\n")+"</vmap:VMAP>"}SZt(t,i){const e=this.gZt(),s=t.src;return'<vmap:AdBreak timeOffset="'+e+'" breakType="linear,nonlinear" breakId="theoplayer-break-'+this.Mg+"-"+i+'"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:VASTAdData><VAST version="3.0"><Ad id="'+w$+"-"+this.Mg+"-"+i+'"><Wrapper allowMultipleAds="true" followAdditionalWrappers="true"><VASTAdTagURI><![CDATA['+s+"]]></VASTAdTagURI></Wrapper></Ad></VAST></vmap:VASTAdData></vmap:AdSource></vmap:AdBreak>"}gZt(){if(0===this.KXt)return"start";if(this.KXt===1/0)return"end";const t=this.KXt;if("string"==typeof t&&SK(t)){const i=bZ(t)*this.Qo.Td();return Vi.oYt(i)}return Vi.oYt(this.KXt||0)}EZt(t){this.WXt.push(t)}bZt(t){const i=w$+"-"+this.Mg+"-";for(const e of t)if(Df(e,i)){const t=Number(e.slice(i.length));if(!S(t)&&t>=0&&t<this.WXt.length)return t}return-1}static LZt(t){if(void 0!==t)return-1===t?1/0:t}kZt(){this.tZt=!0}get DT(){return this.i7}set DT(t){this.i7=t}get Pf(){return this.LB}set Pf(t){this.LB=t}constructor(i,e,s,n){this.GXt=e,this.Qo=s,this.XXt=n,this.sZt=NaN,this.hZt=!1,this.aZt=!1,this.tZt=!1,this.dZt=[],this.i7=!1,this.LB=!1,this.WXt=[],this.Mg=++g$,this._Zt=i.timeOffset,this.eZt=t.LZt(this._Zt),this.nZt(),this.WXt.push(i)}},v$=class{get CZt(){return this.xZt.CZt}get OZt(){return this.xZt.OZt}get U7(){return this.xZt.U7}get t(){return this.xZt.t}Eqt(t){this.jZt=t}zZt(t){return!(this.CZt&&!this.CZt.$Xt&&"nonlinear"!==this.OZt.Wqt)||this.CZt.Kl>t.Kl&&this.CZt.Kl!==t.Kl}PZt(t){if(t.length)return t.sort(((t,i)=>t.Kl-i.Kl))[0]}BZt(){if(this.U7.length)return this.PZt(this.RZt(this.t.Tf()))}UZt(){if(!(void 0!==this.jZt&&this.jZt>=0))return this.U7.filter((t=>!t.rZt&&0===t.Kl&&t!==this.CZt))[0]}RZt(t){if(!this.QZt&&(this.QZt=!this.U7.some((t=>S(t.Kl))),!this.QZt))return[];const i=this.U7.filter((i=>!i.rZt&&(i.HXt||!S(i.Kl)&&t<=i.Kl)));return void 0===this.jZt?i:i.filter((t=>t.HXt||void 0===t.KXt||t.Kl>this.jZt))}constructor(t){this.QZt=!1,this.xZt=t,this.jZt=void 0}};!function(t){t[t.FZt=0]="FZt",t[t.YZt=1]="YZt",t[t.GZt=2]="GZt"}(l$||(l$={}));var G,m$,ju,Du,p$=class{v_(){this.bo=!0,this.VZt&&this.WZt()}HZt(t,i){this.qZt(t,i);const e=Zt(this.U7,(i=>i.ZXt(t)));if(e)e.EZt(t);else{var s;const e=new A$(t,i,this.Qo,null==(s=t.replaceContent)||s);this.Uqt.push(e),2===this.XZt&&this.ZZt.wXt(e.Kl,e,e.KXt),this.KZt(i,e)}}get OZt(){return this.JZt}get U7(){return this.Uqt}get t(){return this.Qo}get Yzt(){return Boolean(this.Wgt)}get XZt(){return this.$Zt}tKt(){if(To(this.U7,this.CZt),this.CZt){for(const t of this.CZt.cZt)this.ZZt.iKt();this.CZt=void 0}}eKt(){for(const t of this.Uqt)for(const i of t.cZt)this.ZZt.sKt(i,!0);No(this.Uqt)}async nKt(t){this.tKt(),this.rKt=!0,this.CZt=t,this.hKt=t.Kl,this.Wgt=this.oKt(t),await this.Wgt,this.Wgt=void 0}async oKt(t){this.aKt(t);const i=t.fZt();if(!i)return this.rKt=!1,void(this.CZt=void 0);const e=this.JZt.uKt(i);t.rZt=!0;try{await e,t.YXt===Ur.F7&&this.JZt.cKt()}catch(t){0,this.CZt=void 0,await this.WZt()}}aKt(t){this.bo?t.DT=!0:t.DT=this.Sqt.DT,t.Pf=this.Sqt.Pf}dKt(){var t;return null!=(t=this.lKt.UZt())?t:this.lKt.BZt()}async WZt(){if(this.CZt&&!this.CZt.$Xt)return this.Wgt;const t=this.dKt();t&&await this.nKt(t)}get CZt(){return this.fKt}set CZt(t){this.fKt=t}get rKt(){return this._Kt}set rKt(t){this._Kt=t}tr(){this.tKt(),No(this.Uqt),this.hKt=0,this.CZt=void 0,this.Wgt=void 0,this.rKt=!1}oZt(){this.rKt=!1,this.CZt&&(this.CZt.oZt=!0)}async KZt(t,i){t===Ur.F7&&this.bo&&this.lKt.zZt(i)&&!this.Yzt&&"linear"!==this.JZt.Wqt&&(!this.CZt||this.CZt&&this.CZt.rZt)&&(await Promise.resolve(),await this.nKt(i))}kZt(){this.CZt&&this.CZt.kZt()}get gKt(){if(this.Yzt||this.rKt)return!1;if(this.CZt&&!this.CZt.$Xt)return!1;return!!this.Uqt.filter((t=>this.CZt!==t)).length&&Boolean(this.dKt())}async wKt(){if(!this.gKt)return void 0;const t=this.dKt();t&&await this.nKt(t)}qZt(t,i){const e=t.sources.type,s=i===Ur.G7&&void 0===t.timeOffset,n=NK(e)||s?1:2;n!==this.$Zt&&(this.$Zt=n,this.eKt(),this.JZt.$Gt&&!this.Yzt&&"linear"!==this.JZt.Wqt&&(this.JZt.$Gt.Qd(),this.CZt=void 0,this.Wgt=void 0),this.hKt=0,this.VZt=!0)}Eqt(t){this.lKt.Eqt(t)}gn(){this.Qo.fn(l.Xg,this.xU)}constructor(t,i,e,s,n){this.$Zt=0,this.Wgt=void 0,this._Kt=!1,this.xU=()=>{const t=this.Uqt.filter((t=>t.iZt));for(const i of t){i.nZt();const t=i.KXt;this.ZZt.AKt(t,i.Kl)}this.bo&&this.gKt&&this.WZt()},this.Uqt=[],this.JZt=t,this.bo=!1,this.VZt=!1,this.Qo=i,this.Sqt=e,this.CZt=void 0,this.hKt=0,this.lKt=new v$(this),this.n7=s,this.ZZt=n,this.Qo.yn(l.Xg,this.xU)}};function y$(t,i){if(t===G.vKt){const t=i;return{mKt:t.adBreakDuration,pKt:t.adPosition,Mf:t.currentTime,ct:t.duration,yKt:t.totalAds}}return i}function M$(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return Du.MKt;case google.ima.AdError.Type.AD_PLAY:return Du.TKt}}function T$(t){return Ut(t)&&Ld(t.getVastErrorCode)}function N$(t){const i=t.getInnerError(),e=i&&T$(i)?N$(i):void 0;return{Ob:t.getMessage(),MFt:t.getErrorCode(),NKt:t.getVastErrorCode(),Rg:M$(t.getType()),DKt:e}}function D$(t){if(Yt(t))return t}!function(t){t.IKt="contentResumeRequested",t.SKt="contentPauseRequested",t.EKt="click",t.Xg="durationChange",t.bKt="expandedChanged",t.LKt="start",t.kKt="impression",t.Qw="pause",t.CKt="resume",t.vKt="adProgress",t.xKt="adBuffering",t.OKt="firstQuartile",t.GQt="midpoint",t.jKt="thirdQuartile",t.VQt="complete",t.zKt="userClose",t.PKt="linearChanged",t.BKt="loaded",t.RKt="adCanPlay",t.UKt="adMetadata",t.QKt="adBreakReady",t.FKt="interaction",t.YKt="allAdsCompleted",t.GKt="skip",t.VKt="skippableStateChanged",t.WKt="log",t.HKt="viewableImpression",t.qKt="volumeChange",t.XKt="mute"}(G||(G={})),(m$||(m$={})).ZKt="adError",function(t){t[t.KKt=-1]="KKt",t[t.JKt=-1]="JKt",t[t.$Kt=-1]="$Kt",t[t.tJt=101]="tJt",t[t.iJt=102]="iJt",t[t.eJt=200]="eJt",t[t.sJt=201]="sJt",t[t.nJt=202]="nJt",t[t.rJt=300]="rJt",t[t.hJt=301]="hJt",t[t.oJt=302]="oJt",t[t.aJt=303]="aJt",t[t.uJt=400]="uJt",t[t.cJt=402]="cJt",t[t.dJt=403]="dJt",t[t.lJt=405]="lJt",t[t.fJt=500]="fJt",t[t._Jt=501]="_Jt",t[t.gJt=-1]="gJt",t[t.wJt=503]="wJt",t[t.AJt=602]="AJt",t[t.vJt=900]="vJt",t[t.mJt=901]="mJt",t[t.pJt=1005]="pJt",t[t.yJt=1007]="yJt",t[t.MJt=1009]="MJt",t[t.TJt=1010]="TJt",t[t.NJt=1011]="NJt",t[t.DJt=1012]="DJt",t[t.IJt=1013]="IJt",t[t.SJt=1020]="SJt",t[t.EJt=1021]="EJt",t[t.bJt=1101]="bJt",t[t.LJt=1204]="LJt",t[t.kJt=1205]="kJt",t[t.CJt=1300]="CJt",t[t.xJt=-1]="xJt",t[t.OJt=-1]="OJt",t[t.jJt=-1]="jJt",t[t.zJt=-1]="zJt"}(ju||(ju={})),function(t){t.MKt="adLoadError",t.TKt="adPlayError"}(Du||(Du={}));var I$=class extends Pl{PJt(t){this.JZt.Co(t)}BJt(t){this.tVt=t,this.tVt.yn(m$.ZKt,this.RJt),this.tVt.yn(G.SKt,this.UJt),this.tVt.yn(G.IKt,this.QJt),this.tVt.yn(G.YKt,this.FJt),this.tVt.yn(G.LKt,this.YJt),this.tVt.yn(G.VQt,this.GJt),this.tVt.yn(G.GKt,this.VJt),this.tVt.yn(G.zKt,this.WJt),this.tVt.yn(G.EKt,this.HJt),this.tVt.yn(G.RKt,this.qJt),this.tVt.yn(G.Qw,(()=>{this.JZt.Ff||(this.JZt.XJt(!0),this.JZt.Co(new ye(this.JZt.Mf))),this.ZJt(!0)})),this.tVt.yn(G.CKt,(()=>{this.JZt.Ff&&(this.JZt.XJt(!1),this.JZt.Co(new Ps(this.JZt.Mf)))})),this.tVt.yn(G.XKt,(()=>{const i=t.d_();i>=0&&this.KJt(i)})),this.tVt.yn(G.qKt,(()=>{const i=t.d_();i>=0&&this.KJt(i)})),this.tVt.yn(G.UKt,(t=>{this.$Jt.JJt(t.type)})),this.tVt.yn(G.Xg,(t=>{t.H7&&this.t$t(t.H7.ct)})),this.tVt.yn(G.WKt,(async t=>{const i=t.i$t.adError,e=T$(i)?N$(i):void 0;e&&(this.e$t(e)?await this.s$t(t):this.n$t(e)?await this.r$t(e):this.h$t(e)&&this.o$t(e))})),this.tVt.yn(G.BKt,(t=>{if(t.H7&&(this.JZt.oZt(),this.$Jt.a$t(t.H7),this.u$t=0,t.H7.c$t)){var i;const t=this.JZt.Jf,e=ae.aT;this.JZt.T0(e);const s=this.JZt.Mf,n=this.JZt.Jf;n!==t&&this.PJt(new uw(s,n)),null==(i=this.tVt)||i.l_(this.JZt.d$t()),this.PJt(new ps(s,e))}})),this.tVt.yn([G.xKt,G.kKt,G.OKt,G.GQt,G.jKt],(t=>{t.H7&&this.$Jt.l$t(t.H7,t.type,this.JZt.Mf)})),this.tVt.yn(G.OKt,this.f$t),this.tVt.yn(G.vKt,this._$t)}async switchToPlayerIfNoNextAd(){if(this.tVt){const t=this.tVt.g$t();t&&this.w$t(t)||(this.JZt.gKt()?await this.JZt.wKt():(this.JZt.A$t(),this.Qo.Ff&&!this.Qo.If&&this.Qo.p_()))}else if(this.JZt.gKt())await this.JZt.wKt();else{const t=this.JZt.Ff;this.JZt.A$t(),t||this.Qo.p_()}}w$t(t){const i=t.v$t,e=null==i?void 0:i.yKt;return(null==i?void 0:i.pKt)!==e}j$(){this.JZt.jc&&(m(this.JZt.jc),this.JZt.jc=null)}h$t(t){return t.Rg===Du.MKt}n$t(t){return t.Rg===Du.TKt}e$t(t){return t.MFt===ju.MJt}async r$t(t){var i;this.o$t(t);const e=[ju.uJt,ju.mJt,ju.EJt,ju.kJt];var s;this.JZt.ott||qt(e,t.MFt)||qt(e,null==(i=t.DKt)?void 0:i.MFt)||(this.JZt.m$t.rKt=!1,null==(s=this.JZt.m$t.CZt)||s.kZt(),await this.switchToPlayerIfNoNextAd())}o$t(t){this.JZt.pXt(t)}async p$t(){this.$Jt.iKt(),this.JZt.kZt(),"nonlinear"===this.JZt.Wqt&&(this.$Jt.y$t(-1,!1),this.JZt.M$t(void 0)),"nonlinear"!==this.JZt.Wqt&&"none"!==this.JZt.Wqt||this.JZt.gKt()&&await this.JZt.wKt(),this.JZt.T$t(),this.JZt.Iqt?this.JZt.RHt():this.N$t()&&this.Qo.Co(new ie(this.Qo.Tf()))}N$t(){return this.JZt.D$t&&!this.JZt.I$t&&this.Qo.If}setCountdownTimer(){this.j$(),this.JZt.jc=v((()=>this.ZJt()),250)}async s$t(t){void 0!==t.H7&&(this.JZt.m$t.rKt=!1,this.JZt.kZt(),this.JZt.gKt()?await this.JZt.wKt():this.JZt.XJt(!0))}t$t(t){this.JZt.ct!==t&&t>=0&&(this.JZt.t0(t),this.PJt(new ht(this.JZt.ct)))}KJt(t){this.JZt.d$t()!==t&&(0===t?this.JZt.S$t(t,!0,!1):this.JZt.S$t(t,!1,!1))}async E$t(){this.JZt.b$t&&void 0!==this.Qo.Ef()&&(this.L$t=new na,await this.Qo.ga(this.Qo.Wa(),this.L$t.Hd),this.k$t&&this.Qo.Nf(this.k$t),this.k$t=void 0)}ZJt(t){if(this.tVt){const t=this.tVt.C$t();t>this.JZt.ct&&this.t$t(_.round(t))}const i=this.JZt.Mf;(t||!this.JZt.Ff&&i!==this.JZt.x$t)&&(this.JZt.Co(new nc(i,void 0)),this.JZt.x$t=i)}tr(){this.L$t&&(this.L$t.Xd(),this.L$t=void 0),this.O$t=!1,this.u$t=0}gn(){this.tr(),this.Vo()}constructor(t,i,e){super(),this.JZt=t,this.Qo=i,this.$Jt=e,this.O$t=!1,this.L$t=void 0,this.k$t=void 0,this.u$t=0,this.f$t=t=>{if(!t.H7||!t.H7.v$t)return;const i=t.H7.v$t;this.$Jt.AXt(i.ibt,i.yKt,i.KGt)},this._$t=t=>{var i,e,s;if(this.u$t>=5)return;this.u$t++;const n=t.i$t;if(!function(t){return Ut(t)&&void 0!==t.mKt&&void 0!==t.yKt}(n))return;const r=null==(s=this.tVt)||null==(e=s.g$t())||null==(i=e.v$t)?void 0:i.ibt;void 0!==r&&this.$Jt.AXt(r,n.yKt,n.mKt)},this.RJt=async t=>{t.i$t.j$t&&await this.r$t(t.i$t.j$t)},this.FJt=async()=>{this.O$t=!0,this.JZt.kZt(),await this.QJt()},this.YJt=t=>{if(!t.H7)return;const i=t.H7;this.JZt.M$t(i),this.JZt.ge(),this.JZt.z$t(),this.$Jt.P$t(i);const e=i.ct;if(this.t$t(e),i.c$t){const t=this.JZt.Mf,i=this.JZt.Jf;this.JZt.T0(ae.cT),this.PJt(new ns(t,i)),this.PJt(new gt(t,i)),this.PJt(new us(t,i)),this.JZt.Ff||this.PJt(new tn(this.JZt.Mf)),this.setCountdownTimer(),this.ZJt(!0)}else this.JZt.RHt(),this.Qo.ge(),this.JZt.Ff||this.Qo.p_()},this.GJt=t=>{var i;if(!t.H7)return;const e=t.H7;if(this.j$(),this.$Jt.y$t(this.JZt.ct,e.c$t),this.JZt.Jf!==ae.aT){const t=ae.aT;this.JZt.T0(t);const i=this.JZt.Mf;this.PJt(new uw(i,t))}this.t$t(NaN),this.JZt.B$t=!1,null==(i=this.tVt)||i.l_(this.JZt.d$t())},this.VJt=t=>{t.H7&&(this.GJt(t),this.$Jt.VJt(t.H7,this.JZt.Mf,this.JZt.ct))},this.WJt=t=>{t.H7&&(this.$Jt.y$t(-1,t.H7.c$t),this.JZt.kZt(),!t.H7.c$t&&this.JZt.gKt()&&this.JZt.wKt())},this.HJt=t=>{t.H7&&(t.H7.c$t?this.JZt.m_():this.Qo.m_())},this.qJt=()=>{var t;(this.JZt.B$t=!0,this.JZt.R$t)&&(null==(t=this.tVt)||t.m_(),this.JZt.R$t=!1)},this.UJt=t=>{var i;if(!t.H7)return;this.JZt.b$t&&(this.k$t=this.Qo.Tf(),this.Qo.D_(),this.Qo.g_=!0),this.JZt.U$t=!0;const e=t.H7;this.$Jt.Md(e);const s=e.ct;this.JZt.M$t(e),this.t$t(s),this.JZt.XJt(!1),this.JZt.ge(),this.JZt.zXt(),this.JZt.b$t||this.Qo.be(),this.Qo.m_(),this.JZt.Q$t(e);0===(null==(i=e.v$t)?void 0:i.ibt)||this.JZt.Co(new Yu(this.JZt.Mf))},this.QJt=async t=>{const i=null==t?void 0:t.H7;this.JZt.U$t=!1,"linear"===this.JZt.Wqt&&this.$Jt.Pd(),i&&i.ct>=0&&this.t$t(i.ct),this.Qo.Td()===1/0&&this.JZt.F$t(),this.JZt.B$t=!1,this.O$t&&await this.p$t(),this.JZt.XJt(!0);try{await this.E$t()}catch(t){return void(ut(t)||this.Co(new Pr(t)))}if(this.JZt.RHt(),this.JZt.be(),this.Qo.If||this.Qo.p_(),i&&this.JZt.M$t(i),this.JZt.D$t){if(this.JZt.b$t){var e;const t=this.Qo.A_(),i=null==(e=this.Qo.bt)?void 0:e.src;t&&i&&(t.src=i)}this.JZt.I$t=!0}this.Qo.g_=!1,this.JZt.gKt()&&await this.JZt.wKt()}}},S$=class extends ct{get _Yt(){return zu.pVt}constructor(t,i,e){super(t),this.Y$t=i,this.G$t=e}},E$=class extends HJ{set V$t(t){this.W$t=t}get V$t(){return this.W$t}get _Yt(){return zu.so}_Vt(){var t;return null==(t=this.H$t)?void 0:t.$Rt}get q$t(){var t;return null==(t=this.H$t)?void 0:t.YUt}get NUt(){var t;return null==(t=this.H$t)?void 0:t.NUt}get Jz(){var t;return null==(t=this.H$t)?void 0:t.Jz}get X$t(){var t,i;return null!=(i=null==(t=this.H$t)?void 0:t.X$t)?i:[]}get Z$t(){var t,i;return null!=(i=null==(t=this.H$t)?void 0:t.Z$t)?i:[]}get K$t(){var t,i;return null!=(i=null==(t=this.H$t)?void 0:t.K$t)?i:[]}fa(){return function(t,i){return xl(t,{bitrate:0,contentType:void 0,mediaUrl:void 0,traffickingParameters:void 0,traffickingParametersString:void 0,universalAdIds:[],get apiFramework(){return i.q$t},get creativeId(){return i.NUt},get title(){return i.Jz},get wrapperAdIds(){return i.X$t},get wrapperAdSystems(){return i.Z$t},get wrapperCreativeIds(){return i.K$t}})}(qJ(this),this)}J$t(t){this.H$t=t;const i=b$(t);this.Yqt(t.vQt,t.$$t,t.t0t,t.ct,i,-1)}constructor(t,i){super(t,i),this.W$t=0,this.H$t=void 0}};function b$(t){return t.aUt.map((t=>new XJ(t)))}var L$=class extends HJ{fa(){return function(t,i){return xl(t,{get adSystem(){return i._Vt()},get apiFramework(){return i.q$t},get bitrate(){return i.i0t},get contentType(){return i.qz},get creativeId(){return i.NUt},get mediaUrl(){return i.e0t},get title(){return i.Jz},get traffickingParameters(){return i.s0t},get traffickingParametersString(){return i.n0t},get wrapperAdIds(){return i.X$t},get wrapperAdSystems(){return i.Z$t},get wrapperCreativeIds(){return i.K$t},get universalAdIds(){return i.cUt}})}(qJ(this),this)}J$t(t){this.H$t=t,this.Yqt(t.vQt,t.$$t,t.t0t,t.ct,b$(t),t.r0t),this.Hqt=t.c$t?be.bFt:be.LFt}get _Yt(){return zu.pVt}_Vt(){return this.H$t?ah(this.H$t.$Rt):void 0}get q$t(){return this.H$t?ah(this.H$t.YUt):void 0}get i0t(){return this.H$t?this.H$t.h0t:0}get qz(){return this.H$t?ah(this.H$t.qz):void 0}get NUt(){return this.H$t?ah(this.H$t.NUt):void 0}get o0t(){return this.H$t?ah(this.H$t.o0t):void 0}get e0t(){var t;const i=null==(t=this.H$t)?void 0:t.e0t;return Yt(i)?i:this.a0t}set e0t(t){this.a0t=t}get Jz(){var t;return null==(t=this.H$t)?void 0:t.Jz}get s0t(){return this.H$t?ah(this.H$t.s0t):void 0}get n0t(){return this.H$t?ah(this.H$t.n0t):void 0}get X$t(){var t,i;return null!=(i=null==(t=this.H$t)?void 0:t.X$t)?i:[]}get Z$t(){var t,i;return null!=(i=null==(t=this.H$t)?void 0:t.Z$t)?i:[]}get K$t(){var t,i;return null!=(i=null==(t=this.H$t)?void 0:t.K$t)?i:[]}get cUt(){var t,i;return null!=(i=null==(t=this.H$t)?void 0:t.cUt.map((t=>({adIdRegistry:t.u0t,adIdValue:t.c0t}))))?i:[]}constructor(t){super(t,be.rT),this.H$t=void 0,this.a0t=void 0}};function ah(t){return null===t?void 0:t}var k$=class{get wqt(){return this.$Jt.wqt}get lqt(){return this.d0t}get Iqt(){return this.$Jt.Iqt}get R7(){var t;return null!=(t=this.$Jt.R7)?t:null}get P7(){const t=this.$Jt.l0t;return t?[t]:[]}get U7(){return this.$Jt.U7}get Q7(){return this.$Jt.Q7}itt(t){this.$Jt.itt(t)}Hm(){this.$Jt.Hm()}gn(){return Promise.resolve()}constructor(t,i){this.$Jt=t,this.d0t=i}},Nc=class{get f0t(){return this._0t}get wqt(){return this.jXt}get Iqt(){return this.g0t}get l0t(){return this.gVt}get R7(){return this.DVt}get U7(){return ge(this.IVt,(t=>{if(t.Hf)return[];const i=t.Oc;if(t===this.DVt&&void 0!==this.gVt){const t=i.indexOf(this.gVt);if(t>=0)return i.slice(t+1)}return i}))}get Q7(){return this.IVt.filter((t=>!t.Hf))}constructor(t,i){this.jXt=t,this.IVt=[],this.g0t=!1,this._0t=new k$(this,i)}},C$=class extends ee{fa(){return new x$(this.H7.B7())}constructor(t){super("w0t",t)}},x$=class extends vo{constructor(t){super("adimpression",t)}},O$=class extends yo{fa(){return new j$(this.H7.B7())}constructor(t){super("A0t"),this.H7=t}},j$=class extends wn{constructor(t){super("adbuffering"),this.ad=t}},z$=class extends yo{fa(){return new P$}constructor(){super("v0t")}},P$=class extends wn{constructor(){super("admetadata")}},B$=class t extends Nc{m0t(t,i){for(let e=0;e<t;e++){const t=new L$(i);i.Pqt(t),this.wqt.Co(new Vn(t))}}wXt(t,i,e){let s=t;s===1/0&&(s=-1);const n=new S$(s,e,i);this.IVt.push(n),i.lZt(n),this.wqt.Co(new Mn(n))}AKt(t,i){for(const e of this.IVt)S(e.ibt)&&e.Y$t===t&&(e.ibt=i,this.wqt.Co(new nh(e)))}sKt(t,i){void 0===i&&(i=!1),i&&To(this.IVt,t),this.wqt.Co(new yn(t))}iKt(){if(this.R7){this.sKt(this.R7,!0);const t=Boolean(this.gVt&&this.gVt.Wqt===be.bFt);this.p0t(void 0,t)}}lXt(t,i){const e=i.v$t;if(!e)return;const s=e.pKt-1,n=t.Oc[s];return n.J$t(i),this.wqt.Co(new uJ(n)),n.Xl.KGt=e.KGt,n}get Iqt(){return this.y0t.Iqt}M0t(t){if(!qt(this.T0t,t)){if(t){if(this.gVt===t)return;this.gVt=t;for(const i of this.N0t)this.JJt(i,t,this.y0t.Mf)}else{if(!this.gVt)return;const t=new nn(this.gVt,this.gVt.Xl.ibt);this.T0t.push(this.gVt),this.gVt=void 0,this.jXt.Co(t)}No(this.N0t)}}p0t(t,i){if(t){var e;if((null==(e=this.R7)?void 0:e.ibt)===t.ibt)return;this.DVt=t,i&&this.wqt.Co(new sc(this.DVt))}else{if(!this.DVt)return;const t=new Ss(this.DVt);this.DVt=void 0,No(this.T0t),i&&this.jXt.Co(t)}}D0t(t){return this.IVt.filter((i=>Ua(i.ibt,t,.01)))[0]}static I0t(t,i){if(i.v$t)return t.Oc[i.v$t.pKt-1]}Md(t){if(!t.v$t)return;const i=t.v$t,e=this.D0t(i.ibt);e&&(No(this.N0t),this.p0t(e,t.c$t))}Pd(){this.R7&&this.wqt.Co(new Ss(this.R7)),No(this.N0t),this.iKt()}P$t(i){if(!this.DVt&&i.v$t){const t=this.D0t(i.v$t.ibt);this.p0t(t,i.c$t)}if(this.DVt){const e=t.I0t(this.DVt,i);if(!e)return;this.lXt(this.DVt,i);const s=i.e0t;Yt(s)&&!Yt(e.e0t)&&(e.e0t=s,this.wqt.Co(new uJ(e))),this.M0t(e),this.wqt.Co(new ta(this.gVt,e.Xl.ibt))}else 0}y$t(t,i){if(this.M0t(void 0),!i&&this.R7){const t=this.R7;this.p0t(void 0,!1),this.sKt(t)}}a$t(t){const i=t.v$t;if(!i)return;const e=this.D0t(i.ibt);if(!e)return;this.AXt(i.ibt,i.yKt,i.KGt);const s=this.lXt(e,t);s&&this.wqt.Co(new gc(s))}AXt(t,i,e){const s=this.D0t(t);if(!s)return;const n=s.Oc.length;if(i>n){const t=i-n;this.m0t(t,s),s.KGt=e,this.wqt.Co(new nh(s))}}VJt(i,e,s){if(!this.DVt)return;const n=t.I0t(this.DVt,i);if(n){const t=e/s;this.wqt.Co(new $J(n,t))}}l$t(i,e,s){if(!this.DVt)return;let n=this.gVt;if(!n){const s=t.I0t(this.DVt,i);if(!s||qt(this.T0t,s))return void this.N0t.push(e);n=s,this.lXt(this.DVt,i),this.M0t(n)}this.JJt(e,n,s)}JJt(t,i,e){t===G.UKt?this.wqt.Co(new z$):t===G.kKt&&i?this.wqt.Co(new C$(i)):t===G.xKt&&i?this.wqt.Co(new O$(i)):t===G.OKt&&i&&e?this.wqt.Co(new n$(i,e)):t===G.GQt&&i&&e?this.wqt.Co(new h$(i,e)):t===G.jKt&&i&&e&&this.wqt.Co(new a$(i,e))}Hm(){this.y0t.Hm()}itt(t){this.y0t.itt(t)}tr(){const t=Boolean(this.gVt&&this.gVt.Wqt===be.bFt);this.M0t(void 0),this.p0t(void 0,t);for(const t of this.IVt)this.sKt(t);No(this.IVt),No(this.N0t),No(this.T0t)}gn(){this.tr()}constructor(t,i){super(t,zu.pVt),this.y0t=i,this.N0t=[],this.T0t=[]}};function R$(t){const i=s.google.ima.settings;t.ads&&t.ads.vpaidMode&&s.google.ima.settings.setVpaidMode(function(t){const i=s.google.ima.ImaSdkSettings.VpaidMode;switch(t){case oa.ENABLED:return i.ENABLED;case oa.INSECURE:return i.INSECURE;case oa.DISABLED:default:return i.DISABLED}}(t.ads.vpaidMode)),i.setPlayerVersion("8.0.0"),i.setPlayerType("THEOplayer"),i.setAutoPlayAdBreaks(!0),i.setDisableCustomPlaybackForIOS10Plus(!U$(t));const e=function(t){var i,e,s;const n=null==(e=t.ads)||null==(i=e.googleIma)?void 0:i.language;if(void 0!==n)return n;const r=null==(s=t.ui)?void 0:s.language;if(Qs(r))return r;return}(t);e&&i.setLocale(e)}function U$(t){return Vt.Ga&&t.allowNativeFullscreen}var Q$=class t extends ou{get _qt(){return this.ZZt.f0t}get S0t(){return this.ZZt}get m$t(){return this.xZt}get b$t(){return U$(this.LH)}E0t(t,i,e){i===Ur.G7&&void 0!==e&&(this.bqt=e),this.xZt.HZt(t,i)}static get lqt(){return zu.pVt}get lqt(){return t.lqt}get b0t(){return this.LH.ads.preload===In.MIDROLL_AND_POSTROLL}itt(t){const i=this.L0t();for(const e of i)Bu(e.sources,e.timeOffset)||t.n4(e,Ur.F7,!1)}L0t(){const t=[],{P7:i,U7:e}=this._qt,s=[];for(const n of i.concat(e)){const i=n.Xl.G$t;if(qt(s,i.Mg))continue;const e=i.bZt(n.X$t);e>=0?t.push(...i.VXt.slice(e)):t.push(...i.VXt),s.push(i.Mg)}for(const i of this.xZt.U7)i.rZt||t.push(...i.VXt);return Oo(t)}set Wqt(t){this.Hqt=t}get Wqt(){return this.Hqt}get $Gt(){return this.tVt}set $Gt(t){this.tVt=t,this.k0t=!1}Tf(){if(!this.$Gt)return 0;const t=this.$Gt.C$t();return S(this.ct)||t<0?0:this.ct-t}Nf(t){}Td(){return this.VL||NaN}t0(t){this.VL=t}Bf(){return this.Qo.Pf}Rf(t){this.S$t(this.c_,t,!0)}Yf(){return this.kB}XJt(t){this.kB=t}get B$t(){return this.C0t}set B$t(t){this.C0t=t}get ott(){return this.bqt}get D$t(){return this.x0t}get R$t(){return this.O0t}set R$t(t){this.O0t=t}get I$t(){return this.j0t}set I$t(t){this.j0t=t}h_(){var t,i,e;return null!=(e=null==(i=this.$Gt)||null==(t=i.g$t())?void 0:t.t0t)?e:0}u_(){var t,i,e;return null!=(e=null==(i=this.$Gt)||null==(t=i.g$t())?void 0:t.$$t)?e:0}gf(){return[]}Eqt(t){this.jZt=t,this.xZt.Eqt(t)}cKt(){!this.k0t&&this.$Gt&&(this.$Gt.Cn(),this.k0t=!0)}M$t(t){this.Wqt=t?t.c$t?"linear":"nonlinear":"none"}i_(){return Ai.SB().ks()}d_(){return this.Qo.c_}l_(t){this.S$t(t,this.Pf,!0)}d$t(){return this.Qo.Pf?0:this.Qo.c_}S$t(t,i,e){const s=this.Qo.c_!==t||this.Qo.Pf!==i;s&&(this.Qo.c_=t,this.Qo.Pf=i),this.$Gt&&e&&this.$Gt.l_(this.d$t()),s&&this.Co(new lo(this.Mf,this.c_))}Sf(){return!1}Ef(){if(this.z0t&&this.bqt)return this.z0t}Lf(){if(this.P0t&&this.bqt)return this.P0t}$f(){return this.M0}T0(t){this.M0=t,this.Co(new Lr(this.Mf,t))}get U$t(){return this.B0t}set U$t(t){this.B0t=t}v_(){this.Qo.fn(l.jh,this.R0t),this.bo||(this.bo=!0,this.xZt.v_(),this.z$t())}async p_(){if(this.U0t)return;this.Q0t.Xd(),this.Q0t=new na;const t=this.Ff;this.XJt(!1),this.Co(new Ps(this.Mf)),this.F0t()||(this.b$t||this.Qo.be(),this.Co(new Yu(this.Mf))),this.B$t||(this.R$t=!1);const i=Boolean(this.$Gt);this.U0t=this.xZt.WZt();try{await this.U0t}finally{this.U0t=void 0}try{Bo(this.Q0t.Hd)}catch(t){return}if(this.bo||this.R0t(),!this.z0t||!this.bqt)if(this.$Gt){if(t)if(i)try{Bo(this.Q0t.Hd),this.$Gt.Y0t(),this.Co(new tn(this.Mf))}catch(t){return}else this.cKt()}else this.bqt||(this.RHt(),this.Sqt.p_())}m_(){var t;this.Ff||(this.XJt(!0),this.Co(new ye(this.Mf))),this.Q0t.Xd(),this.B$t?null==(t=this.$Gt)||t.m_():this.R$t=!0}Hm(){var t;null==(t=this.$Gt)||t.Hm()}T$t(){this.$Gt&&(this.V0t.G0t(),this.$Gt.y_(),this.$Gt.Qd(),this.$Gt=void 0,this.Wqt="none",this.k0t=!1)}async y_(){var t;this.x$t=0,this.xZt.tr(),this.Q0t.Xd(),this.XJt(!0),this.x0t=!1,this.j0t=!1,this.B$t=!1,this.ZZt.tr(),this.T$t(),this.A$t(),null==(t=this.W0t)||t.tr(),this.R$t=!1,this.V0t.Qd()}ge(){this.H0t.ge(),this.b$t&&this.Qo.ge()}be(){this.H0t.be()}q0t(){return Boolean(this.$Gt)&&qt(this.$Gt.X0t(),-1)&&!this.x0t}oZt(){this.xZt.oZt()}gKt(){return this.xZt.gKt}kZt(){this.xZt.kZt()}wKt(){return this.xZt.wKt()}mqt(t){if(this.q0t()){if(t.type===l.Sh&&this.Qo.If)return!0;if(t.type===l.Jg)return this.x0t=!0,this.V0t.G0t(),!0}return!1}F0t(){return Boolean(this.$Gt&&this.$Gt.g$t())}async uKt(t){try{this.T$t();const i=this.Z0t();this.H0t.bW(),this.$Gt=await this.V0t.uKt(t,this.W0t,i),this.K0t(this.$Gt)}catch(t){this.J0t.r$t(t)}}K0t(t){if(t.l_(this.d$t()),this.xZt.XZt===l$.YZt){const i=t.X0t();if(i.length)for(const t of i)this.ZZt.wXt(t,this.xZt.CZt);else this.ZZt.wXt(this.xZt.CZt.Kl,this.xZt.CZt)}this.J0t.tr(),this.J0t.BJt(t)}A_(){if(this.tVt&&this.b$t&&this.F0t())return this.Qo.A_()}w_(){return this.b$t&&this.Iqt?this.Qo.ya:super.w_()}Z0t(){const t=!!(this.xZt.XZt===l$.YZt)&&this.b0t;let i,e;void 0!==this.LH.ads.googleIma.uiElements?i=this.LH.ads.googleIma.uiElements:this.LH.ads.showCountdown||(i=[]),void 0!==this.LH.ads.allowedMimeTypes&&(e=this.LH.ads.allowedMimeTypes);return{$0t:e,t1t:i,i1t:t,i0t:this.LH.ads.googleIma.bitrate,e1t:void 0,s1t:this.jZt}}z$t(){if(this.tVt){const t=this.Z0t();this.tVt.n1t(t)}}pXt(t){this.z0t=new Hu(Aw.ADVERTISEMENT_ERROR,t.Ob),this.P0t=new $i(Ui.AD_ERROR,"There was a problem playing ads.",this.z0t),this.wqt.Co(Go.pqt(t))}A$t(){this.Iqt&&(this.Qo.ge(),this.RHt(),this.be())}F$t(){var t;if(this.Qo.Tf()===1/0||0===this.Qo.i_().length)return;(null==(t=this.xZt.CZt)?void 0:t.qXt)&&-1!==this.r1t&&(this.Qo.Nf(this.Qo.Tf()+this.r1t),this.r1t=-1)}Q$t(t){var i,e;this.r1t=null!=(e=null==(i=t.v$t)?void 0:i.KGt)?e:-1}RHt(){super.RHt(),this.Qo.ge(),this.b$t&&!this.Qo.If&&this.Qo.p_()}FXt(){this.b$t||super.FXt()}async gn(){this.J0t.fn(hh.ha,this.h1t),await super.gn(),this.T$t(),this.V0t.fn("o1t",this.a1t),this.V0t.Qd(),this.H0t.Qd(),this.xZt.gn(),this.J0t.gn()}constructor(t,i,e,s,n,r,h){super(t,i),this.bo=!1,this.bqt=!1,this.z0t=void 0,this.P0t=void 0,this.r1t=-1,this.Hqt="none",this.B0t=!1,this.k0t=!1,this.Q0t=new na,this.C0t=!1,this.O0t=!1,this.a1t=t=>{this.wqt.Co(t)},this.h1t=t=>{this.z0t=new Hu(Aw.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.P0t=yw(this.z0t)},this.x$t=NaN,this.R0t=()=>{this.bo||this.v_()},this.LH=e,this.kB=!0,this.VL=NaN,this.M0=ae.aT,this.x0t=!1,this.j0t=!1,this.ZZt=new B$(this.wqt,this),this.J0t=new I$(this,this.Qo,this.ZZt),this.J0t.yn(hh.ha,this.h1t),this.Qo.yn(l.jh,this.R0t),this.xZt=new p$(this,this.Qo,this.Sqt,s,this.ZZt),this.W0t=h,this.V0t=r,this.H0t=n,this.be(),this.V0t.yn("o1t",this.a1t)}},wu=class{registerWebImaAdPlayerConstructor(t){this.u1t=t}createAdPlayer(t,i,e){return F$()&&this.u1t?this.u1t(t,i,e):void 0}};function F$(){if(Boolean(Or.google&&Or.google.ima)){return!(1===w.keys(Or.google.ima).length&&Or.google.ima.dai)}return!1}wu.Ib=new wu;var Y$=class{get aqt(){return Q$.lqt}dR(t){return t&&t.integration===ya.GOOGLE_IMA}uqt(t,i,e){return wu.Ib.createAdPlayer(t,i,e)}n4(t,i,e,s){e.E0t(t,i,s)}LQ(t){const i=DK(t.sources);if(!i)return;const e={integration:ya.GOOGLE_IMA,sources:i,omidAccessModeRules:D$(t.omidAccessModeRules)},s=oh(t.timeOffset);return void 0!==s&&(e.timeOffset=s),e}};Ds.Ib.lR(new Y$);var G$=class extends yo{fa(){return new V$}constructor(){super("NVt")}},V$=class extends wn{constructor(){super("adloaded")}},Wh=-1,W$=class{get iVt(){return this.IVt}get c1t(){return this.d1t}get pot(){return this.Ott}get l1t(){return this.eZt}get f1t(){return this._1t}get Kl(){if(S(this.g1t)){const t=Vi.uYt(this.eZt,this.rVt.t.Td());void 0===t||S(t)||(this.g1t=t)}return this.g1t}w1t(){return this.Ott<this.IVt.length}Mc(){let t;return this.Ott<this.IVt.length&&(t=this.IVt[this.Ott],this.Ott++),t}A1t(t){t.RFt=this,this.IVt.push(t)}async v1t(t){let i=!1;for(const e of this.IVt)try{await e.$n(),i=!0}catch(i){0,To(this.IVt,e);const s=e.ntt.sources,n="string"==typeof s?s:s.src;t.Co(Go.yqt(i,n))}return this._1t=!0,i}uVt(){this.aVt=!0}oVt(){return this.aVt}m1t(){return this.IVt.some((t=>$K(t).some((t=>t.hUt))))}constructor(t,i){this.IVt=[],this.aVt=!1,this.eZt=t,this.Ott=0,this.rVt=i,this.g1t=NaN,this._1t=!1,this.d1t=new eJ(this,this.rVt)}},H$=class t extends Ys{get p1t(){let t=0;for(const i of this.y1t)i.oVt()||(t+=1);return t}M1t(){this.N1t.T1t()}Cn(){this.Po(),this.D1t.yn("J7",this.N1t.I1t)}jn(){this.$o(),this.D1t.fn("J7",this.N1t.I1t),this.U$=this.tN,this.N1t.tr();for(const t of this.y1t)t.uVt();No(this.y1t)}Po(){this.S1t||(this.Qo.yn(l.Sw,this.E1t),this.S1t=!0)}$o(){this.S1t&&(this.Qo.fn(l.Sw,this.E1t),this.S1t=!1)}get U7(){return this.y1t}b1t(){return this.L1t(new nc(Wh,void 0))}k1t(t){return this.C1t(t,0,0).length>0}x1t(t,i){let e,s=0;for(const n of this.y1t){if(n.oVt())continue;const r=n.Kl;r>=t&&r<=i&&r>=s&&!S(r)&&(e=n,s=e.Kl)}return e}O1t(t){return this.L1t(new nc(t,void 0))}j1t(){if(!this.z1t&&void 0!==this.jZt){this.z1t=!this.y1t.some((t=>S(t.Kl)));for(const t of this.y1t)t.Kl!==Wh&&t.Kl<=this.jZt&&!t.oVt()&&t.uVt()}}P1t(t){for(const i of t)i.uVt();this.LXt.B1t(t),0===this.p1t&&this.$o()}C1t(t,i,e){return this.y1t.filter((s=>{if(s.oVt())return!1;const n=s.Kl;return this.R1t(n,t)||this.U1t(n,t,i,e)}))}R1t(t,i){switch(i){case 0:return 0===t;case Wh:return t===Wh;default:return!1}}U1t(t,i,e,s){if(t<0)return!1;const n=t-i;return-1!==n&&n<=e&&n>=-s}Q1t(i){if(i&&i.length>0){for(const e of i){const i=t.LZt(e.ibt);let s=this.k_t(e);-1===s&&(this.z1t=void 0===this.jZt,this.y1t.push(new W$(i,this.F1t)),s=this.y1t.length-1);this.y1t[s].A1t(e)}this.Po()}}static LZt(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}k_t(i){const e=t.LZt(i.ibt);return Ka(this.y1t,(i=>e===t.LZt(i.l1t)))}Y1t(t){To(this.y1t,t)}Eqt(t){this.jZt=t,this.z1t=void 0===t}constructor(t,i,e,s){super(),this.z1t=!1,this.E1t=t=>D(this.L1t(t)),this.L1t=async t=>{this.j1t();const i=t.currentTime,e=t.currentTime!==Wh?this.x1t(this.U$,t.currentTime):this.C1t(t.currentTime,0,0)[0];let s,n;const r=this.Qo.Td()-10;if(n=this.k1t(Wh)&&_.ceil(i)===_.ceil(r)?this.C1t(Wh,10,0).filter((t=>!t.f1t)):this.C1t(i,10,0).filter((t=>!t.f1t)),n.length){const t=(await Promise.all(n.map((t=>t.v1t(this.D1t))))).some((t=>!0===t));t&&this.Co(new G$),(!t||!this.N1t.G1t||n[0].Kl<this.N1t.G1t.Kl)&&(s=n[0])}e&&(e!==this.N1t.G1t&&(s=e),this.P1t([e])),s&&(this.N1t.I1t(),this.N1t.G1t=s,await this.N1t.T1t()),S(this.Qo.Td())||(this.U$=t.currentTime)},this.Qo=t,this.LXt=i,this.F1t=new iJ(this.LXt,this.Qo),this.jZt=void 0,this.z1t=!1,t.Td()!==1/0?this.tN=0:this.tN=t.Tf(),this.U$=this.tN,this.y1t=[],this.D1t=e,this.N1t=s,this.S1t=!1}},q$=class extends Ys{get V1t(){return this.xWt}get wqt(){return this.jXt}W1t(){this.H1t(),this.q1t(),this.Bz=void 0}X1t(t){this.Z1t=this.Z1t.concat(t)}K1t(t){this.J1t=this.J1t.concat(t)}q1t(){this.Z1t=[]}H1t(){this.J1t=[]}$1t(t){for(const i of this.Z1t)i.IU===t&&IZ(i.eventURL)}ge(){this.V1t.style.display=""}be(){this.V1t.style.display="none"}gn(){this.Vo(),this.jXt.Vo(),sh(this.xWt)}constructor(t,i){super(),this.J1t=[],this.Z1t=[],this.Bz=void 0,this.jXt=new Ys,this.t4t=t=>{t.stopPropagation(),this.i4t()},this.i4t=()=>{for(const t of this.J1t)for(const i of t.nQt)IZ(i.uri)},this.xWt=h.createElement("div"),this.xWt.style.display="none",this.e4t=t,this.s4t=i}};function X$(t,i){let e=i;if(!function(t){return"ui"in t}(t))return e;const s=t.ui.language;let n;if(Qs(s)){const i=t.ui.languages;if(!i)return e;n=i[s]}else n=s;return n&&n[i]&&(e=n[i]),e}var Z$={[Z.kA]:1,[Z.CA]:2,[Z.xA]:2};function K$(t,i){const e=i?i.map((t=>t.toLowerCase())):i;return zc(t.filter((t=>{const i=t.type.toLowerCase();return!!Gt(e)&&-1!==e.indexOf(i)&&oK(i)})),((t,i)=>Z$[t.type]-Z$[i.type])).map(J$)}function J$(t){return Og({src:t.contentURL,type:t.type,isAdvertisement:!0})}function $$(t,i){return kU(t0(t),t0(i))}function t0(t){return{Ti:t.height,ji:t.width}}function i0(t,i,e,s){const n=function(t,i,e,s){let n,r=1/0;const h=t.filter((t=>!oK(t.type))).filter((t=>void 0===s||-1!==s.indexOf(t.type)));if(h.length){for(const t of h){const s=(_.abs(t.width/i-1)+_.abs(t.height/e-1))/2;s<r&&(r=s,n=t)}return J$(n||h.sort($$)[0])}}(t,i.width,i.height,e),r=K$(t,e);return n&&r.push(n),jh({sources:r},s)}var ca,e0=class extends q${get n4t(){return this.r4t}get Mf(){return this.h4t.Mf}get ct(){let t=this.h4t.ct;return S(t)&&this.MQt&&(t=this.MQt.ct||0),t}get If(){return this.h4t.If}get Pf(){return this.h4t.Pf}set Pf(t){this.h4t.Pf=t,t?this.$1t(je.xQt):this.$1t(je.OQt)}get Ff(){return this.h4t.Ff}get Jf(){return this.h4t.Jf}get c_(){return this.h4t.c_}set c_(t){this.h4t.c_=t}get r_(){return this.h4t.r_}get a_(){return this.h4t.a_}get o4t(){return this.a4t}p_(){this.h4t.Ff&&(this.h4t.p_(),this.Co(new Ps(this.Mf)),this.r4t&&this.$1t(je.jQt),this.r4t=!0)}m_(){this.h4t.Ff||(this.h4t.m_(),this.Co(new ye(this.Mf)),this.$1t(je.Sh))}async y_(){var t;null==(t=this.Tx)||t.Xd(),this.Tx=void 0,this.be(),this.r4t=!1,this.u4t=!0,this.c4t(),this.d4t(),await this.l4t()}f4t(t){void 0===t&&(t=!0),this.r4t=!1,t&&this.$1t(je.VQt),this.be(),this.s4t()}_4t(){var t;const i=null==(t=this.LXt.ba)?void 0:t.mi,e=new mJ(this.Wu,i);return this.V1t.appendChild(e.we),e.yn("Hm",this.g4t),e}w4t(){this.MQt&&this.MQt.AQt.tQt&&(this.jWt=new Za(this.V1t),this.jWt.YVt=this.MQt.AQt.tQt,this.jWt.yn("clickstart",this.A4t),this.jWt.yn("click",this.i4t))}v4t(t,i){for(const e of this.Z1t)if(e.IU===je.gw){const s=$Z(e.Ku,i);void 0!==s&&this.U$<s&&s<=t&&IZ(e.eventURL)}}async m4t(){if(!this.MQt||!this.p4t)return;const t=i0(this.MQt.SQt,this.p4t,this.lx.ads.allowedMimeTypes,this.lx);if(!t.sources.length)return await this.h4t.tr(),this.e4t(""),void this.MQt.EUt();this.Tx=new na,this.u4t=!0,await this.h4t.ga(t,this.Tx.Hd),this.h4t.ge(),this.MQt.EUt(),this.w4t()}async y4t(t,i,e){this.a4t=t,this.MQt=t.hUt,this.h4t.yn(l.Sw,this.M4t),this.h4t.yn(l.Xg,this.T4t),this.h4t.yn(l.Ew,this.N4t),this.h4t.yn(af,this.Ds),this.MQt.fUt&&0!==this.MQt.fUt.length&&this.X1t(this.MQt.fUt),this.MQt.AQt&&this.K1t(this.MQt.AQt),this.Bz=i,this.p4t=e,0!==this.MQt.SQt.length&&(this.h4t.yn(hh.ha,this.D4t),await this.m4t(),this.h4t.yn(l.Jg,this.I4t),this.h4t.yn(l.Sw,this.S4t),this.h4t.yn(er.Rw,this.E4t),this.h4t.yn(l.mw,this.Ds))}KYt(){this.n4t&&this.b4t&&this.g4t()}get b4t(){return this.MQt&&-1!==this.MQt.LQt&&this.h4t.Mf>=this.MQt.LQt}L4t(){this.$1t(je.Byt),this.a4t&&this.wqt.Co(new ta(this.a4t,this.Mf))}async l4t(){this.h4t.fn(hh.ha,this.D4t),this.h4t.fn(l.Jg,this.I4t),this.h4t.fn(l.Sw,this.S4t),this.h4t.fn(er.Rw,this.Ds),this.h4t.fn(er.Rw,this.E4t),this.h4t.fn(l.mw,this.Ds),this.h4t.fn(l.Sw,this.M4t),this.h4t.fn(l.Xg,this.T4t),this.h4t.fn(l.Ew,this.N4t),this.h4t.fn(af,this.Ds),this.a4t&&(this.a4t.uVt(),this.wqt.Co(new nn(this.a4t,this.Mf))),this.k4t(),this.W1t(),this.c4t(),this.d4t(),this.a4t=void 0,this.MQt=void 0,this.p4t=void 0,await this.h4t.tr(),this.h4t.be(),this.V1t.style.cursor="",this.C4t=0,this.U$=-1,this.x4t&&(this.O4t.l4t(),this.x4t=!1)}k4t(){this.jWt&&(this.jWt.Qd(),this.jWt=void 0)}d4t(){this.j4t&&(sh(this.j4t),this.j4t=void 0)}c4t(){this.BWt&&(this.BWt.gn(),this.BWt=void 0)}z4t(){this.x4t=!0}P4t(){var t;this.j4t||(this.j4t=h.createElement("div"),this.j4t.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this.V1t.appendChild(this.j4t));const i=null==(t=this.a4t)?void 0:t.Xl;if(!i)return;const e=i.Oc.filter(oJ);let s=X$(this.lx,"The content will play in")+" "+_.round(i.JGt)+" "+X$(this.lx,"seconds");if(e.length>1){const t=e.filter((t=>t.oVt())).length;s+=". "+X$(this.lx,"Ad")+" "+(t+1)+"/"+e.length}nr(this.j4t,s)}constructor(t,i,e,s,n,r,h){super(t,i),this.O4t=e,this.lx=s,this.LXt=n,this.Wu=r,this.h4t=h,this.r4t=!1,this.C4t=0,this.U$=-1,this.Tx=new na,this.u4t=!0,this.I4t=()=>{this.f4t()},this.E4t=()=>{this.Tx=void 0,this.r4t||(this.L4t(),this.r4t=!0),this.u4t&&(this.u4t=!1,this.LXt.M1t()),this.V1t.style.display="block",this.h4t.fn(er.Rw,this.E4t),this.r4t=!0},this.S4t=()=>{const t=this.Mf,i=this.ct,e=t/i;(0===this.C4t&&e>=.25?(this.$1t(je.FQt),this.C4t=1):1===this.C4t&&e>=.5?(this.$1t(je.GQt),this.C4t=2):2===this.C4t&&e>=.75&&(this.$1t(je.YQt),this.C4t=3),this.v4t(t,i),this.P4t(),this.U$=t,this.MQt)&&(-1!==this.MQt.LQt&&this.MQt.LQt<this.MQt.ct&&(null!=this.BWt||(this.BWt=this._4t()),this.Mf<this.MQt.LQt?this.BWt.iWt(this.MQt.LQt-this.Mf):this.BWt.sWt()))},this.D4t=()=>{var t,i;this.Tx=void 0,this.h4t.fn(hh.ha,this.D4t),this.u4t=!0,null==(t=this.Bz)||t.mFt(Ct._Ft),this.r4t=!1,this.h4t.be();const e=(null==(i=this.h4t.bt)?void 0:i.src)||"";this.e4t(e)},this.M4t=()=>{this.Ds(new nc(this.Mf,void 0))},this.T4t=()=>{this.Ds(new ht(this.ct))},this.N4t=()=>{this.Ds(new lo(this.Mf,this.c_))},this.A4t=()=>{this.LXt.m_()},this.g4t=()=>{this.a4t&&(this.$1t(je.PQt),this.wqt.Co(new $J(this.a4t,this.Mf/this.ct)),this.f4t(!1))},this.V1t.className="theoplayer-ad-linear",this.V1t.style.zIndex="10",yc(this.V1t),this.h4t.be(),this.x4t=!1}},s0=class t extends Pl{get we(){return this.Us}nWt(){this.we.addEventListener("mouseup",this.rWt),this.we.addEventListener("touchend",this.rWt),this.we.addEventListener("mousedown",this.B4t)}eWt(){this.we.removeEventListener("mouseup",this.rWt),this.we.removeEventListener("touchend",this.rWt),this.we.removeEventListener("mousedown",this.B4t)}static cr(){const t=h.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}gn(){this.eWt(),sh(this.Us)}constructor(){super(),this.rWt=t=>{this.Co(new wn("Hm")),this.B4t(t)},this.B4t=t=>{t.stopPropagation()},this.Us=t.cr(),this.nWt()}},n0=class extends q${get R4t(){return this.U4t}get Q4t(){return this.hu}W1t(){super.W1t(),this.V1t&&Be(this.V1t)}async y4t(t,i,e){this.wVt&&this.l4t(),this.U4t=t,this.wVt=t.oUt,0!==this.wVt.fUt.length&&this.X1t(this.wVt.fUt),this.Bz=i,0!==this.wVt.dUt.length&&(this.K1t(this.wVt.dUt[0].yUt),this.V1t.addEventListener("error",this.F4t),this.V1t.addEventListener("load",this.Y4t),await this.m4t(),this.G4t())}KYt(){var t;if(void 0!==this.V4t)return;const i=null==(t=this.wVt)?void 0:t.dUt[0];i&&i.Xl&&-1!==i.Xl.LQt&&(this.$1t(je.PQt),this.wqt.Co(new $J(this.U4t,0)),this.W4t())}L4t(){void 0!==this.U4t&&this.wqt.Co(new ta(this.U4t,this.LXt.Mf))}y_(){this.l4t(),this.U4t=void 0,this.wVt=void 0}l4t(){this.H4t(),void 0!==this.U4t&&(this.U4t.uVt(),this.wqt.Co(new nn(this.U4t,this.LXt.Mf))),this.W1t(),this.q4t(),void 0!==this.V4t&&(c(this.V4t),this.V4t=void 0)}H4t(){this.V1t.removeEventListener("load",this.Y4t),this.V1t.removeEventListener("error",this.F4t)}async m4t(){const t=h.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const i=this.wVt.dUt[0],e=h.createElement("a");if(i.yUt.tQt&&(e.href=i.yUt.tQt,e.target="Du",e.setAttribute("rel","noopener")),i.AUt){const t=i.AUt,s=h.createElement("iframe");s.src=t.aFt,e.appendChild(s)}else if(i.gUt){const t=i.gUt,s=h.createElement("img");s.src=t.aFt,e.appendChild(s)}else if(i.mUt){const t=i.mUt,s=h.createElement("iframe");s.src=t.aFt,e.appendChild(s)}i.EUt(),e.addEventListener("mousedown",this.t4t),e.addEventListener("touchend",this.t4t),this.V1t.firstChild&&(Be(this.V1t),this.l4t()),t.appendChild(e),this.V1t.appendChild(t),this.ge()}G4t(){var t;if(!this.wVt)return;const i=null==(t=this.wVt.dUt[0].Xl)?void 0:t.LQt;void 0!==i&&-1!==i&&(this.V4t=Or.setTimeout(this.X4t,1e3*i))}q4t(){this.hu&&(this.hu.fn("Hm",this.Z4t),this.hu.gn()),this.hu=void 0}get K4t(){return this.LXt.J4t()}constructor(t,i,e){super(t,i),this.Y4t=()=>{this.H4t(),this.$1t(je.ZQt),this.s4t()},this.F4t=t=>{var i,e;this.H4t(),null==(i=this.Bz)||i.mFt(Ct.wFt);const s=null==(e=this.wVt)?void 0:e.dUt[0];var n,r;const h=null!=(r=null!=(n=null==s?void 0:s.AUt)?n:null==s?void 0:s.gUt)?r:null==s?void 0:s.mUt;var o;this.e4t(null!=(o=null==h?void 0:h.aFt)?o:"")},this.W4t=()=>{this.be(),Be(this.V1t),this.s4t(),this.U4t=void 0,this.wVt=void 0},this.X4t=()=>{this.hu||(this.V4t=void 0,this.hu=new s0,this.V1t.children[0].appendChild(this.hu.we),this.hu.yn("Hm",this.Z4t))},this.Z4t=()=>{this.$1t(je.PQt),this.KYt()},this.V1t.className="theoplayer-ad-nonlinear",this.V1t.style.position="absolute",this.V1t.style.width="100%",this.V1t.style.bottom="3em",this.V1t.style.zIndex="10",this.V1t.style.textAlign="center",this.LXt=e}},r0=class{static async $4t(t,i,e){let s=[],n=t.shift();for(;n;){try{const t=await(new vc).xFt(n,i);s=s.concat(t)}catch(t){0;const i=Go.yqt(t,n.sources.src);e.Co(i)}n=t.shift()}return s}},al=class extends yo{fa(){return new h0}constructor(){super("Vrt")}},h0=class extends wn{constructor(){super("statechange")}};!function(t){t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted"}(ca||(ca={}));var o0=class{get Gu(){return this.Xu}get U(){return this.Xu.length}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}cg(t){return this.Xu[t]}ST(t){this.Xu.push(t),this.Xa&&this.Xa.push(t.va),this.t2t(t)}i2t(t){for(const i of t)this.ST(i)}e2t(t,i){i>=0&&i<=this.Xu.length&&(this.Xu.splice(i,0,t),this.Xa&&this.Xa.splice(i,0,t.va),this.t2t(t))}bT(t){return qt(this.Xu,t)}ET(t){this.s2t(this.Xu.indexOf(t))}s2t(t){if(!(t>=0&&t<this.Xu.length))return;const i=this.Xu[t];M(this.Xu,t),this.Xa&&M(this.Xa,t),this.n2t(i)}Vb(){const t=this.Xu.slice();No(this.Xu),this.Xa&&No(this.Xa);for(const i of t)this.n2t(i)}constructor(){this.Xu=[],this.Xa=void 0}},a0=class extends o0{fa(){return function(t){const i=function(t){const i=t.Gu.map((t=>t.va));return i.item=i=>{const e=0|i,s=t.cg(e);return s&&s.va||void 0},i}(t),e=new Vh(t,i);return i.addEventListener=(t,i)=>{e.yn(t,i)},i.removeEventListener=(t,i)=>{e.fn(t,i)},i}(this)}yn(t,i){this.r2t.yn(t,i)}sf(t){this.r2t.sf(t)}Vo(){this.r2t.Vo()}Co(t){this.r2t.Co(t)}fn(t,i){this.r2t.fn(t,i)}uf(t){this.r2t.uf(t)}cf(t){this.r2t.cf(t)}df(t,i){return this.r2t.df(t,i)}constructor(...t){super(...t),this.r2t=new Ys,this.Ds=t=>{this.Co(t)}}};var u0,c0=class extends wn{constructor(t){super("addtask"),this.task=t}},d0=class extends yo{fa(){return new c0(this.h2t.va)}constructor(t){super("o2t"),this.h2t=t}},l0=class extends wn{constructor(t){super("removetask"),this.task=t}},f0=class extends yo{fa(){return new l0(this.task.va)}constructor(t){super("a2t"),this.task=t}},_0=class extends a0{t2t(t){this.Co(new d0(t))}n2t(t){this.Co(new f0(t))}constructor(){super()}};!function(t){t.UNINITIALISED="uninitialised",t.INITIALISED="initialised"}(u0||(u0={}));var g0=class extends Pl{async v_(){await this.u2t(),this.oht("initialised")}async u2t(){try{await this.c2t()}catch(t){0}}async c2t(){const t=await this.Wyt.Qet();for(const i of t){const t=this.l2t.d2t(i.id,i.sourceDescription,i.parameters,this.f2t);this._2t(t),this.Nx.ST(t),await t.g2t}}get kI(){return this.hht}oht(t){this.hht=t,this.Co(new al)}get w2t(){return this.Nx}d2t(t,i,e){void 0===e&&(e="persistent");const s=this.l2t.A2t(t,i,e);return this.v2t(s,e),this.Nx.ST(s),this._2t(s),s}async v2t(t,i){try{await this.m2t(t,i)}catch(t){throw g("Unable to persist task - "+t)}}async m2t(t,i){await this.Wyt.Bet({key:t.o,id:t.o,sourceDescription:t.yc,parameters:t.cI},i)}_2t(t){t.yn("Vrt",(()=>{t.kI===ca.EVICTED&&this.Nx.ET(t)}))}constructor(t,i,e){super(),this.hht="uninitialised",this.Nx=new _0,this.l2t=i,this.f2t=e,this.Wyt=t,this.v_()}};var Lh=class{get NB(){return this.p2t}get y2t(){return this.M2t}get T2t(){return this.N2t.NB}get D2t(){let t=0,i=0;return this.IT.forEach((e=>{t+=e.timeRanges.NB,i+=e.totalQualityDurationToCache})),0===i?0:_.min(1,t/i)}get N2t(){return this.I2t}oN(t){return!!fl(this.IT,t.IT)&&(!!jd(this.M2t,t.M2t)&&(!!jd(this.NB,t.NB)&&(!!jd(this.T2t,t.T2t)&&this.N2t.vB(t.N2t))))}constructor(t,i,e){if(this.M2t=t,this.IT=i,this.p2t=e,0===this.IT.size)this.I2t=Ai.SB();else{let t=new Ai([-1/0,1/0]);this.IT.forEach((i=>{t=t.Sn(i.timeRanges)})),this.I2t=t}}};Lh.QUALITY_TIME_RANGES_NULL_OBJECT=cs(),Lh.CACHE_PROGRESSION_NULL_OBJECT=new Lh(0,Lh.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),Lh.S2t=Lh.CACHE_PROGRESSION_NULL_OBJECT;var w0=class extends wn{constructor(){super("progress")}},A0=class extends yo{fa(){return new w0}constructor(){super("tXt")}};var v0,m0=class extends fh{get name(){return"E2t"}constructor(t,i){super(t,i)}};async function p0(t,i,e){const s=[];for(const n of t.hwt)s.push(y0(n,i,e));return{b2t:await Promise.all(s)}}async function y0(t,i,e){const s=[];for(const n of t.Ynt)M0(n)||s.push(D0(n,i,e));return{Z:await Promise.all(s),Rg:t.Rg}}function M0(t){return t.Jnt.every(N0)}!function(t){t[t.kA=0]="kA",t[t.CA=1]="CA"}(v0||(v0={}));var T0=1;function N0(t){return t.hAt!==T0&&Boolean(t.hAt)}async function D0(t,i,e){const s=[];for(const i of t.Jnt)N0(i)||s.push(I0(i,e));const n=await Promise.all(s),r=t.wst[0],h=t.Ast,o=h?function(t,i){const e=[],s=function(t){return t?Ni(t,"avc")?Kn.VIDEO_H264:Ni(t,"hev")||Ni(t,"hvc")||Ni(t,"hvt")||Ni(t,"lhv")||Ni(t,"lhe")||Ni(t,"lht")?Kn.VIDEO_H265:Ni(t,"mp4")?Kn.VIDEO_MP4:Ni(t,"mpeg2")?Kn.VIDEO_MPEG2:Ni(t,"mpeg")?Kn.VIDEO_MPEG:Kn.VIDEO_UNKNOWN:Kn.VIDEO_UNKNOWN}(t);for(const t of i){const i=t.vst.split(":").pop(),n=t.Uwt;e.push({mimeType:s,uuid:i,data:n})}const n=v0.kA,r=i_;return{type:n,schemeType:r,schemeDatas:e}}(r,h):void 0,a=IV(t,i,!0);return{Ng:n,gs:t.R6,Rg:t.Rg,Xz:o,Bgt:a}}async function I0(t,i){const e=await async function(t,i){const e=[],s=t.ant;t.Jut&&e.push({GT:0,ct:0,L2t:t.Jut});const n=s.bvt();let r=n;for(;r;){if(t.Fat(r)){const s=await t.Gat(r,i,(new na).Hd);for(let i=0;i<s.U;i++)e.push(S0(s.Wat(i),t))}else e.push(S0(r,t));r=s.qat(r)}const h=s.xvt(),o=h.VT-n.GT;return{ct:o,Ket:e}}(t,i),s={o:E0(t),tT:e,wz:t.wz,sit:t.sit,Ti:t.Ti,Rg:t.Rg,ji:t.ji};switch(t.Rg){case pg.Ru:break;case pg.pm:var n,r;s.xct=null!=(r=null==(n=t.xct)?void 0:n.vN())?r:NaN;break;case pg.ym:s.audioSamplingRate=t.eAt}return s}function S0(t,i){return{GT:t.GT,ct:t.ct,L2t:i.Kat(t)}}function E0(t){return t.zat.Cn+"-"+(""+t.o)}function b0(t,i){const e=function(t){const i=function(t){const i=cs();for(const e of t){let t=i.get(e.AIt);t||(t={Rg:e.Rg,Pp:[]},i.set(e.AIt,t)),t.Pp.push(e)}return i}(t),e=pt();return i.forEach((t=>{for(const i of t.Pp){let s=e.get(t.Rg);s||(s=cs(),e.set(t.Rg,s));let n=s.get(i.l);n||(n=[],s.set(i.l,n)),n.push(i)}})),e}(t);return function(t,i){const e=pt();return t.forEach(((t,s)=>{const n=cs();t.forEach(((t,e)=>{const r=[];for(const e of t){const t=L0(e,s,i);r.push(t)}n.set(e,r)})),e.set(s,n)})),e}(e,i)}function L0(t,i,e){const s=t.AIt,n={bIt:t,aSt:[]};for(const t of e)hq(i,s,t)&&n.aSt.push(t);return n}async function k0(t,i){const e=await i.xyt([t],{});return kH(e.IS,{},e.jyt)}async function C0(t,i){return ZW(t)?async function(t,i){const e=b0(t.Pp,t.rbt),s=await async function(t,i){const e=[],s=t.entries();for(let t=s.next();!t.done;t=s.next()){const[s,n]=t.value,r=await j0(n,s,i);e.push(r)}return e}(e,i),n=await async function(t,i){const e=[];for(const o of t){var s,n;const t=await R0(o.ovt,i);var r,h;t.wz=o.wz,t.sit=o.wst?O0(o.wst):"",t.Ti=null!=(r=null==(s=o.$It)?void 0:s.Ti)?r:0,t.ji=null!=(h=null==(n=o.$It)?void 0:n.ji)?h:0,e.push(t)}return{Rg:pg.rT,Z:[{gs:SQ,Rg:pg.rT,Ng:e}]}}(t.rbt,i);return s.push(n),{ct:x0(s),k2t:[t.ovt],Awt:[{b2t:s}]}}(t,i):function(t){const i=U0(t);return{ct:i.ct,k2t:[t.ovt],Awt:[{b2t:[{Rg:pg.rT,Z:[{Rg:pg.rT,gs:SQ,Ng:[{o:t.ovt,tT:i,wz:0,sit:"",Ti:0,Rg:pg.rT,ji:0}]}]}]}]}}(t)}function x0(t){let i=-1/0;for(const e of t)for(const t of e.Z)i=_.max(i,...t.Ng.map((t=>t.tT.ct)));return i}function O0(t){return[t.XIt,t.ZIt,t.AEt].filter(Yt).join(",")}async function j0(t,i,e){const s=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,i]=t.value,n=await z0(i,e);s.push(n)}return{Rg:P0(i),Z:s}}async function z0(t,i){const e=[],s=t[0].bIt;for(const s of t){const t=await B0(s,i);e.push(t)}return{gs:s.gs||SQ,Rg:P0(s.Rg),Ng:e}}function P0(t){switch(t){case Cn.ym:return pg.ym;case Cn.pm:return pg.pm;case Cn.Mm:case Cn.pEt:return pg.Ru;default:return pg.rT}}function B0(t,i){const e=function(t){const i=t.bIt.ovt,e=t.aSt.map((t=>t.ovt));return i||(e.length?e[0]:void 0)}(t);return R0(e,i)}async function R0(t,i){let e={ct:0,Ket:[]};if(t){const s=await k0(t,i);KW(s)&&(e=U0(s))}return{o:t||"default",C2t:t,tT:e,wz:0,sit:"",Ti:0,Rg:pg.rT,ji:0}}function U0(t){const i=[];let e,s=0;for(const n of t.Ket){const t=s;!n.ubt||void 0!==e&&$W(n.ubt.ovt,e)||(i.push(Q0(n.ubt,t)),e=n.ubt.ovt),i.push(F0(n,t)),s+=n.ct}return{ct:s,Ket:i}}function Q0(t,i){return{GT:i,ct:0,L2t:Y0(t.ovt)}}function F0(t,i){return{GT:i,ct:t.ct,L2t:Y0(t.ovt)}}function Y0(t){return{zu:t.jM,jht:t.Pmt?[t.Pmt.Cn,t.Pmt.Cn+t.Pmt.U]:void 0,AS:!1}}var G0=class{async x2t(t){if(!t.src)throw new g("Invalid typed source");const i=t.type;if(Fa(i))return await this.O2t(t);if(Kg(i))return await this.j2t(t);throw new g("Unexpected source type")}async O2t(t){try{const i=await k0(t.src,this.Oyt);return await C0(i,this.Oyt)}catch(t){throw new g("Unable to fetch HLS manifest")}}async j2t(t){try{const e=new qG({Ug:i.Dh(t.src),fyt:t.liveOffset,vyt:t.timeServer,AS:t.useCredentials},this.z2t,zb.SV,this.Oyt,t.dash);return await e.W,await async function(t,i,e){const s=[];for(const n of t.Awt)s.push(p0(n,i,e));const n=await Promise.all(s);return{ct:t.qAt.Cwt(),k2t:[t.nyt],Awt:n}}(e.Tr.Xut,t.contentProtection,this.Zat)}catch(t){throw new g("Unable to fetch DASH manifest")}}constructor(t,i,e){this.Oyt=t,this.Zat=i,this.z2t=e}},V0=class{P2t(){const t=new Rs;return this.B2t.push(t),this.R2t(),t.Zb}async U2t(t,i){try{await t}finally{this.Q2t-=1,this.R2t(),0===this.B2t.length&&0===this.Q2t&&i.Wb(!0)}}R2t(){if(this.B2t.length>0&&this.Q2t<this.F2t){this.B2t.shift().Wb(),this.Q2t+=1}}constructor(t){this.B2t=[],this.Q2t=0,this.F2t=t}};var W0=class extends Pl{get g2t(){return this.v_()}async v_(){const t=new G0(this.Oyt,this.Zat,this.z2t);this.Y2t=await t.x2t(this.G2t);const i=function(t,i){if(Qs(t)){if(Ni(t,"%"))return C(t)/100*i;throw new g("Unexpected - Invalid string supplied as amount to cache.")}return i<t?i:t}(this.Hyt.cI.amount,this.Y2t.ct);let e;this.p2t=i;const s=V(this.Y2t.k2t[0]),n=(await this.Zet.Jet.Yet(s,"manifestURL")).filter((t=>qt(t.references,this.Hyt.o))),r=[],h=this.Hyt.cI.bandwidth;for(const t of this.Y2t.Awt)for(const i of t.b2t)for(const t of q0(i,this.Hyt.cI.preferredTrackSelection))for(const i of Z0(t.Ng,h))r.push(i);this.V2t=_.ceil(r.map((t=>t.wz*function(t,i){let e=0;for(const s of t.tT.Ket.map((t=>t.ct)))if(e+=s,e>=i)return e;return e}(t,i)/8)).reduce(((t,i)=>t+i),0));const o=cs();if(n&&0!==n.length){const t=n.reduce(((t,i)=>t+i.byteSize),0);for(const t of n){const i=t.qualityId,e=new Ai(t.startsAndEnds);if(o.has(i))o.get(i).timeRanges=o.get(i).timeRanges.cB(e).uB(5e-4);else{const t=Zt(r,(t=>t.o===i));var a;const s=_.min(this.p2t,null!=(a=null==t?void 0:t.tT.ct)?a:1/0);o.set(i,{timeRanges:e,totalQualityDurationToCache:s})}}e=new Lh(t,o,this.p2t)}else{for(const t of r)o.set(t.o,{timeRanges:Ai.SB(),totalQualityDurationToCache:_.min(t.tT.ct,this.p2t)});e=new Lh(0,o,this.p2t)}this.W2t=e}get H2t(){return this.V2t}get W2t(){return this.q2t}set W2t(t){this.q2t.oN(t)||(this.q2t=t,t.oN(Lh.S2t)||this.Co(new A0))}async pi(t){await this.bo,await this.X2t(this.Y2t,t)}async X2t(t,i){if(!t.k2t)throw new g("Unexpected - manifest is missing locations");await this.Z2t();const e=[];for(const s of t.Awt)e.push(this.K2t(s,t.k2t[0],i));return Zc(e)}async Z2t(){const t=await this.J2t.Qet();for(const i of t){const t=await this.Zet.$et.Fb(i.key);if(t)await H0(t,this.Hyt.o,this.Zet.$et,this.f2t);else try{await this.Zet.$et.Bet(i,this.f2t)}catch(t){throw new m0("Unable to store manifest with url: "+i.locationURL,t)}}await this.J2t.Vet()}K2t(t,i,e){const s=[];for(const n of t.b2t){const t=q0(n,this.Hyt.cI.preferredTrackSelection);for(const n of t)s.push(this.$2t(n,i,e))}return Zc(s)}async $2t(t,i,e){const s=this.Hyt.cI.bandwidth,n=Z0(t.Ng,s);t.Rg===pg.pm&&t.Bgt&&t.Bgt.jO.widevine&&"persistent"===t.Bgt.jO.widevine.licenseType&&(await this.t3t(t.Bgt),Bo(e));const r=[];for(const t of n)r.push(this.i3t(t,i,e));return Zc(r)}async i3t(t,i,e){Bo(e);const s=t.tT.Ket[0].GT+this.p2t,n=[];let r=!1;for(const h of t.tT.Ket){if(h.GT>=s||this.stopIfFailed(r))break;await this.e3t(e),await this.s3t.P2t(),n.push(this.s3t.U2t(this.n3t(h,t,i),this.r3t).catch((t=>(r=!0,Promise.reject(t)))))}return Zc(n)}async e3t(t){if(null==t?void 0:t.Bd)throw await this.r3t.Zb,new pe}async h3t(){return await this.bo.catch(El),this.Y2t}t3t(t){return Promise.resolve()}o3t(){return i.SA("License renewal unsupported in this SDK."),Promise.resolve()}async n3t(t,i,e){const s=this.Zet.Jet,n=Fh(t.L2t.zu,t.L2t.jht),r=await s.Fb(n);if(r)await H0(r,this.Hyt.o,s,this.f2t),this.a3t(r,!1);else try{const s=await this.u3t(t.L2t),{segmentMetadataEntry:n,segmentEntry:r}=this.c3t(t,i,e,s);await this.Zet.Xet((async t=>{await t.Jet.Bet(n,this.f2t),await t.Ket.Bet(r,this.f2t)})),this.a3t(n,!0)}catch(i){throw new m0("Unable to store segment with url: "+t.L2t.zu,i)}}async u3t(t){const i=await this.Vot.bht(t,{Pht:this.DEFAULT_CACHING_SEGMENT_TIMEOUT,_S:this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT});return await this.Wot(i)}async Wot(t){return{buffer:await t.cj()}}c3t(t,i,e,s){const n=Fh(t.L2t.zu,t.L2t.jht),r=t.GT,h=t.ct,o=this.d3t(s);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:V(e),qualityId:i.o,byteSize:o,startsAndEnds:new Ai([r,r+h]).JP,references:[this.Hyt.o]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:V(e),data:s,references:[this.Hyt.o]}}}d3t(t){return t.buffer.byteLength}a3t(t,i){const e=t.qualityId,s=this.q2t,n=s.IT;n.get(e).timeRanges=n.get(e).timeRanges.cB(new Ai(t.startsAndEnds)).uB(5e-4),this.W2t=new Lh(i?s.y2t+t.byteSize:s.y2t,n,this.p2t)}stopIfFailed(t){return!1}constructor(t,i,e,s,n,r,h,o){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this.r3t=new Rs,this.q2t=Lh.S2t,this.Hyt=t,this.Zet=i,this.Oyt=e,this.J2t=s,this.Vot=n,this.Zat=r,this.z2t=o,this.f2t=h,this.V2t=-1;const a=this.Hyt.yc.sources[0];this.G2t=a,this.bo=this.v_(),this.s3t=new V0(this.Hyt.cI.parallelTasksThreshold)}};async function H0(t,i,e,s){qt(t.references,i)||(t.references.push(i),await e.Bet(t,s))}function q0(t,i){switch(t.Rg){case pg.ym:return X0(t.Z,i.audioTrackSelection);case pg.Ru:return X0(t.Z,i.textTrackSelection);default:return X0(t.Z,[])}}function X0(t,i){if(0===i.length)return t.length?[t[0]]:[];const e=[];for(const s of t)i.indexOf(s.gs)>-1&&e.push(s);return e}function Z0(t,i){if(!t.length)return[];const e=[...t].sort(CU),s=e.filter((t=>t.wz<=i));return s.length>0?[s.pop()]:[e.shift()]}var K0=class{async l3t(){await this.Zet.Xet((async t=>{await this.f3t(t),await this._3t(t),await this.g3t(t),await this.w3t(t)}))}async f3t(t){const i=t.tst,e=this.Hyt.o;await i.ET(e)}async _3t(t){const i=t.Jet,e=t.Ket,s=this.Hyt.yc.sources[0];if(!tr(s))return;const n=V(s.src),r=(await i.Yet(n,"manifestURL")).filter((t=>qt(t.references,this.Hyt.o)));for(const t of r)To(t.references,this.Hyt.o),0===t.references.length?(await i.ET(t.key),await e.ET(t.key)):await i.Bet(t)}async g3t(t){const i=t.$et,e=this.A3t(),s=(await i.Let(e)).filter((t=>qt(t.references,this.Hyt.o)));for(const t of s)To(t.references,this.Hyt.o),0===t.references.length?await i.ET(t.key):await i.Bet(t)}A3t(){if(!this.Y2t)return[];const t=this.Hyt.yc.sources[0];if(!tr(t))return[];const i=V(t.src),e=function(t){if(!t)return[];const i=[];for(const e of t.Awt)for(const t of e.b2t)for(const e of t.Z)for(const t of e.Ng)t.C2t&&i.push(t.C2t);return function(t){return t.reduce(((t,i)=>(t.indexOf(i)<0&&t.push(i),t)),[])}(i)}(this.Y2t).map((t=>({src:t}))).map((t=>V(t.src)));return[i,...e]}async w3t(t){const i=t.ist,e=(await i.Qet()).filter((t=>qt(t.references,this.Hyt.o)));for(const t of e)To(t.references,this.Hyt.o),0===t.references.length?(await i.ET(t.key),this.v3t(t)):await i.Bet(t)}v3t(t){}constructor(t,i,e){this.Hyt=t,this.Zet=i,this.Y2t=e}},J0=new class{h9(t,i,e){return new K0(t,i,e)}};var $0=class{get va(){return this.Xa||(this.Xa=function(t){return{renew(i){t.m3t(i)}}}(this)),this.Xa}m3t(t){this.p3t(t)}async p3t(t){try{await this.y3t.o3t(t)}catch(t){0,this.pit.oht(ca.ERROR)}}constructor(t,i){this.pit=t,this.y3t=i}},t1=class extends Ys{get g2t(){return this.y3t.g2t}get va(){return this.Xa||(this.Xa=function(t){let i,e={get id(){return t.o},get status(){return t.kI},get source(){return t.yc},get parameters(){return t.cI},get duration(){return t.ct},get cached(){return t.M3t.ks()},get secondsCached(){return t.T3t},get percentageCached(){return t.N3t},get bytes(){return t.D3t},get bytesCached(){return t.I3t},get license(){return t.PF.va},start(){t.Cn()},pause(){t.m_()},remove(){t.ET()},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new hL(t,["tXt","Vrt"],e),e}(this)),this.Xa}get o(){return this.CT}get PF(){return this.S3t}get kI(){return this.hht}oht(t){this.hht!==t&&(this.hht=t,this.Co(new al))}get yc(){return this.bc}get cI(){return this.E3t}get ct(){return this.y3t.W2t.NB}get M3t(){return this.y3t.W2t.N2t}get T3t(){return this.y3t.W2t.T2t}get N3t(){return this.y3t.W2t.D2t}get D3t(){return this.y3t.H2t}get I3t(){return this.y3t.W2t.y2t}Cn(){this.hht===ca.EVICTED||this.hht===ca.DONE||this.b3t()}async b3t(){try{this.oht(ca.LOADING);const t=new na;this.L3t=t,await this.y3t.pi(t.Hd),this.oht(ca.DONE)}catch(t){ut(t)?this.oht(ca.IDLE):this.oht(ca.ERROR)}finally{this.L3t.Qd()}}m_(){this.L3t.Xd()}ET(){this.kI===ca.LOADING?(this.yn("Vrt",this.evictOnLoading),this.m_()):this.k3t()}async k3t(){try{const t=await this.y3t.h3t();await J0.h9(this,this.Zet,t).l3t(),this.y3t.W2t=Lh.S2t,this.oht(ca.EVICTED)}catch(t){0,this.oht(ca.ERROR)}}constructor(t,i,e,s,n,r){super(),this.L3t=new na,this.evictOnLoading=()=>{this.fn("Vrt",this.evictOnLoading),this.k3t()},this.CT=t,this.bc=i,this.E3t=e,this.Zet=s,this.y3t=n.h9(this,this.Zet,r),this.S3t=new $0(this,this.y3t),this.hht=1===this.y3t.W2t.D2t?ca.DONE:ca.IDLE,this.y3t.yn("tXt",(t=>{this.Ds(t),1===this.N3t&&this.oht(ca.DONE)}));const h=new Date,o=this.E3t.expirationDate.getTime()-h.getTime();(function(t){return t<2147483647})(o)&&u((()=>this.k3t()),o)}};var i1=class{A2t(t,i,e){const s=sI();return this.d2t(s,t,i,e)}d2t(t,i,e,s){return new t1(t,i,e,this.Zet,this.C3t,s)}constructor(t,i){this.Zet=t,this.C3t=i}},e1=30,s1=5;function n1(t){if(!t)throw new g("Unexpected - The cache parameters are undefined");const i=function(t){if(Qs(t)&&!Ni(t,"%"))return x(t);return t}(t.amount);!function(t){if(function(t){return Qs(t)&&Ni(t,"%")}(t)){const i=C(t);if(S(i)||i<0||i>100)throw new g("The amount as percentage must be between 0 and 100 percent.")}if(!Qs(t)&&S(t))throw new g("The amount must be a number or a string")}(i);const e=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+e1),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||Ed(t)&&t>new Date}(t))throw new g("Invalid expiration date for the cache parameters")}(e);const s=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(S(t)||t<0)throw new g("The bandwidth must be between zero and infinity.")}(s);const n=function(t){if(!t)return s1;if(S(t))throw new g("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:i,expirationDate:e,bandwidth:s,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}var r1=class{set G1t(t){this.x3t=t,this.O3t=0,this.j3t=0,this.z3t=void 0}get G1t(){return this.x3t}dKt(){if(!this.x3t)return;const t=this.x3t.iVt;for(;this.O3t<t.length;){const i=t[this.O3t];for(void 0===this.z3t&&(this.z3t=$K(i),this.j3t=0);this.j3t<this.z3t.length;){const t=this.z3t[this.j3t];if(this.j3t++,void 0!==t.hUt)return t.hUt}this.O3t++,this.z3t=void 0}}tr(){for(this.G1t=void 0,this.Tx.Xd(),this.Tx=new na;this.P3t.length;)this.I1t()}B3t(t){return new g0(this.Zet.tst,t,"temporary")}async Ozt(t){const i=K$(t.SQt,this.LH.ads.allowedMimeTypes);if(!i.length)return;const e=await MN.Ib.QP(i,jh({sources:i}));if(!e.t.bP())return;this.y3t||(this.y3t=new this.C3t(this.NS));const s=this.Zet,n=new i1(s,this.y3t),r=this.B3t(n).d2t(jh({sources:e.yc}),n1({amount:10,bandwidth:Vo.Ib.ez()||this.PB.kW}),"temporary");this.P3t.push(r);const h=this.y3t.h9(r,s,"temporary");this.Tx.Xd(),this.Tx=new na,h.pi(this.Tx.Hd).then(El),this.R3t(h,t)}constructor(t,i,e,s){this.P3t=[],this.O3t=0,this.j3t=0,this.T1t=async()=>{const t=this.dKt();t&&await this.Ozt(t)},this.I1t=()=>{const t=this.P3t.shift();null==t||t.ET()},this.R3t=async(t,i)=>{let e=!1;for(;!e;)await t.df("tXt"),e=1===t.W2t.D2t;i.ct<5&&this.T1t()},this.LH=t,this.NS=i,this.Tx=new na,this.C3t=e,this.PB=s,this.Zet=new MR}},h1={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new Ai([0,0]).JP,references:[]},o1={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},a1=class t extends UU{async gut(t,i,e,s){try{return await super.gut(t,i,e,s)}catch(t){Ao(t)}const n=await this.U3t.gut(t,i,e,s);return await this.Q3t(t,i,n),n}async Q3t(i,e,s){if(void 0===this.F3t)return;const n=this.Zet.Jet,r=Fh(i,e),h=await n.Fb(r);if(h)await H0(h,this.F3t,n,this.f2t);else try{const i={buffer:s},{segmentMetadataEntry:e,segmentEntry:n}=t.c3t(r,i,this.F3t);await this.Zet.Xet((async t=>{await t.Jet.Bet(e,this.f2t),await t.Ket.Bet(n,this.f2t)}))}catch(t){throw new m0("Unable to store segment with url: "+i,t)}}static c3t(t,i,e){return{segmentMetadataEntry:Tt({},h1,{key:t,segmentURLsegmentByteRange:t,references:[e]}),segmentEntry:Tt({},o1,{key:t,segmentURLsegmentByteRange:t,data:i,references:[e]})}}constructor(t,i,e,s,n){super(t),this.U3t=new RU(i),this.Zet=e,this.F3t=s,this.f2t=n}};var u1,c1=class{h9(t,i,e){void 0===e&&(e="persistent");const s=t.yc.sources[0];if($g(s))throw new g("Caching THEOlive sources is not supported");const n=Boolean(s.useCredentials),r=new WR(this.NS,Xn.rT),h=new oV(this.NS,n),o=new z(i.$et,i.Jet,i.Ket,i.ist),a=function(t,i,e,s,n){return new a1(i,t,e,s,n)}(this.NS,o,i,t.o,e),u=new ar,c=new lV(dV(h,o),u,t);return this.Y3t(t,i,c,u,r,a,e)}constructor(t){this.NS=t}},d1=class extends c1{Y3t(t,i,e,s,n,r,h){return new W0(t,i,e,s,n,r,h,IR())}},l1=d1;!function(t){t[t.NOT_INITIALISED=0]="NOT_INITIALISED",t[t.G3t=1]="G3t",t[t.V3t=2]="V3t",t[t.Rw=3]="Rw",t[t.Qw=4]="Qw",t[t.W3t=5]="W3t"}(u1||(u1={}));var f1=class t extends ou{get _qt(){return this}static get lqt(){return zu.mVt}get lqt(){return t.lqt}E0t(t,i,e){i===Ur.F7&&this.L2?D(this.uKt([t])):this.H3t.push(t)}Tf(){return this.q3t.n4t?this.q3t.Mf:this.d7()}Nf(t){}Td(){return this.q3t.ct}Sf(){return this.q3t.If}Ef(){}Lf(){}Bf(){return this.q3t.Pf}Rf(t){this.Pf!==t&&(this.q3t.Pf=t,this.Co(new lo(this.Mf,this.c_)))}Yf(){return this.q3t.Ff}$f(){return this.q3t.Jf}i_(){return Ai.SB().ks()}h_(){return this.q3t.r_}u_(){return this.q3t.a_}d_(){return this.q3t.c_}l_(t){this.c_!==t&&(this.q3t.c_=t,this.Co(new lo(this.Mf,this.c_)))}async p_(){if(this.X3t)return;this.Co(new Ps(this.Mf)),this.Z3t(),this.H3t.length&&(this.X3t=this.uKt(this.H3t),await this.X3t,this.X3t=void 0),await this.K3t.O1t(this.Qo.Tf());const t=this.J3t;4!==t&&1!==t&&5!==t||(!this.DVt&&this.$3t.length?this.t5t():this.DVt?(this.i5t=!0,this.q3t.p_()):(this.RHt(),this.Qo.p_()),this.J3t=3)}m_(){3===this.J3t&&(this.q3t.m_(),this.J3t=4)}M1t(){this.K3t.M1t()}Cn(){this.J3t=1,this.K3t.Cn()}async y_(){this.K3t&&(this.K3t.jn(),this.e5t(!1),this.O4t.y_(),this.J3t=5,this.DVt&&(this.K3t.Y1t(this.DVt.RFt),this.DVt=void 0)),this.L2=!1,this.i5t=!1,No(this.$3t),this.Iqt&&(this.RHt(),this.Qo.ge()),No(this.H3t),await this.q3t.y_(),await this.h4t.tr()}Hm(){this.q3t.KYt(),this.O4t.KYt()}v_(){this.h4t.v_(),this.Z3t()}mqt(t){return!(t.type!==l.Jg||!this.K3t||!this.K3t.k1t(-1))&&(this.K3t.b1t().then(El),!0)}ge(){void 0!==this.q3t.o4t&&(this.h4t.ge(),this.q3t.ge()),void 0!==this.O4t.R4t&&this.O4t.ge()}be(){this.h4t.be(),this.q3t.be(),this.O4t.be()}async uKt(t){const i=await r0.$4t(t,this.NS,this.wqt);if(!i.length){const t="Ads could not be loaded.";return this.wqt.Co(Go.yqt(new wo(Jo.ADBLOCK,_t.FILE_NOT_FOUND),t)),void(this.L2&&!this.DVt&&0===this.$3t.length&&this.s5t())}this.K3t.Q1t(i),this.wqt.Co(new xh),this.Iqt||this.Qo.Ff||this.K3t.O1t(this.Qo.Tf()),0!==this.J3t&&5!==this.J3t||this.Cn()}B1t(t){this.$3t.push(...t);for(const i of t)this.L2&&!this.Iqt&&this.t5t()}async t5t(){if(2!==this.J3t&&!this.n5t){0,this.n5t=!0,this.J3t=2;const t=this.DVt;this.r5t(),this.DVt?(await this.DVt.RFt.v1t(this.wqt),this.h5t()||(this.n5t=!1),this.wqt.Co(new e$(this.o5t(this.DVt))),await this.a5t()):((null==t?void 0:t.RFt.m1t())&&this.wqt.Co(new Ss(this.o5t(t))),this.n5t=!1,this.J3t=1,this.s5t())}}s5t(){this.RHt(),this.Qo.ge(),this.Qo.If?this.Qo.Co(new ie(this.Qo.Tf())):this.Qo.p_()}r5t(){let t;if(this.DVt&&this.h5t())t=this.DVt.RFt;else{if(0===this.$3t.length)return;t=this.$3t.shift()}if(!t)return;const i=t.Mc();i?this.DVt=i:(this.DVt&&(this.K3t.Y1t(this.DVt.RFt),this.DVt=void 0),this.DVt=void 0)}async a5t(){const t=this.DVt?function(t){var i,e;const s=null==(e=t.wYt)||null==(i=e.GRt)?void 0:i.VRt();return void 0===s?void 0:new JK(s)}(this.DVt):void 0;if(t){if(!this.DVt)return;this.u5t=t,this.c5t(this.DVt.fUt),this.d5t(je.sFt);const i=this.u5t.Mc();this.DVt.RFt.m1t()&&(this.O4t.l4t(),1===this.DVt.RFt.pot&&this.wqt.Co(new sc(this.o5t(this.DVt)))),await this.y4t(i)}else this.J3t=1,this.n5t=!1,this.DVt=void 0,this.t5t()}async y4t(t){if(t){var i;let s=Yt(t.hUt),n=Yt(t.uUt);var e;const r=null!=(e=null==(i=t.aUt)?void 0:i.xUt)?e:[],h=r.length>0,o=this.DVt,a=this.o5t(o);if(t.hUt){if(t.hUt.Xl=o,void 0!==o.ntt.skipOffset){const i=Vi.uYt(o.ntt.skipOffset,t.hUt.ct);i&&i<t.hUt.ct&&(t.hUt.LQt=i)}const i=a.eVt(t.hUt,r,t.cUt,o.ntt);this.O4t.l4t(),this.zXt(),await this.q3t.y4t(i,t.lt,{width:this.Qo.we.offsetWidth,height:this.Qo.we.offsetHeight}),s=!0}if(t.uUt){const i=t.uUt.dUt[0];if(i.Xl=o,void 0!==o.ntt.skipOffset){const t=Vi.uYt(o.ntt.skipOffset,this.Qo.Td());t&&(i.Xl.LQt=t)}const e=s?[]:r,h=a.sVt(i,e,t.uUt,t.cUt,o.ntt);s&&this.q3t.z4t(),await this.O4t.y4t(h,t.lt,{width:this.Qo.we.offsetWidth,height:this.Qo.we.offsetHeight}),n=!0}if(s){this.J3t=3,this.q3t.ge();const t=0===a.ibt;this.i5t=t,this.h4t.m_(),this.q3t.p_(),this.Qo.m_(),this.Qo.be(),this.zXt(),this.q3t.L4t()}n&&(this.J3t=3,this.O4t.ge(),this.O4t.L4t()),(s||n||h)&&this.l5t(t.sUt),s||n||await this.f5t(),!s&&n&&(this.h5t()||this.$3t.length>0?this.t5t():(this.s5t(),this.DVt=o))}else null===t?await this.f5t():this.e5t(!0)}f5t(){const t=this.u5t;return this.y4t(t&&t.Mc())}e5t(t){this.d5t(je.nFt),this._5t(),this.J3t=1;const i=void 0!==this.DVt&&this.DVt.RFt.w1t();if(this.n5t=!1,i)t&&(this.J3t=1,this.t5t());else{if(!this.Iqt)return;this.Qo.ge(),!this.Qo.If&&t&&this.Qo.p_(),this.RHt()}}RHt(){this.g5t(),super.RHt()}g5t(){if(this.Qo.If&&(this.J3t=5),this.DVt){const t=this.DVt.RFt;t.m1t()&&this.wqt.Co(new Ss(this.o5t(this.DVt))),this.K3t.Y1t(t),this.DVt=void 0}}c5t(t){this.w5t=this.w5t.concat(t)}_5t(){this.w5t=[]}A5t(t){this.Qo.we.appendChild(t)}d5t(t){for(const i of this.w5t)i.IU===t&&IZ(i.eventURL)}l5t(t){this.q3t.$1t(je.ZQt);for(const i of t)IZ(i)}get R7(){return this.DVt?this.o5t(this.DVt):null}get P7(){return this.DVt?[this.q3t.o4t,this.O4t.R4t].filter(Yt):[]}get U7(){const t=this.$3t.concat(this.K3t.U7.filter((t=>!t.oVt())));return ge(t,(t=>t.c1t.Oc.filter((t=>!t.oVt()))))}get Q7(){return this.K3t.U7.map((t=>t.c1t))}itt(t){const i=this.L0t();for(const e of i)Bu(e.sources,e.timeOffset)||t.n4(e,Ur.F7,!1)}L0t(){const t=[];for(const i of this.P7.concat(this.U7))t.push(i.ntt);const i=this.$3t.concat(this.K3t.U7.filter((t=>!t.oVt())));for(const e of i)for(const i of e.iVt)i.W||t.push(i.ntt);return t.push(...this.H3t),Oo(t)}h5t(){return!!this.DVt&&$K(this.DVt).some((t=>t.hUt))}o5t(t){return t.RFt.c1t}J4t(){return this.v5t}A_(){return this.h4t.A_()}gf(){return this.h4t.gf()}Eqt(t){this.K3t.Eqt(t)}async gn(){await super.gn(),this.Qo.fn(l.jh,this.Z3t),this.wqt.ZB(this.q3t.wqt),this.wqt.ZB(this.O4t.wqt),this.wqt.ZB(this.K3t),this.q3t.gn(),this.O4t.gn(),await this.h4t.gn()}constructor(t,i,e,s,n,r){super(t,i),this.$3t=[],this.J3t=0,this.w5t=[],this.n5t=!1,this.L2=!1,this.i5t=!0,this.H3t=[],this.m5t=t=>{t.type===l.jh&&this.i5t?this.i5t=!1:this.Co(t)},this.Z3t=()=>{this.L2=!0},this.p5t=async()=>(this.J3t=1,await this.q3t.l4t(),this.y4t(this.u5t.Mc())),this.y5t=async t=>{const i=new wo(Jo.PLAYBACK,_t.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.wqt.Co(Go.yqt(i,t)),await this.q3t.l4t(),this.y4t(this.u5t.Mc())},this.M5t=()=>(this.O4t.l4t(),this.y4t(this.u5t.Mc())),this.T5t=t=>{const i=new wo(Jo.PLAYBACK,_t.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.wqt.Co(Go.yqt(i,t)),this.O4t.l4t(),this.y4t(this.u5t.Mc())},this.NS=r,this.h4t=e,this.O4t=new n0(this.T5t,this.M5t,this),this.q3t=new e0(this.y5t,this.p5t,this.O4t,s,this,t.Iu,e),this.A5t(this.O4t.V1t),this.A5t(this.q3t.V1t);const h=new r1(s,r,d1,n);this.K3t=new H$(this.Qo,this,this.wqt,h),this.q3t.sf(this.m5t),this.O4t.sf(this.Ds),this.wqt.Qa(this.q3t.wqt),this.wqt.Qa(this.O4t.wqt),this.wqt.Qa(this.K3t),this.v5t=new iJ(this,this.Qo),this.Iu.yn(_i.pn,this.Ds),this.Qo.yn(l.jh,this.Z3t)}};Ds.Ib.lR(new class{get aqt(){return f1.lqt}dR(t){return t&&("string"!=typeof t.integration||t.integration===ya.DEFAULT||t.integration===ya.CSAI||t.integration===ya.THEO)}uqt(t,i,e){const s=new LN(t.we,e,t._O,t.t7,t.f_,t.h7,t.Ol);return new f1(t,i,s,e,t.t7,t._O)}n4(t,i,e,s){e.E0t(t,i,s)}LQ(t){const i=DK(t.sources);if(!i)return;const e={integration:ya.CSAI,sources:i};"vast"===e.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===e.sources.type&&void 0!==t.timeOffset&&is("property timeOffset will be ignored for vmap ad sources");const s=oh(t.timeOffset);void 0!==s&&(e.timeOffset=s);const n=oh(t.skipOffset);return void 0!==n&&(e.skipOffset=n),e}});var _1=class{bW(){var t;this.M4||(null==(t=this.H0t)||t.initialize(),this.M4=!0)}get V1t(){return this.xWt}get N5t(){return this.D5t.offsetHeight}get I5t(){return this.D5t.offsetWidth}get S5t(){return this.H0t}E5t(t){"linear"===t?this.xWt.style.marginTop="0px":"nonlinear"===t&&(this.xWt.style.marginTop="-45px")}ge(){this.xWt.style.opacity="1",this.xWt.style.pointerEvents=""}be(){this.xWt.style.opacity="0",this.xWt.style.pointerEvents="none"}Qd(){var t;null==(t=this.H0t)||t.destroy(),this.H0t=void 0}constructor(t,i){this.H0t=void 0,this.M4=!1,this.c9=t;const e=h.createElement("div");e.className="theoplayer-ima-wrapper",yc(e),e.style.zIndex="10",Vt.Qs&&function(t,i){t.addEventListener(i,yM)}(e,"mousedown"),i.appendChild(e);const s=h.createElement("div");s.className="theoplayer-ima",s.style.height="100%",this.D5t=s,e.appendChild(s),this.xWt=e,this.H0t=new google.ima.AdDisplayContainer(this.D5t,this.c9)}},g1=class{get vQt(){return this.b5t.getAdId()}get v$t(){const t=this.b5t.getAdPodInfo();if(void 0!==t)try{return{pKt:t.getAdPosition(),KGt:t.getMaxDuration(),L5t:t.getPodIndex(),ibt:t.getTimeOffset(),yKt:t.getTotalAds(),k5t:t.getIsBumper()}}catch(t){return}}get $Rt(){return this.b5t.getAdSystem()}get C5t(){return this.b5t.getAdvertiserName()}get YUt(){var t;return null!=(t=this.b5t.getApiFramework())?t:void 0}get aUt(){return this.OUt.map((t=>({VUt:t.getAdSlotId(),qz:t.getContentType(),Kqt:t.getContent(),Ti:t.getHeight(),ji:t.getWidth()})))}get qz(){var t;return null!=(t=this.b5t.getContentType())?t:void 0}get NUt(){return this.b5t.getCreativeId()}get o0t(){return this.b5t.getCreativeAdId()}get x5t(){return this.b5t.getDealId()}get $p(){return this.b5t.getDescription()}get ct(){return this.b5t.getDuration()}get ji(){return this.b5t.getWidth()}get Ti(){return this.b5t.getHeight()}get e0t(){var t;return null!=(t=this.b5t.getMediaUrl())?t:void 0}get O5t(){return this.b5t.getMinSuggestedDuration()}get r0t(){return this.b5t.getSkipTimeOffset()}get j5t(){return this.b5t.getSurveyUrl()}get Jz(){return this.b5t.getTitle()}get s0t(){return this.b5t.getTraffickingParameters()}get n0t(){return this.b5t.getTraffickingParametersString()}get cUt(){return this.b5t.getUniversalAdIds().map((t=>({u0t:t.getAdIdRegistry(),c0t:t.getAdIdValue()})))}get t1t(){return this.b5t.getUiElements()}get h0t(){return this.b5t.getVastMediaBitrate()}get t0t(){return this.b5t.getVastMediaHeight()}get $$t(){return this.b5t.getVastMediaWidth()}get X$t(){return this.b5t.getWrapperAdIds()}get Z$t(){return this.b5t.getWrapperAdSystems()}get K$t(){return this.b5t.getWrapperCreativeIds()}get c$t(){return this.b5t.isLinear()}constructor(t){this.b5t=t;const i=new google.ima.CompanionAdSelectionSettings;i.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,i.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,i.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,this.OUt=t.getCompanionAds(0,0,i)}};function w1(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}var A1=class extends Pl{l_(t){var i;null==(i=this.tVt)||i.setVolume(t)}d_(){return this.tVt.getVolume()}C$t(){return this.tVt.getRemainingTime()}Qd(){No(this.Ic),this.Wu.fn(_i.pn,this.z5t),this.tVt.removeEventListener(google.ima.AdEvent.Type.LOADED,this.P5t),this.tVt.removeEventListener(w1(),this.forwardAdEventListener),this.tVt.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener),this.tVt.destroy()}Cn(){this.tVt.start()}Y0t(){this.tVt.resume()}m_(){this.tVt.pause()}Hm(){this.tVt.skip()}y_(){this.tVt.stop()}g$t(){const t=this.tVt.getCurrentAd();if(t)return this.B5t(t)}X0t(){return this.tVt.getCuePoints()}B5t(t){let i=Zt(this.Ic,(i=>i.b5t===t));return i||(i=new g1(t),this.Ic.push(i)),i}n1t(t){this.tVt.updateAdsRenderingSettings(p1(t))}constructor(t,i,e){super(),this.Ic=[],this.P5t=t=>{t.getAd().isLinear()?this.H0t.E5t("linear"):this.H0t.E5t("nonlinear")},this.z5t=()=>{this.tVt.resize(this.H0t.I5t,this.H0t.N5t,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const i=t.getAd(),e=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:G.IKt,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:G.SKt,[google.ima.AdEvent.Type.CLICK]:G.EKt,[google.ima.AdEvent.Type.DURATION_CHANGE]:G.Xg,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:G.bKt,[google.ima.AdEvent.Type.STARTED]:G.LKt,[google.ima.AdEvent.Type.IMPRESSION]:G.kKt,[google.ima.AdEvent.Type.PAUSED]:G.Qw,[google.ima.AdEvent.Type.RESUMED]:G.CKt,[google.ima.AdEvent.Type.AD_PROGRESS]:G.vKt,[google.ima.AdEvent.Type.AD_BUFFERING]:G.xKt,[google.ima.AdEvent.Type.FIRST_QUARTILE]:G.OKt,[google.ima.AdEvent.Type.MIDPOINT]:G.GQt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:G.jKt,[google.ima.AdEvent.Type.COMPLETE]:G.VQt,[google.ima.AdEvent.Type.USER_CLOSE]:G.zKt,[google.ima.AdEvent.Type.LINEAR_CHANGED]:G.PKt,[google.ima.AdEvent.Type.LOADED]:G.BKt,[google.ima.AdEvent.Type.AD_CAN_PLAY]:G.RKt,[google.ima.AdEvent.Type.AD_METADATA]:G.UKt,[google.ima.AdEvent.Type.AD_BREAK_READY]:G.QKt,[google.ima.AdEvent.Type.INTERACTION]:G.FKt,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:G.YKt,[google.ima.AdEvent.Type.SKIPPED]:G.GKt,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:G.VKt,[google.ima.AdEvent.Type.LOG]:G.WKt,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:G.HKt,[google.ima.AdEvent.Type.VOLUME_CHANGED]:G.qKt,[google.ima.AdEvent.Type.VOLUME_MUTED]:G.XKt}[t]}(t.type),s={type:e,date:new Date,H7:i?this.B5t(i):void 0,i$t:y$(e,t.getAdData())};this.Co(s)},this.forwardAdErrorEventListener=t=>{this.Co({date:new Date,H7:void 0,type:m$.ZKt,i$t:{j$t:N$(t.getError())}})},this.tVt=t,this.H0t=i,this.Wu=e,this.Wu.yn(_i.pn,this.z5t),this.tVt.init(this.H0t.I5t,this.H0t.N5t,google.ima.ViewMode.NORMAL),this.tVt.addEventListener(google.ima.AdEvent.Type.LOADED,this.P5t),this.tVt.addEventListener(w1(),this.forwardAdEventListener),this.tVt.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener)}},v1=class extends yo{get R5t(){return this.U5t}get V1t(){return this.xWt}fa(){return this}constructor(t,i){super("o1t"),this.U5t=t,this.xWt=i}},m1=class extends Pl{G0t(){var t;null==(t=this.V0t)||t.contentComplete()}async uKt(t,i,e){if(this.Q5t)throw new g("Only one ImaAdsRequest can be made at a time.");if(!this.F5t.S5t)throw new g("AdDisplayContainer is not initialized.");this.V0t=new google.ima.AdsLoader(this.F5t.S5t),this.V0t.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.V0t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.Q5t=new Rs,this.Y5t=i,this.G5t=e;const s=new google.ima.AdsRequest;return t.TZt?s.adTagUrl=t.TZt:t.NZt&&(s.adsResponse=t.NZt),s.linearAdSlotWidth=t.AZt,s.linearAdSlotHeight=t.vZt,s.nonLinearAdSlotWidth=t.mZt,s.nonLinearAdSlotHeight=t.pZt,s.contentDuration=t.IZt,s.setAdWillAutoPlay(t.yZt),s.setAdWillPlayMuted(t.MZt),t.DZt&&(s.omidAccessModeRules=t.DZt),this.V0t.requestAds(s),this.Q5t.Zb}Qd(){var t;void 0!==this.V0t&&(this.V0t.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.V0t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.V0t.destroy(),this.V0t=void 0),null==(t=this.Q5t)||t.qb("AdsLoader destroyed"),this.Q5t=void 0}constructor(t,i){super(),this.onAdsManagerLoadedListener=t=>{if(this.Y5t&&this.G5t&&this.Q5t){var i;const e=p1(this.G5t),s=this.Y5t,n=t.getAdsManager({get currentTime(){return s.Mf},get duration(){return s.ct}},e),r=new A1(n,this.F5t,this.Wu);this.Co(new v1(n,this.F5t.V1t)),null==(i=this.Q5t)||i.Wb(r),this.Q5t=void 0}},this.onAdsManagerErrorListener=t=>{var i;const e={Ob:t.getError().getMessage(),NKt:t.getError().getVastErrorCode(),MFt:t.getError().getErrorCode(),Rg:M$(t.getError().getType()),DKt:void 0};null==(i=this.Q5t)||i.qb(e),this.Q5t=void 0},this.Wu=i,this.F5t=t}};function p1(t){const i=new google.ima.AdsRenderingSettings;return i.enablePreloading=t.i1t,t.t1t&&(i.uiElements=t.t1t),i.mimeTypes=t.$0t,void 0!==t.s1t&&(i.playAdsAfterTime=t.s1t),void 0!==t.e1t&&(i.loadVideoTimeout=t.e1t),void 0!==t.i0t&&(i.bitrate=t.i0t),void 0!==t.s1t&&(i.playAdsAfterTime=t.s1t),i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i}var y1=class extends Pl{get Mf(){return this.Qo.e_?this.V5t:this.Qo.Tf()}get ct(){return this.Qo.Td()}get Pf(){return this.Qo.Pf}get c_(){return this.Qo.c_}tr(){this.V5t=0}constructor(t){super(),this.Qo=t,this.V5t=this.Qo.Tf(),this.Qo.yn(l.Sw,(()=>{this.Qo.e_||(this.V5t=this.Qo.Tf()),this.Co(new nc(this.Mf,void 0))}))}};wu.Ib.registerWebImaAdPlayerConstructor((function(t,i,e){R$(e);const s=U$(e)?t.A_():void 0,n=new _1(s,t.we),r=new m1(n,t.Iu),h=new y1(t);return new Q$(t,i,e,t.s7,n,r,h)}));var M1=class extends Pl{get lH(){return this.rdt===Xr.CONNECTED}get rdt(){return this.ja}get va(){return this.Xa||(this.Xa=function(t){return{get casting(){return t.lH},get state(){return t.rdt},start(){t.T_()},stop(){t.N_()},addEventListener(i,e){const s=ln(i,Va);t.yn(s,e)},removeEventListener(i,e){const s=ln(i,Va);t.fn(s,e)}}}(this)),this.Xa}W5t(){this.H5t(),this.Sgt.yn(l.lo,this.q5t),i.Ys.Htt&&this.Ta(Xr.AVAILABLE)}preloadPlayer(t){if(Bo(t),this.Qo.Jf<ae.Xn){const i=this.Qo.df(er.Pw,t);return this.Qo.Xf=Qe.Nm,i}return Promise.resolve()}Ta(t){t!==this.ja&&(this.ja=t,this.Co(new Mc(this.ja)))}async X5t(t){await this.preloadPlayer(t),this.pW.T_()}N_(){i.Ys.Htt&&this.Qo.N_()}gn(){this.Vo(),this.Sgt.fn(l.lo,this.q5t),this.Z5t.Xd()}constructor(t,i){super(),this.Xa=void 0,this.ja=Xr.UNAVAILABLE,this.Z5t=new na,this.handleAirplayChangedEvent=()=>{this.Qo&&this.Qo.xf?this.K5t():this.rdt===Xr.CONNECTED&&this.J5t()},this.Sgt=t,this.pW=i}},T1=class extends M1{H5t(){this.Qo&&this.Qo.fn(l.Qg,this.handleAirplayChangedEvent),this.$5t?this.Qo=this.pW:this.Qo=this.t6t,this.Qo.yn(l.Qg,this.handleAirplayChangedEvent)}get $5t(){return this.pW.M_()}async K5t(){if(this.Qo){if(this.$5t){if(!this.Qo.Ff){const t=new Promise((t=>u(t,800))),i=this.Qo.df(l.Sh,this.Z5t.Hd);await Promise.race([i,t])}this.Qo.p_()}else{this.i6t=this.pW.Mf,this.e6t=this.pW.vf,this.t6t.yn(l.Sw,this.handleAirplayPlayerTimeUpdate),this.s6t=this.pW.fg,this.pW.fg=this.t6t,this.s6t.m_(),this.s6t.be(),this.t6t.ge(),this.t6t.Pf=this.s6t.Pf,this.t6t.Gf=this.s6t.Gf,this.t6t.c_=this.s6t.c_;const t=this.t6t.df(l.pw);this.t6t.Mf=this.s6t.Mf,await t,this.t6t.p_(),this.t6t.Pf=this.s6t.Pf,this.t6t.Gf=this.s6t.Gf,this.t6t.c_=this.s6t.c_}this.Ta(Xr.CONNECTED)}}J5t(){if(this.s6t){this.t6t.fn(l.Sw,this.handleAirplayPlayerTimeUpdate),this.s6t.Pf=this.t6t.Pf,this.s6t.Gf=this.t6t.Gf,this.s6t.c_=this.t6t.c_;Vt.WE&&!Vt.Ga&&this.pW.ct===1/0?this.e6t?this.s6t.vf=this.e6t:this.s6t.Mf=1/0:this.s6t.Mf=this.i6t,this.e6t=void 0,this.i6t=void 0,this.s6t.ge(),this.t6t.be(),this.t6t.Ff||this.s6t.p_(),this.pW.fg=this.s6t,this.t6t.tr(),this.s6t=void 0}else this.Qo&&(this.Qo.Mf=this.Qo.Mf+1e-4);this.Ta(Xr.AVAILABLE)}T_(){i.Ys.Htt&&(this.Sgt.v_(),this.Z5t.Xd(),this.Z5t=new na,this.$5t?D(this.X5t(this.Z5t.Hd)):D(this.n6t(this.Z5t.Hd)))}async n6t(t){try{await this.t6t.tr();const i=this.pW.Wa();if(void 0===i)throw new g("Not possible to start Airplay without a source");await this.t6t.ga(i,t);const e=this.t6t.df(er.Rw,t);this.t6t.p_(),await function(t,i){return vu((e=>Promise.race([t,ri(i,e).then((()=>{throw new g("Timeout")}))])))}(e,3e3),this.t6t.m_(),Bo(t),this.t6t.T_()}catch(t){if(ut(t))return;0}}gn(){var t;super.gn(),this.pW.NT(this.t6t),null==(t=this.t6t)||t.gn()}constructor(t,e,s){super(t,e),this.q5t=()=>{var t;const e=null==(t=this.pW.Wa())?void 0:t.sources.filter(ow);i.Ys.Htt&&(null==e?void 0:e.some(gN))?this.Ta(Xr.AVAILABLE):this.Ta(Xr.UNAVAILABLE)},this.handleAirplayPlayerTimeUpdate=t=>{this.i6t=t.currentTime,this.e6t=this.pW.vf},this.t6t=s,this.t6t.be(),e.TT(s),this.W5t()}},N1=class extends Ys{I_(){this.r6t.I_()}get ht(){return this.r6t.ht}get wf(){return this.r6t.wf}get bt(){return this.YP}get Mf(){return this.r6t.Mf}set Mf(t){this.r6t.Mf=t}get vf(){return this.r6t.vf}get ct(){return this.r6t.ct}get we(){return this.Us}get If(){return this.r6t.If}get lt(){return this.r6t.lt}get bf(){return this.r6t.bf}get kf(){return this.r6t.kf}get xf(){return this.r6t.xf}get g_(){return this.r6t.g_}get f_(){return this.r6t.f_}get jf(){return this.r6t.jf}get Pf(){return this.r6t.Pf}set Pf(t){this.r6t.Pf=t}get Uf(){return this.r6t.Uf}get Ff(){return this.r6t.Ff}get Gf(){return this.r6t.Gf}set Gf(t){this.r6t.Gf=t}get Hf(){return this.r6t.Hf}get Xf(){return this.r6t.Xf}set Xf(t){this.r6t.Xf=t}get Jf(){return this.r6t.Jf}get t_(){return this.r6t.t_}get e_(){return this.r6t.e_}M_(){return this.r6t.M_()}T_(){this.r6t.T_()}N_(){this.r6t.N_()}get nt(){return this.r6t.nt}get r_(){return this.r6t.r_}get a_(){return this.r6t.a_}get rt(){return this.r6t.rt}get c_(){return this.r6t.c_}set c_(t){this.r6t.c_=t}p_(){D(this.r6t.p_())}m_(){this.r6t.m_()}async y_(){}Wa(){return this.bc}async ga(t,i){let e;if(Bo(i),this.bc=t,bl(t.sources))e=Og({src:""});else{const i=t.sources.filter(ow);for(const t of i)if(gN(t)){e=t;break}}if(!e)throw new g("Unsupported source.");await this.r6t.ga(e,t,i),this.KP(e)}KP(t){this.YP!==t&&(this.YP=t,this.Co(new T(t)))}A_(){return this.r6t.A_()}gf(){return[]}v_(){this.h6t.jB()}ur(t){gw(this,t)}ar(){}S_(t){return!1}D_(){this.r6t.D_()}async tr(){this.YP=void 0,this.bc=void 0,await this.r6t.tr()}ge(){this.r6t.ge()}be(){this.r6t.be()}w_(){return this.r6t.w_()}async gn(){this.Vo(),this.h6t.gn(),await this.r6t.gn(),this.lT.gn(),this._T.gn(),this.Dl.gn()}constructor(t,i,e,s,n,r,h){super(),this.YP=void 0,this.bc=void 0,this.lT=new zs,this._T=new zs,this.Dl=new tu,this.Us=t,this.h6t=new rm(r,h,1,[pg.pm]),this.h6t.FB(t),this.r6t=new _N(t,this.h6t,i,e,s,n),this.r6t.sf(this.Ds),this.lT.fg=this.r6t.ht,this._T.fg=this.r6t.rt,this.Dl.fg=this.r6t.nt}},D1=class extends Ci{async gn(){this.o6t.gn(),await super.gn()}constructor(t){super(t);const i=new N1(this.e7.we,this._O,this.wd,this.t7,this.f_,this.h7,this.Ol);this.o6t=new T1(this,this.e7,i),this.fQ.AH(this.o6t),this.yn(l.Hg,(()=>{this.o6t.H5t()}))}};Uj((t=>new D1(t)),lt.b7);var I1="VPAID";function S1(t){return"spotx"===t.integration}Ds.Ib.lR(new class t{get aqt(){return this.a6t.aqt}dR(t){return S1(t)}uqt(i,e,s){return s.ads||(s.ads=rw({})),s.ads.vpaidMode=s.ads.vpaidMode||t.u6t(),this.a6t.uqt(i,e,s)}n4(i,e,s,n){!function(t){if(!S1(t))throw new g("Unknown ad integration: "+t.integration)}(i);const r=t.c6t(i,s.we);this.a6t.n4(r,e,s,n)}LQ(t){const i=ms(t);if(!S(i.id))return i.queryParameters||(i.queryParameters={}),i.custom&&(i.queryParameters.custom?is('"custom" parameter is redefined in queryParameters! Please use "queryParameters.custom" only!'):(i.queryParameters.custom=i.custom,delete i.custom)),i.app&&(i.queryParameters.app?is('"app" parameter is redefined in queryParameters! Please use "queryParameters.app" only!'):(i.queryParameters.app=i.app,delete i.app)),i.device&&(i.queryParameters.device?is('"device" parameter is redefined in queryParameters! Please use "queryParameters.device" only!'):(i.queryParameters.device=i.device,delete i.device)),i.user&&(i.queryParameters.user?is('"user" parameter is redefined in queryParameters! Please use "queryParameters.user" only!'):(i.queryParameters.user=i.user,delete i.user)),i.ipAddress&&(i.queryParameters.ip_addr?is('"ipAddress" parameter is redefined in queryParameters! Please use "queryParameters.ip_addr" or "ipAddress" only!'):(i.queryParameters.ip_addr=i.ipAddress,delete i.ipAddress)),i.maximumAdDuration&&(i.queryParameters.VMaxd?is('"maximumAdDuration" parameter is redefined in queryParameters! Please use "queryParameters.VMaxd" or "maximumAdDuration" only!'):(i.queryParameters.VMaxd=i.maximumAdDuration,delete i.maximumAdDuration)),i}static c6t(i,e){return{integration:ya.SPOTX,sources:{src:t.d6t(i,Or.location.href,e.offsetWidth,e.offsetHeight,Vt.vb)}}}static d6t(i,e,s,n,r){if(i.sources)return i.sources;let h=n,o=s;r&&0===o&&(o=320,h=180);const a={custom_skin:1,player_width:o,player_height:h};i.cacheBuster&&(a.cb=_.random()),t.l6t(e)&&(a.content_page_url=e);const u=Tt({},a,i.queryParameters);return u[I1]||u.VPI||(u[I1]="js"),"https://search.spotxchange.com/vast/2.0/"+i.id+"?"+t.f6t(u)}static l6t(t){return Df(t,"http://")||Df(t,"https://")}static f6t(t){return EK(t)}static u6t(){return Vt.OE?oa.ENABLED:oa.INSECURE}constructor(){this.a6t=new Y$}});var E1=void 0!==s?s:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},b1=function(){return/Android/i.test(id.userAgent)||/iPhone|iPad|iPod/i.test(id.userAgent)},L1=function(t,i){for(var e=0,s=t.length;e<s;e++)i[e]=t[e]},k1=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},C1=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),w.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),x1=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in w(t))return function(t,i){var e=[],s=!0,n=!1,r=void 0;try{for(var h,o=t[Symbol.iterator]();!(s=(h=o.next()).done)&&(e.push(h.value),!i||e.length!==i);s=!0);}catch(t){n=!0,r=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw r}}return e}(t,i);throw new b("Invalid attempt to destructure non-iterable instance")},O1=function(t,i,e){return t+(i-t)*e},sl=function(){var t=/iPad|iPhone|iPod/.test(id.platform);return function(){return t}}(),j1=function(){var t=-1!==id.userAgent.indexOf("Version")&&-1!==id.userAgent.indexOf("Android")&&-1!==id.userAgent.indexOf("Chrome");return function(){return t}}(),z1=(function(){var t=/^((?!chrome|android).)*safari/i.test(id.userAgent)}(),function(){var t=-1!==id.userAgent.indexOf("Firefox")&&-1!==id.userAgent.indexOf("Android");return function(){return t}}()),P1=function(){var t=id.userAgent.match(/.*Chrome\/([0-9]+)/),i=t?x(t[1],10):null;return function(){return i}}(),B1=function(){var t=!1;if(65===P1()){var i=id.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(i){var e=i[1].split("."),s=x1(e,4),n=(s[0],s[1],s[2]),r=s[3];t=3325===x(n,10)&&x(r,10)<148}}return function(){return t}}(),R1=function(){var t=-1!==id.userAgent.indexOf("R7 Build");return function(){return t}}(),U1=function(){var t=90==s.orientation||-90==s.orientation;return R1()?!t:t},Q1=function(){return _.max(s.screen.width,s.screen.height)*s.devicePixelRatio},F1=function(){return _.min(s.screen.width,s.screen.height)*s.devicePixelRatio},Y1=function(){if(h.exitFullscreen)h.exitFullscreen();else if(h.webkitExitFullscreen)h.webkitExitFullscreen();else if(h.mozCancelFullScreen)h.mozCancelFullScreen();else{if(!h.msExitFullscreen)return!1;h.msExitFullscreen()}return!0},G1=function(t,i,e,s){var n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,i),t.compileShader(n);var r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,e),t.compileShader(r);var h=t.createProgram();for(var o in t.attachShader(h,n),t.attachShader(h,r),s)t.bindAttribLocation(h,s[o],o);return t.linkProgram(h),t.deleteShader(n),t.deleteShader(r),h},V1=function(t,i){for(var e={},s=t.getProgramParameter(i,t.ACTIVE_UNIFORMS),n="",r=0;r<s;r++){e[n=t.getActiveUniform(i,r).name.replace("[0]","")]=t.getUniformLocation(i,n)}return e},W1=function(){var t,i=!1;return t=id.userAgent||id.vendor||s.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(i=!0),i},H1=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},Jr=[],q1=function(t){if(sl()){X1(t);var i,e,n=t.style.width,r=t.style.height,h=t.offsetWidth+1,o=t.offsetHeight;t.style.width=h+"px",t.style.height=o+"px";var a=function(){s.cancelAnimationFrame(e);for(var h=0;h<Jr.length;h++)if(Jr[h]===i){t.style.width=n,t.style.height=r,Jr.splice(h,1);break}};i={g7:t,_6t:a},Jr.push(i),e=s.requestAnimationFrame(a)}},X1=function(t){if(sl())for(var i=0;i<Jr.length;i++)if(Jr[i].g7===t){Jr[i]._6t();break}},Z1=function(){var t=_.PI/180,i=.25*_.PI;var e=new Float32Array([0,0,0,1]),s=new Float32Array([0,0,0]);function n(n,r,h,o,a,u){!function(e,s,n,r){var h=_.tan(s?s.upDegrees*t:i),o=_.tan(s?s.downDegrees*t:i),a=_.tan(s?s.leftDegrees*t:i),u=_.tan(s?s.rightDegrees*t:i),c=2/(a+u),d=2/(h+o);e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=-(a-u)*c*.5,e[9]=(h-o)*d*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0}(n,o||null,u.depthNear,u.depthFar),function(t,i,e){var s=i[0],n=i[1],r=i[2],h=i[3],o=s+s,a=n+n,u=r+r,c=s*o,d=s*a,l=s*u,f=n*a,_=n*u,g=r*u,w=h*o,A=h*a,v=h*u;t[0]=1-(f+g),t[1]=d+v,t[2]=l-A,t[3]=0,t[4]=d-v,t[5]=1-(c+g),t[6]=_+w,t[7]=0,t[8]=l+A,t[9]=_-w,t[10]=1-(c+f),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1}(r,h.orientation||e,h.position||s),a&&function(t,i,e){var s,n,r,h,o,a,u,c,d,l,f,_,g=e[0],w=e[1],A=e[2];i===t?(t[12]=i[0]*g+i[4]*w+i[8]*A+i[12],t[13]=i[1]*g+i[5]*w+i[9]*A+i[13],t[14]=i[2]*g+i[6]*w+i[10]*A+i[14],t[15]=i[3]*g+i[7]*w+i[11]*A+i[15]):(s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],d=i[8],l=i[9],f=i[10],_=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=u,t[7]=c,t[8]=d,t[9]=l,t[10]=f,t[11]=_,t[12]=s*g+o*w+d*A+i[12],t[13]=n*g+a*w+l*A+i[13],t[14]=r*g+u*w+f*A+i[14],t[15]=h*g+c*w+_*A+i[15])}(r,r,a),function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=i[4],o=i[5],a=i[6],u=i[7],c=i[8],d=i[9],l=i[10],f=i[11],_=i[12],g=i[13],w=i[14],A=i[15],v=e*o-s*h,m=e*a-n*h,p=e*u-r*h,y=s*a-n*o,M=s*u-r*o,T=n*u-r*a,N=c*g-d*_,D=c*w-l*_,I=c*A-f*_,S=d*w-l*g,E=d*A-f*g,b=l*A-f*w,L=v*b-m*E+p*S+y*I-M*D+T*N;L&&(L=1/L,t[0]=(o*b-a*E+u*S)*L,t[1]=(n*E-s*b-r*S)*L,t[2]=(g*T-w*M+A*y)*L,t[3]=(l*M-d*T-f*y)*L,t[4]=(a*I-h*b-u*D)*L,t[5]=(e*b-n*I+r*D)*L,t[6]=(w*p-_*T-A*m)*L,t[7]=(c*T-l*p+f*m)*L,t[8]=(h*E-o*I+u*N)*L,t[9]=(s*I-e*E-r*N)*L,t[10]=(_*M-g*p+A*v)*L,t[11]=(d*p-c*M-f*v)*L,t[12]=(o*D-h*S-a*N)*L,t[13]=(e*S-s*D+n*N)*L,t[14]=(g*m-_*y-w*v)*L,t[15]=(c*y-d*m+l*v)*L)}(r,r)}return function(t,i,e){return!(!t||!i)&&(t.pose=i,t.timestamp=i.timestamp,n(t.leftProjectionMatrix,t.leftViewMatrix,i,e.g6t("left"),e.w6t("left"),e),n(t.rightProjectionMatrix,t.rightViewMatrix,i,e.g6t("right"),e.w6t("right"),e),!0)}}(),K1=function(t){var i,e=t.indexOf("://");i=-1!==e?e+3:0;var s=t.indexOf("/",i);return-1===s&&(s=t.length),t.substring(0,s)},J1=function(){var t={};return function(i,e){void 0===t[i]&&(console.warn("webvr-polyfill: "+e),t[i]=!0)}}(),vh=function(t,i){J1(t,t+" has been deprecated. This may not work on native WebVR displays. "+(i?"Please use "+i+" instead.":""))};var $1=function(t,i,e){if(i){for(var s=[],n=null,r=0;r<i.length;++r){switch(h=i[r]){case t.TEXTURE_BINDING_2D:case t.TEXTURE_BINDING_CUBE_MAP:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),s.push(null,null);break}n||(n=t.getParameter(t.ACTIVE_TEXTURE)),t.activeTexture(a),s.push(t.getParameter(h),null);break;case t.ACTIVE_TEXTURE:n=t.getParameter(t.ACTIVE_TEXTURE),s.push(null);break;default:s.push(t.getParameter(h))}}e(t);for(r=0;r<i.length;++r){var h=i[r],o=s[r];switch(h){case t.ACTIVE_TEXTURE:break;case t.ARRAY_BUFFER_BINDING:t.bindBuffer(t.ARRAY_BUFFER,o);break;case t.COLOR_CLEAR_VALUE:t.clearColor(o[0],o[1],o[2],o[3]);break;case t.COLOR_WRITEMASK:t.colorMask(o[0],o[1],o[2],o[3]);break;case t.CURRENT_PROGRAM:t.useProgram(o);break;case t.ELEMENT_ARRAY_BUFFER_BINDING:t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o);break;case t.FRAMEBUFFER_BINDING:t.bindFramebuffer(t.FRAMEBUFFER,o);break;case t.RENDERBUFFER_BINDING:t.bindRenderbuffer(t.RENDERBUFFER,o);break;case t.TEXTURE_BINDING_2D:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_2D,o);break;case t.TEXTURE_BINDING_CUBE_MAP:var a;if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_CUBE_MAP,o);break;case t.VIEWPORT:t.viewport(o[0],o[1],o[2],o[3]);break;case t.BLEND:case t.CULL_FACE:case t.DEPTH_TEST:case t.SCISSOR_TEST:case t.STENCIL_TEST:o?t.enable(h):t.disable(h);break;default:console.log("No GL restore behavior for 0x"+h.toString(16))}n&&t.activeTexture(n)}}else e(t)},t4=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),i4=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function io(t,i,e,s){this.gl=t,this.cardboardUI=i,this.bufferScale=e,this.dirtySubmitFrameBindings=s,this.ctxAttribs=t.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=t.drawingBufferWidth,this.bufferHeight=t.drawingBufferHeight,this.realBindFramebuffer=t.bindFramebuffer,this.realEnable=t.enable,this.realDisable=t.disable,this.realColorMask=t.colorMask,this.realClearColor=t.clearColor,this.realViewport=t.viewport,sl()||(this.realCanvasWidth=w.getOwnPropertyDescriptor(t.canvas.__proto__,"width"),this.realCanvasHeight=w.getOwnPropertyDescriptor(t.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=G1(t,t4,i4,this.attribs),this.uniforms=V1(t,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.indexCount=0,this.renderTarget=t.createTexture(),this.framebuffer=t.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=t.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=t.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=t.createRenderbuffer()),this.patch(),this.onResize()}io.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},io.prototype.onResize=function(){var t=this.gl,i=this,e=[t.RENDERBUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0];$1(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.framebuffer),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.texImage2D(t.TEXTURE_2D,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,i.bufferWidth,i.bufferHeight,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i.renderTarget,0),i.ctxAttribs.depth&&i.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,i.depthStencilBuffer)):i.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,i.depthBuffer)):i.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,i.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,i.stencilBuffer)),!t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),i.realClearColor.apply(t,i.clearColor)})),this.cardboardUI&&this.cardboardUI.onResize()},io.prototype.patch=function(){if(!this.isPatched){var t=this,i=this.gl.canvas,e=this.gl;sl()||(i.width=Q1()*this.bufferScale,i.height=F1()*this.bufferScale,w.defineProperty(i,"width",{configurable:!0,enumerable:!0,get:function(){return t.bufferWidth},set:function(e){t.bufferWidth=e,t.realCanvasWidth.set.call(i,e),t.onResize()}}),w.defineProperty(i,"height",{configurable:!0,enumerable:!0,get:function(){return t.bufferHeight},set:function(e){t.bufferHeight=e,t.realCanvasHeight.set.call(i,e),t.onResize()}})),this.lastBoundFramebuffer=e.getParameter(e.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(i,s){t.lastBoundFramebuffer=s||t.framebuffer,t.realBindFramebuffer.call(e,i,t.lastBoundFramebuffer)},this.cullFace=e.getParameter(e.CULL_FACE),this.depthTest=e.getParameter(e.DEPTH_TEST),this.blend=e.getParameter(e.BLEND),this.scissorTest=e.getParameter(e.SCISSOR_TEST),this.stencilTest=e.getParameter(e.STENCIL_TEST),e.enable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!0;break;case e.DEPTH_TEST:t.depthTest=!0;break;case e.BLEND:t.blend=!0;break;case e.SCISSOR_TEST:t.scissorTest=!0;break;case e.STENCIL_TEST:t.stencilTest=!0}t.realEnable.call(e,i)},e.disable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!1;break;case e.DEPTH_TEST:t.depthTest=!1;break;case e.BLEND:t.blend=!1;break;case e.SCISSOR_TEST:t.scissorTest=!1;break;case e.STENCIL_TEST:t.stencilTest=!1}t.realDisable.call(e,i)},this.colorMask=e.getParameter(e.COLOR_WRITEMASK),e.colorMask=function(i,s,n,r){t.colorMask[0]=i,t.colorMask[1]=s,t.colorMask[2]=n,t.colorMask[3]=r,t.realColorMask.call(e,i,s,n,r)},this.clearColor=e.getParameter(e.COLOR_CLEAR_VALUE),e.clearColor=function(i,s,n,r){t.clearColor[0]=i,t.clearColor[1]=s,t.clearColor[2]=n,t.clearColor[3]=r,t.realClearColor.call(e,i,s,n,r)},this.viewport=e.getParameter(e.VIEWPORT),e.viewport=function(i,s,n,r){t.viewport[0]=i,t.viewport[1]=s,t.viewport[2]=n,t.viewport[3]=r,t.realViewport.call(e,i,s,n,r)},this.isPatched=!0,q1(i)}},io.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,i=this.gl.canvas;sl()||(w.defineProperty(i,"width",this.realCanvasWidth),w.defineProperty(i,"height",this.realCanvasHeight)),i.width=this.bufferWidth,i.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1,u((function(){q1(i)}),1)}},io.prototype.setTextureBounds=function(t,i){t||(t=[0,0,.5,1]),i||(i=[.5,0,.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=i[0],this.viewportOffsetScale[5]=i[1],this.viewportOffsetScale[6]=i[2],this.viewportOffsetScale[7]=i[3]},io.prototype.submitFrame=function(){var t=this.gl,i=this,e=[];if(this.dirtySubmitFrameBindings||e.push(t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0),$1(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.cullFace&&i.realDisable.call(t,t.CULL_FACE),i.depthTest&&i.realDisable.call(t,t.DEPTH_TEST),i.blend&&i.realDisable.call(t,t.BLEND),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realDisable.call(t,t.STENCIL_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),(i.ctxAttribs.alpha||sl())&&(i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(i.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.enableVertexAttribArray(i.attribs.position),t.enableVertexAttribArray(i.attribs.texCoord),t.vertexAttribPointer(i.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(i.attribs.texCoord,3,t.FLOAT,!1,20,8),t.activeTexture(t.TEXTURE0),t.uniform1i(i.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.uniform4fv(i.uniforms.viewportOffsetScale,i.viewportOffsetScale),t.drawElements(t.TRIANGLES,i.indexCount,t.UNSIGNED_SHORT,0),i.cardboardUI&&i.cardboardUI.renderNoState(),i.realBindFramebuffer.call(i.gl,t.FRAMEBUFFER,i.framebuffer),i.ctxAttribs.preserveDrawingBuffer||(i.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),i.dirtySubmitFrameBindings||i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.cullFace&&i.realEnable.call(t,t.CULL_FACE),i.depthTest&&i.realEnable.call(t,t.DEPTH_TEST),i.blend&&i.realEnable.call(t,t.BLEND),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realEnable.call(t,t.STENCIL_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),!i.ctxAttribs.alpha&&i.ctxAttribs.preserveDrawingBuffer||i.realClearColor.apply(t,i.clearColor)})),sl()){var s=t.canvas;s.width==i.bufferWidth&&s.height==i.bufferHeight||(i.bufferWidth=s.width,i.bufferHeight=s.height,i.onResize())}},io.prototype.updateDeviceInfo=function(t){var i=this.gl,e=this,s=[i.ARRAY_BUFFER_BINDING,i.ELEMENT_ARRAY_BUFFER_BINDING];$1(i,s,(function(i){var s=e.A6t(e.meshWidth,e.meshHeight,t);if(i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer),i.bufferData(i.ARRAY_BUFFER,s,i.STATIC_DRAW),!e.indexCount){var n=e.v6t(e.meshWidth,e.meshHeight);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n,i.STATIC_DRAW),e.indexCount=n.length}}))},io.prototype.A6t=function(t,i,e){for(var s=new Float32Array(2*t*i*5),n=e.getLeftEyeVisibleTanAngles(),r=e.getLeftEyeNoLensTanAngles(),h=e.getLeftEyeVisibleScreenRect(r),o=0,a=0;a<2;a++){for(var u=0;u<i;u++)for(var c=0;c<t;c++,o++){var d=c/(t-1),l=u/(i-1),f=d,g=l,w=O1(n[0],n[2],d),A=O1(n[3],n[1],l),v=_.sqrt(w*w+A*A),m=e.distortion.distortInverse(v),p=A*m/v;d=(w*m/v-r[0])/(r[2]-r[0]),l=(p-r[3])/(r[1]-r[3]),d=2*(h.x+d*h.width-.5),l=2*(h.y+l*h.height-.5),s[5*o+0]=d,s[5*o+1]=l,s[5*o+2]=f,s[5*o+3]=g,s[5*o+4]=a}var y=n[2]-n[0];n[0]=-(y+n[0]),n[2]=y-n[2],y=r[2]-r[0],r[0]=-(y+r[0]),r[2]=y-r[2],h.x=1-(h.x+h.width)}return s},io.prototype.v6t=function(t,i){for(var e=new Uint16Array(2*(t-1)*(i-1)*6),s=t/2,n=i/2,r=0,h=0,o=0;o<2;o++)for(var a=0;a<i;a++)for(var u=0;u<t;u++,r++)0!=u&&0!=a&&(u<=s==a<=n?(e[h++]=r,e[h++]=r-t-1,e[h++]=r-t,e[h++]=r-t-1,e[h++]=r,e[h++]=r-1):(e[h++]=r-1,e[h++]=r-t,e[h++]=r,e[h++]=r-t,e[h++]=r-1,e[h++]=r-t-1));return e},io.prototype.m6t=function(t,i){var e=w.getOwnPropertyDescriptor(t,i);return void 0!==e.get&&void 0!==e.set||(e.configurable=!0,e.enumerable=!0,e.get=function(){return this.getAttribute(i)},e.set=function(t){this.setAttribute(i,t)}),e};var e4=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),s4=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),n4=_.PI/180,r4=.3125,mh=28;function h4(t){this.gl=t,this.attribs={position:0},this.program=G1(t,e4,s4,this.attribs),this.uniforms=V1(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function o4(t){this.coefficients=t}h4.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},h4.prototype.listen=function(t,i){var e=this.gl.canvas,s="undefined"!=typeof TouchEvent;this.listener=function(n){var r=e.clientWidth/2,h=s&&n instanceof TouchEvent?(n.preventDefault(),n.changedTouches[0]):n;h.clientX>r-42&&h.clientX<r+42&&h.clientY>e.clientHeight-42?(n.preventDefault(),n.stopImmediatePropagation(),t(n)):h.clientX<42&&h.clientY<42&&(n.preventDefault(),n.stopImmediatePropagation(),i(n))},e.addEventListener("click",this.listener,!1),e.addEventListener("touchstart",this.listener,!1)},h4.prototype.onResize=function(){var t=this.gl,i=this,e=[t.ARRAY_BUFFER_BINDING];$1(t,e,(function(t){var e=[],n=t.drawingBufferWidth/2,r=_.max(screen.width,screen.height)*s.devicePixelRatio,h=t.drawingBufferWidth/r*s.devicePixelRatio,o=4*h/2,a=42*h,u=mh*h/2,c=14*h;function d(t,i){var s=(90-t)*n4,r=_.cos(s),h=_.sin(s);e.push(r4*r*u+n,r4*h*u+u),e.push(i*r*u+n,i*h*u+u)}e.push(n-o,a),e.push(n-o,t.drawingBufferHeight),e.push(n+o,a),e.push(n+o,t.drawingBufferHeight),i.gearOffset=e.length/2;for(var l=0;l<=6;l++){var f=60*l;d(f,1),d(f+12,1),d(f+20,.75),d(f+40,.75),d(f+48,1)}function g(i,s){e.push(c+i,t.drawingBufferHeight-c-s)}i.gearVertexCount=e.length/2-i.gearOffset,i.arrowOffset=e.length/2;var w=o/_.sin(45*n4);g(0,u),g(u,0),g(u+w,w),g(w,u+w),g(w,u-w),g(0,u),g(u,2*u),g(u+w,2*u-w),g(w,u-w),g(0,u),g(w,u-o),g(mh*h,u-o),g(w,u+o),g(mh*h,u+o),i.arrowVertexCount=e.length/2-i.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW)}))},h4.prototype.render=function(){var t=this.gl,i=this,e=[t.CULL_FACE,t.DEPTH_TEST,t.BLEND,t.SCISSOR_TEST,t.STENCIL_TEST,t.COLOR_WRITEMASK,t.VIEWPORT,t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING];$1(t,e,(function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.renderNoState()}))},h4.prototype.renderNoState=function(){var t,i,e,s,n,r,h,o,a,u,c=this.gl;c.useProgram(this.program),c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer),c.enableVertexAttribArray(this.attribs.position),c.vertexAttribPointer(this.attribs.position,2,c.FLOAT,!1,8,0),c.uniform4f(this.uniforms.color,1,1,1,1),t=this.projMat,i=0,e=c.drawingBufferWidth,s=0,n=c.drawingBufferHeight,o=1/(i-e),a=1/(s-n),u=1/((r=.1)-(h=1024)),t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(i+e)*o,t[13]=(n+s)*a,t[14]=(h+r)*u,t[15]=1,c.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),c.drawArrays(c.TRIANGLE_STRIP,0,4),c.drawArrays(c.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),c.drawArrays(c.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},o4.prototype.distortInverse=function(t){for(var i=0,e=1,s=t-this.distort(i);_.abs(e-i)>1e-4;){var n=t-this.distort(e),r=e-n*((e-i)/(n-s));i=e,e=r,s=n}return e},o4.prototype.distort=function(t){for(var i=t*t,e=0,s=0;s<this.coefficients.length;s++)e=i*(e+this.coefficients[s]);return(e+1)*t};var a4=_.PI/180,u4=180/_.PI,Fs=function(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0};Fs.prototype={constructor:Fs,set:function(t,i,e){return this.x=t,this.y=i,this.z=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return _.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();if(0!==t){var i=1/t;this.multiplyScalar(i)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(t){var i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,h=t.z,o=t.w,a=o*i+r*s-h*e,u=o*e+h*i-n*s,c=o*s+n*e-r*i,d=-n*i-r*e-h*s;return this.x=a*o+d*-n+u*-h-c*-r,this.y=u*o+d*-r+c*-n-a*-h,this.z=c*o+d*-h+a*-r-u*-n,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(t,i){var e=t.x,s=t.y,n=t.z,r=i.x,h=i.y,o=i.z;return this.x=s*o-n*h,this.y=n*r-e*o,this.z=e*h-s*r,this}};var Di=function(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1};function c4(t){this.width=t.width||Q1(),this.height=t.height||F1(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}Di.prototype={constructor:Di,set:function(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(t,i,e){var s=_.cos(t/2),n=_.cos(i/2),r=_.cos(e/2),h=_.sin(t/2),o=_.sin(i/2),a=_.sin(e/2);return this.x=h*n*r+s*o*a,this.y=s*o*r-h*n*a,this.z=s*n*a+h*o*r,this.w=s*n*r-h*o*a,this},setFromEulerYXZ:function(t,i,e){var s=_.cos(t/2),n=_.cos(i/2),r=_.cos(e/2),h=_.sin(t/2),o=_.sin(i/2),a=_.sin(e/2);return this.x=h*n*r+s*o*a,this.y=s*o*r-h*n*a,this.z=s*n*a-h*o*r,this.w=s*n*r+h*o*a,this},setFromAxisAngle:function(t,i){var e=i/2,s=_.sin(e);return this.x=t.x*s,this.y=t.y*s,this.z=t.z*s,this.w=_.cos(e),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,i){var e=t.x,s=t.y,n=t.z,r=t.w,h=i.x,o=i.y,a=i.z,u=i.w;return this.x=e*u+r*h+s*a-n*o,this.y=s*u+r*o+n*h-e*a,this.z=n*u+r*a+e*o-s*h,this.w=r*u-e*h-s*o-n*a,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=_.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var e=this.x,s=this.y,n=this.z,r=this.w,h=r*t.w+e*t.x+s*t.y+n*t.z;if(h<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,h=-h):this.copy(t),h>=1)return this.w=r,this.x=e,this.y=s,this.z=n,this;var o=_.acos(h),a=_.sqrt(1-h*h);if(_.abs(a)<.001)return this.w=.5*(r+this.w),this.x=.5*(e+this.x),this.y=.5*(s+this.y),this.z=.5*(n+this.z),this;var u=_.sin((1-i)*o)/a,c=_.sin(i*o)/a;return this.w=r*u+this.w*c,this.x=e*u+this.x*c,this.y=s*u+this.y*c,this.z=n*u+this.z*c,this},setFromUnitVectors:function(){var t,i;return function(e,s){return void 0===t&&(t=new Fs),(i=e.dot(s)+1)<1e-6?(i=0,_.abs(e.x)>_.abs(e.z)?t.set(-e.y,e.x,0):t.set(0,-e.z,e.y)):t.crossVectors(e,s),this.x=t.x,this.y=t.y,this.z=t.z,this.w=i,this.normalize(),this}}()};var d4=new c4({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),l4=new c4({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),f4={CardboardV1:new _4({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new _4({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function qa(t){this.viewer=f4.CardboardV2,this.updateDeviceParams(t),this.distortion=new o4(this.viewer.distortionCoefficients)}function _4(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}qa.prototype.updateDeviceParams=function(t){this.device=this.p6t(t)||this.device},qa.prototype.getDevice=function(){return this.device},qa.prototype.setViewer=function(t){this.viewer=t,this.distortion=new o4(this.viewer.distortionCoefficients)},qa.prototype.p6t=function(t){if(!t)return sl()?(console.warn("Using fallback iOS device measurements."),l4):(console.warn("Using fallback Android device measurements."),d4);var i=.0254,e=i/t.xdpi,s=i/t.ydpi;return new c4({widthMeters:e*Q1(),heightMeters:s*F1(),bevelMeters:.001*t.bevelMm})},qa.prototype.getDistortedFieldOfViewLeftEye=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=(i.widthMeters-t.interLensDistance)/2,r=t.interLensDistance/2,h=t.baselineLensDistance-i.bevelMeters,o=i.heightMeters-h,a=u4*_.atan(e.distort(n/s)),u=u4*_.atan(e.distort(r/s)),c=u4*_.atan(e.distort(h/s)),d=u4*_.atan(e.distort(o/s));return{leftDegrees:_.min(a,t.fov),rightDegrees:_.min(u,t.fov),downDegrees:_.min(c,t.fov),upDegrees:_.min(d,t.fov)}},qa.prototype.getLeftEyeVisibleTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=_.tan(-a4*t.fov),n=_.tan(a4*t.fov),r=_.tan(a4*t.fov),h=_.tan(-a4*t.fov),o=i.widthMeters/4,a=i.heightMeters/2,u=t.baselineLensDistance-i.bevelMeters-a,c=t.interLensDistance/2-o,d=-u,l=t.screenLensDistance,f=e.distort((c-o)/l),g=e.distort((d+a)/l),w=e.distort((c+o)/l),A=e.distort((d-a)/l),v=new Float32Array(4);return v[0]=_.max(s,f),v[1]=_.min(n,g),v[2]=_.min(r,w),v[3]=_.max(h,A),v},qa.prototype.getLeftEyeNoLensTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=new Float32Array(4),n=e.distortInverse(_.tan(-a4*t.fov)),r=e.distortInverse(_.tan(a4*t.fov)),h=e.distortInverse(_.tan(a4*t.fov)),o=e.distortInverse(_.tan(-a4*t.fov)),a=i.widthMeters/4,u=i.heightMeters/2,c=t.baselineLensDistance-i.bevelMeters-u,d=t.interLensDistance/2-a,l=-c,f=t.screenLensDistance,g=(d-a)/f,w=(l+u)/f,A=(d+a)/f,v=(l-u)/f;return s[0]=_.max(n,g),s[1]=_.min(r,w),s[2]=_.min(h,A),s[3]=_.max(o,v),s},qa.prototype.getLeftEyeVisibleScreenRect=function(t){var i=this.viewer,e=this.device,s=i.screenLensDistance,n=(e.widthMeters-i.interLensDistance)/2,r=i.baselineLensDistance-e.bevelMeters,h=(t[0]*s+n)/e.widthMeters,o=(t[1]*s+r)/e.heightMeters,a=(t[2]*s+n)/e.widthMeters,u=(t[3]*s+r)/e.heightMeters;return{x:h,y:u,width:a-h,height:o-u}},qa.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},qa.prototype.getFieldOfViewRightEye=function(t){var i=this.getFieldOfViewLeftEye(t);return{leftDegrees:i.rightDegrees,rightDegrees:i.leftDegrees,upDegrees:i.upDegrees,downDegrees:i.downDegrees}},qa.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.y6t();return{leftDegrees:u4*_.atan(t.outerDist),rightDegrees:u4*_.atan(t.innerDist),downDegrees:u4*_.atan(t.bottomDist),upDegrees:u4*_.atan(t.topDist)}},qa.prototype.getUndistortedViewportLeftEye=function(){var t=this.y6t(),i=this.viewer,e=this.device,s=i.screenLensDistance,n=e.widthMeters/s,r=e.heightMeters/s,h=e.width/n,o=e.height/r,a=_.round((t.eyePosX-t.outerDist)*h),u=_.round((t.eyePosY-t.bottomDist)*o);return{x:a,y:u,width:_.round((t.eyePosX+t.innerDist)*h)-a,height:_.round((t.eyePosY+t.topDist)*o)-u}},qa.prototype.y6t=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=t.interLensDistance/2/s,r=i.widthMeters/s,h=i.heightMeters/s,o=r/2-n,a=(t.baselineLensDistance-i.bevelMeters)/s,u=t.fov,c=e.distortInverse(_.tan(a4*u)),d=_.min(o,c),l=_.min(n,c),f=_.min(a,c);return{outerDist:d,innerDist:l,topDist:_.min(h-a,c),bottomDist:f,eyePosX:o,eyePosY:a}},qa.Viewers=f4;var g4={format:1,last_updated:"2018-02-20T22:55:10Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]};function w4(t,i){if(this.dpdb=g4,this.M6t(),t){this.onDeviceParamsUpdated=i;var e=new sd,s=this;e.open("GET",t,!0),e.addEventListener("load",(function(){s.loading=!1,e.status>=200&&e.status<=299?(s.dpdb=JSON.parse(e.response),s.M6t()):console.error("Error loading online DPDB!")})),e.send()}}function A4(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}function v4(t,i){this.set(t,i)}function th(t,i){this.kFilter=t,this.isDebug=i,this.currentAccelMeasurement=new v4,this.currentGyroMeasurement=new v4,this.previousGyroMeasurement=new v4,sl()?this.filterQ=new Di(-1,0,0,1):this.filterQ=new Di(1,0,0,1),this.previousFilterQ=new Di,this.previousFilterQ.copy(this.filterQ),this.accelQ=new Di,this.isOrientationInitialized=!1,this.estimatedGravity=new Fs,this.measuredGravity=new Fs,this.gyroIntegralQ=new Di}function m4(t,i){this.predictionTimeS=t,this.isDebug=i,this.previousQ=new Di,this.previousTimestampS=null,this.deltaQ=new Di,this.outQ=new Di}function Si(t,i,e,n){this.yawOnly=e,this.accelerometer=new Fs,this.gyroscope=new Fs,this.filter=new th(t,n),this.posePredictor=new m4(i,n),this.isFirefoxAndroid=z1(),this.isIOS=sl();var r=P1();this.isDeviceMotionInRadians=!this.isIOS&&r&&r<66,this.isWithoutDeviceMotion=B1(),this.filterToWorldQ=new Di,sl()?this.filterToWorldQ.setFromAxisAngle(new Fs(1,0,0),_.PI/2):this.filterToWorldQ.setFromAxisAngle(new Fs(1,0,0),-_.PI/2),this.inverseWorldToScreenQ=new Di,this.worldToScreenQ=new Di,this.originalPoseAdjustQ=new Di,this.originalPoseAdjustQ.setFromAxisAngle(new Fs(0,0,1),-s.orientation*_.PI/180),this.T6t(),U1()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new Di,this.N6t=new Float32Array(4),this.start()}w4.prototype.getDeviceParams=function(){return this.deviceParams},w4.prototype.M6t=function(){var t=this.D6t();t?(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},w4.prototype.D6t=function(){var t=this.dpdb;if(!t)return console.error("DPDB not available."),null;if(1!=t.format)return console.error("DPDB has unexpected format version."),null;if(!t.devices||!t.devices.length)return console.error("DPDB does not have a devices section."),null;var i=id.userAgent||id.vendor||s.opera,e=Q1(),n=F1();if(!t.devices)return console.error("DPDB has no devices section."),null;for(var r=null,h=1/0,o=0;o<t.devices.length;o++){var a=t.devices[o];if(a.rules)if("ios"==a.type||"android"==a.type){if(sl()==("ios"==a.type)){for(var u=!1,c=0;c<a.rules.length;c++){var d=a.rules[c],l=this.I6t(d,i,e,n);if(!0===l){h=l,r=a,u=!0;break}!1!==l&&l<h&&(h=l,r=a)}if(u)break}}else console.warn("Device["+o+"] has invalid type.");else console.warn("Device["+o+"] has no rules section.")}return r?new A4({xdpi:r.dpi[0]||r.dpi,ydpi:r.dpi[1]||r.dpi,bevelMm:r.bw}):(console.warn("No DPDB device match."),null)},w4.prototype.I6t=function(t,i,e,s){if(!t.ua&&!t.res)return!1;if(t.ua&&i.indexOf(t.ua)<0)return!1;if(t.res){if(!t.res[0]||!t.res[1])return!1;var n=t.res[0],r=t.res[1],h=_.min(e,s)-_.min(n,r),o=_.max(e,s)-_.max(n,r),a=_.abs(h)+_.abs(o);if(a>0)return a}return!0},v4.prototype.set=function(t,i){this.sample=t,this.timestampS=i},v4.prototype.copy=function(t){this.set(t.sample,t.timestampS)},th.prototype.addAccelMeasurement=function(t,i){this.currentAccelMeasurement.set(t,i)},th.prototype.addGyroMeasurement=function(t,i){this.currentGyroMeasurement.set(t,i),function(t){return!(S(t)||t<=.001||t>1)}(i-this.previousGyroMeasurement.timestampS)&&this.S6t(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},th.prototype.S6t=function(){if(!this.isOrientationInitialized)return this.accelQ=this.E6t(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,i=this.b6t(this.currentGyroMeasurement.sample,t);this.gyroIntegralQ.multiply(i),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(i);var e=new Di;e.copy(this.filterQ),e.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(e),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var s=new Di;s.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),s.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",u4*function(t){return t.w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*_.acos(t.w)}(s),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var n=new Di;n.copy(this.filterQ),n.multiply(s),this.filterQ.slerp(n,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},th.prototype.getOrientation=function(){return this.filterQ},th.prototype.E6t=function(t){var i=new Fs;i.copy(t),i.normalize();var e=new Di;return e.setFromUnitVectors(new Fs(0,0,-1),i),e.inverse(),e},th.prototype.b6t=function(t,i){var e=new Di,s=new Fs;return s.copy(t),s.normalize(),e.setFromAxisAngle(s,t.length()*i),e},m4.prototype.getPrediction=function(t,i,e){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=e,t;var s=new Fs;s.copy(i),s.normalize();var n=i.length();if(n<20*a4)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(u4*n).toFixed(1)),this.outQ.copy(t),this.previousQ.copy(t),this.outQ;var r=n*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(s,r),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.previousTimestampS=e,this.outQ},Si.prototype.getPosition=function(){return null},Si.prototype.getOrientation=function(){var t=void 0;if(this.isWithoutDeviceMotion&&this.L6t)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(i=(new Di).setFromAxisAngle(new Fs(0,0,-1),0),e=new Di,-90===s.orientation?e.setFromAxisAngle(new Fs(0,1,0),_.PI/-2):e.setFromAxisAngle(new Fs(0,1,0),_.PI/2),i.multiply(e)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var t=new Di;return t.setFromAxisAngle(new Fs(1,0,0),-_.PI/2),t}(),t=this.L6t,(n=new Di).copy(t),n.multiply(this.deviceOrientationFilterToWorldQ),n.multiply(this.resetQ),n.multiply(this.worldToScreenQ),n.multiplyQuaternions(this.deviceOrientationFixQ,n),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.N6t[0]=n.x,this.N6t[1]=n.y,this.N6t[2]=n.z,this.N6t[3]=n.w,this.N6t;var i,e,n,r=this.filter.getOrientation();return t=this.posePredictor.getPrediction(r,this.gyroscope,this.previousTimestampS),(n=new Di).copy(this.filterToWorldQ),n.multiply(this.resetQ),n.multiply(t),n.multiply(this.worldToScreenQ),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.N6t[0]=n.x,this.N6t[1]=n.y,this.N6t[2]=n.z,this.N6t[3]=n.w,this.N6t},Si.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),U1()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},Si.prototype.k6t=function(t){this.L6t=this.L6t||new Di;var i=t.alpha,e=t.beta,s=t.gamma;i=(i||0)*_.PI/180,e=(e||0)*_.PI/180,s=(s||0)*_.PI/180,this.L6t.setFromEulerYXZ(e,i,-s)},Si.prototype.C6t=function(t){this.x6t(t)},Si.prototype.x6t=function(t){var i=t.accelerationIncludingGravity,e=t.rotationRate,s=t.timeStamp/1e3,n=s-this.previousTimestampS;return n<0?(J1("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=s)):n<=.001||n>1?(J1("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=s)):(this.accelerometer.set(-i.x,-i.y,-i.z),R1()?this.gyroscope.set(-e.beta,e.alpha,e.gamma):this.gyroscope.set(e.alpha,e.beta,e.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(_.PI/180),this.filter.addAccelMeasurement(this.accelerometer,s),this.filter.addGyroMeasurement(this.gyroscope,s),void(this.previousTimestampS=s))},Si.prototype.O6t=function(t){this.T6t()},Si.prototype.TC=function(t){var i=t.data;i&&i.type&&("devicemotion"===i.type.toLowerCase()&&this.x6t(i.deviceMotionEvent))},Si.prototype.T6t=function(){switch(this.worldToScreenQ.set(0,0,0,1),s.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new Fs(0,0,1),-_.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new Fs(0,0,1),_.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},Si.prototype.start=function(){var t,i,e;this.j6t=this.C6t.bind(this),this.z6t=this.O6t.bind(this),this.P6t=this.TC.bind(this),this.B6t=this.k6t.bind(this),sl()&&(t=s.self!==s.top,i=K1(h.referrer),e=K1(s.location.href),t&&i!==e)&&s.addEventListener("message",this.P6t),s.addEventListener("orientationchange",this.z6t),this.isWithoutDeviceMotion?s.addEventListener("deviceorientation",this.B6t):s.addEventListener("devicemotion",this.j6t)},Si.prototype.stop=function(){s.removeEventListener("devicemotion",this.j6t),s.removeEventListener("deviceorientation",this.B6t),s.removeEventListener("orientationchange",this.z6t),s.removeEventListener("message",this.P6t)};var p4=new Fs(1,0,0),y4=new Fs(0,0,1),M4={};screen.orientation?M4=screen.orientation:screen.msOrientation?M4=screen.msOrientation:w.defineProperty(M4,"angle",{get:function(){return s.orientation||0}});var T4=new Di;T4.setFromAxisAngle(p4,-_.PI/2),T4.multiply((new Di).setFromAxisAngle(y4,_.PI/2));var N4=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new b("Cannot call a class as a function")}(this,t),this.config=i,this.sensor=null,this.fusionSensor=null,this.R6t=new Float32Array(4),this.api=null,this.errors=[],this.U6t=new Di,this.Q6t=new Di,this.F6t=new Di,this.Y6t=this.Y6t.bind(this),this.G6t=this.G6t.bind(this),this.V6t=this.V6t.bind(this),this.V6t(),this.init()}return C1(t,[{key:"init",value:function(){var t=null;try{(t=new RelativeOrientationSensor({frequency:60})).addEventListener("error",this.G6t)}catch(t){this.errors.push(t),"SecurityError"===t.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===t.name?this.useDeviceMotion():console.error(t)}t&&(this.api="sensor",this.sensor=t,this.sensor.addEventListener("reading",this.Y6t),this.sensor.start()),s.addEventListener("orientationchange",this.V6t)}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new Si(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this.R6t[0]=this.R6t[1]=this.R6t[2]=0,this.R6t[3]=1,this.R6t;var t=this.sensor.quaternion;this.U6t.set(t[0],t[1],t[2],t[3]);var i=this.F6t;return i.copy(T4),i.multiply(this.U6t),i.multiply(this.Q6t),this.config.YAW_ONLY&&(i.x=i.z=0,i.normalize()),this.R6t[0]=i.x,this.R6t[1]=i.y,this.R6t[2]=i.z,this.R6t[3]=i.w,this.R6t}},{key:"G6t",value:function(t){this.errors.push(t.error),"NotAllowedError"===t.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===t.error.name?console.error("Sensor could not be read"):console.error(t.error)}},{key:"Y6t",value:function(){}},{key:"V6t",value:function(){var t=-M4.angle*_.PI/180;this.Q6t.setFromAxisAngle(y4,t)}}]),t}();function lh(){this.W6t();var t=h.createElement("div");(r=t.style).position="fixed",r.top=0,r.right=0,r.bottom=0,r.left=0,r.backgroundColor="gray",r.fontFamily="sans-serif",r.zIndex=1e6;var i=h.createElement("img");i.src=this.icon,(r=i.style).marginLeft="25%",r.marginTop="25%",r.width="50%",t.appendChild(i);var e=h.createElement("div");(r=e.style).textAlign="center",r.fontSize="16px",r.lineHeight="24px",r.margin="24px 25%",r.width="50%",e.innerHTML="Place your phone into your Cardboard viewer.",t.appendChild(e);var s=h.createElement("div");(r=s.style).backgroundColor="#CFD8DC",r.position="fixed",r.bottom=0,r.width="100%",r.height="48px",r.padding="14px 24px",r.boxSizing="border-box",r.color="#656A6B",t.appendChild(s);var n=h.createElement("div");n.style.float="left",n.innerHTML="No Cardboard viewer?";var r,o=h.createElement("a");o.href="https://www.google.com/get/cardboard/get-cardboard/",o.innerHTML="get one",o.target="Du",(r=o.style).float="right",r.fontWeight=600,r.textTransform="uppercase",r.borderLeft="1px solid gray",r.paddingLeft="24px",r.textDecoration="none",r.color="#656A6B",s.appendChild(n),s.appendChild(o),this.overlay=t,this.text=e,this.hide()}lh.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):h.body.appendChild(this.overlay),this.overlay.style.display="block";var i=this.overlay.querySelector("img").style;U1()?(i.width="20%",i.marginLeft="40%",i.marginTop="3%"):(i.width="50%",i.marginLeft="25%",i.marginTop="25%")},lh.prototype.hide=function(){this.overlay.style.display="none"},lh.prototype.showTemporarily=function(t,i){this.show(i),this.timer=u(this.hide.bind(this),t)},lh.prototype.disableShowTemporarily=function(){c(this.timer)},lh.prototype.update=function(){this.disableShowTemporarily(),!U1()&&W1()?this.show():this.hide()},lh.prototype.W6t=function(){this.icon="data:"+"image/svg+xml"+";base64,"+"PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"};var D4="CardboardV1",I4="WEBVR_CARDBOARD_VIEWER";function Hi(){try{this.selectedKey=localStorage.getItem(I4)}catch(t){console.error("Failed to load viewer profile: %s",t)}this.selectedKey||(this.selectedKey=D4),this.dialog=this.H6t(qa.Viewers),this.root=null,this.q6t=[]}Hi.prototype.show=function(t){this.root=t,t.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},Hi.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},Hi.prototype.getCurrentViewer=function(){return qa.Viewers[this.selectedKey]},Hi.prototype.X6t=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},Hi.prototype.onChange=function(t){this.q6t.push(t)},Hi.prototype.Z6t=function(t){for(var i=0;i<this.q6t.length;i++)this.q6t[i](t)},Hi.prototype.K6t=function(){if(this.selectedKey=this.X6t(),this.selectedKey&&qa.Viewers[this.selectedKey]){this.Z6t(qa.Viewers[this.selectedKey]);try{localStorage.setItem(I4,this.selectedKey)}catch(t){console.error("Failed to save viewer profile: %s",t)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},Hi.prototype.H6t=function(t){var i=h.createElement("div");i.classList.add("webvr-polyfill-viewer-selector"),i.style.display="none";var e=h.createElement("div");(n=e.style).position="fixed",n.left=0,n.top=0,n.width="100%",n.height="100%",n.background="rgba(0, 0, 0, 0.3)",e.addEventListener("click",this.hide.bind(this));var s=h.createElement("div"),n=s.style;for(var r in n.boxSizing="border-box",n.position="fixed",n.top="24px",n.left="50%",n.marginLeft="-140px",n.width="280px",n.padding="24px",n.overflow="hidden",n.background="#fafafa",n.fontFamily="'Roboto', sans-serif",n.boxShadow="0px 5px 20px #666",s.appendChild(this.J6t("Select your viewer")),t)s.appendChild(this.$6t(r,t[r].label));return s.appendChild(this.t8t("Save",this.K6t.bind(this))),i.appendChild(e),i.appendChild(s),i},Hi.prototype.J6t=function(t){var i=h.createElement("h1"),e=i.style;return e.color="black",e.fontSize="20px",e.fontWeight="bold",e.marginTop=0,e.marginBottom="24px",i.innerHTML=t,i},Hi.prototype.$6t=function(t,i){var e=h.createElement("div");e.style.marginTop="8px",e.style.color="black";var s=h.createElement("input");s.style.fontSize="30px",s.setAttribute("id",t),s.setAttribute("type","radio"),s.setAttribute("value",t),s.setAttribute("name","field");var n=h.createElement("label");return n.style.marginLeft="4px",n.setAttribute("for",t),n.innerHTML=i,e.appendChild(s),e.appendChild(n),e},Hi.prototype.t8t=function(t,i){var e=h.createElement("button");e.innerHTML=t;var s=e.style;return s.float="right",s.textTransform="uppercase",s.color="#1094f7",s.fontSize="14px",s.letterSpacing=0,s.border=0,s.background="none",s.marginTop="16px",e.addEventListener("click",i),e};void 0!==s||("undefined"!=typeof global?global:"undefined"!=typeof self&&self);var S4=function(t,i){return t(i={exports:{}},i.exports),i.exports}((function(t,i){var e;e=function(){return function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||w.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return w.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),w.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),r=e(1),o=void 0!==id&&C((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(id.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!s.MSStream,a=function(){function t(){!function(t,i){if(!(t instanceof i))throw new b("Cannot call a class as a function")}(this,t),o?this.noSleepTimer=null:(this.noSleepVideo=h.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",r),this.noSleepVideo.addEventListener("timeupdate",function(t){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=_.random())}.bind(this)))}return n(t,[{key:"enable",value:function(){o?(this.disable(),this.noSleepTimer=s.setInterval((function(){s.location.href="/",s.setTimeout(s.stop,0)}),15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){o?this.noSleepTimer&&(s.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),t}();t.exports=a},function(t,i,e){t.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])},t.exports=e()})),E4=function(t){return t&&t.__esModule?t.default:t}(S4),b4=1e3,L4=[0,0,.5,1],k4=[.5,0,.5,1],C4=s.requestAnimationFrame,x4=s.cancelAnimationFrame;function O4(t){w.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:t.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:t.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:t.canPresent},maxLayers:{writable:!1,enumerable:!0,value:t.maxLayers},hasOrientation:{enumerable:!0,get:function(){return vh("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),t.hasOrientation}}})}function Zi(t){var i=!("wakelock"in(t=t||{}))||t.wakelock;this.isPolyfilled=!0,this.displayId=b4++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,w.defineProperty(this,"isConnected",{get:function(){return vh("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new O4({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.i8t=!1,this.Fp=null,this.e8t=null,this.RY=null,this.w7=null,this.s8t=null,this.n8t=null,this.r8t=null,this.h8t=null,i&&W1()&&(this.o8t=new E4)}Zi.prototype.getFrameData=function(t){return Z1(t,this.a8t(),this)},Zi.prototype.getPose=function(){return vh("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this.a8t()},Zi.prototype.resetPose=function(){return vh("VRDisplay.prototype.resetPose"),this.u8t()},Zi.prototype.getImmediatePose=function(){return vh("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this.a8t()},Zi.prototype.requestAnimationFrame=function(t){return C4(t)},Zi.prototype.cancelAnimationFrame=function(t){return x4(t)},Zi.prototype.wrapForFullscreen=function(t){if(sl())return t;if(!this.w7){this.w7=h.createElement("div");var i=["height: "+_.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.w7.setAttribute("style",i.join("; ")+";"),this.w7.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.RY==t)return this.w7;if(this.RY&&(this.e8t?this.e8t.appendChild(this.RY):this.RY.parentElement.removeChild(this.RY)),this.RY=t,this.e8t=t.parentElement,this.e8t||h.body.appendChild(t),!this.w7.parentElement){var e=this.RY.parentElement;e.insertBefore(this.w7,this.RY),e.removeChild(this.RY)}this.w7.insertBefore(this.RY,this.w7.firstChild),this.s8t=this.RY.getAttribute("style");var s=this;return function(){if(s.RY){var t=["position: absolute","top: 0","left: 0","width: "+_.max(screen.width,screen.height)+"px","height: "+_.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];s.RY.setAttribute("style",t.join("; ")+";")}}(),this.w7},Zi.prototype.removeFullscreenWrapper=function(){if(this.RY){var t=this.RY;this.s8t?t.setAttribute("style",this.s8t):t.removeAttribute("style"),this.RY=null,this.s8t=null;var i=this.w7.parentElement;return this.w7.removeChild(t),this.e8t===i?i.insertBefore(t,this.w7):this.e8t&&this.e8t.appendChild(t),i.removeChild(this.w7),t}},Zi.prototype.requestPresent=function(t){var i=this.isPresenting,e=this;return t instanceof Array||(vh("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),t=[t]),new Promise((function(s,n){if(e.capabilities.canPresent)if(0==t.length||t.length>e.capabilities.maxLayers)n(new g("Invalid number of layers."));else{var r=t[0];if(r.source){var o=r.leftBounds||L4,a=r.rightBounds||k4;if(i){var u=e.Fp;u.source!==r.source&&(u.source=r.source);for(var c=0;c<4;c++)u.leftBounds[c]=o[c],u.rightBounds[c]=a[c];return e.wrapForFullscreen(e.Fp.source),e.c8t(),void s()}if(e.Fp={predistorted:r.predistorted,source:r.source,leftBounds:o.slice(0),rightBounds:a.slice(0)},e.i8t=!1,e.Fp&&e.Fp.source){var d=e.wrapForFullscreen(e.Fp.source);e.d8t(d,(function(){var t=h.fullscreenElement||h.webkitFullscreenElement||h.mozFullScreenElement||h.msFullscreenElement;e.isPresenting=d===t,e.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch((function(t){console.error("screen.orientation.lock() failed due to",t.message)})),e.i8t=!1,e.l8t(),s()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),e.disableWakeLock(),e.f8t(),e.removeFullscreenWrapper(),e._8t()),e.g8t()}),(function(){e.i8t&&(e.removeFullscreenWrapper(),e._8t(),e.disableWakeLock(),e.i8t=!1,e.isPresenting=!1,n(new g("Unable to present.")))})),!function(t){if(h.fullscreenEnabled&&t.requestFullscreen)t.requestFullscreen();else if(h.webkitFullscreenEnabled&&t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(h.mozFullScreenEnabled&&t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!h.msFullscreenEnabled||!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0}(d)?(sl()||j1())&&(e.enableWakeLock(),e.isPresenting=!0,e.l8t(),e.g8t(),s()):(e.enableWakeLock(),e.i8t=!0)}e.i8t||sl()||(Y1(),n(new g("Unable to present.")))}else s()}else n(new g("VRDisplay is not capable of presenting."))}))},Zi.prototype.exitPresent=function(){var t=this.isPresenting,i=this;return this.isPresenting=!1,this.Fp=null,this.disableWakeLock(),new Promise((function(e,s){t?(Y1(),i.f8t(),i.removeFullscreenWrapper(),i._8t(),i.g8t(),e()):s(new g("Was not presenting to VRDisplay."))}))},Zi.prototype.getLayers=function(){return this.Fp?[this.Fp]:[]},Zi.prototype.g8t=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});s.dispatchEvent(t)},Zi.prototype.w8t=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});s.dispatchEvent(t)},Zi.prototype.d8t=function(t,i,e){this._8t(),this.n8t=t,this.r8t=i,this.h8t=e,i&&(h.fullscreenEnabled?t.addEventListener("fullscreenchange",i,!1):h.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenchange",i,!1):h.mozFullScreenEnabled?h.addEventListener("mozfullscreenchange",i,!1):h.msFullscreenEnabled&&t.addEventListener("msfullscreenchange",i,!1)),e&&(h.fullscreenEnabled?t.addEventListener("fullscreenerror",e,!1):h.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenerror",e,!1):h.mozFullScreenEnabled?h.addEventListener("mozfullscreenerror",e,!1):h.msFullscreenEnabled&&t.addEventListener("msfullscreenerror",e,!1))},Zi.prototype._8t=function(){if(this.n8t){var t=this.n8t;if(this.r8t){var i=this.r8t;t.removeEventListener("fullscreenchange",i,!1),t.removeEventListener("webkitfullscreenchange",i,!1),h.removeEventListener("mozfullscreenchange",i,!1),t.removeEventListener("msfullscreenchange",i,!1)}if(this.h8t){var e=this.h8t;t.removeEventListener("fullscreenerror",e,!1),t.removeEventListener("webkitfullscreenerror",e,!1),h.removeEventListener("mozfullscreenerror",e,!1),t.removeEventListener("msfullscreenerror",e,!1)}this.n8t=null,this.r8t=null,this.h8t=null}},Zi.prototype.enableWakeLock=function(){this.o8t&&this.o8t.enable()},Zi.prototype.disableWakeLock=function(){this.o8t&&this.o8t.disable()},Zi.prototype.l8t=function(){},Zi.prototype.f8t=function(){},Zi.prototype.submitFrame=function(t){},Zi.prototype.getEyeParameters=function(t){return null};var j4={MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},z4="left",P4="right";function le(t){var i=H1({},j4);t=H1(i,t||{}),Zi.call(this,{wakelock:t.MOBILE_WAKE_LOCK}),this.config=t,this.displayName="Cardboard VRDisplay",this.capabilities=new O4({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.A8t=this.config.BUFFER_SCALE,this.v8t=new N4(this.config),this.m8t=null,this.p8t=null,this.g7=null,this.y8t=null,this.M8t=new w4(this.config.DPDB_URL,this.T8t.bind(this)),this.N8t=new qa(this.M8t.getDeviceParams()),this.D8t=new Hi,this.D8t.onChange(this.I8t.bind(this)),this.N8t.setViewer(this.D8t.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.S8t=new lh),sl()&&s.addEventListener("resize",this.NY.bind(this))}le.prototype=w.create(Zi.prototype),le.prototype.a8t=function(){return{position:null,orientation:this.v8t.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},le.prototype.u8t=function(){this.v8t.resetPose&&this.v8t.resetPose()},le.prototype.g6t=function(t){var i;if(t==z4)i=this.N8t.getFieldOfViewLeftEye();else{if(t!=P4)return console.error("Invalid eye provided: %s",t),null;i=this.N8t.getFieldOfViewRightEye()}return i},le.prototype.w6t=function(t){var i;if(t==z4)i=[.5*-this.N8t.viewer.interLensDistance,0,0];else{if(t!=P4)return console.error("Invalid eye provided: %s",t),null;i=[.5*this.N8t.viewer.interLensDistance,0,0]}return i},le.prototype.getEyeParameters=function(t){var i=this.w6t(t),e=this.g6t(t),s={offset:i,renderWidth:.5*this.N8t.device.width*this.A8t,renderHeight:this.N8t.device.height*this.A8t};return w.defineProperty(s,"fieldOfView",{enumerable:!0,get:function(){return vh("VRFieldOfView","VRFrameData's projection matrices"),e}}),s},le.prototype.T8t=function(t){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.N8t.updateDeviceParams(t),this.m8t&&this.m8t.updateDeviceInfo(this.N8t)},le.prototype.E8t=function(){this.Fp&&this.m8t&&(this.Fp.leftBounds||this.Fp.rightBounds)&&this.m8t.setTextureBounds(this.Fp.leftBounds,this.Fp.rightBounds)},le.prototype.l8t=function(){var t=this.Fp.source.getContext("webgl");if(t||(t=this.Fp.source.getContext("experimental-webgl")),t||(t=this.Fp.source.getContext("webgl2")),t){if(this.g7=t.canvas,this.y8t=t.canvas.getAttribute("style"),this.Fp.predistorted?this.config.CARDBOARD_UI_DISABLED||(t.canvas.width=Q1()*this.A8t,t.canvas.height=F1()*this.A8t,this.p8t=new h4(t)):(this.config.CARDBOARD_UI_DISABLED||(this.p8t=new h4(t)),this.m8t=new io(t,this.p8t,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.m8t.updateDeviceInfo(this.N8t)),this.p8t&&this.p8t.listen(function(t){this.D8t.show(this.Fp.source.parentElement),t.stopPropagation(),t.preventDefault()}.bind(this),function(t){this.exitPresent(),t.stopPropagation(),t.preventDefault()}.bind(this)),this.S8t){var i=this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT;U1()&&W1()&&i?this.S8t.showTemporarily(i,this.Fp.source.parentElement):this.S8t.update()}this.orientationHandler=this.O6t.bind(this),s.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.E8t.bind(this),s.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.NY(),this.b8t()}},le.prototype.f8t=function(){this.m8t&&(this.m8t.destroy(),this.m8t=null),this.p8t&&(this.p8t.destroy(),this.p8t=null),this.S8t&&this.S8t.hide(),this.D8t.hide(),this.g7&&(X1(this.g7),this.y8t?this.g7.setAttribute("style",this.y8t):this.g7.removeAttribute("style"),q1(this.g7),this.g7=null,this.y8t=null),s.removeEventListener("orientationchange",this.orientationHandler),s.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},le.prototype.c8t=function(){this.f8t(),this.l8t()},le.prototype.submitFrame=function(t){if(this.m8t)this.E8t(),this.m8t.submitFrame();else if(this.p8t&&this.Fp){var i=this.Fp.source.getContext("webgl").canvas;i.width==this.lastWidth&&i.height==this.lastHeight||this.p8t.onResize(),this.lastWidth=i.width,this.lastHeight=i.height,this.p8t.render()}},le.prototype.O6t=function(t){this.D8t.hide(),this.S8t&&this.S8t.update(),this.NY()},le.prototype.NY=function(t){if(this.Fp){var i=this.Fp.source.getContext("webgl");X1(i.canvas);i.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),q1(i.canvas)}},le.prototype.I8t=function(t){this.N8t.setViewer(t),this.m8t&&this.m8t.updateDeviceInfo(this.N8t),this.b8t()},le.prototype.b8t=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.N8t}});s.dispatchEvent(t)},le.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},le.VRDisplay=Zi;var B4={PROVIDE_MOBILE_VRDISPLAY:!0,GET_VR_DISPLAYS_TIMEOUT:1e3,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function Iu(t){this.config=k1(k1({},B4),t),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in id,this.native={},this.native.getVRDisplays=id.getVRDisplays,this.native.VRFrameData=s.VRFrameData,this.native.VRDisplay=s.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&b1())&&(this.enable(),this.getVRDisplays().then((function(t){t&&t[0]&&t[0].w8t&&t[0].w8t()})))}Iu.prototype.getPolyfillDisplays=function(){if(this.L8t)return this.polyfillDisplays;if(b1()){var t=new le({MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,TOUCH_PANNER_DISABLED:this.config.TOUCH_PANNER_DISABLED,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(t)}return this.L8t=!0,this.polyfillDisplays},Iu.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var t=this.native.VRFrameData,i=new this.native.VRFrameData,e=this.native.VRDisplay.prototype.getFrameData;s.VRDisplay.prototype.getFrameData=function(s){s instanceof t?e.call(this,s):(e.call(this,i),s.pose=i.pose,L1(i.leftProjectionMatrix,s.leftProjectionMatrix),L1(i.rightProjectionMatrix,s.rightProjectionMatrix),L1(i.leftViewMatrix,s.leftViewMatrix),L1(i.rightViewMatrix,s.rightViewMatrix))}}id.getVRDisplays=this.getVRDisplays.bind(this),s.VRDisplay=le.VRDisplay,s.VRFrameData=le.VRFrameData},Iu.prototype.getVRDisplays=function(){var t,i=this,e=this.config;return this.hasNative?function(t){return Promise.race?Promise.race(t):new Promise((function(i,e){for(var s=0;s<t.length;s++)t[s].then(i,e)}))}([this.native.getVRDisplays.call(id),new Promise((function(i){t=u((function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),i([])}),e.GET_VR_DISPLAYS_TIMEOUT)}))]).then((function(e){return c(t),e.length>0?e:i.getPolyfillDisplays()})):Promise.resolve(this.getPolyfillDisplays())},Iu.version="0.10.5-opentelly.3",Iu.VRFrameData=le.VRFrameData,Iu.VRDisplay=le.VRDisplay;var R4=w.freeze({default:Iu}),U4=R4&&Iu||R4;void 0!==E1&&E1.window&&(E1.document||(E1.document=E1.window.document),E1.navigator||(E1.navigator=E1.window.navigator));new U4({TOUCH_PANNER_DISABLED:!0,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:0,MOBILE_WAKE_LOCK:!Vt.vb&&!Vt.Ga,DPDB_URL:void 0});var xi,Q4=class{k8t(t,i){const e=this.C8t;let s;switch(i){case e.VERTEX_SHADER:s=e.createShader(i),this.x8t=s;break;case e.FRAGMENT_SHADER:s=e.createShader(i),this.O8t=s;break;default:return void console.error("Invalid Shader Type:",i)}e.attachShader(this.j8t,s),e.shaderSource(s,t),e.compileShader(s)}z8t(t){const i=this.C8t;if(t){this.P8t={};for(const e in t)i.bindAttribLocation(this.j8t,t[e],e),this.P8t[e]=t[e]}}B8t(){this.C8t.linkProgram(this.j8t)}R8t(){const t=this.C8t;if(this.U8t){if(t.getProgramParameter(this.j8t,t.LINK_STATUS)){if(!this.P8t){this.P8t={};const i=t.getProgramParameter(this.j8t,t.ACTIVE_ATTRIBUTES);for(let e=0;e<i;e++){const i=t.getActiveAttrib(this.j8t,e);this.P8t[i.name]=t.getAttribLocation(this.j8t,i.name)}}this.Q8t={};const i=t.getProgramParameter(this.j8t,t.ACTIVE_UNIFORMS);let e="";for(let s=0;s<i;s++){e=t.getActiveUniform(this.j8t,s).name.replace("[0]",""),this.Q8t[e]=t.getUniformLocation(this.j8t,e)}}else this.x8t&&!t.getShaderParameter(this.x8t,t.COMPILE_STATUS)?console.error("Vertex shader compile error:",t.getShaderInfoLog(this.x8t)):this.O8t&&!t.getShaderParameter(this.O8t,t.COMPILE_STATUS)?console.error("Fragment shader compile error:",t.getShaderInfoLog(this.O8t)):console.error("Program link error:",t.getProgramInfoLog(this.j8t)),t.deleteProgram(this.j8t),this.j8t=null;t.deleteShader(this.x8t),t.deleteShader(this.O8t),this.U8t=!1}t.useProgram(this.j8t)}constructor(t){this.P8t=null,this.Q8t=null,this.U8t=!0,this.x8t=null,this.O8t=null,this.C8t=t,this.j8t=t.createProgram()}},F4=class{pr(t,i,e){let s=this.C8t;this.F8t(t,i,s,e),this.t.Ff||this.t.g7.hY(s,s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE),s.drawElements(s.TRIANGLES,this.Y8t,s.UNSIGNED_SHORT,0)}G8t(t){this.V8t||(t.bindTexture(t.TEXTURE_2D,this.W8t),this.t.g7.hY(t,t.TEXTURE_2D,0,t.RGB,t.RGB,t.UNSIGNED_BYTE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.V8t=!0)}F8t(t,i,e,s){const n=this.j8t;n.R8t(),this.G8t(e);const r=n.Q8t,h=n.P8t;let o;e.uniformMatrix4fv(r.projectionMat,!1,t),e.uniformMatrix4fv(r.modelViewMat,!1,i),o="right"===s?this.H8t:this.q8t,e.bindBuffer(e.ARRAY_BUFFER,o),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.X8t),e.enableVertexAttribArray(h.position),e.enableVertexAttribArray(h.texCoord),e.vertexAttribPointer(h.position,3,e.FLOAT,!1,20,0),e.vertexAttribPointer(h.texCoord,2,e.FLOAT,!1,20,12),e.activeTexture(e.TEXTURE0),e.uniform1i(r.diffuse,0),e.bindTexture(e.TEXTURE_2D,this.W8t)}constructor(t,i,e){this.V8t=!1,this.C8t=t,this.W8t=t.createTexture();let s=["uniform mat4 projectionMat;","uniform mat4 modelViewMat;","attribute vec3 position;","attribute vec2 texCoord;","varying vec2 vTexCoord;","void main() {","  vTexCoord = texCoord;","  gl_Position = projectionMat * modelViewMat * vec4( position, 1.0 );","}"].join("\n"),n=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");this.j8t=new Q4(t),this.j8t.k8t(s,t.VERTEX_SHADER),this.j8t.k8t(n,t.FRAGMENT_SHADER),this.j8t.z8t({position:0,texCoord:1}),this.j8t.B8t();const r=[],h=[],o=[],a=40;for(let t=0;t<=40;++t){const i=t*_.PI/40,s=_.sin(i),n=_.cos(i);for(let i=0;i<=a;++i){const o=2*i*_.PI/a-_.PI,u=_.sin(o)*s,c=n,d=-_.cos(o)*s,l=i/a,f=t/40;switch(e){case"horizontal":r.push(2*u,2*c,2*d,l/2,f),h.push(2*u,2*c,2*d,l/2+.5,f);break;case"vertical":r.push(2*u,2*c,2*d,l,f/2),h.push(2*u,2*c,2*d,l,f/2+.5);break;default:r.push(2*u,2*c,2*d,l,f)}}}for(let t=0;t<40;++t){let i=41*t,e=41*(t+1);for(let t=0;t<a;++t){let s=i+t,n=e+t;o.push(s,n,s+1,n,n+1,s+1)}}switch(this.q8t=t.createBuffer(),this.H8t=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.q8t),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.H8t),e){case"horizontal":case"vertical":t.bufferData(t.ARRAY_BUFFER,new Float32Array(h),t.STATIC_DRAW);break;default:t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW)}this.X8t=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.X8t),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),t.STATIC_DRAW),this.Y8t=o.length,this.t=i}},Y4=class extends yo{fa(){return new G4}constructor(){super("Z8t")}},G4=class extends wn{constructor(){super("stereochange")}},V4=class extends yo{fa(){return new W4}constructor(){super("K8t")}},W4=class extends wn{constructor(){super("directionchange")}},to=_.PI/180,dc=180/_.PI,rl=class{Kj(t,i){return this.x=t,this.y=i,this}Udt(t){return this.x=t.x,this.y=t.y,this}J8t(t){return this.Kj(t[0],t[1])}$8t(){const t=new Float32Array(2);return t[0]=this.x,t[1]=this.y,t}t9t(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}constructor(t,i){this.x=t||0,this.y=i||0}},Yh=class{Kj(t,i,e){return this.x=t,this.y=i,this.z=e,this}Udt(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}J8t(t){return this.Kj(t[0],t[1],t[2])}$8t(){const t=new Float32Array(3);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t}U(){return _.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}i9t(){const t=this.U();if(0!==t){const i=1/t;this.e9t(i)}else this.x=0,this.y=0,this.z=0;return this}e9t(t){this.x*=t,this.y*=t,this.z*=t}s9t(t){const i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,h=t.z,o=t.w,a=o*i+r*s-h*e,u=o*e+h*i-n*s,c=o*s+n*e-r*i,d=-n*i-r*e-h*s;return this.x=a*o+d*-n+u*-h-c*-r,this.y=u*o+d*-r+c*-n-a*-h,this.z=c*o+d*-h+a*-r-u*-n,this}n9t(t){return this.x*t.x+this.y*t.y+this.z*t.z}r9t(t,i){const e=t.x,s=t.y,n=t.z,r=i.x,h=i.y,o=i.z;return this.x=s*o-n*h,this.y=n*r-e*o,this.z=e*h-s*r,this}constructor(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0}},xa=class{Kj(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this}Udt(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}J8t(t){return this.Kj(t[0],t[1],t[2],t[3])}$8t(){const t=new Float32Array(4);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=this.w,t}n9t(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}sD(t){return this.h9t(this,t)}h9t(t,i){const e=t.x,s=t.y,n=t.z,r=t.w,h=i.x,o=i.y,a=i.z,u=i.w;return this.x=e*u+r*h+s*a-n*o,this.y=s*u+r*o+n*h-e*a,this.z=n*u+r*a+e*o-s*h,this.w=r*u-e*h-s*o-n*a,this}o9t(){return this.x*=-1,this.y*=-1,this.z*=-1,this.i9t(),this}a9t(){const t=this.x,i=this.y,e=this.z,s=this.w,n=t*i+e*s;let r,h,o;if(n>.499)r=2*_.atan2(t,s),h=_.PI/2,o=0;else if(n<-.499)r=-2*_.atan2(t,s),h=-_.PI/2,o=0;else{const a=t*t,u=i*i,c=e*e;r=_.atan2(2*i*s-2*t*e,1-2*u-2*c),h=_.asin(2*n),o=_.atan2(2*t*s-2*i*e,1-2*a-2*c)}return new $c(r,o,h)}i9t(){let t=_.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this}constructor(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1}},$c=class{Kj(t,i,e){return this.u9t=t,this.c9t=i,this.d9t=e,this}Udt(t){return this.Kj(t.u9t,t.c9t,t.d9t)}ST(t){return this.u9t+=t.u9t,this.c9t+=t.c9t,this.d9t+=t.d9t,this}l9t(){const t=this.u9t,i=this.d9t,e=this.c9t,s=_.cos(t/2),n=_.cos(i/2),r=_.cos(e/2),h=_.sin(t/2),o=_.sin(i/2),a=_.sin(e/2),u=s*n,c=h*o;return new xa(u*a+c*r,h*n*r+s*o*a,s*o*r-h*n*a,u*r-c*a)}constructor(t,i,e){this.u9t=t||0,this.c9t=i||0,this.d9t=e||0}},H4=.15,q4=class{UI(){this.Rt||(this.Rt=!0,this.we.addEventListener("keydown",this.f9t),this.we.addEventListener("mousedown",this._9t),this.we.addEventListener("touchstart",this.g9t),s.addEventListener("mousemove",this.er),s.addEventListener("mouseup",this.w9t),this.A9t(s),s.addEventListener("touchmove",this.v9t),s.addEventListener("touchend",this.m9t))}A9t(t){if(IM(t));else if(SM(t))try{t.parent.addEventListener("mouseup",this.w9t),this.A9t(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.p9t)}}QI(){this.Rt&&(this.Rt=!1,this.y9t=!1,this.M9t&&(gn(this.M9t),this.M9t=null),this.we.removeEventListener("keydown",this.f9t),this.we.removeEventListener("mousedown",this._9t),this.we.removeEventListener("touchstart",this.g9t),s.removeEventListener("mousemove",this.er),s.removeEventListener("mouseup",this.w9t),this.T9t(s),s.removeEventListener("touchmove",this.v9t),s.removeEventListener("touchend",this.m9t))}T9t(t){if(t.document.documentElement.removeEventListener("mouseleave",this.p9t),SM(t))try{t.parent.removeEventListener("mouseup",this.w9t),this.T9t(t.parent)}catch(t){}}get N9t(){return new $c(this.D9t,this.I9t,this.S9t)}set N9t(t){this.D9t=t.u9t,this.I9t=t.c9t,this.S9t=t.d9t}E9t(t){this.b9t("D9t",t)}L9t(t){t=os(t,-_.PI/2,_.PI/2),this.b9t("I9t",t)}b9t(t,i){this.M9t&&gn(this.M9t);let e=this[t],s=Fu(),n=()=>{let r=Fu()-s;if(r>=80)return this[t]=i,gn(this.M9t),void(this.M9t=null);this.M9t=_r(n);let h=r/80;this[t]=e+(i-e)*h};this.M9t=_r(n)}k9t(){this.I9t+=2*_.PI*this.C9t.y/this.we.clientHeight*.3,this.D9t+=2*_.PI*this.C9t.x/this.we.clientWidth*.5,this.I9t=os(this.I9t,-_.PI/2,_.PI/2)}x9t(){this.y9t=!1}O9t(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.we}resetPose(){this.I9t=0,this.D9t=0}gn(){this.QI()}constructor(t){this.Rt=!1,this.I9t=0,this.D9t=0,this.S9t=0,this.M9t=null,this.j9t=new rl,this.z9t=new rl,this.C9t=new rl,this.y9t=!1,this.f9t=t=>{38===t.keyCode?this.L9t(this.I9t+H4):39===t.keyCode?this.E9t(this.D9t-H4):40===t.keyCode?this.L9t(this.I9t-H4):37===t.keyCode&&this.E9t(this.D9t+H4)},this._9t=t=>{this.j9t.Kj(t.clientX,t.clientY),this.y9t=!0,t.preventDefault()},this.g9t=t=>{t.touches&&1===t.touches.length&&(this.j9t.Kj(t.touches[0].pageX,t.touches[0].pageY),this.y9t=!0,t.preventDefault())},this.er=t=>{if(this.y9t||this.O9t()){if(this.O9t()){let i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.z9t.Kj(this.j9t.x-i,this.j9t.y-e)}else this.z9t.Kj(t.clientX,t.clientY);this.C9t.t9t(this.z9t,this.j9t),this.j9t.Udt(this.z9t),this.k9t()}},this.v9t=t=>{this.y9t&&(this.z9t.Kj(t.touches[0].pageX,t.touches[0].pageY),this.C9t.t9t(this.z9t,this.j9t),this.j9t.Udt(this.z9t),this.k9t())},this.w9t=t=>{this.x9t()},this.m9t=t=>{this.x9t()},this.p9t=t=>{this.x9t()},this.we=t}},Zh=so(cd()),X4=so(dd()),Z4=(so(ld()),so(fd())),K4=(so(_d()),so(gd())),J4=so(wd()),$4=so(Ad()),t2=so(vd()),i2=so(md()),e2=["K8t","Vrt","Z8t","error"];function s2(t){let i,e={get stereo(){return t.P9t},set stereo(i){t.P9t=i},get useDeviceMotionControls(){return t.B9t},set useDeviceMotionControls(i){t.B9t=i},get direction(){return t.R9t},set direction(i){t.R9t=i},get verticalFOV(){return t.U9t},set verticalFOV(i){t.U9t=i},get canPresentVR(){return t.Q9t},get state(){return t.rdt},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new hL(t,e2,e),e}!function(t){t.Rs="unavailable",t.F9t="available",t.Oa="presenting"}(xi||(xi={}));var n2=new $c(0*to,0,0);function r2(t){return xd(t+180,360)-180}function h2(t,i){let e=t.n9t(i);return 1-e*e<1e-4}var o2=class extends Pl{ko(){id.getVRDisplays?(this.Y9t=new VRFrameData,this.G9t(),s.addEventListener("vrdisplayconnect",this.G9t,!1),s.addEventListener("vrdisplaydisconnect",this.G9t,!1),s.addEventListener("vrdisplayactivate",this.V9t,!1),s.addEventListener("vrdisplaydeactivate",this.W9t,!1),s.addEventListener("vrdisplaypresentchange",this.H9t,!1)):id.getVRDevices?this.q9t("Your browser supports WebVR but not the latest version.",Ui.VR_PLATFORM_UNSUPPORTED):this.q9t("Your browser does not support WebVR.",Ui.VR_PLATFORM_UNSUPPORTED),this.t.yn(l.lo,this.do),this.do()}X9t(){let t={alpha:!1,antialias:!1,preserveDrawingBuffer:!0};if(!this.Z9t){const t=h.createElement("canvas");t.className="theoplayer-vr",yc(t),t.style.zIndex="2",this.t.we.appendChild(t),this.Z9t=t}this.C8t=this.Z9t.getContext("webgl",t),this.C8t||(this.C8t=this.Z9t.getContext("experimental-webgl",t),this.C8t)?(this.C8t.enable(this.C8t.DEPTH_TEST),this.C8t.enable(this.C8t.CULL_FACE)):this.q9t("Your browser does not support WebGL.",Ui.VR_PLATFORM_UNSUPPORTED)}K9t(){let t=this.R9t;this.J9t||(this.X9t(),this.J9t=!0),this.C8t&&(this.$9t(new F4(this.C8t,this.t,this.t7t)),this.Z9t.style.display="",this.gi||(this.gi=new q4(this.Z9t)),this.gi.UI(),this.t.ya.yn(Tc.ra,this.NY),this.t.yn(_i.pn,this.NY),this.R9t=t,this.NY(),this.i7t=_r(this.e7t))}s7t(){let t=this.R9t;this.$9t(void 0),this.gi&&this.gi.QI(),this.Z9t&&(this.Z9t.style.display="none"),this.t.ya.fn(Tc.ra,this.NY),this.t.fn(_i.pn,this.NY),this.i7t&&gn(this.i7t),this.R9t=t}n7t(){var t;return null==(t=this.t.Wa())?void 0:t.vr}r7t(t){let i=this.rdt,e=this.P9t;this.h7t&&(this.o7t=void 0,this.W9t()),this.h7t=t,this.h7t&&(this.h7t.depthNear=.1,this.h7t.depthFar=1024),this.P9t=e,this.rdt!==i&&this.Co(new al),this.P9t!==e&&this.Co(new Y4)}a7t(t){let i=this.rdt;this.u7t=t,this.rdt!==i&&this.Co(new al)}$9t(t){let i=this.rdt;this.c7t=t,this.rdt!==i&&this.Co(new al)}d7t(t){let i=this.rdt,e=this.P9t;this.l7t=t,this.gi&&(t?this.gi.QI():this.gi.UI()),this.rdt!==i&&this.Co(new al),this.P9t!==e&&this.Co(new Y4)}f7t(t){let i=this.P9t;this._7t=t,this.P9t!==i&&this.Co(new Y4)}g7t(){let t=this.Z9t;this.w7t===t.width&&this.A7t===t.height||(t.width=this.w7t,t.height=this.A7t,this.v7t())}m7t(t,i){(0,X4.default)(t,i.$8t()),(0,K4.default)(t,t)}useDeviceOrientation(){return!!this.l7t||this.p7t}y7t(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().catch(El)}q9t(t,i){xD(t),this.Co(new Bi(new $i(i,t)))}M7t(){this.Co(new V4)}get P9t(){return this.Q9t?this.l7t:this._7t}set P9t(t){this.Q9t?t?this.V9t():this.W9t():this.f7t(t)}get B9t(){return this.p7t}set B9t(t){this.P9t||(this.p7t=t,t&&Vt.Ga&&this.y7t())}get R9t(){let t=this.N9t;return{yaw:r2(t.u9t*dc),pitch:t.c9t*dc,roll:_.round(t.d9t*dc)}}set R9t(t){let i=r2(t&&+t.yaw||0),e=r2(t&&+t.pitch||0),s=r2(t&&+t.roll||0);this.N9t=new $c(i*to,e*to,s*to)}get N9t(){if(this.rdt===xi.Rs)return this.T7t.a9t();let t=this.N7t,i=this.D7t,e=new $c;return t&&e.ST(t),i&&e.ST(i),e}set N9t(t){const i=this.N9t.l9t();if(this.rdt===xi.Rs)this.T7t=t.l9t();else{let i=this.h7t;i&&i.resetPose&&i.resetPose(),this.gi&&(this.gi.N9t=t),this.T7t=this.N9t.l9t()}h2(i,this.T7t)||this.M7t()}get N7t(){let t=this.o7t&&this.o7t.orientation;if(t)return(new xa).J8t(t).a9t()}get D7t(){return this.gi&&this.gi.N9t}get U9t(){return 180*this.I7t}set U9t(t){t&&t>=0&&t<=180&&(this.I7t=+t/180)}get Q9t(){return!(!this.h7t||!this.h7t.capabilities.canPresent)}get rdt(){var t;return this.u7t&&((null==(t=this.n7t())?void 0:t.nativeVR)||this.c7t)?this.l7t?xi.Oa:xi.F9t:xi.Rs}gn(){this.ES.Xd(),this.Vo(),this.s7t(),this.W9t(),this.t.fn(l.lo,this.do),s.removeEventListener("vrdisplayconnect",this.G9t,!1),s.removeEventListener("vrdisplaydisconnect",this.G9t,!1),s.removeEventListener("vrdisplayactivate",this.V9t,!1),s.removeEventListener("vrdisplaydeactivate",this.W9t,!1),s.removeEventListener("vrdisplaypresentchange",this.H9t,!1),this.t=void 0}constructor(t){super(),this.ES=new na,this.T7t=new xa,this.I7t=.4,this._7t=!1,this.p7t=!1,this.u7t=!1,this.wd=void 0,this.t7t=Ca.NONE,this.gi=void 0,this.S7t=[],this.h7t=void 0,this.l7t=!1,this.J9t=!1,this.Z9t=void 0,this.c7t=void 0,this.C8t=null,this.i7t=0,this.Y9t=void 0,this.o7t=void 0,this.E7t=(0,Zh.default)(),this.b7t=(0,Zh.default)(),this.w7t=0,this.A7t=0,this.L7t=!0,this.k7t=0,this.C7t=()=>{this.t.fn(er.Rw,this.C7t);let t=this.n7t();t&&!t.nativeVR&&this.K9t()},this.do=()=>{this.s7t();let t=this.n7t();this.wd=t,t&&t.panoramaMode!==lc.NONE?(t.panoramaMode===lc.PM180&&is("PanoramaMode is set to '180' while the VR API only supports '360', consider using the WebXR API if you need to play 180 degree content."),this.a7t(!0),t.nativeVR?this.Co(new al):(this.t7t=t.stereoMode,this.t.yn(er.Rw,this.C7t))):this.a7t(!1)},this.V9t=async()=>{if(this.rdt!==xi.Rs&&this.Q9t){this.L7t=!1,this.x7t();try{await this.h7t.requestPresent([{source:this.Z9t}])}catch(t){this.q9t("Failed to present VR content.",Ui.VR_PRESENTATION_ERROR)}finally{this.H9t()}}},this.W9t=async()=>{if(this.h7t)try{await this.h7t.exitPresent()}catch(t){}finally{this.H9t()}},this.G9t=async()=>{try{this.S7t=await dt(id.getVRDisplays(),this.ES.Hd),this.h7t&&qt(this.S7t,this.h7t)||this.r7t(this.S7t[0])}catch(t){this.S7t=[],this.r7t(void 0)}},this.H9t=()=>{this.d7t(!!this.h7t&&this.h7t.isPresenting),this.NY(),this.L7t=!this.l7t,this.L7t?_r(this.v7t):this.x7t()},this.NY=()=>{if(!this.Z9t)return;const t=this.t.we.offsetWidth,e=this.t.we.offsetHeight;let s=this.h7t;if(s&&this.P9t){let t=s.getEyeParameters("left"),i=s.getEyeParameters("right");t&&i&&(this.w7t=2*_.max(t.renderWidth,i.renderWidth),this.A7t=_.max(t.renderHeight,i.renderHeight))}else{let s=i.Ys.A2;this.w7t=t*s,this.A7t=e*s}},this.v7t=()=>{if(!Vt.Ga||!this.Z9t||!this.L7t)return;this.x7t();let t=this.Z9t,i=t.offsetWidth+1,e=t.offsetHeight;t.style.width=i+"px",t.style.height=e+"px",this.k7t=_r(this.x7t)},this.x7t=()=>{if(!this.k7t)return;let t=this.Z9t;t.style.width="100%",t.style.height="100%",gn(this.k7t),this.k7t=0},this.e7t=()=>{let t=this.h7t,i=this.I7t,e=this.Z9t,s=this.c7t,n=this.C8t,r=this.Y9t,h=this.E7t,o=this.b7t;this.g7t(),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),t&&this.useDeviceOrientation()&&(t.getFrameData(r),this.o7t=r.pose);let a=this.N9t.l9t();this.m7t(o,a),t&&t.isPresenting?(this.i7t=t.requestAnimationFrame(this.e7t),n.viewport(0,0,.5*e.width,e.height),s.pr(r.leftProjectionMatrix,o,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.pr(r.rightProjectionMatrix,o,"right"),t.submitFrame()):(this.i7t=_r(this.e7t),(0,$4.default)(h,_.PI*i,e.width/e.height,.1,1024),this.P9t?(n.viewport(0,0,.5*e.width,e.height),s.pr(h,o,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.pr(h,o,"right")):(n.viewport(0,0,e.width,e.height),s.pr(h,o))),h2(a,this.T7t)||(this.T7t.Udt(a),this.M7t())},this.t=t,this.N9t=n2,this.va=s2(this),this.ko()}};Zr((function(t){return class extends t{fa(){if(null!==this.O7t){const t=this.O7t.va;return xl(super.fa(),{vr:t})}return super.fa()}gn(){var t;null==(t=this.O7t)||t.gn(),super.gn()}constructor(t,i){super(t,i),this.O7t=null,i.vr.useWebXR||(this.O7t=new o2(this))}}}),lt.Za);var a2=class{UI(){this.Le||(this.Le=!0,this.Us.addEventListener("mousedown",this._9t),this.Us.addEventListener("touchstart",this.g9t),s.addEventListener("mousemove",this.er),s.addEventListener("touchmove",this.v9t),s.addEventListener("mouseup",this.w9t),s.addEventListener("touchend",this.m9t),this.A9t(s))}QI(){this.Le&&(this.Le=!1,this.Us.removeEventListener("mousedown",this._9t),this.Us.removeEventListener("touchstart",this.g9t),s.removeEventListener("mousemove",this.er),s.removeEventListener("touchmove",this.v9t),s.removeEventListener("mouseup",this.w9t),s.removeEventListener("touchend",this.m9t),this.T9t(s))}A9t(t){if(IM(t));else if(SM(t))try{t.parent.addEventListener("mouseup",this.w9t),this.A9t(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.p9t)}}T9t(t){if(t.document.documentElement.removeEventListener("mouseleave",this.p9t),SM(t))try{t.parent.removeEventListener("mouseup",this.w9t),this.T9t(t.parent)}catch(t){}}x9t(){this.j7t=!1}k9t(){const t=this.P7t.z7t;t.yaw+=2*_.PI*this.B7t.x*.4/this.Us.clientWidth,t.pitch+=2*_.PI*this.B7t.y*.5/this.Us.clientHeight,t.pitch=os(t.pitch,-_.PI/2,_.PI/2),this.P7t.z7t=t}O9t(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.Us}gn(){this.QI()}constructor(t,i){this.Le=!1,this.R7t=new rl,this.U7t=new rl,this.B7t=new rl,this.j7t=!1,this._9t=t=>{this.R7t.Kj(t.clientX,t.clientY),this.j7t=!0,t.preventDefault(),t.stopPropagation()},this.g9t=t=>{t.touches&&1===t.touches.length&&(this.R7t.Kj(t.touches[0].pageX,t.touches[0].pageY),this.j7t=!0,t.preventDefault())},this.er=t=>{if(this.j7t||this.O9t()){if(this.O9t()){const i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.U7t.Kj(this.R7t.x-i,this.R7t.y-e)}else this.U7t.Kj(t.clientX,t.clientY);this.B7t.t9t(this.U7t,this.R7t),this.R7t.Udt(this.U7t),this.k9t()}},this.v9t=t=>{this.j7t&&(this.U7t.Kj(t.touches[0].pageX,t.touches[0].pageY),this.B7t.t9t(this.U7t,this.R7t),this.R7t.Udt(this.U7t),this.k9t())},this.w9t=()=>{this.x9t()},this.m9t=()=>{this.x9t()},this.p9t=()=>{this.x9t()},this.P7t=t,this.Us=i}},u2=class{Q7t(t){t.clearColor(...this.VH),t.clear(t.COLOR_BUFFER_BIT)}F7t(t,i){t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.DEPTH_BUFFER_BIT),this.Y7t.forEach((e=>{e.F7t(t,i)}))}G7t(t){this.Y7t.push(t)}V7t(){this.Y7t=[]}constructor(){this.VH=[0,0,0,1],this.Y7t=[]}},c2=class{W7t(t,i,e){const s=t.createBuffer();return null===s?(is("Failed to create buffer."),null):(t.bindBuffer(i,s),t.bufferData(i,e,t.STATIC_DRAW),s)}constructor(t,i,e,s,n){this.H7t=t,this.iL=this.W7t(t,i,e),this.q7t=s,this.X0=n,this.X7t=!1,this.Z7t=0,this.Zu=0}},d2=class extends c2{UI(t){if(null===this.iL)return void is("Attempted to enable buffer that failed to initialize.");if(null===t)return void is("Attempted to enable attribute without location.");const i=this.H7t;i.bindBuffer(i.ARRAY_BUFFER,this.iL),i.vertexAttribPointer(t,this.q7t,this.X0,this.X7t,this.Z7t,this.Zu),i.enableVertexAttribArray(t)}QI(t){t&&this.H7t.disableVertexAttribArray(t)}constructor(t,i,e){super(t,t.ARRAY_BUFFER,i,e,t.FLOAT)}};var l2,f2,ph,_2=class extends c2{K7t(){const t=this.H7t;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.iL),t.drawElements(t.TRIANGLES,this.J7t,this.X0,this.Zu)}constructor(t,i){super(t,t.ELEMENT_ARRAY_BUFFER,i,1,t.UNSIGNED_SHORT),this.J7t=i.length}};!function(t){t.VertexPos="aVertexPosition",t.VertexUV="aVertexUV",t.VertexColor="aVertexColor"}(l2||(l2={})),function(t){t.ProjectionMat="uProjectionMatrix",t.ModelViewMat="uModelViewMatrix",t.Texture="uTexture"}(f2||(f2={})),function(t){t.Normal="vNormal",t.Color="vColor",t.UV="vUV"}(ph||(ph={}));var g2=class{$7t(t,i,e){const s=this.tti(t,t.VERTEX_SHADER,i),n=this.tti(t,t.FRAGMENT_SHADER,e);if(null===s||null===n)return is("Failed to create vertex or fragment shader."),null;const r=t.createProgram();return null===r?(is("Failed to create shader program"),null):(t.attachShader(r,s),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(is("Failed to initialize shader program"),null))}tti(t,i,e){const s=t.createShader(i);if(null===s)return is("failed to create shader."),null;if(t.shaderSource(s,e),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){const i=t.getShaderInfoLog(s);return is("Failed to compile shader with error: "+i),t.deleteShader(s),null}return s}iti(){return this.eti}sti(t){const i=this.eti;if(null===i)return is("Attempted to retrieve attribute location when shader program was not initialized"),null;const e=this.H7t.getAttribLocation(i,t);return-1===e?null:e}nti(t){const i=this.eti;if(null===i)return is("Attempted to retrieve uniform location when shader program was not initialized"),null;const e=this.H7t.getUniformLocation(i,t);return null===e&&xD("Attempted to retrieve nonexistent uniform: "+t),e}constructor(t,i,e){this.H7t=t,this.eti=this.$7t(this.H7t,i,e)}},wh=class{rti(){const t=this.hti.length,i=_.max(...this.oti);return i>=t?(xD("Created geometry where largest index ("+i+") is larger than/equal to attribute array size ("+t+")"),!1):(i<t-1&&is("Created geometry where largest index ("+i+") is smaller than attribute buffer - 1 ("+(t-1)+") resulting in unused vertices"),!this.ati||this.ati.length===t||(xD("Created geometry where position ("+t+") and uv ("+this.ati.length+") buffers have different length."),!1))}uti(t,i){if(!this.rti())throw new g("Failed to validate buffers for WebGLGeometry.");const e=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y,t.z)})),new d2(t,new Float32Array(e),3)}(t,this.hti),s=function(t,i){return new _2(t,new Uint16Array(i))}(t,this.oti),n=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y)})),new d2(t,new Float32Array(e),2)}(t,this.ati);return new w2(e,s,n,i)}constructor(t,i,e){this.hti=t,this.oti=i,this.ati=e}},w2=class{cti(){this.hti.UI(this.dti),null!==this.lti&&this.ati.UI(this.lti)}fti(){this.hti.QI(this.dti),null!==this.lti&&this.ati.QI(this.lti)}F7t(){this.oti.K7t()}constructor(t,i,e,s){this.hti=t;const n=s.sti(l2.VertexPos);if(null===n)throw new g("Failed to get position attribute location.");this.dti=n,this.ati=e,this.lti=s.sti(l2.VertexUV),this.oti=i}},A2=class extends wh{constructor(t=1,i=32,e=16,s=0,n=2*_.PI,r=0,h=_.PI){let o=0;const a=_.min(r+h,_.PI),u=[],c=[],d=[],l=[];for(let u=0;u<=e;u++){const f=[],g=u/e;let w=0;0===u&&0===r?w=.5/i:u===e&&a===_.PI&&(w=-.5/i);for(let e=0;e<=i;e++){const a=e/i,u=-t*_.cos(s+a*n)*_.sin(r+g*h),l=t*_.cos(r+g*h),A=t*_.sin(s+a*n)*_.sin(r+g*h);c.push(new Yh(u,l,A)),d.push(new rl(a+w,1-g)),f.push(o++)}l.push(f)}for(let t=0;t<e;t++)for(let s=0;s<i;s++){const i=l[t][s+1],n=l[t][s],h=l[t+1][s],o=l[t+1][s+1];(0!==t||r>0)&&u.push(i,n,o),(t!==e-1||a<_.PI)&&u.push(n,h,o)}super(c,u,d)}},v2=[0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,255],m2=class{_ti(){const t=this.H7t;t.activeTexture(this.gti),t.bindTexture(t.TEXTURE_2D,this.wti)}ur(){const t=this.H7t;t.activeTexture(this.gti),t.bindTexture(t.TEXTURE_2D,this.wti),t.uniform1i(this.Ati,0)}vti(t){const i=this.H7t;i.bindTexture(i.TEXTURE_2D,this.wti),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,this.GK,this.mti,this.pti,this.yti,t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}Mti(t){const i=this.H7t;i.bindTexture(i.TEXTURE_2D,this.wti),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),t.g7.hY(i,i.TEXTURE_2D,this.GK,this.mti,this.pti,this.yti),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}constructor(t,i){if(this.H7t=t,this.wti=t.createTexture(),null===this.wti)throw new g("Failed to create texture");const e=i.nti(f2.Texture);if(null===e)throw new g("Failed to get texture location.");this.Ati=e,t.bindTexture(t.TEXTURE_2D,this.wti),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.gti=t.TEXTURE0,this.GK=0,this.mti=t.RGBA,this.pti=t.RGBA,this.yti=t.UNSIGNED_BYTE,t.texImage2D(t.TEXTURE_2D,this.GK,this.mti,2,2,0,this.pti,this.yti,new j(v2))}},p2="\n    attribute vec4 "+l2.VertexPos+";\n    attribute vec2 "+l2.VertexUV+";\n\n    uniform mat4 "+f2.ModelViewMat+";\n    uniform mat4 "+f2.ProjectionMat+";\n    \n    varying mediump vec2 "+ph.UV+";\n    \n    void main() {\n      gl_Position = "+f2.ProjectionMat+" * "+f2.ModelViewMat+" * "+l2.VertexPos+";\n      "+ph.UV+" = "+l2.VertexUV+";\n    }\n",y2="\n    varying mediump vec2 "+ph.UV+";\n    \n    uniform sampler2D "+f2.Texture+";\n\n    void main() {\n      gl_FragColor = texture2D("+f2.Texture+", "+ph.UV+");\n    }\n",M2=class{iti(){return this.eti}UI(){this.H7t.useProgram(this.eti.iti()),this.wti.ur()}Tti(t){this.wti.vti(t)}Nti(t){this.wti.Mti(t)}constructor(t){this.H7t=t,this.eti=new g2(t,p2,y2),this.wti=new m2(t,this.eti)}},T2=class{F7t(t,i){if(this.Dti(i.Iti)){this.Sti.cti(),this.Eti.UI();const e=this.bti,s=i.Lti,n=(0,J4.default)(s,s,e);t.uniformMatrix4fv(this.kti,!1,n);const r=i.Cti;t.uniformMatrix4fv(this.xti,!1,r),this.Sti.F7t(),this.Sti.fti()}}Dti(t){return"none"===this.Iti||"right"!==t&&"left"===this.Iti||"right"===t&&"right"===this.Iti}get bti(){const t=(0,Zh.default)(),i=this.po;return(0,i2.default)(t,t,i.$8t()),(0,t2.default)(t,t,this.Oti.x,new Float32Array([1,0,0])),(0,t2.default)(t,t,this.Oti.y,new Float32Array([0,1,0])),(0,t2.default)(t,t,this.Oti.z,new Float32Array([0,0,1])),t}constructor(t,i,e,s){this.po=new Yh,this.Oti=new Yh,this.Iti="none",this.Eti=e;const n=e.iti();this.Sti=i.uti(t,n),s&&(this.Iti=s);const r=n.nti(f2.ModelViewMat);if(null===r)throw new g("Failed to get model view matrix location.");this.kti=r;const h=n.nti(f2.ProjectionMat);if(null===h)throw new g("Failed to get projection matrix location.");this.xti=h}},N2=class{jti(){const t=(0,Zh.default)();return(0,$4.default)(t,this.zti,this.Pti,this.Bti,this.Rti)}Uti(){this.Qti=this.jti()}get Cti(){return new Float32Array(this.Qti)}set Cti(t){this.Qti=t}Fti(){const t=(0,Zh.default)(),i=(0,Z4.default)((0,Zh.default)(),this.Yti.$8t()),e=(0,X4.default)((0,Zh.default)(),this.Gti.$8t());return(0,J4.default)(t,i,e),(0,K4.default)(t,t),t}Vti(){this.Wti=this.Fti()}get Lti(){return new Float32Array(this.Wti)}Hti(){this.Vti(),this.Uti()}tr(){this.Yti=new Yh,this.Oti=new xa,this.Hti()}qti(t){const i=this.Gti.a9t();i.ST(t),this.Oti=i.l9t()}Xti(t){this.Oti=t.l9t()}get Zti(){return this.zti}set Zti(t){this.zti=t,this.Uti()}get Kti(){return this.Pti}set Kti(t){this.Pti=t,this.Uti()}get po(){return(new Yh).Udt(this.Yti)}set po(t){this.Yti=t,this.Vti()}get Oti(){return(new xa).Udt(this.Gti)}set Oti(t){this.Gti=t,this.Vti()}constructor(t){this.zti=72*_.PI/180,this.Pti=1.77,this.Bti=.1,this.Rti=100,this.Iti="none",this.Yti=new Yh,this.Gti=new xa,this.Qti=this.jti(),this.Wti=this.Fti(),t&&(this.Iti=t)}},D2=1e-4,I2=class extends Pl{ko(){this.Jti(),this.H7t?id.xr?(id.xr.addEventListener("devicechange",this.$ti),this.tii().then((()=>{this.eii?(this.sii(),this.nii(),this.rii()):this.q9t("XR: Inline session not available. Panorama functionality will not work.",Ui.VR_PRESENTATION_ERROR)}))):this.q9t("Your browser does not support WebXR",Ui.VR_PLATFORM_UNSUPPORTED):this.q9t("Your browser does not support webGL",Ui.VR_PLATFORM_UNSUPPORTED)}rii(){this.Qo.ya.yn(Tc.ra,this.mn),this.Qo.yn(_i.pn,this.mn),this.Qo.yn(l.lo,this.do),this.Qo.yn(l.pw,this.AU)}Jti(){this.hii=h.createElement("canvas"),this.hii.className="theoplayer-vr",this.hii.style.zIndex="2",this.hii.style.background="black",this.hii.style.display="none",this.Qo.we.appendChild(this.hii),yc(this.hii);let t=this.hii.getContext("webgl2");t||(t=this.hii.getContext("webgl")),t&&(this.H7t=t,this.oii=new a2(this,this.hii))}async tii(){id.xr?await Promise.all([id.xr.isSessionSupported("inline").then((t=>{this.eii=t})).catch((t=>{this.eii=!1,this.q9t("exception when calling xr.isSessionSupported for inline session: "+t,Ui.VR_PRESENTATION_ERROR)})),id.xr.isSessionSupported("immersive-vr").then((t=>{this.aii=t})).catch((t=>{this.aii=!1,this.q9t("exception when calling xr.isSessionSupported for immersive-vr session: "+t,Ui.VR_PRESENTATION_ERROR)}))]):(this.eii=!1,this.aii=!1)}sii(){const t=this.n7t();this.lx=t,this.u7t=Boolean(t),this.u7t&&(this.uii=(null==t?void 0:t.stereoMode)||Ca.NONE,this.cii=(null==t?void 0:t.panoramaMode)||lc.NONE,this.dii&&(this.lii(this.cii,this.uii),this.K9t()))}lii(t,i){if(!this.H7t||t===lc.NONE)return;const e=this.H7t;let s,n;this.fii.V7t(),t===lc.PM360?(s=2*_.PI,n=-_.PI/2):(s=_.PI,n=-_.PI);const r=new A2(16,60,40,0,s),h=[],o=[];for(let t=0;t<r.ati.length;t++){const e=r.ati[t];switch(i){case Ca.NONE:h.push(e),o.push(e);break;case Ca.VERTICAL:h.push(new rl(e.x,.5*e.y)),o.push(new rl(e.x,.5*e.y+.5));break;case Ca.HORIZONTAL:h.push(new rl(.5*e.x,e.y)),o.push(new rl(.5*e.x+.5,e.y))}}r.hti.forEach((t=>{t.x*=-1}));const a=new wh(r.hti,r.oti,h),u=new wh(r.hti,r.oti,o);this._ii=new M2(e);const c=new T2(e,a,this._ii,"left");c.Oti.y=n,this.fii.G7t(c);const d=new T2(e,u,this._ii,"right");d.Oti.y=n,this.fii.G7t(d)}K9t(){this.hii.style.display="block",this.eii&&this.Qo.yn(l.jh,this.gii)}s7t(){this.wii(),this.Qo.fn(l.jh,this.gii),this.hii.style.display="none"}Aii(){this.vii(),this.mii()}async pii(){if(this.yii||!this.eii)return;const t={optionalFeatures:["local"]};try{const i=await dt(id.xr.requestSession("inline",t),this.ES.Hd);let e;e=Vt.Qs?Vt.wE?"viewer":"local":"viewer";const s=await i.requestReferenceSpace(e);i.addEventListener("end",this.vii),this.Mii=s,this.yii=i,this.oii.UI(),this.Tii(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,this.H7t),inlineVerticalFieldOfView:this.zti*to})}catch(t){this.vii(),this.q9t(t,Ui.VR_PRESENTATION_ERROR)}}vii(){this.yii&&(this.wii(),this.oii.QI(),this.yii.removeEventListener("end",this.mii),this.yii.end(),this.yii=null,this.nii())}async Nii(){if(!this.Dii&&this.aii){this.wii();try{const t=await dt(id.xr.requestSession("immersive-vr"),this.ES.Hd),i=await t.requestReferenceSpace("local");t.addEventListener("end",this.mii),this.Iii=i,this.Dii=t,await this.Sii(),this.Tii()}catch(t){this.mii(),this.q9t(t,Ui.VR_PRESENTATION_ERROR)}}}async Sii(){const t=this.H7t,i=this.Dii;this.hii&&t&&i&&!this.Eii&&(this.hii.addEventListener("webglcontextlost",(t=>{t.preventDefault()})),this.hii.addEventListener("webglcontextrestored",(()=>{this.lii(this.cii,this.uii)})),this.Eii=!0,await t.makeXRCompatible(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,t)}))}nii(){if(!this.Dii&&this.H7t){const t=this.H7t,e=this.hii.clientWidth,s=this.hii.clientHeight,n=i.Ys.A2;this.hii.width=e*n,this.hii.height=s*n,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}}Tii(){null===this.bii&&(this.Lii(),this.kii?this.bii=this.kii.requestAnimationFrame(this.Cii):(this.xii(),is("XR: Attempted to start animation loop without inline or immersive session.")))}wii(){null!==this.bii&&(this.xii(),this.kii?this.kii.cancelAnimationFrame(this.bii):is("XR: Attempted to stop animation loop by cancelAnimationFrame even though there is no session running."),this.bii=null)}Lii(){if(null!==this.Oii)return;const t=this.Qo.A_();if(void 0===t||!(t instanceof HTMLVideoElement))return void is("No video source.");if("function"!=typeof t.requestVideoFrameCallback)return;const i=()=>{this._ii.Nti(this.Qo),this.Oii=t.requestVideoFrameCallback(i)};this.jii=t,this.Oii=t.requestVideoFrameCallback(i)}xii(){var t,i;null!==this.Oii&&(null==(i=this.jii)||null==(t=i.cancelVideoFrameCallback)||t.call(i,this.Oii),this.jii=null,this.Oii=null)}zii(){return!!this.Pii||(Vt.Ga?this.Bii&&this.Rii:this.Bii)}y7t(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().then((t=>{this.Rii="granted"===t}))}Uii(){return(!this.Ff()||Boolean(this.Qii))&&this.Fii()}Ff(){return this.Qo.Ff}Fii(){return this.Qo.Jf>=2}get u7t(){return this.Yii}set u7t(t){const i=this.rdt;this.Yii=t,this.rdt!==i&&this.Co(new al)}get dii(){return this.cii!==lc.NONE}get cii(){return this.Gii}set cii(t){const i=this.rdt;this.Gii=t,this.rdt!==i&&this.Co(new al)}get aii(){return this.Vii}set aii(t){const i=this.rdt;this.Vii=t,this.rdt!==i&&this.Co(new al)}get Q9t(){return this.aii}get kii(){return this.Dii||this.yii}get Dii(){return this.Pii}set Dii(t){const i=this.rdt;this.Pii=t,this.rdt!==i&&this.Co(new al)}get Wii(){return this.Iii||this.Mii}get R9t(){const t=this.Hii.a9t();return{yaw:t.u9t*dc,pitch:t.c9t*dc,roll:t.d9t*dc}}set R9t(t){const i=S2(t&&t.pitch||0)*to,e=S2(t&&t.roll||0)*to,s=S2(t&&t.yaw||0)*to,n=new $c(s,i,e);this.Hii=n.l9t()}get z7t(){const t=this.qii.a9t();return{yaw:t.u9t,pitch:t.c9t,roll:t.d9t}}set z7t(t){const i=E2(t&&t.pitch||0),e=E2(t&&t.roll||0),s=E2(t&&t.yaw||0),n=new $c(s,i,e);this.qii=n.l9t()}get rdt(){return this.u7t?this.Dii?xi.Oa:xi.F9t:xi.Rs}get P9t(){return null!==this.Dii}set P9t(t){const i=this.P9t;t&&this.aii?this.Nii():this.mii(),this.P9t!==i&&this.Co(new Y4)}get B9t(){return this.Bii}set B9t(t){null===this.Pii&&(this.Bii=t,t&&Vt.Ga&&this.y7t())}get U9t(){return this.zti}set U9t(t){t&&t>=0&&t<=180&&(this.zti=t,null!==this.yii&&this.yii.updateRenderState({inlineVerticalFieldOfView:this.zti*to}))}q9t(t,i){xD(t),this.Co(new Bi(new $i(i,t)))}n7t(){const t=this.Qo.Wa();return t&&t.vr}gn(){this.ES.Xd(),this.Aii(),this.Vo(),this.Qo=void 0,this.H7t=void 0}constructor(t){super(),this.ES=new na,this.eii=!1,this.Vii=!1,this.Hii=new xa,this.Xii=new xa,this.qii=new xa,this.zti=74,this.Bii=!1,this.lx=void 0,this.uii=Ca.NONE,this.Yii=!1,this.Gii=lc.NONE,this.fii=new u2,this.yii=null,this.Pii=null,this.Mii=null,this.Iii=null,this.Eii=!1,this.bii=null,this.jii=null,this.Oii=null,this.Qii=0,this.Rii=!1,this.$ti=()=>{this.tii()},this.do=()=>{this.s7t(),this.Aii(),this.sii()},this.gii=()=>{this.pii()},this.mii=()=>{this.Dii&&(mt("Ending immersive session"),this.wii(),this.Dii.removeEventListener("end",this.mii),this.Dii.end(),this.Dii=null,this.Iii=null,this.Eii=!1,this.yii?this.Tii():this.pii())},this.mn=()=>{this.nii()},this.Cii=(t,i)=>{if(!this.H7t)return;const e=this.H7t,s=this.kii;if(null===this.Oii&&this.Uii()&&(this._ii.Nti(this.Qo),this.Qii>0&&(this.Qii-=1)),null===s||void 0===i)return void is("Attempted to run webXR animation loop without session or xrFrame.");this.bii=s.requestAnimationFrame(this.Cii);const n=s.renderState.baseLayer,r=i.getViewerPose(this.Wii);if(void 0===n||void 0===r)return void is("Attempted to run webXR animation loop without glLayer or viewerPose.");e.bindFramebuffer(e.FRAMEBUFFER,n.framebuffer);let h=new $c,o=0;for(const t of r.views){const i=new N2(t.eye);if(i.Cti=t.projectionMatrix,this.zii()){let e;if(Vt.Qs&&Vt.wE&&null===this.Pii){if(e=t.transform.inverse.orientation,0===e.x&&0===e.y&&0===e.z&&1===e.w)return}else e=t.transform.orientation;i.Oti=new xa(e.x,e.y,e.z,e.w)}this.yii&&i.qti(this.qii.a9t()),h=h.ST(i.Oti.a9t()),o+=1;const s=n.getViewport(t);s&&e.viewport(s.x,s.y,s.width,s.height),this.fii.F7t(e,i)}const a=new $c(h.u9t/o,h.c9t/o,h.d9t);this.Hii=a.l9t(),function(t,i){const e=t.n9t(i);return 1-e*e<D2}(this.Hii,this.Xii)||(this.Xii.Udt(this.Hii),this.Co(new V4))},this.AU=()=>{this.Qii=5},this.Qo=t,this.va=s2(this),this.ko()}};function S2(t){return xd(t+180,360)-180}function E2(t){return xd(t+_.PI,2*_.PI)-_.PI}Zr((function(t){return class extends t{fa(){return null!==this.P7t?xl(super.fa(),{vr:this.P7t.va}):super.fa()}gn(){var t;null==(t=this.P7t)||t.gn(),super.gn()}constructor(t,i){super(t,i),this.P7t=null,i.vr.useWebXR&&(this.P7t=new I2(this))}}}),lt.Za);var b2=class extends Ys{get va(){return this.Xa||(this.Xa=function(t){let i,e={get status(){return t.kI},get tasks(){return t.w2t},get network(){return t.kU.va},createTask:(i,e)=>t.Zii(i,e),addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Vh(t,e),e}(this)),this.Xa}get kI(){return this.Kii.kI}get w2t(){return this.Kii.w2t.va}get kU(){return this.a7}Zii(t,i,e){let s,n;if(void 0===e&&(e="persistent"),!t)throw new g("Unexpected - The source description is undefined");if(s=jh(t),n=n1(i),Xs(s))throw new g("Invalid source description");return this.Kii.d2t(s,n).va}constructor(t,i){super(),this.Kii=t,this.a7=i,this.Kii.yn("Vrt",this.Ds)}};var L2=function(){const t=new Wb(i._O,!1),e=$t.Ib,s=new l1(t),n=new i1(e,s),r=new qb(t),h=new g0(e.tst,n,"persistent");return new b2(h,r)}().va;function k2(t,i){if("function"==typeof t.getAll){return C2(void 0===i?t.getAll():t.getAll(i))}return function(t){let i=new Rs,e=[];return t.onsuccess=()=>{let s=t.result;s&&s.value?(e.push(s.value),s.continue()):i.Wb(e),El()},t.onerror=()=>{i.qb(t.error),El()},i.Zb}(void 0===i?t.openCursor():t.openCursor(i))}function C2(t){return new Promise(((i,e)=>{t.onsuccess=()=>{i(t.result),El()},t.onerror=()=>{e(t.error),El()}}))}var x2=class{Xd(){if(this.ro)try{this.Xet.abort(),this.ro=!1}catch(t){}}constructor(t){this.Xet=t,this.ro=!0,this.Zb=new Promise(((t,i)=>{this.Xet.oncomplete=()=>{this.ro=!1,t(),El()},this.Xet.onerror=()=>{this.ro&&(this.ro=!1,i(this.Xet.error||new g("Transaction error")),El())},this.Xet.onabort=()=>{this.ro=!1,i(new g("Transaction aborted")),El()}}))}};async function O2(t,i,e){const s=new x2(t);try{const[t]=await Promise.all([i(e),s.Zb]);return t}catch(t){if(!s.ro)throw new m0("IDBTransaction committed prematurely",t);throw t}finally{s.Xd()}}var j2=class{get l(){return this.pit.l}Pet(t){return Promise.resolve("persistent"===t)}Bet(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(H(i));return C2(this.Jii(ko.nst).put(t))}async Ret(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(H(i));for(const e of t)await this.Bet(e,i)}async Qb(t){return Boolean(await this.Fb(t))}Fb(t){return C2(this.Jii(ko.sst).get(t))}Uet(t,i){return C2(this.Jii(ko.sst).index(i).get(t))}async Let(t){const i=[];for(let e of t){const t=await this.Fb(e);t&&i.push(t)}return i}Qet(){return k2(this.Jii(ko.sst))}Fet(t){return k2(this.Jii(ko.sst),t)}Yet(t,i){return k2(this.Jii(ko.sst).index(i),t)}ET(t){return C2(this.Jii(ko.nst).delete(t))}async Get(t){for(const i of t)await this.ET(i)}Vet(){return C2(this.Jii(ko.nst).clear())}Jii(t){if(!this.$ii)throw new g("Lock was released");if(!function(t,i){return t===ko.sst&&i===ko.sst||i===ko.nst}(t,this.$ii.mode))throw new g("Incompatible transaction mode: "+this.$ii.mode+", expected "+t);return this.$ii.objectStore(this.l)}tei(){this.pit.iei(this),this.$ii=void 0}constructor(t,i){this.pit=t,this.$ii=i}};var z2=class{Pet(t){return Promise.resolve("persistent"===t)}Bet(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(H(i)):this.Xet(ko.nst,(i=>i.Bet(t)))}Ret(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(H(i)):this.Xet(ko.nst,(i=>i.Ret(t)))}Qb(t){return this.Xet(ko.sst,(i=>i.Qb(t)))}Fb(t){return this.Xet(ko.sst,(i=>i.Fb(t)))}Uet(t,i){return this.Xet(ko.sst,(e=>e.Uet(t,i)))}Let(t){return this.Xet(ko.sst,(i=>i.Let(t)))}Qet(){return this.Xet(ko.sst,(t=>t.Qet()))}Fet(t){return this.Xet(ko.sst,(i=>i.Fet(t)))}Yet(t,i){return this.Xet(ko.sst,(e=>e.Yet(t,i)))}ET(t){return this.Xet(ko.nst,(i=>i.ET(t)))}Get(t){return this.Xet(ko.nst,(i=>i.Get(t)))}Vet(){return this.Xet(ko.nst,(t=>t.Vet()))}uDt(t){return this.eei(),this.ZNt=new j2(this,t),this.ZNt}eei(){if(void 0!==this.ZNt)throw new g("Already locked")}iei(t){if(this.ZNt!==t)throw new g("Incorrect lock");this.ZNt=void 0}Mx(t){return this.Mq.Mx(t)}Xet(t,i){return this.Mx((()=>this.sei(t,i)))}async sei(t,i){this.eei();const e=this.nei.transaction(this.l,t),s=this.uDt(e);try{return await O2(e,i,s)}finally{s.tei()}}rei(t){this.eei();const i=this.nei.transaction(this.l,t);return this.uDt(i)}static hei(t,i){let e;const s=new Promise((t=>{e=t})),n=t.reduce(((t,i)=>t.then((()=>{let t;const e=new Promise((i=>{t=i}));return i.Mx((()=>(t(),s))).catch(El),e}))),Promise.resolve());return e(n.then(i)),s}constructor(t,i){this.ZNt=void 0,this.Mq=new jn,this.nei=t,this.l=i}},P2={dp:17,oei:async t=>{const{transaction:i,database:e}=t,s=i.objectStoreNames;if(s&&s.length)for(let t=0;t<s.length;t++)e.deleteObjectStore(s[t]);e.createObjectStore(F2,{keyPath:"id"}),e.createObjectStore(Y2,{keyPath:"key"}),e.createObjectStore(G2,{keyPath:"key"});e.createObjectStore(V2,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");e.createObjectStore(W2,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},B2=class{async aei(t){for(const i of this.uei)this.cei<i.dp&&await i.oei(t)}constructor(t){this.cei=t}},R2=class extends B2{get uei(){return[P2]}},U2=new class{dei(t){this.lei=t}h9(t){return this.lei(t)}constructor(){this.lei=t=>new R2(t)}},Q2=18,F2="cachingTask",Y2="licences",G2="manifest",V2="segment",W2="segmentMetadata";async function H2(){!function(){if("undefined"==typeof indexedDB)throw new g("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",Q2);return t.addEventListener("upgradeneeded",q2),await C2(t)}async function q2(t){const i=t.oldVersion<=Q2?t.oldVersion:-1,e=t.target,s=e.result,n=e.transaction,r=U2.h9(i),h={database:s,transaction:n};await O2(n,(t=>r.aei(t)),h)}var X2=class{static get Ib(){return this.gst||(this.gst=H2()),this.gst}};X2.gst=void 0;var Z2=class{Xet(t){return t(this)}tei(){this.Jet.tei(),this.Ket.tei(),this.$et.tei(),this.tst.tei(),this.ist.tei()}constructor(t,i){this.Jet=t.Jet.uDt(i),this.Ket=t.Ket.uDt(i),this.$et=t.$et.uDt(i),this.tst=t.tst.uDt(i),this.ist=t.ist.uDt(i)}};$t.wa(class t{static async h9(){const i=await X2.Ib;return new t(i)}Xet(t){const i=this.allCollections;return z2.hei(i,(()=>this.sei(i,t)))}async sei(t,i){const e=t.map((t=>t.l)),s=this.nei.transaction(e,ko.nst),n=new Z2(this,s);try{return await O2(s,i,n)}finally{n.tei()}}get allCollections(){return[this.Ket,this.Jet,this.$et,this.tst,this.ist]}constructor(t){this.nei=t,this.Jet=new z2(t,W2),this.Ket=new z2(t,V2),this.$et=new z2(t,G2),this.tst=new z2(t,F2),this.ist=new z2(t,Y2)}}.h9);var K2=class{fei(t){const i=this.pW.gf(),e=t.createGain();for(const s of i){t.createMediaElementSource(s).connect(e)}return e}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){const t=this;return{createAudioSourceNode:i=>t.fei(i)}}constructor(t){this.Xa=void 0,this.pW=t}};Zr((function(t){return class extends t{fa(){const t=this._ei.va;return xl(super.fa(),{get audio(){return t}})}constructor(t,i){super(t,i),this._ei=new K2(this.e7)}}}),lt.Za);Zr((function(t){return class i extends t{ga(t){const e=i.gei(this.wd.analytics),s=i.gei(t?t.analytics:void 0);e||s?this.wei(Tt({},e,s)):this.Aei&&this.Aei.disable(),super.ga(t)}wei(t){if(this.Aei)this.Aei.enable(),this.Aei.setOptions(t);else{const i=s.youbora;if(!i)throw new g("Youbora JavaScript library not loaded.");if(!i.adapters.TheoPlayer2)throw new g("TheoPlayer2 adapter not available on Youbora JavasScript library");const e=new i.Plugin(t);e.setAdapter(new i.adapters.TheoPlayer2(this.va)),this.Oc&&i.adapters.TheoPlayer2.NativeAdsAdapter&&e.setAdsAdapter(new i.adapters.TheoPlayer2.NativeAdsAdapter(this.va)),this.Aei=e}}static gei(t){if(t){const i=t.filter((t=>"youbora"===t.integration));if(0===i.length)return;if(i.length>1)throw new g("Only one youbora analytics configuration expected");const e=i[0],{integration:s}=e;return Hf(e,["integration"])}}gn(){this.Aei&&this.Aei.disable(),super.gn()}constructor(t,i){super(t,i)}}}),lt.L7);var J2=1,$2=0,t3=1e3,i3=class t extends Bl{vei(){const t=this.ct===1/0,i=t?J2:$2,e=t?-1:this.ct,s=ge(this.Qo.rt.og,this.mei);this.pei.setPresentationInformation(new this.yei(i,e,s))}mei(t){const i=t.Ng.og,e=[];for(let t=0;t<i.length;t++){const s=i[t];s.ji&&s.Ti&&e.push({trackIdx:t,bitrate:s.wz,width:s.ji,height:s.Ti,codecIdentifier:s.wst})}return e}Mei(){return this.Qo.Tf()*t3}get ct(){return this.Qo.Td()*t3}get Tei(){return this.Nei}get Dei(){return this.Iei}set Dei(t){this.Iei=t,t&&this.pei.reportPlayerState(t)}set Sei(t){this.Eei=t}bei(){return v((()=>{this.Lei(),this.kei()}),t.Cei)}xei(){this.Qo.Oc&&(this.Qo.Oc.yn("K7",this.Oei),this.Qo.Oc.yn("J7",this.jei),this.Qo.Oc.yn("Mqt",this.zei),this.Qo.Oc.yn("nXt",this.Pei)),this.Qo.yn(l.Jg,this.Bei),this.Qo.yn(hh.ha,this.L4),this.Qo.yn(l.Sh,this.Rei),this.Qo.yn(l.jh,this.gii),this.Qo.yn(er.Rw,this.gU),this.Qo.yn(l.mw,this.NY),this.Qo.yn(l.pw,this.AU),this.Qo.yn(er.Bw,this.fU),this.Qo.yn(l.Tw,this.Uei)}Qei(){this.Qo.Oc&&(this.Qo.Oc.fn("K7",this.Oei),this.Qo.Oc.fn("J7",this.jei),this.Qo.Oc.fn("Mqt",this.zei),this.Qo.Oc.fn("nXt",this.Pei)),this.Qo.fn(l.Jg,this.Bei),this.Qo.fn(hh.ha,this.L4),this.Qo.fn(l.Sh,this.Rei),this.Qo.fn(l.jh,this.gii),this.Qo.fn(er.Rw,this.gU),this.Qo.fn(l.mw,this.NY),this.Qo.fn(l.pw,this.AU),this.Qo.fn(er.Bw,this.fU),this.Qo.fn(l.Tw,this.Uei)}gn(){m(this.Fei),this.Qei()}constructor(t,i,e,s=MMPlayerState,n=MMAdState,r=MMPresentationInfo){super(),this.Qo=t,this.lx=i,this.pei=e,this.Yei=s,this.Gei=n,this.yei=r,this.Vei=!0,this.Nei=!1,this.Eei=void 0,this.Iei=void 0,this.Wei=void 0,this.Oei=t=>{const i=t.H7;i.AVt();var e;e=i.B7().duration;const s="linear"===i.B7().type;i.vVt(),i._Vt();s&&(this.Nei=!0),this.Sei=this.Gei.AD_IMPRESSION,this.Sei=this.Gei.AD_STARTED},this.jei=t=>{this.Nei=!1,this.Sei=this.Gei.AD_COMPLETED},this.zei=t=>{t.pFt===Jo.ADBLOCK?this.Sei=this.Gei.AD_BLOCKED:this.Sei=this.Gei.AD_ERROR},this.Pei=()=>{this.Sei=this.Gei.AD_SKIPPED},this.Uei=t=>{var i,e,s,n;t.wS===pg.pm&&(this.Wei&&t.sQ!==this.Wei&&this.pei.reportABRSwitch(this.Wei,t.sQ),this.Wei=t.sQ,this.pei.reportChunkRequest(new MMChunkInformation(t.Qp,t.sQ,t.yM,t.yot.zu,void 0,void 0,null!=(s=null==(i=t.yot.jht)?void 0:i[0])?s:0,null!=(n=null==(e=t.yot.jht)?void 0:e[1])?n:-1)))},this.Bei=t=>{this.Dei=this.Yei.STOPPED,this.Co(t)},this.L4=t=>{this.Dei=this.Yei.ERROR,this.pei.reportError(t.error,this.Mei())},this.Rei=()=>{this.Tei?this.Sei=this.Gei.AD_PAUSED:this.Dei=this.Yei.PAUSED},this.gii=()=>{this.Tei&&(this.Sei=this.Gei.AD_PLAY)},this.gU=()=>{this.Tei?(this.Eei===this.Gei.AD_PAUSED&&(this.Sei=this.Gei.AD_RESUMED),this.Sei=this.Gei.AD_PLAYING):(this.Vei&&(this.Vei=!1,this.vei(),this.Dei=this.Yei.STARTED),this.Dei!==this.Yei.PAUSED&&this.Dei!==this.Yei.BUFFERING||(this.Dei=this.Yei.RESUMED))},this.NY=()=>{this.pei.reportPresentationSize(this.Qo.a_,this.Qo.r_)},this.AU=t=>{this.Tei||this.Dei!==this.Yei.PAUSED||this.pei.reportPlayerSeekCompleted(t.currentTime*t3)},this.fU=()=>{this.Tei||(this.Dei=this.Yei.BUFFERING)},this.kei=()=>{this.pei.reportDownloadRate(_.floor(Vo.Ib.ez()))},this.Lei=()=>{this.Tei||this.pei.reportPlaybackPosition(this.Mei())},this.Dei=this.Yei.INITIALIZED,this.xei(),this.Fei=this.bei()}};i3.Cei=2e3,Zr((function(t){return class extends t{gn(){super.gn(),this.Hei()}constructor(t,i){super(t,i),this.qei=void 0,this.Xei=void 0,this.Zei=()=>{this.Xei=void 0,this.Hei();const t=super.Wa();t&&(this.Xei=function(t,i){const e=function(t,i){if(t&&t.analytics)for(const i of t.analytics)if("smartsight"===i.integration)return i;if(i&&i.analytics)for(const t of i.analytics)if("smartsight"===t.integration)return t;return}(t,i);if(!e)return;return e}(t,this.wd)),this.Kei()},this.Kei=()=>{if(!this.qei&&this.Xei&&this.bt&&this.bt.src&&!this.Ff){const t=MMSmartStreaming.getInstance();!function(t,i,e){t.registerMMSmartStreaming(e.playerName,e.customerID,e.subscriberID,e.domainName),t.reportComponent("THEOSDK"),t.reportPlayerInfo("THEOplayer","THEOplayer","8.0.0"),t.reportDeviceInfo(void 0,void 0,void 0,void 0,void 0,s.innerWidth,s.innerHeight),t.initializeSession("QBRModeDisabled",i,e.metaURL,e.assetID)}(t,this.bt.src,this.Xei),this.qei=new i3(this,this.Xei,t),this.qei.yn("ended",this.Hei)}},this.Hei=()=>{this.qei&&(this.qei.gn(),this.qei=void 0)},this.yn(l.lo,this.Zei),this.yn(l.Hg,this.Kei),this.yn(l.jh,this.Kei)}}}),lt.L7);var e3=String.fromCharCode(95);var s3=class t{get va(){return this.Xa||(this.Xa=function(t){return{get adsManager(){return t.adsManager},get ids(){return t.ids},get adContainer(){return t.adContainer},get imaSDK(){return t.imaSDK},get sendEvent(){return t.sendEvent},set sendEvent(i){t.sendEvent=i}}}(this)),this.Xa}get id(){return this.CT}get adsManager(){return this.U5t}get ids(){return this.Jei}get adContainer(){return this.xWt}get sendEvent(){return this.$ei}set sendEvent(t){for(let t of this.tsi)this.U5t.removeEventListener(t.type,t.listener);this.tsi=[],this.$ei=t,this.isi()}get imaSDK(){return!0}esi(){for(let t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.U5t.addEventListener(i,this.ssi),this.tsi.push({type:i,listener:this.ssi})}}nsi(){No(this.tsi);for(let t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.U5t.removeEventListener(i,this.ssi)}}rsi(t){this.HB.push({type:t.type,adVolume:this.adsManager.getVolume()})}isi(){null==this.$ei||this.$ei.call(this,this.HB),this.HB=[]}static hsi(i){return t.osi[i]||i}constructor(i,e,s,n){this.ssi=i=>{this.rsi({type:t.hsi(i.type)})},this.CT=i,this.U5t=e,this.Jei=s,this.xWt=n,this.tsi=[],this.HB=[]}};s3.osi={loaded:"AdLoaded",impression:"AdImpression",start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",skip:"AdSkipped",volumeChange:"AdVolumeChange"};var n3=class{asi(t,i){this.usi=h.createElement("script"),this.usi.id=t.id,this.usi.type="text/javascript",t.adContainer.appendChild(this.usi),this.usi.src="https://z.moatads.com/"+i+"/moatvideo.js#"+t.id,this.dsi=t.id,s[this.dsi]=t.va}lsi(){this.usi&&sh(this.usi),this.dsi&&(s[this.dsi]=void 0)}constructor(){this.usi=void 0,this.dsi=void 0}};Zr((function(t){return class i extends t{ga(t){var e,s,n;this.fsi(),null==(e=this._si)||e.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.gsi),null==(s=this._si)||s.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.fsi),null==(n=this._si)||n.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.wsi),this._si=void 0,this.xWt=void 0,super.ga(t);const r=t&&t.analytics;this.Asi=i.vsi(r);this.Oc&&this.Asi&&F$()&&this.msi()}gn(){var t,i,e;this.fsi(),null==(t=this._si)||t.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.gsi),null==(i=this._si)||i.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.fsi),null==(e=this._si)||e.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.wsi),this._si=void 0,this.xWt=void 0,this.Oc&&this.Oc.fn("o1t",this.a1t),super.gn()}msi(){this.Oc&&this.Oc.yn("o1t",this.a1t)}psi(t,i,e){const s=e3+"moatApi"+_.floor(1e8*_.random());this.ysi=new s3(s,t,i,e),this.ysi.esi(),this.Msi.asi(this.ysi,this.Asi.partnerCode)}static vsi(t){if(t){const i=t.filter((t=>"moat"===t.integration));if(0===i.length)return;if(i.length>1)throw new g("Only one Moat analytics configuration expected");return i[0]}}constructor(t,i){super(t,i),this.Asi=void 0,this.ysi=void 0,this._si=void 0,this.xWt=void 0,this.wsi=()=>{this.psi(this._si,{partnerCode:this.Asi.partnerCode,viewMode:google.ima.ViewMode.NORMAL},this.xWt)},this.a1t=t=>{this._si=t.R5t,this.xWt=t.V1t,this.fsi(),this._si.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.gsi),this._si.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.fsi),this._si.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.wsi)},this.gsi=t=>{const i=t.getAd().getAdPodInfo();i.getAdPosition()<i.getTotalAds()&&(this.fsi(),this.wsi())},this.fsi=()=>{this.ysi&&(this.ysi.nsi(),this.ysi=void 0),this.Msi.lsi()},this.Msi=new n3}}}),lt.L7);var A,r3=class extends wn{constructor(t,i,e){super(t,new Date),this.Tsi=i,this.H7=e}};!function(t){t.LOADED="DAILoaded",t.AD_BREAK_STARTED="DAIAdBreakStarted",t.AD_BREAK_ENDED="DAIAdBreakEnded",t.AD_PERIOD_STARTED="DAIAdPeriodStarted",t.AD_PERIOD_ENDED="DAIAdPeriodEnded",t.AD_PROGRESS="DAIAdProgress",t.CUEPOINTS_CHANGED="DAICuePointsChanged",t.CLICK="DAIClick",t.ERROR="DAIError",t.STARTED="DAIStarted",t.FIRST_QUARTILE="DAIFirstQuartile",t.MIDPOINT="DAIMidpoint",t.STREAM_INITIALIZED="DAIStreamInitialized",t.THIRD_QUARTILE="DAIThirdQuartile",t.COMPLETE="DAIComplete"}(A||(A={}));var h3=class extends r3{constructor(t,i){super("DAILoaded",t,i)}},o3=class extends r3{constructor(t,i){super("DAIAdBreakStarted",t,i)}},a3=class extends r3{constructor(t,i){super("DAIAdBreakEnded",t,i)}},u3=class extends r3{constructor(t,i){super("DAIAdProgress",t,i)}},c3=class extends r3{constructor(t,i){super("DAICuePointsChanged",t,i)}},d3=class extends r3{constructor(t,i){super("DAIClick",t,i)}},l3=class extends r3{constructor(t,i){super("DAIError",t,i)}},f3=class extends r3{constructor(t,i){super("DAIStarted",t,i)}},_3=class extends r3{constructor(t,i){super("DAIFirstQuartile",t,i)}},g3=class extends r3{constructor(t,i){super("DAIMidpoint",t,i)}},w3=class extends r3{constructor(t,i){super("DAIStreamInitialized",t,i)}},A3=class extends r3{constructor(t,i){super("DAIThirdQuartile",t,i)}},v3=class extends r3{constructor(t,i){super("DAIComplete",t,i)}};var m3=class extends Pl{replaceAdTagParameters(t){return this.Nsi.replaceAdTagParameters(null!=t?t:null)}Dsi(t){return this.Nsi.contentTimeForStreamTime(t)}Isi(t){return this.Nsi.streamTimeForContentTime(t)}HCt(t,i){const e=function(t){let i;"vod"===t.availabilityType?(i=new s.google.ima.dai.api.VODStreamRequest,i.contentSourceId=t.contentSourceID,i.videoId=t.videoID):"live"===t.availabilityType&&(i=new s.google.ima.dai.api.LiveStreamRequest,i.assetKey=t.assetKey);const e=google.ima.dai.api.StreamRequest.StreamFormat;var n;return i.format="dash"===t.format?e.DASH:e.HLS,i.apiKey=t.apiKey,i.adTagParameters=t.adTagParameters,i.omidAccessModeRules=null!=(n=D$(t.omidAccessModeRules))?n:{},i}(t);this.Nsi.requestStream(e)}tr(){this.Ssi(!1),this.Nsi.reset()}gn(){this.Vo();const t=google.ima.dai.api.StreamEvent.Type;this.Nsi.removeEventListener(t.AD_BREAK_STARTED,this.Esi),this.Nsi.removeEventListener(t.AD_PROGRESS,this.bsi),this.Nsi.removeEventListener(t.CLICK,this.rWt),this.Nsi.removeEventListener(t.COMPLETE,this.Lsi),this.Nsi.removeEventListener(t.CUEPOINTS_CHANGED,this.ksi),this.Nsi.removeEventListener(t.ERROR,this.Ss),this.Nsi.removeEventListener(t.FIRST_QUARTILE,this.Csi),this.Nsi.removeEventListener(t.LOADED,this.xsi),this.Nsi.removeEventListener(t.MIDPOINT,this.Osi),this.Nsi.removeEventListener(t.STARTED,this.jsi),this.Nsi.removeEventListener(t.STREAM_INITIALIZED,this.zsi),this.Nsi.removeEventListener(t.THIRD_QUARTILE,this.Psi),this.Nsi.removeEventListener(t.AD_BREAK_ENDED,this.Bsi),this.tr(),this.Rsi&&sh(this.Rsi)}Usi(t){this.Nsi.onTimedMetadata(t)}Qsi(t,i,e){this.Nsi.processMetadata(t,i,e)}Fsi(t){const i=this.Nsi.previousCuePointForStreamTime(t);if(i)return{VT:i.end,GT:i.start,Hf:i.played}}Ysi(t){const i=this.Fsi(t),e=i&&!i.Hf?i.GT:void 0;return Promise.resolve(e)}Ssi(t){this.jWt.style.display=t?"block":"none"}constructor(t,i,e){super(),this.Nsi=t,this.jWt=i,this.Rsi=e,this.Esi=t=>{this.Ssi(!0);const i=bt(t),e=ot(t);this.Co(new o3(i,e))},this.Bsi=t=>{this.Ssi(!1);const i=bt(t),e=ot(t);this.Co(new a3(i,e))},this.bsi=t=>{const i=bt(t),e=ot(t);this.Co(new u3(i,e))},this.rWt=t=>{const i=bt(t),e=ot(t);this.Co(new d3(i,e))},this.Lsi=t=>{const i=bt(t),e=ot(t);this.Co(new v3(i,e))},this.ksi=t=>{const i=bt(t),e=ot(t);this.Co(new c3(i,e))},this.Ss=t=>{const i=bt(t),e=ot(t);this.Co(new l3(i,e))},this.Csi=t=>{const i=bt(t),e=ot(t);this.Co(new _3(i,e))},this.xsi=t=>{const i=bt(t),e=ot(t);this.Co(new h3(i,e))},this.Osi=t=>{const i=bt(t),e=ot(t);this.Co(new g3(i,e))},this.jsi=t=>{const i=bt(t),e=ot(t);this.Co(new f3(i,e))},this.zsi=t=>{const i=bt(t),e=ot(t);this.Co(new w3(i,e))},this.Psi=t=>{const i=bt(t),e=ot(t);this.Co(new A3(i,e))},this.jWt.style.display="none",this.Nsi.setClickElement(this.jWt);const s=google.ima.dai.api.StreamEvent.Type;this.Nsi.addEventListener(s.AD_BREAK_STARTED,this.Esi),this.Nsi.addEventListener(s.AD_PROGRESS,this.bsi),this.Nsi.addEventListener(s.CLICK,this.rWt),this.Nsi.addEventListener(s.COMPLETE,this.Lsi),this.Nsi.addEventListener(s.CUEPOINTS_CHANGED,this.ksi),this.Nsi.addEventListener(s.ERROR,this.Ss),this.Nsi.addEventListener(s.FIRST_QUARTILE,this.Csi),this.Nsi.addEventListener(s.LOADED,this.xsi),this.Nsi.addEventListener(s.MIDPOINT,this.Osi),this.Nsi.addEventListener(s.STARTED,this.jsi),this.Nsi.addEventListener(s.STREAM_INITIALIZED,this.zsi),this.Nsi.addEventListener(s.THIRD_QUARTILE,this.Psi),this.Nsi.addEventListener(s.AD_BREAK_ENDED,this.Bsi)}};function bt(t){const i=t.getStreamData(),e=i.adProgressData;let s;e&&(s={mKt:e.adBreakDuration,Gsi:e.duration,pKt:e.adPosition,Mf:e.currentTime,ct:e.duration,yKt:e.totalAds});return{Vsi:s,Wsi:(i.cuepoints||[]).map((t=>({GT:t.start,VT:t.end,Hf:t.played}))),Hsi:i.errorMessage||void 0,qsi:i.manifestFormat||void 0,Xsi:i.streamId||void 0,Zsi:(i.subtitles||[]).map((t=>({Ksi:t.webvtt,Jsi:t.ttml,gs:t.language}))),zu:i.url}}function p3(t){return{VUt:t.getAdSlotId(),Kqt:t.getContent(),qz:t.getContentType(),Ti:t.getHeight(),ji:t.getWidth()}}function ot(t){const i=t.getAd();if(!i)return;const e=i.getAdPodInfo(),s=i.getCompanionAds().map(p3);return{vQt:i.getAdId(),v$t:{pKt:e.getAdPosition(),KGt:e.getMaxDuration(),L5t:e.getPodIndex(),ibt:e.getTimeOffset(),yKt:e.getTotalAds()},$Rt:i.getAdSystem(),C5t:i.getAdvertiserName(),YUt:i.getApiFramework(),aUt:s,NUt:i.getCreativeId(),o0t:i.getCreativeAdId(),x5t:i.getDealId(),$p:i.getDescription(),ct:i.getDuration(),Jz:i.getTitle(),$si:i.getUniversalAdIdRegistry(),tni:i.getUniversalAdIdValue(),t0t:i.getVastMediaHeight(),$$t:i.getVastMediaWidth(),X$t:i.getWrapperAdIds(),Z$t:i.getWrapperAdSystems(),K$t:i.getWrapperCreativeIds()}}function y3(){const t=h.body.lastElementChild;if(t instanceof HTMLIFrameElement&&"Advertisement"===t.title)return t}var M3="theo-dai-clickthrough",T3="urn:google:dai:2018",N3=class{get va(){const t=this,i=this.ini;return{contentTimeForStreamTime:i=>t.Nsi?t.Nsi.Dsi(i):i,streamTimeForContentTime:i=>t.Nsi?t.Nsi.Isi(i):i,replaceAdTagParameters(i){t.Nsi&&t.Nsi.replaceAdTagParameters(i)},get snapback(){return t.eni},set snapback(i){t.eni=i},get sourceTransformer(){return i.sni},set sourceTransformer(t){i.sni=t}}}Nf(t){this.V2.Xd(),this.V2=new na,D(this.nni(t,this.V2.Hd))}async nni(t,i){if(Bo(i),!this.rni||!this.Nsi)return this.Qo.hni(t);if(this.rni.R7)return;if(t>this.Qo.Tf()&&this.eni){const e=await dt(this.Nsi.Ysi(t),i);if(e){this.Qo.hni(e),await this.Nsi.df(A.AD_BREAK_ENDED,i);if(this.Nsi.Fsi(t).VT>t)return}}this.Qo.hni(t)}i_(){const t=this.rni&&this.rni.R7;if(t){const i=Ai.xn(this.Qo.oni()),e=t.ibt,s=e+t.KGt,n=new Ai([e,s]);return i.Sn(n).ks()}return this.Qo.oni()}async _tt(t,i){if(!t)return this.Qo.ani(t,i);try{this.Qo.nt.yn(Mi.L_,this.uni);const e=await this.ini.cni(t,i);this.rni&&this.Nsi&&(this.dni=!0),await this.Qo.ani(e,i)}catch(t){if(Ao(t),t.code===Aw.LICENSE_INVALID)return;const i=new $i(Ui.SOURCE_NOT_SUPPORTED,"Something went wrong while setting up a Google DAI stream.",t);throw this.Bz=De(i),this.Rz=i,this.Qo.Co(new Bi(i)),i}}tr(){if(this.dni){if(this.Qo.nt.fn(Mi.L_,this.uni),this.lni){this.lni.fn(Ce.O_,this.fni);for(const t of this.lni.L.og)t.fn(ku.QT,this._ni);this.lni=void 0}this.Bz=void 0,this.Rz=void 0,this.V2.Xd(),this.rni&&this.rni.tr(),this.Nsi&&this.Nsi.tr(),this.dni=!1}}get lt(){return this.Bz||this.Qo.gni()}get bf(){return this.Rz||this.Qo.wni()}gn(){this.tr(),this.Qo.Ani(),this.Nsi&&this.Nsi.gn()}constructor(t,i,e,s){this.lni=void 0,this.Bz=void 0,this.Rz=void 0,this.V2=new na,this.dni=!1,this.eni=!0,this.uni=t=>{const i=t.Lt;i.zt===jo.Nm&&(i.Rg===Kc.ID3||i.Rg===Kc.EVENT_STREAM&&i.Og===T3)&&(i.jg=Ha.zg,this.lni=i,i.yn(Ce.O_,this.fni))},this.fni=t=>{t.YT.yn(ku.QT,this._ni)},this._ni=t=>{var i,e;if(this.Nsi)if((null==(i=this.lni)?void 0:i.Rg)===Kc.ID3){const i=t.YT.O;"TXXX"===i.id&&this.Nsi.Usi({TXXX:i.text})}else if((null==(e=this.lni)?void 0:e.Rg)===Kc.EVENT_STREAM){const i=t.YT.O;this.Nsi.Qsi(T3,i,t.uD)}},this.Qo=t,this.Nsi=i,this.rni=e,this.ini=s,e&&i&&this.Qo.Oc&&this.Qo.Oc.ett(e.f0t)}},D3=class extends ct{get vni(){return this.mni}get _Yt(){return zu.so}constructor(t,i,e,s=!0){super(e),this.mni=s,this.Cqt=t,this.xqt=i}},I3=class extends Nc{pni(){const t=[A.STARTED,A.FIRST_QUARTILE,A.MIDPOINT,A.THIRD_QUARTILE,A.COMPLETE];this.Nsi.yn(t,this.yni),this.Nsi.yn(A.AD_BREAK_ENDED,this.Bsi),this.Nsi.yn(A.AD_PROGRESS,this.bsi),this.Nsi.yn(A.CUEPOINTS_CHANGED,this.ksi)}get Iqt(){return this.g0t}get wqt(){return this.jXt}Mni(t){let i=t.v$t.ibt,e=this.DVt||this.findAdBreakWithPredicate(i,(t=>!t.Hf));if(!e){const s=t.v$t.KGt;i=this.Qo.Tf(),e=new D3(s,s,i,!1),e.jqt(),this.IVt.push(e)}return e}Tni(t){switch(t){case A.STARTED:this.g0t=!0;break;case A.AD_BREAK_ENDED:this.g0t=!1}}Nni(t,i,e){if(i)switch(t){case A.STARTED:case A.FIRST_QUARTILE:case A.MIDPOINT:case A.THIRD_QUARTILE:case A.COMPLETE:this.wqt.Co(new sc(this.DVt))}if(e)switch(t){case A.STARTED:case A.FIRST_QUARTILE:case A.MIDPOINT:case A.THIRD_QUARTILE:case A.COMPLETE:this.wqt.Co(new ta(this.gVt,this.gVt.V$t))}switch(t){case A.COMPLETE:this.wqt.Co(new nn(this.gVt,this.l0t.V$t));break;case A.AD_BREAK_ENDED:this.wqt.Co(new Ss(this.R7))}switch(t){case A.FIRST_QUARTILE:this.wqt.Co(new n$(this.gVt,this.l0t.V$t));break;case A.MIDPOINT:this.wqt.Co(new h$(this.gVt,this.l0t.V$t));break;case A.THIRD_QUARTILE:this.wqt.Co(new a$(this.gVt,this.l0t.V$t))}}Dni(t){const i=t.H7,e=this.Mni(i),s=function(t,i){if(t.Oc.length)return!1;for(let e=0;e<i;e++){const i=new E$(t,be.bFt);t.Pqt(i)}return!0}(e,i.v$t.yKt),n=function(t,i){const e=i.v$t.pKt-1;return t.Oc[e]}(e,i),r=function(t,i){return t.Vqt!==ch.READY&&(t.J$t(i),!0)}(n,i);this.gVt=n,this.DVt=e,e.jqt(),this.Nni(t.type,s,r)}Ini(t){for(const i of this.IVt)if(Cd(t,i.ibt))return i}findAdBreakWithPredicate(t,i){for(const e of this.IVt)if(Cd(e.ibt,t)&&i(e))return e}get Sni(){const t=this.findAdBreakWithPredicate(0,(t=>t.vni));let i=0;return t&&(i=t.KGt),i}Eni(t,i){let e;for(const s of this.IVt)s.ibt>=t&&s.ibt<=i&&!s.Hf&&(!e||s.ibt>=e.ibt)&&(e=s);return e}Hm(){}itt(t){}tr(){this.gVt&&(this.wqt.Co(new nn(this.gVt,this.gVt.V$t)),this.gVt=void 0),this.DVt&&(this.wqt.Co(new Ss(this.DVt)),this.DVt=void 0),this.g0t=!1,No(this.IVt)}gn(){this.tr(),this.wqt.gn()}constructor(t,i){super(new Rh,zu.so),this.Nsi=t,this.Qo=i,this.bsi=t=>{const i=this.DVt;if(!i||!this.gVt)return;const e=t.Tsi.Vsi;this.gVt.V$t=e.Mf,function(t,i){const e=i.pKt,s=i.mKt,n=i.Mf,r=co(t.Oc.slice(0,e-1),(t=>{var i;return null!=(i=t.ct)?i:0}));t.JGt=s-n-r}(i,e)},this.ksi=t=>{const i=t.Tsi.Wsi;if(i)for(const t of i)if(!this.Ini(t.GT)){const i=t.VT-t.GT,e=new D3(i,i,t.GT,!0);this.IVt.push(e)}},this.yni=t=>{this.Tni(t.type),this.Dni(t)},this.Bsi=t=>{this.g0t=!1,this.gVt=void 0;const i=this.R7;i&&(i.JGt=0,this.Nni(t.type,!1,!1),this.DVt=void 0)},this.pni()}};function S3(t){if(t.sources)if(Gt(t.sources)){for(const i of t.sources)if(Ia(i))return!0}else if(Ut(t.sources))return Ia(t.sources);return!1}var E3=class{async cni(t,i){const e=[],s=[];for(const i of t.sources)if(Ia(i)){if(!this.Nsi)continue;e.push(i)}else s.push(i);if(0===e.length)return t;let n,r;for(;void 0===n&&0!==e.length;){const{yc:h}=await MN.Ib.QP(e,t),o=h;Bo(i);try{n=await this.bni(o,i),s.push(n)}catch(t){Ao(t),r=t,To(e,o)}}if(0!==t.sources.length&&0===s.length)throw new g("Fatal: unable to play DAI streams.");return r&&is(r.message),Tt({},t,{sources:s})}async bni(t,i){if(!this.Nsi)throw new g("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=this.Nsi.df(A.LOADED,i),s=this.Nsi.df(A.ERROR,i),n=t.type===Z.kA?"dash":"hls";this.Nsi.HCt(Tt({},t.ssai,{format:n}));const r=await Promise.race([e,s]);if(r.type===A.LOADED){const i=t.type===Z.kA?Z.kA:Z.xA;return Og(Tt({},t,{src:this.sni?await this.sni(r.Tsi.zu||""):r.Tsi.zu,type:i}))}throw g(r.Tsi.Hsi)}constructor(t){this.Nsi=t,this.sni=t=>t}};Zr(function(t){return i=>class extends i{fa(){const t=super.fa(),i=t.ads;if(i){const t=this.Lni.va;xl(i,{get dai(){return t}})}return t}get Ul(){return this.kni}hni(t){super.Nf(t)}Nf(t){this.Lni.Nf(t)}oni(){return super.i_()}i_(){return this.Lni.i_()}ga(t){return this.Lni.tr(),super.ga(t)}async ani(t,i){return super._tt(t,i)}async _tt(t,i){return this.Lni._tt(t,i)}gni(){return super.Ef()}wni(){return super.Lf()}Ef(){return this.Lni.lt}Lf(){return this.Lni.bf}Ani(){super.gn()}gn(){this.Lni.gn(),this.jWt&&(sh(this.jWt),this.jWt.removeEventListener("keydown",this.Cni),this.jWt.removeEventListener("click",this.Cni),this.jWt=void 0)}constructor(i,e){super(i,e),this.kni=!1,this.Cni=t=>{13===t.which&&this.jWt.click(),this.m_()};const s=this.A_();let n,r;try{this.jWt=h.createElement("button"),this.jWt.className=M3,n=t(s,this.jWt),r=new I3(n,this),this.we.appendChild(this.jWt),this.kni=!0}catch(t){this.jWt=void 0}const o=new E3(n);this.Lni=new N3(this,n,r,o),this.jWt&&(this.jWt.addEventListener("keydown",this.Cni),this.jWt.addEventListener("click",this.Cni))}}}((function(t,i){if(!(s.google&&s.google.ima&&Ut(s.google.ima.dai)))throw new g("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=y3(),n=new google.ima.dai.api.StreamManager(t),r=y3();return new m3(n,i,r&&r!==e?r:void 0)})),lt.S7);var b3=class{get xni(){return void 0===this.Oni?0:(performance.now()-this.Oni)/1e3}jni(t){this.zni=t,this.Bni.Pni(t),this.Qo.yn(l.jh,this.gii),this.Qo.yn(l.Jg,this.Bei),this.Qo.yn(l.Sw,this.Rni),this.Qo.yn(hh.ha,this.L4),this.Qo.yn(er.Bw,this.Uni),this.Qo.yn([er.Ow,er.jw,er.Rw],this.Qni),this.Qo.yn(l.Xg,this.Fni),ys.nY(this.Yni)}Gni(){this.Qo.fn(l.jh,this.gii),this.Qo.fn(l.Jg,this.Bei),this.Qo.fn(l.Sw,this.Rni),this.Qo.fn(hh.ha,this.L4),this.Qo.fn(er.Bw,this.Uni),this.Qo.fn([er.Ow,er.jw,er.Rw],this.Qni),this.Qo.fn(l.Xg,this.Fni),ys.tY(this.Yni),this.Vni||(this.Bni.Wni(this.Hni),this.Bni.qni()),this.Xni&&this.Zni(),this.zni=void 0,this.Kni=!1,this.Vni=!1,this.Hni=-1/0,No(this.Jni)}$ni(){this.Kni&&this.Bni.tri(),this.Oni=performance.now(),this.iri=v(this.eri,6e4)}Zni(){this.Bni.sri(this.xni),this.Xni=!1,this.Oni=void 0,this.iri&&(m(this.iri),this.iri=void 0)}nri(){if(S(this.Qo.Td()))return;const t=10*function(t,i){return _.floor(t/i)}(this.Qo.Tf()/this.Qo.Td()*100,10);qt(this.Jni,t)||(this.Jni.push(t),this.Bni.rri(t))}constructor(t,i){this.Qo=t,this.Bni=i,this.Kni=!1,this.Vni=!1,this.Jni=[],this.Hni=-1/0,this.Xni=!1,this.gii=()=>{this.Kni||(this.Bni.hri(),this.Xni&&this.Bni.tri(),this.Kni=!0)},this.Bei=()=>{this.Bni.ari(),this.Vni=!0},this.Rni=()=>{this.Hni<this.Qo.Tf()&&(this.Hni=this.Qo.Tf()),this.nri()},this.Uni=()=>{this.Kni&&(this.cri=performance.now(),this.Bni.dri(this.Qo.Tf()))},this.Qni=()=>{this.cri&&(this.Bni.lri((performance.now()-this.cri)/1e3),this.cri=void 0)},this.L4=()=>{this.Hni<this.Qo.Tf()&&(this.Hni=this.Qo.Tf()),this.Bni.ret(this.Qo.Ef().message)},this.Fni=()=>{const t=this.Qo.Td()===1/0;t&&!this.Xni&&(this.Xni=t,this.$ni())},this.Yni=()=>{this.Bni.Wni(this.Hni),this.Bni.fri()},this.eri=()=>{void 0!==this.Oni&&this.Bni._ri(this.xni)}}},L3=class{Pni(t){this.gri(["setDocumentTitle",t.itemTitle]),this.gri(["setCustomUrl","https://content.streamone.net/embed/cust=Xo9oT45EptMG/account="+t.accountID+"/item="+t.itemID]),this.gri(["trackPageView"])}hri(){this.wri("item first play","viewing","1")}qni(){this.wri("item skipped","skipped","1")}rri(t){this.wri("item progress","percent",""+t)}fri(){this.wri("item abandoned","window closed","1")}Wni(t){this.wri("item time","watched",""+t)}ari(){this.wri("item finished","ended","1")}dri(t){this.wri("buffering started","timestamp",""+t)}lri(t){this.wri("buffering ended","duration",""+t)}ret(t){this.wri("error","message",""+t)}tri(){this.wri("livestream first play","viewing","1")}_ri(t){this.wri("livestream progress","duration",""+t)}sri(t){this.wri("livestream time","watched",""+t)}wri(t,i,e){this.gri(["trackEvent","Video",t,i,e])}gri(t){const i="undefined"!=typeof _paq?_paq:void 0;i?i.push(t):console.warn("The Piwik library required for the StreamOne pre-integration was not found. Make sure it is loaded before instantiating THEOplayer.")}},k3=class{get Ari(){if(!this.vri)return;const t=this.Qo.Tf()/this.vri;return _.floor(4*t)+1}get pri(){return void 0!==this.vri}jni(){this.Ic.yn("K7",this.Oei),this.Ic.yn("J7",this.jei),this.Ic.yn("nXt",this.Pei),this.Ic.yn("Mqt",this.zei),this.Qo.yn(l.Sw,this.Rni),ys.nY(this.Yni)}Gni(){this.Ic.fn("K7",this.Oei),this.Ic.fn("J7",this.jei),this.Ic.fn("nXt",this.Pei),this.Ic.fn("Mqt",this.zei),this.Qo.fn(l.Sw,this.Rni),No(this.yri),ys.tY(this.Yni),this.vri=void 0}constructor(t,i,e){this.Qo=t,this.Ic=i,this.Bni=e,this.yri=[],this.Oei=()=>{this.vri=this.Qo.Td(),this.Bni.Mri(this.vri)},this.jei=()=>{this.vri&&(this.Bni.Tri(this.vri),No(this.yri),this.vri=void 0)},this.Pei=t=>{if(!this.vri)return;const i=this.vri-this.vri*t.eXt;this.Bni.Nri(i),this.vri=void 0},this.zei=()=>{this.vri=this.Qo.Td(),this.Bni.Dri()},this.Rni=()=>{const t=this.Ari;if(this.pri&&t&&!qt(this.yri,t)){switch(t){case 1:this.Bni.Iri();break;case 2:this.Bni.Sri();break;case 3:this.Bni.Eri();break;case 4:this.Bni.bri()}this.yri.push(t)}},this.Yni=()=>{this.Bni.Lri()}}},C3=class{Mri(t){this.Bni.wri("ad start","duration",""+t)}Tri(t){this.Bni.wri("ad finished","duration",""+t)}Nri(t){this.Bni.wri("ad skipped","remaining time",""+t)}Dri(){this.Bni.wri("ad blocker","detected","1")}Iri(){this.Bni.wri("ad progress","firstQuartile","")}Sri(){this.Bni.wri("ad progress","secondQuartile","")}Eri(){this.Bni.wri("ad progress","thirdQuartile","")}bri(){this.Bni.wri("ad progress","fourthQuartile","")}Lri(){this.Bni.wri("ad abandoned","window closed","1")}constructor(t){this.Bni=t}};function x3(t){return t&&"streamone"===t.integration}Zr((function(t){return class extends t{gn(){this.fn(l.lo,this.do),this.kri&&(this.Cri&&this.Cri.Gni(),this.xri&&this.xri.Gni(),this.kri=!1),super.gn()}constructor(t,i){super(t,i),this.kri=!1,this.do=()=>{this.kri&&(this.Cri.Gni(),this.xri&&this.xri.Gni());const t=this.Wa();if(this.kri=!1,!t)return;const i=function(t){if(t.analytics)for(let i of t.analytics)if(x3(i))return i}(t);i&&(this.kri=!0,this.Cri.jni(i),this.xri&&this.xri.jni())};const e=new L3;if(this.Cri=new b3(this,e),this.Oc){const t=new C3(e);this.xri=new k3(this,this.Oc,t)}this.yn(l.lo,this.do)}}}),lt.L7);var O3=class extends jt{async AJ(t,i,e){const s=await j3(t);await super.AJ(s,i,e),this.Ori(s,i)}async _J(t,i,e){const s=await j3(t);await super._J(s,i,e),this.Ori(s,i)}Ori(t,i){const e=this.zri.jri;if(void 0===e)return;const s=i.GK;let n;if(this.Pri!==s&&(this.Pri=s,e.setLevelSwitching(s),e.setContainerFormat(2)),function(t){return xs.call(t,"n9")}(i)){const t=i.n9,r=i.n9+i.ct;n=i.UD,e.newPts(t,r,"video",s)}else 0;e.appendBuffer(t.zm,"video",s,n)}async ET(t,i,e){var s;await super.ET(t,i,e),null==(s=this.zri.jri)||s.flushBuffer(t,i)}constructor(t,i){super(t),this.zri=i,this.Pri=void 0}};async function j3(t){switch(t.Rg){case ji.aq:return t;case ji.VI:{const i=await oi(t.zm);return{Rg:ji.aq,zm:new j(i)}}case ji.uq:throw new g("Opaque initialization segments are not supported on web.")}}var z3=class extends Ti{Fst(t){return t.e$===pg.pm?new O3(t,this.zri):new jt(t)}constructor(t,i){super(t),this.zri=i,this.Ust(t)}},P3=class extends En{get jri(){return this.Bri}Rri(){this.Bri=new LcevcDil.LcevcDil(this.sA.Uz,this.Uri,{})}ge(){super.ge(),this.Qri()}be(){super.be(),this.Uri.style.display="none"}tr(){return this.Uri.style.display="none",void 0!==this.Bri&&(this.Bri.close(),this.Rri()),super.tr()}Qd(){return this.Fri=!0,void 0!==this.Bri&&(this.Bri.close(),this.Bri=void 0),this.pu.removeChild(this.Uri),super.Qd()}IP(t){this.Co(new oC(new Hu(Aw.ABORTED,t)))}Qri(){this.sA.Uz.style.display="none",this.Uri.style.display="block"}get Nst(){return this.sA}zst(t){return new z3(t,this)}jst(t){return new Bt(t)}constructor(t,i){super(t),this.Fri=!1,this.Yri=t=>{this.Fri||(t||this.IP("LCEVC SDK failed to initialize."),this.Rri())},this.Gri=()=>{this.Fri||this.IP("LCEVC SDK failed to initialize.")},this.pu=i,this.Uri=h.createElement("canvas"),this.Uri.style.width="100%",this.Uri.style.height="100%",this.Uri.style.position="absolute",this.Uri.style.top="50%",this.Uri.style.left="50%",this.Uri.style.transform="translate(-50%, -50%)",this.Uri.style.display="none",this.pu.appendChild(this.Uri),LcevcDil.ready.then(this.Yri,this.Gri)}},Uc=class extends W{SP(t){if(t===pg.pm)return this.Vri=new P3(super.SP(t),this.pu),this.Vri}async cP(t){this.Vri=void 0;const i=t;await i.Qd(),await super.cP(i.Nst)}get Wri(){return this.Vri}constructor(t,i){super(t),this.pu=i}},B3=class extends HV{async gn(){for(const t of this._T.og)t.fn(Ce.J_,this.Hri);this.rt.fn(Mi.L_,this.qri),this.rt.fn(Mi.C_,this.Xri),await super.gn(),await this.sA.Qd(),await this.dP.cP(this.sA)}constructor(t,i,e,s,n,r,h,o){const a=new Uc(r,o),u=new uc(a);super(t,i,e,s,n,u.SP(h),o),this.qri=t=>{t.Lt.yn(Ce.J_,this.Hri)},this.Xri=t=>{t.Lt.fn(Ce.J_,this.Hri)},this.Hri=t=>{var i;const e=null==(i=this.Zri.Wri)?void 0:i.jri,s=t.Grt.Mg;null==e||e.setCurrentLevel(s)},this.dP=u,this.Zri=a,this._T.yn(Mi.L_,this.qri),this._T.yn(Mi.C_,this.Xri)}};yN(new class extends vR{JA(t,i,e,s,n,r,h){const o=new z($t.Ib.$et,$t.Ib.Jet,$t.Ib.Ket,$t.Ib.ist);let a=i;return Lo.qC()&&(a=new Lo(a)),new B3(e,s,n,r,o,a,pg.pm,t)}async EP(t){if(!t.lcevc)return!1;if(!await super.EP(t))return!1;if(void 0===s.LcevcDil)throw new $i(Ui.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}bP(){return!1}constructor(...t){super(...t),this.LP=Mt.sz}});var $u,R3=class extends cZ{async gn(){for(const t of this._T.og)t.fn(Ce.J_,this.Hri);this.rt.fn(Mi.L_,this.qri),this.rt.fn(Mi.C_,this.Xri),await super.gn(),await this.dP.cP(this.sA)}constructor(t,i,e,s,n,r,h,o,a){const u=new Uc(i,t),c=new uc(u);super(c.SP(pg.pm),e,s,n,r,h,o,a),this.qri=t=>{t.Lt.yn(Ce.J_,this.Hri)},this.Xri=t=>{t.Lt.fn(Ce.J_,this.Hri)},this.Hri=t=>{var i;const e=null==(i=this.Zri.Wri)?void 0:i.jri,s=t.Grt.bIt.Mg;null==e||e.setCurrentLevel(s)},this.dP=c,this.Zri=u,this._T.yn(Mi.L_,this.qri),this._T.yn(Mi.C_,this.Xri)}};yN(new class extends lZ{JA(t,i,e,s,n,r,h){return new R3(t,i,e,n,r,FX(s.libraryLocation),new uZ(s.libraryLocation),new z($t.Ib.$et,$t.Ib.Jet,$t.Ib.Ket,$t.Ib.ist),s)}async EP(t,i){if(!t.lcevc)return!1;if(!await super.EP(t,i))return!1;if(void 0===s.LcevcDil)throw new $i(Ui.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}bP(){return!1}constructor(...t){super(...t),this.LP=Mt.cz}}),function(t){t.Kri="tr",t.Jri="$ri"}($u||($u={}));var U3="freewheel-nonlinear-ad",Q3=[l.Xg,l.Sw,l.Ew,l.Sh,er.Rw,l.jh],F3=class t extends ou{v_(){this.dP.jB()}thi(){this.ihi.yn("Z7",this.ehi),this.ihi.yn(["K7","J7"],this.shi),this.ihi.yn("X7",this.s5t)}nhi(){this.ihi.fn("Z7",this.ehi),this.ihi.fn(["K7","J7"],this.shi),this.ihi.fn("X7",this.s5t)}rhi(){this.wqt.Qa(this.ihi.hhi)}ohi(){this.ihi.ahi.yn(Q3,this.Ds)}uhi(){this.ihi.ahi.fn(Q3,this.Ds)}get _qt(){return this}static get lqt(){return zu.yVt}get lqt(){return t.lqt}get R7(){var t;return null!=(t=this.ihi.hhi.R7)?t:null}get P7(){const t=this.ihi.hhi.l0t;return t?[t]:[]}itt(t){}Tf(){return this.ihi.ahi.Mf}Nf(t){}Td(){return this.ihi.ahi.ct}Sf(){return this.ihi.ahi.If}Ef(){return this.Bz}Lf(){return this.Rz}h_(){return 0}u_(){return 0}d_(){return this.ihi.ahi.c_}l_(t){this.ihi.ahi.c_=t}Bf(){return this.ihi.ahi.Pf}Rf(t){this.ihi.ahi.Pf=t}$f(){return this.ihi.ahi.Jf}get U7(){return this.ihi.hhi.U7}get Q7(){return this.ihi.hhi.Q7}i_(){return this.ihi.ahi.t_}Yf(){return this.ihi.ahi.Ff}mqt(t){if(this.Iqt||this.ihi.mqt(t),this.ihi.dhi){if(t.type===l.Sh&&this.Qo.If)return!0;if(t.type===l.Jg)return this.ihi.fhi.lhi(),!0}return!1}be(){this.ihi.be()}m_(){this.Ff||this.ihi.ahi.m_()}async _hi(){if(!this.ihi.ghi)try{await this.ihi.uKt()}catch(t){this.whi(t,Jo.GENERAL)}}async Ahi(){if(this.ihi.ahi.vhi)return this.ihi.ahi.p_(),!1;if(this.ihi.mhi)try{await this.ihi.fhi.phi()}catch(t){this.whi(t,Jo.PLAYBACK)}return!0}get yhi(){return Yt(this.Ef())}whi(t,i){t.name!==$u.Kri&&this.wqt.Co(new Go(i,"Ads could not be loaded."))}async p_(){if(this.Ff&&this.Co(new Ps(this.Mf)),await this._hi(),this.yhi)return;const t=await this.Ahi();!this.yhi&&t&&this.s5t()}E0t(t,i,e){i===Ur.G7&&this.ihi.E0t(t)}ge(){this.ihi.ge()}Hm(){this.ihi.ahi.Hm()}A_(){return this.c9}gf(){return this.dP.UB.map((t=>t.Uz))}Eqt(t){}async gn(){await this.y_(),this.ihi.gn(),await this.dP.cP(this.sA),this.nhi(),this.uhi(),this.wqt.ZB(this.ihi.hhi)}async y_(){this.ihi.tr(),this.Iqt&&(this.Qo.ge(),this.RHt(),this.be())}constructor(t,i,e,s,n){super(t,i),this.Bz=void 0,this.Rz=void 0,this.shi=t=>{const i=t.H7,e="K7"===t.type;if(i.Wqt===be.LFt){const t=this.Qo.we.classList;e?t.add(U3):t.remove(U3)}e?this.ge():this.be()},this.ehi=()=>{this.zXt(),this.Qo.m_(),this.Qo.be()},this.s5t=()=>{this.ihi.ghi&&(this.Qo.If||this.Qo.p_(),this.be(),this.Qo.ge(),this.RHt())},this.ihi=s,this.dP=e,this.sA=n,this.c9=n.Uz,this.c9.controls=!1,this.thi(),this.rhi(),this.ohi()}};var Y3=class extends ct{get Mhi(){return this.Thi}get Nhi(){return this.Oc[this.Dhi]}set Ihi(t){this.Dhi=t}get Ihi(){return this.Dhi}get Wqt(){return this.Hqt}get _Yt(){return zu.yVt}constructor(t,i,e,s){super(e),this.Thi=s,this.Dhi=0,this.Hqt=V3(s),this.Cqt=t,this.xqt=i}},G3=class extends HJ{get Shi(){return this.Ehi}set Shi(t){this.Ehi!==t&&(this.Ehi=t)}get Ti(){return this.Xl.Mhi.getHeight()}get ji(){return this.Xl.Mhi.getWidth()}get tQt(){return this.Shi.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]}get _Yt(){return zu.yVt}fa(){return qJ(this)}constructor(t,i,e){super(t,i),this.Ehi=e}};function V3(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY?be.LFt:be.bFt}var W3=class t extends Ys{async bhi(t,i){this.Lhi=t,this.khi=i,this.Chi(t),await i,this.xhi()}get Ohi(){return this.jhi}get zhi(){return this.Phi}get Bhi(){return this.Rhi}get R7(){return this.DVt}get l0t(){return this.gVt}get U7(){const t=[];if(this.DVt){const i=this.DVt.Ihi;i>=0&&t.push(...this.DVt.Oc.slice(i+1))}for(const i of this.Uhi)t.push(...i.Oc);return t}get Q7(){return this.Uhi}xhi(){this.Qhi()}Chi(t){t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Fhi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Yhi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Ghi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.Vhi),t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.Whi)}Hhi(){this.Lhi&&(this.Lhi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Fhi),this.Lhi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Yhi),this.Lhi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Ghi),this.Lhi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.Vhi),this.Lhi.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.Whi))}Qhi(){this.jhi=this.qhi(this.Xhi),this.Phi=this.qhi(this.Zhi).concat(this.qhi(this.Khi)),this.Rhi=this.qhi(this.Jhi),this.Uhi=this.jhi.concat(this.Phi).concat(this.Rhi)}qhi(t){if(!this.Lhi)return[];const i=this.Lhi.getSlotsByTimePositionClass(t);return this.$hi(i)}toi(t){if(!this.DVt)return void 0;const i=t.getSlot().getAdInstances().indexOf(t);-1!==i&&(this.DVt.Ihi=i);const e=this.DVt.Nhi;return e&&(e.Shi=t),e}ioi(t){return Zt(this.Uhi,(i=>i.Mhi===t))}$hi(i){return i.map((i=>{const e=i.getTotalDuration(),s=t.eoi(i);return new Y3(e,e,s,i)}))}static soi(t,i){const e=t.getAdInstances(),s=[];for(const t of e){const e=V3(t.getSlot()),n=new G3(i,e,t),r=[];n.Yqt(t.getAdId(),t.getSlot().getWidth(),t.getSlot().getHeight(),t.getDuration(),r,0),i.Pqt(n),s.push(n)}return s}RWt(){const t=this.l0t;t&&this.Co(new $J(t,this.noi()))}roi(){const t=this.l0t;t&&(this.Co(new nn(t,t.Shi.getPlayheadTime())),this.gVt=void 0)}hoi(t){const i=this.R7;i&&(i.JGt=function(t,i,e){void 0===e&&(e=0);let s=0;const n=t.Oc.length;for(let r=i;r<n;r++){const n=t.Oc[r],h=n.ct;if(n){let t=h;r===i&&(t=os(h-e,0,h)),s+=t}}return s}(i,i.Ihi,t))}static eoi(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL?-1:t.getTimePosition()}noi(){const t=this.l0t;if(!t)return 0;const i=t.Shi;return i.getPlayheadTime()/i.getDuration()}ooi(t){To(this.Uhi,t),To(this.jhi,t),To(this.Phi,t),To(this.Rhi,t)}tr(){this.Hhi(),this.jhi.length=0,this.Phi.length=0,this.Rhi.length=0,this.Uhi.length=0,this.gVt=void 0,this.DVt=void 0,this.Lhi=void 0,this.khi=void 0}gn(){this.tr(),this.Vo()}constructor(i,e){super(),this.Us=i,this.Ox=e,this.Xhi=tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,this.Zhi=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,this.Jhi=tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL,this.Khi=tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY,this.jhi=[],this.Phi=[],this.Rhi=[],this.Uhi=[],this.Fhi=i=>{const e=i.slot,s=this.ioi(e);s&&(t.soi(e,s),this.DVt=s,s.jqt(),this.ooi(s),s.Wqt===be.bFt&&this.Co(new sc(s)))},this.Yhi=()=>{const t=this.R7;t&&t.Wqt===be.bFt&&(this.Co(new Ss(t)),this.Ox.src=""),this.DVt=void 0},this.Ghi=t=>{const i=this.toi(t.adInstance);i&&(this.Co(new ta(i,i.Shi.getPlayheadTime())),this.gVt=i),t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&(this.Us.style.cursor="pointer",this.Us.addEventListener("click",this.aoi))},this.Vhi=()=>{this.Us.style.cursor="",this.Us.removeEventListener("click",this.aoi)},this.aoi=()=>{this.l0t&&this.l0t.Shi.getRendererController().processEvent({name:tv.freewheel.SDK.EVENT_AD_CLICK})},this.Whi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.roi();break;case tv.freewheel.SDK.EVENT_AD_SKIPPED:this.RWt(),this.roi()}}}},H3=class t extends Ys{uoi(){if(this.pgt){this.pgt.setAdVolume(q3(this.Pf,this.c_))}}coi(t){this.pgt=t,this.Chi(t)}Chi(t){t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.doi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.loi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.foi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this._oi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.goi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.woi)}Aoi(){const t=this.pgt;t&&(t.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.doi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.loi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.foi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this._oi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.goi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.woi))}p_(){this.lvt.R7&&(this.lvt.R7.Mhi.resume(),this.Ff=!1)}m_(){this.lvt.R7&&(this.lvt.R7.Mhi.pause(),this.Ff=!0)}get Mf(){const t=this.lvt.l0t;return t&&(this.Mf=t.Shi.getPlayheadTime()),this.EB}set Mf(t){this.EB=t}get ct(){return this.VL}get vhi(){return!!this.lvt&&void 0!==this.lvt.R7}get Ff(){return this.kB}set Ff(t){this.kB=t}get c_(){return this.ck}set c_(t){this.pgt&&this.pgt.setAdVolume(t),this.ck=t}get Pf(){return this.pgt&&(this.voi=0===this.pgt.getAdVolume()),this.voi}set Pf(t){this.pgt&&this.pgt.setAdVolume(q3(t,this.c_)),this.voi=t}get t_(){return this.s0}get If(){return this.y0}set If(t){this.y0=t}get Jf(){return this.M0}static moi(t){switch(t){case"pause":return tv.freewheel.SDK.VIDEO_STATE_PAUSED;case"playing":return tv.freewheel.SDK.VIDEO_STATE_PLAYING;case"ended":return tv.freewheel.SDK.VIDEO_STATE_COMPLETED;case"stop":return tv.freewheel.SDK.VIDEO_STATE_STOPPED}}poi(i){const e=t.moi(i);this.pgt&&e&&this.pgt.setVideoState(e)}Hm(){const t=this.lvt.l0t;t&&t.Shi.skip()}tr(){if(this.Aoi(),this.pgt){this.poi("stop"),this.pgt.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);const t=this.pgt.getTemporalSlots();for(const i of t)i.stop();this.pgt.dispose(),this.pgt=void 0}this.VL=NaN,this.If=!1,this.M0=ae.aT,this.Mf=0,this.yoi=0,this.Ff=!0,void 0!==this.Moi&&(m(this.Moi),this.Moi=void 0)}gn(){this.tr(),this.Vo(),this.lvt.fn("Z7",this.Md),this.Wu.fn(_i.pn,this.loi),this.xWt.removeEventListener("click",this.Toi)}constructor(t,i,e,s){super(),this.Qo=t,this.Wu=i,this.lvt=e,this.xWt=s,this.s0=Ai.SB().ks(),this.kB=!0,this.VL=NaN,this.voi=!1,this.y0=!1,this.M0=ae.aT,this.EB=0,this.yoi=0,this.doi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_PAUSE:(function(t){if(!t)return!0;const i=t.Shi,e=i.getPlayheadTime(),s=i.getDuration();return e>=s||Cd(s,e)})(this.lvt.l0t)||(this.Ff=!0,this.Co(new ye(this.Mf)));break;case tv.freewheel.SDK.EVENT_AD_RESUME:this.Ff=!1,this.Co(new tn(this.Mf));break;case tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE:if(this.pgt){const t=this.pgt.getAdVolume();0===t?this.voi=!0:this.ck=t,this.Co(new lo(this.Mf,this.c_))}}},this.foi=()=>{this.If=!1;const t=this.Ff;if(this.Ff=!1,t&&(this.Co(new Ps(this.Mf)),this.Co(new tn(this.Mf))),this.M0=ae.cT,this.Mf=0,!this.lvt.l0t)return;const i=this.lvt.l0t.Shi;this.VL=i.getDuration(),this.Co(new ht(this.VL)),this.Moi=v((()=>{if(!this.vhi)return void this.j$();this.lvt.hoi(this.Mf);const t=i.getPlayheadTime();Ua(t,this.yoi,.001)||this.Co(new nc(t,void 0)),this.yoi=t}),250),this.pgt&&this.pgt.setAdVolume(q3(this.Pf,this.c_))},this.Toi=()=>{const t=this.lvt.l0t;t&&(t.Wqt===be.LFt?this.Qo.m_():this.Ff||this.m_())},this.j$=()=>{m(this.Moi),this.Moi=void 0},this._oi=()=>{this.j$(),this.If=!0},this.goi=()=>{this.poi("pause")},this.woi=()=>{this.poi("playing")},this.Md=t=>{t.Xl.Wqt===be.bFt&&(this.Ff=!1)},this.loi=()=>{this.pgt&&this.pgt.resize(this.Wu.ku,this.Wu._u)},this.ck=t.c_,e.yn("Z7",this.Md),this.Wu.yn(_i.pn,this.loi),this.xWt.addEventListener("click",this.Toi)}};function q3(t,i){return t?0:i}var Sc=class extends fh{get name(){return $u.Jri}constructor(){super("A FreeWheel Ad Error occurred")}},X3=class extends fh{get name(){return $u.Kri}constructor(){super("A FreeWheel Reset Error Occurred")}},Z3=0;var K3=class{Noi(t,i,e){t.setNetwork(i.networkId),t.setServer(i.adServerUrl);const s=this.pgt;if(s.setProfile(i.profile),i.assetId&&i.assetDuration&&s.setVideoAsset(i.assetId,i.assetDuration),i.siteSectionId&&s.setSiteSection(i.siteSectionId),s.registerVideoDisplayBase(e),i.cuePoints&&i.cuePoints.length)for(const t of i.cuePoints)s.addTemporalSlot("cue-"+ ++Z3,t.adUnit,t.timeOffset);const n=i.customData;if(Ut(n)){const t=w.keys(n);for(const i of t){const t=n[i];s.addKeyValue(i,t)}}}async Doi(){this.pgt.submitRequest(),await this.Ioi.Zb}tr(){this.pgt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Soi),this.Ioi.qb(new X3)}constructor(t,i,e,s){this.pgt=i,this.Soi=t=>{this.pgt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Soi),t.success?this.Ioi.Wb(void 0):this.Ioi.qb(new Sc)},this.Noi(t,e,s),i.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Soi),this.Ioi=new Rs}},J3=class{Eoi(){this.Lhi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Yhi),this.Lhi.removeEventListener(tv.freewheel.SDK.EVENT_ERROR,this.Yhi)}get boi(){return this.qd.Zb}lxt(){this.Eoi(),this.qd.qb(new X3)}constructor(t){this.Lhi=t,this.Yhi=t=>{this.Eoi(),this.qd.Wb(void 0)},this.r$t=t=>{this.Eoi(),this.qd.qb(new Sc)},this.qd=new Rs,t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Yhi),t.addEventListener(tv.freewheel.SDK.EVENT_ERROR,this.r$t)}},$3=class{TT(t){this.Lhi=t}phi(){return this.Loi(this.koi.Ohi)}lhi(){this.Loi(this.koi.Bhi)}async Loi(t){if(this.Lhi)for(;t.length>0;){this.Coi=new J3(this.Lhi);const i=this.Coi.boi,e=this.koi.R7;e&&e.Wqt===be.LFt&&e.Mhi.stop();t.shift().Mhi.play();try{await i}finally{this.Coi=void 0}}}tr(){this.Coi&&(this.Coi.lxt(),this.Coi=void 0),this.xoi=0}gn(){this.Qo.fn(l.Sw,this.Ooi)}constructor(t,i){this.Qo=t,this.koi=i,this.xoi=0,this.Ooi=()=>{const t=this.Qo.Tf();for(const i of this.koi.zhi){const e=new Ai([this.xoi,t],[!0,!0]),s=i.Mhi.getTimePosition();if(e.gr(s))switch(i.Mhi.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.Loi([i]);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:i.Mhi.play(),i.Mhi.setVisible(!0)}}this.xoi=t},t.yn(l.Sw,this.Ooi)}},t5=0,i5=class t extends Rh{static createUniqueDisplayBaseId(){return"theo-freewheel-"+ ++t5}get dhi(){return 0!==this.hhi.Bhi.length}get mhi(){return 0!==this.hhi.Ohi.length}async uKt(){if(!this.gYt)throw new g("Invalid state");const t=this.joi,i=t.newContext();i.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),i.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);const e=new K3(t,i,this.gYt,this.zoi),s=this.hhi.bhi(i,e.Doi());this.Poi.TT(i),this.ahi.coi(i),this.Boi=e;try{await s}finally{this.ahi.uoi(),this.Roi=!0}}get ahi(){return this.$Jt}get hhi(){return this.Uoi}get ghi(){return this.Roi}static Qoi(t,i,e){const s=h.createElement("div");return s.id=e,s.className="theo-freewheel",i.classList.add("theo-freewheel-video"),s.appendChild(i),t.appendChild(s),s}get fhi(){return this.Poi}mqt(t){this.ahi.poi(t.type)}ge(){this.xWt.style.display="block",this.Ox.style.display="block"}be(){this.xWt.style.display="none",this.Ox.style.display="none"}E0t(t){this.gYt=t}tr(){this.Roi=!1,this.gYt=void 0,this.hhi.tr(),this.Poi.tr(),this.Boi&&(this.Boi.tr(),this.Boi=void 0),this.ahi.tr(),this.Ox.src=""}gn(){this.tr(),this.$Jt.gn(),this.Poi.gn(),this.hhi.gn(),this.xWt.remove(),this.Qo.we.removeChild(this.xWt)}constructor(i,e,n){super(),this.Qo=i,this.Ox=e,this.Roi=!1,this.zoi=t.createUniqueDisplayBaseId(),this.xWt=t.Qoi(i.we,e,this.zoi),this.joi=new s.tv.freewheel.SDK.AdManager,this.Uoi=new W3(this.xWt,this.Ox),this.Poi=new $3(this.Qo,this.hhi),this.Qa(this.hhi),this.$Jt=new H3(i,n,this.hhi,this.xWt)}};function e5(t){if(s.tv)switch(t){case"preroll":return tv.freewheel.SDK.ADUNIT_PREROLL;case"midroll":return tv.freewheel.SDK.ADUNIT_MIDROLL;case"postroll":return tv.freewheel.SDK.ADUNIT_POSTROLL;case"overlay":return tv.freewheel.SDK.ADUNIT_OVERLAY}}function s5(t,i,e){if(void 0!==i&&S(i)||i<0||i===1/0)return NaN;switch(t){case"preroll":return 0;case"postroll":return e}return oh(i)}Ds.Ib.lR(new class{get aqt(){return zu.yVt}dR(t){return t.integration===ya.FREEWHEEL}uqt(t,i,e){if(!Boolean(s.tv&&s.tv.freewheel&&s.tv.freewheel.SDK&&s.tv.freewheel.SDK.AdManager))return;const n=new rm(t.Iu,t.Ol,1,[pg.pm]);n.FB(t.we);const r=n.SP(pg.pm),h=new i5(t,r.Uz,t.Iu);return new F3(t,i,n,h,r)}LQ(t){const e=ms(t);Gt(e.cuePoints)||(e.cuePoints=[]);const s=[],n=t.assetDuration||0;for(const t of e.cuePoints){const e=s5(t.adUnit,t.timeOffset,n),r=e5(t.adUnit);!S(e)&&Qs(r)?(t.adUnit=r,t.timeOffset=e,s.push(t)):i.SA("Invalid adUnit/timeOffset combination. Cue was removed.")}return e.cuePoints=s,e}n4(t,i,e,s){e.E0t(t,i,s)}});var n5,r5=self.theoplayerDeviceMetadata;function xe(t){return t.navigator&&t.navigator.userAgent||""}!function(t){t.Foi="Windows 10",t.Yoi="Windows 8.1",t.Goi="Windows 8",t.Voi="Windows 7",t.Woi="Windows Vista",t.Hoi="Windows Server 2003",t.qoi="Windows XP",t.Xoi="Windows Phone",t.Zoi="Mac OS X",t.Koi="Mac OS",t.CS="Android",t.OS="iOS",t.Joi="Ubuntu",t.$oi="Linux",t.tai="Chrome OS"}(n5||(n5={}));var h5={"Windows 10":/(Windows 10.0|Windows NT 10.0)/i,"Windows 8.1":/(Windows 8.1|Windows NT 6.3)/i,"Windows 8":/(Windows 8|Windows NT 6.2)/i,"Windows 7":/(Windows 7|Windows NT 6.1)/i,"Windows Vista":/Windows NT 6.0/i,"Windows Server 2003":/Windows NT 5.2/i,"Windows XP":/(Windows NT 5.1|Windows XP)/i,"Windows Phone":/Windows Phone/i,Android:/Android/i,Linux:/(Linux(?!.*Ubuntu)|X11)/,Ubuntu:/Ubuntu/i,iOS:/(iPhone|iPad|iPod)/i,"Mac OS X":/Mac OS X/i,"Mac OS":/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i,"Chrome OS":/CrOS/i};function o5(t,i){const e=h5[i];return!!e&&Boolean(xe(t).match(e))}function a5(t){return o5(t,"Android")}function u5(t){return o5(t,"Windows Phone")}function c5(t){return o5(t,"iOS")&&!u5(t)}function d5(t){return o5(t,"Ubuntu")}var l5,po=/Windows (NT|Phone) ([0-9.]+)/i,f5=/Mac.*?(OS |OS X )(\d+(([_.])\d+)?(([_.])\d+)?)/i,_5={"Windows 10":po,"Windows 8.1":po,"Windows 8":po,"Windows 7":po,"Windows Vista":po,"Windows Server 2003":po,"Windows XP":po,"Windows Phone":/Windows Phone ([0-9.]+)/i,Android:/Android (\d+(([_.])\d+)?(([_.])\d+)?)/i,Linux:void 0,Ubuntu:void 0,iOS:/(iPad|iPhone|iPod).*?(OS |os |OS_)(\d+(([_.])\d+)?(([_.])\d+)?)/i,"Mac OS X":f5,"Mac OS":f5,"Chrome OS":void 0};function g5(t,i){const e=_5[i];return e?xe(t).match(e):null}function w5(t){return t.split(/[_.]/).map((t=>x(t,10)))}function A5(t){if(function(t){return Boolean(xe(t).match(/Windows/i))}(t)){if(function(t){return o5(t,"Windows 10")}(t))return"Windows 10";if(u5(t))return"Windows Phone";if(function(t){return o5(t,"Windows 8.1")}(t))return"Windows 8.1";if(function(t){return o5(t,"Windows 8")}(t))return"Windows 8";if(function(t){return o5(t,"Windows 7")}(t))return"Windows 7";if(function(t){return o5(t,"Windows Vista")}(t))return"Windows Vista";if(function(t){return o5(t,"Windows Server 2003")}(t))return"Windows Server 2003";if(function(t){return o5(t,"Windows XP")}(t))return"Windows XP"}else{if(a5(t))return"Android";if(c5(t))return"iOS";if(function(t){return o5(t,"Mac OS X")}(t))return"Mac OS X";if(function(t){return o5(t,"Mac OS")}(t))return"Mac OS";if(d5(t))return"Ubuntu";if(function(t){return o5(t,"Chrome OS")}(t))return"Chrome OS";if(function(t){return o5(t,"Linux")&&!d5(t)}(t))return"Linux"}}function v5(t,i){const e=function(t){const i=g5(t,"Windows 10");return i&&i.length>2?w5(i[2]):void 0}(t),s=function(t){const i=g5(t,"Mac OS X");return i&&i.length>2?w5(i[2]):void 0}(t),n=function(t){const i=g5(t,"Android");return i&&i.length>1?w5(i[1]):void 0}(t),r=function(t){const i=g5(t,"iOS");return i&&i.length>3?w5(i[3]):void 0}(t),h=function(t){const i=g5(t,"Chrome OS");return i&&i.length>0?w5(i[0]):void 0}(t);return e?e.length>i?e[i]:void 0:s?s.length>i?s[i]:void 0:n?n.length>i?n[i]:void 0:r?r.length>i?r[i]:void 0:h&&h.length>i?h[i]:void 0}function m5(t){const i=function(t){return v5(t,0)}(t),e=function(t){return v5(t,1)}(t),s=function(t){return v5(t,2)}(t);if(void 0!==i)return void 0===e?""+i:void 0===s?i+"."+e:i+"."+e+"."+s}!function(t){t.iai="Chrome",t.eai="Chrome Mobile",t.sai="Chrome iOS",t.nai="Chromium",t.rai="Firefox",t.hai="Seamonkey",t.oai="Firefox iOS",t.aai="Firefox Mobile",t.uai="Safari",t.cai="Safari Mobile",t.lai="Edge",t.fai="Edge Chromium",t._ai="Edge Mobile",t.gai="IE",t.wai="Opera",t.Aai="Opera Mobile",t.vai="Vivaldi",t.mai="HeadlessChrome",t.pai="Android Browser"}(l5||(l5={}));var p5={Chrome:/Chrome/i,"Chrome Mobile":void 0,"Chrome iOS":/CriOS/i,Chromium:/Chromium/i,HeadlessChrome:/HeadlessChrome/i,Firefox:/Firefox/i,Seamonkey:/Seamonkey/i,"Firefox iOS":/FxiOS/i,Safari:/Safari/i,Edge:/Edge\/\d+/i,"Edge Chromium":/Edg\/\d+/i,IE:/Trident/i,Opera:/Opera|OPR/i,Vivaldi:/Vivaldi/i,"Android Browser":void 0};function ei(t,i){const e=p5[i];return!!e&&Boolean(xe(t).match(e))}function y5(t){return Boolean(xe(t).match(/Mobi/i))}function M5(t){return Boolean(t.chrome&&t.navigator&&t.navigator.vendor&&/google/i.test(t.navigator.vendor))||T5(t)}function T5(t){return ei(t,"Chrome iOS")}function N5(t){return ei(t,"Firefox")&&!I5(t)}function D5(t){return ei(t,"Firefox Mobile")&&!I5(t)&&y5(t)}function I5(t){return ei(t,"Seamonkey")}function S5(t){return ei(t,"Firefox iOS")&&!I5(t)}function E5(t){return ei(t,"Safari")&&!ei(t,"Chrome")&&!Vt.ZS}function b5(t){return Boolean(P5(t))}function L5(t){return ei(t,"Edge")}function k5(t){return ei(t,"Edge Chromium")}function C5(t){return ei(t,"IE")}function x5(t){return ei(t,"Vivaldi")}var Rc,O5=/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,j5={Chrome:O5,"Chrome Mobile":O5,"Chrome iOS":/CriOS\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,Chromium:O5,HeadlessChrome:O5,Firefox:/Firefox\/([0-9.]+)/i,"Firefox iOS":/FxiOS\/([0-9.]+)/i,Safari:/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/,"Safari Mobile":void 0,Edge:/Edge\/(\d+)/i,"Edge Chromium":/Edg\/(\d+)/i,"Edge Mobile":void 0,IE:/(MSIE |Trident.*?rv:)(\d+)/i,Opera:/(OPR\/(\d+\.\d+))|(Opera(?=.*Version\/((\d+)\.(\d+))))/i,"Opera Mobile":void 0,Vivaldi:/Vivaldi\/((\d+)\.(\d+)\.(\d+)(?:\.(\d+))?)/i,"Android Browser":void 0};function z5(t,i){const e=j5[i];return e?xe(t).match(e):null}function P5(t){return z5(t,"Opera")}function B5(t){const i=function(t){return z5(t,"Firefox")}(t);return i?C(i[1]):0}function R5(t){const i=function(t){return z5(t,"Firefox iOS")}(t);return i?C(i[1].split(".")[0]):0}function U5(t){const i=function(t){return z5(t,"Safari")}(t);return i?C(i[2].split(".")[0]):0}function Q5(t){const i=function(t){return z5(t,"Edge")}(t);return i?C(i[1]):0}function F5(t){const i=function(t){return z5(t,"Edge Chromium")}(t);return i?C(i[1]):0}function Y5(t){const i=function(t){return z5(t,"IE")}(t);return i?C(i[2]):0}function G5(t){const i=function(t){return z5(t,"Vivaldi")}(t);return i?C(i[1]):0}function V5(t){if(a5(t))return M5(t)?"Chrome Mobile":N5(t)||D5(t)?"Firefox Mobile":L5(t)?"Edge Mobile":b5(t)?"Opera Mobile":"Android Browser";if(c5(t)){if(M5(t)||T5(t))return"Chrome iOS";if(N5(t)||S5(t))return"Firefox iOS";if(L5(t))return"Edge Mobile";if(E5(t)||function(t){return E5(t)&&y5(t)}(t))return"Safari Mobile";if(b5(t))return"Opera Mobile"}return function(t){return ei(t,"Chromium")}(t)?"Chromium":function(t){return ei(t,"HeadlessChrome")}(t)?"HeadlessChrome":M5(t)?"Chrome":N5(t)?"Firefox":E5(t)?"Safari":L5(t)?"Edge":k5(t)?"Edge Chromium":C5(t)?"IE":b5(t)?"Opera":x5(t)?"Vivaldi":void 0}function W5(t){return x5(t)?G5(t):T5(t)?Number(function(t){const i=j5["Chrome iOS"];return i&&i.exec(xe(t))||[]}(t)[1]):M5(t)?Number(function(t){const i=j5.Chrome;return i&&i.exec(xe(t))||[]}(t)[1]):N5(t)||D5(t)?B5(t):S5(t)?R5(t):E5(t)?U5(t):L5(t)?Q5(t):k5(t)?F5(t):C5(t)?Y5(t):b5(t)?function(t){const i=P5(t);return i&&i[0].indexOf("Opera")>-1?C(i[5]):i?C(i[2].split(".")[0]):0}(t):void 0}function H5(t){const i=xe(t);return i.match(/CrKey|Roku|AFTS|AppleTV|Nexus Player/i)?"settop":i.match(/Xbox|Playstation|Wii|Nintendo/i)?"console":/(iPad|Tablet|(Android(?!.*Mobi))|(Windows(?!.*Phone)(.*Touch))|Kindle|Playbook|Silk|(Puffin(?!.*(IP|AP|WP))))/i.test(i)?"tablet":/Mobi/.test(i)?"mobile":i.match(/GoogleTV|SmartTV|SMART-TV|Internet TV|NetCast|NETTV|boxee|Kylo|DLNADOC|hbbtv|CE-HTML/i)?"smarttv":i.match(/(nuhk|Googlebot|bingbot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/i)?"searchbot":function(t){return Boolean(V5(t))}(t)?"pc":void 0}!function(t){t.yai="pc",t.Mai="console",t.Tai="settop",t.Nai="mobile",t.Dai="tablet",t.Iai="smarttv",t.Sai="searchbot"}(Rc||(Rc={}));var q5=class{bQ(t){this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_ID,t.deviceID||function(){let t=Qt.Fb("deviceId");if(t)return t;let i=cD();return Qt.Kj("deviceId",i),i}()),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER,"THEOplayer"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER_VERSION,"8.0.0"),this.Eai(t),this.bai(),this.Lai(t),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_VERSION,"3.0"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_BUILDDATE,"2023-04-17 12:00:00"),t.application&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION,t.application),t.applicationVersion&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION_VERSION,t.applicationVersion),t.userAccountID&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.USER_ACCOUNT_ID,t.userAccountID);const i=t.connectionType;i?this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i):(this.kai(),id.connection&&id.connection.addEventListener&&id.connection.addEventListener("change",this.kai))}Eai(t){this.Cai(t);const i=t.deviceManufacturer||r5&&r5.manufacturer;i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MANUFACTURER,i);const e=t.deviceModel||r5&&r5.model;e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MODEL,e)}Cai(t){const i=t.deviceType||function(){const t=H5(self);switch(t){case Rc.Mai:return"game-console";case Rc.Iai:return"tv";case Rc.Tai:return"media-streamer";default:return t}}();i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_TYPE,i)}bai(){const t=V5(self);t&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER,t);const i=W5(self);void 0!==i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER_VERSION,i.toString())}Lai(t){const i=t.deviceOs||A5(self);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS,i);const e=t.deviceOsVersion||m5(self);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS_VERSION,e.toString())}gn(){id.connection&&id.connection.removeEventListener&&id.connection.removeEventListener("change",this.kai)}constructor(t,e){this.empClient=t,this.agama=e,this.kai=()=>{const t=i.Jit;switch(t){case"wifi":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,"wlan");break;case"ethernet":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,t);break;case"cellular":const e=function(t){switch(t){case"3g":return"mobile/3G";case"4g":return"mobile/4G";default:return}}(i.Kit);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,e)}}}};var Ec,Kh;Zr(function(t){return i=>class extends i{Nf(t){this.xai&&this.xai.vU(),super.Nf(t)}gn(){this.xai&&this.xai.gn(),super.gn()}constructor(i,e){super(i,e),this.oU=new t,this.xai=new lD(this,this.oU,e)}}}(class extends iD{v_(t){this.Oai=t,this.jai&&(this.oU=function(t,i){const e=function(t,i){switch(i){case"info":return t.LogLevel.INFO;case"debug":return t.LogLevel.DEBUG;case"warning":return t.LogLevel.WARNING;case"error":return t.LogLevel.ERROR;default:return t.LogLevel.FATAL}}(i,t.logLevel);i.setLogLevel(e);const s=new i.EMPClient(t.config);return function(t,i){return t.setExternalConfig(i.config),t}(s,t)}(t,this.jai),this.oU&&(this.zai=new q5(this.oU,this.jai),this.bo=!0))}EQ(){return this.jai||console.warn("Please load the Agama Library (empclient.min.js) in order to use the integration"),!!this.jai}IQ(){return this.bo}eQ(t,i){if(this.oU&&this.jai)switch(t){case Ih.NR:this.oU.setMeasurement(this.jai.Measurement.BUFFER_LENGTH,i);break;case Ih.DR:this.oU.setMeasurement(this.jai.Measurement.BYTES_RECEIVED,i);break;case Ih.SR:this.oU.setMeasurement(this.jai.Measurement.SEGMENT_PROFILE_BITRATE,i);break;case Ih.ER:this.oU.setMeasurement(this.jai.Measurement.VIDEO_PROFILE_BITRATE,i);break;case Ih.IR:this.oU.setMeasurement(this.jai.Measurement.SEGMENT_READ_BITRATE,i);break;case Ih.vR:this.oU.setMeasurement(this.jai.Measurement.HTTP_REQUEST_STATUS_CODE_1XX,i);break;case Ih.mR:this.oU.setMeasurement(this.jai.Measurement.HTTP_REQUEST_STATUS_CODE_2XX,i);break;case Ih.pR:this.oU.setMeasurement(this.jai.Measurement.HTTP_REQUEST_STATUS_CODE_3XX,i);break;case Ih.yR:this.oU.setMeasurement(this.jai.Measurement.HTTP_REQUEST_STATUS_CODE_4XX,i);break;case Ih.MR:this.oU.setMeasurement(this.jai.Measurement.HTTP_REQUEST_STATUS_CODE_5XX,i);break;case Ih.LR:this.oU.setMeasurement(this.jai.Measurement.PLAYBACK_POSITION,i);break;case Ih.kR:this.oU.setMeasurement(this.jai.Measurement.NUMBER_OF_FRAMES_DECODED,i);break;case Ih.bR:this.oU.setMeasurement(this.jai.Measurement.NUMBER_OF_FRAMES_DROPPED,i)}}PU(t,i){if(this.oU&&this.jai)switch(t){case Ks.PR:this.oU.setSessionMetadata(this.jai.SessionMetadata.ASSET_DURATION,i);break;case Ks.zR:this.oU.setSessionMetadata(this.jai.SessionMetadata.MANIFEST_URI,i);break;case Ks.RR:this.oU.setSessionMetadata(this.jai.SessionMetadata.NUMBER_OF_CONTENT_PROFILES,i);break;case Ks.FR:this.oU.setSessionMetadata(this.jai.SessionMetadata.SERVICE_NAME,i);break;case Ks.UR:this.oU.setSessionMetadata(this.jai.SessionMetadata.CDN,i);break;case Ks.QR:this.oU.setSessionMetadata(this.jai.SessionMetadata.CONTENT_TITLE,i);break;case Ks.YR:this.oU.setSessionMetadata(this.jai.SessionMetadata.CONTENT_TYPE,i);break;case Ks.GR:this.oU.setSessionMetadata(this.jai.SessionMetadata.CONTENT_DESCRIPTION,i)}}bQ(){this.zai&&this.Oai&&this.zai.bQ(this.Oai)}SQ(t,i){this.jai&&this.oU&&(this.dQ(),function(t,i,e,s){const n=dD(t,e,s);i.abrSession(n,t.ViewState.INITIAL_BUFFERING)}(this.jai,this.oU,t,i),this.Pai=!0)}gn(){this.zai&&this.zai.gn(),this.Bai(ZN.WR),this.oU=void 0}TU(t){this.Rai(t)}IU(t,i){this.oU&&this.oU.event(t.code,i)}dQ(){this.oU&&this.Pai&&(this.oU.exitSession(),this.Pai=!1)}Bai(t){if(this.oU&&this.jai&&(this.dQ(),t===ZN.WR))this.oU.shutdown(this.jai.ShutdownType.NORMAL_SHUTDOWN)}NU(t,i,e){this.Rai(t,i,e)}Rai(t,i,e){if(this.oU&&this.jai)switch(t){case cc.Rw:this.Uai(this.jai.ViewState.PLAYING,i,e);break;case cc.gR:this.Uai(this.jai.ViewState.FAILED,i,e);break;case cc.wR:this.Uai(this.jai.ViewState.INITIAL_BUFFERING,i,e);break;case cc.Qw:this.Uai(this.jai.ViewState.PAUSED,i,e);break;case cc.fR:this.Uai(this.jai.ViewState.SEEK,i,e);break;case cc._R:this.Uai(this.jai.ViewState.STALLED,i,e);break;case cc.AR:this.Uai(this.jai.ViewState.NO_ACCESS,i,e)}}Uai(t,i,e){if(this.oU)if(i){const s=function(t){return t||""}(e);this.oU.viewStateExtended(t,i.code,s)}else this.oU.viewStateChanged(t)}constructor(){super(),this.bo=!1,this.Pai=!1,this.jai=Or.Agama}}),lt.L7),function(t){t.PLAY_ALL="play-all",t.PLAY_NONE="play-none",t.PLAY_LAST="play-last"}(Ec||(Ec={})),function(t){t.VOD="vod",t.LIVE="live"}(Kh||(Kh={}));var X5=class{get va(){return this.Qai.va}get lt(){return this.Bz}get bf(){return this.Rz}Fai(t){this.Bz=De(t),this.Rz=t,this.Qo.Co(new Bi(t))}ga(t){this.Yai.tr(),this.Gai.Vb(),this.Vai=!1,this.Qo.Wai(t)}async _tt(t,i){if(this.Hai.tr(),this.Vai=!1,!t||!function(t){return t.sources.some((t=>t.integration===es.VERIZON_MEDIA))}(t))return await this.Qo.qai(t,i);try{this.Xai=await this.Zai.cni(t),await this.Qo.qai(this.Xai,i)}catch(t){this.Fai(new $i(Ui.MANIFEST_LOAD_ERROR,t.message,t))}}gn(){this.V2.Xd(),this.Kai.Xd(),this.Qo.fn(l.Hg,this.Jai),this.Qo.fn(l.jh,this.gii),this.Qo.fn(l.Sw,this.Rni),this.Qo.fn(l.Jg,this.Bei),this.Qo.fn(er.zw,this.jd);for(const t of this.Yai.iVt.Gu)t.fn("$ai",this.tui),t.fn("Z7",this.iui),t.fn("X7",this.eui);this.Yai.iVt.fn("W7",this.sui),this.Yai.iVt.fn("V7",this.nui),this.Yai.gn(),this.jWt&&(this.jWt.Qd(),this.jWt=void 0),this.Vai=!1}async fetchAssetInfo(t){if(t&&t.integrationData)try{const i=await this.rui.xyt(t.integrationData.source.prefix,t.integrationData.source.id,this.Kai.Hd,t.integrationData.preplayResponse.sid);this.Qai.hui(i),this.Gai.oui(i,this.Yai.iVt.Gu)}catch(t){0}}aui(t){this.Yai.uui(t),this.Yai.P7.forEach((i=>i.cui(t))),this.Yai.dui(this.Qo.i_()),this.OWt()}Nf(t){this.Yai.R7||(this.V2.Xd(),this.V2=new na,D(this.nni(t,this.V2.Hd)))}async nni(t,i){if(Bo(i),t<this.Qo.Tf())return void this.lui(t);let e=[];switch(this.Yai.fui){case Ec.PLAY_ALL:e=this.Yai._ui(this.Qo.Tf(),t),await this.gui(t,e,i);break;case Ec.PLAY_LAST:const s=this.Yai._ui(this.Qo.Tf(),t).pop();e=s?[s]:[],await this.gui(t,e,i);break;case Ec.PLAY_NONE:this.wui(t)}}lui(t){const i=Zt(this.Yai.iVt.Gu,(i=>i.jht.gr(t)));i?this.Qo.Aui(i.GT):this.Qo.Aui(t)}wui(t){const i=this.Yai._ui(this.Qo.Tf(),t).pop();i&&i.jht.gr(t)?this.Qo.Aui(i.VT):this.Qo.Aui(t)}async gui(t,i,e){for(const t of i)await this.vui(t,e);const s=i[i.length-1];s&&s.jht.gr(t)?this.Qo.Tf()<t&&this.Qo.Aui(s.VT):this.Qo.Aui(t)}async vui(t,i){t.fn("$ai",this.tui);const e=Promise.race([t.df("X7",i),t.df("$ai",i)]);this.aui(this.Qo.Tf()),t.ro||this.Qo.Aui(t.GT),await e,t.yn("$ai",this.tui)}OWt(){const t=Zt(this.Yai.P7,(t=>t.mui.length>0));if(t){const i=t.mui[0];this.jWt||(this.jWt=new Za(this.Qo.we),this.jWt.yn("clickstart",this.pui)),this.jWt.YVt=i}else this.jWt&&(this.jWt.Qd(),this.jWt=void 0)}constructor(t,i,e,s,n,r,h){this.Qo=t,this.Hai=i,this.Zai=e,this.Yai=s,this.Qai=n,this.rui=r,this.Gai=h,this.Bz=void 0,this.Rz=void 0,this.V2=new na,this.Kai=new na,this.yui=void 0,this.Vai=!1,this.jWt=void 0,this.Jai=t=>{const i=t.currentSource;if(!i||!i.integrationData)return;const{preplayResponse:e,source:s}=i.integrationData;this.Qai.Mui(e),e&&e.type===Kh.VOD&&e.ads&&this.Yai.oui(e.ads),this.Hai.Tui=i.integrationData,s.assetInfo&&D(this.fetchAssetInfo(i))},this.gii=()=>{this.Vai=!0},this.Rni=()=>{this.Vai&&this.aui(this.Qo.Tf())},this.Bei=()=>{this.Vai&&(this.aui(1/0),this.Vai=!1)},this.jd=()=>{D(this.Hai.Cn())},this.tui=t=>{this.V2.Xd(),this.V2=new na,D(this.nni(t.Xl.VT,this.V2.Hd))},this.iui=()=>{1!==this.Qo.Gf&&(this.yui=this.Qo.Gf,this.Qo.Gf=1)},this.eui=()=>{void 0!==this.yui&&(this.Qo.Gf=this.yui,this.yui=void 0)},this.sui=t=>{t.Xl.yn("$ai",this.tui),t.Xl.yn("Z7",this.iui),t.Xl.yn("X7",this.eui)},this.nui=t=>{t.Xl.fn("$ai",this.tui),t.Xl.fn("Z7",this.iui),t.Xl.fn("X7",this.eui)},this.pui=()=>{this.Qo.m_()},this.Qo.yn(l.Hg,this.Jai),this.Qo.yn(l.jh,this.gii),this.Qo.yn(l.Sw,this.Rni),this.Qo.yn(l.Jg,this.Bei),this.Qo.yn(er.zw,this.jd),this.Yai.iVt.yn("W7",this.sui),this.Yai.iVt.yn("V7",this.nui)}};var Z5,K5=Ae({breaksIndex:Qn,adsIndex:Qn,startTime:Qn,endTime:Qn}),J5=Ae({index:Qn,timeOffset:Qn}),$5=Ae({duration:Qn,apiFramework:Bn($,kT),creative:$,mimeType:$,width:Qn,height:Qn,companions:Dt(function(t){return new UT(t)}((()=>$5))),extensions:Bn(Re,Dt(Su)),fw_parameters:Bn(Re,RT($)),events:RT(Dt($))}),t6=Ae({type:Xt(["linear","nonlinear"]),position:Xt(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:Qn,duration:Qn,ads:Dt($5),events:RT(Dt($))}),i6=Ae({breaks:Dt(t6),breakOffsets:Dt(J5),placeholderOffsets:Dt(K5)}),e6=Ae({fairplayCertificateURL:Bn(Re,$),widevineLicenseURL:Bn(Re,$),playreadyLicenseURL:Bn(Re,$)}),s6={type:Xt(OT(Kh)),playURL:$,prefix:$,sid:$,drm:Bn(Re,e6)},n6=Ae(Tt({},s6,{type:Xt([Kh.VOD]),ads:i6,interstitialURL:Bn($,kT,Re)})),r6=Bn(n6,Ae(Tt({},s6,{type:Xt([Kh.LIVE])}))),h6=$,o6=Ae({userId:$,externalId:Bn($,Dt($))});!function(t){t[t.AD_IMPRESSIONS=1]="AD_IMPRESSIONS",t[t.FW_VIDEO_VIEWS=2]="FW_VIDEO_VIEWS",t[t.LINEAR_AD_DATA=4]="LINEAR_AD_DATA"}(Z5||(Z5={}));var a6=class{async xyt(t){try{return this.Nui(t)}catch(t){throw t}}async Nui(t){const e=await async function(t){const e=t.prefix,s=u6[t.assetType],n=function(t){if(Dt(h6).bj(t))return 1===t.length?t[0]:t.join(",")+"/multiple";if(h6.bj(t))return t;if(o6.bj(t)&&Gt(t.externalId))return 1===t.externalId.length?"ext/"+t.userId+"/"+t.externalId[0]:"ext/"+t.userId+"/"+t.externalId.join(",")+"/multiple";if(o6.bj(t))return"ext/"+t.userId+"/"+t.externalId;throw new b("Invalid asset id")}(t.id),r=await async function(t){if(t&&await i.RC())return{rmt:"fps",manifest:"m3u8"};if(t&&await i.OC())return{rmt:"wv",manifest:"mpd"};if(t&&await i.BC())return{rmt:"pr",manifest:"mpd"};return{}}(t.contentProtected),h=function(t,i){const e=c6(t,i);return e?{"ad.cping":"1","ad.pingf":String(e)}:{}}(t.assetType,t.ping);let o={};Gt(t.preplayParameters)?t.preplayParameters.forEach((t=>{o[t[0]]=t[1]})):o=t.preplayParameters;const a=e+"/preplay/"+s+n+".json";return pa(a,Tt({v:"2"},o,r,h,o))}(t),s=this.NS.SI({lS:Nr.GET,zu:e,fS:Uv.GI}),n=await s,r=Tt({},await n.zm(),{type:t.assetType===Ba.ASSET?Kh.VOD:Kh.LIVE});return r6.bj(r)||r6.Cj(r,"PreplayResponse"),r}constructor(t){this.NS=t}},u6={[Ba.ASSET]:"",[Ba.CHANNEL]:"channel/",[Ba.EVENT]:"event/"};function c6(t,i){const e=t!==Ba.ASSET;return(!e&&i.adImpressions?1:0)+(!e&&i.freeWheelVideoViews?2:0)+(e&&i.linearAdData?4:0)}var xc,d6=Ae({ad_id:$,apiFramework:Bn(kT,$),companions:Dt(Su),creative:$,duration:Qn,mimeType:$,height:Qn,width:Qn,extensions:Bn(Re,Dt(Su)),fw_parameters:Bn(Re,RT($))}),l6=Ae({breakId:$,ads:Dt(d6),type:Xt(["linear","nonlinear"]),position:Xt(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:Qn,duration:Qn,height:Bn(Re,Qn),width:Bn(Re,Qn),events:RT(Dt($))}),f6=Ae({breaks:Dt(l6)}),_6=Ae({next_time:Qn,ads:Bn(Re,f6),extensions:Bn(Re,Dt(Su)),error:Bn(Re,$),currentBreakEnd:Bn(Re,Qn)});!function(t){t.Byt="start",t.fR="seek"}(xc||(xc={}));var g6=class{async xyt(t,i){try{return this.Nui(t,i)}catch(t){throw t}}async Nui(t,i){const e=function(t){const i={v:"3",pt:String(t.currentTime)};(function(t){return void 0!==t.seekTime})(t)&&t.hasFreeWheelVideoViews&&(i.ft=String(t.seekTime));t.event&&(i.ev=t.event);return pa(t.zonePrefix+"/session/ping/"+t.sessionId+".json",Tt({},i))}(t),s=this.NS.SI({lS:Nr.GET,zu:e,fS:Uv.GI,Hd:i}),n=await s,r=await n.zm();return _6.bj(r)||_6.Cj(r,"PingResponse"),r}constructor(t){this.NS=t}};var w6=class extends yo{get bI(){return this.LI}fa(){return new A6(this.LI)}constructor(t){super("Dui"),this.LI=t}},A6=class extends wn{constructor(t){super("pingresponse"),this.response=t}},v6=class extends yo{get lt(){return this.Bz}fa(){return new m6(this.Bz)}constructor(t){super("Iui"),this.Bz=t}},m6=class extends wn{constructor(t){super("pingerror"),this.error=t}},p6=class extends Pl{set Tui(t){this.Sui=t}get Eui(){return this.bui}async Cn(){const t=this.Sui;if(!t)return;0!==c6(t.source.assetType,t.source.ping)&&(this.bui=this.Qo.i_().start(0),await this.Lui(xc.Byt),this.Qo.yn("timeupdate",this.kui),this.Qo.yn("seeking",this.Cui))}async Lui(t,i){const e=this.Sui.preplayResponse,s={};if(S(this.bui))return void 0;if(Yt(this.xui)&&Cd(this.xui,this.Qo.Tf()-this.bui))return;void 0!==i&&(s.seekTime=i),void 0!==t&&(s.event=t);let n,r=this.Qo.Tf()-this.bui;t===xc.Byt?r=0:t!==xc.fR&&this.Oui&&(r=_.min(r,this.Oui)),this.xui=r;try{var h;const t=await this.jui.xyt(Tt({zonePrefix:e.prefix,sessionId:e.sid,currentTime:r,hasFreeWheelVideoViews:null==(h=this.Sui)?void 0:h.source.ping.freeWheelVideoViews},s),this.Tx.Hd);this.Co(new w6(t)),this.Oui=-1!==t.next_time?t.next_time:void 0,n=t.error}catch(t){ut(t)||(n=t.message)}finally{n&&this.Co(new v6(n))}}tr(){this.Oui=void 0,this.Sui=void 0,this.bui=NaN,this.zui=!1,this.Pui=NaN,this.xui=void 0,this.Qo.fn("seeking",this.Cui),this.Qo.fn("timeupdate",this.kui),this.Bui()}Bui(){this.Tx.Xd(),this.Tx=new na}gn(){this.tr()}constructor(t,i){super(),this.jui=t,this.Qo=i,this.bui=NaN,this.Oui=void 0,this.zui=!1,this.Pui=NaN,this.Tx=new na,this.xui=void 0,this.kui=async()=>{const t=this.Qo.Tf();if(this.Pui=t,this.zui||Nd(this.Oui)||S(this.bui))return;this.bui+this.Oui<=t&&(this.zui=!0,await this.Lui(),this.zui=!1)},this.Cui=()=>{if(this.Qo.Tf()===this.bui)return;this.zui&&this.Bui(),this.Pui=this.Qo.Tf();const t=this.Pui-(this.bui||0);S(t)?D(this.Lui(xc.fR,0)):D(this.Lui(xc.fR,t))}}},y6=class{async cni(t){const i=[];for(const e of t.sources)if(M6(e))try{const s=N6({source:e,preplayResponse:await this.Rui.xyt(e)},t,this.LH);s.src&&(s.src=pa(s.src,e.playbackUrlParameters)),i.push(s)}catch(t){0}else i.push(e);if(0!==t.sources.length&&0===i.length)throw new g("Fatal: unable to play VerizonMediaSources.");return Tt({},t,{sources:i})}constructor(t,i){this.Rui=t,this.LH=i}};function M6(t){return"verizon-media"===t.integration}function T6(t){if(t.sources)if(Gt(t.sources)){for(const i of t.sources)if(!Qs(i)&&"verizon-media"===i.integration)return!0}else if(!Qs(t.sources))return"verizon-media"===t.sources.integration;return!1}function N6(t,i,e){const s=t.preplayResponse;let n;t.source.contentProtected&&s.drm&&(n={integration:"uplynk"},s.drm.fairplayCertificateURL&&(n.fairplay={certificateURL:s.drm.fairplayCertificateURL}),s.drm.widevineLicenseURL&&(n.widevine={licenseAcquisitionURL:s.drm.widevineLicenseURL}),s.drm.playreadyLicenseURL&&(n.playready={licenseAcquisitionURL:s.drm.playreadyLicenseURL}));const r=Og({src:s.playURL,contentProtection:n,useNativePlayback:t.source.useNativePlayback,hls:t.source.hls,dash:t.source.dash,seamlessSwitchStrategy:t.source.seamlessSwitchStrategy},i,e);return r.integrationData=t,r}var D6=class extends yo{fa(){return new I6(this.Xl.va)}constructor(t,i){super("Z7"),this.Xl=t,this.uD=i}},I6=class extends wn{constructor(t){super("adbreakbegin"),this.adBreak=t}},S6=class extends yo{fa(){return new E6(this.Xl.va)}constructor(t,i){super("X7"),this.Xl=t,this.uD=i}},E6=class extends wn{constructor(t){super("adbreakend"),this.adBreak=t}},b6=class extends yo{fa(){return new L6(this.Xl.va)}constructor(t){super("$ai"),this.Xl=t}},L6=class extends wn{constructor(t){super("adbreakskip"),this.adBreak=t}};var k6=class extends yo{fa(){return new C6(this.Xl.va)}constructor(t){super("rXt"),this.Xl=t}},C6=class extends wn{constructor(t){super("updateadbreak"),this.adBreak=t}},x6=class extends Ys{get va(){return this.Xa||(this.Xa=function(t){let i;const e={get startTime(){return t.GT},get endTime(){return t.VT},get duration(){return t.ct},get ads(){return t.Oc.va},get skipOffset(){return t.LQt},set skipOffset(i){t.LQt=i},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Vh(t,e),e}(this)),this.Xa}get GT(){return this.tN}get VT(){return this.VL?this.tN+this.VL:void 0}Uui(t){this.VL=t-this.GT;for(const i of this.Oc.Gu)i.GT>t&&this.Oc.ET(i);this.Co(new k6(this))}get ct(){return this.VL}get jht(){const t=this.VT;return Yt(t)?new Ai([this.GT,t]):Ai.SB()}get Oc(){return this.Ic}get Qui(){return this.Fui}get ro(){return this.ho}get LQt(){return this.Xni?-1:this.kQt}set LQt(t){this.Xni||(this.kQt=t)}rat(t){return t>=this.GT&&(Nd(this.ct)||t<=this.GT+this.ct)}Yui(t){return-1!==this.LQt&&(!!Yt(this.VT)&&t-this.GT>=this.LQt)}Hm(){this.Ic.Gu.forEach((t=>t.Hm())),this.Co(new b6(this))}Gui(t){const i=Yt(this.VT)&&t>=this.VT,e=this.GT<=t&&!i&&!this.ro,s=this.ro&&this.VT&&t>=this.VT;e&&(this.ho=!0,this.Co(new D6(this,this.GT))),this.Ic.Gu.forEach((i=>i.Gui(t))),s&&(this.Fui=!0,this.ho=!1,this.Co(new S6(this,this.VT)))}constructor(t,i,e,s,n){super(),this.tN=t,this.VL=i,this.Ic=e,this.Xni=s,this.ho=!1,this.Fui=!1,this.kQt=n}},O6=class extends yo{fa(){return new j6(this.H7.va)}constructor(t,i){super("K7"),this.H7=t,this.uD=i}},j6=class extends wn{constructor(t){super("adbegin"),this.ad=t}},z6=class extends yo{fa(){return new P6(this.H7.va)}constructor(t,i){super("J7"),this.H7=t,this.uD=i}},P6=class extends wn{constructor(t){super("adend"),this.ad=t}},B6=class extends yo{fa(){return new R6(this.H7.va)}constructor(t){super("Vui"),this.H7=t}},R6=class extends wn{constructor(t){super("removead"),this.ad=t}},yh=class extends a0{t2t(t){}n2t(t){this.Co(new B6(t))}constructor(){super()}},U6=class extends yo{fa(){return new Q6(this.H7.va)}constructor(t){super("oXt"),this.H7=t}},Q6=class extends wn{constructor(t){super("adfirstquartile"),this.ad=t}},F6=class extends yo{fa(){return new Y6(this.H7.va)}constructor(t){super("aXt"),this.H7=t}},Y6=class extends wn{constructor(t){super("admidpoint"),this.ad=t}},G6=class extends yo{fa(){return new V6(this.H7.va)}constructor(t){super("uXt"),this.H7=t}},V6=class extends wn{constructor(t){super("adthirdquartile"),this.ad=t}},W6=class extends yo{fa(){return new H6(this.H7.va)}constructor(t){super("Wui"),this.H7=t}},H6=class extends wn{constructor(t){super("adcomplete"),this.ad=t}};var q6,X6,Z6,K6=class t extends Ys{static Hui(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.Hui(i,e))),e.extensions,e.fw_parameters,e.events,void 0)}static qui(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.qui(i,e))),e.extensions,e.fw_parameters,void 0,e.ad_id)}get va(){return this.Xa||(this.Xa=function(t){let i;const e={get apiFramework(){return t.YUt},get companions(){return t.xUt.va},get creative(){return t.Xui},get duration(){return t.ct},get endTime(){return t.VT},get events(){return t.xF},get extensions(){return t.Zui},get freeWheelParameters(){return t.Kui},get height(){return t.Ti},get mimeType(){return t.CF},get startTime(){return t.GT},get width(){return t.ji},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Vh(t,e),e}(this)),this.Xa}get GT(){return this.tN}get VT(){return this.tN+this.VL}get ct(){return this.VL}get YUt(){return this.GUt}get Xui(){return this.Jui}get CF(){return this.qF}get ji(){return this.lk}get Ti(){return this.fk}get xF(){return this.HB}get xUt(){return this.OUt}get Zui(){return this.$ui}get Kui(){return this.tci}get ro(){return this.ho}get mui(){var t;return null!=(t=this.HB.clickthroughs)?t:[]}Gui(t){const i=this.GT<=t&&t<this.VT,e=i&&!this.ro,s=!i&&this.ro;e&&(this.ici=!1,this.eci=!1,this.sci=!1,this.nci=!1,this.ho=!0,this.Co(new O6(this,this.GT))),s&&(this.ho=!1,this.Co(new z6(this,this.VT)))}cui(t){const i=(t-this.GT)/this.ct;!this.ici&&i>=.25&&(this.ici=!0,this.Co(new U6(this))),!this.eci&&i>=.5&&(this.eci=!0,this.Co(new F6(this))),!this.sci&&i>=.75&&(this.sci=!0,this.Co(new G6(this))),!this.nci&&i>=.9999&&(this.nci=!0,this.Co(new W6(this)))}Hm(){this.ici=!0,this.eci=!0,this.sci=!0,this.nci=!0}gn(){this.fn("K7",this.rci),this.fn("J7",this.hci)}constructor(t,i,e,s,n,r,h,o,a=[],u={},c={},d){super(),this.tN=t,this.VL=i,this.GUt=e,this.Jui=s,this.qF=n,this.lk=r,this.fk=h,this.$ui=a,this.tci=u,this.HB=c,this.mQt=d,this.OUt=new yh,this.ho=!1,this.ici=!1,this.eci=!1,this.sci=!1,this.nci=!1,this.rci=()=>this.cui(this.tN),this.hci=()=>this.cui(this.VT),this.OUt.i2t(o),this.yn("K7",this.rci),this.yn("J7",this.hci)}},J6=class extends yo{fa(){return new $6(this.Xl.va)}constructor(t){super("W7"),this.Xl=t}},$6=class extends wn{constructor(t){super("addadbreak"),this.adBreak=t}},t8=class extends yo{fa(){return new i8(this.Xl.va)}constructor(t){super("V7"),this.Xl=t}},i8=class extends wn{constructor(t){super("removeadbreak"),this.adBreak=t}},e8=class extends a0{t2t(t){this.Co(new J6(t))}n2t(t){this.Co(new t8(t))}constructor(){super()}},s8=class{get va(){return this.Xa||(this.Xa=function(t){return{get adBreaks(){return t.iVt.va},get currentAdBreak(){if(t.R7)return t.R7.va},get currentAds(){return t.R7?t.R7.Oc.va:(new yh).va},skip(){t.Hm()}}}(this)),this.Xa}get iVt(){return this.IVt}get R7(){return Zt(this.IVt.Gu,(t=>t.ro))}get P7(){return this.R7?this.R7.Oc.Gu.filter((t=>t.ro)):[]}get aci(){if(0===this.iVt.U||0===this.uci.i_().length)return;const t=this.uci.i_().end(this.uci.i_().length-1);return Zt(this.iVt.Gu,(i=>i.rat(t)))}get fui(){return this.cci}dui(t){if(0===t.length)return;const i=Ai.xn(t);for(const t of this.IVt.Gu.slice())Yt(t.VT)&&i.Cn(0)>t.VT&&this.IVt.ET(t)}oui(t){const i=!function(t){return Yt(t.breakOffsets)}(t),e=i?this.Hai.Eui:0;for(const s of t.breaks){if(0===s.ads.length)continue;let t=s.timeOffset+e;const n=new yh;let r=0;for(const e of s.ads){const s=i?K6.qui(t,e):K6.Hui(t,e);n.ST(s),t+=s.ct,r+=s.ct}const h=s.timeOffset+e,o=i?void 0:s.duration,a=new x6(h,o,n,i,this.dci);i&&this.lci.push({TUt:a,ySt:h+r}),this.IVt.ST(a)}}fci(t){const i=this.aci;i&&i.Uui(t+this.Hai.Eui)}uui(t){this._ci=t,this.IVt.Gu.forEach((i=>i.Gui(t)))}Hm(){const t=this._ci,i=this.R7;t&&i&&i.Yui(t)&&i.Hm()}_ui(t,i){let e=[];for(const s of this.iVt.Gu)!s.Qui&&s.GT>=t&&s.GT<i&&e.push(s);return e}gn(){this.uci.fn("timeupdate",this.gci),this.Hai.fn("Dui",this.wci)}tr(){for(const t of this.iVt.Gu){for(const i of t.Oc.Gu)i.Vo();t.Vo()}this.iVt.Vb(),this._ci=void 0,this.lci=[]}constructor(t,i,e,s){this.lci=[],this.wci=t=>{t.bI.ads&&this.oui(t.bI.ads),t.bI.currentBreakEnd&&this.fci(t.bI.currentBreakEnd)},this.gci=t=>{if(0===this.lci.length||0===this.uci.i_().length)return;const i=this.uci.i_().end(this.uci.i_().length-1);for(const t of this.lci.slice())Yt(t.TUt.ct)?To(this.lci,t):t.ySt<i&&(t.TUt.Uui(t.ySt),To(this.lci,t))},this.uci=t,this.Hai=i,this.IVt=new e8,this.dci=e,this.cci=s,t.yn("timeupdate",this.gci),this.Hai.yn("Dui",this.wci)}};!function(t){t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.G=1]="G",t[t.PG=2]="PG",t[t.PG_13=3]="PG_13",t[t.R=4]="R",t[t.NC_17=5]="NC_17",t[t.X=6]="X",t[t.NOT_RATED=7]="NOT_RATED"}(q6||(q6={})),function(t){t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.TV_Y=1]="TV_Y",t[t.TV_Y7=2]="TV_Y7",t[t.TV_G=3]="TV_G",t[t.TV_PG=4]="TV_PG",t[t.TV_14=5]="TV_14",t[t.TV_MA=6]="TV_MA",t[t.NOT_RATED=7]="NOT_RATED"}(X6||(X6={})),function(t){t[t.ADULT_LANGUAGE=1]="ADULT_LANGUAGE",t[t.SEXUAL_SITUATIONS=2]="SEXUAL_SITUATIONS",t[t.VIOLENCE=4]="VIOLENCE",t[t.DRUGS=8]="DRUGS"}(Z6||(Z6={}));var n8=class t{static Aci(i,e,s){const n=new W_(i.rating_flags);return new t(e,s,i.duration,Boolean(i.audio_only),i.boundary_details,Boolean(i.error),i.tv_rating,i.max_slice,i.thumb_prefix,i.slice_dur,i.movie_rating,i.owner,i.meta,i.rates,i.thumbs,i.poster_url,i.default_poster_url,i.desc,n.Cm(1),n.Cm(2),n.Cm(4),n.Cm(8),i.external_id,Boolean(i.is_ad),i.asset)}get va(){return this.Xa||(this.Xa=function(t){return{startTime:t.GT,endTime:t.VT,duration:t.ct,audioOnly:t.vci,boundaryDetails:t.mci,error:t.lt,tvRating:t.pci,maxSlice:t.yci,thumbPrefix:t.Mci,sliceDuration:t.Tci,movieRating:t.Nci,ownerId:t.Dci,metadata:t.XD,rates:t.Ici,thumbnailResolutions:t.Sci,posterUrl:t.Eci,defaultPosterUrl:t.bci,description:t.$p,hasAdultLanguage:t.Lci,hasSexualSituations:t.kci,hasViolence:t.Cci,hasDrugSituations:t.xci,externalId:t.Oci,isAd:t.jci,assetId:t.zci}}(this)),this.Xa}constructor(t,i,e,s,n,r,h,o,a,u,c,d,l,f,_,g,w,A,v,m,p,y,M,T,N){this.GT=t,this.VT=i,this.ct=e,this.vci=s,this.mci=n,this.lt=r,this.pci=h,this.yci=o,this.Mci=a,this.Tci=u,this.Nci=c,this.Dci=d,this.XD=l,this.Ici=f,this.Sci=_,this.Eci=g,this.bci=w,this.$p=A,this.Lci=v,this.kci=m,this.Cci=p,this.xci=y,this.Oci=M,this.jci=T,this.zci=N}};var r8=Ae({duration:Qn,offset:Qn}),h8=Ae({c3:r8}),o8=Ae({c7:r8}),a8=Ae({halftime:r8}),u8=Xt(OT(X6)),c8=Xt(OT(q6)),d8=Ae({width:Bn(Re,Qn),prefix:$,bw:Qn,bh:Qn,height:Bn(Re,Qn)}),l8=Ae({audio_only:Qn,boundary_details:Bn(Re,Dt(Bn(h8,o8,a8))),error:Qn,tv_rating:u8,max_slice:Qn,thumb_prefix:$,slice_dur:Qn,movie_rating:c8,owner:$,meta:Su,rates:Dt(Qn),thumbs:Dt(d8),poster_url:$,duration:Qn,default_poster_url:$,desc:$,rating_flags:Qn,external_id:$,is_ad:Qn,asset:$}),f8=class{async xyt(t,i,e,s){const n=function(t,i,e){if(h6.bj(i))return[_8(t,i,e)];if(Dt(h6).bj(i))return i.map((i=>_8(t,i,e)));if(o6.bj(i)){return(Gt(i.externalId)?i.externalId:[i.externalId]).map((s=>_8(t,"ext/"+i.userId+"/"+s,e)))}throw new b("Invalid asset id")}(t,i,s),r=n.map((t=>hu((()=>this.Nui(t)),e)));return(await Promise.all(r)).filter(Yt)}async Nui(t){const i=this.NS.SI({lS:Nr.GET,zu:t,fS:Uv.GI}),e=await i,s=await e.zm();return l8.bj(s)||l8.Cj(s,"AssetInfoResponse"),s}constructor(t){this.NS=t}};function _8(t,i,e){return e?t+"/player/assetinfo/"+i+".json?pbs="+e:t+"/player/assetinfo/"+i+".json"}var Vr,g8=class extends yo{fa(){return new w8(this.sd.va)}constructor(t){super("Pci"),this.sd=t}},w8=class extends wn{constructor(t){super("removeasset"),this.asset=t}},A8=class extends yo{fa(){return new v8(this.sd.va)}constructor(t){super("Bci"),this.sd=t}},v8=class extends wn{constructor(t){super("addasset"),this.asset=t}},m8=class extends a0{oui(t,i){let e,s=0;for(const n of t){e=s+n.duration;for(const t of i)s<=t.GT&&t.GT<e&&(e+=t.ct||0);this.ST(n8.Aci(n,s,e)),s=e}}t2t(t){this.Co(new A8(t))}n2t(t){this.Co(new g8(t))}constructor(){super()}},p8=class extends yo{fa(){return new y8(this.bI)}constructor(t){super("Rci"),this.bI=t}},y8=class extends wn{constructor(t){super("preplayresponse"),this.response=t}},M8=class extends yo{fa(){return new T8(this.bI)}constructor(t){super("Uci"),this.bI=t}},T8=class extends wn{constructor(t){super("assetinforesponse"),this.response=t}},N8=class extends Ys{Mui(t){t&&this.Co(new p8(ms(t)))}hui(t){t.forEach((t=>this.Co(new M8(t))))}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){let t;const i=this,e={get ads(){return i.Yai.va},get assets(){return i.Gai.va},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}};return t=new Vh(i,e),e}constructor(t,i,e){super(),this.Yai=t,this.Gai=i,this.Hai=e,e.yn("Dui",this.Ds),e.yn("Iui",this.Ds)}},D8=class{Qci(t,i){const e=new a6(t._O),s=new g6(t._O),n=function(t){if(t.verizonMedia&&Yt(t.verizonMedia.defaultSkipOffset)){const i=t.verizonMedia.defaultSkipOffset;return bd(i)?i:-1}return-1}(i),r=function(t){const i=t.verizonMedia?t.verizonMedia.onSeekOverAd:void 0;return function(t){if(!t)return"play-none";switch(t.toLowerCase()){case"play-all":return"play-all";case"play-none":default:return"play-none";case"play-last":return"play-last"}}(i)}(i),h=new p6(s,t),o=new y6(e,i),a=new s8(t,h,n,r),u=new f8(t._O),c=new m8,d=new N8(a,c,h);return new X5(t,h,o,a,d,u,c)}};Zr((function(t){return class extends t{Wai(t){super.ga(t)}qai(t,i){return super._tt(t,i)}Aui(t){super.Nf(t)}Ef(){var t;return null!=(t=this.Fci.lt)?t:super.Ef()}Lf(){var t;return null!=(t=this.Fci.bf)?t:super.Lf()}Nf(t){this.Fci.Nf(t)}ga(t){this.Fci.ga(t)}_tt(t,i){return this.Fci._tt(t,i)}fa(){const t=this.Fci.va;return xl(super.fa(),{get verizonMedia(){return t}})}gn(){this.Fci.gn(),super.gn()}constructor(t,i){super(t,i),this.Fci=(new D8).Qci(this,i)}}}),lt.S7),function(t){t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error"}(Vr||(Vr={}));var I8=class extends HJ{fa(){return qJ(this)}get _Yt(){return zu.MVt}get GT(){return this.tN}get fUt(){return this.KUt}constructor(t,i,e,s){super(t,i),this.KUt=s,this.tN=e}},S8=class extends ct{get cbt(){return this.Yci}get _Yt(){return zu.MVt}constructor(t,i,e){if(super(i),this.Cqt=t,this.xqt=t,e){const t=new Date(e);dT(t)&&(this.Yci=t)}}},E8=class{Ag(){this.Qo.yn(er.Rw,this.lA),this.Qo.yn(l.Sh,this.lBt),this.Qo.yn(l.jh,this.fBt),this.Qo.yn(l.yw,this.We),this.Qo.yn(l.Jg,this.Mh),this.Qo.yn(l.Sw,this.od),this.Qo.yn(l.Ew,this._Ht),this.Qo.yn("presentationmodechange",this.Gci)}gg(){this.Qo.fn(er.Rw,this.lA),this.Qo.fn(l.Sh,this.lBt),this.Qo.fn(l.jh,this.fBt),this.Qo.fn(l.yw,this.We),this.Qo.fn(l.Jg,this.Mh),this.Qo.fn(l.Sw,this.od),this.Qo.fn(l.Ew,this._Ht),this.Qo.fn("presentationmodechange",this.Gci)}get Vci(){return this.Wci}get P7(){const t=this.Vci;if(!t)return[];const i=[],e=this.Hci();for(const s of t.Oc)e>=s.GT&&this.xoi<=s.GT+s.ct&&i.push(s);return i}Hci(){return this.Qo.Tf()-this.qci}Xci(){if(this.Zci)return;if(this.Qo.Td()!==1/0)return void(0===this.Kci.length&&(this.Zci=this.Jci()));const t=()=>{var t;null==(t=this.$ci)||t.Qd(),this.$ci=void 0,this.Zci=void 0};this.$ci=new na,this.Zci=this.tdi(this.$ci.Hd).catch(this.L4).then(t,t)}async idi(){const t=_.min(1e3*2**this.edi,3e4);try{var i;await ri(t,null==(i=this.$ci)?void 0:i.Hd),this.edi++}catch(t){if(ut(t))return void(this.edi=0)}this.Xci()}async tdi(t){for(;Bo(t),!this.Qo.Ff;){const e=i.Jd()-this.sdi;if(e>1e4)await this.Jci(t),this.sdi=i.Jd(),this.edi=0;else{const i=1e4-e;await ri(i,t)}}}ndi(t){const i=t.cbt;if(i&&this.Qo.vf&&0===this.qci&&!this.rdi&&0!==_.floor(this.Qo.i_().start(0))){const e=(this.Qo.vf.getTime()-i.getTime())/1e3,s=this.Qo.Tf()-t.ibt;this.qci=s-e}}async Jci(t){try{const i=await this.Qo._O.SI({zu:this.hdi}),e=await i.WO(t);if(0===e.avails.length)return void(0!==this.Kci.length&&(this.Kci=[]));if(e.avails.length===this.Kci.length&&e.avails[0].startTimeInSeconds===this.Kci[0].ibt)return void this.ndi(this.Kci[0]);const s=[];for(const t of e.avails){const i=new S8(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const e of t.ads){const t=new I8(i,be.bFt,e.startTimeInSeconds,e.trackingEvents);t.Yqt(e.adId,e.width,e.height,e.durationInSeconds,[],e.skipoffset),i.Pqt(t)}s.push(i),this.ndi(i)}this.Kci=zc(s,((t,i)=>t.ibt-i.ibt))}catch(t){throw Ao(t),new g("Failed to poll MediaTailor tracking events")}}odi(){var t;null==(t=this.$ci)||t.Xd(),this.$ci=void 0,this.Zci=void 0,this.sdi=-1/0}adi(){if(0===this.Kci.length)return;const t=this.Kci[this.Kci.length-1],i=this.Hci();if(t.ibt+t.KGt<this.xoi){var e;this.Wci&&(null==(e=this.Qo.Oc)||e.Co(new Ss(this.Wci)),this.Wci=void 0)}else{for(const t of this.Kci){const e=t.ibt;if(!(e+t.KGt<this.xoi)&&(e<=i&&e+t.KGt>this.xoi)){var s;if(this.Vci===t)return;return this.Wci=t,void(null==(s=this.Qo.Oc)||s.Co(new sc(this.Wci)))}}var n;if(this.Wci)null==(n=this.Qo.Oc)||n.Co(new Ss(this.Wci)),this.Wci=void 0}}udi(){const t=this.P7;if(0===t.length)return;let i=[];for(const e of t){const t=e.fUt.filter((t=>qt(this.cdi,t.eventType)));i=i.concat(t)}for(const t of i)this.ddi(t.startTimeInSeconds)&&(t.eventType===Vr.COMPLETE&&this.ldi(Vr.ENGAGED_VIEW),this.fdi(t))}_di(t,i){return i.fUt.filter((i=>Pi(i.eventType,t)))[0]}ldi(t){const i=this.P7;if(0===i.length)return;const e=this._di(t,i[0]);e&&this.fdi(e)}fdi(t){this.Nni(t.eventType);for(const i of t.beaconUrls){const t={lS:Nr.GET,zu:i,cS:"",fS:Uv.GI};0,D(this.gdi(t))}}Nni(t){let i;const e=this.P7;switch(t){case Vr.START:i=new ta(e[e.length-1],this.Qo.Tf());break;case Vr.COMPLETE:i=new nn(e[0],this.Qo.Tf());break;case Vr.FIRST_QUARTILE:i=new n$(e[0],this.Qo.Tf());break;case Vr.MID_POINT:i=new h$(e[0],this.Qo.Tf());break;case Vr.THIRD_QUARTILE:i=new a$(e[0],this.Qo.Tf())}var s;void 0!==i&&(null==(s=this.Qo.Oc)||s.Co(i))}async gdi(t){const i=await this.Qo._O.SI(t);i.kI}ddi(t){const i=this.Hci();return t>=this.xoi&&t<i}gn(){this.gg(),this.odi(),this.xoi=-1}constructor(t,i,e){this.sdi=-1/0,this.Wci=void 0,this.qci=0,this.Kci=[],this.voi=!1,this.sR=!1,this.xoi=-1,this.$ci=void 0,this.Zci=void 0,this.edi=0,this.lA=()=>{this.Xci()},this.fBt=()=>{this.ldi(Vr.RESUME)},this.lBt=()=>{this.odi(),this.ldi(Vr.PAUSE)},this.We=()=>{this.odi(),this.xoi=-1},this.Mh=()=>{this.odi()},this.od=()=>{-1===this.xoi&&(this.xoi=this.Hci()),this.adi(),this.udi(),this.xoi=this.Hci()},this._Ht=()=>{if(this.voi!==this.Qo.Pf){this.voi=this.Qo.Pf;const t=this.voi?Vr.MUTE:Vr.UNMUTE;this.ldi(t)}},this.Gci=()=>{if(this.sR!==this.Qo.cs()){this.sR=this.Qo.cs();const t=this.sR?Vr.FULL_SCREEN:Vr.EXIT_FULL_SCREEN;this.ldi(t)}},this.L4=t=>{ut(t)||(this.ldi(Vr.ERROR),D(this.idi()))},this.cdi=[Vr.START,Vr.FIRST_QUARTILE,Vr.MID_POINT,Vr.THIRD_QUARTILE,Vr.COMPLETE,Vr.IMPRESSION,Vr.CREATIVE_VIEW],this.Qo=t,this.hdi=i,this.rdi=e,this.Ag()}};Zr((function(t){return class extends t{ga(t){return this.wdi&&(this.wdi.gn(),this.wdi=void 0,this.ANt()),super.ga(t)}async _tt(t,i){if(!t||!function(t){return t.sources.some((t=>t.integration===es.MEDIATAILOR))}(t))return super._tt(t,i);try{const e=await this.Adi(t,i);await super._tt(e,i)}catch(t){this.IP(new $i(Ui.MANIFEST_LOAD_ERROR,t.message,t))}}Nf(t){var i;(null==(i=this.wdi)?void 0:i.Vci)||super.Nf(t)}Ef(){var t;return null!=(t=this.Bz)?t:super.Ef()}Lf(){var t;return null!=(t=this.Rz)?t:super.Lf()}IP(t){this.Bz=De(t),this.Rz=t,this.Co(new Bi(t))}ANt(){this.Bz=void 0,this.Rz=void 0}async Adi(t,i){let e=[];for(const s of t.sources){if(!tw(s)){e.push(s);continue}const t=s;if(!t.src){e.push(s);continue}const n=await this.vdi(t,i);Bo(i);const r=Tt({},t,{integration:void 0,src:n});e.push(r)}const s=ms(t);return s.sources=e,s}async vdi(t,i){const e=t.src||"",s=e.match(/.+?(?=\/v1\/)/);if(!s)throw new g("Could not find MediaTailor session initialization url");const n=s[0],r=Ni(e,"?ads."),h=r?{zu:e,fS:Uv.GI}:{zu:e,lS:Nr.POST,cS:JSON.stringify({adParams:t.adParams}),fS:Uv.GI},o=await hu((()=>this.mdi(h,i)),i);let a;try{if(a=n+o.manifestUrl,!r){const t=n+o.trackingUrl,i=qg(a);this.wdi=new E8(this,t,i)}}catch(t){throw new g("Something went wrong parsing the MediaTailor session initialization response")}return a}async mdi(t,i){try{const e=await this._O.SI(t);return await e.WO(i)}catch(t){throw Ao(t),new g("Failed to initialize MediaTailor session manifest")}}gn(){this.wdi&&(this.wdi.gn(),this.wdi=void 0),this.ANt(),super.gn()}constructor(t,i){super(t,i),this.wdi=void 0,this.Bz=void 0,this.Rz=void 0}}}),lt.L7);export{i as a,Vt as b,Yt as c,Gt as d,Ut as e,Qs as f,ho as g,os as h,oB as i,sh as j,_M as k,AM as l,vM as m,mM as n,pM as o,yc as p,NM as q,DM as r,lB as s,fB as t,Tt as u,Ni as v,Lf as w,zc as x,It as y,Ge as z,Zt as A,To as B,qt as C,No as D,Pl as E,wn as F,Ui as G,nl as H,l as I,Wl as J,xl as K,fl as L,Hl as M,Ws as N,Na as O,pw as P,Zs as Q,hA as R,Ha as S,jo as T,Iv as U,Lv as V,ae as W,Yu as X,lt as Y,Zr as Z,Fj as _,uw as $,ht as aa,fw as ba,Ai as ca,Tc as da,GN as ea,WN as fa,VN as ga,HN as ha,XN as ia,Xr as ja,AD as ka,_r as la,_i as ma,mI as na,NI as oa,EI as pa,bI as qa,Mu as ra,kI as sa,kn as ta,Jx as ua,$x as va,tO as wa,eO as xa,sO as ya,nO as za,DO as Aa,IO as Ba,SO as Ca,EO as Da,nr as Ea,xj as Fa,Oj as Ga,Vj as Ha,uz as Ia,cz as Ja,dz as Ka,lz as La,lR as Ma,fR as Na,_R as Oa,gR as Pa,SQ as Qa,EQ as Ra,zu as Sa,AJ as Ta,SJ as Ua,QJ as Va,xi as Wa,L2 as Xa,M3 as Ya,S3 as Za,T6 as _a};