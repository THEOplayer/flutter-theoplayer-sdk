/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 7.12.0
 Created: 2024-09-05T15:31:25.206Z
 */
var Ui,r,ll,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==s?s:"undefined"!=typeof global?global:this,s=a.window,h=a.document,Nl=a.location,Dl=a.navigator,u=a.setTimeout,c=a.clearTimeout,v=a.setInterval,m=a.clearInterval,g=a.Error,b=a.TypeError,w=(a.SyntaxError,a.Object),_=a.Math,x=a.parseInt,C=a.parseFloat,S=a.isNaN,j=a.Uint8Array,Il=a.Worker,El=(a.WorkerGlobalScope,a.XMLHttpRequest),Ll=w.create,Ol=w.defineProperty,zl=w.getOwnPropertyDescriptor,Pl=w.getOwnPropertyNames,Bl=w.getPrototypeOf,Rl=w.prototype.hasOwnProperty,so=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),qr=(t,i,e)=>(e=null!=t?Ll(Bl(t)):{},((t,i,e,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let n of Pl(i))Rl.call(t,n)||n===e||Ol(t,n,{get:()=>i[n],enumerable:!(s=zl(i,n))||s.enumerable});return t})(!i&&t&&t.__esModule?e:Ol(e,"default",{value:t,enumerable:!0}),t)),Ul=so(((t,i)=>{i.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Ql=so(((t,i)=>{i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=e+e,o=s+s,a=n+n,u=e*h,c=s*h,l=s*o,d=n*h,f=n*o,_=n*a,g=r*h,w=r*o,A=r*a;return t[0]=1-l-_,t[1]=c+A,t[2]=d-w,t[3]=0,t[4]=c-A,t[5]=1-u-_,t[6]=f+g,t[7]=0,t[8]=d+w,t[9]=f-g,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Fl=so(((t,i)=>{i.exports=function(t,i,e){var s,n,r,h=e[0],o=e[1],a=e[2],u=_.sqrt(h*h+o*o+a*a);if(_.abs(u)<1e-6)return null;return h*=u=1/u,o*=u,a*=u,s=_.sin(i),n=_.cos(i),r=1-n,t[0]=h*h*r+n,t[1]=o*h*r+a*s,t[2]=a*h*r-o*s,t[3]=0,t[4]=h*o*r-a*s,t[5]=o*o*r+n,t[6]=a*o*r+h*s,t[7]=0,t[8]=h*a*r+o*s,t[9]=o*a*r-h*s,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Yl=so(((t,i)=>{i.exports=function(t,i){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}})),Gl=so(((t,i)=>{i.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Vl=so(((t,i)=>{i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=i[4],o=i[5],a=i[6],u=i[7],c=i[8],l=i[9],d=i[10],f=i[11],_=i[12],g=i[13],w=i[14],A=i[15],v=e*o-s*h,m=e*a-n*h,p=e*u-r*h,y=s*a-n*o,M=s*u-r*o,T=n*u-r*a,N=c*g-l*_,D=c*w-d*_,I=c*A-f*_,S=l*w-d*g,E=l*A-f*g,b=d*A-f*w,L=v*b-m*E+p*S+y*I-M*D+T*N;if(!L)return null;return L=1/L,t[0]=(o*b-a*E+u*S)*L,t[1]=(n*E-s*b-r*S)*L,t[2]=(g*T-w*M+A*y)*L,t[3]=(d*M-l*T-f*y)*L,t[4]=(a*I-h*b-u*D)*L,t[5]=(e*b-n*I+r*D)*L,t[6]=(w*p-_*T-A*m)*L,t[7]=(c*T-d*p+f*m)*L,t[8]=(h*E-o*I+u*N)*L,t[9]=(s*I-e*E-r*N)*L,t[10]=(_*M-g*p+A*v)*L,t[11]=(l*p-c*M-f*v)*L,t[12]=(o*D-h*S-a*N)*L,t[13]=(e*S-s*D+n*N)*L,t[14]=(g*m-_*y-w*v)*L,t[15]=(c*y-l*m+d*v)*L,t}})),Wl=so(((t,i)=>{i.exports=function(t,i,e){var s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],_=i[11],g=i[12],w=i[13],A=i[14],v=i[15],m=e[0],p=e[1],y=e[2],M=e[3];return t[0]=m*s+p*o+y*l+M*g,t[1]=m*n+p*a+y*d+M*w,t[2]=m*r+p*u+y*f+M*A,t[3]=m*h+p*c+y*_+M*v,m=e[4],p=e[5],y=e[6],M=e[7],t[4]=m*s+p*o+y*l+M*g,t[5]=m*n+p*a+y*d+M*w,t[6]=m*r+p*u+y*f+M*A,t[7]=m*h+p*c+y*_+M*v,m=e[8],p=e[9],y=e[10],M=e[11],t[8]=m*s+p*o+y*l+M*g,t[9]=m*n+p*a+y*d+M*w,t[10]=m*r+p*u+y*f+M*A,t[11]=m*h+p*c+y*_+M*v,m=e[12],p=e[13],y=e[14],M=e[15],t[12]=m*s+p*o+y*l+M*g,t[13]=m*n+p*a+y*d+M*w,t[14]=m*r+p*u+y*f+M*A,t[15]=m*h+p*c+y*_+M*v,t}})),Hl=so(((t,i)=>{i.exports=function(t,i,e,s,n){var r=1/_.tan(i/2),h=1/(s-n);return t[0]=r/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+s)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*s*h,t[15]=0,t}})),ql=so(((t,i)=>{i.exports=function(t,i,e,s){var n,r,h,o,a,u,c,l,d,f,g,w,A,v,m,p,y,M,T,N,D,I,S,E,b=s[0],L=s[1],k=s[2],C=_.sqrt(b*b+L*L+k*k);if(_.abs(C)<1e-6)return null;b*=C=1/C,L*=C,k*=C,n=_.sin(e),r=_.cos(e),h=1-r,o=i[0],a=i[1],u=i[2],c=i[3],l=i[4],d=i[5],f=i[6],g=i[7],w=i[8],A=i[9],v=i[10],m=i[11],p=b*b*h+r,y=L*b*h+k*n,M=k*b*h-L*n,T=b*L*h-k*n,N=L*L*h+r,D=k*L*h+b*n,I=b*k*h+L*n,S=L*k*h-b*n,E=k*k*h+r,t[0]=o*p+l*y+w*M,t[1]=a*p+d*y+A*M,t[2]=u*p+f*y+v*M,t[3]=c*p+g*y+m*M,t[4]=o*T+l*N+w*D,t[5]=a*T+d*N+A*D,t[6]=u*T+f*N+v*D,t[7]=c*T+g*N+m*D,t[8]=o*I+l*S+w*E,t[9]=a*I+d*S+A*E,t[10]=u*I+f*S+v*E,t[11]=c*I+g*S+m*E,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]);return t}})),Xl=so(((t,i)=>{i.exports=function(t,i,e){var s,n,r,h,o,a,u,c,l,d,f,_,g=e[0],w=e[1],A=e[2];i===t?(t[12]=i[0]*g+i[4]*w+i[8]*A+i[12],t[13]=i[1]*g+i[5]*w+i[9]*A+i[13],t[14]=i[2]*g+i[6]*w+i[10]*A+i[14],t[15]=i[3]*g+i[7]*w+i[11]*A+i[15]):(s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],_=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=_,t[12]=s*g+o*w+l*A+i[12],t[13]=n*g+a*w+d*A+i[13],t[14]=r*g+u*w+f*A+i[14],t[15]=h*g+c*w+_*A+i[15]);return t}}));function qc(t,i){return Kl(t.slice(),i)}function Zl(t,i){const e=Kl(t,i);return e!==t&&Jl(e,void 0,t.length,t),t}function Kl(t,i){let e=t;const s=e.length;if(s<=1)return e;let n=new Array(s);for(let t=1;t<s;t*=2){Jl(e,i,t,n);const s=e;e=n,n=s}return e}function Jl(t,i,e,s){const n=t.length;let r=0;const h=2*e;let o,a,u,c,l;for(a=0;a<n;a+=h)for(u=a+e,o=u+e,u>n&&(u=n),o>n&&(o=n),c=a,l=u;;)if(c<u&&l<o)i&&i(t[c],t[l])<=0?s[r++]=t[c++]:s[r++]=t[l++];else if(c<u)s[r++]=t[c++];else{if(!(l<o))break;s[r++]=t[l++]}}(r=Ui||(Ui={}))[r.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",r[r.LICENSE_ERROR=2e3]="LICENSE_ERROR",r[r.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",r[r.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",r[r.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",r[r.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",r[r.SOURCE_INVALID=3e3]="SOURCE_INVALID",r[r.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",r[r.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",r[r.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",r[r.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",r[r.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",r[r.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",r[r.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",r[r.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",r[r.MEDIA_ABORTED=5004]="MEDIA_ABORTED",r[r.NETWORK_ERROR=6e3]="NETWORK_ERROR",r[r.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",r[r.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",r[r.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",r[r.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",r[r.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",r[r.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",r[r.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",r[r.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",r[r.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",r[r.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",r[r.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",r[r.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",r[r.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",r[r.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",r[r.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",r[r.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",r[r.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",r[r.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",r[r.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",r[r.AD_ERROR=1e4]="AD_ERROR",r[r.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",r[r.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",r[r.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",r[r.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",r[r.THEO_LIVE_UNKNOWN_ERROR=13e3]="THEO_LIVE_UNKNOWN_ERROR",r[r.THEO_LIVE_CHANNEL_NOT_FOUND=13001]="THEO_LIVE_CHANNEL_NOT_FOUND",r[r.THEO_LIVE_END_OF_DEMO=13002]="THEO_LIVE_END_OF_DEMO",r[r.THEO_LIVE_ANALYTICS_ERROR=13003]="THEO_LIVE_ANALYTICS_ERROR",function(t){t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE",t[t.THEOLIVE=13]="THEOLIVE"}(ll||(ll={})),function(t){t.fromCode=function(i){const e=_.floor(i/1e3);if(e in t)return e;throw new b("Invalid error code: "+i)}}(ll||(ll={}));var J={}.hasOwnProperty,mo={}.toString;function Yt(t){return null!=t}function Qo(t){return void 0===t}var Gt=Array.isArray||function(t){return"[object Array]"===mo.call(t)};function We(t){return $l(t)&&J.call(t,"length")&&ed(t.length)}function $l(t){return"object"==typeof t&&null!==t}function Ic(t){return $l(t)&&t.constructor&&t.constructor===w}function Qs(t){return"string"==typeof t}function td(t){return"boolean"==typeof t}function Ka(t){return Yt(t)&&"function"==typeof t.then}function id(t){return"[object Date]"===mo.call(t)}function ed(t){return"number"==typeof t}function sd(t){return"function"==typeof t}function ho(t){return sd(t)||$l(t)}var Va,vu=9007199254740991,nd=2**-52;function ks(t,i,e){return _.min(_.max(t,i),e)}function ku(t,i,e){return t===i||_.abs(t-i)<=e}function rd(t,i){if(t===i)return!0;const e=_.abs(t-i);if(e<nd)return!0;return e<_.max(_.abs(t),_.abs(i))*nd}function vl(t,i){return t%i+(t<0?i:0)}function hd(t){return t!=t}function od(t,i){return t===i||hd(t)&&hd(i)}function ad(t,i){let e=t,s=i;for(;0!==s;){const t=e%s;e=s,s=t}return e<0?-e:e}function xo(t,i){return t.reduce(((t,e)=>t+i(e)),0)}!function(t){t[t.Zr=0]="Zr",t[t.ul=1]="ul",t[t.hd=-1]="hd"}(Va||(Va={}));var ra=(t,i)=>(0|t)-(0|i),Ee=(t,i)=>t===i?0:t<i?-1:t>i?1:S(t)?S(i)?0:1:-1;function Oo(t,i,e){return ku(t,i,e)?0:Ee(t,i)}var ud=(t,i)=>rd(t,i)?0:Ee(t,i);var cd="function"==typeof Array.prototype.find?(t,i)=>t.find(i):(t,i)=>{const e=uu(t,i);return-1===e?void 0:t[e]},Po=cd,ld="function"==typeof Array.prototype.findLast?(t,i)=>t.findLast(i):(t,i)=>{const e=fd(t,i);return-1===e?void 0:t[e]},dd=ld,uu="function"==typeof Array.prototype.findIndex?(t,i)=>t.findIndex(i):(t,i)=>{for(let e=0;e<t.length;e+=1){if(i(t[e],e,t))return e}return-1},fd="function"==typeof Array.prototype.findLastIndex?(t,i)=>t.findLastIndex(i):(t,i)=>{for(let e=t.length-1;e>=0;e-=1){if(i(t[e],e,t))return e}return-1};function To(t,i){const e=t.indexOf(i);return-1!==e&&(ja(t,e),!0)}function ja(t,i){0===i?t.shift():t.splice(i,1)}function _d(t,i){const e=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===i){n++,e.length-=1;break}e[s++]=t[n++]}for(;n<t.length;)e[s++]=t[n++];return e}function gd(t,i){return-1!==t.indexOf(i)}function wd(t,i,e){if(t===i)return!0;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s+=1)if(!e(t[s],i[s]))return!1;return!0}function No(t){t.length=0}function Ad(t,i){if(t.length!==i.length)return!1;for(const e of t)if(!gd(i,e))return!1;return!0}Array.prototype.flat;var rs="function"==typeof Array.prototype.flatMap?(t,i)=>t.flatMap(i):(t,i)=>{const e=[];for(let s=0;s<t.length;s++)e.push(...i(t[s],s));return e};function $o(t,i){return md(t,((t,e)=>Ee(i(t),i(e))))}function vd(t,i){return pd(t,((t,e)=>Ee(i(t),i(e))))}function md(t,i){if(0!==t.length)return t.reduce(((t,e)=>i(t,e)<=0?t:e))}function pd(t,i){return md(t,((t,e)=>i(e,t)))}function Do(t){return t.filter(((i,e)=>t.indexOf(i)===e))}function yd(t,i){return Promise.all(t.map(i)).then((i=>t.filter(((t,e)=>i[e]))))}function Md(t,i,e){if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(!e(t[s],i[s]))return!1;return!0}function ul(){const t=w.create(null);return t.Nd=void 0,delete t.Nd,t}function Eo(){return new Id}function si(){return new Sd}function Td(t){const i=Eo();for(const e in t)J.call(t,e)&&i.set(e,t[e]);return i}function Nd(t){const i=[];return t.forEach((t=>i.push(t))),i}var Dd="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,Id=Dd||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,i){this.index=0,this.data=t,this.selector=i,this.keys=w.keys(t)}}return class{get(t){return this.data[t]}set(t,i){return this.has(t)||this.size++,this.data[t]=i,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=ul(),this.size=0}keys(){return new t(this.data,((t,i)=>i))}values(){return new t(this.data,((t,i)=>t[i]))}entries(){return new t(this.data,((t,i)=>[i,t[i]]))}forEach(t){for(const i in this.data)t(this.data[i],i)}constructor(){this.data=ul(),this.size=0}}}();var Sd=Dd||function(){class t{next(){const t=this.Dd.next();return t.done?t:{value:this.Id(t.value),done:!1}}constructor(t,i){this.Dd=t,this.Id=i}}return class{get size(){return this.Ld.size}get(t){return this.Ld.get(""+t)}set(t,i){return this.Ld.set(""+t,i),this}has(t){return this.Ld.has(""+t)}delete(t){return this.Ld.delete(""+t)}clear(){this.Ld.clear()}keys(){return new t(this.Ld.keys(),(t=>Number(t)))}values(){return this.Ld.values()}entries(){return new t(this.Ld.entries(),(t=>{let[i,e]=t;return[Number(i),e]}))}forEach(t){this.Ld.forEach(((i,e)=>{t(i,Number(e))}))}constructor(){this.Ld=Eo()}}}();var So=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];g.apply(this,i)};(So.prototype=w.create(g.prototype)).constructor=So;var i,hs=class extends So{get name(){return"BaseError"}constructor(t,i){super(),this.message=t||"Unknown error",this.cause=i,g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}},Ed=class{Od(){if(!this.zd&&!this.Bd){this.zd=!0;for(const t of this.Rd.slice())t();this.Ud()}}Ud(){if(!this.Bd){this.Bd=!0;for(const t of this.Qd.slice())t();No(this.Rd),No(this.Qd)}}Fd(t){this.Bd||this.Rd.push(t)}Yd(t){this.Bd||To(this.Rd,t)}Gd(t){this.Bd||this.Qd.push(t)}Vd(t){this.Bd||To(this.Qd,t)}constructor(){this.zd=!1,this.Bd=!1,this.Rd=[],this.Qd=[]}},na=class t{get Wd(){return this.Hd}qd(){this.Hd.Od()}Ud(){this.Hd.Ud()}Xd(t){const i=this.Hd;if(i.zd)return;if(t.zd)return void i.Od();if(i.Bd||t.Bd)return;const e=()=>{s(),i.Od()},s=()=>{t.Yd(e),t.Vd(s),i.Yd(e),i.Vd(s)};t.Fd(e),t.Gd(s),i.Fd(e),i.Gd(s)}Zd(){const i=new t,e=new t,s=i.Wd,n=e.Wd,r=this.Hd,h=()=>{s.zd&&n.Bd||n.zd&&s.Bd?r.Od():s.Bd&&n.Bd&&r.Ud()};s.Fd(h),n.Fd(h),s.Gd(h),n.Gd(h),i.Xd(r),e.Xd(r);return r.Gd((()=>{s.Yd(h),n.Yd(h),s.Vd(h),n.Vd(h)})),[i,e]}constructor(){this.Hd=new Ed}};var qt=()=>{},bd=t=>t;function uo(t,e){let s=-1/0;return function(){for(var n=arguments.length,r=new Array(n),h=0;h<n;h++)r[h]=arguments[h];const o=i.Kd();o-s>=e&&(t.apply(this,r),s=o)}}function Ld(t,e){let s=0;return function(){for(var n=arguments.length,r=new Array(n),h=0;h<n;h++)r[h]=arguments[h];const o=this;0!==s&&i.Jd(s),s=i.$d((()=>{s=0,t.apply(o,r)}),e)}}function Zc(t){let i;return()=>(void 0!==t&&(i=t(),t=void 0),i)}var pe=class extends hs{get name(){return"AbortError"}constructor(t,i){super(t||"Aborted",i)}};function Ho(t){return t instanceof g&&"AbortError"===t.name}function Bo(t){if(t&&t.zd)throw new pe}function Ao(t){if(Ho(t))throw t}function Bc(t){if(!Ho(t))throw t}function Nr(t,i){return i?new Promise(((e,s)=>{if(i.zd)return t.catch(qt),s(new pe);const n=()=>{i.Yd(n),s(new pe)};i.Fd(n),t.then((t=>{i.Yd(n),e(t)}),(t=>{i.Yd(n),s(t)}))})):t}function rn(t,i){return t.then((t=>(i.qd(),t)),(t=>{throw i.qd(),t}))}function Na(t,i){const e=new na;return i&&e.Xd(i),rn(t(e.Wd),e)}var kd=Promise.resolve(),Hu="function"==typeof queueMicrotask?queueMicrotask:t=>{kd.then(t)};function D(t){t.then(qt,qt)}async function Xc(t){try{return await Promise.all(t)}catch(i){throw await Promise.all(t.map((t=>t.catch(qt)))),i}}function lt(t,e){return new Promise(((s,n)=>{if(void 0!==e&&e.zd)return void n(new pe);const r=i.$d((()=>{void 0!==e&&e.Yd(h),s()}),t),h=()=>{i.Jd(r),n(new pe)};void 0!==e&&e.Fd(h)}))}function Cd(t,i,e){if("function"==typeof e)e.call(t,i);else for(const s of e)s.call(t,i)}var yt,xd=class{yn(t,i){if("function"==typeof i)if("string"==typeof t)this.tf(t,i);else for(const e of t)this.tf(e,i)}tf(t,i){const e=this.if[t];void 0===e?this.if[t]=i:"function"==typeof e?this.if[t]=[e,i]:0===this.ef?e.push(i):this.if[t]=e.concat(i)}sf(t){if("function"!=typeof t)return;const i=this.nf;void 0===i?this.nf=t:"function"==typeof i?this.nf=[i,t]:0===this.ef?i.push(t):this.nf=i.concat(t)}Vo(){this.if=ul(),this.nf=void 0}Co(t){this.ef++;const i=this.if[t.type],e=this.nf;void 0!==i&&Cd(this.rf,t,i),void 0!==e&&Cd(this.rf,t,e),this.ef--}fn(t,i){if("function"==typeof i)if("string"==typeof t)this.hf(t,i);else for(const e of t)this.hf(e,i)}hf(t,i){const e=this.if[t];void 0!==e&&("function"==typeof e?e===i&&(this.if[t]=void 0):0===this.ef?To(e,i):this.if[t]=_d(e,i))}uf(t){if("string"==typeof t)this.if[t]=void 0;else for(const i of t)this.if[i]=void 0}cf(t){const i=this.nf;void 0!==i&&("function"==typeof i?i===t&&(this.nf=void 0):0===this.ef?To(i,t):this.nf=_d(i,t))}lf(t,i){return new Promise(((e,s)=>{if(i&&i.zd)return s(new pe);const n=t=>{h(),e(t)},r=()=>{h(),s(new pe)},h=()=>{this.fn(t,n),i&&i.Yd(r)};this.yn(t,n),i&&i.Fd(r)}))}constructor(t){this.if=ul(),this.nf=void 0,this.ef=0,this.Ds=t=>{this.Co(t)},this.rf=null!=t?t:this}},rt=class extends xd{Co(t){Hu((()=>{super.Co(t)}))}},Mo=class extends xd{sf(t){super.sf(t)}cf(t){super.cf(t)}},Od=class extends Mo{},jd=class extends Mo{get ht(){return this.df()}df(){return this._f.ht}gf(){return this._f.gf()}get wf(){return this.Af()}Af(){return this._f.wf}get vf(){return this.mf()}set vf(t){this.pf(t)}mf(){return this._f.vf}pf(t){this._f.vf=t}get bt(){return this.yf()}yf(){return this._f.bt}get Mf(){return this.Tf()}set Mf(t){this.Nf(t)}Tf(){return this._f.Mf}Nf(t){this._f.Mf=t}get ct(){return this.Td()}Td(){return this._f.ct}get we(){return this.Df()}Df(){return this._f.we}get If(){return this.Sf()}Sf(){return this._f.If}get lt(){return this.Ef()}get bf(){return this.Lf()}Ef(){return this._f.lt}Lf(){return this._f.bf}get kf(){return this.Cf()}Cf(){return this._f.kf}get xf(){return this.Of()}Of(){return this._f.xf}get jf(){return this.zf()}zf(){return this._f.jf}get Pf(){return this.Bf()}set Pf(t){this.Rf(t)}Bf(){return this._f.Pf}Rf(t){this._f.Pf=t}get Uf(){return this.Qf()}Qf(){return this._f.Uf}get Ff(){return this.Yf()}Yf(){return this._f.Ff}get Gf(){return this.Vf()}set Gf(t){this.Wf(t)}Vf(){return this._f.Gf}Wf(t){this._f.Gf=t}get Hf(){return this.qf()}qf(){return this._f.Hf}get Xf(){return this.Zf()}set Xf(t){this.Kf(t)}Zf(){return this._f.Xf}Kf(t){this._f.Xf=t}get Jf(){return this.$f()}$f(){return this._f.Jf}get t_(){return this.i_()}i_(){return this._f.t_}get e_(){return this.s_()}s_(){return this._f.e_}Wa(){return this._f.Wa()}ga(t,i){return this._f.ga(t,i)}get nt(){return this.n_()}n_(){return this._f.nt}get r_(){return this.h_()}h_(){return this._f.r_}get rt(){return this.o_()}o_(){return this._f.rt}get a_(){return this.u_()}u_(){return this._f.a_}get c_(){return this.l_()}set c_(t){this.d_(t)}get f_(){return this.__()}__(){return this._f.f_}l_(){return this._f.c_}d_(t){this._f.c_=t}get g_(){return this._f.g_}set g_(t){this._f.g_=t}w_(){return this._f.w_()}A_(){return this._f.A_()}ur(t){this._f.ur(t)}ar(){this._f.ar()}be(){this._f.be()}v_(){this._f.v_()}m_(){this._f.m_()}p_(){this._f.p_()}ge(){this._f.ge()}y_(){return this._f.y_()}M_(){return this._f.M_()}T_(){this._f.T_()}N_(){this._f.N_()}tr(){return this._f.tr()}D_(){this._f.D_()}I_(){this._f.I_()}S_(t){return this._f.S_(t)}E_(t){return!1}async gn(){this.Vo(),await this._f.gn()}constructor(t){super(),this.b_=t=>{this.E_(t)||this.Co(t)},this._f=t,t.sf(this.b_)}};!function(t){t.L_="k_",t.C_="x_"}(yt||(yt={}));var wn=class{constructor(t,i=new Date){this.type=t,this.date=i}},yo=class extends wn{get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}constructor(t,i){super(t,i),this.Xa=void 0}};function zd(t){return Boolean(t&&t.va)}var qo,Ih=class extends yo{constructor(t){super(t)}},ko=class extends wn{constructor(t){super(t)}},Pd=class extends Ih{fa(){return new Bd(this.Lt.va)}constructor(t){super(yt.L_),this.Lt=t}},Bd=class extends ko{constructor(t){super("addtrack"),this.track=t}},Rd=class extends Ih{fa(){return new Ud(this.Lt.va)}constructor(t){super(yt.C_),this.Lt=t}},Ud=class extends ko{constructor(t){super("removetrack"),this.track=t}};!function(t){t.O_="j_",t.z_="P_",t.B_="R_",t.U_="Q_",t.F_="Y_",t.G_="V_",t.ra="W_",t.H_="q_",t.X_="Z_",t.K_="Yn",t.J_="eg",t.rg="hg",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality"}(qo||(qo={}));var Fi=class extends xd{get og(){return this.ag}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}get U(){return this.ag.length}cg(t){return this.ag[t]}tt(t){return!(!t||gd(this.ag,t))&&(this.ag.push(t),this.Xa&&this.Xa.push(t.va),t.yn(qo.ra,this.Ds),this.Co(new Pd(t)),!0)}it(t){if(!t)return!1;const i=this.ag.indexOf(t);return!(i<0)&&(ja(this.ag,i),this.Xa&&ja(this.Xa,i),t.fn(qo.ra,this.Ds),this.Co(new Rd(t)),!0)}dg(t){return gd(this.ag,t)}tr(){const t=this.ag;for(let i=t.length-1;i>=0;i-=1)this.it(t[i])}gn(){this.tr(),this.Vo()}constructor(){super(),this.ag=[],this.Xa=void 0}},no=class extends Ih{fa(){return new Qd(this.Lt.va)}constructor(t){super(qo.ra),this.Lt=t}},Qd=class extends ko{constructor(t){super("change"),this.track=t}},Wo=class extends Fi{get fg(){return this._g}set fg(t){const i=this._g;if(t!==i){if(i){this.gg(i);for(const e of i.og)t&&t.dg(e)||this.it(e)}if(this._g=t,t){const i=[];for(const e of t.og)this.tt(e),this.wg(e)&&i.push(e);this.Ag(t);for(const t of i)t.Co(new no(t))}}}Ag(t){t.yn(yt.L_,this.vg),t.yn(yt.C_,this.pg)}gg(t){t.fn(yt.L_,this.vg),t.fn(yt.C_,this.pg)}gn(t){!t&&this._g&&this._g.gn(),super.gn()}constructor(){super(),this._g=void 0,this.vg=t=>{const i=t.Lt;this.tt(i)},this.pg=t=>{const i=t.Lt;this.it(i)}}},Fd=w.freeze||bd;function zo(t,i,e){w.defineProperty(t,i,{writable:!1,enumerable:!0,value:e})}function Yd(t){return Fd(t)}function N(t,i){for(const e of w.getOwnPropertyNames(i))w.defineProperty(t,e,w.getOwnPropertyDescriptor(i,e));return t}function Oi(t){if(Ic(t)){const i={};for(const e in t)J.call(t,e)&&(i[e]=Oi(t[e]));return i}if(Gt(t)){const i=new Array(t.length);for(let e=0;e<i.length;e++)e in t&&(i[e]=Oi(t[e]));return i}return t}function Gd(t,i){const e=i;for(const i in t){var s,n;if(Ic(t[i]))(s=e)[n=i]||(s[n]={}),Gd(t[i],e[i]);else J.call(e,i)||(e[i]=t[i])}return e}function Th(t,i){return t===i||!(!t||!i)&&(!(!$l(t)||!$l(i))&&(We(t)?!!We(i)&&function(t,i){const e=t.length,s=i.length;if(e!==s)return!1;for(let s=0;s<e;s+=1)if(!Th(t[s],i[s]))return!1;return!0}(t,i):!We(i)&&function(t,i){const e=w.keys(t),s=w.keys(i);if(!e||!s||e.length!==s.length)return!1;for(const s of e)if(!J.call(i,s)||!Th(t[s],i[s]))return!1;return!0}(t,i)))}function Vd(t,i){if(!$l(t))return!1;for(const e of i)if(!(e in t))return!1;return!0}function Wd(t,i){return t.constructor===i.constructor}function Hd(t){const i={};for(const e of w.keys(t)){const s=t[e];null!=s&&(i[e]=s)}return i}function qd(t){const i={};for(const e of w.keys(t)){const s=t[e];if(We(s)){const t=[];for(let i=0;i<s.length;i+=1){const e=s[i];if(null!=e){const i=$l(e)?qd(e):e;t.push(i)}}i[e]=t}else null!=s&&(i[e]=$l(s)?qd(s):s)}return i}function ln(t){let i=t;if("string"==typeof i){if(i=i.toLowerCase(),"true"===i)return!0;if("false"===i)return!1}return Boolean(i)}function pu(t){return Yt(t)?ln(t):void 0}function Mh(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function Xd(t){const i=Mh(t);if(S(i))throw new g("Expected a valid number.");return i}function gi(t){return"string"==typeof t?t:""}function Zd(t,i){if(!We(t))return[];const e=0|t.length,s=new Array(e);for(let n=0;n<e;n++)s[n]=i(t[n]);return s}function zs(t,i){let e;return e=We(t)?Zd(t,i):i(t),e}var Ku,Kd=[yt.L_,yt.C_,qo.ra];function Jd(t){let i;const e=t.og.map((t=>t.va));return e.item=i=>{const e=0|i,s=t.cg(e);return s&&s.va||void 0},e.addEventListener=(t,e)=>{i.yn(t,e)},e.removeEventListener=(t,e)=>{i.fn(t,e)},i=new rt(e),t.yn(Kd,(t=>i.Co(t.va))),e}function $d(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function tf(){}function Pi(t){const i=[qo.K_,qo.ra,qo.J_,qo.rg,qo.QUALITY_UNAVAILABLE];let e;const s={get activeQuality(){return t.yg&&t.yg.va},get enabled(){return t.Rt},set enabled(i){t.Rt=ln(i)},get id(){return t.o},get uid(){return t.Mg},get kind(){return t.zt},get label(){return t.kh},set label(i){t.kh=gi(i)},get accessibility(){var i,e;return null!=(e=null==(i=t.Tg)?void 0:i.map($d))?e:[]},get language(){return t.gs},get qualities(){return t.Ng.va},set targetQuality(i){let e;e=i?function(t,i){const e=[];for(const s of t.Ng.og)for(const t of i)s.va===t&&e.push(s);return e}(t,Gt(i)?i:[i]):[],e.length>0?t.Dg=e:t.Dg=void 0},get targetQuality(){if(t.Dg)return 1===t.Dg.length?t.Dg[0].va:t.Dg.map((t=>t.va))},addEventListener(t,i){const s=zs(t,gi);e.yn(s,i)},removeEventListener(t,i){const s=zs(t,gi);e.fn(s,i)}};return e=new rt(s),t.yn(i,(t=>e.Co(t.va))),w.defineProperty(s,"constructor",{value:tf}),s}function ef(){}function sf(t){const i=Jd(t);return w.defineProperty(i,"constructor",{value:ef}),i}!function(t){t[t.Ig=0]="Ig",t[t.Sg=1]="Sg",t[t.Eg=2]="Eg",t[t.Lg=3]="Lg",t[t.Cg=4]="Cg",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.xg=7]="xg"}(Ku||(Ku={}));var Ha,ut,Ms=class extends Wo{fa(){return sf(this)}wg(t){return t.Rt}};function qs(t){if("string"==typeof t){const i=t.toLowerCase();switch(i){case"disabled":case"hidden":case"showing":return i}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}function nf(){}function ua(t){const i=[qo.ra,qo.K_,qo.O_,qo.z_,qo.U_,qo.F_,qo.B_,qo.G_,qo.H_,qo.X_],e=[ut.ha];let s;const n={get kind(){return t.zt},get label(){return t.kh},set label(i){t.kh=gi(i)},get language(){return t.gs},get id(){return t.o},get uid(){return t.Mg},get inBandMetadataTrackDispatchType(){return t.Og},get mode(){return t.jg},set mode(i){i!==Ha.Jn&&i!==Ha.zg&&i!==Ha.Ch||t.Pg(i)},get forced(){return Boolean(t.Bg)},get accessibility(){var i,e;return null!=(e=null==(i=t.Tg)?void 0:i.map($d))?e:[]},get type(){return t.Rg},get readyState(){return t.Jf},get cues(){return t.jg===Ha.Ch?null:t.L.va},get activeCues(){return t.jg===Ha.Ch?null:t.q.va},get src(){return t.Ug||""},addEventListener(t,i){const e=zs(t,gi);s.yn(e,i)},removeEventListener(t,i){const e=zs(t,gi);s.fn(e,i)}};return s=new rt(t),t.yn(i,(t=>s.Co(t.va))),t.yn(e,(t=>s.Co(t))),w.defineProperty(n,"constructor",{value:nf}),n}function rf(){}function _o(t){const i=Jd(t);return w.defineProperty(i,"constructor",{value:rf}),i}!function(t){t.Ch="disabled",t.zg="hidden",t.Jn="showing"}(Ha||(Ha={})),(ut||(ut={})).ha="error";var l,he,yc=class extends Wo{fa(){return _o(this)}wg(t){return t.jg===Ha.Jn}};!function(t){t.Qg="Fg",t.Yg="Gg",t.Vg="contentprotectionerror",t.Wg="contentprotectionsuccess",t.Hg="currentsourcechange",t.qg="destroy",t.Xg="durationchange",t.Zg="emptied",t.Kg="encrypted",t.Jg="ended",t.$g="iw",t.ew="nw",t.hw="ow",t.aw="uw",t.cw="loadstart",t.lw="manifestupdate",t.dw="nosupportedrepresentationfound",t.fw="offline",t._w="online",t.Sh="pause",t.jh="play",t.gw="progress",t.ww="ratechange",t.Aw="representationchange",t.mw="resize",t.pw="seeked",t.yw="seeking",t.Mw="segmentnotfound",t.Tw="Nw",t.Dw="Iw",t.lo="sourcechange",t.Sw="timeupdate",t.Ew="volumechange",t.Lw="Cw",t.xw="metricschange"}(l||(l={})),function(t){t.Ow="canplay",t.jw="canplaythrough",t.zw="loadeddata",t.Pw="loadedmetadata",t.H_="readystatechange",t.Bw="waiting",t.Rw="playing"}(he||(he={}));var hf,fn=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"],of=.92,Da=1.08,af=.25;!function(t){t[t.Ch=0]="Ch",t[t.Uw=1]="Uw",t[t.Qw=2]="Qw"}(hf||(hf={}));var uf=class extends xd{Fw(){this.Yw(),this.Gw=i.$d((()=>this.Vw()),500)}Yw(){void 0!==this.Gw&&(i.Jd(this.Gw),this.Gw=void 0)}get Ww(){return this.Le&&0!==this.ja}get Hw(){return this.qw}get Xw(){return this.Zw}set Xw(t){this.Zw=t,this.Kw()}get Rt(){return this.Le}set Rt(t){this.Le=t,t?this.Cn():this.y_()}Jw(t){this.$w.push(t),this.Kw()}tA(t){To(this.$w,t),this.Kw()}Kw(){this.qw=this.iA(),1===this.ja&&this.Vw()}Cn(){this.Le&&this.eA&&(1!==this.ja&&this.sA.yn(l.Sw,this.Vw),this.Fw(),this.ja=1)}y_(){this.nA(),this.ja=0}m_(){this.nA(),this.ja=2}Ud(){this.y_(),this.ja=0,this.Qo.fn(he.Bw,this.rA),this.Vo()}nA(){1===this.ja&&(this.Yw(),this.sA.fn(l.Sw,this.Vw),this.hA(1))}hA(t){this.canChangePlaybackRate()&&this.Qo.Gf!==t&&(this.Qo.Gf=t)}iA(){const t=this.oA+this.getMinimumLatencyMargin();var i;const e=[null!=(i=this.Zw)?i:this.aA,...this.$w],s=e.reduce(((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.minimumOffset)?e:0)}),t),n=e.reduce(((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.targetOffset)?e:0)}),s+af),r=e.reduce(((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.maximumOffset)?e:0)}),n+af);return{minimumOffset:s,targetOffset:n,maximumOffset:r,forceSeekOffset:e.reduce(((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.forceSeekOffset)?e:0)}),r+af),minimumPlaybackRate:of,maximumPlaybackRate:Da}}get uA(){return this.Qo.cA}constructor(t,e,s){super(),this.ja=0,this.Gw=void 0,this.oA=0,this.Le=!1,this.eA=!1,this.Zw=void 0,this.$w=[],this.rA=()=>{const t=this.sA.wf,i=this.sA.Mf,e=t.lA(i);e&&(this.oA=_.min(_.max(this.oA,e.jn(0)-i),.5),this.Kw())},this.dA=()=>{this.eA=!0,this.Qo.fn(he.Rw,this.dA),this.Le&&this.Cn()},this.Vw=()=>{this.Yw(),this.Fw();const t=this.uA;if(!t)return;if(t>this.qw.forceSeekOffset)return this.Co(new wn("latencyrecoveryseek")),void this.fA();const{minimumOffset:e,targetOffset:s,maximumOffset:n}=this.qw,r=this.sA.Gf;t>n?this.hA(this.qw.maximumPlaybackRate):t<e&&!i.Ys._A?this.hA(this.qw.minimumPlaybackRate):(r>1&&t<s||r<1&&t>s)&&this.hA(1)},this.Qo=t,this.sA=e,this.aA=s,this.qw=s,this.Qo.yn(he.Bw,this.rA),this.Qo.yn(he.Rw,this.dA)}},cf=.25,lf=400,df={minimumOffset:.2,targetOffset:.45,maximumOffset:.7,forceSeekOffset:3,minimumPlaybackRate:of,maximumPlaybackRate:Da},ff={minimumOffset:.4,targetOffset:.65,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:of,maximumPlaybackRate:Da},_f={minimumOffset:.4,targetOffset:.7,maximumOffset:.9,forceSeekOffset:3,minimumPlaybackRate:of,maximumPlaybackRate:Da},gf={minimumOffset:.2,targetOffset:.45,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:of,maximumPlaybackRate:Da},wf={minimumOffset:.5,targetOffset:1.125,maximumOffset:1.75,forceSeekOffset:2.55,minimumPlaybackRate:of,maximumPlaybackRate:Da};function Af(){let t;return t=i.Ys._A?gf:i.Ys.gA?ff:i.Ys.wA?"Android"===i.vA.AA?_f:df:wf,i.vA.mA?function(t){if(i.vA.mA){const i=(lf+250)/1e3,e=_.max(i,t.minimumOffset),s=_.max(e+cf,t.targetOffset),n=_.max(s+cf,t.maximumOffset);return{minimumOffset:e,targetOffset:s,maximumOffset:n,forceSeekOffset:_.max(n+cf,t.forceSeekOffset),minimumPlaybackRate:of,maximumPlaybackRate:Da}}return t}(t):t}function vf(t){return{windowStart:t.minimumOffset,windowEnd:t.maximumOffset,target:t.targetOffset,maxOffset:t.forceSeekOffset}}var Fc=class extends xd{get pA(){return vf(Af())}get yA(){}get cA(){}get MA(){}get Ww(){return!1}get TA(){}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=mf(this)}fA(){}constructor(...t){super(...t),this.NA=void 0}};function mf(t){return{goLive:()=>t.fA(),get isLive(){return t.Ww},get currentServerLiveTime(){return t.yA},get currentLatency(){return t.cA},get latencies(){return t.MA},get latency(){return t.pA},set latency(i){if(!function(t){if(!$l(t))return!1;const i=t;return"number"==typeof i.target&&"number"==typeof i.windowEnd&&"number"==typeof i.windowStart&&"number"==typeof i.maxOffset&&(i.windowStart>=0&&i.windowStart<=i.target&&i.target<=i.windowEnd&&i.maxOffset>=i.windowEnd)}(i))throw new g("Invalid latency configuration");t.NA=i},get manifest(){return t.TA},addEventListener(i,e){t.yn(yf(i),e)},removeEventListener(i,e){t.fn(yf(i),e)}}}var pf=["golive","latencyrecoveryseek"];function yf(t){const i=zs(t,gi);return(Qs(i)?[i]:i).filter((t=>gd(pf,t)))}var ga=class extends xd{set fg(t){const i=this._g;t!==i&&(i&&this.gg(i),t&&this.Ag(t),this._g=t,this._g&&(this._g.NA=this.DA))}get fg(){return this._g}get va(){return this.Xa||(this.Xa=mf(this)),this.Xa}Ag(t){t.yn(pf,this.Ds)}gg(t){t.fn(pf,this.Ds)}fA(){var t;null==(t=this._g)||t.fA()}get yA(){var t;return null==(t=this._g)?void 0:t.yA}get cA(){var t;return null==(t=this._g)?void 0:t.cA}get MA(){var t;return null==(t=this._g)?void 0:t.MA}get Ww(){return!!this._g&&this._g.Ww}get pA(){return this._g?this._g.pA:null!=(t=this.DA)?t:vf(Af());var t}get NA(){return this._g?this._g.NA:this.DA}set NA(t){this._g&&(this._g.NA=t),this.DA=t}get TA(){var t;return null==(t=this._g)?void 0:t.TA}gn(){this.Vo(),this._g&&this.gg(this._g),this._g=void 0}constructor(){super(),this._g=void 0,this.Xa=void 0,this.DA=void 0,this._g=void 0}};function Tt(){return Tt=w.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var s in e)w.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Tt.apply(this,arguments)}var Cl="function"==typeof String.prototype.replaceAll?(t,i,e)=>t.replaceAll(i,e):(t,i,e)=>t.split(i).join(e);function is(t,i){return Yt(t)&&-1!==t.indexOf(i)}var At="function"==typeof String.prototype.startsWith?(t,i)=>Yt(t)&&t.startsWith(i):(t,i)=>Yt(t)&&t.substr(0,i.length)===i,Ah="function"==typeof String.prototype.endsWith?(t,i)=>Yt(t)&&t.endsWith(i):(t,i)=>Yt(t)&&t.substr(t.length-i.length,i.length)===i;function qi(t,i){return t.length===i.length&&t.toUpperCase()===i.toUpperCase()}var Mf="function"==typeof String.prototype.repeat?(t,i)=>t.repeat(i):(t,i)=>{let e=0|i;if(0===t.length||0===e)return"";let s=t,n="";for(;1==(1&e)&&(n+=s),e>>>=1,0!==e;)s+=s;return n},Tf="function"==typeof String.prototype.padStart?(t,i,e)=>(void 0===e&&(e=" "),t.padStart(i,e)):(t,i,e)=>{void 0===e&&(e=" ");let s=e;const n=(0|i)-t.length;return n<=0?t:(n>s.length&&(s+=Mf(s,n/s.length)),s.slice(0,n)+t)},Nf=(String.prototype.padEnd,16384),Df="function"==typeof String.fromCodePoint?t=>t.length<=Nf?String.fromCodePoint(...t):If(t,String.fromCodePoint):t=>{const i=[];for(let e of t)e>65535&&(e-=65536,i.push(e>>>10&1023|55296),e=56320|1023&e),i.push(e);return pn(i)};function pn(t){return t.length<=Nf?String.fromCharCode(...t):If(t,String.fromCharCode)}function If(t,i){const e=[];for(let s=0;s<t.length;s+=Nf)e.push(i(...t.slice(s,s+Nf)));return e.join("")}function Sf(t){return t.replace(/[\\"]/g,(t=>"\\"+t))}function ba(t,e){const s=i.Dh(t);return Vc(s,e),s.toString()}function Vc(t,i){for(const e of w.keys(i))t.searchParams.set(e,i[e])}function oa(t,e){let s=i.IA(t);return e&&!Ah(s,"/")&&(s+="/"),s}var Ef=/cache:(.+)?(?=&|$)/,bf="http://webcache.googleusercontent.com/search?q=cache:";function Lf(t){if(!At(t,bf))return"";const e=i.Dh(t).search.match(Ef);return e&&e.length>1?e[1]:""}function kf(t){return i.Dh(".",t)}var Cf,Jh,ii,xf="8E80B9CE";function Of(t){return{appID:t&&t.appID?gi(t.appID):xf}}function Hc(t){if(null!==t)return t}function jf(t){const e={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:Hc(t.streamActivityMonitorID),adTagParameters:$l(t.adTagParameters)?t.adTagParameters:{},authToken:Hc(t.authToken),omidAccessModeRules:Hc(t.omidAccessModeRules)};if("vod"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.videoID&&i.contentSourceID)}(t)){const s=t.videoID,n=t.contentSourceID;return s?n?Tt({},e,{availabilityType:"vod",videoID:s,contentSourceID:n}):void i.SA("A VOD DAI configuration was provided without valid contentSourceID which is required."):void i.SA("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.assetKey)}(t)){const s=t.assetKey;return s?Tt({},e,{availabilityType:"live",assetKey:s}):void i.SA("A Live DAI configuration was provided without valid assetKey which is required.")}i.SA("A DAI configuration was provided without a valid availabilityType which is required.")}function zf(t){switch(t.integration){case"google-dai":return jf(t);case"imagine":return function(t){return{integration:t.integration}}(t);case"yospace":return function(t){var i;return{integration:t.integration,streamType:null!=(i=t.streamType)?i:void 0}}(t);default:return{integration:t.integration}}}!function(t){t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled"}(Cf||(Cf={})),function(t){t.EA="",t.bA="anonymous",t.LA="use-credentials"}(Jh||(Jh={})),function(t){t.kA="application/dash+xml",t.CA="application/vnd.apple.mpegurl",t.xA="application/x-mpegurl",t.OA="video/mp4",t.jA="application/vnd.theoplayer.hesp+json",t.zA="application/vnd.theo.hesp+json"}(ii||(ii={}));var vi,Os,Pf="titanium",Lc="conax",_l="ezdrm",vn="irdeto",mn="vudrm",wl="verimatrix",Bf="keyos",Rf="drmtoday",kl="expressplay",Wc="azure",Uf="xstream",Ml="vimond",bn="axinom",jl="uplynk",Qf="comcast",Ff="custom";function Yf(t,i){if(null==t)return{};var e,s,n={},r=w.keys(t);for(s=0;s<r.length;s++)e=r[s],i.indexOf(e)>=0||(n[e]=t[e]);return n}function Gf(t){return Yt(t.token&&t.deviceId)}function Vf(t){var i;const e=null==(i=t.fairplay)?void 0:i.headers;return void 0!==e&&Yt(e.PreAuthorization)}function dl(t){const i=t;return Gf(i)&&""!==i.token&&""!==i.deviceId&&!Vf(i)}!function(t){t.PA="playready",t.BA="widevine",t.RA="fairplay",t.UA="clearkey",t.QA="aes128"}(vi||(vi={})),function(t){t.FA=!1,t.YA=!1,t.GA=!1,t.VA=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.WA=!1,t.HA=!1,t.LOG_LCEVC_DETAILS=!1}(Os||(Os={}));var $i=class extends hs{get name(){return"THEOplayerError"}get category(){return ll.fromCode(this.code)}constructor(t,i,e){super(i,e),this.code=t}};var Qr=class extends $i{get name(){return"ContentProtectionError"}constructor(t,i,e,s,n,r,h,o){super(t,i,e),this.url=s,this.status=n,this.statusText=r,this.response=h,this.systemCode=o}};var Wf,Hf=class{get qA(){return this.XA}get ZA(){return this.KA}JA(t){return function(t){const i=t.onCertificateRequest;if(void 0!==i&&"function"!=typeof i)throw new b("ContentProtectionIntegration.onCertificateRequest is not a function.");const e=t.onCertificateResponse;if(void 0!==e&&"function"!=typeof e)throw new b("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new b("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new b("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new b("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.$A.build(t))}constructor(t,i,e){this.XA=t,this.KA=i,this.$A=e}};!function(t){t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED"}(Wf||(Wf={}));var qf,va=class{registerContentProtectionIntegration(t,e,s){switch(this.rv(t,e,s)){case Wf.FAILED:throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+e+".");case Wf.OVERRIDDEN:{const s=Gc(e);i.SA("Warning: Overwriting an earlier registered integration for "+t+" and "+s+".");break}case Wf.SUCCEEDED:Gc(e);0;break}}rv(t,i,e){const s=Gc(i);if(!s)return Wf.FAILED;let n=Wf.SUCCEEDED;for(const i of this.hv.slice())i.qA===t&&i.ZA===s&&(n=Wf.OVERRIDDEN,To(this.hv,i));return this.hv.push(new Hf(t,s,e)),n}ov(t,i){return void 0!==this.uv(t,i)}fv(t,i,e){const s=this.uv(t,i);if(!s)throw g("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+i);return s.JA(e)}uv(t,i){for(const e of this.hv)if(e.qA===t&&(!i||e.ZA===i))return e}constructor(){this.hv=[]}};va._v=new va,function(t){t.PA="9a04f079-9840-4286-ab92-e65be0885f95",t.BA="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t.UA="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.RA="94ce86fb-07ff-4f43-adb8-93d2fa968ca2"}(qf||(qf={}));var Zt,Xf,Zf,T,Xe,Kf="urn:mpeg:dash:mp4protection:2011",Jf="cenc",$f="sinf",t_="skd",i_="9a04f079-9840-4286-ab92-e65be0885f95",Gi="urn:uuid:"+i_,e_="com.microsoft.playready",s_="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",gt="urn:uuid:"+s_,n_="com.widevine.alpha",r_="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",h_="urn:uuid:"+r_,Qc="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",Ca="urn:uuid:"+Qc,o_="com.apple.fps.1_0",a_="com.apple.streamingkeydelivery",u_="identity";!function(t){t.Av="moov",t.vv="mvhd",t.mv="trak",t.pv="tkhd",t.yv="mdia",t.Mv="mdhd",t.Tv="hdlr",t.Nv="minf",t.Dv="stbl",t.Iv="stsd",t.Sv="stsc",t.Ev="mvex",t.bv="trex",t.Lv="avc1",t.Cv="avcC",t.xv="hev1",t.Ov="hvc1",t.zv="hvcC",t.Pv="vp09",t.Bv="vpcC",t.Rv="av01",t.Uv="av1C",t.Qv="colr",t.Fv="pasp",t.Yv="mp4a",t.Gv="esds",t.Vv="fLaC",t.Wv="dfLa",t.Hv="wvtt",t.qv="vttC",t.Xv="vlab",t.Zv="enca",t.Kv="encv",t.Jv="moof",t.$v="mfhd",t.tm="traf",t.im="tfhd",t.nm="trun",t.hm="tfdt",t.um="senc",t.lm="mdat",t.dm="pssh",t.fm="emsg",t._m="sidx",t.gm="styp",t.wm="ftyp",t.Am="sinf",t.vm="frma"}(Zt||(Zt={})),function(t){t.pm="vide",t.ym="soun",t.Mm="subt",t.Tm="hint",t.Nm="meta",t.Dm="auxv"}(Xf||(Xf={})),function(t){t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof"}(Zf||(Zf={})),function(t){t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF"}(T||(T={})),function(t){t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT"}(Xe||(Xe={}));var c_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),l_=16383,d_=/[\t\n\f\r ]/g;function f_(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:__()}function __(){throw new g("Invalid base64 input")}function it(t){let i=t;d_.test(i)&&(i=i.replace(d_,""));let e=i.length;e%4==0&&e>=1&&"="===i[e-1]&&(e>=2&&"="===i[e-2]?e-=2:e-=1,i=i.substr(0,e));const s=e%4;if(1===s)return __();const n=0===s?0:4-s,r=new j(function(t,i){return 3*(t+i)/4-i}(e,n)),h=n>0?e-4:e;let o,a=0,u=0;for(;a<h;a+=4)o=f_(i.charCodeAt(a))<<18|f_(i.charCodeAt(a+1))<<12|f_(i.charCodeAt(a+2))<<6|f_(i.charCodeAt(a+3)),r[u++]=o>>16&255,r[u++]=o>>8&255,r[u++]=255&o;return 2===n?(o=f_(i.charCodeAt(a))<<2|f_(i.charCodeAt(a+1))>>4,r[u++]=255&o):1===n&&(o=f_(i.charCodeAt(a))<<10|f_(i.charCodeAt(a+1))<<4|f_(i.charCodeAt(a+2))>>2,r[u++]=o>>8&255,r[u++]=255&o),r}function g_(t,i,e){return c_[t>>2]+c_[(3&t)<<4|i>>4]+c_[(15&i)<<2|e>>6]+c_[63&e]}function w_(t,i,e){const s=[];for(let n=i;n<e;n+=3)s.push(g_(t[n],t[n+1],t[n+2]));return s.join("")}function Zs(t){const i=t.length,e=i%3,s=[],n=i-e;for(let i=0;i<n;i+=l_)s.push(w_(t,i,_.min(n,i+l_)));if(1===e){const e=t[i-1];s.push(c_[e>>2]+c_[(3&e)<<4]+"==")}else if(2===e){const e=t[i-2],n=t[i-1];s.push(c_[e>>2]+c_[(3&e)<<4|n>>4]+c_[(15&n)<<2]+"=")}return s.join("")}function A_(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}var v_=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],Aa=ArrayBuffer.isView||(t=>t&&gd(v_,mo.call(t)));function wa(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;return Qi(new j(t),new j(i))}function Qi(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;for(let e=0;e<t.length;e+=1)if(t[e]!==i[e])return!1;return!0}function m_(t){const i=t.reduce(((t,i)=>t+i.byteLength),0);return p_(t,i)}function p_(t,i){const e=new j(i);let s=0;for(const i of t)e.set(i,s),s+=i.byteLength;return e}function y_(t,i,e){const s=new j(t.byteLength+i.byteLength),n=tl(t,0,e),r=tl(t,e);return s.set(n),s.set(i,e),s.set(r,e+i.byteLength),s}function Sa(t){return it(t).buffer}function M_(t){return Zs(new j(t))}function Ta(t){return Zs(_a(t))}function Fe(t,i){const e=i.Ku,s=t.getUint8(e>>3),n=1<<7-(7&e);return i.Im(1),(s&n)===n?1:0}function Cn(t,i,e){let s=0;for(let n=0;n<e;n++)s=2*s+Fe(t,i);return s}var Yc=class t{get Ku(){return this.Zu}Im(t){this.Zu+=t}Sm(t){this.Zu=t}Em(){return new t(this.Ku)}constructor(t=0){this.Zu=t}};var T_=_.clz32||function(t){let i=32,e=t>>16;return e&&(i-=16,t=e),e=t>>8,e&&(i-=8,t=e),e=t>>4,e&&(i-=4,t=e),e=t>>2,e&&(i-=2,t=e),e=t>>1,e?i-2:i-t},ft=null;try{ft=new WebAssembly.Instance(new WebAssembly.Module(new j([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(r){}function wi(t,i,e){this.low=0|t,this.high=0|i,this.unsigned=!!e}function Ph(t){return!0===(t&&t.Lm)}function N_(t){var i=_.clz32(t&-t);return t?31-i:i}wi.prototype.Lm,w.defineProperty(wi.prototype,"Lm",{value:!0}),wi.isLong=Ph;var D_={},I_={};function xn(t,i){var e,s,n;return i?(n=0<=(t>>>=0)&&t<256)&&(s=I_[t])?s:(e=Le(t,0,!0),n&&(I_[t]=e),e):(n=-128<=(t|=0)&&t<128)&&(s=D_[t])?s:(e=Le(t,t<0?-1:0,!1),n&&(D_[t]=e),e)}function Pt(t,i){if(S(t))return i?C_:qe;if(i){if(t<0)return C_;if(t>=b_)return P_}else{if(t<=-L_)return B_;if(t+1>=L_)return z_}return t<0?Pt(-t,i).neg():Le(t%yl|0,t/yl|0,i)}function Le(t,i,e){return new wi(t,i,e)}wi.fromInt=xn,wi.fromNumber=Pt,wi.fromBits=Le;var S_=_.pow;function E_(t,i,e){if(0===t.length)throw g("empty string");if("number"==typeof i?(e=i,i=!1):i=!!i,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return i?C_:qe;if((e=e||10)<2||36<e)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw g("interior hyphen");if(0===s)return E_(t.substring(1),i,e).neg();for(var n=Pt(S_(e,8)),r=qe,h=0;h<t.length;h+=8){var o=_.min(8,t.length-h),a=x(t.substring(h,h+o),e);if(o<8){var u=Pt(S_(e,o));r=r.mul(u).add(Pt(a))}else r=(r=r.mul(n)).add(Pt(a))}return r.unsigned=i,r}function tr(t,i){return"number"==typeof t?Pt(t,i):"string"==typeof t?E_(t,i):Le(t.low,t.high,"boolean"==typeof i?i:t.unsigned)}wi.fromString=E_,wi.fromValue=tr;var yl=4294967296,b_=yl*yl,L_=b_/2,k_=xn(1<<24),qe=xn(0);wi.ZERO=qe;var C_=xn(0,!0);wi.UZERO=C_;var x_=xn(1);wi.ONE=x_;var O_=xn(1,!0);wi.UONE=O_;var j_=xn(-1);wi.NEG_ONE=j_;var z_=Le(-1,2147483647,!1);wi.MAX_VALUE=z_;var P_=Le(-1,-1,!0);wi.MAX_UNSIGNED_VALUE=P_;var B_=Le(0,-2147483648,!1);wi.MIN_VALUE=B_;var Or=wi.prototype;Or.toInt=function(){return this.unsigned?this.low>>>0:this.low},Or.toNumber=function(){return this.unsigned?(this.high>>>0)*yl+(this.low>>>0):this.high*yl+(this.low>>>0)},Or.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(B_)){var i=Pt(t),e=this.div(i),s=e.mul(i).sub(this);return e.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=Pt(S_(t,6),this.unsigned),r=this,h="";;){var o=r.div(n),a=(r.sub(o.mul(n)).toInt()>>>0).toString(t);if((r=o).isZero())return a+h;for(;a.length<6;)a="0"+a;h=""+a+h}},Or.getHighBits=function(){return this.high},Or.getHighBitsUnsigned=function(){return this.high>>>0},Or.getLowBits=function(){return this.low},Or.getLowBitsUnsigned=function(){return this.low>>>0},Or.getNumBitsAbs=function(){if(this.isNegative())return this.eq(B_)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,i=31;i>0&&0==(t&1<<i);i--);return 0!=this.high?i+33:i+1},Or.isZero=function(){return 0===this.high&&0===this.low},Or.eqz=Or.isZero,Or.isNegative=function(){return!this.unsigned&&this.high<0},Or.isPositive=function(){return this.unsigned||this.high>=0},Or.isOdd=function(){return 1==(1&this.low)},Or.isEven=function(){return 0==(1&this.low)},Or.equals=function(t){return Ph(t)||(t=tr(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},Or.eq=Or.equals,Or.notEquals=function(t){return!this.eq(t)},Or.neq=Or.notEquals,Or.ne=Or.notEquals,Or.lessThan=function(t){return this.comp(t)<0},Or.lt=Or.lessThan,Or.lessThanOrEqual=function(t){return this.comp(t)<=0},Or.lte=Or.lessThanOrEqual,Or.le=Or.lessThanOrEqual,Or.greaterThan=function(t){return this.comp(t)>0},Or.gt=Or.greaterThan,Or.greaterThanOrEqual=function(t){return this.comp(t)>=0},Or.gte=Or.greaterThanOrEqual,Or.ge=Or.greaterThanOrEqual,Or.compare=function(t){if(Ph(t)||(t=tr(t)),this.eq(t))return 0;var i=this.isNegative(),e=t.isNegative();return i&&!e?-1:!i&&e?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},Or.comp=Or.compare,Or.negate=function(){return!this.unsigned&&this.eq(B_)?B_:this.not().add(x_)},Or.neg=Or.negate,Or.add=function(t){Ph(t)||(t=tr(t));var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=0,u=0,c=0,l=0;return c+=(l+=n+(65535&t.low))>>>16,u+=(c+=s+o)>>>16,a+=(u+=e+h)>>>16,a+=i+r,Le((c&=65535)<<16|(l&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},Or.subtract=function(t){return Ph(t)||(t=tr(t)),this.add(t.neg())},Or.sub=Or.subtract,Or.multiply=function(t){if(this.isZero())return this;if(Ph(t)||(t=tr(t)),ft)return Le(ft.mul(this.low,this.high,t.low,t.high),ft.get_high(),this.unsigned);if(t.isZero())return this.unsigned?C_:qe;if(this.eq(B_))return t.isOdd()?B_:qe;if(t.eq(B_))return this.isOdd()?B_:qe;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(k_)&&t.lt(k_))return Pt(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=65535&t.low,u=0,c=0,l=0,d=0;return l+=(d+=n*a)>>>16,c+=(l+=s*a)>>>16,l&=65535,c+=(l+=n*o)>>>16,u+=(c+=e*a)>>>16,c&=65535,u+=(c+=s*o)>>>16,c&=65535,u+=(c+=n*h)>>>16,u+=i*a+e*o+s*h+n*r,Le((l&=65535)<<16|(d&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},Or.mul=Or.multiply,Or.divide=function(t){if(Ph(t)||(t=tr(t)),t.isZero())throw g("division by zero");var i,e,s;if(ft)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?Le((this.unsigned?ft.div_u:ft.div_s)(this.low,this.high,t.low,t.high),ft.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?C_:qe;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return C_;if(t.gt(this.shru(1)))return O_;s=C_}else{if(this.eq(B_))return t.eq(x_)||t.eq(j_)?B_:t.eq(B_)?x_:(i=this.shr(1).div(t).shl(1)).eq(qe)?t.isNegative()?x_:j_:(e=this.sub(t.mul(i)),s=i.add(e.div(t)));if(t.eq(B_))return this.unsigned?C_:qe;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=qe}for(e=this;e.gte(t);){i=_.max(1,_.floor(e.toNumber()/t.toNumber()));for(var n=_.ceil(_.log(i)/_.LN2),r=n<=48?1:S_(2,n-48),h=Pt(i),o=h.mul(t);o.isNegative()||o.gt(e);)o=(h=Pt(i-=r,this.unsigned)).mul(t);h.isZero()&&(h=x_),s=s.add(h),e=e.sub(o)}return s},Or.div=Or.divide,Or.modulo=function(t){return Ph(t)||(t=tr(t)),ft?Le((this.unsigned?ft.rem_u:ft.rem_s)(this.low,this.high,t.low,t.high),ft.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},Or.mod=Or.modulo,Or.rem=Or.modulo,Or.not=function(){return Le(~this.low,~this.high,this.unsigned)},Or.countLeadingZeros=function(){return this.high?_.clz32(this.high):_.clz32(this.low)+32},Or.clz=Or.countLeadingZeros,Or.countTrailingZeros=function(){return this.low?N_(this.low):N_(this.high)+32},Or.ctz=Or.countTrailingZeros,Or.and=function(t){return Ph(t)||(t=tr(t)),Le(this.low&t.low,this.high&t.high,this.unsigned)},Or.or=function(t){return Ph(t)||(t=tr(t)),Le(this.low|t.low,this.high|t.high,this.unsigned)},Or.xor=function(t){return Ph(t)||(t=tr(t)),Le(this.low^t.low,this.high^t.high,this.unsigned)},Or.shiftLeft=function(t){return Ph(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?Le(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Le(0,this.low<<t-32,this.unsigned)},Or.shl=Or.shiftLeft,Or.shiftRight=function(t){return Ph(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?Le(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Le(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},Or.shr=Or.shiftRight,Or.shiftRightUnsigned=function(t){return Ph(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?Le(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):Le(32===t?this.high:this.high>>>t-32,0,this.unsigned)},Or.shru=Or.shiftRightUnsigned,Or.shr_u=Or.shiftRightUnsigned,Or.rotateLeft=function(t){var i;return Ph(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?Le(this.high,this.low,this.unsigned):t<32?(i=32-t,Le(this.low<<t|this.high>>>i,this.high<<t|this.low>>>i,this.unsigned)):(i=32-(t-=32),Le(this.high<<t|this.low>>>i,this.low<<t|this.high>>>i,this.unsigned))},Or.rotl=Or.rotateLeft,Or.rotateRight=function(t){var i;return Ph(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?Le(this.high,this.low,this.unsigned):t<32?(i=32-t,Le(this.high<<i|this.low>>>t,this.low<<i|this.high>>>t,this.unsigned)):(i=32-(t-=32),Le(this.low<<i|this.high>>>t,this.high<<i|this.low>>>t,this.unsigned))},Or.rotr=Or.rotateRight,Or.toSigned=function(){return this.unsigned?Le(this.low,this.high,!1):this},Or.toUnsigned=function(){return this.unsigned?this:Le(this.low,this.high,!0)},Or.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},Or.toBytesLE=function(){var t=this.high,i=this.low;return[255&i,i>>>8&255,i>>>16&255,i>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},Or.toBytesBE=function(){var t=this.high,i=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i]},wi.fromBytes=function(t,i,e){return e?wi.fromBytesLE(t,i):wi.fromBytesBE(t,i)},wi.fromBytesLE=function(t,i){return new wi(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,i)},wi.fromBytesBE=function(t,i){return new wi(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],i)};var Ce=wi;function R_(t,i){return t.lessThan(i)?t:i}function U_(t){if(t>=55296&&t<=57343)throw new g("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Q_(t,i){return t>>i&63|128}function F_(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(U_(t),i.push(t>>12&15|224),i.push(Q_(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(Q_(t,12)),i.push(Q_(t,6))),i.push(63&t|128)):i.push(t)}function ol(t,i){if(i.Ku>=t.length)throw new g("Invalid byte index");const e=255&t[i.Ku];if(i.Im(1),128==(192&e))return 63&e;throw new g("Invalid continuation byte")}function Y_(t,i){const e=i.Ku;if(e>t.length)throw new g("Invalid byte index");if(e===t.length)return!1;const s=255&t[e];if(i.Im(1),0==(128&s))return s;if(192==(224&s)){const e=(31&s)<<6|ol(t,i);if(e>=128)return e;throw new g("Invalid continuation byte")}if(224==(240&s)){const e=(15&s)<<12|ol(t,i)<<6|ol(t,i);if(e>=2048)return U_(e),e;throw new g("Invalid continuation byte")}if(240==(248&s)){const e=(7&s)<<18|ol(t,i)<<12|ol(t,i)<<6|ol(t,i);if(e>=65536&&e<=1114111)return e}throw new g("Invalid UTF-8 detected")}var G_=65279;var V_=[128,64,32,16,8,4,2,1],pl=class{Cm(t){return W_(this.xm,t)}constructor(t){this.xm=t}};function W_(t,i){return(t&i)===i}function eu(t,i){return W_(t,V_[i])}function hl(t,i){const e=t.getUint8(i.Ku);return i.Im(1),e}function H_(t,i,e){t.setUint8(i.Ku,e),i.Im(1)}function Yu(t,i,e){const s=tl(Kn(t),i.Ku,i.Ku+e);return i.Im(s.byteLength),s}function q_(t,i,e){Kn(t).set(Kn(e),i.Ku),i.Im(e.byteLength)}function X_(t,i,e){return i.Ku+e<=t.byteLength}function cl(t,i,e,s){return void 0===s&&(s=!1),s?function(t,i,e){let s=0,n=1;for(let r=0;r<e;r++)s+=hl(t,i)*n,n*=256;return s}(t,i,e):function(t,i,e){let s=0;for(let n=0;n<e;n++)s=256*s+hl(t,i);return s}(t,i,e)}function il(t,i,e){void 0===e&&(e=!1);const s=t.getUint16(i.Ku,e);return i.Im(2),s}function Z_(t,i,e,s){void 0===s&&(s=!1),t.setUint16(i.Ku,e,s),i.Im(2)}function oo(t,i,e){void 0===e&&(e=!1);const s=t.getUint32(i.Ku,e);return i.Im(4),s}function Pu(t,i,e,s){void 0===s&&(s=!1),t.setUint32(i.Ku,e,s),i.Im(4)}function cn(t,i,e){void 0===e&&(e=!1);const s=oo(t,i,e),n=oo(t,i,e),r=e?n:s,h=e?s:n;return Ce.fromBits(h,r,!0)}function K_(t,i,e,s){void 0===s&&(s=!1);const n=e.getHighBitsUnsigned(),r=e.getLowBitsUnsigned(),h=s?n:r;Pu(t,i,s?r:n,s),Pu(t,i,h,s)}function J_(t,i){return hu(t,i)}function jh(t,i,e){return pn(dg(Yu(t,i,e)))}function $_(t,i){const e=hl(t,i);let s;return 0==(128&e)?s=e:192==(224&e)?s=64*(31&e)+(63&hl(t,i)):224==(240&e)?s=4096*(15&e)+64*(63&hl(t,i))+(63&hl(t,i)):240==(248&e)&&(s=262144*(7&e)+4096*(63&hl(t,i))+64*(63&hl(t,i))+(63&hl(t,i))),s}function hu(t,i){return tg(t,i,!0)}function tg(t,i,e){const s=[];for(;i.Ku<t.byteLength;){const n=hl(t,i);if(e&&!n)break;s.push(n)}return pn(s)}function ig(t,i,e){const s=e.length;for(let n=0;n<s;n+=1){H_(t,i,e.charCodeAt(n))}}function eg(t,i){if(!(i.Ku+2<=t.byteLength))return;const e=t.getUint8(i.Ku),s=t.getUint8(i.Ku+1);return(254!==e||255!==s)&&(255===e&&254===s||void 0)}function sg(t,i){const e=eg(t,i);return void 0!==e&&i.Im(2),ng(t,i,!0===e)}function ng(t,i,e){return void 0===e&&(e=!1),rg(t,i,e,!0)}function rg(t,i,e,s){const n=[];for(;i.Ku+2<=t.byteLength;){const r=il(t,i,e);if(s&&!r)break;n.push(r)}return pn(n)}function hg(t,i,e,s){void 0===s&&(s=!1);const n=e.length;for(let r=0;r<n;r+=1){Z_(t,i,e.charCodeAt(r),s)}}function es(t){return tg(ha(t),new L,!1)}function _a(t){const i=new j(t.length);return ig(ha(i),new L,t),i}function og(t,i){return void 0===i&&(i=!1),rg(ha(t),new L,i,!1)}function ag(t,i){void 0===i&&(i=!1);const e=new j(2*t.length);return hg(ha(e),new L,t,i),e}function ug(t,i){return i.Ku+3<=t.byteLength&&(239===t.getUint8(i.Ku)&&187===t.getUint8(i.Ku+1)&&191===t.getUint8(i.Ku+2))}function gl(t,i){return function(t,i,e){const s=[],n=ug(t,i);n&&i.Im(3);for(;i.Ku<t.byteLength;){const n=$_(t,i);if(void 0===n)break;if(e&&0===n)break;s.push(n)}return Df(s)}(t,i,!0)}function Fa(t){return function(t){return Df(t)}(function(t,i){const e=[],s=new L;let n;if(!i){if(n=Y_(t,s),!1===n)return e;n===G_||e.push(n)}for(;!1!==(n=Y_(t,s));)e.push(n);return e}(Kn(t)))}function cg(t){return new j(function(t){const i=[];for(const e of t)F_(e,i);return i}(function(t){const i=[];let e=0;const s=t.length;for(;e<s;){const n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){const s=t.charCodeAt(e++);56320==(64512&s)?i.push(((1023&n)<<10)+(1023&s)+65536):(i.push(n),e--)}else i.push(n)}return i}(t)))}function Tl(t,i){if(ug(t,i))return gl(t,i);if(void 0!==eg(t,i))return sg(t,i);if(i.Ku+4<=t.byteLength){if(0===t.getUint8(i.Ku)&&0===t.getUint8(i.Ku+2))return ng(t,i,!1);if(0===t.getUint8(i.Ku+1)&&0===t.getUint8(i.Ku+3))return ng(t,i,!0)}return gl(t,i)}function tl(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new j(t.buffer,t.byteOffset+i,e-i)}function fe(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function ha(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Kn(t){return new j(t.buffer,t.byteOffset,t.byteLength)}function lg(t){return t instanceof ArrayBuffer||Aa(t)}function He(t){return t instanceof ArrayBuffer?new j(t):Kn(t)}function Ko(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),t.slice?t.slice(i,e):Dt(tl(t,i,e))}function Dt(t){if(t.slice)return t.slice(0);{const i=new j(t.byteLength);return i.set(t,0),i}}function dg(t){return[].slice.call(t)}var L=class t{get Ku(){return this.Zu}Im(t){this.Zu+=t}Sm(t){this.Zu=t}Em(){return new t(this.Ku)}Om(){return new Yc(this.Ku<<3)}constructor(t=0){this.Zu=t}};function fg(t){let i=t.toLowerCase(),e=0,s=0;At(i,"0x")&&(i=i.substring(2));const n=new j(_.ceil(i.length/2));for(1==(1&i.length)&&(e=1,n[s++]=x(i[0],16));e<i.length;e+=2)n[s++]=x(i.substr(e,2),16);return n}function _g(t){return.001*t}var Dh=class t{jm(){return hl(this.zm,this.Pm)}Bm(){return il(this.zm,this.Pm)}Rm(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt16(i.Ku,e);return i.Im(2),s}(this.zm,this.Pm)}Um(){return oo(this.zm,this.Pm)}Qm(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt32(i.Ku,e);return i.Im(4),s}(this.zm,this.Pm)}Fm(){return cn(this.zm,this.Pm)}Ym(t){return Yu(this.zm,this.Pm,t)}Gm(t){return function(t,i,e){const s=[];for(let n=0;n<e;n++)s.push(oo(t,i));return s}(this.zm,this.Pm,t)}Vm(t){return jh(this.zm,this.Pm,t)}Wm(){return gl(this.zm,this.Pm)}Hm(t){this.Pm.Im(t)}Em(){return new t(this.zm,this.Pm.Em())}constructor(t,i){this.zm=t,this.Pm=i}};function gg(t,i){return t.Rg===i}function ml(t,i){for(const e of t)if(gg(e,i))return e}var Ei=class extends hs{get name(){return"DataIncompleteError"}constructor(t,i){super(),this.qm=t,this.Xm=i}},dt=class t{static Zm(i){const e=i.zm,s=i.Pm,n=t.Km(e,s,!1);if(!n.Jm)throw new Ei(s.Ku,n.m);return n.m}static Km(i,e,s){const n=[];for(;e.Ku<i.byteLength;){const r=t.$m(i,e,s);if(!r.Jm)return{Jm:!1,m:n};n.push(r.tp)}return{Jm:!0,m:n}}static ip(i,e){const s=t.$m(i,e,!1);if(!s.Jm)throw new Ei(e.Ku);return s.tp}static ep(i,e){const s=i.zm,n=i.Pm;for(;n.Ku<s.byteLength;){const i=t.$m(s,n,!1);if(!i.Jm)return;if(i.tp.Rg===e)return i.tp}}static $m(i,e,s){const n=e.Ku,r=t.sp(i,e);if(!r.Jm)return r;const h=r.np;let o=h.rp;if(0===o){if(s)return e.Sm(n),{Jm:!1,hp:1/0};o=i.byteLength-n}const a=n+o;if(a>i.byteLength){const t=a;return e.Sm(n),{Jm:!1,hp:t}}const u={Rg:h.Rg,Ku:n,zm:new Dh(fe(i,n,a),new L(h.op))};return e.Sm(a),{Jm:!0,tp:u}}static sp(t,i){const e=i.Ku;if(!X_(t,i,8)){return{Jm:!1,hp:i.Ku+8}}let s=oo(t,i),n=jh(t,i,4);if(1===s){if(!X_(t,i,8)){const t=i.Ku+8;return i.Sm(e),{Jm:!1,hp:t}}s=cn(t,i).toNumber()}if("uuid"===n){if(!X_(t,i,16)){const t=i.Ku+16;return i.Sm(e),{Jm:!1,hp:t}}n=jh(t,i,16)}return{Jm:!0,np:{Rg:n,rp:s,op:i.Ku-e}}}static ap(t,i,e){const s=t.zm,n=t.Pm;let r=tl(Kn(s),n.Ku,s.byteLength);return e&&(r=Dt(r)),n.Im(r.byteLength),{Rg:i,zm:r}}static cp(i,e,s){const n=i.Um(),{version:r,flags:h}=_u(n);return{Rg:e,lp:r,dp:h,zm:t.ap(i,e,s).zm}}};function js(t,i){const e=bl(t,i);if(!e)throw new g("Missing "+i+" atom");return e}function bl(t,i){for(const e of t)if(e.Rg===i)return e.zm}function In(t,i){const e=[];for(const s of t)s.Rg===i&&e.push(s.zm);return e}function _u(t){return{version:t>>24,flags:new pl(16777215&t)}}var Lr=class t{static fp(i){const e=[],s=dt.Zm(new Dh(i,new L));for(const i of s){const s=t._p(i);s&&e.push(s)}return e}static gp(t){return dt.Km(t,new L,!1).m.some(this.wp)}static Ap(i){return In(dt.Zm(new Dh(i,new L)),Zt.dm).map(t.vp)}static mp(i){return In(dt.Zm(i.zm),Zt.dm).map(t.vp)}static wp(t){return t.Rg===Zt.wm||t.Rg===Zt.gm||t.Rg===Zt.Av||t.Rg===Zt.Jv||t.Rg===Zt.lm||t.Rg===Zt._m||t.Rg===Zt.fm}static _p(i){switch(i.Rg){case Zt.Av:return t.pp(i.zm);case Zt.Jv:return t.yp(i.zm,i.Ku);case Zt.lm:return t.Mp(i.zm);case Zt._m:return t.Tp(i.zm);case Zt.fm:return t.Np(i.zm)}}static pp(i){const e=dt.Zm(i),s=js(e,Zt.vv),n=In(e,Zt.mv),r=bl(e,Zt.Ev),h=t.Dp(s),o=n.map(t.Ip),a=r?t.Sp(r):void 0;return{Rg:Zt.Av,np:h,Z:o,Ep:a}}static Dp(t){const i=t.Um(),{version:e,flags:s}=_u(i),n=1===e?t.Fm():t.Um(),r=1===e?t.Fm():t.Um(),h=t.Um(),o=1===e?t.Fm():t.Um(),a=t.Um(),u=t.Bm()>>8;t.Hm(2),t.Hm(8);const c=t.Gm(9);t.Hm(24);const l=t.Um();return{Rg:Zt.vv,lp:e,dp:s,bp:n,Lp:r,kp:h,ct:o,Cp:a,c_:u,xp:c,Op:l}}static Ip(i){const e=dt.Zm(i),s=js(e,Zt.pv),n=js(e,Zt.yv),r=t.jp(s),h=t.zp(n);return{Rg:Zt.mv,np:r,Pp:h}}static jp(t){const i=t.Um(),{version:e,flags:s}=_u(i),n=1===e?t.Fm():t.Um(),r=1===e?t.Fm():t.Um(),h=t.Um();t.Hm(4);const o=1===e?t.Fm():t.Um();t.Hm(8);const a=t.Rm(),u=t.Rm(),c=t.Rm()/256;t.Hm(2);const l=t.Gm(9),d=t.Um()/65536,f=t.Um()/65536;return{Rg:Zt.pv,Bp:s.Cm(1),Rp:s.Cm(2),Up:s.Cm(4),bp:n,Lp:r,Qp:h,ct:o,Fp:a,Yp:u,c_:c,xp:l,ji:d,Ti:f}}static zp(i){const e=dt.Zm(i),s=js(e,Zt.Mv),n=js(e,Zt.Tv),r=js(e,Zt.Nv),h=t.Gp(s),o=t.Vp(n),a=t.Wp(r);return{Rg:Zt.yv,np:h,Hp:o,qp:a}}static Gp(t){const i=t.Um(),{version:e,flags:s}=_u(i),n=1===e?t.Fm():t.Um(),r=1===e?t.Fm():t.Um(),h=t.Um(),o=1===e?t.Fm():t.Um();t.Bm();return t.Hm(2),{Rg:Zt.Mv,lp:e,dp:s,bp:n,Lp:r,kp:h,ct:o}}static Vp(t){const i=t.Um(),{version:e,flags:s}=_u(i);t.Hm(4);const n=t.Vm(4);t.Hm(12);const r=t.Wm();return{Rg:Zt.Tv,lp:e,dp:s,Xp:n,l:r}}static Wp(i){const e=js(dt.Zm(i),Zt.Dv),s=t.Zp(e);return{Rg:Zt.Nv,Kp:s}}static Zp(i){const e=js(dt.Zm(i),Zt.Iv),s=t.Jp(e);return{Rg:Zt.Dv,$p:s}}static Jp(i){const e=i.Um(),{version:s,flags:n}=_u(e),r=(i.Um(),[]),h=dt.Zm(i);for(const i of h){const e=t.iy(i.zm,i.Rg);e&&r.push(e)}return{Rg:Zt.Iv,lp:s,dp:n,ey:r}}static iy(i,e){let s=t.sy(i,e);return s||(s=t.oy(i,e),s||(e===Zt.Hv?t.uy(i):void 0))}static sy(i,e){return e===Zt.Yv?t.ly(i):e===Zt.Vv||e===Zt.Vv.toLowerCase()||e===Zt.Vv.toUpperCase()?t._y(i):e===Zt.Zv?t.gy(i):void 0}static oy(i,e){return e===Zt.Lv?t.wy(i):e===Zt.xv||e===Zt.Ov?t.Ay(i,e):e===Zt.Pv?t.vy(i,e):e===Zt.Rv?t.py(i,e):e===Zt.Kv?t.yy(i):void 0}static My(t,i){t.Hm(6);return{Rg:i,Ty:t.Bm()}}static Ny(i,e){const s=t.My(i,e);i.Hm(8);const n=i.Bm(),r=i.Bm();i.Hm(2),i.Hm(2);return Tt({},s,{Dy:n,Iy:r,Sy:i.Um()>>>16})}static Ey(i,e){const s=t.My(i,e);i.Hm(2),i.Hm(2),i.Hm(12);const n=i.Bm(),r=i.Bm(),h=i.Um(),o=i.Um();i.Hm(4);const a=i.Bm();i.Hm(32);const u=i.Bm();return i.Hm(2),Tt({},s,{ji:n,Ti:r,by:h,Ly:o,Cy:a,xy:u})}static ly(i){const e=t.Ny(i,Zt.Yv),s=js(dt.Zm(i),Zt.Gv);return Tt({},e,{Oy:t.jy(s)})}static _y(i){const e=t.Ny(i,Zt.Vv),s=js(dt.Zm(i),Zt.Wv);return Tt({},e,{zy:t.Py(s)})}static uy(i){const e=t.My(i,Zt.Hv),s=dt.Zm(i),n=js(s,Zt.qv),r=t.By(n),h=bl(s,Zt.Xv);return Tt({},e,{Ry:r,Uy:h?t.Qy(h):void 0})}static By(t){return{Rg:Zt.qv,wd:t.Wm()}}static Qy(t){return{Rg:Zt.Xv,kh:t.Wm()}}static jy(t){return dt.cp(t,Zt.Gv,!0)}static Py(t){return dt.cp(t,Zt.Wv,!0)}static wy(i){const e=t.Ey(i,Zt.Lv),s=dt.Zm(i),n=js(s,Zt.Cv),r=bl(s,Zt.Fv);return Tt({},e,{Fy:t.Yy(n),Gy:r?t.Vy(r):void 0})}static Ay(i,e){const s=t.Ey(i,e),n=js(dt.Zm(i),Zt.zv);return Tt({},s,{Wy:t.Hy(n)})}static vy(i,e){const s=t.Ey(i,e),n=js(dt.Zm(i),Zt.Bv);return Tt({},s,{qy:t.Xy(n)})}static py(i,e){const s=t.Ey(i,e),n=dt.Zm(i),r=js(n,Zt.Uv),h=t.Zy(r),o=bl(n,Zt.Qv);return Tt({},s,{Ky:h,Jy:o?t.$y(o):void 0})}static yy(i){const e=i.Em(),s=t.Ey(i,Zt.Kv),n=js(dt.Zm(i),Zt.Am),r=t.tM(n);return Tt({},s,{iM:t.oy(e,r.sM.eM),nM:r})}static gy(i){const e=i.Em(),s=t.Ny(i,Zt.Zv),n=js(dt.Zm(i),Zt.Am),r=t.tM(n);return Tt({},s,{iM:t.sy(e,r.sM.eM),nM:r})}static tM(i){const e=js(dt.Zm(i),Zt.vm),s=t.rM(e);return{Rg:Zt.Am,sM:s}}static rM(t){const i=t.Vm(4);return{Rg:Zt.vm,eM:i}}static Yy(t){return dt.ap(t,Zt.Cv,!0)}static Hy(t){return dt.ap(t,Zt.zv,!0)}static Xy(t){return dt.ap(t,Zt.Bv,!0)}static Zy(t){return dt.ap(t,Zt.Uv,!0)}static $y(t){const i=t.Vm(4);switch(i){case"nclx":return{hM:Zf.ON_SCREEN_COLOURS,oM:t.Bm(),aM:t.Bm(),uM:t.Bm(),cM:0!=(128&t.jm())};case"rICC":return{hM:Zf.RESTRICTED_ICC_PROFILE};case"prof":return{hM:Zf.UNRESTRICED_ICC_PROFILE};default:throw g("Could not parse ColourInformationBox: unknown type '"+i+"'.")}}static Vy(t){const i=t.Um(),e=t.Um();return{Rg:Zt.Fv,lM:i,dM:e}}static Sp(i){const e=In(dt.Zm(i),Zt.bv).map(t.fM);return{Rg:Zt.Ev,Z:e}}static fM(t){const i=t.Um(),{version:e,flags:s}=_u(i),n=t.Um(),r=t.Um(),h=t.Um(),o=t.Um(),a=t.Um();return{Rg:Zt.bv,lp:e,dp:s,Qp:n,_M:r,gM:h,wM:o,AM:a}}static yp(i,e){const s=dt.Zm(i),n=js(s,Zt.$v),r=In(s,Zt.tm),h=t.vM(n),o=r.map(t.mM);return{Rg:Zt.Jv,pM:e,np:h,Z:o}}static vM(t){const i=t.Um(),{version:e,flags:s}=_u(i),n=t.Um();return{Rg:Zt.$v,lp:e,dp:s,yM:n}}static mM(i){const e=dt.Zm(i),s=js(e,Zt.im),n=In(e,Zt.nm),r=bl(e,Zt.hm),h=t.MM(s),o=n.map((i=>t.TM(i,h))),a=r?t.NM(r):void 0;return{Rg:Zt.tm,np:h,DM:o,IM:a}}static MM(t){const i=t.Um(),{version:e,flags:s}=_u(i),n=t.Um(),r=s.Cm(T.BASE_DATA_OFFSET_PRESENT)?t.Fm():void 0,h=s.Cm(T.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.Um():void 0,o=s.Cm(T.DEFAULT_SAMPLE_DURATION_PRESENT)?t.Um():void 0,a=s.Cm(T.DEFAULT_SAMPLE_SIZE_PRESENT)?t.Um():void 0,u=s.Cm(T.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.Um():void 0;return{Rg:Zt.im,lp:e,dp:s,Qp:n,SM:r,EM:h,gM:o,wM:a,AM:u}}static TM(i,e){const s=i.Um(),{version:n,flags:r}=_u(s),h=i.Um(),o=r.Cm(Xe.DATA_OFFSET_PRESENT)?i.Qm():void 0,a=r.Cm(Xe.FIRST_SAMPLE_FLAGS_PRESENT)?i.Um():void 0,u=[];for(let s=0;s<h;s++){const h=t.bM(i,r,n,e);0===s&&void 0!==a&&(h.dp=a),u.push(h)}return{Rg:Zt.nm,lp:n,dp:r,LM:h,pM:o,kM:a,CM:u}}static bM(t,i,e,s){return{ct:i.Cm(Xe.SAMPLE_DURATION_PRESENT)?t.Um():s.gM,rp:i.Cm(Xe.SAMPLE_SIZE_PRESENT)?t.Um():s.wM,dp:i.Cm(Xe.SAMPLE_FLAGS_PRESENT)?t.Um():s.AM,xM:i.Cm(Xe.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===e?t.Um():t.Qm():void 0}}static Np(t){const i=t.zm,e=t.Pm,s=oo(i,e),{version:n,flags:r}=_u(s);if(1===n){const t=oo(i,e),s=cn(i,e),h=oo(i,e),o=oo(i,e),a=J_(i,e),u=J_(i,e),c=Ko(Kn(i),e.Ku,i.byteLength);return e.Im(c.byteLength),{Rg:Zt.fm,lp:n,dp:r,OM:a,jM:u,kp:t,zM:s,PM:h,o:o,BM:c}}{const t=J_(i,e),s=J_(i,e),h=oo(i,e),o=oo(i,e),a=oo(i,e),u=oo(i,e),c=Ko(Kn(i),e.Ku,i.byteLength);return e.Im(c.byteLength),{Rg:Zt.fm,dp:r,lp:n,OM:t,jM:s,kp:h,RM:o,PM:a,o:u,BM:c}}}static Mp(t){return dt.ap(t,Zt.lm,!1)}static vp(i){const e=i.zm,s=i.Pm,n=Dt(Kn(e)).buffer,r=oo(e,s),{version:h,flags:o}=_u(r),a=t.UM(e,s),u=[];if(h>0){const t=oo(e,s);for(let i=0;i<t;i++){const t=Yu(e,s,16);u.push(t)}}const c=oo(e,s),l=new j(n,s.Ku,c);return s.Im(e.byteLength),{Rg:Zt.dm,lp:h,dp:o,QM:a,FM:u,YM:c,zm:l,GM:n}}static UM(t,i){let e="";for(let s=0;s<4;s++){const s=hl(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=hl(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=hl(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=hl(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<6;s++){const s=hl(t,i).toString(16);e+=1===s.length?"0"+s:s}return e.toLowerCase()}static Tp(t){const i=t.zm,e=t.Pm,s=oo(i,e),{version:n,flags:r}=_u(s),h=oo(i,e),o=oo(i,e);let a,u;0===n?(a=Ce.fromBits(oo(i,e),0,!0),u=Ce.fromBits(oo(i,e),0,!0)):(a=cn(i,e),u=cn(i,e)),e.Im(2);const c=il(i,e),l=[];for(let t=0;t<c;t+=1){const t=oo(i,e),s=t>>31&1,n=2147483647&t,r=oo(i,e),h=oo(i,e),o=h>>31&1,a=h>>28&7,u=268435455&h;l.push({VM:s,WM:n,ct:r,HM:o,qM:a,XM:u})}return{Rg:Zt._m,lp:n,dp:r,ZM:h,kp:o,KM:a,JM:u,$M:c,tT:l}}static NM(t){const i=t.zm,e=t.Pm,s=oo(i,e),{version:n,flags:r}=_u(s);let h;return h=0===n?Ce.fromBits(oo(i,e),0,!0):cn(i,e),{Rg:Zt.hm,lp:n,dp:r,IM:h}}},wg={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function Ag(t){if(!t)return!0;const i=t.licenseAcquisitionURL,e=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,h=t.queryParameters;return!(i||e||s||n||r||h)}function vg(t){return t&&void 0!==t.licenseAcquisitionURL}var mg,Vt,pg=vg,yg=vg;function Mg(t){if(!t)return!0;if(Ig(t))return!1;const i=t.fairplay,e=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return Ag(i)&&Ag(e)&&Ag(s)&&void 0===n&&Ag(r)}function Tg(t){const i=dl(t),e=function(t){var i;const e=t;return Vf(e)&&""!==(null==(i=e.fairplay)?void 0:i.headers.PreAuthorization)&&!Gf(e)}(t);return(!i||!e)&&(i||e)}function Ng(t){return t.integration===vn}function Dg(t){const i=t;if(!i)return!1;if(Mg(i))return!1;const e=i.fairplay,s=i.playready,n=i.widevine,r=i.clearkey;if(Ig(t))return!0;if(e&&!function(t){const i=t;return i&&(void 0!==i.certificateURL||void 0!==i.certificate)}(e))return!1;if(s&&!pg(s))return!1;if(n&&!yg(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(i.integration){if(va._v.ov(i.integration))return!0;switch(i.integration){case Pf:if(!function(t){const i=t,e=i.integration===Pf;return e&&(Sg(t)||Eg(t))}(t))return!1;break;case mn:if(!Fn(t))return!1;break;case wl:if(!function(t){const i=t;return i.integration===wl}(t))return!1;break;case vn:if(!Ng(t))return!1;break;case Lc:if(!Tg(t))return!1;break;case _l:if(!function(t){const i=t;return i.integration===_l}(t))return!1;break;case Bf:if(!Ig(t))return!1;break;case Rf:if(!function(t){const i=t;return i.integration===Rf&&(void 0!==i.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(i))}(t))return!1;break;case kl:if(!function(t){const i=t;return i.integration===kl}(t))return!1;break;case Uf:if(!bg(t))return!1;break;case Ml:if(!function(t){return t.integration===Ml}(t))return!1;break;case bn:if(!Nn(t))return!1;break;case Wc:if(!function(t){const i=t;return i.integration===Wc&&void 0!==i.token}(t))return!1;break;case jl:if(!function(t){const i=t;return i.integration===jl}(t))return!1;break;case Qf:if(!function(t){const i=t;return i&&Yt(i.releasePid)&&Yt(i.accountId)&&Yt(i.token)}(t))return!1;break;case Ff:return!0;default:return!1}}return!0}function Ig(t){return t.integration===Bf}function Sg(t){return void 0!==t.authToken}function Eg(t){const i=t;return void 0!==i.accountName&&void 0!==i.customerName&&void 0!==i.portalId}function Fn(t){const i=t;return i.integration===mn&&void 0!==i.token}function bg(t){const i=t;return i&&i.integration===Uf&&Qs(i.ticketAcquisitionURL)&&Qs(i.streamId)}function Nn(t){const i=t;return i.integration===bn&&void 0!==i.token}function Lg(t,i){const e=i[t];var s;const n=null!=(s=null==e?void 0:e.licenseAcquisitionURL)?s:wg[t];var r;const h=null!=(r=null==e?void 0:e.customdata)?r:i.customdata,o=h?{customData:h}:{};var a;const u=Tt({},null!=(a=null==e?void 0:e.headers)?a:{},o),c=null!=e?e:{},{customdata:l}=c;return Tt({},Yf(c,["customdata"]),{licenseAcquisitionURL:n,headers:u})}function Gc(t){switch(t.toLowerCase()){case"widevine":case gt:return gt;case"playready":case Gi:return Gi;case"fairplay":case Ca:return Ca}}function kg(t,i){switch(t){case Jf:return function(t){const i={},e=Lr.Ap(new DataView(t));for(const t of e)i[t.QM]=t.GM;return i}(i);case $f:case t_:return function(t){return{[Qc]:t}}(i);default:throw new $i(Ui.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}function Ia(t,i,e){const s=function(t,i,e){var s;const{useCredentials:n,crossOrigin:r}=function(t,i){let e=Jh.EA;return t.useCredentials?e=Jh.LA:t.crossOrigin&&(e=qg(t.crossOrigin)),e===Jh.EA&&i&&i.vr&&i.vr[360]&&(e=Jh.bA),{useCredentials:e===Jh.LA,crossOrigin:e}}(t,i);let h=t.liveOffset;Yt(h)||(h=e&&Yt(e.liveOffset)?e.liveOffset:void 0);let o=t.timeServer;Yt(o)||(o=i&&Yt(i.timeServer)?i.timeServer:void 0);let a=t.hlsDateRange;Yt(a)||(a=e&&Yt(e.hlsDateRange)?Boolean(e.hlsDateRange):void 0);const u=Boolean(t.experimentalRendering),c=Boolean(t.nativeUiRendering),l=Boolean(t.lowLatency),d=Boolean(t.useNativePlayback),f=Boolean(t.useManagedMediaSource),_=Yt(t.dash)?xg(t.dash):void 0,g=Yt(t.hls)?Og(t.hls):void 0,w=Pg(zg(t.abr),null==e?void 0:e.abr),A=pu(t.lcevc),v=Yt(t.ignoreEmbeddedTextTrackTypes)?aw(t.ignoreEmbeddedTextTrackTypes):[];var m;const p=Vg(null!=(m=t.seamlessSwitchStrategy)?m:null==(s=t.dash)?void 0:s.useSeamlessPeriodSwitch),y=Gg(t.latencyConfiguration);return{crossOrigin:r,useCredentials:n,liveOffset:h,timeServer:o,hlsDateRange:a,experimentalRendering:u,nativeUiRendering:c,lowLatency:l,useNativePlayback:d,useManagedMediaSource:f,dash:_,hls:g,abr:w,lcevc:A,ignoreEmbeddedTextTrackTypes:v,seamlessSwitchStrategy:p,latencyConfiguration:y}}(t,i,e),n=Hc(t.src);let r=t.type;r||(r=t.src?$n(t.src):void 0);const h=function(t,i){let e;e=Yt(t.contentProtection)?t.contentProtection:Yt(t.drm)?t.drm:Yt(i)&&Yt(i.contentProtection)?i.contentProtection:Yt(i)&&Yt(i.drm)?i.drm:void 0;return Cg(e)}(t,i);return Tt({},s,{src:n,type:r,contentProtection:h,ssai:Yt(t.ssai)?zf(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function Cg(t){return Dg(t)&&t.integration&&t.integration===Bf?function(t){const i=Lg(vi.BA,t),e=Lg(vi.PA,t),s=t[vi.RA]&&Lg(vi.RA,t);return Tt({integration:"keyos",widevine:i,playready:e},s?{fairplay:s}:{})}(t):t}function xg(t){return{useSeamlessPeriodSwitch:Vg(null==t?void 0:t.useSeamlessPeriodSwitch),needsTimescaleShifting:pu(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?Mh(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:pu(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:pu(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:pu(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards)}}function Og(t){return{discontinuityAlignment:jg(null==t?void 0:t.discontinuityAlignment),delaySubtitlePreload:ln(null==t?void 0:t.delaySubtitlePreload)}}function jg(t){if(!t||!Qs(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}function zg(t){if(!Yt(t))return;return Bg(Zd(null==t?void 0:t.preferredAudioCodecs,gi),Zd(null==t?void 0:t.preferredVideoCodecs,gi),pu(null==t?void 0:t.restrictToPlayerSize))}function Pg(t,i){if(!Yt(t)&&!Yt(i))return;var e;return Bg(Rg(null==t?void 0:t.preferredAudioCodecs,null==i?void 0:i.preferredAudioCodecs),Rg(null==t?void 0:t.preferredVideoCodecs,null==i?void 0:i.preferredVideoCodecs),null!=(e=null==t?void 0:t.restrictToPlayerSize)?e:null==i?void 0:i.restrictToPlayerSize)}function Bg(t,i,e){if(0!==t.length||0!==i.length||void 0!==e)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===i.length?void 0:i,restrictToPlayerSize:e}}function Rg(t,i){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=i?i:[]}function Ug(t,i){if(void 0!==i)switch(t){case Vt.pm:return i.preferredVideoCodecs;case Vt.ym:return i.preferredAudioCodecs;default:return}}!function(t){t.iT="auto",t.eT="playlist",t.sT="media"}(mg||(mg={})),function(t){t.ym="audio",t.pm="video",t.Ru="text",t.nT="image",t.rT="unknown"}(Vt||(Vt={}));var Bn,ps,Ba,Un,Kc,ae,Qg=.66,Fg=1.5,Yg=3;function Gg(t){if(!Yt(t))return;const i=t.targetOffset;var e;var s;var n;var r;var h;return{minimumOffset:null!=(e=t.minimumOffset)?e:i*Qg,targetOffset:i,maximumOffset:null!=(s=t.maximumOffset)?s:i*Fg,forceSeekOffset:null!=(n=t.forceSeekOffset)?n:i*Yg,minimumPlaybackRate:null!=(r=t.minimumPlaybackRate)?r:of,maximumPlaybackRate:null!=(h=t.maximumPlaybackRate)?h:Da}}function Vg(t){if(!t||!Qs(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}function Wg(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":return!0;default:return!1}}function Hg(t){return!!t&&is(t,"mpd")}function $n(t){let i=ii.OA;return Hg(t)&&(i=ii.kA),function(t){return!!t&&is(t,"m3u8")}(t)&&(i=ii.CA),i}function qg(t){switch(t){case Jh.bA:case Jh.LA:return t;default:return Jh.EA}}function Xg(t){if(!t)return!1;const i=t.toLowerCase();return At(i,ii.kA)}function Ra(t){if(!t)return!1;const i=t.toLowerCase();return At(i,ii.CA)||At(i,ii.xA)}function au(t){return $l(t)&&$l(t.ssai)&&"google-dai"===t.ssai.integration}function Zg(t){return $l(t)&&Qs(t.integration)&&"verizon-media"===t.integration}function Kg(t){return $l(t)&&Qs(t.integration)&&"theolive"===t.integration}function Jg(t){return $l(t)&&Qs(t.integration)&&"mediatailor"===t.integration}function $g(t){if(Qs(t))return!t;if(Zg(t))return!t.id;if(au(t)){const i=t.ssai,e="live"===i.availabilityType&&i.assetKey,s="vod"===i.availabilityType&&i.contentSourceID&&i.videoID;return Boolean(e&&s)}return!t.src}function tw(t){return Boolean($l(t)&&Qs(t.src))}function iw(t){return t.type===ii.jA||t.type===ii.zA}function Ja(t){return Qs(t)||tw(t)||au(t)||Zg(t)}function ew(t){if(t){if(Ja(t))return $g(t);for(const i of t)if(!$g(i))return!1;return!0}return!0}function sw(){return{crossOrigin:Jh.EA,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[],seamlessSwitchStrategy:Bn.iT,latencyConfiguration:void 0}}function nw(){return Tt({},sw(),{src:void 0,type:ii.OA,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function rw(t){const i={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:Ba.ENABLED,googleIma:{useNativeIma:!1,bitrate:-1,language:void 0,uiElements:void 0}};return void 0===t||(void 0!==t.preload&&(i.preload=function(t){return"none"===t?Un.NONE:Un.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(i.showCountdown=ln(t.showCountdown)),void 0!==t.vpaidMode&&(i.vpaidMode=function(t){switch(t){case"insecure":return Ba.INSECURE;case"disabled":return Ba.DISABLED;default:return Ba.ENABLED}}(t.vpaidMode)),Gt(t.allowedMimeTypes)&&(i.allowedMimeTypes=t.allowedMimeTypes.filter(Qs)),void 0!==t.googleIma&&(i.googleIma=function(t){return void 0===t?{useNativeIma:!1,bitrate:-1,language:void 0,uiElements:void 0}:{useNativeIma:ln(t.useNativeIma),bitrate:null!=(i=t.bitrate)?i:-1,language:Yt(t.language)?gi(t.language):void 0,uiElements:t.uiElements};var i}(t.googleIma))),i}function hw(t){if(!We(t))return[];const i=[];for(const e of t)$l(e)&&i.push(e);return i}function ow(t){return Qs(t.src)}function aw(t){return Gt(t)?t.filter(Wg):[]}!function(t){t.iT="auto",t.hT="always",t.oT="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only"}(Bn||(Bn={})),function(t){t.VERIZON_MEDIA="verizon-media",t.MEDIATAILOR="mediatailor",t.THEOLIVE="theolive"}(ps||(ps={})),function(t){t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled"}(Ba||(Ba={})),function(t){t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll"}(Un||(Un={})),function(t){t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange"}(Kc||(Kc={})),function(t){t[t.aT=0]="aT",t[t.Xn=1]="Xn",t[t.uT=2]="uT",t[t.cT=3]="cT",t[t.lT=4]="lT"}(ae||(ae={}));var uw=class extends wn{constructor(t,i=ae.aT){super(l.Zg),this.currentTime=t,this.readyState=i}},ge=class extends wn{constructor(t){super(l.Sh),this.currentTime=t}},sh=class extends wn{constructor(t){super(l.jh),this.currentTime=t}},ns=class extends wn{constructor(t,i=ae.Xn){super(he.Pw),this.currentTime=t,this.readyState=i}},jn=class extends wn{constructor(t){super(l.Xg),this.duration=t}},ls=class extends wn{constructor(t,i){super(l.ww),this.currentTime=t,this.playbackRate=i}},Pc=class extends wn{constructor(t,i){super(l.Sw),this.currentTime=t,this.currentProgramDateTime=i}},ee=class extends wn{constructor(t){super(l.Jg),this.currentTime=t}},us=class extends wn{constructor(t,i=ae.uT){super(he.zw),this.currentTime=t,this.readyState=i}},Eh=class extends wn{constructor(t){super(l.yw),this.currentTime=t}},we=class extends wn{constructor(t){super(l.pw),this.currentTime=t}},Je=class extends wn{constructor(t,i){super(l.Ew),this.currentTime=t,this.volume=i}},xt=class extends wn{constructor(t,i=ae.cT){super(he.Ow),this.currentTime=t,this.readyState=i}},ds=class extends wn{constructor(t,i=ae.lT){super(he.jw),this.currentTime=t,this.readyState=i}},ro=class extends wn{constructor(t,i){super(he.H_),this.currentTime=t,this.readyState=i}},Dr=class extends yo{get error(){return this.errorObject.message}fa(){return this}constructor(t){super(ut.ha),this.errorObject=t}};async function mu(t,i,e,s,n){void 0===e&&(e=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(i)}catch(t){if(Ao(t),r<e){const t=_.min(s*2**r,n);r++,await lt(t,i);continue}throw t}}var cw,lw={maxRetries:1/0,minimumBackoff:200,maximumBackoff:3e4};function dw(t){switch(t){case"all":case"content":return t;default:return"none"}}function fw(t){const e=Oi(t||{});return e.libraryLocation&&(e.libraryLocation=oa(e.libraryLocation,!0)),e.isEmbeddable=Boolean(e.isEmbeddable),e.cast=function(t){const i=Of(t?t.chromecast:void 0),e=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:i,strategy:e}}(e.cast),e.ads=rw(e.ads),e.analytics=hw(e.analytics),e.mutedAutoplay=dw(e.mutedAutoplay),e.allowNativeFullscreen=Boolean(e.allowNativeFullscreen),e.allowMixedContent=Boolean(e.allowMixedContent),e.persistVolume=Boolean(e.persistVolume),e.liveOffset=function(t){return Number(t)||void 0}(e.liveOffset),e.hlsDateRange=function(t){return Boolean(t)}(e.hlsDateRange),e.retainPlaybackRateOnSourceChange=Boolean(e.retainPlaybackRateOnSourceChange),e.license=function(t){return Qs(t)?t:void 0}(e.license),e.licenseUrl=function(t){if(!t)return;try{return oa(t)}catch(t){return void i.SA("Invalid 'licenseUrl', falling back to default URL")}}(e.licenseUrl),e.vr=function(t){return{useWebXR:Boolean(t&&t.useWebXR)}}(e.vr),e.abr=zg(e.abr),e.retryConfiguration=function(t){const i=Tt({},lw);return void 0!==t&&(void 0!==t.maxRetries&&(i.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(i.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(i.maximumBackoff=Number(t.maximumBackoff))),i}(e.retryConfiguration),e.hideDeprecationWarnings=Boolean(e.hideDeprecationWarnings),e.theoLive=function(t){if(!t)return t;return Tt({},t,{externalSessionId:t.externalSessionId?gi(t.externalSessionId):void 0,fallbackEnabled:pu(t.fallbackEnabled)})}(e.theoLive),e}function _w(t){return{bt:t.bt,Mf:t.Mf,ct:t.ct,If:t.If,lt:t.lt,bf:t.bf,Pf:t.Pf,Ff:t.Ff,Gf:t.Gf,Jf:t.Jf,e_:t.e_,r_:t.r_,a_:t.a_,c_:t.c_}}function gw(t,i){const e=i.c_,s=i.Pf;t.c_=e,t.Pf=s}function yu(t,i,e){if(i===e)return;const s=i.bt!==e.bt,n=i.Mf,r=i.ct,h=i.Pf,o=i.Ff,a=i.Gf,u=i.Jf,c=i.e_,l=(i.a_,i.r_,i.c_),d=e.Mf,f=e.ct,_=e.If,g=e.bf,w=e.Pf,A=e.Ff,v=e.Gf,m=e.Jf,p=e.e_,y=(e.a_,e.r_,e.c_);(s||u>ae.aT&&m===ae.aT)&&t.Co(new uw(d,m)),A&&!o?t.Co(new ge(d)):!A&&o&&t.Co(new sh(d)),m>=ae.Xn&&(s||u<ae.Xn)&&t.Co(new ns(d,m)),f===r||S(f)&&S(r)||t.Co(new jn(f)),v!==a&&t.Co(new ls(d,v)),d!==n&&t.Co(new Pc(d,void 0)),_&&t.Co(new ee(d)),m>=ae.uT&&(s||u<ae.uT)&&t.Co(new us(d,m)),p&&!c?t.Co(new Eh(d)):!p&&c&&t.Co(new we(d)),y===l&&w===h||t.Co(new Je(d,y)),m>=ae.cT&&(s||u<ae.cT)&&t.Co(new xt(d,m)),m>=ae.lT&&(s||u<ae.lT)&&t.Co(new ds(d,m)),m!==u&&t.Co(new ro(d,m)),g&&t.Co(new Dr(g))}!function(t){t.NONE="none",t.ALL="all",t.CONTENT="content"}(cw||(cw={}));var St=class extends wn{constructor(t){super(l.Hg),this.currentSource=t}},ww=class extends wn{constructor(){super(l.$g)}},Xt=class extends wn{constructor(){super(l.ew)}},Aw=class extends jd{df(){return this.dT}get kf(){return this.Cf()}Cf(){return this.fT}n_(){return this.Dl}o_(){return this._T}gT(t){const i=this._f;if(i===t)return;i.cf(this.b_);const e=_w(this),s=this.yf(),n=this.w_(),r=this.A_();this._f=t,this.dT.fg=t.ht,this._T.fg=t.rt,this.Dl.fg=t.nt,this.fT.fg=t.kf,void 0!==e&&yu(this,e,this);const h=this.yf();h!==s&&this.Co(new St(h)),this.w_()!==n&&this.Co(new ww),this.A_()!==r&&this.Co(new Xt),t.sf(this.b_)}async gn(){await super.gn(),this.dT.gn(),this._T.gn(),this.Dl.gn(),this.fT.gn()}constructor(t){super(t),this.dT=new Ms,this._T=new Ms,this.Dl=new yc,this.fT=new ga,this.dT.fg=t.ht,this._T.fg=t.rt,this.Dl.fg=t.nt,this.fT.fg=t.kf}};var vw,mw=class extends Aw{zf(){return function(t){let i=0,e=0,s=0,n=0,r=0,h=0,o=0;for(const a of t)i+=a.wT,e+=a.AT,s+=a.vT,n+=a.mT,r+=a.pT,h+=a.yT.amountOfBufferedAudioSegments,o+=a.yT.amountOfBufferedVideoSegments;return{wT:i,AT:e,vT:s,mT:n,pT:r,yT:{amountOfBufferedAudioSegments:h,amountOfBufferedVideoSegments:o}}}(this.MT.map((t=>t.jf)))}y_(){return Xc(this.MT.map((t=>t.y_()))).then(qt)}tr(){return Xc(this.MT.map((t=>t.tr()))).then(qt)}v_(){if(!this.bo){for(const t of this.MT)t.v_();this.bo=!0}}gf(){const t=[];for(const i of this.MT)t.push(...i.gf());return t}S_(t){let i=!1;for(const e of this.MT)i=e.S_(t)||i;return i}Co(t){this.S_(t)||super.Co(t)}get fg(){return this._f}set fg(t){this.gT(t)}TT(t){this.MT.push(t)}NT(t){To(this.MT,t)}gT(t){if(t===this._f)return;const i=this._f;i.ar(),super.gT(t),t.ur(i)}D_(){for(const t of this.MT)t.D_()}async gn(){this.Vo(),this._f.ar();for(const t of this.MT)this._f!==t&&await t.gn();await super.gn()}constructor(t){super(t),this.MT=[],this.bo=!1,this.DT=!1,this.TT(t)}};!function(t){t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR"}(vw||(vw={}));var Ac=class extends So{get name(){return"MediaError"}constructor(t,i,e,s){super(i),this.code=t,this.message=null!=i?i:"Unknown error",this.cause=e,this.systemCode=s,g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}};function pw(t){zo(t,"MEDIA_ERR_ABORTED",1),zo(t,"MEDIA_ERR_NETWORK",2),zo(t,"MEDIA_ERR_DECODE",3),zo(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),zo(t,"MEDIA_ERR_ENCRYPTED",5)}function Ki(t){var i,e;return function(t){return t.category===ll.CONTENT_PROTECTION}(t)?new Ac(5,t.message,null==(i=t.cause)?void 0:i.message,t.systemCode):new Ac(yw(t.code),t.message,null==(e=t.cause)?void 0:e.message)}function yw(t){if(t===Ui.MEDIA_ABORTED)return 1;if(t===Ui.MANIFEST_LOAD_ERROR||t===Ui.MEDIA_LOAD_ERROR||t===Ui.SUBTITLE_LOAD_ERROR)return 2;if(t===Ui.MEDIA_DECODE_ERROR)return 3;if(t===Ui.MEDIA_NOT_SUPPORTED)return 4;const i=ll.fromCode(t);return i===ll.NETWORK?2:i===ll.SOURCE?4:i===ll.LICENSE?6:i===ll.CONTENT_PROTECTION?5:i===ll.AD?7:3}function Hs(t){return new $i(Mw(t.code),t.message,t)}function Mw(t){switch(t){case 1:return Ui.MEDIA_ABORTED;case 2:return Ui.NETWORK_ERROR;case 3:return Ui.MEDIA_DECODE_ERROR;case 4:return Ui.SOURCE_NOT_SUPPORTED;case 5:return Ui.CONTENT_PROTECTION_ERROR;case 6:return Ui.LICENSE_ERROR;case 7:return Ui.AD_ERROR}}pw(Ac),pw(Ac.prototype);var Ae=class extends Fi{tt(t){return super.tt(t)}fa(){return sf(this)}};var Tw=class{get og(){return this.IT}get U(){return this.IT.length}get va(){return this.Xa||(this.Xa=function(t){const i=t.og.map((t=>t.va));return i.item=i=>{const e=0|i,s=t.cg(e);return s&&s.va||void 0},i}(this)),this.Xa}ST(t){this.IT.push(t),this.Xa&&this.Xa.push(t.va)}ET(t){To(this.IT,t),this.Xa&&To(this.Xa,t.va)}cg(t){return this.IT[t]}bT(t){return Gt(t)?function(t,i){for(const e of i)if(!gd(t,e))return!1;return!0}(this.IT,t):gd(this.IT,t)}tr(){No(this.IT),this.Xa&&No(this.Xa)}constructor(){this.IT=[],this.Xa=void 0}},Gs=class extends Ih{fa(){return new Nw(this.Lt.va)}constructor(t){super(qo.K_),this.Lt=t}},Nw=class extends ko{constructor(t){super("update"),this.track=t}},Dw=0;function du(){return Dw++}var Iw=0;var Sw=0;function Ew(){return Sw++}var bw=0;function Lw(){return bw++}var kw=0;var Cw=class extends xd{get yg(){}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.LT=t,this.Co(new no(this)))}get LT(){return this.kT.enabled}set LT(t){this.kT.enabled=t}get va(){return this.Xa||(this.Xa=Pi(this)),this.Xa}get o(){return this.CT}get Mg(){return this.xT}get zt(){return this.kT.kind}get kh(){return this.OT}set kh(t){t!==this.OT&&(this.OT=t,this.Co(new Gs(this)))}get gs(){return this.kT.language}get jg(){return this.Rt?"enabled":"disabled"}get jT(){return this.kT}get Ng(){return this.IT}get Dg(){}set Dg(t){}zT(t){this.Rt=t}PT(){this.Rt=this.LT}constructor(t){super(),this.Rg=Vt.ym,this.Le=!1,this.Xa=void 0,this.kT=t,this.xT=du(),this.CT=kw+++"",this.OT=t.label,this.IT=new Tw,this.PT()}},xw=0;var Ua,za,Ow=class extends xd{get yg(){}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.LT=t,this.Co(new no(this)))}get LT(){return!!this.kT.selected}set LT(t){this.kT.selected=t}get va(){return this.Xa||(this.Xa=Pi(this)),this.Xa}get o(){return this.CT}get Mg(){return this.xT}get zt(){return"main"}get kh(){return this.OT}set kh(t){t!==this.OT&&(this.OT=t,this.Co(new Gs(this)))}get gs(){return this.kT.language}get jg(){return this.Rt?"enabled":"disabled"}get jT(){return this.kT}get Ng(){return this.IT}get Dg(){}set Dg(t){}PT(){this.Rt=this.LT}zT(t){this.Rt=t}constructor(t){super(),this.Rg=Vt.pm,this.Le=!1,this.Xa=void 0,this.kT=t,this.xT=du(),this.CT=xw+++"",this.IT=new Tw,this.OT=t.label,this.PT()}},jw=class extends wn{constructor(t){super(l.Qg),this.xf=t}};!function(t){t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR"}(Ua||(Ua={})),function(t){t.BT="cue",t.RT="region",t.UT="stylesheet"}(za||(za={}));var Sl,zw={"line-left":"start",center:"middle","line-right":"end"},Pw={start:"line-left",middle:"center",end:"line-right"};function Bw(t,i){if("auto"===t)switch(i){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function Rw(t,i){if("auto"===t)switch(i){case"left":return 0;case"right":return 100;default:return 50}return function(t,i){const e="number"==typeof t?t:C(t);return S(e)?i:e}(t,50)}!function(t){t.QT="mo",t.FT="So",t.K_="Yn"}(Sl||(Sl={}));var $a=class extends Ih{constructor(t,i){super(t),this.YT=i}},fu=class extends ko{constructor(t,i){super(t),this.cue=i}};function $h(t){const i=[Sl.QT,Sl.FT,Sl.K_];let e;const s={get track(){return t.Lt.va},get id(){return t.o},get uid(){return t.Mg},get startTime(){return t.GT},set startTime(i){t.GT=i},get endTime(){return t.VT},set endTime(i){t.VT=i},get content(){return t.O},addEventListener(t,i){const s=zs(t,gi);e.yn(s,i)},removeEventListener(t,i){const s=zs(t,gi);e.fn(s,i)}};return e=new rt(s),t.yn(i,(t=>e.Co(t.va))),s}function Uw(){}function Qw(t){return N($h(t),{get align(){return t.WT},get line(){return t.HT},get lineAlign(){return t.qT},get position(){return t.po},get positionAlign(){return t.XT},get region(){return t.ZT?t.ZT.va:null},get size(){return t.rp},get snapToLines(){return t.KT},get text(){return t.O},get vertical(){return t.Pt}})}var gu=class extends $a{fa(){return new Fw(this.YT.va)}constructor(t){super(Sl.K_,t)}},Fw=class extends fu{constructor(t){super("update",t)}},Ya=class extends Ih{fa(){return new Yw(this.YT.va)}constructor(t){super(qo.B_),this.YT=t}},Yw=class extends ko{constructor(t){super("updatecue"),this.cue=t}},Gw=.02;function Vw(t,i){return ku(t.JT,i.JT,Gw)&&ku(t.$T,i.$T,Gw)&&t.o===i.o}var Xn=class extends xd{get GT(){return this.tN}set GT(t){var i,e;this.tN!==t&&(this.tN=t,null==(i=this.iN)||i.eN(this),this.Co(new gu(this)),null==(e=this.iN)||e.Co(new Ya(this)))}get VT(){return this.sN}set VT(t){var i,e;this.sN!==t&&(this.sN=t,null==(i=this.iN)||i.eN(this),this.Co(new gu(this)),null==(e=this.iN)||e.Co(new Ya(this)))}get o(){return this.CT}get Mg(){return this.xT}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return $h(this)}get ro(){return this.ho}set ro(t){this.ho=t}get Lt(){return this.iN}set Lt(t){this.iN=t}get O(){return this.nN}set O(t){var i;this.nN!==t&&(this.nN=t,this.Co(new gu(this)),null==(i=this.iN)||i.Co(new Ya(this)))}get rN(){return this.hN}set rN(t){this.hN=t}oN(t){return this===t||Wd(this,t)&&Vw(this,t)&&this.aN(t)}aN(t){return Th(this.O,t.O)}uN(t,i){this.tN=t,this.sN=i,this.JT=t,this.$T=i}gn(){this.Vo()}constructor(t,i,e,s,n){super(),this.Xa=void 0,this.iN=void 0,this.ho=!1,this.cN=-1,this.xT=Lw(),this.tN=t,this.sN=i,this.JT=t,this.$T=i,this.nN=e,this.hN=Boolean(s),this.CT=null!=n?n:""}};function Ww(t,i){return t.O===i.O&&t.HT===i.HT&&t.qT===i.qT&&t.po===i.po&&t.XT===i.XT&&t.ZT===i.ZT&&t.KT===i.KT&&t.rp===i.rp&&t.WT===i.WT&&t.Pt===i.Pt}var Li=class extends Xn{get va(){return this.Xa||(this.Xa=Qw(this)),this.Xa}get Rg(){return za.BT}aN(t){return Ww(this,t)}constructor(t,i,e,s,n){super(t,i,e,s,n),this.HT="auto",this.qT="start",this.po="auto",this.XT="auto",this.ZT=void 0,this.KT=!0,this.rp=100,this.WT="center",this.Pt=""}};function Ii(t){const i=t.HT,e=ed(i);return e&&!t.KT&&(i<0||i>100)?100:e?Number(i):t.KT?-1:100}function Hw(t){return Rw(t.po,t.WT)}function qw(t){return Bw(t.XT,t.WT)}function Xw(t){const i=qw(t),e=Hw(t);let s;switch(i){case"line-left":s=100-e;break;case"line-right":s=e;break;case"center":s=e<=50?2*e:2*(100-e)}return _.min(t.rp,s)}function Zw(t){return{get id(){return t.o},get identifier(){return t.o},get lines(){return t.lN},get regionAnchorX(){return t.dN},get regionAnchorY(){return t.fN},get scrollValue(){return t._N},get viewportAnchorX(){return t.gN},get viewportAnchorY(){return t.wN},get width(){return t.ji}}}var Kw=class{get va(){return this.Xa||(this.Xa=Zw(this)),this.Xa}get Rg(){return za.RT}constructor(t,i,e,s,n,r,h,o){this.o=t,this.ji=i,this.lN=e,this.dN=s,this.fN=n,this.gN=r,this.wN=h,this._N=o}},Jw=1e6,$w=class{AN(t){return this.vN()*t}mN(t){return this.pN(t)>0}yN(t){return this.pN(t)>=0}MN(t,i){return this.NN(t).TN(i)}oN(t){return 0===this.pN(t)}DN(t){return this.pN(t)<0}TN(t){return this.pN(t)<=0}IN(){return this.SN()?this.EN():this}bN(t){return this.ST(t.EN())}NN(t){return this.bN(t).IN()}};function tA(t,i){return t.LN()?i.LN()?Va.Zr:Va.ul:i.LN()?Va.hd:t.kN()?i.kN()&&t.SN()===i.SN()?Va.Zr:t.SN()?Va.hd:Va.ul:i.SN()?Va.ul:Va.hd}var iA=4294967296,eA=iA*iA,sA=eA*eA,nA=sA/2,be=class t{static CN(i,e,s){return s?new t(i.toUnsigned(),e.toUnsigned()):new t(i.toSigned(),e.toSigned())}static xN(i){return i.unsigned?new t(i,Ce.UZERO):new t(i,i.isNegative()?Ce.NEG_ONE:Ce.ZERO)}static ON(i,e){if(S(i))return e?t.jN:t.zN;if(e){if(i<0)return t.jN;if(i>=sA)return t.PN}else{if(i<=-nA)return t.BN;if(i+1>=nA)return t.RN}return i<0?t.ON(-i,e).EN():t.CN(Ce.fromNumber(i%eA),Ce.fromNumber(i/eA),e)}UN(){return this.QN.unsigned}FN(){return this.YN.isZero()&&this.QN.isZero()}SN(){return this.QN.isNegative()}GN(){return this.UN()?t.CN(this.YN,this.QN,!1):this}VN(){return this.UN()?this:t.CN(this.YN,this.QN,!0)}WN(){return this.YN}vN(){return this.SN()?-this.EN().vN():this.QN.toNumber()*eA+this.YN.toUnsigned().toNumber()}HN(){return this.YN.toInt()}oN(t){return(this.UN()===t.UN()||this.QN.getHighBits()>>>31!=1||t.QN.getHighBits()>>>31!=1)&&(this.QN.toUnsigned().eq(t.QN.toUnsigned())&&this.YN.toUnsigned().eq(t.YN.toUnsigned()))}pN(t){if(this.oN(t))return Va.Zr;const i=this.SN(),e=t.SN();if(i&&!e)return Va.hd;if(!i&&e)return Va.ul;if(!this.UN())return this.bN(t).SN()?Va.hd:Va.ul;const s=this.VN(),n=t.VN(),r=n.QN.comp(s.QN);return r>0||0===r&&n.YN.gt(s.YN)?Va.hd:Va.ul}DN(t){return this.pN(t)<0}TN(t){return this.pN(t)<=0}qN(t){return this.pN(t)>0}XN(t){return this.pN(t)>=0}ZN(){return new t(this.YN.not(),this.QN.not())}KN(i){return new t(this.YN.and(i.YN),this.QN.and(i.QN))}JN(i){return new t(this.YN.or(i.YN),this.QN.or(i.QN))}$N(i){const e=127&i;return 0===e?this:e<64?t.CN(this.YN.shl(e),this.QN.shl(e).or(this.YN.shru(64-e)),this.UN()):t.CN(Ce.ZERO,this.YN.shl(e-64),this.UN())}tD(i){const e=127&i;return 0===e?this:e<64?t.CN(this.YN.shru(e).or(this.QN.shl(64-e)),this.QN.shr(e),this.UN()):t.CN(this.QN.shr(e-64),this.QN.isNegative()?Ce.NEG_ONE:Ce.ZERO,this.UN())}iD(i){const e=127&i;return 0===e?this:e<64?t.CN(this.YN.shru(e).or(this.QN.shl(64-e)),this.QN.shru(e),this.UN()):64===e?t.CN(this.QN,Ce.ZERO,this.UN()):t.CN(this.QN.shru(e-64),Ce.ZERO,this.UN())}ST(i){const e=this.QN.high>>>16,s=65535&this.QN.high,n=this.QN.low>>>16,r=65535&this.QN.low,h=this.YN.high>>>16,o=65535&this.YN.high,a=this.YN.low>>>16,u=65535&this.YN.low,c=i.QN.high>>>16,l=65535&i.QN.high,d=i.QN.low>>>16,f=65535&i.QN.low,_=i.YN.high>>>16,g=65535&i.YN.high,w=i.YN.low>>>16;let A=0,v=0,m=0,p=0,y=0,M=0,T=0,N=0;N+=u+(65535&i.YN.low),T+=N>>>16,N&=65535,T+=a+w,M+=T>>>16,T&=65535,M+=o+g,y+=M>>>16,M&=65535,y+=h+_,p+=y>>>16,y&=65535,p+=r+f,m+=p>>>16,p&=65535,m+=n+d,v+=m>>>16,m&=65535,v+=s+l,A+=v>>>16,v&=65535,A+=e+c,A&=65535;const D=this.UN(),I=Ce.fromBits(m<<16|p,A<<16|v,D),S=Ce.fromBits(T<<16|N,y<<16|M,D);return t.CN(S,I,D)}bN(t){return this.ST(t.EN())}EN(){return this.ZN().ST(t.eD)}sD(i){if(this.FN()||i.FN())return this.UN()?t.jN:t.zN;if(this.SN())return i.SN()?this.EN().sD(i.EN()):this.EN().sD(i).EN();if(i.SN())return this.sD(i.EN()).EN();if(this.QN.isZero()&&0===this.YN.high&&i.QN.isZero()&&0===i.YN.high)return t.xN(this.YN.multiply(i.YN));const e=Ce.fromBits(4294967295,0,!0),s=this.YN.and(e),n=this.YN.shru(32),r=this.QN.and(e),h=this.QN.shru(32),o=i.YN.and(e),a=i.YN.shru(32),u=i.QN.and(e),c=i.QN.shru(32);let l=Ce.UZERO,d=Ce.UZERO,f=Ce.UZERO,_=Ce.UZERO;l=l.add(s.mul(o)),d=d.add(l.shru(32)),l=l.and(e),d=d.add(n.mul(o)),f=f.add(d.shru(32)),d=d.and(e),d=d.add(s.mul(a)),f=f.add(d.shru(32)),d=d.and(e),f=f.add(r.mul(o)),_=_.add(f.shru(32)),f=f.and(e),f=f.add(n.mul(a)),_=_.add(f.shru(32)),f=f.and(e),f=f.add(s.mul(u)),_=_.add(f.shru(32)),f=f.and(e),_=_.add(h.mul(o)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(e);const g=Ce.fromBits(l.getLowBitsUnsigned(),d.getLowBitsUnsigned(),!0),w=Ce.fromBits(f.getLowBitsUnsigned(),_.getLowBitsUnsigned(),!0);return t.CN(g,w,this.UN())}nD(i){let e,s,n=i;if(n.FN())throw new RangeError("division by zero");if(this.FN())return this.UN()?[t.jN,t.jN]:[t.zN,t.zN];if(this.UN()){if(n.UN()||(n=n.VN()),n.qN(this))return[t.jN,this];if(n.qN(this.iD(1)))return s=t.rD,e=this.bN(n),[s,e];s=t.jN}else{if(this.oN(t.BN)){if(n.oN(t.eD)||n.oN(t.hD))return[t.BN,t.zN];if(n.oN(t.BN))return[t.eD,t.zN];{const i=this.tD(1).oD(n).$N(1);return i.oN(t.zN)?s=n.SN()?t.eD:t.hD:(e=this.bN(n.sD(i)),s=i.ST(e.oD(n))),e=this.bN(n.sD(s)),[s,e]}}if(n.oN(t.BN))return this.UN()?[t.jN,this]:[t.zN,this];if(this.SN())return n.SN()?this.EN().nD(n.EN()):([s,e]=this.EN().nD(n),[s.EN(),e.EN()]);if(n.SN())return[s,e]=this.nD(n.EN()),[s.EN(),e.EN()];s=t.zN}for(e=this;e.XN(n);){let i=_.max(1,_.floor(e.vN()/n.vN()));const r=_.ceil(_.log(i)/_.LN2),h=r<=48?1:2**(r-48);let o=t.ON(i),a=o.sD(n);for(;a.SN()||a.qN(e);)i-=h,o=t.ON(i,this.UN()),a=o.sD(n);o.FN()&&(o=t.eD),s=s.ST(o),e=e.bN(a)}return[s,e]}oD(t){return this.nD(t)[0]}aD(t){return this.nD(t)[1]}toString(i){const e=i||10;if(e<2||e>36)throw new RangeError("radix");if(this.FN())return"0";if(this.SN()){if(this.oN(t.BN)){const i=t.ON(e),s=this.oD(i),n=s.sD(i).bN(this);return s.toString(e)+n.HN().toString(e)}return"-"+this.EN().toString(e)}const s=t.ON(e**6,this.UN());let n=this,r="";for(;;){const t=n.oD(s);let i=(n.bN(t.sD(s)).HN()>>>0).toString(e);if(n=t,n.FN())return i+r;for(;i.length<6;)i="0"+i;r=String(i)+r}}constructor(t,i){this.YN=t,this.QN=i}};be.zN=be.xN(Ce.ZERO),be.jN=be.xN(Ce.UZERO),be.eD=be.xN(Ce.ONE),be.rD=be.xN(Ce.UONE),be.hD=be.xN(Ce.NEG_ONE),be.RN=be.CN(Ce.NEG_ONE,Ce.MAX_VALUE,!1),be.PN=be.CN(Ce.MAX_UNSIGNED_VALUE,Ce.MAX_UNSIGNED_VALUE,!0),be.BN=be.CN(Ce.ZERO,Ce.MIN_VALUE,!1);var rA=class t{get kN(){return!isFinite(this.uD)}get Kl(){return this.uD/this.kp}static cD(i){return new t(_.ceil(i.uD),i.kp)}static lD(i){return new t(_.floor(i.uD),i.kp)}static dD(t,i){return t.yN(i)?t:i}static fD(t,i){return t.TN(i)?t:i}ST(i){return this.kp>=i.kp?new t(this.uD+i._D(this.kp).uD,this.kp):new t(this._D(i.kp).uD+i.uD,i.kp)}mN(t){return t.DN(this)}yN(t){return t.TN(this)}NN(i){if(this.kp>=i.kp){const e=_.abs(this.uD-i._D(this.kp).uD),s=this.kp;return new t(e,s)}return i.NN(this)}MN(t,i){return this.NN(t).TN(i)}pN(t){return function(t,i){return t.kp>=i.kp?ud(t.uD,i._D(t.kp).uD):ud(t._D(i.kp).uD,i.uD)}(this,t)}oN(t){return 0===this.pN(t)}DN(t){return this.pN(t)<0}TN(t){return this.pN(t)<=0}_D(i){return new t(this.uD*(i/this.kp),i)}bN(i){return this.kp>=i.kp?new t(this.uD-i._D(this.kp).uD,this.kp):new t(this._D(i.kp).uD-i.uD,i.kp)}gD(i){return new t(this.uD*i,this.kp)}constructor(t,i=1){this.uD=t,this.kp=i}};rA.Zl=new rA(1/6,1),rA.zN=new rA(0),rA.wD=new rA(1/0),rA.vD=1e6;var Rh=class t extends $w{static mD(i,e){return void 0===e&&(e=Jw),t.ON(i*e,e)}static ON(i,e){return S(i)?t.pD:i===1/0?t.yD:i===-1/0?t.MD:new t(Ce.fromNumber(i),e)}static xN(i,e){return new t(i,e)}static TD(i){return t.mD(i.Kl,Jw)}static ND(i){return new t(Ce.fromNumber(i.getTime()),1e3)}static dD(t,i){return t.yN(i)?t:i}static fD(t,i){return t.TN(i)?t:i}static DD(i,e,s){return t.dD(e,t.fD(s,i))}SN(){return this.jM.isNegative()}FN(){return 0!==this.kp&&this.jM.isZero()}kN(){return 0===this.kp&&!this.jM.isZero()}LN(){return 0===this.kp&&this.jM.isZero()}vN(){if(0===this.kp)return this.jM.isZero()?NaN:this.jM.isNegative()?-1/0:1/0;const t=this.jM.divide(this.kp),i=this.jM.subtract(t.multiply(this.kp));return t.toNumber()+i.toNumber()/this.kp}WN(){if(0===this.kp)throw new g("Failed to convert timestamp");return this.jM}SD(){return new Date(0===this.kp?NaN:this._D(1e3).jM.toNumber())}ED(){return new rA(0===this.kp?this.vN():this.jM.toNumber(),this.kp)}_D(i,e){void 0===e&&(e=sc.bD);const s=this.kp;if(s===i)return this;if(0===s)return this;const n=ad(s,i),r=function(t,i,e){const[s,n]=t.nD(i);if(n.FN())return s;if(e===sc.bD)return n.SN()?s.bN(be.eD):s;if(e===sc.LD)return n.SN()?s:s.ST(be.eD);{const t=n.sD(be.ON(2));return t.SN()?t.EN().DN(i)?s:s.bN(be.eD):t.DN(i)?s:s.ST(be.eD)}}(be.xN(this.jM).sD(be.ON(i/n)),be.ON(s/n),e);return new t(r.WN(),i)}pN(t){if(this===t)return Va.Zr;if(0===this.kp||0===t.kp)return tA(this,t);if(this.FN())return t.FN()?Va.Zr:t.SN()?Va.ul:Va.hd;if(t.FN())return this.SN()?Va.hd:Va.ul;const i=_.min(this.kp,t.kp),e=this._D(i,sc.kD).jM,s=t._D(i,sc.kD).jM;return e.compare(s)}EN(){return 0===this.kp?function(t){0;return t.LN()?t:t.SN()?Rh.yD:Rh.MD}(this):new t(this.jM.negate(),this.kp)}ST(i){if(0===this.kp||0===i.kp)return function(t,i){0;if(t.LN()||i.LN())return Rh.pD;if(t.kN()&&i.kN())return t.SN()===i.SN()?t:Rh.pD;return t.kN()?t:i}(this,i);if(this.FN())return i;if(i.FN())return this;const e=_.max(this.kp,i.kp),s=this._D(e,sc.kD),n=i._D(e,sc.kD);return new t(s.jM.add(n.jM),e)}sD(i){if(this.LN()||S(i))return t.pD;if(this.kN()||!isFinite(i)){if(this.FN()||0===i)return t.pD;{const e=this.SN()?t.MD:t.yD;return i<0?e.EN():e}}return this.FN()?this:new t(0===i?Ce.ZERO:this.jM.multiply(i),this.kp)}oD(i){if(this.LN()||S(i))return t.pD;if(this.kN())return isFinite(i)?0===i?1/i<0?this.EN():this:i<0?this.EN():this:t.pD;if(!isFinite(i))return new t(Ce.ZERO,this.kp);if(this.FN())return 0===i?t.pD:new t(Ce.ZERO,this.kp);if(0===i){const e=this.SN()?t.MD:t.yD;return 1/i<0?e.EN():e}return new t(this.jM.divide(i),this.kp)}CD(){return[this.jM.low,this.jM.high,this.kp]}constructor(t,i){super(),this.jM=t.toSigned(),this.kp=i>>>0}};Rh.zN=new Rh(Ce.ZERO,Jw),Rh.pD=new Rh(Ce.ZERO,0),Rh.yD=new Rh(Ce.ONE,0),Rh.MD=new Rh(Ce.NEG_ONE,0);var sc,Mt=class t extends $w{static mD(i,e){return void 0===e&&(e=Jw),t.ON(i*e,e)}static ON(i,e){return S(i)?t.pD:i===1/0?t.yD:i===-1/0?t.MD:new t(BigInt(_.floor(i)),e)}static xN(i,e){return new t(BigInt(i.high)<<BigInt(32)|BigInt(i.low>>>0),e)}static TD(i){return t.mD(i.Kl,Jw)}static ND(i){return t.ON(i.getTime(),1e3)}static get zN(){return t.xD||(t.xD=new t(BigInt(0),Jw)),t.xD}static get pD(){return t.OD||(t.OD=new t(BigInt(0),0)),t.OD}static get yD(){return t.jD||(t.jD=new t(BigInt(1),0)),t.jD}static get MD(){return t.zD||(t.zD=new t(BigInt(-1),0)),t.zD}static dD(t,i){return t.yN(i)?t:i}static fD(t,i){return t.TN(i)?t:i}static DD(i,e,s){return t.dD(e,t.fD(s,i))}SN(){return this.jM<BigInt(0)}FN(){return 0!==this.kp&&this.jM===BigInt(0)}kN(){return 0===this.kp&&this.jM!==BigInt(0)}LN(){return 0===this.kp&&this.jM===BigInt(0)}vN(){if(0===this.kp)return this.jM===BigInt(0)?NaN:this.jM<BigInt(0)?-1/0:1/0;const t=this.jM/BigInt(this.kp),i=this.jM-t*BigInt(this.kp);return Number(t)+Number(i)/this.kp}WN(){if(0===this.kp)throw new g("Failed to convert timestamp");return this.PD()}PD(){const t=this.jM&BigInt(4294967295),i=this.jM>>BigInt(32)&BigInt(4294967295);return Ce.fromBits(Number(t),Number(i))}SD(){return new Date(0===this.kp?NaN:Number(this._D(1e3).jM))}ED(){return new rA(0===this.kp?this.vN():Number(this.jM),this.kp)}_D(i,e){void 0===e&&(e=sc.bD);const s=this.kp;if(s===i)return this;if(0===s)return this;const n=ad(s,i),r=function(t,i,e){const s=t/i,n=t-s*i;if(n===BigInt(0))return s;if(e===sc.bD)return n<BigInt(0)?s-BigInt(1):s;if(e===sc.LD)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<i?s:s-BigInt(1):t<i?s:s+BigInt(1)}}(this.jM*BigInt(i/n),BigInt(s/n),e);return new t(r,i)}pN(t){if(this===t)return Va.Zr;if(0===this.kp||0===t.kp)return tA(this,t);if(this.FN())return t.FN()?Va.Zr:t.SN()?Va.ul:Va.hd;if(t.FN())return this.SN()?Va.hd:Va.ul;const i=_.min(this.kp,t.kp),e=this._D(i,sc.kD).jM,s=t._D(i,sc.kD).jM;return e>s?Va.ul:e<s?Va.hd:Va.Zr}EN(){return 0===this.kp?function(t){0;return t.LN()?t:t.SN()?Mt.yD:Mt.MD}(this):new t(-this.jM,this.kp)}ST(i){if(0===this.kp||0===i.kp)return function(t,i){0;if(t.LN()||i.LN())return Mt.pD;if(t.kN()&&i.kN())return t.SN()===i.SN()?t:Mt.pD;return t.kN()?t:i}(this,i);if(this.FN())return i;if(i.FN())return this;const e=_.max(this.kp,i.kp),s=this._D(e,sc.kD),n=i._D(e,sc.kD);return new t(s.jM+n.jM,e)}sD(i){if(this.LN()||S(i))return t.pD;if(this.kN()||!isFinite(i)){if(this.FN()||0===i)return t.pD;{const e=this.SN()?t.MD:t.yD;return i<0?e.EN():e}}return this.FN()?this:new t(0===i?BigInt(0):this.jM*BigInt(i),this.kp)}oD(i){if(this.LN()||S(i))return t.pD;if(this.kN())return isFinite(i)?0===i?1/i<0?this.EN():this:i<0?this.EN():this:t.pD;if(!isFinite(i))return new t(BigInt(0),this.kp);if(this.FN())return 0===i?t.pD:new t(BigInt(0),this.kp);if(0===i){const e=this.SN()?t.MD:t.yD;return 1/i<0?e.EN():e}return new t(this.jM/BigInt(i),this.kp)}CD(){const t=this.PD();return[t.low,t.high,this.kp]}constructor(t,i){super(),this.jM=BigInt.asIntN(64,t),this.kp=i>>>0}};Mt.xD=void 0,Mt.OD=void 0,Mt.jD=void 0,Mt.zD=void 0,function(t){t[t.bD=0]="bD",t[t.LD=1]="LD",t[t.kD=2]="kD"}(sc||(sc={}));var ke=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?Mt:Rh;function hA(t,i){return t.pN(i)}function Wn(t,i){return void 0!==t?void 0!==i?ke.fD(t,i):t:i}var oA=9e4,aA=Zc((()=>ke.ON(8589934592,oA))),uA=Zc((()=>aA().oD(2)));var Cs={BD:0,RD:1/0,UD:0},cA=6,lA=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],dA=[" ","\t","\n","\f","\r"],fA=/^\d*$/,_A=/.*[0-9]+.*/,gA=/^[\d.-]+$/,wA=/(^\.|\.$)/,AA=/(\D\.|\.\D)/;function vA(t,i){void 0===i&&(i=Cs);return mA(Tl(ha(t),new L),i)}function mA(t,i){void 0===i&&(i=Cs);const e={L:[],QD:[],FD:[]},s=pA(t),n=new L;if(LA(s),bu(s,(t=>"\n"!==t),n),n.Ku>=s.length)return e;if(n.Im(1),"\n"!==s.charAt(n.Ku)){DA(yA(s,n,false,!0,e,i),e)}else n.Im(1);for(bu(s,(t=>"\n"===t),n);n.Ku<s.length;){DA(yA(s,n,false,!1,e,i),e),bu(s,(t=>"\n"===t),n)}return e}function pA(t){const i=Cl(t,"\0"," "),e=Cl(i,"\r\n","\n");return Cl(e,"\r","\n")}function bu(t,i,e){const s=e.Ku;for(;e.Ku<t.length&&i(t.charAt(e.Ku));)e.Im(1);return t.substring(s,e.Ku)}function yA(t,e,s,n,r,h){let o,a=0,u=e.Ku,c="",l=!1,d=!1,f=null,_=null,g=null;for(;!l;)if(o=bu(t,(t=>"\n"!==t),e),a++,e.Ku>=t.length?l=!0:e.Im(1),is(o,"--\x3e")){if(n||1!==a&&(2!==a||d)){e.Sm(u);break}d=!0,u=e.Ku,f=new Li(0,0,"",!1,c);try{IA(o,r.QD,f,h),c=""}catch(t){i.SA(t),f=null}}else{if(""===o)break;n&&At(o,"X-TIMESTAMP-MAP")&&(r.YD=MA(o)),n||2!==a||s||(qi("STYLE",c.replace(/ /g,""))?(_={Rg:za.UT},c=""):qi("REGION",c.replace(/ /g,""))&&(g=new Kw("",100,3,0,100,0,100,""),c="")),c&&(c+="\n"),c+=o,u=e.Ku}if(f)return f.O=c,f;if(_);else if(g)return function(t,i){const e=t.split(/\s/),s=":";for(const t of e)if(0!==t.length&&is(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const e=t.indexOf(s),n=t.substring(0,e),r=t.substring(e+1,t.length);switch(n.toUpperCase()){case"ID":FA(r,i);break;case"WIDTH":VA(r,i);break;case"LINES":GA(r,i);break;case"REGIONANCHOR":{const t=QA(r);t&&(i.dN=t[0],i.fN=t[1]);break}case"VIEWPORTANCHOR":{const t=QA(r);t&&(i.gN=t[0],i.wN=t[1]);break}case"SCROLL":YA(r,i)}}}(c,g),g;return null}function MA(t){const i=t.split("=")[1].trim().split(","),e=NA(i[0].trim(),"MPEGTS")?i[0]:i[1],s=NA(i[0].trim(),"LOCAL")?i[0]:i[1];var n;return{GD:TA(Number(e.split(/:(.*)/)[1].trim())||0),lh:ke.mD(null!=(n=Dn(s.split(/:(.*)/)[1].trim(),new L))?n:0)}}function TA(t){return ke.ON(t,oA)}function NA(t,i){return At(t,i)}function DA(t,i){t&&function(t){return"cue"===t.Rg}(t)?i.L.push(t):t&&function(t){return"region"===t.Rg}(t)?i.QD.push(t):t&&function(t){return"stylesheet"===t.Rg}(t)&&i.FD.push(t)}function IA(t,i,e,s){const n=new L;CA(t,n);const r=SA(Dn(t,n),s);if(CA(t,n),"--\x3e"!==t.substring(n.Ku,n.Ku+3))throw g("Something went wrong with parsing a WebVTT Cue");n.Im(3),CA(t,n);const h=SA(Dn(t,n),s);e.uN(r,h);!function(t,i,e){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&is(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),h=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":PA(h,i,e);break;case"VERTICAL":RA(h,i);break;case"D":UA(h,i);break;case"LINE":case"L":jA(h,i);break;case"POSITION":case"T":zA(h,i);break;case"SIZE":case"S":BA(h,i);break;case"ALIGN":case"A":OA(h,i)}}}(t.substring(n.Ku,t.length),e,i)}function SA(t,i){return t+i.BD}function EA(t){return/^[0-9]$/.test(t)}function Dn(t,i){const e=Cl(t,",",".");let s,n,r,h=!1;if(i.Ku>=e.length||!EA(e.charAt(i.Ku)))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");const o=bu(e,EA,i),a=x(o,10);if((o.length>2||a>59)&&(h=!0),i.Ku>=e.length||":"!==e.charAt(i.Ku))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");i.Im(1);const u=bu(e,EA,i);if(2!==u.length)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");const c=x(u,10);if(h||i.Ku<e.length&&":"===e.charAt(i.Ku)){if(i.Ku>=e.length||":"!==e.charAt(i.Ku))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");i.Im(1);const t=bu(e,EA,i);if(2!==u.length)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=x(t,10)}else s=0,n=a,r=c;if(i.Ku>=e.length||"."!==e.charAt(i.Ku))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");i.Im(1);const l=bu(e,EA,i),d=x(l,10);if(c>59||r>59)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+d/1e3}function bA(t){return LA(pA(t))}function LA(t){if(t.length<cA)return!1;for(const i of lA)if(At(t,i))return!0;return!1}function kA(t){return gd(dA,t)}function CA(t,i){for(;i.Ku<t.length&&kA(t.charAt(i.Ku));)i.Im(1)}function xA(t){const i=t.lastIndexOf("%");if(i>-1){const e=C(t.substring(0,i));if(!S(e)&&e>=0&&e<=100)return e}return null}function OA(t,i){const e=t.toLowerCase();switch(e){case"start":case"center":case"end":case"left":case"right":i.WT=e;break;case"middle":i.WT="center"}}function jA(t,i){let e,s;const n=t.indexOf(",");if(n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s=""),!_A.test(e))return;let r,h;if(Ah(e,"%")){const t=xA(e);if(null===t)return;r=t,h=!1}else{if(!gA.test(e)||e.lastIndexOf("-")>0)return;const t=e.indexOf(".");if(t>=0&&(t!==e.lastIndexOf(".")||!AA.test(e)||wA.test(e)))return;if(r=C(e),S(r))return;h=!0}switch(i.HT=r,i.KT=h,s=s.toLowerCase(),s){case"start":case"center":case"end":i.qT=s;break;case"middle":i.qT="center"}}function zA(t,i){let e,s;const n=t.indexOf(",");n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s="");const r=xA(e);if(null!==r)switch(i.po=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":i.XT=s;break;case"start":i.XT="line-left";break;case"middle":i.XT="center";break;case"end":i.XT="line-right"}}function PA(t,i,e){const s=dd(e,(i=>i.o===t));void 0!==s&&(i.ZT=s)}function BA(t,i){const e=xA(t);null!==e&&(i.rp=e)}function RA(t,i){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":i.Pt="rl";break;case"lr":case"vertical:lr":case"vertical-lr":i.Pt="lr";break;default:i.Pt=""}}function UA(t,i){"VERTICAL"===t.toUpperCase()?i.Pt="rl":"VERTICAL-LR"===t.toUpperCase()&&(i.Pt="lr")}function QA(t){if(t.indexOf(",")>=0){const i=xA(t.substring(0,t.indexOf(","))),e=xA(t.substring(t.indexOf(",")+1,t.length));return[ks(i||0,0,100),ks(e||100,0,100)]}return null}function FA(t,i){i.o=t}function YA(t,i){"up"===t.toLowerCase()&&(i._N="up")}function GA(t,i){fA.test(t)&&(i.lN=x(t))}function VA(t,i){const e=xA(t);null!==e&&(i.ji=e)}function WA(t){return t&&"VD"in t?t.VD:t}var HA,qA=class extends Xn{get WD(){return this.HD}get QD(){return this.qD}get XD(){return this.ZD}get va(){return this.Xa||(this.Xa=function(t){return N($h(t),{get styles(){return t.WD},get regions(){return t.QD},get metadata(){return WA(t.XD)},get content(){return WA(t.O)}})}(this)),this.Xa}aN(t){return!!Th(this.WD,t.WD)&&(!!Th(this.QD,t.QD)&&(this.XD&&t.XD?!!this.XD.KD(t.XD)&&(this.O&&t.O?this.O.KD(t.O):this.O===t.O):this.XD===t.XD))}constructor(t,i,e,s,n,r,h){super(t,i,e,s),this.HD=n,this.qD=r,this.ZD=h||void 0}};function as(t){return 1===t.JD}function XA(t){return 3===t.JD}!function(t){t[t.$D=1]="$D",t[t.tI=2]="tI",t[t.Ru=3]="Ru",t[t.iI=4]="iI",t[t.eI=9]="eI"}(HA||(HA={}));var ZA=class{get sI(){return this.rI.nI(!0)}get GT(){return this.hI}get VT(){return this.oI}constructor(t,i,e){this.hI=t,this.oI=i,as(e)?this.rI=function(t,i,e){for(const t of["begin","end","dur"])e.aI(t);return e}(0,0,e):this.rI=e}};var Qe={VIDEO_H264:"video/avc",VIDEO_H265:"video/hevc",VIDEO_MP4:"video/mp4",VIDEO_MPEG:"video/mpeg",VIDEO_MPEG2:"video/mpeg2",VIDEO_WEBM:"video/webm",VIDEO_UNKNOWN:"video/x-unknown",AUDIO_AAC:"audio/mp4a-latm",AUDIO_MP4:"audio/mp4",AUDIO_WEBM:"audio/webm",AUDIO_UNKOWN:"audio/x-unknown",IMAGE_JPEG:"image/jpeg",APPLICATION_TTML_XML:"application/ttml+xml",APPLICATION_MP4:"application/mp4",TEXT_VTT:"text/vtt"};function vs(t){return is(t,Qe.APPLICATION_MP4)||is(t,Qe.VIDEO_MP4)||is(t,Qe.AUDIO_MP4)}function KA(t){return is(t,Qe.VIDEO_WEBM)||is(t,Qe.AUDIO_WEBM)}var JA=class{uI(t){for(const[i,e]of this.cI)if(i.toLowerCase()===t.toLowerCase())return e}constructor(t,i){this.Rg=t,this.cI=i}};function $A(t){const i=t.trim(),e=i.indexOf(";");if(e<0)return new JA(i,[]);const s=i.substr(0,e).trim(),n=i.substr(e+1).trim(),r=[];let h=0,o=!1;for(let t=0;t<n.length;t++){const i=n[t];if(o||";"!==i)'"'===i&&(o=!o);else{const i=iv(n.substr(h,t));i&&r.push(i),h=t+1}}if(h!==n.length){const t=iv(n.substr(h));t&&r.push(t)}return new JA(s,r)}function iv(t){const i=t.indexOf("=");if(i<0)return;const e=t.substr(0,i).trim();let s=t.substr(i+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[e,s]}function Js(t){const i=t.trim(),e=i.indexOf(";");return e<0?i:i.substr(0,e).trim()}function ev(t){let i=t;const e=i.match(/^avc1\.(\d+)\.(\d+)$/);if(e){const t=Number(e[1]),s=Number(e[2]);i="avc1."+Tf((t<<16|s).toString(16),6,"0")}return i}var sv="http://www.w3.org/XML/1998/namespace";function nv(t,i,e,s){let n=t.lI(e,i);return 0===n.length&&(n=t.dI(s+":"+i)),n}function rv(t){const i={};for(const e of t.fI)i[e._I]=e.jM;return i}var hv=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,ov=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,av="http://www.w3.org/ns/ttml";function uv(t,i,e,s){void 0===e&&(e=Cs),void 0===s&&(s=Qe.APPLICATION_TTML_XML);let n=[];const r=ha(t);return s===Qe.APPLICATION_MP4?n=function(t,i,e){const s=Lr.fp(t),n=ml(s,Zt.lm);if(!n)return[];return dv(ha(n.zm),i,e)}(r,i,e):s===Qe.APPLICATION_TTML_XML&&(n=dv(r,i,e)),n}function cv(t,i,e){return void 0===e&&(e=Cs),fv(t,i,e)}function lv(t,i){const e=yv(i.sI),s={};for(const i of e)s[i]=t[i];return s}function dv(t,i,e){return fv(Tl(t,new L),i,e)}function fv(t,e,s){const n=[];let r;try{r=i.gI(t)}catch(t){return n}const h=r.wI;if("tt"!==h._I)return n;const o=h&&h.lI(av,"head")[0],a=h&&h.lI(av,"body")[0];if(!a||!o)return n;const u=function(t){const i={},e=t.lI(av,"styling")[0],s=e&&e.lI(av,"style")||[];for(const t of s){i[t.AI(sv,"id")]=rv(t)}return i}(o),c=function(t){const i={},e=t.lI(av,"layout")[0],s=e&&e.lI(av,"region")||[];for(const t of s){const e=t.AI(sv,"id");if(!e)continue;i[e]=rv(t);const s=pv(t);for(const t in s)J.call(s,t)&&(i[e][t]=s[t])}return i}(o),l=function(t,i){const e=Oi(t),s=wv(i.vI("tts:extent"));if(!s)return e;for(const t of w.keys(e)){const i=wv(e[t].extent);if(i){const n=_v(i[0],s[0]),r=_v(i[1],s[1]);e[t].extent=n+" "+r}const n=wv(e[t].origin);if(n){const i=_v(n[0],s[0]),r=_v(n[1],s[1]);e[t].origin=i+" "+r}}return e}(c,h),d=o.lI(av,"metadata")[0],f=Av(a,s.BD,s.RD,s.UD);for(const t of f){const i=lv(l,t);n.push(new qA(t.GT,t.VT,t.sI,!1,u,i,d))}return n}function _v(t,i){const e=gv(t),s=gv(i);if(e&&s&&e===s){const n=Number(t.slice(0,-e.length)),r=Number(i.slice(0,-s.length));return S(n)||S(r)?t:n/r*100+"%"}return t}function gv(t){return Ah(t,"px")?"px":Ah(t,"em")?"em":Ah(t,"c")?"c":Ah(t,"%")?"%":void 0}function wv(t){if(!t)return;const i=t.split(" ");return 2===i.length?[i[0],i[1]]:void 0}function Av(t,i,e,s){let n,r=i,h=e,o=[];const a=[];if(as(t)){var u,c;r=null!=(u=mv(t.vI("begin"),s))?u:r,n=mv(t.vI("dur"),0),h=null!=(c=mv(t.vI("end"),s))?c:void 0!==n?r+n:h;const i=t.mI;for(let e=0;e<i.length;e++)("body"===t._I||"div"===t._I)&&i[e].JD>1||(o=o.concat(Av(i[e],r,h,s)))}const l=function(t,i,e){const s=[];s.push(t,i);for(const t of e)s.push(t.GT,t.VT);s.sort(Ee);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(ja(s,t+1),t--,n=s.length);return s}(r,h,o);for(let i=0;i<l.length-1;i++){const e=vv(l[i],l[i+1],o);if(e.length<=0&&Mv(t)){const e=t.nI(!1);a.push(new ZA(l[i],l[i+1],e))}else if(e.length>0){const s=t.nI(!1);e.forEach((t=>s.pI(t.sI))),a.push(new ZA(l[i],l[i+1],s))}}return a}function vv(t,i,e){const s=[];for(let n=0;n<e.length;n++){const r=e[n].GT,h=e[n].VT;(r>=t&&h<=i||r<i&&h>=i||r<t&&h>t)&&s.push(e[n])}return s}function mv(t,i){if(t){if(hv.test(t)){const e=hv.exec(t);if(!e)return;const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,h=e[6];return 3600*s+60*n+r+(h?Number(h)*.1**h.length:0)+i}if(ov.test(t)){const e=ov.exec(t);if(!e)return;const s=Number(e[1]);let n;switch(e[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+i}}}function pv(t){const i={},e=t.dI("style")||[];for(const t of e){const e=rv(t);for(const t in e)J.call(e,t)&&(i[t]=e[t])}return i}function yv(t){let i,e=[];if(as(t)){i=t.vI("region"),i&&e.push(i);const s=t.mI;for(let t=0;t<s.length;t++)e=e.concat(yv(s[t]))}return e}function Mv(t){if(as(t)){const i=t._I.toUpperCase(),e=Boolean(t.vI("smpte:backgroundImage"));return"BR"===i||e}return t.JD===HA.Ru}function Tv(t){const e=function(t){try{return i.gI(t).wI}catch(t){}}(t);return"tt"===(null==e?void 0:e._I)}var Mi,_i=class extends Fi{tt(t){return super.tt(t)}it(t){const i=super.it(t);return i&&(t.jg=Ha.Ch),i}fa(){return _o(this)}};!function(t){t.Mm="subtitles",t.yI="captions",t.MI="descriptions",t.Fn="chapters",t.Nm="metadata",t.TI="thumbnails"}(Mi||(Mi={}));var Nv=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function Dv(t){return"string"==typeof t&&gd(Nv,t)}function Iv(t,i){return!(!Dv(t)||!Dv(i))&&(t===i||"subtitles"===t&&"captions"===i||"captions"===t&&"subtitles"===i)}var ys,ws=class extends $i{constructor(t,i,e,s,n){super(t,i,n),this.url=e,this.status=s}};!function(t){t.NI="HttpOpenError",t.DI="HttpResponseError",t.II="HttpTimeoutError"}(ys||(ys={}));var Ht=class extends hs{get SI(){return this.EI}constructor(t,i,e){super(i,e),this.EI=t}};var Et=class extends Ht{get name(){return ys.DI}get bI(){return this.LI}constructor(t,i,e){super(t.SI,null!=e?e:function(t){return"Error while loading "+t.SI.zu+", status code "+t.kI}(t),i),this.LI=t}};var Sv,Ev=class extends Ht{get name(){return ys.II}constructor(t,i){super(t,function(t){return"Request for "+t.zu+" timed out after "+t.CI+" seconds."}(t),i)}};function Vu(t){return t instanceof Ht}function As(t){return t instanceof Et}function bv(t){return t===Mi.Mm||t===Mi.yI}function Lv(t){return t.some(kv)}function kv(t){return is(t,"stpp")}function Cv(t){return t.some(xv)}function xv(t){return is(t,"vtt")||is(t,"wvtt")}function Ov(t,i){return vs(t)&&Cv(i)}function jv(t,i){return t===Mi.TI||t===Mi.Nm&&i===Mi.TI}function zv(t,i,e,s){for(const n of t.L.og){if(n.GT>e)break;i<=n.VT&&!gd(s,n)&&s.push(n)}}function Pv(t,i){return ra(t.Mg,i.Mg)}function Bv(t,i,e,s){const n=function(t){switch(t){case Kc.WEBVTT:return"WebVTT";case Kc.SRT:return"SRT";case Kc.TTML:return"TTML";default:return""}}(t);return new ws(Ui.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",i,e,s)}function Rv(t,i){const e=[];for(const s of t.L.og)if(s.VT<=i)e.push(s);else if(s.GT>=i)break;for(const i of e)t.xI(i)}function Uv(t,i){if(t.U>0){const e=10,s=t.Cn(0),n=_.max(0,s-e);for(const t of i)t.OI(n)}}!function(t){t.jI="vtt",t.Hv="wvtt",t.zI="stpp"}(Sv||(Sv={}));var Qv,ci=class extends xd{tt(t){t.yn(qo.ra,this.BI),this.Z.tt(t),this.RI(t)}it(t){t.fn(qo.ra,this.BI),t.jg=Ha.Ch,this.Z.it(t)}UI(t){}QI(t){}RI(t){t.jg!==Ha.Ch?this.UI(t):this.QI(t)}FI(){for(const t of this.Z.og)t.fn(qo.ra,this.BI),t.gn()}OI(t){if(t>0)for(const i of this.Z.og)Rv(i,t)}tr(){return this.FI(),this.Z.tr(),Promise.resolve()}async gn(){this.Vo(),await this.tr(),this.Z.gn()}constructor(...t){super(...t),this.Z=new _i,this.BI=t=>{const i=t.Lt;this.RI(i)}}};!function(t){t.YI="arraybuffer",t.GI="json",t.VI="stream",t.Ru="text"}(Qv||(Qv={}));var Ys,Ou,jo,Re,Fv,vo=class t{append(t,i){let e=t,s=i;e=Yv(e),s=Gv(s);const n=e.toLowerCase();if(this.Ld.hasOwnProperty(n)){const t=this.Ld[n],i=t[1];t[1]=i?i+", "+s:s}else this.Ld[n]=[e,s]}delete(t){const i=Yv(t).toLowerCase();delete this.Ld[i]}get(t){const i=Yv(t).toLowerCase();return this.Ld.hasOwnProperty(i)?this.Ld[i][1]:null}has(t){const i=Yv(t).toLowerCase();return this.Ld.hasOwnProperty(i)}set(t,i){let e=t;e=Yv(e);const s=e.toLowerCase();this.Ld[s]=[e,Gv(i)]}forEach(t,i){for(const e in this.Ld)this.Ld.hasOwnProperty(e)&&t.call(i,this.Ld[e][1],e,this)}asList(){const t=[];for(const i in this.Ld)if(this.Ld.hasOwnProperty(i)){const[e,s]=this.Ld[i];t.push([e,s])}return t}WI(){const t={};return this.forEach(((i,e)=>{t[e]=i})),t}HI(t){t.forEach(((t,i)=>{this.append(i,t)}))}qI(t){t.forEach(((t,i)=>{this.set(i,t)}))}constructor(i){this.Ld={},i instanceof t?i.asList().forEach((t=>{let[i,e]=t;this.append(i,e)})):Array.isArray(i)?i.forEach((t=>{let[i,e]=t;this.append(i,e)})):i&&w.getOwnPropertyNames(i).forEach((t=>{this.append(t,i[t])}))}};function Yv(t){let i=t;if("string"!=typeof i&&(i=String(i)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(i))throw new b("Invalid character in header field name");return i}function Gv(t){let i=t;return"string"!=typeof i&&(i=String(i)),i}!function(t){t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT"}(Ys||(Ys={})),function(t){t.rT="",t.XI="manifest",t.ZI="segment",t.KI="preload-hint",t.JI="content-protection"}(Ou||(Ou={})),function(t){t.rT="",t.$I="initialization-segment",t.tS="fairplay-license",t.iS="fairplay-certificate",t.eS="widevine-license",t.sS="widevine-certificate",t.nS="playready-license",t.rS="clearkey-license",t.hS="aes128-key"}(jo||(jo={})),function(t){t.rT="",t.ym="audio",t.pm="video",t.Ru="text",t.nT="image"}(Re||(Re={})),function(t){t.oS="same-origin",t.EA="no-cors",t.aS="cors",t.uS="navigate"}(Fv||(Fv={}));var ya,zu=class{constructor(t,i){const e=t.zu;let s,n,r,h,o,a,u,c,l,d,f,_,g,w;var A,v;i?(s=i.cS,n=i.lS,r=i.dS,h=i.fS,o=i.CI,a=i._S,u=i.Wd,c=i.Rg,l=i.gS,d=i.wS,f=i.AS,_=i.vS,g=i.jg,w=i.mS):(s=null,n={},r="GET",h=Qv.Ru,o=0,a=0,c="",l="",d="",f=!1,g=void 0,w=!1),this.zu=e,this.cS=t.cS||s,this.lS=new vo(t.lS||n),this.dS=t.dS||r,this.fS=t.fS||h,this.CI=void 0!==t.CI?Number(t.CI)||0:o,this._S=void 0!==t._S?Number(t._S)||0:a,this.Wd=t.Wd||u||(new na).Wd,this.Rg=t.Rg||c,this.gS=t.gS||l,this.wS=t.wS||d,this.AS=void 0!==t.AS?Boolean(t.AS):f,this.vS=t.vS||_,this.jg=null!=(A=t.jg)?A:g,this.mS=null!=(v=t.mS)?v:w}},Vv=class extends yo{get error(){return this.errorObject.message}fa(){return this}constructor(t){super(ut.ha),this.errorObject=t}},Wv=class extends ci{pS(t){if(!t.src)return;const i=t.kind||Mi.Mm,e=this.MS.yS(i,t.id,t.label,t.srclang,t.default);return e.Ug=oa(t.src),this.tt(e),e}async TS(t,i){t.Jf=Ua.LOADING;const e=new zu({zu:t.Ug,fS:Qv.Ru,dS:Ys.GET,Wd:i});let s,n;try{const t=await this.NS.SI(e);n=t.kI,s=await t.DS()}catch(i){return Ao(i),t.Jf=Ua.ERROR,void t.Co(new Vv(function(t,i){let e=i,s=0;if(Vu(t)&&t.name===ys.NI)e=t.SI.zu;else if(As(t)){const i=t.bI;if(e=i.IS,s=i.kI,0===s)return new ws(Ui.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",e,s,t)}return new ws(Ui.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",e,s,t)}(i,t.Ug)))}try{const i=function(t){return bA(t)?Kc.WEBVTT:Tv(t)?Kc.TTML:Kc.SRT}(s);t.Rg=i;let e=[];if(i===Kc.WEBVTT||i===Kc.SRT){e=mA(s).L}else i===Kc.TTML&&(e=cv(s,t));for(const i of e)t.SS(i)}catch(i){return Ao(i),t.Jf=Ua.ERROR,void t.Co(new Vv(Bv(t.Rg,t.Ug,n,i)))}t.Jf=Ua.LOADED}UI(t){gd(this.Z.og,t)&&t.Jf===Ua.NONE&&this.TS(t,this.ES.Wd).catch(Bc)}$n(){}async tr(){this.ES.qd(),this.ES=new na;for(const t of this.Z.og)this.MS.bS(t);await super.tr()}constructor(t,i){super(),this.ES=new na,this.MS=t,this.NS=i}};function Hv(t,i){for(const e of t)if(e.zt===i&&e.LS)return e}function qv(t,i){Xv(Hv(t.og,i))}function Xv(t){void 0!==t&&(t.jg=Ha.Jn)}function Zv(t,i){const e=Hv(t.og,i)||function(t,i){for(const e of t)if(e.zt===i)return e}(t.og,i);Xv(e)}function Se(t){for(const i of Nv)i===Mi.Fn?Zv(t,i):qv(t,i)}!function(t){t.kS="web",t.CS="android",t.xS="android-tv",t.OS="ios",t.jS="tvos",t.zS="chromecast",t.PS="theoliveweb"}(ya||(ya={}));var nc=Dl?Dl.userAgent:"",Kv=nc.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Jv=nc.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),$v=nc.match(/Android ([0-9\.]+)/i),tm=nc.match(/Windows NT ([0-9\.]+)/i),im=nc.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),em=nc.match(/Firefox\/([0-9\.]+)/i),sm=nc.match(/OPR\/(\d+\.\d+)/i),nm=nc.match(/Tizen ([0-9\.]+)/i),rm=nc.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),hm=class{get Je(){return this.RS}get US(){return this.QS}get FS(){return this.YS}get GS(){return this.VS}get WS(){return this.HS}get qS(){return this.XS}get ZS(){return this.KS}get JS(){return this.$S}get tE(){return this.iE}get eE(){return this.sE}get nE(){return this.rE}get Ga(){return this.hE}get oE(){return this.aE}get uE(){return this.cE||this.lE}get td(){return this.dE}get Qs(){return this.fE}get _E(){return this.gE}get wE(){return this.AE}get vE(){var t;return null!=(t=this.mE)?t:this.pE}get yE(){return this.ME}get TE(){return this.NE}get DE(){return this.SE}get EE(){return this.bE}get LE(){return this.kE}get CE(){return this.xE}get OE(){return this.jE}get zE(){return this.PE}get BE(){return this.RE}get UE(){return this.QE}get FE(){return this.YE}get GE(){return this.VE}get WE(){return this.HE}get qE(){return this.XE}get ZE(){return this.KE}get JE(){return this.$E}get ib(){return this.eb}get sb(){return this.hb}get ob(){return!(!this.LE&&!this.DE)&&this.vE<=56}get ub(){return this.fb}get _b(){return this.gb}get wb(){return this.Ab}get vb(){return this.mb}get pb(){return this.yb}get Mb(){return this.Tb}get Nb(){return this.Db}constructor(){this.RS=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||Dl&&Dl.msMaxTouchPoints),this.QS=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(nc)||/(macintosh|mac(?=_powerpc)\s)/i.test(nc),this.YS=/Windows NT/i.test(nc),this.VS=tm?C(tm[1]):0,this.HS=/Android/i.test(nc),this.XS=$v?C($v[1]):0,this.KS=/windows phone (8|8\.1)/i.test(nc),this.$S=/iPhone/i.test(nc),this.iE=/iPad/i.test(nc),this.sE=this.QS&&this.RS&&!this.iE,this.rE=/iPod/i.test(nc),this.dE=/Mobile Safari/i.test(nc),this.cE=/EOS\d*STB/i.test(nc),this.lE=/APP\d*STB/i.test(nc),this.hE=(this.$S||this.iE||this.sE||this.rE)&&!this.KS,this.aE=rm?C(rm[2]):0,this.fE=this.KS||this.hE||this.HS||this.dE,this.gE=/CriOS/i.test(nc),this.AE=Boolean(self.chrome&&/google/i.test(Dl.vendor))||this.gE,this.ME=this.AE&&/Edg\//i.test(Dl.userAgent),this.NE=Jv?x(Jv[1],10):0,this.Db=Boolean(self.chrome||/Chrome/i.test(nc)||/CriOS/i.test(nc)),this.pE=Kv?x(Kv[1],10):0,this.SE=/SMART-TV.*Tizen/i.test(nc),this.bE=nm?C(nm[1]):0,this.mE=this.bE>0?function(t){return t>=8?108:t>=7?94:t>=6.5?85:t>=6?76:t>=5.5?69:t>=5?63:t>=4?56:t>=3?47:0}(this.bE):void 0,this.kE=/webos|web0s/i.test(nc),this.xE=/VIZIO/i.test(nc),this.jE=/Edge\/\d+/i.test(nc),this.PE=/Trident/i.test(nc),this.RE=this.PE&&!self.ActiveXObject&&"ActiveXObject"in self,this.QE=/Vivaldi/i.test(nc),this.YE=/Firefox/i.test(nc)&&!/Seamonkey/i.test(nc),this.VE=em?C(em[1]):0,this.HE=/Safari/i.test(nc)&&!/Chrome/i.test(nc)&&!this.KS&&!this.SE,this.XE=im?C(im[2]):0,this.KE=Boolean(sm),this.$E=sm?C(sm[1]):0,this.eb=/CrKey/.test(nc),this.hb=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(nc),this.fb="web"===ya.xS,this.gb="web"===ya.CS,this.Ab=this.gb||this.fb,this.mb="web"===ya.OS,this.yb="web"===ya.jS,this.Tb="web"===ya.zS}};hm.Ib=new hm;var om,am,fs,_s,um,cm,fi=hm.Ib,lm=class extends wn{constructor(){super(l.mw)}};var On={Rg:vi.PA,Sb:e_,Eb:"cenc",bb:i_,Lb:Gi,kb:"PlayReady"},dm={Rg:vi.BA,Sb:n_,Eb:"cenc",bb:s_,Lb:gt,kb:"Widevine"},fm={Rg:vi.RA,Sb:o_,Eb:"skd",bb:Qc,Lb:Ca,kb:"FairPlay"},_m={Rg:vi.RA,Sb:"com.apple.fps",Eb:"sinf",bb:Qc,Lb:Ca,kb:"FairPlay"},gm={Rg:vi.UA,Sb:"org.w3.clearkey",Eb:"cenc",bb:r_,Lb:h_,kb:"ClearKey"},wm=[On,dm,fm,gm];function Am(t){return wm.filter((i=>i.Lb===t.toLowerCase()))}var Ke,vm=["cenc"],mm=["cbcs","cbcs-1-9"],ir=class extends wn{constructor(t){super("Cb"),this.xb=t}},Ns=class extends wn{constructor(t,i,e,s){super("Ob"),this.xb=t,this.jb=i,this.Ob=e,this.zb=s}},pm=class extends wn{constructor(){super("lt")}};!function(t){t.Kg="Pb",t.Bb="Rb"}(Ke||(Ke={}));var Us=class extends wn{constructor(t,i){super("Pb"),this.Eb=t,this.Ub=i}},ym=class extends wn{constructor(){super("Rb")}},Mm=new j([0]).buffer,Is=class{get rp(){return this.Xu.length}Qb(t){for(const i of this.Xu)if(i[0]===t)return!0;return!1}Fb(t){for(const i of this.Xu)if(i[0]===t)return i[1]}Yb(t,i){this.Xu.forEach((i=>t(i[1],i[0])),i)}Gb(t,i){this.Xu.push([t,i])}Vb(){No(this.Xu)}constructor(){this.Xu=[]}},Rs=class{Wb(t){this.Hb&&(this.Hb(t),this.Ud())}qb(t){this.Xb&&(this.Xb(t),this.Ud())}qd(){this.Zb.catch(qt),this.qb(new pe)}Xd(t){t.then((t=>this.Wb(t)),(t=>this.qb(t)))}Ud(){this.Hb=void 0,this.Xb=void 0}constructor(){this.Zb=new Promise(((t,i)=>{this.Hb=t,this.Xb=i}))}};function Tm(){return new j([8,4]).buffer}function Nm(t,i){return t===e_?function(t){if(t.byteLength<2*Dm.length)return t;const i=new DataView(t,0,2*Dm.length),e=og(i,!0);if(e===Dm)return t;return function(t){const i='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',e='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+i+M_(t)+e;return ag(s,!0).buffer}(t)}(i):i}var Dm="<PlayReady";var Im=class extends hs{constructor(t,i,e,s){super(t,s),this.Kb=i,this.Jb=e}},Sm=function(t,i){return(Sm=w.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)w.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)};function Em(t,i){if("function"!=typeof i&&null!==i)throw new b("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}Sm(t,i),t.prototype=null===i?w.create(i):(e.prototype=i.prototype,new e)}function bm(t,i,e){return t.indexOf?t.indexOf(i,e):Array.prototype.indexOf.call(t,i,e)}(function(){function t(t,i){this.$b=t,this.tL=i}t.prototype.get=function(t){var i=this.$b.get(t);if(0===this.tL||void 0===i)return i;var e=this.$b.get(t+1)||0,s=i&(1<<8-this.tL)-1,n=e>>8-this.tL;return(s<<this.tL)+n},t.prototype.getBit=function(t){if(!(t<0)){var i=this.$b.get(_.floor((t+this.tL)/8));if(void 0!==i)return(i&1<<7-this.tL-t%8)>0?1:0}},w.defineProperty(t.prototype,"bitLength",{get:function(){return this.$b.bitLength-this.tL},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"length",{get:function(){return this.$b.length},enumerable:!1,configurable:!0})})(),_.pow(2,-52);function Lm(t,i,e){return _.min(_.max(t,i),e)}function km(t,i){return t>>8-i}function Cm(t,i){return t&(1<<i)-1}var xm=function(){function t(t){this.iL=t,this.eL=0,this.sL=0}return w.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.eL+this.sL},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"done",{get:function(){return this.eL===this.iL.length&&0===this.sL},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"location",{get:function(){return{byte:this.eL,bit:this.sL}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var i=new t(this.iL);return i.seek(this.eL,this.sL),i},t.prototype.canReadBits=function(t){return 8*this.eL+t+this.sL<=8*this.iL.length},t.prototype.canReadBytes=function(t){return 0===this.sL?this.eL+t<=this.iL.length:this.eL+t<this.iL.length},t.prototype.incBit=function(){this.sL++,this.sL>7&&(this.eL++,this.sL=0)},t.prototype.seek=function(t,i){this.eL=t,this.sL=i},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new g("Cannot read past end of buffer.");return this.iL.get(this.eL)>>7-this.sL&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new g("Cannot read past end of buffer.");if(0===this.sL)return this.iL.get(this.eL++);var t=Cm(this.iL.get(this.eL),8-this.sL),i=km(this.iL.get(this.eL+1),this.sL);return this.eL++,t<<this.sL|i},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readBit());return i},t.prototype.readUInt=function(t){if(t>32)throw new g("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");var i=0;if(0===this.sL&&t%8==0)for(var e=t-8;e>=0;e-=8)i|=this.readByte()<<e;else for(e=t-1;e>=0;e--)i|=this.readBit()<<e;return i},t.prototype.readInt=function(t){if(t>32)throw new g("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");var i=this.readUInt(t);return 0===(i&1<<t-1)?i:i-_.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var i=1<<t;return i+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new g("Skipping over the buffer edge is not allowed.");var i=this.sL+t;this.eL+=i>>3,this.sL=7&i},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new g("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readByte());return String.fromCharCode.apply(String,i)},t}(),Om=function(t,i){return t===i?0:t<i?-1:t>i?1:S(t)?S(i)?0:1:-1},Xr=function(){function t(){this.nL=[],this.rL=[],this.hL=0}return t.from=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var s=new t,n=0,r=i;n<r.length;n++){var h=r[n];s.pushRange(h)}return s},t.prototype.pushRange=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=t.length),e<0)throw new g("The buffer length must be positive.");if(0!==e){if(0===this.rL.length)this.rL.push(0);else{var s=this.rL[this.rL.length-1]+this.nL[this.nL.length-1].length;this.rL.push(s)}this.nL.push(t.subarray(i,i+e)),this.hL+=e}},t.prototype.concat=function(i){var e=new t;return e.pushRange(this.join()),e.pushRange(i.join()),e},t.prototype.copy=function(t,i,e,s){if(void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=this.length),i<0||e<0||s<0)throw new RangeError;return this.slice(e,s).copyInternal(t,i)},t.prototype.copyInternal=function(t,i){for(var e=0,s=i,n=0,r=this.nL;n<r.length;n++){var h=r[n];t.set(h,s),e+=h.length,s+=h.length}return e},t.prototype.clear=function(){this.nL=[],this.rL=[],this.hL=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var i=this.findContainingBufferIndex(t),e=t-this.rL[i];return this.nL[i][e]}},w.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.nL.length<1)return-1;if(this.nL.length>1){var i=this.join();this.clear(),this.pushRange(i)}var e=this.nL[0];return"number"==typeof t?bm(e,t):"undefined"!=typeof Buffer?Buffer.from(e.buffer,e.byteOffset,e.byteLength).indexOf(t):function(t,i){if(0===i.length)return 0;for(var e=i[0],s=i.length,n=t.length-s,r=0;r<=n&&!((r=bm(t,e,r))<0||r>n);r++){for(var h=r+1,o=r+s,a=1;h<o&&t[h]===i[a];h++,a++);if(h===o)return r}return-1}(e,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,i,e){if(0!==t.length){var s=0,n=t.length-1;if(1!==e(t[s],i)){if(1===e(i,t[n]))return n;for(;s!==n;){var r=_.ceil((s+n)/2);e(t[r],i)<=0?s=r:n=r-1}return s}}}(this.rL,t,Om)},t.prototype.join=function(){if(1===this.nL.length)return this.nL[0];var t=new j(this.length);return this.copyInternal(t,0),t},w.defineProperty(t.prototype,"length",{get:function(){return this.hL},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,i){if(i<=0||i>4)throw new g("Expected byteLength to be between 0 and 4 but was "+i);if(t<0||t>this.length-i)throw new g("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-i)+")");if(1===i)return this.get(t);for(var e=0,s=0;s<i;s++)e+=this.get(t+s)*_.pow(2,8*(i-s-1));return e},t.prototype.slice=function(i,e){void 0===e&&(e=this.length);var s=Lm(i,0,this.length),n=Lm(e,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,h=this.findContainingBufferIndex(s),o=this.nL[h],a=s,u=a-this.rL[h];a+o.length-u<n;)r.pushRange(o,u,o.length-u),h+=1,u=(a+=o.length-u)-this.rL[h],o=this.nL[h];var c=n-a;return r.pushRange(o,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var i=this.length-1,e=this.nL.length-1,s=this.nL[e],n=s.length-1;i>=0&&e>=0;){if(0!==s[n])break;if(0===n){if(0===e)return new t;e-=1,n=(s=this.nL[e]).length-1}else n-=1;i-=1}return this.slice(0,i+1)},t}(),jm=function(){function t(i){this.oL=i||t.BUFFER_CHUNK_SIZE,this.aL=!1,this.uL=new Xr,this.iL=new j(this.oL),this.cL=0,this.lL=0,this.sL=7}return t.prototype.closeByte=function(){this.iL[this.cL++]=this.lL,this.cL>=this.oL&&this.closeBuffer(),this.lL=0,this.sL=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.cL&&(this.uL.pushRange(this.iL,0,this.cL),t&&(this.iL=new j(this.oL)),this.cL=0)},w.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.sL},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.aL)throw new g("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.aL=!0,this.uL},t.prototype.writeBit=function(t){if(this.aL)throw new g("Cannot write to a closed BitWriter.");this.lL|=t<<this.sL,0===this.sL?this.closeByte():this.sL--},t.prototype.writeByte=function(t){if(this.aL)throw new g("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.lL=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var i=this.sL;this.lL|=km(t,i+1),this.closeByte(),this.lL=Cm(t,8-i)<<i+1,this.sL=i},t.prototype.writeBits=function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.aL)throw new g("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.cL+t.length<=this.oL?(this.iL.set(t,this.cL),this.cL+=t.length,this.cL===this.oL&&this.closeBuffer()):(this.closeBuffer(),this.uL.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var i=this.sL;this.lL|=km(t[0],i+1),this.closeByte();for(var e=1;e<t.length;e++){var s=Cm(t[e-1],8-i),n=km(t[e],i+1);this.lL=s<<i+1|n,this.closeByte()}this.lL=Cm(t[t.length-1],8-i)<<i+1,this.sL=i}},t.prototype.writeUInt=function(t,i){if(t<0)throw new g("Received a negative number.");if(i>32)throw new g("The max bitlength that can be provided is 32.");if(t>=_.pow(2,i))throw new g("Uint "+t+" cannot be represented in "+i+" bit(s).");if(this.isWritingStartBit&&i%8==0)for(var e=i-8;e>=0;e-=8)this.writeByte(t>>e&255);else for(e=i-1;e>=0;e--)this.writeBool((t&1<<e)>0)},t.prototype.writeInt=function(t,i){if(i>32)throw new g("The max bitlength that can be provided is 32.");if(_.abs(t)>=_.pow(2,i-1))throw new g("Signed integer "+t+" cannot be represented in "+i+" bit(s).");t<0?this.writeUInt(t+_.pow(2,i),i):this.writeUInt(t,i)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new g("Received a negative number.");for(var i=_.floor(_.log2(t+1))+1,e=0;e<i-1;e++)this.writeBit(0);this.writeUInt(t+1,i)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var i=function(t){for(var i=new j(t.length),e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}(t),e=0;e<i.length;e++)this.writeByte(i[e])},t.BUFFER_CHUNK_SIZE=1024,t}(),zm=function(){function t(t){this.rb=new Xr,this.dL=t}return t.prototype.closeWriter=function(){void 0!==this.dL&&(this.rb=this.rb.concat(this.dL.close()),this.dL=void 0)},w.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.dL&&(this.dL=new jm),this.dL},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),tn=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new g("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(i){var e=this.getSize(),s=e>=t.LARGE_SIZE/8,n=16===this.boxType.length;i.writeUInt(s?1:e,32),i.writeString(n?"uuid":this.boxType),s&&(i.writeUInt(_.floor(e/t.LARGE_SIZE),32),i.writeUInt(e%t.LARGE_SIZE,32)),n&&i.writeString(this.boxType)},t.prototype.getSize=function(){var i=8+(this.boxType.length>4?16:0),e=this.getBoxContentSize()+i;return e>=t.LARGE_SIZE/8&&(e+=8),e},t.prototype.serialize=function(){var t=new zm;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=_.pow(2,32),t}();function f(t,i){return t instanceof Ce?64===i:t<_.pow(2,i)}function ye(t,i){return _.round(t*_.pow(2,i))}function Pm(t,i){for(var e=0;e<i.length;e++)t.writeByte(i[e])}function cc(t,i){return t/_.pow(2,i)}var G=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!f(e,8))throw new g("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Em(i,t),w.defineProperty(i.prototype,"flags",{get:function(){return this.fL},set:function(t){this.fL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new g("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(tn),Bm=function(t){function i(i,e){var s=t.call(this,i)||this;return s.data=e,s}return Em(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(Xr.from(this.data))},i}(tn),Rm=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();var Um=16384;function Qm(t){var i=t.length;if(i<=Um)return String.fromCharCode.apply(String,t);for(var e=[],s=0;s<i;s+=Um)e.push(String.fromCharCode.apply(String,t.slice(s,s+Um)));return e.join("")}var Fm=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,i){return(t&i)===i}(this.raw,t)},t}();function Ym(t,i){var e=t.getUint8(i.offset);return i.shift(1),e}function Gm(t,i,e){var s=Km(tp(t),i.offset,i.offset+e);return i.shift(s.byteLength),s}function Vm(t,i,e){return i.offset+e<=t.byteLength}function Wm(t,i,e){void 0===e&&(e=!1);var s=t.getUint32(i.offset,e);return i.shift(4),s}function Hm(t,i,e){void 0===e&&(e=!1);var s=Wm(t,i,e),n=Wm(t,i,e),r=e?n:s,h=e?s:n;return Ce.fromBits(h,r,!0)}function qm(t,i,e){return Qm(function(t){return[].slice.call(t)}(Gm(t,i,e)))}function Xm(t,i){var e,s=Ym(t,i);return 0==(128&s)?e=s:192==(224&s)?e=64*(31&s)+(63&Ym(t,i)):224==(240&s)?e=4096*(15&s)+64*(63&Ym(t,i))+(63&Ym(t,i)):240==(248&s)&&(e=262144*(7&s)+4096*(63&Ym(t,i))+64*(63&Ym(t,i))+(63&Ym(t,i))),e}function Zm(t,i){return function(t,i,e){var s=[],n=function(t,i){return i.offset+3<=t.byteLength&&239===t.getUint8(i.offset)&&187===t.getUint8(i.offset+1)&&191===t.getUint8(i.offset+2)}(t,i);n&&i.shift(3);for(;i.offset<t.byteLength;){var r=Xm(t,i);if(void 0===r)break;if(e&&0===r)break;s.push(r)}return function(t){for(var i=[],e=0,s=t;e<s.length;e++){var n=s[e];n>65535&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n)}return Qm(i)}(s)}(t,i,!0)}function Km(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new j(t.buffer,t.byteOffset+i,e-i)}function Jm(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function $m(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function tp(t){return new j(t.buffer,t.byteOffset,t.byteLength)}var ip=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new Rm(this.offset<<3)},t}(),ep=function(){function t(t,i){this.data=t,this.cursor=i}return t.prototype.nextUint8=function(){return Ym(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getUint16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return Wm(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt32(i.offset,e);return i.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,i,e){void 0===e&&(e=!1);var s=Wm(t,i,e),n=Wm(t,i,e),r=e?n:s,h=e?s:n;return Ce.fromBits(h,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return Hm(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return Gm(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,i,e){for(var s=[],n=0;n<e;n++)s.push(Wm(t,i));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return qm(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return Zm(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function Di(t,i){return t.type===i}var sp=8;function np(t){var i=function(t,i){var e=[];for(;i.offset<t.byteLength;){var s=rp(t,i);if(!s.complete)return{complete:!1,boxes:e};e.push(s.box)}return{complete:!0,boxes:e}}(t.data,t.cursor);if(!i.complete)throw new g("Data incomplete");return i.boxes}function rp(t,i){var e=i.offset,s=function(t,i){var e=i.offset;if(!Vm(t,i,sp)){return{complete:!1,neededOffset:r=i.offset+sp}}var s=Wm(t,i),n=qm(t,i,4);if(1===s){if(!Vm(t,i,8)){var r=i.offset+8;return i.seek(e),{complete:!1,neededOffset:r}}s=Hm(t,i).toNumber()}if("uuid"===n){if(!Vm(t,i,16)){r=i.offset+16;return i.seek(e),{complete:!1,neededOffset:r}}n=qm(t,i,16)}var h=i.offset,o={type:n,size:s,headerSize:h-e};return{complete:!0,header:o}}(t,i);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-e);var h=e+r;if(h>t.byteLength){var o=h;return i.seek(e),{complete:!1,neededOffset:o}}var a={type:n.type,offset:e,data:new ep(Jm(t,e,h),new ip(n.headerSize))};return i.seek(h),{complete:!0,box:a}}function Xu(t){return{version:t>>24,flags:new Fm(16777215&t)}}function hp(t,i){var e,s,n,r;return 1===i?(e=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(e=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:e,modification:s,scale:n,duration:r}}function zn(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function op(t){var i=t.nextUint32Array(9);return{a:cc(i[0],16),b:cc(i[1],16),u:cc(i[2],30),c:cc(i[3],16),d:cc(i[4],16),v:cc(i[5],30),x:cc(i[6],16),y:cc(i[7],16),w:cc(i[8],30)}}function Vh(t){return new Bm(t.type,Km(tp(t.data.data),t.data.cursor.offset))}var ap=function(t){function i(i,e,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=e,r.handlerType=i,r}return Em(i,t),w.defineProperty(i.prototype,"handlerType",{get:function(){return this._L},set:function(t){this._L=t},enumerable:!1,configurable:!0}),i.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(e=null===(i=this.name)||void 0===i?void 0:i.length)&&void 0!==e?e:0)+1},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeString(this.handlerType),this.serializeReserved(i),this.name&&i.writer.writeString(this.name),i.writer.writeByte(0)},i}(G);function up(t){var i=t.data,e=Xu(i.nextUint32()),s=e.version,n=e.flags;i.skip(4);var r=i.nextChars(4);i.skip(12);var h=i.nextUTF8String();return new ap(r,h,s,n.raw)}!function(t){function i(){return t.call(this,"mdir")||this}Em(i,t),i.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(ap);var cp=function(){function t(t,i){void 0===i&&(i=!1),this.fixed28BitMode=i,this.tag=t}return t.prototype.encodeSize=function(t){for(var i=[];t>0;)i.length>0&&(i[i.length-1]+=128),i.push(t%128),t>>=7;if(this.fixed28BitMode)for(;i.length<4;)i.push(128);return i.reverse()},w.defineProperty(t.prototype,"tag",{get:function(){return this.gL},set:function(t){if(!f(t,8))throw new g("Provided tag does not fit in 8 bits.");this.gL=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var i=0,e=this.encodeSize(this.getDescriptorSize());i<e.length;i++){var s=e[i];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}(),lp=(function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o={});var a=t.call(this,4,o.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=h,a.objectTypeIndication=i,a.streamType=e,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}Em(i,t),w.defineProperty(i.prototype,"objectTypeIndication",{get:function(){return this.wL},set:function(t){if(!f(t,8))throw new g("Provided objectTypeIndication does not fit in 8 bits.");this.wL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"streamType",{get:function(){return this.AL},set:function(t){if(!f(t,6))throw new g("Provided streamType does not fit in 6 bits.");this.AL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.vL},set:function(t){if(!f(t,24))throw new g("Provided bufferSizeDb does not fit in 24 bits.");this.vL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"maxBitrate",{get:function(){return this.mL},set:function(t){if(!f(t,32))throw new g("Provided maxBitrate does not fit in 32 bits.");this.mL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"avgBitrate",{get:function(){return this.pL},set:function(t){if(!f(t,32))throw new g("Provided avgBitrate does not fit in 32 bits.");this.pL=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var i=0,e=this.decoderSpecificInfo;i<e.length;i++){e[i].serialize(t)}}}(cp),function(t){function i(i,e){void 0===e&&(e={});var s=t.call(this,5,e.fixed28BitMode)||this;return s.data=i,s}Em(i,t),i.prototype.getDescriptorSize=function(){return this.data.length},i.prototype.serializeDescriptorContent=function(t){t.concat(Xr.from(this.data))}}(cp),function(t){function i(i){void 0===i&&(i=!1);var e=t.call(this,6,i)||this;return e.predefined=2,e}return Em(i,t),i.prototype.getDescriptorSize=function(){return 1},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},i}(cp)),dp=(function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=i,r.streamPriority=e,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new lp(n.fixed28BitMode),r}Em(i,t),w.defineProperty(i.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"esId",{get:function(){return this.yL},set:function(t){if(!f(t,16))throw new g("Provided esId does not fit in 16 bits.");this.yL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"streamPriority",{get:function(){return this.ML},set:function(t){if(!f(t,5))throw new g("Provided streamPriority does not fit in 5 bits.");this.ML=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"dependsOnEsId",{get:function(){return this.TL},set:function(t){if(t&&!f(t,16))throw new g("Provided dependsOnEsId does not fit in 16 bits.");this.TL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"ocrEsId",{get:function(){return this.NL},set:function(t){if(t&&!f(t,16))throw new g("Provided ocrEsId does not fit in 16 bits.");this.NL=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},i.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(cp),function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.boxes=[],i}return Em(i,t),i.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serialize=function(){for(var i=t.prototype.serialize.call(this),e=0,s=this.boxes;e<s.length;e++){var n=s[e];i=i.concat(n.serialize())}return i},i}(tn)),Y=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Em(i,t),i.prototype.serializeBoxContent=function(t){},i.prototype.getBoxContentSize=function(){return 0},i}(dp),se=function(t){function i(i,e){var s=t.call(this,i)||this;return s.dataReferenceIndex=e,s}return Em(i,t),w.defineProperty(i.prototype,"dataReferenceIndex",{get:function(){return this.DL},set:function(t){if(!f(t,16))throw new g("Provided dataReferenceIndex does not fit in 16 bits.");this.DL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){for(var i=0;i<6;i++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},i}(Y),fp=function(t){function i(i,e,s,n){var r,h,o=this;return(o=t.call(this,i,e)||this).extra=n,o.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,o.sampleSize=null!==(h=s.sampleSize)&&void 0!==h?h:16,o.sampleRate=s.sampleRate,o}return Em(i,t),w.defineProperty(i.prototype,"channelCount",{get:function(){return this.IL},set:function(t){if(!f(t,16))throw new g("Provided channelCount does not fit in 16 bits.");this.IL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleSize",{get:function(){return this.SL},set:function(t){if(!f(t,16))throw new g("Provided sampleSize does not fit in 16 bits.");this.SL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleRate",{get:function(){return this.EL},set:function(t){if(!f(ye(t,16),32))throw new g("Provided rate does not fit in 32 bits (fixed 16.16).");this.EL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(e=null===(i=this.extra)||void 0===i?void 0:i.length)&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.channelCount,16),i.writer.writeUInt(this.sampleSize,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(ye(this.sampleRate,16),32),this.extra&&Pm(i.writer,this.extra)},i}(se),_p=(function(t){function i(i){var e=t.call(this,"stco",0,0)||this;return e.entries=i,e}Em(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.bL},set:function(t){if(!f(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!f(t,32)})))throw new g("Not all entries can be represented in 32 bits.");this.bL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(G),function(t){function i(i){var e=t.call(this,"clap")||this;return e.cleanApertureWidthN=i.cleanApertureWidthN,e.cleanApertureWidthD=i.cleanApertureWidthD,e.cleanApertureHeightN=i.cleanApertureHeightN,e.cleanApertureHeightD=i.cleanApertureHeightD,e.horizOffN=i.horizOffN,e.horizOffD=i.horizOffD,e.vertOffN=i.vertOffN,e.vertOffD=i.vertOffD,e}Em(i,t),w.defineProperty(i.prototype,"cleanApertureWidthN",{get:function(){return this.LL},set:function(t){if(!f(t,32))throw new g("Provided cleanApertureWidthN does not fit in 32 bits.");this.LL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureWidthD",{get:function(){return this.kL},set:function(t){if(!f(t,32))throw new g("Provided cleanApertureWidthD does not fit in 32 bits.");this.kL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureHeightN",{get:function(){return this.CL},set:function(t){if(!f(t,32))throw new g("Provided cleanApertureHeightN does not fit in 32 bits.");this.CL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureHeightD",{get:function(){return this.xL},set:function(t){if(!f(t,32))throw new g("Provided cleanApertureHeightD does not fit in 32 bits.");this.xL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizOffN",{get:function(){return this.OL},set:function(t){if(!f(t,32))throw new g("Provided horizOffN does not fit in 32 bits.");this.OL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizOffD",{get:function(){return this.jL},set:function(t){if(!f(t,32))throw new g("Provided horizOffD does not fit in 32 bits.");this.jL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vertOffN",{get:function(){return this.zL},set:function(t){if(!f(t,32))throw new g("Provided vertOffN does not fit in 32 bits.");this.zL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vertOffD",{get:function(){return this.PL},set:function(t){if(!f(t,32))throw new g("Provided vertOffD does not fit in 32 bits.");this.PL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 32},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(tn),function(t){function i(i,e){var s=t.call(this,"ctts",i,0)||this;return s.entries=e,s}Em(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.bL},set:function(t){if(!f(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!f(t.sampleCount,32)||!f(t.sampleOffset,32)})))throw new g("Not all entries can be represented in 64 bits.");this.bL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),0===this.version?i.writer.writeUInt(n.sampleOffset,32):1===this.version&&i.writer.writeInt(n.sampleOffset,32)}}}(G),function(t){function i(i){var e=t.call(this,"url ",0,void 0===i?1:0)||this;return e.location=i,e}Em(i,t),w.defineProperty(i.prototype,"location",{get:function(){return this.BL},set:function(t){this.flags=void 0===t?1:0,this.BL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this);return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(G),function(t){function i(i,e,s){var n=t.call(this,"urn ",0,s)||this;return n.name=i,n.location=e,n}Em(i,t),w.defineProperty(i.prototype,"location",{get:function(){return this.BL},set:function(t){if(1&this.flags)throw new g("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.BL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.name),i.writer.writeByte(0),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(G),function(t){function i(){return t.call(this,"dinf")||this}Em(i,t)}(Y),function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!f(e,8))throw new g("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Em(i,t),w.defineProperty(i.prototype,"flags",{get:function(){return this.fL},set:function(t){this.fL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new g("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(dp)),gp=(function(t){function i(){return t.call(this,"dref",0,0)||this}Em(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(_p),function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"elst",e,s)||this;return n.entries=i,n}return Em(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"entries",{get:function(){return this.bL},set:function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!f(s.segmentDuration,this.bitSize))throw new g("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!f(s.mediaTime,this.bitSize))throw new g("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!f(s.mediaRateInteger,16))throw new g("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!f(s.mediaRateFraction,16))throw new g("Provided mediaRateFraction does not fit in 16 bits.")}this.bL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(i)},i}(G)),wp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Em(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(gp),Ap=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Em(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(gp);function vp(t){for(var i=t.data,e=Xu(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),h=[],o=0;o<r;o++){var a=void 0,u=void 0;0===s?(a=i.nextUint32(),u=i.nextInt32()):(a=i.nextUint64(),u=i.nextInt64());var c=i.nextInt16(),l=i.nextInt16();h.push({segmentDuration:a,mediaTime:u,mediaRateFraction:l,mediaRateInteger:c})}return 0===s?new wp(h,n.raw):new Ap(h,n.raw)}var mp=function(t){function i(){return t.call(this,"edts")||this}return Em(i,t),i}(Y);function pp(t){for(var i=new mp,e=0,s=np(t.data);e<s.length;e++){var n=s[e];Di(n,"elst")?i.boxes.push(vp(n)):i.boxes.push(Vh(n))}return i}var yp=function(t){function i(i,e,s,n){var r=t.call(this,i)||this;return r.majorBrand=e,r.minorVersion=s,r.compatibleBrands=n,r}return Em(i,t),w.defineProperty(i.prototype,"majorBrand",{get:function(){return this.RL},set:function(t){if(4!==t.length)throw new g("the provided major brand does not conform to the 4 character requirement");this.RL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"minorVersion",{get:function(){return this.UL},set:function(t){if(!f(t,32))throw new g("the provided minor version does not fit in 32 bits.");this.UL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"compatibleBrands",{get:function(){return this.QL},set:function(t){if(t.some((function(t){return 4!==t.length})))throw new g("Some of the compatible brands do not conform to the 4 character requirement");this.QL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var i=0,e=this.compatibleBrands;i<e.length;i++){var s=e[i];t.writer.writeString(s)}},i}(tn),Mp=function(t){function i(i,e,s){return t.call(this,"ftyp",i,e,s)||this}return Em(i,t),i}(yp);function Tp(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new Mp(e,s,n)}var Np=function(t){function i(i,e){void 0===e&&(e="free");var s=t.call(this,e)||this;return s.data=i,s}return Em(i,t),i.prototype.getBoxContentSize=function(){var t,i;return null!==(i=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==i?i:0},i.prototype.serializeBoxContent=function(t){this.data&&t.concat(Xr.from(this.data))},i}(tn),Dp=function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=i.creation,r.modificationTime=i.modification,r.timescale=i.scale,r.duration=i.duration,r.language=e,r}return Em(i,t),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.FL},set:function(t){if(!f(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.FL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.YL},set:function(t){if(!f(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.YL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.GL},set:function(t){if(!f(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.GL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.VL},set:function(t){if(!f(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.VL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"language",{get:function(){return this.WL},set:function(t){if(!bp(t))throw new g("Expected an ISO-639-2/T language code");this.WL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMdiaContent(i),i.writer.writeBit(0);for(var e=0,s=this.language;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.charCodeAt(0)-96,5)}i.writer.writeUInt(0,16)},i}(G),Ip=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,0,s)||this}return Em(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(Dp),Sp=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,1,s)||this}return Em(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(Dp);function Ep(t){var i=t.data,e=Xu(i.nextUint32()),s=e.version,n=e.flags,r=hp(i,s),h=new xm(Xr.from(i.nextUint8Array(2)));h.skipBits(1);for(var o=[],a=0;a<3;a++)o.push(h.readUInt(5));var u=o.map((function(t){return String.fromCharCode(t+96)})).join("");return bp(u)||(u="und"),i.skip(2),0===s?new Ip(r,u,n.raw):new Sp(r,u,n.raw)}function bp(t){return/^[a-z]{3}$/.test(t)}var Lp=function(t){function i(){return t.call(this,"mdia")||this}return Em(i,t),i}(Y);function kp(t){for(var i=new Lp,e=0,s=np(t.data);e<s.length;e++){var n=s[e];Di(n,"mdhd")?i.boxes.push(Ep(n)):Di(n,"hdlr")?i.boxes.push(up(n)):i.boxes.push(Vh(n))}return i}var Cp=function(t){function i(){var i=t.call(this,"mdat")||this;return i.data=new Xr,i}return Em(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(this.data)},i}(tn);function xp(t){var i=t.data,e=i.nextUint8Array(i.data.byteLength-i.cursor.offset),s=new Cp;return s.data.pushRange(e),s}var Op;(function(t){function i(){return t.call(this,"minf")||this}Em(i,t)})(Y),function(t){function i(i){var e=t.call(this,"meta",0,0)||this;return e.handler=i,e}Em(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.handler.serialize())}}(_p);!function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(Op||(Op={}));var jp,zp,Pp={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function Bp(t,i){i.writer.writeUInt(ye(t.a,16),32),i.writer.writeUInt(ye(t.b,16),32),i.writer.writeUInt(ye(0,30),32),i.writer.writeUInt(ye(t.c,16),32),i.writer.writeUInt(ye(t.d,16),32),i.writer.writeUInt(ye(0,30),32),i.writer.writeUInt(ye(t.x,16),32),i.writer.writeUInt(ye(t.y,16),32),i.writer.writeUInt(ye(1,30),32)}function Rp(t,i){var e,s,n,r;i.writer.writeUInt(null!==(e=t.isLeading)&&void 0!==e?e:jp.UNKNOWN,2),i.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:zp.UNKNOWN,2),i.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:zp.UNKNOWN,2),i.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:zp.UNKNOWN,2)}function Hn(t,i){var e,s,n;i.writer.writeUInt(0,4),Rp(t,i),i.writer.writeUInt(null!==(e=t.samplePaddingValue)&&void 0!==e?e:0,3),i.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),i.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(jp||(jp={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(zp||(zp={}));var Up=function(){},Qp=function(t){function i(i,e,s){var n=t.call(this,"pssh",i,0)||this;return n.systemId=e,n.data=s,n}return Em(i,t),w.defineProperty(i.prototype,"systemId",{get:function(){return this.HL},set:function(t){if(16!==t.length)throw new g("Provided systemId length is not 16.");this.HL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"data",{get:function(){return this.qL},set:function(t){if(!f(t.length,32))throw new g("Provided data length does not fit in 32 bits.");this.qL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},i.prototype.serializeVersionBoxContent=function(t){},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(Xr.from(this.systemId)),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.data.length,32),i.concat(Xr.from(this.data))},i}(G),Fp=function(t){function i(i,e){return t.call(this,0,i,e)||this}return Em(i,t),i}(Qp),Yp=function(t){function i(i,e,s){var n=t.call(this,1,i,e)||this;return n.kIds=s,n}return Em(i,t),w.defineProperty(i.prototype,"kIds",{get:function(){return this.XL},set:function(t){if(!f(t.length,32))throw new g("Provided kIds length cannot fit in 32 bits.");if(t.some((function(t){return 16!==t.length})))throw new g("Not all provided key ids are 16 bytes long.");this.XL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var i=0,e=this.kIds;i<e.length;i++){var s=e[i];t.concat(Xr.from(s))}},i}(Qp);function Gp(t){var i=t.data.nextUint8();t.data.skip(3);var e=t.data.nextUint8Array(16),s=[];if(1===i)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var h=t.data.nextUint32(),o=t.data.nextUint8Array(h);return 1===i?new Yp(e,o,s):new Fp(e,o)}var Vp=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"mehd",e,s)||this;return n.fragmentDuration=i,n}return Em(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"fragmentDuration",{get:function(){return this.ZL},set:function(t){if(!f(t,this.bitSize))throw new g("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.ZL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(G),Wp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Em(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration,32)},i}(Vp),Hp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Em(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),i.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},i}(Vp);function qp(t){var i=t.data,e=Xu(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new Wp(i.nextUint32(),n.raw):new Hp(i.nextUint64(),n.raw)}var ru=function(t){function i(i,e,s,n){void 0===e&&(e={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,h,o,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=i,a.defaultSampleDescriptionIndex=null!==(r=null==e?void 0:e.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(h=e.sampleDuration)&&void 0!==h?h:0,a.defaultSampleSize=null!==(o=e.sampleSize)&&void 0!==o?o:0,a.defaultSampleFlags=e.sampleFlags,a}return Em(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.KL},set:function(t){if(!f(t,32))throw new g("Provided track id does not fit in 32 bits.");this.KL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.JL},set:function(t){if(!f(t,32))throw new g("Provided default sample description index does not fit in 32 bits.");this.JL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.$L},set:function(t){if(!f(t,32))throw new g("Provided default sample duration does not fit in 32 bits.");this.$L=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.ek},set:function(t){if(!f(t,32))throw new g("Provided default sample size does not fit in 32 bits.");this.ek=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.nk},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!f(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!f(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.nk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},i.prototype.serializeBoxContent=function(i){var e;t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),i.writer.writeUInt(this.defaultSampleDescriptionIndex,32),i.writer.writeUInt(this.defaultSampleDuration,32),i.writer.writeUInt(this.defaultSampleSize,32),Hn(null!==(e=this.defaultSampleFlags)&&void 0!==e?e:{},i)},i}(G);function Xp(t){var i=t.data,e=Xu(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),h=i.nextUint32(),o=i.nextUint32(),a=i.nextUint32(),u=zn(new xm(Xr.from(i.nextUint8Array(4))));return new ru(r,{sampleDescriptionIndex:h,sampleDuration:o,sampleSize:a,sampleFlags:u},s,n.raw)}var Zp=function(t){function i(){return t.call(this,"mvex")||this}return Em(i,t),i}(Y);function Kp(t){for(var i=new Zp,e=0,s=np(t.data);e<s.length;e++){var n=s[e];Di(n,"mehd")?i.boxes.push(qp(n)):Di(n,"trex")?i.boxes.push(Xp(n)):i.boxes.push(Vh(n))}return i}var Jp=function(t){function i(e,s,n,r,h){void 0===h&&(h=0);var o,a,u,c=this;return(c=t.call(this,"mvhd",r,h)||this).creationTime=e.creation,c.modificationTime=e.modification,c.timescale=e.scale,c.duration=e.duration,c.rate=null!==(o=n.rate)&&void 0!==o?o:i.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:i.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:Pp,c.rk=s,c}return Em(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.FL},set:function(t){if(!f(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.FL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.YL},set:function(t){if(!f(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.YL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.GL},set:function(t){if(!f(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.GL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.VL},set:function(t){if(!f(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.VL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"rate",{get:function(){return this.hk},set:function(t){if(!f(ye(t,16),32))throw new g("Provided rate does not fit in 32 bits (fixed 16.16).");this.hk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"volume",{get:function(){return this.ck},set:function(t){if(!f(ye(t,8),16))throw new g("Provided volume does not fit in 16 bits (fixed 8.8).");this.ck=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"matrix",{get:function(){return this.lk},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new g("(u, v, w) does not match the required (0, 0, 1)");this.lk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"nextTrackId",{get:function(){return this.rk},set:function(t){if(0===t)throw new g("NextTrackId cannot be 0.");if(!f(t,32))throw new g("NextTrackId cannot exceed 32 bits.");this.rk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMvhdContent(i),i.writer.writeUInt(ye(this.rate,16),32),i.writer.writeUInt(ye(this.volume,8),16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),Bp(this.matrix,i);for(var e=0;e<6;e++)i.writer.writeUInt(0,32);i.writer.writeUInt(this.nextTrackId,32)},i.DEFAULT_RATE=1,i.DEFAULT_VOLUME=1,i}(G),$p=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,0,n)||this}return Em(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(Jp),ty=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,1,n)||this}return Em(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(Jp);function iy(t){var i=t.data,e=Xu(i.nextUint32()),s=e.version,n=e.flags,r=hp(i,s),h=cc(i.nextUint32(),16),o=cc(i.nextUint16(),8);i.skip(2),i.skip(8);var a=op(i);i.skip(24);var u=i.nextUint32();return 0===s?new $p(r,u,{rate:h,volume:o,matrix:a},n.raw):new ty(r,u,{rate:h,volume:o,matrix:a},n.raw)}var ey=function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o={});var a,u,c,l=this;return l=t.call(this,"tkhd",i,function(t){var i,e,s,n;return{trackEnabled:null===(i=null==t?void 0:t.trackEnabled)||void 0===i||i,trackInMovie:null===(e=null==t?void 0:t.trackInMovie)||void 0===e||e,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(o))||this,l.creationTime=e.creation,l.modificationTime=e.modification,l.trackId=s,l.duration=e.duration,l.volume=n,l.width=r,l.height=h,l.layer=null!==(a=o.layer)&&void 0!==a?a:0,l.alternateGroup=null!==(u=o.alternateGroup)&&void 0!==u?u:0,l.matrix=null!==(c=o.matrix)&&void 0!==c?c:Pp,l}return Em(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.FL},set:function(t){if(!f(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.FL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.YL},set:function(t){if(!f(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.YL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"trackId",{get:function(){return this.KL},set:function(t){if(0===t)throw new g("trackId cannot be 0.");if(!f(t,32))throw new g("trackId cannot exceed 32 bits.");this.KL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.VL},set:function(t){if(!f(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.VL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"volume",{get:function(){return this.ck},set:function(t){if(!f(ye(t,8),16))throw new g("Provided volume does not fit in 16 bits (fixed 8.8).");this.ck=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"width",{get:function(){return this.dk},set:function(t){if(!f(ye(t,16),32))throw new g("Provided width does not fit in 32 bits (fixed 16.16).");this.dk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"height",{get:function(){return this.fk},set:function(t){if(!f(ye(t,16),32))throw new g("Provided height does not fit in 32 bits (fixed 16.16).");this.fk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"layer",{get:function(){return this._k},set:function(t){if(!f(t,16))throw new g("Provided layer does not fit in 16 bits.");this._k=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"alternateGroup",{get:function(){return this.gk},set:function(t){if(!f(t,16))throw new g("Provided alternateGroup does not fit in 16 bits.");this.gk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"matrix",{get:function(){return this.lk},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new g("(u, v, w) does not match the required (0, 0, 1)");this.lk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeTkhdContent(i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.layer,16),i.writer.writeUInt(this.alternateGroup,16),i.writer.writeUInt(ye(this.volume,8),16),i.writer.writeUInt(0,16),Bp(this.matrix,i),i.writer.writeUInt(ye(this.width,16),32),i.writer.writeUInt(ye(this.height,16),32)},i}(G),Ie=function(t){function i(i,e,s,n,r,h){return t.call(this,0,i,e,s,n,r,h)||this}return Em(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},i}(ey),sy=function(t){function i(i,e,s,n,r,h){return t.call(this,1,i,e,s,n,r,h)||this}return Em(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(ey);function ny(t){var i,e,s,n,r=t.data,h=Xu(r.nextUint32()),o=h.version,a=h.flags,u=a.isSet(8),c=a.isSet(4),l=a.isSet(2),d=a.isSet(1);0===o?(i=r.nextUint32(),e=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(i=r.nextUint64(),e=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),_=r.nextInt16(),g=cc(r.nextInt16(),8);r.skip(2);var w=op(r),A=cc(r.nextUint32(),16),v=cc(r.nextUint32(),16);return 0===o?new Ie({creation:i,modification:e,duration:n},s,g,A,v,{layer:f,matrix:w,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l}):new sy({creation:i,modification:e,duration:n},s,g,A,v,{layer:f,matrix:w,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l})}var ry=function(t){function i(){return t.call(this,"trak")||this}return Em(i,t),i}(Y);function hy(t){for(var i=new ry,e=0,s=np(t.data);e<s.length;e++){var n=s[e];Di(n,"tkhd")?i.boxes.push(ny(n)):Di(n,"mdia")?i.boxes.push(kp(n)):Di(n,"edts")?i.boxes.push(pp(n)):i.boxes.push(Vh(n))}return i}var Ve=function(t){function i(){return t.call(this,"moov")||this}return Em(i,t),i}(Y);function oy(t){for(var i=new Ve,e=0,s=np(t.data);e<s.length;e++){var n=s[e];Di(n,"mvhd")?i.boxes.push(iy(n)):Di(n,"trak")?i.boxes.push(hy(n)):Di(n,"mvex")?i.boxes.push(Kp(n)):Di(n,"pssh")?i.boxes.push(Gp(n)):i.boxes.push(Vh(n))}return i}var ay=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",e,s)||this;return n.baseMediaDecodeTime=i,n}return Em(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"baseMediaDecodeTime",{get:function(){return this.wk},set:function(t){if(!f(t,this.bitSize))throw new g("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.wk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(G),uy=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Em(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime,32)},i}(ay),Su=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Em(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},i}(ay);function cy(t){var i=t.data,e=Xu(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new uy(i.nextUint32(),n.raw):new Su(i.nextUint64(),n.raw)}var Ne=function(t){function i(i,e){void 0===e&&(e=0);var s=t.call(this,"tfhd",e,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(i))||this;return s.trackId=i.trackId,s.baseDataOffset=i.baseDataOffset,s.sampleDescriptionIndex=i.sampleDescriptionIndex,s.defaultSampleDuration=i.defaultSampleDuration,s.defaultSampleSize=i.defaultSampleSize,s.defaultSampleFlags=i.defaultSampleFlags,s}return Em(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.KL},set:function(t){if(!f(t,32))throw new g("Provided track id does not fit in 32 bits.");this.KL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"baseDataOffset",{get:function(){return this.Ak},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new g("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new g("The base data offset present flag is not set.");if(t&&!f(t,64))throw new g("Provided baseDataOffset does not fit in 32 bits.");this.Ak=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleDescriptionIndex",{get:function(){return this.vk},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new g("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new g("The sample description index flag is not set.");if(t&&!f(t,32))throw new g("Provided sampleDescriptionIndex does not fit in 32 bits.");this.vk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.$L},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new g("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new g("The default sample duration present flag is not set.");if(t&&!f(t,32))throw new g("Provided defaultSampleDuration does not fit in 32 bits.");this.$L=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.ek},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new g("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new g("The default sample size present flag is not set.");if(t&&!f(t,32))throw new g("Provided defaultSampleSize does not fit in 32 bits.");this.ek=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.nk},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new g("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new g("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!f(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!f(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.nk=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(i+=8),this.flags.sampleDescriptionIndexPresent&&(i+=4),this.flags.defaultSampleDurationPresent&&(i+=4),this.flags.defaultSampleSizePresent&&(i+=4),this.flags.defaultSampleFlagsPresent&&(i+=4),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(i.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&i.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&i.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&i.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&Hn(this.defaultSampleFlags,i)},i}(G);function ly(t){var i=t.data,e=i.nextUint8(),s=new xm(Xr.from(i.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var h=Boolean(s.readBit()),o=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),l=i.nextUint32(),d=c?i.nextUint64():void 0,f=u?i.nextUint32():void 0,_=a?i.nextUint32():void 0,g=o?i.nextUint32():void 0,w=h?zn(new xm(Xr.from(i.nextUint8Array(4)))):void 0;return new Ne({trackId:l,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:d,sampleDescriptionIndex:f,defaultSampleDuration:_,defaultSampleSize:g,defaultSampleFlags:w},e)}var dy=function(t){function i(i,e,s){var n=t.call(this,"trun",i,function(t){var i,e,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(i=t.sampleDurationPresent)&&void 0!==i&&i,sampleSizePresent:null!==(e=t.sampleSizePresent)&&void 0!==e&&e,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(e))||this;return n.dataOffset=e.dataOffset,n.samples=s,n.firstSampleFlags=e.firstSampleFlags,n}return Em(i,t),w.defineProperty(i.prototype,"dataOffset",{get:function(){return this.pk},set:function(t){if(t&&!f(t,32))throw new g("Provided data offset does not fit in 32 bits.");this.pk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"firstSampleFlags",{get:function(){return this.yk},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!f(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!f(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.yk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"samples",{get:function(){return this.Mk},set:function(t){var i,e;if(!f(t.length,32))throw new g("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new g("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new g("The sample duration present flag is not set.");if(r.duration&&!f(r.duration,32))throw new g("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new g("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new g("The sample size present flag is not set.");if(r.size&&!f(r.size,32))throw new g("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new g("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new g("The sample flags present flag is not set.");if((null===(i=r.flags)||void 0===i?void 0:i.samplePaddingValue)&&!f(r.flags.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null===(e=r.flags)||void 0===e?void 0:e.sampleDegradationPriority)&&!f(r.flags.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new g("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new g("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!f(r.compositionTimeOffset,32))throw new g("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.Mk=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(i+=4),this.flags.firstSampleFlagsPresent&&(i+=4),this.flags.sampleDurationPresent&&(i+=4*this.samples.length),this.flags.sampleSizePresent&&(i+=4*this.samples.length),this.flags.sampleFlagsPresent&&(i+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(i+=4*this.samples.length),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&i.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&Hn(this.firstSampleFlags,i);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];this.flags.sampleDurationPresent&&i.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&i.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&Hn(n.flags,i),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?i.writer.writeUInt(n.compositionTimeOffset,32):i.writer.writeInt(n.compositionTimeOffset,32))}},i}(G);function fy(t){var i=t.data,e=i.nextUint8(),s=new xm(Xr.from(i.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),h=Boolean(s.readBit()),o=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=i.nextUint32(),l={sampleDurationPresent:o,sampleSizePresent:h,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(l.dataOffset=i.nextInt32()),a&&(l.firstSampleFlags=zn(new xm(Xr.from(i.nextUint8Array(4)))));for(var d=[],f=0;f<c;f++){var _={};o&&(_.duration=i.nextUint32()),h&&(_.size=i.nextUint32()),r&&(_.flags=zn(new xm(Xr.from(i.nextUint8Array(4))))),n&&(_.compositionTimeOffset=0===e?i.nextUint32():i.nextInt32()),d.push(_)}return new dy(e,l,d)}var me=function(t){function i(){return t.call(this,"traf")||this}return Em(i,t),i}(Y);function _y(t){for(var i=new me,e=0,s=np(t.data);e<s.length;e++){var n=s[e];Di(n,"tfhd")?i.boxes.push(ly(n)):Di(n,"tfdt")?i.boxes.push(cy(n)):Di(n,"trun")?i.boxes.push(fy(n)):i.boxes.push(Vh(n))}return i}var Be=function(t){function i(){return t.call(this,"moof")||this}return Em(i,t),i}(Y);function gy(t){for(var i=new Be,e=0,s=np(t.data);e<s.length;e++){var n=s[e];Di(n,"traf")?i.boxes.push(_y(n)):Di(n,"pssh")?i.boxes.push(Gp(n)):i.boxes.push(Vh(n))}return i}!function(t){function i(i){var e=t.call(this,"mfhd",0,0)||this;return e.sequenceNumber=i,e}Em(i,t),w.defineProperty(i.prototype,"sequenceNumber",{get:function(){return this.Tk},set:function(t){if(!f(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.Tk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.sequenceNumber,32)}}(G);var wy=function(t){function i(i){var e=t.call(this,"frma")||this;return e.codingName=i,e}return Em(i,t),w.defineProperty(i.prototype,"codingName",{get:function(){return this.Nk},set:function(t){if(4!==t.length)throw new g("Provided coding name was not 4 characters long.");this.Nk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},i}(tn),Ay=(function(t){function i(i,e){var s=t.call(this,"pasp")||this;return s.hSpacing=i,s.vSpacing=e,s}Em(i,t),w.defineProperty(i.prototype,"hSpacing",{get:function(){return this.Dk},set:function(t){if(!f(t,32))throw new g("Provided hSpacing does not fit in 32 bits.");this.Dk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vSpacing",{get:function(){return this.Ik},set:function(t){if(!f(t,32))throw new g("Provided vSpacing does not fit in 32 bits.");this.Ik=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(tn),function(t){function i(i,e,s){var n=t.call(this,i)||this;return n.sample=e,n.sinf=s,n}Em(i,t),i.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},i.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(Y),function(t){function i(i,e,s){var n=t.call(this,"sinf")||this;return n.schm=e,n.schi=s,n.frma=new wy(i),n}Em(i,t),i.prototype.getBoxContentSize=function(){var t,i,e,s;return this.frma.getSize()+(null!==(i=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==i?i:0)+(null!==(s=null===(e=this.schi)||void 0===e?void 0:e.getSize())&&void 0!==s?s:0)},i.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(tn),function(t){function i(i,e,s){var n=t.call(this,"saio",i,void 0===s?0:1)||this;return n.entries=e,n.explicitAuxInfoType=s,n}return Em(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"entries",{get:function(){return this.bL},set:function(t){var i=this;if(!f(t.length,32))throw new g("Number of entries provided does not fit in 32 bits.");if(t.some((function(t){return!f(t,i.bitSize)})))throw new g("Not all provided entries fit in ".concat(this.bitSize," bits."));this.bL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.Sk},set:function(t){if(void 0===t)this.flags=0;else{if(!f(t.auxInfoType,32))throw new g("Provided auxInfoType does not fit in 32 bits.");if(!f(t.auxInfoTypeParameter,32))throw new g("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.Sk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(i)},i}(G)),vy=(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Em(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s,32)}}}(Ay),function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Em(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}(Ay),function(t){function i(i,e,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=i,n.sampleInfoSizes=e,n.explicitAuxInfoType=s,n}Em(i,t),w.defineProperty(i.prototype,"defaultSampleInfoSize",{get:function(){return this.Ek},set:function(t){if(!f(t,8))throw new g("Provided defaultSampleInfoSize does not fit in a single byte.");this.Ek=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleInfoSizes",{get:function(){return this.bk},set:function(t){if(!f(t.length,32))throw new g("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some((function(t){return!f(t,8)})))throw new g("Not all provided sampleInfoSizes fit in a byte.");this.bk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.Sk},set:function(t){if(void 0===t)this.flags=0;else{if(!f(t.auxInfoType,32))throw new g("Provided auxInfoType does not fit in 32 bits.");if(!f(t.auxInfoTypeParameter,32))throw new g("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.Sk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},i.prototype.serializeBoxContent=function(i){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new g("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeByte(this.defaultSampleInfoSize),i.writer.writeUInt(this.sampleInfoSizes.length,32);for(var e=0,s=this.sampleInfoSizes;e<s.length;e++){var n=s[e];i.writer.writeByte(n)}}}(G),function(t){function i(i){var e=t.call(this,"sdtp",0,0)||this;return e.samples=i,e}Em(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i);for(var e=0,s=this.samples;e<s.length;e++){Rp(s[e],i)}}}(G),function(t){function i(i){return t.call(this,"stsd",i,0)||this}Em(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(_p),function(t){function i(i,e,s){var n=t.call(this,"sgpd",i,0)||this;return n.entries=s,n.groupingType=e,n}return Em(i,t),w.defineProperty(i.prototype,"groupingType",{get:function(){return this.Lk},set:function(t){if(4!==t.length)throw new g("The provided groupingType does not equal 4 characters.");this.Lk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.groupingType),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];this.serializeEntryBoxContent(i,n)}},i.prototype.serializeEntryBoxContent=function(t,i){i.serializeBoxContent(t)},i}(G)),my=(function(t){function i(i,e){return t.call(this,0,i,e)||this}Em(i,t),i.prototype.serializeVersionBoxContent=function(t){}}(vy),function(t){function i(i,e,s){var n=t.call(this,1,i,s)||this;return n.defaultLength=e,n}Em(i,t),w.defineProperty(i.prototype,"defaultLength",{get:function(){return this.Ck},set:function(t){if(!f(t,32))throw new g("The provided defaultLength does not fit in 32 bits.");this.Ck=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},i.prototype.serializeEntryBoxContent=function(t,i){0===this.defaultLength&&t.writer.writeUInt(i.getBoxContentSize(),32),i.serializeBoxContent(t)}}(vy),function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=this;if(i<2)throw new g("This constructor is only meant for versions 2 and up.");return(r=t.call(this,i,e,s)||this).defaultSampleDescriptionIndex=n,r}Em(i,t),w.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.JL},set:function(t){if(!f(t,32))throw new g("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.JL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(vy),function(t){function i(i){void 0===i&&(i=[]);var e=t.call(this,"stsz",0,0)||this;return e.sampleSizes=i,e}Em(i,t),w.defineProperty(i.prototype,"sampleSizes",{get:function(){return this.xk},set:function(t){if(!f(t.length,32))throw new g("Number of allowed samples cannot fit in 32 bits.");if(t.some((function(t){return!f(t,32)})))throw new g("Not all sampleSizes can be represented in 32 bits.");this.xk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(this.sampleSizes.length,32);for(var e=0,s=this.sampleSizes;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(G),function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=i,s.samples=e,s}Em(i,t),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.ek},set:function(t){if(!f(t,32))throw new g("Provided defaultSampleSize does not fit in 32 bits.");this.ek=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"samples",{get:function(){return this.Mk},set:function(t){if(!f(t,32))throw new g("Number of allowed samples cannot fit in 32 bits.");this.Mk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.defaultSampleSize,32),i.writer.writeUInt(this.samples,32)}}(G),function(t){function i(){return t.call(this,"stbl")||this}Em(i,t)}(Y),function(t){function i(i){var e=t.call(this,"stsc",0,0)||this;return e.entries=i,e}Em(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.bL},set:function(t){if(!f(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!f(t.firstChunk,32)||!f(t.sampleDescriptionIndex,32)||!f(t.samplesPerChunk,32)})))throw new g("Not all entries can be represented in 96 bits.");this.bL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.firstChunk,32),i.writer.writeUInt(n.samplesPerChunk,32),i.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(G),function(t){function i(){return t.call(this,"schi")||this}Em(i,t)}(Y),function(t){function i(i,e,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=i,n.schemeVersion=e,n.schemeUri=s,n}Em(i,t),w.defineProperty(i.prototype,"schemeType",{get:function(){return this.Ok},set:function(t){if(4!==t.length)throw new g("The provided schemeType does not have a length of 4.");this.Ok=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"schemeVersion",{get:function(){return this.jk},set:function(t){if(!f(t,32))throw new g("The provided schemeVersion does not fit in 23 bits.");this.jk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"schemeUri",{get:function(){return this.zk},set:function(t){if(t&&4!==t.length)throw new g("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this.zk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeType),i.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(i.writer.writeString(this.schemeUri),i.writer.writeByte(0))}}(G),function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o=0);var a=t.call(this,"sidx",i,o)||this;return a.referenceId=e,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=h,a}return Em(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"referenceId",{get:function(){return this.Pk},set:function(t){if(!f(t,32))throw new g("Provided referenceId does not fit in 32 bits.");this.Pk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.GL},set:function(t){if(!f(t,32))throw new g("Provided timescale does not fit in 32 bits.");this.GL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"earliestPresentationTime",{get:function(){return this.Bk},set:function(t){if(!f(t,this.bitSize))throw new g("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.Bk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"firstOffset",{get:function(){return this.Rk},set:function(t){if(!f(t,this.bitSize))throw new g("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.Rk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"references",{get:function(){return this.Uk},set:function(t){if(!f(t.length,16))throw new g("The number of provided reference items does not fit in 16 bits.");for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!f(s.referencedSize,31))throw new g("Provided referenced size does not fit in 31 bits.");if(!f(s.subsegmentDuration,32))throw new g("Provided subsegment duration does not fit in 31 bits.");if(!f(s.sapType,3))throw new g("Provided SAP type does not fit in 3 bits.");if(!f(s.sapDeltaTime,28))throw new g("Provided SAP delta time does not fit in 28 bits.")}this.Uk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.referenceId,32),i.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(i),i.writer.writeUInt(0,16),i.writer.writeUInt(this.references.length,16);for(var e=0,s=this.references;e<s.length;e++){var n=s[e];i.writer.writeBit(n.referenceType),i.writer.writeUInt(n.referencedSize,31),i.writer.writeUInt(n.subsegmentDuration,32),i.writer.writeBool(n.startsWithSap),i.writer.writeUInt(n.sapType,3),i.writer.writeUInt(n.sapDeltaTime,28)}},i}(G)),py=function(t){function i(i,e,s,n,r,h){return void 0===h&&(h=0),t.call(this,0,i,e,s,n,r,h)||this}return Em(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},i}(my),yy=function(t){function i(i,e,s,n,r,h){return void 0===h&&(h=0),t.call(this,1,i,e,s,n,r,h)||this}return Em(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},i}(my);var My=function(t){function i(i,e,s){return t.call(this,"styp",i,e,s)||this}return Em(i,t),i}(yp);function Ty(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new My(e,s,n)}(function(t){function i(i){void 0===i&&(i=0);var e=t.call(this,"smhd",0,0)||this;return e.balance=i,e}Em(i,t),w.defineProperty(i.prototype,"balance",{get:function(){return this.Qk},set:function(t){if(t<-1||t>1)throw new g("Provided balance does not fit in the allowed range [-1, 1].");if(!f(ye(t,8),16))throw new g("Provided balance does not fit in 16 bits (fixed 8.8).");this.Qk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(ye(this.balance,8),16),i.writer.writeUInt(0,16)}})(G),function(t){function i(i){var e=t.call(this,"stss",0,0)||this;return e.entries=i,e}Em(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.bL},set:function(t){if(!f(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!f(t,32)})))throw new g("Not all entries can be represented in 32 bits.");this.bL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(G),function(t){function i(i){var e=t.call(this,"stts",0,0)||this;return e.entries=i,e}Em(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.bL},set:function(t){if(!f(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!f(t.sampleCount,32)||!f(t.sampleDelta,32)})))throw new g("Not all entries can be represented in 64 bits.");this.bL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),i.writer.writeUInt(n.sampleDelta,32)}}}(G),function(t){function i(i){var e=t.call(this,"trep",0,0)||this;return e.trackId=i,e}Em(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.KL},set:function(t){if(!f(t,32))throw new g("The provided trackId does not fit in 32 bits.");this.KL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32)}}(_p),function(t){function i(){return t.call(this,"udta")||this}Em(i,t)}(Y);var Ny={red:0,green:0,blue:0},Dy=(function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=Ny);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=i,s.opColor=e,s}Em(i,t),w.defineProperty(i.prototype,"opColor",{get:function(){return this.Fk},set:function(t){if(!f(t.red,16)||!f(t.green,16)||!f(t.blue,16))throw new g("Not all colors could be represented in 16 bits.");this.Fk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.graphicsMode,16),i.writer.writeUInt(this.opColor.red,16),i.writer.writeUInt(this.opColor.green,16),i.writer.writeUInt(this.opColor.blue,16)}}(G),function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h,o,a,u,c,l=this;return(l=t.call(this,i,e)||this).width=s.width,l.height=s.height,l.horizontalResolution=null!==(h=s.horizontal)&&void 0!==h?h:72,l.verticalResolution=null!==(o=s.vertical)&&void 0!==o?o:72,l.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",l.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,l.depth=null!==(c=n.depth)&&void 0!==c?c:24,l.clap=n.clap,l.pasp=n.pasp,l.extra=r,l}return Em(i,t),w.defineProperty(i.prototype,"width",{get:function(){return this.dk},set:function(t){if(!f(t,16))throw new g("Provided width does not fit in 16 bits.");this.dk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"height",{get:function(){return this.fk},set:function(t){if(!f(t,16))throw new g("Provided height does not fit in 16 bits.");this.fk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizontalResolution",{get:function(){return this.Yk},set:function(t){if(!f(ye(t,16),32))throw new g("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.Yk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"verticalResolution",{get:function(){return this.Gk},set:function(t){if(!f(ye(t,16),32))throw new g("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.Gk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"compressorName",{get:function(){return this.Vk},set:function(t){if(t.length>31)throw new g("The provided compressorName should at most be 31 characters long.");this.Vk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"frameCount",{get:function(){return this.Wk},set:function(t){if(!f(t,16))throw new g("Provided frameCount does not fit in 16 bits.");this.Wk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"depth",{get:function(){return this.Hk},set:function(t){if(!f(t,16))throw new g("Provided depth does not fit in 16 bits.");this.Hk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e,s,n,r,h;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(e=null===(i=this.clap)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(h=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==h?h:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.width,16),i.writer.writeUInt(this.height,16),i.writer.writeUInt(ye(this.horizontalResolution,16),32),i.writer.writeUInt(ye(this.verticalResolution,16),32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.frameCount,16),i.writer.writeByte(this.compressorName.length),i.writer.writeString(this.compressorName);for(var e=0;e<31-this.compressorName.length;e++)i.writer.writeByte(0);i.writer.writeUInt(this.depth,16),i.writer.writeInt(-1,16),this.clap&&i.concat(this.clap.serialize()),this.pasp&&i.concat(this.pasp.serialize()),this.extra&&Pm(i.writer,this.extra)},i}(se)),Iy=(function(t){function i(i){var e=t.call(this,"esds",0,0)||this;return e.esDescriptor=i,e}Em(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof j?this.esDescriptor.length:this.esDescriptor.getSize())},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor instanceof j?i.concat(Xr.from(this.esDescriptor)):this.esDescriptor.serialize(i)}}(G),function(t){function i(i,e,s){var n=t.call(this,"mp4a",i,s)||this;return n.esd=e,n}Em(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.esd.serialize())}}(fp),function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",i,e,n)||this;return r.esDescriptor=s,r}Em(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(Dy),function(t){function i(i,e){var s=t.call(this,"mp4s",i)||this;return s.esDescriptor=e,s}Em(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(se),function(t){function i(i){var e=t.call(this,"avcC")||this;return e.decoderConfig=i,e}Em(i,t),i.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},i.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(tn),function(){function t(t,i,e,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=e,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=i,this.spsSets=s,this.ppsSets=n}w.defineProperty(t.prototype,"version",{get:function(){return this.qk},set:function(t){if(!f(t,8))throw new g("Provided version does not fit in 8 bits.");this.qk=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileIndication",{get:function(){return this.Xk},set:function(t){if(!f(t,8))throw new g("Provided profileIndication does not fit in 8 bits.");this.Xk=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.Zk},set:function(t){if(!f(t,8))throw new g("Provided profileCompatibility does not fit in 8 bits.");this.Zk=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"levelIndication",{get:function(){return this.Kk},set:function(t){if(!f(t,8))throw new g("Provided levelIndication does not fit in 8 bits.");this.Kk=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"spsSets",{get:function(){return this.Jk},set:function(t){if(!f(t.length,5))throw new g("Provided number of spsSets exceeds the max (32)");this.Jk=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"ppsSets",{get:function(){return this.$k},set:function(t){if(!f(t.length,8))throw new g("Provided number of ppsSets exceeds the max (256)");this.$k=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce((function(t,i){return t+i.length}),0)+2*this.ppsSets.length+this.ppsSets.reduce((function(t,i){return t+i.length}),0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var i=0,e=this.spsSets;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.length,16),t.concat(Xr.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var h=r[n];t.writer.writeUInt(h.length,16),t.concat(Xr.from(h))}}}(),function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h=t.call(this,"avc1",i,e,n)||this;return h.configurationBox=s,h.bitrateBox=r,h}Em(i,t),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(e=null===(i=this.bitrateBox)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.configurationBox.serialize()),this.bitrateBox&&i.concat(this.bitrateBox.serialize())}}(Dy),function(t){function i(i,e,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=i,n.max=e,n.avg=s,n}Em(i,t),w.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.vL},set:function(t){if(!f(t,32))throw new g("Provided bufferSizeDb does not fit in 32 bits.");this.vL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"max",{get:function(){return this.tC},set:function(t){if(!f(t,32))throw new g("Provided max does not fit in 32 bits.");this.tC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"avg",{get:function(){return this.iC},set:function(t){if(!f(t,32))throw new g("Provided avg does not fit in 32 bits.");this.iC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 12},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(tn),function(t){function i(i,e){var s,n,r,h,o=this;if(o=t.call(this,"tenc",i,0)||this,e.perSampleIvSize>0&&(null!==(n=null===(s=e.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new g("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return o.kId=e.kId,o.isProtected=null!==(r=e.isProtected)&&void 0!==r?r:1,e.perSampleIvSize>0?o.perSampleIvSize=e.perSampleIvSize:o.constantIv=null!==(h=e.constantIv)&&void 0!==h?h:new j(0),o}return Em(i,t),w.defineProperty(i.prototype,"isProtected",{get:function(){return this.eC},set:function(t){if(!f(t,8))throw new g("Provided isProtected does not fit in 1 byte.");this.eC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"perSampleIvSize",{get:function(){return this.sC},set:function(t){if(![8,16].includes(t))throw new g("Provided perSampleIvSize does not match any allowed value [8, 16].");this.sC=t,this.nC=new j(0)},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"kId",{get:function(){return this.rC},set:function(t){if(16!==t.length)throw new g("Provided kId length is not 16.");this.rC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"constantIv",{get:function(){return this.nC},set:function(t){if(![8,16].includes(t.length))throw new g("Provided constant IV length does not match any allowed value [8, 16].");this.nC=t,this.sC=0},enumerable:!1,configurable:!0}),i.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeOwnContent(i)},i.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),Pm(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),Pm(t.writer,this.constantIv))},i}(G)),Sy=(function(t){function i(i){return t.call(this,0,i)||this}Em(i,t)}(Iy),function(t){function i(i){var e=t.call(this,1,i)||this;return e.cryptByteBlocks=i.cryptByteBlock,e.skipByteBlocks=i.skipByteBlock,e}return Em(i,t),w.defineProperty(i.prototype,"cryptByteBlocks",{get:function(){return this.hC},set:function(t){if(!f(t,4))throw new g("Provided cryptByteBlocks does not fit in 4 bits.");this.hC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"skipByteBlocks",{get:function(){return this.oC},set:function(t){if(!f(t,4))throw new g("Provided skipByteBlocks does not fit in 4 bits.");this.oC=t},enumerable:!1,configurable:!0}),i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},i}(Iy));!function(t){function i(i){var e=t.call(this)||this;return e.tencBox=new Sy(i),e}Em(i,t),i.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},i.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(Up);function Ey(t){return void 0!==t.iv}function by(t){return void 0!==t.subsamples}(function(t){function i(i){var e=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return e.samples=i,e}Em(i,t),w.defineProperty(i.prototype,"samples",{get:function(){return this.Mk},set:function(t){var i;if(!f(t.length,32))throw new g("The number of samples provided does not fit in 32 bits.");for(var e=0,s=t;e<s.length;e++){var n=s[e];if(Ey(n)&&![8,16].includes(n.iv.length))throw new g("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===i&&(i=by(n)),!0===i&&!by(n)||!1===i&&by(n))throw new g("Mix of samples with and without subsamples detected.");if(by(n)){if(!f(n.subsamples.length,16))throw new g("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];if(!f(o.clearData,16))throw new g("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!f(o.protectedData,23))throw new g("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=i&&i,this.Mk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){for(var i=0,e=0,s=this.samples;e<s.length;e++){var n=s[e];Ey(n)&&(i+=n.iv.length),by(n)&&(i+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];if(Ey(n)&&Pm(i.writer,n.iv),by(n)){i.writer.writeUInt(n.subsamples.length,16);for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];i.writer.writeUInt(o.clearData,16),i.writer.writeUInt(o.protectedData,32)}}}},i.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}})(G),function(t){function i(i,e,s,n,r){var h=t.call(this,"emsg",0,0)||this;return h.schemeIdUri=i,h.value=e,h.data=r,h.id=s,h.timescale=n.timescale,h.presentationTimeDelta=n.presentationTimeDelta,h.eventDuration=n.eventDuration,h}Em(i,t),w.defineProperty(i.prototype,"timescale",{get:function(){return this.GL},set:function(t){if(!f(t,32))throw new g("The provided timescale does not fit in 32 bits.");this.GL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"presentationTimeDelta",{get:function(){return this.aC},set:function(t){if(!f(t,32))throw new g("The provided presentationTimeDelta does not fit in 32 bits.");this.aC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"eventDuration",{get:function(){return this.uC},set:function(t){if(!f(t,32))throw new g("The provided eventDuration does not fit in 32 bits.");this.uC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"id",{get:function(){return this.CT},set:function(t){if(!f(t,32))throw new g("The provided id does not fit in 32 bits.");this.CT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeIdUri),i.writer.writeByte(0),i.writer.writeString(this.value),i.writer.writeByte(0),i.writer.writeUInt(this.timescale,32),i.writer.writeUInt(this.presentationTimeDelta,32),i.writer.writeUInt(this.eventDuration,32),i.writer.writeUInt(this.id,32),i.concat(Xr.from(this.data))}}(G);var Ly=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new zm,i=0,e=this.boxes;i<e.length;i++){var s=e[i];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function ky(t,i){return function(e){var s=function(t,i){for(var e=t.data,s=t.cursor;s.offset<e.byteLength;){var n=rp(e,s);if(!n.complete)return;if(Di(n.box,i))return n.box}}(new ep($m(e),new ip),t);if(!s)throw new g("".concat(t," box not found"));return i(s)}}var Cy=ky("moov",oy),xy=ky("sidx",(function(t){var i,e,s=t.data,n=Xu(s.nextUint32()),r=n.version,h=n.flags,o=s.nextUint32(),a=s.nextUint32();0===r?(i=s.nextUint32(),e=s.nextUint32()):(i=s.nextUint64(),e=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],l=0;l<u;l++){var d=new xm(Xr.from(s.nextUint8Array(12))),f=d.readBit(),_=d.readUInt(31),g=d.readUInt(32),w=Boolean(d.readBit()),A=d.readUInt(3),v=d.readUInt(28);c.push({referenceType:f,referencedSize:_,subsegmentDuration:g,startsWithSap:w,sapType:A,sapDeltaTime:v})}return 0===r?new py(o,a,i,e,c,h.raw):new yy(o,a,i,e,c,h.raw)})),Oy=ky("moof",gy),jy=ky("pssh",Gp);function zy(t){return function(t){for(var i=new Ly,e=0,s=np(t);e<s.length;e++){var n=s[e];Di(n,"ftyp")?i.boxes.push(Tp(n)):Di(n,"styp")?i.boxes.push(Ty(n)):Di(n,"moov")?i.boxes.push(oy(n)):Di(n,"moof")?i.boxes.push(gy(n)):Di(n,"mdat")?i.boxes.push(xp(n)):i.boxes.push(Vh(n))}return i}(new ep($m(t),new ip))}var Py=class extends xd{get cC(){return this.lC}get dC(){return this.fC.expiration}get _C(){return this.gC}get wC(){return this.fC.sessionId}Ws(){if(this.AC)return this.lC;const t=[];return t.push(Promise.resolve(this.fC.close())),t.push(lt(1e3)),this.vC.Xd(Promise.race(t).catch(By)),this.AC=!0,this.lC}mC(t,i,e){if(fi.uE){const t=jy(He(i));if(1===t.version){i=new Fp(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.fC.generateRequest(t,i)).catch(By)}$n(t){return Promise.resolve(this.fC.load(t)).catch(By)}ET(){return Promise.resolve(this.fC.remove()).catch(By)}Yn(t){return Promise.resolve(this.fC.update(t)).catch(By)}pC(){this.gC.Vb(),this.fC.keyStatuses.forEach(((t,i)=>{this.yC(i,t)})),this.Co(new ir(this))}yC(t,i){if("string"==typeof t){const e=t;t=i,i=e}const e=He(t);if(this.KA===e_&&16===e.byteLength){let t=ha(e),i=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,i,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.KA===e_&&"status-pending"===i&&(i="usable"),this.gC.Gb(e,i)}constructor(t,i){super(),this.fC=t,this.KA=i,this.AC=!1,this.MC=()=>{this.pC()},this.TC=t=>{this.Co(new Ns(this,t.messageType,Nm(this.KA,t.message)))},this.NC=()=>{this.AC=!0,this.gC.rp>0&&(this.gC.Vb(),this.Co(new ir(this))),this.fC.removeEventListener("keystatuseschange",this.MC),this.fC.removeEventListener("message",this.TC)},this.fC.addEventListener("keystatuseschange",this.MC),this.fC.addEventListener("message",this.TC),this.gC=new Is;const e=[];this.fC.closed&&e.push(Promise.resolve(this.fC.closed)),this.vC=new Rs,e.push(this.vC.Zb),this.lC=Promise.race(e).then(this.NC,this.NC),this.pC()}};function By(t){let i;if(t.message){const e=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);e&&(i=0|x(e[1],16))}throw new Im(t.message,void 0,i,t)}var Ry=class{async DC(t){return new Py(this.IC.createSession(t),this.ZA)}SC(t){return Promise.resolve(this.IC.setServerCertificate(t))}bn(t){return Promise.resolve(t.setMediaKeys(this.IC))}EC(t){return Promise.resolve(t.setMediaKeys(null))}tr(){return Promise.resolve()}constructor(t,i,e){this.IC=t,this.ZA=i,this.wd=e}},Uy=class{get ZA(){return this.bC.keySystem}async LC(){const t=await this.bC.createMediaKeys();return new Ry(t,this.KA,this.kC)}xC(){return this.kC}constructor(t,i,e){this.bC=t,this.KA=i,this.kC=e}},Qy=fi.wE&&fi.vE>=42||fi.FE&&fi.GE>=38||fi.OE||fi.BE||fi.ZE&&fi.JE>=29;function Fy(t,i){return is(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[Tt({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[Tt({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function Yy(){return void 0!==Dl&&"function"==typeof Dl.requestMediaKeySystemAccess}function Gy(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var Vy=class{OC(){return this.jC(dm)}zC(){return this.jC(gm)}BC(){return this.jC(On)}RC(){return this.jC(fm)}jC(t){const i=t.Lb,e=this.UC.get(i);if(e)return e;const s=this.QC(t,'video/mp4; codecs="avc1.42000a"');return this.UC.set(i,s),s}async QC(t,i){try{return await this.YC.FC(t.Sb,[Fy(i,!0)]),!0}catch(e){try{return await this.YC.FC(t.Sb,[Fy(i,!1)]),!0}catch(t){return!1}}}GC(){return this.VC||(this.VC=this.WC()),this.VC}async WC(){return"https:"!==um.protocol&&(!!Qy&&!await this.zC())}constructor(t){this.UC=Eo(),this.VC=void 0,this.YC=t}};function Wy(t,i,e,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,HC:s.HC};let h=!1;if(s.audioCapabilities){const o=s.audioCapabilities.filter((t=>Boolean(t.contentType)));o.length&&(r.audioCapabilities=o.filter((s=>Hy(t,i,e,s))),h=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const o=s.videoCapabilities.filter((t=>Boolean(t.contentType)));o.length&&(r.videoCapabilities=o.filter((s=>Hy(t,i,e,s))),h=!0,r.videoCapabilities.length&&(n=!0))}return h||(n=t(e,"video/mp4")),n?r:void 0}function Hy(t,i,e,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!gd(i,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(e,Js(s.contentType))}function qy(t){if(t.videoCapabilities)for(const i of t.videoCapabilities)if(i.contentType)return i.contentType;if(t.audioCapabilities)for(const i of t.audioCapabilities)if(i.contentType)return i.contentType}function Xy(t){const i=[];for(const e of t)e.encryptionScheme&&i.push({contentType:e.contentType,robustness:e.robustness});return t.concat(i)}function Zy(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(Ky))||!(!t.videoCapabilities||!t.videoCapabilities.some(Ky))}function Ky(t){return!t.robustness}function Jy(t,i){const e=[];for(const s of t)s.robustness?e.push(s):e.push(Tt({},s,{robustness:i}));return e}var $y=class{async FC(t,i){i=i.filter((t=>!t.HC));for(const t of i)t.audioCapabilities&&(t.audioCapabilities=Xy(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=Xy(t.videoCapabilities));if(t===n_&&i.some(Zy)){const e=i.map((t=>function(t,i){return Tt({},t,{videoCapabilities:t.videoCapabilities?Jy(t.videoCapabilities,i):void 0,audioCapabilities:t.audioCapabilities?Jy(t.audioCapabilities,i):void 0})}(t,"SW_SECURE_CRYPTO")));try{const i=await Dl.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new Uy(i,t,s)}catch(t){}}const e=await Dl.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new Uy(e,t,s)}static qC(){return Yy()}},tM=class extends xd{get wC(){return this.XC&&this.XC.sessionId||""}get dC(){return NaN}get cC(){return this.ZC.Zb}get _C(){return this.KC}async mC(t,i,e){this.JC(),this.$C=new Rs,this.DC(He(i),e),await this.$C.Zb}DC(t,i){if(!t)throw new b("Expected initData to be defined but was "+t+".");const e=i&&i.playready&&i.playready.tx;let s;return s=i?this.ix.createSession(this.sx,t,e):this.ix.createSession(this.sx,t),s.addEventListener("mskeyclose",this.NC),s.addEventListener("mskeymessage",this.nx),s.addEventListener("mskeyerror",this.Ss),s.addEventListener("mskeyadded",this.hx),this.XC=s,this.ox("status-pending"),s}async $n(t){return this.JC(),!0}async Yn(t){if(this.ux=new Rs,this.JC(),!this.XC)return Promise.resolve();const i=He(t);if(0===i.byteLength)throw new b("Cannot call update with an empty response.");this.XC.update(i),await this.ux.Zb}Ws(){return!this.AC&&this.XC&&(this.AC=!0,this.XC.close()),this.ZC.Zb}async ET(){this.JC()}JC(){if(this.AC)throw new b("Already closing or closed.")}ox(t){this.KC.Vb(),this.KC.Gb(Mm,t),this.Co(new ir(this))}constructor(t,i){super(),this.ix=t,this.sx=i,this.AC=!1,this.ux=void 0,this.$C=void 0,this.XC=void 0,this.NC=()=>{this.AC=!0,this.ZC.Wb(void 0),this.XC&&(this.XC.removeEventListener("mskeyclose",this.NC),this.XC.removeEventListener("mskeymessage",this.nx),this.XC.removeEventListener("mskeyerror",this.Ss),this.XC.removeEventListener("mskeyadded",this.hx))},this.nx=t=>{this.$C&&(this.$C.Wb(void 0),this.$C=void 0),this.Co(new Ns(this,"license-request",Dt(t.message).buffer,t.destinationURL||void 0))},this.Ss=()=>{const t=this.XC&&this.XC.error;if(!t)return;const i=new Im("Unknown CDM error",t.code,t.systemCode);if(this.$C)this.$C.qb(i),this.$C=void 0;else if(this.ux)this.ux.qb(i),this.ux=void 0;else switch(i.Kb){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.ox("output-not-allowed");break;default:this.ox("internal-error")}},this.hx=()=>{this.$C&&(this.ox("usable"),this.$C.Wb(void 0),this.$C=void 0),this.ux&&(this.ox("usable"),this.ux.Wb(void 0),this.ux=void 0)},this.ZC=new Rs,this.KC=new Is}},iM=class{async DC(t){return new tM(this.ix,this.sx)}SC(t){return Promise.resolve(!1)}bn(t){const i=()=>{t.msSetMediaKeys(this.ix),t.removeEventListener("loadedmetadata",i)};return t.readyState>=1?t.msSetMediaKeys(this.ix):t.addEventListener("loadedmetadata",i),Promise.resolve()}EC(t){return Promise.resolve()}tr(){return Promise.resolve()}constructor(t,i,e){this.ix=t,this.ZA=i,this.wd=e;const s=qy(e)||"video/mp4";this.sx=Js(s)}},eM=class{get ZA(){return this.KA}xC(){return this.lx}LC(){const t=new _s.MSMediaKeys(this.KA);return Promise.resolve(new iM(t,this.KA,this.lx))}constructor(t,i){this.KA=t,this.lx=i}},sM=class{FC(t,i){try{return Promise.resolve(function(t,i){if(!nM())throw new b("Unsupported key system "+t);for(let e of i){let i=Wy(rM,vm,t,e);if(i)return new eM(t,i)}throw new b("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static qC(){return nM()}};function nM(){return void 0!==_s.MSMediaKeys&&"function"==typeof _s.MSMediaKeys.isTypeSupported}function rM(t,i){return _s.MSMediaKeys.isTypeSupported(t,i)}var hM=class extends xd{get wC(){return this._x?this._x.sessionId:""}get dC(){return NaN}get cC(){return this.ZC.Zb}get _C(){return this.KC}mC(t,i,e){const s=e&&e.fairplay&&e.fairplay.gx;if(!s)throw new b("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,i,e){const s=Fa(t),n=2*s.length,r=2*i.length;let h=new ArrayBuffer(4+n+4+r+4+e.byteLength),o=new DataView(h),a=new L;return Pu(o,a,n,!0),hg(o,a,s,!0),Pu(o,a,r,!0),hg(o,a,i,!0),Pu(o,a,e.byteLength,!0),q_(o,a,e),new j(h)}(He(i),s,this.wx);return this._x=this.Ax.createSession(this.sx,n),this._x.addEventListener("webkitkeymessage",this.nx,!1),this._x.addEventListener("webkitkeyadded",this.hx,!1),this._x.addEventListener("webkitkeyerror",this.Ss,!1),this.ox("status-pending"),this.vx.Wb(this._x),this.vx=new Rs,Promise.resolve()}$n(t){return Promise.resolve(!0)}async Yn(t){const i=He(t);if(0===i.byteLength)throw new b("Cannot call update with an empty response.");this.mx=new Rs;(this._x||await this.vx.Zb).update(i),await this.mx.Zb}Ws(){var t;const i=this._x;return i&&(i.removeEventListener("webkitkeymessage",this.nx,!1),i.removeEventListener("webkitkeyadded",this.hx,!1),i.removeEventListener("webkitkeyerror",this.Ss,!1),i.close()),this.vx.qd(),null==(t=this.mx)||t.qd(),this.ZC.Wb(void 0),this.ZC.Zb}ET(){return Promise.resolve(void 0)}ox(t){this.KC.Vb(),this.KC.Gb(Mm,t),this.Co(new ir(this))}constructor(t,i,e){super(),this.Ax=t,this.sx=i,this.wx=e,this.ZC=new Rs,this.mx=void 0,this.KC=new Is,this._x=void 0,this.vx=new Rs,this.Ss=()=>{const t=this._x&&this._x.error;if(!t)return;const i=new Im("Unknown CDM error",t.code,t.systemCode);this.mx?(this.mx.qb(i),this.mx=void 0):i.Kb===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.ox("output-not-allowed"):this.ox("internal-error"),this.Co(new pm)},this.nx=t=>{this.Co(new Ns(this,"license-request",Dt(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.hx=()=>{this.mx&&(this.mx.Wb(void 0),this.mx=void 0),this.ox("usable")}}};var oM=class{getInternalMediaKeys(){return this.Ax}async DC(t){if(!this.wx)throw new $i(Ui.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new hM(this.Ax,this.sx,this.wx)}SC(t){return this.wx=He(t),Promise.resolve(!0)}bn(t){return t.webkitSetMediaKeys(this.Ax),Promise.resolve()}EC(t){return t.webkitSetMediaKeys(null),Promise.resolve()}tr(){return Promise.resolve()}constructor(t,i,e){this.Ax=t,this.ZA=i,this.wd=e,this.wx=void 0;const s=qy(e)||"video/mp4";this.sx=Js(s)}},aM=class{get ZA(){return this.KA}xC(){return this.lx}LC(){const t=new _s.WebKitMediaKeys(this.KA);return Promise.resolve(new oM(t,this.KA,this.lx))}constructor(t,i){this.KA=t,this.lx=i}},uM=class{FC(t,i){try{return Promise.resolve(function(t,i){if(t!==o_)throw new b(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!cM())throw new b("Unsupported key system "+t);for(let e of i){let i=Wy(lM,mm,t,e);if(i)return new aM(t,i)}throw new b("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static qC(){return cM()}};function cM(){return void 0!==_s.WebKitMediaKeys&&"function"==typeof _s.WebKitMediaKeys.isTypeSupported}function lM(t,i){return _s.WebKitMediaKeys.isTypeSupported(t,i)}var dM=class{async FC(t,i){for(let e of this.yx)try{return await e.FC(t,i)}catch(t){}throw new b("Unsupported key system configuration for "+t)}constructor(t){this.yx=t}},_r=class{Mx(t,i){return new Promise((e=>{const s=new na;s.Xd(this.Tx.Wd),i&&s.Xd(i);const n=()=>{s.Ud()};this.Nx.push((()=>{const i=fM(t,s.Wd);return e(i),i.then(n,n)})),this.Dx||(this.Dx=this.Ix())}))}qd(){return this.Sx(!0)}gn(){return this.Ex=void 0,this.Sx(!1)}Sx(t){const i=this.Dx;return this.Tx.qd(),t&&(this.Tx=new na),Promise.resolve(i)}constructor(t){this.Nx=[],this.Dx=void 0,this.Tx=new na,this.Ix=()=>{if(0===this.Nx.length)return this.Ex?fM(this.Ex,this.Tx.Wd).then(this.bx,this.bx):this.bx();return this.Nx.shift()().then(this.Ix)},this.bx=()=>{if(0!==this.Nx.length)return this.Ix();this.Dx=void 0},this.Ex=t}};function fM(t,i){return new Promise((e=>e(t(i))))}var _M,gM=new _r,wM=class extends xd{Lx(){this.mx&&(this.ox("usable"),this.mx.Wb(void 0),this.mx=void 0)}kx(t){const i=new Im("Unknown CDM error",t.errorCode,t.systemCode);this.mx?(this.mx.qb(i),this.mx=void 0):this.$C?(this.$C.qb(i),this.$C=void 0):i.Kb===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.ox("output-restricted"):1===i.Jb?this.ox("expired"):this.ox("internal-error")}Cx(t){0!==t.message.byteLength?(this.$C&&(this.$C.Wb(void 0),this.$C=void 0),this.Co(new Ns(this,"license-request",Nm(this.KA,Dt(t.message).buffer),t.defaultURL||void 0))):this.$C&&(this.$C.qb("Empty key message"),this.$C=void 0)}xx(t){this.Ox||(this.Ox=t,this.jx.Wb(t))}get _C(){return this.zx}get wC(){return this.Px}set wC(t){this.Px=t}get cC(){return this.ZC.Zb}get dC(){return NaN}async Ws(){this.throwIfClosed(),this.mx&&(this.mx.qb(void 0),this.mx=void 0),this.aL=!0,this.ZC.Wb(void 0)}async mC(t,i){this.throwIfClosed(),this.$C=new Rs,this.Bx=He(i);(this.Ox||await this.jx.Zb).webkitGenerateKeyRequest(this.KA,this.Bx),await this.$C.Zb}async $n(t){return this.throwIfClosed(),!1}async ET(){this.throwIfClosed()}async Yn(t){if(this.throwIfClosed(),this.mx=new Rs,fi.LE||fi.DE)return gM.Mx((async()=>{await this.doUpdate(t)}));await this.doUpdate(t)}async doUpdate(t){if(void 0===this.mx)return;(this.Ox||await this.jx.Zb).webkitAddKey(this.KA,He(t),this.Bx,this.wC),await this.mx.Zb,fi.DE&&await lt(500)}throwIfClosed(){if(this.aL)throw new b("Already closing or closed.")}ox(t){this.zx.Vb(),this.zx.Gb(Mm,t),this.Co(new ir(this))}async Rx(){const t=this.Ox||await this.jx.Zb;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.KA,this.Px)}catch(t){}finally{await lt(500)}}constructor(t){super(),this.KA=t,this.$C=void 0,this.mx=void 0,this.aL=!1,this.Bx=void 0,this.Ox=void 0,this.ZC=new Rs,this.Px="",this.jx=new Rs,this.zx=new Is}},AM=class{bn(t){return this.Ox=t,this.Ox.addEventListener("webkitkeyadded",this.hx),this.Ox.addEventListener("webkitkeyerror",this.Ux),this.Ox.addEventListener("webkitkeymessage",this.Qx),this.Fx.forEach(((i,e)=>i.xx(t))),this.Yx.forEach((i=>i.xx(t))),Promise.resolve()}EC(t){return t.removeEventListener("webkitkeyadded",this.hx),t.removeEventListener("webkitkeyerror",this.Ux),t.removeEventListener("webkitkeymessage",this.Qx),this.Ox=void 0,Promise.resolve()}async tr(){let t=this.Fx.entries(),i=t.next();for(;!i.done;)await i.value[1].Rx(),i=t.next();this.Fx.clear()}async DC(t,i,e){const s=new wM(this.ZA);return this.Ox&&s.xx(this.Ox),this.Yx.push(s),s}SC(t){return Promise.resolve(!1)}Gx(t){if(!t)return;let i=this.Fx.get(t);return i||(i=this.Yx.shift(),i?(i.wC=t,this.Fx.set(t,i),i):void 0)}constructor(t,i){this.ZA=t,this.wd=i,this.Ox=void 0,this.Fx=Eo(),this.Yx=[],this.hx=t=>{const i=this.Gx(t.sessionId);i&&i.Lx()},this.Ux=t=>{const i=this.Gx(t.sessionId);i&&i.kx(t)},this.Qx=t=>{const i=this.Gx(t.sessionId);i&&i.Cx(t)}}},vM=class{LC(){return Promise.resolve(new AM(this.ZA,this.Vx))}xC(){return this.Vx}constructor(t,i){this.ZA=t,this.Vx=i}};function fh(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function mM(t){let i;for(;Yt(i=t.firstChild);)t.removeChild(i)}function pM(t,i){t.insertBefore(i,t.firstChild)}function yM(t){const i=t.className;return"string"==typeof i?i:i&&"string"==typeof i.baseVal?i.baseVal:""}function MM(t,i){const e=t.className;"string"==typeof e?t.className=i:e&&"string"==typeof e.baseVal&&(e.baseVal=i)}function TM(t,i){return void 0!==t.classList?t.classList.contains(i):void 0!==t.className&&-1!==(" "+yM(t)+" ").indexOf(" "+i+" ")}function Yn(t,i){if(void 0!==t.classList)t.classList.add(i);else if(void 0!==t.className){const e=yM(t);-1===(" "+e+" ").indexOf(" "+i+" ")&&MM(t,(e+" "+i).trim())}}function NM(t,i){if(void 0!==t.classList)t.classList.remove(i);else if(void 0!==t.className){let e=" "+yM(t)+" ";const s=" "+i+" ";for(;-1!==e.indexOf(s);)e=e.replace(s," ");MM(t,e.trim())}}function DM(t,i,e){void 0===e&&(e=!TM(t,i)),e?Yn(t,i):NM(t,i)}function IM(t){t.stopPropagation()}function SM(t,i){fi.DE&&fi.EE<3?function(t,i){let e=i;switch(i){case"flex":e="-webkit-flex";break;case"inline-flex":e="-webkit-inline-flex"}t.display=e}(t,i):function(t,i){if(t.display=i,t.display!==i){let e=i;switch(i){case"flex":e="-ms-flexbox";break;case"inline-flex":e="-ms-inline-flexbox"}t.display=e}}(t,i)}function on(t,i){const e=i.style;if(e)for(const i of w.keys(t)){const s=t[i];void 0!==s&&(e[i]=s)}}function ia(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.top="0",i.bottom="0",i.width="100%",i.height="100%"}function EM(t){t.removeAttribute("title")}function bM(t){t.addEventListener("mouseover",(t=>{EM(t.target)}))}function LM(t){try{return Boolean(t)&&t===t.top}catch(t){return!1}}function sn(t){try{return Boolean(t)&&t.parent!==t}catch(t){return!1}}function Bs(t){return"video"===function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}(t)}function kM(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load())}function CM(){return void 0!==h?h.createElement("video"):void 0}function en(){return _M||(_M=CM()),_M}var xM,ai,OM=class{FC(t,i){try{return Promise.resolve(function(t,i){if(!OM.qC())throw new b("Unsupported key system "+t);for(let e of i){let i=Wy(jM,vm,t,e);if(i)return new vM(t,i)}throw new b("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static qC(){return Gy()}};function jM(t,i){const e=en();return!(!e||!e.canPlayType||""===e.canPlayType(i,t))}function zM(){return xM||(xM=function(){const t=[];uM.qC()&&t.push(new uM);$y.qC()&&t.push(new $y);sM.qC()&&t.push(new sM);OM.qC()&&t.push(new OM);return new dM(t)}()),xM}!function(t){t[t.Wx=0]="Wx",t[t.Hx=1]="Hx"}(ai||(ai={}));var lc=class extends wn{constructor(t){super(he.Bw),this.currentTime=t}},Zr=class extends wn{constructor(t){super(he.Rw),this.currentTime=t}},PM=[he.H_,he.Rw,l.jh,l.Sh],lu=class extends xd{qx(t){!this.Xx&&t>=ae.Xn&&(this.Xx=!0,this.Co(new ns(this.Zx.Mf,t)))}Kx(t){!this.Jx&&t>=ae.uT&&(this.Jx=!0,this.Co(new us(this.Zx.Mf,t)))}$x(t){this.tO||(t>=ae.cT&&this.iO<ae.cT&&!this.Zx.Ff||this.eO&&t>=ae.cT)&&this.Co(new Zr(this.Zx.Mf))}sO(t){!this.nO(t)||this.Zx.If||this.Zx.lt||this.Co(new lc(this.Zx.Mf))}rO(t){this.iO<=ae.uT&&t>=ae.cT&&this.Co(new xt(this.Zx.Mf,t))}maybeDispatchCanPlayThroughEvent(t){t===ae.lT&&this.Co(new ds(this.Zx.Mf,t))}nO(t){const i=!this.Zx.Ff&&t<=ae.uT,e=!this.hO&&this.iO<=ae.uT;return i&&!e}get eO(){return!this.Zx.Ff&&this.hO}tr(){this.iO=ae.aT,this.hO=!0,this.Jx=!1,this.Xx=!1}gn(){this.Vo(),this.tO&&this.Zx.fn(he.Rw,this.oO),this.Zx.fn(l.jh,this.aO),this.Zx.fn(l.Sh,this.uO),this.Zx.fn(he.H_,this.cO)}constructor(t,i=!1){super(),this.Zx=t,this.tO=i,this.iO=ae.aT,this.hO=!0,this.Jx=!1,this.Xx=!1,this.cO=t=>{const i=this.Zx.Jf;i!==this.iO&&this.Co(new ro(t.currentTime,i)),i===ae.aT&&(this.Jx=!1,this.Xx=!1),this.qx(i),this.Kx(i),this.rO(i),this.maybeDispatchCanPlayThroughEvent(i),this.$x(i),this.sO(i),this.iO=i},this.aO=()=>{this.sO(this.iO),this.$x(this.iO),this.hO=this.Zx.Ff},this.uO=()=>{this.hO=this.Zx.Ff},this.oO=t=>{this.Co(new Zr(t.currentTime))},this.Zx.yn(he.H_,this.cO),this.Zx.yn(l.jh,this.aO),this.Zx.yn(l.Sh,this.uO),this.tO&&this.Zx.yn(he.Rw,this.oO)}},un=class extends xd{get Mf(){return this.Zx.Mf}get If(){return this.Zx.If}get lt(){return this.Zx.lt}get Ff(){return this.Zx.Ff}get Jf(){return this.Zx.Jf}Ud(){this.Vo(),this.Zx.fn(PM,this.Ds)}constructor(t){super(),this.Zx=t,this.Zx.yn(PM,this.Ds)}},Ts=class{lO(){return this.dO}fO(t){this.dO=t}get _O(){return this.NS}get gO(){return!1}get wO(){const t=this.AO.certificate;if(t)return Qs(t)?it(t):He(t)}vO(){return this.AO.licenseAcquisitionURL||this.lO()}get mO(){return!1}pO(t){return Promise.resolve()}yO(t,i){return Promise.resolve(void 0)}get AS(){return Boolean(this.AO.useCredentials)}async MO(t,i,e,s){const n=this.TO(t,i,e,s);if(""===n.zu)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this._O.SI(n);return await t.DO(i)}catch(t){return Ao(t),void await this.IO(t,n.zu,s)}}TO(t,i,e,s){const n=this.SO().WI(),r=this.AS,h={zu:this.EO(),fS:i,lS:n,cS:t,AS:r,dS:Ys.POST,CI:0,Wd:s,Rg:Ou.JI,gS:e};return new zu(h)}bO(t,i){return Promise.resolve(t)}LO(t,i,e,s){return Promise.resolve(t)}SO(){return new vo(this.AO.headers||{})}async IO(t,i,e){throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}EO(t,e){let s=e;const n=this.AO.queryParameters;if(!s){const t=this.vO();if(!t)return"";s=t}if(n||t){const e=i.Dh(s);t&&Vc(e,t),n&&Vc(e,n),s=e.href}return s}kO(t,i){return BM(t)}CO(t){return new j(t)}async xO(t,i,e){const s=await this.kO(t,e),n=await this.MO(s,this.OO,i,e);return this.CO(n)}gn(){}constructor(t,i,e,s,n){this.dO=void 0,this.ZA=t,this.jO=i,this.zO=e,this.NS=s,this.OO=n,this.AO=this.PO(i)}};function BM(t){return Promise.resolve(Dt(t).buffer)}var Wu,Es=class extends Ts{PO(t){return t.widevine||{}}async BO(t,i){return this.wO?this.wO:this.RO(new j(t),i)}RO(t,i){return super.xO(t,jo.eS,i)}constructor(t,i,e,s){super(dm,t,i,e,s)}};!function(t){t.BA="Widevine",t.UO="PlayreadyV2",t.QO="PlayreadyV3",t.PA="PlayreadyV2",t.RA="Fairplay"}(Wu||(Wu={}));var RM={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function UM(t,e){var s,n,r,h;const o=RM[e],a=t.accountName;return{CustomerName:t.customerName,AccountName:a,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(s=i.FO)?void 0:s.Ys,OSVersion:null==(n=i.FO)?void 0:n.YO,DRMProvider:o.DRMProvider,DRMVersion:o.DRMVersion,DRMType:o.DRMType,DeviceVendor:null==(r=i.FO)?void 0:r.GO,DeviceModel:null==(h=i.FO)?void 0:h.VO}}}function QM(t,i){if(!t.accountName)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, accountName is not set.");if(!t.customerName)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, customerName is not set.");if(!t.portalId)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, portalId is not set.");throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration.")}function FM(t,i,e){let s;if(Sg(t))s={AuthToken:t.authToken,Payload:i};else{if(!Eg(t))throw QM(t,e);s={LatensRegistration:UM(t,e),Payload:i}}return Ta(JSON.stringify(s))}async function YM(t,i,e){const s=t.bI;if(!s)throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,i);const n=s;let r,h;try{r=await n.WO(e),h=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){h=""}throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.SI.zu,n.kI,n.HO,h)}var GM=class extends Es{static qO(){return i.Ys.XO?"required":"optional"}IO(t,i,e){return YM(t,i,e)}pO(t){return this.ZO?Nr(this.ZO.Zb,t):(this.ZO=new Rs,Promise.resolve())}async kO(t,i){const e=this.jO;if(!e)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return FM(e,Zs(t),Wu.BA)}CO(t){let i;if(!t.license)throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return i=it(t.license),i}KO(t){return Promise.resolve(new j(t))}async BO(t,i){this.JO();const e=await this.kO(t,i),s=await this.MO(e,Qv.YI,jo.sS,i);return await this.KO(s)}async RO(t,i){const e=await super.RO(t,i);return this.JO(),e}JO(){this.ZO||(this.ZO=new Rs),this.ZO.Wb()}gn(){this.ZO&&this.ZO.qd(),super.gn()}constructor(t,i,e){super(t,i,e,Qv.GI),this.ZO=void 0}},VM=class extends Es{get $O(){if(Fn(this.jO))return this.jO.token}async kO(t,i){const e=await BM(t),s=this.zO,n=dg(new j(e)),r=this.$O;if(!r)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:s})}constructor(t,i,e){super(t,i,e,Qv.YI),this.fO("https://widevine-proxy.drm.technology/proxy")}};function WM(t,i){let e=i||{};return t.ticket&&t.sessionId&&(e=Tt({},e,{SessionId:t.sessionId,Ticket:t.ticket})),Tt({},e,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}var HM=class extends Es{EO(t,i){let e=t;return Ng(this.jO)&&(e=WM(this.jO,e)),super.EO(e,i)}constructor(t,i,e){super(t,i,e,Qv.YI),this.fO("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}},qM="Conax-Custom-Data";function an(t,i,e){const s=t&&Tg(t)&&t;if(s&&!e.has(qM)){const t=dl(s)?s.token:void 0,n=dl(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:i+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});e.set(qM,r)}return e}var XM=class extends Es{SO(){const t=super.SO();return an(this.jO,"Widevine",t)}constructor(t,i,e){super(t,i,e,Qv.YI),this.fO("https://connect.conax.com:8094/license")}};function ZM(t){const i=es(new j(t));return it(JSON.parse(i).license)}function Ue(t){return"string"==typeof t.token?t.token:Ta(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function KM(t,i,e){let s;return s=e.token?"x-dt-auth-token":"dt-custom-data",t.set(s,i),t}var JM=class extends Es{get $O(){return Ue(this.jO)}CO(t){return ZM(t)}SO(){return KM(super.SO(),this.$O,this.jO)}constructor(t,i,e){super(t,i,e,Qv.YI),this.fO("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}},$M=class extends Es{SO(){const t=super.SO(),i=this.jO.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e){super(t,i,e,Qv.YI)}};async function tT(t,i,e,s){if(!bg(t))throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new vo;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const h=t.streamId;let o;o=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:i,licenseType:o,streamId:h},u={zu:t.ticketAcquisitionURL,fS:Qv.GI,lS:n,dS:Ys.POST,cS:JSON.stringify(a),Wd:s},c=await e.SI(u);return await c.WO()}var iT=class extends Es{SO(){const t=super.SO();return t.set("Content-Type","application/json"),t}async kO(t,i){const e=M_(t.buffer),s=this.jO,n=await tT(s,"widevine_modular",this._O,i);this.fO(n.licenseServerUrl);const r=_a(JSON.stringify({payload:e,ticket:n.ticket}));return super.kO(r,i)}CO(t){return it(t.license)}constructor(t,i,e){super(t,i,e,Qv.GI)}},eT=class extends Es{SO(){if(!Nn(this.jO))throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.SO();return t.set("X-AxDRM-Message",this.jO.token),t}constructor(t,i,e){super(t,i,e,Qv.YI)}};function sT(t){const i=new j(2*t.length);for(let e=0;e<t.length;e+=1)i[2*e]=t.charCodeAt(e),i[2*e+1]=0;return i}var Ds=class extends Ts{PO(t){return t.playready||{}}SO(){const t=new vo(this.tj);return t.qI(super.SO()),t}ij(t){return t.length>=1&&t[0].mI.length>0}yO(t){const i=this.jO.playready.customData;if(i){const t=sT(i),e=sT('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+Zs(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{tx:e}})}return super.yO(t)}async kO(t,i){const e=await BM(t);return this.ej(e)}async ej(t){var e,s;let n=null;const r=ng(new DataView(t),new L,!0);let h;try{h=i.gI(r)}catch(t){return n}const o=null==(e=h.dI("PlayReadyKeyMessage")[0])?void 0:e.dI("LicenseAcquisition")[0];var a;const u=null!=(a=null==o?void 0:o.dI("Challenge"))?a:[];this.ij(u)&&(n=Sa(u[0].sj));const c=new vo;var l;const d=null!=(l=null==o||null==(s=o.dI("HttpHeaders")[0])?void 0:s.dI("HttpHeader"))?l:[];for(const t of d){const i=t.dI("name")[0].sj,e=t.dI("value")[0].sj;c.append(i,e)}return this.tj=c,n}BO(t,i){return Promise.resolve(t)}RO(t,i){return super.xO(t,jo.nS,i)}constructor(t,i,e){super(On,t,i,e,Qv.YI),this.tj=void 0}},nT=class t{static nj(t){return"3"===t.version?Wu.QO:Wu.UO}rj(){const t={};if(this.qk===Wu.QO){const i={LatensRegistration:UM(this.hj,Wu.QO)};t["X-TITANIUM-DRM-CDATA"]=Ta(JSON.stringify(i))}return t}get aj(){return this.qk}get HC(){return this.qk===Wu.UO}constructor(i){this.hj=i,this.qk=t.nj(i)}};var rT=class extends Ds{yO(t){const i=this.jO;if(!this.jO)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(Eg(i)){const t={};return t.playready={tx:hT(i,this.uj.aj)},Promise.resolve(t)}return Promise.reject(QM(i,Wu.PA))}SO(){const t=new vo(this.uj.rj());return t.qI(super.SO()),t}async IO(t,e,s){const n=t.bI;if(!n)throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e);let r,h;try{const t=await n.cj(s),e=es(new j(t)),a=i.gI(e);if(a){const t=function(t,i){return function(t,i){const e=t.m.slice(),s=[];for(;e.length>0;){const t=e.shift();i(t)?s.push(t):e.push(...t.m)}return s}(t,(t=>t.lj===i))}(a,"CustomData");var o;if(t.length>0)r=JSON.parse(t[0].sj),h=null==(o=r.DrmErr)?void 0:o.desc}}catch(t){}throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e,n.kI,n.HO,h)}ij(t){if(1!==t.length)throw new Qr(Ui.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,i,e){super(t,i,e),this.uj=new nT(this.jO)}};function hT(t,i){const e=UM(t,i),s=e.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+Ta('<LatensRegistration formatversion="'+s+'"><AccountName>'+e.AccountName+"</AccountName><CustomerName>"+e.CustomerName+"</CustomerName><PortalID>"+e.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+e.DeviceInfo.DeviceType+"</DeviceType><OSType>"+e.DeviceInfo.OSType+"</OSType><OSVersion>"+e.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+e.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+e.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+e.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+e.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+e.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=ag(n,!0);return ag('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+Zs(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}var oT,aT=class extends Ds{get $O(){if(Fn(this.jO))return this.jO.token}ij(t){if(1!==t.length)throw new Qr(Ui.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}EO(t,i){const e=Tt({},t||{},{token:this.$O});return super.EO(e,i)}constructor(t,i,e){super(t,i,e),this.fO("https://playready-license.drm.technology/rightsmanager.asmx")}},uT=class extends Ds{EO(t,i){let e=t;return Ng(this.jO)&&(e=WM(this.jO,e)),super.EO(e,i)}constructor(t,i,e){super(t,i,e),this.fO("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}},cT=class extends Ds{SO(){const t=super.SO();return an(this.jO,"PlayReady",t)}constructor(t,i,e){super(t,i,e),this.fO("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}},lT=class extends Ds{get $O(){return Ue(this.jO)}CO(t){const i=function(t){const i=es(new j(t));return At(i,"<?xml")?0:1}(t);return 1===i?ZM(t):super.CO(new j(t))}SO(){return KM(super.SO(),this.$O,this.jO)}constructor(t,i,e){super(t,i,e),this.fO("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};!function(t){t[t.dj=0]="dj",t[t.WO=1]="WO"}(oT||(oT={}));var Vi,dT=class extends Ds{SO(){const t=super.SO();return this._j&&t.set("Ticket",this._j),t.set("Content-Type","text/xml"),t}async kO(t,i){const e=this.jO,s=await tT(e,"playready",this._O,i);return this.fO(s.licenseServerUrl),this._j=s.ticket,super.kO(t,i)}constructor(t,i,e){super(t,i,e)}},fT=class extends Ds{SO(){if(!Nn(this.jO))throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.SO();return t.set("X-AxDRM-Message",this.jO.token),t}};!function(t){t.GI="application/json",t.gj="application/x-www-form-urlencoded",t.wj="application/octet-stream",t.Ru="text/plain;charset=UTF-8"}(Vi||(Vi={}));var iu=class extends Ts{get mO(){return!0}Aj(){return this.AO.certificateURL||this.vj}mj(t){this.vj=t}kO(t){return Promise.resolve(this.pj(t,this.yj))}pj(t,i){return"spc="+encodeURIComponent(Zs(t))+"&assetId="+encodeURIComponent(i)}get Mj(){return Vi.gj}PO(t){return t.fairplay||{}}Tj(t){const i=t.indexOf("?");if(i>=0)return Promise.resolve(t.substr(i+1));{const i=t.split("skd://").pop();if(i){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(i))return Promise.resolve(i)}const e=t.split("/");return Promise.resolve(e[e.length-1])}}async yO(t){var i;const e=null!=(i=this.Nj)?i:Fa(new j(t)),s=await this.Tj(e);this.yj=s;const n={};return n.fairplay={gx:s},n}SO(){const t=super.SO();return t.set("Content-Type",this.Mj),t}async BO(t,i){return this.wO?this.wO:await this.Dj(i)}RO(t,i){return super.xO(t,jo.tS,i)}Ij(t){const i=this.Aj(),e=this.SO(),s={zu:i,fS:Qv.YI,lS:e,dS:Ys.GET,AS:!1,cS:null,CI:0,Wd:t,Rg:Ou.JI,gS:jo.iS};return new zu(s)}async Dj(t){const i=this.Ij(t),e=await this._O.SI(i),s=await e.cj();return new j(s)}CO(t){let i;if("string"==typeof t){let e=t.trim();"<ckc>"===e.substr(0,5)&&"</ckc>"===e.substr(-6)&&(e=e.slice(5,-6)),i=it(e)}else i=new j(t);return i}EO(t,i){let e=super.EO(t,i);return At(e,"skd:")&&(e=e.substr(4)),e}constructor(t,i,e,s,n){super(t.ZA,i,e,s,n),this.yj="",this.vj=void 0,this.Nj=t.Sj}};function _T(t){return!S(t.getTime())}function Ks(){return Date.now()||(new Date).getTime()}function gT(t){return t/1e3}function Ft(t){return 1e3*t}var Jc=1/6,wT=Ce.fromNumber(vu);function jc(t,i){if(0===i)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(wT))return t.toNumber()/i;const e=t.divide(i),s=t.subtract(e.multiply(i));return e.toNumber()+s.toNumber()/i}var AT=class extends iu{get Mj(){return Vi.wj}Tj(t){let i=t.split("://",1);return"skd"!==i[0].slice(-3).toLowerCase()?Promise.resolve(""):(i=t.split(";",2),i.length>1?Promise.resolve(i[1]):Promise.resolve(super.Tj(t)))}async kO(t){return t}CO(t){return new j(t)}EO(t,i){const e=t||{};return e.p1=Ks(),super.EO(e,i)}constructor(t,i,e,s){super(t,i,e,s,Qv.YI)}},vT=class extends iu{get Mj(){return Vi.GI}get $O(){if(!Fn(this.jO))throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.jO.token}pj(t,i){const e={token:this.$O,contentId:i,payload:Zs(t)};return JSON.stringify(e)}CO(t){return new j(t)}SO(){const t=super.SO();return t.set("x-vudrm-token",this.$O),t}constructor(t,i,e,s){super(t,i,e,s,Qv.YI),this.fO("https://fairplay-license.drm.technology/license"),this.mj("https://fairplay-license.drm.technology/certificate")}},mT="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",pT="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",yT=class extends iu{CO(t){const i=function(t){let i;try{i=JSON.parse(t).ckc}catch(t){throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_INVALID,mT)}if(!i)throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,pT);return i}(es(new DataView(t)));return super.CO(i)}constructor(t,i,e,s){super(t,i,e,s,Qv.YI)}};var MT=class extends iu{get Mj(){return Vi.GI}async kO(t){const i=this.jO;if(!i)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return FM(i,Zs(t),Wu.RA)}CO(t){try{let i;if(Qs(t)){const e=t.trim();i=JSON.parse(e)}else i=t;if(i.license){const t=Sa(i.license);return new j(t)}throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}IO(t,i,e){return YM(t,i,e)}constructor(t,i,e,s){super(t,i,e,s,Qv.GI)}},TT=class extends iu{Aj(){const t=super.Aj();if(!t)return t;const e=i.Dh(t),s=this.jO;return Ng(s)&&Vc(e,{accountId:s.accountId,applicationId:s.applicationId||""}),e.href}Tj(t){return Ng(this.jO)?Promise.resolve(this.jO.contentId):super.Tj(t)}async kO(t){return t}CO(t){return new j(t)}get Mj(){return Vi.wj}EO(t,i){let e=t;return Ng(this.jO)&&(e=function(t,i){return Tt({},WM(t,i),{KeyId:t.keyId})}(this.jO,e)),super.EO(e,i)}constructor(t,i,e,s){super(t,i,e,s,Qv.YI),this.fO("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.mj("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}},NT=class extends iu{SO(){const t=super.SO();return an(this.jO,"FairPlay",t)}async Dj(t){const i={zu:this.Aj(),fS:Qv.YI,lS:{},dS:Ys.GET,AS:!1,cS:null,CI:0,Wd:t,Rg:Ou.JI,gS:jo.iS},e=await this._O.SI(i),s=await e.cj();return new j(s)}async kO(t){return t}Tj(t){const i=t.indexOf("?");if(0===t.indexOf("skd://")){let e;return e=i>=0?t.substring(6,i):t.substring(6),Promise.resolve(function(t){return es(it(t))}(e))}return Promise.resolve("unknown")}CO(t){try{const i=JSON.parse(t);return new j(Sa(i.CkcMessage))}catch(t){throw new g("CFLRW-66")}}constructor(t,i,e,s){if(super(t,i,e,s,Qv.Ru),!Tg(i))throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.fO("https://connect.conax.com:8097/license")}},DT=class extends iu{Tj(t){return At(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new Qr(Ui.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}pj(t,i){return"spc="+Zs(t)+"&assetId="+i}constructor(t,i,e,s){super(t,i,e,s,Qv.Ru),this.fO(wg[vi.RA])}},IT=class extends iu{get $O(){return Ue(this.jO)}pj(t,i){const e="spc="+encodeURIComponent(Zs(t))+"&"+encodeURI(i);return"persistent"===this.AO.licenseType?e+"&offline=true":e}SO(){return KM(super.SO(),this.$O,this.jO)}constructor(t,i,e,s){super(t,i,e,s,Qv.Ru),this.fO("https://lic.drmtoday.com/license-server-fairplay/")}},ST=class extends iu{Tj(t){let e=t;return At(e,"skd:")&&(e="http:"+e.substring(4)),At(e,"http:")||At(e,"https:")?Promise.resolve(i.Dh(e).hostname):Promise.reject(new g("Could not parse ExpressPlay FairPlay content ID."))}async kO(t){return t}CO(t){return new j(t)}get Mj(){return Vi.wj}constructor(t,i,e,s){super(t,i,e,s,Qv.YI)}},ET=class extends iu{SO(){const t=super.SO(),i=this.jO.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e,s){super(t,i,e,s,Qv.Ru)}},bT=class extends iu{async Dj(t){const i=this.Aj(),e=this.SO(),s={zu:i,fS:Qv.GI,lS:e,dS:Ys.POST,Wd:t,Rg:Ou.JI,gS:jo.iS},n=await this._O.SI(s),r=await n.WO();return new j(it(r.certificate))}get Mj(){return Vi.GI}async RO(t,i,e){void 0===e&&(e=Qv.Ru);const s=Zs(t),n=this.jO,r=await tT(n,"fairplay",this._O,i),h=_a(JSON.stringify({spc:s,ticket:r.ticket})),o={zu:this.vO(),fS:Qv.GI,lS:this.SO(),dS:Ys.POST,cS:h,CI:0,Wd:i,Rg:Ou.JI,gS:jo.tS},a=await this._O.SI(o);return it((await a.WO()).licence)}constructor(t,i,e,s){if(super(t,i,e,s,Qv.GI),!bg(i))throw new g("Invalid Xstream DRM configuration")}},LT=class extends iu{pj(t,i){return Zs(t)}CO(t){if(0===t.length)throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.CO(t)}SO(){const t=super.SO();return t.set("Content-Type","text/plain"),t}constructor(t,i,e,s){super(t,i,e,s,Qv.Ru)}},kT=class extends iu{get Mj(){return Vi.GI}pj(t,i){return t}CO(t){return new j(t)}SO(){if(!Nn(this.jO))throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.SO();return t.set("X-AxDRM-Message",this.jO.token),t}constructor(t,i,e,s){super(t,i,e,s,Qv.YI)}},CT=class extends iu{get Mj(){return Vi.Ru}pj(t,i){const e={spc:Zs(t)};return JSON.stringify(e)}Tj(t){const e=i.Dh(t);return this.Ej=t,e.searchParams.has("b")?Promise.resolve(e.searchParams.get("b")):Promise.reject(new Qr(Ui.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}EO(t,i){let e=this.vO();return!e&&this.Ej&&(e=this.Ej),e&&(e=e.replace("skd://","https://")),super.EO(t,i||e)}CO(t){try{let i;if(i=Qs(t)?JSON.parse(t.trim()):t,i.ckc)return it(i.ckc)}catch(t){throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,i,e,s){super(t,i,e,s,Qv.GI),this.Ej=void 0}},xT=class{bj(t){return this.Lj(t)}Cj(t,i){throw new b(i+" must be "+this.xj+". (Received: "+t+")")}constructor(t,i){this.Lj=t,this.xj=i}},Ps=(new xT((function(t){return!0}),"any"),new xT(ed,"a number")),$=new xT(Qs,"a string"),OT=new xT(td,"a boolean"),Ln=(new xT(id,"a date"),new xT(Qo,"undefined")),Cu=new xT($l,"an object"),jT=new xT((function(t){return null===t}),"null");new xT((function(t){return null==t}),"null or undefined");function zT(t,i){throw new b(i+" has an incorrect type")}var PT=class{bj(t){if(!$l(t))return!1;for(const i of w.keys(this.Oj)){if(!this.Oj[i].bj(t[i]))return!1}return!0}Cj(t,i){if(!$l(t))throw new b(i+" must be an object.");for(const e of w.keys(this.Oj)){const s=this.Oj[e];if(!s.bj(t[e]))return s.Cj(t[e],i+"."+String(e))}throw new b}constructor(t){this.Oj=t}};function _t(t){return new PT(t)}function BT(t){return w.keys(t).map((i=>t[i]))}var RT=class{bj(t){return gd(this.jj,t)}Cj(t,i){return zT(0,i)}constructor(t){this.jj=t}};function Qt(t){return new RT(t)}var UT=class{bj(t){return this.zj.some((i=>i.bj(t)))}Cj(t,i){return zT(0,i)}constructor(t){this.zj=t}};function _e(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return new UT(i)}var QT=class{bj(t){return Gt(t)&&t.every((t=>this.Pj.bj(t)))}Cj(t,i){if(!Gt(t))throw new b(i+" must be an array.");for(let e=0;e<t.length;e++){const s=t[e];this.Pj.bj(s)||this.Pj.Cj(s,i+"["+e+"]")}return zT(0,i)}constructor(t){this.Pj=t}};function mi(t){return new QT(t)}var FT=class{bj(t){return $l(t)&&w.keys(t).every((i=>this.Pj.bj(t[i])))}Cj(t,i){if(!$l(t))throw new b(i+" must be an object.");for(const e of w.keys(t))if(!this.Pj.bj(t[e]))return this.Pj.Cj(t[e],i+"."+e);return zT(0,i)}constructor(t){this.Pj=t}};function YT(t){return new FT(t)}var GT=class{bj(t){return this.Pj().bj(t)}Cj(t,i){return this.Pj().Cj(t,i)}constructor(t){this.Pj=Zc(t)}};var VT=_t({responseCode:Ps,isException:OT,description:$,title:$,correlationId:$});async function WT(t,i,e,s,n){const r=function(t,i,e,s){const n={token:i.token,account:i.accountId,form:"json"},r=decodeURIComponent(ba(e,n)),h=new vo({});h.append("Content-Type","application/json");const o=Zs(t),a={getFairplayLicense:{releasePid:i.releasePid,spcMessage:o}};return{zu:r,fS:Qv.Ru,lS:h,dS:Ys.POST,cS:JSON.stringify(a),Wd:s,Rg:Ou.JI,gS:jo.tS}}(t,i,e,n);return await async function(t,i){const e=await i.SI(t),s=await e.WO();if(VT.bj(s))throw new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.zu,s.responseCode);return it(s.getFairplayLicenseResponse.ckcResponse)}(r,s)}var HT=class extends iu{Tj(t){const i=t.replace("FairPlay",this.Bj.releasePid);return super.Tj(i)}async RO(t,i){return await WT(t,this.Bj,this.vO(),this._O,i)}constructor(t,i,e,s){super(t,i,e,s,Qv.YI),this.Bj=i}},qT=class extends Ts{PO(t){return t.clearkey||{}}async MO(t,i,e,s){const n=this.AO;if(this.vO())return super.MO(t,this.OO,e,s);if(n.keys&&n.keys.length){const t={keys:n.keys.map((t=>{let i=t;return i||(i={}),{kty:"oct",kid:i.id,k:i.value}}))};return cg(JSON.stringify(t)).buffer}throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}BO(t,i){return Promise.resolve(new j(0))}async RO(t,i){const e=await super.xO(t,jo.rS,i),s=JSON.parse(Fa(e));if(s.keys)for(const t of s.keys)t.k&&(t.k=A_(t.k)),t.kid&&(t.kid=A_(t.kid));return cg(JSON.stringify(s))}constructor(t,i,e){super(gm,t,i,e,Qv.YI)}},XT=class extends Es{},ZT={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function KT(t,i,e){const s=sN(i),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(i);const r=await Nr(Promise.resolve(n.call(t,s)),e);return lg(r)?He(r):eN(Tt({},ZT,r))}async function JT(t,i,e,s,n){const r=t.onCertificateResponse,h=iN(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);return He(await Nr(Promise.resolve(r.call(t,h)),n))}async function $T(t,i,e,s){const n=await async function(t,i,e,s){const n=null==t?void 0:t.onLicenseRequest,r=O(i,e);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const h=await Nr(Promise.resolve(n.call(t,r)),s);if(lg(h))return He(h).buffer;return Tt({fairplaySkdUrl:void 0},ZT,h)}(t,i,e,s);return n instanceof ArrayBuffer?n:eN(n)}async function tN(t,i,e,s,n,r){const h=O(e,n),o=await async function(t,i,e,s,n){const r=null==t?void 0:t.onLicenseResponse,h=iN(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);0;const o=await Nr(Promise.resolve(r.call(t,h)),n);return He(o)}(t,new j(i),h,s,r);return He(o)}function O(t,i){return Tt({},sN(t),{fairplaySkdUrl:i})}function iN(t,i,e){return{url:e.IS,status:e.kI,statusText:e.HO,headers:e.lS.WI(),body:t,request:i}}function eN(t){return new zu({zu:t.url,dS:t.method,lS:t.headers,cS:t.body,AS:t.useCredentials})}function sN(t){var i;return{url:t.zu,body:null!=(i=nN(t.cS))?i:null,headers:t.lS.WI(),method:t.dS,useCredentials:t.AS}}function nN(t){if(t)return"string"==typeof t?cg(t):t instanceof ArrayBuffer?new j(t):Aa(t)?Kn(t):void 0}var rN=class extends Ds{BO(t,i){return Promise.resolve(t)}async RO(t,i){const e=await this.ej(Dt(t).buffer),s=this.TO(e,Qv.YI,jo.nS,i),n=await $T(this.Rj,s,void 0,i);if(n instanceof ArrayBuffer)return new j(n);if(""===n.zu)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this._O.SI(n),e=await t.cj(i);return await tN(this.Rj,e,s,t,void 0,i)}catch(t){throw Ao(t),new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,i,e,s){super(t,i,e),this.Rj=s}},hN=class extends XT{async BO(t,i){if(this.wO)return this.wO;const e=this.TO(t,Qv.YI,jo.sS,i),s=await KT(this.Rj,e,i);if(s instanceof j)return s;if(""===s.zu)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this._O.SI(s),r=await n.cj(i)}catch(t){throw Ao(t),new Qr(Ui.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const h=O(e,void 0);return await JT(this.Rj,new j(r),h,n,i)}async RO(t,i){const e=this.TO(t,Qv.YI,jo.eS,i),s=await $T(this.Rj,e,void 0,i);if(s instanceof ArrayBuffer)return new j(s);if(""===s.zu)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this._O.SI(s),n=await t.cj(i);return await tN(this.Rj,n,e,t,void 0,i)}catch(t){throw Ao(t),new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,i,e,s){super(t,i,e,Qv.YI),this.Rj=s}},oN=class extends iu{async BO(t,i){if(this.wO)return this.wO;const e=this.Ij(i),s=await KT(this.Rj,e,i);if(Aa(s))return s;try{const t=await this._O.SI(s),n=await t.cj(),r=O(e,void 0);return await JT(this.Rj,new j(n),r,t,i)}catch(t){throw Ao(t),new Qr(Ui.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async RO(t,i){const e=this.TO(t,Qv.YI,jo.tS,i),s=await $T(this.Rj,e,this.Uj,i);if(s instanceof ArrayBuffer)return new j(s);if(""===s.zu)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this._O.SI(s),n=await t.cj(i);return await tN(this.Rj,n,e,t,this.Uj,i)}catch(t){throw Ao(t),new Qr(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}Tj(t){var i;return this.Uj=t,(null==(i=this.Rj)?void 0:i.extractFairplayContentId)?Promise.resolve(this.Rj.extractFairplayContentId(t)):super.Tj(t)}constructor(t,i,e,s,n){super(t,i,e,s,Qv.YI),this.Rj=n}},mt=class{Qj(t,i,e,s){switch(t.ZA.Rg){case vi.BA:return this.Fj(i,e,s);case vi.PA:return this.Yj(i,e,s);case vi.RA:return this.Gj(t,i,e,s);case vi.UA:default:return this.Vj(i,e,s)}}Fj(t,i,e){const s=function(t){return t.integration===Ff&&Qs(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&va._v.ov(s,gt)){const n=va._v.fv(s,gt,t);return new hN(t,i,e,n)}switch(s){case Pf:return new GM(t,i,e);case mn:return new VM(t,i,e);case vn:return new HM(t,i,e);case Lc:return new XM(t,i,e);case Rf:return new JM(t,i,e);case Wc:return new $M(t,i,e);case Uf:return new iT(t,i,e);case bn:return new eT(t,i,e);default:return new XT(t,i,e,Qv.YI)}}Yj(t,i,e){const s=t.integration;if(s&&va._v.ov(s,Gi)){const n=va._v.fv(s,Gi,t);return new rN(t,i,e,n)}switch(s){case Pf:return new rT(t,i,e);case mn:return new aT(t,i,e);case vn:return new uT(t,i,e);case Lc:return new cT(t,i,e);case Rf:return new lT(t,i,e);case Uf:return new dT(t,i,e);case bn:return new fT(t,i,e);default:return new Ds(t,i,e)}}Gj(t,i,e,s){const n=i.integration;if(n&&va._v.ov(n,Ca)){const r=va._v.fv(n,Ca,i);return new oN(t,i,e,s,r)}switch(n){case _l:return new AT(t,i,e,s);case mn:return new vT(t,i,e,s);case wl:return new yT(t,i,e,s);case Pf:return new MT(t,i,e,s);case vn:return new TT(t,i,e,s);case Lc:return new NT(t,i,e,s);case Bf:return new DT(t,i,e,s);case Rf:return new IT(t,i,e,s);case kl:return new ST(t,i,e,s);case Wc:return new ET(t,i,e,s);case Uf:return new bT(t,i,e,s);case Ml:return new LT(t,i,e,s);case bn:return new kT(t,i,e,s);case jl:return new CT(t,i,e,s);case Qf:return new HT(t,i,e,s);default:return new iu(t,i,e,s,Qv.Ru)}}Vj(t,i,e){return new qT(t,i,e)}Wj(t){return t.Rg===vi.PA||t.Rg===vi.BA||t.Rg===vi.RA||t.Rg===vi.UA}HC(t,i){var e;if(t.Rg!==vi.PA)return!1;if(Yt(null==(e=i.playready)?void 0:e.customData))return!0;const s=i.integration;return(!s||!va._v.ov(s,Ca))&&(s===Pf&&new nT(i).HC)}qO(t,i){if(t.Rg!==vi.BA)return;const e=i.integration;return e&&va._v.ov(e,Ca)?void 0:e===Pf?GM.qO():void 0}};var hi,aN="default",uN="theoplayer-stored-network-info-v2",cN=25e5,Yo=class{Hj(t){var e;const s=null==(e=i.qj)?void 0:e.Fb(t);if(void 0===s)return;const n=JSON.parse(s);if(void 0!==n&&void 0!==n[this.Xj]){if(!this.Zj(n))return n[this.Xj].availableBandwidth;var r;null==(r=i.qj)||r.Kj(t,JSON.stringify({}))}}Jj(){const t=this.Hj(uN);if(void 0!==t)return t;const i=this.Hj("theoplayer-stored-network-info");return i?8*i:void 0}Zj(t){const i=t[this.Xj].storedTimestamp;return!!i&&Ks()-i>36e5}$j(t){this.tz=t,this.iz()}ez(){var t;return null!=this.tz||(this.tz=null!=(t=this.Jj())?t:cN),this.tz}constructor(){this.Xj=aN,this.tz=void 0,this.iz=uo((()=>{var t;const e={[this.Xj]:{availableBandwidth:this.tz,storedTimestamp:Ks()}};null==(t=i.qj)||t.Kj(uN,JSON.stringify(e))}),1e4)}};Yo.Ib=new Yo,function(t){t[t.sz=0]="sz",t[t.nz=1]="nz",t[t.rz=2]="rz",t[t.oz=3]="oz",t[t.cz=4]="cz",t[t.CA=5]="CA",t[t.lz=6]="lz",t[t.fz=7]="fz",t[t.zA=8]="zA",t[t._z=9]="_z",t[t.gz=10]="gz"}(hi||(hi={}));var lN=class{get wz(){return 0}get Az(){return 0}vz(t){}},dN=class{mz(t){this.hj=t}qO(t){const i=this.hj;if(void 0!==i)return this.pz.qO(t,i)}HC(t){const i=this.hj;return void 0!==i&&this.pz.HC(t,i)}yz(t){const i={ZA:t.ZA,Mz:t.Mz||[],Tz:t.Tz,Sj:t.Sj},e=this.pz.Qj(i,this.hj||{},t.zO,this.NS);return i.Tz&&e.fO(i.Tz),new fN(e)}constructor(t,i=new mt){this.hj=void 0,this.NS=t,this.pz=i}},fN=class{pO(t){return this.Nz.pO(t)}yO(t,i,e){return this.Nz.yO(i,e)}mO(){return this.Nz.mO||void 0!==this.Nz.wO}BO(t,i){return this.Nz.BO(t,i)}RO(t,i,e){return i&&this.Nz.fO(i),this.Nz.RO(t,e)}Ud(){this.Nz.gn()}constructor(t){this.Nz=t}},gn=class extends Fi{Dz(t){this.Iz.push(t);for(const i of t.og)this.tt(i);this.Sz(t)}Ez(t){To(this.Iz,t),this.bz(t);for(const i of t.og)this.Lz(i)||this.it(i)}Lz(t){for(const i of this.Iz)if(i.dg(t))return!0;return!1}Sz(t){t.yn(yt.L_,this.kz),t.yn(yt.C_,this.Cz)}bz(t){t.fn(yt.L_,this.kz),t.fn(yt.C_,this.Cz)}gn(){for(;this.Iz.length>0;)this.Ez(this.Iz[0]);super.gn()}fa(){return _o(this)}constructor(t){super(),this.Iz=[],this.kz=t=>{this.tt(t.Lt)},this.Cz=t=>{const i=t.Lt;this.Lz(i)||this.it(i)};for(const i of t)this.Dz(i)}};var _N,gN={forceSeekOffset:0,maximumOffset:0,maximumPlaybackRate:0,minimumOffset:0,minimumPlaybackRate:0,targetOffset:0},ni=class{get va(){return null!=this.Xa||(this.Xa=function(t){return{get enabled(){return t.Rt},set enabled(i){t.Rt=ln(i)},get monitoringLivePlayback(){return t.xz},get currentLatency(){return t.cA},get currentConfiguration(){return function(t){if(void 0!==t)return{get minimumOffset(){return t.minimumOffset},get maximumOffset(){return t.maximumOffset},get targetOffset(){return t.targetOffset},get forceSeekOffset(){return t.forceSeekOffset},get minimumPlaybackRate(){return t.minimumPlaybackRate},get maximumPlaybackRate(){return t.maximumPlaybackRate}}}(t.wd)}}}(this)),this.Xa}get Rt(){var t,i;return null!=(i=this.Le)?i:Boolean(null==(t=this.Oz)?void 0:t.Rt)}set Rt(t){this.Le=t,this.Oz&&(this.Oz.Rt=t)}get xz(){var t,i;return null!=(i=null==(t=this.Oz)?void 0:t.Ww)&&i}get cA(){var t;return null==(t=this.Oz)?void 0:t.uA}get wd(){return this.Oz?this.Oz.Hw:gN}ka(t){this.Oz=t,void 0!==this.Le&&(this.Oz.Rt=this.Le)}tr(){this.Oz=void 0,this.Le=!1}};function wN(){return _N||(_N=_s&&_s.document&&_s.document.createElement("video")),_N}var AN=!(!_s||!_s.TextTrack),vN=class extends Mo{get cA(){}get jz(){const t=this.sA.wf,i=this.Mf;return t.gr(i,.01)}get ht(){return this.dT}get wf(){return this.sA.wf.ks()}get vf(){return this.sA.vf}set vf(t){t&&this.sA.zz(t)}get bt(){return this.bc}get Mf(){return void 0!==this.Pz?this.Pz:this.sA.Mf}set Mf(t){this.xf&&(this.Pz=t),this.sA.Sm(t)}get ct(){return this.sA.ct}get If(){return this.sA.If}get lt(){return this.Bz}get bf(){return this.Rz}get kf(){}get xf(){return this.sA.xf}get jf(){return Tt({},{wT:0,AT:0,vT:0,mT:0,pT:0,yT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.sA.zf())}get Pf(){return this.sA.Pf}set Pf(t){this.sA.Pf=t}get Uf(){return!0}get Ff(){return this.sA.Ff}get Gf(){return this.sA.Gf}set Gf(t){this.sA.Gf=t}get Hf(){return this.sA.Uz.played}get Xf(){return this.Qz}set Xf(t){this.Qz=t,this.Fz&&(this.Fz.Xf=t)}get Jf(){return this.sA.Jf}get t_(){return this.sA.t_.ks()}get e_(){return this.sA.e_}get Yz(){return this.sA.Yz}get nt(){return this.Dl}get rt(){return this._T}get r_(){return this.sA.r_}get a_(){return this.sA.a_}get c_(){return this.sA.c_}set c_(t){this.sA.c_=t}get f_(){return this.Gz}get g_(){return this.sA.g_}set g_(t){this.sA.g_=t}get Vz(){return this.Wz}be(){this.sA.be()}ge(){this.sA.ge()}async ga(t,i,e){Bo(e),this.bc=t;const s={Rg:ai.Wx,Ug:t.src,qz:t.type,Xz:this.Zz(t),Xf:this.Qz,Kz:t.crossOrigin,Jz:i.metadata&&i.metadata.title};this.$z.mz(t.contentProtection),this.Fz=await this.sA.$n(s),Bo(e),i.textTracks&&this.tP(i.textTracks),Se(this.nt)}tP(t){for(let e of t)if(this.sA.iP()&&fi.Ga&&AN&&!jv(e.kind,e.label)&&this.eP(e)){var i;const t=null!=(i=e.kind)?i:Mi.Mm;this.sA.sP(e.src,t,e.label,e.srclang,e.default)}else{if(void 0===e.src)continue;this.nP.pS(e)}}eP(t){return!t.format||"webvtt"===t.format}async p_(){try{await this.sA.p_()}catch(t){}for(;!this.jz;)await this.sA.lf(l.gw)}m_(){this.sA.m_()}M_(){return void 0!==this.sA.Uz.webkitShowPlaybackTargetPicker}T_(){this.sA.Uz.webkitShowPlaybackTargetPicker&&this.sA.Uz.webkitShowPlaybackTargetPicker()}N_(){this.sA.Uz.webkitShowPlaybackTargetPicker&&this.sA.Uz.webkitShowPlaybackTargetPicker()}A_(){return this.sA.Uz}w_(){return this.sA.ya}async tr(){this.bc=void 0,this.Bz=void 0,this.Rz=void 0,this.Fz=void 0,await this.nP.tr(),this.sA.rP(),await this.sA.tr(),this.hP.tr(),this.Xf=this.Qz,this.ht.tr(),this.rt.tr(),this.Pz=void 0}async gn(){await this.tr(),this.Vo(),this.oP(),this.aP(),this.hP.gn(),this.sA.uP=void 0,await this.lP.cP(this.sA),this.dT.gn(),this._T.gn(),this.Dl.gn(),await this.nP.gn()}dP(){this.sA.yn(l.jh,this.Ds),this.sA.yn(l.Sh,this.Ds),this.sA.yn(l.Sw,this.wc),this.sA.yn(l.gw,this.Ds),this.sA.yn(l.cw,this.Ds),this.sA.yn(l.yw,this.Ds),this.sA.yn(l.pw,this.fP),this.sA.yn(l.Jg,this.Ds),this.sA.yn(l.ww,this.Ds),this.sA.yn(l.Ew,this.Ds),this.sA.yn(l.Xg,this.Ds),this.sA.yn(l.mw,this._P),this.sA.yn(he.Rw,this.dA),this.sA.yn(ut.ha,this.gP),this.sA.yn(l.Wg,this.Ds),this.sA.yn(l.Vg,this.wP),this.sA.Uz.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.AP)}oP(){this.sA.fn(l.jh,this.Ds),this.sA.fn(l.Sh,this.Ds),this.sA.fn(l.Sw,this.wc),this.sA.fn(l.gw,this.Ds),this.sA.fn(l.cw,this.Ds),this.sA.fn(l.yw,this.Ds),this.sA.fn(l.pw,this.fP),this.sA.fn(l.Jg,this.Ds),this.sA.fn(l.ww,this.Ds),this.sA.fn(l.Ew,this.Ds),this.sA.fn(l.Xg,this.Ds),this.sA.fn(l.mw,this._P),this.sA.fn(he.Rw,this.dA),this.sA.fn(ut.ha,this.gP),this.sA.fn(l.Wg,this.Ds),this.sA.fn(l.Vg,this.wP),this.sA.Uz.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.AP)}Zz(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{ZA:fm,vP:[{initDataTypes:[fm.Eb],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}mP(){let t=this.sA.Uz.audioTracks,i=this.sA.Uz.videoTracks;t&&(t.addEventListener("addtrack",this.pP),t.addEventListener("removetrack",this.yP),t.addEventListener("change",this.MP)),i&&(i.addEventListener("addtrack",this.TP),i.addEventListener("removetrack",this.NP),i.addEventListener("change",this.DP))}aP(){let t=this.sA.Uz.audioTracks,i=this.sA.Uz.videoTracks;t&&(t.removeEventListener("addtrack",this.pP),t.removeEventListener("removetrack",this.yP),t.removeEventListener("change",this.MP)),i&&(i.removeEventListener("addtrack",this.TP),i.removeEventListener("removetrack",this.NP),i.removeEventListener("change",this.DP))}nh(t){for(let i=0;i<t.U;i++){t.cg(i).PT()}}D_(){this.sA.D_()}I_(){}IP(t,i){this.Bz||(this.Bz=i,this.Rz=t,this.Co(new Dr(t)))}constructor(t,i,e,s,n,r,h=new mt,o=zM()){super(),this.Fz=void 0,this.bc=void 0,this.Bz=void 0,this.Rz=void 0,this.Wz=new lN,this.Gz=new ni,this.gP=t=>{const i=t.lt,e=i.code,s=new $i(Mw(e),"Something went wrong during native playback.",i),n=new Ac(e,s.message,i.message);this.IP(s,n)},this.wc=()=>{this.Co(new Pc(this.Mf,this.vf))},this.fP=t=>{this.Ff||(this.Pz=void 0),this.Co(t)},this.dA=t=>{this.Pz=void 0},this.AP=()=>{this.Co(new jw(this.xf))},this._P=()=>{this.a_>0&&this.r_>0&&this.Co(new lm)},this.pP=t=>{this.dT.tt(new Cw(t.track))},this.yP=t=>{const i=yN(this.dT,t.track);i&&this.dT.it(i)},this.MP=()=>{this.nh(this.dT)},this.TP=t=>{this._T.tt(new Ow(t.track))},this.NP=t=>{const i=yN(this._T,t.track);i&&this._T.it(i)},this.DP=()=>{this.nh(this._T)},this.wP=t=>{this.Co(t),this.IP(t.errorObject,Ki(t.errorObject))},this.lP=i,this.NS=e,this.YC=o,this.sA=this.lP.SP(Vt.pm),this.Qz=this.sA.Uz.preload,this.hP=new lu(this.sA,!0),this.hP.yn(fn,this.Ds),this.$z=new dN(e,h),this.sA.uP=this.$z,this.dP(),this.dT=new Ae,this._T=new Ae,this.mP(),this.nP=new Wv(this.sA,this.NS),this.Dl=new gn([this.sA.nt]),this.ge()}};function mN(t){return!t.type||!(!wN().canPlayType||!wN().canPlayType(t.type))}var pN=class{JA(t,i,e,s,n,r,h){return new vN(t,i,e,s,n,r)}EP(t,i){return mN(t)}bP(){return!1}constructor(){this.LP=hi.gz}};function yN(t,i){for(let e of t.og)if(e.jT===i)return e}var Jn=class{static kP(){return this.Ib}CP(t){this.xP.push(t)}get LP(){return this.OP.LP}JA(t,i,e,s,n,r,h){let o=this.OP.JA(t,i,e,s,n,r,h);for(const t of this.xP)o=t(o,e,s);return o}EP(t,i){return this.OP.EP(t,i)}bP(){return!1}constructor(){this.OP=new pN,this.xP=[]}};function MN(t,i){return ra(t.LP,i.LP)}Jn.Ib=new Jn;var TN=class{jP(t){this.zP.push(t),this.zP.sort(MN)}async PP(t,i){for(const e of this.zP){const s=e.EP(t,i);if(Ka(s)?await s:Boolean(s))return e}}constructor(){this.zP=[]}};function Uu(t){Ye.Ib.jP(t)}var Ye=class extends TN{BP(t){this.RP=t}UP(){return this.RP}async QP(t,i){for(let e of t){let t=await this.PP(e,i);if(t)return{yc:e,t:t}}const e=this.RP;for(let s of t)if(e.EP(s,i))return{yc:s,t:e};return{yc:t[0],t:e}}constructor(...t){super(...t),this.RP=Jn.kP()}};Ye.Ib=new Ye;var wo,NN=class{gn(){fh(this.Us)}constructor(t){this.Us=_s&&_s.document&&_s.document.createElement("div"),ia(this.Us),t.appendChild(this.Us)}};!function(t){t.gz="",t.FP="none",t.Nm="metadata",t.iT="auto"}(wo||(wo={}));var DN=[ut.ha,l.Zg,l.Kg,l.xw,l.Qg,l.$g,l.ew,l.fw,l._w,l.Tw,l.Dw,he.Ow,he.jw,he.zw,he.Pw,he.H_,he.Bw,he.Rw,l.Vg,l.Wg,l.Xg,l.Jg,l.cw,l.lw,l.jh,l.gw,l.Sh,l.ww,l.mw,l.yw,l.pw,l.Sw,l.Ew,l.Aw,l.dw,l.Mw],IN=class extends Mo{get ht(){return this.dT}get wf(){return this.Qo.wf}get lt(){return this.Qo.lt}get bf(){return this.Qo.bf}get vf(){return this.Qo.vf}set vf(t){this.Qo.vf=t}get bt(){return this.YP}get Mf(){return this.Qo.Mf}set Mf(t){this.Qo.Mf=t}get ct(){return this.Qo.ct}get If(){return this.Qo.If}get kf(){return this.fT}get xf(){return this.Qo.xf}get jf(){return this.Qo.jf}get Pf(){return this.Qo.Pf}set Pf(t){this.Qo.Pf=t}get Uf(){return this.Qo.Uf}get Ff(){return this.Qo.Ff}get Gf(){return this.Qo.Gf}set Gf(t){this.Qo.Gf=t}get Hf(){return this.Qo.Hf}get Xf(){return this.Qz}set Xf(t){this.Qz=t,this.Qo&&(this.Qo.Xf=this.Qz)}get Jf(){return this.Qo.Jf}get t_(){return this.Qo.t_}get e_(){return this.Qo.e_}get nt(){return this.Dl}get r_(){return this.Qo.r_}get rt(){return this._T}get a_(){return this.Qo.a_}get c_(){return this.Qo.c_}set c_(t){this.Qo.c_=t}get f_(){return this.Qo.f_}get Vz(){return this.Qo.Vz}m_(){this.Qo.m_()}p_(){const t=this.Qo.p_();Ka(t)&&D(t)}y_(){return this.ga(void 0)}v_(){}GP(){this.dT.fg=this.Qo.ht,this._T.fg=this.Qo.rt,this.Dl.fg=this.Qo.nt,this.fT.fg=this.Qo.kf,this.Qo.yn(DN,this.Ds)}VP(){this.Qo.fn(DN,this.Ds),this.dT.fg=void 0,this._T.fg=void 0,this.Dl.fg=void 0,this.fT.fg=void 0}Wa(){return this.WP}async ga(t,i){if(Bo(i),this.WP=t,!t)return;const e=t.sources.filter(ow);if(ew(e))return;const s=await this.HP.QP(e,t);Bo(i);const n=s.yc,r=s.t,h=this.w_(),o=_w(this);(this.qP!==r||this.lt)&&(this.VP(),await this.Qo.gn(),Bo(i),this.qP=r,this.Qo=this.XP(r,n),function(t,i){t.Pf!==i.Pf&&(t.Pf=i.Pf);t.c_!==i.c_&&(t.c_=i.c_);t.Gf!==i.Gf&&(t.Gf=i.Gf)}(this.Qo,o),yu(this,o,this),this.GP()),this.Qo.Xf=this.Xf,this.ZP?this.Qo.ge():this.Qo.be(),await this.Qo.ga(n,t,i),Bo(i),this.KP(n),this.w_()!==h&&this.Co(new ww)}KP(t){this.YP!==t&&(this.YP=t,this.Co(new St(t)))}M_(){return this.Qo.M_()}T_(){this.Qo.T_()}N_(){this.Qo.N_()}w_(){return this.Qo.w_()}D_(){this.Qo.D_()}I_(){this.Qo.I_()}async tr(){this.WP=void 0,this.KP(void 0),await this.Qo.tr()}async gn(){this.Vo(),await this.tr(),await this.Qo.gn(),this.dT.gn(),this._T.gn(),this.Dl.gn(),this.fT.gn()}ge(){this.ZP=!0,this.Qo.ge()}be(){this.ZP=!1,this.Qo.be()}constructor(t,i){super(),this.qP=void 0,this.YP=void 0,this.Qz=wo.FP,this.WP=void 0,this.ZP=!0,this.dT=new Ms,this._T=new Ms,this.Dl=new yc,this.fT=new ga,this.HP=t,this.Qo=i,this.Qo.Xf=this.Xf,this.GP()}};function sr(t,i,e){return e?t<=i:t<i}var ri,Ai=class t{get JP(){return this.$P.slice()}Cn(t){return this.$P[2*t]}jn(t){return this.$P[2*t+1]}tB(t){return this.iB[2*t]}eB(t){return this.iB[2*t+1]}ks(){const t=this;return{get length(){return t.U},start(i){const e=0|i;return t.sB(e),t.Cn(e)},end(i){const e=0|i;return t.sB(e),t.jn(e)}}}nB(){const i=new Array(2*this.U),e=new Array(2*this.U);for(let t=0;t<this.U;t++)i[2*t]=this.Cn(t),i[2*t+1]=this.jn(t),e[2*t]=!0,e[2*t+1]=!0;return new t(i,e)}sB(t){if(t<0)throw new g("The index provided ("+t+") must be non-negative");if(t>=this.U)throw new g("The index provided ("+t+") is greater than the maximum bound ("+this.U+")")}rB(t){if(0===this.U)return 0;if(this.gr(t))return t;if(t<=this.Cn(0))return this.Cn(0);if(t>=this.jn(this.U-1))return this.jn(this.U-1);{let i=0,e=1/0;for(let s=0;s<this.U;s++){const n=this.Cn(s),r=_.abs(n-t);r<e&&(i=n,e=r);const h=this.jn(s),o=_.abs(h-t);o<e&&(i=h,e=o)}return i}}Sn(i){let e=0,s=0;const n=[],r=[];for(;e<this.U&&s<i.U;){const t=this.Cn(e),h=this.jn(e),o=this.tB(e),a=this.eB(e),u=i.Cn(s),c=i.jn(s),l=i.tB(s),d=i.eB(s),f=_.max(t,u),g=_.min(h,c);let w,A;w=t===u?o&&l:f===t?o:l,A=h===c?a&&d:g===h?a:d,(f<g||w&&A&&f===g)&&(n.push(f,g),r.push(w,A)),h===c?(e+=1,s+=1):h<c?e+=1:s+=1}return new t(n,r)}hB(){const i=this.oB(),e=i.U;if(0===e)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=i.Cn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!i.tB(0)));for(let t=0;t<e-1;t++)s.push(i.jn(t),i.Cn(t+1)),n.push(!i.eB(t),!i.tB(t+1));const h=i.jn(e-1);return h!==1/0&&(s.push(h,1/0),n.push(!i.eB(e-1),!1)),new t(s,n)}aB(i){let e=0,s=0;const n=this.U,r=i.U,h=new Array(2*(n+r)),o=new Array(2*(n+r));let a=0;for(;e<n&&s<r;){const t=this.Cn(e),n=this.jn(e),r=i.Cn(s),u=i.jn(s);t<r||t===r&&n<u?(h[a]=t,h[a+1]=n,o[a]=this.tB(e),o[a+1]=this.eB(e),e++):(h[a]=r,h[a+1]=u,o[a]=i.tB(s),o[a+1]=i.eB(s),s++),a+=2}for(;e<n;)h[a]=this.Cn(e),h[a+1]=this.jn(e),o[a]=this.tB(e),o[a+1]=this.eB(e),e++,a+=2;for(;s<r;)h[a]=i.Cn(s),h[a+1]=i.jn(s),o[a]=i.tB(s),o[a+1]=i.eB(s),s++,a+=2;return new t(h,o)}uB(i){void 0===i&&(i=0);const e=this.U;if(e<2)return this;const s=[],n=[];let r=this.Cn(0),h=this.jn(0),o=this.tB(0),a=this.eB(0);for(let t=1;t<e;t++){const e=this.Cn(t),u=this.jn(t);let c=this.tB(t),l=this.eB(t);r<e&&h>u||(r===e&&(c=o||c,o=c),h===u&&(l=a||l,a=l),sr(e,h+i,a||c)?(h=u,a=l):(s.push(r,h),n.push(o,a),r=e,h=u,o=c,a=l))}return s.push(r,h),n.push(o,a),new t(s,n).oB()}oB(){const i=[],e=[];for(let t=0;t<this.U;t++){const s=this.Cn(t),n=this.jn(t),r=this.tB(t),h=this.eB(t);s===n?(r||h)&&(i.push(s,n),e.push(!0,!0)):(i.push(s,n),e.push(r,h))}return new t(i,e)}cB(t){if(0===this.U)return t;if(0===t.U)return this;return this.aB(t).uB()}lB(t){const i=this.oB(),e=t.oB(),s=i.hB(),n=e.hB(),r=s.Sn(e),h=n.Sn(i);return r.cB(h)}Im(i){if(0===this.U||0===i)return this;const e=[],s=[];for(let t=0;t<this.U;t++){const n=this.Cn(t)+i,r=this.jn(t)+i;e.push(n,r),s.push(this.tB(t),this.eB(t))}return new t(e,s)}dB(t){return 0===this.U||0===t.U?this:this.oB().Sn(t.oB().hB())}gr(t,i){return this.fB(t,i)>=0}_B(t,i,e,s,n){return this.gB(t,i,e,s,n)>=0}wB(t,i,e,s,n){return this.AB(t,i,e,s,n)>=0}vB(t){if(t.U!==this.U)return!1;for(let i=0;i<this.U;i++)if(this.Cn(i)!==t.Cn(i)||this.jn(i)!==t.jn(i)||this.tB(i)!==t.tB(i)||this.eB(i)!==t.eB(i))return!1;return!0}mB(i){const e=[],s=[];for(let t=0;t<this.U;t++){const n=this.Cn(t),r=this.jn(t),h=this.tB(t),o=this.eB(t);i(n,r,h,o)&&(e.push(n,r),s.push(h,o))}return new t(e,s)}AB(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,h=i+n;for(let t=0;t<this.U;t+=1)if(sr(this.Cn(t),h,!s||this.tB(t))&&sr(r,this.jn(t),!e||this.eB(t)))return t;return-1}gB(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,h=i-n;for(let t=0;t<this.U;t+=1)if(sr(this.Cn(t),r,!e||this.tB(t))&&sr(h,this.jn(t),!s||this.eB(t)))return t;return-1}fB(t,i){return this.gB(t,t,!0,!0,i)}pB(t,i){void 0===i&&(i=0);const e=t+i;for(let t=this.U-1;t>=0;t-=1)if(sr(this.Cn(t),e,this.tB(t)))return t;return-1}yB(t,i){void 0===i&&(i=0);const e=t-i;for(let t=0;t<this.U;t+=1)if(sr(e,this.jn(t),this.eB(t)))return t;return-1}MB(t,i){void 0===i&&(i=0);const e=t+i;for(let t=0;t<this.U;t+=1)if(this.Cn(t)>e)return t;return-1}TB(i){return this.sB(i),new t([this.Cn(i),this.jn(i)],[this.tB(i),this.eB(i)])}lA(t,i){const e=this.fB(t,i);return e<0?void 0:this.TB(e)}get NB(){let t=0;for(let i=0;i<this.U;i++){t+=this.jn(i)-this.Cn(i)}return t}static xn(i){const e=[];for(let t=0;t<i.length;t++)e.push(i.start(t),i.end(t));return new t(e)}static DB(i){return new t([i,i],[!0,!0])}static IB(i,e){return i<=e?new t([i,e]):t.SB()}static SB(){return SN}constructor(t,i){this.U=t.length>>1,this.$P=t,this.iB=i||function(t){const i=new Array(2*t);for(let e=0,s=0;e<t;e+=1,s+=2)i[s]=!0,i[s+1]=!1;return i}(this.U)}},SN=new Ai([]);!function(t){t.ra="fullscreenchange",t.ca="fullscreensupportchange",t.ha="fullscreenerror"}(ri||(ri={}));var EN=class extends wn{constructor(){super(ri.ha)}},Mu=(ri.ra,ri.ca,ri.ha,class extends xd{get cs(){return!1}get ta(){return!1}mo(){this.Co(new EN)}So(){}gn(){this.Vo()}}),bN=class extends xd{get vf(){}set vf(t){}get bt(){}get Mf(){return this.EB}set Mf(t){this.EB!==t&&(this.EB=t,this.bB=!0,this.Co(new Eh(this.Mf)))}get jf(){return{wT:0,AT:0,vT:0,mT:0,pT:0,yT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get Pf(){return this.LB}set Pf(t){this.LB!==t&&(this.LB=t,this.Co(new Je(this.Mf,this.c_)))}get Ff(){return this.kB}get Gf(){return this.CB}set Gf(t){this.CB!==t&&(this.CB=t,this.Co(new ls(this.Mf,this.Gf)))}get e_(){return this.bB}get c_(){return this.ck}set c_(t){this.ck!==t&&(this.ck=t,this.Co(new Je(this.Mf,this.c_)))}get g_(){return!1}set g_(t){}get Vz(){return this.Wz}get cA(){}ge(){}be(){}p_(){this.kB&&(this.kB=!1,this.Co(new sh(this.Mf)),this.Co(new lc(this.Mf)))}m_(){this.kB||(this.kB=!0,this.Co(new Pc(this.Mf,this.vf)),this.Co(new ge(this.Mf)))}ga(t,i){return Promise.resolve()}M_(){return!1}T_(){}N_(){}w_(){return this.xB}D_(){}I_(){}async tr(){this.EB=0,this.bB=!1,this.m_(),this.Co(new uw(this.EB))}async gn(){this.Vo(),this.ht.gn(),this.nt.gn(),this.rt.gn()}constructor(...t){super(...t),this.EB=0,this.LB=!1,this.kB=!0,this.CB=1,this.bB=!1,this.ck=1,this.ht=new Ae,this.wf=Ai.SB().ks(),this.ct=NaN,this.If=!1,this.lt=void 0,this.bf=void 0,this.kf=void 0,this.xf=!1,this.Uf=!0,this.Hf=Ai.SB().ks(),this.Xf=wo.FP,this.Jf=ae.aT,this.t_=Ai.SB().ks(),this.Yz=void 0,this.nt=new _i,this.r_=0,this.rt=new Ae,this.a_=0,this.f_=new ni,this.Wz=new lN,this.xB=new Mu}},LN=class extends bN{set OB(t){this.lP=t,this.sA=t.SP(Vt.pm)}A_(){var t;return null==(t=this.sA)?void 0:t.Uz}async gn(){await super.gn(),this.sA&&(await this.lP.cP(this.sA),this.sA=void 0)}constructor(...t){super(...t),this.lP=void 0,this.sA=void 0}},tt=class extends IN{get we(){return this.pu}get g_(){return this.Qo.g_}set g_(t){this.Qo.g_=t}v_(){super.v_(),this.zB.jB()}ur(t){gw(this,t)}ar(){}S_(t){return!1}async ga(t,i){const e=this.w_(),s=this.A_();await super.ga(t,i),this.w_()!==e&&this.Co(new ww),this.A_()!==s&&this.Co(new Xt)}XP(t,i){return t.JA(this.pu,this.zB,this.NS,this.lx,this.PB,this.BB,this.RB,i)}A_(){return this.Qo.A_()}gf(){return this.zB.UB.map((t=>t.Uz))}async gn(){await super.gn(),this.zB.gn(),this.QB.gn()}constructor(t,i,e,s,n,r,h){const o=new LN;super(Ye.Ib,o),this.pu=t,this.lx=i,this.NS=e,this.PB=s,this.BB=n,this.RB=h,this.zB=new om(r,this.RB),this.zB.FB(this.pu),o.OB=this.zB,this.QB=new NN(this.pu)}},kN=class extends Mo{get ht(){return this.YB}get wf(){return Ai.SB().ks()}get vf(){return new Date(NaN)}set vf(t){}get bt(){}get Mf(){return 0}set Mf(t){}get ct(){return 0}get we(){return this.pu}get If(){return!0}get lt(){return this.GB}get bf(){return this.VB}get kf(){}get jf(){return{wT:0,AT:0,vT:0,mT:0,pT:0,yT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get Pf(){return!1}set Pf(t){}get Uf(){return!0}get Ff(){return!0}get Gf(){return 0}set Gf(t){}get Hf(){return Ai.SB().ks()}get Xf(){return wo.FP}set Xf(t){}get Jf(){return ae.aT}get t_(){return Ai.SB().ks()}get e_(){return!1}get nt(){return this.WB}get r_(){return 0}get rt(){return this.YB}get a_(){return 0}get c_(){return 1}set c_(t){}get f_(){return this.Gz}get g_(){return!1}set g_(t){}S_(t){return!0}be(){}p_(){throw this.Co(new Dr(this.VB)),this.GB}m_(){}Wa(){}async ga(t,i){throw Bo(i),this.Co(new Dr(this.VB)),this.GB}ge(){}y_(){return Promise.resolve()}A_(){}w_(){return this.xB}gf(){return[]}v_(){}ur(t){}ar(){}get xf(){return!1}M_(){return!1}T_(){}N_(){}D_(){}I_(){}tr(){return Promise.resolve()}gn(){return this.Vo(),this.YB.gn(),this.WB.gn(),Promise.resolve()}constructor(t,i,e){super(),this.xB=new Mu,this.Gz=new ni,this.pu=t,this.GB=i,this.YB=new Ae,this.WB=new _i,this.VB=e}};function CN(t){if(t&&$l(t))return Tt({},t,{integration:xN(t.integration),fairplay:RN(t.fairplay),widevine:ON(t.widevine),playready:jN(t.playready),clearkey:UN(t.clearkey),aes128:QN(t.aes128),integrationParameters:FN(t.integrationParameters),preferredKeySystems:YN(t.preferredKeySystems)})}function xN(t){if(Qs(t))return t}function ON(t){if(t&&$l(t))return{persistentState:zN(t.persistentState),distinctiveIdentifier:zN(t.distinctiveIdentifier),audioRobustness:PN(t.audioRobustness),videoRobustness:PN(t.videoRobustness),licenseAcquisitionURL:Qs(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:BN(t.licenseType),headers:t.headers,useCredentials:!!td(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:Qs(t.certificate)||lg(t.certificate)?t.certificate:void 0}}function jN(t){if(!t)return;const i=ON(t);if(!i)return;return Tt({},i,{customData:Qs(t.customData)?t.customData:void 0})}function zN(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function PN(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function BN(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function RN(t){if(!t)return;const i=ON(t);if(!i)return;return Tt({},i,{certificateURL:Qs(t.certificateURL)?t.certificateURL:void 0})}function UN(t){if(!t)return;const i=ON(t);if(!i)return;const e=Gt(t.keys)?t.keys.map((t=>function(t){if(!t||!$l(t))return;const i=t.id,e=t.value;if(!Qs(i)||!Qs(e))return;return{id:i,value:e}}(t))).filter(Yt):void 0;return Tt({},i,{keys:e})}function QN(t){if($l(t))return{useCredentials:td(t.useCredentials)?t.useCredentials:void 0}}function FN(t){if($l(t))return t}function YN(t){return t&&Gt(t)?t.map((t=>Gc(t))).filter(Yt):[gt,Gi,Ca]}var GN=class extends wn{constructor(t){super("presentationmodechange"),this.presentationMode=t}};function ti(t,i,e){return new Promise(((s,n)=>{if(e&&e.zd)return n(new pe);const r=t=>{o(),s(t)},h=()=>{o(),n(new pe)},o=()=>{t.removeEventListener(i,r),e&&e.Yd(h)};t.addEventListener(i,r),e&&e.Fd(h)}))}var Tu,VN=class extends xd{Qa(t){for(const i of this.HB)t.yn(i,this.qB);this.XB.push(t)}ZB(t){for(const i of this.HB)t.fn(i,this.qB);this.XB.push(t)}gn(){this.Vo();for(const t of this.XB)this.ZB(t);No(this.XB)}constructor(t,i=!1,e){super(e),this.XB=[],this.KB=t=>{Hu((()=>{this.Ds(t)}))},this.HB=t,this.qB=i?this.KB:this.Ds}},Io=class extends Mo{Qa(t){t.sf(this.JB),this.XB.push(t)}ZB(t){t.cf(this.JB),To(this.XB,t)}gn(){this.Vo();for(const t of this.XB)t.cf(this.JB);No(this.XB)}constructor(t,i=!1){super(t),this.XB=[],this.KB=t=>{Hu((()=>{this.Ds(t)}))},this.JB=i?this.KB:this.Ds}};!function(t){t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture"}(Tu||(Tu={}));var Fr,WN=class extends Mo{get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return function(t){let i,e={get currentMode(){return t.qo()},requestMode(i){const e=qN(i);e&&t.Zo(e)},supportsMode(i){const e=qN(i);return!!e&&t.Go(e)},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Io(e,!0),i.Qa(t),e}(this)}Zo(t){this.Xo(t,t)}Xo(t,i){this.$B!==i&&(this.tR=!0,this.iR=t,this.Jo(i,this.$B),"fullscreen"!==t&&(this.eR=t),this.tR=!1,this.Yr())}qo(){return this.sR?"fullscreen":"inline"}Go(t){switch(t){case"fullscreen":return this.xB.ta;case"inline":return!0}return!1}Yr(){if(this.tR)return;const t=this.$B,i=this.qo();this.$B=i,"fullscreen"!==i&&(this.nR=i),t!==i&&this.Co(new GN(i))}Jo(t,i){const e="fullscreen"===t;this.sR=e,e!==this.xB.cs&&(e?this.xB.mo():this.xB.So())}wi(){if(this.tR)return;const t=this.xB.cs;this.sR=t,t?this.Xo("fullscreen","fullscreen"):t||"fullscreen"!==this.iR?this.Yr():this.Xo(this.eR,this.nR)}rR(){this.wi(),this.Co(new Dr(new $i(Ui.FULLSCREEN_ERROR,"Failed to enter fullscreen.")))}gn(){this.xB.gn(),this.Vo()}constructor(t){super(),this.iR="inline",this.$B="inline",this.tR=!1,this.sR=!1,this.eR="inline",this.nR="inline",this.Xa=void 0,this.hR=()=>this.wi(),this.oR=()=>this.rR(),this.xB=t,this.xB.yn(ri.ra,this.hR),this.xB.yn(ri.ha,this.oR),this.Yr()}},HN={bt:void 0,Mf:0,ct:NaN,If:!1,lt:void 0,bf:void 0,Pf:!1,Ff:!0,Gf:1,Jf:ae.aT,e_:!1,r_:0,a_:0,c_:1};function qN(t){switch(t){case Tu.INLINE:case Tu.FULLSCREEN:case Tu.PICTURE_IN_PICTURE:return t;default:return}}!function(t){t.DEFAULT="",t.THEO="theo",t.CSAI="csai",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor",t.THEOADS="theoads"}(Fr||(Fr={}));var wc,Au,Go,XN,ZN,ta=class{get aR(){return this.uR}cR(t){const i=this.uR.filter((i=>i.lR(t)));if(i.length>1)0;else if(0===i.length)throw g("Unknown ad integration: "+t.integration);return i[0]||null}dR(t){this.uR.push(t)}constructor(){this.uR=[]}};ta.Ib=new ta,function(t){t.Rw="PLAYING",t.Qw="PAUSED",t.fR="SEEK",t._R="STALLED",t.gR="FAILED",t.wR="INITIAL_BUFFERING",t.AR="NO_ACCESS"}(wc||(wc={})),function(t){t.vR="HTTP_REQUEST_STATUS_CODE_1XX",t.mR="HTTP_REQUEST_STATUS_CODE_2XX",t.pR="HTTP_REQUEST_STATUS_CODE_3XX",t.yR="HTTP_REQUEST_STATUS_CODE_4XX",t.MR="HTTP_REQUEST_STATUS_CODE_5XX",t.NR="BUFFER_LENGTH",t.DR="BYTES_RECEIVED",t.IR="SEGMENT_READ_BITRATE",t.SR="SEGMENT_PROFILE_BITRATE",t.ER="VIDEO_PROFILE_BITRATE",t.bR="NUMBER_OF_FRAMES_DROPPED",t.LR="PLAYBACK_POSITION",t.kR="NUMBER_OF_FRAMES_DECODED",t.xR="PLAYBACK_DELTA_TO_ORIGIN",t.OR="STREAM_DELTA_TO_ORIGIN",t.jR="ORIGIN_TIMESTAMP"}(Au||(Au={})),function(t){t.zR="MANIFEST_URI",t.PR="ASSET_DURATION",t.RR="NUMBER_OF_CONTENT_PROFILES",t.UR="CDN",t.QR="CONTENT_TITLE",t.FR="SERVICE_NAME",t.YR="CONTENT_TYPE",t.GR="CONTENT_DESCRIPTION"}(Go||(Go={})),(XN||(XN={})).WR="shutdown_normal_shutdown",function(t){t.HR="session/",t.qR="content/",t.XR="internalError/",t.ZR="drmError/",t.KR="caError/",t.JR="networkError/"}(ZN||(ZN={}));var KN,JN=class{get code(){return this.category+this.statusCode}constructor(t,i){this.category=t,this.statusCode=i}};!function(t){t.$R="userAction",t.tU="endOfStreamReached"}(KN||(KN={}));var ur,$N=class extends xd{};!function(t){t.PAUSE="iU",t.RESUME="eU"}(ur||(ur={}));var tD=class extends wn{constructor(){super("sU")}},iD=class extends xd{nU(){this.rU=!0}hU(){}gn(){this.rU=!1,this.oU.fn(ur.PAUSE,this.aU),this.oU.fn(ur.RESUME,this.uU)}cU(){return isFinite(this.Qo.Td())}constructor(t,i){super(),this.Qo=t,this.oU=i,this.rU=!1,this.aU=()=>{this.hU(),this.rU=!1},this.uU=()=>{this.rU=!0},this.oU.yn(ur.PAUSE,this.aU),this.oU.yn(ur.RESUME,this.uU)}},eD=class extends iD{nU(){super.nU(),this.lU()}gn(){this.dU(),super.gn()}lU(){this.Qo.yn(he.Bw,this.fU),this.Qo.yn(l.Sh,this._U),this.Qo.yn(he.Rw,this.gU),this.Qo.yn(l.yw,this.wU),this.Qo.yn(l.pw,this.AU)}dU(){this.Qo.fn(he.Bw,this.fU),this.Qo.fn(l.Sh,this._U),this.Qo.fn(he.Rw,this.gU),this.Qo.fn(l.yw,this.wU),this.Qo.fn(l.pw,this.AU)}vU(){this.mU=!0}pU(){const t=this.Qo.Ef(),i=new JN(ZN.XR,String(t.code));this.yU(wc.gR,i,t.message)}MU(t){this.rU&&(this.oU.TU(t),this.Co(new tD))}yU(t,i,e){this.oU.NU(t,i,e),this.Co(new tD)}DU(t,i){this.oU.IU(t,i)}constructor(...t){super(...t),this.mU=!1,this.SU=!1,this.EU=!1,this.fU=()=>{this.SU&&!this.EU&&this.MU(wc._R)},this.gU=()=>{this.Qo.Ff||(this.SU||this.DU(new JN(ZN.qR,"firstFrameDisplayed"),"now"),this.SU=!0,this.MU(wc.Rw))},this._U=()=>{this.Qo.Ff&&(this.SU=!0,this.MU(wc.Qw))},this.wU=()=>{this.mU&&(this.EU=!0,this.mU=!1,this.MU(wc.fR))},this.AU=()=>{this.EU=!1,this.Qo.Ff&&this.MU(wc.Qw)}}},sD=class extends iD{nU(){super.nU(),this.bU(),this.lU()}gn(){this.dU(),super.gn()}lU(){this.Qo.rt.yn(qo.ra,this.bU),this.Qo.kU.LU(this.CU),this.Qo.yn(l.Xg,this.xU)}dU(){this.Qo.rt.fn(qo.ra,this.bU),this.Qo.kU.OU(this.CU),this.Qo.fn(l.Xg,this.xU)}jU(t){t.serviceName&&this.zU(Go.FR,t.serviceName),t.cdn&&this.zU(Go.UR,t.cdn),t.contentTitle&&this.zU(Go.QR,t.contentTitle),t.contentType&&this.zU(Go.YR,t.contentType),t.contentDescription&&this.zU(Go.GR,t.contentDescription)}zU(t,i){this.rU&&this.oU.PU(t,i)}constructor(...t){super(...t),this.xU=()=>{this.cU()&&this.zU(Go.PR,_.round(this.Qo.Td()))},this.CU=t=>{"manifest"===t.request.type&&this.zU(Go.zR,t.url)},this.bU=()=>{const t=Po(this.Qo.rt.og,(t=>t.Rt));t&&this.zU(Go.RR,t.Ng.U)}}},nD=class extends iD{nU(){super.nU(),this.BU=this.Qo.jf.wT,this.RU=this.Qo.jf.vT,this.lU(),this.UU.push(v(this.QU,1e3))}hU(){super.hU(),this.FU()}gn(){this.FU(),this.dU(),this.UU.forEach(m),No(this.UU),super.gn()}lU(){this.Qo.kU.LU(this.YU),this.Qo.yn(l.Dw,this.GU)}dU(){this.Qo.kU.OU(this.YU),this.Qo.fn(l.Dw,this.GU)}VU(){this.FU()}WU(t){this.HU+=t,this.qU(Au.DR,this.HU)}XU(t,i){const e=this.ZU.get(i)||0;this.qU(t,e)}KU(){const t=this.Qo.jf.wT-this.BU;this.qU(Au.bR,t)}JU(){const t=this.Qo.jf.vT-this.RU;this.qU(Au.kR,t)}$U(){const t=Yo.Ib.ez();this.qU(Au.IR,_g(t))}tQ(t){this.qU(Au.SR,_g(t)),this.qU(Au.ER,_g(t))}FU(){if(!this.cU())return;const t=_.round(Ft(this.Qo.Tf()));this.qU(Au.LR,t)}iQ(){const t=Ai.xn(this.Qo.Af()),i=this.Qo.Tf(),e=t.lA(i),s=e?Ft(e.jn(0)-i):0;this.qU(Au.NR,s)}qU(t,i){this.rU&&this.oU.eQ(t,i)}constructor(...t){super(...t),this.ZU=Eo(),this.HU=0,this.BU=0,this.RU=0,this.UU=[],this.QU=()=>{this.KU(),this.JU(),this.iQ()},this.GU=t=>{t.wS===Vt.pm&&(this.WU(t.pT),this.$U(),this.tQ(t.sQ),this.FU())},this.YU=t=>{const i=t.status.toString()[0],e=this.ZU.get(i)||0;this.ZU.set(i,e+1),this.XU(Au.vR,"1"),this.XU(Au.mR,"2"),this.XU(Au.pR,"3"),this.XU(Au.yR,"4"),this.XU(Au.MR,"5")}}},U=class{Vb(t){this.nQ.delete(t)}rQ(){this.nQ.clear()}Fb(t){return this.nQ.get(t)}Kj(t,i){this.nQ.set(t,i)}constructor(){this.nQ=Eo()}},ki=class t{static hQ(){return t.Ib||(t.Ib=rD.qC()?new rD:new U),t.Ib}static Vb(i){t.hQ().Vb(i)}static rQ(){t.hQ().rQ()}static Fb(i){return t.hQ().Fb(i)}static Kj(i,e){t.hQ().Kj(i,e)}};ki.Ib=void 0;var E,rD=class extends ki{static qC(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}Vb(t){self.sessionStorage.removeItem(t)}rQ(){self.sessionStorage.clear()}Fb(t){var i;return null!=(i=self.sessionStorage.getItem(t))?i:void 0}Kj(t,i){self.sessionStorage.setItem(t,i)}};function hD(t){return t&&t.integration===dD}function oD(t){if(!Qs(t.asset))throw new b("Agama source configuration: expected 'asset' to be a string");if(!function(t){return!!Qs(t)&&("live"===t||"vod"===t)}(t.streamType))throw new b("Agama source configuration: expected 'streamType' to be 'live' or 'vod'");if(void 0!==t.serviceName&&!function(t){return!!Qs(t)&&("live"===t||"svod"===t||"nvod"===t||"tvod"===t||"avod"===t||"catchuptv"===t)}(t.serviceName))throw new b("Agama source configuration: expected 'serviceName' to be 'live', 'svod', 'nvod','tvod', 'avod' or 'catchuptv'");if(void 0!==t.cdn&&!Qs(t.cdn))throw new b("Agama source configuration: expected 'cdn' to be a string");if(void 0!==t.contentTitle&&!Qs(t.contentTitle))throw new b("Agama source configuration: expected 'contentTitle' to be a string");if(void 0!==t.contentType&&!Qs(t.contentType))throw new b("Agama source configuration: expected 'contentType' to be a string");if(void 0!==t.contentDescription&&!Qs(t.contentDescription))throw new b("Agama source configuration: expected 'contentDescription' to be a string");return t}function aD(t){if(!Qs(t.config))throw new b("Agama player configuration: expected 'config' to be a string");if(void 0!==t.logLevel&&!function(t){return!!Qs(t)&&("info"===t||"debug"===t||"warning"===t||"error"===t||"fatal"===t)}(t.logLevel))throw new b("Agama player configuration: expected 'logLevel' to be 'info', 'debug', 'warning','error' or 'fatal'");if(void 0!==t.application&&!Qs(t.application))throw new b("Agama player configuration: expected 'application' to be a string");if(void 0!==t.applicationVersion&&!Qs(t.applicationVersion))throw new b("Agama player configuration: expected 'applicationVersion' to be a string");if(void 0!==t.userAccountID&&!Qs(t.userAccountID))throw new b("Agama player configuration: expected 'userAccountID' to be a string");if(void 0!==t.deviceID&&!Qs(t.deviceID))throw new b("Agama player configuration: expected 'deviceID' to be a string");return t}function uD(){let t="00000000-0000-0000-0000-000000000000",i=s.navigator,e=s.screen,n=""+i.mimeTypes.length;n+=i.userAgent.replace(/\D+/g,""),n+=i.plugins.length,n+=e.height||"",n+=e.width||"",n+=e.pixelDepth||"",n+=_.floor(1e3*_.random());let r=function(t){let i,e,s=0;if(0===t.length)return"0";for(i=0;i<t.length;i++)e=t.charCodeAt(i),s=(s<<5)-s+e,s|=0;return _.abs(s).toString().substring(0,12)}(n);return t=[t.slice(0,t.length-r.length),r].join(""),t}function cD(t,i,e){const s=i,n=function(t,i){return Ra(i)?t.DsProtocol.APPLE_HLS:t.DsProtocol.MPEG_DASH}(t,s.type),r=function(t,i){let e=t.DsPlaylistType.VOD;"live"===i&&(e=t.DsPlaylistType.LIVE);return e}(t,e.streamType);return{asset:e.asset,playlistType:r,protocol:n,uri:s.src}}!function(t){t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected"}(E||(E={}));var Ma,Dc,Wa,lD=class{oQ(){this.Qo.fn(ut.ha,this.aQ),this.uQ(),this.cQ(),this.oU.lQ()}dQ(){this.Qo.fQ.va.chromecast&&this.Qo.fQ.va.chromecast.addEventListener("statechange",this._Q)}cQ(){this.Qo.fQ.va.chromecast&&this.Qo.fQ.va.chromecast.removeEventListener("statechange",this._Q)}gQ(){return void 0!==this.Qo.fQ.va.chromecast&&this.Qo.fQ.va.chromecast.state===E.CONNECTED}gn(){this.Qo.fn(l.lo,this.do),this.Qo.fn(l.jh,this.wQ),this.Qo.fn(l.Jg,this.AQ),this.oQ(),this.oU.gn()}vQ(){this.mQ||(this.mQ=new eD(this.Qo,this.oU)),this.pQ||(this.pQ=new nD(this.Qo,this.oU)),this.yQ||(this.yQ=new sD(this.Qo,this.oU))}nU(){this.mQ&&(this.mQ.nU(),this.mQ.yn("sU",this.MQ)),this.pQ&&this.pQ.nU(),this.yQ&&this.yQ.nU()}uQ(){this.mQ&&(this.mQ.fn("sU",this.MQ),this.mQ.gn(),this.mQ=void 0),this.pQ&&(this.pQ.gn(),this.pQ=void 0),this.yQ&&(this.yQ.gn(),this.yQ=void 0)}jU(t){this.yQ&&this.yQ.jU(t)}TQ(){this.mQ&&this.mQ.pU()}vU(){this.mQ&&this.mQ.vU()}constructor(t,i,e){this.Qo=t,this.oU=i,this.do=()=>{this.NQ(),this.AQ()},this.NQ=()=>{const t=this.Qo.Wa(),i=t&&t.analytics;this.DQ=function(t){void 0===t&&(t=[]);for(let i of t)if(hD(i))return oD(i)}(i)},this.AQ=()=>{this.oQ(),this.Qo.fn(l.jh,this.wQ),!this.gQ()&&this.oU.IQ()&&this.Qo.bt&&this.DQ&&(this.vQ(),this.Qo.Ff||this.Qo.If?this.Qo.yn(l.jh,this.wQ):this.wQ())},this.wQ=()=>{this.Qo.bt&&this.DQ&&(this.oU.SQ(this.Qo.bt,this.DQ),this.nU(),this.jU(this.DQ),this.dQ(),this.Qo.yn(ut.ha,this.aQ),this.Qo.fn(l.jh,this.wQ))},this._Q=()=>{this.gQ()&&this.oQ()},this.aQ=()=>{this.TQ(),this.oQ()},this.MQ=()=>{this.pQ&&this.pQ.VU()};const s=function(t){void 0===t&&(t=[]);for(const i of t)if(hD(i))return aD(i)}(e.analytics);s&&this.oU.EQ()&&(this.oU.v_(s),this.oU.IQ()?(this.oU.bQ(),this.Qo.yn(l.lo,this.do),this.Qo.yn(l.Jg,this.AQ)):console.warn("An error occurred while initializing an Agama EMP client. Please check your configuration"))}},dD="agama";function fD(t){switch(t){case"":return Ma.NONE;case"horizontal":return Ma.HORIZONTAL;case"vertical":return Ma.VERTICAL;default:throw new b}}function _D(t,i){if(i)return Dc.PM360;if(null==t)return Dc.NONE;switch(t){case"":return Dc.NONE;case"360":return Dc.PM360;case"180":return Dc.PM180;default:throw new b("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}!function(t){t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(Ma||(Ma={})),function(t){t.NONE="",t.PM360="360",t.PM180="180"}(Dc||(Dc={})),function(t){t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event"}(Wa||(Wa={}));var gD="https://content.uplynk.com";function ne(t){if(!t)return!0;const i=!function(t){return Ja(t)||We(t)&&Ja(t[0])}(t.sources)||ew(t.sources),e=!t.ads||wD(t.ads),s=""!==t.poster&&!t.poster;return i&&e&&s}function wD(t){return!t||Gt(t)&&0===t.length}function AD(t){if(t&&t.sources)return vD(t.sources)}function vD(t){return Qs(t)?$n(t):tw(t)?t.type||t.src&&$n(t.src):We(t)&&t.length>0?vD(t[0]):void 0}function mD(t){if(t&&t.sources)return pD(t.sources)}function pD(t){return Qs(t)?t:tw(t)?t.src:We(t)&&t.length>0?pD(t[0]):void 0}function yD(t,i,e){return Zg(t)?function(t,i,e){let s=Tt({},sw(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:ps.VERIZON_MEDIA,id:"",prefix:gD,preplayParameters:{},playbackUrlParameters:{},assetType:Wa.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(Qs(t))return t;if(We(t)&&Qs(t[0]))return t;if(function(t){return $l(t)&&Qs(t.userId)&&(We(t.externalId)||Qs(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return Wa.CHANNEL;case"event":return Wa.EVENT;default:return Wa.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=ln(t.contentProtected));t.assetInfo?s.assetInfo=ln(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=gi(t.prefix)||gD);return s.ping=function(t,i){let e=!1,s=!1,n=!1;i?(e=!!td(i.adImpressions)&&i.adImpressions,s=!!td(i.freeWheelVideoViews)&&i.freeWheelVideoViews,n=td(i.linearAdData)?i.linearAdData:t!==Wa.ASSET):t!==Wa.ASSET&&(n=!0);return{adImpressions:e,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=TD(s,t),s=DD(s,i,e),s=ND(s,t,e),s}(t,i,e):Jg(t)?function(t,i,e){var s;return Tt({},MD(t,i,e),{integration:ps.MEDIATAILOR,adParams:null!=(s=t.adParams)?s:{}})}(t,i,e):Kg(t)?function(t,i,e){return Tt({},MD(t,i,e),{integration:ps.THEOLIVE})}(t,i,e):MD(t,i,e)}function MD(t,i,e){let s=nw();const n=i&&(i.contentProtection||i.drm);if(Qs(t)){if(s.src=t,s.type=$n(t),n){const t=CN(n);s.contentProtection=Cg(t)}}else if(tw(t)||au(t)){s.src=t.src,s.type=t.type||$n(t.src),s.isAdvertisement=t.isAdvertisement;const i=iw(t)?t.hesp:void 0;void 0!==i&&(s.hesp=i);Jg(t)&&(s.integration=t.integration);const e=CN(t.contentProtection||t.drm||n);s.contentProtection=Cg(e),t.ssai&&(s.ssai=zf(t.ssai)),s=TD(s,t)}return s=DD(s,i,e),s=ND(s,t,e),s}function TD(t,i){var e,s;i.useCredentials?t.crossOrigin=Jh.LA:i.crossOrigin&&(t.crossOrigin=qg(i.crossOrigin)),Qs(i.timeServer)&&(t.timeServer=i.timeServer),i.liveOffset&&(t.liveOffset=i.liveOffset),i.hlsDateRange&&(t.hlsDateRange=i.hlsDateRange),i.lowLatency&&(t.lowLatency=ln(i.lowLatency)),i.useNativePlayback&&(t.useNativePlayback=ln(i.useNativePlayback)),i.useManagedMediaSource&&(t.useManagedMediaSource=ln(i.useManagedMediaSource)),i.dash&&(t.dash=xg(i.dash)),i.hls&&(t.hls=Og(i.hls)),i.lcevc&&(t.lcevc=ln(i.lcevc)),i.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=aw(i.ignoreEmbeddedTextTrackTypes)),i.latencyConfiguration&&(t.latencyConfiguration=Gg(i.latencyConfiguration)),t.seamlessSwitchStrategy=Vg(null!=(s=i.seamlessSwitchStrategy)?s:null==(e=i.dash)?void 0:e.useSeamlessPeriodSwitch);const n=pu(i.experimentalRendering);void 0!==n&&(t.experimentalRendering=n);const r=pu(i.nativeUiRendering);return void 0!==r&&(t.nativeUiRendering=r),t}function ND(t,i,e){return t.abr=Pg(Qs(i)?void 0:zg(i.abr),null==e?void 0:e.abr),t}function DD(t,i,e){var s;const n=i&&i.timeServer;return e&&e.liveOffset&&!Yt(t.liveOffset)&&(t.liveOffset=e.liveOffset),e&&e.hlsDateRange&&!Yt(t.hlsDateRange)&&(t.hlsDateRange=e.hlsDateRange),t.crossOrigin===Jh.EA&&(null==i||null==(s=i.vr)?void 0:s[360])&&(t.crossOrigin=Jh.bA),t.useCredentials=t.crossOrigin===Jh.LA,Qs(n)&&!t.timeServer&&(t.timeServer=n),t}function ID(t){const i={src:""};if(t&&t.src){if(i.src=gi(t.src),"default"in t&&(i.default=ln(t.default)),i.kind=function(t){const i=String(t||"").toLowerCase();return Dv(i)?i:i?"metadata":"subtitles"}(t.kind),Wg(t.format)&&(i.format=t.format),"srclang"in t){const e=t.srclang;"string"==typeof e&&""!==e&&(i.srclang=e)}if("label"in t){const e=t.label;"string"==typeof e&&""!==e&&(i.label=e)}}return i}function SD(t,i){if($l(t))try{return i.cR(t).LQ(t)}catch(t){return}}function ca(t,i,e){if(void 0===e&&(e=ta.Ib),ne(t))return{sources:[nw()]};const s=Oi(t);if(s.sources=function(t,i,e){if(Ja(t))return[yD(t,i,e)];if(We(t)&&Ja(t[0])){const s=[];for(const n of t)s.push(yD(n,i,e));return s}return[nw()]}(s.sources,s,i),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,i){if(!We(t))return[];const e=[];for(let s of t)s=SD(s,i),s&&e.push(s);return e}(s.ads,e);0===t.length?delete s.ads:s.ads=t}const n=!ew(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!We(t))return[];const i=[];for(let e of t)e=ID(e),""!==e.src&&i.push(e);return i}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=gi(s.poster)),"streamType"in s&&(s.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(s.streamType)),"vr"in s&&(s.vr=function(t){const i=t||{};return i.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(i.stereoMode),{panoramaMode:_D(i.panoramaMode,Boolean(i[360])),stereoMode:i.stereoMode?fD(i.stereoMode):Ma.NONE,nativeVR:Boolean(i.nativeVR)}}(s.vr));if("analytics"in s||(null==i?void 0:i.analytics)){const t=hw(s.analytics),e=i&&i.analytics||[];s.analytics=function(t,i){const e=Oi(t);for(const s of i){const i=!t.some((t=>t.integration===s.integration));i&&s.integration!==dD&&e.push(s)}return e}(t,e)}return"mutedAutoplay"in s&&(s.mutedAutoplay=dw(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=Mh(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}var ED=!(fi.zE&&!fi.BE),Fu=self.console;function bD(t){if($l(t))try{return JSON.stringify(t)}catch(t){}return t}function LD(t){return t.map(bD).join(" ")}function kD(t){const i=Fu&&Fu[t];return i?i.bind&&ED?i.bind(Fu):function(){for(var i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];Fu[t](LD(e))}:void 0}var Ru=kD("log")||qt,cs=kD("warn")||Ru.bind(void 0,"WARNING:"),Ea=kD("error")||Ru.bind(void 0,"ERROR:"),CD=(()=>{const t=Fu&&Fu.assert;return t?t.bind&&ED?t.bind(Fu):function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];Fu.assert(t,LD(e))}:function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];t||Ea("Assertion failed:",...e)}})();var xD=function(){function t(t){this.kQ=t}return t.prototype.CQ=function(t){var i,e,s,n,r,h,o,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.kQ.charAt(64);for(i=0;i<t.length;i+=4)e=(o=this.kQ.indexOf(t.charAt(i))<<18|this.kQ.indexOf(t.charAt(i+1))<<12|(r=this.kQ.indexOf(t.charAt(i+2)))<<6|(h=this.kQ.indexOf(t.charAt(i+3))))>>>16&255,s=o>>>8&255,n=255&o,a[i/4]=String.fromCharCode(e,s,n),64===h&&(a[i/4]=String.fromCharCode(e,s)),64===r&&(a[i/4]=String.fromCharCode(e));return a.join("")},t.prototype.xQ=function(t,i){var e,s,n,r,h,o,a,u=[],c="";if((o=t.length%3)>0)for(;o++<3;)c+=this.kQ.charAt(64),t+="\0";for(o=0;o<t.length;o+=3)s=(e=t.charCodeAt(o)<<16|t.charCodeAt(o+1)<<8|t.charCodeAt(o+2))>>18&63,n=e>>12&63,r=e>>6&63,h=63&e,u[o/3]=this.kQ.charAt(s)+this.kQ.charAt(n)+this.kQ.charAt(r)+this.kQ.charAt(h);return a=(a=u.join("")).slice(0,a.length-c.length),i||(a+=c),a},t.lh=new t(function(){var t,i,e,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(i=r[t],e=0;e<i.length;e+=1)s=i.charAt(e),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.OQ=new t(function(t){return t.CQ("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.lh)),t}();function OD(t){return"string"==typeof t}function jD(t){return"number"==typeof t}var zD={}.toString;var oi,PD=Array.isArray||function(t){return"[object Array]"===zD.call(t)};function dr(t,i){return PD(t)&&t.every(i)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb",t.KEPLER="kepler"}(oi||(oi={}));var Q,BD=w.keys(oi).map((function(t){return oi[t]}));function RD(t){return-1!==BD.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview",t.THEOADS="theoads"}(Q||(Q={}));var UD,QD=w.keys(Q).map((function(t){return Q[t]}));function FD(t){return-1!==QD.indexOf(t)}function YD(t){try{var i=xD.OQ.CQ(t),e=JSON.parse(i);if(!function(t,i){var e,s=function(t){return"object"==typeof t&&null!==t}(t),n=OD(t.key),r=OD(t.customer_id),h=jD(t.generation_date),o=jD(t.expiration_date),a=dr(t.domains_page,OD),u=dr(t.domains_source,OD),c=dr(t.sdks,i?RD:OD),l=function(t){return"boolean"==typeof t}(t.send_impression);t.features?e=dr(t.features,i?FD:OD):(e=!0,t.features=[]);if(!(s&&n&&r&&h&&o&&a&&u&&c&&l&&e))return!1;return!0}(e,!1))throw new g("The provided license could not be decoded correctly.");return e}catch(t){throw new g("The provided license could not be decoded correctly.")}}function GD(){return UD||(UD={zu:um.href,jQ:_s.parent&&_s.parent!==s,zQ:WD()}),UD}var $s,VD=["http:","https:","ftp:","ws:","wss:"];function WD(){var t;try{if(null==_s?void 0:_s.top)return _s.top.location.href}catch(t){}return null==_s||null==(t=_s.document)?void 0:t.referrer}!function(t){t[t.BQ=0]="BQ",t[t.RQ=1]="RQ",t[t.UQ=2]="UQ"}($s||($s={}));var HD,K=class{constructor(t,i,e,s,n=[],r="",h=Date.now(),o=[],a=!0){this.QQ=t,this.FQ=i,this.YQ=e,this.GQ=s,this.VQ=n,this.WQ=r,this.HQ=h,this.qQ=o,this.XQ=a}};!function(t){t.RQ="expired",t.ZQ="invaliddomain",t.KQ="invalidsource",t.JQ="invalidfeature",t.ha="error"}(HD||(HD={}));var qD=class t{$Q(t,i){let e=[];Ja(t.sources)?e=[t.sources]:We(t.sources)&&(e=t.sources),this.tF(t,e,i),this.iF(e,i)}tF(t,i,e){if(ne(t)||0===e.YQ.length||KD(e.YQ))return;if(!i.every((t=>this.eF(t,e)))){const t="invalidsource",i=di.sF(t);throw new $i(XD(t),i)}}iF(t,i){for(const e of t)tw(e)&&iw(e)&&!e.bypassLicense&&this.nF([Q.HESP],i)}rF(i){return this.hF(i.qQ)&&this.oF(i)?t.aF(i.GQ)?0:1:2}nF(t,i){for(const e of t)if(!gd(i.VQ,e)){const t="invalidfeature",i=di.uF(t,e);throw new $i(XD(t),i)}}hF(t){return 0===t.length||t.some((t=>this.cF(t)))}cF(t){return"web"===function(t){switch(t){case oi.ANDROID:return ya.CS;case oi.ANDROIDTV:case oi.FIRETV:return ya.xS;case oi.IOS:return ya.OS;case oi.TVOS:return ya.jS;case oi.CHROMECAST:case oi.CHROMECASTCAF:return ya.zS;case oi.THEOLIVEWEB:return ya.PS;default:return ya.kS}}(t)}static aF(t){const i=Number(new Date);return!!t&&i<=t}oF(t){return!(this.lF&&0!==t.FQ.length&&!KD(t.FQ))||!!(this.lF&&this.dF(t.FQ)&&this.fF(t.FQ))}dF(t){return JD(this.BL.zu,t)}fF(t){if(!this.BL.jQ)return!0;if(this._F)return!0;const i=this.gF();return!!i&&JD(i,t)}gF(){if(!this.BL.jQ)return;const t=Nl.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.BL.zQ?this.BL.zQ:void 0}eF(i,e){return!!t.wF(i,e.YQ)}static wF(t,i){return JD(this.AF(t),i)}static AF(t){return Qs(t)?t:tw(t)&&t.src||""}constructor(t,i,e){this._F=t,this.vF=i,this.BL=e,this.lF=tI(this.BL)}};function XD(t){switch(t){case"invaliddomain":return Ui.LICENSE_INVALID_DOMAIN;case"invalidsource":return Ui.LICENSE_INVALID_SOURCE;case"expired":return Ui.LICENSE_EXPIRED;case"invalidfeature":return Ui.LICENSE_INVALID_FEATURE;case"error":return Ui.LICENSE_ERROR}}function ZD(t,i){let e=t,s=i;if(!e)return!1;if(s=s.trim(),"*"===s)return!0;if(e=e.replace(/\.+$/,""),s===e)return!0;const n="\\.",r="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",h="(\\*|"+r+")",o=new RegExp("ip-range\\("+h+n+h+n+h+n+h+"\\)"),a=s.match(o),u=t=>"*"===t?"("+r+")":t;if(null!==a&&5===a.length){const t=new RegExp("^"+a[1]+n+u(a[2])+n+u(a[3])+n+u(a[4])+"$");return null!==e.match(t)}return s="."+s,-1!==e.indexOf(s,e.length-s.length)}function KD(t){return t.some((t=>"*"===t))}function JD(t,e){const s=i.Dh(t);if(!$D(s))return!0;for(const i of e){if(ZD(s.hostname,i))return!0;if(ZD(Lf(t),i))return!0}return!1}function $D(t){return-1!==VD.indexOf(t.protocol)}function tI(t){const e=i.Dh(t.zu);return $D(e)&&!function(t){return ZD(t.hostname,"localhost")}(e)&&!function(t){return ZD(t.hostname,"theoplayer.doubleclick.net")}(e)}var Ze,di=class{static uF(t,i){return"The requested feature '"+i+"' is not available with the license for this player."}static sF(t){return"invaliddomain"===t?this.mF:"invalidsource"===t?this.pF:"expired"===t?this.yF:"invalidfeature"===t?this.MF:this.TF}};function iI(t){const i=[t.yM,t.NF,t.DF];switch(t.NF){case 1:i.push(t.Ug);break;case 4:i.push(t.Mf),i.push(t.lt);break;case 5:i.push(t.lt)}return i}di.TF="The license for this player is invalid.",di.yF="The usage license for this video player has expired.",di.mF="The current domain is incompatible with the license for this player.",di.pF="The provided video source is incompatible with the license for this player.",di.MF="The requested feature is not available with the license for this player.",function(t){t[t.IF=1]="IF",t[t.SF=4]="SF",t[t.EF=5]="EF",t[t.bF=9]="bF"}(Ze||(Ze={}));var al=new Array(256);for(let t=0;t<256;t+=1)al[t]=(t<16?"0":"")+t.toString(16);function $e(){const t=Ks(),i=(4294967296*_.random()|0)+t&3029421624,e=(4294967296*_.random()|0)+t&3595553209,s=(4294967296*_.random()|0)+t&1130486254,n=(4294967296*_.random()|0)+t&1284287105;return al[255&i]+al[i>>>8&255]+al[i>>>16&255]+al[i>>>24&255]+"-"+al[255&e]+al[e>>>8&255]+"-"+al[e>>>16&15|64]+al[e>>>24&255]+"-"+al[63&s|128]+al[s>>>8&255]+"-"+al[s>>>16&255]+al[s>>>24&255]+al[255&n]+al[n>>>8&255]+al[n>>>16&255]+al[n>>>24&255]}function eI(t){return fg(t.replace(/-/g,""))}function Ju(){return i.Kd()}var sI,nI="theoplayer-session-id";function rI(){if(!sI){const t=ki.Fb(nI);t?sI=t:(sI=$e(),ki.Kj(nI,sI))}return sI}var hI=/[^\x00-\x7E]/g;function oI(t){return"\\u"+Tf(t.charCodeAt(0).toString(16),4,"0")}var aI="https://license.theoplayer.com";function uI(t){const i=function(t){const i=[];return function(t,i,e){return JSON.stringify(t,i,e).replace(hI,oI)}(t,((t,e)=>{if($l(e)){if(-1!==i.indexOf(e))return null;i.push(e)}return e}))}(function(t){return[t.LF,t.wC,t.QQ,t.lp,t.kF,t.CF,t.xF.map(iI)]}(t));return xD.OQ.xQ(i)}var cI=class{get xF(){return this.HB}OF(){return Boolean(this.kF)}get kF(){return this.jF}async zF(t){if(!(await this.BF.PF()).XQ)return;const i={NF:Ze.IF,DF:Ks(),Ug:t};await this.DU(i)}async RF(){if(!(await this.BF.PF()).XQ)return;const t={NF:Ze.bF,DF:Ks()};await this.DU(t)}async UF(t,i){const e={NF:Ze.SF,DF:Ks(),Mf:i,lt:t};await this.DU(e)}async QF(t){const i={NF:Ze.EF,DF:Ks(),lt:t};await this.DU(i)}async DU(t){const i=await this.BF.PF();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.FF.xQ(i.QQ)&&t.NF!==Ze.EF||(t.NF===Ze.IF?this.YF():this.OF()||this.YF(),t.yM=this.Tk++,this.HB.push(t),!function(t){return t===Ze.IF||t===Ze.EF}(t.NF)?this.HB.length>this.GF&&await this.VF():await this.WF())}async WF(t){for(void 0===t&&(t=!1);this.HB.length>0;)await this.VF(t)}async HF(t){const i=await this.BF.PF();return{LF:Ks(),wC:rI(),QQ:this.FF.xQ(i.QQ)||"dev",lp:this.qk,kF:this.jF,CF:this.qF,xF:t}}async VF(t){void 0===t&&(t=!1);const i=this.HB.splice(0,this.XF),e=await this.HF(i);t?this.ZF(e):this.KF(e),this.JF=Ju()}async KF(t){const i=uI(t),e=new zu({zu:aI,cS:i,AS:!1,fS:Qv.Ru,lS:{"Content-Type":Vi.gj},CI:4e3,dS:Ys.POST});try{const t=await this.NS.SI(e);await t.cj()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+i}}ZF(t){const i=uI(t);this.NS.ZF({zu:aI,cS:i,qz:Vi.gj})}YF(){this.OF()&&this.WF(),this.jF=$e(),this.Tk=0}gn(){fs.tY(this.iY),m(this.eY),this.WF()}constructor(t,i,e,s=xD.lh,n=0,r=1){this.qk=t,this.NS=i,this.BF=e,this.FF=s,this.GF=n,this.XF=r,this.HB=[],this.jF=null,this.JF=0,this.qF="unknown",this.Tk=0,this.sY=()=>{Ju()-this.JF>6e4&&this.WF()},this.iY=()=>{this.WF(!0)},fs.nY(this.iY),this.eY=v(this.sY,6e4)}};var lI=0;var dI=c,Ur=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,nn=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;Ur&&nn||(Ur=function(t){const i=Ju(),e=_.max(0,16-(i-lI)),s=u((()=>t(i+e)),e);return lI=i+e,s},nn=dI),Ur=Ur.bind(self),nn=nn.bind(self);var fI=fi.zE||fi.Ga&&fi.qE<13;function _I(t,i,e){const s=t.getImageData(i,e,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var ve,gI=class{get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{drawImage(i){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];return t.rY(i,...s)},texImage2D:(i,e,s,n,r,h)=>t.hY(i,e,s,n,r,h),requestVideoFrameCallback:i=>t.oY(i),cancelVideoFrameCallback:i=>t.aY(i)}}(this)}rY(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];const n=this.uY;return void 0!==n&&(t.drawImage(n,...e),!0)}hY(t,i,e,s,n,r){let h=this.uY;return void 0!==h&&(fI&&(h=this.cY(h)),t.texImage2D(i,e,s,n,r,h),!0)}oY(t){const i=this.lY++,e=this.dY(t,i);return this.fY.set(i,{_Y:t,gY:e}),i}aY(t){const i=this.fY.get(t);void 0!==i&&(this.fY.delete(t),i.gY())}dY(t,i){const e=this.uY;if(void 0===e)return qt;if(e instanceof HTMLVideoElement&&e.requestVideoFrameCallback){const s=e.requestVideoFrameCallback(((e,s)=>{this.fY.delete(i),t(e,s)}));return()=>e.cancelVideoFrameCallback(s)}{let e;const s=n=>{this.wY()?(this.fY.delete(i),this.AY=!1,t(n,void 0)):e=Ur(s)};return e=Ur(s),()=>nn(e)}}wY(){return(!this.t.Ff||this.AY)&&!this.t.e_&&this.t.Jf>=ae.uT}cY(t){let i=this.vY;void 0===i&&(i=h.createElement("canvas"),this.vY=i);const e=i.getContext("2d"),s=this.t,n=s.a_,r=s.r_,o=i.width,a=i.height;e.clearRect(0,0,i.width,i.height),o===n&&a===r||(i.width=n,i.height=r),e.drawImage(t,0,0,n,r);let u=!1;return n>0&&_I(e,n-1,0)&&(i.width=o,u=!0),r>0&&_I(e,0,r-1)&&(i.height=a,u=!0),u&&e.drawImage(t,0,0,n,r),i}gn(){this.fY.forEach((t=>t.gY())),this.fY.clear(),this.t.fn(l.ew,this.mY),this.t.fn(l.pw,this.pY),this.uY=void 0,this.vY=void 0}constructor(t){this.uY=void 0,this.Xa=void 0,this.vY=void 0,this.fY=si(),this.lY=1,this.AY=!0,this.pY=()=>{this.AY=!0},this.mY=()=>{this.uY=this.t.A_(),this.fY.forEach(((t,i)=>{t.gY(),t.gY=this.dY(t._Y,i)}))},this.t=t,this.t.yn(l.ew,this.mY),this.t.yn(l.pw,this.pY),this.mY()}};(ve||(ve={})).pn="dimensionchange";var wI,AI=class extends wn{constructor(t,i){super(ve.pn),this.width=t,this.height=i}},X=class{constructor(t,i){this.we=t,this._Y=i}},vI=class extends X{get _u(){return this.yY}get ku(){return this.MY}gn(){this.TY.disconnect()}constructor(t,i){super(t,i),this.yY=0,this.MY=0,this.NY=t=>{if(t.length>0){const i=t[t.length-1].contentRect;this.MY=i.width,this.yY=i.height,this._Y(this.MY,this.yY)}},this.TY=new _s.ResizeObserver(this.NY),this.TY.observe(this.we)}};var mI=["Webkit","Moz","O","ms"],pI=(()=>{let t=!1;try{if(void 0!==_s&&"function"==typeof _s.addEventListener){const i=w.defineProperty({},"passive",{get(){t=!0}});_s.addEventListener("testPassiveEventSupport",qt,i),_s.removeEventListener("testPassiveEventSupport",qt,i)}}catch(t){}return t})(),yI=Eo();function MI(t){return yI.has(t)||yI.set(t,function(t){const i=(wI||(wI=_s&&_s.document&&_s.document.createElement("span")),wI);if(!i||!i.style)return t;if(void 0!==i.style[t])return t;const e=t.charAt(0).toUpperCase()+t.slice(1);for(const t of mI){const s=t+e;if(void 0!==i.style[s])return s}return t}(t)),yI.get(t)}function TI(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.bottom="0",i.top="0",i.overflow="scroll",i.zIndex="-1",i.visibility="hidden"}function NI(t){const i=t.style;i.position="absolute",i.left="0",i.top="0",i[MI("transition")]="0s"}var DI=class extends X{gn(){nn(this.DY),this.DY=0,this.IY.removeEventListener("scroll",this.SY),this.EY.removeEventListener("scroll",this.SY),fh(this.bY),s&&s.removeEventListener("resize",this.LY)}get _u(){return this.we.getBoundingClientRect().height||this.yY||0}get ku(){return this.we.getBoundingClientRect().width||this.MY||0}constructor(t,i,e){super(t,i),this.DY=0,this.MY=NaN,this.yY=NaN,this.kY=void 0,this.tr=()=>{const t=1e5;this.CY.style.width=t+"px",this.CY.style.height=t+"px",this.IY.scrollLeft=t,this.IY.scrollTop=t,this.EY.scrollLeft=t,this.EY.scrollTop=t,0===this.EY.scrollTop&&Ur(this.tr)},this.xY=()=>{const t=this.ku,i=this._u;this._Y(t,i),this.MY=t,this.yY=i,this.tr(),this.DY=0},this.SY=()=>{if(this.DY)return;const t=this.ku,i=this._u;t===this.MY&&i===this.yY||(this.DY=Ur(this.xY))},this.LY=()=>{this.kY||(this.kY=u(this.OY,66))},this.OY=()=>{this.kY=void 0,this.jY()},this.jY=()=>{this.SY()};const n=function(t,i){return s.getComputedStyle(t,void 0).getPropertyValue(i)||t.style[i]}(t,"position");e||"static"!==n||(t.style.position="relative");const r=h.createElement("div");this.bY=r,this.IY=h.createElement("div"),this.CY=h.createElement("div"),this.EY=h.createElement("div"),this.zY=h.createElement("div"),TI(this.IY),TI(this.EY),NI(this.CY),function(t){NI(t),t.style.width="200%",t.style.height="200%"}(this.zY),r.appendChild(this.IY),r.appendChild(this.EY),this.IY.appendChild(this.CY),this.EY.appendChild(this.zY),t.appendChild(r),this.IY.addEventListener("scroll",this.SY),this.EY.addEventListener("scroll",this.SY),s&&s.addEventListener("resize",this.LY),this.SY()}},II=class extends xd{bn(t){this.TY||("function"==typeof _s.ResizeObserver?this.TY=new vI(this.we,this.NY):this.TY=new DI(this.we,this.NY,t))}gn(){this.Vo(),this.TY&&(this.TY.gn(),this.TY=void 0)}get _u(){return this.TY?this.TY._u:0}get ku(){return this.TY?this.TY.ku:0}constructor(t){super(),this.TY=void 0,this.NY=(t,i)=>{this.Co(new AI(t,i))},this.we=t}},hr=class extends wn{constructor(){super(ri.ra)}};var SI=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(let i of t)if(i[1]in h)return{PY:i[0],BY:i[1],RY:i[2],UY:i[3],Qe:i[4],QY:i[5]}}(),EI=class extends wn{constructor(){super(ri.ca)}},bI=class t extends xd{static ia(t){return Boolean(SI&&h[SI.UY]&&SI.PY in t)}mo(){const t=this.we[SI.PY]();t&&t.then?t.then(this.FY,this.YY):(h.removeEventListener(SI.QY,this.YY),h.addEventListener(SI.QY,this.YY))}So(){const t=h[SI.BY]();t&&t.then?t.then(this.FY,this.YY):(h.removeEventListener(SI.QY,this.YY),h.addEventListener(SI.QY,this.YY))}hR(){const t=this.cs,i=this.we===h[SI.RY];this.cs=i,t!==i&&this.Co(new hr)}oR(){this.Co(new EN)}gn(){this.Vo(),h.removeEventListener(SI.Qe,this.FY),h.removeEventListener(SI.QY,this.YY)}constructor(i){super(),this.cs=!1,this.FY=()=>this.hR(),this.YY=()=>this.oR(),this.we=i,this.ta=t.ia(i),h.addEventListener(SI.Qe,this.FY),this.hR()}},LI=class t extends xd{static ia(t){return fi.Ga&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}mo(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("fullscreen")?fi.Ga?requestAnimationFrame((()=>this.we.webkitSetPresentationMode("fullscreen"))):this.we.webkitSetPresentationMode("fullscreen"):this.we.webkitEnterFullscreen()}So(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("inline")?this.we.webkitSetPresentationMode("inline"):this.we.webkitExitFullscreen()}hR(){const t=this.cs;let i;i=this.we.webkitPresentationMode?"fullscreen"===this.we.webkitPresentationMode:Boolean(this.we.webkitDisplayingFullscreen),this.cs=i,t!==i&&this.Co(new hr)}gn(){this.Vo(),this.we.removeEventListener("webkitbeginfullscreen",this.FY),this.we.removeEventListener("webkitendfullscreen",this.FY),this.we.removeEventListener("webkitpresentationmodechanged",this.FY)}constructor(i){super(),this.cs=!1,this.FY=()=>this.hR(),this.we=i,this.ta=t.ia(i),this.we.addEventListener("webkitbeginfullscreen",this.FY),this.we.addEventListener("webkitendfullscreen",this.FY),this.we.addEventListener("webkitpresentationmodechanged",this.FY),this.hR()}},kI=class extends xd{get ta(){return!!this.GY&&this.GY.ta}get cs(){return this.sR}mo(){this.GY?this.GY.mo():this.Co(new EN)}So(){for(const t of this.VY)t.cs&&t.So()}WY(t){this.GY=t}HY(t){this.VY.push(t),t.yn(ri.ra,this.hR),t.yn(ri.ha,this.Ds),this.hR()}qY(t){To(this.VY,t),t.fn(ri.ra,this.hR),t.fn(ri.ha,this.Ds)}XY(){for(const t of this.VY)if(t.cs)return!0;return!1}tr(){this.GY=void 0,this.sR=!1;const t=this.VY.slice();for(const i of t)this.qY(i),i.gn();this.hR()}gn(){this.Vo(),this.tr()}constructor(...t){super(...t),this.VY=[],this.GY=void 0,this.sR=!1,this.hR=()=>{const t=this.sR,i=this.XY();t!==i&&(this.sR=i,this.Co(new hr))}}},CI=class extends xd{get ta(){return!!this.ZY&&this.KY.ta}get cs(){return this.KY.cs}mo(){this.ZY&&this.KY.mo()}So(){this.KY.So()}JY(){this.KY.yn([ri.ra,ri.ca],this.hR),this.KY.yn(ri.ha,this.Ds)}$Y(){this.KY.fn([ri.ra,ri.ca],this.hR),this.KY.fn(ri.ha,this.Ds)}Yn(){const t=this.KY,i=this.t.w_();if(t===i)return;this.oa=!0;const e=this.cs,s=this.ta;e&&this.So(),this.$Y(),this.KY=i,this.JY(),e&&!this.cs&&this.ta?this.mo():this.So(),this.oa=!1,s!==this.ta&&this.Co(new EI),e!==this.cs&&this.Co(new hr)}gn(){this.Vo(),this.$Y(),this.t.fn(l.$g,this.tG)}constructor(t,i){super(),this.oa=!1,this.tG=()=>this.Yn(),this.hR=t=>{this.oa||this.Co(t)},this.t=t,this.ZY=i,this.KY=new Mu,this.JY(),this.t.yn(l.$g,this.tG),this.Yn()}},xI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:function(t){return"Symbol("+t+")"};function OI(){}var jI=Number.isNaN||function(t){return t!=t},zI=OI;function zt(t){return"object"==typeof t&&null!==t||"function"==typeof t}function PI(t){return t.slice()}function BI(t,i,e,s,n){new j(t).set(new j(e,s,n),i)}function RI(t){return!1!==function(t){if("number"!=typeof t)return!1;if(jI(t))return!1;if(t<0)return!1;return!0}(t)&&t!==1/0}function UI(t,i,e){if("function"!=typeof t)throw new b("Argument is not a function");return Function.prototype.apply.call(t,i,e)}function Gu(t,i,e,s){var n=t[i];if(void 0!==n){if("function"!=typeof n)throw new b(n+" is not a method");switch(e){case 0:return function(){return FI(n,t,s)};case 1:return function(i){var e=[i].concat(s);return FI(n,t,e)}}}return function(){return le(void 0)}}function QI(t,i,e){var s=t[i];if(void 0!==s)return UI(s,t,e)}function FI(t,i,e){try{return le(UI(t,i,e))}catch(t){return Kt(t)}}function YI(t){if(t=Number(t),jI(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function GI(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new b("size property of a queuing strategy must be a function");return function(i){return t(i)}}var VI=Promise,WI=Promise.prototype.then,HI=Promise.resolve.bind(VI),qI=Promise.reject.bind(VI);function Lt(t){return new VI(t)}function le(t){return HI(t)}function Kt(t){return qI(t)}function XI(t,i,e){return WI.call(t,i,e)}function ZI(t,i,e){XI(XI(t,i,e),void 0,zI)}function KI(t,i){ZI(t,i)}function JI(t,i){ZI(t,void 0,i)}function br(t,i,e){return XI(t,i,e)}function $I(t){XI(t,void 0,zI)}var An=function(){function t(){this.iG=0,this.eG=0,this.sG={nG:[],rG:void 0},this.hG=this.sG,this.iG=0,this.eG=0}return w.defineProperty(t.prototype,"length",{get:function(){return this.eG},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var i=this.hG,e=i;16383===i.nG.length&&(e={nG:[],rG:void 0}),i.nG.push(t),e!==i&&(this.hG=e,i.rG=e),++this.eG},t.prototype.shift=function(){var t=this.sG,i=t,e=this.iG,s=e+1,n=t.nG,r=n[e];return 16384===s&&(i=t.rG,s=0),--this.eG,this.iG=s,t!==i&&(this.sG=i),n[e]=void 0,r},t.prototype.forEach=function(t){for(var i=this.iG,e=this.sG,s=e.nG;!(i===s.length&&void 0===e.rG||i===s.length&&(i=0,0===(s=(e=e.rG).nG).length));)t(s[i]),++i},t.prototype.peek=function(){var t=this.sG,i=this.iG;return t.nG[i]},t}();function tS(t,i,e){var s=null;!0===e&&(s=w.prototype);var n=w.create(s);return n.value=t,n.done=i,n}function iS(t,i){t.oG=!0,t.aG=i,i.uG=t,"readable"===i.ja?nS(t):"closed"===i.ja?function(t){nS(t),oS(t)}(t):rS(t,i.cG)}function eS(t,i){return vr(t.aG,i)}function kt(t){"readable"===t.aG.ja?hS(t,new b("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,i){rS(t,i)}(t,new b("Reader was released and can no longer be used to monitor the stream's closedness")),t.aG.uG=void 0,t.aG=void 0}function sS(t){return new b("Cannot "+t+" a stream using a released reader")}function nS(t){t.lC=Lt((function(i,e){t.lG=i,t.dG=e}))}function rS(t,i){nS(t),hS(t,i)}function hS(t,i){$I(t.lC),t.dG(i),t.lG=void 0,t.dG=void 0}function oS(t){t.lG(void 0),t.lG=void 0,t.dG=void 0}var aS=xI("[[CancelSteps]]"),uS=xI("[[PullSteps]]");function cS(t,i){void 0===i&&(i=!1);var e=new AS(t);return e.oG=i,e}function lS(t){return Lt((function(i,e){var s={Hb:i,Xb:e};t.uG.fG.push(s)}))}function dS(t,i,e){var s=t.uG;s.fG.shift().Hb(tS(i,e,s.oG))}function fS(t){return t.uG.fG.length}function _S(t){var i=t.uG;return void 0!==i&&!!vS(i)}var gS,wS,AS=function(){function t(t){if(!1===te(t))throw new b("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===Lu(t))throw new b("This stream has already been locked for exclusive reading by another reader");iS(this,t),this.fG=new An}return w.defineProperty(t.prototype,"closed",{get:function(){return vS(this)?this.lC:Kt(pS("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return vS(this)?void 0===this.aG?Kt(sS("cancel")):eS(this,t):Kt(pS("cancel"))},t.prototype.read=function(){return vS(this)?void 0===this.aG?Kt(sS("read from")):mS(this):Kt(pS("read"))},t.prototype.releaseLock=function(){if(!vS(this))throw pS("releaseLock");if(void 0!==this.aG){if(this.fG.length>0)throw new b("Tried to release a reader lock when that reader has pending read() calls un-settled");kt(this)}},t}();function vS(t){return!!zt(t)&&!!w.prototype.hasOwnProperty.call(t,"fG")}function mS(t){var i=t.aG;return i._G=!0,"closed"===i.ja?le(tS(void 0,!0,t.oG)):"errored"===i.ja?Kt(i.cG):i.gG[uS]()}function pS(t){return new b("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof xI.asyncIterator&&((gS={})[xI.asyncIterator]=function(){return this},wS=gS,w.defineProperty(wS,xI.asyncIterator,{enumerable:!1}));var yS={next:function(){if(!1===MS(this))return Kt(TS("next"));var t=this.wG;return void 0===t.aG?Kt(sS("iterate")):br(mS(t),(function(i){var e=i.done;return e&&kt(t),tS(i.value,e,!0)}))},return:function(t){if(!1===MS(this))return Kt(TS("next"));var i=this.wG;if(void 0===i.aG)return Kt(sS("finish iterating"));if(i.fG.length>0)return Kt(new b("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.AG){var e=eS(i,t);return kt(i),br(e,(function(){return tS(t,!0,!0)}))}return kt(i),le(tS(t,!0,!0))}};function MS(t){return!!zt(t)&&!!w.prototype.hasOwnProperty.call(t,"wG")}function TS(t){return new b("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function NS(t){var i=t.vG.shift();return t.mG-=i.size,t.mG<0&&(t.mG=0),i.value}function DS(t,i,e){if(!RI(e=Number(e)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.vG.push({value:i,size:e}),t.mG+=e}function Qu(t){t.vG=new An,t.mG=0}void 0!==wS&&w.setPrototypeOf(yS,wS),w.defineProperty(yS,"next",{enumerable:!1}),w.defineProperty(yS,"return",{enumerable:!1});var IS=xI("[[AbortSteps]]"),SS=xI("[[ErrorSteps]]"),ES=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),LS(this);var e=i.size,s=i.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=GI(e);void 0===s&&(s=1),function(t,i,e,s){var n=w.create(GS.prototype);function r(){return QI(i,"start",[n])}var h=Gu(i,"write",1,[n]),o=Gu(i,"close",0,[]),a=Gu(i,"abort",1,[]);VS(t,n,r,h,o,a,e,s)}(this,t,s=YI(s),n)}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===kr(this))throw JS("locked");return st(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===kr(this)?Kt(JS("abort")):!0===st(this)?Kt(new b("Cannot abort a stream that already has a writer")):kS(this,t)},t.prototype.close=function(){return!1===kr(this)?Kt(JS("close")):!0===st(this)?Kt(new b("Cannot close a stream that already has a writer")):!0===re(this)?Kt(new b("Cannot close an already-closing stream")):CS(this)},t.prototype.getWriter=function(){if(!1===kr(this))throw JS("getWriter");return bS(this)},t}();function bS(t){return new BS(t)}function LS(t){t.ja="writable",t.cG=void 0,t.dL=void 0,t.pG=void 0,t.yG=new An,t.MG=void 0,t.TG=void 0,t.NG=void 0,t.DG=void 0,t.IG=!1}function kr(t){return!!zt(t)&&!!w.prototype.hasOwnProperty.call(t,"pG")}function st(t){return void 0!==t.dL}function kS(t,i){var e=t.ja;if("closed"===e||"errored"===e)return le(void 0);if(void 0!==t.DG)return t.DG.SG;var s=!1;"erroring"===e&&(s=!0,i=void 0);var n=Lt((function(e,n){t.DG={SG:void 0,Hb:e,Xb:n,EG:i,bG:s}}));return t.DG.SG=n,!1===s&&OS(t,i),n}function CS(t){var i=t.ja;if("closed"===i||"errored"===i)return Kt(new b("The stream (in "+i+" state) is not in the writable state and cannot be closed"));var e=Lt((function(i,e){var s={Hb:i,Xb:e};t.TG=s})),s=t.dL;return void 0!==s&&!0===t.IG&&"writable"===i&&aE(s),function(t){DS(t,"close",0),qS(t)}(t.pG),e}function xS(t,i){"writable"!==t.ja?jS(t):OS(t,i)}function OS(t,i){var e=t.pG;t.ja="erroring",t.cG=i;var s=t.dL;void 0!==s&&QS(s,i),!1===function(t){if(void 0===t.MG&&void 0===t.NG)return!1;return!0}(t)&&!0===e.LG&&jS(t)}function jS(t){t.ja="errored",t.pG[SS]();var i=t.cG;if(t.yG.forEach((function(t){t.Xb(i)})),t.yG=new An,void 0!==t.DG){var e=t.DG;if(t.DG=void 0,!0===e.bG)return e.Xb(i),void zS(t);ZI(t.pG[IS](e.EG),(function(){e.Hb(),zS(t)}),(function(i){e.Xb(i),zS(t)}))}else zS(t)}function re(t){return void 0!==t.TG||void 0!==t.NG}function zS(t){void 0!==t.TG&&(t.TG.Xb(t.cG),t.TG=void 0);var i=t.dL;void 0!==i&&eE(i,t.cG)}function PS(t,i){var e=t.dL;void 0!==e&&i!==t.IG&&(!0===i?function(t){nE(t)}(e):aE(e)),t.IG=i}var BS=function(){function t(t){if(!1===kr(t))throw new b("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===st(t))throw new b("This stream has already been locked for exclusive writing by another writer");this.kG=t,t.dL=this;var i=t.ja;if("writable"===i)!1===re(t)&&!0===t.IG?nE(this):hE(this),tE(this);else if("erroring"===i)rE(this,t.cG),tE(this);else if("closed"===i)hE(this),function(t){tE(t),sE(t)}(this);else{var e=t.cG;rE(this,e),iE(this,e)}}return w.defineProperty(t.prototype,"closed",{get:function(){return!1===or(this)?Kt(fr("closed")):this.lC},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===or(this))throw fr("desiredSize");if(void 0===this.kG)throw $S("desiredSize");return function(t){var i=t.kG,e=i.ja;if("errored"===e||"erroring"===e)return null;if("closed"===e)return 0;return HS(i.pG)}(this)},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"ready",{get:function(){return!1===or(this)?Kt(fr("ready")):this.CG},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===or(this)?Kt(fr("abort")):void 0===this.kG?Kt($S("abort")):function(t,i){var e=t.kG;return kS(e,i)}(this,t)},t.prototype.close=function(){if(!1===or(this))return Kt(fr("close"));var t=this.kG;return void 0===t?Kt($S("close")):!0===re(t)?Kt(new b("Cannot close an already-closing stream")):RS(this)},t.prototype.releaseLock=function(){if(!1===or(this))throw fr("releaseLock");void 0!==this.kG&&FS(this)},t.prototype.write=function(t){return!1===or(this)?Kt(fr("write")):void 0===this.kG?Kt($S("write to")):YS(this,t)},t}();function or(t){return!!zt(t)&&!!w.prototype.hasOwnProperty.call(t,"kG")}function RS(t){return CS(t.kG)}function US(t,i){"pending"===t.xG?eE(t,i):function(t,i){iE(t,i)}(t,i)}function QS(t,i){"pending"===t.OG?oE(t,i):function(t,i){rE(t,i)}(t,i)}function FS(t){var i=t.kG,e=new b("Writer was released and can no longer be used to monitor the stream's closedness");QS(t,e),US(t,e),i.dL=void 0,t.kG=void 0}function YS(t,i){var e=t.kG,s=e.pG,n=function(t,i){try{return t.jG(i)}catch(i){return XS(t,i),1}}(s,i);if(e!==t.kG)return Kt($S("write to"));var r=e.ja;if("errored"===r)return Kt(e.cG);if(!0===re(e)||"closed"===r)return Kt(new b("The stream is closing or closed and cannot be written to"));if("erroring"===r)return Kt(e.cG);var h=function(t){return Lt((function(i,e){var s={Hb:i,Xb:e};t.yG.push(s)}))}(e);return function(t,i,e){var s={chunk:i};try{DS(t,s,e)}catch(i){return void XS(t,i)}var n=t.zG;if(!1===re(n)&&"writable"===n.ja){PS(n,ZS(t))}qS(t)}(s,i,n),h}var GS=function(){function t(){throw new b("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){if(!zt(t))return!1;if(!w.prototype.hasOwnProperty.call(t,"zG"))return!1;return!0}(this))throw new b("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.zG.ja&&KS(this,t)},t.prototype[IS]=function(t){var i=this.BG(t);return WS(this),i},t.prototype[SS]=function(){Qu(this)},t}();function VS(t,i,e,s,n,r,h,o){i.zG=t,t.pG=i,i.vG=void 0,i.mG=void 0,Qu(i),i.LG=!1,i.jG=o,i.UG=h,i.QG=s,i.FG=n,i.BG=r;var a=ZS(i);PS(t,a),ZI(le(e()),(function(){i.LG=!0,qS(i)}),(function(e){i.LG=!0,xS(t,e)}))}function WS(t){t.QG=void 0,t.FG=void 0,t.BG=void 0,t.jG=void 0}function HS(t){return t.UG-t.mG}function qS(t){var i=t.zG;if(!1!==t.LG&&void 0===i.MG)if("erroring"!==i.ja){if(0!==t.vG.length){var e=function(t){return t.vG.peek().value}(t);"close"===e?function(t){var i=t.zG;(function(t){t.NG=t.TG,t.TG=void 0})(i),NS(t);var e=t.FG();WS(t),ZI(e,(function(){!function(t){t.NG.Hb(void 0),t.NG=void 0,"erroring"===t.ja&&(t.cG=void 0,void 0!==t.DG&&(t.DG.Hb(),t.DG=void 0)),t.ja="closed";var i=t.dL;void 0!==i&&sE(i)}(i)}),(function(t){!function(t,i){t.NG.Xb(i),t.NG=void 0,void 0!==t.DG&&(t.DG.Xb(i),t.DG=void 0),xS(t,i)}(i,t)}))}(t):function(t,i){var e=t.zG;!function(t){t.MG=t.yG.shift()}(e);var s=t.QG(i);ZI(s,(function(){!function(t){t.MG.Hb(void 0),t.MG=void 0}(e);var i=e.ja;if(NS(t),!1===re(e)&&"writable"===i){var s=ZS(t);PS(e,s)}qS(t)}),(function(i){"writable"===e.ja&&WS(t),function(t,i){t.MG.Xb(i),t.MG=void 0,xS(t,i)}(e,i)}))}(t,e.chunk)}}else jS(i)}function XS(t,i){"writable"===t.zG.ja&&KS(t,i)}function ZS(t){return HS(t)<=0}function KS(t,i){var e=t.zG;WS(t),OS(e,i)}function JS(t){return new b("WritableStream.prototype."+t+" can only be used on a WritableStream")}function fr(t){return new b("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function $S(t){return new b("Cannot "+t+" a stream using a released writer")}function tE(t){t.lC=Lt((function(i,e){t.lG=i,t.dG=e,t.xG="pending"}))}function iE(t,i){tE(t),eE(t,i)}function eE(t,i){$I(t.lC),t.dG(i),t.lG=void 0,t.dG=void 0,t.xG="rejected"}function sE(t){t.lG(void 0),t.lG=void 0,t.dG=void 0,t.xG="resolved"}function nE(t){t.CG=Lt((function(i,e){t.YG=i,t.GG=e})),t.OG="pending"}function rE(t,i){nE(t),oE(t,i)}function hE(t){nE(t),aE(t)}function oE(t,i){$I(t.CG),t.GG(i),t.YG=void 0,t.GG=void 0,t.OG="rejected"}function aE(t){t.YG(void 0),t.YG=void 0,t.GG=void 0,t.OG="fulfilled"}function uE(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var cE="undefined"!=typeof DOMException?DOMException:void 0;var lE=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}(cE)?cE:function(){var t=function(t,i){this.message=t||"",this.name=i||"Error",g.captureStackTrace&&g.captureStackTrace(this,this.constructor)};return t.prototype=w.create(g.prototype),w.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),t}();function dE(t,i,e,s,n,r){var h=cS(t),o=bS(i);t._G=!0;var a=!1,u=le(void 0);return Lt((function(c,l){var d,f,_,g;if(void 0!==r){if(d=function(){var e=new lE("Aborted","AbortError"),r=[];!1===s&&r.push((function(){return"writable"===i.ja?kS(i,e):le(void 0)})),!1===n&&r.push((function(){return"readable"===t.ja?vr(t,e):le(void 0)})),m((function(){return Promise.all(r.map((function(t){return t()})))}),!0,e)},!0===r.aborted)return void d();r.addEventListener("abort",d)}if(v(t,h.lC,(function(t){!1===s?m((function(){return kS(i,t)}),!0,t):p(!0,t)})),v(i,o.lC,(function(i){!1===n?m((function(){return vr(t,i)}),!0,i):p(!0,i)})),f=t,_=h.lC,g=function(){!1===e?m((function(){return function(t){var i=t.kG,e=i.ja;return!0===re(i)||"closed"===e?le(void 0):"errored"===e?Kt(i.cG):RS(t)}(o)})):p()},"closed"===f.ja?g():KI(_,g),!0===re(i)||"closed"===i.ja){var w=new b("the destination writable stream closed before all data could be piped to it");!1===n?m((function(){return vr(t,w)}),!0,w):p(!0,w)}function A(){var t=u;return XI(u,(function(){return t!==u?A():void 0}))}function v(t,i,e){"errored"===t.ja?e(t.cG):JI(i,e)}function m(t,e,s){function n(){ZI(t(),(function(){return y(e,s)}),(function(t){return y(!0,t)}))}!0!==a&&(a=!0,"writable"===i.ja&&!1===re(i)?KI(A(),n):n())}function p(t,e){!0!==a&&(a=!0,"writable"===i.ja&&!1===re(i)?KI(A(),(function(){return y(t,e)})):y(t,e))}function y(t,i){FS(o),kt(h),void 0!==r&&r.removeEventListener("abort",d),t?l(i):c(void 0)}$I(Lt((function(t,i){!function e(s){s?t():XI(!0===a?le(!0):XI(o.CG,(function(){return XI(mS(h),(function(t){return!0===t.done||(u=XI(YS(o,t.value),void 0,OI),!1)}))})),e,i)}(!1)})))}))}var fE=function(){function t(){throw new b}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===_E(this))throw NE("desiredSize");return yE(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===_E(this))throw NE("close");if(!1===ME(this))throw new b("The stream is not in a state that permits close");vE(this)},t.prototype.enqueue=function(t){if(!1===_E(this))throw NE("enqueue");if(!1===ME(this))throw new b("The stream is not in a state that permits enqueue");return mE(this,t)},t.prototype.error=function(t){if(!1===_E(this))throw NE("error");pE(this,t)},t.prototype[aS]=function(t){Qu(this);var i=this.VG(t);return AE(this),i},t.prototype[uS]=function(){var t=this.WG;if(this.vG.length>0){var i=NS(this);return!0===this.HG&&0===this.vG.length?(AE(this),$E(t)):gE(this),le(tS(i,!1,t.uG.oG))}var e=lS(t);return gE(this),e},t}();function _E(t){return!!zt(t)&&!!w.prototype.hasOwnProperty.call(t,"WG")}function gE(t){!1!==wE(t)&&(!0!==t.qG?(t.qG=!0,ZI(t.XG(),(function(){t.qG=!1,!0===t.ZG&&(t.ZG=!1,gE(t))}),(function(i){pE(t,i)}))):t.ZG=!0)}function wE(t){var i=t.WG;return!1!==ME(t)&&(!1!==t.LG&&(!0===Lu(i)&&fS(i)>0||yE(t)>0))}function AE(t){t.XG=void 0,t.VG=void 0,t.jG=void 0}function vE(t){var i=t.WG;t.HG=!0,0===t.vG.length&&(AE(t),$E(i))}function mE(t,i){var e=t.WG;if(!0===Lu(e)&&fS(e)>0)dS(e,i,!1);else{var s=void 0;try{s=t.jG(i)}catch(i){throw pE(t,i),i}try{DS(t,i,s)}catch(i){throw pE(t,i),i}}gE(t)}function pE(t,i){var e=t.WG;"readable"===e.ja&&(Qu(t),AE(t),tb(e,i))}function yE(t){var i=t.WG.ja;return"errored"===i?null:"closed"===i?0:t.UG-t.mG}function ME(t){var i=t.WG.ja;return!1===t.HG&&"readable"===i}function TE(t,i,e,s,n,r,h){i.WG=t,i.vG=void 0,i.mG=void 0,Qu(i),i.LG=!1,i.HG=!1,i.ZG=!1,i.qG=!1,i.jG=h,i.UG=r,i.XG=s,i.VG=n,t.gG=i,ZI(le(e()),(function(){i.LG=!0,gE(i)}),(function(t){pE(i,t)}))}function NE(t){return new b("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}var DE=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&_.floor(t)===t},IE=function(){function t(){throw new b("ReadableStreamBYOBRequest cannot be used directly")}return w.defineProperty(t.prototype,"view",{get:function(){if(!1===EE(this))throw YE("view");return this.rI},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===EE(this))throw YE("respond");if(void 0===this.KG)throw new b("This BYOB request has been invalidated");this.rI.buffer,function(t,i){if(i=Number(i),!1===RI(i))throw new RangeError("bytesWritten must be a finite");PE(t,i)}(this.KG,t)},t.prototype.respondWithNewView=function(t){if(!1===EE(this))throw YE("respond");if(void 0===this.KG)throw new b("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new b("You can only respond with array buffer views");t.buffer,function(t,i){var e=t.JG.peek();if(e.byteOffset+e.bytesFilled!==i.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(e.byteLength!==i.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");e.buffer=i.buffer,PE(t,i.byteLength)}(this.KG,t)},t}(),SE=function(){function t(){throw new b("ReadableByteStreamController constructor cannot be used directly")}return w.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===nt(this))throw GE("byobRequest");if(void 0===this.$G&&this.JG.length>0){var t=this.JG.peek(),i=new j(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),e=w.create(IE.prototype);!function(t,i,e){t.KG=i,t.rI=e}(e,this,i),this.$G=e}return this.$G},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===nt(this))throw GE("desiredSize");return QE(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===nt(this))throw GE("close");if(!0===this.HG)throw new b("The stream has already been closed; do not close it again!");var t=this.tV.ja;if("readable"!==t)throw new b("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var i=t.tV;if(t.mG>0)return void(t.HG=!0);if(t.JG.length>0){if(t.JG.peek().bytesFilled>0){var e=new b("Insufficient bytes to fill elements in the given buffer");throw UE(t,e),e}}RE(t),$E(i)}(this)},t.prototype.enqueue=function(t){if(!1===nt(this))throw GE("enqueue");if(!0===this.HG)throw new b("stream is closed or draining");var i=this.tV.ja;if("readable"!==i)throw new b("The stream (in "+i+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new b("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,i){var e=t.tV,s=i.buffer,n=i.byteOffset,r=i.byteLength,h=s;if(!0===_S(e)){if(0===fS(e))kE(t,h,n,r);else dS(e,new j(h,n,r),!1)}else!0===HE(e)?(kE(t,h,n,r),zE(t)):kE(t,h,n,r);yr(t)}(this,t)},t.prototype.error=function(t){if(!1===nt(this))throw GE("error");UE(this,t)},t.prototype[aS]=function(t){this.JG.length>0&&(this.JG.peek().bytesFilled=0);Qu(this);var i=this.VG(t);return RE(this),i},t.prototype[uS]=function(){var t=this.tV;if(this.mG>0){var i=this.vG.shift();this.mG-=i.byteLength,OE(this);var e=void 0;try{e=new j(i.buffer,i.byteOffset,i.byteLength)}catch(t){return Kt(t)}return le(tS(e,!1,t.uG.oG))}var s=this.iV;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return Kt(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:j,readerType:"default"};this.JG.push(r)}var h=lS(t);return yr(this),h},t}();function nt(t){return!!zt(t)&&!!w.prototype.hasOwnProperty.call(t,"tV")}function EE(t){return!!zt(t)&&!!w.prototype.hasOwnProperty.call(t,"KG")}function yr(t){var i=function(t){var i=t.tV;if("readable"!==i.ja)return!1;if(!0===t.HG)return!1;if(!1===t.LG)return!1;if(!0===_S(i)&&fS(i)>0)return!0;if(!0===HE(i)&&WE(i)>0)return!0;var e=QE(t);if(e>0)return!0;return!1}(t);!1!==i&&(!0!==t.qG?(t.qG=!0,ZI(t.XG(),(function(){t.qG=!1,!0===t.ZG&&(t.ZG=!1,yr(t))}),(function(i){UE(t,i)}))):t.ZG=!0)}function bE(t,i){var e=!1;"closed"===t.ja&&(e=!0);var s=LE(i);"default"===i.readerType?dS(t,s,e):function(t,i,e){var s=t.uG,n=s.eV.shift();n.Hb(tS(i,e,s.oG))}(t,s,e)}function LE(t){var i=t.bytesFilled,e=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,i/e)}function kE(t,i,e,s){t.vG.push({buffer:i,byteOffset:e,byteLength:s}),t.mG+=s}function CE(t,i){var e=i.elementSize,s=i.bytesFilled-i.bytesFilled%e,n=_.min(t.mG,i.byteLength-i.bytesFilled),r=i.bytesFilled+n,h=r-r%e,o=n,a=!1;h>s&&(o=h-i.bytesFilled,a=!0);for(var u=t.vG;o>0;){var c=u.peek(),l=_.min(o,c.byteLength),d=i.byteOffset+i.bytesFilled;BI(i.buffer,d,c.buffer,c.byteOffset,l),c.byteLength===l?u.shift():(c.byteOffset+=l,c.byteLength-=l),t.mG-=l,xE(t,l,i),o-=l}return a}function xE(t,i,e){jE(t),e.bytesFilled+=i}function OE(t){0===t.mG&&!0===t.HG?(RE(t),$E(t.tV)):yr(t)}function jE(t){void 0!==t.$G&&(t.$G.KG=void 0,t.$G.rI=void 0,t.$G=void 0)}function zE(t){for(;t.JG.length>0;){if(0===t.mG)return;var i=t.JG.peek();!0===CE(t,i)&&(BE(t),bE(t.tV,i))}}function PE(t,i){var e=t.JG.peek();if("closed"===t.tV.ja){if(0!==i)throw new b("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,i){i.buffer=i.buffer;var e=t.tV;if(!0===HE(e))for(;WE(e)>0;)bE(e,BE(t))}(t,e)}else!function(t,i,e){if(e.bytesFilled+i>e.byteLength)throw new RangeError("bytesWritten out of range");if(xE(t,i,e),!(e.bytesFilled<e.elementSize)){BE(t);var s=e.bytesFilled%e.elementSize;if(s>0){var n=e.byteOffset+e.bytesFilled,r=e.buffer.slice(n-s,n);kE(t,r,0,r.byteLength)}e.buffer=e.buffer,e.bytesFilled-=s,bE(t.tV,e),zE(t)}}(t,i,e);yr(t)}function BE(t){var i=t.JG.shift();return jE(t),i}function RE(t){t.XG=void 0,t.VG=void 0}function UE(t,i){var e=t.tV;"readable"===e.ja&&(!function(t){jE(t),t.JG=new An}(t),Qu(t),RE(t),tb(e,i))}function QE(t){var i=t.tV.ja;return"errored"===i?null:"closed"===i?0:t.UG-t.mG}function FE(t,i,e){var s=w.create(SE.prototype);var n=Gu(i,"pull",0,[s]),r=Gu(i,"cancel",1,[]),h=i.autoAllocateChunkSize;if(void 0!==h&&(h=Number(h),!1===DE(h)||h<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,i,e,s,n,r,h){i.tV=t,i.ZG=!1,i.qG=!1,i.$G=void 0,i.vG=i.mG=void 0,Qu(i),i.HG=!1,i.LG=!1,i.UG=YI(r),i.XG=s,i.VG=n,i.iV=h,i.JG=new An,t.gG=i,ZI(le(e()),(function(){i.LG=!0,yr(i)}),(function(t){UE(i,t)}))}(t,s,(function(){return QI(i,"start",[s])}),n,r,e,h)}function YE(t){return new b("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function GE(t){return new b("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function VE(t){return Lt((function(i,e){var s={Hb:i,Xb:e};t.uG.eV.push(s)}))}function WE(t){return t.uG.eV.length}function HE(t){var i=t.uG;return void 0!==i&&!!XE(i)}var qE=function(){function t(t){if(!te(t))throw new b("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===nt(t.gG))throw new b("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(Lu(t))throw new b("This stream has already been locked for exclusive reading by another reader");iS(this,t),this.eV=new An}return w.defineProperty(t.prototype,"closed",{get:function(){return XE(this)?this.lC:Kt(ZE("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return XE(this)?void 0===this.aG?Kt(sS("cancel")):eS(this,t):Kt(ZE("cancel"))},t.prototype.read=function(t){return XE(this)?void 0===this.aG?Kt(sS("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?Kt(new b("view must have non-zero byteLength")):function(t,i){var e=t.aG;if(e._G=!0,"errored"===e.ja)return Kt(e.cG);return function(t,i){var e=t.tV,s=1;i.constructor!==DataView&&(s=i.constructor.BYTES_PER_ELEMENT);var n=i.constructor,r={buffer:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.JG.length>0)return t.JG.push(r),VE(e);if("closed"===e.ja)return le(tS(new n(r.buffer,r.byteOffset,0),!0,e.uG.oG));if(t.mG>0){if(!0===CE(t,r)){var h=LE(r);return OE(t),le(tS(h,!1,e.uG.oG))}if(!0===t.HG){var o=new b("Insufficient bytes to fill elements in the given buffer");return UE(t,o),Kt(o)}}t.JG.push(r);var a=VE(e);return yr(t),a}(e.gG,i)}(this,t)):Kt(new b("view must be an array buffer view")):Kt(ZE("read"))},t.prototype.releaseLock=function(){if(!XE(this))throw ZE("releaseLock");if(void 0!==this.aG){if(this.eV.length>0)throw new b("Tried to release a reader lock when that reader has pending read() calls un-settled");kt(this)}},t}();function XE(t){return!!zt(t)&&!!w.prototype.hasOwnProperty.call(t,"eV")}function ZE(t){return new b("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var P=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),JE(this);var e=i.size,s=i.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==e)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),FE(this,t,s=YI(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=GI(e);void 0===s&&(s=1),function(t,i,e,s){var n=w.create(fE.prototype),r=Gu(i,"pull",0,[n]),h=Gu(i,"cancel",1,[]);TE(t,n,(function(){return QI(i,"start",[n])}),r,h,e,s)}(this,t,s=YI(s),r)}}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===te(this))throw lr("locked");return Lu(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===te(this)?Kt(lr("cancel")):!0===Lu(this)?Kt(new b("Cannot cancel a stream that already has a reader")):vr(this,t)},t.prototype.getReader=function(t){var i=(void 0===t?{}:t).mode;if(!1===te(this))throw lr("getReader");if(void 0===i)return cS(this,!0);if("byob"===(i=String(i)))return function(t,i){void 0===i&&(i=!1);var e=new qE(t);return e.oG=i,e}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,i){var e=t.writable,s=t.readable,n=void 0===i?{}:i,r=n.preventClose,h=n.preventAbort,o=n.preventCancel,a=n.signal;if(!1===te(this))throw lr("pipeThrough");if(!1===kr(e))throw new b("writable argument to pipeThrough must be a WritableStream");if(!1===te(s))throw new b("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),h=Boolean(h),o=Boolean(o),void 0!==a&&!uE(a))throw new b("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===Lu(this))throw new b("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===st(e))throw new b("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return $I(dE(this,e,r,h,o,a)),s},t.prototype.pipeTo=function(t,i){var e=void 0===i?{}:i,s=e.preventClose,n=e.preventAbort,r=e.preventCancel,h=e.signal;return!1===te(this)?Kt(lr("pipeTo")):!1===kr(t)?Kt(new b("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===h||uE(h)?!0===Lu(this)?Kt(new b("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===st(t)?Kt(new b("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):dE(this,t,s,n,r,h):Kt(new b("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===te(this))throw lr("tee");var t=function(t,i){var e,s,n,r,h,o=cS(t),a=!1,u=!1,c=!1,l=Lt((function(t){h=t}));function d(){return!0===a||(a=!0,$I(br(mS(o),(function(t){if(a=!1,!0===t.done)return!1===u&&vE(n.gG),void(!1===c&&vE(r.gG));var i=t.value,e=i,s=i;!1===u&&mE(n.gG,e),!1===c&&mE(r.gG,s)})))),le(void 0)}function f(){}return n=KE(f,d,(function(i){if(u=!0,e=i,!0===c){var n=PI([e,s]),r=vr(t,n);h(r)}return l})),r=KE(f,d,(function(i){if(c=!0,s=i,!0===u){var n=PI([e,s]),r=vr(t,n);h(r)}return l})),JI(o.lC,(function(t){pE(n.gG,t),pE(r.gG,t)})),[n,r]}(this);return PI(t)},t.prototype.getIterator=function(t){var i=(void 0===t?{}:t).preventCancel,e=void 0!==i&&i;if(!1===te(this))throw lr("getIterator");return function(t,i){void 0===i&&(i=!1);var e=cS(t),s=w.create(yS);return s.wG=e,s.AG=Boolean(i),s}(this,e)},t}();function KE(t,i,e,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=w.create(P.prototype);return JE(r),TE(r,w.create(fE.prototype),t,i,e,s,n),r}function JE(t){t.ja="readable",t.uG=void 0,t.cG=void 0,t._G=!1}function te(t){return!!zt(t)&&!!w.prototype.hasOwnProperty.call(t,"gG")}function Lu(t){return void 0!==t.uG}function vr(t,i){return t._G=!0,"closed"===t.ja?le(void 0):"errored"===t.ja?Kt(t.cG):($E(t),br(t.gG[aS](i),OI))}function $E(t){t.ja="closed";var i=t.uG;void 0!==i&&(vS(i)&&(i.fG.forEach((function(t){t.Hb(tS(void 0,!0,i.oG))})),i.fG=new An),oS(i))}function tb(t,i){t.ja="errored",t.cG=i;var e=t.uG;void 0!==e&&(vS(e)?(e.fG.forEach((function(t){t.Xb(i)})),e.fG=new An):(e.eV.forEach((function(t){t.Xb(i)})),e.eV=new An),hS(e,i))}function lr(t){return new b("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof xI.asyncIterator&&w.defineProperty(P.prototype,xI.asyncIterator,{value:P.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});!function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}t.prototype.size=function(t){return t.byteLength}}();var ib=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(){return 1},t}(),qa=function(){function t(t,i,e){void 0===t&&(t={}),void 0===i&&(i={}),void 0===e&&(e={});var s=i.size,n=i.highWaterMark,r=e.size,h=e.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var o=GI(s);if(void 0===n&&(n=1),n=YI(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=GI(r);void 0===h&&(h=0),h=YI(h),function(t,i,e,s,n,r){function h(){return i}function o(i){return function(t,i){var e=t.sV;if(!0===t.IG){return br(t.nV,(function(){var s=t.rV;if("erroring"===s.ja)throw s.cG;return cb(e,i)}))}return cb(e,i)}(t,i)}function a(i){return function(t,i){return sb(t,i),le(void 0)}(t,i)}function u(){return function(t){var i=t.hV,e=t.sV,s=e.oV();return ab(e),br(s,(function(){if("errored"===i.ja)throw i.cG;var t=i.gG;!0===ME(t)&&vE(t)}),(function(e){throw sb(t,e),i.cG}))}(t)}function c(){return function(t){return rb(t,!1),t.nV}(t)}function l(i){return nb(t,i),le(void 0)}t.rV=function(t,i,e,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var h=w.create(ES.prototype);return LS(h),VS(h,w.create(GS.prototype),t,i,e,s,n,r),h}(h,o,u,a,e,s),t.hV=KE(h,c,l,n,r),t.IG=void 0,t.nV=void 0,t.aV=void 0,rb(t,!0),t.sV=void 0}(this,Lt((function(t){a=t})),n,o,h,u),function(t,i){var e=w.create(hb.prototype),s=function(t){try{return ub(e,t),le(void 0)}catch(t){return Kt(t)}},n=i.transform;if(void 0!==n){if("function"!=typeof n)throw new b("transform is not a method");s=function(t){return FI(n,i,[t,e])}}var r=Gu(i,"flush",0,[e]);!function(t,i,e,s){i.uV=t,t.sV=i,i.cV=e,i.oV=s}(t,e,s,r)}(this,t);var c=QI(t,"start",[this.sV]);a(c)}return w.defineProperty(t.prototype,"readable",{get:function(){if(!1===eb(this))throw db("readable");return this.hV},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"writable",{get:function(){if(!1===eb(this))throw db("writable");return this.rV},enumerable:!0,configurable:!0}),t}();function eb(t){return!!zt(t)&&!!w.prototype.hasOwnProperty.call(t,"sV")}function sb(t,i){pE(t.hV.gG,i),nb(t,i)}function nb(t,i){ab(t.sV),XS(t.rV.pG,i),!0===t.IG&&rb(t,!1)}function rb(t,i){void 0!==t.nV&&t.aV(),t.nV=Lt((function(i){t.aV=i})),t.IG=i}var hb=function(){function t(){throw new b("TransformStreamDefaultController instances cannot be created directly")}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===ob(this))throw lb("desiredSize");return yE(this.uV.hV.gG)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===ob(this))throw lb("enqueue");ub(this,t)},t.prototype.error=function(t){if(!1===ob(this))throw lb("error");!function(t,i){sb(t.uV,i)}(this,t)},t.prototype.terminate=function(){if(!1===ob(this))throw lb("terminate");!function(t){var i=t.uV,e=i.hV.gG;!0===ME(e)&&vE(e);var s=new b("TransformStream terminated");nb(i,s)}(this)},t}();function ob(t){return!!zt(t)&&!!w.prototype.hasOwnProperty.call(t,"uV")}function ab(t){t.cV=void 0,t.oV=void 0}function ub(t,i){var e=t.uV,s=e.hV.gG;if(!1===ME(s))throw new b("Readable side is not in a state that permits enqueue");try{mE(s,i)}catch(t){throw nb(e,t),e.hV.cG}var n=function(t){return!0!==wE(t)}(s);n!==e.IG&&rb(e,!0)}function cb(t,i){return br(t.cV(i),void 0,(function(i){throw sb(t.uV,i),i}))}function lb(t){return new b("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function db(t){return new b("TransformStream.prototype."+t+" can only be used on a TransformStream")}var fb,_b=class extends hs{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=t}};function gb(t){return function(t){return new P({start(i){for(const e of t)i.enqueue(e);i.close()}})}([t])}function wb(t){return gb(function(t){return new j(t)}(t))}function Ot(t,i){return function(t,i){let e=i;const s=t.getReader(),n=new Rs,r=()=>{h();const t=new pe;s.cancel(t).catch(qt),n.qb(t)},h=()=>{e&&(e.Yd(r),e=void 0)};e&&(e.zd?r():e.Fd(r));const o=[],a=t=>t.done?(h(),Promise.resolve(o)):(o.push(t.value),Promise.resolve(s.read()).then(a));return Promise.resolve(s.read()).then(a).then((t=>{h(),n.Wb(t)}),(t=>{h(),n.qb(t)})),n.Zb}(t,i).then((t=>m_(t).buffer))}function Ab(t,i){let e=i;const{readable:s,writable:n}=new qa,r=n.getWriter(),h=()=>{e&&e.qd()};return r.closed.then(h,h),t.then((t=>(e=void 0,r.releaseLock(),t.pipeTo(n).catch(qt))),(t=>(e=void 0,r.releaseLock(),n.abort(t).catch(qt)))),s}function vb(t){const{readable:i,writable:e}=new qa;return t.pipeTo(e,{preventCancel:!0}).catch((i=>{let e;e=Gt(i)?i[0]===i[1]||Ho(i[0])&&Ho(i[1])?i[0]:new _b(i):i,t.cancel(e).catch(qt)})),i.tee()}function mb(t){return Fa(new j(t))}function pb(t){return cg(t).buffer}!function(t){t[t.VI=0]="VI",t[t.lV=1]="lV"}(fb||(fb={}));var yb="content-type",Mb="text/plain;charset=UTF-8",Tb=class{WO(t){return this.DS(t).then(JSON.parse)}DO(t,i){switch(t){case Qv.YI:return this.cj(i);case Qv.GI:return this.WO(i);case Qv.VI:return this.dV();case Qv.Ru:return this.DS(i);default:throw new b}}};function Nb(t,i,e){if(t instanceof Tb)return t;if(t instanceof P)return function(t,i){return new Ib({Rg:0,dV:t,qz:Db(i)})}(t,e);const s=Db(e),n=Promise.resolve(t).then((t=>function(t,i){if(t){if("string"==typeof t)return{Rg:Qv.Ru,cS:t,qz:i||Mb};if(t instanceof ArrayBuffer||Aa(t))return{Rg:Qv.YI,cS:xb(t),qz:i};if(Ic(t)||Gt(t))return{Rg:Qv.GI,cS:t,qz:i};throw new b("Unsupported BodyInit type")}return{Rg:Qv.Ru,cS:null,qz:i}}(t,s)));return new Ib({Rg:1,Zb:n,fV:i})}function Db(t){return(t.get(yb)||"").toLowerCase()}var Ib=class t extends Tb{get _V(){return this.gV}get wV(){return 0===this.AV.Rg}vV(){return this.mV.Zb}DS(t){return this.pV(Sb,t)}WO(t){return this.pV(bb,t)}cj(t){return this.pV(kb,t)}dV(){return this.yV(function(t){return 0===t.Rg?t.dV:Ab(t.Zb.then(Cb).then(wb),t.fV)}(this.AV))}pV(t,i){if(this.gV)return Promise.reject(new b("Already used"));this.gV=!0;const e=t(this.AV,i);return this.mV.Xd(e.then(qt)),e}yV(t){if(this.gV)throw new b("Already used");if(t.locked)throw new b("Body stream is locked");this.gV=!0;const i=new qa,e=Promise.resolve(t.pipeTo(i.writable));return this.mV.Xd(e),i.readable}MV(t){this.AV=t,1===t.Rg&&t.Zb.catch(qt)}TV(){if(this.gV)throw new b("Already used");const i=function(t){if(0===t.Rg){const[i,e]=t.dV.tee();return[{Rg:t.Rg,dV:i,qz:t.qz},{Rg:t.Rg,dV:e,qz:t.qz}]}{const[i,e]=t.fV.Zd();return[{Rg:t.Rg,Zb:t.Zb,fV:i},{Rg:t.Rg,Zb:t.Zb,fV:e}]}}(this.AV),e=i[0],s=i[1];return this.MV(e),new t(s)}constructor(t){super(),this.gV=!1,this.mV=new Rs,this.mV.Zb.catch(qt),this.MV(t)}};function Sb(t,i){return 0===t.Rg?Ot(t.dV,i).then(mb):(i&&t.fV.Xd(i),rn(t.Zb.then(Eb),t.fV))}function Eb(t){switch(t.Rg){case Qv.Ru:return Promise.resolve(t.cS||"");case Qv.YI:return Promise.resolve(t.cS).then(mb);case Qv.GI:return Promise.resolve(t.cS).then(JSON.stringify)}}function bb(t,i){return 0===t.Rg?Sb(t,i).then(JSON.parse):(i&&t.fV.Xd(i),rn(t.Zb.then(Lb),t.fV))}function Lb(t){return t.Rg===Qv.GI?Promise.resolve(t.cS):Eb(t).then(JSON.parse)}function kb(t,i){return 0===t.Rg?Ot(t.dV,i):(i&&t.fV.Xd(i),rn(t.Zb.then(Cb),t.fV))}function Cb(t){switch(t.Rg){case Qv.YI:return Promise.resolve(t.cS);case Qv.Ru:case Qv.GI:return Eb(t).then(pb)}}function xb(t){return t instanceof ArrayBuffer?t:Dt(Kn(t)).buffer}var Ob=class extends Tb{get _V(){return this.NV._V}get wV(){return this.NV.wV}vV(){return this.NV.vV()}DS(t){return this.NV.DS(t)}WO(t){return this.NV.WO(t)}cj(t){return this.NV.cj(t)}dV(t){return this.NV.dV(t)}TV(){return this.NV.TV()}constructor(t){super(),this.NV=t}};function mr(t){return t.kI>=200&&t.kI<=299||304===t.kI}var _h=class t extends Ob{zm(t){return this.DO(this.fS,t)}Em(){return new t({zm:this.TV(),SI:this.SI},this)}constructor(t,i){let e,s,n,r,h;i?(e=i.lS,s=i.fS,n=i.kI,r=i.HO,h=i.DV):(e=[],s=Qv.Ru,n=200,r="OK",h=!1);const o=t.SI,a=new vo(t.lS||e),u=t.fS||s,c=t.IS||(i&&i.SI===o?i.IS:o.zu),l=i?i.NV:null;super(Nb(void 0!==t.zm?t.zm:l,t.fV||new na,a)),this.lS=a,this.SI=o,this.IS=c,this.fS=u,this.kI=void 0!==t.kI?t.kI:n,this.HO=void 0!==t.HO?String(t.HO):r,this.DV=t.DV||h}},jb=class{SI(t){const i=function(t){return new _h({zm:null,lS:{},SI:t,IS:t.zu,fS:t.fS,kI:0,HO:l.fw})}(new zu(t));return Promise.resolve(i)}ZF(t){}gn(){}};var zb=class t{static get SV(){return t.EV||(t.EV=new t(new jb)),t.EV}SI(t){const i=this.bV(t);return this.LV.SI(i)}ZF(t){return this.LV.ZF(this.kV(t))}bV(i){let e=new zu(i);if(!this.CV){const i=t.xV(e.zu);e=new zu({zu:i},e)}return e}kV(i){let e=i.zu;return this.CV||(e=t.xV(e)),{zu:e,cS:i.cS}}static xV(t){return i.OV&&At(t,"http://")?t.replace(":","s:"):t}gn(){this.LV.gn()}constructor(t,i=!0){this.LV=t,this.CV=i}};function Pb(t){let i;return{get url(){return t.zu},get method(){return t.dS},get headers(){return i||(i=t.lS.WI()),i},get body(){return t.cS},get useCredentials(){return t.AS},get type(){return t.Rg},get subType(){return t.gS},get mediaType(){return t.wS},get responseType(){return t.fS}}}function Bb(t){switch(t.toLowerCase()){case"arraybuffer":return Qv.YI;case"json":return Qv.GI;case"stream":return Qv.VI;default:return Qv.Ru}}function Rb(t){switch(t.toUpperCase()){case"POST":return Ys.POST;case"PUT":return Ys.PUT;case"DELETE":return Ys.DELETE;case"HEAD":return Ys.HEAD;case"OPTIONS":return Ys.OPTIONS;default:return Ys.GET}}function Ub(t){switch(t.toLowerCase()){case"manifest":return Ou.XI;case"segment":return Ou.ZI;case"preload-hint":return Ou.KI;case"content-protection":return Ou.JI;default:return Ou.rT}}function Qb(t){switch(t.toLowerCase()){case"initialization-segment":return jo.$I;case"fairplay-license":return jo.tS;case"fairplay-certificate":return jo.iS;case"widevine-license":return jo.eS;case"widevine-certificate":return jo.sS;case"playready-license":return jo.nS;case"clearkey-license":return jo.rS;case"aes128-key":return jo.hS;default:return jo.rT}}function Fb(t){switch(t.toLowerCase()){case"audio":return Re.ym;case"video":return Re.pm;case"text":return Re.Ru;case"image":return Re.nT;default:return Re.rT}}zb.EV=void 0;var Yb=class{get jV(){return this.zV.Zb}get va(){return this.Xa||(this.Xa=this.PV()),this.Xa}get BV(){return this.RV}get QV(){return!this.RV}get FV(){return this.YV>0}get bI(){return this.LI}Jm(){this.RV=!0,this.zV.Wb(null)}GV(){this.zV.qb(new _b(this.VV))}WV(t){if(!this.QV)throw new b("Cannot respond more than once");if(!$l(t))throw new b("Expected valid response");this.LI=this.HV(t),this.Jm()}qV(){try{const t=this.XV(this.va);t?this.ZV(t):this.FV||this.BV||this.Jm()}catch(t){this.VV.push(t),this.GV()}}ZV(t){if(this.BV)throw new g("Request has been redirected or a response already exists");if(Ka(t))this.KV(t);else{if("function"!=typeof t)throw new b("Expected promise or function");{const i=new Rs,e=t=>{t?i.qb(t):i.Wb(void 0)};try{const s=t(e);Ka(s)&&i.Xd(s)}catch(t){i.qb(t)}this.KV(i.Zb)}}}async KV(t){try{this.YV++,await t,this.YV--,this.FV||this.BV||(this.VV.length?this.GV():this.Jm())}catch(t){this.YV--,this.VV.push(t),this.FV||this.BV||this.GV()}}constructor(t,i){this.JV=t,this.XV=i,this.zV=new Rs,this.VV=[],this.Xa=void 0,this.RV=!1,this.LI=void 0,this.YV=0}},Gb=class t extends Yb{get cS(){return this.$V}get lS(){return this.JV.lS}get SI(){return this.JV.SI}get bI(){return this.LI}get kI(){return this.JV.kI}get HO(){return this.JV.HO}get zu(){return this.JV.IS}static tW(t,i,e){const s=void 0===t.body?e:t.body;return new _h({zm:s,SI:i.SI,fS:i.SI.fS,lS:t.headers,kI:t.status,HO:t.statusText,IS:t.url,DV:!0},i)}PV(){return function(t){let i;const e=Pb(t.SI);return{get closed(){return!t.QV},get request(){return e},get url(){return t.zu},get status(){return t.kI},get statusText(){return t.HO},get headers(){return i||(i=t.lS.WI()),i},get body(){return t.cS},respondWith:i=>t.WV(i),waitUntil:i=>t.ZV(i)}}(this)}HV(i){return t.tW(i,this.JV,this.$V)}constructor(t,i,e){super(t,i),this.$V=e,this.qV()}},Vb=class extends Yb{get cS(){return this.JV.cS}get QV(){return this.iW&&!this.RV}get lS(){return this.JV.lS}get dS(){return this.JV.dS}get eW(){return this.sW}get bI(){return this.LI}get fS(){return this.JV.fS}get CI(){return this.JV.CI}get _S(){return this.JV._S}get Wd(){return this.JV.Wd}get Rg(){return this.JV.Rg}get gS(){return this.JV.gS}get wS(){return this.JV.wS}get zu(){return this.JV.zu}get AS(){return this.JV.AS}get mS(){return this.JV.mS}get vS(){return this.JV.vS}get jg(){return this.JV.jg}PV(){return function(t){let i;return{get url(){return t.zu},get method(){return t.dS},get headers(){return i||(i=t.lS.WI()),i},get body(){return t.cS},get closed(){return!t.QV},get useCredentials(){return t.AS},get type(){return t.Rg},get subType(){return t.gS},get mediaType(){return t.wS},get responseType(){return t.fS},redirect:i=>t.nW(i),respondWith:i=>t.WV(i),waitUntil:i=>t.ZV(i)}}(this)}HV(t){const i=this.JV.cS,e=new _h({zm:i,lS:{},SI:this.JV,IS:this.JV.zu,fS:this.JV.fS,kI:200,HO:"OK"});return Gb.tW(t,e,i)}nW(t){if(!this.QV)throw new b("Cannot redirect, already redirected or has a response");let i;i=Qs(t)?{url:t}:t,this.sW=function(t,i){return new zu({zu:void 0===t.url?i.zu:t.url,dS:void 0!==t.method?Rb(t.method):void 0,lS:t.headers,cS:t.body,AS:t.useCredentials,Rg:void 0!==t.type?Ub(t.type):void 0,gS:void 0!==t.subType?Qb(t.subType):void 0,wS:void 0!==t.mediaType?Fb(t.mediaType):void 0,fS:void 0!==t.responseType?Bb(t.responseType):void 0},i)}(i,this.JV),this.Jm()}constructor(t,i,e){super(t,i),this.sW=void 0,this.iW=e,this.qV()}};var fa,Wb=class extends zb{rW(t){this.hW.rW(t)}oW(t){this.hW.oW(t)}aW(t){this.hW.aW(t)}LU(t){this.hW.LU(t)}OU(t){this.hW.OU(t)}constructor(t,i=!0){const e=new Hb(t);super(e,i),this.hW=e}},Hb=class{async SI(t){let i;try{i=await this.uW(t,t.Wd)}catch(i){if(i instanceof Ht)return await this.cW(i,t.Wd);throw i}if(i=await this.lW(i,t.Wd),mr(i))return i;throw new Et(i)}ZF(t){return this.LV.ZF(t)}async uW(t,i){Bo(i);let e,s=t;for(const t of this.dW.slice()){Bo(i);const n=new Vb(s,t,!e);if(!n.BV)try{await n.jV}catch(t){0;continue}n.eW&&!e?s=n.eW:n.bI&&!e&&(e=n.bI)}return e||this.LV.SI(s)}async cW(t,i){let e;if(t instanceof Et)e=t.bI;else{const i=t.SI;e=new _h({zm:null,SI:i,fS:i.fS,kI:0,HO:""})}const s=await this.lW(e,i);if(s===e)throw t;if(mr(s))return s;throw new Et(s)}async lW(t,i){let e=t;for(const t of this.fW.slice()){Bo(i);const s=await Promise.resolve(e.Em().zm(i)),n=new Gb(e,t,s);if(!n.BV)try{await n.jV}catch(t){0;continue}e=n.bI||e}return e}rW(t){this.dW.unshift(t)}oW(t){this.dW.push(t)}aW(t){To(this.dW,t)}LU(t){this.fW.unshift(t)}OU(t){To(this.fW,t)}gn(){this.LV.gn(),No(this.dW),No(this.fW)}constructor(t){this.dW=[],this.fW=[],this.LV=t}},qb=class{get va(){return this.Xa||(this.Xa=function(t){return{addRequestInterceptor(i){t.rW(i)},removeRequestInterceptor(i){t.aW(i)},addResponseInterceptor(i){t.LU(i)},removeResponseInterceptor(i){t.OU(i)}}}(this)),this.Xa}rW(t){this.NS.rW(t)}aW(t){this.NS.aW(t)}LU(t){this.NS.LU(t)}OU(t){this.NS.OU(t)}constructor(t){this.NS=t}},Xb=class extends xd{get va(){return this.Xa||(this.Xa=function(t){return{get online(){return t.Uf},get estimator(){return function(t){return{get bandwidth(){return t.wz},get roundTripTime(){return t.Az}}}(t._W)},setEstimator(i){t.gW(function(t){if(!t)return;return{get wz(){return Xd(t.bandwidth)},get Az(){return Xd(t.roundTripTime)},vz:i=>function(t){if(!t)return;return{wW(i){t.markRequestStart(i)},AW(i){t.markResponseStart(i)},vW(i,e){t.markResponseData(i,e)},mW(i){t.markResponseEnd(i)}}}(t.createMeasurer(Pb(i)))}}(i))},addRequestInterceptor(i){t.rW(i)},removeRequestInterceptor(i){t.aW(i)},addResponseInterceptor(i){t.LU(i)},removeResponseInterceptor(i){t.OU(i)},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}(this)),this.Xa}get Uf(){return this.pW.Uf}get _W(){return this.PB._W}gW(t){this.PB.gW(t)}rW(t){this.NS.rW(t)}aW(t){this.NS.aW(t)}LU(t){this.NS.LU(t)}OU(t){this.NS.OU(t)}gn(){this.Vo(),this.pW.fn(l._w,this.yW),this.pW.fn(l.fw,this.MW)}constructor(t,i,e){super(i),this.pW=t,this.NS=i,this.PB=e,this.yW=t=>{this.Co(t)},this.MW=t=>{this.Co(t)},this.pW.yn(l._w,this.yW),this.pW.yn(l.fw,this.MW)}};!function(t){t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth"}(fa||(fa={}));function Zb(t,i,e,s,n,r){const h=[];let o=t-_.max(r,1),a=t+n;if(i&&e){const t=ks(e,1,5),s=i-t;o=_.min(o,s);const n=i+e+t;a=_.max(a,n)}0!==o&&s.wB(0,o)&&h.push([0,o]);return s.wB(a,1/0)&&h.push([a,1/0]),h}function Kb(t){return t instanceof g&&"QuotaExceededError"===t.name}var Jb={type:fa.BANDWIDTH};function $b(t){const i=Oi(Jb);return Qs(t)?i.type=tL(t):$l(t)&&function(t){switch(t){case fa.PERFORMANCE:case fa.QUALITY:case fa.BANDWIDTH:return!0;default:return!1}}(t.type)&&(i.type=tL(t.type)),$l(t)&&$l(t.metadata)&&(i.metadata=function(t){const i={},e=Mh(t.bitrate);return S(e)||(i.bitrate=e),i}(t.metadata)),i}function tL(t){switch(t){case"bandwidth":return fa.BANDWIDTH;case"performance":return fa.PERFORMANCE;case"quality":return fa.QUALITY}}var iL=class extends wn{constructor(t){super("TW"),this.NW=t}},eL=class extends wn{constructor(t){super("DW"),this.IW=t}},sL=class extends wn{constructor(t){super("SW"),this.EW=t}},nL=class extends xd{bW(t){this.LW=t}get kW(){switch(this.xW.type){case fa.PERFORMANCE:return 0;case fa.QUALITY:return 1/0;case fa.BANDWIDTH:return this.xW.metadata&&void 0!==this.xW.metadata.bitrate?this.xW.metadata.bitrate:Yo.Ib.ez();default:return Yo.Ib.ez()}}get va(){return this.Xa}get IW(){return this.xW}set IW(t){this.xW=t,this.Co(new eL(t))}get NW(){return this.OW}set NW(t){this.OW=t,this.Co(new iL(t))}get jW(){return _.min(this.OW,this.zW)}get EW(){return this.PW}set EW(t){this.PW=t,this.Co(new sL(t))}get BW(){return this.zW}get _W(){var t;return null!=(t=this.RW)?t:this.LW.Vz}gW(t){this.RW=t}UW(t){let i=_.min(t,.8*this.zW);if(i=_.max(10,i),this.zW===i)return!1;const e=this.jW;this.zW=i;const s=this.jW;return s!==e&&this.Co(new iL(s)),!0}get QW(){return this.FW}set QW(t){this.FW=t}constructor(...t){super(...t),this.Xa=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.IW)},set strategy(i){t.IW=$b(i)},get targetBuffer(){return t.NW},set targetBuffer(i){const e=Mh(i);S(e)||(t.NW=e)},get bufferLookbackWindow(){return t.EW},set bufferLookbackWindow(i){const e=Mh(i);S(e)||(t.EW=e<=0?30:e)},get maxBufferLength(){return t.BW},get clearBufferWhenSettingTargetQuality(){return t.QW},set clearBufferWhenSettingTargetQuality(i){t.QW=ln(i)}}}(this),this.xW=Jb,this.OW=20,this.PW=30,this.zW=1/0,this.FW=!1,this.RW=void 0}},rL=class extends yo{fa(){return new hL}constructor(){super("W_")}},hL=class extends wn{constructor(){super("change")}},oL=class extends xd{gn(){this.Vo();for(const t of this.HB)this.YW.fn(t,this.GW)}constructor(t,i,e){super(e),this.GW=t=>{zd(t)&&Hu((()=>{this.Co(t.va)}))},this.YW=t,this.HB=i;for(const t of this.HB)this.YW.yn(t,this.GW)}},Ro=class extends Mo{gn(){this.Vo(),this.YW.cf(this.GW)}constructor(t,i){super(i),this.GW=t=>{zd(t)&&Hu((()=>{this.Co(t.va)}))},this.YW=t,this.YW.sf(this.GW)}};var aL=class extends Mo{get GT(){return this.tN}set GT(t){if(this.VT<=t)throw new g("Start time of a clip should be smaller than the end time.");this.tN!==t&&(this.tN=t,this.Co(new rL))}get VT(){return this.sN}set VT(t){if(t<=this.GT)throw new g("End time of a clip should be larger than the start time.");this.sN!==t&&(this.sN=t,this.Co(new rL))}get va(){return this.Xa||(this.Xa=function(t){let i,e={get startTime(){return t.GT},set startTime(i){t.GT=i},get endTime(){return t.VT},set endTime(i){t.VT=i},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Ro(t,e),e}(this)),this.Xa}tr(){0===this.tN&&this.sN===1/0||(this.tN=0,this.sN=1/0,this.Co(new rL))}VW(){return new Ai([this.GT,this.VT],[!0,!0])}constructor(...t){super(...t),this.tN=0,this.sN=1/0}},uL=class t extends jd{Nf(t){const i=this.WW.VW().rB(t);super.Nf(i),this.HW()}Sf(){return super.Sf()||this.qW}get XW(){return this.i_().length?this.i_():this.WW.VW().ks()}i_(){return Ai.xn(super.i_()).Sn(this.WW.VW()).ks()}p_(){this.Sf()?this.Nf(this.XW.start(0)):this.ZW(),super.p_(),this.HW()}async ga(t,i){Bo(i),this.qW=!1,this.WW.tr(),await super.ga(t,i)}gn(){return this.WW.fn("W_",this.KW),this._f.fn(l.Sw,this.wc),this.JW(),super.gn()}E_(t){switch(t.type){case l.yw:return this.Co(t),this.$W(),!0;case l.pw:case l.Zg:return this.Co(t),this.tH(),!0;case l.Jg:if(this.iH)return!0}return super.E_(t)}get iH(){return this.WW.VT<this.ct}JW(){this.eH&&(nn(this.eH),this.eH=void 0)}HW(){const i=this.Mf,e=this.iH&&i>=this.WW.VT-t.Zl;this.qW&&!e?(this.qW=!1,this.Ff&&this.p_()):this.qW||!e||this.e_||this.sH||(this.qW=!0,this.Co(new ee(i)),this.m_())}ZW(){if(this.ct===1/0)return;const i=this.XW,e=Ai.xn(i).rB(this.Mf);ku(this.Mf,e,t.Zl)||this.Nf(e)}constructor(i,e){super(i),this.qW=!1,this.eH=void 0,this.sH=!1,this.KW=()=>{this.ZW(),this.HW()},this.wc=()=>{this.JW(),this.HW();this.iH&&this.Mf>=this.WW.VT-t.nH&&!this.If&&(this.eH=Ur(this.wc))},this.$W=()=>{this.sH=!0},this.tH=()=>{this.sH&&(this.sH=!1,this.HW())},this.WW=e,this.WW.yn("W_",this.KW),this._f.yn(l.Sw,this.wc)}};uL.nH=1,uL.Zl=.001;var cL=class{get rH(){return this.hH}set rH(t){this.hH=t}constructor(){this.hH=!1}},lL=class extends jd{Sf(){return!this.hH.rH&&super.Sf()}m_(){this.oH=!0,super.m_()}p_(){this.oH=!1,super.p_()}E_(t){if(this.hH.rH)switch(t.type){case l.Jg:return this.Mf=0,this.oH||(this.e_?this.aH=!0:this.p_()),!0;case l.pw:this.aH&&(this.aH=!1,this.p_());break;case l.Sh:if(this.aH||super.Sf())return!0}return super.E_(t)}constructor(t,i){super(t),this.aH=!1,this.oH=!1,this.hH=i}};var dL=class{get va(){return this.Xa}get AT(){return this.Qo.jf.AT}get mT(){return this.Qo.jf.mT}get wT(){return this.Qo.jf.wT}get uH(){throw new g("Not implemented")}get cH(){throw new g("Not implemented")}get pT(){return this.Qo.jf.pT}get vT(){return this.Qo.jf.vT}get yT(){return this.Qo.jf.yT}constructor(t){this.Qo=t,this.Xa=function(t){return{get currentBandwidthEstimate(){return t.mT},get corruptedVideoFrames(){return t.AT},get droppedVideoFrames(){return t.wT},get totalBytesLoaded(){return t.pT},get bufferedSegments(){return t.yT}}}(this)}};function fL(t){if(!t||!Bs(t))return{wT:0,AT:0,vT:0,mT:0,pT:0,yT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const i=t.getVideoPlaybackQuality();return{wT:i.droppedVideoFrames,AT:i.corruptedVideoFrames||0,vT:i.totalVideoFrames}}return{wT:t.webkitDroppedFrameCount||0,AT:0,vT:t.webkitDecodedFrameCount||0}}var _L=class extends yo{fa(){return new gL}constructor(){super("lH")}},gL=class extends wn{constructor(){super("castingchange")}};var wL=class extends xd{get dH(){var t,i;return(null==(t=this.fH)?void 0:t.dH)||(null==(i=this._H)?void 0:i.dH)||!1}get gH(){return this.fH}get wH(){return this._H}AH(t){this.fH=t,this.vH(t)}mH(t){this._H=t,this.vH(t)}vH(t){t.yn("statechange",this.pH)}yH(t){t.fn("statechange",this.pH)}get va(){return this.Xa||(this.Xa=function(t){let i;const e={get casting(){return t.dH},get airplay(){var i;return null==(i=t.gH)?void 0:i.va},get chromecast(){var i;return null==(i=t.wH)?void 0:i.va},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new oL(t,["lH"],e),e}(this)),this.Xa}gn(){this.Vo(),this.fH&&(this.yH(this.fH),this.fH=void 0),this._H&&(this.yH(this._H),this._H=void 0)}constructor(...t){super(...t),this.fH=void 0,this._H=void 0,this.MH=!1,this.Xa=void 0,this.pH=()=>{const t=this.MH,i=this.dH;t!==i&&(this.MH=i,this.Co(new _L))}}},dn=class{static async TH(t,i){try{const e=new zu({zu:t,fS:Qv.Ru,dS:Ys.GET}),s=await i.SI(e);return(await s.zm()).trim()}catch(t){return void Ho(t)}}static NH(t){try{const i=YD(t);return new K(i.key,i.domains_page,i.domains_source,i.expiration_date,i.features,i.customer_id,i.generation_date,i.sdks,i.send_impression)}catch(t){throw new $i(Ui.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static DH(t){void 0===t&&(t=xD.lh),i.SA("The baked-in license is used. Please update the configuration with your license.");const e=t.CQ("F2b-iL'[FL[S"),s=JSON.parse('["F$(:_L50F|aY"]').map((i=>t.CQ(i))),n=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map((i=>t.CQ(i))),r=Number(new Date(Number(t.CQ('COD|aHpHa:p3Ceo3Co""')))),h=JSON.parse("[]").map((i=>t.CQ(i)));return new K(e,s,n,r,h)}static convertLicenseToDummyLicense(t){return new K(t.QQ,t.FQ,t.YQ,864e13,t.VQ,t.WQ,Date.now(),t.qQ,t.XQ)}},$t=class t{static hQ(){return t.Ib||(t.Ib=AL.qC()?new AL:new U),t.Ib}static Vb(i){t.hQ().Vb(i)}static rQ(){t.hQ().rQ()}static Fb(i){return t.hQ().Fb(i)}static Kj(i,e){t.hQ().Kj(i,e)}static IH(i){const e=t.Fb(i);if(void 0!==e)return C(e)}static SH(i){return"true"===t.Fb(i)}};$t.Ib=void 0;var AL=class extends $t{static qC(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}Vb(t){self.localStorage.removeItem(t)}rQ(){self.localStorage.clear()}Fb(t){var i;return null!=(i=self.localStorage.getItem(t))?i:void 0}Kj(t,i){self.localStorage.setItem(t,i)}},vL="https://validate.theoplayer.com/1/",mL=72e5,pL=_.floor(14399999*_.random()-mL),yL="THEOplayer.license",ML=class{async EH(){const t=await this.bH(this.LH.license,this.LH.licenseUrl);this.BF.kH(t)}async bH(t,i){let e,s=i;t?e=dn.NH(t):s||(e=dn.DH()),s||(s=vL+e.QQ);const n=this.CH();let r;if(e&&(r=this.xH.rF(e),r===$s.BQ)){if(this.OH(e.GQ)&&this.OH(null==n?void 0:n.GQ)){const t=await this.jH(s);if(t)return t}return e}if(n){if(this.xH.rF(n)===$s.BQ){if(this.OH(null==n?void 0:n.GQ)){const t=await this.jH(s);if(t)return t}return n}$t.Vb(yL)}const h=await dn.TH(s,this.NS);let o;if(h){o=dn.NH(h);if(this.xH.rF(o)===$s.BQ)return $t.Kj(yL,h),o;$t.Vb(yL)}else if(!this.lF&&e&&r===$s.RQ&&s===vL+e.QQ)return dn.convertLicenseToDummyLicense(e);if(!e&&!o)throw new $i(Ui.LICENSE_ERROR,"The given license is invalid!");this.zH(null!=e?e:o,new $i(Ui.LICENSE_ERROR,"The given license is invalid!"))}async $Q(t){let i=await this.BF.PF();if(this.OH(i.GQ)){var e;const t=null!=(e=this.LH.licenseUrl)?e:vL+i.QQ,s=await this.jH(t);s&&(this.BF.kH(s),i=s)}try{const e=this.xH.rF(i);if(e===$s.UQ){const t=HD.ZQ;throw new $i(XD(t),di.sF(t))}if(e===$s.RQ){const t=HD.RQ;throw new $i(XD(t),di.sF(t))}this.xH.$Q(t,i)}catch(t){this.PH(t)}}async nF(t){const i=await this.BF.PF();try{this.xH.nF(t,i)}catch(t){this.PH(t)}}async jH(t){try{const i=await dn.TH(t,this.NS);if(void 0===i)return;const e=dn.NH(i);return this.xH.rF(e)===$s.BQ?($t.Kj(yL,i),e):void 0}catch(t){return}}OH(t){return!t||Number(new Date)+2592e5+pL>=t}CH(){const t=$t.Fb(yL);if(t)return dn.NH(t)}zH(t,i){this.BF.kH(t),this.PH(i)}PH(t){throw Ea(t.message),this.BH.QF(t.message),t}constructor(t,i,e,s,n,r){this.NS=t,this.xH=i,this.BH=e,this.BF=s,this.LH=n,this.BL=r,this.lF=tI(r)}},TL=class{kH(t){this.RH=t,this.UH.Wb()}get QH(){return this.RH}async PF(){return this.RH?Promise.resolve(this.RH):(await this.UH.Zb,this.RH)}constructor(){this.UH=new Rs}},NL=class extends yo{fa(){return new DL}constructor(){super("W_")}},DL=class extends wn{constructor(){super("change")}};function IL(t){let i;const e={get fontFamily(){return t.FH},set fontFamily(i){t.FH=i},get fontColor(){return t.YH},set fontColor(i){t.YH=i},get fontSize(){return t.GH},set fontSize(i){t.GH=i},get backgroundColor(){return t.VH},set backgroundColor(i){t.VH=i},get windowColor(){return t.WH},set windowColor(i){t.WH=i},get edgeStyle(){return t.HH},set edgeStyle(i){t.HH=i},get marginTop(){return t.qH},set marginTop(i){t.qH=i},get marginBottom(){return t.XH},set marginBottom(i){t.XH=i},get marginLeft(){return t.ZH},set marginLeft(i){t.ZH=i},get marginRight(){return t.KH},set marginRight(i){t.KH=i},addEventListener(t,e){const s=zs(t,gi);i.yn(s,e)},removeEventListener(t,e){const s=zs(t,gi);i.fn(s,e)}};return i=new rt(e),t.yn(["W_"],(t=>i.Co(t.va))),e}var SL={FH:void 0,YH:void 0,GH:void 0,VH:void 0,WH:void 0,HH:void 0,JH:void 0,qH:void 0,XH:void 0,ZH:void 0,KH:void 0},Ci="THEOplayer.textTrackStyle.",EL=class t extends xd{get $H(){return this.tq}get FH(){return this.tq.FH}set FH(t){this.Yn({FH:t})}get YH(){return this.tq.YH}set YH(t){this.Yn({YH:t})}get GH(){return this.tq.GH}set GH(t){this.Yn({GH:t})}get VH(){return this.tq.VH}set VH(t){this.Yn({VH:t})}get WH(){return this.tq.WH}set WH(t){this.Yn({WH:t})}get HH(){return this.tq.HH}set HH(t){this.Yn({HH:t})}get JH(){return this.tq.JH}get qH(){return this.tq.qH}set qH(t){this.Yn({qH:t})}get XH(){return this.tq.XH}set XH(t){this.Yn({XH:t})}get KH(){return this.tq.KH}set KH(t){this.Yn({KH:t})}get ZH(){return this.tq.ZH}set ZH(t){this.Yn({ZH:t})}get va(){return this.Xa||(this.Xa=IL(this)),this.Xa}Yn(i){this.tq=Tt({},this.tq,i),t.iq(this.tq),this.Co(new NL)}static nq(){let t=Tt({},SL);return t.FH=$t.Fb(Ci+"fontFamily")||t.FH,t.YH=$t.Fb(Ci+"fontColor")||t.YH,t.GH=$t.Fb(Ci+"fontSize")||t.GH,t.VH=$t.Fb(Ci+"backgroundColor")||t.VH,t.WH=$t.Fb(Ci+"windowColor")||t.WH,t.HH=$t.Fb(Ci+"edgeStyle")||t.HH,t}static iq(t){$t.Kj(Ci+"fontFamily",t.FH||""),$t.Kj(Ci+"fontColor",t.YH||""),$t.Kj(Ci+"fontSize",t.GH||""),$t.Kj(Ci+"backgroundColor",t.VH||""),$t.Kj(Ci+"windowColor",t.WH||""),$t.Kj(Ci+"edgeStyle",t.HH||"")}constructor(){super(),this.Xa=void 0,this.tq=t.nq()}};function bL(t,i){var e,s;t.style.marginLeft=(null!=(e=i.ZH)?e:0)+"px",t.style.marginRight=(null!=(s=i.KH)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}var Z,LL=[l.jh,l.Sh,he.Rw,l.Sw,l.gw,l.cw,l.yw,l.pw,l.Jg,l.ww,l.Ew,l.Xg,he.H_,l.mw,ut.ha,Ke.Kg,Ke.Bb,l.Wg,l.Vg,l.Lw,l.hw,l.aw,l.ew,l.$g],kL={rq:!1};function CL(t){return t.wd.Rg===ai.Hx}(Z||(Z={})).hq="oq";var ji,kn=["oq"];!function(t){t[t.aq=0]="aq",t[t.VI=1]="VI",t[t.uq=2]="uq"}(ji||(ji={}));var Vs,xL=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"];!function(t){t.tU="cq",t.lq="dq"}(Vs||(Vs={}));var OL=class extends xd{get ht(){throw new g("Not implemented")}get wd(){return this.lx}get Uz(){return this.Ox}get rt(){throw new g("Not implemented")}async fq(t,i){const e=await this.YC.FC(t.Sb,i),s=await e.LC();return await this._q(s),s}gq(t){const i=this.IC;return i?0!==t.Xz.length&&t.Xz.some((t=>t.ZA.Sb===i.ZA)):0!==this.lx.Xz.length?t.Xz.some((t=>this.lx.Xz.some((i=>t.ZA===i.ZA)))):0===t.Xz.length||!this.wq}Aq(t){return this.vq.Aq(t),this.lx=t,Promise.resolve()}mq(t){return!1}async Ud(){this.Vo(),this.Ox.removeEventListener("loadedmetadata",this.pq);for(const t of xL)this.Ox.removeEventListener(t,this.yq);await this.Mq.gn(),this.Tq(),await this.vq.tr(),await this.Nq(void 0)}Dq(t){t!==this.Iq&&(this.Iq=t,t?this.Sq.Wb(void 0):this.Sq=new Rs)}_q(t){return this.Mq.Mx((()=>this.Nq(t)))}async Nq(t){if(t&&!this.Ox.src&&!this.Ox.srcObject)throw new Qr(Ui.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&(this.Ox.src||this.Ox.srcObject))throw new Qr(Ui.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this.Iq&&await this.Sq.Zb;const i=this.IC;i&&(await i.EC(this.Ox),this.IC=void 0),t&&(await t.bn(this.Ox),this.IC=t)}ga(t){return this.Mq.Mx((()=>this.Eq(t)))}Eq(t){this.Dq(!1);const i=this.sA.Gf;if(function(t){if(void 0!==s.ManagedMediaSource&&t instanceof s.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&fi.Ga&&fi.qE>=17}(this.Ox))try{this.Ox.srcObject=t}catch(i){this.Ox.src=URL.createObjectURL(t)}else this.Ox.src=URL.createObjectURL(t);else this.Ox.src=t;this.sA.Gf=i}bq(t){return this.Mq.Mx((()=>this.Lq(t)))}Lq(t){this.Eq(t),this.Ox.load()}Tq(){this.Dq(!1),kM(this.Ox)}async kq(){this.IC&&await this.IC.tr()}constructor(t,i,e,s){super(),this.Iq=!1,this.Sq=new Rs,this.wq=!1,this.Mq=new _r,this.IC=void 0,this.pq=()=>{this.wq=!0},this.yq=()=>{this.Dq(!0)},this.lx=t,this.sA=i,this.Ox=i.Uz,this.vq=e,this.YC=s,this.Ox.addEventListener("loadedmetadata",this.pq);for(const t of xL)this.Ox.addEventListener(t,this.yq)}};var jL,zL=class extends OL{get wf(){return Ai.xn(this.Ox.buffered)}get ct(){return this.Ox.duration}get Cq(){const t=this.ct;if(!isFinite(t))return!1;const i=this.wf;if(0===i.U)return!1;return t-i.jn(i.U-1)<Jc}get Xf(){return this.Ox.preload}set Xf(t){this.Ox.preload=t}get t_(){return Ai.xn(this.Ox.seekable)}get xq(){return this.wf}get Oq(){if(Bs(this.Ox)&&(this.Ox.videoWidth>0||this.Ox.videoHeight>0))return this.wf}async bW(){const t=this.wd;switch(t.Kz){case Jh.bA:case Jh.LA:this.Ox.setAttribute("crossorigin",t.Kz);break;case Jh.EA:default:this.Ox.removeAttribute("crossorigin")}void 0!==t.Xf?this.Ox.preload=t.Xf:this.Ox.preload=wo.gz,void 0!==t.Jz?this.Ox.title=t.Jz:EM(this.Ox),await this.ga(t.Ug),this.vq.$n(this,t)}gq(t){return!1}Aq(t){return Promise.resolve(void 0)}async Ud(){EM(this.Ox),await super.Ud()}static jq(t,i){return!!i.canPlayType&&Boolean(i.canPlayType(t.qz))}},B=class extends wn{constructor(t){super(l.gw),this.currentTime=t}},Pn=class extends wn{constructor(){super(l.cw)}};(jL||(jL={})).zq="Pq";var PL=class extends wn{constructor(t){super("Pq"),this.Bq=t}},BL=class extends xd{get Rq(){return this.Uq}Qq(t,i){const e=new Ai([t,i]);this.Uq=this.Uq.cB(e),this.Co(new PL(e))}Fq(t,i){this.Uq=this.Uq.dB(new Ai([t,i]))}tr(){this.Uq=Ai.SB()}gn(){this.Vo()}constructor(...t){super(...t),this.Uq=Ai.SB()}};var RL,UL=class{start(t){this.UH=t,this.Yq()&&this.Gq()}pull(){this.vG.length>0?this.Vq():this.Wq=!0,this.Yq()&&this.Gq()}cancel(t){return No(this.vG),this.mG=0,this.Wq=!1,this.uG.cancel(t)}Vq(){if(0===this.vG.length)return;const t=this.vG;this.vG=[],this.mG=0,this.Wq=!1,this.UH.enqueue(t)}Yq(){if(this.Wq)return!0;return this.Hq-this.mG>0}Gq(){if(this.qq)return;const t=this.uG.read().then(this.Xq).catch(this.Zq);this.qq=t;const i=()=>{this.qq===t&&(this.qq=void 0)};t.then(i,i)}constructor(t,{size:i=(()=>1),highWaterMark:e=1}){this.vG=[],this.mG=0,this.UH=void 0,this.Wq=!1,this.qq=void 0,this.Xq=t=>t.done?(this.Vq(),void this.UH.close()):(this.vG.push(t.value),this.mG+=this.Kq(t.value),this.Wq&&this.Vq(),this.Yq()?this.uG.read().then(this.Xq):void 0),this.Zq=t=>{this.Vq(),this.UH.error(t)},this.uG=t.getReader(),this.Kq=i,this.Hq=e}},QL=class{Jq(t){this.$q.push(t),this.rp+=t.byteLength}tX(t){if(this.rp<=t)return this.iX();const i=this.$q;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.slice(0,s);if(s<i.length&&e<t){const r=t-e;0,n.push(tl(i[s],0,r)),e+=r}return{$q:n,rp:e}}eX(t){const i=this.tX(t);return 1===i.$q.length?i.$q[0]:p_(i.$q,i.rp)}iX(){return{$q:this.$q,rp:this.rp}}sX(t){if(this.rp<=t)return this.nX();const i=this.$q;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.splice(0,s);if(i.length>0&&e<t){const s=t-e;0,n.push(tl(i[0],0,s)),i[0]=tl(i[0],s),e+=s}return this.rp-=e,{$q:n,rp:e}}rX(t){const i=this.sX(t);return 1===i.$q.length?i.$q[0]:p_(i.$q,i.rp)}nX(){const t=this.iX();return this.$q=[],this.rp=0,t}hX(){const t=1===this.$q.length?this.$q[0]:p_(this.$q,this.rp);return this.$q=[],this.rp=0,t}constructor(){this.$q=[],this.rp=0}};!function(t){t[t.oX=0]="oX",t[t.aX=1]="aX",t[t.uX=2]="uX"}(RL||(RL={}));var ic=class{cX(t,i){}lX(){}dX(t){this.vG.Jq(t),this.fX(!1)}_X(){this.fX(!0)}gX(){return 0!==this.ja||0!==this.vG.rp}fX(t){for(;0!==this.vG.rp;){if(!t&&this.wX>this.vG.rp)return;switch(this.ja){case 0:this.AX(t);break;case 1:this.vX(t);break;case 2:this.mX(t)}}}pX(){this.ja=0,this.wX=8}AX(t){const i=ha(this.vG.eX(this.wX)),e=new L,s=dt.sp(i,e);if(!s.Jm)return this.wX=s.hp,void(t&&this.wX>this.vG.rp&&this.yX(this.vG.rp));const n=s.np.Rg;let r=s.np.rp;0===r&&(r=1/0),this.cX(n,r),this.MX(n)?this.TX(r):this.yX(r)}TX(t){this.ja=1,this.wX=t}vX(t){const i=ha(this.vG.rX(this.wX)),e=new L,s=dt.$m(i,e,!t);if(!s.Jm)throw new Ei(e.Ku);this.lX(),this.NX(s.tp),this.pX()}yX(t){this.ja=2,this.wX=0,this.DX=t}mX(t){const i=this.vG.sX(this.DX);this.DX-=i.rp;for(const t of i.$q)this.IX(t);(0===this.DX||t&&this.DX===1/0)&&(this.lX(),this.pX())}constructor(){this.vG=new QL,this.ja=0,this.wX=0,this.DX=0,this.pX()}};function FL(t){return t instanceof Ve}function YL(t){return t instanceof ry}function GL(t){return t instanceof Ie||t instanceof sy}function VL(t){return t instanceof Lp}function WL(t){return t instanceof ap}function HL(t){return t instanceof Zp}function qL(t){return t instanceof ru}function XL(t){return t instanceof Be}function ZL(t){return t instanceof me}function KL(t){return t instanceof Ne}function JL(t){return t instanceof dy}function $L(t,i){const e=Po(t.boxes,KL);if(e&&e.flags.baseDataOffsetPresent)e.baseDataOffset=e.baseDataOffset.add(i);else for(const e of t.boxes)e instanceof dy&&e.flags.dataOffsetPresent&&(e.dataOffset=e.dataOffset+i)}var tk=class extends ic{start(t){this.UH=t}transform(t){this.dX(t)}flush(){this._X()}MX(t){return t===Zt.Av||t===Zt.Jv||t===Zt._m}NX(t){const i=this.SX(t);this.UH.enqueue(i)}IX(t){this.UH.enqueue(t)}SX(t){const i=Kn(t.zm.zm);switch(t.Rg){case"moov":return this.EX(i);case"sidx":return this.bX(i);case"moof":return this.LX(i)}return i}get kX(){if(void 0===this.CX)throw new g("Expected to have found a movie header timescale.");return this.CX}xX(t){const i=this.OX.get(t);if(void 0===i)throw new g("Expected to have found a media header timescale for track ID "+t+".");return i}EX(t){const i=Cy(t);for(let t=0;t<i.boxes.length;t++){const e=i.boxes[t];e instanceof $p?i.boxes[t]=this.jX(e):e instanceof ty?i.boxes[t]=this.zX(e):e instanceof ry&&this.PX(e)}for(const t of i.boxes)t instanceof Zp&&this.BX(t);return i.serialize().join()}jX(t){this.CX=t.timescale;const i=Cc(Ce.fromNumber(t.duration,!0),this.kX,this.RX);return 0!==i.getHighBits()?this.zX(function(t){return new ty({creation:Ce.fromNumber(t.creationTime,!0),modification:Ce.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:Ce.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.RX,t.duration=i.toInt(),t)}zX(t){return this.CX=t.timescale,t.timescale=this.RX,t.duration=Cc(t.duration,this.kX,this.RX),t}PX(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof Ie?(i=s.trackId,t.boxes[e]=this.UX(s)):s instanceof sy?(i=s.trackId,t.boxes[e]=this.QX(s)):s instanceof Lp?this.FX(s,i):s instanceof mp&&this.YX(s)}}UX(t){const i=Cc(Ce.fromNumber(t.duration,!0),this.kX,this.RX);return 0!==i.getHighBits()?this.QX(function(t){return new sy({creation:Ce.fromNumber(t.creationTime,!0),modification:Ce.fromNumber(t.modificationTime,!0),duration:Ce.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=i.toInt(),t)}QX(t){return t.duration=Cc(t.duration,this.kX,this.RX),t}FX(t,i){for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof Ip?t.boxes[e]=this.GX(s,i):s instanceof Sp&&(t.boxes[e]=this.VX(s,i))}}GX(t,i){this.OX.set(i,t.timescale);const e=Cc(Ce.fromNumber(t.duration,!0),t.timescale,this.RX);return 0!==e.getHighBits()?this.VX(function(t){return new Sp({creation:Ce.fromNumber(t.creationTime,!0),modification:Ce.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:Ce.fromNumber(t.duration,!0)},t.language,t.flags)}(t),i):(t.timescale=this.RX,t.duration=e.toInt(),t)}VX(t,i){return this.OX.set(i,t.timescale),t.timescale=this.RX,t.duration=Cc(t.duration,t.timescale,this.RX),t}YX(t){for(const i of t.boxes)i instanceof wp?this.WX(i):i instanceof Ap&&this.HX(i)}WX(t){for(const i of t.entries)i.mediaTime=ek(i.mediaTime,this.kX,this.RX),i.segmentDuration=ek(i.segmentDuration,this.kX,this.RX)}HX(t){for(const i of t.entries)i.mediaTime=Cc(i.mediaTime,this.kX,this.RX),i.segmentDuration=Cc(i.segmentDuration,this.kX,this.RX)}BX(t){for(let i=0;i<t.boxes.length;i++){const e=t.boxes[i];e instanceof ru?this.qX(e):e instanceof Wp?t.boxes[i]=this.XX(e):e instanceof Hp&&(t.boxes[i]=this.ZX(e))}}qX(t){const i=this.xX(t.trackId);t.defaultSampleDuration=ek(t.defaultSampleDuration,i,this.RX)}XX(t){const i=Cc(Ce.fromNumber(t.fragmentDuration,!0),this.kX,this.RX);return 0!==i.getHighBits()?this.ZX(function(t){return new Hp(Ce.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=i.toInt(),t)}ZX(t){return t.fragmentDuration=Cc(t.fragmentDuration,this.kX,this.RX),t}bX(t){let i=xy(t);return i=i instanceof py?this.KX(i):this.JX(i),i.serialize().join()}KX(t){const i=t.timescale,e=Cc(Ce.fromNumber(t.earliestPresentationTime,!0),i,this.RX);if(0!==e.getHighBits())return this.JX(function(t){return new yy(t.referenceId,t.timescale,Ce.fromNumber(t.earliestPresentationTime,!0),Ce.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.RX,t.earliestPresentationTime=e.toInt();for(const e of t.references)e.subsegmentDuration=ek(e.subsegmentDuration,i,this.RX);return t}JX(t){const i=t.timescale;t.timescale=this.RX,t.earliestPresentationTime=Cc(t.earliestPresentationTime,i,this.RX);for(const e of t.references)e.subsegmentDuration=ek(e.subsegmentDuration,i,this.RX);return t}LX(t){const i=Oy(t),e=i.getSize();for(const t of i.boxes)t instanceof me&&this.$X(t);const s=i.getSize();if(s!==e){const t=s-e;for(const e of i.boxes)e instanceof me&&$L(e,t)}return i.serialize().join()}$X(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof Ne?(i=this.xX(s.trackId),this.tZ(s,i)):s instanceof uy?t.boxes[e]=this.iZ(s,i):s instanceof Su?t.boxes[e]=this.eZ(s,i):s instanceof dy&&this.sZ(s,i)}}tZ(t,i){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=ek(t.defaultSampleDuration,i,this.RX))}iZ(t,i){const e=Cc(Ce.fromNumber(t.baseMediaDecodeTime,!0),i,this.RX);return 0!==e.getHighBits()?this.eZ(function(t){return new Su(Ce.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),i):(t.baseMediaDecodeTime=e.toInt(),t)}eZ(t,i){return t.baseMediaDecodeTime=Cc(t.baseMediaDecodeTime,i,this.RX),t}sZ(t,i){let e=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=ek(s,i,this.RX);n.duration=t-e,e=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=ik(n.compositionTimeOffset,i,this.RX))}}constructor(t){super(),this.OX=si(),this.RX=t}};function ik(t,i,e){return Ce.fromInt(t,!1).multiply(e).divide(i).toNumber()}function ek(t,i,e){return Ce.fromInt(t,!0).multiply(e).divide(i).toNumber()}function Cc(t,i,e){return be.xN(t).sD(be.ON(e,!0)).oD(be.ON(i,!0)).WN()}var sk,nk,rk,hk=class{nZ(t){return t.pipeThrough(new qa(this.rZ))}constructor(t){this.rZ=new tk(t)}};function ok(t,i,e){const s=hl(t,i);if(s!==e)throw new b("Expected descriptor with tag "+e+", but found "+s)}function ak(t,i){ok(t,i,3);const e=uk(t,i),s=i.Ku+e,n=il(t,i),r=hl(t,i),h=0!=(64&r),o=0!=(32&r),a=31&r;let u,c,l;if(0!=(128&r)&&(u=il(t,i)),h){c=jh(t,i,hl(t,i))}o&&(l=jh(t,i,2));const d=function(t,i){ok(t,i,4);const e=uk(t,i),s=i.Ku+e,n=hl(t,i),r=hl(t,i),h=r>>2,o=0!=(2&r),a=cl(t,i,3),u=oo(t,i),c=oo(t,i);let l;if(i.Ku<s){const e=function(t,i){return t.getUint8(i.Ku)}(t,i);5===e&&(l=function(t,i){ok(t,i,5);const e=uk(t,i),s=Yu(t,i,e);return{hZ:5,oZ:s}}(t,i))}return i.Sm(s),{hZ:4,aZ:n,uZ:h,cZ:o,lZ:a,dZ:u,fZ:c,_Z:l}}(t,i);return i.Sm(s),{hZ:3,o:n,gZ:u,zu:c,wZ:a,AZ:l,vZ:d}}function uk(t,i){let e=0;for(let s=0;s<4;s++){const s=hl(t,i);if(e=e<<7|127&s,!(128&s))break}return e}function ck(t,i){const e=hl(t,i),s=hl(t,i),n=hl(t,i),r=hl(t,i),h=3&hl(t,i),o=31&hl(t,i),a=[];for(let e=0;e<o;e++){const e=il(t,i);a.push(Yu(t,i,e))}const u=hl(t,i),c=[];for(let e=0;e<u;e++){const e=il(t,i);c.push(Yu(t,i,e))}return{mZ:e,pZ:s,yZ:n,MZ:r,TZ:h,NZ:a,DZ:c}}function $r(t,i,e){if(e&&i.byte>=e)return;const s=t.Fb(i.byte);return i.byte+=1,s}function lk(t,i){return function(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=256*s+$r(t,i);return s}(t,i,2)}!function(t){t[t.IZ=3]="IZ",t[t.SZ=4]="SZ",t[t.EZ=5]="EZ"}(sk||(sk={})),function(t){t[t.bZ=64]="bZ",t[t.LZ=103]="LZ",t[t.kZ=107]="kZ"}(nk||(nk={})),function(t){t[t.CZ=0]="CZ",t[t.xZ=1]="xZ",t[t.LZ=2]="LZ",t[t.OZ=5]="OZ",t[t.jZ=34]="jZ"}(rk||(rk={}));var dk,fk=class t{zZ(t){this.PZ=this.PZ.concat(t.PZ),this.BZ+=t.U}RZ(t,i,e){const s=this.BZ,n=e-i;n>0&&(this.PZ.push({UZ:i,QZ:e,FZ:n,YZ:s,GZ:t}),this.BZ+=n)}Fb(t){for(const i of this.PZ)if(i.YZ<=t&&t<i.YZ+i.FZ)return i.GZ[t+i.UZ-i.YZ]}VZ(t,i){let e=i;for(const i of this.PZ){const s=i.QZ;for(let n=i.UZ;n<s;n+=1,e+=1)t[e]=i.GZ[n]}return e}get U(){return this.BZ}set U(t){const i=this.PZ;let e=this.BZ-t;if(!(t>=this.BZ))if(this.BZ=t,0!==t)for(let t=i.length-1;t>=0;t-=1){const s=i[t];if(e<=s.FZ)return s.QZ-=e,s.FZ-=e,void(i.length!==t+1&&(i.length=t+1));e-=s.FZ}else i.length=0}get zm(){const t=new Array(this.BZ);let i=0;for(const e of this.PZ){const s=e.QZ;for(let n=e.UZ;n<s;n+=1,i+=1)t[i]=e.GZ[n]}return t}WZ(){const t=new j(this.BZ);let i=0;for(const e of this.PZ){const s=e.QZ;for(let n=e.UZ;n<s;n+=1,i+=1)t[i]=e.GZ[n]}return t}Em(i){const e=new t;for(const t of this.PZ)e.RZ(t.GZ,t.UZ,t.QZ);return e.XD=i||Tt({},this.XD),e}constructor(){this.BZ=0,this.PZ=[],this.XD={}}},_k=[128,64,32,16,8,4,2,1];function Ss(t,i){const e=_.floor(i.bit/8),s=0==(t.Fb(e)&_k[i.bit%8])?0:1;return i.bit+=1,s}function ze(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=2*s+Ss(t,i);return s}function ac(t,i){let e=0;for(;0===Ss(t,i)&&e<32;)e+=1;return ze(t,i,e)+2**e-1}function gk(t,i){const e=ac(t,i);return 1&e?_.floor((e+1)/2):-_.floor(e/2)}function wk(t,i){const e=[],s={byte:1};let n;do{e.push(vk(t,i,s)),n=i.Fb(s.byte)}while(void 0!==n&&128!==n);return e}function Ak(t,i){let e,s=0;do{e=$r(t,i),s+=e}while(255===e);return s}function vk(t,i,e){const s=Ak(i,e),n=Ak(i,e),r=e.byte,h=r+n;return e.byte=h,{HZ:t,qZ:s,XZ:n,ZZ:r,KZ:h,JZ:i}}!function(t){t[t.$Z=1]="$Z",t[t.tK=2]="tK",t[t.iK=3]="iK",t[t.eK=4]="eK",t[t.sK=5]="sK",t[t.nK=6]="nK",t[t.rK=7]="rK",t[t.hK=8]="hK",t[t.oK=9]="oK"}(dk||(dk={}));var mk=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function pk(t,i,e){let s=8,n=8;for(let r=0;r<e;r+=1){if(0!==n){n=(s+gk(t,i)+256)%256}s=0===n?s:n}}var yk=class{aK(){const t=this.uK;let i=_.max(0,this.cK+t.length-2);const e=this.lK,s=e.U;let n=0;for(;i<s;i+=1){const s=e.Fb(i);0===s?n+=1:(3===s&&n>=2&&t.push(i),n=0)}this.cK=i-t.length}dK(t){const i=this.uK;let e=t;for(const t of i){if(!(t<=e))return e;e+=1}return e}Fb(t){if(!(t>this.lK.U))return t>this.cK&&this.aK(),this.lK.Fb(this.dK(t))}constructor(t){this.uK=[],this.cK=0,this.lK=t}};function Mk(t){const i=new yk(t);let e,s,n,r,h,o,a=0,u=0,c=0,l=0;const d=i.Fb(1),f={bit:32};if(ac(i,f),100===d||110===d||122===d||144===d){const t=ac(i,f);3===t&&(e=Ss(i,f)),ac(i,f),ac(i,f),Ss(i,f);if(1===Ss(i,f))for(let e=0;e<(3!==t?8:12);e+=1){1===Ss(i,f)&&pk(i,f,e<6?16:64)}}const g=ac(i,f),w=ac(i,f);if(0===w)ac(i,f);else if(1===w){Ss(i,f),gk(i,f),gk(i,f);const t=ac(i,f);for(let e=0;e<t;e+=1)gk(i,f)}ac(i,f),Ss(i,f);const A=ac(i,f),v=ac(i,f),m=Ss(i,f);0===m&&Ss(i,f),Ss(i,f);1===Ss(i,f)&&(a=ac(i,f),u=ac(i,f),c=ac(i,f),l=ac(i,f));if(1===Ss(i,f)){if(1===Ss(i,f)){const t=ze(i,f,8);if(255===t)s=ze(i,f,16),n=ze(i,f,16);else{const i=mk[t];i&&(s=i[0],n=i[1])}}1===Ss(i,f)&&Ss(i,f);if(1===Ss(i,f)){ze(i,f,3),Ss(i,f);1===Ss(i,f)&&(ze(i,f,8),ze(i,f,8),ze(i,f,8))}1===Ss(i,f)&&(ac(i,f),ac(i,f)),r=Ss(i,f),1===r&&(h=ze(i,f,32),o=ze(i,f,32),Ss(i,f))}return{width:_.floor(16*(A+1)-2*a-2*u),height:_.floor((2-m)*(v+1)*16-2*c-2*l),lM:s,dM:n,fK:r?o/(2*h):void 0,_K:e,gK:g}}function Tk(t){const i=ml(Lr.fp(t),Zt.Av);if(!i)return;const e=i.np.kp,s=[];for(const t of i.Z){const i=t.np.Qp,e=t.Pp.np.kp;let o,a,u;for(const i of t.Pp.qp.Kp.$p.ey){const t=Nk(i);var n,r,h;if(t)o=null!=(n=t.wK)?n:o,a=null!=(r=t.AK)?r:a,u=null!=(h=t.vK)?h:u}s.push({Qp:i,kp:e,wK:o,AK:a,vK:u})}return{kp:e,Z:s}}function Nk(t){let i,e,s;if(t.Rg===Zt.Lv){var n;const e=ck(ha(t.Fy.zm),new L);i=function(t){return"avc1."+Dk(t.pZ,2)+Dk(t.yZ,2)+Dk(t.MZ,2)}(e),s=null==(n=function(t){if(0===t.NZ.length)return;const i=t.NZ[0],e=new fk;return e.RZ(i,0,i.byteLength),Mk(e)}(e))?void 0:n.fK}else if(t.Rg===Zt.xv||t.Rg===Zt.Ov){const e=function(t,i){const e=i.Om(),s=Cn(t,e,8),n=Cn(t,e,2),r=Cn(t,e,1),h=Cn(t,e,5),o=Cn(t,e,32),a=[];for(let i=0;i<6;i++)a.push(Cn(t,e,8));const u=Cn(t,e,8);e.Im(4);const c=Cn(t,e,12);e.Im(6);const l=Cn(t,e,2);e.Im(6);const d=Cn(t,e,2);e.Im(5);const f=Cn(t,e,3);e.Im(5);const _=Cn(t,e,3),g=Cn(t,e,16),w=Cn(t,e,2),A=Cn(t,e,3),v=Cn(t,e,1),m=Cn(t,e,2),p=Cn(t,e,8),y=[];for(let i=0;i<p;i++){const i=Cn(t,e,1);e.Im(1);const s=Cn(t,e,6),n=Cn(t,e,16),r=[];for(let i=0;i<n;i++){const i=Cn(t,e,16),s=Yu(t,new L(e.Ku>>3),i);e.Im(8*i),r.push({mK:i,pK:s})}y.push({yK:i,MK:s,TK:n,NK:r})}return{mZ:s,DK:n,IK:r,SK:h,EK:a,bK:u,LK:c,kK:l,CK:o,xK:d,jK:f,zK:_,PK:g,BK:A,RK:v,UK:w,TZ:m,QK:p,FK:y}}(ha(t.Wy.zm),new L);i=function(t,i){let e=t.toString()+".";switch(i.DK){case 0:break;case 1:e+="A";break;case 2:e+="B";break;case 3:e+="C";break;default:return}switch(e+=i.SK.toString()+".",e+=function(t){let i=t;return i=i>>>1&1431655765|(1431655765&i)<<1,i=i>>>2&858993459|(858993459&i)<<2,i=i>>>4&252645135|(252645135&i)<<4,i=i>>>8&16711935|(16711935&i)<<8,i=i>>>16|i<<16,i}(i.CK).toString(16)+".",i.IK){case 0:e+="L";break;case 1:e+="H";break;default:return}e+=i.bK.toString();const s=i.EK.reduce(((t,i)=>0===t?i:i+1),0);for(let t=0;t<s;t++)e+="."+i.EK[t].toString(16).toUpperCase();return e}(t.Rg,e)}else if(t.Rg===Zt.Pv){const e=function(t,i){const e=i.Om(),s=Cn(t,e,8);e.Im(24);const n=Cn(t,e,8),r=Cn(t,e,8),h=Cn(t,e,4),o=Cn(t,e,3),a=Fe(t,e),u=Cn(t,e,8),c=Cn(t,e,8),l=Cn(t,e,8),d=Cn(t,e,16),f=new Array(8);for(let i=0;i<d;i++)f[i]=Cn(t,e,8);return{mZ:s,YK:n,GK:r,VK:h,WK:o,HK:a,oM:u,aM:c,uM:l,qK:d,XK:f}}(ha(t.qy.zm),new L);i=function(t,i){let e=t.toString()+".";return e+="0"+i.YK+".",e+=Tf(""+i.GK,2,"0")+".",e+=Tf(""+i.VK,2,"0")+".",e+=Tf(""+i.WK,2,"0")+".",e+=Tf(""+i.oM,2,"0")+".",e+=Tf(""+i.aM,2,"0")+".",e+=Tf(""+i.uM,2,"0")+".",e+="0"+i.HK,e}(t.Rg,e)}else if(t.Rg===Zt.Rv){const e=function(t,i){const e=i.Om();e.Im(1);const s=Cn(t,e,7),n=Cn(t,e,3),r=Cn(t,e,5),h=Fe(t,e),o=Fe(t,e),a=Fe(t,e),u=Fe(t,e),c=Fe(t,e),l=Fe(t,e),d=Cn(t,e,2);e.Im(3);const f=Fe(t,e);let _;return f?_=Cn(t,e,4):e.Im(4),{lp:s,ZK:n,KK:r,JK:h,$K:o,tJ:a,iJ:u,eJ:c,sJ:l,nJ:d,rJ:f,hJ:_}}(ha(t.Ky.zm),new L);i=function(t,i,e){let s=t.toString()+".";if(s+=i.ZK+".",s+=""+Tf(""+i.KK,2,"0"),s+=(0===i.JK?"M":"H")+".",s+=(1===i.tJ?12:10)+".",s+=(1===i.ZK?0:i.iJ)+".",s+=""+i.eJ+i.sJ+(1===i.eJ&&1===i.sJ?i.nJ:"0"),e&&e.hM===Zf.ON_SCREEN_COLOURS){const t=e;s+="."+Tf(""+t.oM,2,"0")+"."+Tf(""+t.aM,2,"0")+"."+Tf(""+t.uM,2,"0")+"."+(t.cM?1:0)}return s}(t.Rg,e,t.Jy)}else if(t.Rg===Zt.Yv){e=function(t){const i=t.vZ;switch(i.aZ){case nk.bZ:return function(t){var i;if(!(null==(i=t._Z)?void 0:i.oZ))return"mp4a.40";const e=function(t,i){let e=Cn(t,i,5);31===e&&(e=32+Cn(t,i,6));const s=Cn(t,i,4);let n;return 15===s&&(n=Cn(t,i,24)),{oJ:e,aJ:s,uJ:n,cJ:Cn(t,i,4)}}(ha(t._Z.oZ),new Yc);return"mp4a.40."+e.oJ}(i);case nk.LZ:return"mp4a.40.2";case nk.kZ:return"mp4a.40.34"}}(ak(ha(t.Oy.zm),new L))}else{if(t.Rg!==Zt.Vv)return(t.Rg===Zt.Kv||t.Rg===Zt.Zv)&&t.iM?Nk(t.iM):void 0;e="fLaC"}return{wK:i,AK:e,vK:s}}function Dk(t,i){const e=t.toString(16);return Tf(e,i,"0")}function Ik(t,i){const e=Lr.fp(ha(t)),s=function(t,i){let e;for(const n of t.Z){var s;const t=null==(s=n.IM)?void 0:s.IM;if(t){const s=n.np.Qp,r=Po(i.Z,(t=>t.Qp===s)),h=ke.xN(t,r.kp);e&&!h.DN(e)||(e=h)}}return e}(ml(e,Zt.Jv),i),n=ml(e,Zt.lm);return{GT:s.vN(),lJ:n.zm}}var Sk=fi.WE,Ek=class extends xd{get NW(){return this.OW}set NW(t){this.OW=t}get EW(){return this.PW}set EW(t){this.PW=t}get oa(){return this.dJ||this.fJ.updating}_J(t,i,e){switch(t.Rg){case ji.aq:case ji.VI:return this.gJ((e=>this.wJ(t,i,e)),e);case ji.uq:throw new g("Opaque segments are not supported on web.")}}AJ(t,i){switch(t.Rg){case ji.aq:return this.gJ((i=>this.vJ(t,i)),i);case ji.VI:throw new g("Streaming initialization segments are not supported on web.");case ji.uq:throw new g("Opaque initialization segments are not supported on web.")}}async vJ(t,i){this.mJ?this.pJ=Tk(ha(t.zm)):(await this.yJ(t,void 0,i),Sk&&(this.MJ=!1,this.TJ=t))}async wJ(t,i,e){Sk&&this.MJ&&this.TJ&&await this.vJ(this.TJ,e);try{if(Bo(e),this.mJ&&this.pJ){const n=await async function(t,i){switch(t.Rg){case ji.aq:return t;case ji.VI:{const e=await Ot(t.zm,i);return Bo(i),{Rg:ji.aq,zm:new j(e)}}case ji.uq:throw new g("MediaBufferWrapper - Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,e),r=Ik(n.zm,this.pJ);var s;t={Rg:ji.aq,zm:r.lJ},i=Tt({},i,{UD:r.GT+(null!=(s=i.UD)?s:0)})}await this.yJ(t,i,e),this.Co(new wn(Z.hq))}finally{t.Rg===ji.VI&&t.zm.cancel(new pe).catch(qt)}}async yJ(t,i,e){switch(Bo(e),i&&await this.NJ(i),t.Rg){case ji.aq:if(this.DJ){const i=this.DJ.nZ(gb(t.zm));return await this.IJ(i,e)}return await this.SJ(t.zm);case ji.VI:if(this.DJ){const i=this.DJ.nZ(t.zm);return await this.IJ(i,e)}return await this.IJ(t.zm,e)}}async IJ(t,i){const e=this.EJ.wf,s=function(t,i){return void 0===i&&(i=new ib({highWaterMark:1/0})),new P(new UL(t,i),{highWaterMark:0})}(t),n=s.getReader();let r=!1;try{for(;;){const t=await Nr(n.read(),i);if(t.done){r=!1;break}Bo(i);const e=m_(t.value);r=!0,await this.SJ(e)}}catch(t){if(n.cancel(t).catch(qt),r){await this.bJ();const t=this.EJ.wf.Sn(e.hB());for(let i=0;i<t.U;i++)await this.LJ(t.Cn(i),t.jn(i))}throw t}}kJ(t,i){return this.gJ((()=>this.CJ(t,i)))}async CJ(t,i){this.fJ.appendWindowStart===t&&this.fJ.appendWindowEnd===i||(await this.bJ(),this.fJ.appendWindowStart=0,this.fJ.appendWindowEnd=i,this.fJ.appendWindowStart=t)}async NJ(t){if(this.fJ.timestampOffset!==t.UD)try{this.fJ.timestampOffset=t.UD}catch(i){await this.bJ(),this.fJ.timestampOffset=t.UD}}async SJ(t){this.fJ.appendBuffer(t),this.xJ=!0,await this.OJ()}jJ(t,i,e){return this.gJ((e=>this.LJ(t,i,e)),e)}async LJ(t,i,e){Bo(e),this.fJ.remove(t,i),await this.OJ()}OJ(){const t=this.EJ.wf;return new Promise(((i,e)=>{let s,n=!1,r=()=>{n=!0},h=()=>{n=!1,s="error"},o=()=>{n=!1,s="aborted"},a=()=>{n=!1,s="sourceclose",u()},u=()=>{c(),n&&!s?(t.vB(this.EJ.wf)||this.Co(new wn(Z.hq)),i()):e(new g(s))},c=()=>{this.fJ.removeEventListener("update",r),this.fJ.removeEventListener("error",h),this.fJ.removeEventListener("abort",o),this.fJ.removeEventListener("updateend",u),this.zJ.fn(Vs.lq,a)};this.fJ.addEventListener("update",r),this.fJ.addEventListener("error",h),this.fJ.addEventListener("abort",o),this.fJ.addEventListener("updateend",u),fi.DE&&fi.EE<3&&this.zJ.yn(Vs.lq,a)}))}PJ(){return this.gJ((()=>this.bJ()))}async bJ(){if(this.zJ.Jf===Ls.NI){Sk&&(this.MJ=!0),this.fJ.updating&&(this.dJ=!0);try{this.fJ.abort()}catch(t){0,this.dJ=!1}this.oa&&await this.OJ().catch(qt)}}BJ(){return"function"==typeof this.fJ.changeType}Aq(t){if(this.RJ(),this.zJ.Jf===Ls.UJ)return;var i;this.QJ=t;const e=null!=(i=this.zJ.FJ(t.qz))?i:t.qz;this.mJ=bk(t.qz,this.YJ),this.BJ()&&!qi(this.YJ,e)&&(this.YJ=e,this.fJ.changeType(this.YJ))}GJ(){this.zJ.Jf!==Ls.Jg||this.VJ||this.oa||(this.fJ.timestampOffset=this.fJ.timestampOffset,this.zJ.WJ())}async gJ(t,i){this.RJ();const e=new na;e.Xd(this.HJ.Wd),i&&e.Xd(i);try{this.VJ=t(e.Wd),await this.VJ,this.zJ.WJ(),this.oa&&await this.OJ()}finally{this.VJ=void 0,e.Ud()}}RJ(){if(this.VJ)throw new g("Internal error")}async Ud(){this.Vo(),this.HJ.qd(),this.VJ&&(await this.VJ.catch(qt),this.VJ=void 0),this.fJ.removeEventListener("updateend",this.qJ),this.fJ.removeEventListener("bufferedchange",this.XJ)}constructor(t,i,e,s,n){var r;if(super(),this.OW=20,this.PW=30,this.dJ=!1,this.xJ=!1,this.VJ=void 0,this.HJ=new na,this.MJ=!1,this.TJ=void 0,this.mJ=!1,this.pJ=void 0,this.qJ=()=>{this.dJ=!1},this.XJ=t=>{t.removedRanges&&this.Co(new wn(Z.hq))},this.zJ=i,this.EJ=t,this.fJ=e,this.fJ.addEventListener("updateend",this.qJ),this.fJ.addEventListener("bufferedchange",this.XJ),this.QJ=s,this.YJ=n,this.mJ=bk(s.qz,n),null==(r=i.wd)?void 0:r.ZJ){var h;const t=null!=(h=i.wd.KJ)?h:1e5;this.DJ=new hk(t)}}};function bk(t,i){return At(t,"audio/mp4")&&At(i,"audio/mpeg")}var Lk=class{get wf(){if(this.JJ.Jf===Ls.UJ)return Ai.SB();let t=Ai.xn(this.fJ.buffered).Sn(new Ai([0,1/0]));const i=this.$J;return void 0!==i&&t.U>0&&t.jn(t.U-1)===i&&(t=t.cB(Ai.DB(i))),t}Cq(){return!!this.$J&&this.wf.nB().gr(this.$J)}t$(){const t=this.wf;this.$J=t.U>0?t.jn(t.U-1):0,this.JJ.i$()}GJ(){this.$J=void 0}constructor(t,i){this.$J=void 0,this.JJ=i,this.fJ=t}};function kk(t){const i=t.uI("codecs");return i?i.split(",").map((t=>t.trim())):[]}function Ck(t,i){return!("opus"===t)&&!("opus"===i)||t===i}function xk(t,i){const e=Ok(t)||jk(t),s=Ok(i)||jk(i);return!e&&!s||t===i}function Ok(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function jk(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function Bt(t,i){if(t===i)return!0;const e=t.split("."),s=i.split("."),n=e[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,i]=e,[,n,r]=s;if(t!==n)return!1;if(Number(i)!==Number(r))return!1}return!0}function zk(t,i,e,s,n,r,h){const o=new Lk(n,t),a=new Ek(o,t,n,e,r);return new Pk(t,i,e,s,o,a,h)}var Pk=class extends xd{get wf(){return this.EJ.wf}get wd(){return this.lx}get qz(){return this.sx}get e$(){return this.s$}get n$(){return this.r$.Rq}get NW(){return this.h$.NW}set NW(t){this.h$.NW=t}get EW(){return this.h$.EW}set EW(t){this.h$.EW=t}get oa(){return this.h$.oa}Cq(){return this.EJ.Cq()}t$(){this.EJ.t$()}GJ(){this.EJ.GJ(),this.h$.GJ()}o$(t,i){this.r$.Qq(t,i)}a$(t,i){this.r$.Fq(t,i)}u$(){return this.h$.PJ()}_J(t,i,e){return this.h$._J(t,i,e)}AJ(t,i,e){return this.h$.AJ(t,e)}kJ(t,i){return fi.DE&&fi.EE<3?this.h$.kJ(t,1/0):this.h$.kJ(t,i)}async ET(t,i,e){this.a$(t,i);const s=this.wf;await this.h$.jJ(t,i,e);const n=0!==s.U&&0===this.wf.U;(fi.ib||fi.LE)&&n&&this.sA.Sm(this.sA.Mf)}gq(t){const i=t.qz;if(this.sx===i)return!0;const e=this.c$.get(i);if(void 0!==e)return e;const s=this.l$(t);return this.c$.set(i,s),s}l$(t){const i=this.zJ.FJ(t.qz);if(void 0===i)return!1;const e=$A(this.sx),s=$A(i),n=kk(e),r=kk(s);if(this.h$.BJ()){if(!function(t,i){return Md(t,i,xk)}(n,r))return!1;if(fi.sb&&!function(t,i){return Md(t,i,Ck)}(n,r))return!1}else{if(e.Rg!==s.Rg)return!1;if(!function(t,i){return Md(t,i,Bt)}(n,r))return!1}return!0}async Aq(t){const i=t.qz;this.sx!==i&&(this.c$.clear(),this.h$.Aq(t),this.sx=i),this.lx=t,this.zJ.d$()}async Ud(){this.c$.clear(),this.Vo(),this.r$.gn();try{this.h$.fn(Z.hq,this.Ds),await this.h$.Ud()}catch(t){}}constructor(t,i,e,s,n,r,h){super(),this.c$=Eo(),this.zJ=t,this.lx=e,this.sx=e.qz,this.s$=s,this.sA=i,this.EJ=n,this.h$=r,this.r$=h,this.h$.yn(Z.hq,this.Ds)}},Bk=class{f$(){let t=this.Cn,e=this.jn;if(this._$||this.g$){const s=.001*(i.Kd()-this.w$);this._$&&(t+=s),this.g$&&(e+=s)}return Ai.IB(t,e)}constructor(t,e,s=!1,n=!1){this.Cn=t,this.jn=e,this._$=s,this.g$=n,this.w$=i.Kd()}},Rk=.5,Uk=[l.jh,l.Sh,l.yw,l.pw,l.hw,l.aw,l.Jg,l.ww,he.H_,ut.ha],Qk=class{A$(t){this.v$.push(t),t.yn(jL.zq,this.m$)}get Rq(){return this.v$.reduce(((t,i)=>t.cB(i.Rq)),Ai.SB())}gn(){this.p$(),this.y$.fn(he.H_,this.M$),this.sA.fn(l.gw,this.M$),this.sA.fn(Uk,this.T$),this.v$.forEach((t=>t.fn(jL.zq,this.m$))),0!==this.N$&&(i.Jd(this.N$),this.N$=0),this.D$=!0}mq(t){if(this.sA.If)return!1;if(0!==this.N$)return!1;const e=this.EJ.wf,s=e.fB(t);if(s>=0&&t+Rk<e.jn(s))return!1;const n=s>=0?s+1:e.MB(t);if(n<0||n>=e.U)return!1;const r=e.Cn(n);if(Ai.IB(t,r).dB(this.Rq).NB>1)return!1;if(i.I$)return this.S$=this.sA.Mf,this.N$=i.$d((()=>{this.S$===this.sA.Mf&&this.E$(r),this.N$=0}),250),!0;return!(_.abs(r-t)<=.001)&&(this.E$(r),!0)}E$(t){this.sA.Sm(t,!1,!0)}b$(){0!==this.L$&&(i.Jd(this.L$),this.L$=0),this.sA.fn(l.Sw,this.Jl)}k$(){this.D$||0===this.C$&&(this.b$(),this.C$=i.x$(this.O$,250))}p$(){0!==this.C$&&(i.j$(this.C$),this.C$=0),this.b$(),this.sA.e_||(this.z$=0)}P$(){return!this.sA.Ff&&!this.sA.e_&&0!==this.sA.Gf&&!this.sA.If&&!this.sA.lt&&(this.B$()||this.y$.Jf>=ae.cT)}B$(){const t=this.sA.Mf,i=this.EJ.wf,e=i.fB(t);return-1!==e&&i.jn(e)>t+Rk}R$(t,i){const e=i.fB(t);return e>-1?i.jn(e):t}constructor(t,e,s,n){this.EJ=t,this.y$=e,this.sA=s,this.D$=!1,this.v$=[],this.N$=0,this.L$=0,this.U$=0,this.S$=0,this.z$=0,this.C$=0,this.Q$=1,this.m$=t=>{const i=this.sA.Mf,e=t.Bq.gr(i),s=t.Bq.gr(i,Rk)&&this.sA.Jf<=ae.uT;(e||s)&&this.mq(i)},this.M$=Ld((t=>{if(this.D$)return;if(this.y$.Jf<=ae.uT){const t=this.sA.Mf;this.mq(t)||this.O$()}}),100),this.Jl=Ld((t=>{this.k$()}),100),this.T$=()=>{this.P$()?0===this.C$&&(this.sA.yn(l.Sw,this.Jl),this.L$=i.$d((()=>{this.k$()}),3500)):this.p$()},this.O$=()=>{const t=this.U$,e=this.z$,s=this.sA.Mf,n=i.Kd(),r=this.EJ.wf;if(t!==s)return this.U$=s,this.z$=n,this.Q$=1,void(this.F$=i.Y$?2e3:1e3);if(this.P$()&&0!==r.U&&e>0&&n>e+this.F$){let t;const i=this.Rq.nB().dB(r),e=i.yB(s);if(-1!==e){const n=i.Cn(e);if(n-s<1){const s=i.jn(e);0,t=s}}var h;if(!t)t=null==(h=this.G$)?void 0:h.determineStallJumpTarget(),t||(t=s+.01*this.Q$,r.gr(t)||(t=this.R$(s,r)));0,this.U$=t,this.Q$++,this.F$=_.min(2*this.F$,1e4),this.E$(t)}},this.y$.yn(he.H_,this.M$),this.sA.yn(l.gw,this.M$),this.sA.yn(Uk,this.T$),this.G$=n,this.F$=i.Y$?2e3:1e3}};function Fk(t){const i=[];if(t.V$&&i.push(t.V$.wf),t.W$&&i.push(t.W$.wf),0===i.length)return Ai.SB();let e=0;for(const t of i)t.U>0&&(e=_.max(e,t.jn(t.U-1)));const s=t.Cq;let n=new Ai([0,e],[!0,s]);for(let t of i)s&&t.U>0&&(t=t.cB(new Ai([t.jn(t.U-1),e],[!0,!0]))),n=n.Sn(t);return n}function Yk(t,i,e){const s=t.wf;let n,r=s.fB(i);if(r>=0){if(!(r+1<s.U))return Promise.resolve();n=s.Cn(r+1)}else{if(r=s.MB(i),!(r>=0))return Promise.resolve();n=s.Cn(r)}return t.ET(n,1/0,e)}function Gk(t,i,e){if(!t.gr(i)){const s=t.fB(i,e);if(s>=0){const e=t.Cn(s);if(i<e)return e}}return i}var Vk=class{H$(){return new this.q$}X$(t){return this.q$.isTypeSupported(t)}constructor(t){this.q$=Wk(t)}};function Wk(t){return t&&ho(_s.ManagedMediaSource)?_s.ManagedMediaSource:ho(_s.MediaSource)?_s.MediaSource:void 0}var Ls,Hk=fi.OE||fi.zE,qk=fi.FE||fi.WE&&fi.qE>=17;!function(t){t.UJ="closed",t.NI="open",t.Jg="ended"}(Ls||(Ls={}));var Xk=class extends OL{get V$(){return this.Z$}get W$(){return this.K$}get ct(){if(this.J$)return this.J$;const t=this.Fz.duration;return t===vu?1/0:t}t0(t){if(S(t)||t<0)throw new g("Invalid duration");this.i0()?this.e0(t):this.J$=t}e0(t){const i=t===1/0;if(i&&this.Fz.setLiveSeekableRange){const t=2**39;this.Fz.setLiveSeekableRange(0,t)}this.Fz.duration=i?qk?1/0:vu:t,this.J$=void 0}get wf(){return Hk?Fk(this):function(t,i){let e=i;return e.U>0&&t.Cq&&(e=e.cB(Ai.DB(e.jn(e.U-1)))),e}(this,Ai.xn(this.Ox.buffered))}get xq(){var t;return null==(t=this.Z$)?void 0:t.wf}get Oq(){var t;return null==(t=this.K$)?void 0:t.wf}get t_(){return this.s0.f$().Sn(new Ai([0,this.ct],[!0,!0]))}n0(t,i,e,s){this.s0=new Bk(t,i,!!e,!!s)}get Cq(){return(!this.Z$||this.Z$.Cq())&&(!this.K$||this.K$.Cq())}get Jf(){return this.Fz.readyState}async bW(){const t=this.lx,i=Po(t.r0,(t=>At(t.qz,"audio"))),e=Po(t.r0,(t=>At(t.qz,"video")));if(this.Ox.disableRemotePlayback=!0,await this.h0(),i){const t=new BL;var s;this.o0.A$(t);const e=null!=(s=this.FJ(i.qz))?s:i.qz;this.a0=this.Fz.addSourceBuffer(e),this.Z$=zk(this,this.sA,i,Vt.ym,this.a0,e,t),this.Z$.yn(Z.hq,this.XJ)}if(e){const t=new BL;var n;this.o0.A$(t);const i=null!=(n=this.FJ(e.qz))?n:e.qz;this.u0=this.Fz.addSourceBuffer(i),this.K$=zk(this,this.sA,e,Vt.pm,this.u0,i,t),this.K$.yn(Z.hq,this.XJ)}this.vq.$n(this,t)}async h0(){await super.bq(this.Fz),"open"!==this.Jf&&await ti(this.Fz,"sourceopen")}i0(){if("open"!==this.Jf)return!1;const t=this.Z$&&this.Z$.oa,i=this.K$&&this.K$.oa;return!(t||i)}t$(){this.c0=!0,this.Z$&&this.Z$.t$(),this.K$&&this.K$.t$(),this.c0=!1,this.l0()}GJ(){this.Z$&&this.Z$.GJ(),this.K$&&this.K$.GJ()}gq(t){const i=Po(t.r0,(t=>At(t.qz,"audio"))),e=Po(t.r0,(t=>At(t.qz,"video")));if(this.Z$){if(!i)return!1;if(!this.Z$.gq(i))return!1}else if(i)return!1;if(this.K$){if(!e)return!1;if(!this.K$.gq(e))return!1}else if(e)return!1;return!!super.gq(t)}async Aq(t){const i=Po(t.r0,(t=>At(t.qz,"audio"))),e=Po(t.r0,(t=>At(t.qz,"video"))),s=[];this.Z$&&s.push(this.Z$.Aq(i)),this.K$&&s.push(this.K$.Aq(e)),await Promise.all(s),await super.Aq(t)}async Ud(){if(this.Fz.removeEventListener("sourceclose",this.d0),fi.LE&&await this.kq(),this.Z$){if(await this.Z$.Ud(),this.Z$=void 0,Gy()&&(fi.LE||fi.DE))try{this.Fz.removeSourceBuffer(this.a0)}catch(t){}this.a0=void 0}if(this.K$){if(await this.K$.Ud(),this.K$=void 0,Gy()&&(fi.LE||fi.DE))try{this.Fz.removeSourceBuffer(this.u0)}catch(t){}this.u0=void 0}this.Ox.src&&URL.revokeObjectURL(this.Ox.src),this.Ox.disableRemotePlayback=!1,this.sA.fn([l.yw,l.hw],this.f0),this.o0.gn(),fi.DE&&await this.kq(),await super.Ud()}d$(){const t=this.lx,i=t.r0.map((t=>At(t.qz,"audio")&&this.Z$?this.Z$.wd:At(t.qz,"video")&&this.K$?this.K$.wd:t));this.lx=Tt({},t,{r0:i})}i$(){this.c0||this.l0()}get _0(){if(!this.Cq)return!1;const t=this.wf;return 0!==t.U&&t.Cn(t.U-1)<=this.sA.Mf}l0(){this._0&&this.i0()&&(this.Fz.endOfStream(),this.J$=void 0,this.Co(new wn(Vs.tU)),this.sA.XJ())}WJ(){this.i0()&&(this.Cq?this.l0():void 0!==this.J$&&this.e0(this.J$))}mq(t){return this.o0.mq(t)}FJ(t){return Zk(this.g0,t)}static jq(t){const i=Wk(t.w0);if(void 0===i)return!1;if("function"!=typeof i.isTypeSupported)return!1;const e=new Vk(t.w0);for(const i of t.r0)if(void 0===Zk(e,i.qz))return!1;return!0}constructor(t,i,e,s,n,r=new Vk(t.w0),h){super(t,i,s,n),this.Z$=void 0,this.a0=void 0,this.K$=void 0,this.u0=void 0,this.s0=new Bk(0,1/0),this.J$=void 0,this.c0=!1,this.d0=()=>{this.Co(new wn(Vs.lq))},this.f0=()=>{this.l0()},this.XJ=()=>{this.sA.XJ()},this.g0=r,this.Fz=this.g0.H$(),this.Fz.addEventListener("sourceclose",this.d0),this.sA.yn([l.yw,l.hw],this.f0),this.o0=new Qk(this,e,this.sA,h)}};function Zk(t,i){const e=$A(i),s=kk(e),n="audio/mp4"===e.Rg,r=n&&1===s.length&&"mp4a.40.34"===s[0];if(t.X$(i)&&(!r||!fi.WE))return i;if(r){const i=['audio/mp4; codecs="mp3"',"audio/mpeg"];for(const e of i)if(t.X$(e))return e}if(n&&1===s.length&&"flac"===s[0].toLowerCase()){const e=["flac","fLaC","FLAC"];for(const s of e){const e='audio/mp4; codecs="'+s+'"';if(t.X$(i))return e}}}var Kk=class extends wn{constructor(t){super(l.hw),this.currentTime=t}},Jk=[l.Ew,l.ww,l.yw,l.hw,l.jh,l.Sh],$k=class extends xd{get Mf(){return this.EB}get A0(){return this.v0}get m0(){return this.p0}get ct(){return this.VL}get If(){return this.y0}get Ff(){return this.kB}get Jf(){return this.M0}get e_(){return this.bB}get Pf(){return this.LB}set Pf(t){this.Pf!==t&&(this.LB=t,this.Co(new Je(this.Mf,this.c_)))}get Gf(){return this.CB}set Gf(t){this.Gf!==t&&(this.CB=t,this.Co(new ls(this.Mf,this.Gf)))}get c_(){return this.ck}set c_(t){this.c_!==t&&(this.ck=t,this.Co(new Je(this.Mf,this.c_)))}Sm(t,i,e){this.EB!==t&&(this.EB=t,this.v0=i,e&&!this.bB?(this.p0=!0,this.Co(new Kk(this.Mf))):(this.p0=!1,this.bB=!0,this.Co(new Eh(this.Mf))))}m_(){this.kB||(this.kB=!0,this.Co(new ge(this.Mf)))}p_(){this.kB&&(this.kB=!1,this.Co(new sh(this.Mf)))}Ud(){this.Vo()}constructor(t,i,e,s,n,r,h,o,a,u,c){super(),this.EB=t,this.VL=i,this.y0=e,this.kB=s,this.bB=n,this.LB=r,this.CB=h,this.ck=o,this.M0=a,this.v0=u,this.p0=c}};function tC(t){return new $k(t.Mf,t.ct,t.If,t.Ff,t.e_,t.Pf,t.Gf,t.c_,t.Jf,!1,t.m0)}function iC(t,i){i.ct===t.ct||S(i.ct)&&S(t.ct)||t.Co(new jn(t.ct)),t.Pf=i.Pf,t.c_=i.c_,t.Gf=i.Gf,i.Ff?t.m_():t.p_().catch(qt),i.Mf!==t.Mf||i.Jf>ae.aT&&t.Jf===ae.aT?t.Sm(i.Mf,i.A0,i.m0):!i.e_&&t.e_?t.Co(new Eh(t.Mf)):i.e_&&!t.e_&&t.Jf>=ae.uT&&t.Co(new we(t.Mf)),!i.If&&t.If&&t.Co(new ee(t.Mf))}var eC=class extends xd{get Jf(){return this.$f()}T0(t){this.iO!==t&&(this.iO=t,this.Co(new ro(this.sA.Mf,t)))}N0(){this.T0(this.$f())}tr(){this.T0(ae.aT)}Ud(){this.Vo()}constructor(t){super(),this.iO=ae.aT,this.D0=()=>{this.N0()},this.sA=t}},sC=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],qu=class extends eC{$f(){let t=this.sA.Uz.readyState;return t>ae.uT&&this.sA.I0?ae.uT:(this.sA.Uz.seeking&&t>ae.Xn&&(t=ae.Xn),t)}Ud(){for(const t of sC)this.sA.Uz.removeEventListener(t,this.D0);super.Ud()}constructor(t){super(t);for(const t of sC)this.sA.Uz.addEventListener(t,this.D0)}},nC=class extends eC{$f(){if(this.sA.Uz.readyState===ae.aT)return ae.aT;const t=this.S0(),i=t?t.jn-t.Cn:0;if(!t)return ae.Xn;const e=this.sA.Gf;return this.E0()||i>=3*e?ae.lT:i>=3?ae.cT:ae.uT}S0(){const t=this.sA.Mf,i=this.sA.wf.uB(.04),e=i.fB(t);if(!(e<0))return{Cn:t,jn:i.jn(e)}}E0(){if(this.sA.If)return!0;const t=this.sA.ct,i=this.S0();return!!i&&t-i.jn<=.16666666666666666}Ud(){this.sA.fn([l.yw,l.hw],this.D0);for(const t of sC)this.sA.Uz.removeEventListener(t,this.D0);super.Ud()}constructor(t){super(t),this.sA.yn([l.yw,l.hw],this.D0);for(const t of sC)this.sA.Uz.addEventListener(t,this.D0)}},rC=[he.H_,l.jh,l.Sh,l.yw,l.pw,l.hw,l.aw,l.Jg,ut.ha],hC=class extends xd{b0(){return(!this.Zx.m0||!this.Zx.L0)&&this.Zx.Jf<ae.cT}k0(){return!this.Zx.e_&&!(this.Zx.Ff||this.Zx.If||this.Zx.lt||this.b0())}Yn(){const t=this.C0;this.C0=this.k0(),!t&&this.C0&&this.Co(new Zr(this.Zx.Mf))}tr(){this.C0=!1}Ud(){this.Vo(),this.Zx.fn(rC,this.tG)}constructor(t){super(),this.C0=!1,this.tG=()=>{this.Yn()},this.Zx=t,this.Zx.yn(rC,this.tG)}},oC=class extends hC{k0(){return this.x0&&super.k0()}Yn(){this.x0&&(this.Ox.paused||this.Ox.ended||this.Ox.error)&&(this.x0=!1),super.Yn()}tr(){super.tr(),this.x0=!1}Ud(){this.Ox.removeEventListener(he.Rw,this.oO),super.Ud()}constructor(t){super(t),this.x0=!1,this.oO=()=>{this.x0=!0,this.Yn()},this.Ox=t.Uz,this.Ox.addEventListener(he.Rw,this.oO)}},aC=class extends wn{constructor(t){super(ut.ha),this.lt=t}};function uC(t,i){return t.GT<=i&&t.VT>i}function xa(t,i){return function(t,i){return Oo(t.GT,i.GT,Gw)}(t,i)||function(t,i){return Oo(t.VT,i.VT,Gw)}(t,i)}function cC(t,i){return function(t,i){return Oo(t.JT,i.JT,Gw)}(t,i)||function(t,i){return Oo(t.$T,i.$T,Gw)}(t,i)}function zr(t,i,e){let s=function(t,i,e,s,n,r,h){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===h&&(h=t.length);let o=r,a=h-1;for(;o<=a;){const h=o+(a-o>>1),u=s(e(t[h]),i);if(u<0)o=h+1;else if(u>0)a=h-1;else{if(!(n&&h>r&&0===s(e(t[h-1]),i)))return h;a=h-1}}return~o}(t,i,bd,e,!0);if(s<0)return s;for(;s<t.length&&e(i,t[s])===Va.Zr;s++)if(t[s].oN(i))return s;return-(s+1)}function lC(t,i,e){const s=zr(t,i,e);return s>=0?s:-(s+1)}function dC(t){const i=t.Lt;if(!i)return-1;if(t instanceof Xn)return i.O0(t);const e=i.L;if(!e)return-1;const s=zr(e.og,t,xa);return s>=0?s:-1}function fC(t,i){const e=function(t,i,e){const s=t.length,n=i.length;let r=0,h=0;const o=[],a=[];for(;r<s&&h<n;){const s=t[r],n=i[h];s===n?(r++,h++):e(n,s)<=0?(o.push(n),h++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;h<n;)o.push(i[h]),h++;return{j0:o,z0:a}}(t,i,xa);return function(t,i){const e=i.length;for(let s=0;s<e;s++)t[s]=i[s];t.length=e}(t,i),e}var nr=class{get og(){return this.P0}get U(){return this.P0.length}get va(){if(this.Xa){const t=this.P0;this.Xa.length=t.length;for(let i=0;i<t.length;i++)this.Xa[i]=t[i].va}else this.Xa=this.fa();return this.Xa}fa(){return function(t){const i=[];for(let e=0;e<t.U;e++)i[e]=t.Fb(e).va;return i.item=i=>{const e=0|i,s=t.Fb(e);return s&&s.va||void 0},w.defineProperty(i,"constructor",{value:Uw}),i}(this)}bT(t){const i=this.P0;for(let e=i.length-1;e>=0;e-=1){const s=i[e];if(t.oN(s))return!0}return!1}Fb(t){return this.P0[t]}constructor(t){this.Xa=void 0,this.P0=t}},_C=class extends Ih{fa(){return new gC(this.Lt.va,this.Jf)}constructor(t,i){super(qo.H_),this.Lt=t,this.Jf=i}},gC=class extends ko{constructor(t,i){super("readystatechange"),this.track=t,this.readyState=i}},wC=class extends Ih{fa(){return new AC(this.Lt.va)}constructor(t){super(qo.X_),this.Lt=t}},AC=class extends ko{constructor(t){super("typechange"),this.track=t}},vC=class extends Ih{fa(){return new mC(this.YT.va)}constructor(t){super(qo.O_),this.YT=t}},mC=class extends ko{constructor(t){super("addcue"),this.cue=t}},pC=class extends Ih{fa(){return new yC(this.YT.va)}constructor(t){super(qo.z_),this.YT=t}},yC=class extends ko{constructor(t){super("removecue"),this.cue=t}},hn=class extends xd{get q(){return this.B0}get L(){return this.R0}U0(t){return Po(this.R0.og,(i=>i.o===t))}get LS(){return this.Q0}set LS(t){this.Q0=t}get Bg(){return this.F0}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return ua(this)}get o(){return this.CT}get Mg(){return this.xT}get Og(){return this.Y0}set Og(t){this.Y0=t}get zt(){return this.G0}get kh(){return this.OT}set kh(t){t!==this.OT&&(this.OT=t,this.Co(new Gs(this)))}get gs(){return this.WL}get Tg(){return this.V0}get jg(){return this.iR}set jg(t){this.Xo(t)}Xo(t){const i=qs(t);i!==this.jg&&(this.iR=i,i===Ha.Ch&&(this.W0.forEach((t=>{t.ro=!1})),No(this.W0),this.H0=0),this.Co(new no(this)))}get Jf(){return this.M0}set Jf(t){this.M0!==t&&(this.M0=t,this.Co(new _C(this,this.M0)))}get Ug(){return this.q0}set Ug(t){this.q0=t}get Rg(){return this.X0}set Rg(t){this.X0!==t&&(this.X0=t,this.Co(new wC(this)))}SS(t){if(!t||t.Lt)return;const i=zr(this.Z0,t,cC);if(i>=0)return;t.Lt=this;const e=-(i+1);this.Z0.splice(e,0,t);const s=lC(this.L.og,t,xa);this.K0(t,s),this.Co(new vC(t))}K0(t,i){this.P0.splice(i,0,t),this.J0(i),t.cN=i,i<this.H0&&(this.H0=i)}xI(t){if(!t||t.Lt!==this)return;const i=this.O0(t);if(i<0)return;t.ro=!1;const e=this.W0,s=zr(e,t,xa);s>=0&&ja(e,s);const n=zr(this.Z0,t,cC);n>=0&&ja(this.Z0,n),this.$0(t,i),this.Co(new pC(t))}$0(t,i){ja(this.P0,i),this.J0(i),t.cN=-1,this.H0>i&&--this.H0}eN(t){if(!t||t.Lt!==this)return;const i=this.O0(t);if(i<0)return;this.$0(t,i);const e=lC(this.L.og,t,xa);this.K0(t,e);const s=uu(this.W0,(i=>i===t));if(s>=0){ja(this.W0,s);const i=lC(this.W0,t,xa);this.W0.splice(i,0,t)}}t1(t,i){const e=this.W0,s=this.P0;let n=this.H0,r=!1;i&&(n=0);for(let i=e.length-1;i>=0;i--){uC(e[i],t)||(r=!0,ja(e,i))}for(;n<s.length&&s[n].GT<=t;){const i=s[n];if(0===t)break;uC(i,t)&&!gd(e,i)&&(r=!0,e.push(i)),n++}r&&Zl(e,xa),this.H0=n}O0(t){return(-1===t.cN||t.cN>=this.i1)&&this.e1(),t.cN}e1(){const t=this.P0;for(let i=this.i1;i<t.length;i++)t[i].cN=i;this.i1=t.length}J0(t){t<this.i1&&(this.i1=_.max(t,0))}Pg(t){this.Bg||(this.jg=t)}gn(){this.Vo();const t=this.P0.slice();for(const i of t)i.gn();No(this.P0),No(this.Z0),No(this.W0)}constructor(t,i,e,s,n,r,h,o,a){super(),this.xT=du(),this.Q0=!1,this.iR=Ha.Ch,this.M0=Ua.NONE,this.q0=void 0,this.P0=[],this.Z0=[],this.W0=[],this.i1=0,this.H0=0,this.CT=i||"",this.Y0=o||"",this.G0=t,this.WL=s||"",this.Q0=Boolean(n),this.F0=Boolean(h),this.X0=r||Kc.DEFAULT,this.OT=e||"",this.V0=a||[],this.R0=new nr(this.P0),this.B0=new nr(this.W0)}},MC=class extends $a{fa(){return new TC(this.YT.va)}constructor(t,i){super(Sl.QT,t),this.uD=i}},TC=class extends fu{constructor(t){super("enter",t)}},xr=class extends $a{fa(){return new NC(this.YT.va)}constructor(t,i){super(Sl.FT,t),this.uD=i}},NC=class extends fu{constructor(t){super("exit",t)}},DC=class extends Ih{fa(){return new IC(this.YT.va)}constructor(t){super(qo.U_),this.YT=t}},IC=class extends ko{constructor(t){super("entercue"),this.cue=t}},SC=class extends Ih{fa(){return new EC(this.YT.va)}constructor(t){super(qo.F_),this.YT=t}},EC=class extends ko{constructor(t){super("exitcue"),this.cue=t}},Hr=class extends Mo{get Mg(){return this.xT}get GT(){return this.s1.startTime}set GT(t){this.s1.startTime=t}get VT(){return this.s1.endTime}set VT(t){this.s1.endTime=t}get O(){return this.nN}set O(t){this.nN=t}get rN(){return!!this.s1.pauseOnExit}set rN(t){this.s1.pauseOnExit=!!t}get Lt(){return this.iN}set Lt(t){this.iN=t}get o(){return this.s1.id||""}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return $h(this)}get ro(){return this.ho}set ro(t){this.ro!==t&&(this.ho=t,t?(this.Co(new MC(this,this.GT)),this.iN&&this.iN.Co(new DC(this))):(this.Co(new xr(this,this.VT)),this.iN&&this.iN.Co(new SC(this))))}oN(t){return this===t||Wd(this,t)&&Vw(this,t)&&this.aN(t)}aN(t){return Th(this.O,t.O)}gn(){this.Vo(),this.s1.removeEventListener("enter",this.n1),this.s1.removeEventListener("exit",this.o1)}constructor(t){super(),this.nN=void 0,this.iN=void 0,this.Xa=void 0,this.ho=!1,this.n1=()=>{this.ro=!0},this.o1=()=>{this.ro=!1},this.xT=Lw(),this.s1=t,this.JT=t.startTime,this.$T=t.endTime,this.s1.addEventListener("enter",this.n1),this.s1.addEventListener("exit",this.o1)}},bC=class extends Ih{fa(){return new LC(this.Lt.va)}constructor(t){super(qo.G_),this.Lt=t}},LC=class extends ko{constructor(t){super("cuechange"),this.track=t}};function kC(t){if(!t)return;let i=t.THEOplayerVTTRegion;return i||(i=new CC(t),t.THEOplayerVTTRegion=i),i}var CC=class{get a1(){return this.u1}get o(){return this.u1.id||""}get ji(){return+this.u1.width||0}set ji(t){this.u1.width=t||0}get lN(){return+this.u1.lines||0}set lN(t){this.u1.lines=t||0}get dN(){return+this.u1.regionAnchorX||0}set dN(t){this.u1.regionAnchorX=t||0}get fN(){return+this.u1.regionAnchorY||0}set fN(t){this.u1.regionAnchorY=t||0}get gN(){return+this.u1.viewportAnchorX||0}set gN(t){this.u1.viewportAnchorX=t||0}get wN(){return+this.u1.viewportAnchorY||0}set wN(t){this.u1.viewportAnchorY=t||0}get _N(){return this.u1.scroll||""}get va(){return this.Xa||(this.Xa=Zw(this)),this.Xa}constructor(t){this.Xa=void 0,this.u1=t}};var xC=class extends Hr{get O(){return this.s1.text}set O(t){this.s1.text=t}get Pt(){return this.s1.vertical||""}set Pt(t){this.s1.vertical=t||""}get KT(){return this.s1.snapToLines}set KT(t){this.s1.snapToLines=t}get HT(){return this.s1.line}set HT(t){this.s1.line=t}get rp(){return+this.s1.size}set rp(t){this.s1.size=ks(t,0,100)}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return Qw(this)}aN(t){return Ww(this,t)}constructor(t){super(t)}},OC=class extends xC{get ZT(){return kC(this.s1.region)}get qT(){return this.s1.lineAlign||"start"}set qT(t){this.s1.lineAlign=t||"start"}get po(){return this.s1.position}set po(t){this.s1.position=t}get XT(){return this.s1.positionAlign||"auto"}set XT(t){this.s1.positionAlign=t||"auto"}get WT(){return this.s1.align||"center"}set WT(t){this.s1.align=t||"center"}constructor(t){super(t)}},jC=class extends xC{get ZT(){return kC(this.a1)}get a1(){return function(t,i){if(void 0===i)return;let e=t&&t.regions;return e&&e.getRegionById(i)||void 0}(this.s1.track,this.s1.regionId)}get qT(){return function(t){return"middle"===t?"center":t}(this.s1.lineAlign||"start")}set qT(t){this.s1.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get po(){return this.s1.position}set po(t){this.s1.position=function(t,i){return Rw(t,i)}(t,this.WT)}get XT(){return function(t){return Pw[t]}(this.s1.positionAlign||"middle")}set XT(t){this.s1.positionAlign=function(t,i){return zw[Bw(t,i)]}(t||"center",this.WT)}get WT(){return function(t){return"middle"===t?"center":t}(this.s1.align||"middle")}set WT(t){this.s1.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function zC(t,i){return t.O===i.O}function PC(t,i){if(0===i.length)return;const e=i.length-1;if(i[e].GT<t.GT)return void BC(i,e,t.GT);const s=i[0];if(s.GT>t.GT)return void(t.VT=s.GT);const n=zr(i,t,xa);if(n>=0)return;const r=-(n+1),h=r-1;if(h>=0){i[h].GT<t.GT&&BC(i,h,t.GT)}if(r<i.length){const e=i[r];t.VT=e.GT}}function BC(t,i,e){const s=t[i].GT;for(let n=i;n>=0&&t[n].GT===s;n--)t[n].VT=e}function RC(t){return $h(t)}var UC,QC,FC=class extends Hr{get O(){return this.c1}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return RC(this)}aN(t){return zC(this,t)}constructor(t,i){super(t),this.c1=i}};function R(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function F(t){switch(t){case 0:return hu;case 1:return sg;case 2:return ng;case 3:return gl}}function YC(t,i){const e=i.Ku,s=t.byteLength,n=Kn(t);return i.Im(s-e),Ko(n,e,s).buffer}function GC(t,i){return{id:t||"",data:i instanceof ArrayBuffer?i:void 0}}function VC(t,i,e){const s=hl(t,i);if(!R(s))return;const n=F(s);return{id:e,language:jh(t,i,3),description:n(t,i),text:n(t,i)}}function WC(t,i,e){const s=hl(t,i);if(!R(s))return;const n=F(s);return{id:e,mimeType:hu(t,i),fileName:n(t,i),description:n(t,i),data:YC(t,i)}}function HC(t,i,e){const s=hl(t,i);if(!R(s))return;const n=F(s),r=[];for(;i.Ku<t.byteLength;)r.push({involvement:n(t,i),involvee:n(t,i)});return{id:e,entries:r}}function qC(t,i,e){const s=hl(t,i);if(!R(s))return;const n=F(s),r=jh(t,i,3),h=hl(t,i),o=hl(t,i),a=n(t,i);let u=!1;const c=[];for(;i.Ku<t.byteLength;){let e;if(1===s){let s=eg(t,i);void 0===s?s=u:u=s,e=ng(t,i,s)}else e=n(t,i);if(!e||i.Ku+4>t.byteLength)break;c.push({text:e,timestamp:oo(t,i)})}return{id:e,language:r,format:h,contentType:o,description:a,entries:c}}function XC(t,i,e){return{id:e,ownerIdentifier:hu(t,i),identifier:YC(t,i)}}function ZC(t,i,e){const s=hl(t,i);if(!R(s))return;const n=F(s);return{id:e,language:jh(t,i,3),description:n(t,i),text:n(t,i)}}function KC(t,i,e){const s=hl(t,i);if(!R(s))return;return{id:e,text:F(s)(t,i)}}function JC(t,i,e){return{id:e,url:hu(t,i)}}function $C(t,i,e){const s=hl(t,i);if(!R(s))return;const n=F(s);return{id:e,description:n(t,i),text:n(t,i)}}function tx(t,i,e){const s=hl(t,i);if(!R(s))return;return{id:e,description:F(s)(t,i),url:hu(t,i)}}function ix(t,i,e){switch(e){case"COM":return VC(t,i,e);case"GEO":return WC(t,i,e);case"IPL":return HC(t,i,e);case"PIC":return function(t,i,e){const s=hl(t,i);if(!R(s))return;const n=F(s),r=jh(t,i,3),h=hl(t,i),o=n(t,i);let a,u;return"--\x3e"===r?(a=r,u=hu(t,i)):(a="image/"+r.toLowerCase(),u=YC(t,i)),{id:e,mimeType:a,pictureType:h,description:o,data:u}}(t,i,e);case"SLT":return qC(t,i,e);case"TXX":return $C(t,i,e);case"UFI":return XC(t,i,e);case"ULT":return ZC(t,i,e);case"WXX":return tx(t,i,e);default:if("T"===e.charAt(0))return KC(t,i,e);if("W"===e.charAt(0))return JC(t,i,e)}}function ex(t,i,e){switch(e){case"APIC":return function(t,i,e){const s=hl(t,i);if(!R(s))return;const n=F(s),r=hu(t,i),h=hl(t,i),o=n(t,i);let a;return a="--\x3e"===r?hu(t,i):YC(t,i),{id:e,mimeType:r,pictureType:h,description:o,data:a}}(t,i,e);case"COMM":return VC(t,i,e);case"COMR":return function(t,i,e){const s=hl(t,i);if(!R(s))return;const n=F(s),r=hu(t,i),h=jh(t,i,8),o=hu(t,i),a=hl(t,i),u=n(t,i),c=n(t,i);let l,d;return i.Ku<t.byteLength&&(l=hu(t,i)||"image/",d=YC(t,i)),{id:e,price:r,validUntil:h,contactURL:o,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:l,sellerLogo:d}}(t,i,e);case"GEOB":return WC(t,i,e);case"IPLS":return HC(t,i,e);case"PRIV":return function(t,i,e){return{id:e,ownerIdentifier:hu(t,i),data:YC(t,i)}}(t,i,e);case"POSS":return function(t,i,e){return{id:e,format:hl(t,i),position:oo(t,i)}}(t,i,e);case"SYLT":return qC(t,i,e);case"TXXX":return $C(t,i,e);case"UFID":return XC(t,i,e);case"USER":return function(t,i,e){const s=hl(t,i);if(!R(s))return;const n=F(s);return{id:e,language:jh(t,i,3),text:n(t,i)}}(t,i,e);case"USLT":return ZC(t,i,e);case"WXXX":return tx(t,i,e);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return KC(t,i,e);default:{const s=e.charAt(0);if("T"===s)return KC(t,i,e);if("W"===s)return JC(t,i,e)}}}!function(t){t[t.ISO_8859_1=0]="ISO_8859_1",t[t.UTF16_BOM=1]="UTF16_BOM",t[t.UTF16=2]="UTF16",t[t.UTF8=3]="UTF8"}(UC||(UC={})),function(t){t[t.V22=2]="V22",t[t.V23=3]="V23",t[t.V24=4]="V24"}(QC||(QC={}));var sx=10;function nx(t,i){return(127&hl(t,i))<<21|(127&hl(t,i))<<14|(127&hl(t,i))<<7|127&hl(t,i)}function rx(t,i){switch(t){case 4:return{l1:eu(i,0),d1:eu(i,1),f1:eu(i,2),_1:eu(i,3)};case 3:return{l1:eu(i,0),d1:eu(i,1),f1:eu(i,2)};case 2:return{l1:eu(i,0),g1:eu(i,1)}}}function hx(t,i,e){switch(e.lp){case 3:e.dp.d1&&function(t,i){const e=i.Ku,s=oo(t,i)+4,n=32768&il(t,i);i.Sm(e+s),n&&oo(t,i)}(t,i);break;case 4:e.dp.d1&&function(t,i){const e=i.Ku,s=nx(t,i);i.Sm(e+s)}(t,i)}}function ox(t,i){if(t.byteLength-i.Ku<sx)return null;if(73!==hl(t,i)||68!==hl(t,i)||51!==hl(t,i))return null;const e=hl(t,i),s=hl(t,i);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(e))return null;const n=hl(t,i),r=nx(t,i);return{lp:e,w1:s,dp:rx(e,n),A1:r}}function ax(t,i,e){switch(e){case 2:return function(t,i){if(i.Ku+6>t.byteLength)return;return{o:jh(t,i,3),rp:cl(t,i,3)}}(t,i);case 3:return function(t,i){if(i.Ku+10>t.byteLength)return;const e=jh(t,i,4),s=oo(t,i);hl(t,i);const n=hl(t,i);return{o:e,rp:s,dp:{g1:eu(n,0),v1:eu(n,1),groupingIdentity:eu(n,2)}}}(t,i);case 4:return function(t,i){if(i.Ku+10>t.byteLength)return;const e=jh(t,i,4),s=nx(t,i);hl(t,i);const n=hl(t,i);return{o:e,rp:s,dp:{groupingIdentity:eu(n,1),g1:eu(n,4),v1:eu(n,5),l1:eu(n,6),m1:eu(n,7)}}}(t,i)}}function ux(t){const i=Kn(t),e=new j(i.byteLength);let s=0;for(let t=0;t<i.byteLength;t++){const n=i[t];255===n&&t++,e[s]=n,s++}return ha(Ko(e,0,s))}function cx(t,i){const e=i||new L,s=ox(t,e);if(!s)return null;const n=function(t,i,e){const s=[],n=i.Ku;let r=fe(t,n,n+e.A1);const h=new L;switch(i.Im(e.A1),e.lp){case 2:case 3:e.dp.l1&&(r=ux(r))}hx(t,i,e);for(;h.Ku<r.byteLength;){const t=lx(r,h,e);if(void 0===t)break;s.push(t)}return s}(t,e,s);return{np:s,M1:n}}function lx(t,i,e){const s=ax(t,i,e.lp);if(void 0===s)return;if(0===s.o.charCodeAt(0)||0===s.rp)return;const n=i.Ku;let r,h,o=fe(t,n,n+s.rp);switch(i.Im(s.rp),e.lp){case 2:{const t=s;h=o,r=ix(h,new L,t.o);break}case 3:{const t=s,i=new L;!function(t,i,e){const s=e.dp;let n,r,h;s.g1&&(n=oo(t,i)),s.v1&&(r=hl(t,i)),s.groupingIdentity&&(h=hl(t,i))}(o,i,t);h=fe(o,i.Ku,o.byteLength),r=ex(h,new L,t.o);break}case 4:{const t=s,i=new L;t.dp.l1&&(o=ux(o)),function(t,i,e){const s=e.dp;let n,r,h,o;s.groupingIdentity&&(n=hl(t,i)),s.g1&&(r=oo(t,i)),s.v1&&(h=hl(t,i)),s.m1&&(o=nx(t,i))}(o,i,t);h=fe(o,i.Ku,o.byteLength),r=ex(h,new L,t.o);break}}if(!r){const t=Dt(Kn(h));r=GC(s.o,t.buffer)}return r}function dx(t){return function(t,i,e){return KC(t,i,e)}(new DataView(t.data),new L,t.key)}function fx(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return dx(t);default:let i=t.key.charAt(0);if("T"===i)return function(t){return{id:t.key,text:t.data}}(t);if("W"===i)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return GC(t.key,t.data)}(t)}var yn=class t extends xd{get q(){return this.B0}get LS(){return this.T1?this.T1.default:void 0}get L(){return this.R0}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return ua(this)}get o(){return this.kT.id||this.T1&&this.T1.id||""}get Mg(){return this.xT}get Og(){return this.kT.inBandMetadataTrackDispatchType||""}get zt(){return this.kT.kind||Mi.Mm}get kh(){return this.OT}set kh(t){t!==this.OT&&(this.OT=t,void 0!==this.T1&&(this.T1.label=t),this.Co(new Gs(this)))}get gs(){return this.kT.language||""}get jg(){return this.iR}set jg(t){let i=this.jg;this.iR=qs(t),this.N1();let e=this.jg;i!==e&&this.Co(new no(this)),e!==Ha.Ch&&this.D1(Ua.LOADING)}get I1(){return qs(this.kT.mode)}set I1(t){this.kT.mode=t}get jT(){return this.kT}get Jf(){return this.M0}get S1(){return this.T1?+this.T1.readyState||Ua.NONE:Ua.LOADED}get Ug(){return this.q0}get Rg(){return this.X0}set Rg(t){this.X0!==t&&(this.X0=t,this.Co(new wC(this)))}get E1(){return this.b1}set E1(t){this.b1=t,t&&(this.L1=!0,u((()=>{this.L1=!1}),50)),this.N1()}N1(){let t=this.jg;this.E1||t!==Ha.Jn?this.I1=t:this.I1=Ha.zg}C1(){let t=this.jg,i=this.I1;t!==i&&(this.E1||t!==Ha.Jn||i!==Ha.zg)&&("metadata"===this.zt&&i===Ha.Ch?this.jg=t:this.L1&&i===Ha.Ch&&t===Ha.Jn?this.I1=t:this.jg=i)}N0(t){this.M0!==t&&(this.M0=t,this.Co(new _C(this,t)))}D1(t){let i=_.max(this.M0,this.S1,t);this.N0(i)}static O1(t){return t&&t.THEOplayerTextTrackCue||void 0}j1(i){let e=t.O1(i);if(e)return e;if(e=this.z1(i),We(e))for(let t of e)t.Lt=this;else e.Lt=this;return i.THEOplayerTextTrackCue=e,e}z1(t){return function(t){return!(!t||"org.id3"!==t.type||!t.value)}(t)?(this.Rg=Kc.ID3,function(t){let i;try{i=fx(t.value)}catch(t){i=GC("")}return new FC(t,i)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.Rg=Kc.ID3,function(t){let i=[];try{let e=cx(new DataView(t.data));if(e)for(let s of e.M1)i.push(new FC(t,s))}catch(t){}return i}(t)):function(t){return"text"in t}(t)?(this.Rg=Kc.WEBVTT,function(t){return"regionId"in t}(t)?new jC(t):new OC(t)):new Hr(t)}P1(t){let i=[];if(!t)return i;let e=t.length;for(let s=0;s<e;s++){let e=this.j1(t[s]||t.item(s));if(We(e))for(let t of e)i.push(t);else i.push(e)}return i}B1(){let t=this.P1(this.kT.cues),i=fC(this.P0,t);for(let t of i.z0)t.fn(Sl.FT,this.R1),t.fn(Sl.QT,this.R1),this.Co(new pC(t));for(let t of i.j0)t.yn(Sl.QT,this.R1),t.yn(Sl.FT,this.R1),this.Co(new vC(t))}t1(){let t=this.P1(this.kT.activeCues),i=fC(this.W0,t);for(let t of i.z0)t.ro=!1;for(let t of i.j0)t.ro=!0;(i.j0.length||i.z0.length)&&this.Co(new bC(this))}Pg(t){this.jg=t}gn(){this.Vo();const t=this.P0.slice();for(let i of t)i.gn();No(this.P0),No(this.W0),this.kT.removeEventListener("cuechange",this.U1),this.kT.removeEventListener("cuechange",this.R1),this.T1&&(this.T1.removeEventListener("load",this.Q1),this.T1.removeEventListener("error",this.F1),fh(this.T1))}constructor(t,i,e=!0){super(),this.P0=[],this.W0=[],this.iR=Ha.Ch,this.M0=Ua.NONE,this.q0=void 0,this.X0=Kc.DEFAULT,this.L1=!1,this.U1=()=>{this.N1(),this.kT.removeEventListener("cuechange",this.U1)},this.R1=()=>{this.jg!==Ha.Ch&&(this.B1(),this.t1(),this.P0.length&&this.D1(Ua.LOADING))},this.Q1=()=>{this.D1(Ua.LOADED)},this.F1=()=>{this.D1(Ua.ERROR)},this.kT=t,this.b1=e,this.kT.addEventListener("cuechange",this.U1),this.kT.addEventListener("cuechange",this.R1),this.T1=i,this.T1&&(this.q0=oa(this.T1.src),this.T1.addEventListener("load",this.Q1),this.T1.addEventListener("error",this.F1)),this.xT=du(),this.OT=t.label||"",this.R0=new nr(this.P0),this.B0=new nr(this.W0),this.jg=this.I1,Hu((()=>{this.R1(),this.D1(Ua.NONE)}))}};function _x(t,i){return Ee(t.uD,i.uD)||function(t,i){return t.Lt===i.Lt?ra(dC(t),dC(i)):Pv(t.Lt,i.Lt)}(t.YT,i.YT)||function(t,i){return t===i?Va.Zr:t===Sl.QT?Va.hd:Va.ul}(t.type,i.type)}var gx=class{tr(){No(this.Y1);for(const t of this.Dl.slice())this.it(t);this.G1(),this.V1=0,this.An=0,this.W1=!1,this.H1=!1,this.q1=void 0}tt(t){if(!gd(this.Dl,t)){if(this.Dl.push(t),t.yn(qo.O_,this.X1),t.yn(qo.z_,this.Z1),t.yn(qo.B_,this.K1),t.yn(qo.ra,this.J1),t.L.U>0){for(const i of t.L.og)this.t4.push(i);this.i4()}this.e4()}}it(t){if(To(this.Dl,t)){if(t.fn(qo.O_,this.X1),t.fn(qo.z_,this.Z1),t.fn(qo.B_,this.K1),t.fn(qo.ra,this.J1),t.L.U>0){for(const i of t.L.og)To(this.Y1,i),To(this.t4,i);this.i4()}this.e4()}}e4(){this.W1=this.Dl.some((t=>t.jg!==Ha.Ch))}s4(){this.Qo.e_||this.Qo.Ff?this.G1():this.i4()}i4(){this.W1&&(this.V1||(this.V1=this.r4.n4(this.h4)))}G1(){this.V1&&(this.r4.o4(this.V1),this.V1=0)}a4(){if(!this.W1)return;if(this.Qo.e_)return;const t=this.Dl,i=this.An;var e;const s=null!=(e=this.q1)?e:this.Qo.Mf,n=s-i<-.1;let r=this.H1||n;r&&s>i&&s-i<.1&&(r=!1),this.H1=!1,this.q1=void 0;const h=[];for(const i of t)if(i.jg!==Ha.Ch){i.t1(s,r);for(const t of i.q.og)h.push(t)}const o=this.Y1.slice();if(r);else for(const e of t)e.jg!==Ha.Ch&&zv(e,i-Jc,s,o);for(let t=o.length-1;t>=0;t--)gd(h,o[t])&&ja(o,t);const a=[];if(!r)for(let t=o.length-1;t>=0;t--){const e=o[t];e.GT>i&&e.VT<=s&&(a.push(e),ja(o,t))}for(const t of this.t4)To(a,t);No(this.t4);const u=[],c=[];for(const t of a)t.ro||u.push(new MC(t,t.GT)),u.push(new xr(t,_.max(t.GT,t.VT))),t.ro=!1;for(const t of o)t.ro&&(u.push(new xr(t,_.max(t.GT,t.VT))),t.ro=!1);for(const t of h)t.ro||(u.push(new MC(t,t.GT)),t.ro=!0);u.sort(_x);for(const t of u){const i=t.YT;i.Co(t);const e=i.Lt;e&&(t.type===Sl.QT?e.Co(new DC(i)):e.Co(new SC(i)),gd(c,e)||c.push(e))}c.sort(Pv);for(const t of c)t.Co(new bC(t));this.An=s,this.Y1=h}gn(){this.tr(),this.Qo.fn(l.Sw,this.u4),this.Qo.fn(l.jh,this.u4),this.Qo.fn(he.Rw,this.u4),this.Qo.fn(l.Sh,this.u4),this.Qo.fn(l.yw,this.c4),this.Qo.fn(l.pw,this.l4)}constructor(t,i){this.Dl=[],this.V1=0,this.An=0,this.Y1=[],this.t4=[],this.W1=!1,this.H1=!1,this.q1=void 0,this.h4=()=>{this.V1=0,this.a4(),this.s4()},this.u4=()=>{this.a4(),this.s4()},this.c4=()=>{this.H1=!0,this.q1=this.Qo.Mf,this.G1()},this.l4=()=>{this.a4(),this.s4()},this.J1=()=>{this.e4(),this.a4(),this.s4()},this.X1=t=>{const i=t.YT;gd(this.t4,i)||this.t4.push(i),this.i4()},this.Z1=t=>{const i=t.YT;To(this.Y1,i),To(this.t4,i),this.i4()},this.K1=t=>{this.i4()},this.r4=i,this.Qo=t,t.yn(l.Sw,this.u4),t.yn(l.jh,this.u4),t.yn(he.Rw,this.u4),t.yn(l.Sh,this.u4),t.yn(l.yw,this.c4),t.yn(l.pw,this.l4),this.i4()}},wx=class{n4(t){return Ur(t)}o4(t){nn(t)}},Ax=new wx,rh=class extends gx{constructor(t,i=Ax){super(t,i)}},vx=class extends Xn{get va(){return this.Xa||(this.Xa=RC(this)),this.Xa}aN(t){return zC(this,t)}constructor(t,i,e){super(t,1/0,i,!1,e)}},mx=class extends hn{constructor(t,i,e=Kc.DEFAULT){super(Mi.Nm,"",i||"","",!1,e,!1,t)}},px=class extends mx{SS(t){PC(t,this.P0),super.SS(t)}fa(){return ua(this)}constructor(t,i){super(t,i),this.Rg=Kc.ID3}};function yx(t){const i=t&&t.THEOplayerTextTrackCue||void 0;if(i)return i;const e=t.startTime,s=fx(t.value);return t.THEOplayerTextTrackCue=new vx(e,s),t.THEOplayerTextTrackCue}var Mx=class extends px{get o(){return this.kT.id||""}get Og(){return this.kT.inBandMetadataTrackDispatchType||""}get gs(){return this.kT.language||""}Xo(t){super.Xo(t),this.I1=this.jg}get I1(){return qs(this.kT.mode)}set I1(t){this.kT.mode=t}get jT(){return this.kT}D1(t){this.Jf=_.max(this.Jf,t)}B1(){let t=this.kT.cues;if(!t)return;let i=function(t){const i=t.length,e=[];for(let s=0;s<i;s++)e.push(yx(t[s]||t.item(s)));return Zl(e,xa),e}(t),e=fC(this.L.og.slice(),i);for(let t of e.z0)this.xI(t);for(let t of e.j0)this.SS(t)}gn(){this.kT.removeEventListener("cuechange",this.R1),super.gn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.R1=()=>{this.jg!==Ha.Ch&&(this.B1(),this.D1(Ua.LOADED))},this.kT=t,this.kT.addEventListener("cuechange",this.R1),this.jg=this.I1,Hu((()=>{this.R1()}))}};var Tx=class extends ci{d4(){this.f4.yn(yt.L_,this.kz),this.f4.yn(yt.C_,this.Cz)}_4(){this.f4.fn(yt.L_,this.kz),this.f4.fn(yt.C_,this.Cz)}g4(t){const i=t.L.og[0];if(!Nx(i))return;const e=function(t){const i=t.match(Dx);if(!i)return;return{Lt:i[1],gs:i[2]}}(i.O.description),s=e.Lt,n=e.gs;if(this.w4(s,n))return;const r=this.MS.yS(Mi.Mm,t.o,s,n,!1,Kc.TTML);this.tt(r),this.A4.set(t.Mg,r);for(let i of t.L.og)Nx(i)&&this.v4(i);t.yn(qo.O_,this.m4)}w4(t,i){return this.Z.og.some((e=>e.kh===t&&e.gs===i))}v4(t){if(!t.Lt)return;const i=this.A4.get(t.Lt.Mg),e=cv(t.O.text,i,{BD:0,RD:1/0,UD:t.GT});for(let t of e)i.SS(t)}async tr(){for(let t of this.f4.og)t.fn(qo.O_,this.m4);for(let t of this.Z.og)this.MS.bS(t);this.A4.clear(),await super.tr()}async gn(){this._4(),await super.gn()}constructor(t,i){super(),this.MS=t,this.f4=i,this.A4=si(),this.kz=async t=>{const i=t.Lt;if(i.Rg||await i.lf(qo.X_),i.Rg===Kc.ID3){for(;0===i.L.U;)await i.lf(qo.O_);this.g4(i)}},this.Cz=t=>{const i=t.Lt;if(i.Rg!==Kc.ID3||!this.A4.has(i.Mg))return;const e=this.A4.get(i.Mg);this.it(e),this.MS.bS(e),i.fn(qo.O_,this.m4)},this.m4=t=>{Nx(t.YT)&&this.v4(t.YT)},this.d4()}};function Nx(t){return function(t){return function(t){return"TXXX"===t.id||"TXX"===t.id}(t)&&Dx.test(t.description)}(t.O)}var Dx=/^Track:(.+),Lang:(.+)$/;var Mn=class extends wn{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(t){super(l.Vg),this.errorObject=t}},Ix=class extends wn{constructor(){super(l.Wg)}},Sx=class extends wn{constructor(t){super("Cw"),this.y4=t}},Ex=new _r,bx=class extends wn{constructor(t){super("Ws"),this.session=t}},Lx=class extends xd{mC(){return this.M4=!0,Ex.Mx((t=>this.T4(t)),this.Tx.Wd)}async T4(t){try{Bo(t),await this.N4.pO(t);const i=await this.N4.yO(this.D4.Eb,this.D4.Ub,t);await this.I4.mC(this.D4.Eb,this.D4.Ub,i)}catch(t){Ao(t);const i=t instanceof Im?t.Jb:void 0,e=new Qr(Ui.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,i);throw this.Ss(e),e}}async bO(t,i){let e;try{e=function(t){return wa(t,Tm())}(t)?await this.N4.BO(new j(t),this.Tx.Wd):await this.N4.RO(new j(t),i,this.Tx.Wd)}catch(t){if(Ho(t))return;throw t}if(this.Tx.Wd.zd)return;const s=this.S4,n=new Rs;this.S4=n;try{await this.I4.Yn(e),await lt(100)}catch(t){const i=t instanceof Im?t.Jb:void 0;throw new Qr(Ui.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,i)}finally{void 0!==s&&await s.Zb,n.Wb(),this.S4===n&&(this.S4=void 0)}}Ss(t){const i=t instanceof Qr?t:new Qr(Ui.CONTENT_PROTECTION_ERROR,t.message,t);this.Co(new Mn(i)),this.Ws()}E4(){this.I4.fn("Ob",this.TC),this.I4.fn("Cb",this.b4),this.I4.fn("lt",this.L4),this.C4=!1,this.Tx.qd(),this.Co(new bx(this))}async Ws(){let t;this.Vo();do{t=this.S4,void 0!==t&&await t.Zb}while(this.S4!==t);this.E4(),await this.I4.Ws().catch(qt)}constructor(t,e,s){super(),this.I4=t,this.N4=e,this.D4=s,this.M4=!1,this.C4=!1,this.Tx=new na,this.TC=t=>{if(!this.Tx.Wd.zd)switch(t.jb){case"license-request":case"license-renewal":this.bO(t.Ob,t.zb).catch((t=>this.Ss(t)));break;default:this.Ss(new Qr(Ui.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.jb))}},this.b4=t=>{this.I4._C.Yb(((t,e)=>{switch(t){case"usable":i.$d((()=>{this.C4=!0,this.Co(new Ix)}),100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this.Co(new Sx(e))}}))},this.L4=t=>{this.Ss(new Qr(Ui.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.yn("Ob",this.TC),t.yn("Cb",this.b4),t.yn("lt",this.L4),t.cC.then((()=>this.E4()),(t=>this.Ss(t)))}},kx=[l.Wg,l.Vg,l.Lw],Cx=class extends xd{get ZA(){return this.KA}mO(){return this.x4.mO()}O4(t){return this.j4||(this.j4=this.z4(t)),this.j4}async z4(t){Bo(t);const i=await this.x4.BO(new j(Tm()),t);if(Bo(t),!this.IC)throw new g("Invalid MediaKeys when setting ServerCertificate");await this.IC.SC(i.buffer)}async P4(t){if(!this.IC)throw new g("Invalid MediaKeys when creating KeySession");try{this.B4.push(t);const i=await this.IC.DC("temporary"),e=new Lx(i,this.x4,t);return this.R4.push(e),e.yn(kx,this.Ds),e.yn("Ws",this.U4),e}finally{To(this.B4,t)}}Q4(t){if(t.F4)return!1;for(const i of this.R4)if(xx(i.D4,t))return!0;for(const i of this.B4)if(xx(i,t))return!0;return!1}async gn(){this.IC=void 0,this.Vo();const t=this.R4.slice();No(this.R4),await Promise.all(t.map((t=>t.Ws()))),this.x4.Ud()}constructor(t,i,e){super(),this.R4=[],this.j4=void 0,this.B4=[],this.U4=t=>{t.session.fn(kx,this.Ds),t.session.fn("Ws",this.U4),To(this.R4,t.session)},this.KA=t,this.IC=i,this.x4=e}};function xx(t,i){return!t.F4&&t.Eb===i.Eb&&wa(t.Ub,i.Ub)}var Ox=class extends xd{get Y4(){var t;return null==(t=this.KA)?void 0:t.ZA}get uP(){return this.x4}set uP(t){this.x4=t}$n(t,i){this.Fz=t,this.Aq(i)}Aq(t){this.lx=t,this.G4(this.Tx.Wd).catch(Bc)}async G4(t){if(!i.Ys.V4||!await this.W4(t))return this.lx&&this.lx.H4?await this.q4(t):void 0}async W4(t){var i,e;if(!(null==(i=this.lx)?void 0:i.Xz))return!1;let s=!1;var n;for(const i of null!=(n=null==(e=this.lx)?void 0:e.Xz)?n:[]){var r;for(const e of null!=(r=i.Mz)?r:[])try{await this.X4(i.ZA.Eb,e,t),s=!0}catch(t){Ao(t)}if(s)return!0}return!1}async X4(t,e,s){if(Bo(s),!e.byteLength)return;if(!this.lx||!this.lx.Xz.length)throw new Qr(Ui.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(t!==Jf&&t!==t_&&t!==$f)return void 0;const n=kg(t,e),r=this.lx.Xz;let h;for(const i of r){Bo(s);const e=n[i.ZA.bb];if(e&&i.ZA.Eb===t)try{const t=await this.Z4(i,s);t.mO()&&await t.O4();const n=this.sA.xf,r={Eb:i.ZA.Eb,Ub:e,F4:n};if(this.K4(t,r)){const i=await t.P4(r);await i.mC()}return}catch(t){Ao(t),h=t}}throw await i.GC()?new Qr(Ui.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",h):new Qr(Ui.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",h)}async q4(t){var i;const e=null==(i=this.lx)?void 0:i.Xz;if(e)for(const i of e){Bo(t);try{const e=await this.Z4(i,t);return void(e.mO()&&await e.O4())}catch(t){Ao(t)}}}K4(t,e){return i.Ys.J4||this.sA.t2.rq||!t.Q4(e)}Z4(t,i){return this.Mq.Mx((i=>this.i2(t,i)),i)}async i2(t,i){if(Bo(i),!this.lx||!this.x4||!this.Fz)throw new g("Not initialized");if(this.KA){if(this.KA.ZA!==t.ZA)throw new g("Internal key system error");return this.KA}const e=this.x4,s=Tt({},t,{vP:t.vP.map((i=>{var s;return Tt({},i,{persistentState:null!=(s=i.persistentState)?s:e.qO(t.ZA),HC:i.HC||e.HC(t.ZA)})}))}),n=await this.Fz.fq(s.ZA,s.vP),r=e.yz(s),h=new Cx(s.ZA,n,r);return h.yn([l.Wg,l.Vg,l.Lw],this.Ds),this.KA=h,h}Ss(t){if(Ho(t))return;const i=t instanceof Qr?t:new Qr(Ui.CONTENT_PROTECTION_ERROR,t.message,t);this.Co(new Mn(i))}async tr(){this.Fz=void 0,this.lx=void 0,this.Tx.qd(),this.Tx=new na,await this.e2()}async e2(){await this.Mq.qd();const t=this.KA;t&&(t.fn(l.Lw,this.Ds),this.KA=void 0,await t.gn())}async Ud(){this.Vo(),this.sA.fn(Ke.Kg,this.s2),await this.tr(),await this.Mq.gn()}constructor(t){super(),this.Tx=new na,this.Mq=new _r,this.lx=void 0,this.x4=void 0,this.Fz=void 0,this.KA=void 0,this.s2=t=>{this.X4(t.Eb,t.Ub,this.Tx.Wd).catch((t=>this.Ss(t)))},this.sA=t,this.sA.yn(Ke.Kg,this.s2)}},jx=class extends wn{constructor(t){super(l.aw),this.currentTime=t}},zx=class extends xd{get Jf(){return void 0!==this.n2?this.n2.Jf:ae.aT}N0(){var t;null==(t=this.n2)||t.N0()}tr(){var t;null==(t=this.n2)||t.tr()}Ud(){this.Vo(),void 0!==this.n2&&(this.n2.Ud(),this.n2=void 0)}h2(t){if(this.n2===t)return;const i=this.Jf;void 0!==this.n2&&this.n2.Ud(),this.n2=t,void 0!==t&&(t.yn(he.H_,this.Ds),t.N0());const e=this.Jf;i!==e&&this.Co(new ro(this.o2.Mf,e))}constructor(t){super(),this.o2=t}},Px=fi.OE||fi.zE,Bx=fi.Nb,Rx=fi.WE,Ux=fi.WE&&fi.Ga,Qx=class extends xd{a2(){this.Uz.ended||this.Mf===this.ct||(this.u2=!1)}get I0(){return this.c2}get wf(){return this.Fz?this.Fz.wf:Ai.SB()}get vf(){const t=this.Yz;if(!t||S(t.getTime()))return;const i=1e3*this.Mf;return new Date(t.getTime()+i)}get Yz(){if(this.Uz.getStartDate)return this.bB&&this.l2||(this.l2=this.Uz.getStartDate()),this.l2}get Mf(){return this.d2?this.d2.Mf:void 0!==this.f2?this.f2:this.Ox.currentTime}get Iu(){return this.Wu}get ct(){return this.d2?this.d2.ct:this.Fz?this.Fz.ct:this.Ox.duration}get If(){return this.e_?this._2():this.d2?this.d2.If:this.Ox.ended||this.u2}_2(){return void 0!==this.f2&&this.ct===this.f2}get lt(){return this.Bz}get Uz(){return this.Ox}get Ff(){return this.g2?this.w2:this.d2?this.d2.Ff:this.Ox.paused}get Hf(){return this.Uo.cB(Ai.xn(this.Ox.played))}get Ti(){return this.Ox.offsetHeight*i.Ys.A2}get ji(){return this.Ox.offsetWidth*i.Ys.A2}get ya(){return this.xB}get Jf(){return this.m2.Jf}get t_(){return this.Fz?this.Fz.t_:Ai.SB()}get e_(){return this.d2?this.d2.e_:this.bB}get m0(){return this.d2?this.d2.m0:this.p0}get L0(){return 0!==this.M2}get Pf(){return this.d2?this.d2.Pf:this.Ox.muted}set Pf(t){this.d2?this.d2.Pf=t:(this.Ox.muted=t,this.T2())}get Gf(){return this.d2?this.d2.Gf:void 0!==this.N2?this.N2:this.Ox.playbackRate}set Gf(t){this.d2?this.d2.Gf=t:this.Ff||this.c2?(this.N2=t,this.D2()):(this.N2=void 0,this.Ox.playbackRate=t,this.D2())}D2(){const t=this.Gf;this.I2!==t&&(this.I2=t,this.Co(new ls(this.Mf,t)))}get S2(){return this.ZP}get c_(){return this.d2?this.d2.c_:this.Ox.volume}set c_(t){this.d2?this.d2.c_=t:(this.Ox.volume=t,this.T2())}T2(){const t=this.c_,i=this.Pf;this.E2===t&&this.b2===i||(this.E2=t,this.b2=i,this.Co(new Je(this.Mf,this.c_)))}zf(){return fL(this.Ox)}p_(){this.L2||(this.L2=!0);const t=this.C2();return this.O2(),t}O2(){this.g2?this.w2&&(this.w2=!1,this.Co(new sh(this.Mf))):this.j2()}j2(){if(this.d2)this.d2.p_();else{fi.WE&&!fi.Ga&&this.Ox.preload===wo.FP&&(this.Ox.preload=wo.Nm);const t=this.Gf,i=this.Ox.play();t!==this.Uz.playbackRate&&(this.Gf=t),Ka(i)?i.then(this.z2,this.P2):this.B2.k0()&&this.R2()}}m_(){this.g2?this.w2||(this.w2=!0,this.Co(new ge(this.Mf))):this.U2()}U2(){this.d2?this.d2.m_():(this.Ox.pause(),this.B2.Yn()),this.Q2(new pe)}C2(){const t=new Rs;return this.F2.push(t),t.Zb}Y2(){for(const t of this.F2)t.Wb(void 0);No(this.F2)}Q2(t){for(const i of this.F2)i.qb(t);No(this.F2)}R2(){this.g2||this.d2||this.Y2()}G2(t){this.g2||this.d2||this.Q2(t)}Sm(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.d2?this.d2.Sm(t,i,e):(this.V2.qd(),this.V2=new na,this.W2=this.H2(t,i,e,this.W2,this.V2.Wd).catch(qt))}zz(t){const i=this.Yz;if(!i||S(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Sm(e)}async H2(t,e,s,n,r){try{for(this.f2=t,this.q2=t,this.X2=i.Kd(),s&&!this.bB?this.p0=!0:(this.bB=!0,this.p0=!1),this.u2&&!this._2()&&(this.u2=!1),this.p0?this.Co(new Kk(this.Mf)):this.Co(new Eh(t)),await n.catch(qt),Bo(r),this.Z2&&this.K2(),this.m2.Jf===ae.aT&&await this.m2.lf(he.H_,r);0===this.Ox.seekable.length||Ux&&!this.L2;)await Promise.race([ti(this.Ox,"timeupdate",r),lt(100,r)]),Bo(r);let h=Gk(this.wf,t,.05),o=this.t_,a=!0,u=!1;for(;;){if(o=this.t_,o.U>0&&!o.gr(h)&&(h=o.rB(h),a=!0),e&&!this.Ox.fastSeek){const t=this.wf;if(!t.gr(h)){const i=Gk(t,h,1);i!==h&&(h=i,a=!0)}}if(Rx){const t=this.J2();void 0!==t&&h>t&&(h=t,a=!0)}if(!u){const t=this.t3();void 0!==t&&h>t&&(u=!0,await this.i3(t,!1,r),await ti(this.Ox,"seeked",r),Bo(r),a=!0)}if(a){a=!1,await this.i3(h,e,r),Bo(r);let t=this.Mf;o=this.t_,h=o.rB(h);let i=1;for(;_.abs(h-t)>=Jc;)o=this.t_,h=Yx(h,o,i),await this.i3(h,e,r),Bo(r),t=this.Mf,i++}if(!(this.Ox.seeking||this.m2.Jf<ae.uT))break;await Na((t=>{var i;return Promise.race([ti(this.Ox,"seeked",t),this.lf([l.gw,l.Xg],t),this.m2.lf(he.H_,t),null==(i=this.Fz)?void 0:i.lf(Vs.tU,t)].filter(Yt))}),r),Bo(r)}this.e3()}catch(t){if(Ho(t))return;0}}async i3(t,i,e){Bo(e);let s=this.t_;if(t=s.rB(t),this.Z2){let i=!0;for(;i||this.m2.Jf<ae.cT;)s=this.t_,s.gr(t)||(t=s.rB(t),i=!0),i?(i=!1,this.f2=t,this.s3(this.Mf)):await Na((t=>Promise.race([this.lf(l.Xg,t),this.m2.lf(he.H_,t)])),e);Bo(e)}const n=ti(this.Ox,"seeking",e);i&&this.Ox.fastSeek?this.Ox.fastSeek(t):this.Ox.currentTime=t,this.f2=void 0,this.s3(this.Mf),this.Ox.seeking&&await n}J2(){if(!this.Fz||!this.Fz.Cq)return;const t=this.Fz.xq,i=this.Fz.Oq,e=t&&i?t.Sn(i):t||i;if(!e||0===e.U)return;const s=e.Cn(e.U-1),n=e.jn(e.U-1);return _.max(s,n-.001)}t3(){if(!this.Fz||!this.Fz.Cq)return;const t=this.Fz.Oq;if(!t||0===t.U)return;const i=t.Cn(t.U-1);let e=t.jn(t.U-1)-.02;return e-=.001,_.max(i,e)}s3(t){this.q2!==t&&(this.q2=t,this.p0?this.Co(new Kk(t)):this.Co(new Eh(t)))}e3(){const t=this.p0;this.bB=!1,this.p0=!1,this.X2=0,this.q2=NaN,this.Z2&&this.n3(),t?(this.Co(new jx(this.Mf)),this.r3()):this.Co(new we(this.Mf))}K2(){this.g2||(this.w2=this.Ff,this.g2=!0,this.U2())}n3(){this.g2&&(this.g2=!1,this.w2||this.O2())}jq(t){for(const i of t){if(i.Rg===ai.Wx&&zL.jq(i,this.Ox))return i;if(i.Rg===ai.Hx&&Xk.jq(i))return i}}be(){this.ZP=!1,Bs(this.Ox)&&(this.Ox.style.display="none")}ge(){this.ZP=!0,Bs(this.Ox)&&(this.Ox.style.display="block")}get nt(){return this.h3}get Ol(){return this.RB}yS(t,i,e,s,n,r,h,o,a){const u=new hn(t,i,e,s,n,r,h,a,o);return this.Dl.tt(u),this.o3.tt(u),u}iP(){return!0}sP(t,i,e,s,n){const r=h.createElement("track");r.src=oa(t),r.kind=i,r.label=null!=e?e:"",s&&(r.srclang=s),r.default=!!n,r.id=$e(),this.Ox.appendChild(r);const o=this.Ox.textTracks.getTrackById(r.id),a=new yn(o,r);return this.a3.tt(a),this.u3.push(a),a}bS(t){this.Dl.it(t),this.o3.it(t)}rP(){for(const t of this.Dl.og.slice())t.gn();this.Dl.tr();for(const t of this.u3.slice())this.a3.it(t),t.gn();No(this.u3)}mP(){let t=this.Ox.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this.l3),t.addEventListener("removetrack",this.d3),t.addEventListener("change",this.f3))}aP(){let t=this.Ox.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this.l3),t.removeEventListener("removetrack",this.d3),t.removeEventListener("change",this.f3))}_3(t,i){if(fi.WE){if(t.kind===Mi.Nm)return void this.g3(t);if(t.kind===Mi.yI&&""===t.label&&""===t.language&&!Vx(t))return void this.w3(t,i)}Gx(this.a3,t)||this.a3.tt(new yn(t,i))}g3(t){t.mode=Ha.zg;const i=new Mx(t);this.a3.tt(i),this.o3.tt(i)}w3(t,i){const e=()=>{Vx(t)&&(t.removeEventListener("cuechange",e),this.a3.tt(new yn(t,i)))};t.addEventListener("cuechange",e),t.mode=Ha.zg}A3(t){let i=this.Ox.getElementsByTagName("track");for(let e=0;e<i.length;e++){let s=i[e]||i.item(e);if(s.track===t)return s}}$n(t){return this.v3.Mx((async i=>{if(Bo(i),this.Fz)throw new g("Already loaded a media source");let e;if(t.Rg===ai.Wx)e=new zL(t,this,this.vq,this.YC),this.Z2=!1,this.m2.h2(this.m3());else{if(t.Rg!==ai.Hx)throw new g("Unsupported configuration");{this.Z2=Px;const i=this.m3();e=new Xk(t,this,i,this.vq,this.YC,void 0,this.G$),this.m2.h2(i),Bx&&(this.yn(l.Sw,this.y3),this.m2.yn(he.H_,this.M3))}}return this.Fz=e,await e.bW(),e}))}m3(){return this.Z2?new nC(this):new qu(this)}T3(){if(this.c2)return;const t=this.Gf;this.c2=!0,this.Gf=t,this.Ox.playbackRate=0,this.m2&&this.m2.N0()}N3(){if(!this.c2)return;const t=this.Gf;this.c2=!1,this.Gf=t,this.D3()}D3(){this.Ox.currentTime=this.Ox.currentTime,this.m2&&this.m2.N0()}async tr(){this.bB=!1,this.p0=!1,i.Jd(this.M2),this.M2=0,this.Uo=Ai.SB(),this.V2.qd(),this.f2=void 0,this.q2=NaN,this.l2=void 0,this.Z2=!1,this.g2=!1,this.Bz=void 0,this.u2=!1,this.I3=void 0,this.S3=!1,this.L2=!1,this.E3&&(this.b3(),this.E3=!1),this.Q2(new pe),this.m2.h2(new qu(this)),this.B2.tr(),this.a3.tr(),this.N3(),Bx&&(nn(this.L3),this.L3=0,this.fn(l.Sw,this.y3)),await this.v3.qd(),await this.v3.Mx((async()=>{this.Fz&&(await this.Fz.Ud(),this.Fz=void 0,fi.DE&&fi.EE<3&&this.C3())}))}C3(){this.x3();const t=this.Ox,i=t.parentElement,e=t.tagName.toLowerCase();this.Ox=mj(e),this.retainMediaElementState(t),pj(t),null==i||i.replaceChild(this.Ox,t),this.b3(),this.m2.h2(this.m3()),this.B2.fn(he.Rw,this.O3),this.B2.Ud(),this.B2=new oC(this),this.B2.yn(he.Rw,this.O3),this.ZP?this.ge():this.be(),this.Co(new ww),this.Co(new Xt)}retainMediaElementState(t){this.Uz.muted=t.muted,this.Uz.volume=t.volume}async Ud(){this.E3=!1,this.x3(),this.aP(),await this.tr(),await this.v3.gn(),this.B2.Ud(),this.m2.Ud(),await this.vq.Ud(),this.rP(),this.Dl.gn(),this.a3.gn(),await this.j3.gn(),this.z3.gn(),this.h3.gn(),this.Vo()}b3(){this.Uz.addEventListener("play",this.P3),this.Uz.addEventListener("pause",this.B3),this.Uz.addEventListener("timeupdate",this.R3),this.Uz.addEventListener("progress",this.U3),this.Uz.addEventListener("loadstart",this.Q3),this.Uz.addEventListener("ended",this.F3),this.Uz.addEventListener("ratechange",this.Y3),this.Uz.addEventListener("volumechange",this.G3),this.Uz.addEventListener("durationchange",this.V3),this.Uz.addEventListener("resize",this.W3),this.Uz.addEventListener("loadedmetadata",this.W3),this.Uz.addEventListener("error",this.H3),this.Uz.addEventListener("emptied",this.q3),Yy()?(this.Ox.addEventListener("encrypted",this.X3),this.Ox.addEventListener("waitingforkey",this.Z3)):void 0!==_s.WebKitMediaKeys&&"function"==typeof _s.WebKitMediaKeys.isTypeSupported?this.Ox.addEventListener("webkitneedkey",this.K3):Gy()?this.Ox.addEventListener("webkitneedkey",this.J3):void 0!==_s.MSMediaKeys&&"function"==typeof _s.MSMediaKeys.isTypeSupported&&this.Ox.addEventListener("msneedkey",this.t5)}x3(){this.Uz.removeEventListener("play",this.P3),this.Uz.removeEventListener("pause",this.B3),this.Uz.removeEventListener("timeupdate",this.R3),this.Uz.removeEventListener("progress",this.U3),this.Uz.removeEventListener("loadstart",this.Q3),this.Uz.removeEventListener("ended",this.F3),this.Uz.removeEventListener("ratechange",this.Y3),this.Uz.removeEventListener("volumechange",this.G3),this.Uz.removeEventListener("durationchange",this.V3),this.Uz.removeEventListener("resize",this.W3),this.Uz.removeEventListener("loadedmetadata",this.W3),this.Uz.removeEventListener("error",this.H3),this.Uz.removeEventListener("encrypted",this.X3),this.Uz.removeEventListener("waitingforkey",this.Z3),this.Uz.removeEventListener("webkitneedkey",this.K3),this.Uz.removeEventListener("webkitneedkey",this.J3),this.Uz.removeEventListener("msneedkey",this.t5),this.Uz.removeEventListener("emptied",this.q3)}i5(){this.d2||(this.Uo=this.Hf,this.d2=tC(this),this.x3(),this.d2.yn(Jk,this.Ds))}e5(){if(!this.d2)return;const t=this.d2;this.d2=void 0,this.m2.N0(),iC(this,t),t.Ud(),this.b3()}r3(){const t=this.Mf;this.Co(new Pc(t,void 0)),this.I3=t}IP(t){this.Bz=t,this.Q2(this.Bz),this.Co(new aC(this.Bz))}get xf(){return!!this.Ox.webkitCurrentPlaybackTargetIsWireless}get s5(){return this.n5}get t2(){return Tt({},kL)}r5(){this.s5||(Mj(this.Ox,i.Ys),this.n5=!0)}h5(t){t.appendChild(this.Ox)}XJ(){Bx&&this.y3(),this.m2.N0()}get uP(){return this.vq.uP}set uP(t){this.vq.uP=t}get o5(){return this.G$}set o5(t){this.G$=t}get Y4(){return this.vq.Y4}D_(){this.vq.e2().catch(qt),this.a3.tr()}get g_(){return this.S3}set g_(t){this.S3=t,this.E3&&!this.S3&&(this.E3=!1,this.b3())}constructor(t,e,s,n){super(),this.Bz=void 0,this.ZP=!0,this.Fz=void 0,this.v3=new _r,this.d2=void 0,this.xB=new Mu,this.u3=[],this.f2=void 0,this.X2=0,this.q2=NaN,this.l2=void 0,this.I3=void 0,this.bB=!1,this.p0=!1,this.a5=ae.aT,this.M2=0,this.W2=Promise.resolve(),this.V2=new na,this.F2=[],this.Uo=Ai.SB(),this.N2=void 0,this.I2=1,this.b2=!1,this.E2=1,this.u2=!1,this.S3=!1,this.E3=!1,this.Z2=!1,this.g2=!1,this.w2=!1,this.c2=!1,this.n5=!1,this.L3=0,this.L2=!1,this.l3=t=>{const i=t.track,e=this.A3(i);this._3(i,e)},this.d3=t=>{const i=Gx(this.a3,t.track);i&&this.a3.it(i)},this.f3=()=>{for(let t=0;t<this.a3.U;t++){let i=this.a3.cg(t);i instanceof yn&&i.C1()}},this.y3=()=>{if(void 0===this.Fz||!CL(this.Fz))return;const t=this.Fz,i=t.V$,e=t.W$;if(!i||!e)return;if(t.Cq)return void this.N3();if(t.Jf===Ls.UJ)return;const s=i.wf,n=e.wf;if(0===s.U&&0===n.U)return void this.N3();const r=this.Mf;if(r<s.Cn(0)||r<n.Cn(0))return void this.N3();if(s.gr(r)!==n.gr(r)){if(t.mq(r))return;this.T3()}else if(this.N3(),!this.L3&&this.B2.k0()){s.lB(n).wB(r,r+.5)&&(this.L3=Ur(this.u5))}},this.u5=()=>{this.L3=0,this.y3()},this.M3=()=>{if(this.e_||this.m0)return;if(this.m2.Jf>=ae.cT)return;if(void 0===this.Fz||!CL(this.Fz))return;const t=this.Fz,i=t.V$,e=t.W$;if(!i||!e)return;const s=this.Mf,n=i.wf,r=e.wf;if(!n.gr(s)||!r.gr(s))return;n.lB(r).wB(s-5,s)&&(this.c2?this.N3():this.D3())},this.P3=()=>{this.Co(new sh(this.Mf))},this.B3=()=>{this.G2(new pe),this.Co(new ge(this.Mf))},this.O3=()=>{this.R2(),this.Co(new Zr(this.Mf))},this.Y3=()=>{this.D2()},this.V3=()=>{this.Co(new jn(this.ct))},this.U3=()=>{this.Co(new B(this.Mf))},this.Q3=()=>{this.Co(new Pn)},this.R3=()=>{const t=this.Mf,i=this.e_,e=this.m2.Jf<ae.cT&&!this.If,s=void 0!==this.I3,n=s&&this.I3!==t;(i||!s||n&&!e)&&this.r3()},this.F3=()=>{!this.u2&&this.If&&(this.u2=!0,this.Co(new ee(this.Mf)))},this.H3=()=>{if(null!==this.Ox.error){const i=this.Ox.error;var t;this.IP(new Ac(null!=(t=i.code)?t:vw.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.q3=()=>{this.S3&&(this.x3(),this.E3=!0)},this.c5=t=>{if(i.Jd(this.M2),this.M2=0,t.readyState<=ae.uT)if(this.bB||this.p0){const e=i.Kd()-this.X2;if(e<250)return void(this.M2=i.$d((()=>this.c5(t)),250-e))}else if(void 0!==this.Fz&&this.Fz.mq(this.Mf))return void(this.M2=i.$d((()=>this.c5(t)),250));this.a5!==t.readyState&&(this.a5=t.readyState,this.Co(t))},this.G3=()=>{this.T2()},this.W3=()=>{this.a_>0&&this.r_>0&&this.Co(new lm)},this.X3=t=>{this.Co(new Us(t.initDataType,t.initData||new ArrayBuffer(0)))},this.Z3=()=>{this.Co(new ym)},this.t5=t=>{const i=t.initData,e=i?Dt(i).buffer:new ArrayBuffer(0);this.Co(new Us(Jf,e))},this.K3=t=>{if(t.initData){const i=function(t){try{const i=ha(t),e=new L,s=Yu(i,e,oo(i,e,!0));return _a(og(s,!0))}catch(t){return}}(t.initData);if(!i)return;this.Co(new Us(t_,i))}else this.Co(new Us(t_,new ArrayBuffer(0)))},this.J3=t=>{const i=t.initData,e=i?Dt(i).buffer:new ArrayBuffer(0);this.Co(new Us(Jf,e))},this.z2=()=>{this.R2()},this.P2=t=>{this.G2(t)},this.l5=t=>{this.Co(t),t.type===l.Vg&&this.IP(Ki(t.errorObject))},this.Ox=t,this.YC=e,this.Wu=s,this.RB=n,this.m2=new zx(this),this.m2.yn(he.H_,this.c5),this.m2.h2(new qu(this)),this.B2=new oC(this),this.B2.yn(he.Rw,this.O3),this.vq=new Ox(this),this.vq.yn([l.Wg,l.Vg,l.Lw],this.l5),this.Dl=new _i,this.a3=new _i,this.z3=new gn([this.Dl,this.a3]),this.j3=new Tx(this,this.z3),this.h3=new gn([this.z3,this.j3.Z]),this.o3=new rh(this),this.b3(),this.mP()}};var Fx=.01;function Yx(t,i,e){if(void 0===e&&(e=0),!i.U)return 0;let s=i.rB(t);const n=Fx*e;return s===i.Cn(0)?s+=n:s===i.jn(i.U-1)&&(s-=n),s}function Gx(t,i){for(let e of t.og)if(e.jT===i)return e}function Vx(t){return!!t.cues&&t.cues.length>0}var Wx={FH:void 0,YH:void 0,GH:void 0,VH:void 0,WH:void 0,HH:void 0,JH:void 0,qH:void 0,XH:void 0,ZH:void 0,KH:void 0},Hx=class extends xd{get va(){return this.Xa||(this.Xa=IL(this)),this.Xa}get FH(){}get YH(){}get GH(){}get VH(){}get WH(){}get HH(){}get JH(){}get qH(){}get XH(){}get ZH(){}get KH(){}constructor(...t){super(...t),this.Xa=void 0}},qx=class extends Qx{A_(){}get r_(){return 0}get a_(){return 0}constructor(t,i,e){super(t,i,e,new Hx)}},eh=class{get we(){return this.d5}be(){this.d5.style.display="none"}ge(){this.d5.style.display="block"}h5(t){t.appendChild(this.d5)}gn(){fh(this.d5)}constructor(t=5){let i=_s.document.createElement("div");i.className="theoplayer-texttracks",i.style.position="absolute",i.style.display="none",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.width="100%",i.style.height="100%",i.style.lineHeight="1.3em",i.style.zIndex=""+t,this.d5=i,this.ge()}};function Xx(t,i){return Tt({},i,Hd(function(t){return{FH:t.FH,YH:t.YH,GH:t.GH,VH:t.VH,WH:t.WH,HH:t.HH,JH:t.JH,qH:t.qH,XH:t.XH,ZH:t.ZH,KH:t.KH}}(t)))}function Zx(t){return t.GH&&Ah(t.GH,"%")?Number(t.GH.replace("%",""))/100:t.GH&&Ah(t.GH,"em")?Number(t.GH.replace("em","")):1}var Kx,It,bh=class{f5(t){const i=this._5(t);if(!i)return!1;for(const t of i)fh(t);return this.g5(t),!0}get Lt(){return this.iN}get Uz(){return this.Ox}get Iu(){return this.Wu}get w5(){return this.A5}get v5(){return this.m5}bW(){this.p5(),this.iN.L.og.forEach((t=>this.SS(t))),this.Iu.yn(ve.pn,this.y5),this.M5(this.Iu.ku,this.Iu._u)}T5(t){this.m5=t,this.A5=Xx(this.m5,this.N5),this.A5.FH&&(this.Uz.style.fontFamily=this.A5.FH),this.A5.JH&&(this.Uz.style.visibility=this.A5.JH),this.M5(this.Iu.ku,this.Iu._u),this.D5(!0)}I5(){return this.A5}S5(t){return this.E5.has(t.Mg)}p5(){this.iN.yn(qo.O_,this.b5),this.iN.yn(qo.z_,this.L5),this.iN.yn(qo.ra,this.k5)}C5(){this.iN.fn(qo.O_,this.b5),this.iN.fn(qo.z_,this.L5),this.iN.fn(qo.ra,this.k5)}x5(t){t.yn(Sl.QT,this.O5),t.yn(Sl.FT,this.j5),t.yn(Sl.K_,this.z5)}P5(t){t.fn(Sl.QT,this.O5),t.fn(Sl.FT,this.j5),t.fn(Sl.K_,this.z5)}SS(t){this.x5(t),t.ro&&this.B5(t)}xI(t){this.P5(t),this.R5(t)}U5(){this.iN.jg===Ha.Jn?this.Q5():this.F5()}Q5(){if(!this.Y5)return;this.Y5=!1;const t=this.Iu.ku,i=this.Iu._u;this.M5(t,i),this.D5(!1)}F5(){this.Y5||(this.Y5=!0,this.D5(!0))}B5(t){this.Y5||t.ro&&!this.S5(t)&&this.D5(!1)}R5(t){this.S5(t)&&this.D5(!0)}G5(t){(t.ro||this.S5(t))&&this.D5(!0)}D5(t){const i=this.V5,e=this.Y5?[]:this.iN.q.og.slice();this.W5(e,i,t),this.V5=e}_5(t){return this.E5.get(t.Mg)}H5(t,i){this.E5.set(t.Mg,i)}g5(t){this.E5.delete(t.Mg)}q5(){return this.V5.slice()}gn(){fh(this.Uz),this.E5.clear(),this.C5(),this.iN.L.og.forEach((t=>this.P5(t))),this.Iu.fn(ve.pn,this.y5)}constructor(t,i,e,s,n){this.E5=si(),this.Y5=!0,this.m5=Tt({},Wx),this.V5=[],this.b5=t=>this.SS(t.YT),this.L5=t=>this.xI(t.YT),this.k5=()=>this.U5(),this.O5=t=>this.B5(t.YT),this.j5=t=>this.R5(t.YT),this.z5=t=>this.G5(t.YT),this.y5=t=>{this.M5(t.width,t.height)},this.iN=t,this.N5=this.A5=n,this.Ox=this.X5(e),this.Wu=s,i.appendChild(this.Ox)}};function Jx(t,i){return t?{Z5:t.Z5,K5:t.K5,J5:t.J5,Ml:i}:null}function $x(t){const i=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return i?{Z5:x(i[1],16),K5:x(i[2],16),J5:x(i[3],16)}:null}function tO(t){return("0"+t.toString(16)).slice(-2)}function iO(t){return"#"+tO(t.Z5)+tO(t.K5)+tO(t.J5)}function eO(t){const i=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return i?{Z5:x(i[1],10),K5:x(i[2],10),J5:x(i[3],10),Ml:C(i[4])}:null}function sO(t,i){return function(t){return t?"rgba("+t.Z5+", "+t.K5+", "+t.J5+", "+t.Ml+")":void 0}(Jx($x(t),i/100))}function nO(t){return rO[t||"none"]}!function(t){t.qc='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.Wc='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.Gc='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.Xc='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif'}(Kx||(Kx={})),function(t){t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent"}(It||(It={}));var rO={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},hO=Td({monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:"monospace, sans-serif",monospaceSerif:"monospace, serif",proportionalSansSerif:"Arial",proportionalSerif:"Times New Roman",default:"monospace, sans-serif"}),oO={YH:It.WHITE,FH:"Arial, Helvetica, Sans-Serif",GH:"100%",VH:It.TRANSPARENT,WH:It.TRANSPARENT,HH:"none",JH:"visible",qH:void 0,XH:void 0,ZH:void 0,KH:void 0},aO=class extends bh{X5(t){let i=h.createElement("div");i.className="theoplayer-ttml-texttrack-"+t;const e=i.style;return e.position="absolute",SM(e,"flex"),e.overflow="hidden",e.pointerEvents="none",e.top="0",e.left="0",e.width="100%",e.height="100%",i}M5(t,i){let e=_.min(t,i)/15;this.Uz.style.fontSize=e+"px"}W5(t,i,e){for(const t of i)!e&&t.ro||this.f5(t);for(const i of t)this.t6(i)}t6(t){let i=this._5(t);i||(i=this.i6(t),this.H5(t,i));for(const t of i)this.Uz.appendChild(t)}i6(t){let i=[],e=t.WD,s=t.QD,n=t.O;if(0===w.keys(s).length){const s=h.createElement("div");vO(s),uO(n,e,t.XD,s,s),s.firstChild&&i.push(s)}else for(let r of w.keys(s)){let o=h.createElement("div");o.id=r,vO(o),dO(o,"region",s[r],e),uO(n,e,t.XD,o,o),o.firstChild&&i.push(o)}return i}T5(t){!function(t,i){var e,s;t.style.marginTop=(null!=(e=i.qH)?e:0)+"px",t.style.marginBottom=(null!=(s=i.XH)?s:0)+"px",t.style.height="calc(100% - "+t.style.marginTop+" - "+t.style.marginBottom+")"}(this.Uz,t),bL(this.Uz,t)}constructor(t,i,e,s){super(t,i,e,s,oO)}};function uO(t,i,e,s,n){if(as(t)&&function(t){return"SPAN"===t._I.toUpperCase()||"P"===t._I.toUpperCase()||"BR"===t._I.toUpperCase()||"DIV"===t._I.toUpperCase()||"BODY"===t._I.toUpperCase()}(t)){let r=cO(t);if(!r||(null==n?void 0:n.id)===r){let r;if("BODY"===t._I.toUpperCase())r=n;else{if(r=function(t){let i;switch(t._I.toUpperCase()){case"BR":i=h.createElement("br");break;case"SPAN":i=h.createElement("span"),lO(i,t);break;case"P":i=h.createElement("p"),function(t){const i=t.style;i.fontFamily="inherit",i.color="inherit",i.textAlign="inherit",i.padding="0",i.margin="0",i.lineHeight="inherit"}(i),lO(i,t);break;case"DIV":i=h.createElement("div"),lO(i,t)}return i}(t),!r)return;s.appendChild(r)}!function(t,i,e,s){let n=i.vI("style");gO(t,i._I,n,e,s),function(t,i,e){for(const s of i.fI)wO(t,i._I,s._I,s.jM,e)}(t,i,s)}(r,t,i,n),function(t,i,e){let s=null==i?void 0:i.vI("smpte:backgroundImage");if(s){s=s.replace("#","");let n=e&&fO(e,(t=>t.fI.some((t=>"id"===t._I&&t.jM===s))));n&&_O(t,n,i,!0)}!function(t,i){const[e]=i.m;if(!e||"metadata"!==e._I.toLowerCase())return;const[s]=e.m;_O(t,s,i)}(t,i)}(r,t,e);for(const s of t.mI)uO(s,i,e,r,n)}}else if(XA(t)){const i=h.createTextNode(t.zm);s.appendChild(i)}}function cO(t){const i=t.vI("region");if("p"===t._I.toLowerCase())return i;const e=[];for(const i of t.m)e.push(cO(i));return Do(e),0===e.length?i:1===e.length?null!=(s=e[0])?s:i:void 0;var s}function lO(t,i){let e=i.AI(sv,"id");e&&(t.id=e)}function dO(t,i,e,s){gO(t,i,e.style,s,t);for(const s of w.keys(e))wO(t,i,s,e[s],t)}function fO(t,i){if(i(t))return t;for(let e of t.m){const t=fO(e,i);if(t)return t}return null}function _O(t,i,e,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const i=t&&t.mI.length>0?t.mI[0]:null;return i&&XA(i)?"data:image/png;base64,"+i.zm:""}(i),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,i){const e=t.style;SM(e,"flex");let s=i.vI("smpte:backgroundImageVertical");if(s)switch(s.toLowerCase()){case"left":e.alignItems="flex-start";break;case"center":e.alignItems="center";break;case"right":e.alignItems="flex-end";break;case"inherit":e.alignItems="inherit"}else e.alignItems="center";let n=i.vI("smpte:backgroundImageHorizontal");if(n)switch(n.toLowerCase()){case"left":e.justifyContent="flex-start";break;case"center":e.justifyContent="center";break;case"right":e.justifyContent="flex-end";break;case"inherit":e.justifyContent="inherit"}else e.justifyContent="center"}(t,e),t.appendChild(n)}function gO(t,i,e,s,n){if(e)for(const r of e.split(" "))if(s[r])for(const e of w.keys(s[r]))"style"===e.toLowerCase()?gO(t,i,s[r][e],s,n):wO(t,i,e,s[r][e],n)}function wO(t,i,e,s,n){const r=t.style;switch(e){case"backgroundColor":r.backgroundColor=s;break;case"color":r.color=s;break;case"direction":r.direction=s;break;case"display":"none"===s&&(r.display="none");break;case"fontFamily":{const t=hO.get(s);r.fontFamily=t||s;break}case"fontSize":Ah(s,"px")?s=x(s)/24+"em":Ah(s,"c")&&(s=s.replace("c","em")),r.fontSize=s;break;case"fontStyle":r.fontStyle=s;break;case"fontWeight":r.fontWeight=s;break;case"lineHeight":r.lineHeight=s;break;case"opacity":r.opacity=s;break;case"overflow":r.overflow=s;break;case"padding":r.padding=s;break;case"textAlign":"right"===s?(r.textAlign="right",r.justifyContent="flex-end"):"start"===s?(r.textAlign="start",r.justifyContent="flex-start"):"center"===s?(r.textAlign="center",r.justifyContent="center"):"end"===s?(r.textAlign="end",r.justifyContent="flex-end"):"left"===s&&(r.textAlign="left",r.justifyContent="flex-start");break;case"textDecoration":{let t=s;t=t.replace("lineThrough","line-through"),t=t.replace("noUnderline","none"),t=t.replace("noLineThrough","none"),t=t.replace("noOverline","none"),r.textDecoration=t;break}case"unicodeBidi":r.unicodeBidi=s.replace("bidiOverride","bidi-override");break;case"visibility":r.visibility=s;break;case"zIndex":r.zIndex=s;break;case"displayAlign":{let t;if("before"===s.toLowerCase())t="flex-start";else if("center"===s.toLowerCase())t="center";else{if("after"!==s.toLowerCase())return;t="flex-end"}r.alignItems=t;break}case"extent":{const e=AO(i.toLowerCase())?n:t;let r,h,o=s.split(" ");o.length>=2?(r=o[0],h=o[1]):r=h="100%",e&&(e.style.height=h,e.style.width=r);break}case"origin":{const e=AO(i.toLowerCase())?n:t,[r,h]=s.split(" ");e&&(r||h)&&(r&&(e.style.left=r),h&&(e.style.top=h));break}case"showBackground":case"textOutline":break;case"wrapOption":r.whiteSpace=s.replace("noWrap","nowrp").replace("wrap","normal").replace("nowrp","nowrap");break;case"writingMode":{let t,i,e,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",i="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",e="upright";break;case"tblr":t="vertical-lr",e="upright";break;case"rl":t="horizontal-tb",i="rtl";break;default:return}r.writingMode=t,r.setProperty("-webkit-writing-mode",t),i&&(r.direction=i),e&&(r.textOrientation=e,r.setProperty("-webkit-text-orientation",e)),n&&(r.unicodeBidi=n);break}case"linePadding":if(Ah(s,"c")){let t=s.replace("c","em");r.paddingLeft=r.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?r.textAlign="":r.textAlign=s}}function AO(t){return"div"===t||"p"===t||"span"===t}function vO(t){const i=t.style;SM(i,"flex"),i.top="auto",i.left="5%",i.width="90%",i.height="100%",i.maxHeight="100%",i.maxWidth="100%",i.alignItems="flex-start",i.overflow="visible",i.position="absolute",i.fontFamily="Arial, Helvetica, Sans-Serif",i.color="white",i.textShadow="rgb(0, 0, 0) -1px -1px 0px, rgb(0, 0, 0) 1px -1px 0px, rgb(0, 0, 0) -1px 1px 0px, rgb(0, 0, 0) 1px 1px 0px",i.textAlign="start",i.writingMode="horizontal-tb",i.setProperty("-webkit-writing-mode","horizontal-tb"),i.padding="0",i.margin="0",i.lineHeight="1.3em"}var mO,pO,yO=void 0;function MO(t){return yO||(yO=_s.document.createElement("textarea")),yO.innerHTML=t,yO.value}function TO(t,i){let e="Data",s="",n=[],r=t.charAt(i.Ku),h="",o={Rg:"starttag",lj:"",e6:[]};for(;i.Ku<t.length+1;){switch(r=i.Ku<t.length?t.charAt(i.Ku):"EOF",e){case"Data":switch(r){case"&":let n=t.substring(i.Ku).match(/&#?[0-9a-zA-Z]+;/);n?(s+=MO(n[0]),i.Im(n[0].length-1)):s+="&";break;case"<":if(s)return{Rg:"string",O:s};e="Tag";break;case"EOF":return{Rg:"string",O:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":e="StartTagAnnotation";break;case".":e="StartTagClass";break;case"/":e="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,e="TimestampTag";break;case">":return i.Im(1),o;case"EOF":return o;default:s=r,e="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":e="StartTagAnnotation";break;case"\n":h=r,e="StartTagAnnotation";break;case".":e="StartTagClass";break;case">":return i.Im(1),{Rg:"starttag",lj:s,e6:[]};case"EOF":return{Rg:"starttag",lj:s,e6:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(h),h="",e="StartTagAnnotation";break;case"\n":n.push(h),h=r,e="StartTagAnnotation";break;case".":n.push(h),h="";break;case">":return i.Im(1),n.push(h),{Rg:"starttag",lj:s,e6:n};case"EOF":return n.push(h),{Rg:"starttag",lj:s,e6:n};default:h+=r}break;case"StartTagAnnotation":switch(r){case"&":e="CharRefInAnnotation";break;case">":i.Im(1);let t=h.trim();return t=t.replace(/\s/," "),{Rg:"starttag",lj:s,e6:n,s6:t};default:h+=r}break;case"CharRefInAnnotation":let a="";for(let e=i.Ku;">"===t.charAt(e);e++)a+=t.charAt(e);h+=a||"&",e="StartTagAnnotation";break;case"EndTag":switch(r){case">":return i.Im(1),{Rg:"endtag",lj:s};case"EOF":return{Rg:"endtag",lj:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return i.Im(1),{Rg:"timestamp",n6:s};case"EOF":return{Rg:"timestamp",n6:s};default:s+=r}}i.Im(1)}return o}function NO(t){let i;if(t.getBoundingClientRect&&t.parentNode&&(i=t.getBoundingClientRect()),!i)return{left:0,top:0};const e=h.documentElement,n=h.body,r=e.clientLeft||n.clientLeft||0,o=s.pageXOffset||n.scrollLeft,a=i.left+o-r,u=e.clientTop||n.clientTop||0,c=s.pageYOffset||n.scrollTop,l=i.top+c-u;return{left:_.round(a),top:_.round(l)}}function DO(t,i,e,s){if(void 0===s&&(s=0),!t||!i)return;t.style.left="0px";let n=t.getClientRects(),r=i.getClientRects();if(0===n.length||0===r.length)return;let h=n[0],o=r[0],a=h.width/2+h.left;IO(t,o.width/2+o.left-a,e,s)}function IO(t,i,e,s){void 0===s&&(s=0),EO(t,i,"left","right",e,s)}function SO(t,i,e,s){void 0===s&&(s=0),EO(t,i,"top","bottom",e,s)}function EO(t,i,e,s,n,r){void 0===r&&(r=0);const h=t.getClientRects();if(n&&h.length>0){const t=h[0];i=ks(i,n[e]+r-t[e],n[s]-r-t[s])}t.style[e]=i+"px"}function rr(t,i){void 0===t.textContent?t.innerText=i:t.textContent=i}!function(t){t.r6="Data",t.h6="Tag",t.o6="StartTag",t.a6="StartTagClass",t.u6="StartTagAnnotation",t.c6="CharRefInAnnotation",t.l6="EndTag",t.d6="TimestampTag"}(mO||(mO={})),function(t){t.f6="string",t._6="starttag",t.g6="endtag",t.w6="timestamp"}(pO||(pO={}));var bO=class t{get A6(){return this.v6+this.ji}set A6(t){this.v6=t-this.ji}get m6(){return this.p6+this.Ti}set m6(t){this.p6=t-this.Ti}y6(t){return this.v6<t.A6&&this.A6>t.v6&&this.p6<t.m6&&this.m6>t.p6}bT(t){return this.v6<=t.v6&&t.A6<=this.A6&&this.p6<=t.p6&&t.m6<=this.m6}Em(){return new t(this.v6,this.p6,this.ji,this.Ti)}M6(i){const e=this.v6+i,s=this.p6+i,n=_.max(0,this.ji-2*i),r=_.max(0,this.Ti-2*i);return new t(e,s,n,r)}constructor(t,i,e,s){this.v6=t,this.p6=i,this.ji=e,this.Ti=s}},LO={YH:It.WHITE,FH:"sans-serif",GH:"100%",VH:"rgba(0,0,0,0.8)",WH:It.TRANSPARENT,HH:"none",JH:"visible",qH:void 0,XH:void 0,ZH:void 0,KH:void 0},kO="theoplayer-webvtt-region-",CO="theoplayer-webvtt-styling-",xO="theoplayer-webvtt-default-style",OO=5.23,jO=1.14,zO=class extends bh{X5(t){let i=h.createElement("div");i.className="theoplayer-webvtt-texttrack-"+t,ia(i),i.style.overflow="hidden",i.style.pointerEvents="none";const e=this.w5.FH;return e&&(i.style.fontFamily=e),i.style.whiteSpace="pre-line",function(){if(h.getElementById(xO))return;const t=[];for(const[i,e]of KO)t.push("."+CO+i+" { color: "+e+" !important; }"),t.push("."+CO+"T6"+i+" { background-color: "+e+" !important; }"),t.push("video::cue(."+i+") { color: "+e+"; }"),t.push("N6"+i+") { background-color: "+e+"; }");const i=h.createElement("style");i.id=xO,i.innerHTML=t.join("\n"),h.body.appendChild(i)}(),i}bW(){this.Uz.appendChild(this.D6),super.bW()}M5(t,i){const e=_.min(t/100,i/100),s=Zx(this.w5);this.I6.forEach((t=>{let{ZT:i,S6:n}=t;this.E6(n,e,s,i)})),this.E6(this.D6,e,s)}T5(t){bL(this.Uz,t),super.T5(t)}W5(t,i,e){const s=this.Uz,n=this.Iu._u/100;let r=[];for(const i of t)void 0!==i.ZT&&(gd(r,i.ZT)||r.push(i.ZT));this.I6.forEach(((t,i)=>{let{ZT:s,S6:n}=t;!e&&gd(r,s)||(fh(n),this.I6.delete(i))}));for(const t of i)!e&&t.ro||this.f5(t);let h=[];const o=WO(this.D6.getBoundingClientRect());h.push(...this.b6(o));for(const t of r){let i;this.I6.has(t.o)?i=this.I6.get(t.o).S6:(i=YO(t,n),s.appendChild(i),this.I6.set(t.o,{ZT:t,S6:i})),h.push(WO(i.getBoundingClientRect()))}t.sort(JO);for(const i of t){const t=this.t6(i,h,o);void 0!==t&&h.push(t.M6(.1))}}b6(t){const i=[],e=this.w5;if(void 0!==e.qH){const s=t.Em();s.Ti=e.qH,i.push(s)}if(void 0!==e.XH){const s=t.Em();s.Ti=e.XH,s.m6=t.m6,i.push(s)}return i}t6(t,i,e){var s;let n;t.ZT?(n=this.I6.get(t.ZT.o).S6,"up"===t.ZT._N&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.D6;let r=null==(s=this._5(t))?void 0:s[0];if(r||(r=this.L6(t),this.H5(t,[r])),n.appendChild(r),t.ZT||(PO(r,t),t.KT?function(t,i,e,s){const n=GO(t),r=n?e.Ti:e.ji;let h=C(getComputedStyle(i).lineHeight);if(0===h||S(h))return;let o=WO(i.getBoundingClientRect()),a=_.round(Ii(t));"rl"===t.Pt&&(a=-(a+1));let u=h*a;"rl"===t.Pt&&(u=u-o.ji+h);a<0&&(u+=r,h=-h);n?o.p6+=u:o.v6+=u;const c=o.Em();let l=!1;for(;!e.bT(o)||VO(o,s);)if(n)if(h<0&&o.p6<e.p6||h>0&&o.m6>e.m6){if(o.p6=c.p6,l)break;h=-h,l=!0}else o.p6+=h;else if(h<0&&o.v6<e.v6||h>0&&o.A6>e.A6){if(o.v6=c.v6,l)break;h=-h,l=!0}else o.v6+=h;n?i.style.top=(o.p6-e.p6)/e.Ti*100+"%":i.style.left=(o.v6-e.v6)/e.ji*100+"%"}(t,r,e,i):function(t,i,e,s){let n=WO(i.getBoundingClientRect());if(0===n.ji||0===n.Ti)return;GO(t)?"center"===t.qT?n.p6-=n.Ti/2:"end"===t.qT&&(n.p6-=n.Ti):"center"===t.qT?n.v6-=n.ji/2:"end"===t.qT&&(n.v6-=n.ji);let r,h=n.Em(),o=h,a=1,u=!1;r=""===t.Pt?[2,3,0,1]:"lr"===t.Pt?[0,1,2,3]:[1,0,2,3];const c=4,l=C(getComputedStyle(i).lineHeight)/c;if(!S(l)&&l>0){for(let t=0;t<r.length&&!u;t++){for(;!qO(n,e,r[t],.01)&&(!e.bT(n)||VO(n,s));)HO(n,r[t],l);if(e.bT(n)){o=n.Em(),u=!0;break}let i=XO(n,e);a>i&&(o=n.Em(),a=i),n=h.Em()}e.bT(n)||(o=h.Em())}i.style.left=(o.v6-e.v6)/e.ji*100+"%",i.style.top=(o.p6-e.p6)/e.Ti*100+"%"}(t,r,e,i)),!t.ZT)return WO(r.getBoundingClientRect())}L6(t){let i=new L,e=t.O,s=this.k6(t),n={C6:void 0,we:s},r=n,o="",a="",u=[n],c=[],l=[];for(;i.Ku<e.length;){let t=TO(e,i);if(t.Rg===pO.f6){const i=h.createElement("span");rr(i,t.O),BO(i,u),""!==o&&(i.lang=o),this.x6(i,a),r.we.appendChild(i)}else if(t.Rg===pO._6){const i=t.lj.toLowerCase();switch(i){case"i":case"b":case"u":case"ruby":{let e=h.createElement(i);r.we.appendChild(e),r={C6:t,we:e},u.push(r);break}case"rt":var d;if("ruby"===(null==(d=r.C6)?void 0:d.lj.toLowerCase())){let i=h.createElement("rt");r.we.appendChild(i),r={C6:t,we:i},u.push(r)}break;case"c":case"v":r={C6:t,we:r.we},u.push(r);break;case"font":{var f;const i=null==(f=t.s6)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);i&&(a=i[1],l.push(a),r={C6:t,we:r.we},u.push(r));break}case"lang":var _;o=null!=(_=t.s6)?_:"",c.push(o)}}else if(t.Rg===pO.g6){var g;const i=t.lj.toLowerCase(),e=null==(g=r.C6)?void 0:g.lj.toLowerCase();e===i?(u.pop(),r=u[u.length-1],"font"===i&&(l.pop(),a=l.length>0?l[l.length-1]:"")):"rt"===e&&"ruby"===i?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===i&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.Rg===pO.w6){let i=t.n6,e=new L;try{Dn(i,e)}catch(t){Ea("ERROR collecting timestamp",t)}}}return s}x6(t,i){const e=this.w5,s=this.v5;e.VH&&(t.style.background=e.VH);const n=s.YH||i||e.YH;n&&(t.style.color=n)}E6(t,i,e,s){if(s){let n=RO(s,i);t.style.height=n*e+"px",t.style.left=UO(s)+"%",t.style.top=QO(s,i)+"px"}t.style.fontSize=OO*i*e+"px"}k6(t){const i=h.createElement("div");i.style.position="absolute",i.style.margin="0",i.style.padding="0",i.style.unicodeBidi="plaintext",i.style.wordWrap="break-word",i.style.overflowWrap="break-word",i.style.width="auto",i.style.textAlign=t.WT,function(t,i){"rl"===i.Pt?t.style.writingMode="vertical-rl":"lr"===i.Pt?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(i,t),function(t,i){let e=Xw(i);GO(i)?(t.style.width=e+"%",t.style.height="auto"):(t.style.height=e+"%",t.style.width="auto")}(i,t),PO(i,t);const e=this.w5.WH;e&&(i.style.background=e);const s=this.w5.YH;return s&&(i.style.color=s),i.style.textShadow=nO(this.w5.HH),i}constructor(t,i,e,s){super(t,i,e,s,LO),this.I6=Eo(),this.D6=FO(3)}};function PO(t,i){let e,s,n=qw(i),r=Hw(i),h=Xw(i);if(GO(i)){switch(n){case"line-left":e=r;break;case"center":e=r-h/2;break;case"line-right":e=r-h}s=i.KT?0:Ii(i)}else{switch(n){case"line-left":s=r;break;case"center":s=r-h/2;break;case"line-right":s=r-h}e=i.KT?0:Ii(i)}t.style.left=e+"%",t.style.top=s+"%"}function BO(t,i){for(const e of i)if(e.C6){for(const i of e.C6.e6)Yn(t,CO+i);"v"===e.C6.lj.toLowerCase()&&e.C6.s6&&Yn(t,"theoplayer-webvtt-voice-"+e.C6.s6)}}function RO(t,i){return t.lN*(OO*i)*jO}function UO(t){return t.gN-t.dN*t.ji/100}function QO(t,i){let e=t.wN,s=t.fN*RO(t,i)/100;return _.max(0,e-s)}function FO(t){let i=h.createElement("div");return i.className=kO+"default",ia(i),i.style.wordWrap="break-word",i.style.writingMode="horizontal-tb",i.style.pointerEvents="none",i.style.width="auto",i.style.height="auto",i.style.maxHeight="100%",i.style.minHeight="0px",i.style.padding="0",i.style.boxSizing="border-box",i.style.fontSize=OO*t+"px",i.style.lineHeight=jO+"em",i}function YO(t,i){let e=FO(i);e.className=kO+t.o;let s=t.ji,n=RO(t,i);return e.style.width=s+"%",e.style.height=n+"px",e.style.left=UO(t)+"%",e.style.right="",e.style.top=QO(t,i)+"px",e.style.bottom="",e.style.boxSizing="border-box",e}function GO(t){return""===t.Pt}function VO(t,i){return i.some((i=>t.y6(i)))}function WO(t){return new bO(t.left,t.top,t.width,t.height)}function HO(t,i,e){switch(i){case 0:t.v6+=e;break;case 1:t.v6-=e;break;case 2:t.p6+=e;break;case 3:t.p6-=e}}function qO(t,i,e,s){switch(e){case 0:return t.A6>i.A6+s;case 1:return t.v6<i.v6-s;case 2:return t.m6>i.m6+s;case 3:return t.p6<i.p6-s}}function XO(t,i){return _.max(0,_.min(t.A6,i.A6)-_.max(t.v6,i.v6))*_.max(0,_.min(t.m6,i.m6)-_.max(t.p6,i.p6))/(t.ji*t.Ti)}var ZO,KO=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]];function JO(t,i){const e=Ii(t),s=Ii(i),n=$O(e,t.KT),r=$O(s,i.KT);return n&&r?e-s||xa(i,t)||i.Mg-t.Mg:xa(t,i)||t.Mg-i.Mg}function $O(t,i){return i?t<0?t>-8:t>8:t>50}!function(t){t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics"}(ZO||(ZO={}));var tj={YH:It.WHITE,FH:Kx.Gc,GH:"100%",VH:It.BLACK,WH:"transparent",HH:"none",O6:"regular",JH:"visible",qH:void 0,XH:void 0,ZH:void 0,KH:void 0},ij=[{j6:It.WHITE,O6:"regular",z6:0},{j6:It.WHITE,O6:"underline",z6:0},{j6:It.GREEN,O6:"regular",z6:0},{j6:It.GREEN,O6:"underline",z6:0},{j6:It.BLUE,O6:"regular",z6:0},{j6:It.BLUE,O6:"underline",z6:0},{j6:It.CYAN,O6:"regular",z6:0},{j6:It.CYAN,O6:"underline",z6:0},{j6:It.RED,O6:"regular",z6:0},{j6:It.RED,O6:"underline",z6:0},{j6:It.YELLOW,O6:"regular",z6:0},{j6:It.YELLOW,O6:"underline",z6:0},{j6:It.MAGENTA,O6:"regular",z6:0},{j6:It.MAGENTA,O6:"underline",z6:0},{j6:It.WHITE,O6:"italics",z6:0},{j6:It.WHITE,O6:"underline-italics",z6:0},{j6:It.WHITE,O6:"regular",z6:0},{j6:It.WHITE,O6:"underline",z6:0},{j6:It.WHITE,O6:"regular",z6:4},{j6:It.WHITE,O6:"underline",z6:4},{j6:It.WHITE,O6:"regular",z6:8},{j6:It.WHITE,O6:"underline",z6:8},{j6:It.WHITE,O6:"regular",z6:12},{j6:It.WHITE,O6:"underline",z6:12},{j6:It.WHITE,O6:"regular",z6:16},{j6:It.WHITE,O6:"underline",z6:16},{j6:It.WHITE,O6:"regular",z6:20},{j6:It.WHITE,O6:"underline",z6:20},{j6:It.WHITE,O6:"regular",z6:24},{j6:It.WHITE,O6:"underline",z6:24},{j6:It.WHITE,O6:"regular",z6:28},{j6:It.WHITE,O6:"underline",z6:28}],ej=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function sj(t,i){return hA(t.P6,i.P6)||ra(t.yM,i.yM)}var sl=32,nj=/CC([1-4])=(.*)/;function rj(t){if(!t)return[];const i=[],e=t.trim().split(";");if(e.every((t=>t.match(nj))))for(const t of e){const[,e,s]=t.match(nj);i.push({B6:Number(e),R6:s})}else for(let t=0;t<e.length;t++)i.push({B6:t+1,R6:e[t]});return i}var hj=class t{get U6(){return this.F6.Q6}get Y6(){return this.F6.G6}get V6(){return this.F6.G6.z6-this.F6.Q6.z6+1}get W6(){return this.F6.G6.H6-this.F6.Q6.H6+1}pr(){return this.q6=this.X6(),this.Z6(),this.K6(),this.q6}X6(){let t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.V6/sl*this.t8.J6*100+"%",t.style.height=1.2*this.W6+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.t8.i8?"calc(1em - 1ch)":"";const i=this.A5.FH;i&&(t.style.fontFamily=i);const e=this.A5.WH;return e&&(t.style.backgroundColor=e),t}Z6(){if(!this.q6)return;let t=this.U6.H6/15*100,i=this.U6.z6/sl*100,e=(sl-this.Y6.z6-1)/sl*100,s=(15-this.Y6.H6-1)/15*100;this.t8.e8||(i=e=1,this.q6.style.width="98%"),s<t?this.q6.style.bottom=s*this.t8.J6+"%":this.q6.style.top=t*this.t8.J6+"%",e<i?this.q6.style.right=e+"%":this.q6.style.left=i+"%"}K6(){const t=this.F6.s8.sort(oj);for(let i=0;i<t.length;i++)this.n8(t[i-1],t[i]),this.r8(t[i]);this.n8(t[t.length-1],void 0)}r8(i){var e;const s=Xx(this.A5,i.h8),n=t.o8(s);rr(n,i.a8),null==(e=this.q6)||e.appendChild(n)}static o8(t){const i=h.createElement("span");i.style.display="inline-block",t.O6!==ZO.FONT_ITALICS&&t.O6!==ZO.FONT_UNDERLINE_ITALICS||(i.style.fontStyle="italic"),t.O6!==ZO.FONT_UNDERLINE&&t.O6!==ZO.FONT_UNDERLINE_ITALICS||(i.style.textDecoration="underline");const e=t.YH;e&&(i.style.color=e);const s=t.VH;return s&&(i.style.backgroundColor=s),i.style.textShadow=nO(t.HH),i.style.height="1.2em",i}n8(t,i){let e=t?t.G6.H6:this.F6.Q6.H6;const s=i?i.Q6.H6:this.F6.G6.H6;let n=t?t.G6.z6:this.F6.Q6.z6;const r=i?i.Q6.z6:this.F6.G6.z6;e<s&&(!i||t&&t.Q6.H6!==i.Q6.H6?this.u8():this.c8(this.F6.G6.z6-n),n=this.F6.Q6.z6),n<r&&(i?this.c8(r-n):this.u8())}u8(){var t;const i=h.createElement("br");null==(t=this.q6)||t.appendChild(i)}c8(t){var i;if(t<=0)return;const e=h.createElement("span");e.style.display="inline-block",rr(e,Mf(" ",t)),null==(i=this.q6)||i.appendChild(e)}constructor(t,i,e){this.F6=t,this.t8=i,this.A5=e}};function oj(t,i){return function(t,i){if(t.H6!==i.H6)return t.H6-i.H6;return t.z6-i.z6}(t.Q6,i.Q6)}var aj=class extends bh{X5(t){let i=h.createElement("div");return i.className="theoplayer-cea608-texttrack-"+t,i.style.position="absolute",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.top="10%",i.style.bottom="10%",this.w5.FH&&(i.style.fontFamily=this.w5.FH),i}M5(t,i){this.ll()}ll(){let t=Zx(this.w5);this.l8=function(t){return{J6:t/100,i8:t<=100,e8:t<=150}}(100*t);const i=this.d8/sl;this.f8=i*t,this.Uz.style.fontSize=this.f8+"px"}get d8(){let t=this.Uz.offsetWidth;return this.l8&&this.l8.e8||(t*=.8),t}W5(t,i,e){for(const t of i)!e&&t.ro||this.f5(t);for(const i of t)this.t6(i)}t6(t){this.l8&&this.l8.e8?this._8(80):this._8(100),this.ll();let i=this._5(t);i||(i=this.i6(t),this.H5(t,i));for(const t of i)this.Uz.appendChild(t)}i6(t){return t.O.map((t=>new hj(t,this.l8,this.w5).pr()))}_8(t){const i=(100-t)/2;this.Uz.style.left=i+"%",this.Uz.style.width=t+"%"}constructor(t,i,e,s){super(t,i,e,s,tj)}},kh=class t{g8(t){for(let i of this.w8)if(i.Lt===t)return i}static A8(t){switch(t.Rg){case Kc.TTML:case Kc.SRT:case Kc.WEBVTT:case Kc.CEA608:return!0}return!1}v8(t){switch(t.Rg){case Kc.TTML:return new aO(t,this.m8,t.kh,this.Wu);case Kc.SRT:case Kc.WEBVTT:return new zO(t,this.m8,t.kh,this.Wu);case Kc.CEA608:return new aj(t,this.m8,t.kh,this.Wu)}}p8(t){let i=this.g8(t);i||(i=this.v8(t),i&&(i.bW(),i.T5(this.RB),this.w8.push(i),t.jg===Ha.Jn&&i.Q5()))}y8(t){let i=this.w8;for(let e=i.length-1;e>=0;e-=1){let s=i[e];s.Lt===t&&(s.gn(),ja(i,e))}}M8(i){bv(i.zt)&&t.A8(i)&&(i.Jf===Ua.ERROR?this.y8(i):this.p8(i))}get E1(){return this.T8.cs}tr(){for(let t of this.w8)t.Lt.fn(qo.H_,this.N8),t.Lt.fn(qo.X_,this.N8),t.gn();No(this.w8)}gn(){this.tr();for(let t of this.w8)t.gn();this.Dl.fn(yt.L_,this.D8),this.Dl.fn(yt.C_,this.I8),this.Dl.fn(qo.ra,this.N8),this.T8.fn(ri.ra,this.S8),this.RB.fn("W_",this.E8)}constructor(t,i,e,s,n){this.w8=[],this.D8=t=>{let i=t.Lt;i.yn(qo.H_,this.N8),i.yn(qo.X_,this.N8),i instanceof yn&&(i.E1=this.E1),this.M8(i)},this.N8=t=>{let i=t.Lt;this.M8(i)},this.I8=t=>{let i=t.Lt;i.fn(qo.H_,this.N8),i.fn(qo.X_,this.N8),this.y8(i)},this.S8=()=>{let t=this.E1;for(let i of this.Dl.og)i instanceof yn&&(i.E1=t)},this.E8=()=>{for(let t of this.w8)t.T5(this.RB)},this.b8=()=>{for(let t of this.w8)t.T5(Tt({},t.I5(),{JH:"hidden"}))},this.L8=()=>{for(let t of this.w8)t.T5(Tt({},t.I5(),{JH:"visible"}))},this.m8=t,this.Wu=i,this.Dl=e,this.T8=n,this.RB=s,this.Dl.yn(yt.L_,this.D8),this.Dl.yn(yt.C_,this.I8),this.Dl.yn(qo.ra,this.N8),this.T8.yn(ri.ra,this.S8),this.RB.yn("W_",this.E8),this.S8()}};function uj(t){const i=new kI,e=function(t){const i=[];return bI.ia(t)&&i.push(new bI(t)),LI.ia(t)&&i.push(new LI(t)),i}(t);if(e.length>0){for(const t of e)i.HY(t);i.WY(e[0])}return i}var xh,cj=class extends Qx{get Uz(){return this.Ox}get r_(){return this.Ox.videoHeight}get a_(){return this.Ox.videoWidth}get ya(){return this.k8}A_(){return this.Ox}async Ud(){this.k8.gn(),this.C8.gn(),this.x8.gn(),await super.Ud()}be(){super.be(),this.C8.be()}ge(){super.ge(),this.C8.ge()}h5(t){super.h5(t),this.C8.h5(t)}constructor(t,i,e,s){super(t,i,e,s),this.k8=uj(t),this.C8=new eh,this.x8=new kh(this.C8.we,this.Iu,this.nt,this.Ol,this.ya)}};!function(t){t.O8="HELLO",t.j8="HI_THERE",t.z8="INITIALIZE",t.P8="APPEND_INIT",t.B8="APPEND_DATA",t.U8="ACK",t.Q8="REMOVE",t.F8="DESTROY_SESSION"}(xh||(xh={}));var lj,dj=class{Y8(t){return this.Mq.Mx((async t=>{Bo(t);const i=new MessageChannel,e=i.port1,s=i.port2;Dl.serviceWorker.controller||await ti(Dl.serviceWorker,"install",t),"activated"!==Dl.serviceWorker.controller.state&&await ti(Dl.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};Dl.serviceWorker.controller.postMessage(n,[s]),e.start(),this.G8=e;try{const i=await ti(e,"message",t),s=i.data;if("HI_THERE"!==s.kind)throw new g("Could not set up message channel");this.Px=s.sessionId}catch(t){throw Ho(t)&&this.V8(),t}}),t)}W8(t,i){return this.G8,this.Mq.Mx((async()=>{if(!this.G8)throw new g("MessageSession not set up yet or already closed.");i||(i=[]),this.G8.postMessage(t,i);const e=await ti(this.G8,"message");return e.data}))}H8(){return this.Mq.Mx((()=>this.V8()))}V8(){if(!Dl.serviceWorker.controller)return;if("activated"!==Dl.serviceWorker.controller.state)return;if(!this.G8)return;const t={kind:"DESTROY_SESSION"};this.G8.postMessage(t),this.G8.close(),this.G8=void 0}constructor(){this.Mq=new _r}},fj=class{get q8(){return this.X8}Z8(t,i){const e=t-i;this.X8=e>this.q8?this.X8:e}K8(t){this.X8=t}constructor(){this.X8=1/0}};!function(t){t.ym="audio",t.pm="video",t.Nm="metadata"}(lj||(lj={}));var _j=class extends xd{get wf(){return void 0===this.J8||void 0===this.t9?Ai.SB():new Ai([this.J8,this.t9])}get wd(){return{qz:this.qF}}get e$(){return Vt.rT}get CF(){return this.qF}get n$(){return Ai.SB()}get NW(){return 30}set NW(t){}get EW(){return 30}set EW(t){}o$(t,i){}a$(t,i){}Cq(){return this.i9}get oa(){return this.e9}get s9(){return this.J8}get VT(){return this.t9}async u$(){}async kJ(t,i){}async _J(t,i,e){if(t.Rg!==ji.aq)throw new g("Streaming or opaque segments are not supported yet.");const s=t.zm,n=async()=>{const t=s.buffer,e={kind:xh.B8,mediaType:gj(this.qF),segment:s,startPts:i.n9,totalDuration:i.ct};if(await this.r9.W8(e,[t]),void 0===this.J8){const t=i.n9+i.UD;this.J8=t,this.t9=t}this.t9=this.t9+i.ct,this.Co(new wn(Z.hq))};return this.Mq.Mx((async t=>{Bo(t);try{this.e9=!0,await n()}finally{this.e9=!1}}),e)}async AJ(t,i,e){if(t.Rg!==ji.aq)throw new g("Streaming or opaque initialization segments are not supported yet.");const s=t.zm,n=async()=>{const t={kind:xh.P8,mediaType:gj(this.qF),segment:s};await this.r9.W8(t,[])};return this.Mq.Mx((async t=>{Bo(t);try{this.e9=!0,await n()}finally{this.e9=!1}}),e)}t$(){this.i9=!0}GJ(){this.i9=!1}async ET(t,i,e){const s=async()=>{const t={kind:xh.Q8,mediaType:gj(this.qF),endTime:i};await this.r9.W8(t),this.J8=void 0,this.t9=void 0,this.Co(new wn(Z.hq))};return this.Mq.Mx((async t=>{Bo(t);try{this.e9=!0,await s()}finally{this.e9=!1}}),e)}gq(t){return this.qF===t.qz}Aq(t){return this.qF=t.qz,Promise.resolve()}async Ud(){this.Vo(),await this.Mq.gn()}constructor(t,i){super(),this.qF=t,this.r9=i,this.J8=void 0,this.t9=void 0,this.Mq=new _r,this.e9=!1,this.i9=!1}};function gj(t){return t.match(/video/)?lj.pm:lj.ym}var wj=class t{static h9(i,e,s,n){const r=[];for(let t=0;t<i.r0.length;t++){const s=i.r0[t].qz;r.push(new _j(s,e))}return new t(i,r,s,n)}o9(){}get a9(){return[this.Z$,this.K$].filter(Yt)}get V$(){return this.Z$}get wf(){return Fk(this)}get wd(){return this.lx}get ct(){return 0}get Cq(){var t,i,e;const s=null==(e=null==(t=this.Z$)?void 0:t.Cq())||e;var n;const r=null==(n=null==(i=this.K$)?void 0:i.Cq())||n;return s&&r}get t_(){return new Ai([0,1/0])}get W$(){return this.K$}get rt(){throw new g("Not implemented")}async Ud(){await Promise.all([this.Z$,this.K$].filter(Yt).map((t=>t.Ud())))}t0(t){}n0(t,i,e,s){}t$(){var t,i;null==(t=this.Z$)||t.t$(),null==(i=this.K$)||i.t$()}GJ(){var t,i;null==(t=this.Z$)||t.GJ(),null==(i=this.K$)||i.GJ()}gq(t){return!0}Aq(t){return this.lx=t,Promise.resolve()}async fq(t,i){const e=await this.YC.FC(t.Sb,i),s=await e.LC();return await this._q(s),s}async _q(t){if(t&&!this.Ox.src)throw new Qr(Ui.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.Ox.src)throw new Qr(Ui.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const i=this.IC;i&&(await i.EC(this.Ox),this.IC=void 0),t&&(await t.bn(this.Ox),this.IC=t)}constructor(t,i,e,s){this.IC=void 0,this.lx=t,this.K$=Po(i,(t=>Boolean(t.CF.match(/video/)))),this.Z$=Po(i,(t=>Boolean(t.CF.match(/audio/)))),this.YC=e,this.Ox=s,this.o9()}},Aj=class extends xd{u9(){this.c9.addEventListener("timeupdate",this.l9),this.c9.addEventListener("ended",this.d9),this.c9.addEventListener("timeupdate",this.f9),this.c9.addEventListener("ratechange",this._9),this.c9.addEventListener("volumechange",this.g9),this.c9.addEventListener("durationchange",this.w9),this.c9.addEventListener("playing",this.A9),this.c9.addEventListener("seeking",this.v9),this.c9.addEventListener("play",this.m9),this.c9.addEventListener("pause",this.p9),this.c9.addEventListener("encrypted",this.X3)}y9(){this.c9.removeEventListener("timeupdate",this.l9),this.c9.removeEventListener("ended",this.d9),this.c9.removeEventListener("timeupdate",this.f9),this.c9.removeEventListener("ratechange",this._9),this.c9.removeEventListener("volumechange",this.g9),this.c9.removeEventListener("durationchange",this.w9),this.c9.removeEventListener("playing",this.A9),this.c9.removeEventListener("seeking",this.v9),this.c9.removeEventListener("play",this.m9),this.c9.removeEventListener("pause",this.p9)}M9(){this.m2.yn(he.H_,this.Ds)}T9(){this.m2.fn(he.H_,this.Ds)}get Uz(){return this.c9}get I0(){return!1}get Mf(){return this.c9.currentTime+this.N9.q8}get Ff(){return this.c9.paused}get c_(){return this.c9.volume}set c_(t){this.c9.volume=t}get Gf(){return this.c9.playbackRate}set Gf(t){this.c9.playbackRate=t}get D9(){return this.c9.defaultPlaybackRate}get wf(){var t,i;return null!=(i=null==(t=this.Fz)?void 0:t.wf)?i:Ai.SB()}get I9(){return Ai.xn(this.c9.buffered)}get Hf(){const t=this.S9;return this.Uo.cB(t.Im(this.N9.q8))}get S9(){return Ai.xn(this.c9.played)}get e_(){return this.bB}get m0(){return!1}get L0(){return!1}get ct(){return this.c9.duration}get Pf(){return this.c9.muted}set Pf(t){this.c9.muted=t}get h8(){return this.c9.style}get t2(){return Tt({},kL,{rq:!0})}Sm(t,i,e){this.V2.qd(),this.V2=new na,this.W2=this.H2(t,this.W2,this.V2.Wd).catch(qt)}async H2(t,i,e){var s;this.Uo=this.Hf;const n=null==(s=this.Fz)?void 0:s.a9;if(!n)return;const r=_.max(...n.map((t=>t.s9?t.s9:1/0)));this.bB=!0,this.Co(new Eh(t)),await i.catch(qt),Bo(e);try{for(this.E9||this.b9(),this.c9.load(),this.L9||(this.k9=!1,await Nr(this.c9.play(),e));this.Jf<ae.uT;)await this.m2.lf(he.H_,e);this.C9.Wb(),this.E9=!1,this.bB=!1,this.Co(new we(this.Mf))}catch(t){throw this.C9.qb(t),t}finally{this.x9(),this.N9.K8(r)}}m_(){this.L9=!0,this.c9.pause()}async p_(){this.L9&&(this.c9.src||this.r5(),await this.C9.Zb,await this.c9.play())}async Ud(){this.r9&&this.r9.H8().catch(qt),this.V2.qd(),this.y9(),this.T9(),this.m2.Ud(),this.Vo(),this.Dl.gn()}async tr(){this.r9&&this.r9.H8().catch(qt),this.V2.qd(),this.c9.removeAttribute("src"),this.c9.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.c9.removeAttribute("x-airplay-deny"),this.c9.disableRemotePlayback=!1,this.c9.load(),this.m2.tr(),this.Uo=Ai.SB()}r5(){this.s5||(Mj(this.c9,i.Ys),this.n5=!0)}get Jf(){return this.m2.Jf}b9(){const t=this.c9.getClientRects();let i;if(!(t.length>0))return;i=t[0];const e=i.width,s=this.c9.videoWidth/this.c9.videoHeight,n=i.height;let r,h;e/n>s?(r=n*s,h=n):(h=e/s,r=e),this.c9.style.width=r+"px",this.c9.style.height=h+"px",this.c9.style.marginLeft=(e-r)/2+"px",this.c9.style.marginTop=(n-h)/2+"px",this.c9.style.backgroundColor="black"}x9(){this.c9.style.width="100%",this.c9.style.height="100%",this.c9.style.marginLeft="",this.c9.style.marginTop="",this.c9.style.backgroundColor=""}get r_(){return this.c9.videoHeight}get a_(){return this.c9.videoWidth}get If(){return this.c9.ended}get Ti(){return this.c9.offsetHeight*i.Ys.A2}get ji(){return this.c9.offsetWidth*i.Ys.A2}get xf(){return!1}get s5(){return this.n5}get vf(){}get Iu(){}get lt(){}get ya(){return this.k8}get t_(){return this.Fz?this.Fz.t_:Ai.SB()}get Yz(){}get nt(){return this.Dl}get Ol(){}get g_(){return!1}set g_(t){}sP(t,i,e,s,n){}yS(t,i,e,s,n,r,h,o,a){const u=new hn(t,i,e,s,n,r,h,a,o);return this.Dl.tt(u),this.o3.tt(u),u}jq(t){}zf(){return fL(this.c9)}get S2(){return"block"===this.c9.style.display}ge(){this.c9.style.display="block"}be(){this.c9.style.display="none"}i5(){}async $n(t){if(t.Rg===ai.Wx)throw new g("Not yet implemented");await this.r9.Y8();const i=Po(t.Xz,(t=>t.ZA.Rg===vi.RA)),e={kind:xh.z8,mediaBufferConfigs:t.r0.map((t=>t.qz)),fairPlaySdkUri:null==i?void 0:i.Sj};return await this.r9.W8(e),this.Fz=wj.h9(t,this.r9,this.YC,this.c9),this.vq.$n(this.Fz,t),this.c9.setAttribute("x-webkit-airplay","deny"),this.c9.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.c9.disableRemotePlayback=!0,this.c9.preload="none",this.c9.src="https://theo.proxy/"+this.r9.Px+"/master.m3u8",this.Fz}e5(){}bS(t){this.Dl.it(t),this.o3.it(t)}rP(){for(const t of this.Dl.og.slice())t.gn();this.Dl.tr()}zz(t){}iP(){return!1}h5(t){t.appendChild(this.c9)}A_(){return this.c9}a2(){}get uP(){return this.vq.uP}set uP(t){this.vq.uP=t}get o5(){}set o5(t){}get Y4(){}D_(){}constructor(t,i){super(),this.E9=!0,this.r9=new dj,this.N9=new fj,this.L9=!0,this.C9=new Rs,this.bB=!1,this.W2=Promise.resolve(),this.V2=new na,this.k9=!0,this.Uo=Ai.SB(),this.n5=!1,this.l9=()=>{this.Ff||this.I9.U<=0||this.wf.U<=0||this.N9.Z8(this.wf.jn(this.wf.U-1),this.I9.jn(this.I9.U-1))},this.d9=()=>{this.Co(new ee(this.Mf))},this.f9=()=>{this.Co(new Pc(this.Mf,this.vf))},this._9=()=>{this.Co(new ls(this.Mf,this.Gf))},this.g9=()=>{this.Co(new Je(this.Mf,this.c_))},this.w9=()=>{this.Co(new jn(this.ct))},this.A9=()=>{this.Co(new Zr(this.Mf))},this.v9=()=>{this.Sm(this.Mf)},this.m9=async()=>{this.k9&&this.Co(new sh(this.Mf)),this.L9=!1,this.k9=!0},this.p9=()=>{this.L9=!0,this.Co(new ge(this.Mf))},this.X3=t=>{const i=t.initDataType;var e;const s=null!=(e=t.initData)?e:new ArrayBuffer(0);this.Co(new Us(i,s))},this.c9=t,this.m2=new qu(this),this.c9.playsInline=!0,this.c9.style.width="100%",this.c9.style.height="100%",this.u9(),this.M9(),this.k8=uj(this.c9),this.vq=new Ox(this),this.YC=i,this.Dl=new _i,this.o3=new rh(this)}},vj=[Vt.ym,Vt.pm];function mj(t){const i=h.createElement(t);return Bs(i)&&i.addEventListener("contextmenu",Tj),yj(i),i}function pj(t){yj(t),t.removeEventListener("contextmenu",Tj)}function yj(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),mM(t),kM(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload=wo.iT,t.controls=!1,t.style.display="none",Bs(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function Mj(t,i){if(i.O9){const i=t.muted;t.muted=!0,t.muted=!1,t.muted=i}else if(t.paused){const i=t.play();Ka(i)&&D(i),t.pause()}}function Tj(t){t.preventDefault()}var Nj=class{SI(t){return this.NS.SI(t)}ZF(t){this.NS.ZF(t)}gn(){this.NS.gn()}constructor(t){this.NS=t}},Dj=class extends Nj{SI(t){const i=new zu(t),e=this.PB._W.vz(i);return e?this.j9(i,e):this.NS.SI(i)}async j9(t,e){e.wW(i.Kd()/1e3);const s=await this.NS.SI(t);let n;e.AW(i.Kd()/1e3),n=s.wV?s.dV().pipeThrough(new qa(new Ij(e))):s.cj().then((t=>{const s=i.Kd()/1e3;return e.vW(s,new j(t)),e.mW(s),t}));const r={zm:n,SI:s.SI};return new _h(r,s)}constructor(t,i){super(t),this.PB=i}},Ij=class{start(t){this.UH=t}transform(t){this.z9.vW(i.Kd()/1e3,t),this.UH.enqueue(t)}flush(){this.z9.mW(i.Kd()/1e3)}constructor(t){this.z9=t}};function Sj(t){return{get ratio(){return t.Lo},get thresholds(){return t.P9.slice()}}}function Ej(t){const i=[],e=_.floor(1/t);if(S(e))return[];for(let s=0;s<=e;s++){const e=ks(s*t,0,1);i.push(e)}return i}var bj=class{get Lo(){return this.B9}get P9(){return this.R9}U9(t){return i=>{const e=i[i.length-1];this.B9=e.intersectionRatio,t(e.intersectionRatio)}}get va(){return this.Xa||(this.Xa=Sj(this)),this.Xa}y_(){this.Q9.disconnect()}constructor(t,i,e){this.B9=1,this.Xa=void 0,this.R9=Ej(i);const n=this.U9(e);this.Q9=new s.IntersectionObserver(n,{root:null,threshold:this.R9}),this.Q9.observe(t)}},Lj=class{get Lo(){return this.B9}get P9(){return this.R9}get va(){return this.Xa||(this.Xa=Sj(this)),this.Xa}F9(t){this.B9=t;const i=this.R9;let e=0;if(t>0)for(;e<i.length&&i[e]<=t;)++e;this.Y9!==e&&(this.Y9=e,this.G9(t))}constructor(t,i){this.B9=1,this.Y9=-1,this.Xa=void 0,this.R9=Ej(t),this.G9=i}},kj=class extends Lj{V9(){const t=this.yo.getBoundingClientRect();return ks(_.max(0,_.min(s.innerWidth,t.right)-_.max(0,t.left))*_.max(0,_.min(s.innerHeight,t.bottom)-_.max(0,t.top))/(t.width*t.height),0,1)}y_(){s.removeEventListener("scroll",this.W9)}constructor(t,i,e){super(i,e),this.W9=uo((()=>this.F9(this.V9())),50),this.yo=t,s.addEventListener("scroll",this.W9,!!pI&&{passive:!0}),Hu((()=>this.F9(this.V9())))}},Cj=.1,xj=class{get H9(){return this.q9}get zo(){return this.X9}set zo(t){if(S(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.X9=t}get va(){return this.Xa||(this.Xa=function(t){return{get ratio(){return t.H9},get visible(){return t.H9>t.zo},get visibleThreshold(){return t.zo},set visibleThreshold(i){i=Mh(i),t.zo=i},addObserver:(i,e)=>(i=Mh(i),t.Fo(i,e).va),removeObserver(i){let e=t.Z9(i);e&&t.Ro(e)}}}(this)),this.Xa}K9(t){return i=>{this.q9=i,null==t||t(this.q9)}}Fo(t,i){if(S(t))throw new b("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let e;return e="function"==typeof s.IntersectionObserver?new bj(this.yo,t,this.K9(i)):new kj(this.yo,t,this.K9(i)),this.J9.push(e),e}Ro(t){t.y_(),To(this.J9,t)}Z9(t){for(const i of this.J9)if(i.va===t)return i}gn(){for(const t of this.J9)t.y_();No(this.J9)}constructor(t){this.q9=1,this.X9=0,this.J9=[],this.Xa=void 0,this.yo=t,this.Fo(.1,this.K9())}},Oj=class extends wn{constructor(){super(l.qg)}},jj=class{get t7(){return this.i7}set t7(t){this.i7=t}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{get conviva(){var i;return null==(i=t.t7)?void 0:i.va}}}(this)}gn(){this.i7=void 0}};var zj=class extends Mo{get e7(){return this.PB}get DT(){return this.s7}set DT(t){this.s7=t,this.n7.DT=t}get r7(){return this.h7}get ht(){return this.n7.ht}get fQ(){return this.o7}get Iu(){return this.a7}get kf(){return this.n7.kf}get jf(){return this.u7}get kU(){return this.l7}get nt(){return this.n7.nt}get Ol(){return this.RB}get rt(){return this.n7.rt}get wf(){return this.Af()}Af(){return this.n7.wf}get d7(){return this.WW}get rH(){return this.hH}get Mf(){return this.Tf()}set Mf(t){this.Nf(t)}Tf(){return this.n7.Mf}Nf(t){this.n7.Mf=t}f7(){return this.Tf()}get vf(){return this.n7.vf}set vf(t){this.n7.vf=t}get bt(){return this.n7.bt}get ct(){return this.Td()}Td(){return this.n7.ct}get we(){return this.n7.we}get If(){return this.n7.If}get lt(){return this.Ef()}Ef(){return this.n7.lt}get bf(){return this.Lf()}Lf(){return this.n7.bf}get ya(){return this.n7.w_()}get g_(){return this.n7.g_}set g_(t){this.n7.g_=t}get Pf(){return this.n7.Pf}set Pf(t){const i=Boolean(t);this.Rf(i)}Rf(t){this.n7.Pf=t,t||this.Ff||this.v_()}get Ff(){return this.n7.Ff}get Gf(){return this.n7.Gf}set Gf(t){this.n7.Gf=t}get Hf(){return this.qf()}qf(){return this.n7.Hf}get Xf(){return this.n7.Xf}set Xf(t){this.n7.Xf=t}get Jf(){return this.n7.Jf}get t_(){return this.i_()}i_(){return this.n7.t_}get e_(){return this.n7.e_}get Mg(){return this.xT}get r_(){return this.n7.r_}get a_(){return this.n7.a_}get c_(){return this.n7.c_}set c_(t){const i=ks(Number(t),0,1)||0;this.d_(i)}get f_(){return this.BB}d_(t){this.n7.c_=t}ka(){yu(this,HN,this)}p_(){this.n7.p_()}m_(){this.n7.m_()}Wa(){return this.WP}async ga(t,i){if(this.WP=t,t){this._7.$Q(t).catch(this.g7);const e=function(t){t.sources;const i=t.sources.filter((t=>Qo(t.integration)));0;return t.sources=i,t}(t);await this.n7.ga(e,i)}}v_(){if(this.bo)return;this.n7.v_(),this.h7.v_();const t=this.we.getElementsByTagName("video");for(let e=0;e<t.length;e++){const s=t[e];"Advertisement"===s.title&&Mj(s,i.Ys)}this.bo=!0}cs(){return this.w7.qo()===Tu.FULLSCREEN}ge(){this.n7.ge()}be(){this.n7.be()}A_(){return this.n7.A_()}D_(){this.n7.D_()}I_(){this.n7.I_()}async y_(){this.WP=void 0,await this.n7.y_(),await this.n7.tr()}async gn(){this.Co(new Oj),this.Vo(),this.o7.gn(),this._O.gn(),this.l7.gn(),this.A7.gn(),this.v7.gn(),this.w7.gn(),this.a7.gn(),this.m7.gn(),this.p7.gn(),this.h7.gn(),this.zB.gn(),await this.n7.gn()}constructor(t,e,s){super(),this.s7=!1,this.bo=!1,this.WP=void 0,this.y7=!1,this.m7=new jj,this.ba=void 0,this.g7=t=>{if(this.y7)return;this.y7=!0;const i=this.M7,e=Ki(t);this.n7.fg=new kN(this.we,e,t),D(i.gn())},this.T7=t=>{t.type!==l._w&&t.type!==l.fw&&this.Co(t)};const n=Mh(e.uid);S(n)?this.xT=Iw++:this.xT=n,this.wd=e;const r=i._O,h=new TL;this.p7=new cI("7.12.0",r,h),this.PB=new nL,this.BB=new ni;const o=new Dj(r,this.PB);this._O=new Wb(o,e.allowMixedContent),this.xH=null!=s?s:new qD(e.isEmbeddable,"7.12.0",GD()),this._7=new ML(r,this.xH,this.p7,h,e,GD()),this._7.EH().catch(this.g7),this.a7=new II(t),this.a7.yn(ve.pn,this.Ds),this.RB=new EL,this.WW=new aL,this.hH=new cL;const a=new tt(t,e,this._O,this.PB,this.BB,this.a7,this.RB);this.PB.bW(a);let u=a;u=new uL(u,this.d7),u=new lL(u,this.rH),this.M7=u,this.n7=new mw(this.M7),this.n7.sf(this.T7),this.u7=new dL(this.n7),this.l7=new Xb(this.n7,this._O,this.PB),this.A7=new gI(this),this.v7=new CI(this.n7,e.allowNativeFullscreen),this.w7=new WN(this.v7),this.a7.bn(),this.Bo=new xj(t),this.zB=new om(this.a7,this.RB,1,[Vt.pm]),this.h7=new am(this.zB),this.o7=new wL}};var sa,V=class extends Mo{get e7(){return this.N7()}N7(){return this.Qo.e7}get Oc(){return this.D7()}D7(){return this.Qo.Oc}get m7(){return this.Qo.m7}get p7(){return this.Qo.p7}get r7(){return this.I7()}I7(){return this.Qo.r7}get DT(){return this.Qo.DT}set DT(t){this.Qo.DT=t}get A7(){return this.Qo.A7}get fQ(){return this.Qo.fQ}get d7(){return this.Qo.d7}get wd(){return this.Qo.wd}get Iu(){return this.Qo.Iu}get ya(){return this.w_()}w_(){return this.Qo.ya}get _O(){return this.Qo._O}get f_(){return this.Qo.f_}get _7(){return this.Qo._7}get rH(){return this.Qo.rH}get kU(){return this.Qo.kU}get w7(){return this.Qo.w7}get a7(){return this.Qo.a7}get n7(){return this.Qo.n7}get Ol(){return this.Qo.Ol}get S7(){return this.E7()}E7(){return this.Qo.S7}get Mg(){return this.Qo.Mg}get Bo(){return this.Qo.Bo}get ht(){return this.df()}df(){return this.Qo.ht}Af(){return this.Qo.Af()}get vf(){return this.mf()}set vf(t){this.pf(t)}mf(){return this.Qo.vf}pf(t){this.Qo.vf=t}get bt(){return this.yf()}yf(){return this.Qo.bt}Tf(){return this.Qo.Tf()}Nf(t){this.Qo.Nf(t)}f7(){return this.Qo.f7()}Td(){return this.Qo.Td()}get we(){return this.Df()}Df(){return this.Qo.we}get If(){return this.Sf()}Sf(){return this.Qo.If}Ef(){return this.Qo.Ef()}Lf(){return this.Qo.Lf()}get kf(){return this.Cf()}Cf(){return this.Qo.kf}get g_(){return this.Qo.g_}set g_(t){this.Qo.g_=t}get jf(){return this.zf()}zf(){return this.Qo.jf}get Pf(){return this.Bf()}set Pf(t){this.Rf(t)}Bf(){return this.Qo.Pf}Rf(t){this.Qo.Rf(t)}get Ff(){return this.Yf()}Yf(){return this.Qo.Ff}get Gf(){return this.Vf()}set Gf(t){this.Wf(t)}Vf(){return this.Qo.Gf}Wf(t){this.Qo.Gf=t}qf(){return this.Qo.qf()}get Xf(){return this.Zf()}set Xf(t){this.Kf(t)}Zf(){return this.Qo.Xf}Kf(t){this.Qo.Xf=t}get Jf(){return this.$f()}$f(){return this.Qo.Jf}get ba(){return this.Qo.ba}set ba(t){this.Qo.ba=t}i_(){return this.Qo.i_()}get e_(){return this.s_()}s_(){return this.Qo.e_}get nt(){return this.n_()}n_(){return this.Qo.nt}get r_(){return this.h_()}h_(){return this.Qo.r_}get rt(){return this.o_()}o_(){return this.Qo.rt}get a_(){return this.u_()}u_(){return this.Qo.a_}get c_(){return this.l_()}set c_(t){this.d_(t)}l_(){return this.Qo.c_}d_(t){this.Qo.d_(t)}v_(){this.Qo.v_()}m_(){this.Qo.m_()}p_(){this.Qo.p_()}ge(){this.Qo.ge()}be(){this.Qo.be()}cs(){return this.Qo.cs()}A_(){return this.Qo.A_()}D_(){this.Qo.D_()}I_(){this.Qo.I_()}ka(){this.Qo.ka()}Wa(){return this.Qo.Wa()}ga(t,i){return this.Qo.ga(t,i)}y_(){return this.Qo.y_()}E_(t){return!1}GP(){this.b7&&this.Qo.sf(this.b_)}VP(){this.b7&&this.Qo.cf(this.b_)}async gn(t){this.Vo(),t||await this.Qo.gn(),this.VP()}constructor(t,i){super(),this.b_=t=>{this.E_(t)||this.Co(t)},this.Qo=t,this.b7=!i,this.GP()}};!function(t){t[t.Za=0]="Za",t[t.L7=1]="L7",t[t.k7=2]="k7",t[t.C7=3]="C7",t[t.x7=4]="x7"}(sa||(sa={}));var Pj=[0,1,2,3,4],Bj={};function Rt(t,i){(Bj[i]||(Bj[i]=[])).push(t)}var Rj={};function Uj(t,i){(Rj[i]||(Rj[i]=[])).push(t)}var Qj=[];function Fj(t){for(const i of Qj)i(t)}var Yj=self.CustomEvent;var Gj=function(){try{const t=new Yj("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,i){return new CustomEvent(t,i)}:function(t,i){const e=h.createEvent("CustomEvent");return e.initCustomEvent(t,(null==i?void 0:i.bubbles)||!1,(null==i?void 0:i.cancelable)||!1,null==i?void 0:i.detail),e};var Vj=new class{get U(){return this.MT.length}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){const i=[];for(let e=0;e<t.U;e++)i[e]=t.cg(e).va;return i.getPlayerByUID=i=>{const e=t.O7(i);return e&&e.va},i}(this)}cg(t){return this.MT[t]}Jq(t){this.MT.push(t),this.va.push(t.va)}ET(t){const i=this.MT.indexOf(t);i<0||(ja(this.MT,i),this.Xa&&ja(this.Xa,i))}O7(t){for(const i of this.MT)if(i.Mg===t)return i}constructor(){this.MT=[],this.Xa=void 0}};var Zi,Wj=class extends wn{constructor(t){super(l.lo),this.source=t}},Hj=class extends Mo{get vf(){}set vf(t){}get Mf(){return this.Tf()}set Mf(t){this.Nf(t)}Tf(){return this.EB}f7(){return this.Tf()}Nf(t){this.bB&&this.EB===t||(this.EB=t,this.bB=!0,this.Co(new Eh(this.EB)))}get Ff(){return this.kB}get Gf(){return this.CB}set Gf(t){this.CB!==t&&(this.CB=t,this.Co(new ls(this.EB,this.Gf)))}get Jf(){return ae.aT}get e_(){return this.bB}p_(){this.kB&&(this.kB=!1,this.Co(new sh(this.EB)),this.Co(new lc(this.EB)))}m_(){this.kB||(this.kB=!0,this.Co(new Pc(this.EB,this.vf)),this.Co(new ge(this.EB)))}tr(){this.EB=0,this.bB=!1,this.CB=1,this.m_()}gn(){this.Vo()}be(){}ge(){}constructor(){super(),this.EB=0,this.kB=!0,this.bB=!1,this.CB=1}},qj={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},Xj={visibility:"hidden"},Zj={visibility:"visible"},Kj=class{get zu(){return void 0!==this.j7?this.j7:void 0!==this.z7?this.z7:void 0}set P7(t){this.z7=t,this.Yn()}Yn(){const t=this.Qo.Ff,i=this.B7;this.zu?this.Us.style.backgroundImage='url("'+Sf(this.zu)+'")':this.Us.style.backgroundImage="",t&&this.zu&&!i?this.ge():this.be()}ge(){on(Xj,this.Qo.we),on(Zj,this.Us)}be(){on(Xj,this.Us),on(Zj,this.Qo.we)}GP(){this.Qo.yn(l.lo,this.R7),this.Qo.yn(l.jh,this.aO)}gn(){this.Qo.fn(l.lo,this.R7),this.Qo.fn(l.jh,this.aO),fh(this.Us)}constructor(t){this.B7=!1,this.R7=t=>{var i;this.B7=!this.Qo.Ff,this.j7=null==(i=t.source)?void 0:i.poster,this.Yn()},this.aO=()=>{this.B7=!0,this.be()},this.Qo=t,this.GP(),this.Us=function(){let t=_s&&_s.document&&_s.document.createElement("div");return t.className="theoplayer-poster",on(qj,t),t}(),t.we.appendChild(this.Us)}};function Ch(t){let i;const e={get playing(){return t.Fc},get currentAds(){return t.U7.map((t=>t.Q7()))},get currentAdBreak(){var i,e;return null!=(e=null==(i=t.F7)?void 0:i.Q7())?e:null},get scheduledAds(){return t.Y7.map((t=>t.Q7()))},get scheduledAdBreaks(){return t.G7.map((t=>t.Q7()))},skip(){t.Hm()},schedule(i){let e=SD(i,ta.Ib);e?t.n4(e,Zi.V7,!1):console.error("Invalid ad description")},registerServerSideIntegration(i,e){t.W7(i,e)},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Ro(t,e),e}!function(t){t[t.V7=0]="V7",t[t.H7=1]="H7"}(Zi||(Zi={}));var tc=class extends yo{constructor(t,i){super(t),this.Xl=i}},pc=class extends wn{get ad(){return this.adBreak}constructor(t,i){super(t),this.adBreak=i}},Vn=class extends tc{fa(){return new Jj(this.Xl.Q7())}constructor(t){super("q7",t)}},Jj=class extends pc{constructor(t){super("removeadbreak",t)}},_n=class extends tc{fa(){return new $j(this.Xl.Q7())}constructor(t){super("X7",t)}},$j=class extends pc{constructor(t){super("addadbreak",t)}},je=class extends yo{constructor(t,i){super(t),this.Z7=i}},Fs=class extends wn{constructor(t,i){super(t),this.ad=i}},ar=class extends je{fa(){return new tz(this.Z7.Q7())}constructor(t){super("K7",t)}},tz=class extends Fs{constructor(t){super("addad",t)}},ms=class extends tc{fa(){return new iz(this.Xl.Q7())}constructor(t){super("J7",t)}},iz=class extends pc{constructor(t){super("adbreakend",t)}},Nu=class extends tc{fa(){return new ez(this.Xl.Q7())}constructor(t){super("ttt",t)}},ez=class extends pc{constructor(t){super("adbreakbegin",t)}},Nh=class extends je{fa(){return new sz(this.Z7.Q7(),this.currentTime)}constructor(t,i){super("itt",t),this.currentTime=i}},sz=class extends Fs{constructor(t,i){super("adbegin",t),this.currentTime=i}},gh=class extends je{fa(){return new nz(this.Z7.Q7(),this.currentTime)}constructor(t,i){super("ett",t),this.currentTime=i}},nz=class extends Fs{constructor(t,i){super("adend",t),this.currentTime=i}},qh=class extends yo{fa(){return new rz}constructor(){super("stt")}},rz=class extends wn{constructor(){super("adadded")}},Uh=class extends Mo{get Fc(){return!!this.Ic&&this.Ic.Fc}get U7(){return this.Ic?this.Ic.U7:[]}get F7(){return this.Ic?this.Ic.F7:null}get Y7(){return this.Ic?this.Ic.Y7:[]}get G7(){return this.Ic?this.Ic.G7:[]}n4(t,i,e){var s;null==(s=this.Ic)||s.n4(t,i,e)}ntt(t){var i;null==(i=this.Ic)||i.ntt(t)}Hm(){var t;null==(t=this.Ic)||t.Hm()}htt(t){var i;null==(i=this.Ic)||i.htt(t)}W7(t,i){var e;null==(e=this.Ic)||e.W7(t,i)}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=Ch(this)}get fg(){return this.Ic}set fg(t){const i=this.Ic;if(i===t)return;const e=this.U7,s=this.F7,n=this.Y7,r=this.G7;null==i||i.cf(this.Ds),this.Ic=t,null==t||t.sf(this.Ds);const h=this.U7,o=this.F7,a=this.Y7,u=this.G7,c=[];let l=!1;for(const t of r)gd(u,t)||c.push(new Vn(t));for(const t of u)gd(r,t)||c.push(new _n(t));for(const t of a)gd(n,t)||(c.push(new ar(t)),l=!0);l&&c.push(new qh),s!==o&&(s&&c.push(new ms(s)),o&&c.push(new Nu(o)));for(const t of e)gd(h,t)||c.push(new gh(t,this.Qo.Tf()));for(const t of h)gd(e,t)||c.push(new Nh(t,this.Qo.Tf()));for(const t of c)this.Co(t)}gn(){var t;return this.Vo(),null==(t=this.Ic)||t.cf(this.Ds),this.Ic=void 0,Promise.resolve()}constructor(t){super(),this.Xa=void 0,this.Qo=t}},Sh=class extends Mo{get Fc(){return!1}get U7(){return[]}get F7(){return null}get Y7(){return[]}get G7(){return[]}n4(t,i,e){this.ott.push({att:t,utt:i,ctt:e})}Hm(){}htt(t){}W7(t,i){this.ltt.push({qA:t,dtt:i})}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=Ch(this)}ntt(t){const i=this.ltt.slice(),e=this.ott.slice();this.tr();for(const e of i)t.W7(e.qA,e.dtt);for(const i of e)t.n4(i.att,i.utt,i.ctt)}ftt(){const t=this.ott.map((t=>t.att));return this.tr(),t}tr(){No(this.ltt),No(this.ott)}gn(){return this.Vo(),this.tr(),Promise.resolve()}constructor(...t){super(...t),this.Xa=void 0,this.ltt=[],this.ott=[]}};function hz(t){return class extends Mo{get p7(){return this._tt.p7}get Oc(){return this.Ic}get m7(){return this._tt.m7}get A7(){return this._tt.A7}get wd(){return this._tt.wd}get _O(){return this._tt._O}get ya(){return this._tt.ya}get w7(){return this._tt.w7}get a7(){return this._tt.a7}get n7(){return this._tt.n7}get e7(){return this._tt.e7}get DT(){return this._tt.DT}set DT(t){this._tt.DT=t,this.gtt()}get r7(){return this._tt.r7}get ht(){return this._tt.ht}get fQ(){return this._tt.fQ}get Iu(){return this._tt.a7}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}get kf(){return this._tt.kf}get g_(){return this._tt.g_}set g_(t){this._tt.g_=t}get jf(){return this._tt.jf}get kU(){return this._tt.kU}get nt(){return this._tt.nt}get Ol(){return this._tt.Ol}get rt(){return this._tt.rt}get d7(){return this._tt.d7}get rH(){return this._tt.rH}get vf(){return this.Qo.vf}set vf(t){this.Qo.vf=t}get bt(){return this._tt.bt}get we(){return this._tt.we}get If(){return this._tt.If}get Pf(){return this._tt.Pf}set Pf(t){this.Rf(t)}get Ff(){return this.Qo.Ff}get mi(){return this.wtt.zu||""}set mi(t){this.wtt.P7=t}get Gf(){return this._tt.Gf}set Gf(t){this.Qo.Gf=t}get Xf(){return this._tt.Xf}set Xf(t){this._tt.Xf=t}get Jf(){return this.Qo.Jf}get ba(){return this._tt.ba}set ba(t){this._tt.ba=t}get e_(){return this.Qo.e_}get S7(){return this._tt.S7}get Mg(){return this._tt.Mg}get r_(){return this._tt.r_}get a_(){return this._tt.a_}get c_(){return this._tt.c_}set c_(t){this.d_(t)}get f_(){return this._tt.f_}get _7(){return this._tt._7}get Bo(){return this._tt.Bo}async Mx(t,i){return this.Mq.Mx(t,i).catch(Bc)}async Att(t,i){Bo(i),this._tt.sf(this.mtt);try{await this._tt.ga(t,i)}finally{this._tt.cf(this.mtt)}}async gtt(){const t=await this.ptt();this.ytt(t)}async ptt(){const t=this.Wa();return t&&!ne(t)&&this.DT&&this.Ff?this.r7.Mtt(this.Pf):"none"}ytt(t){var i;const e=(null==(i=this.Wa())?void 0:i.mutedAutoplay)||this.wd.mutedAutoplay;switch(t){case"all":this.Ttt();break;case"muted":(this.Pf||e===cw.ALL)&&(this.Pf=!0,this.p_())}}ga(t){ne(this.WP)||this.Co(new uw(0,ae.aT)),this.tr(),this.WP=t,D(this.Mx((async i=>{Bo(i);try{await this.Att(t,i)}catch(t){return Ao(t),this.WP=void 0,void this.IP(function(t,i){return t instanceof $i?t:t instanceof g?new $i(i,t.message,t):new $i(i,String(t))}(t,Ui.SOURCE_NOT_SUPPORTED))}finally{this.Ntt(this._tt)}const e=await this.ptt();this.Co(new Wj(this.Wa())),this.ytt(e)})))}Nf(t){this.Qo.Nf(t)}Ef(){var t;return null!=(t=this.GB)?t:this._tt.Ef()}Lf(){var t;return null!=(t=this.Bz)?t:this._tt.Lf()}IP(t){void 0===this.Lf()&&(this.Bz=t,this.GB=Ki(t),this.Co(new Dr(t)))}p_(){this.Qo.p_()}Ttt(){this.Pf||this.v_(),this.p_()}v_(){this._tt.v_()}m_(){this.Qo.m_()}y_(){this.ga(void 0)}ge(){this.ZP=!0,this.Qo.ge()}be(){this.ZP=!1,this.Qo.be()}ka(){this._tt.ka()}d_(t){this._tt.d_(t)}Rf(t){this._tt.Rf(t)}wa(t){this.Dtt=t,t.Jq(this)}cs(){return this._tt.cs()}Wa(){return this.WP}A_(){return this._tt.A_()}Tf(){return this.Qo.Tf()}f7(){return this.Qo.f7()}Td(){return this._tt.Td()}Af(){return this._tt.Af()}qf(){return this._tt.qf()}i_(){return this._tt.i_()}D_(){this._tt.D_()}I_(){this._tt.I_()}tr(){this.WP=void 0,this.Bz=void 0,this.GB=void 0,this.Itt=!0,No(this.Stt),this.Ett.tr(),this.Ntt(this.Ett),this.Mq.qd(),D(this.Mq.Mx((async t=>{Bo(t),await this._tt.y_()})))}gn(){this.Co(new Oj),this.wtt.gn(),this.VP(),this.tr(),D(this.Mx((async()=>{await this._tt.gn(),this.Dtt&&(this.Dtt.ET(this),this.Dtt=void 0),this.Mq.gn()}))),this.Vo()}Ntt(t){if(this.Qo===t)return;const i=this.Qo.Ff,e=this.Qo.Tf(),s=this.Qo.Gf,n=this.Qo.Jf,r=this.Qo.e_;this.btt=i,this.a5=n,this.VP(),t.sf(this.Ltt),t===this._tt?(void 0!==this.Ic&&(this.Ic.fg=t.Oc,this.ktt.ntt(this.Ic)),(r||t.Tf()!==e)&&t.Nf(e),t.Gf!==s&&(t.Gf=s),i?t.m_():t.p_()):(void 0!==this.Ic&&(this.Ic.fg=this.ktt,this.ktt.tr()),this.wd.retainPlaybackRateOnSourceChange?t.Gf=s:1!==s&&this.Co(new ls(this.Tf(),1))),t.cf(this.Ltt),this.Qo=t,this.GP();for(const t of this.Stt)this.Co(t);No(this.Stt),this.ZP?t.ge():t.be()}GP(){this.Qo.sf(this.S_)}VP(){this.Qo.cf(this.S_)}fa(){return function(t){let i,e;const s=i=>{e=i;const s=ca(i,t.wd);t.ga(s)};let n={get abr(){return t.e7.va},get ads(){var i;return null==(i=t.Oc)?void 0:i.va},get analytics(){return t.m7.va},get audioTracks(){return t.ht.va},get autoplay(){return t.DT},set autoplay(i){t.DT=Boolean(i)},get buffered(){return t.Af()},get canvas(){return t.A7.va},get cast(){var i;return null==(i=t.fQ)?void 0:i.va},get clip(){return t.d7.va},get currentProgramDateTime(){var i;return null!=(i=t.vf)?i:null},set currentProgramDateTime(i){t.vf=null!=i?i:void 0},get currentTime(){return t.Tf()},set currentTime(i){t.Nf(Number(i))},get duration(){return t.Td()},get element(){return t.we},get ended(){return t.If},get error(){return t.Ef()},get errorObject(){return t.Lf()},get loop(){return t.rH.rH},set loop(i){t.rH.rH=Boolean(i)},get metrics(){return t.jf.va},get muted(){return t.Pf},set muted(i){t.Rf(i)},get network(){return t.kU.va},get paused(){return t.Ff},get playbackRate(){return t.Gf},set playbackRate(i){const e=Number(i);if(e<0)throw new RangeError("playbackRate must be a positive number");t.Gf=e},get played(){return t.qf()},get poster(){return t.mi},set poster(i){t.mi=gi(i)},get preload(){return t.Xf},set preload(i){t.Xf=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(i)},get presentation(){return t.w7.va},get readyState(){return t.Jf},get seekable(){return t.i_()},get seeking(){return t.e_},get source(){return e},set source(t){s(t)},get src(){return mD(t.Wa())},set src(t){s({sources:t})},get textTracks(){return t.nt.va},get textTrackStyle(){return t.Ol.va},get theoLive(){return t.S7},get uid(){return t.Mg},get videoHeight(){return t.r_},get videoTracks(){return t.rt.va},get videoWidth(){return t.a_},get visibility(){return t.Bo.va},get volume(){return t.c_},set volume(i){t.d_(Number(i))},get latency(){return t.f_.va},destroy(){t.gn(),t=null,e=void 0},play(){t.Ttt()},pause(){t.m_()},stop(){e=void 0,t.y_()},prepareWithUserAction(){t.v_()},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)},setSource(t){s(t)}};return i=new Io(n,!0),i.Qa(t),i.yn("destroy",(()=>{i.gn()})),n}(this)}constructor(i,e){super(),this.btt=!0,this.a5=ae.aT,this.Itt=!1,this.WP=void 0,this.Bz=void 0,this.GB=void 0,this.mtt=t=>{t.type!==l.ww&&this.Stt.push(t)},this.Ltt=t=>{(t.type!==l.jh||this.Qo.Ff)&&(t.type===l.Sh&&this.Qo.Ff||t.type===l.yw&&this.Qo.e_&&this.Qo.Tf()===t.currentTime||t.type===l.ww&&this.Qo.Gf===t.playbackRate||this.Co(t))},this.S_=t=>{if(this.Itt){if(t.type===he.Bw)return;t.type!==he.Ow&&t.type!==he.Rw||(this.Itt=!1)}if(t.type===l.jh){if(!this.btt)return;this.btt=!1}else if(t.type===l.Sh){if(this.btt)return;this.btt=!0}else if(t.type===he.H_){if(this.a5===t.readyState)return;this.a5=t.readyState}else if(t.type===l.qg)return;this.Co(t)},this._tt=new t(i,e),this.Ett=new Hj,this.Qo=this._tt,this.wtt=new Kj(this),this._tt.Oc&&(this.Ic=new Uh(this),this.Ic.fg=this._tt.Oc,this.ktt=new Sh),this.Mq=new _r,this.Stt=[],this.ZP=!0,this.GP()}}}var oz,az=class extends wn{constructor(t){super("tizen2retry"),this.originalErrorEvent=t}};function uz(){if(!oz){let t=zj;t=function(t){return class extends V{constructor(i,e){let s=new t(i,e);for(const t of Pj)if(Rj[t])for(const i of Rj[t])s=i(s);super(s)}}}(t);let i=hz(t);fi.DE&&fi.EE<3&&(i=function(t){return class extends t{ga(t){this.Ctt=0,super.ga(t)}Co(t){if(t.type===ut.ha&&this.Ctt<3)return this.Ctt++,super.Co(new az(t)),void super.ga(this.Wa());super.Co(t)}constructor(...t){super(...t),this.Ctt=0}}}(i)),i=function(t){let i=t;for(const t of Pj)if(Bj[t])for(const e of Bj[t])i=e(i);return i}(i),oz=i}return oz}function cz(t,i){const e=fw(i),s=new(uz())(t,e);s.ba=s;let n=s.va;return s.ka(),s.wa(Vj),w.defineProperty(n,"constructor",{value:cz}),n=Yd(n),Fj(s),n}Hu((()=>{self.dispatchEvent&&self.dispatchEvent(Gj("theoplayerready"))}));var lz={base64:new class{encode(t){return Zs(t)}decode(t){return it(t)}}},dz=JSON.parse('["dash","hls","chromecast","ads","airplay","yospace","spotx","vr","vr-webxr","conviva","cache","webaudio","youbora","mediamelon","moat","google-dai","streamone","lcevc","freewheel","agama","verizonmedia","mediatailor","ui","relatedcontent","social","upnext","contextmenu","texttrackstyle-ui","activequalitylabel","upcomingadnotification"]');function fz(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),w.defineProperty(t,s.key,s)}}function _z(t,i){var e=function(t,i){var e=t.length;if(e<=1)return t;for(var s=new Array(e),n=1;n<e;n*=2){gz(t,i,n,s);var r=t;t=s,s=r}return t}(t,i);return e!==t&&gz(e,null,t.length,t),t}function gz(t,i,e,s){var n,r,h,o,a,u=t.length,c=0,l=2*e;for(n=0;n<u;n+=l)for(h=(r=n+e)+e,r>u&&(r=u),h>u&&(h=u),o=n,a=r;;)if(o<r&&a<h)i(t[o],t[a])<=0?s[c++]=t[o++]:s[c++]=t[a++];else if(o<r)s[c++]=t[o++];else{if(!(a<h))break;s[c++]=t[a++]}}var wz=/[a-zA-Z]/,Az=/[0-9]/,vz=/[0-9a-fA-F]/,mz=/^0x/i,pz=/^[0-9]+$/,yz=/^[0-9a-fA-F]+$/,Mz=/^[0-7]+$/,Tz=w.prototype.toString,Nz=Array.isArray||function(t){return"[object Array]"===Tz.call(t)},Dz="undefined"!=typeof Symbol&&"symbol"==typeof Symbol.iterator;function Iz(t){return Nz(t)?t:Array.from(t)}function Sz(t,i,e){var s=t[i];t[i]=t[e],t[e]=s}function Ez(t){return t>=65&&t<=90}function bz(t){return Ez(t)||function(t){return t>=97&&t<=122}(t)}function Lz(t){return t>=48&&t<=57}function kz(t){return Lz(t)||bz(t)}function Cz(t){return Lz(t)||t>=65&&t<=70||t>=97&&t<=102}function xz(t){return Ez(t)?t+32:t}function Oz(t){return Lz(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function jz(t,i){return void 0===i&&(i=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(i?87:55):-1}var zz=_.min,Pz=String.fromCharCode,Bz=16384;function Rz(t){for(var i=t.length,e=[],s=0;s<i;s+=Bz){var n=zz(s+Bz,i);e.push(Pz.apply(null,t.slice(s,n)))}return e.join("")}var Uz=2147483647,Qz=/[^\0-\x7E]/,Fz=/[\x2E\u3002\uFF0E\uFF61]/g,Yz={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Gz=_.floor,Vz=String.fromCharCode;function Wz(t){throw new RangeError(Yz[t])}function Hz(t){for(var i=[],e=0,s=t.length;e<s;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){var r=t.charCodeAt(e++);56320==(64512&r)?i.push(((1023&n)<<10)+(1023&r)+65536):(i.push(n),e--)}else i.push(n)}return i}var qz,Xz,Oh,Zz=function(t,i){return t+22+75*(t<26)-((0!=i)<<5)},Kz=function(t,i,e){var s=0;for(t=e?Gz(t/700):t>>1,t+=Gz(t/i);t>455;s+=36)t=Gz(t/35);return Gz(s+36*t/(t+38))},Jz=function(t){return function(t,i){var e=t.split("@"),s="";e.length>1&&(s=e[0]+"@",t=e[1]);var n=function(t,i){for(var e=[],s=t.length;s--;)e[s]=i(t[s]);return e}((t=t.replace(Fz,".")).split("."),i).join(".");return s+n}(t,(function(t){return Qz.test(t)?"xn--"+function(t){for(var i=[],e=(t=Hz(t)).length,s=128,n=0,r=72,h=0,o=t;h<o.length;h++){var a=o[h];a<128&&i.push(Vz(a))}var u=i.length,c=u;for(u&&i.push("-");c<e;){for(var l=Uz,d=0,f=t;d<f.length;d++){var _=f[d];_>=s&&_<l&&(l=_)}var g=c+1;l-s>Gz((Uz-n)/g)&&Wz("overflow"),n+=(l-s)*g,s=l;for(var w=0,A=t;w<A.length;w++){var v=A[w];if(v<s&&++n>Uz&&Wz("overflow"),v==s){for(var m=n,p=36;;p+=36){var y=p<=r?1:p>=r+26?26:p-r;if(m<y)break;var M=m-y,T=36-y;i.push(Vz(Zz(y+M%T,0))),m=Gz(M/T)}i.push(Vz(Zz(m,0))),r=Kz(n,g,c==u),n=0,++c}}++n,++s}return i.join("")}(t):t}))};function bi(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s)}return Rz(i)}function $z(t){if(t>=55296&&t<=57343)throw new g("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function tP(t,i){return t>>i&63|128}function iP(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?($z(t),i.push(t>>12&15|224),i.push(tP(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(tP(t,12)),i.push(tP(t,6))),i.push(63&t|128)):i.push(t)}function eP(t){for(var i=[],e=0;e<t.length;e++){iP(t[e],i)}return i}function sP(){if(Oh>=Xz)throw new g("Invalid byte index");var t=255&qz[Oh];if(Oh++,128==(192&t))return 63&t;throw new g("Invalid continuation byte")}function nP(){var t,i;if(Oh>Xz)throw new g("Invalid byte index");if(Oh===Xz)return!1;if(t=255&qz[Oh],Oh++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|sP())>=128)return i;throw new g("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|sP()<<6|sP())>=2048)return $z(i),i;throw new g("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|sP()<<12|sP()<<6|sP())>=65536&&i<=1114111)return i;throw new g("Invalid UTF-8 detected")}function rP(t){return[37,jz(t>>4),jz(15&t)]}function hP(t){return function(t){return t>=0&&t<=31}(t)||t>126}function oP(t){return hP(t)||32===t||34===t||60===t||62===t||96===t}function aP(t){return oP(t)||35===t||63===t||123===t||125===t}function uP(t){return aP(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function cP(t){return t<33||t>126||34===t||35===t||60===t||62===t}function lP(t){return cP(t)||39===t}function dP(t,i){if(!i(t))return[t];for(var e=eP([t]),s=[],n=0;n<e.length;n++){var r=e[n];s.push.apply(s,rP(r))}return s}function fP(t,i){for(var e=[],s=0,n=Hz(t);s<n.length;s++){var r=n[s];e.push.apply(e,dP(r,i))}return bi(e)}function _P(t){return function(t){for(var i=[],e=t.length,s=0;s<e;s++){var n=t[s];if(37===n&&s+2<e&&Cz(t[s+1])&&Cz(t[s+2])){var r=Oz(t[s+1])<<4|Oz(t[s+2]);i.push(r),s+=2}else i.push(n)}return i}(eP(t))}function gP(t){return bi(function(t){qz=t.slice(),Xz=qz.length,Oh=0;for(var i,e=[];!1!==(i=nP());)e.push(i);return e}(_P(Hz(t))))}function wP(t){var i=t.length,e=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<i&&":"===t[r]){if(!(r+1<i&&":"===t[r+1]))throw new b;r+=2,n=s+=1}for(;r<i;){if(8===s)throw new b("Too many groups");if(":"!==t[r]){for(var h=0,o=0;o<4&&r<i&&vz.test(t[r]);)h=h<<4|x(t[r],16),r+=1,o+=1;if("."===t[r]){if(0===o)throw new b;if(r-=o,s>6)throw new b;for(var a=0;r<i;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new b;r+=1}if(!Az.test(t[r]))throw new b;for(;r<i&&Az.test(t[r]);){var c=x(t[r],10);if(null===u)u=c;else{if(0===u)throw new b;if((u=10*u+c)>255)throw new b}r+=1}e[s]=e[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new b;break}if(":"===t[r]){if((r+=1)===i)throw new b}else if(r<i)throw new b;e[s]=h,s+=1}else{if(null!==n)throw new b("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var l=s-n;for(s=7;0!==s&&l>0;)Sz(e,s,n+l-1),s-=1,l-=1}else if(8!==s)throw new b;return e}function AP(t){var i=10,e=pz;return mz.test(t)?(t=t.slice(2),i=16,e=yz):t.length>=2&&"0"===t[0]&&(t=t.slice(1),i=8,e=Mz),""===t?0:e.test(t)?x(t,i):void 0}var Fh={X0:4},vP=/[\0\t\n\r #%/:?@\[\\\]]/,mP=/[\0\t\n\r #/:?@\[\\\]]/;function pP(t,i){if("["===t[0]){if("]"!==t[t.length-1])throw new b("Invalid IPv6 address");return{X0:2,xtt:wP(t.slice(1,-1))}}if(!i)return function(t){if(mP.test(t))throw new b("Invalid code point in opaque host");var i=fP(t,hP);return""===i?Fh:{X0:3,qL:i}}(t);var e=function(t){var i=function(t){return Jz(t.toLowerCase())}(t);return i}(gP(t));if(vP.test(e))throw new b("Invalid code point in host");var s=function(t){var i=t.split(".");if(""===i[i.length-1]&&i.pop(),!(i.length>4)){for(var e=[],s=0;s<i.length;s++){var n=i[s];if(""===n)return;var r=AP(n);if(void 0===r)return;e.push(r)}for(var h=0;h<e.length-1;h++)if(e[h]>255)throw new b;if(e[e.length-1]>=_.pow(256,5-e.length))throw new b;for(var o=e.pop(),a=0;a<e.length;a++)o+=e[a]*_.pow(256,3-a);return o}}(e);return void 0!==s?{X0:1,xtt:s}:""===e?Fh:{X0:0,Ott:e}}function yP(t){switch(t.X0){case 0:return t.Ott;case 1:return function(t){for(var i=[],e=t,s=1;s<=4;s++)i.push(""+(255&e)),4!==s&&i.push("."),e>>>=8;return i.reverse().join("")}(t.xtt);case 2:return"["+function(t){for(var i="",e=function(t){for(var i=0,e=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>e&&(i=s,e=n),n=0);return n>e&&(i=s,e=n),e>1?i:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}e!==n?(i+=t[n].toString(16),7!==n&&(i+=":")):(i+=0===n?"::":":",s=!0)}return i}(t.xtt)+"]";case 3:return t.qL;case 4:return""}}var MP=/\+/g;function TP(t){return 42===t||45===t||46===t||95===t||kz(t)}function NP(t){for(var i=t.split("&"),e=[],s=0;s<i.length;s++){var n=i[s];if(""!==n){var r=n.indexOf("="),h=void 0,o=void 0;-1!==r?(h=n.slice(0,r),o=n.slice(r+1)):(h=n,o=""),h=h.replace(MP," "),o=o.replace(MP," ");var a=gP(h),u=gP(o);e.push([a,u])}}return e}function DP(t){for(var i="",e=0;e<t.length;e++){var s=t[e];e>0&&(i+="&"),i+=IP(eP(Hz(s[0])))+"="+IP(eP(Hz(s[1])))}return i}function IP(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];32===s?i.push(43):TP(s)?i.push(s):i.push.apply(i,rP(s))}return Rz(i)}var SP=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function uc(t){var i=""+t,e=SP.exec(i);return e?function(t,i){for(var e=t.length,s=[],n=i;n<e;n++){var r=t.charCodeAt(n);if(bP(r))if(LP(r)||n===e-1)s.push(EP);else{var h=t.charCodeAt(n+1);LP(h)?(s.push(r,h),n++):s.push(EP)}else s.push(r)}return t.slice(0,i)+Rz(s)}(i,e.index):i}var EP=65533,bP=function(t){return 55296==(63488&t)},LP=function(t){return 0!=(1024&t)};function kP(t,i){var e=t[0],s=i[0];return e===s?0:e<s?-1:1}function CP(t){t.jtt.length=0}function xP(t,i){!function(t,i){for(var e=0;e<i.length;e++)t[e]=i[e];t.length=i.length}(t.jtt,NP(i))}function OP(t){if(t.Ju){var i=DP(t.jtt);""===i&&(i=null),t.Ju.Ju.ztt=i}}var jP=function(){function t(t){if(void 0===t&&(t=void 0),this.Ju=null,null==t)this.jtt=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof jP&&!!Nz(t.jtt)&&(!Dz||t[Symbol.iterator]===zP)}(t))this.jtt=t.jtt.slice();else if(function(t){return null!=t&&(!!Nz(t)||!!Dz&&"function"==typeof t[Symbol.iterator])}(t)){this.jtt=[];for(var i=0,e=Iz(t);i<e.length;i++){var s=Iz(e[i]);if(2!==s.length)throw new b("Invalid name-value pair");this.jtt.push([uc(s[0]),uc(s[1])])}}else for(var n in this.jtt=[],t)w.prototype.hasOwnProperty.call(t,n)&&this.jtt.push([uc(n),uc(t[n])]);else(t=uc(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.jtt=NP(t)}var i=t.prototype;return i.append=function(t,i){t=uc(t),i=uc(i),this.jtt.push([t,i]),OP(this)},i.delete=function(t){t=uc(t);for(var i=this.jtt,e=0;e<i.length;){i[e][0]===t?i.splice(e,1):e++}OP(this)},i.get=function(t){t=uc(t);for(var i=this.jtt,e=0;e<i.length;e++){var s=i[e];if(s[0]===t)return s[1]}return null},i.getAll=function(t){t=uc(t);for(var i=this.jtt,e=[],s=0;s<i.length;s++){var n=i[s];n[0]===t&&e.push(n[1])}return e},i.has=function(t){t=uc(t);for(var i=this.jtt,e=0;e<i.length;e++){if(i[e][0]===t)return!0}return!1},i.set=function(t,i){t=uc(t),i=uc(i);for(var e=this.jtt,s=!1,n=0;n<e.length;){var r=e[n];r[0]===t?s?e.splice(n,1):(r[1]=i,s=!0,n++):n++}s||e.push([t,i]),OP(this)},i.sort=function(){_z(this.jtt,kP),OP(this)},i.toString=function(){return DP(this.jtt)},i.entries=function(){return new UP(this.jtt,PP)},i.keys=function(){return new UP(this.jtt,BP)},i.values=function(){return new UP(this.jtt,RP)},i.forEach=function(t){var i=this;this.jtt.forEach((function(e){return t(e[1],e[0],i)}))},t}(),zP=jP.prototype.entries;Dz&&(jP.prototype[Symbol.iterator]=zP);var PP=function(t){return[t[0],t[1]]},BP=function(t){return t[0]},RP=function(t){return t[1]},UP=function(){function t(t,i){this.Ptt=0,this.jtt=t,this.Btt=i}return t.prototype.next=function(){return this.Ptt<this.jtt.length?{done:!1,value:this.Btt(this.jtt[this.Ptt++])}:{done:!0,value:void 0}},t}(),QP="null";var En=w.create(null);En.ftp=21,En.file=0,En.gopher=70,En.http=80,En.https=443,En.ws=80,En.wss=443;var FP=/^(?:\.|%2e)$/i,YP=/^(?:\.|%2e){2}$/i;function GP(t){return FP.test(t)}function VP(t){return YP.test(t)}function WP(t){return void 0!==En[t]}function rl(t){return WP(t.Oj)}function HP(t){return""!==t.Rtt||""!==t.Utt}function qP(t){var i=t.length;if(!(i>=2))return!1;if(!ZP(t.slice(0,2)))return!1;if(2!==i){var e=t[2];if(47!==e&&92!==e&&63!==e&&35!==e)return!1}return!0}function XP(t){return 2===t.length&&wz.test(t[0])&&(":"===t[1]||"|"===t[1])}function ZP(t){return 2===t.length&&XP(Rz(t))}function KP(t){return XP(t)&&":"===t[1]}function JP(t){var i=t.Qtt;0!==i.length&&("file"===t.Oj&&1===i.length&&KP(i[0])||i.pop())}function $P(t){return null===t.Ftt||Fh===t.Ftt||t.Ytt||"file"===t.Oj}var li=-1,tB=/\t|\n|\r/g,iB=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function eB(t,i,e,s){void 0===e&&(e=null),void 0===s&&(s=null),e||(e=new sB,t=t.replace(iB,""));var n=null!==s?s:0;i=i||null;for(var r=[],h=!1,o=!1,a=!1,u=Hz(t=t.replace(tB,"")),c=u.length,l=0;l<=c;){var d=l<c?u[l]:li;switch(n){case 0:if(!bz(d)){if(null===s){r.length=0,n=2;continue}throw new b("Invalid scheme")}r.push(xz(d)),n=1;break;case 1:if(kz(d)||43===d||45===d||46===d)r.push(xz(d));else{if(58!==d){if(null===s){r.length=0,n=2,l=0;continue}throw new b("Invalid scheme")}var f=bi(r);if(null!==s){if(WP(e.Oj)&&!WP(f))return;if(!WP(e.Oj)&&WP(f))return;if((HP(e)||null!==e.G8)&&"file"===f)return;if("file"===e.Oj&&(e.Ftt===Fh||null===e.Ftt))return}if(e.Oj=f,null!==s)return void(rl(e)&&e.G8===En[e.Oj]&&(e.G8=null));r.length=0,"file"===e.Oj?n=13:rl(e)&&i&&i.Oj===e.Oj?n=3:rl(e)?n=7:47===u[l+1]?(n=4,l+=1):(e.Ytt=!0,e.Qtt.push(""),n=18)}break;case 2:if(!i||i.Ytt&&35!==d)throw new b("Invalid scheme");i.Ytt&&35===d?(e.Oj=i.Oj,e.Qtt=i.Qtt.slice(),e.ztt=i.ztt,e.Gtt="",e.Ytt=!0,n=20):"file"!==i.Oj?(n=5,l-=1):(n=13,l-=1);break;case 3:47===d&&47===u[l+1]?n=8:(n=5,l-=1);break;case 4:47===d?n=9:(n=17,l-=1);break;case 5:e.Oj=i.Oj,li===d?(e.Rtt=i.Rtt,e.Utt=i.Utt,e.Ftt=i.Ftt,e.G8=i.G8,e.Qtt=i.Qtt.slice(),e.ztt=i.ztt):47===d?n=6:63===d?(e.Rtt=i.Rtt,e.Utt=i.Utt,e.Ftt=i.Ftt,e.G8=i.G8,e.Qtt=i.Qtt.slice(),e.ztt="",n=19):35===d?(e.Rtt=i.Rtt,e.Utt=i.Utt,e.Ftt=i.Ftt,e.G8=i.G8,e.Qtt=i.Qtt.slice(),e.ztt=i.ztt,e.Gtt="",n=20):92===d&&rl(e)?n=6:(e.Rtt=i.Rtt,e.Utt=i.Utt,e.Ftt=i.Ftt,e.G8=i.G8,e.Qtt=i.Qtt.slice(),e.Qtt.pop(),n=17,l-=1);break;case 6:!rl(e)||47!==d&&92!==d?47===d?n=9:(e.Rtt=i.Rtt,e.Utt=i.Utt,e.Ftt=i.Ftt,e.G8=i.G8,n=17,l-=1):n=8;break;case 7:if(47!==d||47!==u[l+1]){n=8;continue}n=8,l+=1;break;case 8:47!==d&&92!==d&&(n=9,l-=1);break;case 9:if(64===d){h&&r.unshift(37,52,48),h=!0;for(var _=0;_<r.length;_++){var g=r[_];if(58!==g||a){var w=bi(dP(g,uP));a?e.Utt+=w:e.Rtt+=w}else a=!0}r.length=0}else if(li===d||47===d||63===d||35===d||rl(e)&&92===d){if(h&&0===r.length)throw new b("Invalid host");l-=r.length+1,r.length=0,n=10}else r.push(d);break;case 10:case 11:if(null!==s&&"file"===e.Oj)l-=1,n=15;else if(58!==d||o)if(li===d||47===d||63===d||35===d||rl(e)&&92===d){if(l-=1,rl(e)&&0===r.length)throw new b("Invalid host");if(null!==s&&0===r.length&&(HP(e)||null!==e.G8))return;var A=pP(bi(r),rl(e));if(e.Ftt=A,r.length=0,n=16,null!==s)return}else 91===d?o=!0:93===d&&(o=!1),r.push(d);else{if(0===r.length)throw new b("Invalid host");var v=pP(bi(r),rl(e));if(e.Ftt=v,r.length=0,n=12,11===s)return}break;case 12:if(Lz(d))r.push(d);else{if(!(li===d||47===d||63===d||35===d||rl(e)&&92===d||null!==s))throw new b("Invalid port");if(0!==r.length){var m=x(bi(r),10);if(m>65535)throw new b("Invalid port");e.G8=m===En[e.Oj]?null:m,r.length=0}if(null!==s)return;n=16,l-=1}break;case 13:e.Oj="file",47===d||92===d?n=14:i&&"file"===i.Oj?li===d?(e.Ftt=i.Ftt,e.Qtt=i.Qtt.slice(),e.ztt=i.ztt):63===d?(e.Ftt=i.Ftt,e.Qtt=i.Qtt.slice(),e.ztt="",n=19):35===d?(e.Ftt=i.Ftt,e.Qtt=i.Qtt.slice(),e.ztt=i.ztt,e.Gtt="",n=20):(qP(u.slice(l))||(e.Ftt=i.Ftt,e.Qtt=i.Qtt.slice(),JP(e)),n=17,l-=1):(n=17,l-=1);break;case 14:47===d||92===d?n=15:(i&&"file"===i.Oj&&!qP(u.slice(l))&&(KP(i.Qtt[0])?e.Qtt.push(i.Qtt[0]):e.Ftt=i.Ftt),n=17,l-=1);break;case 15:if(li===d||47===d||92===d||63===d||35===d)if(l-=1,null===s&&ZP(r))n=17;else if(0===r.length){if(e.Ftt=Fh,null!==s)return;n=16}else{var p=pP(bi(r),rl(e));if(0===p.X0&&"localhost"===p.Ott&&(p=Fh),e.Ftt=p,null!==s)return;r.length=0,n=16}else r.push(d);break;case 16:rl(e)?(n=17,47!==d&&92!==d&&(l-=1)):null===s&&63===d?(e.ztt="",n=19):null===s&&35===d?(e.Gtt="",n=20):li!==d&&(n=17,47!==d&&(l-=1));break;case 17:if(li===d||47===d||rl(e)&&92===d||null===s&&(63===d||35===d)){var y=bi(r);if(VP(y)?(JP(e),47===d||rl(e)&&92===d||e.Qtt.push("")):!GP(y)||47===d||rl(e)&&92===d?GP(y)||("file"===e.Oj&&0===e.Qtt.length&&ZP(r)&&(Fh!==e.Ftt&&null!==e.Ftt&&(e.Ftt=Fh),r[1]=58,y=bi(r)),e.Qtt.push(y)):e.Qtt.push(""),r.length=0,"file"===e.Oj&&(li===d||63===d||35===d))for(;e.Qtt.length>1&&""===e.Qtt[0];)e.Qtt.shift();63===d?(e.ztt="",n=19):35===d&&(e.Gtt="",n=20)}else r.push.apply(r,dP(d,aP));break;case 18:63===d?(e.ztt="",n=19):35===d?(e.Gtt="",n=20):li!==d&&(e.Qtt[0]+=bi(dP(d,hP)));break;case 19:null===s&&35===d?(e.Gtt="",n=20):li!==d&&(e.ztt+=bi(dP(d,rl(e)?lP:cP)));break;case 20:li===d||0===d||(e.Gtt+=bi(dP(d,oP)))}l++}return e}function Cr(t,i,e,s){try{eB(t,i,e,s)}catch(t){}}var sB=function(){this.Oj="",this.Rtt="",this.Utt="",this.Ftt=null,this.G8=null,this.Qtt=[],this.ztt=null,this.Gtt=null,this.Ytt=!1};function nB(t){switch(t.Oj){case"blob":var i;try{i=eB(t.Qtt[0],null)}catch(t){return QP}return nB(i);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,i,e){return t+"://"+yP(i)+(null===e?"":":"+e)}(t.Oj,t.Ftt,t.G8);default:return QP}}var rB=function(){function t(t,i){var e,s=null;if(null!=i)if(function(t){return null!=t&&t instanceof rB&&"object"==typeof t.Ju}(i))s=i.Ju;else try{s=eB(String(i),null)}catch(t){throw new b("Invalid base URL: "+t.message)}try{e=eB(String(t),s)}catch(t){throw new b("Invalid URL: "+t.message)}var n=e.ztt;this.Ju=e,this.ztt=function(t){var i=new jP;return null!==t&&xP(i,t),i}(n),this.ztt.Ju=this}var i=t.prototype;return i.toString=function(){return this.href},i.toJSON=function(){return this.href},function(t,i,e){i&&fz(t.prototype,i),e&&fz(t,e)}(t,[{key:"href",get:function(){return function(t,i){void 0===i&&(i=!1);var e=t.Oj+":";if(null!==t.Ftt?(e+="//",HP(t)&&(e+=t.Rtt,""!==t.Utt&&(e+=":"+t.Utt),e+="@"),e+=yP(t.Ftt),null!==t.G8&&(e+=":"+t.G8)):null===t.Ftt&&"file"===t.Oj&&(e+="//"),t.Ytt)e+=t.Qtt[0];else for(var s=0,n=t.Qtt;s<n.length;s++)e+="/"+n[s];return null!==t.ztt&&(e+="?"+t.ztt),i||null===t.Gtt||(e+="#"+t.Gtt),e}(this.Ju)},set:function(t){var i;try{i=eB(String(t),null)}catch(t){throw new b("Invalid URL: "+t.message)}this.Ju=i,CP(this.ztt);var e=this.Ju.ztt;null!==e&&xP(this.ztt,e)}},{key:"origin",get:function(){return nB(this.Ju)}},{key:"protocol",get:function(){return this.Ju.Oj+":"},set:function(t){Cr(t+":",null,this.Ju,0)}},{key:"username",get:function(){return this.Ju.Rtt},set:function(t){$P(this.Ju)||(this.Ju.Rtt=fP(t,uP))}},{key:"password",get:function(){return this.Ju.Utt},set:function(t){$P(this.Ju)||(this.Ju.Utt=fP(t,uP))}},{key:"host",get:function(){var t=this.Ju,i=t.Ftt;if(null===i)return"";var e=t.G8,s=yP(i);return null!==e&&(s+=":"+e),s},set:function(t){this.Ju.Ytt||Cr(t,null,this.Ju,10)}},{key:"hostname",get:function(){var t=this.Ju.Ftt;return null===t?"":yP(t)},set:function(t){this.Ju.Ytt||Cr(t,null,this.Ju,11)}},{key:"port",get:function(){var t=this.Ju.G8;return null===t?"":""+t},set:function(t){$P(this.Ju)||(""===t?this.Ju.G8=null:Cr(t,null,this.Ju,12))}},{key:"pathname",get:function(){var t=this.Ju.Qtt;return this.Ju.Ytt?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.Ju.Ytt||(this.Ju.Qtt.length=0,Cr(t,null,this.Ju,16))}},{key:"search",get:function(){var t=this.Ju.ztt;return null===t||""===t?"":"?"+t},set:function(t){t=uc(t);var i=this.Ju;if(""===t)return i.ztt=null,void CP(this.ztt);"?"===t[0]&&(t=t.slice(1)),i.ztt="",Cr(t,null,i,19),xP(this.ztt,t)}},{key:"searchParams",get:function(){return this.ztt}},{key:"hash",get:function(){var t=this.Ju.Gtt;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.Ju.Gtt="",Cr(t,null,this.Ju,20)):this.Ju.Gtt=null}}]),t}();function hB(t){return t.document&&t.document.baseURI||t.location.href||""}function oB(){let t=_s,i=t.location.href;for(;t!==s.top;){t=t.parent;try{i=t.location.href}catch(t){}}return i}var aB=!!("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||!(!Dl||!Dl.msMaxTouchPoints),uB=en(),cB=!(!uB||!uB.webkitShowPlaybackTargetPicker),lB=class{get Vtt(){return void 0===this.Wtt&&(this.Wtt=this.Htt()),this.Wtt}Htt(){return 0}get qtt(){return!fi.sb}get Xtt(){if(s.screen)return{width:s.screen.width,height:s.screen.height}}get A2(){return s.devicePixelRatio||1}get Ztt(){return cB}get J4(){return!1}get V4(){return!0}get _A(){return fi.WE||fi.Ga}get Ktt(){return!fi.Ga}get XO(){return!0}get wA(){return!0}get gA(){return!1}get Jtt(){}get $tt(){return!0}get ZJ(){return!1}get tit(){return fi.CE}iit(t,i){return!0}eit(t){return t>=2*Jc}constructor(){this.Wtt=void 0,this.sit=!1,this.Je=aB,this.Qs=!1,this.O9=!0}},dB=function(){const t=CM();if(!t)return!1;const i=t.muted;return t.muted=!i,t.muted!==i}(),fB=function(){if(fi.eE)return!1;const t=CM();if(!t)return!1;const i=t.volume;return t.volume=i/2+.1,i!==t.volume}();var z=class extends lB{Htt(){return this.nit?this.nit.Vtt:super.Htt()}get Jtt(){var t;return null==(t=this.nit)?void 0:t.Jtt}get $tt(){var t,i;return null==(i=null==(t=this.nit)?void 0:t.$tt)||i}iit(t,i){return this.nit?this.nit.iit(t,i):super.iit(t,i)}eit(t){return this.nit?this.nit.eit(t):super.eit(t)}constructor(t){super(),this.nit=t,this.nit&&(this.sit=this.nit.sit,this.Je=this.nit.Je,this.O9=dB&&this.nit.O9)}},_B=class extends z{get gA(){return fi.Ga}constructor(t){super(t),this.sit=!0,this.Qs=!0}},gB=class extends _B{get gA(){return!0}Htt(){return Wk(!0)?super.Htt():1}},wB=class extends z{get J4(){return fi.EE<3}get V4(){return fi.EE>=3}get Xtt(){return s.tizen&&!this.rit&&s.tizen.systeminfo.getPropertyValue("DISPLAY",(t=>{const i=t.resolutionWidth,e=t.resolutionHeight;1===i&&1===e||(this.rit={width:i,height:e})})),this.rit}get ZJ(){return fi.EE<3}iit(t,i){return super.iit(t,i)}},H=class extends lB{constructor(){super()}},AB=class extends H{get Jtt(){if(fi.US)return 4096}iit(t,i){if(t&&t.hit&&i&&i.hit){let e=W(t.hit,"mp4a.40.2")&&W(i.hit,"mp4a.40.5"),s=W(t.hit,"mp4a.40.5")&&W(i.hit,"mp4a.40.2"),n=W(t.hit,"mp4a.40.2")&&W(i.hit,"mp4a.40.34"),r=W(t.hit,"mp4a.40.34")&&W(i.hit,"mp4a.40.2"),h=W(t.hit,"mp4a.40.5")&&W(i.hit,"mp4a.40.34"),o=W(t.hit,"mp4a.40.34")&&W(i.hit,"mp4a.40.5");return!(e||s||n||r||h||o)}return!0}};function W(t,i){return t.indexOf(i)>-1}var vB=class extends H{eit(t){return t>=2}},mB=class extends H{constructor(){super(),this.sit=fi.qE>=11,this.O9=fi.WE&&!(fi.Ga&&fi.qE<10)}},pB=class extends z{get Xtt(){return s.webOS&&!this.rit&&s.webOS.deviceInfo((t=>{this.rit={width:t.screenWidth,height:t.screenHeight}})),this.rit}get XO(){return!1}},yB=class extends H{get $tt(){return!fi.FS||(fi.yE?92!==fi.TE:fi.vE>=100)}},MB=class extends z{get gA(){return!0}},TB=class{oit(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Ru(...i)}SA(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];cs(...i)}ait(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Ea(...i)}uit(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];CD(t,...e)}$d(t,i){return u(t,i)}x$(t,i){return v(t,i)}Jd(t){c(t)}j$(t){m(t)}GC(){return this.cit.GC()}zC(){return this.cit.zC()}RC(){return this.cit.RC()}BC(){return this.cit.BC()}OC(){return this.cit.OC()}QC(t,i){return this.cit.QC(t,i)}jC(t){return this.cit.jC(t)}get FO(){return this.dit}Dh(t,i){let e;return void 0===i&&(i=hB(_s)),e="object"!=typeof i||i instanceof rB?i:i.href,new rB(t,e)}IA(t,i){if(void 0===i&&(i=hB(_s)),this.fit){const e=Qs(i)?i:i.toString();return new self.URL(t,e).href}return this.Dh(t,i).href}get Ys(){return this._it}get vA(){return{AA:Dl&&Dl.userAgent.match(/Android /i)?"Android":"other",mA:Boolean(Dl&&Dl.userAgent.match(/Android 8.0.0/i))}}get OV(){return self&&self.location&&"https:"===self.location.protocol}get git(){return"languages"in Dl?Dl.languages.slice():[Dl.language]}constructor(){this.dit=new NB,this._it=function(){const t=function(){if(fi.FE)return new AB;if(fi.OE||fi.zE)return new vB;if(fi.WE)return new mB;if(fi.wE)return new yB;return new H}();return fi.Ga?new gB(t):fi.Qs?new _B(t):fi.DE?new wB(t):fi.LE?new pB(t):fi.US?new MB(t):new z(t)}(),this.fit=DB(),self.performance&&self.performance.now?this.Kd=()=>self.performance.now():this.Kd=Ks}},NB=class{get YO(){return Dl.oscpu}get Ys(){return Dl.platform}get GO(){return Dl.vendor}get VO(){return Dl.vendorSub}};function DB(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}var Sr=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(i,e)=>new t(i,e)}(t)}catch(t){}const i=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(i)return function(t){return(i,e)=>{const s=new t;if(i)for(const t of i)s.append(t);return s.getBlob(e&&e.type||"")}}(i)})();function IB(t,i,e){const s=Sr([i],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,i){let e=t;const s=e.indexOf("?");if(s>=0&&(e=e.substr(0,s)),e=e.substr(e.lastIndexOf("/")+1),i){let t=e.indexOf(".");t<0&&(t=e.length),e=e.substr(0,t)+i+e.substr(t)}return e}(t,e),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}var SB=class extends Ht{get name(){return ys.NI}constructor(t,i){super(t,function(t){return"Error while opening "+t+". Invalid URL."}(t.zu),i)}},EB=self.fetch,bB=self.Request,LB=self.Response,kB=self.Headers,CB=self.ReadableStream,xB=self.AbortSignal,OB=self.AbortController,jB=Zc((()=>{try{return sd(EB)&&ho(bB)&&ho(LB)&&ho(kB)&&"forEach"in kB.prototype&&DB()}catch(t){return!1}})),zB=["http:","https:"];var PB=Zc((()=>{try{return jB()&&ho(xB)&&ho(OB)&&"signal"in bB.prototype}catch(t){return!1}})),BB=Zc((()=>{try{return jB()&&ho(CB)&&"body"in LB.prototype&&!fi.uE}catch(t){return!1}}));function RB(t,i){const e=t.lS.has("content-length")?Number(t.lS.get("content-length")):void 0;let s;return s=t.wV?function(t,i,e){return t.pipeThrough(new qa(new UB(i,e)))}(t.dV(),i,e):async function(t,i,e){await Promise.resolve(),i(0,e);const s=await t,n=s.byteLength;return i(n,null!=e?e:n),s}(t.cj(),i,e),new _h({zm:s,SI:t.SI},t)}var UB=class{transform(t,i){this.wit+=t.byteLength,this.Ait(this.wit,this.vit),i.enqueue(t)}flush(t){var i;this.Ait(this.wit,null!=(i=this.vit)?i:this.wit)}constructor(t,i){this.Ait=t,this.vit=i,this.wit=0}};var QB=class{async mit(){const t=this.EI;let e,s;t.CI&&u((()=>{this.pit=!0,this.Tx.qd()}),t.CI);try{e=EB(t.zu,{method:t.dS,headers:t.lS.WI(),body:t.cS,credentials:t.AS?"include":"same-origin",signal:GB(this.Tx.Wd),mode:t.jg})}catch(i){throw new SB(t,i)}try{s=await e}catch(t){const i=this.yit(t);throw Ho(i)&&this.Tx.qd(),i}const n=s.url||t.zu,r=0===s.status&&"file:"===function(t){return i.Dh(t).protocol}(n)?200:s.status,h=new FB(this,s,this.Tx);let o=new _h({zm:h,SI:t,fS:t.fS,lS:VB(s.headers),kI:r,HO:s.statusText,IS:n});if(!mr(o))throw new Et(o);return t.vS&&(o=RB(o,t.vS)),o}yit(t){return Vu(t)?t:Ho(t)?this.pit?new Ev(this.EI):new pe(t.message,t):this.LI?new Et(this.LI,t):new SB(this.EI,t)}constructor(t){this.Tx=new na,this.LI=void 0,this.pit=!1,this.EI=t,this.Tx.Xd(t.Wd),this.bI=this.mit()}},FB=class t extends Tb{get _V(){return this.Mit.bodyUsed}get wV(){return Yt(this.Mit.body)}vV(){return this.mV.Zb}DS(t){return this.pV(this.Mit.text(),t)}cj(t){return this.pV(this.Mit.arrayBuffer(),t)}dV(){const t=this.Mit.body;return t?this.yV(t):Ab(this.cj().then(wb),this.Tx)}TV(){const i=this.Mit.clone(),[e,s]=this.Tx.Zd();return this.Tx=e,new t(this.Tit,i,s)}pV(t,i){i&&this.Tx.Xd(i);let e=Nr(Promise.resolve(t),this.Tx.Wd).catch((t=>{throw this.Tit.yit(t)}));return e=rn(e,this.Tx),this.mV.Xd(e.then(qt)),e}yV(t){return new P(new HB(t,(t=>this.Tit.yit(t)),this.Tx,this.mV),{highWaterMark:0})}constructor(t,i,e){super(),this.mV=new Rs,this.Tit=t,this.Mit=i,this.Tx=e,this.mV.Zb.catch(qt)}},YB="abort";function GB(t){if(!PB())return;const i=new OB;if(t.zd)i.abort();else if(!t.Bd){const e=()=>{s(),i.abort()},s=()=>{i.signal.removeEventListener(YB,e),t.Yd(e),t.Vd(s)};i.signal.addEventListener(YB,e),t.Fd(e),t.Gd(s)}return i.signal}function VB(t){if(function(t){return $l(t)&&"function"==typeof t.forEach}(t)){const i=new vo;return t.forEach(((t,e)=>{Array.isArray(t)&&2===t.length?i.append(t[0],t[1]):i.append(e,t)})),i}return new vo(t)}var WB,HB=class{start(t){this.uG=this.Nit.getReader()}async pull(t){let i;try{i=await Nr(this.uG.read(),this.Tx.Wd)}catch(i){const e=this.Dit(i);return this.mV.qb(e),this.Tx.qd(),this.uG.cancel(e).catch(qt),void t.error(e)}i.done?(this.mV.Wb(),this.Tx.qd(),t.close()):t.enqueue(i.value)}cancel(t){return this.Tx.qd(),this.mV.qb(t),this.uG.cancel(t)}constructor(t,i,e,s){this.Nit=t,this.Dit=i,this.Tx=e,this.mV=s}};!function(t){t[t.UNSENT=0]="UNSENT",t[t.OPENED=1]="OPENED",t[t.HEADERS_RECEIVED=2]="HEADERS_RECEIVED",t[t.LOADING=3]="LOADING",t[t.DONE=4]="DONE"}(WB||(WB={}));var qB=class{get bI(){return this.Iit.Zb}mit(){const t=this.Sit,i=this.EI;if(i.Wd.zd)return this.Eit();t.onreadystatechange=()=>this.Lit(),t.onprogress=t=>this.Ait(t),t.onload=()=>this.kit(),t.onloadend=()=>this.Cit(),t.onerror=()=>this.Zq(),t.ontimeout=()=>this.xit(),t.onabort=()=>this.Eit(),t.open(i.dS,i.zu,!0),t.withCredentials=Boolean(i.AS),"responseType"in t&&i.fS&&(i.fS===Qv.Ru?t.responseType="text":t.responseType="arraybuffer"),i.lS.forEach(((i,e)=>{t.setRequestHeader(e,i)})),i.CI&&(t.timeout=i.CI),this.Tx.Wd.Fd(this.Oit);const e=i.cS;e?t.send(e):t.send()}Lit(){const t=this.Sit;void 0!==t&&t.readyState>=2&&!this.jit&&(this.jit=!0,this.zit())}zit(){var t;const i=this.Sit,e=function(t){const i=new vo,e=t.replace(/\r?\n[\t ]+/g," ");return e.split(/\r?\n/).forEach((t=>{const e=t.split(":"),s=e.shift().trim();if(s){const t=e.join(":").trim();i.append(s,t)}})),i}(i.getAllResponseHeaders()||""),s=this.EI;var n;this.Pit=new Rs,this.LI=new _h({SI:s,fS:s.fS,zm:this.Pit.Zb,kI:i.status,HO:i.statusText,lS:e,IS:null!=(n=i.responseURL)?n:e.get("X-Request-URL")}),null==(t=this.Iit)||t.Wb(this.LI)}kit(){var t;const i=this.Sit;if(void 0===i)return;let e=i.response;if(!Yt(e)){const t=this.EI.fS;e=t===Qv.Ru?i.responseText:t===Qv.YI?new ArrayBuffer(0):{}}null==(t=this.Pit)||t.Wb(e)}Cit(){this.gn()}Ait(t){void 0!==this.Sit&&(null==this.EI.vS||this.EI.vS.call(this.EI,t.loaded,t.lengthComputable?t.total:void 0))}Zq(){const t=new g("Network request failed");this.LI?this.Ss(new Et(this.LI,t)):this.Ss(new SB(this.EI,t))}xit(){this.Ss(new Ev(this.EI))}Eit(){this.Ss(new pe),this.gn()}Ss(t){var i,e;null==(i=null!=(e=this.Pit)?e:this.Iit)||i.qb(t)}gn(){this.Sit=void 0,this.LI=void 0,this.Iit=void 0,this.Pit=void 0,this.Tx.Ud()}constructor(t){this.Tx=new na,this.LI=void 0,this.Iit=new Rs,this.jit=!1,this.Oit=()=>{var t;this.Eit(),null==(t=this.Sit)||t.abort()},this.EI=t,this.Tx.Xd(t.Wd),this.Sit=new El,this.mit()}};var XB=class{SI(t){return function(t){if(!jB()||!function(t){try{return zB.indexOf(new self.URL(t,self.location.href).protocol)>=0}catch(t){return!1}}(t.zu))return!1;if(!BB()&&t.vS)return!1;if(!t.mS){if(fi.LE&&fi.vE<=68)return!1;if(fi.DE)return!1}return!0}(t)?new QB(t).bI:new qB(t).bI}ZF(t){if(cm&&cm.sendBeacon)cm.sendBeacon(t.zu,Sr([t.cS],{type:t.qz}));else{const i=t.qz?{"Content-type":t.qz}:void 0;this.SI(new zu({dS:Ys.POST,zu:t.zu,cS:t.cS,lS:i,jg:Fv.EA})).then((t=>{D(t.cj())}),qt)}}gn(){}};var ZB=class extends hs{constructor(t){super("Invalid XML",t)}},KB=class{gI(t){const i=new DOMParser;let e;try{e=i.parseFromString(t,"text/xml")}catch(t){throw new ZB(t)}if(!e||e.getElementsByTagName("parsererror").length>0)throw new ZB;return new nR(e)}},JB=class t{get JD(){return HA.tI}get _I(){var t;return null!=(t=this.Bit.localName)?t:oR(this.Bit.nodeName)}get l(){return this.Bit.nodeName}get Rit(){var t;return null!=(t=this.Bit.namespaceURI)?t:void 0}get Uit(){var t;return null!=(t=this.Bit.prefix)?t:void 0}get jM(){return this.Bit.nodeValue}KD(t){return this.Bit.isEqualNode(t.Bit)}nI(i){return new t(this.Bit.cloneNode(i))}constructor(t){this.Bit=t}},$B=class{get mI(){return void 0===this.Qit&&(this.Qit=function(t){const i=[];for(let e=0;e<t.length;e++){const s=hR(t.item(e));s&&i.push(s)}return i}(this.Fit.childNodes)),this.Qit}get m(){return this.mI.filter(rR)}dI(t){return this.mI.filter((i=>rR(i)&&i.lj===t))}lI(t,i){return this.mI.filter((e=>rR(e)&&e._I===i&&e.Rit===t))}get VD(){return this.Fit}pI(t){this.Fit.appendChild(t.VD),this.Qit&&this.Qit.push(t)}KD(t){return this.Fit.isEqualNode(t.VD)}constructor(t){this.Qit=void 0,this.Fit=t}},tR=class t extends $B{get JD(){return HA.$D}get _I(){var t;return null!=(t=this.Fit.localName)?t:oR(this.Fit.nodeName)}get Rit(){var t;return null!=(t=this.Fit.namespaceURI)?t:void 0}get Uit(){var t;return null!=(t=this.Fit.prefix)?t:void 0}get lj(){return this.Fit.nodeName}get fI(){return function(t){const i=[];for(let e=0;e<t.length;e++)i.push(new JB(t.item(e)));return i}(this.Fit.attributes)}get sj(){return this.Fit.textContent}vI(t){if(this.Fit.hasAttribute(t))return this.Fit.getAttribute(t)}AI(t,i){if(this.Fit.hasAttributeNS(t,i))return this.Fit.getAttributeNS(t,i)}aI(t){this.Fit.removeAttribute(t)}Yit(t,i){this.Fit.removeAttributeNS(t,i)}Git(t,i){this.Fit.setAttribute(t,i)}Vit(t,i,e){this.Fit.setAttributeNS(t,i,e)}nI(i){return new t(this.Fit.cloneNode(i))}constructor(t){super(t)}},iR=class{get zm(){return this.Fit.nodeValue}get VD(){return this.Fit}KD(t){return this.zm===t.zm}constructor(t){this.Fit=t}},eR=class t extends iR{get JD(){return HA.Ru}nI(i){return new t(this.Fit.cloneNode(i))}constructor(t){super(t)}},sR=class t extends iR{get JD(){return HA.iI}nI(i){return new t(this.Fit.cloneNode(i))}constructor(t){super(t)}},nR=class t extends $B{get JD(){return HA.eI}get wI(){return new tR(this.Fit.documentElement)}nI(i){return new t(this.Fit.cloneNode(i))}constructor(t){super(t)}};function rR(t){return as(t)}function hR(t){switch(t.nodeType){case HA.$D:return new tR(t);case HA.Ru:return new eR(t);case HA.iI:return new sR(t)}}function oR(t){const i=t.indexOf(":");return i<0?t:t.substr(i+1)}!function(t){i=t}(new class extends TB{get cit(){return this.Wit||(this.Wit=new Vy(zM())),this.Wit}get Hit(){return this.qit}get I$(){return this.Xit}get Y$(){return this.Zit}get Kit(){return!1}get qj(){return ki.hQ()}get Jit(){return{$it:IB}}get tet(){return Dl.connection&&Dl.connection.effectiveType||aN}get iet(){return Dl.connection&&Dl.connection.type||"unknown"}get _O(){return this.eet||(this.eet=new zb(new XB)),this.eet}gI(t){return this.net.gI(t)}constructor(...t){super(...t),this.Wit=void 0,this.qit=BB(),this.Xit=fi.ob||fi.uE,this.Zit=(fi.ob||fi.LE&&fi.vE<=68||fi.uE)&&!(fi.DE&&fi.EE<3),this.eet=void 0,this.net=new KB}});var aR=class{get Mf(){const t=this.Qo.currentTime;return isFinite(t)?t:"now"}get ret(){return this.Qo.src||""}tr(){}constructor(t,i){this.het=!1,this.oet=!1,this.aet=t=>{this.uet.UF(t.error,this.Mf)},this.cet=()=>{this.uet.zF(this.ret),this.Qo.removeEventListener("playing",this.cet),this.het=!1},this.js=()=>{var t,i;this.het||(this.Qo.addEventListener("playing",this.cet),this.het=!0);var e;if((null==(i=this.Qo.source)||null==(t=i.ads)?void 0:t.some((t=>"theoads"===t.integration)))&&!this.oet)this.oet=!0,null==(e=this.Qo.ads)||e.addEventListener("adbreakbegin",this.let);else if(this.oet){var s;this.oet=!1,null==(s=this.Qo.ads)||s.removeEventListener("adbreakbegin",this.let)}},this.let=t=>{"theoads"===t.adBreak.integration&&this.uet.RF()},this.uet=i,this.Qo=t,this.Qo.addEventListener("error",this.aet),this.Qo.addEventListener("sourcechange",this.js),this.js()}};!function(t){Qj.push(t)}((function(t){new aR(t.va,t.p7)}));var uR="theoplayer-stored-volume",cR="theoplayer-stored-mutedstate";Rt((function(t){return class extends t{Rf(t){this.wd.persistVolume&&$t.Kj(cR,""+Boolean(t)),super.Rf(t)}d_(t){this.wd.persistVolume&&$t.Kj(uR,""+Number(t)),super.d_(t)}constructor(t,i){if(super(t,i),i.persistVolume){let t=$t.IH(uR);(void 0===t||S(t))&&(t=1);const i=$t.SH(cR)||!1;this.c_=t,this.Pf=i}}}}),sa.Za);var lR="7.12.0",dR="2024.3.5",fR=Vj.va,_R=va._v.registerContentProtectionIntegration.bind(va._v),gR={nY(t){_s.addEventListener("beforeunload",t)},tY(t){_s.removeEventListener("beforeunload",t)}};!function(t){om=t.det,am=t.fet,fs=t._et,_s=t.wet,um=_s&&_s.location,cm=_s&&_s.navigator}({det:class{get UB(){const t=[];for(const i of this.Aet){const e=this.vet.get(i);if(e){const i=e.map((t=>t.met));t.push(...i)}}return this.pet&&t.push(this.pet),t}FB(t){for(const i of this.UB)i.h5(t)}SP(t){const i=Po(this.vet.get(t),(t=>t.yet));if(i)return i.yet=!1,i.met}Met(t){if(!this.pet){var i;const t=null==(i=this.vet.get(Vt.pm))?void 0:i[0].met.Uz;if(!t)throw new g("Error creating iOS Safari MediaController");this.pet=new Aj(t,this.YC)}return this.pet}async cP(t){const i=t.Uz,e=i.tagName.toLowerCase();await t.tr(),yj(i);const s=Po(this.vet.get(e)||[],(i=>t===i.met));s&&(s.yet=!0)}jB(){for(const t of this.UB)t.r5()}gn(){for(const t of this.UB){const i=t.Uz;t.Ud(),pj(i),fh(i)}this.vet.clear(),this.pet=void 0}Tet(){for(const t of this.Aet){const i=[];this.vet.set(t,i);for(let e=0;e<this.Net;e++){const e=mj(t),s=t===Vt.ym?new qx(e,this.YC,this.Wu):new cj(e,this.YC,this.Wu,this.RB);i.push({met:s,yet:!0})}}}constructor(t,i,e=2,s=vj,n=zM()){this.Net=e,this.Aet=[...s],this.YC=n,this.Wu=t,this.RB=i,this.vet=Eo(),this.Tet()}},fet:class t{Mtt(t){return this.Det.Mx((()=>this.Iet(t)))}v_(){this.zB.jB()}async Iet(i){const e=this.zB.SP(Vt.pm),s=e.Uz,n=await t.Eet(s,i);return await this.zB.cP(e),n}static async Eet(i,e){return fi.LE||fi.DE?"all":(i.src||(i.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.bet(),!e&&await t.Let(i,!1)?"all":await t.Let(i,!0)?"muted":"none")}static async Let(t,i){t.muted=i;const e=t.play();try{if(!Ka(e))return!fi.Qs;const t=lt(250);return await Promise.race([e,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static bet(){return new Promise((t=>{if("function"==typeof MessageChannel){const i=new MessageChannel;i.port1.onmessage=()=>t(),i.port2.postMessage("")}else u(t,0)}))}gn(){this.Det.gn()}constructor(t){this.zB=t,this.Det=new _r}},_et:gR,wet:s});var wR=class t{async EP(i){if(!Xg(i.type))return!1;const e=i.contentProtection;if(e&&!Mg(e)){if(!Dg(e))return!1;if(!await t.ket(e))return!1}return!0}static async ket(t){return!(!t.playready||!await i.BC())||(!(!t.widevine||!await i.OC())||(!(!t.clearkey||!await i.zC())||!!await i.GC()))}},AR=class extends wR{async EP(t){return!!Wk(t.useManagedMediaSource)&&super.EP(t)}};function Ti(t){return oa(t)}function Bh(t,i){const e=oa(t);return i?""+e+i:""+e}var Pe,jt=class{async Cet(t){return(await this.Oet.xet(t.map(Ti))).shift()}jet(t,i){const e=Bh(t,i);return this.zet.Qb(e)}async Pet(t,i){var e;const s=Bh(t,i);return null==(e=await this.Bet.Fb(s))?void 0:e.data}CH(t){return this.Ret.Fb(t)}constructor(t,i,e,s){this.Oet=t,this.zet=i,this.Bet=e,this.Ret=s}},Hh=class{Uet(t){return Promise.resolve(!1)}Qet(t){return Promise.reject(vR)}Fet(t){return Promise.reject(vR)}Qb(t){return Promise.resolve(!1)}Fb(t){return Promise.resolve(void 0)}Yet(t,i){return Promise.resolve(void 0)}xet(t){return Promise.resolve([])}Get(){return Promise.resolve([])}Vet(t){return Promise.resolve([])}Wet(t,i){return Promise.resolve([])}ET(t){return Promise.reject(vR)}Het(t){return Promise.reject(vR)}qet(){return Promise.reject(vR)}},vR="Storage disabled",mR="Storage disabled",Gh=class{get Xet(){return this.Hd.Zb}async Uet(t){return(this.Zet||await this.Xet).Uet(t)}async Qet(t,i){return(this.Zet||await this.Xet).Qet(t,i)}async Fet(t,i){return(this.Zet||await this.Xet).Fet(t,i)}async Qb(t){return(this.Zet||await this.Xet).Qb(t)}async Fb(t){return(this.Zet||await this.Xet).Fb(t)}async Yet(t,i){return(this.Zet||await this.Xet).Yet(t,i)}async xet(t){return(this.Zet||await this.Xet).xet(t)}async Get(){return(this.Zet||await this.Xet).Get()}async Vet(t){return(this.Zet||await this.Xet).Vet(t)}async Wet(t,i){return(this.Zet||await this.Xet).Wet(t,i)}async ET(t){return(this.Zet||await this.Xet).ET(t)}async Het(t){return(this.Zet||await this.Xet).Het(t)}async qet(){return(this.Zet||await this.Xet).qet()}constructor(t){this.Hd=new Rs,this.Zet=void 0,this.Hd.Xd(t),this.Hd.Zb.then((t=>{this.Zet=t}))}},pR=class{get Ket(){return this.Hd.Zb}async Jet(t){const i=this.$et||await this.Ket;return await i.Jet(t)}constructor(t){this.Hd=new Rs,this.$et=void 0,this.Hd.Xd(t);const i=this.Hd.Zb;i.then((t=>{this.$et=t})),this.tst=new Gh(i.then((t=>t.tst))),this.ist=new Gh(i.then((t=>t.ist))),this.sst=new Gh(i.then((t=>t.sst))),this.nst=new Gh(i.then((t=>t.nst))),this.rst=new Gh(i.then((t=>t.rst)))}};function at(t){return new g("This storage cannot handle persistency type "+t)}!function(t){t.hst="readonly",t.ost="readwrite"}(Pe||(Pe={}));var Rn=class{Uet(t){return Promise.resolve("temporary"===t)}Qet(t,i){return void 0===i&&(i="temporary"),"temporary"!==i?Promise.reject(at(i)):(this.ast(t.key),this.bL.push(t),Promise.resolve())}Fet(t,i){if(void 0===i&&(i="temporary"),"temporary"!==i)return Promise.reject(at(i));for(const i of t)this.ast(i.key);for(const i of t)this.bL.push(i);return Promise.resolve()}Qb(t){return Promise.resolve(Boolean(this.ust(t)))}Fb(t){return Promise.resolve(this.ust(t))}Yet(t,i){return Promise.resolve(this.cst(t,i))}xet(t){const i=t?t.map((t=>this.ust(t))):this.bL;return Promise.resolve(i.filter(Yt))}Get(){return Promise.resolve([...this.bL])}Vet(t){return this.Wet(t,"key")}Wet(t,i){const e=this.bL.filter((e=>e[i]===t));return Promise.resolve(e)}ET(t){return this.ast(t),Promise.resolve()}Het(t){for(const i of t)this.ast(i);return Promise.resolve()}qet(){return No(this.bL),Promise.resolve()}ust(t){return this.cst(t,"key")}cst(t,i){for(const e of this.bL)if(e[i]===t)return e}ast(t){const i=this.ust(t);i&&To(this.bL,i)}constructor(){this.bL=[]}},yR=class t{static h9(){return Promise.resolve(new t)}Jet(t){return t(this)}constructor(){this.ist=new Rn,this.tst=new Rn,this.sst=new Rn,this.nst=new Rn,this.rst=new Rn}},zh=class{async Uet(t){for(let i of this.lst)if(await i.Uet(t))return!0;return!1}async Qet(t,i){void 0===i&&(i="persistent");for(let e of this.lst)if(await e.Uet(i))return e.Qet(t);throw at(i)}async Fet(t,i){void 0===i&&(i="persistent");for(let e of this.lst)if(await e.Uet(i))return e.Fet(t);throw at(i)}async Qb(t){for(let i of this.lst)if(await i.Qb(t))return!0;return!1}async Fb(t){for(let i of this.lst){const e=await i.Fb(t);if(e)return e}}async Yet(t,i){for(let e of this.lst){const s=await e.Yet(t,i);if(s)return s}}async xet(t){const i=[];for(let e of this.lst)i.push(...await e.xet(t));return i}async Get(){const t=[];for(let i of this.lst)t.push(...await i.Get());return t}async Vet(t){const i=[];for(let e of this.lst)i.push(...await e.Vet(t));return i}async Wet(t,i){const e=[];for(let s of this.lst)e.push(...await s.Wet(t,i));return e}async ET(t){for(let i of this.lst)await i.ET(t)}async Het(t){for(let i of this.lst)await i.Het(t)}async qet(){for(let t of this.lst)await t.qet()}constructor(t){this.lst=t}};function MR(t){return async()=>{const i=await Promise.all(t.map((t=>t())));return TR.h9(i)}}var TR=class t{static h9(i){return Promise.resolve(new t(i))}get nst(){return this.dst}get rst(){return this.fst}get sst(){return this._st}get ist(){return this.gst}get tst(){return this.wst}Jet(i){if(0===this.Ast.length)return i(this);const e=[];let s=0;const n=r=>(e.push(r),s++,s<this.Ast.length?this.Ast[s].Jet(n):i(new t(e)));return this.Ast[s].Jet(n)}constructor(t){this.Ast=t,this.dst=new zh(t.map((t=>t.nst))),this.fst=new zh(t.map((t=>t.rst))),this._st=new zh(t.map((t=>t.sst))),this.gst=new zh(t.map((t=>t.ist))),this.wst=new zh(t.map((t=>t.tst)))}},I=class t{static wa(i){t.pz.wa(i)}static get Ib(){return t.vst||(t.vst=t.pz.h9()),t.vst}};function NR(t){return void 0!==t.r_}function DR(t){const e=fi.LE||fi.DE,s=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some((t=>"ac-3"===t||"ec-3"===t)),n=e&&!s,r=new Vk(!0);return async t=>{const e=t.qz;if(!r.X$(e)&&!function(t,i){return!!t&&(vs(t)?Lv(i)||Cv(i):is(t,Qe.APPLICATION_TTML_XML)||is(t,Qe.TEXT_VTT)||is(t,Qe.IMAGE_JPEG))}(t.CF,t.mst))return!1;const s=t.mst.some((t=>"ac-3"===t||"ec-3"===t));if(n&&s)return!1;if(t.pst){const s=t.pst,n=rs(s,(t=>Am(t.yst))).filter(Yt),r=await async function(t,i){for(const e of t)if(await i(e))return!0;return!1}(n,(t=>i.QC(t,e)));if(!r)return!1}return!0}}I.pz=new class{h9(){return new pR(this.Mst())}async Mst(){this.Tst&&(await Promise.resolve(),this.Tst=!1);for(const t of this.Nst)try{return await MR([yR.h9,t])()}catch(t){}return await MR([yR.h9,this.Dst])()}wa(t){if(!this.Tst)throw new g("Registration overdue");this.Nst.push(t)}constructor(t){this.Nst=[],this.Tst=!0,this.Dst=t}}(class t{static h9(){return Promise.resolve(new t)}Jet(t){return Promise.reject(mR)}constructor(){this.ist=new Hh,this.tst=new Hh,this.sst=new Hh,this.nst=new Hh,this.rst=new Hh}}.h9),I.vst=void 0;var dh,IR=class{get Ti(){return this.Ist.offsetHeight*i.Ys.A2}get ji(){return this.Ist.offsetWidth*i.Ys.A2}constructor(t){this.Ist=t}},ao=class{get nt(){return this.Dl}yS(t,i,e,s,n,r,h,o){const a=new hn(t,i,e,s,n,r,h,void 0,o);return this.Dl.tt(a),this.o3.tt(a),a}bS(t){this.Dl.it(t),this.o3.it(t),t.gn()}tr(){for(const t of this.Dl.og.slice())t.gn();this.Dl.tr(),this.o3.tr()}gn(){this.tr(),this.Dl.gn(),this.o3.gn()}constructor(t,i){this.Dl=new _i,this.o3=new gx(t,i)}},vt=class{SP(t){return this.pz.SP(t)}Met(t){return this.pz.Met(t)}cP(t){return this.pz.cP(t)}constructor(t){this.pz=t}},SR=class extends xd{get Sst(){return this.sA}get wf(){return this.Af()}Af(){return this.sA.wf}get vf(){return this.mf()}mf(){return this.sA.vf}get Mf(){return this.Tf()}Tf(){return this.sA.Mf}get Iu(){return this.sA.Iu}get ct(){return this.Td()}Td(){return this.sA.ct}get Yz(){return this.Est()}Est(){return this.sA.Yz}get If(){return this.bst()}bst(){return this.sA.If}get lt(){return this.sA.lt}get Ti(){return this.sA.Ti}get ji(){return this.sA.ji}get ya(){return this.w_()}w_(){return this.sA.ya}get Pf(){return this.sA.Pf}set Pf(t){this.sA.Pf=t}get Ff(){return this.Lst()}Lst(){return this.sA.Ff}get Gf(){return this.sA.Gf}set Gf(t){this.sA.Gf=t}get Hf(){return this.qf()}qf(){return this.sA.Hf}get Jf(){return this.$f()}$f(){return this.sA.Jf}get t_(){return this.i_()}i_(){return this.sA.t_}get e_(){return this.s_()}s_(){return this.sA.e_}get m0(){return this.kst()}kst(){return this.sA.m0}get L0(){return this.Cst()}Cst(){return this.sA.L0}get nt(){return this.n_()}n_(){return this.xst}get Ol(){return this.I5()}I5(){return this.sA.Ol}get S2(){return this.sA.S2}get c_(){return this.sA.c_}set c_(t){this.sA.c_=t}get s5(){return this.sA.s5}get xf(){return this.sA.xf}get t2(){return this.sA.t2}get uP(){return this.Ost()}set uP(t){this.jst(t)}Ost(){return this.sA.uP}jst(t){this.sA.uP=t}get o5(){return this.sA.o5}set o5(t){this.zst(t)}zst(t){this.sA.o5=t}get Y4(){return this.Pst()}Pst(){return this.sA.Y4}zf(){return this.sA.zf()}p_(){return this.sA.p_()}m_(){this.sA.m_()}Sm(t,i,e){this.sA.Sm(t,i,e)}zz(t){this.sA.zz(t)}ge(){this.sA.ge()}be(){this.sA.be()}yS(t,i,e,s,n,r,h,o){return this.sA.yS(t,i,e,s,n,r,h,o)}iP(){return this.sA.iP()}sP(t,i,e,s,n){return this.sA.sP(t,i,e,s,n)}bS(t){this.sA.bS(t)}rP(){this.sA.rP()}jq(t){return this.sA.jq(t)}async $n(t){const i=await this.sA.$n(t);let e;return e=t.Rg===ai.Wx?this.Bst(i):this.Rst(i),this.Fz=e,e}async tr(){this.Fz&&(await this.Fz.Ud(),this.Fz=void 0),await this.sA.tr()}i5(){this.sA.i5()}e5(){this.sA.e5()}async Ud(){this.Vo(),this.sA.fn(LL,this.Ust),this.xst.fg=void 0,this.xst.gn(),this.Fz&&(await this.Fz.Ud(),this.Fz=void 0)}r5(){this.sA.r5()}Qst(t){this.sA.fn(LL,this.Ust),this.sA=t,this.xst.fg=t.nt,this.sA.yn(LL,this.Ust)}S_(t){this.Co(t)}constructor(t){super(),this.Fz=void 0,this.xst=new yc,this.Ust=t=>this.S_(t),this.sA=t,this.xst.fg=t.nt,this.sA.yn(LL,this.Ust)}},ER=class extends SR{get Uz(){return this.sA.Uz}get I0(){return this.sA.I0}get g_(){return this.sA.g_}set g_(t){this.sA.g_=t}h5(t){this.sA.h5(t)}a2(){this.sA.a2()}D_(){this.sA.D_()}constructor(t){super(t)}},bR=class{get wd(){return this.xC()}xC(){return this.Fz.wd}get t_(){return this.i_()}i_(){return this.Fz.t_}get rt(){return this.Fz.rt}gq(t){return this.Fz.gq(t)}Aq(t){return this.Fz.Aq(t)}Ud(){return Promise.resolve()}constructor(t){this.Fz=t}},Ct=class extends bR{get V$(){return this.Z$}get W$(){return this.K$}get wf(){return this.Af()}Af(){return this.Fz.wf}get ct(){return this.Td()}Td(){return this.Fz.ct}get Cq(){return this.Fst()}Fst(){return this.Fz.Cq}t0(t){this.Fz.t0(t)}n0(t,i,e,s){this.Fz.n0(t,i,e,s)}t$(){this.Fz.t$()}GJ(){this.Fz.GJ()}Ud(){return this.Z$&&(this.Z$.Ud(),this.Z$=void 0),this.K$&&(this.K$.Ud(),this.K$=void 0),super.Ud()}Yst(t){this.Fz=t,this.Z$?t.V$?this.Z$.Gst(t.V$):(this.Z$.Ud(),this.Z$=void 0):t.V$&&(this.Z$=this.Vst(t.V$),this.Z$.yn(kn,this.Wst)),this.K$?t.W$?this.K$.Gst(t.W$):(this.K$.Ud(),this.K$=void 0):t.W$&&(this.K$=this.Vst(t.W$),this.K$.yn(kn,this.Wst))}Hst(t){}constructor(t){super(t),this.Z$=void 0,this.K$=void 0,this.Wst=t=>this.Hst(t)}},LR=class extends xd{get EW(){return this.PW}set EW(t){this.PW=t}get wf(){return Ai.SB()}get wd(){return this.lx}get e$(){return Vt.rT}get n$(){return Ai.SB()}get qst(){return!1}get NW(){return this.OW}set NW(t){this.OW=t}_J(t,i,e){return Promise.reject(new g("Invalid media buffer"))}u$(){return Promise.reject(new g("Invalid media buffer"))}AJ(t,i,e){return Promise.reject(new g("Invalid media buffer"))}Cq(){return!1}t$(){}o$(t,i){}a$(t,i){}ET(t,i,e){return Promise.resolve()}kJ(t,i){return Promise.reject(new g("Invalid media buffer"))}zT(t,i){return Promise.reject(new g("Invalid media buffer"))}gq(t){return!1}Aq(t){return Promise.reject(new g("Invalid media buffer"))}Ud(){this.Vo()}constructor(t){super(),this.OW=0,this.PW=0,this.lx=t}},ct=class extends xd{get EW(){return this.Xst()}set EW(t){this.Zst(t)}Xst(){return this.Kst.EW}Zst(t){this.Kst.EW=t}get wf(){return this.Af()}Af(){return this.Kst.wf}get wd(){return this.xC()}xC(){return this.Kst.wd}get e$(){return this.Kst.e$}get n$(){return this.Jst()}Jst(){return this.Kst.n$}get NW(){return this.$st()}set NW(t){this.tnt(t)}$st(){return this.Kst.NW}tnt(t){this.Kst.NW=t}_J(t,i,e){return this.Kst._J(t,i,e)}u$(){return this.Kst.u$()}AJ(t,i,e){return this.Kst.AJ(t,i,e)}Cq(){return this.Kst.Cq()}t$(){this.Kst.t$()}o$(t,i){this.Kst.o$(t,i)}a$(t,i){this.Kst.a$(t,i)}ET(t,i,e){return this.Kst.ET(t,i,e)}kJ(t,i){return this.Kst.kJ(t,i)}gq(t){return this.Kst.gq(t)}Aq(t){return this.Kst.Aq(t)}S_(t){this.Co(t)}Ud(){this.Vo(),this.Gst(new LR(this.wd))}Gst(t){this.Kst.fn(kn,this.int),this.Kst=t,this.Kst.yn(kn,this.int)}constructor(t){super(),this.int=t=>this.S_(t),this.Kst=t,this.Kst.yn(kn,this.int)}},kR=class extends ct{get met(){return this.sA}set met(t){this.sA=t}async _J(t,i,e){return Bo(e),await this.ent(this.sA.Mf,null==i?void 0:i.n9,null==i?void 0:i.ct),Bo(e),t.Rg===ji.VI?await this.snt(t,i,e):await this.nnt(t,i,e)}async snt(t,i,e){let s=t;for(;;){const[t,n]=vb(s.zm);s={Rg:ji.VI,zm:t};try{return await this.rnt(s,i,e),void n.cancel(new pe).catch(qt)}catch(t){if(Kb(t)){if(await this.ent(this.sA.Mf,i.n9,i.ct,e)){s={Rg:ji.VI,zm:n};continue}}throw n.cancel(t).catch(qt),t}}}async nnt(t,i,e){for(;;)try{return Bo(e),await this.rnt(t,i,e)}catch(t){if(Kb(t)){if(await this.ent(this.sA.Mf,i.n9,i.ct,e))continue}throw t}}async ent(t,i,e,s){const n=Zb(t,i,e,this.wf,this.NW,this.EW);for(const[t,i]of n)await this.hnt(t,i,s);return n.length>0}rnt(t,i,e){return super._J(t,i,e)}hnt(t,i,e){return super.ET(t,i,e)}constructor(t){super(t),this.sA=void 0}},CR=class extends Ct{get met(){return this.sA}set met(t){this.sA=t,this.Z$&&(this.Z$.met=t),this.K$&&(this.K$.met=t)}Vst(t){const i=new kR(t);return i.met=this.sA,i}constructor(t){super(t),this.sA=void 0,this.Yst(t)}},Jt=class extends bR{get Xf(){return this.Fz.Xf}set Xf(t){this.Fz.Xf=t}},gr=class extends SR{get Uz(){return this.sA.Uz}get I0(){return this.sA.I0}get a_(){return this.sA.a_}get r_(){return this.sA.r_}get g_(){return this.sA.g_}set g_(t){this.sA.g_=t}h5(t){this.sA.h5(t)}a2(){this.sA.a2()}D_(){this.sA.D_()}A_(){return this.sA.A_()}constructor(t){super(t)}},xR=class extends ER{get Sst(){return this.sA}Rst(t){const i=new CR(t);return i.met=this,i}Bst(t){return new Jt(t)}},OR=class extends gr{get Sst(){return this.sA}Rst(t){const i=new CR(t);return i.met=this,i}Bst(t){return new Jt(t)}},Zu=class extends vt{SP(t){return t===Vt.pm?new OR(super.SP(t)):t===Vt.ym?new xR(super.SP(t)):void 0}async cP(t){const i=t;await i.Ud(),await super.cP(i.Sst)}},jR=class{ont(){this.Qo.I_()}gn(){s.removeEventListener("pageshow",this.ant)}constructor(t){this.ant=t=>{t.persisted&&this.ont()},this.Qo=t,s.addEventListener("pageshow",this.ant)}},zR=class{unt(t,i,e){return Promise.resolve()}cnt(t,i,e,s){let n=[];if(s){const r={BD:i.GT,RD:i.VT,UD:e.lnt.UD};s.Rg===Kc.TTML?n=uv(t,s,r,e.CF):s.Rg===Kc.WEBVTT&&(n=vA(t,r).L)}return n}tr(){}};!function(t){t.qv="vttc",t.dnt="vsid",t.fnt="iden",t._nt="ctim",t.gnt="sttg",t.wnt="payl",t.Ant="vtte",t.vnt="vtta"}(dh||(dh={}));var PR=class t{static mnt(i){return Boolean(t.pnt[i])}static fp(i){const e=[],s=dt.Zm(new Dh(i,new L));for(const i of s)t.mnt(i.Rg)&&e.push(t.pnt[i.Rg](i.zm));return e}static ynt(i){const e=dt.Zm(i),s=bl(e,dh.dnt),n=bl(e,dh.fnt),r=bl(e,dh._nt),h=bl(e,dh.gnt),o=bl(e,dh.wnt);return{Rg:dh.qv,Mnt:s?t.Tnt(s):void 0,Nnt:n?t.Dnt(n):void 0,Int:r?t.Snt(r):void 0,Ent:h?t.bnt(h):void 0,Lnt:o?t.knt(o):void 0}}static Tnt(t){return{Rg:dh.dnt,Cnt:t.Qm()}}static Dnt(t){return{Rg:dh.fnt,Nnt:t.Wm()}}static Snt(t){return{Rg:dh._nt,xnt:t.Wm()}}static bnt(t){return{Rg:dh.gnt,Ont:t.Wm()}}static knt(t){return{Rg:dh.wnt,jnt:t.Wm()}}static znt(t){return{Rg:dh.Ant}}static Pnt(t){return{Rg:dh.vnt,Bnt:t.Wm()}}};PR.pnt={[dh.qv]:PR.ynt,[dh.Ant]:PR.znt,[dh.vnt]:PR.Pnt};var BR=class{unt(t,i,e){const s=new DataView(t.Rnt),n=Lr.fp(s),r=Po(n,(t=>t.Rg===Zt.Av));return r&&(this.Unt=r.Z[0].Pp.np.kp),Promise.resolve()}cnt(t,i,e){if(S(this.Unt))return[];const s=ha(t),n=Lr.fp(s),r=ml(n,Zt.Jv),h=ml(n,Zt.lm);if(!r||0===r.Z.length||!h)return[];const o=function(t,i,e){const s=t.Z[0],n=s.IM?s.IM.IM.toNumber()/e:i.GT,r=[];for(const t of s.DM)r.push(...t.CM);return{Qnt:n,CM:r}}(r,i,this.Unt),a=e.lnt.UD;return function(t,i,e,s){const n=PR.fp(ha(i.zm)),r=t.CM,h=t.Qnt+s,o=[];let a=0;for(let t=0;t<r.length;t++){const i=r[t],s=n[t];var u;const c=(null!=(u=i.ct)?u:0)/e;let l;s.Rg===dh.qv&&(l=RR(s,a,c,h)),l&&o.push(l),a+=c}return o}(o,h,this.Unt,a)}tr(){this.Unt=NaN}constructor(){this.Unt=NaN}};function RR(t,i,e,s){if(!t.Lnt)return void 0;const n=t.Int?function(t){return Dn(t.xnt,new L(0))}(t.Int):i,r=s+n,h=r+e,o=t.Lnt.jnt;return new Li(r,h,o,!1)}var M,Tc,UR=class t extends ci{get Fnt(){return this.Ynt}set Fnt(t){this.Ynt=t}get Rt(){for(const t of this.Z.og)if(t.jg!==Ha.Ch)return!0;return!1}async $n(t){await this.tr(),this.Gnt=t,this.Vnt(t)}Vnt(t){for(const i of t.Wnt){const t=this.Hnt(i);this.qnt(t,i),t.Jf=Ua.LOADED,this.tt(t)}}it(t){this.Xnt(t),super.it(t)}UI(t){const i=this.Znt(t);if(i&&this.Fnt!==i){this.Fnt=i;for(const t of this.Z.og)t!==i&&(t.jg=Ha.Ch)}}QI(t){const i=this.Znt(t);i&&this.Fnt===i&&(this.Fnt=void 0)}Znt(t){return Po(this.Z.og,(i=>t.Mg===i.Mg))}qnt(t,i){this.Knt.set(t.Mg,i)}Jnt(t){return this.Knt.get(t.Mg)}Xnt(t){this.Knt.delete(t.Mg)}$nt(){if(!this.Fnt)return;const i=this.Jnt(this.Fnt);return i?t.trt(i):void 0}static trt(t){return t.irt&&t.irt.length>0?t.irt[0]:void 0}constructor(...t){super(...t),this.Knt=si()}};function QR(t,i){const e=i.mB(((i,e)=>t.wB(i,e,!1,!1)));return t.cB(e)}function FR(t,i){const e=i.Sn(t.hB()).mB(((i,e)=>t.gr(e)));return t.cB(e)}!function(t){t[t.gR=0]="gR",t[t.ert=1]="ert",t[t.nrt=10]="nrt",t[t.rrt=11]="rrt",t[t.hrt=12]="hrt",t[t.ort=13]="ort",t[t.art=14]="art",t[t.urt=15]="urt",t[t.crt=20]="crt",t[t.lrt=21]="lrt",t[t.drt=22]="drt",t[t.frt=23]="frt",t[t._rt=24]="_rt",t[t.grt=30]="grt",t[t.wrt=31]="wrt",t[t.Art=32]="Art",t[t.vrt=33]="vrt",t[t.mrt=34]="mrt",t[t.prt=35]="prt",t[t.yrt=40]="yrt",t[t.Mrt=41]="Mrt",t[t.Trt=42]="Trt",t[t.Nrt=43]="Nrt",t[t.Drt=44]="Drt",t[t.Irt=50]="Irt",t[t.Srt=51]="Srt",t[t.Ert=60]="Ert",t[t.brt=61]="brt",t[t.Lrt=62]="Lrt",t[t.krt=63]="krt",t[t.Crt=70]="Crt",t[t.xrt=71]="xrt",t[t.Ort=72]="Ort",t[t.jrt=73]="jrt",t[t.zrt=74]="zrt",t[t.Prt=75]="Prt",t[t.Brt=76]="Brt",t[t.Rrt=77]="Rrt",t[t.Urt=90]="Urt",t[t.Qrt=91]="Qrt"}(M||(M={})),function(t){t.Frt="Yrt",t.Grt="Vrt"}(Tc||(Tc={}));var YR,qn=class extends hs{constructor(t,i,e){super("Wrt"),this.Cn=t,this.jn=i,this.Hrt=e}},GR=class extends wn{constructor(){super("qrt")}};!function(t){t.Xrt="Zrt",t.Krt="Jrt",t.$rt="tht",t.gR="iht"}(YR||(YR={}));var VR=[l.Tw,l.Dw,l.Mw,l.Yg],WR=class extends xd{get eht(){var t,i;return(null==(t=this.nht.sht)?void 0:t.Hrt)||(null==(i=this.nht.rht)?void 0:i.Hrt)}get hht(){return this.oht}set aht(t){this.nht.aht=t}get aht(){return this.nht.aht}get kI(){return this.uht}cht(t){this.uht!==t&&(this.uht=t,this.Co(new GR))}get dht(){return this.oht.Lt.dht}get lt(){return this.Bz}async Cn(t){if(!this.fht&&!this._ht)return;const i=this.lf("qrt");this.fht?(this.ght.qd(),this.ght=new na,this.wht(this.ght.Wd)):(this.Aht.Wb(void 0),this.Aht=new Rs),await i}get fht(){return"Zrt"===this.uht}get _ht(){return"Jrt"===this.uht}get vht(){return"tht"===this.uht}get mht(){return"iht"===this.uht}async y_(t){if(this.vht||this._ht)for(0,this.ght.qd();!this.fht&&!this.mht;)await this.lf("qrt")}async tr(t){this.mht?(this.Bz=void 0,this.cht("Zrt")):await this.y_(t),this.nht.tr(),this.oht.tr()}IP(t){this.Bz=t,this.cht("iht"),this.Co(new Dr(t))}pht(){this.o2.yn(l.Sw,this.od),this.o2.yn([l.yw,l.hw],this.We),this.nht.yn(VR,this.Ds),this.yht.yn(Tc.Frt,this.od)}Mht(){this.o2.fn(l.Sw,this.od),this.o2.fn([l.yw,l.hw],this.We),this.nht.fn(VR,this.Ds),this.yht.fn(Tc.Frt,this.od)}async Tht(t){this.Mht(),this.Nht.qd(),await this.y_(null!=t?t:M.Nrt),this.nht.tr()}async Dht(t){this.pht(),await this.Cn(null!=t?t:M.urt)}async gn(){this.Vo(),this.Mht(),this.Nht.qd(),await this.y_(M.Drt),this.nht.gn()}async wht(t){for(;;)try{Bo(t),this.cht("tht"),await this.nht.Iht(t),Bo(t),this.cht("Jrt"),await Nr(this.Aht.Zb,t)}catch(t){if(Ho(t))this.cht("Zrt");else{const i=t instanceof $i?t:new $i(Ui.MEDIA_LOAD_ERROR,t.message,t);this.IP(i)}break}}async Sht(t){Bo(t),await this.y_(M.Trt),this.nht.tr(),Bo(t),await this.Cn(M.ort)}constructor(t,e,s,n,r){super(),this.Eht=t,this.yht=e,this.oht=s,this.nht=n,this.o2=r,this.uht="Zrt",this.Bz=void 0,this.Aht=new Rs,this.Nht=new na,this.ght=new na,this.We=t=>{this.fht||this.mht||!i.Kit&&this.nht.bht(t.currentTime)||(this.Nht.qd(),this.Nht=new na,this.Sht(this.Nht.Wd).catch(Bc))},this.od=uo((()=>{if(this._ht){try{this.nht.Lht();if(this.nht.kht())return}catch(t){if(!(t instanceof qn))throw t}this.Cn(M.art)}}),250),this.pht()}},HR=class t{Cht(t,i){return this.xht(t,!1,i)}Oht(t,i){return this.xht(t,!0,i)}async xht(i,e,s){Bo(s.Wd);const n=await this.jht(i,e,s);return n.wV?t.zht(n):this.Pht(n)}Pht(t){return t}static zht(t){return t}jht(t,i,e){var s;const n=new zu({zu:t.zu,fS:Qv.YI,lS:t.Bht?{Range:"bytes="+t.Bht[0]+"-"+(null!=(s=t.Bht[1])?s:"")}:void 0,AS:t.AS,dS:Ys.GET,Rg:Ou.ZI,gS:i?jo.$I:jo.rT,wS:this.Rht,CI:e.Uht,_S:e._S,Wd:e.Wd,mS:e.mS});return this.NS.SI(n)}constructor(t,i){this.NS=t,this.Rht=i}},qR=class{Qht(t,i){const e=this.Fht**t,s=i*(1-e)+e*this.Z8;S(s)||(this.Z8=s,this.Yht+=t)}Ght(){const t=1-this.Fht**this.Yht;return this.Z8/t}constructor(t){this.Z8=0,this.Yht=0,this.Fht=_.exp(_.log(.5)/t)}},XR=class{Qht(t,i){const e=8e3*i/t,s=t/1e3;this.Vht+=i,this.Wht.Qht(s,e),this.Hht.Qht(s,e)}Ght(){return this.qht()?_.min(this.Wht.Ght(),this.Hht.Ght()):this.Xht}qht(){return this.Vht>=this.Zht}constructor(t=2,i=5,e=128e3){this.Vht=0,this.Xht=cN,this.Wht=new qR(t),this.Hht=new qR(i),this.Zht=e}},ZR=class{get Kht(){return this.Jht.Ght()}get qht(){return this.Jht.qht()}$ht(t){const i=t.tot,e=this.iot?t.eot-t.rot:t.eot-t.hot,s=t.oot;!s&&i<this.aot||(s?this.Jht.Qht(2*e,i):this.Jht.Qht(e,i))}constructor(t,i){this.iot=i,!i||t!==Vt.pm&&t!==Vt.ym?(this.aot=16e3,this.Jht=new XR):t===Vt.pm?(this.aot=5e3,this.Jht=new XR(.05,1,0)):(this.aot=0,this.Jht=new XR(.005,.1,0))}},KR=["Nw","Iw"],JR=class extends xd{async uot(t,i){let e;for(const s of this.cot)try{return await s.uot(t,i)}catch(t){Ao(t),e=t}throw e}async lot(t,i){let e;for(const s of this.cot)try{return await s.lot(t,i)}catch(t){Ao(t),e=t}throw e}gn(){for(const t of this.cot)t.fn(KR,this.Ds),t.gn()}constructor(t){super(),this.cot=t;for(const t of this.cot)t.yn(KR,this.Ds)}};var $R=class{transform(t,i){this.dL.write(t).catch(qt),i.enqueue(t)}flush(){this.dL.close().catch(qt)}constructor(t){this.dL=t}},Ga=class{fot(){return new tU(wb(this.Rnt),this._ot,this.got)}constructor(t,i,e){this.Rnt=t,this._ot=i,this.got=e}},tU=class t{get dV(){return this.wot}cj(t){return Ot(this.wot,t)}Em(){const[i,e]=vb(this.wot);return this.wot=i,new t(e,this._ot,this.got)}Aot(){const[i,e]=function(t){const i=new qa,e=i.writable.getWriter(),s=new qa(new $R(e));return t.pipeTo(s.writable).catch((t=>{e.abort(t).catch(qt)})),[s.readable,i.readable]}(this.wot);return this.wot=i,new t(e,this._ot,this.got)}vot(t){return this.cj(t).then((t=>new Ga(t,this._ot,this.got)))}constructor(t,i,e){this.wot=t,this._ot=i,this.got=e}},iU=class extends hs{constructor(t,i,e){super(i,e),this.mot=t}},eU="Cache lookup failed.",sU=class extends xd{async uot(t,i){Bo(i);const e=await this.pot.Pet(t.zu.zu,t.zu.Bht);if(Bo(i),!e)throw new iU(t,eU);const s=new Ga(e.buffer,e.byteLength,e.reference);return{mot:t.mot,yot:{Rg:ji.aq,zm:s},Hrt:t.Hrt,zu:t.zu}}async lot(t,i){Bo(i);const e=await this.pot.Pet(t.zu,t.Bht);if(Bo(i),!e)throw new iU(t,eU);const s=new Ga(e.buffer,e.byteLength,e.reference);return{Rg:ji.aq,zm:s}}gn(){this.Vo()}constructor(t){super(),this.pot=t}};function q(t){return ed(t.Mot)}function nU(t){return q(t)?t.Mot:t.Tot}var rU=class extends wn{constructor(t,i,e,s,n,r){super(t),this.Not=i,this.sQ=e,this.yM=s,this.Qp=n,this.wS=r}},hU=class extends rU{constructor(t,i,e,s,n){super(l.Tw,t,i,e,s,n)}},oU=class{constructor(t,i){this.Dot=t,this.Iot=i}},aU=class extends oU{get tot(){return this.Sot}start(){}transform(t,i){this.Sot+=t.byteLength,i.enqueue(t)}flush(){this.Eot(!1)}qd(){this.Eot(!0)}Eot(t){this.Dot(this.Iot,i.Kd(),this.tot,t)}constructor(...t){super(...t),this.Sot=0}},uU=class extends oU{get tot(){return this.Sot}start(){this.Iot=i.Kd()}transform(t,i){this.Sot+=t.byteLength,this.bot||this.Lot(t)&&this.Eot(!1),i.enqueue(t)}flush(){}qd(){this.Eot(!0)}Lot(t){const i=this.kot(t),e=this.Cot(i);return Boolean(Po(e,cU))}kot(t){return this.xot&&void 0!==this.Oot?(this.xot=m_([this.xot,t]),new Dh(ha(this.xot),new L(this.Oot))):(this.xot=t,new Dh(ha(t),new L))}Cot(t){const i=dt.Km(t.zm,t.Pm,!0);return i.Jm?(this.xot=void 0,this.Oot=void 0):this.Oot=t.Pm.Ku,i.m}Eot(t){this.bot||(this.Dot(this.Iot,i.Kd(),this.tot,t),this.bot=!0)}constructor(...t){super(...t),this.Sot=0,this.bot=!1}};function cU(t){return t.Rg===Zt.lm}var lU=class{jot(t){const e=t.DV?this.zot:i.Kd(),s=this.Pot(e),n=new qa(s),r=t.dV().pipeTo(n.writable).then((()=>({jf:{tot:s.tot}})),(t=>{throw s.qd(),t}));return this.Bot.Xd(r),n.readable}Rot(t){const e=t.DV?this.zot:i.Kd(),s=t.cj(),n=s.then((t=>{const s=i.Kd();return this.$ht(e,s,t.byteLength,!1),{jf:{tot:t.byteLength}}}),(t=>{const s=i.Kd();throw this.$ht(e,s,0,!0),t}));return this.Bot.Xd(n),s}get Uot(){return this.Bot.Zb}constructor(t){this.Qot=t,this.Bot=new Rs,this.$ht=(t,i,e,s)=>{const n={hot:this.zot,rot:t,eot:i,tot:e,oot:s};this.Qot.$ht(n),this.Qot.qht&&Yo.Ib.$j(this.Qot.Kht)},this.Bot.Zb.catch(qt),this.zot=i.Kd()}},dU=class extends lU{Pot(t){return new aU(this.$ht,t)}},fU=class extends lU{Pot(t){return new uU(this.$ht,t)}},_U=class extends rU{constructor(t,i,e,s,n,r,h){super(l.Dw,t,i,e,s,n),this.Fot=r,this.pT=h}},go=class extends hs{constructor(t,i,e){super("Error downloading segment "+nU(i),t),this.Yot=i.GT,this.Got=i.VT,this.Vot=e}},gU=class extends xd{Wot(){return this.iot?new fU(this.Qot):new dU(this.Qot)}async uot(t,i){Bo(i);const e=t.Hrt,s=t.zu,n=t.mot,r=nU(n),h=e.Hrt?e.Hrt.Mg:-1,o=function(t){const i=t.Hrt;let e;e=i===function(t){return t.irt.reduce(((t,i)=>t.wz<i.wz?t:i))}(i.Hot)?Ft(5*t.mot.ct):Ft(1.2*t.mot.ct);return ks(e,1e3,18e3)}(t);this.Co(new hU(s,e.wz,r,h,e.Rg));try{const t=this.Wot(),a=await this.qot.Cht(s,{mS:this.iot,Uht:o,Wd:i}),u=await this.Xot(a,a.wV,i,t);return D(this.Zot(t.Uot,e,s,r,h,a)),{yot:u,Hrt:e,mot:n,zu:s}}catch(t){throw Ao(t),new go(t,n,e)}}async lot(t,i){Bo(i);const e=await this.qot.Oht(t,{mS:false,Uht:1e4,Wd:i});return await this.Xot(e,false,i)}async Xot(t,i,e,s){if(i){const i=s?s.jot(t):t.dV();return{Rg:ji.VI,zm:new tU(i)}}{const i=s?await s.Rot(t):await t.cj(e);return{Rg:ji.aq,zm:new Ga(i)}}}async Zot(t,i,e,s,n,r){try{const h=await t;this.Co(new _U(e,i.wz,s,n,i.Rg,r.kI,h.jf.tot))}catch(t){}}gn(){this.Vo()}constructor(t,i,e){super(),this.qot=t,this.Qot=i,this.iot=e}};var wU=class{Kot(t,i,e,s,n){const r=new sU(n),h=this.Jot(t,e,s);return new JR([r,h])}Jot(t,i,e){return new gU(t,i,e)}},AU=.001,vU=class{get wf(){return this.$ot.wf}get iat(){return this.$ot.iat}get Rq(){return this.$ot.Rq}get eat(){if(this.y$.Jf<ae.Xn)return!1;if(this.$ot.jn<=this.sat&&this.$ot.nat())return!0;const t=this.$ot.jz;if(!t||0===t.U)return!1;const i=Ai.IB(this.o2.Mf,1/0);return t.Sn(i).dB(this.$ot.Rq).NB>=this.PB.jW}get sat(){const t=this.$ot.jz;let i;if(t&&t.U>0)i=t.jn(0);else{i=this.o2.Mf;const t=this.$ot.Rq,e=t.fB(i);e>=0&&(i=t.jn(e))}const e=this.$ot.t_.Cn(0);if(e>i){if(this.$ot.Cn<=i&&this.$ot.jn>=i&&e>i+AU)throw new qn(i,e);i=e}return i=this.$ot.rat.rB(i),i}constructor(t,i,e,s){this.$ot=t,this.o2=i,this.y$=e,this.PB=s}};var mU=class{get oat(){if(0===this.Ld.size)return Ai.SB();let t=Ai.IB(0,1/0);return this.Ld.forEach((i=>{t=t.Sn(i)})),t}aat(){let t=Ai.SB();return this.Ld.forEach((i=>{t=t.cB(i)})),t}uat(t){let i=!1;return this.Ld.forEach((e=>{i=i||e.gr(t)})),i}dat(t,i){const e=this.Ld.get(i.o);return!!e&&e.gr(t)}_B(t,i){let e=!1;return this.Ld.forEach((s=>{e=e||s._B(t,i)})),e}fat(t,i){const e=this.Ld.get(i.o).cB(t);this.Ld.set(i.o,e)}_at(t){this.Ld.forEach(((i,e)=>{const s=i.cB(t);this.Ld.set(e,s)}))}gat(t){this.Ld.forEach(((i,e)=>{this.Ld.set(e,i.Sn(t))}))}tr(){this.Ld.forEach(((t,i)=>{this.Ld.set(i,Ai.SB())}))}constructor(t){this.Ld=function(t){const i=Eo();for(const e of t)i.set(e.o,Ai.SB());return i}(t)}},pU=class{get wat(){return this.Aat}get Rq(){return this.Uq}vat(t){for(const i of this.tst){if(i.mat>t)break;if(i.pat>t)return i}}yat(t){for(const i of this.tst){if(i.Mat>t)break;if(i.Tat>=t)return i}}Nat(t,i){const e=[];for(const s of this.tst){if(s.mat>t)break;s.pat>=i&&e.push(s)}return e}Dat(){return this.tst}Iat(t,i){const e=Ai.IB(t.Mat,t.Tat),s=e.hB();this.Aat.gat(s),this.Aat.fat(e,i),this.Sat(s);const n=uu(this.tst,(i=>t.mat<=i.mat));if(n<0)this.tst.push(t);else{this.tst[n].pat<=t.pat?this.tst.splice(n,1,t):this.tst.splice(n,0,t)}}Qq(t,i){this.Uq.fat(t,i)}Eat(t){this.Uq._at(t)}gat(t){this.Aat.gat(t),this.Uq.gat(t);const i=this.Aat.aat();this.Sat(i)}Sat(t){this.tst=this.tst.filter((i=>t.wB(i.Mat,i.Tat))).map((i=>i.bat&&!t._B(i.Mat,i.Tat)?function(t,i){return{mat:t.mat,pat:t.pat,Mat:t.Mat,Tat:t.Tat,bat:i}}(i,!1):i))}tr(){this.Aat.tr(),this.Uq.tr(),this.tst=[]}gn(){this.tr()}constructor(t){this.tst=[],this.Lt=t,this.Aat=new mU(t.irt),this.Uq=new mU(t.irt)}},yU=class{get aht(){return this.Lat}set aht(t){this.Lat=t}get dht(){return this.oht.Lt.dht}async Cat(t,i,e){let s;Bo(e);const n=this.oht.yat(t);s=n&&ku(n.Tat,t,1e-5)?_.max(n.pat,t):t;const r=this.xat(s),h=function(t){return MU.bind(void 0,t)}(s);let o=await this.Btt.Oat(h,r,i,e);for(Bo(e);o&&this.jat(o.mot);){const t=IU(o.mot),s=o.Hrt;o=await this.Btt.Oat(t,[s],i,e),Bo(e)}if(!o)return void 0;if(!this.zat(o.mot))return o;const a=this.Pat(o.mot);if(t<a.Cn)return await this.findFirstNonAppendedSegmentBeforeSegment(o,i,e,a);if(t>=a.jn)return await this.findFirstNonAppendedSegmentAfterSegment(o,i,e);if(!o.Hrt.Bat(o.mot))throw new g("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,i,e){let s=t;do{const n=IU(s.mot),r=t.Hrt;s=await this.Btt.Oat(n,[r],i,e),Bo(e)}while(s&&this.zat(s.mot));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,i,e,s){let n=t;do{const s=DU(n.mot),r=t.Hrt;n=await this.Btt.Oat(s,[r],i,e),Bo(e)}while(n&&this.zat(n.mot));if(!n){0;const i=t.Hrt.Rat.Cn;throw new qn(i,s.Cn,t.Hrt)}return n}Uat(t){return this.oht.wat.uat(t)}Qat(t){return this.oht.Nat(t.GT,t.VT)}zat(t){const i=this.Qat(t);return i.length>0&&function(t,i){return function(t){let i=Ai.SB();for(const e of t)i=i.cB(Ai.IB(e.mat,e.pat));return i}(t)._B(i.GT,i.VT)}(i,t)&&i.every(SU)}jat(t){return this.oht.Rq._B(t.GT,t.VT)}Pat(t){const i=this.Qat(t);return{Cn:i[0].Mat,jn:i[i.length-1].Tat}}xat(t){const i=this.Fat(t);if(0===i.length){const t=this.Lat?this.Lat:this.oht.Lt.irt;return[t[t.length-1]]}const e=i.filter((t=>!t.Yat));return e.length>0?e:[i[i.length-1]]}Fat(t){return(this.Lat?this.Lat:this.oht.Lt.irt).filter((i=>!this.oht.Rq.dat(t,i)))}constructor(t,i,e){this.Eht=t,this.oht=i,this.Btt=e}};async function MU(t,i,e,s){const n=i.lnt.Gat(t);if(n){if(i.Vat(n)){return(await i.Hat(n,e,s)).Wat(t)}return n}}async function TU(t,i,e,s){if(q(t)){if(0===t.Mot)return;const n=i.lnt.qat(t);if(!n)return;return(await i.Hat(n,e,s)).Xat(t.Mot-1)}return i.lnt.Zat(t)}async function NU(t,i,e,s){if(q(t)){const n=i.lnt.qat(t);if(!n)return;const r=await i.Hat(n,e,s);if(t.Mot+1===r.U)return;return r.Xat(t.Mot+1)}return i.lnt.Kat(t)}function DU(t){return TU.bind(void 0,t)}function IU(t){return NU.bind(void 0,t)}function SU(t){return t.bat}var EU=class{async Oat(t,i,e,s){Bo(s);const n=this.Jat(i,e);if(!n)return;const r=await t(n,this.$at,s);if(!r)return;const h=n.tut(r);return{Hrt:n,mot:r,zu:h}}Jat(t,i){if(0===t.length)return;const e=this.eut.iut(t,this.sut?i:void 0,this.$ot,this.PB.kW);return this.sut||(this.sut=!0),e}constructor(t,i,e,s){this.eut=t,this.$ot=i,this.PB=e,this.$at=s,this.sut=!1}},bU=class{async Oat(t,i,e,s){Bo(s);const n=this.eut.nut(i,e,this.$ot);if(!n.length)return;let r;for(const i of n)try{Bo(s);const e=await t(i,this.$at,s);if(e){const t=i.tut(e);if(await this.pot.jet(t.zu,t.Bht))return{mot:e,Hrt:i,zu:t}}}catch(t){Ao(t),r=t}if(r)throw r}constructor(t,i,e,s){this.eut=t,this.$ot=i,this.pot=e,this.$at=s}};function LU(t){return void 0!==t.Gf}function kU(t,i){const e=t.ji&&i.ji,s=t.Ti&&i.Ti;if(e||s){if(e&&s)return t.ji*t.Ti-i.ji*i.Ti;if(e)return t.ji-i.ji;if(s)return t.Ti-i.Ti;return(t.ji||1)*(t.Ti||1)-(i.ji||1)*(i.Ti||1)}return 0}function CU(t,i){return kU(t,i)||function(t,i){return t.wz-i.wz}(t,i)}var xU=class t{iut(i,e,s,n){let r=t.sortByQuality(i);if(void 0!==this.rut&&void 0===e&&i.length>1){const i=t.hut(r,this.rut);i&&(r=i)}const h=this.nut(r,e,s,n);return h.length?h[h.length-1]:r[0]}nut(i,e,s,n){var r;const h=t.sortByQuality(i),o={Kht:void 0===n||this.out.qht?this.out.Kht:n,Gf:LU(s)&&s.Gf?s.Gf:1,aut:s.ji,uut:s.Ti,cut:null==(r=this.lut)?void 0:r.restrictToPlayerSize};let a=h;for(const t of this.fut)a=t(a,e,o,this._it,this._ut);return a}static gut(i){return t.sortByQuality(i)[0]}static wut(i,e){var s;return e?t.gut(null!=(s=t.hut(i,e))?s:i):t.gut(i)}static hut(t,i){for(const e of i){const i=t.filter((t=>Bt(t.hit,e)));if(i.length>0)return i}}static sortByQuality(t){const i=[...t];return i.sort(CU),i}constructor(t,i,e,s,n,r){this.fut=t,this.out=i,this._it=e,this.lut=s,this.rut=n,this._ut=r}},OU=(t,i,e,s,n)=>t.filter((t=>n.gq(t)&&s.iit(i,t))),jU=(t,i,e)=>t.filter((t=>function(t,i,e){const s=e.Kht;if(s<=0)return!1;return.8*s>t.wz*e.Gf}(t,0,e)));var zU=(t,i,e,s,n)=>{const r=e.cut;if(void 0===r&&!s.Qs)return t;if(!1===r)return t;if(t.length>0&&t[0].Rg!==Vt.pm)return t;for(let i=t.length-1;i>=0;i--){const s=t[i];if(s.Ti===e.uut&&s.ji===e.aut)return t.slice(0,i+1);if(s.Ti<e.uut||s.ji<e.aut)return t.slice(0,i+2)}return[]},PU=class{async Oat(t,i,e,s){let n;for(const r of this.Aut)try{const n=await r.Oat(t,i,e,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this.Aut=t}},BU=class{async vut(t,i,e,s){let n;for(const r of this.mut)try{return await r.vut(t,i,e,s)}catch(t){Ao(t),n=t}throw n}constructor(t){this.mut=t}},RU=class{async vut(t,i,e,s){var n;const r=await this.NS.SI({zu:t,fS:Qv.YI,lS:i?{Range:"bytes="+i[0]+"-"+(null!=(n=i[1])?n:"")}:void 0,AS:e,dS:Ys.GET,Rg:Ou.rT,Wd:s});return await r.cj()}constructor(t){this.NS=t}},UU=class{async vut(t,i,e,s){const n=await this.pot.Pet(t,i);if(n)return n.buffer;if(i){const e=await this.pot.Pet(t);if(e)return Ko(new j(e.buffer),i[0],i[1])}throw new iU({zu:t,Bht:i,AS:!1})}constructor(t){this.pot=t}};var QU=1.05,FU=(t,i,e,s)=>{if(!1===e.cut)return t;if(s.qtt)return t;const n=s.Xtt;var r;const h=(null!=(r=null==n?void 0:n.width)?r:e.aut)*QU;var o;const a=(null!=(o=null==n?void 0:n.height)?o:e.uut)*QU;for(let i=t.length-1;i>=0;i--){const e=t[i];if(e.Ti<=a&&e.ji<=h)return t.slice(0,i+1)}return[]},YU=class{static h9(t,e,s,n,r,h,o,a,u,c){const l=function(t,i){return new BU([new UU(i),new RU(t)])}(h,o),d=new xU([OU],r,i.Ys,a,u,c),f=new bU(d,e,o,l),_=new xU([jU,OU,zU,FU],r,i.Ys,a,u,c),g=new EU(_,e,n,l),w=new PU([f,g]);return new yU(t,s,w)}},GU=class{yut(t,i,e,s){return this.$ot.yut(t,i,e,s)}Mut(t,i,e){return this.$ot.unt(t,i,e)}Tut(t,i,e){return this.$ot.Tut(t,i,e)}Qq(t,i){this.$ot.Qq(t,i)}Fq(t,i){this.$ot.Fq(t,i)}t$(){this.$ot.t$()}UW(){return this.$ot.UW()}constructor(t){this.$ot=t}},VU=class extends wn{constructor(t,i,e,s,n,r=0){super(l.Mw),this.segmentStartTime=t,this.error=i,this.trackType=e,this.track=s,this.quality=n,this.retryCount=r}},WU=class extends wn{constructor(t,i){super(l.Yg),this.track=t,this.segments=i}},HU=class extends hs{constructor(t,i){super(i),this.Nut=t}},qU=[l.Tw,l.Dw],XU=class extends xd{get sht(){return this.Dut}get rht(){return this.Iut}set aht(t){this.Sut.aht=t}get aht(){return this.Sut.aht}get dht(){return this.oht.Lt.dht}Eut(t){return!this.TJ||!t||!wa(this.TJ.Rnt,t.Rnt)}bht(t){if(!this.Dut)return!1;const i=this.Dut.mot,e=Ai.IB(i.GT,i.VT),s=this.but.iat,n=s.fB(t);return n<0?e.gr(t,AU):e.wB(t,s.jn(n),!0,!0,AU)}async Iht(t){const i=this.oht.Lt.irt;for(;;)try{Bo(t),this.Lht();if(this.kht())break;const e=this.Lut(),s=await this.Oat(e,t);if(void 0===s)break;if(this.Dut=s,!ZU(this.Dut)){await this.kut(this.Dut,t);continue}this.Iut&&!Bt(this.Iut.Hrt.qz,this.Dut.Hrt.qz)&&await this._ut.Aq(this.Dut.Hrt),await this.Cut(e,this.Dut.mot,t),this.TJ=await this.xut(this.Dut.Hrt,t);const n=await this.uot(this.Dut,t),r=this.but.wf,h=this.Iut;this.Iut=await this.Out(n,t);const o=this.but.wf;this.jut(h,this.Dut,r,o),i.forEach((t=>t.Yat=!1)),this.zut=0,this.Put=0}catch(e){if(e instanceof qn){this.o$(e.Cn,e.jn,e.Hrt);continue}if(e instanceof HU){let s=500;if(i.every((t=>t.Yat))){if(2===this.zut){const t=this.but.wf;if(this.But(this.Dut),this.jut(this.Iut,this.Dut,t,t),i.forEach((t=>t.Yat=!1)),this.Put+=1,this.zut=0,this.Put===this.Rut.maxRetries)throw new $i(Ui.MEDIA_LOAD_ERROR,"The segments could not be loaded.",e);continue}this.zut++;const t=this.Rut.minimumBackoff*2**(this.zut-1);s=_.min(t,this.Rut.maximumBackoff)}await lt(s,t);continue}throw this.Uut=Ai.SB(),e}finally{this.Dut=void 0}}jut(t,i,e,s){const n=s.dB(e),r=i.Hrt.Qut(i.mot),h=i.Hrt.Bat(i.mot);let o=i.mot.GT,a=i.mot.VT;r&&(o=_.min(o,_.max(0,i.Hrt.Rat.Cn-.05))),h&&(a=_.max(a,i.Hrt.Rat.jn));const u=Ai.IB(o,a).dB(s);if(0===n.U)return 0===this.Uut.U&&this.Uut.cB(Ai.IB(e.jn(e.U-1),o)),this.Uut=this.Uut.cB(u),void this.oht.Eat(this.Uut);if(r||this.Uut.U>0){const t=u.Sn(Ai.IB(o,n.Cn(0)));this.Fut(t)}const c=n.hB().Sn(Ai.IB(n.Cn(0),n.jn(n.U-1)));if(this.Fut(c),h){const t=u.Sn(Ai.IB(n.jn(n.U-1),a));this.Fut(t)}if(this.Uut.U>0){const t=this.Uut.dB(n);this.Fut(t),this.Uut=Ai.SB()}const l=i.Hrt.lnt,d=q(i.mot)?void 0:l.Zat(i.mot);var f;const g=null!=(f=null==t?void 0:t.mot)?f:this.Yut(d)?d:void 0;if(g){const t=this.oht.Nat(g.GT,g.VT);if(t.length>0){const i=Ai.IB(t[t.length-1].Tat,n.Cn(0));this.Fut(i)}}const w=q(i.mot)?void 0:l.Kat(i.mot);if(w&&this.Yut(w)){const t=this.oht.Nat(w.GT,w.VT);if(t.length>0){const i=Ai.IB(n.jn(n.U-1),t[0].Mat);this.Fut(i)}}}Yut(t){return!!t&&this.oht.Nat(t.GT,t.VT).length>0}Fut(t){const i=t.dB(this.but.wf);for(let t=0;t<i.U;t++)i.Cn(t)!==i.jn(t)&&this.Gut.Qq(i.Cn(t),i.jn(t))}Vut(t,i){throw new HU(t,i)}Lht(){if(this.Uut.U>0)return;var t;const i=this.but.iat.cB(null!=(t=this.but.Rq.nB().lA(this.but.sat))?t:Ai.SB());this.oht.gat(i),this.Wut&&!this.Hut(this.Wut)&&(this.Wut=void 0),this.Co(new WU(this.oht.Lt.dht,this.oht.Dat()))}kht(){return this.Iut&&this.Iut.Hrt.Bat(this.Iut.mot)?(this.Gut.t$(),!0):(this.Wut&&this.Wut.Hrt.Bat(this.Wut.mot)&&this.Hut(this.Wut)&&this.Gut.t$(),!!this.but.eat)}Hut(t){return this.oht.wat._B(t.qut,t.Xut)}Zut(t,i,e){(!this.Wut||this.Wut.mot.VT<t.mot.VT)&&(this.Wut=Tt({},t,{qut:i,Xut:e}))}Lut(){const t=this.but.sat;return t}async Oat(t,i){Bo(i);const e=this.Iut?this.Iut.Hrt:void 0,s=await this.Sut.Cat(t,e,i);if(s)return s}async kut(t,i){const e=t.Hrt,s=e.lnt,n=q(t.mot)?s.qat(t.mot):t.mot,r=e.Jut.Kut(),h=s.$ut(n);if(h&&h.getTime()<=r.getTime())return this.Vut(M.drt,"Segment is not available.");const o=s.tct(n).getTime()-r.getTime();await Na((t=>Promise.race([lt(o,t),e.lf(Tc.Frt,t)])),i)}async xut(t,i,e){void 0===e&&(e=0),Bo(i);const s=t.ict;if(!s)return this.TJ;try{if(!t.ect){const e=await this.sct.lot(s,i);t.ect=e.zm}}catch(s){if(Ao(s),Vu(s)){if(2===e)return t.Yat=!0,this.Vut(M.prt,"Could not fetch the initializer.");const s=_.min(this.Rut.minimumBackoff*2**e,this.Rut.maximumBackoff);return await lt(s,i),this.xut(t,i,e+1)}throw new $i(Ui.MEDIA_LOAD_ERROR,s.message,s)}Bo(i);try{this.Eut(t.ect)&&await this.Gut.Mut(t.ect,t,i)}catch(t){if(Ao(t),Vu(t))return this.Vut(M.prt,"Could not append the initializer.");throw new $i(Ui.MEDIA_DECODE_ERROR,t.message,t)}return t.ect}async uot(t,i,e){void 0===e&&(e=0);try{return Bo(i),await this.sct.uot(t,i)}catch(s){if(Ao(s),s instanceof go){if(function(t){return t instanceof Ev}(s.cause))return this.nct(new go(s,t.mot,t.Hrt),e),this.Vut(M.drt,"Could not append the segment.");if(2===e)return t.Hrt.Yat=!0,this.nct(s,e),this.Vut(M.drt,"Could not fetch the segment.");const n=_.min(this.Rut.minimumBackoff*2**e,this.Rut.maximumBackoff);return await lt(n,i),await this.uot(t,i,e+1)}throw new $i(Ui.MEDIA_LOAD_ERROR,s.message,s)}}async Cut(t,i,e){const s=this.oht.Nat(i.GT,i.VT),n=this.but.iat.lA(t);let r=Ai.SB();for(const t of s){Bo(e);const i=t.Mat,s=t.Tat,h=n&&n.wB(i,s)?_.max(i,n.jn(0)):i,o=s;h<o&&(r=r.cB(Ai.IB(h,o)))}for(let t=0;t<r.U;t++)await this.Gut.Tut(r.Cn(t),r.jn(t),e);this.Lht()}async Out(t,i){try{Bo(i);const e=await this.Gut.yut(t.yot,t.mot,t.Hrt,i);return this.rct(t,e.qut,e.Xut),this.Zut(t,e.qut,e.Xut),t}catch(i){if(Ao(i),Vu(i))return this.nct(new go(i,t.mot,t.Hrt),0),this.Vut(M.drt,"Could not append the segment.");if(Kb(i)&&this.Gut.UW())return this.Vut(M._rt,"Buffer is full. Could not reduce the buffer.");throw new $i(Ui.MEDIA_DECODE_ERROR,i.message,i)}}rct(t,i,e){const s=t.Hrt,n=t.mot;this.Iat(n,s,i,e)}Iat(t,i,e,s){this.oht.Iat({mat:t.GT,pat:t.VT,Mat:e,Tat:s,bat:!0},i),this.Gut.Fq(e,s)}o$(t,i,e){const s=Ai.IB(t,i);e?this.oht.Qq(s,e):this.oht.Eat(s),this.Gut.Qq(t,i)}But(t){const i=Ai.IB(t.mot.GT,t.mot.VT);t.Hrt?this.oht.Qq(i,t.Hrt):this.oht.Eat(i)}nct(t,i){const e=t.Yot,s=this.oht.Lt.dht,n=this.oht.Lt.va,r=t.Vot.Hrt&&t.Vot.Hrt.va,h=new VU(e,t.message,s,n,r,i);this.Co(h)}tr(){this.TJ=void 0,this.Iut=void 0}gn(){this.tr(),this.Wut=void 0,this.sct.fn(qU,this.Ds),this.sct.gn()}constructor(t,i,e,s,n,r,h,o){super(),this.Eht=t,this.oht=i,this.but=e,this.Sut=s,this.sct=n,this.Gut=r,this._ut=h,this.Rut=o,this.Dut=void 0,this.TJ=void 0,this.Iut=void 0,this.Wut=void 0,this.zut=0,this.Put=0,this.Uut=Ai.SB(),this.sct.yn(qU,this.Ds)}};function ZU(t){const i=t.Hrt,e=i.lnt,s=q(t.mot)?e.qat(t.mot):t.mot;return e.hct(s,i.Jut.Kut())}var KU=0,JU=class{h9(t){const i=KU++,e=this.$ot.e$,s=new pU(t),n=new ZR(e,this.act),r=new vU(this.$ot,this.o2,this.y$,this.PB),h=YU.h9(i,this.$ot,s,this.PB,n,this.NS,this.pot,this.lut,this.rut,this._ut),o=function(t){switch(t){case Vt.ym:return Re.ym;case Vt.pm:return Re.pm;case Vt.Ru:return Re.Ru;case Vt.nT:return Re.nT;default:return Re.rT}}(e),a=new HR(this.NS,o),u=this.Kot(a,n,this.act),c=new GU(this.$ot),l=new XU(i,s,r,h,u,c,this._ut,this.Rut);return new WR(i,t.Hot,s,l,this.o2)}constructor(t,i,e,s,n,r,h,o,a,u,c){this.$ot=t,this.o2=i,this.y$=e,this.NS=s,this.PB=n,this.act=r,this.pot=h,this.lut=o,this.rut=a,this._ut=u,this.Rut=c}},$U=class extends JU{Kot(t,i,e){return(new wU).Kot(t,this.$ot,i,e,this.pot)}},tQ=class extends JU{uct(t,i){const e={dht:Vt.Ru,Hot:i,irt:i.irt,va:t.va};return super.h9(e)}Kot(t,i){return(new wU).Kot(t,this.$ot,i,!1,this.pot)}};var iQ=class{gq(t){return this.Kst.gq(t)}Aq(t){return this.Kst.Aq(t)}constructor(t){this.Kst=t}},eQ=class{gq(t){return!0}Aq(t){return Promise.resolve(void 0)}},Xh=class extends yo{fa(){return new sQ(this.Ng.map((t=>t.va)))}constructor(t,i){super(qo.rg),this.Ng=t||[],this.Lt=i}},sQ=class extends wn{constructor(t){super("targetqualitychanged"),this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}},nQ=class extends Ih{fa(){return new rQ(this.quality.va)}constructor(t){super(qo.QUALITY_UNAVAILABLE),this.quality=t}},rQ=class extends ko{constructor(t){super("qualityunavailable"),this.quality=t}},hQ=class extends wn{constructor(){super(qo.NO_QUALITY)}};function oQ(t){return{wz:t.wz,hit:t.mst,Ti:aQ(t)?t.Ti:0,Rg:aQ(t)?Vt.pm:Vt.ym,ji:aQ(t)?t.ji:0}}function aQ(t){const i=t;return void 0!==i.Ti&&void 0!==i.ji}var uQ=0,cQ=class extends xd{get Tg(){return this.yht.cct.map(lQ).filter(Yt)}lct(t){for(const i of t)i.yn("update",this.dct),this.IT.ST(i)}fct(t){if(!this.IT.bT(t))return;t.QI();const i=this._ct();if(this.gct&&gd(this.gct,t)){const t=this.gct.filter((t=>t.yet));0===t.length&&i.length>0?this.Dg=i:this.Dg=t}else this.Dg=i;this.Co(new nQ(t))}_ct(){const t=[];for(const i of this.IT.og)i.yet&&t.push(i);return t}get yg(){return this.wct}Act(t){this.wct=t.Hrt,this.Co(t)}get Hot(){return this.yht}get Rt(){return this.Le}set Rt(t){this.zT(t)}get va(){return this.Xa||(this.Xa=Pi(this)),this.Xa}get vct(){return this.mct}set vct(t){this.mct=t}get o(){return this.CT}get Mg(){return this.xT}get zt(){return this.G0}get gs(){return this.WL}get kh(){return this.OT}set kh(t){t!==this.OT&&(this.OT=t,this.Co(new Gs(this)))}get jg(){return this.Rt?"enabled":"disabled"}get Dg(){return this.gct}set Dg(t){let e=[];if(t){const s=(null!=t?t:[]).filter((t=>{const e=this.yg?oQ(this.yg):void 0;return i.Ys.iit(e,oQ(t))}));if(0===s.length)return;e=s.filter((t=>t.yet))}else e=this._ct();0===e.length&&this.Co(new hQ),this.gct=t&&this.IT.bT(t)?t:void 0,this.pct=this.yct(this.gct),this.Co(new Xh(t,this))}get Mct(){return this.pct}yct(t){if(!t||0===t.length)return;const i=[];for(const e of this.irt)for(const s of t)s===e.Hrt&&s.yet&&i.push(e);return i}get Ng(){return this.IT}get irt(){return this.Tct}Nct(t){this.Dct.push(t),this.Tct.push(...t.irt);const i=t.irt.map((t=>t.Hrt));this.lct(i)}get dht(){return this.Ict}get Sct(){return this.Dct}zT(t){this.Le=t,this.mct&&(t?this.mct.UI(this):this.mct.QI(this))}Ect(t){this.Le=t,this.bct!==t&&(this.bct=t,this.Co(new no(this)))}gn(){for(const t of this.IT.og)t.fn("update",this.dct);this.IT.tr()}constructor(t,i,e="alternative"){super(),this.wct=void 0,this.Le=!1,this.Xa=void 0,this.mct=void 0,this.CT="",this.bct=!1,this.IT=new Tw,this.Tct=[],this.gct=void 0,this.pct=void 0,this.dct=()=>this.Co(new Gs(this)),this.Dct=[],this.yht=t,this.CT=String(uQ++),this.xT=du(),this.G0=e,this.WL=t.R6,this.OT=t.kh,this.Ict=t.Rg,this.Tct=t.irt,this.lct(i)}};function lQ(t){if("urn:mpeg:dash:role:2011"===t.yst)return dQ(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.yst){if("1"===t.jM)return Ku.Sg;if("2"===t.jM)return Ku.Lg}}function dQ(t){if(void 0!==(null==t?void 0:t.jM))switch(t.jM){case"caption":return Ku.Ig;case"sign":return Ku.Eg;case"description":return Ku.Sg;case"enhanced-audio-intelligibility":return Ku.Lg;default:return}}var lo,Mr,fQ=class extends UR{get jz(){const t=this.o2.Mf;return this.iat.lA(t,.01)}get Lct(){return this.Fnt&&this.kct[this.Fnt.Mg]?this.kct[this.Fnt.Mg]:Ai.SB()}get Cct(){return this.Fnt&&this.xct[this.Fnt.Mg]?this.xct[this.Fnt.Mg]:Ai.SB()}get rat(){return new Ai([0,1/0])}get wf(){return this.Lct}get Rq(){return this.Oct?this.Oct.hht.Rq.oat:Ai.SB()}get iat(){return QR(this.wf,this.Rq).uB(2*this.jct)}get Cn(){return this.Gnt?this.Gnt.Rat.Cn:NaN}get jn(){return this.Gnt?this.Gnt.Rat.jn:NaN}get If(){const t=this.jn;return!!t&&this.o2.Mf>=t}get jct(){var t;const i=this.$nt();if(!i)return.04;var e;return 1/(null!=(e=this.Fnt&&(null==i||null==(t=i.zct)?void 0:t.vN()))?e:25)}get Ti(){return this.fk}get e$(){return Vt.Ru}get Gf(){return this.CB}set Gf(t){this.CB=t}get Hf(){return this.Cct}get t_(){if(!this.Fnt)return Ai.DB(0);const t=this.Jnt(this.Fnt),i=null==t?void 0:t.Pct,e=null==t?void 0:t.Bct;if(void 0===e||void 0===i)return Ai.DB(0);const s=_.max(i,this.o2.Mf);return new Ai([e,s]).nB()}get ji(){return this.dk}t$(){}nat(){return this.iat.gr(this.jn)}async yut(t,i,e,s){const n=t.Rg===ji.aq?t.zm.Rnt:await t.zm.cj(s),r=this.findTrackForRepresentation(e),h=this.kct[r.Mg],o=i.GT,a=i.VT,u=new Ai([o,a]);h||(this.kct[r.Mg]=Ai.SB(),this.xct[r.Mg]=Ai.SB()),this.ent(s);const c=this.cnt(new j(n),i,e,r);for(const t of c)r.SS(t);return this.kct[r.Mg]=this.kct[r.Mg].cB(u),{qut:o,Xut:a}}ent(t){const i=Zb(this.o2.Mf,void 0,void 0,this.wf,this.PB.jW,this.PB.EW);for(const[e,s]of i)D(this.Tut(e,s,t))}unt(t,i,e){return this.Rct.unt(t,i,e)}cnt(t,i,e,s){return this.Rct.cnt(t,i,e,s)}Tut(t,i,e){const s=t,n=i;let r=new Ai([t,i]);for(const t of this.Z.og){const i=[];for(const e of t.L.og)e.GT>=s&&e.VT<=n?i.push(e):r=r.dB(new Ai([e.GT,e.VT]));for(const e of i)t.xI(e);const e=this.kct[t.Mg];e&&(this.kct[t.Mg]=e.dB(r))}return Promise.resolve()}Qq(t,i){}Fq(t,i){}UW(){return!1}UI(t){if(super.UI(t),this.Rct.tr(),this.Oct&&(this.Oct.gn(),this.Oct=void 0),this.Fnt){const t=this.Jnt(this.Fnt);this.Oct=new tQ(this,this.o2,this.o2,this.NS,this.PB,!1,this.pot,void 0,void 0,new eQ,lw).uct(this.Fnt,t),this.Oct.yn(ut.ha,this.Uct),this.Oct.Cn(M.rrt)}}QI(t){this.Fnt===t&&(super.QI(t),this.Oct&&(this.Oct.gn(),this.Oct=void 0))}Hnt(t){const i=function(t){const i=t.irt&&t.irt.length>0&&t.irt[0],e=i&&Lv(i.mst),s=Lv(t.mst),n=t.CF===Qe.APPLICATION_TTML_XML;return e||s||n?Kc.TTML:t.CF===Qe.TEXT_VTT||Ov(t.CF,t.mst)?Kc.WEBVTT:Kc.DEFAULT}(t);if(!i)throw new g("Unknown TextTrack type for Representation");const e=t.Qct.concat(t.cct);return this.Fct(function(t){return gd(t.filter((t=>"urn:mpeg:dash:role:2011"===t.yst)).map((t=>t.jM)).filter(Yt),"caption")?Mi.yI:Mi.Mm}(e),t.kh,t.R6,!1,i,t,function(t){return t.filter((t=>"urn:mpeg:dash:role:2011"===t.yst)).some((t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.jM)))}(t.Qct),t.cct.map(dQ).filter(Yt))}async tr(){await super.tr(),this.Oct&&(await this.Oct.tr(M.Srt),this.Oct.fn(ut.ha,this.Uct),this.Oct=void 0),this.Gnt=void 0,this.kct={},this.xct={}}Yct(){this.kct={},this.xct={}}findTrackForRepresentation(t){for(const i of this.Z.og){const e=this.Jnt(i);if(e&&UR.trt(e)===t)return i}}constructor(t,i,e,s,n){super(),this.fk=0,this.CB=1,this.Oct=void 0,this.kct={},this.xct={},this.dk=0,this.Uct=t=>{0},this.o2=t,this.NS=i,this.PB=e,this.Rct=s,this.pot=n}},_Q=class extends fQ{Fct(t,i,e,s,n,r,h,o){var a;const u=r.irt.reduce(((t,i)=>t||i.o),void 0);var c;const l=null!=(c=null!=u?u:null==(a=r.o)?void 0:a.toString())?c:"";return this.MS.yS(t,l,i,e,s,n,h,o)}gn(){for(const t of this.Z.og)this.MS.bS(t);return super.gn()}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.MS=r}},gQ=class{get nt(){return this.Dl}async TS(t){if(t.Rg!==Vt.Ru)return;const i=function(t,i){return Lv(i)||t===Qe.APPLICATION_TTML_XML||t===Qe.TEXT_VTT?new zR:Ov(t,i)?new BR:void 0}(t.CF,t.mst);if(i){const e=this.Gct(i);return this.Vct(e),await e.$n(t),e}}Gct(t){return new _Q(this.o2,this.NS,this.PB,t,this.pot,this.MS)}Vct(t){this.Wct.push(t),this.Dl.Dz(t.Z)}async tr(){for(const t of this.Wct.slice())await t.tr();No(this.Wct),this.Dl.tr()}async gn(){for(const t of this.Wct)await t.gn();No(this.Wct),this.Dl.gn()}constructor(t,i,e,s,n){this.Wct=[],this.Dl=new gn([]),this.o2=t,this.NS=i,this.PB=e,this.pot=s,this.MS=n}},wQ=class extends wn{constructor(t){super(l.dw),this.error=t}};!function(t){t.Wx="static",t.Hx="dynamic"}(lo||(lo={})),(Mr||(Mr={})).Hct="qct";var AQ=class extends wn{constructor(){super(Mr.Hct)}},vQ=0;var mQ,pi,pQ,yQ=class extends wn{constructor(t,i){super(l.Aw),this.representation=t,this.previousRepresentation=i}};function MQ(t,i,e){return e===mQ.Xct?e:i!==pi.Zct&&i!==pi.Kct||e!==mQ.Jct&&e!==mQ.$ct?t?i===pi.tlt?mQ.ilt:i===pi.elt?mQ.slt:mQ.Xct:mQ.nlt:mQ.$ct}function TQ(t,i,e,s){const n={byte:e};let r=mQ.Jct;const h=[],o=31&$r(i,n,s);n.byte+=1;for(let e=0;e<o;e+=1){const o=$r(i,n,s),a=4&o,u=3&o;r=MQ(Boolean(a),u,r);const c=$r(i,n,s),l=$r(i,n,s);h.push({rlt:t,yM:-1,hlt:!e,olt:Boolean(a),Rg:u,ult:r,clt:c,llt:l})}return h}function NQ(t,i,e){const s=$r(t,i,e);if(!S(s))return String.fromCharCode(s)}function DQ(t){const i=t.JZ,e={byte:t.ZZ},s=t.KZ,n=$r(i,e,s);if(255===n&&(e.byte+=1),181!==n)return;const r=lk(i,e);if(47!==r&&49!==r)return;if(49===r){const t=function(t,i,e){let s="",n=e;for(;n>0;)n-=1,s+=NQ(t,i);return s}(i,e,4);if("GA94"!==t)return}if(3!==$r(i,e,s))return;47===r&&(e.byte+=1);const h=t;return h.dlt=e.byte,h}function IQ(t){return 4===t.qZ}function SQ(t){const i=t.filter(IQ).map(DQ).filter(Yt),e=[];for(const t of i)e.push(...TQ(t.HZ,t.JZ,t.dlt,t.KZ));return e}!function(t){t[t.Xct=0]="Xct",t[t.Jct=1]="Jct",t[t.$ct=2]="$ct",t[t.slt=3]="slt",t[t.ilt=4]="ilt",t[t.nlt=5]="nlt"}(mQ||(mQ={})),function(t){t[t.Zct=0]="Zct",t[t.Kct=1]="Kct",t[t.tlt=2]="tlt",t[t.elt=3]="elt"}(pi||(pi={})),function(t){t[t.flt=47]="flt",t[t._lt=49]="_lt"}(pQ||(pQ={}));var EQ="und";function bQ(t){if(t===EQ)return;const i=t.toLowerCase();for(const t of LQ)if(t[1]===i||t[2]===i||t["2T"]===i||t["2B"]===i||t[3]===i)return t}var LQ=[{l:"Abkhaz",lh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",lh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",lh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",lh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",lh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",lh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",lh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",lh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",lh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",lh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",lh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",lh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",lh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",lh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",lh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",lh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",lh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",lh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",lh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",lh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",lh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",lh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",lh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",lh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",lh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",lh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",lh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",lh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",lh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",lh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",lh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",lh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",lh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",lh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",lh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",lh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",lh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",lh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",lh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",lh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",lh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",lh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",lh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",lh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",lh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",lh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",lh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",lh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",lh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",lh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",lh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",lh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",lh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",lh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",lh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",lh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",lh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",lh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",lh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",lh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",lh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",lh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",lh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",lh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",lh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",lh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",lh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",lh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",lh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",lh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",lh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",lh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",lh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",lh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",lh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",lh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",lh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",lh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",lh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",lh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",lh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",lh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",lh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",lh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",lh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",lh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",lh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",lh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",lh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",lh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",lh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",lh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",lh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",lh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",lh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",lh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",lh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",lh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",lh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",lh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",lh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",lh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",lh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",lh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",lh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",lh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",lh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",lh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",lh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",lh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",lh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",lh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",lh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",lh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",lh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",lh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",lh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",lh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",lh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",lh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",lh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",lh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",lh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",lh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",lh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",lh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",lh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",lh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",lh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",lh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",lh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",lh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",lh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",lh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",lh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",lh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",lh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",lh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",lh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",lh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",lh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",lh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",lh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",lh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",lh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",lh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",lh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",lh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",lh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",lh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",lh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",lh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",lh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",lh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",lh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",lh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",lh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",lh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",lh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",lh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",lh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",lh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",lh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",lh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",lh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",lh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",lh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",lh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",lh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",lh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",lh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",lh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",lh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",lh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",lh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",lh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",lh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",lh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",lh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",lh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",lh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",lh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",lh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",lh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];function kQ(t){var i;const e=null!=(i=function(t){const i=t.NZ,e=new fk;return e.RZ(i,0,i.byteLength),Mk(e).fK}(t))?i:24;return t.glt/e}function CQ(t){return t.Rg===Zt.Jv}var xQ;function OQ(t,i,e,s,n){const r=function(t,i,e,s){const n=e.glt,r=Ce.fromNumber(t.xM||0),h=s.ST(ke.xN(r,n));return{wlt:s.vN(),Alt:s,vlt:h,plt:s}}(t,0,e,s),h=ke.ON(t.ct||0,e.glt),o=t.dp||0,a=!(65536&o)&&1!==(o>>24&3);let u;const c=ha(n),l=new L;for(;l.Ku<c.byteLength;){const t=oo(c,l);if((31&cl(c,l,1))===dk.nK){const i=new fk;i.RZ(n,l.Ku-1,l.Ku+t-1);const e=new yk(i),s=wk(r.vlt,e);u=u||[],u.push(...SQ(s))}l.Im(t-1)}return Tt({},r,{ct:h.vN(),ylt:h,Mlt:r.vlt.vN(),Tlt:r.wlt,Nlt:a,Dlt:u,Ilt:!1,Slt:!1})}function jQ(t){return{Qp:t.np.Qp,glt:t.Pp.np.kp}}function zQ(t){return t.Rg===Zt.Av}!function(t){t[t.SAMPLE_DEPENDS_ON_UNKNOWN=0]="SAMPLE_DEPENDS_ON_UNKNOWN",t[t.SAMPLE_DEPENDS_ON_OTHERS=1]="SAMPLE_DEPENDS_ON_OTHERS",t[t.SAMPLE_DEPENDS_ON_NO_OTHER=2]="SAMPLE_DEPENDS_ON_NO_OTHER",t[t.SAMPLE_DEPENDS_ON_RESERVED=3]="SAMPLE_DEPENDS_ON_RESERVED"}(xQ||(xQ={}));var Ar=class{oN(t){return this.H6===t.H6&&this.z6===t.z6}constructor(t,i){this.H6=t,this.z6=i}},PQ=class{get a8(){return this.Elt}get s8(){return[this]}get h8(){return this.tq}get Q6(){return this.blt}get G6(){return new Ar(this.Q6.H6,this.Q6.z6+this.a8.length-1)}Llt(t){this.Elt+=t}klt(t){for(const i of t)this.Llt(i)}constructor(t,i){this.tq=t,this.blt=i,this.Elt=""}};function BQ(t,i){return t===i||t.a8===i.a8&&t.Q6.oN(i.Q6)&&Th(t.h8,i.h8)}function RQ(t,i){return t===i||t.Q6.oN(i.Q6)&&t.G6.oN(i.G6)&&wd(t.s8,i.s8,BQ)}var UQ=class extends Xn{aN(t){return wd(this.O,t.O,RQ)}constructor(t,i,e){super(t,i,e,!1)}},QQ=class{Clt(t){return t.CD(this)}xlt(t){return rs(t,((t,i)=>t.CD(this,i)))}Olt(t,i){return new FQ(t,i).jlt()}},FQ=class{jlt(){if(this.zlt)return[];for(let t=0;t<this.H6.length;t++)this.Plt(t);return this.Blt(),this.Rlt}Ult(t){this.Qlt=new PQ(tj,new Ar(this.Flt,t))}Blt(){this.Qlt&&(this.Rlt.push(this.Qlt),this.Qlt=null)}Plt(t){const i=this.H6[t];YQ(i)?this.Qlt&&this.Blt():(this.Qlt||this.Ult(t),this.Qlt.Llt(i))}get zlt(){return this.H6.every(YQ)}constructor(t,i){this.H6=t,this.Flt=i,this.Rlt=[],this.Qlt=null}};function YQ(t){return null==t}var GQ=class{static Ylt(t,i,e){if(i>=e)return;const s=rs(t,((t,i)=>new FQ(t.map((t=>t?t.Glt():null)),i).jlt()));return 0!==s.length?new UQ(i,e,s):void 0}},Uo="black",VQ="white",WQ=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce(((t,i)=>(t[i[0]]=i[1],t)),{}),HQ=class{Vlt(t){for(let i=0;i<sl;i++)t&&(this.Wlt[i]=t.Wlt[i])}oN(t){for(let i=0;i<sl;i++)if(this.Wlt[i]!==t.Wlt[i])return!1;return!0}Hlt(){for(let t=0;t<sl;t++)if(null!==this.Wlt[t])return!1;return!0}qlt(t){this.Xlt!==t&&(this.Xlt=t),this.Xlt<0?this.Xlt=0:this.Xlt>sl&&(this.Xlt=31)}Zlt(t){const i=this.Xlt+t;this.qlt(i)}Klt(){this.Zlt(-1),this.Wlt[this.Xlt]=null}Llt(t){t>=144&&this.Klt();const i=function(t){return WQ[t]?String.fromCharCode(WQ[t]):String.fromCharCode(t)}(t);this.addParsedChar(i)}addParsedChar(t){this.Xlt>=sl||(32===Number(t)?(this.Wlt[this.Xlt]=this.Jlt?"</i>":"<i>",this.Jlt=!this.Jlt):this.Wlt[this.Xlt]=t,this.Zlt(1))}$lt(t){for(let i=t;i<sl;i++)this.Wlt[i]=null}Vb(){this.$lt(0),this.Xlt=0}tdt(){this.$lt(this.Xlt)}idt(t,i){const e=this.Wlt;let s=null;for(let n=0;n<sl;n++){const r=e[n];null===r?s=null:(s||(s={Gh:n,Xh:t,ji:0,Ti:1,Wlt:[[]]},i.push(s)),s.Wlt[0].push(r),s.ji++)}}CD(t,i){return t.Olt(this.Wlt,i)}constructor(){this.Wlt=[],this.Xlt=0;for(let t=0;t<sl;t++)this.Wlt.push(null);this.Jlt=!1}};var pr,qQ=class{edt(t,i){const e="CC"+(this.sdt<<1|this.ndt+1);if(t>=i)return null;const s=(new QQ).xlt(this.rdt.slice(1));return 0===s.length?null:{YT:new UQ(t,i,s),dV:e,hdt:this.sdt<<1|this.ndt+1}}tr(){this.odt(),this.adt=1}udt(){return this.adt}cdt(t){this.adt=t}qlt(t){this.rdt[this.adt].qlt(t)}Zlt(t){this.rdt[this.adt].Zlt(t)}ldt(){return this.ddt}fdt(t){this.ddt=t}Llt(t,i){if(i<32||i>127)return;let e="";switch(t){case 0:e=void 0!==ZQ[i]?ZQ[i]:String.fromCharCode(i);break;case 1:e=KQ[i];break;case 2:this._dt(),e=JQ[i];break;case 3:this._dt(),e=$Q[i]}e&&this.rdt[this.adt].addParsedChar(e)}_dt(){this.rdt[this.adt].Klt()}gdt(t,i,e){if(t>=i)for(let s=e-1;s>=0;s--)this.rdt[t+s]=this.rdt[i+s];else for(let s=0;s<e;s++)this.rdt[t+s]=this.rdt[i+s]}wdt(t,i){for(let e=0;e<=i;e++)this.rdt[t+e]=new HQ}odt(){this.wdt(0,Tr)}Adt(){this.adt=this.ddt>0?this.ddt:0,this.odt()}vdt(t){this.mdt=t}pdt(t){this.ydt=t}Mdt(t){this.Tdt=t}Ndt(t){this.Ddt=t}constructor(t,i){this.rdt=new Array(Tr+1);for(let t=0;t<=Tr;t++)this.rdt[t]=new HQ;this.adt=1,this.ddt=0,this.sdt=t,this.ndt=i,this.mdt=!1,this.ydt=!1,this.Tdt=VQ,this.Ddt=Uo,this.tr()}},Tr=15;!function(t){t[t.Idt=0]="Idt",t[t.Sdt=1]="Sdt",t[t.Edt=2]="Edt",t[t.bdt=3]="bdt"}(pr||(pr={}));var XQ,ZQ={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},KQ={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},JQ={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},$Q={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"},tF=class{tr(){this.Ldt=!0,this.kdt=0,this.X0=0,this.Cdt=this.xdt,this.Odt=void 0,this.xdt.tr(),this.jdt.tr(),this.zdt.tr()}Pdt(t,i){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|i>>5&1]}Bdt(t,i){const e=this.Pdt(t,i),s=(30&i)>>1;let n=VQ,r=!1;s<7?n=nF[s]:7===s&&(r=!0);const h=1==(1&i);if(4===this.X0)return;const o=this.Cdt;if(3===this.X0&&e!==o.udt()){const t=1+o.udt()-o.ldt(),i=1+e-o.ldt();o.gdt(i,t,o.ldt()),o.wdt(0,i-1),o.wdt(e+1,Tr-e)}o.cdt(e);const a=ej[t<<1&14|i>>5&1]-1;if(a<0)return;const u=function(t,i){const e=i>95?i-96:i-64;return{j6:ij[e].j6,O6:ij[e].O6,z6:ij[e].z6,H6:t}}(a,i);o.qlt(u.z6),this.Cdt.vdt(h),this.Cdt.pdt(r),this.Cdt.Mdt(n),this.Cdt.Ndt(Uo)}Rdt(t,i){this.Cdt.vdt(!1),this.Cdt.pdt(!1),this.Cdt.Mdt(VQ);const e=this.Udt(t,pr.Idt," ".charCodeAt(0));let s=VQ,n=!1;const r=1==(1&i);return s=nF[(14&i)>>1],"white_italics"===s&&(s="white",n=!0),this.Cdt.vdt(r),this.Cdt.pdt(n),this.Cdt.Mdt(s),e}Udt(t,i,e){if(this.Cdt.Llt(i,e),2===this.X0||3===this.X0){const i=this.Qdt(this.Cdt,this.kdt,t);return this.kdt=t,i}return null}Qdt(t,i,e){return this.Ldt?null:2===this.X0||3===this.X0?t.edt(e,e+10):t.edt(i,e)}Fdt(t,i){let e=Uo;0==(7&t)&&(e=sF[(14&i)>>1]),this.Cdt.Ndt(e)}Ydt(t){const i=iF,e=t.Gdt,s=t.Vdt;let n=null;switch(e){case i.RCL:this.Wdt();break;case i.BS:this.Hdt();break;case i.AOD:case i.AON:case i.DER:break;case i.RU2:n=this.qdt(2,s);break;case i.RU3:n=this.qdt(3,s);break;case i.RU4:n=this.qdt(4,s);break;case i.FON:n=this.Xdt(s);break;case i.RDC:this.Zdt(s);break;case i.TR:this.Kdt();break;case i.RTD:this.Jdt();break;case i.EDM:n=this.$dt(s);break;case i.CR:n=this.tft(s);break;case i.ENM:this.ift();break;case i.EOC:n=this.eft(s)}return n}tft(t){const i=this.Cdt;if(3!==this.X0)return null;const e=this.Qdt(i,this.kdt,t),s=i.udt()-i.ldt()+1;return i.gdt(s-1,s,i.ldt()),i.wdt(0,s-1),i.wdt(i.udt(),Tr-i.udt()),this.kdt=t,e}qdt(t,i){this.Cdt=this.xdt;const e=this.Cdt;let s=null;return 3!==this.X0&&4!==this.X0&&(s=this.Qdt(e,this.kdt,i),this.xdt.Adt(),this.jdt.Adt(),this.Ldt=!1,e.cdt(Tr)),this.X0=3,e.fdt(t),s}Xdt(t){return this.Udt(t,pr.Idt," ".charCodeAt(0))}$dt(t){const i=this.xdt;let e=null;return 4!==this.X0&&(e=this.Qdt(i,this.kdt,t)),i.odt(),this.Ldt=!1,e}Zdt(t){this.X0=2,this.Cdt=this.xdt,this.Cdt.fdt(0),this.kdt=t}ift(){this.jdt.odt()}eft(t){let i=null;4!==this.X0&&(i=this.Qdt(this.xdt,this.kdt,t));const e=this.jdt;return this.jdt=this.xdt,this.xdt=e,this.Wdt(),this.kdt=t,i}Wdt(){this.X0=1,this.Cdt=this.jdt,this.Cdt.fdt(0)}Hdt(){this.Cdt._dt()}Kdt(){this.zdt.tr(),this.Ldt=!1,this.Jdt()}Jdt(){this.Cdt=this.zdt,this.X0=4}sft(t,i,e){return this.Cdt.Llt(pr.Idt,i),this.Udt(t,pr.Idt,e)}nft(t,i,e){const s=1&i?pr.bdt:pr.Edt;return this.Udt(t,s,e)}rft(t){const i=t.hft,e=t.Gdt,s=t.Vdt;if(this.Odt===(i<<8|e))return this.Odt=void 0,null;if(this.Odt=i<<8|e,this.oft(i,e))this.Bdt(i,e);else{if(this.aft(i,e))return this.Rdt(s,e);if(this.uft(i,e))this.Fdt(i,e);else{if(this.cft(i,e))return this.Udt(s,pr.Sdt,e);if(this.lft(i,e))return this.nft(s,i,e);if(this.dft(i,e))return this.Ydt(t);this.isTabOffset(i)&&this.Cdt.Zlt(e-32)}}return null}isTabOffset(t){return 23===t||31===t}dft(t,i){return 20==(246&t)&&32==(240&i)}oft(t,i){return 16==(240&t)&&64==(192&i)}aft(t,i){return 17==(247&t)&&32==(240&i)}uft(t,i){return 16==(247&t)&&32==(240&i)||23==(247&t)&&45==(255&i)}cft(t,i){return 17==(247&t)&&48==(240&i)}lft(t,i){return 18==(246&t)&&32==(224&i)}static fft(t){return 16==(112&t)}constructor(t,i){this.X0=0,this.zdt=new qQ(t,i),this.xdt=new qQ(t,i),this.jdt=new qQ(t,i),this.Cdt=this.xdt,this.kdt=0,this.Odt=void 0,this.Ldt=!1}},iF={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47};!function(t){t[t.FP=0]="FP",t[t._ft=1]="_ft",t[t.gft=2]="gft",t[t.wft=3]="wft",t[t.Ru=4]="Ru"}(XQ||(XQ={}));var eF,sF=["black","green","blue","cyan","red","yellow","magenta","black"],nF=["white","green","blue","cyan","red","yellow","magenta","white_italics"],rF=class{Glt(){return this.Aft}vft(){return this.mdt}mft(){return this.ydt}pft(){return this.Ddt}yft(){return this.Tdt}constructor(t,i,e,s,n){this.Aft=t,this.mdt=i,this.ydt=e,this.Ddt=s,this.Tdt=n}},hF=class{Mft(t,i,e,s,n,r,h){this.ZP=t,this.Tft=i,this.Nft=e,this.Dft=s,this.Ift=n,this.Sft=r,this.Eft=h}bft(){this.Lft=[];for(let t=0;t<aF;t++)this.Lft.push(this.kft())}kft(){const t=[];for(let i=0;i<oF;i++)t.push(null);return t}Cft(t){this.xft()&&(this.Lft[this.adt][this.Oft]=new rF(t,this.mdt,this.ydt,this.Ddt,this.Tdt),this.Oft++)}jft(){this.xft()&&(this.Oft<=0&&this.adt<=0||(this.Oft<=0?(this.Oft=this.Eft-1,this.adt--):this.Oft--,this.Lft[this.adt][this.Oft]=null))}xft(){const t=this.adt<this.Sft&&this.adt>=0,i=this.Oft<this.Eft&&this.Oft>=0;return t&&i}zft(){return this.ZP}Pft(t){let i=0;for(let e=t;e<aF;e++,i++)this.Lft[i]=this.Lft[e];for(let e=0;e<t;e++,i++)this.Lft[i]=this.kft()}Bft(){if(this.adt+1>=this.Sft)return this.Pft(1),void(this.Oft=0);this.adt++,this.Oft=0}Rft(){this.Lft[this.adt]=this.kft(),this.Oft=0}edt(t,i){if(this.tN>=t)return null;const e=GQ.Ylt(this.Lft,this.tN,t);return e?(this.Uft(t),{YT:e,dV:"svc"+i,hdt:i}):null}Qft(t,i){this.adt=t,this.Oft=i}Fft(t){this.Ddt=t}Yft(t){this.Tdt=t}Gft(t){this.mdt=t}Vft(t){this.ydt=t}Wft(){this.adt=0,this.Oft=0,this.mdt=!1,this.ydt=!1,this.Tdt=VQ,this.Ddt=Uo}Hft(t){this.qft=t}Xft(){this.ZP=!0}be(){this.ZP=!1}wh(){this.ZP=!this.ZP}Uft(t){this.tN=t}constructor(t){this.Zft=t,this.ZP=!1,this.Ift=!1,this.Nft=0,this.Tft=0,this.Dft=0,this.Sft=0,this.Eft=0,this.qft=2,this.Lft=[],this.tN=0,this.adt=0,this.Oft=0,this.ydt=!1,this.mdt=!1,this.Tdt=VQ,this.Ddt=Uo,this.bft()}};!function(t){t[t.Kft=0]="Kft",t[t.Jft=1]="Jft",t[t.$ft=2]="$ft",t[t.t_t=3]="t_t"}(eF||(eF={}));var oF=42,aF=15,uF=class{i_t(t){const i=t.e_t();let e=i.jM;const s=i.Vdt;if(e===_F){e=e<<16|t.e_t().jM}return e>=0&&e<=31?this.s_t(e,s):e>=128&&e<=159?this.n_t(t,e,s):(e>=4096&&e<=4127?this.r_t(t,255&e):e>=4224&&e<=4255?this.h_t(t,255&e):e>=32&&e<=127?this.o_t(e):e>=160&&e<=255?this.a_t(e):e>=4128&&e<=4223?this.u_t(255&e):e>=4256&&e<=4351&&this.c_t(255&e),null)}o_t(t){this.l_t&&(127!==t?this.l_t.Cft(String.fromCharCode(t)):this.l_t.Cft("\u266a"))}a_t(t){this.l_t&&this.l_t.Cft(String.fromCharCode(t))}u_t(t){if(!this.l_t)return;if(void 0===gF[t])return void this.l_t.Cft("_");const i=gF[t];this.l_t.Cft(i)}c_t(t){this.l_t&&(160===t?this.l_t.Cft("[CC]"):this.l_t.Cft("_"))}s_t(t,i){if(!this.l_t)return null;const e=this.l_t;let s=null;switch(t){case cF:e.jft();break;case dF:e.zft()&&(s=e.edt(i,this.d_t)),e.Bft();break;case fF:e.zft()&&(s=e.edt(i,this.d_t)),e.Rft();break;case lF:e.zft()&&(s=e.edt(i,this.d_t)),e.bft(),e.Qft(0,0)}return s}n_t(t,i,e){if(i>=128&&i<=135){const t=7&i;this.f_t(t)}else{if(136===i){const i=t.e_t().jM;return this.__t(i,e)}if(137===i){const i=t.e_t().jM;this.g_t(i,e)}else{if(138===i){const i=t.e_t().jM;return this.w_t(i,e)}if(139===i){const i=t.e_t().jM;return this.A_t(i,e)}if(140===i){const i=t.e_t().jM;return this.v_t(i,e)}if(143===i)return this.tr(e);if(144===i)this.m_t(t);else if(145===i)this.p_t(t);else if(146===i)this.Qft(t);else if(151===i)this.y_t(t);else if(i>=152&&i<=159){const s=(15&i)-8;this.Mft(t,s,e)}}}return null}r_t(t,i){i>=8&&i<=15?t.Hm(1):i>=16&&i<=23?t.Hm(2):i>=24&&i<=31&&t.Hm(3)}h_t(t,i){i>=128&&i<=135?t.Hm(4):i>=136&&i<=143&&t.Hm(5)}f_t(t){this.M_t[t]&&(this.l_t=this.M_t[t])}*T_t(t){for(let i=0;i<8;i++){1==(1&t)&&this.M_t[i]&&(yield i),t>>=1}}__t(t,i){let e=null;for(const s of this.T_t(t)){const t=this.M_t[s];t.zft()&&(e=t.edt(i,this.d_t)),t.bft()}return e}g_t(t,i){for(const e of this.T_t(t)){const t=this.M_t[e];t.zft()||t.Uft(i),t.Xft()}}w_t(t,i){let e=null;for(const s of this.T_t(t)){const t=this.M_t[s];t.zft()&&(e=t.edt(i,this.d_t)),t.be()}return e}A_t(t,i){let e=null;for(const s of this.T_t(t)){const t=this.M_t[s];t.zft()?e=t.edt(i,this.d_t):t.Uft(i),t.wh()}return e}v_t(t,i){let e=null;for(const s of this.T_t(t)){const t=this.M_t[s];t.zft()&&(e=t.edt(i,this.d_t)),this.M_t[s]=void 0}return e}tr(t){const i=this.v_t(255,t);return this.Vb(),i}Vb(){this.l_t=void 0,this.M_t=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}m_t(t){t.Hm(1);const i=t.e_t().jM;if(!this.l_t)return;const e=(128&i)>0,s=(64&i)>0;this.l_t.Vft(e),this.l_t.Gft(s)}p_t(t){const i=t.e_t().jM,e=t.e_t().jM;if(t.Hm(1),!this.l_t)return;const s=3&i,n=(12&i)>>2,r=(48&i)>>4,h=3&e,o=(12&e)>>2,a=(48&e)>>4,u=this.N_t(r,n,s),c=this.N_t(a,o,h);this.l_t.Yft(u),this.l_t.Fft(c)}Qft(t){const i=t.e_t().jM,e=t.e_t().jM;if(!this.l_t)return;const s=15&i,n=63&e;this.l_t.Qft(s,n)}y_t(t){t.Hm(1),t.Hm(1);const i=t.e_t().jM;if(t.Hm(1),!this.l_t)return;const e=3&i;this.l_t.Hft(e)}Mft(t,i,e){const s=void 0!==this.M_t[i];if(!s){const t=new hF(i);t.Uft(e),this.M_t[i]=t}const n=t.e_t().jM,r=t.e_t().jM,h=t.e_t().jM,o=t.e_t().jM,a=t.e_t().jM,u=t.e_t().jM,c=(32&n)>0,l=127&r,d=(128&r)>0,f=h,_=1+(15&o),g=(240&o)>>4,w=1+(63&a);s&&0===(7&u)||this.M_t[i].Wft(),this.M_t[i].Mft(c,l,f,g,d,_,w),this.l_t=this.M_t[i]}N_t(t,i,e){const s={0:0,1:0,2:1,3:1};return wF[s[t]<<2|s[i]<<1|s[e]]}constructor(t){this.d_t=t,this.M_t=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.l_t=void 0}},cF=8,lF=12,dF=13,fF=14,_F=16,gF={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},wF=["black","blue","green","cyan","red","magenta","yellow","white"],AF=class{D_t(t){if(t.Rg===pi.elt){const i=63&t.jM;return this.I_t=2*i-1,void(this.S_t=[])}if(this.S_t&&(this.I_t>0&&(this.S_t.push(t),this.I_t--),0===this.I_t)){const t=new vF(this.S_t);this.E_t.push(t),this.S_t=null,this.I_t=0}}b_t(){return this.E_t}L_t(){this.E_t=[]}Vb(){this.E_t=[],this.S_t=[],this.I_t=0}constructor(){this.E_t=[],this.S_t=null,this.I_t=0}},vF=class{k_t(){return this.C_t<this.x_t.length}O_t(){return this.C_t}e_t(){if(!this.k_t())throw new $i(Ui.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.x_t[this.C_t++]}Hm(t){if(this.C_t+t>this.x_t.length)throw new $i(Ui.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this.C_t+=t}constructor(t){this.C_t=0,this.x_t=t}},mF=class{Vb(){this.j_t=0,this.z_t=[],this.P_t=[],this.B_t.Vb(),this.tr(),this.R_t.forEach((t=>{t.Vb()}))}tr(){this.U_t=0,this.Q_t=0,this.F_t.forEach((t=>{t.tr()}))}Y_t(t,i){if(t.olt){const e=t.clt,s=t.llt,n=t.Rg;n===pi.Zct||n===pi.Kct?this.z_t.push({Vdt:i,Rg:n,hft:e,Gdt:s,G_t:this.z_t.length}):this.V_t&&(this.P_t.push({Vdt:i,Rg:n,jM:e,G_t:this.P_t.length}),this.P_t.push({Vdt:i,Rg:pi.tlt,jM:s,G_t:this.P_t.length}))}}CQ(){const t=[];this.z_t.sort(((t,i)=>t.Vdt-i.Vdt||t.G_t-i.G_t)),this.P_t.sort(((t,i)=>t.Vdt-i.Vdt||t.G_t-i.G_t));for(const i of this.z_t){const e=this.W_t(i);e&&t.push(e)}for(const t of this.P_t)this.B_t.D_t(t);const i=this.B_t.b_t();for(const e of i){const i=this.H_t(e);t.push(...i)}return this.B_t.L_t(),this.z_t=[],this.P_t=[],t}W_t(t){const i=t.Rg;if(tF.fft(t.hft)){const e=t.hft>>3&1;0===i?this.U_t=e:this.Q_t=e}const e="CC"+(i<<1|(i?this.Q_t:this.U_t)+1),s=this.F_t.get(e);return 255===t.hft&&255===t.Gdt||!t.hft&&!t.Gdt||!this.q_t(t.hft)||!this.q_t(t.Gdt)?(++this.j_t>=45&&this.tr(),null):(this.j_t=0,t.hft&=127,t.Gdt&=127,t.hft||t.Gdt?tF.fft(t.hft)?s.rft(t):s.sft(t.Vdt,t.hft,t.Gdt):null)}H_t(t){const i=[];try{for(;t.k_t();){const e=t.e_t().jM;let s=(224&e)>>5;const n=31&e;if(7===s&&0!==n){s=63&t.e_t().jM}if(0!==s){if(!this.R_t.has(s)){const t=new uF(s);this.R_t.set(s,t)}const e=this.R_t.get(s),r=t.O_t();for(;t.O_t()-r<n;){const s=e.i_t(t);s&&i.push(s)}}}}catch(t){if(!(t instanceof $i&&t.code===Ui.SUBTITLE_PARSE_ERROR))throw t}return i}q_t(t){let i=0;for(;t;)i^=1&t,t>>=1;return 1===i}constructor(){this.V_t=!1,this.z_t=[],this.P_t=[],this.B_t=new AF,this.j_t=0,this.F_t=Td({CC1:new tF(0,0),CC2:new tF(0,1),CC3:new tF(1,0),CC4:new tF(1,1)}),this.U_t=0,this.Q_t=0,this.R_t=si(),this.tr()}},pF=class extends wn{constructor(t,i){super("X_t"),this.hdt=t,this.YT=i}},yF=ke.mD(.1),MF=class extends xd{Z_t(t,i){this.K_t.Y_t(t,i)}CQ(){const t=this.K_t.CQ();for(const i of t)this.Co(new pF(i.hdt,i.YT))}tr(){this.K_t.Vb()}gn(){this.Vo(),this.K_t.Vb()}constructor(){super(),this.K_t=new mF}},TF=class extends MF{J_t(t,i,e,s){const n=this.$_t(t,s);this.tgt(n,i,e),this.CQ()}$_t(t,i){const e=t.slice().sort(sj),s=this.igt;if(0===s.length)return e;if(0===e.length)return s;let n;const r=s[0].P6,h=s[s.length-1].P6,o=e[0].P6,a=s[0].Hrt===e[0].Hrt;if(h.bN(o).IN().DN(ke.mD(2.5*i))&&a)n=s.concat(e).sort(sj);else if(o.yN(r)){let t=0;for(;t<s.length&&s[t].P6.DN(o);)t++;let i=!1,r=!1;for(let n=t,h=0;n<s.length&&h<e.length;n++,h++)NF(s[n],e[h])?i=!0:r=!0;const h=i&&!r,a=i&&r;!i&&r?n=s.concat(e).sort(sj):h?n=s.slice(0,t).concat(e):(n=e,a&&this.tr())}else n=e,this.tr();return n}tgt(t,i,e){for(let s=0;s<t.length;s++){const n=t[s],r=n.P6.vN();if(!e&&i-r<yF.vN())return void(this.igt=t.slice(s));this.Z_t(n,r)}this.igt=[]}constructor(...t){super(...t),this.igt=[]}};function NF(t,i){return t.P6.oN(i.P6)&&t.Rg===i.Rg&&t.clt===i.clt&&t.llt===i.llt}var DF=class extends ci{egt(t){return this.sgt.get(t)}ngt(t){let i=this.sgt.get(t.B6);return i||(i=this.rgt(t),this.sgt.set(t.B6,i)),i}rgt(t){const i=[Ku.Ig],e=bQ(t.R6);let s,n=e?e.l:"";t.hgt&&(n="easy "+n,i.push(Ku.Cg)),s=t.kh?"CC "+t.kh:n?"CC "+n:"CC"+t.B6;const r=this.MS.yS(Mi.yI,s,s,t.R6,!1,Kc.CEA608,void 0,i);return this.tt(r),r}unt(t){const i=Lr.fp(ha(t));this.ogt=function(t){for(const i of t.Z){const t=jQ(i),e=i.Pp.qp.Kp.$p.ey;let s=Po(e,(t=>t.Rg===Zt.Lv));if(!s){const t=e.filter((t=>t.Rg===Zt.Kv)),i=Po(t,(t=>{var i;return(null==(i=t.iM)?void 0:i.Rg)===Zt.Lv}));i&&(s=i.iM)}if(!s)continue;const n=ck(ha(s.Fy.zm),new L),r=s.Gy;return Tt({},t,{Qp:i.np.Qp,Fy:dg(s.Fy.zm),ji:s.ji,Ti:s.Ti,dM:r&&r.dM,lM:r&&r.lM,YK:n.pZ,agt:n.yZ,GK:n.MZ,NZ:n.NZ[0],DZ:n.DZ[0]})}}(Po(i,zQ))}yut(t,i,e,s,n,r){var h;if(!this.ogt)return;if(!S(this.ugt)&&ku(this.ugt,i,1e-5))return;S(this.cgt)||ku(this.cgt,i,.1)||this.lgt.tr();const o=function(t,i,e,s,n){const r=[],h=i.filter(CQ),o=s(e);for(const i of h){const s=Po(i.Z,(t=>t.np.Qp===e.Qp));if(!s)continue;const h=s.np.gM||0,u=s.np.wM||0;let c=s.IM?s.IM.IM:Ce.ZERO;var a;const l=i.pM+(null!=(a=s.np.SM)?a:Ce.ZERO).toNumber();for(const a of s.DM){let s=l+(a.pM||0);for(const l of a.CM){const a=l.rp||u,d=new fk;d.RZ(t,s,s+a);const f=ke.xN(c,e.glt);d.XD=n(l,i,e,f,Ko(t,s,s+a)),r.push(d),s+=a,c=c.add(l.ct||h||o)}}}return r}(t,Lr.fp(ha(t)),this.ogt,kQ,OQ);var a;const u=null!=(a=null==(h=pd(o,(t=>t.XD.ct)))?void 0:h.XD.ct)?a:0,c=function(t){const i=[];for(const e of t)e.XD.Dlt&&i.push(...e.XD.Dlt),delete e.XD.Dlt;for(let t=0;t<i.length;t+=1)i[t].yM=t;return i}(o),l=ke.mD(s),d=[];for(const t of c)d.push(Tt({},t,{Hrt:n,P6:t.rlt.ST(l)}));this.lgt.J_t(d,e,r,u),this.ugt=i,this.cgt=e}tr(){return this.lgt.tr(),this.sgt.forEach((t=>{t.gn(),this.it(t),this.MS.bS(t)})),this.sgt.clear(),this.ogt=void 0,this.ugt=NaN,this.cgt=NaN,super.tr()}gn(){return this.lgt.fn("X_t",this.dgt),this.lgt.gn(),super.gn()}constructor(t){super(),this.ogt=void 0,this.ugt=NaN,this.cgt=NaN,this.dgt=t=>{const i=this.ngt({B6:t.hdt,R6:""}),e=t.YT;for(const t of i.L.og)e.GT<t.GT&&e.VT>t.GT?e.VT=t.GT:e.GT>t.GT&&t.VT>e.GT?t.VT=e.GT:e.GT===t.GT&&(e.VT=t.VT);i.SS(e)},this.MS=t,this.sgt=si(),this.lgt=new TF,this.lgt.yn("X_t",this.dgt)}},IF=/(.*)=(.*)/,SF=/(.*):(.*)/;function EF(t){if(!t)return[];const i=[],e=t.trim().split(";");for(const t of e){const e=t.match(IF);if(e){const[,t,s]=e;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(SF)){const[,i,e]=t.match(SF);switch(i){case"lang":n=e;break;case"er":r=Boolean(Number(e))}}i.push({B6:Number(t),R6:n,hgt:r})}}return i}var bF={1:1,2:3,3:2,4:4},LF="urn:scte:dash:cc:cea-608:2015",kF="urn:scte:dash:cc:cea-708:2015";var CF=class extends yo{fa(){return new xF(this.Hrt&&this.Hrt.va)}constructor(t,i,e){super(qo.J_),this.Hrt=t,this.Vot=i,this.fgt=e}},xF=class extends wn{constructor(t){super("activequalitychanged"),this.quality=t}},OF=[l.jh,he.H_,l.Sw],jF=class extends xd{_gt(t){const i=this.Oct.hht;for(const e of i.Lt.irt)if(i.wat.dat(t,e))return e}gn(){this.Vo(),this.sA.fn(OF,this.ggt)}constructor(t,i){super(),this.ggt=t=>{const i=this.wgt,e=this._gt(t.currentTime)||this.Oct.eht;e&&i!==e&&(this.wgt=e,e.Hrt&&this.Co(new CF(e.Hrt,null==e?void 0:e.va,null==i?void 0:i.va)))},this.sA=t,this.sA.yn(OF,this.ggt),this.Oct=i}};function zF(t,i,e){const s=new Dh(ha(t),new L),n=dt.ep(s,Zt.Av);if(!n)return;const r=dt.Zm(n.zm),h=Po(r,(t=>t.Rg===Zt.mv)),o=Po(r,(t=>t.Rg===Zt.dm));if(!h)return;const a=dt.ep(h.zm,Zt.yv);if(!a)return;const u=dt.ep(a.zm,Zt.Nv);if(!u)return;const c=dt.ep(u.zm,Zt.Dv);if(!c)return;const l=dt.Zm(c.zm),d=Po(l,(t=>t.Rg===Zt.Iv));if(!d)return;const f=dt.cp(d.zm,Zt.Iv,!1),_=new Dh(ha(f.zm),new L);_.Hm(4);const g=dt.Zm(_),w=[];for(const t of g){if(t.Rg===Zt.Zv||t.Rg===Zt.Kv)return;t.Rg===Zt.Lv?w.push({Agt:t,vgt:Zt.Kv}):t.Rg===Zt.Yv&&w.push({Agt:t,vgt:Zt.Zv})}if(!function(t,i){return void 0===t&&void 0!==i&&i.length>0}(o,i)&&0===w.length)return;let A=Dt(t);const v=Po(r,(t=>t.Rg===Zt.Ev)),m=v?dt.ep(v.zm,Zt.bv):void 0,p=m?function(t){const i=t.zm.Em();return i.Hm(4),i.Hm(4),i.Um()}(m):1,y=Po(l,(t=>t.Rg===Zt.Sv));y&&function(t,i,e){const s=RF(ha(t),i),n=dt.ip(s,new L),r=n.zm;r.Hm(4);const h=r.Um();for(let t=0;t<h;t++){r.Hm(4),r.Hm(4);const t=r.Pm.Em(),i=r.Um();Pu(r.zm,t,i+e)}}(A,y,w.length),m&&function(t,i,e){const s=RF(ha(t),i),n=dt.ip(s,new L),r=n.zm;r.Hm(4),r.Hm(4),Pu(r.zm,r.Pm,e)}(A,m,1),A=function(t,i,e,s){if(e||!s)return t;let n=t;for(const t of s)n=PF(n,i,new j(t));return n}(A,n,o,i);const M=[n,h,a,u,c,d];for(let t=w.length-1;t>=0;t--){const i=w[t];A=BF(A,i.Agt,d,M,i.vgt,e)}return{mgt:A,pgt:{ygt:w.length,_M:p}}}function PF(t,i,e){const s=y_(t,e,i.zm.zm.byteOffset+i.zm.zm.byteLength);return UF(RF(ha(s),i),e.byteLength),s}function BF(t,i,e,s,n,r){const h=function(t,i,e){0;const s=t.zm.zm,n=VF(),r=new j(s.byteLength+n.byteLength),h=ha(r);r.set(Kn(s),0),UF(h,n.byteLength),ig(h,new L(qF),i),r.set(n,s.byteLength),ig(h,new L(s.byteLength+WF),t.Rg),e&&q_(h,new L(s.byteLength+HF),e);return r}(i,n,r),o=y_(t,h,i.zm.zm.byteOffset),a=ha(o);!function(t,i){const e=dt.ip(t,new L),s=dt.cp(e.zm,Zt.Iv,!1),n=ha(s.zm),r=n.getUint32(0);n.setUint32(0,r+i)}(RF(a,e),1);for(const t of s)UF(RF(a,t),h.byteLength);return o}function RF(t,i){const e=i.zm.zm.byteOffset;return fe(t,e,e+i.zm.zm.byteLength)}function UF(t,i){const e=new L,s=oo(t,e);if(0===s);else if(1===s){e.Im(4);const s=cn(t,e.Em());K_(t,e,s.add(i))}else e.Sm(0),Pu(t,e,s+i)}var QF=class extends ic{start(t){this.UH=t}transform(t){this.dX(t),this.Mgt()}flush(){this._X(),this.Mgt()}MX(t){return t===Zt.Jv}NX(t){let i=Dt(Kn(t.zm.zm));const e=dt.ip(ha(i),new L);i=FF(i,e,this.Tgt),this.Ngt.push(i)}IX(t){this.Ngt.push(t)}Mgt(){for(const t of function(t){if(t.length<2)return t;const i=[];let{buffer:e,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const h=t[r];e===h.buffer&&s+n===h.byteOffset?n+=h.byteLength:(i.push(new j(e,s,n)),({buffer:e,byteOffset:s,byteLength:n}=h))}return i.push(new j(e,s,n)),i}(this.Ngt))this.UH.enqueue(t);No(this.Ngt)}constructor(t){super(),this.Ngt=[],this.Tgt=t}};function FF(t,i,e){let s=t;const n=dt.Zm(i.zm);for(let t=n.length-1;t>=0;t--){const r=n[t];r.Rg===Zt.tm&&(s=YF(s,r,i,e))}return s}function YF(t,i,e,s){const n=RF(ha(t),i),r=dt.ip(n,new L),h=dt.Zm(r.zm),o=Po(h,(t=>t.Rg===Zt.im));if(!o)return t;const a=o.zm,u=a.Pm.Em(),c=a.Um(),{flags:l}=_u(c);a.Hm(4),l.Cm(T.BASE_DATA_OFFSET_PRESENT)&&a.Hm(8);const d=a.Pm.Em();if(l.Cm(T.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const i=oo(a.zm,d);return Pu(a.zm,a.Pm,i+s.ygt),t}{Pu(a.zm,u,c|T.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new j(4);ha(n).setUint32(0,s._M+s.ygt);const r=a.zm.byteOffset+d.Ku;for(const t of h.filter((t=>t.Rg===Zt.nm)))GF(t,n.byteLength);for(const s of[o,i,e])UF(RF(ha(t),s),n.byteLength);return y_(t,n,r)}}function GF(t,i){const e=t.zm,s=e.Um(),{flags:n}=_u(s);if(e.Hm(4),n.Cm(Xe.DATA_OFFSET_PRESENT)){const t=e.Em().Um();Pu(e.zm,e.Pm,t+i)}}var VF=Zc((()=>new j([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),WF=16,HF=64,qF=4,XF=[ut.ha,l.Mw,l.Tw,l.Dw,l.Yg],ZF=class extends xd{get Fnt(){return this.Ynt}get o(){return this.CT}get e$(){return this.s$}get nt(){return this.Dgt}get zct(){return function(t){const i=29.97,e=1024,s=44100;return t===Vt.ym?s/e:i}(this.s$)}get jct(){return 1/this.zct}get Rt(){return Boolean(this.Ynt&&this.Ynt.Rt)}get Rq(){const t=this.Oct?this.Oct.hht.Rq.oat:Ai.SB();return this.Igt().cB(t)}get wf(){let t=this.Sgt();const i=this.Egt;return void 0!==i&&t.nB().gr(i)&&(t=t.cB(Ai.DB(i))),t}get iat(){return QR(this.Sgt(),this.Rq.cB(this.bgt)).uB(2*this.jct)}get bgt(){const t=this.Egt;if(t&&isFinite(t)){const i=this.Lgt.jn;if(isFinite(i)&&t<i)return new Ai([t,i],[!1,!0])}return Ai.SB()}get t_(){const t=this.Ynt;if(!t)return Ai.DB(0);const i=t.Hot.Pct,e=t.Hot.Bct;if(void 0===e||void 0===i)return Ai.DB(0);const s=e;let n=i>=t.Hot.Rat.jn?_.max(i,this.jn):i;return n=_.max(s,n),Ai.IB(s,n).nB()}get jz(){return this.iat.lA(this.Mf)}get rat(){return this.Lgt.rat}get Mf(){return this.sA.Mf}get Cn(){return this.Ynt?this.Ynt.Hot.Rat.Cn:NaN}get jn(){const t=this.kgt(),i=this.Egt;return void 0===t?NaN:void 0!==i?i:t}kgt(){var t;return null==(t=this.Ynt)?void 0:t.Hot.Rat.jn}get Ti(){return this.Lgt.Ti}get ji(){return this.Lgt.ji}get Cgt(){return this.Egt}vht(){return void 0!==this.Oct&&this.Oct.vht}nat(){if(void 0===this.Egt)return!1;const t=this.Sgt().nB(),i=t.fB(this.Egt);return!(i<0)&&t.Cn(i)!==this.Egt}t$(){const t=this.Lgt.rat,i=this.Sgt().Sn(t);this.Egt=i.U>0?i.jn(i.U-1):0;const e=t.jn(0);isFinite(e)&&this.Egt<e&&this.Qq(this.Egt,e),this.xgt()}async yut(t,i,e,s){const n=e.lnt.UD,r=this.Ogt(t,i,e,n,s),h=this.jgt(t,i,e,n,s),[o]=await Xc([h,r]);return o}async Ogt(t,i,e,s,n){if(!vs(e.CF))return;let r;if(t.Rg===ji.VI){const i=t.zm.Aot(),e=await i.cj(n);r=new j(e)}else r=new j(t.zm.Rnt);const h=[];if(void 0!==this.zgt&&(this.zgt.yut(r,i.GT,s),h.push(this.zgt)),void 0!==this.Pgt){const t=e.Bat(i);this.Pgt.yut(r,i.GT,i.VT,s,e.Hrt,t),h.push(this.Pgt)}Uv(this.wf,h)}async jgt(t,i,e,s,n){var r;let h;if(Bo(n),t.Rg===ji.VI){let i=t.zm.dV;this.Bgt&&(i=function(t,i){return t.pipeThrough(new qa(new QF(i)))}(i,this.Bgt)),h={Rg:ji.VI,zm:i}}else{let i=new j(t.zm.Rnt);this.Bgt&&(i=function(t,i){let e=Dt(t);const s=new Dh(ha(e),new L),n=dt.Zm(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.Rg===Zt.Jv&&(e=FF(e,s,i))}return e}(i,this.Bgt)),h={Rg:ji.aq,zm:i}}const o={n9:i.GT,ct:i.ct,UD:s,GK:null==(r=e.Hrt)?void 0:r.Mg},a=this.Kst.wf;await this.Rgt(),await this.Kst._J(h,o,n);return function(t,i,e,s){let n,r,h=i.dB(t.nB());h=h.dB(e.dB(i)),!1;0===h.U?(n=s.VT,r=n):(n=h.Cn(0),r=h.jn(0));return{qut:n,Xut:r}}(a,this.Kst.wf,this.Kst.n$,i)}async unt(t,i,e){var s;Bo(e),this.Pgt&&this.Pgt.unt(new j(t.Rnt));let n=new j(t.Rnt);if(this.Ugt(i)){const t=this.Lgt.Qgt;let i,e=[];t&&(e=rs(t.Fgt,(t=>t.Mz)),i=t.Ygt.zO?eI(t.Ygt.zO):void 0);const s=zF(n,e,i);s?(this.Bgt=s.pgt,n=s.mgt):this.Bgt=void 0}const r={Rg:ji.aq,zm:n};await this.Rgt(),await this.Kst.AJ(r,{GK:null==(s=i.Hrt)?void 0:s.Mg},e)}Tut(t,i,e){return this.Kst.ET(t,i,e)}Qq(t,i){this.Kst.o$(t,i)}Fq(t,i){this.Kst.a$(t,i)}Sgt(){return this.Kst?this.Kst.wf:Ai.SB()}Igt(){return this.Kst?this.Kst.n$:Ai.SB()}Ggt(){return this.Kst?this.Kst.ET(0,1/0):Promise.resolve()}Vgt(){return this.Kst&&(this.Kst.fn(Z.hq,this.Ds),this.Kst=void 0),Promise.resolve()}async Wgt(t){var i;const e=xU.wut(null!=(i=t.Mct)?i:t.irt,this.rut).CF;this.Kst||(this.Kst=this.Lgt.Hgt(e),this.Kst.yn(Z.hq,this.Ds),this._ut=new iQ(this.Kst)),await this.Rgt()}$n(t,i){const e=new na;i&&e.Xd(i),this.ES.qd(),this.ES=e;const s=this.qgt(t,this.Xgt,e.Wd);return this.Xgt=s,s}Zgt(t){if(gd(this.Kgt,Kc.CEA608))return;const i=t.Hot.cct;if(function(t){return t.some((t=>t.yst===LF||t.yst===kF))}(i)){this.Pgt=new DF(this.MS);const t=function(t){const i=[];for(const e of t)if(e.yst===LF){const t=rj(e.jM);for(const e of t)i.push(e)}else if(e.yst===kF){const t=EF(e.jM);for(const e of t)if(e.B6<=4){const t=bF[e.B6];i.push(Tt({},e,{B6:t}))}}return i}(i);for(const i of t)this.Pgt.ngt(i);this.Dgt.Dz(this.Pgt.Z)}}async qgt(t,i,e){Bo(e),i&&await i.catch(qt),this.Ynt===t&&this.Jgt||(await this.$gt(),Bo(e),await this.Ggt(),Bo(e),t&&await this.TS(t))}async $gt(){const t=this.Ynt;this.Ynt=void 0,this.Jgt=!1,this.Egt=void 0,t&&(t.fn(qo.rg,this.twt),t.Ect(!1),t.fn(qo.NO_QUALITY,this.Ds)),this.iwt&&(this.iwt.gn(),this.iwt=void 0),this.Oct&&(await this.Oct.gn(),this.Oct=void 0),this.Pgt&&(this.Dgt.Ez(this.Pgt.Z),await this.Pgt.gn())}async TS(t){this.Ynt=t,this.Zgt(t),t.yn(qo.rg,this.twt),t.yn(qo.NO_QUALITY,this.Ds),await this.Wgt(t),this.Oct=this.ewt(t),this.Oct.yn(XF,this.Ds),this.Oct.yn("qrt",this.xgt),this.Oct.aht=t.Mct,this.iwt=new jF(this.sA,this.Oct),this.iwt.yn(qo.J_,this.Act),t.Ect(!0),this.Jgt=!0}ewt(t){return new $U(this,this.sA,this.sA,this.NS,this.PB,this.act,this.pot,this.lut,this.rut,this._ut,this.Rut).h9(t)}async tr(t){this.ES.qd(),this.Xgt&&(await this.Xgt.catch(qt),this.Xgt=void 0),await this.$gt(),t||await this.Ggt(),await this.Vgt()}async swt(){await this.$gt()}nwt(t){const i=t.Lt.Mct;if(void 0===i)return this.rwt(t);if(i.some((t=>this._ut.gq(t))))return this.rwt(t);this.Co(new wn("hwt"))}rwt(t){this.Oct&&this.Ynt&&this.Ynt===t.Lt&&(this.Oct.aht=this.Ynt.Mct)}async Tht(t){this.Oct&&await this.Oct.Tht(t)}async Dht(t){this.Oct&&await this.Oct.Dht(t)}UW(){const t=this.wf.NB;return this.PB.UW(t)}Rgt(){const t=this.Lgt.rat,i=_.max(0,t.Cn(0)-.1),e=t.jn(0)+.01;return this.Kst.kJ(i,e)}Ugt(t){if(!vs(t.CF))return!1;if(this.Lgt.Y4)return!0;return void 0!==this.Lgt.Qgt}async gn(t){this.Vo();try{await this.tr(t),await this.swt()}catch(t){}}constructor(t,i,e,s,n,r,h,o,a,u,c,l){super(),this.Ynt=void 0,this.Oct=void 0,this.Jgt=!1,this.ES=new na,this.Xgt=void 0,this.Egt=void 0,this.Kst=void 0,this._ut=new eQ,this.Bgt=void 0,this.Pgt=void 0,this.Dgt=new gn([]),this.xgt=()=>{!this.vht()&&this.nat()&&this.Lgt.xgt()},this.Act=t=>{this.Ynt.Act(t),this.Co(new yQ(t.Vot,t.fgt))},this.twt=t=>{this.nwt(t)},this.CT=function(){const t=vQ;return vQ+=1,t}(),this.s$=t,this.NS=s,this.PB=n,this.Lgt=i,this.sA=e,this.pot=r,this.MS=h,this.zgt=o,this.lut=a,this.rut=a?Ug(t,a):void 0,this.Rut=u,this.Kgt=c,this.act=l}};var KF,JF=class extends xd{bW(t,i){return this.owt(t,i)}async owt(t,i){for(const i of t)this.awt(i);await this.$n(i);for(const t of this.cwt.uwt)t.Rg===Vt.Ru&&(t.irt&&0!==t.irt.length?await this.lwt.TS(t):this.Co(new wQ("No supported representation found in the AdaptationSet with mimetype : "+t.Rg)))}get Mg(){return this.xT}get ct(){return this.sA.ct}dwt(t){return new ZF(t,this,this.sA,this.NS,this.PB,this.pot,this.MS,this.zgt,this.fwt,this.Rut,this.Kgt,this.act)}vht(){return this.Wct.some((t=>t.vht()))}nat(){return 0!==this.Wct.length&&this.Wct.every((t=>t.nat()))}xgt(){this._wt()&&this.Co(new AQ)}Hgt(t){if(At(t,"audio")){if(this.zJ.V$)return this.zJ.V$}else if(At(t,"video")&&this.zJ.W$)return this.zJ.W$;throw new g("Cannot allocate source buffer for mime type "+t)}gwt(t){t.yn([ut.ha,l.Aw,l.Mw,l.Tw,l.Dw,l.Yg],this.Ds),t.yn(Z.hq,this.wwt),t.yn("hwt",this.Ds)}get Rt(){return this.Wct.some((t=>t.Rt))}async Awt(t){await Promise.all(this.Wct.map((i=>i.gn(t)))),No(this.Wct)}get ht(){return this.dT}get wf(){if(0===this.Wct.length)return Ai.SB();const t=this.Wct.map((t=>t.wf));let i=Ai.IB(0,1/0);for(const e of t)i=i.Sn(e);if(0===i.U)return i;if(this.nat()){const t=i.Sn(this.rat);if(0===t.U)return i;const e=t.jn(t.U-1);let s=0;for(const t of this.Wct)s=_.max(s,t.Cgt);e<=s&&(i=i.cB(new Ai([e,s],[!0,!0])))}return i}get Y4(){return this.sA.Y4}get Mf(){return this.sA.Mf}get Qgt(){return this.vwt}get jn(){if(this.mwt){const t=this.ct;if(!S(t)&&t!==vu)return t}if(!this.Wct.length)return NaN;let t=0;for(const i of this.Wct)t=_.max(t,i.jn);return t}get mwt(){const t=this.cwt.Jut;if(t.Rg===lo.Hx)return!1;const i=t.pwt;return 0!==i.length&&this.cwt===i[i.length-1]}get t_(){if(!this.Wct.length)return Ai.SB();let t=new Ai([0,1/0]);for(const i of this.Wct)t=t.Sn(i.t_);if(t.U>0&&this.mwt&&isFinite(this.ct)){const i=this.ct,e=t.jn(t.U-1);i>e&&(t=t.cB(Ai.IB(e,i).nB()))}return t}get yc(){return this.cwt}get nt(){return this.Dl}get rt(){return this._T}get ji(){return this.vu.ji}get Ti(){return this.vu.Ti}get jz(){const t=this.Mf,i=this.wf,e=i.fB(t);if(-1!==e)return{Cn:i.Cn(e),jn:i.jn(e)}}get rat(){const t=this.cwt.Cn,i=this.mwt?1/0:this.cwt.jn;return Ai.IB(t,i)}_wt(){if(this.vht())return!1;if(!this.nat())return!1;const t=this.wf;if(0===t.U)return!1;const i=this.Mf;if(this.mwt)return t.Cn(t.U-1)<=i;{const e=t.Sn(this.rat);if(0===e.U)return!0;const s=e.Cn(e.U-1),n=e.jn(e.U-1)+.1;return s<=i&&i<=n}}get ywt(){return this.Mwt}async Tht(t){this.Mwt||(this.Mwt=!0,await Promise.all(this.Wct.map((i=>i.Tht(t)))))}async Dht(t){this.Mwt&&(this.Mwt=!1,await Promise.all(this.Wct.map((i=>i.Dht(t)))))}async gn(t){this.sA.fn(l.Lw,this.Twt),this.Vo(),this.cwt.fn(Tc.Grt,this.Ds),this.Nwt.qd(),this.Xgt&&(await this.Xgt.catch(qt),this.Xgt=void 0),await this.Awt(t),await this.lwt.gn(),this.dT.gn(),this._T.gn(),this.Dl.gn(),this.Dwt()}awt(t){this.Iwt.push(t),t.yn("Swt",this.Ewt);const i=t.Rg===Vt.ym?this.dT:this._T;for(const e of t.Z)i.tt(e)}bwt(t){const i=t.Rg===Vt.ym?this.dT:this._T;for(const e of t.Z)i.it(e),e.gn();t.gn(),To(this.Iwt,t)}Dwt(){for(let t=this.Iwt.length-1;t>=0;t--)this.bwt(this.Iwt[t])}get Lwt(){return this.Iwt.map((t=>t.Fnt)).filter(Yt)}get kwt(){return this.Wct.map((t=>t.Fnt)).filter(Yt)}$n(t,i){return this.Nwt.qd(),this.Nwt=new na,i&&this.Nwt.Xd(i),this.Xgt=rn(this.mit(t,this.Xgt,this.Nwt.Wd),this.Nwt).catch(this.Cwt),this.Xgt}async mit(t,i,e){i&&await i.catch(qt),Bo(e);const s=[],n=this.Wct.slice(),r=t.slice();No(this.Wct);for(const t of n){const i=t.Fnt;i&&gd(r,i)?(this.Wct.push(t),s.push(t.$n(i,e)),To(r,i)):(this.Dl.Ez(t.nt),await t.gn(),Bo(e))}for(const t of r){const i=this.dwt(t.dht);this.Dl.Dz(i.nt),this.Wct.push(i),this.gwt(i),s.push(i.$n(t,e))}await Promise.all(s)}async Aq(t,i,e){this.zJ!==e&&(this.zJ=e,await this.Awt(!1)),await this.$n(t),this.vwt=i}constructor(t,i,e,s,n,r,h,o,a,u,c,d,f){super(),this.dT=new Ae,this._T=new Ae,this.Iwt=[],this.Nwt=new na,this.Mwt=!0,this.Wct=[],this.Xgt=void 0,this.wwt=uo((()=>{this.Co(new B(this.Mf))}),350),this.Ewt=t=>{const i=t.xwt.Fnt;if(i)for(const t of this.Iwt){var e;t.Fnt&&t.Fnt!==i&&t.Rg===(null==(e=i.vct)?void 0:e.Rg)&&(t.fn("Swt",this.Ewt),t.Fnt.Rt=!1,t.yn("Swt",this.Ewt))}this.Ds(t)},this.Cwt=t=>{Ho(t)||this.Co(new Dr(new $i(Ui.MEDIA_LOAD_ERROR,t.message,t)))},this.Twt=t=>{const i=t.y4;if(i)for(const t of this.kwt){if((t.Hot.pst||[]).some((t=>t.zO&&Qi(He(i),eI(t.zO)))))return void this.Co(new Mn(new Qr(Ui.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions")))}},this.NS=e,this.PB=s,this.pot=n,this.sA=t,this.xT=du(),this.Iwt=[],this.cwt=h,this.vwt=o,this.MS=u,this.lwt=new gQ(t,e,s,n,u),this.Dl=new gn([this.lwt.nt]),this.Rut=d,this.Kgt=f,this.cwt.yn(Tc.Grt,this.Ds),this.vu=a,this.zJ=i,this.act=r.lowLatency,this.zgt=c,this.fwt=r.abr,this.sA.yn(l.Lw,this.Twt)}},$F=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,tY=class t{static fp(i){const e=i.match($F);if(!e)throw new g("The given value could not be parsed as a valid DateTimeInterval");const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,h=Number(e[4])||0,o=Number(e[5])||0,a=Number(e[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*h+60*o+a)}get wlt(){return ke.mD(this.Owt,1e3)}jwt(){return this.Owt}zwt(){return 1e3*this.Owt}constructor(t){this.Owt=t}};!function(t){t.Pwt="progressive",t.Bwt="interlaced",t.rT="unknown"}(KF||(KF={}));var iY=class{vN(){return this.Rwt/this.Uwt}constructor(t,i){this.Rwt=t,this.Uwt=i}},eY=/^(?:true|false)$/i,sY=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function Br(t){if(void 0!==t)return tY.fp(t)}function nY(t){if(void 0===t)return;const i=t.match(sY);if(!i)throw new g("The given value could not be parsed as a valid Date");const[,e,s,n,r,h,o,a,u,c,l,d]=i,f=("-"===e?-1:1)*Number(s),w=Number(n)-1,A=Number(r),v=Number(h);let m=Number(o);const p=Number(a),y=Number("0."+(u||"")),M=_.round(1e3*y);if(c){m-=("-"===c?-1:1)*(60*Number(l)+Number(d))}const T=new Date(Date.UTC(f,w,A,v,m,p,M));if(S(T.getTime()))throw new g("The given value could not be parsed as a valid Date");return T}function rY(t){if(!t)return;const i=/(\d+)-(\d+)/.exec(t);return i?[aa(i[1]),aa(i[2])]:void 0}function hY(t){if(void 0!==t){if(!S(Number(t)))try{return Ce.fromString(t,!0)}catch(t){}throw new g("The given value could not be parsed as a valid unsigned long")}}function aa(t){if(void 0===t)return;const i=Number(t);if(!S(i))return i;throw new g("The given value could not be parsed as a valid Number")}function oY(t){if(void 0===t)return;const i=t.split("/"),e=Number(i[0]),s=Number(i[1]||1);if(!S(e)&&!S(s))return new iY(e,s);throw new g("The given value could not be parsed as a valid frame rate")}function aY(t){if(void 0!==t){if(eY.test(t))return"true"===t.toLowerCase();if(!S(x(t)))return Boolean(x(t));throw new g("The given value could not be parsed as a valid Boolean.")}}function uY(t){return{zu:t.sj,Qwt:aY(t.vI("availabilityTimeComplete")),Fwt:aa(t.vI("availabilityTimeOffset"))}}function cY(t){return t.map(uY)}function lY(t){const i=yY(t),e=function(t,i,e,s){let n=t.AI(e,i);return void 0===n&&(n=t.vI(s+":"+i)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=nv(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=Sa(n.sj)),!s){const i=nv(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==i&&(s=function(t){const i=it(t.sj),e=new j([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=i.length,n=12+e.length+4+s,r=new ArrayBuffer(n),h=new j(r),o=new DataView(r),a=new L;Pu(o,a,n),Pu(o,a,1886614376),Pu(o,a,0),q_(o,a,e),Pu(o,a,s),q_(o,a,i),!1;return h.buffer}(i))}return{zO:e,Ywt:s,yst:i.yst,jM:i.jM}}function dY(t){return{Gwt:t.vI("sourceURL"),Bht:rY(t.vI("range"))}}function fY(t,i){const e=t.vI("d"),s=t.vI("t"),n=aa(t.vI("r"));i.push({ct:e,GT:s,Vwt:n})}function _Y(t){return{Tot:t.vI("index"),Wwt:rY(t.vI("indexRange")),Pp:t.vI("media"),Hwt:rY(t.vI("mediaRange"))}}function gY(t){const i=AY(t),e=function(t){const i=t.map(_Y);return i.length>0?i:void 0}(t.dI("SegmentURL"));return Tt({},i,{qwt:e,Xwt:t.vI("xlink:href"),Zwt:t.vI("xlink:actuate")})}function wY(t){const i=aY(t.vI("availabilityTimeComplete")),e=aa(t.vI("availabilityTimeOffset")),s=rY(t.vI("indexRange")),n=aY(t.vI("indexRangeExact")),r=t.dI("Initialization");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.lj+" element can not have more than one Initialization element.");const h=1===r.length?dY(r[0]):void 0,o=hY(t.vI("presentationTimeOffset")),a=t.dI("RepresentationIndex");if(a.length>1)throw new g("The provided MPEG-DASH document's "+t.lj+" element can not have more than one RepresentationIndex element.");return{Qwt:i,Fwt:e,Wwt:s,Kwt:n,Jwt:h,$wt:o,tAt:1===a.length?dY(a[0]):void 0,iAt:Br(t.vI("timeShiftBufferDepth")),kp:aa(t.vI("timescale"))}}function AY(t){const i=wY(t),e=t.dI("BitstreamSwitching"),s=e.length>0?dY(e[0]):void 0,n=aa(t.vI("duration")),r=t.dI("SegmentTimeline");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.lj+" element can not have more than one SegmentTimeline element.");const h=1===r.length?function(t){const i=[],e=t.dI("S");for(const t of e)fY(t,i);return i}(r[0]):void 0;return Tt({},i,{eAt:s,ct:n,lnt:h,sAt:aa(t.vI("startNumber")),nAt:aa(t.vI("endNumber"))})}function vY(t){return{rAt:function(t){if(!t)return;const i=t.split(/\s/);return i.length>1?(i.length=2,i.map(aa)):1===i.length?i.map(aa)[0]:void 0}(t.vI("audioSamplingRate")),mst:t.vI("codecs"),hAt:aY(t.vI("codingDependency")),pst:function(t){if(0!==t.length)return t.map(lY)}(t.dI("ContentProtection")),oAt:function(t){return t.map(MY)}(t.dI("EssentialProperty")),aAt:function(t){return t.map(TY)}(t.dI("SupplementalProperty")),zct:oY(t.vI("frameRate")),Ti:aa(t.vI("height")),uAt:aa(t.vI("maxPlayoutRate")),cAt:aa(t.vI("maximumSAPPeriod")),CF:t.vI("mimeType"),lAt:t.vI("profiles"),dAt:t.vI("sar"),fAt:function(t){switch(t){case KF.Pwt:case KF.Bwt:case KF.rT:return t;default:return}}(t.vI("scanType")),_At:t.vI("segmentProfiles"),gAt:aa(t.vI("startWithSAP")),ji:aa(t.vI("width"))}}function mY(t){const i=cY(t.dI("BaseURL")),e=t.dI("SegmentBase");if(e.length>1)throw new g("The provided MPEG-DASH document's "+t._I+" element can not have more than one SegmentBase element.");const s=1===e.length?wY(e[0]):void 0,n=function(t){const i=t.map(gY);return i.length>0?i:void 0}(t.dI("SegmentList")),r=t.dI("SegmentTemplate");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t._I+" element can not have more than one SegmentTemplate element.");const h=1===r.length?function(t){return Tt({},AY(t),{wAt:t.vI("bitstreamSwitching"),AAt:t.vI("index"),vAt:t.vI("initialization"),mAt:t.vI("media")})}(r[0]):void 0;return{pAt:i,yAt:s,MAt:n,TAt:h}}function pY(t){const i=vY(t),e=mY(t),s=aa(t.vI("bandwidth")),n=t.vI("dependencyId"),r=t.vI("id"),h=t.vI("mediaStreamStructureId"),o=aa(t.vI("qualityRanking"));if(t.dI("SegmentBase").length>1)throw new g("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return Tt({},i,e,{wz:s,NAt:n,o:r,DAt:h,IAt:o})}function yY(t){return{yst:t.vI("schemeIdUri"),jM:t.vI("value")}}function MY(t){return yY(t)}function TY(t){return yY(t)}function NY(t){return yY(t)}function DY(t){return yY(t)}function IY(t){var i;const e=vY(t),s=mY(t),n=function(t){return t.map(DY)}(t.dI("Accessibility")),r=aY(t.vI("bitstreamSwitching")),h=t.vI("contentType"),o=aa(t.vI("group")),a=aa(t.vI("id")),u=(null==(i=t.dI("Label")[0])?void 0:i.sj)||"",c=t.vI("lang"),l=aa(t.vI("maxBandwidth")),d=oY(t.vI("maxFrameRate")),f=aa(t.vI("maxHeight")),_=aa(t.vI("maxWidth")),w=aa(t.vI("minBandwidth")),A=oY(t.vI("minFrameRate")),v=aa(t.vI("minHeight")),m=aa(t.vI("minWidth")),p=t.vI("par"),y=function(t){return t.map(pY)}(t.dI("Representation"));if(0===y.length)throw new g("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const M=function(t){return t.map(NY)}(t.dI("Role")),T=aY(t.vI("segmentAlignment"))||!1,N=aa(t.vI("selectionPriority")),D=N||1,I=aY(t.vI("subsegmentAlignment"))||!1;let S;try{S=aa(t.vI("subsegmentStartsWithSAP"))}catch(t){}return Tt({},e,s,{cct:n,eAt:r,qz:h,vct:o,o:a,kh:u,gs:c,SAt:l,EAt:d,bAt:f,LAt:_,kAt:w,CAt:A,xAt:v,OAt:m,jAt:p,irt:y,Qct:M,zAt:T,LP:D,PAt:I,BAt:S,RAt:t.vI("xlink:actuate")||"onRequest",UAt:t.vI("xlink:href")})}function SY(t){const i=hY(t.vI("presentationTime"))||Ce.ZERO,e=hY(t.vI("duration")),s=aa(t.vI("id")),n=function(t){const i=t.fI,e={};for(let t=0;t<i.length;t++)e[i[t].l]=i[t].jM;return e}(t),r=t.sj;return{zM:i,ct:e,o:s,fI:n,zm:""!==r.trim()?r:t.vI("messageData")||""}}function EY(t){return{UAt:t.vI("xlink:href"),RAt:t.vI("xlink:actuate"),yst:t.vI("schemeIdUri"),jM:t.vI("value"),kp:aa(t.vI("timescale")),$wt:hY(t.vI("presentationTimeOffset")),xF:t.dI("Event").map(SY)}}function bY(t){const i=mY(t),e=t.dI("AssetIdentifier");if(e.length>1)throw new g("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===e.length?function(t){return yY(t)}(e[0]):void 0,n=function(t){return t.map(IY)}(t.dI("AdaptationSet")),r=aY(t.vI("bitstreamSwitching")),h=Br(t.vI("duration")),o=function(t){return t.map(EY)}(t.dI("EventStream")),a=t.vI("id"),u=Br(t.vI("start")),c=(t.dI("Subset"),t.vI("xlink:href"));return Tt({},i,{Wnt:n,QAt:s,eAt:r,ct:h,FAt:o,o:a,Cn:u,RAt:t.vI("xlink:actuate"),UAt:c})}function LY(t){const i=t.vI("schemeIdUri");if(!i)return;return{yst:i,jM:t.vI("value")}}function kY(t,i){const e=nY(t.vI("availabilityEndTime")),s=nY(t.vI("availabilityStartTime")),n=cY(t.dI("BaseURL")),r=t.vI("id"),h=function(t){return t.map((t=>""+t.sj))}(t.dI("Location")),o=Br(t.vI("maxSegmentDuration")),a=Br(t.vI("maxSubsegmentDuration")),u=Br(t.vI("mediaPresentationDuration")),c=(t.dI("Metrics"),Br(t.vI("minBufferTime")));if(!c)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const l=Br(t.vI("minimumUpdatePeriod")),d=function(t){return t.map((t=>bY(t)))}(t.dI("Period"));if(!d.length)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.vI("profiles");if(!f)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const _=nY(t.vI("publishTime")),w=Br(t.vI("suggestedPresentationDelay")),A=Br(t.vI("timeShiftBufferDepth")),v=function(t){switch(t){case lo.Wx:case lo.Hx:return t;default:return}}(t.vI("type")),m=function(t){const i=[];for(const e of t){const t=LY(e);t&&i.push(t)}return i}(t.dI("UTCTiming")),p=function(t){if(0===t.length)return;const i=t[0],e=i.dI("Latency");if(0===e.length)return;const s=function(t){const i=t[0],e=aa(i.vI("target"));if(void 0===e)return;const s=aa(i.vI("min")),n=aa(i.vI("max"));return{YAt:e,fD:s,dD:n}}(e);if(void 0===s)return;const n=function(t){if(0===t.length)return;const i=t[0],e=aa(i.vI("max")),s=aa(i.vI("min"));return{fD:s,dD:e}}(i.dI("PlaybackRate"));return{GAt:s,Gf:n}}(t.dI("ServiceDescription"));return{VAt:e,WAt:s,pAt:n,o:r,HAt:h,qAt:i,XAt:o,ZAt:a,KAt:u,JAt:c,$At:l,pwt:d,lAt:f,tvt:_,ivt:w,iAt:A,Rg:v,evt:m,svt:p}}var CY=class{nvt(t,e){return function(t,i){if(!t)throw new g("The provided MPEG-DASH document does not contain a valid MPD root element.");return kY(t,i)}(i.gI(t).wI,e)}};function xY(t){return{get bandwidth(){return t.wz},get codecs(){return t.mst},get id(){return t.o},get uid(){return t.Mg},get name(){return t.kh},get averageBandwidth(){return t.rvt},get label(){return t.kh},set label(i){t.kh=gi(i)},get available(){return t.yet},get score(){return t.ovt},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}function OY(t){return N(xY(t),{get height(){return t.Ti},get width(){return t.ji},get frameRate(){return t.zct},get firstFrame(){return t.avt}})}function jY(t){return N(xY(t),{get audioSamplingRate(){return t.rAt}})}var zY=class extends wn{constructor(t){super("update"),this.quality=t}},PY=class extends xd{get kh(){return this.OT}set kh(t){this.OT!==t&&(this.OT=t,this.Co(new zY(this.va)))}get rvt(){}get yet(){return this.uvt}get ovt(){}QI(){this.uvt=!1,this.Co(new zY(this.va))}constructor(t,i,e,s,n){super(),this.o=t,this.wz=i,this.mst=e,this.cvt=n,this.Mg=Ew(),this.OT=s||"",this.uvt=!0}},BY=class extends PY{get va(){return this.Xa||(this.Xa=OY(this)),this.Xa}constructor(t,i,e,s,n,r,h,o,a=0){super(t,i,e,s,n),this.zct=r,this.ji=h,this.Ti=o,this.avt=a,this.Xa=void 0}},RY=class extends PY{get va(){return this.Xa||(this.Xa=jY(this)),this.Xa}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.rAt=r,this.Xa=void 0}};var wr=class extends xd{get lvt(){const t=this.dvt();return null==t?void 0:t.Cn}get fvt(){const t=this.dvt();return null==t?void 0:t.jn}constructor(...t){super(...t),this._vt=t=>{this.Co(t)}}},UY=class extends wr{get Hot(){return this.yht}get rAt(){var t;return null!=(t=this.gvt.zm.rAt)?t:this.Hot.rAt}get wz(){return this.gvt.zm.wz||0}get mst(){const t=this.gvt.zm;return t.mst?[t.mst]:this.Hot.mst}get wvt(){const t=this.gvt.zm;return t.mst?[t.mst]:[]}get hit(){return this.gvt.zm.mst||this.Hot.hit}get hAt(){return this.gvt.zm.hAt||this.Hot.hAt}get pst(){return this.gvt.zm.pst||this.Hot.pst}get qz(){return this.CF+'; codecs="'+this.hit+'"'}get oAt(){const t=this.gvt.zm;return t.oAt.length?t.oAt:this.Hot.oAt}get va(){return this.Xa||(this.Xa=function(t){return{get id(){return t.o},get type(){return t.Rg},get bandwidth(){return t.wz},get width(){return t.ji},get height(){return t.Ti},get frameRate(){var i,e;return null!=(e=null==(i=t.zct)?void 0:i.vN())?e:NaN},get audioSamplingRate(){return t.rAt}}}(this))}get zct(){var t;return null!=(t=this.gvt.zm.zct)?t:this.Hot.zct}get Ti(){return this.gvt.zm.Ti||this.Hot.Ti}get o(){return this.gvt.zm.o||""}get ect(){return this.Avt}set ect(t){this.Avt=t}get ict(){const t=this.gvt.vvt();if(t)return{zu:t.zu,Bht:t.Bht,AS:this.Jut.AS}}get uAt(){return this.gvt.zm.uAt||this.Hot.uAt||1}get cAt(){return this.gvt.zm.cAt||this.Hot.cAt}get Jut(){return this.Rat.Jut}get CF(){return this.gvt.zm.CF||this.Hot.CF}get Rat(){return this.Hot.Rat}get lAt(){return this.gvt.zm.lAt||this.Hot.lAt}get Hrt(){return this.mvt}get dAt(){return this.gvt.zm.dAt||this.Hot.dAt}get fAt(){return this.gvt.zm.fAt||this.Hot.fAt}get pvt(){return this.gvt.pvt}get _At(){return this.gvt.zm._At||this.Hot._At}get lnt(){return this.gvt.lnt}get gAt(){return this.gvt.zm.gAt||this.Hot.gAt}get Rg(){const t=this.CF.split("/")[0];return"application"===t||"text"===t||Ov(this.CF,this.mst)?Vt.Ru:"video"===t?Vt.pm:"audio"===t?Vt.ym:"image"===t?Vt.nT:Vt.rT}get ji(){return this.gvt.zm.ji||this.Hot.ji}get Yat(){return this.yvt}set Yat(t){this.yvt=t}tut(t){const i=q(t)?this.gvt.Mvt(t):this.gvt.tut(t);return{zu:i.zu,Bht:i.Bht,AS:this.Jut.AS}}Tvt(){return this.gvt.Tvt()}dvt(){return this.gvt.dvt()}Nvt(){return this.gvt.Nvt()}Vat(t){return this.gvt.Vat(t)}Hat(t,i,e){return this.gvt.Hat(t,this.Jut.AS,i,e)}Qut(t){return q(t)?this.lnt.Dvt(t,this.gvt):this.lnt.Qut(t)}Bat(t){return q(t)?this.lnt.Ivt(t,this.gvt):this.lnt.Bat(t)}gn(){this.gvt.fn(Tc.Frt,this._vt)}constructor(t,i){if(super(),this.Xa=void 0,this.Avt=void 0,this.yvt=!1,this.yht=t,this.gvt=i,this.gvt.yn(Tc.Frt,this._vt),this.Rg===Vt.pm){var e,s;const t=null!=(s=null==(e=this.zct)?void 0:e.vN())?s:NaN;this.mvt=new BY(this.o,this.wz,this.hit,"","",t,this.ji,this.Ti)}else this.Rg===Vt.ym?this.mvt=new RY(this.o,this.wz,this.hit,"","",this.rAt):this.mvt=void 0}},QY=class extends wr{get cct(){return this.gvt.zm.cct}get rAt(){var t;return null!=(t=this.gvt.zm.rAt)?t:-1}get mst(){if(this.gvt.zm.mst)return[this.gvt.zm.mst];{const t=[];for(const i of this.irt)i.wvt.length&&-1===t.indexOf(i.hit)&&t.push(i.hit);return t}}get hit(){return this.mst.join()}get hAt(){return this.gvt.zm.hAt}get pst(){return this.gvt.zm.pst}get qz(){return this.CF+'; codecs="'+this.hit+'"'}get oAt(){return this.gvt.oAt}get aAt(){return this.gvt.aAt}get zct(){return this.gvt.zm.zct}get vct(){return this.gvt.zm.vct}get Ti(){return this.gvt.zm.Ti||0}get o(){return this.gvt.zm.o}get kh(){return this.gvt.zm.kh||""}get uAt(){return this.gvt.zm.uAt}get cAt(){return this.gvt.zm.cAt}get Jut(){return this.Rat.Jut}get CF(){return this.gvt.zm.CF||this.Tct[0].CF}get Rat(){return this.cwt}get lAt(){return this.gvt.zm.lAt}get irt(){return this.Tct}get Qct(){return this.gvt.zm.Qct||[]}get dAt(){return this.gvt.zm.dAt}get fAt(){return this.gvt.zm.fAt}get _At(){return this.gvt.zm._At}get LP(){return this.gvt.zm.LP}get gAt(){return this.gvt.zm.gAt}get Rg(){const t=(this.gvt.zm.qz||this.CF).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||Ov(this.CF,this.mst)?Vt.Ru:"video"===t?Vt.pm:"audio"===t?Vt.ym:"image"===t?Vt.nT:Vt.rT}get ji(){return this.gvt.zm.ji||0}get R6(){return this.gvt.zm.gs||""}get Bct(){return this.lvt}get Pct(){const t=this.Bct,i=this.fvt;if(void 0===t||void 0===i)return;const e=_.min(i,this.Jut.Svt);return _.max(t,e)}async Yn(t,i){if(0===this.Tct.length){this.Tct=[];const e=this.gvt.irt.map((e=>this.Evt(e,t,i)));this.Tct=(await Promise.all(e)).filter(Yt)}this.bvt()}async Evt(t,i,e){const s=new UY(this,t),n=await i(s);if(Bo(e),n)return s}bvt(){if(!this.Tct.length)throw new g("Detected an AdaptationSet without any supported Representations.")}dvt(){return this.gvt.dvt()}Nvt(){return this.gvt.Nvt()}gn(){this.gvt.fn(Tc.Frt,this._vt);for(const t of this.Tct)t.gn();No(this.Tct)}constructor(t,i){super(),this.Tct=[],this.cwt=t,this.gvt=i,this.gvt.yn(Tc.Frt,this._vt)}};function FY(t,e){const s=[];for(const n of e)for(const e of t)s.push(i.Dh(e,n));return s}var la=class{Lvt(t){const i=t-this.cwt.Cn;if(i<0||i>=this.cwt.ct)return;const e=this.kvt();return void 0!==e&&ku(e,i,1e-5)?this.Cvt():this.xvt(i)}Gat(t){const i=t-this.cwt.Cn;if(!(i<0))return this.Ovt(_.min(i,this.cwt.ct))}Cvt(){return this.jvt(0)}zvt(){const t=this.cwt.ct;if(isFinite(t))return this.Ovt(t)}get Pvt(){return this.cwt.Rvt.Bvt&&void 0!==this.Uvt()}Tvt(t){if(this.cwt.Rvt.Rg===lo.Hx){if(this.Pvt){const i=this.Cvt(),e=this.Uvt();if(void 0===i||void 0===e)return;return{Qvt:t,Fvt:i,Yvt:e}}const i=this.Gvt(t);if(!i)return;return{Qvt:t,Fvt:this.Vvt(t),Yvt:i}}{0;const i=this.Cvt();if(i)return{Qvt:t,Fvt:i,Yvt:this.zvt()}}}Nvt(t,i){if(i){let t=this.$ut(i.Fvt);const e=this.Kat(i.Yvt);if(e){const i=this.tct(e);(!t||i.getTime()<t.getTime())&&(t=i)}return t}{const i=this.Cvt();if(i){const e=this.tct(i);if(t.getTime()<e.getTime())return e}const e=this.cwt.Rvt.WAt;return t.getTime()<e.getTime()?e:void 0}}Gvt(t){const i=(t.getTime()-this.cwt.Rvt.WAt.getTime())/1e3-this.cwt.Cn+this.Wvt;let e=this.Ovt(ks(i,0,this.cwt.ct));if(!e)return;if(e=this.Hvt(e,t),!e)return;let s=this.Kat(e);for(;s&&this.hct(s,t);)e=s,s=this.Kat(e);return e}Vvt(t){let i;const e=this.qvt.iAt;if(e){const s=(t.getTime()-this.cwt.Rvt.WAt.getTime())/1e3-this.cwt.Cn-e.jwt();i=this.Ovt(ks(s,0,this.cwt.ct)),i||(i=this.Cvt())}else i=this.Cvt();if(!i)return;if(i=this.Hvt(i,t),!i)return;let s=this.Zat(i);for(;s&&this.hct(s,t);)i=s,s=this.Zat(i);return i}Hvt(t,i){let e=t;for(;e&&this.tct(e).getTime()>i.getTime();)e=this.Zat(e);if(!e)return;const s=this.$ut(e);if(s&&s.getTime()<=i.getTime()){const t=this.Zat(e);for(t&&this.hct(t,i)&&(e=t);e;){if(this.tct(e).getTime()>i.getTime())return;if(this.hct(e,i))break;e=this.Kat(e)}if(!e)return}return e}hct(t,i){if(this.Pvt)return!0;if(this.tct(t).getTime()>i.getTime())return!1;const e=this.$ut(t);return!(e&&i.getTime()>=e.getTime())}Xvt(t,i){if(this.Pvt)return!0;if(this.Zvt(t).getTime()>i.getTime())return!1;const e=this.$ut(t);return!(e&&i.getTime()>=e.getTime())}Kvt(t,i,e){const s=jc(i,this.GL)+this.cwt.Cn;return{Tot:t,Jvt:i,GT:s,ct:e,VT:s+e}}Zvt(t){return this.cwt.Rvt.Rg===lo.Hx?new Date(this.cwt.Rvt.WAt.getTime()+1e3*(t.GT+t.ct)):this.cwt.Rvt.WAt}tct(t){const i=this.Zvt(t);return this.cwt.Rvt.Rg===lo.Hx?new Date(i.getTime()-1e3*this.Wvt):i}$ut(t){let i=1/0;if(this.cwt.Rvt.Rg===lo.Hx){const e=this.qvt.iAt;e&&(i=this.Zvt(t).getTime()+1e3*t.ct+e.zwt())}const e=this.cwt.Rvt.VAt;return e&&(i=_.min(i,e.getTime())),i===1/0?void 0:new Date(i)}$vt(t,i){return t.Tot+i}get UD(){return this.cwt.Cn-jc(this.tmt,this.GL)}get $wt(){return jc(this.tmt,this.GL)}Vat(t){return!1}Hat(t,i,e,s,n){const r=this.imt(t);if(!r)return Promise.reject(new g("Invalid segment"));const h=this.emt(r.Tot,i);return h?Promise.resolve(h):Nr(this.smt(r.Tot,i,e,s),n)}emt(t,i){}smt(t,i,e,s){return Promise.reject(new g("Not supported"))}Zat(t){const i=this.imt(t);if(i)return this.jvt(i.Tot-1)}Kat(t){const i=this.imt(t);if(i)return this.jvt(i.Tot+1)}imt(t){const i=this.jvt(t.Tot);if(i&&i.GT===t.GT)return i;const e=this.Lvt(t.GT);return e&&e.GT===t.GT?e:void 0}nmt(t,i){const e=this.qat(t);if(!e||!this.Vat(e.Tot))return;const s=this.emt(e.Tot,i);return s?s.nmt(t):void 0}qat(t){return this.jvt(t.hmt)}Qut(t){const i=this.imt(t);return!!i&&0===i.Tot}Dvt(t,i){const e=this.nmt(t,i);return!!e&&0===e.Mot}Bat(t){const i=this.imt(t);if(!i)return!1;const e=this.zvt();return!!e&&i.Tot===e.Tot}Ivt(t,i){const e=this.nmt(t,i);if(!e)return!1;const s=this.zvt();if(!s||e.hmt!==s.Tot)return!1;const n=this.emt(e.hmt,i);return e.Mot+1===n.U}Ud(){}constructor(t,i){this.cwt=t,this.qvt=i,this.GL=i.kp,this.Wvt=i.Fwt,this.tmt=i.$wt}},YY=class extends la{jvt(t){if(t<0)return;const i=this.omt.multiply(t),e=jc(i,this.GL),s=this.cwt.ct;if(e>=s)return;const n=this.amt();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.Kvt(t,i,s-e)}return isFinite(s)&&e+this.umt>s?this.Kvt(t,i,s-e):this.Kvt(t,i,this.umt)}kvt(){return 0}xvt(t){const i=_.floor(t/this.umt),e=this.amt();return void 0!==e&&i>=e?this.jvt(e):this.jvt(i)}Ovt(t){if(t>=this.cwt.ct){const t=_.ceil(this.cwt.ct/this.umt)-1,i=this.amt();return void 0!==i&&t>=i?this.jvt(i):this.jvt(t)}return this.xvt(t)}amt(){const t=this.qvt.nAt;var i;if(void 0!==t)return t-(null!=(i=this.qvt.sAt)?i:1);const e=this.qvt.cmt;return void 0!==e&&e>0?e-1:void 0}Uvt(){if(isFinite(this.cwt.ct))return this.zvt()}lmt(t,i){return this.omt.multiply(t.Tot+(i-1))}Yn(){}constructor(t,i){super(i,t);const e=t.dmt,s=t.ct;if(void 0===e||void 0===s)throw new g("MultipleSegmentBase does not have a segment duration specified.");this.omt=e,this.umt=s}};function GY(t,i,e){const s=i.length;if(0===s)return-1;let n=0,r=s-1,h=t.fmt(i[n]),o=t._mt(i[r]);for(;n<=r&&t.gmt(h,e)<=0&&t.gmt(e,o)<0;){const a=n+_.floor(t.wmt(e,h,o)*(r-n)),u=i[a],c=t.fmt(u),l=a+1<s?t.fmt(i[a+1]):t._mt(u);if(t.gmt(l,e)<=0)n=a+1,h=l;else{if(!(t.gmt(e,c)<0))return a;r=a-1,o=c}}return-1}function VY(t,i){return GY(WY.Ib,t,i)}var WY=class t{static get Ib(){return null!=this.vst||(this.vst=new t),this.vst}fmt(t){return t.GT}_mt(t){return t.VT}gmt(t,i){return t.compare(i)}wmt(t,i,e){return t.subtract(i).toNumber()/e.subtract(i).toNumber()}},HY=class extends la{jvt(t){if(!(t<0))return t<this.Amt.length?this.Amt[t].mot:this.vmt(t-this.Amt.length)}kvt(){if(this.Amt.length>0)return jc(this.Amt[0].GT,this.GL)}xvt(t){if(this.mmt&&jc(this.mmt.GT,this.GL)<=t){const i=jc(this.mmt.GT,this.GL),e=jc(this.mmt.ct,this.GL),s=_.floor((t-i)/e);return this.vmt(s)}if(this.Amt.length>0&&ku(t,jc(this.Amt[0].GT,this.GL),1e-5))return this.Amt[0].mot;const i=VY(this.Amt,Ce.fromNumber(t*this.GL));return i<0?void 0:this.Amt[i].mot}Ovt(t){if(!this.mmt&&this.Amt.length>0){const i=this.Amt[this.Amt.length-1];if(function(t,i,e){return Oo(t,i,e)>=0}(t,jc(i.VT,this.GL),1e-5))return i.mot}const i=this.kvt();return i&&t<i?this.Amt[0].mot:this.xvt(t)}Uvt(){return isFinite(this.cwt.ct)?this.zvt():this.jvt(this.Amt.length-1)}lmt(t){return this.pmt(t)}vmt(t){if(!this.mmt)return;const i=this.mmt.GT,e=this.mmt.ct,s=i.add(e.multiply(t)),n=jc(s,this.GL),r=this.cwt.ct;if(n>=r)return;const h=this.Amt.length+t,o=_.min(jc(e,this.GL),n+r);return this.Kvt(h,s,o)}pmt(t){return t.Jvt.add(this.tmt)}Yn(){const t=this.qvt.zm.lnt;if(!t)throw new g("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.ymt(t)}ymt(t){const i=this.tmt;this.Mmt(t,i);const e=this.Tmt(t);this.Nmt(t,i,e.Dmt,e.hmt)}Mmt(t,i){const e=this.Amt;if(0===t.length)No(e);else{const s=t[0],n=s.GT?Ce.fromString(s.GT,!1).subtract(i):Ce.ZERO;let r=0;for(;r<e.length&&e[r].GT.lessThan(n);)r++;r>0&&e.splice(0,r)}}Tmt(t){const i=this.Amt,e=this.ugt;let s=0,n=0;for(;s<t.length&&n<i.length;){const r=t[s].Vwt||0;if(r<0)break;const h=n+r;if(h>=i.length)break;if(i[h].GT.greaterThanOrEqual(e))break;if(i[n].mot.Tot===n)n=h+1;else for(;n<=h;)i[n].mot.Tot=n,n++;0,s++}return{Dmt:s,hmt:n}}Nmt(t,i,e,s){const n=this.Amt;let r,h=e,o=s;for(;h<t.length;){const e=t[h],s=Ce.fromString(e.ct,!1),a=e.Vwt||0;let u;if(e.GT){if(u=Ce.fromString(e.GT,!1).subtract(i),o>0){const t=n[o-1];t.VT.greaterThan(u)&&(t.ct=u.subtract(t.GT),t.VT=t.GT.add(t.ct))}}else u=o>0?n[o-1].VT:Ce.ZERO;if(a<0){if(h+1===t.length){r={GT:u,ct:s};break}const e=Ce.fromString(t[h+1].GT,!1).subtract(i);for(;u.lessThan(e);){const t=u.add(s);this.Imt(n,o,u,s,t),u=t,o++}}else{const t=o+a;for(;o<=t;){const t=u.add(s);this.Imt(n,o,u,s,t),u=t,o++}}h++}o<n.length&&n.splice(o),n.length>0&&(this.ugt=n[n.length-1].GT),this.mmt=r}Imt(t,i,e,s,n){if(i<t.length){const r=t[i];0,r.ct.equals(s)?r.mot.Tot=i:t[i]={GT:e,ct:s,VT:n,mot:this.Kvt(i,e,jc(s,this.GL))}}else t.push({GT:e,ct:s,VT:n,mot:this.Kvt(i,e,jc(s,this.GL))})}constructor(t,i){super(i,t),this.Amt=[],this.mmt=void 0,this.ugt=Ce.ZERO,this.Yn()}},qY=class{get zm(){return this.qL}get Fwt(){return this.qL&&void 0!==this.qL.Fwt?this.qL.Fwt:this.Smt?this.Smt.Fwt:0}get $wt(){return this.qL&&void 0!==this.qL.$wt?this.qL.$wt:this.Smt?this.Smt.$wt:Ce.ZERO}get iAt(){return this.qL&&void 0!==this.qL.iAt?this.qL.iAt:this.Smt?this.Smt.iAt:this.Rat.Rvt.iAt}get kp(){return this.qL&&void 0!==this.qL.kp?this.qL.kp:this.Smt&&this.Smt.kp?this.Smt.kp:1}get Wwt(){return this.qL&&void 0!==this.qL.Wwt?this.qL.Wwt:this.Smt?this.Smt.Wwt:void 0}get Jwt(){return this.qL&&void 0!==this.qL.Jwt?this.qL.Jwt:this.Smt?this.Smt.Jwt:void 0}get lnt(){return this.Emt||(this.Emt=this.bmt()),this.Emt}bmt(){if(this.Lmt=this.kmt(),this.Lmt)return this.Lmt;if(this.Smt)return this.Smt.lnt;throw new g("Missing media segment information.")}vvt(t){const e=this.Jwt;if(e){return{zu:(void 0!==e.Gwt?i.Dh(e.Gwt,t.pAt[0]):t.pAt[0]).href,Bht:e.Bht}}const s=this.Wwt;if(s)return{zu:t.pAt[0].href,Bht:[0,s[0]-1]}}Yn(t){this.qL=t,this.Lmt&&this.Lmt.Yn()}Ud(){this.Lmt&&(this.Lmt.Ud(),this.Lmt=void 0)}constructor(t,i,e){this.Emt=void 0,this.Lmt=void 0,this.Rat=t,this.Smt=i,this.qL=e}},XY=class extends qY{get ct(){return void 0!==this.qL.ct?this.qL.ct/this.kp:this.Smt&&ZY(this.Smt)?this.Smt.ct:void 0}get dmt(){return void 0!==this.qL.ct?Ce.fromNumber(this.qL.ct):this.Smt&&ZY(this.Smt)?this.Smt.dmt:void 0}get sAt(){return void 0!==this.qL.sAt?this.qL.sAt:this.Smt&&ZY(this.Smt)?this.Smt.sAt:void 0}get nAt(){return void 0!==this.qL.nAt?this.qL.nAt:this.Smt&&ZY(this.Smt)?this.Smt.nAt:void 0}kmt(){return void 0!==this.qL.lnt?new HY(this,this.Rat):void 0!==this.qL.ct?new YY(this,this.Rat):void 0}};function ZY(t){return t instanceof XY}var KY=class{Wb(t){return this.Cmt.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,((i,e,s,n)=>{if("$$"===i)return"$";const r=t[e];if(void 0===r)return i;if(void 0===s)return r.toString();let h=function(t,i){switch(i){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===h?i:(h=Tf(h,Number(s),"0"),h)}))}constructor(t){this.Cmt=t}};var JY=class t extends XY{get vAt(){return this.xmt?this.xmt:this.Smt&&this.Smt instanceof t?this.Smt.vAt:void 0}get mAt(){return this.Omt?this.Omt:this.Smt&&this.Smt instanceof t?this.Smt.mAt:void 0}vvt(t){const e=this.vAt;if(!e)return super.vvt(t);const s=e.Wb({Bandwidth:t.zm.wz,RepresentationID:t.zm.o});return{zu:i.IA(s,t.pAt[0])}}tut(t,e){var s;const n=null!=(s=e.pvt.sAt)?s:1,r=this.mAt.Wb({Bandwidth:e.zm.wz,Number:e.lnt.$vt(t,n),RepresentationID:e.zm.o,Time:e.lnt.lmt(t,n)});return{zu:i.IA(r,e.pAt[0])}}Mvt(t,i){}get cmt(){}constructor(t,i,e){super(t,i,e),this.xmt=e.vAt?new KY(e.vAt):void 0,this.Omt=e.mAt?new KY(e.mAt):void 0}},$Y=class t extends XY{tut(t,e){const s=this.qwt[t.Tot],n=e.pAt[0];let r;return r=s.Pp?i.Dh(s.Pp,n):n,{zu:r.href,Bht:s.Hwt}}Mvt(t,i){}get qwt(){return void 0!==this.qL.qwt?this.qL.qwt:this.Smt&&this.Smt instanceof t?this.Smt.qwt:void 0}get cmt(){var t;return null==(t=this.qwt)?void 0:t.length}},tG=class{nmt(t){const i=this.Xat(t.Mot);if(i&&i.GT===t.GT)return i;const e=this.jmt(t.GT);return e&&e.GT===t.GT?e:void 0}},iG=class extends tG{get U(){return this.zmt.length}Xat(t){if(t>=0&&t<this.U)return this.Pmt(this.zmt[t])}jmt(t){const i=this.Bmt(t);if(this.zmt.length>0){const t=this.zmt[0];if(i<=jc(t.GT,this.kp))return this.Pmt(t)}const e=VY(this.zmt,Ce.fromNumber(i*this.kp));if(!(e<0))return this.Pmt(this.zmt[e])}Wat(t){const i=this.Bmt(t);if(this.zmt.length>0){const t=this.zmt[this.zmt.length-1];if(i>=jc(t.VT,this.kp))return this.Pmt(t)}return this.jmt(t)}Pmt(t){const i=jc(t.GT,this.kp)-this.$wt,e=i+this.Rmt,s=jc(t.ct,this.kp);return{hmt:this.hmt,Mot:t.Tot,GT:e,Jvt:Ce.fromNumber(i*this.kp),ct:s,VT:e+s,Umt:[t.Qmt,t.Fmt]}}Bmt(t){return t-this.Rmt+this.$wt}constructor(t,i,e,s,n){super(),this.hmt=t,this.kp=i,this.Rmt=e,this.$wt=s,this.zmt=n}};var eG=class t{k_t(){return this.Pm.Ku<this.zm.byteLength}Ymt(){const i=this.Gmt(),e=this.Vmt(),s=this.Pm.Ku,n=this.zm.byteLength;let r;r=t.Wmt(e)?n-s:t.Hmt(e);const h=s+r<=n?r:n-s,o=Yu(this.zm,this.Pm,h);return new nG(i,ha(o))}Gmt(){const t=this.Vmt();if(t.length>7)throw new RangeError("Invalid EBML ID size");let i=0;for(let e=0;e<t.length;e++)i=256*i+t[e];return i}Vmt(){const t=hl(this.zm,this.Pm.Em());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const e=8-(31-T_(t));return i.uit(e<=8&&e>=1,"Incorrect log2 value"),Yu(this.zm,this.Pm,e)}static Hmt(t){if(8===t.length&&224&t[1])throw new b("EBML variable sized integer is too large");let i=0;for(let e=0;e<t.length;e++){const s=t[e];if(0===e){i=s&(1<<8-t.length)-1}else i=256*i+s}return i}static Wmt(t){for(const i of sG)if(Qi(t,new j(i)))return!0;return!1}constructor(t){this.zm=t,this.Pm=new L}},sG=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],nG=class{qmt(){return this.Xmt.byteOffset}Zmt(){return new eG(this.Xmt)}Kmt(){const t=this.Xmt.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.Xmt.getUint8(0))throw new RangeError("EMBL integer field value is too large");let i=0;for(let e=0;e<t;e++){i=256*i+this.Xmt.getUint8(e)}return i}IH(){if(4===this.Xmt.byteLength)return this.Xmt.getFloat32(0);if(8===this.Xmt.byteLength)return this.Xmt.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,i){this.id=t,this.Xmt=i}};function rG(t,i){const e=function(t){const i=new eG(ha(t)),e=i.Ymt();if(e.id!==oG)throw new b("Missing WebM EBML header");const s=i.Ymt();if(s.id!==aG)throw new b("Missing WebM SegmentElement");const n=s.qmt(),r=function(t){const i=t.Zmt();let e;for(;i.k_t();){const t=i.Ymt();if(t.id===uG){e=t;break}}if(!e)throw new b("Missing WebM InfoElement");return function(t){const i=t.Zmt();let e,s=1e6;for(;i.k_t();){const t=i.Ymt();t.id===cG?s=t.Kmt():t.id===lG&&(e=t.IH())}if(void 0===e)throw new b("Missing Duration in WebM InfoElement");const n=s/1e9,r=e*n;return{timecodeScale:n,duration:r}}(e)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(i),s=new eG(ha(t)).Ymt();if(s.id!==dG)throw new b("Missing WebM CuesElement");const n=function(t,i,e,s){const n=[],r=t.Zmt();let h,o;for(;r.k_t();){const t=r.Ymt();if(t.id!==fG)continue;const e=hG(t);if(!e)continue;const s=e.unscaledTime,a=i+e.relativeOffset;void 0!==h&&n.push({Tot:n.length,GT:h,ct:s.subtract(h),VT:s,Qmt:o,Fmt:a-1}),h=s,o=a}if(void 0!==h){0;const t=Ce.fromNumber(s/e);n.push({Tot:n.length,GT:h,ct:t.subtract(h),VT:t,Qmt:o,Fmt:void 0})}return n}(s,e.segmentOffset,e.timecodeScale,e.duration);return{kp:_.round(1/e.timecodeScale),Jmt:n}}function hG(t){const i=t.Zmt(),e=i.Ymt();if(e.id!==_G)throw new b("Missing CueTime in WebM CuePointElement");const s=Ce.fromNumber(e.Kmt()),n=i.Ymt();if(n.id!==gG)throw new b("Missing CueTrackPositions in WebM CuePointElement");const r=n.Zmt();let h=0;for(;r.k_t();){const t=r.Ymt();if(t.id===wG){h=t.Kmt();break}}return{unscaledTime:s,relativeOffset:h}}var oG=440786851,aG=408125543,uG=357149030,cG=2807729,lG=17545,dG=475249515,fG=187,_G=179,gG=183,wG=241,AG=class extends la{jvt(t){if(0===t)return this.$mt}kvt(){return 0}xvt(t){return this.$mt}Ovt(t){return this.xvt(t)}Uvt(){return this.$mt}lmt(t,i){return Ce.ZERO}Tvt(t){const i=this.tpt(t);return i&&{Qvt:t,Fvt:i,Yvt:i}}tpt(t){const i=this.$mt;return this.hct(i,t)?i:void 0}Gvt(t){return this.tpt(t)}Vvt(t){return this.tpt(t)}Yn(){}Vat(t){return 0===t&&void 0!==this.ipt}emt(t,i){const e=i.pAt[0].href;return this.ept.get(e)}smt(t,i,e,s){const n=i.pAt[0].href;let r=this.spt.get(n);if(void 0===r){const h=i.CF,o=this.npt.Wd;if(vs(h))r=this.rpt(t,n,e,s,o);else{if(!KA(h))throw new $i(Ui.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+h);r=this.hpt(t,n,i,e,s,o)}this.spt.set(n,r)}return r}async rpt(t,i,e,s,n){const r=this.ipt,h=await s.vut(i,r,e,n),o=this.opt(t,h);return this.ept.set(i,o),o}opt(t,i){const e=this.ipt,s=dt.ip(new DataView(i),new L);if(s.Rg!==Zt._m)throw new g("Invalid segment index");const n=Lr.Tp(s.zm),r=function(t,i){const e=[];let s=t.KM,n=i+t.JM.toNumber(),r=0;for(const i of t.tT){const t=i.WM,h=Ce.fromNumber(i.ct),o=s.add(h);0===i.VM&&e.push({Tot:r++,GT:s,ct:h,VT:o,Qmt:n,Fmt:n+t-1}),n+=t,s=o}return e}(n,e[1]+1);return new iG(t,n.kp,this.cwt.Cn,jc(this.tmt,this.GL),r)}async hpt(t,i,e,s,n,r){const h=e.vvt(),o=this.ipt,a=n.vut(h.zu,h.Bht,s,r),u=n.vut(i,o,s,r),[c,l]=await Promise.all([a,u]),d=this.apt(t,l,c);return this.ept.set(i,d),d}apt(t,i,e){const s=rG(new j(i),new j(e));return new iG(t,s.kp,this.cwt.Cn,jc(this.tmt,this.GL),s.Jmt)}Ud(){super.Ud(),this.npt.qd()}constructor(t,i){super(i,t),this.ept=Eo(),this.spt=Eo(),this.npt=new na,this.ipt=t.Wwt,this.$mt=this.Kvt(0,Ce.ZERO,this.cwt.ct)}},vG=class extends qY{get sAt(){}tut(t,i){return{zu:i.pAt[0].href}}Mvt(t,i){return{zu:i.pAt[0].href,Bht:t.Umt}}kmt(){return new AG(this,this.Rat)}},mG=class extends wn{constructor(){super(Tc.Frt)}};var pG=class extends xd{get zm(){return this.qL}get pAt(){return this.upt}cpt(){var t,i;return null!=(i=this.qvt)?i:null==(t=this.Tit)?void 0:t.cpt()}lpt(t){const i=this.Rat,e=this.Tit&&this.Tit.cpt();this.qL.TAt?this.qvt=new JY(i,e,this.qL.TAt):this.qL.MAt?this.qvt=new $Y(i,e,this.qL.MAt[0]):this.qL.yAt?this.qvt=new vG(i,e,this.qL.yAt):t&&!e&&(this.qvt=new vG(i,e,void 0))}dpt(t,i){this.qL=t,this.upt=t.pAt&&t.pAt.length>0?FY(t.pAt.map((t=>t.zu)),i):i.slice(),this.qvt&&(t.TAt?this.qvt.Yn(t.TAt):t.MAt?this.qvt.Yn(t.MAt[0]):t.yAt&&this.qvt.Yn(t.yAt))}dvt(){var t;return null==(t=this.fpt)?void 0:t._pt}Nvt(){var t;return null==(t=this.fpt)?void 0:t.gpt}wpt(t){const i=this.Apt,e=this.Rat.ct,s=this.fpt,n=this.vpt(t);s&&ku(e,i,1e-5)&&NG(s,n)||(this.Apt=e,this.fpt=n,this.Co(new mG))}Ud(){this.Vo(),this.qvt&&(this.qvt.Ud(),this.qvt=void 0)}constructor(t,i,e){super(),this.qvt=void 0,this.Apt=1/0,this.fpt=void 0,this.Tit=i,this.dpt(t,e)}};function yG(t){let i,e;for(const e of t){const t=e.dvt();if(t){i=t.Cn;break}}if(void 0!==i){for(let i=t.length-1;i>=0;i--){const s=t[i].dvt();if(s){e=s.jn;break}}return void 0!==e?{Cn:i,jn:e}:void 0}}function MG(t){if(0===t.length)return;let i=0,e=1/0;for(const s of t){const t=s.dvt();if(!t)return;if(i=_.max(i,t.Cn),e=_.min(e,t.jn),i>=e)return}return{Cn:i,jn:e}}function TG(t){let i;for(const e of t){const t=e.Nvt();t&&(!i||t.getTime()<i.getTime())&&(i=t)}return i}function NG(t,i){return function(t,i){return t&&i?t.getTime()===i.getTime():t===i}(t.gpt,i.gpt)&&function(t,i){return t&&i?ku(t.Cn,i.Cn,1e-5)&&ku(t.jn,i.jn,1e-5):t===i}(t._pt,i._pt)}var DG=class extends wr{get Wnt(){return this.mpt}get mst(){return this.Wnt.reduce(((t,i)=>{for(const e of i.mst)gd(t,e)||t.push(e);return t}),[])}get hit(){return this.mst.length>0?this.mst[0]:""}get Rg(){return this.mpt[0].Rg}get o(){return this.CT}get Jut(){return this.cwt.Jut}get CF(){return this.mpt[0].CF}get Rat(){return this.cwt}get irt(){return rs(this.Wnt,(t=>t.irt))}dvt(){return MG(this.mpt)}Nvt(){let t;for(const i of this.mpt){const e=i.Nvt();e&&(!t||e.getTime()<t.getTime())&&(t=e)}return t}gn(){this.Vo();for(const t of this.mpt)t.fn(Tc.Frt,this._vt)}constructor(t,i,e){super(),this.cwt=t,this.CT=i,this.mpt=e.slice();for(const t of e)t.yn(Tc.Frt,this._vt)}},IG=class extends wn{constructor(){super(Tc.Grt)}};function SG(t){const i=[];for(const e of t){let t;const s=e.vct;void 0===s||(t=Po(i,(t=>t.o===s))),t||(t={o:s,Wnt:[]},i.push(t)),t.Wnt.push(e)}return i}var EG,bG=class extends wr{get Wnt(){return this.mpt}get uwt(){return this.ppt}get QAt(){return this.gvt.zm.QAt}get ct(){return this.gvt.ct}get jn(){return this.Cn+this.ct}get FAt(){return this.gvt.zm.FAt||[]}get o(){return this.gvt.o}get Vrt(){return this.ypt}get Jut(){return this.Mpt}get Tpt(){return this.Mpt.Npt(this)}get Rat(){return this}get Dpt(){return this.Mpt.Ipt(this)}get Spt(){return this.Ept(1/0,_.min)}get bpt(){return this.Ept(0,_.max)}Ept(t,i){if(0===this.ppt.length)return;let e=t;for(const t of this.ppt){const s=t.Rg;if(s===Vt.ym||s===Vt.pm){const s=t.fvt;if(void 0===s)return;e=i(e,s)}}return e}get Cn(){return this.gvt.Cn}get AS(){return this.Jut.AS}Lpt(){this.ypt||(this.ypt=!0,this.Co(new IG),this.gn())}async Yn(t,i){0===this.mpt.length?(await this.kpt(this.gvt.Wnt,t,i),this.Cpt(this.mpt),Bo(i)):await this.xpt(t,i)}async kpt(t,i,e){for(const s of t){const t=new QY(this,s);try{await t.Yn(i,e),this.mpt.push(t)}catch(t){Ao(t)}}}Cpt(t){const i=SG(t);for(const t of i){const i=new DG(this,t.o,t.Wnt);this.ppt.push(i)}}async xpt(t,i){for(const e of this.mpt)await e.Yn(t,i)}dvt(){return this.gvt.dvt()}Nvt(){return this.gvt.Nvt()}gn(){this.Vo(),this.gvt.fn(Tc.Frt,this._vt);for(const t of this.ppt)t.gn();for(const t of this.mpt)t.gn();No(this.mpt),No(this.ppt)}constructor(t,i){super(),this.mpt=[],this.ppt=[],this.ypt=!1,this.Mpt=t,this.gvt=i,this.gvt.yn(Tc.Frt,this._vt)}},Qa=class extends wn{constructor(){super(l.lw)}};(EG||(EG={})).Opt="jpt";var LG=class extends wn{constructor(){super(EG.Opt)}},kG=class extends pG{get Hot(){return this.yht}get Rat(){return this.yht.Rat}get Rvt(){return this.yht.Rvt}get CF(){return this.qL.CF||this.yht.CF}get pvt(){return this.cpt()}get lnt(){return this.pvt.lnt}Vat(t){const i=this.CF;return!(!vs(i)&&!KA(i))&&this.lnt.Vat(t.Tot)}Hat(t,i,e,s){return this.lnt.Hat(t,this,i,e,s)}vvt(){return this.pvt.vvt(this)}tut(t){return this.pvt.tut(t,this)}Mvt(t){return this.pvt.Mvt(t,this)}Tvt(){return this.zpt}vpt(t){const i=this.lnt,e=i.Tvt(t),s=e&&function(t,i){const{Fvt:e,Yvt:s,Qvt:n}=t,r=e.GT;let h;const o=i.Zvt(s);if(o.getTime()<=n.getTime())h=s.VT;else{const t=(o.getTime()-n.getTime())/1e3,i=_.max(s.ct-t,0);h=s.GT+i}return{Cn:r,jn:h}}(e,i),n=this.lnt.Nvt(t,e);return this.zpt=e,{Qvt:t,_pt:s,gpt:n}}Yn(t){this.dpt(t,this.yht.pAt)}constructor(t,i){super(t,i,i.pAt),this.zpt=void 0,this.yht=i,this.lpt(!0)}},CG=class extends pG{get irt(){return this.Tct}get Rat(){return this.cwt}get Rvt(){return this.cwt.Rvt}get vct(){return this.qL.vct}get CF(){var t;return this.qL.CF||(null==(t=this.Tct[0])?void 0:t.zm.CF)||""}get oAt(){return this.zm.oAt}get aAt(){return this.zm.aAt}Yn(t){this.dpt(t,this.cwt.pAt);const i=t.irt||[];if(this.Tct.length!==i.length)throw new g("Expected "+this.Tct.length+' representations in adaptation set "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.Tct[t].Yn(i[t])}wpt(t){for(const i of this.Tct)i.wpt(t);super.wpt(t)}vpt(t){return{Qvt:t,_pt:MG(this.Tct),gpt:TG(this.Tct)}}Ud(){for(const t of this.Tct)t.Ud();super.Ud()}constructor(t,i){super(t,i,i.pAt),this.cwt=i,this.lpt(!1),this.Tct=t.irt.map((t=>new kG(t,this)))}},xG=class extends pG{get Wnt(){return this.mpt}get uwt(){return this.ppt}get Rat(){return this}get Rvt(){return this.Ppt}get o(){return this.qL.o}get Cn(){return this.hI}get ct(){return this.VL}Yn(t,i){this.dpt(t,this.Ppt.pAt),this.VL=i;const e=t.Wnt||[];if(this.mpt.length!==e.length)throw new g("Expected "+this.mpt.length+' adaptation sets in period "'+t.o+'", found '+e.length);for(let t=0;t<e.length;t++)this.mpt[t].Yn(e[t])}wpt(t){for(const i of this.mpt)i.wpt(t);super.wpt(t)}vpt(t){return{Qvt:t,_pt:MG(this.mpt),gpt:TG(this.mpt)}}Ud(){for(const t of this.mpt)t.Ud();super.Ud()}constructor(t,i,e,s){super(i,void 0,t.pAt),this.ppt=[],this.Ppt=t,this.hI=e,this.VL=s,this.lpt(!1),this.mpt=(i.Wnt||[]).map((t=>new CG(t,this))),this.ppt=SG(this.mpt)}},OG=class{get Bpt(){return this.Rpt.GAt.fD}get Upt(){return this.Rpt.GAt.dD}get Qpt(){return this.Rpt.GAt.YAt}get Fpt(){var t;return null==(t=this.Rpt.Gf)?void 0:t.fD}get Ypt(){var t;return null==(t=this.Rpt.Gf)?void 0:t.fD}constructor(t){this.Rpt=t}},jG=new Date("2000-01-01"),zG=class extends xd{get zm(){return this.qL}get Rg(){return this.qL.Rg||lo.Wx}get WAt(){return this.Gpt||this.qL.WAt||this.tvt}get VAt(){return this.qL.VAt}get Bvt(){var t,i;return null!=(i=null==(t=this.Vpt)?void 0:t.ignoreAvailabilityWindow)&&i}get KAt(){return this.Wpt}get pAt(){return this.upt}get HAt(){return this.Hpt}get pwt(){return this.qpt}get tvt(){return this.qL.tvt||this.An}get iAt(){return this.qL.iAt}get Xpt(){return this.Zpt}get Kpt(){return this.An}get svt(){return this.Rpt}dvt(){var t;return null==(t=this.fpt)?void 0:t._pt}Nvt(){var t;return null==(t=this.fpt)?void 0:t.gpt}Yn(t,i,e,s){var n;const r=void 0!==this.qL&&this.qL.Rg===lo.Hx;this.qL=t,this.Zpt=null!=s?s:e,this.An=e;const h=[kf(i)];this.upt=t.pAt&&t.pAt.length>0?FY(t.pAt.map((t=>t.zu)),h):h,this.Hpt=t.HAt&&t.HAt.length>0?FY(t.HAt,this.upt):[];const o=this.Hpt.map((t=>t.href)),a=i.href;gd(o,a)||(this.Hpt.push(i),o.push(a));const u=this.Jpt.href;gd(o,u)||(this.Hpt.push(this.Jpt),o.push(u)),this.Wpt=null==(n=t.KAt)?void 0:n.jwt(),t.svt&&(this.Rpt=new OG(t.svt));const c=t.Rg===lo.Hx,l=function(t,i,e){const s=[];for(let e=0;e<t.length;e++){const n=t[e];let r;if(n.Cn)r=n.Cn.jwt();else if(e>0&&t[e-1].ct){r=s[e-1]+t[e-1].ct.jwt()}else{if(0!==e||i)break;r=0}s.push(r)}const n=[];for(let i=0;i<s.length-1;i++)n.push({zm:t[i],Cn:s[i],ct:s[i+1]-s[i]});if(s.length>0){const r=s.length-1,h=t[r],o=s[r];let a=1/0;i||(a=h.ct?h.ct.jwt():e-o),n.push({zm:h,Cn:o,ct:a})}return n}(t.pwt,c,this.Wpt);this.$pt(l,r,c),this.wpt(e)}$pt(t,i,e){const s=this.qpt;if(0===t.length)return void No(s);const n=t[0].zm.o;let r=0;for(;r<s.length&&s[r].o!==n;)r++;const h=s.splice(0,r);for(const t of h)t.Ud();if(i&&!e&&s.length>0&&t.length>0){var o;const i=null!=(o=PG(s[0].zm))?o:ke.zN;var a;const e=null!=(a=PG(t[0].zm))?a:ke.zN;if(e.mN(i)){const n=e.bN(i);void 0!==this.Wpt&&(this.Wpt+=n.vN());for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];e.Cn=t.Cn,FG(e.zm,t.zm)}i===t.length-1&&(e.ct+=n.vN())}}}for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];0,t.Yn(e.zm,e.ct)}else s.push(new xG(this,e.zm,e.Cn,e.ct))}}wpt(t){for(const i of this.qpt)i.wpt(t);const i=this.fpt,e=this.vpt(t);i&&NG(i,e)||(this.fpt=e,this.Co(new mG))}vpt(t){return{Qvt:t,_pt:yG(this.qpt),gpt:TG(this.qpt)}}Uvt(){if(0===this.qpt.length)return;const t=this.qpt[this.qpt.length-1];if(isFinite(t.ct))return;if(0===t.Wnt.length)return;const i=t.Wnt[0];if(0===i.irt.length)return;const e=i.irt[0].lnt,s=e.Uvt();return s?{mot:s,VAt:e.$ut(s)}:void 0}Ud(){this.Vo();for(const t of this.qpt)t.Ud()}constructor(t,i,e,s,n){if(super(),this.fpt=void 0,this.Wpt=void 0,this.Gpt=void 0,this.qpt=[],this.Jpt=i,this.Vpt=n,this.Yn(t,e,s),t.Rg===lo.Hx){const t=this.Uvt();t&&t.VAt&&t.VAt.getTime()<jG.getTime()&&(this.Gpt=new Date(this.tvt.getTime()-1e3*(t.mot.GT+t.mot.ct)),this.wpt(s))}}};function PG(t){let i=UG(t);var e,s;for(const s of null!=(e=t.Wnt)?e:[])i=Wn(i,BG(s));for(const e of null!=(s=t.FAt)?s:[])i=Wn(i,QG(e));return i}function BG(t){let i=UG(t);for(const e of t.irt)i=Wn(i,RG(e));return i}function RG(t){return UG(t)}function UG(t){let i;if(void 0!==t.TAt&&(i=Wn(i,QG(t.TAt))),void 0!==t.yAt&&(i=Wn(i,QG(t.yAt))),void 0!==t.MAt)for(const e of t.MAt)i=Wn(i,QG(e));return i}function QG(t){var i,e;return ke.xN(null!=(i=t.$wt)?i:Ce.ZERO,null!=(e=t.kp)?e:1)}function FG(t,i){if(VG(t,i),t.Cn=i.Cn,void 0!==t.Wnt&&void 0!==i.Wnt&&t.Wnt.length===i.Wnt.length)for(let e=0;e<t.Wnt.length;e++)YG(t.Wnt[e],i.Wnt[e]);if(void 0!==t.FAt&&void 0!==i.FAt&&t.FAt.length===i.FAt.length)for(let e=0;e<t.FAt.length;e++)WG(t.FAt[e],i.FAt[e])}function YG(t,i){if(VG(t,i),void 0!==t.irt&&void 0!==i.irt&&t.irt.length===i.irt.length)for(let e=0;e<t.irt.length;e++)GG(t.irt[e],i.irt[e])}function GG(t,i){VG(t,i)}function VG(t,i){if(void 0!==t.TAt&&void 0!==i.TAt&&WG(t.TAt,i.TAt),void 0!==t.yAt&&void 0!==i.yAt&&WG(t.yAt,i.yAt),void 0!==t.MAt&&void 0!==i.MAt&&t.MAt.length===i.MAt.length)for(let e=0;e<t.MAt.length;e++)WG(t.MAt[e],i.MAt[e])}function WG(t,i){t.kp=i.kp,t.$wt=i.$wt}var HG=class{async bW(t){await this.tyt(t,this.NS,this.iyt,this.eyt).catch(Bc)}Kut(){return new Date(Ks()+this.syt)}async tyt(t,i,e,s){let n;if(s&&(n=await this.nyt(i,s,e)),void 0===n){Bo(e);for(const s of t)if(n=await this.ryt(i,s,e),void 0!==n)break}this.syt=void 0===n?0:n-Ks()}async ryt(t,i,e){switch(i.yst){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=i.jM;if(s)return await this.nyt(t,s,e);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=i.jM;if(t){const i=new Date(t).getTime();if(!S(i))return i}break}default:return}}async nyt(t,i,e){try{const s=await t.SI({zu:i,dS:Ys.GET,fS:Qv.Ru,Wd:e}),n=await s.DS(),r=new Date(n).getTime();if(!S(r))return r}catch(t){Ao(t)}}constructor(t,i,e){this.NS=t,this.iyt=i,this.eyt=e,this.syt=0}},qG=class extends xd{get VAt(){return this.gvt&&this.gvt.VAt}get WAt(){return this.gvt&&this.gvt.WAt}get Bvt(){return this.gvt&&this.gvt.Bvt}get o(){return this.gvt&&this.gvt.zm.o}get Xpt(){var t;return null==(t=this.gvt)?void 0:t.Xpt}get hyt(){var t;return null==(t=this.gvt)?void 0:t.Kpt}get HAt(){return this.gvt?this.gvt.HAt.map((t=>t.href)):[this.oyt]}get oyt(){return this.ayt.href}get XAt(){return this.gvt&&this.gvt.zm.XAt}get ZAt(){return this.gvt&&this.gvt.zm.ZAt}get KAt(){return this.gvt&&this.gvt.zm.KAt}get JAt(){return this.gvt&&this.gvt.zm.JAt}get $At(){var t,i;const e=(null==(i=this.gvt)||null==(t=i.zm.$At)?void 0:t.zwt())||0;return _.max(e,ZG)}get Uf(){return this.uyt}cyt(t){const i=this.Uf;this.uyt=t,i!==this.Uf&&this.Co(new LG)}get pwt(){return this.qpt}get lyt(){return this.Rg===lo.Hx?this.Svt:this.dyt}get fyt(){const t=this.lyt;if(void 0!==t)for(const i of this.pwt)if(i.Cn<=t&&i.jn>t)return i}get lAt(){return this.gvt&&this.gvt.zm.lAt}get tvt(){return this.gvt&&this.gvt.tvt}get Spt(){for(let t=this.qpt.length-1;t>=0;t-=1){const i=this.qpt[t].Spt;if(i)return i}}get Svt(){const t=this.Spt;if(void 0===t)return;const i=t-this._yt;return _.max(i,this.dyt)}get dyt(){for(const t of this.qpt){const i=t.lvt;if(void 0!==i)return i}}get AS(){return Boolean(this.gyt.AS)}get _yt(){var t,i;if(this.gyt.wyt&&this.Rg===lo.Hx)return this.gyt.wyt;const e=null==(i=this.gvt)||null==(t=i.zm.ivt)?void 0:t.jwt();return void 0!==e?e:this.Rg===lo.Hx?1.5*this.JAt.jwt():0}get iAt(){return this.gvt&&this.gvt.iAt}get Rg(){return this.gvt?this.gvt.Rg:void 0}get svt(){var t;return null==(t=this.gvt)?void 0:t.svt}async Yn(t,e,s){const n=[],r=[],h=t.qAt?i.Dh(t.qAt,this.ayt):this.ayt;void 0===this.gvt?(await this.Ayt.bW(t.evt),this.gvt=new zG(t,this.ayt,h,this.Kut(),this.Vpt),this.gvt.yn(Tc.Frt,this.Ds)):this.gvt.Yn(t,h,this.Kut(),e);const o=this.gvt.pwt;let a;if(0===o.length)a=this.qpt.slice(),No(this.qpt);else{const t=o[0].o;let i=0;for(;i<this.qpt.length&&this.qpt[i].o!==t;)i++;a=this.qpt.splice(0,i);for(let t=0;t<o.length;t++){const i=o[t];let e;t<this.qpt.length?e=this.qpt[t]:(e=new bG(this,i),n.push(e)),r.push(e.Yn(this.vyt,s))}}await Promise.all(r),this.qpt.push(...n);for(const t of a)t.Lpt();this.Co(new Qa)}Kut(){return this.Ayt.Kut()}Ipt(t){const i=this.qpt.indexOf(t);if(i>0)return this.qpt[i-1]}Npt(t){const i=this.qpt.indexOf(t);if(i>=0&&i+1<this.qpt.length)return this.qpt[i+1]}dvt(){return this.gvt?this.gvt.dvt():void 0}Nvt(){return this.gvt&&this.gvt.Nvt()}wpt(t){this.gvt&&this.gvt.wpt(t)}gn(){this.Vo(),this.myt=void 0,this.cyt(!1);for(const t of this.qpt)t.gn();No(this.qpt),this.gvt&&this.gvt.Ud()}constructor(t,i,e,s,n){super(),this.gvt=void 0,this.uyt=!0,this.qpt=[],this.myt=void 0,this.gyt=t,this.ayt=t.Ug,this.vyt=i,this.NS=e,this.pyt=s,this.Ayt=new HG(this.NS,this.pyt,this.gyt.yyt),this.Vpt=n}},XG=class{get Jut(){return this.Mpt}constructor(t,i,e,s,n){this.Mpt=new qG(t,i,e,s,n)}},ZG=1e3,KG=class{get Tr(){return this.gvt}get W(){return this.Myt||(this.Myt=this.mit(this.Tyt.Wd),D(this.Myt)),this.Myt}async mit(t){this.gvt.Jut.Co(new Pn);try{await this.Nyt(t),this.gvt.Jut.cyt(!0)}catch(t){throw Ao(t),this.Myt=void 0,this.gvt.Jut.cyt(!1),new g("The provided MPEG-DASH document could not be loaded - "+t.message)}this.Dyt=this.Iyt(this.Tyt.Wd)}async Iyt(t){try{for(;this.gvt.Jut.Rg===lo.Hx;)await Nr(this.Syt,t)}catch(t){}}get Syt(){return this.gvt.Jut.hyt&&this.gvt.Jut.Rg===lo.Hx?this.Eyt(this.Tyt.Wd):this.W}async byt(t){Bo(t);const i=this.Lyt();if(i>0){const e=_.min(i,2147483647);await lt(e,t)}try{await this.Nyt(t),this.gvt.Jut.cyt(!0)}catch(t){throw new g("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.kyt=void 0}}Lyt(){const t=this.gvt.Jut.Kut().getTime()-this.gvt.Jut.Xpt.getTime();return this.gvt.Jut.$At-t}Cyt(t){const i=this.gvt.Jut.Nvt();if(i){const e=i.getTime()-t.getTime();if(e>0)return e}this.gvt.Jut.wpt(t);const e=this.gvt.Jut.Nvt();return e?e.getTime()-t.getTime():NaN}async Eyt(t){this.kyt||(this.kyt=this.byt(t));const i=new na;i.Xd(t);try{await Promise.race([this.kyt,this.xyt(i.Wd)].filter(Yt))}catch(t){Bc(t)}finally{i.qd()}}xyt(t){const i=this.gvt.Jut.Kut(),e=this.Cyt(i);if(!S(e)&&!this.Tr.Jut.Bvt)return this.Oyt(e,t)}async Oyt(t,i){await lt(t,i);const e=this.gvt.Jut.Kut();this.gvt.Jut.wpt(e)}async jyt(t,i){const e=await this.Pyt.zyt(t,{},i);return(new CY).nvt(e.Byt,e.IS)}gn(){return this.Tyt.qd(),this.Dyt=void 0,this.Myt=void 0,this.kyt=void 0,this.gvt.Jut.gn(),Promise.resolve()}constructor(t,i,e,s,n){this.Tyt=new na,this.Nyt=async t=>{try{const i=this.gvt.Jut.Kut(),e=await this.jyt(this.gvt.Jut.HAt,t);await this.gvt.Jut.Yn(e,i,t)}catch(t){throw Vu(t)&&this.gvt.Jut.cyt(!1),t}},this.Pyt=s,this.gvt=new XG(t,i,e,this.Tyt.Wd,n)}},JG=class extends wn{constructor(t,i){super("Swt"),this.xwt=t,this.Fnt=i}},$G=class extends xd{get Fnt(){return this.Ynt}get Rg(){return this.X0}get Z(){return this.ag.slice()}UI(t){t&&this.Ynt!==t&&this.Ryt(t)}QI(t){this.Ynt===t&&this.Ryt(void 0)}Ryt(t){this.Ynt=t,this.Co(new JG(this,this.Ynt))}gn(){this.Vo();for(const t of this.ag)t.vct=void 0;No(this.ag)}constructor(t,i){super(),this.Ynt=void 0,this.X0=t,this.ag=i;for(const t of this.ag)t.vct=this}};var tV,iV=class extends wn{constructor(t,i,e){super(l.Kg),this.currentTime=t,this.initDataType=i,this.initData=e}};function eV(t,i,e,s,n){let r=[],h=[];for(const t of i)t.Rg===Vt.ym?r=r.concat(t.Z):t.Rg===Vt.pm&&(h=h.concat(t.Z));return[sV(t,r,e,s,null==n?void 0:n.preferredAudioCodecs),nV(t,h,e,s,null==n?void 0:n.preferredVideoCodecs)].filter(Yt)}function sV(t,i,e,s,n){const r=Po(s||[],(t=>t.dht===Vt.ym&&t.Rt)),h=[hV(r,e,t),oV(r),aV(r,n),uV(),t=>{const i=t.filter((t=>"main"===t.zt));return i.length>0?i:t}];return rV(i,h)}function nV(t,i,e,s,n){const r=Po(s||[],(t=>t.dht===Vt.pm&&t.Rt)),h=[hV(r,e,t),aV(r,n),uV(),t=>{const i=t.filter((t=>"main"===t.zt));return i.length>0?i:t}];return rV(i,h)}function rV(t,i){if(0===t.length)return;let e=t;for(const t of i){if(1===e.length)return e[0];e=t(e)}return e[0]}function hV(t,i,e){return s=>{const n=t?t.Hot.o:void 0;if(!Yt(n))return s;const r=null==i?void 0:i.QAt,h=e.QAt,o=r&&h&&r.jM===h.jM,a=Po(s,(t=>t.Hot.o===n));return o&&a?[a]:s}}function oV(t){return i=>{const e=t?t.gs:"",s=i.some((t=>""!==t.gs))?i.filter((t=>""!==t.gs)):i;if(""===e)return s;const n=s.filter((t=>t.gs===e));return n.length>0?n:s}}function aV(t,i){return t=>{if(i&&i.length>0)for(const e of i){const i=t.filter((t=>t.Ng.og.some((t=>Bt(t.mst,e)))));if(i.length>0)return i}return t}}function uV(){return t=>{let i=[],e=-1/0;for(const s of t){const t=s.Hot.LP;t>e?(e=t,i=[s]):t===e&&i.push(s)}return i}}!function(t){t.Uyt="api",t.Qyt="start"}(tV||(tV={}));var cV={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},lV=class{Fyt(t,i,e){const s=this.Rut.maxRetries===1/0?cV:this.Rut;return mu((()=>this.Yyt(t,i,e)),e,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async Yyt(t,i,e){let s;for(const n of t)try{const t=new zu({zu:n,fS:Qv.Ru,lS:i,AS:this.Gyt,dS:Ys.GET,Rg:Ou.XI,gS:jo.rT,Wd:e,CI:15e3,_S:5e3}),s=await this.NS.SI(t),r=await s.DS(e);return{Byt:r,Vyt:n,IS:s.IS}}catch(t){s=t}throw s}constructor(t,i,e=cV){this.NS=t,this.Gyt=i,this.Rut=e}},dV=class{async zyt(t,i,e){let s;for(const n of this.Wyt)try{return await n.zyt(t,i,e)}catch(t){Ao(t),s=t}throw s}constructor(t){this.Wyt=t}},fV=class{async zyt(t,i,e){const s=await this.pot.Cet(t);if(s)return{Byt:s.data,Vyt:s.locationURL,IS:s.responseURL};throw new g("Manifest fetch from cache unsuccesful")}constructor(t){this.pot=t}},_V=class{async zyt(t,i,e){return await this.Hyt.Fyt(t,i,e)}constructor(t){this.Hyt=t}};function gV(t,i){return new dV([new fV(i),new _V(t)])}var wV=class{async zyt(t,i,e){const s=await this.Pyt.zyt(t,i,e);return await this.qyt(s),s}async qyt(t){await this.Xyt.Qet({key:Ti(t.Vyt),locationURL:oa(t.Vyt),responseURL:oa(t.IS),data:t.Byt,references:[this.Zyt.o]})}constructor(t,i,e){this.Pyt=t,this.Xyt=i,this.Zyt=e}},AV=class extends wn{constructor(){super(l._w)}},vV=class extends wn{constructor(){super(l.fw)}},Lo=class extends ci{Kyt(t){return t.Jf=Ua.LOADED,this.tt(t),t}Jyt(t){for(const i of this.Z.og)if(i.Og===t)return i}constructor(){super()}};function mV(t,i){return""===i?t:t+" "+i}var pV=class extends Xn{get va(){return this.Xa||(this.Xa=function(t){return N($h(t),{get attributes(){return t.fI},get eventID(){var i;return""+(null!=(i=t.$yt)?i:"")}})}(this)),this.Xa}aN(t){return this.O===t.O}constructor(t,i,e,s,n){super(t,i,e,!1,null==n?void 0:n.toString()),this.fI=s,this.$yt=n}},yV=class extends Lo{tMt(t){const i=this.MS.yS(Mi.Nm,"","","",void 0,Kc.EVENT_STREAM);return i.Og=t,this.Kyt(i),i}iMt(t,i,e){const s=t.yst;var n;const r=null!=(n=t.jM)?n:"";var h;const o=null!=(h=t.kp)?h:1;var a;const u=null!=(a=t.$wt)?a:Ce.ZERO,c=mV(s,r);let l=this.Jyt(c);l||(l=this.tMt(c));for(const s of t.xF)if(!MV(s,l)){const t=TV(s,o,u,i);t.VT>e&&l.SS(t)}}async $n(t){await this.tr(),this.Ppt=t,this.Ppt.yn(l.lw,this.eMt),this.eMt()}async tr(){this.Ppt&&(this.Ppt.fn(l.lw,this.eMt),this.Ppt=void 0);for(const t of this.Z.og)this.MS.bS(t);await super.tr()}constructor(t){super(),this.Ppt=void 0,this.eMt=()=>{var t,i;const e=null!=(i=null==(t=this.Ppt.dvt())?void 0:t.Cn)?i:0;if(e>0)for(const t of this.Z.og)Rv(t,e);for(const t of this.Ppt.pwt)if(t.jn>e)for(const i of t.FAt)this.iMt(i,t,e)},this.MS=t}};function MV(t,i){const e=t.o;if(void 0!==e){if(Po(i.L.og,(i=>i.$yt===e&&i.O===t.zm)))return!0}return!1}function TV(t,i,e,s){const n=t.o,r=t.zM.toSigned().subtract(e),h=t.ct,o=t.zm,a=t.fI,u=r.toNumber()/i+s.Cn,c=h?h.toNumber()/i:void 0,l=void 0!==c?u+c:s.bpt;return new pV(u,l,o,a,n)}function NV(t,i,e,s,n){const r=[],h=Po(e,(t=>t.yst===Kf));if(void 0===h)return;const o=h.jM?function(t){const i=t.split(":",1)[0];switch(i){case"cbcs":case"cenc":return i;default:return}}(h.jM.toLowerCase()):"cenc";if(void 0!==o){for(const t of e)if(t.yst!==Kf)for(const i of Am(t.yst)){const e=n&&t.Ywt?[t.Ywt]:[];r.push({ZA:i,Mz:e,Tz:void 0,Sj:void 0})}if(r.length)return{jO:t,Ygt:{sMt:o,zO:h.zO},Fgt:r,nMt:i===Vt.ym?s.slice():[],rMt:i===Vt.pm?s.slice():[],H4:!1}}}function DV(t,i){if(!t)return i;if(!i)return t;const e=[],s=Eo();var n;return IV(e,s,t.Fgt),IV(e,s,i.Fgt),{jO:t.jO,Ygt:{sMt:t.Ygt.sMt,zO:null!=(n=t.Ygt.zO)?n:i.Ygt.zO},Fgt:e,nMt:SV(t.nMt,i.nMt,gd),rMt:SV(t.rMt,i.rMt,gd),H4:t.H4||i.H4||!1}}function IV(t,i,e){for(const s of e){const e=s.ZA.Lb;let n;i.has(e)?(n=i.get(e),n.Mz=SV(n.Mz,s.Mz,EV)):(n=Tt({},s),t.push(n),i.set(e,n))}}function SV(t,i,e){const s=t.slice();for(const t of i)e(s,t)||s.push(t);return s}function EV(t,i){for(const e of t)if(wa(e,i))return!0;return!1}function bV(t,i,e){let s;const n=t.pst;if(n){const r=t.CF,h=[];for(const i of t.mst)h.push(r+'; codecs="'+i+'"');s=NV(i||{},t.Rg,n,h,e)}for(const n of t.irt)s=DV(s,LV(n,i,e));return s}function LV(t,i,e){return NV(i||{},t.Rg,t.pst||[],[t.qz],e)}function kV(t){return t?t.Fgt.map((i=>{const e=CV(t.jO,i.ZA),s=t.Ygt.sMt;return{ZA:i.ZA,Mz:i.Mz,Sj:i.Sj,vP:[{initDataTypes:[i.ZA.Eb],audioCapabilities:xV(t.nMt,s,null==e?void 0:e.audioRobustness),videoCapabilities:xV(t.rMt,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]}})):[]}function CV(t,i){switch(i.Rg){case vi.BA:return t.widevine;case vi.PA:return t.playready;case vi.RA:return t.fairplay;case vi.UA:return t.clearkey}}function xV(t,i,e){if(0!==t.length)return t.map((t=>({contentType:t,encryptionScheme:i,robustness:e})))}var OV=class extends Lo{tMt(t){const i=this.MS.yS(Mi.Nm,t.o,"thumbnails","",!1,Kc.DEFAULT);return i.jg=Ha.Jn,this.Kyt(i),i}async $n(t){await this.tr(),this.Ppt=t,this.Ppt.yn(l.lw,this.Yn),this.Yn()}hMt(t){this.oMt(t),this.aMt()}aMt(){const t=[];for(const i of this.Z.og)this.uMt(i)||t.push(i);for(const i of t)this.it(i)}oMt(t){const i=[];for(const e of this.Tct)-1===t.indexOf(e)&&i.push(e);for(const t of i)To(this.Tct,t)}async tr(){this.Ppt&&(this.Ppt.fn(l.lw,this.Yn),this.Ppt=void 0);for(const t of this.Tct)t.fn(Tc.Frt,this.cMt);this.Tct.length=0;for(const t of this.Z.og)this.MS.bS(t);await super.tr()}gn(){return this.cMt=void 0,super.gn()}lMt(){var t,i;const e=null!=(i=null==(t=this.Ppt.dvt())?void 0:t.Cn)?i:0;if(e>0)for(const t of this.Z.og)Rv(t,e)}dMt(t){return this.Z.og.some((i=>i.o===t.o))}fMt(t){return Po(this.Z.og,(i=>i.o===t.o))}uMt(t){return this.Tct.some((i=>t.o===i.o))}constructor(t){super(),this.Tct=[],this.Yn=()=>{const t=[];for(const i of this.Ppt.pwt)for(const e of i.Wnt)if(e.Rg===Vt.nT&&e.irt.length>0){const i=e.irt[0];t.push(i),this.dMt(i)||this.tMt(i),-1===this.Tct.indexOf(i)&&(this.Tct.push(i),i.yn(Tc.Frt,this.cMt)),this._Mt(i)}this.hMt(t)},this._Mt=t=>{const i=this.fMt(t);i&&t&&i.jg!==Ha.Ch&&(this.lMt(),function(t,i){const e=t.lnt,s=t.Tvt();if(!s)return;const n=s.Fvt,r=s.Yvt,h=t.ji,o=t.Ti,[a,u]=function(t){for(const i of t)if(qi(i.yst,zV)||qi(i.yst,PV)){const t=i.jM.match(jV);if(t){const[,i,e]=t;return[Number(i),Number(e)]}}return[1,1]}(t.oAt);let c=n;for(;c&&c.Tot<=r.Tot;){const s=t.pvt.ct||c.ct,n=BV(i,c,t.tut(c).zu,h,o,a,u,s);for(const t of n)i.SS(t);c=e.Kat(c)}}(t,i))},this.MS=t;const i=this;this.cMt=function(){i._Mt(this)}}},jV=/^(\d+)x(\d+)$/,zV="http://dashif.org/guidelines/thumbnail_tile",PV="http://dashif.org/thumbnail_tile";function BV(t,i,e,s,n,r,h,o){const a=[],u=i.GT,c=r*h,l=s/r,d=n/h,f=_.round(l),g=_.round(d),w=o/c;if(1===c){const i=u+w;return RV(t,u,i,e)?a:[new Xn(u,i,e,!1)]}for(let s=0;s<h;s++)for(let n=0;n<r;n++){const h=u+(s*r+n)*w,o=h+w,c=e+"#xywh="+_.round(n*l)+","+_.round(s*d)+","+f+","+g;if(RV(t,h,o,c)||a.push(new Xn(h,o,c,!1)),o>=i.VT)return a}return a}function RV(t,i,e,s){return t.L.og.some((t=>t.GT===i&&t.VT===e&&t.O===s))}var UV=class extends Xn{get OM(){return this.gMt}get jM(){return this.wMt}get AMt(){return this.vMt}get va(){return this.Xa||(this.Xa=function(t){return N($h(t),{get schemeIDURI(){return t.OM},get value(){return t.jM},get emsgID(){return t.AMt}})}(this)),this.Xa}aN(t){return Qi(this.O,t.O)}constructor(t,i,e,s,n,r){super(t,i,r,!1),this.gMt=e,this.wMt=s,this.vMt=n}},QV=class t extends Lo{yut(i,e,s){const n=Lr.fp(ha(i));if(!n)return;const r=function(t,i){const e=[];for(const s of t)gg(s,i)&&e.push(s);return e}(n,Zt.fm);if(r.length){const i=t.mMt(n,e,s);this.pMt(r,i,s)}}pMt(t,i,e){for(const s of t){let t;t=1===s.lp?s.zM.toNumber()/s.kp+e:i+s.RM/s.kp;const n=t+s.PM/s.kp;"https://aomedia.org/emsg/ID3"===s.OM||"https://developer.apple.com/streaming/emsg-id3"===s.OM?this.yMt(s,t):this.MMt(s,t,n)}}MMt(t,i,e){const s=mV(t.OM,t.jM);let n=this.Jyt(s);n||(n=this.TMt(s),this.Kyt(n)),n.SS(new UV(i,e,t.OM,t.jM,t.o,t.BM))}yMt(t,i){const e=cx(ha(t.BM));if(!e)return;const s=mV(t.OM,t.jM);let n=this.Jyt(s);n||(n=this.NMt(s),this.Kyt(n));for(const t of e.M1){const e=new vx(i,t);PC(e,n.L.og),n.SS(e)}}static mMt(t,i,e){const s=ml(t,Zt._m);return s?jc(s.KM,s.kp)+e:i}TMt(t){const i=this.MS.yS(Mi.Nm,"","","",void 0,Kc.EMSG);return i.Og=t,i.jg=Ha.zg,i}NMt(t){const i=this.MS.yS(Mi.Nm,"","","",void 0,Kc.ID3);return i.Og=t,i.jg=Ha.zg,i}async tr(){for(const t of this.Z.og)this.MS.bS(t);await super.tr()}constructor(t){super(),this.MS=t}},FV=class extends QV{async $n(t){await this.tr(),this.Ppt=t,this.Ppt.yn(l.lw,this.eMt),this.eMt()}async tr(){this.Ppt&&(this.Ppt.fn(l.lw,this.eMt),this.Ppt=void 0),await super.tr()}constructor(...t){super(...t),this.eMt=()=>{var t,i;const e=null!=(i=null==(t=this.Ppt.dvt())?void 0:t.Cn)?i:0;this.OI(e)}}};var YV=class{jet(t,i){return this.DMt?this.pot.jet(t,i):Promise.resolve(!1)}Pet(t,i){return this.DMt?this.pot.Pet(t,i):Promise.resolve(void 0)}async Cet(t){const i=await this.pot.Cet(t);return this.DMt=void 0!==i,i}CH(t){return this.pot.CH(t)}constructor(t){this.DMt=!1,this.pot=t}},La=class extends uf{fA(){this.Qo.Mf=1/0}canChangePlaybackRate(){return!0}getMinimumLatencyMargin(){return 0}constructor(t,i,e){super(t,i,e)}},GV=[l.gw,l.Aw,l.Mw,l.dw,l.Tw],VV=[l.ww,l.Ew,l.ew,l.$g],WV=class t extends xd{IMt(t){return!!this.Fz&&this.Fz.gq(t)}async H$(t){this.Fz=await this.sA.$n(t),this.SMt(),this.EMt(),this.Fz.t0(this.ct)}bMt(t){return this.Fz.Aq(t)}async LMt(){this.kMt=this.CMt,this.Fz&&(await this.sA.tr(),this.Fz=void 0)}t$(){this.Fz.t$()}GJ(){const t=this.ct;this.Fz.ct<t&&this.Fz.t0(t),this.Fz.GJ()}async xMt(t){const i=this.Fz,e=[];i.V$&&e.push(Yk(i.V$,t)),i.W$&&e.push(Yk(i.W$,t)),await Promise.all(e)}OMt(t,i,e,s,n,r){const h=this.sA,o=this.Fz;return new JF(h,o,t,i,e,s,n,r,this.jMt,h,this.zgt,this.Rut,this.Kgt)}zMt(t,i,e){return t.Aq(i,e,this.Fz)}async PMt(t,i,e,s){const n=this.OMt(this.NS,this.PB,this.pot,this.bc,t,s);return n.yn(Tc.Grt,this.BMt),n.yn(l.dw,this.Ds),await n.bW(i,e),n}RMt(t){void 0===t&&(t=!1),this.UMt.qd(),this.V2.qd(),this.QMt.qd(),this.QMt=new na,this.FMt=this.YMt(this.GMt,this.W2,this.FMt,t,this.QMt.Wd).catch(this.Cwt)}async YMt(t,i,e,s,n){await Promise.all([t,i,e]),Bo(n),await Nr(this.VMt.Zb,n);const r=this.WMt;await r.Tht(),this.GJ(),Bo(n);const h=r.yc,o=r.kwt,a=r.Lwt;let u=this.HMt(h,a,h,o,!1),c=this.qMt(a,u);!s&&this.IMt(c)?await this.XMt(a,u,c):(u=this.HMt(h,a,h,o,!0),c=this.qMt(a,u),await this.ZMt(a,u,c,n)),Bo(n),this.e_?this.Sm(this.Mf):this.KMt(),this.JMt()}async XMt(t,i,e){const s=this.WMt;await this.bMt(e),this.$Mt=e,await this.zMt(s,t,i),await s.Dht(M.rrt)}async ZMt(t,i,e,s){const n=this.WMt;this.K2(),this.tTt();const r=this.iTt;await this.LMt(),await this.H$(e),this.$Mt=e,await this.zMt(n,t,i);try{const t=this.eTt(r,!1,!0,s);await n.Dht(M.rrt),await t}finally{this.n3(),this.sTt()}}get ht(){return this.dT}get jz(){const t=this.iTt,i=this.nTt,e=i.fB(t);if(-1!==e)return{Cn:i.Cn(e),jn:i.jn(e)}}get nTt(){var t,i,e;const s=null!=(e=null==(t=this.WMt)?void 0:t.wf)?e:Ai.SB();var n;const r=null!=(n=null==(i=this.rTt)?void 0:i.wf)?n:Ai.SB();return s.cB(r)}get wf(){return this.nTt.ks()}get vf(){var t;const i=null==(t=this.gvt)?void 0:t.Jut,e=null==i?void 0:i.WAt;if(!i||!e)return;const s=e.getTime(),n=1e3*this.Mf;return new Date(n+s)}set vf(t){var i;const e=null==(i=this.gvt)?void 0:i.Jut,s=null==e?void 0:e.WAt;if(!t||!e||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.Sm(r-n)}get bt(){return this.bc}get iTt(){return void 0!==this.f2?this.f2:void 0!==this.hTt?this.hTt:this.sA.Mf}get Mf(){return this.iTt}set Mf(t){this.Sm(t,t===1/0)}get ct(){let t=NaN;return this.WMt&&this.WMt.mwt?t=this.WMt.jn:this.gvt&&void 0!==this.gvt.Jut.Rg&&(t=this.gvt.Jut.KAt?this.gvt.Jut.KAt.jwt():1/0),t}get jn(){return this.ct}get If(){return!(!this.WMt||!this.WMt.mwt)&&(this.e_?this.iTt===this.WMt.jn:this.sA.If)}get lt(){return this.Bz}get bf(){return this.Rz}get kf(){}oTt(){var t;const i=this.aTt;if(0===i.U)return!0;var e;return(null!=(e=null==(t=this.jz)?void 0:t.jn)?e:this.iTt)>=i.Cn(0)}uTt(){var t;if(!this.gvt)return!1;if(this.gvt.Jut.Rg!==lo.Hx)return!1;const i=null==(t=this.WMt)?void 0:t.yc;if(i&&i.Vrt)return!0;const e=[];for(const t of this.gvt.Jut.pwt){const i=t.lvt,s=t.bpt;void 0!==i&&void 0!==s&&e.push(i,s)}const s=new Ai(e).uB();return function(t,i,e){if(!i.U||!e.U)return Ai.SB();const s=i.Cn(0),n=i.jn(i.U-1),r=t.Sn(e).hB().Sn(t).cB(i);return Ai.IB(r.Cn(0),r.jn(r.U-1)).lB(r).mB(((t,i)=>t<s&&i<=n&&i-t>Jc))}(this.nTt,this.aTt,s).U>0}get jf(){return Tt({},this.CMt,{mT:Yo.Ib.ez(),pT:this.cTt,yT:{amountOfBufferedAudioSegments:this.lTt,amountOfBufferedVideoSegments:this.dTt}})}get CMt(){return function(t,i){return{wT:t.wT+i.wT,AT:t.AT+i.AT,vT:t.vT+i.vT}}(this.kMt,this.sA.zf())}get Pf(){return this.sA.Pf}set Pf(t){this.sA.Pf=t}get Ff(){return this.g2?this.fTt:this.WMt&&this.WMt.mwt?this._Tt:this.fTt}get Gf(){return this.sA.Gf}set Gf(t){this.sA.Gf=t}get Hf(){let t=this.Uo;return this.WMt&&(t=t.cB(this.gTt)),t.uB(.1).ks()}get gTt(){return this.sA.Hf}wTt(t){this.Uo=this.Uo.cB(t)}get Xf(){return this.Qz}set Xf(t){this.Qz=t,this.ATt()}get Jf(){let t=this.sA.Jf;return this.vTt&&(t=_.max(ae.Xn,t)),t}get aTt(){return this.mTt(!1)}get pTt(){return this.mTt(!0)}get t_(){return this.aTt.ks()}get e_(){return this.bB||this.yTt}get yTt(){return this.sA.e_}get m0(){return this.sA.m0}get Yz(){}get MTt(){var t,i;return null!=(i=null==(t=this.gvt)?void 0:t.Jut.Rg)?i:lo.Wx}get nt(){return this.Dl}get rt(){return this._T}get r_(){var t;return this.TTt||(null==(t=this.NTt())?void 0:t.Ti)||0}get a_(){var t;return this.DTt||(null==(t=this.NTt())?void 0:t.ji)||0}get c_(){return this.sA.c_}set c_(t){this.sA.c_=ks(t,0,1)}get f_(){return this.Gz}get g_(){return!1}set g_(t){}get Vz(){return this.Wz}ITt(t){t.yn(GV,this.Ds),t.yn(l.Dw,this.STt),t.yn(l.Yg,this.ETt),t.yn(ut.ha,this.bTt),t.yn(l.Vg,this.LTt),t.yn(l.Aw,this.kTt),t.yn("Swt",this.CTt),t.yn("hwt",this.CTt)}xTt(t){t.fn(GV,this.Ds),t.fn(l.Dw,this.STt),t.fn(l.Yg,this.ETt),t.fn(ut.ha,this.bTt),t.fn(l.Vg,this.LTt),t.fn(l.Aw,this.kTt),t.fn("Swt",this.CTt),t.fn("hwt",this.CTt)}OTt(t){t.yn(l.gw,this.Ds)}jTt(t){t.fn(l.gw,this.Ds)}NTt(){if(!this.WMt)return;const t=Po(this.WMt.Lwt,(t=>t.dht===Vt.pm));return t?t.yg:void 0}mTt(t){var i;const e=null==(i=this.gvt)?void 0:i.Jut;if(!e)return Ai.SB();const s=e.dyt;let n=t?e.Spt:e.Svt;if(void 0===s||void 0===n)return Ai.SB();if(!t){const t=this.gTt;t.U>0&&t.jn(t.U-1)>n&&(n=_.min(t.jn(t.U-1),e.Spt))}const r=this.ct;return isFinite(r)&&r>n&&(n=r),Ai.IB(s,n).nB()}async $n(t,i){let e,s;Bo(i);const n=this.gvt.Jut;try{e=n.fyt,s=n.lyt}catch(t){throw new g("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!e)throw new g("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new g("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.zTt(t.textTracks),this.K2();const r=this.Vnt(e),h=eV(e,r,void 0,void 0,this.fwt),o=this.HMt(e,h,e,h,!0);h.forEach((t=>t.Rt=!0));const a=this.qMt(h,o);await this.H$(a),this.$Mt=a,Bo(i);const u=await this.PMt(e,r,h,o);Bo(i),this.PTt(u),this.n3(),Bo(i),await u.Dht(),Bo(i),this.BTt||this.Sm(s,!0,tV.Qyt)}KMt(){this.UMt.qd(),this.UMt=new na,this.GMt=this.RTt(this.GMt,this.FMt,this.UMt.Wd).catch(this.Cwt)}UTt(){this.UMt.qd()}async RTt(t,i,e){for(await Promise.all([t,i]),Bo(e);;){var s;const t=null==(s=this.WMt)?void 0:s.yc;if(!t){0;break}if(!await this.QTt(t,e)){0;break}}}async QTt(t,i){var e;Bo(i);const s=this.WMt;for(0;this.gvt.Jut.Rg===lo.Hx&&void 0===(null==(e=this.Npt(t))?void 0:e.lvt);)await Nr(this.FTt.Syt,i),await this.YTt();for(Bo(i),await this.YTt(),Bo(i);!s._wt();)await s.lf(Mr.Hct,i),await this.YTt();Bo(i),await this.YTt(),Bo(i);const n=this.Npt(t);return n?(this.GTt(n)?await this.VTt(n,i):await this.WTt(n,i),!0):(this.t$(),!1)}GTt(t){var i,e,s,n,r;const h=null!=(r=null==(i=this.bc)?void 0:i.seamlessSwitchStrategy)?r:Bn.iT;if(h===Bn.hT)return!0;if(h===Bn.oT)return!1;const o=this.WMt,a=null==o?void 0:o.yc,u=null==o?void 0:o.Lwt,c=eV(t,this.Vnt(t),a,u,this.fwt),l=this.HMt(t,c,a,u,!1);if(h===Bn.CLEAR_ONLY&&((null==(e=this.WMt)?void 0:e.Qgt)||l)||h===Bn.SAME_DRM_ONLY&&!((null==(s=this.WMt)?void 0:s.Qgt)&&l||!(null==(n=this.WMt)?void 0:n.Qgt)&&!l))return!1;const d=this.qMt(c,l);return this.IMt(d)}HTt(){return!0}qTt(t){const i=this.XTt();for(const e of i)e!==t&&(e.jg=Ha.Ch)}JMt(){if(void 0!==this.ZTt){if(this.ZTt.Bg){const t=Po(this.ht.og,(t=>t.Rt));void 0!==t&&this.ZTt.gs===t.gs||(this.ZTt.jg=Ha.Ch)}}else this.KTt()}KTt(){if(this.XTt().length)return;const t=Po(this.ht.og,(t=>t.Rt));if(void 0===t)return;const i=this.nt.og.filter((t=>t.Bg));for(const e of i)if(e.gs===t.gs)return e.jg=Ha.Jn,void(this.ZTt=e)}XTt(){return this.nt.og.filter((t=>t.jg===Ha.Jn&&(t.zt===Mi.yI||t.zt===Mi.Mm)))}JTt(t){if(t&&this.ZTt){const i=function(t,i){if(""===t.gs)return;return i.filter((i=>i.gs===t.gs))[0]}(this.ZTt,t.nt.og);i&&(i.jg=Ha.Jn)}}async VTt(t,i){var e,s;const n=this.WMt;let r=this.rTt;const h=this.$Mt;try{Bo(i);const e=n.yc,s=n.Lwt,h=this.Vnt(t),o=eV(t,h,e,s,this.fwt),a=this.HMt(t,o,e,s,!1);o.forEach((t=>t.Rt=!0));const u=this.qMt(o,a);for(0,await n.Tht(),this.GJ(),Bo(i),r&&r.yc===t?(this.IMt(u)&&await this.bMt(u),this.$Mt=u):(r&&await r.gn(!0),this.IMt(u)&&await this.bMt(u),this.$Mt=u,r=await this.PMt(t,h,o,a),this.rTt=r,this.OTt(r),this.$Tt.fg=r.nt),await r.Dht(),Bo(i);this.iTt<t.Cn;)await this.sA.lf(l.Sw,i);Bo(i),this.PTt(r)}catch(t){throw Ho(t)&&(r&&await r.Tht(),h&&this.$Mt!==h&&(this.IMt(h)&&await this.bMt(h),this.$Mt=h)),t}(null==(s=this.bc)||null==(e=s.dash)?void 0:e.forceSeekToSynchronize)&&await this.tNt(t,i)}async tNt(t,i){const e=Date.now()/1e3;if(void 0===this.iNt)this.iNt=e;else if(e-this.iNt>900){this.iNt=e,this.tTt();const s=_.max(this.iTt,t.Cn);try{await this.eTt(s,!1,!0,i)}finally{this.sTt()}}}async WTt(t,i){for(Bo(i),await this.WMt.Tht(),this.GJ(),await this.xMt(t.Cn),Bo(i),this.t$();!this.sA.If&&this.iTt<t.Cn;)await this.sA.lf([l.Sw,l.Jg],i);Bo(i);const e=this.WMt.yc,s=this.WMt.Lwt,n=this.Vnt(t),r=eV(t,n,e,s,this.fwt),h=this.HMt(t,r,e,s,!0);r.forEach((t=>t.Rt=!0));const o=this.qMt(r,h);this.WMt&&(this.eNt.fn(qo.ra,this.sNt),await this.WMt.gn(),this.eNt.yn(qo.ra,this.sNt),this.WMt=void 0),this.rTt&&(await this.rTt.gn(),this.rTt=void 0),this.tTt(),this.K2();const a=_.max(this.iTt,t.Cn);await this.LMt(),await this.H$(o),this.$Mt=o;const u=await this.PMt(t,n,r,h);this.PTt(u);try{const t=this.eTt(a,!1,!0,i);await u.Dht(),await Na((i=>Promise.race([t,u.lf([Mr.Hct],i)])),i)}finally{this.n3(),this.sTt()}}async YTt(){const t=this.rTt;t&&t.yc.Vrt&&(await t.gn(!0),this.rTt=void 0)}static nNt(t,i){const e=[],s=[];let n=!i.some((t=>t.Qct.some((t=>"main"===t.jM))));for(const t of i){if(-1!==e.indexOf(t))continue;const r=qV(t.cct.concat(t.Qct),n);n=!1;const h=t.irt.map((t=>t.Hrt)),o=new cQ(t,h,r),a=XV(t,i);for(const t of a)o.Nct(t),e.push(t);s.push(o)}return new $G(t,s)}Vnt(i){const e=[],s=[];for(const t of i.uwt)t.Rg!==Vt.ym&&t.Rg!==Vt.pm||(0===t.irt.length?this.Co(new wQ("No supported representation found in the AdaptationSet with mimetype : "+t.Rg)):t.Rg===Vt.ym?e.push(...t.Wnt):s.push(...t.Wnt));const n=[];return e.length>0&&n.push(t.nNt(Vt.ym,e)),s.length>0&&n.push(t.nNt(Vt.pm,s)),n}qMt(t,e){var s,n,r,h,o,a,u,c;const l=t.map((t=>{var i;return xU.wut(null!=(i=t.Mct)?i:t.irt,Ug(t.dht,this.fwt))})).map((t=>({qz:t.qz}))),d=null==(n=this.bc)||null==(s=n.dash)?void 0:s.desiredTimescale;var f;const _=(null==(r=this.bc)?void 0:r.seamlessSwitchStrategy)!==Bn.oT&&(null==(h=this.bc)?void 0:h.seamlessSwitchStrategy)!==Bn.CLEAR_ONLY&&(null==(o=this.bc)?void 0:o.seamlessSwitchStrategy)!==Bn.SAME_DRM_ONLY&&(null!=(f=null==(u=this.bc)||null==(a=u.dash)?void 0:a.needsTimescaleShifting)?f:i.Ys.ZJ),g=null==(c=this.bc)?void 0:c.useManagedMediaSource;return{Rg:ai.Hx,r0:l,Xz:kV(e),H4:null==e?void 0:e.H4,ZJ:_,KJ:d,w0:g}}static rNt(t,i){if(!t.length)return;let e;for(const s of t){const t=0===s.Sct.length;e=DV(e,bV(s.Hot,i,t))}return(null==i?void 0:i.preferredKeySystems)&&e&&(e.Fgt=function(t,i){const e=t=>{const e=i.indexOf(t.ZA.Lb);return e>=0?e:i.length};return qc(t,((t,i)=>e(t)-e(i)))}(e.Fgt,i.preferredKeySystems)),e}HMt(i,e,s,n,r){var h,o;const a=this.bc.contentProtection;let u=t.rNt(e,a);if(void 0!==u)return u;var c;const l=null!=(c=null==(h=this.bc)?void 0:h.seamlessSwitchStrategy)?c:Bn.iT;if(l===Bn.oT||l===Bn.CLEAR_ONLY||l===Bn.SAME_DRM_ONLY)return;const d=null==(o=this.WMt)?void 0:o.Qgt;if(!r&&void 0!==d){const t=!d.H4;if(l===Bn.iT&&t&&!this.HTt())return;return d}const f=!r&&l===Bn.iT;return u=this.hNt(i,a,s,n,f),void 0!==u?(u.H4=!0,u):void 0}hNt(i,e,s,n,r){let h=i,o=!1;for(;;){if(h=o?this.Ipt(h):this.Npt(h),void 0===h){if(o)return;o=!0,h=i;continue}const a=eV(h,this.Vnt(h),s,n,this.fwt),u=t.rNt(a,e);if(r){const t=this.qMt(a,u);if(!this.IMt(t))return}if(void 0!==u)return u}}zTt(t){for(const i of t)i.src&&this.nP.pS(i);Se(this.nP.Z)}m_(){var t;const i=this.Ff;this.fTt=!0,i||(this.g2||(this.oNt(new pe),this.aNt()),(null==(t=this.Oz)?void 0:t.Ww)&&this.Oz.m_(),this.uNt())}p_(){this.cNt||(this.cNt=new Rs),this.lNt();const t=this.cNt.Zb;return D(t),t}lNt(){if(this.fTt=!1,this.L2=!0,this.ATt(),this.If){const t=this.aTt;t.U>0&&this.Sm(t.Cn(0))}this.g2||this.O2().then(this.dNt,this.oNt),this.BMt(),this.uNt()}get _Tt(){return this.sA.Ff}O2(){return this.sA.p_()}aNt(){this.sA.m_()}K2(){this.g2||(this.fTt=this.Ff,this.g2=!0,this.aNt())}n3(){this.g2&&(this.g2=!1,this.fTt||this.O2().then(this.dNt,this.oNt),this.BMt(),this.uNt())}uNt(){const t=this.hO,i=this.Ff;t!==i&&(this.hO=i,i?this.Co(new ge(this.Mf)):this.Co(new sh(this.Mf)))}Sm(t,i,e){return void 0===i&&(i=!1),void 0===e&&(e=tV.Uyt),this.BTt=!0,this.UMt.qd(),this.V2.qd(),this.bB=!0,this.f2=t,this.wTt(this.gTt),this.fNt(new Eh(this.Mf)),this.V2=new na,this.W2=this.H2(t,this.GMt,this.W2,this.FMt,this.V2.Wd,i,e).catch(this.Cwt),this.W2}_Nt(){this.V2.qd()}async H2(t,i,e,s,n,r,h,o){var a;void 0===r&&(r=!1),void 0===h&&(h=tV.Uyt),void 0===o&&(o=!1),null==(a=this.Oz)||a.y_();try{var u,c;0,await Promise.all([i,e,s]),Bo(n),await Nr(this.VMt.Zb,n);const a=this.aTt.rB(t);this.f2=a;const l=o||(null==(c=this.bc)||null==(u=c.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&a<=this.Mf,d=this.gNt(a),f=this.WMt;if(l||!f||!f.t_.gr(a)&&h!==tV.Qyt&&f.yc!==d){if(d){let t=this.rTt;if(this.K2(),f&&await f.Tht(),t&&t.yc===d&&!l){const i=this.qMt(t.kwt,t.Qgt);this.GJ(),this.IMt(i)&&await this.bMt(i),this.$Mt=i}else{t&&await t.gn(!0);const i=this.Vnt(d),e=null==f?void 0:f.yc,s=null==f?void 0:f.Lwt,n=eV(d,i,e,s,this.fwt);let r=this.HMt(d,n,e,s,!1);n.forEach((t=>t.Rt=!0));let h=this.qMt(n,r);this.GTt(d)&&!l?(this.GJ(),this.IMt(h)&&await this.bMt(h)):(r=this.HMt(d,n,e,s,!0),h=this.qMt(n,r),f&&(this.eNt.fn(qo.ra,this.sNt),await f.gn(),this.eNt.yn(qo.ra,this.sNt),this.WMt=void 0),await this.LMt(),await this.H$(h)),this.$Mt=h,t=await this.PMt(d,i,n,r),this.rTt=t,this.$Tt.fg=t.nt,this.OTt(t)}await t.Dht(M.ort),this.PTt(t)}}else{0;const t=this.rTt;if(t&&!t.ywt){await t.Tht(),this.GJ();const i=this.qMt(f.kwt,f.Qgt);this.IMt(i)&&await this.bMt(i),this.$Mt=i}}0;const _=this.eTt(a,r,!1,n);this.f2=void 0,await this.WMt.Dht(M.ort),Bo(n),this.KMt(),await _,Bo(n),this.n3(),this.bB=!1,this.wNt(new we(this.Mf)),this.ANt()}catch(t){if(Ho(t))return void 0;0}}ANt(){if(this.Ff||this.e_||void 0===this.cA)return;const t=this.Mf;var i,e;this.Mf+this.cA-this.f_.wd.maximumOffset<t?null==(i=this.Oz)||i.Cn():null==(e=this.Oz)||e.y_()}async eTt(t,i,e,s){let n,r,h=!0,o=t;for(;;){const a=this.pTt;if(a.U>0){const i=a.rB(t);o!==i&&(a.gr(o)&&this.gvt.Jut.Rg===lo.Hx||(o=i,h=!0))}if(h)h=!1,n&&D(n),null==r||r.qd(),r=new na,r.Xd(s),n=this.vNt(o,i,e,r.Wd);else if(!this.yTt&&!this.m0)break;await Na((t=>Promise.race([n,this.lf([l.Mw,l.Xg],t),this.gvt.Jut.lf(Tc.Frt,t)])),s)}}async vNt(t,i,e,s){for(this.sA.Sm(t,i,e);this.yTt||this.m0;)await this.sA.lf([l.pw,l.aw],s)}tTt(){void 0===this.hTt&&(this.hTt=this.iTt,this.sA.fn(l.yw,this.fNt),this.sA.fn(l.pw,this.wNt))}sTt(){if(void 0===this.hTt)return;const t=this.iTt;this.hTt=void 0,this.sA.yn(l.yw,this.fNt),this.sA.yn(l.pw,this.wNt),this.iTt!==t&&this.wc()}mNt(t){this.Uo=this.Uo.cB(t)}gNt(t){const i=this.gvt.Jut,e=i.pwt.filter((t=>t.ct>=.2));if(0===e.length)return;const s=e[0];if(t<=s.Cn)return s;for(const i of e)if(i.jn>t)return i;return i.Rg!==lo.Hx?e[e.length-1]:void 0}Ipt(t){let i=t.Dpt;for(;i&&i.ct<.2;)i=i.Dpt;return i}Npt(t){let i=t.Tpt;for(;i&&i.ct<.2;)i=i.Tpt;return i}async ga(t,e,s){var n;if(this.$z.mz(t.contentProtection),this.pNt(),this.bc&&!ew(this.bc)&&await this.tr(),!t||ew(t))return;this.ES=new na,s&&this.ES.Xd(s),this.bc=t,this.yNt=e,this.fwt=t.abr,this.Kgt=t.ignoreEmbeddedTextTrackTypes;const r=gV(new lV(this.NS,Boolean(this.bc.useCredentials),this.Rut),this.pot);var h;if(this.cyt(!0),this.FTt=new KG({Ug:i.Dh(this.bc.src),wyt:null!=(h=null==(n=this.bc.latencyConfiguration)?void 0:n.targetOffset)?h:this.bc.liveOffset,yyt:this.bc.timeServer,AS:this.bc.useCredentials},this.MNt(this.fwt),this.NS,r,this.bc.dash),this.gvt=this.FTt.Tr,this.gvt.Jut.yn(l.cw,this.TNt),this.gvt.Jut.yn(l.lw,this.NNt),this.gvt.Jut.yn(EG.Opt,this.DNt),this.gvt.Jut.yn(Tc.Frt,this.BMt),await this.INt.$n(this.gvt.Jut),await this.SNt.$n(this.gvt.Jut),gd(this.Kgt,Kc.EMSG)||(this.zgt=new FV(this.MS),this.Dl.Dz(this.zgt.Z),await this.zgt.$n(this.gvt.Jut)),t.latencyConfiguration){const i=t.latencyConfiguration;this.Oz=new La(this,this.sA,i),this.Oz.Rt=!0,this.Gz.ka(this.Oz)}this.ATt()}async ENt(){const t=this.gvt.Jut.Uf;var i,e;(this.cyt(t),t)?this.CTt():(await Promise.all([null==(i=this.WMt)?void 0:i.Tht(M.Mrt),null==(e=this.rTt)?void 0:e.Tht(M.Mrt)].filter(Yt)),this.UTt(),this._Nt(),this.QMt.qd())}get Uf(){return this.uyt}cyt(t){this.uyt!==t&&(this.uyt=t,this.Co(t?new AV:new vV))}ATt(){return this.gvt?(this.bNt=this.LNt(this.bNt,this.ES.Wd),this.bNt.catch(this.Cwt)):Promise.resolve()}async LNt(t,i){t&&(await t,Bo(i));try{this.Xf===wo.iT||this.L2?await this.kNt(i):this.Xf===wo.Nm&&await this.CNt(i)}catch(t){throw Ao(t),this.IP(new $i(Ui.MANIFEST_LOAD_ERROR,t.message,t)),t}}async kNt(t){await this.CNt(t),this.xNt||(this.xNt=!0,this.VMt.Xd(this.$n(this.yNt,t)));try{await this.VMt.Zb}catch(t){Ao(t),this.IP(new $i(Ui.MEDIA_DECODE_ERROR,t.message,t))}}async CNt(t){await Nr(this.FTt.W,t);const i=this.gvt.Jut;if(void 0===this.Oz&&i.Rg===lo.Hx){const t=i.svt,e=(null==t?void 0:t.Qpt)?(null==t?void 0:t.Qpt)/1e3:i._yt,s={minimumOffset:(null==t?void 0:t.Bpt)?(null==t?void 0:t.Bpt)/1e3:.5*e,maximumOffset:(null==t?void 0:t.Upt)?(null==t?void 0:t.Upt)/1e3:1.5*e,targetOffset:e,forceSeekOffset:2.5*e,minimumPlaybackRate:of,maximumPlaybackRate:Da};this.Oz=new La(this,this.sA,s),this.Gz.ka(this.Oz)}}PTt(i){const e=this.WMt;i!==e&&(this.WMt&&this.xTt(this.WMt),this.rTt&&this.jTt(this.rTt),e&&this.wTt(this.gTt),this.WMt=i,this.rTt=e,this.ITt(this.WMt),this.rTt&&this.OTt(this.rTt),this.dT.fg=i.ht,this._T.fg=i.rt,this.JTt(i),this.eNt.fn(qo.ra,this.sNt),t.ONt(this.eNt),this.eNt.yn(qo.ra,this.sNt),this.eNt.fg=i.nt,this.$Tt.fg=void 0,this.KTt())}static ONt(t){for(const i of t.og)i.jg=Ha.Ch}ge(){this.sA.ge()}be(){this.sA.be()}IP(t){this.Bz||(D(this.tr()),this.Bz=Ki(t),this.Rz=t,this.Co(new Dr(t)))}pNt(){this.Bz=void 0,this.Rz=void 0}SMt(){const t=this.Fz;t&&(t.W$&&(t.W$.NW=this.PB.jW),t.V$&&(t.V$.NW=this.PB.jW))}EMt(){const t=this.Fz;t&&(t.W$&&(t.W$.EW=this.PB.EW),t.V$&&(t.V$.EW=this.PB.EW))}determineStallJumpTarget(){if(this.WMt)return this.WMt._wt()&&this.Mf>this.WMt.jn-Rk&&!this.WMt.mwt?this.WMt.jn:void 0}async tr(){if(this.jNt)return this.jNt;try{this.jNt=this.zNt(),await this.jNt}finally{this.jNt=void 0}}async zNt(){this.Gf=1,this.ES.qd(),this._Nt(),this.UTt(),this.QMt.qd(),this.VMt.qd(),this.BTt=!1,this.m_(),this.L2=!1,this.dT.fg=void 0,this._T.fg=void 0,this.eNt.fg=void 0,this.$Tt.fg=void 0,this.bNt&&(await this.bNt.catch(qt),this.bNt=void 0),await Promise.all([this.GMt,this.W2,this.FMt,this.VMt.Zb.catch(qt)]),this.WMt&&(await this.WMt.gn(!0),this.WMt=void 0),this.rTt&&(this.jTt(this.rTt),await this.rTt.gn(!0),this.rTt=void 0),await this.LMt(),this.$Mt=void 0,this.ZTt=void 0,this.hP.tr(),await this.INt.tr(),await this.SNt.tr(),void 0!==this.zgt&&(this.Dl.Ez(this.zgt.Z),await this.zgt.gn(),this.zgt=void 0),this.MS.tr(),this.gvt&&(this.gvt.Jut.fn(l.cw,this.TNt),this.gvt.Jut.fn(l.lw,this.NNt),this.gvt.Jut.fn(EG.Opt,this.DNt),await this.FTt.gn(),this.gvt=void 0),this.vTt=!1,this.PNt=NaN,this.BNt=0,this.RNt=0,this.hTt=void 0,this.g2=!1,this.Uo=Ai.SB(),this.hO=!0,this.f2=void 0,this.UNt=!1,this.bB=!1,this.xNt=!1,this.VMt=new Rs,this.cTt=0,this.lTt=0,this.dTt=0,this.bc=void 0,this.yNt=void 0,this.Kgt=[],this.iNt=void 0,this.Gz.tr(),this.Oz=void 0,this.kMt={wT:0,AT:0,vT:0},await this.nP.tr(),this.sA.rP()}async gn(){this.Vo(),this.pNt(),await this.tr(),this.Vo(),this.dT.gn(),this._T.gn(),this.eNt.gn(),this.$Tt.gn(),this.Dl.gn(),this.hP.gn(),this.QNt.Ud(),await this.INt.gn(),await this.SNt.gn(),this.MS.gn(),this.sA.fn(l.Xg,this.V3),this.sA.fn(Ke.Kg,this.s2),this.sA.fn(l.Jg,this.F3),this.sA.fn(l.yw,this.fNt),this.sA.fn(l.pw,this.wNt),this.sA.fn(l.mw,this.kTt),this.sA.fn(l.Sw,this.wc),this.sA.fn([l.jh,l.Sh],this.FNt),this.sA.fn(VV,this.Ds),await this.nP.gn(),this.Dl.gn(),this.PB.fn("TW",this.YNt),this.PB.fn("SW",this.GNt),this.sA.fn(ut.ha,this.VNt),this.sA.fn([l.Wg,l.Vg],this.Ds),this.sA.uP=void 0,this.sA.o5=void 0}w_(){return this.sA.ya}get xf(){return!1}M_(){return!1}T_(){}N_(){}D_(){}I_(){this.RMt(!0)}get cA(){var t;const i=null==(t=this.gvt)?void 0:t.Jut;if(i&&i.Rg===lo.Hx&&i.WAt)return i.Kut().getTime()/1e3-i.WAt.getTime()/1e3-this.Mf}constructor(t,i,e,s,n,r,h){super(),this.WMt=void 0,this.rTt=void 0,this.L2=!1,this.PNt=NaN,this.Bz=void 0,this.Rz=void 0,this.g2=!1,this.hTt=void 0,this.f2=void 0,this.UNt=!1,this.BNt=0,this.RNt=0,this.vTt=!1,this.ES=new na,this.VMt=new Rs,this.xNt=!1,this.gvt=void 0,this.FTt=void 0,this.uyt=!0,this.fTt=!0,this.cNt=void 0,this.Uo=Ai.SB(),this.Qz=wo.FP,this.bNt=void 0,this.hO=!0,this.bc=void 0,this.yNt=void 0,this.fwt=void 0,this.Kgt=[],this.bB=!1,this.UMt=new na,this.GMt=Promise.resolve(),this.V2=new na,this.W2=Promise.resolve(),this.BTt=!1,this.QMt=new na,this.FMt=Promise.resolve(),this.$Mt=void 0,this.zgt=void 0,this.cTt=0,this.lTt=0,this.dTt=0,this.Wz=new lN,this.iNt=void 0,this.kMt={wT:0,AT:0,vT:0},this.Fz=void 0,this.Oz=void 0,this.CTt=()=>{this.RMt()},this.wc=()=>{this.Co(new Pc(this.Mf,this.vf))},this.s2=t=>{this.Co(new iV(this.Mf,t.Eb,t.Ub))},this.STt=t=>{this.cTt+=t.pT,this.Co(t)},this.ETt=t=>{const i=t.segments.filter((t=>t.bat));t.track===Vt.ym?this.lTt=i.length:t.track===Vt.pm&&(this.dTt=i.length)},this.V3=()=>{const t=this.ct;S(t)||t===this.PNt||(this.PNt=t,this.Co(new jn(this.PNt)))},this.FNt=()=>{this.BMt(),this.uNt()},this.F3=t=>{this.If&&this.Co(t)},this.NNt=t=>{this.Ds(t),this.vTt||(this.vTt=!0,this.QNt.WNt())},this.TNt=()=>{this.gvt.Jut.fn(l.cw,this.TNt),this.Co(new Pn)},this.LTt=t=>{this.IP(t.errorObject),this.Co(t)},this.bTt=t=>{this.IP(t.errorObject)},this.Cwt=t=>{Ho(t)||this.IP(new $i(Ui.MEDIA_DECODE_ERROR,t.message,t))},this.BMt=()=>{if(!this.Ff)if(this.oTt())if(this.uTt()){const t=this.gvt.Jut.lyt;this.Sm(t,!0)}else;else{const t=this.gvt.Jut.lyt;this.Sm(t,!0)}},this.fNt=t=>{this.UNt=this.e_,this.Co(t)},this.wNt=t=>{const i=this.UNt,e=this.e_;this.UNt=e,i&&!e&&this.Co(t)},this.kTt=()=>{const t=this.a_,i=this.r_;this.BNt===t&&this.RNt===i||(this.BNt=t,this.RNt=i,this.Co(new lm))},this.sNt=t=>{const i=t.Lt;i.jg===Ha.Jn?(this.qTt(i),this.ZTt=i):i===this.ZTt&&i.jg===Ha.Ch&&(this.ZTt=void 0,this.KTt())},this.dNt=()=>{this.g2||this.cNt&&(this.cNt.Wb(),this.cNt=void 0)},this.oNt=t=>{this.g2||this.cNt&&(this.cNt.qb(t),this.cNt=void 0)},this.DNt=()=>{this.ENt().catch(this.Cwt)},this.VNt=t=>{this.IP(Hs(t.lt))},this.YNt=()=>{this.SMt()},this.GNt=()=>{this.EMt()},this.NS=t,this.pot=new YV(n),this.sA=r,this.jMt=h,this.PB=e,this.PB.yn("TW",this.YNt),this.PB.yn("SW",this.GNt),this.Gz=s,this.Rut=i.retryConfiguration,this.dT=new Ms,this._T=new Ms,this.$z=new dN(t),this.sA.yn(l.Xg,this.V3),this.sA.yn(Ke.Kg,this.s2),this.sA.yn(l.Jg,this.F3),this.sA.yn(l.yw,this.fNt),this.sA.yn(l.pw,this.wNt),this.sA.yn(l.mw,this.kTt),this.sA.yn(l.Sw,this.wc),this.sA.yn([l.jh,l.Sh],this.FNt),this.sA.yn(VV,this.Ds),this.sA.yn(ut.ha,this.VNt),this.sA.uP=this.$z,this.sA.o5=this,this.sA.yn([l.Wg,l.Vg],this.Ds),this.QNt=new HV(this,this.sA),this.hP=new lu(this.QNt,!0),this.hP.yn(he.Bw,this.BMt),this.hP.yn(fn,this.Ds),this.eNt=new yc,this.eNt.yn(qo.ra,this.sNt),this.$Tt=new yc,this.MS=this.HNt(),this.INt=new yV(this.MS),this.SNt=new OV(this.MS),this.nP=new Wv(this.sA,this.NS),this.Dl=new gn([this.eNt,this.INt.Z,this.SNt.Z,this.nP.Z])}},HV=class extends un{get Jf(){return this.Qo.Jf}WNt(){this.Co(new ro(this.Mf,this.Jf))}constructor(t,i){super(i),this.Qo=t}};function qV(t,i){const e=t.filter((t=>"urn:mpeg:dash:role:2011"===t.yst)).map((t=>t.jM)).filter(Yt);return i||gd(e,"main")?gd(e,"caption")?"captions":gd(e,"subtitle")?"subtitles":gd(e,"dub")?"translation":"main":gd(e,"sign")?"sign":gd(e,"description")?"descriptions":gd(e,"commentary")?"commentary":"alternative"}function XV(t,i){var e;const s=Po([...t.oAt,...t.aAt],(t=>"urn:mpeg:dash:adaptation-set-switching:2016"===t.yst));var n;const r=null!=(n=null==s||null==(e=s.jM)?void 0:e.split(","))?n:[],h=[];for(const t of r){const e=Number(t),s=Po(i,(t=>t.o===e));s&&h.push(s)}return h}var ZV=class extends WV{A_(){if(NR(this.sA))return this.sA.A_()}get TTt(){return NR(this.sA)?this.sA.r_:0}get DTt(){return NR(this.sA)?this.sA.a_:0}async gn(){var t;await super.gn(),null==(t=this.qNt)||t.gn()}GTt(t){var i,e;return((null!=(e=null==(i=this.bc)?void 0:i.seamlessSwitchStrategy)?e:Bn.iT)!==Bn.iT||!fi.ub)&&super.GTt(t)}HTt(){return!(fi.DE&&fi.EE<3)&&super.HTt()}HNt(){return new ao(this,new wx)}MNt(t){return DR(t)}constructor(t,i,e,s,n,r,h){super(t,i,e,s,n,r,new IR(h)),this.Ist=h,fi.WE&&(this.qNt=new jR(this))}},KV=class extends ZV{async gn(){await super.gn(),await this.lP.cP(this.sA)}constructor(t,i,e,s,n,r,h,o){const a=new Zu(r);super(t,i,e,s,n,a.SP(h),o),this.lP=a}},JV=class extends ct{get XNt(){return this.Tit.XNt}Af(){return super.Af().Im(this.XNt)}Jst(){return super.Jst().Im(this.XNt)}_J(t,i,e){const s=this.XNt;return super._J(t,{n9:i.n9-s,ct:i.ct,UD:i.UD-s},e)}kJ(t,i){const e=this.XNt;return super.kJ(_.max(0,t-e),_.max(0,i-e))}ET(t,i,e){const s=this.XNt;return super.ET(_.max(0,t-s),_.max(0,i-s),e)}o$(t,i){const e=this.XNt;super.o$(_.max(0,t-e),_.max(0,i-e))}a$(t,i){const e=this.XNt;super.a$(_.max(0,t-e),_.max(0,i-e))}constructor(t,i){super(i),this.Tit=t}},$V=class extends Ct{get XNt(){return this.Tit.XNt}Td(){return super.Td()+this.XNt}t0(t){super.t0(t-this.XNt)}i_(){return super.i_().Im(this.XNt)}n0(t,i,e,s){const n=this.XNt;super.n0(t-n,i-n,e,s)}Vst(t){return new JV(this,t)}constructor(t,i){super(i),this.Yst(i),this.Tit=t}},tW=class extends gr{get Sst(){return this.sA}get XNt(){return this.ZNt}set XNt(t){this.ZNt=t}Af(){return super.Af().Im(this.ZNt)}mf(){return iW(super.mf(),this.ZNt)}Tf(){return super.Tf()+this.ZNt}Td(){return super.Td()+this.ZNt}qf(){return super.qf().Im(this.ZNt)}i_(){return super.i_().Im(this.ZNt)}Sm(t,i,e){const s=_.max(0,t-this.ZNt);super.Sm(s,i,e)}zz(t){super.zz(iW(t,-this.ZNt))}n_(){return this.Dl}yS(t,i,e,s,n,r,h,o){return this.MS.yS(t,i,e,s,n,r,h,o)}bS(t){this.MS.bS(t)}rP(){this.MS.tr(),super.rP()}iP(){return!1}sP(t,i,e,s,n){throw new g("Not supported")}Ud(){return this.x8.gn(),this.C8.gn(),this.MS.gn(),this.Dl.gn(),super.Ud()}Rst(t){return new $V(this,t)}Bst(t){return new Jt(t)}S_(t){let i;switch(t.type){case l.jh:i=new sh(t.currentTime+this.ZNt);break;case l.Sh:i=new ge(t.currentTime+this.ZNt);break;case he.Rw:i=new Zr(t.currentTime+this.ZNt);break;case l.Sw:i=new Pc(t.currentTime+this.ZNt,iW(t.currentProgramDateTime,this.ZNt));break;case l.gw:i=new B(t.currentTime+this.ZNt);break;case l.yw:i=new Eh(t.currentTime+this.ZNt);break;case l.pw:i=new we(t.currentTime+this.ZNt);break;case l.hw:i=new Kk(t.currentTime+this.ZNt);break;case l.aw:i=new jx(t.currentTime+this.ZNt);break;case l.Jg:i=new ee(t.currentTime+this.ZNt);break;case l.ww:i=new ls(t.currentTime+this.ZNt,t.playbackRate);break;case l.Ew:i=new Je(t.currentTime+this.ZNt,t.volume);break;case l.Xg:i=new jn(t.duration+this.ZNt);break;case he.H_:i=new ro(t.currentTime+this.ZNt,t.readyState);break;default:i=t}super.S_(i)}be(){super.be(),this.C8.be()}ge(){super.ge(),this.C8.ge()}constructor(t){super(t),this.ZNt=0,this.MS=new ao(this,new wx),this.Dl=new gn([this.MS.nt,super.n_()]),this.C8=new eh,this.C8.h5(this.Uz.parentElement),this.x8=new kh(this.C8.we,this.Iu,this.Dl,this.Ol,this.ya)}};function iW(t,i){return t?new Date(t.getTime()+1e3*i):void 0}var eW=class extends vt{SP(t){if(t===Vt.pm)return new tW(super.SP(t))}async cP(t){const i=t;await i.Ud(),await super.cP(i.Sst)}},sW=class extends ZV{async H$(t){await super.H$(t),void 0===this.KNt&&(this.KNt=this.JNt(),this.sA.XNt=this.KNt)}JNt(){if(this.ct===1/0){const t=this.aTt;if(t.U>0)return _.max(0,t.Cn(0)-300)}return 0}H2(t,i,e,s,n,r,h,o){return void 0===r&&(r=!1),void 0===h&&(h=tV.Uyt),void 0===o&&(o=!1),o||(o=this.ct===1/0&&fi.DE&&fi.EE<3&&t<=this.Mf),super.H2(t,i,e,s,n,r,h,o)}async tr(){await super.tr(),this.KNt=void 0,this.sA.XNt=0}async gn(){await super.gn(),await this.sA.Ud(),await this.lP.cP(this.sA)}static qC(t){var i;return(!t||"google-dai"!==(null==t||null==(i=t.ssai)?void 0:i.integration))&&(fi.DE&&fi.EE<4)}constructor(t,i,e,s,n,r,h,o){const a=new eW(new Zu(r));super(t,i,e,s,n,a.SP(h),o),this.lP=a,this.KNt=void 0}},nW=class extends SR{get Sst(){return this.sA}get r_(){return this.sA.r_}get a_(){return this.sA.a_}constructor(t){super(t)}},rW=class extends ct{Xst(){return this.$Nt?this.PW:super.Xst()}Zst(t){this.$Nt?this.PW=t:super.Zst(t)}Af(){return this.$Nt?this.tDt:super.Af()}xC(){return this.$Nt?this.lx:super.xC()}Jst(){return this.$Nt?this.iDt:super.Jst()}$st(){return this.$Nt?this.OW:super.$st()}tnt(t){this.$Nt?this.OW=t:super.tnt(t)}_J(t,i,e){return this.gJ((e=>this.eDt(t,i,e)),e)}eDt(t,i,e){return super._J(t,i,e)}u$(){return this.gJ((()=>this.sDt()))}sDt(){return super.u$()}AJ(t,i,e){return this.gJ((e=>this.nDt(t,i,e)),e)}nDt(t,i,e){return super.AJ(t,i,e)}Cq(){return this.$Nt?this.i9:super.Cq()}t$(){this.$Nt?this.rDt=!0:super.t$()}o$(t,i){this.RJ(),this.$Nt?(this.iDt=this.iDt.cB(new Ai([t,i])),this.hDt.push({Rg:"fat",GT:t,VT:i})):this.oDt(t,i)}oDt(t,i){super.o$(t,i)}kJ(t,i){return this.gJ((()=>this.aDt(t,i)))}aDt(t,i){return super.kJ(t,i)}a$(t,i){this.RJ(),this.$Nt?(this.iDt=this.iDt.dB(new Ai([t,i])),this.hDt.push({Rg:"ET",GT:t,VT:i})):this.uDt(t,i)}uDt(t,i){super.a$(t,i)}ET(t,i,e){return this.gJ((e=>this.cDt(t,i,e)),e)}cDt(t,i,e){return super.ET(t,i,e)}Aq(t){return this.gJ((()=>this.lDt(t)))}lDt(t){return super.Aq(t)}async gJ(t,i){this.RJ(),this.$Nt&&(await Nr(this.$Nt.Zb,i),this.RJ()),Bo(i);try{this.VJ=t(i),await this.VJ}finally{this.VJ=void 0}}RJ(){if(this.VJ)throw new g("Internal error")}async dDt(){if(this.$Nt)throw new b("Already locked");this.$Nt=new Rs,this.fDt(),this.VJ&&(await this.VJ.catch(qt),this.fDt())}_Dt(){var t;null==(t=this.$Nt)||t.Wb(),this.$Nt=void 0,this.gDt()}fDt(){this.lx=super.xC(),this.PW=super.Xst(),this.OW=super.$st(),this.tDt=super.Af(),this.iDt=super.Jst(),this.i9=super.Cq(),this.rDt=!1}gDt(){this.RJ(),super.Zst(this.PW),super.tnt(this.OW);const t=this.hDt.slice();No(this.hDt);for(const i of t)"fat"===i.Rg?this.oDt(i.GT,i.VT):this.uDt(i.GT,i.VT);this.rDt&&super.t$(),this.tDt.vB(super.Af())||this.Co(new wn(Z.hq))}Ud(){var t;null==(t=this.$Nt)||t.qd(),this.$Nt=void 0,super.Ud()}constructor(t){super(t),this.VJ=void 0,this.$Nt=void 0,this.PW=0,this.tDt=Ai.SB(),this.iDt=Ai.SB(),this.hDt=[],this.i9=!1,this.rDt=!1,this.OW=0,this.lx=t.wd}},hW=class extends rW{Af(){var t,i;return super.Af().cB(null!=(i=null==(t=this.wDt)?void 0:t.wf)?i:Ai.SB())}Jst(){var t,i;return super.Jst().cB(null!=(i=null==(t=this.wDt)?void 0:t.n$)?i:Ai.SB())}Zst(t){super.Zst(t),this.wDt&&(this.wDt.EW=t)}tnt(t){super.tnt(t),this.wDt&&(this.wDt.NW=t)}oDt(t,i){super.oDt(t,i),this.wDt&&this.wDt.o$(t,i)}uDt(t,i){super.uDt(t,i),this.wDt&&this.wDt.a$(t,i)}async cDt(t,i,e){Bo(e);const s=[];s.push(super.cDt(t,i,e)),this.wDt&&s.push(this.wDt.ET(t,i,e)),await Promise.all(s)}gq(t){return!!super.gq(t)||this.Tit.ADt(t)}lDt(t){return super.gq(t)?super.lDt(t):this.Tit.vDt(t)}mDt(t){var i,e;null==(i=this.wDt)||i.fn(kn,this.int),this.wDt=t,null==(e=this.wDt)||e.yn(kn,this.int)}constructor(t,i){super(i),this.wDt=void 0,this.Tit=t}},oW=class extends Ct{gq(t){const i=void 0!==this.Z$,e=void 0!==this.K$,s=t.r0.some((t=>At(t.qz,"audio"))),n=t.r0.some((t=>At(t.qz,"video")));return i===s&&e===n&&(!!super.gq(t)||(!(!this.pDt||!this.pDt.gq(t))||this.Tit.yDt(t)))}async Aq(t){return super.gq(t)?await super.Aq(t):this.pDt&&this.pDt.gq(t)?(this.MDt(),await this.Aq(t)):(await this.Tit.TDt(t),await this.Aq(t))}ADt(t){return this.gq(this.NDt(t))}vDt(t){return this.Aq(this.NDt(t))}NDt(t){const i=this.wd,e=i.r0.map((i=>At(t.qz,"audio")&&At(i.qz,"audio")||At(t.qz,"video")&&At(i.qz,"video")?t:i));return Tt({},i,{r0:e})}n0(t,i,e,s){super.n0(t,i,e,s),this.pDt&&this.pDt.n0(t,i,e,s)}DDt(){return!this.IDt&&this.SDt}Td(){return void 0!==this.EDt?this.EDt:this.DDt()?this.VL:super.Td()}t0(t){this.VL=t,this.EDt=void 0,this.DDt()||super.t0(t)}Fst(){return!this.DDt()&&super.Fst()}t$(){this.EDt=_.max(aW(this.Fz.V$),aW(this.Fz.W$)),this.DDt()||super.t$()}GJ(){this.EDt=void 0,this.DDt()||super.GJ()}Vst(t){return new hW(this,t)}bDt(){this.IDt=!this.IDt}MDt(){const t=this.Fz,i=this.pDt;i&&(this.IDt=!this.IDt,this.Yst(i),this.LDt(t),this.DDt()&&this.kDt())}LDt(t){var i,e;this.pDt=t,null==(i=this.Z$)||i.mDt(null==t?void 0:t.V$),null==(e=this.K$)||e.mDt(null==t?void 0:t.W$)}CDt(t){const i=this.Fz,e=this.pDt;if(!e)return;const s=this.IDt,n=s?i:e,r=(s?e:i).wf.lA(t);if(!r)return;const h=FR(n.wf,this.Jst()).lA(r.jn(0),Jc);return!h||r.jn(0)+Jc>=h.jn(0)?void 0:_.max(r.jn(0),h.Cn(0))}xDt(t,i){if(this.SDt)return Promise.resolve();const e=this.IDt?this.pDt:this.Fz;return e?(this.SDt=!0,this.ODt((i=>{if(Bo(i),this.SDt)return async function(t,i,e){Bo(e);const s=[];t.V$&&s.push(Yk(t.V$,i,e));t.W$&&s.push(Yk(t.W$,i,e));await Promise.all(s),t.t$()}(e,t,i)}),i)):Promise.resolve()}kDt(){if(!this.SDt)return;const t=this.IDt?this.pDt:this.Fz;if(!t)return;var i;this.SDt=!1;const e=null!=(i=this.EDt)?i:this.VL;t.ct<e&&t.t0(e),t.GJ()}jDt(t){var i;const e=null!=(i=this.EDt)?i:this.VL;t.t0(e),this.IDt?this.Yst(t):this.LDt(t)}Jst(){var t,i,e;const s=null!=(e=null==(t=this.Z$)?void 0:t.n$)?e:Ai.SB();var n;const r=null!=(n=null==(i=this.K$)?void 0:i.n$)?n:Ai.SB();return s.cB(r)}async ODt(t,i){const e=[];this.Z$&&e.push(this.Z$.dDt()),this.K$&&e.push(this.K$.dDt());try{await Promise.all(e),await t(i)}finally{this.Z$&&this.Z$._Dt(),this.K$&&this.K$._Dt()}}Hst(t){t.type===Z.hq&&this.Tit.XJ(),super.Hst(t)}constructor(t,i){super(i),this.pDt=void 0,this.VL=NaN,this.IDt=!1,this.SDt=!1,this.EDt=void 0,this.Yst(i),this.Tit=t}};function aW(t){if(!t)return 0;const i=t.wf;return i.U>0?i.jn(i.U-1):0}function Qh(t){return t.wd.Rg===ai.Hx}var tu,uW=class extends nW{get zDt(){return this.PDt}Af(){return super.Af().cB(this.PDt.wf)}Td(){if(!this.BDt){const t=this.Fz;if(t&&Qh(t))return t.ct}return super.Td()}bst(){return!!super.bst()&&!(!this.BDt&&!this.Cq())}Lst(){return!!super.Lst()&&!(!this.BDt&&super.bst()&&!this.Cq())}Cq(){const t=this.Fz;return!(!t||!Qh(t))&&t.Cq}qf(){return this.Uo.cB(this.sA.Hf)}i_(){return super.i_().cB(this.PDt.t_)}$f(){return super.$f()}Est(){var t;return null!=(t=super.Est())?t:this.PDt.Yz}p_(){return this.kB=!1,super.p_()}m_(){this.kB=!0,super.m_()}i5(){this.BDt=!0,super.i5(),this.PDt.i5()}e5(){this.BDt=!1,super.e5(),this.PDt.i5()}Tf(){var t;return null!=(t=this.f2)?t:super.Tf()}s_(){return void 0!==this.f2||super.s_()}Sm(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.RDt.qd(),this.V2.qd(),this.V2=new na,this.UDt=this.H2(t,i,e,this.UDt,this.V2.Wd).catch(qt)}async H2(t,i,e,s,n){this.f2=t,this.q2=t,this.Co(new Eh(t)),s&&await s.catch(qt),Bo(n),this.Fz&&Qh(this.Fz)&&this.Fz.kDt(),this.f2=void 0,super.Sm(t,i,e),this.PDt.Sm(t,i,e),this.QDt()}zz(t){const i=this.Yz;if(!i||S(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Sm(e)}r5(){super.r5(),this.PDt.r5()}get r_(){return this.FDt.r_}get a_(){return this.FDt.a_}be(){this.ZP&&(this.ZP=!1,this.FDt.be())}ge(){this.ZP||(this.ZP=!0,this.FDt.ge())}async YDt(){var t;this.f2=void 0,this.q2=NaN,this.Uo=Ai.SB(),null==(t=this.GDt)||t.qd(),this.RDt.qd(),this.V2.qd(),this.UDt&&(await this.UDt.catch(qt),this.UDt=void 0)}jst(t){super.jst(t),this.PDt.uP=t}zst(t){super.zst(t),this.PDt.o5=t}n_(){return this.Dl}yS(t,i,e,s,n,r,h,o){return this.MS.yS(t,i,e,s,n,r,h,o)}bS(t){this.MS.bS(t)}rP(){this.MS.tr(),super.rP()}async $n(t){const i=await super.$n(t);return Qh(i)&&this.QDt(),i}async tr(){await this.YDt(),await super.tr(),await this.PDt.tr()}async Ud(){await this.YDt(),this.MS.gn(),this.Dl.gn(),await super.Ud()}Rst(t){return new oW(this,t)}Bst(t){return new Jt(t)}QDt(){this.RDt.qd(),this.RDt=new na,this.UDt=this.VDt(this.UDt,this.RDt.Wd).catch(qt)}async VDt(t,i){if(t&&await t.catch(qt),this.Fz&&Qh(this.Fz))for(;;){let t;for(Bo(i),this.WDt()&&this.bDt(),this.Fz.kDt(),Bo(i);Bo(i),!this.WDt();){if(t=this.Fz.CDt(this.Tf()),void 0!==t){0,this.HDt(),await this.Fz.xDt(t,i),Bo(i),this.PDt.Sm(t);break}await Na((t=>Promise.race([this.lf(l.Sw,t),this.qDt(t)])),i)}for(Bo(i);!this.WDt();)await this.sA.lf([l.Sw,l.Jg,he.H_],i)}}WDt(){const t=this.Fz;if(void 0===t||!Qh(t))return!1;const i=this.Tf(),e=this.sA.wf;if(!this.sA.If&&e.gr(i))return!1;return!!FR(this.PDt.wf,t.Jst()).wB(i,i+Jc)}bDt(){if(this.XDt)return;this.XDt=!0,this.Uo=this.qf();const t=tC(this),i=this.s_(),e=this.$f(),s=this.sA,n=this.PDt,r=this.Fz;r.kDt(),r.bDt(),iC(n,t),this.Qst(n),this.PDt=s,s.m_(),s.Pf=!0,this.XDt=!1;const h=this.s_();i!==h&&(h?this.Co(new Eh(this.Mf)):this.Co(new we(this.Mf)));const o=this.$f();e!==o&&this.Co(new ro(this.Mf,o)),h||this.HDt()}HDt(){const t=this.sA,i=this.FDt;if(i===t)return;const e=this.a_,s=this.r_;this.FDt=t,this.ZP&&(i.be(),t.ge());const n=this.a_,r=this.r_;n>0&&r>0&&(e!==n||s!==r)&&this.Co(new lm)}yDt(t){return void 0!==this.PDt.jq([t])}async TDt(t){this.HDt();const i=this.Fz,e=this.PDt;await e.tr();const s=await e.$n(t);i.jDt(s)}qDt(t){return this.GDt=new Rs,Nr(this.GDt.Zb,t)}XJ(){var t;null==(t=this.GDt)||t.Wb()}S_(t){t.type===l.yw&&this.q2===t.currentTime||(t.type===l.pw&&(this.q2=NaN,this.HDt()),t.type!==he.H_&&t.type!==l.Sh&&t.type!==l.Jg||this.XDt||!this.WDt()?(t.type!==l.Jg||this.If)&&super.S_(t):this.QDt())}constructor(t,i,e){super(t),this.BDt=!1,this.f2=void 0,this.q2=NaN,this.Uo=Ai.SB(),this.kB=!0,this.XDt=!1,this.ZP=!0,this.GDt=void 0,this.UDt=void 0,this.RDt=new na,this.V2=new na,this.PDt=i,this.FDt=t,this.sA.ge(),this.PDt.be(),this.MS=new ao(this,e),this.Dl=new gn([this.MS.nt,super.n_()])}},cW=class extends uW{get Sst(){return this.sA}get zDt(){return this.PDt}be(){super.be(),this.C8.be()}ge(){super.ge(),this.C8.ge()}get Uz(){return this.sA.Uz}get I0(){return this.sA.I0}get g_(){return this.sA.g_}set g_(t){this.sA.g_=t}h5(t){this.sA.h5(t),this.PDt.h5(t)}a2(){this.sA.a2()}D_(){this.sA.D_(),this.PDt.D_()}A_(){return this.sA.A_()}Qst(t){const i=this.w_(),e=this.A_();super.Qst(t),this.w_()!==i&&this.Co(new ww),this.A_()!==e&&this.Co(new Xt)}Ud(){return this.x8.gn(),this.C8.gn(),super.Ud()}constructor(t,i){super(t,i,new wx),this.C8=new eh,this.C8.h5(t.Uz.parentElement),this.x8=new kh(this.C8.we,this.Iu,this.nt,this.Ol,this.ya)}},lW=class extends vt{SP(t){if(t===Vt.pm){const i=super.SP(t),e=super.SP(t);return new cW(i,e)}return super.SP(t)}async cP(t){t instanceof cW?(await t.Ud(),await super.cP(t.Sst),await super.cP(t.zDt)):await super.cP(t)}},dW=class extends ZV{async gn(){await super.gn(),await this.lP.cP(this.sA)}static qC(t){var i;return!fi.Qs&&!fi.sb&&!(t&&"google-dai"===(null==(i=t.ssai)?void 0:i.integration))}constructor(t,i,e,s,n,r,h,o){const a=new Zu(new lW(r));super(t,i,e,s,n,a.SP(h),o),this.lP=a}},fW=class extends Ct{Vst(t){return new rW(t)}xC(){return this.ZDt?this.lx:super.xC()}Af(){return this.ZDt?this.tDt:super.Af()}Td(){return this.ZDt?this.VL:super.Td()}t0(t){this.ZDt?(this.VL=t,this.KDt=!0):super.t0(t)}i_(){return this.ZDt?this.JDt?this.JDt.f$():this.s0:super.i_()}n0(t,i,e,s){this.ZDt?this.JDt=new Bk(t,i,e,s):super.n0(t,i,e,s)}Fst(){return this.ZDt?this.i9&&!1!==this.rDt:super.Fst()}t$(){this.ZDt?this.rDt=!0:super.t$()}GJ(){this.ZDt?this.rDt=!1:super.GJ()}gq(t){return!this.ZDt&&super.gq(t)}Aq(t){return this.ZDt?Promise.reject(new b("Not supported")):super.Aq(t)}async dDt(){if(this.ZDt)throw new b("Already locked");this.ZDt=!0,this.fDt();const t=[];this.Z$&&t.push(this.Z$.dDt()),this.K$&&t.push(this.K$.dDt()),await Promise.all(t)}_Dt(){this.ZDt=!1,this.Z$&&this.Z$._Dt(),this.K$&&this.K$._Dt(),this.gDt()}fDt(){this.lx=super.xC(),this.tDt=super.Af(),this.VL=super.Td(),this.s0=super.i_(),this.KDt=!1,this.rDt=void 0,this.JDt=void 0}gDt(){if(this.KDt&&(super.t0(this.VL),this.KDt=!1),void 0!==this.JDt){const t=this.JDt;super.n0(t.Cn,t.jn,t._$,t.g$),this.JDt=void 0}void 0!==this.rDt&&(this.rDt?super.t$():super.GJ(),this.rDt=void 0)}constructor(t){super(t),this.ZDt=!1,this.tDt=Ai.SB(),this.VL=0,this.KDt=!1,this.i9=!1,this.rDt=void 0,this.s0=Ai.SB(),this.JDt=void 0,this.Yst(t),this.lx=t.wd}},_W=class extends gr{get Sst(){return this.sA}p_(){return void 0!==this.Fz&&Qh(this.Fz)&&this.If&&this.Sm(0),super.p_()}Sm(t,i,e){void 0!==this.Fz&&Qh(this.Fz)&&this.If&&t<this.ct&&this.$Dt(),super.Sm(t,i,e)}i5(){this.tIt=!0,super.i5()}e5(){this.tIt=!1,this.iIt()||super.e5()}iIt(){return this.tIt||this.eIt}sIt(){this.eIt||(this.eIt=!0,super.i5())}nIt(){this.eIt&&(this.eIt=!1,this.iIt()||super.e5())}$n(t){this.rIt.qd();const i=this.mit(t,this.hIt);return this.oIt=i,i}async mit(t,i){return i&&await i.catch(qt),this.nIt(),await super.$n(t)}Rst(t){return new fW(t)}Bst(t){return new Jt(t)}tr(){this.rIt.qd();const t=this.zNt(this.hIt);return this.oIt=t,t}async zNt(t){return t&&await t.catch(qt),this.nIt(),await super.tr()}$Dt(){this.sIt(),this.rIt.qd(),this.rIt=new na,this.hIt=rn(this.aIt(this.oIt,this.hIt,this.rIt.Wd),this.rIt).catch(Bc)}async aIt(t,i,e){t&&await t.catch(qt),i&&await i.catch(qt),Bo(e);const s=this.Fz;if(!s||!Qh(s))return;const n=s.wd;await s.dDt(),await this.sA.tr();const r=await this.sA.$n(n);r.t0(s.ct),s.Yst(r),s._Dt(),this.nIt()}async Ud(){this.rIt.qd(),this.hIt&&(await this.hIt.catch(qt),this.hIt=void 0),this.iIt()&&super.e5(),await super.Ud()}constructor(...t){super(...t),this.tIt=!1,this.eIt=!1,this.oIt=void 0,this.hIt=void 0,this.rIt=new na}},gW=class extends vt{SP(t){if(t===Vt.pm)return new _W(super.SP(t))}async cP(t){const i=t;await i.Ud(),await super.cP(i.Sst)}static qC(){return fi.ob}};Uu(new class extends AR{JA(t,i,e,s,n,r,h,o){const a=new jt(I.Ib.sst,I.Ib.ist,I.Ib.tst,I.Ib.rst);let u;u=sW.qC(o)?sW:dW.qC(o)?dW:KV;let c=i;return gW.qC()&&(c=new gW(c)),new u(e,s,n,r,a,c,Vt.pm,t)}bP(){return!0}constructor(...t){super(...t),this.LP=hi.oz}}),function(t){t.uIt="currentbufferingrenditionchange",t.cIt="lIt",t.dIt="fIt",t._It="gIt"}(tu||(tu={}));var wW,AW,vW=class{constructor(t,i){var e,s;this.mst=void 0,this.Mg=Ew(),this.wIt=i,this.Rg=t.Rg,this.AIt=t.AIt,this.vIt=t.vIt,this.mIt=t.mIt,this.l=t.l,this.gs=t.gs,this.pIt=t.pIt,this.yIt=t.yIt,this.MIt=void 0===t.cvt,this.TIt=null!=(s=null==(e=t.TIt)?void 0:e.split(","))?s:[]}};function cu(t,i){return t.Rg===i.Rg&&(t.l===i.l||!(!t.AIt||!i.AIt))}function mW(t,i){return void 0!==t&&void 0!==i&&pW(t,i)}function pW(t,i){return t.wIt===i.wIt}function yW(t,i){return pW(t,i)&&t.pIt===i.pIt}function MW(t,i){for(const e of t)if(yW(e,i))return!0;return!1}!function(t){t.NIt="alternative",t.DIt="main",t.IIt="commentary",t.SIt="",t.MI="descriptions",t.EIt="main-desc",t.bIt="translation"}(wW||(wW={})),function(t){t.NIt="alternative",t.DIt="main",t.IIt="commentary",t.SIt="",t.yI="captions",t.Eg="sign",t.Mm="subtitles"}(AW||(AW={}));var TW,NW=class extends xd{get Tg(){return this.LIt}get Rt(){const t=this.kIt();if(!t)return!1;for(const i of this.Ng.og)if(i.CIt===t)return!0;return!1}set Rt(t){if(t!==this.Rt)if(t){var i;let t=null==(i=this.Ng.cg(0))?void 0:i.CIt;const e=this.Qo.xIt;for(const i of this.Ng.og)if(i.OIt===e){t=i.CIt;break}this.jIt(t)}else this.jIt(void 0)}get yg(){if(!this.Rt)return;const t=this.Qo.zIt;for(const i of this.Ng.og)if(MW(t,i.CIt))return i}get va(){return this.Xa||(this.Xa=Pi(this)),this.Xa}get o(){return this.xT.toString()}get Mg(){return this.xT}get kh(){return this.OT}set kh(t){t!==this.OT&&(this.OT=t,this.Co(new Gs(this)))}get gs(){return this.WL}get jg(){return this.Rt?"enabled":"disabled"}get Dg(){return this.Lat}set Dg(t){let e=[];if(t){e=t.filter((t=>{const e=this.yg?oQ(this.yg):void 0;return i.Ys.iit(e,oQ(t))})).filter((i=>this.Ng.bT(t)&&i.yet))}else e=this.Ng.og.filter((t=>t.yet));if(0!==e.length){if(!(t===this.Lat||this.Lat&&Ad(this.Lat,e))){if(this.Lat=t?e:void 0,this.Qo.PIt(e.map((t=>t.OIt))),1===e.length){const t=e[0].OIt,i=this.X0===Vt.pm,s=this.PB.QW;D(this.Qo.BIt(t,{RIt:!0,UIt:s&&i,QIt:s&&!i}))}this.Co(new Xh(e,this))}}else this.Co(new hQ)}zT(t){this.Rt=t}gn(){this.Vo(),this.Qo.fn(tu.uIt,this.FIt),this.Qo.fn(tu.cIt,this.YIt);for(const t of this.Ng.og)t.gn();this.Ng.tr()}constructor(t,i,e,s,n){var r;super(),this.X0=t,this.Qo=i,this.PB=e,this.fh=s,this.Ng=n,this.Lat=void 0,this.GIt=void 0,this.VIt=()=>this.Co(new Gs(this)),this.FIt=()=>{const t=this.yg;t&&this.GIt!==t&&(this.GIt=t,this.Co(new CF(t)))},this.YIt=()=>{const t=this.Rt;this.WIt!==t&&(this.WIt=t,this.fh.Co(new no(this)),this.Co(new no(this)))},this.GIt=this.yg,this.WIt=this.Rt;const h=n.cg(0);var o,a;this.OT=null!=(o=null==h?void 0:h.CIt.l)?o:"",this.WL=null!=(a=null==h?void 0:h.CIt.gs)?a:"",this.LIt=null==h||null==(r=h.CIt)?void 0:r.TIt.map(LW).filter(Yt),this.xT=du(),this.Qo.yn(tu.uIt,this.FIt),this.Qo.yn(tu.cIt,this.YIt);for(let t=0;t<this.Ng.U;t++){this.Ng.cg(t).yn("update",this.VIt)}}},DW=class extends NW{get zt(){return wW.DIt}kIt(){return this.Qo.HIt}jIt(t){D(this.Qo.qIt(t))}constructor(t,i,e,s){super(Vt.ym,t,i,e,s)}},IW=class extends NW{get zt(){return AW.DIt}kIt(){return this.Qo.XIt}jIt(t){D(this.Qo.ZIt(t))}constructor(t,i,e,s){super(Vt.pm,t,i,e,s)}},SW=class extends xd{get o(){return String(this.OIt.o)}get Mg(){return this.OIt.o}get wz(){return this.OIt.wz}get rvt(){return this.OIt.rvt}get kh(){var t;return null!=(t=this.OT)?t:this.CIt.l}set kh(t){this.kh!==t&&(this.OT=t,this.Co(new zY(this.va)))}get cvt(){return this.CIt.wIt.KIt()}get ovt(){return this.OIt.ovt}QI(){}gn(){this.Vo()}constructor(t,i){super(),this.OIt=t,this.CIt=i,this.OT="",this.yet=!0}},EW=class extends SW{get rAt(){return 0}get mst(){var t;return(null==(t=this.OIt.mst)?void 0:t.JIt)||""}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return jY(this)}constructor(t,i){super(t,i),this.Xa=void 0}},bW=class extends SW{get mst(){var t;return(null==(t=this.OIt.mst)?void 0:t.$It)||""}get avt(){return this.tSt}set avt(t){this.tSt!==t&&(this.tSt=t,this.Co(new zY(this.va)))}get zct(){var t,i;return null!=(i=null!=(t=this.iSt)?t:this.OIt.zct)?i:0}set zct(t){this.zct!==t&&(this.iSt=t,this.Co(new zY(this.va)))}get Ti(){var t,i;return null!=(i=null==(t=this.OIt.eSt)?void 0:t.Ti)?i:0}get ji(){var t,i;return null!=(i=null==(t=this.OIt.eSt)?void 0:t.ji)?i:0}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return OY(this)}constructor(t,i){super(t,i),this.Xa=void 0,this.tSt=0,this.iSt=void 0}};function LW(t){return"public.accessibility.describes-video"===t?Ku.xg:"public.accessibility.transcribes-spoken-dialog"===t?Ku.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?Ku.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?Ku.Cg:void 0}!function(t){t.sSt="FATAL",t.ha="ERROR",t.nSt="WARNING",t.rSt="INFO",t.hSt="DEBUG"}(TW||(TW={}));var Wr=new class{oSt(t){if(!this.Rt())return!1;const i=[];return!(i.length>0)||i.some((i=>i.toLowerCase()===t.toLowerCase()))}aSt(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this.oSt(t)&&i.oit("DEBUG "+t+" -",...s)}qp(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this.oSt(t)&&i.oit("INFO "+t+" -",...s)}uSt(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this.oSt(t)&&i.SA("WARNING "+t+" -",...s)}lt(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this.oSt(t)&&i.ait("ERROR "+t+" -",...s)}cSt(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this.oSt(t)&&i.ait("FATAL "+t+" -",...s)}constructor(){this.Rt=()=>!1}},Xi="HLSPlaylistParser",Yr="Discontinuity",Ir="Buffering",kW=class{Vnt(){var t;const i=null==(t=this.Qo.Tr)?void 0:t.lSt;if(!i||0===i.length)return void Wr.uSt("LLHLSTrackConfigurator","The HLSModel contains no variant streams.");var e;const s=null!=(e=Po(i,(t=>0!==t.dSt.length&&0!==t.fSt.length)))?e:i[0],n=i.filter((t=>t!==s));for(const t of s.dSt){const i=new Tw,e=[];i.ST(new EW(s,t)),e.push(t);for(const s of n)for(const n of s.dSt)if(cu(n,t)&&!MW(e,n)){i.ST(new EW(s,n)),e.push(n);break}this._St.tt(new DW(this.Qo,this.PB,this._St,i))}for(const t of s.fSt){const i=new Tw,e=[];i.ST(new bW(s,t)),e.push(t);for(const s of n)for(const n of s.fSt)if(cu(n,t)&&!MW(e,n)){i.ST(new bW(s,n)),e.push(n);break}this.gSt.tt(new IW(this.Qo,this.PB,this.gSt,i))}}wSt(){this.ASt(this._St),this.ASt(this.gSt)}ASt(t){const i=[];for(const e of t.og){const t=[];for(const i of e.Ng.og)gd(i.OIt.vSt,i.CIt)||t.push(i);for(const i of t)e.Ng.ET(i),i.gn();0===e.Ng.U&&i.push(e)}for(const e of i)t.it(e),e.gn()}mSt(t,i){const e=this.pSt(t);void 0!==e&&(e.zct=i)}ySt(t,i){const e=this.pSt(t);void 0!==e&&(e.avt=i)}pSt(t){for(const i of this.gSt.og){const e=Po(i.Ng.og,(i=>i.CIt===t));if(void 0!==e)return e}}constructor(t,i,e,s){this.Qo=t,this.PB=i,this._St=e,this.gSt=s}},Er=class{get Z8(){const t=1-this.MSt**this.TSt;return this.NSt/t}Qht(t,i){const e=this.MSt**t,s=i*(1-e)+e*this.NSt;S(s)||(this.NSt=s,this.TSt+=t)}Aq(t){const i=_.exp(_.log(.5)/t);if(i===this.MSt)return;if(0===this.TSt)return void(this.MSt=i);const e=this.Z8,s=1-i**this.TSt;this.NSt=e*s,this.MSt=i}constructor(t){this.NSt=0,this.TSt=0,this.MSt=_.exp(_.log(.5)/t)}},Pr=class t{get Z8(){return this.qht()?_.max(this.DSt.Z8,this.ISt.Z8):this.SSt}Qht(t){const e=i.Kd(),s=t;this.ESt&&void 0!==this.bSt&&e-this.bSt>=this.LSt&&this.tr(),this.kSt+=1,this.DSt.Qht(1,s),this.ISt.Qht(1,s),this.CSt.push(s),this.CSt.length>this.xSt&&this.CSt.shift(),this.bSt=e}qht(){return void 0!==this.bSt&&i.Kd()-this.bSt<=this.LSt}tr(){this.DSt=new Er(this.OSt),this.ISt=new Er(this.jSt),this.kSt=0,this.CSt=[],this.bSt=void 0}constructor(i=t.zSt,e=t.PSt,s=t.Xht,n=!1){this.kSt=0,this.CSt=[],this.bSt=void 0,this.LSt=6e4,this.xSt=10,this.OSt=i,this.jSt=e,this.SSt=s,this.ESt=n,this.DSt=new Er(i),this.ISt=new Er(e)}};Pr.zSt=2,Pr.PSt=5,Pr.Xht=.1;var CW,xW=class{wW(t){for(const i of this.BSt)i.wW(t)}AW(t){for(const i of this.BSt)i.AW(t)}vW(t,i){for(const e of this.BSt)e.vW(t,i)}mW(t){for(const i of this.BSt)i.mW(t)}constructor(t){this.BSt=t}},OW=class{wW(t){this.RSt=t}AW(t){this.USt.Qht(t-this.RSt)}vW(t){}mW(t){}constructor(t){this.RSt=0,this.USt=t}},jW=class{AW(t){this.QSt=t}vW(t,i){this.Jht.Qht(t-this.QSt,i.byteLength),this.QSt=t}mW(t){}wW(t){}constructor(t){this.QSt=0,this.Jht=t}},zW=class{wW(t){}vW(t,e){const s=e.byteLength,n=this.FSt;this.FSt=s;const r=t-this.An;this.An=t,this.YSt.dX(e);const h=!this.YSt.GSt(),o=s>=this.VSt;n!==i.Ys.Jtt&&h&&o&&this.Jht.Qht(r,s)}AW(t){this.An=t}mW(t){}constructor(t,i=0){this.YSt=new PW,this.An=0,this.FSt=0,this.Jht=t,this.VSt=i}},PW=class extends ic{GSt(){return this.WSt}dX(t){this.WSt=!1,super.dX(t)}cX(t,i){this.HSt&&this.HSt!==Zt.lm||(this.WSt=!0),super.cX(t,i),this.HSt=t}MX(t){return!1}NX(t){}IX(t){}constructor(...t){super(...t),this.HSt=void 0,this.WSt=!1}};(CW||(CW={})).qSt="sample";var BW=class extends xd{$j(){if(!this.qht())return;const t=i.Kd();t-this.XSt>1e3&&(this.XSt=t,Yo.Ib.$j(this.Z8))}constructor(...t){super(...t),this.XSt=0}},Oc=class t extends BW{Qht(t,i){const e=8*i/t;this.DSt.Qht(t,e),this.ISt.Qht(t,e),this.ZSt+=i,this.$j(),this.Co(new wn(CW.qSt))}get Z8(){return this.qht()?_.min(this.DSt.Z8,this.ISt.Z8):this.SSt}qht(){return this.ZSt>=this.KSt}constructor(i=t.zSt,e=t.PSt,s=t.JSt,n=t.Xht){super(),this.ZSt=0,this.KSt=s,this.DSt=new Er(i),this.ISt=new Er(e),this.SSt=n}};Oc.JSt=128e3,Oc.Xht=cN,Oc.zSt=.5,Oc.PSt=5;var RW=class{get wz(){return this.Jht.Z8}get Az(){return this.$St.Z8}vz(t){if("segment"!==t.Rg&&"preload-hint"!==t.Rg)return;const i=[new OW(this.$St)];return"stream"!==t.fS||!function(t){return"segment"===t.Rg&&"initialization-segment"!==t.gS}(t)&&"preload-hint"!==t.Rg?i.push(new jW(this.Jht)):i.push(new zW(this.Jht,1e3)),new xW(i)}tEt(t){this.Jht=new Oc(Oc.zSt,Oc.PSt,1,t)}constructor(t){const i=t.wz>0?t.wz:Oc.Xht,e=t.Az>0?t.Az:Pr.Xht;this.Jht=new Oc(Oc.zSt,Oc.PSt,1,i),this.$St=new Pr(Pr.zSt,Pr.PSt,e)}};var UW=class extends wn{constructor(t){super(tu._It),this.lt=t}},QW=class{jq(t,i){const e={Rg:ai.Hx,Xz:[],r0:t.map((t=>({qz:t}))),w0:i};return Promise.resolve(void 0!==this.met.jq([e]))}constructor(t){this.met=t}},FW=(t,i,e,s,n)=>t.filter((t=>!!gd(s,t)||1.1*t.wz<=e.wz)),YW=(t,i,e,s,n)=>t.filter((t=>{if(gd(s,t))return!0;let r=1/0;for(const i of t.vSt){var h,o;r=_.min(r,null!=(o=null!=(h=i.wIt.iEt)?h:i.wIt.eEt)?o:1/0)}r===1/0&&(r=1);const a=2*e.Az+t.wz*r/e.wz;return t.wz<=i.wz||n.sEt>a})),GW=(t,i,e,s,n)=>qc(t,((t,i)=>i.wz-t.wz)),VW=(t,i,e,s,n)=>t.every((t=>t.ovt&&!S(t.ovt)))?qc(t,((t,i)=>i.ovt-t.ovt)):t,WW=(t,i,e,s,n)=>0===s.length?t:qc(t,((t,i)=>{const e=gd(s,t)?1:0;return(gd(s,i)?1:0)-e})),HW=(t,i,e,s,n,r)=>t.filter((t=>!t.mst||!i.mst||!(void 0!==i.mst.$It&&void 0!==t.mst.$It&&!Bt(i.mst.$It,t.mst.$It)&&!r.nEt({qz:'video/mp4; codecs="'+t.mst.$It+'"'}))&&!(void 0!==i.mst.JIt&&void 0!==t.mst.JIt&&!Bt(i.mst.JIt,t.mst.JIt)&&!r.rEt({qz:'audio/mp4; codecs="'+t.mst.JIt+'"'})))),qW=(t,e,s,n,r)=>{if(!1===r.cut)return t;if(i.Ys.qtt)return t;const h=i.Ys.Xtt;var o;const a=(null!=(o=null==h?void 0:h.width)?o:r.ji)*QU;var u;const c=(null!=(u=null==h?void 0:h.height)?u:r.Ti)*QU;for(let i=0;i<t.length;i++){const e=t[i];if(void 0===e.eSt)return t;const s=e.eSt.Ti,n=e.eSt.ji;if(s<=c&&n<=a)return t.slice(i,t.length)}return[]},XW=(t,e,s,n,r)=>function(t,e){const s=e.cut;if(void 0===s&&!i.Ys.Qs)return t;if(!1===s)return t;for(let i=0;i<t.length;i++){const s=t[i];if(void 0===s.eSt)return t;const n=s.eSt.Ti,r=s.eSt.ji;if(n===e.Ti&&r===e.ji)return t.slice(i,t.length);if(n<e.Ti||r<e.ji)return t.slice(0===i?i:i-1,t.length)}return[]}(t,r);var Ri,xi,xu,ZW,KW="AbrEvaluator",JW=class{get hEt(){return this.PB._W}oEt(t){this.fut=t}async aEt(t,i,e,s,n){return(await this.uEt(t,i,e,s,n))[0]}async uEt(t,i,e,s,n){if(0===t.length)throw new g("AbrEvaluator - Unable to select optimal variant stream from an empty list.");Wr.aSt(KW,"Performing optimal variant stream selection.");const r=this.hEt;let h=t;for(const t of this.fut){const o=t(h,i,r,e,s,n);h=Gt(o)?o:await o}if(0===h.length){Wr.uSt(KW,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[$o(t,(t=>t.wz))]}return h}constructor(t){this.PB=t,this.fut=[HW,FW,YW,GW,qW,XW,VW,WW]}};function $W(t,i){return[t,void 0!==i?t+i-1:vu]}function tH(t){return Boolean(t.Pp)}function Fo(t){return Boolean(t.tst)}function Jo(t){return t?t.Umt?t.jM+"@"+t.Umt.Cn+"-"+(null!=(i=t.Umt.U)?i:""):""+t.jM:"";var i}function iH(t,i){if(i===t)return!0;if(i.jM!==t.jM)return!1;if(!t.Umt)return!0;if(i.Umt){const e=$W(t.Umt.Cn,t.Umt.U),s=$W(i.Umt.Cn,i.Umt.U);if(e[0]<=s[0])return void 0===e[1]||void 0!==s[1]&&e[1]>=s[1]}return!1}function eH(t,i){return t===i||t.jM===i.jM&&(t.Umt&&i.Umt?t.Umt.Cn===i.Umt.Cn&&t.Umt.U===i.Umt.U:t.Umt===i.Umt)}function sH(t){const i=!!t.cEt||void 0;return{o:t.o,lEt:t.lEt,Yz:t.Yz,dEt:t.dEt,ct:t.ct,fEt:t.fEt,cEt:i,_Et:t.gEt,wEt:t.AEt,vEt:t.vEt,mEt:t.mEt}}function nH(t,i){var e,s,n;return{JIt:null!=(e=i.JIt)?e:null==t?void 0:t.JIt,$It:null!=(s=i.$It)?s:null==t?void 0:t.$It,pEt:null!=(n=i.pEt)?n:null==t?void 0:t.pEt}}async function rH(t,i,e,s,n){const r=i.filter((t=>is(t,"audio"))),h=i.filter((t=>is(t,"video"))),o=[],a=e.map((t=>async function(t,i,e){if(!t.cvt)return;if(!t.yEt)return;if(t.dS!==xu.MEt)return;const s=hH(t.yEt);if(!s)return;if(s.Lb===Ca)return{ZA:s,Mz:[],Tz:void 0,Sj:t.cvt};if(s.Lb===h_&&t.yEt===u_)return{ZA:s,Mz:[],Tz:t.cvt,Sj:void 0};{Wr.qp("HLSDrmUtils","Fetching key uri "+t.cvt+".");const n=await i.SI({zu:t.cvt,AS:e});return{ZA:s,Mz:[await n.cj()],Tz:void 0,Sj:void 0}}}(t,s,n)));var u;const c=function(t,i){if(0===i.length)return t;const e=t=>{const e=i.indexOf(t.ZA.Lb);return e>=0?e:i.length};return qc(t,((t,i)=>e(t)-e(i)))}((await Promise.all(a)).filter(Yt),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const i of c){const e=CV(null!=t?t:{},i.ZA),s="cbcs";o.push({ZA:i.ZA,Mz:i.Mz,Tz:i.Tz,Sj:i.Sj,vP:[{initDataTypes:[i.ZA.Eb],audioCapabilities:xV(r,s,null==e?void 0:e.audioRobustness),videoCapabilities:xV(h,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]})}return o}function hH(t){return t===gt?dm:t===e_?On:t===a_?_m:t===u_?gm:void 0}function oH(t){if("#"!==t[0])throw new g("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function aH(t){return"#"!==t[0]?t:t.split(":",1)[0]}function uH(t){const i=t.indexOf(":");if(-1===i||t.length<i+1)throw new g("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(i+1)}function cH(t){const i=Ws(uH(t));if(void 0===i)throw new g("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return i}function bt(t){const i={},e=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=e.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?i[n]=r:Wr.uSt(Xi,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=e.exec(t)}return i}function lH(t,e){const s=bt(t);let n,r;try{n=s.URI?i.IA(s.URI,e):void 0,r=function(t){switch(t){case"AUDIO":return Ri.ym;case"VIDEO":return Ri.pm;case"SUBTITLES":return Ri.Mm;case"CLOSED-CAPTIONS":return Ri.TEt}throw new g("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(s.TYPE)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const h=s["GROUP-ID"],o=s.LANGUAGE,a=s["ASSOC-LANGUAGE"],u=s.NAME,c="YES"===s.DEFAULT;let l="YES"===s.AUTOSELECT;const d="YES"===s.FORCED,f=s["INSTREAM-ID"],_=s.CHARACTERISTICS,w=s.CHANNELS;if(h||Wr.uSt(Xi,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),o||Wr.uSt(Xi,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),u||Wr.uSt(Xi,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),r===Ri.TEt?(n&&Wr.uSt(Xi,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),f?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(f)||Wr.uSt(Xi,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):Wr.uSt(Xi,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):f&&Wr.uSt(Xi,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),c&&!l&&(l=!0,s.AUTOSELECT&&Wr.uSt(Xi,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),s.FORCED&&r!==Ri.Mm&&Wr.uSt(Xi,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===h||void 0===u)throw new g("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{NEt:a,DEt:w,TIt:_,pIt:h,vIt:l,AIt:c,mIt:d,yIt:f,gs:o,l:u,Rg:r,cvt:n}}function dH(t,e,s){const n=bt(t);let r,h,o;try{r=i.IA(s,e),o=function(t){if(void 0===t)return;const i=t.split("x"),e=Number(i[0]),s=Number(i[1]);if(S(e)||S(s))throw new g("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{ji:e,Ti:s}}(n.RESOLUTION),h=function(t){if(!t)return;let i,e,s;const n=t.split(",");for(const t of n){const n=t.trim();At(n,"mp4a")?i="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n||"flac"===n.toLowerCase()?i=n:At(n,"avc")||At(n,"hvc1")||At(n,"hev1")||At(n,"dvh")||At(n,"vp09")||At(n,"av01")?e=n:s=s?s+","+n:n}return{JIt:i,$It:e,pEt:s}}(n.CODECS)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const a=Ws(n.BANDWIDTH),u=Ws(n["AVERAGE-BANDWIDTH"]),c=Ws(n.SCORE),l=Ws(n["FRAME-RATE"]),d=n["HDCP-LEVEL"],f=[];if(void 0!==n["ALLOWED-CPC"]){const t=n["ALLOWED-CPC"].split(",");f.push(...t.map((t=>{const i=t.split(":");return{keysystem:i[0],label:i[1]}})))}const _=n["VIDEO-RANGE"],w=n.AUDIO,A=n.VIDEO,v=n.SUBTITLES,m=n["CLOSED-CAPTIONS"];if(void 0===a?Wr.uSt(Xi,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==u&&u>a&&Wr.uSt(Xi,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),h||Wr.qp(Xi,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),h&&h.$It&&void 0===o&&Wr.qp(Xi,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===d||gd(["TYPE-0","TYPE-1","NONE"],d)||Wr.uSt(Xi,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===_||gd(["SDR","PQ","HLG"],_)||Wr.uSt(Xi,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===a)throw new g("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{IEt:f,SEt:w,rvt:u,wz:a,EEt:m,mst:h,zct:l,bEt:d,eSt:o,ovt:c,LEt:v,cvt:r,kEt:A,CEt:_}}function fH(t,i){const e=bt(t);if(!e.URI)throw new g("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return dH(t,i,e.URI)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function Ws(t){const i=Number(t);return S(i)?void 0:i}function _H(t,i){const e=bt(t);let s,n;try{s=function(t){switch(t){case"NONE":return xu.FP;case"AES-128":return xu.xEt;case"SAMPLE-AES":return xu.MEt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new g("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(e.METHOD),n=e.URI?MH(e.URI,i):void 0}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=e.KEYFORMAT,h=e.IV,o=e.KEYFORMATVERSIONS;let a,u,c,l,d;if(s!==xu.FP){if(c=r||u_,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(hH(c)!==dm)throw new g("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=xu.MEt}else a=s;u=n,l=h?fg(h):void 0,d=o?o.split("/").map((t=>Number(t))):[1]}else a=xu.FP,(n||r||o||h)&&Wr.uSt(Xi,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{dS:a,cvt:u,OEt:l,yEt:c,jEt:d}}function gH(t){const i=uH(t);if(!i)return[void 0,""];const[e,s]=i.split(",");return[Ws(e),s]}function wH(t,i){const e=t.split("@"),s=Ws(e[0]),n=e.length>1?Ws(e[1]):i;if(void 0===s||void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{Cn:n,U:s}}function AH(t){if(void 0!==t)return wH(t,void 0)}function vH(t,i){return wH(uH(t),i)}function mH(t,i){const e=bt(t);try{const t=MH(e.URI,i);return{jM:t,Umt:AH(e.BYTERANGE)}}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function pH(t){const i=uH(t);if(!i)throw new g("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const e=new Date(i);if(!_T(e))throw new g("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return e}function yH(t){const i=bt(t),e=i["START-DATE"],s=i["END-DATE"],n=Ws(i["PLANNED-DURATION"]);let r,h,o,a=Ws(i.DURATION);void 0!==i["SCTE35-CMD"]&&(r=fg(i["SCTE35-CMD"]).buffer),i["SCTE35-IN"]&&(h=fg(i["SCTE35-IN"]).buffer),i["SCTE35-OUT"]&&(o=fg(i["SCTE35-OUT"]).buffer);const u="YES"===i["END-ON-NEXT"],c=function(t){const i={};for(const e of w.keys(t)){const s=t[e];void 0!==s&&At(e,"X-")&&(i[e]=s)}return i}(i),l=i.ID,d=i.CLASS;let f,_;if(void 0===e)Wr.uSt(Xi,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+e+".");else if(f=new Date(e),_=void 0!==s?new Date(s):void 0,_T(f)||Wr.uSt(Xi,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const i=new Date(f.getTime()+1e3*a);_?_.getTime()!==i.getTime()&&(Wr.uSt(Xi,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),_=i):_=i}else _&&(a=(f.getTime()-_.getTime())/1e3);if(u&&(i.CLASS||Wr.uSt(Xi,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),i.DURATION&&Wr.uSt(Xi,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),_&&Wr.uSt(Xi,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===l&&Wr.uSt(Xi,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===l||void 0===f)throw new g("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:l,lEt:d,Yz:f,dEt:_,ct:a,fEt:n,AEt:r,mEt:h,vEt:o,cEt:u,gEt:c}}function MH(t,e){if(void 0===t)throw new g("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return i.IA(t,e)}function TH(t,i){const e=bt(t),s=Ws(e.DURATION),n=MH(e.URI,i),r=AH(e.BYTERANGE),h="YES"===e.INDEPENDENT,o="YES"===e.GAP;if(void 0===s)throw new g("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:s,cvt:{jM:n,Umt:r},zEt:h,PEt:o}}function NH(t){const i=bt(t);return{BEt:"YES"===i["CAN-BLOCK-RELOAD"],REt:Ws(i["CAN-SKIP-UNTIL"]),UEt:"YES"===i["CAN-SKIP-DATERANGES"],QEt:Ws(i["HOLD-BACK"]),FEt:Ws(i["PART-HOLD-BACK"])}}function DH(t,i){const e=bt(t);if(void 0===e.URI)throw new g("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=MH(e.URI,i),n=Ws(e["LAST-MSN"]),r=Ws(e["LAST-PART"]);if(void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{cvt:s,YEt:n,GEt:r}}function IH(t,i){var e;const s=bt(t),n=Ws(s["SKIPPED-SEGMENTS"]),r=null==(e=s["RECENTLY-REMOVED-DATERANGES"])?void 0:e.split("\t");if(void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{VEt:n,WEt:r,HEt:i}}function SH(t){const i=Ws(bt(t)["PART-TARGET"]);if(void 0===i)throw new g("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return i}function EH(t){switch(uH(t)){case"VOD":return ZW.qEt;case"EVENT":return ZW.XEt;default:return Wr.uSt(Xi,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),ZW.rT}}function bH(t,i){const e=bt(t);let s,n;try{s=function(t){if(void 0===t)throw new g("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return xi.ZEt;if("PART"===t)return xi.KEt;throw new g("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(e.TYPE),n=MH(e.URI,i)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=Ws(e["BYTERANGE-START"]),h=Ws(e["BYTERANGE-LENGTH"]);let o;return void 0===r&&void 0===h||(o={Cn:r||0,U:h}),{Rg:s,cvt:{jM:n,Umt:o}}}!function(t){t[t.ym=0]="ym",t[t.pm=1]="pm",t[t.Mm=2]="Mm",t[t.TEt=3]="TEt"}(Ri||(Ri={})),function(t){t[t.ZEt=0]="ZEt",t[t.KEt=1]="KEt"}(xi||(xi={})),function(t){t[t.FP=0]="FP",t[t.xEt=1]="xEt",t[t.MEt=2]="MEt"}(xu||(xu={})),function(t){t[t.rT=0]="rT",t[t.qEt=1]="qEt",t[t.XEt=2]="XEt"}(ZW||(ZW={}));var LH=class t{JEt(){const t=this.$Et[this.tbt];return this.tbt+=1,t}ibt(){return this.$Et[this.tbt]}Em(){const i=new t("");return i.tbt=0,i.$Et=this.$Et.slice(this.tbt),i}static ebt(t){if(!t)return[];return t.split(/[\r\n]+/).map((t=>t.trim())).filter((t=>t))}constructor(i){this.tbt=0,this.$Et=t.ebt(i)}};function kH(t,i,e){const s=t.cvt;let n=t.lp,r=t.sbt,h=t.Cn;switch(e){case"#EXT-X-VERSION":n=function(t){const i=cH(t);return S(i)?(Wr.uSt(Xi,"Playlist version is NaN: "+t+"."),1):i}(i);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":h=function(t){const i=bt(t),e=Ws(i["TIME-OFFSET"]);if(void 0===e)throw new g("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{nbt:e,rbt:"YES"===i.PRECISE}}(i);break;case"#EXT-X-DEFINE":Wr.uSt(Xi,"Ignoring unsupported #EXT-X-DEFINE: "+i+".");break;default:Wr.qp(Xi,"Ignoring unrecognized line or comment: "+i+".")}return{cvt:s,lp:n,sbt:r,Cn:h}}function CH(t,i){return t.map((t=>t.dS===xu.FP||t.OEt?t:Tt({},t,{OEt:xH(i)})))}function xH(t){const i=new DataView(new ArrayBuffer(16)),e=new L;return e.Im(8),K_(i,e,Ce.fromNumber(t)),new j(i.buffer)}function OH(t,e,s){Wr.qp(Xi,"Parsing M3U8 playlist at "+t+".");const n=new LH(s);if("#EXTM3U"!==n.JEt())throw new g("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(s)?function(t,e){let s;try{s=i.IA(t)}catch(i){throw Wr.uSt(Xi,"The master playlist has no valid base URI: "+t+"."),new g("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let n={cvt:s,sbt:void 0,Cn:void 0,lp:void 0};const r=[],h=[],o=[],a=[];for(;;){const t=e.JEt();if(!t)break;try{const i=oH(t);switch(i){case"#EXT-X-MEDIA":{const i=lH(t,s);r.push(i);break}case"#EXT-X-STREAM-INF":{const i=dH(t,s,e.JEt());h.push(i);break}case"#EXT-X-I-FRAME-STREAM-INF":{const i=fH(t,s);o.push(i);break}case"#EXT-X-SESSION-DATA":Wr.uSt(Xi,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const i=_H(t,s);a.push(i);break}default:n=kH(n,t,i)}}catch(i){Wr.uSt(Xi,"Ignoring unparsable line: "+t,i)}}let u=n.lp;var c;const l=null!=(c=n.sbt)&&c,d=n.Cn;return void 0===u&&(Wr.uSt(Xi,"The playlist has no #EXT-X-VERSION, assuming version is 2."),u=2),u>=8&&(h.some((t=>void 0!==t.ovt))||o.some((t=>void 0!==t.ovt)))&&(h.some((t=>void 0===t.ovt))||o.some((t=>void 0===t.ovt)))&&Wr.uSt(Xi,"If one master playlist variant stream has a SCORE, all variants should have it."),{cvt:s,lp:u,sbt:l,Cn:d,hbt:o,obt:a,Pp:r,abt:h}}(t,n):function(t,e,s){let n={cvt:t,sbt:void 0,Cn:void 0,lp:void 0};const r=[];let h,o,a,u,c=!1,l=!1;const d=[],f=Eo();let _,w,A,v,m,p,y,M,T,N=[],D=[],I=!1,S=!1;const E=[],b=[];let L,k,C,x,O,j=0,z=!1,P=ZW.rT,B=!1,R=0;try{O=i.IA(t)}catch(i){throw Wr.uSt(Xi,"The media playlist has no valid base URI: "+t+".",i),new g("HLSPlaylistParser - Could not parse HLS media playlist.")}const U=s.Em();for(;void 0===k||void 0===C;){const t=U.JEt();if(!t)break;try{switch(aH(t)){case"#EXT-X-MEDIA-SEQUENCE":k=cH(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":C=cH(t)}}catch(i){Wr.uSt(Xi,"Ignoring unparsable line: "+t,i)}}void 0===k&&(Wr.qp(Xi,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),k=0),void 0===C&&(Wr.qp(Xi,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),C=0);let Q=k,F=C;for(;;){const t=s.JEt();if(!t)break;let e=!1;try{const s=aH(t);switch(s){case"#EXTINF":e=!0,[_,w]=gH(t);break;case"#EXT-X-BYTERANGE":e=!0,A=vH(t,j),A&&(j=A.Cn+A.U);break;case"#EXT-X-DISCONTINUITY":e=!0,I=!0,F++;break;case"#EXT-X-KEY":{var Y;e=!0;const i=_H(t,O);if(i.dS===xu.FP){f.clear(),T=void 0;break}var G;const s=null!=(G=null==(Y=i.yEt)?void 0:Y.toString())?G:"identity";f.set(s,i),i.dS===xu.xEt&&(T=i);break}case"#EXT-X-MAP":e=!0,m=mH(t,O),p=T;break;case"#EXT-X-PROGRAM-DATE-TIME":e=!0,y=pH(t);break;case"#EXT-X-GAP":e=!0,S=!0;break;case"#EXT-X-BITRATE":e=!0,M=cH(t);break;case"#EXT-X-TARGETDURATION":h=cH(t);break;case"#EXT-X-DATERANGE":{const i=yH(t);r.push(i);break}case"#EXT-X-PART":{e=!0;const i=TH(t,O);D.push(i);break}case"#EXT-X-PRELOAD-HINT":{const i=bH(t,O);E.push(i);break}case"#EXT-X-SKIP":{d.length>0&&Wr.uSt(Xi,"#EXT-X-SKIP must appear before any #EXTINF tags."),e=!0;const i=IH(t,Q);R=i.VEt,x=i.WEt,Q+=i.VEt;break}case"#EXT-X-SERVER-CONTROL":{const i=NH(t);c=i.BEt,o=i.REt,l=i.UEt,a=i.QEt,u=i.FEt;break}case"#EXT-X-RENDITION-REPORT":{const i=DH(t,O);b.push(i);break}case"#EXT-X-PART-INF":L=SH(t);break;case"#EXT-X-MEDIA-SEQUENCE":e&&Wr.uSt(Xi,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":e&&Wr.uSt(Xi,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":z=!0;break;case"#EXT-X-PLAYLIST-TYPE":P=EH(t);break;case"#EXT-X-I-FRAMES-ONLY":B=!0;break;default:if(At(s,"#"))n=kH(n,t,s);else{v=i.IA(t,O);const e=m?{cvt:m,ubt:p}:void 0,s={obt:CH(Nd(f),Q),XD:N,cbt:D,ct:_,Jz:w,lbt:I,cvt:{Umt:A,jM:v},dbt:e,fbt:y,PEt:S,_bt:M,HEt:Q,gbt:F};d.push(s),Q++,N=[],D=[],_=void 0,w=void 0,I=!1,A=void 0,v=void 0,y=void 0,S=!1,M=void 0}}}catch(i){Wr.uSt(Xi,"Ignoring unparsable line: "+t,i)}}if(D.length){const t=m?{cvt:m,ubt:T}:void 0,i={obt:CH(Nd(f),Q),XD:N,cbt:D,ct:_,Jz:w,lbt:I,cvt:void 0,dbt:t,fbt:y,PEt:S,_bt:M,HEt:Q,gbt:F};d.push(i)}let V=n.lp;var W;const H=null!=(W=n.sbt)&&W,q=n.Cn;void 0===V&&(Wr.uSt(Xi,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),V=2),void 0===h&&Wr.uSt(Xi,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const X=d.length,Z=X>0;Z||Wr.uSt(Xi,"The HLS media playlist contains no segments.");const K=Z&&d[X-1].cbt.length>0;return K&&void 0===L&&Wr.uSt(Xi,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),K&&void 0===u&&Wr.uSt(Xi,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{BEt:c,REt:o,UEt:l,wbt:r,gbt:C,Abt:z,sbt:H,QEt:a,vbt:B,HEt:k,VEt:R,FEt:u,iEt:L,mbt:P,pbt:E,WEt:x,ybt:b,Mbt:h,tst:d,Cn:q,cvt:O,Tbt:e,lp:V}}(t,e,n)}var jH=class{get cvt(){return this.wIt.cvt}get mst(){return this.Nbt}set mst(t){this.Nbt=t?PH(t):void 0,this.Dbt=function(t,i){return!(void 0!==(null==t?void 0:t.JIt)&&void 0===(null==i?void 0:i.JIt)||void 0!==(null==t?void 0:t.$It)&&void 0===(null==i?void 0:i.$It))}(this.Ibt,this.Nbt)}get Sbt(){return this.Dbt}get vSt(){return this.Ebt}get dSt(){return this.Ebt.filter((t=>t.Rg===Ri.ym))}get fSt(){return this.Ebt.filter((t=>t.Rg===Ri.pm))}get bbt(){return this.Ebt.filter((t=>t.Rg===Ri.Mm))}get Lbt(){return this.Ebt.filter((t=>t.Rg===Ri.TEt))}kbt(t){for(const i of this.Ebt){const e=i.wIt.kbt(t);if(void 0!==e)return e}}Cbt(t){for(const i of this.Ebt){const e=i.wIt.Cbt(t);if(void 0!==e)return e}}xbt(t){To(this.Ebt,t)}constructor(t,i,e){var s,n,r,h;this.o=zH++,this.ovt=void 0,this.eSt=void 0,this.rvt=void 0,this.Dbt=!1,this.Ebt=[],this.wIt=i,this.wz=t.wz,this.rvt=t.rvt,this.ovt=t.ovt,this.Ibt=t.mst?PH(t.mst):void 0,this.Nbt=this.Ibt,this.eSt=t.eSt,this.zct=t.zct,this.SEt=null!=(s=t.SEt)?s:"Obt"+this.o,this.kEt=null!=(n=t.kEt)?n:"jbt"+this.o,this.LEt=null!=(r=t.LEt)?r:"zbt"+this.o,this.EEt=null!=(h=t.EEt)?h:"Pbt"+this.o,this.Ebt=e}},zH=0;function PH(t){return Tt({},t,{$It:t.$It?ev(t.$It):void 0})}var uh,BH=class{get GT(){var t;return this.tN+(null!=(t=this.Bbt)?t:0)}get Rbt(){return this.Ubt}get obt(){return this.Qbt.obt}Fbt(t,i){this.tN=t,this.Ubt=i}constructor(t,i,e,s,n){this.n9=void 0,this.Qbt=t,this.Ybt=i,this.tN=e,this.Ubt=s,this.ct=n.ct,this.cvt=n.cvt,this.zEt=n.zEt,this.PEt=n.PEt}},RH=class{get GT(){var t;return this.tN+(null!=(t=this.Gbt)?t:0)}get Vbt(){return this.tN}get ct(){return this.VL}get cvt(){return this.Wbt}get Hbt(){return this.qbt}get Rbt(){return this.Ubt}get cbt(){return this.Xbt}get Zbt(){return this.Kbt}get VT(){var t;return this.GT+(null!=(t=this.VL)?t:this.Kbt)}set Bbt(t){this.Gbt=t;for(const i of this.Xbt)i.Bbt=t}get Bbt(){return this.Gbt}Jbt(t){return this.Xbt[t]}$bt(t){for(let i=0;i<this.Xbt.length;i++){const e=this.Xbt[i],s=e.GT,n=s+e.ct;if(s<=t&&t<=n)return t===n&&i+1<this.Xbt.length?this.Xbt[i+1]:e}}tLt(t){for(let i=this.Xbt.length-1;i>=0;i--){const e=this.Xbt[i];if(e.GT<=t)return e}}iLt(t){let i=this.tLt(t);for(;i&&!i.zEt&&i.Ybt>0;)i=this.Jbt(i.Ybt-1);return i}Fbt(t,i,e){const s=t.cbt.length!==this.Xbt.length||e!==this.Ubt;this.qbt=i,this.Ubt=e,this.VL=t.ct,null!=this.fbt||(this.fbt=t.fbt),void 0===this.Wbt&&(this.Wbt=t.cvt),s&&this.eLt(t.cbt)}eLt(t){this.Xbt.length>t.length&&(this.Xbt.length=t.length);let i=0;for(let e=0;e<t.length;e++){const s=t[e],n=this.Ubt&&e===t.length-1,r=this.tN+i;if(e<this.Xbt.length)this.Xbt[e].Fbt(r,n);else{const t=new BH(this,e,r,n,s);this.Xbt.push(t)}i+=s.ct}this.Kbt=i}sLt(){No(this.Xbt),this.Kbt=0}constructor(t,i,e,s,n){this.n9=void 0,this.Xbt=[],this.Kbt=0,this.tN=t,this.dbt=n.dbt,this.qbt=e,this.Ubt=s,this.VL=n.ct,this.fbt=n.fbt,this.Wbt=n.cvt,this.PEt=n.PEt,this.HEt=n.HEt,this.lbt=n.lbt,this.gbt=i,this.obt=n.obt,this.eLt(n.cbt)}};!function(t){t.nLt="YES",t.rLt="v2"}(uh||(uh={}));var Rr=class extends hs{};var UH=class extends Xn{get va(){return this.Xa||(this.Xa=function(t){return N($h(t),{get content(){return t.O},get class(){return t.lEt},get startDate(){return t.Yz},get endDate(){return t.dEt},get duration(){return t.ct},get plannedDuration(){return t.fEt},get endOnNext(){return t.cEt},get scte35Cmd(){return t.wEt},get scte35Out(){return t.vEt},get scte35In(){return t.mEt},get customAttributes(){return t._Et}})}(this)),this.Xa}get lEt(){return this.hLt}get Yz(){return this.oLt}get dEt(){return this.aLt}get ct(){return this.VL}get fEt(){return this.uLt}get cEt(){return this.cLt}get wEt(){return this.lLt}get vEt(){return this.dLt}get mEt(){return this.fLt}get _Et(){return this._Lt}Yn(t){let i=!1;var e;(void 0===this.hLt&&void 0!==t.lEt&&(i=!0,this.hLt=t.lEt),void 0===this.aLt&&void 0!==t.dEt&&(i=!0,this.aLt=t.dEt),void 0===this.VL&&void 0!==t.ct&&(i=!0,this.VL=t.ct),void 0===this.uLt&&void 0!==t.fEt&&(i=!0,this.uLt=t.fEt),!this.cLt&&t.cEt&&(i=!0,this.cLt=t.cEt),i=this.updateCustomAttributes(t,i),void 0===this.lLt&&void 0!==t.wEt&&(i=!0,this.lLt=t.wEt),void 0===this.dLt&&void 0!==t.vEt&&(i=!0,this.dLt=t.vEt),void 0===this.fLt&&void 0!==t.mEt&&(i=!0,this.fLt=t.mEt),this.gLt(),this.wLt(),this.ALt(),i)&&(this.Co(new gu(this)),null==(e=this.iN)||e.Co(new Ya(this)))}updateCustomAttributes(t,i){let e=i;if(t._Et)for(const i of w.keys(t._Et))void 0===this._Lt[i]&&(e=!0,this._Lt[i]=t._Et[i]);return e}gLt(){this.VL&&!this.aLt&&(this.aLt=new Date(this.oLt.getTime()+Ft(this.VL)))}wLt(){this.aLt&&!this.VL&&(this.VL=gT(this.aLt.getTime()-this.oLt.getTime()))}ALt(){this.sN===1/0&&(this.aLt||this.VL)&&(this.sN=QH(this.tN,this.VL,this.oLt,this.aLt))}constructor(t,i){super(i,QH(i,t.ct,t.Yz,t.dEt),void 0,!1,t.o),this.hLt=t.lEt,this.oLt=t.Yz,this.aLt=t.dEt,this.VL=t.ct,this.uLt=t.fEt,this.cLt=Boolean(t.cEt),this._Lt=t._Et||{},this.lLt=t.wEt,this.dLt=t.vEt,this.fLt=t.mEt,this.gLt(),this.wLt()}};function QH(t,i,e,s){return Yt(i)?t+i:s?t+(gT(s.getTime())-gT(e.getTime())):1/0}var FH=class extends mx{Yn(t,i){YH(this,GH(t),i)}SS(t){VH(this.L.og,t),super.SS(t)}constructor(){super(void 0,void 0,Kc.DATE_RANGE)}};function YH(t,i,e){const s=t.L.og;for(let e=s.length-1;e>=0;e--){const n=s[e],r=Po(i,(t=>t.o===n.o));r?n.Yn(r):t.xI(n)}for(const s of i){const i=s.Yz;if(void 0!==i&&!t.U0(s.o)){const n=e(i),r=new UH(s,n);VH(t.L.og,r),t.SS(r)}}}function GH(t){const i=Eo(),e=[];for(const s of t)if(i.has(s.o)){const t=i.get(s.o),e=Tt({},t,Hd(s),{_Et:Tt({},t._Et,s._Et)});i.set(s.o,e)}else i.set(s.o,s),e.push(s.o);return e.map((t=>i.get(t)))}function VH(t,i){const e=dd(t,(t=>t.lEt===i.lEt));e&&e.cEt&&e.Yn({o:e.o,dEt:i.Yz})}var WH=String.fromCharCode(95),HH=WH+"HLS_msn",qH=WH+"HLS_part",XH=WH+"HLS_skip",ZH="HLSMediaPlaylist",KH=class{get Abt(){if(0===this.Amt.length)return!1;return this.Amt[this.Amt.length-1].Rbt}get ct(){return this.VL}get t_(){return this.s0}get vLt(){return this.mLt}get eEt(){return this.pLt}get iEt(){return this.yLt}get QEt(){return this.Abt?0:this.MLt?this.MLt:this.pLt?3*this.pLt:void 0}get FEt(){var t;return null!=(t=this.TLt)?t:this.yLt?3*this.yLt:void 0}get BEt(){return this.NLt}get REt(){return this.DLt}get UEt(){return this.ILt}get mbt(){return this.SLt}get ELt(){return void 0!==this.iEt}get bLt(){if(this.Abt)return!0;const t=i.Kd()/1e3,e=this.LLt,s=this.kLt;return void 0!==e&&t-e<s}get LLt(){return this.CLt}get xLt(){if(this.OLt)return i.Kd()/1e3-this.OLt}get Bbt(){return this.Gbt}get kLt(){var t;return null!=(t=this.pLt)?t:void 0===this.CLt?5:1}get tst(){return this.Amt}get wbt(){return this.jLt}get zLt(){return this.PLt}set zLt(t){this.PLt=t}get Cn(){return this.hI}get BLt(){return this.RLt}KIt(t){if(!t)return this.cvt;const e=i.Dh(this.cvt);return void 0!==t.HEt&&e.searchParams.append(HH,String(t.HEt)),void 0!==t.ULt&&e.searchParams.append(qH,String(t.ULt)),void 0!==t.Hm&&e.searchParams.append(XH,t.Hm),e.href}xht(t){const i=this.Amt;if(0===i.length)return;const e=t-i[0].HEt;return e<0||e>=i.length?void 0:i[e]}QLt(t){if(0===this.Amt.length)return;const i=GY(JH.Ib,this.Amt,t);if(!(i<0)){const e=this.Amt[i];return t===e.VT&&i+1<this.Amt.length?this.Amt[i+1]:e}{const i=this.Amt[this.Amt.length-1];if(t===i.VT)return i}}FLt(t){if(0===this.Amt.length)return;const i=this.Amt[0];if(t<i.VT)return i;const e=this.Amt[this.Amt.length-1];return t>=e.GT?e:this.QLt(t)}kbt(t){const i=this.FLt(t);if(void 0===i)return;for(let e=i.HEt-this.Amt[0].HEt;e>=0;e--){const i=this.Amt[e];if(void 0!==i.fbt)return new Date(i.fbt.getTime()+1e3*(t-i.GT))}}Cbt(t){let i;for(const e of this.Amt)if($H(e))if(void 0===i)i=e;else{if(!(e.fbt.getTime()<=t.getTime()))break;i=e}if(void 0!==i)return i.GT+(t.getTime()-i.fbt.getTime())/1e3}YLt(t){switch(t){case xi.ZEt:return this.GLt;case xi.KEt:return this.VLt;default:return}}Fbt(t){var e;void 0===this.pLt&&(this.pLt=null!=(e=t.Mbt)?e:this.WLt(t));void 0===this.MLt&&void 0!==t.QEt&&(this.MLt=t.QEt),void 0===this.yLt&&void 0!==t.iEt&&(this.yLt=t.iEt),void 0===this.TLt&&void 0!==t.FEt&&(this.TLt=t.FEt),this.NLt=t.BEt,this.DLt=t.REt,this.ILt=t.UEt,this.SLt=t.mbt,this.ymt(t),this.HLt(t);const s=Po(t.pbt,(t=>t.Rg===xi.ZEt)),n=Po(t.pbt,(t=>t.Rg===xi.KEt));this.GLt=s?{cvt:s.cvt,Rg:s.Rg,gbt:t.gbt}:void 0,this.VLt=n?{cvt:n.cvt,Rg:n.Rg,gbt:t.gbt}:void 0,this.CLt=i.Kd()/1e3;const r=this.s0.jn(this.s0.U-1);this.qLt();const h=this.s0.jn(this.s0.U-1);(!this.OLt||h-r>0)&&(this.OLt=this.CLt),null!=this.hI||(this.hI=t.Cn)}qLt(){this.mLt=this.XLt(),this.s0=this.ZLt(this.mLt),this.VL=this.KLt()}XLt(){const t=this.tst;if(0===t.length)return Ai.SB();const i=t[0].GT,e=t[t.length-1].VT;return new Ai([i,e])}ZLt(t){if(0===t.U||this.Abt)return t;const i=t.Cn(0),e=t.jn(0)-this.wyt;return e<i?Ai.DB(i):new Ai([i,e])}get wyt(){return this.Abt?0:null!=(e=null!=(i=null!=(t=this.JLt)?t:this.FEt)?i:this.QEt)?e:0;var t,i,e}KLt(){return 0===this.Amt.length?0:this.Abt?xo(this.Amt,(t=>{var i;return null!=(i=t.ct)?i:t.Zbt})):1/0}WLt(t){let i;for(const e of t.tst)if(void 0!==e.ct){const t=_.max(1,_.round(e.ct));(void 0===i||i<t)&&(i=t)}if(void 0===i)throw new g("HLSModel - Could not determine required segment target duration.");return i}ymt(t){if(0===t.tst.length)return No(this.Amt),void this.$Lt();const i=this.tkt(t);if(!i)return;let e,s,n;i.ikt>0&&this.Amt.splice(0,i.ikt);const r=t.VEt;if(r>0){if(r>this.Amt.length)throw new Rr("New playlist skips over missing segments.");const i=this.Amt[r-1];if(void 0===i.ct)throw new Rr("New playlist skips over an incomplete segment.");e=i.Vbt+i.ct,n=i.gbt-t.gbt,s=r;for(let t=0;t<r;t++)this.Amt[t].sLt()}else e=i.ekt,n=0,s=0;for(let i=0;i<t.tst.length;i++,s++){const r=t.tst[i],h=0===i,o=t.Abt&&i===t.tst.length-1,a=r.ct,u=r.gbt+n;if(s<this.Amt.length){const t=this.Amt[s];0,t.Fbt(r,h,o)}else{let t=r;if(this.Amt.length>0&&void 0===t.dbt){t=Tt({},t,{dbt:this.Amt[this.Amt.length-1].dbt})}const i=new RH(e,u,h,o,t);i.Bbt=this.Gbt,this.Amt.push(i)}void 0!==a&&(e+=a)}}tkt(t){if(0===this.Amt.length)return{ikt:0,ekt:0};const i=this.Amt[0].HEt,e=this.Amt[this.Amt.length-1].HEt,s=t.tst[0].HEt-t.VEt,n=t.tst[t.tst.length-1].HEt;let r=0,h=0;if(s<i){const e=this.tst[0].fbt,n=t.tst[0].fbt;if(!(e&&n&&e<n))return void Wr.uSt(ZH,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+i+")");r=this.Amt.length,this.$Lt()}else{if(n<e)return void Wr.uSt(ZH,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+e+")");if(e<s){var o;h=null!=(o=function(t,i){const e=dd(t,(t=>void 0!==t.fbt));if(void 0===e)return;const s=function(t){let i=0;for(const s of t){if(s.lbt)return;if(s.fbt)return[s,i];var e;i+=null!=(e=s.ct)?e:0}return}(i.tst);if(void 0===s)return;const[n,r]=s;if(e.gbt!==n.gbt)return;const h=(n.fbt.getTime()-e.fbt.getTime())/1e3;return e.Vbt+h-r}(this.Amt,t))?o:function(t,i,e){const s=t[t.length-1];var n;const r=null!=(n=s.ct)?n:_.max(e,s.Zbt),h=e*(i-s.HEt-1);return s.Vbt+r+h}(this.Amt,s,this.pLt),Wr.aSt(ZH,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+e+"), resetting playlist and restarting at "+h+"s"),r=this.Amt.length,this.$Lt()}else{0;const t=uu(this.Amt,(t=>t.HEt===s));0,h=this.Amt[t].Vbt,t>0&&(r=t)}}return{ikt:r,ekt:h}}HLt(t){let i=t.wbt.map(sH);if(t.UEt&&t.Tbt.Hm===uh.rLt&&(i=this.jLt.concat(i)),this.jLt=GH(i),t.WEt)for(const i of t.WEt){const t=uu(this.jLt,(t=>t.o===i));t>=0&&ja(this.jLt,t)}}skt(t,i){if(this.Gbt!==t){this.Gbt=t;for(const t of this.Amt)t.Bbt=this.Gbt;this.qLt()}this.RLt=i}$Lt(){this.Gbt=void 0,this.RLt=void 0}constructor(t,i,e){this.CLt=void 0,this.OLt=void 0,this.GLt=void 0,this.VLt=void 0,this.pLt=void 0,this.yLt=void 0,this.MLt=void 0,this.TLt=void 0,this.Amt=[],this.jLt=[],this.NLt=!1,this.DLt=void 0,this.ILt=!1,this.SLt=ZW.rT,this.s0=Ai.SB(),this.mLt=Ai.SB(),this.VL=void 0,this.PLt=-1/0,this.RLt=void 0,this.cvt=t,this.hI=i,this.JLt=e}},JH=class t{static get Ib(){return null!=this.vst||(this.vst=new t),this.vst}fmt(t){return t.GT}_mt(t){return t.VT}gmt(t,i){return Ee(t,i)}wmt(t,i,e){return(t-i)/(e-i)}};function $H(t){return void 0!==t.fbt}function tq(t){return void 0!==t.cbt}function iq(t){return tq(t)?t.Hbt:0===t.Ybt&&t.Qbt.Hbt}function eq(t,i){return tq(t)?tq(i)?t.HEt+1===i.HEt:0===i.Ybt&&eq(t,i.Qbt):t.Ybt===t.Qbt.cbt.length-1?eq(t.Qbt,i):!tq(i)&&t.Qbt===i.Qbt&&t.Ybt+1===i.Ybt}var sq=class extends hs{get name(){return"DiscontinuityMisalignmentError"}constructor(){super("Tried to wait for multiple discontinuity mappings at the same time")}};var nq=class{nkt(t){const i=this.rkt.get(t);return void 0!==i&&rq(i)}hkt(t){if(this.okt()>t)return Promise.reject(new sq);const i=[];for(const s of this.akt){var e;if(s<t)null==(e=this.rkt.get(s))||e.ukt.qb(new sq),this.rkt.delete(s);else i.push(s)}return this.akt=i,-1===this.akt.indexOf(t)&&this.akt.push(t),this.ckt(t).ukt.Zb}lkt(t){const i=this.rkt.get(t);if(!i||!rq(i))throw new g("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return i}dkt(t){return this.lkt(t).UD}fkt(t,i){const e=tq(i)?i:i.Qbt,s=this.lkt(e.gbt);let n=t.ST(s.UD);if(s._kt){const t=ke.mD(i.GT).bN(n);if(t.IN().mN(uA())){const i=_.round(t.vN()/aA().vN());n=n.ST(aA().sD(i))}}return n}gkt(t,i){return this.fkt(t,i).bN(t)}wkt(t,i,e,s,n){this.Akt<t&&(this.Akt=t);const r=this.ckt(t);void 0===r.UD&&(r.vkt.some((t=>t.dht===i))||(r.vkt.push({dht:i,mkt:e,pkt:s._D(e.kp),_kt:n}),this.ykt(r,t)))}ykt(t,i){if(t.UD||!this.Mkt(t))return;const e=md(t.vkt,hq);No(t.vkt),t.UD=e.pkt.bN(e.mkt),t._kt=e._kt,t.ukt.Wb(),To(this.akt,i)}Mkt(t){return this.Tkt.length>0&&this.Tkt.every((i=>t.vkt.some((t=>t.dht===i))))}ckt(t){if(this.rkt.has(t))return this.rkt.get(t);{const i={UD:void 0,_kt:!1,ukt:new Rs,vkt:[]};return this.rkt.set(t,i),i}}Nkt(t){this.Tkt=t,this.rkt.forEach(((t,i)=>this.ykt(t,i)))}Dkt(){this.Akt=-1}okt(){return this.Akt}Ud(){this.rkt.forEach((t=>t.ukt.qd())),this.rkt.clear()}constructor(){this.Tkt=[],this.rkt=si(),this.akt=[],this.Akt=-1}};function rq(t){return void 0!==t.UD}function hq(t,i){return t._kt||i._kt?function(t,i){let e=t.bN(i);return t.kN()||i.kN()||(e.yN(uA())?e=e.bN(aA()):e.DN(uA().EN())&&(e=e.ST(aA()))),e}(t.mkt,i.mkt).pN(ke.zN):t.mkt.pN(i.mkt)}var oq=class{get Ikt(){return this.Skt}get lSt(){return this.Ekt}get tT(){return this.bkt}Fbt(t,i){if(Fo(t))if(0===this.Ekt.length)this.Lkt(t);else{if(!i)return void Wr.uSt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");i.wIt.Fbt(t)}else{if(0!==this.Ekt.length)return void Wr.uSt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.kkt(t)}}Lkt(t){const i=this.Ckt(t.cvt);i.Fbt(t);const e=this.xkt(Ri.ym,i),s=this.xkt(Ri.pm,i),n=new jH({cvt:i.cvt,wz:0,rvt:0,ovt:NaN,mst:void 0,eSt:void 0,zct:0,IEt:[],bEt:void 0,CEt:void 0,SEt:void 0,kEt:void 0,LEt:void 0,EEt:void 0},i,[e,s]);this.Ekt.push(n)}kkt(t){this.Skt.push(...t.obt);const i=this.Okt(t);for(const e of t.abt){const s=i.filter((t=>uq(t,e)));this.jkt(e,s);const n=new jH(e,this.Ckt(e.cvt,t.Cn),s);this.Ekt.push(n)}}Ckt(t,i){let e=this.zkt.get(t);return void 0===e&&(e=new KH(t,i,this.JLt),this.zkt.set(t,e)),e}Okt(t){const i=[];for(const e of t.Pp)if(void 0===e.cvt){for(const s of t.abt)if(aq(e.Rg,e.pIt,s)){const t=new vW(e,this.Ckt(s.cvt));i.push(t)}}else{const t=new vW(e,this.Ckt(e.cvt));i.push(t)}return i}xkt(t,i){return new vW({Rg:t,cvt:void 0,pIt:"",gs:void 0,NEt:void 0,l:"",AIt:!0,vIt:!1,mIt:!1,TIt:void 0,yIt:void 0,DEt:void 0},i)}jkt(t,i){const e=i.filter((t=>t.Rg===Ri.ym)),s=i.filter((t=>t.Rg===Ri.pm)),n=t.mst&&(t.mst.$It||t.mst.JIt);if((!n||t.mst.$It)&&0===s.length){const e=this.xkt(Ri.pm,this.Ckt(t.cvt));i.push(e)}if((!n||t.mst.JIt)&&0===e.length){const e=this.xkt(Ri.ym,this.Ckt(t.cvt));i.push(e)}t.mst&&t.mst.pEt}Pkt(t){for(const i of this.Ekt)for(const e of i.vSt)if(e===t)return e}Bkt(t){for(const i of this.Ekt)if(i===t)return i}Rkt(t){for(const i of this.Ekt)if(gd(i.vSt,t))return i}Ud(){No(this.Ekt),No(this.Skt),this.zkt.clear(),this.bkt.Ud()}constructor(t,i){this.Ekt=[],this.Skt=[],this.zkt=Eo(),this.bkt=new nq,this.Ukt=t,this.JLt=i}};function aq(t,i,e){switch(t){case Ri.ym:return e.SEt===i;case Ri.pm:return e.kEt===i;case Ri.Mm:return e.LEt===i;case Ri.TEt:return e.EEt===i}return!1}function uq(t,i){return aq(t.Rg,t.pIt,i)&&(!t.MIt||t.wIt.cvt===i.cvt)}var io,cq=class extends wn{constructor(t){super(io.Qkt),this.CIt=t}},lq=class extends wn{constructor(t){super(io.Fkt),this.CIt=t}},Bu="HlsModelUpdater";!function(t){t.Qkt="Ykt",t.Fkt="Gkt"}(io||(io={}));var dq=class extends xd{get Vkt(){return this.Wkt}get Hkt(){return this.qkt}get Tr(){return this.gvt}get Xkt(){return this.Zkt}async Kkt(t){const i=this.gvt.Ukt;if(!i)throw new g("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this.Co(new Pn);const e=await this.Jkt(i,{},2,!0,t),s=e.wIt;if(!tH(s)&&!Fo(s))throw new g("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");tH(s)||Wr.qp(Bu,"Detected media playlist only HLS stream."),this.$kt(s),e.tCt&&(this.qkt=!0,await this.iCt(t)),this.Wkt=!0}async eCt(t,i,e,s){const n=this.gvt.Pkt(t);if(!n)throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={HEt:i,ULt:e,Hm:wq(n)},h=Ft(_.max(1,3*t.wIt.kLt));try{await this.sCt(n,r,s,h)}catch(t){throw Ao(t),this.nCt(n),t}}rCt(t,i){const e=this.gvt.Pkt(t);if(!e)throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={HEt:void 0,ULt:void 0,Hm:wq(e)},n=Ft(_.max(1,3*t.wIt.kLt));return this.sCt(e,s,i,n)}hCt(t,i){return this.oCt.has(t.Mg)||this.oCt.set(t.Mg,new Rs),Nr(this.oCt.get(t.Mg).Zb,i)}nCt(t){this.Co(new lq(t))}async sCt(t,e,s,n){const r=t.wIt.KIt(e);let h;try{h=(await this.Jkt(r,e,0,this.qkt,s,n)).wIt}catch(e){throw Ao(e),t.wIt.zLt=i.Kd(),e}if(!Fo(h))throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");if(this.aCt&&t!==this.aCt&&!this.aCt.wIt.bLt)try{await this.rCt(this.aCt,s)}catch(i){Ao(i),this.aCt=t,this.uCt()}try{this.$kt(h,t)}catch(i){if(i instanceof Rr&&void 0!==e.Hm){const i=Tt({},e,{Hm:void 0});return this.sCt(t,i,s,n)}throw i}this.cCt(t),this.aCt=t}async Jkt(t,i,e,s,n,r){if(Wr.qp(Bu,"Loading HLS playlist at "+t+"."),s){const i=await this.lCt(t,n);if(void 0!==i)return{wIt:i,tCt:!0}}return{wIt:await this.dCt(t,i,e,n,r),tCt:!1}}async lCt(t,i){try{const e=await this.pot.Cet([t]);if(Bo(i),void 0!==e)return OH(e.responseURL,{},e.data)}catch(t){Ao(t)}}async dCt(t,i,e,s,n){const r={zu:t,fS:Qv.Ru,AS:this.Gyt,dS:Ys.GET,Rg:Ou.XI,Wd:s,CI:n},h=await mu((()=>this.fCt(r)),s,e);return OH(h.IS,i,h.zm)}async fCt(t){const i=await this.NS.SI(t);return{zm:await i.DS(),IS:i.IS}}async iCt(t){Bo(t);const i=[];for(const e of this.gvt.lSt)for(const s of e.vSt)i.push(this._Ct(s,t));await Promise.all(i)}async _Ct(t,i){try{const e=await this.pot.Cet([t.wIt.cvt]);Bo(i),void 0===e||t.wIt.bLt||await this.rCt(t,i)}catch(t){Ao(t)}}uCt(){for(const t of this.gvt.lSt)for(const i of t.vSt)i!==this.aCt&&void 0!==i.wIt.Bbt&&(i.wIt.bLt?this.cCt(i):i.wIt.$Lt())}cCt(t){if(0!==t.wIt.tst.length){if(!this.aCt)return this.aCt=t,void this.aCt.wIt.skt(0,void 0);if(this.gCt(this.aCt),!this.gCt(t)&&void 0===t.wIt.Bbt){const i=this.wCt(t,this.aCt);Wr.aSt(Bu,"Assuming global timeline offset of "+i+"s for rendition "+t.wIt.cvt+"."),t.wIt.skt(i,void 0)}}}wCt(t,i){if(fq(t)){const e=t.wIt.tst[0],s=i.wIt.tst[0];return Wr.aSt(Bu,"Synchronizing by start of VOD: "+s.GT+" vs "+e.GT),s.GT-e.Vbt}const e=function(t,i){let e=t.length-1,s=i.length-1;for(;e>=0&&s>=0;){const n=t[e],r=i[s];if(n.gbt>r.gbt)e--;else if(n.gbt<r.gbt)s--;else if(n.lbt){if(r.lbt)return{segment:n,referenceSegment:r};s--}else e--}return}(t.wIt.tst,i.wIt.tst);if(void 0!==e){const{segment:t,referenceSegment:i}=e;return Wr.aSt(Bu,"Synchronizing by start of discontinuity #"+i.gbt+": "+i.GT+" vs "+t.GT),i.GT-t.Vbt}const s=gq(t.wIt.tst);if(void 0!==s){const t=gq(i.wIt.tst);if(void 0!==t){Wr.aSt(Bu,"Synchronizing by PDT:",t.fbt.toISOString()+" vs "+s.fbt.getTime());return t.GT-s.Vbt-(t.fbt.getTime()-s.fbt.getTime())/1e3}}const n=_q(i),r=_q(t);var h;const o=null!=(h=t.wIt.Bbt)?h:0;return Wr.aSt(Bu,"Synchronizing by last segment:",n+" vs "+r),n-r+o}gCt(t){const i=this.gvt.Pkt(t);if(!i)return!1;if(fq(i))return!1;const e=function(t,i){return dd(t,(t=>void 0!==t.n9&&i.nkt(t.gbt)))}(i.wIt.tst,this.gvt.tT);if(void 0===e)return!1;if(i.wIt.BLt===e.gbt)return!0;const s=this.gvt.tT.fkt(e.n9,e).vN()-e.Vbt;return Wr.aSt(Bu,"Synchronize by media timestamp: "+s+"s for rendition "+t.wIt.cvt+"."),i.wIt.skt(s,e.gbt),(void 0===this.aCt||void 0===this.aCt.wIt.BLt||this.aCt.wIt.BLt<e.gbt)&&(this.aCt=i),!0}$kt(t,i){var e;(this.gvt.Fbt(t,i),Fo(t)&&i)&&(this.Zkt=i,this.Co(new cq(i)),null==(e=this.oCt.get(i.Mg))||e.Wb(),this.oCt.delete(i.Mg));this.Co(new Qa)}ACt(t,i){for(const e of this.gvt.lSt){const s=Po(e.fSt,(t=>t.wIt===i));void 0!==s&&void 0!==t.$It&&(s.mst=nH(s.mst,t));const n=Po(e.dSt,(t=>t.wIt===i));void 0!==n&&void 0!==t.JIt&&(n.mst=nH(n.mst,t)),e.Sbt||void 0===s&&void 0===n||(e.mst=nH(e.mst,t))}}vCt(t,i){for(const e of this.gvt.lSt){const s=Po(e.fSt,(t=>t.wIt===i));void 0!==s&&void 0===t.$It&&e.xbt(s);const n=Po(e.dSt,(t=>t.wIt===i));void 0!==n&&void 0===t.JIt&&e.xbt(n)}}Ud(){this.Vo(),this.gvt.Ud(),this.oCt.forEach((t=>t.qd())),this.oCt.clear()}constructor(t,i,e,s,n){super(),this.NS=t,this.pot=i,this.Gyt=e,this.Wkt=!1,this.qkt=!1,this.aCt=void 0,this.Zkt=void 0,this.oCt=si(),this.gvt=new oq(s,n)}};function fq(t){return t.wIt.Abt||t.wIt.mbt===ZW.XEt}function _q(t){const i=t.wIt.tst;return i[i.length-1].VT}function gq(t){return dd(t,(t=>void 0!==t.fbt))}function wq(t){if(void 0!==t.wIt.REt&&!t.wIt.Abt&&!(void 0===t.wIt.LLt||i.Kd()/1e3-t.wIt.LLt>=t.wIt.REt/2))return t.wIt.UEt?uh.rLt:uh.nLt}var Aq,vq=class{get nt(){return this.Dgt}HLt(t){if(0===t.wIt.wbt.length)return;this.mCt||(this.mCt=this.sA.yS(Mi.Nm,void 0,void 0,void 0,void 0,Kc.DATE_RANGE),this.Dgt.tt(this.mCt));YH(this.mCt,t.wIt.wbt,(i=>{var e;return null!=(e=t.wIt.Cbt(i))?e:NaN}))}constructor(t,i){this.pCt=t=>{this.HLt(t.CIt)},this.FTt=t,this.sA=i,this.Dgt=new _i,this.FTt.yn(io.Qkt,this.pCt)}},mq=class extends wn{constructor(){super(tu.uIt)}},pq=class{get yCt(){return this.TJ}get wf(){return QR(this.Kst.wf,this.Kst.n$)}get tst(){return this.Amt}get Cgt(){return this.Egt}MCt(t){var i;return null==(i=this.TCt(t))?void 0:i.CIt}Mut(t){this.TJ=t,this.NCt()}yut(t,i,e,s,n,r){this.Amt.push({CIt:t,mot:i,DCt:Ai.IB(n,r),ICt:Ai.IB(e,s)}),this.NCt()}TCt(t){return Po(this.Amt,(i=>i.ICt.gr(t)))}xht(t){return Po(this.Amt,(i=>i.mot===t))}Zat(t,i){return Po(this.Amt,(e=>e.CIt===t&&eq(e.mot,i)))}t$(){const t=this.wf;t.U>0&&(this.Egt=t.jn(t.U-1))}NCt(){const t=this.Kst.wf;this.Amt=this.Amt.filter((i=>0!==t.Sn(i.ICt).U))}constructor(t){this.Kst=t,this.Amt=[],this.TJ=void 0,this.Egt=void 0}},yq=class{get Rg(){return this.X0}get SCt(){return this.X0===Vt.ym||this.X0===Vt.pm}get ECt(){return this.oht}get bCt(){return this.LCt}get kCt(){return void 0!==this.CCt}xCt(){if(this.kCt)throw new g("Cannot perform new operation while BufferAppender is still busy")}Gst(t){this.Kst!==t&&(this.xCt(),this.Kst=t,this.oht=new pq(t))}OCt(){return this.CCt?this.CCt.Zb:Promise.resolve()}jCt(t){const i=this.oht.Cgt;return void 0!==i&&this.zCt(t,i)}zCt(t,i){var e;const s=_.min(t,i);var n;return null!=(n=null==(e=this.oht.wf.nB().dB(this.bCt).lA(s))?void 0:e.gr(i))&&n}PCt(t){return this.oht.MCt(t)}qd(){this.Tx.qd(),this.Tx=new na}AJ(t){this.xCt(),this.CCt=new Rs;const i=i=>{this.RCt.BCt(t),this.UCt(i)};this.vJ(t,this.Tx.Wd).then(i,i)}async vJ(t,i){Wr.aSt(Ir,"Appending initializer",Jo(t.QCt.cvt)),await this.Kst.AJ(t,i),Wr.aSt(Ir,"Appended initializer",Jo(t.QCt.cvt)),this.oht.Mut(t)}Out(t){this.xCt(),this.CCt=new Rs;const i=i=>{this.RCt.BCt(t),this.UCt(i)};this.FCt(t,this.Tx.Wd).then(i,i)}async FCt(t,i){const e=t.CIt;if(void 0===e.wIt.eEt)throw new g("MediaBufferWrapper - Cannot append HLSAsset to "+this.X0+" MediaBuffer for a HLSRendition with an undefined targetDuration.");const s=this.oht.wf.JP,n=this.Kst.wf;Wr.aSt(Ir,"Appending",Jo(t.QCt.cvt)),await this.Kst._J(t,i),Wr.aSt(Ir,"Appended",Jo(t.QCt.cvt),s,this.oht.wf.JP);const r=t.GT,h=r+t.ct,o=t.QCt,a=o.GT;var u;const c=o.GT+(null!=(u=o.ct)?u:0);this.oht.yut(e,o,r,h,a,c);const l=this.Kst.wf.dB(n),d=this.oht.Zat(e,o);if(this.Rg===Vt.pm)if(d)if(this.YCt(d))if(0===l.U){if(void 0===this.oht.xht(o)){const t=this.Kst.n$.Sn(new Ai([r,h]));this.LCt=this.LCt.cB(t)}}else{const t=l.Cn(0),i=new Ai([t,h]);if(this.LCt=this.LCt.dB(i),t>r){const i=this.Kst.n$.Sn(new Ai([r,t]));this.LCt=this.LCt.cB(i)}}else{const t=l.U>0&&l.Cn(0)<r?l.Cn(0):r;this.LCt=this.LCt.dB(new Ai([t,h]))}else if(0===l.U){const t=this.Kst.n$.Sn(new Ai([r,h]));this.LCt=this.LCt.cB(t)}else{var f;const t=l.Cn(0),i=null==(f=n.lA(r))?void 0:f.jn(0),e=i&&i>r?i:r;if(t>e){const t=this.Kst.n$.Sn(new Ai([e,l.Cn(0)]));this.LCt=this.LCt.cB(t)}}t.QCt.Rbt&&this.oht.t$()}YCt(t){const i=t.ICt,e=i.Cn(0),s=i.jn(i.U-1),n=i.tB(0),r=i.eB(i.U-1);return this.LCt._B(e,s,n,r)}constructor(t,i,e,s,n){this.CCt=void 0,this.Tx=new na,this.LCt=Ai.SB(),this.UCt=t=>{this.CCt&&(t?Kb(t)&&this.SCt?this.GCt.UW(this.Kst.wf.NB)?this.CCt.Wb():this.CCt.qb(t):Ho(t)?this.CCt.Wb():this.CCt.qb(t):this.CCt.Wb(),this.CCt=void 0)},this.X0=t,this.RCt=e,this.Kst=i,this.oht=s,this.GCt=n}},Mq=class{async VCt(t,i,e,s){const n=await this.WCt(i,s);return await this.HCt.VCt(t,n,e)}async WCt(t,i){var e;if((null==(e=this.qCt)?void 0:e.zu)!==t){Wr.aSt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const e=await this.NS.SI({zu:t,fS:Qv.YI,dS:Ys.GET,Wd:i,Rg:Ou.JI,gS:jo.hS,AS:this.Gyt}),s=await e.cj(),n=new j(s);this.qCt={zu:t,zm:n}}return this.qCt.zm}constructor(t,i,e){this.HCt=t,this.NS=i,this.Gyt=e,this.qCt=void 0}},Tq=class{async SI(t,i,e,s,n){const r=await this.XCt(t,i,e,Qv.YI,s,n),h=await r.cj(n);return{httpStatusCode:r.kI,response:new j(h)}}async ZCt(t,i,e,s,n){return(await this.XCt(t,i,e,Qv.VI,s,n)).dV(n)}async XCt(t,i,e,s,n,r){let h;t.Umt&&(h=$W(t.Umt.Cn,t.Umt.U),0===h[0]&&h[1]===vu&&(h=void 0));const o=h?{Range:"bytes="+h[0]+"-"+h[1]}:void 0,a=new zu({zu:t.jM,fS:s,lS:o,AS:this.Gyt,dS:Ys.GET,Rg:i,gS:e,wS:this.Rht,mS:s===Qv.VI,vS:n,Wd:r});try{const i=await this.pot.Pet(t.jM,h);if(Bo(r),void 0!==i)return null==n||n(i.buffer.byteLength,i.buffer.byteLength),new _h({SI:a,fS:a.fS,zm:i.buffer})}catch(t){Ao(t)}return await mu((()=>Nr(this.NS.SI(a),a.Wd)),r,this.Ctt)}constructor(t,i,e,s,n=2){this.NS=t,this.pot=i,this.Rht=e,this.Gyt=s,this.Ctt=n}},ih=class{KCt(){return this.JCt.wIt.BEt}async $Ct(t,e,s){if(!this.KCt())throw new g("Could not perform blocking playlist update.");try{await this.txt(),Bo(s),await this.FTt.eCt(this.JCt,t,e,s),this.An=i.Kd()}catch(t){throw Ho(t)&&this.ixt(),t}this.ixt()}ext(t){return this.FTt.hCt(this.JCt,t)}ixt(){if(!this.sxt&&!this.nxt){const t=()=>{this.sxt=void 0};this.sxt=this.rxt(this.hxt.Wd).then(t,t)}}async txt(){this.sxt&&(this.hxt.qd(),this.hxt=new na,await this.sxt.catch(qt),this.sxt=void 0)}async rxt(t){for(;;){if(this.JCt.wIt.Abt&&this.JCt.wIt.bLt)return;const e=i.Kd()-this.An,s=1e3*this.JCt.wIt.kLt;e<s&&await lt(s-e,t);try{await this.FTt.rCt(this.JCt,t)}catch(t){throw Ao(t),this.FTt.nCt(this.JCt),t}this.An=i.Kd()}}Ud(){this.nxt=!0,D(this.txt())}constructor(t,i){this.sxt=void 0,this.hxt=new na,this.An=-1/0,this.nxt=!1,this.FTt=t,this.JCt=i,this.ixt()}};!function(t){t[t.ZEt=0]="ZEt",t[t.KEt=1]="KEt",t[t.ZI=2]="ZI",t[t.KI=3]="KI"}(Aq||(Aq={}));var Lh="AssetExtractor",Nq=class{oxt(t,i,e){let s=i;for(const i of this.axt){if(s>=t)return!0;if(s<i.Cn)return!1;if(s<i.jn){if(e<=i.jn)return!0;s=i.jn}}return s>=t}uxt(t,i){const e=[];for(let s=0;s<this.axt.length;s+=1){const n=this.axt[s],r=t-n.Cn,h=n.zm.length,o=_.min(h,_.max(r,0)),a=_.max(0,i+r),u=Ko(n.zm,o,a);u.length&&(s=this.cxt(s,n,t,o,a),e.push(u))}return e}lxt(t,i){this.axt.push({Cn:t,jn:t+i.length,zm:i})}cxt(t,i,e,s,n){let r=t;this.axt.splice(r,1),r-=1,i.Cn<e&&(r+=1,this.axt.splice(r,0,{Cn:i.Cn,jn:e,zm:Ko(i.zm,0,s)}));const h=e+n-s;return h<i.jn&&(r+=1,this.axt.splice(r,0,{Cn:h,jn:i.jn,zm:Ko(i.zm,n)})),r}constructor(){this.axt=[]}},Dq=class{get dxt(){return this.fxt}async _xt(){const t=await this.uG.read();if(t.done)throw this.fxt=1/0,new g("No more data can be read from the given stream.");return this.fxt+=t.value.length,t.value}async gxt(t){await this.uG.cancel(t)}constructor(t,i){this.fxt=i,this.uG=t.getReader()}},Iq=class{wxt(){this.Axt.Wb(),this.Axt=new Rs}vxt(t){const{Qmt:i,Fmt:e}=Eq(this.Wbt.Umt),s=this.mxt.uxt(i,e-i);Wr.aSt(Lh,"Collected "+s.length+" chunks.");for(const i of s)t.enqueue(i)}async readAndSliceOutAssetBytes(t){await this.pxt.Zb;const{Qmt:i,Fmt:e}=Eq(this.Wbt.Umt);try{for(;;){const s=this.uG.dxt,n=await this.uG._xt(),r=n.length;Wr.aSt(Lh,"Read "+r+" at "+s+" for extraction of "+Jo(this.Wbt));const h=_.min(s+r,i)-s;if(!(h>0)){if(s+r<=e)return Wr.aSt(Lh,"Extracting the read data range for extraction of "+Jo(this.Wbt)),t.enqueue(n),this.wxt(),D(this.readAndSliceOutAssetBytes(t));{const i=e-s,h=Ko(n,0,i),o=Ko(n,i);return h.length>0&&(Wr.aSt(Lh,"Extracting "+h.length+" bytes for extraction of "+Jo(this.Wbt)),t.enqueue(h)),Wr.aSt(Lh,"Of the read "+r+" bytes, the last "+o.length+" will be stored locally for extraction of "+Jo(this.Wbt)),this.mxt.lxt(s+i,o),Wr.aSt(Lh,"Extraction of "+Jo(this.Wbt)+" completed as the entire request has been fulfilled."),this.yxt(t),void(this.Mxt&&(Wr.aSt(Lh,"Aborting stream upstream as no more bytes are needed from "+Jo(this.Wbt)+"."),await this.uG.gxt("AssetExtraction - AbortOnEnd")))}}{const i=Ko(n,0,h),e=Ko(n,h);if(Wr.aSt(Lh,"Of the read "+r+" bytes, the first "+h+" will be stored locally for extraction of "+Jo(this.Wbt)),this.mxt.lxt(s,i),e.length>0)return Wr.aSt(Lh,"Extracting "+e.length+" bytes for extraction of "+Jo(this.Wbt)),t.enqueue(e),this.wxt(),D(this.readAndSliceOutAssetBytes(t))}}}catch(i){Wr.aSt(Lh,"Extraction of "+Jo(this.Wbt)+" completed as the entire source stream has been read."),this.yxt(t)}}yxt(t){t.close(),this.wxt(),this.Txt.Wb()}start(t){Wr.aSt(Lh,"Preparing to push all collected data to controller for extraction of "+Jo(this.Wbt)),this.vxt(t),Wr.aSt(Lh,"Collected data pushed to controller for extraction of "+Jo(this.Wbt));const{Fmt:i}=Eq(this.Wbt.Umt);this.uG.dxt>=i?(Wr.aSt(Lh,"Extraction of "+Jo(this.Wbt)+" completed as the entire request has been fulfilled."),this.yxt(t)):(Wr.aSt(Lh,"Continuing read from original stream for extraction of "+Jo(this.Wbt)),D(this.readAndSliceOutAssetBytes(t)))}get Nxt(){return this.Txt.Zb}pull(){return this.pxt.Wb(),this.pxt=new Rs,this.Axt.Zb}constructor(t,i,e,s){this.Txt=new Rs,this.Wbt=t,this.uG=i,this.mxt=e,this.Mxt=s,this.pxt=new Rs,this.Axt=new Rs}},Sq=class{bT(t){if(!iH(this.Wbt,t))return!1;const{Qmt:i,Fmt:e}=Eq(t.Umt);return this.mxt.oxt(this.Dxt.dxt,i,e)}async Y_t(t,i){void 0===i&&(i=!1);const e=this.Dxt,s=this.mxt;if(Wr.qp(Lh,"Extracting data from "+Jo(t)+" out of "+Jo(this.Wbt)),this.Ixt&&(Wr.aSt(Lh,"Awaiting previous extraction before extracting "+Jo(t)+" out of "+Jo(this.Wbt)),await this.Ixt),!this.bT(t))throw new g("The extractor does not contain the data requested");const n=new Iq(t,e,s,i);return this.Ixt=n.Nxt,new P(n)}constructor(t,i){this.Wbt=i;const{Qmt:e}=Eq(this.Wbt.Umt);this.Dxt=new Dq(t,e),this.mxt=new Nq}};function Eq(t){if(t){const i=t.Cn;return{Qmt:i,Fmt:void 0!==t.U?i+t.U:vu}}return{Qmt:0,Fmt:vu}}var bq=class{async $n(){const t=await this.Sxt.ZCt(this.Wbt,Ou.KI,jo.rT,void 0,this.Tx.Wd);return new Sq(t,this.Wbt)}bT(t){return iH(this.Wbt,t)}async Y_t(t,i){void 0===i&&(i=!1);const e=await this.Xgt;return await Nr(e.Y_t(t,i),this.Tx.Wd)}qd(){this.Xgt.catch(qt),this.Tx.qd()}constructor(t,i){this.Wbt=t,this.Sxt=i,this.Tx=new na,this.Xgt=this.$n()}},Lq=class extends wn{constructor(t){super(jr.Ext),this.wS=t}},kq=class extends wn{constructor(t,i,e,s,n,r,h){super(jr.bxt),this.uri=t,this.Lxt=i,this.wS=e,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.kxt=r,this.httpStatusCode=h}};function Cq(t,i,e){const s=tq(e)?e:e.Qbt;if(i.nkt(s.gbt)){if(void 0!==e.n9)return i.fkt(e.n9,e).vN();if(e!==s&&void 0!==s.n9){const t=i.fkt(s.n9,s).vN();return e.GT+(t-s.GT)}}const n=t.wIt.xht(s.HEt-1);if(void 0!==n&&i.nkt(n.gbt)){if(n.cbt.length>0){const t=n.Jbt(n.cbt.length-1);if(void 0!==t.n9){const s=i.fkt(t.n9,t).vN();return e.GT+(s-t.GT)}}if(void 0!==n.n9){const t=i.fkt(n.n9,n).vN();return e.GT+(t-n.GT)}}const r=t.wIt.xht(s.HEt+1);if(void 0!==r&&i.nkt(r.gbt)){if(r.cbt.length>0){const t=r.Jbt(0);if(void 0!==t.n9){const s=i.fkt(t.n9,t).vN();return e.GT+(s-t.GT)}}if(void 0!==r.n9){const t=i.fkt(r.n9,r).vN();return e.GT+(t-r.GT)}}return e.GT}function xq(t){return void 0!==t.n9}function Oq(t,i,e,s){for(let n=i;n<t.length;n++){const i=t[n];if(i.gbt!==e)break;if(xq(i)){if(s(i,n))break}}}function jq(t,i,e,s){for(let n=i;n>=0;n--){const i=t[n];if(i.gbt!==e)break;if(xq(i)){if(s(i,n))break}}}var jr,zq="HlsPlaylistDownloader";!function(t){t.Ext="segmentdownloadprogress",t.bxt="segmentdownloaded"}(jr||(jr={}));var Pq=class extends xd{Cxt(t){this.xxt.Ud(),this.xxt=new ih(this.FTt,t),this.kCt?this.Oxt=t:(this.JCt=t,this.jxt=0,this.zxt=void 0,this.Pxt=void 0)}get kCt(){return void 0!==this.Bxt}OCt(){return this.Bxt?this.Bxt.Zb:Promise.resolve()}Rxt(){return this.RCt.Rxt()}Uxt(t){this.RCt.Uxt(t)}qd(){var t,i,e;this.Qxt.qd(),this.Qxt=new na,null==(t=this.Fxt)||t.qd(),this.Fxt=void 0,null==(i=this.Yxt)||i.qd(),null==(e=this.Gxt)||e.qd(),this.Yxt=void 0,this.Gxt=void 0,this.jxt=0,this.zxt=void 0,this.Pxt=void 0}Ud(){this.xxt.Ud()}get CIt(){var t;return null!=(t=this.Oxt)?t:this.JCt}get Vxt(){if(!this.JCt.wIt.Abt||void 0===this.zxt)return!1;const t=this.JCt.wIt.xht(this.zxt);if(!t.Rbt)return!1;if(void 0!==this.Pxt){if(!t.Jbt(this.Pxt).Rbt)return!1}return!0}Wxt(t){const i=this.JCt.wIt.QLt(t);if(!i)return!1;if(void 0!==this.zxt){const e=i.HEt===this.zxt;return void 0!==this.Pxt?i.$bt(t)===i.Jbt(this.Pxt)&&e:e}return!1}Hxt(t){let i;if(void 0===this.zxt||t<this.jxt-1e-6)i=this.qxt(t);else if(i=this.Xxt(this.zxt,this.Pxt),void 0!==i){const[e,s]=i,n=Cq(this.JCt,this.FTt.Tr.tT,null!=s?s:e),r=3*this.JCt.wIt.eEt;_.abs(n-t)>=r&&(i=this.qxt(t))}else if(this.JCt.wIt.Abt){if(this.JCt.wIt.xht(this.zxt).Rbt&&(i=this.qxt(t),void 0!==i&&i[0].HEt===this.zxt))return}if(i){this.jxt=t;const[e,s]=i;return 0===(null==s?void 0:s.Ybt)&&void 0!==e.ct?[e,void 0]:[e,s]}}qxt(t){let i,e;const s=this.JCt.wIt.tst;if(0===s.length)return;const n=this.FTt.Tr.tT,r=ke.mD(t),h=function(t,i,e){const s=t.wIt.tst;if(0===s.length)return;const n=t.wIt.FLt(e.vN());if(!i.nkt(n.gbt))return;const r=n.HEt-s[0].HEt,h=n.gbt;let o,a,u,c=0;if(jq(s,r,h,((t,i)=>(o=t,c=i,!0))),void 0===o&&(Oq(s,r+1,h,((t,i)=>(o=t,c=i,!0))),void 0===o))return;return i.fkt(o.n9,o).TN(e)?(a=o,Oq(s,c+1,h,(t=>i.fkt(t.n9,t).mN(e)?(u=t,!0):(a=t,!1)))):(u=o,jq(s,c-1,h,(t=>i.fkt(t.n9,t).TN(e)?(a=t,!0):(u=t,!1)))),void 0!==a&&void 0!==u?[a,u]:void 0}(this.JCt,n,r);let o;if(void 0!==h){const[t,i]=h,e=n.fkt(t.n9,t),s=n.fkt(i.n9,i),a=r.bN(e).vN()/s.bN(e).vN()*(i.GT-t.GT);o=t.GT+a}else o=t;const a=s[s.length-1];return a.VT<=o?(i=a,e=a.iLt(o)):s[0].GT>o?(i=s[0],e=i.Jbt(0)):(i=this.JCt.wIt.QLt(o),e=null==i?void 0:i.iLt(o)),i?[i,e]:void 0}Xxt(t,i){let e,s;if(e=this.JCt.wIt.xht(t),e&&void 0!==i){if(0===e.cbt.length)return[e,void 0];s=e.Jbt(i+1)}return void 0!==e&&void 0!==s||(e=this.JCt.wIt.xht(t+1),s=null==e?void 0:e.Jbt(0)),e?[e,s]:void 0}xCt(){if(this.kCt)throw new g("Cannot perform new operation while PlaylistDownloader is still busy")}Zxt(t){this.xCt(),this.Bxt=new Rs,this.Kxt(t,this.Qxt.Wd).then(this.Jxt,this.Jxt)}$xt(){this.xxt.ixt()}async Kxt(t,i){if(this.JCt.wIt.Abt)return;let e=this.Hxt(t);for(!e&&this.xxt.KCt()&&void 0!==this.zxt&&(await this.xxt.$Ct(void 0===this.Pxt?this.zxt+1:this.zxt,void 0!==this.Pxt?this.Pxt+1:void 0,i),e=this.Hxt(t)),!e&&this.xxt.KCt()&&void 0!==this.zxt&&(await this.xxt.$Ct(this.zxt+1,0,i),e=this.Hxt(t));!e;){Wr.qp(zq,"No next segment / part available, need to update playlist before continuing."),await this.xxt.ext(i);const s=this.CIt.wIt.tst;s[0].GT>t&&(this.Pxt=void 0,this.zxt=void 0);s[s.length-1].HEt<this.zxt&&(this.Pxt=void 0,this.zxt=void 0),e=this.Hxt(t)}}tOt(){return this.RCt.iOt()}eOt(){this.xCt();try{const t=this.JCt.wIt.YLt(xi.ZEt);t&&this.sOt(t);const i=this.JCt.wIt.YLt(xi.KEt);i&&this.nOt(i)}catch(t){throw Ao(t),this.JCt.wIt.zLt=i.Kd(),this.FTt.nCt(this.JCt),t}}sOt(t){this.Gxt&&!this.Gxt.bT(t.cvt)&&(this.Gxt.qd(),this.Gxt=void 0),this.Gxt||(this.Gxt=new bq(t.cvt,this.Sxt))}nOt(t){this.Yxt&&!this.Yxt.bT(t.cvt)&&(this.Yxt.qd(),this.Yxt=void 0),this.Yxt||(this.Yxt=new bq(t.cvt,this.Sxt))}Cht(t,e,s){this.xCt(),Wr.qp(zq,"Starting download of segment "+Jo(t.cvt)+" and part "+(null==e?void 0:e.Ybt)),this.Bxt=new Rs,this.rOt(t,e,s,this.Qxt.Wd).catch((t=>{throw Ao(t),this.JCt.wIt.zLt=i.Kd(),this.FTt.nCt(this.JCt),t})).then(this.Jxt,this.Jxt)}async rOt(t,i,e,s){let n;if(t.dbt){var r,h;if(!e||!eH(e.QCt.cvt,null==(r=t.dbt)?void 0:r.cvt)||t.gbt!==e.gbt){var o;null==(o=this.Fxt)||o.qd(),this.Fxt=new Rs;const i=this.hOt(t.dbt,t,s).then((()=>{this.Fxt=void 0}));this.Fxt.Xd(i)}n=null==(h=this.Fxt)?void 0:h.Zb}await this.oOt(t,i,n,s)}async hOt(t,i,e){const s=await this.aOt(t,i,e),n=s.dbt.zm.zm.byteLength;this.RCt.uOt(s),this.Co(new kq(s.dbt.QCt.cvt,s.Rg,this.X0,i.HEt,s.CIt.Mg,n,s.dbt.Fot)),Wr.aSt(Ir,"Download initializer complete",Jo(t.cvt))}async oOt(t,i,e,s){const n=await this.cOt(t,i,s),r=n.mot.zm.zm.byteLength;var h;e&&await Nr(e,s),this.RCt.uOt(n),this.Co(new kq(n.mot.QCt.cvt,n.Rg,this.X0,t.HEt,n.CIt.Mg,r,n.mot.Fot)),Wr.aSt(Ir,"Download complete",Jo(null!=(h=null==i?void 0:i.cvt)?h:t.cvt))}async cOt(t,i,e){let s;if(i){if(this.Yxt)if(this.Yxt.bT(i.cvt)){const t=await this.Yxt.Y_t(i.cvt),n=await Ot(t,e),r=new j(n);s=Rq(i,await this.VCt(r,i.obt,e),200)}else this.Yxt.qd(),this.Yxt=void 0;s||(Wr.aSt(Ir,"Start download",Jo(i.cvt)),s=await this.lOt(i,e))}else Wr.aSt(Ir,"Start download",Jo(t.cvt)),s=await this.jht(t,e);return this.zxt=t.HEt,this.Pxt=null==i?void 0:i.Ybt,{Rg:"mot",mot:s,CIt:this.JCt,gbt:t.gbt}}async aOt(t,i,e){let s;if(this.Gxt){var n;if(this.Gxt.bT(t.cvt)){const n=await Nr(this.Gxt.Y_t(t.cvt),e),r=await Ot(n,e),h=new j(r);s=Bq(t,i,await this.VCt(h,t.ubt?[t.ubt]:[],e),200)}Wr.qp(zq,"MAP is required for segment, downloading MAP data."),null==(n=this.Gxt)||n.qd(),this.Gxt=void 0}return s||(Wr.aSt(Ir,"Start download",Jo(t.cvt)),s=await this.dOt(t,i,e)),{Rg:"dbt",dbt:s,CIt:this.JCt,GT:i.GT,gbt:i.gbt,obt:i.obt}}async dOt(t,i,e){const{response:s,httpStatusCode:n}=await this.Sxt.SI(t.cvt,Ou.ZI,jo.$I,void 0,e),r=t.ubt?[t.ubt]:[];return Bq(t,i,await this.VCt(s,r,e),n)}async jht(t,i){if(!t.cvt)throw new g("Internal error: attempted to download an incomplete segment");let e,s;try{this.fOt(t);const n=await this.Sxt.SI(t.cvt,Ou.ZI,jo.rT,this._Ot,i);e=n.response,s=n.httpStatusCode}finally{this.gOt()}return function(t,i,e){return{zm:{zm:i,Rg:ji.aq},Rg:Aq.ZI,Fot:e,QCt:t,gbt:t.gbt}}(t,await this.VCt(e,t.obt,i),s)}async lOt(t,i){let e,s;try{this.fOt(t);const n=await this.Sxt.SI(t.cvt,Ou.ZI,jo.rT,this._Ot,i);e=n.response,s=n.httpStatusCode}finally{this.gOt()}return Rq(t,await this.VCt(e,t.obt,i),s)}async VCt(t,i,e){const s=Po(i,(t=>t.dS===xu.xEt));return s?s.cvt&&s.OEt?await this.wOt.VCt(t,s.cvt,s.OEt,e):(Wr.lt(zq,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}fOt(t){var e,s,n;this.AOt=t,this.vOt=0,this.mOt=i.Kd(),this.pOt=0,this.yOt=null!=(n=null==(s=t.cvt)||null==(e=s.Umt)?void 0:e.U)?n:0}gOt(){this.AOt=void 0,this.vOt=0,this.mOt=0,this.pOt=0,this.yOt=0}MOt(){if(void 0!==this.AOt)return{mot:this.AOt,TOt:this.pOt,NOt:this.yOt,DOt:i.Kd()-this.mOt}}IOt(t){return void 0!==this.AOt&&(0!==this.vOt&&(!(this.yOt>0&&this.pOt>=this.yOt)&&!(t-this.vOt<500)))}constructor(t,e,s,n,r,h,o,a){super(),this.Oxt=void 0,this.Bxt=void 0,this.AOt=void 0,this.vOt=0,this.mOt=0,this.pOt=0,this.yOt=0,this.Qxt=new na,this.Fxt=void 0,this.jxt=0,this.zxt=void 0,this.Pxt=void 0,this.Gxt=void 0,this.Yxt=void 0,this.Jxt=t=>{this.Oxt&&(this.JCt=this.Oxt,this.Oxt=void 0,this.jxt=0,this.zxt=void 0,this.Pxt=void 0),this.Bxt&&(t&&!Ho(t)?this.Bxt.qb(t):this.Bxt.Wb(),this.Bxt=void 0)},this._Ot=(t,e)=>{this.pOt=t,t>0&&0===this.vOt&&(this.vOt=i.Kd()),void 0!==e&&(this.yOt=e),this.Co(new Lq(this.X0))},this.X0=t,this.FTt=s,this.RCt=n,this.JCt=e,this.xxt=new ih(s,e),this.wOt=new Mq(o,r,a),this.Sxt=new Tq(r,h,function(t){switch(t){case Ri.pm:return Re.pm;case Ri.ym:return Re.ym;case Ri.Mm:case Ri.TEt:return Re.Ru;default:return Re.rT}}(e.Rg),a)}};function Bq(t,i,e,s){return{zm:{zm:e,Rg:ji.aq},Rg:Aq.ZEt,Fot:s,QCt:t,gbt:i.gbt}}function Rq(t,i,e){return{zm:{zm:i,Rg:ji.aq},Fot:e,Rg:Aq.KEt,QCt:t,gbt:t.Qbt.gbt}}var Eu,Uq=class{get yCt(){return this.SOt}get EOt(){const t=[];for(const e of this.bOt)if("mot"===e.Rg){const s=e.mot.QCt,n=Cq(e.CIt,this.bkt,s);var i;t.push({mot:s,CIt:e.CIt,GT:n,VT:n+(null!=(i=s.ct)?i:0)})}return t}get LOt(){const t=[];return this.kOt.forEach((i=>{for(const e of i.COt)"mot"===e.Rg&&t.push({mot:e.QCt,CIt:e.CIt,GT:e.GT,VT:e.GT+e.ct})})),t}uOt(t){"dbt"===t.Rg&&(this.SOt=t.dbt),this.bOt.push(t),this.xOt&&(this.xOt.Wb(),this.xOt=void 0)}Rxt(){return this.bOt[0]}Uxt(t){To(this.bOt,t)}iOt(){return null!=this.xOt||(this.xOt=new Rs),this.xOt.Zb}OOt(t){this.jOt(t.dht).OOt(t)}zOt(t){return this.jOt(t).zOt()}BCt(t){this.jOt(t.dht).BCt(t)}POt(t){var i;null==(i=this.kOt.get(t))||i.Ud()}BOt(t){return this.jOt(t).BOt()}jOt(t){if(this.kOt.has(t))return this.kOt.get(t);{const i=new Qq;return this.kOt.set(t,i),i}}Vb(){this.ROt(),this.UOt()}ROt(){this.SOt=void 0,No(this.bOt)}UOt(){this.kOt.forEach((t=>t.Vb()))}Ud(){this.kOt.forEach((t=>t.Ud())),this.kOt.clear(),this.Vb(),this.xOt&&(this.xOt.qd(),this.xOt=void 0)}constructor(t){this.bOt=[],this.kOt=Eo(),this.xOt=void 0,this.SOt=void 0,this.bkt=t}},Qq=class{get COt(){return this.QOt}OOt(t){this.QOt.push(t),this.FOt&&(this.FOt.Wb(),this.FOt=void 0)}zOt(){return this.QOt[0]}BCt(t){To(this.QOt,t)}BOt(){return null!=this.FOt||(this.FOt=new Rs),this.FOt.Zb}Vb(){No(this.QOt)}Ud(){this.Vb(),this.FOt&&(this.FOt.qd(),this.FOt=void 0)}constructor(){this.QOt=[],this.FOt=void 0}},Fq=1e-6,Yq=class{get wf(){return this.tDt}get n$(){return this.iDt}async AJ(t,i){const e=t.zm.zm;if(this.YOt(e),this.GOt.Rg===Kc.TTML){this.bkt.nkt(t.gbt)||await Nr(this.bkt.hkt(t.gbt),i);const s=this.VOt(e,t.gbt);for(const t of s)this.GOt.SS(t)}}async _J(t,i){if(void 0===t.zm)return;const e=t.GT,s=e+t.ct;this.tDt=this.tDt.cB(Ai.IB(e,s)).uB(Fq),this.o$(t.WOt,t.HOt),this.a$(e,s),this.bkt.nkt(t.gbt)||await Nr(this.bkt.hkt(t.gbt),i),this.wJ(t.zm.zm,t.gbt,t.QCt)}wJ(t,i,e){let s;this.YOt(t),s=this.GOt.Rg===Kc.WEBVTT?this.qOt(t,e):this.VOt(t,i);for(const t of s)this.GOt.SS(t)}qOt(t,i){const e=vA(t),s=e.L;var n;const r=null!=(n=e.YD)?n:{GD:ke.zN,lh:ke.zN};for(const t of s){const e=ke.mD(t.GT).bN(r.lh).ST(r.GD),s=this.bkt.fkt(e,i).vN(),n=s+(t.VT-t.GT);t.uN(s,n)}return s}VOt(t,i){const e=this.bkt.dkt(i).vN();return uv(t,this.GOt,{BD:0,RD:1/0,UD:e},Qe.APPLICATION_MP4)}YOt(t){this.GOt.Rg===Kc.DEFAULT&&(this.GOt.Rg=this.XOt(t)?Kc.WEBVTT:Kc.TTML)}XOt(t){return bA(Tl(fe(ha(t),0,_.min(t.byteLength,16)),new L))}o$(t,i){this.iDt=this.iDt.cB(Ai.IB(t,i)).uB(Fq)}a$(t,i){this.iDt=this.iDt.dB(Ai.IB(t,i))}constructor(t,i){this.tDt=Ai.SB(),this.iDt=Ai.SB(),this.GOt=t,this.bkt=i}},Gq=class extends wn{constructor(t,i){super(Eu.ZOt),this.CIt=t,this.mst=i}},Vq=class extends wn{constructor(t){super(Eu.KOt),this.CIt=t}},Wq=class extends wn{constructor(t,i){super(Eu.JOt),this.CIt=t,this.zct=i}},Hq=class extends wn{constructor(t,i){super(Eu.$Ot),this.CIt=t,this.tjt=i}};!function(t){t.ZOt="ijt",t.JOt="ejt",t.$Ot="sjt",t.KOt="njt"}(Eu||(Eu={}));var qq=class extends xd{get rjt(){return this.hjt}ojt(t){for(const i of this.hjt)gd(t,i)||this.RCt.POt(i);this.hjt=t}get kCt(){return void 0!==this.ajt}OCt(){var t,i;return null!=(i=null==(t=this.ajt)?void 0:t.Zb)?i:Promise.resolve()}xCt(){if(this.kCt)throw new g("Cannot perform new operation while transmuxer is still busy")}ujt(t,i){}cjt(t){this.xCt(),this.ajt=new Rs;const i=i=>{this.ljt(t,i)};this.djt(t,this.Tx.Wd).then(i,i)}fjt(t){this.xCt(),this.ajt=new Rs;const i=i=>{this.ljt(t,i)};this._jt(t,this.Tx.Wd).then(i,i)}ljt(t,i){this.ajt&&(!i||Ho(i)||function(t){return t instanceof sq}(i)?(Ho(i)||this.RCt.Uxt(t),this.ajt.Wb(),this.ajt=void 0):this.ajt.qb(i))}gjt(t,i){this.Co(new Gq(t,i))}wjt(t,i){this.Co(new Wq(t,i))}Ajt(t,i,e){iq(i)&&this.Co(new Hq(t,e))}vjt(t){this.Co(new Vq(t))}OOt(t){gd(this.hjt,t.dht)&&this.RCt.OOt(t)}mjt(t){return this.RCt.zOt(t)}BCt(t){this.RCt.BCt(t)}pjt(t){return this.RCt.BOt(t)}qd(){this.Tx.qd(),this.Tx=new na}constructor(t,i,e){super(),this.ajt=void 0,this.Tx=new na,this.RCt=t,this.bkt=i,this.hjt=e}};function ec(t,i){return iq(t)?0:_.min(t.GT,i)}function Xq(t,i){var e;return _.max(t.GT,i)+(null!=(e=t.ct)?e:0)}var Zq=class extends qq{djt(t,i){Bo(i);const e={Rg:"yjt",zm:t.dbt.zm,dht:this.rjt[0],gbt:t.gbt,Mjt:{mst:"",obt:t.obt},GT:t.GT,CIt:t.CIt,QCt:t.dbt.QCt};return this.OOt(e),Promise.resolve()}async _jt(t,i){Bo(i);const e=t.mot.QCt;let s;void 0!==e.n9?(this.bkt.nkt(t.gbt)||await Nr(this.bkt.hkt(t.gbt),i),s=this.bkt.fkt(e.n9,e).vN()):s=e.GT;const n=ec(e,s),r=Xq(e,n);var h;const o={Rg:"mot",zm:t.mot.zm,dht:this.rjt[0],WOt:n,HOt:r,GT:s,ct:null!=(h=e.ct)?h:0,UD:0,gbt:t.gbt,CIt:t.CIt,QCt:t.mot.QCt};this.OOt(o)}constructor(t,i,e){super(t,i,[e])}};function Kq(t,i){let e=Ai.SB();for(const s of t){let n=s.GT;if(s.CIt.wIt.Abt&&iq(s.mot))n=0;else{const e=t=>s.CIt===t.CIt&&eq(t.mot,s.mot),r=Po(t,e);if(void 0!==r)n=_.min(n,r.VT);else{const t=Po(i,e);void 0!==t&&(n=_.min(n,t.ICt.jn(0)))}}e=e.cB(Ai.IB(n,s.VT))}return e}var Jq=.001,$q=class{get Tjt(){return this.Njt}get CIt(){return this.Djt.CIt}Cxt(t){this.Djt.Cxt(t)}get kCt(){return this.Djt.kCt||this.Ijt.kCt||this.Njt.some((t=>t.kCt))}Sjt(t){const i=t.slice();for(let t=this.Njt.length-1;t>=0;t--){const e=this.Njt[t];if(!e.SCt)throw new g("Invalid state");const s=uu(i,(t=>t.Rg===e.Rg));s>=0?(e.Gst(i[s]),ja(i,s)):ja(this.Njt,t)}for(const t of i){const i=new pq(t);this.Njt.push(new yq(t.Rg,t,this.Ejt,i,this))}i.length>0&&this.Ejt.Vb();const e=t.map((t=>t.Rg));this.Ijt.ojt(e)}UW(t){var i;const e=(null==(i=this.PB)?void 0:i.UW(t))||!1;return e&&(this.qd(),this.Ejt.Vb()),e}bjt(t){for(const t of this.Njt)if(t.Rg!==Vt.Ru||t.kCt)throw new g("Invalid state");const i=new pq(t),e=new yq(Vt.Ru,t,this.Ejt,i,this);this.Njt=[e]}get yCt(){const t=this.Ejt.yCt;if(t)return t;if(this.Njt.length>0){const t=this.Njt[0].ECt.yCt;if(t&&this.Njt.every((i=>i.ECt.yCt===t)))return t}}Lht(){for(const t of this.Njt)t.ECt.NCt()}get Ljt(){if(0===this.Njt.length)return Ai.SB();const t=Kq(this.Ejt.EOt.concat(this.Ejt.LOt),rs(this.Njt,(t=>t.ECt.tst))).nB();let i=new Ai([0,1/0]);for(const t of this.Njt)i=i.Sn(t.ECt.wf);for(const t of this.Njt)i=i.dB(t.bCt);return i=i.cB(t),i.uB(Jq)}get kjt(){if(0===this.Njt.length)return Ai.SB();const t=Kq(this.Ejt.LOt,rs(this.Njt,(t=>t.ECt.tst))).nB();let i=new Ai([0,1/0]);for(const t of this.Njt)i=i.Sn(t.ECt.wf);return i=i.cB(t),i}Lut(t){const i=this.Ljt.lA(t,Jq);return i?i.jn(i.U-1):t}Wxt(t){return!!this.Ljt.lA(t,Jq)||this.Djt.Wxt(t)}Cjt(t){return this.kjt.gr(t,Jq)}xjt(t,i,e){for(const t of this.Njt){const e=t.ECt,s=e.Cgt;if(void 0!==s&&i>=s&&!e.wf.nB().gr(s))return!0}return i-t<e}qd(){this.Ojt(),this.jjt()}Ojt(){this.Djt.qd()}jjt(){this.Ijt.qd(),this.Tjt.forEach((t=>t.qd()))}Ud(){this.qd(),this.Djt.Ud()}constructor(t,i,e,s){this.Djt=t,this.Ejt=i,this.Ijt=e,this.PB=s,this.Njt=[]}};var tX=class extends wn{constructor(){super(tu.dIt)}},iX=class extends wn{constructor(){super(tu.cIt)}},eX="LazyMediaBuffer",sX=class extends xd{get qz(){return this.sx}get e$(){return this.X0}get wd(){if(!this.Kst)throw new $i(Ui.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.Kst.wd}get NW(){return this.OW}set NW(t){this.OW=t,this.Kst&&(this.Kst.NW=t)}Cq(){return this.Kst?this.Kst.Cq():this.zjt}get wf(){return this.Kst?this.Kst.wf:Ai.SB()}get n$(){return this.Kst?this.Kst.n$:this.r$.Rq}get EW(){return this.PW}set EW(t){this.PW=t,this.Kst&&(this.Kst.EW=t)}o$(t,i){Wr.aSt(eX,"Marking gap from "+t+" to "+i+"."),this.r$.Qq(t,i),this.Kst&&this.Kst.o$(t,i)}a$(t,i){Wr.aSt(eX,"Removing gap from "+t+" to "+i+"."),this.r$.Fq(t,i),this.Kst&&this.Kst.a$(t,i)}Pjt(t){this.Kst=t,this.Kst.EW=this.PW,this.Kst.NW=this.OW;const i=this.r$.Rq;for(let t=0;t<i.U;t++)this.Kst.o$(i.Cn(t),i.jn(t));var e;this.zjt&&(Wr.aSt(eX,"End of stream"),null==(e=this.Kst)||e.t$());this.Kst.yn(Z.hq,this.Ds),this.Bjt.Wb(t)}Rjt(t){return Nr(this.Bjt.Zb,t)}async _J(t,i,e){const s=await this.Rjt(e);await s._J(t,i,e)}async u$(){const t=await this.Rjt();await t.u$()}async AJ(t,i,e){const s=await this.Rjt(e);await s.AJ(t,i,e)}async ET(t,i,e){const s=await this.Rjt(e);await s.ET(t,i,e)}async kJ(t,i){const e=await this.Rjt();await e.kJ(t,i)}t$(){this.zjt=!0,this.Kst&&this.Kst.t$()}gq(t){return!!this.Kst&&this.Kst.gq(t)}async Aq(t){const i=await this.Rjt();await i.Aq(t)}async gn(){var t;this.Vo(),null==(t=this.Kst)||t.fn(Z.hq,this.Ds)}constructor(t,i){super(),this.X0=t,this.Ujt=i,this.sx=void 0,this.Kst=void 0,this.Bjt=new Rs,this.OW=20,this.zjt=!1,this.PW=30,this.r$=new BL}},nX="LazyMediaSource",rX=class{get wd(){return{Rg:ai.Hx,r0:[],Xz:[]}}get rt(){throw new g("Not implemented")}get V$(){return this.Qjt}get W$(){return this.Fjt}get wf(){return this.Fz?this.Fz.wf:Ai.SB()}get ct(){return this.Fz?this.Fz.ct:this.VL}get Cq(){return!!this.Fz&&this.Fz.Cq}get t_(){return this.Fz?this.Fz.t_:new Ai([0,1/0])}t0(t){this.VL=t,this.Fz&&this.Fz.t0(t)}t$(){this.i9=!0,this.Fz&&this.Fz.t$()}GJ(){this.i9=!1,this.Fz&&this.Fz.GJ()}n0(t,i,e,s){this.Yjt=t,this.Gjt=i,this.Vjt=Boolean(e),this.Wjt=Boolean(s),this.Fz&&this.Fz.n0(t,i,e,s)}gq(t){return!this.Fz||this.Fz.gq(t)}async Aq(t){if(!this.gq(t))throw new g("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.Fz)await this.Fz.Aq(t);else{var i,e;this.sA.i5();const s=await this.sA.$n(t);S(this.VL)||s.t0(this.VL),this.i9&&s.t$(),s.n0(this.Yjt,this.Gjt,this.Vjt,this.Wjt),Wr.aSt(nX,"The MediaSource has been loaded."),this.Hjt=!0,this.Fz=s,null==(i=this.Qjt)||i.Pjt(this.Fz.V$),null==(e=this.Fjt)||e.Pjt(this.Fz.W$),this.qjt.Wb(s),this.sA.e5()}}async Ud(){this.Fz&&await this.Fz.Ud()}constructor(t,i,e){this.sA=t,this.Qjt=void 0,this.Fjt=void 0,this.qjt=new Rs,this.Fz=void 0,this.Hjt=!1,this.VL=NaN,this.i9=!1,this.Yjt=0,this.Gjt=1/0,this.Vjt=!1,this.Wjt=!1,i&&(Wr.aSt(nX,"Created lazy media buffer for audio."),this.Qjt=new sX(Vt.ym,this)),e&&(Wr.aSt(nX,"Created lazy media buffer for video."),this.Fjt=new sX(Vt.pm,this))}};function hX(t,i){return void 0===i&&(i=!1),function(e,s){void 0===s&&(s="*");let n=aX(e,"tag");const r=aX(null==s?"*":s,"range"),h=[];let o,a,u,c=-1;for(;++c<r.length;)if(o=r[c].toLowerCase(),i||"*"!==o){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),o)){if(!i)return n[a];h.push(n[a])}else u.push(n[a]);n=u}return i?h:void 0}}hX(((t,i)=>"*"===i||t===i||is(t,i+"-")),!0),hX(((t,i)=>{const e=t.split("-"),s=i.split("-");let n=0,r=0;if("*"!==s[r]&&e[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!e[n])return!1;if(e[n]!==s[r]){if(1===e[n].length)return!1;n++}else n++,r++}else r++;return!0}),!0);var oX=hX(((t,i)=>{let e,s=i;for(;;){if("*"===s||t===s)return!0;if(e=s.lastIndexOf("-"),e<0)return!1;"-"===s.charAt(e-2)&&(e-=2),s=s.slice(0,e)}}));function aX(t,i){const e=t&&"string"==typeof t?[t]:t;if(!e||"object"!=typeof e||!("length"in e))throw new g("Invalid "+i+" `"+e+"`, expected non-empty string");return e}var uX,cX=16384,lX=71,dX=188,fX=2,_X=3;function gX(t){return wX(t)?1:function(t){return function(t){if(t.length<fX*dX)return-1;const i=t.length<_X*dX?fX:_X,e=_.min(1e3,t.length-i*dX);for(let s=0;s<=e;s++){let e=!0;for(let n=0;n<i;n++)if(t[s+n*dX]!==lX){e=!1;break}if(e)return s}return-1}(t)>=0}(t)?2:function(t){return null!==ox(ha(t),new L)}(t)?3:0}function wX(t){const i=tl(t,0,_.min(t.length,cX));return Lr.gp(ha(i))}!function(t){t[t.rT=0]="rT",t[t.OA=1]="OA",t[t.Xjt=2]="Xjt",t[t.Zjt=3]="Zjt"}(uX||(uX={}));var oh=class{get Rg(){return this.X0}get wf(){return this.Kst.wf}get n$(){return this.Kst.n$}Kjt(t){return this.Kst===t}async AJ(t,i){if(this.Kst.wd.qz!==t.Mjt.mst){const e={qz:t.Mjt.mst};this.Kst.gq(e)&&(await this.Kst.Aq(e),Bo(i))}await this.Kst.AJ(t.zm,{GK:t.CIt.Mg},i),void 0!==this.Jjt&&this.X0===Vt.pm&&wX(t.zm.zm)&&this.Jjt.unt(t.zm.zm)}async _J(t,i){Bo(i),Wr.qp("HlsMediaBuffer","Got media data, appending to "+this.X0+" MediaBuffer: "+Jo(t.QCt.cvt));const e=t.WOt,s=t.HOt,n={n9:t.GT,ct:t.ct,UD:t.UD,GK:t.CIt.Mg};void 0!==t.zm&&(await this.Kst._J(t.zm,n,i),this.$jt(t.zm,t)),this.tzt(e,s)}$jt(t,i){var e;if(!wX(t.zm))return;const s=i.GT,n=s+i.ct,r=i.UD;if(null==(e=this.zgt)||e.yut(t.zm,s,r),void 0!==this.Jjt&&this.X0===Vt.pm){const e=i.QCt.Rbt;this.Jjt.yut(t.zm,s,n,r,i.CIt,e)}const h=[];void 0!==this.zgt&&h.push(this.zgt),void 0!==this.Jjt&&h.push(this.Jjt),Uv(this.wf,h)}tzt(t,i){const e=this.Kst.wf,s=new Ai([t,i]).dB(e);for(let t=0;t<s.U;t++)this.Kst.o$(s.Cn(t),s.jn(t));for(let t=0;t<e.U;t++)this.Kst.a$(e.Cn(t),e.jn(t))}o$(t,i){this.Kst.o$(t,i)}a$(t,i){this.Kst.a$(t,i)}constructor(t,i,e,s){this.X0=t,this.Kst=i,this.zgt=e,this.Jjt=s}};function AX(t){if(t.Rg!==Ri.TEt||void 0===t.yIt)return;const i=t.yIt.match(/^CC([1-4])$/);if(i)return Number(i[1]);const e=t.yIt.match(/^SERVICE([\d+])$/);return e?Number(e[1]):void 0}var vX=class{nEt(t){var i,e,s;return null==(s=null==(e=this.Fz)||null==(i=e.W$)?void 0:i.gq(t))||s}rEt(t){var i,e,s;return null==(s=null==(e=this.Fz)||null==(i=e.V$)?void 0:i.gq(t))||s}constructor(t){this.Fz=t}},Kr="LLHLSPlayer",mX=[he.jw,he.zw,he.Pw,he.H_],pX=[l.ww,l.Wg,l.ew,l.$g],yX=2e3,MX=class extends xd{get cA(){var t;const i=[this.izt,this.ezt].filter(Yt);if(0===i.length||this.ct!==1/0)return;const e=null==(t=this.vf)?void 0:t.getTime();if(e){return(Date.now()-e)/1e3}let s;for(const t of i){const i=t.wIt.t_;if(0===i.U)continue;const e=i.jn(i.U-1)+t.wIt.wyt,n=t.wIt.xLt,r=e+(null!=n?n:0)-this.Mf;(!s||s<r)&&(s=r)}return s}szt(){if(void 0===this.nzt)return!1;const t=i.Kd();if(!this.nzt.Djt.IOt(t))return!1;const e=this.nzt.Djt.MOt();if(void 0===e||void 0===e.mot.ct)return!1;const s=this.Mf,n=this.Gf,r=this.nzt.Ljt.lA(s);if((void 0!==r?r.jn(0)-s:0)>=2*e.mot.ct*n)return!1;if(e.TOt>0&&0===e.NOt)return e.DOt>1e3*e.mot.ct*.8;return 8*e.NOt/this.PB._W.wz>=1.8*e.mot.ct}async rzt(){var t;const i=await this.aEt();if(void 0===i)return;const e=null==(t=this.nzt)?void 0:t.Djt.MOt();if(void 0===e)return;const s=this.hzt;if(e.NOt>0){if(_.max(0,e.NOt-e.TOt)<=e.NOt*(i.wz/s.wz))return}const n=i.wz<s.wz;await this.BIt(i,{RIt:n})}ozt(t){return $o(t,(t=>t.wz))}async azt(){let t=await this.uzt();if(0===t.length)return;const i=await this.czt(t);i.length>0&&(t=i);const e=this.ozt(t);void 0!==e&&(await this.BIt(e,{RIt:!0}),this.Wz.tEt(e.wz))}get lzt(){const t=[this.ezt,this.izt].filter(Yt);for(const i of t){if(!i.wIt.Abt)return!1;const t=i.wIt.tst,e=t[t.length-1];if(e&&e.gbt!==this.dzt)return!1}return!0}get xIt(){return this.hzt}get HIt(){return this.ezt}get XIt(){return this.izt}get fzt(){return this._zt}get ht(){return this.dT}get wf(){return this.sA.wf.ks()}get zIt(){const t=[];if(this.hzt){const i=this.sA.Mf;for(const e of this.gzt)for(const s of e.Tjt){const e=s.PCt(i);e&&!gd(t,e)&&t.push(e)}}return t}get vf(){if(this.hzt){const t=this.sA.Mf;return this.hzt.kbt(t)}}set vf(t){if(!t||!this.hzt)return;const i=this.hzt.Cbt(t);void 0!==i&&this.Sm(i,!1,!0)}get bt(){return this.wzt}get Mf(){var t;return null!=(t=this.Azt)?t:this.sA.Mf}set Mf(t){this.Sm(t,t===1/0,!0)}Sm(t,e,s){var n;void 0===e&&(e=!1),void 0===s&&(s=!1),Wr.qp(Kr,"Seeking to "+t+" s."),this.Azt=t,this.vzt=e,this.mzt=!0,this.BTt=!0,null==(n=this.Oz)||n.y_(),this.Co(new Eh(t)),this.V2.qd(),this.pzt&&(i.Jd(this.yzt),s?this.yzt=i.$d((()=>this.Mzt(t,e)),50):this.Mzt(t,e))}Mzt(t,e){i.Jd(this.yzt);const s=[this.Xgt,this.Tzt,this.W2].filter(Yt);this.V2=new na,this.W2=this.H2(s,t,e,this.V2.Wd).catch(this.Nzt)}get ct(){var t,i,e,s,n,r,h;if(!this.lzt)return null!=(h=null!=(r=null!=(n=null==(t=this.ezt)?void 0:t.wIt.ct)?n:null==(i=this.izt)?void 0:i.wIt.ct)?r:null==(s=this.FTt)||null==(e=s.Xkt)?void 0:e.wIt.ct)?h:[this.ezt,this.izt].filter(Yt).every((t=>function(t){if(void 0===t)return!1;return t.wIt.tst.length>0&&!t.wIt.Abt}(t)))?1/0:NaN;const o=this.sA.ct;if(S(o)){var a,u;const t=null==(u=this.FTt)||null==(a=u.Xkt)?void 0:a.wIt.ct;if(void 0!==t)return t}return o}get If(){if(!this.lzt)return!1;if(this.e_&&this.pzt){var t,i;const e=this.Mf,s=null==(t=this.ezt)?void 0:t.wIt.ct,n=null==(i=this.izt)?void 0:i.wIt.ct;return!(void 0!==s&&e<s)&&!(void 0!==n&&e<n)}return this.sA.If}get lt(){return this.Bz}get bf(){return this.Rz}get kf(){}get xf(){return!1}get jf(){return Tt({},{wT:0,AT:0,vT:0,mT:0,pT:0,yT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.sA.zf(),{pT:this.cTt,mT:this.PB._W.wz})}get Tr(){var t;return null==(t=this.FTt)?void 0:t.Tr}get Pf(){return this.sA.Pf}set Pf(t){this.sA.Pf=t}get Uf(){return this.uyt}set Uf(t){this.uyt!==t&&(this.uyt=t,this.Co(t?new AV:new vV))}get Ff(){return this.sA.Ff}get Gf(){return this.sA.Gf}set Gf(t){Wr.qp(Kr,"Setting playback rate to "+t+"."),this.sA.Gf=t}get Hf(){return this.gTt.ks()}get gTt(){return this.sA.Hf}get Xf(){return this.Qz}set Xf(t){this.Qz!==t&&(this.Qz=t,this.Dzt())}get Jf(){let t=this.sA.Jf;return this.vTt&&(t=_.max(ae.Xn,t)),t}get t_(){return this.aTt.ks()}get aTt(){let t=this.s0;const i=[this.ezt,this.izt].filter(Yt);if(t.U>0&&i.some((t=>!t.wIt.Abt))){const e=this.gTt,s=t.jn(t.U-1);if(e.U>0&&e.jn(e.U-1)>s){let n=e.jn(e.U-1);const r=function(t){return t.reduce(((t,i)=>t.Sn(i.wIt.vLt)),new Ai([0,1/0]))}(i);r.U>0&&(n=_.min(n,r.jn(r.U-1))),t=t.cB(new Ai([s,n]))}}return t}qLt(){let t=function(t){if(0===t.length)return Ai.SB();let i=new Ai([0,1/0]),e=0;for(const s of t){const t=s.wIt.t_;t.U>0&&(i=i.Sn(t),e=_.max(e,t.Cn(0)))}if(i.U>0)return i;return Ai.DB(e)}([this.ezt,this.izt].filter(Yt));0!==t.U&&(this.Fz&&this.lzt&&this.Fz.ct!==1/0&&(t=new Ai([t.Cn(0),this.Fz.ct])),this.s0=t,this.Izt&&this.zgt.OI(t.Cn(0)),this.Szt&&this.Jjt.OI(t.Cn(0)))}get e_(){var t;return null!=(t=this.mzt)?t:this.sA.e_}get Yz(){}get nt(){return this.Dl}get rt(){return this._T}get r_(){var t,i;return this.sA.r_||(null==(i=this.hzt)||null==(t=i.eSt)?void 0:t.Ti)||0}get a_(){var t,i;return this.sA.a_||(null==(i=this.hzt)||null==(t=i.eSt)?void 0:t.ji)||0}get c_(){return this.sA.c_}set c_(t){Wr.qp(Kr,"Setting volume to "+t+"."),this.sA.c_=t}get f_(){return this.BB}get g_(){return!1}set g_(t){}get Vz(){return this.Wz}M_(){return!1}w_(){return this.sA.ya}be(){Wr.qp(Kr,"Hiding the player."),this.sA.be()}m_(){var t;Wr.qp(Kr,"Pausing the player."),this.sA.m_(),(null==(t=this.Oz)?void 0:t.Ww)&&this.Oz.m_()}async p_(){this.L2=!0;const t=this.sA.p_();if(this.If){const t=this.aTt;t.U>0&&this.Sm(t.Cn(0))}this.pzt||await this.Dzt(),this.BMt(),await t,this.ANt()}BMt(){var t;if(!this.oTt())if(null==(t=this.xIt)?void 0:t.wIt.Abt){var i;let t=!0,e=0;const s=null==(i=this.hzt)?void 0:i.wIt.Cn;if(!this.BTt&&s&&(t=!s.rbt,e=s.nbt,e<0)){const t=this.xIt.wIt.vLt;e+=t.jn(t.U-1)}this.Mzt(e,t)}else this.Mzt(1/0,!0);this.Ezt()&&this.Mzt(1/0,!0)}oTt(){var t;const i=this.aTt;if(0===i.U)return!0;const e=null==(t=this.bzt)?void 0:t.fB(this.Mf);return(e&&e>0?this.bzt.jn(e):this.Mf)>=i.Cn(0)}get bzt(){var t,i;const e=null==(t=this.Lzt)?void 0:t.Ljt,s=null==(i=this.nzt)?void 0:i.Ljt;return e?s?s.Sn(e):e:s}Ezt(){return LX(this.Mf,this.ezt)||LX(this.Mf,this.izt)}pNt(){this.Bz=void 0,this.Rz=void 0}IP(t){this.Bz||(D(this.tr()),this.Bz=Ki(t),this.Rz=t,this.Co(new Dr(t)))}ge(){Wr.qp(Kr,"Showing the player."),this.sA.ge()}T_(){throw new g("Not implemented")}N_(){throw new g("Not implemented")}D_(){}I_(){this.pzt&&D(this.kzt(this.ezt,this.izt,this._zt,{I_:!0}))}async ga(t,e,s){var n,r;if(Wr.qp(Kr,"Setting the player source to "+t.src+"."),this.pNt(),this.wzt&&!ew(this.wzt)&&(await this.tr(),Bo(s)),!t.src||ew(t))return;this.$z.mz(t.contentProtection),this.wzt=t,this.Czt=t.seamlessSwitchStrategy,this.Szt=!gd(t.ignoreEmbeddedTextTrackTypes,Kc.CEA608),this.Izt=!gd(t.ignoreEmbeddedTextTrackTypes,Kc.EMSG),this.yn(tu._It,this.handleBufferingErrorEvent);const h=null!=(r=null==(n=t.latencyConfiguration)?void 0:n.targetOffset)?r:t.liveOffset;if(this.FTt=new dq(this.NS,this.pot,t.useCredentials,i.IA(t.src),h),this.FTt.yn(io.Qkt,this.pCt),this.FTt.yn(io.Fkt,this.xzt),this.FTt.yn(l.cw,this.Ds),this.FTt.yn(l.lw,this.Ds),t.hlsDateRange&&(this.Ozt=new vq(this.FTt,this.sA),this.Dl.Dz(this.Ozt.nt)),null!=this.jzt||(this.jzt=this.zzt.h9()),e.textTracks&&this.tP(e.textTracks),t.latencyConfiguration){const i=t.latencyConfiguration;this.Oz=new La(this,this.sA,i),this.Oz.Rt=!0,this.f_.ka(this.Oz)}Se(this.Dl),this.Dzt()}Dzt(){return this.Xgt=this.Pzt(this.Xgt,this.ES.Wd).catch(this.Cwt),this.Xgt}async Pzt(t,i){if(t&&(await t,Bo(i)),!this.FTt)return;const e=this.Qz;e===wo.iT||this.L2?await this.mit(i):e===wo.Nm&&await this.Bzt(i)}async Bzt(t){if(void 0===this.FTt||this.vTt)return;if(!this.FTt.Vkt){try{await this.FTt.Kkt(t)}catch(t){throw Ao(t),this.Uf=!1,new $i(Ui.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.Rzt.Vnt()}const i=await this.Uzt();this.Qzt(i);const e=this.Fzt(i.dSt),s=this.Yzt(i.fSt),n=this.Gzt(i.bbt);if(!n){const t=DX(i.Lbt);t&&(Wr.qp(Kr,"Detected initial closed caption rendition."),this.Vzt(i,t))}await this.kzt(e,s,n,{Wzt:!0}),this.vTt=!0,this.QNt.WNt(),this.Hzt()}Hzt(){const t=[this.ezt,this.izt].filter(Yt);if(t.some((t=>t.wIt.Abt)))return;if(this.Oz)return;const i=_.max(...t.map((t=>{var i;return null!=(i=t.wIt.wyt)?i:0}))),e={minimumOffset:.66*i,maximumOffset:2*i,targetOffset:1*i,forceSeekOffset:3*i,minimumPlaybackRate:of,maximumPlaybackRate:Da};this.Oz=new La(this,this.sA,e),this.BB.ka(this.Oz)}async Uzt(){if(this.qzt=this.FTt.Tr.lSt,!this.qzt.length)throw new $i(Ui.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.Xzt(this.qzt);if(0===t.length)throw new $i(Ui.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const i=await this.czt(t);return i.length>0&&(t=i),Wr.qp(Kr,"Selecting initial active variant stream."),function(t,i,e,s){void 0===s&&(s=lw.maximumBackoff);const n=function(t,i){if(void 0===i)return t;const e=i.preferredVideoCodecs,s=i.preferredAudioCodecs;if(void 0!==e){let i;for(const n of e){const e=t.filter((t=>t.mst&&t.mst.$It&&Bt(t.mst.$It,n)));if(0===e.length)continue;if(void 0===s)return e;void 0===i&&(i=e);const r=IX(e,s);if(void 0!==r)return r}if(void 0!==i)return i}if(void 0!==s){const i=IX(t,s);if(void 0!==i)return i}return t}(t,i),r=EX(n,s);switch(e.IW.type){case fa.BANDWIDTH:{const t=e.kW,i=r.filter((i=>i.wz<=t));if(i.length>0)return vd(i,(t=>t.wz))}case fa.PERFORMANCE:return $o(r,(t=>t.wz));case fa.QUALITY:return vd(r,(t=>t.wz))}}(t,this.wzt.abr,this.PB,this.Rut.maximumBackoff)}Fzt(t){if(this.Zzt){const t=this.Kzt(this.Zzt);if(t)return t}return SX(t)}Yzt(t){if(this.Jzt){const t=this.Kzt(this.Jzt);if(t)return t}return SX(t)}Gzt(t){for(const t of this.Dl.og)t.jg===Ha.Jn&&(this.$zt=this.tPt(t));if(this.$zt){const t=this.Kzt(this.$zt);if(t)return t}return DX(t)}tPt(t){return Po(this.hzt.bbt,(i=>t===this.iPt.get(i.Mg)))}async mit(t){this.pzt||(await this.Bzt(t),this.pzt=!0,await this.kzt(this.ezt,this.izt,this._zt,{Wzt:!0}))}tP(t){for(const i of t)i.src&&this.nP.pS(i)}Vzt(t,i){if(!this.Szt)return;const e=function(t){const i=[];for(const e of t){const t=AX(e);void 0!==t&&i.push({B6:t,R6:e.gs||"",kh:e.l})}return i}(t.Lbt);for(const t of e)this.Jjt.ngt(t);if(void 0!==i){const t=AX(i);this.Jjt.egt(t).jg=Ha.Jn}}get gzt(){return[this.Lzt,this.nzt,this.ePt].filter(Yt)}PIt(t){for(const i of t)if(!this.sPt(i))throw new g("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.qzt=t}sPt(t){const i=this.Tr;return!!i&&gd(i.lSt,t)}Kzt(t){if(t&&this.hzt)return Po(this.hzt.vSt,(i=>i===t))}Qzt(t){var i;if(Wr.qp(Kr,"Setting active variant stream."),this.hzt===t)return;const e=(null==(i=this.hzt)?void 0:i.LEt)!==(null==t?void 0:t.LEt);if(this.hzt&&e)for(const t of this.hzt.bbt)this.bS(t);if(this.hzt=t,this.Co(new tX),this.kTt(),t&&e)for(const i of t.bbt)this.nPt(i)}nPt(t){const i=this.sA.yS(Mi.Mm,void 0,t.l,t.gs,t.AIt,void 0,void 0,t.TIt.map(LW).filter(Yt));i.yn(qo.ra,this.onTextTrackChange),this.iPt.set(t.Mg,i),this.rPt.tt(i)}bS(t){const i=this.iPt.get(t.Mg);i&&(i.fn(qo.ra,this.onTextTrackChange),this.rPt.it(i),this.iPt.delete(t.Mg),this.sA.bS(i))}async uzt(){var t;const i=null!=(t=this.qzt)?t:this.Tr.lSt;if(0===i.length&&!this.qzt)return Wr.qp(Kr,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===i.length&&!this.qzt)return Wr.qp(Kr,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const e=await this.Xzt(i);if(0===e.length)return Wr.uSt(Kr,"LLHLSPlayer - No variant streams with supported codecs available to perform ABR selection on."),[];const s=EX(e,this.Rut.maximumBackoff);return 0===s.length?(this.hPt||(Wr.uSt(Kr,"LLHLSPlayer - No variant streams with online renditions available to perform ABR selection on."),this.oPt++,await this.aPt(e)),[]):s}async uPt(){const t=await this.aEt();if(void 0===t)return;const i=!!this.hzt&&t.wz<this.hzt.wz;await this.BIt(t,{RIt:i})}async aEt(){var t,i;const e=await this.uzt();if(0===e.length)return;const s=function(t){const i=t.Mf,e=t.wf.lA(i);return e?e.jn(0)-i:0}(this.sA),n=await this.czt(e),r={ji:this.sA.ji,Ti:this.sA.Ti,sEt:s,cut:null==(i=this.wzt)||null==(t=i.abr)?void 0:t.restrictToPlayerSize},h=await this.cPt.aEt(e,this.hzt,n,r,new vX(this.Fz));return!!this.hzt&&h.wz<this.hzt.wz||this.lPt(h,s)?h:void 0}lPt(t,e){var s;if(t===this.xIt)return!1;const n=this.xIt&&bX(this.xIt,this.Rut.maximumBackoff),r=bX(t,this.Rut.maximumBackoff);if(!n&&r)return!0;(!this.dPt||this.dPt.OIt.wz>t.wz)&&(this.dPt={OIt:t,wlt:i.Kd()});const h=i.Kd()-this.dPt.wlt;var o;const a=null!=(o=null==(s=this.XIt)?void 0:s.wIt.eEt)?o:1/0;return e>=_.max(a-1,5)||h>1e3}async aPt(t){this.hPt=!0;let i=!1;for(const e of t)try{const t=this.izt?Po(e.fSt,(t=>cu(t,this.izt))):void 0;if(void 0===t)continue;await this.rCt(t),t.wIt.zLt=-1/0,i=!0}catch(t){}if(i)this.oPt=0,await this.fPt();else{if(this.oPt>=this.Rut.maxRetries)return void this.IP(new $i(Ui.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=_.min(this.Rut.minimumBackoff*2**(this.oPt-1),this.Rut.maximumBackoff);await lt(t)}this.hPt=!1,await this.uPt()}async Xzt(t){let i=await yd(t,(async t=>{var i,e,s;const n=[(null==(i=t.mst)?void 0:i.JIt)?'audio/mp4; codecs="'+t.mst.JIt+'"':void 0,(null==(e=t.mst)?void 0:e.$It)?'video/mp4; codecs="'+t.mst.$It+'"':void 0].filter(Yt);return 0===n.length||await this._Pt.jq(n,null==(s=this.wzt)?void 0:s.useManagedMediaSource)}));return i.some((t=>{var i;return null==(i=t.mst)?void 0:i.$It}))&&(i=i.filter((t=>!t.mst||t.mst.$It||0!==t.fSt.length))),i.some((t=>{var i;return null==(i=t.mst)?void 0:i.JIt}))&&(i=i.filter((t=>!t.mst||t.mst.JIt||0!==t.dSt.length))),i}czt(t){return this.FTt.Hkt?yd(t,(t=>async function(t,i){for(const e of t)if(!await i(e))return!1;return!0}([SX(t.dSt),SX(t.fSt),DX(t.bbt),DX(t.Lbt)].filter(Yt),(t=>this.gPt(t))))):Promise.resolve([])}async gPt(t){if(0===t.wIt.tst.length)return!1;const i=t.wIt.tst[0];if(!i.cvt)return!1;const e=i.cvt,s=e.Umt?$W(e.Umt.Cn,e.Umt.U):void 0;try{return await this.pot.jet(e.jM,s)}catch(t){return!1}}async BIt(t,i){if(!this.pzt)throw new g("LLHLSPlayer - The LLHLSPlayer is not loaded.");if(!t)throw new g("LLHLSPlayer - Cannot explicitly set the active variant stream to undefined.");if(!this.sPt(t))throw new g("LLHLSPlayer - Trying to set an active variant stream that does not exists on the internal model.");if(t===this.hzt)return void Wr.qp(Kr,"Trying to set the already active variant stream, ignoring.");const e=this.ezt?Po(t.dSt,(t=>cu(t,this.ezt))):void 0,s=this.izt?Po(t.fSt,(t=>cu(t,this.izt))):void 0,n=this._zt?Po(t.bbt,(t=>cu(t,this._zt))):void 0;this.Qzt(t),this.dPt=void 0,await this.kzt(e,s,n,i)}async qIt(t){if(!this.hzt)return void(this.Zzt=t);const i=this.Kzt(t);if(t&&!i)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active audio rendition.");this.HIt!==i&&(Wr.qp(Kr,"Switching audio rendition"),await this.kzt(i,this.izt,this._zt,{QIt:!0}))}async ZIt(t){if(!this.hzt)return void(this.Jzt=t);const i=this.Kzt(t);if(t&&!i)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active video rendition.");this.XIt!==i&&(Wr.qp(Kr,"Switching video rendition"),await this.kzt(this.ezt,i,this._zt,{UIt:!0}))}async wPt(t){if(!t)throw new g("LLHLSPlayer - Cannot explicitly set the active subtitle rendition to undefined.");if(!this.vTt)return void(this.$zt=t);const i=this.Kzt(t);if(!i)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active subtitle rendition.");Wr.qp(Kr,"Switching subtitle rendition"),await this.kzt(this.ezt,this.izt,i)}async APt(t,i){if(this.hPt)return;const e=0===this.rt.U;t.Rg===Ri.pm||t.Rg===Ri.ym&&e?this.qzt&&this.qzt.length<=1?(t.Rg===Ri.pm&&this.izt!==t?await this.kzt(this.ezt,t,this._zt):t.Rg===Ri.ym&&e&&this.ezt!==t&&await this.kzt(t,this.izt,this._zt),await this.vPt(t,i)):await this.uPt():await this.vPt(t,i)}async rCt(t,i){try{await this.FTt.rCt(t,i)}catch(e){throw Ao(e),(Vu(e)||As(e))&&await this.APt(t,i),e}}async vPt(t,i){if(!gd(this.mPt,t)){this.mPt.push(t);try{const e=t.Rg===Ri.Mm||t.Rg===Ri.TEt?1/0:this.Rut.maxRetries;await mu((()=>this.retryOfflineRenditionsCallback(t,i)),i,e,this.Rut.minimumBackoff,this.Rut.maximumBackoff)}catch(t){this.IP(new $i(Ui.MEDIA_LOAD_ERROR,t.message,t))}finally{To(this.mPt,t),t.wIt.zLt===-1/0&&await this.fPt()}}}kzt(t,i,e,s){void 0===s&&(s={});const n={RIt:s.RIt||!1,QIt:s.QIt||!1,UIt:s.UIt||!1,I_:s.I_||!1,Wzt:s.Wzt||!1};return n.Wzt||n.I_||this.ezt!==t||this.izt!==i||this._zt!==e?void 0===t&&void 0===i?Promise.reject(new g("Trying to buffer no media renditions.")):(this.ezt=t,this.izt=i,this._zt=e,this.qLt(),this.Co(new iX),this.V2.qd(),this.V2=new na,this.pPt.qd(),this.pPt=new na,this.Tzt=this.yPt([this.Tzt,this.W2].filter(Yt),t,i,e,n,this.pPt.Wd).catch(this.Nzt),this.Tzt):Promise.resolve()}async MPt(t,i,e,s){var n,r;const h=[];if(h.push(this.TPt(i,s)),mW(t,i)||h.push(this.TPt(t,s)),null==(r=this.wzt)||null==(n=r.hls)?void 0:n.delaySubtitlePreload)return Promise.all(h).then((()=>this.TPt(e,s)));const o=this.TPt(e,s);return Promise.all([...h,o])}async TPt(t,i){if(t)try{await this.FTt.rCt(t,i)}catch(e){Ao(e),(Vu(e)||As(e))&&await this.NPt(t,i)}}async NPt(t,i){if(this.hPt)return;const e=0===this.rt.U;if(t.Rg===Ri.pm||t.Rg===Ri.ym&&e)if(this.qzt&&this.qzt.length<=1)await this.vPt(t,i);else{const t=await this.Uzt();this.Qzt(t);const i=this.Fzt(t.dSt),e=this.Yzt(t.fSt),s=this.Gzt(t.bbt);await this.kzt(i,e,s)}else await this.vPt(t,i)}async yPt(t,i,e,s,n,r){var h;if(!this.pzt)return void await this.MPt(i,e,s,r);await Promise.all(t.map((t=>t.catch(qt)))),this.DPt(),await this.IPt(r),await this.SPt();const o=[];n.QIt&&this.Fz&&this.Fz.V$&&o.push(this.Fz.V$.ET(0,1/0)),n.UIt&&this.Fz&&this.Fz.W$&&o.push(this.Fz.W$.ET(0,1/0)),await Promise.all(o),Bo(r);const a=await this.EPt(i,e,n.I_,r);this.bPt(i,e,n.RIt||a),this.LPt(s,n.RIt),Bo(r);const u=[e,mW(i,e)?void 0:i,s].filter(Yt);try{await Promise.all(u.filter((t=>!t.wIt.bLt)).map((t=>{var i;return null==(i=this.FTt)?void 0:i.hCt(t,r)})))}catch(t){Ao(t)}if(Bo(r),this.e0(),this.qLt(),void 0!==this.Azt)this.Mzt(this.Azt,this.vzt);else if(!this.BTt&&(null==(h=this.hzt)?void 0:h.wIt.Cn)){const t=this.hzt.wIt,i=t.Cn;let e=i.nbt;if(i.nbt<0){const i=t.vLt;e+=i.jn(i.U-1)}this.Mzt(e,!i.rbt)}else!this.BTt&&u.every((t=>!t.wIt.Abt))?this.Mzt(1/0,!0):this.gzt.length>0&&this.kPt()}async EPt(t,i,e,s){var n,r;const h=void 0!==t&&t!==i,o=void 0!==i,a=await this.CPt(t,i,this.hzt);if(Bo(s),!e&&this.Fz&&!a)return!1;const u=void 0!==(null==(n=this.Fz)?void 0:n.V$),c=void 0!==(null==(r=this.Fz)?void 0:r.W$);if(!e&&!(h!==u||o!==c)&&a&&this.Fz&&this.Fz.gq(a))return await this.IPt(s),await this.Fz.Aq(a),!0;for(const t of this.gzt)t.Tjt.forEach((t=>t.qd()));this.sA.i5();try{this.Fz&&await this.sA.tr(),this.Fz=await this.xPt(a,h,o)}finally{this.sA.e5()}return!0}async CPt(t,i,e){var s,n;const r=e.mst,h=[];if(void 0!==t){var o,a;const i=null!=(a=null==(o=t.mst)?void 0:o.JIt)?a:null==r?void 0:r.JIt;if(!i)return;{const t='audio/mp4; codecs="'+i+'"';Wr.qp(Kr,"Configuring MediaSource for initial audio rendition with codec: "+t+"."),h.push(t)}}if(void 0!==i){var u,c;const t=null!=(c=null==(u=i.mst)?void 0:u.$It)?c:null==r?void 0:r.$It;if(!t)return;{const i='video/mp4; codecs="'+t+'"';Wr.qp(Kr,"Configuring MediaSource for initial video rendition with codec: "+i+"."),h.push(i)}}if(0===h.length)return void Wr.uSt(Kr,"No codecs found on the active variant stream.");var l;const d=null!=(l=null==i||null==(s=i.wIt.tst[0])?void 0:s.obt)?l:[];var f;const _=null!=(f=null==t||null==(n=t.wIt.tst[0])?void 0:n.obt)?f:[],g=this.FTt.Tr,w=await rH(this.wzt.contentProtection,h,g.Ikt.concat(_).concat(d),this.NS,this.wzt.useCredentials);return{Rg:ai.Hx,r0:h.map((t=>({qz:t}))),Xz:w,w0:this.wzt.useManagedMediaSource}}async xPt(t,i,e){let s;return s=t?await this.sA.$n(t):new rX(this.sA,i,e),this.Fz=s,this.e0(),this.SMt(),this.EMt(),s}e0(){const t=this.Fz;if(t&&S(t.ct)){var i,e,s;const n=null!=(s=null==(i=this.ezt)?void 0:i.wIt.ct)?s:null==(e=this.izt)?void 0:e.wIt.ct;void 0!==n&&n>0&&t.t0(n)}this.qLt()}SMt(){const t=this.Fz;t&&(t.W$&&(t.W$.NW=this.PB.jW),t.V$&&(t.V$.NW=this.PB.jW))}EMt(){const t=this.Fz;t&&(t.W$&&(t.W$.EW=this.PB.EW),t.V$&&(t.V$.EW=this.PB.EW))}bPt(t,i,e){if(!this.Fz)throw new g("Invalid state");this.Fz.V$?this.Z$&&this.Z$.Kjt(this.Fz.V$)||(this.Z$=new oh(Vt.ym,this.Fz.V$,this.Izt?this.zgt:void 0,this.Szt?this.Jjt:void 0)):this.Z$=void 0,this.Fz.W$?this.K$&&this.K$.Kjt(this.Fz.W$)||(this.K$=new oh(Vt.pm,this.Fz.W$,this.Izt?this.zgt:void 0,this.Szt?this.Jjt:void 0)):this.K$=void 0;const s=mW(t,i);if(this.K$&&i){const t=s&&this.Z$?[this.K$,this.Z$]:[this.K$];this.nzt?this.nzt.CIt!==i&&(e&&(this.nzt.qd(),this.nzt.Ejt.Vb()),this.nzt.Cxt(i)):(this.nzt=function(t,i,e,s,n,r,h,o,a,u){const c=s.Tr.tT,l=new Uq(c),d=new Pq(Vt.pm,t,s,l,n,r,h,u),f=i.map((t=>t.Rg)),_=o.tMt(l,s.Tr.tT,f),g=new $q(d,l,_,a);return g.Sjt(i),g}(i,t,this.sA,this.FTt,this.NS,this.pot,this.HCt,this.jzt,this.PB,this.wzt.useCredentials),this.nzt.Djt.yn(jr.Ext,this.OPt),this.nzt.Djt.yn(jr.bxt,this.jPt),this.nzt.Ijt.yn(Eu.ZOt,this.zPt),this.nzt.Ijt.yn(Eu.JOt,this.PPt),this.nzt.Ijt.yn(Eu.$Ot,this.BPt),this.nzt.Ijt.yn(Eu.KOt,this.RPt)),this.nzt.Sjt(t)}else{var n;null==(n=this.nzt)||n.Ud(),this.nzt=void 0}var r;this.Z$&&t&&!s?(this.Lzt?this.Lzt.CIt!==t&&(e&&(this.Lzt.qd(),this.Lzt.Ejt.Vb()),this.Lzt.Cxt(t)):(this.Lzt=function(t,i,e,s,n,r,h,o,a,u){const c=s.Tr.tT,l=new Uq(c),d=new Pq(Vt.ym,t,s,l,n,r,h,u),f=o.tMt(l,s.Tr.tT,[i.Rg]),_=new $q(d,l,f,a);return _.Sjt([i]),_}(t,this.Z$,this.sA,this.FTt,this.NS,this.pot,this.HCt,this.jzt,this.PB,this.wzt.useCredentials),this.Lzt.Djt.yn(jr.bxt,this.jPt),this.Lzt.Ijt.yn(Eu.ZOt,this.zPt),this.Lzt.Ijt.yn(Eu.KOt,this.RPt)),this.Lzt.Sjt([this.Z$])):(null==(r=this.Lzt)||r.Ud(),this.Lzt=void 0);this.UPt()}LPt(t,i){if(this.ePt){this.ePt.Djt.CIt===t?i&&(this.ePt.qd(),this.ePt.Ejt.Vb()):(this.ePt.Ud(),this.ePt=void 0)}if(!this.ePt&&t){const i=this.iPt.get(t.Mg);i.jg=Ha.Jn,this.ePt=function(t,i,e,s,n,r,h){const o=e.Tr.tT,a=new Yq(i,o),u=new Uq(o),c=new Pq(Vt.Ru,t,e,u,s,n,r,h),l=new Zq(u,o,Vt.Ru),d=new $q(c,u,l);return d.bjt(a),d}(t,i,this.FTt,this.NS,this.pot,this.HCt,this.wzt.useCredentials)}}UPt(){const t=[this.Z$,this.K$].filter(Yt).map((t=>t.Rg));this.FTt.Tr.tT.Nkt(t)}async H2(t,i,e,s){await Promise.all(t.map((t=>t.catch(qt)))),Bo(s),await this.SPt(),Bo(s),this.Azt=void 0,this.mzt=void 0,this.BTt=!0;const n=this.aTt.rB(i),r=this.sA.lf(l.pw,s);this.sA.Sm(n,e),this.pzt&&this.gzt.length>0&&(this.FTt.Tr.tT.Dkt(),this.QPt(this.sA.Mf),this.kPt()),await r,this.ANt()}ANt(){const t=this.cA;if(this.Ff||this.e_||void 0===t)return;const i=this.Mf;var e,s;t+this.Mf-this.f_.wd.maximumOffset<i?null==(e=this.Oz)||e.Cn():null==(s=this.Oz)||s.y_()}QPt(t){for(const i of this.gzt)i.Wxt(t)||(i.Ojt(),i.Ejt.ROt()),i.Cjt(t)||(i.jjt(),i.Ejt.UOt())}DPt(){for(const t of this.gzt)t.qd()}SPt(){return Promise.all([this.FPt(),this.YPt(),this.GPt()])}kPt(){this.VPt(),this.WPt(),this.HPt()}async fPt(){this.pzt&&this.gzt.length>0&&(this.gzt.forEach((t=>t.Ojt())),await this.FPt(),this.VPt(),this.gzt.forEach((t=>t.Djt.$xt())))}VPt(){if(this.qPt)return;const t=()=>{this.qPt=void 0};this.XPt=new na,this.qPt=this.ZPt(this.XPt.Wd).catch(this.Nzt).then(t,t)}async FPt(){var t;null==(t=this.XPt)||t.qd();const i=this.qPt;this.qPt=void 0,i&&await i}async ZPt(t){Bo(t);const i=this.gzt;for(;;){const e=[],s=this.sA.Mf;for(const t of i){const i=t.Djt,n=t.Lut(s);if(i.kCt)e.push(i.OCt());else if(t.xjt(s,n,this.PB.jW)){const s=i.Hxt(n);if(void 0===s){if(i.CIt.wIt.Abt)continue;const t=i.CIt.wIt.tst;t.length&&t[0].GT>n&&(this.Mf=1/0),i.eOt(),i.Zxt(n)}else{const[e,n]=s;i.Cht(e,n,t.yCt),t.Ijt.ujt(e,n)}e.push(i.OCt())}}await Na((t=>{if(0===e.length){i.every((t=>t.Djt.Vxt))||e.push(this.sA.lf(l.Sw,t));for(const s of i)e.push(s.Ijt.lf(Eu.KOt,t))}return Nr(Promise.race(e),t)}),t)}}WPt(){if(this.KPt)return;const t=()=>{this.KPt=void 0};this.JPt=new na,this.KPt=this.$Pt(this.JPt.Wd).catch(this.Nzt).then(t,t)}async YPt(){var t;null==(t=this.JPt)||t.qd();const i=this.KPt;this.KPt=void 0,i&&await i}async $Pt(t){Bo(t);const i=this.gzt;for(;;){const e=[];for(const t of i){const i=t.Djt,s=t.Ijt;if(s.kCt)e.push(s.OCt());else{const t=i.Rxt();t?"mot"===t.Rg?(s.fjt(t),e.push(s.OCt())):"dbt"===t.Rg&&(s.cjt(t),e.push(s.OCt())):e.push(i.tOt())}}if(0===e.length)break;await Nr(Promise.race(e),t)}}HPt(){if(this.tBt)return;this.iBt=new na;const t=()=>{this.tBt=void 0};this.tBt=this.eBt(this.iBt.Wd).catch(this.Nzt).then(t,t)}async GPt(){var t;null==(t=this.iBt)||t.qd();const i=this.tBt;this.tBt=void 0,i&&await i}async eBt(t){for(;;){const i=this.gzt;i.forEach((t=>t.Lht()));const e=this.sA.Mf,s=[],n=[];for(const t of i){const i=t.Ijt;for(const r of t.Tjt){const t=r.SCt?s:n;if(r.kCt)t.push(r.OCt());else if(!r.jCt(e)){const e=i.mjt(r.Rg);e?"mot"===e.Rg&&e.gbt===this.dzt?(r.Out(e),t.push(r.OCt())):"yjt"===e.Rg&&e.gbt===this.dzt&&(r.AJ(e),t.push(r.OCt())):n.push(i.pjt(r.Rg))}}}if(0===s.length){if(await this.sBt(i,e,t))continue}if(0===s.length&&0===n.length){i.every((t=>t.Tjt.length>0&&t.Tjt.every((t=>t.jCt(e)))))&&this.Fz.t$();break}await Nr(Promise.race([...s,...n]),t)}}async sBt(t,i,e){const s=[],n=[];for(const e of t){const t=e.Lut(i);for(const r of e.Tjt){if(!r.SCt)continue;const h=e.Ijt.mjt(r.Rg);if(void 0!==h){if(h.gbt===this.dzt)return!1;s.push(h)}else{if(e.kCt||e.xjt(i,t,this.PB.jW)||!r.zCt(i,t))return!1;{const t=r.ECt.yCt;void 0!==t&&n.push(t)}}}}if(0===s.length)return!1;const r=vd(s,(t=>t.gbt)).gbt;if(s.every((t=>"yjt"===t.Rg&&t.gbt===r))){const t=$o(s,(t=>t.GT)).GT,i=[...s,...n],r=await this.nBt(i);this.rBt(r)?(Wr.aSt(Yr,"Seamless switch from",this.Fz.wd,"to",r),await this.Fz.Aq(r),Wr.aSt(Yr,"Seamless switch complete.")):await this.hBt(t,r,e),this.dzt=s[0].gbt}else for(const i of t)for(const t of i.Tjt){let e=i.Ijt.mjt(t.Rg);for(;void 0!==e&&("yjt"!==e.Rg||e.gbt!==r);)Wr.aSt(Yr,"Removing append for other discontinuity, expecting "+r,e),i.Ijt.BCt(e),e=i.Ijt.mjt(t.Rg)}return!0}rBt(t){return this.Czt===Bn.hT||this.Czt!==Bn.oT&&this.Fz.gq(t)}async nBt(t){const i=t.map((t=>t.Mjt.mst)),e=i.map((t=>({qz:t}))),s=rs(t,(t=>t.Mjt.obt));s.push(...this.FTt.Tr.Ikt);let n=await rH(this.wzt.contentProtection,i,s,this.NS,this.wzt.useCredentials);return 0===n.length&&this.Fz&&this.Fz.wd.Xz.length>0&&(n=this.Fz.wd.Xz),{Rg:ai.Hx,r0:e,Xz:n,w0:this.wzt.useManagedMediaSource}}async hBt(t,i,e){var s;const n=this.Fz,r=n.ct,h=this.wf.length>0&&this.Mf<t;if(h)try{for(Wr.aSt(Yr,"Marking end of stream and waiting for ended to switch discontinuity."),n.t$();!this.sA.If&&this.sA.Mf<t;)await this.sA.lf([l.Sw,l.Jg],e)}catch(t){throw n.GJ(),n.t0(r),t}Wr.aSt(Yr,"Perform hard switch from",null==(s=this.Fz)?void 0:s.wd,"to",i);try{this.sA.i5(),this.Mf<t&&this.sA.Sm(t,!0,!0),this.K$=void 0,this.Z$=void 0,this.UPt(),await this.sA.tr(),this.Fz=await this.sA.$n(i),this.e0(),this.SMt(),this.EMt(),this.Fz.W$&&(this.K$=new oh(Vt.pm,this.Fz.W$,this.Izt?this.zgt:void 0,this.Szt?this.Jjt:void 0),this.K$.o$(t-1,t)),this.Fz.V$&&(this.Z$=new oh(Vt.ym,this.Fz.V$,this.Izt?this.zgt:void 0,this.Szt?this.Jjt:void 0),this.Z$.o$(t-1,t)),this.UPt()}finally{h&&D(this.sA.p_()),this.sA.e5()}if(this.nzt){const t=void 0!==this.Z$&&void 0===this.Lzt?[this.K$,this.Z$]:[this.K$];this.nzt.Sjt(t)}this.Lzt&&this.Lzt.Sjt([this.Z$]),Wr.aSt(Yr,"Hard switch complete.")}IPt(t){return Nr(Xc(rs(this.gzt,(t=>t.Tjt.map((t=>t.OCt()))))),t)}kTt(){const t=this.a_,i=this.r_;this.BNt===t&&this.RNt===i||(this.BNt=t,this.RNt=i,this.Co(new lm))}async gn(){Wr.qp(Kr,"Unloading the player."),this.oBt(),this.pNt(),await this.tr(),this.sA.uP=void 0,this.rPt.gn(),await this.nP.gn(),await this.zgt.gn(),await this.Jjt.gn(),this.dT.gn(),this._T.gn(),this.Dl.gn(),this.aBt.gn(),this.QNt.Ud(),this.HCt.Ud(),this.jzt&&(this.jzt.Ud(),this.jzt=void 0)}async tr(){Wr.qp(Kr,"Resetting the player."),this.fn(tu._It,this.handleBufferingErrorEvent),this.dzt=-1,this.ES.qd(),this.ES=new na,this.V2.qd(),this.V2=new na,this.pPt.qd(),this.pPt=new na;const t=[this.Xgt,this.W2,this.Tzt].filter(Yt);await Promise.all(t.map((t=>t.catch(qt)))),this.Xgt=void 0,this.W2=void 0,this.Tzt=void 0,this.ezt=void 0,this.izt=void 0,this._zt=void 0,this.qzt=void 0,this.Zzt=void 0,this.Jzt=void 0,this.$zt=void 0,this.Zzt=void 0,this.Jzt=void 0,this.$zt=void 0,this.Oz=void 0,this.BB.tr(),this.mPt=[],this.Qzt(void 0),this.DPt(),await this.SPt(),this.Lzt&&(this.Lzt.Ud(),this.Lzt=void 0),this.nzt&&(this.nzt.Ud(),this.nzt=void 0),this.ePt&&(this.ePt.Ud(),this.ePt=void 0),this.Z$=void 0,this.K$=void 0,this.Fz=void 0,this.FTt&&(this.FTt.Ud(),this.FTt=void 0),this.Ozt&&(this.Dl.Ez(this.Ozt.nt),this.Ozt=void 0),await this.nP.tr(),await this.zgt.tr(),await this.Jjt.tr(),this.sA.rP(),await this.sA.tr(),this.wzt=void 0,this.pzt=!1,this.s0=Ai.SB(),this.Azt=void 0,this.PNt=void 0,this.BNt=0,this.RNt=0,this.mzt=void 0,this.BTt=!1,this.L2=!1,i.Jd(this.yzt),this.vTt=!1,this.uBt=!1,this.cTt=0,this.Czt=Bn.iT,this.aBt.tr(),this.cBt(),this.Co(new uw(this.Mf,this.Jf))}cBt(){for(const t of this.dT.og)t.gn();for(const t of this._T.og)t.gn();for(const t of this.Dl.og)t.gn();this.dT.tr(),this._T.tr(),this.Dl.tr(),this.iPt.clear()}lBt(){this.aBt.yn(mX,this.Ds),this.aBt.yn(he.Rw,this.dA),this.aBt.yn(he.Bw,this.dBt),this.aBt.yn(he.Ow,this.fBt),this.PB.yn("TW",this.YNt),this.PB.yn("SW",this.GNt),this.sA.yn(pX,this.Ds),this.sA.yn(l.Vg,this.handleContentProtectionErrorEvent),this.sA.yn(l.Xg,this._Bt),this.sA.yn(l.Jg,this.Mh),this.sA.yn(l.Sh,this.gBt),this.sA.yn(l.jh,this.wBt),this.sA.yn(l.gw,this.ABt),this.sA.yn(he.H_,this.cO),this.sA.yn(l.Sw,this.u4),this.sA.yn(l.yw,this.We),this.sA.yn(l.pw,this.fP),this.sA.yn(l.mw,this.vBt),this.sA.yn(l.Ew,this.mBt)}oBt(){this.aBt.fn(mX,this.Ds),this.aBt.fn(he.Rw,this.dA),this.aBt.fn(he.Bw,this.dBt),this.aBt.fn(he.Ow,this.fBt),this.PB.fn("TW",this.YNt),this.PB.fn("SW",this.GNt),this.sA.fn(pX,this.Ds),this.sA.fn(l.Vg,this.handleContentProtectionErrorEvent),this.sA.fn(l.Xg,this._Bt),this.sA.fn(l.Jg,this.Mh),this.sA.fn(l.Sh,this.gBt),this.sA.fn(l.jh,this.wBt),this.sA.fn(l.gw,this.ABt),this.sA.fn(he.H_,this.cO),this.sA.fn(l.Sw,this.u4),this.sA.fn(l.yw,this.We),this.sA.fn(l.pw,this.fP),this.sA.fn(l.mw,this.vBt),this.sA.fn(l.Ew,this.mBt)}constructor(t,e,s,n,r,h,o,a){super(),this.PB=s,this.BB=n,this.HCt=r,this.zzt=h,this.iPt=si(),this.Szt=!0,this.Izt=!0,this.pzt=!1,this.wzt=void 0,this.Fz=void 0,this.Xgt=void 0,this.ES=new na,this.FTt=void 0,this.Zzt=void 0,this.Jzt=void 0,this.$zt=void 0,this.hzt=void 0,this.ezt=void 0,this.izt=void 0,this._zt=void 0,this.qzt=void 0,this.mPt=[],this.Z$=void 0,this.K$=void 0,this.Lzt=void 0,this.nzt=void 0,this.ePt=void 0,this.jzt=void 0,this.pPt=new na,this.Tzt=void 0,this.V2=new na,this.W2=void 0,this.dzt=-1,this.XPt=void 0,this.JPt=void 0,this.iBt=void 0,this.qPt=void 0,this.KPt=void 0,this.tBt=void 0,this.uyt=!0,this.oPt=0,this.hPt=!1,this.Qz=wo.FP,this.Bz=void 0,this.Rz=void 0,this.s0=Ai.SB(),this.pBt=[],this.Azt=void 0,this.vzt=!1,this.BTt=!1,this.L2=!1,this.PNt=void 0,this.BNt=0,this.RNt=0,this.mzt=void 0,this.yzt=0,this.vTt=!1,this.uBt=!1,this.Czt=Bn.iT,this.dPt=void 0,this.yBt=void 0,this.cTt=0,this.handleContentProtectionErrorEvent=t=>{this.Bz=Ki(t.errorObject),this.Rz=t.errorObject,this.Ds(t)},this.handleBufferingErrorEvent=t=>{this.IP(new $i(Ui.MEDIA_LOAD_ERROR,t.lt.message,t.lt))},this._Bt=()=>{this.qLt();const t=this.ct;t!==this.PNt&&(this.PNt=t,this.Co(new jn(this.PNt)))},this.Mh=()=>{this.If&&this.Co(new ee(this.Mf))},this.gBt=()=>{this.Co(new ge(this.Mf))},this.wBt=()=>{this.BMt(),this.Co(new sh(this.Mf))},this.dA=()=>{void 0!==this.yBt&&(i.Jd(this.yBt),this.yBt=void 0),this.Co(new Zr(this.Mf))},this.ABt=()=>{this.Co(new B(this.Mf))},this.cO=()=>{this.Co(new ro(this.Mf,this.Jf))},this.u4=()=>{const t=this.zIt;Ad(this.pBt,t)||(this.Co(new mq),this.pBt=t),this.Co(new Pc(this.Mf,this.vf))},this.OPt=uo((t=>{t.wS===Vt.pm&&this.szt()&&D(this.rzt())}),200),this.jPt=t=>{var i;this.cTt+=t.kxt;const e=this.rt.U>0?t.wS===Vt.pm:t.wS===Vt.ym;"mot"===t.Lxt&&e&&D(this.uPt()),this.Co(new _U(function(t){if(t){if(void 0!==t.Umt){var i,e;const s=t.Umt.Cn+(null!=(e=t.Umt.U)?e:0);return{zu:t.jM,Bht:[null==(i=t.Umt)?void 0:i.Cn,s],AS:!0}}return{zu:t.jM.toString()||"",AS:!0}}return{zu:"",AS:!0}}(t.uri),(null==(i=this.xIt)?void 0:i.wz)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.wS,t.httpStatusCode,t.kxt))},this.We=()=>{this.Co(new Eh(this.Mf))},this.fP=()=>{this.Co(new we(this.Mf))},this.vBt=()=>{this.kTt()},this.mBt=()=>{this.Co(new Je(this.Mf,this.c_))},this.dBt=()=>{this.sA.e_?this.Co(new lc(this.Mf)):(null!=this.yBt||(this.yBt=i.$d((()=>{this.uBt&&(this.dPt=void 0,D(this.azt()))}),2500)),this.BMt(),this.Co(new lc(this.Mf)))},this.fBt=()=>{this.uBt=!0,this.Co(new xt(this.Mf,this.Jf))},this.Nzt=t=>{Ho(t)||Vu(t)||As(t)||(this.DPt(),D(this.SPt()),this.Co(new UW(t)))},this.pCt=()=>{this.qLt()},this.xzt=t=>{D(this.APt(t.CIt))},this.Cwt=t=>{if(Ho(t))return;const i=t instanceof $i?t:new $i(Ui.MEDIA_DECODE_ERROR,t.message,t);this.IP(i)},this.onTextTrackChange=t=>{if(!this.hzt)return;const i=t.Lt,e=this.tPt(i);e&&(i.jg===Ha.zg||i.jg===Ha.Jn?(D(this.wPt(e)),this.iPt.forEach((t=>{t!==i&&(t.jg=Ha.Ch)}))):this._zt&&this._zt===e&&D(this.kzt(this.ezt,this.izt,void 0)))},this.retryOfflineRenditionsCallback=async(t,i)=>{this.fzt!==t&&this.HIt!==t&&this.XIt!==t||(await this.FTt.rCt(t,i),t.wIt.zLt=-1/0)},this.YNt=()=>{this.SMt()},this.GNt=()=>{this.EMt()},this.zPt=t=>{const i=this.hzt,e=null==i?void 0:i.Sbt;if(this.FTt.ACt(t.mst,t.CIt.wIt),!e&&(this.FTt.vCt(t.mst,t.CIt.wIt),this.Rzt.wSt(),i)){const t=void 0!==this.ezt&&!gd(i.dSt,this.ezt),e=void 0!==this.izt&&!gd(i.fSt,this.izt);(t||e)&&this.kzt(t?void 0:this.ezt,e?void 0:this.izt,this._zt).catch(qt)}},this.PPt=t=>{this.Rzt.mSt(t.CIt,t.zct)},this.BPt=t=>{this.Rzt.ySt(t.CIt,t.tjt.vN())},this.RPt=t=>{this.FTt.gCt(t.CIt)},this.pot=new YV(o),this.sA=t,this.NS=e,this.Wz=new RW(this.PB._W),this._Pt=new QW(this.sA),this.cPt=new JW(this.PB),this.Rut=a.retryConfiguration,this.dT=new Ae,this._T=new Ae,this.Rzt=new kW(this,this.PB,this.dT,this._T),this.rPt=new _i,this.nP=new Wv(this.sA,this.NS),this.zgt=new QV(this.sA),this.Jjt=new DF(this.sA),this.Dl=new gn([this.rPt,this.nP.Z,this.zgt.Z,this.Jjt.Z,this.sA.nt]),this.$z=new dN(this.NS),this.sA.uP=this.$z,this.QNt=new NX(this,this.sA),this.aBt=new lu(this.QNt,!0),this.lBt()}},TX=class{async EP(t,i){if(!Ra(t.type))return!1;if(t.useNativePlayback)return!1;const e=t.contentProtection;if(e&&!Mg(e)){if(!Dg(e))return!1;if(!await this.ket(e))return!1}return!0}async ket(t){return!!t.aes128||(!(!t.playready||!await i.BC())||(!(!t.widevine||!await i.OC())||(!(!t.clearkey||!await i.zC())||!t.fairplay&&await i.GC())))}},NX=class extends un{get Jf(){return this.Qo.Jf}WNt(){this.Co(new ro(this.Mf,this.Jf))}constructor(t,i){super(i),this.Qo=t}};function DX(t){const e=Po(t,(t=>t.AIt)),s=t.filter((t=>t.vIt)),n=i.git,r=s.map((t=>t.gs)).filter(Yt),h=oX(r,n);return h?Po(s,(t=>t.gs===h)):e}function IX(t,i){for(const e of i){const i=t.filter((t=>t.mst&&t.mst.JIt&&Bt(t.mst.JIt,e)));if(0!==i.length)return i}}function SX(t){var i;return null!=(i=DX(t))?i:t[0]}function EX(t,i){return t.filter((t=>bX(t,i)))}function bX(t,e){const s=e+yX,n=0===t.fSt.length||t.fSt.some((t=>t.wIt.zLt<i.Kd()-s)),r=0===t.dSt.length||t.dSt.some((t=>t.wIt.zLt<i.Kd()-s));return n&&r}function LX(t,i){if(!i||i.wIt.Abt)return!1;const e=i.wIt.tst;return 0!==e.length&&e[0].GT>t}var kX=class{async VCt(t,i,e){try{const s=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:e},s,t);return new j(n)}catch(t){throw new $i(Ui.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}Ud(){}static qC(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}},Gr=class extends wn{constructor(t,i){super(t),this.data=i}},CX=["message","messageerror","error"],xX=class extends wn{constructor(t){super(ut.ha),this.error=t}},OX=class extends xd{get MBt(){return this.TBt.Wd.zd}NBt(t,i){this.MBt||(void 0!==this.DBt?this.DBt.NBt(t,i):this.IBt.push({Ob:t,SBt:i}))}EBt(){this.MBt||(this.TBt.qd(),No(this.IBt),void 0!==this.DBt&&this.DBt.EBt())}constructor(t){super(),this.DBt=void 0,this.IBt=[],this.bBt=t=>{if(this.MBt)t.EBt();else{this.DBt=t,this.DBt.yn(CX,this.Ds);for(const i of this.IBt)t.NBt(i.Ob,i.SBt);No(this.IBt)}},this.LBt=t=>{if(this.MBt)return;const i=t instanceof g?t:new g("Could not create Worker.");this.Co(new xX(i)),this.EBt()},this.TBt=new na,t(this.TBt.Wd).then(this.bBt,this.LBt)}};var jX=class extends xd{NBt(t,i){i?this.DBt.postMessage(t,i):this.DBt.postMessage(t)}EBt(){this.Vo(),this.DBt.removeEventListener("message",this.kBt),this.DBt.removeEventListener("messageerror",this.CBt),this.DBt.removeEventListener("error",this.H3),this.DBt.terminate()}constructor(t,i){super(),this.kBt=t=>{this.Co(new Gr("message",t.data))},this.CBt=t=>{this.Co(new Gr("messageerror",t.data))},this.H3=t=>{null==t.preventDefault||t.preventDefault.call(t);const i=t.error instanceof g?t.error:new g(t.message);this.Co(new xX(i)),this.EBt()},this.DBt=new Il(t,i),this.DBt.addEventListener("message",this.kBt),this.DBt.addEventListener("messageerror",this.CBt),this.DBt.addEventListener("error",this.H3)}},zX=0,PX=class extends xd{NBt(t,i){i?this.xBt.contentWindow.postMessage({type:"message",data:t},"*",i):this.xBt.contentWindow.postMessage({type:"message",data:t},"*")}EBt(){var t;this.xBt.removeEventListener("load",this.OBt),self.removeEventListener("message",this.jBt),null==(t=this.xBt.contentWindow)||t.postMessage({type:"terminate"},"*"),fh(this.xBt)}constructor(t,e){super(),this.OBt=()=>{this.xBt.removeEventListener("load",this.OBt),this.xBt.contentWindow.postMessage({type:"initialize",id:this.CT,script:this.zBt},"*")},this.jBt=t=>{t.origin===this.PBt&&t.data.id===this.CT&&("initialized"===t.data.type||("error"===t.data.type?(this.Co(new xX(new g(t.data.data.message))),this.EBt()):this.Co(new Gr("message",t.data.data))))},this.CT=zX++,this.zBt=t;const s=i.Dh("iframe.html",e);this.xBt=function(t){const i=h.createElement("iframe");return i.width="0",i.height="0",i.style.display="none",i.role="",i.src=t,h.body.appendChild(i),i}(s.href),this.PBt=s.origin,this.xBt.addEventListener("load",this.OBt),self.addEventListener("message",this.jBt)}};function BX(t,e,s){const n=i.IA(t,e);return new OX((t=>async function(t,e,s,n){let r;try{return r=new jX(t,s),await FX(r,n),r}catch(t){null==r||r.EBt(),Ao(t)}if(QX&&Sr){let e;try{const s=await i._O.SI({zu:t,dS:Ys.GET,fS:Qv.Ru,Wd:n});e=await s.DS(n)}catch(t){Ao(t)}if(e){let t;try{const i=Sr([e],{type:"application/javascript"});return t=URL.createObjectURL(i),r=new jX(t,s),await FX(r,n),r}catch(t){null==r||r.EBt(),Ao(t),QX=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return r=new PX(t,e),await FX(r,n),r}catch(t){throw null==r||r.EBt(),t}}(n,e,s,t)))}var RX,UX,QX=!0;async function FX(t,i){const e=await t.lf(["message","error"],i);if("error"===e.type)throw function(t){return new $i(Ui.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(e.error);if(!function(t){return Ic(t)&&"7.12.0"===t.BBt}(e.data))throw new $i(Ui.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (7.12.0).");return e}!function(t){t.RBt="VCt",t.UBt="gxt"}(RX||(RX={})),function(t){t.QBt="FBt",t.YBt="GBt"}(UX||(UX={}));var YX=class{VBt(){const t=BX(this.WBt,this.HBt,{name:"THEOplayer decrypt worker"});return t.yn("message",this.qBt),t.yn("error",this.XBt),t}VCt(t,i,e){const s=""+ ++this.ZBt,n={KBt:RX.RBt,JBt:s,$Bt:t,tRt:i,iRt:e},r=new Rs;return this.eRt.set(s,r),null!=this.DBt||(this.DBt=this.VBt()),this.DBt.NBt(n),r.Zb}Ud(t){void 0===t&&(t=new pe),this.eRt.forEach((i=>i.qb(t))),this.eRt.clear(),this.DBt&&(this.DBt.EBt(),this.DBt=void 0)}constructor(t){this.DBt=void 0,this.ZBt=0,this.eRt=Eo(),this.qBt=t=>{const i=t.data,e=i.sRt,s=this.eRt.get(e);if(s)if(this.eRt.delete(e),i.nRt===UX.QBt)s.Wb(i.rRt);else if(i.nRt===UX.YBt){const t=i.hRt,e=i.oRt?new g(i.oRt):void 0,n=new $i(Ui.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt. (code: "+t+")",e);s.qb(n)}},this.XBt=t=>{const i=new $i(Ui.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.Ud(i)},this.HBt=t;try{this.WBt=i.IA("theoplayer.d.js",t)}catch(t){throw new $i(Ui.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function GX(t){return kX.qC()?new kX:new YX(t)}function VX(t){const i=Po(t.boxes,VL);if(!i)return;const e=Po(i.boxes,WL);return e?e.handlerType:void 0}function WX(t){const i=new Ly;return i.boxes.push(...t.boxes),i}function HX(t){const i=new Zp;return i.boxes.push(...t.boxes),i}var qX=8;function XX(t,i){const e=function(t){const i=new Ve;return i.boxes.push(...t.boxes),i}(t),s=KX(i);for(let t=0;t<e.boxes.length;t++){const n=e.boxes[t];if(n===i)e.boxes[t]=new Np(new j(i.getSize()-qX));else if(HL(n)){const i=n,r=uu(i.boxes,(t=>t instanceof ru&&t.trackId===s));if(r>=0){const s=i.boxes[r],n=HX(i);n.boxes[r]=new Np(new j(s.getSize()-qX)),e.boxes[t]=n}}}return e}function ZX(t,i){const e=function(t){const i=new Be;return i.boxes.push(...t.boxes),i}(t);for(let t=0;t<e.boxes.length;t++){const s=e.boxes[t];if(ZL(s)){const n=Po(s.boxes,KL);n&&n.trackId===i&&(e.boxes[t]=new Np(new j(s.getSize()-qX)))}}return e}function KX(t){return Po(t.boxes,GL).trackId}function JX(t,i,e,s){const n=Po(t.boxes,KL),r=e._D(i).WN();let h=Ce.ZERO;for(const i of t.boxes){if(i instanceof Su){h=R_(i.baseMediaDecodeTime,r),i.baseMediaDecodeTime=i.baseMediaDecodeTime.subtract(h);break}if(i instanceof uy){h=R_(Ce.fromNumber(i.baseMediaDecodeTime),r),i.baseMediaDecodeTime-=h.toNumber();break}}if(h.isZero())return;const o=Po(t.boxes,JL);if(void 0!==o&&o.samples.length>0){const t=o.samples;if(!o.flags.sampleDurationPresent){o.flags.sampleDurationPresent=!0;const i=null!=s?s:n.defaultSampleDuration;for(const e of t)e.duration=i}t[0].duration+=h.toNumber(),o.samples=t}}var $X="Mp4Transmuxer",tZ=class extends qq{djt(t,i){Bo(i);const e=t.CIt,s=Tk(ha(t.dbt.zm.zm));if(!s)throw new g("Mp4Transmuxer - Unable to parse "+e.Rg+" MP4 initializer.");this.pJ=s;const n=function(t){let i,e;for(const s of t.Z)i||(i=s.AK),e||(e=s.wK);if(i||e)return{JIt:i,$It:e,pEt:void 0};return}(s);n&&this.gjt(e,n);const r=function(t){for(const i of t.Z)if(void 0!==i.vK)return i.vK;return}(s);void 0!==r&&this.wjt(e,r);const h=function(t){var i;const e=zy(t),s=Po(e.boxes,FL),n=s.boxes.filter(YL),r=Po(n,(t=>VX(t)===Op.AUDIO)),h=Po(n,(t=>VX(t)===Op.VIDEO)),o={JIt:{Qp:r?KX(r):void 0},$It:{Qp:h?KX(h):void 0}},a=null==(i=Po(s.boxes,HL))?void 0:i.boxes.filter(qL);var u,c;const l=a?{JIt:null!=(u=Po(a,(t=>t.trackId===o.JIt.Qp)))?u:void 0,$It:null!=(c=Po(a,(t=>t.trackId===o.$It.Qp)))?c:void 0}:void 0;var d,f;if(l&&(o.JIt.gM=null==(d=l.JIt)?void 0:d.defaultSampleDuration,o.$It.gM=null==(f=l.$It)?void 0:f.defaultSampleDuration),!r||!h)return{JIt:r?t:void 0,$It:h?t:void 0,XD:o};const _=WX(e),g=WX(e),w=e.boxes.indexOf(s);_.boxes[w]=XX(s,h),g.boxes[w]=XX(s,r);const A=_.serialize().join(),v=g.serialize().join();return{JIt:A,$It:v,XD:o}}(t.dbt.zm.zm);if(this.aRt=h.XD,h.$It){const i=Po(s.Z,(t=>t.Qp===h.XD.$It.Qp)),e={Rg:"yjt",zm:{Rg:ji.aq,zm:h.$It},dht:Vt.pm,gbt:t.gbt,Mjt:{mst:'video/mp4; codecs="'+i.wK+'"',obt:t.obt},GT:t.GT,CIt:t.CIt,QCt:t.dbt.QCt};this.OOt(e)}if(h.JIt){const i=Po(s.Z,(t=>t.Qp===h.XD.JIt.Qp)),e={Rg:"yjt",zm:{Rg:ji.aq,zm:h.JIt},dht:Vt.ym,gbt:t.gbt,Mjt:{mst:'audio/mp4; codecs="'+i.AK+'"',obt:t.obt},GT:t.GT,CIt:t.CIt,QCt:t.dbt.QCt};this.OOt(e)}return Promise.resolve()}async _jt(t,i){Bo(i);const e=t.mot.QCt;Wr.qp($X,"Transmuxing fMP4: "+Jo(e.cvt));const s=t.mot.zm,n=iZ(s.zm,this.pJ),r=md(n.map((t=>t.s9)),hA);if(void 0!==r&&(e.n9=r,this.vjt(t.CIt)),!this.bkt.nkt(t.gbt)){const s=ke.mD(e.GT);if(n.length>0){const i=md(n.map((t=>t.uRt)),hA);for(const e of this.rjt)this.bkt.wkt(t.gbt,e,i,s,!1);this.vjt(t.CIt)}this.bkt.nkt(t.gbt)||await Nr(this.bkt.hkt(t.gbt),i)}const h=this.bkt.dkt(t.gbt),o=e.n9?this.bkt.fkt(e.n9,e).vN():e.GT,a=ec(e,o);var u;const c={WOt:a,HOt:Xq(e,a),GT:o,ct:null!=(u=e.ct)?u:0,UD:h.vN(),gbt:t.gbt,CIt:t.CIt,QCt:t.mot.QCt},l=function(t,i){if(void 0===i.JIt.Qp)return{JIt:void 0,$It:t};if(void 0===i.$It.Qp)return{JIt:t,$It:void 0};const e=zy(t),s=WX(e),n=WX(e);for(let t=0;t<e.boxes.length;t++){const r=e.boxes[t];XL(r)&&(s.boxes[t]=ZX(r,i.$It.Qp),n.boxes[t]=ZX(r,i.JIt.Qp))}const r=s.serialize().join(),h=n.serialize().join();return{JIt:r,$It:h}}(s.zm,this.aRt);if(l.$It){var d;const i=this.aRt.$It.Qp,s=Po(this.pJ.Z,(t=>t.Qp===i)),h=Po(n,(t=>t.Qp===i)),o=this.cRt(l.$It,s,h,null==(d=this.aRt)?void 0:d.$It.gM,e);this.lRt=s,this.Ajt(t.CIt,e,h.s9.bN(r));const a=Tt({Rg:"mot",zm:{Rg:ji.aq,zm:o},dht:Vt.pm},c);this.OOt(a)}if(l.JIt){const t=Tt({Rg:"mot",zm:{Rg:ji.aq,zm:l.JIt},dht:Vt.ym},c);this.OOt(t)}this.dRt=e,this.fRt=n}cRt(t,i,e,s,n){if(!function(t){return tq(t)?t.lbt:0===t.Ybt&&t.Qbt.lbt}(n))return t;if(!this.dRt||!this.lRt||!this.fRt)return t;const r=this.lRt.Qp,h=Po(this.fRt,(t=>t.Qp===r)),o=this.bkt.fkt(h._Rt,this.dRt),a=this.bkt.fkt(e.s9,n).bN(o)._D(i.kp);if(a.TN(ke.zN))return t;if(a.mN(ke.mD(.5)))return t;const u=tq(n)?n:n.Qbt;return Wr.aSt($X,"Stretching first video frame of segment #"+u.HEt+" to fill gap of "+a.vN()+"s"),function(t,i,e,s){const n=zy(t),r=Po(n.boxes,XL);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof me&&JX(t,i,e,s);const n=r.getSize();if(n!==t){const i=n-t;for(const t of r.boxes)t instanceof me&&$L(t,i)}}return n.serialize().join()}(t,i.kp,a,s)}constructor(...t){super(...t),this.pJ=void 0,this.aRt=void 0,this.dRt=void 0,this.fRt=void 0,this.lRt=void 0}};function iZ(t,i){const e=ml(Lr.fp(ha(t)),Zt.Jv);if(!e)throw new g("Mp4Transmuxer - Unable to parse segment or part.");return function(t,i){const e=[];for(const n of t.Z){if(!n.IM||0===n.DM.length||0===n.DM[0].CM.length)continue;const t=n.np.Qp,r=Po(i.Z,(i=>i.Qp===t));let h=0,o=1/0,a=0;const u=n.np.gM||0;for(const t of n.DM)for(const i of t.CM){const t=i.xM||0,e=h+t;var s;h+=null!=(s=i.ct)?s:u;const n=h+t;e<o&&(o=e),n>a&&(a=n)}const c=ke.xN(n.IM.IM,r.kp);e.push({Qp:t,uRt:c,s9:c.ST(ke.ON(o,r.kp)),gRt:c.ST(ke.ON(h,r.kp)),_Rt:c.ST(ke.ON(a,r.kp))})}return e}(e,i)}var eZ,sZ="MpegtsTransmuxer",nZ=class extends tZ{djt(t,i){return super.djt(t,i)}ujt(t,i){if(super.ujt(t,i),this.Tit.wRt())return;var e;const s=null!=(e=null==i?void 0:i.cvt)?e:t.cvt;if(!s)return;/\.(ts|aac|mp3)/i.test(s.jM)&&this.Tit.ARt()}vRt(t){let i;return t.CIt===this.mRt&&this.pRt.has(t.gbt)?i=this.pRt.get(t.gbt):(i=gX(t.mot.zm.zm),this.mRt=t.CIt,this.pRt.set(t.gbt,i)),i}async _jt(t,i){Bo(i);const e=this.vRt(t),s=t.mot;if(e!==uX.Xjt&&e!==uX.Zjt)return super._jt(t,i);if(s.QCt.obt.some(hZ))throw new $i(Ui.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.Tit.ARt();let r;e===uX.Xjt?(Wr.qp(sZ,"Transmuxing MPEG-TS: "+Jo(s.QCt.cvt)),r=await n.yRt({data:s.zm.zm,metadata:this.MRt})):(Wr.qp(sZ,"Transmuxing raw audio: "+Jo(s.QCt.cvt)),r=await n.TRt({data:s.zm.zm,metadata:this.MRt})),Bo(i),this.gjt(t.CIt,{JIt:r.metadata.audio_codec,$It:r.metadata.video_codec,pEt:void 0}),r.metadata.video_frame_rate&&this.wjt(t.CIt,r.metadata.video_frame_rate);const h=oZ(r.metadata.first_decode_timestamp),o=oZ(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?oZ(r.metadata.first_video_presentation_timestamp):void 0;if(s.QCt.n9=o,this.vjt(t.CIt),void 0!==a&&this.Ajt(t.CIt,s.QCt,function(t,i){let e=t.bN(i);return e.DN(ke.zN)&&(e=e.ST(aA())),e}(a,o)),!this.bkt.nkt(t.gbt)){const e=ke.mD(s.QCt.GT);for(const i of this.rjt)this.bkt.wkt(t.gbt,i,h,e,!0);this.vjt(t.CIt),this.bkt.nkt(t.gbt)||await Nr(this.bkt.hkt(t.gbt),i)}const u=this.bkt.gkt(h,s.QCt);this.MRt=r.metadata;const c=this.bkt.fkt(o,s.QCt).vN(),l=ec(s.QCt,c);var d;const f={WOt:l,HOt:Xq(s.QCt,l),GT:c,ct:null!=(d=s.QCt.ct)?d:0,UD:u.vN(),gbt:t.gbt,CIt:t.CIt,QCt:s.QCt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.rjt){const i=Tt({Rg:"mot",zm:void 0,dht:t},f);this.OOt(i)}return}const _=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.NRt||this.DRt!==t.gbt||!Qi(this.NRt,r.data.audio_init))){const i=this.bkt.fkt(s.QCt.n9,s.QCt).vN(),e={Rg:"yjt",zm:{Rg:ji.aq,zm:r.data.audio_init},dht:Vt.ym,gbt:t.gbt,Mjt:{mst:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',obt:s.QCt.obt},GT:i,CIt:t.CIt,QCt:s.QCt};this.NRt=r.data.audio_init,this.DRt=t.gbt,this.OOt(e)}const i=Tt({Rg:"mot",zm:{Rg:ji.aq,zm:r.data.audio_media},dht:Vt.ym},f);this.OOt(i)}else if(t.mot.QCt.Rbt&&gd(this.rjt,Vt.ym)){const t=Tt({Rg:"mot",zm:void 0,dht:Vt.ym},f);this.OOt(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.IRt||this.SRt!==t.gbt||!Qi(this.IRt,r.data.video_init))){const i=this.bkt.fkt(s.QCt.n9,s.QCt).vN(),e={Rg:"yjt",zm:{Rg:ji.aq,zm:r.data.video_init},dht:Vt.pm,gbt:t.gbt,Mjt:{mst:'video/mp4; codecs="'+r.metadata.video_codec+'"',obt:s.QCt.obt},GT:i,CIt:t.CIt,QCt:s.QCt};this.IRt=r.data.video_init,this.SRt=t.gbt,this.ERt=Tk(ha(r.data.video_init)),this.OOt(e)}const i=this.ERt.Z[0],e=iZ(r.data.video_media,this.ERt)[0],n=this.cRt(r.data.video_media,i,e,void 0,s.QCt);this.lRt=i;const h=Tt({Rg:"mot",zm:{Rg:ji.aq,zm:n},dht:Vt.pm},f);this.OOt(h),_.push(e)}else if(t.mot.QCt.Rbt&&gd(this.rjt,Vt.pm)){const t=Tt({Rg:"mot",zm:void 0,dht:Vt.pm},f);this.OOt(t)}this.dRt=s.QCt,this.fRt=_}qd(){this.NRt=void 0,this.IRt=void 0,this.DRt=-1,this.SRt=-1,super.qd()}constructor(t,i,e,s){super(i,e,s),this.MRt=void 0,this.NRt=void 0,this.IRt=void 0,this.ERt=void 0,this.DRt=-1,this.SRt=-1,this.mRt=void 0,this.pRt=si(),this.Tit=t}},rZ=class{tMt(t,i,e){return new nZ(this,t,i,e)}};function hZ(t){return t.dS===xu.MEt}function oZ(t){return ke.xN(Ce.fromBits(t.low,t.high),t.base)}!function(t){t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4"}(eZ||(eZ={}));var aZ=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=fi.vE;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module(it("AGFzbQEAAAA="))}catch(t){return!1}}();return aZ=()=>t,t};var uZ=class{yRt(t){return this.bRt(eZ.MPEGTS_TO_FMP4,t)}TRt(t){return this.bRt(eZ.RAW_AUDIO_TO_FMP4,t)}VBt(){const t=BX(this.WBt,this.HBt,{name:"THEOplayer transmux worker"});return t.yn("message",this.qBt),t.yn("error",this.XBt),t}bRt(t,i){const e=++this.ZBt,s={type:t,id:e,input:i},n=new Rs;return this.eRt.set(e,n),this.DBt.NBt(s),n.Zb}Ud(t){void 0===t&&(t=new pe),this.eRt.forEach((i=>i.qb(t))),this.eRt.clear(),this.DBt.EBt()}constructor(t){this.ZBt=0,this.eRt=si(),this.qBt=t=>{const i=t.data;if(void 0!==i.requestId){const t=this.eRt.get(i.requestId);if(!t)return;this.eRt.delete(i.requestId),i.success?t.Wb(i.output):t.qb(new $i(i.errorCode,i.error))}else i.success||this.Ud(new $i(i.errorCode,i.error))},this.XBt=t=>{const i=new $i(Ui.MEDIA_DECODE_ERROR,t.error.message,t.error);this.Ud(i)},this.HBt=t;const e=aZ()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.WBt=i.IA(e,t)}catch(t){throw new $i(Ui.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.DBt=this.VBt()}},cZ=class extends rZ{wRt(){return void 0!==this.DBt}ARt(){var t;return null!=(t=this.DBt)?t:this.DBt=new uZ(this.LRt)}Ud(){this.DBt&&(this.DBt.Ud(),this.DBt=void 0)}constructor(t){super(),this.LRt=t,this.DBt=void 0}},lZ=class{h9(){return new cZ(this.LRt)}constructor(t){this.LRt=t}},dZ=class extends MX{A_(){if(NR(this.sA))return this.sA.A_()}get g_(){return!1}set g_(t){}async gn(){var t;await super.gn(),null==(t=this.qNt)||t.gn()}constructor(t,i,e,s,n,r,h,o){super(t,i,e,s,n,r,h,o),fi.WE&&(this.qNt=new jR(this))}},fZ=class extends dZ{async gn(){await super.gn(),await this.lP.cP(this.sA)}constructor(t,i,e,s,n,r,h,o){const a=new Zu(t);super(a.SP(Vt.pm),i,e,s,n,r,h,o),this.lP=a}},_Z=class extends TX{async EP(t,i){return!!Wk(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(fi.Ga||fi.vb))&&super.EP(t,i))}async ket(t){return(!t.clearkey||!fi.WE)&&super.ket(t)}};Uu(new class extends _Z{JA(t,i,e,s,n,r,h){return new fZ(i,e,n,r,GX(s.libraryLocation),new lZ(s.libraryLocation),new jt(I.Ib.sst,I.Ib.ist,I.Ib.tst,I.Ib.rst),s)}bP(){return!0}constructor(...t){super(...t),this.LP=hi.CA}}),Wr.Rt=()=>{var t;return Boolean(null==(t=s)?void 0:t.THEOplayerDebugLogsEnabled)};var gZ=class{jet(t,i){return Promise.resolve(!1)}Pet(t,i){return Promise.resolve(void 0)}Cet(t){return Promise.resolve(void 0)}CH(t){return Promise.resolve(void 0)}},wZ=class extends xd{kRt(){var t;return null==(t=this.CRt)?void 0:t.wIt}Cn(t){D(mu((()=>this.xRt(t)),t))}async xRt(t){await this.FTt.Kkt(t),this.ORt&&(this.jRt(this.ORt.ji,this.ORt.Ti),this.ORt=void 0),this.M4=!0}zRt(t,i){this.M4?this.jRt(t,i):this.ORt={ji:t,Ti:i}}jRt(t,i){const e=this.PRt(t,i),s=null==e?void 0:e.fSt[0];s!==this.CRt&&(this.BRt(),void 0!==s&&(this.CRt=s,this.RRt=new ih(this.FTt,s),this.RRt.ixt()))}BRt(){this.CRt=void 0,this.RRt&&(this.RRt.Ud(),this.RRt=void 0)}PRt(t,i){const e=Po(this.FTt.Tr.lSt,(e=>void 0!==e.eSt&&e.eSt.ji===t&&e.eSt.Ti===i));return null!=e?e:this.FTt.Tr.lSt[0]}gn(){this.Vo(),this.BRt(),this.FTt.Ud()}constructor(t,i,e){super(),this.CRt=void 0,this.RRt=void 0,this.ORt=void 0,this.URt=()=>{this.Co(new Qa)},this.bc=t,this.FTt=new dq(e,new gZ,t.useCredentials,t.src,t.liveOffset),this.FTt.yn(l.lw,this.Ds),this.M4=!1}},AZ=class extends Mo{get ht(){return this.n2.ht}get wf(){return this.n2.wf}get vf(){return this.n2.vf}set vf(t){this.n2.vf=t}get bt(){return this.n2.bt}get Mf(){return this.n2.Mf}set Mf(t){this.n2.Mf=t}get ct(){return this.n2.ct}get If(){return this.n2.If}get bf(){return this.n2.bf}get kf(){return this.n2.kf}get lt(){return this.n2.lt}get xf(){return this.n2.xf}get jf(){return this.n2.jf}get Pf(){return this.n2.Pf}set Pf(t){this.n2.Pf=t}get Uf(){return this.n2.Uf}get Ff(){return this.n2.Ff}get Gf(){return this.n2.Gf}set Gf(t){this.n2.Gf=t}get Hf(){return this.n2.Hf}get Xf(){return this.n2.Xf}set Xf(t){this.n2.Xf=t}get Jf(){return this.n2.Jf}get t_(){return this.n2.t_}get e_(){return this.n2.e_}get Yz(){return this.n2.Yz}get nt(){return this.n2.nt}get r_(){return this.n2.r_}get rt(){return this.n2.rt}get a_(){return this.n2.a_}get c_(){return this.n2.c_}set c_(t){this.n2.c_=t}get f_(){return this.n2.f_}get g_(){return this.n2.g_}set g_(t){this.n2.g_=t}get Vz(){return this.n2.Vz}get cA(){}M_(){return this.n2.M_()}w_(){return this.n2.w_()}A_(){return this.n2.A_()}be(){return this.n2.be()}D_(){return this.n2.D_()}I_(){return this.n2.I_()}m_(){return this.n2.m_()}p_(){return this.n2.p_()}tr(){return this.n2.tr()}ga(t,i,e){return this.n2.ga(t,i,e)}ge(){return this.n2.ge()}T_(){return this.n2.T_()}N_(){return this.n2.N_()}gn(){this.Vo();for(const t of DN)this.n2.fn(t,this.Ds);return this.n2.gn()}constructor(t){super(),this.n2=t;for(const t of DN)this.n2.yn(t,this.Ds)}},vZ=class extends AZ{async ga(t,i,e){await super.ga(t,i,e),t.hlsDateRange&&this.nvt(t,i,e)}nvt(t,i,e){this.QRt=new wZ(t,i,this.FRt),this.QRt.yn(l.lw,this.handleManifestUpdate),this.QRt.Cn(e)}tr(){return this.mCt&&(this.nt.it(this.mCt),this.o3.it(this.mCt),this.mCt.gn(),this.mCt=void 0,this.YRt=!1),this.QRt&&(this.QRt.gn(),this.QRt=void 0),this.o3.tr(),super.tr()}gn(){return this.fn(l.mw,this.vBt),this.QRt&&(this.QRt.gn(),this.QRt=void 0),this.o3.gn(),super.gn()}constructor(t,i,e){super(t),this.QRt=void 0,this.YRt=!1,this.mCt=void 0,this.handleManifestUpdate=()=>{const t=this.QRt.kRt();if(t){const i=this.Yz;if(i){const e=i.getTime();let s=this.mCt;s||(s=new FH,this.mCt=s),s.Yn(t.wbt,(t=>(t.getTime()-e)/1e3)),!this.YRt&&s.L.U>0&&(this.nt.tt(s),this.o3.tt(s),this.YRt=!0)}}},this.vBt=()=>{this.QRt&&this.QRt.zRt(this.a_,this.r_)},this.FRt=i,this.LH=e,this.o3=new rh(this),this.yn(l.mw,this.vBt)}};!function(t){Jn.kP().CP(t)}((function(t,i,e){return new vZ(t,i,e)}));var ma=class extends hs{get name(){return"CastError"}constructor(t,i=""){super("An error occurred while casting."),this.errorCode=t,this.description=i}};async function mZ(t){MZ()||await async function(t){if(null==t?void 0:t.zd)return Promise.reject(new pe);const{Zb:i,Wb:e,qb:n}=function(){let t,i;return{Zb:new Promise(((e,s)=>{t=e,i=s})),Wb:t,qb:i}}(),r=s.__onGCastApiAvailable,h=()=>{s.__onGCastApiAvailable=r,n(new pe)};return s.__onGCastApiAvailable=(i,o)=>{i?e():n(new g(o)),null==t||t.Yd(h),s.__onGCastApiAvailable=r,r&&r(i,o)},null==t||t.Fd(h),i}(t),yZ()||await lt(100,t),yZ()||(i.SA('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await pZ())}var pZ=Zc((()=>function(t){return new Promise(((i,e)=>{const s=h.createElement("script");s.onload=()=>i(),s.onerror=t=>e((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(h.head||h.documentElement).appendChild(s)}))}("//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js").catch((()=>{throw new ma("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}))));function yZ(){return Boolean("undefined"!=typeof cast&&cast.framework)}function MZ(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function TZ(t,i,e,s){if(Yt(i))for(const e of w.keys(i)){if("type"===e||"images"===e)continue;const s=i[e];Yt(s)&&(t[e]=s)}!function(t,i,e,s){if(!Yt(e)&&!Yt(null==i?void 0:i.images))return;t.images=[],e&&t.images.push(new s.Image(e));if(null==i?void 0:i.images)if(Qs(i.images))t.images.push(new s.Image(i.images));else if(Gt(i.images))for(const e of i.images){let i;var n,r;if(Qs(e))i=new s.Image(e);else i=new s.Image(e.src),i.height=null!=(n=e.height)?n:null,i.width=null!=(r=e.width)?r:null;t.images.push(i)}}(t,i,e,s)}function NZ(t,i,e){return void 0===e&&(e=chrome),function(t,i,e){switch(null==t?void 0:t.type){case"movie":{const s=new e.MovieMediaMetadata;return TZ(s,t,i,e),s}case"audio":{const s=new e.MusicTrackMediaMetadata;return TZ(s,t,i,e),!Yt(s.artist)&&Yt(t.artistName)&&(s.artist=t.artistName),s}case"tv-show":{const s=new e.TvShowMediaMetadata;return TZ(s,t,i,e),!Yt(s.title)&&Yt(t.episodeTitle)&&(s.title=t.episodeTitle),!Yt(s.season)&&Yt(t.seasonNumber)&&(s.season=t.seasonNumber),!Yt(s.episode)&&Yt(t.episodeNumber)&&(s.episode=t.episodeNumber),s}default:{const s=new e.GenericMediaMetadata;return TZ(s,t,i,e),s}}}(t,i,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(e))}function DZ(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function IZ(t){if(t.items&&t.items.length>0&&t.currentItemId>=0)return Po(t.items,(i=>i.itemId===t.currentItemId))}var nu,cr="urn:x-cast:com.theoplayer.cast";!function(t){t.GRt="theoplayer_receiver_info",t.VRt="theoplayer_trackpropertychange",t.WRt="theoplayer_propertychange"}(nu||(nu={}));var SZ;(SZ||(SZ={})).SKIP_AD="SKIP_AD";function EZ(t){h.createElement("img").src=t}var bZ=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function LZ(t){if(!Qs(t))return;const i=t.match(bZ);return i?3600*x(i[1],10)+60*x(i[2],10)+Number(i[3])+(Number(i[4])||0)/1e3:void 0}function rc(t){if(void 0===t)return;const i=t.match(/^([1-9]?\d|100)%$/);return i?x(i[1])/100:void 0}function kZ(t,i){return"vmap"===t.type||!Yt(t.type)&&!Yt(i)}function CZ(t,i){return"vast"===t.type||!Yt(t.type)&&Yt(i)}var xZ,hc=class{},OZ=class extends hc{get HRt(){return this.Ic}qRt(){return null!=this.XRt||(this.XRt=rs(this.Ic,(t=>t.qRt()))),this.XRt}constructor(t){super(),this.Ic=t.sort(((t,i)=>t.yM-i.yM))}},oc=class extends hc{get o(){return this.ZRt}get yM(){return this.KRt}get JRt(){return this.$Rt}constructor(t,i){super(),this.ZRt=t,this.KRt=i,this.$Rt=!1}},jZ=class extends oc{get tUt(){return this.iUt}get eUt(){return this.sUt}get nUt(){return this.rUt}get hUt(){return this.oUt}get lt(){return this.Bz}qRt(){if(void 0===this.aUt){let t,i,e,s=[];for(const n of this.iUt)n.uUt&&(t=n.uUt),n.cUt&&(i=n.cUt),n.lUt&&(e=n.lUt),s=s.concat(n.universalAdIds);this.aUt={hUt:this.hUt,uUt:t,dUt:i,lUt:e,lt:this.lt,fUt:s}}return[this.aUt]}constructor(t,i,e,s,n,r,h){super(t,i),this.sUt=e,this.rUt=s,this.oUt=n,this.iUt=r,this.Bz=h}},bc=class{get _Ut(){return this.gUt}get wUt(){return this.AUt}constructor(t,i){this.gUt=t,this.AUt=i}},zZ=class{get vUt(){return this.mUt}get pUt(){return this.yUt}get MUt(){return this.TUt}get NUt(){return this.DUt}get Xl(){return this.IUt}set Xl(t){this.IUt=t}get SUt(){return this.EUt}get bUt(){return this.LUt}kUt(){this.LUt=!0}get eUt(){return this.sUt}constructor(t,i,e,s,n,r){this.mUt=t,this.yUt=i,this.TUt=e,this.DUt=s,this.LUt=!1,this.EUt=n,this.sUt=r}};!function(t){t.CUt="all",t.xUt="any",t.FP="none"}(xZ||(xZ={}));var gs,PZ=class{get OUt(){return this.jUt}get zUt(){return this.PUt}constructor(t,i){this.jUt=t,this.PUt=i}},BZ=class{get o(){return this.CT}get ji(){return this.dk}get Ti(){return this.fk}get BUt(){return this.RUt}get UUt(){return this.QUt}get FUt(){return this.YUt}get GUt(){return this.VUt}get WUt(){return this.HUt}get qUt(){return this.XUt}get ZUt(){return this.KUt}get vUt(){return this.mUt}get pUt(){return this.yUt}get MUt(){return this.TUt}get JUt(){return this.$Ut}get wUt(){return this.tQt}get iQt(){return this.eQt}constructor(t,i,e,s,n,r,h,o,a,u,c,l,d,f,_,g){this.dk=t,this.fk=i,this.CT=e,this.RUt=s,this.QUt=n,this.YUt=r,this.VUt=h,this.HUt=o,this.XUt=a,this.KUt=u,this.mUt=c,this.yUt=l,this.TUt=d,this.$Ut=f,this.tQt=_,this.eQt=g}},RZ=class{get id(){return this.CT}get uri(){return this.Wbt}constructor(t,i){this.CT=t,this.Wbt=i}},UZ=class{get sQt(){return this.nQt}get rQt(){return this.hQt}get oQt(){return this.aQt}get uQt(){return this.cQt}constructor(t,i,e,s){this.nQt=t,this.hQt=i,this.aQt=e,this.cQt=s}},QZ=class extends oc{get hUt(){return this.oUt}get lQt(){return this.dQt}get fQt(){return this._Qt}get tUt(){return this.iUt}get gQt(){return this.wQt}get AQt(){return this.vQt}get lt(){return this.Bz}qRt(){return void 0===this.dQt?[]:(null!=this.XRt||(this.XRt=this.dQt.qRt().map((t=>this.mQt(t)))),this.XRt)}mQt(t){let i,e,s;for(const t of this.tUt)t.uUt&&(i=t.uUt),t.cUt&&(e=t.cUt),t.lUt&&(s=t.lUt);const n=t.hUt.concat(this.hUt);let r=t.uUt;if(i&&t.uUt){const e=new UZ(t.uUt.pQt.sQt,t.uUt.pQt.rQt,t.uUt.pQt.oQt.concat(i.pQt.oQt),t.uUt.pQt.uQt.concat(i.pQt.uQt));r=t.uUt,r.pQt=e,r.wUt=r.wUt.concat(i.wUt)}let h=t.dUt;if(e&&e._Ut){var o,a;const s=[];for(const t of e._Ut)s.concat(t.NUt.oQt);const n=[];var u,c;for(const e of null!=(u=null==(o=t.dUt)?void 0:o._Ut)?u:[]){var l,d,f;const r=new UZ(e.NUt.sQt,e.NUt.rQt,e.NUt.oQt.concat(s),(null!=(d=null==(l=t.uUt)?void 0:l.pQt.uQt)?d:[]).concat(null!=(f=null==i?void 0:i.pQt.uQt)?f:[]));n.push(new zZ(e.vUt,e.pUt,e.MUt,r,e.SUt,e.eUt))}h=new bc(n,(null!=(c=null==(a=t.dUt)?void 0:a.wUt)?c:[]).concat(e.wUt))}let _=t.lUt;if(_){var g;let i=_.OUt;var w,A;s&&s.OUt&&(i=s.OUt),_=new PZ(i,(null!=(w=null==(g=t.lUt)?void 0:g.zUt)?w:[]).concat(null!=(A=null==s?void 0:s.zUt)?A:[]))}let v=t.lt;return this.lt&&(v=this.lt),{hUt:n,uUt:r,dUt:h,lUt:_,lt:v,fUt:t.fUt}}constructor(t,i,e,s,n,r,h,o,a){super(t,i),this.oUt=e,this.dQt=s,this._Qt=n,this.iUt=r,this.wQt=h,this.vQt=o,this.Bz=a}},FZ=class{get o(){return this.CT}get yQt(){return this.MQt}get TQt(){return this.NQt}get WUt(){return this.HUt}get uUt(){return this.DQt}get cUt(){return this.IQt}get lUt(){return this.SQt}get universalAdIds(){return this.EQt}constructor(t,i,e,s,n,r,h,o){this.CT=t,this.MQt=i,this.NQt=e,this.HUt=s,this.DQt=n,this.IQt=r,this.SQt=h,this.EQt=o}},YZ=class{get ct(){return this.bQt}get LQt(){return this.kQt}get wUt(){return this.AUt}set wUt(t){this.AUt=t}set pQt(t){this.CQt=t}get pQt(){return this.CQt}get xQt(){return this.OQt}set xQt(t){this.OQt=t}get jQt(){return this.LUt}get Xl(){return this.IUt}set Xl(t){this.IUt=t}get SUt(){return this.EUt}get eUt(){return this.sUt}kUt(){this.LUt=!0}constructor(t,i,e,s,n,r,h){this.bQt=t,this.kQt=i,this.AUt=e,this.CQt=s,this.OQt=n,this.LUt=!1,this.EUt=r,this.sUt=h}};function Sn(t,i){return WZ(t)&&t.getAttribute(i)||void 0}function GZ(t,i){return VZ(t,i,void 0,!1)}function VZ(t,i,e,s){return i===(t.localName?t.localName:t.nodeName)&&(s&&e?e===t.namespaceURI:!e||!t.namespaceURI||e===t.namespaceURI)}function hh(t,i){const e=[];for(let s=0;s<t.childNodes.length;s+=1){const n=t.childNodes.item(s);WZ(n)&&GZ(n,i)&&e.push(n)}return e}function WZ(t){return t&&1===t.nodeType}function HZ(t,i){const e=(new DOMParser).parseFromString(t,i);if(!e||e.getElementsByTagName("parsererror").length>0)throw new g('Invalid document for MIME type "'+i+'"');return e}function qZ(t){return t.replace(/[<>&'"]/g,(t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}}))}function XZ(t){return"data:application/xml,"+encodeURIComponent(t)}function ZZ(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}!function(t){t.zQt="mute",t.PQt="unmute",t.Sh="pause",t.BQt="resume",t.RQt="rewind",t.UQt="skip",t.QQt="playerExpand",t.FQt="playerCollapse",t.Ah="fullscreen",t.YQt="exitFullscreen",t.GQt="expand",t.COLLAPSE="collapse",t.Qyt="start",t.VQt="firstQuartile",t.WQt="thirdQuartile",t.HQt="midpoint",t.qQt="complete",t.XQt="acceptInvitationLinear",t.ZQt="acceptInvitation",t.KQt="timeSpentViewing",t.JQt="otherAdInteraction",t.gw="progress",t.$Qt="creativeView",t.tFt="adExpand",t.iFt="adCollapse",t.eFt="minimize",t.sFt="close",t.nFt="closeLinear",t.rFt="overlayViewDuration",t.hFt="breakStart",t.oFt="breakEnd",t.ha="error"}(gs||(gs={}));var KZ=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function JZ(t){return void 0!==t&&-1!==KZ.indexOf(t)}var $Z=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function tK(t){return void 0!==t&&-1!==$Z.indexOf(t)}var iK=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function eK(t){return void 0!==t&&-1!==iK.indexOf(t)}function sK(t,i){if(void 0===t||""===t||void 0===i)return;let e=t.match(/^(\d+):(\d+):(\d+)$/);return e?C(e[1]||"0")+60*C(e[2]||"0")+C(e[3]||"0"):(e=t.match(/^(100|[1-9]\d|\d)%$/),e?C(e[1]||"0")*i/100:void 0)}var Zo,ht,nK=class{get IU(){return this.aFt}get Ku(){return this.uFt}get eventURL(){return this.cFt}constructor(t,i,e){this.aFt=t,this.uFt=i,this.cFt=e}},rK=class{get lFt(){return this.dFt}constructor(t){this.dFt=t}},hK=class extends rK{get sQt(){return this.nQt}get iQt(){return this.eQt}get fFt(){return this._Ft}constructor(t,i,e,s){super(t),this._Ft=i,this.nQt=e,this.eQt=s}},oK=class extends rK{constructor(t){super(t)}},aK=class extends rK{constructor(t){super(t)}},Si={gFt:{Kb:100,Ob:"XML parsing error."},wFt:{Kb:303,Ob:"Empty or invalid VAST error."},AFt:{Kb:400,Ob:"General linear error"},vFt:{Kb:403,Ob:"Unsupported MIME-type or missing mediafiles error"},mFt:{Kb:500,Ob:"General nonlinear error"},JR:{Kb:900,Ob:"Network error"}},ch=class{get pFt(){return this.yFt}MFt(t){if(!this.pFt)return;const i=this.pFt.replace(/\[ERRORCODE]/,""+t.Kb);EZ(i)}constructor(t){this.yFt=t}},Al=class extends hs{get TFt(){return this.NFt}get DFt(){var t;return null!=(t=this.IFt)?t:900}constructor(t,i,e,s){super(e||i&&uK[i]||t,s),this.NFt=t,this.IFt=i,this.SFt=e}};!function(t){t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general"}(Zo||(Zo={})),function(t){t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED"}(ht||(ht={}));var uK={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};function cK(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case ii.CA:case ii.xA:case ii.kA:return!0;default:return!1}}function lK(t){const i=en();return!!(cK(t)||t&&i&&(null==i?void 0:i.canPlayType)&&i.canPlayType(t))||(fK("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function dK(t,i){for(const e of i){new ch(e).MFt(t)}}function fK(t){0}var _K,gK=class{get EFt(){return this.bFt}get LFt(){return this.kFt}constructor(t,i){this.bFt=t,this.kFt=i}};!function(t){t.CFt="linear",t.xFt="nonlinear",t.OFt="companion",t.jFt="vmap"}(_K||(_K={}));var vc,wK=class t{async zFt(i,e){if(kZ(i.sources,i.timeOffset)){const s=await t.PFt(i.sources.src,e),n=s&&s.documentElement;if(!n)throw new Al(Zo.NETWORK,ht.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(GZ(n,"VMAP"))return await this.BFt(n,i,e);if(GZ(n,"VAST")){const t=await this.RFt(n,e,!1);if(t){const e=new pK("",!0,!0,t);return[new nh("start",e,vc.CFt,"",[],!1,!0,i)]}return[]}throw new Al(Zo.GENERAL,ht.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if(CZ(i.sources,i.timeOffset))return[new mK(String(i.timeOffset),i,e)];throw new Al(Zo.GENERAL,ht.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async UFt(i,e,s,n){let r;void 0===n&&(n=[]);try{r=await t.PFt(i,e)}catch(t){throw dK(t instanceof Al&&t.DFt===ht.VAST_MALFORMED_RESPONSE?Si.wFt:Si.JR,n),t}const h=r&&r.documentElement;if(h&&GZ(h,"VAST"))return await this.RFt(h,e,s,n)}async QFt(t,i,e,s){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new Al(Zo.GENERAL,ht.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.UFt(t.sources.src,s,!1),h=new pK("",!0,!0,r),o=new nh(i,h,vc.CFt,"",[],!1,!0,t);return o.FFt=e,o}static async requestSuccessOnly(t,i){let e;try{e=await i.SI(t)}catch(t){throw new Al(Zo.NETWORK,ht.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!mr(e))throw new Al(Zo.NETWORK,ht.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return e}static async PFt(t,i){const e=new zu({zu:t,fS:Qv.Ru,dS:Ys.GET}),s=await this.requestSuccessOnly(e,i);try{return function(t){return HZ(t,"text/xml")}(await s.zm())}catch(t){throw new Al(Zo.NETWORK,ht.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async RFt(t,i,e,s){void 0===s&&(s=[]);const n=[],r=[],h=[];if(t&&GZ(t,"VAST")){if(0!==hh(t,"Ad").length){for(const e of hh(t,"Ad"))try{const t=await this.YFt(e,i,s);0===t.yM?n.push(t):r.push(t)}catch(t){h.push(t)}if(0===n.length&&0===r.length&&h.length>0)throw h[0];return 1===n.length&&0===r.length?n[0]:0===n.length&&0!==r.length?new OZ(r):n.length>0||r.length>0?new OZ(r.concat(n)):void 0}if(0!==hh(t,"Error").length){for(const i of hh(t,"Error")){fK(Si.gFt.Ob);const t=i.textContent;t&&s.push(t),dK(Si.gFt,s)}throw new Al(Zo.GENERAL,ht.VAST_MALFORMED_RESPONSE,"The Ad Server responded with a VAST Error")}if(e)throw dK(Si.wFt,s),new Al(Zo.PARSING,ht.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.")}else if(e)throw dK(Si.wFt,s),new Al(Zo.PARSING,ht.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.")}async BFt(t,e,s){const n=[],r=hh(t,"AdBreak");for(const t of r)try{const i=await this.GFt(t,e,s);i&&n.push(i)}catch(t){i.oit(t)}return n}async YFt(i,e,s){const n=Sn(i,"id")||"";let r=aa(Sn(i,"sequence"));r||(r=0);const h=hh(i,"InLine"),o=hh(i,"Wrapper");if(0!==o.length)return await this.VFt(o[0],n,r,e,s);if(0!==h.length)return t.WFt(h[0],n,r,s);throw new Al(Zo.PARSING,ht.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static WFt(i,e,s,n){const r=hh(i,"Error")[0];let h;r&&r.textContent&&(h=r.textContent,n.push(h));const o=hh(i,"AdSystem")[0];let a,u="";o&&(u=o.textContent||u);const c=hh(i,"AdTitle")[0];c&&(a=c.textContent||void 0);const l=[];for(const t of hh(i,"Impression"))t.textContent&&l.push(t.textContent);const d=t.HFt(hh(i,"Creatives")[0],u,n);return new jZ(e,s,u,a,l,d,new ch(h))}async VFt(i,e,s,n,r){const h=hh(i,"Error")[0];let o="";h&&h.textContent&&(o=h.textContent,r.push(o));const a=hh(i,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of hh(i,"Impression"))t.textContent&&c.push(t.textContent);const l=hh(i,"VASTAdTagURI")[0];let d="";l&&l.textContent&&(d=l.textContent);const f=await this.UFt(d,n,!0,r),_=hh(i,"Creatives")[0];let g=[];_&&(g=t.qFt(_,u,r));let w=aY(Sn(i,"followAdditionalWrappers"));w||(w=!0);let A=aY(Sn(i,"allowMultipleAds"));A||(A=!0);let v=aY(Sn(i,"fallbackOnNoAd"));return v||(v=!1),new QZ(e,s,c,f,w,g,A,v,new ch(o))}static qFt(i,e,s){const n=[];for(const r of hh(i,"Creative")){let i=Sn(r,"id");i||(i="");let h=aa(Sn(r,"sequence"));h||(h=0);let o=Sn(r,"adId");o||(o="");const a=hh(r,"Linear")[0];let u;a&&(u=t.XFt(a,"wrapper",i,e,s));const c=hh(r,"NonLinearAds")[0];let l,d;if(c)try{d=t.ZFt(c,i,e),l=d}catch(t){}const f=hh(r,"CompanionAds")[0];let _;f&&(_=t.KFt(f)),n.push(new FZ(i,o,h,"",u,l,_,[]))}return n}static HFt(i,e,s){const n=[];for(const r of hh(i,"Creative")){let i=Sn(r,"id");i||(i="");let h=aa(Sn(r,"sequence"));h||(h=0);let o=Sn(r,"adId");o||(o="");let a=Sn(r,"apiFramework");a||(a="");const u=hh(r,"Linear")[0];let c;if(u)try{c=t.XFt(u,"inline",i,e,s)}catch(t){}const l=hh(r,"NonLinearAds")[0];let d,f;if(l)try{f=t.ZFt(l,i,e),d=f}catch(t){}const _=hh(r,"CompanionAds")[0];let g;_&&(g=t.KFt(_));const w=hh(r,"UniversalAdId"),A=t.parseUniversalAdIds(w);n.push(new FZ(i,o,h,a,c,d,g,A))}return n}static XFt(i,e,s,n,r){const h=hh(i,"Duration")[0];let o=0;if(h)o=LZ(h.textContent)||0;else if(!h&&"inline"===e)throw new Al(Zo.PARSING,ht.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const a=Sn(i,"skipoffset");let u=-1;if(a){let t=LZ(a);if(void 0===t&&a.indexOf("%")>-1){const i=_.abs(Number(a.replace(/(?![0-9])./g,"")))/100;S(i)||(t=o*i)}void 0!==t&&(u=t)}const c=hh(i,"MediaFiles")[0];let l=[];if(c&&(l=function(t,i){const e=[];for(const s of hh(t,"MediaFile")){const t=Sn(s,"delivery"),n=Sn(s,"type");if(!n){fK();continue}if(!i(n))continue;let r=aa(Sn(s,"width")),h=aa(Sn(s,"height"));r||(fK(),r=0),h||(fK(),h=0);const o={delivery:t,type:n,width:r,height:h,contentURL:""+s.textContent};e.push(o)}return e}(c,lK)),"inline"===e&&(!c||0===l.length))throw dK(Si.vFt,r),new Al(Zo.PARSING,ht.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const d=hh(i,"TrackingEvents")[0];let f=[];d&&(f=t.JFt(d,JZ,"linear"));const g=hh(i,"VideoClicks")[0],w=t.$Ft(g);return new YZ(o,l,f,w,u,s,n)}static $Ft(i){if(!i)return new UZ("","",[],[]);const e=hh(i,"ClickThrough")[0];let s,n="";e&&(s=e.textContent||void 0,n=Sn(e,"id")||"");const r=t.tYt(hh(i,"ClickTracking")),h=t.tYt(hh(i,"CustomClick"));return new UZ(s,n,r,h)}static tYt(t){const i=[];for(const e of t){const t=e.textContent;if(!t)continue;const s=Sn(e,"id")||"";i.push(new RZ(s,t))}return i}static JFt(t,i,e){const s=[];for(const n of hh(t,"Tracking")){const r=Sn(n,"event");if(!i(r)){fK();continue}let h="";"linear"===e&&(h=Sn(t,"offset")||"0");const o=n.textContent;o&&s.push(new nK(r,h,o))}return s}static ZFt(i,e,s){const n=[];for(const r of hh(i,"NonLinear")){const i=hh(r,"NonLinearClickThrough")[0];let h;i&&(h=i.textContent||void 0);const o=t.tYt(hh(r,"NonLinearClickTracking")),a=hh(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=Sn(a,"creativeType"),i=a.textContent||"",e=hh(a.parentNode,"NonLinearClickThrough")[0];let s="";e&&(s=e.textContent||""),u=new hK(i,t,s,"")}const c=t.iYt(r),l=t.parseHtmlResource(r);if(!u&&!c&&!l){fK();continue}const d=new UZ(h,"",o,[]);n.push(new zZ(u,c,l,d,e,s))}if(0===n.length)throw new Al(Zo.PARSING,ht.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=hh(i,"TrackingEvents")[0];let h=[];return r&&(h=t.JFt(r,tK,"nonlinear")),new bc(n,h)}static parseUniversalAdIds(t){const i=[];for(const r of t){var e;const t=null!=(e=Sn(r,"idRegistry"))?e:"";var s,n;const h=null!=(n=null!=(s=Sn(r,"idValue"))?s:r.textContent)?n:"";i.push(new gK(t,h))}return i}static KFt(i){let e=Sn(i,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(e)||(e=xZ.FP);const s=[];for(const e of hh(i,"Companion")){let i=aa(Sn(e,"width")),n=aa(Sn(e,"height")),r=Sn(e,"id"),h=aa(Sn(e,"assetWidth")),o=aa(Sn(e,"assetHeight")),a=aa(Sn(e,"expandedWidth")),u=aa(Sn(e,"rxpandedHeight")),c=Sn(e,"apiFramework"),l=Sn(e,"adSlotId"),d=aa(Sn(e,"pxratio"));const f=hh(e,"AltText")[0];let _=f?f.textContent:"";i||(fK(),i=0),n||(fK(),n=0),r||(r=""),h||(h=0),o||(o=0),a||(a=0),u||(u=0),c||(c=""),l||(l=""),d||(d=1),_||(_="");const g=t.eYt(e),w=t.iYt(e),A=t.parseHtmlResource(e),v=hh(e,"TrackingEvents")[0];let m=[];v&&(m=t.JFt(v,eK,"companion"));const p=hh(e,"CompanionClickThrough")[0];let y;p&&(y=p.textContent||void 0);const M=t.tYt(hh(e,"CompanionClickTracking"));(g||w||A)&&s.push(new BZ(i,n,r,h,o,a,u,c,l,d,g,w,A,new UZ(y,"",M,[]),m,_))}return new PZ(e,s)}static eYt(t){const i=hh(t,"StaticResource")[0];let e;if(i&&i.parentNode){let t=Sn(i,"creativeType");t||(t="");const s=i.textContent,n=hh(i.parentNode,"AltText")[0],r=hh(i.parentNode,"CompanionClickThrough")[0];let h,o="";n&&(o=n.textContent||""),r&&(h=r.textContent||void 0),s&&(e=new hK(s,t,h,o))}return e}static iYt(t){const i=hh(t,"IFrameResource")[0];let e;if(i){const t=i.textContent||"";e=new oK(t)}return e}static parseHtmlResource(t){const i=hh(t,"HTMLResource")[0];let e;if(i){const t=i.textContent||"";e=new aK(t)}return e}async GFt(i,e,s){const n=Sn(i,"timeOffset")||"0",r=Sn(i,"breakType")||vc.rT;let h=Sn(i,"breakId"),o=aY(Sn(i,"repeatAfter"));if(void 0===h&&(h=""),void 0===o&&(o=!1),!(void 0!==Ji.sYt(n)))throw new Al(Zo.PARSING,ht.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=hh(i,"AdSource")[0],u=hh(i,"TrackingEvents")[0];let c=[];u&&(c=t.JFt(u,ZZ,"vmap"));let l=Sn(a,"id");l||(l="");let d=aY(Sn(a,"allowMultipleAds"));void 0===d&&(d=!0);let f=aY(Sn(a,"followRedirects"));f||(f=!0);const _=hh(a,"AdTagURI")[0];let g="";const w=hh(a,"VASTAdData")[0];if(!_||!_.textContent){if(w){if(w.firstElementChild&&VZ(w.firstElementChild,"VAST")){const t=await this.RFt(w.firstElementChild,s,!1);if(t){const i=new pK(l,d,f,t);return new nh(n,i,r,h,c,o,!1,e)}return}throw new Al(Zo.PARSING,ht.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new Al(Zo.PARSING,ht.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{g=_.textContent;const t=Oi(e);return t.sources.src=g,new mK(n,t,s)}catch(t){return}}};!function(t){t.rT="",t.CFt="linear",t.nYt="nonlinear",t.rYt="display"}(vc||(vc={}));var AK,Ji=class{static hYt(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static oYt(t){}static aYt(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static uYt(t){const i=t.split(":");let e=0;return e+=3600*Number(i[0]),e+=60*Number(i[1]),e+=Number(i[2]),e}static cYt(t){if(t<=0)return"00:00:00.000";const i=_.floor(t),e=t-i;return this.lYt(i/3600,2)+":"+this.lYt(i/60%60,2)+":"+this.lYt(i%60,2)+"."+this.lYt(1e3*e,3)}static lYt(t,i){return("00"+_.floor(t)).slice(-i)}static dYt(t,i){const e=this.sYt(t);if(0===e)switch(t){case"start":return 0;case"end":return-1}else{if(2===e)return rc(t)*i;if(1===e)return LZ(t);if(3===e)return this.aYt(t);if(4===e){const i=Number(t);if(!S(i)&&i>=-1)return i}}}static sYt(t){return"start"===t||"end"===t?0:void 0!==LZ(t.toString())?1:void 0!==rc(t.toString())?2:void 0!==this.oYt(t.toString())?3:S(Number(t))?void 0:4}};!function(t){t[t.f6=0]="f6",t[t.fYt=1]="fYt",t[t._Yt=2]="_Yt",t[t.gYt=3]="gYt",t[t.wYt=4]="wYt"}(AK||(AK={}));var vK,nh=class{get AYt(){return this.vYt.integration}get mYt(){return this.pYt}get nbt(){return this.yYt}get xQt(){return this.OQt}set xQt(t){this.OQt=t}get wUt(){return this.tQt}get MYt(){return this.TYt}get NYt(){return this.DYt}get att(){return this.vYt}get IYt(){return this.FFt.Kl}get W(){return!0}$n(){return Promise.resolve()}get FFt(){return this.SYt}set FFt(t){this.SYt=t}constructor(t,i,e,s,n,r,h,o){this.OQt=-1,this.pYt=i,this.yYt=t,this.EYt=e,this.TYt=s,this.DYt=r,this.tQt=n,this.bYt=h,this.vYt=o}},mK=class{get AYt(){return this.IUt.AYt}get mYt(){return this.IUt.mYt}get nbt(){return this.IUt.nbt}get xQt(){return this.IUt.xQt}set xQt(t){this.IUt.xQt=t}get wUt(){return this.IUt.wUt}get MYt(){return this.IUt.MYt}get NYt(){return this.IUt.NYt}get att(){return this.IUt.att}get IYt(){return this.IUt.IYt}get W(){return this.wit}$n(){var t;return null!=(t=this.LYt)?t:this.LYt=this.mit()}async mit(){const t=new wK;this.IUt=await t.QFt(this.att,this.nbt,this.FFt,this.NS),this.wit=!0}get FFt(){return this.IUt.FFt}set FFt(t){this.IUt.FFt=t}constructor(t,i,e){this.wit=!1,this.NS=e,this.IUt=new nh(t,void 0,"","",[],!1,!1,i)}},pK=class{get o(){return this.CT}get gQt(){return this.kYt}get CYt(){return this.xYt}get HRt(){return this.OYt}constructor(t,i,e,s){this.CT=t,this.kYt=i,this.OYt=s,this.xYt=e}};function yK(t,i){let e;if(t.vastAdsRequest&&(e=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return XZ(t.adsResponse);return}(t.vastAdsRequest)),!e){const i=function(t){const i=t.contentUrl||t.contentId;if(!i)return;const e=t.contentType||"video/mp4",s=Hg(e)||Ra(t.contentType)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+Ji.cYt(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+Ji.cYt(t.whenSkippable)+'"':"",h='<MediaFile delivery="'+s+'" type="'+e+'">'+qZ(i)+"</MediaFile>",o=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+qZ(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+h+"</MediaFiles>"+o+"</Linear>",u=t.title?"<AdTitle>"+qZ(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);i&&(e=XZ(i))}const s=t.customData;if(e){const n={integration:null==s?void 0:s.integration,sources:{src:e,type:"vast"},timeOffset:i};return n.integration&&"csai"!==n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}!function(t){t.jYt="error",t.zYt="sourceupdate"}(vK||(vK={}));var MK=class extends wn{constructor(t){super("error"),this.lt=t}},TK=class extends wn{constructor(t,i){super("sourceupdate"),this.bt=t,this.yc=i}},NK=class extends xd{get Pp(){return this.PYt}BYt(t){this.RYt.BYt(t)}UYt(t){this.RYt.UYt(t)}QYt(t){this.RYt.QYt(t)}FYt(t){this.RYt.FYt(t)}YYt(t){this.PYt.addUpdateListener(t)}GYt(t){this.PYt.removeUpdateListener(t)}VYt(){const t=new Rs,i=new chrome.cast.media.GetStatusRequest;return this.PYt.getStatus(i,(()=>{t.Wb({bt:this.yf(),yc:this.Wa()})}),(i=>t.qb(i))),t.Zb}yf(){var t;return null==(t=this.PYt.customData)?void 0:t.currentSource}Wa(){var t;let i;if(null==(t=this.HYt.WYt())?void 0:t.version){var e;i=null==(e=this.PYt.customData)?void 0:e.sourceDescription}else{var s;const t=null==(s=IZ(this.PYt))?void 0:s.customData;(function(t){return $l(t)&&t.theoplayer_version>=1&&Yt(t.streamStart)&&Yt(t.isLive)&&Yt(t.sourceDescription)})(t)&&(i=t.sourceDescription),i||(i=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:DK(t)}}(this.PYt.media))}return i}m_(){const t=new chrome.cast.media.PauseRequest;this.PYt.pause(t,qt,this.qYt)}y_(){const t=new chrome.cast.media.StopRequest;this.PYt.stop(t,qt,this.qYt)}p_(){const t=new chrome.cast.media.PlayRequest;this.PYt.play(t,qt,this.qYt)}Sm(t,i){const e=new chrome.cast.media.SeekRequest;return e.currentTime=t,e.resumeState=i?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise(((t,i)=>{this.PYt.seek(e,t,(t=>{var e;i(new ma(DZ(t.code),null!=(e=t.description)?e:void 0))}))}))}Wf(t){this.RYt.W8(cr,function(t){return{type:nu.WRt,properties:{playbackRate:t}}}(t)).catch(this.XYt)}ZYt(t){const i=new chrome.cast.media.EditTracksInfoRequest(t);this.PYt.editTracksInfo(i,qt,this.qYt)}KYt(){return this.PYt.getEstimatedTime()}JYt(){return this.PYt.getEstimatedBreakClipTime()}$Yt(){return this.PYt.getEstimatedBreakTime()}tGt(){this.RYt.W8("urn:x-cast:com.google.cast.media",{type:SZ.SKIP_AD,requestId:this.iGt++,mediaSessionId:this.PYt.mediaSessionId}).catch(this.XYt)}gn(){this.Vo()}constructor(t,i,e){super(i),this.iGt=0,this.XYt=t=>{this.Co(new MK(t))},this.qYt=t=>{var i;const e=new ma(DZ(t.code),null!=(i=t.description)?i:void 0);this.XYt(e)},this.HYt=t,this.RYt=i,this.PYt=e}};function DK(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?rs(t.breaks,(i=>function(t,i){const e=[];if(t.isWatched)return e;for(const s of t.breakClipIds){const n=Po(i,(t=>t.id===s));if(n){const i=yK(n,t.position);i&&e.push(i)}}return e}(i,t.breakClips))):[]}var Za,IK=class{eGt(t,i){this.HYt.addMessageListener(t,i)}sGt(t,i){this.HYt.removeMessageListener(t,i)}W8(t,i){return new Promise(((e,s)=>{this.HYt.sendMessage(t,i,e,(t=>{var i;s(new ma(DZ(t.code),null!=(i=t.description)?i:void 0))}))}))}gn(){}constructor(t){this.HYt=t}};function SK(t){return"vmap"===t||"adrule"===t}function gc(t){if(t)return Qs(t)&&""!==t?{src:gi(t),type:void 0}:function(t){return $l(t)&&Boolean(t.src)}(t)&&""!==t.src?{src:gi(t.src),type:EK(t.type)}:void 0}function EK(t){if(Qs(t)){const i=t.toLowerCase();switch(i){case"vast":case"vmap":case"adrule":return i;default:return void cs("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||cs("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function ah(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return bZ.test(t)}(t))return Ji.uYt(t);if(bK(t))return t}return Number(t)>=0?Number(t):void 0}}function bK(t){return new RegExp(/^\d{1,2}%$/).test(t)}function LK(t){const i=[],e=(t,s)=>{if(Gt(s))for(let i=0,n=s.length;i<n;i++){const n=$l(s[i])&&s[i]?String(i):"";e(t+"["+encodeURIComponent(n)+"]",s[i])}else if($l(s))for(const i of w.keys(s))e(t+"["+encodeURIComponent(i)+"]",s[i]);else((t,e)=>{i.push(t+"="+encodeURIComponent(null!=e?e:""))})(t,String(s))};for(const i of w.keys(t))e(encodeURIComponent(i),t[i]);return i.join("&")}!function(t){t.GRt="receiver_info",t.XEt="event",t.nGt="propertychange",t.VRt="trackevent"}(Za||(Za={}));var ot,kK=class{rGt(t){let i;try{i=JSON.parse(t)}catch(t){0}return i}BYt(t){this.hGt.push(t)}UYt(t){To(this.hGt,t)}QYt(t){this.oGt.push(t)}FYt(t){To(this.oGt,t)}aGt(t){this.uGt=t}W8(t,i){return this.cGt.W8(t,i)}gn(){this.cGt.sGt(cr,this.lGt),No(this.oGt),No(this.hGt),this.uGt=void 0}constructor(t){this.hGt=[],this.oGt=[],this.lGt=(t,i)=>{const e=this.rGt(i);if(e)if(e.type===Za.nGt)for(const t of this.hGt)for(const i of w.keys(e.properties))t(i,e.properties[i]);else if(e.type===Za.XEt)for(const t of this.oGt)t(e.event);else e.type===Za.VRt&&this.uGt&&e.event.trackState&&this.uGt(e.event.trackId,e.event.trackState.targetQualityIds)},this.cGt=t,this.cGt.eGt(cr,this.lGt)}};!function(t){t.dGt="medialoadedchange",t.Ew="volumechange",t.jYt="casterror",t.fGt="playererror",t._Gt="targetqualitychanged",t.gGt="receiverinfochanged"}(ot||(ot={}));var CK,xK=class extends wn{constructor(){super("medialoadedchange")}},OK=class extends wn{constructor(t,i){super("volumechange"),this.c_=t,this.Pf=i}},jK=class extends wn{constructor(t){super("casterror"),this.lt=t}},zK=class extends wn{constructor(t){super("playererror"),this.lt=t}},PK=class extends wn{constructor(t,i){super("targetqualitychanged"),this.Qp=t,this.wGt=i}},BK=class extends wn{constructor(){super("receiverinfochanged")}},RK=class extends xd{AGt(t,i,e){this.RYt.W8(cr,function(t,i,e){return{type:nu.VRt,trackID:t,trackType:i,properties:{targetQuality:e}}}(t,i,e)).catch(this.XYt)}vGt(){this.cGt.eGt(cr,this.mGt),this.RYt.W8(cr,{type:nu.GRt}).catch(qt)}WYt(){return this.pGt}yGt(){return this.HYt.getSessionObj()}MGt(t){!this.TGt&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this.TGt=new NK(this,this.RYt,t),this.NGt(),this.Co(new xK),this.TGt.YYt(this.DGt))}IGt(){return this.TGt}async SGt(t){const i=function(t){const i=function(t,i,e,s){const n=mD(t)||"",r=AD(t)||"",h=new chrome.cast.media.MediaInfo(n,r);return h.metadata=NZ(t.metadata,t.poster),h.streamType=s,function(t,i,e){const s=[],n=[];let r,h=0,o=0;for(const t of i){const i=gc(t.sources);if(i)if(kZ(i,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=i.src;else if(CZ(i,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const l=null!=(u=Ji.dYt(r,e))?u:0,d=void 0!==c?Ji.dYt(c,e):void 0,f=new chrome.cast.media.BreakClip("bc"+o++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=i.src,f.whenSkippable=d,f.customData={integration:t.integration};let _=Po(n,(t=>t.position===l));void 0===_&&(_=new chrome.cast.media.Break("b"+h++,[],l),n.push(_)),_.breakClipIds.push(f.id),s.push(f)}else 0;else 0}t.breakClips=s,t.breaks=n,t.vmapAdsRequest=r}(h,i,e),h}(t.EGt,t.Oc,t.ct,t.uZ),e=new chrome.cast.media.LoadRequest(i);return e.autoplay=!0,e.currentTime=t.Mf,e.customData=t.bGt,e}(t);let e;try{e=await this.HYt.loadMedia(i)}catch(t){e=t}if(e)throw new ma(DZ(e))}Rf(t){this.yGt().setReceiverMuted(t,qt,this.LGt)}d_(t){this.yGt().setReceiverVolumeLevel(t,qt,this.LGt)}kGt(){return this.yGt().receiver.friendlyName}gn(){this.Vo(),this.HYt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.CGt),this.yGt().removeUpdateListener(this.NGt),this.cGt.sGt(cr,this.mGt),this.RYt.gn(),this.cGt.gn()}constructor(t){super(),this.pGt=void 0,this.XYt=t=>{this.Co(new jK(t))},this.xGt=(t,i)=>{"error"===t&&this.Co(new zK(i))},this.OGt=(t,i)=>{this.Co(new PK(t,i))},this.mGt=(t,i)=>{const e=JSON.parse(i);e.type===Za.GRt&&(this.pGt=e.info,this.Co(new BK))},this.NGt=()=>{const t=this.yGt(),{level:i,muted:e}=t.receiver.volume;this.Co(new OK(null!=i?i:void 0,null!=e?e:void 0))},this.CGt=()=>this.MGt(this.HYt.getMediaSession()),this.DGt=t=>{var i;t||(null==(i=this.TGt)||i.GYt(this.DGt),this.TGt=void 0,this.Co(new xK))},this.LGt=t=>{var i;const e=new ma(DZ(t.code),null!=(i=t.description)?i:void 0);this.XYt(e)},this.HYt=t,this.HYt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.CGt),this.cGt=new IK(t.getSessionObj()),this.RYt=new kK(this.cGt),this.RYt.BYt(this.xGt),this.RYt.aGt(this.OGt),this.yGt().addUpdateListener(this.NGt),this.NGt(),this.vGt();const i=this.HYt.getMediaSession();i&&this.MGt(i)}};(CK||(CK={})).jGt="statechange";var $c,UK=class extends wn{constructor(t){super("statechange"),this.ult=t}},QK=class extends xd{D7(){return this.Ic}Af(){return Ai.SB()}Tf(){return this.EB+this.zGt}f7(){return this.Tf()}mf(){}Td(){return this.VL}Sf(){return this.y0}Ef(){}Yf(){return this.kB}PGt(){}Vf(){return this.CB}Wf(t){this.CB!==t&&(this.CB=t,this.Co(new ls(this.Qo.Mf,t)))}$f(){return ae.aT}qf(){return Ai.SB()}i_(){return Ai.SB()}s_(){return!1}df(){return this.dT}o_(){return this._T}n_(){return this.Dl}ZYt(t){}u_(){return this.BGt}h_(){return this.RGt}p_(){this.kB=!1}m_(){this.kB=!0}Sm(t){this.EB=t-this.zGt}UGt(){return this.zGt}QGt(t){this.zGt=t}ntt(t){this.Ic.ntt(t)}y_(){}gn(){this.Vo(),this.dT.gn(),this._T.gn(),this.Dl.gn(),this.Ic.gn()}constructor(t,i,e,s,n,r,h,o,a){super(),this.Qo=t,this.zGt=0,this.dT=new Ae,this._T=new Ae,this.Dl=new _i,this.Ic=new Sh,this.zGt=i,this.EB=e-i,this.VL=s,this.y0=n,this.kB=r,this.CB=h,this.BGt=o,this.RGt=a}};!function(t){t.FGt="ccmodechangerequest",t.YGt="cctargetqualitychangerequest",t.GGt="cctrackchangerequest"}($c||($c={}));var FK,ou,YK=class extends wn{constructor(t,i,e){super($c.FGt),this.track=t,this.trackId=i,this.mode=e}};function GK(t){return"AUDIO"===t.type}function VK(t){return"VIDEO"===t.type}function WK(t){return"TEXT"===t.type}!function(t){t.Ru="TEXT",t.ym="AUDIO",t.pm="VIDEO"}(FK||(FK={})),function(t){t.Mm="SUBTITLES",t.yI="CAPTIONS",t.MI="DESCRIPTIONS",t.Fn="CHAPTERS",t.Nm="METADATA"}(ou||(ou={}));var HK=class extends xd{get va(){return this.Xa||(this.Xa=ua(this)),this.Xa}get kh(){return this.OT}set kh(t){t!==this.OT&&(this.OT=t,this.Co(new Gs(this)))}get q(){return this.B0}get L(){return this.R0}get jg(){return this.iR}set jg(t){const i=qs(t);this.iR!==i&&(this.iR=i,this.VGt!==i&&this.Co(new YK(this,this.Mg,i)),this.Co(new no(this)))}get WGt(){return this.VGt}set WGt(t){const i=qs(t),e=this.iR!==i;this.iR=i,this.VGt=i,e&&this.Co(new no(this))}Pg(t){this.jg=t}HGt(t){}gn(){}tr(){}constructor(t){super(),this.Xa=void 0;const i=t.customData;this.Mg=Number(t.trackId)||0,this.o=""+(i&&i.id||this.Mg),this.OT=i&&i.label||t.name||"",this.gs=i&&i.language||t.language||"",this.Og=i&&i.inBandMetadataTrackDispatchType||"",this.zt=i&&i.kind||function(t){switch(t){case ou.Mm:return Mi.Mm;case ou.yI:return Mi.yI;case ou.MI:return Mi.MI;case ou.Fn:return Mi.Fn;case ou.Nm:return Mi.Nm}return}(t.subtype)||"subtitles",this.Jf=Ua.NONE,this.Rg=i&&void 0!==i.type?function(t){return Wg(t)?t:Kc.DEFAULT}(i.type):Kc.WEBVTT,this.P0=[],this.R0=new nr(this.P0),this.W0=[],this.B0=new nr(this.W0),this.iR=qs(i&&i.mode||Ha.Ch),this.VGt=this.iR}};var qK,XK=class extends wn{constructor(t,i){super($c.GGt),this.trackId=t,this.enabled=i}},ZK=class extends wn{constructor(t,i){super($c.YGt),this.track=t,this.targetQuality=i}};!function(t){t.ym="audio",t.pm="video",t.Ru="text"}(qK||(qK={}));var KK,JK=class extends xd{get yg(){return this.wct}get Dg(){return this.gct}set Dg(t){this.qGt(t),this.Co(new ZK(this,t))}get Ng(){return this.IT}get kh(){return this.OT}set kh(t){t!==this.OT&&(this.OT=t,this.Co(new Gs(this)))}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.XGt!==t&&this.Co(new XK(this.Mg,t)),this.Co(new no(this)))}get ZGt(){return this.XGt}set ZGt(t){const i=this.Le!==t;this.Le=t,this.XGt=t,i&&this.Co(new no(this))}get va(){return this.Xa||(this.Xa=Pi(this)),this.Xa}get jg(){return this.Rt?"enabled":"disabled"}zT(t){this.Rt=t}HGt(t){if(t.targetQualityIds){const i=[];for(const e of this.IT.og)t.targetQualityIds.indexOf(e.o)>-1&&i.push(e);const e=i.length?i:void 0;this.qGt(e)}}qGt(t){(function(t,i){return!t&&i||t&&!i||t&&i&&!Ad(t,i)})(this.gct,t)&&(this.gct=t&&this.IT.bT(t)?t:void 0,this.Co(new Xh(this.gct,this)))}unload(){for(const t of this.IT.og)t.fn("update",this.VIt);this.IT.tr()}constructor(t){super(),this.wct=void 0,this.IT=new Tw,this.gct=void 0,this.Xa=void 0,this.VIt=()=>this.Co(new Gs(this));const i=t.customData;if(this.Mg=Number(t.trackId)||0,this.o=""+(i&&i.id||this.Mg),this.OT=i&&i.label||t.name||"",this.gs=i&&i.language||t.language||"",this.zt=i&&i.kind||"main",this.Le=i&&i.enabled,this.XGt=this.Le,GK(t)){this.e$=qK.ym;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new RY(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);i.yn("update",this.VIt),this.IT.ST(i)}}else{this.e$=qK.pm;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new BY(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);i.yn("update",this.VIt),this.IT.ST(i)}}}};!function(t){t.KGt="legacy",t.JGt="caf"}(KK||(KK={}));var $K=class{Mc(){if(this.$Gt>=this.Ic.length)return;const t=this.Ic[this.$Gt];return this.$Gt+=1,t}lt(){return this.Mc()}constructor(t){this.$Gt=0,this.Ic=t}};function tJ(t){var i,e,s;return null!=(s=null==(e=t.mYt)||null==(i=e.HRt)?void 0:i.qRt())?s:[]}var A,iJ=class{},Wh=class{Q7(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{get ads(){return t.Oc.map((t=>t.Q7()))},get integration(){return t.AYt},get maxDuration(){return t.tVt},get maxRemainingDuration(){return t.iVt},get timeOffset(){return t.nbt},get customData(){return t.bGt}}}(this)}constructor(){this.Xa=void 0}},eJ=class{get eVt(){return this.sVt}get t(){return this.Qo}constructor(t,i){this.sVt=t,this.Qo=i}},sJ=class extends Wh{get FFt(){return this.SYt}get Oc(){const t=[];for(const s of this.SYt.nVt)for(const n of tJ(s)){var i,e;const r=null!=(e=null==(i=n.lUt)?void 0:i.zUt)?e:[];if(n.uUt&&t.push(this.rVt(n.uUt,r,n.fUt,s.att)),n.dUt)for(const i of n.dUt._Ut)t.push(this.hVt(i,r,n.dUt,n.fUt,s.att))}return t}rVt(t,i,e,s){const n=Po(this.oVt,(i=>i.uUt===t));if(void 0!==n)return n;const r=new oJ(t,i,this,this.aVt,e,s);return this.oVt.push(r),r}hVt(t,i,e,s,n){const r=Po(this.uVt,(i=>i.dUt===t));if(void 0!==r)return r;const h=new hJ(t,i,e,this,this.aVt,s,n);return this.uVt.push(h),h}get AYt(){return this.SYt.nVt.some((t=>t.AYt===Fr.THEO))?Fr.THEO:Fr.CSAI}get nbt(){const t=this.SYt.Kl;return t>=0?t:this.aVt.t.Td()}get iVt(){let t=0;for(const i of this.SYt.nVt)for(const e of tJ(i))e.uUt&&!e.uUt.jQt&&(t+=e.uUt.ct);return this.aVt&&this.aVt.eVt&&(t+=this.aVt.eVt.ct-this.aVt.eVt.Mf),t}get tVt(){let t=0;for(const i of this.SYt.nVt)for(const e of tJ(i))e.uUt&&(t+=e.uUt.ct);return t}get bGt(){}constructor(t,i){super(),this.oVt=[],this.uVt=[],this.SYt=t,this.aVt=i}},nJ={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},rJ=class extends iJ{get Xl(){return this.IUt}get att(){return this.vYt}get fUt(){return this.EQt}cVt(){return this.lVt}dVt(){this.lVt=!0}fVt(t){return Tt({},nJ,{resourceURI:t.lFt||""})}_Vt(t){return Tt({},nJ,{contentHTML:t.lFt.trim(),type:"HTMLResource"})}gVt(t){var i,e;return Tt({},nJ,{clickThrough:(null==(i=t.sQt)?void 0:i.trim())||"",resourceURI:(null==(e=t.lFt)?void 0:e.trim())||"",altText:t.iQt||"",type:"StaticResource"})}wVt(t,i,e){if(!t||!i)return;const s="<img "+(e?"title='"+e+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(i)+"' target='_blank' rel='noopener'>"+s+"</a>"}lUt(t){return t?t.map((t=>{let i;const e={adSlotId:t.qUt||"",height:t.Ti||0,width:t.ji||0};if(t.vUt){var s;const e=this.gVt(t.vUt),n=e.clickThrough||(null==(s=t.JUt)?void 0:s.sQt);i=Tt({},e,{contentHTML:this.wVt(e.resourceURI,n,e.altText)||""})}else if(t.MUt)i=this._Vt(t.MUt);else{if(!t.pUt)return;i=this.fVt(t.pUt)}return N(i,e)})).filter((t=>void 0!==t)):[]}AVt(){return this.vVt.eUt}constructor(t,i,e,s,n,r){super(),this.lVt=!1,this.vVt=t,this.PUt=i,this.IUt=e,this.aVt=s,this.EQt=n,this.vYt=r}},hJ=class extends rJ{get dUt(){return this.vVt}get cUt(){return this.mVt}fa(){const t=this.IUt,i={companions:this.lUt(this.PUt),type:"nonlinear",id:this.vVt.SUt,skipOffset:this.xQt,integration:this.vYt.integration,adSystem:this.vVt.eUt,get adBreak(){return t.Q7()},creativeId:this.vVt.SUt,universalAdIds:this.EQt.map((t=>({adIdRegistry:t.EFt,adIdValue:t.LFt})))};return this.vVt.pUt?N(this.fVt(this.vVt.pUt),i):this.vVt.MUt?N(this._Vt(this.vVt.MUt),i):this.vVt.vUt?N(this.gVt(this.vVt.vUt),i):i}Q7(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}pVt(){var t,i;return null!=(i=null==(t=this.vVt.vUt)?void 0:t.lFt)?i:""}yVt(){var t,i,e;return null!=(e=null==(i=this.vVt)||null==(t=i.vUt)?void 0:t.fFt)?e:""}get xQt(){const t=this.vVt.Xl;return t&&t.att&&void 0!==t.att.skipOffset?Ji.dYt(t.att.skipOffset,this.aVt.eVt.ct):(null==(i=this.vVt.Xl)?void 0:i.xQt)||-1;var i}constructor(t,i,e,s,n,r,h){super(t,i,s,n,r,h),this.mVt=e}},oJ=class extends rJ{get uUt(){return this.vVt}fa(){var t;const i=this.IUt;return{companions:this.lUt(this.PUt),duration:this.vVt.ct,id:this.vVt.SUt,mediaFiles:this.vVt.LQt,skipOffset:this.xQt,type:"linear",integration:this.vYt.integration,adSystem:this.vVt.eUt,width:void 0,height:void 0,get adBreak(){return i.Q7()},clickThrough:null==(t=this.vVt.pQt)?void 0:t.sQt,creativeId:this.vVt.SUt,universalAdIds:this.EQt.map((t=>({adIdRegistry:t.EFt,adIdValue:t.LFt})))}}Q7(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}pVt(){return this.vVt.LQt.length>0?this.vVt.LQt[0].contentURL:""}yVt(){return this.vVt.LQt.length>0?this.vVt.LQt[0].type:""}get xQt(){const t=this.vVt.Xl;return t&&t.att&&void 0!==t.att.skipOffset?Ji.dYt(t.att.skipOffset,this.aVt.eVt.ct):this.vVt.xQt||-1}constructor(t,i,e,s,n,r){super(t,i,e,s,n,r)}};function aJ(t){return t instanceof oJ}!function(t){t.MVt="theo",t.TVt="csai",t.NVt="google-ima",t.so="google-dai",t.DVt="freewheel",t.IVt="mediatailor",t.zS="chromecast",t.k7="theoads"}(A||(A={}));var uJ,cJ=class extends je{fa(){return new lJ(this.Z7.Q7())}constructor(t){super("SVt",t)}},lJ=class extends Fs{constructor(t){super("updatead",t)}},Mc=class extends je{fa(){return new dJ(this.Z7.Q7())}constructor(t){super("EVt",t)}},dJ=class extends Fs{constructor(t){super("adloaded",t)}},fJ=class extends Mo{get Fc(){return void 0!==this.bVt}get U7(){return this.vVt?[this.vVt]:[]}get F7(){var t;return null!=(t=this.bVt)?t:null}get Y7(){return rs(this.LVt,(t=>{const i=t.Oc;if(t===this.bVt&&void 0!==this.vVt){const t=i.indexOf(this.vVt);if(t>=0)return i.slice(t+1)}return t.kVt()?[]:i}))}get G7(){return this.LVt.filter((t=>t===this.bVt||!t.kVt()))}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=Ch(this)}n4(t,i,e){throw new b("Scheduling ads while casting is not supported.")}Hm(){this.PYt.tGt()}htt(t){var i;null==(i=this.CVt)||i.htt(t)}W7(t,i){var e;null==(e=this.CVt)||e.W7(t,i)}xVt(t){return Po(this.LVt,(i=>i.o===t))}OVt(t,i,e,s){const n=this.LVt,r=[];let h=!1;for(const n of t){let t=this.xVt(n.id);void 0===t&&(t=new _J(n),s.push(new _n(t))),!Yt(t.jVt)&&Yt(e)&&(t.jVt=this.zVt(t.PVt,e));const o=t.Oc;t.Yn(n,i,e,s);const a=t.Oc;for(const t of a)gd(o,t)||(s.push(new ar(t)),h=!0);r.push(t)}this.LVt=r,h&&s.push(new qh);for(const t of n)gd(r,t)||s.push(new Vn(t))}BVt(t,i){const e=this.bVt,s=this.vVt;let n,r;if(t){var h;const{breakId:i,breakClipId:e}=t;n=i?this.xVt(i):void 0,r=e?null==(h=this.bVt)?void 0:h.RVt(e):void 0}if(this.bVt=n,this.vVt=r,n!==e&&(void 0!==e&&(e.UVt=void 0,i.push(new ms(e))),void 0!==n&&(n.UVt=this.PYt,i.push(new Nu(n)))),r!==s){const t=this.Qo.Tf();void 0!==s&&i.push(new gh(s,t)),void 0!==r&&i.push(new Nh(r,t))}}zVt(t,i){if(!i||!i.breaks)return;const e=Po(i.breaks,(i=>i.id===t.id));return e}ntt(t){const i=[];for(const t of this.LVt){let e=t.Oc;if(t===this.bVt&&void 0!==this.vVt){const t=e.indexOf(this.vVt);t>=0&&(e=e.slice(t))}else if(t.kVt())continue;for(const t of e){const e=t.QVt();e&&i.push(e)}}for(const e of i)t.n4(e,Zi.V7,!1)}gn(){return this.Vo(),this.PYt.GYt(this.Yr),void 0!==this.bVt&&(this.bVt.UVt=void 0,this.bVt=void 0),this.vVt=void 0,No(this.LVt),Promise.resolve(void 0)}constructor(t,i,e){super(),this.LVt=[],this.bVt=void 0,this.vVt=void 0,this.Xa=void 0,this.Yr=t=>{var i;if(!t)return;const e=this.PYt.Pp,{breakStatus:s}=e,{breakClips:n,breaks:r}=e.media,h=null==(i=IZ(e))?void 0:i.media,o=[];r&&n&&this.OVt(r,n,h,o),this.BVt(s,o);for(const t of o)this.Co(t)},this.Qo=t,this.PYt=i,this.CVt=e,this.PYt.YYt(this.Yr)}},_J=class extends Wh{get PVt(){return this.FVt}get o(){return this.FVt.id}get Oc(){return this.Ic}get AYt(){return A.zS}get tVt(){let t=this.FVt.duration;return void 0===t&&this.Ic.length>0&&(t=xo(this.Ic,(t=>t.ct)),S(t)&&(t=void 0)),t}get iVt(){const t=this.tVt;if(void 0!==t&&void 0!==this.UVt){const i=this.UVt.$Yt();if(void 0!==i)return _.max(0,t-i)}return t}get nbt(){return this.FVt.position}get bGt(){}kVt(){return this.FVt.isWatched}RVt(t){return Po(this.Ic,(i=>i.o===t))}Yn(t,i,e,s){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const h=t.breakClipIds[r],o=Po(i,(t=>t.id===h));if(void 0===o)continue;const a=r<this.Ic.length?this.Ic[r]:new gJ(o,this);!Yt(a.YVt)&&Yt(e)&&(a.YVt=this.GVt(e,h,r)),a.Yn(o,s),n.push(a)}this.FVt=t,this.Ic=n}GVt(t,i,e){if(!t||!t.breakClips)return;let s=Po(t.breakClips,(t=>t.id===i));if(!s){var n;const i=null==(n=this.jVt)?void 0:n.breakClipIds[e];i&&(s=Po(t.breakClips,(t=>t.id===i)))}return s}constructor(t){super(),this.jVt=void 0,this.Ic=[],this.UVt=void 0,this.FVt=t}},gJ=class{get VVt(){return this.WVt}get o(){return this.WVt.id}get zUt(){return[]}get ct(){var t;return null!=(t=this.WVt.duration)?t:NaN}get LQt(){const t=this.pVt();return t?[{contentURL:t,delivery:"progressive",type:this.yVt(),width:0,height:0}]:[]}get xQt(){const{whenSkippable:t}=this.WVt;return void 0===t?void 0:t<0?-1:t}get sQt(){return this.WVt.clickThroughUrl}get SUt(){}get fUt(){return[]}get bGt(){}AVt(){return""}yVt(){var t;return null!=(t=this.WVt.contentType)?t:""}pVt(){var t,i;return null!=(i=null!=(t=this.WVt.contentUrl)?t:this.WVt.contentId)?i:""}Yn(t,i){const e=this.o,s=this.ct,n=this.WVt.contentUrl;this.WVt=t;const r=this.o,h=this.ct,o=this.WVt.contentUrl;e===r&&(s===h||S(s)&&S(h))&&n===o||i.push(new cJ(this)),S(s)&&!S(h)&&i.push(new Mc(this))}QVt(){let t;return this.YVt&&(t=yK(this.YVt,this.Xl.nbt)),t||(t=yK(this.WVt,this.Xl.nbt)),t}Q7(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}fa(){const t=this;return{get companions(){return t.zUt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.LQt},get skipOffset(){return t.xQt},type:"linear",integration:A.zS,get adSystem(){return t.AVt()},width:void 0,height:void 0,get adBreak(){return t.Xl.Q7()},get resourceURI(){return t.pVt()},get clickThrough(){return t.sQt},get creativeId(){return t.SUt},get customData(){return t.bGt},get isSlate(){return!1},get universalAdIds(){return t.fUt.map((t=>({adIdRegistry:t.EFt,adIdValue:t.LFt})))}}}constructor(t,i){this.Xa=void 0,this.WVt=t,this.Xl=i}},ju=class extends xd{get HVt(){return this.qVt}set HVt(t){this.qVt!==t&&(this.qVt=t,this.Us.href=null!=t?t:"",t?this.UI():this.QI())}UI(){if(this.Le)return;this.Le=!0,this.Us.style.display="",this.XVt||(this.Tit.style.cursor="pointer");const t=this.XVt?this.Us:this.Tit;i.Ys.Je?(t.addEventListener("touchstart",this.ZVt),t.addEventListener("touchend",this.KVt)):(t.addEventListener("mousedown",this.ZVt),t.addEventListener("click",this.KVt))}QI(){if(!this.Le)return;this.Le=!1,this.Us.style.display="none",this.XVt||(this.Tit.style.cursor="");const t=this.XVt?this.Us:this.Tit;i.Ys.Je?(t.removeEventListener("touchstart",this.ZVt),t.removeEventListener("touchend",this.KVt)):(t.removeEventListener("mousedown",this.ZVt),t.removeEventListener("click",this.KVt))}Ud(){this.Vo(),this.QI(),this.Tit.removeChild(this.Us)}constructor(t,e=i.Ys.Je){super(),this.Le=!1,this.ZVt=t=>{t.stopPropagation(),this.Co(new wn("clickstart"))},this.KVt=t=>{t.stopPropagation(),this.Co(new wn("click"))},this.Tit=t,this.XVt=e,this.Us=h.createElement("a"),this.Us.style.position="absolute",this.Us.style.zIndex="11",this.Us.target="Du",this.XVt?(rr(this.Us,"learn more"),this.Us.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Us.setAttribute("rel","noopener")):ia(this.Us),this.Tit.appendChild(this.Us),this.QI()}};!function(t){t.JVt="theo-size-xs",t.$Vt="theo-size-s",t.tWt="theo-size-m",t.iWt="theo-size-l",t.eWt="theo-size-xl"}(uJ||(uJ={}));var wJ=[1200,992,768,576],AJ={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},vJ=class{sWt(t){let i=mJ(t);i!==this.nWt&&(Yn(this.Us,i),NM(this.Us,this.nWt),this.nWt=i)}gn(){this.Wu.fn(ve.pn,this.mn)}constructor(t,i){this.Us=t,this.Wu=i,this.mn=t=>{this.sWt(t.width)},this.nWt=mJ(i.ku),Yn(this.Us,this.nWt),i.yn(ve.pn,this.mn)}};function mJ(t){for(let i of wJ)if(t>i)return AJ[i];return"theo-size-xs"}var pJ=class extends xd{get we(){return this.Us}get jg(){return this.iR}get DS(){return this.Ql.textContent||""}set DS(t){rr(this.Ql,t)}rWt(t){"countdown"!==this.iR&&(this.iR="countdown",this.hWt(),this.we.classList.remove("theoplayer-ad-skip-button"),this.we.classList.add("theoplayer-ad-skip-countdown")),this.DS="You can skip in "+_.round(t)+" seconds"}oWt(){"skip"!==this.iR&&(this.iR="skip",this.DS="Skip Ad",this.aWt(),this.we.classList.remove("theoplayer-ad-skip-countdown"),this.we.classList.add("theoplayer-ad-skip-button"))}aWt(){this.we.addEventListener("mouseup",this.uWt),this.we.addEventListener("touchend",this.uWt)}hWt(){this.we.removeEventListener("mouseup",this.uWt),this.we.removeEventListener("touchend",this.uWt)}gn(){this.Vo(),this.hWt(),this.qu.gn(),fh(this.Us),fh(this.Ql),this.cWt&&fh(this.cWt)}constructor(t,i){super(),this.uWt=()=>{this.Co(new wn("Hm"))},this.Us=h.createElement("div"),this.we.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.we.style.position="absolute",this.Ql=h.createElement("span"),this.we.appendChild(this.Ql),i&&(this.cWt=h.createElement("div"),this.cWt.className="theoplayer-ad-skip-poster",this.cWt.style.backgroundImage='url("'+Sf(i)+'")',this.we.appendChild(this.cWt)),this.iR="countdown",this.qu=new vJ(this.we,t)}},yJ=class extends xd{lWt(){const t=this.PYt.Pp.activeTrackIds;if(t){if(this.dWt()){const i=this._T.og.map((t=>t.o)),e=this.dT.og.map((t=>t.o));gd(i.concat(e),"0")&&t.push(0)}IJ(t,this.dT),IJ(t,this._T),function(t,i){const e=!1;for(const e of i.og)e.WGt=gd(t,e.Mg)?Ha.Jn:Ha.Ch}(t,this.Dl)}}fWt(){var t;const i=null==(t=this.PYt.Pp.media)?void 0:t.tracks;if(!i)return;const e=i.filter(GK),s=i.filter(VK),n=i.filter(WK);if(this.dWt()&&0===s.length&&0!==this.u_()){const t=this._Wt();s.push(t)}if(this.dWt()&&0===e.length){const t=this.gWt();e.push(t)}NJ(this.dT,e.map((t=>t.trackId))),NJ(this._T,s.map((t=>t.trackId))),NJ(this.Dl,n.map((t=>t.trackId))),DJ(e,this.dT),DJ(s,this._T),function(t,i){let e=!1;for(const s of t){let t=TJ(i,s.trackId);t||(t=new HK(s),i.tt(t),e=!0)}}(n,this.Dl)}wWt(){this.kB||(this.AWt=v(this.od,250))}vWt(){m(this.AWt)}mWt(){this.vWt(),this.wWt()}pWt(){var t;const i=this.PYt.Pp,e=i.media;var s;const n=null!=(s=null==e?void 0:e.duration)?s:NaN,r=(null==e?void 0:e.streamType)===chrome.cast.media.StreamType.LIVE||n<0,h=r?1/0:n;this.VL=h,this.yWt();const o=i.getEstimatedLiveSeekableRange(),a=null==(t=i.customData)?void 0:t.buffers;if(Yt(o)){const{start:t,end:i,isMovingWindow:e=r,isLiveDone:s=!1}=o;this.qLt(t,i,e,s)}else if(Yt(a)){const[t,i]=a.seekable;this.qLt(t,i,r,!1)}else r?this.qLt(void 0,void 0,!0,!1):this.qLt(0,h,!1,!1)}MWt(){const t=this.PYt.Pp,i=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||MJ(t);this.TWt=i,this.kB!==i&&(this.kB=i,this.kB?this.Co(new ge(this.Tf())):this.Co(new sh(this.Tf())))}th(){const{playbackRate:t}=this.PYt.Pp;this.NWt!==t&&(this.NWt=void 0,this.CB!==t&&(this.CB=t,this.Co(new ls(this.Tf(),t))))}DWt(){const{playerState:t}=this.PYt.Pp;let i;switch(t){case chrome.cast.media.PlayerState.IDLE:i=ae.aT;break;case chrome.cast.media.PlayerState.BUFFERING:i=ae.Xn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:i=ae.cT}this.N0(i),this.IWt()}qLt(t,i,e,s){Yt(t)&&Yt(i)?this.s0=new Bk(t,i,e,e&&!s):this.s0=void 0}SWt(t,i){this.RGt=null!=i?i:this.RGt,this.BGt=null!=t?t:this.BGt,this.Co(new lm)}We(t){this.EWt!==t?(this.bB=!0,this.Co(new Eh(this.Tf()))):this.EWt=void 0}fP(){if(!this.bB)return;this.bB=!1;const t=this.Tf();this.Co(new Pc(t,this.mf())),this.Co(new we(t))}Mh(){this.y0=!0,this.Sf()&&this.Co(new ee(this.Tf()))}yWt(){const t=this.PNt,i=this.Td();t===i||S(t)&&S(i)||(this.PNt=i,this.Co(new jn(i)))}bWt(){const t=this.Tf();this.bB||this.LWt===t||(this.LWt=t,this.Co(new Pc(t,this.mf())))}PGt(){this.kB&&(this.kB=!1,this.Co(new sh(this.Tf())),this.N0(ae.aT))}D7(){return this.Ic}Af(){return this.tDt.Im(this.zGt)}Tf(){if(this.Ic.Fc){const t=this.PYt.JYt();if(void 0!==t)return t}return this.f7()}f7(){return void 0!==this.kWt?this.zGt+this.kWt:this.y0?this.Td():this.zGt+this.PYt.KYt()}mf(){if(this.CWt)return new Date(this.f7()+this.CWt)}Td(){if(this.Ic.Fc){var t;const i=null==(t=this.Ic.U7[0])?void 0:t.ct;if(void 0!==i&&!S(i))return i}return this.zGt+this.VL}Ef(){return this.Bz}Sf(){return!this.Ic.Fc&&this.y0}Yf(){return this.kB}Vf(){return this.CB}Wf(t){this.CB!==t&&(this.NWt=this.CB,this.CB=t,this.Co(new ls(this.Tf(),t)),this.PYt.Wf(t))}$f(){return this.M0}qf(){return this.Ic.Fc?Ai.IB(0,this.Tf()):this.Uo.Im(this.zGt)}i_(){var t,i;if(this.Ic.Fc)return Ai.SB();let e=null!=(i=null==(t=this.s0)?void 0:t.f$().Im(this.zGt))?i:Ai.SB();if(e.U>0){const t=e.jn(e.U-1);e=e.cB(Ai.IB(t,this.Tf()))}return e}s_(){return this.bB}df(){return this.dT}o_(){return this._T}n_(){return this.Dl}_Wt(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.h_(),id:"0",name:"",width:this.u_()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:FK.pm}}gWt(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:FK.ym}}dWt(){var t,i;return!(void 0!==(null==(t=this.HYt.WYt())?void 0:t.version))||(null==(i=this.HYt.WYt())?void 0:i.sdkType)===KK.JGt}ZYt(t){this.dWt()&&To(t,0),this.PYt.ZYt(t)}u_(){return this.BGt}h_(){return this.RGt}p_(){this.kB&&(this.kB=!1,this.TWt=!1,this.Co(new sh(this.Tf()))),this.PYt.p_()}m_(){this.kB||(this.kB=!0,this.TWt=!0,this.Co(new ge(this.Tf()))),this.PYt.m_()}Sm(t){if(this.Ic.Fc)return;let i=_.max(0,t-this.zGt);i=_.round(1e6*i)/1e6;const e=this.kWt;this.kWt=i,this.TWt=this.Yf(),this.EWt=i,this.bB=!0,this.Co(new Eh(this.Tf())),void 0===e&&(this.dWt()?this.xWt(i):this.H2(i))}H2(t){this.PYt.Sm(t,this.TWt).then(this.OWt(t)).catch(this.XYt)}OWt(t){return()=>{void 0!==this.kWt&&(this.kWt===t?this.kWt=void 0:this.H2(this.kWt))}}N0(t){this.M0!==t&&(this.M0=t,this.Co(new ro(this.Tf(),t))),void 0===this.kWt&&this.bB&&t>=ae.uT&&this.fP(),this.IWt()}IWt(){if(this.kB)return void(this.jWt=!1);const t=this.M0>=ae.cT;this.jWt!==t&&(this.jWt=t,t?this.Co(new Zr(this.Tf())):this.Co(new lc(this.Tf())))}zWt(){this.PWt||(this.PWt=h.createElement("div"),this.Qo.we.appendChild(this.PWt),this.PWt.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.PWt.style.zIndex="10",ia(this.PWt)),this.PWt.style.display=this.Ic.Fc?"":"none"}BWt(){var t;const i=null==(t=this.Ic.U7[0])?void 0:t.sQt;i&&!this.RWt?(this.RWt=new ju(this.PWt,!0),this.RWt.HVt=i,this.RWt.yn("clickstart",this.UWt)):this.RWt&&(this.RWt.HVt=i)}QWt(){var t;const i=null==(t=this.Ic.U7[0])?void 0:t.xQt;if(void 0===i||i<0)return void(this.FWt&&(this.FWt.gn(),this.FWt=void 0));if(!this.FWt){var e;const t=null==(e=this.Qo.ba)?void 0:e.mi;this.FWt=new pJ(this.Qo.Iu,t),this.PWt.appendChild(this.FWt.we),this.FWt.yn("Hm",this.YWt)}const s=this.PYt.JYt();void 0!==s&&(s<i?this.FWt.rWt(i-s):this.FWt.oWt())}UGt(){return this.zGt}QGt(t){this.zGt=t}ntt(t){}y_(){this.PYt.y_()}gn(){this.Vo(),this.Ic.gn(),this.RWt&&(this.RWt.Ud(),this.RWt=void 0),this.FWt&&(this.FWt.gn(),this.FWt=void 0),this.PWt&&(fh(this.PWt),this.PWt=void 0),this.PYt.FYt(this.M$),this.PYt.UYt(this.GWt),this.PYt.GYt(this.DGt),this.PYt.fn(vK.jYt,this.VWt),this.PYt.gn()}constructor(t,i,e,s,n){super(),this.tDt=Ai.SB(),this.CWt=void 0,this.y0=!1,this.Bz=void 0,this.NWt=void 0,this.M0=ae.aT,this.jWt=!1,this.Uo=Ai.SB(),this.s0=void 0,this.bB=!1,this.dT=new Ae,this._T=new Ae,this.Dl=new _i,this.PNt=NaN,this.kWt=void 0,this.TWt=!1,this.LWt=NaN,this.EWt=void 0,this.AWt=0,this.GWt=(t,i)=>{switch(t){case"buffered":this.tDt=new Ai(i),this.Co(new B(this.Tf()));break;case"currentProgramDateTime":this.CWt=new Date(i).getTime()-this.Tf();break;case"played":this.Uo=new Ai(i);break;case"seekable":this.pWt();break;case"videoHeight":this.SWt(void 0,i);break;case"videoWidth":this.SWt(i,void 0)}},this.M$=t=>{switch(t.type){case l.yw:this.We(t.currentTime);break;case l.pw:this.fP();break;case l.Aw:this.Co(new yQ(t.representation,t.previousRepresentation));break;case l.Mw:this.Co(new VU(t.segmentStartTime,t.error,t.trackType,t.track,t.quality,t.retryCount));break;case l.Kg:this.Co(new iV(t.currentTime,t.initDataType,t.initData));break;case l.Vg:this.Co(new Mn(new Qr(Ui.CONTENT_PROTECTION_ERROR,t.error,void 0,t.licenseAcquisitionURL,t.status,t.statusText,t.licenseAcquisitionMessage,t.systemCode)));break;case l.Wg:this.Co(new Ix)}},this.DGt=t=>{this.pWt(),this.MWt(),this.th(),this.DWt(),this.bWt(),this.mWt(),this.fWt(),this.lWt(),this.zWt(),this.BWt(),this.QWt(),t||MJ(this.PYt.Pp)&&this.Mh()},this.od=()=>{this.bWt(),this.QWt()},this.VWt=t=>{this.Co(t)},this.xWt=Ld((t=>this.H2(t)),50),this.XYt=t=>{this.kWt=void 0,this.Co(new MK(t))},this.UWt=()=>{this.m_()},this.YWt=()=>{this.Ic.Hm()},this.Qo=t,this.HYt=e,this.PYt=s,this.Ic=new fJ(t,s,i.Oc),this.zGt=n.UGt(),this.VL=n.Td()-this.zGt,this.kB=n.Yf(),this.CB=n.Vf(),this.BGt=n.u_(),this.RGt=n.h_(),this.PYt.QYt(this.M$),this.PYt.BYt(this.GWt),this.PYt.YYt(this.DGt),this.PYt.yn(vK.jYt,this.VWt),this.PYt.VYt().then((t=>{this.Co(new TK(t.bt,t.yc))}),this.XYt)}};function MJ(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function TJ(t,i){for(const e of t.og)if(e.Mg===i)return e}function NJ(t,i){let e=!1;for(let s=0;s<t.U;s++){const n=t.cg(s);-1===i.indexOf(n.Mg)&&(t.it(n),s--,e=!0)}return e}function DJ(t,i){let e=!1;for(const s of t){let t=TJ(i,s.trackId);t||(t=new JK(s),i.tt(t),e=!0)}return e}function IJ(t,i){for(const e of i.og)e.ZGt=gd(t,e.Mg);return!1}var SJ=class{Mtt(t){return Promise.resolve("all")}v_(){}gn(){}};function EJ(t,i,e){if(S(t))return e;if(t===1/0){if("live"===e||"dvr"===e)return e;if(i&&i.length>0){if(i.end(i.length-1)-i.start(0)>60)return"dvr"}return"live"}return"vod"}var bJ=[l.Jg,l.Xg,l.ww,l.mw,l.Sh,l.jh,l.gw,l.Sw,l.yw,l.pw,he.Bw,he.Rw,l.Aw,l.Mw,l.Kg,l.Vg,l.Wg],LJ=class extends V{KP(t){if(!t)return;Th(this.YP&&qd(this.YP),t&&qd(t))||(this.YP=t,this.Co(new St(t)))}WWt(t){if(!t)return;const i=ca(t,this.Qo.wd);Th(this.bc&&qd(this.bc),i&&qd(i))||(this.ja.QGt(0),this.bc=i,this.Co(new Wj(i)),this.ja.PGt())}HWt(t){for(const i of this.rt.og)if(i.Mg===t)return i;for(const i of this.ht.og)if(i.Mg===t)return i}get ult(){return this.ja}set ult(t){const i=this.ja;i&&(i.fn(vK.jYt,this.VWt),i.fn(vK.zYt,this.qWt),i.fn(bJ,this.Ds),i.fn(he.H_,this.cO),t.QGt(i.UGt()),i.ntt(t.D7())),this.ja=t,this.dT.fg=t.df(),this._T.fg=t.o_(),this.Dl.fg=t.n_(),this.Ic.fg=t.D7(),i&&i.gn(),t.yn(vK.jYt,this.VWt),t.yn(vK.zYt,this.qWt),t.yn(bJ,this.Ds),t.yn(he.H_,this.cO)}get ro(){return this.ho}get Oc(){return this.D7()}D7(){return this.Ic}I7(){return this.h7}df(){return this.dT}Af(){return this.ja.Af().ks()}get XWt(){return this.ZWt||this.bc}set XWt(t){this.ZWt=t}async $n(t,i){var e;t&&await this.SGt(t,null!=(e=t.ads)?e:[],t.streamType,NaN,0,null!=i?i:0)}async KWt(t){var i;const e=null!=(i=this.ZWt)?i:this.bc;if(!e)return;var s;const n=this.ZWt?null!=(s=this.ZWt.ads)?s:[]:this.ftt(),r=this.Qo.Td(),h=this.Qo.i_(),o=EJ(r,h,e.streamType),a=h.length>0?h.start(0):0,u=null!=t?t:this.f7();await this.SGt(e,n,o,r,a,u)}ftt(){const t=new Sh;return this.Ic.ntt(t),t.ftt()}mf(){return this.ja.mf()}yf(){return this.YP}get Mf(){return this.Tf()}set Mf(t){this.Nf(t)}Tf(){return this.ja.Tf()}f7(){return this.ja.f7()}Nf(t){this.JWt||(this.HYt.IGt()||this.JWt||!this.bc?this.ja.Sm(t):this.$n(this.bc,t))}Td(){return this.ja.Td()}Sf(){return this.ja.Sf()}Ef(){return this.Bz}Lf(){return this.Rz}Cf(){return this.fT}zf(){return this.Qo.jf}Bf(){return this.LB}Rf(t){this.LB=t,this.Co(new Je(this.Mf,this.c_)),this.HYt.Rf(t)}Yf(){return this.ja.Yf()}Vf(){return this.ja.Vf()}Wf(t){this.ja.Wf(t)}qf(){return this.ja.qf().ks()}Zf(){return wo.iT}Kf(t){}$f(){return this.ja.$f()}i_(){return this.ja.i_().ks()}s_(){return this.ja.s_()}Wa(){return this.bc}async ga(t){this.bc=t,await this.$n(t),this.ZWt=void 0,this.ja.PGt()}n_(){return this.Dl}h_(){return this.ja.h_()}u_(){return this.ja.u_()}o_(){return this._T}l_(){return this.ck}d_(t){this.ck=t,this.Co(new Je(this.Mf,this.c_)),this.HYt.d_(t)}get g_(){return!1}set g_(t){}A_(){}w_(){return this.xB}v_(){}p_(){this.HYt.IGt()||this.JWt||!this.bc?this.ja.p_():this.$n(this.bc)}m_(){this.ja.m_()}ur(){this.ho=!0}ar(){this.YP=void 0,this.ho=!1}ge(){}be(){}async SGt(t,i,e,s,n,r){this.JWt=!0,this.$Wt(),this.ja.QGt(n);const h="live"===e||"dvr"===e,o=function(t,i,e){return{theoplayer_version:1,streamStart:t,isLive:i,sourceDescription:e}}(n,h,t),a={EGt:t,Oc:i,Mf:_.max(0,r-n),ct:s,uZ:h?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,bGt:o};try{await this.HYt.SGt(a)}catch(t){this.tHt(t)}finally{this.JWt=!1}}iHt(){this.eHt(this.dT),this.eHt(this._T),this.sHt(this.Dl)}eHt(t){for(const i of t.og)this.nHt(i);t.yn(yt.L_,(t=>{this.nHt(t.Lt),this.rHt()}))}sHt(t){for(const i of t.og)this.hHt(i);t.yn(yt.L_,(t=>{this.hHt(t.Lt),this.rHt()}))}nHt(t){t.yn($c.YGt,this.twt),t.yn($c.GGt,this.oHt),t.yn($c.GGt,this.lWt)}hHt(t){t.yn($c.FGt,this.aHt),t.yn($c.FGt,this.lWt)}uHt(){const t=[];for(const i of this.rt.og)i.Rt&&t.push(i.Mg);for(const i of this.ht.og)i.Rt&&t.push(i.Mg);for(const i of this.nt.og)i.jg===Ha.Jn&&t.push(i.Mg);this.ja.ZYt(t)}cHt(t,i){this.lHt=t,this.dHt=i}fHt(t){var i,e;if(!t)return!1;return(null!=(e=null==(i=this.HYt.WYt())?void 0:i.version)?e:-1)>=2?t.map((t=>t.o)):[t[0].o]}_Ht(t){this.gHt=t}D_(){}I_(){}async y_(){this.ja.y_(),this.$Wt()}$Wt(){this.iO=ae.aT,this.Xx=!1,this.Jx=!1,this.Bz=void 0,this.Rz=void 0}async gn(){this.$Wt(),this.Vo(),this.ult=this.wHt(),this.HYt.fn(ot.jYt,this.VWt),this.HYt.fn(ot.fGt,this.AHt),this.HYt.fn(ot.Ew,this.vHt),this.HYt.fn(ot.dGt,this.mHt),this.HYt.fn(ot._Gt,this.pHt),this.HYt.gn()}wHt(){return new QK(this,this.ja.UGt(),this.ja.Tf(),this.ja.Td(),this.ja.Sf(),this.ja.Yf(),this.ja.Vf(),this.ja.u_(),this.ja.h_())}constructor(t,i){super(t,!0),this.ho=!1,this.gHt=qt,this.iO=ae.aT,this.Xx=!1,this.Jx=!1,this.JWt=!1,this.ZWt=void 0,this.Bz=void 0,this.Rz=void 0,this.dT=new Ms,this._T=new Ms,this.Dl=new yc,this.xB=new Mu,this.fT=new Fc,this.h7=new SJ,this.lHt=void 0,this.dHt=void 0,this.vHt=t=>{var i,e;(Yt(t.c_)&&!ku(t.c_,this.ck,1e-5)||Yt(t.Pf)&&t.Pf!==this.LB)&&(this.ck=null!=(i=t.c_)?i:this.ck,this.LB=null!=(e=t.Pf)?e:this.LB,this.Co(new Je(this.Mf,this.ck)))},this.mHt=()=>{const t=this.HYt.IGt();this.ult=t?new yJ(this,this.Qo,this.HYt,t,this.ja):this.wHt()},this.qWt=t=>{this.KP(t.bt),this.WWt(t.yc)},this.pHt=t=>{const i=this.HWt(t.Qp);if(!i)return void 0;const e={targetQualityIds:t.wGt};i.HGt(e)},this.VWt=t=>{this.tHt(t.lt)},this.tHt=t=>{this.gHt&&this.gHt(t)},this.AHt=t=>{this.Bz=t.lt,this.Rz=Hs(this.Bz),this.Co(new Dr(this.Rz))},this.oHt=t=>{if(!t.enabled)return;const i=this.rt.og.some((i=>i.Mg===t.trackId))?this.rt:this.ht;for(const e of i.og)e.Rt&&e.Mg!==t.trackId&&(e.Rt=!1)},this.aHt=t=>{if(t.mode===Ha.Jn)for(const i of this.nt.og)i.jg===Ha.Jn&&i.Mg!==t.trackId&&Iv(i.zt,t.track.zt)&&(i.jg=Ha.Ch)},this.lWt=Ld((()=>{this.uHt()}),50),this.rHt=()=>{const t=[];var i;const e=null!=(i=Po(this.ht.og,(t=>UJ(t,this.lHt))))?i:Po(this.ht.og,(t=>t.Rt));var s;e&&t.push(e.Mg);const n=null!=(s=Po(this.nt.og,(t=>UJ(t,this.dHt))))?s:Po(this.nt.og,(t=>t.jg===Ha.Jn));n&&t.push(n.Mg);const r=Po(this.rt.og,(t=>t.Rt));r&&t.push(r.Mg),0!==t.length&&this.ja.ZYt(t)},this.twt=t=>{const i=this.fHt(t.targetQuality),e=t.track;this.HYt.AGt(e.Mg,e.e$,i)},this.cO=t=>{this.Co(t);const i=t.readyState;!this.Xx&&this.iO===ae.aT&&i>=ae.Xn&&(this.Xx=!0,this.Co(new ns(t.currentTime))),!this.Jx&&this.iO<=ae.Xn&&i>=ae.uT&&(this.Jx=!0,this.Co(new us(t.currentTime))),this.iO<=ae.uT&&i>=ae.cT&&this.Co(new xt(t.currentTime)),this.iO<=ae.cT&&i===ae.lT&&this.Co(new ds(t.currentTime)),this.iO=i},this.ck=this.Qo.c_,this.LB=this.Qo.Pf,this.HYt=i,this.HYt.yn(ot.jYt,this.VWt),this.HYt.yn(ot.fGt,this.AHt),this.HYt.yn(ot.Ew,this.vHt),this.HYt.yn(ot.dGt,this.mHt),this.HYt.yn(ot._Gt,this.pHt),this.Ic=new Uh(this),this.YP=this.Qo.bt,this.bc=this.Qo.Wa(),this.ult=new QK(this,0,this.Qo.f7(),this.Qo.Td(),this.Qo.If,this.Qo.Ff,this.Qo.Gf,this.Qo.a_,this.Qo.r_),this.iHt()}},kJ=class extends yo{fa(){return new CJ(this.lt)}constructor(t){super("error"),this.lt=t}},CJ=class extends wn{constructor(t){super("error"),this.error=t}},xJ=class extends wn{constructor(t){super("statechange"),this.state=t}};function OJ(t,i){let e;return{get casting(){return t.dH},get error(){return t.lt},get receiverName(){return t.yHt},get state(){return t.ult},start(){t.Cn()},stop(){t.y_()},join(){t.MHt()},leave(){t.THt()},set connectionCallback(t){null==i||i.NHt(t)},get connectionCallback(){return null==i?void 0:i.DHt()},get source(){return e||t.yc},set source(i){e=i,t.yc=i},addEventListener(i,e){const s=zs(i,gi);t.yn(s,e)},removeEventListener(i,e){const s=zs(i,gi);t.fn(s,e)}}}var jJ=class extends Mo{get dH(){return this.ult===E.CONNECTING||this.ult===E.CONNECTED}get lt(){return this.Bz}get va(){return this.Xa||(this.Xa=OJ(this,this.IHt)),this.Xa}get yHt(){var t;return null==(t=this.IHt.SHt())?void 0:t.kGt()}get yc(){return this.Qo?this.Qo.XWt:this.ZWt}set yc(t){this.ZWt=t?ca(t,this.EHt.wd):void 0,this.Qo&&(this.Qo.XWt=this.ZWt,this.ZWt&&this.Qo.$n(this.ZWt))}get ult(){return this.ja}set ult(t){let i=t;this.bHt||i!==E.CONNECTING&&i!==E.CONNECTED||(i=E.AVAILABLE),this.ja!==i&&(this.ja=i,this.Co(new xJ(this.ult)))}async LHt(){if(!this.kHt)throw new g("Chromecast must be initialized before starting a session");await this.kHt,this.IHt.SHt()||await this.IHt.CHt()}async Cn(){this.bHt=!0;try{if(this.ult=E.CONNECTING,await this.LHt(),await this.xHt(),this.Qo){const t=this.EHt.Wa(),i=this.IHt.OHt(t);this.Qo.XWt=i?ca(i,this.EHt.wd):this.ZWt,this.Qo.KWt()}this.ult=E.CONNECTED,await this.EHt.y_()}catch(t){this.jHt(!1).catch(qt),this.ult=E.AVAILABLE,Ho(t)||this.L4(t)}}async MHt(){this.bHt=!0;try{if(this.ult=E.CONNECTING,await this.LHt(),await this.xHt(),this.Qo){const t=this.EHt.Wa(),i=this.IHt.zHt(t);i&&(this.Qo.XWt=ca(i,this.EHt.wd))}this.ult=E.CONNECTED,await this.EHt.y_()}catch(t){await this.jHt(!0).catch(qt),this.ult=E.AVAILABLE,Ho(t)||this.L4(t)}}async PHt(){this.IHt.SHt()&&await this.Cn()}async xHt(){null!=this.Qo||(this.Qo=this.BHt()),this.Bz=void 0,this.EHt.m_(),await this.pW.RHt(this.Qo)}BHt(){const t=new LJ(this.EHt,this.IHt.SHt());return t._Ht(this.L4),t}UHt(){this.Qo&&(this.Qo.gn(),this.Qo=void 0)}async jHt(t){if(this.bHt=!1,!this.Qo)return;const i=this.Qo.ro,e=this.Qo.Wa(),s=this.Qo.f7();try{if(i){let i;i=t?this.IHt.QHt(e):this.IHt.FHt(e),null!=i||(i=e),await this.pW.YHt(i,i===e),this.EHt.Nf(s),this.EHt.p_()}}finally{this.UHt()}}THt(){this.dH&&(this.IHt.GHt(!1),this.jHt(!0).catch(this.L4))}y_(){this.dH&&(this.IHt.GHt(!0),this.jHt(!1).catch(this.L4))}gn(){this.ES.qd(),this.IHt.fn(CK.jGt,this.VHt),this.Vo(),this.UHt()}constructor(t,i,e,s){super(),this.Bz=void 0,this.Xa=void 0,this.Qo=void 0,this.ja=E.UNAVAILABLE,this.bHt=!1,this.ES=new na,this.WHt=()=>{this.IHt.yn(CK.jGt,this.VHt),this.ult=this.IHt.HHt()},this.VHt=t=>{const i=t.ult;this.ult=i,i!==E.UNAVAILABLE&&i!==E.AVAILABLE||this.jHt(!1).catch(this.L4)},this.ZWt=void 0,this.L4=t=>{Ho(t)||t instanceof ma&&(this.Bz=t,this.Co(new kJ(t).va))},this.pW=t,this.EHt=i,this.IHt=s,this.lx=e.chromecast,this.kHt=this.IHt.bW(this.lx,this.ES.Wd),this.kHt.then(this.WHt).catch(this.L4)}},zJ=class extends Mo{get dH(){return!1}get lt(){}get yHt(){}get yc(){}set yc(t){}get ult(){return E.UNAVAILABLE}get va(){return this.Xa||(this.Xa=OJ(this)),this.Xa}MHt(){i.SA("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}THt(){i.SA("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}Cn(){i.SA("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}y_(){i.SA("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}PHt(){return Promise.resolve()}gn(){}};function PJ(t){return{bt:t.bt,Mf:t.Tf(),ct:t.Td(),If:t.If,lt:t.Ef(),bf:t.Lf(),Pf:t.Pf,Ff:t.Ff,Gf:t.Gf,Jf:t.Jf,e_:t.e_,r_:t.r_,a_:t.a_,c_:t.c_}}var BJ=class extends V{D7(){return this.Ic}df(){return this.dT}get kf(){return this.Cf()}Cf(){return this.fT}n_(){return this.Dl}o_(){return this._T}gT(t){if(this.Qo===t)return;let i;this.VP(),this.b7&&(i=PJ(this));const e=this.yf(),s=this.w_(),n=this.A_();if(this.Qo=t,this.dT.fg=t.ht,this._T.fg=t.rt,this.Dl.fg=t.nt,this.fT.fg=t.kf,this.Ic.fg=t.Oc,void 0!==i){yu(this,i,PJ(this))}const r=this.yf();r!==e&&this.Co(new St(r)),this.w_()!==s&&this.Co(new ww),this.A_()!==n&&this.Co(new Xt),this.GP()}async gn(t){await super.gn(t),this.dT.gn(t),this._T.gn(t),this.Dl.gn(t),this.fT.gn(),await this.Ic.gn()}constructor(t,i){super(t,i),this.dT=new Ms,this._T=new Ms,this.Dl=new yc,this.fT=new ga,this.dT.fg=t.ht,this._T.fg=t.rt,this.Dl.fg=t.nt,this.fT.fg=t.kf,this.Ic=new Uh(this),this.Ic.fg=t.Oc}},RJ=class extends BJ{Wa(){const t=super.Wa();return!t&&this.qHt.dH&&this.qHt.yc?this.qHt.yc:t}ga(t,i){return this.Mq.Mx((i=>(this.XHt=new na,this.XHt.Xd(i),super.ga(t,this.XHt.Wd))),i)}p_(){super.p_(),this.wd.cast.strategy!==Cf.AUTO||this.qHt.dH||this.qHt.PHt()}RHt(t){return this.Mq.Mx((i=>this.ZHt(t,i)))}YHt(t,i){return void 0===t&&(t=void 0),void 0===i&&(i=!1),this.Mq.Mx((e=>this.KHt(t,i,e)))}ZHt(t,i){Bo(i),this.JHt.Oc&&this.JHt.Oc.ntt(t.Oc),this.$Ht(),this.tqt=Po(this.JHt.ht.og,(t=>t.Rt)),this.ZTt=Po(this.JHt.nt.og,(t=>"showing"===t.jg)),this.iqt=t,this.iqt.cHt(this.tqt,this.ZTt),this.gT(t),this.iqt.ur()}async KHt(t,i,e){Bo(e);const s=this.iqt;if(void 0!==s)try{if(t){await this.JHt.y_(),Bo(e);const s=ca(t,this.JHt.wd);i&&(s.ads=void 0),this.XHt=new na,this.XHt.Xd(e),await this.JHt.ga(s,this.XHt.Wd)}i&&this.JHt.Oc&&s.Oc.ntt(this.JHt.Oc)}catch(t){Bc(t)}finally{s.ar(),this.gT(this.JHt),this.tqt=Po(this.iqt.ht.og,(t=>t.Rt)),this.ZTt=Po(this.iqt.nt.og,(t=>"showing"===t.jg)),this.JHt.ht.yn(yt.L_,this.eqt),this.JHt.nt.yn(yt.L_,this.sqt),this.JHt.yn(he.Pw,this.$Ht),this.iqt===s&&(this.iqt=void 0)}}y_(){var t;return this.tqt=void 0,this.ZTt=void 0,this.$Ht(),null==(t=this.XHt)||t.qd(),this.Mq.Mx((()=>super.y_()))}async gn(){var t;null==(t=this.XHt)||t.qd(),this.qHt.gn(),await this.YHt(),await this.Mq.gn(),await super.gn()}constructor(t,i){super(t),this.Mq=new _r,this.tqt=void 0,this.ZTt=void 0,this.eqt=t=>{const i=t.Lt;UJ(this.tqt,i)&&(i.Rt=!0)},this.sqt=t=>{const i=t.Lt;UJ(this.ZTt,i)&&(i.jg=Ha.Jn)},this.$Ht=()=>{this.JHt.ht.fn(yt.L_,this.eqt),this.JHt.nt.fn(yt.L_,this.sqt)},this.JHt=t,this.wd.cast.strategy!==Cf.DISABLED?this.qHt=new jJ(this,t,this.wd.cast,i):this.qHt=new zJ,this.fQ.mH(this.qHt)}};function UJ(t,i){return void 0!==t&&void 0!==i&&(t.gs===i.gs&&i.kh===t.kh)}var QJ=new class extends xd{NHt(t){this.nqt=t}DHt(){return this.nqt}SHt(){return this.rqt}HHt(){switch(this.hqt.getCastState()){case cast.framework.CastState.CONNECTED:return E.CONNECTED;case cast.framework.CastState.CONNECTING:return E.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return E.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return E.UNAVAILABLE}}async bW(t,i){await mZ(i),this.hqt=cast.framework.CastContext.getInstance(),this.hqt.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.pH),this.hqt.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async CHt(){try{const t=await this.hqt.requestSession();if(t)throw t}catch(t){throw new ma(DZ(t))}}OHt(t){var i;return null==(i=this.nqt)?void 0:i.onStart(t)}FHt(t){var i;return null==(i=this.nqt)?void 0:i.onStop(t)}zHt(t){var i;return null==(i=this.nqt)?void 0:i.onJoin(t)}QHt(t){var i;return null==(i=this.nqt)?void 0:i.onLeave(t)}GHt(t){this.hqt.endCurrentSession(t)}constructor(...t){super(...t),this.rqt=void 0,this.nqt=void 0,this.pH=()=>{const t=this.HHt();this.rqt=t===E.CONNECTED?new RK(this.hqt.getCurrentSession()):void 0,this.Co(new UK(t))}}},FJ=new class{get va(){return this.Xa||(this.Xa=function(t){return{initialize(i){const e=t.bW(Of(i));return e.catch(qt),e},startSession(){const i=t.CHt();return i.catch(qt),i},endSession(){t.oqt()}}}(this)),this.Xa}async bW(t){this.kHt||(this.kHt=this.aqt(t)),await this.kHt}async aqt(t){await this.IHt.bW(t)}async CHt(){if(!this.kHt)throw new g("Chromecast must be initialized before starting a session");await this.kHt,this.IHt.SHt()||await this.IHt.CHt()}uqt(){this.IHt.GHt(!1)}oqt(){this.IHt.GHt(!0)}constructor(t){this.kHt=void 0,this.Xa=void 0,this.IHt=t}}(QJ),YJ={get chromecast(){return FJ.va}};Uj((t=>new RJ(t,QJ)),sa.C7);var ss,mh,GJ=class{cqt(t,i,e,s){t.aR.forEach((t=>{if(!this.lqt(t.dqt)){const n=t.fqt(i,e,s);n&&this._qt(n)}}))}lqt(t){return this.gqt.get(t)}_qt(t){this.gqt.set(t.wqt,t),this.Aqt.set(t.wqt,t.vqt),this.mqt.Qa(t.pqt)}htt(t){this.Aqt.has(t.wqt)||(this.Aqt.set(t.wqt,t),this.mqt.Qa(t.pqt))}yqt(t){return this.Aqt.forEach(t)}Mqt(t){return this.gqt.forEach(t)}Tqt(t){let i=!1;return this.gqt.forEach((e=>{i=e.Tqt(t)||i})),i}async gn(){const t=[];this.gqt.forEach((i=>t.push(i.gn()))),this.Aqt.forEach((i=>t.push(i.gn()))),await Promise.all(t),this.gqt.clear(),this.Aqt.clear()}constructor(t){this.mqt=t,this.gqt=Eo(),this.Aqt=Eo()}},Vo=class t extends yo{fa(){return new VJ(this.TFt,this.Ob,this.Kb,this.yc)}static Nqt(i){return new t(Zo.GENERAL,i.Ob,i.DFt)}static Dqt(i,e){return new t(i.TFt,i.message,i.DFt,e)}constructor(t,i,e,s){super("Iqt"),this.TFt=t,this.Ob=i,this.Kb=e,this.yc=s}},VJ=class extends wn{constructor(t,i,e,s){super("aderror"),this.problemType=t,this.message=i,this.errorCode=e,this.source=s}},WJ=class extends Io{get Sqt(){return this.Eqt}get Fc(){let t=!1;return this.bqt((i=>{t=t||i.Lqt})),t}get U7(){const t=[];return this.bqt((i=>{const e=i.U7;e.length&&t.push(...e)})),t}get F7(){let t=null;return this.bqt((i=>{null!=t||(t=i.F7)})),t}get Y7(){const t=[];return this.bqt((i=>{t.push(...i.Y7)})),t}get G7(){const t=[];return this.bqt((i=>{t.push(...i.G7)})),t}ntt(t){this.bqt((i=>{i.ntt(t)}))}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=Ch(this)}Hm(){this.bqt((t=>{t.Hm()}))}htt(t){this.Eqt.htt(t)}W7(t,i){return this.kqt.W7(t,i)}Cqt(t){this.Eqt.Mqt((i=>{i.Cqt(t)}))}Tqt(t){return this.Eqt.Tqt(t)}bqt(t){return this.Eqt.yqt(t)}v_(){this.Eqt.Mqt((t=>t.v_()))}async tr(){const t=[];this.Eqt.Mqt((i=>t.push(i.y_()))),await Promise.all(t)}async gn(){this.Vo(),await this.Eqt.gn()}constructor(t){super(),this.Xa=void 0,this.kqt=t,this.Eqt=new GJ(this)}},HJ=class extends WJ{n4(t,i,e){try{this.xqt=e;const s=ta.Ib.cR(t);if(s.dqt===A.k7)return;const n=this.Eqt.lqt(s.dqt);if(!n)throw new Al(Zo.ADBLOCK,void 0,"Ads could not be loaded.");i!==Zi.H7&&this.L2||this.kqt.Oqt(n),s.n4(t,i,n,this.xqt)}catch(i){0,this.Co(Vo.Dqt(i,t.sources))}}async tr(){await super.tr(),this.L2=!1}async gn(){await super.gn(),this.kqt.fn(l.jh,this.m9),this.fn("Iqt",this.jqt)}constructor(t){super(t),this.xqt=!1,this.L2=!1,this.jqt=t=>{if(!this.xqt)return;const i=new Ac(vw.ADVERTISEMENT_ERROR,t.Ob),e=new $i(Ui.AD_BLOCKER_DETECTED,t.Ob+" Turn off your AdBlocker and try again.",i);this.kqt.IP(e)},this.m9=()=>{this.L2=!0},this.yn("Iqt",this.jqt),t.yn(l.jh,this.m9)}},Hi=class extends Wh{get Oc(){return this.Ic}get tVt(){return this.zqt}set tVt(t){this.zqt=t}get iVt(){return this.Pqt}set iVt(t){this.Pqt=t}set nbt(t){this.yYt=t}get nbt(){return this.yYt}get bGt(){return this.Bqt}Rqt(){this.Uqt=!0}Qqt(t){this.Ic.push(t),this.Uqt=!1}Fqt(t){To(this.Ic,t)}get Hf(){return this.Uqt}constructor(t){super(),this.yYt=t,this.Ic=[],this.zqt=-1,this.Pqt=-1,this.Bqt=void 0,this.Uqt=!1}},qJ=class extends Hi{get AYt(){return this.Yqt}get Y7(){return this.Gqt}Yn(t){void 0!==t.maxDuration&&(this.zqt=t.maxDuration),void 0!==t.customData&&(this.Bqt=t.customData)}Vqt(t){const i=this.Ic.indexOf(t);return i>=0&&i<this.Ic.length-1}Qqt(t){super.Qqt(t),this.Gqt.push(t)}Wqt(t){To(this.Gqt,t)}Fqt(t){super.Fqt(t),To(this.Gqt,t)}constructor(t,i){super(i.timeOffset),this.Gqt=[],this.Yqt=t,this.Yn(i)}};!function(t){t.CFt="linear",t.xFt="nonlinear",t.rT="unknown"}(ss||(ss={})),function(t){t.NONE="none",t.READY="ready"}(mh||(mh={}));var xe=class extends iJ{Hqt(t,i,e,s,n,r){this.CT=t,this.dk=i,this.fk=e,this.VL=s,this.PUt=n,this.OQt=r,this.qqt="ready"}get Xqt(){return this.qqt}get zUt(){return this.PUt}get ct(){return this.VL}Q7(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}get Ti(){return this.fk}get o(){return this.CT}get xQt(){return this.OQt}get ji(){return this.dk}get Zqt(){return this.Kqt}get sQt(){return this.nQt}get SUt(){return this.EUt}get fUt(){return this.EQt}get bGt(){return this.Bqt}get Jqt(){return this.$qt}AVt(){}yVt(){return""}pVt(){return this.tXt}constructor(t,i){super(),this.Kqt=i,this.CT=void 0,this.OQt=void 0,this.dk=void 0,this.fk=void 0,this.VL=void 0,this.EQt=[],this.PUt=[],this.qqt="none",this.Bqt=void 0,this.$qt=!1,this.Xl=t}};function XJ(t){return{get adSystem(){return t.AVt()},get readyState(){return t.Xqt},get adBreak(){return t.Xl.Q7()},get duration(){return t.ct},get companions(){return t.zUt.map((t=>t.va))},get resourceURI(){return t.pVt()},get clickThrough(){return t.sQt},get width(){return t.ji},get type(){return function(t){switch(t){case"linear":case"unknown":return"linear";case"nonlinear":return"nonlinear"}}(t.Zqt)},get height(){return t.Ti},get id(){return t.o},get skipOffset(){return t.xQt},get integration(){return t.AYt},get creativeId(){return t.SUt},get universalAdIds(){return t.fUt},get customData(){return t.bGt},get isSlate(){return t.Jqt}}}var ZJ=class{get qUt(){return this.XUt}get iQt(){return this.eQt}get iXt(){return this.eXt}get sQt(){return this.nQt}get Ti(){return this.fk}get lFt(){return this.tXt}get ji(){return this.dk}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{get adSlotId(){return t.qUt},get altText(){return t.iQt},get contentHTML(){return t.iXt},get clickThrough(){return t.sQt},get height(){return t.Ti},get resourceURI(){return t.lFt},get width(){return t.ji}}}(this)}sXt(t){if(t.sQt&&t.lFt)return;const i=function(t){try{return HZ(t,"text/html")}catch(t){return}}(t.iXt);i&&(this.nQt=KJ(i,"a","href"),this.tXt=KJ(i,"img","src"))}constructor(t){var i;this.Xa=void 0,this.nQt=void 0,this.tXt=void 0,this.XUt=t.qUt,this.dk=t.ji,this.fk=t.Ti,this.eXt=t.iXt,this.nQt=t.sQt,this.tXt=t.lFt,this.eQt=null!=(i=t.iQt)?i:"",this.sXt(t)}};function KJ(t,i,e){const s=t.querySelector(i);return s&&s.getAttribute(e)||""}var JJ=class extends xe{get AYt(){return this.Yqt}get nXt(){return this.rXt}set nXt(t){this.rXt=t}fa(){return XJ(this)}Yn(t){t.id&&(this.CT=t.id),void 0!==t.skipOffset&&(this.OQt=t.skipOffset),void 0!==t.width&&(this.dk=t.width),void 0!==t.height&&(this.fk=t.height),void 0!==t.duration&&(this.VL=t.duration),void 0!==t.readyState&&(this.qqt=function(t){return"ready"===t?mh.READY:mh.NONE}(t.readyState)),void 0!==t.resourceURI&&(this.tXt=t.resourceURI),void 0!==t.clickThrough&&(this.nQt=t.clickThrough),void 0!==t.companions&&(this.PUt=[...t.companions].map($J)),void 0!==t.creativeId&&(this.EUt=t.creativeId),void 0!==t.universalAdIds&&(this.EQt=t.universalAdIds),void 0!==t.customData&&(this.Bqt=t.customData)}constructor(t,i,e){super(e,function(t){return"linear"===t?ss.CFt:"nonlinear"===t?ss.xFt:ss.rT}(i.type)),this.rXt=0,this.Yqt=t,this.Yn(i)}};function $J(t){const i={qUt:t.adSlotId,iQt:t.altText,iXt:t.contentHTML,qz:void 0,sQt:t.clickThrough,Ti:t.height,lFt:t.resourceURI,ji:t.width};return new ZJ(i)}var xs=class extends je{fa(){return new t$(this.Z7.Q7(),this.hXt)}get hXt(){return this.oXt}constructor(t,i){super("aXt",t),this.oXt=i}},t$=class extends Fs{constructor(t,i){super("adskip",t),this.playedPercentage=i}},Jr=class extends tc{fa(){return new i$(this.Xl.Q7())}constructor(t){super("uXt",t)}},i$=class extends pc{constructor(t){super("updateadbreak",t)}},Nc=class extends tc{fa(){return new e$(this.Xl.Q7())}constructor(t){super("cXt",t)}},e$=class extends pc{constructor(t){super("adbreakchange",t)}},s$=class extends je{fa(){return new n$(this.Z7.Q7(),this.currentTime)}constructor(t,i){super("lXt",t),this.currentTime=i}},n$=class extends Fs{constructor(t,i){super("adfirstquartile",t),this.currentTime=i}},r$=class extends je{fa(){return new h$(this.Z7.Q7(),this.currentTime)}constructor(t,i){super("dXt",t),this.currentTime=i}},h$=class extends Fs{constructor(t,i){super("admidpoint",t),this.currentTime=i}},o$=class extends je{fa(){return new a$(this.Z7.Q7(),this.currentTime)}constructor(t,i){super("fXt",t),this.currentTime=i}},a$=class extends Fs{constructor(t,i){super("adthirdquartile",t),this.ad=t,this.currentTime=i}},u$=class{get Oc(){return this.Ic}get nVt(){return this.LVt}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{get integration(){return t.AYt},get ads(){return t.Oc.map((t=>t.Q7()))},get adBreaks(){return t.nVt.map((t=>t.Q7()))},createAd:(i,e)=>t._Xt(i,e?t.gXt(e):void 0).Q7(),updateAd(i,e){t.wXt(t.AXt(i),e)},updateAdProgress(i,e){const s=ks(Number(e),0,1);t.vXt(t.AXt(i),s)},beginAd(i){t.Wqt(t.AXt(i))},endAd(i){t.mXt(t.AXt(i))},skipAd(i){t.tGt(t.AXt(i))},removeAd(i){t.Fqt(t.AXt(i))},createAdBreak:i=>t.pXt(i).Q7(),updateAdBreak(i,e){t.yXt(t.gXt(i),e)},removeAdBreak(i){t.MXt(t.gXt(i))},removeAllAds(){t.TXt()},error(i){t.NXt(i)},fatalError(i,e){const s=e?Number(e):void 0;t.DXt(i,s)}}}(this)}get Hp(){return this.x4}set Hp(t){this.x4=t}get Lqt(){return this.IXt.some((t=>t.Zqt===ss.CFt))}get wqt(){return this.AYt}get U7(){return this.IXt}get F7(){var t;return null!=(t=this.bVt)?t:null}get Y7(){return rs(this.LVt,(t=>t.Y7))}get G7(){return this.LVt.filter((t=>!t.Hf))}Hm(){var t;if(0===this.IXt.length)return;const i=this.IXt[0];(null==(t=this.x4)?void 0:t.skipAd)?this.x4.skipAd(i.Q7()):this.tGt(i)}ntt(t){}_Xt(t,i){var e;const s=null!=i?i:this.SXt({timeOffset:null!=(e=t.timeOffset)?e:0}),n=new JJ(this.AYt,t,s);return s.Qqt(n),this.Ic.push(n),this.pqt.Co(new ar(n)),n}wXt(t,i){t.Yn(i),this.pqt.Co(new cJ(t))}vXt(t,i){if(!gd(this.IXt,t))throw new g("Cannot update ad progress on a non-started ad");const e=t.nXt,s=_.max(e,i);t.nXt=s;const n=this.kqt.Tf();e<.25&&s>=.25&&this.pqt.Co(new s$(t,n)),e<.5&&s>=.5&&this.pqt.Co(new r$(t,n)),e<.75&&s>=.75&&this.pqt.Co(new o$(t,n))}Wqt(t){gd(this.IXt,t)||(this.IXt.push(t),t.Xl.Wqt(t),this.EXt(t.Xl),this.pqt.Co(new Nh(t,this.kqt.Tf())))}tGt(t){if(!gd(this.IXt,t))return;const i=t.Xl.Vqt(t);this.pqt.Co(new xs(t,t.nXt)),this.bXt(t,i)}mXt(t){if(!gd(this.IXt,t))return;const i=t.Xl.Vqt(t);this.pqt.Co(new gh(t,this.kqt.Tf())),this.bXt(t,i)}Fqt(t){if(!gd(this.Ic,t))return;const i=t.Xl.Vqt(t);To(this.Ic,t),t.Xl.Fqt(t),this.pqt.Co(new Nc(t.Xl)),this.bXt(t,i)}pXt(t){const i=new qJ(this.AYt,t);return this.LVt.push(i),this.pqt.Co(new _n(i)),i}yXt(t,i){t.Yn(i),this.pqt.Co(new Jr(t))}MXt(t){if(gd(this.LVt,t)){for(const i of t.Oc.slice())this.Fqt(i);To(this.LVt,t),this.pqt.Co(new Vn(t))}}TXt(){for(const t of this.LVt.slice())this.MXt(t)}NXt(t){this.pqt.Co(new Vo(Zo.GENERAL,t.message))}DXt(t,i){const e=new $i(null!=i?i:Ui.AD_ERROR,t.message,t);this.kqt.IP(e)}LXt(t){return Po(this.LVt,(i=>i.nbt===t))}SXt(t){var i;return null!=(i=this.LXt(t.timeOffset))?i:this.pXt(t)}bXt(t,i){To(this.IXt,t);const e=t.Xl;0!==this.IXt.length||this.bVt!==e||i||(e.Rqt(),this.EXt(void 0))}EXt(t){this.bVt!==t&&(void 0!==this.bVt&&this.pqt.Co(new ms(this.bVt)),this.bVt=t,void 0!==t&&this.pqt.Co(new Nu(t)))}AXt(t){const i=Po(this.Ic,(i=>i.Q7()===t));if(void 0===i)throw new g('Invalid ad for integration "'+this.AYt+'"');return i}gXt(t){const i=Po(this.LVt,(i=>i.Q7()===t));if(void 0===i)throw new g('Invalid ad break for integration "'+this.AYt+'"');return i}async ga(t,i){var e;if(Bo(i),null==(e=this.x4)?void 0:e.setSource){let i=await Promise.resolve(this.x4.setSource(t));return ne(i)&&(i=t),ca(i,this.kqt.wd)}return t}async kXt(){var t;(null==(t=this.x4)?void 0:t.resetSource)?await Promise.resolve(this.x4.resetSource()):this.TXt()}async gn(){var t;(null==(t=this.x4)?void 0:t.destroy)&&await Promise.resolve(this.x4.destroy()).catch(qt),this.TXt(),this.EXt(void 0),this.x4=void 0,this.pqt.gn()}constructor(t,i){this.pqt=new Io,this.Ic=[],this.LVt=[],this.IXt=[],this.AYt=t,this.kqt=i}};var c$=class extends BJ{D7(){return this.CXt}get xXt(){return this.OXt}v_(){this.JHt.v_(),this.CXt.v_()}p_(){void 0===this.Bz?(void 0!==this.jXt&&this.zXt(this.jXt),super.p_()):this.Co(new Dr(this.Bz))}async ga(t,i){Bo(i);let e=t;if(e)for(const t of this.PXt)e=await t.ga(e,i);if(await super.ga(e,i),Bo(i),null==e?void 0:e.ads){const t=Boolean(e.blockContentIfAdError);this.CXt.Cqt(e.playAdsAfterTime);for(const i of e.ads)this.CXt.n4(i,Zi.H7,t)}}async y_(){this.Bz=void 0,this.GB=void 0,await this.CXt.tr(),this.YHt(),await super.y_();for(const t of this.PXt)await t.kXt()}zXt(t){this.BXt=this.Qo.Gf;const i=this.Qo.c_,e=this.Qo.Pf;t.d_(i),t.Rf(e),this.OXt=t,this.jXt=void 0,this.gT(t)}Oqt(t){void 0===this.OXt&&(this.jXt=t)}YHt(){this.jXt=void 0,void 0!==this.OXt&&(this.JHt.Gf=this.BXt,this.JHt.c_=this.c_,this.JHt.Pf=this.Pf,this.gT(this.JHt),this.OXt=void 0)}Ef(){var t;return null!=(t=this.GB)?t:super.Ef()}Lf(){var t;return null!=(t=this.Bz)?t:super.Lf()}IP(t){void 0===this.Lf()&&(this.Bz=t,this.GB=Ki(t),this.Co(new Dr(t)))}E_(t){return void 0===this.OXt&&this.CXt.Tqt(t)}W7(t,i){try{const e=new u$(t,this);e.Hp=i(e.va),this.CXt.htt(e),this.PXt.push(e)}catch(i){this.CXt.Co(new Vo(Zo.GENERAL,'Error while constructing ad integration "'+t+'": '+i+'"'))}}async gn(){for(const t of this.PXt)await t.gn().catch(qt);await this.CXt.gn(),this.YHt(),await super.gn()}constructor(t,i){super(t),this.PXt=[],this.Bz=void 0,this.GB=void 0,this.BXt=1,this.JHt=t,this.CXt=new HJ(this),this.CXt.Sqt.cqt(i,t,this,t.wd)}};Uj((t=>new c$(t,ta.Ib)),sa.L7);var l$,d$=0!==fi.qE?fi.qE:fi.oE,f$=fi.Ga&&d$<12,Du=class extends V{get Mf(){return this.Tf()}set Mf(t){this.Nf(t)}f7(){return this.Qo.f7()}get ct(){return this.Td()}get kf(){return this.fT}get t_(){return this.i_()}get f_(){return this.Gz}get pqt(){return this.RXt}get ht(){return this.dT}get Lqt(){return this.kqt.xXt===this}Af(){return Ai.SB().ks()}mf(){}pf(t){}Vf(){return 1}Wf(t){}qf(){return new Ai([0,this.Mf]).ks()}s_(){return!1}n_(){return this.Dl}o_(){return this._T}cs(){return this.w_().cs}w_(){return this.xB}ka(){}async gn(){this.Vo(),this.dT.gn(),this._T.gn(),this.Dl.gn(),this.RXt.gn(),this.Qo.fn(l.Hg,this.Ds)}UXt(){f$&&this.QXt(),this.Lqt||this.kqt.zXt(this)}YHt(){this.Lqt&&(f$&&this.FXt(),fi.vb&&this.we.querySelectorAll("video[src]").forEach((t=>{t.src=""})),i.Ys.tit&&this.Qo.I_(),this.kqt.YHt())}QXt(){this.YXt||(_s.addEventListener("blur",this.GXt),_s.addEventListener("focus",this.VXt),this.YXt=!0)}FXt(){_s.removeEventListener("blur",this.GXt),_s.removeEventListener("focus",this.VXt),this.YXt=!1}WXt(){requestAnimationFrame((()=>this.Qo.be()))}constructor(t,i){super(t,!0),this.kqt=i,this.YXt=!1,this._T=new Ae,this.dT=new Ae,this.Dl=new _i,this.fT=new Fc,this.RXt=new Io,this.xB=new Mu,this.Gz=new ni,this.GXt=()=>{this.Qo.ge()},this.VXt=()=>{this.WXt()},this.Qo.yn(l.Hg,this.Ds)}},_$=0,g$="theoplayer-wrapper",w$=class t{get HXt(){return this.qXt}get XXt(){return this.ZXt}get KXt(){return 1===this.ZXt.length&&SK(this.ZXt[0].sources.type)}get JXt(){return this.$Xt}tZt(t){const i=this.iZt===t.timeOffset;return!this.eZt&&i}get sZt(){return this.nZt}get rZt(){return bK(this.hZt)&&!this.eZt}get iZt(){return this.hZt}get Kl(){return this.oZt}aZt(){if(S(this.oZt)){let t=this.iZt;if(void 0===t)return void(this.oZt=0);if("string"==typeof t&&bK(t)){const i=this.Qo.Td();S(i)||i===1/0||(t=rc(t)*i)}S(t)||(this.oZt=t)}}get uZt(){return this.cZt}set uZt(t){this.cZt=t}get lZt(){return this.dZt}set lZt(t){this.dZt=t,this.fZt=!1}get _Zt(){return this.gZt}wZt(t){this.gZt.push(t)}AZt(){if(!this.eZt){let t,i;const e=this.qXt===Zi.H7&&void 0===this.vZt&&1===this.ZXt.length,s=this.ZXt[0];if(SK(s.sources.type)||e)t=s.sources.src;else{if(S(this.Qo.Td())&&"end"===this.mZt())return;i=this.pZt()}let n=this.Qo.Td();(S(n)||n===1/0)&&(n=-3),this.eZt={yZt:this.Qo.we.offsetWidth,MZt:this.Qo.we.offsetHeight,TZt:this.Qo.we.offsetWidth,NZt:this.Qo.we.offsetHeight,DZt:this.s7,IZt:this.LB,SZt:t,EZt:i,bZt:s.omidAccessModeRules,LZt:n}}return this.eZt}pZt(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.ZXt.map(((t,i)=>this.kZt(t.sources,i))).join("\n")+"</vmap:VMAP>"}kZt(t,i){const e=this.mZt(),s=t.src;return'<vmap:AdBreak timeOffset="'+e+'" breakType="linear,nonlinear" breakId="theoplayer-break-'+this.Mg+"-"+i+'"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:VASTAdData><VAST version="3.0"><Ad id="'+g$+"-"+this.Mg+"-"+i+'"><Wrapper allowMultipleAds="true" followAdditionalWrappers="true"><VASTAdTagURI><![CDATA['+s+"]]></VASTAdTagURI></Wrapper></Ad></VAST></vmap:VASTAdData></vmap:AdSource></vmap:AdBreak>"}mZt(){if(0===this.iZt)return"start";if(this.iZt===1/0)return"end";const t=this.iZt;if("string"==typeof t&&bK(t)){const i=rc(t)*this.Qo.Td();return Ji.cYt(i)}return Ji.cYt(this.iZt||0)}CZt(t){this.ZXt.push(t)}xZt(t){const i=g$+"-"+this.Mg+"-";for(const e of t)if(At(e,i)){const t=Number(e.slice(i.length));if(!S(t)&&t>=0&&t<this.ZXt.length)return t}return-1}static OZt(t){if(void 0!==t)return-1===t?1/0:t}jZt(){this.nZt=!0}get DT(){return this.s7}set DT(t){this.s7=t}get Pf(){return this.LB}set Pf(t){this.LB=t}constructor(i,e,s,n){this.qXt=e,this.Qo=s,this.$Xt=n,this.oZt=NaN,this.cZt=!1,this.dZt=!1,this.nZt=!1,this.gZt=[],this.s7=!1,this.LB=!1,this.ZXt=[],this.Mg=++_$,this.vZt=i.timeOffset,this.hZt=t.OZt(this.vZt),this.aZt(),this.ZXt.push(i)}},A$=class{get zZt(){return this.PZt.zZt}get BZt(){return this.PZt.BZt}get Y7(){return this.PZt.Y7}get t(){return this.PZt.t}Cqt(t){this.RZt=t}UZt(t){return!(this.zZt&&!this.zZt.sZt&&"nonlinear"!==this.BZt.Zqt)||this.zZt.Kl>t.Kl&&this.zZt.Kl!==t.Kl}QZt(t){if(t.length)return t.sort(((t,i)=>t.Kl-i.Kl))[0]}FZt(){if(this.Y7.length)return this.QZt(this.YZt(this.t.Tf()))}GZt(){if(!(void 0!==this.RZt&&this.RZt>=0))return this.Y7.filter((t=>!t.uZt&&0===t.Kl&&t!==this.zZt))[0]}YZt(t){if(!this.VZt&&(this.VZt=!this.Y7.some((t=>S(t.Kl))),!this.VZt))return[];const i=this.Y7.filter((i=>!i.uZt&&(i.KXt||!S(i.Kl)&&t<=i.Kl)));return void 0===this.RZt?i:i.filter((t=>t.KXt||void 0===t.iZt||t.Kl>this.RZt))}constructor(t){this.VZt=!1,this.PZt=t,this.RZt=void 0}};!function(t){t[t.WZt=0]="WZt",t[t.HZt=1]="HZt",t[t.qZt=2]="qZt"}(l$||(l$={}));var Ut,v$,wu,m$,p$=class{v_(){this.bo=!0,this.XZt&&this.ZZt()}KZt(t,i){this.JZt(t,i);const e=Po(this.Y7,(i=>i.tZt(t)));if(e)e.CZt(t);else{var s;const e=new w$(t,i,this.Qo,null==(s=t.replaceContent)||s);this.Gqt.push(e),2===this.$Zt&&this.tKt.pXt(e.Kl,e,e.iZt),this.iKt(i,e)}}get BZt(){return this.eKt}get Y7(){return this.Gqt}get t(){return this.Qo}get Wzt(){return Boolean(this.Xgt)}get $Zt(){return this.sKt}nKt(){if(To(this.Y7,this.zZt),this.zZt){for(const t of this.zZt._Zt)this.tKt.rKt();this.zZt=void 0}}hKt(){for(const t of this.Gqt)for(const i of t._Zt)this.tKt.oKt(i,!0);No(this.Gqt)}async aKt(t){this.nKt(),this.uKt=!0,this.zZt=t,this.cKt=t.Kl,this.Xgt=this.lKt(t),await this.Xgt,this.Xgt=void 0}async lKt(t){this.dKt(t);const i=t.AZt();if(!i)return this.uKt=!1,void(this.zZt=void 0);const e=this.eKt.fKt(i);t.uZt=!0;try{await e,t.HXt===Zi.V7&&this.eKt._Kt()}catch(t){0,this.zZt=void 0,await this.ZZt()}}dKt(t){this.bo?t.DT=!0:t.DT=this.kqt.DT,t.Pf=this.kqt.Pf}gKt(){var t;return null!=(t=this.wKt.GZt())?t:this.wKt.FZt()}async ZZt(){if(this.zZt&&!this.zZt.sZt)return this.Xgt;const t=this.gKt();t&&await this.aKt(t)}get zZt(){return this.AKt}set zZt(t){this.AKt=t}get uKt(){return this.vKt}set uKt(t){this.vKt=t}tr(){this.nKt(),No(this.Gqt),this.cKt=0,this.zZt=void 0,this.Xgt=void 0,this.uKt=!1}lZt(){this.uKt=!1,this.zZt&&(this.zZt.lZt=!0)}async iKt(t,i){t===Zi.V7&&this.bo&&this.wKt.UZt(i)&&!this.Wzt&&"linear"!==this.eKt.Zqt&&(!this.zZt||this.zZt&&this.zZt.uZt)&&(await Promise.resolve(),await this.aKt(i))}jZt(){this.zZt&&this.zZt.jZt()}get mKt(){if(this.Wzt||this.uKt)return!1;if(this.zZt&&!this.zZt.sZt)return!1;return!!this.Gqt.filter((t=>this.zZt!==t)).length&&Boolean(this.gKt())}async pKt(){if(!this.mKt)return void 0;const t=this.gKt();t&&await this.aKt(t)}JZt(t,i){const e=t.sources.type,s=i===Zi.H7&&void 0===t.timeOffset,n=SK(e)||s?1:2;n!==this.sKt&&(this.sKt=n,this.hKt(),this.eKt.eVt&&!this.Wzt&&"linear"!==this.eKt.Zqt&&(this.eKt.eVt.Ud(),this.zZt=void 0,this.Xgt=void 0),this.cKt=0,this.XZt=!0)}Cqt(t){this.wKt.Cqt(t)}gn(){this.Qo.fn(l.Xg,this.xU)}constructor(t,i,e,s,n){this.sKt=0,this.Xgt=void 0,this.vKt=!1,this.xU=()=>{const t=this.Gqt.filter((t=>t.rZt));for(const i of t){i.aZt();const t=i.iZt;this.tKt.yKt(t,i.Kl)}this.bo&&this.mKt&&this.ZZt()},this.Gqt=[],this.eKt=t,this.bo=!1,this.XZt=!1,this.Qo=i,this.kqt=e,this.zZt=void 0,this.cKt=0,this.wKt=new A$(this),this.h7=s,this.tKt=n,this.Qo.yn(l.Xg,this.xU)}};function y$(t,i){if(t===Ut.MKt){const t=i;return{TKt:t.adBreakDuration,NKt:t.adPosition,Mf:t.currentTime,ct:t.duration,DKt:t.totalAds}}return i}function M$(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return m$.IKt;case google.ima.AdError.Type.AD_PLAY:return m$.SKt}}function T$(t){return $l(t)&&sd(t.getVastErrorCode)}function N$(t){const i=t.getInnerError(),e=i&&T$(i)?N$(i):void 0;return{Ob:t.getMessage(),DFt:t.getErrorCode(),EKt:t.getVastErrorCode(),Rg:M$(t.getType()),bKt:e}}function D$(t){if(Yt(t))return t}!function(t){t.LKt="contentResumeRequested",t.kKt="contentPauseRequested",t.CKt="click",t.Xg="durationChange",t.xKt="expandedChanged",t.OKt="start",t.jKt="impression",t.Qw="pause",t.zKt="resume",t.MKt="adProgress",t.PKt="adBuffering",t.BKt="firstQuartile",t.HQt="midpoint",t.RKt="thirdQuartile",t.qQt="complete",t.UKt="userClose",t.QKt="linearChanged",t.FKt="loaded",t.YKt="adCanPlay",t.GKt="adMetadata",t.VKt="adBreakReady",t.WKt="interaction",t.HKt="allAdsCompleted",t.qKt="skip",t.XKt="skippableStateChanged",t.ZKt="log",t.KKt="viewableImpression",t.JKt="volumeChange",t.$Kt="mute"}(Ut||(Ut={})),(v$||(v$={})).tJt="adError",function(t){t[t.iJt=-1]="iJt",t[t.eJt=-1]="eJt",t[t.sJt=-1]="sJt",t[t.nJt=101]="nJt",t[t.rJt=102]="rJt",t[t.hJt=200]="hJt",t[t.oJt=201]="oJt",t[t.aJt=202]="aJt",t[t.uJt=300]="uJt",t[t.cJt=301]="cJt",t[t.lJt=302]="lJt",t[t.dJt=303]="dJt",t[t.fJt=400]="fJt",t[t._Jt=402]="_Jt",t[t.gJt=403]="gJt",t[t.wJt=405]="wJt",t[t.AJt=500]="AJt",t[t.vJt=501]="vJt",t[t.mJt=-1]="mJt",t[t.pJt=503]="pJt",t[t.yJt=602]="yJt",t[t.MJt=900]="MJt",t[t.TJt=901]="TJt",t[t.NJt=1005]="NJt",t[t.DJt=1007]="DJt",t[t.IJt=1009]="IJt",t[t.SJt=1010]="SJt",t[t.EJt=1011]="EJt",t[t.bJt=1012]="bJt",t[t.LJt=1013]="LJt",t[t.kJt=1020]="kJt",t[t.CJt=1021]="CJt",t[t.xJt=1101]="xJt",t[t.OJt=1204]="OJt",t[t.jJt=1205]="jJt",t[t.zJt=1300]="zJt",t[t.PJt=-1]="PJt",t[t.BJt=-1]="BJt",t[t.RJt=-1]="RJt",t[t.UJt=-1]="UJt"}(wu||(wu={})),function(t){t.IKt="adLoadError",t.SKt="adPlayError"}(m$||(m$={}));var I$=class extends xd{QJt(t){this.eKt.Co(t)}FJt(t){this.sVt=t,this.sVt.yn(v$.tJt,this.YJt),this.sVt.yn(Ut.kKt,this.GJt),this.sVt.yn(Ut.LKt,this.VJt),this.sVt.yn(Ut.HKt,this.WJt),this.sVt.yn(Ut.OKt,this.HJt),this.sVt.yn(Ut.qQt,this.qJt),this.sVt.yn(Ut.qKt,this.XJt),this.sVt.yn(Ut.UKt,this.ZJt),this.sVt.yn(Ut.CKt,this.KJt),this.sVt.yn(Ut.YKt,this.JJt),this.sVt.yn(Ut.Qw,(()=>{this.eKt.Ff||(this.eKt.$Jt(!0),this.eKt.Co(new ge(this.eKt.Mf))),this.t$t(!0)})),this.sVt.yn(Ut.zKt,(()=>{this.eKt.Ff&&(this.eKt.$Jt(!1),this.eKt.Co(new sh(this.eKt.Mf)))})),this.sVt.yn(Ut.$Kt,(()=>{const i=t.l_();i>=0&&this.i$t(i)})),this.sVt.yn(Ut.JKt,(()=>{const i=t.l_();i>=0&&this.i$t(i)})),this.sVt.yn(Ut.GKt,(t=>{this.s$t.e$t(t.type)})),this.sVt.yn(Ut.Xg,(t=>{t.Z7&&this.n$t(t.Z7.ct)})),this.sVt.yn(Ut.ZKt,(async t=>{const i=t.r$t.adError,e=T$(i)?N$(i):void 0;e&&(this.h$t(e)?await this.o$t(t):this.a$t(e)?await this.u$t(e):this.c$t(e)&&this.l$t(e))})),this.sVt.yn(Ut.FKt,(t=>{if(t.Z7&&(this.eKt.lZt(),this.s$t.d$t(t.Z7),this.f$t=0,t.Z7._$t)){var i;const t=this.eKt.Jf,e=ae.aT;this.eKt.T0(e);const s=this.eKt.Mf,n=this.eKt.Jf;n!==t&&this.QJt(new uw(s,n)),null==(i=this.sVt)||i.d_(this.eKt.g$t()),this.QJt(new ns(s,e))}})),this.sVt.yn([Ut.PKt,Ut.jKt,Ut.BKt,Ut.HQt,Ut.RKt],(t=>{t.Z7&&this.s$t.w$t(t.Z7,t.type,this.eKt.Mf)})),this.sVt.yn(Ut.BKt,this.A$t),this.sVt.yn(Ut.MKt,this.v$t)}async switchToPlayerIfNoNextAd(){if(this.sVt){const t=this.sVt.m$t();t&&this.p$t(t)||(this.eKt.mKt()?await this.eKt.pKt():(this.eKt.y$t(),this.Qo.Ff&&!this.Qo.If&&this.Qo.p_()))}else if(this.eKt.mKt())await this.eKt.pKt();else{const t=this.eKt.Ff;this.eKt.y$t(),t||this.Qo.p_()}}p$t(t){const i=t.M$t,e=null==i?void 0:i.DKt;return(null==i?void 0:i.NKt)!==e}j$(){this.eKt.jc&&(m(this.eKt.jc),this.eKt.jc=null)}c$t(t){return t.Rg===m$.IKt}a$t(t){return t.Rg===m$.SKt}h$t(t){return t.DFt===wu.IJt}async u$t(t){var i;this.l$t(t);const e=[wu.fJt,wu.TJt,wu.CJt,wu.jJt];var s;this.eKt.ctt||gd(e,t.DFt)||gd(e,null==(i=t.bKt)?void 0:i.DFt)||(this.eKt.T$t.uKt=!1,null==(s=this.eKt.T$t.zZt)||s.jZt(),await this.switchToPlayerIfNoNextAd())}l$t(t){this.eKt.NXt(t)}async N$t(){this.s$t.rKt(),this.eKt.jZt(),"nonlinear"===this.eKt.Zqt&&(this.s$t.D$t(-1,!1),this.eKt.I$t(void 0)),"nonlinear"!==this.eKt.Zqt&&"none"!==this.eKt.Zqt||this.eKt.mKt()&&await this.eKt.pKt(),this.eKt.S$t(),this.eKt.Lqt?this.eKt.YHt():this.E$t()&&this.Qo.Co(new ee(this.Qo.Tf()))}E$t(){return this.eKt.b$t&&!this.eKt.L$t&&this.Qo.If}setCountdownTimer(){this.j$(),this.eKt.jc=v((()=>this.t$t()),250)}async o$t(t){void 0!==t.Z7&&(this.eKt.T$t.uKt=!1,this.eKt.jZt(),this.eKt.mKt()?await this.eKt.pKt():this.eKt.$Jt(!0))}n$t(t){this.eKt.ct!==t&&t>=0&&(this.eKt.t0(t),this.QJt(new jn(this.eKt.ct)))}i$t(t){this.eKt.g$t()!==t&&(0===t?this.eKt.k$t(t,!0,!1):this.eKt.k$t(t,!1,!1))}async C$t(){this.eKt.x$t&&void 0!==this.Qo.Ef()&&(this.O$t=new na,await this.Qo.ga(this.Qo.Wa(),this.O$t.Wd),this.j$t&&this.Qo.Nf(this.j$t),this.j$t=void 0)}t$t(t){if(this.sVt){const t=this.sVt.z$t();t>this.eKt.ct&&this.n$t(_.round(t))}const i=this.eKt.Mf;(t||!this.eKt.Ff&&i!==this.eKt.P$t)&&(this.eKt.Co(new Pc(i,void 0)),this.eKt.P$t=i)}tr(){this.O$t&&(this.O$t.qd(),this.O$t=void 0),this.B$t=!1,this.f$t=0}gn(){this.tr(),this.Vo()}constructor(t,i,e){super(),this.eKt=t,this.Qo=i,this.s$t=e,this.B$t=!1,this.O$t=void 0,this.j$t=void 0,this.f$t=0,this.A$t=t=>{if(!t.Z7||!t.Z7.M$t)return;const i=t.Z7.M$t;this.s$t.yXt(i.nbt,i.DKt,i.tVt)},this.v$t=t=>{var i,e,s;if(this.f$t>=5)return;this.f$t++;const n=t.r$t;if(!function(t){return $l(t)&&void 0!==t.TKt&&void 0!==t.DKt}(n))return;const r=null==(s=this.sVt)||null==(e=s.m$t())||null==(i=e.M$t)?void 0:i.nbt;void 0!==r&&this.s$t.yXt(r,n.DKt,n.TKt)},this.YJt=async t=>{t.r$t.R$t&&await this.u$t(t.r$t.R$t)},this.WJt=async()=>{this.B$t=!0,this.eKt.jZt(),await this.VJt()},this.HJt=t=>{if(!t.Z7)return;const i=t.Z7;this.eKt.I$t(i),this.eKt.ge(),this.eKt.U$t(),this.s$t.Q$t(i);const e=i.ct;if(this.n$t(e),i._$t){const t=this.eKt.Mf,i=this.eKt.Jf;this.eKt.T0(ae.cT),this.QJt(new us(t,i)),this.QJt(new xt(t,i)),this.QJt(new ds(t,i)),this.eKt.Ff||this.QJt(new Zr(this.eKt.Mf)),this.setCountdownTimer(),this.t$t(!0)}else this.eKt.YHt(),this.Qo.ge(),this.eKt.Ff||this.Qo.p_()},this.qJt=t=>{var i;if(!t.Z7)return;const e=t.Z7;if(this.j$(),this.s$t.D$t(this.eKt.ct,e._$t),this.eKt.Jf!==ae.aT){const t=ae.aT;this.eKt.T0(t);const i=this.eKt.Mf;this.QJt(new uw(i,t))}this.n$t(NaN),this.eKt.F$t=!1,null==(i=this.sVt)||i.d_(this.eKt.g$t())},this.XJt=t=>{t.Z7&&(this.qJt(t),this.s$t.XJt(t.Z7,this.eKt.Mf,this.eKt.ct))},this.ZJt=t=>{t.Z7&&(this.s$t.D$t(-1,t.Z7._$t),this.eKt.jZt(),!t.Z7._$t&&this.eKt.mKt()&&this.eKt.pKt())},this.KJt=t=>{t.Z7&&(t.Z7._$t?this.eKt.m_():this.Qo.m_())},this.JJt=()=>{var t;(this.eKt.F$t=!0,this.eKt.Y$t)&&(null==(t=this.sVt)||t.m_(),this.eKt.Y$t=!1)},this.GJt=t=>{var i;if(!t.Z7)return;this.eKt.x$t&&(this.j$t=this.Qo.Tf(),this.Qo.D_(),this.Qo.g_=!0),this.eKt.G$t=!0;const e=t.Z7;this.s$t.Md(e);const s=e.ct;this.eKt.I$t(e),this.n$t(s),this.eKt.$Jt(!1),this.eKt.ge(),this.eKt.UXt(),this.eKt.x$t||this.Qo.be(),this.Qo.m_(),this.eKt.V$t(e);0===(null==(i=e.M$t)?void 0:i.nbt)||this.eKt.Co(new lc(this.eKt.Mf))},this.VJt=async t=>{const i=null==t?void 0:t.Z7;this.eKt.G$t=!1,"linear"===this.eKt.Zqt&&this.s$t.Pd(),i&&i.ct>=0&&this.n$t(i.ct),this.Qo.Td()===1/0&&this.eKt.W$t(),this.eKt.F$t=!1,this.B$t&&await this.N$t(),this.eKt.$Jt(!0);try{await this.C$t()}catch(t){return void(Ho(t)||this.Co(new xX(t)))}if(this.eKt.YHt(),this.eKt.be(),this.Qo.If||this.Qo.p_(),i&&this.eKt.I$t(i),this.eKt.b$t){if(this.eKt.x$t){var e;const t=this.Qo.A_(),i=null==(e=this.Qo.bt)?void 0:e.src;t&&i&&(t.src=i)}this.eKt.L$t=!0}this.Qo.g_=!1,this.eKt.mKt()&&await this.eKt.pKt()}}},S$=class extends Hi{get AYt(){return A.NVt}constructor(t,i,e){super(t),this.H$t=i,this.q$t=e}},E$=class extends xe{set X$t(t){this.Z$t=t}get X$t(){return this.Z$t}get AYt(){return A.so}AVt(){var t;return null==(t=this.K$t)?void 0:t.eUt}get J$t(){var t;return null==(t=this.K$t)?void 0:t.WUt}get SUt(){var t;return null==(t=this.K$t)?void 0:t.SUt}get Jz(){var t;return null==(t=this.K$t)?void 0:t.Jz}get $$t(){var t,i;return null!=(i=null==(t=this.K$t)?void 0:t.$$t)?i:[]}get t0t(){var t,i;return null!=(i=null==(t=this.K$t)?void 0:t.t0t)?i:[]}get i0t(){var t,i;return null!=(i=null==(t=this.K$t)?void 0:t.i0t)?i:[]}fa(){return function(t,i){return N(t,{bitrate:0,contentType:void 0,mediaUrl:void 0,traffickingParameters:void 0,traffickingParametersString:void 0,universalAdIds:[],get apiFramework(){return i.J$t},get creativeId(){return i.SUt},get title(){return i.Jz},get wrapperAdIds(){return i.$$t},get wrapperAdSystems(){return i.t0t},get wrapperCreativeIds(){return i.i0t}})}(XJ(this),this)}e0t(t){this.K$t=t;const i=b$(t);this.Hqt(t.yQt,t.s0t,t.n0t,t.ct,i,-1)}constructor(t,i){super(t,i),this.Z$t=0,this.K$t=void 0}};function b$(t){return t.lUt.map((t=>new ZJ(t)))}var L$=class extends xe{fa(){return function(t,i){return N(t,{get adSystem(){return i.AVt()},get apiFramework(){return i.J$t},get bitrate(){return i.r0t},get contentType(){return i.qz},get creativeId(){return i.SUt},get mediaUrl(){return i.h0t},get title(){return i.Jz},get traffickingParameters(){return i.o0t},get traffickingParametersString(){return i.a0t},get wrapperAdIds(){return i.$$t},get wrapperAdSystems(){return i.t0t},get wrapperCreativeIds(){return i.i0t},get universalAdIds(){return i.fUt}})}(XJ(this),this)}e0t(t){this.K$t=t,this.Hqt(t.yQt,t.s0t,t.n0t,t.ct,b$(t),t.u0t),this.Kqt=t._$t?ss.CFt:ss.xFt}get AYt(){return A.NVt}AVt(){return this.K$t?k$(this.K$t.eUt):void 0}get J$t(){return this.K$t?k$(this.K$t.WUt):void 0}get r0t(){return this.K$t?this.K$t.c0t:0}get qz(){return this.K$t?k$(this.K$t.qz):void 0}get SUt(){return this.K$t?k$(this.K$t.SUt):void 0}get l0t(){return this.K$t?k$(this.K$t.l0t):void 0}get h0t(){var t;const i=null==(t=this.K$t)?void 0:t.h0t;return Yt(i)?i:this.d0t}set h0t(t){this.d0t=t}get Jz(){var t;return null==(t=this.K$t)?void 0:t.Jz}get o0t(){return this.K$t?k$(this.K$t.o0t):void 0}get a0t(){return this.K$t?k$(this.K$t.a0t):void 0}get $$t(){var t,i;return null!=(i=null==(t=this.K$t)?void 0:t.$$t)?i:[]}get t0t(){var t,i;return null!=(i=null==(t=this.K$t)?void 0:t.t0t)?i:[]}get i0t(){var t,i;return null!=(i=null==(t=this.K$t)?void 0:t.i0t)?i:[]}get fUt(){var t,i;return null!=(i=null==(t=this.K$t)?void 0:t.fUt.map((t=>({adIdRegistry:t.f0t,adIdValue:t._0t}))))?i:[]}constructor(t){super(t,ss.rT),this.K$t=void 0,this.d0t=void 0}};function k$(t){return null===t?void 0:t}var C$=class{get pqt(){return this.s$t.pqt}get wqt(){return this.g0t}get Lqt(){return this.s$t.Lqt}get F7(){var t;return null!=(t=this.s$t.F7)?t:null}get U7(){const t=this.s$t.w0t;return t?[t]:[]}get Y7(){return this.s$t.Y7}get G7(){return this.s$t.G7}ntt(t){this.s$t.ntt(t)}Hm(){this.s$t.Hm()}gn(){return Promise.resolve()}constructor(t,i){this.s$t=t,this.g0t=i}},x$=class{get A0t(){return this.v0t}get pqt(){return this.RXt}get Lqt(){return this.m0t}get w0t(){return this.vVt}get F7(){return this.bVt}get Y7(){return rs(this.LVt,(t=>{if(t.Hf)return[];const i=t.Oc;if(t===this.bVt&&void 0!==this.vVt){const t=i.indexOf(this.vVt);if(t>=0)return i.slice(t+1)}return i}))}get G7(){return this.LVt.filter((t=>!t.Hf))}constructor(t,i){this.RXt=t,this.LVt=[],this.m0t=!1,this.v0t=new C$(this,i)}},O$=class extends je{fa(){return new j$(this.Z7.Q7())}constructor(t){super("p0t",t)}},j$=class extends Fs{constructor(t){super("adimpression",t)}},z$=class extends yo{fa(){return new P$(this.Z7.Q7())}constructor(t){super("y0t"),this.Z7=t}},P$=class extends wn{constructor(t){super("adbuffering"),this.ad=t}},B$=class extends yo{fa(){return new R$}constructor(){super("M0t")}},R$=class extends wn{constructor(){super("admetadata")}},U$=class t extends x${T0t(t,i){for(let e=0;e<t;e++){const t=new L$(i);i.Qqt(t),this.pqt.Co(new ar(t))}}pXt(t,i,e){let s=t;s===1/0&&(s=-1);const n=new S$(s,e,i);this.LVt.push(n),i.wZt(n),this.pqt.Co(new _n(n))}yKt(t,i){for(const e of this.LVt)S(e.nbt)&&e.H$t===t&&(e.nbt=i,this.pqt.Co(new Jr(e)))}oKt(t,i){void 0===i&&(i=!1),i&&To(this.LVt,t),this.pqt.Co(new Vn(t))}rKt(){if(this.F7){this.oKt(this.F7,!0);const t=Boolean(this.vVt&&this.vVt.Zqt===ss.CFt);this.N0t(void 0,t)}}wXt(t,i){const e=i.M$t;if(!e)return;const s=e.NKt-1,n=t.Oc[s];return n.e0t(i),this.pqt.Co(new cJ(n)),n.Xl.tVt=e.tVt,n}get Lqt(){return this.D0t.Lqt}I0t(t){if(!gd(this.S0t,t)){if(t){if(this.vVt===t)return;this.vVt=t;for(const i of this.E0t)this.e$t(i,t,this.D0t.Mf)}else{if(!this.vVt)return;const t=new gh(this.vVt,this.vVt.Xl.nbt);this.S0t.push(this.vVt),this.vVt=void 0,this.RXt.Co(t)}No(this.E0t)}}N0t(t,i){if(t){var e;if((null==(e=this.F7)?void 0:e.nbt)===t.nbt)return;this.bVt=t,i&&this.pqt.Co(new Nu(this.bVt))}else{if(!this.bVt)return;const t=new ms(this.bVt);this.bVt=void 0,No(this.S0t),i&&this.RXt.Co(t)}}b0t(t){return this.LVt.filter((i=>ku(i.nbt,t,.01)))[0]}static L0t(t,i){if(i.M$t)return t.Oc[i.M$t.NKt-1]}Md(t){if(!t.M$t)return;const i=t.M$t,e=this.b0t(i.nbt);e&&(No(this.E0t),this.N0t(e,t._$t))}Pd(){this.F7&&this.pqt.Co(new ms(this.F7)),No(this.E0t),this.rKt()}Q$t(i){if(!this.bVt&&i.M$t){const t=this.b0t(i.M$t.nbt);this.N0t(t,i._$t)}if(this.bVt){const e=t.L0t(this.bVt,i);if(!e)return;this.wXt(this.bVt,i);const s=i.h0t;Yt(s)&&!Yt(e.h0t)&&(e.h0t=s,this.pqt.Co(new cJ(e))),this.I0t(e),this.pqt.Co(new Nh(this.vVt,e.Xl.nbt))}else 0}D$t(t,i){if(this.I0t(void 0),!i&&this.F7){const t=this.F7;this.N0t(void 0,!1),this.oKt(t)}}d$t(t){const i=t.M$t;if(!i)return;const e=this.b0t(i.nbt);if(!e)return;this.yXt(i.nbt,i.DKt,i.tVt);const s=this.wXt(e,t);s&&this.pqt.Co(new Mc(s))}yXt(t,i,e){const s=this.b0t(t);if(!s)return;const n=s.Oc.length;if(i>n){const t=i-n;this.T0t(t,s),s.tVt=e,this.pqt.Co(new Jr(s))}}XJt(i,e,s){if(!this.bVt)return;const n=t.L0t(this.bVt,i);if(n){const t=e/s;this.pqt.Co(new xs(n,t))}}w$t(i,e,s){if(!this.bVt)return;let n=this.vVt;if(!n){const s=t.L0t(this.bVt,i);if(!s||gd(this.S0t,s))return void this.E0t.push(e);n=s,this.wXt(this.bVt,i),this.I0t(n)}this.e$t(e,n,s)}e$t(t,i,e){t===Ut.GKt?this.pqt.Co(new B$):t===Ut.jKt&&i?this.pqt.Co(new O$(i)):t===Ut.PKt&&i?this.pqt.Co(new z$(i)):t===Ut.BKt&&i&&e?this.pqt.Co(new s$(i,e)):t===Ut.HQt&&i&&e?this.pqt.Co(new r$(i,e)):t===Ut.RKt&&i&&e&&this.pqt.Co(new o$(i,e))}Hm(){this.D0t.Hm()}ntt(t){this.D0t.ntt(t)}tr(){const t=Boolean(this.vVt&&this.vVt.Zqt===ss.CFt);this.I0t(void 0),this.N0t(void 0,t);for(const t of this.LVt)this.oKt(t);No(this.LVt),No(this.E0t),No(this.S0t)}gn(){this.tr()}constructor(t,i){super(t,A.NVt),this.D0t=i,this.E0t=[],this.S0t=[]}};function Q$(t){const i=s.google.ima.settings;t.ads&&t.ads.vpaidMode&&s.google.ima.settings.setVpaidMode(function(t){const i=s.google.ima.ImaSdkSettings.VpaidMode;switch(t){case Ba.ENABLED:return i.ENABLED;case Ba.INSECURE:return i.INSECURE;case Ba.DISABLED:default:return i.DISABLED}}(t.ads.vpaidMode)),i.setPlayerVersion("7.12.0"),i.setPlayerType("THEOplayer"),i.setAutoPlayAdBreaks(!0),i.setDisableCustomPlaybackForIOS10Plus(!F$(t));const e=function(t){var i,e,s;const n=null==(e=t.ads)||null==(i=e.googleIma)?void 0:i.language;if(void 0!==n)return n;const r=null==(s=t.ui)?void 0:s.language;if(Qs(r))return r;return}(t);e&&i.setLocale(e)}function F$(t){return fi.Ga&&t.allowNativeFullscreen}var Y$=class t extends Du{get vqt(){return this.tKt.A0t}get k0t(){return this.tKt}get T$t(){return this.PZt}get x$t(){return F$(this.LH)}C0t(t,i,e){i===Zi.H7&&void 0!==e&&(this.xqt=e),this.PZt.KZt(t,i)}static get wqt(){return A.NVt}get wqt(){return t.wqt}get x0t(){return this.LH.ads.preload===Un.MIDROLL_AND_POSTROLL}ntt(t){const i=this.O0t();for(const e of i)kZ(e.sources,e.timeOffset)||t.n4(e,Zi.V7,!1)}O0t(){const t=[],{U7:i,Y7:e}=this.vqt,s=[];for(const n of i.concat(e)){const i=n.Xl.q$t;if(gd(s,i.Mg))continue;const e=i.xZt(n.$$t);e>=0?t.push(...i.XXt.slice(e)):t.push(...i.XXt),s.push(i.Mg)}for(const i of this.PZt.Y7)i.uZt||t.push(...i.XXt);return Do(t)}set Zqt(t){this.Kqt=t}get Zqt(){return this.Kqt}get eVt(){return this.sVt}set eVt(t){this.sVt=t,this.j0t=!1}Tf(){if(!this.eVt)return 0;const t=this.eVt.z$t();return S(this.ct)||t<0?0:this.ct-t}Nf(t){}Td(){return this.VL||NaN}t0(t){this.VL=t}Bf(){return this.Qo.Pf}Rf(t){this.k$t(this.c_,t,!0)}Yf(){return this.kB}$Jt(t){this.kB=t}get F$t(){return this.z0t}set F$t(t){this.z0t=t}get ctt(){return this.xqt}get b$t(){return this.P0t}get Y$t(){return this.B0t}set Y$t(t){this.B0t=t}get L$t(){return this.R0t}set L$t(t){this.R0t=t}h_(){var t,i,e;return null!=(e=null==(i=this.eVt)||null==(t=i.m$t())?void 0:t.n0t)?e:0}u_(){var t,i,e;return null!=(e=null==(i=this.eVt)||null==(t=i.m$t())?void 0:t.s0t)?e:0}gf(){return[]}Cqt(t){this.RZt=t,this.PZt.Cqt(t)}_Kt(){!this.j0t&&this.eVt&&(this.eVt.Cn(),this.j0t=!0)}I$t(t){this.Zqt=t?t._$t?"linear":"nonlinear":"none"}i_(){return Ai.SB().ks()}l_(){return this.Qo.c_}d_(t){this.k$t(t,this.Pf,!0)}g$t(){return this.Qo.Pf?0:this.Qo.c_}k$t(t,i,e){const s=this.Qo.c_!==t||this.Qo.Pf!==i;s&&(this.Qo.c_=t,this.Qo.Pf=i),this.eVt&&e&&this.eVt.d_(this.g$t()),s&&this.Co(new Je(this.Mf,this.c_))}Sf(){return!1}Ef(){if(this.U0t&&this.xqt)return this.U0t}Lf(){if(this.Q0t&&this.xqt)return this.Q0t}$f(){return this.M0}T0(t){this.M0=t,this.Co(new ro(this.Mf,t))}get G$t(){return this.F0t}set G$t(t){this.F0t=t}v_(){this.Qo.fn(l.jh,this.Y0t),this.bo||(this.bo=!0,this.PZt.v_(),this.U$t())}async p_(){if(this.G0t)return;this.V0t.qd(),this.V0t=new na;const t=this.Ff;this.$Jt(!1),this.Co(new sh(this.Mf)),this.W0t()||(this.x$t||this.Qo.be(),this.Co(new lc(this.Mf))),this.F$t||(this.Y$t=!1);const i=Boolean(this.eVt);this.G0t=this.PZt.ZZt();try{await this.G0t}finally{this.G0t=void 0}try{Bo(this.V0t.Wd)}catch(t){return}if(this.bo||this.Y0t(),!this.U0t||!this.xqt)if(this.eVt){if(t)if(i)try{Bo(this.V0t.Wd),this.eVt.H0t(),this.Co(new Zr(this.Mf))}catch(t){return}else this._Kt()}else this.xqt||(this.YHt(),this.kqt.p_())}m_(){var t;this.Ff||(this.$Jt(!0),this.Co(new ge(this.Mf))),this.V0t.qd(),this.F$t?null==(t=this.eVt)||t.m_():this.Y$t=!0}Hm(){var t;null==(t=this.eVt)||t.Hm()}S$t(){this.eVt&&(this.X0t.q0t(),this.eVt.y_(),this.eVt.Ud(),this.eVt=void 0,this.Zqt="none",this.j0t=!1)}async y_(){var t;this.P$t=0,this.PZt.tr(),this.V0t.qd(),this.$Jt(!0),this.P0t=!1,this.R0t=!1,this.F$t=!1,this.tKt.tr(),this.S$t(),this.y$t(),null==(t=this.Z0t)||t.tr(),this.Y$t=!1,this.X0t.Ud()}ge(){this.K0t.ge(),this.x$t&&this.Qo.ge()}be(){this.K0t.be()}J0t(){return Boolean(this.eVt)&&gd(this.eVt.$0t(),-1)&&!this.P0t}lZt(){this.PZt.lZt()}mKt(){return this.PZt.mKt}jZt(){this.PZt.jZt()}pKt(){return this.PZt.pKt()}Tqt(t){if(this.J0t()){if(t.type===l.Sh&&this.Qo.If)return!0;if(t.type===l.Jg)return this.P0t=!0,this.X0t.q0t(),!0}return!1}W0t(){return Boolean(this.eVt&&this.eVt.m$t())}async fKt(t){try{this.S$t();const i=this.t1t();this.K0t.bW(),this.eVt=await this.X0t.fKt(t,this.Z0t,i),this.i1t(this.eVt)}catch(t){this.e1t.u$t(t)}}i1t(t){if(t.d_(this.g$t()),this.PZt.$Zt===l$.HZt){const i=t.$0t();if(i.length)for(const t of i)this.tKt.pXt(t,this.PZt.zZt);else this.tKt.pXt(this.PZt.zZt.Kl,this.PZt.zZt)}this.e1t.tr(),this.e1t.FJt(t)}A_(){if(this.sVt&&this.x$t&&this.W0t())return this.Qo.A_()}w_(){return this.x$t&&this.Lqt?this.Qo.ya:super.w_()}t1t(){const t=!!(this.PZt.$Zt===l$.HZt)&&this.x0t;let i,e;void 0!==this.LH.ads.googleIma.uiElements?i=this.LH.ads.googleIma.uiElements:this.LH.ads.showCountdown||(i=[]),void 0!==this.LH.ads.allowedMimeTypes&&(e=this.LH.ads.allowedMimeTypes);return{s1t:e,n1t:i,r1t:t,r0t:this.LH.ads.googleIma.bitrate,h1t:void 0,o1t:this.RZt}}U$t(){if(this.sVt){const t=this.t1t();this.sVt.a1t(t)}}NXt(t){this.U0t=new Ac(vw.ADVERTISEMENT_ERROR,t.Ob),this.Q0t=new $i(Ui.AD_ERROR,"There was a problem playing ads.",this.U0t),this.pqt.Co(Vo.Nqt(t))}y$t(){this.Lqt&&(this.Qo.ge(),this.YHt(),this.be())}W$t(){var t;if(this.Qo.Tf()===1/0||0===this.Qo.i_().length)return;(null==(t=this.PZt.zZt)?void 0:t.JXt)&&-1!==this.u1t&&(this.Qo.Nf(this.Qo.Tf()+this.u1t),this.u1t=-1)}V$t(t){var i,e;this.u1t=null!=(e=null==(i=t.M$t)?void 0:i.tVt)?e:-1}YHt(){super.YHt(),this.Qo.ge(),this.x$t&&!this.Qo.If&&this.Qo.p_()}WXt(){this.x$t||super.WXt()}async gn(){this.e1t.fn(ut.ha,this.c1t),await super.gn(),this.S$t(),this.X0t.fn("l1t",this.d1t),this.X0t.Ud(),this.K0t.Ud(),this.PZt.gn(),this.e1t.gn()}constructor(t,i,e,s,n,r,h){super(t,i),this.bo=!1,this.xqt=!1,this.U0t=void 0,this.Q0t=void 0,this.u1t=-1,this.Kqt="none",this.F0t=!1,this.j0t=!1,this.V0t=new na,this.z0t=!1,this.B0t=!1,this.d1t=t=>{this.pqt.Co(t)},this.c1t=t=>{this.U0t=new Ac(vw.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.Q0t=Hs(this.U0t)},this.P$t=NaN,this.Y0t=()=>{this.bo||this.v_()},this.LH=e,this.kB=!0,this.VL=NaN,this.M0=ae.aT,this.P0t=!1,this.R0t=!1,this.tKt=new U$(this.pqt,this),this.e1t=new I$(this,this.Qo,this.tKt),this.e1t.yn(ut.ha,this.c1t),this.Qo.yn(l.jh,this.Y0t),this.PZt=new p$(this,this.Qo,this.kqt,s,this.tKt),this.Z0t=h,this.X0t=r,this.K0t=n,this.be(),this.X0t.yn("l1t",this.d1t)}},Iu=class{registerWebImaAdPlayerConstructor(t){this.f1t=t}createAdPlayer(t,i,e){return G$()&&this.f1t?this.f1t(t,i,e):void 0}};function G$(){if(Boolean(_s.google&&_s.google.ima)){return!(1===w.keys(_s.google.ima).length&&_s.google.ima.dai)}return!1}Iu.Ib=new Iu;var V$=class{get dqt(){return Y$.wqt}lR(t){return t&&t.integration===Fr.GOOGLE_IMA}fqt(t,i,e){return Iu.Ib.createAdPlayer(t,i,e)}n4(t,i,e,s){e.C0t(t,i,s)}LQ(t){const i=gc(t.sources);if(!i)return;const e={integration:Fr.GOOGLE_IMA,sources:i,omidAccessModeRules:D$(t.omidAccessModeRules)},s=ah(t.timeOffset);return void 0!==s&&(e.timeOffset=s),e}};ta.Ib.dR(new V$);var W$=class extends yo{fa(){return new H$}constructor(){super("EVt")}},H$=class extends wn{constructor(){super("adloaded")}},vh=-1,q$=class{get nVt(){return this.LVt}get _1t(){return this.g1t}get Tot(){return this.Ptt}get w1t(){return this.hZt}get A1t(){return this.v1t}get Kl(){if(S(this.m1t)){const t=Ji.dYt(this.hZt,this.aVt.t.Td());void 0===t||S(t)||(this.m1t=t)}return this.m1t}p1t(){return this.Ptt<this.LVt.length}Mc(){let t;return this.Ptt<this.LVt.length&&(t=this.LVt[this.Ptt],this.Ptt++),t}y1t(t){t.FFt=this,this.LVt.push(t)}async M1t(t){let i=!1;for(const e of this.LVt)try{await e.$n(),i=!0}catch(i){0,To(this.LVt,e);const s=e.att.sources,n="string"==typeof s?s:s.src;t.Co(Vo.Dqt(i,n))}return this.v1t=!0,i}dVt(){this.lVt=!0}cVt(){return this.lVt}T1t(){return this.LVt.some((t=>tJ(t).some((t=>t.uUt))))}constructor(t,i){this.LVt=[],this.lVt=!1,this.hZt=t,this.Ptt=0,this.aVt=i,this.m1t=NaN,this.v1t=!1,this.g1t=new sJ(this,this.aVt)}},X$=class t extends Mo{get N1t(){let t=0;for(const i of this.D1t)i.cVt()||(t+=1);return t}I1t(){this.E1t.S1t()}Cn(){this.Po(),this.b1t.yn("ett",this.E1t.L1t)}jn(){this.$o(),this.b1t.fn("ett",this.E1t.L1t),this.U$=this.tN,this.E1t.tr();for(const t of this.D1t)t.dVt();No(this.D1t)}Po(){this.k1t||(this.Qo.yn(l.Sw,this.C1t),this.k1t=!0)}$o(){this.k1t&&(this.Qo.fn(l.Sw,this.C1t),this.k1t=!1)}get Y7(){return this.D1t}x1t(){return this.O1t(new Pc(vh,void 0))}j1t(t){return this.z1t(t,0,0).length>0}P1t(t,i){let e,s=0;for(const n of this.D1t){if(n.cVt())continue;const r=n.Kl;r>=t&&r<=i&&r>=s&&!S(r)&&(e=n,s=e.Kl)}return e}B1t(t){return this.O1t(new Pc(t,void 0))}R1t(){if(!this.U1t&&void 0!==this.RZt){this.U1t=!this.D1t.some((t=>S(t.Kl)));for(const t of this.D1t)t.Kl!==vh&&t.Kl<=this.RZt&&!t.cVt()&&t.dVt()}}Q1t(t){for(const i of t)i.dVt();this.OXt.F1t(t),0===this.N1t&&this.$o()}z1t(t,i,e){return this.D1t.filter((s=>{if(s.cVt())return!1;const n=s.Kl;return this.Y1t(n,t)||this.G1t(n,t,i,e)}))}Y1t(t,i){switch(i){case 0:return 0===t;case vh:return t===vh;default:return!1}}G1t(t,i,e,s){if(t<0)return!1;const n=t-i;return-1!==n&&n<=e&&n>=-s}V1t(i){if(i&&i.length>0){for(const e of i){const i=t.OZt(e.nbt);let s=this.O_t(e);-1===s&&(this.U1t=void 0===this.RZt,this.D1t.push(new q$(i,this.W1t)),s=this.D1t.length-1);this.D1t[s].y1t(e)}this.Po()}}static OZt(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}O_t(i){const e=t.OZt(i.nbt);return uu(this.D1t,(i=>e===t.OZt(i.w1t)))}H1t(t){To(this.D1t,t)}Cqt(t){this.RZt=t,this.U1t=void 0===t}constructor(t,i,e,s){super(),this.U1t=!1,this.C1t=t=>D(this.O1t(t)),this.O1t=async t=>{this.R1t();const i=t.currentTime,e=t.currentTime!==vh?this.P1t(this.U$,t.currentTime):this.z1t(t.currentTime,0,0)[0];let s,n;const r=this.Qo.Td()-10;if(n=this.j1t(vh)&&_.ceil(i)===_.ceil(r)?this.z1t(vh,10,0).filter((t=>!t.A1t)):this.z1t(i,10,0).filter((t=>!t.A1t)),n.length){const t=(await Promise.all(n.map((t=>t.M1t(this.b1t))))).some((t=>!0===t));t&&this.Co(new W$),(!t||!this.E1t.q1t||n[0].Kl<this.E1t.q1t.Kl)&&(s=n[0])}e&&(e!==this.E1t.q1t&&(s=e),this.Q1t([e])),s&&(this.E1t.L1t(),this.E1t.q1t=s,await this.E1t.S1t()),S(this.Qo.Td())||(this.U$=t.currentTime)},this.Qo=t,this.OXt=i,this.W1t=new eJ(this.OXt,this.Qo),this.RZt=void 0,this.U1t=!1,t.Td()!==1/0?this.tN=0:this.tN=t.Tf(),this.U$=this.tN,this.D1t=[],this.b1t=e,this.E1t=s,this.k1t=!1}},Z$=class extends Mo{get X1t(){return this.PWt}get pqt(){return this.RXt}Z1t(){this.K1t(),this.J1t(),this.Bz=void 0}$1t(t){this.t4t=this.t4t.concat(t)}i4t(t){this.e4t=this.e4t.concat(t)}J1t(){this.t4t=[]}K1t(){this.e4t=[]}s4t(t){for(const i of this.t4t)i.IU===t&&EZ(i.eventURL)}ge(){this.X1t.style.display=""}be(){this.X1t.style.display="none"}gn(){this.Vo(),this.RXt.Vo(),fh(this.PWt)}constructor(t,i){super(),this.e4t=[],this.t4t=[],this.Bz=void 0,this.RXt=new Mo,this.n4t=t=>{t.stopPropagation(),this.r4t()},this.r4t=()=>{for(const t of this.e4t)for(const i of t.oQt)EZ(i.uri)},this.PWt=h.createElement("div"),this.PWt.style.display="none",this.h4t=t,this.o4t=i}};function K$(t,i){let e=i;if(!function(t){return"ui"in t}(t))return e;const s=t.ui.language;let n;if(Qs(s)){const i=t.ui.languages;if(!i)return e;n=i[s]}else n=s;return n&&n[i]&&(e=n[i]),e}var J$={[ii.kA]:1,[ii.CA]:2,[ii.xA]:2};function $$(t,i){const e=i?i.map((t=>t.toLowerCase())):i;return qc(t.filter((t=>{const i=t.type.toLowerCase();return!!Gt(e)&&-1!==e.indexOf(i)&&cK(i)})),((t,i)=>J$[t.type]-J$[i.type])).map(t0)}function t0(t){return Ia({src:t.contentURL,type:t.type,isAdvertisement:!0})}function i0(t,i){return kU(e0(t),e0(i))}function e0(t){return{Ti:t.height,ji:t.width}}function s0(t,i,e,s){const n=function(t,i,e,s){let n,r=1/0;const h=t.filter((t=>!cK(t.type))).filter((t=>void 0===s||-1!==s.indexOf(t.type)));if(h.length){for(const t of h){const s=(_.abs(t.width/i-1)+_.abs(t.height/e-1))/2;s<r&&(r=s,n=t)}return t0(n||h.sort(i0)[0])}}(t,i.width,i.height,e),r=$$(t,e);return n&&r.push(n),ca({sources:r},s)}var da,n0=class extends Z${get a4t(){return this.u4t}get Mf(){return this.c4t.Mf}get ct(){let t=this.c4t.ct;return S(t)&&this.DQt&&(t=this.DQt.ct||0),t}get If(){return this.c4t.If}get Pf(){return this.c4t.Pf}set Pf(t){this.c4t.Pf=t,t?this.s4t(gs.zQt):this.s4t(gs.PQt)}get Ff(){return this.c4t.Ff}get Jf(){return this.c4t.Jf}get c_(){return this.c4t.c_}set c_(t){this.c4t.c_=t}get r_(){return this.c4t.r_}get a_(){return this.c4t.a_}get l4t(){return this.d4t}p_(){this.c4t.Ff&&(this.c4t.p_(),this.Co(new sh(this.Mf)),this.u4t&&this.s4t(gs.BQt),this.u4t=!0)}m_(){this.c4t.Ff||(this.c4t.m_(),this.Co(new ge(this.Mf)),this.s4t(gs.Sh))}async y_(){var t;null==(t=this.Tx)||t.qd(),this.Tx=void 0,this.be(),this.u4t=!1,this.f4t=!0,this._4t(),this.g4t(),await this.w4t()}A4t(t){void 0===t&&(t=!0),this.u4t=!1,t&&this.s4t(gs.qQt),this.be(),this.o4t()}v4t(){var t;const i=null==(t=this.OXt.ba)?void 0:t.mi,e=new pJ(this.Wu,i);return this.X1t.appendChild(e.we),e.yn("Hm",this.m4t),e}p4t(){this.DQt&&this.DQt.pQt.sQt&&(this.RWt=new ju(this.X1t),this.RWt.HVt=this.DQt.pQt.sQt,this.RWt.yn("clickstart",this.y4t),this.RWt.yn("click",this.r4t))}M4t(t,i){for(const e of this.t4t)if(e.IU===gs.gw){const s=sK(e.Ku,i);void 0!==s&&this.U$<s&&s<=t&&EZ(e.eventURL)}}async T4t(){if(!this.DQt||!this.N4t)return;const t=s0(this.DQt.LQt,this.N4t,this.lx.ads.allowedMimeTypes,this.lx);if(!t.sources.length)return await this.c4t.tr(),this.h4t(""),void this.DQt.kUt();this.Tx=new na,this.f4t=!0,await this.c4t.ga(t,this.Tx.Wd),this.c4t.ge(),this.DQt.kUt(),this.p4t()}async D4t(t,i,e){this.d4t=t,this.DQt=t.uUt,this.c4t.yn(l.Sw,this.I4t),this.c4t.yn(l.Xg,this.S4t),this.c4t.yn(l.Ew,this.E4t),this.c4t.yn(fn,this.Ds),this.DQt.wUt&&0!==this.DQt.wUt.length&&this.$1t(this.DQt.wUt),this.DQt.pQt&&this.i4t(this.DQt.pQt),this.Bz=i,this.N4t=e,0!==this.DQt.LQt.length&&(this.c4t.yn(ut.ha,this.b4t),await this.T4t(),this.c4t.yn(l.Jg,this.L4t),this.c4t.yn(l.Sw,this.k4t),this.c4t.yn(he.Rw,this.C4t),this.c4t.yn(l.mw,this.Ds))}tGt(){this.a4t&&this.x4t&&this.m4t()}get x4t(){return this.DQt&&-1!==this.DQt.xQt&&this.c4t.Mf>=this.DQt.xQt}O4t(){this.s4t(gs.Qyt),this.d4t&&this.pqt.Co(new Nh(this.d4t,this.Mf))}async w4t(){this.c4t.fn(ut.ha,this.b4t),this.c4t.fn(l.Jg,this.L4t),this.c4t.fn(l.Sw,this.k4t),this.c4t.fn(he.Rw,this.Ds),this.c4t.fn(he.Rw,this.C4t),this.c4t.fn(l.mw,this.Ds),this.c4t.fn(l.Sw,this.I4t),this.c4t.fn(l.Xg,this.S4t),this.c4t.fn(l.Ew,this.E4t),this.c4t.fn(fn,this.Ds),this.d4t&&(this.d4t.dVt(),this.pqt.Co(new gh(this.d4t,this.Mf))),this.j4t(),this.Z1t(),this._4t(),this.g4t(),this.d4t=void 0,this.DQt=void 0,this.N4t=void 0,await this.c4t.tr(),this.c4t.be(),this.X1t.style.cursor="",this.z4t=0,this.U$=-1,this.P4t&&(this.B4t.w4t(),this.P4t=!1)}j4t(){this.RWt&&(this.RWt.Ud(),this.RWt=void 0)}g4t(){this.R4t&&(fh(this.R4t),this.R4t=void 0)}_4t(){this.FWt&&(this.FWt.gn(),this.FWt=void 0)}U4t(){this.P4t=!0}Q4t(){var t;this.R4t||(this.R4t=h.createElement("div"),this.R4t.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this.X1t.appendChild(this.R4t));const i=null==(t=this.d4t)?void 0:t.Xl;if(!i)return;const e=i.Oc.filter(aJ);let s=K$(this.lx,"The content will play in")+" "+_.round(i.iVt)+" "+K$(this.lx,"seconds");if(e.length>1){const t=e.filter((t=>t.cVt())).length;s+=". "+K$(this.lx,"Ad")+" "+(t+1)+"/"+e.length}rr(this.R4t,s)}constructor(t,i,e,s,n,r,h){super(t,i),this.B4t=e,this.lx=s,this.OXt=n,this.Wu=r,this.c4t=h,this.u4t=!1,this.z4t=0,this.U$=-1,this.Tx=new na,this.f4t=!0,this.L4t=()=>{this.A4t()},this.C4t=()=>{this.Tx=void 0,this.u4t||(this.O4t(),this.u4t=!0),this.f4t&&(this.f4t=!1,this.OXt.I1t()),this.X1t.style.display="block",this.c4t.fn(he.Rw,this.C4t),this.u4t=!0},this.k4t=()=>{const t=this.Mf,i=this.ct,e=t/i;(0===this.z4t&&e>=.25?(this.s4t(gs.VQt),this.z4t=1):1===this.z4t&&e>=.5?(this.s4t(gs.HQt),this.z4t=2):2===this.z4t&&e>=.75&&(this.s4t(gs.WQt),this.z4t=3),this.M4t(t,i),this.Q4t(),this.U$=t,this.DQt)&&(-1!==this.DQt.xQt&&this.DQt.xQt<this.DQt.ct&&(null!=this.FWt||(this.FWt=this.v4t()),this.Mf<this.DQt.xQt?this.FWt.rWt(this.DQt.xQt-this.Mf):this.FWt.oWt()))},this.b4t=()=>{var t,i;this.Tx=void 0,this.c4t.fn(ut.ha,this.b4t),this.f4t=!0,null==(t=this.Bz)||t.MFt(Si.AFt),this.u4t=!1,this.c4t.be();const e=(null==(i=this.c4t.bt)?void 0:i.src)||"";this.h4t(e)},this.I4t=()=>{this.Ds(new Pc(this.Mf,void 0))},this.S4t=()=>{this.Ds(new jn(this.ct))},this.E4t=()=>{this.Ds(new Je(this.Mf,this.c_))},this.y4t=()=>{this.OXt.m_()},this.m4t=()=>{this.d4t&&(this.s4t(gs.UQt),this.pqt.Co(new xs(this.d4t,this.Mf/this.ct)),this.A4t(!1))},this.X1t.className="theoplayer-ad-linear",this.X1t.style.zIndex="10",ia(this.X1t),this.c4t.be(),this.P4t=!1}},r0=class t extends xd{get we(){return this.Us}aWt(){this.we.addEventListener("mouseup",this.uWt),this.we.addEventListener("touchend",this.uWt),this.we.addEventListener("mousedown",this.F4t)}hWt(){this.we.removeEventListener("mouseup",this.uWt),this.we.removeEventListener("touchend",this.uWt),this.we.removeEventListener("mousedown",this.F4t)}static cr(){const t=h.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}gn(){this.hWt(),fh(this.Us)}constructor(){super(),this.uWt=t=>{this.Co(new wn("Hm")),this.F4t(t)},this.F4t=t=>{t.stopPropagation()},this.Us=t.cr(),this.aWt()}},h0=class extends Z${get Y4t(){return this.G4t}get V4t(){return this.hu}Z1t(){super.Z1t(),this.X1t&&mM(this.X1t)}async D4t(t,i,e){this.mVt&&this.w4t(),this.G4t=t,this.mVt=t.cUt,0!==this.mVt.wUt.length&&this.$1t(this.mVt.wUt),this.Bz=i,0!==this.mVt._Ut.length&&(this.i4t(this.mVt._Ut[0].NUt),this.X1t.addEventListener("error",this.W4t),this.X1t.addEventListener("load",this.H4t),await this.T4t(),this.q4t())}tGt(){var t;if(void 0!==this.X4t)return;const i=null==(t=this.mVt)?void 0:t._Ut[0];i&&i.Xl&&-1!==i.Xl.xQt&&(this.s4t(gs.UQt),this.pqt.Co(new xs(this.G4t,0)),this.Z4t())}O4t(){void 0!==this.G4t&&this.pqt.Co(new Nh(this.G4t,this.OXt.Mf))}y_(){this.w4t(),this.G4t=void 0,this.mVt=void 0}w4t(){this.K4t(),void 0!==this.G4t&&(this.G4t.dVt(),this.pqt.Co(new gh(this.G4t,this.OXt.Mf))),this.Z1t(),this.J4t(),void 0!==this.X4t&&(c(this.X4t),this.X4t=void 0)}K4t(){this.X1t.removeEventListener("load",this.H4t),this.X1t.removeEventListener("error",this.W4t)}async T4t(){const t=h.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const i=this.mVt._Ut[0],e=h.createElement("a");if(i.NUt.sQt&&(e.href=i.NUt.sQt,e.target="Du",e.setAttribute("rel","noopener")),i.pUt){const t=i.pUt,s=h.createElement("iframe");s.src=t.lFt,e.appendChild(s)}else if(i.vUt){const t=i.vUt,s=h.createElement("img");s.src=t.lFt,e.appendChild(s)}else if(i.MUt){const t=i.MUt,s=h.createElement("iframe");s.src=t.lFt,e.appendChild(s)}i.kUt(),e.addEventListener("mousedown",this.n4t),e.addEventListener("touchend",this.n4t),this.X1t.firstChild&&(mM(this.X1t),this.w4t()),t.appendChild(e),this.X1t.appendChild(t),this.ge()}q4t(){var t;if(!this.mVt)return;const i=null==(t=this.mVt._Ut[0].Xl)?void 0:t.xQt;void 0!==i&&-1!==i&&(this.X4t=_s.setTimeout(this.$4t,1e3*i))}J4t(){this.hu&&(this.hu.fn("Hm",this.t2t),this.hu.gn()),this.hu=void 0}get i2t(){return this.OXt.e2t()}constructor(t,i,e){super(t,i),this.H4t=()=>{this.K4t(),this.s4t(gs.$Qt),this.o4t()},this.W4t=t=>{var i,e;this.K4t(),null==(i=this.Bz)||i.MFt(Si.mFt);const s=null==(e=this.mVt)?void 0:e._Ut[0];var n,r;const h=null!=(r=null!=(n=null==s?void 0:s.pUt)?n:null==s?void 0:s.vUt)?r:null==s?void 0:s.MUt;var o;this.h4t(null!=(o=null==h?void 0:h.lFt)?o:"")},this.Z4t=()=>{this.be(),mM(this.X1t),this.o4t(),this.G4t=void 0,this.mVt=void 0},this.$4t=()=>{this.hu||(this.X4t=void 0,this.hu=new r0,this.X1t.children[0].appendChild(this.hu.we),this.hu.yn("Hm",this.t2t))},this.t2t=()=>{this.s4t(gs.UQt),this.tGt()},this.X1t.className="theoplayer-ad-nonlinear",this.X1t.style.position="absolute",this.X1t.style.width="100%",this.X1t.style.bottom="3em",this.X1t.style.zIndex="10",this.X1t.style.textAlign="center",this.OXt=e}},o0=class{static async s2t(t,i,e){let s=[],n=t.shift();for(;n;){try{const t=await(new wK).zFt(n,i);s=s.concat(t)}catch(t){0;const i=Vo.Dqt(t,n.sources.src);e.Co(i)}n=t.shift()}return s}},nl=class extends yo{fa(){return new a0}constructor(){super("qrt")}},a0=class extends wn{constructor(){super("statechange")}};!function(t){t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted"}(da||(da={}));var u0=class{get Gu(){return this.Xu}get U(){return this.Xu.length}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}cg(t){return this.Xu[t]}ST(t){this.Xu.push(t),this.Xa&&this.Xa.push(t.va),this.n2t(t)}r2t(t){for(const i of t)this.ST(i)}h2t(t,i){i>=0&&i<=this.Xu.length&&(this.Xu.splice(i,0,t),this.Xa&&this.Xa.splice(i,0,t.va),this.n2t(t))}bT(t){return gd(this.Xu,t)}ET(t){this.o2t(this.Xu.indexOf(t))}o2t(t){if(!(t>=0&&t<this.Xu.length))return;const i=this.Xu[t];ja(this.Xu,t),this.Xa&&ja(this.Xa,t),this.a2t(i)}Vb(){const t=this.Xu.slice();No(this.Xu),this.Xa&&No(this.Xa);for(const i of t)this.a2t(i)}constructor(){this.Xu=[],this.Xa=void 0}},c0=class extends u0{fa(){return function(t){const i=function(t){const i=t.Gu.map((t=>t.va));return i.item=i=>{const e=0|i,s=t.cg(e);return s&&s.va||void 0},i}(t),e=new Ro(t,i);return i.addEventListener=(t,i)=>{e.yn(t,i)},i.removeEventListener=(t,i)=>{e.fn(t,i)},i}(this)}yn(t,i){this.u2t.yn(t,i)}sf(t){this.u2t.sf(t)}Vo(){this.u2t.Vo()}Co(t){this.u2t.Co(t)}fn(t,i){this.u2t.fn(t,i)}uf(t){this.u2t.uf(t)}cf(t){this.u2t.cf(t)}lf(t,i){return this.u2t.lf(t,i)}constructor(...t){super(...t),this.u2t=new Mo,this.Ds=t=>{this.Co(t)}}};var l0,d0=class extends wn{constructor(t){super("addtask"),this.task=t}},f0=class extends yo{fa(){return new d0(this.c2t.va)}constructor(t){super("l2t"),this.c2t=t}},_0=class extends wn{constructor(t){super("removetask"),this.task=t}},g0=class extends yo{fa(){return new _0(this.task.va)}constructor(t){super("d2t"),this.task=t}},w0=class extends c0{n2t(t){this.Co(new f0(t))}a2t(t){this.Co(new g0(t))}constructor(){super()}};!function(t){t.UNINITIALISED="uninitialised",t.INITIALISED="initialised"}(l0||(l0={}));var A0=class extends xd{async v_(){await this.f2t(),this.cht("initialised")}async f2t(){try{await this._2t()}catch(t){0}}async _2t(){const t=await this.Xyt.Get();for(const i of t){const t=this.w2t.g2t(i.id,i.sourceDescription,i.parameters,this.A2t);this.v2t(t),this.Nx.ST(t),await t.m2t}}get kI(){return this.uht}cht(t){this.uht=t,this.Co(new nl)}get p2t(){return this.Nx}g2t(t,i,e){void 0===e&&(e="persistent");const s=this.w2t.y2t(t,i,e);return this.M2t(s,e),this.Nx.ST(s),this.v2t(s),s}async M2t(t,i){try{await this.T2t(t,i)}catch(t){throw g("Unable to persist task - "+t)}}async T2t(t,i){await this.Xyt.Qet({key:t.o,id:t.o,sourceDescription:t.yc,parameters:t.cI},i)}v2t(t){t.yn("qrt",(()=>{t.kI===da.EVICTED&&this.Nx.ET(t)}))}constructor(t,i,e){super(),this.uht="uninitialised",this.Nx=new w0,this.w2t=i,this.A2t=e,this.Xyt=t,this.v_()}};var ka=class{get NB(){return this.N2t}get D2t(){return this.I2t}get S2t(){return this.E2t.NB}get b2t(){let t=0,i=0;return this.IT.forEach((e=>{t+=e.timeRanges.NB,i+=e.totalQualityDurationToCache})),0===i?0:_.min(1,t/i)}get E2t(){return this.L2t}oN(t){return!!Th(this.IT,t.IT)&&(!!od(this.I2t,t.I2t)&&(!!od(this.NB,t.NB)&&(!!od(this.S2t,t.S2t)&&this.E2t.vB(t.E2t))))}constructor(t,i,e){if(this.I2t=t,this.IT=i,this.N2t=e,0===this.IT.size)this.L2t=Ai.SB();else{let t=new Ai([-1/0,1/0]);this.IT.forEach((i=>{t=t.Sn(i.timeRanges)})),this.L2t=t}}};ka.QUALITY_TIME_RANGES_NULL_OBJECT=Eo(),ka.CACHE_PROGRESSION_NULL_OBJECT=new ka(0,ka.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),ka.k2t=ka.CACHE_PROGRESSION_NULL_OBJECT;var v0=class extends wn{constructor(){super("progress")}},m0=class extends yo{fa(){return new v0}constructor(){super("nXt")}};var p0,y0=class extends hs{get name(){return"C2t"}constructor(t,i){super(t,i)}};async function M0(t,i,e){const s=[];for(const n of t.uwt)s.push(T0(n,i,e));return{x2t:await Promise.all(s)}}async function T0(t,i,e){const s=[];for(const n of t.Wnt)N0(n)||s.push(S0(n,i,e));return{Z:await Promise.all(s),Rg:t.Rg}}function N0(t){return t.irt.every(I0)}!function(t){t[t.kA=0]="kA",t[t.CA=1]="CA"}(p0||(p0={}));var D0=1;function I0(t){return t.uAt!==D0&&Boolean(t.uAt)}async function S0(t,i,e){const s=[];for(const i of t.irt)I0(i)||s.push(E0(i,e));const n=await Promise.all(s),r=t.mst[0],h=t.pst,o=h?function(t,i){const e=[],s=function(t){return t?is(t,"avc")?Qe.VIDEO_H264:is(t,"hev")||is(t,"hvc")||is(t,"hvt")||is(t,"lhv")||is(t,"lhe")||is(t,"lht")?Qe.VIDEO_H265:is(t,"mp4")?Qe.VIDEO_MP4:is(t,"mpeg2")?Qe.VIDEO_MPEG2:is(t,"mpeg")?Qe.VIDEO_MPEG:Qe.VIDEO_UNKNOWN:Qe.VIDEO_UNKNOWN}(t);for(const t of i){const i=t.yst.split(":").pop(),n=t.Ywt;e.push({mimeType:s,uuid:i,data:n})}const n=p0.kA,r=Jf;return{type:n,schemeType:r,schemeDatas:e}}(r,h):void 0,a=bV(t,i,!0);return{Ng:n,gs:t.R6,Rg:t.Rg,Xz:o,Qgt:a}}async function E0(t,i){const e=await async function(t,i){const e=[],s=t.lnt;t.ict&&e.push({GT:0,ct:0,O2t:t.ict});const n=s.Cvt();let r=n;for(;r;){if(t.Vat(r)){const s=await t.Hat(r,i,(new na).Wd);for(let i=0;i<s.U;i++)e.push(b0(s.Xat(i),t))}else e.push(b0(r,t));r=s.Kat(r)}const h=s.zvt(),o=h.VT-n.GT;return{ct:o,tst:e}}(t,i),s={o:L0(t),tT:e,wz:t.wz,hit:t.hit,Ti:t.Ti,Rg:t.Rg,ji:t.ji};switch(t.Rg){case Vt.Ru:break;case Vt.pm:var n,r;s.zct=null!=(r=null==(n=t.zct)?void 0:n.vN())?r:NaN;break;case Vt.ym:s.audioSamplingRate=t.rAt}return s}function b0(t,i){return{GT:t.GT,ct:t.ct,O2t:i.tut(t)}}function L0(t){return t.Rat.Cn+"-"+(""+t.o)}function k0(t,i){const e=function(t){const i=function(t){const i=Eo();for(const e of t){let t=i.get(e.pIt);t||(t={Rg:e.Rg,Pp:[]},i.set(e.pIt,t)),t.Pp.push(e)}return i}(t),e=si();return i.forEach((t=>{for(const i of t.Pp){let s=e.get(t.Rg);s||(s=Eo(),e.set(t.Rg,s));let n=s.get(i.l);n||(n=[],s.set(i.l,n)),n.push(i)}})),e}(t);return function(t,i){const e=si();return t.forEach(((t,s)=>{const n=Eo();t.forEach(((t,e)=>{const r=[];for(const e of t){const t=C0(e,s,i);r.push(t)}n.set(e,r)})),e.set(s,n)})),e}(e,i)}function C0(t,i,e){const s=t.pIt,n={CIt:t,lSt:[]};for(const t of e)aq(i,s,t)&&n.lSt.push(t);return n}async function x0(t,i){const e=await i.zyt([t],{});return OH(e.IS,{},e.Byt)}async function O0(t,i){return tH(t)?async function(t,i){const e=k0(t.Pp,t.abt),s=await async function(t,i){const e=[],s=t.entries();for(let t=s.next();!t.done;t=s.next()){const[s,n]=t.value,r=await P0(n,s,i);e.push(r)}return e}(e,i),n=await async function(t,i){const e=[];for(const o of t){var s,n;const t=await Q0(o.cvt,i);var r,h;t.wz=o.wz,t.hit=o.mst?z0(o.mst):"",t.Ti=null!=(r=null==(s=o.eSt)?void 0:s.Ti)?r:0,t.ji=null!=(h=null==(n=o.eSt)?void 0:n.ji)?h:0,e.push(t)}return{Rg:Vt.rT,Z:[{gs:EQ,Rg:Vt.rT,Ng:e}]}}(t.abt,i);return s.push(n),{ct:j0(s),j2t:[t.cvt],pwt:[{x2t:s}]}}(t,i):function(t){const i=F0(t);return{ct:i.ct,j2t:[t.cvt],pwt:[{x2t:[{Rg:Vt.rT,Z:[{Rg:Vt.rT,gs:EQ,Ng:[{o:t.cvt,tT:i,wz:0,hit:"",Ti:0,Rg:Vt.rT,ji:0}]}]}]}]}}(t)}function j0(t){let i=-1/0;for(const e of t)for(const t of e.Z)i=_.max(i,...t.Ng.map((t=>t.tT.ct)));return i}function z0(t){return[t.JIt,t.$It,t.pEt].filter(Yt).join(",")}async function P0(t,i,e){const s=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,i]=t.value,n=await B0(i,e);s.push(n)}return{Rg:R0(i),Z:s}}async function B0(t,i){const e=[],s=t[0].CIt;for(const s of t){const t=await U0(s,i);e.push(t)}return{gs:s.gs||EQ,Rg:R0(s.Rg),Ng:e}}function R0(t){switch(t){case Ri.ym:return Vt.ym;case Ri.pm:return Vt.pm;case Ri.Mm:case Ri.TEt:return Vt.Ru;default:return Vt.rT}}function U0(t,i){const e=function(t){const i=t.CIt.cvt,e=t.lSt.map((t=>t.cvt));return i||(e.length?e[0]:void 0)}(t);return Q0(e,i)}async function Q0(t,i){let e={ct:0,tst:[]};if(t){const s=await x0(t,i);Fo(s)&&(e=F0(s))}return{o:t||"default",z2t:t,tT:e,wz:0,hit:"",Ti:0,Rg:Vt.rT,ji:0}}function F0(t){const i=[];let e,s=0;for(const n of t.tst){const t=s;!n.dbt||void 0!==e&&eH(n.dbt.cvt,e)||(i.push(Y0(n.dbt,t)),e=n.dbt.cvt),i.push(G0(n,t)),s+=n.ct}return{ct:s,tst:i}}function Y0(t,i){return{GT:i,ct:0,O2t:V0(t.cvt)}}function G0(t,i){return{GT:i,ct:t.ct,O2t:V0(t.cvt)}}function V0(t){return{zu:t.jM,Bht:t.Umt?[t.Umt.Cn,t.Umt.Cn+t.Umt.U]:void 0,AS:!1}}var W0=class{async P2t(t){if(!t.src)throw new g("Invalid typed source");const i=t.type;if(Ra(i))return await this.B2t(t);if(Xg(i))return await this.R2t(t);throw new g("Unexpected source type")}async B2t(t){try{const i=await x0(t.src,this.Pyt);return await O0(i,this.Pyt)}catch(t){throw new g("Unable to fetch HLS manifest")}}async R2t(t){try{const e=new KG({Ug:i.Dh(t.src),wyt:t.liveOffset,yyt:t.timeServer,AS:t.useCredentials},this.U2t,zb.SV,this.Pyt,t.dash);return await e.W,await async function(t,i,e){const s=[];for(const n of t.pwt)s.push(M0(n,i,e));const n=await Promise.all(s);return{ct:t.KAt.jwt(),j2t:[t.oyt],pwt:n}}(e.Tr.Jut,t.contentProtection,this.$at)}catch(t){throw new g("Unable to fetch DASH manifest")}}constructor(t,i,e){this.Pyt=t,this.$at=i,this.U2t=e}},H0=class{Q2t(){const t=new Rs;return this.F2t.push(t),this.Y2t(),t.Zb}async G2t(t,i){try{await t}finally{this.V2t-=1,this.Y2t(),0===this.F2t.length&&0===this.V2t&&i.Wb(!0)}}Y2t(){if(this.F2t.length>0&&this.V2t<this.W2t){this.F2t.shift().Wb(),this.V2t+=1}}constructor(t){this.F2t=[],this.V2t=0,this.W2t=t}};var q0=class extends xd{get m2t(){return this.v_()}async v_(){const t=new W0(this.Pyt,this.$at,this.U2t);this.H2t=await t.P2t(this.q2t);const i=function(t,i){if(Qs(t)){if(is(t,"%"))return C(t)/100*i;throw new g("Unexpected - Invalid string supplied as amount to cache.")}return i<t?i:t}(this.Zyt.cI.amount,this.H2t.ct);let e;this.N2t=i;const s=Ti(this.H2t.j2t[0]),n=(await this.$et.ist.Wet(s,"manifestURL")).filter((t=>gd(t.references,this.Zyt.o))),r=[],h=this.Zyt.cI.bandwidth;for(const t of this.H2t.pwt)for(const i of t.x2t)for(const t of Z0(i,this.Zyt.cI.preferredTrackSelection))for(const i of J0(t.Ng,h))r.push(i);this.X2t=_.ceil(r.map((t=>t.wz*function(t,i){let e=0;for(const s of t.tT.tst.map((t=>t.ct)))if(e+=s,e>=i)return e;return e}(t,i)/8)).reduce(((t,i)=>t+i),0));const o=Eo();if(n&&0!==n.length){const t=n.reduce(((t,i)=>t+i.byteSize),0);for(const t of n){const i=t.qualityId,e=new Ai(t.startsAndEnds);if(o.has(i))o.get(i).timeRanges=o.get(i).timeRanges.cB(e).uB(5e-4);else{const t=Po(r,(t=>t.o===i));var a;const s=_.min(this.N2t,null!=(a=null==t?void 0:t.tT.ct)?a:1/0);o.set(i,{timeRanges:e,totalQualityDurationToCache:s})}}e=new ka(t,o,this.N2t)}else{for(const t of r)o.set(t.o,{timeRanges:Ai.SB(),totalQualityDurationToCache:_.min(t.tT.ct,this.N2t)});e=new ka(0,o,this.N2t)}this.Z2t=e}get K2t(){return this.X2t}get Z2t(){return this.J2t}set Z2t(t){this.J2t.oN(t)||(this.J2t=t,t.oN(ka.k2t)||this.Co(new m0))}async pi(t){await this.bo,await this.$2t(this.H2t,t)}async $2t(t,i){if(!t.j2t)throw new g("Unexpected - manifest is missing locations");await this.t3t();const e=[];for(const s of t.pwt)e.push(this.i3t(s,t.j2t[0],i));return Xc(e)}async t3t(){const t=await this.e3t.Get();for(const i of t){const t=await this.$et.sst.Fb(i.key);if(t)await X0(t,this.Zyt.o,this.$et.sst,this.A2t);else try{await this.$et.sst.Qet(i,this.A2t)}catch(t){throw new y0("Unable to store manifest with url: "+i.locationURL,t)}}await this.e3t.qet()}i3t(t,i,e){const s=[];for(const n of t.x2t){const t=Z0(n,this.Zyt.cI.preferredTrackSelection);for(const n of t)s.push(this.s3t(n,i,e))}return Xc(s)}async s3t(t,i,e){const s=this.Zyt.cI.bandwidth,n=J0(t.Ng,s);t.Rg===Vt.pm&&t.Qgt&&t.Qgt.jO.widevine&&"persistent"===t.Qgt.jO.widevine.licenseType&&(await this.n3t(t.Qgt),Bo(e));const r=[];for(const t of n)r.push(this.r3t(t,i,e));return Xc(r)}async r3t(t,i,e){Bo(e);const s=t.tT.tst[0].GT+this.N2t,n=[];let r=!1;for(const h of t.tT.tst){if(h.GT>=s||this.stopIfFailed(r))break;await this.h3t(e),await this.o3t.Q2t(),n.push(this.o3t.G2t(this.a3t(h,t,i),this.u3t).catch((t=>(r=!0,Promise.reject(t)))))}return Xc(n)}async h3t(t){if(null==t?void 0:t.zd)throw await this.u3t.Zb,new pe}async c3t(){return await this.bo.catch(qt),this.H2t}n3t(t){return Promise.resolve()}l3t(){return i.SA("License renewal unsupported in this SDK."),Promise.resolve()}async a3t(t,i,e){const s=this.$et.ist,n=Bh(t.O2t.zu,t.O2t.Bht),r=await s.Fb(n);if(r)await X0(r,this.Zyt.o,s,this.A2t),this.d3t(r,!1);else try{const s=await this.f3t(t.O2t),{segmentMetadataEntry:n,segmentEntry:r}=this._3t(t,i,e,s);await this.$et.Jet((async t=>{await t.ist.Qet(n,this.A2t),await t.tst.Qet(r,this.A2t)})),this.d3t(n,!0)}catch(i){throw new y0("Unable to store segment with url: "+t.O2t.zu,i)}}async f3t(t){const i=await this.qot.Cht(t,{Uht:this.DEFAULT_CACHING_SEGMENT_TIMEOUT,_S:this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT});return await this.Xot(i)}async Xot(t){return{buffer:await t.cj()}}_3t(t,i,e,s){const n=Bh(t.O2t.zu,t.O2t.Bht),r=t.GT,h=t.ct,o=this.g3t(s);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:Ti(e),qualityId:i.o,byteSize:o,startsAndEnds:new Ai([r,r+h]).JP,references:[this.Zyt.o]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:Ti(e),data:s,references:[this.Zyt.o]}}}g3t(t){return t.buffer.byteLength}d3t(t,i){const e=t.qualityId,s=this.J2t,n=s.IT;n.get(e).timeRanges=n.get(e).timeRanges.cB(new Ai(t.startsAndEnds)).uB(5e-4),this.Z2t=new ka(i?s.D2t+t.byteSize:s.D2t,n,this.N2t)}stopIfFailed(t){return!1}constructor(t,i,e,s,n,r,h,o){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this.u3t=new Rs,this.J2t=ka.k2t,this.Zyt=t,this.$et=i,this.Pyt=e,this.e3t=s,this.qot=n,this.$at=r,this.U2t=o,this.A2t=h,this.X2t=-1;const a=this.Zyt.yc.sources[0];this.q2t=a,this.bo=this.v_(),this.o3t=new H0(this.Zyt.cI.parallelTasksThreshold)}};async function X0(t,i,e,s){gd(t.references,i)||(t.references.push(i),await e.Qet(t,s))}function Z0(t,i){switch(t.Rg){case Vt.ym:return K0(t.Z,i.audioTrackSelection);case Vt.Ru:return K0(t.Z,i.textTrackSelection);default:return K0(t.Z,[])}}function K0(t,i){if(0===i.length)return t.length?[t[0]]:[];const e=[];for(const s of t)i.indexOf(s.gs)>-1&&e.push(s);return e}function J0(t,i){if(!t.length)return[];const e=[...t].sort(CU),s=e.filter((t=>t.wz<=i));return s.length>0?[s.pop()]:[e.shift()]}var $0=class{async w3t(){await this.$et.Jet((async t=>{await this.A3t(t),await this.v3t(t),await this.m3t(t),await this.p3t(t)}))}async A3t(t){const i=t.nst,e=this.Zyt.o;await i.ET(e)}async v3t(t){const i=t.ist,e=t.tst,s=this.Zyt.yc.sources[0];if(!tw(s))return;const n=Ti(s.src),r=(await i.Wet(n,"manifestURL")).filter((t=>gd(t.references,this.Zyt.o)));for(const t of r)To(t.references,this.Zyt.o),0===t.references.length?(await i.ET(t.key),await e.ET(t.key)):await i.Qet(t)}async m3t(t){const i=t.sst,e=this.y3t(),s=(await i.xet(e)).filter((t=>gd(t.references,this.Zyt.o)));for(const t of s)To(t.references,this.Zyt.o),0===t.references.length?await i.ET(t.key):await i.Qet(t)}y3t(){if(!this.H2t)return[];const t=this.Zyt.yc.sources[0];if(!tw(t))return[];const i=Ti(t.src),e=function(t){if(!t)return[];const i=[];for(const e of t.pwt)for(const t of e.x2t)for(const e of t.Z)for(const t of e.Ng)t.z2t&&i.push(t.z2t);return function(t){return t.reduce(((t,i)=>(t.indexOf(i)<0&&t.push(i),t)),[])}(i)}(this.H2t).map((t=>({src:t}))).map((t=>Ti(t.src)));return[i,...e]}async p3t(t){const i=t.rst,e=(await i.Get()).filter((t=>gd(t.references,this.Zyt.o)));for(const t of e)To(t.references,this.Zyt.o),0===t.references.length?(await i.ET(t.key),this.M3t(t)):await i.Qet(t)}M3t(t){}constructor(t,i,e){this.Zyt=t,this.$et=i,this.H2t=e}},t1=new class{h9(t,i,e){return new $0(t,i,e)}};var i1=class{get va(){return this.Xa||(this.Xa=function(t){return{renew(i){t.T3t(i)}}}(this)),this.Xa}T3t(t){this.N3t(t)}async N3t(t){try{await this.D3t.l3t(t)}catch(t){0,this.Tit.cht(da.ERROR)}}constructor(t,i){this.Tit=t,this.D3t=i}},e1=class extends Mo{get m2t(){return this.D3t.m2t}get va(){return this.Xa||(this.Xa=function(t){let i,e={get id(){return t.o},get status(){return t.kI},get source(){return t.yc},get parameters(){return t.cI},get duration(){return t.ct},get cached(){return t.I3t.ks()},get secondsCached(){return t.S3t},get percentageCached(){return t.E3t},get bytes(){return t.b3t},get bytesCached(){return t.L3t},get license(){return t.PF.va},start(){t.Cn()},pause(){t.m_()},remove(){t.ET()},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new oL(t,["nXt","qrt"],e),e}(this)),this.Xa}get o(){return this.CT}get PF(){return this.k3t}get kI(){return this.uht}cht(t){this.uht!==t&&(this.uht=t,this.Co(new nl))}get yc(){return this.bc}get cI(){return this.C3t}get ct(){return this.D3t.Z2t.NB}get I3t(){return this.D3t.Z2t.E2t}get S3t(){return this.D3t.Z2t.S2t}get E3t(){return this.D3t.Z2t.b2t}get b3t(){return this.D3t.K2t}get L3t(){return this.D3t.Z2t.D2t}Cn(){this.uht===da.EVICTED||this.uht===da.DONE||this.x3t()}async x3t(){try{this.cht(da.LOADING);const t=new na;this.O3t=t,await this.D3t.pi(t.Wd),this.cht(da.DONE)}catch(t){Ho(t)?this.cht(da.IDLE):this.cht(da.ERROR)}finally{this.O3t.Ud()}}m_(){this.O3t.qd()}ET(){this.kI===da.LOADING?(this.yn("qrt",this.evictOnLoading),this.m_()):this.j3t()}async j3t(){try{const t=await this.D3t.c3t();await t1.h9(this,this.$et,t).w3t(),this.D3t.Z2t=ka.k2t,this.cht(da.EVICTED)}catch(t){0,this.cht(da.ERROR)}}constructor(t,i,e,s,n,r){super(),this.O3t=new na,this.evictOnLoading=()=>{this.fn("qrt",this.evictOnLoading),this.j3t()},this.CT=t,this.bc=i,this.C3t=e,this.$et=s,this.D3t=n.h9(this,this.$et,r),this.k3t=new i1(this,this.D3t),this.uht=1===this.D3t.Z2t.b2t?da.DONE:da.IDLE,this.D3t.yn("nXt",(t=>{this.Ds(t),1===this.E3t&&this.cht(da.DONE)}));const h=new Date,o=this.C3t.expirationDate.getTime()-h.getTime();(function(t){return t<2147483647})(o)&&u((()=>this.j3t()),o)}};var s1=class{y2t(t,i,e){const s=$e();return this.g2t(s,t,i,e)}g2t(t,i,e,s){return new e1(t,i,e,this.$et,this.z3t,s)}constructor(t,i){this.$et=t,this.z3t=i}},n1=30,r1=5;function h1(t){if(!t)throw new g("Unexpected - The cache parameters are undefined");const i=function(t){if(Qs(t)&&!is(t,"%"))return x(t);return t}(t.amount);!function(t){if(function(t){return Qs(t)&&is(t,"%")}(t)){const i=C(t);if(S(i)||i<0||i>100)throw new g("The amount as percentage must be between 0 and 100 percent.")}if(!Qs(t)&&S(t))throw new g("The amount must be a number or a string")}(i);const e=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+n1),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||id(t)&&t>new Date}(t))throw new g("Invalid expiration date for the cache parameters")}(e);const s=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(S(t)||t<0)throw new g("The bandwidth must be between zero and infinity.")}(s);const n=function(t){if(!t)return r1;if(S(t))throw new g("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:i,expirationDate:e,bandwidth:s,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}var o1=class{set q1t(t){this.P3t=t,this.B3t=0,this.R3t=0,this.U3t=void 0}get q1t(){return this.P3t}gKt(){if(!this.P3t)return;const t=this.P3t.nVt;for(;this.B3t<t.length;){const i=t[this.B3t];for(void 0===this.U3t&&(this.U3t=tJ(i),this.R3t=0);this.R3t<this.U3t.length;){const t=this.U3t[this.R3t];if(this.R3t++,void 0!==t.uUt)return t.uUt}this.B3t++,this.U3t=void 0}}tr(){for(this.q1t=void 0,this.Tx.qd(),this.Tx=new na;this.Q3t.length;)this.L1t()}F3t(t){return new A0(this.$et.nst,t,"temporary")}async Pzt(t){const i=$$(t.LQt,this.LH.ads.allowedMimeTypes);if(!i.length)return;const e=await Ye.Ib.QP(i,ca({sources:i}));if(!e.t.bP())return;this.D3t||(this.D3t=new this.z3t(this.NS));const s=this.$et,n=new s1(s,this.D3t),r=this.F3t(n).g2t(ca({sources:e.yc}),h1({amount:10,bandwidth:Yo.Ib.ez()||this.PB.kW}),"temporary");this.Q3t.push(r);const h=this.D3t.h9(r,s,"temporary");this.Tx.qd(),this.Tx=new na,h.pi(this.Tx.Wd).then(qt),this.Y3t(h,t)}constructor(t,i,e,s){this.Q3t=[],this.B3t=0,this.R3t=0,this.S1t=async()=>{const t=this.gKt();t&&await this.Pzt(t)},this.L1t=()=>{const t=this.Q3t.shift();null==t||t.ET()},this.Y3t=async(t,i)=>{let e=!1;for(;!e;)await t.lf("nXt"),e=1===t.Z2t.b2t;i.ct<5&&this.S1t()},this.LH=t,this.NS=i,this.Tx=new na,this.z3t=e,this.PB=s,this.$et=new yR}},a1={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new Ai([0,0]).JP,references:[]},u1={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},c1=class t extends UU{async vut(t,i,e,s){try{return await super.vut(t,i,e,s)}catch(t){Ao(t)}const n=await this.G3t.vut(t,i,e,s);return await this.V3t(t,i,n),n}async V3t(i,e,s){if(void 0===this.W3t)return;const n=this.$et.ist,r=Bh(i,e),h=await n.Fb(r);if(h)await X0(h,this.W3t,n,this.A2t);else try{const i={buffer:s},{segmentMetadataEntry:e,segmentEntry:n}=t._3t(r,i,this.W3t);await this.$et.Jet((async t=>{await t.ist.Qet(e,this.A2t),await t.tst.Qet(n,this.A2t)}))}catch(t){throw new y0("Unable to store segment with url: "+i,t)}}static _3t(t,i,e){return{segmentMetadataEntry:Tt({},a1,{key:t,segmentURLsegmentByteRange:t,references:[e]}),segmentEntry:Tt({},u1,{key:t,segmentURLsegmentByteRange:t,data:i,references:[e]})}}constructor(t,i,e,s,n){super(t),this.G3t=new RU(i),this.$et=e,this.W3t=s,this.A2t=n}};var l1,d1=class{h9(t,i,e){void 0===e&&(e="persistent");const s=t.yc.sources[0];if(Kg(s))throw new g("Caching THEOlive sources is not supported");const n=Boolean(s.useCredentials),r=new HR(this.NS,Re.rT),h=new lV(this.NS,n),o=new jt(i.sst,i.ist,i.tst,i.rst),a=function(t,i,e,s,n){return new c1(i,t,e,s,n)}(this.NS,o,i,t.o,e),u=new Rn,c=new wV(gV(h,o),u,t);return this.H3t(t,i,c,u,r,a,e)}constructor(t){this.NS=t}},f1=class extends d1{H3t(t,i,e,s,n,r,h){return new q0(t,i,e,s,n,r,h,DR())}},_1=f1;!function(t){t[t.NOT_INITIALISED=0]="NOT_INITIALISED",t[t.q3t=1]="q3t",t[t.X3t=2]="X3t",t[t.Rw=3]="Rw",t[t.Qw=4]="Qw",t[t.Z3t=5]="Z3t"}(l1||(l1={}));var g1=class t extends Du{get vqt(){return this}static get wqt(){return A.TVt}get wqt(){return t.wqt}C0t(t,i,e){i===Zi.V7&&this.L2?D(this.fKt([t])):this.K3t.push(t)}Tf(){return this.J3t.a4t?this.J3t.Mf:this.f7()}Nf(t){}Td(){return this.J3t.ct}Sf(){return this.J3t.If}Ef(){}Lf(){}Bf(){return this.J3t.Pf}Rf(t){this.Pf!==t&&(this.J3t.Pf=t,this.Co(new Je(this.Mf,this.c_)))}Yf(){return this.J3t.Ff}$f(){return this.J3t.Jf}i_(){return Ai.SB().ks()}h_(){return this.J3t.r_}u_(){return this.J3t.a_}l_(){return this.J3t.c_}d_(t){this.c_!==t&&(this.J3t.c_=t,this.Co(new Je(this.Mf,this.c_)))}async p_(){if(this.$3t)return;this.Co(new sh(this.Mf)),this.t5t(),this.K3t.length&&(this.$3t=this.fKt(this.K3t),await this.$3t,this.$3t=void 0),await this.i5t.B1t(this.Qo.Tf());const t=this.e5t;4!==t&&1!==t&&5!==t||(!this.bVt&&this.s5t.length?this.n5t():this.bVt?(this.r5t=!0,this.J3t.p_()):(this.YHt(),this.Qo.p_()),this.e5t=3)}m_(){3===this.e5t&&(this.J3t.m_(),this.e5t=4)}I1t(){this.i5t.I1t()}Cn(){this.e5t=1,this.i5t.Cn()}async y_(){this.i5t&&(this.i5t.jn(),this.h5t(!1),this.B4t.y_(),this.e5t=5,this.bVt&&(this.i5t.H1t(this.bVt.FFt),this.bVt=void 0)),this.L2=!1,this.r5t=!1,No(this.s5t),this.Lqt&&(this.YHt(),this.Qo.ge()),No(this.K3t),await this.J3t.y_(),await this.c4t.tr()}Hm(){this.J3t.tGt(),this.B4t.tGt()}v_(){this.c4t.v_(),this.t5t()}Tqt(t){return!(t.type!==l.Jg||!this.i5t||!this.i5t.j1t(-1))&&(this.i5t.x1t().then(qt),!0)}ge(){void 0!==this.J3t.l4t&&(this.c4t.ge(),this.J3t.ge()),void 0!==this.B4t.Y4t&&this.B4t.ge()}be(){this.c4t.be(),this.J3t.be(),this.B4t.be()}async fKt(t){const i=await o0.s2t(t,this.NS,this.pqt);if(!i.length){const t="Ads could not be loaded.";return this.pqt.Co(Vo.Dqt(new Al(Zo.ADBLOCK,ht.FILE_NOT_FOUND),t)),void(this.L2&&!this.bVt&&0===this.s5t.length&&this.o5t())}this.i5t.V1t(i),this.pqt.Co(new qh),this.Lqt||this.Qo.Ff||this.i5t.B1t(this.Qo.Tf()),0!==this.e5t&&5!==this.e5t||this.Cn()}F1t(t){this.s5t.push(...t);for(const i of t)this.L2&&!this.Lqt&&this.n5t()}async n5t(){if(2!==this.e5t&&!this.a5t){0,this.a5t=!0,this.e5t=2;const t=this.bVt;this.u5t(),this.bVt?(await this.bVt.FFt.M1t(this.pqt),this.c5t()||(this.a5t=!1),this.pqt.Co(new Nc(this.l5t(this.bVt))),await this.d5t()):((null==t?void 0:t.FFt.T1t())&&this.pqt.Co(new ms(this.l5t(t))),this.a5t=!1,this.e5t=1,this.o5t())}}o5t(){this.YHt(),this.Qo.ge(),this.Qo.If?this.Qo.Co(new ee(this.Qo.Tf())):this.Qo.p_()}u5t(){let t;if(this.bVt&&this.c5t())t=this.bVt.FFt;else{if(0===this.s5t.length)return;t=this.s5t.shift()}if(!t)return;const i=t.Mc();i?this.bVt=i:(this.bVt&&(this.i5t.H1t(this.bVt.FFt),this.bVt=void 0),this.bVt=void 0)}async d5t(){const t=this.bVt?function(t){var i,e;const s=null==(e=t.mYt)||null==(i=e.HRt)?void 0:i.qRt();return void 0===s?void 0:new $K(s)}(this.bVt):void 0;if(t){if(!this.bVt)return;this.f5t=t,this._5t(this.bVt.wUt),this.g5t(gs.hFt);const i=this.f5t.Mc();this.bVt.FFt.T1t()&&(this.B4t.w4t(),1===this.bVt.FFt.Tot&&this.pqt.Co(new Nu(this.l5t(this.bVt)))),await this.D4t(i)}else this.e5t=1,this.a5t=!1,this.bVt=void 0,this.n5t()}async D4t(t){if(t){var i;let s=Yt(t.uUt),n=Yt(t.dUt);var e;const r=null!=(e=null==(i=t.lUt)?void 0:i.zUt)?e:[],h=r.length>0,o=this.bVt,a=this.l5t(o);if(t.uUt){if(t.uUt.Xl=o,void 0!==o.att.skipOffset){const i=Ji.dYt(o.att.skipOffset,t.uUt.ct);i&&i<t.uUt.ct&&(t.uUt.xQt=i)}const i=a.rVt(t.uUt,r,t.fUt,o.att);this.B4t.w4t(),this.UXt(),await this.J3t.D4t(i,t.lt,{width:this.Qo.we.offsetWidth,height:this.Qo.we.offsetHeight}),s=!0}if(t.dUt){const i=t.dUt._Ut[0];if(i.Xl=o,void 0!==o.att.skipOffset){const t=Ji.dYt(o.att.skipOffset,this.Qo.Td());t&&(i.Xl.xQt=t)}const e=s?[]:r,h=a.hVt(i,e,t.dUt,t.fUt,o.att);s&&this.J3t.U4t(),await this.B4t.D4t(h,t.lt,{width:this.Qo.we.offsetWidth,height:this.Qo.we.offsetHeight}),n=!0}if(s){this.e5t=3,this.J3t.ge();const t=0===a.nbt;this.r5t=t,this.c4t.m_(),this.J3t.p_(),this.Qo.m_(),this.Qo.be(),this.UXt(),this.J3t.O4t()}n&&(this.e5t=3,this.B4t.ge(),this.B4t.O4t()),(s||n||h)&&this.w5t(t.hUt),s||n||await this.A5t(),!s&&n&&(this.c5t()||this.s5t.length>0?this.n5t():(this.o5t(),this.bVt=o))}else null===t?await this.A5t():this.h5t(!0)}A5t(){const t=this.f5t;return this.D4t(t&&t.Mc())}h5t(t){this.g5t(gs.oFt),this.v5t(),this.e5t=1;const i=void 0!==this.bVt&&this.bVt.FFt.p1t();if(this.a5t=!1,i)t&&(this.e5t=1,this.n5t());else{if(!this.Lqt)return;this.Qo.ge(),!this.Qo.If&&t&&this.Qo.p_(),this.YHt()}}YHt(){this.m5t(),super.YHt()}m5t(){if(this.Qo.If&&(this.e5t=5),this.bVt){const t=this.bVt.FFt;t.T1t()&&this.pqt.Co(new ms(this.l5t(this.bVt))),this.i5t.H1t(t),this.bVt=void 0}}_5t(t){this.p5t=this.p5t.concat(t)}v5t(){this.p5t=[]}y5t(t){this.Qo.we.appendChild(t)}g5t(t){for(const i of this.p5t)i.IU===t&&EZ(i.eventURL)}w5t(t){this.J3t.s4t(gs.$Qt);for(const i of t)EZ(i)}get F7(){return this.bVt?this.l5t(this.bVt):null}get U7(){return this.bVt?[this.J3t.l4t,this.B4t.Y4t].filter(Yt):[]}get Y7(){const t=this.s5t.concat(this.i5t.Y7.filter((t=>!t.cVt())));return rs(t,(t=>t._1t.Oc.filter((t=>!t.cVt()))))}get G7(){return this.i5t.Y7.map((t=>t._1t))}ntt(t){const i=this.O0t();for(const e of i)kZ(e.sources,e.timeOffset)||t.n4(e,Zi.V7,!1)}O0t(){const t=[];for(const i of this.U7.concat(this.Y7))t.push(i.att);const i=this.s5t.concat(this.i5t.Y7.filter((t=>!t.cVt())));for(const e of i)for(const i of e.nVt)i.W||t.push(i.att);return t.push(...this.K3t),Do(t)}c5t(){return!!this.bVt&&tJ(this.bVt).some((t=>t.uUt))}l5t(t){return t.FFt._1t}e2t(){return this.M5t}A_(){return this.c4t.A_()}gf(){return this.c4t.gf()}Cqt(t){this.i5t.Cqt(t)}async gn(){await super.gn(),this.Qo.fn(l.jh,this.t5t),this.pqt.ZB(this.J3t.pqt),this.pqt.ZB(this.B4t.pqt),this.pqt.ZB(this.i5t),this.J3t.gn(),this.B4t.gn(),await this.c4t.gn()}constructor(t,i,e,s,n,r){super(t,i),this.s5t=[],this.e5t=0,this.p5t=[],this.a5t=!1,this.L2=!1,this.r5t=!0,this.K3t=[],this.T5t=t=>{t.type===l.jh&&this.r5t?this.r5t=!1:this.Co(t)},this.t5t=()=>{this.L2=!0},this.N5t=async()=>(this.e5t=1,await this.J3t.w4t(),this.D4t(this.f5t.Mc())),this.D5t=async t=>{const i=new Al(Zo.PLAYBACK,ht.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.pqt.Co(Vo.Dqt(i,t)),await this.J3t.w4t(),this.D4t(this.f5t.Mc())},this.I5t=()=>(this.B4t.w4t(),this.D4t(this.f5t.Mc())),this.S5t=t=>{const i=new Al(Zo.PLAYBACK,ht.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.pqt.Co(Vo.Dqt(i,t)),this.B4t.w4t(),this.D4t(this.f5t.Mc())},this.NS=r,this.c4t=e,this.B4t=new h0(this.S5t,this.I5t,this),this.J3t=new n0(this.D5t,this.N5t,this.B4t,s,this,t.Iu,e),this.y5t(this.B4t.X1t),this.y5t(this.J3t.X1t);const h=new o1(s,r,f1,n);this.i5t=new X$(this.Qo,this,this.pqt,h),this.J3t.sf(this.T5t),this.B4t.sf(this.Ds),this.pqt.Qa(this.J3t.pqt),this.pqt.Qa(this.B4t.pqt),this.pqt.Qa(this.i5t),this.M5t=new eJ(this,this.Qo),this.Iu.yn(ve.pn,this.Ds),this.Qo.yn(l.jh,this.t5t)}};ta.Ib.dR(new class{get dqt(){return g1.wqt}lR(t){return t&&("string"!=typeof t.integration||t.integration===Fr.DEFAULT||t.integration===Fr.CSAI||t.integration===Fr.THEO)}fqt(t,i,e){const s=new tt(t.we,e,t._O,t.e7,t.f_,t.a7,t.Ol);return new g1(t,i,s,e,t.e7,t._O)}n4(t,i,e,s){e.C0t(t,i,s)}LQ(t){const i=gc(t.sources);if(!i)return;const e={integration:t.integration===Fr.CSAI?Fr.CSAI:Fr.THEO,sources:i};"vast"===e.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===e.sources.type&&void 0!==t.timeOffset&&cs("property timeOffset will be ignored for vmap ad sources");const s=ah(t.timeOffset);void 0!==s&&(e.timeOffset=s);const n=ah(t.skipOffset);return void 0!==n&&(e.skipOffset=n),e}});var w1=class{bW(){var t;this.M4||(null==(t=this.K0t)||t.initialize(),this.M4=!0)}get X1t(){return this.PWt}get E5t(){return this.b5t.offsetHeight}get L5t(){return this.b5t.offsetWidth}get k5t(){return this.K0t}C5t(t){"linear"===t?this.PWt.style.marginTop="0px":"nonlinear"===t&&(this.PWt.style.marginTop="-45px")}ge(){this.PWt.style.opacity="1",this.PWt.style.pointerEvents=""}be(){this.PWt.style.opacity="0",this.PWt.style.pointerEvents="none"}Ud(){var t;null==(t=this.K0t)||t.destroy(),this.K0t=void 0}constructor(t,i){this.K0t=void 0,this.M4=!1,this.c9=t;const e=h.createElement("div");e.className="theoplayer-ima-wrapper",ia(e),e.style.zIndex="10",fi.Qs&&function(t,i){t.addEventListener(i,IM)}(e,"mousedown"),i.appendChild(e);const s=h.createElement("div");s.className="theoplayer-ima",s.style.height="100%",this.b5t=s,e.appendChild(s),this.PWt=e,this.K0t=new google.ima.AdDisplayContainer(this.b5t,this.c9)}},A1=class{get yQt(){return this.x5t.getAdId()}get M$t(){const t=this.x5t.getAdPodInfo();if(void 0!==t)try{return{NKt:t.getAdPosition(),tVt:t.getMaxDuration(),O5t:t.getPodIndex(),nbt:t.getTimeOffset(),DKt:t.getTotalAds(),j5t:t.getIsBumper()}}catch(t){return}}get eUt(){return this.x5t.getAdSystem()}get z5t(){return this.x5t.getAdvertiserName()}get WUt(){var t;return null!=(t=this.x5t.getApiFramework())?t:void 0}get lUt(){return this.PUt.map((t=>({qUt:t.getAdSlotId(),qz:t.getContentType(),iXt:t.getContent(),Ti:t.getHeight(),ji:t.getWidth()})))}get qz(){var t;return null!=(t=this.x5t.getContentType())?t:void 0}get SUt(){return this.x5t.getCreativeId()}get l0t(){return this.x5t.getCreativeAdId()}get P5t(){return this.x5t.getDealId()}get $p(){return this.x5t.getDescription()}get ct(){return this.x5t.getDuration()}get ji(){return this.x5t.getWidth()}get Ti(){return this.x5t.getHeight()}get h0t(){var t;return null!=(t=this.x5t.getMediaUrl())?t:void 0}get B5t(){return this.x5t.getMinSuggestedDuration()}get u0t(){return this.x5t.getSkipTimeOffset()}get R5t(){return this.x5t.getSurveyUrl()}get Jz(){return this.x5t.getTitle()}get o0t(){return this.x5t.getTraffickingParameters()}get a0t(){return this.x5t.getTraffickingParametersString()}get fUt(){return this.x5t.getUniversalAdIds().map((t=>({f0t:t.getAdIdRegistry(),_0t:t.getAdIdValue()})))}get n1t(){return this.x5t.getUiElements()}get c0t(){return this.x5t.getVastMediaBitrate()}get n0t(){return this.x5t.getVastMediaHeight()}get s0t(){return this.x5t.getVastMediaWidth()}get $$t(){return this.x5t.getWrapperAdIds()}get t0t(){return this.x5t.getWrapperAdSystems()}get i0t(){return this.x5t.getWrapperCreativeIds()}get _$t(){return this.x5t.isLinear()}constructor(t){this.x5t=t;const i=new google.ima.CompanionAdSelectionSettings;i.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,i.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,i.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,this.PUt=t.getCompanionAds(0,0,i)}};function v1(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}var m1=class extends xd{d_(t){var i;null==(i=this.sVt)||i.setVolume(t)}l_(){return this.sVt.getVolume()}z$t(){return this.sVt.getRemainingTime()}Ud(){No(this.Ic),this.Wu.fn(ve.pn,this.U5t),this.sVt.removeEventListener(google.ima.AdEvent.Type.LOADED,this.Q5t),this.sVt.removeEventListener(v1(),this.forwardAdEventListener),this.sVt.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener),this.sVt.destroy()}Cn(){this.sVt.start()}H0t(){this.sVt.resume()}m_(){this.sVt.pause()}Hm(){this.sVt.skip()}y_(){this.sVt.stop()}m$t(){const t=this.sVt.getCurrentAd();if(t)return this.F5t(t)}$0t(){return this.sVt.getCuePoints()}F5t(t){let i=Po(this.Ic,(i=>i.x5t===t));return i||(i=new A1(t),this.Ic.push(i)),i}a1t(t){this.sVt.updateAdsRenderingSettings(M1(t))}constructor(t,i,e){super(),this.Ic=[],this.Q5t=t=>{t.getAd().isLinear()?this.K0t.C5t("linear"):this.K0t.C5t("nonlinear")},this.U5t=()=>{this.sVt.resize(this.K0t.L5t,this.K0t.E5t,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const i=t.getAd(),e=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:Ut.LKt,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:Ut.kKt,[google.ima.AdEvent.Type.CLICK]:Ut.CKt,[google.ima.AdEvent.Type.DURATION_CHANGE]:Ut.Xg,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:Ut.xKt,[google.ima.AdEvent.Type.STARTED]:Ut.OKt,[google.ima.AdEvent.Type.IMPRESSION]:Ut.jKt,[google.ima.AdEvent.Type.PAUSED]:Ut.Qw,[google.ima.AdEvent.Type.RESUMED]:Ut.zKt,[google.ima.AdEvent.Type.AD_PROGRESS]:Ut.MKt,[google.ima.AdEvent.Type.AD_BUFFERING]:Ut.PKt,[google.ima.AdEvent.Type.FIRST_QUARTILE]:Ut.BKt,[google.ima.AdEvent.Type.MIDPOINT]:Ut.HQt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:Ut.RKt,[google.ima.AdEvent.Type.COMPLETE]:Ut.qQt,[google.ima.AdEvent.Type.USER_CLOSE]:Ut.UKt,[google.ima.AdEvent.Type.LINEAR_CHANGED]:Ut.QKt,[google.ima.AdEvent.Type.LOADED]:Ut.FKt,[google.ima.AdEvent.Type.AD_CAN_PLAY]:Ut.YKt,[google.ima.AdEvent.Type.AD_METADATA]:Ut.GKt,[google.ima.AdEvent.Type.AD_BREAK_READY]:Ut.VKt,[google.ima.AdEvent.Type.INTERACTION]:Ut.WKt,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:Ut.HKt,[google.ima.AdEvent.Type.SKIPPED]:Ut.qKt,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:Ut.XKt,[google.ima.AdEvent.Type.LOG]:Ut.ZKt,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:Ut.KKt,[google.ima.AdEvent.Type.VOLUME_CHANGED]:Ut.JKt,[google.ima.AdEvent.Type.VOLUME_MUTED]:Ut.$Kt}[t]}(t.type),s={type:e,date:new Date,Z7:i?this.F5t(i):void 0,r$t:y$(e,t.getAdData())};this.Co(s)},this.forwardAdErrorEventListener=t=>{this.Co({date:new Date,Z7:void 0,type:v$.tJt,r$t:{R$t:N$(t.getError())}})},this.sVt=t,this.K0t=i,this.Wu=e,this.Wu.yn(ve.pn,this.U5t),this.sVt.init(this.K0t.L5t,this.K0t.E5t,google.ima.ViewMode.NORMAL),this.sVt.addEventListener(google.ima.AdEvent.Type.LOADED,this.Q5t),this.sVt.addEventListener(v1(),this.forwardAdEventListener),this.sVt.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener)}},p1=class extends yo{get Y5t(){return this.G5t}get X1t(){return this.PWt}fa(){return this}constructor(t,i){super("l1t"),this.G5t=t,this.PWt=i}},y1=class extends xd{q0t(){var t;null==(t=this.X0t)||t.contentComplete()}async fKt(t,i,e){if(this.V5t)throw new g("Only one ImaAdsRequest can be made at a time.");if(!this.W5t.k5t)throw new g("AdDisplayContainer is not initialized.");this.X0t=new google.ima.AdsLoader(this.W5t.k5t),this.X0t.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.X0t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.V5t=new Rs,this.H5t=i,this.q5t=e;const s=new google.ima.AdsRequest;return t.SZt?s.adTagUrl=t.SZt:t.EZt&&(s.adsResponse=t.EZt),s.linearAdSlotWidth=t.yZt,s.linearAdSlotHeight=t.MZt,s.nonLinearAdSlotWidth=t.TZt,s.nonLinearAdSlotHeight=t.NZt,s.contentDuration=t.LZt,s.setAdWillAutoPlay(t.DZt),s.setAdWillPlayMuted(t.IZt),t.bZt&&(s.omidAccessModeRules=t.bZt),this.X0t.requestAds(s),this.V5t.Zb}Ud(){var t;void 0!==this.X0t&&(this.X0t.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.X0t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.X0t.destroy(),this.X0t=void 0),null==(t=this.V5t)||t.qb("AdsLoader destroyed"),this.V5t=void 0}constructor(t,i){super(),this.onAdsManagerLoadedListener=t=>{if(this.H5t&&this.q5t&&this.V5t){var i;const e=M1(this.q5t),s=this.H5t,n=t.getAdsManager({get currentTime(){return s.Mf},get duration(){return s.ct}},e),r=new m1(n,this.W5t,this.Wu);this.Co(new p1(n,this.W5t.X1t)),null==(i=this.V5t)||i.Wb(r),this.V5t=void 0}},this.onAdsManagerErrorListener=t=>{var i;const e={Ob:t.getError().getMessage(),EKt:t.getError().getVastErrorCode(),DFt:t.getError().getErrorCode(),Rg:M$(t.getError().getType()),bKt:void 0};null==(i=this.V5t)||i.qb(e),this.V5t=void 0},this.Wu=i,this.W5t=t}};function M1(t){const i=new google.ima.AdsRenderingSettings;return i.enablePreloading=t.r1t,t.n1t&&(i.uiElements=t.n1t),i.mimeTypes=t.s1t,void 0!==t.o1t&&(i.playAdsAfterTime=t.o1t),void 0!==t.h1t&&(i.loadVideoTimeout=t.h1t),void 0!==t.r0t&&(i.bitrate=t.r0t),void 0!==t.o1t&&(i.playAdsAfterTime=t.o1t),i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i}var T1=class extends xd{get Mf(){return this.Qo.e_?this.X5t:this.Qo.Tf()}get ct(){return this.Qo.Td()}get Pf(){return this.Qo.Pf}get c_(){return this.Qo.c_}tr(){this.X5t=0}constructor(t){super(),this.Qo=t,this.X5t=this.Qo.Tf(),this.Qo.yn(l.Sw,(()=>{this.Qo.e_||(this.X5t=this.Qo.Tf()),this.Co(new Pc(this.Mf,void 0))}))}};Iu.Ib.registerWebImaAdPlayerConstructor((function(t,i,e){Q$(e);const s=F$(e)?t.A_():void 0,n=new w1(s,t.we),r=new y1(n,t.Iu),h=new T1(t);return new Y$(t,i,e,t.r7,n,r,h)}));var Qn,N1=class extends xd{get dH(){return this.ult===E.CONNECTED}get ult(){return this.ja}get va(){return this.Xa||(this.Xa=function(t){return{get casting(){return t.dH},get state(){return t.ult},start(){t.T_()},stop(){t.N_()},addEventListener(i,e){const s=zs(i,gi);t.yn(s,e)},removeEventListener(i,e){const s=zs(i,gi);t.fn(s,e)}}}(this)),this.Xa}Z5t(){this.K5t(),this.Lgt.yn(l.lo,this.J5t),i.Ys.Ztt&&this.Ta(E.AVAILABLE)}preloadPlayer(t){if(Bo(t),this.Qo.Jf<ae.Xn){const i=this.Qo.lf(he.Pw,t);return this.Qo.Xf=wo.Nm,i}return Promise.resolve()}Ta(t){t!==this.ja&&(this.ja=t,this.Co(new xJ(this.ja)))}async $5t(t){await this.preloadPlayer(t),this.pW.T_()}N_(){i.Ys.Ztt&&this.Qo.N_()}gn(){this.Vo(),this.Lgt.fn(l.lo,this.J5t),this.t6t.qd()}constructor(t,i){super(),this.Xa=void 0,this.ja=E.UNAVAILABLE,this.t6t=new na,this.handleAirplayChangedEvent=()=>{this.Qo&&this.Qo.xf?this.i6t():this.ult===E.CONNECTED&&this.e6t()},this.Lgt=t,this.pW=i}},D1=class extends N1{K5t(){this.Qo&&this.Qo.fn(l.Qg,this.handleAirplayChangedEvent),this.s6t?this.Qo=this.pW:this.Qo=this.n6t,this.Qo.yn(l.Qg,this.handleAirplayChangedEvent)}get s6t(){return this.pW.M_()}async i6t(){if(this.Qo){if(this.s6t){if(!this.Qo.Ff){const t=new Promise((t=>u(t,800))),i=this.Qo.lf(l.Sh,this.t6t.Wd);await Promise.race([i,t])}this.Qo.p_()}else{this.r6t=this.pW.Mf,this.h6t=this.pW.vf,this.n6t.yn(l.Sw,this.handleAirplayPlayerTimeUpdate),this.o6t=this.pW.fg,this.pW.fg=this.n6t,this.o6t.m_(),this.o6t.be(),this.n6t.ge(),this.n6t.Pf=this.o6t.Pf,this.n6t.Gf=this.o6t.Gf,this.n6t.c_=this.o6t.c_;const t=this.n6t.lf(l.pw);this.n6t.Mf=this.o6t.Mf,await t,this.n6t.p_(),this.n6t.Pf=this.o6t.Pf,this.n6t.Gf=this.o6t.Gf,this.n6t.c_=this.o6t.c_}this.Ta(E.CONNECTED)}}e6t(){if(this.o6t){this.n6t.fn(l.Sw,this.handleAirplayPlayerTimeUpdate),this.o6t.Pf=this.n6t.Pf,this.o6t.Gf=this.n6t.Gf,this.o6t.c_=this.n6t.c_;fi.WE&&!fi.Ga&&this.pW.ct===1/0?this.h6t?this.o6t.vf=this.h6t:this.o6t.Mf=1/0:this.o6t.Mf=this.r6t,this.h6t=void 0,this.r6t=void 0,this.o6t.ge(),this.n6t.be(),this.n6t.Ff||this.o6t.p_(),this.pW.fg=this.o6t,this.n6t.tr(),this.o6t=void 0}else this.Qo&&(this.Qo.Mf=this.Qo.Mf+1e-4);this.Ta(E.AVAILABLE)}T_(){i.Ys.Ztt&&(this.Lgt.v_(),this.t6t.qd(),this.t6t=new na,this.s6t?D(this.$5t(this.t6t.Wd)):D(this.a6t(this.t6t.Wd)))}async a6t(t){try{await this.n6t.tr();const i=this.pW.Wa();if(void 0===i)throw new g("Not possible to start Airplay without a source");await this.n6t.ga(i,t);const e=this.n6t.lf(he.Rw,t);this.n6t.p_(),await function(t,i){return Na((e=>Promise.race([t,lt(i,e).then((()=>{throw new g("Timeout")}))])))}(e,3e3),this.n6t.m_(),Bo(t),this.n6t.T_()}catch(t){if(Ho(t))return;0}}gn(){var t;super.gn(),this.pW.NT(this.n6t),null==(t=this.n6t)||t.gn()}constructor(t,e,s){super(t,e),this.J5t=()=>{var t;const e=null==(t=this.pW.Wa())?void 0:t.sources.filter(ow);i.Ys.Ztt&&(null==e?void 0:e.some(mN))?this.Ta(E.AVAILABLE):this.Ta(E.UNAVAILABLE)},this.handleAirplayPlayerTimeUpdate=t=>{this.r6t=t.currentTime,this.h6t=this.pW.vf},this.n6t=s,this.n6t.be(),e.TT(s),this.Z5t()}},I1=class extends Mo{I_(){this.u6t.I_()}get ht(){return this.u6t.ht}get wf(){return this.u6t.wf}get bt(){return this.YP}get Mf(){return this.u6t.Mf}set Mf(t){this.u6t.Mf=t}get vf(){return this.u6t.vf}get ct(){return this.u6t.ct}get we(){return this.Us}get If(){return this.u6t.If}get lt(){return this.u6t.lt}get bf(){return this.u6t.bf}get kf(){return this.u6t.kf}get xf(){return this.u6t.xf}get g_(){return this.u6t.g_}get f_(){return this.u6t.f_}get jf(){return this.u6t.jf}get Pf(){return this.u6t.Pf}set Pf(t){this.u6t.Pf=t}get Uf(){return this.u6t.Uf}get Ff(){return this.u6t.Ff}get Gf(){return this.u6t.Gf}set Gf(t){this.u6t.Gf=t}get Hf(){return this.u6t.Hf}get Xf(){return this.u6t.Xf}set Xf(t){this.u6t.Xf=t}get Jf(){return this.u6t.Jf}get t_(){return this.u6t.t_}get e_(){return this.u6t.e_}M_(){return this.u6t.M_()}T_(){this.u6t.T_()}N_(){this.u6t.N_()}get nt(){return this.u6t.nt}get r_(){return this.u6t.r_}get a_(){return this.u6t.a_}get rt(){return this.u6t.rt}get c_(){return this.u6t.c_}set c_(t){this.u6t.c_=t}p_(){D(this.u6t.p_())}m_(){this.u6t.m_()}async y_(){}Wa(){return this.bc}async ga(t,i){let e;if(Bo(i),this.bc=t,ew(t.sources))e=Ia({src:""});else{const i=t.sources.filter(ow);for(const t of i)if(mN(t)){e=t;break}}if(!e)throw new g("Unsupported source.");await this.u6t.ga(e,t,i),this.KP(e)}KP(t){this.YP!==t&&(this.YP=t,this.Co(new St(t)))}A_(){return this.u6t.A_()}gf(){return[]}v_(){this.c6t.jB()}ur(t){gw(this,t)}ar(){}S_(t){return!1}D_(){this.u6t.D_()}async tr(){this.YP=void 0,this.bc=void 0,await this.u6t.tr()}ge(){this.u6t.ge()}be(){this.u6t.be()}w_(){return this.u6t.w_()}async gn(){this.Vo(),this.c6t.gn(),await this.u6t.gn(),this.dT.gn(),this._T.gn(),this.Dl.gn()}constructor(t,i,e,s,n,r,h){super(),this.YP=void 0,this.bc=void 0,this.dT=new Ms,this._T=new Ms,this.Dl=new yc,this.Us=t,this.c6t=new om(r,h,1,[Vt.pm]),this.c6t.FB(t),this.u6t=new vN(t,this.c6t,i,e,s,n),this.u6t.sf(this.Ds),this.dT.fg=this.u6t.ht,this._T.fg=this.u6t.rt,this.Dl.fg=this.u6t.nt}},S1=class extends V{async gn(){this.l6t.gn(),await super.gn()}constructor(t){super(t);const i=new I1(this.n7.we,this._O,this.wd,this.e7,this.f_,this.a7,this.Ol);this.l6t=new D1(this,this.n7,i),this.fQ.AH(this.l6t),this.yn(l.Hg,(()=>{this.l6t.K5t()}))}};Uj((t=>new S1(t)),sa.C7),function(t){t.CKt="click",t.d6t="continue",t.f6t="end",t.ha="error",t.Ah="fullscreen",t.Nm="metadata",t.zQt="mute",t.nYt="nonlinear",t.Sh="pause",t.gYt="position",t._6t="ready",t.BQt="resume",t.g6t="seek_end",t.w6t="seek_start",t.A6t="stall",t.Qyt="start",t.Ru="text",t.v6t="linear_event"}(Qn||(Qn={}));var E1,b1=class{m6t(t){this.p6t=t}y6t(t,i){let e;switch(t){case Qn.CKt:e=this.M6t.CLICK;break;case Qn.d6t:e=this.M6t.CONTINUE;break;case Qn.f6t:e=this.M6t.END;break;case Qn.ha:e=this.M6t.ERROR;break;case Qn.Ah:e=this.M6t.FULLSCREEN;break;case Qn.Nm:e=this.M6t.METADATA;break;case Qn.zQt:e=this.M6t.MUTE;break;case Qn.nYt:e=this.M6t.NONLINEAR;break;case Qn.Sh:e=this.M6t.PAUSE;break;case Qn.gYt:e=this.M6t.POSITION;break;case Qn._6t:e=this.M6t.READY;break;case Qn.BQt:e=this.M6t.RESUME;break;case Qn.g6t:e=this.M6t.SEEK_END;break;case Qn.w6t:e=this.M6t.SEEK_START;break;case Qn.A6t:e=this.M6t.STALL;break;case Qn.Qyt:e=this.M6t.START;break;case Qn.Ru:e=this.M6t.TEXT;break;case Qn.v6t:e=this.M6t.LINEAR_EVENT}this.p6t.reportPlayerEvent(e,i)}constructor(t){this.M6t=t}},Uc=class{SS(t){t.yn(Sl.QT,this.T6t)}gn(){for(let t of this.N6t)this.it(t);this.Dgt.fn(yt.L_,this.kz)}it(t){if(t.zt===Mi.Nm){for(let i of t.L.og)i.fn(Sl.QT,this.T6t);t.fn(qo.O_,this.m4),t.fn(qo.z_,this.D6t)}}constructor(t,i){this.Dgt=t,this.uet=i,this.N6t=[],this.kz=t=>{const i=t.Lt;if(i.zt===Mi.Nm){for(let t of i.L.og)this.I6t(t)&&this.SS(t);i.yn(qo.O_,this.m4),i.yn(qo.z_,this.D6t),this.N6t.push(i)}},this.m4=t=>{this.I6t(t.YT)&&this.SS(t.YT)},this.D6t=t=>{t.YT.fn(Sl.QT,this.T6t)},this.Dgt.yn(yt.L_,this.kz)}},L1=class extends Uc{S6t(t){return gd(this.E6t,t)}HF(t){var i;const e=function(t,i){if(!t||!i||i.U<=0)return[];const e=t.GT,s=i.og,n=[];for(let i=dC(t)+1,r=s.length;i<r;i++){const r=s[i],h=r.O;if(e===r.GT&&k1(h)){if(r.O.id===t.O.id)break;n.push(r)}}return n}(t,null==(i=t.Lt)?void 0:i.L);this.b6t(e);const s=[t].concat(e);this.L6t(s)}b6t(t){this.E6t=this.E6t.concat(t)}L6t(t){let i={};for(let e of t){let t=e.O;i[t.id]=t.text}this.uet.y6t(Qn.Nm,i)}k6t(t){To(this.E6t,t)}constructor(t,i){super(t,i),this.E6t=[],this.T6t=t=>{let i=t.YT;this.S6t(i)?this.k6t(i):this.HF(i)},this.I6t=t=>t.O.id&&k1(t.O)}};function k1(t){switch(t.id){case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return!0}return!1}!function(t){t.CFt="linear",t.xFt="nonlinear"}(E1||(E1={}));var C1,x1=class{constructor(t,i){this.Rg=t,this.HVt=i}},O1=class extends x1{get C6t(){return this.x6t}get Tot(){return this.Ptt}constructor(t,i,e){super("nonlinear",t),this.x6t=i,this.Ptt=e}},j1=class extends x1{constructor(t){super("linear",t)}},z1="yospace",P1="urn:yospace:a:id3:2016";function B1(t){return Boolean(tw(t)&&Vd(t,["ssai"])&&function(t){return Boolean(Vd(t,["integration"])&&t.integration===z1)}(t.ssai))}!function(t){t.S="S",t.M="M",t.E="E"}(C1||(C1={}));var R1,U1,Q1=class{O6t(t){this.j6t=t}z6t(){let t={AdBreakStart:()=>{this.j6t&&this.j6t.AdBreakStart&&this.j6t.AdBreakStart()},AdvertStart:t=>{this.P6t(),this.j6t&&this.j6t.AdvertStart&&this.j6t.AdvertStart(t)},AdvertEnd:t=>{this.B6t.TXt(),this.j6t&&this.j6t.AdvertEnd&&this.j6t.AdvertEnd(t)},AdBreakEnd:()=>{this.B6t.TXt(),this.j6t&&this.j6t.AdBreakEnd&&this.j6t.AdBreakEnd()},UpdateTimeline:t=>{this.j6t&&this.j6t.UpdateTimeline&&this.j6t.UpdateTimeline(t)},InjectVast:()=>{this.j6t&&this.j6t.InjectVast&&this.j6t.InjectVast()}};this.p6t.registerPlayer(t)}gn(){this.B6t.gn(),this.p6t=void 0,this.R6t&&(m(this.R6t),this.R6t=void 0)}constructor(t,i){this.p6t=t,this.B6t=i,this.P6t=()=>{if(this.R6t&&(m(this.R6t),this.R6t=void 0),this.p6t.session.currentAdvert){let t=this.p6t.session.currentAdvert.advert,i=t.getLinear(),e=t.getNonLinears();const s=[];i&&i.clickThrough&&s.push(new j1(i.clickThrough));const n=e.filter((t=>{const i=t.resources.images||{};return 0!==w.keys(i).length}));if(n.length){const t=function(t){const i=w.keys(t.resources.images);return t.resources.images[i[0]]}(n[0]);t&&s.push(new O1(n[0].clickThrough,t,String(e.indexOf(n[0]))))}this.B6t.U6t(s)}else this.R6t=v(this.P6t,250)},this.z6t()}},F1=class t{U6t(t){for(let i of t)i.Rg===E1.CFt?this.Q6t(i):this.F6t(i)}F6t(e){let s=h.createElement("img");s.src=e.C6t,s.className="theoplayer-yospace-non-linear-image",s.style.maxWidth="100%";const n=t.p4t(e.HVt,"theoplayer-yospace-advert"),r=i.Ys.Je?"touchend":"click";n.addEventListener(r,this.Y6t),n.setAttribute("data-advertindex",e.Tot),n.appendChild(s),n.style.zIndex="10",n.style.position="absolute",this.Us.appendChild(n),this.G6t.push(n)}V6t(){fh(this.W6t),this.W6t=void 0}TXt(){this.V6t(),this.H6t()}Q6t(e){this.V6t();let s=t.p4t(e.HVt,"theoplayer-yospace-ad-clickthrough");s.style.zIndex="10";const n=i.Ys.Je?"touchend":"click";s.addEventListener(n,this.q6t),ia(s),this.Us.appendChild(s),this.W6t=s}static p4t(t,i){const e=h.createElement("a");return e.setAttribute("href",t),e.setAttribute("target","Du"),i&&(e.className=i),e.setAttribute("rel","noopener"),e}gn(){this.TXt(),this.Us=void 0}constructor(t,i){this.Us=t,this.uet=i,this.G6t=[],this.q6t=t=>{this.uet.y6t(Qn.CKt),t.stopPropagation()},this.Y6t=t=>{const i=t.currentTarget.getAttribute("data-advertindex");i&&(this.uet.y6t(Qn.nYt,i),t.stopPropagation())},this.H6t=()=>{for(let t of this.G6t)t&&t.parentElement&&t.parentElement.removeChild(t);No(this.G6t)}}},Y1=class extends Uc{L6t(t){this.uet.y6t(Qn.Nm,t)}constructor(t,i){super(t,i),this.T6t=t=>{const i=function(t){const i=pn(t),e=i.split(","),s={};for(const t of e){const[i,e]=t.split("=");s[i]=e}return s}(t.YT.O);if(i.YTYP===C1.E){if(Yt(this.X6t)&&i.YMID!==this.X6t)return;this.X6t=void 0}else i.YTYP===C1.S&&(this.X6t=i.YMID);this.L6t(i)},this.I6t=t=>{const i=t;return Yt(i.OM)&&function(t){return t===P1}(i.OM)}}};!function(t){t[t.Z6t=-1]="Z6t",t[t.K6t=-2]="K6t",t[t.J6t=-3]="J6t",t[t.$6t=-10]="$6t",t[t.t8t=-11]="t8t"}(R1||(R1={})),function(t){t.i8t="ready",t.e8t="error",t.s8t="no-analytics"}(U1||(U1={}));var G1,V1=class extends xd{get va(){return this.Xa}m6t(t,i){this.p6t=t,this.n8t=i,this.n8t.O6t(this.r8t),this.Co(new wn("sessionavailable"))}fa(){let t=this;return{get session(){return t.p6t&&t.p6t.session},registerPlayer(i){t.r8t=i,t.n8t&&t.n8t.O6t(t.r8t)},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}gn(){this.Vo()}constructor(){super(),this.Xa=this.fa()}};!function(t){t[t.jh=0]="jh",t[t.Sh=1]="Sh"}(G1||(G1={}));var W1=class{m_(){this.h8t?this.o8t=1:this.Qo.a8t()}p_(){this.h8t?this.o8t=0:this.Qo.u8t()}get c8t(){return this.l8t}d8t(t){-11===t&&cs("A connection has been established with the CSM, but the stream cannot be paused. This is only valid for Linear playback"),this.Qo.f8t(Tt({},this.WP,{sources:[Tt({},this._8t,{src:this.p6t&&this.p6t.masterPlaylist(),type:this._8t&&this._8t.type})]})),this.g8t(),0===this.o8t&&this.Qo.u8t()}w8t(t){let i;i=-11===t?"Yospace: A connection has been established with the CSM, but the stream cannot be paused. This is only valid for Linear playback":-2===t?"Yospace: The primary URL is not a valid SSAI stream":-10===t?"Yospace: The stream URL is not correctly formatted":-1===t?"Yospace: Connection error":-3===t?"Yospace: Connection timeout":"Yospace: Session could not be initialised",this.p6t&&(this.p6t.shutdown(),this.p6t=void 0),this.Qo.A8t(new $i(Ui.SOURCE_INVALID,i))}ga(t){this.WP=t,this.v8t(),this._8t=t?Po(t.sources,B1):void 0;let i=!!_s.YSSessionManager;if(this._8t,this._8t&&this._8t.src&&i){this.h8t=!0;const t=_s.YSSessionManager;let i;switch(this._8t.ssai.streamType){case"vod":i=t.createForVoD;break;case"livepause":i=t.createForLivePause;break;case"nonlinear":i=t.createForNonLinear;break;default:i=t.createForLive}const e=i(this._8t.src,{},this.m8t);if(this.p8t(e),!this.n8t)throw new g("An error occured while instantiating a YospaceSessionManager");this.l8t.m6t(e,this.n8t),this.y8t=this.startPositionPoller(),this.M8t=this.Qo.Pf}else this.h8t=!1,this.Qo.f8t(t)}p8t(t){this.p6t=t,this.uet.m6t(this.p6t),this.T8t&&this.T8t.gn(),this.T8t=new L1(this.Qo.nt,this.uet),this.N8t&&this.N8t.gn(),this.N8t=new Y1(this.Qo.nt,this.uet),this.n8t&&this.n8t.gn();const i=new F1(this.Qo.we,this.uet);this.n8t=new Q1(this.p6t,i)}v8t(){var t;this.Qo.fn("presentationmodechange",this.D8t),this.Qo.fn(l.Ew,this.vHt),this.Qo.fn(l.jh,this.I8t),this.Qo.fn(l.jh,this.S8t),this.Qo.fn(l.Jg,this.Mh),this.Qo.fn(l.Sh,this.gBt),this.Qo.fn(l.yw,this.We),this.Qo.fn(l.pw,this.fP),this.Qo.fn(he.Bw,this.rA),this.Qo.fn(he.Rw,this.dA),m(this.y8t),this.y8t=null,this.o8t=1,this.h8t=!1,null==(t=this.p6t)||t.shutdown(),this.p6t=void 0}gn(){this.v8t(),this.c8t.gn()}constructor(t){this.uet=new b1(_s.YSPlayerEvents),this.h8t=!1,this.o8t=1,this.l8t=new V1,this.E8t=!1,this.M8t=!1,this.m8t=(t,i)=>{if(!this.p6t)throw new g("An error occured while instantiating a YospaceSessionManager");if(this.h8t=!1,"ready"===t)this.d8t(i);else this.w8t(i)},this.g8t=()=>{this.Qo.yn("presentationmodechange",this.D8t),this.Qo.yn(l.Ew,this.vHt),this.Qo.yn(l.jh,this.I8t),this.Qo.yn(l.Jg,this.Mh),this.Qo.yn(l.Sh,this.gBt),this.Qo.yn(l.yw,this.We),this.Qo.yn(l.pw,this.fP),this.Qo.yn(he.Bw,this.rA),this.Qo.yn(he.Rw,this.dA)},this.D8t=()=>{this.uet.y6t(Qn.Ah,this.Qo.cs())},this.vHt=()=>{const t=this.Qo.Pf;t!==this.M8t&&(this.M8t=t,this.uet.y6t(Qn.zQt,t))},this.I8t=()=>{this.Qo.fn(l.jh,this.I8t),this.Qo.yn(l.jh,this.S8t),this.uet.y6t(Qn.Qyt)},this.S8t=()=>{this.uet.y6t(Qn.BQt)},this.Mh=()=>{this.uet.y6t(Qn.f6t)},this.gBt=()=>{this.uet.y6t(Qn.Sh)},this.We=()=>{this.uet.y6t(Qn.w6t)},this.fP=()=>{this.uet.y6t(Qn.g6t)},this.rA=()=>{this.E8t=!0,this.uet.y6t(Qn.A6t)},this.dA=()=>{this.E8t&&(this.uet.y6t(Qn.d6t),this.E8t=!1)},this.startPositionPoller=()=>{let t=-1;return v((()=>{let i=this.Qo.Tf();i!==t&&(t=i,this.uet.y6t(Qn.gYt,i))}),250)},this.Qo=t}};Rt((function(t){return class extends t{ga(t){this.pNt(),this.b8t.ga(t)}p_(){this.b8t.p_()}m_(){this.b8t.m_()}Lf(){var t;return null!=(t=this.Rz)?t:super.Lf()}Ef(){var t;return null!=(t=this.Bz)?t:super.Ef()}f8t(t){super.ga(t)}u8t(){super.p_()}a8t(){super.m_()}A8t(t){this.Rz=t,this.Bz=Ki(this.Rz),this.Co(new Dr(this.Rz))}fa(){let t=this.b8t.c8t;return N(super.fa(),{get yospace(){return t.va}})}pNt(){this.Bz=void 0,this.Rz=void 0}gn(){this.b8t.gn(),super.gn()}constructor(t,i){super(t,i),this.Bz=void 0,this.Rz=void 0,this.b8t=new W1(this)}}}),sa.L7);var H1="VPAID";function q1(t){return"spotx"===t.integration}ta.Ib.dR(new class t{get dqt(){return this.L8t.dqt}lR(t){return q1(t)}fqt(i,e,s){return s.ads||(s.ads=rw({})),s.ads.vpaidMode=s.ads.vpaidMode||t.k8t(),this.L8t.fqt(i,e,s)}n4(i,e,s,n){!function(t){if(!q1(t))throw new g("Unknown ad integration: "+t.integration)}(i);const r=t.C8t(i,s.we);this.L8t.n4(r,e,s,n)}LQ(t){const i=Oi(t);if(!S(i.id))return i.queryParameters||(i.queryParameters={}),i.custom&&(i.queryParameters.custom?cs('"custom" parameter is redefined in queryParameters! Please use "queryParameters.custom" only!'):(i.queryParameters.custom=i.custom,delete i.custom)),i.app&&(i.queryParameters.app?cs('"app" parameter is redefined in queryParameters! Please use "queryParameters.app" only!'):(i.queryParameters.app=i.app,delete i.app)),i.device&&(i.queryParameters.device?cs('"device" parameter is redefined in queryParameters! Please use "queryParameters.device" only!'):(i.queryParameters.device=i.device,delete i.device)),i.user&&(i.queryParameters.user?cs('"user" parameter is redefined in queryParameters! Please use "queryParameters.user" only!'):(i.queryParameters.user=i.user,delete i.user)),i.ipAddress&&(i.queryParameters.ip_addr?cs('"ipAddress" parameter is redefined in queryParameters! Please use "queryParameters.ip_addr" or "ipAddress" only!'):(i.queryParameters.ip_addr=i.ipAddress,delete i.ipAddress)),i.maximumAdDuration&&(i.queryParameters.VMaxd?cs('"maximumAdDuration" parameter is redefined in queryParameters! Please use "queryParameters.VMaxd" or "maximumAdDuration" only!'):(i.queryParameters.VMaxd=i.maximumAdDuration,delete i.maximumAdDuration)),i}static C8t(i,e){return{integration:Fr.SPOTX,sources:{src:t.x8t(i,_s.location.href,e.offsetWidth,e.offsetHeight,fi.vb)}}}static x8t(i,e,s,n,r){if(i.sources)return i.sources;let h=n,o=s;r&&0===o&&(o=320,h=180);const a={custom_skin:1,player_width:o,player_height:h};i.cacheBuster&&(a.cb=_.random()),t.O8t(e)&&(a.content_page_url=e);const u=Tt({},a,i.queryParameters);return u[H1]||u.VPI||(u[H1]="js"),"https://search.spotxchange.com/vast/2.0/"+i.id+"?"+t.j8t(u)}static O8t(t){return At(t,"http://")||At(t,"https://")}static j8t(t){return LK(t)}static k8t(){return fi.OE?Ba.ENABLED:Ba.INSECURE}constructor(){this.L8t=new V$}});var X1=void 0!==s?s:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Z1=function(){return/Android/i.test(Dl.userAgent)||/iPhone|iPad|iPod/i.test(Dl.userAgent)},K1=function(t,i){for(var e=0,s=t.length;e<s;e++)i[e]=t[e]},J1=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},$1=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),w.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),t4=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in w(t))return function(t,i){var e=[],s=!0,n=!1,r=void 0;try{for(var h,o=t[Symbol.iterator]();!(s=(h=o.next()).done)&&(e.push(h.value),!i||e.length!==i);s=!0);}catch(t){n=!0,r=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw r}}return e}(t,i);throw new b("Invalid attempt to destructure non-iterable instance")},i4=function(t,i,e){return t+(i-t)*e},el=function(){var t=/iPad|iPhone|iPod/.test(Dl.platform);return function(){return t}}(),e4=function(){var t=-1!==Dl.userAgent.indexOf("Version")&&-1!==Dl.userAgent.indexOf("Android")&&-1!==Dl.userAgent.indexOf("Chrome");return function(){return t}}(),s4=(function(){var t=/^((?!chrome|android).)*safari/i.test(Dl.userAgent)}(),function(){var t=-1!==Dl.userAgent.indexOf("Firefox")&&-1!==Dl.userAgent.indexOf("Android");return function(){return t}}()),n4=function(){var t=Dl.userAgent.match(/.*Chrome\/([0-9]+)/),i=t?x(t[1],10):null;return function(){return i}}(),r4=function(){var t=!1;if(65===n4()){var i=Dl.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(i){var e=i[1].split("."),s=t4(e,4),n=(s[0],s[1],s[2]),r=s[3];t=3325===x(n,10)&&x(r,10)<148}}return function(){return t}}(),h4=function(){var t=-1!==Dl.userAgent.indexOf("R7 Build");return function(){return t}}(),o4=function(){var t=90==s.orientation||-90==s.orientation;return h4()?!t:t},a4=function(){return _.max(s.screen.width,s.screen.height)*s.devicePixelRatio},u4=function(){return _.min(s.screen.width,s.screen.height)*s.devicePixelRatio},c4=function(){if(h.exitFullscreen)h.exitFullscreen();else if(h.webkitExitFullscreen)h.webkitExitFullscreen();else if(h.mozCancelFullScreen)h.mozCancelFullScreen();else{if(!h.msExitFullscreen)return!1;h.msExitFullscreen()}return!0},l4=function(t,i,e,s){var n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,i),t.compileShader(n);var r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,e),t.compileShader(r);var h=t.createProgram();for(var o in t.attachShader(h,n),t.attachShader(h,r),s)t.bindAttribLocation(h,s[o],o);return t.linkProgram(h),t.deleteShader(n),t.deleteShader(r),h},d4=function(t,i){for(var e={},s=t.getProgramParameter(i,t.ACTIVE_UNIFORMS),n="",r=0;r<s;r++){e[n=t.getActiveUniform(i,r).name.replace("[0]","")]=t.getUniformLocation(i,n)}return e},f4=function(){var t,i=!1;return t=Dl.userAgent||Dl.vendor||s.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(i=!0),i},_4=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},lh=[],g4=function(t){if(el()){w4(t);var i,e,n=t.style.width,r=t.style.height,h=t.offsetWidth+1,o=t.offsetHeight;t.style.width=h+"px",t.style.height=o+"px";var a=function(){s.cancelAnimationFrame(e);for(var h=0;h<lh.length;h++)if(lh[h]===i){t.style.width=n,t.style.height=r,lh.splice(h,1);break}};i={A7:t,z8t:a},lh.push(i),e=s.requestAnimationFrame(a)}},w4=function(t){if(el())for(var i=0;i<lh.length;i++)if(lh[i].A7===t){lh[i].z8t();break}},A4=function(){var t=_.PI/180,i=.25*_.PI;var e=new Float32Array([0,0,0,1]),s=new Float32Array([0,0,0]);function n(n,r,h,o,a,u){!function(e,s,n,r){var h=_.tan(s?s.upDegrees*t:i),o=_.tan(s?s.downDegrees*t:i),a=_.tan(s?s.leftDegrees*t:i),u=_.tan(s?s.rightDegrees*t:i),c=2/(a+u),l=2/(h+o);e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-u)*c*.5,e[9]=(h-o)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0}(n,o||null,u.depthNear,u.depthFar),function(t,i,e){var s=i[0],n=i[1],r=i[2],h=i[3],o=s+s,a=n+n,u=r+r,c=s*o,l=s*a,d=s*u,f=n*a,_=n*u,g=r*u,w=h*o,A=h*a,v=h*u;t[0]=1-(f+g),t[1]=l+v,t[2]=d-A,t[3]=0,t[4]=l-v,t[5]=1-(c+g),t[6]=_+w,t[7]=0,t[8]=d+A,t[9]=_-w,t[10]=1-(c+f),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1}(r,h.orientation||e,h.position||s),a&&function(t,i,e){var s,n,r,h,o,a,u,c,l,d,f,_,g=e[0],w=e[1],A=e[2];i===t?(t[12]=i[0]*g+i[4]*w+i[8]*A+i[12],t[13]=i[1]*g+i[5]*w+i[9]*A+i[13],t[14]=i[2]*g+i[6]*w+i[10]*A+i[14],t[15]=i[3]*g+i[7]*w+i[11]*A+i[15]):(s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],_=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=_,t[12]=s*g+o*w+l*A+i[12],t[13]=n*g+a*w+d*A+i[13],t[14]=r*g+u*w+f*A+i[14],t[15]=h*g+c*w+_*A+i[15])}(r,r,a),function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=i[4],o=i[5],a=i[6],u=i[7],c=i[8],l=i[9],d=i[10],f=i[11],_=i[12],g=i[13],w=i[14],A=i[15],v=e*o-s*h,m=e*a-n*h,p=e*u-r*h,y=s*a-n*o,M=s*u-r*o,T=n*u-r*a,N=c*g-l*_,D=c*w-d*_,I=c*A-f*_,S=l*w-d*g,E=l*A-f*g,b=d*A-f*w,L=v*b-m*E+p*S+y*I-M*D+T*N;L&&(L=1/L,t[0]=(o*b-a*E+u*S)*L,t[1]=(n*E-s*b-r*S)*L,t[2]=(g*T-w*M+A*y)*L,t[3]=(d*M-l*T-f*y)*L,t[4]=(a*I-h*b-u*D)*L,t[5]=(e*b-n*I+r*D)*L,t[6]=(w*p-_*T-A*m)*L,t[7]=(c*T-d*p+f*m)*L,t[8]=(h*E-o*I+u*N)*L,t[9]=(s*I-e*E-r*N)*L,t[10]=(_*M-g*p+A*v)*L,t[11]=(l*p-c*M-f*v)*L,t[12]=(o*D-h*S-a*N)*L,t[13]=(e*S-s*D+n*N)*L,t[14]=(g*m-_*y-w*v)*L,t[15]=(c*y-l*m+d*v)*L)}(r,r)}return function(t,i,e){return!(!t||!i)&&(t.pose=i,t.timestamp=i.timestamp,n(t.leftProjectionMatrix,t.leftViewMatrix,i,e.P8t("left"),e.B8t("left"),e),n(t.rightProjectionMatrix,t.rightViewMatrix,i,e.P8t("right"),e.B8t("right"),e),!0)}}(),v4=function(t){var i,e=t.indexOf("://");i=-1!==e?e+3:0;var s=t.indexOf("/",i);return-1===s&&(s=t.length),t.substring(0,s)},m4=function(){var t={};return function(i,e){void 0===t[i]&&(console.warn("webvr-polyfill: "+e),t[i]=!0)}}(),wh=function(t,i){m4(t,t+" has been deprecated. This may not work on native WebVR displays. "+(i?"Please use "+i+" instead.":""))};var p4=function(t,i,e){if(i){for(var s=[],n=null,r=0;r<i.length;++r){switch(h=i[r]){case t.TEXTURE_BINDING_2D:case t.TEXTURE_BINDING_CUBE_MAP:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),s.push(null,null);break}n||(n=t.getParameter(t.ACTIVE_TEXTURE)),t.activeTexture(a),s.push(t.getParameter(h),null);break;case t.ACTIVE_TEXTURE:n=t.getParameter(t.ACTIVE_TEXTURE),s.push(null);break;default:s.push(t.getParameter(h))}}e(t);for(r=0;r<i.length;++r){var h=i[r],o=s[r];switch(h){case t.ACTIVE_TEXTURE:break;case t.ARRAY_BUFFER_BINDING:t.bindBuffer(t.ARRAY_BUFFER,o);break;case t.COLOR_CLEAR_VALUE:t.clearColor(o[0],o[1],o[2],o[3]);break;case t.COLOR_WRITEMASK:t.colorMask(o[0],o[1],o[2],o[3]);break;case t.CURRENT_PROGRAM:t.useProgram(o);break;case t.ELEMENT_ARRAY_BUFFER_BINDING:t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o);break;case t.FRAMEBUFFER_BINDING:t.bindFramebuffer(t.FRAMEBUFFER,o);break;case t.RENDERBUFFER_BINDING:t.bindRenderbuffer(t.RENDERBUFFER,o);break;case t.TEXTURE_BINDING_2D:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_2D,o);break;case t.TEXTURE_BINDING_CUBE_MAP:var a;if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_CUBE_MAP,o);break;case t.VIEWPORT:t.viewport(o[0],o[1],o[2],o[3]);break;case t.BLEND:case t.CULL_FACE:case t.DEPTH_TEST:case t.SCISSOR_TEST:case t.STENCIL_TEST:o?t.enable(h):t.disable(h);break;default:console.log("No GL restore behavior for 0x"+h.toString(16))}n&&t.activeTexture(n)}}else e(t)},y4=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),M4=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function Yh(t,i,e,s){this.gl=t,this.cardboardUI=i,this.bufferScale=e,this.dirtySubmitFrameBindings=s,this.ctxAttribs=t.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=t.drawingBufferWidth,this.bufferHeight=t.drawingBufferHeight,this.realBindFramebuffer=t.bindFramebuffer,this.realEnable=t.enable,this.realDisable=t.disable,this.realColorMask=t.colorMask,this.realClearColor=t.clearColor,this.realViewport=t.viewport,el()||(this.realCanvasWidth=w.getOwnPropertyDescriptor(t.canvas.__proto__,"width"),this.realCanvasHeight=w.getOwnPropertyDescriptor(t.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=l4(t,y4,M4,this.attribs),this.uniforms=d4(t,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.indexCount=0,this.renderTarget=t.createTexture(),this.framebuffer=t.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=t.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=t.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=t.createRenderbuffer()),this.patch(),this.onResize()}Yh.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},Yh.prototype.onResize=function(){var t=this.gl,i=this,e=[t.RENDERBUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0];p4(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.framebuffer),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.texImage2D(t.TEXTURE_2D,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,i.bufferWidth,i.bufferHeight,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i.renderTarget,0),i.ctxAttribs.depth&&i.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,i.depthStencilBuffer)):i.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,i.depthBuffer)):i.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,i.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,i.stencilBuffer)),!t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),i.realClearColor.apply(t,i.clearColor)})),this.cardboardUI&&this.cardboardUI.onResize()},Yh.prototype.patch=function(){if(!this.isPatched){var t=this,i=this.gl.canvas,e=this.gl;el()||(i.width=a4()*this.bufferScale,i.height=u4()*this.bufferScale,w.defineProperty(i,"width",{configurable:!0,enumerable:!0,get:function(){return t.bufferWidth},set:function(e){t.bufferWidth=e,t.realCanvasWidth.set.call(i,e),t.onResize()}}),w.defineProperty(i,"height",{configurable:!0,enumerable:!0,get:function(){return t.bufferHeight},set:function(e){t.bufferHeight=e,t.realCanvasHeight.set.call(i,e),t.onResize()}})),this.lastBoundFramebuffer=e.getParameter(e.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(i,s){t.lastBoundFramebuffer=s||t.framebuffer,t.realBindFramebuffer.call(e,i,t.lastBoundFramebuffer)},this.cullFace=e.getParameter(e.CULL_FACE),this.depthTest=e.getParameter(e.DEPTH_TEST),this.blend=e.getParameter(e.BLEND),this.scissorTest=e.getParameter(e.SCISSOR_TEST),this.stencilTest=e.getParameter(e.STENCIL_TEST),e.enable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!0;break;case e.DEPTH_TEST:t.depthTest=!0;break;case e.BLEND:t.blend=!0;break;case e.SCISSOR_TEST:t.scissorTest=!0;break;case e.STENCIL_TEST:t.stencilTest=!0}t.realEnable.call(e,i)},e.disable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!1;break;case e.DEPTH_TEST:t.depthTest=!1;break;case e.BLEND:t.blend=!1;break;case e.SCISSOR_TEST:t.scissorTest=!1;break;case e.STENCIL_TEST:t.stencilTest=!1}t.realDisable.call(e,i)},this.colorMask=e.getParameter(e.COLOR_WRITEMASK),e.colorMask=function(i,s,n,r){t.colorMask[0]=i,t.colorMask[1]=s,t.colorMask[2]=n,t.colorMask[3]=r,t.realColorMask.call(e,i,s,n,r)},this.clearColor=e.getParameter(e.COLOR_CLEAR_VALUE),e.clearColor=function(i,s,n,r){t.clearColor[0]=i,t.clearColor[1]=s,t.clearColor[2]=n,t.clearColor[3]=r,t.realClearColor.call(e,i,s,n,r)},this.viewport=e.getParameter(e.VIEWPORT),e.viewport=function(i,s,n,r){t.viewport[0]=i,t.viewport[1]=s,t.viewport[2]=n,t.viewport[3]=r,t.realViewport.call(e,i,s,n,r)},this.isPatched=!0,g4(i)}},Yh.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,i=this.gl.canvas;el()||(w.defineProperty(i,"width",this.realCanvasWidth),w.defineProperty(i,"height",this.realCanvasHeight)),i.width=this.bufferWidth,i.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1,u((function(){g4(i)}),1)}},Yh.prototype.setTextureBounds=function(t,i){t||(t=[0,0,.5,1]),i||(i=[.5,0,.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=i[0],this.viewportOffsetScale[5]=i[1],this.viewportOffsetScale[6]=i[2],this.viewportOffsetScale[7]=i[3]},Yh.prototype.submitFrame=function(){var t=this.gl,i=this,e=[];if(this.dirtySubmitFrameBindings||e.push(t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0),p4(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.cullFace&&i.realDisable.call(t,t.CULL_FACE),i.depthTest&&i.realDisable.call(t,t.DEPTH_TEST),i.blend&&i.realDisable.call(t,t.BLEND),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realDisable.call(t,t.STENCIL_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),(i.ctxAttribs.alpha||el())&&(i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(i.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.enableVertexAttribArray(i.attribs.position),t.enableVertexAttribArray(i.attribs.texCoord),t.vertexAttribPointer(i.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(i.attribs.texCoord,3,t.FLOAT,!1,20,8),t.activeTexture(t.TEXTURE0),t.uniform1i(i.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.uniform4fv(i.uniforms.viewportOffsetScale,i.viewportOffsetScale),t.drawElements(t.TRIANGLES,i.indexCount,t.UNSIGNED_SHORT,0),i.cardboardUI&&i.cardboardUI.renderNoState(),i.realBindFramebuffer.call(i.gl,t.FRAMEBUFFER,i.framebuffer),i.ctxAttribs.preserveDrawingBuffer||(i.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),i.dirtySubmitFrameBindings||i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.cullFace&&i.realEnable.call(t,t.CULL_FACE),i.depthTest&&i.realEnable.call(t,t.DEPTH_TEST),i.blend&&i.realEnable.call(t,t.BLEND),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realEnable.call(t,t.STENCIL_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),!i.ctxAttribs.alpha&&i.ctxAttribs.preserveDrawingBuffer||i.realClearColor.apply(t,i.clearColor)})),el()){var s=t.canvas;s.width==i.bufferWidth&&s.height==i.bufferHeight||(i.bufferWidth=s.width,i.bufferHeight=s.height,i.onResize())}},Yh.prototype.updateDeviceInfo=function(t){var i=this.gl,e=this,s=[i.ARRAY_BUFFER_BINDING,i.ELEMENT_ARRAY_BUFFER_BINDING];p4(i,s,(function(i){var s=e.R8t(e.meshWidth,e.meshHeight,t);if(i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer),i.bufferData(i.ARRAY_BUFFER,s,i.STATIC_DRAW),!e.indexCount){var n=e.U8t(e.meshWidth,e.meshHeight);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n,i.STATIC_DRAW),e.indexCount=n.length}}))},Yh.prototype.R8t=function(t,i,e){for(var s=new Float32Array(2*t*i*5),n=e.getLeftEyeVisibleTanAngles(),r=e.getLeftEyeNoLensTanAngles(),h=e.getLeftEyeVisibleScreenRect(r),o=0,a=0;a<2;a++){for(var u=0;u<i;u++)for(var c=0;c<t;c++,o++){var l=c/(t-1),d=u/(i-1),f=l,g=d,w=i4(n[0],n[2],l),A=i4(n[3],n[1],d),v=_.sqrt(w*w+A*A),m=e.distortion.distortInverse(v),p=A*m/v;l=(w*m/v-r[0])/(r[2]-r[0]),d=(p-r[3])/(r[1]-r[3]),l=2*(h.x+l*h.width-.5),d=2*(h.y+d*h.height-.5),s[5*o+0]=l,s[5*o+1]=d,s[5*o+2]=f,s[5*o+3]=g,s[5*o+4]=a}var y=n[2]-n[0];n[0]=-(y+n[0]),n[2]=y-n[2],y=r[2]-r[0],r[0]=-(y+r[0]),r[2]=y-r[2],h.x=1-(h.x+h.width)}return s},Yh.prototype.U8t=function(t,i){for(var e=new Uint16Array(2*(t-1)*(i-1)*6),s=t/2,n=i/2,r=0,h=0,o=0;o<2;o++)for(var a=0;a<i;a++)for(var u=0;u<t;u++,r++)0!=u&&0!=a&&(u<=s==a<=n?(e[h++]=r,e[h++]=r-t-1,e[h++]=r-t,e[h++]=r-t-1,e[h++]=r,e[h++]=r-1):(e[h++]=r-1,e[h++]=r-t,e[h++]=r,e[h++]=r-t,e[h++]=r-1,e[h++]=r-t-1));return e},Yh.prototype.Q8t=function(t,i){var e=w.getOwnPropertyDescriptor(t,i);return void 0!==e.get&&void 0!==e.set||(e.configurable=!0,e.enumerable=!0,e.get=function(){return this.getAttribute(i)},e.set=function(t){this.setAttribute(i,t)}),e};var T4=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),N4=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),D4=_.PI/180,I4=.3125,th=28;function ph(t){this.gl=t,this.attribs={position:0},this.program=l4(t,T4,N4,this.attribs),this.uniforms=d4(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function S4(t){this.coefficients=t}ph.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},ph.prototype.listen=function(t,i){var e=this.gl.canvas,s="undefined"!=typeof TouchEvent;this.listener=function(n){var r=e.clientWidth/2,h=s&&n instanceof TouchEvent?(n.preventDefault(),n.changedTouches[0]):n;h.clientX>r-42&&h.clientX<r+42&&h.clientY>e.clientHeight-42?(n.preventDefault(),n.stopImmediatePropagation(),t(n)):h.clientX<42&&h.clientY<42&&(n.preventDefault(),n.stopImmediatePropagation(),i(n))},e.addEventListener("click",this.listener,!1),e.addEventListener("touchstart",this.listener,!1)},ph.prototype.onResize=function(){var t=this.gl,i=this,e=[t.ARRAY_BUFFER_BINDING];p4(t,e,(function(t){var e=[],n=t.drawingBufferWidth/2,r=_.max(screen.width,screen.height)*s.devicePixelRatio,h=t.drawingBufferWidth/r*s.devicePixelRatio,o=4*h/2,a=42*h,u=th*h/2,c=14*h;function l(t,i){var s=(90-t)*D4,r=_.cos(s),h=_.sin(s);e.push(I4*r*u+n,I4*h*u+u),e.push(i*r*u+n,i*h*u+u)}e.push(n-o,a),e.push(n-o,t.drawingBufferHeight),e.push(n+o,a),e.push(n+o,t.drawingBufferHeight),i.gearOffset=e.length/2;for(var d=0;d<=6;d++){var f=60*d;l(f,1),l(f+12,1),l(f+20,.75),l(f+40,.75),l(f+48,1)}function g(i,s){e.push(c+i,t.drawingBufferHeight-c-s)}i.gearVertexCount=e.length/2-i.gearOffset,i.arrowOffset=e.length/2;var w=o/_.sin(45*D4);g(0,u),g(u,0),g(u+w,w),g(w,u+w),g(w,u-w),g(0,u),g(u,2*u),g(u+w,2*u-w),g(w,u-w),g(0,u),g(w,u-o),g(th*h,u-o),g(w,u+o),g(th*h,u+o),i.arrowVertexCount=e.length/2-i.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW)}))},ph.prototype.render=function(){var t=this.gl,i=this,e=[t.CULL_FACE,t.DEPTH_TEST,t.BLEND,t.SCISSOR_TEST,t.STENCIL_TEST,t.COLOR_WRITEMASK,t.VIEWPORT,t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING];p4(t,e,(function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.renderNoState()}))},ph.prototype.renderNoState=function(){var t,i,e,s,n,r,h,o,a,u,c=this.gl;c.useProgram(this.program),c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer),c.enableVertexAttribArray(this.attribs.position),c.vertexAttribPointer(this.attribs.position,2,c.FLOAT,!1,8,0),c.uniform4f(this.uniforms.color,1,1,1,1),t=this.projMat,i=0,e=c.drawingBufferWidth,s=0,n=c.drawingBufferHeight,o=1/(i-e),a=1/(s-n),u=1/((r=.1)-(h=1024)),t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(i+e)*o,t[13]=(n+s)*a,t[14]=(h+r)*u,t[15]=1,c.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),c.drawArrays(c.TRIANGLE_STRIP,0,4),c.drawArrays(c.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),c.drawArrays(c.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},S4.prototype.distortInverse=function(t){for(var i=0,e=1,s=t-this.distort(i);_.abs(e-i)>1e-4;){var n=t-this.distort(e),r=e-n*((e-i)/(n-s));i=e,e=r,s=n}return e},S4.prototype.distort=function(t){for(var i=t*t,e=0,s=0;s<this.coefficients.length;s++)e=i*(e+this.coefficients[s]);return(e+1)*t};var E4=_.PI/180,b4=180/_.PI,De=function(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0};De.prototype={constructor:De,set:function(t,i,e){return this.x=t,this.y=i,this.z=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return _.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();if(0!==t){var i=1/t;this.multiplyScalar(i)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(t){var i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,h=t.z,o=t.w,a=o*i+r*s-h*e,u=o*e+h*i-n*s,c=o*s+n*e-r*i,l=-n*i-r*e-h*s;return this.x=a*o+l*-n+u*-h-c*-r,this.y=u*o+l*-r+c*-n-a*-h,this.z=c*o+l*-h+a*-r-u*-n,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(t,i){var e=t.x,s=t.y,n=t.z,r=i.x,h=i.y,o=i.z;return this.x=s*o-n*h,this.y=n*r-e*o,this.z=e*h-s*r,this}};var bo=function(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1};function L4(t){this.width=t.width||a4(),this.height=t.height||u4(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}bo.prototype={constructor:bo,set:function(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(t,i,e){var s=_.cos(t/2),n=_.cos(i/2),r=_.cos(e/2),h=_.sin(t/2),o=_.sin(i/2),a=_.sin(e/2);return this.x=h*n*r+s*o*a,this.y=s*o*r-h*n*a,this.z=s*n*a+h*o*r,this.w=s*n*r-h*o*a,this},setFromEulerYXZ:function(t,i,e){var s=_.cos(t/2),n=_.cos(i/2),r=_.cos(e/2),h=_.sin(t/2),o=_.sin(i/2),a=_.sin(e/2);return this.x=h*n*r+s*o*a,this.y=s*o*r-h*n*a,this.z=s*n*a-h*o*r,this.w=s*n*r+h*o*a,this},setFromAxisAngle:function(t,i){var e=i/2,s=_.sin(e);return this.x=t.x*s,this.y=t.y*s,this.z=t.z*s,this.w=_.cos(e),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,i){var e=t.x,s=t.y,n=t.z,r=t.w,h=i.x,o=i.y,a=i.z,u=i.w;return this.x=e*u+r*h+s*a-n*o,this.y=s*u+r*o+n*h-e*a,this.z=n*u+r*a+e*o-s*h,this.w=r*u-e*h-s*o-n*a,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=_.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var e=this.x,s=this.y,n=this.z,r=this.w,h=r*t.w+e*t.x+s*t.y+n*t.z;if(h<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,h=-h):this.copy(t),h>=1)return this.w=r,this.x=e,this.y=s,this.z=n,this;var o=_.acos(h),a=_.sqrt(1-h*h);if(_.abs(a)<.001)return this.w=.5*(r+this.w),this.x=.5*(e+this.x),this.y=.5*(s+this.y),this.z=.5*(n+this.z),this;var u=_.sin((1-i)*o)/a,c=_.sin(i*o)/a;return this.w=r*u+this.w*c,this.x=e*u+this.x*c,this.y=s*u+this.y*c,this.z=n*u+this.z*c,this},setFromUnitVectors:function(){var t,i;return function(e,s){return void 0===t&&(t=new De),(i=e.dot(s)+1)<1e-6?(i=0,_.abs(e.x)>_.abs(e.z)?t.set(-e.y,e.x,0):t.set(0,-e.z,e.y)):t.crossVectors(e,s),this.x=t.x,this.y=t.y,this.z=t.z,this.w=i,this.normalize(),this}}()};var k4=new L4({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),C4=new L4({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),x4={CardboardV1:new O4({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new O4({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function ea(t){this.viewer=x4.CardboardV2,this.updateDeviceParams(t),this.distortion=new S4(this.viewer.distortionCoefficients)}function O4(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}ea.prototype.updateDeviceParams=function(t){this.device=this.F8t(t)||this.device},ea.prototype.getDevice=function(){return this.device},ea.prototype.setViewer=function(t){this.viewer=t,this.distortion=new S4(this.viewer.distortionCoefficients)},ea.prototype.F8t=function(t){if(!t)return el()?(console.warn("Using fallback iOS device measurements."),C4):(console.warn("Using fallback Android device measurements."),k4);var i=.0254,e=i/t.xdpi,s=i/t.ydpi;return new L4({widthMeters:e*a4(),heightMeters:s*u4(),bevelMeters:.001*t.bevelMm})},ea.prototype.getDistortedFieldOfViewLeftEye=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=(i.widthMeters-t.interLensDistance)/2,r=t.interLensDistance/2,h=t.baselineLensDistance-i.bevelMeters,o=i.heightMeters-h,a=b4*_.atan(e.distort(n/s)),u=b4*_.atan(e.distort(r/s)),c=b4*_.atan(e.distort(h/s)),l=b4*_.atan(e.distort(o/s));return{leftDegrees:_.min(a,t.fov),rightDegrees:_.min(u,t.fov),downDegrees:_.min(c,t.fov),upDegrees:_.min(l,t.fov)}},ea.prototype.getLeftEyeVisibleTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=_.tan(-E4*t.fov),n=_.tan(E4*t.fov),r=_.tan(E4*t.fov),h=_.tan(-E4*t.fov),o=i.widthMeters/4,a=i.heightMeters/2,u=t.baselineLensDistance-i.bevelMeters-a,c=t.interLensDistance/2-o,l=-u,d=t.screenLensDistance,f=e.distort((c-o)/d),g=e.distort((l+a)/d),w=e.distort((c+o)/d),A=e.distort((l-a)/d),v=new Float32Array(4);return v[0]=_.max(s,f),v[1]=_.min(n,g),v[2]=_.min(r,w),v[3]=_.max(h,A),v},ea.prototype.getLeftEyeNoLensTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=new Float32Array(4),n=e.distortInverse(_.tan(-E4*t.fov)),r=e.distortInverse(_.tan(E4*t.fov)),h=e.distortInverse(_.tan(E4*t.fov)),o=e.distortInverse(_.tan(-E4*t.fov)),a=i.widthMeters/4,u=i.heightMeters/2,c=t.baselineLensDistance-i.bevelMeters-u,l=t.interLensDistance/2-a,d=-c,f=t.screenLensDistance,g=(l-a)/f,w=(d+u)/f,A=(l+a)/f,v=(d-u)/f;return s[0]=_.max(n,g),s[1]=_.min(r,w),s[2]=_.min(h,A),s[3]=_.max(o,v),s},ea.prototype.getLeftEyeVisibleScreenRect=function(t){var i=this.viewer,e=this.device,s=i.screenLensDistance,n=(e.widthMeters-i.interLensDistance)/2,r=i.baselineLensDistance-e.bevelMeters,h=(t[0]*s+n)/e.widthMeters,o=(t[1]*s+r)/e.heightMeters,a=(t[2]*s+n)/e.widthMeters,u=(t[3]*s+r)/e.heightMeters;return{x:h,y:u,width:a-h,height:o-u}},ea.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},ea.prototype.getFieldOfViewRightEye=function(t){var i=this.getFieldOfViewLeftEye(t);return{leftDegrees:i.rightDegrees,rightDegrees:i.leftDegrees,upDegrees:i.upDegrees,downDegrees:i.downDegrees}},ea.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.Y8t();return{leftDegrees:b4*_.atan(t.outerDist),rightDegrees:b4*_.atan(t.innerDist),downDegrees:b4*_.atan(t.bottomDist),upDegrees:b4*_.atan(t.topDist)}},ea.prototype.getUndistortedViewportLeftEye=function(){var t=this.Y8t(),i=this.viewer,e=this.device,s=i.screenLensDistance,n=e.widthMeters/s,r=e.heightMeters/s,h=e.width/n,o=e.height/r,a=_.round((t.eyePosX-t.outerDist)*h),u=_.round((t.eyePosY-t.bottomDist)*o);return{x:a,y:u,width:_.round((t.eyePosX+t.innerDist)*h)-a,height:_.round((t.eyePosY+t.topDist)*o)-u}},ea.prototype.Y8t=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=t.interLensDistance/2/s,r=i.widthMeters/s,h=i.heightMeters/s,o=r/2-n,a=(t.baselineLensDistance-i.bevelMeters)/s,u=t.fov,c=e.distortInverse(_.tan(E4*u)),l=_.min(o,c),d=_.min(n,c),f=_.min(a,c);return{outerDist:l,innerDist:d,topDist:_.min(h-a,c),bottomDist:f,eyePosX:o,eyePosY:a}},ea.Viewers=x4;var j4={format:1,last_updated:"2018-02-20T22:55:10Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]};function z4(t,i){if(this.dpdb=j4,this.G8t(),t){this.onDeviceParamsUpdated=i;var e=new El,s=this;e.open("GET",t,!0),e.addEventListener("load",(function(){s.loading=!1,e.status>=200&&e.status<=299?(s.dpdb=JSON.parse(e.response),s.G8t()):console.error("Error loading online DPDB!")})),e.send()}}function P4(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}function B4(t,i){this.set(t,i)}function po(t,i){this.kFilter=t,this.isDebug=i,this.currentAccelMeasurement=new B4,this.currentGyroMeasurement=new B4,this.previousGyroMeasurement=new B4,el()?this.filterQ=new bo(-1,0,0,1):this.filterQ=new bo(1,0,0,1),this.previousFilterQ=new bo,this.previousFilterQ.copy(this.filterQ),this.accelQ=new bo,this.isOrientationInitialized=!1,this.estimatedGravity=new De,this.measuredGravity=new De,this.gyroIntegralQ=new bo}function R4(t,i){this.predictionTimeS=t,this.isDebug=i,this.previousQ=new bo,this.previousTimestampS=null,this.deltaQ=new bo,this.outQ=new bo}function Ge(t,i,e,n){this.yawOnly=e,this.accelerometer=new De,this.gyroscope=new De,this.filter=new po(t,n),this.posePredictor=new R4(i,n),this.isFirefoxAndroid=s4(),this.isIOS=el();var r=n4();this.isDeviceMotionInRadians=!this.isIOS&&r&&r<66,this.isWithoutDeviceMotion=r4(),this.filterToWorldQ=new bo,el()?this.filterToWorldQ.setFromAxisAngle(new De(1,0,0),_.PI/2):this.filterToWorldQ.setFromAxisAngle(new De(1,0,0),-_.PI/2),this.inverseWorldToScreenQ=new bo,this.worldToScreenQ=new bo,this.originalPoseAdjustQ=new bo,this.originalPoseAdjustQ.setFromAxisAngle(new De(0,0,1),-s.orientation*_.PI/180),this.V8t(),o4()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new bo,this.W8t=new Float32Array(4),this.start()}z4.prototype.getDeviceParams=function(){return this.deviceParams},z4.prototype.G8t=function(){var t=this.H8t();t?(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},z4.prototype.H8t=function(){var t=this.dpdb;if(!t)return console.error("DPDB not available."),null;if(1!=t.format)return console.error("DPDB has unexpected format version."),null;if(!t.devices||!t.devices.length)return console.error("DPDB does not have a devices section."),null;var i=Dl.userAgent||Dl.vendor||s.opera,e=a4(),n=u4();if(!t.devices)return console.error("DPDB has no devices section."),null;for(var r=null,h=1/0,o=0;o<t.devices.length;o++){var a=t.devices[o];if(a.rules)if("ios"==a.type||"android"==a.type){if(el()==("ios"==a.type)){for(var u=!1,c=0;c<a.rules.length;c++){var l=a.rules[c],d=this.q8t(l,i,e,n);if(!0===d){h=d,r=a,u=!0;break}!1!==d&&d<h&&(h=d,r=a)}if(u)break}}else console.warn("Device["+o+"] has invalid type.");else console.warn("Device["+o+"] has no rules section.")}return r?new P4({xdpi:r.dpi[0]||r.dpi,ydpi:r.dpi[1]||r.dpi,bevelMm:r.bw}):(console.warn("No DPDB device match."),null)},z4.prototype.q8t=function(t,i,e,s){if(!t.ua&&!t.res)return!1;if(t.ua&&i.indexOf(t.ua)<0)return!1;if(t.res){if(!t.res[0]||!t.res[1])return!1;var n=t.res[0],r=t.res[1],h=_.min(e,s)-_.min(n,r),o=_.max(e,s)-_.max(n,r),a=_.abs(h)+_.abs(o);if(a>0)return a}return!0},B4.prototype.set=function(t,i){this.sample=t,this.timestampS=i},B4.prototype.copy=function(t){this.set(t.sample,t.timestampS)},po.prototype.addAccelMeasurement=function(t,i){this.currentAccelMeasurement.set(t,i)},po.prototype.addGyroMeasurement=function(t,i){this.currentGyroMeasurement.set(t,i),function(t){return!(S(t)||t<=.001||t>1)}(i-this.previousGyroMeasurement.timestampS)&&this.X8t(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},po.prototype.X8t=function(){if(!this.isOrientationInitialized)return this.accelQ=this.Z8t(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,i=this.K8t(this.currentGyroMeasurement.sample,t);this.gyroIntegralQ.multiply(i),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(i);var e=new bo;e.copy(this.filterQ),e.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(e),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var s=new bo;s.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),s.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",b4*function(t){return t.w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*_.acos(t.w)}(s),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var n=new bo;n.copy(this.filterQ),n.multiply(s),this.filterQ.slerp(n,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},po.prototype.getOrientation=function(){return this.filterQ},po.prototype.Z8t=function(t){var i=new De;i.copy(t),i.normalize();var e=new bo;return e.setFromUnitVectors(new De(0,0,-1),i),e.inverse(),e},po.prototype.K8t=function(t,i){var e=new bo,s=new De;return s.copy(t),s.normalize(),e.setFromAxisAngle(s,t.length()*i),e},R4.prototype.getPrediction=function(t,i,e){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=e,t;var s=new De;s.copy(i),s.normalize();var n=i.length();if(n<20*E4)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(b4*n).toFixed(1)),this.outQ.copy(t),this.previousQ.copy(t),this.outQ;var r=n*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(s,r),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.previousTimestampS=e,this.outQ},Ge.prototype.getPosition=function(){return null},Ge.prototype.getOrientation=function(){var t=void 0;if(this.isWithoutDeviceMotion&&this.J8t)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(i=(new bo).setFromAxisAngle(new De(0,0,-1),0),e=new bo,-90===s.orientation?e.setFromAxisAngle(new De(0,1,0),_.PI/-2):e.setFromAxisAngle(new De(0,1,0),_.PI/2),i.multiply(e)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var t=new bo;return t.setFromAxisAngle(new De(1,0,0),-_.PI/2),t}(),t=this.J8t,(n=new bo).copy(t),n.multiply(this.deviceOrientationFilterToWorldQ),n.multiply(this.resetQ),n.multiply(this.worldToScreenQ),n.multiplyQuaternions(this.deviceOrientationFixQ,n),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.W8t[0]=n.x,this.W8t[1]=n.y,this.W8t[2]=n.z,this.W8t[3]=n.w,this.W8t;var i,e,n,r=this.filter.getOrientation();return t=this.posePredictor.getPrediction(r,this.gyroscope,this.previousTimestampS),(n=new bo).copy(this.filterToWorldQ),n.multiply(this.resetQ),n.multiply(t),n.multiply(this.worldToScreenQ),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.W8t[0]=n.x,this.W8t[1]=n.y,this.W8t[2]=n.z,this.W8t[3]=n.w,this.W8t},Ge.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),o4()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},Ge.prototype.$8t=function(t){this.J8t=this.J8t||new bo;var i=t.alpha,e=t.beta,s=t.gamma;i=(i||0)*_.PI/180,e=(e||0)*_.PI/180,s=(s||0)*_.PI/180,this.J8t.setFromEulerYXZ(e,i,-s)},Ge.prototype.t9t=function(t){this.i9t(t)},Ge.prototype.i9t=function(t){var i=t.accelerationIncludingGravity,e=t.rotationRate,s=t.timeStamp/1e3,n=s-this.previousTimestampS;return n<0?(m4("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=s)):n<=.001||n>1?(m4("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=s)):(this.accelerometer.set(-i.x,-i.y,-i.z),h4()?this.gyroscope.set(-e.beta,e.alpha,e.gamma):this.gyroscope.set(e.alpha,e.beta,e.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(_.PI/180),this.filter.addAccelMeasurement(this.accelerometer,s),this.filter.addGyroMeasurement(this.gyroscope,s),void(this.previousTimestampS=s))},Ge.prototype.e9t=function(t){this.V8t()},Ge.prototype.TC=function(t){var i=t.data;i&&i.type&&("devicemotion"===i.type.toLowerCase()&&this.i9t(i.deviceMotionEvent))},Ge.prototype.V8t=function(){switch(this.worldToScreenQ.set(0,0,0,1),s.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new De(0,0,1),-_.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new De(0,0,1),_.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},Ge.prototype.start=function(){var t,i,e;this.s9t=this.t9t.bind(this),this.n9t=this.e9t.bind(this),this.r9t=this.TC.bind(this),this.h9t=this.$8t.bind(this),el()&&(t=s.self!==s.top,i=v4(h.referrer),e=v4(s.location.href),t&&i!==e)&&s.addEventListener("message",this.r9t),s.addEventListener("orientationchange",this.n9t),this.isWithoutDeviceMotion?s.addEventListener("deviceorientation",this.h9t):s.addEventListener("devicemotion",this.s9t)},Ge.prototype.stop=function(){s.removeEventListener("devicemotion",this.s9t),s.removeEventListener("deviceorientation",this.h9t),s.removeEventListener("orientationchange",this.n9t),s.removeEventListener("message",this.r9t)};var U4=new De(1,0,0),Q4=new De(0,0,1),F4={};screen.orientation?F4=screen.orientation:screen.msOrientation?F4=screen.msOrientation:w.defineProperty(F4,"angle",{get:function(){return s.orientation||0}});var Y4=new bo;Y4.setFromAxisAngle(U4,-_.PI/2),Y4.multiply((new bo).setFromAxisAngle(Q4,_.PI/2));var G4=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new b("Cannot call a class as a function")}(this,t),this.config=i,this.sensor=null,this.fusionSensor=null,this.o9t=new Float32Array(4),this.api=null,this.errors=[],this.a9t=new bo,this.u9t=new bo,this.c9t=new bo,this.l9t=this.l9t.bind(this),this.d9t=this.d9t.bind(this),this.f9t=this.f9t.bind(this),this.f9t(),this.init()}return $1(t,[{key:"init",value:function(){var t=null;try{(t=new RelativeOrientationSensor({frequency:60})).addEventListener("error",this.d9t)}catch(t){this.errors.push(t),"SecurityError"===t.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===t.name?this.useDeviceMotion():console.error(t)}t&&(this.api="sensor",this.sensor=t,this.sensor.addEventListener("reading",this.l9t),this.sensor.start()),s.addEventListener("orientationchange",this.f9t)}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new Ge(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this.o9t[0]=this.o9t[1]=this.o9t[2]=0,this.o9t[3]=1,this.o9t;var t=this.sensor.quaternion;this.a9t.set(t[0],t[1],t[2],t[3]);var i=this.c9t;return i.copy(Y4),i.multiply(this.a9t),i.multiply(this.u9t),this.config.YAW_ONLY&&(i.x=i.z=0,i.normalize()),this.o9t[0]=i.x,this.o9t[1]=i.y,this.o9t[2]=i.z,this.o9t[3]=i.w,this.o9t}},{key:"d9t",value:function(t){this.errors.push(t.error),"NotAllowedError"===t.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===t.error.name?console.error("Sensor could not be read"):console.error(t.error)}},{key:"l9t",value:function(){}},{key:"f9t",value:function(){var t=-F4.angle*_.PI/180;this.u9t.setFromAxisAngle(Q4,t)}}]),t}();function yh(){this._9t();var t=h.createElement("div");(r=t.style).position="fixed",r.top=0,r.right=0,r.bottom=0,r.left=0,r.backgroundColor="gray",r.fontFamily="sans-serif",r.zIndex=1e6;var i=h.createElement("img");i.src=this.icon,(r=i.style).marginLeft="25%",r.marginTop="25%",r.width="50%",t.appendChild(i);var e=h.createElement("div");(r=e.style).textAlign="center",r.fontSize="16px",r.lineHeight="24px",r.margin="24px 25%",r.width="50%",e.innerHTML="Place your phone into your Cardboard viewer.",t.appendChild(e);var s=h.createElement("div");(r=s.style).backgroundColor="#CFD8DC",r.position="fixed",r.bottom=0,r.width="100%",r.height="48px",r.padding="14px 24px",r.boxSizing="border-box",r.color="#656A6B",t.appendChild(s);var n=h.createElement("div");n.style.float="left",n.innerHTML="No Cardboard viewer?";var r,o=h.createElement("a");o.href="https://www.google.com/get/cardboard/get-cardboard/",o.innerHTML="get one",o.target="Du",(r=o.style).float="right",r.fontWeight=600,r.textTransform="uppercase",r.borderLeft="1px solid gray",r.paddingLeft="24px",r.textDecoration="none",r.color="#656A6B",s.appendChild(n),s.appendChild(o),this.overlay=t,this.text=e,this.hide()}yh.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):h.body.appendChild(this.overlay),this.overlay.style.display="block";var i=this.overlay.querySelector("img").style;o4()?(i.width="20%",i.marginLeft="40%",i.marginTop="3%"):(i.width="50%",i.marginLeft="25%",i.marginTop="25%")},yh.prototype.hide=function(){this.overlay.style.display="none"},yh.prototype.showTemporarily=function(t,i){this.show(i),this.timer=u(this.hide.bind(this),t)},yh.prototype.disableShowTemporarily=function(){c(this.timer)},yh.prototype.update=function(){this.disableShowTemporarily(),!o4()&&f4()?this.show():this.hide()},yh.prototype._9t=function(){this.icon="data:"+"image/svg+xml"+";base64,"+"PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"};var V4="CardboardV1",W4="WEBVR_CARDBOARD_VIEWER";function Wi(){try{this.selectedKey=localStorage.getItem(W4)}catch(t){console.error("Failed to load viewer profile: %s",t)}this.selectedKey||(this.selectedKey=V4),this.dialog=this.g9t(ea.Viewers),this.root=null,this.w9t=[]}Wi.prototype.show=function(t){this.root=t,t.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},Wi.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},Wi.prototype.getCurrentViewer=function(){return ea.Viewers[this.selectedKey]},Wi.prototype.A9t=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},Wi.prototype.onChange=function(t){this.w9t.push(t)},Wi.prototype.v9t=function(t){for(var i=0;i<this.w9t.length;i++)this.w9t[i](t)},Wi.prototype.m9t=function(){if(this.selectedKey=this.A9t(),this.selectedKey&&ea.Viewers[this.selectedKey]){this.v9t(ea.Viewers[this.selectedKey]);try{localStorage.setItem(W4,this.selectedKey)}catch(t){console.error("Failed to save viewer profile: %s",t)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},Wi.prototype.g9t=function(t){var i=h.createElement("div");i.classList.add("webvr-polyfill-viewer-selector"),i.style.display="none";var e=h.createElement("div");(n=e.style).position="fixed",n.left=0,n.top=0,n.width="100%",n.height="100%",n.background="rgba(0, 0, 0, 0.3)",e.addEventListener("click",this.hide.bind(this));var s=h.createElement("div"),n=s.style;for(var r in n.boxSizing="border-box",n.position="fixed",n.top="24px",n.left="50%",n.marginLeft="-140px",n.width="280px",n.padding="24px",n.overflow="hidden",n.background="#fafafa",n.fontFamily="'Roboto', sans-serif",n.boxShadow="0px 5px 20px #666",s.appendChild(this.p9t("Select your viewer")),t)s.appendChild(this.y9t(r,t[r].label));return s.appendChild(this.M9t("Save",this.m9t.bind(this))),i.appendChild(e),i.appendChild(s),i},Wi.prototype.p9t=function(t){var i=h.createElement("h1"),e=i.style;return e.color="black",e.fontSize="20px",e.fontWeight="bold",e.marginTop=0,e.marginBottom="24px",i.innerHTML=t,i},Wi.prototype.y9t=function(t,i){var e=h.createElement("div");e.style.marginTop="8px",e.style.color="black";var s=h.createElement("input");s.style.fontSize="30px",s.setAttribute("id",t),s.setAttribute("type","radio"),s.setAttribute("value",t),s.setAttribute("name","field");var n=h.createElement("label");return n.style.marginLeft="4px",n.setAttribute("for",t),n.innerHTML=i,e.appendChild(s),e.appendChild(n),e},Wi.prototype.M9t=function(t,i){var e=h.createElement("button");e.innerHTML=t;var s=e.style;return s.float="right",s.textTransform="uppercase",s.color="#1094f7",s.fontSize="14px",s.letterSpacing=0,s.border=0,s.background="none",s.marginTop="16px",e.addEventListener("click",i),e};void 0!==s||("undefined"!=typeof global?global:"undefined"!=typeof self&&self);var H4=function(t,i){return t(i={exports:{}},i.exports),i.exports}((function(t,i){var e;e=function(){return function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||w.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return w.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),w.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),r=e(1),o=void 0!==Dl&&C((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(Dl.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!s.MSStream,a=function(){function t(){!function(t,i){if(!(t instanceof i))throw new b("Cannot call a class as a function")}(this,t),o?this.noSleepTimer=null:(this.noSleepVideo=h.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",r),this.noSleepVideo.addEventListener("timeupdate",function(t){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=_.random())}.bind(this)))}return n(t,[{key:"enable",value:function(){o?(this.disable(),this.noSleepTimer=s.setInterval((function(){s.location.href="/",s.setTimeout(s.stop,0)}),15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){o?this.noSleepTimer&&(s.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),t}();t.exports=a},function(t,i,e){t.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])},t.exports=e()})),q4=function(t){return t&&t.__esModule?t.default:t}(H4),X4=1e3,Z4=[0,0,.5,1],K4=[.5,0,.5,1],J4=s.requestAnimationFrame,$4=s.cancelAnimationFrame;function t2(t){w.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:t.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:t.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:t.canPresent},maxLayers:{writable:!1,enumerable:!0,value:t.maxLayers},hasOrientation:{enumerable:!0,get:function(){return wh("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),t.hasOrientation}}})}function Vr(t){var i=!("wakelock"in(t=t||{}))||t.wakelock;this.isPolyfilled=!0,this.displayId=X4++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,w.defineProperty(this,"isConnected",{get:function(){return wh("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new t2({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.T9t=!1,this.Fp=null,this.N9t=null,this.RY=null,this.v7=null,this.D9t=null,this.I9t=null,this.S9t=null,this.E9t=null,i&&f4()&&(this.b9t=new q4)}Vr.prototype.getFrameData=function(t){return A4(t,this.L9t(),this)},Vr.prototype.getPose=function(){return wh("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this.L9t()},Vr.prototype.resetPose=function(){return wh("VRDisplay.prototype.resetPose"),this.k9t()},Vr.prototype.getImmediatePose=function(){return wh("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this.L9t()},Vr.prototype.requestAnimationFrame=function(t){return J4(t)},Vr.prototype.cancelAnimationFrame=function(t){return $4(t)},Vr.prototype.wrapForFullscreen=function(t){if(el())return t;if(!this.v7){this.v7=h.createElement("div");var i=["height: "+_.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.v7.setAttribute("style",i.join("; ")+";"),this.v7.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.RY==t)return this.v7;if(this.RY&&(this.N9t?this.N9t.appendChild(this.RY):this.RY.parentElement.removeChild(this.RY)),this.RY=t,this.N9t=t.parentElement,this.N9t||h.body.appendChild(t),!this.v7.parentElement){var e=this.RY.parentElement;e.insertBefore(this.v7,this.RY),e.removeChild(this.RY)}this.v7.insertBefore(this.RY,this.v7.firstChild),this.D9t=this.RY.getAttribute("style");var s=this;return function(){if(s.RY){var t=["position: absolute","top: 0","left: 0","width: "+_.max(screen.width,screen.height)+"px","height: "+_.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];s.RY.setAttribute("style",t.join("; ")+";")}}(),this.v7},Vr.prototype.removeFullscreenWrapper=function(){if(this.RY){var t=this.RY;this.D9t?t.setAttribute("style",this.D9t):t.removeAttribute("style"),this.RY=null,this.D9t=null;var i=this.v7.parentElement;return this.v7.removeChild(t),this.N9t===i?i.insertBefore(t,this.v7):this.N9t&&this.N9t.appendChild(t),i.removeChild(this.v7),t}},Vr.prototype.requestPresent=function(t){var i=this.isPresenting,e=this;return t instanceof Array||(wh("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),t=[t]),new Promise((function(s,n){if(e.capabilities.canPresent)if(0==t.length||t.length>e.capabilities.maxLayers)n(new g("Invalid number of layers."));else{var r=t[0];if(r.source){var o=r.leftBounds||Z4,a=r.rightBounds||K4;if(i){var u=e.Fp;u.source!==r.source&&(u.source=r.source);for(var c=0;c<4;c++)u.leftBounds[c]=o[c],u.rightBounds[c]=a[c];return e.wrapForFullscreen(e.Fp.source),e.C9t(),void s()}if(e.Fp={predistorted:r.predistorted,source:r.source,leftBounds:o.slice(0),rightBounds:a.slice(0)},e.T9t=!1,e.Fp&&e.Fp.source){var l=e.wrapForFullscreen(e.Fp.source);e.x9t(l,(function(){var t=h.fullscreenElement||h.webkitFullscreenElement||h.mozFullScreenElement||h.msFullscreenElement;e.isPresenting=l===t,e.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch((function(t){console.error("screen.orientation.lock() failed due to",t.message)})),e.T9t=!1,e.O9t(),s()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),e.disableWakeLock(),e.j9t(),e.removeFullscreenWrapper(),e.z9t()),e.P9t()}),(function(){e.T9t&&(e.removeFullscreenWrapper(),e.z9t(),e.disableWakeLock(),e.T9t=!1,e.isPresenting=!1,n(new g("Unable to present.")))})),!function(t){if(h.fullscreenEnabled&&t.requestFullscreen)t.requestFullscreen();else if(h.webkitFullscreenEnabled&&t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(h.mozFullScreenEnabled&&t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!h.msFullscreenEnabled||!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0}(l)?(el()||e4())&&(e.enableWakeLock(),e.isPresenting=!0,e.O9t(),e.P9t(),s()):(e.enableWakeLock(),e.T9t=!0)}e.T9t||el()||(c4(),n(new g("Unable to present.")))}else s()}else n(new g("VRDisplay is not capable of presenting."))}))},Vr.prototype.exitPresent=function(){var t=this.isPresenting,i=this;return this.isPresenting=!1,this.Fp=null,this.disableWakeLock(),new Promise((function(e,s){t?(c4(),i.j9t(),i.removeFullscreenWrapper(),i.z9t(),i.P9t(),e()):s(new g("Was not presenting to VRDisplay."))}))},Vr.prototype.getLayers=function(){return this.Fp?[this.Fp]:[]},Vr.prototype.P9t=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});s.dispatchEvent(t)},Vr.prototype.B9t=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});s.dispatchEvent(t)},Vr.prototype.x9t=function(t,i,e){this.z9t(),this.I9t=t,this.S9t=i,this.E9t=e,i&&(h.fullscreenEnabled?t.addEventListener("fullscreenchange",i,!1):h.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenchange",i,!1):h.mozFullScreenEnabled?h.addEventListener("mozfullscreenchange",i,!1):h.msFullscreenEnabled&&t.addEventListener("msfullscreenchange",i,!1)),e&&(h.fullscreenEnabled?t.addEventListener("fullscreenerror",e,!1):h.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenerror",e,!1):h.mozFullScreenEnabled?h.addEventListener("mozfullscreenerror",e,!1):h.msFullscreenEnabled&&t.addEventListener("msfullscreenerror",e,!1))},Vr.prototype.z9t=function(){if(this.I9t){var t=this.I9t;if(this.S9t){var i=this.S9t;t.removeEventListener("fullscreenchange",i,!1),t.removeEventListener("webkitfullscreenchange",i,!1),h.removeEventListener("mozfullscreenchange",i,!1),t.removeEventListener("msfullscreenchange",i,!1)}if(this.E9t){var e=this.E9t;t.removeEventListener("fullscreenerror",e,!1),t.removeEventListener("webkitfullscreenerror",e,!1),h.removeEventListener("mozfullscreenerror",e,!1),t.removeEventListener("msfullscreenerror",e,!1)}this.I9t=null,this.S9t=null,this.E9t=null}},Vr.prototype.enableWakeLock=function(){this.b9t&&this.b9t.enable()},Vr.prototype.disableWakeLock=function(){this.b9t&&this.b9t.disable()},Vr.prototype.O9t=function(){},Vr.prototype.j9t=function(){},Vr.prototype.submitFrame=function(t){},Vr.prototype.getEyeParameters=function(t){return null};var i2={MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},e2="left",s2="right";function ie(t){var i=_4({},i2);t=_4(i,t||{}),Vr.call(this,{wakelock:t.MOBILE_WAKE_LOCK}),this.config=t,this.displayName="Cardboard VRDisplay",this.capabilities=new t2({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.R9t=this.config.BUFFER_SCALE,this.U9t=new G4(this.config),this.Q9t=null,this.F9t=null,this.A7=null,this.Y9t=null,this.G9t=new z4(this.config.DPDB_URL,this.V9t.bind(this)),this.W9t=new ea(this.G9t.getDeviceParams()),this.H9t=new Wi,this.H9t.onChange(this.q9t.bind(this)),this.W9t.setViewer(this.H9t.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.X9t=new yh),el()&&s.addEventListener("resize",this.NY.bind(this))}ie.prototype=w.create(Vr.prototype),ie.prototype.L9t=function(){return{position:null,orientation:this.U9t.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},ie.prototype.k9t=function(){this.U9t.resetPose&&this.U9t.resetPose()},ie.prototype.P8t=function(t){var i;if(t==e2)i=this.W9t.getFieldOfViewLeftEye();else{if(t!=s2)return console.error("Invalid eye provided: %s",t),null;i=this.W9t.getFieldOfViewRightEye()}return i},ie.prototype.B8t=function(t){var i;if(t==e2)i=[.5*-this.W9t.viewer.interLensDistance,0,0];else{if(t!=s2)return console.error("Invalid eye provided: %s",t),null;i=[.5*this.W9t.viewer.interLensDistance,0,0]}return i},ie.prototype.getEyeParameters=function(t){var i=this.B8t(t),e=this.P8t(t),s={offset:i,renderWidth:.5*this.W9t.device.width*this.R9t,renderHeight:this.W9t.device.height*this.R9t};return w.defineProperty(s,"fieldOfView",{enumerable:!0,get:function(){return wh("VRFieldOfView","VRFrameData's projection matrices"),e}}),s},ie.prototype.V9t=function(t){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.W9t.updateDeviceParams(t),this.Q9t&&this.Q9t.updateDeviceInfo(this.W9t)},ie.prototype.Z9t=function(){this.Fp&&this.Q9t&&(this.Fp.leftBounds||this.Fp.rightBounds)&&this.Q9t.setTextureBounds(this.Fp.leftBounds,this.Fp.rightBounds)},ie.prototype.O9t=function(){var t=this.Fp.source.getContext("webgl");if(t||(t=this.Fp.source.getContext("experimental-webgl")),t||(t=this.Fp.source.getContext("webgl2")),t){if(this.A7=t.canvas,this.Y9t=t.canvas.getAttribute("style"),this.Fp.predistorted?this.config.CARDBOARD_UI_DISABLED||(t.canvas.width=a4()*this.R9t,t.canvas.height=u4()*this.R9t,this.F9t=new ph(t)):(this.config.CARDBOARD_UI_DISABLED||(this.F9t=new ph(t)),this.Q9t=new Yh(t,this.F9t,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.Q9t.updateDeviceInfo(this.W9t)),this.F9t&&this.F9t.listen(function(t){this.H9t.show(this.Fp.source.parentElement),t.stopPropagation(),t.preventDefault()}.bind(this),function(t){this.exitPresent(),t.stopPropagation(),t.preventDefault()}.bind(this)),this.X9t){var i=this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT;o4()&&f4()&&i?this.X9t.showTemporarily(i,this.Fp.source.parentElement):this.X9t.update()}this.orientationHandler=this.e9t.bind(this),s.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.Z9t.bind(this),s.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.NY(),this.K9t()}},ie.prototype.j9t=function(){this.Q9t&&(this.Q9t.destroy(),this.Q9t=null),this.F9t&&(this.F9t.destroy(),this.F9t=null),this.X9t&&this.X9t.hide(),this.H9t.hide(),this.A7&&(w4(this.A7),this.Y9t?this.A7.setAttribute("style",this.Y9t):this.A7.removeAttribute("style"),g4(this.A7),this.A7=null,this.Y9t=null),s.removeEventListener("orientationchange",this.orientationHandler),s.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},ie.prototype.C9t=function(){this.j9t(),this.O9t()},ie.prototype.submitFrame=function(t){if(this.Q9t)this.Z9t(),this.Q9t.submitFrame();else if(this.F9t&&this.Fp){var i=this.Fp.source.getContext("webgl").canvas;i.width==this.lastWidth&&i.height==this.lastHeight||this.F9t.onResize(),this.lastWidth=i.width,this.lastHeight=i.height,this.F9t.render()}},ie.prototype.e9t=function(t){this.H9t.hide(),this.X9t&&this.X9t.update(),this.NY()},ie.prototype.NY=function(t){if(this.Fp){var i=this.Fp.source.getContext("webgl");w4(i.canvas);i.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),g4(i.canvas)}},ie.prototype.q9t=function(t){this.W9t.setViewer(t),this.Q9t&&this.Q9t.updateDeviceInfo(this.W9t),this.K9t()},ie.prototype.K9t=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.W9t}});s.dispatchEvent(t)},ie.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},ie.VRDisplay=Vr;var n2={PROVIDE_MOBILE_VRDISPLAY:!0,GET_VR_DISPLAYS_TIMEOUT:1e3,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function dc(t){this.config=J1(J1({},n2),t),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in Dl,this.native={},this.native.getVRDisplays=Dl.getVRDisplays,this.native.VRFrameData=s.VRFrameData,this.native.VRDisplay=s.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&Z1())&&(this.enable(),this.getVRDisplays().then((function(t){t&&t[0]&&t[0].B9t&&t[0].B9t()})))}dc.prototype.getPolyfillDisplays=function(){if(this.J9t)return this.polyfillDisplays;if(Z1()){var t=new ie({MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,TOUCH_PANNER_DISABLED:this.config.TOUCH_PANNER_DISABLED,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(t)}return this.J9t=!0,this.polyfillDisplays},dc.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var t=this.native.VRFrameData,i=new this.native.VRFrameData,e=this.native.VRDisplay.prototype.getFrameData;s.VRDisplay.prototype.getFrameData=function(s){s instanceof t?e.call(this,s):(e.call(this,i),s.pose=i.pose,K1(i.leftProjectionMatrix,s.leftProjectionMatrix),K1(i.rightProjectionMatrix,s.rightProjectionMatrix),K1(i.leftViewMatrix,s.leftViewMatrix),K1(i.rightViewMatrix,s.rightViewMatrix))}}Dl.getVRDisplays=this.getVRDisplays.bind(this),s.VRDisplay=ie.VRDisplay,s.VRFrameData=ie.VRFrameData},dc.prototype.getVRDisplays=function(){var t,i=this,e=this.config;return this.hasNative?function(t){return Promise.race?Promise.race(t):new Promise((function(i,e){for(var s=0;s<t.length;s++)t[s].then(i,e)}))}([this.native.getVRDisplays.call(Dl),new Promise((function(i){t=u((function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),i([])}),e.GET_VR_DISPLAYS_TIMEOUT)}))]).then((function(e){return c(t),e.length>0?e:i.getPolyfillDisplays()})):Promise.resolve(this.getPolyfillDisplays())},dc.version="0.10.5-opentelly.3",dc.VRFrameData=ie.VRFrameData,dc.VRDisplay=ie.VRDisplay;var r2=w.freeze({default:dc}),h2=r2&&dc||r2;void 0!==X1&&X1.window&&(X1.document||(X1.document=X1.window.document),X1.navigator||(X1.navigator=X1.window.navigator));new h2({TOUCH_PANNER_DISABLED:!0,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:0,MOBILE_WAKE_LOCK:!fi.vb&&!fi.Ga,DPDB_URL:void 0});var ei,o2=class{$9t(t,i){const e=this.t7t;let s;switch(i){case e.VERTEX_SHADER:s=e.createShader(i),this.i7t=s;break;case e.FRAGMENT_SHADER:s=e.createShader(i),this.e7t=s;break;default:return void console.error("Invalid Shader Type:",i)}e.attachShader(this.s7t,s),e.shaderSource(s,t),e.compileShader(s)}n7t(t){const i=this.t7t;if(t){this.r7t={};for(const e in t)i.bindAttribLocation(this.s7t,t[e],e),this.r7t[e]=t[e]}}h7t(){this.t7t.linkProgram(this.s7t)}o7t(){const t=this.t7t;if(this.a7t){if(t.getProgramParameter(this.s7t,t.LINK_STATUS)){if(!this.r7t){this.r7t={};const i=t.getProgramParameter(this.s7t,t.ACTIVE_ATTRIBUTES);for(let e=0;e<i;e++){const i=t.getActiveAttrib(this.s7t,e);this.r7t[i.name]=t.getAttribLocation(this.s7t,i.name)}}this.u7t={};const i=t.getProgramParameter(this.s7t,t.ACTIVE_UNIFORMS);let e="";for(let s=0;s<i;s++){e=t.getActiveUniform(this.s7t,s).name.replace("[0]",""),this.u7t[e]=t.getUniformLocation(this.s7t,e)}}else this.i7t&&!t.getShaderParameter(this.i7t,t.COMPILE_STATUS)?console.error("Vertex shader compile error:",t.getShaderInfoLog(this.i7t)):this.e7t&&!t.getShaderParameter(this.e7t,t.COMPILE_STATUS)?console.error("Fragment shader compile error:",t.getShaderInfoLog(this.e7t)):console.error("Program link error:",t.getProgramInfoLog(this.s7t)),t.deleteProgram(this.s7t),this.s7t=null;t.deleteShader(this.i7t),t.deleteShader(this.e7t),this.a7t=!1}t.useProgram(this.s7t)}constructor(t){this.r7t=null,this.u7t=null,this.a7t=!0,this.i7t=null,this.e7t=null,this.t7t=t,this.s7t=t.createProgram()}},a2=class{pr(t,i,e){let s=this.t7t;this.c7t(t,i,s,e),this.t.Ff||this.t.A7.hY(s,s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE),s.drawElements(s.TRIANGLES,this.l7t,s.UNSIGNED_SHORT,0)}d7t(t){this.f7t||(t.bindTexture(t.TEXTURE_2D,this._7t),this.t.A7.hY(t,t.TEXTURE_2D,0,t.RGB,t.RGB,t.UNSIGNED_BYTE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.f7t=!0)}c7t(t,i,e,s){const n=this.s7t;n.o7t(),this.d7t(e);const r=n.u7t,h=n.r7t;let o;e.uniformMatrix4fv(r.projectionMat,!1,t),e.uniformMatrix4fv(r.modelViewMat,!1,i),o="right"===s?this.g7t:this.w7t,e.bindBuffer(e.ARRAY_BUFFER,o),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.A7t),e.enableVertexAttribArray(h.position),e.enableVertexAttribArray(h.texCoord),e.vertexAttribPointer(h.position,3,e.FLOAT,!1,20,0),e.vertexAttribPointer(h.texCoord,2,e.FLOAT,!1,20,12),e.activeTexture(e.TEXTURE0),e.uniform1i(r.diffuse,0),e.bindTexture(e.TEXTURE_2D,this._7t)}constructor(t,i,e){this.f7t=!1,this.t7t=t,this._7t=t.createTexture();let s=["uniform mat4 projectionMat;","uniform mat4 modelViewMat;","attribute vec3 position;","attribute vec2 texCoord;","varying vec2 vTexCoord;","void main() {","  vTexCoord = texCoord;","  gl_Position = projectionMat * modelViewMat * vec4( position, 1.0 );","}"].join("\n"),n=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");this.s7t=new o2(t),this.s7t.$9t(s,t.VERTEX_SHADER),this.s7t.$9t(n,t.FRAGMENT_SHADER),this.s7t.n7t({position:0,texCoord:1}),this.s7t.h7t();const r=[],h=[],o=[],a=40;for(let t=0;t<=40;++t){const i=t*_.PI/40,s=_.sin(i),n=_.cos(i);for(let i=0;i<=a;++i){const o=2*i*_.PI/a-_.PI,u=_.sin(o)*s,c=n,l=-_.cos(o)*s,d=i/a,f=t/40;switch(e){case"horizontal":r.push(2*u,2*c,2*l,d/2,f),h.push(2*u,2*c,2*l,d/2+.5,f);break;case"vertical":r.push(2*u,2*c,2*l,d,f/2),h.push(2*u,2*c,2*l,d,f/2+.5);break;default:r.push(2*u,2*c,2*l,d,f)}}}for(let t=0;t<40;++t){let i=41*t,e=41*(t+1);for(let t=0;t<a;++t){let s=i+t,n=e+t;o.push(s,n,s+1,n,n+1,s+1)}}switch(this.w7t=t.createBuffer(),this.g7t=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.w7t),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.g7t),e){case"horizontal":case"vertical":t.bufferData(t.ARRAY_BUFFER,new Float32Array(h),t.STATIC_DRAW);break;default:t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW)}this.A7t=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.A7t),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),t.STATIC_DRAW),this.l7t=o.length,this.t=i}},$u=class extends yo{fa(){return new u2}constructor(){super("v7t")}},u2=class extends wn{constructor(){super("stereochange")}},Sc=class extends yo{fa(){return new c2}constructor(){super("m7t")}},c2=class extends wn{constructor(){super("directionchange")}},Zh=_.PI/180,l2=180/_.PI,fl=class{Kj(t,i){return this.x=t,this.y=i,this}Vlt(t){return this.x=t.x,this.y=t.y,this}p7t(t){return this.Kj(t[0],t[1])}y7t(){const t=new Float32Array(2);return t[0]=this.x,t[1]=this.y,t}M7t(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}constructor(t,i){this.x=t||0,this.y=i||0}},to=class{Kj(t,i,e){return this.x=t,this.y=i,this.z=e,this}Vlt(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}p7t(t){return this.Kj(t[0],t[1],t[2])}y7t(){const t=new Float32Array(3);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t}U(){return _.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}T7t(){const t=this.U();if(0!==t){const i=1/t;this.N7t(i)}else this.x=0,this.y=0,this.z=0;return this}N7t(t){this.x*=t,this.y*=t,this.z*=t}D7t(t){const i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,h=t.z,o=t.w,a=o*i+r*s-h*e,u=o*e+h*i-n*s,c=o*s+n*e-r*i,l=-n*i-r*e-h*s;return this.x=a*o+l*-n+u*-h-c*-r,this.y=u*o+l*-r+c*-n-a*-h,this.z=c*o+l*-h+a*-r-u*-n,this}I7t(t){return this.x*t.x+this.y*t.y+this.z*t.z}S7t(t,i){const e=t.x,s=t.y,n=t.z,r=i.x,h=i.y,o=i.z;return this.x=s*o-n*h,this.y=n*r-e*o,this.z=e*h-s*r,this}constructor(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0}},d2=class{Kj(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this}Vlt(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}p7t(t){return this.Kj(t[0],t[1],t[2],t[3])}y7t(){const t=new Float32Array(4);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=this.w,t}I7t(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}sD(t){return this.E7t(this,t)}E7t(t,i){const e=t.x,s=t.y,n=t.z,r=t.w,h=i.x,o=i.y,a=i.z,u=i.w;return this.x=e*u+r*h+s*a-n*o,this.y=s*u+r*o+n*h-e*a,this.z=n*u+r*a+e*o-s*h,this.w=r*u-e*h-s*o-n*a,this}b7t(){return this.x*=-1,this.y*=-1,this.z*=-1,this.T7t(),this}L7t(){const t=this.x,i=this.y,e=this.z,s=this.w,n=t*i+e*s;let r,h,o;if(n>.499)r=2*_.atan2(t,s),h=_.PI/2,o=0;else if(n<-.499)r=-2*_.atan2(t,s),h=-_.PI/2,o=0;else{const a=t*t,u=i*i,c=e*e;r=_.atan2(2*i*s-2*t*e,1-2*u-2*c),h=_.asin(2*n),o=_.atan2(2*t*s-2*i*e,1-2*a-2*c)}return new f2(r,o,h)}T7t(){let t=_.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this}constructor(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1}},f2=class{Kj(t,i,e){return this.k7t=t,this.C7t=i,this.x7t=e,this}Vlt(t){return this.Kj(t.k7t,t.C7t,t.x7t)}ST(t){return this.k7t+=t.k7t,this.C7t+=t.C7t,this.x7t+=t.x7t,this}O7t(){const t=this.k7t,i=this.x7t,e=this.C7t,s=_.cos(t/2),n=_.cos(i/2),r=_.cos(e/2),h=_.sin(t/2),o=_.sin(i/2),a=_.sin(e/2),u=s*n,c=h*o;return new d2(u*a+c*r,h*n*r+s*o*a,s*o*r-h*n*a,u*r-c*a)}constructor(t,i,e){this.k7t=t||0,this.C7t=i||0,this.x7t=e||0}},_2=.15,g2=class{UI(){this.Rt||(this.Rt=!0,this.we.addEventListener("keydown",this.j7t),this.we.addEventListener("mousedown",this.z7t),this.we.addEventListener("touchstart",this.P7t),s.addEventListener("mousemove",this.er),s.addEventListener("mouseup",this.B7t),this.R7t(s),s.addEventListener("touchmove",this.U7t),s.addEventListener("touchend",this.Q7t))}R7t(t){if(LM(t));else if(sn(t))try{t.parent.addEventListener("mouseup",this.B7t),this.R7t(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.F7t)}}QI(){this.Rt&&(this.Rt=!1,this.Y7t=!1,this.G7t&&(nn(this.G7t),this.G7t=null),this.we.removeEventListener("keydown",this.j7t),this.we.removeEventListener("mousedown",this.z7t),this.we.removeEventListener("touchstart",this.P7t),s.removeEventListener("mousemove",this.er),s.removeEventListener("mouseup",this.B7t),this.V7t(s),s.removeEventListener("touchmove",this.U7t),s.removeEventListener("touchend",this.Q7t))}V7t(t){if(t.document.documentElement.removeEventListener("mouseleave",this.F7t),sn(t))try{t.parent.removeEventListener("mouseup",this.B7t),this.V7t(t.parent)}catch(t){}}get W7t(){return new f2(this.H7t,this.q7t,this.X7t)}set W7t(t){this.H7t=t.k7t,this.q7t=t.C7t,this.X7t=t.x7t}Z7t(t){this.K7t("H7t",t)}J7t(t){t=ks(t,-_.PI/2,_.PI/2),this.K7t("q7t",t)}K7t(t,i){this.G7t&&nn(this.G7t);let e=this[t],s=Ju(),n=()=>{let r=Ju()-s;if(r>=80)return this[t]=i,nn(this.G7t),void(this.G7t=null);this.G7t=Ur(n);let h=r/80;this[t]=e+(i-e)*h};this.G7t=Ur(n)}$7t(){this.q7t+=2*_.PI*this.tti.y/this.we.clientHeight*.3,this.H7t+=2*_.PI*this.tti.x/this.we.clientWidth*.5,this.q7t=ks(this.q7t,-_.PI/2,_.PI/2)}iti(){this.Y7t=!1}eti(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.we}resetPose(){this.q7t=0,this.H7t=0}gn(){this.QI()}constructor(t){this.Rt=!1,this.q7t=0,this.H7t=0,this.X7t=0,this.G7t=null,this.sti=new fl,this.nti=new fl,this.tti=new fl,this.Y7t=!1,this.j7t=t=>{38===t.keyCode?this.J7t(this.q7t+_2):39===t.keyCode?this.Z7t(this.H7t-_2):40===t.keyCode?this.J7t(this.q7t-_2):37===t.keyCode&&this.Z7t(this.H7t+_2)},this.z7t=t=>{this.sti.Kj(t.clientX,t.clientY),this.Y7t=!0,t.preventDefault()},this.P7t=t=>{t.touches&&1===t.touches.length&&(this.sti.Kj(t.touches[0].pageX,t.touches[0].pageY),this.Y7t=!0,t.preventDefault())},this.er=t=>{if(this.Y7t||this.eti()){if(this.eti()){let i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.nti.Kj(this.sti.x-i,this.sti.y-e)}else this.nti.Kj(t.clientX,t.clientY);this.tti.M7t(this.nti,this.sti),this.sti.Vlt(this.nti),this.$7t()}},this.U7t=t=>{this.Y7t&&(this.nti.Kj(t.touches[0].pageX,t.touches[0].pageY),this.tti.M7t(this.nti,this.sti),this.sti.Vlt(this.nti),this.$7t())},this.B7t=t=>{this.iti()},this.Q7t=t=>{this.iti()},this.F7t=t=>{this.iti()},this.we=t}},Kh=qr(Ul()),w2=qr(Ql()),A2=(qr(Fl()),qr(Yl())),v2=(qr(Gl()),qr(Vl())),m2=qr(Wl()),p2=qr(Hl()),y2=qr(ql()),M2=qr(Xl()),T2=["m7t","qrt","v7t","error"];function N2(t){let i,e={get stereo(){return t.rti},set stereo(i){t.rti=i},get useDeviceMotionControls(){return t.hti},set useDeviceMotionControls(i){t.hti=i},get direction(){return t.oti},set direction(i){t.oti=i},get verticalFOV(){return t.ati},set verticalFOV(i){t.ati=i},get canPresentVR(){return t.uti},get state(){return t.ult},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new oL(t,T2,e),e}!function(t){t.Rs="unavailable",t.cti="available",t.Oa="presenting"}(ei||(ei={}));var D2=new f2(0*Zh,0,0);function I2(t){return vl(t+180,360)-180}function S2(t,i){let e=t.I7t(i);return 1-e*e<1e-4}var E2=class extends xd{ko(){Dl.getVRDisplays?(this.lti=new VRFrameData,this.dti(),s.addEventListener("vrdisplayconnect",this.dti,!1),s.addEventListener("vrdisplaydisconnect",this.dti,!1),s.addEventListener("vrdisplayactivate",this.fti,!1),s.addEventListener("vrdisplaydeactivate",this._ti,!1),s.addEventListener("vrdisplaypresentchange",this.gti,!1)):Dl.getVRDevices?this.wti("Your browser supports WebVR but not the latest version.",Ui.VR_PLATFORM_UNSUPPORTED):this.wti("Your browser does not support WebVR.",Ui.VR_PLATFORM_UNSUPPORTED),this.t.yn(l.lo,this.do),this.do()}Ati(){let t={alpha:!1,antialias:!1,preserveDrawingBuffer:!0};if(!this.vti){const t=h.createElement("canvas");t.className="theoplayer-vr",ia(t),t.style.zIndex="2",this.t.we.appendChild(t),this.vti=t}this.t7t=this.vti.getContext("webgl",t),this.t7t||(this.t7t=this.vti.getContext("experimental-webgl",t),this.t7t)?(this.t7t.enable(this.t7t.DEPTH_TEST),this.t7t.enable(this.t7t.CULL_FACE)):this.wti("Your browser does not support WebGL.",Ui.VR_PLATFORM_UNSUPPORTED)}mti(){let t=this.oti;this.pti||(this.Ati(),this.pti=!0),this.t7t&&(this.yti(new a2(this.t7t,this.t,this.Mti)),this.vti.style.display="",this.gi||(this.gi=new g2(this.vti)),this.gi.UI(),this.t.ya.yn(ri.ra,this.NY),this.t.yn(ve.pn,this.NY),this.oti=t,this.NY(),this.Tti=Ur(this.Nti))}Dti(){let t=this.oti;this.yti(void 0),this.gi&&this.gi.QI(),this.vti&&(this.vti.style.display="none"),this.t.ya.fn(ri.ra,this.NY),this.t.fn(ve.pn,this.NY),this.Tti&&nn(this.Tti),this.oti=t}Iti(){var t;return null==(t=this.t.Wa())?void 0:t.vr}Sti(t){let i=this.ult,e=this.rti;this.Eti&&(this.bti=void 0,this._ti()),this.Eti=t,this.Eti&&(this.Eti.depthNear=.1,this.Eti.depthFar=1024),this.rti=e,this.ult!==i&&this.Co(new nl),this.rti!==e&&this.Co(new $u)}Lti(t){let i=this.ult;this.kti=t,this.ult!==i&&this.Co(new nl)}yti(t){let i=this.ult;this.Cti=t,this.ult!==i&&this.Co(new nl)}xti(t){let i=this.ult,e=this.rti;this.Oti=t,this.gi&&(t?this.gi.QI():this.gi.UI()),this.ult!==i&&this.Co(new nl),this.rti!==e&&this.Co(new $u)}jti(t){let i=this.rti;this.zti=t,this.rti!==i&&this.Co(new $u)}Pti(){let t=this.vti;this.Bti===t.width&&this.Rti===t.height||(t.width=this.Bti,t.height=this.Rti,this.Uti())}Qti(t,i){(0,w2.default)(t,i.y7t()),(0,v2.default)(t,t)}useDeviceOrientation(){return!!this.Oti||this.Fti}Yti(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().catch(qt)}wti(t,i){Ea(t),this.Co(new Dr(new $i(i,t)))}Gti(){this.Co(new Sc)}get rti(){return this.uti?this.Oti:this.zti}set rti(t){this.uti?t?this.fti():this._ti():this.jti(t)}get hti(){return this.Fti}set hti(t){this.rti||(this.Fti=t,t&&fi.Ga&&this.Yti())}get oti(){let t=this.W7t;return{yaw:I2(t.k7t*l2),pitch:t.C7t*l2,roll:_.round(t.x7t*l2)}}set oti(t){let i=I2(t&&+t.yaw||0),e=I2(t&&+t.pitch||0),s=I2(t&&+t.roll||0);this.W7t=new f2(i*Zh,e*Zh,s*Zh)}get W7t(){if(this.ult===ei.Rs)return this.Vti.L7t();let t=this.Wti,i=this.Hti,e=new f2;return t&&e.ST(t),i&&e.ST(i),e}set W7t(t){const i=this.W7t.O7t();if(this.ult===ei.Rs)this.Vti=t.O7t();else{let i=this.Eti;i&&i.resetPose&&i.resetPose(),this.gi&&(this.gi.W7t=t),this.Vti=this.W7t.O7t()}S2(i,this.Vti)||this.Gti()}get Wti(){let t=this.bti&&this.bti.orientation;if(t)return(new d2).p7t(t).L7t()}get Hti(){return this.gi&&this.gi.W7t}get ati(){return 180*this.qti}set ati(t){t&&t>=0&&t<=180&&(this.qti=+t/180)}get uti(){return!(!this.Eti||!this.Eti.capabilities.canPresent)}get ult(){var t;return this.kti&&((null==(t=this.Iti())?void 0:t.nativeVR)||this.Cti)?this.Oti?ei.Oa:ei.cti:ei.Rs}gn(){this.ES.qd(),this.Vo(),this.Dti(),this._ti(),this.t.fn(l.lo,this.do),s.removeEventListener("vrdisplayconnect",this.dti,!1),s.removeEventListener("vrdisplaydisconnect",this.dti,!1),s.removeEventListener("vrdisplayactivate",this.fti,!1),s.removeEventListener("vrdisplaydeactivate",this._ti,!1),s.removeEventListener("vrdisplaypresentchange",this.gti,!1),this.t=void 0}constructor(t){super(),this.ES=new na,this.Vti=new d2,this.qti=.4,this.zti=!1,this.Fti=!1,this.kti=!1,this.wd=void 0,this.Mti=Ma.NONE,this.gi=void 0,this.Xti=[],this.Eti=void 0,this.Oti=!1,this.pti=!1,this.vti=void 0,this.Cti=void 0,this.t7t=null,this.Tti=0,this.lti=void 0,this.bti=void 0,this.Zti=(0,Kh.default)(),this.Kti=(0,Kh.default)(),this.Bti=0,this.Rti=0,this.Jti=!0,this.$ti=0,this.tii=()=>{this.t.fn(he.Rw,this.tii);let t=this.Iti();t&&!t.nativeVR&&this.mti()},this.do=()=>{this.Dti();let t=this.Iti();this.wd=t,t&&t.panoramaMode!==Dc.NONE?(t.panoramaMode===Dc.PM180&&cs("PanoramaMode is set to '180' while the VR API only supports '360', consider using the WebXR API if you need to play 180 degree content."),this.Lti(!0),t.nativeVR?this.Co(new nl):(this.Mti=t.stereoMode,this.t.yn(he.Rw,this.tii))):this.Lti(!1)},this.fti=async()=>{if(this.ult!==ei.Rs&&this.uti){this.Jti=!1,this.eii();try{await this.Eti.requestPresent([{source:this.vti}])}catch(t){this.wti("Failed to present VR content.",Ui.VR_PRESENTATION_ERROR)}finally{this.gti()}}},this._ti=async()=>{if(this.Eti)try{await this.Eti.exitPresent()}catch(t){}finally{this.gti()}},this.dti=async()=>{try{this.Xti=await Nr(Dl.getVRDisplays(),this.ES.Wd),this.Eti&&gd(this.Xti,this.Eti)||this.Sti(this.Xti[0])}catch(t){this.Xti=[],this.Sti(void 0)}},this.gti=()=>{this.xti(!!this.Eti&&this.Eti.isPresenting),this.NY(),this.Jti=!this.Oti,this.Jti?Ur(this.Uti):this.eii()},this.NY=()=>{if(!this.vti)return;const t=this.t.we.offsetWidth,e=this.t.we.offsetHeight;let s=this.Eti;if(s&&this.rti){let t=s.getEyeParameters("left"),i=s.getEyeParameters("right");t&&i&&(this.Bti=2*_.max(t.renderWidth,i.renderWidth),this.Rti=_.max(t.renderHeight,i.renderHeight))}else{let s=i.Ys.A2;this.Bti=t*s,this.Rti=e*s}},this.Uti=()=>{if(!fi.Ga||!this.vti||!this.Jti)return;this.eii();let t=this.vti,i=t.offsetWidth+1,e=t.offsetHeight;t.style.width=i+"px",t.style.height=e+"px",this.$ti=Ur(this.eii)},this.eii=()=>{if(!this.$ti)return;let t=this.vti;t.style.width="100%",t.style.height="100%",nn(this.$ti),this.$ti=0},this.Nti=()=>{let t=this.Eti,i=this.qti,e=this.vti,s=this.Cti,n=this.t7t,r=this.lti,h=this.Zti,o=this.Kti;this.Pti(),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),t&&this.useDeviceOrientation()&&(t.getFrameData(r),this.bti=r.pose);let a=this.W7t.O7t();this.Qti(o,a),t&&t.isPresenting?(this.Tti=t.requestAnimationFrame(this.Nti),n.viewport(0,0,.5*e.width,e.height),s.pr(r.leftProjectionMatrix,o,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.pr(r.rightProjectionMatrix,o,"right"),t.submitFrame()):(this.Tti=Ur(this.Nti),(0,p2.default)(h,_.PI*i,e.width/e.height,.1,1024),this.rti?(n.viewport(0,0,.5*e.width,e.height),s.pr(h,o,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.pr(h,o,"right")):(n.viewport(0,0,e.width,e.height),s.pr(h,o))),S2(a,this.Vti)||(this.Vti.Vlt(a),this.Gti())},this.t=t,this.W7t=D2,this.va=N2(this),this.ko()}};Rt((function(t){return class extends t{fa(){if(null!==this.sii){const t=this.sii.va;return N(super.fa(),{vr:t})}return super.fa()}gn(){var t;null==(t=this.sii)||t.gn(),super.gn()}constructor(t,i){super(t,i),this.sii=null,i.vr.useWebXR||(this.sii=new E2(this))}}}),sa.Za);var b2=class{UI(){this.Le||(this.Le=!0,this.Us.addEventListener("mousedown",this.z7t),this.Us.addEventListener("touchstart",this.P7t),s.addEventListener("mousemove",this.er),s.addEventListener("touchmove",this.U7t),s.addEventListener("mouseup",this.B7t),s.addEventListener("touchend",this.Q7t),this.R7t(s))}QI(){this.Le&&(this.Le=!1,this.Us.removeEventListener("mousedown",this.z7t),this.Us.removeEventListener("touchstart",this.P7t),s.removeEventListener("mousemove",this.er),s.removeEventListener("touchmove",this.U7t),s.removeEventListener("mouseup",this.B7t),s.removeEventListener("touchend",this.Q7t),this.V7t(s))}R7t(t){if(LM(t));else if(sn(t))try{t.parent.addEventListener("mouseup",this.B7t),this.R7t(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.F7t)}}V7t(t){if(t.document.documentElement.removeEventListener("mouseleave",this.F7t),sn(t))try{t.parent.removeEventListener("mouseup",this.B7t),this.V7t(t.parent)}catch(t){}}iti(){this.nii=!1}$7t(){const t=this.hii.rii;t.yaw+=2*_.PI*this.oii.x*.4/this.Us.clientWidth,t.pitch+=2*_.PI*this.oii.y*.5/this.Us.clientHeight,t.pitch=ks(t.pitch,-_.PI/2,_.PI/2),this.hii.rii=t}eti(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.Us}gn(){this.QI()}constructor(t,i){this.Le=!1,this.aii=new fl,this.uii=new fl,this.oii=new fl,this.nii=!1,this.z7t=t=>{this.aii.Kj(t.clientX,t.clientY),this.nii=!0,t.preventDefault(),t.stopPropagation()},this.P7t=t=>{t.touches&&1===t.touches.length&&(this.aii.Kj(t.touches[0].pageX,t.touches[0].pageY),this.nii=!0,t.preventDefault())},this.er=t=>{if(this.nii||this.eti()){if(this.eti()){const i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.uii.Kj(this.aii.x-i,this.aii.y-e)}else this.uii.Kj(t.clientX,t.clientY);this.oii.M7t(this.uii,this.aii),this.aii.Vlt(this.uii),this.$7t()}},this.U7t=t=>{this.nii&&(this.uii.Kj(t.touches[0].pageX,t.touches[0].pageY),this.oii.M7t(this.uii,this.aii),this.aii.Vlt(this.uii),this.$7t())},this.B7t=()=>{this.iti()},this.Q7t=()=>{this.iti()},this.F7t=()=>{this.iti()},this.hii=t,this.Us=i}},L2=class{cii(t){t.clearColor(...this.VH),t.clear(t.COLOR_BUFFER_BIT)}lii(t,i){t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.DEPTH_BUFFER_BIT),this.dii.forEach((e=>{e.lii(t,i)}))}fii(t){this.dii.push(t)}_ii(){this.dii=[]}constructor(){this.VH=[0,0,0,1],this.dii=[]}},k2=class{gii(t,i,e){const s=t.createBuffer();return null===s?(cs("Failed to create buffer."),null):(t.bindBuffer(i,s),t.bufferData(i,e,t.STATIC_DRAW),s)}constructor(t,i,e,s,n){this.wii=t,this.iL=this.gii(t,i,e),this.Aii=s,this.X0=n,this.vii=!1,this.mii=0,this.Zu=0}},C2=class extends k2{UI(t){if(null===this.iL)return void cs("Attempted to enable buffer that failed to initialize.");if(null===t)return void cs("Attempted to enable attribute without location.");const i=this.wii;i.bindBuffer(i.ARRAY_BUFFER,this.iL),i.vertexAttribPointer(t,this.Aii,this.X0,this.vii,this.mii,this.Zu),i.enableVertexAttribArray(t)}QI(t){t&&this.wii.disableVertexAttribArray(t)}constructor(t,i,e){super(t,t.ARRAY_BUFFER,i,e,t.FLOAT)}};var x2,zc,O2,j2=class extends k2{pii(){const t=this.wii;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.iL),t.drawElements(t.TRIANGLES,this.yii,this.X0,this.Zu)}constructor(t,i){super(t,t.ELEMENT_ARRAY_BUFFER,i,1,t.UNSIGNED_SHORT),this.yii=i.length}};!function(t){t.VertexPos="aVertexPosition",t.VertexUV="aVertexUV",t.VertexColor="aVertexColor"}(x2||(x2={})),function(t){t.ProjectionMat="uProjectionMatrix",t.ModelViewMat="uModelViewMatrix",t.Texture="uTexture"}(zc||(zc={})),function(t){t.Normal="vNormal",t.Color="vColor",t.UV="vUV"}(O2||(O2={}));var z2=class{Mii(t,i,e){const s=this.Tii(t,t.VERTEX_SHADER,i),n=this.Tii(t,t.FRAGMENT_SHADER,e);if(null===s||null===n)return cs("Failed to create vertex or fragment shader."),null;const r=t.createProgram();return null===r?(cs("Failed to create shader program"),null):(t.attachShader(r,s),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(cs("Failed to initialize shader program"),null))}Tii(t,i,e){const s=t.createShader(i);if(null===s)return cs("failed to create shader."),null;if(t.shaderSource(s,e),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){const i=t.getShaderInfoLog(s);return cs("Failed to compile shader with error: "+i),t.deleteShader(s),null}return s}Nii(){return this.Dii}Iii(t){const i=this.Dii;if(null===i)return cs("Attempted to retrieve attribute location when shader program was not initialized"),null;const e=this.wii.getAttribLocation(i,t);return-1===e?null:e}Sii(t){const i=this.Dii;if(null===i)return cs("Attempted to retrieve uniform location when shader program was not initialized"),null;const e=this.wii.getUniformLocation(i,t);return null===e&&Ea("Attempted to retrieve nonexistent uniform: "+t),e}constructor(t,i,e){this.wii=t,this.Dii=this.Mii(this.wii,i,e)}},P2=class{Eii(){const t=this.bii.length,i=_.max(...this.Lii);return i>=t?(Ea("Created geometry where largest index ("+i+") is larger than/equal to attribute array size ("+t+")"),!1):(i<t-1&&cs("Created geometry where largest index ("+i+") is smaller than attribute buffer - 1 ("+(t-1)+") resulting in unused vertices"),!this.kii||this.kii.length===t||(Ea("Created geometry where position ("+t+") and uv ("+this.kii.length+") buffers have different length."),!1))}Cii(t,i){if(!this.Eii())throw new g("Failed to validate buffers for WebGLGeometry.");const e=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y,t.z)})),new C2(t,new Float32Array(e),3)}(t,this.bii),s=function(t,i){return new j2(t,new Uint16Array(i))}(t,this.Lii),n=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y)})),new C2(t,new Float32Array(e),2)}(t,this.kii);return new B2(e,s,n,i)}constructor(t,i,e){this.bii=t,this.Lii=i,this.kii=e}},B2=class{xii(){this.bii.UI(this.Oii),null!==this.jii&&this.kii.UI(this.jii)}zii(){this.bii.QI(this.Oii),null!==this.jii&&this.kii.QI(this.jii)}lii(){this.Lii.pii()}constructor(t,i,e,s){this.bii=t;const n=s.Iii(x2.VertexPos);if(null===n)throw new g("Failed to get position attribute location.");this.Oii=n,this.kii=e,this.jii=s.Iii(x2.VertexUV),this.Lii=i}},R2=class extends P2{constructor(t=1,i=32,e=16,s=0,n=2*_.PI,r=0,h=_.PI){let o=0;const a=_.min(r+h,_.PI),u=[],c=[],l=[],d=[];for(let u=0;u<=e;u++){const f=[],g=u/e;let w=0;0===u&&0===r?w=.5/i:u===e&&a===_.PI&&(w=-.5/i);for(let e=0;e<=i;e++){const a=e/i,u=-t*_.cos(s+a*n)*_.sin(r+g*h),d=t*_.cos(r+g*h),A=t*_.sin(s+a*n)*_.sin(r+g*h);c.push(new to(u,d,A)),l.push(new fl(a+w,1-g)),f.push(o++)}d.push(f)}for(let t=0;t<e;t++)for(let s=0;s<i;s++){const i=d[t][s+1],n=d[t][s],h=d[t+1][s],o=d[t+1][s+1];(0!==t||r>0)&&u.push(i,n,o),(t!==e-1||a<_.PI)&&u.push(n,h,o)}super(c,u,l)}},U2=[0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,255],Q2=class{Pii(){const t=this.wii;t.activeTexture(this.Bii),t.bindTexture(t.TEXTURE_2D,this.Rii)}ur(){const t=this.wii;t.activeTexture(this.Bii),t.bindTexture(t.TEXTURE_2D,this.Rii),t.uniform1i(this.Uii,0)}Qii(t){const i=this.wii;i.bindTexture(i.TEXTURE_2D,this.Rii),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,this.GK,this.Fii,this.Yii,this.Gii,t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}Vii(t){const i=this.wii;i.bindTexture(i.TEXTURE_2D,this.Rii),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),t.A7.hY(i,i.TEXTURE_2D,this.GK,this.Fii,this.Yii,this.Gii),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}constructor(t,i){if(this.wii=t,this.Rii=t.createTexture(),null===this.Rii)throw new g("Failed to create texture");const e=i.Sii(zc.Texture);if(null===e)throw new g("Failed to get texture location.");this.Uii=e,t.bindTexture(t.TEXTURE_2D,this.Rii),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.Bii=t.TEXTURE0,this.GK=0,this.Fii=t.RGBA,this.Yii=t.RGBA,this.Gii=t.UNSIGNED_BYTE,t.texImage2D(t.TEXTURE_2D,this.GK,this.Fii,2,2,0,this.Yii,this.Gii,new j(U2))}},F2="\n    attribute vec4 "+x2.VertexPos+";\n    attribute vec2 "+x2.VertexUV+";\n\n    uniform mat4 "+zc.ModelViewMat+";\n    uniform mat4 "+zc.ProjectionMat+";\n    \n    varying mediump vec2 "+O2.UV+";\n    \n    void main() {\n      gl_Position = "+zc.ProjectionMat+" * "+zc.ModelViewMat+" * "+x2.VertexPos+";\n      "+O2.UV+" = "+x2.VertexUV+";\n    }\n",Y2="\n    varying mediump vec2 "+O2.UV+";\n    \n    uniform sampler2D "+zc.Texture+";\n\n    void main() {\n      gl_FragColor = texture2D("+zc.Texture+", "+O2.UV+");\n    }\n",G2=class{Nii(){return this.Dii}UI(){this.wii.useProgram(this.Dii.Nii()),this.Rii.ur()}Wii(t){this.Rii.Qii(t)}Hii(t){this.Rii.Vii(t)}constructor(t){this.wii=t,this.Dii=new z2(t,F2,Y2),this.Rii=new Q2(t,this.Dii)}},V2=class{lii(t,i){if(this.qii(i.Xii)){this.Zii.xii(),this.Kii.UI();const e=this.Jii,s=i.$ii,n=(0,m2.default)(s,s,e);t.uniformMatrix4fv(this.tei,!1,n);const r=i.iei;t.uniformMatrix4fv(this.eei,!1,r),this.Zii.lii(),this.Zii.zii()}}qii(t){return"none"===this.Xii||"right"!==t&&"left"===this.Xii||"right"===t&&"right"===this.Xii}get Jii(){const t=(0,Kh.default)(),i=this.po;return(0,M2.default)(t,t,i.y7t()),(0,y2.default)(t,t,this.sei.x,new Float32Array([1,0,0])),(0,y2.default)(t,t,this.sei.y,new Float32Array([0,1,0])),(0,y2.default)(t,t,this.sei.z,new Float32Array([0,0,1])),t}constructor(t,i,e,s){this.po=new to,this.sei=new to,this.Xii="none",this.Kii=e;const n=e.Nii();this.Zii=i.Cii(t,n),s&&(this.Xii=s);const r=n.Sii(zc.ModelViewMat);if(null===r)throw new g("Failed to get model view matrix location.");this.tei=r;const h=n.Sii(zc.ProjectionMat);if(null===h)throw new g("Failed to get projection matrix location.");this.eei=h}},W2=class{nei(){const t=(0,Kh.default)();return(0,p2.default)(t,this.rei,this.hei,this.oei,this.aei)}uei(){this.cei=this.nei()}get iei(){return new Float32Array(this.cei)}set iei(t){this.cei=t}lei(){const t=(0,Kh.default)(),i=(0,A2.default)((0,Kh.default)(),this.dei.y7t()),e=(0,w2.default)((0,Kh.default)(),this.fei.y7t());return(0,m2.default)(t,i,e),(0,v2.default)(t,t),t}_ei(){this.gei=this.lei()}get $ii(){return new Float32Array(this.gei)}wei(){this._ei(),this.uei()}tr(){this.dei=new to,this.sei=new d2,this.wei()}Aei(t){const i=this.fei.L7t();i.ST(t),this.sei=i.O7t()}vei(t){this.sei=t.O7t()}get mei(){return this.rei}set mei(t){this.rei=t,this.uei()}get pei(){return this.hei}set pei(t){this.hei=t,this.uei()}get po(){return(new to).Vlt(this.dei)}set po(t){this.dei=t,this._ei()}get sei(){return(new d2).Vlt(this.fei)}set sei(t){this.fei=t,this._ei()}constructor(t){this.rei=72*_.PI/180,this.hei=1.77,this.oei=.1,this.aei=100,this.Xii="none",this.dei=new to,this.fei=new d2,this.cei=this.nei(),this.gei=this.lei(),t&&(this.Xii=t)}},H2=1e-4,q2=class extends xd{ko(){this.yei(),this.wii?Dl.xr?(Dl.xr.addEventListener("devicechange",this.Mei),this.Tei().then((()=>{this.Nei?(this.Dei(),this.Iei(),this.Sei()):this.wti("XR: Inline session not available. Panorama functionality will not work.",Ui.VR_PRESENTATION_ERROR)}))):this.wti("Your browser does not support WebXR",Ui.VR_PLATFORM_UNSUPPORTED):this.wti("Your browser does not support webGL",Ui.VR_PLATFORM_UNSUPPORTED)}Sei(){this.Qo.ya.yn(ri.ra,this.mn),this.Qo.yn(ve.pn,this.mn),this.Qo.yn(l.lo,this.do),this.Qo.yn(l.pw,this.AU)}yei(){this.Eei=h.createElement("canvas"),this.Eei.className="theoplayer-vr",this.Eei.style.zIndex="2",this.Eei.style.background="black",this.Eei.style.display="none",this.Qo.we.appendChild(this.Eei),ia(this.Eei);let t=this.Eei.getContext("webgl2");t||(t=this.Eei.getContext("webgl")),t&&(this.wii=t,this.bei=new b2(this,this.Eei))}async Tei(){Dl.xr?await Promise.all([Dl.xr.isSessionSupported("inline").then((t=>{this.Nei=t})).catch((t=>{this.Nei=!1,this.wti("exception when calling xr.isSessionSupported for inline session: "+t,Ui.VR_PRESENTATION_ERROR)})),Dl.xr.isSessionSupported("immersive-vr").then((t=>{this.Lei=t})).catch((t=>{this.Lei=!1,this.wti("exception when calling xr.isSessionSupported for immersive-vr session: "+t,Ui.VR_PRESENTATION_ERROR)}))]):(this.Nei=!1,this.Lei=!1)}Dei(){const t=this.Iti();this.lx=t,this.kti=Boolean(t),this.kti&&(this.kei=(null==t?void 0:t.stereoMode)||Ma.NONE,this.Cei=(null==t?void 0:t.panoramaMode)||Dc.NONE,this.xei&&(this.Oei(this.Cei,this.kei),this.mti()))}Oei(t,i){if(!this.wii||t===Dc.NONE)return;const e=this.wii;let s,n;this.jei._ii(),t===Dc.PM360?(s=2*_.PI,n=-_.PI/2):(s=_.PI,n=-_.PI);const r=new R2(16,60,40,0,s),h=[],o=[];for(let t=0;t<r.kii.length;t++){const e=r.kii[t];switch(i){case Ma.NONE:h.push(e),o.push(e);break;case Ma.VERTICAL:h.push(new fl(e.x,.5*e.y)),o.push(new fl(e.x,.5*e.y+.5));break;case Ma.HORIZONTAL:h.push(new fl(.5*e.x,e.y)),o.push(new fl(.5*e.x+.5,e.y))}}r.bii.forEach((t=>{t.x*=-1}));const a=new P2(r.bii,r.Lii,h),u=new P2(r.bii,r.Lii,o);this.zei=new G2(e);const c=new V2(e,a,this.zei,"left");c.sei.y=n,this.jei.fii(c);const l=new V2(e,u,this.zei,"right");l.sei.y=n,this.jei.fii(l)}mti(){this.Eei.style.display="block",this.Nei&&this.Qo.yn(l.jh,this.Pei)}Dti(){this.Bei(),this.Qo.fn(l.jh,this.Pei),this.Eei.style.display="none"}Rei(){this.Uei(),this.Qei()}async Fei(){if(this.Yei||!this.Nei)return;const t={optionalFeatures:["local"]};try{const i=await Nr(Dl.xr.requestSession("inline",t),this.ES.Wd);let e;e=fi.Qs?fi.wE?"viewer":"local":"viewer";const s=await i.requestReferenceSpace(e);i.addEventListener("end",this.Uei),this.Gei=s,this.Yei=i,this.bei.UI(),this.Vei(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,this.wii),inlineVerticalFieldOfView:this.rei*Zh})}catch(t){this.Uei(),this.wti(t,Ui.VR_PRESENTATION_ERROR)}}Uei(){this.Yei&&(this.Bei(),this.bei.QI(),this.Yei.removeEventListener("end",this.Qei),this.Yei.end(),this.Yei=null,this.Iei())}async Wei(){if(!this.Hei&&this.Lei){this.Bei();try{const t=await Nr(Dl.xr.requestSession("immersive-vr"),this.ES.Wd),i=await t.requestReferenceSpace("local");t.addEventListener("end",this.Qei),this.qei=i,this.Hei=t,await this.Xei(),this.Vei()}catch(t){this.Qei(),this.wti(t,Ui.VR_PRESENTATION_ERROR)}}}async Xei(){const t=this.wii,i=this.Hei;this.Eei&&t&&i&&!this.Zei&&(this.Eei.addEventListener("webglcontextlost",(t=>{t.preventDefault()})),this.Eei.addEventListener("webglcontextrestored",(()=>{this.Oei(this.Cei,this.kei)})),this.Zei=!0,await t.makeXRCompatible(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,t)}))}Iei(){if(!this.Hei&&this.wii){const t=this.wii,e=this.Eei.clientWidth,s=this.Eei.clientHeight,n=i.Ys.A2;this.Eei.width=e*n,this.Eei.height=s*n,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}}Vei(){null===this.Kei&&(this.Jei(),this.$ei?this.Kei=this.$ei.requestAnimationFrame(this.tsi):(this.isi(),cs("XR: Attempted to start animation loop without inline or immersive session.")))}Bei(){null!==this.Kei&&(this.isi(),this.$ei?this.$ei.cancelAnimationFrame(this.Kei):cs("XR: Attempted to stop animation loop by cancelAnimationFrame even though there is no session running."),this.Kei=null)}Jei(){if(null!==this.esi)return;const t=this.Qo.A_();if(void 0===t||!(t instanceof HTMLVideoElement))return void cs("No video source.");if("function"!=typeof t.requestVideoFrameCallback)return;const i=()=>{this.zei.Hii(this.Qo),this.esi=t.requestVideoFrameCallback(i)};this.ssi=t,this.esi=t.requestVideoFrameCallback(i)}isi(){var t,i;null!==this.esi&&(null==(i=this.ssi)||null==(t=i.cancelVideoFrameCallback)||t.call(i,this.esi),this.ssi=null,this.esi=null)}nsi(){return!!this.rsi||(fi.Ga?this.hsi&&this.osi:this.hsi)}Yti(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().then((t=>{this.osi="granted"===t}))}asi(){return(!this.Ff()||Boolean(this.usi))&&this.lsi()}Ff(){return this.Qo.Ff}lsi(){return this.Qo.Jf>=2}get kti(){return this.dsi}set kti(t){const i=this.ult;this.dsi=t,this.ult!==i&&this.Co(new nl)}get xei(){return this.Cei!==Dc.NONE}get Cei(){return this.fsi}set Cei(t){const i=this.ult;this.fsi=t,this.ult!==i&&this.Co(new nl)}get Lei(){return this._si}set Lei(t){const i=this.ult;this._si=t,this.ult!==i&&this.Co(new nl)}get uti(){return this.Lei}get $ei(){return this.Hei||this.Yei}get Hei(){return this.rsi}set Hei(t){const i=this.ult;this.rsi=t,this.ult!==i&&this.Co(new nl)}get gsi(){return this.qei||this.Gei}get oti(){const t=this.wsi.L7t();return{yaw:t.k7t*l2,pitch:t.C7t*l2,roll:t.x7t*l2}}set oti(t){const i=X2(t&&t.pitch||0)*Zh,e=X2(t&&t.roll||0)*Zh,s=X2(t&&t.yaw||0)*Zh,n=new f2(s,i,e);this.wsi=n.O7t()}get rii(){const t=this.Asi.L7t();return{yaw:t.k7t,pitch:t.C7t,roll:t.x7t}}set rii(t){const i=Z2(t&&t.pitch||0),e=Z2(t&&t.roll||0),s=Z2(t&&t.yaw||0),n=new f2(s,i,e);this.Asi=n.O7t()}get ult(){return this.kti?this.Hei?ei.Oa:ei.cti:ei.Rs}get rti(){return null!==this.Hei}set rti(t){const i=this.rti;t&&this.Lei?this.Wei():this.Qei(),this.rti!==i&&this.Co(new $u)}get hti(){return this.hsi}set hti(t){null===this.rsi&&(this.hsi=t,t&&fi.Ga&&this.Yti())}get ati(){return this.rei}set ati(t){t&&t>=0&&t<=180&&(this.rei=t,null!==this.Yei&&this.Yei.updateRenderState({inlineVerticalFieldOfView:this.rei*Zh}))}wti(t,i){Ea(t),this.Co(new Dr(new $i(i,t)))}Iti(){const t=this.Qo.Wa();return t&&t.vr}gn(){this.ES.qd(),this.Rei(),this.Vo(),this.Qo=void 0,this.wii=void 0}constructor(t){super(),this.ES=new na,this.Nei=!1,this._si=!1,this.wsi=new d2,this.vsi=new d2,this.Asi=new d2,this.rei=74,this.hsi=!1,this.lx=void 0,this.kei=Ma.NONE,this.dsi=!1,this.fsi=Dc.NONE,this.jei=new L2,this.Yei=null,this.rsi=null,this.Gei=null,this.qei=null,this.Zei=!1,this.Kei=null,this.ssi=null,this.esi=null,this.usi=0,this.osi=!1,this.Mei=()=>{this.Tei()},this.do=()=>{this.Dti(),this.Rei(),this.Dei()},this.Pei=()=>{this.Fei()},this.Qei=()=>{this.Hei&&(Ru("Ending immersive session"),this.Bei(),this.Hei.removeEventListener("end",this.Qei),this.Hei.end(),this.Hei=null,this.qei=null,this.Zei=!1,this.Yei?this.Vei():this.Fei())},this.mn=()=>{this.Iei()},this.tsi=(t,i)=>{if(!this.wii)return;const e=this.wii,s=this.$ei;if(null===this.esi&&this.asi()&&(this.zei.Hii(this.Qo),this.usi>0&&(this.usi-=1)),null===s||void 0===i)return void cs("Attempted to run webXR animation loop without session or xrFrame.");this.Kei=s.requestAnimationFrame(this.tsi);const n=s.renderState.baseLayer,r=i.getViewerPose(this.gsi);if(void 0===n||void 0===r)return void cs("Attempted to run webXR animation loop without glLayer or viewerPose.");e.bindFramebuffer(e.FRAMEBUFFER,n.framebuffer);let h=new f2,o=0;for(const t of r.views){const i=new W2(t.eye);if(i.iei=t.projectionMatrix,this.nsi()){let e;if(fi.Qs&&fi.wE&&null===this.rsi){if(e=t.transform.inverse.orientation,0===e.x&&0===e.y&&0===e.z&&1===e.w)return}else e=t.transform.orientation;i.sei=new d2(e.x,e.y,e.z,e.w)}this.Yei&&i.Aei(this.Asi.L7t()),h=h.ST(i.sei.L7t()),o+=1;const s=n.getViewport(t);s&&e.viewport(s.x,s.y,s.width,s.height),this.jei.lii(e,i)}const a=new f2(h.k7t/o,h.C7t/o,h.x7t);this.wsi=a.O7t(),function(t,i){const e=t.I7t(i);return 1-e*e<H2}(this.wsi,this.vsi)||(this.vsi.Vlt(this.wsi),this.Co(new Sc))},this.AU=()=>{this.usi=5},this.Qo=t,this.va=N2(this),this.ko()}};function X2(t){return vl(t+180,360)-180}function Z2(t){return vl(t+_.PI,2*_.PI)-_.PI}Rt((function(t){return class extends t{fa(){return null!==this.hii?N(super.fa(),{vr:this.hii.va}):super.fa()}gn(){var t;null==(t=this.hii)||t.gn(),super.gn()}constructor(t,i){super(t,i),this.hii=null,i.vr.useWebXR&&(this.hii=new q2(this))}}}),sa.Za);var K2=class{getEpochTimeMs(){return Ks()}release(){}},J2=class{createTimer(t,i,e){let s=v(t,i);return()=>m(s)}release(){}},$2=class{makeRequest(t,i,e,s,n,r){const h=function(t){switch(t.toLowerCase()){case"get":return Ys.GET;case"post":return Ys.POST;case"put":return Ys.PUT;case"delete":return Ys.DELETE;case"head":return Ys.HEAD;case"options":return Ys.OPTIONS;default:throw new g("Request method unknown.")}}(t);if(this.msi){if(h===Ys.GET)(new Image).src=i+"?"+e;else{const t=e||new ArrayBuffer(0),n=s||void 0;this.NS.ZF({zu:i,cS:t,qz:n})}return()=>{}}const o=new na,a=s?{"Content-Type":s}:void 0,u=new zu({zu:i,cS:e,AS:!1,fS:Qv.Ru,CI:n,dS:h,Wd:o.Wd,lS:a});return this.psi(u,r),()=>o.qd()}async psi(t,i){if(i)try{const e=await this.NS.SI(t);if(e.kI>=200&&e.kI<300){i(!0,await e.DS())}else i(!1,"HTTP"+e.kI)}catch(t){i(!1,String(t))}}release(){s.removeEventListener("beforeunload",this.ysi)}constructor(t){this.msi=!1,this.ysi=()=>{this.msi=!0},this.NS=t,s.addEventListener("beforeunload",this.ysi)}};var t3=class{saveData(t,i,e,s){try{return localStorage.setItem(t+"/"+i,e),s(!0,null)}catch(t){return s(!1,t.toString())}}loadData(t,i,e){try{return e(!0,localStorage.getItem(t+"/"+i))}catch(t){return e(!1,t.toString())}}release(){}},i3=()=>null,e3=class{getDeviceBrand(){return this.Msi?this.Msi.brand:null}getDeviceCategory(){return fi.ub||fi._b?this.Tsi.Client.DeviceCategory.ANDROID_DEVICE:fi.vb||fi.pb?this.Tsi.Client.DeviceCategory.APPLE_DEVICE:fi.Mb?this.Tsi.Client.DeviceCategory.CHROMECAST:this.Tsi.Client.DeviceCategory.WEB}getDeviceManufacturer(){return this.Msi?this.Msi.manufacturer:null}getDeviceModel(){return this.Msi?this.Msi.model:null}getDeviceVersion(){return this.Msi?this.Msi.version:null}getDeviceType(){return null}getFrameworkName(){return fi.ub?"THEOplayer AndroidTV SDK":fi._b?"THEOplayer Android SDK":fi.vb?"THEOplayer IOS SDK":fi.pb?"THEOplayer tvOS SDK":fi.Mb?"THEOplayer Chromecast SDK":"THEOplayer Web SDK"}release(){}constructor(t,i){this.Tsi=t,this.Msi=i,this.getBrowserName=i3,this.getBrowserVersion=i3,this.getFrameworkVersion=i3,this.getOperatingSystemName=i3,this.getOperatingSystemVersion=i3}},s3=class{consoleLog(t,i){switch(i){case Conviva.SystemSettings.LogLevel.ERROR:return Ea(t);case Conviva.SystemSettings.LogLevel.WARNING:return cs(t);default:return Ru(t)}}release(){}},n3=self.theoplayerDeviceMetadata;var r3,h3=class{getPHT(){return-1}getBufferLength(){const t=Ai.xn(this.Qo.Af()),i=this.Qo.Tf(),e=t.fB(i);if(e<0)return 0;return Ft(t.jn(e)-i)}getSignalStrength(){return 1e3}getRenderedFrameRate(){return-1}constructor(t){this.Qo=t}},o3="conviva";function a3(t){return t&&t.integration===o3}function u3(t){if(t)for(let i of t)if(a3(i))return i}function c3(t,i){if(!i)return t;if(!t)return i;return Gd(i,Oi(t))}var l3=[l.Zg,l.jh,l.Sh,he.Rw,he.Bw,l.Jg,ut.ha,he.H_],d3=class{get va(){return this.Xa||(this.Xa=function(t){return{get client(){return t.Nsi},get contentSessionKey(){return t.Dsi},createSession:()=>t.DC(),cleanupSession:()=>t.Isi()}}(this)),this.Xa}get Nsi(){return this.Ssi}get Dsi(){return this.Esi}bsi(){return this.t.Ff?this.Lsi.PlayerStateManager.PlayerState.PAUSED:this.ksi||this.t.Jf<ae.cT?this.Lsi.PlayerStateManager.PlayerState.BUFFERING:this.Lsi.PlayerStateManager.PlayerState.PLAYING}t0(t){let i=this.Csi;i&&i.getDuration()!==t&&i.setDuration(t)}xsi(t){let i=this.Csi;i&&i.getPlayerState()!==t&&i.setPlayerState(t)}Osi(){this.ksi="none"===this.t.Xf||this.t.Jf<ae.uT,this.DWt(),this.t.e_&&this.wU(),this.jsi&&this.zsi()}CHt(){this.Psi&&!this.Psi.manualSessionControl&&(this.DC(),this.t.kU.Uf||this.Bsi())}GHt(){this.Csi&&this.xsi(this.Lsi.PlayerStateManager.PlayerState.STOPPED),this.Psi&&!this.Psi.manualSessionControl&&this.Isi()}DC(){if(this.Rsi&&void 0===this.Esi){let t=this.Ssi.getPlayerStateManager();this.Csi=t,t.setPlayerVersion&&t.setPlayerVersion("7.12.0"),this.Esi=this.Ssi.createSession(this.Rsi),this.Osi(),this.Ssi.attachPlayer(this.Esi,this.Csi);const i=new h3(this.t);t.setClientMeasureInterface(i)}}Isi(){this.EU=!1,this.ksi=!1,this.Csi&&(this.Ssi.releasePlayerStateManager(this.Csi),this.Csi=void 0),void 0!==this.Esi&&(this.Ssi.cleanupSession(this.Esi),this.Esi=void 0)}Usi(){this.t.yn(l.Xg,this.Qsi),this.t.yn(l.yw,this.wU),this.t.yn(l.pw,this.AU),this.t.yn(l.Jg,this.Fsi),this.t.yn(ut.ha,this.L4),this.t.yn(l.Mw,this.Ysi),this.t.yn([l.cw,he.Bw],this.Gsi),this.t.yn([l.Zg,he.Rw],this.Vsi),this.t.yn(l3,this.DWt),this.t.Oc&&(this.t.Oc.yn("ttt",this.Wsi),this.t.Oc.yn("J7",this.Hsi)),s.addEventListener("beforeunload",this.Fsi),this.qsi()}Xsi(){this.t.fn(l.Xg,this.Qsi),this.t.fn(l.yw,this.wU),this.t.fn(l.pw,this.AU),this.t.fn(l.Jg,this.Fsi),this.t.fn(ut.ha,this.L4),this.t.fn(l.Mw,this.Ysi),this.t.fn([l.cw,he.Bw],this.Gsi),this.t.fn([l.Zg,he.Rw],this.Vsi),this.t.fn(l3,this.DWt),this.t.Oc&&(this.t.Oc.fn("ttt",this.Wsi),this.t.Oc.fn("J7",this.Hsi)),this.t.rt.fn(yt.L_,this.qsi),this.jsi&&(this.jsi.fn(qo.J_,this.zsi),this.jsi=void 0),s.removeEventListener("beforeunload",this.Fsi)}gn(){this.Xsi(),this.GHt(),this.Isi()}constructor(t,i,e,s){this.t=t,this.Lsi=i,this.Ssi=e,this.Zsi=s,this.EU=!1,this.ksi=!1,this.Rsi=void 0,this.Psi=void 0,this.Csi=void 0,this.Esi=void 0,this.jsi=void 0,this.Wsi=t=>{void 0!==this.Dsi&&(this.Ssi.adStart(this.Dsi,function(t){const i=t.Xl.Q7().integration;return"csai"===i||"theo"===i||"google-ima"===i||"freewheel"===i?Conviva.Client.AdStream.SEPARATE:Conviva.Client.AdStream.CONTENT}(t),this.Lsi.Client.AdPlayer.CONTENT,function(t,i){const e=t.Xl.Q7().timeOffset;return 0===e?Conviva.Client.AdPosition.PREROLL:-1===e||ku(e,i,.001)?Conviva.Client.AdPosition.POSTROLL:Conviva.Client.AdPosition.MIDROLL}(t,this.t.Td())),this.Ssi.detachPlayer(this.Dsi))},this.Hsi=()=>{void 0!==this.Dsi&&void 0!==this.Csi&&(this.Ssi.attachPlayer(this.Dsi,this.Csi),this.Ssi.adEnd(this.Dsi))},this.Gsi=()=>{this.ksi=!0},this.Vsi=()=>{this.ksi=!1},this.Qsi=()=>{let t=this.t.Td();S(t)||t===1/0||this.t0(t)},this.Fsi=()=>{this.GHt()},this.L4=()=>{let t=this.t.Ef();t&&this.Csi&&this.Csi.sendError(t.code+": "+t.message,this.Lsi.Client.ErrorSeverity.FATAL),this.GHt()},this.Ksi=()=>{!this.t.kU.Uf&&this.Csi&&this.Bsi()},this.Bsi=()=>{var t;null==(t=this.Csi)||t.sendError("A Video Playback Failure has occurred: Waiting for the manifest to come back online",this.Lsi.Client.ErrorSeverity.FATAL)},this.Ysi=()=>{var t;null==(t=this.Csi)||t.sendError("A Video Playback Failure has occurred: Segment not found",this.Lsi.Client.ErrorSeverity.FATAL)},this.AU=()=>{var t;this.EU&&(this.EU=!1,(null==(t=this.Csi)?void 0:t.setPlayerSeekEnd)&&this.Csi.setPlayerSeekEnd())},this.wU=()=>{var t;this.EU||(this.EU=!0,(null==(t=this.Csi)?void 0:t.setPlayerSeekStart)&&this.Csi.setPlayerSeekStart(-1))},this.do=()=>{this.GHt(),this.Psi=void 0,this.Rsi=void 0,this.Jsi()},this.Jsi=()=>{if(this.Rsi)return;let t=this.t.Wa();if(!t)return;let i=this.t.bt;if(!i)return;let e=function(t){return u3(t.analytics)}(t),s=c3(e,this.Zsi);if(!s)return;let n=s.contentMetadata;if(n&&this.Lsi){let t=i.src;this.Ssi||(this.Ssi=function(t,i,e){if(!r3){let s=new i.SystemSettings,n=new i.SystemInterface(new K2,new J2,new $2(e),new t3,new e3(i,n3),new s3),r=new i.SystemFactory(n,s),h=new i.ClientSettings(t.customerKey),o=Mh(t.heartbeatInterval);o>0?h.heartbeatInterval=o:void 0===h.heartbeatInterval&&(h.heartbeatInterval=10);let a=gi(t.gatewayUrl);a&&(h.gatewayUrl=a),r3=new i.Client(h,r)}return r3}(s,this.Lsi,this.t._O)),this.Psi=s,this.Rsi=function(t,i,e){let s=new e.ContentMetadata;return s.assetName=t.assetName,s.streamUrl=i,s.streamType=function(t,i){return t?i.ContentMetadata.StreamType.LIVE:!1===t?i.ContentMetadata.StreamType.VOD:i.ContentMetadata.StreamType.UNKNOWN}(t.live,e),s.defaultBitrateKbps=t.defaultBitrateKbps,s.defaultResource=t.defaultResource,s.duration=t.duration,s.encodedFrameRate=t.encodedFrameRate,s.applicationName=t.applicationName||"THEOplayer",s.viewerId=t.viewerId||$e(),s.custom=t.custom,s}(n,t,this.Lsi),this.t.Ff||this.Pei()}},this.Pei=()=>{this.CHt()},this.zsi=()=>{if(!this.jsi||!this.Csi)return;let t=this.jsi.yg;if(t){let i=this.Csi;i.setBitrateKbps(t.wz/1e3),i.setEncodedFrameRate&&t.zct&&i.setEncodedFrameRate(t.zct),i.setVideoResolutionWidth&&t.ji&&i.setVideoResolutionWidth(t.ji),i.setVideoResolutionHeight&&t.Ti&&i.setVideoResolutionHeight(t.Ti)}},this.qsi=()=>{let t=this.t.rt;t&&t.fn(yt.L_,this.qsi),t.U?(this.jsi=t.cg(0),this.jsi.fn(qo.J_,this.zsi),this.jsi.yn(qo.J_,this.zsi)):t.yn(yt.L_,this.qsi)},this.DWt=()=>{this.xsi(this.bsi())},this.t.yn(l.lo,this.do),this.t.yn(l.Hg,this.Jsi),this.t.yn(l.jh,this.Pei),this.Usi(),this.t.kU.yn(l.fw,this.Ksi),this.t.kU.yn(l._w,this.Ksi)}};Rt((function(t){return class extends t{gn(){this.i7&&this.i7.gn(),super.gn()}constructor(t,i){super(t,i);const e=s.Conviva;if(e){const t=function(t){return u3(fw(t).analytics)}(i);this.i7=new d3(this,e,r3,t),this.m7.t7=this.i7}}}}),sa.x7);var f3=class extends Mo{get va(){return this.Xa||(this.Xa=function(t){let i,e={get status(){return t.kI},get tasks(){return t.p2t},get network(){return t.kU.va},createTask:(i,e)=>t.$si(i,e),addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Ro(t,e),e}(this)),this.Xa}get kI(){return this.tni.kI}get p2t(){return this.tni.p2t.va}get kU(){return this.l7}$si(t,i,e){let s,n;if(void 0===e&&(e="persistent"),!t)throw new g("Unexpected - The source description is undefined");if(s=ca(t),n=h1(i),ne(s))throw new g("Invalid source description");return this.tni.g2t(s,n).va}constructor(t,i){super(),this.tni=t,this.l7=i,this.tni.yn("qrt",this.Ds)}};var _3=function(){const t=new Wb(i._O,!1),e=I.Ib,s=new _1(t),n=new s1(e,s),r=new qb(t),h=new A0(e.nst,n,"persistent");return new f3(h,r)}().va;function g3(t,i){if("function"==typeof t.getAll){return w3(void 0===i?t.getAll():t.getAll(i))}return function(t){let i=new Rs,e=[];return t.onsuccess=()=>{let s=t.result;s&&s.value?(e.push(s.value),s.continue()):i.Wb(e),qt()},t.onerror=()=>{i.qb(t.error),qt()},i.Zb}(void 0===i?t.openCursor():t.openCursor(i))}function w3(t){return new Promise(((i,e)=>{t.onsuccess=()=>{i(t.result),qt()},t.onerror=()=>{e(t.error),qt()}}))}var A3=class{qd(){if(this.ro)try{this.Jet.abort(),this.ro=!1}catch(t){}}constructor(t){this.Jet=t,this.ro=!0,this.Zb=new Promise(((t,i)=>{this.Jet.oncomplete=()=>{this.ro=!1,t(),qt()},this.Jet.onerror=()=>{this.ro&&(this.ro=!1,i(this.Jet.error||new g("Transaction error")),qt())},this.Jet.onabort=()=>{this.ro=!1,i(new g("Transaction aborted")),qt()}}))}};async function Rc(t,i,e){const s=new A3(t);try{const[t]=await Promise.all([i(e),s.Zb]);return t}catch(t){if(!s.ro)throw new y0("IDBTransaction committed prematurely",t);throw t}finally{s.qd()}}var v3=class{get l(){return this.Tit.l}Uet(t){return Promise.resolve("persistent"===t)}Qet(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(at(i));return w3(this.ini(Pe.ost).put(t))}async Fet(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(at(i));for(const e of t)await this.Qet(e,i)}async Qb(t){return Boolean(await this.Fb(t))}Fb(t){return w3(this.ini(Pe.hst).get(t))}Yet(t,i){return w3(this.ini(Pe.hst).index(i).get(t))}async xet(t){const i=[];for(let e of t){const t=await this.Fb(e);t&&i.push(t)}return i}Get(){return g3(this.ini(Pe.hst))}Vet(t){return g3(this.ini(Pe.hst),t)}Wet(t,i){return g3(this.ini(Pe.hst).index(i),t)}ET(t){return w3(this.ini(Pe.ost).delete(t))}async Het(t){for(const i of t)await this.ET(i)}qet(){return w3(this.ini(Pe.ost).clear())}ini(t){if(!this.eni)throw new g("Lock was released");if(!function(t,i){return t===Pe.hst&&i===Pe.hst||i===Pe.ost}(t,this.eni.mode))throw new g("Incompatible transaction mode: "+this.eni.mode+", expected "+t);return this.eni.objectStore(this.l)}sni(){this.Tit.nni(this),this.eni=void 0}constructor(t,i){this.Tit=t,this.eni=i}};var m3=class{Uet(t){return Promise.resolve("persistent"===t)}Qet(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(at(i)):this.Jet(Pe.ost,(i=>i.Qet(t)))}Fet(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(at(i)):this.Jet(Pe.ost,(i=>i.Fet(t)))}Qb(t){return this.Jet(Pe.hst,(i=>i.Qb(t)))}Fb(t){return this.Jet(Pe.hst,(i=>i.Fb(t)))}Yet(t,i){return this.Jet(Pe.hst,(e=>e.Yet(t,i)))}xet(t){return this.Jet(Pe.hst,(i=>i.xet(t)))}Get(){return this.Jet(Pe.hst,(t=>t.Get()))}Vet(t){return this.Jet(Pe.hst,(i=>i.Vet(t)))}Wet(t,i){return this.Jet(Pe.hst,(e=>e.Wet(t,i)))}ET(t){return this.Jet(Pe.ost,(i=>i.ET(t)))}Het(t){return this.Jet(Pe.ost,(i=>i.Het(t)))}qet(){return this.Jet(Pe.ost,(t=>t.qet()))}dDt(t){return this.rni(),this.$Nt=new v3(this,t),this.$Nt}rni(){if(void 0!==this.$Nt)throw new g("Already locked")}nni(t){if(this.$Nt!==t)throw new g("Incorrect lock");this.$Nt=void 0}Mx(t){return this.Mq.Mx(t)}Jet(t,i){return this.Mx((()=>this.hni(t,i)))}async hni(t,i){this.rni();const e=this.oni.transaction(this.l,t),s=this.dDt(e);try{return await Rc(e,i,s)}finally{s.sni()}}ani(t){this.rni();const i=this.oni.transaction(this.l,t);return this.dDt(i)}static uni(t,i){let e;const s=new Promise((t=>{e=t})),n=t.reduce(((t,i)=>t.then((()=>{let t;const e=new Promise((i=>{t=i}));return i.Mx((()=>(t(),s))).catch(qt),e}))),Promise.resolve());return e(n.then(i)),s}constructor(t,i){this.$Nt=void 0,this.Mq=new _r,this.oni=t,this.l=i}},p3={lp:17,cni:async t=>{const{transaction:i,database:e}=t,s=i.objectStoreNames;if(s&&s.length)for(let t=0;t<s.length;t++)e.deleteObjectStore(s[t]);e.createObjectStore(D3,{keyPath:"id"}),e.createObjectStore(I3,{keyPath:"key"}),e.createObjectStore(S3,{keyPath:"key"});e.createObjectStore(E3,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");e.createObjectStore(b3,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},y3=class{async lni(t){for(const i of this.dni)this.fni<i.lp&&await i.cni(t)}constructor(t){this.fni=t}},M3=class extends y3{get dni(){return[p3]}},T3=new class{_ni(t){this.gni=t}h9(t){return this.gni(t)}constructor(){this.gni=t=>new M3(t)}},N3=18,D3="cachingTask",I3="licences",S3="manifest",E3="segment",b3="segmentMetadata";async function L3(){!function(){if("undefined"==typeof indexedDB)throw new g("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",N3);return t.addEventListener("upgradeneeded",k3),await w3(t)}async function k3(t){const i=t.oldVersion<=N3?t.oldVersion:-1,e=t.target,s=e.result,n=e.transaction,r=T3.h9(i),h={database:s,transaction:n};await Rc(n,(t=>r.lni(t)),h)}var C3=class{static get Ib(){return this.vst||(this.vst=L3()),this.vst}};C3.vst=void 0;var x3=class{Jet(t){return t(this)}sni(){this.ist.sni(),this.tst.sni(),this.sst.sni(),this.nst.sni(),this.rst.sni()}constructor(t,i){this.ist=t.ist.dDt(i),this.tst=t.tst.dDt(i),this.sst=t.sst.dDt(i),this.nst=t.nst.dDt(i),this.rst=t.rst.dDt(i)}};I.wa(class t{static async h9(){const i=await C3.Ib;return new t(i)}Jet(t){const i=this.allCollections;return m3.uni(i,(()=>this.hni(i,t)))}async hni(t,i){const e=t.map((t=>t.l)),s=this.oni.transaction(e,Pe.ost),n=new x3(this,s);try{return await Rc(s,i,n)}finally{n.sni()}}get allCollections(){return[this.tst,this.ist,this.sst,this.nst,this.rst]}constructor(t){this.oni=t,this.ist=new m3(t,b3),this.tst=new m3(t,E3),this.sst=new m3(t,S3),this.nst=new m3(t,D3),this.rst=new m3(t,I3)}}.h9);var O3=class{wni(t){const i=this.pW.gf(),e=t.createGain();for(const s of i){t.createMediaElementSource(s).connect(e)}return e}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){const t=this;return{createAudioSourceNode:i=>t.wni(i)}}constructor(t){this.Xa=void 0,this.pW=t}};Rt((function(t){return class extends t{fa(){const t=this.Ani.va;return N(super.fa(),{get audio(){return t}})}constructor(t,i){super(t,i),this.Ani=new O3(this.n7)}}}),sa.Za);Rt((function(t){return class i extends t{ga(t){const e=i.vni(this.wd.analytics),s=i.vni(t?t.analytics:void 0);e||s?this.mni(Tt({},e,s)):this.pni&&this.pni.disable(),super.ga(t)}mni(t){if(this.pni)this.pni.enable(),this.pni.setOptions(t);else{const i=s.youbora;if(!i)throw new g("Youbora JavaScript library not loaded.");if(!i.adapters.TheoPlayer2)throw new g("TheoPlayer2 adapter not available on Youbora JavasScript library");const e=new i.Plugin(t);e.setAdapter(new i.adapters.TheoPlayer2(this.va)),this.Oc&&i.adapters.TheoPlayer2.NativeAdsAdapter&&e.setAdsAdapter(new i.adapters.TheoPlayer2.NativeAdsAdapter(this.va)),this.pni=e}}static vni(t){if(t){const i=t.filter((t=>"youbora"===t.integration));if(0===i.length)return;if(i.length>1)throw new g("Only one youbora analytics configuration expected");const e=i[0],{integration:s}=e;return Yf(e,["integration"])}}gn(){this.pni&&this.pni.disable(),super.gn()}constructor(t,i){super(t,i)}}}),sa.x7);var j3=1,z3=0,P3=1e3,B3=class t extends Od{yni(){const t=this.ct===1/0,i=t?j3:z3,e=t?-1:this.ct,s=rs(this.Qo.rt.og,this.Mni);this.Tni.setPresentationInformation(new this.Nni(i,e,s))}Mni(t){const i=t.Ng.og,e=[];for(let t=0;t<i.length;t++){const s=i[t];s.ji&&s.Ti&&e.push({trackIdx:t,bitrate:s.wz,width:s.ji,height:s.Ti,codecIdentifier:s.mst})}return e}Dni(){return this.Qo.Tf()*P3}get ct(){return this.Qo.Td()*P3}get Ini(){return this.Sni}get Eni(){return this.bni}set Eni(t){this.bni=t,t&&this.Tni.reportPlayerState(t)}set Lni(t){this.kni=t}Cni(){return v((()=>{this.xni(),this.Oni()}),t.jni)}zni(){this.Qo.Oc&&(this.Qo.Oc.yn("itt",this.Pni),this.Qo.Oc.yn("ett",this.Bni),this.Qo.Oc.yn("Iqt",this.Rni),this.Qo.Oc.yn("aXt",this.Uni)),this.Qo.yn(l.Jg,this.Fsi),this.Qo.yn(ut.ha,this.L4),this.Qo.yn(l.Sh,this.Qni),this.Qo.yn(l.jh,this.Pei),this.Qo.yn(he.Rw,this.gU),this.Qo.yn(l.mw,this.NY),this.Qo.yn(l.pw,this.AU),this.Qo.yn(he.Bw,this.fU),this.Qo.yn(l.Tw,this.Fni)}Yni(){this.Qo.Oc&&(this.Qo.Oc.fn("itt",this.Pni),this.Qo.Oc.fn("ett",this.Bni),this.Qo.Oc.fn("Iqt",this.Rni),this.Qo.Oc.fn("aXt",this.Uni)),this.Qo.fn(l.Jg,this.Fsi),this.Qo.fn(ut.ha,this.L4),this.Qo.fn(l.Sh,this.Qni),this.Qo.fn(l.jh,this.Pei),this.Qo.fn(he.Rw,this.gU),this.Qo.fn(l.mw,this.NY),this.Qo.fn(l.pw,this.AU),this.Qo.fn(he.Bw,this.fU),this.Qo.fn(l.Tw,this.Fni)}gn(){m(this.Gni),this.Yni()}constructor(t,i,e,s=MMPlayerState,n=MMAdState,r=MMPresentationInfo){super(),this.Qo=t,this.lx=i,this.Tni=e,this.Vni=s,this.Wni=n,this.Nni=r,this.Hni=!0,this.Sni=!1,this.kni=void 0,this.bni=void 0,this.qni=void 0,this.Pni=t=>{const i=t.Z7;i.pVt();var e;e=i.Q7().duration;const s="linear"===i.Q7().type;i.yVt(),i.AVt();s&&(this.Sni=!0),this.Lni=this.Wni.AD_IMPRESSION,this.Lni=this.Wni.AD_STARTED},this.Bni=t=>{this.Sni=!1,this.Lni=this.Wni.AD_COMPLETED},this.Rni=t=>{t.TFt===Zo.ADBLOCK?this.Lni=this.Wni.AD_BLOCKED:this.Lni=this.Wni.AD_ERROR},this.Uni=()=>{this.Lni=this.Wni.AD_SKIPPED},this.Fni=t=>{var i,e,s,n;t.wS===Vt.pm&&(this.qni&&t.sQ!==this.qni&&this.Tni.reportABRSwitch(this.qni,t.sQ),this.qni=t.sQ,this.Tni.reportChunkRequest(new MMChunkInformation(t.Qp,t.sQ,t.yM,t.Not.zu,void 0,void 0,null!=(s=null==(i=t.Not.Bht)?void 0:i[0])?s:0,null!=(n=null==(e=t.Not.Bht)?void 0:e[1])?n:-1)))},this.Fsi=t=>{this.Eni=this.Vni.STOPPED,this.Co(t)},this.L4=t=>{this.Eni=this.Vni.ERROR,this.Tni.reportError(t.error,this.Dni())},this.Qni=()=>{this.Ini?this.Lni=this.Wni.AD_PAUSED:this.Eni=this.Vni.PAUSED},this.Pei=()=>{this.Ini&&(this.Lni=this.Wni.AD_PLAY)},this.gU=()=>{this.Ini?(this.kni===this.Wni.AD_PAUSED&&(this.Lni=this.Wni.AD_RESUMED),this.Lni=this.Wni.AD_PLAYING):(this.Hni&&(this.Hni=!1,this.yni(),this.Eni=this.Vni.STARTED),this.Eni!==this.Vni.PAUSED&&this.Eni!==this.Vni.BUFFERING||(this.Eni=this.Vni.RESUMED))},this.NY=()=>{this.Tni.reportPresentationSize(this.Qo.a_,this.Qo.r_)},this.AU=t=>{this.Ini||this.Eni!==this.Vni.PAUSED||this.Tni.reportPlayerSeekCompleted(t.currentTime*P3)},this.fU=()=>{this.Ini||(this.Eni=this.Vni.BUFFERING)},this.Oni=()=>{this.Tni.reportDownloadRate(_.floor(Yo.Ib.ez()))},this.xni=()=>{this.Ini||this.Tni.reportPlaybackPosition(this.Dni())},this.Eni=this.Vni.INITIALIZED,this.zni(),this.Gni=this.Cni()}};B3.jni=2e3,Rt((function(t){return class extends t{gn(){super.gn(),this.Xni()}constructor(t,i){super(t,i),this.Zni=void 0,this.Kni=void 0,this.Jni=()=>{this.Kni=void 0,this.Xni();const t=super.Wa();t&&(this.Kni=function(t,i){const e=function(t,i){if(t&&t.analytics)for(const i of t.analytics)if("smartsight"===i.integration)return i;if(i&&i.analytics)for(const t of i.analytics)if("smartsight"===t.integration)return t;return}(t,i);if(!e)return;return e}(t,this.wd)),this.$ni()},this.$ni=()=>{if(!this.Zni&&this.Kni&&this.bt&&this.bt.src&&!this.Ff){const t=MMSmartStreaming.getInstance();!function(t,i,e){t.registerMMSmartStreaming(e.playerName,e.customerID,e.subscriberID,e.domainName),t.reportComponent("THEOSDK"),t.reportPlayerInfo("THEOplayer","THEOplayer","7.12.0"),t.reportDeviceInfo(void 0,void 0,void 0,void 0,void 0,s.innerWidth,s.innerHeight),t.initializeSession("QBRModeDisabled",i,e.metaURL,e.assetID)}(t,this.bt.src,this.Kni),this.Zni=new B3(this,this.Kni,t),this.Zni.yn("ended",this.Xni)}},this.Xni=()=>{this.Zni&&(this.Zni.gn(),this.Zni=void 0)},this.yn(l.lo,this.Jni),this.yn(l.Hg,this.$ni),this.yn(l.jh,this.$ni)}}}),sa.x7);var R3=String.fromCharCode(95);var U3=class t{get va(){return this.Xa||(this.Xa=function(t){return{get adsManager(){return t.adsManager},get ids(){return t.ids},get adContainer(){return t.adContainer},get imaSDK(){return t.imaSDK},get sendEvent(){return t.sendEvent},set sendEvent(i){t.sendEvent=i}}}(this)),this.Xa}get id(){return this.CT}get adsManager(){return this.G5t}get ids(){return this.tri}get adContainer(){return this.PWt}get sendEvent(){return this.iri}set sendEvent(t){for(let t of this.eri)this.G5t.removeEventListener(t.type,t.listener);this.eri=[],this.iri=t,this.sri()}get imaSDK(){return!0}nri(){for(let t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.G5t.addEventListener(i,this.rri),this.eri.push({type:i,listener:this.rri})}}hri(){No(this.eri);for(let t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.G5t.removeEventListener(i,this.rri)}}ari(t){this.HB.push({type:t.type,adVolume:this.adsManager.getVolume()})}sri(){null==this.iri||this.iri.call(this,this.HB),this.HB=[]}static cri(i){return t.lri[i]||i}constructor(i,e,s,n){this.rri=i=>{this.ari({type:t.cri(i.type)})},this.CT=i,this.G5t=e,this.tri=s,this.PWt=n,this.eri=[],this.HB=[]}};U3.lri={loaded:"AdLoaded",impression:"AdImpression",start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",skip:"AdSkipped",volumeChange:"AdVolumeChange"};var Q3=class{dri(t,i){this.fri=h.createElement("script"),this.fri.id=t.id,this.fri.type="text/javascript",t.adContainer.appendChild(this.fri),this.fri.src="https://z.moatads.com/"+i+"/moatvideo.js#"+t.id,this._ri=t.id,s[this._ri]=t.va}gri(){this.fri&&fh(this.fri),this._ri&&(s[this._ri]=void 0)}constructor(){this.fri=void 0,this._ri=void 0}};Rt((function(t){return class i extends t{ga(t){var e,s,n;this.wri(),null==(e=this.Ari)||e.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.vri),null==(s=this.Ari)||s.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.wri),null==(n=this.Ari)||n.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.pri),this.Ari=void 0,this.PWt=void 0,super.ga(t);const r=t&&t.analytics;this.yri=i.Mri(r);this.Oc&&this.yri&&G$()&&this.Tri()}gn(){var t,i,e;this.wri(),null==(t=this.Ari)||t.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.vri),null==(i=this.Ari)||i.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.wri),null==(e=this.Ari)||e.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.pri),this.Ari=void 0,this.PWt=void 0,this.Oc&&this.Oc.fn("l1t",this.d1t),super.gn()}Tri(){this.Oc&&this.Oc.yn("l1t",this.d1t)}Nri(t,i,e){const s=R3+"moatApi"+_.floor(1e8*_.random());this.Dri=new U3(s,t,i,e),this.Dri.nri(),this.Iri.dri(this.Dri,this.yri.partnerCode)}static Mri(t){if(t){const i=t.filter((t=>"moat"===t.integration));if(0===i.length)return;if(i.length>1)throw new g("Only one Moat analytics configuration expected");return i[0]}}constructor(t,i){super(t,i),this.yri=void 0,this.Dri=void 0,this.Ari=void 0,this.PWt=void 0,this.pri=()=>{this.Nri(this.Ari,{partnerCode:this.yri.partnerCode,viewMode:google.ima.ViewMode.NORMAL},this.PWt)},this.d1t=t=>{this.Ari=t.Y5t,this.PWt=t.X1t,this.wri(),this.Ari.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.vri),this.Ari.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.wri),this.Ari.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.pri)},this.vri=t=>{const i=t.getAd().getAdPodInfo();i.getAdPosition()<i.getTotalAds()&&(this.wri(),this.pri())},this.wri=()=>{this.Dri&&(this.Dri.hri(),this.Dri=void 0),this.Iri.gri()},this.Iri=new Q3}}}),sa.x7);var xl,Xa=class extends wn{constructor(t,i,e){super(t,new Date),this.Sri=i,this.Z7=e}};!function(t){t.LOADED="DAILoaded",t.AD_BREAK_STARTED="DAIAdBreakStarted",t.AD_BREAK_ENDED="DAIAdBreakEnded",t.AD_PERIOD_STARTED="DAIAdPeriodStarted",t.AD_PERIOD_ENDED="DAIAdPeriodEnded",t.AD_PROGRESS="DAIAdProgress",t.CUEPOINTS_CHANGED="DAICuePointsChanged",t.CLICK="DAIClick",t.ERROR="DAIError",t.STARTED="DAIStarted",t.FIRST_QUARTILE="DAIFirstQuartile",t.MIDPOINT="DAIMidpoint",t.STREAM_INITIALIZED="DAIStreamInitialized",t.THIRD_QUARTILE="DAIThirdQuartile",t.COMPLETE="DAIComplete"}(xl||(xl={}));var F3=class extends Xa{constructor(t,i){super("DAILoaded",t,i)}},Y3=class extends Xa{constructor(t,i){super("DAIAdBreakStarted",t,i)}},G3=class extends Xa{constructor(t,i){super("DAIAdBreakEnded",t,i)}},V3=class extends Xa{constructor(t,i){super("DAIAdProgress",t,i)}},W3=class extends Xa{constructor(t,i){super("DAICuePointsChanged",t,i)}},H3=class extends Xa{constructor(t,i){super("DAIClick",t,i)}},q3=class extends Xa{constructor(t,i){super("DAIError",t,i)}},X3=class extends Xa{constructor(t,i){super("DAIStarted",t,i)}},Z3=class extends Xa{constructor(t,i){super("DAIFirstQuartile",t,i)}},K3=class extends Xa{constructor(t,i){super("DAIMidpoint",t,i)}},J3=class extends Xa{constructor(t,i){super("DAIStreamInitialized",t,i)}},$3=class extends Xa{constructor(t,i){super("DAIThirdQuartile",t,i)}},t5=class extends Xa{constructor(t,i){super("DAIComplete",t,i)}};var i5=class extends xd{replaceAdTagParameters(t){return this.Eri.replaceAdTagParameters(null!=t?t:null)}bri(t){return this.Eri.contentTimeForStreamTime(t)}Lri(t){return this.Eri.streamTimeForContentTime(t)}ZCt(t,i){const e=function(t){let i;"vod"===t.availabilityType?(i=new s.google.ima.dai.api.VODStreamRequest,i.contentSourceId=t.contentSourceID,i.videoId=t.videoID):"live"===t.availabilityType&&(i=new s.google.ima.dai.api.LiveStreamRequest,i.assetKey=t.assetKey);const e=google.ima.dai.api.StreamRequest.StreamFormat;var n;return i.format="dash"===t.format?e.DASH:e.HLS,i.apiKey=t.apiKey,i.adTagParameters=t.adTagParameters,i.omidAccessModeRules=null!=(n=D$(t.omidAccessModeRules))?n:{},i}(t);this.Eri.requestStream(e)}tr(){this.kri(!1),this.Eri.reset()}gn(){this.Vo();const t=google.ima.dai.api.StreamEvent.Type;this.Eri.removeEventListener(t.AD_BREAK_STARTED,this.Cri),this.Eri.removeEventListener(t.AD_PROGRESS,this.xri),this.Eri.removeEventListener(t.CLICK,this.uWt),this.Eri.removeEventListener(t.COMPLETE,this.Ori),this.Eri.removeEventListener(t.CUEPOINTS_CHANGED,this.jri),this.Eri.removeEventListener(t.ERROR,this.Ss),this.Eri.removeEventListener(t.FIRST_QUARTILE,this.zri),this.Eri.removeEventListener(t.LOADED,this.Pri),this.Eri.removeEventListener(t.MIDPOINT,this.Bri),this.Eri.removeEventListener(t.STARTED,this.Rri),this.Eri.removeEventListener(t.STREAM_INITIALIZED,this.Uri),this.Eri.removeEventListener(t.THIRD_QUARTILE,this.Qri),this.Eri.removeEventListener(t.AD_BREAK_ENDED,this.Fri),this.tr(),this.Yri&&fh(this.Yri)}Gri(t){this.Eri.onTimedMetadata(t)}Vri(t,i,e){this.Eri.processMetadata(t,i,e)}Wri(t){const i=this.Eri.previousCuePointForStreamTime(t);if(i)return{VT:i.end,GT:i.start,Hf:i.played}}Hri(t){const i=this.Wri(t),e=i&&!i.Hf?i.GT:void 0;return Promise.resolve(e)}kri(t){this.RWt.style.display=t?"block":"none"}constructor(t,i,e){super(),this.Eri=t,this.RWt=i,this.Yri=e,this.Cri=t=>{this.kri(!0);const i=wt(t),e=et(t);this.Co(new Y3(i,e))},this.Fri=t=>{this.kri(!1);const i=wt(t),e=et(t);this.Co(new G3(i,e))},this.xri=t=>{const i=wt(t),e=et(t);this.Co(new V3(i,e))},this.uWt=t=>{const i=wt(t),e=et(t);this.Co(new H3(i,e))},this.Ori=t=>{const i=wt(t),e=et(t);this.Co(new t5(i,e))},this.jri=t=>{const i=wt(t),e=et(t);this.Co(new W3(i,e))},this.Ss=t=>{const i=wt(t),e=et(t);this.Co(new q3(i,e))},this.zri=t=>{const i=wt(t),e=et(t);this.Co(new Z3(i,e))},this.Pri=t=>{const i=wt(t),e=et(t);this.Co(new F3(i,e))},this.Bri=t=>{const i=wt(t),e=et(t);this.Co(new K3(i,e))},this.Rri=t=>{const i=wt(t),e=et(t);this.Co(new X3(i,e))},this.Uri=t=>{const i=wt(t),e=et(t);this.Co(new J3(i,e))},this.Qri=t=>{const i=wt(t),e=et(t);this.Co(new $3(i,e))},this.RWt.style.display="none",this.Eri.setClickElement(this.RWt);const s=google.ima.dai.api.StreamEvent.Type;this.Eri.addEventListener(s.AD_BREAK_STARTED,this.Cri),this.Eri.addEventListener(s.AD_PROGRESS,this.xri),this.Eri.addEventListener(s.CLICK,this.uWt),this.Eri.addEventListener(s.COMPLETE,this.Ori),this.Eri.addEventListener(s.CUEPOINTS_CHANGED,this.jri),this.Eri.addEventListener(s.ERROR,this.Ss),this.Eri.addEventListener(s.FIRST_QUARTILE,this.zri),this.Eri.addEventListener(s.LOADED,this.Pri),this.Eri.addEventListener(s.MIDPOINT,this.Bri),this.Eri.addEventListener(s.STARTED,this.Rri),this.Eri.addEventListener(s.STREAM_INITIALIZED,this.Uri),this.Eri.addEventListener(s.THIRD_QUARTILE,this.Qri),this.Eri.addEventListener(s.AD_BREAK_ENDED,this.Fri)}};function wt(t){const i=t.getStreamData(),e=i.adProgressData;let s;e&&(s={TKt:e.adBreakDuration,qri:e.duration,NKt:e.adPosition,Mf:e.currentTime,ct:e.duration,DKt:e.totalAds});return{Xri:s,Zri:(i.cuepoints||[]).map((t=>({GT:t.start,VT:t.end,Hf:t.played}))),Kri:i.errorMessage||void 0,Jri:i.manifestFormat||void 0,$ri:i.streamId||void 0,thi:(i.subtitles||[]).map((t=>({ihi:t.webvtt,ehi:t.ttml,gs:t.language}))),zu:i.url}}function e5(t){return{qUt:t.getAdSlotId(),iXt:t.getContent(),qz:t.getContentType(),Ti:t.getHeight(),ji:t.getWidth()}}function et(t){const i=t.getAd();if(!i)return;const e=i.getAdPodInfo(),s=i.getCompanionAds().map(e5);return{yQt:i.getAdId(),M$t:{NKt:e.getAdPosition(),tVt:e.getMaxDuration(),O5t:e.getPodIndex(),nbt:e.getTimeOffset(),DKt:e.getTotalAds()},eUt:i.getAdSystem(),z5t:i.getAdvertiserName(),WUt:i.getApiFramework(),lUt:s,SUt:i.getCreativeId(),l0t:i.getCreativeAdId(),P5t:i.getDealId(),$p:i.getDescription(),ct:i.getDuration(),Jz:i.getTitle(),shi:i.getUniversalAdIdRegistry(),nhi:i.getUniversalAdIdValue(),n0t:i.getVastMediaHeight(),s0t:i.getVastMediaWidth(),$$t:i.getWrapperAdIds(),t0t:i.getWrapperAdSystems(),i0t:i.getWrapperCreativeIds()}}function s5(){const t=h.body.lastElementChild;if(t instanceof HTMLIFrameElement&&"Advertisement"===t.title)return t}var n5="theo-dai-clickthrough",r5="urn:google:dai:2018",h5=class{get va(){const t=this,i=this.rhi;return{contentTimeForStreamTime:i=>t.Eri?t.Eri.bri(i):i,streamTimeForContentTime:i=>t.Eri?t.Eri.Lri(i):i,replaceAdTagParameters(i){t.Eri&&t.Eri.replaceAdTagParameters(i)},get snapback(){return t.hhi},set snapback(i){t.hhi=i},get sourceTransformer(){return i.ohi},set sourceTransformer(t){i.ohi=t}}}Nf(t){this.V2.qd(),this.V2=new na,D(this.ahi(t,this.V2.Wd))}async ahi(t,i){if(Bo(i),!this.uhi||!this.Eri)return this.Qo.lhi(t);if(this.uhi.F7)return;if(t>this.Qo.Tf()&&this.hhi){const e=await Nr(this.Eri.Hri(t),i);if(e){this.Qo.lhi(e),await this.Eri.lf(xl.AD_BREAK_ENDED,i);if(this.Eri.Wri(t).VT>t)return}}this.Qo.lhi(t)}i_(){const t=this.uhi&&this.uhi.F7;if(t){const i=Ai.xn(this.Qo.dhi()),e=t.nbt,s=e+t.tVt,n=new Ai([e,s]);return i.Sn(n).ks()}return this.Qo.dhi()}async Att(t,i){if(!t)return this.Qo.fhi(t,i);try{this.Qo.nt.yn(yt.L_,this._hi);const e=await this.rhi.ghi(t,i);this.uhi&&this.Eri&&(this.whi=!0),await this.Qo.fhi(e,i)}catch(t){if(Ao(t),t.code===vw.LICENSE_INVALID)return;const i=new $i(Ui.SOURCE_NOT_SUPPORTED,"Something went wrong while setting up a Google DAI stream.",t);throw this.Bz=Ki(i),this.Rz=i,this.Qo.Co(new Dr(i)),i}}tr(){if(this.whi){if(this.Qo.nt.fn(yt.L_,this._hi),this.Ahi){this.Ahi.fn(qo.O_,this.vhi);for(const t of this.Ahi.L.og)t.fn(Sl.QT,this.T6t);this.Ahi=void 0}this.Bz=void 0,this.Rz=void 0,this.V2.qd(),this.uhi&&this.uhi.tr(),this.Eri&&this.Eri.tr(),this.whi=!1}}get lt(){return this.Bz||this.Qo.mhi()}get bf(){return this.Rz||this.Qo.phi()}gn(){this.tr(),this.Qo.yhi(),this.Eri&&this.Eri.gn()}constructor(t,i,e,s){this.Ahi=void 0,this.Bz=void 0,this.Rz=void 0,this.V2=new na,this.whi=!1,this.hhi=!0,this._hi=t=>{const i=t.Lt;i.zt===Mi.Nm&&(i.Rg===Kc.ID3||i.Rg===Kc.EVENT_STREAM&&i.Og===r5)&&(i.jg=Ha.zg,this.Ahi=i,i.yn(qo.O_,this.vhi))},this.vhi=t=>{t.YT.yn(Sl.QT,this.T6t)},this.T6t=t=>{var i,e;if(this.Eri)if((null==(i=this.Ahi)?void 0:i.Rg)===Kc.ID3){const i=t.YT.O;"TXXX"===i.id&&this.Eri.Gri({TXXX:i.text})}else if((null==(e=this.Ahi)?void 0:e.Rg)===Kc.EVENT_STREAM){const i=t.YT.O;this.Eri.Vri(r5,i,t.uD)}},this.Qo=t,this.Eri=i,this.uhi=e,this.rhi=s,e&&i&&this.Qo.Oc&&this.Qo.Oc.htt(e.A0t)}},o5=class extends Hi{get Mhi(){return this.Thi}get AYt(){return A.so}constructor(t,i,e,s=!0){super(e),this.Thi=s,this.zqt=t,this.Pqt=i}},a5=class extends x${Nhi(){const t=[xl.STARTED,xl.FIRST_QUARTILE,xl.MIDPOINT,xl.THIRD_QUARTILE,xl.COMPLETE];this.Eri.yn(t,this.Dhi),this.Eri.yn(xl.AD_BREAK_ENDED,this.Fri),this.Eri.yn(xl.AD_PROGRESS,this.xri),this.Eri.yn(xl.CUEPOINTS_CHANGED,this.jri)}get Lqt(){return this.m0t}get pqt(){return this.RXt}Ihi(t){let i=t.M$t.nbt,e=this.bVt||this.findAdBreakWithPredicate(i,(t=>!t.Hf));if(!e){const s=t.M$t.tVt;i=this.Qo.Tf(),e=new o5(s,s,i,!1),e.Rqt(),this.LVt.push(e)}return e}Shi(t){switch(t){case xl.STARTED:this.m0t=!0;break;case xl.AD_BREAK_ENDED:this.m0t=!1}}Ehi(t,i,e){if(i)switch(t){case xl.STARTED:case xl.FIRST_QUARTILE:case xl.MIDPOINT:case xl.THIRD_QUARTILE:case xl.COMPLETE:this.pqt.Co(new Nu(this.bVt))}if(e)switch(t){case xl.STARTED:case xl.FIRST_QUARTILE:case xl.MIDPOINT:case xl.THIRD_QUARTILE:case xl.COMPLETE:this.pqt.Co(new Nh(this.vVt,this.vVt.X$t))}switch(t){case xl.COMPLETE:this.pqt.Co(new gh(this.vVt,this.w0t.X$t));break;case xl.AD_BREAK_ENDED:this.pqt.Co(new ms(this.F7))}switch(t){case xl.FIRST_QUARTILE:this.pqt.Co(new s$(this.vVt,this.w0t.X$t));break;case xl.MIDPOINT:this.pqt.Co(new r$(this.vVt,this.w0t.X$t));break;case xl.THIRD_QUARTILE:this.pqt.Co(new o$(this.vVt,this.w0t.X$t))}}bhi(t){const i=t.Z7,e=this.Ihi(i),s=function(t,i){if(t.Oc.length)return!1;for(let e=0;e<i;e++){const i=new E$(t,ss.CFt);t.Qqt(i)}return!0}(e,i.M$t.DKt),n=function(t,i){const e=i.M$t.NKt-1;return t.Oc[e]}(e,i),r=function(t,i){return t.Xqt!==mh.READY&&(t.e0t(i),!0)}(n,i);this.vVt=n,this.bVt=e,e.Rqt(),this.Ehi(t.type,s,r)}Lhi(t){for(const i of this.LVt)if(rd(t,i.nbt))return i}findAdBreakWithPredicate(t,i){for(const e of this.LVt)if(rd(e.nbt,t)&&i(e))return e}get khi(){const t=this.findAdBreakWithPredicate(0,(t=>t.Mhi));let i=0;return t&&(i=t.tVt),i}Chi(t,i){let e;for(const s of this.LVt)s.nbt>=t&&s.nbt<=i&&!s.Hf&&(!e||s.nbt>=e.nbt)&&(e=s);return e}Hm(){}ntt(t){}tr(){this.vVt&&(this.pqt.Co(new gh(this.vVt,this.vVt.X$t)),this.vVt=void 0),this.bVt&&(this.pqt.Co(new ms(this.bVt)),this.bVt=void 0),this.m0t=!1,No(this.LVt)}gn(){this.tr(),this.pqt.gn()}constructor(t,i){super(new Io,A.so),this.Eri=t,this.Qo=i,this.xri=t=>{const i=this.bVt;if(!i||!this.vVt)return;const e=t.Sri.Xri;this.vVt.X$t=e.Mf,function(t,i){const e=i.NKt,s=i.TKt,n=i.Mf,r=xo(t.Oc.slice(0,e-1),(t=>{var i;return null!=(i=t.ct)?i:0}));t.iVt=s-n-r}(i,e)},this.jri=t=>{const i=t.Sri.Zri;if(i)for(const t of i)if(!this.Lhi(t.GT)){const i=t.VT-t.GT,e=new o5(i,i,t.GT,!0);this.LVt.push(e)}},this.Dhi=t=>{this.Shi(t.type),this.bhi(t)},this.Fri=t=>{this.m0t=!1,this.vVt=void 0;const i=this.F7;i&&(i.iVt=0,this.Ehi(t.type,!1,!1),this.bVt=void 0)},this.Nhi()}};function u5(t){if(t.sources)if(Gt(t.sources)){for(const i of t.sources)if(au(i))return!0}else if($l(t.sources))return au(t.sources);return!1}var c5=class{async ghi(t,i){const e=[],s=[];for(const i of t.sources)if(au(i)){if(!this.Eri)continue;e.push(i)}else s.push(i);if(0===e.length)return t;let n,r;for(;void 0===n&&0!==e.length;){const{yc:h}=await Ye.Ib.QP(e,t),o=h;Bo(i);try{n=await this.xhi(o,i),s.push(n)}catch(t){Ao(t),r=t,To(e,o)}}if(0!==t.sources.length&&0===s.length)throw new g("Fatal: unable to play DAI streams.");return r&&cs(r.message),Tt({},t,{sources:s})}async xhi(t,i){if(!this.Eri)throw new g("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=this.Eri.lf(xl.LOADED,i),s=this.Eri.lf(xl.ERROR,i),n=t.type===ii.kA?"dash":"hls";this.Eri.ZCt(Tt({},t.ssai,{format:n}));const r=await Promise.race([e,s]);if(r.type===xl.LOADED){const i=t.type===ii.kA?ii.kA:ii.xA;return Ia(Tt({},t,{src:this.ohi?await this.ohi(r.Sri.zu||""):r.Sri.zu,type:i}))}throw g(r.Sri.Kri)}constructor(t){this.Eri=t,this.ohi=t=>t}};Rt(function(t){return i=>class extends i{fa(){const t=super.fa(),i=t.ads;if(i){const t=this.Ohi.va;N(i,{get dai(){return t}})}return t}get Ul(){return this.jhi}lhi(t){super.Nf(t)}Nf(t){this.Ohi.Nf(t)}dhi(){return super.i_()}i_(){return this.Ohi.i_()}ga(t){return this.Ohi.tr(),super.ga(t)}async fhi(t,i){return super.Att(t,i)}async Att(t,i){return this.Ohi.Att(t,i)}mhi(){return super.Ef()}phi(){return super.Lf()}Ef(){return this.Ohi.lt}Lf(){return this.Ohi.bf}yhi(){super.gn()}gn(){this.Ohi.gn(),this.RWt&&(fh(this.RWt),this.RWt.removeEventListener("keydown",this.zhi),this.RWt.removeEventListener("click",this.zhi),this.RWt=void 0)}constructor(i,e){super(i,e),this.jhi=!1,this.zhi=t=>{13===t.which&&this.RWt.click(),this.m_()};const s=this.A_();let n,r;try{this.RWt=h.createElement("button"),this.RWt.className=n5,n=t(s,this.RWt),r=new a5(n,this),this.we.appendChild(this.RWt),this.jhi=!0}catch(t){this.RWt=void 0}const o=new c5(n);this.Ohi=new h5(this,n,r,o),this.RWt&&(this.RWt.addEventListener("keydown",this.zhi),this.RWt.addEventListener("click",this.zhi))}}}((function(t,i){if(!(s.google&&s.google.ima&&$l(s.google.ima.dai)))throw new g("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=s5(),n=new google.ima.dai.api.StreamManager(t),r=s5();return new i5(n,i,r&&r!==e?r:void 0)})),sa.L7);var l5=class{get Phi(){return void 0===this.Bhi?0:(performance.now()-this.Bhi)/1e3}Rhi(t){this.Uhi=t,this.Fhi.Qhi(t),this.Qo.yn(l.jh,this.Pei),this.Qo.yn(l.Jg,this.Fsi),this.Qo.yn(l.Sw,this.Yhi),this.Qo.yn(ut.ha,this.L4),this.Qo.yn(he.Bw,this.Gsi),this.Qo.yn([he.Ow,he.jw,he.Rw],this.Vsi),this.Qo.yn(l.Xg,this.Qsi),fs.nY(this.Ghi)}Vhi(){this.Qo.fn(l.jh,this.Pei),this.Qo.fn(l.Jg,this.Fsi),this.Qo.fn(l.Sw,this.Yhi),this.Qo.fn(ut.ha,this.L4),this.Qo.fn(he.Bw,this.Gsi),this.Qo.fn([he.Ow,he.jw,he.Rw],this.Vsi),this.Qo.fn(l.Xg,this.Qsi),fs.tY(this.Ghi),this.Whi||(this.Fhi.Hhi(this.qhi),this.Fhi.Xhi()),this.Zhi&&this.Khi(),this.Uhi=void 0,this.Jhi=!1,this.Whi=!1,this.qhi=-1/0,No(this.$hi)}toi(){this.Jhi&&this.Fhi.ioi(),this.Bhi=performance.now(),this.eoi=v(this.soi,6e4)}Khi(){this.Fhi.noi(this.Phi),this.Zhi=!1,this.Bhi=void 0,this.eoi&&(m(this.eoi),this.eoi=void 0)}roi(){if(S(this.Qo.Td()))return;const t=10*function(t,i){return _.floor(t/i)}(this.Qo.Tf()/this.Qo.Td()*100,10);gd(this.$hi,t)||(this.$hi.push(t),this.Fhi.hoi(t))}constructor(t,i){this.Qo=t,this.Fhi=i,this.Jhi=!1,this.Whi=!1,this.$hi=[],this.qhi=-1/0,this.Zhi=!1,this.Pei=()=>{this.Jhi||(this.Fhi.ooi(),this.Zhi&&this.Fhi.ioi(),this.Jhi=!0)},this.Fsi=()=>{this.Fhi.aoi(),this.Whi=!0},this.Yhi=()=>{this.qhi<this.Qo.Tf()&&(this.qhi=this.Qo.Tf()),this.roi()},this.Gsi=()=>{this.Jhi&&(this.uoi=performance.now(),this.Fhi.coi(this.Qo.Tf()))},this.Vsi=()=>{this.uoi&&(this.Fhi.loi((performance.now()-this.uoi)/1e3),this.uoi=void 0)},this.L4=()=>{this.qhi<this.Qo.Tf()&&(this.qhi=this.Qo.Tf()),this.Fhi.aet(this.Qo.Ef().message)},this.Qsi=()=>{const t=this.Qo.Td()===1/0;t&&!this.Zhi&&(this.Zhi=t,this.toi())},this.Ghi=()=>{this.Fhi.Hhi(this.qhi),this.Fhi.doi()},this.soi=()=>{void 0!==this.Bhi&&this.Fhi.foi(this.Phi)}}},d5=class{Qhi(t){this._oi(["setDocumentTitle",t.itemTitle]),this._oi(["setCustomUrl","https://content.streamone.net/embed/cust=Xo9oT45EptMG/account="+t.accountID+"/item="+t.itemID]),this._oi(["trackPageView"])}ooi(){this.goi("item first play","viewing","1")}Xhi(){this.goi("item skipped","skipped","1")}hoi(t){this.goi("item progress","percent",""+t)}doi(){this.goi("item abandoned","window closed","1")}Hhi(t){this.goi("item time","watched",""+t)}aoi(){this.goi("item finished","ended","1")}coi(t){this.goi("buffering started","timestamp",""+t)}loi(t){this.goi("buffering ended","duration",""+t)}aet(t){this.goi("error","message",""+t)}ioi(){this.goi("livestream first play","viewing","1")}foi(t){this.goi("livestream progress","duration",""+t)}noi(t){this.goi("livestream time","watched",""+t)}goi(t,i,e){this._oi(["trackEvent","Video",t,i,e])}_oi(t){const i="undefined"!=typeof _paq?_paq:void 0;i?i.push(t):console.warn("The Piwik library required for the StreamOne pre-integration was not found. Make sure it is loaded before instantiating THEOplayer.")}},f5=class{get woi(){if(!this.Aoi)return;const t=this.Qo.Tf()/this.Aoi;return _.floor(4*t)+1}get voi(){return void 0!==this.Aoi}Rhi(){this.Ic.yn("itt",this.Pni),this.Ic.yn("ett",this.Bni),this.Ic.yn("aXt",this.Uni),this.Ic.yn("Iqt",this.Rni),this.Qo.yn(l.Sw,this.Yhi),fs.nY(this.Ghi)}Vhi(){this.Ic.fn("itt",this.Pni),this.Ic.fn("ett",this.Bni),this.Ic.fn("aXt",this.Uni),this.Ic.fn("Iqt",this.Rni),this.Qo.fn(l.Sw,this.Yhi),No(this.moi),fs.tY(this.Ghi),this.Aoi=void 0}constructor(t,i,e){this.Qo=t,this.Ic=i,this.Fhi=e,this.moi=[],this.Pni=()=>{this.Aoi=this.Qo.Td(),this.Fhi.poi(this.Aoi)},this.Bni=()=>{this.Aoi&&(this.Fhi.yoi(this.Aoi),No(this.moi),this.Aoi=void 0)},this.Uni=t=>{if(!this.Aoi)return;const i=this.Aoi-this.Aoi*t.hXt;this.Fhi.Moi(i),this.Aoi=void 0},this.Rni=()=>{this.Aoi=this.Qo.Td(),this.Fhi.Toi()},this.Yhi=()=>{const t=this.woi;if(this.voi&&t&&!gd(this.moi,t)){switch(t){case 1:this.Fhi.Noi();break;case 2:this.Fhi.Doi();break;case 3:this.Fhi.Ioi();break;case 4:this.Fhi.Soi()}this.moi.push(t)}},this.Ghi=()=>{this.Fhi.Eoi()}}},_5=class{poi(t){this.Fhi.goi("ad start","duration",""+t)}yoi(t){this.Fhi.goi("ad finished","duration",""+t)}Moi(t){this.Fhi.goi("ad skipped","remaining time",""+t)}Toi(){this.Fhi.goi("ad blocker","detected","1")}Noi(){this.Fhi.goi("ad progress","firstQuartile","")}Doi(){this.Fhi.goi("ad progress","secondQuartile","")}Ioi(){this.Fhi.goi("ad progress","thirdQuartile","")}Soi(){this.Fhi.goi("ad progress","fourthQuartile","")}Eoi(){this.Fhi.goi("ad abandoned","window closed","1")}constructor(t){this.Fhi=t}};function g5(t){return t&&"streamone"===t.integration}Rt((function(t){return class extends t{gn(){this.fn(l.lo,this.do),this.boi&&(this.Loi&&this.Loi.Vhi(),this.koi&&this.koi.Vhi(),this.boi=!1),super.gn()}constructor(t,i){super(t,i),this.boi=!1,this.do=()=>{this.boi&&(this.Loi.Vhi(),this.koi&&this.koi.Vhi());const t=this.Wa();if(this.boi=!1,!t)return;const i=function(t){if(t.analytics)for(let i of t.analytics)if(g5(i))return i}(t);i&&(this.boi=!0,this.Loi.Rhi(i),this.koi&&this.koi.Rhi())};const e=new d5;if(this.Loi=new l5(this,e),this.Oc){const t=new _5(e);this.koi=new f5(this,this.Oc,t)}this.yn(l.lo,this.do)}}}),sa.x7);var w5=class extends ct{async AJ(t,i,e){const s=await A5(t);await super.AJ(s,i,e),this.Coi(s,i)}async _J(t,i,e){const s=await A5(t);await super._J(s,i,e),this.Coi(s,i)}Coi(t,i){const e=this.Ooi.xoi;if(void 0===e)return;const s=i.GK;let n;if(this.joi!==s&&(this.joi=s,e.setLevelSwitching(s),e.setContainerFormat(2)),function(t){return J.call(t,"n9")}(i)){const t=i.n9,r=i.n9+i.ct;n=i.UD,e.newPts(t,r,"video",s)}else 0;e.appendBuffer(t.zm,"video",s,n)}async ET(t,i,e){var s;await super.ET(t,i,e),null==(s=this.Ooi.xoi)||s.flushBuffer(t,i)}constructor(t,i){super(t),this.Ooi=i,this.joi=void 0}};async function A5(t){switch(t.Rg){case ji.aq:return t;case ji.VI:{const i=await Ot(t.zm);return{Rg:ji.aq,zm:new j(i)}}case ji.uq:throw new g("Opaque initialization segments are not supported on web.")}}var v5=class extends Ct{Vst(t){return t.e$===Vt.pm?new w5(t,this.Ooi):new ct(t)}constructor(t,i){super(t),this.Ooi=i,this.Yst(t)}},m5=class extends gr{get xoi(){return this.zoi}Poi(){this.zoi=new LcevcDil.LcevcDil(this.sA.Uz,this.Boi,{})}ge(){super.ge(),this.Roi()}be(){super.be(),this.Boi.style.display="none"}tr(){return this.Boi.style.display="none",void 0!==this.zoi&&(this.zoi.close(),this.Poi()),super.tr()}Ud(){return this.Uoi=!0,void 0!==this.zoi&&(this.zoi.close(),this.zoi=void 0),this.pu.removeChild(this.Boi),super.Ud()}IP(t){this.Co(new aC(new Ac(vw.ABORTED,t)))}Roi(){this.sA.Uz.style.display="none",this.Boi.style.display="block"}get Sst(){return this.sA}Rst(t){return new v5(t,this)}Bst(t){return new Jt(t)}constructor(t,i){super(t),this.Uoi=!1,this.Qoi=t=>{this.Uoi||(t||this.IP("LCEVC SDK failed to initialize."),this.Poi())},this.Foi=()=>{this.Uoi||this.IP("LCEVC SDK failed to initialize.")},this.pu=i,this.Boi=h.createElement("canvas"),this.Boi.style.width="100%",this.Boi.style.height="100%",this.Boi.style.position="absolute",this.Boi.style.top="50%",this.Boi.style.left="50%",this.Boi.style.transform="translate(-50%, -50%)",this.Boi.style.display="none",this.pu.appendChild(this.Boi),LcevcDil.ready.then(this.Qoi,this.Foi)}},Ec=class extends vt{SP(t){if(t===Vt.pm)return this.Yoi=new m5(super.SP(t),this.pu),this.Yoi}async cP(t){this.Yoi=void 0;const i=t;await i.Ud(),await super.cP(i.Sst)}get Goi(){return this.Yoi}constructor(t,i){super(t),this.pu=i}},p5=class extends ZV{async gn(){for(const t of this._T.og)t.fn(qo.J_,this.Voi);this.rt.fn(yt.L_,this.Woi),this.rt.fn(yt.C_,this.Hoi),await super.gn(),await this.sA.Ud(),await this.lP.cP(this.sA)}constructor(t,i,e,s,n,r,h,o){const a=new Ec(r,o),u=new Zu(a);super(t,i,e,s,n,u.SP(h),o),this.Woi=t=>{t.Lt.yn(qo.J_,this.Voi)},this.Hoi=t=>{t.Lt.fn(qo.J_,this.Voi)},this.Voi=t=>{var i;const e=null==(i=this.qoi.Goi)?void 0:i.xoi,s=t.Hrt.Mg;null==e||e.setCurrentLevel(s)},this.lP=u,this.qoi=a,this._T.yn(yt.L_,this.Woi),this._T.yn(yt.C_,this.Hoi)}};Uu(new class extends AR{JA(t,i,e,s,n,r,h){const o=new jt(I.Ib.sst,I.Ib.ist,I.Ib.tst,I.Ib.rst);let a=i;return gW.qC()&&(a=new gW(a)),new p5(e,s,n,r,o,a,Vt.pm,t)}async EP(t){if(!t.lcevc)return!1;if(!await super.EP(t))return!1;if(void 0===s.LcevcDil)throw new $i(Ui.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}bP(){return!1}constructor(...t){super(...t),this.LP=hi.sz}});var xc,y5=class extends dZ{async gn(){for(const t of this._T.og)t.fn(qo.J_,this.Voi);this.rt.fn(yt.L_,this.Woi),this.rt.fn(yt.C_,this.Hoi),await super.gn(),await this.lP.cP(this.sA)}constructor(t,i,e,s,n,r,h,o,a){const u=new Ec(i,t),c=new Zu(u);super(c.SP(Vt.pm),e,s,n,r,h,o,a),this.Woi=t=>{t.Lt.yn(qo.J_,this.Voi)},this.Hoi=t=>{t.Lt.fn(qo.J_,this.Voi)},this.Voi=t=>{var i;const e=null==(i=this.qoi.Goi)?void 0:i.xoi,s=t.Hrt.CIt.Mg;null==e||e.setCurrentLevel(s)},this.lP=c,this.qoi=u,this._T.yn(yt.L_,this.Woi),this._T.yn(yt.C_,this.Hoi)}};Uu(new class extends _Z{JA(t,i,e,s,n,r,h){return new y5(t,i,e,n,r,GX(s.libraryLocation),new lZ(s.libraryLocation),new jt(I.Ib.sst,I.Ib.ist,I.Ib.tst,I.Ib.rst),s)}async EP(t,i){if(!t.lcevc)return!1;if(!await super.EP(t,i))return!1;if(void 0===s.LcevcDil)throw new $i(Ui.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}bP(){return!1}constructor(...t){super(...t),this.LP=hi.cz}}),function(t){t.Xoi="tr",t.Zoi="Koi"}(xc||(xc={}));var M5="freewheel-nonlinear-ad",T5=[l.Xg,l.Sw,l.Ew,l.Sh,he.Rw,l.jh],N5=class t extends Du{v_(){this.lP.jB()}Joi(){this.$oi.yn("ttt",this.tai),this.$oi.yn(["itt","ett"],this.iai),this.$oi.yn("J7",this.o5t)}eai(){this.$oi.fn("ttt",this.tai),this.$oi.fn(["itt","ett"],this.iai),this.$oi.fn("J7",this.o5t)}sai(){this.pqt.Qa(this.$oi.nai)}rai(){this.$oi.hai.yn(T5,this.Ds)}oai(){this.$oi.hai.fn(T5,this.Ds)}get vqt(){return this}static get wqt(){return A.DVt}get wqt(){return t.wqt}get F7(){var t;return null!=(t=this.$oi.nai.F7)?t:null}get U7(){const t=this.$oi.nai.w0t;return t?[t]:[]}ntt(t){}Tf(){return this.$oi.hai.Mf}Nf(t){}Td(){return this.$oi.hai.ct}Sf(){return this.$oi.hai.If}Ef(){return this.Bz}Lf(){return this.Rz}h_(){return 0}u_(){return 0}l_(){return this.$oi.hai.c_}d_(t){this.$oi.hai.c_=t}Bf(){return this.$oi.hai.Pf}Rf(t){this.$oi.hai.Pf=t}$f(){return this.$oi.hai.Jf}get Y7(){return this.$oi.nai.Y7}get G7(){return this.$oi.nai.G7}i_(){return this.$oi.hai.t_}Yf(){return this.$oi.hai.Ff}Tqt(t){if(this.Lqt||this.$oi.Tqt(t),this.$oi.aai){if(t.type===l.Sh&&this.Qo.If)return!0;if(t.type===l.Jg)return this.$oi.cai.uai(),!0}return!1}be(){this.$oi.be()}m_(){this.Ff||this.$oi.hai.m_()}async lai(){if(!this.$oi.fai)try{await this.$oi.fKt()}catch(t){this._ai(t,Zo.GENERAL)}}async gai(){if(this.$oi.hai.wai)return this.$oi.hai.p_(),!1;if(this.$oi.Aai)try{await this.$oi.cai.vai()}catch(t){this._ai(t,Zo.PLAYBACK)}return!0}get mai(){return Yt(this.Ef())}_ai(t,i){t.name!==xc.Xoi&&this.pqt.Co(new Vo(i,"Ads could not be loaded."))}async p_(){if(this.Ff&&this.Co(new sh(this.Mf)),await this.lai(),this.mai)return;const t=await this.gai();!this.mai&&t&&this.o5t()}C0t(t,i,e){i===Zi.H7&&this.$oi.C0t(t)}ge(){this.$oi.ge()}Hm(){this.$oi.hai.Hm()}A_(){return this.c9}gf(){return this.lP.UB.map((t=>t.Uz))}Cqt(t){}async gn(){await this.y_(),this.$oi.gn(),await this.lP.cP(this.sA),this.eai(),this.oai(),this.pqt.ZB(this.$oi.nai)}async y_(){this.$oi.tr(),this.Lqt&&(this.Qo.ge(),this.YHt(),this.be())}constructor(t,i,e,s,n){super(t,i),this.Bz=void 0,this.Rz=void 0,this.iai=t=>{const i=t.Z7,e="itt"===t.type;if(i.Zqt===ss.xFt){const t=this.Qo.we.classList;e?t.add(M5):t.remove(M5)}e?this.ge():this.be()},this.tai=()=>{this.UXt(),this.Qo.m_(),this.Qo.be()},this.o5t=()=>{this.$oi.fai&&(this.Qo.If||this.Qo.p_(),this.be(),this.Qo.ge(),this.YHt())},this.$oi=s,this.lP=e,this.sA=n,this.c9=n.Uz,this.c9.controls=!1,this.Joi(),this.sai(),this.rai()}};var D5=class extends Hi{get pai(){return this.yai}get Mai(){return this.Oc[this.Tai]}set Nai(t){this.Tai=t}get Nai(){return this.Tai}get Zqt(){return this.Kqt}get AYt(){return A.DVt}constructor(t,i,e,s){super(e),this.yai=s,this.Tai=0,this.Kqt=S5(s),this.zqt=t,this.Pqt=i}},I5=class extends xe{get Dai(){return this.Iai}set Dai(t){this.Iai!==t&&(this.Iai=t)}get Ti(){return this.Xl.pai.getHeight()}get ji(){return this.Xl.pai.getWidth()}get sQt(){return this.Dai.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]}get AYt(){return A.DVt}fa(){return XJ(this)}constructor(t,i,e){super(t,i),this.Iai=e}};function S5(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY?ss.xFt:ss.CFt}var E5=class t extends Mo{async Sai(t,i){this.Eai=t,this.bai=i,this.Lai(t),await i,this.kai()}get Cai(){return this.xai}get Oai(){return this.jai}get zai(){return this.Pai}get F7(){return this.bVt}get w0t(){return this.vVt}get Y7(){const t=[];if(this.bVt){const i=this.bVt.Nai;i>=0&&t.push(...this.bVt.Oc.slice(i+1))}for(const i of this.Bai)t.push(...i.Oc);return t}get G7(){return this.Bai}kai(){this.Rai()}Lai(t){t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Uai),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Qai),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Fai),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.Yai),t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.Gai)}Vai(){this.Eai&&(this.Eai.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Uai),this.Eai.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Qai),this.Eai.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Fai),this.Eai.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.Yai),this.Eai.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.Gai))}Rai(){this.xai=this.Wai(this.Hai),this.jai=this.Wai(this.qai).concat(this.Wai(this.Xai)),this.Pai=this.Wai(this.Zai),this.Bai=this.xai.concat(this.jai).concat(this.Pai)}Wai(t){if(!this.Eai)return[];const i=this.Eai.getSlotsByTimePositionClass(t);return this.Kai(i)}Jai(t){if(!this.bVt)return void 0;const i=t.getSlot().getAdInstances().indexOf(t);-1!==i&&(this.bVt.Nai=i);const e=this.bVt.Mai;return e&&(e.Dai=t),e}$ai(t){return Po(this.Bai,(i=>i.pai===t))}Kai(i){return i.map((i=>{const e=i.getTotalDuration(),s=t.tui(i);return new D5(e,e,s,i)}))}static iui(t,i){const e=t.getAdInstances(),s=[];for(const t of e){const e=S5(t.getSlot()),n=new I5(i,e,t),r=[];n.Hqt(t.getAdId(),t.getSlot().getWidth(),t.getSlot().getHeight(),t.getDuration(),r,0),i.Qqt(n),s.push(n)}return s}YWt(){const t=this.w0t;t&&this.Co(new xs(t,this.eui()))}sui(){const t=this.w0t;t&&(this.Co(new gh(t,t.Dai.getPlayheadTime())),this.vVt=void 0)}nui(t){const i=this.F7;i&&(i.iVt=function(t,i,e){void 0===e&&(e=0);let s=0;const n=t.Oc.length;for(let r=i;r<n;r++){const n=t.Oc[r],h=n.ct;if(n){let t=h;r===i&&(t=ks(h-e,0,h)),s+=t}}return s}(i,i.Nai,t))}static tui(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL?-1:t.getTimePosition()}eui(){const t=this.w0t;if(!t)return 0;const i=t.Dai;return i.getPlayheadTime()/i.getDuration()}rui(t){To(this.Bai,t),To(this.xai,t),To(this.jai,t),To(this.Pai,t)}tr(){this.Vai(),this.xai.length=0,this.jai.length=0,this.Pai.length=0,this.Bai.length=0,this.vVt=void 0,this.bVt=void 0,this.Eai=void 0,this.bai=void 0}gn(){this.tr(),this.Vo()}constructor(i,e){super(),this.Us=i,this.Ox=e,this.Hai=tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,this.qai=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,this.Zai=tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL,this.Xai=tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY,this.xai=[],this.jai=[],this.Pai=[],this.Bai=[],this.Uai=i=>{const e=i.slot,s=this.$ai(e);s&&(t.iui(e,s),this.bVt=s,s.Rqt(),this.rui(s),s.Zqt===ss.CFt&&this.Co(new Nu(s)))},this.Qai=()=>{const t=this.F7;t&&t.Zqt===ss.CFt&&(this.Co(new ms(t)),this.Ox.src=""),this.bVt=void 0},this.Fai=t=>{const i=this.Jai(t.adInstance);i&&(this.Co(new Nh(i,i.Dai.getPlayheadTime())),this.vVt=i),t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&(this.Us.style.cursor="pointer",this.Us.addEventListener("click",this.hui))},this.Yai=()=>{this.Us.style.cursor="",this.Us.removeEventListener("click",this.hui)},this.hui=()=>{this.w0t&&this.w0t.Dai.getRendererController().processEvent({name:tv.freewheel.SDK.EVENT_AD_CLICK})},this.Gai=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.sui();break;case tv.freewheel.SDK.EVENT_AD_SKIPPED:this.YWt(),this.sui()}}}},b5=class t extends Mo{oui(){if(this.Tgt){this.Tgt.setAdVolume(L5(this.Pf,this.c_))}}aui(t){this.Tgt=t,this.Lai(t)}Lai(t){t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.uui),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.cui),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.lui),t.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.dui),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.fui),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this._ui)}gui(){const t=this.Tgt;t&&(t.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.uui),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.cui),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.lui),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.dui),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.fui),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this._ui))}p_(){this.gvt.F7&&(this.gvt.F7.pai.resume(),this.Ff=!1)}m_(){this.gvt.F7&&(this.gvt.F7.pai.pause(),this.Ff=!0)}get Mf(){const t=this.gvt.w0t;return t&&(this.Mf=t.Dai.getPlayheadTime()),this.EB}set Mf(t){this.EB=t}get ct(){return this.VL}get wai(){return!!this.gvt&&void 0!==this.gvt.F7}get Ff(){return this.kB}set Ff(t){this.kB=t}get c_(){return this.ck}set c_(t){this.Tgt&&this.Tgt.setAdVolume(t),this.ck=t}get Pf(){return this.Tgt&&(this.wui=0===this.Tgt.getAdVolume()),this.wui}set Pf(t){this.Tgt&&this.Tgt.setAdVolume(L5(t,this.c_)),this.wui=t}get t_(){return this.s0}get If(){return this.y0}set If(t){this.y0=t}get Jf(){return this.M0}static Aui(t){switch(t){case"pause":return tv.freewheel.SDK.VIDEO_STATE_PAUSED;case"playing":return tv.freewheel.SDK.VIDEO_STATE_PLAYING;case"ended":return tv.freewheel.SDK.VIDEO_STATE_COMPLETED;case"stop":return tv.freewheel.SDK.VIDEO_STATE_STOPPED}}vui(i){const e=t.Aui(i);this.Tgt&&e&&this.Tgt.setVideoState(e)}Hm(){const t=this.gvt.w0t;t&&t.Dai.skip()}tr(){if(this.gui(),this.Tgt){this.vui("stop"),this.Tgt.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);const t=this.Tgt.getTemporalSlots();for(const i of t)i.stop();this.Tgt.dispose(),this.Tgt=void 0}this.VL=NaN,this.If=!1,this.M0=ae.aT,this.Mf=0,this.mui=0,this.Ff=!0,void 0!==this.pui&&(m(this.pui),this.pui=void 0)}gn(){this.tr(),this.Vo(),this.gvt.fn("ttt",this.Md),this.Wu.fn(ve.pn,this.cui),this.PWt.removeEventListener("click",this.yui)}constructor(t,i,e,s){super(),this.Qo=t,this.Wu=i,this.gvt=e,this.PWt=s,this.s0=Ai.SB().ks(),this.kB=!0,this.VL=NaN,this.wui=!1,this.y0=!1,this.M0=ae.aT,this.EB=0,this.mui=0,this.uui=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_PAUSE:(function(t){if(!t)return!0;const i=t.Dai,e=i.getPlayheadTime(),s=i.getDuration();return e>=s||rd(s,e)})(this.gvt.w0t)||(this.Ff=!0,this.Co(new ge(this.Mf)));break;case tv.freewheel.SDK.EVENT_AD_RESUME:this.Ff=!1,this.Co(new Zr(this.Mf));break;case tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE:if(this.Tgt){const t=this.Tgt.getAdVolume();0===t?this.wui=!0:this.ck=t,this.Co(new Je(this.Mf,this.c_))}}},this.lui=()=>{this.If=!1;const t=this.Ff;if(this.Ff=!1,t&&(this.Co(new sh(this.Mf)),this.Co(new Zr(this.Mf))),this.M0=ae.cT,this.Mf=0,!this.gvt.w0t)return;const i=this.gvt.w0t.Dai;this.VL=i.getDuration(),this.Co(new jn(this.VL)),this.pui=v((()=>{if(!this.wai)return void this.j$();this.gvt.nui(this.Mf);const t=i.getPlayheadTime();ku(t,this.mui,.001)||this.Co(new Pc(t,void 0)),this.mui=t}),250),this.Tgt&&this.Tgt.setAdVolume(L5(this.Pf,this.c_))},this.yui=()=>{const t=this.gvt.w0t;t&&(t.Zqt===ss.xFt?this.Qo.m_():this.Ff||this.m_())},this.j$=()=>{m(this.pui),this.pui=void 0},this.dui=()=>{this.j$(),this.If=!0},this.fui=()=>{this.vui("pause")},this._ui=()=>{this.vui("playing")},this.Md=t=>{t.Xl.Zqt===ss.CFt&&(this.Ff=!1)},this.cui=()=>{this.Tgt&&this.Tgt.resize(this.Wu.ku,this.Wu._u)},this.ck=t.c_,e.yn("ttt",this.Md),this.Wu.yn(ve.pn,this.cui),this.PWt.addEventListener("click",this.yui)}};function L5(t,i){return t?0:i}var k5=class extends hs{get name(){return xc.Zoi}constructor(){super("A FreeWheel Ad Error occurred")}},C5=class extends hs{get name(){return xc.Xoi}constructor(){super("A FreeWheel Reset Error Occurred")}},x5=0;var O5=class{Mui(t,i,e){t.setNetwork(i.networkId),t.setServer(i.adServerUrl);const s=this.Tgt;if(s.setProfile(i.profile),i.assetId&&i.assetDuration&&s.setVideoAsset(i.assetId,i.assetDuration),i.siteSectionId&&s.setSiteSection(i.siteSectionId),s.registerVideoDisplayBase(e),i.cuePoints&&i.cuePoints.length)for(const t of i.cuePoints)s.addTemporalSlot("cue-"+ ++x5,t.adUnit,t.timeOffset);const n=i.customData;if($l(n)){const t=w.keys(n);for(const i of t){const t=n[i];s.addKeyValue(i,t)}}}async Tui(){this.Tgt.submitRequest(),await this.Nui.Zb}tr(){this.Tgt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Dui),this.Nui.qb(new C5)}constructor(t,i,e,s){this.Tgt=i,this.Dui=t=>{this.Tgt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Dui),t.success?this.Nui.Wb(void 0):this.Nui.qb(new k5)},this.Mui(t,e,s),i.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Dui),this.Nui=new Rs}},j5=class{Iui(){this.Eai.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Qai),this.Eai.removeEventListener(tv.freewheel.SDK.EVENT_ERROR,this.Qai)}get Sui(){return this.Hd.Zb}gxt(){this.Iui(),this.Hd.qb(new C5)}constructor(t){this.Eai=t,this.Qai=t=>{this.Iui(),this.Hd.Wb(void 0)},this.u$t=t=>{this.Iui(),this.Hd.qb(new k5)},this.Hd=new Rs,t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Qai),t.addEventListener(tv.freewheel.SDK.EVENT_ERROR,this.u$t)}},z5=class{TT(t){this.Eai=t}vai(){return this.Eui(this.bui.Cai)}uai(){this.Eui(this.bui.zai)}async Eui(t){if(this.Eai)for(;t.length>0;){this.Lui=new j5(this.Eai);const i=this.Lui.Sui,e=this.bui.F7;e&&e.Zqt===ss.xFt&&e.pai.stop();t.shift().pai.play();try{await i}finally{this.Lui=void 0}}}tr(){this.Lui&&(this.Lui.gxt(),this.Lui=void 0),this.kui=0}gn(){this.Qo.fn(l.Sw,this.Cui)}constructor(t,i){this.Qo=t,this.bui=i,this.kui=0,this.Cui=()=>{const t=this.Qo.Tf();for(const i of this.bui.Oai){const e=new Ai([this.kui,t],[!0,!0]),s=i.pai.getTimePosition();if(e.gr(s))switch(i.pai.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.Eui([i]);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:i.pai.play(),i.pai.setVisible(!0)}}this.kui=t},t.yn(l.Sw,this.Cui)}},P5=0,B5=class t extends Io{static createUniqueDisplayBaseId(){return"theo-freewheel-"+ ++P5}get aai(){return 0!==this.nai.zai.length}get Aai(){return 0!==this.nai.Cai.length}async fKt(){if(!this.vYt)throw new g("Invalid state");const t=this.xui,i=t.newContext();i.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),i.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);const e=new O5(t,i,this.vYt,this.Oui),s=this.nai.Sai(i,e.Tui());this.jui.TT(i),this.hai.aui(i),this.zui=e;try{await s}finally{this.hai.oui(),this.Pui=!0}}get hai(){return this.s$t}get nai(){return this.Bui}get fai(){return this.Pui}static Rui(t,i,e){const s=h.createElement("div");return s.id=e,s.className="theo-freewheel",i.classList.add("theo-freewheel-video"),s.appendChild(i),t.appendChild(s),s}get cai(){return this.jui}Tqt(t){this.hai.vui(t.type)}ge(){this.PWt.style.display="block",this.Ox.style.display="block"}be(){this.PWt.style.display="none",this.Ox.style.display="none"}C0t(t){this.vYt=t}tr(){this.Pui=!1,this.vYt=void 0,this.nai.tr(),this.jui.tr(),this.zui&&(this.zui.tr(),this.zui=void 0),this.hai.tr(),this.Ox.src=""}gn(){this.tr(),this.s$t.gn(),this.jui.gn(),this.nai.gn(),this.PWt.remove(),this.Qo.we.removeChild(this.PWt)}constructor(i,e,n){super(),this.Qo=i,this.Ox=e,this.Pui=!1,this.Oui=t.createUniqueDisplayBaseId(),this.PWt=t.Rui(i.we,e,this.Oui),this.xui=new s.tv.freewheel.SDK.AdManager,this.Bui=new E5(this.PWt,this.Ox),this.jui=new z5(this.Qo,this.nai),this.Qa(this.nai),this.s$t=new b5(i,n,this.nai,this.PWt)}};function R5(t){if(s.tv)switch(t){case"preroll":return tv.freewheel.SDK.ADUNIT_PREROLL;case"midroll":return tv.freewheel.SDK.ADUNIT_MIDROLL;case"postroll":return tv.freewheel.SDK.ADUNIT_POSTROLL;case"overlay":return tv.freewheel.SDK.ADUNIT_OVERLAY}}function U5(t,i,e){if(void 0!==i&&S(i)||i<0||i===1/0)return NaN;switch(t){case"preroll":return 0;case"postroll":return e}return ah(i)}var Q5;function zi(t){return t.navigator&&t.navigator.userAgent||""}ta.Ib.dR(new class{get dqt(){return A.DVt}lR(t){return t.integration===Fr.FREEWHEEL}fqt(t,i,e){if(!Boolean(s.tv&&s.tv.freewheel&&s.tv.freewheel.SDK&&s.tv.freewheel.SDK.AdManager))return;const n=new om(t.Iu,t.Ol,1,[Vt.pm]);n.FB(t.we);const r=n.SP(Vt.pm),h=new B5(t,r.Uz,t.Iu);return new N5(t,i,n,h,r)}LQ(t){const e=Oi(t);Gt(e.cuePoints)||(e.cuePoints=[]);const s=[],n=t.assetDuration||0;for(const t of e.cuePoints){const e=U5(t.adUnit,t.timeOffset,n),r=R5(t.adUnit);!S(e)&&Qs(r)?(t.adUnit=r,t.timeOffset=e,s.push(t)):i.SA("Invalid adUnit/timeOffset combination. Cue was removed.")}return e.cuePoints=s,e}n4(t,i,e,s){e.C0t(t,i,s)}}),function(t){t.Uui="Windows 10",t.Qui="Windows 8.1",t.Fui="Windows 8",t.Yui="Windows 7",t.Gui="Windows Vista",t.Vui="Windows Server 2003",t.Wui="Windows XP",t.Hui="Windows Phone",t.qui="Mac OS X",t.Xui="Mac OS",t.CS="Android",t.OS="iOS",t.Zui="Ubuntu",t.Kui="Linux",t.Jui="Chrome OS"}(Q5||(Q5={}));var F5={"Windows 10":/(Windows 10.0|Windows NT 10.0)/i,"Windows 8.1":/(Windows 8.1|Windows NT 6.3)/i,"Windows 8":/(Windows 8|Windows NT 6.2)/i,"Windows 7":/(Windows 7|Windows NT 6.1)/i,"Windows Vista":/Windows NT 6.0/i,"Windows Server 2003":/Windows NT 5.2/i,"Windows XP":/(Windows NT 5.1|Windows XP)/i,"Windows Phone":/Windows Phone/i,Android:/Android/i,Linux:/(Linux(?!.*Ubuntu)|X11)/,Ubuntu:/Ubuntu/i,iOS:/(iPhone|iPad|iPod)/i,"Mac OS X":/Mac OS X/i,"Mac OS":/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i,"Chrome OS":/CrOS/i};function Pa(t,i){const e=F5[i];return!!e&&Boolean(zi(t).match(e))}function Y5(t){return Pa(t,"Android")}function G5(t){return Pa(t,"Windows Phone")}function V5(t){return Pa(t,"iOS")&&!G5(t)}function W5(t){return Pa(t,"Ubuntu")}var H5,co=/Windows (NT|Phone) ([0-9.]+)/i,q5=/Mac.*?(OS |OS X )(\d+(([_.])\d+)?(([_.])\d+)?)/i,X5={"Windows 10":co,"Windows 8.1":co,"Windows 8":co,"Windows 7":co,"Windows Vista":co,"Windows Server 2003":co,"Windows XP":co,"Windows Phone":/Windows Phone ([0-9.]+)/i,Android:/Android (\d+(([_.])\d+)?(([_.])\d+)?)/i,Linux:void 0,Ubuntu:void 0,iOS:/(iPad|iPhone|iPod).*?(OS |os |OS_)(\d+(([_.])\d+)?(([_.])\d+)?)/i,"Mac OS X":q5,"Mac OS":q5,"Chrome OS":void 0};function Z5(t,i){const e=X5[i];return e?zi(t).match(e):null}function K5(t){return t.split(/[_.]/).map((t=>x(t,10)))}function J5(t){if(function(t){return Boolean(zi(t).match(/Windows/i))}(t)){if(function(t){return Pa(t,"Windows 10")}(t))return"Windows 10";if(G5(t))return"Windows Phone";if(function(t){return Pa(t,"Windows 8.1")}(t))return"Windows 8.1";if(function(t){return Pa(t,"Windows 8")}(t))return"Windows 8";if(function(t){return Pa(t,"Windows 7")}(t))return"Windows 7";if(function(t){return Pa(t,"Windows Vista")}(t))return"Windows Vista";if(function(t){return Pa(t,"Windows Server 2003")}(t))return"Windows Server 2003";if(function(t){return Pa(t,"Windows XP")}(t))return"Windows XP"}else{if(Y5(t))return"Android";if(V5(t))return"iOS";if(function(t){return Pa(t,"Mac OS X")}(t))return"Mac OS X";if(function(t){return Pa(t,"Mac OS")}(t))return"Mac OS";if(W5(t))return"Ubuntu";if(function(t){return Pa(t,"Chrome OS")}(t))return"Chrome OS";if(function(t){return Pa(t,"Linux")&&!W5(t)}(t))return"Linux"}}function $5(t,i){const e=function(t){const i=Z5(t,"Windows 10");return i&&i.length>2?K5(i[2]):void 0}(t),s=function(t){const i=Z5(t,"Mac OS X");return i&&i.length>2?K5(i[2]):void 0}(t),n=function(t){const i=Z5(t,"Android");return i&&i.length>1?K5(i[1]):void 0}(t),r=function(t){const i=Z5(t,"iOS");return i&&i.length>3?K5(i[3]):void 0}(t),h=function(t){const i=Z5(t,"Chrome OS");return i&&i.length>0?K5(i[0]):void 0}(t);return e?e.length>i?e[i]:void 0:s?s.length>i?s[i]:void 0:n?n.length>i?n[i]:void 0:r?r.length>i?r[i]:void 0:h&&h.length>i?h[i]:void 0}function t6(t){const i=function(t){return $5(t,0)}(t),e=function(t){return $5(t,1)}(t),s=function(t){return $5(t,2)}(t);if(void 0!==i)return void 0===e?""+i:void 0===s?i+"."+e:i+"."+e+"."+s}!function(t){t.$ui="Chrome",t.tci="Chrome Mobile",t.ici="Chrome iOS",t.eci="Chromium",t.sci="Firefox",t.nci="Seamonkey",t.rci="Firefox iOS",t.hci="Firefox Mobile",t.aci="Safari",t.uci="Safari Mobile",t.cci="Edge",t.lci="Edge Chromium",t.dci="Edge Mobile",t.fci="IE",t._ci="Opera",t.gci="Opera Mobile",t.wci="Vivaldi",t.Aci="HeadlessChrome",t.vci="Android Browser"}(H5||(H5={}));var i6={Chrome:/Chrome/i,"Chrome Mobile":void 0,"Chrome iOS":/CriOS/i,Chromium:/Chromium/i,HeadlessChrome:/HeadlessChrome/i,Firefox:/Firefox/i,Seamonkey:/Seamonkey/i,"Firefox iOS":/FxiOS/i,Safari:/Safari/i,Edge:/Edge\/\d+/i,"Edge Chromium":/Edg\/\d+/i,IE:/Trident/i,Opera:/Opera|OPR/i,Vivaldi:/Vivaldi/i,"Android Browser":void 0};function ui(t,i){const e=i6[i];return!!e&&Boolean(zi(t).match(e))}function e6(t){return Boolean(zi(t).match(/Mobi/i))}function s6(t){return Boolean(t.chrome&&t.navigator&&t.navigator.vendor&&/google/i.test(t.navigator.vendor))||n6(t)}function n6(t){return ui(t,"Chrome iOS")}function r6(t){return ui(t,"Firefox")&&!o6(t)}function h6(t){return ui(t,"Firefox Mobile")&&!o6(t)&&e6(t)}function o6(t){return ui(t,"Seamonkey")}function a6(t){return ui(t,"Firefox iOS")&&!o6(t)}function u6(t){return ui(t,"Safari")&&!ui(t,"Chrome")&&!fi.ZS}function c6(t){return Boolean(v6(t))}function l6(t){return ui(t,"Edge")}function d6(t){return ui(t,"Edge Chromium")}function f6(t){return ui(t,"IE")}function _6(t){return ui(t,"Vivaldi")}var g6,w6=/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,A6={Chrome:w6,"Chrome Mobile":w6,"Chrome iOS":/CriOS\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,Chromium:w6,HeadlessChrome:w6,Firefox:/Firefox\/([0-9.]+)/i,"Firefox iOS":/FxiOS\/([0-9.]+)/i,Safari:/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/,"Safari Mobile":void 0,Edge:/Edge\/(\d+)/i,"Edge Chromium":/Edg\/(\d+)/i,"Edge Mobile":void 0,IE:/(MSIE |Trident.*?rv:)(\d+)/i,Opera:/(OPR\/(\d+\.\d+))|(Opera(?=.*Version\/((\d+)\.(\d+))))/i,"Opera Mobile":void 0,Vivaldi:/Vivaldi\/((\d+)\.(\d+)\.(\d+)(?:\.(\d+))?)/i,"Android Browser":void 0};function fc(t,i){const e=A6[i];return e?zi(t).match(e):null}function v6(t){return fc(t,"Opera")}function m6(t){const i=function(t){return fc(t,"Firefox")}(t);return i?C(i[1]):0}function p6(t){const i=function(t){return fc(t,"Firefox iOS")}(t);return i?C(i[1].split(".")[0]):0}function y6(t){const i=function(t){return fc(t,"Safari")}(t);return i?C(i[2].split(".")[0]):0}function M6(t){const i=function(t){return fc(t,"Edge")}(t);return i?C(i[1]):0}function T6(t){const i=function(t){return fc(t,"Edge Chromium")}(t);return i?C(i[1]):0}function N6(t){const i=function(t){return fc(t,"IE")}(t);return i?C(i[2]):0}function D6(t){const i=function(t){return fc(t,"Vivaldi")}(t);return i?C(i[1]):0}function I6(t){if(Y5(t))return s6(t)?"Chrome Mobile":r6(t)||h6(t)?"Firefox Mobile":l6(t)?"Edge Mobile":c6(t)?"Opera Mobile":"Android Browser";if(V5(t)){if(s6(t)||n6(t))return"Chrome iOS";if(r6(t)||a6(t))return"Firefox iOS";if(l6(t))return"Edge Mobile";if(u6(t)||function(t){return u6(t)&&e6(t)}(t))return"Safari Mobile";if(c6(t))return"Opera Mobile"}return function(t){return ui(t,"Chromium")}(t)?"Chromium":function(t){return ui(t,"HeadlessChrome")}(t)?"HeadlessChrome":s6(t)?"Chrome":r6(t)?"Firefox":u6(t)?"Safari":l6(t)?"Edge":d6(t)?"Edge Chromium":f6(t)?"IE":c6(t)?"Opera":_6(t)?"Vivaldi":void 0}function S6(t){return _6(t)?D6(t):n6(t)?Number(function(t){const i=A6["Chrome iOS"];return i&&i.exec(zi(t))||[]}(t)[1]):s6(t)?Number(function(t){const i=A6.Chrome;return i&&i.exec(zi(t))||[]}(t)[1]):r6(t)||h6(t)?m6(t):a6(t)?p6(t):u6(t)?y6(t):l6(t)?M6(t):d6(t)?T6(t):f6(t)?N6(t):c6(t)?function(t){const i=v6(t);return i&&i[0].indexOf("Opera")>-1?C(i[5]):i?C(i[2].split(".")[0]):0}(t):void 0}function E6(t){const i=zi(t);return i.match(/CrKey|Roku|AFTS|AppleTV|Nexus Player/i)?"settop":i.match(/Xbox|Playstation|Wii|Nintendo/i)?"console":/(iPad|Tablet|(Android(?!.*Mobi))|(Windows(?!.*Phone)(.*Touch))|Kindle|Playbook|Silk|(Puffin(?!.*(IP|AP|WP))))/i.test(i)?"tablet":/Mobi/.test(i)?"mobile":i.match(/GoogleTV|SmartTV|SMART-TV|Internet TV|NetCast|NETTV|boxee|Kylo|DLNADOC|hbbtv|CE-HTML/i)?"smarttv":i.match(/(nuhk|Googlebot|bingbot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/i)?"searchbot":function(t){return Boolean(I6(t))}(t)?"pc":void 0}!function(t){t.mci="pc",t.pci="console",t.yci="settop",t.Mci="mobile",t.Tci="tablet",t.Nci="smarttv",t.Dci="searchbot"}(g6||(g6={}));var b6=class{bQ(t){this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_ID,t.deviceID||function(){let t=ki.Fb("deviceId");if(t)return t;let i=uD();return ki.Kj("deviceId",i),i}()),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER,"THEOplayer"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER_VERSION,"7.12.0"),this.Ici(t),this.Sci(),this.Eci(t),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_VERSION,"3.0"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_BUILDDATE,"2023-04-17 12:00:00"),t.application&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION,t.application),t.applicationVersion&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION_VERSION,t.applicationVersion),t.userAccountID&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.USER_ACCOUNT_ID,t.userAccountID);const i=t.connectionType;i?this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i):(this.bci(),Dl.connection&&Dl.connection.addEventListener&&Dl.connection.addEventListener("change",this.bci))}Ici(t){this.Lci(t);const i=t.deviceManufacturer||n3&&n3.manufacturer;i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MANUFACTURER,i);const e=t.deviceModel||n3&&n3.model;e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MODEL,e)}Lci(t){const i=t.deviceType||function(){const t=E6(self);switch(t){case g6.pci:return"game-console";case g6.Nci:return"tv";case g6.yci:return"media-streamer";default:return t}}();i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_TYPE,i)}Sci(){const t=I6(self);t&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER,t);const i=S6(self);void 0!==i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER_VERSION,i.toString())}Eci(t){const i=t.deviceOs||J5(self);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS,i);const e=t.deviceOsVersion||t6(self);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS_VERSION,e.toString())}gn(){Dl.connection&&Dl.connection.removeEventListener&&Dl.connection.removeEventListener("change",this.bci)}constructor(t,e){this.empClient=t,this.agama=e,this.bci=()=>{const t=i.iet;switch(t){case"wifi":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,"wlan");break;case"ethernet":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,t);break;case"cellular":const e=function(t){switch(t){case"3g":return"mobile/3G";case"4g":return"mobile/4G";default:return}}(i.tet);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,e)}}}};var L6,eo;Rt(function(t){return i=>class extends i{Nf(t){this.kci&&this.kci.vU(),super.Nf(t)}gn(){this.kci&&this.kci.gn(),super.gn()}constructor(i,e){super(i,e),this.oU=new t,this.kci=new lD(this,this.oU,e)}}}(class extends $N{v_(t){this.Cci=t,this.xci&&(this.oU=function(t,i){const e=function(t,i){switch(i){case"info":return t.LogLevel.INFO;case"debug":return t.LogLevel.DEBUG;case"warning":return t.LogLevel.WARNING;case"error":return t.LogLevel.ERROR;default:return t.LogLevel.FATAL}}(i,t.logLevel);i.setLogLevel(e);const s=new i.EMPClient(t.config);return function(t,i){return t.setExternalConfig(i.config),t}(s,t)}(t,this.xci),this.oU&&(this.Oci=new b6(this.oU,this.xci),this.bo=!0))}EQ(){return this.xci||console.warn("Please load the Agama Library (empclient.min.js) in order to use the integration"),!!this.xci}IQ(){return this.bo}eQ(t,i){if(this.oU&&this.xci)switch(t){case Au.NR:this.oU.setMeasurement(this.xci.Measurement.BUFFER_LENGTH,i);break;case Au.DR:this.oU.setMeasurement(this.xci.Measurement.BYTES_RECEIVED,i);break;case Au.SR:this.oU.setMeasurement(this.xci.Measurement.SEGMENT_PROFILE_BITRATE,i);break;case Au.ER:this.oU.setMeasurement(this.xci.Measurement.VIDEO_PROFILE_BITRATE,i);break;case Au.IR:this.oU.setMeasurement(this.xci.Measurement.SEGMENT_READ_BITRATE,i);break;case Au.vR:this.oU.setMeasurement(this.xci.Measurement.HTTP_REQUEST_STATUS_CODE_1XX,i);break;case Au.mR:this.oU.setMeasurement(this.xci.Measurement.HTTP_REQUEST_STATUS_CODE_2XX,i);break;case Au.pR:this.oU.setMeasurement(this.xci.Measurement.HTTP_REQUEST_STATUS_CODE_3XX,i);break;case Au.yR:this.oU.setMeasurement(this.xci.Measurement.HTTP_REQUEST_STATUS_CODE_4XX,i);break;case Au.MR:this.oU.setMeasurement(this.xci.Measurement.HTTP_REQUEST_STATUS_CODE_5XX,i);break;case Au.LR:this.oU.setMeasurement(this.xci.Measurement.PLAYBACK_POSITION,i);break;case Au.kR:this.oU.setMeasurement(this.xci.Measurement.NUMBER_OF_FRAMES_DECODED,i);break;case Au.bR:this.oU.setMeasurement(this.xci.Measurement.NUMBER_OF_FRAMES_DROPPED,i)}}PU(t,i){if(this.oU&&this.xci)switch(t){case Go.PR:this.oU.setSessionMetadata(this.xci.SessionMetadata.ASSET_DURATION,i);break;case Go.zR:this.oU.setSessionMetadata(this.xci.SessionMetadata.MANIFEST_URI,i);break;case Go.RR:this.oU.setSessionMetadata(this.xci.SessionMetadata.NUMBER_OF_CONTENT_PROFILES,i);break;case Go.FR:this.oU.setSessionMetadata(this.xci.SessionMetadata.SERVICE_NAME,i);break;case Go.UR:this.oU.setSessionMetadata(this.xci.SessionMetadata.CDN,i);break;case Go.QR:this.oU.setSessionMetadata(this.xci.SessionMetadata.CONTENT_TITLE,i);break;case Go.YR:this.oU.setSessionMetadata(this.xci.SessionMetadata.CONTENT_TYPE,i);break;case Go.GR:this.oU.setSessionMetadata(this.xci.SessionMetadata.CONTENT_DESCRIPTION,i)}}bQ(){this.Oci&&this.Cci&&this.Oci.bQ(this.Cci)}SQ(t,i){this.xci&&this.oU&&(this.lQ(),function(t,i,e,s){const n=cD(t,e,s);i.abrSession(n,t.ViewState.INITIAL_BUFFERING)}(this.xci,this.oU,t,i),this.jci=!0)}gn(){this.Oci&&this.Oci.gn(),this.zci(XN.WR),this.oU=void 0}TU(t){this.Pci(t)}IU(t,i){this.oU&&this.oU.event(t.code,i)}lQ(){this.oU&&this.jci&&(this.oU.exitSession(),this.jci=!1)}zci(t){if(this.oU&&this.xci&&(this.lQ(),t===XN.WR))this.oU.shutdown(this.xci.ShutdownType.NORMAL_SHUTDOWN)}NU(t,i,e){this.Pci(t,i,e)}Pci(t,i,e){if(this.oU&&this.xci)switch(t){case wc.Rw:this.Bci(this.xci.ViewState.PLAYING,i,e);break;case wc.gR:this.Bci(this.xci.ViewState.FAILED,i,e);break;case wc.wR:this.Bci(this.xci.ViewState.INITIAL_BUFFERING,i,e);break;case wc.Qw:this.Bci(this.xci.ViewState.PAUSED,i,e);break;case wc.fR:this.Bci(this.xci.ViewState.SEEK,i,e);break;case wc._R:this.Bci(this.xci.ViewState.STALLED,i,e);break;case wc.AR:this.Bci(this.xci.ViewState.NO_ACCESS,i,e)}}Bci(t,i,e){if(this.oU)if(i){const s=function(t){return t||""}(e);this.oU.viewStateExtended(t,i.code,s)}else this.oU.viewStateChanged(t)}constructor(){super(),this.bo=!1,this.jci=!1,this.xci=_s.Agama}}),sa.x7),function(t){t.PLAY_ALL="play-all",t.PLAY_NONE="play-none",t.PLAY_LAST="play-last"}(L6||(L6={})),function(t){t.VOD="vod",t.LIVE="live"}(eo||(eo={}));var k6=class{get va(){return this.Rci.va}get lt(){return this.Bz}get bf(){return this.Rz}Uci(t){this.Bz=Ki(t),this.Rz=t,this.Qo.Co(new Dr(t))}ga(t){this.Qci.tr(),this.Fci.Vb(),this.Yci=!1,this.Qo.Gci(t)}async Att(t,i){if(this.Vci.tr(),this.Yci=!1,!t||!function(t){return t.sources.some((t=>t.integration===ps.VERIZON_MEDIA))}(t))return await this.Qo.Wci(t,i);try{this.Hci=await this.qci.ghi(t),await this.Qo.Wci(this.Hci,i)}catch(t){this.Uci(new $i(Ui.MANIFEST_LOAD_ERROR,t.message,t))}}gn(){this.V2.qd(),this.Xci.qd(),this.Qo.fn(l.Hg,this.Jsi),this.Qo.fn(l.jh,this.Pei),this.Qo.fn(l.Sw,this.Yhi),this.Qo.fn(l.Jg,this.Fsi),this.Qo.fn(he.zw,this.jd);for(const t of this.Qci.nVt.Gu)t.fn("Zci",this.Kci),t.fn("ttt",this.Wsi),t.fn("J7",this.Hsi);this.Qci.nVt.fn("X7",this.Jci),this.Qci.nVt.fn("q7",this.$ci),this.Qci.gn(),this.RWt&&(this.RWt.Ud(),this.RWt=void 0),this.Yci=!1}async fetchAssetInfo(t){if(t&&t.integrationData)try{const i=await this.tli.zyt(t.integrationData.source.prefix,t.integrationData.source.id,this.Xci.Wd,t.integrationData.preplayResponse.sid);this.Rci.ili(i),this.Fci.eli(i,this.Qci.nVt.Gu)}catch(t){0}}sli(t){this.Qci.nli(t),this.Qci.U7.forEach((i=>i.rli(t))),this.Qci.hli(this.Qo.i_()),this.BWt()}Nf(t){this.Qci.F7||(this.V2.qd(),this.V2=new na,D(this.ahi(t,this.V2.Wd)))}async ahi(t,i){if(Bo(i),t<this.Qo.Tf())return void this.oli(t);let e=[];switch(this.Qci.ali){case L6.PLAY_ALL:e=this.Qci.uli(this.Qo.Tf(),t),await this.cli(t,e,i);break;case L6.PLAY_LAST:const s=this.Qci.uli(this.Qo.Tf(),t).pop();e=s?[s]:[],await this.cli(t,e,i);break;case L6.PLAY_NONE:this.lli(t)}}oli(t){const i=Po(this.Qci.nVt.Gu,(i=>i.Bht.gr(t)));i?this.Qo.dli(i.GT):this.Qo.dli(t)}lli(t){const i=this.Qci.uli(this.Qo.Tf(),t).pop();i&&i.Bht.gr(t)?this.Qo.dli(i.VT):this.Qo.dli(t)}async cli(t,i,e){for(const t of i)await this.fli(t,e);const s=i[i.length-1];s&&s.Bht.gr(t)?this.Qo.Tf()<t&&this.Qo.dli(s.VT):this.Qo.dli(t)}async fli(t,i){t.fn("Zci",this.Kci);const e=Promise.race([t.lf("J7",i),t.lf("Zci",i)]);this.sli(this.Qo.Tf()),t.ro||this.Qo.dli(t.GT),await e,t.yn("Zci",this.Kci)}BWt(){const t=Po(this.Qci.U7,(t=>t._li.length>0));if(t){const i=t._li[0];this.RWt||(this.RWt=new ju(this.Qo.we),this.RWt.yn("clickstart",this.gli)),this.RWt.HVt=i}else this.RWt&&(this.RWt.Ud(),this.RWt=void 0)}constructor(t,i,e,s,n,r,h){this.Qo=t,this.Vci=i,this.qci=e,this.Qci=s,this.Rci=n,this.tli=r,this.Fci=h,this.Bz=void 0,this.Rz=void 0,this.V2=new na,this.Xci=new na,this.wli=void 0,this.Yci=!1,this.RWt=void 0,this.Jsi=t=>{const i=t.currentSource;if(!i||!i.integrationData)return;const{preplayResponse:e,source:s}=i.integrationData;this.Rci.Ali(e),e&&e.type===eo.VOD&&e.ads&&this.Qci.eli(e.ads),this.Vci.vli=i.integrationData,s.assetInfo&&D(this.fetchAssetInfo(i))},this.Pei=()=>{this.Yci=!0},this.Yhi=()=>{this.Yci&&this.sli(this.Qo.Tf())},this.Fsi=()=>{this.Yci&&(this.sli(1/0),this.Yci=!1)},this.jd=()=>{D(this.Vci.Cn())},this.Kci=t=>{this.V2.qd(),this.V2=new na,D(this.ahi(t.Xl.VT,this.V2.Wd))},this.Wsi=()=>{1!==this.Qo.Gf&&(this.wli=this.Qo.Gf,this.Qo.Gf=1)},this.Hsi=()=>{void 0!==this.wli&&(this.Qo.Gf=this.wli,this.wli=void 0)},this.Jci=t=>{t.Xl.yn("Zci",this.Kci),t.Xl.yn("ttt",this.Wsi),t.Xl.yn("J7",this.Hsi)},this.$ci=t=>{t.Xl.fn("Zci",this.Kci),t.Xl.fn("ttt",this.Wsi),t.Xl.fn("J7",this.Hsi)},this.gli=()=>{this.Qo.m_()},this.Qo.yn(l.Hg,this.Jsi),this.Qo.yn(l.jh,this.Pei),this.Qo.yn(l.Sw,this.Yhi),this.Qo.yn(l.Jg,this.Fsi),this.Qo.yn(he.zw,this.jd),this.Qci.nVt.yn("X7",this.Jci),this.Qci.nVt.yn("q7",this.$ci)}};var C6,x6=_t({breaksIndex:Ps,adsIndex:Ps,startTime:Ps,endTime:Ps}),O6=_t({index:Ps,timeOffset:Ps}),j6=_t({duration:Ps,apiFramework:_e($,jT),creative:$,mimeType:$,width:Ps,height:Ps,companions:mi(function(t){return new GT(t)}((()=>j6))),extensions:_e(Ln,mi(Cu)),fw_parameters:_e(Ln,YT($)),events:YT(mi($))}),z6=_t({type:Qt(["linear","nonlinear"]),position:Qt(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:Ps,duration:Ps,ads:mi(j6),events:YT(mi($))}),P6=_t({breaks:mi(z6),breakOffsets:mi(O6),placeholderOffsets:mi(x6)}),B6=_t({fairplayCertificateURL:_e(Ln,$),widevineLicenseURL:_e(Ln,$),playreadyLicenseURL:_e(Ln,$)}),R6={type:Qt(BT(eo)),playURL:$,prefix:$,sid:$,drm:_e(Ln,B6)},U6=_t(Tt({},R6,{type:Qt([eo.VOD]),ads:P6,interstitialURL:_e($,jT,Ln)})),Q6=_e(U6,_t(Tt({},R6,{type:Qt([eo.LIVE])}))),F6=$,Y6=_t({userId:$,externalId:_e($,mi($))});!function(t){t[t.AD_IMPRESSIONS=1]="AD_IMPRESSIONS",t[t.FW_VIDEO_VIEWS=2]="FW_VIDEO_VIEWS",t[t.LINEAR_AD_DATA=4]="LINEAR_AD_DATA"}(C6||(C6={}));var G6=class{async zyt(t){try{return this.mli(t)}catch(t){throw t}}async mli(t){const e=await async function(t){const e=t.prefix,s=V6[t.assetType],n=function(t){if(mi(F6).bj(t))return 1===t.length?t[0]:t.join(",")+"/multiple";if(F6.bj(t))return t;if(Y6.bj(t)&&Gt(t.externalId))return 1===t.externalId.length?"ext/"+t.userId+"/"+t.externalId[0]:"ext/"+t.userId+"/"+t.externalId.join(",")+"/multiple";if(Y6.bj(t))return"ext/"+t.userId+"/"+t.externalId;throw new b("Invalid asset id")}(t.id),r=await async function(t){if(t&&await i.RC())return{rmt:"fps",manifest:"m3u8"};if(t&&await i.OC())return{rmt:"wv",manifest:"mpd"};if(t&&await i.BC())return{rmt:"pr",manifest:"mpd"};return{}}(t.contentProtected),h=function(t,i){const e=W6(t,i);return e?{"ad.cping":"1","ad.pingf":String(e)}:{}}(t.assetType,t.ping);let o={};Gt(t.preplayParameters)?t.preplayParameters.forEach((t=>{o[t[0]]=t[1]})):o=t.preplayParameters;const a=e+"/preplay/"+s+n+".json";return ba(a,Tt({v:"2"},o,r,h,o))}(t),s=this.NS.SI({dS:Ys.GET,zu:e,fS:Qv.GI}),n=await s,r=Tt({},await n.zm(),{type:t.assetType===Wa.ASSET?eo.VOD:eo.LIVE});return Q6.bj(r)||Q6.Cj(r,"PreplayResponse"),r}constructor(t){this.NS=t}},V6={[Wa.ASSET]:"",[Wa.CHANNEL]:"channel/",[Wa.EVENT]:"event/"};function W6(t,i){const e=t!==Wa.ASSET;return(!e&&i.adImpressions?1:0)+(!e&&i.freeWheelVideoViews?2:0)+(e&&i.linearAdData?4:0)}var _c,H6=_t({ad_id:$,apiFramework:_e(jT,$),companions:mi(Cu),creative:$,duration:Ps,mimeType:$,height:Ps,width:Ps,extensions:_e(Ln,mi(Cu)),fw_parameters:_e(Ln,YT($))}),q6=_t({breakId:$,ads:mi(H6),type:Qt(["linear","nonlinear"]),position:Qt(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:Ps,duration:Ps,height:_e(Ln,Ps),width:_e(Ln,Ps),events:YT(mi($))}),X6=_t({breaks:mi(q6)}),Z6=_t({next_time:Ps,ads:_e(Ln,X6),extensions:_e(Ln,mi(Cu)),error:_e(Ln,$),currentBreakEnd:_e(Ln,Ps)});!function(t){t.Qyt="start",t.fR="seek"}(_c||(_c={}));var K6=class{async zyt(t,i){try{return this.mli(t,i)}catch(t){throw t}}async mli(t,i){const e=function(t){const i={v:"3",pt:String(t.currentTime)};(function(t){return void 0!==t.seekTime})(t)&&t.hasFreeWheelVideoViews&&(i.ft=String(t.seekTime));t.event&&(i.ev=t.event);return ba(t.zonePrefix+"/session/ping/"+t.sessionId+".json",Tt({},i))}(t),s=this.NS.SI({dS:Ys.GET,zu:e,fS:Qv.GI,Wd:i}),n=await s,r=await n.zm();return Z6.bj(r)||Z6.Cj(r,"PingResponse"),r}constructor(t){this.NS=t}};var J6=class extends yo{get bI(){return this.LI}fa(){return new $6(this.LI)}constructor(t){super("yli"),this.LI=t}},$6=class extends wn{constructor(t){super("pingresponse"),this.response=t}},t8=class extends yo{get lt(){return this.Bz}fa(){return new i8(this.Bz)}constructor(t){super("Mli"),this.Bz=t}},i8=class extends wn{constructor(t){super("pingerror"),this.error=t}},e8=class extends xd{set vli(t){this.Tli=t}get Nli(){return this.Dli}async Cn(){const t=this.Tli;if(!t)return;0!==W6(t.source.assetType,t.source.ping)&&(this.Dli=this.Qo.i_().start(0),await this.Ili(_c.Qyt),this.Qo.yn("timeupdate",this.Sli),this.Qo.yn("seeking",this.Eli))}async Ili(t,i){const e=this.Tli.preplayResponse,s={};if(S(this.Dli))return void 0;if(Yt(this.bli)&&rd(this.bli,this.Qo.Tf()-this.Dli))return;void 0!==i&&(s.seekTime=i),void 0!==t&&(s.event=t);let n,r=this.Qo.Tf()-this.Dli;t===_c.Qyt?r=0:t!==_c.fR&&this.Lli&&(r=_.min(r,this.Lli)),this.bli=r;try{var h;const t=await this.kli.zyt(Tt({zonePrefix:e.prefix,sessionId:e.sid,currentTime:r,hasFreeWheelVideoViews:null==(h=this.Tli)?void 0:h.source.ping.freeWheelVideoViews},s),this.Tx.Wd);this.Co(new J6(t)),this.Lli=-1!==t.next_time?t.next_time:void 0,n=t.error}catch(t){Ho(t)||(n=t.message)}finally{n&&this.Co(new t8(n))}}tr(){this.Lli=void 0,this.Tli=void 0,this.Dli=NaN,this.Cli=!1,this.xli=NaN,this.bli=void 0,this.Qo.fn("seeking",this.Eli),this.Qo.fn("timeupdate",this.Sli),this.Oli()}Oli(){this.Tx.qd(),this.Tx=new na}gn(){this.tr()}constructor(t,i){super(),this.kli=t,this.Qo=i,this.Dli=NaN,this.Lli=void 0,this.Cli=!1,this.xli=NaN,this.Tx=new na,this.bli=void 0,this.Sli=async()=>{const t=this.Qo.Tf();if(this.xli=t,this.Cli||Qo(this.Lli)||S(this.Dli))return;this.Dli+this.Lli<=t&&(this.Cli=!0,await this.Ili(),this.Cli=!1)},this.Eli=()=>{if(this.Qo.Tf()===this.Dli)return;this.Cli&&this.Oli(),this.xli=this.Qo.Tf();const t=this.xli-(this.Dli||0);S(t)?D(this.Ili(_c.fR,0)):D(this.Ili(_c.fR,t))}}},s8=class{async ghi(t){const i=[];for(const e of t.sources)if(n8(e))try{const s=h8({source:e,preplayResponse:await this.jli.zyt(e)},t,this.LH);s.src&&(s.src=ba(s.src,e.playbackUrlParameters)),i.push(s)}catch(t){0}else i.push(e);if(0!==t.sources.length&&0===i.length)throw new g("Fatal: unable to play VerizonMediaSources.");return Tt({},t,{sources:i})}constructor(t,i){this.jli=t,this.LH=i}};function n8(t){return"verizon-media"===t.integration}function r8(t){if(t.sources)if(Gt(t.sources)){for(const i of t.sources)if(!Qs(i)&&"verizon-media"===i.integration)return!0}else if(!Qs(t.sources))return"verizon-media"===t.sources.integration;return!1}function h8(t,i,e){const s=t.preplayResponse;let n;t.source.contentProtected&&s.drm&&(n={integration:"uplynk"},s.drm.fairplayCertificateURL&&(n.fairplay={certificateURL:s.drm.fairplayCertificateURL}),s.drm.widevineLicenseURL&&(n.widevine={licenseAcquisitionURL:s.drm.widevineLicenseURL}),s.drm.playreadyLicenseURL&&(n.playready={licenseAcquisitionURL:s.drm.playreadyLicenseURL}));const r=Ia({src:s.playURL,contentProtection:n,useNativePlayback:t.source.useNativePlayback,hls:t.source.hls,dash:t.source.dash,seamlessSwitchStrategy:t.source.seamlessSwitchStrategy},i,e);return r.integrationData=t,r}var o8=class extends yo{fa(){return new a8(this.Xl.va)}constructor(t,i){super("ttt"),this.Xl=t,this.uD=i}},a8=class extends wn{constructor(t){super("adbreakbegin"),this.adBreak=t}},u8=class extends yo{fa(){return new c8(this.Xl.va)}constructor(t,i){super("J7"),this.Xl=t,this.uD=i}},c8=class extends wn{constructor(t){super("adbreakend"),this.adBreak=t}},l8=class extends yo{fa(){return new d8(this.Xl.va)}constructor(t){super("Zci"),this.Xl=t}},d8=class extends wn{constructor(t){super("adbreakskip"),this.adBreak=t}};var f8=class extends yo{fa(){return new _8(this.Xl.va)}constructor(t){super("uXt"),this.Xl=t}},_8=class extends wn{constructor(t){super("updateadbreak"),this.adBreak=t}},g8=class extends Mo{get va(){return this.Xa||(this.Xa=function(t){let i;const e={get startTime(){return t.GT},get endTime(){return t.VT},get duration(){return t.ct},get ads(){return t.Oc.va},get skipOffset(){return t.xQt},set skipOffset(i){t.xQt=i},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Ro(t,e),e}(this)),this.Xa}get GT(){return this.tN}get VT(){return this.VL?this.tN+this.VL:void 0}zli(t){this.VL=t-this.GT;for(const i of this.Oc.Gu)i.GT>t&&this.Oc.ET(i);this.Co(new f8(this))}get ct(){return this.VL}get Bht(){const t=this.VT;return Yt(t)?new Ai([this.GT,t]):Ai.SB()}get Oc(){return this.Ic}get Pli(){return this.Bli}get ro(){return this.ho}get xQt(){return this.Zhi?-1:this.OQt}set xQt(t){this.Zhi||(this.OQt=t)}uat(t){return t>=this.GT&&(Qo(this.ct)||t<=this.GT+this.ct)}Rli(t){return-1!==this.xQt&&(!!Yt(this.VT)&&t-this.GT>=this.xQt)}Hm(){this.Ic.Gu.forEach((t=>t.Hm())),this.Co(new l8(this))}Uli(t){const i=Yt(this.VT)&&t>=this.VT,e=this.GT<=t&&!i&&!this.ro,s=this.ro&&this.VT&&t>=this.VT;e&&(this.ho=!0,this.Co(new o8(this,this.GT))),this.Ic.Gu.forEach((i=>i.Uli(t))),s&&(this.Bli=!0,this.ho=!1,this.Co(new u8(this,this.VT)))}constructor(t,i,e,s,n){super(),this.tN=t,this.VL=i,this.Ic=e,this.Zhi=s,this.ho=!1,this.Bli=!1,this.OQt=n}},w8=class extends yo{fa(){return new A8(this.Z7.va)}constructor(t,i){super("itt"),this.Z7=t,this.uD=i}},A8=class extends wn{constructor(t){super("adbegin"),this.ad=t}},v8=class extends yo{fa(){return new m8(this.Z7.va)}constructor(t,i){super("ett"),this.Z7=t,this.uD=i}},m8=class extends wn{constructor(t){super("adend"),this.ad=t}},p8=class extends yo{fa(){return new y8(this.Z7.va)}constructor(t){super("Qli"),this.Z7=t}},y8=class extends wn{constructor(t){super("removead"),this.ad=t}},M8=class extends c0{n2t(t){}a2t(t){this.Co(new p8(t))}constructor(){super()}},T8=class extends yo{fa(){return new N8(this.Z7.va)}constructor(t){super("lXt"),this.Z7=t}},N8=class extends wn{constructor(t){super("adfirstquartile"),this.ad=t}},D8=class extends yo{fa(){return new I8(this.Z7.va)}constructor(t){super("dXt"),this.Z7=t}},I8=class extends wn{constructor(t){super("admidpoint"),this.ad=t}},S8=class extends yo{fa(){return new E8(this.Z7.va)}constructor(t){super("fXt"),this.Z7=t}},E8=class extends wn{constructor(t){super("adthirdquartile"),this.ad=t}},b8=class extends yo{fa(){return new L8(this.Z7.va)}constructor(t){super("Fli"),this.Z7=t}},L8=class extends wn{constructor(t){super("adcomplete"),this.ad=t}};var k8,C8,x8,O8=class t extends Mo{static Yli(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.Yli(i,e))),e.extensions,e.fw_parameters,e.events,void 0)}static Gli(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.Gli(i,e))),e.extensions,e.fw_parameters,void 0,e.ad_id)}get va(){return this.Xa||(this.Xa=function(t){let i;const e={get apiFramework(){return t.WUt},get companions(){return t.zUt.va},get creative(){return t.Vli},get duration(){return t.ct},get endTime(){return t.VT},get events(){return t.xF},get extensions(){return t.Wli},get freeWheelParameters(){return t.Hli},get height(){return t.Ti},get mimeType(){return t.CF},get startTime(){return t.GT},get width(){return t.ji},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Ro(t,e),e}(this)),this.Xa}get GT(){return this.tN}get VT(){return this.tN+this.VL}get ct(){return this.VL}get WUt(){return this.HUt}get Vli(){return this.qli}get CF(){return this.qF}get ji(){return this.dk}get Ti(){return this.fk}get xF(){return this.HB}get zUt(){return this.PUt}get Wli(){return this.Xli}get Hli(){return this.Zli}get ro(){return this.ho}get _li(){var t;return null!=(t=this.HB.clickthroughs)?t:[]}Uli(t){const i=this.GT<=t&&t<this.VT,e=i&&!this.ro,s=!i&&this.ro;e&&(this.Kli=!1,this.Jli=!1,this.$li=!1,this.tdi=!1,this.ho=!0,this.Co(new w8(this,this.GT))),s&&(this.ho=!1,this.Co(new v8(this,this.VT)))}rli(t){const i=(t-this.GT)/this.ct;!this.Kli&&i>=.25&&(this.Kli=!0,this.Co(new T8(this))),!this.Jli&&i>=.5&&(this.Jli=!0,this.Co(new D8(this))),!this.$li&&i>=.75&&(this.$li=!0,this.Co(new S8(this))),!this.tdi&&i>=.9999&&(this.tdi=!0,this.Co(new b8(this)))}Hm(){this.Kli=!0,this.Jli=!0,this.$li=!0,this.tdi=!0}gn(){this.fn("itt",this.idi),this.fn("ett",this.edi)}constructor(t,i,e,s,n,r,h,o,a=[],u={},c={},l){super(),this.tN=t,this.VL=i,this.HUt=e,this.qli=s,this.qF=n,this.dk=r,this.fk=h,this.Xli=a,this.Zli=u,this.HB=c,this.MQt=l,this.PUt=new M8,this.ho=!1,this.Kli=!1,this.Jli=!1,this.$li=!1,this.tdi=!1,this.idi=()=>this.rli(this.tN),this.edi=()=>this.rli(this.VT),this.PUt.r2t(o),this.yn("itt",this.idi),this.yn("ett",this.edi)}},j8=class extends yo{fa(){return new z8(this.Xl.va)}constructor(t){super("X7"),this.Xl=t}},z8=class extends wn{constructor(t){super("addadbreak"),this.adBreak=t}},P8=class extends yo{fa(){return new B8(this.Xl.va)}constructor(t){super("q7"),this.Xl=t}},B8=class extends wn{constructor(t){super("removeadbreak"),this.adBreak=t}},R8=class extends c0{n2t(t){this.Co(new j8(t))}a2t(t){this.Co(new P8(t))}constructor(){super()}},U8=class{get va(){return this.Xa||(this.Xa=function(t){return{get adBreaks(){return t.nVt.va},get currentAdBreak(){if(t.F7)return t.F7.va},get currentAds(){return t.F7?t.F7.Oc.va:(new M8).va},skip(){t.Hm()}}}(this)),this.Xa}get nVt(){return this.LVt}get F7(){return Po(this.LVt.Gu,(t=>t.ro))}get U7(){return this.F7?this.F7.Oc.Gu.filter((t=>t.ro)):[]}get sdi(){if(0===this.nVt.U||0===this.ndi.i_().length)return;const t=this.ndi.i_().end(this.ndi.i_().length-1);return Po(this.nVt.Gu,(i=>i.uat(t)))}get ali(){return this.rdi}hli(t){if(0===t.length)return;const i=Ai.xn(t);for(const t of this.LVt.Gu.slice())Yt(t.VT)&&i.Cn(0)>t.VT&&this.LVt.ET(t)}eli(t){const i=!function(t){return Yt(t.breakOffsets)}(t),e=i?this.Vci.Nli:0;for(const s of t.breaks){if(0===s.ads.length)continue;let t=s.timeOffset+e;const n=new M8;let r=0;for(const e of s.ads){const s=i?O8.Gli(t,e):O8.Yli(t,e);n.ST(s),t+=s.ct,r+=s.ct}const h=s.timeOffset+e,o=i?void 0:s.duration,a=new g8(h,o,n,i,this.hdi);i&&this.odi.push({IUt:a,NSt:h+r}),this.LVt.ST(a)}}adi(t){const i=this.sdi;i&&i.zli(t+this.Vci.Nli)}nli(t){this.udi=t,this.LVt.Gu.forEach((i=>i.Uli(t)))}Hm(){const t=this.udi,i=this.F7;t&&i&&i.Rli(t)&&i.Hm()}uli(t,i){let e=[];for(const s of this.nVt.Gu)!s.Pli&&s.GT>=t&&s.GT<i&&e.push(s);return e}gn(){this.ndi.fn("timeupdate",this.cdi),this.Vci.fn("yli",this.ldi)}tr(){for(const t of this.nVt.Gu){for(const i of t.Oc.Gu)i.Vo();t.Vo()}this.nVt.Vb(),this.udi=void 0,this.odi=[]}constructor(t,i,e,s){this.odi=[],this.ldi=t=>{t.bI.ads&&this.eli(t.bI.ads),t.bI.currentBreakEnd&&this.adi(t.bI.currentBreakEnd)},this.cdi=t=>{if(0===this.odi.length||0===this.ndi.i_().length)return;const i=this.ndi.i_().end(this.ndi.i_().length-1);for(const t of this.odi.slice())Yt(t.IUt.ct)?To(this.odi,t):t.NSt<i&&(t.IUt.zli(t.NSt),To(this.odi,t))},this.ndi=t,this.Vci=i,this.LVt=new R8,this.hdi=e,this.rdi=s,t.yn("timeupdate",this.cdi),this.Vci.yn("yli",this.ldi)}};!function(t){t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.G=1]="G",t[t.PG=2]="PG",t[t.PG_13=3]="PG_13",t[t.R=4]="R",t[t.NC_17=5]="NC_17",t[t.X=6]="X",t[t.NOT_RATED=7]="NOT_RATED"}(k8||(k8={})),function(t){t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.TV_Y=1]="TV_Y",t[t.TV_Y7=2]="TV_Y7",t[t.TV_G=3]="TV_G",t[t.TV_PG=4]="TV_PG",t[t.TV_14=5]="TV_14",t[t.TV_MA=6]="TV_MA",t[t.NOT_RATED=7]="NOT_RATED"}(C8||(C8={})),function(t){t[t.ADULT_LANGUAGE=1]="ADULT_LANGUAGE",t[t.SEXUAL_SITUATIONS=2]="SEXUAL_SITUATIONS",t[t.VIOLENCE=4]="VIOLENCE",t[t.DRUGS=8]="DRUGS"}(x8||(x8={}));var Q8=class t{static ddi(i,e,s){const n=new pl(i.rating_flags);return new t(e,s,i.duration,Boolean(i.audio_only),i.boundary_details,Boolean(i.error),i.tv_rating,i.max_slice,i.thumb_prefix,i.slice_dur,i.movie_rating,i.owner,i.meta,i.rates,i.thumbs,i.poster_url,i.default_poster_url,i.desc,n.Cm(1),n.Cm(2),n.Cm(4),n.Cm(8),i.external_id,Boolean(i.is_ad),i.asset)}get va(){return this.Xa||(this.Xa=function(t){return{startTime:t.GT,endTime:t.VT,duration:t.ct,audioOnly:t.fdi,boundaryDetails:t._di,error:t.lt,tvRating:t.gdi,maxSlice:t.wdi,thumbPrefix:t.Adi,sliceDuration:t.vdi,movieRating:t.mdi,ownerId:t.pdi,metadata:t.XD,rates:t.ydi,thumbnailResolutions:t.Mdi,posterUrl:t.Tdi,defaultPosterUrl:t.Ndi,description:t.$p,hasAdultLanguage:t.Ddi,hasSexualSituations:t.Idi,hasViolence:t.Sdi,hasDrugSituations:t.Edi,externalId:t.bdi,isAd:t.Ldi,assetId:t.kdi}}(this)),this.Xa}constructor(t,i,e,s,n,r,h,o,a,u,c,l,d,f,_,g,w,A,v,m,p,y,M,T,N){this.GT=t,this.VT=i,this.ct=e,this.fdi=s,this._di=n,this.lt=r,this.gdi=h,this.wdi=o,this.Adi=a,this.vdi=u,this.mdi=c,this.pdi=l,this.XD=d,this.ydi=f,this.Mdi=_,this.Tdi=g,this.Ndi=w,this.$p=A,this.Ddi=v,this.Idi=m,this.Sdi=p,this.Edi=y,this.bdi=M,this.Ldi=T,this.kdi=N}};var F8=_t({duration:Ps,offset:Ps}),Y8=_t({c3:F8}),G8=_t({c7:F8}),V8=_t({halftime:F8}),W8=Qt(BT(C8)),H8=Qt(BT(k8)),q8=_t({width:_e(Ln,Ps),prefix:$,bw:Ps,bh:Ps,height:_e(Ln,Ps)}),X8=_t({audio_only:Ps,boundary_details:_e(Ln,mi(_e(Y8,G8,V8))),error:Ps,tv_rating:W8,max_slice:Ps,thumb_prefix:$,slice_dur:Ps,movie_rating:H8,owner:$,meta:Cu,rates:mi(Ps),thumbs:mi(q8),poster_url:$,duration:Ps,default_poster_url:$,desc:$,rating_flags:Ps,external_id:$,is_ad:Ps,asset:$}),Z8=class{async zyt(t,i,e,s){const n=function(t,i,e){if(F6.bj(i))return[K8(t,i,e)];if(mi(F6).bj(i))return i.map((i=>K8(t,i,e)));if(Y6.bj(i)){return(Gt(i.externalId)?i.externalId:[i.externalId]).map((s=>K8(t,"ext/"+i.userId+"/"+s,e)))}throw new b("Invalid asset id")}(t,i,s),r=n.map((t=>mu((()=>this.mli(t)),e)));return(await Promise.all(r)).filter(Yt)}async mli(t){const i=this.NS.SI({dS:Ys.GET,zu:t,fS:Qv.GI}),e=await i,s=await e.zm();return X8.bj(s)||X8.Cj(s,"AssetInfoResponse"),s}constructor(t){this.NS=t}};function K8(t,i,e){return e?t+"/player/assetinfo/"+i+".json?pbs="+e:t+"/player/assetinfo/"+i+".json"}var Tn,J8=class extends yo{fa(){return new $8(this.sd.va)}constructor(t){super("Cdi"),this.sd=t}},$8=class extends wn{constructor(t){super("removeasset"),this.asset=t}},t9=class extends yo{fa(){return new i9(this.sd.va)}constructor(t){super("xdi"),this.sd=t}},i9=class extends wn{constructor(t){super("addasset"),this.asset=t}},e9=class extends c0{eli(t,i){let e,s=0;for(const n of t){e=s+n.duration;for(const t of i)s<=t.GT&&t.GT<e&&(e+=t.ct||0);this.ST(Q8.ddi(n,s,e)),s=e}}n2t(t){this.Co(new t9(t))}a2t(t){this.Co(new J8(t))}constructor(){super()}},s9=class extends yo{fa(){return new n9(this.bI)}constructor(t){super("Odi"),this.bI=t}},n9=class extends wn{constructor(t){super("preplayresponse"),this.response=t}},r9=class extends yo{fa(){return new h9(this.bI)}constructor(t){super("jdi"),this.bI=t}},h9=class extends wn{constructor(t){super("assetinforesponse"),this.response=t}},o9=class extends Mo{Ali(t){t&&this.Co(new s9(Oi(t)))}ili(t){t.forEach((t=>this.Co(new r9(t))))}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){let t;const i=this,e={get ads(){return i.Qci.va},get assets(){return i.Fci.va},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}};return t=new Ro(i,e),e}constructor(t,i,e){super(),this.Qci=t,this.Fci=i,this.Vci=e,e.yn("yli",this.Ds),e.yn("Mli",this.Ds)}},a9=class{zdi(t,i){const e=new G6(t._O),s=new K6(t._O),n=function(t){if(t.verizonMedia&&Yt(t.verizonMedia.defaultSkipOffset)){const i=t.verizonMedia.defaultSkipOffset;return ed(i)?i:-1}return-1}(i),r=function(t){const i=t.verizonMedia?t.verizonMedia.onSeekOverAd:void 0;return function(t){if(!t)return"play-none";switch(t.toLowerCase()){case"play-all":return"play-all";case"play-none":default:return"play-none";case"play-last":return"play-last"}}(i)}(i),h=new e8(s,t),o=new s8(e,i),a=new U8(t,h,n,r),u=new Z8(t._O),c=new e9,l=new o9(a,c,h);return new k6(t,h,o,a,l,u,c)}};Rt((function(t){return class extends t{Gci(t){super.ga(t)}Wci(t,i){return super.Att(t,i)}dli(t){super.Nf(t)}Ef(){var t;return null!=(t=this.Pdi.lt)?t:super.Ef()}Lf(){var t;return null!=(t=this.Pdi.bf)?t:super.Lf()}Nf(t){this.Pdi.Nf(t)}ga(t){this.Pdi.ga(t)}Att(t,i){return this.Pdi.Att(t,i)}fa(){const t=this.Pdi.va;return N(super.fa(),{get verizonMedia(){return t}})}gn(){this.Pdi.gn(),super.gn()}constructor(t,i){super(t,i),this.Pdi=(new a9).zdi(this,i)}}}),sa.L7),function(t){t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error"}(Tn||(Tn={}));var u9=class extends xe{fa(){return XJ(this)}get AYt(){return A.IVt}get GT(){return this.tN}get wUt(){return this.tQt}constructor(t,i,e,s){super(t,i),this.tQt=s,this.tN=e}},c9=class extends Hi{get fbt(){return this.Bdi}get AYt(){return A.IVt}constructor(t,i,e){if(super(i),this.zqt=t,this.Pqt=t,e){const t=new Date(e);_T(t)&&(this.Bdi=t)}}},l9=class{Ag(){this.Qo.yn(he.Rw,this.dA),this.Qo.yn(l.Sh,this.gBt),this.Qo.yn(l.jh,this.wBt),this.Qo.yn(l.yw,this.We),this.Qo.yn(l.Jg,this.Mh),this.Qo.yn(l.Sw,this.od),this.Qo.yn(l.Ew,this.vHt),this.Qo.yn("presentationmodechange",this.Rdi)}gg(){this.Qo.fn(he.Rw,this.dA),this.Qo.fn(l.Sh,this.gBt),this.Qo.fn(l.jh,this.wBt),this.Qo.fn(l.yw,this.We),this.Qo.fn(l.Jg,this.Mh),this.Qo.fn(l.Sw,this.od),this.Qo.fn(l.Ew,this.vHt),this.Qo.fn("presentationmodechange",this.Rdi)}get Udi(){return this.Qdi}get U7(){const t=this.Udi;if(!t)return[];const i=[],e=this.Fdi();for(const s of t.Oc)e>=s.GT&&this.kui<=s.GT+s.ct&&i.push(s);return i}Fdi(){return this.Qo.Tf()-this.Ydi}Gdi(){if(this.Vdi)return;if(this.Qo.Td()!==1/0)return void(0===this.Wdi.length&&(this.Vdi=this.Hdi()));const t=()=>{var t;null==(t=this.qdi)||t.Ud(),this.qdi=void 0,this.Vdi=void 0};this.qdi=new na,this.Vdi=this.Xdi(this.qdi.Wd).catch(this.L4).then(t,t)}async Zdi(){const t=_.min(1e3*2**this.Kdi,3e4);try{var i;await lt(t,null==(i=this.qdi)?void 0:i.Wd),this.Kdi++}catch(t){if(Ho(t))return void(this.Kdi=0)}this.Gdi()}async Xdi(t){for(;Bo(t),!this.Qo.Ff;){const e=i.Kd()-this.Jdi;if(e>1e4)await this.Hdi(t),this.Jdi=i.Kd(),this.Kdi=0;else{const i=1e4-e;await lt(i,t)}}}$di(t){const i=t.fbt;if(i&&this.Qo.vf&&0===this.Ydi&&!this.tfi&&0!==_.floor(this.Qo.i_().start(0))){const e=(this.Qo.vf.getTime()-i.getTime())/1e3,s=this.Qo.Tf()-t.nbt;this.Ydi=s-e}}async Hdi(t){try{const i=await this.Qo._O.SI({zu:this.ifi}),e=await i.WO(t);if(0===e.avails.length)return void(0!==this.Wdi.length&&(this.Wdi=[]));if(e.avails.length===this.Wdi.length&&e.avails[0].startTimeInSeconds===this.Wdi[0].nbt)return void this.$di(this.Wdi[0]);const s=[];for(const t of e.avails){const i=new c9(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const e of t.ads){const t=new u9(i,ss.CFt,e.startTimeInSeconds,e.trackingEvents);t.Hqt(e.adId,e.width,e.height,e.durationInSeconds,[],e.skipoffset),i.Qqt(t)}s.push(i),this.$di(i)}this.Wdi=qc(s,((t,i)=>t.nbt-i.nbt))}catch(t){throw Ao(t),new g("Failed to poll MediaTailor tracking events")}}efi(){var t;null==(t=this.qdi)||t.qd(),this.qdi=void 0,this.Vdi=void 0,this.Jdi=-1/0}sfi(){if(0===this.Wdi.length)return;const t=this.Wdi[this.Wdi.length-1],i=this.Fdi();if(t.nbt+t.tVt<this.kui){var e;this.Qdi&&(null==(e=this.Qo.Oc)||e.Co(new ms(this.Qdi)),this.Qdi=void 0)}else{for(const t of this.Wdi){const e=t.nbt;if(!(e+t.tVt<this.kui)&&(e<=i&&e+t.tVt>this.kui)){var s;if(this.Udi===t)return;return this.Qdi=t,void(null==(s=this.Qo.Oc)||s.Co(new Nu(this.Qdi)))}}var n;if(this.Qdi)null==(n=this.Qo.Oc)||n.Co(new ms(this.Qdi)),this.Qdi=void 0}}nfi(){const t=this.U7;if(0===t.length)return;let i=[];for(const e of t){const t=e.wUt.filter((t=>gd(this.rfi,t.eventType)));i=i.concat(t)}for(const t of i)this.hfi(t.startTimeInSeconds)&&(t.eventType===Tn.COMPLETE&&this.ofi(Tn.ENGAGED_VIEW),this.afi(t))}ufi(t,i){return i.wUt.filter((i=>qi(i.eventType,t)))[0]}ofi(t){const i=this.U7;if(0===i.length)return;const e=this.ufi(t,i[0]);e&&this.afi(e)}afi(t){this.Ehi(t.eventType);for(const i of t.beaconUrls){const t={dS:Ys.GET,zu:i,cS:"",fS:Qv.GI};0,D(this.cfi(t))}}Ehi(t){let i;const e=this.U7;switch(t){case Tn.START:i=new Nh(e[e.length-1],this.Qo.Tf());break;case Tn.COMPLETE:i=new gh(e[0],this.Qo.Tf());break;case Tn.FIRST_QUARTILE:i=new s$(e[0],this.Qo.Tf());break;case Tn.MID_POINT:i=new r$(e[0],this.Qo.Tf());break;case Tn.THIRD_QUARTILE:i=new o$(e[0],this.Qo.Tf())}var s;void 0!==i&&(null==(s=this.Qo.Oc)||s.Co(i))}async cfi(t){const i=await this.Qo._O.SI(t);i.kI}hfi(t){const i=this.Fdi();return t>=this.kui&&t<i}gn(){this.gg(),this.efi(),this.kui=-1}constructor(t,i,e){this.Jdi=-1/0,this.Qdi=void 0,this.Ydi=0,this.Wdi=[],this.wui=!1,this.sR=!1,this.kui=-1,this.qdi=void 0,this.Vdi=void 0,this.Kdi=0,this.dA=()=>{this.Gdi()},this.wBt=()=>{this.ofi(Tn.RESUME)},this.gBt=()=>{this.efi(),this.ofi(Tn.PAUSE)},this.We=()=>{this.efi(),this.kui=-1},this.Mh=()=>{this.efi()},this.od=()=>{-1===this.kui&&(this.kui=this.Fdi()),this.sfi(),this.nfi(),this.kui=this.Fdi()},this.vHt=()=>{if(this.wui!==this.Qo.Pf){this.wui=this.Qo.Pf;const t=this.wui?Tn.MUTE:Tn.UNMUTE;this.ofi(t)}},this.Rdi=()=>{if(this.sR!==this.Qo.cs()){this.sR=this.Qo.cs();const t=this.sR?Tn.FULL_SCREEN:Tn.EXIT_FULL_SCREEN;this.ofi(t)}},this.L4=t=>{Ho(t)||(this.ofi(Tn.ERROR),D(this.Zdi()))},this.rfi=[Tn.START,Tn.FIRST_QUARTILE,Tn.MID_POINT,Tn.THIRD_QUARTILE,Tn.COMPLETE,Tn.IMPRESSION,Tn.CREATIVE_VIEW],this.Qo=t,this.ifi=i,this.tfi=e,this.Ag()}};Rt((function(t){return class extends t{ga(t){return this.lfi&&(this.lfi.gn(),this.lfi=void 0,this.pNt()),super.ga(t)}async Att(t,i){if(!t||!function(t){return t.sources.some((t=>t.integration===ps.MEDIATAILOR))}(t))return super.Att(t,i);try{const e=await this.dfi(t,i);await super.Att(e,i)}catch(t){this.IP(new $i(Ui.MANIFEST_LOAD_ERROR,t.message,t))}}Nf(t){var i;(null==(i=this.lfi)?void 0:i.Udi)||super.Nf(t)}Ef(){var t;return null!=(t=this.Bz)?t:super.Ef()}Lf(){var t;return null!=(t=this.Rz)?t:super.Lf()}IP(t){this.Bz=Ki(t),this.Rz=t,this.Co(new Dr(t))}pNt(){this.Bz=void 0,this.Rz=void 0}async dfi(t,i){let e=[];for(const s of t.sources){if(!Jg(s)){e.push(s);continue}const t=s;if(!t.src){e.push(s);continue}const n=await this.ffi(t,i);Bo(i);const r=Tt({},t,{integration:void 0,src:n});e.push(r)}const s=Oi(t);return s.sources=e,s}async ffi(t,i){const e=t.src||"",s=e.match(/.+?(?=\/v1\/)/);if(!s)throw new g("Could not find MediaTailor session initialization url");const n=s[0],r=is(e,"?ads."),h=r?{zu:e,fS:Qv.GI}:{zu:e,dS:Ys.POST,cS:JSON.stringify({adParams:t.adParams}),fS:Qv.GI},o=await mu((()=>this._fi(h,i)),i);let a;try{if(a=n+o.manifestUrl,!r){const t=n+o.trackingUrl,i=Hg(a);this.lfi=new l9(this,t,i)}}catch(t){throw new g("Something went wrong parsing the MediaTailor session initialization response")}return a}async _fi(t,i){try{const e=await this._O.SI(t);return await e.WO(i)}catch(t){throw Ao(t),new g("Failed to initialize MediaTailor session manifest")}}gn(){this.lfi&&(this.lfi.gn(),this.lfi=void 0),this.pNt(),super.gn()}constructor(t,i){super(t,i),this.lfi=void 0,this.Bz=void 0,this.Rz=void 0}}}),sa.x7);export{i as a,fi as b,Yt as c,Gt as d,$l as e,Qs as f,uo as g,ks as h,oB as i,fh as j,pM as k,TM as l,Yn as m,NM as n,DM as o,ia as p,EM as q,bM as r,dB as s,fB as t,Tt as u,is as v,Sf as w,qc as x,Va as y,Ee as z,Po as A,To as B,gd as C,No as D,xd as E,wn as F,Ui as G,ll as H,l as I,Yd as J,N as K,Th as L,Vd as M,ln as N,Mh as O,yw as P,Ua as Q,rA as R,Ha as S,Mi as T,Iv as U,bv as V,ae as W,lc as X,sa as Y,Rt as Z,Fj as _,uw as $,jn as aa,fw as ba,Ai as ca,ri as da,GN as ea,VN as fa,Tu as ga,WN as ha,qN as ia,E as ja,wD as ka,Ur as la,ve as ma,AI as na,MI as oa,II as pa,hr as qa,SI as ra,bI as sa,Pn as ta,Kx as ua,Jx as va,$x as wa,iO as xa,eO as ya,sO as za,NO as Aa,DO as Ba,IO as Ca,SO as Da,rr as Ea,Cj as Fa,xj as Ga,Vj as Ha,uz as Ia,cz as Ja,lz as Ka,dz as La,lR as Ma,dR as Na,fR as Oa,_R as Pa,EQ as Qa,bQ as Ra,A as Sa,vJ as Ta,EJ as Ua,YJ as Va,ei as Wa,_3 as Xa,n5 as Ya,u5 as Za,r8 as _a};