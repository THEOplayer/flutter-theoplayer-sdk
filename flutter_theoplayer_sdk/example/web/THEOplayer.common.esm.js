/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 6.5.0
 Created: 2023-11-27T14:25:04.499Z
 */
var Al,Ml,Tl,Nl,Dl,Il,El,Di,Ll,Ol,jl,zl,Pl,Bl,Rl,Ul,Ql,Fl,Yl,Gl,Wl,Vl,Hl,ql,Xl,Zl,_o,Kl,Eh,Jl,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==s?s:"undefined"!=typeof global?global:this,s=a.window,c=a.document,$l=a.location,td=a.navigator,v=a.setTimeout,m=a.clearTimeout,b=a.setInterval,w=a.clearInterval,k=a.Error,_=a.TypeError,C=(a.SyntaxError,a.Object),S=a.Math,j=a.parseInt,T=a.parseFloat,M=a.isNaN,A=a.Uint8Array,id=a.Worker,ed=(a.WorkerGlobalScope,a.XMLHttpRequest),sd=C.create,nd=C.defineProperty,rd=C.getOwnPropertyDescriptor,hd=C.getOwnPropertyNames,od=C.getPrototypeOf,ad=C.prototype.hasOwnProperty,ud=(t,i)=>()=>(t&&(i=t(t=0)),i),ao=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),ro=(t,i,e)=>(e=null!=t?sd(od(t)):{},((t,i,e,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let n of hd(i))ad.call(t,n)||n===e||nd(t,n,{get:()=>i[n],enumerable:!(s=rd(i,n))||s.enumerable});return t})(!i&&t&&t.__esModule?e:nd(e,"default",{value:t,enumerable:!0}),t));function cd(){}function pt(t){return"object"==typeof t&&null!==t||"function"==typeof t}function ld(t){return t.slice()}function dd(t,i,e,s,n){new A(t).set(new A(e,s,n),i)}function fd(t){return!1!==function(t){if("number"!=typeof t)return!1;if(Ml(t))return!1;if(t<0)return!1;return!0}(t)&&t!==1/0}function _d(t,i,e){if("function"!=typeof t)throw new _("Argument is not a function");return Function.prototype.apply.call(t,i,e)}function gd(t,i,e,s){var n=t[i];if(void 0!==n){if("function"!=typeof n)throw new _(n+" is not a method");switch(e){case 0:return function(){return Ad(n,t,s)};case 1:return function(i){var e=[i].concat(s);return Ad(n,t,e)}}}return function(){return Yr(void 0)}}function wd(t,i,e){var s=t[i];if(void 0!==s)return _d(s,t,e)}function Ad(t,i,e){try{return Yr(_d(t,i,e))}catch(t){return lt(t)}}function Wr(t){if(t=Number(t),Ml(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function vd(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new _("size property of a queuing strategy must be a function");return function(i){return t(i)}}function Ac(t){return new Nl(t)}function Yr(t){return Il(t)}function lt(t){return El(t)}function md(t,i,e){return Dl.call(t,i,e)}function Pe(t,i,e){md(md(t,i,e),void 0,Tl)}function pd(t,i){Pe(t,i)}function yd(t,i){Pe(t,void 0,i)}function rc(t,i,e){return md(t,i,e)}function Qr(t){md(t,void 0,Tl)}function _s(t,i,e){var s=null;!0===e&&(s=C.prototype);var n=C.create(s);return n.value=t,n.done=i,n}function Md(t,i){t.ul=!0,t.hd=i,i._d=t,"readable"===i.ya?Nd(t):"closed"===i.ya?function(t){Nd(t),Sd(t)}(t):Dd(t,i.Md)}function Td(t,i){return pc(t.hd,i)}function wh(t){"readable"===t.hd.ya?Id(t,new _("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,i){Dd(t,i)}(t,new _("Reader was released and can no longer be used to monitor the stream's closedness")),t.hd._d=void 0,t.hd=void 0}function ch(t){return new _("Cannot "+t+" a stream using a released reader")}function Nd(t){t.Td=Ac((function(i,e){t.Nd=i,t.Dd=e}))}function Dd(t,i){Nd(t),Id(t,i)}function Id(t,i){Qr(t.Td),t.Dd(i),t.Nd=void 0,t.Dd=void 0}function Sd(t){t.Nd(void 0),t.Nd=void 0,t.Dd=void 0}function Ed(t,i){void 0===i&&(i=!1);var e=new jl(t);return e.ul=i,e}function bd(t){return Ac((function(i,e){var s={Id:i,Sd:e};t._d.Ed.push(s)}))}function Ld(t,i,e){var s=t._d;s.Ed.shift().Id(_s(i,e,s.ul))}function kd(t){return t._d.Ed.length}function xd(t){var i=t._d;return void 0!==i&&!!Au(i)}function Au(t){return!!pt(t)&&!!C.prototype.hasOwnProperty.call(t,"Ed")}function Cd(t){var i=t.hd;return i.Ld=!0,"closed"===i.ya?Yr(_s(void 0,!0,t.ul)):"errored"===i.ya?lt(i.Md):i.xd[Ol]()}function Od(t){return new _("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}function jd(t){return!!pt(t)&&!!C.prototype.hasOwnProperty.call(t,"Cd")}function zd(t){return new _("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function Pd(t){var i=t.Od.shift();return t.jd-=i.size,t.jd<0&&(t.jd=0),i.value}function Bd(t,i,e){if(!fd(e=Number(e)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.Od.push({value:i,size:e}),t.jd+=e}function Lo(t){t.Od=new Di,t.jd=0}function Rd(t){return new Fl(t)}function Ud(t){t.ya="writable",t.Md=void 0,t.zd=void 0,t.Pd=void 0,t.Bd=new Di,t.Rd=void 0,t.Ud=void 0,t.Qd=void 0,t.Fd=void 0,t.Yd=!1}function Qd(t){return!!pt(t)&&!!C.prototype.hasOwnProperty.call(t,"Pd")}function vh(t){return void 0!==t.zd}function Fd(t,i){var e=t.ya;if("closed"===e||"errored"===e)return Yr(void 0);if(void 0!==t.Fd)return t.Fd.Gd;var s=!1;"erroring"===e&&(s=!0,i=void 0);var n=Ac((function(e,n){t.Fd={Gd:void 0,Id:e,Sd:n,Wd:i,Vd:s}}));return t.Fd.Gd=n,!1===s&&Wd(t,i),n}function Yd(t){var i=t.ya;if("closed"===i||"errored"===i)return lt(new _("The stream (in "+i+" state) is not in the writable state and cannot be closed"));var e=Ac((function(i,e){var s={Id:i,Sd:e};t.Ud=s})),s=t.zd;return void 0!==s&&!0===t.Yd&&"writable"===i&&Af(s),function(t){Bd(t,"close",0),nf(t)}(t.Pd),e}function Gd(t,i){"writable"!==t.ya?Vd(t):Wd(t,i)}function Wd(t,i){var e=t.Pd;t.ya="erroring",t.Md=i;var s=t.zd;void 0!==s&&Kd(s,i),!1===function(t){if(void 0===t.Rd&&void 0===t.Qd)return!1;return!0}(t)&&!0===e.Hd&&Vd(t)}function Vd(t){t.ya="errored",t.Pd[Ul]();var i=t.Md;if(t.Bd.forEach((function(t){t.Sd(i)})),t.Bd=new Di,void 0!==t.Fd){var e=t.Fd;if(t.Fd=void 0,!0===e.Vd)return e.Sd(i),void Hd(t);Pe(t.Pd[Rl](e.Wd),(function(){e.Id(),Hd(t)}),(function(i){e.Sd(i),Hd(t)}))}else Hd(t)}function Ei(t){return void 0!==t.Ud||void 0!==t.Qd}function Hd(t){void 0!==t.Ud&&(t.Ud.Sd(t.Md),t.Ud=void 0);var i=t.zd;void 0!==i&&lf(i,t.Md)}function qd(t,i){var e=t.zd;void 0!==e&&i!==t.Yd&&(!0===i?function(t){ff(t)}(e):Af(e)),t.Yd=i}function ku(t){return!!pt(t)&&!!C.prototype.hasOwnProperty.call(t,"qd")}function Xd(t){return Yd(t.qd)}function Zd(t,i){"pending"===t.Xd?lf(t,i):function(t,i){cf(t,i)}(t,i)}function Kd(t,i){"pending"===t.Zd?wf(t,i):function(t,i){_f(t,i)}(t,i)}function Jd(t){var i=t.qd,e=new _("Writer was released and can no longer be used to monitor the stream's closedness");Kd(t,e),Zd(t,e),i.zd=void 0,t.qd=void 0}function $d(t,i){var e=t.qd,s=e.Pd,n=function(t,i){try{return t.Kd(i)}catch(i){return rf(t,i),1}}(s,i);if(e!==t.qd)return lt(wc("write to"));var r=e.ya;if("errored"===r)return lt(e.Md);if(!0===Ei(e)||"closed"===r)return lt(new _("The stream is closing or closed and cannot be written to"));if("erroring"===r)return lt(e.Md);var h=function(t){return Ac((function(i,e){var s={Id:i,Sd:e};t.Bd.push(s)}))}(e);return function(t,i,e){var s={chunk:i};try{Bd(t,s,e)}catch(i){return void rf(t,i)}var n=t.Jd;if(!1===Ei(n)&&"writable"===n.ya){qd(n,hf(t))}nf(t)}(s,i,n),h}function tf(t,i,e,s,n,r,h,o){i.Jd=t,t.Pd=i,i.Od=void 0,i.jd=void 0,Lo(i),i.Hd=!1,i.Kd=o,i.$d=h,i.tf=s,i.if=n,i.ef=r;var a=hf(i);qd(t,a),Pe(Yr(e()),(function(){i.Hd=!0,nf(i)}),(function(e){i.Hd=!0,Gd(t,e)}))}function ef(t){t.tf=void 0,t.if=void 0,t.ef=void 0,t.Kd=void 0}function sf(t){return t.$d-t.jd}function nf(t){var i=t.Jd;if(!1!==t.Hd&&void 0===i.Rd)if("erroring"!==i.ya){if(0!==t.Od.length){var e=function(t){return t.Od.peek().value}(t);"close"===e?function(t){var i=t.Jd;(function(t){t.Qd=t.Ud,t.Ud=void 0})(i),Pd(t);var e=t.if();ef(t),Pe(e,(function(){!function(t){t.Qd.Id(void 0),t.Qd=void 0,"erroring"===t.ya&&(t.Md=void 0,void 0!==t.Fd&&(t.Fd.Id(),t.Fd=void 0)),t.ya="closed";var i=t.zd;void 0!==i&&df(i)}(i)}),(function(t){!function(t,i){t.Qd.Sd(i),t.Qd=void 0,void 0!==t.Fd&&(t.Fd.Sd(i),t.Fd=void 0),Gd(t,i)}(i,t)}))}(t):function(t,i){var e=t.Jd;!function(t){t.Rd=t.Bd.shift()}(e);var s=t.tf(i);Pe(s,(function(){!function(t){t.Rd.Id(void 0),t.Rd=void 0}(e);var i=e.ya;if(Pd(t),!1===Ei(e)&&"writable"===i){var s=hf(t);qd(e,s)}nf(t)}),(function(i){"writable"===e.ya&&ef(t),function(t,i){t.Rd.Sd(i),t.Rd=void 0,Gd(t,i)}(e,i)}))}(t,e.chunk)}}else Vd(i)}function rf(t,i){"writable"===t.Jd.ya&&of(t,i)}function hf(t){return sf(t)<=0}function of(t,i){var e=t.Jd;ef(t),Wd(e,i)}function af(t){return new _("WritableStream.prototype."+t+" can only be used on a WritableStream")}function nc(t){return new _("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function wc(t){return new _("Cannot "+t+" a stream using a released writer")}function uf(t){t.Td=Ac((function(i,e){t.Nd=i,t.Dd=e,t.Xd="pending"}))}function cf(t,i){uf(t),lf(t,i)}function lf(t,i){Qr(t.Td),t.Dd(i),t.Nd=void 0,t.Dd=void 0,t.Xd="rejected"}function df(t){t.Nd(void 0),t.Nd=void 0,t.Dd=void 0,t.Xd="resolved"}function ff(t){t.sf=Ac((function(i,e){t.nf=i,t.rf=e})),t.Zd="pending"}function _f(t,i){ff(t),wf(t,i)}function gf(t){ff(t),Af(t)}function wf(t,i){Qr(t.sf),t.rf(i),t.nf=void 0,t.rf=void 0,t.Zd="rejected"}function Af(t){t.nf(void 0),t.nf=void 0,t.rf=void 0,t.Zd="fulfilled"}function vf(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}function mf(t,i,e,s,n,r){var h=Ed(t),o=Rd(i);t.Ld=!0;var a=!1,u=Yr(void 0);return Ac((function(c,l){var d,f,g,w;if(void 0!==r){if(d=function(){var e=new Wl("Aborted","AbortError"),r=[];!1===s&&r.push((function(){return"writable"===i.ya?Fd(i,e):Yr(void 0)})),!1===n&&r.push((function(){return"readable"===t.ya?pc(t,e):Yr(void 0)})),p((function(){return Promise.all(r.map((function(t){return t()})))}),!0,e)},!0===r.aborted)return void d();r.addEventListener("abort",d)}if(m(t,h.Td,(function(t){!1===s?p((function(){return Fd(i,t)}),!0,t):y(!0,t)})),m(i,o.Td,(function(i){!1===n?p((function(){return pc(t,i)}),!0,i):y(!0,i)})),f=t,g=h.Td,w=function(){!1===e?p((function(){return function(t){var i=t.qd,e=i.ya;return!0===Ei(i)||"closed"===e?Yr(void 0):"errored"===e?lt(i.Md):Xd(t)}(o)})):y()},"closed"===f.ya?w():pd(g,w),!0===Ei(i)||"closed"===i.ya){var A=new _("the destination writable stream closed before all data could be piped to it");!1===n?p((function(){return pc(t,A)}),!0,A):y(!0,A)}function v(){var t=u;return md(u,(function(){return t!==u?v():void 0}))}function m(t,i,e){"errored"===t.ya?e(t.Md):yd(i,e)}function p(t,e,s){function n(){Pe(t(),(function(){return M(e,s)}),(function(t){return M(!0,t)}))}!0!==a&&(a=!0,"writable"===i.ya&&!1===Ei(i)?pd(v(),n):n())}function y(t,e){!0!==a&&(a=!0,"writable"===i.ya&&!1===Ei(i)?pd(v(),(function(){return M(t,e)})):M(t,e))}function M(t,i){Jd(o),wh(h),void 0!==r&&r.removeEventListener("abort",d),t?l(i):c(void 0)}Qr(Ac((function(t,i){!function e(s){s?t():md(!0===a?Yr(!0):md(o.sf,(function(){return md(Cd(h),(function(t){return!0===t.done||(u=md($d(o,t.value),void 0,cd),!1)}))})),e,i)}(!1)})))}))}function pf(t){return!!pt(t)&&!!C.prototype.hasOwnProperty.call(t,"hf")}function yf(t){!1!==Mf(t)&&(!0!==t.uf?(t.uf=!0,Pe(t.cf(),(function(){t.uf=!1,!0===t.lf&&(t.lf=!1,yf(t))}),(function(i){Oo(t,i)}))):t.lf=!0)}function Mf(t){var i=t.hf;return!1!==qh(t)&&(!1!==t.Hd&&(!0===Jf(i)&&kd(i)>0||If(t)>0))}function Tf(t){t.cf=void 0,t.df=void 0,t.Kd=void 0}function Nf(t){var i=t.hf;t._f=!0,0===t.Od.length&&(Tf(t),Cc(i))}function Df(t,i){var e=t.hf;if(!0===Jf(e)&&kd(e)>0)Ld(e,i,!1);else{var s=void 0;try{s=t.Kd(i)}catch(i){throw Oo(t,i),i}try{Bd(t,i,s)}catch(i){throw Oo(t,i),i}}yf(t)}function Oo(t,i){var e=t.hf;"readable"===e.ya&&(Lo(t),Tf(t),$f(e,i))}function If(t){var i=t.hf.ya;return"errored"===i?null:"closed"===i?0:t.$d-t.jd}function qh(t){var i=t.hf.ya;return!1===t._f&&"readable"===i}function Sf(t,i,e,s,n,r,h){i.hf=t,i.Od=void 0,i.jd=void 0,Lo(i),i.Hd=!1,i._f=!1,i.lf=!1,i.uf=!1,i.Kd=h,i.$d=r,i.cf=s,i.df=n,t.xd=i,Pe(Yr(e()),(function(){i.Hd=!0,yf(i)}),(function(t){Oo(i,t)}))}function Ef(t){return new _("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}function hh(t){return!!pt(t)&&!!C.prototype.hasOwnProperty.call(t,"gf")}function bf(t){return!!pt(t)&&!!C.prototype.hasOwnProperty.call(t,"wf")}function vc(t){var i=function(t){var i=t.gf;if("readable"!==i.ya)return!1;if(!0===t._f)return!1;if(!1===t.Hd)return!1;if(!0===xd(i)&&kd(i)>0)return!0;if(!0===Hf(i)&&Vf(i)>0)return!0;var e=Qf(t);if(e>0)return!0;return!1}(t);!1!==i&&(!0!==t.uf?(t.uf=!0,Pe(t.cf(),(function(){t.uf=!1,!0===t.lf&&(t.lf=!1,vc(t))}),(function(i){gc(t,i)}))):t.lf=!0)}function Lf(t,i){var e=!1;"closed"===t.ya&&(e=!0);var s=kf(i);"default"===i.readerType?Ld(t,s,e):function(t,i,e){var s=t._d,n=s.Af.shift();n.Id(_s(i,e,s.ul))}(t,s,e)}function kf(t){var i=t.bytesFilled,e=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,i/e)}function xf(t,i,e,s){t.Od.push({buffer:i,byteOffset:e,byteLength:s}),t.jd+=s}function Cf(t,i){var e=i.elementSize,s=i.bytesFilled-i.bytesFilled%e,n=S.min(t.jd,i.byteLength-i.bytesFilled),r=i.bytesFilled+n,h=r-r%e,o=n,a=!1;h>s&&(o=h-i.bytesFilled,a=!0);for(var u=t.Od;o>0;){var c=u.peek(),l=S.min(o,c.byteLength),d=i.byteOffset+i.bytesFilled;dd(i.buffer,d,c.buffer,c.byteOffset,l),c.byteLength===l?u.shift():(c.byteOffset+=l,c.byteLength-=l),t.jd-=l,Of(t,l,i),o-=l}return a}function Of(t,i,e){zf(t),e.bytesFilled+=i}function jf(t){0===t.jd&&!0===t._f?(Uf(t),Cc(t.gf)):vc(t)}function zf(t){void 0!==t.vf&&(t.vf.wf=void 0,t.vf.mf=void 0,t.vf=void 0)}function Pf(t){for(;t.pf.length>0;){if(0===t.jd)return;var i=t.pf.peek();!0===Cf(t,i)&&(Rf(t),Lf(t.gf,i))}}function Bf(t,i){var e=t.pf.peek();if("closed"===t.gf.ya){if(0!==i)throw new _("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,i){i.buffer=i.buffer;var e=t.gf;if(!0===Hf(e))for(;Vf(e)>0;)Lf(e,Rf(t))}(t,e)}else!function(t,i,e){if(e.bytesFilled+i>e.byteLength)throw new RangeError("bytesWritten out of range");if(Of(t,i,e),!(e.bytesFilled<e.elementSize)){Rf(t);var s=e.bytesFilled%e.elementSize;if(s>0){var n=e.byteOffset+e.bytesFilled,r=e.buffer.slice(n-s,n);xf(t,r,0,r.byteLength)}e.buffer=e.buffer,e.bytesFilled-=s,Lf(t.gf,e),Pf(t)}}(t,i,e);vc(t)}function Rf(t){var i=t.pf.shift();return zf(t),i}function Uf(t){t.cf=void 0,t.df=void 0}function gc(t,i){var e=t.gf;"readable"===e.ya&&(!function(t){zf(t),t.pf=new Di}(t),Lo(t),Uf(t),$f(e,i))}function Qf(t){var i=t.gf.ya;return"errored"===i?null:"closed"===i?0:t.$d-t.jd}function Ff(t,i,e){var s=C.create(Xl.prototype);var n=gd(i,"pull",0,[s]),r=gd(i,"cancel",1,[]),h=i.autoAllocateChunkSize;if(void 0!==h&&(h=Number(h),!1===Hl(h)||h<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,i,e,s,n,r,h){i.gf=t,i.lf=!1,i.uf=!1,i.vf=void 0,i.Od=i.jd=void 0,Lo(i),i._f=!1,i.Hd=!1,i.$d=Wr(r),i.cf=s,i.df=n,i.yf=h,i.pf=new Di,t.xd=i,Pe(Yr(e()),(function(){i.Hd=!0,vc(i)}),(function(t){gc(i,t)}))}(t,s,(function(){return wd(i,"start",[s])}),n,r,e,h)}function Yf(t){return new _("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function Gf(t){return new _("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function Wf(t){return Ac((function(i,e){var s={Id:i,Sd:e};t._d.Af.push(s)}))}function Vf(t){return t._d.Af.length}function Hf(t){var i=t._d;return void 0!==i&&!!xc(i)}function xc(t){return!!pt(t)&&!!C.prototype.hasOwnProperty.call(t,"Af")}function qf(t,i){var e=t.hd;return e.Ld=!0,"errored"===e.ya?lt(e.Md):function(t,i){var e=t.gf,s=1;i.constructor!==DataView&&(s=i.constructor.BYTES_PER_ELEMENT);var n=i.constructor,r={buffer:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.pf.length>0)return t.pf.push(r),Wf(e);if("closed"===e.ya)return Yr(_s(new n(r.buffer,r.byteOffset,0),!0,e._d.ul));if(t.jd>0){if(!0===Cf(t,r)){var h=kf(r);return jf(t),Yr(_s(h,!1,e._d.ul))}if(!0===t._f){var o=new _("Insufficient bytes to fill elements in the given buffer");return gc(t,o),lt(o)}}t.pf.push(r);var a=Wf(e);return vc(t),a}(e.xd,i)}function Xf(t){return new _("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}function Zf(t,i,e,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=C.create(_o.prototype);return Kf(r),Sf(r,C.create(Vl.prototype),t,i,e,s,n),r}function Kf(t){t.ya="readable",t._d=void 0,t.Md=void 0,t.Ld=!1}function Jh(t){return!!pt(t)&&!!C.prototype.hasOwnProperty.call(t,"xd")}function Jf(t){return void 0!==t._d}function pc(t,i){return t.Ld=!0,"closed"===t.ya?Yr(void 0):"errored"===t.ya?lt(t.Md):(Cc(t),rc(t.xd[Ll](i),cd))}function Cc(t){t.ya="closed";var i=t._d;void 0!==i&&(Au(i)&&(i.Ed.forEach((function(t){t.Id(_s(void 0,!0,i.ul))})),i.Ed=new Di),Sd(i))}function $f(t,i){t.ya="errored",t.Md=i;var e=t._d;void 0!==e&&(Au(e)?(e.Ed.forEach((function(t){t.Sd(i)})),e.Ed=new Di):(e.Af.forEach((function(t){t.Sd(i)})),e.Af=new Di),Id(e,i))}function xu(t){return new _("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}function t_(t,i,e,s,n,r){function h(){return i}t.Mf=function(t,i,e,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var h=C.create(Ql.prototype);return Ud(h),tf(h,C.create(Yl.prototype),t,i,e,s,n,r),h}(h,(function(i){return function(t,i){var e=t.Tf;if(!0===t.Yd){return rc(t.Nf,(function(){var s=t.Mf;if("erroring"===s.ya)throw s.Md;return a_(e,i)}))}return a_(e,i)}(t,i)}),(function(){return function(t){var i=t.Df,e=t.Tf,s=e.If();return h_(e),rc(s,(function(){if("errored"===i.ya)throw i.Md;var t=i.xd;!0===qh(t)&&Nf(t)}),(function(e){throw e_(t,e),i.Md}))}(t)}),(function(i){return function(t,i){return e_(t,i),Yr(void 0)}(t,i)}),e,s),t.Df=Zf(h,(function(){return function(t){return n_(t,!1),t.Nf}(t)}),(function(i){return s_(t,i),Yr(void 0)}),n,r),t.Yd=void 0,t.Nf=void 0,t.Sf=void 0,n_(t,!0),t.Tf=void 0}function i_(t){return!!pt(t)&&!!C.prototype.hasOwnProperty.call(t,"Tf")}function e_(t,i){Oo(t.Df.xd,i),s_(t,i)}function s_(t,i){h_(t.Tf),rf(t.Mf.Pd,i),!0===t.Yd&&n_(t,!1)}function n_(t,i){void 0!==t.Nf&&t.Sf(),t.Nf=Ac((function(i){t.Sf=i})),t.Yd=i}function r_(t){return!!pt(t)&&!!C.prototype.hasOwnProperty.call(t,"Ef")}function h_(t){t.bf=void 0,t.If=void 0}function o_(t,i){var e=t.Ef,s=e.Df.xd;if(!1===qh(s))throw new _("Readable side is not in a state that permits enqueue");try{Df(s,i)}catch(t){throw s_(e,t),e.Df.Md}var n=function(t){return!0!==Mf(t)}(s);n!==e.Yd&&n_(e,!0)}function a_(t,i){return rc(t.bf(i),void 0,(function(i){throw e_(t.Ef,i),i}))}function u_(t){return new _("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function c_(t){return new _("TransformStream.prototype."+t+" can only be used on a TransformStream")}var ue,ju,l_=ud((()=>{r(),Al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:function(t){return"Symbol("+t+")"},Ml=Number.isNaN||function(t){return t!=t},Tl=cd,Nl=Promise,Dl=Promise.prototype.then,Il=Promise.resolve.bind(Nl),El=Promise.reject.bind(Nl),16384,Di=function(){function t(){this.Lf=0,this.kf=0,this.xf={Cf:[],Of:void 0},this.jf=this.xf,this.Lf=0,this.kf=0}return C.defineProperty(t.prototype,"length",{get:function(){return this.kf},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var i=this.jf,e=i;16383===i.Cf.length&&(e={Cf:[],Of:void 0}),i.Cf.push(t),e!==i&&(this.jf=e,i.Of=e),++this.kf},t.prototype.shift=function(){var t=this.xf,i=t,e=this.Lf,s=e+1,n=t.Cf,r=n[e];return 16384===s&&(i=t.Of,s=0),--this.kf,this.Lf=s,t!==i&&(this.xf=i),n[e]=void 0,r},t.prototype.forEach=function(t){for(var i=this.Lf,e=this.xf,s=e.Cf;!(i===s.length&&void 0===e.Of||i===s.length&&(i=0,0===(s=(e=e.Of).Cf).length));)t(s[i]),++i},t.prototype.peek=function(){var t=this.xf,i=this.Lf;return t.Cf[i]},t}(),Ll=Al("[[CancelSteps]]"),Ol=Al("[[PullSteps]]"),jl=function(){function t(t){if(!1===Jh(t))throw new _("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===Jf(t))throw new _("This stream has already been locked for exclusive reading by another reader");Md(this,t),this.Ed=new Di}return C.defineProperty(t.prototype,"closed",{get:function(){return Au(this)?this.Td:lt(Od("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return Au(this)?void 0===this.hd?lt(ch("cancel")):Td(this,t):lt(Od("cancel"))},t.prototype.read=function(){return Au(this)?void 0===this.hd?lt(ch("read from")):Cd(this):lt(Od("read"))},t.prototype.releaseLock=function(){if(!Au(this))throw Od("releaseLock");if(void 0!==this.hd){if(this.Ed.length>0)throw new _("Tried to release a reader lock when that reader has pending read() calls un-settled");wh(this)}},t}(),"symbol"==typeof Al.asyncIterator&&((zl={})[Al.asyncIterator]=function(){return this},Pl=zl,C.defineProperty(Pl,Al.asyncIterator,{enumerable:!1})),Bl={next:function(){if(!1===jd(this))return lt(zd("next"));var t=this.Cd;return void 0===t.hd?lt(ch("iterate")):rc(Cd(t),(function(i){var e=i.done;return e&&wh(t),_s(i.value,e,!0)}))},return:function(t){if(!1===jd(this))return lt(zd("next"));var i=this.Cd;if(void 0===i.hd)return lt(ch("finish iterating"));if(i.Ed.length>0)return lt(new _("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.zf){var e=Td(i,t);return wh(i),rc(e,(function(){return _s(t,!0,!0)}))}return wh(i),Yr(_s(t,!0,!0))}},void 0!==Pl&&C.setPrototypeOf(Bl,Pl),C.defineProperty(Bl,"next",{enumerable:!1}),C.defineProperty(Bl,"return",{enumerable:!1}),Rl=Al("[[AbortSteps]]"),Ul=Al("[[ErrorSteps]]"),Ql=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),Ud(this);var e=i.size,s=i.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=vd(e);void 0===s&&(s=1),function(t,i,e,s){var n=C.create(Yl.prototype),r=gd(i,"write",1,[n]),h=gd(i,"close",0,[]),o=gd(i,"abort",1,[]);tf(t,n,(function(){return wd(i,"start",[n])}),r,h,o,e,s)}(this,t,s=Wr(s),n)}return C.defineProperty(t.prototype,"locked",{get:function(){if(!1===Qd(this))throw af("locked");return vh(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===Qd(this)?lt(af("abort")):!0===vh(this)?lt(new _("Cannot abort a stream that already has a writer")):Fd(this,t)},t.prototype.close=function(){return!1===Qd(this)?lt(af("close")):!0===vh(this)?lt(new _("Cannot close a stream that already has a writer")):!0===Ei(this)?lt(new _("Cannot close an already-closing stream")):Yd(this)},t.prototype.getWriter=function(){if(!1===Qd(this))throw af("getWriter");return Rd(this)},t}(),Fl=function(){function t(t){if(!1===Qd(t))throw new _("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===vh(t))throw new _("This stream has already been locked for exclusive writing by another writer");this.qd=t,t.zd=this;var i=t.ya;if("writable"===i)!1===Ei(t)&&!0===t.Yd?ff(this):gf(this),uf(this);else if("erroring"===i)_f(this,t.Md),uf(this);else if("closed"===i)gf(this),function(t){uf(t),df(t)}(this);else{var e=t.Md;_f(this,e),cf(this,e)}}return C.defineProperty(t.prototype,"closed",{get:function(){return!1===ku(this)?lt(nc("closed")):this.Td},enumerable:!0,configurable:!0}),C.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===ku(this))throw nc("desiredSize");if(void 0===this.qd)throw wc("desiredSize");return function(t){var i=t.qd,e=i.ya;return"errored"===e||"erroring"===e?null:"closed"===e?0:sf(i.Pd)}(this)},enumerable:!0,configurable:!0}),C.defineProperty(t.prototype,"ready",{get:function(){return!1===ku(this)?lt(nc("ready")):this.sf},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===ku(this)?lt(nc("abort")):void 0===this.qd?lt(wc("abort")):function(t,i){return Fd(t.qd,i)}(this,t)},t.prototype.close=function(){if(!1===ku(this))return lt(nc("close"));var t=this.qd;return void 0===t?lt(wc("close")):!0===Ei(t)?lt(new _("Cannot close an already-closing stream")):Xd(this)},t.prototype.releaseLock=function(){if(!1===ku(this))throw nc("releaseLock");void 0!==this.qd&&Jd(this)},t.prototype.write=function(t){return!1===ku(this)?lt(nc("write")):void 0===this.qd?lt(wc("write to")):$d(this,t)},t}(),Yl=function(){function t(){throw new _("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){return!!pt(t)&&!!C.prototype.hasOwnProperty.call(t,"Jd")}(this))throw new _("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.Jd.ya&&of(this,t)},t.prototype[Rl]=function(t){var i=this.ef(t);return ef(this),i},t.prototype[Ul]=function(){Lo(this)},t}(),Gl="undefined"!=typeof DOMException?DOMException:void 0,Wl=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}(Gl)?Gl:function(){var t=function(t,i){this.message=t||"",this.name=i||"Error",k.captureStackTrace&&k.captureStackTrace(this,this.constructor)};return t.prototype=C.create(k.prototype),C.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),t}(),Vl=function(){function t(){throw new _}return C.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===pf(this))throw Ef("desiredSize");return If(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===pf(this))throw Ef("close");if(!1===qh(this))throw new _("The stream is not in a state that permits close");Nf(this)},t.prototype.enqueue=function(t){if(!1===pf(this))throw Ef("enqueue");if(!1===qh(this))throw new _("The stream is not in a state that permits enqueue");return Df(this,t)},t.prototype.error=function(t){if(!1===pf(this))throw Ef("error");Oo(this,t)},t.prototype[Ll]=function(t){Lo(this);var i=this.df(t);return Tf(this),i},t.prototype[Ol]=function(){var t=this.hf;if(this.Od.length>0){var i=Pd(this);return!0===this._f&&0===this.Od.length?(Tf(this),Cc(t)):yf(this),Yr(_s(i,!1,t._d.ul))}var e=bd(t);return yf(this),e},t}(),Hl=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&S.floor(t)===t},ql=function(){function t(){throw new _("ReadableStreamBYOBRequest cannot be used directly")}return C.defineProperty(t.prototype,"view",{get:function(){if(!1===bf(this))throw Yf("view");return this.mf},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===bf(this))throw Yf("respond");if(void 0===this.wf)throw new _("This BYOB request has been invalidated");this.mf.buffer,function(t,i){if(!1===fd(i=Number(i)))throw new RangeError("bytesWritten must be a finite");Bf(t,i)}(this.wf,t)},t.prototype.respondWithNewView=function(t){if(!1===bf(this))throw Yf("respond");if(void 0===this.wf)throw new _("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new _("You can only respond with array buffer views");t.buffer,function(t,i){var e=t.pf.peek();if(e.byteOffset+e.bytesFilled!==i.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(e.byteLength!==i.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");e.buffer=i.buffer,Bf(t,i.byteLength)}(this.wf,t)},t}(),Xl=function(){function t(){throw new _("ReadableByteStreamController constructor cannot be used directly")}return C.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===hh(this))throw Gf("byobRequest");if(void 0===this.vf&&this.pf.length>0){var t=this.pf.peek(),i=new A(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),e=C.create(ql.prototype);!function(t,i,e){t.wf=i,t.mf=e}(e,this,i),this.vf=e}return this.vf},enumerable:!0,configurable:!0}),C.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===hh(this))throw Gf("desiredSize");return Qf(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===hh(this))throw Gf("close");if(!0===this._f)throw new _("The stream has already been closed; do not close it again!");var t=this.gf.ya;if("readable"!==t)throw new _("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var i=t.gf;if(t.jd>0)t._f=!0;else{if(t.pf.length>0&&t.pf.peek().bytesFilled>0){var e=new _("Insufficient bytes to fill elements in the given buffer");throw gc(t,e),e}Uf(t),Cc(i)}}(this)},t.prototype.enqueue=function(t){if(!1===hh(this))throw Gf("enqueue");if(!0===this._f)throw new _("stream is closed or draining");var i=this.gf.ya;if("readable"!==i)throw new _("The stream (in "+i+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new _("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,i){var e=t.gf,s=i.buffer,n=i.byteOffset,r=i.byteLength,h=s;!0===xd(e)?0===kd(e)?xf(t,h,n,r):Ld(e,new A(h,n,r),!1):!0===Hf(e)?(xf(t,h,n,r),Pf(t)):xf(t,h,n,r),vc(t)}(this,t)},t.prototype.error=function(t){if(!1===hh(this))throw Gf("error");gc(this,t)},t.prototype[Ll]=function(t){this.pf.length>0&&(this.pf.peek().bytesFilled=0);Lo(this);var i=this.df(t);return Uf(this),i},t.prototype[Ol]=function(){var t=this.gf;if(this.jd>0){var i=this.Od.shift();this.jd-=i.byteLength,jf(this);var e=void 0;try{e=new A(i.buffer,i.byteOffset,i.byteLength)}catch(t){return lt(t)}return Yr(_s(e,!1,t._d.ul))}var s=this.yf;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return lt(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:A,readerType:"default"};this.pf.push(r)}var h=bd(t);return vc(this),h},t}(),Zl=function(){function t(t){if(!Jh(t))throw new _("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===hh(t.xd))throw new _("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(Jf(t))throw new _("This stream has already been locked for exclusive reading by another reader");Md(this,t),this.Af=new Di}return C.defineProperty(t.prototype,"closed",{get:function(){return xc(this)?this.Td:lt(Xf("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return xc(this)?void 0===this.hd?lt(ch("cancel")):Td(this,t):lt(Xf("cancel"))},t.prototype.read=function(t){return xc(this)?void 0===this.hd?lt(ch("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?lt(new _("view must have non-zero byteLength")):qf(this,t)):lt(new _("view must be an array buffer view")):lt(Xf("read"))},t.prototype.releaseLock=function(){if(!xc(this))throw Xf("releaseLock");if(void 0!==this.hd){if(this.Af.length>0)throw new _("Tried to release a reader lock when that reader has pending read() calls un-settled");wh(this)}},t}(),_o=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),Kf(this);var e=i.size,s=i.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==e)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),Ff(this,t,s=Wr(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=vd(e);void 0===s&&(s=1),function(t,i,e,s){var n=C.create(Vl.prototype),r=gd(i,"pull",0,[n]),h=gd(i,"cancel",1,[]);Sf(t,n,(function(){return wd(i,"start",[n])}),r,h,e,s)}(this,t,s=Wr(s),r)}}return C.defineProperty(t.prototype,"locked",{get:function(){if(!1===Jh(this))throw xu("locked");return Jf(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===Jh(this)?lt(xu("cancel")):!0===Jf(this)?lt(new _("Cannot cancel a stream that already has a reader")):pc(this,t)},t.prototype.getReader=function(t){var i=(void 0===t?{}:t).mode;if(!1===Jh(this))throw xu("getReader");if(void 0===i)return Ed(this,!0);if("byob"===(i=String(i)))return function(t,i){void 0===i&&(i=!1);var e=new Zl(t);return e.ul=i,e}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,i){var e=t.writable,s=t.readable,n=void 0===i?{}:i,r=n.preventClose,h=n.preventAbort,o=n.preventCancel,a=n.signal;if(!1===Jh(this))throw xu("pipeThrough");if(!1===Qd(e))throw new _("writable argument to pipeThrough must be a WritableStream");if(!1===Jh(s))throw new _("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),h=Boolean(h),o=Boolean(o),void 0!==a&&!vf(a))throw new _("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===Jf(this))throw new _("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===vh(e))throw new _("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return Qr(mf(this,e,r,h,o,a)),s},t.prototype.pipeTo=function(t,i){var e=void 0===i?{}:i,s=e.preventClose,n=e.preventAbort,r=e.preventCancel,h=e.signal;return!1===Jh(this)?lt(xu("pipeTo")):!1===Qd(t)?lt(new _("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===h||vf(h)?!0===Jf(this)?lt(new _("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===vh(t)?lt(new _("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):mf(this,t,s,n,r,h):lt(new _("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===Jh(this))throw xu("tee");var t=function(t,i){var e,s,n,r,h,o=Ed(t),a=!1,u=!1,c=!1,l=Ac((function(t){h=t}));function d(){return!0===a||(a=!0,Qr(rc(Cd(o),(function(t){if(a=!1,!0===t.done)return!1===u&&Nf(n.xd),void(!1===c&&Nf(r.xd));var i=t.value,e=i,s=i;!1===u&&Df(n.xd,e),!1===c&&Df(r.xd,s)})))),Yr(void 0)}function f(){}return n=Zf(f,d,(function(i){if(u=!0,e=i,!0===c){var n=ld([e,s]),r=pc(t,n);h(r)}return l})),r=Zf(f,d,(function(i){if(c=!0,s=i,!0===u){var n=ld([e,s]),r=pc(t,n);h(r)}return l})),yd(o.Td,(function(t){Oo(n.xd,t),Oo(r.xd,t)})),[n,r]}(this);return ld(t)},t.prototype.getIterator=function(t){var i=(void 0===t?{}:t).preventCancel,e=void 0!==i&&i;if(!1===Jh(this))throw xu("getIterator");return function(t,i){void 0===i&&(i=!1);var e=Ed(t),s=C.create(Bl);return s.Cd=e,s.zf=Boolean(i),s}(this,e)},t}(),"symbol"==typeof Al.asyncIterator&&C.defineProperty(_o.prototype,Al.asyncIterator,{value:_o.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0}),function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(t){return t.byteLength},t}(),Kl=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(){return 1},t}(),Eh=function(){function t(t,i,e){void 0===t&&(t={}),void 0===i&&(i={}),void 0===e&&(e={});var s=i.size,n=i.highWaterMark,r=e.size,h=e.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var o=vd(s);if(void 0===n&&(n=1),n=Wr(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=vd(r);void 0===h&&(h=0),h=Wr(h),t_(this,Ac((function(t){a=t})),n,o,h,u),function(t,i){var e=C.create(Jl.prototype),s=function(t){try{return o_(e,t),Yr(void 0)}catch(t){return lt(t)}},n=i.transform;if(void 0!==n){if("function"!=typeof n)throw new _("transform is not a method");s=function(t){return Ad(n,i,[t,e])}}var r=gd(i,"flush",0,[e]);!function(t,i,e,s){i.Ef=t,t.Tf=i,i.bf=e,i.If=s}(t,e,s,r)}(this,t);var c=wd(t,"start",[this.Tf]);a(c)}return C.defineProperty(t.prototype,"readable",{get:function(){if(!1===i_(this))throw c_("readable");return this.Df},enumerable:!0,configurable:!0}),C.defineProperty(t.prototype,"writable",{get:function(){if(!1===i_(this))throw c_("writable");return this.Mf},enumerable:!0,configurable:!0}),t}(),Jl=function(){function t(){throw new _("TransformStreamDefaultController instances cannot be created directly")}return C.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===r_(this))throw u_("desiredSize");return If(this.Ef.Df.xd)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===r_(this))throw u_("enqueue");o_(this,t)},t.prototype.error=function(t){if(!1===r_(this))throw u_("error");!function(t,i){e_(t.Ef,i)}(this,t)},t.prototype.terminate=function(){if(!1===r_(this))throw u_("terminate");!function(t){var i=t.Ef,e=i.Df.xd;!0===qh(e)&&Nf(e),s_(i,new _("TransformStream terminated"))}(this)},t}()})),r=ud((()=>{"use strict";l_()})),d_=ao(((t,i)=>{r(),i.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),f_=ao(((t,i)=>{r(),i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=e+e,o=s+s,a=n+n,u=e*h,c=s*h,l=s*o,d=n*h,f=n*o,_=n*a,g=r*h,w=r*o,A=r*a;return t[0]=1-l-_,t[1]=c+A,t[2]=d-w,t[3]=0,t[4]=c-A,t[5]=1-u-_,t[6]=f+g,t[7]=0,t[8]=d+w,t[9]=f-g,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),__=ao(((t,i)=>{r(),i.exports=function(t,i,e){var s,n,r,h=e[0],o=e[1],a=e[2],u=S.sqrt(h*h+o*o+a*a);if(S.abs(u)<1e-6)return null;return h*=u=1/u,o*=u,a*=u,s=S.sin(i),n=S.cos(i),r=1-n,t[0]=h*h*r+n,t[1]=o*h*r+a*s,t[2]=a*h*r-o*s,t[3]=0,t[4]=h*o*r-a*s,t[5]=o*o*r+n,t[6]=a*o*r+h*s,t[7]=0,t[8]=h*a*r+o*s,t[9]=o*a*r-h*s,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),g_=ao(((t,i)=>{r(),i.exports=function(t,i){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}})),w_=ao(((t,i)=>{r(),i.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),A_=ao(((t,i)=>{r(),i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=i[4],o=i[5],a=i[6],u=i[7],c=i[8],l=i[9],d=i[10],f=i[11],_=i[12],g=i[13],w=i[14],A=i[15],v=e*o-s*h,m=e*a-n*h,p=e*u-r*h,y=s*a-n*o,M=s*u-r*o,T=n*u-r*a,N=c*g-l*_,D=c*w-d*_,I=c*A-f*_,S=l*w-d*g,E=l*A-f*g,b=d*A-f*w,L=v*b-m*E+p*S+y*I-M*D+T*N;if(!L)return null;return L=1/L,t[0]=(o*b-a*E+u*S)*L,t[1]=(n*E-s*b-r*S)*L,t[2]=(g*T-w*M+A*y)*L,t[3]=(d*M-l*T-f*y)*L,t[4]=(a*I-h*b-u*D)*L,t[5]=(e*b-n*I+r*D)*L,t[6]=(w*p-_*T-A*m)*L,t[7]=(c*T-d*p+f*m)*L,t[8]=(h*E-o*I+u*N)*L,t[9]=(s*I-e*E-r*N)*L,t[10]=(_*M-g*p+A*v)*L,t[11]=(l*p-c*M-f*v)*L,t[12]=(o*D-h*S-a*N)*L,t[13]=(e*S-s*D+n*N)*L,t[14]=(g*m-_*y-w*v)*L,t[15]=(c*y-l*m+d*v)*L,t}})),v_=ao(((t,i)=>{r(),i.exports=function(t,i,e){var s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],_=i[11],g=i[12],w=i[13],A=i[14],v=i[15],m=e[0],p=e[1],y=e[2],M=e[3];return t[0]=m*s+p*o+y*l+M*g,t[1]=m*n+p*a+y*d+M*w,t[2]=m*r+p*u+y*f+M*A,t[3]=m*h+p*c+y*_+M*v,m=e[4],p=e[5],y=e[6],M=e[7],t[4]=m*s+p*o+y*l+M*g,t[5]=m*n+p*a+y*d+M*w,t[6]=m*r+p*u+y*f+M*A,t[7]=m*h+p*c+y*_+M*v,m=e[8],p=e[9],y=e[10],M=e[11],t[8]=m*s+p*o+y*l+M*g,t[9]=m*n+p*a+y*d+M*w,t[10]=m*r+p*u+y*f+M*A,t[11]=m*h+p*c+y*_+M*v,m=e[12],p=e[13],y=e[14],M=e[15],t[12]=m*s+p*o+y*l+M*g,t[13]=m*n+p*a+y*d+M*w,t[14]=m*r+p*u+y*f+M*A,t[15]=m*h+p*c+y*_+M*v,t}})),m_=ao(((t,i)=>{r(),i.exports=function(t,i,e,s,n){var r=1/S.tan(i/2),h=1/(s-n);return t[0]=r/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+s)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*s*h,t[15]=0,t}})),p_=ao(((t,i)=>{r(),i.exports=function(t,i,e,s){var n,r,h,o,a,u,c,l,d,f,_,g,w,A,v,m,p,y,M,T,N,D,I,E,b=s[0],L=s[1],k=s[2],x=S.sqrt(b*b+L*L+k*k);if(S.abs(x)<1e-6)return null;b*=x=1/x,L*=x,k*=x,n=S.sin(e),r=S.cos(e),h=1-r,o=i[0],a=i[1],u=i[2],c=i[3],l=i[4],d=i[5],f=i[6],_=i[7],g=i[8],w=i[9],A=i[10],v=i[11],m=b*b*h+r,p=L*b*h+k*n,y=k*b*h-L*n,M=b*L*h-k*n,T=L*L*h+r,N=k*L*h+b*n,D=b*k*h+L*n,I=L*k*h-b*n,E=k*k*h+r,t[0]=o*m+l*p+g*y,t[1]=a*m+d*p+w*y,t[2]=u*m+f*p+A*y,t[3]=c*m+_*p+v*y,t[4]=o*M+l*T+g*N,t[5]=a*M+d*T+w*N,t[6]=u*M+f*T+A*N,t[7]=c*M+_*T+v*N,t[8]=o*D+l*I+g*E,t[9]=a*D+d*I+w*E,t[10]=u*D+f*I+A*E,t[11]=c*D+_*I+v*E,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]);return t}})),y_=ao(((t,i)=>{r(),i.exports=function(t,i,e){var s,n,r,h,o,a,u,c,l,d,f,_,g=e[0],w=e[1],A=e[2];i===t?(t[12]=i[0]*g+i[4]*w+i[8]*A+i[12],t[13]=i[1]*g+i[5]*w+i[9]*A+i[13],t[14]=i[2]*g+i[6]*w+i[10]*A+i[14],t[15]=i[3]*g+i[7]*w+i[11]*A+i[15]):(s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],_=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=_,t[12]=s*g+o*w+l*A+i[12],t[13]=n*g+a*w+d*A+i[13],t[14]=r*g+u*w+f*A+i[14],t[15]=h*g+c*w+_*A+i[15]);return t}}));function Ec(t,i){return M_(t.slice(),i)}function Ic(t,i){const e=M_(t,i);return e!==t&&T_(e,void 0,t.length,t),t}function M_(t,i){let e=t;const s=e.length;if(s<=1)return e;let n=new Array(s);for(let t=1;t<s;t*=2){T_(e,i,t,n);const s=e;e=n,n=s}return e}function T_(t,i,e,s){const n=t.length;let r=0;const h=2*e;let o,a,u,c,l;for(a=0;a<n;a+=h)for(u=a+e,o=u+e,u>n&&(u=n),o>n&&(o=n),c=a,l=u;;)if(c<u&&l<o)i&&i(t[c],t[l])<=0?s[r++]=t[c++]:s[r++]=t[l++];else if(c<u)s[r++]=t[c++];else{if(!(l<o))break;s[r++]=t[l++]}}r(),function(t){t[t.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",t[t.LICENSE_ERROR=2e3]="LICENSE_ERROR",t[t.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",t[t.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",t[t.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",t[t.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",t[t.SOURCE_INVALID=3e3]="SOURCE_INVALID",t[t.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",t[t.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",t[t.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",t[t.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",t[t.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",t[t.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",t[t.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",t[t.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",t[t.MEDIA_ABORTED=5004]="MEDIA_ABORTED",t[t.NETWORK_ERROR=6e3]="NETWORK_ERROR",t[t.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",t[t.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",t[t.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",t[t.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",t[t.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",t[t.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",t[t.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",t[t.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",t[t.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",t[t.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",t[t.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",t[t.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",t[t.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",t[t.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",t[t.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",t[t.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",t[t.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",t[t.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",t[t.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",t[t.AD_ERROR=1e4]="AD_ERROR",t[t.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",t[t.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",t[t.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",t[t.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR"}(ue||(ue={})),function(t){t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE"}(ju||(ju={})),(ju||(ju={})).fromCode=function(t){const i=S.floor(t/1e3);if(i in ju)return i;throw new _("Invalid error code: "+t)},r(),r(),r(),r(),r(),r(),r(),r(),r(),r();var $c={}.hasOwnProperty,uh={}.toString;function oe(t){return null!=t}function Go(t){return void 0===t}var Gr=Array.isArray||function(t){return"[object Array]"===uh.call(t)};function fe(t){return Uo(t)&&$c.call(t,"length")&&I_(t.length)}function Uo(t){return"object"==typeof t&&null!==t}function rt(t){return Uo(t)&&t.constructor&&t.constructor===C}function ji(t){return"string"==typeof t}function N_(t){return"boolean"==typeof t}function nu(t){return oe(t)&&"function"==typeof t.then}function D_(t){return"[object Date]"===uh.call(t)}function I_(t){return"number"==typeof t}r(),r();var pi,S_=9007199254740991,E_=2**-52;function et(t,i,e){return S.min(S.max(t,i),e)}function go(t,i,e){return t===i||S.abs(t-i)<=e}function b_(t,i){if(t===i)return!0;const e=S.abs(t-i);if(e<E_)return!0;return e<S.max(S.abs(t),S.abs(i))*E_}function L_(t,i){return t%i+(t<0?i:0)}function k_(t){return t!=t}function x_(t,i){return t===i||k_(t)&&k_(i)}function C_(t,i){let e=t,s=i;for(;0!==s;){const t=e%s;e=s,s=t}return e<0?-e:e}!function(t){t[t.Gr=0]="Gr",t[t.Pf=1]="Pf",t[t.Bf=-1]="Bf"}(pi||(pi={}));var qo=(t,i)=>(0|t)-(0|i),de=(t,i)=>t===i?0:t<i?-1:t>i?1:M(t)?M(i)?0:1:-1;function fh(t,i,e){return go(t,i,e)?0:de(t,i)}var O_=(t,i)=>b_(t,i)?0:de(t,i);var xe="function"==typeof Array.prototype.find?(t,i)=>t.find(i):(t,i)=>{const e=qt(t,i);return-1===e?void 0:t[e]},j_="function"==typeof Array.prototype.findLast?(t,i)=>t.findLast(i):(t,i)=>{const e=z_(t,i);return-1===e?void 0:t[e]},qt="function"==typeof Array.prototype.findIndex?(t,i)=>t.findIndex(i):(t,i)=>{for(let e=0;e<t.length;e+=1){if(i(t[e],e,t))return e}return-1},z_="function"==typeof Array.prototype.findLastIndex?(t,i)=>t.findLastIndex(i):(t,i)=>{for(let e=t.length-1;e>=0;e-=1){if(i(t[e],e,t))return e}return-1};function Hc(t,i){const e=t.indexOf(i);return-1!==e&&(Ks(t,e),!0)}function Ks(t,i){0===i?t.shift():t.splice(i,1)}function P_(t,i){const e=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===i){n++,e.length-=1;break}e[s++]=t[n++]}for(;n<t.length;)e[s++]=t[n++];return e}function ks(t,i){return-1!==t.indexOf(i)}function B_(t,i,e){if(t===i)return!0;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s+=1)if(!e(t[s],i[s]))return!1;return!0}function sr(t){t.length=0}function ph(t,i){if(t.length!==i.length)return!1;for(const e of t)if(!ks(i,e))return!1;return!0}Array.prototype.flat;var Cs="function"==typeof Array.prototype.flatMap?(t,i)=>t.flatMap(i):(t,i)=>{const e=[];for(let s=0;s<t.length;s++)e.push(...i(t[s],s));return e};function R_(t,i){return dc(t,((t,e)=>de(i(t),i(e))))}function gh(t,i){return U_(t,((t,e)=>de(i(t),i(e))))}function dc(t,i){if(0!==t.length)return t.reduce(((t,e)=>i(t,e)<=0?t:e))}function U_(t,i){return dc(t,((t,e)=>i(e,t)))}function Q_(t,i){return Promise.all(t.map(i)).then((i=>t.filter(((t,e)=>i[e]))))}function F_(t,i,e){if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(!e(t[s],i[s]))return!1;return!0}function Y_(){const t=C.create(null);return t.Rf=void 0,delete t.Rf,t}function Mt(){return new H_}function Kn(){return new q_}function G_(t){const i=Mt();for(const e in t)$c.call(t,e)&&i.set(e,t[e]);return i}function W_(t){const i=[];return t.forEach((t=>i.push(t))),i}r();var V_="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,H_=V_||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,i){this.index=0,this.data=t,this.selector=i,this.keys=C.keys(t)}}return class{get(t){return this.data[t]}set(t,i){return this.has(t)||this.size++,this.data[t]=i,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=Y_(),this.size=0}keys(){return new t(this.data,((t,i)=>i))}values(){return new t(this.data,((t,i)=>t[i]))}entries(){return new t(this.data,((t,i)=>[i,t[i]]))}forEach(t){for(const i in this.data)t(this.data[i],i)}constructor(){this.data=Y_(),this.size=0}}}();var q_=V_||function(){class t{next(){const t=this.Uf.next();return t.done?t:{value:this.Qf(t.value),done:!1}}constructor(t,i){this.Uf=t,this.Qf=i}}return class{get size(){return this.Ff.size}get(t){return this.Ff.get(""+t)}set(t,i){return this.Ff.set(""+t,i),this}has(t){return this.Ff.has(""+t)}delete(t){return this.Ff.delete(""+t)}clear(){this.Ff.clear()}keys(){return new t(this.Ff.keys(),(t=>Number(t)))}values(){return this.Ff.values()}entries(){return new t(this.Ff.entries(),(t=>{let[i,e]=t;return[Number(i),e]}))}forEach(t){this.Ff.forEach(((i,e)=>{t(i,Number(e))}))}constructor(){this.Ff=Mt()}}}();r(),r();var vo=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];k.apply(this,i)};(vo.prototype=C.create(k.prototype)).constructor=vo;var Ga=class extends vo{get name(){return"BaseError"}constructor(t,i){super(),this.message=t||"Unknown error",this.cause=i,k.captureStackTrace&&k.captureStackTrace(this,this.constructor)}};r();var le,X_=class{Yf(){if(!this.Gf&&!this.Wf){this.Gf=!0;for(const t of this.Vf.slice())t();this.Hf()}}Hf(){if(!this.Wf){this.Wf=!0;for(const t of this.qf.slice())t();sr(this.Vf),sr(this.qf)}}Xf(t){this.Wf||this.Vf.push(t)}Zf(t){this.Wf||Hc(this.Vf,t)}Kf(t){this.Wf||this.qf.push(t)}Jf(t){this.Wf||Hc(this.qf,t)}constructor(){this.Gf=!1,this.Wf=!1,this.Vf=[],this.qf=[]}},Z_=class t{get $f(){return this.t_}i_(){this.t_.Yf()}Hf(){this.t_.Hf()}e_(t){const i=this.t_;if(i.Gf)return;if(t.Gf)return void i.Yf();if(i.Wf||t.Wf)return;const e=()=>{s(),i.Yf()},s=()=>{t.Zf(e),t.Jf(s),i.Zf(e),i.Jf(s)};t.Xf(e),t.Kf(s),i.Xf(e),i.Kf(s)}s_(){const i=new t,e=new t,s=i.$f,n=e.$f,r=this.t_,h=()=>{s.Gf&&n.Wf||n.Gf&&s.Wf?r.Yf():s.Wf&&n.Wf&&r.Hf()};s.Xf(h),n.Xf(h),s.Kf(h),n.Kf(h),i.e_(r),e.e_(r);return r.Kf((()=>{s.Zf(h),n.Zf(h),s.Jf(h),n.Jf(h)})),[i,e]}constructor(){this.t_=new X_}};r(),r();var h=()=>{},K_=t=>t;function Xi(t,i){let e=-1/0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const h=le.n_();h-e>=i&&(t.apply(this,n),e=h)}}function J_(t,i){let e=0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const h=this;0!==e&&le.r_(e),e=le.h_((()=>{e=0,t.apply(h,n)}),i)}}function $_(t){let i;return()=>(void 0!==t&&(i=t(),t=void 0),i)}var Eu=class extends Ga{get name(){return"AbortError"}constructor(t,i){super(t||"Aborted",i)}};function Er(t){return t instanceof k&&"AbortError"===t.name}function Pi(t){if(t&&t.Gf)throw new Eu}function Et(t){if(Er(t))throw t}function tg(t){if(!Er(t))throw t}function Oi(t,i){return i?new Promise(((e,s)=>{if(i.Gf)return t.catch(h),s(new Eu);const n=()=>{i.Zf(n),s(new Eu)};i.Xf(n),t.then((t=>{i.Zf(n),e(t)}),(t=>{i.Zf(n),s(t)}))})):t}function G(t,i){return t.then((t=>(i.Hf(),t)),(t=>{throw i.Hf(),t}))}function ig(t,i){const e=new Z_;return i&&e.e_(i),G(t(e.$f),e)}r();var eg=Promise.resolve(),Hu="function"==typeof queueMicrotask?queueMicrotask:t=>{eg.then(t)};function Mo(t){t.then(h,h)}async function Nc(t){try{return await Promise.all(t)}catch(i){throw await Promise.all(t.map((t=>t.catch(h)))),i}}function yc(t,i){return new Promise(((e,s)=>{if(void 0!==i&&i.Gf)return void s(new Eu);const n=le.h_((()=>{void 0!==i&&i.Zf(r),e()}),t),r=()=>{le.r_(n),s(new Eu)};void 0!==i&&i.Xf(r)}))}function sg(t,i,e){if("function"==typeof e)e.call(t,i);else for(const s of e)s.call(t,i)}var Po,i=class{dn(t,i){if("function"==typeof i)if("string"==typeof t)this.o_(t,i);else for(const e of t)this.o_(e,i)}o_(t,i){const e=this.a_[t];void 0===e?this.a_[t]=i:"function"==typeof e?this.a_[t]=[e,i]:0===this.u_?e.push(i):this.a_[t]=e.concat(i)}c_(t){if("function"!=typeof t)return;const i=this.l_;void 0===i?this.l_=t:"function"==typeof i?this.l_=[i,t]:0===this.u_?i.push(t):this.l_=i.concat(t)}Uo(){this.a_=Y_(),this.l_=void 0}jo(t){this.u_++;const i=this.a_[t.type],e=this.l_;void 0!==i&&sg(this.d_,t,i),void 0!==e&&sg(this.d_,t,e),this.u_--}hn(t,i){if("function"==typeof i)if("string"==typeof t)this.f_(t,i);else for(const e of t)this.f_(e,i)}f_(t,i){const e=this.a_[t];void 0!==e&&("function"==typeof e?e===i&&(this.a_[t]=void 0):0===this.u_?Hc(e,i):this.a_[t]=P_(e,i))}__(t){if("string"==typeof t)this.a_[t]=void 0;else for(const i of t)this.a_[i]=void 0}g_(t){const i=this.l_;void 0!==i&&("function"==typeof i?i===t&&(this.l_=void 0):0===this.u_?Hc(i,t):this.l_=P_(i,t))}w_(t,i){return new Promise(((e,s)=>{if(i&&i.Gf)return s(new Eu);const n=t=>{h(),e(t)},r=()=>{h(),s(new Eu)},h=()=>{this.hn(t,n),i&&i.Zf(r)};this.dn(t,n),i&&i.Xf(r)}))}constructor(t){this.a_=Y_(),this.l_=void 0,this.u_=0,this.Ds=t=>{this.jo(t)},this.d_=null!=t?t:this}},bt=class extends i{jo(t){Hu((()=>{super.jo(t)}))}},$=class extends i{c_(t){super.c_(t)}g_(t){super.g_(t)}},ng=class extends ${},Wi=class extends ${get ot(){return this.A_()}A_(){return this.v_.ot}m_(){return this.v_.m_()}get p_(){return this.y_()}y_(){return this.v_.p_}get M_(){return this.T_()}set M_(t){this.N_(t)}T_(){return this.v_.M_}N_(t){this.v_.M_=t}get wt(){return this.D_()}D_(){return this.v_.wt}get I_(){return this.S_()}set I_(t){this.E_(t)}S_(){return this.v_.I_}E_(t){this.v_.I_=t}get lt(){return this.yd()}yd(){return this.v_.lt}get _e(){return this.b_()}b_(){return this.v_._e}get L_(){return this.k_()}k_(){return this.v_.L_}get dt(){return this.x_()}get C_(){return this.O_()}x_(){return this.v_.dt}O_(){return this.v_.C_}get j_(){return this.z_()}z_(){return this.v_.j_}get P_(){return this.B_()}B_(){return this.v_.P_}get R_(){return this.U_()}U_(){return this.v_.R_}get Q_(){return this.F_()}set Q_(t){this.Y_(t)}F_(){return this.v_.Q_}Y_(t){this.v_.Q_=t}get G_(){return this.W_()}W_(){return this.v_.G_}get V_(){return this.H_()}H_(){return this.v_.V_}get q_(){return this.X_()}set q_(t){this.Z_(t)}X_(){return this.v_.q_}Z_(t){this.v_.q_=t}get K_(){return this.J_()}J_(){return this.v_.K_}get eg(){return this.rg()}set eg(t){this.hg(t)}rg(){return this.v_.eg}hg(t){this.v_.eg=t}get og(){return this.ag()}ag(){return this.v_.og}get cg(){return this.dg()}dg(){return this.v_.cg}get fg(){return this._g()}_g(){return this.v_.fg}$a(){return this.v_.$a()}Zh(t,i){return this.v_.Zh(t,i)}get rt(){return this.gg()}gg(){return this.v_.rt}get wg(){return this.Ag()}Ag(){return this.v_.wg}get ht(){return this.vg()}vg(){return this.v_.ht}get pg(){return this.yg()}yg(){return this.v_.pg}get Mg(){return this.Tg()}set Mg(t){this.Ng(t)}get Dg(){return this.Ig()}Ig(){return this.v_.Dg}Tg(){return this.v_.Mg}Ng(t){this.v_.Mg=t}get Sg(){return this.Eg()}set Sg(t){this.Lg(t)}Eg(){return this.v_.Sg}Lg(t){this.v_.Sg=t}xg(){return this.v_.xg()}Cg(){return this.v_.Cg()}Og(t){this.v_.Og(t)}jg(){this.v_.jg()}we(){this.v_.we()}zg(){this.v_.zg()}Pg(){this.v_.Pg()}Bg(){this.v_.Bg()}ye(){this.v_.ye()}Rg(){return this.v_.Rg()}Ug(){return this.v_.Ug()}Qg(){this.v_.Qg()}Fg(){this.v_.Fg()}Gn(){return this.v_.Gn()}Yg(){this.v_.Yg()}Gg(){this.v_.Gg()}Wg(t){return this.v_.Wg(t)}Vg(t){return!1}async ln(){this.Uo(),await this.v_.ln()}constructor(t){super(),this.Hg=t=>{this.Vg(t)||this.jo(t)},this.v_=t,t.c_(this.Hg)}};r(),r(),r(),function(t){t.qg="Xg",t.Zg="Kg"}(Po||(Po={})),r(),r(),r(),r(),r();var d=class{constructor(t,i=new Date){this.type=t,this.date=i}},Js=class extends d{get so(){return this.Oa||(this.Oa=this.Qh()),this.Oa}constructor(t,i){super(t,i),this.Oa=void 0}};function rg(t){return Boolean(t&&t.so)}var du=class extends Js{constructor(t){super(t)}},me=class extends d{constructor(t){super(t)}},hg=class extends du{Qh(){return new og(this.Ht.so)}constructor(t){super(Po.qg),this.Ht=t}},og=class extends me{constructor(t){super("addtrack"),this.track=t}};r();var ia,ag=class extends du{Qh(){return new ug(this.Ht.so)}constructor(t){super(Po.Zg),this.Ht=t}},ug=class extends me{constructor(t){super("removetrack"),this.track=t}};r(),function(t){t.Jg="$g",t.iw="ew",t.nw="hw",t.ow="aw",t.uw="cw",t.lw="dw",t.ra="fw",t._w="gw",t.ww="Aw",t.mw="Hn",t.pw="yw",t.Mw="Tw",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality"}(ia||(ia={}));var Yi=class extends i{get Nw(){return this.Dw}get so(){return this.Oa||(this.Oa=this.Qh()),this.Oa}get L(){return this.Dw.length}Iw(t){return this.Dw[t]}it(t){return!(!t||ks(this.Dw,t))&&(this.Dw.push(t),this.Oa&&this.Oa.push(t.so),t.dn(ia.ra,this.Ds),this.jo(new hg(t)),!0)}st(t){if(!t)return!1;const i=this.Dw.indexOf(t);return!(i<0)&&(Ks(this.Dw,i),this.Oa&&Ks(this.Oa,i),t.hn(ia.ra,this.Ds),this.jo(new ag(t)),!0)}Sw(t){return ks(this.Dw,t)}Gn(){const t=this.Dw;for(let i=t.length-1;i>=0;i-=1)this.st(t[i])}ln(){this.Gn(),this.Uo()}constructor(){super(),this.Dw=[],this.Oa=void 0}};r();var eo=class extends du{Qh(){return new cg(this.Ht.so)}constructor(t){super(ia.ra),this.Ht=t}},cg=class extends me{constructor(t){super("change"),this.track=t}},lg=class extends Yi{get Ew(){return this.Lw}set Ew(t){const i=this.Lw;if(t!==i){if(i){this.xw(i);for(const e of i.Nw)t&&t.Sw(e)||this.st(e)}if(this.Lw=t,t){const i=[];for(const e of t.Nw)this.it(e),this.Cw(e)&&i.push(e);this.Ow(t);for(const t of i)t.jo(new eo(t))}}}Ow(t){t.dn(Po.qg,this.jw),t.dn(Po.Zg,this.zw)}xw(t){t.hn(Po.qg,this.jw),t.hn(Po.Zg,this.zw)}ln(){this.Lw&&this.Lw.ln(),super.ln()}constructor(){super(),this.Lw=void 0,this.jw=t=>{const i=t.Ht;this.it(i)},this.zw=t=>{const i=t.Ht;this.st(i)}}};r(),r(),r();var dg=C.freeze||K_;function ko(t,i,e){C.defineProperty(t,i,{writable:!1,enumerable:!0,value:e})}function fg(t){return dg(t)}function Wt(t,i){for(const e of C.getOwnPropertyNames(i))C.defineProperty(t,e,C.getOwnPropertyDescriptor(i,e));return t}function Qi(t){if(rt(t)){const i={};for(const e in t)$c.call(t,e)&&(i[e]=Qi(t[e]));return i}if(Gr(t)){const i=new Array(t.length);for(let e=0;e<i.length;e++)e in t&&(i[e]=Qi(t[e]));return i}return t}function Xc(t,i){return t===i||!(!t||!i)&&(!(!Uo(t)||!Uo(i))&&(fe(t)?!!fe(i)&&function(t,i){const e=t.length,s=i.length;if(e!==s)return!1;for(let s=0;s<e;s+=1)if(!Xc(t[s],i[s]))return!1;return!0}(t,i):!fe(i)&&function(t,i){const e=C.keys(t),s=C.keys(i);if(!e||!s||e.length!==s.length)return!1;for(const s of e)if(!$c.call(i,s)||!Xc(t[s],i[s]))return!1;return!0}(t,i)))}function _g(t,i){if(!Uo(t))return!1;for(const e of i)if(!(e in t))return!1;return!0}function gg(t,i){return t.constructor===i.constructor}function wg(t){const i={};for(const e of C.keys(t)){const s=t[e];null!=s&&(i[e]=s)}return i}function ac(t){const i={};for(const e of C.keys(t)){const s=t[e];if(fe(s)){const t=[];for(let i=0;i<s.length;i+=1){const e=s[i];if(null!=e){const i=Uo(e)?ac(e):e;t.push(i)}}i[e]=t}else null!=s&&(i[e]=Uo(s)?ac(s):s)}return i}function Uc(t){let i=t;if("string"==typeof i){if(i=i.toLowerCase(),"true"===i)return!0;if("false"===i)return!1}return Boolean(i)}function ri(t){return oe(t)?Uc(t):void 0}function ka(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function Ag(t){const i=ka(t);if(M(i))throw new k("Expected a valid number.");return i}function hs(t){return"string"==typeof t?t:""}function vg(t,i){if(!fe(t))return[];const e=0|t.length,s=new Array(e);for(let n=0;n<e;n++)s[n]=i(t[n]);return s}function bo(t,i){let e;return e=fe(t)?vg(t,i):i(t),e}r();var Ca,mg=[Po.qg,Po.Zg,ia.ra];function pg(t){let i;const e=t.Nw.map((t=>t.so));return e.item=i=>{const e=0|i,s=t.Iw(e);return s&&s.so||void 0},e.addEventListener=(t,e)=>{i.dn(t,e)},e.removeEventListener=(t,e)=>{i.hn(t,e)},i=new bt(e),t.dn(mg,(t=>i.jo(t.so))),e}function yg(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function Mg(){}function es(t){const i=[ia.mw,ia.ra,ia.pw,ia.Mw,ia.QUALITY_UNAVAILABLE];let e;const s={get activeQuality(){return t.Pw&&t.Pw.so},get enabled(){return t.Ot},set enabled(i){t.Ot=Uc(i)},get id(){return t.u},get uid(){return t.Bw},get kind(){return t.Lt},get label(){return t.fh},set label(i){t.fh=hs(i)},get accessibility(){var i,e;return null!=(e=null==(i=t.Rw)?void 0:i.map(yg))?e:[]},get language(){return t.ys},get qualities(){return t.Uw.so},set targetQuality(i){let e;e=i?function(t,i){const e=[];for(const s of t.Uw.Nw)for(const t of i)s.so===t&&e.push(s);return e}(t,Gr(i)?i:[i]):[],e.length>0?t.Qw=e:t.Qw=void 0},get targetQuality(){if(t.Qw)return 1===t.Qw.length?t.Qw[0].so:t.Qw.map((t=>t.so))},addEventListener(t,i){const s=bo(t,hs);e.dn(s,i)},removeEventListener(t,i){const s=bo(t,hs);e.hn(s,i)}};return e=new bt(s),t.dn(i,(t=>e.jo(t.so))),C.defineProperty(s,"constructor",{value:Mg}),s}function Tg(){}function Ng(t){const i=pg(t);return C.defineProperty(i,"constructor",{value:Tg}),i}r(),function(t){t[t.Fw=0]="Fw",t[t.Yw=1]="Yw",t[t.Gw=2]="Gw",t[t.Ww=3]="Ww",t[t.Vw=4]="Vw",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.Hw=7]="Hw"}(Ca||(Ca={}));var Da,be,au=class extends lg{Qh(){return Ng(this)}Cw(t){return t.Ot}};function Hs(t){if("string"==typeof t){const i=t.toLowerCase();switch(i){case"disabled":case"hidden":case"showing":return i}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}function Dg(){}function Ig(t){const i=[ia.ra,ia.mw,ia.Jg,ia.iw,ia.ow,ia.uw,ia.nw,ia.lw,ia._w,ia.ww],e=[be.ha];let s;const n={get kind(){return t.Lt},get label(){return t.fh},set label(i){t.fh=hs(i)},get language(){return t.ys},get id(){return t.u},get uid(){return t.Bw},get inBandMetadataTrackDispatchType(){return t.qw},get mode(){return t.Xw},set mode(i){i!==Da.zn&&i!==Da.Zw&&i!==Da.yh||t.Kw(i)},get forced(){return Boolean(t.Jw)},get accessibility(){var i,e;return null!=(e=null==(i=t.Rw)?void 0:i.map(yg))?e:[]},get type(){return t.$w},get readyState(){return t.og},get cues(){return t.Xw===Da.yh?null:t.H.so},get activeCues(){return t.Xw===Da.yh?null:t.W.so},get src(){return t.tA||""},addEventListener(t,i){const e=bo(t,hs);s.dn(e,i)},removeEventListener(t,i){const e=bo(t,hs);s.hn(e,i)}};return s=new bt(t),t.dn(i,(t=>s.jo(t.so))),t.dn(e,(t=>s.jo(t))),C.defineProperty(n,"constructor",{value:Dg}),n}function Sg(){}function uo(t){const i=pg(t);return C.defineProperty(i,"constructor",{value:Sg}),i}r(),r(),r(),function(t){t.yh="disabled",t.Zw="hidden",t.zn="showing"}(Da||(Da={})),r(),(be||(be={})).ha="error";var Vc=class extends lg{Qh(){return uo(this)}Cw(t){return t.Xw===Da.zn}};r(),r(),r(),r();var t,Dt,Eg=.25,bg=400,Lg={iA:.2,eA:.45,sA:.7,nA:3,rA:jc,hA:Bg},kg={iA:.4,eA:.65,sA:1,nA:3,rA:jc,hA:Bg},xg={iA:.4,eA:.7,sA:.9,nA:3,rA:jc,hA:Bg},Cg={iA:.4,eA:.65,sA:1,nA:3,rA:jc,hA:Bg},Og={iA:.5,eA:1.125,sA:1.75,nA:2.55,rA:jc,hA:Bg};function jg(){let t;return t=le.Ks.oA?Cg:le.Ks.aA?kg:le.Ks.uA?"Android"===le.lA.cA?xg:Lg:Og,le.lA.dA?function(t){if(le.lA.dA){const i=(bg+250)/1e3,e=S.max(i,t.iA),s=S.max(e+Eg,t.eA),n=S.max(s+Eg,t.sA);return{iA:e,eA:s,sA:n,nA:S.max(n+Eg,t.nA),rA:jc,hA:Bg}}return t}(t):t}r(),r(),function(t){t.fA="_A",t.gA="wA",t.AA="contentprotectionerror",t.vA="contentprotectionsuccess",t.mA="currentsourcechange",t.pA="destroy",t.yA="durationchange",t.MA="emptied",t.TA="encrypted",t.NA="ended",t.DA="IA",t.SA="EA",t.bA="LA",t.kA="xA",t.CA="loadstart",t.OA="manifestupdate",t.jA="nosupportedrepresentationfound",t.zA="offline",t.PA="online",t.bh="pause",t.wh="play",t.BA="progress",t.RA="ratechange",t.UA="representationchange",t.QA="resize",t.FA="seeked",t.YA="seeking",t.GA="segmentnotfound",t.WA="VA",t.HA="qA",t.vo="sourcechange",t.XA="timeupdate",t.ZA="volumechange",t.KA="JA",t.$A="metricschange"}(t||(t={})),r(),function(t){t.rv="canplay",t.hv="canplaythrough",t.ov="loadeddata",t.uv="loadedmetadata",t._w="readystatechange",t.fv="waiting",t._v="playing"}(Dt||(Dt={}));var zg=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"];function qr(){return qr=C.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var s in e)C.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},qr.apply(this,arguments)}r(),r();var Pg,jc=.92,Bg=1.08;function Rg(t){return{goLive:()=>t.Av(),get isLive(){return t.vv},get currentServerLiveTime(){return t.mv},get currentLatency(){return t.pv},get latencies(){return t.yv},get latency(){return t.Mv},set latency(i){if(!function(t){if(!Uo(t))return!1;const i=t,e=oe(i.target)&&"number"==typeof i.target&&oe(i.windowEnd)&&"number"==typeof i.windowEnd&&oe(i.windowStart)&&"number"==typeof i.windowStart&&oe(i.maxOffset)&&"number"==typeof i.maxOffset,s=i.windowStart>=0&&i.windowStart<=i.target&&i.target<=i.windowEnd&&i.maxOffset>=i.windowEnd;return e&&s}(i))throw new k("Invalid latency configuration");t.Mv=i},get manifest(){return t.Tv},addEventListener(i,e){t.dn(Qg(i),e)},removeEventListener(i,e){t.hn(Qg(i),e)}}}!function(t){t[t.yh=0]="yh",t[t.Nv=1]="Nv",t[t.Dv=2]="Dv"}(Pg||(Pg={}));var Ug=["golive","latencyrecoveryseek"];function Qg(t){const i=bo(t,hs);return(ji(i)?[i]:i).filter((t=>ks(Ug,t)))}var fo=class extends i{set Ew(t){const i=this.Lw;t!==i&&(i&&this.xw(i),t&&this.Ow(t),this.Lw=t,this.Lw&&(this.Lw.Mv=this.Iv))}get Ew(){return this.Lw}get so(){return this.Oa||(this.Oa=Rg(this)),this.Oa}Ow(t){t.dn(Ug,this.Ds)}xw(t){t.hn(Ug,this.Ds)}Av(){var t;null==(t=this.Lw)||t.Av()}get mv(){var t;return null==(t=this.Lw)?void 0:t.mv}get pv(){var t;return null==(t=this.Lw)?void 0:t.pv}get yv(){var t;return null==(t=this.Lw)?void 0:t.yv}get vv(){return!!this.Lw&&this.Lw.vv}get Mv(){return this.Lw?this.Lw.Mv:this.Iv}set Mv(t){this.Lw&&(this.Lw.Mv=t),this.Iv=t}get Tv(){var t;return null==(t=this.Lw)?void 0:t.Tv}ln(){this.Uo(),this.Lw&&this.xw(this.Lw),this.Lw=void 0}constructor(){super(),this.Lw=void 0,this.Oa=void 0,this.Iv=function(t){return{windowStart:t.iA,windowEnd:t.sA,target:t.eA,maxOffset:t.nA}}(jg()),this.Lw=void 0}};r(),r(),r();var Fg="function"==typeof String.prototype.replaceAll?(t,i,e)=>t.replaceAll(i,e):(t,i,e)=>t.split(i).join(e);function Ji(t,i){return oe(t)&&-1!==t.indexOf(i)}var Lt="function"==typeof String.prototype.startsWith?(t,i)=>oe(t)&&t.startsWith(i):(t,i)=>oe(t)&&t.substr(0,i.length)===i,tl="function"==typeof String.prototype.endsWith?(t,i)=>oe(t)&&t.endsWith(i):(t,i)=>oe(t)&&t.substr(t.length-i.length,i.length)===i;function ns(t,i){return t.length===i.length&&t.toUpperCase()===i.toUpperCase()}var Yg="function"==typeof String.prototype.repeat?(t,i)=>t.repeat(i):(t,i)=>{let e=0|i;if(0===t.length||0===e)return"";let s=t,n="";for(;1==(1&e)&&(n+=s),e>>>=1,0!==e;)s+=s;return n},ta="function"==typeof String.prototype.padStart?(t,i,e)=>(void 0===e&&(e=" "),t.padStart(i,e)):(t,i,e)=>{void 0===e&&(e=" ");let s=e;const n=(0|i)-t.length;return n<=0?t:(n>s.length&&(s+=Yg(s,n/s.length)),s.slice(0,n)+t)},Gg=(String.prototype.padEnd,16384),Wg="function"==typeof String.fromCodePoint?t=>t.length<=Gg?String.fromCodePoint(...t):Hg(t,String.fromCodePoint):t=>{const i=[];for(let e of t)e>65535&&(e-=65536,i.push(e>>>10&1023|55296),e=56320|1023&e),i.push(e);return Vg(i)};function Vg(t){return t.length<=Gg?String.fromCharCode(...t):Hg(t,String.fromCharCode)}function Hg(t,i){const e=[];for(let s=0;s<t.length;s+=Gg)e.push(i(...t.slice(s,s+Gg)));return e.join("")}function qg(t){return t.replace(/[\\"]/g,(t=>"\\"+t))}function sa(t,i){const e=le.Ph(t);return wo(e,i),e.toString()}function wo(t,i){for(const e of C.keys(i))t.searchParams.set(e,i[e])}function Xg(t,i){let e=le.Sv(t);return i&&!tl(e,"/")&&(e+="/"),e}var Zg=/cache:(.+)?(?=&|$)/,Kg="http://webcache.googleusercontent.com/search?q=cache:";function Jg(t){if(!Lt(t,Kg))return"";const i=le.Ph(t).search.match(Zg);return i&&i.length>1?i[1]:""}function $g(t){return le.Ph(".",t)}r();var Pc,zr,Bt,tw,an,jo,he,iw="1ADD53F3";function ew(t){return{appID:t&&t.appID?hs(t.appID):iw}}function Io(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":return!0;default:return!1}}function sw(t){return!!t&&Ji(t,"mpd")}function nw(t){let i=Bt.Ev;return sw(t)&&(i=Bt.bv),function(t){return!!t&&Ji(t,"m3u8")}(t)&&(i=Bt.Lv),i}function rw(t){switch(t){case zr.xv:case zr.Cv:return t;default:return zr.Ov}}function hw(t){if(!t)return!1;const i=t.toLowerCase();return Lt(i,Bt.bv)}function ow(t){if(!t)return!1;const i=t.toLowerCase();return Lt(i,Bt.Lv)||Lt(i,Bt.zv)}function ha(t){return Uo(t)&&Uo(t.ssai)&&"google-dai"===t.ssai.integration}function aw(t){return Uo(t)&&ji(t.integration)&&"verizon-media"===t.integration}function uw(t){return Uo(t)&&ji(t.integration)&&"mediatailor"===t.integration}function cw(t){if(ji(t))return!t;if(aw(t))return!t.id;if(ha(t)){const i=t.ssai,e="live"===i.availabilityType&&i.assetKey,s="vod"===i.availabilityType&&i.contentSourceID&&i.videoID;return Boolean(e&&s)}return!t.src}function qc(t){return Boolean(Uo(t)&&ji(t.src))}function lw(t){return t.type===Bt.Pv||t.type===Bt.Bv}function da(t){return ji(t)||qc(t)||ha(t)||aw(t)}function Wc(t){if(t){if(da(t))return cw(t);for(const i of t)if(!cw(i))return!1;return!0}return!0}function dw(){return{crossOrigin:zr.Ov,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[]}}function fw(){return qr({},dw(),{src:void 0,type:Bt.Ev,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function _w(t){const i={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:tw.ENABLED,googleIma:{useNativeIma:!1,bitrate:-1}};return void 0===t||(void 0!==t.preload&&(i.preload=function(t){return"none"===t?an.NONE:an.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(i.showCountdown=Uc(t.showCountdown)),void 0!==t.vpaidMode&&(i.vpaidMode=function(t){switch(t){case"insecure":return tw.INSECURE;case"disabled":return tw.DISABLED;default:return tw.ENABLED}}(t.vpaidMode)),Gr(t.allowedMimeTypes)&&(i.allowedMimeTypes=t.allowedMimeTypes.filter(ji)),void 0!==t.googleIma&&(i.googleIma=function(t){return void 0===t?{useNativeIma:!1,bitrate:-1}:{useNativeIma:Uc(t.useNativeIma),bitrate:null!=(i=t.bitrate)?i:-1};var i}(t.googleIma))),i}function gw(t){if(!fe(t))return[];const i=[];for(const e of t)rt(e)&&i.push(e);return i}function Co(t){return ji(t.src)}function ww(t){return Gr(t)?t.filter(Io):[]}!function(t){t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled"}(Pc||(Pc={})),r(),r(),function(t){t.Ov="",t.xv="anonymous",t.Cv="use-credentials"}(zr||(zr={})),function(t){t.bv="application/dash+xml",t.Lv="application/vnd.apple.mpegurl",t.zv="application/x-mpegurl",t.Ev="video/mp4",t.Pv="application/vnd.theoplayer.hesp+json",t.Bv="application/vnd.theo.hesp+json"}(Bt||(Bt={})),r(),r(),function(t){t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled"}(tw||(tw={})),r(),r(),function(t){t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll"}(an||(an={})),r(),function(t){t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange"}(jo||(jo={})),r(),r(),function(t){t[t.Rv=0]="Rv",t[t.Un=1]="Un",t[t.Uv=2]="Uv",t[t.Qv=3]="Qv",t[t.Fv=4]="Fv"}(he||(he={}));var Fo=class extends d{constructor(i,e=he.Rv){super(t.MA),this.currentTime=i,this.readyState=e}};r();var bs=class extends d{constructor(i){super(t.bh),this.currentTime=i}};r();var ih=class extends d{constructor(i){super(t.wh),this.currentTime=i}};r();var as=class extends d{constructor(t,i=he.Un){super(Dt.uv),this.currentTime=t,this.readyState=i}};r();var jn=class extends d{constructor(i){super(t.yA),this.duration=i}};r();var ce=class extends d{constructor(i,e){super(t.RA),this.currentTime=i,this.playbackRate=e}};r();var bl=class extends d{constructor(i,e){super(t.XA),this.currentTime=i,this.currentProgramDateTime=e}};r();var Ki=class extends d{constructor(i){super(t.NA),this.currentTime=i}};r();var js=class extends d{constructor(t,i=he.Uv){super(Dt.ov),this.currentTime=t,this.readyState=i}};r();var gt=class extends d{constructor(i){super(t.YA),this.currentTime=i}};r();var ke=class extends d{constructor(i){super(t.FA),this.currentTime=i}};r();var ge=class extends d{constructor(i,e){super(t.ZA),this.currentTime=i,this.volume=e}};r();var E=class extends d{constructor(t,i=he.Qv){super(Dt.rv),this.currentTime=t,this.readyState=i}};r();var us=class extends d{constructor(t,i=he.Fv){super(Dt.hv),this.currentTime=t,this.readyState=i}};r();var Z=class extends d{constructor(t,i){super(Dt._w),this.currentTime=t,this.readyState=i}};r();var _i=class extends Js{get error(){return this.errorObject.message}Qh(){return this}constructor(t){super(be.ha),this.errorObject=t}};async function Sa(t,i,e,s,n){void 0===e&&(e=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(i)}catch(t){if(Et(t),r<e){const t=S.min(s*2**r,n);r++,await yc(t,i);continue}throw t}}r();var Zt,Aw,vw={maxRetries:1/0,minimumBackoff:200,maximumBackoff:3e4};function xo(t){if(!oe(t))return;return pw(vg(null==t?void 0:t.preferredAudioCodecs,hs),vg(null==t?void 0:t.preferredVideoCodecs,hs),ri(null==t?void 0:t.restrictToPlayerSize))}function mw(t,i){if(!oe(t)&&!oe(i))return;var e;return pw(yw(null==t?void 0:t.preferredAudioCodecs,null==i?void 0:i.preferredAudioCodecs),yw(null==t?void 0:t.preferredVideoCodecs,null==i?void 0:i.preferredVideoCodecs),null!=(e=null==t?void 0:t.restrictToPlayerSize)?e:null==i?void 0:i.restrictToPlayerSize)}function pw(t,i,e){if(0!==t.length||0!==i.length||void 0!==e)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===i.length?void 0:i,restrictToPlayerSize:e}}function yw(t,i){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=i?i:[]}function Mw(t,i){if(void 0!==i)switch(t){case Zt.Yv:return i.preferredVideoCodecs;case Zt.Gv:return i.preferredAudioCodecs;default:return}}function Tw(t){switch(t){case"all":case"content":return t;default:return"none"}}function Qe(t){const i=Qi(t||{});return i.libraryLocation&&(i.libraryLocation=Xg(i.libraryLocation,!0)),i.isEmbeddable=Boolean(i.isEmbeddable),i.cast=function(t){const i=ew(t?t.chromecast:void 0),e=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:i,strategy:e}}(i.cast),i.ads=_w(i.ads),i.analytics=gw(i.analytics),i.mutedAutoplay=Tw(i.mutedAutoplay),i.allowNativeFullscreen=Boolean(i.allowNativeFullscreen),i.allowMixedContent=Boolean(i.allowMixedContent),i.persistVolume=Boolean(i.persistVolume),i.liveOffset=function(t){return Number(t)||void 0}(i.liveOffset),i.hlsDateRange=function(t){return Boolean(t)}(i.hlsDateRange),i.retainPlaybackRateOnSourceChange=Boolean(i.retainPlaybackRateOnSourceChange),i.license=function(t){return ji(t)?t:void 0}(i.license),i.licenseUrl=function(t){if(!t)return;try{return Xg(t)}catch(t){return void le.Wv("Invalid 'licenseUrl', falling back to default URL")}}(i.licenseUrl),i.vr=function(t){return{useWebXR:Boolean(t&&t.useWebXR)}}(i.vr),i.abr=xo(i.abr),i.retryConfiguration=function(t){const i=qr({},vw);return void 0!==t&&(void 0!==t.maxRetries&&(i.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(i.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(i.maximumBackoff=Number(t.maximumBackoff))),i}(i.retryConfiguration),i.hideDeprecationWarnings=Boolean(i.hideDeprecationWarnings),i}function Nw(t){return{I_:t.I_,lt:t.lt,L_:t.L_,dt:t.dt,C_:t.C_,Q_:t.Q_,V_:t.V_,q_:t.q_,og:t.og,fg:t.fg,wg:t.wg,pg:t.pg,Mg:t.Mg}}function Dw(t,i){const e=i.Mg,s=i.Q_;t.Mg=e,t.Q_=s}function Do(t,i,e){if(i===e)return;const s=i.I_,n=i.lt,r=i.Q_,h=i.V_,o=i.q_,a=i.og,u=i.fg,c=(i.pg,i.wg,i.Mg),l=e.I_,d=e.lt,f=e.L_,_=e.C_,g=e.Q_,w=e.V_,A=e.q_,v=e.og,m=e.fg,p=(e.pg,e.wg,e.Mg);a!==he.Rv&&t.jo(new Fo(l,v)),w&&!h?t.jo(new bs(l)):!w&&h&&t.jo(new ih(l)),v>=he.Un&&t.jo(new as(l,v)),d===n||M(d)&&M(n)||t.jo(new jn(d)),A!==o&&t.jo(new ce(l,A)),l!==s&&t.jo(new bl(l,void 0)),f&&t.jo(new Ki(l)),v>=he.Uv&&t.jo(new js(l,v)),m&&!u?t.jo(new gt(l)):!m&&u&&t.jo(new ke(l)),p===c&&g===r||t.jo(new ge(l,p)),v>=he.Qv&&t.jo(new E(l,v)),v>=he.Fv&&t.jo(new us(l,v)),v!==a&&t.jo(new Z(l,v)),_&&t.jo(new _i(_))}r(),r(),function(t){t.Gv="audio",t.Yv="video",t.Au="text",t.Vv="image",t.Hv="unknown"}(Zt||(Zt={})),function(t){t.NONE="none",t.ALL="all",t.CONTENT="content"}(Aw||(Aw={})),r();var fs=class extends d{constructor(i){super(t.mA),this.currentSource=i}};r();var vs=class extends d{constructor(){super(t.DA)}};r();var Iw=class extends d{constructor(){super(t.SA)}},Sw=class extends Wi{A_(){return this.qv}get j_(){return this.z_()}z_(){return this.Xv}gg(){return this.Tl}vg(){return this.Zv}Kv(t){const i=this.v_;if(i===t)return;i.g_(this.Hg);const e=Nw(this),s=this.D_(),n=this.xg(),r=this.Cg();this.v_=t,this.qv.Ew=t.ot,this.Zv.Ew=t.ht,this.Tl.Ew=t.rt,this.Xv.Ew=t.j_,void 0!==e&&Do(this,e,this);const h=this.D_();h!==s&&this.jo(new fs(h)),this.xg()!==n&&this.jo(new vs),this.Cg()!==r&&this.jo(new Iw),t.c_(this.Hg)}async ln(){await super.ln(),this.qv.ln(),this.Zv.ln(),this.Tl.ln(),this.Xv.ln()}constructor(t){super(t),this.qv=new au,this.Zv=new au,this.Tl=new Vc,this.Xv=new fo,this.qv.Ew=t.ot,this.Zv.Ew=t.ht,this.Tl.Ew=t.rt,this.Xv.Ew=t.j_}};r();var Ew=class extends Sw{U_(){return function(t){let i=0,e=0,s=0,n=0,r=0,h=0,o=0;for(const a of t)i+=a.Jv,e+=a.$v,s+=a.tm,n+=a.im,r+=a.nm,h+=a.hm.amountOfBufferedAudioSegments,o+=a.hm.amountOfBufferedVideoSegments;return{Jv:i,$v:e,tm:s,im:n,nm:r,hm:{amountOfBufferedAudioSegments:h,amountOfBufferedVideoSegments:o}}}(this.um.map((t=>t.R_)))}Eg(){return!1}Lg(t){}Rg(){return Nc(this.um.map((t=>t.Rg()))).then(h)}Gn(){return Nc(this.um.map((t=>t.Gn()))).then(h)}zg(){if(!this.ko){for(const t of this.um)t.zg();this.ko=!0}}m_(){const t=[];for(const i of this.um)t.push(...i.m_());return t}Wg(t){let i=!1;for(const e of this.um)i=e.Wg(t)||i;return i}jo(t){this.Wg(t)||super.jo(t)}get Ew(){return this.v_}set Ew(t){this.Kv(t)}lm(t){this.um.push(t)}dm(t){Hc(this.um,t)}Kv(t){if(t===this.v_)return;const i=this.v_;i.jg(),super.Kv(t),t.Og(i)}Yg(){for(const t of this.um)t.Yg()}async ln(){this.Uo(),this.v_.jg();for(const t of this.um)this.v_!==t&&await t.ln();await super.ln()}constructor(t){super(t),this.um=[],this.ko=!1,this.fm=!1,this.lm(t)}};r(),r();var Ri=class extends Ga{get name(){return"THEOplayerError"}get category(){return ju.fromCode(this.code)}constructor(t,i,e){super(i,e),this.code=t}};r();var Gi,ae=class extends Ri{get name(){return"ContentProtectionError"}constructor(t,i,e,s,n,r,h,o){super(t,i,e),this.url=s,this.status=n,this.statusText=r,this.response=h,this.systemCode=o}};!function(t){t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR"}(Gi||(Gi={}));var ma=class extends vo{get name(){return"MediaError"}constructor(t,i,e,s){super(i),this.code=t,this.message=null!=i?i:"Unknown error",this.cause=e,this.systemCode=s,k.captureStackTrace&&k.captureStackTrace(this,this.constructor)}};function bw(t){ko(t,"MEDIA_ERR_ABORTED",1),ko(t,"MEDIA_ERR_NETWORK",2),ko(t,"MEDIA_ERR_DECODE",3),ko(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),ko(t,"MEDIA_ERR_ENCRYPTED",5)}function Yn(t){var i,e;return function(t){return t.category===ju.CONTENT_PROTECTION}(t)?new ma(5,t.message,null==(i=t.cause)?void 0:i.message,t.systemCode):new ma(Lw(t.code),t.message,null==(e=t.cause)?void 0:e.message)}function Lw(t){if(t===ue.MEDIA_ABORTED)return 1;if(t===ue.MANIFEST_LOAD_ERROR||t===ue.MEDIA_LOAD_ERROR||t===ue.SUBTITLE_LOAD_ERROR)return 2;if(t===ue.MEDIA_DECODE_ERROR)return 3;if(t===ue.MEDIA_NOT_SUPPORTED)return 4;const i=ju.fromCode(t);return i===ju.NETWORK?2:i===ju.SOURCE?4:i===ju.LICENSE?6:i===ju.CONTENT_PROTECTION?5:i===ju.AD?7:3}function No(t){return new Ri(kw(t.code),t.message,t)}function kw(t){switch(t){case 1:return ue.MEDIA_ABORTED;case 2:return ue.NETWORK_ERROR;case 3:return ue.MEDIA_DECODE_ERROR;case 4:return ue.SOURCE_NOT_SUPPORTED;case 5:return ue.CONTENT_PROTECTION_ERROR;case 6:return ue.LICENSE_ERROR;case 7:return ue.AD_ERROR}}bw(ma),bw(ma.prototype),r(),r(),r(),r(),r();var ls=class extends Yi{it(t){return super.it(t)}Qh(){return Ng(this)}};r(),r(),r(),r();var Gc=class{get Nw(){return this._m}get L(){return this._m.length}get so(){return this.Oa||(this.Oa=function(t){const i=t.Nw.map((t=>t.so));return i.item=i=>{const e=0|i,s=t.Iw(e);return s&&s.so||void 0},i}(this)),this.Oa}gm(t){this._m.push(t),this.Oa&&this.Oa.push(t.so)}wm(t){Hc(this._m,t),this.Oa&&Hc(this.Oa,t.so)}Iw(t){return this._m[t]}Am(t){return Gr(t)?function(t,i){for(const e of i)if(!ks(t,e))return!1;return!0}(this._m,t):ks(this._m,t)}Gn(){sr(this._m),this.Oa&&sr(this.Oa)}constructor(){this._m=[],this.Oa=void 0}};r();var ms=class extends du{Qh(){return new xw(this.Ht.so)}constructor(t){super(ia.mw),this.Ht=t}},xw=class extends me{constructor(t){super("update"),this.track=t}};r();var Cw=0;function Ra(){return Cw++}var Ow=0;var jw=0;function zw(){return jw++}var Pw=0;function Bw(){return Pw++}var Rw=0;var Uw=class extends i{get Pw(){}get Ot(){return this.He}set Ot(t){this.He!==t&&(this.He=t,this.vm=t,this.jo(new eo(this)))}get vm(){return this.pm.enabled}set vm(t){this.pm.enabled=t}get so(){return this.Oa||(this.Oa=es(this)),this.Oa}get u(){return this.ym}get Bw(){return this.Mm}get Lt(){return this.pm.kind}get fh(){return this.Tm}set fh(t){t!==this.Tm&&(this.Tm=t,this.jo(new ms(this)))}get ys(){return this.pm.language}get Xw(){return this.Ot?"enabled":"disabled"}get Nm(){return this.pm}get Uw(){return this._m}get Qw(){}set Qw(t){}Dm(t){this.Ot=t}Im(){this.Ot=this.vm}constructor(t){super(),this.$w=Zt.Gv,this.He=!1,this.Oa=void 0,this.pm=t,this.Mm=Ra(),this.ym=Rw+++"",this.Tm=t.label,this._m=new Gc,this.Im()}};r();var Qw=0;var Fw=class extends i{get Pw(){}get Ot(){return this.He}set Ot(t){this.He!==t&&(this.He=t,this.vm=t,this.jo(new eo(this)))}get vm(){return!!this.pm.selected}set vm(t){this.pm.selected=t}get so(){return this.Oa||(this.Oa=es(this)),this.Oa}get u(){return this.ym}get Bw(){return this.Mm}get Lt(){return"main"}get fh(){return this.Tm}set fh(t){t!==this.Tm&&(this.Tm=t,this.jo(new ms(this)))}get ys(){return this.pm.language}get Xw(){return this.Ot?"enabled":"disabled"}get Nm(){return this.pm}get Uw(){return this._m}get Qw(){}set Qw(t){}Im(){this.Ot=this.vm}Dm(t){this.Ot=t}constructor(t){super(),this.$w=Zt.Yv,this.He=!1,this.Oa=void 0,this.pm=t,this.Mm=Ra(),this.ym=Qw+++"",this._m=new Gc,this.Tm=t.label,this.Im()}};r();var gu,Yw=class extends d{constructor(i){super(t.fA),this.P_=i}};r(),r(),function(t){t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR"}(gu||(gu={})),r(),r(),r(),r();var Gw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Ww=16383,Vw=/[\t\n\f\r ]/g;function Hw(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:qw()}function qw(){throw new k("Invalid base64 input")}function Sn(t){let i=t;Vw.test(i)&&(i=i.replace(Vw,""));let e=i.length;e%4==0&&e>=1&&"="===i[e-1]&&(e>=2&&"="===i[e-2]?e-=2:e-=1,i=i.substr(0,e));const s=e%4;if(1===s)return qw();const n=0===s?0:4-s,r=new A(function(t,i){return 3*(t+i)/4-i}(e,n)),h=n>0?e-4:e;let o,a=0,u=0;for(;a<h;a+=4)o=Hw(i.charCodeAt(a))<<18|Hw(i.charCodeAt(a+1))<<12|Hw(i.charCodeAt(a+2))<<6|Hw(i.charCodeAt(a+3)),r[u++]=o>>16&255,r[u++]=o>>8&255,r[u++]=255&o;return 2===n?(o=Hw(i.charCodeAt(a))<<2|Hw(i.charCodeAt(a+1))>>4,r[u++]=255&o):1===n&&(o=Hw(i.charCodeAt(a))<<10|Hw(i.charCodeAt(a+1))<<4|Hw(i.charCodeAt(a+2))>>2,r[u++]=o>>8&255,r[u++]=255&o),r}function Xw(t,i,e){return Gw[t>>2]+Gw[(3&t)<<4|i>>4]+Gw[(15&i)<<2|e>>6]+Gw[63&e]}function Zw(t,i,e){const s=[];for(let n=i;n<e;n+=3)s.push(Xw(t[n],t[n+1],t[n+2]));return s.join("")}function Nt(t){const i=t.length,e=i%3,s=[],n=i-e;for(let i=0;i<n;i+=Ww)s.push(Zw(t,i,S.min(n,i+Ww)));if(1===e){const e=t[i-1];s.push(Gw[e>>2]+Gw[(3&e)<<4]+"==")}else if(2===e){const e=t[i-2],n=t[i-1];s.push(Gw[e>>2]+Gw[(3&e)<<4|n>>4]+Gw[(15&n)<<2]+"=")}return s.join("")}var Kw=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],wa=ArrayBuffer.isView||(t=>t&&ks(Kw,uh.call(t)));function fa(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;return ds(new A(t),new A(i))}function ds(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;for(let e=0;e<t.length;e+=1)if(t[e]!==i[e])return!1;return!0}function fn(t){const i=t.reduce(((t,i)=>t+i.byteLength),0);return Jw(t,i)}function Jw(t,i){const e=new A(i);let s=0;for(const i of t)e.set(i,s),s+=i.byteLength;return e}function $w(t,i,e){const s=new A(t.byteLength+i.byteLength),n=FA(t,0,e),r=FA(t,e);return s.set(n),s.set(i,e),s.set(r,e+i.byteLength),s}function ga(t){return Sn(t).buffer}function tA(t){return Nt(new A(t))}function ya(t){return Nt(Es(t))}function He(t,i){const e=i.Lu,s=t.getUint8(e>>3),n=1<<7-(7&e);return i.Sm(1),(s&n)===n?1:0}function Cn(t,i,e){let s=0;for(let n=0;n<e;n++)s=2*s+He(t,i);return s}r();var iA=class t{get Lu(){return this.Hu}Sm(t){this.Hu+=t}Em(t){this.Hu=t}Lm(){return new t(this.Lu)}constructor(t=0){this.Hu=t}};r(),r();var Y=null;try{Y=new WebAssembly.Instance(new WebAssembly.Module(new A([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function Me(t,i,e){this.low=0|t,this.high=0|i,this.unsigned=!!e}function Yc(t){return!0===(t&&t.xm)}function eA(t){var i=S.clz32(t&-t);return t?31-i:i}Me.prototype.xm,C.defineProperty(Me.prototype,"xm",{value:!0}),Me.isLong=Yc;var sA={},nA={};function dn(t,i){var e,s,n;return i?(n=0<=(t>>>=0)&&t<256)&&(s=nA[t])?s:(e=$i(t,0,!0),n&&(nA[t]=e),e):(n=-128<=(t|=0)&&t<128)&&(s=sA[t])?s:(e=$i(t,t<0?-1:0,!1),n&&(sA[t]=e),e)}function ot(t,i){if(M(t))return i?cA:We;if(i){if(t<0)return cA;if(t>=oA)return _A}else{if(t<=-aA)return gA;if(t+1>=aA)return fA}return t<0?ot(-t,i).neg():$i(t%Bc|0,t/Bc|0,i)}function $i(t,i,e){return new Me(t,i,e)}Me.fromInt=dn,Me.fromNumber=ot,Me.fromBits=$i;var rA=S.pow;function hA(t,i,e){if(0===t.length)throw k("empty string");if("number"==typeof i?(e=i,i=!1):i=!!i,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return i?cA:We;if((e=e||10)<2||36<e)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw k("interior hyphen");if(0===s)return hA(t.substring(1),i,e).neg();for(var n=ot(rA(e,8)),r=We,h=0;h<t.length;h+=8){var o=S.min(8,t.length-h),a=j(t.substring(h,h+o),e);if(o<8){var u=ot(rA(e,o));r=r.mul(u).add(ot(a))}else r=(r=r.mul(n)).add(ot(a))}return r.unsigned=i,r}function _e(t,i){return"number"==typeof t?ot(t,i):"string"==typeof t?hA(t,i):$i(t.low,t.high,"boolean"==typeof i?i:t.unsigned)}Me.fromString=hA,Me.fromValue=_e;var Bc=4294967296,oA=Bc*Bc,aA=oA/2,uA=dn(1<<24),We=dn(0);Me.ZERO=We;var cA=dn(0,!0);Me.UZERO=cA;var Tc=dn(1);Me.ONE=Tc;var lA=dn(1,!0);Me.UONE=lA;var dA=dn(-1);Me.NEG_ONE=dA;var fA=$i(-1,2147483647,!1);Me.MAX_VALUE=fA;var _A=$i(-1,-1,!0);Me.MAX_UNSIGNED_VALUE=_A;var gA=$i(0,-2147483648,!1);Me.MIN_VALUE=gA;var Jr=Me.prototype;Jr.toInt=function(){return this.unsigned?this.low>>>0:this.low},Jr.toNumber=function(){return this.unsigned?(this.high>>>0)*Bc+(this.low>>>0):this.high*Bc+(this.low>>>0)},Jr.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(gA)){var i=ot(t),e=this.div(i),s=e.mul(i).sub(this);return e.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=ot(rA(t,6),this.unsigned),r=this,h="";;){var o=r.div(n),a=(r.sub(o.mul(n)).toInt()>>>0).toString(t);if((r=o).isZero())return a+h;for(;a.length<6;)a="0"+a;h=""+a+h}},Jr.getHighBits=function(){return this.high},Jr.getHighBitsUnsigned=function(){return this.high>>>0},Jr.getLowBits=function(){return this.low},Jr.getLowBitsUnsigned=function(){return this.low>>>0},Jr.getNumBitsAbs=function(){if(this.isNegative())return this.eq(gA)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,i=31;i>0&&0==(t&1<<i);i--);return 0!=this.high?i+33:i+1},Jr.isZero=function(){return 0===this.high&&0===this.low},Jr.eqz=Jr.isZero,Jr.isNegative=function(){return!this.unsigned&&this.high<0},Jr.isPositive=function(){return this.unsigned||this.high>=0},Jr.isOdd=function(){return 1==(1&this.low)},Jr.isEven=function(){return 0==(1&this.low)},Jr.equals=function(t){return Yc(t)||(t=_e(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},Jr.eq=Jr.equals,Jr.notEquals=function(t){return!this.eq(t)},Jr.neq=Jr.notEquals,Jr.ne=Jr.notEquals,Jr.lessThan=function(t){return this.comp(t)<0},Jr.lt=Jr.lessThan,Jr.lessThanOrEqual=function(t){return this.comp(t)<=0},Jr.lte=Jr.lessThanOrEqual,Jr.le=Jr.lessThanOrEqual,Jr.greaterThan=function(t){return this.comp(t)>0},Jr.gt=Jr.greaterThan,Jr.greaterThanOrEqual=function(t){return this.comp(t)>=0},Jr.gte=Jr.greaterThanOrEqual,Jr.ge=Jr.greaterThanOrEqual,Jr.compare=function(t){if(Yc(t)||(t=_e(t)),this.eq(t))return 0;var i=this.isNegative(),e=t.isNegative();return i&&!e?-1:!i&&e?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},Jr.comp=Jr.compare,Jr.negate=function(){return!this.unsigned&&this.eq(gA)?gA:this.not().add(Tc)},Jr.neg=Jr.negate,Jr.add=function(t){Yc(t)||(t=_e(t));var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=0,u=0,c=0,l=0;return c+=(l+=n+(65535&t.low))>>>16,u+=(c+=s+o)>>>16,a+=(u+=e+h)>>>16,a+=i+r,$i((c&=65535)<<16|(l&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},Jr.subtract=function(t){return Yc(t)||(t=_e(t)),this.add(t.neg())},Jr.sub=Jr.subtract,Jr.multiply=function(t){if(this.isZero())return this;if(Yc(t)||(t=_e(t)),Y)return $i(Y.mul(this.low,this.high,t.low,t.high),Y.get_high(),this.unsigned);if(t.isZero())return this.unsigned?cA:We;if(this.eq(gA))return t.isOdd()?gA:We;if(t.eq(gA))return this.isOdd()?gA:We;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(uA)&&t.lt(uA))return ot(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=65535&t.low,u=0,c=0,l=0,d=0;return l+=(d+=n*a)>>>16,c+=(l+=s*a)>>>16,l&=65535,c+=(l+=n*o)>>>16,u+=(c+=e*a)>>>16,c&=65535,u+=(c+=s*o)>>>16,c&=65535,u+=(c+=n*h)>>>16,u+=i*a+e*o+s*h+n*r,$i((l&=65535)<<16|(d&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},Jr.mul=Jr.multiply,Jr.divide=function(t){if(Yc(t)||(t=_e(t)),t.isZero())throw k("division by zero");var i,e,s;if(Y)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?$i((this.unsigned?Y.div_u:Y.div_s)(this.low,this.high,t.low,t.high),Y.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?cA:We;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return cA;if(t.gt(this.shru(1)))return lA;s=cA}else{if(this.eq(gA))return t.eq(Tc)||t.eq(dA)?gA:t.eq(gA)?Tc:(i=this.shr(1).div(t).shl(1)).eq(We)?t.isNegative()?Tc:dA:(e=this.sub(t.mul(i)),s=i.add(e.div(t)));if(t.eq(gA))return this.unsigned?cA:We;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=We}for(e=this;e.gte(t);){i=S.max(1,S.floor(e.toNumber()/t.toNumber()));for(var n=S.ceil(S.log(i)/S.LN2),r=n<=48?1:rA(2,n-48),h=ot(i),o=h.mul(t);o.isNegative()||o.gt(e);)o=(h=ot(i-=r,this.unsigned)).mul(t);h.isZero()&&(h=Tc),s=s.add(h),e=e.sub(o)}return s},Jr.div=Jr.divide,Jr.modulo=function(t){return Yc(t)||(t=_e(t)),Y?$i((this.unsigned?Y.rem_u:Y.rem_s)(this.low,this.high,t.low,t.high),Y.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},Jr.mod=Jr.modulo,Jr.rem=Jr.modulo,Jr.not=function(){return $i(~this.low,~this.high,this.unsigned)},Jr.countLeadingZeros=function(){return this.high?S.clz32(this.high):S.clz32(this.low)+32},Jr.clz=Jr.countLeadingZeros,Jr.countTrailingZeros=function(){return this.low?eA(this.low):eA(this.high)+32},Jr.ctz=Jr.countTrailingZeros,Jr.and=function(t){return Yc(t)||(t=_e(t)),$i(this.low&t.low,this.high&t.high,this.unsigned)},Jr.or=function(t){return Yc(t)||(t=_e(t)),$i(this.low|t.low,this.high|t.high,this.unsigned)},Jr.xor=function(t){return Yc(t)||(t=_e(t)),$i(this.low^t.low,this.high^t.high,this.unsigned)},Jr.shiftLeft=function(t){return Yc(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?$i(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):$i(0,this.low<<t-32,this.unsigned)},Jr.shl=Jr.shiftLeft,Jr.shiftRight=function(t){return Yc(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?$i(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):$i(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},Jr.shr=Jr.shiftRight,Jr.shiftRightUnsigned=function(t){return Yc(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?$i(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):$i(32===t?this.high:this.high>>>t-32,0,this.unsigned)},Jr.shru=Jr.shiftRightUnsigned,Jr.shr_u=Jr.shiftRightUnsigned,Jr.rotateLeft=function(t){var i;return Yc(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?$i(this.high,this.low,this.unsigned):t<32?(i=32-t,$i(this.low<<t|this.high>>>i,this.high<<t|this.low>>>i,this.unsigned)):(i=32-(t-=32),$i(this.high<<t|this.low>>>i,this.low<<t|this.high>>>i,this.unsigned))},Jr.rotl=Jr.rotateLeft,Jr.rotateRight=function(t){var i;return Yc(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?$i(this.high,this.low,this.unsigned):t<32?(i=32-t,$i(this.high<<i|this.low>>>t,this.low<<i|this.high>>>t,this.unsigned)):(i=32-(t-=32),$i(this.low<<i|this.high>>>t,this.high<<i|this.low>>>t,this.unsigned))},Jr.rotr=Jr.rotateRight,Jr.toSigned=function(){return this.unsigned?$i(this.low,this.high,!1):this},Jr.toUnsigned=function(){return this.unsigned?this:$i(this.low,this.high,!0)},Jr.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},Jr.toBytesLE=function(){var t=this.high,i=this.low;return[255&i,i>>>8&255,i>>>16&255,i>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},Jr.toBytesBE=function(){var t=this.high,i=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i]},Me.fromBytes=function(t,i,e){return e?Me.fromBytesLE(t,i):Me.fromBytesBE(t,i)},Me.fromBytesLE=function(t,i){return new Me(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,i)},Me.fromBytesBE=function(t,i){return new Me(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],i)};var Gt=Me;function wA(t,i){return t.lessThan(i)?t:i}function AA(t){if(t>=55296&&t<=57343)throw new k("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function vA(t,i){return t>>i&63|128}function mA(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(AA(t),i.push(t>>12&15|224),i.push(vA(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(vA(t,12)),i.push(vA(t,6))),i.push(63&t|128)):i.push(t)}function Dc(t,i){if(i.Lu>=t.length)throw new k("Invalid byte index");const e=255&t[i.Lu];if(i.Sm(1),128==(192&e))return 63&e;throw new k("Invalid continuation byte")}function pA(t,i){const e=i.Lu;if(e>t.length)throw new k("Invalid byte index");if(e===t.length)return!1;const s=255&t[e];if(i.Sm(1),0==(128&s))return s;if(192==(224&s)){const e=(31&s)<<6|Dc(t,i);if(e>=128)return e;throw new k("Invalid continuation byte")}if(224==(240&s)){const e=(15&s)<<12|Dc(t,i)<<6|Dc(t,i);if(e>=2048)return AA(e),e;throw new k("Invalid continuation byte")}if(240==(248&s)){const e=(7&s)<<18|Dc(t,i)<<12|Dc(t,i)<<6|Dc(t,i);if(e>=65536&&e<=1114111)return e}throw new k("Invalid UTF-8 detected")}r(),r();var yA=65279;var MA=[128,64,32,16,8,4,2,1],Fc=class{Cm(t){return TA(this.Om,t)}constructor(t){this.Om=t}};function TA(t,i){return(t&i)===i}function Yo(t,i){return TA(t,MA[i])}function q(t,i){const e=t.getUint8(i.Lu);return i.Sm(1),e}function NA(t,i,e){t.setUint8(i.Lu,e),i.Sm(1)}function pu(t,i,e){const s=FA(it(t),i.Lu,i.Lu+e);return i.Sm(s.byteLength),s}function vn(t,i,e){it(t).set(it(e),i.Lu),i.Sm(e.byteLength)}function DA(t,i,e){return i.Lu+e<=t.byteLength}function Oc(t,i,e,s){return void 0===s&&(s=!1),s?function(t,i,e){let s=0,n=1;for(let r=0;r<e;r++)s+=q(t,i)*n,n*=256;return s}(t,i,e):function(t,i,e){let s=0;for(let n=0;n<e;n++)s=256*s+q(t,i);return s}(t,i,e)}function IA(t,i,e){void 0===e&&(e=!1);const s=t.getUint16(i.Lu,e);return i.Sm(2),s}function SA(t,i,e,s){void 0===s&&(s=!1),t.setUint16(i.Lu,e,s),i.Sm(2)}function dt(t,i,e){void 0===e&&(e=!1);const s=t.getUint32(i.Lu,e);return i.Sm(4),s}function EA(t,i,e,s){void 0===s&&(s=!1),t.setUint32(i.Lu,e,s),i.Sm(4)}function Ye(t,i,e){void 0===e&&(e=!1);const s=dt(t,i,e),n=dt(t,i,e),r=e?n:s,h=e?s:n;return Gt.fromBits(h,r,!0)}function bA(t,i,e,s){void 0===s&&(s=!1);const n=e.getHighBitsUnsigned(),r=e.getLowBitsUnsigned(),h=s?n:r;EA(t,i,s?r:n,s),EA(t,i,h,s)}function LA(t,i){return Ka(t,i)}function Ys(t,i,e){return Vg(GA(pu(t,i,e)))}function kA(t,i){const e=q(t,i);let s;return 0==(128&e)?s=e:192==(224&e)?s=64*(31&e)+(63&q(t,i)):224==(240&e)?s=4096*(15&e)+64*(63&q(t,i))+(63&q(t,i)):240==(248&e)&&(s=262144*(7&e)+4096*(63&q(t,i))+64*(63&q(t,i))+(63&q(t,i))),s}function Ka(t,i){return xA(t,i,!0)}function xA(t,i,e){const s=[];for(;i.Lu<t.byteLength;){const n=q(t,i);if(e&&!n)break;s.push(n)}return Vg(s)}function CA(t,i,e){const s=e.length;for(let n=0;n<s;n+=1){NA(t,i,e.charCodeAt(n))}}function OA(t,i){if(!(i.Lu+2<=t.byteLength))return;const e=t.getUint8(i.Lu),s=t.getUint8(i.Lu+1);return(254!==e||255!==s)&&(255===e&&254===s||void 0)}function jA(t,i){const e=OA(t,i);return void 0!==e&&i.Sm(2),pa(t,i,!0===e)}function pa(t,i,e){return void 0===e&&(e=!1),zA(t,i,e,!0)}function zA(t,i,e,s){const n=[];for(;i.Lu+2<=t.byteLength;){const r=IA(t,i,e);if(s&&!r)break;n.push(r)}return Vg(n)}function PA(t,i,e,s){void 0===s&&(s=!1);const n=e.length;for(let r=0;r<n;r+=1){SA(t,i,e.charCodeAt(r),s)}}function ys(t){return xA(mo(t),new Eo,!1)}function Es(t){const i=new A(t.length);return CA(mo(i),new Eo,t),i}function BA(t,i){return void 0===i&&(i=!1),zA(mo(t),new Eo,i,!1)}function RA(t,i){void 0===i&&(i=!1);const e=new A(2*t.length);return PA(mo(e),new Eo,t,i),e}function UA(t,i){return i.Lu+3<=t.byteLength&&(239===t.getUint8(i.Lu)&&187===t.getUint8(i.Lu+1)&&191===t.getUint8(i.Lu+2))}function Rc(t,i){return function(t,i,e){const s=[],n=UA(t,i);n&&i.Sm(3);for(;i.Lu<t.byteLength;){const n=kA(t,i);if(void 0===n)break;if(e&&0===n)break;s.push(n)}return Wg(s)}(t,i,!0)}function zc(t){return function(t){return Wg(t)}(function(t,i){const e=[],s=new Eo;let n;if(!i){if(n=pA(t,s),!1===n)return e;n===yA||e.push(n)}for(;!1!==(n=pA(t,s));)e.push(n);return e}(it(t)))}function QA(t){return new A(function(t){const i=[];for(const e of t)mA(e,i);return i}(function(t){const i=[];let e=0;const s=t.length;for(;e<s;){const n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){const s=t.charCodeAt(e++);56320==(64512&s)?i.push(((1023&n)<<10)+(1023&s)+65536):(i.push(n),e--)}else i.push(n)}return i}(t)))}function Lc(t,i){if(UA(t,i))return Rc(t,i);if(void 0!==OA(t,i))return jA(t,i);if(i.Lu+4<=t.byteLength){if(0===t.getUint8(i.Lu)&&0===t.getUint8(i.Lu+2))return pa(t,i,!1);if(0===t.getUint8(i.Lu+1)&&0===t.getUint8(i.Lu+3))return pa(t,i,!0)}return Rc(t,i)}function FA(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new A(t.buffer,t.byteOffset+i,e-i)}function nn(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function mo(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function it(t){return new A(t.buffer,t.byteOffset,t.byteLength)}function YA(t){return t instanceof ArrayBuffer||wa(t)}function no(t){return t instanceof ArrayBuffer?new A(t):it(t)}function kh(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),t.slice?t.slice(i,e):nt(FA(t,i,e))}function nt(t){if(t.slice)return t.slice(0);{const i=new A(t.byteLength);return i.set(t,0),i}}function GA(t){return[].slice.call(t)}var xa,Eo=class t{get Lu(){return this.Hu}Sm(t){this.Hu+=t}Em(t){this.Hu=t}Lm(){return new t(this.Lu)}jm(){return new iA(this.Lu<<3)}constructor(t=0){this.Hu=t}};function pn(t){let i=t.toLowerCase(),e=0,s=0;Lt(i,"0x")&&(i=i.substring(2));const n=new A(S.ceil(i.length/2));for(1==(1&i.length)&&(e=1,n[s++]=j(i[0],16));e<i.length;e+=2)n[s++]=j(i.substr(e,2),16);return n}function WA(t){return.001*t}r(),function(t){t.zm="cue",t.Pm="region",t.Bm="stylesheet"}(xa||(xa={})),r(),r();var kl,VA={"line-left":"start",center:"middle","line-right":"end"},HA={start:"line-left",middle:"center",end:"line-right"};function qA(t,i){if("auto"===t)switch(i){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function XA(t,i){if("auto"===t)switch(i){case"left":return 0;case"right":return 100;default:return 50}return function(t,i){const e="number"==typeof t?t:T(t);return M(e)?i:e}(t,50)}r(),r(),r(),function(t){t.Rm="bo",t.Um="To",t.mw="Hn"}(kl||(kl={}));var ZA=class extends du{constructor(t,i){super(t),this.Qm=i}},_a=class extends me{constructor(t,i){super(t),this.cue=i}};function fc(t){const i=[kl.Rm,kl.Um,kl.mw];let e;const s={get track(){return t.Ht.so},get id(){return t.u},get uid(){return t.Bw},get startTime(){return t.Fm},set startTime(i){t.Fm=i},get endTime(){return t.Ym},set endTime(i){t.Ym=i},get content(){return t.V},addEventListener(t,i){const s=bo(t,hs);e.dn(s,i)},removeEventListener(t,i){const s=bo(t,hs);e.hn(s,i)}};return e=new bt(s),t.dn(i,(t=>e.jo(t.so))),s}function KA(){}function JA(t){return Wt(fc(t),{get align(){return t.Gm},get line(){return t.Wm},get lineAlign(){return t.Vm},get position(){return t.yo},get positionAlign(){return t.Hm},get region(){return t.qm?t.qm.so:null},get size(){return t.Xm},get snapToLines(){return t.Zm},get text(){return t.V},get vertical(){return t.Et}})}r(),r();var Pa=class extends ZA{Qh(){return new $A(this.Qm.so)}constructor(t){super(kl.mw,t)}},$A=class extends _a{constructor(t){super("update",t)}};r();var Ya=class extends du{Qh(){return new iv(this.Qm.so)}constructor(t){super(ia.nw),this.Qm=t}},iv=class extends me{constructor(t){super("updatecue"),this.cue=t}},ev=.02;function sv(t,i){return go(t.Km,i.Km,ev)&&go(t.Jm,i.Jm,ev)&&t.u===i.u}var Ss=class extends i{get Fm(){return this.$m}set Fm(t){var i,e;this.$m!==t&&(this.$m=t,null==(i=this.tp)||i.ip(this),this.jo(new Pa(this)),null==(e=this.tp)||e.jo(new Ya(this)))}get Ym(){return this.ep}set Ym(t){var i,e;this.ep!==t&&(this.ep=t,null==(i=this.tp)||i.ip(this),this.jo(new Pa(this)),null==(e=this.tp)||e.jo(new Ya(this)))}get u(){return this.ym}get Bw(){return this.Mm}get so(){return this.Oa||(this.Oa=this.Qh()),this.Oa}Qh(){return fc(this)}get ao(){return this.uo}set ao(t){this.uo=t}get Ht(){return this.tp}set Ht(t){this.tp=t}get V(){return this.sp}set V(t){var i;this.sp!==t&&(this.sp=t,this.jo(new Pa(this)),null==(i=this.tp)||i.jo(new Ya(this)))}get np(){return this.rp}set np(t){this.rp=t}hp(t){return this===t||gg(this,t)&&sv(this,t)&&this.op(t)}op(t){return Xc(this.V,t.V)}ap(t,i){this.$m=t,this.ep=i,this.Km=t,this.Jm=i}ln(){this.Uo()}constructor(t,i,e,s,n){super(),this.Oa=void 0,this.tp=void 0,this.uo=!1,this.cp=-1,this.Mm=Bw(),this.$m=t,this.ep=i,this.Km=t,this.Jm=i,this.sp=e,this.rp=Boolean(s),this.ym=null!=n?n:""}};function nv(t,i){return t.V===i.V&&t.Wm===i.Wm&&t.Vm===i.Vm&&t.yo===i.yo&&t.Hm===i.Hm&&t.qm===i.qm&&t.Zm===i.Zm&&t.Xm===i.Xm&&t.Gm===i.Gm&&t.Et===i.Et}var xl=class extends Ss{get so(){return this.Oa||(this.Oa=JA(this)),this.Oa}get $w(){return xa.zm}op(t){return nv(this,t)}constructor(t,i,e,s,n){super(t,i,e,s,n),this.Wm="auto",this.Vm="start",this.yo="auto",this.Hm="auto",this.qm=void 0,this.Zm=!0,this.Xm=100,this.Gm="center",this.Et=""}};function rv(t){const i=I_(t.Wm)?t.Wm:T(t.Wm);return M(i)||t.Zm||!(i<0||i>100)?M(i)?t.Zm?-1:100:i:100}function hv(t){return XA(t.yo,t.Gm)}function ov(t){return qA(t.Hm,t.Gm)}function av(t){const i=ov(t),e=hv(t);let s;switch(i){case"line-left":s=100-e;break;case"line-right":s=e;break;case"center":s=e<=50?2*e:2*(100-e)}return S.min(t.Xm,s)}function uv(t){return{get id(){return t.u},get identifier(){return t.u},get lines(){return t.lp},get regionAnchorX(){return t.dp},get regionAnchorY(){return t.fp},get scrollValue(){return t._p},get viewportAnchorX(){return t.gp},get viewportAnchorY(){return t.wp},get width(){return t.Ti}}}r(),r();var cv=class{get so(){return this.Oa||(this.Oa=uv(this)),this.Oa}get $w(){return xa.Pm}constructor(t,i,e,s,n,r,h,o){this.u=t,this.Ti=i,this.lp=e,this.dp=s,this.fp=n,this.gp=r,this.wp=h,this._p=o}};r(),r();var lv=1e6,cl=class{Ap(t){return this.vp()*t}mp(t){return this.pp(t)>0}yp(t){return this.pp(t)>=0}Mp(t,i){return this.Np(t).Tp(i)}hp(t){return 0===this.pp(t)}Dp(t){return this.pp(t)<0}Tp(t){return this.pp(t)<=0}Ip(){return this.Sp()?this.Ep():this}bp(t){return this.gm(t.Ep())}Np(t){return this.bp(t).Ip()}};function dv(t,i){return t.Lp()?i.Lp()?pi.Gr:pi.Pf:i.Lp()?pi.Bf:t.kp()?i.kp()&&t.Sp()===i.Sp()?pi.Gr:t.Sp()?pi.Bf:pi.Pf:i.Sp()?pi.Pf:pi.Bf}r(),r();var fv=4294967296,il=fv*fv,_v=il*il,gv=_v/2,ts=class t{static xp(i,e,s){return s?new t(i.toUnsigned(),e.toUnsigned()):new t(i.toSigned(),e.toSigned())}static Cp(i){return i.unsigned?new t(i,Gt.UZERO):new t(i,i.isNegative()?Gt.NEG_ONE:Gt.ZERO)}static Op(i,e){if(M(i))return e?t.jp:t.zp;if(e){if(i<0)return t.jp;if(i>=_v)return t.Pp}else{if(i<=-gv)return t.Bp;if(i+1>=gv)return t.Rp}return i<0?t.Op(-i,e).Ep():t.xp(Gt.fromNumber(i%il),Gt.fromNumber(i/il),e)}Up(){return this.Qp.unsigned}Fp(){return this.Yp.isZero()&&this.Qp.isZero()}Sp(){return this.Qp.isNegative()}Gp(){return this.Up()?t.xp(this.Yp,this.Qp,!1):this}Wp(){return this.Up()?this:t.xp(this.Yp,this.Qp,!0)}Vp(){return this.Yp}vp(){return this.Sp()?-this.Ep().vp():this.Qp.toNumber()*il+this.Yp.toUnsigned().toNumber()}Hp(){return this.Yp.toInt()}hp(t){return(this.Up()===t.Up()||this.Qp.getHighBits()>>>31!=1||t.Qp.getHighBits()>>>31!=1)&&(this.Qp.toUnsigned().eq(t.Qp.toUnsigned())&&this.Yp.toUnsigned().eq(t.Yp.toUnsigned()))}pp(t){if(this.hp(t))return pi.Gr;const i=this.Sp(),e=t.Sp();if(i&&!e)return pi.Bf;if(!i&&e)return pi.Pf;if(!this.Up())return this.bp(t).Sp()?pi.Bf:pi.Pf;const s=this.Wp(),n=t.Wp(),r=n.Qp.comp(s.Qp);return r>0||0===r&&n.Yp.gt(s.Yp)?pi.Bf:pi.Pf}Dp(t){return this.pp(t)<0}Tp(t){return this.pp(t)<=0}qp(t){return this.pp(t)>0}Xp(t){return this.pp(t)>=0}Zp(){return new t(this.Yp.not(),this.Qp.not())}Kp(i){return new t(this.Yp.and(i.Yp),this.Qp.and(i.Qp))}Jp(i){return new t(this.Yp.or(i.Yp),this.Qp.or(i.Qp))}$p(i){const e=127&i;return 0===e?this:e<64?t.xp(this.Yp.shl(e),this.Qp.shl(e).or(this.Yp.shru(64-e)),this.Up()):t.xp(Gt.ZERO,this.Yp.shl(e-64),this.Up())}iy(i){const e=127&i;return 0===e?this:e<64?t.xp(this.Yp.shru(e).or(this.Qp.shl(64-e)),this.Qp.shr(e),this.Up()):t.xp(this.Qp.shr(e-64),this.Qp.isNegative()?Gt.NEG_ONE:Gt.ZERO,this.Up())}ey(i){const e=127&i;return 0===e?this:e<64?t.xp(this.Yp.shru(e).or(this.Qp.shl(64-e)),this.Qp.shru(e),this.Up()):64===e?t.xp(this.Qp,Gt.ZERO,this.Up()):t.xp(this.Qp.shru(e-64),Gt.ZERO,this.Up())}gm(i){const e=this.Qp.high>>>16,s=65535&this.Qp.high,n=this.Qp.low>>>16,r=65535&this.Qp.low,h=this.Yp.high>>>16,o=65535&this.Yp.high,a=this.Yp.low>>>16,u=65535&this.Yp.low,c=i.Qp.high>>>16,l=65535&i.Qp.high,d=i.Qp.low>>>16,f=65535&i.Qp.low,_=i.Yp.high>>>16,g=65535&i.Yp.high,w=i.Yp.low>>>16;let A=0,v=0,m=0,p=0,y=0,M=0,T=0,N=0;N+=u+(65535&i.Yp.low),T+=N>>>16,N&=65535,T+=a+w,M+=T>>>16,T&=65535,M+=o+g,y+=M>>>16,M&=65535,y+=h+_,p+=y>>>16,y&=65535,p+=r+f,m+=p>>>16,p&=65535,m+=n+d,v+=m>>>16,m&=65535,v+=s+l,A+=v>>>16,v&=65535,A+=e+c,A&=65535;const D=this.Up(),I=Gt.fromBits(m<<16|p,A<<16|v,D),S=Gt.fromBits(T<<16|N,y<<16|M,D);return t.xp(S,I,D)}bp(t){return this.gm(t.Ep())}Ep(){return this.Zp().gm(t.sy)}oy(i){if(this.Fp()||i.Fp())return this.Up()?t.jp:t.zp;if(this.Sp())return i.Sp()?this.Ep().oy(i.Ep()):this.Ep().oy(i).Ep();if(i.Sp())return this.oy(i.Ep()).Ep();if(this.Qp.isZero()&&0===this.Yp.high&&i.Qp.isZero()&&0===i.Yp.high)return t.Cp(this.Yp.multiply(i.Yp));const e=Gt.fromBits(4294967295,0,!0),s=this.Yp.and(e),n=this.Yp.shru(32),r=this.Qp.and(e),h=this.Qp.shru(32),o=i.Yp.and(e),a=i.Yp.shru(32),u=i.Qp.and(e),c=i.Qp.shru(32);let l=Gt.UZERO,d=Gt.UZERO,f=Gt.UZERO,_=Gt.UZERO;l=l.add(s.mul(o)),d=d.add(l.shru(32)),l=l.and(e),d=d.add(n.mul(o)),f=f.add(d.shru(32)),d=d.and(e),d=d.add(s.mul(a)),f=f.add(d.shru(32)),d=d.and(e),f=f.add(r.mul(o)),_=_.add(f.shru(32)),f=f.and(e),f=f.add(n.mul(a)),_=_.add(f.shru(32)),f=f.and(e),f=f.add(s.mul(u)),_=_.add(f.shru(32)),f=f.and(e),_=_.add(h.mul(o)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(e);const g=Gt.fromBits(l.getLowBitsUnsigned(),d.getLowBitsUnsigned(),!0),w=Gt.fromBits(f.getLowBitsUnsigned(),_.getLowBitsUnsigned(),!0);return t.xp(g,w,this.Up())}uy(i){let e,s,n=i;if(n.Fp())throw new RangeError("division by zero");if(this.Fp())return this.Up()?[t.jp,t.jp]:[t.zp,t.zp];if(this.Up()){if(n.Up()||(n=n.Wp()),n.qp(this))return[t.jp,this];if(n.qp(this.ey(1)))return s=t.ly,e=this.bp(n),[s,e];s=t.jp}else{if(this.hp(t.Bp)){if(n.hp(t.sy)||n.hp(t._y))return[t.Bp,t.zp];if(n.hp(t.Bp))return[t.sy,t.zp];{const i=this.iy(1).gy(n).$p(1);return i.hp(t.zp)?s=n.Sp()?t.sy:t._y:(e=this.bp(n.oy(i)),s=i.gm(e.gy(n))),e=this.bp(n.oy(s)),[s,e]}}if(n.hp(t.Bp))return this.Up()?[t.jp,this]:[t.zp,this];if(this.Sp())return n.Sp()?this.Ep().uy(n.Ep()):([s,e]=this.Ep().uy(n),[s.Ep(),e.Ep()]);if(n.Sp())return[s,e]=this.uy(n.Ep()),[s.Ep(),e.Ep()];s=t.zp}for(e=this;e.Xp(n);){let i=S.max(1,S.floor(e.vp()/n.vp()));const r=S.ceil(S.log(i)/S.LN2),h=r<=48?1:2**(r-48);let o=t.Op(i),a=o.oy(n);for(;a.Sp()||a.qp(e);)i-=h,o=t.Op(i,this.Up()),a=o.oy(n);o.Fp()&&(o=t.sy),s=s.gm(o),e=e.bp(a)}return[s,e]}gy(t){return this.uy(t)[0]}wy(t){return this.uy(t)[1]}toString(i){const e=i||10;if(e<2||e>36)throw new RangeError("radix");if(this.Fp())return"0";if(this.Sp()){if(this.hp(t.Bp)){const i=t.Op(e),s=this.gy(i),n=s.oy(i).bp(this);return s.toString(e)+n.Hp().toString(e)}return"-"+this.Ep().toString(e)}const s=t.Op(e**6,this.Up());let n=this,r="";for(;;){const t=n.gy(s);let i=(n.bp(t.oy(s)).Hp()>>>0).toString(e);if(n=t,n.Fp())return i+r;for(;i.length<6;)i="0"+i;r=String(i)+r}}constructor(t,i){this.Yp=t,this.Qp=i}};ts.zp=ts.Cp(Gt.ZERO),ts.jp=ts.Cp(Gt.UZERO),ts.sy=ts.Cp(Gt.ONE),ts.ly=ts.Cp(Gt.UONE),ts._y=ts.Cp(Gt.NEG_ONE),ts.Rp=ts.xp(Gt.NEG_ONE,Gt.MAX_VALUE,!1),ts.Pp=ts.xp(Gt.MAX_UNSIGNED_VALUE,Gt.MAX_UNSIGNED_VALUE,!0),ts.Bp=ts.xp(Gt.ZERO,Gt.MIN_VALUE,!1),r();var al=class t{get kp(){return!isFinite(this.Ay)}get Ll(){return this.Ay/this.vy}static py(i){return new t(S.ceil(i.Ay),i.vy)}static yy(i){return new t(S.floor(i.Ay),i.vy)}static My(t,i){return t.yp(i)?t:i}static Ty(t,i){return t.Tp(i)?t:i}gm(i){return this.vy>=i.vy?new t(this.Ay+i.Ny(this.vy).Ay,this.vy):new t(this.Ny(i.vy).Ay+i.Ay,i.vy)}mp(t){return t.Dp(this)}yp(t){return t.Tp(this)}Np(i){if(this.vy>=i.vy){const e=S.abs(this.Ay-i.Ny(this.vy).Ay),s=this.vy;return new t(e,s)}return i.Np(this)}Mp(t,i){return this.Np(t).Tp(i)}pp(t){return function(t,i){return t.vy>=i.vy?O_(t.Ay,i.Ny(t.vy).Ay):O_(t.Ny(i.vy).Ay,i.Ay)}(this,t)}hp(t){return 0===this.pp(t)}Dp(t){return this.pp(t)<0}Tp(t){return this.pp(t)<=0}Ny(i){return new t(this.Ay*(i/this.vy),i)}bp(i){return this.vy>=i.vy?new t(this.Ay-i.Ny(this.vy).Ay,this.vy):new t(this.Ny(i.vy).Ay-i.Ay,i.vy)}Dy(i){return new t(this.Ay*i,this.vy)}constructor(t,i=1){this.Ay=t,this.vy=i}};al.Hl=new al(1/6,1),al.zp=new al(0),al.Iy=new al(1/0),al.Sy=1e6;var Gn=class t extends cl{static Ey(i,e){return void 0===e&&(e=lv),t.Op(i*e,e)}static Op(i,e){return M(i)?t.by:i===1/0?t.Ly:i===-1/0?t.xy:new t(Gt.fromNumber(i),e)}static Cp(i,e){return new t(i,e)}static Cy(i){return t.Ey(i.Ll,lv)}static Oy(i){return new t(Gt.fromNumber(i.getTime()),1e3)}static My(t,i){return t.yp(i)?t:i}static Ty(t,i){return t.Tp(i)?t:i}static jy(i,e,s){return t.My(e,t.Ty(s,i))}Sp(){return this.zy.isNegative()}Fp(){return 0!==this.vy&&this.zy.isZero()}kp(){return 0===this.vy&&!this.zy.isZero()}Lp(){return 0===this.vy&&this.zy.isZero()}vp(){if(0===this.vy)return this.zy.isZero()?NaN:this.zy.isNegative()?-1/0:1/0;const t=this.zy.divide(this.vy),i=this.zy.subtract(t.multiply(this.vy));return t.toNumber()+i.toNumber()/this.vy}Vp(){if(0===this.vy)throw new k("Failed to convert timestamp");return this.zy}Py(){return new Date(0===this.vy?NaN:this.Ny(1e3).zy.toNumber())}By(){return new al(0===this.vy?this.vp():this.zy.toNumber(),this.vy)}Ny(i,e){void 0===e&&(e=Wa.Ry);const s=this.vy;if(s===i)return this;if(0===s)return this;const n=C_(s,i),r=function(t,i,e){const[s,n]=t.uy(i);if(n.Fp())return s;if(e===Wa.Ry)return n.Sp()?s.bp(ts.sy):s;if(e===Wa.Uy)return n.Sp()?s:s.gm(ts.sy);{const t=n.oy(ts.Op(2));return t.Sp()?t.Ep().Dp(i)?s:s.bp(ts.sy):t.Dp(i)?s:s.gm(ts.sy)}}(ts.Cp(this.zy).oy(ts.Op(i/n)),ts.Op(s/n),e);return new t(r.Vp(),i)}pp(t){if(this===t)return pi.Gr;if(0===this.vy||0===t.vy)return dv(this,t);if(this.Fp())return t.Fp()?pi.Gr:t.Sp()?pi.Pf:pi.Bf;if(t.Fp())return this.Sp()?pi.Bf:pi.Pf;const i=S.min(this.vy,t.vy),e=this.Ny(i,Wa.Qy).zy,s=t.Ny(i,Wa.Qy).zy;return e.compare(s)}Ep(){return 0===this.vy?function(t){0;return t.Lp()?t:t.Sp()?Gn.Ly:Gn.xy}(this):new t(this.zy.negate(),this.vy)}gm(i){if(0===this.vy||0===i.vy)return function(t,i){0;if(t.Lp()||i.Lp())return Gn.by;if(t.kp()&&i.kp())return t.Sp()===i.Sp()?t:Gn.by;return t.kp()?t:i}(this,i);if(this.Fp())return i;if(i.Fp())return this;const e=S.max(this.vy,i.vy),s=this.Ny(e,Wa.Qy),n=i.Ny(e,Wa.Qy);return new t(s.zy.add(n.zy),e)}oy(i){if(this.Lp()||M(i))return t.by;if(this.kp()||!isFinite(i)){if(this.Fp()||0===i)return t.by;{const e=this.Sp()?t.xy:t.Ly;return i<0?e.Ep():e}}return this.Fp()?this:new t(0===i?Gt.ZERO:this.zy.multiply(i),this.vy)}gy(i){if(this.Lp()||M(i))return t.by;if(this.kp())return isFinite(i)?0===i?1/i<0?this.Ep():this:i<0?this.Ep():this:t.by;if(!isFinite(i))return new t(Gt.ZERO,this.vy);if(this.Fp())return 0===i?t.by:new t(Gt.ZERO,this.vy);if(0===i){const e=this.Sp()?t.xy:t.Ly;return 1/i<0?e.Ep():e}return new t(this.zy.divide(i),this.vy)}Fy(){return[this.zy.low,this.zy.high,this.vy]}constructor(t,i){super(),this.zy=t.toSigned(),this.vy=i>>>0}};Gn.zp=new Gn(Gt.ZERO,lv),Gn.by=new Gn(Gt.ZERO,0),Gn.Ly=new Gn(Gt.ONE,0),Gn.xy=new Gn(Gt.NEG_ONE,0),r();var Wa,xt=class t extends cl{static Ey(i,e){return void 0===e&&(e=lv),t.Op(i*e,e)}static Op(i,e){return M(i)?t.by:i===1/0?t.Ly:i===-1/0?t.xy:new t(BigInt(S.floor(i)),e)}static Cp(i,e){return new t(BigInt(i.high)<<BigInt(32)|BigInt(i.low>>>0),e)}static Cy(i){return t.Ey(i.Ll,lv)}static Oy(i){return t.Op(i.getTime(),1e3)}static get zp(){return t.Yy||(t.Yy=new t(BigInt(0),lv)),t.Yy}static get by(){return t.Gy||(t.Gy=new t(BigInt(0),0)),t.Gy}static get Ly(){return t.Wy||(t.Wy=new t(BigInt(1),0)),t.Wy}static get xy(){return t.Vy||(t.Vy=new t(BigInt(-1),0)),t.Vy}static My(t,i){return t.yp(i)?t:i}static Ty(t,i){return t.Tp(i)?t:i}static jy(i,e,s){return t.My(e,t.Ty(s,i))}Sp(){return this.zy<BigInt(0)}Fp(){return 0!==this.vy&&this.zy===BigInt(0)}kp(){return 0===this.vy&&this.zy!==BigInt(0)}Lp(){return 0===this.vy&&this.zy===BigInt(0)}vp(){if(0===this.vy)return this.zy===BigInt(0)?NaN:this.zy<BigInt(0)?-1/0:1/0;const t=this.zy/BigInt(this.vy),i=this.zy-t*BigInt(this.vy);return Number(t)+Number(i)/this.vy}Vp(){if(0===this.vy)throw new k("Failed to convert timestamp");return this.Hy()}Hy(){const t=this.zy&BigInt(4294967295),i=this.zy>>BigInt(32)&BigInt(4294967295);return Gt.fromBits(Number(t),Number(i))}Py(){return new Date(0===this.vy?NaN:Number(this.Ny(1e3).zy))}By(){return new al(0===this.vy?this.vp():Number(this.zy),this.vy)}Ny(i,e){void 0===e&&(e=Wa.Ry);const s=this.vy;if(s===i)return this;if(0===s)return this;const n=C_(s,i),r=function(t,i,e){const s=t/i,n=t-s*i;if(n===BigInt(0))return s;if(e===Wa.Ry)return n<BigInt(0)?s-BigInt(1):s;if(e===Wa.Uy)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<i?s:s-BigInt(1):t<i?s:s+BigInt(1)}}(this.zy*BigInt(i/n),BigInt(s/n),e);return new t(r,i)}pp(t){if(this===t)return pi.Gr;if(0===this.vy||0===t.vy)return dv(this,t);if(this.Fp())return t.Fp()?pi.Gr:t.Sp()?pi.Pf:pi.Bf;if(t.Fp())return this.Sp()?pi.Bf:pi.Pf;const i=S.min(this.vy,t.vy),e=this.Ny(i,Wa.Qy).zy,s=t.Ny(i,Wa.Qy).zy;return e>s?pi.Pf:e<s?pi.Bf:pi.Gr}Ep(){return 0===this.vy?function(t){0;return t.Lp()?t:t.Sp()?xt.Ly:xt.xy}(this):new t(-this.zy,this.vy)}gm(i){if(0===this.vy||0===i.vy)return function(t,i){0;if(t.Lp()||i.Lp())return xt.by;if(t.kp()&&i.kp())return t.Sp()===i.Sp()?t:xt.by;return t.kp()?t:i}(this,i);if(this.Fp())return i;if(i.Fp())return this;const e=S.max(this.vy,i.vy),s=this.Ny(e,Wa.Qy),n=i.Ny(e,Wa.Qy);return new t(s.zy+n.zy,e)}oy(i){if(this.Lp()||M(i))return t.by;if(this.kp()||!isFinite(i)){if(this.Fp()||0===i)return t.by;{const e=this.Sp()?t.xy:t.Ly;return i<0?e.Ep():e}}return this.Fp()?this:new t(0===i?BigInt(0):this.zy*BigInt(i),this.vy)}gy(i){if(this.Lp()||M(i))return t.by;if(this.kp())return isFinite(i)?0===i?1/i<0?this.Ep():this:i<0?this.Ep():this:t.by;if(!isFinite(i))return new t(BigInt(0),this.vy);if(this.Fp())return 0===i?t.by:new t(BigInt(0),this.vy);if(0===i){const e=this.Sp()?t.xy:t.Ly;return 1/i<0?e.Ep():e}return new t(this.zy/BigInt(i),this.vy)}Fy(){const t=this.Hy();return[t.low,t.high,this.vy]}constructor(t,i){super(),this.zy=BigInt.asIntN(64,t),this.vy=i>>>0}};xt.Yy=void 0,xt.Gy=void 0,xt.Wy=void 0,xt.Vy=void 0,function(t){t[t.Ry=0]="Ry",t[t.Uy=1]="Uy",t[t.Qy=2]="Qy"}(Wa||(Wa={}));var So=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?xt:Gn;function fl(t,i){return t.pp(i)}function wv(t,i){return void 0!==t?void 0!==i?So.Ty(t,i):t:i}r();var Av=9e4,In=$_((()=>So.Op(8589934592,Av))),vv=$_((()=>In().gy(2)));r();var At,mv,Ea,ut,Ge,Zc={qy:0,Xy:1/0,Zy:0},pv=6,yv=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],Mv=[" ","\t","\n","\f","\r"],Tv=/^\d*$/,Nv=/.*[0-9]+.*/,Dv=/^[\d.-]+$/,Iv=/(^\.|\.$)/,Sv=/(\D\.|\.\D)/;function Ev(t,i){void 0===i&&(i=Zc);return bv(Lc(mo(t),new Eo),i)}function bv(t,i){void 0===i&&(i=Zc);const e={H:[],Ky:[],Jy:[]},s=Lv(t),n=new Eo;if(Uv(s),Na(s,(t=>"\n"!==t),n),n.Lu>=s.length)return e;if(n.Sm(1),"\n"!==s.charAt(n.Lu)){jv(kv(s,n,false,!0,e,i),e)}else n.Sm(1);for(Na(s,(t=>"\n"===t),n);n.Lu<s.length;){jv(kv(s,n,false,!1,e,i),e),Na(s,(t=>"\n"===t),n)}return e}function Lv(t){const i=Fg(t,"\0"," "),e=Fg(i,"\r\n","\n");return Fg(e,"\r","\n")}function Na(t,i,e){const s=e.Lu;for(;e.Lu<t.length&&i(t.charAt(e.Lu));)e.Sm(1);return t.substring(s,e.Lu)}function kv(t,i,e,s,n,r){let h,o=0,a=i.Lu,u="",c=!1,l=!1,d=null,f=null,_=null;for(;!c;)if(h=Na(t,(t=>"\n"!==t),i),o++,i.Lu>=t.length?c=!0:i.Sm(1),Ji(h,"--\x3e")){if(s||1!==o&&(2!==o||l)){i.Em(a);break}l=!0,a=i.Lu,d=new xl(0,0,"",!1,u);try{zv(h,n.Ky,d,r),u=""}catch(t){le.Wv(t),d=null}}else{if(""===h)break;s&&Lt(h,"X-TIMESTAMP-MAP")&&(n.$y=xv(h)),s||2!==o||e||(ns("STYLE",u.replace(/ /g,""))?(f={$w:xa.Bm},u=""):ns("REGION",u.replace(/ /g,""))&&(_=new cv("",100,3,0,100,0,100,""),u="")),u&&(u+="\n"),u+=h,a=i.Lu}if(d)return d.V=u,d;if(f);else if(_)return function(t,i){const e=t.split(/\s/),s=":";for(const t of e)if(0!==t.length&&Ji(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const e=t.indexOf(s),n=t.substring(0,e),r=t.substring(e+1,t.length);switch(n.toUpperCase()){case"ID":Kv(r,i);break;case"WIDTH":tm(r,i);break;case"LINES":$v(r,i);break;case"REGIONANCHOR":{const t=Zv(r);t&&(i.dp=t[0],i.fp=t[1]);break}case"VIEWPORTANCHOR":{const t=Zv(r);t&&(i.gp=t[0],i.wp=t[1]);break}case"SCROLL":Jv(r,i)}}}(u,_),_;return null}function xv(t){const i=t.split("=")[1].trim().split(","),e=Ov(i[0].trim(),"MPEGTS")?i[0]:i[1],s=Ov(i[0].trim(),"LOCAL")?i[0]:i[1];var n;return{tM:Cv(Number(e.split(/:(.*)/)[1].trim())||0),nh:So.Ey(null!=(n=Bv(s.split(/:(.*)/)[1].trim(),new Eo))?n:0)}}function Cv(t){return So.Op(t,Av)}function Ov(t,i){return Lt(t,i)}function jv(t,i){t&&function(t){return"cue"===t.$w}(t)?i.H.push(t):t&&function(t){return"region"===t.$w}(t)?i.Ky.push(t):t&&function(t){return"stylesheet"===t.$w}(t)&&i.Jy.push(t)}function zv(t,i,e,s){const n=new Eo;Fv(t,n);const r=Pv(Bv(t,n),s);if(Fv(t,n),"--\x3e"!==t.substring(n.Lu,n.Lu+3))throw k("Something went wrong with parsing a WebVTT Cue");n.Sm(3),Fv(t,n);const h=Pv(Bv(t,n),s);e.ap(r,h);!function(t,i,e){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&Ji(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),h=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":Vv(h,i,e);break;case"VERTICAL":qv(h,i);break;case"D":Xv(h,i);break;case"LINE":case"L":Gv(h,i);break;case"POSITION":case"T":Wv(h,i);break;case"SIZE":case"S":Hv(h,i);break;case"ALIGN":case"A":Yv(h,i)}}}(t.substring(n.Lu,t.length),e,i)}function Pv(t,i){return t+i.qy}function nl(t){return/^[0-9]$/.test(t)}function Bv(t,i){const e=Fg(t,",",".");let s,n,r,h=!1;if(i.Lu>=e.length||!nl(e.charAt(i.Lu)))throw new k("Something went wrong with parsing a WebVTT Cue timestamp");const o=Na(e,nl,i),a=j(o,10);if((o.length>2||a>59)&&(h=!0),i.Lu>=e.length||":"!==e.charAt(i.Lu))throw new k("Something went wrong with parsing a WebVTT Cue timestamp");i.Sm(1);const u=Na(e,nl,i);if(2!==u.length)throw new k("Something went wrong with parsing a WebVTT Cue timestamp");const c=j(u,10);if(h||i.Lu<e.length&&":"===e.charAt(i.Lu)){if(i.Lu>=e.length||":"!==e.charAt(i.Lu))throw new k("Something went wrong with parsing a WebVTT Cue timestamp");i.Sm(1);const t=Na(e,nl,i);if(2!==u.length)throw new k("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=j(t,10)}else s=0,n=a,r=c;if(i.Lu>=e.length||"."!==e.charAt(i.Lu))throw new k("Something went wrong with parsing a WebVTT Cue timestamp");i.Sm(1);const l=Na(e,nl,i),d=j(l,10);if(c>59||r>59)throw new k("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+d/1e3}function Rv(t){return Uv(Lv(t))}function Uv(t){if(t.length<pv)return!1;for(const i of yv)if(Lt(t,i))return!0;return!1}function Qv(t){return ks(Mv,t)}function Fv(t,i){for(;i.Lu<t.length&&Qv(t.charAt(i.Lu));)i.Sm(1)}function ol(t){const i=t.lastIndexOf("%");if(i>-1){const e=T(t.substring(0,i));if(!M(e)&&e>=0&&e<=100)return e}return null}function Yv(t,i){const e=t.toLowerCase();switch(e){case"start":case"center":case"end":case"left":case"right":i.Gm=e;break;case"middle":i.Gm="center"}}function Gv(t,i){let e,s;const n=t.indexOf(",");if(n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s=""),!Nv.test(e))return;let r,h;if(tl(e,"%")){const t=ol(e);if(null===t)return;r=t,h=!1}else{if(!Dv.test(e)||e.lastIndexOf("-")>0)return;const t=e.indexOf(".");if(t>=0&&(t!==e.lastIndexOf(".")||!Sv.test(e)||Iv.test(e)))return;if(r=T(e),M(r))return;h=!0}switch(i.Wm=r,i.Zm=h,s=s.toLowerCase(),s){case"start":case"center":case"end":i.Vm=s;break;case"middle":i.Vm="center"}}function Wv(t,i){let e,s;const n=t.indexOf(",");n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s="");const r=ol(e);if(null!==r)switch(i.yo=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":i.Hm=s;break;case"start":i.Hm="line-left";break;case"middle":i.Hm="center";break;case"end":i.Hm="line-right"}}function Vv(t,i,e){const s=j_(e,(i=>i.u===t));void 0!==s&&(i.qm=s)}function Hv(t,i){const e=ol(t);null!==e&&(i.Xm=e)}function qv(t,i){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":i.Et="rl";break;case"lr":case"vertical:lr":case"vertical-lr":i.Et="lr";break;default:i.Et=""}}function Xv(t,i){"VERTICAL"===t.toUpperCase()?i.Et="rl":"VERTICAL-LR"===t.toUpperCase()&&(i.Et="lr")}function Zv(t){if(t.indexOf(",")>=0){const i=ol(t.substring(0,t.indexOf(","))),e=ol(t.substring(t.indexOf(",")+1,t.length));return[et(i||0,0,100),et(e||100,0,100)]}return null}function Kv(t,i){i.u=t}function Jv(t,i){"up"===t.toLowerCase()&&(i._p="up")}function $v(t,i){Tv.test(t)&&(i.lp=j(t))}function tm(t,i){const e=ol(t);null!==e&&(i.Ti=e)}r(),r(),r(),function(t){t.iM="moov",t.eM="mvhd",t.sM="trak",t.nM="tkhd",t.rM="mdia",t.hM="mdhd",t.oM="hdlr",t.aM="minf",t.uM="stbl",t.cM="stsd",t.lM="stsc",t.dM="mvex",t.fM="trex",t._M="avc1",t.gM="avcC",t.wM="hev1",t.AM="hvc1",t.vM="hvcC",t.mM="vp09",t.pM="vpcC",t.yM="av01",t.MM="av1C",t.TM="colr",t.NM="pasp",t.DM="mp4a",t.IM="esds",t.SM="wvtt",t.EM="vttC",t.bM="vlab",t.LM="enca",t.kM="encv",t.xM="moof",t.CM="mfhd",t.OM="traf",t.jM="tfhd",t.zM="trun",t.PM="tfdt",t.BM="senc",t.RM="mdat",t.UM="pssh",t.QM="emsg",t.FM="sidx",t.YM="styp",t.GM="ftyp",t.WM="sinf",t.VM="frma"}(At||(At={})),function(t){t.Yv="vide",t.Gv="soun",t.HM="subt",t.qM="hint",t.XM="meta",t.ZM="auxv"}(mv||(mv={})),function(t){t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof"}(Ea||(Ea={})),function(t){t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF"}(ut||(ut={})),function(t){t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT"}(Ge||(Ge={})),r();var lh=class t{KM(){return q(this.JM,this.$M)}tT(){return IA(this.JM,this.$M)}iT(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt16(i.Lu,e);return i.Sm(2),s}(this.JM,this.$M)}eT(){return dt(this.JM,this.$M)}sT(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt32(i.Lu,e);return i.Sm(4),s}(this.JM,this.$M)}nT(){return Ye(this.JM,this.$M)}rT(t){return pu(this.JM,this.$M,t)}hT(t){return function(t,i,e){const s=[];for(let n=0;n<e;n++)s.push(dt(t,i));return s}(this.JM,this.$M,t)}oT(t){return Ys(this.JM,this.$M,t)}aT(){return Rc(this.JM,this.$M)}uT(t){this.$M.Sm(t)}Lm(){return new t(this.JM,this.$M.Lm())}constructor(t,i){this.JM=t,this.$M=i}};r(),r();function im(t,i){return t.$w===i}function em(t,i){for(const e of t)if(im(e,i))return e}var ul=class extends Ga{get name(){return"DataIncompleteError"}constructor(t,i){super(),this.cT=t,this.lT=i}},vt=class t{static dT(i){const e=i.JM,s=i.$M,n=t.fT(e,s,!1);if(!n._T)throw new ul(s.Lu,n.k);return n.k}static fT(i,e,s){const n=[];for(;e.Lu<i.byteLength;){const r=t.gT(i,e,s);if(!r._T)return{_T:!1,k:n};n.push(r.wT)}return{_T:!0,k:n}}static AT(i,e){const s=t.gT(i,e,!1);if(!s._T)throw new ul(e.Lu);return s.wT}static vT(i,e){const s=i.JM,n=i.$M;for(;n.Lu<s.byteLength;){const i=t.gT(s,n,!1);if(!i._T)return;if(i.wT.$w===e)return i.wT}}static gT(i,e,s){const n=e.Lu,r=t.mT(i,e);if(!r._T)return r;const h=r.pT;let o=h.Xm;if(0===o){if(s)return e.Em(n),{_T:!1,yT:1/0};o=i.byteLength-n}const a=n+o;if(a>i.byteLength){const t=a;return e.Em(n),{_T:!1,yT:t}}const u={$w:h.$w,Lu:n,JM:new lh(nn(i,n,a),new Eo(h.MT))};return e.Em(a),{_T:!0,wT:u}}static mT(t,i){const e=i.Lu;if(!DA(t,i,8)){return{_T:!1,yT:i.Lu+8}}let s=dt(t,i),n=Ys(t,i,4);if(1===s){if(!DA(t,i,8)){const t=i.Lu+8;return i.Em(e),{_T:!1,yT:t}}s=Ye(t,i).toNumber()}if("uuid"===n){if(!DA(t,i,16)){const t=i.Lu+16;return i.Em(e),{_T:!1,yT:t}}n=Ys(t,i,16)}return{_T:!0,pT:{$w:n,Xm:s,MT:i.Lu-e}}}static TT(t,i,e){const s=t.JM,n=t.$M;let r=FA(it(s),n.Lu,s.byteLength);return e&&(r=nt(r)),n.Sm(r.byteLength),{$w:i,JM:r}}static NT(i,e,s){const n=i.eT(),{version:r,flags:h}=Xa(n);return{$w:e,DT:r,IT:h,JM:t.TT(i,e,s).JM}}};function Us(t,i){const e=sm(t,i);if(!e)throw new k("Missing "+i+" atom");return e}function sm(t,i){for(const e of t)if(e.$w===i)return e.JM}function yn(t,i){const e=[];for(const s of t)s.$w===i&&e.push(s.JM);return e}function Xa(t){return{version:t>>24,flags:new Fc(16777215&t)}}var Rs=class t{static ST(i){const e=[],s=vt.dT(new lh(i,new Eo));for(const i of s){const s=t.ET(i);s&&e.push(s)}return e}static bT(t){return vt.fT(t,new Eo,!1).k.some(this.LT)}static kT(i){return yn(vt.dT(new lh(i,new Eo)),At.UM).map(t.xT)}static CT(i){return yn(vt.dT(i.JM),At.UM).map(t.xT)}static LT(t){return t.$w===At.GM||t.$w===At.YM||t.$w===At.iM||t.$w===At.xM||t.$w===At.RM||t.$w===At.FM||t.$w===At.QM}static ET(i){switch(i.$w){case At.iM:return t.OT(i.JM);case At.xM:return t.jT(i.JM,i.Lu);case At.RM:return t.zT(i.JM);case At.FM:return t.PT(i.JM);case At.QM:return t.BT(i.JM)}}static OT(i){const e=vt.dT(i),s=Us(e,At.eM),n=yn(e,At.sM),r=sm(e,At.dM),h=t.RT(s),o=n.map(t.UT),a=r?t.QT(r):void 0;return{$w:At.iM,pT:h,tt:o,FT:a}}static RT(t){const i=t.eT(),{version:e,flags:s}=Xa(i),n=1===e?t.nT():t.eT(),r=1===e?t.nT():t.eT(),h=t.eT(),o=1===e?t.nT():t.eT(),a=t.eT(),u=t.tT()>>8;t.uT(2),t.uT(8);const c=t.hT(9);t.uT(24);const l=t.eT();return{$w:At.eM,DT:e,IT:s,YT:n,GT:r,vy:h,lt:o,WT:a,Mg:u,VT:c,HT:l}}static UT(i){const e=vt.dT(i),s=Us(e,At.nM),n=Us(e,At.rM),r=t.qT(s),h=t.XT(n);return{$w:At.sM,pT:r,ZT:h}}static qT(t){const i=t.eT(),{version:e,flags:s}=Xa(i),n=1===e?t.nT():t.eT(),r=1===e?t.nT():t.eT(),h=t.eT();t.uT(4);const o=1===e?t.nT():t.eT();t.uT(8);const a=t.iT(),u=t.iT(),c=t.iT()/256;t.uT(2);const l=t.hT(9),d=t.eT()/65536,f=t.eT()/65536;return{$w:At.nM,KT:s.Cm(1),JT:s.Cm(2),$T:s.Cm(4),YT:n,GT:r,tN:h,lt:o,iN:a,eN:u,Mg:c,VT:l,Ti:d,Mi:f}}static XT(i){const e=vt.dT(i),s=Us(e,At.hM),n=Us(e,At.oM),r=Us(e,At.aM),h=t.sN(s),o=t.nN(n),a=t.rN(r);return{$w:At.rM,pT:h,hN:o,oN:a}}static sN(t){const i=t.eT(),{version:e,flags:s}=Xa(i),n=1===e?t.nT():t.eT(),r=1===e?t.nT():t.eT(),h=t.eT(),o=1===e?t.nT():t.eT();t.tT();return t.uT(2),{$w:At.hM,DT:e,IT:s,YT:n,GT:r,vy:h,lt:o}}static nN(t){const i=t.eT(),{version:e,flags:s}=Xa(i);t.uT(4);const n=t.oT(4);t.uT(12);const r=t.aT();return{$w:At.oM,DT:e,IT:s,aN:n,v:r}}static rN(i){const e=Us(vt.dT(i),At.uM),s=t.uN(e);return{$w:At.aM,cN:s}}static uN(i){const e=Us(vt.dT(i),At.cM),s=t.lN(e);return{$w:At.uM,dN:s}}static lN(i){const e=i.eT(),{version:s,flags:n}=Xa(e),r=(i.eT(),[]),h=vt.dT(i);for(const i of h){const e=t.fN(i.JM,i.$w);e&&r.push(e)}return{$w:At.cM,DT:s,IT:n,_N:r}}static fN(i,e){let s=t.gN(i,e);return s||(s=t.wN(i,e),s||(e===At.SM?t.AN(i):void 0))}static gN(i,e){return e===At.DM?t.vN(i):e===At.LM?t.mN(i):void 0}static wN(i,e){return e===At._M?t.pN(i):e===At.wM||e===At.AM?t.yN(i,e):e===At.mM?t.MN(i,e):e===At.yM?t.TN(i,e):e===At.kM?t.NN(i):void 0}static DN(t,i){t.uT(6);return{$w:i,IN:t.tT()}}static SN(i,e){const s=t.DN(i,e);i.uT(8);const n=i.tT(),r=i.tT();i.uT(2),i.uT(2);return qr({},s,{EN:n,bN:r,LN:i.eT()>>>16})}static kN(i,e){const s=t.DN(i,e);i.uT(2),i.uT(2),i.uT(12);const n=i.tT(),r=i.tT(),h=i.eT(),o=i.eT();i.uT(4);const a=i.tT();i.uT(32);const u=i.tT();return i.uT(2),qr({},s,{Ti:n,Mi:r,xN:h,CN:o,ON:a,jN:u})}static vN(i){const e=t.SN(i,At.DM),s=Us(vt.dT(i),At.IM);return qr({},e,{zN:t.PN(s)})}static AN(i){const e=t.DN(i,At.SM),s=vt.dT(i),n=Us(s,At.EM),r=t.BN(n),h=sm(s,At.bM);return qr({},e,{RN:r,UN:h?t.QN(h):h})}static BN(t){return{$w:At.EM,dd:t.aT()}}static QN(t){return{$w:At.bM,fh:t.aT()}}static PN(t){return vt.NT(t,At.IM,!0)}static pN(i){const e=t.kN(i,At._M),s=vt.dT(i),n=Us(s,At.gM),r=sm(s,At.NM);return qr({},e,{FN:t.YN(n),GN:r?t.WN(r):void 0})}static yN(i,e){const s=t.kN(i,e),n=Us(vt.dT(i),At.vM);return qr({},s,{VN:t.HN(n)})}static MN(i,e){const s=t.kN(i,e),n=Us(vt.dT(i),At.pM);return qr({},s,{qN:t.XN(n)})}static TN(i,e){const s=t.kN(i,e),n=vt.dT(i),r=Us(n,At.MM),h=t.ZN(r),o=sm(n,At.TM);return qr({},s,{KN:h,JN:o?t.$N(o):void 0})}static NN(i){const e=i.Lm(),s=t.kN(i,At.kM),n=Us(vt.dT(i),At.WM),r=t.tD(n);return qr({},s,{iD:t.wN(e,r.sD.eD),nD:r})}static mN(i){const e=i.Lm(),s=t.SN(i,At.LM),n=Us(vt.dT(i),At.WM),r=t.tD(n);return qr({},s,{iD:t.gN(e,r.sD.eD),nD:r})}static tD(i){const e=Us(vt.dT(i),At.VM),s=t.rD(e);return{$w:At.WM,sD:s}}static rD(t){const i=t.oT(4);return{$w:At.VM,eD:i}}static YN(t){return vt.TT(t,At.gM,!0)}static HN(t){return vt.TT(t,At.vM,!0)}static XN(t){return vt.TT(t,At.pM,!0)}static ZN(t){return vt.TT(t,At.MM,!0)}static $N(t){const i=t.oT(4);switch(i){case"nclx":return{hD:Ea.ON_SCREEN_COLOURS,oD:t.tT(),aD:t.tT(),uD:t.tT(),cD:0!=(128&t.KM())};case"rICC":return{hD:Ea.RESTRICTED_ICC_PROFILE};case"prof":return{hD:Ea.UNRESTRICED_ICC_PROFILE};default:throw k("Could not parse ColourInformationBox: unknown type '"+i+"'.")}}static WN(t){const i=t.eT(),e=t.eT();return{$w:At.NM,lD:i,dD:e}}static QT(i){const e=yn(vt.dT(i),At.fM).map(t.fD);return{$w:At.dM,tt:e}}static fD(t){const i=t.eT(),{version:e,flags:s}=Xa(i),n=t.eT(),r=t.eT(),h=t.eT(),o=t.eT(),a=t.eT();return{$w:At.fM,DT:e,IT:s,tN:n,_D:r,gD:h,wD:o,vD:a}}static jT(i,e){const s=vt.dT(i),n=Us(s,At.CM),r=yn(s,At.OM),h=t.mD(n),o=r.map(t.pD);return{$w:At.xM,yD:e,pT:h,tt:o}}static mD(t){const i=t.eT(),{version:e,flags:s}=Xa(i),n=t.eT();return{$w:At.CM,DT:e,IT:s,MD:n}}static pD(i){const e=vt.dT(i),s=Us(e,At.jM),n=yn(e,At.zM),r=sm(e,At.PM),h=t.TD(s),o=n.map((i=>t.ND(i,h))),a=r?t.DD(r):void 0;return{$w:At.OM,pT:h,SD:o,ED:a}}static TD(t){const i=t.eT(),{version:e,flags:s}=Xa(i),n=t.eT(),r=s.Cm(ut.BASE_DATA_OFFSET_PRESENT)?t.nT():void 0,h=s.Cm(ut.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.eT():void 0,o=s.Cm(ut.DEFAULT_SAMPLE_DURATION_PRESENT)?t.eT():void 0,a=s.Cm(ut.DEFAULT_SAMPLE_SIZE_PRESENT)?t.eT():void 0,u=s.Cm(ut.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.eT():void 0;return{$w:At.jM,DT:e,IT:s,tN:n,bD:r,LD:h,gD:o,wD:a,vD:u}}static ND(i,e){const s=i.eT(),{version:n,flags:r}=Xa(s),h=i.eT(),o=r.Cm(Ge.DATA_OFFSET_PRESENT)?i.sT():void 0,a=r.Cm(Ge.FIRST_SAMPLE_FLAGS_PRESENT)?i.eT():void 0,u=[];for(let s=0;s<h;s++){const h=t.kD(i,r,n,e);0===s&&void 0!==a&&(h.IT=a),u.push(h)}return{$w:At.zM,DT:n,IT:r,xD:h,yD:o,CD:a,OD:u}}static kD(t,i,e,s){return{lt:i.Cm(Ge.SAMPLE_DURATION_PRESENT)?t.eT():s.gD,Xm:i.Cm(Ge.SAMPLE_SIZE_PRESENT)?t.eT():s.wD,IT:i.Cm(Ge.SAMPLE_FLAGS_PRESENT)?t.eT():s.vD,jD:i.Cm(Ge.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===e?t.eT():t.sT():void 0}}static BT(t){const i=t.JM,e=t.$M,s=dt(i,e),{version:n,flags:r}=Xa(s);if(1===n){const t=dt(i,e),s=Ye(i,e),h=dt(i,e),o=dt(i,e),a=LA(i,e),u=LA(i,e),c=kh(it(i),e.Lu,i.byteLength);return e.Sm(c.byteLength),{$w:At.QM,DT:n,IT:r,zD:a,zy:u,vy:t,PD:s,BD:h,u:o,RD:c}}{const t=LA(i,e),s=LA(i,e),h=dt(i,e),o=dt(i,e),a=dt(i,e),u=dt(i,e),c=kh(it(i),e.Lu,i.byteLength);return e.Sm(c.byteLength),{$w:At.QM,IT:r,DT:n,zD:t,zy:s,vy:h,UD:o,BD:a,u:u,RD:c}}}static zT(t){return vt.TT(t,At.RM,!1)}static xT(i){const e=i.JM,s=i.$M,n=nt(it(e)).buffer,r=dt(e,s),{version:h,flags:o}=Xa(r),a=t.QD(e,s),u=[];if(h>0){const t=dt(e,s);for(let i=0;i<t;i++){const t=pu(e,s,16);u.push(t)}}const c=dt(e,s),l=new A(n,s.Lu,c);return s.Sm(e.byteLength),{$w:At.UM,DT:h,IT:o,FD:a,YD:u,GD:c,JM:l,WD:n}}static QD(t,i){let e="";for(let s=0;s<4;s++){const s=q(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=q(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=q(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=q(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<6;s++){const s=q(t,i).toString(16);e+=1===s.length?"0"+s:s}return e.toLowerCase()}static PT(t){const i=t.JM,e=t.$M,s=dt(i,e),{version:n,flags:r}=Xa(s),h=dt(i,e),o=dt(i,e);let a,u;0===n?(a=Gt.fromBits(dt(i,e),0,!0),u=Gt.fromBits(dt(i,e),0,!0)):(a=Ye(i,e),u=Ye(i,e)),e.Sm(2);const c=IA(i,e),l=[];for(let t=0;t<c;t+=1){const t=dt(i,e),s=t>>31&1,n=2147483647&t,r=dt(i,e),h=dt(i,e),o=h>>31&1,a=h>>28&7,u=268435455&h;l.push({VD:s,HD:n,lt:r,qD:o,XD:a,ZD:u})}return{$w:At.FM,DT:n,IT:r,KD:h,vy:o,JD:a,$D:u,tI:c,iI:l}}static DD(t){const i=t.JM,e=t.$M,s=dt(i,e),{version:n,flags:r}=Xa(s);let h;return h=0===n?Gt.fromBits(dt(i,e),0,!0):Ye(i,e),{$w:At.PM,DT:n,IT:r,ED:h}}};function nm(t){return t&&"eI"in t?t.eI:t}r(),r();var pl,rm=class extends Ss{get sI(){return this.nI}get Ky(){return this.rI}get hI(){return this.oI}get so(){return this.Oa||(this.Oa=function(t){return Wt(fc(t),{get styles(){return t.sI},get regions(){return t.Ky},get metadata(){return nm(t.hI)},get content(){return nm(t.V)}})}(this)),this.Oa}op(t){return!!Xc(this.sI,t.sI)&&(!!Xc(this.Ky,t.Ky)&&(this.hI&&t.hI?!!this.hI.aI(t.hI)&&(this.V&&t.V?this.V.aI(t.V):this.V===t.V):this.hI===t.hI))}constructor(t,i,e,s,n,r,h){super(t,i,e,s),this.nI=n,this.rI=r,this.oI=h||void 0}};function ps(t){return 1===t.uI}function hm(t){return 3===t.uI}r(),r(),function(t){t[t.cI=1]="cI",t[t.lI=2]="lI",t[t.Au=3]="Au",t[t.dI=4]="dI",t[t.fI=9]="fI"}(pl||(pl={}));var hl=class{get _I(){return this.mf.gI(!0)}get Fm(){return this.wI}get Ym(){return this.AI}constructor(t,i,e){this.wI=t,this.AI=i,ps(e)?this.mf=function(t,i,e){for(const t of["begin","end","dur"])e.vI(t);return e}(0,0,e):this.mf=e}};r();var el={VIDEO_H264:"video/avc",VIDEO_H265:"video/hevc",VIDEO_MP4:"video/mp4",VIDEO_MPEG:"video/mpeg",VIDEO_MPEG2:"video/mpeg2",VIDEO_WEBM:"video/webm",VIDEO_UNKNOWN:"video/x-unknown",AUDIO_AAC:"audio/mp4a-latm",AUDIO_MP4:"audio/mp4",AUDIO_WEBM:"audio/webm",AUDIO_UNKOWN:"audio/x-unknown",IMAGE_JPEG:"image/jpeg",APPLICATION_TTML_XML:"application/ttml+xml",APPLICATION_MP4:"application/mp4",TEXT_VTT:"text/vtt"};function er(t){return Ji(t,el.APPLICATION_MP4)||Ji(t,el.VIDEO_MP4)||Ji(t,el.AUDIO_MP4)}function om(t){return Ji(t,el.VIDEO_WEBM)||Ji(t,el.AUDIO_WEBM)}var am=class{mI(t){for(const[i,e]of this.pI)if(i.toLowerCase()===t.toLowerCase())return e}constructor(t,i){this.$w=t,this.pI=i}};function um(t){const i=t.trim(),e=i.indexOf(";");if(e<0)return new am(i,[]);const s=i.substr(0,e).trim(),n=i.substr(e+1).trim(),r=[];let h=0,o=!1;for(let t=0;t<n.length;t++){const i=n[t];if(o||";"!==i)'"'===i&&(o=!o);else{const i=cm(n.substr(h,t));i&&r.push(i),h=t+1}}if(h!==n.length){const t=cm(n.substr(h));t&&r.push(t)}return new am(s,r)}function cm(t){const i=t.indexOf("=");if(i<0)return;const e=t.substr(0,i).trim();let s=t.substr(i+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[e,s]}function sl(t){const i=t.trim(),e=i.indexOf(";");return e<0?i:i.substr(0,e).trim()}function lm(t){let i=t;const e=i.match(/^avc1\.(\d+)\.(\d+)$/);if(e){const t=Number(e[1]),s=Number(e[2]);i="avc1."+ta((t<<16|s).toString(16),6,"0")}return i}r();var dm="http://www.w3.org/XML/1998/namespace";function fm(t,i,e,s){let n=t.yI(e,i);return 0===n.length&&(n=t.MI(s+":"+i)),n}function _m(t){const i={};for(const e of t.TI)i[e.NI]=e.zy;return i}var gm=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,wm=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,Am="http://www.w3.org/ns/ttml";function vm(t,i,e,s){void 0===e&&(e=Zc),void 0===s&&(s=el.APPLICATION_TTML_XML);let n=[];const r=mo(t);return s===el.APPLICATION_MP4?n=function(t,i,e){const s=Rs.ST(t),n=em(s,At.RM);if(!n)return[];return ym(mo(n.JM),i,e)}(r,i,e):s===el.APPLICATION_TTML_XML&&(n=ym(r,i,e)),n}function mm(t,i,e){return void 0===e&&(e=Zc),Mm(t,i,e)}function pm(t,i){const e=Lm(i._I),s={};for(const i of e)s[i]=t[i];return s}function ym(t,i,e){return Mm(Lc(t,new Eo),i,e)}function Mm(t,i,e){const s=[];let n;try{n=le.DI(t)}catch(t){return s}const r=n.II;if("tt"!==r.NI)return s;const h=r&&r.yI(Am,"head")[0],o=r&&r.yI(Am,"body")[0];if(!o||!h)return s;const a=function(t){const i={},e=t.yI(Am,"styling")[0],s=e&&e.yI(Am,"style")||[];for(const t of s){i[t.SI(dm,"id")]=_m(t)}return i}(h),u=function(t){const i={},e=t.yI(Am,"layout")[0],s=e&&e.yI(Am,"region")||[];for(const t of s){const e=t.SI(dm,"id");if(!e)continue;i[e]=_m(t);const s=bm(t);for(const t in s)$c.call(s,t)&&(i[e][t]=s[t])}return i}(h),c=function(t,i){const e=Qi(t),s=Dm(i.EI("tts:extent"));if(!s)return e;for(const t of C.keys(e)){const i=Dm(e[t].extent);if(i){const n=Tm(i[0],s[0]),r=Tm(i[1],s[1]);e[t].extent=n+" "+r}const n=Dm(e[t].origin);if(n){const i=Tm(n[0],s[0]),r=Tm(n[1],s[1]);e[t].origin=i+" "+r}}return e}(u,r),l=h.yI(Am,"metadata")[0],d=Im(o,e.qy,e.Xy,e.Zy);for(const t of d){const i=pm(c,t);s.push(new rm(t.Fm,t.Ym,t._I,!1,a,i,l))}return s}function Tm(t,i){const e=Nm(t),s=Nm(i);if(e&&s&&e===s){const n=Number(t.slice(0,-e.length)),r=Number(i.slice(0,-s.length));return M(n)||M(r)?t:n/r*100+"%"}return t}function Nm(t){return tl(t,"px")?"px":tl(t,"em")?"em":tl(t,"c")?"c":tl(t,"%")?"%":void 0}function Dm(t){if(!t)return;const i=t.split(" ");return 2===i.length?[i[0],i[1]]:void 0}function Im(t,i,e,s){let n,r=i,h=e,o=[];const a=[];if(ps(t)){var u,c;r=null!=(u=Em(t.EI("begin"),s))?u:r,n=Em(t.EI("dur"),0),h=null!=(c=Em(t.EI("end"),s))?c:void 0!==n?r+n:h;const i=t.bI;for(let e=0;e<i.length;e++)("body"===t.NI||"div"===t.NI)&&i[e].uI>1||(o=o.concat(Im(i[e],r,h,s)))}const l=function(t,i,e){const s=[];s.push(t,i);for(const t of e)s.push(t.Fm,t.Ym);s.sort(de);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(Ks(s,t+1),t--,n=s.length);return s}(r,h,o);for(let i=0;i<l.length-1;i++){const e=Sm(l[i],l[i+1],o);if(e.length<=0&&km(t)){const e=t.gI(!1);a.push(new hl(l[i],l[i+1],e))}else if(e.length>0){const s=t.gI(!1);e.forEach((t=>s.LI(t._I))),a.push(new hl(l[i],l[i+1],s))}}return a}function Sm(t,i,e){const s=[];for(let n=0;n<e.length;n++){const r=e[n].Fm,h=e[n].Ym;(r>=t&&h<=i||r<i&&h>=i||r<t&&h>t)&&s.push(e[n])}return s}function Em(t,i){if(t){if(gm.test(t)){const e=gm.exec(t);if(!e)return;const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,h=e[6];return 3600*s+60*n+r+(h?Number(h)*.1**h.length:0)+i}if(wm.test(t)){const e=wm.exec(t);if(!e)return;const s=Number(e[1]);let n;switch(e[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+i}}}function bm(t){const i={},e=t.MI("style")||[];for(const t of e){const e=_m(t);for(const t in e)$c.call(e,t)&&(i[t]=e[t])}return i}function Lm(t){let i,e=[];if(ps(t)){i=t.EI("region"),i&&e.push(i);const s=t.bI;for(let t=0;t<s.length;t++)e=e.concat(Lm(s[t]))}return e}function km(t){if(ps(t)){const i=t.NI.toUpperCase(),e=Boolean(t.EI("smpte:backgroundImage"));return"BR"===i||e}return t.uI===pl.Au}function xm(t){const i=function(t){try{return le.DI(t).II}catch(t){}}(t);return"tt"===(null==i?void 0:i.NI)}r(),r();var ra,Or=class extends Yi{it(t){return super.it(t)}st(t){const i=super.st(t);return i&&(t.Xw=Da.yh),i}Qh(){return uo(this)}};r(),r(),function(t){t.HM="subtitles",t.kI="captions",t.xI="descriptions",t.An="chapters",t.XM="metadata",t.CI="thumbnails"}(ra||(ra={}));var Cm=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function Om(t){return"string"==typeof t&&ks(Cm,t)}function jm(t,i){return!(!Om(t)||!Om(i))&&(t===i||"subtitles"===t&&"captions"===i||"captions"===t&&"subtitles"===i)}r();var Is,zm=class extends Ri{constructor(t,i,e,s,n){super(t,i,n),this.url=e,this.status=s}};r(),function(t){t.OI="HttpOpenError",t.jI="HttpResponseError",t.zI="HttpTimeoutError"}(Is||(Is={}));var jt=class extends Ga{get BI(){return this.RI}constructor(t,i,e){super(i,e),this.RI=t}};r(),r();var Pm=class extends jt{get name(){return Is.jI}get UI(){return this.QI}constructor(t,i,e){super(t.BI,null!=e?e:function(t){return"Error while loading "+t.BI.Iu+", status code "+t.FI}(t),i),this.QI=t}};r();var Bm,Rm=class extends jt{get name(){return Is.zI}constructor(t,i){super(t,function(t){return"Request for "+t.Iu+" timed out after "+t.YI+" seconds."}(t),i)}};function kt(t){return t instanceof jt}function Um(t){return t instanceof Pm}function Qm(t){return t instanceof Rm}function Fm(t){return t===ra.HM||t===ra.kI}function Ym(t){return t.some(Gm)}function Gm(t){return Ji(t,"stpp")}function Wm(t){return t.some(Vm)}function Vm(t){return Ji(t,"vtt")||Ji(t,"wvtt")}function Hm(t,i){return er(t)&&Wm(i)}function qm(t,i){return t===ra.CI||t===ra.XM&&i===ra.CI}function Xm(t,i,e,s){for(const n of t.H.Nw){if(n.Fm>e)break;i<=n.Ym&&!ks(s,n)&&s.push(n)}}function Zm(t,i){return qo(t.Bw,i.Bw)}function Km(t,i,e,s){const n=function(t){switch(t){case jo.WEBVTT:return"WebVTT";case jo.SRT:return"SRT";case jo.TTML:return"TTML";default:return""}}(t);return new zm(ue.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",i,e,s)}function ll(t,i){const e=[];for(const s of t.H.Nw)if(s.Ym<=i)e.push(s);else if(s.Fm>=i)break;for(const i of e)t.GI(i)}function Jm(t,i){if(t.L>0){const e=10,s=t.yn(0),n=S.max(0,s-e);for(const t of i)t.WI(n)}}!function(t){t.VI="vtt",t.SM="wvtt",t.HI="stpp"}(Bm||(Bm={}));var $m,zt=class extends i{it(t){t.dn(ia.ra,this.qI),this.tt.it(t),this.XI(t)}st(t){t.hn(ia.ra,this.qI),t.Xw=Da.yh,this.tt.st(t)}ZI(t){}KI(t){}XI(t){t.Xw!==Da.yh?this.ZI(t):this.KI(t)}JI(){for(const t of this.tt.Nw)t.hn(ia.ra,this.qI),t.ln()}WI(t){if(t>0)for(const i of this.tt.Nw)ll(i,t)}Gn(){return this.JI(),this.tt.Gn(),Promise.resolve()}async ln(){this.Uo(),await this.Gn(),this.tt.ln()}constructor(...t){super(...t),this.tt=new Or,this.qI=t=>{const i=t.Ht;this.XI(i)}}};r(),r(),function(t){t.$I="arraybuffer",t.tS="json",t.iS="stream",t.Au="text"}($m||($m={})),r();var Vt,Qu,is,en,Sh=class t{append(t,i){let e=t,s=i;e=tp(e),s=ip(s);const n=e.toLowerCase();if(this.Ff.hasOwnProperty(n)){const t=this.Ff[n],i=t[1];t[1]=i?i+", "+s:s}else this.Ff[n]=[e,s]}delete(t){const i=tp(t).toLowerCase();delete this.Ff[i]}get(t){const i=tp(t).toLowerCase();return this.Ff.hasOwnProperty(i)?this.Ff[i][1]:null}has(t){const i=tp(t).toLowerCase();return this.Ff.hasOwnProperty(i)}set(t,i){let e=t;e=tp(e);const s=e.toLowerCase();this.Ff[s]=[e,ip(i)]}forEach(t,i){for(const e in this.Ff)this.Ff.hasOwnProperty(e)&&t.call(i,this.Ff[e][1],e,this)}asList(){const t=[];for(const i in this.Ff)if(this.Ff.hasOwnProperty(i)){const[e,s]=this.Ff[i];t.push([e,s])}return t}eS(){const t={};return this.forEach(((i,e)=>{t[e]=i})),t}sS(t){t.forEach(((t,i)=>{this.append(i,t)}))}nS(t){t.forEach(((t,i)=>{this.set(i,t)}))}constructor(i){this.Ff={},i instanceof t?i.asList().forEach((t=>{let[i,e]=t;this.append(i,e)})):Array.isArray(i)?i.forEach((t=>{this.append(t[0],t[1])})):i&&C.getOwnPropertyNames(i).forEach((t=>{this.append(t,i[t])}))}};function tp(t){let i=t;if("string"!=typeof i&&(i=String(i)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(i))throw new _("Invalid character in header field name");return i}function ip(t){let i=t;return"string"!=typeof i&&(i=String(i)),i}!function(t){t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT"}(Vt||(Vt={})),function(t){t.Hv="",t.rS="manifest",t.hS="segment",t.oS="preload-hint",t.aS="content-protection"}(Qu||(Qu={})),function(t){t.Hv="",t.uS="initialization-segment",t.cS="fairplay-license",t.lS="fairplay-certificate",t.dS="widevine-license",t.fS="widevine-certificate",t._S="playready-license",t.gS="clearkey-license",t.wS="aes128-key"}(is||(is={})),function(t){t.Hv="",t.Gv="audio",t.Yv="video",t.Au="text",t.Vv="image"}(en||(en={}));var ai=class{constructor(t,i){const e=t.Iu;let s,n,r,h,o,a,u,c,l,d,f,_;i?(s=i.AS,n=i.vS,r=i.mS,h=i.pS,o=i.YI,a=i.yS,u=i.$f,c=i.$w,l=i.MS,d=i.TS,f=i.NS,_=i.DS):(s=null,n={},r="GET",h=$m.Au,o=0,a=0,c="",l="",d="",f=!1),this.Iu=e,this.AS=t.AS||s,this.vS=new Sh(t.vS||n),this.mS=t.mS||r,this.pS=t.pS||h,this.YI=void 0!==t.YI?Number(t.YI)||0:o,this.yS=void 0!==t.yS?Number(t.yS)||0:a,this.$f=t.$f||u||(new Z_).$f,this.$w=t.$w||c,this.MS=t.MS||l,this.TS=t.TS||d,this.NS=void 0!==t.NS?Boolean(t.NS):f,this.DS=t.DS||_}};r();var ep,sp=class extends Js{get error(){return this.errorObject.message}Qh(){return this}constructor(t){super(be.ha),this.errorObject=t}},Ma=class extends zt{IS(t){if(!t.src)return;const i=t.kind||ra.HM,e=this.ES.SS(i,t.id,t.label,t.srclang,t.default);return e.tA=Xg(t.src),this.it(e),e}async bS(t,i){t.og=gu.LOADING;const e=new ai({Iu:t.tA,pS:$m.Au,mS:Vt.GET,$f:i});let s,n;try{const t=await this.LS.BI(e);n=t.FI,s=await t.kS()}catch(i){return Et(i),t.og=gu.ERROR,void t.jo(new sp(function(t,i){let e=i,s=0;if(kt(t)&&t.name===Is.OI)e=t.BI.Iu;else if(Um(t)){const i=t.UI;if(e=i.xS,s=i.FI,0===s)return new zm(ue.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",e,s,t)}return new zm(ue.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",e,s,t)}(i,t.tA)))}try{const i=function(t){return Rv(t)?jo.WEBVTT:xm(t)?jo.TTML:jo.SRT}(s);t.$w=i;let e=[];if(i===jo.WEBVTT||i===jo.SRT){e=bv(s).H}else i===jo.TTML&&(e=mm(s,t));for(const i of e)t.CS(i)}catch(i){return Et(i),t.og=gu.ERROR,void t.jo(new sp(Km(t.$w,t.tA,n,i)))}t.og=gu.LOADED}ZI(t){ks(this.tt.Nw,t)&&t.og===gu.NONE&&this.bS(t,this.OS.$f).catch(tg)}En(){}async Gn(){this.OS.i_(),this.OS=new Z_;for(const t of this.tt.Nw)this.ES.jS(t);await super.Gn()}constructor(t,i){super(),this.OS=new Z_,this.ES=t,this.LS=i}};function np(t,i){for(const e of t)if(e.Lt===i&&e.zS)return e}function rp(t,i){hp(np(t.Nw,i))}function hp(t){void 0!==t&&(t.Xw=Da.zn)}function op(t,i){const e=np(t.Nw,i)||function(t,i){for(const e of t)if(e.Lt===i)return e}(t.Nw,i);hp(e)}function Fi(t){for(const i of Cm)i===ra.An?op(t,i):rp(t,i)}r(),r(),r(),function(t){t.PS="web",t.RS="android",t.US="android-tv",t.QS="ios",t.FS="tvos",t.YS="chromecast"}(ep||(ep={}));var ei=td?td.userAgent:"",ap=ei.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),up=ei.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),cp=ei.match(/Android ([0-9\.]+)/i),lp=ei.match(/Windows NT ([0-9\.]+)/i),dp=ei.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),fp=ei.match(/Firefox\/([0-9\.]+)/i),_p=ei.match(/OPR\/(\d+\.\d+)/i),gp=ei.match(/Tizen ([0-9\.]+)/i),wp=ei.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),Ap=class{get Qe(){return this.GS}get WS(){return this.VS}get HS(){return this.qS}get XS(){return this.ZS}get KS(){return this.JS}get $S(){return this.tE}get iE(){return this.eE}get sE(){return this.nE}get rE(){return this.hE}get oE(){return this.aE}get uE(){return this.cE}get Ra(){return this.lE}get dE(){return this.fE}get _E(){return this.gE||this.wE}get ql(){return this.AE}get Ys(){return this.vE}get mE(){return this.pE}get yE(){return this.ME}get TE(){return this.NE}get DE(){return this.SE}get EE(){return this.bE}get LE(){return this.kE}get xE(){return this.CE}get OE(){return this.jE}get zE(){return this.PE}get BE(){return this.RE}get UE(){return this.QE}get FE(){return this.YE}get GE(){return this.WE}get VE(){return this.HE}get qE(){return this.XE}get ZE(){return this.KE}get JE(){return this.$E}get ib(){return this.eb}get sb(){return this.hb}get ob(){return this.ub}get fb(){return this._b}get gb(){return!(!this.OE&&!this.LE)&&this.TE<=56}get wb(){return this.Ab}get vb(){return this.mb}get pb(){return this.yb}get Mb(){return this.Tb}get Nb(){return this.Db}get Ib(){return this.Sb}get Eb(){return this.bb}constructor(){this.GS=Boolean("ontouchstart"in self||self.DocumentTouch&&c instanceof self.DocumentTouch||td&&td.msMaxTouchPoints),this.VS=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(ei)||/(macintosh|mac(?=_powerpc)\s)/i.test(ei),this.qS=/Windows NT/i.test(ei),this.ZS=lp?T(lp[1]):0,this.JS=/Android/i.test(ei),this.tE=cp?T(cp[1]):0,this.eE=/windows phone (8|8\.1)/i.test(ei),this.nE=/iPhone/i.test(ei),this.hE=/iPad/i.test(ei),this.aE=this.VS&&this.GS&&!this.hE,this.cE=/iPod/i.test(ei),this.AE=/Mobile Safari/i.test(ei),this.gE=/EOS\d*STB/i.test(ei),this.wE=/APP\d*STB/i.test(ei),this.lE=(this.nE||this.hE||this.aE||this.cE)&&!this.eE,this.fE=wp?T(wp[2]):0,this.vE=this.eE||this.lE||this.JS||this.AE,this.pE=/CriOS/i.test(ei),this.ME=Boolean(self.chrome&&/google/i.test(td.vendor))||this.pE,this.SE=this.ME&&/Edg\//i.test(td.userAgent),this.bE=up?j(up[1],10):0,this.bb=Boolean(self.chrome||/Chrome/i.test(ei)||/CriOS/i.test(ei)),this.NE=ap?j(ap[1],10):0,this.kE=/SMART-TV.*Tizen/i.test(ei),this.CE=gp?T(gp[1]):0,this.jE=/webos|web0s/i.test(ei),this.PE=/VIZIO/i.test(ei),this.RE=/Edge\/\d+/i.test(ei),this.QE=/Trident/i.test(ei),this.YE=this.QE&&!self.ActiveXObject&&"ActiveXObject"in self,this.WE=/Vivaldi/i.test(ei),this.HE=/Firefox/i.test(ei)&&!/Seamonkey/i.test(ei),this.XE=fp?T(fp[1]):0,this.KE=/Safari/i.test(ei)&&!/Chrome/i.test(ei)&&!this.eE&&!this.kE,this.$E=dp?T(dp[2]):0,this.eb=Boolean(_p),this.hb=_p?T(_p[1]):0,this.ub=/CrKey/.test(ei),this._b=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(ei),this.Ab="web"===ep.US,this.mb="web"===ep.RS,this.yb=this.mb||this.Ab,this.Tb="web"===ep.QS,this.Db="web"===ep.FS,this.Sb="web"===ep.YS}};Ap.Lb=new Ap;var li=Ap.Lb;r();var vp,mp,Os,J,pp,yp,Mp,Gs=class extends d{constructor(){super(t.QA)}};r(),r(),r(),function(t){t.kb="9a04f079-9840-4286-ab92-e65be0885f95",t.xb="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t.Cb="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.Ob="94ce86fb-07ff-4f43-adb8-93d2fa968ca2"}(Mp||(Mp={}));var I,Tp="urn:mpeg:dash:mp4protection:2011",Np="cenc",Dp="sinf",_n="skd",Ip="9a04f079-9840-4286-ab92-e65be0885f95",Ds="urn:uuid:"+Ip,Sp="com.microsoft.playready",Ep="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Ct="urn:uuid:"+Ep,bp="com.widevine.alpha",Lp="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",kp="urn:uuid:"+Lp,xp="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",ba="urn:uuid:"+xp,Cp="com.apple.fps.1_0",Op="com.apple.streamingkeydelivery",jp="identity";r(),function(t){t.kb="playready",t.xb="widevine",t.Ob="fairplay",t.Cb="clearkey",t.jb="aes128"}(I||(I={}));var En={$w:I.kb,zb:Sp,Pb:"cenc",Bb:Ip,Rb:Ds,Ub:"PlayReady"},zp={$w:I.xb,zb:bp,Pb:"cenc",Bb:Ep,Rb:Ct,Ub:"Widevine"},Hi={$w:I.Ob,zb:Cp,Pb:"skd",Bb:xp,Rb:ba,Ub:"FairPlay"},Pp={$w:I.Ob,zb:"com.apple.fps",Pb:"sinf",Bb:xp,Rb:ba,Ub:"FairPlay"},Bp={$w:I.Cb,zb:"org.w3.clearkey",Pb:"cenc",Bb:Lp,Rb:kp,Ub:"ClearKey"},Rp=[En,zp,Hi,Bp];function Up(t){return Rp.filter((i=>i.Rb===t.toLowerCase()))}r(),r(),r(),r(),r(),r();var un,Qp=["cenc"],Fp=["cbcs","cbcs-1-9"],Yp=class extends d{constructor(t){super("Qb"),this.Fb=t}},rn=class extends d{constructor(t,i,e,s){super("Yb"),this.Fb=t,this.Gb=i,this.Yb=e,this.Wb=s}},Gp=class extends d{constructor(){super("dt")}};!function(t){t.TA="Vb",t.Hb="qb"}(un||(un={}));var Bs=class extends d{constructor(t,i){super("Vb"),this.Pb=t,this.Xb=i}},Wp=class extends d{constructor(){super("qb")}};r();var Vp=new A([0]).buffer,ne=class{get Xm(){return this.Ou.length}Zb(t){for(const i of this.Ou)if(i[0]===t)return!0;return!1}Kb(t){for(const i of this.Ou)if(i[0]===t)return i[1]}Jb(t,i){this.Ou.forEach((i=>t(i[1],i[0])),i)}$b(t,i){this.Ou.push([t,i])}tL(){sr(this.Ou)}constructor(){this.Ou=[]}};r();var $s=class{iL(t){this.Id&&(this.Id(t),this.Hf())}eL(t){this.Sd&&(this.Sd(t),this.Hf())}i_(){this.sL.catch(h),this.eL(new Eu)}e_(t){t.then((t=>this.iL(t)),(t=>this.eL(t)))}Hf(){this.Id=void 0,this.Sd=void 0}constructor(){this.sL=new Promise(((t,i)=>{this.Id=t,this.Sd=i}))}};function Hp(){return new A([8,4]).buffer}function qp(t,i){return t===Sp?function(t){if(t.byteLength<2*Xp.length)return t;const i=new DataView(t,0,2*Xp.length),e=BA(i,!0);if(e===Xp)return t;return function(t){const i='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',e='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+i+tA(t)+e;return RA(s,!0).buffer}(t)}(i):i}r();var Xp="<PlayReady";r(),r();var Zp=class extends Ga{constructor(t,i,e,s){super(t,s),this.nL=i,this.rL=e}};r(),r(),r(),r(),r();var Kp=function(t,i){return(Kp=C.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)C.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)};function Jp(t,i){if("function"!=typeof i&&null!==i)throw new _("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}Kp(t,i),t.prototype=null===i?C.create(i):(e.prototype=i.prototype,new e)}function $p(t,i,e){return t.indexOf?t.indexOf(i,e):Array.prototype.indexOf.call(t,i,e)}r(),r(),r(),r(),r(),r(),r();!function(){function t(t,i){this.hL=t,this.oL=i}t.prototype.get=function(t){var i=this.hL.get(t);if(0===this.oL||void 0===i)return i;var e=this.hL.get(t+1)||0,s=i&(1<<8-this.oL)-1,n=e>>8-this.oL;return(s<<this.oL)+n},t.prototype.getBit=function(t){if(!(t<0)){var i=this.hL.get(S.floor((t+this.oL)/8));if(void 0!==i)return(i&1<<7-this.oL-t%8)>0?1:0}},C.defineProperty(t.prototype,"bitLength",{get:function(){return this.hL.bitLength-this.oL},enumerable:!1,configurable:!0}),C.defineProperty(t.prototype,"length",{get:function(){return this.hL.length},enumerable:!1,configurable:!0})}();r(),r();S.pow(2,-52);function ty(t,i,e){return S.min(S.max(t,i),e)}function Ms(t,i){return t>>8-i}function Bi(t,i){return t&(1<<i)-1}var ou=function(){function t(t){this.aL=t,this.uL=0,this.cL=0}return C.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.uL+this.cL},enumerable:!1,configurable:!0}),C.defineProperty(t.prototype,"done",{get:function(){return this.uL===this.aL.length&&0===this.cL},enumerable:!1,configurable:!0}),C.defineProperty(t.prototype,"location",{get:function(){return{byte:this.uL,bit:this.cL}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var i=new t(this.aL);return i.seek(this.uL,this.cL),i},t.prototype.canReadBits=function(t){return 8*this.uL+t+this.cL<=8*this.aL.length},t.prototype.canReadBytes=function(t){return 0===this.cL?this.uL+t<=this.aL.length:this.uL+t<this.aL.length},t.prototype.incBit=function(){this.cL++,this.cL>7&&(this.uL++,this.cL=0)},t.prototype.seek=function(t,i){this.uL=t,this.cL=i},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new k("Cannot read past end of buffer.");return this.aL.get(this.uL)>>7-this.cL&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new k("Cannot read past end of buffer.");if(0===this.cL)return this.aL.get(this.uL++);var t=Bi(this.aL.get(this.uL),8-this.cL),i=Ms(this.aL.get(this.uL+1),this.cL);return this.uL++,t<<this.cL|i},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new k("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readBit());return i},t.prototype.readUInt=function(t){if(t>32)throw new k("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new k("Cannot read past end of buffer.");var i=0;if(0===this.cL&&t%8==0)for(var e=t-8;e>=0;e-=8)i|=this.readByte()<<e;else for(e=t-1;e>=0;e--)i|=this.readBit()<<e;return i},t.prototype.readInt=function(t){if(t>32)throw new k("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new k("Cannot read past end of buffer.");var i=this.readUInt(t);return 0===(i&1<<t-1)?i:i-S.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var i=1<<t;return i+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new k("Skipping over the buffer edge is not allowed.");var i=this.cL+t;this.uL+=i>>3,this.cL=7&i},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new k("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readByte());return String.fromCharCode.apply(String,i)},t}();r(),r(),r();var iy=function(t,i){return t===i?0:t<i?-1:t>i?1:M(t)?M(i)?0:1:-1},Wo=function(){function t(){this.lL=[],this.dL=[],this.fL=0}return t.from=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var s=new t,n=0,r=i;n<r.length;n++){var h=r[n];s.pushRange(h)}return s},t.prototype.pushRange=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=t.length),e<0)throw new k("The buffer length must be positive.");if(0!==e){if(0===this.dL.length)this.dL.push(0);else{var s=this.dL[this.dL.length-1]+this.lL[this.lL.length-1].length;this.dL.push(s)}this.lL.push(t.subarray(i,i+e)),this.fL+=e}},t.prototype.concat=function(i){var e=new t;return e.pushRange(this.join()),e.pushRange(i.join()),e},t.prototype.copy=function(t,i,e,s){if(void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=this.length),i<0||e<0||s<0)throw new RangeError;return this.slice(e,s).copyInternal(t,i)},t.prototype.copyInternal=function(t,i){for(var e=0,s=i,n=0,r=this.lL;n<r.length;n++){var h=r[n];t.set(h,s),e+=h.length,s+=h.length}return e},t.prototype.clear=function(){this.lL=[],this.dL=[],this.fL=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var i=this.findContainingBufferIndex(t),e=t-this.dL[i];return this.lL[i][e]}},C.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.lL.length<1)return-1;if(this.lL.length>1){var i=this.join();this.clear(),this.pushRange(i)}var e=this.lL[0];return"number"==typeof t?$p(e,t):"undefined"!=typeof Buffer?Buffer.from(e.buffer,e.byteOffset,e.byteLength).indexOf(t):function(t,i){if(0===i.length)return 0;for(var e=i[0],s=i.length,n=t.length-s,r=0;r<=n&&!((r=$p(t,e,r))<0||r>n);r++){for(var h=r+1,o=r+s,a=1;h<o&&t[h]===i[a];h++,a++);if(h===o)return r}return-1}(e,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,i,e){if(0!==t.length){var s=0,n=t.length-1;if(1!==e(t[s],i)){if(1===e(i,t[n]))return n;for(;s!==n;){var r=S.ceil((s+n)/2);e(t[r],i)<=0?s=r:n=r-1}return s}}}(this.dL,t,iy)},t.prototype.join=function(){if(1===this.lL.length)return this.lL[0];var t=new A(this.length);return this.copyInternal(t,0),t},C.defineProperty(t.prototype,"length",{get:function(){return this.fL},enumerable:!1,configurable:!0}),C.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,i){if(i<=0||i>4)throw new k("Expected byteLength to be between 0 and 4 but was "+i);if(t<0||t>this.length-i)throw new k("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-i)+")");if(1===i)return this.get(t);for(var e=0,s=0;s<i;s++)e+=this.get(t+s)*S.pow(2,8*(i-s-1));return e},t.prototype.slice=function(i,e){void 0===e&&(e=this.length);var s=ty(i,0,this.length),n=ty(e,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,h=this.findContainingBufferIndex(s),o=this.lL[h],a=s,u=a-this.dL[h];a+o.length-u<n;)r.pushRange(o,u,o.length-u),h+=1,u=(a+=o.length-u)-this.dL[h],o=this.lL[h];var c=n-a;return r.pushRange(o,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var i=this.length-1,e=this.lL.length-1,s=this.lL[e],n=s.length-1;i>=0&&e>=0;){if(0!==s[n])break;if(0===n){if(0===e)return new t;e-=1,n=(s=this.lL[e]).length-1}else n-=1;i-=1}return this.slice(0,i+1)},t}(),ey=function(){function t(i){this._L=i||t.BUFFER_CHUNK_SIZE,this.gL=!1,this.wL=new Wo,this.aL=new A(this._L),this.AL=0,this.vL=0,this.cL=7}return t.prototype.closeByte=function(){this.aL[this.AL++]=this.vL,this.AL>=this._L&&this.closeBuffer(),this.vL=0,this.cL=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.AL&&(this.wL.pushRange(this.aL,0,this.AL),t&&(this.aL=new A(this._L)),this.AL=0)},C.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.cL},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.gL)throw new k("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.gL=!0,this.wL},t.prototype.writeBit=function(t){if(this.gL)throw new k("Cannot write to a closed BitWriter.");this.vL|=t<<this.cL,0===this.cL?this.closeByte():this.cL--},t.prototype.writeByte=function(t){if(this.gL)throw new k("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.vL=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var i=this.cL;this.vL|=Ms(t,i+1),this.closeByte(),this.vL=Bi(t,8-i)<<i+1,this.cL=i},t.prototype.writeBits=function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.gL)throw new k("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.AL+t.length<=this._L?(this.aL.set(t,this.AL),this.AL+=t.length,this.AL===this._L&&this.closeBuffer()):(this.closeBuffer(),this.wL.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var i=this.cL;this.vL|=Ms(t[0],i+1),this.closeByte();for(var e=1;e<t.length;e++){var s=Bi(t[e-1],8-i),n=Ms(t[e],i+1);this.vL=s<<i+1|n,this.closeByte()}this.vL=Bi(t[t.length-1],8-i)<<i+1,this.cL=i}},t.prototype.writeUInt=function(t,i){if(t<0)throw new k("Received a negative number.");if(i>32)throw new k("The max bitlength that can be provided is 32.");if(t>=S.pow(2,i))throw new k("Uint "+t+" cannot be represented in "+i+" bit(s).");if(this.isWritingStartBit&&i%8==0)for(var e=i-8;e>=0;e-=8)this.writeByte(t>>e&255);else for(e=i-1;e>=0;e--)this.writeBool((t&1<<e)>0)},t.prototype.writeInt=function(t,i){if(i>32)throw new k("The max bitlength that can be provided is 32.");if(S.abs(t)>=S.pow(2,i-1))throw new k("Signed integer "+t+" cannot be represented in "+i+" bit(s).");t<0?this.writeUInt(t+S.pow(2,i),i):this.writeUInt(t,i)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new k("Received a negative number.");for(var i=S.floor(S.log2(t+1))+1,e=0;e<i-1;e++)this.writeBit(0);this.writeUInt(t+1,i)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var i=function(t){for(var i=new A(t.length),e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}(t),e=0;e<i.length;e++)this.writeByte(i[e])},t.BUFFER_CHUNK_SIZE=1024,t}();r();var sy=function(){function t(t){this.rb=new Wo,this.zd=t}return t.prototype.closeWriter=function(){void 0!==this.zd&&(this.rb=this.rb.concat(this.zd.close()),this.zd=void 0)},C.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.zd&&(this.zd=new ey),this.zd},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),Le=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new k("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(i){var e=this.getSize(),s=e>=t.LARGE_SIZE/8,n=16===this.boxType.length;i.writeUInt(s?1:e,32),i.writeString(n?"uuid":this.boxType),s&&(i.writeUInt(S.floor(e/t.LARGE_SIZE),32),i.writeUInt(e%t.LARGE_SIZE,32)),n&&i.writeString(this.boxType)},t.prototype.getSize=function(){var i=8+(this.boxType.length>4?16:0),e=this.getBoxContentSize()+i;return e>=t.LARGE_SIZE/8&&(e+=8),e},t.prototype.serialize=function(){var t=new sy;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=S.pow(2,32),t}();function zi(t,i){return t instanceof Gt?64===i:t<S.pow(2,i)}function ye(t,i){return S.round(t*S.pow(2,i))}function ny(t,i){for(var e=0;e<i.length;e++)t.writeByte(i[e])}function Tu(t,i){return t/S.pow(2,i)}r();var Qs=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!zi(e,8))throw new k("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Jp(i,t),C.defineProperty(i.prototype,"flags",{get:function(){return this.mL},set:function(t){this.mL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new k("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(Le);r(),r();var ry=function(t){function i(i,e){var s=t.call(this,i)||this;return s.data=e,s}return Jp(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(Wo.from(this.data))},i}(Le);r(),r();var hy=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();r();var oy=16384;function ay(t){var i=t.length;if(i<=oy)return String.fromCharCode.apply(String,t);for(var e=[],s=0;s<i;s+=oy)e.push(String.fromCharCode.apply(String,t.slice(s,s+oy)));return e.join("")}var uy=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,i){return(t&i)===i}(this.raw,t)},t}();function cy(t,i){var e=t.getUint8(i.offset);return i.shift(1),e}function ly(t,i,e){var s=vy(yy(t),i.offset,i.offset+e);return i.shift(s.byteLength),s}function dy(t,i,e){return i.offset+e<=t.byteLength}function fy(t,i,e){void 0===e&&(e=!1);var s=t.getUint32(i.offset,e);return i.shift(4),s}function _y(t,i,e){void 0===e&&(e=!1);var s=fy(t,i,e),n=fy(t,i,e),r=e?n:s,h=e?s:n;return Gt.fromBits(h,r,!0)}function gy(t,i,e){return ay(function(t){return[].slice.call(t)}(ly(t,i,e)))}function wy(t,i){var e,s=cy(t,i);return 0==(128&s)?e=s:192==(224&s)?e=64*(31&s)+(63&cy(t,i)):224==(240&s)?e=4096*(15&s)+64*(63&cy(t,i))+(63&cy(t,i)):240==(248&s)&&(e=262144*(7&s)+4096*(63&cy(t,i))+64*(63&cy(t,i))+(63&cy(t,i))),e}function Ay(t,i){return function(t,i,e){var s=[],n=function(t,i){return i.offset+3<=t.byteLength&&239===t.getUint8(i.offset)&&187===t.getUint8(i.offset+1)&&191===t.getUint8(i.offset+2)}(t,i);n&&i.shift(3);for(;i.offset<t.byteLength;){var r=wy(t,i);if(void 0===r)break;if(e&&0===r)break;s.push(r)}return function(t){for(var i=[],e=0,s=t;e<s.length;e++){var n=s[e];n>65535&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n)}return ay(i)}(s)}(t,i,!0)}function vy(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new A(t.buffer,t.byteOffset+i,e-i)}function my(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function py(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function yy(t){return new A(t.buffer,t.byteOffset,t.byteLength)}var My=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new hy(this.offset<<3)},t}();r();var Ty=function(){function t(t,i){this.data=t,this.cursor=i}return t.prototype.nextUint8=function(){return cy(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getUint16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return fy(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt32(i.offset,e);return i.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,i,e){void 0===e&&(e=!1);var s=fy(t,i,e),n=fy(t,i,e),r=e?n:s,h=e?s:n;return Gt.fromBits(h,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return _y(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return ly(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,i,e){for(var s=[],n=0;n<e;n++)s.push(fy(t,i));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return gy(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return Ay(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function co(t,i){return t.type===i}var Ny=8;function mh(t){var i=function(t,i){var e=[];for(;i.offset<t.byteLength;){var s=Dy(t,i);if(!s.complete)return{complete:!1,boxes:e};e.push(s.box)}return{complete:!0,boxes:e}}(t.data,t.cursor);if(!i.complete)throw new k("Data incomplete");return i.boxes}function Dy(t,i){var e=i.offset,s=function(t,i){var e=i.offset;if(!dy(t,i,Ny)){return{complete:!1,neededOffset:r=i.offset+Ny}}var s=fy(t,i),n=gy(t,i,4);if(1===s){if(!dy(t,i,8)){var r=i.offset+8;return i.seek(e),{complete:!1,neededOffset:r}}s=_y(t,i).toNumber()}if("uuid"===n){if(!dy(t,i,16)){r=i.offset+16;return i.seek(e),{complete:!1,neededOffset:r}}n=gy(t,i,16)}var h=i.offset,o={type:n,size:s,headerSize:h-e};return{complete:!0,header:o}}(t,i);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-e);var h=e+r;if(h>t.byteLength){var o=h;return i.seek(e),{complete:!1,neededOffset:o}}var a={type:n.type,offset:e,data:new Ty(my(t,e,h),new My(n.headerSize))};return i.seek(h),{complete:!0,box:a}}function ua(t){return{version:t>>24,flags:new uy(16777215&t)}}function Iy(t,i){var e,s,n,r;return 1===i?(e=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(e=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:e,modification:s,scale:n,duration:r}}function Sy(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function Ey(t){var i=t.nextUint32Array(9);return{a:Tu(i[0],16),b:Tu(i[1],16),u:Tu(i[2],30),c:Tu(i[3],16),d:Tu(i[4],16),v:Tu(i[5],30),x:Tu(i[6],16),y:Tu(i[7],16),w:Tu(i[8],30)}}function jh(t){return new ry(t.type,vy(yy(t.data.data),t.data.cursor.offset))}var by=function(t){function i(i,e,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=e,r.handlerType=i,r}return Jp(i,t),C.defineProperty(i.prototype,"handlerType",{get:function(){return this.pL},set:function(t){this.pL=t},enumerable:!1,configurable:!0}),i.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(e=null===(i=this.name)||void 0===i?void 0:i.length)&&void 0!==e?e:0)+1},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeString(this.handlerType),this.serializeReserved(i),this.name&&i.writer.writeString(this.name),i.writer.writeByte(0)},i}(Qs);function Ly(t){var i=t.data,e=ua(i.nextUint32()),s=e.version,n=e.flags;i.skip(4);var r=i.nextChars(4);i.skip(12);var h=i.nextUTF8String();return new by(r,h,s,n.raw)}!function(t){function i(){return t.call(this,"mdir")||this}Jp(i,t),i.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(by);r(),r(),r();var ru=function(){function t(t,i){void 0===i&&(i=!1),this.fixed28BitMode=i,this.tag=t}return t.prototype.encodeSize=function(t){for(var i=[];t>0;)i.length>0&&(i[i.length-1]+=128),i.push(t%128),t>>=7;if(this.fixed28BitMode)for(;i.length<4;)i.push(128);return i.reverse()},C.defineProperty(t.prototype,"tag",{get:function(){return this.yL},set:function(t){if(!zi(t,8))throw new k("Provided tag does not fit in 8 bits.");this.yL=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var i=0,e=this.encodeSize(this.getDescriptorSize());i<e.length;i++){var s=e[i];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}();r();!function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o={});var a=t.call(this,4,o.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=h,a.objectTypeIndication=i,a.streamType=e,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}Jp(i,t),C.defineProperty(i.prototype,"objectTypeIndication",{get:function(){return this.ML},set:function(t){if(!zi(t,8))throw new k("Provided objectTypeIndication does not fit in 8 bits.");this.ML=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"streamType",{get:function(){return this.TL},set:function(t){if(!zi(t,6))throw new k("Provided streamType does not fit in 6 bits.");this.TL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.NL},set:function(t){if(!zi(t,24))throw new k("Provided bufferSizeDb does not fit in 24 bits.");this.NL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"maxBitrate",{get:function(){return this.DL},set:function(t){if(!zi(t,32))throw new k("Provided maxBitrate does not fit in 32 bits.");this.DL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"avgBitrate",{get:function(){return this.IL},set:function(t){if(!zi(t,32))throw new k("Provided avgBitrate does not fit in 32 bits.");this.IL=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var i=0,e=this.decoderSpecificInfo;i<e.length;i++){e[i].serialize(t)}}}(ru);r();!function(t){function i(i,e){void 0===e&&(e={});var s=t.call(this,5,e.fixed28BitMode)||this;return s.data=i,s}Jp(i,t),i.prototype.getDescriptorSize=function(){return this.data.length},i.prototype.serializeDescriptorContent=function(t){t.concat(Wo.from(this.data))}}(ru);r(),r();var ky=function(t){function i(i){void 0===i&&(i=!1);var e=t.call(this,6,i)||this;return e.predefined=2,e}return Jp(i,t),i.prototype.getDescriptorSize=function(){return 1},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},i}(ru);!function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=i,r.streamPriority=e,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new ky(n.fixed28BitMode),r}Jp(i,t),C.defineProperty(i.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"esId",{get:function(){return this.SL},set:function(t){if(!zi(t,16))throw new k("Provided esId does not fit in 16 bits.");this.SL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"streamPriority",{get:function(){return this.EL},set:function(t){if(!zi(t,5))throw new k("Provided streamPriority does not fit in 5 bits.");this.EL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"dependsOnEsId",{get:function(){return this.bL},set:function(t){if(t&&!zi(t,16))throw new k("Provided dependsOnEsId does not fit in 16 bits.");this.bL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"ocrEsId",{get:function(){return this.LL},set:function(t){if(t&&!zi(t,16))throw new k("Provided ocrEsId does not fit in 16 bits.");this.LL=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},i.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(ru);r(),r(),r(),r(),r();var xy=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.boxes=[],i}return Jp(i,t),i.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serialize=function(){for(var i=t.prototype.serialize.call(this),e=0,s=this.boxes;e<s.length;e++){var n=s[e];i=i.concat(n.serialize())}return i},i}(Le),Bn=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Jp(i,t),i.prototype.serializeBoxContent=function(t){},i.prototype.getBoxContentSize=function(){return 0},i}(xy),Cy=function(t){function i(i,e){var s=t.call(this,i)||this;return s.dataReferenceIndex=e,s}return Jp(i,t),C.defineProperty(i.prototype,"dataReferenceIndex",{get:function(){return this.kL},set:function(t){if(!zi(t,16))throw new k("Provided dataReferenceIndex does not fit in 16 bits.");this.kL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){for(var i=0;i<6;i++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},i}(Bn),Oy=function(t){function i(i,e,s,n){var r,h,o=this;return(o=t.call(this,i,e)||this).extra=n,o.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,o.sampleSize=null!==(h=s.sampleSize)&&void 0!==h?h:16,o.sampleRate=s.sampleRate,o}return Jp(i,t),C.defineProperty(i.prototype,"channelCount",{get:function(){return this.xL},set:function(t){if(!zi(t,16))throw new k("Provided channelCount does not fit in 16 bits.");this.xL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"sampleSize",{get:function(){return this.CL},set:function(t){if(!zi(t,16))throw new k("Provided sampleSize does not fit in 16 bits.");this.CL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"sampleRate",{get:function(){return this.OL},set:function(t){if(!zi(ye(t,16),32))throw new k("Provided rate does not fit in 32 bits (fixed 16.16).");this.OL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(e=null===(i=this.extra)||void 0===i?void 0:i.length)&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.channelCount,16),i.writer.writeUInt(this.sampleSize,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(ye(this.sampleRate,16),32),this.extra&&ny(i.writer,this.extra)},i}(Cy);r();!function(t){function i(i){var e=t.call(this,"stco",0,0)||this;return e.entries=i,e}Jp(i,t),C.defineProperty(i.prototype,"entries",{get:function(){return this.jL},set:function(t){if(!zi(t.length,32))throw new k("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!zi(t,32)})))throw new k("Not all entries can be represented in 32 bits.");this.jL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(Qs);r();!function(t){function i(i){var e=t.call(this,"clap")||this;return e.cleanApertureWidthN=i.cleanApertureWidthN,e.cleanApertureWidthD=i.cleanApertureWidthD,e.cleanApertureHeightN=i.cleanApertureHeightN,e.cleanApertureHeightD=i.cleanApertureHeightD,e.horizOffN=i.horizOffN,e.horizOffD=i.horizOffD,e.vertOffN=i.vertOffN,e.vertOffD=i.vertOffD,e}Jp(i,t),C.defineProperty(i.prototype,"cleanApertureWidthN",{get:function(){return this.zL},set:function(t){if(!zi(t,32))throw new k("Provided cleanApertureWidthN does not fit in 32 bits.");this.zL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"cleanApertureWidthD",{get:function(){return this.PL},set:function(t){if(!zi(t,32))throw new k("Provided cleanApertureWidthD does not fit in 32 bits.");this.PL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"cleanApertureHeightN",{get:function(){return this.BL},set:function(t){if(!zi(t,32))throw new k("Provided cleanApertureHeightN does not fit in 32 bits.");this.BL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"cleanApertureHeightD",{get:function(){return this.RL},set:function(t){if(!zi(t,32))throw new k("Provided cleanApertureHeightD does not fit in 32 bits.");this.RL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"horizOffN",{get:function(){return this.UL},set:function(t){if(!zi(t,32))throw new k("Provided horizOffN does not fit in 32 bits.");this.UL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"horizOffD",{get:function(){return this.QL},set:function(t){if(!zi(t,32))throw new k("Provided horizOffD does not fit in 32 bits.");this.QL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"vertOffN",{get:function(){return this.FL},set:function(t){if(!zi(t,32))throw new k("Provided vertOffN does not fit in 32 bits.");this.FL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"vertOffD",{get:function(){return this.YL},set:function(t){if(!zi(t,32))throw new k("Provided vertOffD does not fit in 32 bits.");this.YL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 32},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(Le);r();!function(t){function i(i,e){var s=t.call(this,"ctts",i,0)||this;return s.entries=e,s}Jp(i,t),C.defineProperty(i.prototype,"entries",{get:function(){return this.jL},set:function(t){if(!zi(t.length,32))throw new k("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!zi(t.sampleCount,32)||!zi(t.sampleOffset,32)})))throw new k("Not all entries can be represented in 64 bits.");this.jL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),0===this.version?i.writer.writeUInt(n.sampleOffset,32):1===this.version&&i.writer.writeInt(n.sampleOffset,32)}}}(Qs);r();!function(t){function i(i){var e=t.call(this,"url ",0,void 0===i?1:0)||this;return e.location=i,e}Jp(i,t),C.defineProperty(i.prototype,"location",{get:function(){return this.GL},set:function(t){this.flags=void 0===t?1:0,this.GL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this);return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(Qs);r();!function(t){function i(i,e,s){var n=t.call(this,"urn ",0,s)||this;return n.name=i,n.location=e,n}Jp(i,t),C.defineProperty(i.prototype,"location",{get:function(){return this.GL},set:function(t){if(1&this.flags)throw new k("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.GL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.name),i.writer.writeByte(0),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(Qs);r();!function(t){function i(){return t.call(this,"dinf")||this}Jp(i,t)}(Bn);r(),r();var jy=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!zi(e,8))throw new k("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Jp(i,t),C.defineProperty(i.prototype,"flags",{get:function(){return this.mL},set:function(t){this.mL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new k("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(xy);!function(t){function i(){return t.call(this,"dref",0,0)||this}Jp(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(jy);r(),r();var zy=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"elst",e,s)||this;return n.entries=i,n}return Jp(i,t),C.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"entries",{get:function(){return this.jL},set:function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!zi(s.segmentDuration,this.bitSize))throw new k("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!zi(s.mediaTime,this.bitSize))throw new k("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!zi(s.mediaRateInteger,16))throw new k("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!zi(s.mediaRateFraction,16))throw new k("Provided mediaRateFraction does not fit in 16 bits.")}this.jL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(i)},i}(Qs),Py=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Jp(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(zy),By=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Jp(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(zy);function Ry(t){for(var i=t.data,e=ua(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),h=[],o=0;o<r;o++){var a=void 0,u=void 0;0===s?(a=i.nextUint32(),u=i.nextInt32()):(a=i.nextUint64(),u=i.nextInt64());var c=i.nextInt16(),l=i.nextInt16();h.push({segmentDuration:a,mediaTime:u,mediaRateFraction:l,mediaRateInteger:c})}return 0===s?new Py(h,n.raw):new By(h,n.raw)}var Uy=function(t){function i(){return t.call(this,"edts")||this}return Jp(i,t),i}(Bn);function Qy(t){for(var i=new Uy,e=0,s=mh(t.data);e<s.length;e++){var n=s[e];co(n,"elst")?i.boxes.push(Ry(n)):i.boxes.push(jh(n))}return i}r(),r();var Fy=function(t){function i(i,e,s,n){var r=t.call(this,i)||this;return r.majorBrand=e,r.minorVersion=s,r.compatibleBrands=n,r}return Jp(i,t),C.defineProperty(i.prototype,"majorBrand",{get:function(){return this.WL},set:function(t){if(4!==t.length)throw new k("the provided major brand does not conform to the 4 character requirement");this.WL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"minorVersion",{get:function(){return this.VL},set:function(t){if(!zi(t,32))throw new k("the provided minor version does not fit in 32 bits.");this.VL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"compatibleBrands",{get:function(){return this.HL},set:function(t){if(t.some((function(t){return 4!==t.length})))throw new k("Some of the compatible brands do not conform to the 4 character requirement");this.HL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var i=0,e=this.compatibleBrands;i<e.length;i++){var s=e[i];t.writer.writeString(s)}},i}(Le),Yy=function(t){function i(i,e,s){return t.call(this,"ftyp",i,e,s)||this}return Jp(i,t),i}(Fy);function Gy(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new Yy(e,s,n)}r();var Wy=function(t){function i(i,e){void 0===e&&(e="free");var s=t.call(this,e)||this;return s.data=i,s}return Jp(i,t),i.prototype.getBoxContentSize=function(){var t,i;return null!==(i=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==i?i:0},i.prototype.serializeBoxContent=function(t){this.data&&t.concat(Wo.from(this.data))},i}(Le);r(),r();var Vy=function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=i.creation,r.modificationTime=i.modification,r.timescale=i.scale,r.duration=i.duration,r.language=e,r}return Jp(i,t),C.defineProperty(i.prototype,"creationTime",{get:function(){return this.qL},set:function(t){if(!zi(t,this.bitSize))throw new k("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.qL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"modificationTime",{get:function(){return this.XL},set:function(t){if(!zi(t,this.bitSize))throw new k("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.XL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"timescale",{get:function(){return this.ZL},set:function(t){if(!zi(t,32))throw new k("Provided sequence number does not fit in 32 bits.");this.ZL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"duration",{get:function(){return this.KL},set:function(t){if(!zi(t,this.bitSize))throw new k("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.KL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"language",{get:function(){return this.JL},set:function(t){if(!Zy(t))throw new k("Expected an ISO-639-2/T language code");this.JL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMdiaContent(i),i.writer.writeBit(0);for(var e=0,s=this.language;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.charCodeAt(0)-96,5)}i.writer.writeUInt(0,16)},i}(Qs),Hy=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,0,s)||this}return Jp(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(Vy),qy=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,1,s)||this}return Jp(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(Vy);function Xy(t){var i=t.data,e=ua(i.nextUint32()),s=e.version,n=e.flags,r=Iy(i,s),h=new ou(Wo.from(i.nextUint8Array(2)));h.skipBits(1);for(var o=[],a=0;a<3;a++)o.push(h.readUInt(5));var u=o.map((function(t){return String.fromCharCode(t+96)})).join("");return Zy(u)||(u="und"),i.skip(2),0===s?new Hy(r,u,n.raw):new qy(r,u,n.raw)}function Zy(t){return/^[a-z]{3}$/.test(t)}var ws=function(t){function i(){return t.call(this,"mdia")||this}return Jp(i,t),i}(Bn);function Ky(t){for(var i=new ws,e=0,s=mh(t.data);e<s.length;e++){var n=s[e];co(n,"mdhd")?i.boxes.push(Xy(n)):co(n,"hdlr")?i.boxes.push(Ly(n)):i.boxes.push(jh(n))}return i}r();var Jy=function(t){function i(){var i=t.call(this,"mdat")||this;return i.data=new Wo,i}return Jp(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(this.data)},i}(Le);function $y(t){var i=t.data,e=i.nextUint8Array(i.data.byteLength-i.cursor.offset),s=new Jy;return s.data.pushRange(e),s}r();!function(t){function i(){return t.call(this,"minf")||this}Jp(i,t)}(Bn);r();var tM;!function(t){function i(i){var e=t.call(this,"meta",0,0)||this;return e.handler=i,e}Jp(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.handler.serialize())}}(jy);r(),r(),function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(tM||(tM={})),r();var iM,eM,sM={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function nM(t,i){i.writer.writeUInt(ye(t.a,16),32),i.writer.writeUInt(ye(t.b,16),32),i.writer.writeUInt(ye(0,30),32),i.writer.writeUInt(ye(t.c,16),32),i.writer.writeUInt(ye(t.d,16),32),i.writer.writeUInt(ye(0,30),32),i.writer.writeUInt(ye(t.x,16),32),i.writer.writeUInt(ye(t.y,16),32),i.writer.writeUInt(ye(1,30),32)}function rM(t,i){var e,s,n,r;i.writer.writeUInt(null!==(e=t.isLeading)&&void 0!==e?e:iM.UNKNOWN,2),i.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:eM.UNKNOWN,2),i.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:eM.UNKNOWN,2),i.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:eM.UNKNOWN,2)}function Fn(t,i){var e,s,n;i.writer.writeUInt(0,4),rM(t,i),i.writer.writeUInt(null!==(e=t.samplePaddingValue)&&void 0!==e?e:0,3),i.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),i.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}r(),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(iM||(iM={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(eM||(eM={})),r(),r();var hM=function(){};r(),r(),r();var oM=function(t){function i(i,e,s){var n=t.call(this,"pssh",i,0)||this;return n.systemId=e,n.data=s,n}return Jp(i,t),C.defineProperty(i.prototype,"systemId",{get:function(){return this.$L},set:function(t){if(16!==t.length)throw new k("Provided systemId length is not 16.");this.$L=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"data",{get:function(){return this.ek},set:function(t){if(!zi(t.length,32))throw new k("Provided data length does not fit in 32 bits.");this.ek=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},i.prototype.serializeVersionBoxContent=function(t){},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(Wo.from(this.systemId)),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.data.length,32),i.concat(Wo.from(this.data))},i}(Qs),aM=function(t){function i(i,e){return t.call(this,0,i,e)||this}return Jp(i,t),i}(oM),uM=function(t){function i(i,e,s){var n=t.call(this,1,i,e)||this;return n.kIds=s,n}return Jp(i,t),C.defineProperty(i.prototype,"kIds",{get:function(){return this.nk},set:function(t){if(!zi(t.length,32))throw new k("Provided kIds length cannot fit in 32 bits.");if(t.some((function(t){return 16!==t.length})))throw new k("Not all provided key ids are 16 bytes long.");this.nk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var i=0,e=this.kIds;i<e.length;i++){var s=e[i];t.concat(Wo.from(s))}},i}(oM);function cM(t){var i=t.data.nextUint8();t.data.skip(3);var e=t.data.nextUint8Array(16),s=[];if(1===i)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var h=t.data.nextUint32(),o=t.data.nextUint8Array(h);return 1===i?new uM(e,o,s):new aM(e,o)}r(),r();var lM=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"mehd",e,s)||this;return n.fragmentDuration=i,n}return Jp(i,t),C.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"fragmentDuration",{get:function(){return this.rk},set:function(t){if(!zi(t,this.bitSize))throw new k("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.rk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(Qs),dM=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Jp(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration,32)},i}(lM),fM=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Jp(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),i.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},i}(lM);function _M(t){var i=t.data,e=ua(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new dM(i.nextUint32(),n.raw):new fM(i.nextUint64(),n.raw)}r();var Ua=function(t){function i(i,e,s,n){void 0===e&&(e={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,h,o,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=i,a.defaultSampleDescriptionIndex=null!==(r=null==e?void 0:e.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(h=e.sampleDuration)&&void 0!==h?h:0,a.defaultSampleSize=null!==(o=e.sampleSize)&&void 0!==o?o:0,a.defaultSampleFlags=e.sampleFlags,a}return Jp(i,t),C.defineProperty(i.prototype,"trackId",{get:function(){return this.hk},set:function(t){if(!zi(t,32))throw new k("Provided track id does not fit in 32 bits.");this.hk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.ck},set:function(t){if(!zi(t,32))throw new k("Provided default sample description index does not fit in 32 bits.");this.ck=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.lk},set:function(t){if(!zi(t,32))throw new k("Provided default sample duration does not fit in 32 bits.");this.lk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.dk},set:function(t){if(!zi(t,32))throw new k("Provided default sample size does not fit in 32 bits.");this.dk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.fk},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!zi(t.samplePaddingValue,3))throw new k("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!zi(t.sampleDegradationPriority,16))throw new k("Provided sample degradation priority does not fit in 16 bits.");this.fk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},i.prototype.serializeBoxContent=function(i){var e;t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),i.writer.writeUInt(this.defaultSampleDescriptionIndex,32),i.writer.writeUInt(this.defaultSampleDuration,32),i.writer.writeUInt(this.defaultSampleSize,32),Fn(null!==(e=this.defaultSampleFlags)&&void 0!==e?e:{},i)},i}(Qs);function gM(t){var i=t.data,e=ua(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),h=i.nextUint32(),o=i.nextUint32(),a=i.nextUint32(),u=Sy(new ou(Wo.from(i.nextUint8Array(4))));return new Ua(r,{sampleDescriptionIndex:h,sampleDuration:o,sampleSize:a,sampleFlags:u},s,n.raw)}var cu=function(t){function i(){return t.call(this,"mvex")||this}return Jp(i,t),i}(Bn);function wM(t){for(var i=new cu,e=0,s=mh(t.data);e<s.length;e++){var n=s[e];co(n,"mehd")?i.boxes.push(_M(n)):co(n,"trex")?i.boxes.push(gM(n)):i.boxes.push(jh(n))}return i}r();var AM=function(t){function i(e,s,n,r,h){void 0===h&&(h=0);var o,a,u,c=this;return(c=t.call(this,"mvhd",r,h)||this).creationTime=e.creation,c.modificationTime=e.modification,c.timescale=e.scale,c.duration=e.duration,c.rate=null!==(o=n.rate)&&void 0!==o?o:i.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:i.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:sM,c._k=s,c}return Jp(i,t),C.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"creationTime",{get:function(){return this.qL},set:function(t){if(!zi(t,this.bitSize))throw new k("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.qL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"modificationTime",{get:function(){return this.XL},set:function(t){if(!zi(t,this.bitSize))throw new k("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.XL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"timescale",{get:function(){return this.ZL},set:function(t){if(!zi(t,32))throw new k("Provided sequence number does not fit in 32 bits.");this.ZL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"duration",{get:function(){return this.KL},set:function(t){if(!zi(t,this.bitSize))throw new k("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.KL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"rate",{get:function(){return this.gk},set:function(t){if(!zi(ye(t,16),32))throw new k("Provided rate does not fit in 32 bits (fixed 16.16).");this.gk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"volume",{get:function(){return this.wk},set:function(t){if(!zi(ye(t,8),16))throw new k("Provided volume does not fit in 16 bits (fixed 8.8).");this.wk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"matrix",{get:function(){return this.Ak},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new k("(u, v, w) does not match the required (0, 0, 1)");this.Ak=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"nextTrackId",{get:function(){return this._k},set:function(t){if(0===t)throw new k("NextTrackId cannot be 0.");if(!zi(t,32))throw new k("NextTrackId cannot exceed 32 bits.");this._k=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMvhdContent(i),i.writer.writeUInt(ye(this.rate,16),32),i.writer.writeUInt(ye(this.volume,8),16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),nM(this.matrix,i);for(var e=0;e<6;e++)i.writer.writeUInt(0,32);i.writer.writeUInt(this.nextTrackId,32)},i.DEFAULT_RATE=1,i.DEFAULT_VOLUME=1,i}(Qs),vM=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,0,n)||this}return Jp(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(AM),mM=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,1,n)||this}return Jp(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(AM);function pM(t){var i=t.data,e=ua(i.nextUint32()),s=e.version,n=e.flags,r=Iy(i,s),h=Tu(i.nextUint32(),16),o=Tu(i.nextUint16(),8);i.skip(2),i.skip(8);var a=Ey(i);i.skip(24);var u=i.nextUint32();return 0===s?new vM(r,u,{rate:h,volume:o,matrix:a},n.raw):new mM(r,u,{rate:h,volume:o,matrix:a},n.raw)}r(),r();var yM=function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o={});var a,u,c,l=this;return l=t.call(this,"tkhd",i,function(t){var i,e,s,n;return{trackEnabled:null===(i=null==t?void 0:t.trackEnabled)||void 0===i||i,trackInMovie:null===(e=null==t?void 0:t.trackInMovie)||void 0===e||e,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(o))||this,l.creationTime=e.creation,l.modificationTime=e.modification,l.trackId=s,l.duration=e.duration,l.volume=n,l.width=r,l.height=h,l.layer=null!==(a=o.layer)&&void 0!==a?a:0,l.alternateGroup=null!==(u=o.alternateGroup)&&void 0!==u?u:0,l.matrix=null!==(c=o.matrix)&&void 0!==c?c:sM,l}return Jp(i,t),C.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"creationTime",{get:function(){return this.qL},set:function(t){if(!zi(t,this.bitSize))throw new k("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.qL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"modificationTime",{get:function(){return this.XL},set:function(t){if(!zi(t,this.bitSize))throw new k("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.XL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"trackId",{get:function(){return this.hk},set:function(t){if(0===t)throw new k("trackId cannot be 0.");if(!zi(t,32))throw new k("trackId cannot exceed 32 bits.");this.hk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"duration",{get:function(){return this.KL},set:function(t){if(!zi(t,this.bitSize))throw new k("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.KL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"volume",{get:function(){return this.wk},set:function(t){if(!zi(ye(t,8),16))throw new k("Provided volume does not fit in 16 bits (fixed 8.8).");this.wk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"width",{get:function(){return this.vk},set:function(t){if(!zi(ye(t,16),32))throw new k("Provided width does not fit in 32 bits (fixed 16.16).");this.vk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"height",{get:function(){return this.pk},set:function(t){if(!zi(ye(t,16),32))throw new k("Provided height does not fit in 32 bits (fixed 16.16).");this.pk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"layer",{get:function(){return this.yk},set:function(t){if(!zi(t,16))throw new k("Provided layer does not fit in 16 bits.");this.yk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"alternateGroup",{get:function(){return this.Mk},set:function(t){if(!zi(t,16))throw new k("Provided alternateGroup does not fit in 16 bits.");this.Mk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"matrix",{get:function(){return this.Ak},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new k("(u, v, w) does not match the required (0, 0, 1)");this.Ak=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeTkhdContent(i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.layer,16),i.writer.writeUInt(this.alternateGroup,16),i.writer.writeUInt(ye(this.volume,8),16),i.writer.writeUInt(0,16),nM(this.matrix,i),i.writer.writeUInt(ye(this.width,16),32),i.writer.writeUInt(ye(this.height,16),32)},i}(Qs),Ls=function(t){function i(i,e,s,n,r,h){return t.call(this,0,i,e,s,n,r,h)||this}return Jp(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},i}(yM),MM=function(t){function i(i,e,s,n,r,h){return t.call(this,1,i,e,s,n,r,h)||this}return Jp(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(yM);function TM(t){var i,e,s,n,r=t.data,h=ua(r.nextUint32()),o=h.version,a=h.flags,u=a.isSet(8),c=a.isSet(4),l=a.isSet(2),d=a.isSet(1);0===o?(i=r.nextUint32(),e=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(i=r.nextUint64(),e=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),_=r.nextInt16(),g=Tu(r.nextInt16(),8);r.skip(2);var w=Ey(r),A=Tu(r.nextUint32(),16),v=Tu(r.nextUint32(),16);return 0===o?new Ls({creation:i,modification:e,duration:n},s,g,A,v,{layer:f,matrix:w,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l}):new MM({creation:i,modification:e,duration:n},s,g,A,v,{layer:f,matrix:w,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l})}var NM=function(t){function i(){return t.call(this,"trak")||this}return Jp(i,t),i}(Bn);function DM(t){for(var i=new NM,e=0,s=mh(t.data);e<s.length;e++){var n=s[e];co(n,"tkhd")?i.boxes.push(TM(n)):co(n,"mdia")?i.boxes.push(Ky(n)):co(n,"edts")?i.boxes.push(Qy(n)):i.boxes.push(jh(n))}return i}var xs=function(t){function i(){return t.call(this,"moov")||this}return Jp(i,t),i}(Bn);function IM(t){for(var i=new xs,e=0,s=mh(t.data);e<s.length;e++){var n=s[e];co(n,"mvhd")?i.boxes.push(pM(n)):co(n,"trak")?i.boxes.push(DM(n)):co(n,"mvex")?i.boxes.push(wM(n)):co(n,"pssh")?i.boxes.push(cM(n)):i.boxes.push(jh(n))}return i}r(),r(),r();var SM=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",e,s)||this;return n.baseMediaDecodeTime=i,n}return Jp(i,t),C.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"baseMediaDecodeTime",{get:function(){return this.Tk},set:function(t){if(!zi(t,this.bitSize))throw new k("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.Tk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(Qs),EM=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Jp(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime,32)},i}(SM),eu=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Jp(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},i}(SM);function bM(t){var i=t.data,e=ua(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new EM(i.nextUint32(),n.raw):new eu(i.nextUint64(),n.raw)}r();var LM=function(t){function i(i,e){void 0===e&&(e=0);var s=t.call(this,"tfhd",e,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(i))||this;return s.trackId=i.trackId,s.baseDataOffset=i.baseDataOffset,s.sampleDescriptionIndex=i.sampleDescriptionIndex,s.defaultSampleDuration=i.defaultSampleDuration,s.defaultSampleSize=i.defaultSampleSize,s.defaultSampleFlags=i.defaultSampleFlags,s}return Jp(i,t),C.defineProperty(i.prototype,"trackId",{get:function(){return this.hk},set:function(t){if(!zi(t,32))throw new k("Provided track id does not fit in 32 bits.");this.hk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"baseDataOffset",{get:function(){return this.Nk},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new k("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new k("The base data offset present flag is not set.");if(t&&!zi(t,64))throw new k("Provided baseDataOffset does not fit in 32 bits.");this.Nk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"sampleDescriptionIndex",{get:function(){return this.Dk},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new k("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new k("The sample description index flag is not set.");if(t&&!zi(t,32))throw new k("Provided sampleDescriptionIndex does not fit in 32 bits.");this.Dk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.lk},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new k("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new k("The default sample duration present flag is not set.");if(t&&!zi(t,32))throw new k("Provided defaultSampleDuration does not fit in 32 bits.");this.lk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.dk},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new k("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new k("The default sample size present flag is not set.");if(t&&!zi(t,32))throw new k("Provided defaultSampleSize does not fit in 32 bits.");this.dk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.fk},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new k("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new k("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!zi(t.samplePaddingValue,3))throw new k("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!zi(t.sampleDegradationPriority,16))throw new k("Provided sample degradation priority does not fit in 16 bits.");this.fk=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(i+=8),this.flags.sampleDescriptionIndexPresent&&(i+=4),this.flags.defaultSampleDurationPresent&&(i+=4),this.flags.defaultSampleSizePresent&&(i+=4),this.flags.defaultSampleFlagsPresent&&(i+=4),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(i.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&i.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&i.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&i.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&Fn(this.defaultSampleFlags,i)},i}(Qs);function kM(t){var i=t.data,e=i.nextUint8(),s=new ou(Wo.from(i.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var h=Boolean(s.readBit()),o=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),l=i.nextUint32(),d=c?i.nextUint64():void 0,f=u?i.nextUint32():void 0,_=a?i.nextUint32():void 0,g=o?i.nextUint32():void 0,w=h?Sy(new ou(Wo.from(i.nextUint8Array(4)))):void 0;return new LM({trackId:l,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:d,sampleDescriptionIndex:f,defaultSampleDuration:_,defaultSampleSize:g,defaultSampleFlags:w},e)}r();var Dn=function(t){function i(i,e,s){var n=t.call(this,"trun",i,function(t){var i,e,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(i=t.sampleDurationPresent)&&void 0!==i&&i,sampleSizePresent:null!==(e=t.sampleSizePresent)&&void 0!==e&&e,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(e))||this;return n.dataOffset=e.dataOffset,n.samples=s,n.firstSampleFlags=e.firstSampleFlags,n}return Jp(i,t),C.defineProperty(i.prototype,"dataOffset",{get:function(){return this.Ik},set:function(t){if(t&&!zi(t,32))throw new k("Provided data offset does not fit in 32 bits.");this.Ik=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"firstSampleFlags",{get:function(){return this.Sk},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!zi(t.samplePaddingValue,3))throw new k("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!zi(t.sampleDegradationPriority,16))throw new k("Provided sample degradation priority does not fit in 16 bits.");this.Sk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"samples",{get:function(){return this.Ek},set:function(t){var i,e;if(!zi(t.length,32))throw new k("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new k("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new k("The sample duration present flag is not set.");if(r.duration&&!zi(r.duration,32))throw new k("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new k("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new k("The sample size present flag is not set.");if(r.size&&!zi(r.size,32))throw new k("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new k("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new k("The sample flags present flag is not set.");if((null===(i=r.flags)||void 0===i?void 0:i.samplePaddingValue)&&!zi(r.flags.samplePaddingValue,3))throw new k("Provided sample padding value does not fit in 3 bits.");if((null===(e=r.flags)||void 0===e?void 0:e.sampleDegradationPriority)&&!zi(r.flags.sampleDegradationPriority,16))throw new k("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new k("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new k("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!zi(r.compositionTimeOffset,32))throw new k("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.Ek=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(i+=4),this.flags.firstSampleFlagsPresent&&(i+=4),this.flags.sampleDurationPresent&&(i+=4*this.samples.length),this.flags.sampleSizePresent&&(i+=4*this.samples.length),this.flags.sampleFlagsPresent&&(i+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(i+=4*this.samples.length),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&i.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&Fn(this.firstSampleFlags,i);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];this.flags.sampleDurationPresent&&i.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&i.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&Fn(n.flags,i),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?i.writer.writeUInt(n.compositionTimeOffset,32):i.writer.writeInt(n.compositionTimeOffset,32))}},i}(Qs);function xM(t){var i=t.data,e=i.nextUint8(),s=new ou(Wo.from(i.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),h=Boolean(s.readBit()),o=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=i.nextUint32(),l={sampleDurationPresent:o,sampleSizePresent:h,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(l.dataOffset=i.nextInt32()),a&&(l.firstSampleFlags=Sy(new ou(Wo.from(i.nextUint8Array(4)))));for(var d=[],f=0;f<c;f++){var _={};o&&(_.duration=i.nextUint32()),h&&(_.size=i.nextUint32()),r&&(_.flags=Sy(new ou(Wo.from(i.nextUint8Array(4))))),n&&(_.compositionTimeOffset=0===e?i.nextUint32():i.nextInt32()),d.push(_)}return new Dn(e,l,d)}var pe=function(t){function i(){return t.call(this,"traf")||this}return Jp(i,t),i}(Bn);function CM(t){for(var i=new pe,e=0,s=mh(t.data);e<s.length;e++){var n=s[e];co(n,"tfhd")?i.boxes.push(kM(n)):co(n,"tfdt")?i.boxes.push(bM(n)):co(n,"trun")?i.boxes.push(xM(n)):i.boxes.push(jh(n))}return i}var OM=function(t){function i(){return t.call(this,"moof")||this}return Jp(i,t),i}(Bn);function jM(t){for(var i=new OM,e=0,s=mh(t.data);e<s.length;e++){var n=s[e];co(n,"traf")?i.boxes.push(CM(n)):co(n,"pssh")?i.boxes.push(cM(n)):i.boxes.push(jh(n))}return i}r();!function(t){function i(i){var e=t.call(this,"mfhd",0,0)||this;return e.sequenceNumber=i,e}Jp(i,t),C.defineProperty(i.prototype,"sequenceNumber",{get:function(){return this.bk},set:function(t){if(!zi(t,32))throw new k("Provided sequence number does not fit in 32 bits.");this.bk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.sequenceNumber,32)}}(Qs);r();var zM=function(t){function i(i){var e=t.call(this,"frma")||this;return e.codingName=i,e}return Jp(i,t),C.defineProperty(i.prototype,"codingName",{get:function(){return this.Lk},set:function(t){if(4!==t.length)throw new k("Provided coding name was not 4 characters long.");this.Lk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},i}(Le);r();!function(t){function i(i,e){var s=t.call(this,"pasp")||this;return s.hSpacing=i,s.vSpacing=e,s}Jp(i,t),C.defineProperty(i.prototype,"hSpacing",{get:function(){return this.xk},set:function(t){if(!zi(t,32))throw new k("Provided hSpacing does not fit in 32 bits.");this.xk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"vSpacing",{get:function(){return this.Ck},set:function(t){if(!zi(t,32))throw new k("Provided vSpacing does not fit in 32 bits.");this.Ck=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(Le);r();!function(t){function i(i,e,s){var n=t.call(this,i)||this;return n.sample=e,n.sinf=s,n}Jp(i,t),i.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},i.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(Bn);r();!function(t){function i(i,e,s){var n=t.call(this,"sinf")||this;return n.schm=e,n.schi=s,n.frma=new zM(i),n}Jp(i,t),i.prototype.getBoxContentSize=function(){var t,i,e,s;return this.frma.getSize()+(null!==(i=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==i?i:0)+(null!==(s=null===(e=this.schi)||void 0===e?void 0:e.getSize())&&void 0!==s?s:0)},i.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(Le);r();var PM=function(t){function i(i,e,s){var n=t.call(this,"saio",i,void 0===s?0:1)||this;return n.entries=e,n.explicitAuxInfoType=s,n}return Jp(i,t),C.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"entries",{get:function(){return this.jL},set:function(t){var i=this;if(!zi(t.length,32))throw new k("Number of entries provided does not fit in 32 bits.");if(t.some((function(t){return!zi(t,i.bitSize)})))throw new k("Not all provided entries fit in ".concat(this.bitSize," bits."));this.jL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.Ok},set:function(t){if(void 0===t)this.flags=0;else{if(!zi(t.auxInfoType,32))throw new k("Provided auxInfoType does not fit in 32 bits.");if(!zi(t.auxInfoTypeParameter,32))throw new k("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.Ok=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(i)},i}(Qs);(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Jp(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s,32)}}})(PM),function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Jp(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}(PM);r();!function(t){function i(i,e,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=i,n.sampleInfoSizes=e,n.explicitAuxInfoType=s,n}Jp(i,t),C.defineProperty(i.prototype,"defaultSampleInfoSize",{get:function(){return this.jk},set:function(t){if(!zi(t,8))throw new k("Provided defaultSampleInfoSize does not fit in a single byte.");this.jk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"sampleInfoSizes",{get:function(){return this.zk},set:function(t){if(!zi(t.length,32))throw new k("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some((function(t){return!zi(t,8)})))throw new k("Not all provided sampleInfoSizes fit in a byte.");this.zk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.Ok},set:function(t){if(void 0===t)this.flags=0;else{if(!zi(t.auxInfoType,32))throw new k("Provided auxInfoType does not fit in 32 bits.");if(!zi(t.auxInfoTypeParameter,32))throw new k("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.Ok=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},i.prototype.serializeBoxContent=function(i){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new k("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeByte(this.defaultSampleInfoSize),i.writer.writeUInt(this.sampleInfoSizes.length,32);for(var e=0,s=this.sampleInfoSizes;e<s.length;e++){var n=s[e];i.writer.writeByte(n)}}}(Qs);r();!function(t){function i(i){var e=t.call(this,"sdtp",0,0)||this;return e.samples=i,e}Jp(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i);for(var e=0,s=this.samples;e<s.length;e++){rM(s[e],i)}}}(Qs);r();!function(t){function i(i){return t.call(this,"stsd",i,0)||this}Jp(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(jy);r();var BM=function(t){function i(i,e,s){var n=t.call(this,"sgpd",i,0)||this;return n.entries=s,n.groupingType=e,n}return Jp(i,t),C.defineProperty(i.prototype,"groupingType",{get:function(){return this.Pk},set:function(t){if(4!==t.length)throw new k("The provided groupingType does not equal 4 characters.");this.Pk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.groupingType),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];this.serializeEntryBoxContent(i,n)}},i.prototype.serializeEntryBoxContent=function(t,i){i.serializeBoxContent(t)},i}(Qs);(function(t){function i(i,e){return t.call(this,0,i,e)||this}Jp(i,t),i.prototype.serializeVersionBoxContent=function(t){}})(BM),function(t){function i(i,e,s){var n=t.call(this,1,i,s)||this;return n.defaultLength=e,n}Jp(i,t),C.defineProperty(i.prototype,"defaultLength",{get:function(){return this.Bk},set:function(t){if(!zi(t,32))throw new k("The provided defaultLength does not fit in 32 bits.");this.Bk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},i.prototype.serializeEntryBoxContent=function(t,i){0===this.defaultLength&&t.writer.writeUInt(i.getBoxContentSize(),32),i.serializeBoxContent(t)}}(BM),function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=this;if(i<2)throw new k("This constructor is only meant for versions 2 and up.");return(r=t.call(this,i,e,s)||this).defaultSampleDescriptionIndex=n,r}Jp(i,t),C.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.ck},set:function(t){if(!zi(t,32))throw new k("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.ck=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(BM);r();(function(t){function i(i){void 0===i&&(i=[]);var e=t.call(this,"stsz",0,0)||this;return e.sampleSizes=i,e}Jp(i,t),C.defineProperty(i.prototype,"sampleSizes",{get:function(){return this.Rk},set:function(t){if(!zi(t.length,32))throw new k("Number of allowed samples cannot fit in 32 bits.");if(t.some((function(t){return!zi(t,32)})))throw new k("Not all sampleSizes can be represented in 32 bits.");this.Rk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(this.sampleSizes.length,32);for(var e=0,s=this.sampleSizes;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}})(Qs),function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=i,s.samples=e,s}Jp(i,t),C.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.dk},set:function(t){if(!zi(t,32))throw new k("Provided defaultSampleSize does not fit in 32 bits.");this.dk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"samples",{get:function(){return this.Ek},set:function(t){if(!zi(t,32))throw new k("Number of allowed samples cannot fit in 32 bits.");this.Ek=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.defaultSampleSize,32),i.writer.writeUInt(this.samples,32)}}(Qs);r();!function(t){function i(){return t.call(this,"stbl")||this}Jp(i,t)}(Bn);r();!function(t){function i(i){var e=t.call(this,"stsc",0,0)||this;return e.entries=i,e}Jp(i,t),C.defineProperty(i.prototype,"entries",{get:function(){return this.jL},set:function(t){if(!zi(t.length,32))throw new k("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!zi(t.firstChunk,32)||!zi(t.sampleDescriptionIndex,32)||!zi(t.samplesPerChunk,32)})))throw new k("Not all entries can be represented in 96 bits.");this.jL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.firstChunk,32),i.writer.writeUInt(n.samplesPerChunk,32),i.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(Qs);r();!function(t){function i(){return t.call(this,"schi")||this}Jp(i,t)}(Bn);r();!function(t){function i(i,e,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=i,n.schemeVersion=e,n.schemeUri=s,n}Jp(i,t),C.defineProperty(i.prototype,"schemeType",{get:function(){return this.Uk},set:function(t){if(4!==t.length)throw new k("The provided schemeType does not have a length of 4.");this.Uk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"schemeVersion",{get:function(){return this.Qk},set:function(t){if(!zi(t,32))throw new k("The provided schemeVersion does not fit in 23 bits.");this.Qk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"schemeUri",{get:function(){return this.Fk},set:function(t){if(t&&4!==t.length)throw new k("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this.Fk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeType),i.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(i.writer.writeString(this.schemeUri),i.writer.writeByte(0))}}(Qs);r();var RM=function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o=0);var a=t.call(this,"sidx",i,o)||this;return a.referenceId=e,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=h,a}return Jp(i,t),C.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"referenceId",{get:function(){return this.Yk},set:function(t){if(!zi(t,32))throw new k("Provided referenceId does not fit in 32 bits.");this.Yk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"timescale",{get:function(){return this.ZL},set:function(t){if(!zi(t,32))throw new k("Provided timescale does not fit in 32 bits.");this.ZL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"earliestPresentationTime",{get:function(){return this.Gk},set:function(t){if(!zi(t,this.bitSize))throw new k("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.Gk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"firstOffset",{get:function(){return this.Wk},set:function(t){if(!zi(t,this.bitSize))throw new k("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.Wk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"references",{get:function(){return this.Vk},set:function(t){if(!zi(t.length,16))throw new k("The number of provided reference items does not fit in 16 bits.");for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!zi(s.referencedSize,31))throw new k("Provided referenced size does not fit in 31 bits.");if(!zi(s.subsegmentDuration,32))throw new k("Provided subsegment duration does not fit in 31 bits.");if(!zi(s.sapType,3))throw new k("Provided SAP type does not fit in 3 bits.");if(!zi(s.sapDeltaTime,28))throw new k("Provided SAP delta time does not fit in 28 bits.")}this.Vk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.referenceId,32),i.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(i),i.writer.writeUInt(0,16),i.writer.writeUInt(this.references.length,16);for(var e=0,s=this.references;e<s.length;e++){var n=s[e];i.writer.writeBit(n.referenceType),i.writer.writeUInt(n.referencedSize,31),i.writer.writeUInt(n.subsegmentDuration,32),i.writer.writeBool(n.startsWithSap),i.writer.writeUInt(n.sapType,3),i.writer.writeUInt(n.sapDeltaTime,28)}},i}(Qs),UM=function(t){function i(i,e,s,n,r,h){return void 0===h&&(h=0),t.call(this,0,i,e,s,n,r,h)||this}return Jp(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},i}(RM),QM=function(t){function i(i,e,s,n,r,h){return void 0===h&&(h=0),t.call(this,1,i,e,s,n,r,h)||this}return Jp(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},i}(RM);r();var FM=function(t){function i(i,e,s){return t.call(this,"styp",i,e,s)||this}return Jp(i,t),i}(Fy);function YM(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new FM(e,s,n)}r();!function(t){function i(i){void 0===i&&(i=0);var e=t.call(this,"smhd",0,0)||this;return e.balance=i,e}Jp(i,t),C.defineProperty(i.prototype,"balance",{get:function(){return this.Hk},set:function(t){if(t<-1||t>1)throw new k("Provided balance does not fit in the allowed range [-1, 1].");if(!zi(ye(t,8),16))throw new k("Provided balance does not fit in 16 bits (fixed 8.8).");this.Hk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(ye(this.balance,8),16),i.writer.writeUInt(0,16)}}(Qs);r();!function(t){function i(i){var e=t.call(this,"stss",0,0)||this;return e.entries=i,e}Jp(i,t),C.defineProperty(i.prototype,"entries",{get:function(){return this.jL},set:function(t){if(!zi(t.length,32))throw new k("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!zi(t,32)})))throw new k("Not all entries can be represented in 32 bits.");this.jL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(Qs);r();!function(t){function i(i){var e=t.call(this,"stts",0,0)||this;return e.entries=i,e}Jp(i,t),C.defineProperty(i.prototype,"entries",{get:function(){return this.jL},set:function(t){if(!zi(t.length,32))throw new k("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!zi(t.sampleCount,32)||!zi(t.sampleDelta,32)})))throw new k("Not all entries can be represented in 64 bits.");this.jL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),i.writer.writeUInt(n.sampleDelta,32)}}}(Qs);r();!function(t){function i(i){var e=t.call(this,"trep",0,0)||this;return e.trackId=i,e}Jp(i,t),C.defineProperty(i.prototype,"trackId",{get:function(){return this.hk},set:function(t){if(!zi(t,32))throw new k("The provided trackId does not fit in 32 bits.");this.hk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32)}}(jy);r();!function(t){function i(){return t.call(this,"udta")||this}Jp(i,t)}(Bn);r();var GM={red:0,green:0,blue:0};!function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=GM);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=i,s.opColor=e,s}Jp(i,t),C.defineProperty(i.prototype,"opColor",{get:function(){return this.qk},set:function(t){if(!zi(t.red,16)||!zi(t.green,16)||!zi(t.blue,16))throw new k("Not all colors could be represented in 16 bits.");this.qk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.graphicsMode,16),i.writer.writeUInt(this.opColor.red,16),i.writer.writeUInt(this.opColor.green,16),i.writer.writeUInt(this.opColor.blue,16)}}(Qs);r();var WM=function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h,o,a,u,c,l=this;return(l=t.call(this,i,e)||this).width=s.width,l.height=s.height,l.horizontalResolution=null!==(h=s.horizontal)&&void 0!==h?h:72,l.verticalResolution=null!==(o=s.vertical)&&void 0!==o?o:72,l.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",l.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,l.depth=null!==(c=n.depth)&&void 0!==c?c:24,l.clap=n.clap,l.pasp=n.pasp,l.extra=r,l}return Jp(i,t),C.defineProperty(i.prototype,"width",{get:function(){return this.vk},set:function(t){if(!zi(t,16))throw new k("Provided width does not fit in 16 bits.");this.vk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"height",{get:function(){return this.pk},set:function(t){if(!zi(t,16))throw new k("Provided height does not fit in 16 bits.");this.pk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"horizontalResolution",{get:function(){return this.Xk},set:function(t){if(!zi(ye(t,16),32))throw new k("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.Xk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"verticalResolution",{get:function(){return this.Zk},set:function(t){if(!zi(ye(t,16),32))throw new k("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.Zk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"compressorName",{get:function(){return this.Kk},set:function(t){if(t.length>31)throw new k("The provided compressorName should at most be 31 characters long.");this.Kk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"frameCount",{get:function(){return this.Jk},set:function(t){if(!zi(t,16))throw new k("Provided frameCount does not fit in 16 bits.");this.Jk=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"depth",{get:function(){return this.$k},set:function(t){if(!zi(t,16))throw new k("Provided depth does not fit in 16 bits.");this.$k=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e,s,n,r,h;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(e=null===(i=this.clap)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(h=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==h?h:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.width,16),i.writer.writeUInt(this.height,16),i.writer.writeUInt(ye(this.horizontalResolution,16),32),i.writer.writeUInt(ye(this.verticalResolution,16),32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.frameCount,16),i.writer.writeByte(this.compressorName.length),i.writer.writeString(this.compressorName);for(var e=0;e<31-this.compressorName.length;e++)i.writer.writeByte(0);i.writer.writeUInt(this.depth,16),i.writer.writeInt(-1,16),this.clap&&i.concat(this.clap.serialize()),this.pasp&&i.concat(this.pasp.serialize()),this.extra&&ny(i.writer,this.extra)},i}(Cy);r(),r();!function(t){function i(i){var e=t.call(this,"esds",0,0)||this;return e.esDescriptor=i,e}Jp(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof A?this.esDescriptor.length:this.esDescriptor.getSize())},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor instanceof A?i.concat(Wo.from(this.esDescriptor)):this.esDescriptor.serialize(i)}}(Qs);r();!function(t){function i(i,e,s){var n=t.call(this,"mp4a",i,s)||this;return n.esd=e,n}Jp(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.esd.serialize())}}(Oy);r();!function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",i,e,n)||this;return r.esDescriptor=s,r}Jp(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(WM);r();!function(t){function i(i,e){var s=t.call(this,"mp4s",i)||this;return s.esDescriptor=e,s}Jp(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(Cy);r(),r();!function(t){function i(i){var e=t.call(this,"avcC")||this;return e.decoderConfig=i,e}Jp(i,t),i.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},i.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(Le);r();!function(){function t(t,i,e,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=e,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=i,this.spsSets=s,this.ppsSets=n}C.defineProperty(t.prototype,"version",{get:function(){return this.tx},set:function(t){if(!zi(t,8))throw new k("Provided version does not fit in 8 bits.");this.tx=t},enumerable:!1,configurable:!0}),C.defineProperty(t.prototype,"profileIndication",{get:function(){return this.ix},set:function(t){if(!zi(t,8))throw new k("Provided profileIndication does not fit in 8 bits.");this.ix=t},enumerable:!1,configurable:!0}),C.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.sx},set:function(t){if(!zi(t,8))throw new k("Provided profileCompatibility does not fit in 8 bits.");this.sx=t},enumerable:!1,configurable:!0}),C.defineProperty(t.prototype,"levelIndication",{get:function(){return this.nx},set:function(t){if(!zi(t,8))throw new k("Provided levelIndication does not fit in 8 bits.");this.nx=t},enumerable:!1,configurable:!0}),C.defineProperty(t.prototype,"spsSets",{get:function(){return this.hx},set:function(t){if(!zi(t.length,5))throw new k("Provided number of spsSets exceeds the max (32)");this.hx=t},enumerable:!1,configurable:!0}),C.defineProperty(t.prototype,"ppsSets",{get:function(){return this.ox},set:function(t){if(!zi(t.length,8))throw new k("Provided number of ppsSets exceeds the max (256)");this.ox=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce((function(t,i){return t+i.length}),0)+2*this.ppsSets.length+this.ppsSets.reduce((function(t,i){return t+i.length}),0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var i=0,e=this.spsSets;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.length,16),t.concat(Wo.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var h=r[n];t.writer.writeUInt(h.length,16),t.concat(Wo.from(h))}}}();r();!function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h=t.call(this,"avc1",i,e,n)||this;return h.configurationBox=s,h.bitrateBox=r,h}Jp(i,t),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(e=null===(i=this.bitrateBox)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.configurationBox.serialize()),this.bitrateBox&&i.concat(this.bitrateBox.serialize())}}(WM);r();!function(t){function i(i,e,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=i,n.max=e,n.avg=s,n}Jp(i,t),C.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.NL},set:function(t){if(!zi(t,32))throw new k("Provided bufferSizeDb does not fit in 32 bits.");this.NL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"max",{get:function(){return this.ux},set:function(t){if(!zi(t,32))throw new k("Provided max does not fit in 32 bits.");this.ux=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"avg",{get:function(){return this.lx},set:function(t){if(!zi(t,32))throw new k("Provided avg does not fit in 32 bits.");this.lx=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 12},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(Le);r(),r(),r();var VM=function(t){function i(i,e){var s,n,r,h,o=this;if(o=t.call(this,"tenc",i,0)||this,e.perSampleIvSize>0&&(null!==(n=null===(s=e.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new k("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return o.kId=e.kId,o.isProtected=null!==(r=e.isProtected)&&void 0!==r?r:1,e.perSampleIvSize>0?o.perSampleIvSize=e.perSampleIvSize:o.constantIv=null!==(h=e.constantIv)&&void 0!==h?h:new A(0),o}return Jp(i,t),C.defineProperty(i.prototype,"isProtected",{get:function(){return this._x},set:function(t){if(!zi(t,8))throw new k("Provided isProtected does not fit in 1 byte.");this._x=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"perSampleIvSize",{get:function(){return this.gx},set:function(t){if(![8,16].includes(t))throw new k("Provided perSampleIvSize does not match any allowed value [8, 16].");this.gx=t,this.wx=new A(0)},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"kId",{get:function(){return this.Ax},set:function(t){if(16!==t.length)throw new k("Provided kId length is not 16.");this.Ax=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"constantIv",{get:function(){return this.wx},set:function(t){if(![8,16].includes(t.length))throw new k("Provided constant IV length does not match any allowed value [8, 16].");this.wx=t,this.gx=0},enumerable:!1,configurable:!0}),i.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeOwnContent(i)},i.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),ny(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),ny(t.writer,this.constantIv))},i}(Qs),HM=(function(t){function i(i){return t.call(this,0,i)||this}Jp(i,t)}(VM),function(t){function i(i){var e=t.call(this,1,i)||this;return e.cryptByteBlocks=i.cryptByteBlock,e.skipByteBlocks=i.skipByteBlock,e}return Jp(i,t),C.defineProperty(i.prototype,"cryptByteBlocks",{get:function(){return this.vx},set:function(t){if(!zi(t,4))throw new k("Provided cryptByteBlocks does not fit in 4 bits.");this.vx=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"skipByteBlocks",{get:function(){return this.mx},set:function(t){if(!zi(t,4))throw new k("Provided skipByteBlocks does not fit in 4 bits.");this.mx=t},enumerable:!1,configurable:!0}),i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},i}(VM));!function(t){function i(i){var e=t.call(this)||this;return e.tencBox=new HM(i),e}Jp(i,t),i.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},i.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(hM);function qM(t){return void 0!==t.iv}function XM(t){return void 0!==t.subsamples}r();!function(t){function i(i){var e=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return e.samples=i,e}Jp(i,t),C.defineProperty(i.prototype,"samples",{get:function(){return this.Ek},set:function(t){var i;if(!zi(t.length,32))throw new k("The number of samples provided does not fit in 32 bits.");for(var e=0,s=t;e<s.length;e++){var n=s[e];if(qM(n)&&![8,16].includes(n.iv.length))throw new k("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===i&&(i=XM(n)),!0===i&&!XM(n)||!1===i&&XM(n))throw new k("Mix of samples with and without subsamples detected.");if(XM(n)){if(!zi(n.subsamples.length,16))throw new k("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];if(!zi(o.clearData,16))throw new k("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!zi(o.protectedData,23))throw new k("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=i&&i,this.Ek=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){for(var i=0,e=0,s=this.samples;e<s.length;e++){var n=s[e];qM(n)&&(i+=n.iv.length),XM(n)&&(i+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];if(qM(n)&&ny(i.writer,n.iv),XM(n)){i.writer.writeUInt(n.subsamples.length,16);for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];i.writer.writeUInt(o.clearData,16),i.writer.writeUInt(o.protectedData,32)}}}},i.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}}(Qs);r(),r();!function(t){function i(i,e,s,n,r){var h=t.call(this,"emsg",0,0)||this;return h.schemeIdUri=i,h.value=e,h.data=r,h.id=s,h.timescale=n.timescale,h.presentationTimeDelta=n.presentationTimeDelta,h.eventDuration=n.eventDuration,h}Jp(i,t),C.defineProperty(i.prototype,"timescale",{get:function(){return this.ZL},set:function(t){if(!zi(t,32))throw new k("The provided timescale does not fit in 32 bits.");this.ZL=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"presentationTimeDelta",{get:function(){return this.yx},set:function(t){if(!zi(t,32))throw new k("The provided presentationTimeDelta does not fit in 32 bits.");this.yx=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"eventDuration",{get:function(){return this.Mx},set:function(t){if(!zi(t,32))throw new k("The provided eventDuration does not fit in 32 bits.");this.Mx=t},enumerable:!1,configurable:!0}),C.defineProperty(i.prototype,"id",{get:function(){return this.ym},set:function(t){if(!zi(t,32))throw new k("The provided id does not fit in 32 bits.");this.ym=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeIdUri),i.writer.writeByte(0),i.writer.writeString(this.value),i.writer.writeByte(0),i.writer.writeUInt(this.timescale,32),i.writer.writeUInt(this.presentationTimeDelta,32),i.writer.writeUInt(this.eventDuration,32),i.writer.writeUInt(this.id,32),i.concat(Wo.from(this.data))}}(Qs);r(),r(),r();var ZM=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new sy,i=0,e=this.boxes;i<e.length;i++){var s=e[i];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function KM(t,i){return function(e){var s=function(t,i){for(var e=t.data,s=t.cursor;s.offset<e.byteLength;){var n=Dy(e,s);if(!n.complete)return;if(co(n.box,i))return n.box}}(new Ty(py(e),new My),t);if(!s)throw new k("".concat(t," box not found"));return i(s)}}var JM=KM("moov",IM),$M=KM("sidx",(function(t){var i,e,s=t.data,n=ua(s.nextUint32()),r=n.version,h=n.flags,o=s.nextUint32(),a=s.nextUint32();0===r?(i=s.nextUint32(),e=s.nextUint32()):(i=s.nextUint64(),e=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],l=0;l<u;l++){var d=new ou(Wo.from(s.nextUint8Array(12))),f=d.readBit(),_=d.readUInt(31),g=d.readUInt(32),w=Boolean(d.readBit()),A=d.readUInt(3),v=d.readUInt(28);c.push({referenceType:f,referencedSize:_,subsegmentDuration:g,startsWithSap:w,sapType:A,sapDeltaTime:v})}return 0===r?new UM(o,a,i,e,c,h.raw):new QM(o,a,i,e,c,h.raw)})),tT=KM("moof",jM),iT=KM("pssh",cM);function eT(t){return function(t){for(var i=new ZM,e=0,s=mh(t);e<s.length;e++){var n=s[e];co(n,"ftyp")?i.boxes.push(Gy(n)):co(n,"styp")?i.boxes.push(YM(n)):co(n,"moov")?i.boxes.push(IM(n)):co(n,"moof")?i.boxes.push(jM(n)):co(n,"mdat")?i.boxes.push($y(n)):i.boxes.push(jh(n))}return i}(new Ty(py(t),new My))}var sT=class extends i{get Tx(){return this.Td}get Nx(){return this.Dx.expiration}get Ix(){return this.Sx}get Ex(){return this.Dx.sessionId}Gs(){if(this.bx)return this.Td;const t=[];return t.push(Promise.resolve(this.Dx.close())),t.push(yc(1e3)),this.Lx.e_(Promise.race(t).catch(nT)),this.bx=!0,this.Td}kx(t,i,e){if(li._E){const t=iT(no(i));if(1===t.version){i=new aM(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.Dx.generateRequest(t,i)).catch(nT)}En(t){return Promise.resolve(this.Dx.load(t)).catch(nT)}wm(){return Promise.resolve(this.Dx.remove()).catch(nT)}Hn(t){return Promise.resolve(this.Dx.update(t)).catch(nT)}xx(){this.Sx.tL(),this.Dx.keyStatuses.forEach(((t,i)=>{this.Cx(i,t)})),this.jo(new Yp(this))}Cx(t,i){if("string"==typeof t){const e=t;t=i,i=e}const e=no(t);if(this.Ox===Sp&&16===e.byteLength){let t=mo(e),i=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,i,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.Ox===Sp&&"status-pending"===i&&(i="usable"),this.Sx.$b(e,i)}constructor(t,i){super(),this.Dx=t,this.Ox=i,this.bx=!1,this.jx=()=>{this.xx()},this.zx=t=>{this.jo(new rn(this,t.messageType,qp(this.Ox,t.message)))},this.Px=()=>{this.bx=!0,this.Sx.Xm>0&&(this.Sx.tL(),this.jo(new Yp(this))),this.Dx.removeEventListener("keystatuseschange",this.jx),this.Dx.removeEventListener("message",this.zx)},this.Dx.addEventListener("keystatuseschange",this.jx),this.Dx.addEventListener("message",this.zx),this.Sx=new ne;const e=[];this.Dx.closed&&e.push(Promise.resolve(this.Dx.closed)),this.Lx=new $s,e.push(this.Lx.sL),this.Td=Promise.race(e).then(this.Px,this.Px),this.xx()}};function nT(t){let i;if(t.message){const e=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);e&&(i=0|j(e[1],16))}throw new Zp(t.message,void 0,i,t)}var rT=class{async Bx(t){return new sT(this.Rx.createSession(t),this.Ux)}Qx(t){return Promise.resolve(this.Rx.setServerCertificate(t))}fn(t){return Promise.resolve(t.setMediaKeys(this.Rx))}Fx(t){return Promise.resolve(t.setMediaKeys(null))}Gn(){return Promise.resolve()}constructor(t,i,e){this.Rx=t,this.Ux=i,this.dd=e}},hT=class{get Ux(){return this.Yx.keySystem}async Gx(){const t=await this.Yx.createMediaKeys();return new rT(t,this.Ox,this.Wx)}Vx(){return this.Wx}constructor(t,i,e){this.Yx=t,this.Ox=i,this.Wx=e}};r();var oT=li.yE&&li.TE>=42||li.VE&&li.qE>=38||li.BE||li.FE||li.ib&&li.sb>=29;function aT(t,i){return Ji(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[qr({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[qr({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function uT(){return void 0!==td&&"function"==typeof td.requestMediaKeySystemAccess}function Ln(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var cT=class{Hx(){return this.qx(zp)}Xx(){return this.qx(Bp)}Zx(){return this.qx(En)}Kx(){return this.qx(Hi)}qx(t){const i=t.Rb,e=this.Jx.get(i);if(e)return e;const s=this.$x(t,'video/mp4; codecs="avc1.42000a"');return this.Jx.set(i,s),s}async $x(t,i){try{return await this.iC.tC(t.zb,[aT(i,!0)]),!0}catch(e){try{return await this.iC.tC(t.zb,[aT(i,!1)]),!0}catch(t){return!1}}}eC(){return this.sC||(this.sC=this.nC()),this.sC}async nC(){return"https:"!==pp.protocol&&(!!oT&&!await this.Xx())}constructor(t){this.Jx=Mt(),this.sC=void 0,this.iC=t}};function ie(t,i,e,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,rC:s.rC};let h=!1;if(s.audioCapabilities){const o=s.audioCapabilities.filter((t=>Boolean(t.contentType)));o.length&&(r.audioCapabilities=o.filter((s=>lT(t,i,e,s))),h=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const o=s.videoCapabilities.filter((t=>Boolean(t.contentType)));o.length&&(r.videoCapabilities=o.filter((s=>lT(t,i,e,s))),h=!0,r.videoCapabilities.length&&(n=!0))}return h||(n=t(e,"video/mp4")),n?r:void 0}function lT(t,i,e,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!ks(i,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(e,sl(s.contentType))}function dT(t){if(t.videoCapabilities)for(const i of t.videoCapabilities)if(i.contentType)return i.contentType;if(t.audioCapabilities)for(const i of t.audioCapabilities)if(i.contentType)return i.contentType}function fT(t){const i=[];for(const e of t)e.encryptionScheme&&i.push({contentType:e.contentType,robustness:e.robustness});return t.concat(i)}function _T(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(gT))||!(!t.videoCapabilities||!t.videoCapabilities.some(gT))}function gT(t){return!t.robustness}function wT(t,i){const e=[];for(const s of t)s.robustness?e.push(s):e.push(qr({},s,{robustness:i}));return e}r();var AT=class{async tC(t,i){i=i.filter((t=>!t.rC));for(const t of i)t.audioCapabilities&&(t.audioCapabilities=fT(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=fT(t.videoCapabilities));if(t===bp&&i.some(_T)){const e=i.map((t=>function(t,i){return qr({},t,{videoCapabilities:t.videoCapabilities?wT(t.videoCapabilities,i):void 0,audioCapabilities:t.audioCapabilities?wT(t.audioCapabilities,i):void 0})}(t,"SW_SECURE_CRYPTO")));try{const i=await td.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new hT(i,t,s)}catch(t){}}const e=await td.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new hT(e,t,s)}static hC(){return uT()}};r(),r(),r(),r();var vT=class extends i{get Ex(){return this.oC&&this.oC.sessionId||""}get Nx(){return NaN}get Tx(){return this.aC.sL}get Ix(){return this.uC}async kx(t,i,e){this.cC(),this.lC=new $s,this.Bx(no(i),e),await this.lC.sL}Bx(t,i){if(!t)throw new _("Expected initData to be defined but was "+t+".");const e=i&&i.playready&&i.playready.dC;let s;return s=i?this.fC.createSession(this._C,t,e):this.fC.createSession(this._C,t),s.addEventListener("mskeyclose",this.Px),s.addEventListener("mskeymessage",this.gC),s.addEventListener("mskeyerror",this.Ss),s.addEventListener("mskeyadded",this.wC),this.oC=s,this.AC("status-pending"),s}async En(t){return this.cC(),!0}async Hn(t){if(this.vC=new $s,this.cC(),!this.oC)return Promise.resolve();const i=no(t);if(0===i.byteLength)throw new _("Cannot call update with an empty response.");this.oC.update(i),await this.vC.sL}Gs(){return!this.bx&&this.oC&&(this.bx=!0,this.oC.close()),this.aC.sL}async wm(){this.cC()}cC(){if(this.bx)throw new _("Already closing or closed.")}AC(t){this.uC.tL(),this.uC.$b(Vp,t),this.jo(new Yp(this))}constructor(t,i){super(),this.fC=t,this._C=i,this.bx=!1,this.vC=void 0,this.lC=void 0,this.oC=void 0,this.Px=()=>{this.bx=!0,this.aC.iL(void 0),this.oC&&(this.oC.removeEventListener("mskeyclose",this.Px),this.oC.removeEventListener("mskeymessage",this.gC),this.oC.removeEventListener("mskeyerror",this.Ss),this.oC.removeEventListener("mskeyadded",this.wC))},this.gC=t=>{this.lC&&(this.lC.iL(void 0),this.lC=void 0),this.jo(new rn(this,"license-request",nt(t.message).buffer,t.destinationURL||void 0))},this.Ss=()=>{const t=this.oC&&this.oC.error;if(!t)return;const i=new Zp("Unknown CDM error",t.code,t.systemCode);if(this.lC)this.lC.eL(i),this.lC=void 0;else if(this.vC)this.vC.eL(i),this.vC=void 0;else switch(i.nL){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.AC("output-not-allowed");break;default:this.AC("internal-error")}},this.wC=()=>{this.lC&&(this.AC("usable"),this.lC.iL(void 0),this.lC=void 0),this.vC&&(this.AC("usable"),this.vC.iL(void 0),this.vC=void 0)},this.aC=new $s,this.uC=new ne}},mT=class{async Bx(t){return new vT(this.fC,this._C)}Qx(t){return Promise.resolve(!1)}fn(t){const i=()=>{t.msSetMediaKeys(this.fC),t.removeEventListener("loadedmetadata",i)};return t.readyState>=1?t.msSetMediaKeys(this.fC):t.addEventListener("loadedmetadata",i),Promise.resolve()}Fx(t){return Promise.resolve()}Gn(){return Promise.resolve()}constructor(t,i,e){this.fC=t,this.Ux=i,this.dd=e;const s=dT(e)||"video/mp4";this._C=sl(s)}},pT=class{get Ux(){return this.Ox}Vx(){return this.mC}Gx(){const t=new J.MSMediaKeys(this.Ox);return Promise.resolve(new mT(t,this.Ox,this.mC))}constructor(t,i){this.Ox=t,this.mC=i}},yT=class{tC(t,i){try{return Promise.resolve(function(t,i){if(!MT())throw new _("Unsupported key system "+t);for(let e of i){let i=ie(TT,Qp,t,e);if(i)return new pT(t,i)}throw new _("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static hC(){return MT()}};function MT(){return void 0!==J.MSMediaKeys&&"function"==typeof J.MSMediaKeys.isTypeSupported}function TT(t,i){return J.MSMediaKeys.isTypeSupported(t,i)}r(),r(),r(),r();var NT=class extends i{get Ex(){return this.pC?this.pC.sessionId:""}get Nx(){return NaN}get Tx(){return this.aC.sL}get Ix(){return this.uC}kx(t,i,e){const s=e&&e.fairplay&&e.fairplay.yC;if(!s)throw new _("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,i,e){const s=zc(t),n=2*s.length,r=2*i.length;let h=new ArrayBuffer(4+n+4+r+4+e.byteLength),o=new DataView(h),a=new Eo;return EA(o,a,n,!0),PA(o,a,s,!0),EA(o,a,r,!0),PA(o,a,i,!0),EA(o,a,e.byteLength,!0),vn(o,a,e),new A(h)}(no(i),s,this.MC);return this.pC=this.TC.createSession(this._C,n),this.pC.addEventListener("webkitkeymessage",this.gC,!1),this.pC.addEventListener("webkitkeyadded",this.wC,!1),this.pC.addEventListener("webkitkeyerror",this.Ss,!1),this.AC("status-pending"),this.NC.iL(this.pC),this.NC=new $s,Promise.resolve()}En(t){return Promise.resolve(!0)}async Hn(t){const i=no(t);if(0===i.byteLength)throw new _("Cannot call update with an empty response.");this.DC=new $s;(this.pC||await this.NC.sL).update(i),await this.DC.sL}Gs(){var t;const i=this.pC;return i&&(i.removeEventListener("webkitkeymessage",this.gC,!1),i.removeEventListener("webkitkeyadded",this.wC,!1),i.removeEventListener("webkitkeyerror",this.Ss,!1),i.close()),this.NC.i_(),null==(t=this.DC)||t.i_(),this.aC.iL(void 0),this.aC.sL}wm(){return Promise.resolve(void 0)}AC(t){this.uC.tL(),this.uC.$b(Vp,t),this.jo(new Yp(this))}constructor(t,i,e){super(),this.TC=t,this._C=i,this.MC=e,this.aC=new $s,this.DC=void 0,this.uC=new ne,this.pC=void 0,this.NC=new $s,this.Ss=()=>{const t=this.pC&&this.pC.error;if(!t)return;const i=new Zp("Unknown CDM error",t.code,t.systemCode);this.DC?(this.DC.eL(i),this.DC=void 0):i.nL===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.AC("output-not-allowed"):this.AC("internal-error"),this.jo(new Gp)},this.gC=t=>{this.jo(new rn(this,"license-request",nt(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.wC=()=>{this.DC&&(this.DC.iL(void 0),this.DC=void 0),this.AC("usable")}}};var DT=class{getInternalMediaKeys(){return this.TC}async Bx(t){if(!this.MC)throw new Ri(ue.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new NT(this.TC,this._C,this.MC)}Qx(t){return this.MC=no(t),Promise.resolve(!0)}fn(t){return t.webkitSetMediaKeys(this.TC),Promise.resolve()}Fx(t){return t.webkitSetMediaKeys(null),Promise.resolve()}Gn(){return Promise.resolve()}constructor(t,i,e){this.TC=t,this.Ux=i,this.dd=e,this.MC=void 0;const s=dT(e)||"video/mp4";this._C=sl(s)}},IT=class{get Ux(){return this.Ox}Vx(){return this.mC}Gx(){const t=new J.WebKitMediaKeys(this.Ox);return Promise.resolve(new DT(t,this.Ox,this.mC))}constructor(t,i){this.Ox=t,this.mC=i}},ST=class{tC(t,i){try{return Promise.resolve(function(t,i){if(t!==Cp)throw new _(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!ET())throw new _("Unsupported key system "+t);for(let e of i){let i=ie(bT,Fp,t,e);if(i)return new IT(t,i)}throw new _("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static hC(){return ET()}};function ET(){return void 0!==J.WebKitMediaKeys&&"function"==typeof J.WebKitMediaKeys.isTypeSupported}function bT(t,i){return J.WebKitMediaKeys.isTypeSupported(t,i)}r();var LT=class{async tC(t,i){for(let e of this.IC)try{return await e.tC(t,i)}catch(t){}throw new _("Unsupported key system configuration for "+t)}constructor(t){this.IC=t}};r(),r(),r(),r(),r();var te=class{SC(t,i){return new Promise((e=>{const s=new Z_;s.e_(this.EC.$f),i&&s.e_(i);const n=()=>{s.Hf()};this.bC.push((()=>{const i=kT(t,s.$f);return e(i),i.then(n,n)})),this.LC||(this.LC=this.kC())}))}i_(){return this.xC(!0)}ln(){return this.OC=void 0,this.xC(!1)}xC(t){const i=this.LC;return this.EC.i_(),t&&(this.EC=new Z_),Promise.resolve(i)}constructor(t){this.bC=[],this.LC=void 0,this.EC=new Z_,this.kC=()=>{if(0===this.bC.length)return this.OC?kT(this.OC,this.EC.$f).then(this.jC,this.jC):this.jC();return this.bC.shift()().then(this.kC)},this.jC=()=>{if(0!==this.bC.length)return this.kC();this.LC=void 0},this.OC=t}};function kT(t,i){return new Promise((e=>e(t(i))))}var xT,CT=new te,OT=class extends i{zC(){this.DC&&(this.AC("usable"),this.DC.iL(void 0),this.DC=void 0)}BC(t){const i=new Zp("Unknown CDM error",t.errorCode,t.systemCode);this.DC?(this.DC.eL(i),this.DC=void 0):this.lC?(this.lC.eL(i),this.lC=void 0):i.nL===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.AC("output-restricted"):1===i.rL?this.AC("expired"):this.AC("internal-error")}RC(t){0!==t.message.byteLength&&(this.lC&&(this.lC.iL(void 0),this.lC=void 0),this.jo(new rn(this,"license-request",qp(this.Ox,nt(t.message).buffer),t.defaultURL||void 0)))}UC(t){this.QC||(this.QC=t,this.FC.iL(t))}get Ix(){return this.YC}get Ex(){return this.GC}set Ex(t){this.GC=t}get Tx(){return this.aC.sL}get Nx(){return NaN}async Gs(){this.throwIfClosed(),this.DC&&(this.DC.eL(void 0),this.DC=void 0),this.gL=!0,this.aC.iL(void 0)}async kx(t,i){this.throwIfClosed(),this.lC=new $s,this.WC=no(i);(this.QC||await this.FC.sL).webkitGenerateKeyRequest(this.Ox,this.WC),await this.lC.sL}async En(t){return this.throwIfClosed(),!1}async wm(){this.throwIfClosed()}async Hn(t){if(this.throwIfClosed(),this.DC=new $s,li.OE||li.LE)return CT.SC((async()=>{await this.doUpdate(t)}));await this.doUpdate(t)}async doUpdate(t){if(void 0===this.DC)return;(this.QC||await this.FC.sL).webkitAddKey(this.Ox,no(t),this.WC,this.Ex),await this.DC.sL}throwIfClosed(){if(this.gL)throw new _("Already closing or closed.")}AC(t){this.YC.tL(),this.YC.$b(Vp,t),this.jo(new Yp(this))}async VC(){const t=this.QC||await this.FC.sL;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.Ox,this.GC)}catch(t){}finally{await yc(500)}}constructor(t){super(),this.Ox=t,this.lC=void 0,this.DC=void 0,this.gL=!1,this.WC=void 0,this.QC=void 0,this.aC=new $s,this.GC="",this.FC=new $s,this.YC=new ne}},jT=class{fn(t){return this.QC=t,this.QC.addEventListener("webkitkeyadded",this.wC),this.QC.addEventListener("webkitkeyerror",this.HC),this.QC.addEventListener("webkitkeymessage",this.qC),this.XC.forEach(((i,e)=>i.UC(t))),this.ZC.forEach((i=>i.UC(t))),Promise.resolve()}Fx(t){return t.removeEventListener("webkitkeyadded",this.wC),t.removeEventListener("webkitkeyerror",this.HC),t.removeEventListener("webkitkeymessage",this.qC),this.QC=void 0,Promise.resolve()}async Gn(){let t=this.XC.entries(),i=t.next();for(;!i.done;)await i.value[1].VC(),i=t.next();this.XC.clear()}async Bx(t,i,e){const s=new OT(this.Ux);return this.QC&&s.UC(this.QC),this.ZC.push(s),s}Qx(t){return Promise.resolve(!1)}KC(t){if(!t)return;let i=this.XC.get(t);return i||(i=this.ZC.shift(),i?(i.Ex=t,this.XC.set(t,i),i):void 0)}constructor(t,i){this.Ux=t,this.dd=i,this.QC=void 0,this.XC=Mt(),this.ZC=[],this.wC=t=>{const i=this.KC(t.sessionId);i&&i.zC()},this.HC=t=>{const i=this.KC(t.sessionId);i&&i.BC(t)},this.qC=t=>{const i=this.KC(t.sessionId);i&&i.RC(t)}}},zT=class{Gx(){return Promise.resolve(new jT(this.Ux,this.JC))}Vx(){return this.JC}constructor(t,i){this.Ux=t,this.JC=i}};function rs(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function PT(t){if(!t)return;let i;for(;oe(i=t.firstChild);)t.removeChild(i)}function BT(t){const i=t.className;return"string"==typeof i?i:i&&"string"==typeof i.baseVal?i.baseVal:""}function RT(t,i){const e=t.className;"string"==typeof e?t.className=i:e&&"string"==typeof e.baseVal&&(e.baseVal=i)}function UT(t,i){return void 0!==t.classList?t.classList.contains(i):void 0!==t.className&&-1!==(" "+BT(t)+" ").indexOf(" "+i+" ")}function Nn(t,i){if(void 0!==t.classList)t.classList.add(i);else if(void 0!==t.className){const e=BT(t);-1===(" "+e+" ").indexOf(" "+i+" ")&&RT(t,(e+" "+i).trim())}}function QT(t,i){if(void 0!==t.classList)t.classList.remove(i);else if(void 0!==t.className){let e=" "+BT(t)+" ";const s=" "+i+" ";for(;-1!==e.indexOf(s);)e=e.replace(s," ");RT(t,e.trim())}}function FT(t,i,e){void 0===e&&(e=!UT(t,i)),e?Nn(t,i):QT(t,i)}function YT(t){t.stopPropagation()}function GT(t,i){li.LE&&li.xE<3?function(t,i){let e=i;switch(i){case"flex":e="-webkit-flex";break;case"inline-flex":e="-webkit-inline-flex"}t.display=e}(t,i):function(t,i){if(t.display=i,t.display!==i){let e=i;switch(i){case"flex":e="-ms-flexbox";break;case"inline-flex":e="-ms-inline-flexbox"}t.display=e}}(t,i)}function WT(t,i){const e=i.style;if(e)for(const i of C.keys(t)){const s=t[i];void 0!==s&&(e[i]=s)}}function Du(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.top="0",i.bottom="0",i.width="100%",i.height="100%"}function VT(t){t.removeAttribute("title")}function HT(t){t.addEventListener("mouseover",(t=>{VT(t.target)}))}function qT(t){try{return Boolean(t)&&t===t.top}catch(t){return!1}}function Xs(t){try{return Boolean(t)&&t.parent!==t}catch(t){return!1}}function Vs(t){return"video"===function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}(t)}function XT(t){t.src&&(t.removeAttribute("src"),t.load())}function ZT(){return void 0!==c?c.createElement("video"):void 0}function KT(){return xT||(xT=ZT()),xT}r(),r();var JT,si,Ce=class{tC(t,i){try{return Promise.resolve(function(t,i){if(!Ce.hC())throw new _("Unsupported key system "+t);for(let e of i){let i=ie($T,Qp,t,e);if(i)return new zT(t,i)}throw new _("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static hC(){return Ln()}};function $T(t,i){const e=KT();return!(!e||!e.canPlayType||""===e.canPlayType(i,t))}function Ee(){return JT||(JT=function(){const t=[];ST.hC()&&t.push(new ST);AT.hC()&&t.push(new AT);yT.hC()&&t.push(new yT);Ce.hC()&&t.push(new Ce);return new LT(t)}()),JT}r(),r(),function(t){t[t.$C=0]="$C",t[t.tO=1]="tO"}(si||(si={})),r(),r();var tc=class extends d{constructor(t){super(Dt.fv),this.currentTime=t}};r();var Kr=class extends d{constructor(t){super(Dt._v),this.currentTime=t}},tN=[Dt._w,Dt._v,t.wh,t.bh],uu=class extends i{iO(t){!this.eO&&t>=he.Un&&(this.eO=!0,this.jo(new as(this.sO.I_,t)))}nO(t){!this.rO&&t>=he.Uv&&(this.rO=!0,this.jo(new js(this.sO.I_,t)))}hO(t){this.oO||(t>=he.Qv&&this.aO<he.Qv&&!this.sO.V_||this.uO&&t>=he.Qv)&&this.jo(new Kr(this.sO.I_))}cO(t){!this.lO(t)||this.sO.L_||this.sO.dt||this.jo(new tc(this.sO.I_))}dO(t){this.aO<=he.Uv&&t>=he.Qv&&this.jo(new E(this.sO.I_,t))}maybeDispatchCanPlayThroughEvent(t){t===he.Fv&&this.jo(new us(this.sO.I_,t))}lO(t){const i=!this.sO.V_&&t<=he.Uv,e=!this.fO&&this.aO<=he.Uv;return i&&!e}get uO(){return!this.sO.V_&&this.fO}Gn(){this.aO=he.Rv,this.fO=!0,this.rO=!1,this.eO=!1}ln(){this.Uo(),this.oO&&this.sO.hn(Dt._v,this._O),this.sO.hn(t.wh,this.gO),this.sO.hn(t.bh,this.wO),this.sO.hn(Dt._w,this.AO)}constructor(i,e=!1){super(),this.sO=i,this.oO=e,this.aO=he.Rv,this.fO=!0,this.rO=!1,this.eO=!1,this.AO=t=>{const i=this.sO.og;i!==this.aO&&this.jo(new Z(t.currentTime,i)),i===he.Rv&&(this.rO=!1,this.eO=!1),this.iO(i),this.nO(i),this.dO(i),this.maybeDispatchCanPlayThroughEvent(i),this.hO(i),this.cO(i),this.aO=i},this.gO=()=>{this.cO(this.aO),this.hO(this.aO),this.fO=this.sO.V_},this.wO=()=>{this.fO=this.sO.V_},this._O=t=>{this.jo(new Kr(t.currentTime))},this.sO.dn(Dt._w,this.AO),this.sO.dn(t.wh,this.gO),this.sO.dn(t.bh,this.wO),this.oO&&this.sO.dn(Dt._v,this._O)}},iN=class extends i{get I_(){return this.sO.I_}get L_(){return this.sO.L_}get dt(){return this.sO.dt}get V_(){return this.sO.V_}get og(){return this.sO.og}Hf(){this.Uo(),this.sO.hn(tN,this.Ds)}constructor(t){super(),this.sO=t,this.sO.dn(tN,this.Ds)}};r(),r();var eN="titanium",sN="conax",nN="ezdrm",rN="irdeto",Un="vudrm",hN="verimatrix",oN="keyos",aN="drmtoday",uN="expressplay",cN="azure",qn="xstream",lN="vimond",dN="axinom",fN="uplynk",_N="comcast",gN="custom";r(),r(),r();var Ue=class{vO(){return this.mO}pO(t){this.mO=t}get yO(){return this.LS}get MO(){return!1}get TO(){const t=this.DO.certificate;if(t)return ji(t)?Sn(t):no(t)}IO(){return this.DO.licenseAcquisitionURL||this.vO()}get SO(){return!1}EO(t){return Promise.resolve()}bO(t,i){return Promise.resolve(void 0)}get NS(){return Boolean(this.DO.useCredentials)}async LO(t,i,e,s){const n=this.kO(t,i,e,s);if(""===n.Iu)throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.yO.BI(n);return await t.xO(i)}catch(t){return Et(t),void await this.CO(t,n.Iu,s)}}kO(t,i,e,s){const n=this.OO().eS(),r=this.NS,h={Iu:this.jO(),pS:i,vS:n,AS:t,NS:r,mS:Vt.POST,YI:0,$f:s,$w:Qu.aS,MS:e};return new ai(h)}zO(t,i){return Promise.resolve(t)}PO(t,i,e,s){return Promise.resolve(t)}OO(){return new Sh(this.DO.headers||{})}async CO(t,i,e){throw new ae(ue.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}jO(t,i){let e=i;const s=this.DO.queryParameters;if(!e){const t=this.IO();if(!t)return"";e=t}if(s||t){const i=le.Ph(e);t&&wo(i,t),s&&wo(i,s),e=i.href}return e}BO(t,i){return wN(t)}RO(t){return new A(t)}async UO(t,i,e){const s=await this.BO(t,e),n=await this.LO(s,this.QO,i,e);return this.RO(n)}ln(){}constructor(t,i,e,s,n){this.mO=void 0,this.Ux=t,this.FO=i,this.YO=e,this.LS=s,this.QO=n,this.DO=this.GO(i)}};function wN(t){return Promise.resolve(nt(t).buffer)}var qs,cn=class extends Ue{GO(t){return t.widevine||{}}async WO(t,i){return this.TO?this.TO:this.VO(new A(t),i)}VO(t,i){return super.UO(t,is.dS,i)}constructor(t,i,e,s){super(zp,t,i,e,s)}};function AN(t,i){if(null==t)return{};var e,s,n={},r=C.keys(t);for(s=0;s<r.length;s++)e=r[s],i.indexOf(e)>=0||(n[e]=t[e]);return n}function vN(t){return oe(t.token&&t.deviceId)}function mN(t){var i;const e=null==(i=t.fairplay)?void 0:i.headers;return void 0!==e&&oe(e.PreAuthorization)}function pN(t){const i=t;return vN(i)&&""!==i.token&&""!==i.deviceId&&!mN(i)}r(),r(),r(),r(),r(),r(),function(t){t.HO=!1,t.qO=!1,t.XO=!1,t.ZO=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.KO=!1,t.JO=!1,t.LOG_LCEVC_DETAILS=!1}(qs||(qs={})),r();var yN,MN=class{get $O(){return this.tj}get Ux(){return this.Ox}ij(t){return function(t){const i=t.onCertificateRequest;if(void 0!==i&&"function"!=typeof i)throw new _("ContentProtectionIntegration.onCertificateRequest is not a function.");const e=t.onCertificateResponse;if(void 0!==e&&"function"!=typeof e)throw new _("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new _("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new _("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new _("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.ej.build(t))}constructor(t,i,e){this.tj=t,this.Ox=i,this.ej=e}};r(),function(t){t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED"}(yN||(yN={}));var vu=class{registerContentProtectionIntegration(t,i,e){switch(this.sj(t,i,e)){case yN.FAILED:throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+i+".");case yN.OVERRIDDEN:{const e=BN(i);le.Wv("Warning: Overwriting an earlier registered integration for "+t+" and "+e+".");break}case yN.SUCCEEDED:BN(i);0;break}}sj(t,i,e){const s=BN(i);if(!s)return yN.FAILED;let n=yN.SUCCEEDED;for(const i of this.nj.slice())i.$O===t&&i.Ux===s&&(n=yN.OVERRIDDEN,Hc(this.nj,i));return this.nj.push(new MN(t,s,e)),n}rj(t,i){return void 0!==this.hj(t,i)}aj(t,i,e){const s=this.hj(t,i);if(!s)throw k("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+i);return s.ij(e)}hj(t,i){for(const e of this.nj)if(e.$O===t&&(!i||e.Ux===i))return e}constructor(){this.nj=[]}};vu.uj=new vu;var TN={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function NN(t){if(!t)return!0;const i=t.licenseAcquisitionURL,e=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,h=t.queryParameters;return!(i||e||s||n||r||h)}function DN(t){return t&&void 0!==t.licenseAcquisitionURL}var iu,IN=DN,SN=DN;function EN(t){if(!t)return!0;if(kN(t))return!1;const i=t.fairplay,e=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return NN(i)&&NN(e)&&NN(s)&&void 0===n&&NN(r)}function bN(t){const i=pN(t),e=function(t){var i;const e=t;return mN(e)&&""!==(null==(i=e.fairplay)?void 0:i.headers.PreAuthorization)&&!vN(e)}(t);return(!i||!e)&&(i||e)}function LN(t){return t.integration===rN}function Be(t){const i=t;if(!i)return!1;if(EN(i))return!1;const e=i.fairplay,s=i.playready,n=i.widevine,r=i.clearkey;if(kN(t))return!0;if(e&&!function(t){const i=t;return i&&(void 0!==i.certificateURL||void 0!==i.certificate)}(e))return!1;if(s&&!IN(s))return!1;if(n&&!SN(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(i.integration){if(vu.uj.rj(i.integration))return!0;switch(i.integration){case eN:if(!function(t){const i=t,e=i.integration===eN;return e&&(xN(t)||CN(t))}(t))return!1;break;case Un:if(!ON(t))return!1;break;case hN:if(!function(t){const i=t;return i.integration===hN}(t))return!1;break;case rN:if(!LN(t))return!1;break;case sN:if(!bN(t))return!1;break;case nN:if(!function(t){const i=t;return i.integration===nN}(t))return!1;break;case oN:if(!kN(t))return!1;break;case aN:if(!function(t){const i=t;return i.integration===aN&&(void 0!==i.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(i))}(t))return!1;break;case uN:if(!function(t){const i=t;return i.integration===uN}(t))return!1;break;case qn:if(!jN(t))return!1;break;case lN:if(!function(t){return t.integration===lN}(t))return!1;break;case dN:if(!zN(t))return!1;break;case cN:if(!function(t){const i=t;return i.integration===cN&&void 0!==i.token}(t))return!1;break;case fN:if(!function(t){const i=t;return i.integration===fN}(t))return!1;break;case _N:if(!function(t){const i=t;return i&&oe(i.releasePid)&&oe(i.accountId)&&oe(i.token)}(t))return!1;break;case gN:return!0;default:return!1}}return!0}function kN(t){return t.integration===oN}function xN(t){return void 0!==t.authToken}function CN(t){const i=t;return void 0!==i.accountName&&void 0!==i.customerName&&void 0!==i.portalId}function ON(t){const i=t;return i.integration===Un&&void 0!==i.token}function jN(t){const i=t;return i&&i.integration===qn&&ji(i.ticketAcquisitionURL)&&ji(i.streamId)}function zN(t){const i=t;return i.integration===dN&&void 0!==i.token}function PN(t,i){const e=i[t];var s;const n=null!=(s=null==e?void 0:e.licenseAcquisitionURL)?s:TN[t];var r;const h=null!=(r=null==e?void 0:e.customdata)?r:i.customdata,o=h?{customData:h}:{};var a;const u=qr({},null!=(a=null==e?void 0:e.headers)?a:{},o),c=null!=e?e:{},{customdata:l}=c;return qr({},AN(c,["customdata"]),{licenseAcquisitionURL:n,headers:u})}function BN(t){switch(t.toLowerCase()){case"widevine":case Ct:return Ct;case"playready":case Ds:return Ds;case"fairplay":case ba:return ba}}function RN(t,i){switch(t){case Np:return function(t){const i={},e=Rs.kT(new DataView(t));for(const t of e)i[t.FD]=t.WD;return i}(i);case Dp:case _n:return function(t){return{[xp]:t}}(i);default:throw new Ri(ue.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}!function(t){t.xb="Widevine",t.cj="PlayreadyV2",t.lj="PlayreadyV3",t.kb="PlayreadyV2",t.Ob="Fairplay"}(iu||(iu={}));var UN={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function QN(t,i){var e,s,n,r;const h=UN[i],o=t.accountName;return{CustomerName:t.customerName,AccountName:o,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(e=le.dj)?void 0:e.Ks,OSVersion:null==(s=le.dj)?void 0:s._j,DRMProvider:h.DRMProvider,DRMVersion:h.DRMVersion,DRMType:h.DRMType,DeviceVendor:null==(n=le.dj)?void 0:n.gj,DeviceModel:null==(r=le.dj)?void 0:r.wj}}}function FN(t,i){if(!t.accountName)throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, accountName is not set.");if(!t.customerName)throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, customerName is not set.");if(!t.portalId)throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, portalId is not set.");throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration.")}function YN(t,i,e){let s;if(xN(t))s={AuthToken:t.authToken,Payload:i};else{if(!CN(t))throw FN(t,e);s={LatensRegistration:QN(t,e),Payload:i}}return ya(JSON.stringify(s))}async function GN(t,i,e){const s=t.UI;if(!s)throw new ae(ue.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,i);const n=s;let r,h;try{r=await n.Aj(e),h=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){h=""}throw new ae(ue.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.BI.Iu,n.FI,n.vj,h)}r();var WN=class extends cn{static mj(){return le.Ks.pj?"required":"optional"}CO(t,i,e){return GN(t,i,e)}EO(t){return this.yj?Oi(this.yj.sL,t):(this.yj=new $s,Promise.resolve())}async BO(t,i){const e=this.FO;if(!e)throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return YN(e,Nt(t),iu.xb)}RO(t){let i;if(!t.license)throw new ae(ue.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return i=Sn(t.license),i}Mj(t){return Promise.resolve(new A(t))}async WO(t,i){this.Tj();const e=await this.BO(t,i),s=await this.LO(e,$m.$I,is.fS,i);return await this.Mj(s)}async VO(t,i){const e=await super.VO(t,i);return this.Tj(),e}Tj(){this.yj||(this.yj=new $s),this.yj.iL()}ln(){this.yj&&this.yj.i_(),super.ln()}constructor(t,i,e){super(t,i,e,$m.tS),this.yj=void 0}};r();var VN=class extends cn{get Nj(){if(ON(this.FO))return this.FO.token}async BO(t,i){const e=await wN(t),s=this.YO,n=GA(new A(e)),r=this.Nj;if(!r)throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:s})}constructor(t,i,e){super(t,i,e,$m.$I),this.pO("https://widevine-proxy.drm.technology/proxy")}};function HN(t,i){let e=i||{};return t.ticket&&t.sessionId&&(e=qr({},e,{SessionId:t.sessionId,Ticket:t.ticket})),qr({},e,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}r(),r();var qN=class extends cn{jO(t,i){let e=t;return LN(this.FO)&&(e=HN(this.FO,e)),super.jO(e,i)}constructor(t,i,e){super(t,i,e,$m.$I),this.pO("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}};r(),r();var XN="Conax-Custom-Data";function Ie(t,i,e){const s=t&&bN(t)&&t;if(s&&!e.has(XN)){const t=pN(s)?s.token:void 0,n=pN(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:i+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});e.set(XN,r)}return e}var ZN=class extends cn{OO(){const t=super.OO();return Ie(this.FO,"Widevine",t)}constructor(t,i,e){super(t,i,e,$m.$I),this.pO("https://connect.conax.com:8094/license")}};function KN(t){const i=ys(new A(t));return Sn(JSON.parse(i).license)}function Ve(t){return"string"==typeof t.token?t.token:ya(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function sn(t,i,e){let s;return s=e.token?"x-dt-auth-token":"dt-custom-data",t.set(s,i),t}r(),r();var JN=class extends cn{get Nj(){return Ve(this.FO)}RO(t){return KN(t)}OO(){return sn(super.OO(),this.Nj,this.FO)}constructor(t,i,e){super(t,i,e,$m.$I),this.pO("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}};r();var $N=class extends cn{OO(){const t=super.OO(),i=this.FO.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e){super(t,i,e,$m.$I)}};async function tD(t,i,e,s){if(!jN(t))throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new Sh;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const h=t.streamId;let o;o=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:i,licenseType:o,streamId:h},u={Iu:t.ticketAcquisitionURL,pS:$m.tS,vS:n,mS:Vt.POST,AS:JSON.stringify(a),$f:s},c=await e.BI(u);return await c.Aj()}r(),r();var iD=class extends cn{OO(){const t=super.OO();return t.set("Content-Type","application/json"),t}async BO(t,i){const e=tA(t.buffer),s=this.FO,n=await tD(s,"widevine_modular",this.yO,i);this.pO(n.licenseServerUrl);const r=Es(JSON.stringify({payload:e,ticket:n.ticket}));return super.BO(r,i)}RO(t){return Sn(t.license)}constructor(t,i,e){super(t,i,e,$m.tS)}};r();var eD=class extends cn{OO(){if(!zN(this.FO))throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.OO();return t.set("X-AxDRM-Message",this.FO.token),t}constructor(t,i,e){super(t,i,e,$m.$I)}};function sD(t){const i=new A(2*t.length);for(let e=0;e<t.length;e+=1)i[2*e]=t.charCodeAt(e),i[2*e+1]=0;return i}r();var we=class extends Ue{GO(t){return t.playready||{}}OO(){const t=new Sh(this.Dj);return t.nS(super.OO()),t}Ij(t){return t.length>=1&&t[0].bI.length>0}bO(t){const i=this.FO.playready.customData;if(i){const t=sD(i),e=sD('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+Nt(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{dC:e}})}return super.bO(t)}async BO(t,i){const e=await wN(t);return this.Sj(e)}async Sj(t){var i,e;let s=null;const n=pa(new DataView(t),new Eo,!0);let r;try{r=le.DI(n)}catch(t){return s}const h=null==(i=r.MI("PlayReadyKeyMessage")[0])?void 0:i.MI("LicenseAcquisition")[0];var o;const a=null!=(o=null==h?void 0:h.MI("Challenge"))?o:[];this.Ij(a)&&(s=ga(a[0].Ej));const u=new Sh;var c;const l=null!=(c=null==(e=null==h?void 0:h.MI("HttpHeaders")[0])?void 0:e.MI("HttpHeader"))?c:[];for(const t of l){const i=t.MI("name")[0].Ej,e=t.MI("value")[0].Ej;u.append(i,e)}return this.Dj=u,s}WO(t,i){return Promise.resolve(t)}VO(t,i){return super.UO(t,is._S,i)}constructor(t,i,e){super(En,t,i,e,$m.$I),this.Dj=void 0}};r(),r();var nD=class t{static bj(t){return"3"===t.version?iu.lj:iu.cj}Lj(){const t={};if(this.tx===iu.lj){const i={LatensRegistration:QN(this.xj,iu.lj)};t["X-TITANIUM-DRM-CDATA"]=ya(JSON.stringify(i))}return t}get Cj(){return this.tx}get rC(){return this.tx===iu.cj}constructor(i){this.xj=i,this.tx=t.bj(i)}};var rD=class extends we{bO(t){const i=this.FO;if(!this.FO)throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(CN(i)){const t={};return t.playready={dC:hD(i,this.Oj.Cj)},Promise.resolve(t)}return Promise.reject(FN(i,iu.kb))}OO(){const t=new Sh(this.Oj.Lj());return t.nS(super.OO()),t}async CO(t,i,e){const s=t.UI;if(!s)throw new ae(ue.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i);let n,r;try{const t=await s.jj(e),i=ys(new A(t)),o=le.DI(i);if(o){const t=function(t,i){return function(t,i){const e=t.k.slice(),s=[];for(;e.length>0;){const t=e.shift();i(t)?s.push(t):e.push(...t.k)}return s}(t,(t=>t.zj===i))}(o,"CustomData");var h;if(t.length>0)n=JSON.parse(t[0].Ej),r=null==(h=n.DrmErr)?void 0:h.desc}}catch(t){}throw new ae(ue.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i,s.FI,s.vj,r)}Ij(t){if(1!==t.length)throw new ae(ue.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,i,e){super(t,i,e),this.Oj=new nD(this.FO)}};function hD(t,i){const e=QN(t,i),s=e.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+ya('<LatensRegistration formatversion="'+s+'"><AccountName>'+e.AccountName+"</AccountName><CustomerName>"+e.CustomerName+"</CustomerName><PortalID>"+e.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+e.DeviceInfo.DeviceType+"</DeviceType><OSType>"+e.DeviceInfo.OSType+"</OSType><OSVersion>"+e.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+e.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+e.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+e.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+e.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+e.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=RA(n,!0);return RA('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+Nt(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}r();var oD=class extends we{get Nj(){if(ON(this.FO))return this.FO.token}Ij(t){if(1!==t.length)throw new ae(ue.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}jO(t,i){const e=qr({},t||{},{token:this.Nj});return super.jO(e,i)}constructor(t,i,e){super(t,i,e),this.pO("https://playready-license.drm.technology/rightsmanager.asmx")}};r();var aD=class extends we{jO(t,i){let e=t;return LN(this.FO)&&(e=HN(this.FO,e)),super.jO(e,i)}constructor(t,i,e){super(t,i,e),this.pO("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}};r();var uD=class extends we{OO(){const t=super.OO();return Ie(this.FO,"PlayReady",t)}constructor(t,i,e){super(t,i,e),this.pO("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}};r();var cD,lD=class extends we{get Nj(){return Ve(this.FO)}RO(t){const i=function(t){const i=ys(new A(t));return Lt(i,"<?xml")?0:1}(t);return 1===i?KN(t):super.RO(new A(t))}OO(){return sn(super.OO(),this.Nj,this.FO)}constructor(t,i,e){super(t,i,e),this.pO("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};!function(t){t[t.Pj=0]="Pj",t[t.Aj=1]="Aj"}(cD||(cD={})),r();var dD=class extends we{OO(){const t=super.OO();return this.Bj&&t.set("Ticket",this.Bj),t.set("Content-Type","text/xml"),t}async BO(t,i){const e=this.FO,s=await tD(e,"playready",this.yO,i);return this.pO(s.licenseServerUrl),this.Bj=s.ticket,super.BO(t,i)}constructor(t,i,e){super(t,i,e)}};r();var Zi,fD=class extends we{OO(){if(!zN(this.FO))throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.OO();return t.set("X-AxDRM-Message",this.FO.token),t}};r(),r(),function(t){t.tS="application/json",t.Rj="application/x-www-form-urlencoded",t.Uj="application/octet-stream",t.Au="text/plain;charset=UTF-8"}(Zi||(Zi={}));var Nu=class extends Ue{get SO(){return!0}Qj(){return this.DO.certificateURL||this.Fj}Yj(t){this.Fj=t}BO(t){return Promise.resolve(this.Gj(t,this.Wj))}Gj(t,i){return"spc="+encodeURIComponent(Nt(t))+"&assetId="+encodeURIComponent(i)}get Vj(){return Zi.Rj}GO(t){return t.fairplay||{}}Hj(t){const i=t.indexOf("?");if(i>=0)return Promise.resolve(t.substr(i+1));{const i=t.split("skd://").pop();if(i){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(i))return Promise.resolve(i)}const e=t.split("/");return Promise.resolve(e[e.length-1])}}async bO(t){var i;const e=null!=(i=this.qj)?i:zc(new A(t)),s=await this.Hj(e);this.Wj=s;const n={};return n.fairplay={yC:s},n}OO(){const t=super.OO();return t.set("Content-Type",this.Vj),t}async WO(t,i){return this.TO?this.TO:await this.Xj(i)}VO(t,i){return super.UO(t,is.cS,i)}Zj(t){const i=this.Qj(),e=this.OO(),s={Iu:i,pS:$m.$I,vS:e,mS:Vt.GET,NS:!1,AS:null,YI:0,$f:t,$w:Qu.aS,MS:is.lS};return new ai(s)}async Xj(t){const i=this.Zj(t),e=await this.yO.BI(i),s=await e.jj();return new A(s)}RO(t){let i;if("string"==typeof t){let e=t.trim();"<ckc>"===e.substr(0,5)&&"</ckc>"===e.substr(-6)&&(e=e.slice(5,-6)),i=Sn(e)}else i=new A(t);return i}jO(t,i){let e=super.jO(t,i);return Lt(e,"skd:")&&(e=e.substr(4)),e}constructor(t,i,e,s,n){super(t.Ux,i,e,s,n),this.Wj="",this.Fj=void 0,this.qj=t.Kj}};function _D(t){return!M(t.getTime())}function Nr(){return Date.now()||(new Date).getTime()}function gD(t){return t/1e3}function ee(t){return 1e3*t}r(),r();var Vu=1/6,wD=Gt.fromNumber(S_);function Qt(t,i){if(0===i)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(wD))return t.toNumber()/i;const e=t.divide(i),s=t.subtract(e.multiply(i));return e.toNumber()+s.toNumber()/i}var AD=class extends Nu{get Vj(){return Zi.Uj}Hj(t){let i=t.split("://",1);return"skd"!==i[0].slice(-3).toLowerCase()?Promise.resolve(""):(i=t.split(";",2),i.length>1?Promise.resolve(i[1]):Promise.resolve(super.Hj(t)))}async BO(t){return t}RO(t){return new A(t)}jO(t,i){const e=t||{};return e.p1=Nr(),super.jO(e,i)}constructor(t,i,e,s){super(t,i,e,s,$m.$I)}};r();var vD=class extends Nu{get Vj(){return Zi.tS}get Nj(){if(!ON(this.FO))throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.FO.token}Gj(t,i){const e={token:this.Nj,contentId:i,payload:Nt(t)};return JSON.stringify(e)}RO(t){return new A(t)}OO(){const t=super.OO();return t.set("x-vudrm-token",this.Nj),t}constructor(t,i,e,s){super(t,i,e,s,$m.$I),this.pO("https://fairplay-license.drm.technology/license"),this.Yj("https://fairplay-license.drm.technology/certificate")}};r();var mD="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",pD="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",yD=class extends Nu{RO(t){const i=function(t){let i;try{i=JSON.parse(t).ckc}catch(t){throw new ae(ue.CONTENT_PROTECTION_LICENSE_INVALID,mD)}if(!i)throw new ae(ue.CONTENT_PROTECTION_LICENSE_ERROR,pD);return i}(ys(new DataView(t)));return super.RO(i)}constructor(t,i,e,s){super(t,i,e,s,$m.$I)}};r();var MD=class extends Nu{get Vj(){return Zi.tS}async BO(t){const i=this.FO;if(!i)throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return YN(i,Nt(t),iu.Ob)}RO(t){try{let i;if(ji(t)){const e=t.trim();i=JSON.parse(e)}else i=t;if(i.license){const t=ga(i.license);return new A(t)}throw new ae(ue.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new ae(ue.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}CO(t,i,e){return GN(t,i,e)}constructor(t,i,e,s){super(t,i,e,s,$m.tS)}};r();var TD=class extends Nu{Qj(){const t=super.Qj();if(!t)return t;const i=le.Ph(t),e=this.FO;return LN(e)&&wo(i,{accountId:e.accountId,applicationId:e.applicationId||""}),i.href}Hj(t){return LN(this.FO)?Promise.resolve(this.FO.contentId):super.Hj(t)}async BO(t){return t}RO(t){return new A(t)}get Vj(){return Zi.Uj}jO(t,i){let e=t;return LN(this.FO)&&(e=function(t,i){return qr({},HN(t,i),{KeyId:t.keyId})}(this.FO,e)),super.jO(e,i)}constructor(t,i,e,s){super(t,i,e,s,$m.$I),this.pO("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.Yj("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}};r();var ND=class extends Nu{OO(){const t=super.OO();return Ie(this.FO,"FairPlay",t)}async Xj(t){const i={Iu:this.Qj(),pS:$m.$I,vS:{},mS:Vt.GET,NS:!1,AS:null,YI:0,$f:t,$w:Qu.aS,MS:is.lS},e=await this.yO.BI(i),s=await e.jj();return new A(s)}async BO(t){return t}Hj(t){const i=t.indexOf("?");if(0===t.indexOf("skd://")){let e;return e=i>=0?t.substring(6,i):t.substring(6),Promise.resolve(function(t){return ys(Sn(t))}(e))}return Promise.resolve("unknown")}RO(t){try{const i=JSON.parse(t);return new A(ga(i.CkcMessage))}catch(t){throw new k("CFLRW-66")}}constructor(t,i,e,s){if(super(t,i,e,s,$m.Au),!bN(i))throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.pO("https://connect.conax.com:8097/license")}};r();var DD=class extends Nu{Hj(t){return Lt(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new ae(ue.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}Gj(t,i){return"spc="+Nt(t)+"&assetId="+i}constructor(t,i,e,s){super(t,i,e,s,$m.Au),this.pO(TN[I.Ob])}};r();var ID=class extends Nu{get Nj(){return Ve(this.FO)}Gj(t,i){const e="spc="+encodeURIComponent(Nt(t))+"&"+encodeURI(i);return"persistent"===this.DO.licenseType?e+"&offline=true":e}OO(){return sn(super.OO(),this.Nj,this.FO)}constructor(t,i,e,s){super(t,i,e,s,$m.Au),this.pO("https://lic.drmtoday.com/license-server-fairplay/")}};r();var SD=class extends Nu{Hj(t){let i=t;return Lt(i,"skd:")&&(i="http:"+i.substring(4)),Lt(i,"http:")||Lt(i,"https:")?Promise.resolve(le.Ph(i).hostname):Promise.reject(new k("Could not parse ExpressPlay FairPlay content ID."))}async BO(t){return t}RO(t){return new A(t)}get Vj(){return Zi.Uj}constructor(t,i,e,s){super(t,i,e,s,$m.$I)}};r();var ED=class extends Nu{OO(){const t=super.OO(),i=this.FO.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e,s){super(t,i,e,s,$m.Au)}};r();var bD=class extends Nu{async Xj(t){const i=this.Qj(),e=this.OO(),s={Iu:i,pS:$m.tS,vS:e,mS:Vt.POST,$f:t,$w:Qu.aS,MS:is.lS},n=await this.yO.BI(s),r=await n.Aj();return new A(Sn(r.certificate))}get Vj(){return Zi.tS}async VO(t,i,e){void 0===e&&(e=$m.Au);const s=Nt(t),n=this.FO,r=await tD(n,"fairplay",this.yO,i),h=Es(JSON.stringify({spc:s,ticket:r.ticket})),o={Iu:this.IO(),pS:$m.tS,vS:this.OO(),mS:Vt.POST,AS:h,YI:0,$f:i,$w:Qu.aS,MS:is.cS},a=await this.yO.BI(o);return Sn((await a.Aj()).licence)}constructor(t,i,e,s){if(super(t,i,e,s,$m.tS),!jN(i))throw new k("Invalid Xstream DRM configuration")}};r();var LD=class extends Nu{Gj(t,i){return Nt(t)}RO(t){if(0===t.length)throw new ae(ue.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.RO(t)}OO(){const t=super.OO();return t.set("Content-Type","text/plain"),t}constructor(t,i,e,s){super(t,i,e,s,$m.Au)}};r();var kD=class extends Nu{get Vj(){return Zi.tS}Gj(t,i){return t}RO(t){return new A(t)}OO(){if(!zN(this.FO))throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.OO();return t.set("X-AxDRM-Message",this.FO.token),t}constructor(t,i,e,s){super(t,i,e,s,$m.$I)}};r();var xD=class extends Nu{get Vj(){return Zi.Au}Gj(t,i){const e={spc:Nt(t)};return JSON.stringify(e)}Hj(t){const i=le.Ph(t);return this.Jj=t,i.searchParams.has("b")?Promise.resolve(i.searchParams.get("b")):Promise.reject(new ae(ue.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}jO(t,i){let e=this.IO();return!e&&this.Jj&&(e=this.Jj),e&&(e=e.replace("skd://","https://")),super.jO(t,i||e)}RO(t){try{let i;if(i=ji(t)?JSON.parse(t.trim()):t,i.ckc)return Sn(i.ckc)}catch(t){throw new ae(ue.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new ae(ue.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,i,e,s){super(t,i,e,s,$m.tS),this.Jj=void 0}};r(),r(),r();var nr=class{$j(t){return this.tz(t)}iz(t,i){throw new _(i+" must be "+this.ez+". (Received: "+t+")")}constructor(t,i){this.tz=t,this.ez=i}},Fr=(new nr((function(t){return!0}),"any"),new nr(I_,"a number")),Ni=new nr(ji,"a string"),CD=new nr(N_,"a boolean"),$e=(new nr(D_,"a date"),new nr(Go,"undefined")),OD=new nr(Uo,"an object"),jD=new nr((function(t){return null===t}),"null");new nr((function(t){return null==t}),"null or undefined");function zD(t,i){throw new _(i+" has an incorrect type")}function Ze(t){return{$j(i){if(!Uo(i))return!1;for(const e of C.keys(t)){if(!t[e].$j(i[e]))return!1}return!0},iz(i,e){if(!Uo(i))throw new _(e+" must be an object.");for(const s of C.keys(t)){const n=t[s];if(!n.$j(i[s]))return n.iz(i[s],e+"."+String(s))}throw new _}}}function PD(t){return C.keys(t).map((i=>t[i]))}function St(t){return{$j:i=>ks(t,i),iz:zD}}function rl(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return{$j:t=>i.some((i=>i.$j(t))),iz:zD}}function di(t){return{$j:i=>Gr(i)&&i.every((i=>t.$j(i))),iz(i,e){if(!Gr(i))throw new _(e+" must be an array.");return i.forEach(((i,s)=>{if(!t.$j(i))return t.iz(i,e+"["+s+"]")})),zD(0,e)}}}function ir(t){return{$j:i=>Uo(i)&&C.keys(i).every((e=>t.$j(i[e]))),iz(i,e){if(!Uo(i))throw new _(e+" must be an object.");for(const s of C.keys(i))if(!t.$j(i[s]))return t.iz(i[s],e+"."+s);return zD(0,e)}}}var BD=Ze({responseCode:Fr,isException:CD,description:Ni,title:Ni,correlationId:Ni});async function RD(t,i,e,s,n){const r=function(t,i,e,s){const n={token:i.token,account:i.accountId,form:"json"},r=decodeURIComponent(sa(e,n)),h=new Sh({});h.append("Content-Type","application/json");const o=Nt(t),a={getFairplayLicense:{releasePid:i.releasePid,spcMessage:o}};return{Iu:r,pS:$m.Au,vS:h,mS:Vt.POST,AS:JSON.stringify(a),$f:s,$w:Qu.aS,MS:is.cS}}(t,i,e,n);return await async function(t,i){const e=await i.BI(t),s=await e.Aj();if(BD.$j(s))throw new ae(ue.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.Iu,s.responseCode);return Sn(s.getFairplayLicenseResponse.ckcResponse)}(r,s)}var UD=class extends Nu{Hj(t){const i=t.replace("FairPlay",this.sz.releasePid);return super.Hj(i)}async VO(t,i){return await RD(t,this.sz,this.IO(),this.yO,i)}constructor(t,i,e,s){super(t,i,e,s,$m.$I),this.sz=i}};r();var QD=class extends Ue{GO(t){return t.clearkey||{}}async LO(t,i,e,s){const n=this.DO;if(this.IO())return super.LO(t,this.QO,e,s);if(n.keys&&n.keys.length){const t={keys:n.keys.map((t=>{let i=t;return i||(i={}),{kty:"oct",kid:i.id,k:i.value}}))};return Es(JSON.stringify(t)).buffer}throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}WO(t,i){return Promise.resolve(new A(0))}VO(t,i){return super.UO(t,is.gS,i)}constructor(t,i,e){super(Bp,t,i,e,$m.$I)}};r();var FD=class extends cn{};r(),r();var YD={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function GD(t,i,e){const s=qD(i),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(i);const r=await Oi(Promise.resolve(n.call(t,s)),e);return YA(r)?no(r):HD(qr({},YD,r))}async function WD(t,i,e,s,n){const r=t.onCertificateResponse,h=VD(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);return no(await Oi(Promise.resolve(r.call(t,h)),n))}async function tn(t,i,e,s){const n=await async function(t,i,e,s){const n=null==t?void 0:t.onLicenseRequest,r=hn(i,e);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const h=await Oi(Promise.resolve(n.call(t,r)),s);if(YA(h))return no(h).buffer;return qr({fairplaySkdUrl:void 0},YD,h)}(t,i,e,s);return n instanceof ArrayBuffer?n:HD(n)}async function on(t,i,e,s,n,r){const h=hn(e,n),o=await async function(t,i,e,s,n){const r=null==t?void 0:t.onLicenseResponse,h=VD(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);0;const o=await Oi(Promise.resolve(r.call(t,h)),n);return no(o)}(t,new A(i),h,s,r);return no(o)}function hn(t,i){return qr({},qD(t),{fairplaySkdUrl:i})}function VD(t,i,e){return{url:e.xS,status:e.FI,statusText:e.vj,headers:e.vS.eS(),body:t,request:i}}function HD(t){return new ai({Iu:t.url,mS:t.method,vS:t.headers,AS:t.body,NS:t.useCredentials})}function qD(t){var i;return{url:t.Iu,body:null!=(i=XD(t.AS))?i:null,headers:t.vS.eS(),method:t.mS,useCredentials:t.NS}}function XD(t){if(t)return"string"==typeof t?QA(t):t instanceof ArrayBuffer?new A(t):wa(t)?it(t):void 0}var ZD=class extends we{WO(t,i){return Promise.resolve(t)}async VO(t,i){const e=await this.Sj(nt(t).buffer),s=this.kO(e,$m.$I,is._S,i),n=await tn(this.nz,s,void 0,i);if(n instanceof ArrayBuffer)return new A(n);if(""===n.Iu)throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.yO.BI(n),e=await t.jj(i);return await on(this.nz,e,s,t,void 0,i)}catch(t){throw Et(t),new ae(ue.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,i,e,s){super(t,i,e),this.nz=s}};r();var KD=class extends FD{async WO(t,i){if(this.TO)return this.TO;const e=this.kO(t,$m.$I,is.fS,i),s=await GD(this.nz,e,i);if(s instanceof A)return s;if(""===s.Iu)throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this.yO.BI(s),r=await n.jj(i)}catch(t){throw Et(t),new ae(ue.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const h=hn(e,void 0);return await WD(this.nz,new A(r),h,n,i)}async VO(t,i){const e=this.kO(t,$m.$I,is.dS,i),s=await tn(this.nz,e,void 0,i);if(s instanceof ArrayBuffer)return new A(s);if(""===s.Iu)throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.yO.BI(s),n=await t.jj(i);return await on(this.nz,n,e,t,void 0,i)}catch(t){throw Et(t),new ae(ue.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,i,e,s){super(t,i,e,$m.$I),this.nz=s}};r();var JD=class extends Nu{async WO(t,i){if(this.TO)return this.TO;const e=this.Zj(i),s=await GD(this.nz,e,i);if(wa(s))return s;try{const t=await this.yO.BI(s),n=await t.jj(),r=hn(e,void 0);return await WD(this.nz,new A(n),r,t,i)}catch(t){throw Et(t),new ae(ue.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async VO(t,i){const e=this.kO(t,$m.$I,is.cS,i),s=await tn(this.nz,e,this.rz,i);if(s instanceof ArrayBuffer)return new A(s);if(""===s.Iu)throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.yO.BI(s),n=await t.jj(i);return await on(this.nz,n,e,t,this.rz,i)}catch(t){throw Et(t),new ae(ue.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}Hj(t){var i;return this.rz=t,(null==(i=this.nz)?void 0:i.extractFairplayContentId)?Promise.resolve(this.nz.extractFairplayContentId(t)):super.Hj(t)}constructor(t,i,e,s,n){super(t,i,e,s,$m.$I),this.nz=n}},Oe=class{oz(t,i,e,s){switch(t.Ux.$w){case I.xb:return this.cz(i,e,s);case I.kb:return this.lz(i,e,s);case I.Ob:return this.fz(t,i,e,s);case I.Cb:default:return this._z(i,e,s)}}cz(t,i,e){const s=function(t){return t.integration===gN&&ji(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&vu.uj.rj(s,Ct)){const n=vu.uj.aj(s,Ct,t);return new KD(t,i,e,n)}switch(s){case eN:return new WN(t,i,e);case Un:return new VN(t,i,e);case rN:return new qN(t,i,e);case sN:return new ZN(t,i,e);case aN:return new JN(t,i,e);case cN:return new $N(t,i,e);case qn:return new iD(t,i,e);case dN:return new eD(t,i,e);default:return new FD(t,i,e,$m.$I)}}lz(t,i,e){const s=t.integration;if(s&&vu.uj.rj(s,Ds)){const n=vu.uj.aj(s,Ds,t);return new ZD(t,i,e,n)}switch(s){case eN:return new rD(t,i,e);case Un:return new oD(t,i,e);case rN:return new aD(t,i,e);case sN:return new uD(t,i,e);case aN:return new lD(t,i,e);case qn:return new dD(t,i,e);case dN:return new fD(t,i,e);default:return new we(t,i,e)}}fz(t,i,e,s){const n=i.integration;if(n&&vu.uj.rj(n,ba)){const r=vu.uj.aj(n,ba,i);return new JD(t,i,e,s,r)}switch(n){case nN:return new AD(t,i,e,s);case Un:return new vD(t,i,e,s);case hN:return new yD(t,i,e,s);case eN:return new MD(t,i,e,s);case rN:return new TD(t,i,e,s);case sN:return new ND(t,i,e,s);case oN:return new DD(t,i,e,s);case aN:return new ID(t,i,e,s);case uN:return new SD(t,i,e,s);case cN:return new ED(t,i,e,s);case qn:return new bD(t,i,e,s);case lN:return new LD(t,i,e,s);case dN:return new kD(t,i,e,s);case fN:return new xD(t,i,e,s);case _N:return new UD(t,i,e,s);default:return new Nu(t,i,e,s,$m.Au)}}_z(t,i,e){return new QD(t,i,e)}gz(t){return t.$w===I.kb||t.$w===I.xb||t.$w===I.Ob||t.$w===I.Cb}rC(t,i){var e;if(t.$w!==I.kb)return!1;if(oe(null==(e=i.playready)?void 0:e.customData))return!0;const s=i.integration;return(!s||!vu.uj.rj(s,ba))&&(s===eN&&new nD(i).rC)}mj(t,i){if(t.$w!==I.xb)return;const e=i.integration;return e&&vu.uj.rj(e,ba)?void 0:e===eN?WN.mj():void 0}};r(),r(),r(),r();var Rt,$D="default",tI="theoplayer-stored-network-info-v2",iI=25e5,Ho=class{wz(t){var i;const e=null==(i=le.Az)?void 0:i.Kb(t);if(void 0===e)return;const s=JSON.parse(e);if(void 0!==s&&void 0!==s[this.vz]){if(!this.mz(s))return s[this.vz].availableBandwidth;var n;null==(n=le.Az)||n.pz(t,JSON.stringify({}))}}yz(){const t=this.wz(tI);if(void 0!==t)return t;const i=this.wz("theoplayer-stored-network-info");return i?8*i:void 0}mz(t){const i=t[this.vz].storedTimestamp;return!!i&&Nr()-i>36e5}Mz(t){this.Tz=t,this.Nz()}Dz(){var t;return null!=this.Tz||(this.Tz=null!=(t=this.yz())?t:iI),this.Tz}constructor(){this.vz=$D,this.Tz=void 0,this.Nz=Xi((()=>{var t;const i={[this.vz]:{availableBandwidth:this.Tz,storedTimestamp:Nr()}};null==(t=le.Az)||t.pz(tI,JSON.stringify(i))}),1e4)}};Ho.Lb=new Ho,r(),function(t){t[t.Iz=0]="Iz",t[t.Sz=1]="Sz",t[t.Ez=2]="Ez",t[t.bz=3]="bz",t[t.Lz=4]="Lz",t[t.Lv=5]="Lv",t[t.kz=6]="kz",t[t.xz=7]="xz",t[t.Bv=8]="Bv",t[t.Cz=9]="Cz",t[t.Oz=10]="Oz"}(Rt||(Rt={})),r();var eI=class{get jz(){return 0}get zz(){return 0}Pz(t){}};r();var sI=class{Bz(t){this.xj=t}mj(t){const i=this.xj;if(void 0!==i)return this.Rz.mj(t,i)}rC(t){const i=this.xj;return void 0!==i&&this.Rz.rC(t,i)}Uz(t){const i={Ux:t.Ux,Qz:t.Qz||[],Fz:t.Fz,Kj:t.Kj},e=this.Rz.oz(i,this.xj||{},t.YO,this.LS);return i.Fz&&e.pO(i.Fz),new nI(e)}constructor(t,i=new Oe){this.xj=void 0,this.LS=t,this.Rz=i}},nI=class{EO(t){return this.Yz.EO(t)}bO(t,i,e){return this.Yz.bO(i,e)}SO(){return this.Yz.SO||void 0!==this.Yz.TO}WO(t,i){return this.Yz.WO(t,i)}VO(t,i,e){return i&&this.Yz.pO(i),this.Yz.VO(t,e)}Hf(){this.Yz.ln()}constructor(t){this.Yz=t}};r();var Fe=class extends Yi{Gz(t){this.Wz.push(t);for(const i of t.Nw)this.it(i);this.Vz(t)}qz(t){Hc(this.Wz,t),this.Xz(t);for(const i of t.Nw)this.Zz(i)||this.st(i)}Zz(t){for(const i of this.Wz)if(i.Sw(t))return!0;return!1}Vz(t){t.dn(Po.qg,this.Kz),t.dn(Po.Zg,this.Jz)}Xz(t){t.hn(Po.qg,this.Kz),t.hn(Po.Zg,this.Jz)}ln(){for(;this.Wz.length>0;)this.qz(this.Wz[0]);super.ln()}Qh(){return uo(this)}constructor(t){super(),this.Wz=[],this.Kz=t=>{this.it(t.Ht)},this.Jz=t=>{const i=t.Ht;this.Zz(i)||this.st(i)};for(const i of t)this.Gz(i)}};function rI(t){return{get enabled(){return t.Ot},set enabled(i){t.Ot=Uc(i)},get currentLatency(){return t.pv},get streamConfiguration(){if(void 0!==t.$z)return function(t){return{get minimumOffset(){return t.iA},get maximumOffset(){return t.sA},get targetOffset(){return t.eA},get forceSeekOffset(){return t.nA},get minimumPlaybackRate(){return t.rA},get maximumPlaybackRate(){return t.hA}}}(t.$z)},get configuration(){return function(t){return{get minimumOffset(){return t.iA},set minimumOffset(i){t.iA=ka(i)},get maximumOffset(){return t.sA},set maximumOffset(i){t.sA=ka(i)},get targetOffset(){return t.eA},set targetOffset(i){t.eA=ka(i)},get forceSeekOffset(){return t.nA},set forceSeekOffset(i){t.nA=ka(i)},get minimumPlaybackRate(){return t.rA},set minimumPlaybackRate(i){t.rA=ka(i)},get maximumPlaybackRate(){return t.hA},set maximumPlaybackRate(i){t.hA=ka(i)},update(i){t.Hn(function(t){const i={};void 0!==t.minimumOffset&&(i.iA=ka(t.minimumOffset));void 0!==t.maximumOffset&&(i.sA=ka(t.maximumOffset));void 0!==t.targetOffset&&(i.eA=ka(t.targetOffset));void 0!==t.forceSeekOffset&&(i.nA=ka(t.forceSeekOffset));void 0!==t.minimumPlaybackRate&&(i.rA=ka(t.minimumPlaybackRate));void 0!==t.maximumPlaybackRate&&(i.hA=ka(t.maximumPlaybackRate));return i}(i))}}}(t.dd)}}}r(),r();var hI,hu=class{get so(){return null!=this.Oa||(this.Oa=rI(this)),this.Oa}get Ot(){return!1}set Ot(t){}get pv(){}get $z(){}get dd(){return this.tP}constructor(){this.tP={nA:0,sA:0,hA:0,iA:0,rA:0,eA:0,Hn:h}}};function oI(){return hI||(hI=J&&J.document&&J.document.createElement("video")),hI}var aI=!(!J||!J.TextTrack),uI=class extends ${get iP(){const t=this.eP.p_,i=this.I_;return t.ur(i,.01)}get ot(){return this.qv}get p_(){return this.eP.p_.ks()}get M_(){return this.eP.M_}set M_(t){t&&this.eP.sP(t)}get I_(){return void 0!==this.nP?this.nP:this.eP.I_}set I_(t){this.P_&&(this.nP=t),this.eP.Em(t)}get lt(){return this.eP.lt}get L_(){return this.eP.L_}get dt(){return this.rP}get C_(){return this.hP}get j_(){}get P_(){return this.eP.P_}get R_(){return qr({},{Jv:0,$v:0,tm:0,im:0,nm:0,hm:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.eP.U_())}get Q_(){return this.eP.Q_}set Q_(t){this.eP.Q_=t}get G_(){return!0}get V_(){return this.eP.V_}get q_(){return this.eP.q_}set q_(t){this.eP.q_=t}get K_(){return this.eP.oP.played}get eg(){return this.aP}set eg(t){this.aP=t,this.uP&&(this.uP.eg=t)}get og(){return this.eP.og}get cg(){return this.eP.cg.ks()}get fg(){return this.eP.fg}get cP(){return this.eP.cP}get rt(){return this.Tl}get ht(){return this.Zv}get wg(){return this.eP.wg}get pg(){return this.eP.pg}get Mg(){return this.eP.Mg}set Mg(t){this.eP.Mg=t}get Dg(){return this.lP}get Sg(){return this.eP.Sg}set Sg(t){this.eP.Sg=t}get dP(){return this.fP}we(){this.eP.we()}ye(){this.eP.ye()}async Zh(t,i,e){Pi(e);const s={$w:si.$C,tA:t.src,_P:t.type,gP:this.wP(t),eg:this.aP,AP:t.crossOrigin,vP:i.metadata&&i.metadata.title};this.mP.Bz(t.contentProtection),this.uP=await this.eP.En(s),Pi(e),i.textTracks&&this.pP(i.textTracks),Fi(this.rt)}pP(t){for(let e of t)if(this.eP.yP()&&li.Ra&&aI&&!qm(e.kind,e.label)&&this.MP(e)){var i;const t=null!=(i=e.kind)?i:ra.HM;this.eP.TP(e.src,t,e.label,e.srclang,e.default)}else{if(void 0===e.src)continue;this.NP.IS(e)}}MP(t){return!t.format||"webvtt"===t.format}async Bg(){try{await this.eP.Bg()}catch(t){}for(;!this.iP;)await this.eP.w_(t.BA)}Pg(){this.eP.Pg()}Ug(){return void 0!==this.eP.oP.webkitShowPlaybackTargetPicker}Qg(){this.eP.oP.webkitShowPlaybackTargetPicker&&this.eP.oP.webkitShowPlaybackTargetPicker()}Fg(){this.eP.oP.webkitShowPlaybackTargetPicker&&this.eP.oP.webkitShowPlaybackTargetPicker()}Cg(){return this.eP.oP}xg(){return this.eP.fa}async Gn(){this.rP=void 0,this.hP=void 0,this.uP=void 0,await this.NP.Gn(),this.eP.DP(),await this.eP.Gn(),this.IP.Gn(),this.eg=this.aP,this.ot.Gn(),this.ht.Gn(),this.nP=void 0}async ln(){await this.Gn(),this.Uo(),this.SP(),this.EP(),this.IP.ln(),this.eP.bP=void 0,await this.kP.LP(this.eP),this.qv.ln(),this.Zv.ln(),this.Tl.ln(),await this.NP.ln()}xP(){this.eP.dn(t.wh,this.Ds),this.eP.dn(t.bh,this.Ds),this.eP.dn(t.XA,this.lc),this.eP.dn(t.BA,this.Ds),this.eP.dn(t.CA,this.Ds),this.eP.dn(t.YA,this.Ds),this.eP.dn(t.FA,this.CP),this.eP.dn(t.NA,this.Ds),this.eP.dn(t.RA,this.Ds),this.eP.dn(t.ZA,this.Ds),this.eP.dn(t.yA,this.Ds),this.eP.dn(t.QA,this.OP),this.eP.dn(Dt._v,this.jP),this.eP.dn(be.ha,this.zP),this.eP.dn(t.vA,this.Ds),this.eP.dn(t.AA,this.PP),this.eP.oP.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.BP)}SP(){this.eP.hn(t.wh,this.Ds),this.eP.hn(t.bh,this.Ds),this.eP.hn(t.XA,this.lc),this.eP.hn(t.BA,this.Ds),this.eP.hn(t.CA,this.Ds),this.eP.hn(t.YA,this.Ds),this.eP.hn(t.FA,this.CP),this.eP.hn(t.NA,this.Ds),this.eP.hn(t.RA,this.Ds),this.eP.hn(t.ZA,this.Ds),this.eP.hn(t.yA,this.Ds),this.eP.hn(t.QA,this.OP),this.eP.hn(Dt._v,this.jP),this.eP.hn(be.ha,this.zP),this.eP.hn(t.vA,this.Ds),this.eP.hn(t.AA,this.PP),this.eP.oP.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.BP)}wP(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{Ux:Hi,RP:[{initDataTypes:[Hi.Pb],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}UP(){let t=this.eP.oP.audioTracks,i=this.eP.oP.videoTracks;t&&(t.addEventListener("addtrack",this.QP),t.addEventListener("removetrack",this.FP),t.addEventListener("change",this.YP)),i&&(i.addEventListener("addtrack",this.GP),i.addEventListener("removetrack",this.WP),i.addEventListener("change",this.VP))}EP(){let t=this.eP.oP.audioTracks,i=this.eP.oP.videoTracks;t&&(t.removeEventListener("addtrack",this.QP),t.removeEventListener("removetrack",this.FP),t.removeEventListener("change",this.YP)),i&&(i.removeEventListener("addtrack",this.GP),i.removeEventListener("removetrack",this.WP),i.removeEventListener("change",this.VP))}Kr(t){for(let i=0;i<t.L;i++){t.Iw(i).Im()}}Yg(){this.eP.Yg()}Gg(){}HP(t,i){this.rP||(this.rP=i,this.hP=t,this.jo(new _i(t)))}constructor(t,i,e,s,n,r=new Oe,h=Ee()){super(),this.uP=void 0,this.rP=void 0,this.hP=void 0,this.fP=new eI,this.lP=new hu,this.zP=t=>{const i=t.dt,e=i.code,s=new Ri(kw(e),"Something went wrong during native playback.",i),n=new ma(e,s.message,i.message);this.HP(s,n)},this.lc=()=>{this.jo(new bl(this.I_,this.M_))},this.CP=t=>{this.V_||(this.nP=void 0),this.jo(t)},this.jP=t=>{this.nP=void 0},this.BP=()=>{this.jo(new Yw(this.P_))},this.OP=()=>{this.pg>0&&this.wg>0&&this.jo(new Gs)},this.QP=t=>{this.qv.it(new Uw(t.track))},this.FP=t=>{const i=dI(this.qv,t.track);i&&this.qv.st(i)},this.YP=()=>{this.Kr(this.qv)},this.GP=t=>{this.Zv.it(new Fw(t.track))},this.WP=t=>{const i=dI(this.Zv,t.track);i&&this.Zv.st(i)},this.VP=()=>{this.Kr(this.Zv)},this.PP=t=>{this.jo(t),this.HP(t.errorObject,Yn(t.errorObject))},this.kP=i,this.LS=e,this.iC=h,this.eP=this.kP.qP(Zt.Yv),this.aP=this.eP.oP.preload,this.IP=new uu(this.eP,!0),this.IP.dn(zg,this.Ds),this.mP=new sI(e,r),this.eP.bP=this.mP,this.xP(),this.qv=new ls,this.Zv=new ls,this.UP(),this.NP=new Ma(this.eP,this.LS),this.Tl=new Fe([this.eP.rt]),this.ye()}};function cI(t){return!t.type||!(!oI().canPlayType||!oI().canPlayType(t.type))}var lI=class{ij(t,i,e,s,n,r){return new uI(t,i,e,s,n)}XP(t,i){return cI(t)}ZP(){return!1}constructor(){this.KP=Rt.Oz}};function dI(t,i){for(let e of t.Nw)if(e.Nm===i)return e}var Rn=class{static JP(){return this.Lb}$P(t){this.tB.push(t)}get KP(){return this.iB.KP}ij(t,i,e,s,n,r){let h=this.iB.ij(t,i,e,s,n,r);for(const t of this.tB)h=t(h,e,s);return h}XP(t,i){return this.iB.XP(t,i)}ZP(){return!1}constructor(){this.iB=new lI,this.tB=[]}};function fI(t,i){return qo(t.KP,i.KP)}Rn.Lb=new Rn,r(),r();var _I=class{eB(t){this.sB.push(t),this.sB.sort(fI)}async nB(t,i){for(const e of this.sB){const s=e.XP(t,i);if(nu(s)?await s:Boolean(s))return e}}constructor(){this.sB=[]}};function La(t){Ne.Lb.eB(t)}var Ne=class extends _I{rB(t){this.hB=t}oB(){return this.hB}async aB(t,i){for(let e of t){let t=await this.nB(e,i);if(t)return{ac:e,h:t}}const e=this.hB;for(let s of t)if(e.XP(s,i))return{ac:s,h:e};return{ac:t[0],h:e}}constructor(...t){super(...t),this.hB=Rn.JP()}};Ne.Lb=new Ne,r();var Sl,gI=class{ln(){rs(this.zs)}constructor(t){this.zs=J&&J.document&&J.document.createElement("div"),Du(this.zs),t.appendChild(this.zs)}};r(),r(),function(t){t.Oz="",t.uB="none",t.XM="metadata",t.cB="auto"}(Sl||(Sl={}));var wI=[be.ha,t.MA,t.TA,t.$A,t.fA,t.DA,t.SA,t.zA,t.PA,t.WA,t.HA,Dt.rv,Dt.hv,Dt.ov,Dt.uv,Dt._w,Dt.fv,Dt._v,t.AA,t.vA,t.yA,t.NA,t.CA,t.OA,t.wh,t.BA,t.bh,t.RA,t.QA,t.YA,t.FA,t.XA,t.ZA,t.UA,t.jA,t.GA],AI=class extends ${get ot(){return this.qv}get p_(){return this.Qo.p_}get dt(){return this.Qo.dt}get C_(){return this.Qo.C_}get M_(){return this.Qo.M_}set M_(t){this.Qo.M_=t}get wt(){return this.lB}get I_(){return this.Qo.I_}set I_(t){this.Qo.I_=t}get lt(){return this.Qo.lt}get L_(){return this.Qo.L_}get j_(){return this.Xv}get P_(){return this.Qo.P_}get R_(){return this.Qo.R_}get Q_(){return this.Qo.Q_}set Q_(t){this.Qo.Q_=t}get G_(){return this.Qo.G_}get V_(){return this.Qo.V_}get q_(){return this.Qo.q_}set q_(t){this.Qo.q_=t}get K_(){return this.Qo.K_}get eg(){return this.aP}set eg(t){this.aP=t,this.Qo&&(this.Qo.eg=this.aP)}get og(){return this.Qo.og}get cg(){return this.Qo.cg}get fg(){return this.Qo.fg}get rt(){return this.Tl}get wg(){return this.Qo.wg}get ht(){return this.Zv}get pg(){return this.Qo.pg}get Mg(){return this.Qo.Mg}set Mg(t){this.Qo.Mg=t}get Dg(){return this.Qo.Dg}get dP(){return this.Qo.dP}Pg(){this.Qo.Pg()}Bg(){const t=this.Qo.Bg();nu(t)&&Mo(t)}Rg(){return this.Zh(void 0)}zg(){}dB(){this.qv.Ew=this.Qo.ot,this.Zv.Ew=this.Qo.ht,this.Tl.Ew=this.Qo.rt,this.Xv.Ew=this.Qo.j_,this.Qo.dn(wI,this.Ds)}fB(){this.Qo.hn(wI,this.Ds),this.qv.Ew=void 0,this.Zv.Ew=void 0,this.Tl.Ew=void 0,this.Xv.Ew=void 0}$a(){return this._B}async Zh(t,i){if(Pi(i),this._B=t,!t)return;const e=t.sources.filter(Co);if(Wc(e))return;const s=await this.gB.aB(e,t);Pi(i);const n=s.ac,r=s.h,h=this.xg(),o=Nw(this);(this.wB!==r||this.dt)&&(this.fB(),await this.Qo.ln(),Pi(i),this.wB=r,this.Qo=this.AB(r,n),function(t,i){t.Q_!==i.Q_&&(t.Q_=i.Q_);t.Mg!==i.Mg&&(t.Mg=i.Mg);t.q_!==i.q_&&(t.q_=i.q_)}(this.Qo,o),Do(this,o,this),this.dB()),this.Qo.eg=this.eg,this.vB?this.Qo.ye():this.Qo.we(),await this.Qo.Zh(n,t,i),Pi(i),this.mB(n),this.xg()!==h&&this.jo(new vs)}mB(t){this.lB!==t&&(this.lB=t,this.jo(new fs(t)))}Ug(){return this.Qo.Ug()}Qg(){this.Qo.Qg()}Fg(){this.Qo.Fg()}xg(){return this.Qo.xg()}Yg(){this.Qo.Yg()}Gg(){this.Qo.Gg()}async Gn(){this._B=void 0,this.mB(void 0),await this.Qo.Gn()}async ln(){this.Uo(),await this.Gn(),await this.Qo.ln(),this.qv.ln(),this.Zv.ln(),this.Tl.ln(),this.Xv.ln()}ye(){this.vB=!0,this.Qo.ye()}we(){this.vB=!1,this.Qo.we()}constructor(t,i){super(),this.wB=void 0,this.lB=void 0,this.aP=Sl.uB,this._B=void 0,this.vB=!0,this.qv=new au,this.Zv=new au,this.Tl=new Vc,this.Xv=new fo,this.gB=t,this.Qo=i,this.Qo.eg=this.eg,this.dB()}};function Xn(t,i,e){return e?t<=i:t<i}r(),r(),r();var _c,re=class t{get pB(){return this.yB.slice()}yn(t){return this.yB[2*t]}wn(t){return this.yB[2*t+1]}MB(t){return this.TB[2*t]}NB(t){return this.TB[2*t+1]}ks(){const t=this;return{get length(){return t.L},start(i){const e=0|i;return t.DB(e),t.yn(e)},end(i){const e=0|i;return t.DB(e),t.wn(e)}}}IB(){const i=new Array(2*this.L),e=new Array(2*this.L);for(let t=0;t<this.L;t++)i[2*t]=this.yn(t),i[2*t+1]=this.wn(t),e[2*t]=!0,e[2*t+1]=!0;return new t(i,e)}DB(t){if(t<0)throw new k("The index provided ("+t+") must be non-negative");if(t>=this.L)throw new k("The index provided ("+t+") is greater than the maximum bound ("+this.L+")")}SB(t){if(0===this.L)return 0;if(this.ur(t))return t;if(t<=this.yn(0))return this.yn(0);if(t>=this.wn(this.L-1))return this.wn(this.L-1);{let i,e=1/0;for(let s=0;s<this.L;s++){const n=this.yn(s),r=S.abs(n-t);r<e&&(i=n,e=r);const h=this.wn(s),o=S.abs(h-t);o<e&&(i=h,e=o)}return i}}bn(i){let e=0,s=0;const n=[],r=[];for(;e<this.L&&s<i.L;){const t=this.yn(e),h=this.wn(e),o=this.MB(e),a=this.NB(e),u=i.yn(s),c=i.wn(s),l=i.MB(s),d=i.NB(s),f=S.max(t,u),_=S.min(h,c);let g,w;g=t===u?o&&l:f===t?o:l,w=h===c?a&&d:_===h?a:d,(f<_||g&&w&&f===_)&&(n.push(f,_),r.push(g,w)),h===c?(e+=1,s+=1):h<c?e+=1:s+=1}return new t(n,r)}EB(){const i=this.bB(),e=i.L;if(0===e)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=i.yn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!i.MB(0)));for(let t=0;t<e-1;t++)s.push(i.wn(t),i.yn(t+1)),n.push(!i.NB(t),!i.MB(t+1));const h=i.wn(e-1);return h!==1/0&&(s.push(h,1/0),n.push(!i.NB(e-1),!1)),new t(s,n)}LB(i){let e=0,s=0;const n=this.L,r=i.L,h=new Array(2*(n+r)),o=new Array(2*(n+r));let a=0;for(;e<n&&s<r;){const t=this.yn(e),n=this.wn(e),r=i.yn(s),u=i.wn(s);t<r||t===r&&n<u?(h[a]=t,h[a+1]=n,o[a]=this.MB(e),o[a+1]=this.NB(e),e++):(h[a]=r,h[a+1]=u,o[a]=i.MB(s),o[a+1]=i.NB(s),s++),a+=2}for(;e<n;)h[a]=this.yn(e),h[a+1]=this.wn(e),o[a]=this.MB(e),o[a+1]=this.NB(e),e++,a+=2;for(;s<r;)h[a]=i.yn(s),h[a+1]=i.wn(s),o[a]=i.MB(s),o[a+1]=i.NB(s),s++,a+=2;return new t(h,o)}kB(i){void 0===i&&(i=0);const e=this.L;if(e<2)return this;const s=[],n=[];let r=this.yn(0),h=this.wn(0),o=this.MB(0),a=this.NB(0);for(let t=1;t<e;t++){const e=this.yn(t),u=this.wn(t);let c=this.MB(t),l=this.NB(t);r<e&&h>u||(r===e&&(c=o||c,o=c),h===u&&(l=a||l,a=l),Xn(e,h+i,a||c)?(h=u,a=l):(s.push(r,h),n.push(o,a),r=e,h=u,o=c,a=l))}return s.push(r,h),n.push(o,a),new t(s,n).bB()}bB(){const i=[],e=[];for(let t=0;t<this.L;t++){const s=this.yn(t),n=this.wn(t),r=this.MB(t),h=this.NB(t);s===n?(r||h)&&(i.push(s,n),e.push(!0,!0)):(i.push(s,n),e.push(r,h))}return new t(i,e)}xB(t){if(!this.L)return t;if(!t.L)return this;return this.LB(t).kB()}CB(t){const i=this.bB(),e=t.bB(),s=i.EB(),n=e.EB(),r=s.bn(e),h=n.bn(i);return r.xB(h)}Sm(i){if(0===i)return this;const e=[],s=[];for(let t=0;t<this.L;t++){const n=this.yn(t)+i,r=this.wn(t)+i;e.push(n,r),s.push(this.MB(t),this.NB(t))}return new t(e,s)}OB(t){return 0===this.L||0===t.L?this:this.bB().bn(t.bB().EB())}ur(t,i){return this.jB(t,i)>=0}zB(t,i,e,s,n){return this.PB(t,i,e,s,n)>=0}BB(t,i,e,s,n){return this.RB(t,i,e,s,n)>=0}UB(t){if(t.L!==this.L)return!1;for(let i=0;i<this.L;i++)if(this.yn(i)!==t.yn(i)||this.wn(i)!==t.wn(i)||this.MB(i)!==t.MB(i)||this.NB(i)!==t.NB(i))return!1;return!0}QB(i){const e=[],s=[];for(let t=0;t<this.L;t++){const n=this.yn(t),r=this.wn(t),h=this.MB(t),o=this.NB(t);i(n,r,h,o)&&(e.push(n,r),s.push(h,o))}return new t(e,s)}RB(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,h=i+n;for(let t=0;t<this.L;t+=1)if(Xn(this.yn(t),h,!s||this.MB(t))&&Xn(r,this.wn(t),!e||this.NB(t)))return t;return-1}PB(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,h=i-n;for(let t=0;t<this.L;t+=1)if(Xn(this.yn(t),r,!e||this.MB(t))&&Xn(h,this.wn(t),!s||this.NB(t)))return t;return-1}jB(t,i){return this.PB(t,t,!0,!0,i)}FB(t,i){void 0===i&&(i=0);const e=t+i;for(let t=this.L-1;t>=0;t-=1)if(Xn(this.yn(t),e,this.MB(t)))return t;return-1}YB(t,i){void 0===i&&(i=0);const e=t-i;for(let t=0;t<this.L;t+=1)if(Xn(e,this.wn(t),this.NB(t)))return t;return-1}GB(t,i){void 0===i&&(i=0);const e=t+i;for(let t=0;t<this.L;t+=1)if(this.yn(t)>e)return t;return-1}WB(i){return this.DB(i),new t([this.yn(i),this.wn(i)],[this.MB(i),this.NB(i)])}VB(t,i){const e=this.jB(t,i);return e<0?void 0:this.WB(e)}get HB(){let t=0;for(let i=0;i<this.L;i++){t+=this.wn(i)-this.yn(i)}return t}static gn(i){const e=[];for(let t=0;t<i.length;t++)e.push(i.start(t),i.end(t));return new t(e)}static qB(i){return new t([i,i],[!0,!0])}static XB(i,e){return i<=e?new t([i,e]):t.ZB()}static ZB(){return vI}constructor(t,i){this.L=t.length>>1,this.yB=t,this.TB=i||function(t){const i=new Array(2*t);for(let e=0,s=0;e<t;e+=1,s+=2)i[s]=!0,i[s+1]=!1;return i}(this.L)}},vI=new re([]);r(),r(),function(t){t.ra="fullscreenchange",t.ca="fullscreensupportchange",t.ha="fullscreenerror"}(_c||(_c={})),r();var mI=class extends d{constructor(){super(_c.ha)}},Th=(_c.ra,_c.ca,_c.ha,class extends i{get ls(){return!1}get ta(){return!1}bo(){this.jo(new mI)}To(){}ln(){this.Uo()}}),pI=class extends i{get M_(){}set M_(t){}get I_(){return this.KB}set I_(t){this.KB!==t&&(this.KB=t,this.JB=!0,this.jo(new gt(this.I_)))}get R_(){return{Jv:0,$v:0,tm:0,im:0,nm:0,hm:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get Q_(){return this.$B}set Q_(t){this.$B!==t&&(this.$B=t,this.jo(new ge(this.I_,this.Mg)))}get V_(){return this.tR}get q_(){return this.iR}set q_(t){this.iR!==t&&(this.iR=t,this.jo(new ce(this.I_,this.q_)))}get fg(){return this.JB}get Mg(){return this.wk}set Mg(t){this.wk!==t&&(this.wk=t,this.jo(new ge(this.I_,this.Mg)))}get Sg(){return!1}set Sg(t){}get dP(){return this.fP}ye(){}we(){}Bg(){this.tR&&(this.tR=!1,this.jo(new ih(this.I_)),this.jo(new tc(this.I_)))}Pg(){this.tR||(this.tR=!0,this.jo(new bl(this.I_,this.M_)),this.jo(new bs(this.I_)))}Zh(t,i){return Promise.resolve()}Ug(){return!1}Qg(){}Fg(){}xg(){return this.eR}Yg(){}Gg(){}async Gn(){this.KB=0,this.JB=!1,this.Pg(),this.jo(new Fo(this.KB))}async ln(){this.Uo(),this.ot.ln(),this.rt.ln(),this.ht.ln()}constructor(...t){super(...t),this.KB=0,this.$B=!1,this.tR=!0,this.iR=1,this.JB=!1,this.wk=1,this.ot=new ls,this.p_=re.ZB().ks(),this.lt=NaN,this.L_=!1,this.dt=void 0,this.C_=void 0,this.j_=void 0,this.P_=!1,this.G_=!0,this.K_=re.ZB().ks(),this.eg=Sl.uB,this.og=he.Rv,this.cg=re.ZB().ks(),this.cP=void 0,this.rt=new Or,this.wg=0,this.ht=new ls,this.pg=0,this.Dg=new hu,this.fP=new eI,this.eR=new Th}},yI=class extends pI{set sR(t){this.kP=t,this.eP=t.qP(Zt.Yv)}Cg(){var t;return null==(t=this.eP)?void 0:t.oP}async ln(){await super.ln(),this.eP&&(await this.kP.LP(this.eP),this.eP=void 0)}constructor(...t){super(...t),this.kP=void 0,this.eP=void 0}},ml=class extends AI{get _e(){return this.hu}get Sg(){return this.Qo.Sg}set Sg(t){this.Qo.Sg=t}zg(){super.zg(),this.rR.nR()}Og(t){Dw(this,t)}jg(){}Wg(t){return!1}async Zh(t,i){const e=this.xg(),s=this.Cg();await super.Zh(t,i),this.xg()!==e&&this.jo(new vs),this.Cg()!==s&&this.jo(new Iw)}AB(t,i){return t.ij(this.hu,this.rR,this.LS,this.mC,this.hR,this.oR,i)}Cg(){return this.Qo.Cg()}m_(){return this.rR.aR.map((t=>t.oP))}async ln(){await super.ln(),this.rR.ln(),this.uR.ln()}constructor(t,i,e,s,n,r){const h=new yI;super(Ne.Lb,h),this.hu=t,this.mC=i,this.LS=e,this.hR=s,this.oR=r,this.rR=new vp(n,this.oR),this.rR.cR(this.hu),h.sR=this.rR,this.uR=new gI(this.hu)}};r(),r();var gl=class extends ${get ot(){return this.lR}get p_(){return re.ZB().ks()}get M_(){return new Date(NaN)}set M_(t){}get wt(){}get I_(){return 0}set I_(t){}get lt(){return 0}get _e(){return this.hu}get L_(){return!0}get dt(){return this.dR}get C_(){return this.fR}get j_(){}get R_(){return{Jv:0,$v:0,tm:0,im:0,nm:0,hm:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get Q_(){return!1}set Q_(t){}get G_(){return!0}get V_(){return!0}get q_(){return 0}set q_(t){}get K_(){return re.ZB().ks()}get eg(){return Sl.uB}set eg(t){}get og(){return he.Rv}get cg(){return re.ZB().ks()}get fg(){return!1}get rt(){return this._R}get wg(){return 0}get ht(){return this.lR}get pg(){return 0}get Mg(){return 1}set Mg(t){}get Dg(){return this.lP}get Sg(){return!1}set Sg(t){}Wg(t){return!0}we(){}Bg(){throw this.jo(new _i(this.fR)),this.dR}Pg(){}$a(){}async Zh(t,i){throw Pi(i),this.jo(new _i(this.fR)),this.dR}ye(){}Rg(){return Promise.resolve()}Cg(){}xg(){return this.eR}m_(){return[]}zg(){}Og(t){}jg(){}get P_(){return!1}Ug(){return!1}Qg(){}Fg(){}Yg(){}Gg(){}Gn(){return Promise.resolve()}ln(){return this.Uo(),this.lR.ln(),this._R.ln(),Promise.resolve()}constructor(t,i,e){super(),this.eR=new Th,this.lP=new hu,this.hu=t,this.dR=i,this.lR=new ls,this._R=new Or,this.fR=e}};function MI(t){if(t&&Uo(t))return qr({},t,{integration:TI(t.integration),fairplay:bI(t.fairplay),widevine:NI(t.widevine),playready:DI(t.playready),clearkey:LI(t.clearkey),aes128:kI(t.aes128),integrationParameters:xI(t.integrationParameters),preferredKeySystems:CI(t.preferredKeySystems)})}function TI(t){if(ji(t))return t}function NI(t){if(t&&Uo(t))return{persistentState:II(t.persistentState),distinctiveIdentifier:II(t.distinctiveIdentifier),audioRobustness:SI(t.audioRobustness),videoRobustness:SI(t.videoRobustness),licenseAcquisitionURL:ji(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:EI(t.licenseType),headers:t.headers,useCredentials:!!N_(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:ji(t.certificate)||YA(t.certificate)?t.certificate:void 0}}function DI(t){if(!t)return;const i=NI(t);if(!i)return;return qr({},i,{customData:ji(t.customData)?t.customData:void 0})}function II(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function SI(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function EI(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function bI(t){if(!t)return;const i=NI(t);if(!i)return;return qr({},i,{certificateURL:ji(t.certificateURL)?t.certificateURL:void 0})}function LI(t){if(!t)return;const i=NI(t);if(!i)return;const e=Gr(t.keys)?t.keys.map((t=>function(t){if(!t||!Uo(t))return;const i=t.id,e=t.value;if(!ji(i)||!ji(e))return;return{id:i,value:e}}(t))).filter(oe):void 0;return qr({},i,{keys:e})}function kI(t){if(Uo(t))return{useCredentials:N_(t.useCredentials)?t.useCredentials:void 0}}function xI(t){if(Uo(t))return t}function CI(t){return t&&Gr(t)?t.map((t=>BN(t))).filter(oe):[Ct,Ds,ba]}r(),r(),r(),r(),r(),r(),r();var OI=class extends d{constructor(t){super("presentationmodechange"),this.presentationMode=t}};function ni(t,i,e){return new Promise(((s,n)=>{if(e&&e.Gf)return n(new Eu);const r=t=>{o(),s(t)},h=()=>{o(),n(new Eu)},o=()=>{t.removeEventListener(i,r),e&&e.Zf(h)};t.addEventListener(i,r),e&&e.Xf(h)}))}r(),r(),r();var mu,jI=class extends i{Ua(t){for(const i of this.gR)t.dn(i,this.wR);this.AR.push(t)}vR(t){for(const i of this.gR)t.hn(i,this.wR);this.AR.push(t)}ln(){this.Uo();for(const t of this.AR)this.vR(t);sr(this.AR)}constructor(t,i=!1,e){super(e),this.AR=[],this.mR=t=>{Hu((()=>{this.Ds(t)}))},this.gR=t,this.wR=i?this.mR:this.Ds}},zI=class extends ${Ua(t){t.c_(this.pR),this.AR.push(t)}vR(t){t.g_(this.pR),Hc(this.AR,t)}ln(){this.Uo();for(const t of this.AR)t.g_(this.pR);sr(this.AR)}constructor(t,i=!1){super(t),this.AR=[],this.mR=t=>{Hu((()=>{this.Ds(t)}))},this.pR=i?this.mR:this.Ds}};!function(t){t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture"}(mu||(mu={}));var Mh,PI=class extends ${get so(){return this.Oa||(this.Oa=this.Qh()),this.Oa}Qh(){return function(t){let i,e={get currentMode(){return t.qo()},requestMode(i){const e=RI(i);e&&t.Zo(e)},supportsMode(i){const e=RI(i);return!!e&&t.Go(e)},addEventListener(t,e){i.dn(t,e)},removeEventListener(t,e){i.hn(t,e)}};return i=new zI(e,!0),i.Ua(t),e}(this)}Zo(t){this.Xo(t,t)}Xo(t,i){this.yR!==i&&(this.MR=!0,this.NR=t,this.Jo(i,this.yR),"fullscreen"!==t&&(this.DR=t),this.MR=!1,this.qr())}qo(){return this.IR?"fullscreen":"inline"}Go(t){switch(t){case"fullscreen":return this.eR.ta;case"inline":return!0}return!1}qr(){if(this.MR)return;const t=this.yR,i=this.qo();this.yR=i,"fullscreen"!==i&&(this.SR=i),t!==i&&this.jo(new OI(i))}Jo(t,i){const e="fullscreen"===t;this.IR=e,e!==this.eR.ls&&(e?this.eR.bo():this.eR.To())}_i(){if(this.MR)return;const t=this.eR.ls;this.IR=t,t?this.Xo("fullscreen","fullscreen"):t||"fullscreen"!==this.NR?this.qr():this.Xo(this.DR,this.SR)}ER(){this._i(),this.jo(new _i(new Ri(ue.FULLSCREEN_ERROR,"Failed to enter fullscreen.")))}ln(){this.eR.ln(),this.Uo()}constructor(t){super(),this.NR="inline",this.yR="inline",this.MR=!1,this.IR=!1,this.DR="inline",this.SR="inline",this.Oa=void 0,this.bR=()=>this._i(),this.LR=()=>this.ER(),this.eR=t,this.eR.dn(_c.ra,this.bR),this.eR.dn(_c.ha,this.LR),this.qr()}},BI={I_:0,lt:NaN,L_:!1,dt:void 0,C_:void 0,Q_:!1,V_:!0,q_:1,og:he.Rv,fg:!1,wg:0,pg:0,Mg:1};function RI(t){switch(t){case mu.INLINE:case mu.FULLSCREEN:case mu.PICTURE_IN_PICTURE:return t;default:return}}r(),function(t){t.DEFAULT="",t.THEO="theo",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor"}(Mh||(Mh={}));var cc,os,Ps,UI,QI,Ts=class{get kR(){return this.xR}OR(t){const i=this.kR.filter((i=>i.jR(t)));if(i.length>1)0;else if(0===i.length)throw k("Unknown ad integration: "+t.integration);return i[0]||null}zR(t){this.xR.push(t)}constructor(){this.xR=[]}};Ts.Lb=new Ts,r(),r(),r(),r(),function(t){t._v="PLAYING",t.Dv="PAUSED",t.PR="SEEK",t.RR="STALLED",t.UR="FAILED",t.QR="INITIAL_BUFFERING",t.FR="NO_ACCESS"}(cc||(cc={})),function(t){t.YR="HTTP_REQUEST_STATUS_CODE_1XX",t.GR="HTTP_REQUEST_STATUS_CODE_2XX",t.WR="HTTP_REQUEST_STATUS_CODE_3XX",t.HR="HTTP_REQUEST_STATUS_CODE_4XX",t.qR="HTTP_REQUEST_STATUS_CODE_5XX",t.XR="BUFFER_LENGTH",t.ZR="BYTES_RECEIVED",t.KR="SEGMENT_READ_BITRATE",t.JR="SEGMENT_PROFILE_BITRATE",t.$R="VIDEO_PROFILE_BITRATE",t.tU="NUMBER_OF_FRAMES_DROPPED",t.iU="PLAYBACK_POSITION",t.eU="NUMBER_OF_FRAMES_DECODED",t.sU="PLAYBACK_DELTA_TO_ORIGIN",t.nU="STREAM_DELTA_TO_ORIGIN",t.rU="ORIGIN_TIMESTAMP"}(os||(os={})),function(t){t.hU="MANIFEST_URI",t.oU="ASSET_DURATION",t.aU="NUMBER_OF_CONTENT_PROFILES",t.uU="CDN",t.cU="CONTENT_TITLE",t.lU="SERVICE_NAME",t.dU="CONTENT_TYPE",t.fU="CONTENT_DESCRIPTION"}(Ps||(Ps={})),(UI||(UI={}))._U="shutdown_normal_shutdown",function(t){t.gU="session/",t.wU="content/",t.AU="internalError/",t.vU="drmError/",t.mU="caError/",t.pU="networkError/"}(QI||(QI={}));var FI,YI=class{get code(){return this.category+this.statusCode}constructor(t,i){this.category=t,this.statusCode=i}};!function(t){t.yU="userAction",t.MU="endOfStreamReached"}(FI||(FI={}));var Vn,GI=class extends i{};r(),r(),function(t){t.PAUSE="TU",t.RESUME="NU"}(Vn||(Vn={}));var WI=class extends d{constructor(){super("DU")}},_u=class extends i{IU(){this.SU=!0}EU(){}ln(){this.SU=!1,this.bU.hn(Vn.PAUSE,this.LU),this.bU.hn(Vn.RESUME,this.kU)}xU(){return isFinite(this.Qo.yd())}constructor(t,i){super(),this.Qo=t,this.bU=i,this.SU=!1,this.LU=()=>{this.EU(),this.SU=!1},this.kU=()=>{this.SU=!0},this.bU.dn(Vn.PAUSE,this.LU),this.bU.dn(Vn.RESUME,this.kU)}},VI=class extends _u{IU(){super.IU(),this.CU()}ln(){this.OU(),super.ln()}CU(){this.Qo.dn("waiting",this.jU),this.Qo.dn("pause",this.zU),this.Qo.dn("playing",this.PU),this.Qo.dn("seeking",this.BU),this.Qo.dn("seeked",this.RU)}OU(){this.Qo.hn("waiting",this.jU),this.Qo.hn("pause",this.zU),this.Qo.hn("playing",this.PU),this.Qo.hn("seeking",this.BU),this.Qo.hn("seeked",this.RU)}UU(){this.QU=!0}FU(){const t=this.Qo.x_(),i=new YI(QI.AU,String(t.code));this.YU(cc.UR,i,t.message)}GU(t){this.SU&&(this.bU.WU(t),this.jo(new WI))}YU(t,i,e){this.bU.VU(t,i,e),this.jo(new WI)}HU(t,i){this.bU.qU(t,i)}constructor(...t){super(...t),this.QU=!1,this.XU=!1,this.ZU=!1,this.jU=()=>{this.XU&&!this.ZU&&this.GU(cc.RR)},this.PU=()=>{this.Qo.V_||(this.XU||this.HU(new YI(QI.wU,"firstFrameDisplayed"),"now"),this.XU=!0,this.GU(cc._v))},this.zU=()=>{this.Qo.V_&&(this.XU=!0,this.GU(cc.Dv))},this.BU=()=>{this.QU&&(this.ZU=!0,this.QU=!1,this.GU(cc.PR))},this.RU=()=>{this.ZU=!1,this.Qo.V_&&this.GU(cc.Dv)}}};r();var HI=class extends _u{IU(){super.IU(),this.KU(),this.CU()}ln(){this.OU(),super.ln()}CU(){this.Qo.ht.dn("fw",this.KU),this.Qo.$U.JU(this.tQ),this.Qo.dn(t.yA,this.iQ)}OU(){this.Qo.ht.hn("fw",this.KU),this.Qo.$U.eQ(this.tQ),this.Qo.hn(t.yA,this.iQ)}sQ(t){t.serviceName&&this.nQ(Ps.lU,t.serviceName),t.cdn&&this.nQ(Ps.uU,t.cdn),t.contentTitle&&this.nQ(Ps.cU,t.contentTitle),t.contentType&&this.nQ(Ps.dU,t.contentType),t.contentDescription&&this.nQ(Ps.fU,t.contentDescription)}nQ(t,i){this.SU&&this.bU.rQ(t,i)}constructor(...t){super(...t),this.iQ=()=>{this.xU()&&this.nQ(Ps.oU,S.round(this.Qo.yd()))},this.tQ=t=>{"manifest"===t.request.type&&this.nQ(Ps.hU,t.url)},this.KU=()=>{const t=xe(this.Qo.ht.Nw,(t=>t.Ot));t&&this.nQ(Ps.aU,t.Uw.L)}}};r();var qI=class extends _u{IU(){super.IU(),this.hQ=this.Qo.R_.Jv,this.oQ=this.Qo.R_.tm,this.CU(),this.aQ.push(b(this.uQ,1e3))}EU(){super.EU(),this.cQ()}ln(){this.cQ(),this.OU(),this.aQ.forEach(w),sr(this.aQ),super.ln()}CU(){this.Qo.$U.JU(this.lQ),this.Qo.dn(t.HA,this.dQ)}OU(){this.Qo.$U.eQ(this.lQ),this.Qo.hn(t.HA,this.dQ)}fQ(){this.cQ()}_Q(t){this.gQ+=t,this.wQ(os.ZR,this.gQ)}AQ(t,i){const e=this.vQ.get(i)||0;this.wQ(t,e)}mQ(){const t=this.Qo.R_.Jv-this.hQ;this.wQ(os.tU,t)}pQ(){const t=this.Qo.R_.tm-this.oQ;this.wQ(os.eU,t)}yQ(){const t=Ho.Lb.Dz();this.wQ(os.KR,WA(t))}MQ(t){this.wQ(os.JR,WA(t)),this.wQ(os.$R,WA(t))}cQ(){if(!this.xU())return;const t=S.round(ee(this.Qo.S_()));this.wQ(os.iU,t)}TQ(){const t=re.gn(this.Qo.y_()),i=this.Qo.S_(),e=t.VB(i),s=e?ee(e.wn(0)-i):0;this.wQ(os.XR,s)}wQ(t,i){this.SU&&this.bU.NQ(t,i)}constructor(...t){super(...t),this.vQ=Mt(),this.gQ=0,this.hQ=0,this.oQ=0,this.aQ=[],this.uQ=()=>{this.mQ(),this.pQ(),this.TQ()},this.dQ=t=>{t.TS===Zt.Yv&&(this._Q(t.nm),this.yQ(),this.MQ(t.DQ),this.cQ())},this.lQ=t=>{const i=t.status.toString()[0],e=this.vQ.get(i)||0;this.vQ.set(i,e+1),this.AQ(os.YR,"1"),this.AQ(os.GR,"2"),this.AQ(os.WR,"3"),this.AQ(os.HR,"4"),this.AQ(os.qR,"5")}}};r(),r(),r();var yl=class{tL(t){this.IQ.delete(t)}SQ(){this.IQ.clear()}Kb(t){return this.IQ.get(t)}pz(t,i){this.IQ.set(t,i)}constructor(){this.IQ=Mt()}},Ht=class t{static EQ(){return t.Lb||(t.Lb=XI.hC()?new XI:new yl),t.Lb}static tL(i){t.EQ().tL(i)}static SQ(){t.EQ().SQ()}static Kb(i){return t.EQ().Kb(i)}static pz(i,e){t.EQ().pz(i,e)}};Ht.Lb=void 0;var Zo,XI=class extends Ht{static hC(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}tL(t){self.sessionStorage.removeItem(t)}SQ(){self.sessionStorage.clear()}Kb(t){var i;return null!=(i=self.sessionStorage.getItem(t))?i:void 0}pz(t,i){self.sessionStorage.setItem(t,i)}};function ZI(t){return t&&t.integration===rS}function KI(t){if(!ji(t.asset))throw new _("Agama source configuration: expected 'asset' to be a string");if(!function(t){return!!ji(t)&&("live"===t||"vod"===t)}(t.streamType))throw new _("Agama source configuration: expected 'streamType' to be 'live' or 'vod'");if(void 0!==t.serviceName&&!function(t){return!!ji(t)&&("live"===t||"svod"===t||"nvod"===t||"tvod"===t||"avod"===t||"catchuptv"===t)}(t.serviceName))throw new _("Agama source configuration: expected 'serviceName' to be 'live', 'svod', 'nvod','tvod', 'avod' or 'catchuptv'");if(void 0!==t.cdn&&!ji(t.cdn))throw new _("Agama source configuration: expected 'cdn' to be a string");if(void 0!==t.contentTitle&&!ji(t.contentTitle))throw new _("Agama source configuration: expected 'contentTitle' to be a string");if(void 0!==t.contentType&&!ji(t.contentType))throw new _("Agama source configuration: expected 'contentType' to be a string");if(void 0!==t.contentDescription&&!ji(t.contentDescription))throw new _("Agama source configuration: expected 'contentDescription' to be a string");return t}function JI(t){if(!ji(t.config))throw new _("Agama player configuration: expected 'config' to be a string");if(void 0!==t.logLevel&&!function(t){return!!ji(t)&&("info"===t||"debug"===t||"warning"===t||"error"===t||"fatal"===t)}(t.logLevel))throw new _("Agama player configuration: expected 'logLevel' to be 'info', 'debug', 'warning','error' or 'fatal'");if(void 0!==t.application&&!ji(t.application))throw new _("Agama player configuration: expected 'application' to be a string");if(void 0!==t.applicationVersion&&!ji(t.applicationVersion))throw new _("Agama player configuration: expected 'applicationVersion' to be a string");if(void 0!==t.userAccountID&&!ji(t.userAccountID))throw new _("Agama player configuration: expected 'userAccountID' to be a string");if(void 0!==t.deviceID&&!ji(t.deviceID))throw new _("Agama player configuration: expected 'deviceID' to be a string");return t}function $I(){let t="00000000-0000-0000-0000-000000000000",i=s.navigator,e=s.screen,n=""+i.mimeTypes.length;n+=i.userAgent.replace(/\D+/g,""),n+=i.plugins.length,n+=e.height||"",n+=e.width||"",n+=e.pixelDepth||"",n+=S.floor(1e3*S.random());let r=function(t){let i,e,s=0;if(0===t.length)return"0";for(i=0;i<t.length;i++)e=t.charCodeAt(i),s=(s<<5)-s+e,s|=0;return S.abs(s).toString().substring(0,12)}(n);return t=[t.slice(0,t.length-r.length),r].join(""),t}function tS(t,i,e){const s=i,n=function(t,i){return ow(i)?t.DsProtocol.APPLE_HLS:t.DsProtocol.MPEG_DASH}(t,s.type),r=function(t,i){let e=t.DsPlaylistType.VOD;"live"===i&&(e=t.DsPlaylistType.LIVE);return e}(t,e.streamType);return{asset:e.asset,playlistType:r,protocol:n,uri:s.src}}r(),function(t){t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected"}(Zo||(Zo={}));var iS,Xu,Fs,eS,sS,Va,nS=class{bQ(){this.Qo.hn("error",this.LQ),this.kQ(),this.xQ(),this.bU.CQ()}OQ(){this.Qo.jQ.so.chromecast&&this.Qo.jQ.so.chromecast.addEventListener("statechange",this.zQ)}xQ(){this.Qo.jQ.so.chromecast&&this.Qo.jQ.so.chromecast.removeEventListener("statechange",this.zQ)}BQ(){return void 0!==this.Qo.jQ.so.chromecast&&this.Qo.jQ.so.chromecast.state===Zo.CONNECTED}ln(){this.Qo.hn("sourcechange",this.po),this.Qo.hn("play",this.RQ),this.Qo.hn("ended",this.UQ),this.bQ(),this.bU.ln()}QQ(){this.FQ||(this.FQ=new VI(this.Qo,this.bU)),this.YQ||(this.YQ=new qI(this.Qo,this.bU)),this.GQ||(this.GQ=new HI(this.Qo,this.bU))}IU(){this.FQ&&(this.FQ.IU(),this.FQ.dn("DU",this.WQ)),this.YQ&&this.YQ.IU(),this.GQ&&this.GQ.IU()}kQ(){this.FQ&&(this.FQ.hn("DU",this.WQ),this.FQ.ln(),this.FQ=void 0),this.YQ&&(this.YQ.ln(),this.YQ=void 0),this.GQ&&(this.GQ.ln(),this.GQ=void 0)}sQ(t){this.GQ&&this.GQ.sQ(t)}VQ(){this.FQ&&this.FQ.FU()}UU(){this.FQ&&this.FQ.UU()}constructor(t,i,e){this.Qo=t,this.bU=i,this.po=()=>{this.HQ(),this.UQ()},this.HQ=()=>{const t=this.Qo.$a(),i=t&&t.analytics;this.qQ=function(t){void 0===t&&(t=[]);for(let i of t)if(ZI(i))return KI(i)}(i)},this.UQ=()=>{this.bQ(),this.Qo.hn("play",this.RQ),!this.BQ()&&this.bU.XQ()&&this.Qo.wt&&this.qQ&&(this.QQ(),this.Qo.V_||this.Qo.L_?this.Qo.dn("play",this.RQ):this.RQ())},this.RQ=()=>{this.Qo.wt&&this.qQ&&(this.bU.ZQ(this.Qo.wt,this.qQ),this.IU(),this.sQ(this.qQ),this.OQ(),this.Qo.dn("error",this.LQ),this.Qo.hn("play",this.RQ))},this.zQ=()=>{this.BQ()&&this.bQ()},this.LQ=()=>{this.VQ(),this.bQ()},this.WQ=()=>{this.YQ&&this.YQ.fQ()};const s=function(t){void 0===t&&(t=[]);for(const i of t)if(ZI(i))return JI(i)}(e.analytics);s&&this.bU.KQ()&&(this.bU.zg(s),this.bU.XQ()?(this.bU.JQ(),this.Qo.dn("sourcechange",this.po),this.Qo.dn("ended",this.UQ)):console.warn("An error occurred while initializing an Agama EMP client. Please check your configuration"))}},rS="agama";function hS(t){switch(t){case"":return iS.NONE;case"horizontal":return iS.HORIZONTAL;case"vertical":return iS.VERTICAL;default:throw new _}}function oS(t,i){if(i)return Xu.PM360;if(null==t)return Xu.NONE;switch(t){case"":return Xu.NONE;case"360":return Xu.PM360;case"180":return Xu.PM180;default:throw new _("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}function aS(t){const i=function(t){if(!t||!ji(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}(null==t?void 0:t.useSeamlessPeriodSwitch);return{useSeamlessPeriodSwitch:i,needsTimescaleShifting:ri(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?ka(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:ri(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:ri(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:ri(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards)}}function uS(t){return{discontinuityAlignment:cS(null==t?void 0:t.discontinuityAlignment)}}function cS(t){if(!t||!ji(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}function lS(t,i,e){const{useCredentials:s,crossOrigin:n}=function(t,i){let e=zr.Ov;t.useCredentials?e=zr.Cv:t.crossOrigin&&(e=rw(t.crossOrigin));e===zr.Ov&&i&&i.vr&&i.vr[360]&&(e=zr.xv);const s=e===zr.Cv;return{useCredentials:s,crossOrigin:e}}(t,i);let r=t.liveOffset;oe(r)||(r=e&&oe(e.liveOffset)?e.liveOffset:void 0);let h=t.timeServer;oe(h)||(h=i&&oe(i.timeServer)?i.timeServer:void 0);let o=t.hlsDateRange;oe(o)||(o=e&&oe(e.hlsDateRange)?Boolean(e.hlsDateRange):void 0);return{crossOrigin:n,useCredentials:s,liveOffset:r,timeServer:h,hlsDateRange:o,experimentalRendering:Boolean(t.experimentalRendering),nativeUiRendering:Boolean(t.nativeUiRendering),lowLatency:Boolean(t.lowLatency),useNativePlayback:Boolean(t.useNativePlayback),useManagedMediaSource:Boolean(t.useManagedMediaSource),dash:oe(t.dash)?aS(t.dash):void 0,hls:oe(t.hls)?uS(t.hls):void 0,abr:mw(xo(t.abr),null==e?void 0:e.abr),lcevc:ri(t.lcevc),ignoreEmbeddedTextTrackTypes:oe(t.ignoreEmbeddedTextTrackTypes)?ww(t.ignoreEmbeddedTextTrackTypes):[]}}function wl(t){if(null!==t)return t}function dS(t){const i={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:wl(t.streamActivityMonitorID),adTagParameters:Uo(t.adTagParameters)?t.adTagParameters:{},authToken:wl(t.authToken),omidAccessModeRules:wl(t.omidAccessModeRules)};if("vod"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.videoID&&i.contentSourceID)}(t)){const e=t.videoID,s=t.contentSourceID;return e?s?qr({},i,{availabilityType:"vod",videoID:e,contentSourceID:s}):void le.Wv("A VOD DAI configuration was provided without valid contentSourceID which is required."):void le.Wv("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.assetKey)}(t)){const e=t.assetKey;return e?qr({},i,{availabilityType:"live",assetKey:e}):void le.Wv("A Live DAI configuration was provided without valid assetKey which is required.")}le.Wv("A DAI configuration was provided without a valid availabilityType which is required.")}function fS(t){switch(t.integration){case"google-dai":return dS(t);case"imagine":return function(t){return{integration:t.integration}}(t);case"yospace":return function(t){var i;return{integration:t.integration,streamType:null!=(i=t.streamType)?i:void 0}}(t);default:return{integration:t.integration}}}function tu(t,i,e){const s=lS(t,i,e),n=wl(t.src);let r=t.type;r||(r=t.src?nw(t.src):void 0);const h=function(t,i){let e;e=oe(t.contentProtection)?t.contentProtection:oe(t.drm)?t.drm:oe(i)&&oe(i.contentProtection)?i.contentProtection:oe(i)&&oe(i.drm)?i.drm:void 0;return _S(e)}(t,i);return qr({},s,{src:n,type:r,contentProtection:h,ssai:oe(t.ssai)?fS(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function _S(t){return Be(t)&&t.integration&&t.integration===oN?function(t){const i=PN(I.xb,t),e=PN(I.kb,t),s=t[I.Ob]&&PN(I.Ob,t);return qr({integration:"keyos",widevine:i,playready:e},s?{fairplay:s}:{})}(t):t}r(),r(),function(t){t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(iS||(iS={})),r(),function(t){t.NONE="",t.PM360="360",t.PM180="180"}(Xu||(Xu={})),r(),r(),r(),function(t){t.cB="auto",t.$Q="always",t.tF="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only"}(Fs||(Fs={})),r(),function(t){t.cB="auto",t.iF="playlist",t.eF="media"}(eS||(eS={})),function(t){t.VERIZON_MEDIA="verizon-media",t.MEDIATAILOR="mediatailor"}(sS||(sS={})),r(),r(),r(),r(),r(),r(),function(t){t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event"}(Va||(Va={})),r();var gS="https://content.uplynk.com";function lu(t){if(!t)return!0;const i=!function(t){return da(t)||fe(t)&&da(t[0])}(t.sources)||Wc(t.sources),e=!t.ads||wS(t.ads),s=""!==t.poster&&!t.poster;return i&&e&&s}function wS(t){return!t||Gr(t)&&0===t.length}function AS(t){if(t&&t.sources)return vS(t.sources)}function vS(t){return ji(t)?nw(t):qc(t)?t.type||t.src&&nw(t.src):fe(t)&&t.length>0?vS(t[0]):void 0}function mS(t){if(t&&t.sources)return pS(t.sources)}function pS(t){return ji(t)?t:qc(t)?t.src:fe(t)&&t.length>0?pS(t[0]):void 0}function yS(t,i,e){return aw(t)?function(t,i,e){let s=qr({},dw(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:sS.VERIZON_MEDIA,id:"",prefix:gS,preplayParameters:{},playbackUrlParameters:{},assetType:Va.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(ji(t))return t;if(fe(t)&&ji(t[0]))return t;if(function(t){return Uo(t)&&ji(t.userId)&&(fe(t.externalId)||ji(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return Va.CHANNEL;case"event":return Va.EVENT;default:return Va.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=Uc(t.contentProtected));t.assetInfo?s.assetInfo=Uc(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=hs(t.prefix)||gS);return s.ping=function(t,i){let e=!1,s=!1,n=!1;i?(e=!!N_(i.adImpressions)&&i.adImpressions,s=!!N_(i.freeWheelVideoViews)&&i.freeWheelVideoViews,n=N_(i.linearAdData)?i.linearAdData:t!==Va.ASSET):t!==Va.ASSET&&(n=!0);return{adImpressions:e,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=TS(s,t),s=DS(s,i,e),s=NS(s,t,e),s}(t,i,e):uw(t)?function(t,i,e){var s;return qr({},MS(t,i,e),{integration:sS.MEDIATAILOR,adParams:null!=(s=t.adParams)?s:{}})}(t,i,e):MS(t,i,e)}function MS(t,i,e){let s=fw();const n=i&&(i.contentProtection||i.drm);if(ji(t)){if(s.src=t,s.type=nw(t),n){const t=MI(n);s.contentProtection=_S(t)}}else if(qc(t)||ha(t)){s.src=t.src,s.type=t.type||nw(t.src),s.isAdvertisement=t.isAdvertisement;const i=lw(t)?t.hesp:void 0;void 0!==i&&(s.hesp=i);uw(t)&&(s.integration=t.integration);const e=MI(t.contentProtection||t.drm||n);s.contentProtection=_S(e),t.ssai&&(s.ssai=fS(t.ssai)),s=TS(s,t)}return s=DS(s,i,e),s=NS(s,t,e),s}function TS(t,i){i.useCredentials?t.crossOrigin=zr.Cv:i.crossOrigin&&(t.crossOrigin=rw(i.crossOrigin)),ji(i.timeServer)&&(t.timeServer=i.timeServer),i.liveOffset&&(t.liveOffset=i.liveOffset),i.hlsDateRange&&(t.hlsDateRange=i.hlsDateRange),i.lowLatency&&(t.lowLatency=Uc(i.lowLatency)),i.useNativePlayback&&(t.useNativePlayback=Uc(i.useNativePlayback)),i.useManagedMediaSource&&(t.useManagedMediaSource=Uc(i.useManagedMediaSource)),i.dash&&(t.dash=aS(i.dash)),i.hls&&(t.hls=uS(i.hls)),i.lcevc&&(t.lcevc=Uc(i.lcevc)),i.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=ww(i.ignoreEmbeddedTextTrackTypes));const e=ri(i.experimentalRendering);void 0!==e&&(t.experimentalRendering=e);const s=ri(i.nativeUiRendering);return void 0!==s&&(t.nativeUiRendering=s),t}function NS(t,i,e){return t.abr=mw(ji(i)?void 0:xo(i.abr),null==e?void 0:e.abr),t}function DS(t,i,e){var s;const n=i&&i.timeServer;return e&&e.liveOffset&&!oe(t.liveOffset)&&(t.liveOffset=e.liveOffset),e&&e.hlsDateRange&&!oe(t.hlsDateRange)&&(t.hlsDateRange=e.hlsDateRange),t.crossOrigin===zr.Ov&&(null==i||null==(s=i.vr)?void 0:s[360])&&(t.crossOrigin=zr.xv),t.useCredentials=t.crossOrigin===zr.Cv,ji(n)&&!t.timeServer&&(t.timeServer=n),t}function IS(t){const i={src:""};if(t&&t.src){if(i.src=hs(t.src),"default"in t&&(i.default=Uc(t.default)),i.kind=function(t){const i=String(t||"").toLowerCase();return Om(i)?i:i?"metadata":"subtitles"}(t.kind),Io(t.format)&&(i.format=t.format),"srclang"in t){const e=t.srclang;"string"==typeof e&&""!==e&&(i.srclang=e)}if("label"in t){const e=t.label;"string"==typeof e&&""!==e&&(i.label=e)}}return i}function SS(t,i){if(rt(t))try{return i.OR(t).sF(t)}catch(t){return}}function ES(t){return ji(t.sources)&&""!==t.sources||Uo(t.sources)&&ji(t.sources.src)}function bS(t){return t.integration===Mh.SPOTX&&!M(t.id)}function LS(t){return"freewheel"===t.integration}function $a(t,i,e){if(void 0===e&&(e=Ts.Lb),lu(t))return{sources:[fw()]};const s=Qi(t);if(s.sources=function(t,i,e){if(da(t))return[yS(t,i,e)];if(fe(t)&&da(t[0])){const s=[];for(const n of t)s.push(yS(n,i,e));return s}return[fw()]}(s.sources,s,i),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,i){if(!fe(t))return[];const e=[];for(let s of t)s=SS(s,i),s&&(ES(s)||bS(s)||LS(s))&&e.push(s);return e}(s.ads,e);0===t.length?delete s.ads:s.ads=t}const n=!Wc(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!fe(t))return[];const i=[];for(let e of t)e=IS(e),""!==e.src&&i.push(e);return i}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=hs(s.poster)),"vr"in s&&(s.vr=function(t){const i=t||{};return i.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(i.stereoMode),{panoramaMode:oS(i.panoramaMode,Boolean(i[360])),stereoMode:i.stereoMode?hS(i.stereoMode):iS.NONE,nativeVR:Boolean(i.nativeVR)}}(s.vr));if("analytics"in s||(null==i?void 0:i.analytics)){const t=gw(s.analytics),e=i&&i.analytics||[];s.analytics=function(t,i){const e=Qi(t);for(const s of i){const i=!t.some((t=>t.integration===s.integration));i&&s.integration!==rS&&e.push(s)}return e}(t,e)}return"mutedAutoplay"in s&&(s.mutedAutoplay=Tw(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=ka(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}r();var kS=!(li.UE&&!li.FE),yu=self.console;function xS(t){if(Uo(t))try{return JSON.stringify(t)}catch(t){}return t}function CS(t){return t.map(xS).join(" ")}function OS(t){const i=yu&&yu[t];return i?i.bind&&kS?i.bind(yu):function(){for(var i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];yu[t](CS(e))}:void 0}var jS=OS("log")||h,Ii=OS("warn")||jS.bind(void 0,"WARNING:"),Ja=OS("error")||jS.bind(void 0,"ERROR:"),zS=(()=>{const t=yu&&yu.assert;return t?t.bind&&kS?t.bind(yu):function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];yu.assert(t,CS(e))}:function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];t||Ja("Assertion failed:",...e)}})();r(),r(),r();var PS=function(){function t(t){this.nF=t}return t.prototype.rF=function(t){var i,e,s,n,r,h,o,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.nF.charAt(64);for(i=0;i<t.length;i+=4)e=(o=this.nF.indexOf(t.charAt(i))<<18|this.nF.indexOf(t.charAt(i+1))<<12|(r=this.nF.indexOf(t.charAt(i+2)))<<6|(h=this.nF.indexOf(t.charAt(i+3))))>>>16&255,s=o>>>8&255,n=255&o,a[i/4]=String.fromCharCode(e,s,n),64===h&&(a[i/4]=String.fromCharCode(e,s)),64===r&&(a[i/4]=String.fromCharCode(e));return a.join("")},t.prototype.hF=function(t,i){var e,s,n,r,h,o,a,u=[],c="";if((o=t.length%3)>0)for(;o++<3;)c+=this.nF.charAt(64),t+="\0";for(o=0;o<t.length;o+=3)s=(e=t.charCodeAt(o)<<16|t.charCodeAt(o+1)<<8|t.charCodeAt(o+2))>>18&63,n=e>>12&63,r=e>>6&63,h=63&e,u[o/3]=this.nF.charAt(s)+this.nF.charAt(n)+this.nF.charAt(r)+this.nF.charAt(h);return a=(a=u.join("")).slice(0,a.length-c.length),i||(a+=c),a},t.nh=new t(function(){var t,i,e,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(i=r[t],e=0;e<i.length;e+=1)s=i.charAt(e),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.oF=new t(function(t){return t.rF("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.nh)),t}();function BS(t){return"string"==typeof t}function RS(t){return"number"==typeof t}r(),r(),r();var US={}.toString;var ti,QS=Array.isArray||function(t){return"[object Array]"===US.call(t)};function Qn(t,i){return QS(t)&&t.every(i)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf"}(ti||(ti={}));var _l,FS=C.keys(ti).map((function(t){return ti[t]}));function YS(t){return-1!==FS.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview"}(_l||(_l={}));var GS,WS=C.keys(_l).map((function(t){return _l[t]}));function VS(t){return-1!==WS.indexOf(t)}function HS(t){try{var i=PS.oF.rF(t),e=JSON.parse(i);if(!function(t,i){var e,s=function(t){return"object"==typeof t&&null!==t}(t),n=BS(t.key),r=BS(t.customer_id),h=RS(t.generation_date),o=RS(t.expiration_date),a=Qn(t.domains_page,BS),u=Qn(t.domains_source,BS),c=Qn(t.sdks,i?YS:BS),l=function(t){return"boolean"==typeof t}(t.send_impression);t.features?e=Qn(t.features,i?VS:BS):(e=!0,t.features=[]);if(!(s&&n&&r&&h&&o&&a&&u&&c&&l&&e))return!1;return!0}(e,!1))throw new k("The provided license could not be decoded correctly.");return e}catch(t){throw new k("The provided license could not be decoded correctly.")}}function qS(){return GS||(GS={Iu:pp.href,aF:J.parent&&J.parent!==s,uF:ZS()}),GS}var De,XS=["http:","https:","ftp:","ws:","wss:"];function ZS(){var t;try{if(null==J?void 0:J.top)return J.top.location.href}catch(t){}return null==J||null==(t=J.document)?void 0:t.referrer}!function(t){t[t.cF=0]="cF",t[t.lF=1]="lF",t[t.dF=2]="dF"}(De||(De={}));var KS,Cl=class{constructor(t,i,e,s,n=[],r="",h=Date.now(),o=[],a=!0){this.fF=t,this._F=i,this.gF=e,this.wF=s,this.AF=n,this.vF=r,this.mF=h,this.pF=o,this.yF=a}};!function(t){t.lF="expired",t.MF="invaliddomain",t.TF="invalidsource",t.NF="invalidfeature",t.ha="error"}(KS||(KS={}));var JS=class t{DF(t,i){let e=[];da(t.sources)?e=[t.sources]:fe(t.sources)&&(e=t.sources),this.IF(t,e,i),this.SF(e,i)}IF(t,i,e){if(lu(t)||0===e.gF.length||iE(e.gF))return;if(!i.every((t=>this.EF(t,e)))){const t="invalidsource",i=Kt.bF(t);throw new Ri($S(t),i)}}SF(t,i){for(const e of t)qc(e)&&lw(e)&&this.LF([_l.HESP],i)}kF(i){return this.xF(i.pF)&&this.CF(i)?t.OF(i.wF)?0:1:2}LF(t,i){for(const e of t)if(!ks(i.AF,e)){const t="invalidfeature",i=Kt.jF(t,e);throw new Ri($S(t),i)}}xF(t){return 0===t.length||t.some((t=>this.zF(t)))}zF(t){return"web"===function(t){switch(t){case ti.ANDROID:return ep.RS;case ti.ANDROIDTV:case ti.FIRETV:return ep.US;case ti.IOS:return ep.QS;case ti.TVOS:return ep.FS;case ti.CHROMECAST:case ti.CHROMECASTCAF:return ep.YS;default:return ep.PS}}(t)}static OF(t){const i=Number(new Date);return!!t&&i<=t}CF(t){return!(this.PF&&0!==t._F.length&&!iE(t._F))||!!(this.PF&&this.BF(t._F)&&this.RF(t._F))}BF(t){return eE(this.GL.Iu,t)}RF(t){if(!this.GL.aF)return!0;if(this.UF)return!0;const i=this.QF();return!!i&&eE(i,t)}QF(){if(!this.GL.aF)return;const t=$l.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.GL.uF?this.GL.uF:void 0}EF(i,e){return!!t.FF(i,e.gF)}static FF(t,i){return eE(this.YF(t),i)}static YF(t){return ji(t)?t:qc(t)&&t.src||""}constructor(t,i,e){this.UF=t,this.GF=i,this.GL=e,this.PF=nE(this.GL)}};function $S(t){switch(t){case"invaliddomain":return ue.LICENSE_INVALID_DOMAIN;case"invalidsource":return ue.LICENSE_INVALID_SOURCE;case"expired":return ue.LICENSE_EXPIRED;case"invalidfeature":return ue.LICENSE_INVALID_FEATURE;case"error":return ue.LICENSE_ERROR}}function tE(t,i){let e=t,s=i;if(!e)return!1;if(s=s.trim(),"*"===s)return!0;if(e=e.replace(/\.+$/,""),s===e)return!0;const n="\\.",r="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",h="(\\*|"+r+")",o=new RegExp("ip-range\\("+h+n+h+n+h+n+h+"\\)"),a=s.match(o),u=t=>"*"===t?"("+r+")":t;if(null!==a&&5===a.length){const t=new RegExp("^"+a[1]+n+u(a[2])+n+u(a[3])+n+u(a[4])+"$");return null!==e.match(t)}return s="."+s,-1!==e.indexOf(s,e.length-s.length)}function iE(t){return t.some((t=>"*"===t))}function eE(t,i){const e=le.Ph(t);if(!sE(e))return!0;for(const s of i){if(tE(e.hostname,s))return!0;if(tE(Jg(t),s))return!0}return!1}function sE(t){return-1!==XS.indexOf(t.protocol)}function nE(t){const i=le.Ph(t.Iu);return sE(i)&&!function(t){return tE(t.hostname,"localhost")}(i)&&!function(t){return tE(t.hostname,"theoplayer.doubleclick.net")}(i)}var Pn,Kt=class{static jF(t,i){return"The requested feature '"+i+"' is not available with the license for this player."}static bF(t){return"invaliddomain"===t?this.WF:"invalidsource"===t?this.VF:"expired"===t?this.HF:"invalidfeature"===t?this.qF:this.XF}};function rE(t){const i=[t.MD,t.ZF,t.KF];switch(t.ZF){case 1:i.push(t.tA);break;case 4:i.push(t.I_),i.push(t.dt);break;case 5:i.push(t.dt)}return i}Kt.XF="The license for this player is invalid.",Kt.HF="The usage license for this video player has expired.",Kt.WF="The current domain is incompatible with the license for this player.",Kt.VF="The provided video source is incompatible with the license for this player.",Kt.qF="The requested feature is not available with the license for this player.",r(),r(),function(t){t[t.JF=1]="JF",t[t.tY=4]="tY",t[t.iY=5]="iY"}(Pn||(Pn={})),r();var Sc=new Array(256);for(let t=0;t<256;t+=1)Sc[t]=(t<16?"0":"")+t.toString(16);function Tn(){const t=Nr(),i=(4294967296*S.random()|0)+t&3029421624,e=(4294967296*S.random()|0)+t&3595553209,s=(4294967296*S.random()|0)+t&1130486254,n=(4294967296*S.random()|0)+t&1284287105;return Sc[255&i]+Sc[i>>>8&255]+Sc[i>>>16&255]+Sc[i>>>24&255]+"-"+Sc[255&e]+Sc[e>>>8&255]+"-"+Sc[e>>>16&15|64]+Sc[e>>>24&255]+"-"+Sc[63&s|128]+Sc[s>>>8&255]+"-"+Sc[s>>>16&255]+Sc[s>>>24&255]+Sc[255&n]+Sc[n>>>8&255]+Sc[n>>>16&255]+Sc[n>>>24&255]}function hE(t){return pn(t.replace(/-/g,""))}function Cu(){return le.n_()}r(),r(),r();var oE,aE="theoplayer-session-id";function uE(){if(!oE){const t=Ht.Kb(aE);t?oE=t:(oE=Tn(),Ht.pz(aE,oE))}return oE}r(),r();var cE=/[^\x00-\x7E]/g;function lE(t){return"\\u"+ta(t.charCodeAt(0).toString(16),4,"0")}var dE="https://license.theoplayer.com";function fE(t){const i=function(t){const i=[];return function(t,i,e){return JSON.stringify(t,i,e).replace(cE,lE)}(t,((t,e)=>{if(Uo(e)){if(-1!==i.indexOf(e))return null;i.push(e)}return e}))}(function(t){return[t.eY,t.Ex,t.fF,t.DT,t.sY,t.nY,t.rY.map(rE)]}(t));return PS.oF.hF(i)}var _E=class{get rY(){return this.gR}hY(){return Boolean(this.sY)}get sY(){return this.oY}async aY(t){if(!(await this.cY.uY()).yF)return;const i={ZF:Pn.JF,KF:Nr(),tA:t};await this.HU(i)}async lY(t,i){const e={ZF:Pn.tY,KF:Nr(),I_:i,dt:t};await this.HU(e)}async dY(t){const i={ZF:Pn.iY,KF:Nr(),dt:t};await this.HU(i)}async HU(t){const i=await this.cY.uY();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.fY.hF(i.fF)&&t.ZF!==Pn.iY||(t.ZF===Pn.JF?this._Y():this.hY()||this._Y(),t.MD=this.bk++,this.gR.push(t),!function(t){return t===Pn.JF||t===Pn.iY}(t.ZF)?this.gR.length>this.gY&&await this.wY():await this.AY())}async AY(t){for(void 0===t&&(t=!1);this.gR.length>0;)await this.wY(t)}async vY(t){const i=await this.cY.uY();return{eY:Nr(),Ex:uE(),fF:this.fY.hF(i.fF)||"dev",DT:this.tx,sY:this.oY,nY:this.mY,rY:t}}async wY(t){void 0===t&&(t=!1);const i=this.gR.splice(0,this.pY),e=await this.vY(i);t?this.yY(e):this.MY(e),this.TY=Cu()}async MY(t){const i=fE(t),e=new ai({Iu:dE,AS:i,NS:!1,pS:$m.Au,vS:{"Content-Type":Zi.Rj},YI:4e3,mS:Vt.POST});try{const t=await this.LS.BI(e);await t.jj()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+i}}yY(t){const i=fE(t);this.LS.yY({Iu:dE,AS:i,_P:Zi.Rj})}_Y(){this.hY()&&this.AY(),this.oY=Tn(),this.bk=0}ln(){Os.NY(this.DY),w(this.IY),this.AY()}constructor(t,i,e,s=PS.nh,n=0,r=1){this.tx=t,this.LS=i,this.cY=e,this.fY=s,this.gY=n,this.pY=r,this.gR=[],this.oY=null,this.TY=0,this.mY="unknown",this.bk=0,this.SY=()=>{Cu()-this.TY>6e4&&this.AY()},this.DY=()=>{this.AY(!0)},Os.EY(this.DY),this.IY=b(this.SY,6e4)}};r(),r(),r();var gE=0;var wE=m,Xh=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,Ws=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;Xh&&Ws||(Xh=function(t){const i=Cu(),e=S.max(0,16-(i-gE)),s=v((()=>t(i+e)),e);return gE=i+e,s},Ws=wE),Xh=Xh.bind(self),Ws=Ws.bind(self);var AE=li.UE||li.Ra&&li.JE<13;function vE(t,i,e){const s=t.getImageData(i,e,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var yt,mE=class{get so(){var t;return null!=(t=this.Oa)?t:this.Oa=function(t){return{drawImage(i){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];return t.bY(i,...s)},texImage2D:(i,e,s,n,r,h)=>t.LY(i,e,s,n,r,h),requestVideoFrameCallback:i=>t.kY(i),cancelVideoFrameCallback:i=>t.xY(i)}}(this)}bY(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];const n=this.CY;return void 0!==n&&(t.drawImage(n,...e),!0)}LY(t,i,e,s,n,r){let h=this.CY;return void 0!==h&&(AE&&(h=this.OY(h)),t.texImage2D(i,e,s,n,r,h),!0)}kY(t){const i=this.jY++,e=this.zY(t,i);return this.PY.set(i,{BY:t,RY:e}),i}xY(t){const i=this.PY.get(t);void 0!==i&&(this.PY.delete(t),i.RY())}zY(t,i){const e=this.CY;if(void 0===e)return h;if(e instanceof HTMLVideoElement&&e.requestVideoFrameCallback){const s=e.requestVideoFrameCallback(((e,s)=>{this.PY.delete(i),t(e,s)}));return()=>e.cancelVideoFrameCallback(s)}{let e;const s=n=>{this.UY()?(this.PY.delete(i),this.QY=!1,t(n,void 0)):e=Xh(s)};return e=Xh(s),()=>Ws(e)}}UY(){return(!this.h.V_||this.QY)&&!this.h.fg&&this.h.og>=he.Uv}OY(t){let i=this.FY;void 0===i&&(i=c.createElement("canvas"),this.FY=i);const e=i.getContext("2d"),s=this.h,n=s.pg,r=s.wg,h=i.width,o=i.height;e.clearRect(0,0,i.width,i.height),h===n&&o===r||(i.width=n,i.height=r),e.drawImage(t,0,0,n,r);let a=!1;return n>0&&vE(e,n-1,0)&&(i.width=h,a=!0),r>0&&vE(e,0,r-1)&&(i.height=o,a=!0),a&&e.drawImage(t,0,0,n,r),i}ln(){this.PY.forEach((t=>t.RY())),this.PY.clear(),this.h.hn(t.SA,this.YY),this.h.hn(t.FA,this.GY),this.CY=void 0,this.FY=void 0}constructor(i){this.CY=void 0,this.Oa=void 0,this.FY=void 0,this.PY=Kn(),this.jY=1,this.QY=!0,this.GY=()=>{this.QY=!0},this.YY=()=>{this.CY=this.h.Cg(),this.PY.forEach(((t,i)=>{t.RY(),t.RY=this.zY(t.BY,i)}))},this.h=i,this.h.dn(t.SA,this.YY),this.h.dn(t.FA,this.GY),this.YY()}};r(),r(),r(),(yt||(yt={})).un="dimensionchange";var pE=class extends d{constructor(t,i){super(yt.un),this.width=t,this.height=i}};r(),r();var yE,ME=class{constructor(t,i){this._e=t,this.BY=i}},TE=class extends ME{get fu(){return this.WY}get lu(){return this.VY}ln(){this.HY.disconnect()}constructor(t,i){super(t,i),this.WY=0,this.VY=0,this.qY=t=>{if(t.length>0){const i=t[t.length-1].contentRect;this.VY=i.width,this.WY=i.height,this.BY(this.VY,this.WY)}},this.HY=new J.ResizeObserver(this.qY),this.HY.observe(this._e)}};r(),r();var NE=["Webkit","Moz","O","ms"],DE=(()=>{let t=!1;try{if(void 0!==J&&"function"==typeof J.addEventListener){const i=C.defineProperty({},"passive",{get(){t=!0}});J.addEventListener("testPassiveEventSupport",h,i),J.removeEventListener("testPassiveEventSupport",h,i)}}catch(t){}return t})(),IE=Mt();function SE(t){return IE.has(t)||IE.set(t,function(t){const i=(yE||(yE=J&&J.document&&J.document.createElement("span")),yE);if(!i||!i.style)return t;if(void 0!==i.style[t])return t;const e=t.charAt(0).toUpperCase()+t.slice(1);for(const t of NE){const s=t+e;if(void 0!==i.style[s])return s}return t}(t)),IE.get(t)}function EE(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.bottom="0",i.top="0",i.overflow="scroll",i.zIndex="-1",i.visibility="hidden"}function bE(t){const i=t.style;i.position="absolute",i.left="0",i.top="0",i[SE("transition")]="0s"}var LE=class extends ME{ln(){Ws(this.XY),this.XY=0,this.ZY.removeEventListener("scroll",this.KY),this.JY.removeEventListener("scroll",this.KY),rs(this.$Y),s&&s.removeEventListener("resize",this.tG)}get fu(){return this._e.getBoundingClientRect().height||this.WY||0}get lu(){return this._e.getBoundingClientRect().width||this.VY||0}constructor(t,i,e){super(t,i),this.XY=0,this.VY=NaN,this.WY=NaN,this.iG=void 0,this.Gn=()=>{const t=1e5;this.eG.style.width=t+"px",this.eG.style.height=t+"px",this.ZY.scrollLeft=t,this.ZY.scrollTop=t,this.JY.scrollLeft=t,this.JY.scrollTop=t,0===this.JY.scrollTop&&Xh(this.Gn)},this.sG=()=>{const t=this.lu,i=this.fu;this.BY(t,i),this.VY=t,this.WY=i,this.Gn(),this.XY=0},this.KY=()=>{if(this.XY)return;const t=this.lu,i=this.fu;t===this.VY&&i===this.WY||(this.XY=Xh(this.sG))},this.tG=()=>{this.iG||(this.iG=v(this.nG,66))},this.nG=()=>{this.iG=void 0,this.rG()},this.rG=()=>{this.KY()};const n=function(t,i){return s.getComputedStyle(t,void 0).getPropertyValue(i)||t.style[i]}(t,"position");e||"static"!==n||(t.style.position="relative");const r=c.createElement("div");this.$Y=r,this.ZY=c.createElement("div"),this.eG=c.createElement("div"),this.JY=c.createElement("div"),this.hG=c.createElement("div"),EE(this.ZY),EE(this.JY),bE(this.eG),function(t){bE(t),t.style.width="200%",t.style.height="200%"}(this.hG),r.appendChild(this.ZY),r.appendChild(this.JY),this.ZY.appendChild(this.eG),this.JY.appendChild(this.hG),t.appendChild(r),this.ZY.addEventListener("scroll",this.KY),this.JY.addEventListener("scroll",this.KY),s&&s.addEventListener("resize",this.tG),this.KY()}},kE=class extends i{fn(t){this.HY||("function"==typeof J.ResizeObserver?this.HY=new TE(this._e,this.qY):this.HY=new LE(this._e,this.qY,t))}ln(){this.Uo(),this.HY&&(this.HY.ln(),this.HY=void 0)}get fu(){return this.HY?this.HY.fu:0}get lu(){return this.HY?this.HY.lu:0}constructor(t){super(),this.HY=void 0,this.qY=(t,i)=>{this.jo(new pE(t,i))},this._e=t}};r(),r();var xE=class extends d{constructor(){super(_c.ra)}};r();var CE=function(){if(!c)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(let i of t)if(i[1]in c)return{oG:i[0],aG:i[1],uG:i[2],cG:i[3],Ye:i[4],lG:i[5]}}();r();var OE=class extends d{constructor(){super(_c.ca)}},jE=class t extends i{static ia(t){return Boolean(CE&&c[CE.cG]&&CE.oG in t)}bo(){const t=this._e[CE.oG]();t&&t.then?t.then(this.dG,this.fG):(c.removeEventListener(CE.lG,this.fG),c.addEventListener(CE.lG,this.fG))}To(){const t=c[CE.aG]();t&&t.then?t.then(this.dG,this.fG):(c.removeEventListener(CE.lG,this.fG),c.addEventListener(CE.lG,this.fG))}bR(){const t=this.ls,i=this._e===c[CE.uG];this.ls=i,t!==i&&this.jo(new xE)}LR(){this.jo(new mI)}ln(){this.Uo(),c.removeEventListener(CE.Ye,this.dG),c.removeEventListener(CE.lG,this.fG)}constructor(i){super(),this.ls=!1,this.dG=()=>this.bR(),this.fG=()=>this.LR(),this._e=i,this.ta=t.ia(i),c.addEventListener(CE.Ye,this.dG),this.bR()}},zE=class t extends i{static ia(t){return li.Ra&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}bo(){this._e.webkitSupportsPresentationMode&&this._e.webkitSupportsPresentationMode("fullscreen")?li.Ra?requestAnimationFrame((()=>this._e.webkitSetPresentationMode("fullscreen"))):this._e.webkitSetPresentationMode("fullscreen"):this._e.webkitEnterFullscreen()}To(){this._e.webkitSupportsPresentationMode&&this._e.webkitSupportsPresentationMode("inline")?this._e.webkitSetPresentationMode("inline"):this._e.webkitExitFullscreen()}bR(){const t=this.ls;let i;i=this._e.webkitPresentationMode?"fullscreen"===this._e.webkitPresentationMode:Boolean(this._e.webkitDisplayingFullscreen),this.ls=i,t!==i&&this.jo(new xE)}ln(){this.Uo(),this._e.removeEventListener("webkitbeginfullscreen",this.dG),this._e.removeEventListener("webkitendfullscreen",this.dG),this._e.removeEventListener("webkitpresentationmodechanged",this.dG)}constructor(i){super(),this.ls=!1,this.dG=()=>this.bR(),this._e=i,this.ta=t.ia(i),this._e.addEventListener("webkitbeginfullscreen",this.dG),this._e.addEventListener("webkitendfullscreen",this.dG),this._e.addEventListener("webkitpresentationmodechanged",this.dG),this.bR()}},PE=class extends i{get ta(){return!!this._G&&this._G.ta}get ls(){return this.IR}bo(){this._G?this._G.bo():this.jo(new mI)}To(){for(const t of this.gG)t.ls&&t.To()}wG(t){this._G=t}AG(t){this.gG.push(t),t.dn(_c.ra,this.bR),t.dn(_c.ha,this.Ds),this.bR()}vG(t){Hc(this.gG,t),t.hn(_c.ra,this.bR),t.hn(_c.ha,this.Ds)}mG(){for(const t of this.gG)if(t.ls)return!0;return!1}Gn(){this._G=void 0,this.IR=!1;const t=this.gG.slice();for(const i of t)this.vG(i),i.ln();this.bR()}ln(){this.Uo(),this.Gn()}constructor(...t){super(...t),this.gG=[],this._G=void 0,this.IR=!1,this.bR=()=>{const t=this.IR,i=this.mG();t!==i&&(this.IR=i,this.jo(new xE))}}},BE=class extends i{get ta(){return!!this.pG&&this.yG.ta}get ls(){return this.yG.ls}bo(){this.pG&&this.yG.bo()}To(){this.yG.To()}MG(){this.yG.dn([_c.ra,_c.ca],this.bR),this.yG.dn(_c.ha,this.Ds)}TG(){this.yG.hn([_c.ra,_c.ca],this.bR),this.yG.hn(_c.ha,this.Ds)}Hn(){const t=this.yG,i=this.h.xg();if(t===i)return;this.oa=!0;const e=this.ls,s=this.ta;e&&this.To(),this.TG(),this.yG=i,this.MG(),e&&!this.ls&&this.ta?this.bo():this.To(),this.oa=!1,s!==this.ta&&this.jo(new OE),e!==this.ls&&this.jo(new xE)}ln(){this.Uo(),this.TG(),this.h.hn(t.DA,this.NG)}constructor(i,e){super(),this.oa=!1,this.NG=()=>this.Hn(),this.bR=t=>{this.oa||this.jo(t)},this.h=i,this.pG=e,this.yG=new Th,this.MG(),this.h.dn(t.DA,this.NG),this.Hn()}};r(),r(),r(),r(),r(),r(),r(),l_(),r();var RE,W=class extends Ga{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=t}};function UE(t){return function(t){return new _o({start(i){for(const e of t)i.enqueue(e);i.close()}})}([t])}function QE(t){return UE(function(t){return new A(t)}(t))}function FE(t,i){return function(t,i){let e=i;const s=t.getReader(),n=new $s,r=()=>{o();const t=new Eu;s.cancel(t).catch(h),n.eL(t)},o=()=>{e&&(e.Zf(r),e=void 0)};e&&(e.Gf?r():e.Xf(r));const a=[],u=t=>t.done?(o(),Promise.resolve(a)):(a.push(t.value),Promise.resolve(s.read()).then(u));return Promise.resolve(s.read()).then(u).then((t=>{o(),n.iL(t)}),(t=>{o(),n.eL(t)})),n.sL}(t,i).then((t=>fn(t).buffer))}function YE(t,i){let e=i;const{readable:s,writable:n}=new Eh,r=n.getWriter(),o=()=>{e&&e.i_()};return r.closed.then(o,o),t.then((t=>(e=void 0,r.releaseLock(),t.pipeTo(n).catch(h))),(t=>(e=void 0,r.releaseLock(),n.abort(t).catch(h)))),s}function GE(t){const{readable:i,writable:e}=new Eh;return t.pipeTo(e,{preventCancel:!0}).catch((i=>{let e;e=Gr(i)?i[0]===i[1]||Er(i[0])&&Er(i[1])?i[0]:new W(i):i,t.cancel(e).catch(h)})),i.tee()}function WE(t){return zc(new A(t))}function VE(t){return QA(t).buffer}r(),function(t){t[t.iS=0]="iS",t[t.DG=1]="DG"}(RE||(RE={}));var HE="content-type",qE="text/plain;charset=UTF-8",XE=class{Aj(t){return this.kS(t).then(JSON.parse)}xO(t,i){switch(t){case $m.$I:return this.jj(i);case $m.tS:return this.Aj(i);case $m.iS:return this.IG();case $m.Au:return this.kS(i);default:throw new _}}};function ZE(t,i,e){if(t instanceof XE)return t;if(t instanceof _o)return function(t,i){return new JE({$w:0,IG:t,_P:KE(i)})}(t,e);const s=KE(e),n=Promise.resolve(t).then((t=>function(t,i){if(t){if("string"==typeof t)return{$w:$m.Au,AS:t,_P:i||qE};if(t instanceof ArrayBuffer||wa(t))return{$w:$m.$I,AS:rb(t),_P:i};if(rt(t)||Gr(t))return{$w:$m.tS,AS:t,_P:i};throw new _("Unsupported BodyInit type")}return{$w:$m.Au,AS:null,_P:i}}(t,s)));return new JE({$w:1,sL:n,SG:i})}function KE(t){return(t.get(HE)||"").toLowerCase()}var JE=class t extends XE{get EG(){return this.bG}LG(){return this.kG.sL}kS(t){return this.xG($E,t)}Aj(t){return this.xG(ib,t)}jj(t){return this.xG(sb,t)}IG(){return this.CG(function(t){return 0===t.$w?t.IG:YE(t.sL.then(nb).then(QE),t.SG)}(this.OG))}xG(t,i){if(this.bG)return Promise.reject(new _("Already used"));this.bG=!0;const e=t(this.OG,i);return this.kG.e_(e.then(h)),e}CG(t){if(this.bG)throw new _("Already used");if(t.locked)throw new _("Body stream is locked");this.bG=!0;const i=new Eh,e=Promise.resolve(t.pipeTo(i.writable));return this.kG.e_(e),i.readable}jG(t){this.OG=t,1===t.$w&&t.sL.catch(h)}zG(){if(this.bG)throw new _("Already used");const i=function(t){if(0===t.$w){const[i,e]=t.IG.tee();return[{$w:t.$w,IG:i,_P:t._P},{$w:t.$w,IG:e,_P:t._P}]}{const[i,e]=t.SG.s_();return[{$w:t.$w,sL:t.sL,SG:i},{$w:t.$w,sL:t.sL,SG:e}]}}(this.OG),e=i[0],s=i[1];return this.jG(e),new t(s)}constructor(t){super(),this.bG=!1,this.kG=new $s,this.kG.sL.catch(h),this.jG(t)}};function $E(t,i){return 0===t.$w?FE(t.IG,i).then(WE):(i&&t.SG.e_(i),G(t.sL.then(tb),t.SG))}function tb(t){switch(t.$w){case $m.Au:return Promise.resolve(t.AS||"");case $m.$I:return Promise.resolve(t.AS).then(WE);case $m.tS:return Promise.resolve(t.AS).then(JSON.stringify)}}function ib(t,i){return 0===t.$w?$E(t,i).then(JSON.parse):(i&&t.SG.e_(i),G(t.sL.then(eb),t.SG))}function eb(t){return t.$w===$m.tS?Promise.resolve(t.AS):tb(t).then(JSON.parse)}function sb(t,i){return 0===t.$w?FE(t.IG,i):(i&&t.SG.e_(i),G(t.sL.then(nb),t.SG))}function nb(t){switch(t.$w){case $m.$I:return Promise.resolve(t.AS);case $m.Au:case $m.tS:return tb(t).then(VE)}}function rb(t){return t instanceof ArrayBuffer?t:nt(it(t)).buffer}var hb=class extends XE{get EG(){return this.BG.EG}LG(){return this.BG.LG()}kS(t){return this.BG.kS(t)}Aj(t){return this.BG.Aj(t)}jj(t){return this.BG.jj(t)}IG(){return this.BG.IG()}zG(){return this.BG.zG()}constructor(t){super(),this.BG=t}};function rr(t){return t.FI>=200&&t.FI<=299||304===t.FI}var Ah=class t extends hb{JM(t){return this.xO(this.pS,t)}Lm(){return new t({JM:this.zG(),BI:this.BI},this)}constructor(t,i){let e,s,n,r,h;i?(e=i.vS,s=i.pS,n=i.FI,r=i.vj,h=i.UG):(e=[],s=$m.Au,n=200,r="OK",h=!1);const o=t.BI,a=new Sh(t.vS||e),u=t.pS||s,c=t.xS||(i&&i.BI===o?i.xS:o.Iu),l=i?i.BG:null;super(ZE(void 0!==t.JM?t.JM:l,t.SG||new Z_,a)),this.vS=a,this.BI=o,this.xS=c,this.pS=u,this.FI=void 0!==t.FI?t.FI:n,this.vj=void 0!==t.vj?String(t.vj):r,this.UG=t.UG||h}},ob=class{BI(i){const e=function(i){return new Ah({JM:null,vS:{},BI:i,xS:i.Iu,pS:i.pS,FI:0,vj:t.zA})}(new ai(i));return Promise.resolve(e)}yY(t){}ln(){}};var ab=class t{static get QG(){return t.FG||(t.FG=new t(new ob)),t.FG}BI(t){const i=this.YG(t);return this.GG.BI(i)}yY(t){return this.GG.yY(this.WG(t))}YG(i){let e=new ai(i);if(!this.VG){const i=t.HG(e.Iu);e=new ai({Iu:i},e)}return e}WG(i){let e=i.Iu;return this.VG||(e=t.HG(e)),{Iu:e,AS:i.AS}}static HG(t){return le.qG&&Lt(t,"http://")?t.replace(":","s:"):t}ln(){this.GG.ln()}constructor(t,i=!0){this.GG=t,this.VG=i}};function ub(t){let i;return{get url(){return t.Iu},get method(){return t.mS},get headers(){return i||(i=t.vS.eS()),i},get body(){return t.AS},get useCredentials(){return t.NS},get type(){return t.$w},get subType(){return t.MS},get mediaType(){return t.TS},get responseType(){return t.pS}}}function cb(t){switch(t.toLowerCase()){case"arraybuffer":return $m.$I;case"json":return $m.tS;case"stream":return $m.iS;default:return $m.Au}}function lb(t){switch(t.toUpperCase()){case"POST":return Vt.POST;case"PUT":return Vt.PUT;case"DELETE":return Vt.DELETE;case"HEAD":return Vt.HEAD;case"OPTIONS":return Vt.OPTIONS;default:return Vt.GET}}function db(t){switch(t.toLowerCase()){case"manifest":return Qu.rS;case"segment":return Qu.hS;case"preload-hint":return Qu.oS;case"content-protection":return Qu.aS;default:return Qu.Hv}}function fb(t){switch(t.toLowerCase()){case"initialization-segment":return is.uS;case"fairplay-license":return is.cS;case"fairplay-certificate":return is.lS;case"widevine-license":return is.dS;case"widevine-certificate":return is.fS;case"playready-license":return is._S;case"clearkey-license":return is.gS;case"aes128-key":return is.wS;default:return is.Hv}}function _b(t){switch(t.toLowerCase()){case"audio":return en.Gv;case"video":return en.Yv;case"text":return en.Au;case"image":return en.Vv;default:return en.Hv}}ab.FG=void 0,r(),r(),r();var gb=class{get XG(){return this.ZG.sL}get so(){return this.Oa||(this.Oa=this.KG()),this.Oa}get JG(){return this.$G}get tW(){return!this.$G}get iW(){return this.eW>0}get UI(){return this.QI}_T(){this.$G=!0,this.ZG.iL(null)}sW(){this.ZG.eL(new W(this.nW))}rW(t){if(!this.tW)throw new _("Cannot respond more than once");if(!Uo(t))throw new _("Expected valid response");this.QI=this.hW(t),this._T()}oW(){try{const t=this.aW(this.so);t?this.uW(t):this.iW||this.JG||this._T()}catch(t){this.nW.push(t),this.sW()}}uW(t){if(this.JG)throw new k("Request has been redirected or a response already exists");if(nu(t))this.cW(t);else{if("function"!=typeof t)throw new _("Expected promise or function");{const i=new $s,e=t=>{t?i.eL(t):i.iL(void 0)};try{const s=t(e);nu(s)&&i.e_(s)}catch(t){i.eL(t)}this.cW(i.sL)}}}async cW(t){try{this.eW++,await t,this.eW--,this.iW||this.JG||(this.nW.length?this.sW():this._T())}catch(t){this.eW--,this.nW.push(t),this.iW||this.JG||this.sW()}}constructor(t,i){this.lW=t,this.aW=i,this.ZG=new $s,this.nW=[],this.Oa=void 0,this.$G=!1,this.QI=void 0,this.eW=0}},wb=class t extends gb{get AS(){return this.dW}get vS(){return this.lW.vS}get BI(){return this.lW.BI}get UI(){return this.QI}get FI(){return this.lW.FI}get vj(){return this.lW.vj}get Iu(){return this.lW.xS}static fW(t,i,e){const s=void 0===t.body?e:t.body;return new Ah({JM:s,BI:i.BI,pS:i.BI.pS,vS:t.headers,FI:t.status,vj:t.statusText,xS:t.url,UG:!0},i)}KG(){return function(t){let i;const e=ub(t.BI);return{get closed(){return!t.tW},get request(){return e},get url(){return t.Iu},get status(){return t.FI},get statusText(){return t.vj},get headers(){return i||(i=t.vS.eS()),i},get body(){return t.AS},respondWith:i=>t.rW(i),waitUntil:i=>t.uW(i)}}(this)}hW(i){return t.fW(i,this.lW,this.dW)}constructor(t,i,e){super(t,i),this.dW=e,this.oW()}};r();var Ab=class extends gb{get AS(){return this.lW.AS}get tW(){return this._W&&!this.$G}get vS(){return this.lW.vS}get mS(){return this.lW.mS}get gW(){return this.wW}get UI(){return this.QI}get pS(){return this.lW.pS}get YI(){return this.lW.YI}get yS(){return this.lW.yS}get $f(){return this.lW.$f}get $w(){return this.lW.$w}get MS(){return this.lW.MS}get TS(){return this.lW.TS}get Iu(){return this.lW.Iu}get NS(){return this.lW.NS}get DS(){return this.lW.DS}KG(){return function(t){let i;return{get url(){return t.Iu},get method(){return t.mS},get headers(){return i||(i=t.vS.eS()),i},get body(){return t.AS},get closed(){return!t.tW},get useCredentials(){return t.NS},get type(){return t.$w},get subType(){return t.MS},get mediaType(){return t.TS},get responseType(){return t.pS},redirect:i=>t.AW(i),respondWith:i=>t.rW(i),waitUntil:i=>t.uW(i)}}(this)}hW(t){const i=this.lW.AS,e=new Ah({JM:i,vS:{},BI:this.lW,xS:this.lW.Iu,pS:this.lW.pS,FI:200,vj:"OK"});return wb.fW(t,e,i)}AW(t){if(!this.tW)throw new _("Cannot redirect, already redirected or has a response");let i;i=ji(t)?{url:t}:t,this.wW=function(t,i){return new ai({Iu:void 0===t.url?i.Iu:t.url,mS:void 0!==t.method?lb(t.method):void 0,vS:t.headers,AS:t.body,NS:t.useCredentials,$w:void 0!==t.type?db(t.type):void 0,MS:void 0!==t.subType?fb(t.subType):void 0,TS:void 0!==t.mediaType?_b(t.mediaType):void 0,pS:void 0!==t.responseType?cb(t.responseType):void 0},i)}(i,this.lW),this._T()}constructor(t,i,e){super(t,i),this.wW=void 0,this._W=e,this.oW()}};var Pu=class extends ab{vW(t){this.mW.vW(t)}pW(t){this.mW.pW(t)}yW(t){this.mW.yW(t)}JU(t){this.mW.JU(t)}eQ(t){this.mW.eQ(t)}constructor(t,i=!0){const e=new vb(t);super(e,i),this.mW=e}},vb=class{async BI(t){let i;try{i=await this.MW(t,t.$f)}catch(i){if(i instanceof jt)return await this.TW(i,t.$f);throw i}if(i=await this.NW(i,t.$f),rr(i))return i;throw new Pm(i)}yY(t){return this.GG.yY(t)}async MW(t,i){Pi(i);let e,s=t;for(const t of this.DW.slice()){Pi(i);const n=new Ab(s,t,!e);if(!n.JG)try{await n.XG}catch(t){0;continue}n.gW&&!e?s=n.gW:n.UI&&!e&&(e=n.UI)}return e||this.GG.BI(s)}async TW(t,i){let e;e=t instanceof Pm?t.UI:new Ah({JM:null,BI:t.BI,FI:0,vj:""});const s=await this.NW(e,i);if(s===e)throw t;if(rr(s))return s;throw new Pm(s)}async NW(t,i){let e=t;for(const t of this.IW.slice()){Pi(i);const s=await Promise.resolve(e.Lm().JM(i)),n=new wb(e,t,s);if(!n.JG)try{await n.XG}catch(t){0;continue}e=n.UI||e}return e}vW(t){this.DW.unshift(t)}pW(t){this.DW.push(t)}yW(t){Hc(this.DW,t)}JU(t){this.IW.unshift(t)}eQ(t){Hc(this.IW,t)}ln(){this.GG.ln(),sr(this.DW),sr(this.IW)}constructor(t){this.DW=[],this.IW=[],this.GG=t}};r();var Jo,mb=class{get so(){return this.Oa||(this.Oa=function(t){return{addRequestInterceptor(i){t.vW(i)},removeRequestInterceptor(i){t.yW(i)},addResponseInterceptor(i){t.JU(i)},removeResponseInterceptor(i){t.eQ(i)}}}(this)),this.Oa}vW(t){this.LS.vW(t)}yW(t){this.LS.yW(t)}JU(t){this.LS.JU(t)}eQ(t){this.LS.eQ(t)}constructor(t){this.LS=t}},pb=class extends i{get so(){return this.Oa||(this.Oa=function(t){return{get online(){return t.G_},get estimator(){return function(t){return{get bandwidth(){return t.jz},get roundTripTime(){return t.zz}}}(t.SW)},setEstimator(i){t.EW(function(t){if(!t)return;return{get jz(){return Ag(t.bandwidth)},get zz(){return Ag(t.roundTripTime)},Pz:i=>function(t){if(!t)return;return{bW(i){t.markRequestStart(i)},LW(i){t.markResponseStart(i)},kW(i,e){t.markResponseData(i,e)},xW(i){t.markResponseEnd(i)}}}(t.createMeasurer(ub(i)))}}(i))},addRequestInterceptor(i){t.vW(i)},removeRequestInterceptor(i){t.yW(i)},addResponseInterceptor(i){t.JU(i)},removeResponseInterceptor(i){t.eQ(i)},addEventListener(i,e){t.dn(i,e)},removeEventListener(i,e){t.hn(i,e)}}}(this)),this.Oa}get G_(){return this.OW.G_}get SW(){return this.hR.SW}EW(t){this.hR.EW(t)}vW(t){this.LS.vW(t)}yW(t){this.LS.yW(t)}JU(t){this.LS.JU(t)}eQ(t){this.LS.eQ(t)}ln(){this.Uo(),this.OW.hn(t.PA,this.jW),this.OW.hn(t.zA,this.zW)}constructor(i,e,s){super(e),this.OW=i,this.LS=e,this.hR=s,this.jW=t=>{this.jo(t)},this.zW=t=>{this.jo(t)},this.OW.dn(t.PA,this.jW),this.OW.dn(t.zA,this.zW)}};r(),r(),r(),function(t){t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth"}(Jo||(Jo={})),r();function yb(t,i,e,s,n,r){const h=[];let o=t-S.max(r,1),a=t+n;if(i&&e){const t=et(e,1,5),s=i-t;o=S.min(o,s);const n=i+e+t;a=S.max(a,n)}0!==o&&s.BB(0,o)&&h.push([0,o]);return s.BB(a,1/0)&&h.push([a,1/0]),h}function Mb(t){return t instanceof k&&"QuotaExceededError"===t.name}r();var Tb={type:Jo.BANDWIDTH};function Nb(t){const i=Qi(Tb);return ji(t)?i.type=Db(t):Uo(t)&&function(t){switch(t){case Jo.PERFORMANCE:case Jo.QUALITY:case Jo.BANDWIDTH:return!0;default:return!1}}(t.type)&&(i.type=Db(t.type)),Uo(t)&&Uo(t.metadata)&&(i.metadata=function(t){const i={},e=ka(t.bitrate);return M(e)||(i.bitrate=e),i}(t.metadata)),i}function Db(t){switch(t){case"bandwidth":return Jo.BANDWIDTH;case"performance":return Jo.PERFORMANCE;case"quality":return Jo.QUALITY}}r();var Ib=class extends d{constructor(t){super("PW"),this.BW=t}};r();var Sb=class extends d{constructor(t){super("RW"),this.UW=t}};r();var Eb=class extends d{constructor(t){super("QW"),this.FW=t}},bb=class extends i{YW(t){this.GW=t}get WW(){switch(this.VW.type){case Jo.PERFORMANCE:return 0;case Jo.QUALITY:return 1/0;case Jo.BANDWIDTH:return this.VW.metadata&&void 0!==this.VW.metadata.bitrate?this.VW.metadata.bitrate:Ho.Lb.Dz();default:return Ho.Lb.Dz()}}get so(){return this.Oa}get UW(){return this.VW}set UW(t){this.VW=t,this.jo(new Sb(t))}get BW(){return this.HW}set BW(t){this.HW=t,this.jo(new Ib(t))}get qW(){return S.min(this.HW,this.XW)}get FW(){return this.ZW}set FW(t){this.ZW=t,this.jo(new Eb(t))}get KW(){return this.XW}get SW(){var t;return null!=(t=this.JW)?t:this.GW.dP}EW(t){this.JW=t}$W(t){let i=S.min(t,.8*this.XW);if(i=S.max(10,i),this.XW===i)return!1;const e=this.qW;this.XW=i;const s=this.qW;return s!==e&&this.jo(new Ib(s)),!0}constructor(...t){super(...t),this.Oa=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.UW)},set strategy(i){t.UW=Nb(i)},get targetBuffer(){return t.BW},set targetBuffer(i){const e=ka(i);M(e)||(t.BW=e)},get bufferLookbackWindow(){return t.FW},set bufferLookbackWindow(i){const e=ka(i);M(e)||(t.FW=e<=0?30:e)},get maxBufferLength(){return t.KW}}}(this),this.VW=Tb,this.HW=20,this.ZW=30,this.XW=1/0,this.JW=void 0}};r(),r();var Lb=class extends Js{Qh(){return new kb}constructor(){super("fw")}},kb=class extends d{constructor(){super("change")}};r(),r();var xb=class extends i{ln(){this.Uo();for(const t of this.gR)this.tV.hn(t,this.iV)}constructor(t,i,e){super(e),this.iV=t=>{rg(t)&&Hu((()=>{this.jo(t.so)}))},this.tV=t,this.gR=i;for(const t of this.gR)this.tV.dn(t,this.iV)}},na=class extends ${ln(){this.Uo(),this.tV.g_(this.iV)}constructor(t,i){super(i),this.iV=t=>{rg(t)&&Hu((()=>{this.jo(t.so)}))},this.tV=t,this.tV.c_(this.iV)}};var Cb=class extends ${get Fm(){return this.$m}set Fm(t){if(this.Ym<=t)throw new k("Start time of a clip should be smaller than the end time.");this.$m!==t&&(this.$m=t,this.jo(new Lb))}get Ym(){return this.ep}set Ym(t){if(t<=this.Fm)throw new k("End time of a clip should be larger than the start time.");this.ep!==t&&(this.ep=t,this.jo(new Lb))}get so(){return this.Oa||(this.Oa=function(t){let i,e={get startTime(){return t.Fm},set startTime(i){t.Fm=i},get endTime(){return t.Ym},set endTime(i){t.Ym=i},addEventListener(t,e){i.dn(t,e)},removeEventListener(t,e){i.hn(t,e)}};return i=new na(t,e),e}(this)),this.Oa}Gn(){0===this.$m&&this.ep===1/0||(this.$m=0,this.ep=1/0,this.jo(new Lb))}eV(){return new re([this.Fm,this.Ym],[!0,!0])}constructor(...t){super(...t),this.$m=0,this.ep=1/0}};r();var Ob=class i extends Wi{E_(t){const i=this.sV.eV().SB(t);super.E_(i),this.nV()}k_(){return super.k_()||this.rV}get hV(){return this.dg().length?this.dg():this.sV.eV().ks()}dg(){return re.gn(super.dg()).bn(this.sV.eV()).ks()}Bg(){this.k_()?this.E_(this.hV.start(0)):this.oV(),super.Bg(),this.nV()}async Zh(t,i){Pi(i),this.rV=!1,this.sV.Gn(),await super.Zh(t,i)}ln(){return this.sV.hn("fw",this.aV),this.v_.hn(t.XA,this.lc),this.uV(),super.ln()}Vg(i){switch(i.type){case t.YA:return this.jo(i),this.cV(),!0;case t.FA:case t.MA:return this.jo(i),this.lV(),!0;case t.NA:if(this.dV)return!0}return super.Vg(i)}get dV(){return this.sV.Ym<this.lt}uV(){this.fV&&(Ws(this.fV),this.fV=void 0)}nV(){const t=this.I_,e=this.dV&&t>=this.sV.Ym-i.Hl;this.rV&&!e?(this.rV=!1,this.V_&&this.Bg()):this.rV||!e||this.fg||this._V||(this.rV=!0,this.jo(new Ki(t)),this.Pg())}oV(){if(this.lt===1/0)return;const t=this.hV,e=re.gn(t).SB(this.I_);go(this.I_,e,i.Hl)||this.E_(e)}constructor(e,s){super(e),this.rV=!1,this.fV=void 0,this._V=!1,this.aV=()=>{this.oV(),this.nV()},this.lc=()=>{this.uV(),this.nV();this.dV&&this.I_>=this.sV.Ym-i.gV&&!this.L_&&(this.fV=Xh(this.lc))},this.cV=()=>{this._V=!0},this.lV=()=>{this._V&&(this._V=!1,this.nV())},this.sV=s,this.sV.dn("fw",this.aV),this.v_.dn(t.XA,this.lc)}};Ob.gV=1,Ob.Hl=.001,r();var jb=class{get wV(){return this.AV}set wV(t){this.AV=t}constructor(){this.AV=!1}};r();var zb=class extends Wi{k_(){return!this.AV.wV&&super.k_()}Pg(){this.vV=!0,super.Pg()}Bg(){this.vV=!1,super.Bg()}Vg(i){if(this.AV.wV)switch(i.type){case t.NA:return this.I_=0,this.vV||(this.fg?this.mV=!0:this.Bg()),!0;case t.FA:this.mV&&(this.mV=!1,this.Bg());break;case t.bh:if(this.mV||super.k_())return!0}return super.Vg(i)}constructor(t,i){super(t),this.mV=!1,this.vV=!1,this.AV=i}};r(),r();var Pb=class{get so(){return this.Oa}get $v(){return this.Qo.pV.R_.$v}get im(){return this.Qo.pV.R_.im}get Jv(){return this.Qo.pV.R_.Jv}get yV(){throw new k("Not implemented")}get MV(){throw new k("Not implemented")}get nm(){return this.Qo.pV.R_.nm}get tm(){return this.Qo.pV.R_.tm}get hm(){return this.Qo.pV.R_.hm}constructor(t){this.Qo=t,this.Oa=function(t){return{get currentBandwidthEstimate(){return t.im},get corruptedVideoFrames(){return t.$v},get droppedVideoFrames(){return t.Jv},get totalBytesLoaded(){return t.nm},get bufferedSegments(){return t.hm}}}(this)}};function Bb(t){if(!t||!Vs(t))return{Jv:0,$v:0,tm:0,im:0,nm:0,hm:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const i=t.getVideoPlaybackQuality();return{Jv:i.droppedVideoFrames,$v:i.corruptedVideoFrames||0,tm:i.totalVideoFrames}}return{Jv:t.webkitDroppedFrameCount||0,$v:0,tm:t.webkitDecodedFrameCount||0}}r(),r();var Rb=class extends Js{Qh(){return new Ub}constructor(){super("TV")}},Ub=class extends d{constructor(){super("castingchange")}};r();var Qb=class extends i{get NV(){return this.DV.some((t=>t.NV))}SV(t){this.DV.push(t),t.dn("statechange",this.EV)}get so(){return this.Oa||(this.Oa=function(t){let i;const e={get casting(){return t.NV},addEventListener(t,e){i.dn(t,e)},removeEventListener(t,e){i.hn(t,e)}};return i=new xb(t,["TV"],e),e}(this)),this.Oa}ln(){for(const t of this.DV)t.hn("statechange",this.EV);sr(this.DV)}constructor(...t){super(...t),this.DV=[],this.bV=!1,this.Oa=void 0,this.EV=()=>{const t=this.bV,i=this.NV;t!==i&&(this.bV=i,this.jo(new Rb))}}};r(),r();var Ke=class{static async LV(t,i){try{const e=new ai({Iu:t,pS:$m.Au,mS:Vt.GET}),s=await i.BI(e);return(await s.JM()).trim()}catch(t){return void Er(t)}}static kV(t){try{const i=HS(t);return new Cl(i.key,i.domains_page,i.domains_source,i.expiration_date,i.features,i.customer_id,i.generation_date,i.sdks,i.send_impression)}catch(t){throw new Ri(ue.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static xV(t){void 0===t&&(t=PS.nh),le.Wv("The baked-in license is used. Please update the configuration with your license.");const i=t.rF("F2b-iL'[FL[S"),e=JSON.parse('["F$(:_L50F|aY"]').map((i=>t.rF(i))),s=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map((i=>t.rF(i))),n=Number(new Date(Number(t.rF('COD|aHpHa:p3Ceo3Co""')))),r=JSON.parse("[]").map((i=>t.rF(i)));return new Cl(i,e,s,n,r)}static convertLicenseToDummyLicense(t){return new Cl(t.fF,t._F,t.gF,864e13,t.AF,t.vF,Date.now(),t.pF,t.yF)}};r();var Je=class t{static EQ(){return t.Lb||(t.Lb=Fb.hC()?new Fb:new yl),t.Lb}static tL(i){t.EQ().tL(i)}static SQ(){t.EQ().SQ()}static Kb(i){return t.EQ().Kb(i)}static pz(i,e){t.EQ().pz(i,e)}static CV(i){const e=t.Kb(i);if(void 0!==e)return T(e)}static OV(i){return"true"===t.Kb(i)}};Je.Lb=void 0;var Fb=class extends Je{static hC(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}tL(t){self.localStorage.removeItem(t)}SQ(){self.localStorage.clear()}Kb(t){var i;return null!=(i=self.localStorage.getItem(t))?i:void 0}pz(t,i){self.localStorage.setItem(t,i)}},Yb="https://validate.theoplayer.com/1/",Gb=72e5,Wb=S.floor(14399999*S.random()-Gb),Vb="THEOplayer.license",Hb=class{async jV(){const t=await this.zV(this.PV.license,this.PV.licenseUrl);this.cY.BV(t)}async zV(t,i){let e,s=i;t?e=Ke.kV(t):s||(e=Ke.xV()),s||(s=Yb+e.fF);const n=this.RV();let r;if(e&&(r=this.QV.kF(e),r===De.cF)){if(this.FV(e.wF)&&this.FV(null==n?void 0:n.wF)){const t=await this.YV(s);if(t)return t}return e}if(n){if(this.QV.kF(n)===De.cF){if(this.FV(null==n?void 0:n.wF)){const t=await this.YV(s);if(t)return t}return n}Je.tL(Vb)}const h=await Ke.LV(s,this.LS);let o;if(h){o=Ke.kV(h);if(this.QV.kF(o)===De.cF)return Je.pz(Vb,h),o;Je.tL(Vb)}else if(!this.PF&&e&&r===De.lF&&s===Yb+e.fF)return Ke.convertLicenseToDummyLicense(e);if(!e&&!o)throw new Ri(ue.LICENSE_ERROR,"The given license is invalid!");this.GV(null!=e?e:o,new Ri(ue.LICENSE_ERROR,"The given license is invalid!"))}async DF(t){let i=await this.cY.uY();if(this.FV(i.wF)){var e;const t=null!=(e=this.PV.licenseUrl)?e:Yb+i.fF,s=await this.YV(t);s&&(this.cY.BV(s),i=s)}try{const e=this.QV.kF(i);if(e===De.dF){const t=KS.MF;throw new Ri($S(t),Kt.bF(t))}if(e===De.lF){const t=KS.lF;throw new Ri($S(t),Kt.bF(t))}this.QV.DF(t,i)}catch(t){this.WV(t)}}async LF(t){const i=await this.cY.uY();try{this.QV.LF(t,i)}catch(t){this.WV(t)}}async YV(t){try{const i=await Ke.LV(t,this.LS);if(void 0===i)return;const e=Ke.kV(i);return this.QV.kF(e)===De.cF?(Je.pz(Vb,i),e):void 0}catch(t){return}}FV(t){return!t||Number(new Date)+2592e5+Wb>=t}RV(){const t=Je.Kb(Vb);if(t)return Ke.kV(t)}GV(t,i){this.cY.BV(t),this.WV(i)}WV(t){throw Ja(t.message),this.VV.dY(t.message),t}constructor(t,i,e,s,n,r){this.LS=t,this.QV=i,this.VV=e,this.cY=s,this.PV=n,this.GL=r,this.PF=nE(r)}};r();var qb=class{BV(t){this.HV=t,this.qV.iL()}get XV(){return this.HV}async uY(){return this.HV?Promise.resolve(this.HV):(await this.qV.sL,this.HV)}constructor(){this.qV=new $s}};r(),r();var Xb=class extends Js{Qh(){return new Zb}constructor(){super("fw")}},Zb=class extends d{constructor(){super("change")}};function Kb(t){let i;const e={get fontFamily(){return t.ZV},set fontFamily(i){t.ZV=i},get fontColor(){return t.KV},set fontColor(i){t.KV=i},get fontSize(){return t.JV},set fontSize(i){t.JV=i},get backgroundColor(){return t.$V},set backgroundColor(i){t.$V=i},get windowColor(){return t.tH},set windowColor(i){t.tH=i},get edgeStyle(){return t.iH},set edgeStyle(i){t.iH=i},get marginTop(){return t.eH},set marginTop(i){t.eH=i},get marginBottom(){return t.sH},set marginBottom(i){t.sH=i},get marginLeft(){return t.nH},set marginLeft(i){t.nH=i},get marginRight(){return t.rH},set marginRight(i){t.rH=i},addEventListener(t,e){const s=bo(t,hs);i.dn(s,e)},removeEventListener(t,e){const s=bo(t,hs);i.hn(s,e)}};return i=new bt(e),t.dn(["fw"],(t=>i.jo(t.so))),e}r();var Jb={ZV:void 0,KV:void 0,JV:void 0,$V:void 0,tH:void 0,iH:void 0,hH:void 0,eH:void 0,sH:void 0,nH:void 0,rH:void 0},Xt="THEOplayer.textTrackStyle.",$b=class t extends i{get oH(){return this.aH}get ZV(){return this.aH.ZV}set ZV(t){this.Hn({ZV:t})}get KV(){return this.aH.KV}set KV(t){this.Hn({KV:t})}get JV(){return this.aH.JV}set JV(t){this.Hn({JV:t})}get $V(){return this.aH.$V}set $V(t){this.Hn({$V:t})}get tH(){return this.aH.tH}set tH(t){this.Hn({tH:t})}get iH(){return this.aH.iH}set iH(t){this.Hn({iH:t})}get hH(){return this.aH.hH}get eH(){return this.aH.eH}set eH(t){this.Hn({eH:t})}get sH(){return this.aH.sH}set sH(t){this.Hn({sH:t})}get rH(){return this.aH.rH}set rH(t){this.Hn({rH:t})}get nH(){return this.aH.nH}set nH(t){this.Hn({nH:t})}get so(){return this.Oa||(this.Oa=Kb(this)),this.Oa}Hn(i){this.aH=qr({},this.aH,i),t.uH(this.aH),this.jo(new Xb)}static cH(){let t=qr({},Jb);return t.ZV=Je.Kb(Xt+"fontFamily")||t.ZV,t.KV=Je.Kb(Xt+"fontColor")||t.KV,t.JV=Je.Kb(Xt+"fontSize")||t.JV,t.$V=Je.Kb(Xt+"backgroundColor")||t.$V,t.tH=Je.Kb(Xt+"windowColor")||t.tH,t.iH=Je.Kb(Xt+"edgeStyle")||t.iH,t}static uH(t){Je.pz(Xt+"fontFamily",t.ZV||""),Je.pz(Xt+"fontColor",t.KV||""),Je.pz(Xt+"fontSize",t.JV||""),Je.pz(Xt+"backgroundColor",t.$V||""),Je.pz(Xt+"windowColor",t.tH||""),Je.pz(Xt+"edgeStyle",t.iH||"")}constructor(){super(),this.Oa=void 0,this.aH=t.cH()}};function tL(t,i){var e,s;t.style.marginLeft=(null!=(e=i.nH)?e:0)+"px",t.style.marginRight=(null!=(s=i.rH)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}r(),r(),r(),r();var vl,iL=[t.wh,t.bh,Dt._v,t.XA,t.BA,t.CA,t.YA,t.FA,t.NA,t.RA,t.ZA,t.yA,Dt._w,t.QA,be.ha,un.TA,un.Hb,t.vA,t.AA,t.KA,t.bA,t.kA,t.SA,t.DA],eL={lH:!1};function sL(t){return t.dd.$w===si.tO}r(),(vl||(vl={})).dH="fH";var nL,zs=["fH"];!function(t){t[t._H=0]="_H",t[t.iS=1]="iS",t[t.gH=2]="gH"}(nL||(nL={})),r(),r();var L,rL=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"];(L||(L={})).MU="wH";var X=class extends i{get ot(){throw new k("Not implemented")}get dd(){return this.mC}get oP(){return this.QC}get ht(){throw new k("Not implemented")}async AH(t,i){const e=await this.iC.tC(t.zb,i),s=await e.Gx();return await this.vH(s),s}mH(t){const i=this.Rx;return i?0!==t.gP.length&&t.gP.some((t=>t.Ux.zb===i.Ux)):0!==this.mC.gP.length?t.gP.some((t=>this.mC.gP.some((i=>t.Ux===i.Ux)))):0===t.gP.length||!this.pH}yH(t){return this.MH.yH(t),this.mC=t,Promise.resolve()}TH(t){return!1}async Hf(){this.Uo(),this.QC.removeEventListener("loadedmetadata",this.NH);for(const t of rL)this.QC.removeEventListener(t,this.DH);await this.IH.ln(),this.SH(),await this.MH.Gn(),await this.EH(void 0)}bH(t){t!==this.LH&&(this.LH=t,t?this.kH.iL(void 0):this.kH=new $s)}vH(t){return this.IH.SC((()=>this.EH(t)))}async EH(t){if(t&&!this.QC.src)throw new ae(ue.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.QC.src)throw new ae(ue.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this.LH&&await this.kH.sL;const i=this.Rx;i&&(await i.Fx(this.QC),this.Rx=void 0),t&&(await t.fn(this.QC),this.Rx=t)}Zh(t){return this.IH.SC((()=>this.xH(t)))}xH(t){this.bH(!1);const i=this.eP.q_;this.QC.src=t,this.eP.q_=i}CH(t){return this.IH.SC((()=>this.OH(t)))}OH(t){this.xH(t),this.QC.load()}SH(){this.bH(!1),XT(this.QC)}async jH(){this.Rx&&await this.Rx.Gn()}constructor(t,i,e,s){super(),this.LH=!1,this.kH=new $s,this.pH=!1,this.IH=new te,this.Rx=void 0,this.NH=()=>{this.pH=!0},this.DH=()=>{this.bH(!0)},this.mC=t,this.eP=i,this.QC=i.oP,this.MH=e,this.iC=s,this.QC.addEventListener("loadedmetadata",this.NH);for(const t of rL)this.QC.addEventListener(t,this.DH)}},hL=class extends X{get p_(){return re.gn(this.QC.buffered)}get lt(){return this.QC.duration}get zH(){const t=this.lt;if(!isFinite(t))return!1;const i=this.p_;if(0===i.L)return!1;return t-i.wn(i.L-1)<Vu}get eg(){return this.QC.preload}set eg(t){this.QC.preload=t}get cg(){return re.gn(this.QC.seekable)}get PH(){return this.p_}get BH(){if(Vs(this.QC)&&(this.QC.videoWidth>0||this.QC.videoHeight>0))return this.p_}async YW(){const t=this.dd;switch(t.AP){case zr.xv:case zr.Cv:this.QC.setAttribute("crossorigin",t.AP);break;case zr.Ov:default:this.QC.removeAttribute("crossorigin")}void 0!==t.eg?this.QC.preload=t.eg:this.QC.preload=Sl.Oz,void 0!==t.vP?this.QC.title=t.vP:VT(this.QC),await this.Zh(t.tA),this.MH.En(this,t)}mH(t){return!1}yH(t){return Promise.resolve(void 0)}async Hf(){VT(this.QC),await super.Hf()}static RH(t,i){return!!i.canPlayType&&Boolean(i.canPlayType(t._P))}};r();var vi=class extends d{constructor(i){super(t.BA),this.currentTime=i}};r();var oL,bn=class extends d{constructor(){super(t.CA)}};r(),r(),(oL||(oL={})).UH="QH";var aL=class extends d{constructor(t){super("QH"),this.FH=t}},cr=class extends i{get YH(){return this.GH}WH(t,i){const e=new re([t,i]);this.GH=this.GH.xB(e),this.jo(new aL(e))}VH(t,i){this.GH=this.GH.OB(new re([t,i]))}Gn(){this.GH=re.ZB()}ln(){this.Uo()}constructor(...t){super(...t),this.GH=re.ZB()}};r(),r(),r();var uL=class{start(t){this.qV=t,this.HH()&&this.qH()}pull(){this.Od.length>0?this.XH():this.ZH=!0,this.HH()&&this.qH()}cancel(t){return sr(this.Od),this.jd=0,this.ZH=!1,this._d.cancel(t)}XH(){if(0===this.Od.length)return;const t=this.Od;this.Od=[],this.jd=0,this.ZH=!1,this.qV.enqueue(t)}HH(){if(this.ZH)return!0;return this.KH-this.jd>0}qH(){if(this.JH)return;const t=this._d.read().then(this.$H).catch(this.tq);this.JH=t;const i=()=>{this.JH===t&&(this.JH=void 0)};t.then(i,i)}constructor(t,{size:i=(()=>1),highWaterMark:e=1}){this.Od=[],this.jd=0,this.qV=void 0,this.ZH=!1,this.JH=void 0,this.$H=t=>t.done?(this.XH(),void this.qV.close()):(this.Od.push(t.value),this.jd+=this.iq(t.value),this.ZH&&this.XH(),this.HH()?this._d.read().then(this.$H):void 0),this.tq=t=>{this.XH(),this.qV.error(t)},this._d=t.getReader(),this.iq=i,this.KH=e}};r(),r(),r(),r();var cL,lL=class{nq(t){this.rq.push(t),this.Xm+=t.byteLength}hq(t){if(this.Xm<=t)return this.oq();const i=this.rq;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.slice(0,s);if(s<i.length&&e<t){const r=t-e;0,n.push(FA(i[s],0,r)),e+=r}return{rq:n,Xm:e}}aq(t){const i=this.hq(t);return 1===i.rq.length?i.rq[0]:Jw(i.rq,i.Xm)}oq(){return{rq:this.rq,Xm:this.Xm}}uq(t){if(this.Xm<=t)return this.cq();const i=this.rq;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.splice(0,s);if(i.length>0&&e<t){const s=t-e;0,n.push(FA(i[0],0,s)),i[0]=FA(i[0],s),e+=s}return this.Xm-=e,{rq:n,Xm:e}}lq(t){const i=this.uq(t);return 1===i.rq.length?i.rq[0]:Jw(i.rq,i.Xm)}cq(){const t=this.oq();return this.rq=[],this.Xm=0,t}dq(){const t=1===this.rq.length?this.rq[0]:Jw(this.rq,this.Xm);return this.rq=[],this.Xm=0,t}constructor(){this.rq=[],this.Xm=0}};!function(t){t[t.fq=0]="fq",t[t._q=1]="_q",t[t.gq=2]="gq"}(cL||(cL={}));var dL=class{wq(t,i){}Aq(){}vq(t){this.Od.nq(t),this.mq(!1)}pq(){this.mq(!0)}yq(){return 0!==this.ya||0!==this.Od.Xm}mq(t){for(;0!==this.Od.Xm;){if(!t&&this.Mq>this.Od.Xm)return;switch(this.ya){case 0:this.Tq(t);break;case 1:this.Nq(t);break;case 2:this.Dq(t)}}}Iq(){this.ya=0,this.Mq=8}Tq(t){const i=mo(this.Od.aq(this.Mq)),e=new Eo,s=vt.mT(i,e);if(!s._T)return this.Mq=s.yT,void(t&&this.Mq>this.Od.Xm&&this.Sq(this.Od.Xm));const n=s.pT.$w;let r=s.pT.Xm;0===r&&(r=1/0),this.wq(n,r),this.Eq(n)?this.bq(r):this.Sq(r)}bq(t){this.ya=1,this.Mq=t}Nq(t){const i=mo(this.Od.lq(this.Mq)),e=new Eo,s=vt.gT(i,e,!t);if(!s._T)throw new ul(e.Lu);this.Aq(),this.Lq(s.wT),this.Iq()}Sq(t){this.ya=2,this.Mq=0,this.kq=t}Dq(t){const i=this.Od.uq(this.kq);this.kq-=i.Xm;for(const t of i.rq)this.xq(t);(0===this.kq||t&&this.kq===1/0)&&(this.Aq(),this.Iq())}constructor(){this.Od=new lL,this.ya=0,this.Mq=0,this.kq=0,this.Iq()}};function fL(t){return t instanceof xs}function _L(t){return t instanceof NM}function gL(t){return t instanceof Ls||t instanceof MM}function wL(t){return t instanceof ws}function AL(t){return t instanceof by}function vL(t){return t instanceof cu}function mL(t){return t instanceof Ua}function pL(t){return t instanceof OM}function yL(t){return t instanceof pe}function ML(t){return t instanceof LM}function TL(t){return t instanceof Dn}function NL(t,i){const e=xe(t.boxes,ML);if(e&&e.flags.baseDataOffsetPresent)e.baseDataOffset=e.baseDataOffset.add(i);else for(const e of t.boxes)e instanceof Dn&&e.flags.dataOffsetPresent&&(e.dataOffset=e.dataOffset+i)}r();var DL=class extends dL{start(t){this.qV=t}transform(t){this.vq(t)}flush(){this.pq()}Eq(t){return t===At.iM||t===At.xM||t===At.FM}Lq(t){const i=this.Cq(t);this.qV.enqueue(i)}xq(t){this.qV.enqueue(t)}Cq(t){const i=it(t.JM.JM);switch(t.$w){case"moov":return this.Oq(i);case"sidx":return this.jq(i);case"moof":return this.zq(i)}return i}get Pq(){if(void 0===this.Bq)throw new k("Expected to have found a movie header timescale.");return this.Bq}Rq(t){const i=this.Uq.get(t);if(void 0===i)throw new k("Expected to have found a media header timescale for track ID "+t+".");return i}Oq(t){const i=JM(t);for(let t=0;t<i.boxes.length;t++){const e=i.boxes[t];e instanceof vM?i.boxes[t]=this.Qq(e):e instanceof mM?i.boxes[t]=this.Fq(e):e instanceof NM&&this.Yq(e)}for(const t of i.boxes)t instanceof cu&&this.Gq(t);return i.serialize().join()}Qq(t){this.Bq=t.timescale;const i=EL(Gt.fromNumber(t.duration,!0),this.Pq,this.Wq);return 0!==i.getHighBits()?this.Fq(function(t){return new mM({creation:Gt.fromNumber(t.creationTime,!0),modification:Gt.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:Gt.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.Wq,t.duration=i.toInt(),t)}Fq(t){return this.Bq=t.timescale,t.timescale=this.Wq,t.duration=EL(t.duration,this.Pq,this.Wq),t}Yq(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof Ls?(i=s.trackId,t.boxes[e]=this.Vq(s)):s instanceof MM?(i=s.trackId,t.boxes[e]=this.Hq(s)):s instanceof ws?this.qq(s,i):s instanceof Uy&&this.Xq(s)}}Vq(t){const i=EL(Gt.fromNumber(t.duration,!0),this.Pq,this.Wq);return 0!==i.getHighBits()?this.Hq(function(t){return new MM({creation:Gt.fromNumber(t.creationTime,!0),modification:Gt.fromNumber(t.modificationTime,!0),duration:Gt.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=i.toInt(),t)}Hq(t){return t.duration=EL(t.duration,this.Pq,this.Wq),t}qq(t,i){for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof Hy?t.boxes[e]=this.Zq(s,i):s instanceof qy&&(t.boxes[e]=this.Kq(s,i))}}Zq(t,i){this.Uq.set(i,t.timescale);const e=EL(Gt.fromNumber(t.duration,!0),t.timescale,this.Wq);return 0!==e.getHighBits()?this.Kq(function(t){return new qy({creation:Gt.fromNumber(t.creationTime,!0),modification:Gt.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:Gt.fromNumber(t.duration,!0)},t.language,t.flags)}(t),i):(t.timescale=this.Wq,t.duration=e.toInt(),t)}Kq(t,i){return this.Uq.set(i,t.timescale),t.timescale=this.Wq,t.duration=EL(t.duration,t.timescale,this.Wq),t}Xq(t){for(const i of t.boxes)i instanceof Py?this.Jq(i):i instanceof By&&this.$q(i)}Jq(t){for(const i of t.entries)i.mediaTime=SL(i.mediaTime,this.Pq,this.Wq),i.segmentDuration=SL(i.segmentDuration,this.Pq,this.Wq)}$q(t){for(const i of t.entries)i.mediaTime=EL(i.mediaTime,this.Pq,this.Wq),i.segmentDuration=EL(i.segmentDuration,this.Pq,this.Wq)}Gq(t){for(let i=0;i<t.boxes.length;i++){const e=t.boxes[i];e instanceof Ua?this.tX(e):e instanceof dM?t.boxes[i]=this.iX(e):e instanceof fM&&(t.boxes[i]=this.eX(e))}}tX(t){const i=this.Rq(t.trackId);t.defaultSampleDuration=SL(t.defaultSampleDuration,i,this.Wq)}iX(t){const i=EL(Gt.fromNumber(t.fragmentDuration,!0),this.Pq,this.Wq);return 0!==i.getHighBits()?this.eX(function(t){return new fM(Gt.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=i.toInt(),t)}eX(t){return t.fragmentDuration=EL(t.fragmentDuration,this.Pq,this.Wq),t}jq(t){let i=$M(t);return i=i instanceof UM?this.sX(i):this.nX(i),i.serialize().join()}sX(t){const i=t.timescale,e=EL(Gt.fromNumber(t.earliestPresentationTime,!0),i,this.Wq);if(0!==e.getHighBits())return this.nX(function(t){return new QM(t.referenceId,t.timescale,Gt.fromNumber(t.earliestPresentationTime,!0),Gt.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.Wq,t.earliestPresentationTime=e.toInt();for(const e of t.references)e.subsegmentDuration=SL(e.subsegmentDuration,i,this.Wq);return t}nX(t){const i=t.timescale;t.timescale=this.Wq,t.earliestPresentationTime=EL(t.earliestPresentationTime,i,this.Wq);for(const e of t.references)e.subsegmentDuration=SL(e.subsegmentDuration,i,this.Wq);return t}zq(t){const i=tT(t),e=i.getSize();for(const t of i.boxes)t instanceof pe&&this.rX(t);const s=i.getSize();if(s!==e){const t=s-e;for(const e of i.boxes)e instanceof pe&&NL(e,t)}return i.serialize().join()}rX(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof LM?(i=this.Rq(s.trackId),this.hX(s,i)):s instanceof EM?t.boxes[e]=this.oX(s,i):s instanceof eu?t.boxes[e]=this.aX(s,i):s instanceof Dn&&this.uX(s,i)}}hX(t,i){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=SL(t.defaultSampleDuration,i,this.Wq))}oX(t,i){const e=EL(Gt.fromNumber(t.baseMediaDecodeTime,!0),i,this.Wq);return 0!==e.getHighBits()?this.aX(function(t){return new eu(Gt.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),i):(t.baseMediaDecodeTime=e.toInt(),t)}aX(t,i){return t.baseMediaDecodeTime=EL(t.baseMediaDecodeTime,i,this.Wq),t}uX(t,i){let e=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=SL(s,i,this.Wq);n.duration=t-e,e=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=IL(n.compositionTimeOffset,i,this.Wq))}}constructor(t){super(),this.Uq=Kn(),this.Wq=t}};function IL(t,i,e){return Gt.fromInt(t,!1).multiply(e).divide(i).toNumber()}function SL(t,i,e){return Gt.fromInt(t,!0).multiply(e).divide(i).toNumber()}function EL(t,i,e){return ts.Cp(t).oy(ts.Op(e,!0)).gy(ts.Op(i,!0)).Vp()}var bL,U,LL,kL=class{cX(t){return t.pipeThrough(new Eh(this.lX))}constructor(t){this.lX=new DL(t)}};function xL(t,i,e){const s=q(t,i);if(s!==e)throw new _("Expected descriptor with tag "+e+", but found "+s)}function CL(t,i){xL(t,i,3);const e=OL(t,i),s=i.Lu+e,n=IA(t,i),r=q(t,i),h=0!=(64&r),o=0!=(32&r),a=31&r;let u,c,l;if(0!=(128&r)&&(u=IA(t,i)),h){c=Ys(t,i,q(t,i))}o&&(l=Ys(t,i,2));const d=function(t,i){xL(t,i,4);const e=OL(t,i),s=i.Lu+e,n=q(t,i),r=q(t,i),h=r>>2,o=0!=(2&r),a=Oc(t,i,3),u=dt(t,i),c=dt(t,i);let l;if(i.Lu<s){const e=function(t,i){return t.getUint8(i.Lu)}(t,i);5===e&&(l=function(t,i){xL(t,i,5);const e=OL(t,i),s=pu(t,i,e);return{dX:5,fX:s}}(t,i))}return i.Em(s),{dX:4,_X:n,gX:h,wX:o,AX:a,vX:u,mX:c,pX:l}}(t,i);return i.Em(s),{dX:3,u:n,yX:u,Iu:c,MX:a,TX:l,NX:d}}function OL(t,i){let e=0;for(let s=0;s<4;s++){const s=q(t,i);if(e=e<<7|127&s,!(128&s))break}return e}function jL(t,i){const e=q(t,i),s=q(t,i),n=q(t,i),r=q(t,i),h=3&q(t,i),o=31&q(t,i),a=[];for(let e=0;e<o;e++){const e=IA(t,i);a.push(pu(t,i,e))}const u=q(t,i),c=[];for(let e=0;e<u;e++){const e=IA(t,i);c.push(pu(t,i,e))}return{DX:e,IX:s,SX:n,EX:r,bX:h,LX:a,kX:c}}function ln(t,i,e){if(e&&i.byte>=e)return;const s=t.Kb(i.byte);return i.byte+=1,s}function zL(t,i){return function(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=256*s+ln(t,i);return s}(t,i,2)}r(),r(),function(t){t[t.xX=3]="xX",t[t.CX=4]="CX",t[t.OX=5]="OX"}(bL||(bL={})),function(t){t[t.jX=64]="jX",t[t.zX=103]="zX",t[t.PX=107]="PX"}(U||(U={})),r(),r(),function(t){t[t.BX=0]="BX",t[t.RX=1]="RX",t[t.zX=2]="zX",t[t.UX=5]="UX",t[t.QX=34]="QX"}(LL||(LL={})),r(),r(),r(),r();var PL=class t{FX(t){this.YX=this.YX.concat(t.YX),this.GX+=t.L}WX(t,i,e){const s=this.GX,n=e-i;n>0&&(this.YX.push({VX:i,HX:e,qX:n,XX:s,ZX:t}),this.GX+=n)}Kb(t){for(const i of this.YX)if(i.XX<=t&&t<i.XX+i.qX)return i.ZX[t+i.VX-i.XX]}KX(t,i){let e=i;for(const i of this.YX){const s=i.HX;for(let n=i.VX;n<s;n+=1,e+=1)t[e]=i.ZX[n]}return e}get L(){return this.GX}set L(t){const i=this.YX;let e=this.GX-t;if(!(t>=this.GX))if(this.GX=t,0!==t)for(let t=i.length-1;t>=0;t-=1){const s=i[t];if(e<=s.qX)return s.HX-=e,s.qX-=e,void(i.length!==t+1&&(i.length=t+1));e-=s.qX}else i.length=0}get JM(){const t=new Array(this.GX);let i=0;for(const e of this.YX){const s=e.HX;for(let n=e.VX;n<s;n+=1,i+=1)t[i]=e.ZX[n]}return t}JX(){const t=new A(this.GX);let i=0;for(const e of this.YX){const s=e.HX;for(let n=e.VX;n<s;n+=1,i+=1)t[i]=e.ZX[n]}return t}Lm(i){const e=new t;for(const t of this.YX)e.WX(t.ZX,t.VX,t.HX);return e.hI=i||qr({},this.hI),e}constructor(){this.GX=0,this.YX=[],this.hI={}}};r();var BL,RL=[128,64,32,16,8,4,2,1];function Ui(t,i){const e=S.floor(i.bit/8),s=0==(t.Kb(e)&RL[i.bit%8])?0:1;return i.bit+=1,s}function $n(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=2*s+Ui(t,i);return s}function Lu(t,i){let e=0;for(;0===Ui(t,i)&&e<32;)e+=1;return $n(t,i,e)+2**e-1}function UL(t,i){const e=Lu(t,i);return 1&e?S.floor((e+1)/2):-S.floor(e/2)}function QL(t,i){const e=[],s={byte:1};let n;do{e.push(YL(t,i,s)),n=i.Kb(s.byte)}while(void 0!==n&&128!==n);return e}function FL(t,i){let e,s=0;do{e=ln(t,i),s+=e}while(255===e);return s}function YL(t,i,e){const s=FL(i,e),n=FL(i,e),r=e.byte,h=r+n;return e.byte=h,{$X:t,tZ:s,iZ:n,eZ:r,sZ:h,nZ:i}}!function(t){t[t.rZ=1]="rZ",t[t.hZ=2]="hZ",t[t.oZ=3]="oZ",t[t.aZ=4]="aZ",t[t.uZ=5]="uZ",t[t.cZ=6]="cZ",t[t.lZ=7]="lZ",t[t.dZ=8]="dZ",t[t.fZ=9]="fZ"}(BL||(BL={}));var GL=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function WL(t,i,e){let s=8,n=8;for(let r=0;r<e;r+=1){if(0!==n){n=(s+UL(t,i)+256)%256}s=0===n?s:n}}var VL=class{_Z(){const t=this.gZ;let i=S.max(0,this.wZ+t.length-2);const e=this.AZ,s=e.L;let n=0;for(;i<s;i+=1){const s=e.Kb(i);0===s?n+=1:(3===s&&n>=2&&t.push(i),n=0)}this.wZ=i-t.length}vZ(t){const i=this.gZ;let e=t;for(const t of i){if(!(t<=e))return e;e+=1}return e}Kb(t){if(!(t>this.AZ.L))return t>this.wZ&&this._Z(),this.AZ.Kb(this.vZ(t))}constructor(t){this.gZ=[],this.wZ=0,this.AZ=t}};function HL(t){const i=new VL(t);let e,s,n,r,h,o,a=0,u=0,c=0,l=0;const d=i.Kb(1),f={bit:32};if(Lu(i,f),100===d||110===d||122===d||144===d){const t=Lu(i,f);3===t&&(e=Ui(i,f)),Lu(i,f),Lu(i,f),Ui(i,f);if(1===Ui(i,f))for(let e=0;e<(3!==t?8:12);e+=1){1===Ui(i,f)&&WL(i,f,e<6?16:64)}}const _=Lu(i,f),g=Lu(i,f);if(0===g)Lu(i,f);else if(1===g){Ui(i,f),UL(i,f),UL(i,f);const t=Lu(i,f);for(let e=0;e<t;e+=1)UL(i,f)}Lu(i,f),Ui(i,f);const w=Lu(i,f),A=Lu(i,f),v=Ui(i,f);0===v&&Ui(i,f),Ui(i,f);1===Ui(i,f)&&(a=Lu(i,f),u=Lu(i,f),c=Lu(i,f),l=Lu(i,f));if(1===Ui(i,f)){if(1===Ui(i,f)){const t=$n(i,f,8);if(255===t)s=$n(i,f,16),n=$n(i,f,16);else{const i=GL[t];i&&(s=i[0],n=i[1])}}1===Ui(i,f)&&Ui(i,f);if(1===Ui(i,f)){$n(i,f,3),Ui(i,f);1===Ui(i,f)&&($n(i,f,8),$n(i,f,8),$n(i,f,8))}1===Ui(i,f)&&(Lu(i,f),Lu(i,f)),r=Ui(i,f),1===r&&(h=$n(i,f,32),o=$n(i,f,32),Ui(i,f))}return{width:S.floor(16*(w+1)-2*a-2*u),height:S.floor((2-v)*(A+1)*16-2*c-2*l),lD:s,dD:n,mZ:r?o/(2*h):void 0,pZ:e,yZ:_}}function K(t){const i=em(Rs.ST(t),At.iM);if(!i)return;const e=i.pT.vy,s=[];for(const t of i.tt){const i=t.pT.tN,e=t.ZT.pT.vy;let o,a,u;for(const i of t.ZT.oN.cN.dN._N){const t=qL(i);var n,r,h;if(t)o=null!=(n=t.MZ)?n:o,a=null!=(r=t.TZ)?r:a,u=null!=(h=t.NZ)?h:u}s.push({tN:i,vy:e,MZ:o,TZ:a,NZ:u})}return{vy:e,tt:s}}function qL(t){let i,e,s;if(t.$w===At._M){var n;const e=jL(mo(t.FN.JM),new Eo);i=function(t){return"avc1."+XL(t.IX,2)+XL(t.SX,2)+XL(t.EX,2)}(e),s=null==(n=function(t){if(0===t.LX.length)return;const i=t.LX[0],e=new PL;return e.WX(i,0,i.byteLength),HL(e)}(e))?void 0:n.mZ}else if(t.$w===At.wM||t.$w===At.AM){const e=function(t,i){const e=i.jm(),s=Cn(t,e,8),n=Cn(t,e,2),r=Cn(t,e,1),h=Cn(t,e,5),o=Cn(t,e,32),a=[];for(let i=0;i<6;i++)a.push(Cn(t,e,8));const u=Cn(t,e,8);e.Sm(4);const c=Cn(t,e,12);e.Sm(6);const l=Cn(t,e,2);e.Sm(6);const d=Cn(t,e,2);e.Sm(5);const f=Cn(t,e,3);e.Sm(5);const _=Cn(t,e,3),g=Cn(t,e,16),w=Cn(t,e,2),A=Cn(t,e,3),v=Cn(t,e,1),m=Cn(t,e,2),p=Cn(t,e,8),y=[];for(let i=0;i<p;i++){const i=Cn(t,e,1);e.Sm(1);const s=Cn(t,e,6),n=Cn(t,e,16),r=[];for(let i=0;i<n;i++){const i=Cn(t,e,16),s=pu(t,new Eo(e.Lu>>3),i);e.Sm(8*i),r.push({DZ:i,IZ:s})}y.push({SZ:i,EZ:s,bZ:n,LZ:r})}return{DX:s,kZ:n,xZ:r,CZ:h,OZ:a,jZ:u,zZ:c,PZ:l,BZ:o,RZ:d,UZ:f,QZ:_,FZ:g,YZ:A,GZ:v,WZ:w,bX:m,VZ:p,HZ:y}}(mo(t.VN.JM),new Eo);i=function(t,i){let e=t.toString()+".";switch(i.kZ){case 0:break;case 1:e+="A";break;case 2:e+="B";break;case 3:e+="C";break;default:return}switch(e+=i.CZ.toString()+".",e+=function(t){let i=t;return i=i>>>1&1431655765|(1431655765&i)<<1,i=i>>>2&858993459|(858993459&i)<<2,i=i>>>4&252645135|(252645135&i)<<4,i=i>>>8&16711935|(16711935&i)<<8,i=i>>>16|i<<16,i}(i.BZ).toString(16)+".",i.xZ){case 0:e+="L";break;case 1:e+="H";break;default:return}e+=i.jZ.toString();const s=i.OZ.reduce(((t,i)=>0===t?i:i+1),0);for(let t=0;t<s;t++)e+="."+i.OZ[t].toString(16).toUpperCase();return e}(t.$w,e)}else if(t.$w===At.mM){const e=function(t,i){const e=i.jm(),s=Cn(t,e,8);e.Sm(24);const n=Cn(t,e,8),r=Cn(t,e,8),h=Cn(t,e,4),o=Cn(t,e,3),a=He(t,e),u=Cn(t,e,8),c=Cn(t,e,8),l=Cn(t,e,8),d=Cn(t,e,16),f=new Array(8);for(let i=0;i<d;i++)f[i]=Cn(t,e,8);return{DX:s,qZ:n,XZ:r,ZZ:h,KZ:o,JZ:a,oD:u,aD:c,uD:l,$Z:d,tK:f}}(mo(t.qN.JM),new Eo);i=function(t,i){let e=t.toString()+".";return e+="0"+i.qZ+".",e+=ta(""+i.XZ,2,"0")+".",e+=ta(""+i.ZZ,2,"0")+".",e+=ta(""+i.KZ,2,"0")+".",e+=ta(""+i.oD,2,"0")+".",e+=ta(""+i.aD,2,"0")+".",e+=ta(""+i.uD,2,"0")+".",e+="0"+i.JZ,e}(t.$w,e)}else if(t.$w===At.yM){const e=function(t,i){const e=i.jm();e.Sm(1);const s=Cn(t,e,7),n=Cn(t,e,3),r=Cn(t,e,5),h=He(t,e),o=He(t,e),a=He(t,e),u=He(t,e),c=He(t,e),l=He(t,e),d=Cn(t,e,2);e.Sm(3);const f=He(t,e);let _;return f?_=Cn(t,e,4):e.Sm(4),{DT:s,iK:n,eK:r,sK:h,nK:o,rK:a,hK:u,oK:c,aK:l,uK:d,cK:f,lK:_}}(mo(t.KN.JM),new Eo);i=function(t,i,e){let s=t.toString()+".";if(s+=i.iK+".",s+=""+ta(""+i.eK,2,"0"),s+=(0===i.sK?"M":"H")+".",s+=(1===i.rK?12:10)+".",s+=(1===i.iK?0:i.hK)+".",s+=""+i.oK+i.aK+(1===i.oK&&1===i.aK?i.uK:"0"),e&&e.hD===Ea.ON_SCREEN_COLOURS){const t=e;s+="."+ta(""+t.oD,2,"0")+"."+ta(""+t.aD,2,"0")+"."+ta(""+t.uD,2,"0")+"."+(t.cD?1:0)}return s}(t.$w,e,t.JN)}else{if(t.$w!==At.DM)return(t.$w===At.kM||t.$w===At.LM)&&t.iD?qL(t.iD):void 0;e=function(t){const i=t.NX;switch(i._X){case U.jX:return function(t){var i;if(!(null==(i=t.pX)?void 0:i.fX))return"mp4a.40";const e=function(t,i){let e=Cn(t,i,5);31===e&&(e=32+Cn(t,i,6));const s=Cn(t,i,4);let n;return 15===s&&(n=Cn(t,i,24)),{dK:e,fK:s,_K:n,gK:Cn(t,i,4)}}(mo(t.pX.fX),new iA);return"mp4a.40."+e.dK}(i);case U.zX:return"mp4a.40.2";case U.PX:return"mp4a.40.34"}}(CL(mo(t.zN.JM),new Eo))}return{MZ:i,TZ:e,NZ:s}}function XL(t,i){const e=t.toString(16);return ta(e,i,"0")}function ZL(t,i){const e=Rs.ST(mo(t)),s=function(t,i){let e;for(const n of t.tt){var s;const t=null==(s=n.ED)?void 0:s.ED;if(t){const s=n.pT.tN,r=xe(i.tt,(t=>t.tN===s)),h=So.Cp(t,r.vy);e&&!h.Dp(e)||(e=h)}}return e}(em(e,At.xM),i),n=em(e,At.RM);return{Fm:s.vp(),wK:n.JM}}r();var KL=li.ZE,JL=class extends i{get BW(){return this.HW}set BW(t){this.HW=t}get FW(){return this.ZW}set FW(t){this.ZW=t}get oa(){return this.AK||this.vK.updating}mK(t,i,e){switch(t.$w){case nL._H:case nL.iS:return this.pK((e=>this.yK(t,i,e)),e);case nL.gH:throw new k("Opaque segments are not supported on web.")}}MK(t,i){switch(t.$w){case nL._H:return this.pK((i=>this.TK(t,i)),i);case nL.iS:throw new k("Streaming initialization segments are not supported on web.");case nL.gH:throw new k("Opaque initialization segments are not supported on web.")}}async TK(t,i){this.NK?this.DK=K(mo(t.JM)):(await this.IK(t,void 0,i),KL&&(this.SK=!1,this.EK=t))}async yK(t,i,e){KL&&this.SK&&this.EK&&await this.TK(this.EK,e);try{if(Pi(e),this.NK&&this.DK){const n=await async function(t,i){switch(t.$w){case nL._H:return t;case nL.iS:{const e=await FE(t.JM,i);return Pi(i),{$w:nL._H,JM:new A(e)}}case nL.gH:throw new k("MediaBufferWrapper - Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,e),r=ZL(n.JM,this.DK);var s;t={$w:nL._H,JM:r.wK},i=qr({},i,{Zy:r.Fm+(null!=(s=i.Zy)?s:0)})}await this.IK(t,i,e),this.jo(new d(vl.dH))}finally{t.$w===nL.iS&&t.JM.cancel(new Eu).catch(h)}}async IK(t,i,e){switch(Pi(e),i&&await this.bK(i),t.$w){case nL._H:if(this.LK){const i=this.LK.cX(UE(t.JM));return await this.kK(i,e)}return await this.xK(t.JM);case nL.iS:if(this.LK){const i=this.LK.cX(t.JM);return await this.kK(i,e)}return await this.kK(t.JM,e)}}async kK(t,i){const e=this.CK.p_,s=function(t,i){return void 0===i&&(i=new Kl({highWaterMark:1/0})),new _o(new uL(t,i),{highWaterMark:0})}(t),n=s.getReader();let r=!1;try{for(;;){const t=await Oi(n.read(),i);if(t.done){r=!1;break}Pi(i);const e=fn(t.value);r=!0,await this.xK(e)}}catch(t){if(n.cancel(t).catch(h),r){await this.jK();const t=this.CK.p_.bn(e.EB());for(let i=0;i<t.L;i++)await this.zK(t.yn(i),t.wn(i))}throw t}}PK(t,i){return this.pK((()=>this.BK(t,i)))}async BK(t,i){this.vK.appendWindowStart===t&&this.vK.appendWindowEnd===i||(await this.jK(),this.vK.appendWindowStart=0,this.vK.appendWindowEnd=i,this.vK.appendWindowStart=t)}async bK(t){if(this.vK.timestampOffset!==t.Zy)try{this.vK.timestampOffset=t.Zy}catch(i){await this.jK(),this.vK.timestampOffset=t.Zy}}async xK(t){this.vK.appendBuffer(t),this.RK=!0,await this.UK()}QK(t,i,e){return this.pK((e=>this.zK(t,i,e)),e)}async zK(t,i,e){Pi(e),this.vK.remove(t,i),await this.UK()}UK(){const t=this.CK.p_;return new Promise(((i,e)=>{let s,n=!1,r=()=>{n=!0},h=()=>{n=!1,s="error"},o=()=>{n=!1,s="aborted"},a=()=>{u(),n&&!s?(t.UB(this.CK.p_)||this.jo(new d(vl.dH)),i()):e(new k(s))},u=()=>{this.vK.removeEventListener("update",r),this.vK.removeEventListener("error",h),this.vK.removeEventListener("abort",o),this.vK.removeEventListener("updateend",a)};this.vK.addEventListener("update",r),this.vK.addEventListener("error",h),this.vK.addEventListener("abort",o),this.vK.addEventListener("updateend",a)}))}FK(){return this.pK((()=>this.jK()))}async jK(){if(this.YK.og===Zs.OI){KL&&(this.SK=!0),this.vK.updating&&(this.AK=!0);try{this.vK.abort()}catch(t){0,this.AK=!1}this.oa&&await this.UK().catch(h)}}GK(){return"function"==typeof this.vK.changeType}yH(t){if(this.WK(),this.YK.og===Zs.VK)return;var i;this.HK=t;const e=null!=(i=this.YK.qK(t._P))?i:t._P;this.NK=$L(t._P,this.XK),this.GK()&&!ns(this.XK,e)&&(this.XK=e,this.vK.changeType(this.XK))}ZK(){this.YK.og!==Zs.NA||this.KK||this.oa||(this.vK.timestampOffset=this.vK.timestampOffset,this.YK.JK())}async pK(t,i){this.WK();const e=new Z_;e.e_(this.$K.$f),i&&e.e_(i);try{this.KK=t(e.$f),await this.KK,this.YK.JK(),this.oa&&await this.UK()}finally{this.KK=void 0,e.Hf()}}WK(){if(this.KK)throw new k("Internal error")}async Hf(){this.Uo(),this.$K.i_(),this.KK&&(await this.KK.catch(h),this.KK=void 0),this.vK.removeEventListener("updateend",this.tJ),this.vK.removeEventListener("bufferedchange",this.iJ)}constructor(t,i,e,s,n){var r;if(super(),this.HW=20,this.ZW=30,this.AK=!1,this.RK=!1,this.KK=void 0,this.$K=new Z_,this.SK=!1,this.EK=void 0,this.NK=!1,this.DK=void 0,this.tJ=()=>{this.AK=!1},this.iJ=t=>{t.removedRanges&&this.jo(new d(vl.dH))},this.YK=i,this.CK=t,this.vK=e,this.vK.addEventListener("updateend",this.tJ),this.vK.addEventListener("bufferedchange",this.iJ),this.HK=s,this.XK=n,this.NK=$L(s._P,n),null==(r=i.dd)?void 0:r.eJ){var h;const t=null!=(h=i.dd.sJ)?h:1e5;this.LK=new kL(t)}}};function $L(t,i){return Lt(t,"audio/mp4")&&Lt(i,"audio/mpeg")}r();var tk=class{get p_(){if(this.nJ.og===Zs.VK)return re.ZB();let t=re.gn(this.vK.buffered).bn(new re([0,1/0]));const i=this.rJ;return void 0!==i&&t.L>0&&t.wn(t.L-1)===i&&(t=t.xB(re.qB(i))),t}zH(){return!!this.rJ&&this.p_.IB().ur(this.rJ)}hJ(){const t=this.p_;this.rJ=t.L>0?t.wn(t.L-1):0,this.nJ.oJ()}ZK(){this.rJ=void 0}constructor(t,i){this.rJ=void 0,this.nJ=i,this.vK=t}};function ik(t){const i=t.mI("codecs");return i?i.split(",").map((t=>t.trim())):[]}function ek(t,i){const e=sk(t)||nk(t),s=sk(i)||nk(i);return!e&&!s||t===i}function sk(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function nk(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function rk(t,i){if(t===i)return!0;const e=t.split("."),s=i.split("."),n=e[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,i]=e,[,n,r]=s;if(t!==n)return!1;if(Number(i)!==Number(r))return!1}return!0}function hk(t,i,e,s,n,r,h){const o=new tk(n,t),a=new JL(o,t,n,e,r);return new ok(t,i,e,s,o,a,h)}r();var ok=class extends i{get p_(){return this.CK.p_}get dd(){return this.mC}get _P(){return this._C}get aJ(){return this.uJ}get cJ(){return this.lJ.YH}get BW(){return this.dJ.BW}set BW(t){this.dJ.BW=t}get FW(){return this.dJ.FW}set FW(t){this.dJ.FW=t}get oa(){return this.dJ.oa}zH(){return this.CK.zH()}hJ(){this.CK.hJ()}ZK(){this.CK.ZK(),this.dJ.ZK()}fJ(t,i){this.lJ.WH(t,i)}_J(t,i){this.lJ.VH(t,i)}gJ(){return this.dJ.FK()}mK(t,i,e){return this.dJ.mK(t,i,e)}MK(t,i,e){return this.dJ.MK(t,e)}PK(t,i){return li.LE&&li.xE<3?this.dJ.PK(t,1/0):this.dJ.PK(t,i)}async wm(t,i,e){this._J(t,i);const s=this.p_;await this.dJ.QK(t,i,e);const n=0!==s.L&&0===this.p_.L;(li.ob||li.OE)&&n&&this.eP.Em(this.eP.I_)}mH(t){const i=t._P;if(this._C===i)return!0;const e=this.wJ.get(i);if(void 0!==e)return e;const s=this.AJ(t);return this.wJ.set(i,s),s}AJ(t){const i=this.YK.qK(t._P);if(void 0===i)return!1;const e=um(this._C),s=um(i),n=ik(e),r=ik(s);if(this.dJ.GK()){if(!function(t,i){return F_(t,i,ek)}(n,r))return!1}else{if(e.$w!==s.$w)return!1;if(!function(t,i){return F_(t,i,rk)}(n,r))return!1}return!0}async yH(t){const i=t._P;this._C!==i&&(this.wJ.clear(),this.dJ.yH(t),this._C=i),this.mC=t,this.YK.vJ()}async Hf(){this.wJ.clear(),this.Uo(),this.lJ.ln();try{this.dJ.hn(vl.dH,this.Ds),await this.dJ.Hf()}catch(t){}}constructor(t,i,e,s,n,r,h){super(),this.wJ=Mt(),this.YK=t,this.mC=e,this._C=e._P,this.uJ=s,this.eP=i,this.CK=n,this.dJ=r,this.lJ=h,this.dJ.dn(vl.dH,this.Ds)}};r();var ak=class{mJ(){let t=this.yn,i=this.wn;if(this.pJ||this.yJ){const e=.001*(le.n_()-this.MJ);this.pJ&&(t+=e),this.yJ&&(i+=e)}return t>=i?re.ZB():new re([t,i])}constructor(t,i,e=!1,s=!1){this.yn=t,this.wn=i,this.pJ=e,this.yJ=s,this.MJ=le.n_()}};r();var uk=.5,ck=[t.wh,t.bh,t.YA,t.FA,t.bA,t.kA,t.NA,t.RA,Dt._w,be.ha],lk=class{TJ(t){this.NJ.push(t),t.dn(oL.UH,this.DJ)}get YH(){return this.NJ.reduce(((t,i)=>t.xB(i.YH)),re.ZB())}ln(){this.IJ(),this.SJ.hn(Dt._w,this.EJ),this.eP.hn(t.BA,this.EJ),this.eP.hn(ck,this.bJ),this.NJ.forEach((t=>t.hn(oL.UH,this.DJ))),0!==this.LJ&&(le.r_(this.LJ),this.LJ=0),this.kJ=!0}TH(t){if(this.eP.L_)return!1;if(0!==this.LJ)return!1;const i=this.CK.p_,e=i.jB(t);if(e>=0&&t+uk<i.wn(e))return!1;const s=e>=0?e+1:i.GB(t);if(s<0||s>=i.L)return!1;const n=i.yn(s);if(re.XB(t,n).OB(this.YH).HB>1)return!1;if(le.xJ)return this.CJ=this.eP.I_,this.LJ=le.h_((()=>{this.CJ===this.eP.I_&&this.OJ(n),this.LJ=0}),250),!0;return!(S.abs(n-t)<=.001)&&(this.OJ(n),!0)}OJ(t){this.eP.Em(t,!1,!0)}jJ(){0!==this.zJ&&(le.r_(this.zJ),this.zJ=0),this.eP.hn(t.XA,this.Vl)}PJ(){0===this.BJ&&(this.jJ(),this.BJ=le.RJ(this.UJ,250))}IJ(){0!==this.BJ&&(le.QJ(this.BJ),this.BJ=0),this.jJ(),this.eP.fg||(this.FJ=0)}YJ(){return!this.eP.V_&&!this.eP.fg&&0!==this.eP.q_&&!this.eP.L_&&!this.eP.dt&&(this.GJ()||this.SJ.og>=he.Qv)}GJ(){const t=this.eP.I_,i=this.CK.p_,e=i.jB(t);return-1!==e&&i.wn(e)>t+uk}WJ(t,i){const e=i.jB(t);return e>-1?i.wn(e):t}constructor(i,e,s,n){this.CK=i,this.SJ=e,this.eP=s,this.kJ=!1,this.NJ=[],this.LJ=0,this.zJ=0,this.VJ=0,this.CJ=0,this.FJ=0,this.BJ=0,this.HJ=1,this.DJ=t=>{const i=this.eP.I_,e=t.FH.ur(i),s=t.FH.ur(i,uk)&&this.eP.og<=he.Uv;(e||s)&&this.TH(i)},this.EJ=J_((t=>{if(this.kJ)return;if(this.SJ.og<=he.Uv){const t=this.eP.I_;this.TH(t)||this.UJ()}}),100),this.Vl=J_((t=>{this.kJ||0===this.BJ&&this.PJ()}),100),this.bJ=()=>{this.YJ()?0===this.BJ&&(this.eP.dn(t.XA,this.Vl),this.zJ=le.h_((()=>{this.PJ()}),3500)):this.IJ()},this.UJ=()=>{const t=this.VJ,i=this.FJ,e=this.eP.I_,s=le.n_(),n=this.CK.p_;if(t!==e)return this.VJ=e,this.FJ=s,this.HJ=1,void(this.qJ=le.XJ?2e3:1e3);if(this.YJ()&&0!==n.L&&i>0&&s>i+this.qJ){let t;const i=this.YH.IB().OB(n),s=i.YB(e);if(-1!==s){const n=i.yn(s);if(n-e<1){const e=i.wn(s);0,t=e}}var r;if(!t)t=null==(r=this.ZJ)?void 0:r.determineStallJumpTarget(),t||(t=e+.01*this.HJ,n.ur(t)||(t=this.WJ(e,n)));0,this.VJ=t,this.HJ++,this.qJ=S.min(2*this.qJ,1e4),this.OJ(t)}},this.SJ.dn(Dt._w,this.EJ),this.eP.dn(t.BA,this.EJ),this.eP.dn(ck,this.bJ),this.ZJ=n,this.qJ=le.XJ?2e3:1e3}};function dk(t){const i=[];if(t.KJ&&i.push(t.KJ.p_),t.JJ&&i.push(t.JJ.p_),0===i.length)return re.ZB();let e=0;for(const t of i)t.L>0&&(e=S.max(e,t.wn(t.L-1)));const s=t.zH;let n=new re([0,e],[!0,s]);for(let t of i)s&&t.L>0&&(t=t.xB(new re([t.wn(t.L-1),e],[!0,!0]))),n=n.bn(t);return n}function fk(t,i,e){const s=t.p_;let n,r=s.jB(i);if(r>=0){if(!(r+1<s.L))return Promise.resolve();n=s.yn(r+1)}else{if(r=s.GB(i),!(r>=0))return Promise.resolve();n=s.yn(r)}return t.wm(n,1/0,e)}function _k(t,i,e){if(!t.ur(i)){const s=t.jB(i,e);if(s>=0){const e=t.yn(s);if(i<e)return e}}return i}r(),r();var hr=class{$J(){return new this.t$}i$(t){return this.t$.isTypeSupported(t)}constructor(t){this.t$=gk(t)}};function gk(t){return t&&"function"==typeof J.ManagedMediaSource?J.ManagedMediaSource:"function"==typeof J.MediaSource?J.MediaSource:void 0}var Zs,wk=li.BE||li.UE;!function(t){t.VK="closed",t.OI="open",t.NA="ended"}(Zs||(Zs={}));var Ak=class extends X{get KJ(){return this.e$}get JJ(){return this.s$}get lt(){if(this.n$)return this.n$;const t=this.uP.duration;return t===S_?1/0:t}r$(t){if(M(t)||t<0)throw new k("Invalid duration");this.h$()?this.o$(t):this.n$=t}o$(t){const i=t===1/0,e=i?S_:t;if(i&&this.uP.setLiveSeekableRange){const t=2**39;this.uP.setLiveSeekableRange(0,t)}this.uP.duration=e,this.n$=void 0}get p_(){return wk?dk(this):function(t,i){let e=i;return e.L>0&&t.zH&&(e=e.xB(re.qB(e.wn(e.L-1)))),e}(this,re.gn(this.QC.buffered))}get PH(){var t;return null==(t=this.e$)?void 0:t.p_}get BH(){var t;return null==(t=this.s$)?void 0:t.p_}get cg(){return this.a$.mJ().bn(new re([0,this.lt],[!0,!0]))}u$(t,i,e,s){this.a$=new ak(t,i,!!e,!!s)}get zH(){return(!this.e$||this.e$.zH())&&(!this.s$||this.s$.zH())}get og(){return this.uP.readyState}async YW(){const t=this.mC,i=xe(t.c$,(t=>Lt(t._P,"audio"))),e=xe(t.c$,(t=>Lt(t._P,"video")));if(this.QC.disableRemotePlayback=!0,await this.l$(),i){const t=new cr;var s;this.d$.TJ(t);const e=null!=(s=this.qK(i._P))?s:i._P;this.f$=this.uP.addSourceBuffer(e),this.e$=hk(this,this.eP,i,Zt.Gv,this.f$,e,t),this.e$.dn(vl.dH,this.iJ)}if(e){const t=new cr;var n;this.d$.TJ(t);const i=null!=(n=this.qK(e._P))?n:e._P;this._$=this.uP.addSourceBuffer(i),this.s$=hk(this,this.eP,e,Zt.Yv,this._$,i,t),this.s$.dn(vl.dH,this.iJ)}this.MH.En(this,t)}async l$(){const t=URL.createObjectURL(this.uP);await super.CH(t),"open"!==this.og&&await ni(this.uP,"sourceopen")}h$(){if("open"!==this.og)return!1;const t=this.e$&&this.e$.oa,i=this.s$&&this.s$.oa;return!(t||i)}hJ(){this.g$=!0,this.e$&&this.e$.hJ(),this.s$&&this.s$.hJ(),this.g$=!1,this.w$()}ZK(){this.e$&&this.e$.ZK(),this.s$&&this.s$.ZK()}mH(t){const i=xe(t.c$,(t=>Lt(t._P,"audio"))),e=xe(t.c$,(t=>Lt(t._P,"video")));if(this.e$){if(!i)return!1;if(!this.e$.mH(i))return!1}else if(i)return!1;if(this.s$){if(!e)return!1;if(!this.s$.mH(e))return!1}else if(e)return!1;return!!super.mH(t)}async yH(t){const i=xe(t.c$,(t=>Lt(t._P,"audio"))),e=xe(t.c$,(t=>Lt(t._P,"video"))),s=[];this.e$&&s.push(this.e$.yH(i)),this.s$&&s.push(this.s$.yH(e)),await Promise.all(s),await super.yH(t)}async Hf(){if(li.OE&&await this.jH(),this.e$){if(await this.e$.Hf(),this.e$=void 0,Ln()&&(li.OE||li.LE))try{this.uP.removeSourceBuffer(this.f$)}catch(t){}this.f$=void 0}if(this.s$){if(await this.s$.Hf(),this.s$=void 0,Ln()&&(li.OE||li.LE))try{this.uP.removeSourceBuffer(this._$)}catch(t){}this._$=void 0}this.QC.src&&URL.revokeObjectURL(this.QC.src),this.QC.disableRemotePlayback=!1,this.eP.hn([t.YA,t.bA],this.A$),this.d$.ln(),li.LE&&await this.jH(),await super.Hf()}vJ(){const t=this.mC,i=t.c$.map((t=>Lt(t._P,"audio")&&this.e$?this.e$.dd:Lt(t._P,"video")&&this.s$?this.s$.dd:t));this.mC=qr({},t,{c$:i})}oJ(){this.g$||this.w$()}get v$(){if(!this.zH)return!1;const t=this.p_;return 0!==t.L&&t.yn(t.L-1)<=this.eP.I_}w$(){this.v$&&this.h$()&&(this.uP.endOfStream(),this.n$=void 0,this.jo(new d(L.MU)),this.eP.iJ())}JK(){this.h$()&&(this.zH?this.w$():void 0!==this.n$&&this.o$(this.n$))}TH(t){return this.d$.TH(t)}qK(t){return vk(this.m$,t)}static RH(t){const i=gk(t.p$);if(void 0===i)return!1;if("function"!=typeof i.isTypeSupported)return!1;const e=new hr(t.p$);for(const i of t.c$)if(void 0===vk(e,i._P))return!1;return!0}constructor(i,e,s,n,r,h=new hr(i.p$),o){super(i,e,n,r),this.e$=void 0,this.f$=void 0,this.s$=void 0,this._$=void 0,this.a$=new ak(0,1/0),this.n$=void 0,this.g$=!1,this.A$=()=>{this.w$()},this.iJ=()=>{this.eP.iJ()},this.m$=h,this.uP=this.m$.$J(),this.eP.dn([t.YA,t.bA],this.A$),this.d$=new lk(this,s,this.eP,o)}};function vk(t,i){const e=um(i),s="audio/mp4"===e.$w&&function(t,i){return B_(t,i,((t,i)=>t===i))}(ik(e),["mp4a.40.34"]);if(t.i$(i)&&(!s||!li.ZE))return i;if(s){const i=xe(['audio/mp4; codecs="mp3"',"audio/mpeg"],(i=>t.i$(i)));return void 0!==i?i:void 0}}r(),r();var mk=class extends d{constructor(i){super(t.bA),this.currentTime=i}},pk=[t.ZA,t.RA,t.YA,t.bA,t.wh,t.bh],yk=class extends i{get I_(){return this.KB}get y$(){return this.M$}get T$(){return this.N$}get lt(){return this.KL}get L_(){return this.D$}get V_(){return this.tR}get og(){return this.I$}get fg(){return this.JB}get Q_(){return this.$B}set Q_(t){this.Q_!==t&&(this.$B=t,this.jo(new ge(this.I_,this.Mg)))}get q_(){return this.iR}set q_(t){this.q_!==t&&(this.iR=t,this.jo(new ce(this.I_,this.q_)))}get Mg(){return this.wk}set Mg(t){this.Mg!==t&&(this.wk=t,this.jo(new ge(this.I_,this.Mg)))}Em(t,i,e){this.KB!==t&&(this.KB=t,this.M$=i,e&&!this.JB?(this.N$=!0,this.jo(new mk(this.I_))):(this.N$=!1,this.JB=!0,this.jo(new gt(this.I_))))}Pg(){this.tR||(this.tR=!0,this.jo(new bs(this.I_)))}Bg(){this.tR&&(this.tR=!1,this.jo(new ih(this.I_)))}Hf(){this.Uo()}constructor(t,i,e,s,n,r,h,o,a,u,c){super(),this.KB=t,this.KL=i,this.D$=e,this.tR=s,this.JB=n,this.$B=r,this.iR=h,this.wk=o,this.I$=a,this.M$=u,this.N$=c}};function Mk(t){return new yk(t.I_,t.lt,t.L_,t.V_,t.fg,t.Q_,t.q_,t.Mg,t.og,!1,t.T$)}function Tk(t,i){i.lt===t.lt||M(i.lt)&&M(t.lt)||t.jo(new jn(t.lt)),t.Q_=i.Q_,t.Mg=i.Mg,t.q_=i.q_,i.V_?t.Pg():t.Bg().catch(h),i.I_!==t.I_||i.og>he.Rv&&t.og===he.Rv?t.Em(i.I_,i.y$,i.T$):!i.fg&&t.fg?t.jo(new gt(t.I_)):i.fg&&!t.fg&&t.og>=he.Uv&&t.jo(new ke(t.I_)),!i.L_&&t.L_&&t.jo(new Ki(t.I_))}r(),r();var st=class extends i{get og(){return this.ag()}S$(t){this.aO!==t&&(this.aO=t,this.jo(new Z(this.eP.I_,t)))}E$(){this.S$(this.ag())}Gn(){this.S$(he.Rv)}Hf(){this.Uo()}constructor(t){super(),this.aO=he.Rv,this.b$=()=>{this.E$()},this.eP=t}};r();var Nk=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],Dk=class extends st{ag(){let t=this.eP.oP.readyState;return t>he.Uv&&this.eP.L$?he.Uv:(this.eP.oP.seeking&&t>he.Un&&(t=he.Un),t)}Hf(){for(const t of Nk)this.eP.oP.removeEventListener(t,this.b$);super.Hf()}constructor(t){super(t);for(const t of Nk)this.eP.oP.addEventListener(t,this.b$)}};r();var Ik=class extends st{ag(){if(this.eP.oP.readyState===he.Rv)return he.Rv;const t=this.k$(),i=t?t.wn-t.yn:0;if(!t)return he.Un;const e=this.eP.q_;return this.x$()||i>=3*e?he.Fv:i>=3?he.Qv:he.Uv}k$(){const t=this.eP.I_,i=this.eP.p_.kB(.04),e=i.jB(t);if(!(e<0))return{yn:t,wn:i.wn(e)}}x$(){if(this.eP.L_)return!0;const t=this.eP.lt,i=this.k$();return!!i&&t-i.wn<=.16666666666666666}Hf(){this.eP.hn([t.YA,t.bA],this.b$);for(const t of Nk)this.eP.oP.removeEventListener(t,this.b$);super.Hf()}constructor(i){super(i),this.eP.dn([t.YA,t.bA],this.b$);for(const t of Nk)this.eP.oP.addEventListener(t,this.b$)}};r(),r();var Sk=[Dt._w,t.wh,t.bh,t.YA,t.FA,t.bA,t.kA,t.NA,be.ha],Ek=class extends i{C$(){return!this.sO.T$&&this.sO.og<he.Qv}O$(){return!this.sO.fg&&!(this.sO.V_||this.sO.L_||this.sO.dt||this.C$())}Hn(){const t=this.j$;this.j$=this.O$(),!t&&this.j$&&this.jo(new Kr(this.sO.I_))}Gn(){this.j$=!1}Hf(){this.Uo(),this.sO.hn(Sk,this.NG)}constructor(t){super(),this.j$=!1,this.NG=()=>{this.Hn()},this.sO=t,this.sO.dn(Sk,this.NG)}},bk=class extends Ek{O$(){return this.z$&&super.O$()}Hn(){this.z$&&(this.QC.paused||this.QC.ended||this.QC.error)&&(this.z$=!1),super.Hn()}Gn(){super.Gn(),this.z$=!1}Hf(){this.QC.removeEventListener(Dt._v,this._O),super.Hf()}constructor(t){super(t),this.z$=!1,this._O=()=>{this.z$=!0,this.Hn()},this.QC=t.oP,this.QC.addEventListener(Dt._v,this._O)}};r();var tt=class extends d{constructor(t){super(be.ha),this.dt=t}};function Lk(t,i){return t.Fm<=i&&t.Ym>i}function hi(t,i){return function(t,i){return fh(t.Fm,i.Fm,ev)}(t,i)||function(t,i){return fh(t.Ym,i.Ym,ev)}(t,i)}function kk(t,i){return function(t,i){return fh(t.Km,i.Km,ev)}(t,i)||function(t,i){return fh(t.Jm,i.Jm,ev)}(t,i)}function xk(t,i,e){let s=function(t,i,e,s,n,r,h){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===h&&(h=t.length);let o=r,a=h-1;for(;o<=a;){const h=o+(a-o>>1),u=s(e(t[h]),i);if(u<0)o=h+1;else if(u>0)a=h-1;else{if(!(n&&h>r&&0===s(e(t[h-1]),i)))return h;a=h-1}}return~o}(t,i,K_,e,!0);if(s<0)return s;for(;s<t.length&&e(i,t[s])===pi.Gr;s++)if(t[s].hp(i))return s;return-(s+1)}function Ck(t,i,e){const s=xk(t,i,e);return s>=0?s:-(s+1)}function Ok(t){const i=t.Ht;if(!i)return-1;if(t instanceof Ss)return i.P$(t);const e=i.H;if(!e)return-1;const s=xk(e.Nw,t,hi);return s>=0?s:-1}function jk(t,i){const e=function(t,i,e){const s=t.length,n=i.length;let r=0,h=0;const o=[],a=[];for(;r<s&&h<n;){const s=t[r],n=i[h];s===n?(r++,h++):e(n,s)<=0?(o.push(n),h++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;h<n;)o.push(i[h]),h++;return{B$:o,R$:a}}(t,i,hi);return function(t,i){const e=i.length;for(let s=0;s<e;s++)t[s]=i[s];t.length=e}(t,i),e}r(),r(),r(),r();var Zn=class{get Nw(){return this.U$}get L(){return this.U$.length}get so(){if(this.Oa){const t=this.U$;this.Oa.length=t.length;for(let i=0;i<t.length;i++)this.Oa[i]=t[i].so}else this.Oa=this.Qh();return this.Oa}Qh(){return function(t){const i=[];for(let e=0;e<t.L;e++)i[e]=t.Kb(e).so;return i.item=i=>{const e=0|i,s=t.Kb(e);return s&&s.so||void 0},C.defineProperty(i,"constructor",{value:KA}),i}(this)}Am(t){const i=this.U$;for(let e=i.length-1;e>=0;e-=1){const s=i[e];if(t.hp(s))return!0}return!1}Kb(t){return this.U$[t]}constructor(t){this.Oa=void 0,this.U$=t}};r();var zk=class extends du{Qh(){return new Pk(this.Ht.so,this.og)}constructor(t,i){super(ia._w),this.Ht=t,this.og=i}},Pk=class extends me{constructor(t,i){super("readystatechange"),this.track=t,this.readyState=i}};r();var Q=class extends du{Qh(){return new Bk(this.Ht.so)}constructor(t){super(ia.ww),this.Ht=t}},Bk=class extends me{constructor(t){super("typechange"),this.track=t}};r();var Rk=class extends du{Qh(){return new Uk(this.Qm.so)}constructor(t){super(ia.Jg),this.Qm=t}},Uk=class extends me{constructor(t){super("addcue"),this.cue=t}};r();var Qk=class extends du{Qh(){return new Fk(this.Qm.so)}constructor(t){super(ia.iw),this.Qm=t}},Fk=class extends me{constructor(t){super("removecue"),this.cue=t}},gn=class extends i{get W(){return this.Q$}get H(){return this.F$}Y$(t){return xe(this.F$.Nw,(i=>i.u===t))}get zS(){return this.G$}set zS(t){this.G$=t}get Jw(){return this.W$}get so(){return this.Oa||(this.Oa=this.Qh()),this.Oa}Qh(){return Ig(this)}get u(){return this.ym}get Bw(){return this.Mm}get qw(){return this.V$}set qw(t){this.V$=t}get Lt(){return this.H$}get fh(){return this.Tm}set fh(t){t!==this.Tm&&(this.Tm=t,this.jo(new ms(this)))}get ys(){return this.JL}get Rw(){return this.q$}get Xw(){return this.NR}set Xw(t){this.Xo(t)}Xo(t){const i=Hs(t);i!==this.Xw&&(this.NR=i,i===Da.yh&&(this.X$.forEach((t=>{t.ao=!1})),sr(this.X$),this.Z$=0),this.jo(new eo(this)))}get og(){return this.I$}set og(t){this.I$!==t&&(this.I$=t,this.jo(new zk(this,this.I$)))}get tA(){return this.K$}set tA(t){this.K$=t}get $w(){return this.J$}set $w(t){this.J$!==t&&(this.J$=t,this.jo(new Q(this)))}CS(t){if(!t||t.Ht)return;const i=xk(this.t0,t,kk);if(i>=0)return;const e=xk(this.H.Nw,t,hi);t.Ht=this;const s=-(i+1);this.t0.splice(s,0,t);const n=-(e+1);this.i0(t,n),this.jo(new Rk(t))}i0(t,i){this.U$.splice(i,0,t),this.e0(i),t.cp=i,i<this.Z$&&(this.Z$=i)}GI(t){if(!t||t.Ht!==this)return;const i=this.P$(t);if(i<0)return;t.ao=!1;const e=this.X$,s=xk(e,t,hi);s>=0&&Ks(e,s);xk(this.t0,t,kk);s>=0&&Ks(this.t0,s),this.s0(t,i),this.jo(new Qk(t))}s0(t,i){Ks(this.U$,i),this.e0(i),t.cp=-1,this.Z$>i&&--this.Z$}ip(t){if(!t||t.Ht!==this)return;const i=this.P$(t);if(i<0)return;this.s0(t,i);const e=Ck(this.H.Nw,t,hi);this.i0(t,e);const s=qt(this.X$,(i=>i===t));if(s>=0){Ks(this.X$,s);const i=Ck(this.X$,t,hi);this.X$.splice(i,0,t)}}n0(t,i){const e=this.X$,s=this.U$;let n=this.Z$,r=!1;i&&(n=0);for(let i=e.length-1;i>=0;i--){Lk(e[i],t)||(r=!0,Ks(e,i))}for(;n<s.length&&s[n].Fm<=t;){const i=s[n];if(0===t)break;Lk(i,t)&&!ks(e,i)&&(r=!0,e.push(i)),n++}r&&Ic(e,hi),this.Z$=n}P$(t){return(-1===t.cp||t.cp>=this.r0)&&this.h0(),t.cp}h0(){const t=this.U$;for(let i=this.r0;i<t.length;i++)t[i].cp=i;this.r0=t.length}e0(t){t<this.r0&&(this.r0=t)}Kw(t){this.Jw||(this.Xw=t)}ln(){this.Uo();const t=this.U$.slice();for(const i of t)i.ln();sr(this.U$),sr(this.t0),sr(this.X$)}constructor(t,i,e,s,n,r,h,o,a){super(),this.Mm=Ra(),this.G$=!1,this.NR=Da.yh,this.I$=gu.NONE,this.K$=void 0,this.U$=[],this.t0=[],this.X$=[],this.r0=0,this.Z$=0,this.ym=i||"",this.V$=o||"",this.H$=t,this.JL=s||"",this.G$=Boolean(n),this.W$=Boolean(h),this.J$=r||jo.DEFAULT,this.Tm=e||"",this.q$=a||[],this.F$=new Zn(this.U$),this.Q$=new Zn(this.X$)}};r(),r(),r();var ar=class extends ZA{Qh(){return new Yk(this.Qm.so)}constructor(t,i){super(kl.Rm,t),this.Ay=i}},Yk=class extends _a{constructor(t){super("enter",t)}};r();var Gk=class extends ZA{Qh(){return new Wk(this.Qm.so)}constructor(t,i){super(kl.Um,t),this.Ay=i}},Wk=class extends _a{constructor(t){super("exit",t)}};r();var at=class extends du{Qh(){return new Vk(this.Qm.so)}constructor(t){super(ia.ow),this.Qm=t}},Vk=class extends me{constructor(t){super("entercue"),this.cue=t}};r();var Hk=class extends du{Qh(){return new qk(this.Qm.so)}constructor(t){super(ia.uw),this.Qm=t}},qk=class extends me{constructor(t){super("exitcue"),this.cue=t}},Fu=class extends ${get Bw(){return this.Mm}get Fm(){return this.o0.startTime}set Fm(t){this.o0.startTime=t}get Ym(){return this.o0.endTime}set Ym(t){this.o0.endTime=t}get V(){return this.sp}set V(t){this.sp=t}get np(){return!!this.o0.pauseOnExit}set np(t){this.o0.pauseOnExit=!!t}get Ht(){return this.tp}set Ht(t){this.tp=t}get u(){return this.o0.id||""}get so(){return this.Oa||(this.Oa=this.Qh()),this.Oa}Qh(){return fc(this)}get ao(){return this.uo}set ao(t){this.ao!==t&&(this.uo=t,t?(this.jo(new ar(this,this.Fm)),this.tp&&this.tp.jo(new at(this))):(this.jo(new Gk(this,this.Ym)),this.tp&&this.tp.jo(new Hk(this))))}hp(t){return this===t||gg(this,t)&&sv(this,t)&&this.op(t)}op(t){return Xc(this.V,t.V)}ln(){this.Uo(),this.o0.removeEventListener("enter",this.a0),this.o0.removeEventListener("exit",this.u0)}constructor(t){super(),this.sp=void 0,this.tp=void 0,this.Oa=void 0,this.uo=!1,this.a0=()=>{this.ao=!0},this.u0=()=>{this.ao=!1},this.Mm=Bw(),this.o0=t,this.Km=t.startTime,this.Jm=t.endTime,this.o0.addEventListener("enter",this.a0),this.o0.addEventListener("exit",this.u0)}};r();var Xk=class extends du{Qh(){return new Zk(this.Ht.so)}constructor(t){super(ia.lw),this.Ht=t}},Zk=class extends me{constructor(t){super("cuechange"),this.track=t}};function Kk(t){if(!t)return;let i=t.THEOplayerVTTRegion;return i||(i=new Jk(t),t.THEOplayerVTTRegion=i),i}r(),r();var Jk=class{get c0(){return this.l0}get u(){return this.l0.id||""}get Ti(){return+this.l0.width||0}set Ti(t){this.l0.width=t||0}get lp(){return+this.l0.lines||0}set lp(t){this.l0.lines=t||0}get dp(){return+this.l0.regionAnchorX||0}set dp(t){this.l0.regionAnchorX=t||0}get fp(){return+this.l0.regionAnchorY||0}set fp(t){this.l0.regionAnchorY=t||0}get gp(){return+this.l0.viewportAnchorX||0}set gp(t){this.l0.viewportAnchorX=t||0}get wp(){return+this.l0.viewportAnchorY||0}set wp(t){this.l0.viewportAnchorY=t||0}get _p(){return this.l0.scroll||""}get so(){return this.Oa||(this.Oa=uv(this)),this.Oa}constructor(t){this.Oa=void 0,this.l0=t}};var $k=class extends Fu{get V(){return this.o0.text}set V(t){this.o0.text=t}get Et(){return this.o0.vertical||""}set Et(t){this.o0.vertical=t||""}get Zm(){return this.o0.snapToLines}set Zm(t){this.o0.snapToLines=t}get Wm(){return this.o0.line}set Wm(t){this.o0.line=t}get Xm(){return+this.o0.size}set Xm(t){this.o0.size=et(t,0,100)}get so(){return this.Oa||(this.Oa=this.Qh()),this.Oa}Qh(){return JA(this)}op(t){return nv(this,t)}constructor(t){super(t)}},tx=class extends $k{get qm(){return Kk(this.o0.region)}get Vm(){return this.o0.lineAlign||"start"}set Vm(t){this.o0.lineAlign=t||"start"}get yo(){return this.o0.position}set yo(t){this.o0.position=t}get Hm(){return this.o0.positionAlign||"auto"}set Hm(t){this.o0.positionAlign=t||"auto"}get Gm(){return this.o0.align||"center"}set Gm(t){this.o0.align=t||"center"}constructor(t){super(t)}},ix=class extends $k{get qm(){return Kk(this.c0)}get c0(){return function(t,i){if(void 0===i)return;let e=t&&t.regions;return e&&e.getRegionById(i)||void 0}(this.o0.track,this.o0.regionId)}get Vm(){return function(t){return"middle"===t?"center":t}(this.o0.lineAlign||"start")}set Vm(t){this.o0.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get yo(){return this.o0.position}set yo(t){this.o0.position=function(t,i){return XA(t,i)}(t,this.Gm)}get Hm(){return function(t){return HA[t]}(this.o0.positionAlign||"middle")}set Hm(t){this.o0.positionAlign=function(t,i){return VA[qA(t,i)]}(t||"center",this.Gm)}get Gm(){return function(t){return"middle"===t?"center":t}(this.o0.align||"middle")}set Gm(t){this.o0.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function ex(t,i){return t.V===i.V}function sx(t,i){if(0===i.length)return;const e=i.length-1;if(i[e].Fm<t.Fm)return void nx(i,e,t.Fm);const s=i[0];if(s.Fm>t.Fm)return void(t.Ym=s.Fm);const n=xk(i,t,hi);if(n>=0)return;const r=-(n+1),h=r-1;if(h>=0){i[h].Fm<t.Fm&&nx(i,h,t.Fm)}if(r<i.length){const e=i[r];t.Ym=e.Fm}}function nx(t,i,e){const s=t[i].Fm;for(let n=i;n>=0&&t[n].Fm===s;n--)t[n].Ym=e}function rx(t){return fc(t)}r(),r(),r(),r();var hx,ox,ax=class extends Fu{get V(){return this.d0}get so(){return this.Oa||(this.Oa=this.Qh()),this.Oa}Qh(){return rx(this)}op(t){return ex(this,t)}constructor(t,i){super(t),this.d0=i}};function P(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function yi(t){switch(t){case 0:return Ka;case 1:return jA;case 2:return pa;case 3:return Rc}}function ux(t,i){const e=i.Lu,s=t.byteLength,n=it(t);return i.Sm(s-e),kh(n,e,s).buffer}function cx(t,i){return{id:t||"",data:i instanceof ArrayBuffer?i:void 0}}function lx(t,i,e){const s=q(t,i);if(!P(s))return;const n=yi(s);return{id:e,language:Ys(t,i,3),description:n(t,i),text:n(t,i)}}function dx(t,i,e){const s=q(t,i);if(!P(s))return;const n=yi(s);return{id:e,mimeType:Ka(t,i),fileName:n(t,i),description:n(t,i),data:ux(t,i)}}function fx(t,i,e){const s=q(t,i);if(!P(s))return;const n=yi(s),r=[];for(;i.Lu<t.byteLength;)r.push({involvement:n(t,i),involvee:n(t,i)});return{id:e,entries:r}}function _x(t,i,e){const s=q(t,i);if(!P(s))return;const n=yi(s),r=Ys(t,i,3),h=q(t,i),o=q(t,i),a=n(t,i);let u=!1;const c=[];for(;i.Lu<t.byteLength;){let e;if(1===s){let s=OA(t,i);void 0===s?s=u:u=s,e=pa(t,i,s)}else e=n(t,i);if(!e||i.Lu+4>t.byteLength)break;c.push({text:e,timestamp:dt(t,i)})}return{id:e,language:r,format:h,contentType:o,description:a,entries:c}}function gx(t,i,e){return{id:e,ownerIdentifier:Ka(t,i),identifier:ux(t,i)}}function wx(t,i,e){const s=q(t,i);if(!P(s))return;const n=yi(s);return{id:e,language:Ys(t,i,3),description:n(t,i),text:n(t,i)}}function Ax(t,i,e){const s=q(t,i);if(!P(s))return;return{id:e,text:yi(s)(t,i)}}function vx(t,i,e){return{id:e,url:Ka(t,i)}}function mx(t,i,e){const s=q(t,i);if(!P(s))return;const n=yi(s);return{id:e,description:n(t,i),text:n(t,i)}}function px(t,i,e){const s=q(t,i);if(!P(s))return;return{id:e,description:yi(s)(t,i),url:Ka(t,i)}}function yx(t,i,e){switch(e){case"COM":return lx(t,i,e);case"GEO":return dx(t,i,e);case"IPL":return fx(t,i,e);case"PIC":return function(t,i,e){const s=q(t,i);if(!P(s))return;const n=yi(s),r=Ys(t,i,3),h=q(t,i),o=n(t,i);let a,u;return"--\x3e"===r?(a=r,u=Ka(t,i)):(a="image/"+r.toLowerCase(),u=ux(t,i)),{id:e,mimeType:a,pictureType:h,description:o,data:u}}(t,i,e);case"SLT":return _x(t,i,e);case"TXX":return mx(t,i,e);case"UFI":return gx(t,i,e);case"ULT":return wx(t,i,e);case"WXX":return px(t,i,e);default:if("T"===e.charAt(0))return Ax(t,i,e);if("W"===e.charAt(0))return vx(t,i,e)}}function Mx(t,i,e){switch(e){case"APIC":return function(t,i,e){const s=q(t,i);if(!P(s))return;const n=yi(s),r=Ka(t,i),h=q(t,i),o=n(t,i);let a;return a="--\x3e"===r?Ka(t,i):ux(t,i),{id:e,mimeType:r,pictureType:h,description:o,data:a}}(t,i,e);case"COMM":return lx(t,i,e);case"COMR":return function(t,i,e){const s=q(t,i);if(!P(s))return;const n=yi(s),r=Ka(t,i),h=Ys(t,i,8),o=Ka(t,i),a=q(t,i),u=n(t,i),c=n(t,i);let l,d;return i.Lu<t.byteLength&&(l=Ka(t,i)||"image/",d=ux(t,i)),{id:e,price:r,validUntil:h,contactURL:o,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:l,sellerLogo:d}}(t,i,e);case"GEOB":return dx(t,i,e);case"IPLS":return fx(t,i,e);case"PRIV":return function(t,i,e){return{id:e,ownerIdentifier:Ka(t,i),data:ux(t,i)}}(t,i,e);case"POSS":return function(t,i,e){return{id:e,format:q(t,i),position:dt(t,i)}}(t,i,e);case"SYLT":return _x(t,i,e);case"TXXX":return mx(t,i,e);case"UFID":return gx(t,i,e);case"USER":return function(t,i,e){const s=q(t,i);if(!P(s))return;const n=yi(s);return{id:e,language:Ys(t,i,3),text:n(t,i)}}(t,i,e);case"USLT":return wx(t,i,e);case"WXXX":return px(t,i,e);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return Ax(t,i,e);default:{const s=e.charAt(0);if("T"===s)return Ax(t,i,e);if("W"===s)return vx(t,i,e)}}}r(),r(),function(t){t[t.ISO_8859_1=0]="ISO_8859_1",t[t.UTF16_BOM=1]="UTF16_BOM",t[t.UTF16=2]="UTF16",t[t.UTF8=3]="UTF8"}(hx||(hx={})),function(t){t[t.V22=2]="V22",t[t.V23=3]="V23",t[t.V24=4]="V24"}(ox||(ox={}));var Tx=10;function Nx(t,i){return(127&q(t,i))<<21|(127&q(t,i))<<14|(127&q(t,i))<<7|127&q(t,i)}function Dx(t,i){switch(t){case 4:return{f0:Yo(i,0),_0:Yo(i,1),g0:Yo(i,2),w0:Yo(i,3)};case 3:return{f0:Yo(i,0),_0:Yo(i,1),g0:Yo(i,2)};case 2:return{f0:Yo(i,0),A0:Yo(i,1)}}}function Ix(t,i,e){switch(e.DT){case 3:e.IT._0&&function(t,i){const e=i.Lu,s=dt(t,i)+4,n=32768&IA(t,i);i.Em(e+s),n&&dt(t,i)}(t,i);break;case 4:e.IT._0&&function(t,i){const e=i.Lu,s=Nx(t,i);i.Em(e+s)}(t,i)}}function Sx(t,i){if(t.byteLength-i.Lu<Tx)return null;if(73!==q(t,i)||68!==q(t,i)||51!==q(t,i))return null;const e=q(t,i),s=q(t,i);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(e))return null;const n=q(t,i),r=Nx(t,i);return{DT:e,v0:s,IT:Dx(e,n),m0:r}}function Ex(t,i,e){switch(e){case 2:return function(t,i){if(i.Lu+6>t.byteLength)return;return{u:Ys(t,i,3),Xm:Oc(t,i,3)}}(t,i);case 3:return function(t,i){if(i.Lu+10>t.byteLength)return;const e=Ys(t,i,4),s=dt(t,i);q(t,i);const n=q(t,i);return{u:e,Xm:s,IT:{A0:Yo(n,0),p0:Yo(n,1),groupingIdentity:Yo(n,2)}}}(t,i);case 4:return function(t,i){if(i.Lu+10>t.byteLength)return;const e=Ys(t,i,4),s=Nx(t,i);q(t,i);const n=q(t,i);return{u:e,Xm:s,IT:{groupingIdentity:Yo(n,1),A0:Yo(n,4),p0:Yo(n,5),f0:Yo(n,6),y0:Yo(n,7)}}}(t,i)}}function bx(t){const i=it(t),e=new A(i.byteLength);let s=0;for(let t=0;t<i.byteLength;t++){const n=i[t];255===n&&t++,e[s]=n,s++}return mo(kh(e,0,s))}function Lx(t,i){const e=i||new Eo,s=Sx(t,e);if(!s)return null;const n=function(t,i,e){const s=[],n=i.Lu;let r=nn(t,n,n+e.m0);const h=new Eo;switch(i.Sm(e.m0),e.DT){case 2:case 3:e.IT.f0&&(r=bx(r))}Ix(t,i,e);for(;h.Lu<r.byteLength;){const t=kx(r,h,e);if(void 0===t)break;s.push(t)}return s}(t,e,s);return{pT:s,M0:n}}function kx(t,i,e){const s=Ex(t,i,e.DT);if(void 0===s)return;if(0===s.u.charCodeAt(0)||0===s.Xm)return;const n=i.Lu;let r,h,o=nn(t,n,n+s.Xm);switch(i.Sm(s.Xm),e.DT){case 2:{const t=s;h=o,r=yx(h,new Eo,t.u);break}case 3:{const t=s,i=new Eo;!function(t,i,e){const s=e.IT;let n,r,h;s.A0&&(n=dt(t,i)),s.p0&&(r=q(t,i)),s.groupingIdentity&&(h=q(t,i))}(o,i,t);h=nn(o,i.Lu,o.byteLength),r=Mx(h,new Eo,t.u);break}case 4:{const t=s,i=new Eo;t.IT.f0&&(o=bx(o)),function(t,i,e){const s=e.IT;let n,r,h,o;s.groupingIdentity&&(n=q(t,i)),s.A0&&(r=dt(t,i)),s.p0&&(h=q(t,i)),s.y0&&(o=Nx(t,i))}(o,i,t);h=nn(o,i.Lu,o.byteLength),r=Mx(h,new Eo,t.u);break}}if(!r){const t=nt(it(h));r=cx(s.u,t.buffer)}return r}function xx(t){return function(t,i,e){return Ax(t,i,e)}(new DataView(t.data),new Eo,t.key)}function Cx(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return xx(t);default:let i=t.key.charAt(0);if("T"===i)return function(t){return{id:t.key,text:t.data}}(t);if("W"===i)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return cx(t.key,t.data)}(t)}r(),r();var kn=class t extends i{get W(){return this.Q$}get zS(){return this.T0?this.T0.default:void 0}get H(){return this.F$}get so(){return this.Oa||(this.Oa=this.Qh()),this.Oa}Qh(){return Ig(this)}get u(){return this.pm.id||this.T0&&this.T0.id||""}get Bw(){return this.Mm}get qw(){return this.pm.inBandMetadataTrackDispatchType||""}get Lt(){return this.pm.kind||ra.HM}get fh(){return this.Tm}set fh(t){t!==this.Tm&&(this.Tm=t,void 0!==this.T0&&(this.T0.label=t),this.jo(new ms(this)))}get ys(){return this.pm.language||""}get Xw(){return this.NR}set Xw(t){let i=this.Xw;this.NR=Hs(t),this.N0();let e=this.Xw;i!==e&&this.jo(new eo(this)),e!==Da.yh&&this.D0(gu.LOADING)}get I0(){return Hs(this.pm.mode)}set I0(t){this.pm.mode=t}get Nm(){return this.pm}get og(){return this.I$}get S0(){return this.T0?+this.T0.readyState||gu.NONE:gu.LOADED}get tA(){return this.K$}get $w(){return this.J$}set $w(t){this.J$!==t&&(this.J$=t,this.jo(new Q(this)))}get E0(){return this.b0}set E0(t){this.b0=t,t&&(this.L0=!0,v((()=>{this.L0=!1}),50)),this.N0()}N0(){let t=this.Xw;this.E0||t!==Da.zn?this.I0=t:this.I0=Da.Zw}k0(){let t=this.Xw,i=this.I0;t!==i&&(this.E0||t!==Da.zn||i!==Da.Zw)&&("metadata"===this.Lt&&i===Da.yh?this.Xw=t:this.L0&&i===Da.yh&&t===Da.zn?this.I0=t:this.Xw=i)}E$(t){this.I$!==t&&(this.I$=t,this.jo(new zk(this,t)))}D0(t){let i=S.max(this.I$,this.S0,t);this.E$(i)}static x0(t){return t&&t.THEOplayerTextTrackCue||void 0}C0(i){let e=t.x0(i);if(e)return e;if(e=this.O0(i),fe(e))for(let t of e)t.Ht=this;else e.Ht=this;return i.THEOplayerTextTrackCue=e,e}O0(t){return function(t){return!(!t||"org.id3"!==t.type||!t.value)}(t)?(this.$w=jo.ID3,function(t){let i;try{i=Cx(t.value)}catch(t){i=cx("")}return new ax(t,i)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.$w=jo.ID3,function(t){let i=[];try{let e=Lx(new DataView(t.data));if(e)for(let s of e.M0)i.push(new ax(t,s))}catch(t){}return i}(t)):function(t){return"text"in t}(t)?(this.$w=jo.WEBVTT,function(t){return"regionId"in t}(t)?new ix(t):new tx(t)):new Fu(t)}j0(t){let i=[];if(!t)return i;let e=t.length;for(let s=0;s<e;s++){let e=this.C0(t[s]||t.item(s));if(fe(e))for(let t of e)i.push(t);else i.push(e)}return i}z0(){let t=this.j0(this.pm.cues),i=jk(this.U$,t);for(let t of i.R$)t.hn(kl.Um,this.P0),t.hn(kl.Rm,this.P0),this.jo(new Qk(t));for(let t of i.B$)t.dn(kl.Rm,this.P0),t.dn(kl.Um,this.P0),this.jo(new Rk(t))}n0(){let t=this.j0(this.pm.activeCues),i=jk(this.X$,t);for(let t of i.R$)t.ao=!1;for(let t of i.B$)t.ao=!0;(i.B$.length||i.R$.length)&&this.jo(new Xk(this))}Kw(t){this.Xw=t}ln(){this.Uo();const t=this.U$.slice();for(let i of t)i.ln();sr(this.U$),sr(this.X$),this.pm.removeEventListener("cuechange",this.B0),this.pm.removeEventListener("cuechange",this.P0),this.T0&&(this.T0.removeEventListener("load",this.R0),this.T0.removeEventListener("error",this.U0),rs(this.T0))}constructor(t,i,e=!0){super(),this.U$=[],this.X$=[],this.NR=Da.yh,this.I$=gu.NONE,this.K$=void 0,this.J$=jo.DEFAULT,this.L0=!1,this.B0=()=>{this.N0(),this.pm.removeEventListener("cuechange",this.B0)},this.P0=()=>{this.Xw!==Da.yh&&(this.z0(),this.n0(),this.U$.length&&this.D0(gu.LOADING))},this.R0=()=>{this.D0(gu.LOADED)},this.U0=()=>{this.D0(gu.ERROR)},this.pm=t,this.b0=e,this.pm.addEventListener("cuechange",this.B0),this.pm.addEventListener("cuechange",this.P0),this.T0=i,this.T0&&(this.K$=Xg(this.T0.src),this.T0.addEventListener("load",this.R0),this.T0.addEventListener("error",this.U0)),this.Mm=Ra(),this.Tm=t.label||"",this.F$=new Zn(this.U$),this.Q$=new Zn(this.X$),this.Xw=this.I0,Hu((()=>{this.P0(),this.D0(gu.NONE)}))}};r(),r();function Ox(t,i){return de(t.Ay,i.Ay)||function(t,i){return t.Ht===i.Ht?qo(Ok(t),Ok(i)):Zm(t.Ht,i.Ht)}(t.Qm,i.Qm)||function(t,i){return t===i?pi.Gr:t===kl.Rm?pi.Bf:pi.Pf}(t.type,i.type)}var mt=class{Gn(){sr(this.Q0);for(const t of this.Tl.slice())this.st(t);this.F0(),this.Y0=0,this.xn=0,this.G0=!1,this.W0=!1,this.V0=void 0}it(t){if(!ks(this.Tl,t)){if(this.Tl.push(t),t.dn(ia.Jg,this.H0),t.dn(ia.iw,this.q0),t.dn(ia.nw,this.X0),t.dn(ia.ra,this.Z0),t.H.L>0){for(const i of t.H.Nw)this.K0.push(i);this.J0()}this.$0()}}st(t){if(Hc(this.Tl,t)){if(t.hn(ia.Jg,this.H0),t.hn(ia.iw,this.q0),t.hn(ia.nw,this.X0),t.hn(ia.ra,this.Z0),t.H.L>0){for(const i of t.H.Nw)Hc(this.Q0,i),Hc(this.K0,i);this.J0()}this.$0()}}$0(){this.G0=this.Tl.some((t=>t.Xw!==Da.yh))}t1(){this.Qo.fg||this.Qo.V_?this.F0():this.J0()}J0(){this.G0&&(this.Y0||(this.Y0=this.e1.i1(this.s1)))}F0(){this.Y0&&(this.e1.n1(this.Y0),this.Y0=0)}o1(){if(!this.G0)return;if(this.Qo.fg)return;const t=this.Tl,i=this.xn;var e;const s=null!=(e=this.V0)?e:this.Qo.I_,n=s-i<-.1;let r=this.W0||n;r&&s>i&&s-i<.1&&(r=!1),this.W0=!1,this.V0=void 0;const h=[];for(const i of t)if(i.Xw!==Da.yh){i.n0(s,r);for(const t of i.W.Nw)h.push(t)}const o=this.Q0.slice();if(r);else for(const e of t)e.Xw!==Da.yh&&Xm(e,i-Vu,s,o);for(let t=o.length-1;t>=0;t--)ks(h,o[t])&&Ks(o,t);const a=[];if(!r)for(let t=o.length-1;t>=0;t--){const e=o[t];e.Fm>i&&e.Ym<=s&&(a.push(e),Ks(o,t))}for(const t of this.K0)Hc(a,t);sr(this.K0);const u=[],c=[];for(const t of a)t.ao||u.push(new ar(t,t.Fm)),u.push(new Gk(t,S.max(t.Fm,t.Ym))),t.ao=!1;for(const t of o)t.ao&&(u.push(new Gk(t,S.max(t.Fm,t.Ym))),t.ao=!1);for(const t of h)t.ao||(u.push(new ar(t,t.Fm)),t.ao=!0);u.sort(Ox);for(const t of u){const i=t.Qm;i.jo(t);const e=i.Ht;e&&(t.type===kl.Rm?e.jo(new at(i)):e.jo(new Hk(i)),ks(c,e)||c.push(e))}c.sort(Zm);for(const t of c)t.jo(new Xk(t));this.xn=s,this.Q0=h}ln(){this.Gn(),this.Qo.hn(t.XA,this.a1),this.Qo.hn(t.wh,this.a1),this.Qo.hn(Dt._v,this.a1),this.Qo.hn(t.bh,this.a1),this.Qo.hn(t.YA,this.u1),this.Qo.hn(t.FA,this.c1)}constructor(i,e){this.Tl=[],this.Y0=0,this.xn=0,this.Q0=[],this.K0=[],this.G0=!1,this.W0=!1,this.V0=void 0,this.s1=()=>{this.Y0=0,this.o1(),this.t1()},this.a1=()=>{this.o1(),this.t1()},this.u1=()=>{this.W0=!0,this.V0=this.Qo.I_,this.F0()},this.c1=()=>{this.o1(),this.t1()},this.Z0=()=>{this.$0(),this.o1(),this.t1()},this.H0=t=>{const i=t.Qm;ks(this.K0,i)||this.K0.push(i),this.J0()},this.q0=t=>{const i=t.Qm;Hc(this.Q0,i),Hc(this.K0,i),this.J0()},this.X0=t=>{this.J0()},this.e1=e,this.Qo=i,i.dn(t.XA,this.a1),i.dn(t.wh,this.a1),i.dn(Dt._v,this.a1),i.dn(t.bh,this.a1),i.dn(t.YA,this.u1),i.dn(t.FA,this.c1),this.J0()}};r();var jx=class{i1(t){return Xh(t)}n1(t){Ws(t)}},zx=new jx,Px=class extends mt{constructor(t,i=zx){super(t,i)}};r(),r();var Bx=class extends Ss{get so(){return this.Oa||(this.Oa=rx(this)),this.Oa}op(t){return ex(this,t)}constructor(t,i,e){super(t,1/0,i,!1,e)}};r(),r();var Rx=class extends gn{constructor(t,i,e=jo.DEFAULT){super(ra.XM,"",i||"","",!1,e,!1,t)}},Ux=class extends Rx{CS(t){sx(t,this.U$),super.CS(t)}Qh(){return Ig(this)}constructor(t,i){super(t,i),this.$w=jo.ID3}};function Qx(t){const i=t&&t.THEOplayerTextTrackCue||void 0;if(i)return i;const e=t.startTime,s=Cx(t.value);return t.THEOplayerTextTrackCue=new Bx(e,s),t.THEOplayerTextTrackCue}var Fx=class extends Ux{get u(){return this.pm.id||""}get qw(){return this.pm.inBandMetadataTrackDispatchType||""}get ys(){return this.pm.language||""}Xo(t){super.Xo(t),this.I0=this.Xw}get I0(){return Hs(this.pm.mode)}set I0(t){this.pm.mode=t}get Nm(){return this.pm}D0(t){this.og=S.max(this.og,t)}z0(){let t=this.pm.cues;if(!t)return;let i=function(t){const i=t.length,e=[];for(let s=0;s<i;s++)e.push(Qx(t[s]||t.item(s)));return Ic(e,hi),e}(t),e=jk(this.H.Nw.slice(),i);for(let t of e.R$)this.GI(t);for(let t of e.B$)this.CS(t)}ln(){this.pm.removeEventListener("cuechange",this.P0),super.ln()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.P0=()=>{this.Xw!==Da.yh&&(this.z0(),this.D0(gu.LOADED))},this.pm=t,this.pm.addEventListener("cuechange",this.P0),this.Xw=this.I0,Hu((()=>{this.P0()}))}};r();var Yx=class extends zt{l1(){this.d1.dn(Po.qg,this.Kz),this.d1.dn(Po.Zg,this.Jz)}f1(){this.d1.hn(Po.qg,this.Kz),this.d1.hn(Po.Zg,this.Jz)}_1(t){const i=t.H.Nw[0];if(!Gx(i))return;const e=function(t){const i=t.match(Wx);if(!i)return;return{Ht:i[1],ys:i[2]}}(i.V.description),s=e.Ht,n=e.ys;if(this.g1(s,n))return;const r=this.ES.SS(ra.HM,t.u,s,n,!1,jo.TTML);this.it(r),this.w1.set(t.Bw,r);for(let i of t.H.Nw)Gx(i)&&this.A1(i);t.dn(ia.Jg,this.v1)}g1(t,i){return this.tt.Nw.some((e=>e.fh===t&&e.ys===i))}A1(t){if(!t.Ht)return;const i=this.w1.get(t.Ht.Bw),e=mm(t.V.text,i,{qy:0,Xy:1/0,Zy:t.Fm});for(let t of e)i.CS(t)}async Gn(){for(let t of this.d1.Nw)t.hn(ia.Jg,this.v1);for(let t of this.tt.Nw)this.ES.jS(t);this.w1.clear(),await super.Gn()}async ln(){this.f1(),await super.ln()}constructor(t,i){super(),this.ES=t,this.d1=i,this.w1=Kn(),this.Kz=async t=>{const i=t.Ht;if(i.$w||await i.w_(ia.ww),i.$w===jo.ID3){for(;0===i.H.L;)await i.w_(ia.Jg);this._1(i)}},this.Jz=t=>{const i=t.Ht;if(i.$w!==jo.ID3||!this.w1.has(i.Bw))return;const e=this.w1.get(i.Bw);this.st(e),this.ES.jS(e),i.hn(ia.Jg,this.v1)},this.v1=t=>{Gx(t.Qm)&&this.A1(t.Qm)},this.l1()}};function Gx(t){return function(t){return function(t){return"TXXX"===t.id||"TXX"===t.id}(t)&&Wx.test(t.description)}(t.V)}var Wx=/^Track:(.+),Lang:(.+)$/;r(),r();var Mn=class extends d{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(i){super(t.AA),this.errorObject=i}};r(),r(),r();var Vx=class extends d{constructor(){super(t.vA)}};r();var Hx=class extends d{constructor(t){super("JA"),this.m1=t}},qx=new te,Xx=class extends d{constructor(t){super("Gs"),this.session=t}},Zx=class extends i{kx(){return this.M1=!0,qx.SC((t=>this.T1(t)),this.EC.$f)}async T1(t){try{Pi(t),await this.N1.EO(t);const i=await this.N1.bO(this.D1.Pb,this.D1.Xb,t);await this.I1.kx(this.D1.Pb,this.D1.Xb,i)}catch(t){Et(t);const i=t instanceof Zp?t.rL:void 0,e=new ae(ue.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,i);throw this.Ss(e),e}}async zO(t,i){let e;try{e=function(t){return fa(t,Hp())}(t)?await this.N1.WO(new A(t),this.EC.$f):await this.N1.VO(new A(t),i,this.EC.$f)}catch(t){if(Er(t))return;throw t}if(this.EC.$f.Gf)return;const s=this.S1,n=new $s;this.S1=n;try{await this.I1.Hn(e),await yc(100)}catch(t){const i=t instanceof Zp?t.rL:void 0;throw new ae(ue.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,i)}finally{void 0!==s&&await s.sL,n.iL(),this.S1===n&&(this.S1=void 0)}}Ss(t){const i=t instanceof ae?t:new ae(ue.CONTENT_PROTECTION_ERROR,t.message,t);this.jo(new Mn(i)),this.Gs()}E1(){this.I1.hn("Yb",this.zx),this.I1.hn("Qb",this.b1),this.I1.hn("dt",this.L1),this.C1=!1,this.EC.i_(),this.jo(new Xx(this))}async Gs(){let t;this.Uo();do{t=this.S1,void 0!==t&&await t.sL}while(this.S1!==t);this.E1(),await this.I1.Gs().catch(h)}constructor(t,i,e){super(),this.I1=t,this.N1=i,this.D1=e,this.M1=!1,this.C1=!1,this.EC=new Z_,this.zx=t=>{if(!this.EC.$f.Gf)switch(t.Gb){case"license-request":case"license-renewal":this.zO(t.Yb,t.Wb).catch((t=>this.Ss(t)));break;default:this.Ss(new ae(ue.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.Gb))}},this.b1=t=>{this.I1.Ix.Jb(((t,i)=>{switch(t){case"usable":le.h_((()=>{this.C1=!0,this.jo(new Vx)}),100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this.jo(new Hx(i))}}))},this.L1=t=>{this.Ss(new ae(ue.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.dn("Yb",this.zx),t.dn("Qb",this.b1),t.dn("dt",this.L1),t.Tx.then((()=>this.E1()),(t=>this.Ss(t)))}};r();var Kx=[t.vA,t.AA,t.KA],Jx=class extends i{get Ux(){return this.Ox}SO(){return this.O1.SO()}j1(t){return this.z1||(this.z1=this.P1(t)),this.z1}async P1(t){Pi(t);const i=await this.O1.WO(new A(Hp()),t);if(Pi(t),!this.Rx)throw new k("Invalid MediaKeys when setting ServerCertificate");await this.Rx.Qx(i.buffer)}async B1(t){if(!this.Rx)throw new k("Invalid MediaKeys when creating KeySession");try{this.R1.push(t);const i=await this.Rx.Bx("temporary"),e=new Zx(i,this.O1,t);return this.U1.push(e),e.dn(Kx,this.Ds),e.dn("Gs",this.Q1),e}finally{Hc(this.R1,t)}}F1(t){if(t.Y1)return!1;for(const i of this.U1)if($x(i.D1,t))return!0;for(const i of this.R1)if($x(i,t))return!0;return!1}async ln(){this.Rx=void 0,this.Uo();const t=this.U1.slice();sr(this.U1),await Promise.all(t.map((t=>t.Gs()))),this.O1.Hf()}constructor(t,i,e){super(),this.U1=[],this.z1=void 0,this.R1=[],this.Q1=t=>{t.session.hn(Kx,this.Ds),t.session.hn("Gs",this.Q1),Hc(this.U1,t.session)},this.Ox=t,this.Rx=i,this.O1=e}};function $x(t,i){return!t.Y1&&t.Pb===i.Pb&&fa(t.Xb,i.Xb)}var tC=class extends i{get G1(){var t;return null==(t=this.Ox)?void 0:t.Ux}get bP(){return this.O1}set bP(t){this.O1=t}En(t,i){this.uP=t,this.yH(i)}yH(t){this.mC=t,this.W1(this.EC.$f).catch(tg)}async W1(t){if(!le.Ks.V1||!await this.H1(t))return this.mC&&this.mC.q1?await this.X1(t):void 0}async H1(t){var i,e;if(!(null==(i=this.mC)?void 0:i.gP))return!1;let s=!1;var n;for(const i of null!=(n=null==(e=this.mC)?void 0:e.gP)?n:[]){var r;for(const e of null!=(r=i.Qz)?r:[])try{await this.Z1(i.Ux.Pb,e,t),s=!0}catch(t){Et(t)}if(s)return!0}return!1}async Z1(t,i,e){if(Pi(e),!i.byteLength)return;if(!this.mC||!this.mC.gP.length)throw new ae(ue.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(t!==Np&&t!==_n&&t!==Dp)return void 0;const s=RN(t,i),n=this.mC.gP;let r;for(const i of n){Pi(e);const n=s[i.Ux.Bb];if(n&&i.Ux.Pb===t)try{const t=await this.K1(i,e);t.SO()&&await t.j1();const s=this.eP.P_,r={Pb:i.Ux.Pb,Xb:n,Y1:s};if(this.J1(t,r)){const i=await t.B1(r);await i.kx()}return}catch(t){Et(t),r=t}}throw await le.eC()?new ae(ue.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",r):new ae(ue.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",r)}async X1(t){var i;const e=null==(i=this.mC)?void 0:i.gP;if(e)for(const i of e){Pi(t);try{const e=await this.K1(i,t);return void(e.SO()&&await e.j1())}catch(t){Et(t)}}}J1(t,i){return le.Ks.t4||this.eP.i4.lH||!t.F1(i)}K1(t,i){return this.IH.SC((i=>this.e4(t,i)),i)}async e4(i,e){if(Pi(e),!this.mC||!this.O1||!this.uP)throw new k("Not initialized");if(this.Ox){if(this.Ox.Ux!==i.Ux)throw new k("Internal key system error");return this.Ox}const s=this.O1;var n;const r=qr({},i,{RP:i.RP.map((t=>qr({},t,{persistentState:null!=(n=t.persistentState)?n:s.mj(i.Ux),rC:t.rC||s.rC(i.Ux)})))}),h=await this.uP.AH(r.Ux,r.RP),o=s.Uz(r),a=new Jx(r.Ux,h,o);return a.dn([t.vA,t.AA,t.KA],this.Ds),this.Ox=a,a}Ss(t){if(Er(t))return;const i=t instanceof ae?t:new ae(ue.CONTENT_PROTECTION_ERROR,t.message,t);this.jo(new Mn(i))}async Gn(){this.uP=void 0,this.mC=void 0,this.EC.i_(),this.EC=new Z_,await this.s4()}async s4(){await this.IH.i_();const i=this.Ox;i&&(i.hn(t.KA,this.Ds),this.Ox=void 0,await i.ln())}async Hf(){this.Uo(),this.eP.hn(un.TA,this.n4),await this.Gn(),await this.IH.ln()}constructor(t){super(),this.EC=new Z_,this.IH=new te,this.mC=void 0,this.O1=void 0,this.uP=void 0,this.Ox=void 0,this.n4=t=>{this.Z1(t.Pb,t.Xb,this.EC.$f).catch((t=>this.Ss(t)))},this.eP=t,this.eP.dn(un.TA,this.n4)}};r();r();var iC=class extends d{constructor(i){super(t.kA),this.currentTime=i}};r();var eC=class extends i{get og(){return void 0!==this.r4?this.r4.og:he.Rv}E$(){var t;null==(t=this.r4)||t.E$()}Gn(){var t;null==(t=this.r4)||t.Gn()}Hf(){this.Uo(),void 0!==this.r4&&(this.r4.Hf(),this.r4=void 0)}h4(t){if(this.r4===t)return;const i=this.og;void 0!==this.r4&&this.r4.Hf(),this.r4=t,void 0!==t&&(t.dn(Dt._w,this.Ds),t.E$());const e=this.og;i!==e&&this.jo(new Z(this.o4.I_,e))}constructor(t){super(),this.o4=t}},sC=li.BE||li.UE,nC=li.Eb,rC=li.ZE,hC=li.ZE&&li.Ra,oC=class extends i{a4(){this.oP.ended||this.I_===this.lt||(this.u4=!1)}get L$(){return this.c4}get p_(){return this.uP?this.uP.p_:re.ZB()}get M_(){const t=this.cP;if(!t||M(t.getTime()))return;const i=1e3*this.I_;return new Date(t.getTime()+i)}get cP(){if(this.oP.getStartDate)return this.JB&&this.l4||(this.l4=this.oP.getStartDate()),this.l4}get I_(){return this.d4?this.d4.I_:void 0!==this.f4?this.f4:this.QC.currentTime}get Su(){return this.$u}get lt(){return this.d4?this.d4.lt:this.uP?this.uP.lt:this.QC.duration}get L_(){return this.fg?this._4():this.d4?this.d4.L_:this.QC.ended||this.u4}_4(){return void 0!==this.f4&&this.lt===this.f4}get dt(){return this.rP}get oP(){return this.QC}get V_(){return this.g4?this.w4:this.d4?this.d4.V_:this.QC.paused}get K_(){return this.zo.xB(re.gn(this.QC.played))}get Mi(){return this.QC.offsetHeight*le.Ks.A4}get Ti(){return this.QC.offsetWidth*le.Ks.A4}get fa(){return this.eR}get og(){return this.v4.og}get cg(){return this.uP?this.uP.cg:re.ZB()}get fg(){return this.d4?this.d4.fg:this.JB}get T$(){return this.d4?this.d4.T$:this.N$}get Q_(){return this.d4?this.d4.Q_:this.QC.muted}set Q_(t){this.d4?this.d4.Q_=t:(this.QC.muted=t,this.m4())}get q_(){return this.d4?this.d4.q_:void 0!==this.y4?this.y4:this.QC.playbackRate}set q_(t){this.d4?this.d4.q_=t:this.V_||this.c4?(this.y4=t,this.M4()):(this.y4=void 0,this.QC.playbackRate=t,this.M4())}M4(){const t=this.q_;this.T4!==t&&(this.T4=t,this.jo(new ce(this.I_,t)))}get N4(){return this.vB}get Mg(){return this.d4?this.d4.Mg:this.QC.volume}set Mg(t){this.d4?this.d4.Mg=t:(this.QC.volume=t,this.m4())}m4(){const t=this.Mg,i=this.Q_;this.D4===t&&this.I4===i||(this.D4=t,this.I4=i,this.jo(new ge(this.I_,this.Mg)))}U_(){return Bb(this.QC)}Bg(){this.S4||(this.S4=!0);const t=this.E4();return this.b4(),t}b4(){this.g4?this.w4&&(this.w4=!1,this.jo(new ih(this.I_))):this.L4()}L4(){if(this.d4)this.d4.Bg();else{li.ZE&&!li.Ra&&this.QC.preload===Sl.uB&&(this.QC.preload=Sl.XM);const t=this.q_,i=this.QC.play();t!==this.oP.playbackRate&&(this.q_=t),nu(i)?i.then(this.x4,this.C4):this.O4.O$()&&this.j4()}}Pg(){this.g4?this.w4||(this.w4=!0,this.jo(new bs(this.I_))):this.z4()}z4(){this.d4?this.d4.Pg():(this.QC.pause(),this.O4.Hn()),this.P4(new Eu)}E4(){const t=new $s;return this.B4.push(t),t.sL}R4(){for(const t of this.B4)t.iL(void 0);sr(this.B4)}P4(t){for(const i of this.B4)i.eL(t);sr(this.B4)}j4(){this.g4||this.d4||this.R4()}U4(t){this.g4||this.d4||this.P4(t)}Em(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.d4?this.d4.Em(t,i,e):(this.Q4.i_(),this.Q4=new Z_,this.F4=this.Y4(t,i,e,this.F4,this.Q4.$f).catch(h))}sP(t){const i=this.cP;if(!i||M(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Em(e)}async Y4(i,e,s,n,r){try{for(this.f4=i,this.G4=i,this.W4=le.n_(),s&&!this.JB?this.N$=!0:(this.JB=!0,this.N$=!1),this.u4&&!this._4()&&(this.u4=!1),this.N$?this.jo(new mk(this.I_)):this.jo(new gt(i)),await n.catch(h),Pi(r),this.V4&&this.H4(),this.v4.og===he.Rv&&await this.v4.w_(Dt._w,r);0===this.QC.seekable.length||hC&&!this.S4;)await Promise.race([ni(this.QC,"timeupdate",r),yc(100,r)]),Pi(r);let o=_k(this.p_,i,.05),a=this.cg,u=!0,c=!1;for(;;){if(a=this.cg,a.L>0&&!a.ur(o)&&(o=a.SB(o),u=!0),e){const t=this.p_;if(!t.ur(o)){const i=_k(t,o,1);i!==o&&(o=i,u=!0)}}if(rC){const t=this.q4();void 0!==t&&o>t&&(o=t,u=!0)}if(!c){const t=this.X4();void 0!==t&&o>t&&(c=!0,await this.Z4(t,!1,r),await ni(this.QC,"seeked",r),Pi(r),u=!0)}if(u){u=!1,await this.Z4(o,e,r),Pi(r);let t=this.I_;a=this.cg,o=a.SB(o);let i=1;for(;S.abs(o-t)>=Vu;)a=this.cg,o=uC(o,a,i),await this.Z4(o,e,r),Pi(r),t=this.I_,i++}if(!(this.QC.seeking||this.v4.og<he.Uv))break;await ig((i=>{var e;return Promise.race([ni(this.QC,"seeked",i),this.w_([t.BA,t.yA],i),this.v4.w_(Dt._w,i),null==(e=this.uP)?void 0:e.w_(L.MU,i)].filter(oe))}),r),Pi(r)}this.K4()}catch(t){if(Er(t))return;0}}async Z4(i,e,s){Pi(s);let n=this.cg;if(i=n.SB(i),this.V4){let e=!0;for(;e||this.v4.og<he.Qv;)n=this.cg,n.ur(i)||(i=n.SB(i),e=!0),e?(e=!1,this.f4=i,this.J4(this.I_)):await ig((i=>Promise.race([this.w_(t.yA,i),this.v4.w_(Dt._w,i)])),s);Pi(s)}const r=ni(this.QC,"seeking",s);e&&this.QC.fastSeek?this.QC.fastSeek(i):this.QC.currentTime=i,this.f4=void 0,this.J4(this.I_),this.QC.seeking&&await r}q4(){if(!this.uP||!this.uP.zH)return;const t=this.uP.PH,i=this.uP.BH,e=t&&i?t.bn(i):t||i;if(!e||0===e.L)return;const s=e.yn(e.L-1),n=e.wn(e.L-1);return S.max(s,n-.001)}X4(){if(!this.uP||!this.uP.zH)return;const t=this.uP.BH;if(!t||0===t.L)return;const i=t.yn(t.L-1);let e=t.wn(t.L-1)-.02;return e-=.001,S.max(i,e)}J4(t){this.G4!==t&&(this.G4=t,this.N$?this.jo(new mk(t)):this.jo(new gt(t)))}K4(){const t=this.N$;this.JB=!1,this.N$=!1,this.W4=0,this.G4=NaN,this.V4&&this.t2(),t?(this.jo(new iC(this.I_)),this.i2()):this.jo(new ke(this.I_))}H4(){this.g4||(this.w4=this.V_,this.g4=!0,this.z4())}t2(){this.g4&&(this.g4=!1,this.w4||this.b4())}RH(t){for(const i of t){if(i.$w===si.$C&&hL.RH(i,this.QC))return i;if(i.$w===si.tO&&Ak.RH(i))return i}}we(){this.vB=!1,Vs(this.QC)&&(this.QC.style.display="none")}ye(){this.vB=!0,Vs(this.QC)&&(this.QC.style.display="block")}get rt(){return this.e2}get Il(){return this.oR}SS(t,i,e,s,n,r,h,o,a){const u=new gn(t,i,e,s,n,r,h,a,o);return this.Tl.it(u),this.s2.it(u),u}yP(){return!0}TP(t,i,e,s,n){const r=c.createElement("track");r.src=Xg(t),r.kind=i,r.label=null!=e?e:"",s&&(r.srclang=s),r.default=!!n,r.id=Tn(),this.QC.appendChild(r);const h=this.QC.textTracks.getTrackById(r.id),o=new kn(h,r);return this.n2.it(o),this.h2.push(o),o}jS(t){this.Tl.st(t),this.s2.st(t)}DP(){for(const t of this.Tl.Nw.slice())t.ln();this.Tl.Gn();for(const t of this.h2.slice())this.n2.st(t),t.ln();sr(this.h2)}UP(){let t=this.QC.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this.o2),t.addEventListener("removetrack",this.a2),t.addEventListener("change",this.u2))}EP(){let t=this.QC.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this.o2),t.removeEventListener("removetrack",this.a2),t.removeEventListener("change",this.u2))}c2(t,i){if(li.ZE){if(t.kind===ra.XM)return void this.l2(t);if(t.kind===ra.kI&&""===t.label&&""===t.language&&!lC(t))return void this.d2(t,i)}cC(this.n2,t)||this.n2.it(new kn(t,i))}l2(t){t.mode=Da.Zw;const i=new Fx(t);this.n2.it(i),this.s2.it(i)}d2(t,i){const e=()=>{lC(t)&&(t.removeEventListener("cuechange",e),this.n2.it(new kn(t,i)))};t.addEventListener("cuechange",e),t.mode=Da.Zw}f2(t){let i=this.QC.getElementsByTagName("track");for(let e=0;e<i.length;e++){let s=i[e]||i.item(e);if(s.track===t)return s}}En(i){return this._2.SC((async e=>{if(Pi(e),this.uP)throw new k("Already loaded a media source");let s;if(i.$w===si.$C)s=new hL(i,this,this.MH,this.iC),this.V4=!1,this.v4.h4(new Dk(this));else{if(i.$w!==si.tO)throw new k("Unsupported configuration");{const e=this.V4?new Ik(this):new Dk(this);s=new Ak(i,this,e,this.MH,this.iC,void 0,this.ZJ),this.V4=sC,this.v4.h4(e),nC&&(this.dn(t.XA,this.g2),this.v4.dn(Dt._w,this.w2))}}return this.uP=s,await s.YW(),s}))}A2(){if(this.c4)return;const t=this.q_;this.c4=!0,this.q_=t,this.QC.playbackRate=0,this.v4&&this.v4.E$()}m2(){if(!this.c4)return;const t=this.q_;this.c4=!1,this.q_=t,this.M2()}M2(){this.QC.currentTime=this.QC.currentTime,this.v4&&this.v4.E$()}async Gn(){this.JB=!1,this.N$=!1,le.r_(this.T2),this.T2=0,this.zo=re.ZB(),this.Q4.i_(),this.f4=void 0,this.G4=NaN,this.l4=void 0,this.V4=!1,this.g4=!1,this.rP=void 0,this.u4=!1,this.N2=void 0,this.D2=!1,this.S4=!1,this.I2&&(this.S2(),this.I2=!1),this.P4(new Eu),this.v4.h4(new Dk(this)),this.O4.Gn(),this.n2.Gn(),this.m2(),nC&&(Ws(this.E2),this.E2=0,this.hn(t.XA,this.g2)),await this._2.i_(),await this._2.SC((async()=>{this.uP&&(await this.uP.Hf(),this.uP=void 0)}))}async Hf(){this.I2=!1,this.b2(),this.EP(),await this.Gn(),await this._2.ln(),this.O4.Hf(),this.v4.Hf(),await this.MH.Hf(),this.DP(),this.Tl.ln(),this.n2.ln(),await this.L2.ln(),this.C2.ln(),this.e2.ln(),this.Uo()}S2(){this.oP.addEventListener("play",this.O2),this.oP.addEventListener("pause",this.j2),this.oP.addEventListener("timeupdate",this.z2),this.oP.addEventListener("progress",this.P2),this.oP.addEventListener("loadstart",this.B2),this.oP.addEventListener("ended",this.R2),this.oP.addEventListener("ratechange",this.U2),this.oP.addEventListener("volumechange",this.Q2),this.oP.addEventListener("durationchange",this.F2),this.oP.addEventListener("resize",this.Y2),this.oP.addEventListener("loadedmetadata",this.Y2),this.oP.addEventListener("error",this.G2),this.oP.addEventListener("emptied",this.W2),uT()?(this.QC.addEventListener("encrypted",this.V2),this.QC.addEventListener("waitingforkey",this.H2)):void 0!==J.WebKitMediaKeys&&"function"==typeof J.WebKitMediaKeys.isTypeSupported?this.QC.addEventListener("webkitneedkey",this.q2):Ln()?this.QC.addEventListener("webkitneedkey",this.X2):void 0!==J.MSMediaKeys&&"function"==typeof J.MSMediaKeys.isTypeSupported&&this.QC.addEventListener("msneedkey",this.Z2)}b2(){this.oP.removeEventListener("play",this.O2),this.oP.removeEventListener("pause",this.j2),this.oP.removeEventListener("timeupdate",this.z2),this.oP.removeEventListener("progress",this.P2),this.oP.removeEventListener("loadstart",this.B2),this.oP.removeEventListener("ended",this.R2),this.oP.removeEventListener("ratechange",this.U2),this.oP.removeEventListener("volumechange",this.Q2),this.oP.removeEventListener("durationchange",this.F2),this.oP.removeEventListener("resize",this.Y2),this.oP.removeEventListener("loadedmetadata",this.Y2),this.oP.removeEventListener("error",this.G2),this.oP.removeEventListener("encrypted",this.V2),this.oP.removeEventListener("waitingforkey",this.H2),this.oP.removeEventListener("webkitneedkey",this.q2),this.oP.removeEventListener("webkitneedkey",this.X2),this.oP.removeEventListener("msneedkey",this.Z2),this.oP.removeEventListener("emptied",this.W2)}K2(){this.d4||(this.zo=this.K_,this.d4=Mk(this),this.b2(),this.d4.dn(pk,this.Ds))}J2(){if(!this.d4)return;const t=this.d4;this.d4=void 0,this.v4.E$(),Tk(this,t),t.Hf(),this.S2()}i2(){const t=this.I_;this.jo(new bl(t,void 0)),this.N2=t}HP(t){this.rP=t,this.P4(this.rP),this.jo(new tt(this.rP))}get P_(){return!!this.QC.webkitCurrentPlaybackTargetIsWireless}get t3(){return this.i3}get i4(){return qr({},eL)}e3(){this.t3||(PO(this.QC,le.Ks),this.i3=!0)}s3(t){t.appendChild(this.QC)}iJ(){nC&&this.g2(),this.v4.E$()}get bP(){return this.MH.bP}set bP(t){this.MH.bP=t}get n3(){return this.ZJ}set n3(t){this.ZJ=t}get G1(){return this.MH.G1}Yg(){this.MH.s4().catch(h),this.n2.Gn()}get Sg(){return this.D2}set Sg(t){this.D2=t,this.I2&&!this.D2&&(this.I2=!1,this.S2())}constructor(i,e,s,n){super(),this.rP=void 0,this.vB=!0,this.uP=void 0,this._2=new te,this.d4=void 0,this.eR=new Th,this.h2=[],this.f4=void 0,this.W4=0,this.G4=NaN,this.l4=void 0,this.N2=void 0,this.JB=!1,this.N$=!1,this.r3=he.Rv,this.T2=0,this.F4=Promise.resolve(),this.Q4=new Z_,this.B4=[],this.zo=re.ZB(),this.y4=void 0,this.T4=1,this.I4=!1,this.D4=1,this.u4=!1,this.D2=!1,this.I2=!1,this.V4=!1,this.g4=!1,this.w4=!1,this.c4=!1,this.i3=!1,this.E2=0,this.S4=!1,this.o2=t=>{const i=t.track,e=this.f2(i);this.c2(i,e)},this.a2=t=>{const i=cC(this.n2,t.track);i&&this.n2.st(i)},this.u2=()=>{for(let t=0;t<this.n2.L;t++){let i=this.n2.Iw(t);i instanceof kn&&i.k0()}},this.g2=()=>{if(void 0===this.uP||!sL(this.uP))return;const t=this.uP,i=t.KJ,e=t.JJ;if(!i||!e)return;if(t.zH)return void this.m2();if(t.og===Zs.VK)return;const s=i.p_,n=e.p_;if(0===s.L||0===n.L)return void this.m2();const r=this.I_;if(r<s.yn(0)||r<n.yn(0))return void this.m2();if(s.ur(r)!==n.ur(r)){if(t.TH(r))return;this.A2()}else if(this.m2(),!this.E2&&this.O4.O$()){s.CB(n).BB(r,r+.5)&&(this.E2=Xh(this.h3))}},this.h3=()=>{this.E2=0,this.g2()},this.w2=()=>{if(this.fg||this.T$)return;if(this.v4.og>=he.Qv)return;if(void 0===this.uP||!sL(this.uP))return;const t=this.uP,i=t.KJ,e=t.JJ;if(!i||!e)return;const s=this.I_,n=i.p_,r=e.p_;if(!n.ur(s)||!r.ur(s))return;n.CB(r).BB(s-5,s)&&(this.c4?this.m2():this.M2())},this.O2=()=>{this.jo(new ih(this.I_))},this.j2=()=>{this.U4(new Eu),this.jo(new bs(this.I_))},this.o3=()=>{this.j4(),this.jo(new Kr(this.I_))},this.U2=()=>{this.M4()},this.F2=()=>{this.jo(new jn(this.lt))},this.P2=()=>{this.jo(new vi(this.I_))},this.B2=()=>{this.jo(new bn)},this.z2=()=>{const t=this.I_,i=this.fg,e=this.v4.og<he.Qv&&!this.L_,s=void 0!==this.N2,n=s&&this.N2!==t;(i||!s||n&&!e)&&this.i2()},this.R2=()=>{!this.u4&&this.L_&&(this.u4=!0,this.jo(new Ki(this.I_)))},this.G2=()=>{if(null!==this.QC.error){const i=this.QC.error;var t;this.HP(new ma(null!=(t=i.code)?t:Gi.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.W2=()=>{this.D2&&(this.b2(),this.I2=!0)},this.a3=t=>{if(le.r_(this.T2),this.T2=0,t.readyState<=he.Uv)if(this.JB||this.N$){const i=le.n_()-this.W4;if(i<250)return void(this.T2=le.h_((()=>this.a3(t)),250-i))}else if(void 0!==this.uP&&this.uP.TH(this.I_))return void(this.T2=le.h_((()=>this.a3(t)),250));this.r3!==t.readyState&&(this.r3=t.readyState,this.jo(t))},this.Q2=()=>{this.m4()},this.Y2=()=>{this.pg>0&&this.wg>0&&this.jo(new Gs)},this.V2=t=>{this.jo(new Bs(t.initDataType,t.initData||new ArrayBuffer(0)))},this.H2=()=>{this.jo(new Wp)},this.Z2=t=>{const i=t.initData,e=i?nt(i).buffer:new ArrayBuffer(0);this.jo(new Bs(Np,e))},this.q2=t=>{if(t.initData){const i=function(t){try{const i=mo(t),e=new Eo,s=pu(i,e,dt(i,e,!0));return Es(BA(s,!0))}catch(t){return}}(t.initData);if(!i)return;this.jo(new Bs(_n,i))}else this.jo(new Bs(_n,new ArrayBuffer(0)))},this.X2=t=>{const i=t.initData,e=i?nt(i).buffer:new ArrayBuffer(0);this.jo(new Bs(Np,e))},this.x4=()=>{this.j4()},this.C4=t=>{this.U4(t)},this.u3=i=>{this.jo(i),i.type===t.AA&&this.HP(Yn(i.errorObject))},this.QC=i,this.iC=e,this.$u=s,this.oR=n,this.v4=new eC(this),this.v4.dn(Dt._w,this.a3),this.v4.h4(new Dk(this)),this.O4=new bk(this),this.O4.dn(Dt._v,this.o3),this.MH=new tC(this),this.MH.dn([t.vA,t.AA,t.KA],this.u3),this.Tl=new Or,this.n2=new Or,this.C2=new Fe([this.Tl,this.n2]),this.L2=new Yx(this,this.C2),this.e2=new Fe([this.C2,this.L2.tt]),this.s2=new Px(this),this.S2(),this.UP()}};var aC=.01;function uC(t,i,e){if(void 0===e&&(e=0),!i.L)return 0;let s=i.SB(t);const n=aC*e;return s===i.yn(0)?s+=n:s===i.wn(i.L-1)&&(s-=n),s}function cC(t,i){for(let e of t.Nw)if(e.Nm===i)return e}function lC(t){return!!t.cues&&t.cues.length>0}r();var dC={ZV:void 0,KV:void 0,JV:void 0,$V:void 0,tH:void 0,iH:void 0,hH:void 0,eH:void 0,sH:void 0,nH:void 0,rH:void 0},fC=class extends i{get so(){return this.Oa||(this.Oa=Kb(this)),this.Oa}get ZV(){}get KV(){}get JV(){}get $V(){}get tH(){}get iH(){}get hH(){}get eH(){}get sH(){}get nH(){}get rH(){}constructor(...t){super(...t),this.Oa=void 0}},_C=class extends oC{Cg(){}get wg(){return 0}get pg(){return 0}constructor(t,i,e){super(t,i,e,new fC)}};r(),r();var $u=class{get _e(){return this.l3}we(){this.l3.style.display="none"}ye(){this.l3.style.display="block"}s3(t){t.appendChild(this.l3)}ln(){rs(this.l3)}constructor(t=5){let i=J.document.createElement("div");i.className="theoplayer-texttracks",i.style.position="absolute",i.style.display="none",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.width="100%",i.style.height="100%",i.style.lineHeight="1.3em",i.style.zIndex=""+t,this.l3=i,this.ye()}};function gC(t,i){return qr({},i,wg(function(t){return{ZV:t.ZV,KV:t.KV,JV:t.JV,$V:t.$V,tH:t.tH,iH:t.iH,hH:t.hH,eH:t.eH,sH:t.sH,nH:t.nH,rH:t.rH}}(t)))}function wC(t){return t.JV&&tl(t.JV,"%")?Number(t.JV.replace("%",""))/100:t.JV&&tl(t.JV,"em")?Number(t.JV.replace("em","")):1}r(),r(),r(),r();var AC,Jn,zu=class{d3(t){const i=this.f3(t);if(!i)return!1;for(const t of i)rs(t);return this._3(t),!0}get Ht(){return this.tp}get oP(){return this.QC}get Su(){return this.$u}get g3(){return this.w3}get A3(){return this.v3}YW(){this.m3(),this.tp.H.Nw.forEach((t=>this.CS(t))),this.Su.dn(yt.un,this.y3),this.M3(this.Su.lu,this.Su.fu)}T3(t){this.v3=t,this.w3=gC(this.v3,this.N3),this.w3.ZV&&(this.oP.style.fontFamily=this.w3.ZV),this.w3.hH&&(this.oP.style.visibility=this.w3.hH),this.M3(this.Su.lu,this.Su.fu),this.D3(!0)}I3(){return this.w3}S3(t){return this.E3.has(t.Bw)}m3(){this.tp.dn(ia.Jg,this.b3),this.tp.dn(ia.iw,this.L3),this.tp.dn(ia.ra,this.x3)}C3(){this.tp.hn(ia.Jg,this.b3),this.tp.hn(ia.iw,this.L3),this.tp.hn(ia.ra,this.x3)}O3(t){t.dn(kl.Rm,this.j3),t.dn(kl.Um,this.z3),t.dn(kl.mw,this.P3)}B3(t){t.hn(kl.Rm,this.j3),t.hn(kl.Um,this.z3),t.hn(kl.mw,this.P3)}CS(t){this.O3(t),t.ao&&this.R3(t)}GI(t){this.B3(t),this.U3(t)}Q3(){this.tp.Xw===Da.zn?this.F3():this.Y3()}F3(){if(!this.G3)return;this.G3=!1;const t=this.Su.lu,i=this.Su.fu;this.M3(t,i),this.D3(!1)}Y3(){this.G3||(this.G3=!0,this.D3(!0))}R3(t){this.G3||t.ao&&!this.S3(t)&&this.D3(!1)}U3(t){this.S3(t)&&this.D3(!0)}W3(t){(t.ao||this.S3(t))&&this.D3(!0)}D3(t){const i=this.V3,e=this.G3?[]:this.tp.W.Nw.slice();this.H3(e,i,t),this.V3=e}f3(t){var i;return null==(i=this.E3.get(t.Bw))?void 0:i.q3}X3(t,i){this.E3.set(t.Bw,{Qm:t,q3:i})}_3(t){this.E3.delete(t.Bw)}Z3(){return this.V3.slice()}ln(){rs(this.oP),this.E3.clear(),this.C3(),this.tp.H.Nw.forEach((t=>this.B3(t))),this.Su.hn(yt.un,this.y3)}constructor(t,i,e,s,n){this.E3=Kn(),this.G3=!0,this.v3=qr({},dC),this.V3=[],this.b3=t=>this.CS(t.Qm),this.L3=t=>this.GI(t.Qm),this.x3=()=>this.Q3(),this.j3=t=>this.R3(t.Qm),this.z3=t=>this.U3(t.Qm),this.P3=t=>this.W3(t.Qm),this.y3=t=>{this.M3(t.width,t.height)},this.tp=t,this.N3=this.w3=n,this.QC=this.K3(e),this.$u=s,i.appendChild(this.QC)}};function vC(t,i){return t?{J3:t.J3,t5:t.t5,i5:t.i5,wl:i}:null}function mC(t){const i=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return i?{J3:j(i[1],16),t5:j(i[2],16),i5:j(i[3],16)}:null}function pC(t){return("0"+t.toString(16)).slice(-2)}function yC(t){return"#"+pC(t.J3)+pC(t.t5)+pC(t.i5)}function MC(t){const i=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return i?{J3:j(i[1],10),t5:j(i[2],10),i5:j(i[3],10),wl:T(i[4])}:null}function TC(t,i){return function(t){return t?"rgba("+t.J3+", "+t.t5+", "+t.i5+", "+t.wl+")":void 0}(vC(mC(t),i/100))}function NC(t){return DC[t||"none"]}r(),function(t){t.$c='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.Rc='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.Oc='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.Vc='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif'}(AC||(AC={})),function(t){t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent"}(Jn||(Jn={}));var DC={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},IC=G_({monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:"monospace, sans-serif",monospaceSerif:"monospace, serif",proportionalSansSerif:"Arial",proportionalSerif:"Times New Roman",default:"monospace, sans-serif"}),SC={KV:Jn.WHITE,ZV:"Arial, Helvetica, Sans-Serif",JV:"100%",$V:Jn.TRANSPARENT,tH:Jn.TRANSPARENT,iH:"none",hH:"visible",eH:void 0,sH:void 0,nH:void 0,rH:void 0},EC=class extends zu{K3(t){let i=c.createElement("div");i.className="theoplayer-ttml-texttrack-"+t;const e=i.style;return e.position="absolute",GT(e,"flex"),e.overflow="hidden",e.pointerEvents="none",e.top="0",e.left="0",e.width="100%",e.height="100%",i}M3(t,i){let e=S.min(t,i)/15;this.oP.style.fontSize=e+"px"}H3(t,i,e){for(const t of i)!e&&t.ao||this.d3(t);for(const i of t)this.e5(i)}e5(t){let i=this.f3(t);i||(i=this.s5(t),this.X3(t,i));for(const t of i)this.oP.appendChild(t)}s5(t){let i=[],e=t.sI,s=t.Ky,n=t.V;if(0===C.keys(s).length){const s=c.createElement("div");BC(s),bC(n,e,t.hI,s,s),s.firstChild&&i.push(s)}else for(let r of C.keys(s)){let h=c.createElement("div");h.id=r,BC(h),xC(h,"region",s[r],e),bC(n,e,t.hI,h,h),h.firstChild&&i.push(h)}return i}T3(t){!function(t,i){var e,s;t.style.marginTop=(null!=(e=i.eH)?e:0)+"px",t.style.marginBottom=(null!=(s=i.sH)?s:0)+"px",t.style.height="calc(100% - "+t.style.marginTop+" - "+t.style.marginBottom+")"}(this.oP,t),tL(this.oP,t)}constructor(t,i,e,s){super(t,i,e,s,SC)}};function bC(t,i,e,s,n){if(ps(t)&&function(t){return"SPAN"===t.NI.toUpperCase()||"P"===t.NI.toUpperCase()||"BR"===t.NI.toUpperCase()||"DIV"===t.NI.toUpperCase()||"BODY"===t.NI.toUpperCase()}(t)){let r=LC(t);if(!r||(null==n?void 0:n.id)===r){let r;if("BODY"===t.NI.toUpperCase())r=n;else{if(r=function(t){let i;switch(t.NI.toUpperCase()){case"BR":i=c.createElement("br");break;case"SPAN":i=c.createElement("span"),kC(i,t);break;case"P":i=c.createElement("p"),function(t){const i=t.style;i.fontFamily="inherit",i.color="inherit",i.textAlign="inherit",i.padding="0",i.margin="0",i.lineHeight="inherit"}(i),kC(i,t);break;case"DIV":i=c.createElement("div"),kC(i,t)}return i}(t),!r)return;s.appendChild(r)}!function(t,i,e,s){let n=i.EI("style");jC(t,i.NI,n,e,s),function(t,i,e){for(const s of i.TI)zC(t,i.NI,s.NI,s.zy,e)}(t,i,s)}(r,t,i,n),function(t,i,e){let s=null==i?void 0:i.EI("smpte:backgroundImage");if(s){s=s.replace("#","");let n=e&&CC(e,(t=>t.TI.some((t=>"id"===t.NI&&t.zy===s))));n&&OC(t,n,i,!0)}!function(t,i){const[e]=i.k;if(!e||"metadata"!==e.NI.toLowerCase())return;const[s]=e.k;OC(t,s,i)}(t,i)}(r,t,e);for(const s of t.bI)bC(s,i,e,r,n)}}else if(hm(t)){const i=c.createTextNode(t.JM);s.appendChild(i)}}function LC(t){const i=t.EI("region");if("p"===t.NI.toLowerCase())return i;const e=[];for(const i of t.k)e.push(LC(i));return function(t){t.filter(((i,e)=>t.indexOf(i)===e))}(e),0===e.length?i:1===e.length?null!=(s=e[0])?s:i:void 0;var s}function kC(t,i){let e=i.SI(dm,"id");e&&(t.id=e)}function xC(t,i,e,s){jC(t,i,e.style,s,t);for(const s of C.keys(e))zC(t,i,s,e[s],t)}function CC(t,i){if(i(t))return t;for(let e of t.k){const t=CC(e,i);if(t)return t}return null}function OC(t,i,e,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=c.createElement("img");n.src=function(t){const i=t&&t.bI.length>0?t.bI[0]:null;return i&&hm(i)?"data:image/png;base64,"+i.JM:""}(i),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,i){const e=t.style;GT(e,"flex");let s=i.EI("smpte:backgroundImageVertical");if(s)switch(s.toLowerCase()){case"left":e.alignItems="flex-start";break;case"center":e.alignItems="center";break;case"right":e.alignItems="flex-end";break;case"inherit":e.alignItems="inherit"}else e.alignItems="center";let n=i.EI("smpte:backgroundImageHorizontal");if(n)switch(n.toLowerCase()){case"left":e.justifyContent="flex-start";break;case"center":e.justifyContent="center";break;case"right":e.justifyContent="flex-end";break;case"inherit":e.justifyContent="inherit"}else e.justifyContent="center"}(t,e),t.appendChild(n)}function jC(t,i,e,s,n){if(e)for(const r of e.split(" "))if(s[r])for(const e of C.keys(s[r]))"style"===e.toLowerCase()?jC(t,i,s[r][e],s,n):zC(t,i,e,s[r][e],n)}function zC(t,i,e,s,n){const r=t.style;switch(e){case"backgroundColor":r.backgroundColor=s;break;case"color":r.color=s;break;case"direction":r.direction=s;break;case"display":"none"===s&&(r.display="none");break;case"fontFamily":{const t=IC.get(s);r.fontFamily=t||s;break}case"fontSize":tl(s,"px")?s=j(s)/24+"em":tl(s,"c")&&(s=s.replace("c","em")),r.fontSize=s;break;case"fontStyle":r.fontStyle=s;break;case"fontWeight":r.fontWeight=s;break;case"lineHeight":r.lineHeight=s;break;case"opacity":r.opacity=s;break;case"overflow":r.overflow=s;break;case"padding":r.padding=s;break;case"textAlign":"right"===s?(r.textAlign="right",r.justifyContent="flex-end"):"start"===s?(r.textAlign="start",r.justifyContent="flex-start"):"center"===s?(r.textAlign="center",r.justifyContent="center"):"end"===s?(r.textAlign="end",r.justifyContent="flex-end"):"left"===s&&(r.textAlign="left",r.justifyContent="flex-start");break;case"textDecoration":{let t=s;t=t.replace("lineThrough","line-through"),t=t.replace("noUnderline","none"),t=t.replace("noLineThrough","none"),t=t.replace("noOverline","none"),r.textDecoration=t;break}case"unicodeBidi":r.unicodeBidi=s.replace("bidiOverride","bidi-override");break;case"visibility":r.visibility=s;break;case"zIndex":r.zIndex=s;break;case"displayAlign":{let t;if("before"===s.toLowerCase())t="flex-start";else if("center"===s.toLowerCase())t="center";else{if("after"!==s.toLowerCase())return;t="flex-end"}r.alignItems=t;break}case"extent":{const e=PC(i.toLowerCase())?n:t;let r,h,o=s.split(" ");o.length>=2?(r=o[0],h=o[1]):r=h="100%",e&&(e.style.height=h,e.style.width=r);break}case"origin":{const e=PC(i.toLowerCase())?n:t,[r,h]=s.split(" ");e&&(r||h)&&(r&&(e.style.left=r),h&&(e.style.top=h));break}case"showBackground":case"textOutline":break;case"wrapOption":r.whiteSpace=s.replace("noWrap","nowrp").replace("wrap","normal").replace("nowrp","nowrap");break;case"writingMode":{let t,i,e,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",i="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",e="upright";break;case"tblr":t="vertical-lr",e="upright";break;case"rl":t="horizontal-tb",i="rtl";break;default:return}r.writingMode=t,r.setProperty("-webkit-writing-mode",t),i&&(r.direction=i),e&&(r.textOrientation=e,r.setProperty("-webkit-text-orientation",e)),n&&(r.unicodeBidi=n);break}case"linePadding":if(tl(s,"c")){let t=s.replace("c","em");r.paddingLeft=r.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?r.textAlign="":r.textAlign=s}}function PC(t){return"div"===t||"p"===t||"span"===t}function BC(t){const i=t.style;GT(i,"flex"),i.top="auto",i.left="5%",i.width="90%",i.height="100%",i.maxHeight="100%",i.maxWidth="100%",i.alignItems="flex-start",i.overflow="visible",i.position="absolute",i.fontFamily="Arial, Helvetica, Sans-Serif",i.color="white",i.textShadow="rgb(0, 0, 0) -1px -1px 0px, rgb(0, 0, 0) 1px -1px 0px, rgb(0, 0, 0) -1px 1px 0px, rgb(0, 0, 0) 1px 1px 0px",i.textAlign="start",i.writingMode="horizontal-tb",i.setProperty("-webkit-writing-mode","horizontal-tb"),i.padding="0",i.margin="0",i.lineHeight="1.3em"}r(),r();var RC,yr,UC=void 0;function QC(t){return UC||(UC=J.document.createElement("textarea")),UC.innerHTML=t,UC.value}function FC(t,i){let e="Data",s="",n=[],r=t.charAt(i.Lu),h="",o={$w:"starttag",zj:"",n5:[]};for(;i.Lu<t.length+1;){switch(r=i.Lu<t.length?t.charAt(i.Lu):"EOF",e){case"Data":switch(r){case"&":let n=t.substring(i.Lu).match(/&#?[0-9a-zA-Z]+;/);n?(s+=QC(n[0]),i.Sm(n[0].length-1)):s+="&";break;case"<":if(s)return{$w:"string",V:s};e="Tag";break;case"EOF":return{$w:"string",V:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":e="StartTagAnnotation";break;case".":e="StartTagClass";break;case"/":e="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,e="TimestampTag";break;case">":return i.Sm(1),o;case"EOF":return o;default:s=r,e="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":e="StartTagAnnotation";break;case"\n":h=r,e="StartTagAnnotation";break;case".":e="StartTagClass";break;case">":return i.Sm(1),{$w:"starttag",zj:s,n5:[]};case"EOF":return{$w:"starttag",zj:s,n5:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(h),h="",e="StartTagAnnotation";break;case"\n":n.push(h),h=r,e="StartTagAnnotation";break;case".":n.push(h),h="";break;case">":return i.Sm(1),n.push(h),{$w:"starttag",zj:s,n5:n};case"EOF":return n.push(h),{$w:"starttag",zj:s,n5:n};default:h+=r}break;case"StartTagAnnotation":switch(r){case"&":e="CharRefInAnnotation";break;case">":i.Sm(1);let t=h.trim();return t=t.replace(/\s/," "),{$w:"starttag",zj:s,n5:n,r5:t};default:h+=r}break;case"CharRefInAnnotation":let a="";for(let e=i.Lu;">"===t.charAt(e);e++)a+=t.charAt(e);h+=a||"&",e="StartTagAnnotation";break;case"EndTag":switch(r){case">":return i.Sm(1),{$w:"endtag",zj:s};case"EOF":return{$w:"endtag",zj:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return i.Sm(1),{$w:"timestamp",h5:s};case"EOF":return{$w:"timestamp",h5:s};default:s+=r}}i.Sm(1)}return o}function YC(t){let i;if(t.getBoundingClientRect&&t.parentNode&&(i=t.getBoundingClientRect()),!i)return{left:0,top:0};const e=c.documentElement,n=c.body,r=e.clientLeft||n.clientLeft||0,h=s.pageXOffset||n.scrollLeft,o=i.left+h-r,a=e.clientTop||n.clientTop||0,u=s.pageYOffset||n.scrollTop,l=i.top+u-a;return{left:S.round(o),top:S.round(l)}}function GC(t,i,e,s){if(void 0===s&&(s=0),!t||!i)return;t.style.left="0px";let n=t.getClientRects(),r=i.getClientRects();if(0===n.length||0===r.length)return;let h=n[0],o=r[0],a=h.width/2+h.left;WC(t,o.width/2+o.left-a,e,s)}function WC(t,i,e,s){void 0===s&&(s=0),HC(t,i,"left","right",e,s)}function VC(t,i,e,s){void 0===s&&(s=0),HC(t,i,"top","bottom",e,s)}function HC(t,i,e,s,n,r){void 0===r&&(r=0);const h=t.getClientRects();if(n&&h.length>0){const t=h[0];i=et(i,n[e]+r-t[e],n[s]-r-t[s])}t.style[e]=i+"px"}function Ir(t,i){void 0===t.textContent?t.innerText=i:t.textContent=i}!function(t){t.o5="Data",t.a5="Tag",t.u5="StartTag",t.c5="StartTagClass",t.l5="StartTagAnnotation",t.d5="CharRefInAnnotation",t.f5="EndTag",t._5="TimestampTag"}(RC||(RC={})),function(t){t.g5="string",t.w5="starttag",t.A5="endtag",t.v5="timestamp"}(yr||(yr={})),r(),r();var qC,XC=class t{get m5(){return this.p5+this.Ti}set m5(t){this.p5=t-this.Ti}get y5(){return this.M5+this.Mi}set y5(t){this.M5=t-this.Mi}T5(t){return this.p5<t.m5&&this.m5>t.p5&&this.M5<t.y5&&this.y5>t.M5}Am(t){return this.p5<=t.p5&&t.m5<=this.m5&&this.M5<=t.M5&&t.y5<=this.y5}Lm(){return new t(this.p5,this.M5,this.Ti,this.Mi)}constructor(t,i,e,s){this.p5=t,this.M5=i,this.Ti=e,this.Mi=s}},ZC={KV:Jn.WHITE,ZV:"sans-serif",JV:"100%",$V:"rgba(0,0,0,0.8)",tH:Jn.TRANSPARENT,iH:"none",hH:"visible",eH:void 0,sH:void 0,nH:void 0,rH:void 0},KC="theoplayer-webvtt-region-",JC="theoplayer-webvtt-styling-",$C="theoplayer-webvtt-default-style",tO=5.23,iO=1.14,eO=class extends zu{K3(t){let i=c.createElement("div");i.className="theoplayer-webvtt-texttrack-"+t,Du(i),i.style.overflow="hidden",i.style.pointerEvents="none";const e=this.g3.ZV;return e&&(i.style.fontFamily=e),i.style.whiteSpace="pre-line",function(){if(c.getElementById($C))return;const t=[];for(const[i,e]of gO)t.push("."+JC+i+" { color: "+e+" !important; }"),t.push("."+JC+"N5"+i+" { background-color: "+e+" !important; }"),t.push("video::cue(."+i+") { color: "+e+"; }"),t.push("D5"+i+") { background-color: "+e+"; }");const i=c.createElement("style");i.id=$C,i.innerHTML=t.join("\n"),c.body.appendChild(i)}(),i}YW(){this.oP.appendChild(this.I5),super.YW()}M3(t,i){const e=S.min(t/100,i/100),s=wC(this.g3);this.S5.forEach((t=>{let{qm:i,E5:n}=t;this.b5(n,e,s,i)})),this.b5(this.I5,e,s)}T3(t){tL(this.oP,t),super.T3(t)}H3(t,i,e){const s=this.oP,n=this.Su.fu/100;let r=[];for(const i of t)void 0!==i.qm&&(ks(r,i.qm)||r.push(i.qm));this.S5.forEach(((t,i)=>{let{qm:s,E5:n}=t;!e&&ks(r,s)||(rs(n),this.S5.delete(i))}));for(const t of i)!e&&t.ao||this.d3(t);let h=[];const o=lO(this.I5.getBoundingClientRect());h.push(...this.L5(o));for(const t of r){let i;this.S5.has(t.u)?i=this.S5.get(t.u).E5:(i=aO(t,n),s.appendChild(i),this.S5.set(t.u,{qm:t,E5:i})),h.push(lO(i.getBoundingClientRect()))}for(const i of t){const t=this.e5(i,h,o);void 0!==t&&h.push(t)}}L5(t){const i=[],e=this.g3;if(void 0!==e.eH){const s=t.Lm();s.Mi=e.eH,i.push(s)}if(void 0!==e.sH){const s=t.Lm();s.Mi=e.sH,s.y5=t.y5,i.push(s)}return i}e5(t,i,e){var s;let n;t.qm?(n=this.S5.get(t.qm.u).E5,"up"===t.qm._p&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.I5;let r=null==(s=this.f3(t))?void 0:s[0];if(r?n.appendChild(r):(r=this.k5(t),n.appendChild(r),t.qm||(t.Zm?function(t,i,e,s){const n=uO(t),r=n?e.Mi:e.Ti;let h=T(getComputedStyle(i).lineHeight);if(0===h)return;let o=lO(i.getBoundingClientRect()),a=S.round(rv(t));"rl"===t.Et&&(a=-(a+1));let u=h*a;"rl"===t.Et&&(u=u-o.Ti+h);a<0&&(u+=r,h=-h);n?o.M5+=u:o.p5+=u;const c=o.Lm();let l=!1;for(;!e.Am(o)||cO(o,s);)if(n)if(h<0&&o.M5<e.M5||h>0&&o.y5>e.y5){if(o.M5=c.M5,l)break;h=-h,l=!0}else o.M5+=h;else if(h<0&&o.p5<e.p5||h>0&&o.m5>e.m5){if(o.p5=c.p5,l)break;h=-h,l=!0}else o.p5+=h;n?i.style.top=(o.M5-e.M5)/e.Mi*100+"%":i.style.left=(o.p5-e.p5)/e.Ti*100+"%"}(t,r,e,i):function(t,i,e,s){let n=lO(i.getBoundingClientRect());if(0===n.Ti||0===n.Mi)return;uO(t)?"center"===t.Vm?n.M5-=n.Mi/2:"end"===t.Vm&&(n.M5-=n.Mi):"center"===t.Vm?n.p5-=n.Ti/2:"end"===t.Vm&&(n.p5-=n.Ti);let r,h=n.Lm(),o=h,a=1,u=!1;r=""===t.Et?[2,3,0,1]:"lr"===t.Et?[0,1,2,3]:[1,0,2,3];const c=4,l=T(getComputedStyle(i).lineHeight)/c;if(l>0){for(let t=0;t<r.length&&!u;t++){for(;!fO(n,e,r[t],.01)&&(!e.Am(n)||cO(n,s));)dO(n,r[t],l);if(e.Am(n)){o=n.Lm(),u=!0;break}let i=_O(n,e);a>i&&(o=n.Lm(),a=i),n=h.Lm()}e.Am(n)||(o=h.Lm())}i.style.left=(o.p5-e.p5)/e.Ti*100+"%",i.style.top=(o.M5-e.M5)/e.Mi*100+"%"}(t,r,e,i)),this.X3(t,[r])),!t.qm)return lO(r.getBoundingClientRect())}k5(t){let i=new Eo,e=t.V,s=this.x5(t),n={C5:void 0,_e:s},r=n,h="",o="",a=[n],u=[],l=[];for(;i.Lu<e.length;){let t=FC(e,i);if(t.$w===yr.g5){const i=c.createElement("span");Ir(i,t.V),sO(i,a),""!==h&&(i.lang=h),this.O5(i,o),r._e.appendChild(i)}else if(t.$w===yr.w5){const i=t.zj.toLowerCase();switch(i){case"i":case"b":case"u":case"ruby":{let e=c.createElement(i);r._e.appendChild(e),r={C5:t,_e:e},a.push(r);break}case"rt":var d;if("ruby"===(null==(d=r.C5)?void 0:d.zj.toLowerCase())){let i=c.createElement("rt");r._e.appendChild(i),r={C5:t,_e:i},a.push(r)}break;case"c":case"v":r={C5:t,_e:r._e},a.push(r);break;case"font":{var f;const i=null==(f=t.r5)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);i&&(o=i[1],l.push(o),r={C5:t,_e:r._e},a.push(r));break}case"lang":var _;h=null!=(_=t.r5)?_:"",u.push(h)}}else if(t.$w===yr.A5){var g;const i=t.zj.toLowerCase(),e=null==(g=r.C5)?void 0:g.zj.toLowerCase();e===i?(a.pop(),r=a[a.length-1],"font"===i&&(l.pop(),o=l.length>0?l[l.length-1]:"")):"rt"===e&&"ruby"===i?(a.pop(),a.pop(),r=a[a.length-1]):"lang"===i&&(u.pop(),h=u.length>0?u[u.length-1]:"")}else if(t.$w===yr.v5){let i=t.h5,e=new Eo;try{Bv(i,e)}catch(t){Ja("ERROR collecting timestamp",t)}}}return s}O5(t,i){const e=this.g3,s=this.A3;e.$V&&(t.style.background=e.$V);const n=s.KV||i||e.KV;n&&(t.style.color=n)}b5(t,i,e,s){if(s){let n=nO(s,i);t.style.height=n*e+"px",t.style.left=rO(s)+"%",t.style.top=hO(s,i)+"px"}t.style.fontSize=tO*i*e+"px"}x5(t){const i=c.createElement("div");i.style.position="absolute",i.style.margin="0",i.style.padding="0",i.style.unicodeBidi="plaintext",i.style.wordWrap="break-word",i.style.overflowWrap="break-word",i.style.width="auto",i.style.textAlign=t.Gm,function(t,i){"rl"===i.Et?t.style.writingMode="vertical-rl":"lr"===i.Et?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(i,t),function(t,i){let e=av(i);uO(i)?(t.style.width=e+"%",t.style.height="auto"):(t.style.height=e+"%",t.style.width="auto")}(i,t),function(t,i){let e,s,n=ov(i),r=hv(i),h=av(i);if(uO(i)){switch(n){case"line-left":e=r;break;case"center":e=r-h/2;break;case"line-right":e=r-h}s=i.Zm?0:rv(i)}else{switch(n){case"line-left":s=r;break;case"center":s=r-h/2;break;case"line-right":s=r-h}e=i.Zm?0:rv(i)}t.style.left=e+"%",t.style.top=s+"%"}(i,t);const e=this.g3.tH;e&&(i.style.background=e);const s=this.g3.KV;return s&&(i.style.color=s),i.style.textShadow=NC(this.g3.iH),i}constructor(t,i,e,s){super(t,i,e,s,ZC),this.S5=Mt(),this.I5=oO(3)}};function sO(t,i){for(const e of i)if(e.C5){for(const i of e.C5.n5)Nn(t,JC+i);"v"===e.C5.zj.toLowerCase()&&e.C5.r5&&Nn(t,"theoplayer-webvtt-voice-"+e.C5.r5)}}function nO(t,i){return t.lp*(tO*i)*iO}function rO(t){return t.gp-t.dp*t.Ti/100}function hO(t,i){let e=t.wp,s=t.fp*nO(t,i)/100;return S.max(0,e-s)}function oO(t){let i=c.createElement("div");return i.className=KC+"default",Du(i),i.style.wordWrap="break-word",i.style.writingMode="horizontal-tb",i.style.pointerEvents="none",i.style.width="auto",i.style.height="auto",i.style.maxHeight="100%",i.style.minHeight="0px",i.style.padding="0",i.style.boxSizing="border-box",i.style.fontSize=tO*t+"px",i.style.lineHeight=iO+"em",i}function aO(t,i){let e=oO(i);e.className=KC+t.u;let s=t.Ti,n=nO(t,i);return e.style.width=s+"%",e.style.height=n+"px",e.style.left=rO(t)+"%",e.style.right="",e.style.top=hO(t,i)+"px",e.style.bottom="",e.style.boxSizing="border-box",e}function uO(t){return""===t.Et}function cO(t,i){return i.some((i=>t.T5(i)))}function lO(t){return new XC(t.left,t.top,t.width,t.height)}function dO(t,i,e){switch(i){case 0:t.p5+=e;break;case 1:t.p5-=e;break;case 2:t.M5+=e;break;case 3:t.M5-=e}}function fO(t,i,e,s){switch(e){case 0:return t.m5>i.m5+s;case 1:return t.p5<i.p5-s;case 2:return t.y5>i.y5+s;case 3:return t.M5<i.M5-s}}function _O(t,i){return S.max(0,S.min(t.m5,i.m5)-S.max(t.p5,i.p5))*S.max(0,S.min(t.y5,i.y5)-S.max(t.M5,i.M5))/(t.Ti*t.Mi)}!function(t){t[t.POS_X=0]="POS_X",t[t.NEG_X=1]="NEG_X",t[t.POS_Y=2]="POS_Y",t[t.NEG_Y=3]="NEG_Y"}(qC||(qC={}));var dr,gO=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]];r(),r(),r(),function(t){t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics"}(dr||(dr={}));var wO={KV:Jn.WHITE,ZV:AC.Oc,JV:"100%",$V:Jn.BLACK,tH:"transparent",iH:"none",j5:"regular",hH:"visible",eH:void 0,sH:void 0,nH:void 0,rH:void 0},AO=[{z5:Jn.WHITE,j5:"regular",P5:0},{z5:Jn.WHITE,j5:"underline",P5:0},{z5:Jn.GREEN,j5:"regular",P5:0},{z5:Jn.GREEN,j5:"underline",P5:0},{z5:Jn.BLUE,j5:"regular",P5:0},{z5:Jn.BLUE,j5:"underline",P5:0},{z5:Jn.CYAN,j5:"regular",P5:0},{z5:Jn.CYAN,j5:"underline",P5:0},{z5:Jn.RED,j5:"regular",P5:0},{z5:Jn.RED,j5:"underline",P5:0},{z5:Jn.YELLOW,j5:"regular",P5:0},{z5:Jn.YELLOW,j5:"underline",P5:0},{z5:Jn.MAGENTA,j5:"regular",P5:0},{z5:Jn.MAGENTA,j5:"underline",P5:0},{z5:Jn.WHITE,j5:"italics",P5:0},{z5:Jn.WHITE,j5:"underline-italics",P5:0},{z5:Jn.WHITE,j5:"regular",P5:0},{z5:Jn.WHITE,j5:"underline",P5:0},{z5:Jn.WHITE,j5:"regular",P5:4},{z5:Jn.WHITE,j5:"underline",P5:4},{z5:Jn.WHITE,j5:"regular",P5:8},{z5:Jn.WHITE,j5:"underline",P5:8},{z5:Jn.WHITE,j5:"regular",P5:12},{z5:Jn.WHITE,j5:"underline",P5:12},{z5:Jn.WHITE,j5:"regular",P5:16},{z5:Jn.WHITE,j5:"underline",P5:16},{z5:Jn.WHITE,j5:"regular",P5:20},{z5:Jn.WHITE,j5:"underline",P5:20},{z5:Jn.WHITE,j5:"regular",P5:24},{z5:Jn.WHITE,j5:"underline",P5:24},{z5:Jn.WHITE,j5:"regular",P5:28},{z5:Jn.WHITE,j5:"underline",P5:28}],vO=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function mO(t,i){return fl(t.B5,i.B5)||qo(t.MD,i.MD)}r();var sc=32,pO=/CC([1-4])=(.*)/;function yO(t){if(!t)return[];const i=[],e=t.trim().split(";");if(e.every((t=>t.match(pO))))for(const t of e){const[,e,s]=t.match(pO);i.push({R5:Number(e),U5:s})}else for(let t=0;t<e.length;t++)i.push({R5:t+1,U5:e[t]});return i}var MO=class t{get Q5(){return this.Y5.F5}get G5(){return this.Y5.W5}get V5(){return this.Y5.W5.P5-this.Y5.F5.P5+1}get H5(){return this.Y5.W5.q5-this.Y5.F5.q5+1}hr(){return this.X5=this.Z5(),this.K5(),this.J5(),this.X5}Z5(){let t=c.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.V5/sc*this.i6.t6*100+"%",t.style.height=1.2*this.H5+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.i6.e6?"calc(1em - 1ch)":"";const i=this.w3.ZV;i&&(t.style.fontFamily=i);const e=this.w3.tH;return e&&(t.style.backgroundColor=e),t}K5(){if(!this.X5)return;let t=this.Q5.q5/15*100,i=this.Q5.P5/sc*100,e=(sc-this.G5.P5-1)/sc*100,s=(15-this.G5.q5-1)/15*100;this.i6.s6||(i=e=1,this.X5.style.width="98%"),s<t?this.X5.style.bottom=s*this.i6.t6+"%":this.X5.style.top=t*this.i6.t6+"%",e<i?this.X5.style.right=e+"%":this.X5.style.left=i+"%"}J5(){const t=this.Y5.n6.sort(TO);for(let i=0;i<t.length;i++)this.r6(t[i-1],t[i]),this.h6(t[i]);this.r6(t[t.length-1],void 0)}h6(i){var e;const s=gC(this.w3,i.o6),n=t.a6(s);Ir(n,i.u6),null==(e=this.X5)||e.appendChild(n)}static a6(t){const i=c.createElement("span");i.style.display="inline-block",t.j5!==dr.FONT_ITALICS&&t.j5!==dr.FONT_UNDERLINE_ITALICS||(i.style.fontStyle="italic"),t.j5!==dr.FONT_UNDERLINE&&t.j5!==dr.FONT_UNDERLINE_ITALICS||(i.style.textDecoration="underline");const e=t.KV;e&&(i.style.color=e);const s=t.$V;return s&&(i.style.backgroundColor=s),i.style.textShadow=NC(t.iH),i.style.height="1.2em",i}r6(t,i){let e=t?t.W5.q5:this.Y5.F5.q5;const s=i?i.F5.q5:this.Y5.W5.q5;let n=t?t.W5.P5:this.Y5.F5.P5;const r=i?i.F5.P5:this.Y5.W5.P5;e<s&&(!i||t&&t.F5.q5!==i.F5.q5?this.c6():this.l6(this.Y5.W5.P5-n),n=this.Y5.F5.P5),n<r&&(i?this.l6(r-n):this.c6())}c6(){var t;const i=c.createElement("br");null==(t=this.X5)||t.appendChild(i)}l6(t){var i;if(t<=0)return;const e=c.createElement("span");e.style.display="inline-block",Ir(e,Yg(" ",t)),null==(i=this.X5)||i.appendChild(e)}constructor(t,i,e){this.Y5=t,this.i6=i,this.w3=e}};function TO(t,i){return function(t,i){if(t.q5!==i.q5)return t.q5-i.q5;return t.P5-i.P5}(t.F5,i.F5)}var NO=class extends zu{K3(t){let i=c.createElement("div");return i.className="theoplayer-cea608-texttrack-"+t,i.style.position="absolute",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.top="10%",i.style.bottom="10%",this.g3.ZV&&(i.style.fontFamily=this.g3.ZV),i}M3(t,i){this.il()}il(){let t=wC(this.g3);this.d6=function(t){return{t6:t/100,e6:t<=100,s6:t<=150}}(100*t);const i=this.f6/sc;this._6=i*t,this.oP.style.fontSize=this._6+"px"}get f6(){let t=this.oP.offsetWidth;return this.d6&&this.d6.s6||(t*=.8),t}H3(t,i,e){for(const t of i)!e&&t.ao||this.d3(t);for(const i of t)this.e5(i)}e5(t){this.d6&&this.d6.s6?this.g6(80):this.g6(100),this.il();let i=this.f3(t);i||(i=this.s5(t),this.X3(t,i));for(const t of i)this.oP.appendChild(t)}s5(t){return t.V.map((t=>new MO(t,this.d6,this.g3).hr()))}g6(t){const i=(100-t)/2;this.oP.style.left=i+"%",this.oP.style.width=t+"%"}constructor(t,i,e,s){super(t,i,e,s,wO)}},Uu=class t{w6(t){for(let i of this.A6)if(i.Ht===t)return i}static v6(t){switch(t.$w){case jo.TTML:case jo.SRT:case jo.WEBVTT:case jo.CEA608:return!0}return!1}m6(t){switch(t.$w){case jo.TTML:return new EC(t,this.p6,t.fh,this.$u);case jo.SRT:case jo.WEBVTT:return new eO(t,this.p6,t.fh,this.$u);case jo.CEA608:return new NO(t,this.p6,t.fh,this.$u)}}y6(t){let i=this.w6(t);i||(i=this.m6(t),i&&(i.YW(),i.T3(this.oR),this.A6.push(i),t.Xw===Da.zn&&i.F3()))}M6(t){let i=this.A6;for(let e=i.length-1;e>=0;e-=1){let s=i[e];s.Ht===t&&(s.ln(),Ks(i,e))}}T6(i){Fm(i.Lt)&&t.v6(i)&&(i.og===gu.ERROR?this.M6(i):this.y6(i))}get E0(){return this.N6.ls}Gn(){for(let t of this.A6)t.Ht.hn(ia._w,this.D6),t.Ht.hn(ia.ww,this.D6),t.ln();sr(this.A6)}ln(){this.Gn();for(let t of this.A6)t.ln();this.Tl.hn(Po.qg,this.I6),this.Tl.hn(Po.Zg,this.S6),this.Tl.hn(ia.ra,this.D6),this.N6.hn(_c.ra,this.E6),this.oR.hn("fw",this.b6)}constructor(t,i,e,s,n){this.A6=[],this.I6=t=>{let i=t.Ht;i.dn(ia._w,this.D6),i.dn(ia.ww,this.D6),i instanceof kn&&(i.E0=this.E0),this.T6(i)},this.D6=t=>{let i=t.Ht;this.T6(i)},this.S6=t=>{let i=t.Ht;i.hn(ia._w,this.D6),i.hn(ia.ww,this.D6),this.M6(i)},this.E6=()=>{let t=this.E0;for(let i of this.Tl.Nw)i instanceof kn&&(i.E0=t)},this.b6=()=>{for(let t of this.A6)t.T3(this.oR)},this.L6=()=>{for(let t of this.A6)t.T3(qr({},t.I3(),{hH:"hidden"}))},this.k6=()=>{for(let t of this.A6)t.T3(qr({},t.I3(),{hH:"visible"}))},this.p6=t,this.$u=i,this.Tl=e,this.N6=n,this.oR=s,this.Tl.dn(Po.qg,this.I6),this.Tl.dn(Po.Zg,this.S6),this.Tl.dn(ia.ra,this.D6),this.N6.dn(_c.ra,this.E6),this.oR.dn("fw",this.b6),this.E6()}};function DO(t){const i=new PE,e=function(t){const i=[];return jE.ia(t)&&i.push(new jE(t)),zE.ia(t)&&i.push(new zE(t)),i}(t);if(e.length>0){for(const t of e)i.AG(t);i.wG(e[0])}return i}var IO=class extends oC{get oP(){return this.QC}get wg(){return this.QC.videoHeight}get pg(){return this.QC.videoWidth}get fa(){return this.x6}Cg(){return this.QC}async Hf(){this.x6.ln(),this.C6.ln(),this.O6.ln(),await super.Hf()}we(){super.we(),this.C6.we()}ye(){super.ye(),this.C6.ye()}s3(t){super.s3(t),this.C6.s3(t)}constructor(t,i,e,s){super(t,i,e,s),this.x6=DO(t),this.C6=new $u,this.O6=new Uu(this.C6._e,this.Su,this.rt,this.Il,this.fa)}};r(),r();r(),r();var Ou;!function(t){t.j6="HELLO",t.z6="HI_THERE",t.P6="INITIALIZE",t.B6="APPEND_INIT",t.R6="APPEND_DATA",t.U6="ACK",t.Q6="REMOVE",t.F6="DESTROY_SESSION"}(Ou||(Ou={}));var SO=class{Y6(t){return this.IH.SC((async t=>{Pi(t);const i=new MessageChannel,e=i.port1,s=i.port2;td.serviceWorker.controller||await ni(td.serviceWorker,"install",t),"activated"!==td.serviceWorker.controller.state&&await ni(td.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};td.serviceWorker.controller.postMessage(n,[s]),e.start(),this.G6=e;try{const i=await ni(e,"message",t),s=i.data;if("HI_THERE"!==s.kind)throw new k("Could not set up message channel");this.GC=s.sessionId}catch(t){throw Er(t)&&this.W6(),t}}),t)}V6(t,i){return this.G6,this.IH.SC((async()=>{if(!this.G6)throw new k("MessageSession not set up yet or already closed.");i||(i=[]),this.G6.postMessage(t,i);const e=await ni(this.G6,"message");return e.data}))}H6(){return this.IH.SC((()=>this.W6()))}W6(){if(!td.serviceWorker.controller)return;if("activated"!==td.serviceWorker.controller.state)return;if(!this.G6)return;const t={kind:"DESTROY_SESSION"};this.G6.postMessage(t),this.G6.close(),this.G6=void 0}constructor(){this.IH=new te}};r();var EO,bO=class{get q6(){return this.X6}Z6(t,i){const e=t-i;this.X6=e>this.q6?this.X6:e}K6(t){this.X6=t}constructor(){this.X6=1/0}};r(),r(),r(),function(t){t.Gv="audio",t.Yv="video",t.XM="metadata"}(EO||(EO={}));var LO=class extends i{get p_(){return void 0===this.J6||void 0===this.t8?re.ZB():new re([this.J6,this.t8])}get dd(){return{_P:this.mY}}get aJ(){return Zt.Hv}get nY(){return this.mY}get cJ(){return re.ZB()}get BW(){return 30}set BW(t){}get FW(){return 30}set FW(t){}fJ(t,i){}_J(t,i){}zH(){return this.i8}get oa(){return this.e8}get s8(){return this.J6}get Ym(){return this.t8}async gJ(){}async PK(t,i){}async mK(t,i,e){if(t.$w!==nL._H)throw new k("Streaming or opaque segments are not supported yet.");const s=t.JM,n=async()=>{const t=s.buffer,e={kind:Ou.R6,mediaType:kO(this.mY),segment:s,startPts:i.n8,totalDuration:i.lt};if(await this.r8.V6(e,[t]),void 0===this.J6){const t=i.n8+i.Zy;this.J6=t,this.t8=t}this.t8=this.t8+i.lt,this.jo(new d(vl.dH))};return this.IH.SC((async t=>{Pi(t);try{this.e8=!0,await n()}finally{this.e8=!1}}),e)}async MK(t,i,e){if(t.$w!==nL._H)throw new k("Streaming or opaque initialization segments are not supported yet.");const s=t.JM,n=async()=>{const t={kind:Ou.B6,mediaType:kO(this.mY),segment:s};await this.r8.V6(t,[])};return this.IH.SC((async t=>{Pi(t);try{this.e8=!0,await n()}finally{this.e8=!1}}),e)}hJ(){this.i8=!0}ZK(){this.i8=!1}async wm(t,i,e){const s=async()=>{const t={kind:Ou.Q6,mediaType:kO(this.mY),endTime:i};await this.r8.V6(t),this.J6=void 0,this.t8=void 0,this.jo(new d(vl.dH))};return this.IH.SC((async t=>{Pi(t);try{this.e8=!0,await s()}finally{this.e8=!1}}),e)}mH(t){return this.mY===t._P}yH(t){return this.mY=t._P,Promise.resolve()}async Hf(){this.Uo(),await this.IH.ln()}constructor(t,i){super(),this.mY=t,this.r8=i,this.J6=void 0,this.t8=void 0,this.IH=new te,this.e8=!1,this.i8=!1}};function kO(t){return t.match(/video/)?EO.Yv:EO.Gv}var xO=class t{static h8(i,e,s,n){const r=[];for(let t=0;t<i.c$.length;t++){const s=i.c$[t]._P;r.push(new LO(s,e))}return new t(i,r,s,n)}o8(){}get a8(){return[this.e$,this.s$].filter(oe)}get KJ(){return this.e$}get p_(){return dk(this)}get dd(){return this.mC}get lt(){return 0}get zH(){var t,i,e;const s=null==(e=null==(t=this.e$)?void 0:t.zH())||e;var n;const r=null==(n=null==(i=this.s$)?void 0:i.zH())||n;return s&&r}get cg(){return new re([0,1/0])}get JJ(){return this.s$}get ht(){throw new k("Not implemented")}async Hf(){await Promise.all([this.e$,this.s$].filter(oe).map((t=>t.Hf())))}r$(t){}u$(t,i,e,s){}hJ(){var t,i;null==(t=this.e$)||t.hJ(),null==(i=this.s$)||i.hJ()}ZK(){var t,i;null==(t=this.e$)||t.ZK(),null==(i=this.s$)||i.ZK()}mH(t){return!0}yH(t){return this.mC=t,Promise.resolve()}async AH(t,i){const e=await this.iC.tC(t.zb,i),s=await e.Gx();return await this.vH(s),s}async vH(t){if(t&&!this.QC.src)throw new ae(ue.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.QC.src)throw new ae(ue.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const i=this.Rx;i&&(await i.Fx(this.QC),this.Rx=void 0),t&&(await t.fn(this.QC),this.Rx=t)}constructor(t,i,e,s){this.Rx=void 0,this.mC=t,this.s$=xe(i,(t=>Boolean(t.nY.match(/video/)))),this.e$=xe(i,(t=>Boolean(t.nY.match(/audio/)))),this.iC=e,this.QC=s,this.o8()}},CO=class extends i{u8(){this.c8.addEventListener("timeupdate",this.l8),this.c8.addEventListener("ended",this.d8),this.c8.addEventListener("timeupdate",this.f8),this.c8.addEventListener("ratechange",this._8),this.c8.addEventListener("volumechange",this.g8),this.c8.addEventListener("durationchange",this.w8),this.c8.addEventListener("playing",this.A8),this.c8.addEventListener("seeking",this.v8),this.c8.addEventListener("play",this.m8),this.c8.addEventListener("pause",this.p8),this.c8.addEventListener("encrypted",this.V2)}y8(){this.c8.removeEventListener("timeupdate",this.l8),this.c8.removeEventListener("ended",this.d8),this.c8.removeEventListener("timeupdate",this.f8),this.c8.removeEventListener("ratechange",this._8),this.c8.removeEventListener("volumechange",this.g8),this.c8.removeEventListener("durationchange",this.w8),this.c8.removeEventListener("playing",this.A8),this.c8.removeEventListener("seeking",this.v8),this.c8.removeEventListener("play",this.m8),this.c8.removeEventListener("pause",this.p8)}M8(){this.v4.dn(Dt._w,this.Ds)}T8(){this.v4.hn(Dt._w,this.Ds)}get oP(){return this.c8}get L$(){return!1}get I_(){return this.c8.currentTime+this.N8.q6}get V_(){return this.c8.paused}get Mg(){return this.c8.volume}set Mg(t){this.c8.volume=t}get q_(){return this.c8.playbackRate}set q_(t){this.c8.playbackRate=t}get D8(){return this.c8.defaultPlaybackRate}get p_(){var t,i;return null!=(i=null==(t=this.uP)?void 0:t.p_)?i:re.ZB()}get I8(){return re.gn(this.c8.buffered)}get K_(){const t=this.S8;return this.zo.xB(t.Sm(this.N8.q6))}get S8(){return re.gn(this.c8.played)}get fg(){return this.JB}get T$(){return!1}get lt(){return this.c8.duration}get Q_(){return this.c8.muted}set Q_(t){this.c8.muted=t}get o6(){return this.c8.style}get i4(){return qr({},eL,{lH:!0})}Em(t,i,e){this.Q4.i_(),this.Q4=new Z_,this.F4=this.Y4(t,this.F4,this.Q4.$f).catch(h)}async Y4(t,i,e){var s;this.zo=this.K_;const n=null==(s=this.uP)?void 0:s.a8;if(!n)return;const r=S.max(...n.map((t=>t.s8?t.s8:1/0)));this.JB=!0,this.jo(new gt(t)),await i.catch(h),Pi(e);try{for(this.E8||this.b8(),this.c8.load(),this.L8||(this.k8=!1,await Oi(this.c8.play(),e));this.og<he.Uv;)await this.v4.w_(Dt._w,e);this.x8.iL(),this.E8=!1,this.JB=!1,this.jo(new ke(this.I_))}catch(t){throw this.x8.eL(t),t}finally{this.C8(),this.N8.K6(r)}}Pg(){this.L8=!0,this.c8.pause()}async Bg(){this.L8&&(this.c8.src||this.e3(),await this.x8.sL,await this.c8.play())}async Hf(){this.r8&&this.r8.H6().catch(h),this.Q4.i_(),this.y8(),this.T8(),this.v4.Hf(),this.Uo(),this.Tl.ln()}async Gn(){this.r8&&this.r8.H6().catch(h),this.Q4.i_(),this.c8.removeAttribute("src"),this.c8.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.c8.removeAttribute("x-airplay-deny"),this.c8.disableRemotePlayback=!1,this.c8.load(),this.v4.Gn(),this.zo=re.ZB()}e3(){this.t3||(PO(this.c8,le.Ks),this.i3=!0)}get og(){return this.v4.og}b8(){const t=this.c8.getClientRects();let i;if(!(t.length>0))return;i=t[0];const e=i.width,s=this.c8.videoWidth/this.c8.videoHeight,n=i.height;let r,h;e/n>s?(r=n*s,h=n):(h=e/s,r=e),this.c8.style.width=r+"px",this.c8.style.height=h+"px",this.c8.style.marginLeft=(e-r)/2+"px",this.c8.style.marginTop=(n-h)/2+"px",this.c8.style.backgroundColor="black"}C8(){this.c8.style.width="100%",this.c8.style.height="100%",this.c8.style.marginLeft="",this.c8.style.marginTop="",this.c8.style.backgroundColor=""}get wg(){return this.c8.videoHeight}get pg(){return this.c8.videoWidth}get L_(){return this.c8.ended}get Mi(){return this.c8.offsetHeight*le.Ks.A4}get Ti(){return this.c8.offsetWidth*le.Ks.A4}get P_(){return!1}get t3(){return this.i3}get M_(){}get Su(){}get dt(){}get fa(){return this.x6}get cg(){return this.uP?this.uP.cg:re.ZB()}get cP(){}get rt(){return this.Tl}get Il(){}get Sg(){return!1}set Sg(t){}TP(t,i,e,s,n){}SS(t,i,e,s,n,r,h,o,a){const u=new gn(t,i,e,s,n,r,h,a,o);return this.Tl.it(u),this.s2.it(u),u}RH(t){}U_(){return Bb(this.c8)}get N4(){return"block"===this.c8.style.display}ye(){this.c8.style.display="block"}we(){this.c8.style.display="none"}K2(){}async En(t){if(t.$w===si.$C)throw new k("Not yet implemented");await this.r8.Y6();const i=xe(t.gP,(t=>t.Ux.$w===I.Ob)),e={kind:Ou.P6,mediaBufferConfigs:t.c$.map((t=>t._P)),fairPlaySdkUri:null==i?void 0:i.Kj};return await this.r8.V6(e),this.uP=xO.h8(t,this.r8,this.iC,this.c8),this.MH.En(this.uP,t),this.c8.setAttribute("x-webkit-airplay","deny"),this.c8.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.c8.disableRemotePlayback=!0,this.c8.preload="none",this.c8.src="https://theo.proxy/"+this.r8.GC+"/master.m3u8",this.uP}J2(){}jS(t){this.Tl.st(t),this.s2.st(t)}DP(){for(const t of this.Tl.Nw.slice())t.ln();this.Tl.Gn()}sP(t){}yP(){return!1}s3(t){t.appendChild(this.c8)}Cg(){return this.c8}a4(){}get bP(){return this.MH.bP}set bP(t){this.MH.bP=t}get n3(){}set n3(t){}get G1(){}Yg(){}constructor(t,i){super(),this.E8=!0,this.r8=new SO,this.N8=new bO,this.L8=!0,this.x8=new $s,this.JB=!1,this.F4=Promise.resolve(),this.Q4=new Z_,this.k8=!0,this.zo=re.ZB(),this.i3=!1,this.l8=()=>{this.V_||this.I8.L<=0||this.p_.L<=0||this.N8.Z6(this.p_.wn(this.p_.L-1),this.I8.wn(this.I8.L-1))},this.d8=()=>{this.jo(new Ki(this.I_))},this.f8=()=>{this.jo(new bl(this.I_,this.M_))},this._8=()=>{this.jo(new ce(this.I_,this.q_))},this.g8=()=>{this.jo(new ge(this.I_,this.Mg))},this.w8=()=>{this.jo(new jn(this.lt))},this.A8=()=>{this.jo(new Kr(this.I_))},this.v8=()=>{this.Em(this.I_)},this.m8=async()=>{this.k8&&this.jo(new ih(this.I_)),this.L8=!1,this.k8=!0},this.p8=()=>{this.L8=!0,this.jo(new bs(this.I_))},this.V2=t=>{const i=t.initDataType;var e;const s=null!=(e=t.initData)?e:new ArrayBuffer(0);this.jo(new Bs(i,s))},this.c8=t,this.v4=new Dk(this),this.c8.playsInline=!0,this.c8.style.width="100%",this.c8.style.height="100%",this.u8(),this.M8(),this.x6=DO(this.c8),this.MH=new tC(this),this.iC=i,this.Tl=new Or,this.s2=new Px(this)}},OO=[Zt.Gv,Zt.Yv];function jO(t){const i=c.createElement(t);return Vs(i)&&function(t){t.addEventListener("contextmenu",(t=>{t.preventDefault()}))}(i),zO(i),i}function zO(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),PT(t),XT(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload=Sl.cB,t.controls=!1,t.style.display="none",Vs(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function PO(t,i){if(i.O8){const i=t.muted;t.muted=!0,t.muted=!1,t.muted=i}else if(t.paused){const i=t.play();nu(i)&&Mo(i),t.pause()}}r(),r();var BO=class{BI(t){return this.LS.BI(t)}yY(t){this.LS.yY(t)}ln(){this.LS.ln()}constructor(t){this.LS=t}},RO=class extends BO{async BI(t){const i=new ai(t),e=this.hR.SW.Pz(i);if(!e)return this.LS.BI(i);e.bW(le.n_()/1e3);const s=await this.LS.BI(t);e.LW(le.n_()/1e3);const n={JM:s.IG().pipeThrough(new Eh(new UO(e))),BI:s.BI};return new Ah(n,s)}constructor(t,i){super(t),this.hR=i}},UO=class{start(t){this.qV=t}transform(t){this.j8.kW(le.n_()/1e3,t),this.qV.enqueue(t)}flush(){this.j8.xW(le.n_()/1e3)}constructor(t){this.j8=t}};function QO(t){return{get ratio(){return t.Ho},get thresholds(){return t.z8.slice()}}}function FO(t){const i=[],e=S.floor(1/t);if(M(e))return[];for(let s=0;s<=e;s++){const e=et(s*t,0,1);i.push(e)}return i}r(),r(),r();var YO=class{get Ho(){return this.P8}get z8(){return this.B8}U8(t){return i=>{const e=i[i.length-1];this.P8=e.intersectionRatio,t(e.intersectionRatio)}}get so(){return this.Oa||(this.Oa=QO(this)),this.Oa}Rg(){this.Q8.disconnect()}constructor(t,i,e){this.P8=1,this.Oa=void 0,this.B8=FO(i);const n=this.U8(e);this.Q8=new s.IntersectionObserver(n,{root:null,threshold:this.B8}),this.Q8.observe(t)}},GO=class{get Ho(){return this.P8}get z8(){return this.B8}get so(){return this.Oa||(this.Oa=QO(this)),this.Oa}F8(t){this.P8=t;const i=this.B8;let e=0;if(t>0)for(;e<i.length&&i[e]<=t;)++e;this.Y8!==e&&(this.Y8=e,this.G8(t))}constructor(t,i){this.P8=1,this.Y8=-1,this.Oa=void 0,this.B8=FO(t),this.G8=i}},WO=class extends GO{W8(){const t=this.wo.getBoundingClientRect();return et(S.max(0,S.min(s.innerWidth,t.right)-S.max(0,t.left))*S.max(0,S.min(s.innerHeight,t.bottom)-S.max(0,t.top))/(t.width*t.height),0,1)}Rg(){s.removeEventListener("scroll",this.V8)}constructor(t,i,e){super(i,e),this.V8=Xi((()=>this.F8(this.W8())),50),this.wo=t,s.addEventListener("scroll",this.V8,!!DE&&{passive:!0}),Hu((()=>this.F8(this.W8())))}},VO=.1,HO=class{get H8(){return this.q8}get Lo(){return this.X8}set Lo(t){if(M(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.X8=t}get so(){return this.Oa||(this.Oa=function(t){return{get ratio(){return t.H8},get visible(){return t.H8>t.Lo},get visibleThreshold(){return t.Lo},set visibleThreshold(i){i=ka(i),t.Lo=i},addObserver:(i,e)=>(i=ka(i),t.Do(i,e).so),removeObserver(i){let e=t.Z8(i);e&&t.Oo(e)}}}(this)),this.Oa}K8(t){return i=>{this.q8=i,null==t||t(this.q8)}}Do(t,i){if(M(t))throw new _("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let e;return e="function"==typeof s.IntersectionObserver?new YO(this.wo,t,this.K8(i)):new WO(this.wo,t,this.K8(i)),this.J8.push(e),e}Oo(t){t.Rg(),Hc(this.J8,t)}Z8(t){for(const i of this.J8)if(i.so===t)return i}ln(){for(const t of this.J8)t.Rg();sr(this.J8)}constructor(t){this.q8=1,this.X8=0,this.J8=[],this.Oa=void 0,this.wo=t,this.Do(.1,this.K8())}};r();var qO=class extends d{constructor(){super(t.pA)}},XO=class extends ${get t9(){return this.hR}get fm(){return this.i9}set fm(t){this.i9=t,this.pV.fm=t}get e9(){return this.s9}get ot(){return this.pV.ot}get jQ(){return this.n9}get Su(){return this.r9}get j_(){return this.pV.j_}get R_(){return this.h9}get $U(){return this.o9}get rt(){return this.pV.rt}get Il(){return this.oR}get ht(){return this.pV.ht}get p_(){return this.y_()}y_(){return this.pV.p_}get a9(){return this.sV}get wV(){return this.AV}get I_(){return this.S_()}set I_(t){this.E_(t)}S_(){return this.pV.I_}E_(t){this.pV.I_=t}get M_(){return this.pV.M_}set M_(t){this.pV.M_=t}get wt(){return this.pV.wt}get lt(){return this.yd()}yd(){return this.pV.lt}get _e(){return this.pV._e}get L_(){return this.pV.L_}get dt(){return this.x_()}x_(){return this.pV.dt}get C_(){return this.O_()}O_(){return this.pV.C_}get fa(){return this.pV.xg()}get Q_(){return this.pV.Q_}set Q_(t){const i=Boolean(t);this.Y_(i)}Y_(t){this.pV.Q_=t,t||this.V_||this.zg()}get V_(){return this.pV.V_}get q_(){return this.pV.q_}set q_(t){this.pV.q_=t}get K_(){return this.J_()}J_(){return this.pV.K_}get eg(){return this.pV.eg}set eg(t){this.pV.eg=t}get og(){return this.pV.og}get cg(){return this.dg()}dg(){return this.pV.cg}get fg(){return this.pV.fg}get Bw(){return this.Mm}get wg(){return this.pV.wg}get pg(){return this.pV.pg}get Mg(){return this.pV.Mg}set Mg(t){const i=et(Number(t),0,1)||0;this.Ng(i)}get Dg(){return this.pV.Dg}Ng(t){this.pV.Mg=t}eo(){Do(this,BI,this)}Bg(){this.pV.Bg()}Pg(){this.pV.Pg()}$a(){return this._B}async Zh(t,i){if(this._B=t,t){this.u9.DF(t).catch(this.c9);const e=function(t){t.sources;const i=t.sources.filter((t=>Go(t.integration)));0;return t.sources=i,t}(t);await this.pV.Zh(e,i)}}zg(){if(this.ko)return;this.pV.zg(),this.s9.zg();const t=this._e.getElementsByTagName("video");for(let i=0;i<t.length;i++){const e=t[i];"Advertisement"===e.title&&PO(e,le.Ks)}this.ko=!0}ls(){return this.l9.qo()===mu.FULLSCREEN}ye(){this.pV.ye()}we(){this.pV.we()}Cg(){return this.pV.Cg()}async Rg(){this._B=void 0,await this.pV.Rg(),await this.pV.Gn()}async ln(){this.jo(new qO),this.Uo(),this.n9.ln(),this.yO.ln(),this.o9.ln(),this.d9.ln(),this.f9.ln(),this.l9.ln(),this.r9.ln(),this._9.ln(),this.s9.ln(),this.rR.ln(),await this.pV.ln()}constructor(i,e){super(),this.i9=!1,this.ko=!1,this._B=void 0,this.g9=!1,this.c9=t=>{if(this.g9)return;this.g9=!0;const i=this.w9,e=Yn(t);this.pV.Ew=new gl(this._e,e,t),Mo(i.ln())},this.A9=i=>{i.type!==t.PA&&i.type!==t.zA&&this.jo(i)};const s=ka(e.uid);M(s)?this.Mm=Ow++:this.Mm=s,this.dd=e;const n=le.yO,r=new qb;this._9=new _E("6.5.0",n,r),this.hR=new bb;const h=new RO(n,this.hR);this.yO=new Pu(h,e.allowMixedContent),this.QV=new JS(e.isEmbeddable,"6.5.0",qS()),this.u9=new Hb(n,this.QV,this._9,r,e,qS()),this.u9.jV().catch(this.c9),this.r9=new kE(i),this.r9.dn(yt.un,this.Ds),this.oR=new $b,this.sV=new Cb,this.AV=new jb;const o=new ml(i,e,this.yO,this.hR,this.r9,this.oR);this.hR.YW(o);let a=o;a=new Ob(a,this.a9),a=new zb(a,this.wV),this.w9=a,this.pV=new Ew(this.w9),this.pV.c_(this.A9),this.h9=new Pb(this),this.o9=new pb(this.pV,this.yO,this.hR),this.d9=new mE(this),this.f9=new BE(this.pV,e.allowNativeFullscreen),this.l9=new PI(this.f9),this.r9.fn(),this.rR=new vp(this.r9,this.oR,1,[Zt.Yv]),this.s9=new mp(this.rR),this.n9=new Qb,this.ro=new HO(i)}};r(),r();var cs,ZO=class extends ${get t9(){return this.Qo.t9}get Pc(){return this.Qo.Pc}set Pc(t){this.Qo.Pc=t}get _9(){return this.Qo._9}get e9(){return this.Qo.e9}get fm(){return this.Qo.fm}set fm(t){this.Qo.fm=t}get d9(){return this.Qo.d9}get jQ(){return this.Qo.jQ}get a9(){return this.Qo.a9}get dd(){return this.Qo.dd}get w9(){return this.Qo.w9}get Su(){return this.Qo.Su}get fa(){return this.xg()}xg(){return this.Qo.fa}get yO(){return this.Qo.yO}get Dg(){return this.Qo.Dg}get wV(){return this.Qo.wV}get $U(){return this.Qo.$U}get l9(){return this.Qo.l9}get r9(){return this.Qo.r9}get pV(){return this.Qo.pV}get Il(){return this.Qo.Il}get Bw(){return this.Qo.Bw}get ro(){return this.Qo.ro}set ro(t){this.Qo.ro=t}get ot(){return this.A_()}A_(){return this.Qo.ot}y_(){return this.Qo.y_()}get M_(){return this.T_()}set M_(t){this.N_(t)}T_(){return this.Qo.M_}N_(t){this.Qo.M_=t}get wt(){return this.D_()}D_(){return this.Qo.wt}S_(){return this.Qo.S_()}E_(t){this.Qo.E_(t)}yd(){return this.Qo.yd()}get _e(){return this.Qo._e}get L_(){return this.k_()}k_(){return this.Qo.L_}x_(){return this.Qo.x_()}O_(){return this.Qo.O_()}get j_(){return this.z_()}z_(){return this.Qo.j_}get R_(){return this.U_()}U_(){return this.Qo.R_}get Q_(){return this.F_()}set Q_(t){this.Y_(t)}F_(){return this.Qo.Q_}Y_(t){this.Qo.Y_(t)}get V_(){return this.H_()}H_(){return this.Qo.V_}get q_(){return this.X_()}set q_(t){this.Z_(t)}X_(){return this.Qo.q_}Z_(t){this.Qo.q_=t}J_(){return this.Qo.J_()}get eg(){return this.rg()}set eg(t){this.hg(t)}rg(){return this.Qo.eg}hg(t){this.Qo.eg=t}get og(){return this.ag()}ag(){return this.Qo.og}dg(){return this.Qo.dg()}get fg(){return this._g()}_g(){return this.Qo.fg}get rt(){return this.gg()}gg(){return this.Qo.rt}get wg(){return this.Ag()}Ag(){return this.Qo.wg}get ht(){return this.vg()}vg(){return this.Qo.ht}get pg(){return this.yg()}yg(){return this.Qo.pg}get Mg(){return this.Tg()}set Mg(t){this.Ng(t)}Tg(){return this.Qo.Mg}Ng(t){this.Qo.Ng(t)}zg(){this.Qo.zg()}Pg(){this.Qo.Pg()}Bg(){this.Qo.Bg()}ye(){this.Qo.ye()}we(){this.Qo.we()}ls(){return this.Qo.ls()}Cg(){return this.Qo.Cg()}eo(){this.Qo.eo()}$a(){return this.Qo.$a()}Zh(t,i){return this.Qo.Zh(t,i)}Rg(){return this.Qo.Rg()}Vg(t){return!1}async ln(){this.Uo(),await this.Qo.ln()}constructor(t){super(),this.Hg=t=>{this.Vg(t)||this.jo(t)},this.Qo=t,t.c_(this.Hg)}};!function(t){t[t.v9=0]="v9",t[t.Ha=1]="Ha"}(cs||(cs={}));var KO={};function As(t,i){(KO[i]||(KO[i]=[])).push(t)}function JO(t,i){let e=t;if(KO[i])for(const t of KO[i])e=t(e);return e}var $O=[];var tj=[];function ij(t){for(const i of tj)i(t)}r();var ej=self.CustomEvent;var sj=function(){try{const t=new ej("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,i){return new CustomEvent(t,i)}:function(t,i){const e=c.createEvent("CustomEvent");return e.initCustomEvent(t,(null==i?void 0:i.bubbles)||!1,(null==i?void 0:i.cancelable)||!1,null==i?void 0:i.detail),e};r();var nj=new class{get L(){return this.um.length}get so(){var t;return null!=(t=this.Oa)?t:this.Oa=function(t){const i=[];for(let e=0;e<t.L;e++)i[e]=t.Iw(e).so;return i.getPlayerByUID=i=>{const e=t.m9(i);return e&&e.so},i}(this)}Iw(t){return this.um[t]}nq(t){this.um.push(t),this.so.push(t.so)}wm(t){const i=this.um.indexOf(t);i<0||(Ks(this.um,i),this.Oa&&Ks(this.Oa,i))}m9(t){for(const i of this.um)if(i.Bw===t)return i}constructor(){this.um=[],this.Oa=void 0}};r(),r(),r();var rj=class extends d{constructor(i){super(t.vo),this.source=i}};r();var hj=class extends ${get M_(){}set M_(t){}get I_(){return this.S_()}set I_(t){this.E_(t)}S_(){return this.KB}E_(t){this.JB&&this.KB===t||(this.KB=t,this.JB=!0,this.jo(new gt(this.KB)))}get V_(){return this.tR}get q_(){return this.iR}set q_(t){this.iR!==t&&(this.iR=t,this.jo(new ce(this.KB,this.q_)))}get og(){return he.Rv}get fg(){return this.JB}Bg(){this.tR&&(this.tR=!1,this.jo(new ih(this.KB)),this.jo(new tc(this.KB)))}Pg(){this.tR||(this.tR=!0,this.jo(new bl(this.KB,this.M_)),this.jo(new bs(this.KB)))}Gn(){this.KB=0,this.JB=!1,this.iR=1,this.Pg()}ln(){this.Uo()}we(){}ye(){}constructor(){super(),this.KB=0,this.tR=!0,this.JB=!1,this.iR=1}};r();var oj,aj={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},uj={visibility:"hidden"},cj={visibility:"visible"},lj=class{get Iu(){return void 0!==this.p9?this.p9:void 0!==this.y9?this.y9:void 0}set M9(t){this.y9=t,this.Hn()}Hn(){const t=this.Qo.V_,i=this.T9;this.Iu?this.zs.style.backgroundImage='url("'+qg(this.Iu)+'")':this.zs.style.backgroundImage="",t&&this.Iu&&!i?this.ye():this.we()}ye(){WT(uj,this.Qo._e),WT(cj,this.zs)}we(){WT(uj,this.zs),WT(cj,this.Qo._e)}dB(){this.Qo.dn(t.vo,this.N9),this.Qo.dn(t.wh,this.gO)}ln(){this.Qo.hn(t.vo,this.N9),this.Qo.hn(t.wh,this.gO),rs(this.zs)}constructor(t){this.T9=!1,this.N9=t=>{var i;this.T9=!1,this.p9=null==(i=t.source)?void 0:i.poster,this.Hn()},this.gO=()=>{this.T9=!0,this.we()},this.Qo=t,this.dB(),this.zs=function(){let t=J&&J.document&&J.document.createElement("div");return t.className="theoplayer-poster",WT(aj,t),t}(),t._e.appendChild(this.zs)}};function dj(i){return class extends ${get _9(){return this.D9._9}get Pc(){return this.D9.Pc}set Pc(t){this.D9.Pc=t}get d9(){return this.D9.d9}get dd(){return this.D9.dd}get w9(){return this.D9.w9}get yO(){return this.D9.yO}get fa(){return this.D9.fa}get l9(){return this.D9.l9}get r9(){return this.D9.r9}get pV(){return this.D9.pV}get t9(){return this.D9.t9}get fm(){return this.D9.fm}set fm(t){this.D9.fm=t,this.I9()}get e9(){return this.D9.e9}get ot(){return this.D9.ot}get jQ(){return this.D9.jQ}get Su(){return this.D9.r9}get so(){return this.Oa||(this.Oa=this.Qh()),this.Oa}get j_(){return this.D9.j_}get R_(){return this.D9.R_}get $U(){return this.D9.$U}get rt(){return this.D9.rt}get Il(){return this.D9.Il}get ht(){return this.D9.ht}get a9(){return this.D9.a9}get wV(){return this.D9.wV}get M_(){return this.Qo.M_}set M_(t){this.Qo.M_=t}get wt(){return this.D9.wt}get _e(){return this.D9._e}get L_(){return this.D9.L_}get Q_(){return this.D9.Q_}set Q_(t){this.Y_(t)}get V_(){return this.Qo.V_}get gi(){return this.S9.Iu||""}set gi(t){this.S9.M9=t}get q_(){return this.D9.q_}set q_(t){this.Qo.q_=t}get eg(){return this.D9.eg}set eg(t){this.D9.eg=t}get og(){return this.Qo.og}get fg(){return this.Qo.fg}get Bw(){return this.D9.Bw}get wg(){return this.D9.wg}get pg(){return this.D9.pg}get Mg(){return this.D9.Mg}set Mg(t){this.Ng(t)}get Dg(){return this.D9.Dg}get ro(){return this.D9.ro}set ro(t){this.D9.ro=t}async SC(t,i){return this.IH.SC(t,i).catch(tg)}async E9(t,i){Pi(i),this.D9.c_(this.b9);try{await this.D9.Zh(t,i)}finally{this.D9.g_(this.b9)}}async I9(){const t=this.$a();if(!t||lu(t)||!this.fm||!this.V_)return;const i=t.mutedAutoplay||this.dd.mutedAutoplay;switch(await this.e9.L9(this.Q_)){case"all":this.k9();break;case"muted":(this.Q_||i===Aw.ALL)&&(this.Q_=!0,this.Bg())}}Zh(t){lu(this._B)||this.jo(new Fo(0,he.Rv)),this.Gn(),this._B=t,Mo(this.SC((async i=>{Pi(i);try{await this.E9(t,i)}catch(t){return this._B=void 0,void this.HP(function(t,i){return t instanceof Ri?t:t instanceof k?new Ri(i,t.message,t):new Ri(i,String(t))}(t,ue.SOURCE_NOT_SUPPORTED))}finally{this.x9(this.D9)}this.jo(new rj(this.$a())),await this.I9()})))}E_(t){this.Qo.E_(t)}x_(){var t;return null!=(t=this.dR)?t:this.D9.x_()}O_(){var t;return null!=(t=this.rP)?t:this.D9.O_()}HP(t){void 0===this.O_()&&(this.rP=t,this.dR=Yn(t),this.jo(new _i(t)))}Bg(){this.Qo.Bg()}k9(){this.Q_||this.zg(),this.Bg()}zg(){this.D9.zg()}Pg(){this.Qo.Pg()}Rg(){this.Zh(void 0)}ye(){this.vB=!0,this.Qo.ye()}we(){this.vB=!1,this.Qo.we()}eo(){this.D9.eo()}Ng(t){this.D9.Ng(t)}Y_(t){this.D9.Y_(t)}no(t){this.C9=t,t.nq(this)}ls(){return this.D9.ls()}$a(){return this._B}Cg(){return this.D9.Cg()}S_(){return this.D9.S_()}yd(){return this.D9.yd()}y_(){return this.D9.y_()}J_(){return this.D9.J_()}dg(){return this.D9.dg()}Gn(){this._B=void 0,this.rP=void 0,this.dR=void 0,this.O9=!0,sr(this.j9),this.z9.Gn(),this.x9(this.z9),this.IH.i_(),Mo(this.IH.SC((async t=>{Pi(t),await this.D9.Rg()})))}ln(){this.jo(new qO),this.S9.ln(),this.fB(),this.Gn(),Mo(this.SC((async()=>{await this.D9.ln(),this.C9&&(this.C9.wm(this),this.C9=void 0),this.IH.ln()}))),this.Uo()}x9(t){if(this.Qo===t)return;const i=this.Qo.V_,e=this.Qo.S_(),s=this.Qo.q_,n=this.Qo.og,r=this.Qo.fg;this.P9=i,this.r3=n,this.fB(),t.c_(this.B9),t===this.D9?((r||t.S_()!==e)&&t.E_(e),t.q_!==s&&(t.q_=s),i?t.Pg():t.Bg()):this.dd.retainPlaybackRateOnSourceChange?t.q_=s:1!==s&&this.jo(new ce(this.S_(),1)),t.g_(this.B9),this.Qo=t,this.dB();for(const t of this.j9)this.jo(t);sr(this.j9),this.vB?t.ye():t.we()}dB(){this.Qo.c_(this.Wg)}fB(){this.Qo.g_(this.Wg)}Qh(){return function(t){let i,e;const s=i=>{e=i;const s=$a(i,t.dd);t.Zh(s)};let n={get abr(){return t.t9.so},get audioTracks(){return t.ot.so},get autoplay(){return t.fm},set autoplay(i){t.fm=Boolean(i)},get buffered(){return t.y_()},get canvas(){return t.d9.so},get clip(){return t.a9.so},get currentProgramDateTime(){var i;return null!=(i=t.M_)?i:null},set currentProgramDateTime(i){t.M_=null!=i?i:void 0},get currentTime(){return t.S_()},set currentTime(i){t.E_(Number(i))},get duration(){return t.yd()},get element(){return t._e},get ended(){return t.L_},get error(){return t.x_()},get errorObject(){return t.O_()},get loop(){return t.wV.wV},set loop(i){t.wV.wV=Boolean(i)},get metrics(){return t.R_.so},get muted(){return t.Q_},set muted(i){t.Y_(i)},get network(){return t.$U.so},get paused(){return t.V_},get playbackRate(){return t.q_},set playbackRate(i){const e=Number(i);if(e<0)throw new RangeError("playbackRate must be a positive number");t.q_=e},get played(){return t.J_()},get poster(){return t.gi},set poster(i){t.gi=hs(i)},get preload(){return t.eg},set preload(i){t.eg=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(i)},get presentation(){return t.l9.so},get readyState(){return t.og},get seekable(){return t.dg()},get seeking(){return t.fg},get source(){return e},set source(t){s(t)},get src(){return mS(t.$a())},set src(t){s({sources:t})},get textTracks(){return t.rt.so},get textTrackStyle(){return t.Il.so},get uid(){return t.Bw},get videoHeight(){return t.wg},get videoTracks(){return t.ht.so},get videoWidth(){return t.pg},get volume(){return t.Mg},set volume(i){t.Ng(Number(i))},get latency(){return t.Dg.so},destroy(){t.ln(),t=null,e=void 0},play(){t.k9()},pause(){t.Pg()},stop(){e=void 0,t.Rg()},prepareWithUserAction(){t.zg()},addEventListener(t,e){i.dn(t,e)},removeEventListener(t,e){i.hn(t,e)},setSource(t){s(t)}};return i=new zI(n,!0),i.Ua(t),i.dn("destroy",(()=>{i.ln()})),n}(this)}constructor(e,s){super(),this.P9=!0,this.r3=he.Rv,this.O9=!1,this._B=void 0,this.rP=void 0,this.dR=void 0,this.b9=i=>{i.type!==t.RA&&this.j9.push(i)},this.B9=i=>{(i.type!==t.wh||this.Qo.V_)&&(i.type===t.bh&&this.Qo.V_||i.type===t.YA&&this.Qo.fg&&this.Qo.S_()===i.currentTime||i.type===t.RA&&this.Qo.q_===i.playbackRate||this.jo(i))},this.Wg=i=>{if(this.O9){if(i.type===Dt.fv)return;i.type!==Dt.rv&&i.type!==Dt._v||(this.O9=!1)}if(i.type===t.wh){if(!this.P9)return;this.P9=!1}else if(i.type===t.bh){if(this.P9)return;this.P9=!0}else if(i.type===Dt._w){if(this.r3===i.readyState)return;this.r3=i.readyState}else if(i.type===t.pA)return;this.jo(i)},this.D9=new i(e,s),this.z9=new hj,this.Qo=this.D9,this.S9=new lj(this),this.IH=new te,this.j9=[],this.vB=!0,this.dB()}}}function fj(){if(!oj){let t=XO;t=function(t){return class extends ZO{constructor(i,e){let s=new t(i,e);for(const t of $O)s=t(s);super(s)}}}(t);let i=dj(t);i=JO(i,cs.v9),i=JO(i,cs.Ha),oj=i}return oj}function _j(t,i){const e=Qe(i),s=new(fj())(t,e);let n=s.so;return s.eo(),s.no(nj),C.defineProperty(n,"constructor",{value:_j}),n=fg(n),ij(s),n}Hu((()=>{self.dispatchEvent&&self.dispatchEvent(sj("theoplayerready"))})),r();var gj={base64:new class{encode(t){return Nt(t)}decode(t){return Sn(t)}}};r();var wj=JSON.parse('["dash","hls","chromecast","ads","airplay","yospace","spotx","vr","vr-webxr","conviva","cache","visibility","webaudio","youbora","mediamelon","moat","google-dai","streamone","lcevc","freewheel","agama","verizonmedia","mediatailor","ui","relatedcontent","social","upnext","contextmenu","texttrackstyle-ui","activequalitylabel","upcomingadnotification"]');function Aj(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),C.defineProperty(t,s.key,s)}}function vj(t,i){var e=function(t,i){var e=t.length;if(e<=1)return t;for(var s=new Array(e),n=1;n<e;n*=2){mj(t,i,n,s);var r=t;t=s,s=r}return t}(t,i);return e!==t&&mj(e,null,t.length,t),t}function mj(t,i,e,s){var n,r,h,o,a,u=t.length,c=0,l=2*e;for(n=0;n<u;n+=l)for(h=(r=n+e)+e,r>u&&(r=u),h>u&&(h=u),o=n,a=r;;)if(o<r&&a<h)i(t[o],t[a])<=0?s[c++]=t[o++]:s[c++]=t[a++];else if(o<r)s[c++]=t[o++];else{if(!(a<h))break;s[c++]=t[a++]}}r(),r(),r(),r();var pj=/[a-zA-Z]/,yj=/[0-9]/,Mj=/[0-9a-fA-F]/,Tj=/^0x/i,Nj=/^[0-9]+$/,Dj=/^[0-9a-fA-F]+$/,Ij=/^[0-7]+$/,Sj=C.prototype.toString,Ej=Array.isArray||function(t){return"[object Array]"===Sj.call(t)},bj="undefined"!=typeof Symbol&&"symbol"==typeof Symbol.iterator;function Lj(t){return Ej(t)?t:Array.from(t)}function kj(t,i,e){var s=t[i];t[i]=t[e],t[e]=s}function xj(t){return t>=65&&t<=90}function Cj(t){return xj(t)||function(t){return t>=97&&t<=122}(t)}function Oj(t){return t>=48&&t<=57}function jj(t){return Oj(t)||Cj(t)}function zj(t){return Oj(t)||t>=65&&t<=70||t>=97&&t<=102}function Pj(t){return xj(t)?t+32:t}function Bj(t){return Oj(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function Rj(t,i){return void 0===i&&(i=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(i?87:55):-1}var Uj=S.min,Qj=String.fromCharCode,Fj=16384;function Yj(t){for(var i=t.length,e=[],s=0;s<i;s+=Fj){var n=Uj(s+Fj,i);e.push(Qj.apply(null,t.slice(s,n)))}return e.join("")}var Gj=2147483647,Wj=/[^\0-\x7E]/,Vj=/[\x2E\u3002\uFF0E\uFF61]/g,Hj={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},qj=S.floor,Xj=String.fromCharCode;function Zj(t){throw new RangeError(Hj[t])}function Kj(t){for(var i=[],e=0,s=t.length;e<s;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){var r=t.charCodeAt(e++);56320==(64512&r)?i.push(((1023&n)<<10)+(1023&r)+65536):(i.push(n),e--)}else i.push(n)}return i}var Jj,$j,tz,iz=function(t,i){return t+22+75*(t<26)-((0!=i)<<5)},ez=function(t,i,e){var s=0;for(t=e?qj(t/700):t>>1,t+=qj(t/i);t>455;s+=36)t=qj(t/35);return qj(s+36*t/(t+38))},sz=function(t){return function(t,i){var e=t.split("@"),s="";e.length>1&&(s=e[0]+"@",t=e[1]);var n=function(t,i){for(var e=[],s=t.length;s--;)e[s]=i(t[s]);return e}((t=t.replace(Vj,".")).split("."),i).join(".");return s+n}(t,(function(t){return Wj.test(t)?"xn--"+function(t){for(var i=[],e=(t=Kj(t)).length,s=128,n=0,r=72,h=0,o=t;h<o.length;h++){var a=o[h];a<128&&i.push(Xj(a))}var u=i.length,c=u;for(u&&i.push("-");c<e;){for(var l=Gj,d=0,f=t;d<f.length;d++){var _=f[d];_>=s&&_<l&&(l=_)}var g=c+1;l-s>qj((Gj-n)/g)&&Zj("overflow"),n+=(l-s)*g,s=l;for(var w=0,A=t;w<A.length;w++){var v=A[w];if(v<s&&++n>Gj&&Zj("overflow"),v==s){for(var m=n,p=36;;p+=36){var y=p<=r?1:p>=r+26?26:p-r;if(m<y)break;var M=m-y,T=36-y;i.push(Xj(iz(y+M%T,0))),m=qj(M/T)}i.push(Xj(iz(m,0))),r=ez(n,g,c==u),n=0,++c}}++n,++s}return i.join("")}(t):t}))};function Jt(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s)}return Yj(i)}function nz(t){if(t>=55296&&t<=57343)throw new k("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function rz(t,i){return t>>i&63|128}function hz(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(nz(t),i.push(t>>12&15|224),i.push(rz(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(rz(t,12)),i.push(rz(t,6))),i.push(63&t|128)):i.push(t)}function oz(t){for(var i=[],e=0;e<t.length;e++){hz(t[e],i)}return i}function az(){if(tz>=$j)throw new k("Invalid byte index");var t=255&Jj[tz];if(tz++,128==(192&t))return 63&t;throw new k("Invalid continuation byte")}function uz(){var t,i;if(tz>$j)throw new k("Invalid byte index");if(tz===$j)return!1;if(t=255&Jj[tz],tz++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|az())>=128)return i;throw new k("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|az()<<6|az())>=2048)return nz(i),i;throw new k("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|az()<<12|az()<<6|az())>=65536&&i<=1114111)return i;throw new k("Invalid UTF-8 detected")}function cz(t){return[37,Rj(t>>4),Rj(15&t)]}function lz(t){return function(t){return t>=0&&t<=31}(t)||t>126}function dz(t){return lz(t)||32===t||34===t||60===t||62===t||96===t}function fz(t){return dz(t)||35===t||63===t||123===t||125===t}function _z(t){return fz(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function gz(t){return t<33||t>126||34===t||35===t||60===t||62===t}function wz(t){return gz(t)||39===t}function Az(t,i){if(!i(t))return[t];for(var e=oz([t]),s=[],n=0;n<e.length;n++){var r=e[n];s.push.apply(s,cz(r))}return s}function vz(t,i){for(var e=[],s=0,n=Kj(t);s<n.length;s++){var r=n[s];e.push.apply(e,Az(r,i))}return Jt(e)}function mz(t){return function(t){for(var i=[],e=t.length,s=0;s<e;s++){var n=t[s];if(37===n&&s+2<e&&zj(t[s+1])&&zj(t[s+2])){var r=Bj(t[s+1])<<4|Bj(t[s+2]);i.push(r),s+=2}else i.push(n)}return i}(oz(t))}function pz(t){return Jt(function(t){Jj=t.slice(),$j=Jj.length,tz=0;for(var i,e=[];!1!==(i=uz());)e.push(i);return e}(mz(Kj(t))))}function yz(t){var i=t.length,e=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<i&&":"===t[r]){if(!(r+1<i&&":"===t[r+1]))throw new _;r+=2,n=s+=1}for(;r<i;){if(8===s)throw new _("Too many groups");if(":"!==t[r]){for(var h=0,o=0;o<4&&r<i&&Mj.test(t[r]);)h=h<<4|j(t[r],16),r+=1,o+=1;if("."===t[r]){if(0===o)throw new _;if(r-=o,s>6)throw new _;for(var a=0;r<i;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new _;r+=1}if(!yj.test(t[r]))throw new _;for(;r<i&&yj.test(t[r]);){var c=j(t[r],10);if(null===u)u=c;else{if(0===u)throw new _;if((u=10*u+c)>255)throw new _}r+=1}e[s]=e[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new _;break}if(":"===t[r]){if((r+=1)===i)throw new _}else if(r<i)throw new _;e[s]=h,s+=1}else{if(null!==n)throw new _("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var l=s-n;for(s=7;0!==s&&l>0;)kj(e,s,n+l-1),s-=1,l-=1}else if(8!==s)throw new _;return e}function Mz(t){var i=10,e=Nj;return Tj.test(t)?(t=t.slice(2),i=16,e=Dj):t.length>=2&&"0"===t[0]&&(t=t.slice(1),i=8,e=Ij),""===t?0:e.test(t)?j(t,i):void 0}var Tz={J$:4},Nz=/[\0\t\n\r #%/:?@\[\\\]]/,Dz=/[\0\t\n\r #/:?@\[\\\]]/;function Iz(t,i){if("["===t[0]){if("]"!==t[t.length-1])throw new _("Invalid IPv6 address");return{J$:2,R9:yz(t.slice(1,-1))}}if(!i)return function(t){if(Dz.test(t))throw new _("Invalid code point in opaque host");var i=vz(t,lz);return""===i?Tz:{J$:3,ek:i}}(t);var e=function(t){var i=function(t){return sz(t.toLowerCase())}(t);return i}(pz(t));if(Nz.test(e))throw new _("Invalid code point in host");var s=function(t){var i=t.split(".");if(""===i[i.length-1]&&i.pop(),!(i.length>4)){for(var e=[],s=0;s<i.length;s++){var n=i[s];if(""===n)return;var r=Mz(n);if(void 0===r)return;e.push(r)}for(var h=0;h<e.length-1;h++)if(e[h]>255)throw new _;if(e[e.length-1]>=S.pow(256,5-e.length))throw new _;for(var o=e.pop(),a=0;a<e.length;a++)o+=e[a]*S.pow(256,3-a);return o}}(e);return void 0!==s?{J$:1,R9:s}:""===e?Tz:{J$:0,U9:e}}function Sz(t){switch(t.J$){case 0:return t.U9;case 1:return function(t){for(var i=[],e=t,s=1;s<=4;s++)i.push(""+(255&e)),4!==s&&i.push("."),e>>>=8;return i.reverse().join("")}(t.R9);case 2:return"["+function(t){for(var i="",e=function(t){for(var i=0,e=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>e&&(i=s,e=n),n=0);return n>e&&(i=s,e=n),e>1?i:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}e!==n?(i+=t[n].toString(16),7!==n&&(i+=":")):(i+=0===n?"::":":",s=!0)}return i}(t.R9)+"]";case 3:return t.ek;case 4:return""}}var Ez=/\+/g;function bz(t){return 42===t||45===t||46===t||95===t||jj(t)}function Lz(t){for(var i=t.split("&"),e=[],s=0;s<i.length;s++){var n=i[s];if(""!==n){var r=n.indexOf("="),h=void 0,o=void 0;-1!==r?(h=n.slice(0,r),o=n.slice(r+1)):(h=n,o=""),h=h.replace(Ez," "),o=o.replace(Ez," ");var a=pz(h),u=pz(o);e.push([a,u])}}return e}function kz(t){for(var i="",e=0;e<t.length;e++){var s=t[e];e>0&&(i+="&"),i+=xz(oz(Kj(s[0])))+"="+xz(oz(Kj(s[1])))}return i}function xz(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];32===s?i.push(43):bz(s)?i.push(s):i.push.apply(i,cz(s))}return Yj(i)}var Cz=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function Bu(t){var i=""+t,e=Cz.exec(i);return e?function(t,i){for(var e=t.length,s=[],n=i;n<e;n++){var r=t.charCodeAt(n);if(jz(r))if(zz(r)||n===e-1)s.push(Oz);else{var h=t.charCodeAt(n+1);zz(h)?(s.push(r,h),n++):s.push(Oz)}else s.push(r)}return t.slice(0,i)+Yj(s)}(i,e.index):i}var Oz=65533,jz=function(t){return 55296==(63488&t)},zz=function(t){return 0!=(1024&t)};function Pz(t,i){var e=t[0],s=i[0];return e===s?0:e<s?-1:1}function Bz(t){t.Q9.length=0}function Rz(t,i){!function(t,i){for(var e=0;e<i.length;e++)t[e]=i[e];t.length=i.length}(t.Q9,Lz(i))}function Uz(t){if(t.Vu){var i=kz(t.Q9);""===i&&(i=null),t.Vu.Vu.F9=i}}var Qz=function(){function t(t){if(void 0===t&&(t=void 0),this.Vu=null,null==t)this.Q9=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof Qz&&!!Ej(t.Q9)&&(!bj||t[Symbol.iterator]===Fz)}(t))this.Q9=t.Q9.slice();else if(function(t){return null!=t&&(!!Ej(t)||!!bj&&"function"==typeof t[Symbol.iterator])}(t)){this.Q9=[];for(var i=0,e=Lj(t);i<e.length;i++){var s=Lj(e[i]);if(2!==s.length)throw new _("Invalid name-value pair");this.Q9.push([Bu(s[0]),Bu(s[1])])}}else for(var n in this.Q9=[],t)C.prototype.hasOwnProperty.call(t,n)&&this.Q9.push([Bu(n),Bu(t[n])]);else(t=Bu(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.Q9=Lz(t)}var i=t.prototype;return i.append=function(t,i){t=Bu(t),i=Bu(i),this.Q9.push([t,i]),Uz(this)},i.delete=function(t){t=Bu(t);for(var i=this.Q9,e=0;e<i.length;){i[e][0]===t?i.splice(e,1):e++}Uz(this)},i.get=function(t){t=Bu(t);for(var i=this.Q9,e=0;e<i.length;e++){var s=i[e];if(s[0]===t)return s[1]}return null},i.getAll=function(t){t=Bu(t);for(var i=this.Q9,e=[],s=0;s<i.length;s++){var n=i[s];n[0]===t&&e.push(n[1])}return e},i.has=function(t){t=Bu(t);for(var i=this.Q9,e=0;e<i.length;e++){if(i[e][0]===t)return!0}return!1},i.set=function(t,i){t=Bu(t),i=Bu(i);for(var e=this.Q9,s=!1,n=0;n<e.length;){var r=e[n];r[0]===t?s?e.splice(n,1):(r[1]=i,s=!0,n++):n++}s||e.push([t,i]),Uz(this)},i.sort=function(){vj(this.Q9,Pz),Uz(this)},i.toString=function(){return kz(this.Q9)},i.entries=function(){return new Vz(this.Q9,Yz)},i.keys=function(){return new Vz(this.Q9,Gz)},i.values=function(){return new Vz(this.Q9,Wz)},i.forEach=function(t){var i=this;this.Q9.forEach((function(e){return t(e[1],e[0],i)}))},t}(),Fz=Qz.prototype.entries;bj&&(Qz.prototype[Symbol.iterator]=Fz);var Yz=function(t){return[t[0],t[1]]},Gz=function(t){return t[0]},Wz=function(t){return t[1]},Vz=function(){function t(t,i){this.Y9=0,this.Q9=t,this.G9=i}return t.prototype.next=function(){return this.Y9<this.Q9.length?{done:!1,value:this.G9(this.Q9[this.Y9++])}:{done:!0,value:void 0}},t}(),Hz="null";var Hn=C.create(null);Hn.ftp=21,Hn.file=0,Hn.gopher=70,Hn.http=80,Hn.https=443,Hn.ws=80,Hn.wss=443;var qz=/^(?:\.|%2e)$/i,Xz=/^(?:\.|%2e){2}$/i;function Zz(t){return qz.test(t)}function Kz(t){return Xz.test(t)}function Jz(t){return void 0!==Hn[t]}function ec(t){return Jz(t.W9)}function $z(t){return""!==t.V9||""!==t.H9}function tP(t){var i=t.length;if(!(i>=2))return!1;if(!eP(t.slice(0,2)))return!1;if(2!==i){var e=t[2];if(47!==e&&92!==e&&63!==e&&35!==e)return!1}return!0}function iP(t){return 2===t.length&&pj.test(t[0])&&(":"===t[1]||"|"===t[1])}function eP(t){return 2===t.length&&iP(Yj(t))}function sP(t){return iP(t)&&":"===t[1]}function nP(t){var i=t.q9;0!==i.length&&("file"===t.W9&&1===i.length&&sP(i[0])||i.pop())}function rP(t){return null===t.X9||Tz===t.X9||t.Z9||"file"===t.W9}var It=-1,hP=/\t|\n|\r/g,oP=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function aP(t,i,e,s){void 0===e&&(e=null),void 0===s&&(s=null),e||(e=new uP,t=t.replace(oP,""));var n=null!==s?s:0;i=i||null;for(var r=[],h=!1,o=!1,a=!1,u=Kj(t=t.replace(hP,"")),c=u.length,l=0;l<=c;){var d=l<c?u[l]:It;switch(n){case 0:if(!Cj(d)){if(null===s){r.length=0,n=2;continue}throw new _("Invalid scheme")}r.push(Pj(d)),n=1;break;case 1:if(jj(d)||43===d||45===d||46===d)r.push(Pj(d));else{if(58!==d){if(null===s){r.length=0,n=2,l=0;continue}throw new _("Invalid scheme")}var f=Jt(r);if(null!==s){if(Jz(e.W9)&&!Jz(f))return;if(!Jz(e.W9)&&Jz(f))return;if(($z(e)||null!==e.G6)&&"file"===f)return;if("file"===e.W9&&(e.X9===Tz||null===e.X9))return}if(e.W9=f,null!==s)return void(ec(e)&&e.G6===Hn[e.W9]&&(e.G6=null));r.length=0,"file"===e.W9?n=13:ec(e)&&i&&i.W9===e.W9?n=3:ec(e)?n=7:47===u[l+1]?(n=4,l+=1):(e.Z9=!0,e.q9.push(""),n=18)}break;case 2:if(!i||i.Z9&&35!==d)throw new _("Invalid scheme");i.Z9&&35===d?(e.W9=i.W9,e.q9=i.q9.slice(),e.F9=i.F9,e.K9="",e.Z9=!0,n=20):"file"!==i.W9?(n=5,l-=1):(n=13,l-=1);break;case 3:47===d&&47===u[l+1]?n=8:(n=5,l-=1);break;case 4:47===d?n=9:(n=17,l-=1);break;case 5:e.W9=i.W9,It===d?(e.V9=i.V9,e.H9=i.H9,e.X9=i.X9,e.G6=i.G6,e.q9=i.q9.slice(),e.F9=i.F9):47===d?n=6:63===d?(e.V9=i.V9,e.H9=i.H9,e.X9=i.X9,e.G6=i.G6,e.q9=i.q9.slice(),e.F9="",n=19):35===d?(e.V9=i.V9,e.H9=i.H9,e.X9=i.X9,e.G6=i.G6,e.q9=i.q9.slice(),e.F9=i.F9,e.K9="",n=20):92===d&&ec(e)?n=6:(e.V9=i.V9,e.H9=i.H9,e.X9=i.X9,e.G6=i.G6,e.q9=i.q9.slice(),e.q9.pop(),n=17,l-=1);break;case 6:!ec(e)||47!==d&&92!==d?47===d?n=9:(e.V9=i.V9,e.H9=i.H9,e.X9=i.X9,e.G6=i.G6,n=17,l-=1):n=8;break;case 7:if(47!==d||47!==u[l+1]){n=8;continue}n=8,l+=1;break;case 8:47!==d&&92!==d&&(n=9,l-=1);break;case 9:if(64===d){h&&r.unshift(37,52,48),h=!0;for(var g=0;g<r.length;g++){var w=r[g];if(58!==w||a){var A=Jt(Az(w,_z));a?e.H9+=A:e.V9+=A}else a=!0}r.length=0}else if(It===d||47===d||63===d||35===d||ec(e)&&92===d){if(h&&0===r.length)throw new _("Invalid host");l-=r.length+1,r.length=0,n=10}else r.push(d);break;case 10:case 11:if(null!==s&&"file"===e.W9)l-=1,n=15;else if(58!==d||o)if(It===d||47===d||63===d||35===d||ec(e)&&92===d){if(l-=1,ec(e)&&0===r.length)throw new _("Invalid host");if(null!==s&&0===r.length&&($z(e)||null!==e.G6))return;var v=Iz(Jt(r),ec(e));if(e.X9=v,r.length=0,n=16,null!==s)return}else 91===d?o=!0:93===d&&(o=!1),r.push(d);else{if(0===r.length)throw new _("Invalid host");var m=Iz(Jt(r),ec(e));if(e.X9=m,r.length=0,n=12,11===s)return}break;case 12:if(Oj(d))r.push(d);else{if(!(It===d||47===d||63===d||35===d||ec(e)&&92===d||null!==s))throw new _("Invalid port");if(0!==r.length){var p=j(Jt(r),10);if(p>65535)throw new _("Invalid port");e.G6=p===Hn[e.W9]?null:p,r.length=0}if(null!==s)return;n=16,l-=1}break;case 13:e.W9="file",47===d||92===d?n=14:i&&"file"===i.W9?It===d?(e.X9=i.X9,e.q9=i.q9.slice(),e.F9=i.F9):63===d?(e.X9=i.X9,e.q9=i.q9.slice(),e.F9="",n=19):35===d?(e.X9=i.X9,e.q9=i.q9.slice(),e.F9=i.F9,e.K9="",n=20):(tP(u.slice(l))||(e.X9=i.X9,e.q9=i.q9.slice(),nP(e)),n=17,l-=1):(n=17,l-=1);break;case 14:47===d||92===d?n=15:(i&&"file"===i.W9&&!tP(u.slice(l))&&(sP(i.q9[0])?e.q9.push(i.q9[0]):e.X9=i.X9),n=17,l-=1);break;case 15:if(It===d||47===d||92===d||63===d||35===d)if(l-=1,null===s&&eP(r))n=17;else if(0===r.length){if(e.X9=Tz,null!==s)return;n=16}else{var y=Iz(Jt(r),ec(e));if(0===y.J$&&"localhost"===y.U9&&(y=Tz),e.X9=y,null!==s)return;r.length=0,n=16}else r.push(d);break;case 16:ec(e)?(n=17,47!==d&&92!==d&&(l-=1)):null===s&&63===d?(e.F9="",n=19):null===s&&35===d?(e.K9="",n=20):It!==d&&(n=17,47!==d&&(l-=1));break;case 17:if(It===d||47===d||ec(e)&&92===d||null===s&&(63===d||35===d)){var M=Jt(r);if(Kz(M)?(nP(e),47===d||ec(e)&&92===d||e.q9.push("")):!Zz(M)||47===d||ec(e)&&92===d?Zz(M)||("file"===e.W9&&0===e.q9.length&&eP(r)&&(Tz!==e.X9&&null!==e.X9&&(e.X9=Tz),r[1]=58,M=Jt(r)),e.q9.push(M)):e.q9.push(""),r.length=0,"file"===e.W9&&(It===d||63===d||35===d))for(;e.q9.length>1&&""===e.q9[0];)e.q9.shift();63===d?(e.F9="",n=19):35===d&&(e.K9="",n=20)}else r.push.apply(r,Az(d,fz));break;case 18:63===d?(e.F9="",n=19):35===d?(e.K9="",n=20):It!==d&&(e.q9[0]+=Jt(Az(d,lz)));break;case 19:null===s&&35===d?(e.K9="",n=20):It!==d&&(e.F9+=Jt(Az(d,ec(e)?wz:gz)));break;case 20:It===d||0===d||(e.K9+=Jt(Az(d,dz)))}l++}return e}function pr(t,i,e,s){try{aP(t,i,e,s)}catch(t){}}var uP=function(){this.W9="",this.V9="",this.H9="",this.X9=null,this.G6=null,this.q9=[],this.F9=null,this.K9=null,this.Z9=!1};function cP(t){switch(t.W9){case"blob":var i;try{i=aP(t.q9[0],null)}catch(t){return Hz}return cP(i);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,i,e){return t+"://"+Sz(i)+(null===e?"":":"+e)}(t.W9,t.X9,t.G6);default:return Hz}}var lP=function(){function t(t,i){var e,s=null;if(null!=i)if(function(t){return null!=t&&t instanceof lP&&"object"==typeof t.Vu}(i))s=i.Vu;else try{s=aP(String(i),null)}catch(t){throw new _("Invalid base URL: "+t.message)}try{e=aP(String(t),s)}catch(t){throw new _("Invalid URL: "+t.message)}var n=e.F9;this.Vu=e,this.F9=function(t){var i=new Qz;return null!==t&&Rz(i,t),i}(n),this.F9.Vu=this}var i=t.prototype;return i.toString=function(){return this.href},i.toJSON=function(){return this.href},function(t,i,e){i&&Aj(t.prototype,i),e&&Aj(t,e)}(t,[{key:"href",get:function(){return function(t,i){void 0===i&&(i=!1);var e=t.W9+":";if(null!==t.X9?(e+="//",$z(t)&&(e+=t.V9,""!==t.H9&&(e+=":"+t.H9),e+="@"),e+=Sz(t.X9),null!==t.G6&&(e+=":"+t.G6)):null===t.X9&&"file"===t.W9&&(e+="//"),t.Z9)e+=t.q9[0];else for(var s=0,n=t.q9;s<n.length;s++)e+="/"+n[s];return null!==t.F9&&(e+="?"+t.F9),i||null===t.K9||(e+="#"+t.K9),e}(this.Vu)},set:function(t){var i;try{i=aP(String(t),null)}catch(t){throw new _("Invalid URL: "+t.message)}this.Vu=i,Bz(this.F9);var e=this.Vu.F9;null!==e&&Rz(this.F9,e)}},{key:"origin",get:function(){return cP(this.Vu)}},{key:"protocol",get:function(){return this.Vu.W9+":"},set:function(t){pr(t+":",null,this.Vu,0)}},{key:"username",get:function(){return this.Vu.V9},set:function(t){rP(this.Vu)||(this.Vu.V9=vz(t,_z))}},{key:"password",get:function(){return this.Vu.H9},set:function(t){rP(this.Vu)||(this.Vu.H9=vz(t,_z))}},{key:"host",get:function(){var t=this.Vu,i=t.X9;if(null===i)return"";var e=t.G6,s=Sz(i);return null!==e&&(s+=":"+e),s},set:function(t){this.Vu.Z9||pr(t,null,this.Vu,10)}},{key:"hostname",get:function(){var t=this.Vu.X9;return null===t?"":Sz(t)},set:function(t){this.Vu.Z9||pr(t,null,this.Vu,11)}},{key:"port",get:function(){var t=this.Vu.G6;return null===t?"":""+t},set:function(t){rP(this.Vu)||(""===t?this.Vu.G6=null:pr(t,null,this.Vu,12))}},{key:"pathname",get:function(){var t=this.Vu.q9;return this.Vu.Z9?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.Vu.Z9||(this.Vu.q9.length=0,pr(t,null,this.Vu,16))}},{key:"search",get:function(){var t=this.Vu.F9;return null===t||""===t?"":"?"+t},set:function(t){t=Bu(t);var i=this.Vu;if(""===t)return i.F9=null,void Bz(this.F9);"?"===t[0]&&(t=t.slice(1)),i.F9="",pr(t,null,i,19),Rz(this.F9,t)}},{key:"searchParams",get:function(){return this.F9}},{key:"hash",get:function(){var t=this.Vu.K9;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.Vu.K9="",pr(t,null,this.Vu,20)):this.Vu.K9=null}}]),t}();function dP(t){return t.document&&t.document.baseURI||t.location.href||""}function fP(){let t=J,i=t.location.href;for(;t!==s.top;){t=t.parent;try{i=t.location.href}catch(t){}}return i}r(),r(),r(),r(),r();var _P=!!("ontouchstart"in self||self.DocumentTouch&&c instanceof self.DocumentTouch)||!(!td||!td.msMaxTouchPoints),gP=KT(),wP=!(!gP||!gP.webkitShowPlaybackTargetPicker),AP=class{get J9(){return void 0===this.t7&&(this.t7=this.i7()),this.t7}i7(){return 0}get e7(){return!li.fb}get s7(){if(s.screen)return{width:s.screen.width,height:s.screen.height}}get A4(){return s.devicePixelRatio||1}get n7(){return wP}get t4(){return!1}get V1(){return!0}get oA(){return li.ZE||li.Ra}get pj(){return!0}get uA(){return!0}get aA(){return!1}get r7(){}get h7(){return!0}get eJ(){return!1}get o7(){return!1}get a7(){return li.zE}u7(t,i){return!0}l7(t){return t>=2*Vu}constructor(){this.t7=void 0,this.d7=!1,this.Qe=_P,this.Ys=!1,this.O8=!0}};r();var vP=function(){const t=ZT();if(!t)return!1;const i=t.muted;return t.muted=!i,t.muted!==i}(),mP=function(){if(li.oE)return!1;const t=ZT();if(!t)return!1;const i=t.volume;return t.volume=i/2+.1,i!==t.volume}();var Ci=class extends AP{i7(){return this.f7?this.f7.J9:super.i7()}get r7(){var t;return null==(t=this.f7)?void 0:t.r7}get h7(){var t,i;return null==(i=null==(t=this.f7)?void 0:t.h7)||i}u7(t,i){return this.f7?this.f7.u7(t,i):super.u7(t,i)}l7(t){return this.f7?this.f7.l7(t):super.l7(t)}constructor(t){super(),this.f7=t,this.f7&&(this.d7=this.f7.d7,this.Qe=this.f7.Qe,this.O8=vP&&this.f7.O8)}},pP=class extends Ci{get aA(){return li.Ra}constructor(t){super(t),this.d7=!0,this.Ys=!0}},yP=class extends pP{get aA(){return!0}i7(){return gk(!0)?super.i7():1}};r();var MP=class extends Ci{get t4(){return li.xE<3}get V1(){return li.xE>=3}get s7(){return s.tizen&&!this._7&&s.tizen.systeminfo.getPropertyValue("DISPLAY",(t=>{const i=t.resolutionWidth,e=t.resolutionHeight;1===i&&1===e||(this._7={width:i,height:e})})),this._7}get eJ(){return li.xE<3}get o7(){return!0}u7(t,i){return super.u7(t,i)}};r();var D=class extends AP{constructor(){super()}};r();var TP=class extends D{get r7(){if(li.WS)return 4096}u7(t,i){if(t&&t.g7&&i&&i.g7){let e=B(t.g7,"mp4a.40.2")&&B(i.g7,"mp4a.40.5"),s=B(t.g7,"mp4a.40.5")&&B(i.g7,"mp4a.40.2"),n=B(t.g7,"mp4a.40.2")&&B(i.g7,"mp4a.40.34"),r=B(t.g7,"mp4a.40.34")&&B(i.g7,"mp4a.40.2"),h=B(t.g7,"mp4a.40.5")&&B(i.g7,"mp4a.40.34"),o=B(t.g7,"mp4a.40.34")&&B(i.g7,"mp4a.40.5");return!(e||s||n||r||h||o)}return!0}};function B(t,i){return t.indexOf(i)>-1}r();var NP=class extends D{l7(t){return t>=2}};r();var DP=class extends D{constructor(){super(),this.d7=li.JE>=11,this.O8=li.ZE&&!(li.Ra&&li.JE<10)}};r();var IP=class extends Ci{get s7(){return s.webOS&&!this._7&&s.webOS.deviceInfo((t=>{this._7={width:t.screenWidth,height:t.screenHeight}})),this._7}get pj(){return!1}get o7(){return!0}};r();var SP=class extends D{get h7(){return!li.HS||(li.DE?92!==li.EE:li.TE>=100)}};r();var EP=class extends Ci{get aA(){return!0}},bP=class{w7(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];jS(...i)}Wv(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Ii(...i)}A7(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Ja(...i)}v7(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];zS(t,...e)}h_(t,i){return v(t,i)}RJ(t,i){return b(t,i)}r_(t){m(t)}QJ(t){w(t)}eC(){return this.m7.eC()}Xx(){return this.m7.Xx()}Kx(){return this.m7.Kx()}Zx(){return this.m7.Zx()}Hx(){return this.m7.Hx()}$x(t,i){return this.m7.$x(t,i)}qx(t){return this.m7.qx(t)}get dj(){return this.p7}Ph(t,i){let e;return void 0===i&&(i=dP(J)),e="object"!=typeof i||i instanceof lP?i:i.href,new lP(t,e)}Sv(t,i){if(void 0===i&&(i=dP(J)),this.y7){const e=ji(i)?i:i.toString();return new self.URL(t,e).href}return this.Ph(t,i).href}get Ks(){return this.M7}get lA(){return{cA:td&&td.userAgent.match(/Android /i)?"Android":"other",dA:Boolean(td&&td.userAgent.match(/Android 8.0.0/i))}}get qG(){return self&&self.location&&"https:"===self.location.protocol}get T7(){return"languages"in td?td.languages.slice():[td.language]}constructor(){this.p7=new LP,this.M7=function(){const t=function(){if(li.VE)return new TP;if(li.BE||li.UE)return new NP;if(li.ZE)return new DP;if(li.yE)return new SP;return new D}();return li.Ra?new yP(t):li.Ys?new pP(t):li.LE?new MP(t):li.OE?new IP(t):li.WS?new EP(t):new Ci(t)}(),this.y7=function(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}(),self.performance&&self.performance.now?this.n_=()=>self.performance.now():this.n_=Nr}},LP=class{get _j(){return td.oscpu}get Ks(){return td.platform}get gj(){return td.vendor}get wj(){return td.vendorSub}};r(),r();var fr=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(i,e)=>new t(i,e)}(t)}catch(t){}const i=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(i)return function(t){return(i,e)=>{const s=new t;if(i)for(const t of i)s.append(t);return s.getBlob(e&&e.type||"")}}(i)})();function kP(t,i,e){const s=fr([i],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,i){let e=t;const s=e.indexOf("?");if(s>=0&&(e=e.substr(0,s)),e=e.substr(e.lastIndexOf("/")+1),i){let t=e.indexOf(".");t<0&&(t=e.length),e=e.substr(0,t)+i+e.substr(t)}return e}(t,e),h=c.createElement("a");h.href=n,h.download=r,c.body.appendChild(h),h.click(),c.body.removeChild(h),URL.revokeObjectURL(n)}r(),r(),r();var xP=class extends jt{get name(){return Is.OI}constructor(t,i){super(t,function(t){return"Error while opening "+t+". Invalid URL."}(t.Iu),i)}};r();var CP=function(t,i){return(CP=C.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)};function OP(t,i){function e(){this.constructor=t}CP(t,i),t.prototype=null===i?C.create(i):(e.prototype=i.prototype,new e)}var yo="object"==typeof s?s:"object"==typeof self?self:"object"==typeof global?global:null;var jP=function(){var t=yo.Blob;if(t)try{return new t,function(t,i){return new yo.Blob(t,i)}}catch(t){}var i=yo.BlobBuilder||yo.WebKitBlobBuilder||yo.MozBlobBuilder||yo.MSBlobBuilder;return i?function(t){return function(i,e){var s=new t;if(i)for(var n=0,r=i;n<r.length;n++){var h=r[n];s.append(h)}return s.getBlob(e&&e.type||"")}}(i):null}(),zP="function"==typeof _o?_o:void 0;function PP(t){return t&&"function"==typeof t.getReader}function BP(t){if("function"!=typeof t)return!1;try{var i=!1,e=new t({start:function(){i=!0}});return!!i&&PP(e)}catch(t){return!1}}var RP=function(){function t(t,i){this._d=t,this.N7=i}return t.prototype.pull=function(t){var i=this;return this._d.read().then((function(e){i.N7&&i.N7(e),e.done?t.close():t.enqueue(e.value)}))},t.prototype.cancel=function(t){return this._d.cancel(t)},t}();function UP(t,i){return i.constructor===t?i:new t(new RP(i.getReader()),{highWaterMark:0})}var QP=function(){function t(t,i){this.D7=t,this.I7=i}return t.prototype.pull=function(t){return this.D7().then((function(i){t.enqueue(new A(i)),t.close()}))},t.prototype.cancel=function(t){this.I7&&this.I7(t)},t}();function FP(t,i,e){return new t(new QP(i,e),{highWaterMark:0})}var ii={searchParams:"URLSearchParams"in yo,iterable:"Symbol"in yo&&"iterator"in Symbol,blob:"FileReader"in yo&&!!jP,formData:"FormData"in yo,arrayBuffer:"ArrayBuffer"in yo,stream:BP(zP),streamRequest:"Request"in yo&&"body"in yo.Request.prototype,streamResponse:"Response"in yo&&"body"in yo.Response.prototype,abort:"AbortController"in yo&&"Request"in yo&&"signal"in yo.Request.prototype,encoding:"TextEncoder"in yo&&"TextDecoder"in yo,url:"URL"in yo&&function(t){try{return new yo.URL(t).toString()===t}catch(t){return!1}}("http://example.com/"),firefox:"navigator"in yo&&/Firefox\//.test(yo.navigator.userAgent)};function YP(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new _("Invalid character in header field name");return t}function GP(t){return"string"!=typeof t&&(t=String(t)),t}function WP(t){var i={next:function(){var i=t.shift();return{done:void 0===i,value:i}}};return ii.iterable&&(i[Symbol.iterator]=function(){return i}),i}var VP=function(){function t(t){var i=this;this.Ff={};var e=function(t,e){Array.isArray(t)&&2===t.length?i.append(t[0],t[1]):i.append(e,t)};!function(t){return t&&"function"==typeof t.forEach}(t)?!function(t){return ii.iterable&&t&&t[Symbol.iterator]}(t)?t&&C.getOwnPropertyNames(t).forEach((function(e){i.append(e,t[e])})):Array.from(t).forEach(e):t.forEach(e)}return t.prototype.append=function(t,i){t=YP(t),i=GP(i);var e=t.toLowerCase();if(this.Ff.hasOwnProperty(e)){var s=this.Ff[e],n=s[1];s[1]=n?n+", "+i:i}else this.Ff[e]=[t,i]},t.prototype.delete=function(t){var i=YP(t).toLowerCase();delete this.Ff[i]},t.prototype.get=function(t){var i=YP(t).toLowerCase();return this.Ff.hasOwnProperty(i)?this.Ff[i][1]:null},t.prototype.has=function(t){var i=YP(t).toLowerCase();return this.Ff.hasOwnProperty(i)},t.prototype.set=function(t,i){var e=(t=YP(t)).toLowerCase();this.Ff[e]=[t,GP(i)]},t.prototype.forEach=function(t,i){for(var e in this.Ff)this.Ff.hasOwnProperty(e)&&t.call(i,this.Ff[e][1],e,this)},t.prototype.keys=function(){var t=[];return this.forEach((function(i,e){t.push(e)})),WP(t)},t.prototype.values=function(){var t=[];return this.forEach((function(i){t.push(i)})),WP(t)},t.prototype.entries=function(){var t=[];return this.forEach((function(i,e){t.push([e,i])})),WP(t)},t.prototype.asList=function(){var t=[];for(var i in this.Ff)if(this.Ff.hasOwnProperty(i)){var e=this.Ff[i],s=e[0],n=e[1];t.push([s,n])}return t},t}();function HP(){}ii.iterable&&(VP.prototype[Symbol.iterator]=VP.prototype.entries);var qP,XP,Iu,ZP=S.min,KP=String.fromCharCode,JP=16384;function $P(t){for(var i=[],e=0,s=t;e<s.length;e++){var n=s[e];n>65535&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n)}return function(t){for(var i=t.length,e=[],s=0;s<i;s+=JP){var n=ZP(s+JP,i);e.push(KP.apply(null,t.slice(s,n)))}return e.join("")}(i)}function tB(t){if(t>=55296&&t<=57343)throw new k("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function iB(t,i){return t>>i&63|128}function eB(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(tB(t),i.push(t>>12&15|224),i.push(iB(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(iB(t,12)),i.push(iB(t,6))),i.push(63&t|128)):i.push(t)}function sB(){if(Iu>=XP)throw new k("Invalid byte index");var t=255&qP[Iu];if(Iu++,128==(192&t))return 63&t;throw new k("Invalid continuation byte")}function nB(){var t,i;if(Iu>XP)throw new k("Invalid byte index");if(Iu===XP)return!1;if(t=255&qP[Iu],Iu++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|sB())>=128)return i;throw new k("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|sB()<<6|sB())>=2048)return tB(i),i;throw new k("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|sB()<<12|sB()<<6|sB())>=65536&&i<=1114111)return i;throw new k("Invalid UTF-8 detected")}var rB=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];function hB(t){return t&&URLSearchParams.prototype.isPrototypeOf(t)}function oB(t){return t&&ArrayBuffer.prototype.isPrototypeOf(t)}function aB(t){return t&&DataView.prototype.isPrototypeOf(t)}var Xe,uB=ArrayBuffer.isView||function(t){return t&&(rB.indexOf(C.prototype.toString.call(t))>-1||aB(t))};function cB(t){if(t.bodyUsed)return Promise.reject(new _("Already used"));t.bodyUsed=!0}function lB(t){return new Promise((function(i,e){t.onload=function(){i(t.result)},t.onerror=function(){e(t.error)}}))}function dB(t){return ii.encoding?new yo.TextDecoder("utf-8").decode(new A(t)):$P(function(t){XP=(qP=t).length,Iu=0;for(var i,e=[];!1!==(i=nB());)e.push(i);return e}(new A(t)))}function fB(t){return ii.encoding?(new yo.TextEncoder).encode(t).buffer:new A(function(t){for(var i=[],e=0,s=t;e<s.length;e++)eB(s[e],i);return i}(function(t){for(var i=[],e=0,s=t.length;e<s;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){var r=t.charCodeAt(e++);56320==(64512&r)?i.push(((1023&n)<<10)+(1023&r)+65536):(i.push(n),e--)}else i.push(n)}return i}(t))).buffer}function _B(t){var i=t.getReader(),e=[],s=function(t){var n=t.done,r=t.value;return n?Promise.resolve(e):(e.push(r),i.read().then(s))};return i.read().then(s)}function gB(t){return _B(t).then((function(t){return function(t){for(var i=0,e=0,s=t;e<s.length;e++)i+=(a=s[e]).byteLength;for(var n=new A(i),r=0,h=0,o=t;h<o.length;h++){var a=o[h];n.set(a,r),r+=a.byteLength}return n}(t).buffer}))}function wB(t){return t.slice?t.slice(0):AB(new A(t))}function AB(t){if(t.slice)return t.slice(0).buffer;var i=new A(t.byteLength);return i.set(new A(t.buffer,t.byteOffset,t.byteLength)),i.buffer}function vB(t){var i=new FormData;return t.trim().split("&").forEach((function(t){if(t){var e=t.split("="),s=e.shift().replace(/\+/g," "),n=e.join("=").replace(/\+/g," ");i.append(decodeURIComponent(s),decodeURIComponent(n))}})),i}function mB(t){var i=t;if(i.bodyUsed)throw new _("Already used");if(i.S7===Xe.E7){if(!i.b7.tee)throw new k("could not clone ReadableStream body");var e=i.b7.tee(),s=e[0],n=e[1];return i.body=s,i.b7=s,i.L7=s,n}return i.S7===Xe.$I?wB(i.b7):i.S7===Xe.DG?i.b7.then(mB):i.L7}!function(t){t[t.Au=0]="Au",t[t.k7=1]="k7",t[t.x7=2]="x7",t[t.$I=3]="$I",t[t.E7=4]="E7",t[t.DG=5]="DG"}(Xe||(Xe={}));var pB=function(){function t(i,e){this.bodyUsed=!1;var s=this;if(this.L7=i||null,i)if("string"==typeof i)this.S7=Xe.Au,this.b7=i;else if(function(t){return t&&"function"==typeof t.then}(i))this.S7=Xe.DG,this.b7=Promise.resolve(i).then((function(i){return new t(i,e)})),this.b7.catch(HP);else if(ii.blob&&function(t){return t&&Blob.prototype.isPrototypeOf(t)}(i))this.S7=Xe.k7,this.b7=i;else if(ii.formData&&function(t){return t&&FormData.prototype.isPrototypeOf(t)}(i))this.S7=Xe.x7,this.b7=i;else if(ii.searchParams&&hB(i))this.S7=Xe.Au,this.b7=i.toString();else if(ii.arrayBuffer&&(oB(i)||uB(i)))aB(i)&&(this.L7=function(t){return new A(t.buffer,t.byteOffset,t.byteLength)}(i)),this.S7=Xe.$I,this.b7=function(t){return oB(t)?wB(t):AB(t)}(i);else{if(!ii.stream||!PP(i))throw new k("unsupported BodyInit type");i=UP(zP,i),this.S7=Xe.E7,this.b7=i,this.L7=i}else this.S7=Xe.Au,this.b7="";this.C7="",e.has("content-type")?this.C7=(e.get("content-type")||"").toLowerCase():("string"==typeof i?this.C7="text/plain;charset=UTF-8":s.S7===Xe.k7&&s.b7.type?this.C7=s.b7.type:ii.searchParams&&hB(i)&&(this.C7="application/x-www-form-urlencoded;charset=UTF-8"),this.C7&&e.set("content-type",this.C7)),ii.stream&&(null==i?this.body=null:s.S7===Xe.E7?this.body=s.b7:this.body=FP(zP,(function(){return s.arrayBuffer()}),(function(){s.bodyUsed=!0})))}return t.prototype.text=function(){var t=this,i=cB(t);return i||(t.S7===Xe.k7?function(t){var i=new FileReader,e=lB(i);return i.readAsText(t),e}(t.b7):t.S7===Xe.$I?Promise.resolve(t.b7).then(dB):t.S7===Xe.E7?function(t){return gB(t).then(dB)}(t.b7):t.S7===Xe.DG?t.b7.then((function(t){return t.text()})):t.S7===Xe.x7?Promise.reject(new k("could not read FormData body as text")):Promise.resolve(t.b7))},t.prototype.json=function(){return this.text().then(JSON.parse)},t}();ii.blob&&(pB.prototype.blob=function(){var t=this,i=cB(t);return i||(t.S7===Xe.k7?Promise.resolve(t.b7):t.S7===Xe.$I?Promise.resolve(jP([t.b7],{type:t.C7})):t.S7===Xe.E7?function(t,i){return _B(t).then((function(t){return jP(t,{type:i||""})}))}(t.b7,t.C7):t.S7===Xe.DG?t.b7.then((function(t){return t.blob()})):t.S7===Xe.x7?Promise.reject(new k("could not read FormData body as Blob")):Promise.resolve(jP([t.b7],{type:t.C7})))}),ii.arrayBuffer&&(pB.prototype.arrayBuffer=function(){var t=this;return t.S7===Xe.$I?cB(t)||Promise.resolve(t.b7):t.S7===Xe.k7?cB(t)||function(t){var i=new FileReader,e=lB(i);return i.readAsArrayBuffer(t),e}(t.b7):t.S7===Xe.E7?gB(t.b7):t.S7===Xe.DG?cB(t)||t.b7.then((function(t){return t.arrayBuffer()})):t.S7===Xe.x7?Promise.reject(new k("could not read FormData body as ArrayBuffer")):Promise.resolve(t.b7).then(fB)}),ii.formData&&(pB.prototype.formData=function(){var t=this;return t.S7===Xe.x7?cB(t)||Promise.resolve(t.b7):t.text().then(vB)});var yB=[301,302,303,307,308],MB=function(t){function i(i,e){var s=this,n=new VP((e=e||{}).headers);return(s=t.call(this,i||null,n)||this).type="default",s.status=void 0===e.status?200:e.status,s.ok=s.status>=200&&s.status<300,s.statusText=void 0!==e.statusText?String(e.statusText):"",s.headers=n,s.url=e.url||"",s}return OP(i,t),i.prototype.clone=function(){return new i(mB(this),{status:this.status,statusText:this.statusText,headers:new VP(this.headers),url:this.url})},i.error=function(){var t=new i(null,{status:0,statusText:""});return t.type="error",t},i.redirect=function(t,e){if(-1===yB.indexOf(e))throw new RangeError("Invalid status code");return new i(null,{status:e,headers:{location:t}})},i}(pB);var TB=function(t,i){return t(i={exports:{}},i.exports),i.exports}((function(t,i){function e(t,i){if(!(t instanceof i))throw new _("Cannot call a class as a function")}function s(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),C.defineProperty(t,s.key,s)}}function n(t,i,e){return i&&s(t.prototype,i),e&&s(t,e),t}function r(t){return(r=C.setPrototypeOf?C.getPrototypeOf:function(t){return t.__proto__||C.getPrototypeOf(t)})(t)}function h(t,i){return(h=C.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,i,e){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,i,e){var s=function(t,i){for(;!C.prototype.hasOwnProperty.call(t,i)&&null!==(t=r(t)););return t}(t,i);if(s){var n=C.getOwnPropertyDescriptor(s,i);return n.get?n.get.call(e):n.value}},a(t,i,e||t)}C.defineProperty(i,"__esModule",{value:!0});var u=function(){function t(){e(this,t),C.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(t,[{key:"addEventListener",value:function(t,i){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(i)}},{key:"removeEventListener",value:function(t,i){if(t in this.listeners)for(var e=this.listeners[t],s=0,n=e.length;s<n;s++)if(e[s]===i)return void e.splice(s,1)}},{key:"dispatchEvent",value:function(t){var i=this;if(t.type in this.listeners){for(var e=function(e){v((function(){return e.call(i,t)}))},s=this.listeners[t.type],n=0,r=s.length;n<r;n++)e(s[n]);return!t.defaultPrevented}}}]),t}(),l=function(t){function i(){var t;return e(this,i),t=function(t,i){return!i||"object"!=typeof i&&"function"!=typeof i?o(t):i}(this,r(i).call(this)),t.listeners||u.call(o(t)),C.defineProperty(o(t),"aborted",{value:!1,writable:!0,configurable:!0}),C.defineProperty(o(t),"onabort",{value:null,writable:!0,configurable:!0}),t}return function(t,i){if("function"!=typeof i&&null!==i)throw new _("Super expression must either be null or a function");t.prototype=C.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&h(t,i)}(i,t),n(i,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(t){"abort"===t.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,t)),a(r(i.prototype),"dispatchEvent",this).call(this,t)}}]),i}(u),d=function(){function t(){e(this,t),C.defineProperty(this,"signal",{value:new l,writable:!0,configurable:!0})}return n(t,[{key:"abort",value:function(){var t;try{t=new Event("abort")}catch(i){void 0!==c?c.createEvent?(t=c.createEvent("Event")).initEvent("abort",!1,!1):(t=c.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(d.prototype[Symbol.toStringTag]="AbortController",l.prototype[Symbol.toStringTag]="AbortSignal"),i.AbortSignal=l,i.AbortController=d,i.default=d}));!function(t){t&&t.__esModule&&C.prototype.hasOwnProperty.call(t,"default")&&t.default}(TB);TB.AbortSignal;var NB=TB.AbortController,DB=yo.DOMException;try{new DB}catch(t){(DB=function(t,i){k.call(this,t),this.name=i||"Error",k.captureStackTrace&&k.captureStackTrace(this,this.constructor)}).prototype=C.create(k.prototype),DB.prototype.constructor=DB}var IB=NB;function SB(t,i){if(!t.signal.aborted)if(i.aborted)t.abort();else{var e=function(){i.removeEventListener("abort",e),t.signal.removeEventListener("abort",e),t.abort()};i.addEventListener("abort",e),t.signal.addEventListener("abort",e)}}function EB(t,i,e){return new Promise((function(s,n){if(i.signal.aborted)return t.catch(HP),n(bB());var r=function(){i.signal.removeEventListener("abort",r),n(bB())};i.signal.addEventListener("abort",r),t.then((function(t){i.signal.removeEventListener("abort",r),s(t),e&&i.abort()}),(function(t){i.signal.removeEventListener("abort",r),n(t),e&&i.abort()}))}))}function bB(){return new DB("Aborted","AbortError")}var LB,kB="moz-chunked-arraybuffer";function xB(t){try{var i=new ed;return i.open("GET","https://test"),i.responseType=t,i.responseType===t}catch(t){}return!1}!function(t){t[t.UNSENT=0]="UNSENT",t[t.OPENED=1]="OPENED",t[t.HEADERS_RECEIVED=2]="HEADERS_RECEIVED",t[t.LOADING=3]="LOADING",t[t.DONE=4]="DONE"}(LB||(LB={}));var CB=function(){function t(t,i){var e=this;this.O7=!1,this.RI=t,this.j7=i,this.z7=new ed,this.P7=new Promise((function(t,i){e.B7=t,e.R7=i}))}return t.prototype.send=function(){var t=this;return this.U7().then((function(i){return t.Q7(i,t.j7),t.P7}))},t.prototype.U7=function(){var t=this.RI;return t.S7===Xe.E7?t.arrayBuffer():Promise.resolve(t.L7)},t.prototype.F7=function(t){this.RI.onprogress&&this.RI.onprogress(t.loaded,t.lengthComputable?t.total:void 0)},t.prototype.Y7=function(t){this.R7(t)},t.prototype.tq=function(){this.Y7(new _("Network request failed"))},t.prototype.G7=function(){this.Y7(new _("Network request failed"))},t.prototype.W7=function(){this.Y7(bB())},t.prototype.Q7=function(t,i){var e=this,s=this.RI,n=this.z7,r=function(){return e.V7()};if(s.signal.aborted)return this.W7();n.onreadystatechange=function(){if(n.readyState>=LB.HEADERS_RECEIVED&&!e.O7){var t=function(t){var i=new VP;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var e=t.split(":"),s=e.shift().trim();if(s){var n=e.join(":").trim();i.append(s,n)}})),i}(n.getAllResponseHeaders()||""),i={status:n.status,statusText:n.statusText,headers:t,url:n.responseURL||t.get("X-Request-URL")};e.O7=!0,e.H7(i)}},n.onprogress=function(t){return e.F7(t)},n.onload=function(){return e.q7()},n.onerror=function(){return e.tq()},n.ontimeout=function(){return e.G7()},n.onabort=function(){return e.W7()},n.open(s.method,s.url,!0),n.withCredentials="include"===s.credentials,"responseType"in n&&i&&(n.responseType=i),s.headers.forEach((function(t,i){n.setRequestHeader(i,t)})),s.signal.addEventListener("abort",r),n.onloadend=function(){s.signal.removeEventListener("abort",r)},t?n.send(t):n.send()},t.prototype.V7=function(){this.W7(),this.z7.abort()},t}(),OB=function(t){function i(i,e){var s=t.call(this,i,e)||this;return s.X7=void 0,s.Z7=void 0,s}return OP(i,t),i.prototype.H7=function(t){var i=this;this.X7=new Promise((function(t,e){i.Z7=t,i.K7=e})),this.B7(new MB(this.X7,t))},i.prototype.q7=function(){var t=this.z7.response;if(null==t){var i=this.j7;""===i||"text"===i?t=this.z7.responseText:"document"===i?t=this.z7.responseXML:"arraybuffer"===i?t=new ArrayBuffer(0):"blob"===i&&(t=jP([]))}this.Z7(t)},i.prototype.Y7=function(i){t.prototype.Y7.call(this,i),this.K7&&this.K7(i)},i}(CB),jB=function(t){function i(i){var e=t.call(this,i,kB)||this;return e.J7=void 0,e.ttt=void 0,e.itt=!1,e}return OP(i,t),i.prototype.H7=function(t){var i=this;this.J7=new zP({start:function(t){i.ttt=t},cancel:function(){i.itt=!0,i.V7()}}),this.B7(new MB(this.J7,t))},i.prototype.F7=function(i){this.itt||this.ttt.enqueue(new A(this.z7.response)),t.prototype.F7.call(this,i)},i.prototype.q7=function(){this.ttt.close()},i.prototype.Y7=function(i){t.prototype.Y7.call(this,i),this.ttt&&!this.itt&&(this.itt=!0,this.ttt.error(i))},i}(CB),zB=function(){var t=ii.firefox&&xB(kB);return zB=function(){return t},t},PB=function(){var t;return t=ii.arrayBuffer&&xB("arraybuffer")?"arraybuffer":ii.blob&&xB("blob")?"blob":"",PB=function(){return t},t};function BB(t){return(ii.stream&&zB()?new jB(t):new OB(t,PB())).send()}var RB=yo.fetch,UB=yo.Request,QB=(yo.Response,yo.AbortController);var FB=["http:","https:"];var YB=function(){try{if(ii.streamRequest){var t=new UB("about:blank",{body:"",method:"POST"}).body;if(t&&BP(t.constructor))return t.constructor}}catch(t){}}();function GB(t){return(t instanceof VP?t:new VP(t)).asList()}function WB(t,i,e){var s;if(ii.stream){var n=void 0;if(ii.streamResponse){var r=t.body;n=r&&UP(zP,r)}else n=FP(zP,(function(){return EB(t.arrayBuffer(),i,!0)}),(function(){i.abort()}));n&&e&&(n=function(t,i,e){var s=0,n=function(t){var n=t.done,r=t.value;n?e=void 0===e?s:e:s+=r.byteLength,i(s,e)};return function(t,i,e){return new t(new RP(i.getReader(),e),{highWaterMark:0})}(zP,t,n)}(n,e,VB(t.headers))),s=n}else{var h=EB(t.arrayBuffer(),i,!0);e&&(h=function(t,i,e){return Promise.resolve().then((function(){return i(0,e),t})).then((function(t){var s=t.byteLength;return i(s,e=void 0===e?s:e),t}))}(h,e,VB(t.headers))),s=h}return new MB(s,t)}function VB(t){return t.has("content-length")?Number(t.get("content-length")):void 0}function HB(t){var i=new IB;return t.signal&&SB(i,t.signal),function(t,i){var e,s,n=t;if(e=n.S7===Xe.E7?ii.streamRequest&&YB?Promise.resolve(UP(YB,n.b7)):EB(t.arrayBuffer(),i,!1):EB(Promise.resolve(t.L7),i,!1),ii.abort){var r=new QB;SB(r,i.signal),s=r.signal}return e.then((function(i){return new UB(t.url,{body:i||void 0,credentials:t.credentials,headers:GB(t.headers),method:t.method,mode:t.mode,referrer:t.referrer,referrerPolicy:t.referrerPolicy,signal:s})}))}(t,i).then((function(e){return RB(e).then((function(e){return WB(e,i,t.onprogress)}))}))}var qB=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];var XB=function(t){function i(e,s){var n,r,h,o,a,u,c,l,d,f=this,g=(s=s||{}).body||null;if(e instanceof i){if(e.bodyUsed)throw new _("Already used");n=e.url,r=e.credentials,s.headers||(h=new VP(e.headers)),o=e.method,a=e.mode,u=e.referrer,c=e.referrerPolicy,l=e.signal,d=e.onprogress,g||null==e.L7||(g=e.L7,e.bodyUsed=!0)}else n=String(e),r="same-origin",o="GET",a="cors",u="about:client",c="",l=null,d=null;if(!s.headers&&h||(h=new VP(s.headers)),s&&(u="about:client",c=""),(f=t.call(this,g,h)||this).url=n,f.headers=h,f.credentials=s.credentials||r,f.method=function(t){var i=t.toUpperCase();return qB.indexOf(i)>-1?i:t}(s.method||o),f.mode=s.mode||a,f.signal=s.signal||l||(new IB).signal,f.referrer=void 0!==s.referrer?s.referrer:u,f.referrerPolicy=void 0!==s.referrerPolicy?s.referrerPolicy:c,f.onprogress=s.onprogress||d,("GET"===f.method||"HEAD"===f.method)&&g)throw new _("Body not allowed for GET or HEAD requests");return f}return OP(i,t),i.prototype.clone=function(){return new i(this,{body:mB(this)})},i}(pB),ZB="function"==typeof RB&&ii.stream&&ii.streamResponse&&ii.url;function KB(t,i){return new Promise((function(e){var s=new XB(t,i),n=ZB&&function(t){try{return FB.indexOf(new yo.URL(t,yo.location.href).protocol)>=0}catch(t){return!1}}(s.url)?HB:BB;e(n(s))}))}KB.polyfill=!0;var JB=class{async ett(){const t=this.RI;let i,e;t.YI&&v((()=>{this.stt=!0,this.EC.i_()}),t.YI);try{i=KB(t.Iu,{method:t.mS,headers:t.vS.eS(),body:t.AS,credentials:t.NS?"include":"same-origin",signal:iR(this.EC.$f),onprogress:t.DS})}catch(i){throw new xP(t,i)}try{e=await i}catch(t){const i=this.ntt(t);throw Er(i)&&this.EC.i_(),i}const s=e.url||t.Iu,n=0===e.status&&"file:"===function(t){return le.Ph(t).protocol}(s)?200:e.status,r=new $B(this,e,this.EC),h=new Ah({JM:r,BI:t,pS:t.pS,vS:new Sh(e.headers.asList()),FI:n,vj:e.statusText,xS:s});if(this.QI=h,rr(h))return h;throw new Pm(h)}ntt(t){return Er(t)?this.stt?new Rm(this.RI):new Eu(t.message,t):this.QI?new Pm(this.QI,t):new xP(this.RI,t)}constructor(t){this.EC=new Z_,this.QI=void 0,this.stt=!1,this.RI=t,this.EC.e_(t.$f),this.UI=this.ett()}},$B=class t extends XE{get EG(){return this.htt.bodyUsed}LG(){return this.kG.sL}kS(t){return this.xG(this.htt.text(),t)}jj(t){return this.xG(this.htt.arrayBuffer(),t)}IG(){const t=this.htt.body;return t?this.CG(t):YE(this.jj().then(QE),this.EC)}zG(){const i=this.htt.clone(),[e,s]=this.EC.s_();return this.EC=e,new t(this.ott,i,s)}xG(t,i){i&&this.EC.e_(i);let e=Promise.resolve(t).catch((t=>{throw this.ott.ntt(t)}));return e=G(e,this.EC),this.kG.e_(e.then(h)),e}CG(t){const i=new Eh;let e=Promise.resolve(t.pipeTo(i.writable,{preventAbort:!0})).catch((t=>{const e=this.ott.ntt(t);throw i.writable.abort(e).catch(h),e}));return e=G(e,this.EC),this.kG.e_(e.then(h)),i.readable}constructor(t,i,e){super(),this.kG=new $s,this.ott=t,this.htt=i,this.EC=e,this.kG.sL.catch(h)}},tR="abort";function iR(t){const i=new IB;if(t.Gf)i.abort();else if(!t.Wf){const e=()=>{s(),i.abort()},s=()=>{i.signal.removeEventListener(tR,e),t.Zf(e),t.Jf(s)};i.signal.addEventListener(tR,e),t.Xf(e),t.Kf(s)}return i.signal}var eR=class{BI(t){return new JB(t).UI}yY(t){if(yp&&yp.sendBeacon)yp.sendBeacon(t.Iu,fr([t.AS],{type:t._P}));else{const i=t._P?{"Content-type":t._P}:void 0;Mo(this.BI(new ai({mS:Vt.POST,Iu:t.Iu,AS:t.AS,vS:i})))}}ln(){}};r(),r();var sR=class extends Ga{constructor(t){super("Invalid XML",t)}},nR=class{DI(t){const i=new DOMParser;let e;try{e=i.parseFromString(t,"text/xml")}catch(t){throw new sR(t)}if(!e||e.getElementsByTagName("parsererror").length>0)throw new sR;return new lR(e)}},rR=class t{get uI(){return pl.lI}get NI(){var t;return null!=(t=this.att.localName)?t:_R(this.att.nodeName)}get v(){return this.att.nodeName}get utt(){var t;return null!=(t=this.att.namespaceURI)?t:void 0}get ctt(){var t;return null!=(t=this.att.prefix)?t:void 0}get zy(){return this.att.nodeValue}aI(t){return this.att.isEqualNode(t.att)}gI(i){return new t(this.att.cloneNode(i))}constructor(t){this.att=t}},hR=class{get bI(){return void 0===this.ltt&&(this.ltt=function(t){const i=[];for(let e=0;e<t.length;e++){const s=fR(t.item(e));s&&i.push(s)}return i}(this.dtt.childNodes)),this.ltt}get k(){return this.bI.filter(dR)}MI(t){return this.bI.filter((i=>dR(i)&&i.zj===t))}yI(t,i){return this.bI.filter((e=>dR(e)&&e.NI===i&&e.utt===t))}get eI(){return this.dtt}LI(t){this.dtt.appendChild(t.eI),this.ltt&&this.ltt.push(t)}aI(t){return this.dtt.isEqualNode(t.eI)}constructor(t){this.ltt=void 0,this.dtt=t}},oR=class t extends hR{get uI(){return pl.cI}get NI(){var t;return null!=(t=this.dtt.localName)?t:_R(this.dtt.nodeName)}get utt(){var t;return null!=(t=this.dtt.namespaceURI)?t:void 0}get ctt(){var t;return null!=(t=this.dtt.prefix)?t:void 0}get zj(){return this.dtt.nodeName}get TI(){return function(t){const i=[];for(let e=0;e<t.length;e++)i.push(new rR(t.item(e)));return i}(this.dtt.attributes)}get Ej(){return this.dtt.textContent}EI(t){if(this.dtt.hasAttribute(t))return this.dtt.getAttribute(t)}SI(t,i){if(this.dtt.hasAttributeNS(t,i))return this.dtt.getAttributeNS(t,i)}vI(t){this.dtt.removeAttribute(t)}ftt(t,i){this.dtt.removeAttributeNS(t,i)}_tt(t,i){this.dtt.setAttribute(t,i)}gtt(t,i,e){this.dtt.setAttributeNS(t,i,e)}gI(i){return new t(this.dtt.cloneNode(i))}constructor(t){super(t)}},aR=class{get JM(){return this.dtt.nodeValue}get eI(){return this.dtt}aI(t){return this.JM===t.JM}constructor(t){this.dtt=t}},uR=class t extends aR{get uI(){return pl.Au}gI(i){return new t(this.dtt.cloneNode(i))}constructor(t){super(t)}},cR=class t extends aR{get uI(){return pl.dI}gI(i){return new t(this.dtt.cloneNode(i))}constructor(t){super(t)}},lR=class t extends hR{get uI(){return pl.fI}get II(){return new oR(this.dtt.documentElement)}gI(i){return new t(this.dtt.cloneNode(i))}constructor(t){super(t)}};function dR(t){return ps(t)}function fR(t){switch(t.nodeType){case pl.cI:return new oR(t);case pl.Au:return new uR(t);case pl.dI:return new cR(t)}}function _R(t){const i=t.indexOf(":");return i<0?t:t.substr(i+1)}!function(t){le=t}(new class extends bP{get m7(){return this.wtt||(this.wtt=new cT(Ee())),this.wtt}get Att(){return this.mtt}get xJ(){return this.ptt}get XJ(){return this.ytt}get Mtt(){return!1}get Az(){return Ht.EQ()}get Ttt(){return{Ntt:kP}}get Dtt(){return td.connection&&td.connection.effectiveType||$D}get Itt(){return td.connection&&td.connection.type||"unknown"}get yO(){return this.Stt||(this.Stt=new ab(new eR)),this.Stt}DI(t){return this.Ett.DI(t)}constructor(...t){super(...t),this.wtt=void 0,this.mtt=function(){if(li._E)return!1;try{return"body"in self.Response.prototype}catch(t){return!1}}(),this.ptt=li.gb||li._E,this.ytt=(li.gb||li._E)&&!(li.LE&&li.xE<3),this.Stt=void 0,this.Ett=new nR}}),r(),r();var gR=class{get I_(){const t=this.Qo.currentTime;return"number"==typeof t&&isFinite(t)?t:"now"}get btt(){return this.Qo.src||""}Gn(){}constructor(t,i){this.Ltt=!1,this.ktt=t=>{this.xtt.lY(t.error,this.I_)},this.Ctt=()=>{this.xtt.aY(this.btt),this.Qo.removeEventListener("playing",this.Ctt),this.Ltt=!1},this.js=()=>{this.Ltt||(this.Qo.addEventListener("playing",this.Ctt),this.Ltt=!0)},this.xtt=i,this.Qo=t,this.Qo.addEventListener("error",this.ktt),this.Qo.addEventListener("sourcechange",this.js),this.js()}};!function(t){tj.push(t)}((function(t){new gR(t.so,t._9)})),r();var wR="theoplayer-stored-volume",AR="theoplayer-stored-mutedstate";As((function(t){return class extends t{Y_(t){this.dd.persistVolume&&Je.pz(AR,""+Boolean(t)),super.Y_(t)}Ng(t){this.dd.persistVolume&&Je.pz(wR,""+Number(t)),super.Ng(t)}constructor(t,i){if(super(t,i),i.persistVolume){let t=Je.CV(wR);(void 0===t||M(t))&&(t=1);const i=Je.OV(AR)||!1;this.Mg=t,this.Q_=i}}}}),cs.Ha);var vR="6.5.0",mR="2023.4.10",pR=nj.so,yR=vu.uj.registerContentProtectionIntegration.bind(vu.uj);r(),r(),r();var MR={EY(t){J.addEventListener("beforeunload",t)},NY(t){J.removeEventListener("beforeunload",t)}};!function(t){vp=t.Ott,mp=t.jtt,Os=t.ztt,J=t.Ptt,pp=J&&J.location,yp=J&&J.navigator}({Ott:class{get aR(){const t=[];for(const i of this.Btt){const e=this.Rtt.get(i);if(e){const i=e.map((t=>t.Utt));t.push(...i)}}return this.Qtt&&t.push(this.Qtt),t}cR(t){for(const i of this.aR)i.s3(t)}qP(t){const i=xe(this.Rtt.get(t),(t=>t.Ftt));if(i)return i.Ftt=!1,i.Utt}Ytt(t){if(!this.Qtt){var i;const t=null==(i=this.Rtt.get(Zt.Yv))?void 0:i[0].Utt.oP;if(!t)throw new k("Error creating iOS Safari MediaController");this.Qtt=new CO(t,this.iC)}return this.Qtt}async LP(t){const i=t.oP,e=i.tagName.toLowerCase();await t.Gn(),zO(i);const s=xe(this.Rtt.get(e)||[],(i=>t===i.Utt));s&&(s.Ftt=!0)}nR(){for(const t of this.aR)t.e3()}ln(){for(const t of this.aR){const i=t.oP;t.Hf(),zO(i),rs(i)}this.Rtt.clear(),this.Qtt=void 0}Gtt(){for(const t of this.Btt){const i=[];this.Rtt.set(t,i);for(let e=0;e<this.Wtt;e++){const e=jO(t),s=t===Zt.Gv?new _C(e,this.iC,this.$u):new IO(e,this.iC,this.$u,this.oR);i.push({Utt:s,Ftt:!0})}}}constructor(t,i,e=2,s=OO,n=Ee()){this.Wtt=e,this.Btt=[...s],this.iC=n,this.$u=t,this.oR=i,this.Rtt=Mt(),this.Gtt()}},jtt:class t{L9(t){return this.Vtt.SC((()=>this.Htt(t)))}zg(){this.rR.nR()}async Htt(i){const e=this.rR.qP(Zt.Yv),s=e.oP,n=await t.qtt(s,i);return await this.rR.LP(e),n}static async qtt(i,e){return li.OE||li.LE?"all":(i.src||(i.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.Xtt(),!e&&await t.Ztt(i,!1)?"all":await t.Ztt(i,!0)?"muted":"none")}static async Ztt(t,i){t.muted=i;const e=t.play();try{if(!nu(e))return!li.Ys;const t=yc(250);return await Promise.race([e,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static Xtt(){return new Promise((t=>{if("function"==typeof MessageChannel){const i=new MessageChannel;i.port1.onmessage=()=>t(),i.port2.postMessage("")}else v(t,0)}))}ln(){this.Vtt.ln()}constructor(t){this.rR=t,this.Vtt=new te}},ztt:MR,Ptt:s}),r(),r(),r(),r();var TR=class t{async XP(i){if(!hw(i.type))return!1;const e=i.contentProtection;if(e&&!EN(e)){if(!Be(e))return!1;if(!await t.Ktt(e))return!1}return!0}static async Ktt(t){return!(!t.playready||!await le.Zx())||(!(!t.widevine||!await le.Hx())||(!(!t.clearkey||!await le.Xx())||!!await le.eC()))}},NR=class extends TR{async XP(t){return!!gk(t.useManagedMediaSource)&&super.XP(t)}};function R(t){return Xg(t)}function sh(t,i){const e=Xg(t);return i?""+e+i:""+e}r(),r();var V=class{async Jtt(t){return(await this.tit.$tt(t.map(R))).shift()}iit(t,i){const e=sh(t,i);return this.eit.Zb(e)}async sit(t,i){var e;const s=sh(t,i);return null==(e=await this.nit.Kb(s))?void 0:e.data}RV(t){return this.rit.Kb(t)}constructor(t,i,e,s){this.tit=t,this.eit=i,this.nit=e,this.rit=s}};r(),r(),r();var nh=class{hit(t){return Promise.resolve(!1)}oit(t){return Promise.reject(DR)}ait(t){return Promise.reject(DR)}Zb(t){return Promise.resolve(!1)}Kb(t){return Promise.resolve(void 0)}uit(t,i){return Promise.resolve(void 0)}$tt(t){return Promise.resolve([])}cit(){return Promise.resolve([])}dit(t){return Promise.resolve([])}fit(t,i){return Promise.resolve([])}wm(t){return Promise.reject(DR)}_it(t){return Promise.reject(DR)}git(){return Promise.reject(DR)}},DR="Storage disabled",IR=class t{static h8(){return Promise.resolve(new t)}wit(t){return Promise.reject(SR)}constructor(){this.Ait=new nh,this.vit=new nh,this.mit=new nh,this.pit=new nh,this.yit=new nh}},SR="Storage disabled";r(),r(),r();var Ae,bh=class{get Mit(){return this.t_.sL}async hit(t){return(this.Tit||await this.Mit).hit(t)}async oit(t,i){return(this.Tit||await this.Mit).oit(t,i)}async ait(t,i){return(this.Tit||await this.Mit).ait(t,i)}async Zb(t){return(this.Tit||await this.Mit).Zb(t)}async Kb(t){return(this.Tit||await this.Mit).Kb(t)}async uit(t,i){return(this.Tit||await this.Mit).uit(t,i)}async $tt(t){return(this.Tit||await this.Mit).$tt(t)}async cit(){return(this.Tit||await this.Mit).cit()}async dit(t){return(this.Tit||await this.Mit).dit(t)}async fit(t,i){return(this.Tit||await this.Mit).fit(t,i)}async wm(t){return(this.Tit||await this.Mit).wm(t)}async _it(t){return(this.Tit||await this.Mit)._it(t)}async git(){return(this.Tit||await this.Mit).git()}constructor(t){this.t_=new $s,this.Tit=void 0,this.t_.e_(t),this.t_.sL.then((t=>{this.Tit=t}))}},ER=class{get Nit(){return this.t_.sL}async wit(t){const i=this.Dit||await this.Nit;return await i.wit(t)}constructor(t){this.t_=new $s,this.Dit=void 0,this.t_.e_(t);const i=this.t_.sL;i.then((t=>{this.Dit=t})),this.vit=new bh(i.then((t=>t.vit))),this.Ait=new bh(i.then((t=>t.Ait))),this.mit=new bh(i.then((t=>t.mit))),this.pit=new bh(i.then((t=>t.pit))),this.yit=new bh(i.then((t=>t.yit)))}};function z(t){return new k("This storage cannot handle persistency type "+t)}r(),r(),r(),function(t){t.Iit="readonly",t.Sit="readwrite"}(Ae||(Ae={}));var An=class{hit(t){return Promise.resolve("temporary"===t)}oit(t,i){return void 0===i&&(i="temporary"),"temporary"!==i?Promise.reject(z(i)):(this.Eit(t.key),this.jL.push(t),Promise.resolve())}ait(t,i){if(void 0===i&&(i="temporary"),"temporary"!==i)return Promise.reject(z(i));for(const i of t)this.Eit(i.key);for(const i of t)this.jL.push(i);return Promise.resolve()}Zb(t){return Promise.resolve(Boolean(this.Lit(t)))}Kb(t){return Promise.resolve(this.Lit(t))}uit(t,i){return Promise.resolve(this.kit(t,i))}$tt(t){const i=t?t.map((t=>this.Lit(t))):this.jL;return Promise.resolve(i.filter(oe))}cit(){return Promise.resolve([...this.jL])}dit(t){return this.fit(t,"key")}fit(t,i){const e=this.jL.filter((e=>e[i]===t));return Promise.resolve(e)}wm(t){return this.Eit(t),Promise.resolve()}_it(t){for(const i of t)this.Eit(i);return Promise.resolve()}git(){return sr(this.jL),Promise.resolve()}Lit(t){return this.kit(t,"key")}kit(t,i){for(const e of this.jL)if(e[i]===t)return e}Eit(t){const i=this.Lit(t);i&&Hc(this.jL,i)}constructor(){this.jL=[]}},bR=class t{static h8(){return Promise.resolve(new t)}wit(t){return t(this)}constructor(){this.Ait=new An,this.vit=new An,this.mit=new An,this.pit=new An,this.yit=new An}};r(),r();var yh=class{async hit(t){for(let i of this.xit)if(await i.hit(t))return!0;return!1}async oit(t,i){void 0===i&&(i="persistent");for(let e of this.xit)if(await e.hit(i))return e.oit(t);throw z(i)}async ait(t,i){void 0===i&&(i="persistent");for(let e of this.xit)if(await e.hit(i))return e.ait(t);throw z(i)}async Zb(t){for(let i of this.xit)if(await i.Zb(t))return!0;return!1}async Kb(t){for(let i of this.xit){const e=await i.Kb(t);if(e)return e}}async uit(t,i){for(let e of this.xit){const s=await e.uit(t,i);if(s)return s}}async $tt(t){const i=[];for(let e of this.xit)i.push(...await e.$tt(t));return i}async cit(){const t=[];for(let i of this.xit)t.push(...await i.cit());return t}async dit(t){const i=[];for(let e of this.xit)i.push(...await e.dit(t));return i}async fit(t,i){const e=[];for(let s of this.xit)e.push(...await s.fit(t,i));return e}async wm(t){for(let i of this.xit)await i.wm(t)}async _it(t){for(let i of this.xit)await i._it(t)}async git(){for(let t of this.xit)await t.git()}constructor(t){this.xit=t}};function LR(t){return async()=>{const i=await Promise.all(t.map((t=>t())));return kR.h8(i)}}var Ot,kR=class t{static h8(i){return Promise.resolve(new t(i))}get pit(){return this.Cit}get yit(){return this.Oit}get mit(){return this.jit}get Ait(){return this.zit}get vit(){return this.Pit}wit(i){if(0===this.Bit.length)return i(this);const e=[];let s=0;const n=r=>(e.push(r),s++,s<this.Bit.length?this.Bit[s].wit(n):i(new t(e)));return this.Bit[s].wit(n)}constructor(t){this.Bit=t,this.Cit=new yh(t.map((t=>t.pit))),this.Oit=new yh(t.map((t=>t.yit))),this.jit=new yh(t.map((t=>t.mit))),this.zit=new yh(t.map((t=>t.Ait))),this.Pit=new yh(t.map((t=>t.vit)))}},xR=class{h8(){return new ER(this.Rit())}async Rit(){this.Uit&&(await Promise.resolve(),this.Uit=!1);for(const t of this.Qit)try{return await LR([bR.h8,t])()}catch(t){}return await LR([bR.h8,this.Fit])()}no(t){if(!this.Uit)throw new k("Registration overdue");this.Qit.push(t)}constructor(t){this.Qit=[],this.Uit=!0,this.Fit=t}},Re=class t{static no(i){t.Rz.no(i)}static get Lb(){return t.Yit||(t.Yit=t.Rz.h8()),t.Yit}};function CR(t){return void 0!==t.wg}Re.Rz=new xR(IR.h8),Re.Yit=void 0,r(),r(),r(),r(),r(),r(),function(t){t.$C="static",t.tO="dynamic"}(Ot||(Ot={})),r(),r();var OR,jR=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,zR=class t{static ST(i){const e=i.match(jR);if(!e)throw new k("The given value could not be parsed as a valid DateTimeInterval");const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,h=Number(e[4])||0,o=Number(e[5])||0,a=Number(e[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*h+60*o+a)}get Git(){return So.Ey(this.Wit,1e3)}Vit(){return this.Wit}Hit(){return 1e3*this.Wit}constructor(t){this.Wit=t}};r(),function(t){t.qit="progressive",t.Xit="interlaced",t.Hv="unknown"}(OR||(OR={})),r();var PR=class{vp(){return this.Zit/this.Kit}constructor(t,i){this.Zit=t,this.Kit=i}},BR=/^(?:true|false)$/i,RR=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function vr(t){if(void 0!==t)return zR.ST(t)}function UR(t){if(void 0===t)return;const i=t.match(RR);if(!i)throw new k("The given value could not be parsed as a valid Date");const[,e,s,n,r,h,o,a,u,c,l,d]=i,f=("-"===e?-1:1)*Number(s),_=Number(n)-1,g=Number(r),w=Number(h);let A=Number(o);const v=Number(a),m=Number("0."+(u||"")),p=S.round(1e3*m);if(c){A-=("-"===c?-1:1)*(60*Number(l)+Number(d))}const y=new Date(Date.UTC(f,_,g,w,A,v,p));if(M(y.getTime()))throw new k("The given value could not be parsed as a valid Date");return y}function QR(t){if(!t)return;const i=/(\d+)-(\d+)/.exec(t);return i?[Ba(i[1]),Ba(i[2])]:void 0}function FR(t){if(void 0!==t){if(!M(Number(t)))try{return Gt.fromString(t,!0)}catch(t){}throw new k("The given value could not be parsed as a valid unsigned long")}}function Ba(t){if(void 0===t)return;const i=Number(t);if(!M(i))return i;throw new k("The given value could not be parsed as a valid Number")}function YR(t){if(void 0===t)return;const i=t.split("/"),e=Number(i[0]),s=Number(i[1]||1);if(!M(e)&&!M(s))return new PR(e,s);throw new k("The given value could not be parsed as a valid frame rate")}function va(t){if(void 0!==t){if(BR.test(t))return"true"===t.toLowerCase();if(!M(j(t)))return Boolean(j(t));throw new k("The given value could not be parsed as a valid Boolean.")}}function GR(t){return{Iu:t.Ej,Jit:va(t.EI("availabilityTimeComplete")),$it:Ba(t.EI("availabilityTimeOffset"))}}function WR(t){return t.map(GR)}function VR(t){const i=eU(t),e=function(t,i,e,s){let n=t.SI(e,i);return void 0===n&&(n=t.EI(s+":"+i)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=fm(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=ga(n.Ej)),!s){const i=fm(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==i&&(s=function(t){const i=Sn(t.Ej),e=new A([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=i.length,n=12+e.length+4+s,r=new ArrayBuffer(n),h=new A(r),o=new DataView(r),a=new Eo;EA(o,a,n),EA(o,a,1886614376),EA(o,a,0),vn(o,a,e),EA(o,a,s),vn(o,a,i),!1;return h.buffer}(i))}return{YO:e,tet:s,iet:i.iet,zy:i.zy}}function HR(t){return{eet:t.EI("sourceURL"),net:QR(t.EI("range"))}}function qR(t,i){const e=t.EI("d"),s=t.EI("t"),n=Ba(t.EI("r"));i.push({lt:e,Fm:s,ret:n})}function XR(t){return{het:t.EI("index"),oet:QR(t.EI("indexRange")),ZT:t.EI("media"),aet:QR(t.EI("mediaRange"))}}function ZR(t){const i=JR(t),e=function(t){const i=t.map(XR);return i.length>0?i:void 0}(t.MI("SegmentURL"));return qr({},i,{uet:e,cet:t.EI("xlink:href"),let:t.EI("xlink:actuate")})}function KR(t){const i=va(t.EI("availabilityTimeComplete")),e=Ba(t.EI("availabilityTimeOffset")),s=QR(t.EI("indexRange")),n=va(t.EI("indexRangeExact")),r=t.MI("Initialization");if(r.length>1)throw new k("The provided MPEG-DASH document's "+t.zj+" element can not have more than one Initialization element.");const h=1===r.length?HR(r[0]):void 0,o=FR(t.EI("presentationTimeOffset")),a=t.MI("RepresentationIndex");if(a.length>1)throw new k("The provided MPEG-DASH document's "+t.zj+" element can not have more than one RepresentationIndex element.");return{Jit:i,$it:e,oet:s,det:n,fet:h,_et:o,wet:1===a.length?HR(a[0]):void 0,Aet:vr(t.EI("timeShiftBufferDepth")),vy:Ba(t.EI("timescale"))}}function JR(t){const i=KR(t),e=t.MI("BitstreamSwitching"),s=e.length>0?HR(e[0]):void 0,n=Ba(t.EI("duration")),r=t.MI("SegmentTimeline");if(r.length>1)throw new k("The provided MPEG-DASH document's "+t.zj+" element can not have more than one SegmentTimeline element.");const h=1===r.length?function(t){const i=[],e=t.MI("S");for(const t of e)qR(t,i);return i}(r[0]):void 0;return qr({},i,{vet:s,lt:n,met:h,pet:Ba(t.EI("startNumber")),yet:Ba(t.EI("endNumber"))})}function $R(t){return{Met:function(t){if(!t)return;const i=t.split(/\s/);return i.length>1?(i.length=2,i.map(Ba)):1===i.length?i.map(Ba)[0]:void 0}(t.EI("audioSamplingRate")),Tet:t.EI("codecs"),Net:va(t.EI("codingDependency")),Det:function(t){if(0!==t.length)return t.map(VR)}(t.MI("ContentProtection")),Iet:function(t){return t.map(sU)}(t.MI("EssentialProperty")),Eet:YR(t.EI("frameRate")),Mi:Ba(t.EI("height")),bet:Ba(t.EI("maxPlayoutRate")),Let:Ba(t.EI("maximumSAPPeriod")),nY:t.EI("mimeType"),ket:t.EI("profiles"),xet:t.EI("sar"),Cet:function(t){switch(t){case OR.qit:case OR.Xit:case OR.Hv:return t;default:return}}(t.EI("scanType")),Oet:t.EI("segmentProfiles"),jet:Ba(t.EI("startWithSAP")),Ti:Ba(t.EI("width"))}}function tU(t){const i=WR(t.MI("BaseURL")),e=t.MI("SegmentBase");if(e.length>1)throw new k("The provided MPEG-DASH document's "+t.NI+" element can not have more than one SegmentBase element.");const s=1===e.length?KR(e[0]):void 0,n=function(t){const i=t.map(ZR);return i.length>0?i:void 0}(t.MI("SegmentList")),r=t.MI("SegmentTemplate");if(r.length>1)throw new k("The provided MPEG-DASH document's "+t.NI+" element can not have more than one SegmentTemplate element.");const h=1===r.length?function(t){return qr({},JR(t),{zet:t.EI("bitstreamSwitching"),Pet:t.EI("index"),Bet:t.EI("initialization"),Ret:t.EI("media")})}(r[0]):void 0;return{Uet:i,Qet:s,Fet:n,Yet:h}}function iU(t){const i=$R(t),e=tU(t),s=Ba(t.EI("bandwidth")),n=t.EI("dependencyId"),r=t.EI("id"),h=t.EI("mediaStreamStructureId"),o=Ba(t.EI("qualityRanking"));if(t.MI("SegmentBase").length>1)throw new k("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return qr({},i,e,{jz:s,Get:n,u:r,Wet:h,Vet:o})}function eU(t){return{iet:t.EI("schemeIdUri"),zy:t.EI("value")}}function sU(t){return eU(t)}function nU(t){return eU(t)}function rU(t){return eU(t)}function hU(t){var i;const e=$R(t),s=tU(t),n=function(t){return t.map(rU)}(t.MI("Accessibility")),r=va(t.EI("bitstreamSwitching")),h=t.EI("contentType"),o=Ba(t.EI("group")),a=Ba(t.EI("id")),u=(null==(i=t.MI("Label")[0])?void 0:i.Ej)||"",c=t.EI("lang"),l=Ba(t.EI("maxBandwidth")),d=YR(t.EI("maxFrameRate")),f=Ba(t.EI("maxHeight")),_=Ba(t.EI("maxWidth")),g=Ba(t.EI("minBandwidth")),w=YR(t.EI("minFrameRate")),A=Ba(t.EI("minHeight")),v=Ba(t.EI("minWidth")),m=t.EI("par"),p=function(t){return t.map(iU)}(t.MI("Representation"));if(0===p.length)throw new k("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const y=function(t){return t.map(nU)}(t.MI("Role")),M=va(t.EI("segmentAlignment"))||!1,T=Ba(t.EI("selectionPriority")),N=T||1,D=va(t.EI("subsegmentAlignment"))||!1;let I;try{I=Ba(t.EI("subsegmentStartsWithSAP"))}catch(t){}return qr({},e,s,{Het:n,vet:r,_P:h,qet:o,u:a,fh:u,ys:c,Xet:l,Zet:d,Ket:f,Jet:_,$et:g,tst:w,ist:A,sst:v,nst:m,rst:p,hst:y,ost:M,KP:N,ast:D,ust:I,cst:t.EI("xlink:actuate")||"onRequest",lst:t.EI("xlink:href")})}function oU(t){const i=FR(t.EI("presentationTime"))||Gt.ZERO,e=FR(t.EI("duration")),s=Ba(t.EI("id")),n=function(t){const i=t.TI,e={};for(let t=0;t<i.length;t++)e[i[t].v]=i[t].zy;return e}(t),r=t.Ej;return{PD:i,lt:e,u:s,TI:n,JM:""!==r.trim()?r:t.EI("messageData")||""}}function aU(t){return{lst:t.EI("xlink:href"),cst:t.EI("xlink:actuate"),iet:t.EI("schemeIdUri"),zy:t.EI("value"),vy:Ba(t.EI("timescale")),_et:FR(t.EI("presentationTimeOffset")),rY:t.MI("Event").map(oU)}}function uU(t){const i=tU(t),e=t.MI("AssetIdentifier");if(e.length>1)throw new k("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===e.length?function(t){return eU(t)}(e[0]):void 0,n=function(t){return t.map(hU)}(t.MI("AdaptationSet")),r=va(t.EI("bitstreamSwitching")),h=vr(t.EI("duration")),o=function(t){return t.map(aU)}(t.MI("EventStream")),a=t.EI("id"),u=vr(t.EI("start")),c=(t.MI("Subset"),t.EI("xlink:href"));return qr({},i,{dst:n,fst:s,vet:r,lt:h,_st:o,u:a,yn:u,cst:t.EI("xlink:actuate"),lst:c})}function cU(t){const i=t.EI("schemeIdUri");if(!i)return;return{iet:i,zy:t.EI("value")}}function lU(t,i){const e=UR(t.EI("availabilityEndTime")),s=UR(t.EI("availabilityStartTime")),n=WR(t.MI("BaseURL")),r=t.EI("id"),h=function(t){return t.map((t=>""+t.Ej))}(t.MI("Location")),o=vr(t.EI("maxSegmentDuration")),a=vr(t.EI("maxSubsegmentDuration")),u=vr(t.EI("mediaPresentationDuration")),c=(t.MI("Metrics"),vr(t.EI("minBufferTime")));if(!c)throw new k("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const l=vr(t.EI("minimumUpdatePeriod")),d=function(t){return t.map((t=>uU(t)))}(t.MI("Period"));if(!d.length)throw new k("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.EI("profiles");if(!f)throw new k("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const _=UR(t.EI("publishTime")),g=vr(t.EI("suggestedPresentationDelay")),w=vr(t.EI("timeShiftBufferDepth")),A=function(t){switch(t){case Ot.$C:case Ot.tO:return t;default:return}}(t.EI("type")),v=function(t){const i=[];for(const e of t){const t=cU(e);t&&i.push(t)}return i}(t.MI("UTCTiming"));return{gst:e,wst:s,Uet:n,u:r,Ast:h,vst:i,mst:o,pst:a,yst:u,Mst:c,Tst:l,Nst:d,ket:f,Dst:_,Ist:g,Aet:w,$w:A,Sst:v}}var dU=class{Est(t,i){return function(t,i){if(!t)throw new k("The provided MPEG-DASH document does not contain a valid MPD root element.");return lU(t,i)}(le.DI(t).II,i)}};function fU(t){return{get bandwidth(){return t.jz},get codecs(){return t.Tet},get id(){return t.u},get uid(){return t.Bw},get name(){return t.fh},get averageBandwidth(){return t.bst},get label(){return t.fh},set label(i){t.fh=hs(i)},get height(){return t.Mi},get width(){return t.Ti},get frameRate(){return t.Eet},get firstFrame(){return t.Lst},get available(){return t.Ftt},addEventListener(i,e){t.dn(i,e)},removeEventListener(i,e){t.hn(i,e)}}}function _U(t){return{get bandwidth(){return t.jz},get codecs(){return t.Tet},get id(){return t.u},get uid(){return t.Bw},get name(){return t.fh},get averageBandwidth(){return t.bst},get label(){return t.fh},set label(i){if(!ji(i))throw new k("Unexpected - The provided label is not a string");t.fh=i},get audioSamplingRate(){return t.Met},get available(){return t.Ftt},addEventListener(i,e){t.dn(i,e)},removeEventListener(i,e){t.hn(i,e)}}}r(),r(),r(),r(),r(),r(),r(),r();var gU=class extends d{constructor(t){super("update"),this.quality=t}},wU=class extends i{get fh(){return this.Tm}set fh(t){this.Tm!==t&&(this.Tm=t,this.jo(new gU(this.so)))}get bst(){}get Ftt(){return this.kst}KI(){this.kst=!1,this.jo(new gU(this.so))}constructor(t,i,e,s,n){super(),this.u=t,this.jz=i,this.Tet=e,this.xst=n,this.Bw=zw(),this.Tm=s||"",this.kst=!0}},AU=class extends wU{get so(){return this.Oa||(this.Oa=fU(this)),this.Oa}constructor(t,i,e,s,n,r,h,o,a=0){super(t,i,e,s,n),this.Eet=r,this.Ti=h,this.Mi=o,this.Lst=a,this.Oa=void 0}},vU=class extends wU{get so(){return this.Oa||(this.Oa=_U(this)),this.Oa}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.Met=r,this.Oa=void 0}};r(),r();var bc,On=class extends i{get Cst(){const t=this.Ost();return null==t?void 0:t.yn}get jst(){const t=this.Ost();return null==t?void 0:t.wn}constructor(...t){super(...t),this.zst=t=>{this.jo(t)}}};function $t(t){return I_(t.Pst)}function mU(t){return $t(t)?t.Pst:t.het}r(),r(),function(t){t.Bst="Rst",t.Ust="Qst"}(bc||(bc={}));var pU=class extends On{get Fst(){return this.Yst}get Met(){var t;return null!=(t=this.Gst.JM.Met)?t:this.Fst.Met}get jz(){return this.Gst.JM.jz||0}get Tet(){const t=this.Gst.JM;return t.Tet?[t.Tet]:this.Fst.Tet}get Wst(){const t=this.Gst.JM;return t.Tet?[t.Tet]:[]}get g7(){return this.Gst.JM.Tet||this.Fst.g7}get Net(){return this.Gst.JM.Net||this.Fst.Net}get Det(){return this.Gst.JM.Det||this.Fst.Det}get _P(){return this.nY+'; codecs="'+this.g7+'"'}get Iet(){const t=this.Gst.JM;return t.Iet.length?t.Iet:this.Fst.Iet}get so(){return this.Oa||(this.Oa=function(t){return{get id(){return t.u},get type(){return t.$w},get bandwidth(){return t.jz},get width(){return t.Ti},get height(){return t.Mi},get frameRate(){var i,e;return null!=(e=null==(i=t.Eet)?void 0:i.vp())?e:NaN},get audioSamplingRate(){return t.Met}}}(this))}get Eet(){var t;return null!=(t=this.Gst.JM.Eet)?t:this.Fst.Eet}get Mi(){return this.Gst.JM.Mi||this.Fst.Mi}get u(){return this.Gst.JM.u||""}get Vst(){return this.Hst}set Vst(t){this.Hst=t}get qst(){const t=this.Gst.Xst();if(t)return{Iu:t.Iu,net:t.net,NS:this.Zst.NS}}get bet(){return this.Gst.JM.bet||this.Fst.bet||1}get Let(){return this.Gst.JM.Let||this.Fst.Let}get Zst(){return this.Kst.Zst}get nY(){return this.Gst.JM.nY||this.Fst.nY}get Kst(){return this.Fst.Kst}get ket(){return this.Gst.JM.ket||this.Fst.ket}get Jst(){return this.$st}get xet(){return this.Gst.JM.xet||this.Fst.xet}get Cet(){return this.Gst.JM.Cet||this.Fst.Cet}get tnt(){return this.Gst.tnt}get Oet(){return this.Gst.JM.Oet||this.Fst.Oet}get met(){return this.Gst.met}get jet(){return this.Gst.JM.jet||this.Fst.jet}get $w(){const t=this.nY.split("/")[0];return"application"===t||"text"===t||Hm(this.nY,this.Tet)?Zt.Au:"video"===t?Zt.Yv:"audio"===t?Zt.Gv:"image"===t?Zt.Vv:Zt.Hv}get Ti(){return this.Gst.JM.Ti||this.Fst.Ti}get int(){return this.ent}set int(t){this.ent=t}snt(t){const i=$t(t)?this.Gst.nnt(t):this.Gst.snt(t);return{Iu:i.Iu,net:i.net,NS:this.Zst.NS}}rnt(){return this.Gst.rnt()}Ost(){return this.Gst.Ost()}hnt(){return this.Gst.hnt()}ont(t){return this.Gst.ont(t)}ant(t,i,e){return this.Gst.ant(t,this.Zst.NS,i,e)}unt(t){return $t(t)?this.met.cnt(t,this.Gst):this.met.unt(t)}lnt(t){return $t(t)?this.met.dnt(t,this.Gst):this.met.lnt(t)}ln(){this.Gst.hn(bc.Bst,this.zst)}constructor(t,i){if(super(),this.Oa=void 0,this.Hst=void 0,this.ent=!1,this.Yst=t,this.Gst=i,this.Gst.dn(bc.Bst,this.zst),this.$w===Zt.Yv){var e,s;const t=null!=(s=null==(e=this.Eet)?void 0:e.vp())?s:NaN;this.$st=new AU(this.u,this.jz,this.g7,"","",t,this.Ti,this.Mi)}else this.$w===Zt.Gv?this.$st=new vU(this.u,this.jz,this.g7,"","",this.Met):this.$st=void 0}},yU=class extends On{get Het(){return this.Gst.JM.Het}get Met(){var t;return null!=(t=this.Gst.JM.Met)?t:-1}get Tet(){if(this.Gst.JM.Tet)return[this.Gst.JM.Tet];{const t=[];for(const i of this.rst)i.Wst.length&&-1===t.indexOf(i.g7)&&t.push(i.g7);return t}}get g7(){return this.Tet.join()}get Net(){return this.Gst.JM.Net}get Det(){return this.Gst.JM.Det}get _P(){return this.nY+'; codecs="'+this.g7+'"'}get Iet(){return this.fnt}get Eet(){return this.Gst.JM.Eet}get qet(){return this.Gst.JM.qet}get Mi(){return this.Gst.JM.Mi||0}get u(){return this.Gst.JM.u}get fh(){return this.Gst.JM.fh||""}get bet(){return this.Gst.JM.bet}get Let(){return this.Gst.JM.Let}get Zst(){return this.Kst.Zst}get nY(){return this.Gst.JM.nY||this._nt[0].nY}get Kst(){return this.gnt}get ket(){return this.Gst.JM.ket}get rst(){return this._nt}get hst(){return this.Gst.JM.hst||[]}get xet(){return this.Gst.JM.xet}get Cet(){return this.Gst.JM.Cet}get Oet(){return this.Gst.JM.Oet}get KP(){return this.Gst.JM.KP}get jet(){return this.Gst.JM.jet}get $w(){const t=(this.Gst.JM._P||this.nY).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||Hm(this.nY,this.Tet)?Zt.Au:"video"===t?Zt.Yv:"audio"===t?Zt.Gv:"image"===t?Zt.Vv:Zt.Hv}get Ti(){return this.Gst.JM.Ti||0}get U5(){return this.Gst.JM.ys||""}get wnt(){return this.Cst}get Ant(){const t=this.wnt,i=this.jst;if(void 0===t||void 0===i)return;const e=S.min(i,this.Zst.vnt);return S.max(t,e)}async Hn(t,i){if(0===this._nt.length){this._nt=[];const e=this.Gst.rst.map((e=>this.mnt(e,t,i)));this._nt=(await Promise.all(e)).filter(oe)}this.pnt()}async mnt(t,i,e){const s=new pU(this,t),n=await i(s);if(Pi(e),n)return s}pnt(){if(!this._nt.length)throw new k("Detected an AdaptationSet without any supported Representations.")}Ost(){return this.Gst.Ost()}hnt(){return this.Gst.hnt()}ln(){this.Gst.hn(bc.Bst,this.zst);for(const t of this._nt)t.ln();sr(this._nt)}constructor(t,i){super(),this.fnt=[],this._nt=[],this.gnt=t,this.Gst=i,this.Gst.dn(bc.Bst,this.zst)}};function MU(t,i){const e=[];for(const s of i)for(const i of t)e.push(le.Ph(i,s));return e}r(),r(),r(),r(),r(),r(),r();var _h=class{ynt(t){const i=t-this.gnt.yn;if(i<0||i>=this.gnt.lt)return;const e=this.Mnt();return void 0!==e&&go(e,i,1e-5)?this.Tnt():this.Nnt(i)}Dnt(t){const i=t-this.gnt.yn;if(!(i<0))return this.Int(S.min(i,this.gnt.lt))}Tnt(){return this.Snt(0)}Ent(){const t=this.gnt.lt;if(isFinite(t))return this.Int(t)}get bnt(){return this.gnt.knt.Lnt&&void 0!==this.xnt()}rnt(t){if(this.gnt.knt.$w===Ot.tO){if(this.bnt){const i=this.Tnt(),e=this.xnt();if(void 0===i||void 0===e)return;return{Cnt:t,Ont:i,jnt:e}}const i=this.znt(t);if(!i)return;return{Cnt:t,Ont:this.Pnt(t),jnt:i}}{0;const i=this.Tnt();if(i)return{Cnt:t,Ont:i,jnt:this.Ent()}}}hnt(t,i){if(i){let t=this.Bnt(i.Ont);const e=this.Rnt(i.jnt);if(e){const i=this.Unt(e);(!t||i.getTime()<t.getTime())&&(t=i)}return t}{const i=this.Tnt();if(i){const e=this.Unt(i);if(t.getTime()<e.getTime())return e}const e=this.gnt.knt.wst;return t.getTime()<e.getTime()?e:void 0}}znt(t){const i=(t.getTime()-this.gnt.knt.wst.getTime())/1e3-this.gnt.yn+this.Qnt;let e=this.Int(et(i,0,this.gnt.lt));if(!e)return;if(e=this.Fnt(e,t),!e)return;let s=this.Rnt(e);for(;s&&this.Ynt(s,t);)e=s,s=this.Rnt(e);return e}Pnt(t){let i;const e=this.Gnt.Aet;if(e){const s=(t.getTime()-this.gnt.knt.wst.getTime())/1e3-this.gnt.yn-e.Vit();i=this.Int(et(s,0,this.gnt.lt)),i||(i=this.Tnt())}else i=this.Tnt();if(!i)return;if(i=this.Fnt(i,t),!i)return;let s=this.Wnt(i);for(;s&&this.Ynt(s,t);)i=s,s=this.Wnt(i);return i}Fnt(t,i){let e=t;for(;e&&this.Unt(e).getTime()>i.getTime();)e=this.Wnt(e);if(!e)return;const s=this.Bnt(e);if(s&&s.getTime()<=i.getTime()){const t=this.Wnt(e);for(t&&this.Ynt(t,i)&&(e=t);e;){if(this.Unt(e).getTime()>i.getTime())return;if(this.Ynt(e,i))break;e=this.Rnt(e)}if(!e)return}return e}Ynt(t,i){if(this.bnt)return!0;if(this.Unt(t).getTime()>i.getTime())return!1;const e=this.Bnt(t);return!(e&&i.getTime()>=e.getTime())}Vnt(t,i){if(this.bnt)return!0;if(this.Hnt(t).getTime()>i.getTime())return!1;const e=this.Bnt(t);return!(e&&i.getTime()>=e.getTime())}qnt(t,i,e){const s=Qt(i,this.ZL)+this.gnt.yn;return{het:t,Xnt:i,Fm:s,lt:e,Ym:s+e}}Hnt(t){return this.gnt.knt.$w===Ot.tO?new Date(this.gnt.knt.wst.getTime()+1e3*(t.Fm+t.lt)):this.gnt.knt.wst}Unt(t){const i=this.Hnt(t);return this.gnt.knt.$w===Ot.tO?new Date(i.getTime()-1e3*this.Qnt):i}Bnt(t){let i=1/0;if(this.gnt.knt.$w===Ot.tO){const e=this.Gnt.Aet;e&&(i=this.Hnt(t).getTime()+1e3*t.lt+e.Hit())}const e=this.gnt.knt.gst;return e&&(i=S.min(i,e.getTime())),i===1/0?void 0:new Date(i)}Znt(t,i){return t.het+i}get Zy(){return this.gnt.yn-Qt(this.Knt,this.ZL)}get _et(){return Qt(this.Knt,this.ZL)}ont(t){return!1}ant(t,i,e,s,n){const r=this.Jnt(t);if(!r)return Promise.reject(new k("Invalid segment"));const h=this.$nt(r.het,i);return h?Promise.resolve(h):Oi(this.trt(r.het,i,e,s),n)}$nt(t,i){}trt(t,i,e,s){return Promise.reject(new k("Not supported"))}Wnt(t){const i=this.Jnt(t);if(i)return this.Snt(i.het-1)}Rnt(t){const i=this.Jnt(t);if(i)return this.Snt(i.het+1)}Jnt(t){const i=this.Snt(t.het);if(i&&i.Fm===t.Fm)return i;const e=this.ynt(t.Fm);return e&&e.Fm===t.Fm?e:void 0}irt(t,i){const e=this.ert(t);if(!e||!this.ont(e.het))return;const s=this.$nt(e.het,i);return s?s.irt(t):void 0}ert(t){return this.Snt(t.nrt)}unt(t){const i=this.Jnt(t);return!!i&&0===i.het}cnt(t,i){const e=this.irt(t,i);return!!e&&0===e.Pst}lnt(t){const i=this.Jnt(t);if(!i)return!1;const e=this.Ent();return!!e&&i.het===e.het}dnt(t,i){const e=this.irt(t,i);if(!e)return!1;const s=this.Ent();if(!s||e.nrt!==s.het)return!1;const n=this.$nt(e.nrt,i);return e.Pst+1===n.L}Hf(){}constructor(t,i){this.gnt=t,this.Gnt=i,this.ZL=i.vy,this.Qnt=i.$it,this.Knt=i._et}},TU=class extends _h{Snt(t){if(t<0)return;const i=this.rrt.multiply(t),e=Qt(i,this.ZL),s=this.gnt.lt;if(e>=s)return;const n=this.hrt();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.qnt(t,i,s-e)}return isFinite(s)&&e+this.ort>s?this.qnt(t,i,s-e):this.qnt(t,i,this.ort)}Mnt(){return 0}Nnt(t){const i=S.floor(t/this.ort),e=this.hrt();return void 0!==e&&i>=e?this.Snt(e):this.Snt(i)}Int(t){if(t>=this.gnt.lt){const t=S.ceil(this.gnt.lt/this.ort)-1,i=this.hrt();return void 0!==i&&t>=i?this.Snt(i):this.Snt(t)}return this.Nnt(t)}hrt(){const t=this.Gnt.yet;var i;if(void 0!==t)return t-(null!=(i=this.Gnt.pet)?i:1);const e=this.Gnt.art;return void 0!==e&&e>0?e-1:void 0}xnt(){if(isFinite(this.gnt.lt))return this.Ent()}urt(t,i){return this.rrt.multiply(t.het+(i-1))}Hn(){}constructor(t,i){super(i,t);const e=t.crt,s=t.lt;if(void 0===e||void 0===s)throw new k("MultipleSegmentBase does not have a segment duration specified.");this.rrt=e,this.ort=s}};function NU(t,i,e){const s=i.length;if(0===s)return-1;let n=0,r=s-1,h=t.lrt(i[n]),o=t.drt(i[r]);for(;n<=r&&t.frt(h,e)<=0&&t.frt(e,o)<0;){const a=n+S.floor(t._rt(e,h,o)*(r-n)),u=i[a],c=t.lrt(u),l=a+1<s?t.lrt(i[a+1]):t.drt(u);if(t.frt(l,e)<=0)n=a+1,h=l;else{if(!(t.frt(e,c)<0))return a;r=a-1,o=c}}return-1}function DU(t,i){return NU(IU.Lb,t,i)}r(),r(),r();var IU=class t{static get Lb(){return null!=this.Yit||(this.Yit=new t),this.Yit}lrt(t){return t.Fm}drt(t){return t.Ym}frt(t,i){return t.compare(i)}_rt(t,i,e){return t.subtract(i).toNumber()/e.subtract(i).toNumber()}},SU=class extends _h{Snt(t){if(!(t<0))return t<this.grt.length?this.grt[t].wrt:this.Art(t-this.grt.length)}Mnt(){if(this.grt.length>0)return Qt(this.grt[0].Fm,this.ZL)}Nnt(t){if(this.vrt&&Qt(this.vrt.Fm,this.ZL)<=t){const i=Qt(this.vrt.Fm,this.ZL),e=Qt(this.vrt.lt,this.ZL),s=S.floor((t-i)/e);return this.Art(s)}if(this.grt.length>0&&go(t,Qt(this.grt[0].Fm,this.ZL),1e-5))return this.grt[0].wrt;const i=DU(this.grt,Gt.fromNumber(t*this.ZL));return i<0?void 0:this.grt[i].wrt}Int(t){if(!this.vrt&&this.grt.length>0){const i=this.grt[this.grt.length-1];if(function(t,i,e){return fh(t,i,e)>=0}(t,Qt(i.Ym,this.ZL),1e-5))return i.wrt}const i=this.Mnt();return i&&t<i?this.grt[0].wrt:this.Nnt(t)}xnt(){return isFinite(this.gnt.lt)?this.Ent():this.Snt(this.grt.length-1)}urt(t){return this.mrt(t)}Art(t){if(!this.vrt)return;const i=this.vrt.Fm,e=this.vrt.lt,s=i.add(e.multiply(t)),n=Qt(s,this.ZL),r=this.gnt.lt;if(n>=r)return;const h=this.grt.length+t,o=S.min(Qt(e,this.ZL),n+r);return this.qnt(h,s,o)}mrt(t){return t.Xnt.add(this.Knt)}Hn(){const t=this.Gnt.JM.met;if(!t)throw new k("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.prt(t)}prt(t){const i=this.Knt;this.yrt(t,i);const e=this.Mrt(t);this.Trt(t,i,e.Nrt,e.nrt)}yrt(t,i){const e=this.grt;if(0===t.length)sr(e);else{const s=t[0],n=s.Fm?Gt.fromString(s.Fm,!1).subtract(i):Gt.ZERO;let r=0;for(;r<e.length&&e[r].Fm.lessThan(n);)r++;r>0&&e.splice(0,r)}}Mrt(t){const i=this.grt,e=this.Drt;let s=0,n=0;for(;s<t.length&&n<i.length;){const r=t[s].ret||0;if(r<0)break;const h=n+r;if(h>=i.length)break;if(i[h].Fm.greaterThanOrEqual(e))break;if(i[n].wrt.het===n)n=h+1;else for(;n<=h;)i[n].wrt.het=n,n++;0,s++}return{Nrt:s,nrt:n}}Trt(t,i,e,s){const n=this.grt;let r,h=e,o=s;for(;h<t.length;){const e=t[h],s=Gt.fromString(e.lt,!1),a=e.ret||0;let u;if(e.Fm){if(u=Gt.fromString(e.Fm,!1).subtract(i),o>0){const t=n[o-1];t.Ym.greaterThan(u)&&(t.lt=u.subtract(t.Fm),t.Ym=t.Fm.add(t.lt))}}else u=o>0?n[o-1].Ym:Gt.ZERO;if(a<0){if(h+1===t.length){r={Fm:u,lt:s};break}const e=Gt.fromString(t[h+1].Fm,!1).subtract(i);for(;u.lessThan(e);){const t=u.add(s);this.Irt(n,o,u,s,t),u=t,o++}}else{const t=o+a;for(;o<=t;){const t=u.add(s);this.Irt(n,o,u,s,t),u=t,o++}}h++}o<n.length&&n.splice(o),n.length>0&&(this.Drt=n[n.length-1].Fm),this.vrt=r}Irt(t,i,e,s,n){if(i<t.length){const r=t[i];0,r.lt.equals(s)?r.wrt.het=i:t[i]={Fm:e,lt:s,Ym:n,wrt:this.qnt(i,e,Qt(s,this.ZL))}}else t.push({Fm:e,lt:s,Ym:n,wrt:this.qnt(i,e,Qt(s,this.ZL))})}constructor(t,i){super(i,t),this.grt=[],this.vrt=void 0,this.Drt=Gt.ZERO,this.Hn()}};r();var EU=class{get JM(){return this.ek}get $it(){return this.ek&&void 0!==this.ek.$it?this.ek.$it:this.Srt?this.Srt.$it:0}get _et(){return this.ek&&void 0!==this.ek._et?this.ek._et:this.Srt?this.Srt._et:Gt.ZERO}get Aet(){return this.ek&&void 0!==this.ek.Aet?this.ek.Aet:this.Srt?this.Srt.Aet:this.Kst.knt.Aet}get vy(){return this.ek&&void 0!==this.ek.vy?this.ek.vy:this.Srt&&this.Srt.vy?this.Srt.vy:1}get oet(){return this.ek&&void 0!==this.ek.oet?this.ek.oet:this.Srt?this.Srt.oet:void 0}get fet(){return this.ek&&void 0!==this.ek.fet?this.ek.fet:this.Srt?this.Srt.fet:void 0}get met(){return this.Ert||(this.Ert=this.brt()),this.Ert}brt(){if(this.Lrt=this.krt(),this.Lrt)return this.Lrt;if(this.Srt)return this.Srt.met;throw new k("Missing media segment information.")}Xst(t){const i=this.fet;if(i){return{Iu:(void 0!==i.eet?le.Ph(i.eet,t.Uet[0]):t.Uet[0]).href,net:i.net}}const e=this.oet;if(e)return{Iu:t.Uet[0].href,net:[0,e[0]-1]}}Hn(t){this.ek=t,this.Lrt&&this.Lrt.Hn()}Hf(){this.Lrt&&(this.Lrt.Hf(),this.Lrt=void 0)}constructor(t,i,e){this.Ert=void 0,this.Lrt=void 0,this.Kst=t,this.Srt=i,this.ek=e}},br=class extends EU{get lt(){return void 0!==this.ek.lt?this.ek.lt/this.vy:this.Srt&&bU(this.Srt)?this.Srt.lt:void 0}get crt(){return void 0!==this.ek.lt?Gt.fromNumber(this.ek.lt):this.Srt&&bU(this.Srt)?this.Srt.crt:void 0}get pet(){return void 0!==this.ek.pet?this.ek.pet:this.Srt&&bU(this.Srt)?this.Srt.pet:void 0}get yet(){return void 0!==this.ek.yet?this.ek.yet:this.Srt&&bU(this.Srt)?this.Srt.yet:void 0}krt(){return void 0!==this.ek.met?new SU(this,this.Kst):void 0!==this.ek.lt?new TU(this,this.Kst):void 0}};function bU(t){return t instanceof br}r();var LU=class{iL(t){return this.xrt.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,((i,e,s,n)=>{if("$$"===i)return"$";const r=t[e];if(void 0===r)return i;if(void 0===s)return r.toString();let h=function(t,i){switch(i){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===h?i:(h=ta(h,Number(s),"0"),h)}))}constructor(t){this.xrt=t}};var kU=class t extends br{get Bet(){return this.Crt?this.Crt:this.Srt&&this.Srt instanceof t?this.Srt.Bet:void 0}get Ret(){return this.Ort?this.Ort:this.Srt&&this.Srt instanceof t?this.Srt.Ret:void 0}Xst(t){const i=this.Bet;if(!i)return super.Xst(t);const e=i.iL({Bandwidth:t.JM.jz,RepresentationID:t.JM.u});return{Iu:le.Sv(e,t.Uet[0])}}snt(t,i){var e;const s=null!=(e=i.tnt.pet)?e:1,n=this.Ret.iL({Bandwidth:i.JM.jz,Number:i.met.Znt(t,s),RepresentationID:i.JM.u,Time:i.met.urt(t,s)});return{Iu:le.Sv(n,i.Uet[0])}}nnt(t,i){}get art(){}constructor(t,i,e){super(t,i,e),this.Crt=e.Bet?new LU(e.Bet):void 0,this.Ort=e.Ret?new LU(e.Ret):void 0}};r();var xU=class t extends br{snt(t,i){const e=this.uet[t.het],s=i.Uet[0];let n;return n=e.ZT?le.Ph(e.ZT,s):s,{Iu:n.href,net:e.aet}}nnt(t,i){}get uet(){return void 0!==this.ek.uet?this.ek.uet:this.Srt&&this.Srt instanceof t?this.Srt.uet:void 0}get art(){var t;return null==(t=this.uet)?void 0:t.length}};r(),r(),r(),r();var CU=class{irt(t){const i=this.jrt(t.Pst);if(i&&i.Fm===t.Fm)return i;const e=this.zrt(t.Fm);return e&&e.Fm===t.Fm?e:void 0}},OU=class extends CU{get L(){return this.Prt.length}jrt(t){if(t>=0&&t<this.L)return this.Brt(this.Prt[t])}zrt(t){const i=this.Rrt(t);if(this.Prt.length>0){const t=this.Prt[0];if(i<=Qt(t.Fm,this.vy))return this.Brt(t)}const e=DU(this.Prt,Gt.fromNumber(i*this.vy));if(!(e<0))return this.Brt(this.Prt[e])}Urt(t){const i=this.Rrt(t);if(this.Prt.length>0){const t=this.Prt[this.Prt.length-1];if(i>=Qt(t.Ym,this.vy))return this.Brt(t)}return this.zrt(t)}Brt(t){const i=Qt(t.Fm,this.vy)-this._et,e=i+this.Qrt,s=Qt(t.lt,this.vy);return{nrt:this.nrt,Pst:t.het,Fm:e,Xnt:Gt.fromNumber(i*this.vy),lt:s,Ym:e+s,Frt:[t.Yrt,t.Grt]}}Rrt(t){return t-this.Qrt+this._et}constructor(t,i,e,s,n){super(),this.nrt=t,this.vy=i,this.Qrt=e,this._et=s,this.Prt=n}};r(),r(),r();var jU=class t{Wrt(){return this.$M.Lu<this.JM.byteLength}Vrt(){const i=this.Hrt(),e=this.qrt(),s=this.$M.Lu,n=this.JM.byteLength;let r;r=t.Xrt(e)?n-s:t.Zrt(e);const h=s+r<=n?r:n-s,o=pu(this.JM,this.$M,h);return new PU(i,mo(o))}Hrt(){const t=this.qrt();if(t.length>7)throw new RangeError("Invalid EBML ID size");let i=0;for(let e=0;e<t.length;e++)i=256*i+t[e];return i}qrt(){const t=q(this.JM,this.$M.Lm());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const i=S.floor(function(t){return S.log(t)*S.LOG2E}(t)),e=8-i;return le.v7(e<=8&&e>=1,"Incorrect log2 value"),pu(this.JM,this.$M,e)}static Zrt(t){if(8===t.length&&224&t[1])throw new _("EMBL variable sized integer is too large");let i=0;for(let e=0;e<t.length;e++){const s=t[e];if(0===e){i=s&(1<<8-t.length)-1}else i=256*i+s}return i}static Xrt(t){for(const i of zU)if(ds(t,new A(i)))return!0;return!1}constructor(t){this.JM=t,this.$M=new Eo}},zU=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],PU=class{Krt(){return this.Jrt.byteOffset}$rt(){return new jU(this.Jrt)}tht(){const t=this.Jrt.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.Jrt.getUint8(0))throw new RangeError("EMBL integer field value is too large");let i=0;for(let e=0;e<t;e++){i=256*i+this.Jrt.getUint8(e)}return i}CV(){if(4===this.Jrt.byteLength)return this.Jrt.getFloat32(0);if(8===this.Jrt.byteLength)return this.Jrt.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,i){this.id=t,this.Jrt=i}};function BU(t,i){const e=function(t){const i=new jU(mo(t)),e=i.Vrt();if(e.id!==UU)throw new _("Missing WebM EBML header");const s=i.Vrt();if(s.id!==QU)throw new _("Missing WebM SegmentElement");const n=s.Krt(),r=function(t){const i=t.$rt();let e;for(;i.Wrt();){const t=i.Vrt();if(t.id===FU){e=t;break}}if(!e)throw new _("Missing WebM InfoElement");return function(t){const i=t.$rt();let e,s=1e6;for(;i.Wrt();){const t=i.Vrt();t.id===YU?s=t.tht():t.id===GU&&(e=t.CV())}if(void 0===e)throw new _("Missing Duration in WebM InfoElement");const n=s/1e9,r=e*n;return{timecodeScale:n,duration:r}}(e)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(i),s=new jU(mo(t)).Vrt();if(s.id!==WU)throw new _("Missing WebM CuesElement");const n=function(t,i,e,s){const n=[],r=t.$rt();let h,o;for(;r.Wrt();){const t=r.Vrt();if(t.id!==VU)continue;const e=RU(t);if(!e)continue;const s=e.unscaledTime,a=i+e.relativeOffset;void 0!==h&&n.push({het:n.length,Fm:h,lt:s.subtract(h),Ym:s,Yrt:o,Grt:a-1}),h=s,o=a}if(void 0!==h){0;const t=Gt.fromNumber(s/e);n.push({het:n.length,Fm:h,lt:t.subtract(h),Ym:t,Yrt:o,Grt:void 0})}return n}(s,e.segmentOffset,e.timecodeScale,e.duration);return{vy:S.round(1/e.timecodeScale),iht:n}}function RU(t){const i=t.$rt(),e=i.Vrt();if(e.id!==HU)throw new _("Missing CueTime in WebM CuePointElement");const s=Gt.fromNumber(e.tht()),n=i.Vrt();if(n.id!==qU)throw new _("Missing CueTrackPositions in WebM CuePointElement");const r=n.$rt();let h=0;for(;r.Wrt();){const t=r.Vrt();if(t.id===XU){h=t.tht();break}}return{unscaledTime:s,relativeOffset:h}}var UU=440786851,QU=408125543,FU=357149030,YU=2807729,GU=17545,WU=475249515,VU=187,HU=179,qU=183,XU=241,ZU=class extends _h{Snt(t){if(0===t)return this.eht}Mnt(){return 0}Nnt(t){return this.eht}Int(t){return this.Nnt(t)}xnt(){return this.eht}urt(t,i){return Gt.ZERO}rnt(t){const i=this.sht(t);return i&&{Cnt:t,Ont:i,jnt:i}}sht(t){const i=this.eht;return this.Ynt(i,t)?i:void 0}znt(t){return this.sht(t)}Pnt(t){return this.sht(t)}Hn(){}ont(t){return 0===t&&void 0!==this.nht}$nt(t,i){const e=i.Uet[0].href;return this.rht.get(e)}trt(t,i,e,s){const n=i.Uet[0].href;let r=this.hht.get(n);if(void 0===r){const h=i.nY,o=this.oht.$f;if(er(h))r=this.aht(t,n,e,s,o);else{if(!om(h))throw new Ri(ue.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+h);r=this.uht(t,n,i,e,s,o)}this.hht.set(n,r)}return r}async aht(t,i,e,s,n){const r=this.nht,h=await s.cht(i,r,e,n),o=this.dht(t,h);return this.rht.set(i,o),o}dht(t,i){const e=this.nht,s=vt.AT(new DataView(i),new Eo);if(s.$w!==At.FM)throw new k("Invalid segment index");const n=Rs.PT(s.JM),r=function(t,i){const e=[];let s=t.JD,n=i+t.$D.toNumber(),r=0;for(const i of t.iI){const t=i.HD,h=Gt.fromNumber(i.lt),o=s.add(h);0===i.VD&&e.push({het:r++,Fm:s,lt:h,Ym:o,Yrt:n,Grt:n+t-1}),n+=t,s=o}return e}(n,e[1]+1);return new OU(t,n.vy,this.gnt.yn,Qt(this.Knt,this.ZL),r)}async uht(t,i,e,s,n,r){const h=e.Xst(),o=this.nht,a=n.cht(h.Iu,h.net,s,r),u=n.cht(i,o,s,r),[c,l]=await Promise.all([a,u]),d=this.fht(t,l,c);return this.rht.set(i,d),d}fht(t,i,e){const s=BU(new A(i),new A(e));return new OU(t,s.vy,this.gnt.yn,Qt(this.Knt,this.ZL),s.iht)}Hf(){super.Hf(),this.oht.i_()}constructor(t,i){super(i,t),this.rht=Mt(),this.hht=Mt(),this.oht=new Z_,this.nht=t.oet,this.eht=this.qnt(0,Gt.ZERO,this.gnt.lt)}},KU=class extends EU{get pet(){}snt(t,i){return{Iu:i.Uet[0].href}}nnt(t,i){return{Iu:i.Uet[0].href,net:t.Frt}}krt(){return new ZU(this,this.Kst)}};r();var JU=class extends d{constructor(){super(bc.Bst)}};r();var xh=class extends i{get JM(){return this.ek}get Uet(){return this._ht}ght(){var t,i;return null!=(i=this.Gnt)?i:null==(t=this.ott)?void 0:t.ght()}wht(t){const i=this.Kst,e=this.ott&&this.ott.ght();this.ek.Yet?this.Gnt=new kU(i,e,this.ek.Yet):this.ek.Fet?this.Gnt=new xU(i,e,this.ek.Fet[0]):this.ek.Qet?this.Gnt=new KU(i,e,this.ek.Qet):t&&!e&&(this.Gnt=new KU(i,e,void 0))}Aht(t,i){this.ek=t,this._ht=t.Uet&&t.Uet.length>0?MU(t.Uet.map((t=>t.Iu)),i):i.slice(),this.Gnt&&(t.Yet?this.Gnt.Hn(t.Yet):t.Fet?this.Gnt.Hn(t.Fet[0]):t.Qet&&this.Gnt.Hn(t.Qet))}Ost(){var t;return null==(t=this.vht)?void 0:t.mht}hnt(){var t;return null==(t=this.vht)?void 0:t.pht}yht(t){const i=this.Mht,e=this.Kst.lt,s=this.vht,n=this.Tht(t);s&&go(e,i,1e-5)&&eQ(s,n)||(this.Mht=e,this.vht=n,this.jo(new JU))}Hf(){this.Uo(),this.Gnt&&(this.Gnt.Hf(),this.Gnt=void 0)}constructor(t,i,e){super(),this.Gnt=void 0,this.Mht=1/0,this.vht=void 0,this.ott=i,this.Aht(t,e)}};function $U(t){let i,e;for(const e of t){const t=e.Ost();if(t){i=t.yn;break}}if(void 0!==i){for(let i=t.length-1;i>=0;i--){const s=t[i].Ost();if(s){e=s.wn;break}}return void 0!==e?{yn:i,wn:e}:void 0}}function tQ(t){if(0===t.length)return;let i=0,e=1/0;for(const s of t){const t=s.Ost();if(!t)return;if(i=S.max(i,t.yn),e=S.min(e,t.wn),i>=e)return}return{yn:i,wn:e}}function iQ(t){let i;for(const e of t){const t=e.hnt();t&&(!i||t.getTime()<i.getTime())&&(i=t)}return i}function eQ(t,i){return function(t,i){return t&&i?t.getTime()===i.getTime():t===i}(t.pht,i.pht)&&function(t,i){return t&&i?go(t.yn,i.yn,1e-5)&&go(t.wn,i.wn,1e-5):t===i}(t.mht,i.mht)}var sQ=class extends On{get dst(){return this.Nht}get Tet(){return this.dst.reduce(((t,i)=>{for(const e of i.Tet)ks(t,e)||t.push(e);return t}),[])}get g7(){return this.Tet.length>0?this.Tet[0]:""}get $w(){return this.Nht[0].$w}get u(){return this.ym}get Zst(){return this.gnt.Zst}get nY(){return this.Nht[0].nY}get Kst(){return this.gnt}get rst(){return Cs(this.dst,(t=>t.rst))}Ost(){return tQ(this.Nht)}hnt(){let t;for(const i of this.Nht){const e=i.hnt();e&&(!t||e.getTime()<t.getTime())&&(t=e)}return t}ln(){this.Uo();for(const t of this.Nht)t.hn(bc.Bst,this.zst)}constructor(t,i,e){super(),this.gnt=t,this.ym=i,this.Nht=e.slice();for(const t of e)t.dn(bc.Bst,this.zst)}};r();var nQ=class extends d{constructor(){super(bc.Ust)}};function rQ(t){const i=[];for(const e of t){let t;const s=e.qet;void 0===s||(t=xe(i,(t=>t.u===s))),t||(t={u:s,dst:[]},i.push(t)),t.dst.push(e)}return i}r();var hQ=class extends On{get dst(){return this.Nht}get Dht(){return this.Iht}get fst(){return this.Gst.JM.fst}get lt(){return this.Gst.lt}get wn(){return this.yn+this.lt}get _st(){return this.Gst.JM._st||[]}get u(){return this.Gst.u}get Qst(){return this.Sht}get Zst(){return this.Eht}get bht(){return this.Eht.Lht(this)}get Kst(){return this}get kht(){return this.Eht.xht(this)}get Cht(){return this.Oht(1/0,S.min)}get jht(){return this.Oht(0,S.max)}Oht(t,i){if(0===this.Iht.length)return;let e=t;for(const t of this.Iht){const s=t.$w;if(s===Zt.Gv||s===Zt.Yv){const s=t.jst;if(void 0===s)return;e=i(e,s)}}return e}get yn(){return this.Gst.yn}get NS(){return this.Zst.NS}zht(){this.Sht||(this.Sht=!0,this.jo(new nQ),this.ln())}async Hn(t,i){0===this.Nht.length?(await this.Pht(this.Gst.dst,t,i),this.Bht(this.Nht),Pi(i)):await this.Rht(t,i)}async Pht(t,i,e){for(const s of t){const t=new yU(this,s);try{await t.Hn(i,e),this.Nht.push(t)}catch(t){Et(t)}}}Bht(t){const i=rQ(t);for(const t of i){const i=new sQ(this,t.u,t.dst);this.Iht.push(i)}}async Rht(t,i){for(const e of this.Nht)await e.Hn(t,i)}Ost(){return this.Gst.Ost()}hnt(){return this.Gst.hnt()}ln(){this.Uo(),this.Gst.hn(bc.Bst,this.zst);for(const t of this.Iht)t.ln();for(const t of this.Nht)t.ln();sr(this.Nht),sr(this.Iht)}constructor(t,i){super(),this.Nht=[],this.Iht=[],this.Sht=!1,this.Eht=t,this.Gst=i,this.Gst.dn(bc.Bst,this.zst)}};r();var lr,Ch=class extends d{constructor(){super(t.OA)}};r(),r(),(lr||(lr={})).Uht="Qht";var oQ=class extends d{constructor(){super(lr.Uht)}};r(),r(),r(),r();var aQ=class extends xh{get Fst(){return this.Yst}get Kst(){return this.Yst.Kst}get knt(){return this.Yst.knt}get nY(){return this.ek.nY||this.Yst.nY}get tnt(){return this.ght()}get met(){return this.tnt.met}ont(t){const i=this.nY;return!(!er(i)&&!om(i))&&this.met.ont(t.het)}ant(t,i,e,s){return this.met.ant(t,this,i,e,s)}Xst(){return this.tnt.Xst(this)}snt(t){return this.tnt.snt(t,this)}nnt(t){return this.tnt.nnt(t,this)}rnt(){return this.Fht}Tht(t){const i=this.met,e=i.rnt(t),s=e&&function(t,i){const{Ont:e,jnt:s,Cnt:n}=t,r=e.Fm;let h;const o=i.Hnt(s);if(o.getTime()<=n.getTime())h=s.Ym;else{const t=(o.getTime()-n.getTime())/1e3,i=S.max(s.lt-t,0);h=s.Fm+i}return{yn:r,wn:h}}(e,i),n=this.met.hnt(t,e);return this.Fht=e,{Cnt:t,mht:s,pht:n}}Hn(t){this.Aht(t,this.Yst.Uet)}constructor(t,i){super(t,i,i.Uet),this.Fht=void 0,this.Yst=i,this.wht(!0)}},uQ=class extends xh{get rst(){return this._nt}get Kst(){return this.gnt}get knt(){return this.gnt.knt}get qet(){return this.ek.qet}get nY(){var t;return this.ek.nY||(null==(t=this._nt[0])?void 0:t.JM.nY)||""}Hn(t){this.Aht(t,this.gnt.Uet);const i=t.rst||[];if(this._nt.length!==i.length)throw new k("Expected "+this._nt.length+' representations in adaptation set "'+t.u+'", found '+i.length);for(let t=0;t<i.length;t++)this._nt[t].Hn(i[t])}yht(t){for(const i of this._nt)i.yht(t);super.yht(t)}Tht(t){return{Cnt:t,mht:tQ(this._nt),pht:iQ(this._nt)}}Hf(){for(const t of this._nt)t.Hf();super.Hf()}constructor(t,i){super(t,i,i.Uet),this.gnt=i,this.wht(!1),this._nt=t.rst.map((t=>new aQ(t,this)))}},cQ=class extends xh{get dst(){return this.Nht}get Dht(){return this.Iht}get Kst(){return this}get knt(){return this.Yht}get u(){return this.ek.u}get yn(){return this.wI}get lt(){return this.KL}Hn(t,i){this.Aht(t,this.Yht.Uet),this.KL=i;const e=t.dst||[];if(this.Nht.length!==e.length)throw new k("Expected "+this.Nht.length+' adaptation sets in period "'+t.u+'", found '+e.length);for(let t=0;t<e.length;t++)this.Nht[t].Hn(e[t])}yht(t){for(const i of this.Nht)i.yht(t);super.yht(t)}Tht(t){return{Cnt:t,mht:tQ(this.Nht),pht:iQ(this.Nht)}}Hf(){for(const t of this.Nht)t.Hf();super.Hf()}constructor(t,i,e,s){super(i,void 0,t.Uet),this.Iht=[],this.Yht=t,this.wI=e,this.KL=s,this.wht(!1),this.Nht=(i.dst||[]).map((t=>new uQ(t,this))),this.Iht=rQ(this.Nht)}},lQ=new Date("2000-01-01"),dQ=class extends i{get JM(){return this.ek}get $w(){return this.ek.$w||Ot.$C}get wst(){return this.Ght||this.ek.wst||this.Dst}get gst(){return this.ek.gst}get Lnt(){var t,i;return null!=(i=null==(t=this.Wht)?void 0:t.ignoreAvailabilityWindow)&&i}get yst(){return this.Vht}get Uet(){return this._ht}get Ast(){return this.Hht}get Nst(){return this.qht}get Dst(){return this.ek.Dst||this.xn}get Aet(){return this.ek.Aet}get Xht(){return this.Zht}get Kht(){return this.xn}Ost(){var t;return null==(t=this.vht)?void 0:t.mht}hnt(){var t;return null==(t=this.vht)?void 0:t.pht}Hn(t,i,e,s){var n;const r=void 0!==this.ek&&this.ek.$w===Ot.tO;this.ek=t,this.Jht=i,this.Zht=null!=s?s:e,this.xn=e;const h=[$g(i)];this._ht=t.Uet&&t.Uet.length>0?MU(t.Uet.map((t=>t.Iu)),h):h,this.Hht=t.Ast&&t.Ast.length>0?MU(t.Ast,this._ht):[];const o=this.Hht.map((t=>t.href)),a=i.href;ks(o,a)||(this.Hht.push(i),o.push(a));const u=this.$ht.href;ks(o,u)||(this.Hht.push(this.$ht),o.push(u)),this.Vht=null==(n=t.yst)?void 0:n.Vit();const c=t.$w===Ot.tO,l=function(t,i,e){const s=[];for(let e=0;e<t.length;e++){const n=t[e];let r;if(n.yn)r=n.yn.Vit();else if(e>0&&t[e-1].lt){r=s[e-1]+t[e-1].lt.Vit()}else{if(0!==e||i)break;r=0}s.push(r)}const n=[];for(let i=0;i<s.length-1;i++)n.push({JM:t[i],yn:s[i],lt:s[i+1]-s[i]});if(s.length>0){const r=s.length-1,h=t[r],o=s[r];let a=1/0;i||(a=h.lt?h.lt.Vit():e-o),n.push({JM:h,yn:o,lt:a})}return n}(t.Nst,c,this.Vht);this.tot(l,r,c),this.yht(e)}tot(t,i,e){const s=this.qht;if(0===t.length)return void sr(s);const n=t[0].JM.u;let r=0;for(;r<s.length&&s[r].u!==n;)r++;const h=s.splice(0,r);for(const t of h)t.Hf();if(i&&!e&&s.length>0&&t.length>0){var o;const i=null!=(o=fQ(s[0].JM))?o:So.zp;var a;const e=null!=(a=fQ(t[0].JM))?a:So.zp;if(e.mp(i)){const n=e.bp(i);void 0!==this.Vht&&(this.Vht+=n.vp());for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];e.yn=t.yn,vQ(e.JM,t.JM)}i===t.length-1&&(e.lt+=n.vp())}}}for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];0,t.Hn(e.JM,e.lt)}else s.push(new cQ(this,e.JM,e.yn,e.lt))}}yht(t){for(const i of this.qht)i.yht(t);const i=this.vht,e=this.Tht(t);i&&eQ(i,e)||(this.vht=e,this.jo(new JU))}Tht(t){return{Cnt:t,mht:$U(this.qht),pht:iQ(this.qht)}}xnt(){if(0===this.qht.length)return;const t=this.qht[this.qht.length-1];if(isFinite(t.lt))return;if(0===t.dst.length)return;const i=t.dst[0];if(0===i.rst.length)return;const e=i.rst[0].met,s=e.xnt();return s?{wrt:s,gst:e.Bnt(s)}:void 0}Hf(){this.Uo();for(const t of this.qht)t.Hf()}constructor(t,i,e,s,n){if(super(),this.vht=void 0,this.Vht=void 0,this.Ght=void 0,this.qht=[],this.$ht=i,this.Wht=n,this.Hn(t,e,s),t.$w===Ot.tO){const t=this.xnt();t&&t.gst&&t.gst.getTime()<lQ.getTime()&&(this.Ght=new Date(this.Dst.getTime()-1e3*(t.wrt.Fm+t.wrt.lt)),this.yht(s))}}};function fQ(t){let i=wQ(t);var e,s;for(const s of null!=(e=t.dst)?e:[])i=wv(i,_Q(s));for(const e of null!=(s=t._st)?s:[])i=wv(i,AQ(e));return i}function _Q(t){let i=wQ(t);for(const e of t.rst)i=wv(i,gQ(e));return i}function gQ(t){return wQ(t)}function wQ(t){let i;if(void 0!==t.Yet&&(i=wv(i,AQ(t.Yet))),void 0!==t.Qet&&(i=wv(i,AQ(t.Qet))),void 0!==t.Fet)for(const e of t.Fet)i=wv(i,AQ(e));return i}function AQ(t){var i,e;return So.Cp(null!=(i=t._et)?i:Gt.ZERO,null!=(e=t.vy)?e:1)}function vQ(t,i){if(yQ(t,i),t.yn=i.yn,void 0!==t.dst&&void 0!==i.dst&&t.dst.length===i.dst.length)for(let e=0;e<t.dst.length;e++)mQ(t.dst[e],i.dst[e]);if(void 0!==t._st&&void 0!==i._st&&t._st.length===i._st.length)for(let e=0;e<t._st.length;e++)MQ(t._st[e],i._st[e])}function mQ(t,i){if(yQ(t,i),void 0!==t.rst&&void 0!==i.rst&&t.rst.length===i.rst.length)for(let e=0;e<t.rst.length;e++)pQ(t.rst[e],i.rst[e])}function pQ(t,i){yQ(t,i)}function yQ(t,i){if(void 0!==t.Yet&&void 0!==i.Yet&&MQ(t.Yet,i.Yet),void 0!==t.Qet&&void 0!==i.Qet&&MQ(t.Qet,i.Qet),void 0!==t.Fet&&void 0!==i.Fet&&t.Fet.length===i.Fet.length)for(let e=0;e<t.Fet.length;e++)MQ(t.Fet[e],i.Fet[e])}function MQ(t,i){t.vy=i.vy,t._et=i._et}r();var TQ=class{async YW(t){await this.iot(t,this.LS,this.eot,this.rot).catch(tg)}hot(){return new Date(Nr()+this.oot)}async iot(t,i,e,s){let n;if(s&&(n=await this.aot(i,s,e)),void 0===n){Pi(e);for(const s of t)if(n=await this.uot(i,s,e),void 0!==n)break}this.oot=void 0===n?0:n-Nr()}async uot(t,i,e){switch(i.iet){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=i.zy;if(s)return await this.aot(t,s,e);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=i.zy;if(t){const i=new Date(t).getTime();if(!M(i))return i}break}default:return}}async aot(t,i,e){try{const s=await t.BI({Iu:i,mS:Vt.GET,pS:$m.Au,$f:e}),n=await s.kS(),r=new Date(n).getTime();if(!M(r))return r}catch(t){Et(t)}}constructor(t,i,e){this.LS=t,this.eot=i,this.rot=e,this.oot=0}},NQ=class extends i{get gst(){return this.Gst&&this.Gst.gst}get wst(){return this.Gst&&this.Gst.wst}get Lnt(){return this.Gst&&this.Gst.Lnt}get u(){return this.Gst&&this.Gst.JM.u}get Xht(){var t;return null==(t=this.Gst)?void 0:t.Xht}get cot(){var t;return null==(t=this.Gst)?void 0:t.Kht}get Ast(){return this.Gst?this.Gst.Ast.map((t=>t.href)):[this.lot]}get lot(){return this.fot.href}get mst(){return this.Gst&&this.Gst.JM.mst}get pst(){return this.Gst&&this.Gst.JM.pst}get yst(){return this.Gst&&this.Gst.JM.yst}get Mst(){return this.Gst&&this.Gst.JM.Mst}get Tst(){var t,i;const e=(null==(t=null==(i=this.Gst)?void 0:i.JM.Tst)?void 0:t.Hit())||0;return S.max(e,IQ)}get G_(){return this._ot}got(t){const i=this.G_;this._ot=t,i!==this.G_&&this.jo(new oQ)}get Nst(){return this.qht}get wot(){return this.$w===Ot.tO?this.vnt:this.Aot}get vot(){const t=this.wot;if(void 0!==t)for(const i of this.Nst)if(i.yn<=t&&i.wn>t)return i}get ket(){return this.Gst&&this.Gst.JM.ket}get Dst(){return this.Gst&&this.Gst.Dst}get Cht(){for(let t=this.qht.length-1;t>=0;t-=1){const i=this.qht[t].Cht;if(i)return i}}get vnt(){const t=this.Cht;if(void 0===t)return;const i=t-this.mot;return S.max(i,this.Aot)}get Aot(){for(const t of this.qht){const i=t.Cst;if(void 0!==i)return i}}get NS(){return Boolean(this.pot.NS)}get mot(){const t=this.Gst&&this.Gst.JM.Ist;return t?t.Vit():this.$w===Ot.tO?this.yot:0}get yot(){return this.pot.yot?this.pot.yot:1.5*this.Mst.Vit()}get Aet(){return this.Gst&&this.Gst.Aet}get $w(){return this.Gst?this.Gst.$w:void 0}async Hn(t,i,e){const s=[],n=[],r=t.vst?le.Ph(t.vst,this.fot):this.fot;void 0===this.Gst?(await this.Mot.YW(t.Sst),this.Gst=new dQ(t,this.fot,r,this.hot(),this.Wht),this.Gst.dn(bc.Bst,this.Ds)):this.Gst.Hn(t,r,this.hot(),i);const h=this.Gst.Nst;let o;if(0===h.length)o=this.qht.slice(),sr(this.qht);else{const t=h[0].u;let i=0;for(;i<this.qht.length&&this.qht[i].u!==t;)i++;o=this.qht.splice(0,i);for(let t=0;t<h.length;t++){const i=h[t];let r;t<this.qht.length?r=this.qht[t]:(r=new hQ(this,i),s.push(r)),n.push(r.Hn(this.Tot,e))}}await Promise.all(n),this.qht.push(...s);for(const t of o)t.zht();this.jo(new Ch)}hot(){return this.Mot.hot()}xht(t){const i=this.qht.indexOf(t);if(i>0)return this.qht[i-1]}Lht(t){const i=this.qht.indexOf(t);if(i>=0&&i+1<this.qht.length)return this.qht[i+1]}Ost(){return this.Gst?this.Gst.Ost():void 0}hnt(){return this.Gst&&this.Gst.hnt()}yht(t){this.Gst&&this.Gst.yht(t)}ln(){this.Uo(),this.Not=void 0,this.got(!1);for(const t of this.qht)t.ln();sr(this.qht),this.Gst&&this.Gst.Hf()}constructor(t,i,e,s,n){super(),this.Gst=void 0,this._ot=!0,this.qht=[],this.Not=void 0,this.pot=t,this.fot=t.tA,this.Tot=i,this.LS=e,this.Dot=s,this.Mot=new TQ(this.LS,this.Dot,this.pot.Iot),this.Wht=n}},DQ=class{get Zst(){return this.Eht}constructor(t,i,e,s,n){this.Eht=new NQ(t,i,e,s,n)}},IQ=1e3,SQ=class{get wr(){return this.Gst}get G(){return this.Sot||(this.Sot=this.ett(this.Eot.$f),Mo(this.Sot)),this.Sot}async ett(t){this.Gst.Zst.jo(new bn);try{await this.bot(t),this.Gst.Zst.got(!0)}catch(t){throw Et(t),this.Sot=void 0,this.Gst.Zst.got(!1),new k("The provided MPEG-DASH document could not be loaded - "+t.message)}this.Lot=this.kot(this.Eot.$f)}async kot(t){try{for(;this.Gst.Zst.$w===Ot.tO;)await Oi(this.xot,t)}catch(t){}}get xot(){return this.Gst.Zst.cot&&this.Gst.Zst.$w===Ot.tO?this.Cot(this.Eot.$f):this.G}async Oot(t){Pi(t);const i=this.jot();if(i>0){const e=S.min(i,2147483647);await yc(e,t)}try{await this.bot(t),this.Gst.Zst.got(!0)}catch(t){throw new k("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.zot=void 0}}jot(){const t=this.Gst.Zst.hot().getTime()-this.Gst.Zst.Xht.getTime();return this.Gst.Zst.Tst-t}Pot(t){const i=this.Gst.Zst.hnt();if(i){const e=i.getTime()-t.getTime();if(e>0)return e}this.Gst.Zst.yht(t);const e=this.Gst.Zst.hnt();return e?e.getTime()-t.getTime():NaN}async Cot(t){this.zot||(this.zot=this.Oot(t));const i=new Z_;i.e_(t);try{await Promise.race([this.zot,this.Bot(i.$f)].filter(oe))}catch(t){tg(t)}finally{i.i_()}}Bot(t){const i=this.Gst.Zst.hot(),e=this.Pot(i);if(!M(e)&&!this.wr.Zst.Lnt)return this.Rot(e,t)}async Rot(t,i){await yc(t,i);const e=this.Gst.Zst.hot();this.Gst.Zst.yht(e)}async Uot(t,i){const e=await this.Fot.Qot(t,{},i);return(new dU).Est(e.Yot,e.xS)}ln(){return this.Eot.i_(),this.Lot=void 0,this.Sot=void 0,this.zot=void 0,this.Gst.Zst.ln(),Promise.resolve()}constructor(t,i,e,s,n){this.Eot=new Z_,this.bot=async t=>{try{const i=this.Gst.Zst.hot(),e=await this.Uot(this.Gst.Zst.Ast,t);await this.Gst.Zst.Hn(e,i,t)}catch(t){throw kt(t)&&this.Gst.Zst.got(!1),t}},this.Fot=s,this.Gst=new DQ(t,i,e,this.Eot.$f,n)}};r(),r();var EQ=class extends d{constructor(t,i){super("Got"),this.Wot=t,this.Vot=i}},bQ=class extends i{get Vot(){return this.Hot}get $w(){return this.J$}get tt(){return this.Dw.slice()}ZI(t){t&&this.Hot!==t&&this.qot(t)}KI(t){this.Hot===t&&this.qot(void 0)}qot(t){this.Hot=t,this.jo(new EQ(this,this.Hot))}ln(){this.Uo();for(const t of this.Dw)t.qet=void 0;sr(this.Dw)}constructor(t,i){super(),this.Hot=void 0,this.J$=t,this.Dw=i;for(const t of this.Dw)t.qet=this}};r(),r();var Bh=class extends Js{Qh(){return new LQ(this.Uw.map((t=>t.so)))}constructor(t,i){super(ia.Mw),this.Uw=t||[],this.Ht=i}},LQ=class extends d{constructor(t){super("targetqualitychanged"),this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}};r();var kQ=class extends du{Qh(){return new xQ(this.quality.so)}constructor(t){super(ia.QUALITY_UNAVAILABLE),this.quality=t}},xQ=class extends me{constructor(t){super("qualityunavailable"),this.quality=t}};r();var CQ=class extends d{constructor(){super(ia.NO_QUALITY)}};function OQ(t){return{jz:t.jz,g7:t.Tet,Mi:jQ(t)?t.Mi:0,$w:jQ(t)?Zt.Yv:Zt.Gv,Ti:jQ(t)?t.Ti:0}}function jQ(t){const i=t;return void 0!==i.Mi&&void 0!==i.Ti}r();var F,zQ=0,PQ=class extends i{get Rw(){return this.Yst.Het.map(BQ).filter(oe)}Xot(t){if(!this._m.Am(t))return;t.KI();const i=this.Zot();if(this.Kot&&ks(this.Kot,t)){const t=this.Kot.filter((t=>t.Ftt));0===t.length&&i.length>0?this.Qw=i:this.Qw=t}else this.Qw=i;this.jo(new kQ(t))}Zot(){const t=[];for(const i of this._m.Nw)i.Ftt&&t.push(i);return t}get Pw(){return this.Jot}$ot(t){this.Jot=t.Jst,this.jo(t)}get Fst(){return this.Yst}get iat(){return this.eat}get Ot(){return this.He}set Ot(t){this.Dm(t)}get so(){return this.Oa||(this.Oa=es(this)),this.Oa}get qet(){return this.sat}set qet(t){this.sat=t}get u(){return this.ym}get Bw(){return this.Mm}get Lt(){return this.H$}get ys(){return this.JL}get fh(){return this.Tm}set fh(t){t!==this.Tm&&(this.Tm=t,this.jo(new ms(this)))}get Xw(){return this.Ot?"enabled":"disabled"}get Qw(){return this.Kot}set Qw(t){let i=[];if(t){const e=(null!=t?t:[]).filter((t=>{const i=this.Pw?OQ(this.Pw):void 0;return le.Ks.u7(i,OQ(t))}));if(0===e.length)return;i=e.filter((t=>t.Ftt))}else i=this.Zot();0===i.length&&this.jo(new CQ),this.Kot=t&&this._m.Am(t)?t:void 0,this.nat=this.rat(this.Kot),this.jo(new Bh(t,this))}get oat(){return this.nat}rat(t){if(!t||0===t.length)return;const i=[];for(const e of this.rst)for(const s of t)s===e.Jst&&s.Ftt&&i.push(e);return i}get Uw(){return this._m}get rst(){return this.Fst&&this.Fst.rst}get aat(){return this.uat}Dm(t){this.He=t,this.sat&&(t?this.sat.ZI(this):this.sat.KI(this))}dat(t){this.He=t,this.fat!==t&&(this.fat=t,this.jo(new eo(this)))}ln(){for(const t of this._m.Nw)t.hn("update",this._at);this._m.Gn()}constructor(t,i,e,s="alternative"){super(),this.Jot=void 0,this.He=!1,this.Oa=void 0,this.sat=void 0,this.ym="",this.fat=!1,this._m=new Gc,this.Kot=void 0,this.nat=void 0,this._at=()=>this.jo(new ms(this)),this.Yst=t,this.eat=i,this.ym=String(zQ++),this.Mm=Ra(),this.H$=s,this.JL=t.U5,this.Tm=t.fh,this.uat=t.$w;for(const t of e)t.dn("update",this._at),this.Uw.gm(t)}};function BQ(t){if("urn:mpeg:dash:role:2011"===t.iet)return RQ(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.iet){if("1"===t.zy)return Ca.Yw;if("2"===t.zy)return Ca.Ww}}function RQ(t){if(void 0!==(null==t?void 0:t.zy))switch(t.zy){case"caption":return Ca.Fw;case"sign":return Ca.Gw;case"description":return Ca.Yw;case"enhanced-audio-intelligibility":return Ca.Ww;default:return}}r(),function(t){t[t.UR=0]="UR",t[t.gat=1]="gat",t[t.wat=10]="wat",t[t.Aat=11]="Aat",t[t.vat=12]="vat",t[t.mat=13]="mat",t[t.pat=14]="pat",t[t.yat=15]="yat",t[t.Mat=20]="Mat",t[t.Tat=21]="Tat",t[t.Nat=22]="Nat",t[t.Dat=23]="Dat",t[t.Iat=24]="Iat",t[t.Sat=30]="Sat",t[t.Eat=31]="Eat",t[t.bat=32]="bat",t[t.Lat=33]="Lat",t[t.xat=34]="xat",t[t.Cat=35]="Cat",t[t.Oat=40]="Oat",t[t.jat=41]="jat",t[t.zat=42]="zat",t[t.Pat=43]="Pat",t[t.Bat=44]="Bat",t[t.Rat=50]="Rat",t[t.Uat=51]="Uat",t[t.Qat=60]="Qat",t[t.Fat=61]="Fat",t[t.Yat=62]="Yat",t[t.Gat=63]="Gat",t[t.Wat=70]="Wat",t[t.Vat=71]="Vat",t[t.Hat=72]="Hat",t[t.qat=73]="qat",t[t.Xat=74]="Xat",t[t.Zat=75]="Zat",t[t.Kat=76]="Kat",t[t.Jat=77]="Jat",t[t.$at=90]="$at",t[t.tut=91]="tut"}(F||(F={})),r(),r();var UQ,QQ,FQ=class extends d{constructor(i,e,s){super(t.TA),this.currentTime=i,this.initDataType=e,this.initData=s}};function YQ(t,i,e,s,n){let r=[],h=[];for(const t of i)t.$w===Zt.Gv?r=r.concat(t.tt):t.$w===Zt.Yv&&(h=h.concat(t.tt));return[GQ(t,r,e,s,null==n?void 0:n.preferredAudioCodecs),WQ(t,h,e,s,null==n?void 0:n.preferredVideoCodecs)].filter(oe)}function GQ(t,i,e,s,n){const r=xe(s||[],(t=>t.aat===Zt.Gv&&t.Ot));return VQ(i,[HQ(r,e,t),qQ(r),XQ(r,n),ZQ()])}function WQ(t,i,e,s,n){const r=xe(s||[],(t=>t.aat===Zt.Yv&&t.Ot));return VQ(i,[HQ(r,e,t),XQ(r,n),ZQ()])}function VQ(t,i){if(0===t.length)return;let e=t;for(const t of i){if(1===e.length)return e[0];e=t(e)}return e[0]}function HQ(t,i,e){return s=>{const n=t?t.Fst.u:void 0;if(!oe(n))return s;const r=null==i?void 0:i.fst,h=e.fst,o=r&&h&&r.zy===h.zy,a=xe(s,(t=>t.Fst.u===n));return o&&a?[a]:s}}function qQ(t){return i=>{const e=t?t.ys:"",s=i.some((t=>""!==t.ys))?i.filter((t=>""!==t.ys)):i;if(""===e)return s;const n=xe(s,(t=>t.ys===e));return n?[n]:s}}function XQ(t,i){return e=>{if(void 0===t&&i&&i.length>0)for(const t of i){const i=e.filter((i=>i.Uw.Nw.some((i=>rk(i.Tet,t)))));if(i.length>0)return i}return e}}function ZQ(){return t=>{let i=[],e=-1/0;for(const s of t){const t=s.Fst.KP;t>e?(e=t,i=[s]):t===e&&i.push(s)}return i}}r(),r(),function(t){t.iut="api",t.eut="start"}(UQ||(UQ={})),r(),(QQ||(QQ={})).sut="nut",r();var KQ=class extends d{constructor(i){super(t.jA),this.error=i}};function JQ(t){return void 0!==t.q_}function $Q(t,i){const e=t.Ti&&i.Ti,s=t.Mi&&i.Mi;if(e||s){if(e&&s)return t.Ti*t.Mi-i.Ti*i.Mi;if(e)return t.Ti-i.Ti;if(s)return t.Mi-i.Mi;return(t.Ti||1)*(t.Mi||1)-(i.Ti||1)*(i.Mi||1)}return 0}function tF(t,i){return $Q(t,i)||function(t,i){return t.jz-i.jz}(t,i)}r(),r();var iF=class t{rut(i,e,s,n){let r=t.sortByQuality(i);if(void 0!==this.hut&&void 0===e&&i.length>1){const i=t.out(r,this.hut);i&&(r=i)}const h=this.aut(r,e,s,n);return h.length?h[h.length-1]:r[0]}aut(i,e,s,n){var r;const h=t.sortByQuality(i),o={uut:void 0===n||this.lut.cut?this.lut.uut:n,q_:JQ(s)&&s.q_?s.q_:1,fut:s.Ti,_ut:s.Mi,gut:null==(r=this.wut)?void 0:r.restrictToPlayerSize};let a=h;for(const t of this.Aut)a=t(a,e,o,this.M7,this.vut);return a}static mut(i){return t.sortByQuality(i)[0]}static yut(i,e){var s;return e?t.mut(null!=(s=t.out(i,e))?s:i):t.mut(i)}static out(t,i){for(const e of i){const i=t.filter((t=>rk(t.g7,e)));if(i.length>0)return i}}static sortByQuality(t){const i=[...t];return i.sort(tF),i}constructor(t,i,e,s,n,r){this.Aut=t,this.lut=i,this.M7=e,this.wut=s,this.hut=n,this.vut=r}};r();var eF={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},sF=class{Mut(t,i,e){const s=this.Tut.maxRetries===1/0?eF:this.Tut;return Sa((()=>this.Nut(t,i,e)),e,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async Nut(t,i,e){let s;for(const n of t)try{const t=new ai({Iu:n,pS:$m.Au,vS:i,NS:this.Dut,mS:Vt.GET,$w:Qu.rS,MS:is.Hv,$f:e,YI:3e4,yS:5e3}),s=await this.LS.BI(t),r=await s.kS(e);return{Yot:r,Iut:n,xS:s.xS}}catch(t){s=t}throw s}constructor(t,i,e=eF){this.LS=t,this.Dut=i,this.Tut=e}};r();var nF=class{async Qot(t,i,e){let s;for(const n of this.Sut)try{return await n.Qot(t,i,e)}catch(t){Et(t),s=t}throw s}constructor(t){this.Sut=t}},rF=class{async Qot(t,i,e){const s=await this.Eut.Jtt(t);if(s)return{Yot:s.data,Iut:s.locationURL,xS:s.responseURL};throw new k("Manifest fetch from cache unsuccesful")}constructor(t){this.Eut=t}},hF=class{async Qot(t,i,e){return await this.but.Mut(t,i,e)}constructor(t){this.but=t}};function oF(t,i){return new nF([new rF(i),new hF(t)])}var aF=class{async Qot(t,i,e){const s=await this.Fot.Qot(t,i,e);return await this.Lut(s),s}async Lut(t){await this.kut.oit({key:R(t.Iut),locationURL:Xg(t.Iut),responseURL:Xg(t.xS),data:t.Yot,references:[this.xut.u]})}constructor(t,i,e){this.Fot=t,this.kut=i,this.xut=e}};r();var uF=class extends d{constructor(){super(t.PA)}};r();var cF=class extends d{constructor(){super(t.zA)}};r(),r();var Gh=class extends zt{Cut(t){return t.og=gu.LOADED,this.it(t),t}Out(t){for(const i of this.tt.Nw)if(i.qw===t)return i}constructor(){super()}};function lF(t,i){return""===i?t:t+" "+i}r(),r(),r();var dF=class extends Ss{get so(){return this.Oa||(this.Oa=function(t){return Wt(fc(t),{get attributes(){return t.TI},get eventID(){var i;return""+(null!=(i=t.jut)?i:"")}})}(this)),this.Oa}op(t){return this.V===t.V}constructor(t,i,e,s,n){super(t,i,e,!1,null==n?void 0:n.toString()),this.TI=s,this.jut=n}},fF=class extends Gh{zut(t){const i=this.ES.SS(ra.XM,"","","",void 0,jo.EVENT_STREAM);return i.qw=t,this.Cut(i),i}Put(t,i,e){const s=t.iet;var n;const r=null!=(n=t.zy)?n:"";var h;const o=null!=(h=t.vy)?h:1;var a;const u=null!=(a=t._et)?a:Gt.ZERO,c=lF(s,r);let l=this.Out(c);l||(l=this.zut(c));for(const s of t.rY)if(!_F(s,l)){const t=gF(s,o,u,i);t.Ym>e&&l.CS(t)}}async En(i){await this.Gn(),this.Yht=i,this.Yht.dn(t.OA,this.But),this.But()}async Gn(){this.Yht&&(this.Yht.hn(t.OA,this.But),this.Yht=void 0);for(const t of this.tt.Nw)this.ES.jS(t);await super.Gn()}constructor(t){super(),this.Yht=void 0,this.But=()=>{var t,i;const e=null!=(i=null==(t=this.Yht.Ost())?void 0:t.yn)?i:0;if(e>0)for(const t of this.tt.Nw)ll(t,e);for(const t of this.Yht.Nst)if(t.wn>e)for(const i of t._st)this.Put(i,t,e)},this.ES=t}};function _F(t,i){const e=t.u;if(void 0!==e){if(xe(i.H.Nw,(i=>i.jut===e&&i.V===t.JM)))return!0}return!1}function gF(t,i,e,s){const n=t.u,r=t.PD.toSigned().subtract(e),h=t.lt,o=t.JM,a=t.TI,u=r.toNumber()/i+s.yn,c=h?h.toNumber()/i:void 0,l=void 0!==c?u+c:s.jht;return new dF(u,l,o,a,n)}function wF(t,i,e,s){const n=[],r=xe(e,(t=>t.iet===Tp));if(void 0===r)return;const h=r.zy?function(t){const i=t.split(":",1)[0];switch(i){case"cbcs":case"cenc":return i;default:return}}(r.zy.toLowerCase()):"cenc";if(void 0!==h){for(const t of e)if(t.iet!==Tp)for(const i of Up(t.iet))n.push({Ux:i,Qz:t.tet?[t.tet]:[],Fz:void 0,Kj:void 0});if(n.length)return{FO:t,Rut:{Uut:h,YO:r.YO},Qut:n,Fut:i===Zt.Gv?s.slice():[],Yut:i===Zt.Yv?s.slice():[],q1:!1}}}function AF(t,i){if(!t)return i;if(!i)return t;const e=[],s=Mt();var n;return vF(e,s,t.Qut),vF(e,s,i.Qut),{FO:t.FO,Rut:{Uut:t.Rut.Uut,YO:null!=(n=t.Rut.YO)?n:i.Rut.YO},Qut:e,Fut:mF(t.Fut,i.Fut,ks),Yut:mF(t.Yut,i.Yut,ks),q1:t.q1||i.q1||!1}}function vF(t,i,e){for(const s of e){const e=s.Ux.Rb;let n;i.has(e)?(n=i.get(e),n.Qz=mF(n.Qz,s.Qz,pF)):(n=qr({},s),t.push(n),i.set(e,n))}}function mF(t,i,e){const s=t.slice();for(const t of i)e(s,t)||s.push(t);return s}function pF(t,i){for(const e of t)if(fa(e,i))return!0;return!1}function yF(t,i){let e;const s=t.Det;if(s){const n=t.nY,r=[];for(const i of t.Tet)r.push(n+'; codecs="'+i+'"');e=wF(i||{},t.$w,s,r)}for(const s of t.rst)e=AF(e,MF(s,i));return e}function MF(t,i){return wF(i||{},t.$w,t.Det||[],[t._P])}function TF(t){return t?t.Qut.map((i=>{const e=NF(t.FO,i.Ux),s=t.Rut.Uut;return{Ux:i.Ux,Qz:i.Qz,Kj:i.Kj,RP:[{initDataTypes:[i.Ux.Pb],audioCapabilities:DF(t.Fut,s,null==e?void 0:e.audioRobustness),videoCapabilities:DF(t.Yut,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]}})):[]}function NF(t,i){switch(i.$w){case I.xb:return t.widevine;case I.kb:return t.playready;case I.Ob:return t.fairplay;case I.Cb:return t.clearkey}}function DF(t,i,e){if(0!==t.length)return t.map((t=>({contentType:t,encryptionScheme:i,robustness:e})))}r(),r();var IF=class extends Gh{zut(t){const i=this.ES.SS(ra.XM,t.u,"thumbnails","",!1,jo.DEFAULT);return i.Xw=Da.zn,this.Cut(i),i}async En(i){await this.Gn(),this.Yht=i,this.Yht.dn(t.OA,this.Hn),this.Hn()}Gut(t){this.Wut(t),this.Vut()}Vut(){const t=[];for(const i of this.tt.Nw)this.Hut(i)||t.push(i);for(const i of t)this.st(i)}Wut(t){const i=[];for(const e of this._nt)-1===t.indexOf(e)&&i.push(e);for(const t of i)Hc(this._nt,t)}async Gn(){this.Yht&&(this.Yht.hn(t.OA,this.Hn),this.Yht=void 0);for(const t of this._nt)t.hn(bc.Bst,this.qut);this._nt.length=0;for(const t of this.tt.Nw)this.ES.jS(t);await super.Gn()}ln(){return this.qut=void 0,super.ln()}Xut(){var t,i;const e=null!=(i=null==(t=this.Yht.Ost())?void 0:t.yn)?i:0;if(e>0)for(const t of this.tt.Nw)ll(t,e)}Zut(t){return this.tt.Nw.some((i=>i.u===t.u))}Kut(t){return xe(this.tt.Nw,(i=>i.u===t.u))}Hut(t){return this._nt.some((i=>t.u===i.u))}constructor(t){super(),this._nt=[],this.Hn=()=>{const t=[];for(const i of this.Yht.Nst)for(const e of i.dst)if(e.$w===Zt.Vv&&e.rst.length>0){const i=e.rst[0];t.push(i),this.Zut(i)||this.zut(i),-1===this._nt.indexOf(i)&&(this._nt.push(i),i.dn(bc.Bst,this.qut)),this.Jut(i)}this.Gut(t)},this.Jut=t=>{const i=this.Kut(t);i&&t&&i.Xw!==Da.yh&&(this.Xut(),function(t,i){const e=t.met,s=t.rnt();if(!s)return;const n=s.Ont,r=s.jnt,h=t.Ti,o=t.Mi,[a,u]=function(t){for(const i of t)if(ns(i.iet,EF)||ns(i.iet,bF)){const t=i.zy.match(SF);if(t){const[,i,e]=t;return[Number(i),Number(e)]}}return[1,1]}(t.Iet);let c=n;for(;c&&c.het<=r.het;){const s=t.tnt.lt||c.lt,n=LF(i,c,t.snt(c).Iu,h,o,a,u,s);for(const t of n)i.CS(t);c=e.Rnt(c)}}(t,i))},this.ES=t;const i=this;this.qut=function(){i.Jut(this)}}},SF=/^(\d+)x(\d+)$/,EF="http://dashif.org/guidelines/thumbnail_tile",bF="http://dashif.org/thumbnail_tile";function LF(t,i,e,s,n,r,h,o){const a=[],u=i.Fm,c=r*h,l=s/r,d=n/h,f=S.round(l),_=S.round(d),g=o/c;if(1===c){const i=u+g;return kF(t,u,i,e)?a:[new Ss(u,i,e,!1)]}for(let s=0;s<h;s++)for(let n=0;n<r;n++){const h=u+(s*r+n)*g,o=h+g,c=e+"#xywh="+S.round(n*l)+","+S.round(s*d)+","+f+","+_;if(kF(t,h,o,c)||a.push(new Ss(h,o,c,!1)),o>=i.Ym)return a}return a}function kF(t,i,e,s){return t.H.Nw.some((t=>t.Fm===i&&t.Ym===e&&t.V===s))}r(),r(),r(),r();var xF=class extends Ss{get zD(){return this.$ut}get zy(){return this.tct}get ict(){return this.ect}get so(){return this.Oa||(this.Oa=function(t){return Wt(fc(t),{get schemeIDURI(){return t.zD},get value(){return t.zy},get emsgID(){return t.ict}})}(this)),this.Oa}op(t){return ds(this.V,t.V)}constructor(t,i,e,s,n,r){super(t,i,r,!1),this.$ut=e,this.tct=s,this.ect=n}},CF=class t extends Gh{sct(i,e,s){const n=Rs.ST(mo(i));if(!n)return;const r=function(t,i){const e=[];for(const s of t)im(s,i)&&e.push(s);return e}(n,At.QM);if(r.length){const i=t.nct(n,e,s);this.rct(r,i,s)}}rct(t,i,e){for(const s of t){let t;t=1===s.DT?s.PD.toNumber()/s.vy+e:i+s.UD/s.vy;const n=t+s.BD/s.vy;"https://aomedia.org/emsg/ID3"===s.zD?this.hct(s,t):this.act(s,t,n)}}act(t,i,e){const s=lF(t.zD,t.zy);let n=this.Out(s);n||(n=this.uct(s),this.Cut(n)),n.CS(new xF(i,e,t.zD,t.zy,t.u,t.RD))}hct(t,i){const e=Lx(mo(t.RD));if(!e)return;const s=lF(t.zD,t.zy);let n=this.Out(s);n||(n=this.cct(s),this.Cut(n));for(const t of e.M0){const e=new Bx(i,t);sx(e,n.H.Nw),n.CS(e)}}static nct(t,i,e){const s=em(t,At.FM);return s?Qt(s.JD,s.vy)+e:i}uct(t){const i=this.ES.SS(ra.XM,"","","",void 0,jo.EMSG);return i.qw=t,i.Xw=Da.Zw,i}cct(t){const i=this.ES.SS(ra.XM,"","","",void 0,jo.ID3);return i.qw=t,i.Xw=Da.Zw,i}async Gn(){for(const t of this.tt.Nw)this.ES.jS(t);await super.Gn()}constructor(t){super(),this.ES=t}},OF=class extends CF{async En(i){await this.Gn(),this.Yht=i,this.Yht.dn(t.OA,this.But),this.But()}async Gn(){this.Yht&&(this.Yht.hn(t.OA,this.But),this.Yht=void 0),await super.Gn()}constructor(...t){super(...t),this.But=()=>{var t,i;const e=null!=(i=null==(t=this.Yht.Ost())?void 0:t.yn)?i:0;this.WI(e)}}};r(),r();var jF=class{iit(t,i){return this.lct?this.Eut.iit(t,i):Promise.resolve(!1)}sit(t,i){return this.lct?this.Eut.sit(t,i):Promise.resolve(void 0)}async Jtt(t){const i=await this.Eut.Jtt(t);return this.lct=void 0!==i,i}RV(t){return this.Eut.RV(t)}constructor(t){this.lct=!1,this.Eut=t}},zF=[t.BA,t.UA,t.GA,t.jA,t.WA],PF=[t.RA,t.QA,t.ZA,t.SA,t.DA],BF=class e extends i{async dct(i,e,s,n){const r=this.fct(this.LS,this.hR,this.Eut,this.uc,i,n);return r.dn(bc.Ust,this._ct),r.dn(t.jA,this.Ds),await r.YW(e,s),r}gct(t){void 0===t&&(t=!1),this.wct.i_(),this.Q4.i_(),this.Act.i_(),this.Act=new Z_,this.vct=this.mct(this.pct,this.F4,this.vct,t,this.Act.$f).catch(this.yct)}async mct(t,i,e,s,n){await Promise.all([t,i,e]),Pi(n),await Oi(this.Mct.sL,n);const r=this.Tct;await r.Nct(),this.ZK(),Pi(n);const h=r.ac,o=r.Dct,a=r.Ict;let u=this.Sct(h,a,h,o,!1),c=this.Ect(a,u);!s&&this.bct(c)?await this.Lct(a,u,c):(u=this.Sct(h,a,h,o,!0),c=this.Ect(a,u),await this.kct(a,u,c,n)),Pi(n),this.fg?this.Em(this.I_):this.xct(),this.Cct()}async Lct(t,i,e){const s=this.Tct;await this.Oct(e),this.jct=e,await this.zct(s,t,i),await s.Pct(F.Aat)}async kct(t,i,e,s){const n=this.Tct;this.H4(),this.Bct();const r=this.Rct;await this.Uct(),await this.$J(e),this.jct=e,await this.zct(n,t,i);try{const t=this.Qct(r,!1,!0,s);await n.Pct(F.Aat),await t}finally{this.t2(),this.Fct()}}get ot(){return this.qv}get iP(){const t=this.Rct,i=this.Yct,e=i.jB(t);if(-1!==e)return{yn:i.yn(e),wn:i.wn(e)}}get Yct(){var t,i,e;const s=null!=(e=null==(t=this.Tct)?void 0:t.p_)?e:re.ZB();var n;const r=null!=(n=null==(i=this.Gct)?void 0:i.p_)?n:re.ZB();return s.xB(r)}get p_(){return this.Yct.ks()}get M_(){var t;const i=null==(t=this.Gst)?void 0:t.Zst,e=null==i?void 0:i.wst;if(!i||!e)return;const s=e.getTime(),n=1e3*this.I_;return new Date(n+s)}set M_(t){var i;const e=null==(i=this.Gst)?void 0:i.Zst,s=null==e?void 0:e.wst;if(!t||!e||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.Em(r-n)}get Rct(){return void 0!==this.f4?this.f4:void 0!==this.Wct?this.Wct:this.eP.I_}get I_(){return this.Rct}set I_(t){this.Em(t,t===1/0)}get lt(){let t=NaN;return this.Tct&&this.Tct.Vct?t=this.Tct.wn:this.Gst&&void 0!==this.Gst.Zst.$w&&(t=this.Gst.Zst.yst?this.Gst.Zst.yst.Vit():1/0),t}get wn(){return this.lt}get L_(){return!(!this.Tct||!this.Tct.Vct)&&(this.fg?this.Rct===this.Tct.wn:this.eP.L_)}get dt(){return this.rP}get C_(){return this.hP}get j_(){}Hct(){var t;const i=this.qct;if(0===i.L)return!0;var e;return(null!=(e=null==(t=this.iP)?void 0:t.wn)?e:this.Rct)>=i.yn(0)}Xct(){var t;if(!this.Gst)return!1;if(this.Gst.Zst.$w!==Ot.tO)return!1;const i=null==(t=this.Tct)?void 0:t.ac;if(i&&i.Qst)return!0;const e=[];for(const t of this.Gst.Zst.Nst){const i=t.Cst,s=t.jht;void 0!==i&&void 0!==s&&e.push(i,s)}const s=new re(e).kB();return function(t,i,e){if(!i.L||!e.L)return re.ZB();const s=i.yn(0),n=i.wn(i.L-1),r=t.bn(e).EB().bn(t).xB(i);return re.XB(r.yn(0),r.wn(r.L-1)).CB(r).QB(((t,i)=>t<s&&i<=n&&i-t>Vu))}(this.Yct,this.qct,s).L>0}get R_(){return qr({},this.Zct,{im:Ho.Lb.Dz(),nm:this.Kct,hm:{amountOfBufferedAudioSegments:this.Jct,amountOfBufferedVideoSegments:this.$ct}})}get V_(){return this.g4?this.tlt:this.Tct&&this.Tct.Vct?this.ilt:this.tlt}get K_(){let t=this.zo;return this.Tct&&(t=t.xB(this.elt)),t.kB(.1).ks()}slt(t){this.zo=this.zo.xB(t)}get eg(){return this.aP}set eg(t){this.aP=t,this.nlt()}get og(){let t=this.eP.og;return this.rlt&&(t=S.max(he.Un,t)),t}get qct(){return this.hlt(!1)}get olt(){return this.hlt(!0)}get cg(){return this.qct.ks()}get fg(){return this.JB||this.ult}get cP(){}get clt(){var t,i;return null!=(i=null==(t=this.Gst)?void 0:t.Zst.$w)?i:Ot.$C}get rt(){return this.Tl}get ht(){return this.Zv}get Dg(){return this.lP}get Sg(){return!1}set Sg(t){}get dP(){return this.fP}llt(i){i.dn(zF,this.Ds),i.dn(t.HA,this.dlt),i.dn(t.gA,this.flt),i.dn(be.ha,this._lt),i.dn(t.AA,this.glt),i.dn("Got",this.wlt),i.dn("Alt",this.wlt)}vlt(i){i.hn(zF,this.Ds),i.hn(t.HA,this.dlt),i.hn(t.gA,this.flt),i.hn(be.ha,this._lt),i.hn(t.AA,this.glt),i.hn("Got",this.wlt),i.hn("Alt",this.wlt)}plt(i){i.dn(t.BA,this.Ds)}ylt(i){i.hn(t.BA,this.Ds)}hlt(t){var i;const e=null==(i=this.Gst)?void 0:i.Zst;if(!e)return re.ZB();const s=e.Aot;let n=t?e.Cht:e.vnt;if(void 0===s||void 0===n)return re.ZB();if(!t){const t=this.elt;t.L>0&&t.wn(t.L-1)>n&&(n=S.min(t.wn(t.L-1),e.Cht))}const r=this.lt;return isFinite(r)&&r>n&&(n=r),re.XB(s,n).IB()}async En(t,i){let e,s;Pi(i);try{e=this.Gst.Zst.vot,s=this.Gst.Zst.wot}catch(t){throw new k("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!e)throw new k("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new k("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.Mlt(t.textTracks),this.H4();const n=this.Tlt(e),r=YQ(e,n,void 0,void 0,this.Nlt),h=this.Sct(e,r,e,r,!0);r.forEach((t=>t.Ot=!0));const o=this.Ect(r,h);await this.$J(o),this.jct=o,Pi(i);const a=await this.dct(e,n,r,h);Pi(i),this.Dlt(a),this.t2(),Pi(i),await a.Pct(),Pi(i),this.Ilt||this.Em(s,!0,UQ.eut)}xct(){this.wct.i_(),this.wct=new Z_,this.pct=this.Slt(this.pct,this.vct,this.wct.$f).catch(this.yct)}Elt(){this.wct.i_()}async Slt(t,i,e){for(await Promise.all([t,i]),Pi(e);;){var s;const t=null==(s=this.Tct)?void 0:s.ac;if(!t){0;break}if(!await this.blt(t,e)){0;break}}}async blt(t,i){var e;Pi(i);const s=this.Tct;for(0;this.Gst.Zst.$w===Ot.tO&&void 0===(null==(e=this.Lht(t))?void 0:e.Cst);)await Oi(this.Llt.xot,i),await this.klt();for(Pi(i),await this.klt(),Pi(i);!s.xlt();)await s.w_(QQ.sut,i),await this.klt();Pi(i),await this.klt(),Pi(i);const n=this.Lht(t);return n?(this.Clt(n)?await this.Olt(n,i):await this.jlt(n,i),!0):(this.hJ(),!1)}Clt(t){var i,e,s,n,r,h;const o=null!=(h=null==(i=this.uc)||null==(e=i.dash)?void 0:e.useSeamlessPeriodSwitch)?h:Fs.cB;if(o===Fs.$Q)return!0;if(o===Fs.tF)return!1;const a=this.Tct,u=null==a?void 0:a.ac,c=null==a?void 0:a.Ict,l=YQ(t,this.Tlt(t),u,c,this.Nlt),d=this.Sct(t,l,u,c,!1);if(o===Fs.CLEAR_ONLY&&((null==(s=this.Tct)?void 0:s.zlt)||d)||o===Fs.SAME_DRM_ONLY&&!((null==(n=this.Tct)?void 0:n.zlt)&&d||!(null==(r=this.Tct)?void 0:r.zlt)&&!d))return!1;const f=this.Ect(l,d);return this.bct(f)}Plt(){return!1}Blt(t){const i=this.Rlt();for(const e of i)e!==t&&(e.Xw=Da.yh)}Cct(){if(void 0!==this.Ult){if(this.Ult.Jw){const t=xe(this.ot.Nw,(t=>t.Ot));void 0!==t&&this.Ult.ys===t.ys||(this.Ult.Xw=Da.yh)}}else this.Qlt()}Qlt(){if(this.Rlt().length)return;const t=xe(this.ot.Nw,(t=>t.Ot));if(void 0===t)return;const i=this.rt.Nw.filter((t=>t.Jw));for(const e of i)if(e.ys===t.ys)return e.Xw=Da.zn,void(this.Ult=e)}Rlt(){return this.rt.Nw.filter((t=>t.Xw===Da.zn&&(t.Lt===ra.kI||t.Lt===ra.HM)))}Flt(t){if(t&&this.Ult){const i=function(t,i){if(""===t.ys)return;return i.filter((i=>i.ys===t.ys))[0]}(this.Ult,t.rt.Nw);i&&(i.Xw=Da.zn)}}async Olt(i,e){var s,n;const r=this.Tct;let h=this.Gct;const o=this.jct;try{Pi(e);const s=r.ac,n=r.Ict,o=this.Tlt(i),a=YQ(i,o,s,n,this.Nlt),u=this.Sct(i,a,s,n,!1);a.forEach((t=>t.Ot=!0));const c=this.Ect(a,u);for(0,await r.Nct(),this.ZK(),Pi(e),h&&h.ac===i?(this.bct(c)&&await this.Oct(c),this.jct=c):(h&&await h.ln(!0),this.bct(c)&&await this.Oct(c),this.jct=c,h=await this.dct(i,o,a,u),this.Gct=h,this.plt(h),this.Ylt.Ew=h.rt),await h.Pct(),Pi(e);this.Rct<i.yn;)await this.eP.w_(t.XA,e);Pi(e),this.Dlt(h)}catch(t){throw Er(t)&&(h&&await h.Nct(),o&&this.jct!==o&&(this.bct(o)&&await this.Oct(o),this.jct=o)),t}(null==(s=this.uc)||null==(n=s.dash)?void 0:n.forceSeekToSynchronize)&&await this.Glt(i,e)}async Glt(t,i){const e=Date.now()/1e3;if(void 0===this.Wlt)this.Wlt=e;else if(e-this.Wlt>900){this.Wlt=e,this.Bct();const s=S.max(this.Rct,t.yn);try{await this.Qct(s,!1,!0,i)}finally{this.Fct()}}}async jlt(i,e){for(Pi(e),await this.Tct.Nct(),this.ZK(),await this.Vlt(i.yn),Pi(e),this.hJ();!this.eP.L_&&this.Rct<i.yn;)await this.eP.w_([t.XA,t.NA],e);Pi(e);const s=this.Tct.ac,n=this.Tct.Ict,r=this.Tlt(i),h=YQ(i,r,s,n,this.Nlt),o=this.Sct(i,h,s,n,!0);h.forEach((t=>t.Ot=!0));const a=this.Ect(h,o);this.Tct&&(this.Hlt.hn(ia.ra,this.qlt),await this.Tct.ln(),this.Hlt.dn(ia.ra,this.qlt),this.Tct=void 0),this.Gct&&(await this.Gct.ln(),this.Gct=void 0),this.Bct(),this.H4();const u=S.max(this.Rct,i.yn);await this.Uct(),await this.$J(a),this.jct=a;const c=await this.dct(i,r,h,o);this.Dlt(c);try{const t=this.Qct(u,!1,!0,e);await c.Pct(),await ig((i=>Promise.race([t,c.w_([QQ.sut],i)])),e)}finally{this.t2(),this.Fct()}}async klt(){const t=this.Gct;t&&t.ac.Qst&&(await t.ln(!0),this.Gct=void 0)}static zut(t,i,e){if(!ks(t.dst,i))return;const s=i.rst.map((t=>t.Jst));return new PQ(i,t,s,e)}static Xlt(t){const i=[];for(const s of t.dst){const n=UF(s.Het.concat(s.hst),0===i.length),r=e.zut(t,s,n);r&&i.push(r)}if(0===i.length)throw new k("No valid tracks found in AdaptationSet group "+t.u);return new bQ(t.$w,i)}Tlt(t){const i=[];for(const s of t.Dht)s.$w!==Zt.Gv&&s.$w!==Zt.Yv||(s.rst&&0!==s.rst.length?i.push(e.Xlt(s)):this.jo(new KQ("No supported representation found in the AdaptationSet with mimetype : "+s.$w)));return i}Ect(t,i){var e,s,n,r,h,o,a,u,c,l,d,f;const _=t.map((t=>iF.yut(null!=(f=t.oat)?f:t.rst,Mw(t.aat,this.Nlt)))).map((t=>({_P:t._P}))),g=null==(e=this.uc)||null==(s=e.dash)?void 0:s.desiredTimescale;var w;const A=(null==(n=this.uc)||null==(r=n.dash)?void 0:r.useSeamlessPeriodSwitch)!==Fs.tF&&(null==(h=this.uc)||null==(o=h.dash)?void 0:o.useSeamlessPeriodSwitch)!==Fs.CLEAR_ONLY&&(null==(a=this.uc)||null==(u=a.dash)?void 0:u.useSeamlessPeriodSwitch)!==Fs.SAME_DRM_ONLY&&(null!=(w=null==(c=this.uc)||null==(l=c.dash)?void 0:l.needsTimescaleShifting)?w:le.Ks.eJ),v=null==(d=this.uc)?void 0:d.useManagedMediaSource;return{$w:si.tO,c$:_,gP:TF(i),q1:null==i?void 0:i.q1,eJ:A,sJ:g,p$:v}}static Zlt(t,i){if(!t.length)return;let e;for(const s of t)e=AF(e,yF(s.Fst,i));return(null==i?void 0:i.preferredKeySystems)&&e&&(e.Qut=function(t,i){const e=t=>{const e=i.indexOf(t.Ux.Rb);return e>=0?e:i.length};return Ec(t,((t,i)=>e(t)-e(i)))}(e.Qut,i.preferredKeySystems)),e}Sct(t,i,s,n,r){var h,o,a;const u=this.uc.contentProtection;let c=e.Zlt(i,u);if(void 0!==c)return c;var l;const d=null!=(l=null==(h=this.uc)||null==(o=h.dash)?void 0:o.useSeamlessPeriodSwitch)?l:Fs.cB;if(d===Fs.tF||d===Fs.CLEAR_ONLY||d===Fs.SAME_DRM_ONLY)return;const f=null==(a=this.Tct)?void 0:a.zlt;if(!r&&void 0!==f){const t=!f.q1;if(d===Fs.cB&&t&&!this.Plt())return;return f}const _=!r&&d===Fs.cB;return c=this.Klt(t,u,s,n,_),void 0!==c?(c.q1=!0,c):void 0}Klt(t,i,s,n,r){let h=t,o=!1;for(;;){if(h=o?this.xht(h):this.Lht(h),void 0===h){if(o)return;o=!0,h=t;continue}const a=YQ(h,this.Tlt(h),s,n,this.Nlt),u=e.Zlt(a,i);if(r){const t=this.Ect(a,u);if(!this.bct(t))return}if(void 0!==u)return u}}Pg(){this.V_||(this.tlt=!0,this.g4||(this.Jlt(new Eu),this.$lt()),this.tdt())}Bg(){this.idt||(this.idt=new $s),this.edt();const t=this.idt.sL;return Mo(t),t}edt(){if(this.tlt=!1,this.S4=!0,this.nlt(),this.L_){const t=this.qct;t.L>0&&this.Em(t.yn(0))}this.g4||this.b4().then(this.sdt,this.Jlt),this._ct(),this.tdt()}H4(){this.g4||(this.tlt=this.V_,this.g4=!0,this.$lt())}t2(){this.g4&&(this.g4=!1,this.tlt||this.b4().then(this.sdt,this.Jlt),this._ct(),this.tdt())}tdt(){const t=this.fO,i=this.V_;t!==i&&(this.fO=i,i?this.jo(new bs(this.I_)):this.jo(new ih(this.I_)))}Em(t,i,e){return void 0===i&&(i=!1),void 0===e&&(e=UQ.iut),this.Ilt=!0,this.wct.i_(),this.Q4.i_(),this.JB=!0,this.f4=t,this.slt(this.elt),this.ndt(new gt(this.I_)),this.Q4=new Z_,this.F4=this.Y4(t,this.pct,this.F4,this.vct,this.Q4.$f,i,e).catch(this.yct),this.F4}rdt(){this.Q4.i_()}async Y4(t,i,e,s,n,r,h,o){void 0===r&&(r=!1),void 0===h&&(h=UQ.iut),void 0===o&&(o=!1);try{var a,u;0,await Promise.all([i,e,s]),Pi(n),await Oi(this.Mct.sL,n);const c=this.qct.SB(t);this.f4=c;const l=o||(null==(a=this.uc)||null==(u=a.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&c<=this.I_,d=this.hdt(c),f=this.Tct;if(l||!f||!f.cg.ur(c)&&h!==UQ.eut&&f.ac!==d){if(d){let t=this.Gct;if(this.H4(),f&&await f.Nct(),t&&t.ac===d&&!l){const i=this.Ect(t.Dct,t.zlt);this.ZK(),this.bct(i)&&await this.Oct(i),this.jct=i}else{t&&await t.ln(!0);const i=this.Tlt(d),e=null==f?void 0:f.ac,s=null==f?void 0:f.Ict,n=YQ(d,i,e,s,this.Nlt);let r=this.Sct(d,n,e,s,!1);n.forEach((t=>t.Ot=!0));let h=this.Ect(n,r);this.Clt(d)&&!l?(this.ZK(),this.bct(h)&&await this.Oct(h)):(r=this.Sct(d,n,e,s,!0),h=this.Ect(n,r),f&&(this.Hlt.hn(ia.ra,this.qlt),await f.ln(),this.Hlt.dn(ia.ra,this.qlt),this.Tct=void 0),await this.Uct(),await this.$J(h)),this.jct=h,t=await this.dct(d,i,n,r),this.Gct=t,this.Ylt.Ew=t.rt,this.plt(t)}await t.Pct(F.mat),this.Dlt(t)}}else{0;const t=this.Gct;if(t&&!t.odt){await t.Nct(),this.ZK();const i=this.Ect(f.Dct,f.zlt);this.bct(i)&&await this.Oct(i),this.jct=i}}0;const _=this.Qct(t,r,!1,n);this.f4=void 0,await this.Tct.Pct(F.mat),Pi(n),this.xct(),await _,Pi(n),this.t2(),this.JB=!1,this.adt(new ke(this.I_))}catch(t){if(Er(t))return void 0;0}}async Qct(i,e,s,n){let r,h,o=!0,a=i;for(;;){const u=this.olt;if(u.L>0){const t=u.SB(i);a!==t&&(u.ur(a)&&this.Gst.Zst.$w===Ot.tO||(a=t,o=!0))}if(o)o=!1,r&&Mo(r),null==h||h.i_(),h=new Z_,h.e_(n),r=this.udt(a,e,s,h.$f);else if(!this.ult&&!this.T$)break;await ig((i=>Promise.race([r,this.w_([t.GA,t.yA],i),this.Gst.Zst.w_(bc.Bst,i)])),n)}}Bct(){void 0===this.Wct&&(this.Wct=this.Rct,this.eP.hn(t.YA,this.ndt),this.eP.hn(t.FA,this.adt))}Fct(){if(void 0===this.Wct)return;const i=this.Rct;this.Wct=void 0,this.eP.dn(t.YA,this.ndt),this.eP.dn(t.FA,this.adt),this.Rct!==i&&this.lc()}cdt(t){this.zo=this.zo.xB(t)}hdt(t){const i=this.Gst.Zst;let e=i.Nst;if(le.Ks.o7&&(e=e.filter((t=>t.lt>=.2))),0===e.length)return;const s=e[0];if(t<=s.yn)return s;for(const i of e)if(i.wn>t)return i;return i.$w!==Ot.tO?e[e.length-1]:void 0}xht(t){let i=t.kht;if(le.Ks.o7)for(;i&&i.lt<.2;)i=i.kht;return i}Lht(t){let i=t.bht;if(le.Ks.o7)for(;i&&i.lt<.2;)i=i.bht;return i}async Zh(i,e,s){if(this.ldt(),this.uc&&!Wc(this.uc)&&await this.Gn(),!i||Wc(i))return;this.OS=new Z_,s&&this.OS.e_(s),this.uc=i,this.ddt=e,this.Nlt=i.abr,this.fdt=i.ignoreEmbeddedTextTrackTypes;const n=oF(new sF(this.LS,Boolean(this.uc.useCredentials),this.Tut),this.Eut);this.got(!0),this.Llt=new SQ({tA:le.Ph(this.uc.src),yot:this.uc.liveOffset,Iot:this.uc.timeServer,NS:this.uc.useCredentials},this._dt(this.Nlt),this.LS,n,this.uc.dash),this.Gst=this.Llt.wr,this.Gst.Zst.dn(t.CA,this.gdt),this.Gst.Zst.dn(t.OA,this.wdt),this.Gst.Zst.dn(lr.Uht,this.Adt),this.Gst.Zst.dn(bc.Bst,this._ct),await this.vdt.En(this.Gst.Zst),await this.mdt.En(this.Gst.Zst),ks(this.fdt,jo.EMSG)||(this.pdt=new OF(this.ES),this.Tl.Gz(this.pdt.tt),await this.pdt.En(this.Gst.Zst)),this.nlt()}async ydt(){const t=this.Gst.Zst.G_;var i,e;(this.got(t),t)?this.wlt():(await Promise.all([null==(i=this.Tct)?void 0:i.Nct(F.jat),null==(e=this.Gct)?void 0:e.Nct(F.jat)].filter(oe)),this.Elt(),this.rdt(),this.Act.i_())}get G_(){return this._ot}got(t){this._ot!==t&&(this._ot=t,this.jo(t?new uF:new cF))}nlt(){return this.Gst?(this.Mdt=this.Tdt(this.Mdt,this.OS.$f),this.Mdt.catch(this.yct)):Promise.resolve()}async Tdt(t,i){t&&(await t,Pi(i));try{this.eg===Sl.cB||this.S4?await this.Ndt(i):this.eg===Sl.XM&&await this.Ddt(i)}catch(t){throw Et(t),this.HP(new Ri(ue.MANIFEST_LOAD_ERROR,t.message,t)),t}}async Ndt(t){await this.Ddt(t),this.Idt||(this.Idt=!0,this.Mct.e_(this.En(this.ddt,t)));try{await this.Mct.sL}catch(t){Et(t),this.HP(new Ri(ue.MEDIA_DECODE_ERROR,t.message,t))}}async Ddt(t){await Oi(this.Llt.G,t)}Dlt(t){const i=this.Tct;t!==i&&(this.Tct&&this.vlt(this.Tct),this.Gct&&this.ylt(this.Gct),i&&this.slt(this.elt),this.Tct=t,this.Gct=i,this.llt(this.Tct),this.Gct&&this.plt(this.Gct),this.qv.Ew=t.ot,this.Zv.Ew=t.ht,this.Flt(t),this.Hlt.hn(ia.ra,this.qlt),e.Sdt(this.Hlt),this.Hlt.dn(ia.ra,this.qlt),this.Hlt.Ew=t.rt,this.Ylt.Ew=void 0,this.Qlt())}static Sdt(t){for(const i of t.Nw)i.Xw=Da.yh}ye(){this.vB=!0}we(){this.vB=!1}HP(t){this.rP||(Mo(this.Gn()),this.rP=Yn(t),this.hP=t,this.jo(new _i(t)))}ldt(){this.rP=void 0,this.hP=void 0}async Gn(){this.q_=1,this.OS.i_(),this.rdt(),this.Elt(),this.Act.i_(),this.Mct.i_(),this.Ilt=!1,this.Pg(),this.S4=!1,this.qv.Ew=void 0,this.Zv.Ew=void 0,this.Hlt.Ew=void 0,this.Ylt.Ew=void 0,this.Mdt&&(await this.Mdt.catch(h),this.Mdt=void 0),await Promise.all([this.pct,this.F4,this.vct,this.Mct.sL.catch(h)]),this.Tct&&(await this.Tct.ln(),this.Tct=void 0),this.Gct&&(await this.Gct.ln(),this.Gct=void 0),await this.Uct(),this.jct=void 0,this.Ult=void 0,this.IP.Gn(),await this.vdt.Gn(),await this.mdt.Gn(),void 0!==this.pdt&&(this.Tl.qz(this.pdt.tt),await this.pdt.ln(),this.pdt=void 0),this.ES.Gn(),this.Gst&&(this.Gst.Zst.hn(t.CA,this.gdt),this.Gst.Zst.hn(t.OA,this.wdt),this.Gst.Zst.hn(lr.Uht,this.Adt),await this.Llt.ln(),this.Gst=void 0),this.rlt=!1,this.Edt=NaN,this.Wct=void 0,this.g4=!1,this.zo=re.ZB(),this.fO=!0,this.f4=void 0,this.bdt=!1,this.JB=!1,this.Idt=!1,this.Mct=new $s,this.Kct=0,this.Jct=0,this.$ct=0,this.uc=void 0,this.ddt=void 0,this.fdt=[],this.Wlt=void 0}async ln(){this.Uo(),this.ldt(),await this.Gn(),this.Uo(),this.qv.ln(),this.Zv.ln(),this.Tct&&await this.Tct.ln(),this.Gct&&(this.ylt(this.Gct),await this.Gct.ln()),this.Hlt.ln(),this.Ylt.ln(),this.Tl.ln(),this.IP.ln(),this.Ldt.Hf(),await this.vdt.ln(),await this.mdt.ln(),this.ES.ln(),this.eP.hn(t.yA,this.F2),this.eP.hn(un.TA,this.n4),this.eP.hn(t.NA,this.R2),this.eP.hn(t.YA,this.ndt),this.eP.hn(t.FA,this.adt),this.eP.hn(t.XA,this.lc),this.eP.hn([t.wh,t.bh],this.kdt),this.eP.hn(PF,this.Ds)}xg(){return this.eP.fa}get P_(){return!1}Ug(){return!1}Qg(){}Fg(){}Yg(){}Gg(){this.gct(!0)}constructor(i,e,s,n,r){super(),this.Tct=void 0,this.Gct=void 0,this.S4=!1,this.Edt=NaN,this.rP=void 0,this.hP=void 0,this.g4=!1,this.Wct=void 0,this.f4=void 0,this.bdt=!1,this.rlt=!1,this.OS=new Z_,this.Mct=new $s,this.Idt=!1,this.Gst=void 0,this.Llt=void 0,this._ot=!0,this.tlt=!0,this.idt=void 0,this.zo=re.ZB(),this.aP=Sl.uB,this.Mdt=void 0,this.fO=!0,this.uc=void 0,this.ddt=void 0,this.Nlt=void 0,this.fdt=[],this.JB=!1,this.vB=!0,this.lP=new hu,this.wct=new Z_,this.pct=Promise.resolve(),this.Q4=new Z_,this.F4=Promise.resolve(),this.Ilt=!1,this.Act=new Z_,this.vct=Promise.resolve(),this.jct=void 0,this.pdt=void 0,this.Kct=0,this.Jct=0,this.$ct=0,this.fP=new eI,this.eR=new Th,this.Wlt=void 0,this.wlt=()=>{this.gct()},this.lc=()=>{this.jo(new bl(this.I_,this.M_))},this.n4=t=>{this.jo(new FQ(this.I_,t.Pb,t.Xb))},this.dlt=t=>{this.Kct+=t.nm,this.jo(t)},this.flt=t=>{const i=t.segments.filter((t=>t.xdt));t.track===Zt.Gv?this.Jct=i.length:t.track===Zt.Yv&&(this.$ct=i.length)},this.F2=()=>{const t=this.lt;M(t)||t===this.Edt||(this.Edt=t,this.jo(new jn(this.Edt)))},this.kdt=()=>{this._ct(),this.tdt()},this.R2=t=>{this.L_&&this.jo(t)},this.wdt=t=>{this.Ds(t),this.rlt||(this.rlt=!0,this.Ldt.Cdt())},this.gdt=()=>{this.Gst.Zst.hn(t.CA,this.gdt),this.jo(new bn)},this.glt=t=>{this.HP(t.errorObject),this.jo(t)},this._lt=t=>{this.HP(t.errorObject)},this.yct=t=>{Er(t)||this.HP(new Ri(ue.MEDIA_DECODE_ERROR,t.message,t))},this._ct=()=>{if(!this.V_)if(this.Hct())if(this.Xct()){const t=this.Gst.Zst.wot;this.Em(t,!0)}else;else{const t=this.Gst.Zst.wot;this.Em(t,!0)}},this.ndt=t=>{this.bdt=this.fg,this.jo(t)},this.adt=t=>{const i=this.bdt,e=this.fg;this.bdt=e,i&&!e&&this.jo(t)},this.qlt=t=>{const i=t.Ht;i.Xw===Da.zn?(this.Blt(i),this.Ult=i):i===this.Ult&&i.Xw===Da.yh&&(this.Ult=void 0,this.Qlt())},this.sdt=()=>{this.g4||this.idt&&(this.idt.iL(),this.idt=void 0)},this.Jlt=t=>{this.g4||this.idt&&(this.idt.eL(t),this.idt=void 0)},this.Adt=()=>{this.ydt().catch(this.yct)},this.LS=i,this.hR=s,this.Eut=new jF(n),this.eP=r,this.qv=new au,this.Zv=new au,this.eP.dn(t.yA,this.F2),this.eP.dn(un.TA,this.n4),this.eP.dn(t.NA,this.R2),this.eP.dn(t.YA,this.ndt),this.eP.dn(t.FA,this.adt),this.eP.dn(t.XA,this.lc),this.eP.dn([t.wh,t.bh],this.kdt),this.eP.dn(PF,this.Ds),this.Ldt=new RF(this,this.eP),this.IP=new uu(this.Ldt,!0),this.IP.dn(Dt.fv,this._ct),this.IP.dn(zg,this.Ds),this.Hlt=new Vc,this.Hlt.dn(ia.ra,this.qlt),this.Ylt=new Vc,this.ES=this.Odt(),this.vdt=new fF(this.ES),this.mdt=new IF(this.ES),this.Tl=new Fe([this.Hlt,this.vdt.tt,this.mdt.tt]),this.Tut=e.retryConfiguration}},RF=class extends iN{get og(){return this.Qo.og}Cdt(){this.jo(new Z(this.I_,this.og))}constructor(t,i){super(i),this.Qo=t}};function UF(t,i){const e=t.filter((t=>"urn:mpeg:dash:role:2011"===t.iet)).map((t=>t.zy)).filter(oe);return i||ks(e,"main")?ks(e,"caption")?"captions":ks(e,"subtitle")?"subtitles":ks(e,"dub")?"translation":"main":ks(e,"sign")?"sign":ks(e,"description")?"descriptions":ks(e,"commentary")?"commentary":"alternative"}r(),r(),r(),r(),r(),r();var zn,QF=class{jdt(t,i,e){return Promise.resolve()}zdt(t,i,e,s){let n=[];if(s){const r={qy:i.Fm,Xy:i.Ym,Zy:e.met.Zy};s.$w===jo.TTML?n=vm(t,s,r,e.nY):s.$w===jo.WEBVTT&&(n=Ev(t,r).H)}return n}Gn(){}};r(),r(),r(),function(t){t.EM="vttc",t.Pdt="vsid",t.Bdt="iden",t.Rdt="ctim",t.Udt="sttg",t.Qdt="payl",t.Fdt="vtte",t.Ydt="vtta"}(zn||(zn={}));var Lh=class t{static Gdt(i){return Boolean(t.Wdt[i])}static ST(i){const e=[],s=vt.dT(new lh(i,new Eo));for(const i of s)t.Gdt(i.$w)&&e.push(t.Wdt[i.$w](i.JM));return e}static Vdt(i){const e=vt.dT(i),s=sm(e,zn.Pdt),n=sm(e,zn.Bdt),r=sm(e,zn.Rdt),h=sm(e,zn.Udt),o=sm(e,zn.Qdt);return{$w:zn.EM,Hdt:s?t.qdt(s):void 0,Xdt:n?t.Zdt(n):void 0,Kdt:r?t.Jdt(r):void 0,$dt:h?t.tft(h):void 0,ift:o?t.eft(o):void 0}}static qdt(t){return{$w:zn.Pdt,sft:t.sT()}}static Zdt(t){return{$w:zn.Bdt,Xdt:t.aT()}}static Jdt(t){return{$w:zn.Rdt,nft:t.aT()}}static tft(t){return{$w:zn.Udt,rft:t.aT()}}static eft(t){return{$w:zn.Qdt,hft:t.aT()}}static oft(t){return{$w:zn.Fdt}}static aft(t){return{$w:zn.Ydt,uft:t.aT()}}};Lh.Wdt={[zn.EM]:Lh.Vdt,[zn.Fdt]:Lh.oft,[zn.Ydt]:Lh.aft};var FF=class{jdt(t,i,e){const s=new DataView(t.cft),n=Rs.ST(s),r=xe(n,(t=>t.$w===At.iM));return r&&(this.lft=r.tt[0].ZT.pT.vy),Promise.resolve()}zdt(t,i,e){if(M(this.lft))return[];const s=mo(t),n=Rs.ST(s),r=em(n,At.xM),h=em(n,At.RM);if(!r||0===r.tt.length||!h)return[];const o=function(t,i,e){const s=t.tt[0],n=s.ED?s.ED.ED.toNumber()/e:i.Fm,r=[];for(const t of s.SD)r.push(...t.OD);return{dft:n,OD:r}}(r,i,this.lft),a=e.met.Zy;return function(t,i,e,s){const n=Lh.ST(mo(i.JM)),r=t.OD,h=t.dft+s,o=[];let a=0;for(let t=0;t<r.length;t++){const i=r[t],s=n[t];var u;const c=(null!=(u=i.lt)?u:0)/e;let l;s.$w===zn.EM&&(l=YF(s,a,c,h)),l&&o.push(l),a+=c}return o}(o,h,this.lft,a)}Gn(){this.lft=NaN}constructor(){this.lft=NaN}};function YF(t,i,e,s){if(!t.ift)return void 0;const n=t.Kdt?function(t){return Bv(t.nft,new Eo(0))}(t.Kdt):i,r=s+n,h=r+e,o=t.ift.hft;return new xl(r,h,o,!1)}r(),r(),r();var GF=class t extends zt{get Vot(){return this.Hot}set Vot(t){this.Hot=t}get Ot(){for(const t of this.tt.Nw)if(t.Xw!==Da.yh)return!0;return!1}async En(t){await this.Gn(),this.eat=t,this.Tlt(t)}Tlt(t){for(const i of t.dst){const t=this.fft(i);this._ft(t,i),t.og=gu.LOADED,this.it(t)}}st(t){this.gft(t),super.st(t)}ZI(t){const i=this.wft(t);if(i&&this.Vot!==i){this.Vot=i;for(const t of this.tt.Nw)t!==i&&(t.Xw=Da.yh)}}KI(t){const i=this.wft(t);i&&this.Vot===i&&(this.Vot=void 0)}wft(t){return xe(this.tt.Nw,(i=>t.Bw===i.Bw))}_ft(t,i){this.Aft.set(t.Bw,i)}vft(t){return this.Aft.get(t.Bw)}gft(t){this.Aft.delete(t.Bw)}mft(){if(!this.Vot)return;const i=this.vft(this.Vot);return i?t.pft(i):void 0}static pft(t){return t.rst&&t.rst.length>0?t.rst[0]:void 0}constructor(...t){super(...t),this.Aft=Kn()}};function WF(t,i){const e=i.QB(((i,e)=>t.BB(i,e,!1,!1)));return t.xB(e)}function VF(t,i){const e=i.bn(t.EB()).QB(((i,e)=>t.ur(e)));return t.xB(e)}r(),r(),r(),r();var HF,Sr=class extends Ga{constructor(t,i,e){super("yft"),this.yn=t,this.wn=i,this.Jst=e}},qF=class extends d{constructor(){super("Mft")}};!function(t){t.Tft="Nft",t.Dft="Ift",t.Sft="Eft",t.UR="bft"}(HF||(HF={}));var XF=[t.WA,t.HA,t.GA,t.gA],ZF=class extends i{get Lft(){var t,i;const e=null==(t=this.xft.kft)?void 0:t.Jst,s=null==(i=this.xft.Cft)?void 0:i.Jst;return e||s}get Oft(){var t;return null==(t=this.Lft)?void 0:t.Jst}get jft(){return this.zft}set Pft(t){this.xft.Pft=t}get Pft(){return this.xft.Pft}get FI(){return this.Bft}Rft(t){this.Bft!==t&&(this.Bft=t,this.jo(new qF))}get aat(){return this.zft.Ht.aat}get dt(){return this.rP}async yn(t){if(!this.Uft&&!this.Qft)return;const i=this.w_("Mft");this.Uft?(this.Fft.i_(),this.Fft=new Z_,this.Yft(this.Fft.$f)):(this.Gft.iL(void 0),this.Gft=new $s),await i}get Uft(){return"Nft"===this.Bft}get Qft(){return"Ift"===this.Bft}get Wft(){return"Eft"===this.Bft}get Vft(){return"bft"===this.Bft}async Rg(t){if(this.Wft||this.Qft)for(0,this.Fft.i_();!this.Uft&&!this.Vft;)await this.w_("Mft")}async Gn(t){this.Vft?(this.rP=void 0,this.Rft("Nft")):await this.Rg(t),this.xft.Gn(),this.zft.Gn()}HP(t){this.rP=t,this.Rft("bft"),this.jo(new _i(t))}Hft(){this.o4.dn(t.XA,this.Ql),this.o4.dn([t.YA,t.bA],this.Ge),this.xft.dn(XF,this.Ds),this.Yst.dn(bc.Bst,this.Ql)}qft(){this.o4.hn(t.XA,this.Ql),this.o4.hn([t.YA,t.bA],this.Ge),this.xft.hn(XF,this.Ds),this.Yst.hn(bc.Bst,this.Ql)}async Nct(t){this.qft(),this.Xft.i_(),await this.Rg(null!=t?t:F.Pat),this.xft.Gn()}async Pct(t){this.Hft(),await this.yn(null!=t?t:F.yat)}async ln(){this.Uo(),this.qft(),this.Xft.i_(),await this.Rg(F.Bat),this.xft.ln()}async Yft(t){for(;;)try{Pi(t),this.Rft("Eft"),await this.xft.Zft(t),Pi(t),this.Rft("Ift"),await Oi(this.Gft.sL,t)}catch(t){if(Er(t))this.Rft("Nft");else{const i=t instanceof Ri?t:new Ri(ue.MEDIA_LOAD_ERROR,t.message,t);this.HP(i)}break}}async Kft(t){Pi(t),await this.Rg(F.zat),this.xft.Gn(),Pi(t),await this.yn(F.mat)}constructor(t,i,e,s,n){super(),this.Jft=t,this.Yst=i,this.zft=e,this.xft=s,this.o4=n,this.Bft="Nft",this.rP=void 0,this.Gft=new $s,this.Xft=new Z_,this.Fft=new Z_,this.Ge=t=>{this.Uft||this.Vft||!le.Mtt&&this.xft.$ft(t.currentTime)||(this.Xft.i_(),this.Xft=new Z_,this.Kft(this.Xft.$f).catch(tg))},this.Ql=Xi((()=>{if(this.Qft){try{this.xft.t_t();if(this.xft.i_t())return}catch(t){if(!(t instanceof Sr))throw t}this.yn(F.pat)}}),250),this.Hft()}};r(),r();var KF=class t{e_t(t,i,e,s,n){return this.s_t(t,i,!1,e,n,s)}n_t(t,i,e,s,n){return this.s_t(t,i,!0,e,n,s)}async s_t(i,e,s,n,r,h){Pi(h);const o=await this.r_t(i,s,n,r,h);return e?t.h_t(o):this.o_t(o)}o_t(t){return t}static h_t(t){return t}r_t(t,i,e,s,n){var r;const h=new ai({Iu:t.Iu,pS:$m.$I,vS:t.net?{Range:"bytes="+t.net[0]+"-"+(null!=(r=t.net[1])?r:"")}:void 0,NS:t.NS,mS:Vt.GET,$w:Qu.hS,MS:i?is.uS:is.Hv,TS:this.a_t,YI:e,yS:s,$f:n});return this.LS.BI(h)}constructor(t,i){this.LS=t,this.a_t=i}};r(),r();var JF=class{u_t(t,i){const e=this.c_t**t,s=i*(1-e)+e*this.Z6;M(s)||(this.Z6=s,this.l_t+=t)}d_t(){const t=1-this.c_t**this.l_t;return this.Z6/t}constructor(t){this.Z6=0,this.l_t=0,this.c_t=S.exp(S.log(.5)/t)}},$F=class{u_t(t,i){const e=8e3*i/t,s=t/1e3;this.f_t+=i,this.__t.u_t(s,e),this.g_t.u_t(s,e)}d_t(){return this.cut()?S.min(this.__t.d_t(),this.g_t.d_t()):this.w_t}cut(){return this.f_t>=this.A_t}constructor(t=2,i=5,e=128e3){this.f_t=0,this.w_t=iI,this.__t=new JF(t),this.g_t=new JF(i),this.A_t=e}},tY=class{get uut(){return this.v_t.d_t()}get cut(){return this.v_t.cut()}m_t(t){const i=t.p_t,e=this.y_t?t.M_t-t.T_t:t.M_t-t.N_t,s=t.D_t;!s&&i<this.I_t||(s?this.v_t.u_t(2*e,i):this.v_t.u_t(e,i))}constructor(t,i){this.y_t=i,!i||t!==Zt.Yv&&t!==Zt.Gv?(this.I_t=16e3,this.v_t=new $F):t===Zt.Yv?(this.I_t=5e3,this.v_t=new $F(.05,1,0)):(this.I_t=0,this.v_t=new $F(.005,.1,0))}};r(),r();var iY=["VA","qA"],eY=class extends i{async S_t(t,i){let e;for(const s of this.E_t)try{return await s.S_t(t,i)}catch(t){Et(t),e=t}throw e}async b_t(t,i){let e;for(const s of this.E_t)try{return await s.b_t(t,i)}catch(t){Et(t),e=t}throw e}ln(){for(const t of this.E_t)t.hn(iY,this.Ds),t.ln()}constructor(t){super(),this.E_t=t;for(const t of this.E_t)t.dn(iY,this.Ds)}};r(),r(),r();var sY=class{transform(t,i){this.zd.write(t).catch(h),i.enqueue(t)}flush(){this.zd.close().catch(h)}constructor(t){this.zd=t}},Nh=class{L_t(){return new nY(QE(this.cft),this.k_t,this.x_t)}constructor(t,i,e){this.cft=t,this.k_t=i,this.x_t=e}},nY=class t{get IG(){return this.C_t}jj(t){return FE(this.C_t,t)}Lm(){const[i,e]=GE(this.C_t);return this.C_t=i,new t(e,this.k_t,this.x_t)}O_t(){const[i,e]=function(t){const i=new Eh,e=i.writable.getWriter(),s=new Eh(new sY(e));return t.pipeTo(s.writable).catch((t=>{e.abort(t).catch(h)})),[s.readable,i.readable]}(this.C_t);return this.C_t=i,new t(e,this.k_t,this.x_t)}j_t(t){return this.jj(t).then((t=>new Nh(t,this.k_t,this.x_t)))}constructor(t,i,e){this.C_t=t,this.k_t=i,this.x_t=e}};r();var rY=class extends Ga{constructor(t,i,e){super(i,e),this.wrt=t}},hY="Cache lookup failed.",oY=class extends i{async S_t(t,i){Pi(i);const e=await this.Eut.sit(t.Iu.Iu,t.Iu.net);if(Pi(i),!e)throw new rY(t,hY);const s=new Nh(e.buffer,e.byteLength,e.reference);return{wrt:t.wrt,z_t:{$w:nL._H,JM:s},Jst:t.Jst,Iu:t.Iu}}async b_t(t,i){Pi(i);const e=await this.Eut.sit(t.Iu,t.net);if(Pi(i),!e)throw new rY(t,hY);const s=new Nh(e.buffer,e.byteLength,e.reference);return{$w:nL._H,JM:s}}ln(){this.Uo()}constructor(t){super(),this.Eut=t}};r(),r(),r();var aY=class extends d{constructor(t,i,e,s,n,r){super(t),this.P_t=i,this.DQ=e,this.MD=s,this.tN=n,this.TS=r}},uY=class extends aY{constructor(i,e,s,n,r){super(t.WA,i,e,s,n,r)}};r(),r();var cY=class{constructor(t,i){this.B_t=t,this.R_t=i}},lY=class extends cY{get p_t(){return this.U_t}start(){}transform(t,i){this.U_t+=t.byteLength,i.enqueue(t)}flush(){this.Q_t(!1)}i_(){this.Q_t(!0)}Q_t(t){this.B_t(this.R_t,le.n_(),this.p_t,t)}constructor(...t){super(...t),this.U_t=0}},dY=class extends cY{get p_t(){return this.U_t}start(){this.R_t=le.n_()}transform(t,i){this.U_t+=t.byteLength,this.F_t||this.Y_t(t)&&this.Q_t(!1),i.enqueue(t)}flush(){}i_(){this.Q_t(!0)}Y_t(t){const i=this.G_t(t),e=this.W_t(i);return Boolean(xe(e,fY))}G_t(t){return this.V_t&&void 0!==this.H_t?(this.V_t=fn([this.V_t,t]),new lh(mo(this.V_t),new Eo(this.H_t))):(this.V_t=t,new lh(mo(t),new Eo))}W_t(t){const i=vt.fT(t.JM,t.$M,!0);return i._T?(this.V_t=void 0,this.H_t=void 0):this.H_t=t.$M.Lu,i.k}Q_t(t){this.F_t||(this.B_t(this.R_t,le.n_(),this.p_t,t),this.F_t=!0)}constructor(...t){super(...t),this.U_t=0,this.F_t=!1}};function fY(t){return t.$w===At.RM}var _Y=class{q_t(t){const i=t.UG?this.X_t:le.n_(),e=this.Z_t(i),s=new Eh(e),n=t.IG().pipeTo(s.writable).then((()=>({R_:{p_t:e.p_t}})),(t=>{throw e.i_(),t}));return this.K_t.e_(n),s.readable}J_t(t){const i=t.UG?this.X_t:le.n_(),e=t.jj(),s=e.then((t=>{const e=le.n_();return this.m_t(i,e,t.byteLength,!1),{R_:{p_t:t.byteLength}}}),(t=>{const e=le.n_();throw this.m_t(i,e,0,!0),t}));return this.K_t.e_(s),e}get $_t(){return this.K_t.sL}constructor(t){this.tgt=t,this.K_t=new $s,this.m_t=(t,i,e,s)=>{const n={N_t:this.X_t,T_t:t,M_t:i,p_t:e,D_t:s};this.tgt.m_t(n),this.tgt.cut&&Ho.Lb.Mz(this.tgt.uut)},this.K_t.sL.catch(h),this.X_t=le.n_()}},gY=class extends _Y{Z_t(t){return new lY(this.m_t,t)}},wY=class extends _Y{Z_t(t){return new dY(this.m_t,t)}};r();var AY=class extends aY{constructor(i,e,s,n,r,h,o){super(t.HA,i,e,s,n,r),this.igt=h,this.nm=o}};r();var Vh=class extends Ga{constructor(t,i,e){super("Error downloading segment "+mU(i),t),this.egt=i.Fm,this.sgt=i.Ym,this.ngt=e}},vY=class extends i{rgt(){return le.Att}hgt(){return this.y_t?new wY(this.tgt):new gY(this.tgt)}async S_t(t,i){Pi(i);const e=t.Jst,s=t.Iu,n=t.wrt,r=mU(n),h=e.Jst?e.Jst.Bw:-1;this.jo(new uY(s,e.jz,r,h,e.$w));try{const t=this.hgt(),o=await this.ogt.e_t(s,this.rgt(),1e3*S.max(1.2*n.lt,1),i),a=await this.agt(o,this.rgt(),i,t);return Mo(this.ugt(t.$_t,e,s,r,h,o)),{z_t:a,Jst:e,wrt:n,Iu:s}}catch(t){throw Et(t),new Vh(t,n,e)}}async b_t(t,i){Pi(i);const e=await this.ogt.n_t(t,false,1e4,i);return await this.agt(e,false,i)}async agt(t,i,e,s){if(i){const i=s?s.q_t(t):t.IG();return{$w:nL.iS,JM:new nY(i)}}{const i=s?await s.J_t(t):await t.jj(e);return{$w:nL._H,JM:new Nh(i)}}}async ugt(t,i,e,s,n,r){try{const h=await t;this.jo(new AY(e,i.jz,s,n,i.$w,r.FI,h.R_.p_t))}catch(t){}}ln(){this.Uo()}constructor(t,i,e){super(),this.ogt=t,this.tgt=i,this.y_t=e}},mY=class{cgt(t,i,e,s,n){const r=new oY(n),h=this.lgt(t,e,s);return new eY([r,h])}lgt(t,i,e){return new vY(t,i,e)}};r();var pY=.001,yY=class{get p_(){return this.dgt.p_}get fgt(){return this.dgt.fgt}get YH(){return this.dgt.YH}get _gt(){if(this.SJ.og<he.Un)return!1;if(this.dgt.wn<=this.ggt&&this.dgt.wgt())return!0;const t=this.dgt.iP;if(!t||0===t.L)return!1;const i=re.XB(this.o4.I_,1/0);return t.bn(i).OB(this.dgt.YH).HB>=this.hR.qW}get ggt(){const t=this.dgt.iP;let i;if(t&&t.L>0)i=t.wn(0);else{i=this.o4.I_;const t=this.dgt.YH,e=t.jB(i);e>=0&&(i=t.wn(e))}const e=this.dgt.cg.yn(0);if(e>i){if(this.dgt.yn<=i&&this.dgt.wn>=i&&e>i+pY)throw new Sr(i,e);i=e}return i=this.dgt.Agt.SB(i),i}constructor(t,i,e,s){this.dgt=t,this.o4=i,this.SJ=e,this.hR=s}};r();var MY=class{get vgt(){if(0===this.Ff.size)return re.ZB();let t=re.XB(0,1/0);return this.Ff.forEach((i=>{t=t.bn(i)})),t}mgt(){let t=re.ZB();return this.Ff.forEach((i=>{t=t.xB(i)})),t}pgt(t){let i=!1;return this.Ff.forEach((e=>{i=i||e.ur(t)})),i}ygt(t,i){const e=this.Ff.get(i.u);return!!e&&e.ur(t)}zB(t,i){let e=!1;return this.Ff.forEach((s=>{e=e||s.zB(t,i)})),e}Mgt(t,i){const e=this.Ff.get(i.u).xB(t);this.Ff.set(i.u,e)}Tgt(t){this.Ff.forEach(((i,e)=>{const s=i.xB(t);this.Ff.set(e,s)}))}Ngt(t){this.Ff.forEach(((i,e)=>{this.Ff.set(e,i.bn(t))}))}Gn(){this.Ff.forEach(((t,i)=>{this.Ff.set(i,re.ZB())}))}constructor(t){this.Ff=function(t){const i=Mt();for(const e of t)i.set(e.u,re.ZB());return i}(t)}},TY=class{get Dgt(){return this.Igt}get YH(){return this.GH}Sgt(t){for(const i of this.vit){if(i.Egt>t)break;if(i.bgt>t)return i}}Lgt(t){for(const i of this.vit){if(i.kgt>t)break;if(i.xgt>=t)return i}}Cgt(t,i){const e=[];for(const s of this.vit){if(s.Egt>t)break;s.bgt>=i&&e.push(s)}return e}Ogt(){return this.vit}jgt(t,i){const e=re.XB(t.kgt,t.xgt),s=e.EB();this.Igt.Ngt(s),this.Igt.Mgt(e,i),this.zgt(s);const n=qt(this.vit,(i=>t.Egt<=i.Egt));if(n<0)this.vit.push(t);else{this.vit[n].bgt<=t.bgt?this.vit.splice(n,1,t):this.vit.splice(n,0,t)}}WH(t,i){this.GH.Mgt(t,i)}Pgt(t){this.GH.Tgt(t)}Ngt(t){this.Igt.Ngt(t),this.GH.Ngt(t);const i=this.Igt.mgt();this.zgt(i)}zgt(t){this.vit=this.vit.filter((i=>t.BB(i.kgt,i.xgt))).map((i=>i.xdt&&!t.zB(i.kgt,i.xgt)?function(t,i){return{Egt:t.Egt,bgt:t.bgt,kgt:t.kgt,xgt:t.xgt,xdt:i}}(i,!1):i))}Gn(){this.Igt.Gn(),this.GH.Gn(),this.vit=[]}ln(){this.Gn()}constructor(t){this.vit=[],this.Ht=t,this.Igt=new MY(t.rst),this.GH=new MY(t.rst)}};r(),r();var NY=class{get Pft(){return this.Bgt}set Pft(t){this.Bgt=t}get aat(){return this.zft.Ht.aat}async Rgt(t,i,e){let s;Pi(e);const n=this.zft.Lgt(t);s=n&&go(n.xgt,t,1e-5)?S.max(n.bgt,t):t;const r=this.Ugt(s),h=function(t){return DY.bind(void 0,t)}(s);let o=await this.G9.Qgt(h,r,i,e);for(Pi(e);o&&this.Fgt(o.wrt);){const t=bY(o.wrt),s=o.Jst;o=await this.G9.Qgt(t,[s],i,e),Pi(e)}if(!o)return void 0;if(!this.Ygt(o.wrt))return o;const a=this.Ggt(o.wrt);if(t<a.yn)return await this.findFirstNonAppendedSegmentBeforeSegment(o,i,e,a);if(t>=a.wn)return await this.findFirstNonAppendedSegmentAfterSegment(o,i,e);if(!o.Jst.lnt(o.wrt))throw new k("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,i,e){let s=t;do{const n=bY(s.wrt),r=t.Jst;s=await this.G9.Qgt(n,[r],i,e),Pi(e)}while(s&&this.Ygt(s.wrt));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,i,e,s){let n=t;do{const s=EY(n.wrt),r=t.Jst;n=await this.G9.Qgt(s,[r],i,e),Pi(e)}while(n&&this.Ygt(n.wrt));if(!n){0;const i=t.Jst.Kst.yn;throw new Sr(i,s.yn,t.Jst)}return n}Wgt(t){return this.zft.Dgt.pgt(t)}Vgt(t){return this.zft.Cgt(t.Fm,t.Ym)}Ygt(t){const i=this.Vgt(t);return i.length>0&&function(t,i){return function(t){let i=re.ZB();for(const e of t)i=i.xB(re.XB(e.Egt,e.bgt));return i}(t).zB(i.Fm,i.Ym)}(i,t)&&i.every(LY)}Fgt(t){return this.zft.YH.zB(t.Fm,t.Ym)}Ggt(t){const i=this.Vgt(t);return{yn:i[0].kgt,wn:i[i.length-1].xgt}}Ugt(t){const i=this.Hgt(t);if(0===i.length)return i;const e=i.filter((t=>!t.int));return e.length>0?e:[i[i.length-1]]}Hgt(t){return(this.Bgt?this.Bgt:this.zft.Ht.rst).filter((i=>!this.zft.YH.ygt(t,i)))}constructor(t,i,e){this.Jft=t,this.zft=i,this.G9=e}};async function DY(t,i,e,s){const n=i.met.Dnt(t);if(n){if(i.ont(n)){return(await i.ant(n,e,s)).Urt(t)}return n}}async function IY(t,i,e,s){if($t(t)){if(0===t.Pst)return;const n=i.met.ert(t);if(!n)return;return(await i.ant(n,e,s)).jrt(t.Pst-1)}return i.met.Wnt(t)}async function SY(t,i,e,s){if($t(t)){const n=i.met.ert(t);if(!n)return;const r=await i.ant(n,e,s);if(t.Pst+1===r.L)return;return r.jrt(t.Pst+1)}return i.met.Rnt(t)}function EY(t){return IY.bind(void 0,t)}function bY(t){return SY.bind(void 0,t)}function LY(t){return t.xdt}r();var kY=class{async Qgt(t,i,e,s){Pi(s);const n=this.qgt(i,e);if(!n)return;const r=await t(n,this.Xgt,s);if(!r)return;const h=n.snt(r);return{Jst:n,wrt:r,Iu:h}}qgt(t,i){if(0===t.length)return;const e=this.Zgt.rut(t,this.Kgt?i:void 0,this.dgt,this.hR.WW);return this.Kgt||(this.Kgt=!0),e}constructor(t,i,e,s){this.Zgt=t,this.dgt=i,this.hR=e,this.Xgt=s,this.Kgt=!1}};r();var xY=class{async Qgt(t,i,e,s){Pi(s);const n=this.Zgt.aut(i,e,this.dgt);if(!n.length)return;let r;for(const i of n)try{Pi(s);const e=await t(i,this.Xgt,s);if(e){const t=i.snt(e);if(await this.Eut.iit(t.Iu,t.net))return{wrt:e,Jst:i,Iu:t}}}catch(t){Et(t),r=t}if(r)throw r}constructor(t,i,e,s){this.Zgt=t,this.dgt=i,this.Eut=e,this.Xgt=s}};r();var CY=(t,i,e,s,n)=>t.filter((t=>n.mH(t)&&s.u7(i,t)));r();var OY=(t,i,e)=>t.filter((t=>function(t,i,e){const s=e.uut;if(s<=0)return!1;return.8*s>t.jz*e.q_}(t,0,e)));r();var jY=(t,i,e,s,n)=>{const r=e.gut;if(void 0===r&&!s.Ys)return t;if(!1===r)return t;if(t.length>0&&t[0].$w!==Zt.Yv)return t;for(let i=t.length-1;i>=0;i--){const s=t[i];if(s.Mi===e._ut&&s.Ti===e.fut)return t.slice(0,i+1);if(s.Mi<e._ut||s.Ti<e.fut)return t.slice(0,i+2)}return[]};r();var zY=class{async Qgt(t,i,e,s){let n;for(const r of this.Jgt)try{const n=await r.Qgt(t,i,e,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this.Jgt=t}};r(),r();var PY=class{async cht(t,i,e,s){let n;for(const r of this.$gt)try{return await r.cht(t,i,e,s)}catch(t){Et(t),n=t}throw n}constructor(t){this.$gt=t}};r();var BY=class{async cht(t,i,e,s){var n;const r=await this.LS.BI({Iu:t,pS:$m.$I,vS:i?{Range:"bytes="+i[0]+"-"+(null!=(n=i[1])?n:"")}:void 0,NS:e,mS:Vt.GET,$w:Qu.Hv,$f:s});return await r.jj()}constructor(t){this.LS=t}};r();var RY=class{async cht(t,i,e,s){const n=await this.Eut.sit(t,i);if(n)return n.buffer;if(i){const e=await this.Eut.sit(t);if(e)return kh(new A(e.buffer),i[0],i[1])}throw new rY({Iu:t,net:i,NS:!1})}constructor(t){this.Eut=t}};r();var UY=1.05,QY=(t,i,e,s)=>{if(!1===e.gut)return t;if(s.e7)return t;const n=s.s7;var r;const h=(null!=(r=null==n?void 0:n.width)?r:e.fut)*UY;var o;const a=(null!=(o=null==n?void 0:n.height)?o:e._ut)*UY;for(let i=t.length-1;i>=0;i--){const e=t[i];if(e.Mi<=a&&e.Ti<=h)return t.slice(0,i+1)}return[]},FY=class{static h8(t,i,e,s,n,r,h,o,a,u){const c=function(t,i){return new PY([new RY(i),new BY(t)])}(r,h),l=new iF([CY],n,le.Ks,o,a,u),d=new xY(l,i,h,c),f=new iF([OY,CY,jY,QY],n,le.Ks,o,a,u),_=new kY(f,i,s,c),g=new zY([d,_]);return new NY(t,e,g)}};r();var YY=class{sct(t,i,e,s){return this.dgt.sct(t,i,e,s)}twt(t,i,e){return this.dgt.jdt(t,i,e)}iwt(t,i,e){return this.dgt.iwt(t,i,e)}WH(t,i){this.dgt.WH(t,i)}VH(t,i){this.dgt.VH(t,i)}hJ(){this.dgt.hJ()}$W(){return this.dgt.$W()}constructor(t){this.dgt=t}};r(),r();var GY=class extends d{constructor(i,e,s,n,r,h=0){super(t.GA),this.segmentStartTime=i,this.error=e,this.trackType=s,this.track=n,this.quality=r,this.retryCount=h}};r();var WY=class extends d{constructor(i,e){super(t.gA),this.track=i,this.segments=e}},VY=class extends Ga{constructor(t,i){super(i),this.ewt=t}},HY=[t.WA,t.HA],qY=class extends i{get kft(){return this.swt}get Cft(){return this.nwt}set Pft(t){this.rwt.Pft=t}get Pft(){return this.rwt.Pft}get aat(){return this.zft.Ht.aat}hwt(t){return!this.EK||!t||!fa(this.EK.cft,t.cft)}$ft(t){if(!this.swt)return!1;const i=this.swt.wrt,e=re.XB(i.Fm,i.Ym),s=this.owt.fgt,n=s.jB(t);return n<0?e.ur(t,pY):e.BB(t,s.wn(n),!0,!0,pY)}async Zft(t){const i=this.zft.Ht.rst;for(;;)try{Pi(t),this.t_t();if(this.i_t())break;const e=this.awt(),s=await this.Qgt(e,t);if(void 0===s)break;if(this.swt=s,!XY(this.swt)){await this.uwt(this.swt,t);continue}this.nwt&&!rk(this.nwt.Jst._P,this.swt.Jst._P)&&await this.vut.yH(this.swt.Jst),await this.cwt(e,this.swt.wrt,t),this.EK=await this.lwt(this.swt.Jst,t);const n=await this.S_t(this.swt,t),r=this.owt.p_,h=this.nwt;this.nwt=await this.dwt(n,t);const o=this.owt.p_;this.fwt(h,this.swt,r,o),i.forEach((t=>t.int=!1))}catch(e){if(e instanceof Sr){this.fJ(e.yn,e.wn,e.Jst);continue}if(e instanceof VY){let s;if(i.every((t=>t.int))){if(this._wt===this.Tut.maxRetries)throw new Ri(ue.MEDIA_LOAD_ERROR,e.message,e);this._wt++,s=S.min(this.Tut.minimumBackoff*2**(this._wt-1),this.Tut.maximumBackoff)}await yc(null!=s?s:500,t);continue}throw this.gwt=re.ZB(),e}finally{this.swt=void 0}}fwt(t,i,e,s){const n=s.OB(e),r=i.Jst.unt(i.wrt),h=i.Jst.lnt(i.wrt);let o=i.wrt.Fm,a=i.wrt.Ym;r&&(o=S.min(o,S.max(0,i.Jst.Kst.yn-.05))),h&&(a=S.max(a,i.Jst.Kst.wn));const u=re.XB(o,a).OB(s);if(0===n.L)return 0===this.gwt.L&&this.gwt.xB(re.XB(e.wn(e.L-1),o)),this.gwt=this.gwt.xB(u),void this.zft.Pgt(this.gwt);if(r||this.gwt.L>0){const t=u.bn(re.XB(o,n.yn(0)));this.wwt(t)}const c=n.EB().bn(re.XB(n.yn(0),n.wn(n.L-1)));if(this.wwt(c),h){const t=u.bn(re.XB(n.wn(n.L-1),a));this.wwt(t)}if(this.gwt.L>0){const t=this.gwt.OB(n);this.wwt(t),this.gwt=re.ZB()}const l=i.Jst.met,d=$t(i.wrt)?void 0:l.Wnt(i.wrt);var f;const _=null!=(f=null==t?void 0:t.wrt)?f:this.Awt(d)?d:void 0;if(_){const t=this.zft.Cgt(_.Fm,_.Ym);if(t.length>0){const i=re.XB(t[t.length-1].xgt,n.yn(0));this.wwt(i)}}const g=$t(i.wrt)?void 0:l.Rnt(i.wrt);if(g&&this.Awt(g)){const t=this.zft.Cgt(g.Fm,g.Ym);if(t.length>0){const i=re.XB(n.wn(n.L-1),t[0].kgt);this.wwt(i)}}}Awt(t){return!!t&&this.zft.Cgt(t.Fm,t.Ym).length>0}wwt(t){const i=t.OB(this.owt.p_);for(let t=0;t<i.L;t++)i.yn(t)!==i.wn(t)&&this.vwt.WH(i.yn(t),i.wn(t))}mwt(t,i){throw new VY(t,i)}t_t(){if(this.gwt.L>0)return;var t;const i=this.owt.fgt.xB(null!=(t=this.owt.YH.IB().VB(this.owt.ggt))?t:re.ZB());this.zft.Ngt(i),this.pwt&&!this.ywt(this.pwt)&&(this.pwt=void 0),this.jo(new WY(this.zft.Ht.aat,this.zft.Ogt()))}i_t(){return this.nwt&&this.nwt.Jst.lnt(this.nwt.wrt)?(this.vwt.hJ(),!0):(this.pwt&&this.pwt.Jst.lnt(this.pwt.wrt)&&this.ywt(this.pwt)&&this.vwt.hJ(),!!this.owt._gt)}ywt(t){return this.zft.Dgt.zB(t.Mwt,t.Twt)}Nwt(t,i,e){(!this.pwt||this.pwt.wrt.Ym<t.wrt.Ym)&&(this.pwt=qr({},t,{Mwt:i,Twt:e}))}awt(){const t=this.owt.ggt;return t}async Qgt(t,i){Pi(i);const e=this.nwt?this.nwt.Jst:void 0,s=await this.rwt.Rgt(t,e,i);if(s)return s}async uwt(t,i){const e=t.Jst,s=e.met,n=$t(t.wrt)?s.ert(t.wrt):t.wrt,r=e.Zst.hot(),h=s.Bnt(n);if(h&&h.getTime()<=r.getTime())return this.mwt(F.Nat,"Segment is not available.");const o=s.Unt(n).getTime()-r.getTime();await ig((t=>Promise.race([yc(o,t),e.w_(bc.Bst,t)])),i)}async lwt(t,i,e){void 0===e&&(e=0),Pi(i);const s=t.qst;if(!s)return this.EK;try{if(!t.Vst){const e=await this.Dwt.b_t(s,i);t.Vst=e.JM}}catch(s){if(Et(s),kt(s)){if(2===e)return t.int=!0,this.mwt(F.Cat,"Could not fetch the initializer.");const s=S.min(this.Tut.minimumBackoff*2**e,this.Tut.maximumBackoff);return await yc(s,i),this.lwt(t,i,e+1)}throw new Ri(ue.MEDIA_LOAD_ERROR,s.message,s)}Pi(i);try{this.hwt(t.Vst)&&await this.vwt.twt(t.Vst,t,i)}catch(t){if(Et(t),kt(t))return this.mwt(F.Cat,"Could not append the initializer.");throw new Ri(ue.MEDIA_DECODE_ERROR,t.message,t)}return t.Vst}async S_t(t,i,e){void 0===e&&(e=0);try{return Pi(i),await this.Dwt.S_t(t,i)}catch(s){if(Et(s),s instanceof Vh){if(Qm(s.cause))return this.Iwt(new Vh(s,t.wrt,t.Jst),e),this.mwt(F.Nat,"Could not append the segment.");if(2===e)return t.Jst.int=!0,this.Iwt(s,e),this.Swt(t,s),this.mwt(F.Nat,"Could not fetch the segment.");const n=S.min(this.Tut.minimumBackoff*2**e,this.Tut.maximumBackoff);return await yc(n,i),await this.S_t(t,i,e+1)}throw new Ri(ue.MEDIA_LOAD_ERROR,s.message,s)}}async cwt(t,i,e){const s=this.zft.Cgt(i.Fm,i.Ym),n=this.owt.fgt.VB(t);let r=re.ZB();for(const t of s){Pi(e);const i=t.kgt,s=t.xgt,h=n&&n.BB(i,s)?S.max(i,n.wn(0)):i,o=s;h<o&&(r=r.xB(re.XB(h,o)))}for(let t=0;t<r.L;t++)await this.vwt.iwt(r.yn(t),r.wn(t),e);this.t_t()}async dwt(t,i){try{Pi(i);const e=await this.vwt.sct(t.z_t,t.wrt,t.Jst,i);return this.Ewt(t,e.Mwt,e.Twt),this.Nwt(t,e.Mwt,e.Twt),t}catch(i){if(Et(i),kt(i))return this.Iwt(new Vh(i,t.wrt,t.Jst),0),this.mwt(F.Nat,"Could not append the segment.");if(Mb(i)&&this.vwt.$W())return this.mwt(F.Iat,"Buffer is full. Could not reduce the buffer.");throw new Ri(ue.MEDIA_DECODE_ERROR,i.message,i)}}Ewt(t,i,e){const s=t.Jst,n=t.wrt;this.jgt(n,s,i,e)}jgt(t,i,e,s){this.zft.jgt({Egt:t.Fm,bgt:t.Ym,kgt:e,xgt:s,xdt:!0},i),this.vwt.VH(e,s)}fJ(t,i,e){const s=re.XB(t,i);e?this.zft.WH(s,e):this.zft.Pgt(s),this.vwt.WH(t,i)}Swt(t,i){if(!i||!i.cause)return;const e=i.cause;if(Qm(e)||Um(e)&&e.UI.FI>=400&&e.UI.FI<500){const i=re.XB(t.wrt.Fm,t.wrt.Ym);t.Jst?this.zft.WH(i,t.Jst):this.zft.Pgt(i);const e=this.owt.p_;this.fwt(this.nwt,t,e,e)}}Iwt(t,i){const e=t.egt,s=this.zft.Ht.aat,n=this.zft.Ht.so,r=t.ngt.Jst&&t.ngt.Jst.so,h=new GY(e,t.message,s,n,r,i);this.jo(h)}Gn(){this.EK=void 0,this.nwt=void 0}ln(){this.Gn(),this.pwt=void 0,this.Dwt.hn(HY,this.Ds),this.Dwt.ln()}constructor(t,i,e,s,n,r,h,o){super(),this.Jft=t,this.zft=i,this.owt=e,this.rwt=s,this.Dwt=n,this.vwt=r,this.vut=h,this.Tut=o,this.swt=void 0,this.EK=void 0,this.nwt=void 0,this.pwt=void 0,this._wt=0,this.gwt=re.ZB(),this.Dwt.dn(HY,this.Ds)}};function XY(t){const i=t.Jst,e=i.met,s=$t(t.wrt)?e.ert(t.wrt):t.wrt;return e.Ynt(s,i.Zst.hot())}var ZY=0,KY=class{h8(t){const i=ZY++,e=this.dgt.aJ,s=new TY(t),n=new tY(e,this.bwt),r=new yY(this.dgt,this.o4,this.SJ,this.hR),h=FY.h8(i,this.dgt,s,this.hR,n,this.LS,this.Eut,this.wut,this.hut,this.vut),o=function(t){switch(t){case Zt.Gv:return en.Gv;case Zt.Yv:return en.Yv;case Zt.Au:return en.Au;case Zt.Vv:return en.Vv;default:return en.Hv}}(e),a=new KF(this.LS,o),u=this.cgt(a,n,this.bwt),c=new YY(this.dgt),l=new qY(i,s,r,h,u,c,this.vut,this.Tut);return new ZF(i,t.Fst,s,l,this.o4)}constructor(t,i,e,s,n,r,h,o,a,u,c){this.dgt=t,this.o4=i,this.SJ=e,this.LS=s,this.hR=n,this.bwt=r,this.Eut=h,this.wut=o,this.hut=a,this.vut=u,this.Tut=c}},JY=class extends KY{cgt(t,i,e){return(new mY).cgt(t,this.dgt,i,e,this.Eut)}},$Y=class extends KY{Lwt(t,i){const e={aat:Zt.Au,Fst:i,rst:i.rst,so:t.so};return super.h8(e)}cgt(t,i){return(new mY).cgt(t,this.dgt,i,!1,this.Eut)}};r();var tG=class{mH(t){return this.kwt.mH(t)}yH(t){return this.kwt.yH(t)}constructor(t){this.kwt=t}},iG=class{mH(t){return!0}yH(t){return Promise.resolve(void 0)}},eG=class extends GF{get iP(){const t=this.o4.I_;return this.fgt.VB(t,.01)}get xwt(){return this.Vot&&this.Cwt[this.Vot.Bw]?this.Cwt[this.Vot.Bw]:re.ZB()}get Owt(){return this.Vot&&this.jwt[this.Vot.Bw]?this.jwt[this.Vot.Bw]:re.ZB()}get Agt(){return new re([0,1/0])}get p_(){return this.xwt}get YH(){return this.zwt?this.zwt.jft.YH.vgt:re.ZB()}get fgt(){return WF(this.p_,this.YH).kB(2*this.Pwt)}get yn(){return this.eat?this.eat.Kst.yn:NaN}get wn(){return this.eat?this.eat.Kst.wn:NaN}get L_(){const t=this.wn;return!!t&&this.o4.I_>=t}get Pwt(){var t;const i=this.mft();if(!i)return.04;var e;return 1/(null!=(e=this.Vot&&(null==i||null==(t=i.Eet)?void 0:t.vp()))?e:25)}get Mi(){return this.pk}get aJ(){return Zt.Au}get q_(){return this.iR}set q_(t){this.iR=t}get K_(){return this.Owt}get cg(){if(!this.Vot)return re.qB(0);const t=this.vft(this.Vot),i=null==t?void 0:t.Ant,e=null==t?void 0:t.wnt;if(void 0===e||void 0===i)return re.qB(0);const s=S.max(i,this.o4.I_);return new re([e,s]).IB()}get Ti(){return this.vk}hJ(){}wgt(){return this.fgt.ur(this.wn)}async sct(t,i,e,s){const n=t.$w===nL._H?t.JM.cft:await t.JM.jj(s),r=this.findTrackForRepresentation(e),h=this.Cwt[r.Bw],o=i.Fm,a=i.Ym,u=new re([o,a]);h||(this.Cwt[r.Bw]=re.ZB(),this.jwt[r.Bw]=re.ZB()),this.Bwt(s);const c=this.zdt(new A(n),i,e,r);for(const t of c)r.CS(t);return this.Cwt[r.Bw]=this.Cwt[r.Bw].xB(u),{Mwt:o,Twt:a}}Bwt(t){const i=yb(this.o4.I_,void 0,void 0,this.p_,this.hR.qW,this.hR.FW);for(const[e,s]of i)Mo(this.iwt(e,s,t))}jdt(t,i,e){return this.Rwt.jdt(t,i,e)}zdt(t,i,e,s){return this.Rwt.zdt(t,i,e,s)}iwt(t,i,e){const s=t,n=i;let r=new re([t,i]);for(const t of this.tt.Nw){const i=[];for(const e of t.H.Nw)e.Fm>=s&&e.Ym<=n?i.push(e):r=r.OB(new re([e.Fm,e.Ym]));for(const e of i)t.GI(e);const e=this.Cwt[t.Bw];e&&(this.Cwt[t.Bw]=e.OB(r))}return Promise.resolve()}WH(t,i){}VH(t,i){}$W(){return!1}ZI(t){if(super.ZI(t),this.Rwt.Gn(),this.zwt&&(this.zwt.ln(),this.zwt=void 0),this.Vot){const t=this.vft(this.Vot);this.zwt=new $Y(this,this.o4,this.o4,this.LS,this.hR,!1,this.Eut,void 0,void 0,new iG,vw).Lwt(this.Vot,t),this.zwt.dn(be.ha,this.Uwt),this.zwt.yn(F.Aat)}}KI(t){this.Vot===t&&(super.KI(t),this.zwt&&(this.zwt.ln(),this.zwt=void 0))}fft(t){const i=function(t){const i=t.rst&&t.rst.length>0&&t.rst[0],e=i&&Ym(i.Tet),s=Ym(t.Tet),n=t.nY===el.APPLICATION_TTML_XML;return e||s||n?jo.TTML:t.nY===el.TEXT_VTT||Hm(t.nY,t.Tet)?jo.WEBVTT:jo.DEFAULT}(t);if(!i)throw new k("Unknown TextTrack type for Representation");const e=t.hst.concat(t.Het);return this.Qwt(function(t){return ks(t.filter((t=>"urn:mpeg:dash:role:2011"===t.iet)).map((t=>t.zy)).filter(oe),"caption")?ra.kI:ra.HM}(e),t.fh,t.U5,!1,i,t,function(t){return t.filter((t=>"urn:mpeg:dash:role:2011"===t.iet)).some((t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.zy)))}(t.hst),t.Het.map(RQ).filter(oe))}async Gn(){await super.Gn(),this.zwt&&(await this.zwt.Gn(F.Uat),this.zwt.hn(be.ha,this.Uwt),this.zwt=void 0),this.eat=void 0,this.Cwt={},this.jwt={}}Fwt(){this.Cwt={},this.jwt={}}findTrackForRepresentation(t){for(const i of this.tt.Nw){const e=this.vft(i);if(e&&GF.pft(e)===t)return i}}constructor(t,i,e,s,n){super(),this.pk=0,this.iR=1,this.zwt=void 0,this.Cwt={},this.jwt={},this.vk=0,this.Uwt=t=>{0},this.o4=t,this.LS=i,this.hR=e,this.Rwt=s,this.Eut=n}},sG=class extends eG{Qwt(t,i,e,s,n,r,h,o){var a;const u=r.rst.reduce(((t,i)=>t||i.u),void 0);var c;const l=null!=(c=null!=u?u:null==(a=r.u)?void 0:a.toString())?c:"";return this.ES.SS(t,l,i,e,s,n,h,o)}ln(){for(const t of this.tt.Nw)this.ES.jS(t);return super.ln()}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.ES=r}},nG=class{get rt(){return this.Tl}async bS(t){if(t.$w!==Zt.Au)return;const i=function(t,i){return Ym(i)||t===el.APPLICATION_TTML_XML||t===el.TEXT_VTT?new QF:Hm(t,i)?new FF:void 0}(t.nY,t.Tet);if(i){const e=this.Ywt(i);return this.Gwt(e),await e.En(t),e}}Ywt(t){return new sG(this.o4,this.LS,this.hR,t,this.Eut,this.ES)}Gwt(t){this.Wwt.push(t),this.Tl.Gz(t.tt)}async Gn(){for(const t of this.Wwt.slice())await t.Gn();sr(this.Wwt),this.Tl.Gn()}async ln(){for(const t of this.Wwt)await t.ln();sr(this.Wwt),this.Tl.ln()}constructor(t,i,e,s,n){this.Wwt=[],this.Tl=new Fe([]),this.o4=t,this.LS=i,this.hR=e,this.Eut=s,this.ES=n}};r();var rG=class extends d{constructor(){super(QQ.sut)}},hG=class extends i{YW(t,i){return this.Vwt(t,i)}async Vwt(t,i){for(const i of t)this.Hwt(i);await this.En(i);for(const t of this.gnt.Dht)t.$w===Zt.Au&&(t.rst&&0!==t.rst.length?await this.qwt.bS(t):this.jo(new KQ("No supported representation found in the AdaptationSet with mimetype : "+t.$w)))}get Bw(){return this.Mm}Wft(){return this.Wwt.some((t=>t.Wft()))}wgt(){return 0!==this.Wwt.length&&this.Wwt.every((t=>t.wgt()))}Xwt(){this.xlt()&&this.jo(new rG)}Zwt(i){i.dn([be.ha,t.UA,t.GA,t.WA,t.HA,t.gA],this.Ds),i.dn(vl.dH,this.Kwt),i.dn("Alt",this.Ds)}get Ot(){return this.Wwt.some((t=>t.Ot))}async Jwt(t){await Promise.all(this.Wwt.map((i=>i.ln(t)))),sr(this.Wwt)}get ot(){return this.qv}get p_(){if(0===this.Wwt.length)return re.ZB();const t=this.Wwt.map((t=>t.p_));let i=re.XB(0,1/0);for(const e of t)i=i.bn(e);if(0===i.L)return i;if(this.wgt()){const t=i.bn(this.Agt);if(0===t.L)return i;const e=t.wn(t.L-1);let s=0;for(const t of this.Wwt)s=S.max(s,t.$wt);e<=s&&(i=i.xB(new re([e,s],[!0,!0])))}return i}get I_(){return this.eP.I_}get zlt(){return this.tAt}get wn(){if(this.Vct){const t=this.lt;if(!M(t)&&t!==S_)return t}if(!this.Wwt.length)return NaN;let t=0;for(const i of this.Wwt)t=S.max(t,i.wn);return t}get Vct(){const t=this.gnt.Zst;if(t.$w===Ot.tO)return!1;const i=t.Nst;return 0!==i.length&&this.gnt===i[i.length-1]}get cg(){if(!this.Wwt.length)return re.ZB();let t=new re([0,1/0]);for(const i of this.Wwt)t=t.bn(i.cg);if(t.L>0&&this.Vct&&isFinite(this.lt)){const i=this.lt,e=t.wn(t.L-1);i>e&&(t=t.xB(re.XB(e,i).IB()))}return t}get ac(){return this.gnt}get rt(){return this.Tl}get ht(){return this.Zv}get iP(){const t=this.I_,i=this.p_,e=i.jB(t);if(-1!==e)return{yn:i.yn(e),wn:i.wn(e)}}get Agt(){const t=this.gnt.yn,i=this.Vct?1/0:this.gnt.wn;return re.XB(t,i)}xlt(){if(this.Wft())return!1;if(!this.wgt())return!1;const t=this.p_;if(0===t.L)return!1;const i=this.I_;if(this.Vct)return t.yn(t.L-1)<=i;{const e=t.bn(this.Agt);if(0===e.L)return!0;const s=e.yn(e.L-1),n=e.wn(e.L-1)+.1;return s<=i&&i<=n}}get odt(){return this.iAt}async Nct(t){this.iAt||(this.iAt=!0,await Promise.all(this.Wwt.map((i=>i.Nct(t)))))}async Pct(t){this.iAt&&(this.iAt=!1,await Promise.all(this.Wwt.map((i=>i.Pct(t)))))}async ln(t){this.Uo(),this.gnt.hn(bc.Ust,this.Ds),this.eAt.i_(),this.sAt&&(await this.sAt.catch(h),this.sAt=void 0),await this.Jwt(t),await this.qwt.ln(),this.qv.ln(),this.Zv.ln(),this.Tl.ln(),this.nAt()}Hwt(t){this.rAt.push(t),t.dn("Got",this.hAt);const i=t.$w===Zt.Gv?this.qv:this.Zv;for(const e of t.tt)i.it(e)}oAt(t){const i=t.$w===Zt.Gv?this.qv:this.Zv;for(const e of t.tt)i.st(e),e.ln();t.ln(),Hc(this.rAt,t)}nAt(){for(let t=this.rAt.length-1;t>=0;t--)this.oAt(this.rAt[t])}get Ict(){return this.rAt.map((t=>t.Vot)).filter(oe)}get Dct(){return this.Wwt.map((t=>t.Vot)).filter(oe)}En(t,i){return this.eAt.i_(),this.eAt=new Z_,i&&this.eAt.e_(i),this.sAt=G(this.ett(t,this.sAt,this.eAt.$f),this.eAt).catch(this.yct),this.sAt}async ett(t,i,e){i&&await i.catch(h),Pi(e);const s=[],n=this.Wwt.slice(),r=t.slice();sr(this.Wwt);for(const t of n){const i=t.Vot;i&&ks(r,i)?(this.Wwt.push(t),s.push(t.En(i,e)),Hc(r,i)):(this.Tl.qz(t.rt),await t.ln(),Pi(e))}for(const t of r){const i=this.aAt(t.aat);this.Tl.Gz(i.rt),this.Wwt.push(i),this.Zwt(i),s.push(i.En(t,e))}await Promise.all(s),this.uAt()}async cAt(t,i){await this.En(t),this.tAt=i}constructor(t,i,e,s,n,r,h,o,a,u){super(),this.qv=new ls,this.Zv=new ls,this.rAt=[],this.eAt=new Z_,this.iAt=!0,this.Wwt=[],this.sAt=void 0,this.Kwt=Xi((()=>{this.jo(new vi(this.I_))}),350),this.hAt=t=>{const i=t.Wot.Vot;if(i)for(const t of this.rAt){var e;t.Vot&&t.Vot!==i&&t.$w===(null==(e=i.qet)?void 0:e.$w)&&(t.hn("Got",this.hAt),t.Vot.Ot=!1,t.dn("Got",this.hAt))}this.Ds(t)},this.yct=t=>{Er(t)||this.jo(new _i(new Ri(ue.MEDIA_LOAD_ERROR,t.message,t)))},this.lAt=t=>{const i=t.m1;if(i)for(const t of this.Dct){if((t.Fst.Det||[]).some((t=>t.YO&&ds(no(i),hE(t.YO)))))return void this.jo(new Mn(new ae(ue.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions")))}},this.LS=t,this.hR=i,this.Eut=e,this.eP=s,this.uc=n,this.Mm=Ra(),this.rAt=[],this.gnt=r,this.tAt=h,this.ES=o,this.qwt=new nG(s,t,i,e,o),this.Tl=new Fe([this.qwt.rt]),this.Tut=a,this.fdt=u,this.gnt.dn(bc.Ust,this.Ds)}};r(),r(),r();var oG=[be.ha,t.GA,t.WA,t.HA,t.gA];r();var aG=0;r();var H,Ft,uG,cG=class extends d{constructor(i,e){super(t.UA),this.representation=i,this.previousRepresentation=e}};function lG(t,i,e){return e===H.dAt?e:i!==Ft.fAt&&i!==Ft._At||e!==H.gAt&&e!==H.wAt?t?i===Ft.AAt?H.vAt:i===Ft.mAt?H.pAt:H.dAt:H.yAt:H.wAt}function dG(t,i,e,s){const n={byte:e};let r=H.gAt;const h=[],o=31&ln(i,n,s);n.byte+=1;for(let e=0;e<o;e+=1){const o=ln(i,n,s),a=4&o,u=3&o;r=lG(Boolean(a),u,r);const c=ln(i,n,s),l=ln(i,n,s);h.push({MAt:t,MD:-1,TAt:!e,NAt:Boolean(a),$w:u,q3:r,DAt:c,IAt:l})}return h}function fG(t,i,e){const s=ln(t,i,e);if(!M(s))return String.fromCharCode(s)}function _G(t){const i=t.nZ,e={byte:t.eZ},s=t.sZ,n=ln(i,e,s);if(255===n&&(e.byte+=1),181!==n)return;const r=zL(i,e);if(47!==r&&49!==r)return;if(49===r){const t=function(t,i,e){let s="",n=e;for(;n>0;)n-=1,s+=fG(t,i);return s}(i,e,4);if("GA94"!==t)return}if(3!==ln(i,e,s))return;47===r&&(e.byte+=1);const h=t;return h.SAt=e.byte,h}function gG(t){return 4===t.tZ}function wG(t){const i=t.filter(gG).map(_G).filter(oe),e=[];for(const t of i)e.push(...dG(t.$X,t.nZ,t.SAt,t.sZ));return e}r(),r(),r(),function(t){t[t.dAt=0]="dAt",t[t.gAt=1]="gAt",t[t.wAt=2]="wAt",t[t.pAt=3]="pAt",t[t.vAt=4]="vAt",t[t.yAt=5]="yAt"}(H||(H={})),function(t){t[t.fAt=0]="fAt",t[t._At=1]="_At",t[t.AAt=2]="AAt",t[t.mAt=3]="mAt"}(Ft||(Ft={})),function(t){t[t.EAt=47]="EAt",t[t.bAt=49]="bAt"}(uG||(uG={})),r();var AG="und";function vG(t){if(t===AG)return;const i=t.toLowerCase();for(const t of mG)if(t[1]===i||t[2]===i||t["2T"]===i||t["2B"]===i||t[3]===i)return t}var mG=[{v:"Abkhaz",nh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{v:"Afar",nh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{v:"Afrikaans",nh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{v:"Akan",nh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{v:"Albanian",nh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{v:"Amharic",nh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{v:"Arabic",nh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{v:"Aragonese",nh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{v:"Armenian",nh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{v:"Assamese",nh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{v:"Avaric",nh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{v:"Avestan",nh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{v:"Aymara",nh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{v:"Azerbaijani",nh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{v:"Bambara",nh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{v:"Bashkir",nh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{v:"Basque",nh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{v:"Belarusian",nh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{v:"Bengali",nh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{v:"Bihari",nh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{v:"Bislama",nh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{v:"Bosnian",nh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{v:"Breton",nh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{v:"Bulgarian",nh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{v:"Burmese",nh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{v:"Catalan",nh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{v:"Chamorro",nh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{v:"Chechen",nh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{v:"Chichewa",nh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{v:"Chinese",nh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{v:"Chuvash",nh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{v:"Cornish",nh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{v:"Corsican",nh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{v:"Cree",nh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{v:"Croatian",nh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{v:"Czech",nh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{v:"Danish",nh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{v:"Divehi",nh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{v:"Dutch",nh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{v:"Dzongkha",nh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{v:"English",nh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{v:"Esperanto",nh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{v:"Estonian",nh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{v:"Ewe",nh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{v:"Faroese",nh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{v:"Fijian",nh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{v:"Finnish",nh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{v:"French",nh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{v:"Fula",nh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{v:"Galician",nh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{v:"Georgian",nh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{v:"German",nh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{v:"Greek",nh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{v:"Guaran\xed",nh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{v:"Gujarati",nh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{v:"Haitian",nh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{v:"Hausa",nh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{v:"Hebrew",nh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{v:"Herero",nh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{v:"Hindi",nh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{v:"Hiri Motu",nh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{v:"Hungarian",nh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{v:"Interlingua",nh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{v:"Indonesian",nh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{v:"Interlingue",nh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{v:"Irish",nh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{v:"Igbo",nh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{v:"Inupiaq",nh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{v:"Ido",nh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{v:"Icelandic",nh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{v:"Italian",nh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{v:"Inuktitut",nh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{v:"Japanese",nh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{v:"Javanese",nh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{v:"Kalaallisut",nh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{v:"Kannada",nh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{v:"Kanuri",nh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{v:"Kashmiri",nh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{v:"Kazakh",nh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{v:"Khmer",nh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{v:"Kikuyu",nh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{v:"Kinyarwanda",nh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{v:"Kyrgyz",nh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{v:"Komi",nh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{v:"Kongo",nh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{v:"Korean",nh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{v:"Kurdish",nh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{v:"Kwanyama",nh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{v:"Latin",nh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{v:"Luxembourgish",nh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{v:"Ganda",nh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{v:"Limburgish",nh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{v:"Lingala",nh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{v:"Lao",nh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{v:"Lithuanian",nh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{v:"Luba-Katanga",nh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{v:"Latvian",nh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{v:"Manx",nh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{v:"Macedonian",nh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{v:"Malagasy",nh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{v:"Malay",nh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{v:"Malayalam",nh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{v:"Maltese",nh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{v:"M\u0101ori",nh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{v:"Marathi",nh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{v:"Marshallese",nh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{v:"Mongolian",nh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{v:"Nauru",nh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{v:"Navajo",nh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{v:"Northern Ndebele",nh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{v:"Nepali",nh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{v:"Ndonga",nh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{v:"Norwegian Bokm\xe5l",nh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{v:"Norwegian Nynorsk",nh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{v:"Norwegian",nh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{v:"Nuosu",nh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{v:"Southern Ndebele",nh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{v:"Occitan",nh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{v:"Ojibwe",nh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{v:"Old Church Slavonic",nh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{v:"Oromo",nh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{v:"Oriya",nh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{v:"Ossetian",nh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{v:"Panjabi",nh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{v:"P\u0101li",nh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{v:"Persian",nh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{v:"Polish",nh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{v:"Pashto",nh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{v:"Portuguese",nh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{v:"Quechua",nh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{v:"Romansh",nh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{v:"Kirundi",nh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{v:"Romanian",nh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{v:"Russian",nh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{v:"Sanskrit",nh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{v:"Sardinian",nh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{v:"Sindhi",nh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{v:"Northern Sami",nh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{v:"Samoan",nh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{v:"Sango",nh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{v:"Serbian",nh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{v:"Gaelic",nh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{v:"Shona",nh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{v:"Sinhala",nh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{v:"Slovak",nh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{v:"Slovene",nh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{v:"Somali",nh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{v:"Southern Sotho",nh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{v:"Spanish",nh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{v:"Sundanese",nh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{v:"Swahili",nh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{v:"Swati",nh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{v:"Swedish",nh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{v:"Tamil",nh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{v:"Telugu",nh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{v:"Tajik",nh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{v:"Thai",nh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{v:"Tigrinya",nh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{v:"Tibetan Standard",nh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{v:"Turkmen",nh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{v:"Tagalog",nh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{v:"Tswana",nh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{v:"Tonga",nh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{v:"Turkish",nh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{v:"Tsonga",nh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{v:"Tatar",nh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{v:"Twi",nh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{v:"Tahitian",nh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{v:"Uyghur",nh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{v:"Ukrainian",nh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{v:"Urdu",nh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{v:"Uzbek",nh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{v:"Venda",nh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{v:"Vietnamese",nh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{v:"Volap\xfck",nh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{v:"Walloon",nh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{v:"Welsh",nh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{v:"Wolof",nh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{v:"Western Frisian",nh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{v:"Xhosa",nh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{v:"Yiddish",nh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{v:"Yoruba",nh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{v:"Zhuang",nh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{v:"Zulu",nh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];r();function pG(t){var i;const e=null!=(i=function(t){const i=t.LX,e=new PL;return e.WX(i,0,i.byteLength),HL(e).mZ}(t))?i:24;return t.LAt/e}function yG(t){return t.$w===At.xM}var MG;function TG(t,i,e,s,n){const r=function(t,i,e,s){const n=e.LAt,r=Gt.fromNumber(t.jD||0),h=s.gm(So.Cp(r,n));return{Git:s.vp(),kAt:s,xAt:h,CAt:s}}(t,0,e,s),h=So.Op(t.lt||0,e.LAt),o=t.IT||0,a=!(65536&o)&&1!==(o>>24&3);let u;const c=mo(n),l=new Eo;for(;l.Lu<c.byteLength;){const t=dt(c,l);if((31&Oc(c,l,1))===BL.cZ){const i=new PL;i.WX(n,l.Lu-1,l.Lu+t-1);const e=new VL(i),s=QL(r.xAt,e);u=u||[],u.push(...wG(s))}l.Sm(t-1)}return qr({},r,{lt:h.vp(),OAt:h,jAt:r.xAt.vp(),zAt:r.Git,PAt:a,BAt:u,RAt:!1,UAt:!1})}function NG(t){return{tN:t.pT.tN,LAt:t.ZT.pT.vy}}function DG(t){return t.$w===At.iM}!function(t){t[t.SAMPLE_DEPENDS_ON_UNKNOWN=0]="SAMPLE_DEPENDS_ON_UNKNOWN",t[t.SAMPLE_DEPENDS_ON_OTHERS=1]="SAMPLE_DEPENDS_ON_OTHERS",t[t.SAMPLE_DEPENDS_ON_NO_OTHER=2]="SAMPLE_DEPENDS_ON_NO_OTHER",t[t.SAMPLE_DEPENDS_ON_RESERVED=3]="SAMPLE_DEPENDS_ON_RESERVED"}(MG||(MG={})),r(),r(),r(),r(),r(),r(),r(),r();var IG=class{hp(t){return this.q5===t.q5&&this.P5===t.P5}constructor(t,i){this.q5=t,this.P5=i}};r();var SG=class{get u6(){return this.QAt}get n6(){return[this]}get o6(){return this.aH}get F5(){return this.FAt}get W5(){return new IG(this.F5.q5,this.F5.P5+this.u6.length-1)}YAt(t){this.QAt+=t}GAt(t){for(const i of t)this.YAt(i)}constructor(t,i){this.aH=t,this.FAt=i,this.QAt=""}};function EG(t,i){return t===i||t.u6===i.u6&&t.F5.hp(i.F5)&&Xc(t.o6,i.o6)}function bG(t,i){return t===i||t.F5.hp(i.F5)&&t.W5.hp(i.W5)&&B_(t.n6,i.n6,EG)}var LG=class extends Ss{op(t){return B_(this.V,t.V,bG)}constructor(t,i,e){super(t,i,e,!1)}};r();var kG=class{WAt(t){return t.Fy(this)}VAt(t){return Cs(t,((t,i)=>t.Fy(this,i)))}HAt(t,i){return new xG(t,i).qAt()}},xG=class{qAt(){if(this.XAt)return[];for(let t=0;t<this.q5.length;t++)this.ZAt(t);return this.KAt(),this.JAt}$At(t){this.tvt=new SG(wO,new IG(this.ivt,t))}KAt(){this.tvt&&(this.JAt.push(this.tvt),this.tvt=null)}ZAt(t){const i=this.q5[t];CG(i)?this.tvt&&this.KAt():(this.tvt||this.$At(t),this.tvt.YAt(i))}get XAt(){return this.q5.every(CG)}constructor(t,i){this.q5=t,this.ivt=i,this.JAt=[],this.tvt=null}};function CG(t){return null==t}var OG=class{static evt(t,i,e){if(i>=e)return;const s=Cs(t,((t,i)=>new xG(t.map((t=>t?t.svt():null)),i).qAt()));return 0!==s.length?new LG(i,e,s):void 0}},Uh="black",jG="white";r(),r();var zG=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce(((t,i)=>(t[i[0]]=i[1],t)),{}),PG=class{nvt(t){for(let i=0;i<sc;i++)t&&(this.rvt[i]=t.rvt[i])}hp(t){for(let i=0;i<sc;i++)if(this.rvt[i]!==t.rvt[i])return!1;return!0}ovt(){for(let t=0;t<sc;t++)if(null!==this.rvt[t])return!1;return!0}avt(t){this.uvt!==t&&(this.uvt=t),this.uvt<0?this.uvt=0:this.uvt>sc&&(this.uvt=31)}cvt(t){const i=this.uvt+t;this.avt(i)}lvt(){this.cvt(-1),this.rvt[this.uvt]=null}YAt(t){t>=144&&this.lvt();const i=function(t){return zG[t]?String.fromCharCode(zG[t]):String.fromCharCode(t)}(t);this.addParsedChar(i)}addParsedChar(t){this.uvt>=sc||(32===Number(t)?(this.rvt[this.uvt]=this.dvt?"</i>":"<i>",this.dvt=!this.dvt):this.rvt[this.uvt]=t,this.cvt(1))}fvt(t){for(let i=t;i<sc;i++)this.rvt[i]=null}tL(){this.fvt(0),this.uvt=0}_vt(){this.fvt(this.uvt)}gvt(t,i){const e=this.rvt;let s=null;for(let n=0;n<sc;n++){const r=e[n];null===r?s=null:(s||(s={Uh:n,zh:t,Ti:0,Mi:1,rvt:[[]]},i.push(s)),s.rvt[0].push(r),s.Ti++)}}Fy(t,i){return t.HAt(this.rvt,i)}constructor(){this.rvt=[],this.uvt=0;for(let t=0;t<sc;t++)this.rvt.push(null);this.dvt=!1}};var or,BG=class{wvt(t,i){const e="CC"+(this.Avt<<1|this.vvt+1);if(t>=i)return null;const s=(new kG).VAt(this.mvt.slice(1));return 0===s.length?null:{Qm:new LG(t,i,s),IG:e,pvt:this.Avt<<1|this.vvt+1}}Gn(){this.yvt(),this.Mvt=1}Tvt(){return this.Mvt}Nvt(t){this.Mvt=t}avt(t){this.mvt[this.Mvt].avt(t)}cvt(t){this.mvt[this.Mvt].cvt(t)}Dvt(){return this.Ivt}Svt(t){this.Ivt=t}YAt(t,i){if(i<32||i>127)return;let e="";switch(t){case 0:e=void 0!==UG[i]?UG[i]:String.fromCharCode(i);break;case 1:e=QG[i];break;case 2:this.Evt(),e=FG[i];break;case 3:this.Evt(),e=YG[i]}e&&this.mvt[this.Mvt].addParsedChar(e)}Evt(){this.mvt[this.Mvt].lvt()}bvt(t,i,e){if(t>=i)for(let s=e-1;s>=0;s--)this.mvt[t+s]=this.mvt[i+s];else for(let s=0;s<e;s++)this.mvt[t+s]=this.mvt[i+s]}Lvt(t,i){for(let e=0;e<=i;e++)this.mvt[t+e]=new PG}yvt(){this.Lvt(0,_r)}kvt(){this.Mvt=this.Ivt>0?this.Ivt:0,this.yvt()}xvt(t){this.Cvt=t}Ovt(t){this.jvt=t}zvt(t){this.Pvt=t}Bvt(t){this.Rvt=t}constructor(t,i){this.mvt=new Array(_r+1);for(let t=0;t<=_r;t++)this.mvt[t]=new PG;this.Mvt=1,this.Ivt=0,this.Avt=t,this.vvt=i,this.Cvt=!1,this.jvt=!1,this.Pvt=jG,this.Rvt=Uh,this.Gn()}},_r=15;!function(t){t[t.Uvt=0]="Uvt",t[t.Qvt=1]="Qvt",t[t.Fvt=2]="Fvt",t[t.Yvt=3]="Yvt"}(or||(or={}));var RG,UG={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},QG={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},FG={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},YG={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"},GG=class{Gn(){this.Gvt=!0,this.Wvt=0,this.J$=0,this.Vvt=this.Hvt,this.qvt=void 0,this.Hvt.Gn(),this.Xvt.Gn(),this.Zvt.Gn()}Kvt(t,i){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|i>>5&1]}Jvt(t,i){const e=this.Kvt(t,i),s=(30&i)>>1;let n=jG,r=!1;s<7?n=HG[s]:7===s&&(r=!0);const h=1==(1&i);if(4===this.J$)return;const o=this.Vvt;if(3===this.J$&&e!==o.Tvt()){const t=1+o.Tvt()-o.Dvt(),i=1+e-o.Dvt();o.bvt(i,t,o.Dvt()),o.Lvt(0,i-1),o.Lvt(e+1,_r-e)}o.Nvt(e);const a=vO[t<<1&14|i>>5&1]-1;if(a<0)return;const u=function(t,i){const e=i>95?i-96:i-64;return{z5:AO[e].z5,j5:AO[e].j5,P5:AO[e].P5,q5:t}}(a,i);o.avt(u.P5),this.Vvt.xvt(h),this.Vvt.Ovt(r),this.Vvt.zvt(n),this.Vvt.Bvt(Uh)}$vt(t,i){this.Vvt.xvt(!1),this.Vvt.Ovt(!1),this.Vvt.zvt(jG);const e=this.tmt(t,or.Uvt," ".charCodeAt(0));let s=jG,n=!1;const r=1==(1&i);return s=HG[(14&i)>>1],"white_italics"===s&&(s="white",n=!0),this.Vvt.xvt(r),this.Vvt.Ovt(n),this.Vvt.zvt(s),e}tmt(t,i,e){if(this.Vvt.YAt(i,e),2===this.J$||3===this.J$){const i=this.imt(this.Vvt,this.Wvt,t);return this.Wvt=t,i}return null}imt(t,i,e){return this.Gvt?null:2===this.J$||3===this.J$?t.wvt(e,e+10):t.wvt(i,e)}emt(t,i){let e=Uh;0==(7&t)&&(e=VG[(14&i)>>1]),this.Vvt.Bvt(e)}smt(t){const i=WG,e=t.nmt,s=t.hmt;let n=null;switch(e){case i.RCL:this.omt();break;case i.BS:this.amt();break;case i.AOD:case i.AON:case i.DER:break;case i.RU2:n=this.umt(2,s);break;case i.RU3:n=this.umt(3,s);break;case i.RU4:n=this.umt(4,s);break;case i.FON:n=this.cmt(s);break;case i.RDC:this.lmt(s);break;case i.TR:this.dmt();break;case i.RTD:this.fmt();break;case i.EDM:n=this._mt(s);break;case i.CR:n=this.gmt(s);break;case i.ENM:this.wmt();break;case i.EOC:n=this.Amt(s)}return n}gmt(t){const i=this.Vvt;if(3!==this.J$)return null;const e=this.imt(i,this.Wvt,t),s=i.Tvt()-i.Dvt()+1;return i.bvt(s-1,s,i.Dvt()),i.Lvt(0,s-1),i.Lvt(i.Tvt(),_r-i.Tvt()),this.Wvt=t,e}umt(t,i){this.Vvt=this.Hvt;const e=this.Vvt;let s=null;return 3!==this.J$&&4!==this.J$&&(s=this.imt(e,this.Wvt,i),this.Hvt.kvt(),this.Xvt.kvt(),this.Gvt=!1,e.Nvt(_r)),this.J$=3,e.Svt(t),s}cmt(t){return this.tmt(t,or.Uvt," ".charCodeAt(0))}_mt(t){const i=this.Hvt;let e=null;return 4!==this.J$&&(e=this.imt(i,this.Wvt,t)),i.yvt(),this.Gvt=!1,e}lmt(t){this.J$=2,this.Vvt=this.Hvt,this.Vvt.Svt(0),this.Wvt=t}wmt(){this.Xvt.yvt()}Amt(t){let i=null;4!==this.J$&&(i=this.imt(this.Hvt,this.Wvt,t));const e=this.Xvt;return this.Xvt=this.Hvt,this.Hvt=e,this.omt(),this.Wvt=t,i}omt(){this.J$=1,this.Vvt=this.Xvt,this.Vvt.Svt(0)}amt(){this.Vvt.Evt()}dmt(){this.Zvt.Gn(),this.Gvt=!1,this.fmt()}fmt(){this.Vvt=this.Zvt,this.J$=4}vmt(t,i,e){return this.Vvt.YAt(or.Uvt,i),this.tmt(t,or.Uvt,e)}mmt(t,i,e){const s=1&i?or.Yvt:or.Fvt;return this.tmt(t,s,e)}pmt(t){const i=t.ymt,e=t.nmt,s=t.hmt;if(this.qvt===(i<<8|e))return this.qvt=void 0,null;if(this.qvt=i<<8|e,this.Mmt(i,e))this.Jvt(i,e);else{if(this.Tmt(i,e))return this.$vt(s,e);if(this.Nmt(i,e))this.emt(i,e);else{if(this.Dmt(i,e))return this.tmt(s,or.Qvt,e);if(this.Imt(i,e))return this.mmt(s,i,e);if(this.Smt(i,e))return this.smt(t);this.isTabOffset(i)&&this.Vvt.cvt(e-32)}}return null}isTabOffset(t){return 23===t||31===t}Smt(t,i){return 20==(246&t)&&32==(240&i)}Mmt(t,i){return 16==(240&t)&&64==(192&i)}Tmt(t,i){return 17==(247&t)&&32==(240&i)}Nmt(t,i){return 16==(247&t)&&32==(240&i)||23==(247&t)&&45==(255&i)}Dmt(t,i){return 17==(247&t)&&48==(240&i)}Imt(t,i){return 18==(246&t)&&32==(224&i)}static Emt(t){return 16==(112&t)}constructor(t,i){this.J$=0,this.Zvt=new BG(t,i),this.Hvt=new BG(t,i),this.Xvt=new BG(t,i),this.Vvt=this.Hvt,this.Wvt=0,this.qvt=void 0,this.Gvt=!1}},WG={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47};!function(t){t[t.uB=0]="uB",t[t.bmt=1]="bmt",t[t.Lmt=2]="Lmt",t[t.kmt=3]="kmt",t[t.Au=4]="Au"}(RG||(RG={}));var VG=["black","green","blue","cyan","red","yellow","magenta","black"],HG=["white","green","blue","cyan","red","yellow","magenta","white_italics"];r(),r(),r();var qG,XG=class{svt(){return this.xmt}Cmt(){return this.Cvt}Omt(){return this.jvt}jmt(){return this.Rvt}zmt(){return this.Pvt}constructor(t,i,e,s,n){this.xmt=t,this.Cvt=i,this.jvt=e,this.Rvt=s,this.Pvt=n}},ZG=class{Pmt(t,i,e,s,n,r,h){this.vB=t,this.Bmt=i,this.Rmt=e,this.Umt=s,this.Qmt=n,this.Fmt=r,this.Ymt=h}Gmt(){this.Wmt=[];for(let t=0;t<JG;t++)this.Wmt.push(this.Vmt())}Vmt(){const t=[];for(let i=0;i<KG;i++)t.push(null);return t}Hmt(t){this.qmt()&&(this.Wmt[this.Mvt][this.Xmt]=new XG(t,this.Cvt,this.jvt,this.Rvt,this.Pvt),this.Xmt++)}Zmt(){this.qmt()&&(this.Xmt<=0&&this.Mvt<=0||(this.Xmt<=0?(this.Xmt=this.Ymt-1,this.Mvt--):this.Xmt--,this.Wmt[this.Mvt][this.Xmt]=null))}qmt(){const t=this.Mvt<this.Fmt&&this.Mvt>=0,i=this.Xmt<this.Ymt&&this.Xmt>=0;return t&&i}Kmt(){return this.vB}Jmt(t){let i=0;for(let e=t;e<JG;e++,i++)this.Wmt[i]=this.Wmt[e];for(let e=0;e<t;e++,i++)this.Wmt[i]=this.Vmt()}$mt(){if(this.Mvt+1>=this.Fmt)return this.Jmt(1),void(this.Xmt=0);this.Mvt++,this.Xmt=0}tpt(){this.Wmt[this.Mvt]=this.Vmt(),this.Xmt=0}wvt(t,i){if(this.$m>=t)return null;const e=OG.evt(this.Wmt,this.$m,t);return e?(this.ipt(t),{Qm:e,IG:"svc"+i,pvt:i}):null}ept(t,i){this.Mvt=t,this.Xmt=i}spt(t){this.Rvt=t}npt(t){this.Pvt=t}rpt(t){this.Cvt=t}hpt(t){this.jvt=t}opt(){this.Mvt=0,this.Xmt=0,this.Cvt=!1,this.jvt=!1,this.Pvt=jG,this.Rvt=Uh}apt(t){this.upt=t}cpt(){this.vB=!0}we(){this.vB=!1}ph(){this.vB=!this.vB}ipt(t){this.$m=t}constructor(t){this.lpt=t,this.vB=!1,this.Qmt=!1,this.Rmt=0,this.Bmt=0,this.Umt=0,this.Fmt=0,this.Ymt=0,this.upt=2,this.Wmt=[],this.$m=0,this.Mvt=0,this.Xmt=0,this.jvt=!1,this.Cvt=!1,this.Pvt=jG,this.Rvt=Uh,this.Gmt()}};!function(t){t[t.dpt=0]="dpt",t[t.fpt=1]="fpt",t[t._pt=2]="_pt",t[t.gpt=3]="gpt"}(qG||(qG={}));var KG=42,JG=15,$G=class{wpt(t){const i=t.Apt();let e=i.zy;const s=i.hmt;if(e===nW){e=e<<16|t.Apt().zy}return e>=0&&e<=31?this.vpt(e,s):e>=128&&e<=159?this.mpt(t,e,s):(e>=4096&&e<=4127?this.ppt(t,255&e):e>=4224&&e<=4255?this.ypt(t,255&e):e>=32&&e<=127?this.Mpt(e):e>=160&&e<=255?this.Tpt(e):e>=4128&&e<=4223?this.Npt(255&e):e>=4256&&e<=4351&&this.Dpt(255&e),null)}Mpt(t){this.Ipt&&(127!==t?this.Ipt.Hmt(String.fromCharCode(t)):this.Ipt.Hmt("\u266a"))}Tpt(t){this.Ipt&&this.Ipt.Hmt(String.fromCharCode(t))}Npt(t){if(!this.Ipt)return;if(void 0===rW[t])return void this.Ipt.Hmt("_");const i=rW[t];this.Ipt.Hmt(i)}Dpt(t){this.Ipt&&(160===t?this.Ipt.Hmt("[CC]"):this.Ipt.Hmt("_"))}vpt(t,i){if(!this.Ipt)return null;const e=this.Ipt;let s=null;switch(t){case tW:e.Zmt();break;case eW:e.Kmt()&&(s=e.wvt(i,this.Spt)),e.$mt();break;case sW:e.Kmt()&&(s=e.wvt(i,this.Spt)),e.tpt();break;case iW:e.Kmt()&&(s=e.wvt(i,this.Spt)),e.Gmt(),e.ept(0,0)}return s}mpt(t,i,e){if(i>=128&&i<=135){const t=7&i;this.Ept(t)}else{if(136===i){const i=t.Apt().zy;return this.bpt(i,e)}if(137===i){const i=t.Apt().zy;this.Lpt(i,e)}else{if(138===i){const i=t.Apt().zy;return this.kpt(i,e)}if(139===i){const i=t.Apt().zy;return this.xpt(i,e)}if(140===i){const i=t.Apt().zy;return this.Cpt(i,e)}if(143===i)return this.Gn(e);if(144===i)this.Opt(t);else if(145===i)this.jpt(t);else if(146===i)this.ept(t);else if(151===i)this.zpt(t);else if(i>=152&&i<=159){const s=(15&i)-8;this.Pmt(t,s,e)}}}return null}ppt(t,i){i>=8&&i<=15?t.uT(1):i>=16&&i<=23?t.uT(2):i>=24&&i<=31&&t.uT(3)}ypt(t,i){i>=128&&i<=135?t.uT(4):i>=136&&i<=143&&t.uT(5)}Ept(t){this.Ppt[t]&&(this.Ipt=this.Ppt[t])}*Bpt(t){for(let i=0;i<8;i++){1==(1&t)&&this.Ppt[i]&&(yield i),t>>=1}}bpt(t,i){let e=null;for(const s of this.Bpt(t)){const t=this.Ppt[s];t.Kmt()&&(e=t.wvt(i,this.Spt)),t.Gmt()}return e}Lpt(t,i){for(const e of this.Bpt(t)){const t=this.Ppt[e];t.Kmt()||t.ipt(i),t.cpt()}}kpt(t,i){let e=null;for(const s of this.Bpt(t)){const t=this.Ppt[s];t.Kmt()&&(e=t.wvt(i,this.Spt)),t.we()}return e}xpt(t,i){let e=null;for(const s of this.Bpt(t)){const t=this.Ppt[s];t.Kmt()?e=t.wvt(i,this.Spt):t.ipt(i),t.ph()}return e}Cpt(t,i){let e=null;for(const s of this.Bpt(t)){const t=this.Ppt[s];t.Kmt()&&(e=t.wvt(i,this.Spt)),this.Ppt[s]=void 0}return e}Gn(t){const i=this.Cpt(255,t);return this.tL(),i}tL(){this.Ipt=void 0,this.Ppt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}Opt(t){t.uT(1);const i=t.Apt().zy;if(!this.Ipt)return;const e=(128&i)>0,s=(64&i)>0;this.Ipt.hpt(e),this.Ipt.rpt(s)}jpt(t){const i=t.Apt().zy,e=t.Apt().zy;if(t.uT(1),!this.Ipt)return;const s=3&i,n=(12&i)>>2,r=(48&i)>>4,h=3&e,o=(12&e)>>2,a=(48&e)>>4,u=this.Rpt(r,n,s),c=this.Rpt(a,o,h);this.Ipt.npt(u),this.Ipt.spt(c)}ept(t){const i=t.Apt().zy,e=t.Apt().zy;if(!this.Ipt)return;const s=15&i,n=63&e;this.Ipt.ept(s,n)}zpt(t){t.uT(1),t.uT(1);const i=t.Apt().zy;if(t.uT(1),!this.Ipt)return;const e=3&i;this.Ipt.apt(e)}Pmt(t,i,e){const s=void 0!==this.Ppt[i];if(!s){const t=new ZG(i);t.ipt(e),this.Ppt[i]=t}const n=t.Apt().zy,r=t.Apt().zy,h=t.Apt().zy,o=t.Apt().zy,a=t.Apt().zy,u=t.Apt().zy,c=(32&n)>0,l=127&r,d=(128&r)>0,f=h,_=1+(15&o),g=(240&o)>>4,w=1+(63&a);s&&0===(7&u)||this.Ppt[i].opt(),this.Ppt[i].Pmt(c,l,f,g,d,_,w),this.Ipt=this.Ppt[i]}Rpt(t,i,e){const s={0:0,1:0,2:1,3:1};return hW[s[t]<<2|s[i]<<1|s[e]]}constructor(t){this.Spt=t,this.Ppt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.Ipt=void 0}},tW=8,iW=12,eW=13,sW=14,nW=16,rW={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},hW=["black","blue","green","cyan","red","magenta","yellow","white"];r();var oW=class{Upt(t){if(t.$w===Ft.mAt){const i=63&t.zy;return this.Qpt=2*i-1,void(this.Fpt=[])}if(this.Fpt&&(this.Qpt>0&&(this.Fpt.push(t),this.Qpt--),0===this.Qpt)){const t=new aW(this.Fpt);this.Ypt.push(t),this.Fpt=null,this.Qpt=0}}Gpt(){return this.Ypt}Wpt(){this.Ypt=[]}tL(){this.Ypt=[],this.Fpt=[],this.Qpt=0}constructor(){this.Ypt=[],this.Fpt=null,this.Qpt=0}},aW=class{Wrt(){return this.Vpt<this.Hpt.length}qpt(){return this.Vpt}Apt(){if(!this.Wrt())throw new Ri(ue.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.Hpt[this.Vpt++]}uT(t){if(this.Vpt+t>this.Hpt.length)throw new Ri(ue.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this.Vpt+=t}constructor(t){this.Vpt=0,this.Hpt=t}},uW=class{tL(){this.Xpt=0,this.Zpt=[],this.Kpt=[],this.Jpt.tL(),this.Gn(),this.$pt.forEach((t=>{t.tL()}))}Gn(){this.tyt=0,this.iyt=0,this.eyt.forEach((t=>{t.Gn()}))}syt(t,i){if(t.NAt){const e=t.DAt,s=t.IAt,n=t.$w;n===Ft.fAt||n===Ft._At?this.Zpt.push({hmt:i,$w:n,ymt:e,nmt:s,nyt:this.Zpt.length}):this.ryt&&(this.Kpt.push({hmt:i,$w:n,zy:e,nyt:this.Kpt.length}),this.Kpt.push({hmt:i,$w:Ft.AAt,zy:s,nyt:this.Kpt.length}))}}rF(){const t=[];this.Zpt.sort(((t,i)=>t.hmt-i.hmt||t.nyt-i.nyt)),this.Kpt.sort(((t,i)=>t.hmt-i.hmt||t.nyt-i.nyt));for(const i of this.Zpt){const e=this.hyt(i);e&&t.push(e)}for(const t of this.Kpt)this.Jpt.Upt(t);const i=this.Jpt.Gpt();for(const e of i){const i=this.oyt(e);t.push(...i)}return this.Jpt.Wpt(),this.Zpt=[],this.Kpt=[],t}hyt(t){const i=t.$w;if(GG.Emt(t.ymt)){const e=t.ymt>>3&1;0===i?this.tyt=e:this.iyt=e}const e="CC"+(i<<1|(i?this.iyt:this.tyt)+1),s=this.eyt.get(e);return 255===t.ymt&&255===t.nmt||!t.ymt&&!t.nmt||!this.ayt(t.ymt)||!this.ayt(t.nmt)?(++this.Xpt>=45&&this.Gn(),null):(this.Xpt=0,t.ymt&=127,t.nmt&=127,t.ymt||t.nmt?GG.Emt(t.ymt)?s.pmt(t):s.vmt(t.hmt,t.ymt,t.nmt):null)}oyt(t){const i=[];try{for(;t.Wrt();){const e=t.Apt().zy;let s=(224&e)>>5;const n=31&e;if(7===s&&0!==n){s=63&t.Apt().zy}if(0!==s){if(!this.$pt.has(s)){const t=new $G(s);this.$pt.set(s,t)}const e=this.$pt.get(s),r=t.qpt();for(;t.qpt()-r<n;){const s=e.wpt(t);s&&i.push(s)}}}}catch(t){if(!(t instanceof Ri&&t.code===ue.SUBTITLE_PARSE_ERROR))throw t}return i}ayt(t){let i=0;for(;t;)i^=1&t,t>>=1;return 1===i}constructor(){this.ryt=!1,this.Zpt=[],this.Kpt=[],this.Jpt=new oW,this.Xpt=0,this.eyt=G_({CC1:new GG(0,0),CC2:new GG(0,1),CC3:new GG(1,0),CC4:new GG(1,1)}),this.tyt=0,this.iyt=0,this.$pt=Kn(),this.Gn()}};r();var cW=class extends d{constructor(t,i){super("uyt"),this.pvt=t,this.Qm=i}},lW=So.Ey(.1),dW=class extends i{cyt(t,i){this.lyt.syt(t,i)}rF(){const t=this.lyt.rF();for(const i of t)this.jo(new cW(i.pvt,i.Qm))}Gn(){this.lyt.tL()}ln(){this.Uo(),this.lyt.tL()}constructor(){super(),this.lyt=new uW}},fW=class extends dW{dyt(t,i,e,s){const n=this.fyt(t,s);this._yt(n,i,e),this.rF()}fyt(t,i){const e=t.slice().sort(mO),s=this.gyt;if(0===s.length)return e;if(0===e.length)return s;let n;const r=s[0].B5,h=s[s.length-1].B5,o=e[0].B5,a=s[0].Jst===e[0].Jst;if(h.bp(o).Ip().Dp(So.Ey(2.5*i))&&a)n=s.concat(e).sort(mO);else if(o.yp(r)){let t=0;for(;t<s.length&&s[t].B5.Dp(o);)t++;let i=!1,r=!1;for(let n=t,h=0;n<s.length&&h<e.length;n++,h++)_W(s[n],e[h])?i=!0:r=!0;const h=i&&!r,a=i&&r;!i&&r?n=s.concat(e).sort(mO):h?n=s.slice(0,t).concat(e):(n=e,a&&this.Gn())}else n=e,this.Gn();return n}_yt(t,i,e){for(let s=0;s<t.length;s++){const n=t[s],r=n.B5.vp();if(!e&&i-r<lW.vp())return void(this.gyt=t.slice(s));this.cyt(n,r)}this.gyt=[]}constructor(...t){super(...t),this.gyt=[]}};function _W(t,i){return t.B5.hp(i.B5)&&t.$w===i.$w&&t.DAt===i.DAt&&t.IAt===i.IAt}var gW=class extends zt{wyt(t){return this.Ayt.get(t)}vyt(t){let i=this.Ayt.get(t.R5);return i||(i=this.myt(t),this.Ayt.set(t.R5,i)),i}myt(t){const i=[Ca.Fw],e=vG(t.U5);let s,n=e?e.v:"";t.pyt&&(n="easy "+n,i.push(Ca.Vw)),s=t.fh?"CC "+t.fh:n?"CC "+n:"CC"+t.R5;const r=this.ES.SS(ra.kI,s,s,t.U5,!1,jo.CEA608,void 0,i);return this.it(r),r}jdt(t){const i=Rs.ST(mo(t));this.yyt=function(t){for(const i of t.tt){const t=NG(i),e=i.ZT.oN.cN.dN._N;let s=xe(e,(t=>t.$w===At._M));if(!s){const t=e.filter((t=>t.$w===At.kM)),i=xe(t,(t=>{var i;return(null==(i=t.iD)?void 0:i.$w)===At._M}));i&&(s=i.iD)}if(!s)continue;const n=jL(mo(s.FN.JM),new Eo),r=s.GN;return qr({},t,{tN:i.pT.tN,FN:GA(s.FN.JM),Ti:s.Ti,Mi:s.Mi,dD:r&&r.dD,lD:r&&r.lD,qZ:n.IX,Myt:n.SX,XZ:n.EX,LX:n.LX[0],kX:n.kX[0]})}}(xe(i,DG))}sct(t,i,e,s,n,r){var h;if(!this.yyt)return;if(!M(this.Drt)&&go(this.Drt,i,1e-5))return;M(this.Tyt)||go(this.Tyt,i,.1)||this.Nyt.Gn();const o=function(t,i,e,s,n){const r=[],h=i.filter(yG),o=s(e);for(const i of h){const s=xe(i.tt,(t=>t.pT.tN===e.tN));if(!s)continue;const h=s.pT.gD||0,u=s.pT.wD||0;let c=s.ED?s.ED.ED:Gt.ZERO;var a;const l=i.yD+(null!=(a=s.pT.bD)?a:Gt.ZERO).toNumber();for(const a of s.SD){let s=l+(a.yD||0);for(const l of a.OD){const a=l.Xm||u,d=new PL;d.WX(t,s,s+a);const f=So.Cp(c,e.LAt);d.hI=n(l,i,e,f,kh(t,s,s+a)),r.push(d),s+=a,c=c.add(l.lt||h||o)}}}return r}(t,Rs.ST(mo(t)),this.yyt,pG,TG);var a;const u=null!=(a=null==(h=U_(o,(t=>t.hI.lt)))?void 0:h.hI.lt)?a:0,c=function(t){const i=[];for(const e of t)e.hI.BAt&&i.push(...e.hI.BAt),delete e.hI.BAt;for(let t=0;t<i.length;t+=1)i[t].MD=t;return i}(o),l=So.Ey(s),d=[];for(const t of c)d.push(qr({},t,{Jst:n,B5:t.MAt.gm(l)}));this.Nyt.dyt(d,e,r,u),this.Drt=i,this.Tyt=e}Gn(){return this.Nyt.Gn(),this.Ayt.forEach((t=>{t.ln(),this.st(t),this.ES.jS(t)})),this.Ayt.clear(),this.yyt=void 0,this.Drt=NaN,this.Tyt=NaN,super.Gn()}ln(){return this.Nyt.hn("uyt",this.Dyt),this.Nyt.ln(),super.ln()}constructor(t){super(),this.yyt=void 0,this.Drt=NaN,this.Tyt=NaN,this.Dyt=t=>{const i=this.vyt({R5:t.pvt,U5:""}),e=t.Qm;for(const t of i.H.Nw)e.Fm<t.Fm&&e.Ym>t.Fm?e.Ym=t.Fm:e.Fm>t.Fm&&t.Ym>e.Fm?t.Ym=e.Fm:e.Fm===t.Fm&&(e.Ym=t.Ym);i.CS(e)},this.ES=t,this.Ayt=Kn(),this.Nyt=new fW,this.Nyt.dn("uyt",this.Dyt)}};r(),r();var wW=/(.*)=(.*)/,AW=/(.*):(.*)/;function vW(t){if(!t)return[];const i=[],e=t.trim().split(";");for(const t of e){const e=t.match(wW);if(e){const[,t,s]=e;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(AW)){const[,i,e]=t.match(AW);switch(i){case"lang":n=e;break;case"er":r=Boolean(Number(e))}}i.push({R5:Number(t),U5:n,pyt:r})}}return i}var mW={1:1,2:3,3:2,4:4},pW="urn:scte:dash:cc:cea-608:2015",yW="urn:scte:dash:cc:cea-708:2015";r(),r();var MW=class extends Js{Qh(){return new TW(this.Jst&&this.Jst.so)}constructor(t,i,e){super(ia.pw),this.Jst=t,this.ngt=i,this.Iyt=e}},TW=class extends d{constructor(t){super("activequalitychanged"),this.quality=t}},NW=[t.wh,Dt._w,t.XA],DW=class extends i{Syt(t){const i=this.zwt.jft;for(const e of i.Ht.rst)if(i.Dgt.ygt(t,e))return e}ln(){this.Uo(),this.eP.hn(NW,this.Eyt)}constructor(t,i){super(),this.Eyt=t=>{const i=this.Syt(t.currentTime)||this.zwt.Lft;if(i&&this.byt!==i){const t=this.byt;this.byt=i,i.Jst&&this.jo(new MW(i.Jst,null==i?void 0:i.so,null==t?void 0:t.so))}},this.eP=t,this.eP.dn(NW,this.Eyt),this.zwt=i}},IW=class extends i{get Vot(){return this.Hot}get u(){return this.ym}get aJ(){return this.uJ}get rt(){return this.Lyt}get Eet(){return function(t){const i=29.97,e=1024,s=44100;return t===Zt.Gv?s/e:i}(this.uJ)}get Pwt(){return 1/this.Eet}get Ot(){return Boolean(this.Hot&&this.Hot.Ot)}get YH(){const t=this.zwt?this.zwt.jft.YH.vgt:re.ZB();return this.kyt().xB(t)}get p_(){let t=this.xyt();const i=this.Cyt;return void 0!==i&&t.IB().ur(i)&&(t=t.xB(re.qB(i))),t}get fgt(){return WF(this.xyt(),this.YH.xB(this.Oyt)).kB(2*this.Pwt)}get Oyt(){const t=this.Cyt;if(t&&isFinite(t)){const i=this.jyt.wn;if(isFinite(i)&&t<i)return new re([t,i],[!1,!0])}return re.ZB()}get cg(){const t=this.Hot;if(!t)return re.qB(0);const i=t.Fst.Ant,e=t.Fst.wnt;if(void 0===e||void 0===i)return re.qB(0);const s=e;let n=i>=t.Fst.Kst.wn?S.max(i,this.wn):i;return n=S.max(s,n),re.XB(s,n).IB()}get iP(){return this.fgt.VB(this.I_)}get Agt(){return this.jyt.Agt}get I_(){return this.eP.I_}get yn(){return this.eat?this.eat.Kst.yn:NaN}get wn(){const t=this.zyt(),i=this.Cyt;return void 0===t?NaN:void 0!==i?i:t}zyt(){var t;return null==(t=this.eat)?void 0:t.Kst.wn}get Mi(){return this.jyt.Mi}get Ti(){return this.jyt.Ti}get $wt(){return this.Cyt}Wft(){return void 0!==this.zwt&&this.zwt.Wft}wgt(){if(void 0===this.Cyt)return!1;const t=this.xyt().IB(),i=t.jB(this.Cyt);return!(i<0)&&t.yn(i)!==this.Cyt}hJ(){const t=this.jyt.Agt,i=this.xyt().bn(t);this.Cyt=i.L>0?i.wn(i.L-1):0;const e=t.wn(0);isFinite(e)&&this.Cyt<e&&this.WH(this.Cyt,e),this.Xwt()}async sct(t,i,e,s){const n=e.met.Zy,r=this.Pyt(t,i,e,n,s),h=this.Byt(t,i,e,n,s),[o]=await Nc([h,r]);return o}async Pyt(t,i,e,s,n){if(!er(e.nY))return;let r;if(t.$w===nL.iS){const i=t.JM.O_t(),e=await i.jj(n);r=new A(e)}else r=new A(t.JM.cft);const h=[];if(void 0!==this.pdt&&(this.pdt.sct(r,i.Fm,s),h.push(this.pdt)),void 0!==this.Ryt){const t=e.lnt(i);this.Ryt.sct(r,i.Fm,i.Ym,s,e.Jst,t),h.push(this.Ryt)}Jm(this.p_,h)}jdt(t,i,e){return Pi(e),this.Ryt&&this.Ryt.jdt(new A(t.cft)),Promise.resolve()}En(t,i){const e=new Z_;i&&e.e_(i),this.OS.i_(),this.OS=e;const s=this.Uyt(t,this.sAt,e.$f);return this.sAt=s,s}Qyt(t){if(ks(this.fdt,jo.CEA608))return;const i=t.Fst.Het;if(function(t){return t.some((t=>t.iet===pW||t.iet===yW))}(i)){this.Ryt=new gW(this.ES);const t=function(t){const i=[];for(const e of t)if(e.iet===pW){const t=yO(e.zy);for(const e of t)i.push(e)}else if(e.iet===yW){const t=vW(e.zy);for(const e of t)if(e.R5<=4){const t=mW[e.R5];i.push(qr({},e,{R5:t}))}}return i}(i);for(const i of t)this.Ryt.vyt(i);this.Lyt.Gz(this.Ryt.tt)}}async Uyt(t,i,e){Pi(e),i&&await i.catch(h),this.Hot===t&&this.Fyt||(await this.Yyt(),Pi(e),await this.Gyt(),Pi(e),t&&await this.bS(t))}async Yyt(){const t=this.Hot;this.Hot=void 0,this.Fyt=!1,this.Cyt=void 0,this.eat=void 0,t&&(t.hn(ia.Mw,this.Wyt),t.dat(!1),t.hn(ia.NO_QUALITY,this.Ds)),this.Vyt&&(this.Vyt.ln(),this.Vyt=void 0),this.zwt&&(await this.zwt.ln(),this.zwt=void 0),this.Ryt&&(this.Lyt.qz(this.Ryt.tt),await this.Ryt.ln())}async bS(t){this.Hot=t,this.eat=t.iat,this.Qyt(t),t.dn(ia.Mw,this.Wyt),t.dn(ia.NO_QUALITY,this.Ds),await this.Hyt(t),this.zwt=this.qyt(t),this.zwt.dn(oG,this.Ds),this.zwt.dn("Mft",this.Xwt),this.zwt.Pft=t.oat,this.Vyt=new DW(this.eP,this.zwt),this.Vyt.dn(ia.pw,this.$ot),t.dat(!0),this.Fyt=!0}async Gn(t){this.OS.i_(),this.sAt&&(await this.sAt.catch(h),this.sAt=void 0),await this.Yyt(),t||await this.Gyt(),await this.Xyt()}async Zyt(){await this.Yyt()}Kyt(t){this.zwt&&this.Hot&&this.Hot===t.Ht&&(this.zwt.Pft=this.Hot.oat)}async Nct(t){this.zwt&&await this.zwt.Nct(t)}async Pct(t){this.zwt&&await this.zwt.Pct(t)}$W(){const t=this.p_.HB;return this.hR.$W(t)}async ln(t){this.Uo();try{await this.Gn(t),await this.Zyt()}catch(t){}}constructor(t,i,e,s,n,r,h,o,a,u,c){super(),this.eat=void 0,this.Hot=void 0,this.zwt=void 0,this.Fyt=!1,this.OS=new Z_,this.sAt=void 0,this.Cyt=void 0,this.Ryt=void 0,this.Lyt=new Fe([]),this.Xwt=()=>{!this.Wft()&&this.wgt()&&this.jyt.Xwt()},this.$ot=t=>{this.Hot.$ot(t),this.jo(new cG(t.ngt,t.Iyt))},this.Wyt=t=>{this.Kyt(t)},this.ym=function(){const t=aG;return aG+=1,t}(),this.uJ=t,this.LS=s,this.hR=n,this.jyt=i,this.eP=e,this.Eut=r,this.ES=h,this.pdt=o,this.wut=a,this.hut=a?Mw(t,a):void 0,this.Tut=u,this.fdt=c}};function SW(t,i,e){const s=new lh(mo(t),new Eo),n=vt.vT(s,At.iM);if(!n)return;const r=vt.dT(n.JM),h=xe(r,(t=>t.$w===At.sM)),o=xe(r,(t=>t.$w===At.UM));if(!h)return;const a=vt.vT(h.JM,At.rM);if(!a)return;const u=vt.vT(a.JM,At.aM);if(!u)return;const c=vt.vT(u.JM,At.uM);if(!c)return;const l=vt.dT(c.JM),d=xe(l,(t=>t.$w===At.cM));if(!d)return;const f=vt.NT(d.JM,At.cM,!1),_=new lh(mo(f.JM),new Eo);_.uT(4);const g=vt.dT(_),w=[];for(const t of g){if(t.$w===At.LM||t.$w===At.kM)return;t.$w===At._M?w.push({Jyt:t,$yt:At.kM}):t.$w===At.DM&&w.push({Jyt:t,$yt:At.LM})}if(!function(t,i){return void 0===t&&void 0!==i&&i.length>0}(o,i)&&0===w.length)return;let v=nt(t);const m=xe(r,(t=>t.$w===At.dM)),p=m?vt.vT(m.JM,At.fM):void 0,y=p?function(t){const i=t.JM.Lm();return i.uT(4),i.uT(4),i.eT()}(p):1,M=xe(l,(t=>t.$w===At.lM));M&&function(t,i,e){const s=LW(mo(t),i),n=vt.AT(s,new Eo),r=n.JM;r.uT(4);const h=r.eT();for(let t=0;t<h;t++){r.uT(4),r.uT(4);const t=r.$M.Lm(),i=r.eT();EA(r.JM,t,i+e)}}(v,M,w.length),p&&function(t,i,e){const s=LW(mo(t),i),n=vt.AT(s,new Eo),r=n.JM;r.uT(4),r.uT(4),EA(r.JM,r.$M,e)}(v,p,1),v=function(t,i,e,s){if(e||!s)return t;let n=t;for(const t of s)n=EW(n,i,new A(t));return n}(v,n,o,i);const T=[n,h,a,u,c,d];for(let t=w.length-1;t>=0;t--){const i=w[t];v=bW(v,i.Jyt,d,T,i.$yt,e)}return{tMt:v,iMt:{eMt:w.length,_D:y}}}function EW(t,i,e){const s=$w(t,e,i.JM.JM.byteOffset+i.JM.JM.byteLength);return kW(LW(mo(s),i),e.byteLength),s}function bW(t,i,e,s,n,r){const h=function(t,i,e){0;const s=t.JM.JM,n=zW(),r=new A(s.byteLength+n.byteLength),h=mo(r);r.set(it(s),0),kW(h,n.byteLength),CA(h,new Eo(RW),i),r.set(n,s.byteLength),CA(h,new Eo(s.byteLength+PW),t.$w),e&&vn(h,new Eo(s.byteLength+BW),e);return r}(i,n,r),o=$w(t,h,i.JM.JM.byteOffset),a=mo(o);!function(t,i){const e=vt.AT(t,new Eo),s=vt.NT(e.JM,At.cM,!1),n=mo(s.JM),r=n.getUint32(0);n.setUint32(0,r+i)}(LW(a,e),1);for(const t of s)kW(LW(a,t),h.byteLength);return o}function LW(t,i){const e=i.JM.JM.byteOffset;return nn(t,e,e+i.JM.JM.byteLength)}function kW(t,i){const e=new Eo,s=dt(t,e);if(0===s);else if(1===s){e.Sm(4);const s=Ye(t,e.Lm());bA(t,e,s.add(i))}else e.Em(0),EA(t,e,s+i)}r();var xW=class extends dL{start(t){this.qV=t}transform(t){this.vq(t),this.sMt()}flush(){this.pq(),this.sMt()}Eq(t){return t===At.xM}Lq(t){let i=nt(it(t.JM.JM));const e=vt.AT(mo(i),new Eo);i=CW(i,e,this.nMt),this.rMt.push(i)}xq(t){this.rMt.push(t)}sMt(){for(const t of function(t){if(t.length<2)return t;const i=[];let{buffer:e,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const h=t[r];e===h.buffer&&s+n===h.byteOffset?n+=h.byteLength:(i.push(new A(e,s,n)),({buffer:e,byteOffset:s,byteLength:n}=h))}return i.push(new A(e,s,n)),i}(this.rMt))this.qV.enqueue(t);sr(this.rMt)}constructor(t){super(),this.rMt=[],this.nMt=t}};function CW(t,i,e){let s=t;const n=vt.dT(i.JM);for(let t=n.length-1;t>=0;t--){const r=n[t];r.$w===At.OM&&(s=OW(s,r,i,e))}return s}function OW(t,i,e,s){const n=LW(mo(t),i),r=vt.AT(n,new Eo),h=vt.dT(r.JM),o=xe(h,(t=>t.$w===At.jM));if(!o)return t;const a=o.JM,u=a.$M.Lm(),c=a.eT(),{flags:l}=Xa(c);a.uT(4),l.Cm(ut.BASE_DATA_OFFSET_PRESENT)&&a.uT(8);const d=a.$M.Lm();if(l.Cm(ut.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const i=dt(a.JM,d);return EA(a.JM,a.$M,i+s.eMt),t}{EA(a.JM,u,c|ut.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new A(4);mo(n).setUint32(0,s._D+s.eMt);const r=a.JM.byteOffset+d.Lu;for(const t of h.filter((t=>t.$w===At.zM)))jW(t,n.byteLength);for(const s of[o,i,e])kW(LW(mo(t),s),n.byteLength);return $w(t,n,r)}}function jW(t,i){const e=t.JM,s=e.eT(),{flags:n}=Xa(s);if(e.uT(4),n.Cm(Ge.DATA_OFFSET_PRESENT)){const t=e.Lm().eT();EA(e.JM,e.$M,t+i)}}var zW=$_((()=>new A([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),PW=16,BW=64,RW=4,UW=class extends IW{xyt(){return this.kwt?this.kwt.p_:re.ZB()}kyt(){return this.kwt?this.kwt.cJ:re.ZB()}get rst(){return this.eat?this.eat.rst:[]}get Ti(){return this.jyt.Ti}async Byt(t,i,e,s,n){var r;let h;if(Pi(n),t.$w===nL.iS){let i=t.JM.IG;this.hMt&&(i=function(t,i){return t.pipeThrough(new Eh(new xW(i)))}(i,this.hMt)),h={$w:nL.iS,JM:i}}else{let i=new A(t.JM.cft);this.hMt&&(i=function(t,i){let e=nt(t);const s=new lh(mo(e),new Eo),n=vt.dT(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.$w===At.xM&&(e=CW(e,s,i))}return e}(i,this.hMt)),h={$w:nL._H,JM:i}}const o={n8:i.Fm,lt:i.lt,Zy:s,XZ:null==(r=e.Jst)?void 0:r.Bw},a=this.kwt.p_;await this.oMt(),await this.kwt.mK(h,o,n);return function(t,i,e,s){let n,r,h=i.OB(t.IB());return h=h.OB(e.OB(i)),0===h.L?(n=s.Ym,r=n):(n=h.yn(0),r=h.wn(0)),{Mwt:n,Twt:r}}(a,this.kwt.p_,this.kwt.cJ,i)}async jdt(t,i,e){var s;await super.jdt(t,i,e);let n=new A(t.cft);if(this.aMt(i)){const t=this.jyt.zlt;let i,e=[];t&&(e=Cs(t.Qut,(t=>t.Qz)),i=t.Rut.YO?hE(t.Rut.YO):void 0);const s=SW(n,e,i);s?(this.hMt=s.iMt,n=s.tMt):this.hMt=void 0}const r={$w:nL._H,JM:n};await this.oMt(),await this.kwt.MK(r,{XZ:null==(s=i.Jst)?void 0:s.Bw},e)}iwt(t,i,e){return this.kwt.wm(t,i,e)}WH(t,i){this.kwt.fJ(t,i)}VH(t,i){this.kwt._J(t,i)}async Hyt(t){var i;const e=iF.yut(null!=(i=t.oat)?i:t.rst,this.hut).nY;this.kwt||(this.kwt=await this.jyt.uMt(e),this.kwt.dn(vl.dH,this.Ds),this.vut=new tG(this.kwt)),await this.oMt()}Kyt(t){const i=t.Ht.oat;if(void 0===i)return super.Kyt(t);if(i.some((t=>this.vut.mH(t))))return super.Kyt(t);this.jo(new d("Alt"))}Xyt(){return this.kwt&&(this.kwt.hn(vl.dH,this.Ds),this.kwt=void 0),Promise.resolve()}Gyt(){return this.kwt?this.kwt.wm(0,1/0):Promise.resolve()}qyt(t){return new JY(this,this.eP,this.eP,this.LS,this.hR,this.bwt,this.Eut,this.wut,this.hut,this.vut,this.Tut).h8(t)}oMt(){const t=this.jyt.Agt,i=S.max(0,t.yn(0)-.1),e=t.wn(0)+.01;return this.kwt.PK(i,e)}aMt(t){if(!er(t.nY))return!1;if(this.jyt.G1)return!0;return void 0!==this.jyt.zlt}constructor(t,i,e,s,n,r,h,o,a,u,c,l){super(t,i,e,s,n,h,o,a,u,c,l),this.kwt=void 0,this.vut=new iG,this.hMt=void 0,this.bwt=r}},QW=class extends hG{get Ti(){return this.ru.Ti}get Mi(){return this.ru.Mi}get lt(){return this.eP.lt}get G1(){return this.eP.G1}YW(t,i){for(const t of i){const i=t.iat;ks(this.Iht,i)||this.Iht.push(i)}return super.YW(t,i)}async yH(t,i,e){this.YK!==e&&(this.YK=e,await this.Jwt(!1)),await super.cAt(t,i)}aAt(t){return new UW(t,this,this.eP,this.LS,this.hR,this.bwt,this.Eut,this.ES,this.pdt,this.Nlt,this.Tut,this.fdt)}uAt(){}uMt(t){if(Lt(t,"audio")){if(this.YK.KJ)return Promise.resolve(this.YK.KJ)}else if(Lt(t,"video")&&this.YK.JJ)return Promise.resolve(this.YK.JJ);throw new k("Cannot allocate source buffer for mime type "+t)}ln(i){return sr(this.Iht),this.eP.hn(t.KA,this.lAt),super.ln(i)}constructor(i,e,s,n,r,h,o,a,u,c,l,d,f){super(s,n,r,i,h,o,a,c,d,f),this.Iht=[],this.ru=u,this.YK=e,this.bwt=h.lowLatency,this.pdt=l,this.Nlt=h.abr,this.eP.dn(t.KA,this.lAt)}},FW=class extends BF{fct(t,i,e,s,n,r){const h=this.eP,o=this.uP;return new QW(h,o,t,i,e,s,n,r,this.cMt,h,this.pdt,this.Tut,this.fdt)}zct(t,i,e){return t.yH(i,e,this.uP)}bct(t){return!!this.uP&&this.uP.mH(t)}async $J(t){this.uP=await this.eP.En(t),this.lMt(),this.dMt(),this.uP.r$(this.lt)}async Uct(){this.fMt=this.Zct,this.uP&&(await this.eP.Gn(),this.uP=void 0)}hJ(){this.uP.hJ()}ZK(){const t=this.lt;this.uP.lt<t&&this.uP.r$(t),this.uP.ZK()}async Vlt(t){const i=this.uP,e=[];i.KJ&&e.push(fk(i.KJ,t)),i.JJ&&e.push(fk(i.JJ,t)),await Promise.all(e)}Oct(t){return this.uP.yH(t)}Plt(){return!0}get ilt(){return this.eP.V_}b4(){return this.eP.Bg()}$lt(){this.eP.Pg()}get q_(){return this.eP.q_}set q_(t){this.eP.q_=t}get elt(){return this.eP.K_}ye(){super.ye(),this.eP.ye()}we(){super.we(),this.eP.we()}get rt(){return this.Tl}get Q_(){return this.eP.Q_}set Q_(t){this.eP.Q_=t}get Mg(){return this.eP.Mg}set Mg(t){this.eP.Mg=et(t,0,1)}Mlt(t){for(const i of t)i.src&&this.NP.IS(i);Fi(this.NP.tt)}async udt(i,e,s,n){for(this.eP.Em(i,e,s);this.ult||this.T$;)await this.eP.w_([t.FA,t.kA],n)}get ult(){return this.eP.fg}get T$(){return this.eP.T$}get Zct(){return function(t,i){return{Jv:t.Jv+i.Jv,$v:t.$v+i.$v,tm:t.tm+i.tm}}(this.fMt,this.eP.U_())}lMt(){const t=this.uP;t&&(t.JJ&&(t.JJ.BW=this.hR.qW),t.KJ&&(t.KJ.BW=this.hR.qW))}dMt(){const t=this.uP;t&&(t.JJ&&(t.JJ.FW=this.hR.FW),t.KJ&&(t.KJ.FW=this.hR.FW))}Zh(t,i,e){return this.mP.Bz(t.contentProtection),super.Zh(t,i,e)}determineStallJumpTarget(){if(this.Tct)return this.Tct.xlt()&&this.I_>this.Tct.wn-uk&&!this.Tct.Vct?this.Tct.wn:void 0}async Gn(){await super.Gn(),this.fMt={Jv:0,$v:0,tm:0},await this.NP.Gn(),this.eP.DP()}async ln(){await super.ln(),await this.NP.ln(),this.Tl.ln(),this.hR.hn("PW",this._Mt),this.hR.hn("QW",this.gMt),this.eP.hn(be.ha,this.wMt),this.eP.hn([t.vA,t.AA],this.Ds),this.eP.bP=void 0,this.eP.n3=void 0}constructor(i,e,s,n,r,h){super(i,e,s,n,r),this.uP=void 0,this.fMt={Jv:0,$v:0,tm:0},this.wMt=t=>{this.HP(No(t.dt))},this._Mt=()=>{this.lMt()},this.gMt=()=>{this.dMt()},this.eP.dn(be.ha,this.wMt),this.hR.dn("PW",this._Mt),this.hR.dn("QW",this.gMt),this.cMt=h,this.NP=new Ma(this.eP,this.LS),this.Tl.Gz(this.NP.tt),this.mP=new sI(i),this.eP.bP=this.mP,this.eP.n3=this,this.eP.dn([t.vA,t.AA],this.Ds)}};function YW(t){const i=li.OE||li.LE,e=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some((t=>"ac-3"===t||"ec-3"===t)),s=i&&!e,n=new hr(!0);return async t=>{const i=t._P;if(!n.i$(i)&&!function(t,i){return!!t&&(er(t)?Ym(i)||Wm(i):Ji(t,el.APPLICATION_TTML_XML)||Ji(t,el.TEXT_VTT)||Ji(t,el.IMAGE_JPEG))}(t.nY,t.Tet))return!1;const e=t.Tet.some((t=>"ac-3"===t||"ec-3"===t));if(s&&e)return!1;if(t.Det){const e=t.Det,s=Cs(e,(t=>Up(t.iet))).filter(oe),n=await async function(t,i){for(const e of t)if(await i(e))return!0;return!1}(s,(t=>le.$x(t,i)));if(!n)return!1}return!0}}r(),r();var GW=class{get Mi(){return this.AMt.offsetHeight*le.Ks.A4}get Ti(){return this.AMt.offsetWidth*le.Ks.A4}constructor(t){this.AMt=t}};r();var Rh=class{get rt(){return this.Tl}SS(t,i,e,s,n,r,h,o){const a=new gn(t,i,e,s,n,r,h,void 0,o);return this.Tl.it(a),this.s2.it(a),a}jS(t){this.Tl.st(t),this.s2.st(t),t.ln()}Gn(){for(const t of this.Tl.Nw.slice())t.ln();this.Tl.Gn(),this.s2.Gn()}ln(){this.Gn(),this.Tl.ln(),this.s2.ln()}constructor(t,i){this.Tl=new Or,this.s2=new mt(t,i)}};r(),r();var Li=class{qP(t){return this.Rz.qP(t)}Ytt(t){return this.Rz.Ytt(t)}LP(t){return this.Rz.LP(t)}constructor(t){this.Rz=t}};r(),r(),r();var Wh=class extends i{get vMt(){return this.eP}get p_(){return this.y_()}y_(){return this.eP.p_}get M_(){return this.T_()}T_(){return this.eP.M_}get I_(){return this.S_()}S_(){return this.eP.I_}get Su(){return this.eP.Su}get lt(){return this.yd()}yd(){return this.eP.lt}get cP(){return this.mMt()}mMt(){return this.eP.cP}get L_(){return this.pMt()}pMt(){return this.eP.L_}get dt(){return this.eP.dt}get Mi(){return this.eP.Mi}get Ti(){return this.eP.Ti}get fa(){return this.xg()}xg(){return this.eP.fa}get Q_(){return this.eP.Q_}set Q_(t){this.eP.Q_=t}get V_(){return this.yMt()}yMt(){return this.eP.V_}get q_(){return this.eP.q_}set q_(t){this.eP.q_=t}get K_(){return this.J_()}J_(){return this.eP.K_}get og(){return this.ag()}ag(){return this.eP.og}get cg(){return this.dg()}dg(){return this.eP.cg}get fg(){return this._g()}_g(){return this.eP.fg}get T$(){return this.MMt()}MMt(){return this.eP.T$}get rt(){return this.gg()}gg(){return this.TMt}get Il(){return this.I3()}I3(){return this.eP.Il}get N4(){return this.eP.N4}get Mg(){return this.eP.Mg}set Mg(t){this.eP.Mg=t}get t3(){return this.eP.t3}get P_(){return this.eP.P_}get i4(){return this.eP.i4}get bP(){return this.NMt()}set bP(t){this.DMt(t)}NMt(){return this.eP.bP}DMt(t){this.eP.bP=t}get n3(){return this.eP.n3}set n3(t){this.IMt(t)}IMt(t){this.eP.n3=t}get G1(){return this.SMt()}SMt(){return this.eP.G1}U_(){return this.eP.U_()}Bg(){return this.eP.Bg()}Pg(){this.eP.Pg()}Em(t,i,e){this.eP.Em(t,i,e)}sP(t){this.eP.sP(t)}ye(){this.eP.ye()}we(){this.eP.we()}SS(t,i,e,s,n,r,h,o){return this.eP.SS(t,i,e,s,n,r,h,o)}yP(){return this.eP.yP()}TP(t,i,e,s,n){return this.eP.TP(t,i,e,s,n)}jS(t){this.eP.jS(t)}DP(){this.eP.DP()}RH(t){return this.eP.RH(t)}async En(t){const i=await this.eP.En(t);let e;return e=t.$w===si.$C?this.EMt(i):this.bMt(i),this.uP=e,e}async Gn(){this.uP&&(await this.uP.Hf(),this.uP=void 0),await this.eP.Gn()}K2(){this.eP.K2()}J2(){this.eP.J2()}async Hf(){this.Uo(),this.eP.hn(iL,this.LMt),this.TMt.Ew=void 0,this.TMt.ln(),this.uP&&(await this.uP.Hf(),this.uP=void 0)}e3(){this.eP.e3()}kMt(t){this.eP.hn(iL,this.LMt),this.eP=t,this.TMt.Ew=t.rt,this.eP.dn(iL,this.LMt)}Wg(t){this.jo(t)}constructor(t){super(),this.uP=void 0,this.TMt=new Vc,this.LMt=t=>this.Wg(t),this.eP=t,this.TMt.Ew=t.rt,this.eP.dn(iL,this.LMt)}},WW=class extends Wh{get oP(){return this.eP.oP}get L$(){return this.eP.L$}get Sg(){return this.eP.Sg}set Sg(t){this.eP.Sg=t}s3(t){this.eP.s3(t)}a4(){this.eP.a4()}Yg(){this.eP.Yg()}constructor(t){super(t)}};r(),r(),r();var VW=class{get dd(){return this.Vx()}Vx(){return this.uP.dd}get cg(){return this.dg()}dg(){return this.uP.cg}get ht(){return this.uP.ht}mH(t){return this.uP.mH(t)}yH(t){return this.uP.yH(t)}Hf(){return Promise.resolve()}constructor(t){this.uP=t}},HW=class extends VW{get KJ(){return this.e$}get JJ(){return this.s$}get p_(){return this.y_()}y_(){return this.uP.p_}get lt(){return this.yd()}yd(){return this.uP.lt}get zH(){return this.xMt()}xMt(){return this.uP.zH}r$(t){this.uP.r$(t)}u$(t,i,e,s){this.uP.u$(t,i,e,s)}hJ(){this.uP.hJ()}ZK(){this.uP.ZK()}Hf(){return this.e$&&(this.e$.Hf(),this.e$=void 0),this.s$&&(this.s$.Hf(),this.s$=void 0),super.Hf()}CMt(t){this.uP=t,this.e$?t.KJ?this.e$.OMt(t.KJ):(this.e$.Hf(),this.e$=void 0):t.KJ&&(this.e$=this.jMt(t.KJ),this.e$.dn(zs,this.zMt)),this.s$?t.JJ?this.s$.OMt(t.JJ):(this.s$.Hf(),this.s$=void 0):t.JJ&&(this.s$=this.jMt(t.JJ),this.s$.dn(zs,this.zMt))}PMt(t){}constructor(t){super(t),this.e$=void 0,this.s$=void 0,this.zMt=t=>this.PMt(t)}};r(),r(),r();var qW=class extends i{get FW(){return this.ZW}set FW(t){this.ZW=t}get p_(){return re.ZB()}get dd(){return this.mC}get aJ(){return Zt.Hv}get cJ(){return re.ZB()}get BMt(){return!1}get BW(){return this.HW}set BW(t){this.HW=t}mK(t,i,e){return Promise.reject(new k("Invalid media buffer"))}gJ(){return Promise.reject(new k("Invalid media buffer"))}MK(t,i,e){return Promise.reject(new k("Invalid media buffer"))}zH(){return!1}hJ(){}fJ(t,i){}_J(t,i){}wm(t,i,e){return Promise.resolve()}PK(t,i){return Promise.reject(new k("Invalid media buffer"))}Dm(t,i){return Promise.reject(new k("Invalid media buffer"))}mH(t){return!1}yH(t){return Promise.reject(new k("Invalid media buffer"))}Hf(){this.Uo()}constructor(t){super(),this.HW=0,this.ZW=0,this.mC=t}},ht=class extends i{get FW(){return this.RMt()}set FW(t){this.UMt(t)}RMt(){return this.kwt.FW}UMt(t){this.kwt.FW=t}get p_(){return this.y_()}y_(){return this.kwt.p_}get dd(){return this.Vx()}Vx(){return this.kwt.dd}get aJ(){return this.kwt.aJ}get cJ(){return this.QMt()}QMt(){return this.kwt.cJ}get BW(){return this.FMt()}set BW(t){this.YMt(t)}FMt(){return this.kwt.BW}YMt(t){this.kwt.BW=t}mK(t,i,e){return this.kwt.mK(t,i,e)}gJ(){return this.kwt.gJ()}MK(t,i,e){return this.kwt.MK(t,i,e)}zH(){return this.kwt.zH()}hJ(){this.kwt.hJ()}fJ(t,i){this.kwt.fJ(t,i)}_J(t,i){this.kwt._J(t,i)}wm(t,i,e){return this.kwt.wm(t,i,e)}PK(t,i){return this.kwt.PK(t,i)}mH(t){return this.kwt.mH(t)}yH(t){return this.kwt.yH(t)}Wg(t){this.jo(t)}Hf(){this.Uo(),this.OMt(new qW(this.dd))}OMt(t){this.kwt.hn(zs,this.GMt),this.kwt=t,this.kwt.dn(zs,this.GMt)}constructor(t){super(),this.GMt=t=>this.Wg(t),this.kwt=t,this.kwt.dn(zs,this.GMt)}},XW=class extends ht{get Utt(){return this.eP}set Utt(t){this.eP=t}async mK(t,i,e){return Pi(e),await this.Bwt(this.eP.I_,null==i?void 0:i.n8,null==i?void 0:i.lt),Pi(e),t.$w===nL.iS?await this.WMt(t,i,e):await this.VMt(t,i,e)}async WMt(t,i,e){let s=t;for(;;){const[t,n]=GE(s.JM);s={$w:nL.iS,JM:t};try{return await this.HMt(s,i,e),void n.cancel(new Eu).catch(h)}catch(t){if(Mb(t)){if(await this.Bwt(this.eP.I_,i.n8,i.lt,e)){s={$w:nL.iS,JM:n};continue}}throw n.cancel(t).catch(h),t}}}async VMt(t,i,e){for(;;)try{return Pi(e),await this.HMt(t,i,e)}catch(t){if(Mb(t)){if(await this.Bwt(this.eP.I_,i.n8,i.lt,e))continue}throw t}}async Bwt(t,i,e,s){const n=yb(t,i,e,this.p_,this.BW,this.FW);for(const[t,i]of n)await this.qMt(t,i,s);return n.length>0}HMt(t,i,e){return super.mK(t,i,e)}qMt(t,i,e){return super.wm(t,i,e)}constructor(t){super(t),this.eP=void 0}},ZW=class extends HW{get Utt(){return this.eP}set Utt(t){this.eP=t,this.e$&&(this.e$.Utt=t),this.s$&&(this.s$.Utt=t)}jMt(t){const i=new XW(t);return i.Utt=this.eP,i}constructor(t){super(t),this.eP=void 0,this.CMt(t)}};r();var ki=class extends VW{get eg(){return this.uP.eg}set eg(t){this.uP.eg=t}};r();var ur=class extends Wh{get oP(){return this.eP.oP}get L$(){return this.eP.L$}get pg(){return this.eP.pg}get wg(){return this.eP.wg}get Sg(){return this.eP.Sg}set Sg(t){this.eP.Sg=t}s3(t){this.eP.s3(t)}a4(){this.eP.a4()}Yg(){this.eP.Yg()}Cg(){return this.eP.Cg()}constructor(t){super(t)}},KW=class extends WW{get vMt(){return this.eP}bMt(t){const i=new ZW(t);return i.Utt=this,i}EMt(t){return new ki(t)}},JW=class extends ur{get vMt(){return this.eP}bMt(t){const i=new ZW(t);return i.Utt=this,i}EMt(t){return new ki(t)}},ic=class extends Li{qP(t){return t===Zt.Yv?new JW(super.qP(t)):t===Zt.Gv?new KW(super.qP(t)):void 0}async LP(t){const i=t;await i.Hf(),await super.LP(i.vMt)}},$W=class extends FW{Cg(){if(CR(this.eP))return this.eP.Cg()}get wg(){return CR(this.eP)?this.eP.wg:0}get pg(){return CR(this.eP)?this.eP.pg:0}async ln(){await super.ln()}Clt(t){var i,e,s;return((null!=(s=null==(i=this.uc)||null==(e=i.dash)?void 0:e.useSeamlessPeriodSwitch)?s:Fs.cB)!==Fs.cB||!li.wb)&&super.Clt(t)}Plt(){return!(li.LE&&li.xE<3)&&super.Plt()}Odt(){return new Rh(this,new jx)}_dt(t){return YW(t)}constructor(t,i,e,s,n,r){super(t,i,e,s,n,new GW(r)),this.AMt=r}},tV=class extends $W{async ln(){await super.ln(),await this.kP.LP(this.eP)}constructor(t,i,e,s,n,r,h){const o=new ic(n);super(t,i,e,s,o.qP(r),h),this.kP=o}};r(),r(),r(),r(),r();var iV=class extends ht{get XMt(){return this.ott.XMt}y_(){return super.y_().Sm(this.XMt)}QMt(){return super.QMt().Sm(this.XMt)}mK(t,i,e){const s=this.XMt;return super.mK(t,{n8:i.n8-s,lt:i.lt,Zy:i.Zy-s},e)}PK(t,i){const e=this.XMt;return super.PK(S.max(0,t-e),S.max(0,i-e))}wm(t,i,e){const s=this.XMt;return super.wm(S.max(0,t-s),S.max(0,i-s),e)}fJ(t,i){const e=this.XMt;super.fJ(S.max(0,t-e),S.max(0,i-e))}_J(t,i){const e=this.XMt;super._J(S.max(0,t-e),S.max(0,i-e))}constructor(t,i){super(i),this.ott=t}},eV=class extends HW{get XMt(){return this.ott.XMt}yd(){return super.yd()+this.XMt}r$(t){super.r$(t-this.XMt)}dg(){return super.dg().Sm(this.XMt)}u$(t,i,e,s){const n=this.XMt;super.u$(t-n,i-n,e,s)}jMt(t){return new iV(this,t)}constructor(t,i){super(i),this.CMt(i),this.ott=t}},sV=class extends ur{get vMt(){return this.eP}get XMt(){return this.ZMt}set XMt(t){this.ZMt=t}y_(){return super.y_().Sm(this.ZMt)}T_(){return nV(super.T_(),this.ZMt)}S_(){return super.S_()+this.ZMt}yd(){return super.yd()+this.ZMt}J_(){return super.J_().Sm(this.ZMt)}dg(){return super.dg().Sm(this.ZMt)}Em(t,i,e){const s=S.max(0,t-this.ZMt);super.Em(s,i,e)}sP(t){super.sP(nV(t,-this.ZMt))}gg(){return this.Tl}SS(t,i,e,s,n,r,h,o){return this.ES.SS(t,i,e,s,n,r,h,o)}jS(t){this.ES.jS(t)}DP(){this.ES.Gn(),super.DP()}yP(){return!1}TP(t,i,e,s,n){throw new k("Not supported")}Hf(){return this.O6.ln(),this.C6.ln(),this.ES.ln(),this.Tl.ln(),super.Hf()}bMt(t){return new eV(this,t)}EMt(t){return new ki(t)}Wg(i){let e;switch(i.type){case t.wh:e=new ih(i.currentTime+this.ZMt);break;case t.bh:e=new bs(i.currentTime+this.ZMt);break;case Dt._v:e=new Kr(i.currentTime+this.ZMt);break;case t.XA:e=new bl(i.currentTime+this.ZMt,nV(i.currentProgramDateTime,this.ZMt));break;case t.BA:e=new vi(i.currentTime+this.ZMt);break;case t.YA:e=new gt(i.currentTime+this.ZMt);break;case t.FA:e=new ke(i.currentTime+this.ZMt);break;case t.bA:e=new mk(i.currentTime+this.ZMt);break;case t.kA:e=new iC(i.currentTime+this.ZMt);break;case t.NA:e=new Ki(i.currentTime+this.ZMt);break;case t.RA:e=new ce(i.currentTime+this.ZMt,i.playbackRate);break;case t.ZA:e=new ge(i.currentTime+this.ZMt,i.volume);break;case t.yA:e=new jn(i.duration+this.ZMt);break;case Dt._w:e=new Z(i.currentTime+this.ZMt,i.readyState);break;default:e=i}super.Wg(e)}we(){super.we(),this.C6.we()}ye(){super.ye(),this.C6.ye()}constructor(t){super(t),this.ZMt=0,this.ES=new Rh(this,new jx),this.Tl=new Fe([this.ES.rt,super.gg()]),this.C6=new $u,this.C6.s3(this.oP.parentElement),this.O6=new Uu(this.C6._e,this.Su,this.Tl,this.Il,this.fa)}};function nV(t,i){return t?new Date(t.getTime()+1e3*i):void 0}var rV=class extends Li{qP(t){if(t===Zt.Yv)return new sV(super.qP(t))}async LP(t){const i=t;await i.Hf(),await super.LP(i.vMt)}},hV=class extends $W{async $J(t){await super.$J(t),void 0===this.KMt&&(this.KMt=this.JMt(),this.eP.XMt=this.KMt)}JMt(){if(this.lt===1/0){const t=this.qct;if(t.L>0)return S.max(0,t.yn(0)-300)}return 0}Y4(t,i,e,s,n,r,h,o){return void 0===r&&(r=!1),void 0===h&&(h=UQ.iut),void 0===o&&(o=!1),o||(o=this.lt===1/0&&li.LE&&li.xE<3&&t<=this.I_),super.Y4(t,i,e,s,n,r,h,o)}async Gn(){await super.Gn(),this.KMt=void 0,this.eP.XMt=0}async ln(){await super.ln(),await this.eP.Hf(),await this.kP.LP(this.eP)}static hC(t){var i;return(!t||"google-dai"!==(null==t||null==(i=t.ssai)?void 0:i.integration))&&(li.LE&&li.xE<4)}constructor(t,i,e,s,n,r,h){const o=new rV(new ic(n));super(t,i,e,s,o.qP(r),h),this.kP=o,this.KMt=void 0}};r(),r(),r(),r(),r();var oV=class extends Wh{get vMt(){return this.eP}get wg(){return this.eP.wg}get pg(){return this.eP.pg}constructor(t){super(t)}};r(),r(),r();var aV=class extends ht{RMt(){return this.$Mt?this.ZW:super.RMt()}UMt(t){this.$Mt?this.ZW=t:super.UMt(t)}y_(){return this.$Mt?this.tTt:super.y_()}Vx(){return this.$Mt?this.mC:super.Vx()}QMt(){return this.$Mt?this.iTt:super.QMt()}FMt(){return this.$Mt?this.HW:super.FMt()}YMt(t){this.$Mt?this.HW=t:super.YMt(t)}mK(t,i,e){return this.pK((e=>this.eTt(t,i,e)),e)}eTt(t,i,e){return super.mK(t,i,e)}gJ(){return this.pK((()=>this.sTt()))}sTt(){return super.gJ()}MK(t,i,e){return this.pK((e=>this.nTt(t,i,e)),e)}nTt(t,i,e){return super.MK(t,i,e)}zH(){return this.$Mt?this.i8:super.zH()}hJ(){this.$Mt?this.rTt=!0:super.hJ()}fJ(t,i){this.WK(),this.$Mt?(this.iTt=this.iTt.xB(new re([t,i])),this.hTt.push({$w:"Mgt",Fm:t,Ym:i})):this.oTt(t,i)}oTt(t,i){super.fJ(t,i)}PK(t,i){return this.pK((()=>this.aTt(t,i)))}aTt(t,i){return super.PK(t,i)}_J(t,i){this.WK(),this.$Mt?(this.iTt=this.iTt.OB(new re([t,i])),this.hTt.push({$w:"wm",Fm:t,Ym:i})):this.uTt(t,i)}uTt(t,i){super._J(t,i)}wm(t,i,e){return this.pK((e=>this.cTt(t,i,e)),e)}cTt(t,i,e){return super.wm(t,i,e)}yH(t){return this.pK((()=>this.lTt(t)))}lTt(t){return super.yH(t)}async pK(t,i){this.WK(),this.$Mt&&(await Oi(this.$Mt.sL,i),this.WK()),Pi(i);try{this.KK=t(i),await this.KK}finally{this.KK=void 0}}WK(){if(this.KK)throw new k("Internal error")}async dTt(){if(this.$Mt)throw new _("Already locked");this.$Mt=new $s,this.fTt(),this.KK&&(await this.KK.catch(h),this.fTt())}_Tt(){var t;null==(t=this.$Mt)||t.iL(),this.$Mt=void 0,this.gTt()}fTt(){this.mC=super.Vx(),this.ZW=super.RMt(),this.HW=super.FMt(),this.tTt=super.y_(),this.iTt=super.QMt(),this.i8=super.zH(),this.rTt=!1}gTt(){this.WK(),super.UMt(this.ZW),super.YMt(this.HW);const t=this.hTt.slice();sr(this.hTt);for(const i of t)"Mgt"===i.$w?this.oTt(i.Fm,i.Ym):this.uTt(i.Fm,i.Ym);this.rTt&&super.hJ(),this.tTt.UB(super.y_())||this.jo(new d(vl.dH))}Hf(){var t;null==(t=this.$Mt)||t.i_(),this.$Mt=void 0,super.Hf()}constructor(t){super(t),this.KK=void 0,this.$Mt=void 0,this.ZW=0,this.tTt=re.ZB(),this.iTt=re.ZB(),this.hTt=[],this.i8=!1,this.rTt=!1,this.HW=0,this.mC=t.dd}},uV=class extends aV{y_(){var t,i;return super.y_().xB(null!=(i=null==(t=this.wTt)?void 0:t.p_)?i:re.ZB())}QMt(){var t,i;return super.QMt().xB(null!=(i=null==(t=this.wTt)?void 0:t.cJ)?i:re.ZB())}UMt(t){super.UMt(t),this.wTt&&(this.wTt.FW=t)}YMt(t){super.YMt(t),this.wTt&&(this.wTt.BW=t)}oTt(t,i){super.oTt(t,i),this.wTt&&this.wTt.fJ(t,i)}uTt(t,i){super.uTt(t,i),this.wTt&&this.wTt._J(t,i)}async cTt(t,i,e){Pi(e);const s=[];s.push(super.cTt(t,i,e)),this.wTt&&s.push(this.wTt.wm(t,i,e)),await Promise.all(s)}mH(t){return!!super.mH(t)||this.ott.ATt(t)}lTt(t){return super.mH(t)?super.lTt(t):this.ott.vTt(t)}mTt(t){var i,e;null==(i=this.wTt)||i.hn(zs,this.GMt),this.wTt=t,null==(e=this.wTt)||e.dn(zs,this.GMt)}constructor(t,i){super(i),this.wTt=void 0,this.ott=t}},cV=class extends HW{mH(t){const i=void 0!==this.e$,e=void 0!==this.s$,s=t.c$.some((t=>Lt(t._P,"audio"))),n=t.c$.some((t=>Lt(t._P,"video")));return i===s&&e===n&&(!!super.mH(t)||(!(!this.pTt||!this.pTt.mH(t))||this.ott.yTt(t)))}async yH(t){return super.mH(t)?await super.yH(t):this.pTt&&this.pTt.mH(t)?(this.MTt(),await this.yH(t)):(await this.ott.TTt(t),await this.yH(t))}ATt(t){return this.mH(this.NTt(t))}vTt(t){return this.yH(this.NTt(t))}NTt(t){const i=this.dd,e=i.c$.map((i=>Lt(t._P,"audio")&&Lt(i._P,"audio")||Lt(t._P,"video")&&Lt(i._P,"video")?t:i));return qr({},i,{c$:e})}u$(t,i,e,s){super.u$(t,i,e,s),this.pTt&&this.pTt.u$(t,i,e,s)}DTt(){return!this.ITt&&this.STt}yd(){return void 0!==this.ETt?this.ETt:this.DTt()?this.KL:super.yd()}r$(t){this.KL=t,this.ETt=void 0,this.DTt()||super.r$(t)}xMt(){return!this.DTt()&&super.xMt()}hJ(){this.ETt=S.max(lV(this.uP.KJ),lV(this.uP.JJ)),this.DTt()||super.hJ()}ZK(){this.ETt=void 0,this.DTt()||super.ZK()}jMt(t){return new uV(this,t)}bTt(){this.ITt=!this.ITt}MTt(){const t=this.uP,i=this.pTt;i&&(this.ITt=!this.ITt,this.CMt(i),this.LTt(t),this.DTt()&&this.kTt())}LTt(t){var i,e;this.pTt=t,null==(i=this.e$)||i.mTt(null==t?void 0:t.KJ),null==(e=this.s$)||e.mTt(null==t?void 0:t.JJ)}xTt(t){const i=this.uP,e=this.pTt;if(!e)return;const s=this.ITt,n=s?i:e,r=(s?e:i).p_.VB(t);if(!r)return;const h=VF(n.p_,this.QMt()).VB(r.wn(0),Vu);return!h||r.wn(0)+Vu>=h.wn(0)?void 0:S.max(r.wn(0),h.yn(0))}CTt(t,i){if(this.STt)return Promise.resolve();const e=this.ITt?this.pTt:this.uP;return e?(this.STt=!0,this.OTt((i=>{if(Pi(i),this.STt)return async function(t,i,e){Pi(e);const s=[];t.KJ&&s.push(fk(t.KJ,i,e));t.JJ&&s.push(fk(t.JJ,i,e));await Promise.all(s),t.hJ()}(e,t,i)}),i)):Promise.resolve()}kTt(){if(!this.STt)return;const t=this.ITt?this.pTt:this.uP;if(!t)return;var i;this.STt=!1;const e=null!=(i=this.ETt)?i:this.KL;t.lt<e&&t.r$(e),t.ZK()}jTt(t){var i;const e=null!=(i=this.ETt)?i:this.KL;t.r$(e),this.ITt?this.CMt(t):this.LTt(t)}QMt(){var t,i,e;const s=null!=(e=null==(t=this.e$)?void 0:t.cJ)?e:re.ZB();var n;const r=null!=(n=null==(i=this.s$)?void 0:i.cJ)?n:re.ZB();return s.xB(r)}async OTt(t,i){const e=[];this.e$&&e.push(this.e$.dTt()),this.s$&&e.push(this.s$.dTt());try{await Promise.all(e),await t(i)}finally{this.e$&&this.e$._Tt(),this.s$&&this.s$._Tt()}}PMt(t){t.type===vl.dH&&this.ott.iJ(),super.PMt(t)}constructor(t,i){super(i),this.pTt=void 0,this.KL=NaN,this.ITt=!1,this.STt=!1,this.ETt=void 0,this.CMt(i),this.ott=t}};function lV(t){if(!t)return 0;const i=t.p_;return i.L>0?i.wn(i.L-1):0}function tr(t){return t.dd.$w===si.tO}r();var dV=class extends oV{get zTt(){return this.PTt}y_(){return super.y_().xB(this.PTt.p_)}yd(){if(!this.BTt){const t=this.uP;if(t&&tr(t))return t.lt}return super.yd()}pMt(){return!!super.pMt()&&!(!this.BTt&&!this.zH())}yMt(){return!!super.yMt()&&!(!this.BTt&&super.pMt()&&!this.zH())}zH(){const t=this.uP;return!(!t||!tr(t))&&t.zH}J_(){return this.zo.xB(this.eP.K_)}dg(){return super.dg().xB(this.PTt.cg)}ag(){return super.ag()}mMt(){var t;return null!=(t=super.mMt())?t:this.PTt.cP}Bg(){return this.tR=!1,super.Bg()}Pg(){this.tR=!0,super.Pg()}K2(){this.BTt=!0,super.K2(),this.PTt.K2()}J2(){this.BTt=!1,super.J2(),this.PTt.K2()}S_(){var t;return null!=(t=this.f4)?t:super.S_()}_g(){return void 0!==this.f4||super._g()}Em(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.RTt.i_(),this.Q4.i_(),this.Q4=new Z_,this.UTt=this.Y4(t,i,e,this.UTt,this.Q4.$f).catch(h)}async Y4(t,i,e,s,n){this.f4=t,this.G4=t,this.jo(new gt(t)),s&&await s.catch(h),Pi(n),this.uP&&tr(this.uP)&&this.uP.kTt(),this.f4=void 0,super.Em(t,i,e),this.PTt.Em(t,i,e),this.QTt()}sP(t){const i=this.cP;if(!i||M(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Em(e)}e3(){super.e3(),this.PTt.e3()}get wg(){return this.FTt.wg}get pg(){return this.FTt.pg}we(){this.vB&&(this.vB=!1,this.FTt.we())}ye(){this.vB||(this.vB=!0,this.FTt.ye())}async YTt(){var t;this.f4=void 0,this.G4=NaN,this.zo=re.ZB(),null==(t=this.GTt)||t.i_(),this.RTt.i_(),this.Q4.i_(),this.UTt&&(await this.UTt.catch(h),this.UTt=void 0)}DMt(t){super.DMt(t),this.PTt.bP=t}IMt(t){super.IMt(t),this.PTt.n3=t}gg(){return this.Tl}SS(t,i,e,s,n,r,h,o){return this.ES.SS(t,i,e,s,n,r,h,o)}jS(t){this.ES.jS(t)}DP(){this.ES.Gn(),super.DP()}async En(t){const i=await super.En(t);return tr(i)&&this.QTt(),i}async Gn(){await this.YTt(),await super.Gn(),await this.PTt.Gn()}async Hf(){await this.YTt(),this.ES.ln(),this.Tl.ln(),await super.Hf()}bMt(t){return new cV(this,t)}EMt(t){return new ki(t)}QTt(){this.RTt.i_(),this.RTt=new Z_,this.UTt=this.WTt(this.UTt,this.RTt.$f).catch(h)}async WTt(i,e){if(i&&await i.catch(h),this.uP&&tr(this.uP))for(;;){let i;for(Pi(e),this.VTt()&&this.bTt(),this.uP.kTt(),Pi(e);Pi(e),!this.VTt();){if(i=this.uP.xTt(this.S_()),void 0!==i){0,this.HTt(),await this.uP.CTt(i,e),Pi(e),this.PTt.Em(i);break}await ig((i=>Promise.race([this.w_(t.XA,i),this.qTt(i)])),e)}for(Pi(e);!this.VTt();)await this.eP.w_([t.XA,t.NA,Dt._w],e)}}VTt(){const t=this.uP;if(void 0===t||!tr(t))return!1;const i=this.S_(),e=this.eP.p_;if(!this.eP.L_&&e.ur(i))return!1;return!!VF(this.PTt.p_,t.QMt()).BB(i,i+Vu)}bTt(){if(this.XTt)return;this.XTt=!0,this.zo=this.J_();const t=Mk(this),i=this._g(),e=this.ag(),s=this.eP,n=this.PTt,r=this.uP;r.kTt(),r.bTt(),Tk(n,t),this.kMt(n),this.PTt=s,s.Pg(),s.Q_=!0,this.XTt=!1;const h=this._g();i!==h&&(h?this.jo(new gt(this.I_)):this.jo(new ke(this.I_)));const o=this.ag();e!==o&&this.jo(new Z(this.I_,o)),h||this.HTt()}HTt(){const t=this.eP,i=this.FTt;if(i===t)return;const e=this.pg,s=this.wg;this.FTt=t,this.vB&&(i.we(),t.ye());const n=this.pg,r=this.wg;n>0&&r>0&&(e!==n||s!==r)&&this.jo(new Gs)}yTt(t){return void 0!==this.PTt.RH([t])}async TTt(t){this.HTt();const i=this.uP,e=this.PTt;await e.Gn();const s=await e.En(t);i.jTt(s)}qTt(t){return this.GTt=new $s,Oi(this.GTt.sL,t)}iJ(){var t;null==(t=this.GTt)||t.iL()}Wg(i){i.type===t.YA&&this.G4===i.currentTime||(i.type===t.FA&&(this.G4=NaN,this.HTt()),i.type!==Dt._w&&i.type!==t.bh&&i.type!==t.NA||this.XTt||!this.VTt()?(i.type!==t.NA||this.L_)&&super.Wg(i):this.QTt())}constructor(t,i,e){super(t),this.BTt=!1,this.f4=void 0,this.G4=NaN,this.zo=re.ZB(),this.tR=!0,this.XTt=!1,this.vB=!0,this.GTt=void 0,this.UTt=void 0,this.RTt=new Z_,this.Q4=new Z_,this.PTt=i,this.FTt=t,this.eP.ye(),this.PTt.we(),this.ES=new Rh(this,e),this.Tl=new Fe([this.ES.rt,super.gg()])}},fV=class extends dV{get vMt(){return this.eP}get zTt(){return this.PTt}we(){super.we(),this.C6.we()}ye(){super.ye(),this.C6.ye()}get oP(){return this.eP.oP}get L$(){return this.eP.L$}get Sg(){return this.eP.Sg}set Sg(t){this.eP.Sg=t}s3(t){this.eP.s3(t),this.PTt.s3(t)}a4(){this.eP.a4()}Yg(){this.eP.Yg(),this.PTt.Yg()}Cg(){return this.eP.Cg()}kMt(t){const i=this.xg(),e=this.Cg();super.kMt(t),this.xg()!==i&&this.jo(new vs),this.Cg()!==e&&this.jo(new Iw)}Hf(){return this.O6.ln(),this.C6.ln(),super.Hf()}constructor(t,i){super(t,i,new jx),this.C6=new $u,this.C6.s3(t.oP.parentElement),this.O6=new Uu(this.C6._e,this.Su,this.rt,this.Il,this.fa)}},_V=class extends Li{qP(t){if(t===Zt.Yv){const i=super.qP(t),e=super.qP(t);return new fV(i,e)}return super.qP(t)}async LP(t){t instanceof fV?(await t.Hf(),await super.LP(t.vMt),await super.LP(t.zTt)):await super.LP(t)}},gV=class extends $W{async ln(){await super.ln(),await this.kP.LP(this.eP)}static hC(t){var i;return!li.Ys&&!li.fb&&!(t&&"google-dai"===(null==(i=t.ssai)?void 0:i.integration))}constructor(t,i,e,s,n,r,h){const o=new ic(new _V(n));super(t,i,e,s,o.qP(r),h),this.kP=o}};r(),r(),r();var Mu,wV=class extends HW{jMt(t){return new aV(t)}Vx(){return this.ZTt?this.mC:super.Vx()}y_(){return this.ZTt?this.tTt:super.y_()}yd(){return this.ZTt?this.KL:super.yd()}r$(t){this.ZTt?(this.KL=t,this.KTt=!0):super.r$(t)}dg(){return this.ZTt?this.JTt?this.JTt.mJ():this.a$:super.dg()}u$(t,i,e,s){this.ZTt?this.JTt=new ak(t,i,e,s):super.u$(t,i,e,s)}xMt(){return this.ZTt?this.i8&&!1!==this.rTt:super.xMt()}hJ(){this.ZTt?this.rTt=!0:super.hJ()}ZK(){this.ZTt?this.rTt=!1:super.ZK()}mH(t){return!this.ZTt&&super.mH(t)}yH(t){return this.ZTt?Promise.reject(new _("Not supported")):super.yH(t)}async dTt(){if(this.ZTt)throw new _("Already locked");this.ZTt=!0,this.fTt();const t=[];this.e$&&t.push(this.e$.dTt()),this.s$&&t.push(this.s$.dTt()),await Promise.all(t)}_Tt(){this.ZTt=!1,this.e$&&this.e$._Tt(),this.s$&&this.s$._Tt(),this.gTt()}fTt(){this.mC=super.Vx(),this.tTt=super.y_(),this.KL=super.yd(),this.a$=super.dg(),this.KTt=!1,this.rTt=void 0,this.JTt=void 0}gTt(){if(this.KTt&&(super.r$(this.KL),this.KTt=!1),void 0!==this.JTt){const t=this.JTt;super.u$(t.yn,t.wn,t.pJ,t.yJ),this.JTt=void 0}void 0!==this.rTt&&(this.rTt?super.hJ():super.ZK(),this.rTt=void 0)}constructor(t){super(t),this.ZTt=!1,this.tTt=re.ZB(),this.KL=0,this.KTt=!1,this.i8=!1,this.rTt=void 0,this.a$=re.ZB(),this.JTt=void 0,this.CMt(t),this.mC=t.dd}},AV=class extends ur{get vMt(){return this.eP}Bg(){return void 0!==this.uP&&tr(this.uP)&&this.L_&&this.Em(0),super.Bg()}Em(t,i,e){void 0!==this.uP&&tr(this.uP)&&this.L_&&t<this.lt&&this.$Tt(),super.Em(t,i,e)}K2(){this.tNt=!0,super.K2()}J2(){this.tNt=!1,this.iNt()||super.J2()}iNt(){return this.tNt||this.eNt}sNt(){this.eNt||(this.eNt=!0,super.K2())}nNt(){this.eNt&&(this.eNt=!1,this.iNt()||super.J2())}En(t){this.rNt.i_();const i=this.ett(t,this.hNt);return this.oNt=i,i}async ett(t,i){return i&&await i.catch(h),this.nNt(),await super.En(t)}bMt(t){return new wV(t)}EMt(t){return new ki(t)}Gn(){this.rNt.i_();const t=this.aNt(this.hNt);return this.oNt=t,t}async aNt(t){return t&&await t.catch(h),this.nNt(),await super.Gn()}$Tt(){this.sNt(),this.rNt.i_(),this.rNt=new Z_,this.hNt=G(this.uNt(this.oNt,this.hNt,this.rNt.$f),this.rNt).catch(tg)}async uNt(t,i,e){t&&await t.catch(h),i&&await i.catch(h),Pi(e);const s=this.uP;if(!s||!tr(s))return;const n=s.dd;await s.dTt(),await this.eP.Gn();const r=await this.eP.En(n);r.r$(s.lt),s.CMt(r),s._Tt(),this.nNt()}async Hf(){this.rNt.i_(),this.hNt&&(await this.hNt.catch(h),this.hNt=void 0),this.iNt()&&super.J2(),await super.Hf()}constructor(...t){super(...t),this.tNt=!1,this.eNt=!1,this.oNt=void 0,this.hNt=void 0,this.rNt=new Z_}},oo=class extends Li{qP(t){if(t===Zt.Yv)return new AV(super.qP(t))}async LP(t){const i=t;await i.Hf(),await super.LP(i.vMt)}static hC(){return li.gb}};La(new class extends NR{ij(t,i,e,s,n,r,h){const o=new V(Re.Lb.mit,Re.Lb.Ait,Re.Lb.vit,Re.Lb.yit);let a;a=hV.hC(h)?hV:gV.hC(h)?gV:tV;let u=i;return oo.hC()&&(u=new oo(u)),new a(e,s,n,o,u,Zt.Yv,t)}ZP(){return!0}constructor(...t){super(...t),this.KP=Rt.bz}}),r(),r(),r(),r(),function(t){t.cNt="currentbufferingrenditionchange",t.lNt="dNt",t.fNt="_Nt",t.gNt="wNt"}(Mu||(Mu={})),r(),r();var vV,mV,pV=class{constructor(t,i){var e,s;this.Bw=zw(),this.ANt=i,this.$w=t.$w,this.vNt=t.vNt,this.mNt=t.mNt,this.pNt=t.pNt,this.v=t.v,this.ys=t.ys,this.yNt=t.yNt,this.MNt=t.MNt,this.TNt=void 0===t.xst,this.NNt=null!=(s=null==(e=t.NNt)?void 0:e.split(","))?s:[]}};function Hh(t,i){return t.$w===i.$w&&(t.v===i.v||!(!t.vNt||!i.vNt))}function yV(t,i){return t.ANt===i.ANt}function MV(t,i){for(const e of t)if(yV(e,i))return!0;return!1}r(),function(t){t.DNt="alternative",t.INt="main",t.SNt="commentary",t.ENt="",t.xI="descriptions",t.bNt="main-desc",t.LNt="translation"}(vV||(vV={})),function(t){t.DNt="alternative",t.INt="main",t.SNt="commentary",t.ENt="",t.kI="captions",t.Gw="sign",t.HM="subtitles"}(mV||(mV={}));var TV,NV=class extends i{get Rw(){return this.kNt}get Ot(){const t=this.xNt();if(!t)return!1;for(const i of this.Uw.Nw)if(i.CNt===t)return!0;return!1}set Ot(t){if(t!==this.Ot&&t){let t=this.Uw.Iw(0).CNt;const i=this.Qo.ONt;for(const e of this.Uw.Nw)if(e.jNt===i){t=e.CNt;break}this.zNt(t)}}get Pw(){if(!this.Ot)return;const t=this.Qo.PNt;for(const i of this.Uw.Nw)if(MV(t,i.CNt))return i}get so(){return this.Oa||(this.Oa=es(this)),this.Oa}get u(){return this.Mm.toString()}get Bw(){return this.Mm}get fh(){return this.Tm}set fh(t){t!==this.Tm&&(this.Tm=t,this.jo(new ms(this)))}get ys(){return this.JL}get Xw(){return this.Ot?"enabled":"disabled"}get Qw(){return this.Bgt}set Qw(t){let i=[];if(t){i=t.filter((t=>{const i=this.Pw?OQ(this.Pw):void 0;return le.Ks.u7(i,OQ(t))})).filter((i=>this.Uw.Am(t)&&i.Ftt))}else i=this.Uw.Nw.filter((t=>t.Ftt));0!==i.length?t!==this.Bgt&&(this.Bgt&&ph(this.Bgt,i)||(this.Bgt=t?i:void 0,this.Qo.BNt(i.map((t=>t.jNt))),1===i.length&&Mo(this.Qo.RNt(i[0].jNt,!1)),this.jo(new Bh(i,this)))):this.jo(new CQ)}Dm(t){this.Ot=t}ln(){this.Uo(),this.Qo.hn(Mu.cNt,this.UNt),this.Qo.hn(Mu.lNt,this.QNt);for(const t of this.Uw.Nw)t.ln();this.Uw.Gn()}constructor(t,i,e){var s;super(),this.Qo=t,this.hh=i,this.Uw=e,this.Bgt=void 0,this.FNt=void 0,this.YNt=()=>this.jo(new ms(this)),this.UNt=()=>{const t=this.Pw;t&&this.FNt!==t&&(this.FNt=t,this.jo(new MW(t)))},this.QNt=()=>{const t=this.Ot;this.GNt!==t&&(this.GNt=t,this.hh.jo(new eo(this)),this.jo(new eo(this)))},this.FNt=this.Pw,this.GNt=this.Ot;const n=e.Iw(0);var r,h;this.Tm=null!=(r=null==n?void 0:n.CNt.v)?r:"",this.JL=null!=(h=null==n?void 0:n.CNt.ys)?h:"",this.kNt=null==n||null==(s=n.CNt)?void 0:s.NNt.map(LV).filter(oe),this.Mm=Ra(),this.Qo.dn(Mu.cNt,this.UNt),this.Qo.dn(Mu.lNt,this.QNt);for(let t=0;t<this.Uw.L;t++){this.Uw.Iw(t).dn("update",this.YNt)}}},DV=class extends NV{get Lt(){return vV.INt}xNt(){return this.Qo.WNt}zNt(t){Mo(this.Qo.VNt(t))}},IV=class extends NV{get Lt(){return mV.INt}xNt(){return this.Qo.HNt}zNt(t){Mo(this.Qo.qNt(t))}},SV=class extends i{get u(){return String(this.jNt.u)}get Bw(){return this.jNt.u}get jz(){return this.jNt.jz}get bst(){return this.jNt.bst}get fh(){var t;return null!=(t=this.Tm)?t:this.CNt.v}set fh(t){this.fh!==t&&(this.Tm=t,this.jo(new gU(this.so)))}get xst(){return this.CNt.ANt.XNt()}KI(){}ln(){this.Uo()}constructor(t,i){super(),this.jNt=t,this.CNt=i,this.Tm="",this.Ftt=!0}},EV=class extends SV{get Met(){return 0}get Tet(){var t;return(null==(t=this.jNt.Tet)?void 0:t.ZNt)||""}get so(){return this.Oa||(this.Oa=this.Qh()),this.Oa}Qh(){return _U(this)}constructor(t,i){super(t,i),this.Oa=void 0}},bV=class extends SV{get Tet(){var t;return(null==(t=this.jNt.Tet)?void 0:t.KNt)||""}get Lst(){return this.JNt}set Lst(t){this.JNt!==t&&(this.JNt=t,this.jo(new gU(this.so)))}get Eet(){var t,i;return null!=(i=null!=(t=this.$Nt)?t:this.jNt.Eet)?i:0}set Eet(t){this.Eet!==t&&(this.$Nt=t,this.jo(new gU(this.so)))}get Mi(){var t,i;return null!=(i=null==(t=this.jNt.tDt)?void 0:t.Mi)?i:0}get Ti(){var t,i;return null!=(i=null==(t=this.jNt.tDt)?void 0:t.Ti)?i:0}get so(){return this.Oa||(this.Oa=this.Qh()),this.Oa}Qh(){return fU(this)}constructor(t,i){super(t,i),this.Oa=void 0,this.JNt=0,this.$Nt=void 0}};function LV(t){return"public.accessibility.describes-video"===t?Ca.Hw:"public.accessibility.transcribes-spoken-dialog"===t?Ca.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?Ca.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?Ca.Vw:void 0}r(),r(),function(t){t.iDt="FATAL",t.ha="ERROR",t.eDt="WARNING",t.sDt="INFO",t.nDt="DEBUG"}(TV||(TV={}));var p=new class{rDt(t){if(!this.Ot())return!1;const i=[];return!(i.length>0)||i.some((i=>i.toLowerCase()===t.toLowerCase()))}hDt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.rDt(t)&&le.w7("DEBUG "+t+" -",...e)}oN(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.rDt(t)&&le.w7("INFO "+t+" -",...e)}oDt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.rDt(t)&&le.Wv("WARNING "+t+" -",...e)}dt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.rDt(t)&&le.A7("ERROR "+t+" -",...e)}aDt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.rDt(t)&&le.A7("FATAL "+t+" -",...e)}constructor(){this.Ot=()=>!1}},xn="HLSPlaylistParser",kV="Discontinuity",xV="Buffering",CV=class{Tlt(){var t;const i=null==(t=this.Qo.wr)?void 0:t.uDt;if(!i||0===i.length)return void p.oDt("LLHLSTrackConfigurator","The HLSModel contains no variant streams.");var e;const s=null!=(e=xe(i,(t=>0!==t.cDt.length&&0!==t.lDt.length)))?e:i[0],n=i.filter((t=>t!==s));for(const t of s.cDt){const i=new Gc,e=[];i.gm(new EV(s,t)),e.push(t);for(const s of n)for(const n of s.cDt)if(Hh(n,t)&&!MV(e,n)){i.gm(new EV(s,n)),e.push(n);break}this.dDt.it(new DV(this.Qo,this.dDt,i))}for(const t of s.lDt){const i=new Gc,e=[];i.gm(new bV(s,t)),e.push(t);for(const s of n)for(const n of s.lDt)if(Hh(n,t)&&!MV(e,n)){i.gm(new bV(s,n)),e.push(n);break}this.fDt.it(new IV(this.Qo,this.fDt,i))}}_Dt(){this.gDt(this.dDt),this.gDt(this.fDt)}gDt(t){const i=[];for(const e of t.Nw){const t=[];for(const i of e.Uw.Nw)ks(i.jNt.wDt,i.CNt)||t.push(i);for(const i of t)e.Uw.wm(i),i.ln();0===e.Uw.L&&i.push(e)}for(const e of i)t.st(e),e.ln()}ADt(t,i){const e=this.vDt(t);void 0!==e&&(e.Eet=i)}mDt(t,i){const e=this.vDt(t);void 0!==e&&(e.Lst=i)}vDt(t){for(const i of this.fDt.Nw){const e=xe(i.Uw.Nw,(i=>i.CNt===t));if(void 0!==e)return e}}constructor(t,i,e){this.Qo=t,this.dDt=i,this.fDt=e}};r(),r(),r();var wr=class{get Z6(){const t=1-this.pDt**this.yDt;return this.MDt/t}u_t(t,i){const e=this.pDt**t,s=i*(1-e)+e*this.MDt;M(s)||(this.MDt=s,this.yDt+=t)}yH(t){const i=S.exp(S.log(.5)/t);if(i===this.pDt)return;if(0===this.yDt)return void(this.pDt=i);const e=this.Z6,s=1-i**this.yDt;this.MDt=e*s,this.pDt=i}constructor(t){this.MDt=0,this.yDt=0,this.pDt=S.exp(S.log(.5)/t)}},OV=class t{get Z6(){return this.cut()?S.max(this.TDt.Z6,this.NDt.Z6):this.DDt}u_t(t){const i=le.n_(),e=t;this.IDt&&void 0!==this.SDt&&i-this.SDt>=this.EDt&&this.Gn(),this.bDt+=1,this.TDt.u_t(1,e),this.NDt.u_t(1,e),this.LDt.push(e),this.LDt.length>this.kDt&&this.LDt.shift(),this.SDt=i}cut(){return void 0!==this.SDt&&le.n_()-this.SDt<=this.EDt}Gn(){this.TDt=new wr(this.xDt),this.NDt=new wr(this.CDt),this.bDt=0,this.LDt=[],this.SDt=void 0}constructor(i=t.ODt,e=t.jDt,s=t.w_t,n=!1){this.bDt=0,this.LDt=[],this.SDt=void 0,this.EDt=6e4,this.kDt=10,this.xDt=i,this.CDt=e,this.DDt=s,this.IDt=n,this.TDt=new wr(i),this.NDt=new wr(e)}};OV.ODt=2,OV.jDt=5,OV.w_t=.1,r();var jV=class{bW(t){for(const i of this.zDt)i.bW(t)}LW(t){for(const i of this.zDt)i.LW(t)}kW(t,i){for(const e of this.zDt)e.kW(t,i)}xW(t){for(const i of this.zDt)i.xW(t)}constructor(t){this.zDt=t}};r();var zV=class{bW(t){this.PDt=t}LW(t){this.BDt.u_t(t-this.PDt)}kW(t){}xW(t){}constructor(t){this.PDt=0,this.BDt=t}};r();var PV=class{LW(t){this.RDt=t}kW(t,i){this.v_t.u_t(t-this.RDt,i.byteLength),this.RDt=t}xW(t){}bW(t){}constructor(t){this.RDt=0,this.v_t=t}};r();var BV,RV=class{bW(t){}kW(t,i){const e=i.byteLength,s=this.UDt;this.UDt=e;const n=t-this.xn;this.xn=t,this.QDt.vq(i);const r=!this.QDt.FDt(),h=e>=this.YDt;s!==le.Ks.r7&&r&&h&&this.v_t.u_t(n,e)}LW(t){this.xn=t}xW(t){}constructor(t,i=0){this.QDt=new UV,this.xn=0,this.UDt=0,this.v_t=t,this.YDt=i}},UV=class extends dL{FDt(){return this.GDt}vq(t){this.GDt=!1,super.vq(t)}wq(t,i){this.WDt&&this.WDt!==At.RM||(this.GDt=!0),super.wq(t,i),this.WDt=t}Eq(t){return!1}Lq(t){}xq(t){}constructor(...t){super(...t),this.WDt=void 0,this.GDt=!1}};r(),r(),(BV||(BV={})).VDt="sample";var QV=class extends i{Mz(){if(!this.cut())return;const t=le.n_();t-this.HDt>1e3&&(this.HDt=t,Ho.Lb.Mz(this.Z6))}constructor(...t){super(...t),this.HDt=0}},FV=class t extends QV{u_t(t,i){const e=8*i/t;this.TDt.u_t(t,e),this.NDt.u_t(t,e),this.qDt+=i,this.Mz(),this.jo(new d(BV.VDt))}get Z6(){return this.cut()?S.min(this.TDt.Z6,this.NDt.Z6):this.DDt}cut(){return this.qDt>=this.XDt}constructor(i=t.ODt,e=t.jDt,s=t.ZDt,n=t.w_t){super(),this.qDt=0,this.XDt=s,this.TDt=new wr(i),this.NDt=new wr(e),this.DDt=n}};FV.ZDt=128e3,FV.w_t=iI,FV.ODt=.5,FV.jDt=5;var YV=class{get jz(){return this.v_t.Z6}get zz(){return this.KDt.Z6}Pz(t){if("segment"!==t.$w&&"preload-hint"!==t.$w)return;const i=[new zV(this.KDt)];return"stream"!==t.pS||!function(t){return"segment"===t.$w&&"initialization-segment"!==t.MS}(t)&&"preload-hint"!==t.$w?i.push(new PV(this.v_t)):i.push(new RV(this.v_t,1e3)),new jV(i)}JDt(t){this.v_t=new FV(FV.ODt,FV.jDt,1,t)}constructor(t){const i=t.jz>0?t.jz:FV.w_t,e=t.zz>0?t.zz:OV.w_t;this.v_t=new FV(FV.ODt,FV.jDt,1,i),this.KDt=new OV(OV.ODt,OV.jDt,e)}};r();var GV=class extends d{constructor(t){super(Mu.gNt),this.dt=t}};r();var WV=class{RH(t,i){const e={$w:si.tO,gP:[],c$:t.map((t=>({_P:t}))),p$:i};return Promise.resolve(void 0!==this.Utt.RH([e]))}constructor(t){this.Utt=t}};r(),r();var VV=(t,i,e,s,n)=>t.filter((t=>!!ks(s,t)||1.1*t.jz<=e.jz)),HV=(t,i,e,s,n)=>t.filter((t=>{if(ks(s,t))return!0;let r=1/0;for(const i of t.wDt){var h,o;r=S.min(r,null!=(o=null!=(h=i.ANt.$Dt)?h:i.ANt.tIt)?o:1/0)}r===1/0&&(r=1);const a=2*e.zz+t.jz*r/e.jz;return t.jz<=i.jz||n.iIt>a})),qV=(t,i,e,s,n)=>Ec(t,((t,i)=>i.jz-t.jz)),XV=(t,i,e,s,n)=>t.every((t=>t.eIt&&!M(t.eIt)))?Ec(t,((t,i)=>i.eIt-t.eIt)):t,ZV=(t,i,e,s,n)=>0===s.length?t:Ec(t,((t,i)=>{const e=ks(s,t)?1:0;return(ks(s,i)?1:0)-e})),KV=(t,i,e,s,n,r)=>t.filter((t=>!t.Tet||!i.Tet||!(void 0!==i.Tet.KNt&&void 0!==t.Tet.KNt&&!rk(i.Tet.KNt,t.Tet.KNt)&&!r.sIt({_P:'video/mp4; codecs="'+t.Tet.KNt}))&&!(void 0!==i.Tet.ZNt&&void 0!==t.Tet.ZNt&&!rk(i.Tet.ZNt,t.Tet.ZNt)&&!r.nIt({_P:'audio/mp4; codecs="'+t.Tet.ZNt})))),JV=(t,i,e,s,n)=>{if(!1===n.gut)return t;if(le.Ks.e7)return t;const r=le.Ks.s7;var h;const o=(null!=(h=null==r?void 0:r.width)?h:n.Ti)*UY;var a;const u=(null!=(a=null==r?void 0:r.height)?a:n.Mi)*UY;for(let i=0;i<t.length;i++){const e=t[i];if(void 0===e.tDt)return t;const s=e.tDt.Mi,n=e.tDt.Ti;if(s<=u&&n<=o)return t.slice(i,t.length)}return[]},$V=(t,i,e,s,n)=>function(t,i){const e=i.gut;if(void 0===e&&!le.Ks.Ys)return t;if(!1===e)return t;for(let e=0;e<t.length;e++){const s=t[e];if(void 0===s.tDt)return t;const n=s.tDt.Mi,r=s.tDt.Ti;if(n===i.Mi&&r===i.Ti)return t.slice(e,t.length);if(n<i.Mi||r<i.Ti)return t.slice(0===e?e:e-1,t.length)}return[]}(t,n);var ve,tH,$o,wt,iH="AbrEvaluator",eH=class{get rIt(){return this.hR.SW}hIt(t){this.Aut=t}async oIt(t,i,e,s,n){return(await this.aIt(t,i,e,s,n))[0]}async aIt(t,i,e,s,n){if(0===t.length)throw new k("AbrEvaluator - Unable to select optimal variant stream from an empty list.");p.hDt(iH,"Performing optimal variant stream selection.");const r=this.rIt;let h=t;for(const t of this.Aut){const o=t(h,i,r,e,s,n);h=Gr(o)?o:await o}if(0===h.length){p.oDt(iH,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[R_(t,(t=>t.jz))]}return h}constructor(t){this.hR=t,this.Aut=[KV,VV,HV,qV,JV,$V,XV,ZV]}};function sH(t,i){return[t,void 0!==i?t+i-1:S_]}function nH(t){return Boolean(t.ZT)}function rH(t){return Boolean(t.vit)}function Qo(t){return t?t.Frt?t.zy+"@"+t.Frt.yn+"-"+(null!=(i=t.Frt.L)?i:""):""+t.zy:"";var i}function hH(t,i){if(i===t)return!0;if(i.zy!==t.zy)return!1;if(!t.Frt)return!0;if(i.Frt){const e=sH(t.Frt.yn,t.Frt.L),s=sH(i.Frt.yn,i.Frt.L);if(e[0]<=s[0])return void 0===e[1]||void 0!==s[1]&&e[1]>=s[1]}return!1}function oH(t,i){return t===i||t.zy===i.zy&&(t.Frt&&i.Frt?t.Frt.yn===i.Frt.yn&&t.Frt.L===i.Frt.L:t.Frt===i.Frt)}function aH(t){const i=!!t.uIt||void 0;return{u:t.u,cIt:t.cIt,cP:t.cP,lIt:t.lIt,lt:t.lt,dIt:t.dIt,uIt:i,fIt:t._It,gIt:t.wIt,AIt:t.AIt,vIt:t.vIt}}function uH(t,i){var e,s,n;return{ZNt:null!=(e=i.ZNt)?e:null==t?void 0:t.ZNt,KNt:null!=(s=i.KNt)?s:null==t?void 0:t.KNt,mIt:null!=(n=i.mIt)?n:null==t?void 0:t.mIt}}async function cH(t,i,e,s,n){const r=i.filter((t=>Ji(t,"audio"))),h=i.filter((t=>Ji(t,"video"))),o=[],a=e.map((t=>async function(t,i,e){if(!t.xst)return;if(!t.pIt)return;if(t.mS!==$o.yIt)return;const s=lH(t.pIt);if(!s)return;if(s.Rb===ba)return{Ux:s,Qz:[],Fz:void 0,Kj:t.xst};if(s.Rb===kp&&t.pIt===jp)return{Ux:s,Qz:[],Fz:t.xst,Kj:void 0};{p.oN("HLSDrmUtils","Fetching key uri "+t.xst+".");const n=await i.BI({Iu:t.xst,NS:e});return{Ux:s,Qz:[await n.jj()],Fz:void 0,Kj:void 0}}}(t,s,n)));var u;const c=function(t,i){if(0===i.length)return t;const e=t=>{const e=i.indexOf(t.Ux.Rb);return e>=0?e:i.length};return Ec(t,((t,i)=>e(t)-e(i)))}((await Promise.all(a)).filter(oe),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const i of c){const e=NF(null!=t?t:{},i.Ux),s="cbcs";o.push({Ux:i.Ux,Qz:i.Qz,Fz:i.Fz,Kj:i.Kj,RP:[{initDataTypes:[i.Ux.Pb],audioCapabilities:DF(r,s,null==e?void 0:e.audioRobustness),videoCapabilities:DF(h,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]})}return o}function lH(t){return t===Ct?zp:t===Sp?En:t===Op?Pp:t===jp?Bp:void 0}function dH(t){if("#"!==t[0])throw new k("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function fH(t){return"#"!==t[0]?t:t.split(":",1)[0]}function _H(t){const i=t.indexOf(":");if(-1===i||t.length<i+1)throw new k("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(i+1)}function gH(t){const i=mn(_H(t));if(void 0===i)throw new k("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return i}function ui(t){const i={},e=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=e.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?i[n]=r:p.oDt(xn,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=e.exec(t)}return i}function wH(t,i){const e=ui(t);let s,n;try{s=e.URI?le.Sv(e.URI,i):void 0,n=function(t){switch(t){case"AUDIO":return ve.Gv;case"VIDEO":return ve.Yv;case"SUBTITLES":return ve.HM;case"CLOSED-CAPTIONS":return ve.MIt}throw new k("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(e.TYPE)}catch(i){throw new k("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const r=e["GROUP-ID"],h=e.LANGUAGE,o=e["ASSOC-LANGUAGE"],a=e.NAME,u="YES"===e.DEFAULT;let c="YES"===e.AUTOSELECT;const l="YES"===e.FORCED,d=e["INSTREAM-ID"],f=e.CHARACTERISTICS,_=e.CHANNELS;if(r||p.oDt(xn,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),h||p.oDt(xn,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),a||p.oDt(xn,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),n===ve.MIt?(s&&p.oDt(xn,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),d?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(d)||p.oDt(xn,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):p.oDt(xn,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):d&&p.oDt(xn,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),u&&!c&&(c=!0,e.AUTOSELECT&&p.oDt(xn,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),e.FORCED&&n!==ve.HM&&p.oDt(xn,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===r||void 0===a)throw new k("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{TIt:o,NIt:_,NNt:f,yNt:r,mNt:c,vNt:u,pNt:l,MNt:d,ys:h,v:a,$w:n,xst:s}}function AH(t,i,e){const s=ui(t);let n,r,h;try{n=le.Sv(e,i),h=function(t){if(void 0===t)return;const i=t.split("x"),e=Number(i[0]),s=Number(i[1]);if(M(e)||M(s))throw new k("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{Ti:e,Mi:s}}(s.RESOLUTION),r=function(t){if(!t)return;let i,e,s;const n=t.split(",");for(const t of n){const n=t.trim();Lt(n,"mp4a")?i="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n?i=n:Lt(n,"avc")||Lt(n,"hvc1")||Lt(n,"hev1")||Lt(n,"dvh")||Lt(n,"vp09")||Lt(n,"av01")?e=t:s=s?s+","+n:n}return{ZNt:i,KNt:e,mIt:s}}(s.CODECS)}catch(i){throw new k("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const o=mn(s.BANDWIDTH),a=mn(s["AVERAGE-BANDWIDTH"]),u=mn(s.SCORE),c=mn(s["FRAME-RATE"]),l=s["HDCP-LEVEL"],d=[];if(void 0!==s["ALLOWED-CPC"]){const t=s["ALLOWED-CPC"].split(",");d.push(...t.map((t=>{const i=t.split(":");return{keysystem:i[0],label:i[1]}})))}const f=s["VIDEO-RANGE"],_=s.AUDIO,g=s.VIDEO,w=s.SUBTITLES,A=s["CLOSED-CAPTIONS"];if(void 0===o?p.oDt(xn,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==a&&a>o&&p.oDt(xn,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),r||p.oN(xn,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),r&&r.KNt&&void 0===h&&p.oN(xn,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===l||ks(["TYPE-0","TYPE-1","NONE"],l)||p.oDt(xn,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===f||ks(["SDR","PQ","HLG"],f)||p.oDt(xn,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===o)throw new k("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{DIt:d,IIt:_,bst:a,jz:o,SIt:A,Tet:r,Eet:c,EIt:l,tDt:h,eIt:u,bIt:w,xst:n,LIt:g,kIt:f}}function vH(t,i){const e=ui(t);if(!e.URI)throw new k("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return AH(t,i,e.URI)}catch(i){throw new k("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function mn(t){const i=Number(t);return M(i)?void 0:i}function mH(t,i){const e=ui(t);let s,n;try{s=function(t){switch(t){case"NONE":return $o.uB;case"AES-128":return $o.xIt;case"SAMPLE-AES":return $o.yIt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new k("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(e.METHOD),n=e.URI?SH(e.URI,i):void 0}catch(i){throw new k("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=e.KEYFORMAT,h=e.IV,o=e.KEYFORMATVERSIONS;let a,u,c,l,d;if(s!==$o.uB){if(c=r||jp,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(lH(c)!==zp)throw new k("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=$o.yIt}else a=s;u=n,l=h?pn(h):void 0,d=o?o.split("/").map((t=>Number(t))):[1]}else a=$o.uB,(n||r||o||h)&&p.oDt(xn,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{mS:a,xst:u,CIt:l,pIt:c,OIt:d}}function pH(t){const i=_H(t);if(!i)return[void 0,""];const[e,s]=i.split(",");return[mn(e),s]}function yH(t,i){const e=t.split("@"),s=mn(e[0]),n=e.length>1?mn(e[1]):i;if(void 0===s||void 0===n)throw new k("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{yn:n,L:s}}function MH(t){if(void 0!==t)return yH(t,void 0)}function TH(t,i){return yH(_H(t),i)}function NH(t,i){const e=ui(t);try{const t=SH(e.URI,i);return{zy:t,Frt:MH(e.BYTERANGE)}}catch(i){throw new k("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function DH(t){const i=_H(t);if(!i)throw new k("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const e=new Date(i);if(!_D(e))throw new k("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return e}function IH(t){const i=ui(t),e=i["START-DATE"],s=i["END-DATE"],n=mn(i["PLANNED-DURATION"]);let r,h,o,a=mn(i.DURATION);void 0!==i["SCTE35-CMD"]&&(r=pn(i["SCTE35-CMD"]).buffer),i["SCTE35-IN"]&&(h=pn(i["SCTE35-IN"]).buffer),i["SCTE35-OUT"]&&(o=pn(i["SCTE35-OUT"]).buffer);const u="YES"===i["END-ON-NEXT"],c=function(t){const i={};for(const e of C.keys(t)){const s=t[e];void 0!==s&&Lt(e,"X-")&&(i[e]=s)}return i}(i),l=i.ID,d=i.CLASS;let f,_;if(void 0===e)p.oDt(xn,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+e+".");else if(f=new Date(e),_=void 0!==s?new Date(s):void 0,_D(f)||p.oDt(xn,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const i=new Date(f.getTime()+1e3*a);_?_.getTime()!==i.getTime()&&(p.oDt(xn,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),_=i):_=i}else _&&(a=(f.getTime()-_.getTime())/1e3);if(u&&(i.CLASS||p.oDt(xn,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),i.DURATION&&p.oDt(xn,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),_&&p.oDt(xn,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===l&&p.oDt(xn,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===l||void 0===f)throw new k("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{u:l,cIt:d,cP:f,lIt:_,lt:a,dIt:n,wIt:r,vIt:h,AIt:o,uIt:u,_It:c}}function SH(t,i){if(void 0===t)throw new k("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return le.Sv(t,i)}function EH(t,i){const e=ui(t),s=mn(e.DURATION),n=SH(e.URI,i),r=MH(e.BYTERANGE),h="YES"===e.INDEPENDENT,o="YES"===e.GAP;if(void 0===s)throw new k("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{lt:s,xst:{zy:n,Frt:r},jIt:h,zIt:o}}function bH(t){const i=ui(t);return{PIt:"YES"===i["CAN-BLOCK-RELOAD"],BIt:mn(i["CAN-SKIP-UNTIL"]),RIt:"YES"===i["CAN-SKIP-DATERANGES"],UIt:mn(i["HOLD-BACK"]),QIt:mn(i["PART-HOLD-BACK"])}}function LH(t,i){const e=ui(t);if(void 0===e.URI)throw new k("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=SH(e.URI,i),n=mn(e["LAST-MSN"]),r=mn(e["LAST-PART"]);if(void 0===n)throw new k("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{xst:s,FIt:n,YIt:r}}function kH(t,i){var e;const s=ui(t),n=mn(s["SKIPPED-SEGMENTS"]),r=null==(e=s["RECENTLY-REMOVED-DATERANGES"])?void 0:e.split("\t");if(!n)throw new k("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{GIt:n,WIt:r,VIt:i}}function xH(t){const i=mn(ui(t)["PART-TARGET"]);if(void 0===i)throw new k("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return i}function CH(t){switch(_H(t)){case"VOD":return wt.HIt;case"EVENT":return wt.qIt;default:return p.oDt(xn,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),wt.Hv}}function OH(t,i){const e=ui(t);let s,n;try{s=function(t){if(void 0===t)throw new k("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return tH.XIt;if("PART"===t)return tH.ZIt;throw new k("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(e.TYPE),n=SH(e.URI,i)}catch(i){throw new k("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=mn(e["BYTERANGE-START"]),h=mn(e["BYTERANGE-LENGTH"]);let o;return void 0===r&&void 0===h||(o={yn:r||0,L:h}),{$w:s,xst:{zy:n,Frt:o}}}r(),r(),r(),r(),r(),function(t){t[t.Gv=0]="Gv",t[t.Yv=1]="Yv",t[t.HM=2]="HM",t[t.MIt=3]="MIt"}(ve||(ve={})),function(t){t[t.XIt=0]="XIt",t[t.ZIt=1]="ZIt"}(tH||(tH={})),function(t){t[t.uB=0]="uB",t[t.xIt=1]="xIt",t[t.yIt=2]="yIt"}($o||($o={})),function(t){t[t.Hv=0]="Hv",t[t.HIt=1]="HIt",t[t.qIt=2]="qIt"}(wt||(wt={})),r(),r(),r();var jH=class t{KIt(){const t=this.JIt[this.$It];return this.$It+=1,t}tSt(){return this.JIt[this.$It]}Lm(){const i=new t("");return i.$It=0,i.JIt=this.JIt.slice(this.$It),i}static iSt(t){if(!t)return[];return t.split(/[\r\n]+/).map((t=>t.trim())).filter((t=>t))}constructor(i){this.$It=0,this.JIt=t.iSt(i)}};function zH(t,i,e){const s=t.xst;let n=t.DT,r=t.eSt,h=t.yn;switch(e){case"#EXT-X-VERSION":n=function(t){const i=gH(t);return M(i)?(p.oDt(xn,"Playlist version is NaN: "+t+"."),1):i}(i);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":h=function(t){const i=ui(t),e=mn(i["TIME-OFFSET"]);if(void 0===e)throw new k("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{sSt:e,nSt:"YES"===i.PRECISE}}(i);break;case"#EXT-X-DEFINE":p.oDt(xn,"Ignoring unsupported #EXT-X-DEFINE: "+i+".");break;default:p.oN(xn,"Ignoring unrecognized line or comment: "+i+".")}return{xst:s,DT:n,eSt:r,yn:h}}function PH(t,i){return t.map((t=>t.mS===$o.uB||t.CIt?t:qr({},t,{CIt:BH(i)})))}function BH(t){const i=new DataView(new ArrayBuffer(16)),e=new Eo;return e.Sm(8),bA(i,e,Gt.fromNumber(t)),new A(i.buffer)}function RH(t,i,e){p.oN(xn,"Parsing M3U8 playlist at "+t+".");const s=new jH(e);if("#EXTM3U"!==s.KIt())throw new k("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(e)?function(t,i){let e;try{e=le.Sv(t)}catch(i){throw p.oDt(xn,"The master playlist has no valid base URI: "+t+"."),new k("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let s={xst:e,eSt:void 0,yn:void 0,DT:void 0};const n=[],r=[],h=[],o=[];for(;;){const t=i.KIt();if(!t)break;try{const a=dH(t);switch(a){case"#EXT-X-MEDIA":{const i=wH(t,e);n.push(i);break}case"#EXT-X-STREAM-INF":{const s=AH(t,e,i.KIt());r.push(s);break}case"#EXT-X-I-FRAME-STREAM-INF":{const i=vH(t,e);h.push(i);break}case"#EXT-X-SESSION-DATA":p.oDt(xn,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const i=mH(t,e);o.push(i);break}default:s=zH(s,t,a)}}catch(i){p.oDt(xn,"Ignoring unparsable line: "+t,i)}}let a=s.DT;var u;const c=null!=(u=s.eSt)&&u,l=s.yn;return void 0===a&&(p.oDt(xn,"The playlist has no #EXT-X-VERSION, assuming version is 2."),a=2),a>=8&&(r.some((t=>void 0!==t.eIt))||h.some((t=>void 0!==t.eIt)))&&(r.some((t=>void 0===t.eIt))||h.some((t=>void 0===t.eIt)))&&p.oDt(xn,"If one master playlist variant stream has a SCORE, all variants should have it."),{xst:e,DT:a,eSt:c,yn:l,rSt:h,hSt:o,ZT:n,oSt:r}}(t,s):function(t,i,e){let s={xst:t,eSt:void 0,yn:void 0,DT:void 0};const n=[];let r,h,o,a,u=!1,c=!1;const l=[],d=Mt();let f,_,g,w,A,v,m,y,M,T=[],N=[],D=!1,I=!1;const S=[],E=[];let b,L,x,C,O,j=0,z=!1,P=wt.Hv,B=!1,R=0;try{O=le.Sv(t)}catch(i){throw p.oDt(xn,"The media playlist has no valid base URI: "+t+".",i),new k("HLSPlaylistParser - Could not parse HLS media playlist.")}const U=e.Lm();for(;void 0===L||void 0===x;){const t=U.KIt();if(!t)break;try{switch(fH(t)){case"#EXT-X-MEDIA-SEQUENCE":L=gH(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":x=gH(t)}}catch(i){p.oDt(xn,"Ignoring unparsable line: "+t,i)}}void 0===L&&(p.oN(xn,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),L=0),void 0===x&&(p.oN(xn,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),x=0);let Q=L,F=x;for(;;){const t=e.KIt();if(!t)break;let i=!1;try{const e=fH(t);switch(e){case"#EXTINF":i=!0,[f,_]=pH(t);break;case"#EXT-X-BYTERANGE":i=!0,g=TH(t,j),g&&(j=g.yn+g.L);break;case"#EXT-X-DISCONTINUITY":i=!0,D=!0,F++;break;case"#EXT-X-KEY":{var Y;i=!0;const e=mH(t,O);if(e.mS===$o.uB){d.clear(),M=void 0;break}var G;const s=null!=(G=null==(Y=e.pIt)?void 0:Y.toString())?G:"identity";d.set(s,e),e.mS===$o.xIt&&(M=e);break}case"#EXT-X-MAP":i=!0,A=NH(t,O),v=M;break;case"#EXT-X-PROGRAM-DATE-TIME":i=!0,m=DH(t);break;case"#EXT-X-GAP":i=!0,I=!0;break;case"#EXT-X-BITRATE":i=!0,y=gH(t);break;case"#EXT-X-TARGETDURATION":r=gH(t);break;case"#EXT-X-DATERANGE":{const i=IH(t);n.push(i);break}case"#EXT-X-PART":{i=!0;const e=EH(t,O);N.push(e);break}case"#EXT-X-PRELOAD-HINT":{const i=OH(t,O);S.push(i);break}case"#EXT-X-SKIP":{l.length>0&&p.oDt(xn,"#EXT-X-SKIP must appear before any #EXTINF tags."),i=!0;const e=kH(t,Q);R=e.GIt,C=e.WIt,Q+=e.GIt;break}case"#EXT-X-SERVER-CONTROL":{const i=bH(t);u=i.PIt,h=i.BIt,c=i.RIt,o=i.UIt,a=i.QIt;break}case"#EXT-X-RENDITION-REPORT":{const i=LH(t,O);E.push(i);break}case"#EXT-X-PART-INF":b=xH(t);break;case"#EXT-X-MEDIA-SEQUENCE":i&&p.oDt(xn,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":i&&p.oDt(xn,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":z=!0;break;case"#EXT-X-PLAYLIST-TYPE":P=CH(t);break;case"#EXT-X-I-FRAMES-ONLY":B=!0;break;default:if(Lt(e,"#"))s=zH(s,t,e);else{w=le.Sv(t,O);const i=A?{xst:A,aSt:v}:void 0,e={hSt:PH(W_(d),Q),hI:T,uSt:N,lt:f,vP:_,cSt:D,xst:{Frt:g,zy:w},lSt:i,dSt:m,zIt:I,fSt:y,VIt:Q,_St:F};l.push(e),Q++,T=[],N=[],f=void 0,_=void 0,D=!1,g=void 0,w=void 0,m=void 0,I=!1,y=void 0}}}catch(i){p.oDt(xn,"Ignoring unparsable line: "+t,i)}}if(N.length){const t=A?{xst:A,aSt:M}:void 0,i={hSt:PH(W_(d),Q),hI:T,uSt:N,lt:f,vP:_,cSt:D,xst:void 0,lSt:t,dSt:m,zIt:I,fSt:y,VIt:Q,_St:F};l.push(i)}let W=s.DT;var V;const H=null!=(V=s.eSt)&&V,q=s.yn;void 0===W&&(p.oDt(xn,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),W=2),void 0===r&&p.oDt(xn,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const X=l.length,Z=X>0;Z||p.oDt(xn,"The HLS media playlist contains no segments.");const K=Z&&l[X-1].uSt.length>0;return K&&void 0===b&&p.oDt(xn,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),K&&void 0===a&&p.oDt(xn,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{PIt:u,BIt:h,RIt:c,gSt:n,_St:x,wSt:z,eSt:H,UIt:o,ASt:B,VIt:L,GIt:R,QIt:a,$Dt:b,vSt:P,mSt:S,WIt:C,pSt:E,ySt:r,vit:l,yn:q,xst:O,MSt:i,DT:W}}(t,i,s)}r(),r();var UH=class{get xst(){return this.ANt.xst}get Tet(){return this.TSt}set Tet(t){this.TSt=t?FH(t):void 0,this.NSt=!0}get DSt(){return this.NSt}get bst(){return this.ISt||this.jz}get SSt(){if(!this.ESt.length)return re.ZB();var t,i;const e=null!=(i=gh(this.ESt,(i=>null!=(t=i.ANt.bSt)?t:0)))?i:this.wDt[0],s=e.ANt.vit;if(!s.length||s.length<2)return re.ZB();const n=e.ANt.wSt?s[0].Fm:s[1].Fm;var r,h;const o=s[s.length-1].Ym-this.wDt.reduce(((t,i)=>S.max(null!=(h=null!=(r=i.ANt.QIt)?r:i.ANt.UIt)?h:0,t)),0);return o<n?re.ZB():new re([n,o])}get wDt(){return this.ESt}get cDt(){return this.ESt.filter((t=>t.$w===ve.Gv))}get lDt(){return this.ESt.filter((t=>t.$w===ve.Yv))}get LSt(){return this.ESt.filter((t=>t.$w===ve.HM))}get kSt(){return this.ESt.filter((t=>t.$w===ve.MIt))}xSt(t){for(const i of this.ESt){const e=i.ANt.xSt(t);if(void 0!==e)return e}}CSt(t){for(const i of this.ESt){const e=i.ANt.CSt(t);if(void 0!==e)return e}}OSt(t){Hc(this.ESt,t)}constructor(t,i,e){var s,n,r,h;this.u=QH++,this.eIt=void 0,this.tDt=void 0,this.ISt=void 0,this.NSt=!1,this.ESt=[],this.ANt=i,this.jz=t.jz,this.ISt=t.bst,this.eIt=t.eIt,this.TSt=t.Tet?FH(t.Tet):void 0,this.tDt=t.tDt,this.Eet=t.Eet,this.IIt=null!=(s=t.IIt)?s:"jSt"+this.u,this.LIt=null!=(n=t.LIt)?n:"zSt"+this.u,this.bIt=null!=(r=t.bIt)?r:"PSt"+this.u,this.SIt=null!=(h=t.SIt)?h:"BSt"+this.u,this.ESt=e}},QH=0;function FH(t){return qr({},t,{KNt:t.KNt?lm(t.KNt):void 0})}r(),r(),r();var xr,YH=class{get Fm(){var t;return this.$m+(null!=(t=this.RSt)?t:0)}get USt(){return this.QSt}get hSt(){return this.FSt.hSt}YSt(t,i){this.$m=t,this.QSt=i}constructor(t,i,e,s,n){this.n8=void 0,this.FSt=t,this.GSt=i,this.$m=e,this.QSt=s,this.lt=n.lt,this.xst=n.xst,this.jIt=n.jIt,this.zIt=n.zIt}},GH=class{get Fm(){var t;return this.$m+(null!=(t=this.WSt)?t:0)}get VSt(){return this.$m}get lt(){return this.KL}get xst(){return this.HSt}get qSt(){return this.XSt}get USt(){return this.QSt}get uSt(){return this.ZSt}get KSt(){return this.JSt}get Ym(){var t;return this.Fm+(null!=(t=this.KL)?t:this.JSt)}set RSt(t){this.WSt=t;for(const i of this.ZSt)i.RSt=t}get RSt(){return this.WSt}$St(t){return this.ZSt[t]}tEt(t){for(let i=0;i<this.ZSt.length;i++){const e=this.ZSt[i],s=e.Fm,n=s+e.lt;if(s<=t&&t<=n)return t===n&&i+1<this.ZSt.length?this.ZSt[i+1]:e}}iEt(t){for(let i=this.ZSt.length-1;i>=0;i--){const e=this.ZSt[i];if(e.Fm<=t)return e}}eEt(t){let i=this.iEt(t);for(;i&&!i.jIt&&i.GSt>0;)i=this.$St(i.GSt-1);return i}YSt(t,i,e){const s=t.uSt.length!==this.ZSt.length||e!==this.QSt;this.XSt=i,this.QSt=e,this.KL=t.lt,null!=this.dSt||(this.dSt=t.dSt),void 0===this.HSt&&(this.HSt=t.xst),s&&this.sEt(t.uSt)}sEt(t){this.ZSt.length>t.length&&(this.ZSt.length=t.length);let i=0;for(let e=0;e<t.length;e++){const s=t[e],n=this.QSt&&e===t.length-1,r=this.$m+i;if(e<this.ZSt.length)this.ZSt[e].YSt(r,n);else{const t=new YH(this,e,r,n,s);this.ZSt.push(t)}i+=s.lt}this.JSt=i}nEt(){sr(this.ZSt),this.JSt=0}constructor(t,i,e,s,n){this.n8=void 0,this.ZSt=[],this.JSt=0,this.$m=t,this.lSt=n.lSt,this.XSt=e,this.QSt=s,this.KL=n.lt,this.dSt=n.dSt,this.HSt=n.xst,this.zIt=n.zIt,this.VIt=n.VIt,this.cSt=n.cSt,this._St=i,this.hSt=n.hSt,this.sEt(n.uSt)}};r(),function(t){t.rEt="YES",t.hEt="v2"}(xr||(xr={})),r();var WH=class extends Ga{};r(),r(),r();var VH=class extends Ss{get so(){return this.Oa||(this.Oa=function(t){return Wt(fc(t),{get content(){return t.V},get class(){return t.cIt},get startDate(){return t.cP},get endDate(){return t.lIt},get duration(){return t.lt},get plannedDuration(){return t.dIt},get endOnNext(){return t.uIt},get scte35Cmd(){return t.gIt},get scte35Out(){return t.AIt},get scte35In(){return t.vIt},get customAttributes(){return t.fIt}})}(this)),this.Oa}get cIt(){return this.oEt}get cP(){return this.aEt}get lIt(){return this.uEt}get lt(){return this.KL}get dIt(){return this.cEt}get uIt(){return this.lEt}get gIt(){return this.dEt}get AIt(){return this.fEt}get vIt(){return this._Et}get fIt(){return this.gEt}Hn(t){let i=!1;var e;(void 0===this.oEt&&void 0!==t.cIt&&(i=!0,this.oEt=t.cIt),void 0===this.uEt&&void 0!==t.lIt&&(i=!0,this.uEt=t.lIt),void 0===this.KL&&void 0!==t.lt&&(i=!0,this.KL=t.lt),void 0===this.cEt&&void 0!==t.dIt&&(i=!0,this.cEt=t.dIt),!this.lEt&&t.uIt&&(i=!0,this.lEt=t.uIt),i=this.updateCustomAttributes(t,i),void 0===this.dEt&&void 0!==t.gIt&&(i=!0,this.dEt=t.gIt),void 0===this.fEt&&void 0!==t.AIt&&(i=!0,this.fEt=t.AIt),void 0===this._Et&&void 0!==t.vIt&&(i=!0,this._Et=t.vIt),this.wEt(),this.AEt(),this.vEt(),i)&&(this.jo(new Pa(this)),null==(e=this.tp)||e.jo(new Ya(this)))}updateCustomAttributes(t,i){let e=i;if(t.fIt)for(const i of C.keys(t.fIt))void 0===this.gEt[i]&&(e=!0,this.gEt[i]=t.fIt[i]);return e}wEt(){this.KL&&!this.uEt&&(this.uEt=new Date(this.aEt.getTime()+ee(this.KL)))}AEt(){this.uEt&&!this.KL&&(this.KL=gD(this.uEt.getTime()-this.aEt.getTime()))}vEt(){this.ep===1/0&&(this.uEt||this.KL)&&(this.ep=HH(this.$m,this.KL,this.aEt,this.uEt))}constructor(t,i){super(i,HH(i,t.lt,t.cP,t.lIt),void 0,!1,t.u),this.oEt=t.cIt,this.aEt=t.cP,this.uEt=t.lIt,this.KL=t.lt,this.cEt=t.dIt,this.lEt=Boolean(t.uIt),this.gEt=t.fIt||{},this.dEt=t.gIt,this.fEt=t.AIt,this._Et=t.vIt,this.wEt(),this.AEt()}};function HH(t,i,e,s){return oe(i)?t+i:s?t+(gD(s.getTime())-gD(e.getTime())):1/0}var qH=class extends Rx{Hn(t,i){XH(this,ZH(t),i)}CS(t){KH(this.H.Nw,t),super.CS(t)}constructor(){super(void 0,void 0,jo.DATE_RANGE)}};function XH(t,i,e){const s=t.H.Nw;for(let e=s.length-1;e>=0;e--){const n=s[e],r=xe(i,(t=>t.u===n.u));r?n.Hn(r):t.GI(n)}for(const s of i){const i=s.cP;if(void 0!==i&&!t.Y$(s.u)){const n=e(i),r=new VH(s,n);KH(t.H.Nw,r),t.CS(r)}}}function ZH(t){const i=Mt(),e=[];for(const s of t)if(i.has(s.u)){const t=i.get(s.u),e=qr({},t,wg(s),{fIt:qr({},t.fIt,s.fIt)});i.set(s.u,e)}else i.set(s.u,s),e.push(s.u);return e.map((t=>i.get(t)))}function KH(t,i){const e=j_(t,(t=>t.cIt===i.cIt));e&&e.uIt&&e.Hn({u:e.u,lIt:i.cP})}var JH=String.fromCharCode(95),$H=JH+"HLS_msn",tq=JH+"HLS_part",iq=JH+"HLS_skip",eq="HLSMediaPlaylist",sq=class{get wSt(){return Boolean(xe(this.grt,(t=>t.USt)))}get lt(){return this.KL}get cg(){return this.a$}get mEt(){return this.pEt}get tIt(){return this.yEt}get $Dt(){return this.MEt}get UIt(){return this.wSt?0:this.TEt?this.TEt:this.yEt?3*this.yEt:void 0}get QIt(){var t;return null!=(t=this.NEt)?t:this.MEt?3*this.MEt:void 0}get DEt(){if(this.wSt)return;if(0===this.grt.length)return;const t=this.grt[this.grt.length-1];var i,e;const s=null!=(e=null!=(i=this.QIt)?i:this.UIt)?e:0;return t.Ym-s}get PIt(){return this.IEt}get BIt(){return this.SEt}get RIt(){return this.EEt}get vSt(){return this.bEt}get LEt(){return void 0!==this.$Dt}get kEt(){if(this.wSt)return!0;const t=le.n_()/1e3,i=this.bSt,e=this.xEt;return void 0!==i&&t-i<e}get bSt(){return this.CEt}get RSt(){return this.WSt}get xEt(){var t;return null!=(t=this.yEt)?t:void 0===this.CEt?5:1}get vit(){return this.grt}get gSt(){return this.OEt}get jEt(){return this.zEt}set jEt(t){this.zEt=t}get yn(){return this.wI}get PEt(){return this.BEt}XNt(t){if(!t)return this.xst;const i=le.Ph(this.xst);return void 0!==t.VIt&&i.searchParams.append($H,String(t.VIt)),void 0!==t.REt&&i.searchParams.append(tq,String(t.REt)),void 0!==t.uT&&i.searchParams.append(iq,t.uT),i.href}s_t(t){const i=this.grt;if(0===i.length)return;const e=t-i[0].VIt;return e<0||e>=i.length?void 0:i[e]}UEt(t){if(0===this.grt.length)return;const i=NU(nq.Lb,this.grt,t);if(!(i<0)){const e=this.grt[i];return t===e.Ym&&i+1<this.grt.length?this.grt[i+1]:e}{const i=this.grt[this.grt.length-1];if(t===i.Ym)return i}}QEt(t){if(0===this.grt.length)return;const i=this.grt[0];if(t<i.Ym)return i;const e=this.grt[this.grt.length-1];return t>=e.Fm?e:this.UEt(t)}xSt(t){const i=this.QEt(t);if(void 0===i)return;for(let e=i.VIt-this.grt[0].VIt;e>=0;e--){const i=this.grt[e];if(void 0!==i.dSt)return new Date(i.dSt.getTime()+1e3*(t-i.Fm))}}CSt(t){let i;for(const e of this.grt)if(rq(e))if(void 0===i)i=e;else{if(!(e.dSt.getTime()<=t.getTime()))break;i=e}if(void 0!==i)return i.Fm+(t.getTime()-i.dSt.getTime())/1e3}FEt(t){switch(t){case tH.XIt:return this.YEt;case tH.ZIt:return this.GEt;default:return}}YSt(t){var i;void 0===this.yEt&&(this.yEt=null!=(i=t.ySt)?i:this.WEt(t));void 0===this.TEt&&void 0!==t.UIt&&(this.TEt=t.UIt),void 0===this.MEt&&void 0!==t.$Dt&&(this.MEt=t.$Dt),void 0===this.NEt&&void 0!==t.QIt&&(this.NEt=t.QIt),this.IEt=t.PIt,this.SEt=t.BIt,this.EEt=t.RIt,this.bEt=t.vSt,this.prt(t),this.VEt(t);const e=xe(t.mSt,(t=>t.$w===tH.XIt)),s=xe(t.mSt,(t=>t.$w===tH.ZIt));this.YEt=e?{xst:e.xst,$w:e.$w,_St:t._St}:void 0,this.GEt=s?{xst:s.xst,$w:s.$w,_St:t._St}:void 0,this.CEt=le.n_()/1e3,this.HEt(),null!=this.wI||(this.wI=t.yn)}HEt(){this.pEt=this.qEt(),this.a$=this.XEt(this.pEt),this.KL=this.ZEt()}qEt(){const t=this.vit;if(0===t.length)return re.ZB();const i=t[0].Fm,e=t[t.length-1].Ym;return new re([i,e])}XEt(t){if(0===t.L||this.wSt)return t;const i=t.yn(0);var e,s;const n=t.wn(0)-(null!=(s=null!=(e=this.QIt)?e:this.UIt)?s:0);return n<i?re.qB(i):new re([i,n])}ZEt(){return 0===this.grt.length?0:this.wSt?function(t,i){return t.reduce(((t,e)=>t+i(e)),0)}(this.grt,(i=>null!=(t=i.lt)?t:i.KSt)):1/0;var t}WEt(t){let i;for(const e of t.vit)if(void 0!==e.lt){const t=S.max(1,S.round(e.lt));(void 0===i||i<t)&&(i=t)}if(void 0===i)throw new k("HLSModel - Could not determine required segment target duration.");return i}prt(t){if(0===t.vit.length)return sr(this.grt),void this.KEt();const i=this.JEt(t);if(!i)return;let e,s,n;i.$Et>0&&this.grt.splice(0,i.$Et);const r=t.GIt;if(r>0){if(r>this.grt.length)throw new WH("New playlist skips over missing segments.");const i=this.grt[r-1];if(void 0===i.lt)throw new WH("New playlist skips over an incomplete segment.");e=i.VSt+i.lt,n=i._St-t._St,s=r;for(let t=0;t<r;t++)this.grt[t].nEt()}else e=i.tbt,n=0,s=0;for(let i=0;i<t.vit.length;i++,s++){const r=t.vit[i],h=0===i,o=t.wSt&&i===t.vit.length-1,a=r.lt,u=r._St+n;if(s<this.grt.length){const t=this.grt[s];0,t.YSt(r,h,o)}else{let t=r;if(this.grt.length>0&&void 0===t.lSt){t=qr({},t,{lSt:this.grt[this.grt.length-1].lSt})}const i=new GH(e,u,h,o,t);i.RSt=this.WSt,this.grt.push(i)}void 0!==a&&(e+=a)}}JEt(t){if(0===this.grt.length)return{$Et:0,tbt:0};const i=this.grt[0].VIt,e=this.grt[this.grt.length-1].VIt,s=t.vit[0].VIt-t.GIt,n=t.vit[t.vit.length-1].VIt;let r=0,h=0;if(s<i){const e=this.vit[0].dSt,n=t.vit[0].dSt;if(!(e&&n&&e<n))return void p.oDt(eq,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+i+")");r=this.grt.length,this.KEt()}else{if(n<e)return void p.oDt(eq,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+e+")");if(e<s){var o;h=null!=(o=function(t,i){const e=j_(t,(t=>void 0!==t.dSt));if(void 0===e)return;const s=function(t){let i=0;for(const s of t){if(s.cSt)return;if(s.dSt)return[s,i];var e;i+=null!=(e=s.lt)?e:0}return}(i.vit);if(void 0===s)return;const[n,r]=s;if(e._St!==n._St)return;const h=(n.dSt.getTime()-e.dSt.getTime())/1e3;return e.VSt+h-r}(this.grt,t))?o:function(t,i,e){const s=t[t.length-1];var n;const r=null!=(n=s.lt)?n:S.max(e,s.KSt),h=e*(i-s.VIt-1);return s.VSt+r+h}(this.grt,s,this.yEt),p.hDt(eq,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+e+"), resetting playlist and restarting at "+h+"s"),r=this.grt.length,this.KEt()}else{0;const t=qt(this.grt,(t=>t.VIt===s));0,h=this.grt[t].VSt,t>0&&(r=t)}}return{$Et:r,tbt:h}}VEt(t){let i=t.gSt.map(aH);if(t.RIt&&t.MSt.uT===xr.hEt&&(i=this.OEt.concat(i)),this.OEt=ZH(i),t.WIt)for(const i of t.WIt){const t=qt(this.OEt,(t=>t.u===i));t>=0&&Ks(this.OEt,t)}}ibt(t,i){if(this.WSt!==t){this.WSt=t;for(const t of this.grt)t.RSt=this.WSt;this.HEt()}this.BEt=i}KEt(){this.WSt=void 0,this.BEt=void 0}constructor(t,i){this.CEt=void 0,this.YEt=void 0,this.GEt=void 0,this.yEt=void 0,this.MEt=void 0,this.TEt=void 0,this.NEt=void 0,this.grt=[],this.OEt=[],this.IEt=!1,this.SEt=void 0,this.EEt=!1,this.bEt=wt.Hv,this.a$=re.ZB(),this.pEt=re.ZB(),this.KL=void 0,this.zEt=-1/0,this.BEt=void 0,this.xst=t,this.wI=i}},nq=class t{static get Lb(){return null!=this.Yit||(this.Yit=new t),this.Yit}lrt(t){return t.Fm}drt(t){return t.Ym}frt(t,i){return de(t,i)}_rt(t,i,e){return(t-i)/(e-i)}};function rq(t){return void 0!==t.dSt}function hq(t){return void 0!==t.uSt}function oq(t){return hq(t)?t.qSt:0===t.GSt&&t.FSt.qSt}function aq(t,i){return hq(t)?hq(i)?t.VIt+1===i.VIt:0===i.GSt&&aq(t,i.FSt):t.GSt===t.FSt.uSt.length-1?aq(t.FSt,i):!hq(i)&&t.FSt===i.FSt&&t.GSt+1===i.GSt}r(),r();var uq=class{ebt(t){const i=this.sbt.get(t);return void 0!==i&&cq(i)}nbt(t){return this.hbt(t).rbt.sL}obt(t){const i=this.sbt.get(t);if(!i||!cq(i))throw new k("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return i}abt(t){return this.obt(t).Zy}ubt(t,i){const e=hq(i)?i:i.FSt,s=this.obt(e._St);let n=t.gm(s.Zy);if(s.cbt){const t=So.Ey(i.Fm).bp(n);if(t.Ip().mp(vv())){const i=S.round(t.vp()/In().vp());n=n.gm(In().oy(i))}}return n}lbt(t,i){return this.ubt(t,i).bp(t)}dbt(t,i,e,s,n){const r=this.hbt(t);void 0===r.Zy&&(r.fbt.some((t=>t.aat===i))||(r.fbt.push({aat:i,_bt:e,gbt:s.Ny(e.vy),cbt:n}),this.wbt(r)))}wbt(t){if(t.Zy||!this.Abt(t))return;const i=dc(t.fbt,lq);sr(t.fbt),t.Zy=i.gbt.bp(i._bt),t.cbt=i.cbt,t.rbt.iL()}Abt(t){return this.vbt.length>0&&this.vbt.every((i=>t.fbt.some((t=>t.aat===i))))}hbt(t){if(this.sbt.has(t))return this.sbt.get(t);{const i={Zy:void 0,cbt:!1,rbt:new $s,fbt:[]};return this.sbt.set(t,i),i}}mbt(t){this.vbt=t,this.sbt.forEach((t=>this.wbt(t)))}Hf(){this.sbt.forEach((t=>t.rbt.i_())),this.sbt.clear()}constructor(){this.vbt=[],this.sbt=Kn()}};function cq(t){return void 0!==t.Zy}function lq(t,i){return t.cbt||i.cbt?function(t,i){let e=t.bp(i);return t.kp()||i.kp()||(e.yp(vv())?e=e.bp(In()):e.Dp(vv().Ep())&&(e=e.gm(In()))),e}(t._bt,i._bt).pp(So.zp):t._bt.pp(i._bt)}var dq=class{get pbt(){return this.ybt}get uDt(){return this.Mbt}get iI(){return this.Tbt}YSt(t,i){if(rH(t))if(0===this.Mbt.length)this.Nbt(t);else{if(!i)return void p.oDt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");i.ANt.YSt(t)}else{if(0!==this.Mbt.length)return void p.oDt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.Dbt(t)}}Nbt(t){const i=this.Ibt(t.xst);i.YSt(t);const e=this.Sbt(ve.Gv,i),s=this.Sbt(ve.Yv,i),n=new UH({xst:i.xst,jz:0,bst:0,eIt:NaN,Tet:void 0,tDt:void 0,Eet:0,DIt:[],EIt:void 0,kIt:void 0,IIt:void 0,LIt:void 0,bIt:void 0,SIt:void 0},i,[e,s]);this.Mbt.push(n)}Dbt(t){this.ybt.push(...t.hSt);const i=this.Ebt(t);for(const e of t.oSt){const s=i.filter((t=>_q(t,e)));this.bbt(e,s);const n=new UH(e,this.Ibt(e.xst,t.yn),s);this.Mbt.push(n)}}Ibt(t,i){let e=this.Lbt.get(t);return void 0===e&&(e=new sq(t,i),this.Lbt.set(t,e)),e}Ebt(t){const i=[];for(const e of t.ZT)if(void 0===e.xst){for(const s of t.oSt)if(fq(e.$w,e.yNt,s)){const t=new pV(e,this.Ibt(s.xst));i.push(t)}}else{const t=new pV(e,this.Ibt(e.xst));i.push(t)}return i}Sbt(t,i){return new pV({$w:t,xst:void 0,yNt:"",ys:void 0,TIt:void 0,v:"",vNt:!0,mNt:!1,pNt:!1,NNt:void 0,MNt:void 0,NIt:void 0},i)}bbt(t,i){const e=i.filter((t=>t.$w===ve.Gv)),s=i.filter((t=>t.$w===ve.Yv)),n=t.Tet&&(t.Tet.KNt||t.Tet.ZNt);if((!n||t.Tet.KNt)&&0===s.length){const e=this.Sbt(ve.Yv,this.Ibt(t.xst));i.push(e)}if((!n||t.Tet.ZNt)&&0===e.length){const e=this.Sbt(ve.Gv,this.Ibt(t.xst));i.push(e)}t.Tet&&t.Tet.mIt}kbt(t){for(const i of this.Mbt)for(const e of i.wDt)if(e===t)return e}xbt(t){for(const i of this.Mbt)if(i===t)return i}Cbt(t){for(const i of this.Mbt)if(ks(i.wDt,t))return i}Hf(){sr(this.Mbt),sr(this.ybt),this.Lbt.clear(),this.Tbt.Hf()}constructor(t){this.Obt=t,this.Mbt=[],this.ybt=[],this.Lbt=Mt(),this.Tbt=new uq}};function fq(t,i,e){switch(t){case ve.Gv:return e.IIt===i;case ve.Yv:return e.LIt===i;case ve.HM:return e.bIt===i;case ve.MIt:return e.SIt===i}return!1}function _q(t,i){return fq(t.$w,t.yNt,i)&&(!t.TNt||t.ANt.xst===i.xst)}r();var gq=class extends d{constructor(t){super(Yh.jbt),this.CNt=t}};r();var Yh,wq=class extends d{constructor(t){super(Yh.zbt),this.CNt=t}},Aq="HlsModelUpdater";!function(t){t.jbt="Pbt",t.zbt="Bbt"}(Yh||(Yh={}));var vq=class extends i{get Rbt(){return this.Ubt}get Qbt(){return this.Fbt}get wr(){return this.Gst}get Ybt(){return this.Gbt}async Wbt(t){const i=this.Gst.Obt;if(!i)throw new k("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this.jo(new bn);const e=await this.Vbt(i,{},2,!0,t),s=e.ANt;if(!nH(s)&&!rH(s))throw new k("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");nH(s)||p.oN(Aq,"Detected media playlist only HLS stream."),this.Hbt(s),e.qbt&&(this.Fbt=!0,await this.Xbt(t)),this.Ubt=!0}async Zbt(t,i,e,s){const n=this.Gst.kbt(t);if(!n)throw new k("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={VIt:i,REt:e,uT:Mq(n)},h=ee(S.max(1,3*t.ANt.xEt));try{await this.Kbt(n,r,s,h)}catch(t){throw Et(t),this.Jbt(n),t}}$bt(t,i){const e=this.Gst.kbt(t);if(!e)throw new k("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={VIt:void 0,REt:void 0,uT:Mq(e)},n=ee(S.max(1,3*t.ANt.xEt));return this.Kbt(e,s,i,n)}tLt(t,i){return this.iLt.has(t.Bw)||this.iLt.set(t.Bw,new $s),Oi(this.iLt.get(t.Bw).sL,i)}Jbt(t){this.jo(new wq(t))}async Kbt(t,i,e,s){const n=t.ANt.XNt(i);let r;try{r=(await this.Vbt(n,i,0,this.Fbt,e,s)).ANt}catch(i){throw Et(i),t.ANt.jEt=le.n_(),i}if(!rH(r))throw new k("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");try{this.Hbt(r,t)}catch(n){if(n instanceof WH&&void 0!==i.uT){const n=qr({},i,{uT:void 0});return this.Kbt(t,n,e,s)}throw n}if(this.eLt&&t!==this.eLt&&!this.eLt.ANt.kEt)try{await this.$bt(this.eLt,e)}catch(i){Et(i),this.eLt=t,this.sLt()}this.nLt(t)}async Vbt(t,i,e,s,n,r){if(p.oN(Aq,"Loading HLS playlist at "+t+"."),s){const i=await this.rLt(t,n);if(void 0!==i)return{ANt:i,qbt:!0}}return{ANt:await this.hLt(t,i,e,n,r),qbt:!1}}async rLt(t,i){try{const e=await this.Eut.Jtt([t]);if(Pi(i),void 0!==e)return RH(e.responseURL,{},e.data)}catch(t){Et(t)}}async hLt(t,i,e,s,n){const r={Iu:t,pS:$m.Au,NS:this.Dut,mS:Vt.GET,$w:Qu.rS,$f:s,YI:n},h=await Sa((()=>this.oLt(r)),s,e);return RH(h.xS,i,h.JM)}async oLt(t){const i=await this.LS.BI(t);return{JM:await i.kS(),xS:i.xS}}async Xbt(t){Pi(t);const i=[];for(const e of this.Gst.uDt)for(const s of e.wDt)i.push(this.aLt(s,t));await Promise.all(i)}async aLt(t,i){try{const e=await this.Eut.Jtt([t.ANt.xst]);Pi(i),void 0===e||t.ANt.kEt||await this.$bt(t,i)}catch(t){Et(t)}}sLt(){for(const t of this.Gst.uDt)for(const i of t.wDt)i!==this.eLt&&void 0!==i.ANt.RSt&&(i.ANt.kEt?this.nLt(i):i.ANt.KEt())}nLt(t){if(0!==t.ANt.vit.length){if(!this.eLt)return this.eLt=t,void this.eLt.ANt.ibt(0,void 0);if(this.uLt(this.eLt),!this.uLt(t)&&void 0===t.ANt.RSt){const i=this.cLt(t,this.eLt);p.hDt(Aq,"Assuming global timeline offset of "+i+"s for rendition "+t.ANt.xst+"."),t.ANt.ibt(i,void 0)}}}cLt(t,i){if(mq(t)){const e=t.ANt.vit[0],s=i.ANt.vit[0];return p.hDt(Aq,"Synchronizing by start of VOD: "+s.Fm+" vs "+e.Fm),s.Fm-e.VSt}const e=function(t,i){let e=t.length-1,s=i.length-1;for(;e>=0&&s>=0;){const n=t[e],r=i[s];if(n._St>r._St)e--;else if(n._St<r._St)s--;else if(n.cSt){if(r.cSt)return{segment:n,referenceSegment:r};s--}else e--}return}(t.ANt.vit,i.ANt.vit);if(void 0!==e){const{segment:t,referenceSegment:i}=e;return p.hDt(Aq,"Synchronizing by start of discontinuity #"+i._St+": "+i.Fm+" vs "+t.Fm),i.Fm-t.VSt}const s=yq(t.ANt.vit);if(void 0!==s){const t=yq(i.ANt.vit);if(void 0!==t){p.hDt(Aq,"Synchronizing by PDT:",t.dSt.toISOString()+" vs "+s.dSt.getTime());return t.Fm-s.VSt-(t.dSt.getTime()-s.dSt.getTime())/1e3}}const n=pq(i),r=pq(t);var h;const o=null!=(h=t.ANt.RSt)?h:0;return p.hDt(Aq,"Synchronizing by last segment:",n+" vs "+r),n-r+o}uLt(t){const i=this.Gst.kbt(t);if(!i)return!1;if(mq(i))return!1;const e=function(t,i){return j_(t,(t=>void 0!==t.n8&&i.ebt(t._St)))}(i.ANt.vit,this.Gst.iI);if(void 0===e)return!1;if(i.ANt.PEt===e._St)return!0;const s=this.Gst.iI.ubt(e.n8,e).vp()-e.VSt;return p.hDt(Aq,"Synchronize by media timestamp: "+s+"s for rendition "+t.ANt.xst+"."),i.ANt.ibt(s,e._St),(void 0===this.eLt||void 0===this.eLt.ANt.PEt||this.eLt.ANt.PEt<e._St)&&(this.eLt=i),!0}Hbt(t,i){var e;(this.Gst.YSt(t,i),rH(t)&&i)&&(this.Gbt=i,this.jo(new gq(i)),null==(e=this.iLt.get(i.Bw))||e.iL(),this.iLt.delete(i.Bw));this.jo(new Ch)}lLt(t,i){for(const e of this.Gst.uDt){const s=xe(e.lDt,(t=>t.ANt===i));void 0!==s&&void 0===t.KNt&&e.OSt(s);const n=xe(e.cDt,(t=>t.ANt===i));void 0!==n&&void 0===t.ZNt&&e.OSt(n),void 0===s&&void 0===n||(e.Tet=uH(e.Tet,t))}}Hf(){this.Uo(),this.Gst.Hf(),this.iLt.forEach((t=>t.i_())),this.iLt.clear()}constructor(t,i,e,s){super(),this.LS=t,this.Eut=i,this.Dut=e,this.Ubt=!1,this.Fbt=!1,this.eLt=void 0,this.Gbt=void 0,this.iLt=Kn(),this.Gst=new dq(s)}};function mq(t){return t.ANt.wSt||t.ANt.vSt===wt.qIt}function pq(t){const i=t.ANt.vit;return i[i.length-1].Ym}function yq(t){return j_(t,(t=>void 0!==t.dSt))}function Mq(t){if(void 0!==t.ANt.BIt&&!t.ANt.wSt&&!(void 0===t.ANt.bSt||le.n_()/1e3-t.ANt.bSt>=t.ANt.BIt/2))return t.ANt.RIt?xr.hEt:xr.rEt}var Tq=class{get rt(){return this.Lyt}VEt(t){if(0===t.ANt.gSt.length)return;var i;this.dLt||(this.dLt=this.eP.SS(ra.XM,void 0,void 0,void 0,void 0,jo.DATE_RANGE),this.Lyt.it(this.dLt));XH(this.dLt,t.ANt.gSt,(e=>null!=(i=t.ANt.CSt(e))?i:NaN))}constructor(t,i,e){this.fLt=t=>{this._Lt.hlsDateRange&&this.VEt(t.CNt)},this._Lt=t,this.Llt=i,this.eP=e,this.Lyt=new Or,this.Llt.dn(Yh.jbt,this.fLt)}};r();var Nq=class extends d{constructor(){super(Mu.cNt)}};r(),r(),r();var Mr=class{get gLt(){return this.EK}get p_(){return WF(this.kwt.p_,this.kwt.cJ)}get vit(){return this.grt}get $wt(){return this.Cyt}wLt(t){var i;return null==(i=this.ALt(t))?void 0:i.CNt}twt(t){this.EK=t,this.vLt()}sct(t,i,e,s,n,r){this.grt.push({CNt:t,wrt:i,mLt:re.XB(n,r),pLt:re.XB(e,s)}),this.vLt()}ALt(t){return xe(this.grt,(i=>i.pLt.ur(t)))}s_t(t){return xe(this.grt,(i=>i.wrt===t))}Wnt(t,i){return xe(this.grt,(e=>e.CNt===t&&aq(e.wrt,i)))}hJ(){const t=this.p_;t.L>0&&(this.Cyt=t.wn(t.L-1))}vLt(){const t=this.kwt.p_;this.grt=this.grt.filter((i=>0!==t.bn(i.pLt).L))}constructor(t){this.kwt=t,this.grt=[],this.EK=void 0,this.Cyt=void 0}},Dq=class{get $w(){return this.J$}get yLt(){return this.J$===Zt.Gv||this.J$===Zt.Yv}get MLt(){return this.zft}get TLt(){return this.NLt}get DLt(){return void 0!==this.ILt}SLt(){if(this.DLt)throw new k("Cannot perform new operation while BufferAppender is still busy")}OMt(t){this.kwt!==t&&(this.SLt(),this.kwt=t,this.zft=new Mr(t))}ELt(){return this.ILt?this.ILt.sL:Promise.resolve()}bLt(t){var i;const e=this.zft.$wt,s=this.zft.p_;if(void 0===e)return!1;const n=S.min(t,e);var r;return null!=(r=null==(i=s.IB().OB(this.TLt).VB(n))?void 0:i.ur(e))&&r}LLt(t){return this.zft.wLt(t)}i_(){this.EC.i_(),this.EC=new Z_}MK(t){this.SLt(),this.ILt=new $s;const i=i=>{this.xLt.kLt(t),this.CLt(i)};this.TK(t,this.EC.$f).then(i,i)}async TK(t,i){p.hDt(xV,"Appending initializer",Qo(t.OLt.xst)),await this.kwt.MK(t,i),p.hDt(xV,"Appended initializer",Qo(t.OLt.xst)),this.zft.twt(t)}dwt(t){this.SLt(),this.ILt=new $s;const i=i=>{this.xLt.kLt(t),this.CLt(i)};this.jLt(t,this.EC.$f).then(i,i)}async jLt(t,i){const e=t.CNt;if(void 0===e.ANt.tIt)throw new k("MediaBufferWrapper - Cannot append HLSAsset to "+this.J$+" MediaBuffer for a HLSRendition with an undefined targetDuration.");const s=this.zft.p_.pB,n=this.kwt.p_;p.hDt(xV,"Appending",Qo(t.OLt.xst)),await this.kwt.mK(t,i),p.hDt(xV,"Appended",Qo(t.OLt.xst),s,this.zft.p_.pB);const r=t.Fm,h=r+t.lt,o=t.OLt,a=o.Fm;var u;const c=o.Fm+(null!=(u=o.lt)?u:0);this.zft.sct(e,o,r,h,a,c);const l=this.kwt.p_.OB(n),d=this.zft.Wnt(e,o);if(this.$w===Zt.Yv)if(d)if(this.zLt(d))if(0===l.L){if(void 0===this.zft.s_t(o)){const t=this.kwt.cJ.bn(new re([r,h]));this.NLt=this.NLt.xB(t)}}else{this.NLt=this.NLt.OB(new re([l.yn(0),h]));l.yn(0)>r&&(this.NLt=this.NLt.xB(new re([r,l.yn(0)])))}else this.NLt=this.NLt.OB(new re([r,h]));else if(0===l.L){const t=this.kwt.cJ.bn(new re([r,h]));this.NLt=this.NLt.xB(t)}else{l.yn(0)>r&&(this.NLt=this.NLt.xB(new re([r,l.yn(0)])))}t.OLt.USt&&this.zft.hJ()}zLt(t){const i=t.pLt,e=i.yn(0),s=i.wn(i.L-1),n=i.MB(0),r=i.NB(i.L-1);return this.NLt.zB(e,s,n,r)}constructor(t,i,e,s,n){this.ILt=void 0,this.EC=new Z_,this.NLt=re.ZB(),this.CLt=t=>{this.ILt&&(t?Mb(t)&&this.yLt?this.PLt.$W(this.kwt.p_.HB)?this.ILt.iL():this.ILt.eL(t):Er(t)?this.ILt.iL():this.ILt.eL(t):this.ILt.iL(),this.ILt=void 0)},this.J$=t,this.xLt=e,this.kwt=i,this.zft=s,this.PLt=n}};r(),r();var Iq=class{async BLt(t,i,e,s){const n=await this.RLt(i,s);return await this.ULt.BLt(t,n,e)}async RLt(t,i){var e;if((null==(e=this.QLt)?void 0:e.Iu)!==t){p.hDt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const e=await this.LS.BI({Iu:t,pS:$m.$I,mS:Vt.GET,$f:i,$w:Qu.aS,MS:is.wS,NS:this.Dut}),s=await e.jj(),n=new A(s);this.QLt={Iu:t,JM:n}}return this.QLt.JM}constructor(t,i,e){this.ULt=t,this.LS=i,this.Dut=e,this.QLt=void 0}};r();var Sq=class{async BI(t,i,e,s,n){const r=await this.FLt(t,i,e,$m.$I,s,n),h=await r.jj(n);return{httpStatusCode:r.FI,response:new A(h)}}async YLt(t,i,e,s,n){return(await this.FLt(t,i,e,$m.iS,s,n)).IG(n)}async FLt(t,i,e,s,n,r){let h;t.Frt&&(h=sH(t.Frt.yn,t.Frt.L),0===h[0]&&h[1]===S_&&(h=void 0));const o=h?{Range:"bytes="+h[0]+"-"+h[1]}:void 0,a=new ai({Iu:t.zy,pS:s,vS:o,NS:this.Dut,mS:Vt.GET,$w:i,MS:e,TS:this.a_t,DS:n,$f:r});try{const i=await this.Eut.sit(t.zy,h);if(Pi(r),void 0!==i)return null==n||n(i.buffer.byteLength,i.buffer.byteLength),new Ah({BI:a,JM:i.buffer})}catch(t){Et(t)}return await Sa((()=>Oi(this.LS.BI(a),a.$f)),r,this.GLt)}constructor(t,i,e,s,n=2){this.LS=t,this.Eut=i,this.a_t=e,this.Dut=s,this.GLt=n}};r();var Eq,Cr=class{WLt(){return this.VLt.ANt.PIt}async HLt(t,i,e){if(!this.WLt())throw new k("Could not perform blocking playlist update.");try{await this.qLt(),Pi(e),await this.Llt.Zbt(this.VLt,t,i,e),this.xn=le.n_()}catch(t){throw Er(t)&&this.XLt(),t}this.XLt()}ZLt(t){return this.Llt.tLt(this.VLt,t)}XLt(){if(!this.KLt&&!this.JLt){const t=()=>{this.KLt=void 0};this.KLt=this.$Lt(this.tkt.$f).then(t,t)}}async qLt(){this.KLt&&(this.tkt.i_(),this.tkt=new Z_,await this.KLt.catch(h),this.KLt=void 0)}async $Lt(t){for(;;){if(this.VLt.ANt.wSt&&this.VLt.ANt.kEt)return;const i=le.n_()-this.xn,e=1e3*this.VLt.ANt.xEt;i<e&&await yc(e-i,t);try{await this.Llt.$bt(this.VLt,t)}catch(t){throw Et(t),this.Llt.Jbt(this.VLt),t}this.xn=le.n_()}}Hf(){this.JLt=!0,Mo(this.qLt())}constructor(t,i){this.KLt=void 0,this.tkt=new Z_,this.xn=-1/0,this.JLt=!1,this.Llt=t,this.VLt=i,this.XLt()}};r(),function(t){t[t.XIt=0]="XIt",t[t.ZIt=1]="ZIt",t[t.hS=2]="hS",t[t.oS=3]="oS"}(Eq||(Eq={})),r(),r();var zh="AssetExtractor",bq=class{ikt(t,i,e){let s=i;for(const i of this.ekt){if(s>=t)return!0;if(s<i.yn)return!1;if(s<i.wn){if(e<=i.wn)return!0;s=i.wn}}return s>=t}skt(t,i){const e=[];for(let s=0;s<this.ekt.length;s+=1){const n=this.ekt[s],r=t-n.yn,h=n.JM.length,o=S.min(h,S.max(r,0)),a=S.max(0,i+r),u=kh(n.JM,o,a);u.length&&(s=this.nkt(s,n,t,o,a),e.push(u))}return e}rkt(t,i){this.ekt.push({yn:t,wn:t+i.length,JM:i})}nkt(t,i,e,s,n){let r=t;this.ekt.splice(r,1),r-=1,i.yn<e&&(r+=1,this.ekt.splice(r,0,{yn:i.yn,wn:e,JM:kh(i.JM,0,s)}));const h=e+n-s;return h<i.wn&&(r+=1,this.ekt.splice(r,0,{yn:h,wn:i.wn,JM:kh(i.JM,n)})),r}constructor(){this.ekt=[]}},Lq=class{get hkt(){return this.okt}async akt(){const t=await this._d.read();if(t.done)throw this.okt=1/0,new k("No more data can be read from the given stream.");return this.okt+=t.value.length,t.value}async ukt(t){await this._d.cancel(t)}constructor(t,i){this.okt=i,this._d=t.getReader()}},kq=class{ckt(){this.lkt.iL(),this.lkt=new $s}dkt(t){const{Yrt:i,Grt:e}=Cq(this.HSt.Frt),s=this.fkt.skt(i,e-i);p.hDt(zh,"Collected "+s.length+" chunks.");for(const i of s)t.enqueue(i)}async readAndSliceOutAssetBytes(t){await this._kt.sL;const{Yrt:i,Grt:e}=Cq(this.HSt.Frt);try{for(;;){const s=this._d.hkt,n=await this._d.akt(),r=n.length;p.hDt(zh,"Read "+r+" at "+s+" for extraction of "+Qo(this.HSt));const h=S.min(s+r,i)-s;if(!(h>0)){if(s+r<=e)return p.hDt(zh,"Extracting the read data range for extraction of "+Qo(this.HSt)),t.enqueue(n),this.ckt(),Mo(this.readAndSliceOutAssetBytes(t));{const i=e-s,h=kh(n,0,i),o=kh(n,i);return h.length>0&&(p.hDt(zh,"Extracting "+h.length+" bytes for extraction of "+Qo(this.HSt)),t.enqueue(h)),p.hDt(zh,"Of the read "+r+" bytes, the last "+o.length+" will be stored locally for extraction of "+Qo(this.HSt)),this.fkt.rkt(s+i,o),p.hDt(zh,"Extraction of "+Qo(this.HSt)+" completed as the entire request has been fulfilled."),this.gkt(t),void(this.wkt&&(p.hDt(zh,"Aborting stream upstream as no more bytes are needed from "+Qo(this.HSt)+"."),await this._d.ukt("AssetExtraction - AbortOnEnd")))}}{const i=kh(n,0,h),e=kh(n,h);if(p.hDt(zh,"Of the read "+r+" bytes, the first "+h+" will be stored locally for extraction of "+Qo(this.HSt)),this.fkt.rkt(s,i),e.length>0)return p.hDt(zh,"Extracting "+e.length+" bytes for extraction of "+Qo(this.HSt)),t.enqueue(e),this.ckt(),Mo(this.readAndSliceOutAssetBytes(t))}}}catch(i){p.hDt(zh,"Extraction of "+Qo(this.HSt)+" completed as the entire source stream has been read."),this.gkt(t)}}gkt(t){t.close(),this.ckt(),this.Akt.iL()}start(t){p.hDt(zh,"Preparing to push all collected data to controller for extraction of "+Qo(this.HSt)),this.dkt(t),p.hDt(zh,"Collected data pushed to controller for extraction of "+Qo(this.HSt));const{Grt:i}=Cq(this.HSt.Frt);this._d.hkt>=i?(p.hDt(zh,"Extraction of "+Qo(this.HSt)+" completed as the entire request has been fulfilled."),this.gkt(t)):(p.hDt(zh,"Continuing read from original stream for extraction of "+Qo(this.HSt)),Mo(this.readAndSliceOutAssetBytes(t)))}get vkt(){return this.Akt.sL}pull(){return this._kt.iL(),this._kt=new $s,this.lkt.sL}constructor(t,i,e,s){this.Akt=new $s,this.HSt=t,this._d=i,this.fkt=e,this.wkt=s,this._kt=new $s,this.lkt=new $s}},xq=class{Am(t){if(!hH(this.HSt,t))return!1;const{Yrt:i,Grt:e}=Cq(t.Frt);return this.fkt.ikt(this.mkt.hkt,i,e)}async syt(t,i){void 0===i&&(i=!1);const e=this.mkt,s=this.fkt;if(p.oN(zh,"Extracting data from "+Qo(t)+" out of "+Qo(this.HSt)),this.pkt&&(p.hDt(zh,"Awaiting previous extraction before extracting "+Qo(t)+" out of "+Qo(this.HSt)),await this.pkt),!this.Am(t))throw new k("The extractor does not contain the data requested");const n=new kq(t,e,s,i);return this.pkt=n.vkt,new _o(n)}constructor(t,i){this.HSt=i;const{Yrt:e}=Cq(this.HSt.Frt);this.mkt=new Lq(t,e),this.fkt=new bq}};function Cq(t){if(t){const i=t.yn;return{Yrt:i,Grt:void 0!==t.L?i+t.L:S_}}return{Yrt:0,Grt:S_}}var Oq=class{async En(){const t=await this.ykt.YLt(this.HSt,Qu.oS,is.Hv,void 0,this.EC.$f);return new xq(t,this.HSt)}Am(t){return hH(this.HSt,t)}async syt(t,i){void 0===i&&(i=!1);const e=await this.sAt;return await Oi(e.syt(t,i),this.EC.$f)}i_(){this.sAt.catch(h),this.EC.i_()}constructor(t,i){this.HSt=t,this.ykt=i,this.EC=new Z_,this.sAt=this.En()}};r();var jq=class extends d{constructor(t){super(Ar.Mkt),this.TS=t}};r();var zq=class extends d{constructor(t,i,e,s,n,r,h){super(Ar.Tkt),this.uri=t,this.Nkt=i,this.TS=e,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.Dkt=r,this.httpStatusCode=h}};function Pq(t,i,e){const s=hq(e)?e:e.FSt;if(i.ebt(s._St)){if(void 0!==e.n8)return i.ubt(e.n8,e).vp();if(e!==s&&void 0!==s.n8){const t=i.ubt(s.n8,s).vp();return e.Fm+(t-s.Fm)}}const n=t.ANt.s_t(s.VIt-1);if(void 0!==n&&i.ebt(n._St)){if(n.uSt.length>0){const t=n.$St(n.uSt.length-1);if(void 0!==t.n8){const s=i.ubt(t.n8,t).vp();return e.Fm+(s-t.Fm)}}if(void 0!==n.n8){const t=i.ubt(n.n8,n).vp();return e.Fm+(t-n.Fm)}}const r=t.ANt.s_t(s.VIt+1);if(void 0!==r&&i.ebt(r._St)){if(r.uSt.length>0){const t=r.$St(0);if(void 0!==t.n8){const s=i.ubt(t.n8,t).vp();return e.Fm+(s-t.Fm)}}if(void 0!==r.n8){const t=i.ubt(r.n8,r).vp();return e.Fm+(t-r.Fm)}}return e.Fm}r();var Ar,Bq="HlsPlaylistDownloader";!function(t){t.Mkt="segmentdownloadprogress",t.Tkt="segmentdownloaded"}(Ar||(Ar={}));var Rq=class extends i{Ikt(t){this.Skt.Hf(),this.Skt=new Cr(this.Llt,t),this.DLt?this.Ekt=t:(this.VLt=t,this.bkt=0,this.Lkt=void 0,this.kkt=void 0)}get DLt(){return void 0!==this.xkt}ELt(){return this.xkt?this.xkt.sL:Promise.resolve()}Ckt(){return this.xLt.Ckt()}Okt(t){this.xLt.Okt(t)}i_(){var t,i,e;this.jkt.i_(),this.jkt=new Z_,null==(t=this.zkt)||t.i_(),this.zkt=void 0,null==(i=this.Pkt)||i.i_(),null==(e=this.Bkt)||e.i_(),this.Pkt=void 0,this.Bkt=void 0,this.bkt=0,this.Lkt=void 0,this.kkt=void 0}Hf(){this.Skt.Hf()}get CNt(){var t;return null!=(t=this.Ekt)?t:this.VLt}get Rkt(){if(!this.VLt.ANt.wSt||void 0===this.Lkt)return!1;const t=this.VLt.ANt.s_t(this.Lkt);if(!t.USt)return!1;if(void 0!==this.kkt){if(!t.$St(this.kkt).USt)return!1}return!0}Ukt(t){const i=this.VLt.ANt.UEt(t);if(!i)return!1;if(void 0!==this.Lkt){const e=i.VIt===this.Lkt;return void 0!==this.kkt?i.tEt(t)===i.$St(this.kkt)&&e:e}return!1}Qkt(t){let i;if(void 0===this.Lkt||t<this.bkt)i=this.Fkt(t);else if(i=this.Ykt(this.Lkt,this.kkt),void 0!==i){const[e,s]=i,n=(null!=s?s:e).Fm,r=3*this.VLt.ANt.tIt;S.abs(n-t)>=r&&(i=this.Fkt(t))}else if(this.VLt.ANt.wSt){if(this.VLt.ANt.s_t(this.Lkt).USt&&(i=this.Fkt(t),void 0!==i&&i[0].VIt===this.Lkt))return}if(i){this.bkt=t;const[e,s]=i;return 0===(null==s?void 0:s.GSt)&&void 0!==e.lt?[e,void 0]:[e,s]}}Fkt(t){let i,e;const s=this.VLt.ANt.vit;if(0===s.length)return;const n=this.Llt.wr.iI,r=So.Ey(t),[h,o]=function(t,i,e){const s=t.ANt.vit;if(0===s.length)return[void 0,void 0];const n=t.ANt.QEt(e.vp());if(!i.ebt(n._St))return[void 0,void 0];const r=n.VIt-s[0].VIt;let h,o,a,u=0;for(let t=r;t>=0;t--){const i=s[t];if(i._St!==n._St)break;if(void 0!==i.n8){h=i,u=t;break}}if(void 0===h){for(let t=r+1;t<s.length;t++){const i=s[t];if(i._St!==n._St)break;if(void 0!==i.n8){h=i,u=t;break}}if(void 0===h)return[void 0,void 0]}if(i.ubt(h.n8,h).Tp(e)){o=h;for(let t=u+1;t<s.length;t++){const r=s[t];if(r._St!==n._St)break;if(void 0!==r.n8){if(!i.ubt(r.n8,r).Tp(e)){a=r;break}o=r}}}else{a=h;for(let t=u-1;t>=0;t--){const r=s[t];if(r._St!==n._St)break;if(void 0!==r.n8){if(i.ubt(r.n8,r).Tp(e)){o=r;break}a=r}}}return[o,a]}(this.VLt,n,r);let a;if(void 0!==h&&void 0!==o){const t=n.ubt(h.n8,h),i=n.ubt(o.n8,o),e=r.bp(t).vp()/i.bp(t).vp()*(o.Fm-h.Fm);a=h.Fm+e}else a=t;const u=s[s.length-1];return u.Ym<=a?(i=u,e=u.eEt(a)):s[0].Fm>a?(i=s[0],e=i.$St(0)):(i=this.VLt.ANt.UEt(a),e=null==i?void 0:i.eEt(a)),i?[i,e]:void 0}Ykt(t,i){let e,s;if(e=this.VLt.ANt.s_t(t),e&&void 0!==i){if(0===e.uSt.length)return[e,void 0];s=e.$St(i+1)}return void 0!==e&&void 0!==s||(e=this.VLt.ANt.s_t(t+1),s=null==e?void 0:e.$St(0)),e?[e,s]:void 0}SLt(){if(this.DLt)throw new k("Cannot perform new operation while PlaylistDownloader is still busy")}Gkt(t){this.SLt(),this.xkt=new $s,this.Wkt(t,this.jkt.$f).then(this.Vkt,this.Vkt)}Hkt(){this.Skt.XLt()}async Wkt(t,i){if(this.VLt.ANt.wSt)return;let e=this.Qkt(t);for(!e&&this.Skt.WLt()&&void 0!==this.Lkt&&(await this.Skt.HLt(void 0===this.kkt?this.Lkt+1:this.Lkt,void 0!==this.kkt?this.kkt+1:void 0,i),e=this.Qkt(t)),!e&&this.Skt.WLt()&&void 0!==this.Lkt&&(await this.Skt.HLt(this.Lkt+1,0,i),e=this.Qkt(t));!e;){p.oN(Bq,"No next segment / part available, need to update playlist before continuing."),await this.Skt.ZLt(i);const s=this.CNt.ANt.vit;s[0].Fm>t&&(this.kkt=void 0,this.Lkt=void 0);s[s.length-1].VIt<this.Lkt&&(this.kkt=void 0,this.Lkt=void 0),e=this.Qkt(t)}}qkt(){return this.xLt.Xkt()}Zkt(){this.SLt();try{const t=this.VLt.ANt.FEt(tH.XIt);t&&this.Kkt(t);const i=this.VLt.ANt.FEt(tH.ZIt);i&&this.Jkt(i)}catch(t){throw Et(t),this.VLt.ANt.jEt=le.n_(),this.Llt.Jbt(this.VLt),t}}Kkt(t){this.Bkt&&!this.Bkt.Am(t.xst)&&(this.Bkt.i_(),this.Bkt=void 0),this.Bkt||(this.Bkt=new Oq(t.xst,this.ykt))}Jkt(t){this.Pkt&&!this.Pkt.Am(t.xst)&&(this.Pkt.i_(),this.Pkt=void 0),this.Pkt||(this.Pkt=new Oq(t.xst,this.ykt))}e_t(t,i,e){this.SLt(),p.oN(Bq,"Starting download of segment "+Qo(t.xst)+" and part "+(null==i?void 0:i.GSt)),this.xkt=new $s,this.$kt(t,i,e,this.jkt.$f).catch((t=>{throw Et(t),this.VLt.ANt.jEt=le.n_(),this.Llt.Jbt(this.VLt),t})).then(this.Vkt,this.Vkt)}async $kt(t,i,e,s){let n;if(t.lSt){var r,h;if(!e||!oH(e.OLt.xst,null==(r=t.lSt)?void 0:r.xst)||t._St!==e._St){var o;null==(o=this.zkt)||o.i_(),this.zkt=new $s;const i=this.txt(t.lSt,t,s).then((()=>{this.zkt=void 0}));this.zkt.e_(i)}n=null==(h=this.zkt)?void 0:h.sL}await this.ixt(t,i,n,s)}async txt(t,i,e){const s=await this.ext(t,i,e),n=s.lSt.JM.JM.byteLength;this.xLt.sxt(s),this.jo(new zq(s.lSt.OLt.xst,s.$w,this.J$,i.VIt,s.CNt.Bw,n,s.lSt.igt)),p.hDt(xV,"Download initializer complete",Qo(t.xst))}async ixt(t,i,e,s){const n=await this.nxt(t,i,s),r=n.wrt.JM.JM.byteLength;var h;e&&await Oi(e,s),this.xLt.sxt(n),this.jo(new zq(n.wrt.OLt.xst,n.$w,this.J$,t.VIt,n.CNt.Bw,r,n.wrt.igt)),p.hDt(xV,"Download complete",Qo(null!=(h=null==i?void 0:i.xst)?h:t.xst))}async nxt(t,i,e){let s;if(i){if(this.Pkt)if(this.Pkt.Am(i.xst)){const t=await this.Pkt.syt(i.xst),n=await FE(t,e),r=new A(n);s=Qq(i,await this.BLt(r,i.hSt,e),200)}else this.Pkt.i_(),this.Pkt=void 0;s||(p.hDt(xV,"Start download",Qo(i.xst)),s=await this.rxt(i,e))}else p.hDt(xV,"Start download",Qo(t.xst)),s=await this.r_t(t,e);return this.Lkt=t.VIt,this.kkt=null==i?void 0:i.GSt,{$w:"wrt",wrt:s,CNt:this.VLt,_St:t._St}}async ext(t,i,e){let s;if(this.Bkt){var n;if(this.Bkt.Am(t.xst)){const n=await Oi(this.Bkt.syt(t.xst),e),r=await FE(n,e),h=new A(r);s=Uq(t,i,await this.BLt(h,t.aSt?[t.aSt]:[],e),200)}p.oN(Bq,"MAP is required for segment, downloading MAP data."),null==(n=this.Bkt)||n.i_(),this.Bkt=void 0}return s||(p.hDt(xV,"Start download",Qo(t.xst)),s=await this.hxt(t,i,e)),{$w:"lSt",lSt:s,CNt:this.VLt,Fm:i.Fm,_St:i._St,hSt:i.hSt}}async hxt(t,i,e){const{response:s,httpStatusCode:n}=await this.ykt.BI(t.xst,Qu.hS,is.uS,void 0,e),r=t.aSt?[t.aSt]:[];return Uq(t,i,await this.BLt(s,r,e),n)}async r_t(t,i){if(!t.xst)throw new k("Internal error: attempted to download an incomplete segment");let e,s;try{this.oxt(t);const n=await this.ykt.BI(t.xst,Qu.hS,is.Hv,this.axt,i);e=n.response,s=n.httpStatusCode}finally{this.uxt()}return function(t,i,e){return{JM:{JM:i,$w:nL._H},$w:Eq.hS,igt:e,OLt:t,_St:t._St}}(t,await this.BLt(e,t.hSt,i),s)}async rxt(t,i){let e,s;try{this.oxt(t);const n=await this.ykt.BI(t.xst,Qu.hS,is.Hv,this.axt,i);e=n.response,s=n.httpStatusCode}finally{this.uxt()}return Qq(t,await this.BLt(e,t.hSt,i),s)}async BLt(t,i,e){const s=xe(i,(t=>t.mS===$o.xIt));return s?s.xst&&s.CIt?await this.cxt.BLt(t,s.xst,s.CIt,e):(p.dt(Bq,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}oxt(t){var i,e,s;this.lxt=t,this.dxt=0,this.fxt=0,this._xt=null!=(s=null==(i=t.xst)||null==(e=i.Frt)?void 0:e.L)?s:0}uxt(){this.lxt=void 0,this.dxt=0,this.fxt=0,this._xt=0}gxt(){if(void 0!==this.lxt)return{wrt:this.lxt,wxt:this.fxt,Axt:this._xt}}vxt(t){return void 0!==this.lxt&&(0!==this.dxt&&(0!==this._xt&&(!(this.fxt>=this._xt)&&!(t-this.dxt<500))))}constructor(t,i,e,s,n,r,h,o){super(),this.Ekt=void 0,this.xkt=void 0,this.lxt=void 0,this.dxt=0,this.fxt=0,this._xt=0,this.jkt=new Z_,this.zkt=void 0,this.bkt=0,this.Lkt=void 0,this.kkt=void 0,this.Bkt=void 0,this.Pkt=void 0,this.Vkt=t=>{this.Ekt&&(this.VLt=this.Ekt,this.Ekt=void 0,this.bkt=0,this.Lkt=void 0,this.kkt=void 0),this.xkt&&(t&&!Er(t)?this.xkt.eL(t):this.xkt.iL(),this.xkt=void 0)},this.axt=(t,i)=>{this.fxt=t,t>0&&0===this.dxt&&(this.dxt=le.n_()),void 0!==i&&(this._xt=i),this.jo(new jq(this.J$))},this.J$=t,this.Llt=e,this.xLt=s,this.VLt=i,this.Skt=new Cr(e,i),this.cxt=new Iq(h,n,o),this.ykt=new Sq(n,r,function(t){switch(t){case ve.Yv:return en.Yv;case ve.Gv:return en.Gv;case ve.HM:case ve.MIt:return en.Au;default:return en.Hv}}(i.$w),o)}};function Uq(t,i,e,s){return{JM:{JM:e,$w:nL._H},$w:Eq.XIt,igt:s,OLt:t,_St:i._St}}function Qq(t,i,e){return{JM:{JM:i,$w:nL._H},igt:e,$w:Eq.ZIt,OLt:t,_St:t.FSt._St}}r();var Fq=class{get gLt(){return this.mxt}get pxt(){const t=[];for(const e of this.yxt)if("wrt"===e.$w){const s=e.wrt.OLt,n=Pq(e.CNt,this.Tbt,s);var i;t.push({wrt:s,CNt:e.CNt,Fm:n,Ym:n+(null!=(i=s.lt)?i:0)})}return t}get Mxt(){const t=[];return this.Txt.forEach((i=>{for(const e of i.Nxt)"wrt"===e.$w&&t.push({wrt:e.OLt,CNt:e.CNt,Fm:e.Fm,Ym:e.Fm+e.lt})})),t}sxt(t){"lSt"===t.$w&&(this.mxt=t.lSt),this.yxt.push(t),this.Dxt&&(this.Dxt.iL(),this.Dxt=void 0)}Ckt(){return this.yxt[0]}Okt(t){Hc(this.yxt,t)}Xkt(){return null!=this.Dxt||(this.Dxt=new $s),this.Dxt.sL}Ixt(t){this.Sxt(t.aat).Ixt(t)}Ext(t){return this.Sxt(t).Ext()}kLt(t){this.Sxt(t.aat).kLt(t)}bxt(t){var i;null==(i=this.Txt.get(t))||i.Hf()}Lxt(t){return this.Sxt(t).Lxt()}Sxt(t){if(this.Txt.has(t))return this.Txt.get(t);{const i=new Yq;return this.Txt.set(t,i),i}}tL(){this.kxt(),this.xxt()}kxt(){this.mxt=void 0,sr(this.yxt)}xxt(){this.Txt.forEach((t=>t.tL()))}Hf(){this.Txt.forEach((t=>t.Hf())),this.Txt.clear(),this.tL(),this.Dxt&&(this.Dxt.i_(),this.Dxt=void 0)}constructor(t){this.yxt=[],this.Txt=Mt(),this.Dxt=void 0,this.mxt=void 0,this.Tbt=t}},Yq=class{get Nxt(){return this.Cxt}Ixt(t){this.Cxt.push(t),this.Oxt&&(this.Oxt.iL(),this.Oxt=void 0)}Ext(){return this.Cxt[0]}kLt(t){Hc(this.Cxt,t)}Lxt(){return null!=this.Oxt||(this.Oxt=new $s),this.Oxt.sL}tL(){sr(this.Cxt)}Hf(){this.tL(),this.Oxt&&(this.Oxt.i_(),this.Oxt=void 0)}constructor(){this.Cxt=[],this.Oxt=void 0}};r();var Gq=1e-6,Wq=class{get p_(){return this.tTt}get cJ(){return this.iTt}async MK(t,i){const e=t.JM.JM;if(this.jxt(e),this.zxt.$w===jo.TTML){this.Tbt.ebt(t._St)||await Oi(this.Tbt.nbt(t._St),i);const s=this.Pxt(e,t._St);for(const t of s)this.zxt.CS(t)}}async mK(t,i){if(void 0===t.JM)return;const e=t.Fm,s=e+t.lt;this.tTt=this.tTt.xB(re.XB(e,s)).kB(Gq),this.fJ(t.Bxt,e),this._J(e,s),this.Tbt.ebt(t._St)||await Oi(this.Tbt.nbt(t._St),i),this.yK(t.JM.JM,t._St,t.OLt)}yK(t,i,e){let s;this.jxt(t),s=this.zxt.$w===jo.WEBVTT?this.Rxt(t,e):this.Pxt(t,i);for(const t of s)this.zxt.CS(t)}Rxt(t,i){const e=Ev(t),s=e.H;var n;const r=null!=(n=e.$y)?n:{tM:So.zp,nh:So.zp};for(const t of s){const e=So.Ey(t.Fm).bp(r.nh).gm(r.tM),s=this.Tbt.ubt(e,i).vp(),n=s+(t.Ym-t.Fm);t.ap(s,n)}return s}Pxt(t,i){const e=this.Tbt.abt(i).vp();return vm(t,this.zxt,{qy:0,Xy:1/0,Zy:e},el.APPLICATION_MP4)}jxt(t){this.zxt.$w===jo.DEFAULT&&(this.zxt.$w=this.Uxt(t)?jo.WEBVTT:jo.TTML)}Uxt(t){return Rv(Lc(nn(mo(t),0,S.min(t.byteLength,16)),new Eo))}fJ(t,i){this.iTt=this.iTt.xB(re.XB(t,i)).kB(Gq)}_J(t,i){this.iTt=this.iTt.OB(re.XB(t,i))}constructor(t,i){this.tTt=re.ZB(),this.iTt=re.ZB(),this.zxt=t,this.Tbt=i}};r(),r(),r();var Vq=class extends d{constructor(t,i){super(ca.Qxt),this.CNt=t,this.Tet=i}};r();var Hq=class extends d{constructor(t){super(ca.Fxt),this.CNt=t}};r();var qq=class extends d{constructor(t,i){super(ca.Yxt),this.CNt=t,this.Eet=i}};r();var ca,Xq=class extends d{constructor(t,i){super(ca.Gxt),this.CNt=t,this.Wxt=i}};!function(t){t.Qxt="Vxt",t.Yxt="Hxt",t.Gxt="qxt",t.Fxt="Xxt"}(ca||(ca={}));var Zq=class extends i{get Zxt(){return this.Kxt}Jxt(t){for(const i of this.Kxt)ks(t,i)||this.xLt.bxt(i);this.Kxt=t}get DLt(){return void 0!==this.$xt}ELt(){var t,i;return null!=(i=null==(t=this.$xt)?void 0:t.sL)?i:Promise.resolve()}SLt(){if(this.DLt)throw new k("Cannot perform new operation while transmuxer is still busy")}tCt(t,i){}iCt(t){this.SLt(),this.$xt=new $s;const i=i=>{this.eCt(t,i)};this.sCt(t,this.EC.$f).then(i,i)}nCt(t){this.SLt(),this.$xt=new $s;const i=i=>{this.eCt(t,i)};this.rCt(t,this.EC.$f).then(i,i)}eCt(t,i){this.$xt&&(!i||Er(i)?(i||this.xLt.Okt(t),this.$xt.iL(),this.$xt=void 0):this.$xt.eL(i))}hCt(t,i){this.jo(new Vq(t,i))}oCt(t,i){this.jo(new qq(t,i))}aCt(t,i,e){oq(i)&&this.jo(new Xq(t,e))}uCt(t){this.jo(new Hq(t))}Ixt(t){ks(this.Kxt,t.aat)&&this.xLt.Ixt(t)}cCt(t){return this.xLt.Ext(t)}kLt(t){this.xLt.kLt(t)}lCt(t){return this.xLt.Lxt(t)}i_(){this.EC.i_(),this.EC=new Z_}constructor(t,i,e){super(),this.$xt=void 0,this.EC=new Z_,this.xLt=t,this.Tbt=i,this.Kxt=e}};function Kq(t,i){return oq(t)?0:i}var Jq=class extends Zq{sCt(t,i){Pi(i);const e={$w:"dCt",JM:t.lSt.JM,aat:this.Zxt[0],_St:t._St,fCt:{Tet:"",hSt:t.hSt},Fm:t.Fm,CNt:t.CNt,OLt:t.lSt.OLt};return this.Ixt(e),Promise.resolve()}async rCt(t,i){Pi(i);const e=t.wrt.OLt;let s;var n;void 0!==e.n8?(this.Tbt.ebt(t._St)||await Oi(this.Tbt.nbt(t._St),i),s=this.Tbt.ubt(e.n8,e).vp()):s=e.Fm;const r={$w:"wrt",JM:t.wrt.JM,aat:this.Zxt[0],Bxt:Kq(e,s),Fm:s,lt:null!=(n=e.lt)?n:0,Zy:0,_St:t._St,CNt:t.CNt,OLt:t.wrt.OLt};this.Ixt(r)}constructor(t,i,e){super(t,i,[e])}};function $q(t,i){let e=re.ZB();for(const s of t){let n=s.Fm;if(s.CNt.ANt.wSt&&oq(s.wrt))n=0;else{const e=t=>s.CNt===t.CNt&&aq(t.wrt,s.wrt),r=xe(t,e);if(void 0!==r)n=S.min(n,r.Ym);else{const t=xe(i,e);void 0!==t&&(n=S.min(n,t.pLt.wn(0)))}}e=e.xB(re.XB(n,s.Ym))}return e}r();var tX=.001,iX=class{get _Ct(){return this.gCt}get wCt(){return this.ACt}get vCt(){return this.mCt}get pCt(){return this.xLt}get CNt(){return this.ACt.CNt}Ikt(t){this.ACt.Ikt(t)}yCt(t){const i=t.slice();for(let t=this.gCt.length-1;t>=0;t--){const e=this.gCt[t];if(!e.yLt)throw new k("Invalid state");const s=qt(i,(t=>t.$w===e.$w));s>=0?(e.OMt(i[s]),Ks(i,s)):Ks(this.gCt,t)}for(const t of i){const i=new Mr(t);this.gCt.push(new Dq(t.$w,t,this.xLt,i,this))}i.length>0&&this.xLt.tL();const e=t.map((t=>t.$w));this.mCt.Jxt(e)}$W(t){var i;const e=(null==(i=this.hR)?void 0:i.$W(t))||!1;return e&&(this.i_(),this.pCt.tL()),e}MCt(t){for(const t of this.gCt)if(t.$w!==Zt.Au||t.DLt)throw new k("Invalid state");const i=new Mr(t),e=new Dq(Zt.Au,t,this.xLt,i,this);this.gCt=[e]}get gLt(){const t=this.xLt.gLt;if(t)return t;if(this.gCt.length>0){const t=this.gCt[0].MLt.gLt;if(t&&this.gCt.every((i=>i.MLt.gLt===t)))return t}}t_t(){for(const t of this.gCt)t.MLt.vLt()}get TCt(){if(0===this.gCt.length)return re.ZB();const t=$q(this.xLt.pxt.concat(this.xLt.Mxt),Cs(this.gCt,(t=>t.MLt.vit))).IB();let i=new re([0,1/0]);for(const t of this.gCt)i=i.bn(t.MLt.p_);for(const t of this.gCt)i=i.OB(t.TLt);return i=i.xB(t),i}get NCt(){if(0===this.gCt.length)return re.ZB();const t=$q(this.xLt.Mxt,Cs(this.gCt,(t=>t.MLt.vit))).IB();let i=new re([0,1/0]);for(const t of this.gCt)i=i.bn(t.MLt.p_);return i=i.xB(t),i}awt(t){const i=this.TCt.VB(t,tX);return i?i.wn(i.L-1):t}Ukt(t){return!!this.TCt.VB(t,tX)||this.ACt.Ukt(t)}DCt(t){return this.NCt.ur(t,tX)}ICt(t,i,e){for(const t of this.gCt){const e=t.MLt,s=e.$wt;if(void 0!==s&&i>=s&&!e.p_.IB().ur(s))return!0}return i-t<e}i_(){this.SCt(),this.ECt()}SCt(){this.wCt.i_()}ECt(){this.vCt.i_(),this._Ct.forEach((t=>t.i_()))}Hf(){this.i_(),this.wCt.Hf()}constructor(t,i,e,s){this.ACt=t,this.xLt=i,this.mCt=e,this.hR=s,this.gCt=[]}};r();var eX=class extends d{constructor(){super(Mu.fNt)}};r();var sX=class extends d{constructor(){super(Mu.lNt)}};r(),r();var nX="LazyMediaBuffer",rX=class extends i{get _P(){return this._C}get aJ(){return this.J$}get dd(){if(!this.kwt)throw new Ri(ue.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.kwt.dd}get BW(){return this.HW}set BW(t){this.HW=t,this.kwt&&(this.kwt.BW=t)}zH(){return this.kwt?this.kwt.zH():this.bCt}get p_(){return this.kwt?this.kwt.p_:re.ZB()}get cJ(){return this.kwt?this.kwt.cJ:this.lJ.YH}get FW(){return this.ZW}set FW(t){this.ZW=t,this.kwt&&(this.kwt.FW=t)}fJ(t,i){p.hDt(nX,"Marking gap from "+t+" to "+i+"."),this.lJ.WH(t,i),this.kwt&&this.kwt.fJ(t,i)}_J(t,i){p.hDt(nX,"Removing gap from "+t+" to "+i+"."),this.lJ.VH(t,i),this.kwt&&this.kwt._J(t,i)}LCt(t){this.kwt=t,this.kwt.FW=this.ZW,this.kwt.BW=this.HW;const i=this.lJ.YH;for(let t=0;t<i.L;t++)this.kwt.fJ(i.yn(t),i.wn(t));var e;this.bCt&&(p.hDt(nX,"End of stream"),null==(e=this.kwt)||e.hJ());this.kwt.dn(vl.dH,this.Ds),this.kCt.iL(t)}xCt(t){return Oi(this.kCt.sL,t)}async mK(t,i,e){const s=await this.xCt(e);await s.mK(t,i,e)}async gJ(){const t=await this.xCt();await t.gJ()}async MK(t,i,e){const s=await this.xCt(e);await s.MK(t,i,e)}async wm(t,i,e){const s=await this.xCt(e);await s.wm(t,i,e)}async PK(t,i){const e=await this.xCt();await e.PK(t,i)}hJ(){this.bCt=!0,this.kwt&&this.kwt.hJ()}mH(t){return!!this.kwt&&this.kwt.mH(t)}async yH(t){const i=await this.xCt();await i.yH(t)}async ln(){var t;this.Uo(),null==(t=this.kwt)||t.hn(vl.dH,this.Ds)}constructor(t,i){super(),this.J$=t,this.CCt=i,this._C=void 0,this.kwt=void 0,this.kCt=new $s,this.HW=20,this.bCt=!1,this.ZW=30,this.lJ=new cr}},hX="LazyMediaSource",oX=class{get dd(){return{$w:si.tO,c$:[],gP:[]}}get ht(){throw new k("Not implemented")}get KJ(){return this.OCt}get JJ(){return this.jCt}get p_(){return this.uP?this.uP.p_:re.ZB()}get lt(){return this.uP?this.uP.lt:this.KL}get zH(){return!!this.uP&&this.uP.zH}get cg(){return this.uP?this.uP.cg:new re([0,1/0])}r$(t){this.KL=t,this.uP&&this.uP.r$(t)}hJ(){this.i8=!0,this.uP&&this.uP.hJ()}ZK(){this.i8=!1,this.uP&&this.uP.ZK()}u$(t,i,e,s){this.zCt=t,this.PCt=i,this.BCt=Boolean(e),this.RCt=Boolean(s),this.uP&&this.uP.u$(t,i,e,s)}mH(t){return!this.uP||this.uP.mH(t)}async yH(t){if(!this.mH(t))throw new k("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.uP)await this.uP.yH(t);else{var i,e;this.eP.K2();const s=await this.eP.En(t);M(this.KL)||s.r$(this.KL),this.i8&&s.hJ(),s.u$(this.zCt,this.PCt,this.BCt,this.RCt),p.hDt(hX,"The MediaSource has been loaded."),this.UCt=!0,this.uP=s,null==(i=this.OCt)||i.LCt(this.uP.KJ),null==(e=this.jCt)||e.LCt(this.uP.JJ),this.QCt.iL(s),this.eP.J2()}}async Hf(){this.uP&&await this.uP.Hf()}constructor(t,i,e){this.eP=t,this.OCt=void 0,this.jCt=void 0,this.QCt=new $s,this.uP=void 0,this.UCt=!1,this.KL=NaN,this.i8=!1,this.zCt=0,this.PCt=1/0,this.BCt=!1,this.RCt=!1,i&&(p.hDt(hX,"Created lazy media buffer for audio."),this.OCt=new rX(Zt.Gv,this)),e&&(p.hDt(hX,"Created lazy media buffer for video."),this.jCt=new rX(Zt.Yv,this))}};function aX(t,i){return void 0===i&&(i=!1),function(e,s){void 0===s&&(s="*");let n=cX(e,"tag");const r=cX(null==s?"*":s,"range"),h=[];let o,a,u,c=-1;for(;++c<r.length;)if(o=r[c].toLowerCase(),i||"*"!==o){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),o)){if(!i)return n[a];h.push(n[a])}else u.push(n[a]);n=u}return i?h:void 0}}r();aX(((t,i)=>"*"===i||t===i||Ji(t,i+"-")),!0),aX(((t,i)=>{const e=t.split("-"),s=i.split("-");let n=0,r=0;if("*"!==s[r]&&e[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!e[n])return!1;if(e[n]!==s[r]){if(1===e[n].length)return!1;n++}else n++,r++}else r++;return!0}),!0);var uX=aX(((t,i)=>{let e,s=i;for(;;){if("*"===s||t===s)return!0;if(e=s.lastIndexOf("-"),e<0)return!1;"-"===s.charAt(e-2)&&(e-=2),s=s.slice(0,e)}}));function cX(t,i){const e=t&&"string"==typeof t?[t]:t;if(!e||"object"!=typeof e||!("length"in e))throw new k("Invalid "+i+" `"+e+"`, expected non-empty string");return e}r(),r();var lX,dX=16384,fX=71,_X=188,gX=2,wX=3;function AX(t){return vX(t)?1:function(t){return function(t){if(t.length<gX*_X)return-1;const i=t.length<wX*_X?gX:wX,e=S.min(1e3,t.length-i*_X);for(let s=0;s<=e;s++){let e=!0;for(let n=0;n<i;n++)if(t[s+n*_X]!==fX){e=!1;break}if(e)return s}return-1}(t)>=0}(t)?2:function(t){return null!==Sx(mo(t),new Eo)}(t)?3:0}function vX(t){const i=FA(t,0,S.min(t.length,dX));return Rs.bT(mo(i))}!function(t){t[t.Hv=0]="Hv",t[t.Ev=1]="Ev",t[t.FCt=2]="FCt",t[t.YCt=3]="YCt"}(lX||(lX={}));var jr=class{get $w(){return this.J$}get p_(){return this.kwt.p_}get cJ(){return this.kwt.cJ}GCt(t){return this.kwt===t}async MK(t,i){await this.kwt.MK(t.JM,{XZ:t.CNt.Bw},i),void 0!==this.WCt&&this.J$===Zt.Yv&&vX(t.JM.JM)&&this.WCt.jdt(t.JM.JM)}async mK(t,i){Pi(i),p.oN("HlsMediaBuffer","Got media data, appending to "+this.J$+" MediaBuffer: "+Qo(t.OLt.xst));const e=t.Bxt,s=t.Fm+t.lt,n={n8:t.Fm,lt:t.lt,Zy:t.Zy,XZ:t.CNt.Bw};void 0!==t.JM&&(await this.kwt.mK(t.JM,n,i),this.VCt(t.JM,t)),this.HCt(e,s)}VCt(t,i){var e;if(!vX(t.JM))return;const s=i.Fm,n=s+i.lt,r=i.Zy;if(null==(e=this.pdt)||e.sct(t.JM,s,r),void 0!==this.WCt&&this.J$===Zt.Yv){const e=i.OLt.USt;this.WCt.sct(t.JM,s,n,r,i.CNt,e)}const h=[];void 0!==this.pdt&&h.push(this.pdt),void 0!==this.WCt&&h.push(this.WCt),Jm(this.p_,h)}HCt(t,i){const e=this.kwt.p_,s=new re([t,i]).OB(e);for(let t=0;t<s.L;t++)this.kwt.fJ(s.yn(t),s.wn(t));for(let t=0;t<e.L;t++)this.kwt._J(e.yn(t),e.wn(t))}fJ(t,i){this.kwt.fJ(t,i)}_J(t,i){this.kwt._J(t,i)}constructor(t,i,e,s){this.J$=t,this.kwt=i,this.pdt=e,this.WCt=s}};r();function mX(t){if(t.$w!==ve.MIt||void 0===t.MNt)return;const i=t.MNt.match(/^CC([1-4])$/);if(i)return Number(i[1]);const e=t.MNt.match(/^SERVICE([\d+])$/);return e?Number(e[1]):void 0}r(),r(),r();var pX=class{sIt(t){var i,e,s;return null==(s=null==(i=this.uP)||null==(e=i.JJ)?void 0:e.mH(t))||s}nIt(t){var i,e,s;return null==(s=null==(i=this.uP)||null==(e=i.KJ)?void 0:e.mH(t))||s}constructor(t){this.uP=t}},mi="LLHLSPlayer",yX=[Dt.hv,Dt.ov,Dt.uv,Dt._w],MX=[t.RA,t.QA,t.vA,t.SA,t.DA],TX=2e3,NX=class extends i{qCt(){if(void 0===this.XCt)return!1;const t=le.n_();if(!this.XCt.wCt.vxt(t))return!1;const i=this.XCt.wCt.gxt();if(void 0===i||void 0===i.wrt.lt)return!1;const e=this.I_,s=this.q_,n=this.XCt.TCt.VB(e);if((void 0!==n?n.wn(0)-e:0)>=2*i.wrt.lt*s)return!1;return 8*i.Axt/this.hR.SW.jz>=1.8*i.wrt.lt}async ZCt(){var t;const i=await this.oIt();if(void 0===i)return;const e=null==(t=this.XCt)?void 0:t.wCt.gxt();if(void 0===e)return;const s=this.KCt;if(S.max(0,e.Axt-e.wxt)<=e.Axt*(i.jz/s.jz))return;const n=i.jz<s.jz;await this.RNt(i,n)}JCt(t){return R_(t,(t=>t.jz))}async $Ct(){let t=await this.tOt();if(0===t.length)return;const i=await this.iOt(t);i.length>0&&(t=i);const e=this.JCt(t);void 0!==e&&(await this.RNt(e,!0),this.fP.JDt(e.jz))}get eOt(){const t=[this.sOt,this.nOt].filter(oe);for(const i of t){if(!i.ANt.wSt)return!1;const t=i.ANt.vit,e=t[t.length-1];if(e&&e._St!==this.rOt)return!1}return!0}get ONt(){return this.KCt}get WNt(){return this.sOt}get HNt(){return this.nOt}get hOt(){return this.oOt}get ot(){return this.qv}get p_(){return this.eP.p_.ks()}get PNt(){const t=[];if(this.KCt){const i=this.eP.I_;for(const e of this.aOt)for(const s of e._Ct){const e=s.LLt(i);e&&!ks(t,e)&&t.push(e)}}return t}get M_(){if(this.KCt){const t=this.eP.I_;return this.KCt.xSt(t)}}set M_(t){if(!t||!this.KCt)return;const i=this.KCt.CSt(t);void 0!==i&&this.Em(i,!1,!0)}get I_(){var t;return null!=(t=this.uOt)?t:this.eP.I_}set I_(t){this.Em(t,t===1/0,!0)}Em(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),p.oN(mi,"Seeking to "+t+" s."),this.uOt=t,this.cOt=i,this.lOt=!0,this.Ilt=!0,this.jo(new gt(t)),this.Q4.i_(),this.dOt&&(le.r_(this.fOt),e?this.fOt=le.h_((()=>this._Ot(t,i)),50):this._Ot(t,i))}_Ot(t,i){le.r_(this.fOt);const e=[this.sAt,this.gOt,this.F4].filter(oe);this.Q4=new Z_,this.F4=this.Y4(e,t,i,this.Q4.$f).catch(this.wOt)}get lt(){var t,i,e,s,n,r,h;if(!this.eOt)return null!=(h=null!=(r=null!=(n=null==(t=this.sOt)?void 0:t.ANt.lt)?n:null==(i=this.nOt)?void 0:i.ANt.lt)?r:null==(e=this.Llt)||null==(s=e.Ybt)?void 0:s.ANt.lt)?h:1/0;const o=this.eP.lt;if(M(o)){var a,u,c;const t=null!=(c=null==(a=this.AOt)?void 0:a.ANt.lt)?c:null==(u=this.vOt)?void 0:u.ANt.lt;if(void 0!==t)return t}return o}get L_(){if(!this.eOt)return!1;if(this.fg&&this.dOt){var t,i;const e=this.I_,s=null==(t=this.sOt)?void 0:t.ANt.lt,n=null==(i=this.nOt)?void 0:i.ANt.lt;return!(void 0!==s&&e<s)&&!(void 0!==n&&e<n)}return this.eP.L_}get dt(){return this.rP}get C_(){return this.hP}get j_(){}get P_(){return!1}get R_(){return qr({},{Jv:0,$v:0,tm:0,im:0,nm:0,hm:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.eP.U_(),{nm:this.Kct,im:this.hR.SW.jz})}get wr(){var t;return null==(t=this.Llt)?void 0:t.wr}get Q_(){return this.eP.Q_}set Q_(t){this.eP.Q_=t}get G_(){return this._ot}set G_(t){this._ot!==t&&(this._ot=t,this.jo(t?new uF:new cF))}get V_(){return this.eP.V_}get q_(){return this.eP.q_}set q_(t){p.oN(mi,"Setting playback rate to "+t+"."),this.eP.q_=t}get K_(){return this.elt.ks()}get elt(){return this.eP.K_}get eg(){return this.aP}set eg(t){this.aP!==t&&(this.aP=t,this.mOt())}get og(){let t=this.eP.og;return this.rlt&&(t=S.max(he.Un,t)),t}get cg(){return this.qct.ks()}get qct(){let t=this.a$;const i=[this.sOt,this.nOt].filter(oe);if(t.L>0&&i.some((t=>!t.ANt.wSt))){const e=this.elt,s=t.wn(t.L-1);if(e.L>0&&e.wn(e.L-1)>s){let n=e.wn(e.L-1);const r=function(t){return t.reduce(((t,i)=>t.bn(i.ANt.mEt)),new re([0,1/0]))}(i);r.L>0&&(n=S.min(n,r.wn(r.L-1))),t=t.xB(new re([s,n]))}}return t}HEt(){let t=function(t){let i=new re([0,1/0]),e=0;for(const s of t){const t=s.ANt.cg;t.L>0&&(i=i.bn(t),e=S.max(e,t.yn(0)))}if(i.L>0)return i;return re.qB(e)}([this.sOt,this.nOt].filter(oe));0!==t.L&&(this.uP&&this.eOt&&this.uP.lt!==1/0&&(t=new re([t.yn(0),this.uP.lt])),this.a$=t,this.pOt&&this.pdt.WI(t.yn(0)),this.yOt&&this.WCt.WI(t.yn(0)))}get fg(){var t;return null!=(t=this.lOt)?t:this.eP.fg}get cP(){}get rt(){return this.Tl}get ht(){return this.Zv}get wg(){return this.eP.wg}get pg(){return this.eP.pg}get Mg(){return this.eP.Mg}set Mg(t){p.oN(mi,"Setting volume to "+t+"."),this.eP.Mg=t}get Dg(){return this.lP}get Sg(){return!1}set Sg(t){}get dP(){return this.fP}Ug(){return!1}xg(){return this.eP.fa}we(){p.oN(mi,"Hiding the player."),this.eP.we()}Pg(){p.oN(mi,"Pausing the player."),this.eP.Pg()}async Bg(){const t=this.eP.Bg();if(this.L_){const t=this.qct;t.L>0&&this.Em(t.yn(0))}this.dOt||await this.En(),this._ct(),await t}_ct(){var t;if(!this.Hct())if(null==(t=this.ONt)?void 0:t.ANt.wSt){var i;let t=!0,e=0;const s=null==(i=this.KCt)?void 0:i.ANt.yn;if(!this.Ilt&&s&&(t=!s.nSt,e=s.sSt,e<0)){const t=this.ONt.ANt.mEt;e+=t.wn(t.L-1)}this._Ot(e,t)}else this._Ot(1/0,!0);this.MOt()&&this._Ot(1/0,!0)}Hct(){var t;const i=this.qct;if(0===i.L)return!0;const e=null==(t=this.TOt)?void 0:t.jB(this.I_);return(e&&e>0?this.TOt.wn(e):this.I_)>=i.yn(0)}get TOt(){var t,i;const e=null==(t=this.NOt)?void 0:t.TCt,s=null==(i=this.XCt)?void 0:i.TCt;return e?s?s.bn(e):e:s}MOt(){return kX(this.I_,this.sOt)||kX(this.I_,this.nOt)}ldt(){this.rP=void 0,this.hP=void 0}HP(t){this.rP||(Mo(this.Gn()),this.rP=Yn(t),this.hP=t,this.jo(new _i(t)))}ye(){p.oN(mi,"Showing the player."),this.eP.ye()}Qg(){throw new k("Not implemented")}Fg(){throw new k("Not implemented")}Yg(){}Gg(){this.dOt&&Mo(this.DOt(this.sOt,this.nOt,this.oOt,{Gg:!0}))}async Zh(i,e,s){p.oN(mi,"Setting the player source to "+i.src+"."),this.ldt(),this.uc&&!Wc(this.uc)&&(await this.Gn(),Pi(s)),i.src&&!Wc(i)&&(this.mP.Bz(i.contentProtection),this._Lt=i,this.yOt=!ks(i.ignoreEmbeddedTextTrackTypes,jo.CEA608),this.pOt=!ks(i.ignoreEmbeddedTextTrackTypes,jo.EMSG),this.dn(Mu.gNt,this.handleBufferingErrorEvent),this.Llt=new vq(this.LS,this.Eut,i.useCredentials,le.Sv(i.src)),this.Llt.dn(Yh.jbt,this.fLt),this.Llt.dn(Yh.zbt,this.IOt),this.Llt.dn(t.CA,this.Ds),this.Llt.dn(t.OA,this.Ds),this.SOt=new Tq(i,this.Llt,this.eP),this.Tl.Gz(this.SOt.rt),this.mCt=this.EOt.h8(),e.textTracks&&this.pP(e.textTracks),Fi(this.Tl),this.mOt())}mOt(){this.bOt.i_(),this.bOt=new Z_,this.Mdt=this.LOt(this.Mdt,this.bOt.$f).catch(this.yct)}async LOt(t,i){const e=this.aP;t&&(await t,Pi(i)),e!==Sl.uB&&this.Llt&&(e!==Sl.XM?this.En().catch(this.yct):this.kOt(i).catch(this.yct))}async kOt(t){if(void 0===this.Llt)return;if(!this.Llt.Rbt)try{await this.Llt.Wbt(t)}catch(t){throw Et(t),this.G_=!1,new Ri(ue.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}const i=await this.xOt();this.COt(i),this.OOt.Tlt(),await this.jOt(i,t),this.zOt()}async xOt(){if(this.POt=this.Llt.wr.uDt,!this.POt.length)throw new Ri(ue.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.BOt(this.POt);if(0===t.length)throw new Ri(ue.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const i=await this.iOt(t);return i.length>0&&(t=i),p.oN(mi,"Selecting initial active variant stream."),function(t,i,e,s){void 0===s&&(s=vw.maximumBackoff);const n=function(t,i){if(void 0===i)return t;const e=i.preferredVideoCodecs,s=i.preferredAudioCodecs;if(void 0!==e){let i;for(const n of e){const e=t.filter((t=>t.Tet&&t.Tet.KNt&&rk(t.Tet.KNt,n)));if(0===e.length)continue;if(void 0===s)return e;void 0===i&&(i=e);const r=EX(e,s);if(void 0!==r)return r}if(void 0!==i)return i}if(void 0!==s){const i=EX(t,s);if(void 0!==i)return i}return t}(t,i),r=LX(n,s);switch(e.UW.type){case Jo.BANDWIDTH:{const t=e.WW,i=r.filter((i=>i.jz<=t));if(i.length>0)return gh(i,(t=>t.jz))}case Jo.PERFORMANCE:return R_(r,(t=>t.jz));case Jo.QUALITY:return gh(r,(t=>t.jz))}}(t,this._Lt.abr,this.hR,this.Tut.maximumBackoff)}async jOt(t,i){const e=[],s=bX(t.cDt);s&&this.vOt!==s&&(p.oN(mi,"Detected initial audio rendition."),this.vOt=s,e.push(this.ROt(s,i)));const n=SX(t.LSt);let r;n&&this.UOt!==n&&(p.oN(mi,"Detected initial subtitle rendition."),this.UOt=n,e.push(this.ROt(n,i))),n||(r=SX(t.kSt),r&&(p.oN(mi,"Detected initial closed caption rendition."),this.QOt(t,r)));const h=bX(t.lDt);if(h&&this.AOt!==h){p.oN(mi,"Detected initial video rendition."),this.AOt=h;s&&yV(h,s)||e.push(this.ROt(h,i))}await Promise.all(e)}zOt(){this.rlt||(this.rlt=!0,this.Ldt.Cdt())}async ROt(t,i){try{await this.Llt.$bt(t,i)}catch(e){Et(e),(kt(e)||Um(e))&&await this.FOt(t,i)}}async FOt(t,i){if(!this.YOt)if(t.$w!==ve.Yv)await this.GOt(t,i);else if(this.POt&&this.POt.length<=1)await this.GOt(t,i);else{const t=await this.xOt();this.COt(t),await this.jOt(t,i)}}En(){return this.sAt||(this.sAt=this.ett(this.OS.$f).catch(this.yct)),this.sAt}async ett(t){this.rlt||await this.kOt(t),this.DOt(this.vOt,this.AOt,this.UOt).catch(h),this.dOt=!0}pP(t){for(const i of t)i.src&&this.NP.IS(i)}QOt(t,i){if(!this.yOt)return;const e=function(t){const i=[];for(const e of t){const t=mX(e);void 0!==t&&i.push({R5:t,U5:e.ys||"",fh:e.v})}return i}(t.kSt);for(const t of e)this.WCt.vyt(t);if(void 0!==i){const t=mX(i);this.WCt.wyt(t).Xw=Da.zn}}get aOt(){return[this.NOt,this.XCt,this.WOt].filter(oe)}BNt(t){for(const i of t)if(!this.VOt(i))throw new k("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.POt=t}VOt(t){const i=this.wr;return!!i&&ks(i.uDt,t)}HOt(t){if(this.KCt)return xe(this.KCt.wDt,(i=>i===t))}COt(t){if(p.oN(mi,"Setting active variant stream."),this.KCt!==t){var i;if((null==(i=this.KCt)?void 0:i.bIt)!==(null==t?void 0:t.bIt)){if(this.KCt)for(const t of this.KCt.LSt)this.jS(t);if(t)for(const i of t.LSt)this.qOt(i)}this.KCt=t,this.jo(new eX)}}qOt(t){const i=this.eP.SS(ra.HM,void 0,t.v,t.ys,t.vNt,void 0,void 0,t.NNt.map(LV).filter(oe));this.XOt.it(i),this.ZOt.set(t.Bw,i),i.dn(ia.ra,this.onTextTrackChange)}jS(t){const i=this.ZOt.get(t.Bw);i&&(i.hn(ia.ra,this.onTextTrackChange),this.XOt.st(i),this.ZOt.delete(t.Bw),this.eP.jS(i))}async tOt(){var t;const i=null!=(t=this.POt)?t:this.wr.uDt;if(0===i.length&&!this.POt)return p.oN(mi,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===i.length&&!this.POt)return p.oN(mi,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const e=await this.BOt(i);if(0===e.length)return p.oDt(mi,"LLHLSPlayer - No variant streams with supported codecs available to perform ABR selection on."),[];const s=LX(e,this.Tut.maximumBackoff);return 0===s.length?(this.YOt||(p.oDt(mi,"LLHLSPlayer - No variant streams with online renditions available to perform ABR selection on."),this.KOt++,await this.JOt(e)),[]):s}async $Ot(){const t=await this.oIt();if(void 0===t)return;const i=!!this.KCt&&t.jz<this.KCt.jz;await this.RNt(t,i)}async oIt(){var t,i;const e=await this.tOt();if(0===e.length)return;const s=function(t){const i=t.I_,e=t.p_.VB(i);return e?e.wn(0)-i:0}(this.eP),n=await this.iOt(e),r={Ti:this.eP.Ti,Mi:this.eP.Mi,iIt:s,gut:null==(t=this._Lt)||null==(i=t.abr)?void 0:i.restrictToPlayerSize},h=await this.tjt.oIt(e,this.KCt,n,r,new pX(this.uP));return!!this.KCt&&h.jz<this.KCt.jz||this.ijt(h,e,s)?h:void 0}ijt(t,i,e){var s;if(t===this.ONt)return!1;if(t===this.JCt(i))return!0;(!this.ejt||this.ejt.jNt.jz>t.jz)&&(this.ejt={jNt:t,Git:le.n_()});const n=le.n_()-this.ejt.Git;var r;const h=null!=(r=null==(s=this.HNt)?void 0:s.ANt.tIt)?r:1/0;return e>=S.max(h-1,5)||n>1e3}async JOt(t){this.YOt=!0;let i=!1;for(const e of t)try{const t=this.nOt?xe(e.lDt,(t=>Hh(t,this.nOt))):void 0;if(void 0===t)continue;await this.$bt(t),t.ANt.jEt=-1/0,i=!0}catch(t){}if(i)this.KOt=0,await this.sjt();else{if(this.KOt>=this.Tut.maxRetries)return void this.HP(new Ri(ue.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=S.min(this.Tut.minimumBackoff*2**(this.KOt-1),this.Tut.maximumBackoff);await yc(t)}this.YOt=!1,await this.$Ot()}async BOt(t){let i=await Q_(t,(async t=>{var i,e,s;const n=[(null==(i=t.Tet)?void 0:i.ZNt)?'audio/mp4; codecs="'+t.Tet.ZNt+'"':void 0,(null==(e=t.Tet)?void 0:e.KNt)?'video/mp4; codecs="'+t.Tet.KNt+'"':void 0].filter(oe);return 0===n.length||await this.njt.RH(n,null==(s=this._Lt)?void 0:s.useManagedMediaSource)}));return i.some((t=>{var i;return null==(i=t.Tet)?void 0:i.KNt}))&&(i=i.filter((t=>!t.Tet||t.Tet.KNt||0!==t.lDt.length))),i.some((t=>{var i;return null==(i=t.Tet)?void 0:i.ZNt}))&&(i=i.filter((t=>!t.Tet||t.Tet.ZNt||0!==t.cDt.length))),i}iOt(t){return this.Llt.Qbt?Q_(t,(t=>async function(t,i){for(const e of t)if(!await i(e))return!1;return!0}([bX(t.cDt),bX(t.lDt),SX(t.LSt),SX(t.kSt)].filter(oe),(t=>this.rjt(t))))):Promise.resolve([])}async rjt(t){if(0===t.ANt.vit.length)return!1;const i=t.ANt.vit[0];if(!i.xst)return!1;const e=i.xst,s=e.Frt?sH(e.Frt.yn,e.Frt.L):void 0;try{return await this.Eut.iit(e.zy,s)}catch(t){return!1}}async RNt(t,i){if(!this.dOt)throw new k("LLHLSPlayer - The LLHLSPlayer is not loaded.");if(!t)throw new k("LLHLSPlayer - Cannot explicitly set the active variant stream to undefined.");if(!this.VOt(t))throw new k("LLHLSPlayer - Trying to set an active variant stream that does not exists on the internal model.");if(t===this.KCt)return void p.oN(mi,"Trying to set the already active variant stream, ignoring.");const e=this.sOt?xe(t.cDt,(t=>Hh(t,this.sOt))):void 0,s=this.nOt?xe(t.lDt,(t=>Hh(t,this.nOt))):void 0,n=this.oOt?xe(t.LSt,(t=>Hh(t,this.oOt))):void 0;this.COt(t),this.ejt=void 0,await this.DOt(e,s,n,{hjt:i})}async VNt(t){if(!this.dOt)throw new k("LLHLSPlayer - The LLHLSPlayer is not loaded");if(!this.KCt)throw new k("LLHLSPlayer - Cannot set the active audio rendition when there is no active variant stream.");if(!t)throw new k("LLHLSPlayer - Cannot explicitly set the active audio rendition to undefined.");const i=this.HOt(t);if(!i)throw new k("LLHLSPlayer - Trying to set an invalid rendition as the active audio rendition.");p.oN(mi,"Switching audio rendition"),await this.DOt(i,this.nOt,this.oOt,{ojt:!0})}async qNt(t){if(!this.dOt)throw new k("LLHLSPlayer - The LLHLSPlayer is not loaded");if(!this.KCt)throw new k("LLHLSPlayer - Cannot set the active video rendition when there is no active variant stream.");if(!t)throw new k("LLHLSPlayer - Cannot explicitly set the active video rendition to undefined.");const i=this.HOt(t);if(!i)throw new k("LLHLSPlayer - Trying to set an invalid rendition as the active video rendition.");p.oN(mi,"Switching video rendition"),await this.DOt(this.sOt,i,this.oOt,{ajt:!0})}async ujt(t){if(!this.dOt)throw new k("LLHLSPlayer - The LLHLSPlayer is not loaded");if(!this.KCt)throw new k("LLHLSPlayer - Cannot set the active subtitle rendition when there is no active variant stream.");if(!t)throw new k("LLHLSPlayer - Cannot explicitly set the active video rendition to undefined.");const i=this.HOt(t);if(!i)throw new k("LLHLSPlayer - Trying to set an invalid rendition as the active subtitle rendition.");p.oN(mi,"Switching subtitle rendition"),await this.DOt(this.sOt,this.nOt,i)}async cjt(t,i){this.YOt||(t.$w!==ve.Yv?await this.GOt(t,i):this.POt&&this.POt.length<=1?(this.nOt!==t&&await this.DOt(this.sOt,t,this.oOt),await this.GOt(t,i)):await this.$Ot())}async $bt(t,i){try{await this.Llt.$bt(t,i)}catch(e){throw Et(e),(kt(e)||Um(e))&&await this.cjt(t,i),e}}async GOt(t,i){if(!ks(this.ljt,t)){this.ljt.push(t);try{const e=t.$w===ve.HM||t.$w===ve.MIt?1/0:this.Tut.maxRetries;await Sa((()=>this.retryOfflineRenditionsCallback(t,i)),i,e,this.Tut.minimumBackoff,this.Tut.maximumBackoff)}catch(t){this.HP(new Ri(ue.MEDIA_LOAD_ERROR,t.message,t))}finally{Hc(this.ljt,t),t.ANt.jEt===-1/0&&await this.sjt()}}}DOt(t,i,e,s){void 0===s&&(s={});const n={hjt:s.hjt||!1,ojt:s.ojt||!1,ajt:s.ajt||!1,Gg:s.Gg||!1};return n.Gg||this.sOt!==t||this.nOt!==i||this.oOt!==e?void 0===t&&void 0===i?Promise.reject(new k("Trying to buffer no media renditions.")):(this.sOt=t,this.nOt=i,this.oOt=e,this.HEt(),this.jo(new sX),this.Q4.i_(),this.Q4=new Z_,this.djt.i_(),this.djt=new Z_,this.gOt=this.fjt([this.gOt,this.F4].filter(oe),t,i,e,n,this.djt.$f).catch(this.wOt),this.gOt):Promise.resolve()}async fjt(t,i,e,s,n,r){var o;await Promise.all(t.map((t=>t.catch(h)))),this._jt(),await this.gjt();const a=[];n.ojt&&this.uP&&this.uP.KJ&&a.push(this.uP.KJ.wm(0,1/0)),n.ajt&&this.uP&&this.uP.JJ&&a.push(this.uP.JJ.wm(0,1/0)),await Promise.all(a),Pi(r);const u=await this.wjt(i,e,n.Gg,r);this.Ajt(i,e,n.hjt||u),this.vjt(s,n.hjt),Pi(r);const c=[e,i&&e&&yV(i,e)?void 0:i,s].filter(oe);try{await Promise.all(c.filter((t=>!t.ANt.kEt)).map((t=>{var i;return null==(i=this.Llt)?void 0:i.tLt(t,r)})))}catch(t){Et(t)}if(Pi(r),this.o$(),this.HEt(),void 0!==this.uOt)this._Ot(this.uOt,this.cOt);else if(!this.Ilt&&(null==(o=this.KCt)?void 0:o.ANt.yn)){const t=this.KCt.ANt,i=t.yn;let e=i.sSt;if(i.sSt<0){const i=t.mEt;e+=i.wn(i.L-1)}this._Ot(e,!i.nSt)}else!this.Ilt&&c.every((t=>!t.ANt.wSt))?this._Ot(1/0,!0):this.aOt.length>0&&this.mjt()}async wjt(t,i,e,s){var n,r;const h=void 0!==t&&t!==i,o=void 0!==i,a=await this.pjt(t,i,this.KCt);if(Pi(s),!e&&this.uP&&!a)return!1;const u=void 0!==(null==(n=this.uP)?void 0:n.KJ),c=void 0!==(null==(r=this.uP)?void 0:r.JJ);if(!e&&!(h!==u||o!==c)&&a&&this.uP&&this.uP.mH(a))return await this.yjt(s),await this.uP.yH(a),!0;for(const t of this.aOt)t._Ct.forEach((t=>t.i_()));this.eP.K2();try{this.uP&&await this.eP.Gn(),this.uP=await this.Mjt(a,h,o)}finally{this.eP.J2()}return!0}async pjt(t,i,e){var s,n;const r=e.Tet,h=[];if(void 0!==t){if(!r||!r.ZNt)return;{const t='audio/mp4; codecs="'+r.ZNt+'"';p.oN(mi,"Configuring MediaSource for initial audio rendition with codec: "+t+"."),h.push(t)}}if(void 0!==i){if(!r||!r.KNt)return;{const t='video/mp4; codecs="'+r.KNt+'"';p.oN(mi,"Configuring MediaSource for initial video rendition with codec: "+t+"."),h.push(t)}}if(0===h.length)return void p.oDt(mi,"No codecs found on the active variant stream.");var o;const a=null!=(o=null==(s=null==i?void 0:i.ANt.vit[0])?void 0:s.hSt)?o:[];var u;const c=null!=(u=null==(n=null==t?void 0:t.ANt.vit[0])?void 0:n.hSt)?u:[],l=this.Llt.wr,d=await cH(this._Lt.contentProtection,h,l.pbt.concat(c).concat(a),this.LS,this._Lt.useCredentials);return{$w:si.tO,c$:h.map((t=>({_P:t}))),gP:d,p$:this._Lt.useManagedMediaSource}}async Mjt(t,i,e){let s;return s=t?await this.eP.En(t):new oX(this.eP,i,e),this.uP=s,this.o$(),this.lMt(),this.dMt(),s}o$(){const t=this.uP;if(t&&M(t.lt)){var i,e,s;const n=null!=(s=null==(i=this.sOt)?void 0:i.ANt.lt)?s:null==(e=this.nOt)?void 0:e.ANt.lt;void 0!==n&&n>0&&t.r$(n)}this.HEt()}lMt(){const t=this.uP;t&&(t.JJ&&(t.JJ.BW=this.hR.qW),t.KJ&&(t.KJ.BW=this.hR.qW))}dMt(){const t=this.uP;t&&(t.JJ&&(t.JJ.FW=this.hR.FW),t.KJ&&(t.KJ.FW=this.hR.FW))}Ajt(t,i,e){if(!this.uP)throw new k("Invalid state");this.uP.KJ?this.e$&&this.e$.GCt(this.uP.KJ)||(this.e$=new jr(Zt.Gv,this.uP.KJ,this.pOt?this.pdt:void 0,this.yOt?this.WCt:void 0)):this.e$=void 0,this.uP.JJ?this.s$&&this.s$.GCt(this.uP.JJ)||(this.s$=new jr(Zt.Yv,this.uP.JJ,this.pOt?this.pdt:void 0,this.yOt?this.WCt:void 0)):this.s$=void 0;const s=t&&i&&yV(t,i);if(this.s$&&i){const t=s&&this.e$?[this.s$,this.e$]:[this.s$];this.XCt?this.XCt.CNt!==i&&(e&&(this.XCt.i_(),this.XCt.pCt.tL()),this.XCt.Ikt(i)):(this.XCt=function(t,i,e,s,n,r,h,o,a,u){const c=s.wr.iI,l=new Fq(c),d=new Rq(Zt.Yv,t,s,l,n,r,h,u),f=i.map((t=>t.$w)),_=o.zut(l,s.wr.iI,f),g=new iX(d,l,_,a);return g.yCt(i),g}(i,t,this.eP,this.Llt,this.LS,this.Eut,this.ULt,this.mCt,this.hR,this._Lt.useCredentials),this.XCt.wCt.dn(Ar.Mkt,this.Tjt),this.XCt.wCt.dn(Ar.Tkt,this.Njt),this.XCt.vCt.dn(ca.Qxt,this.Djt),this.XCt.vCt.dn(ca.Yxt,this.Ijt),this.XCt.vCt.dn(ca.Gxt,this.Sjt),this.XCt.vCt.dn(ca.Fxt,this.Ejt)),this.XCt.yCt(t)}else{var n;null==(n=this.XCt)||n.Hf(),this.XCt=void 0}var r;this.e$&&t&&!s?(this.NOt?this.NOt.CNt!==t&&(e&&(this.NOt.i_(),this.NOt.pCt.tL()),this.NOt.Ikt(t)):(this.NOt=function(t,i,e,s,n,r,h,o,a,u){const c=s.wr.iI,l=new Fq(c),d=new Rq(Zt.Gv,t,s,l,n,r,h,u),f=o.zut(l,s.wr.iI,[i.$w]),_=new iX(d,l,f,a);return _.yCt([i]),_}(t,this.e$,this.eP,this.Llt,this.LS,this.Eut,this.ULt,this.mCt,this.hR,this._Lt.useCredentials),this.NOt.wCt.dn(Ar.Tkt,this.Njt),this.NOt.vCt.dn(ca.Qxt,this.Djt),this.NOt.vCt.dn(ca.Fxt,this.Ejt)),this.NOt.yCt([this.e$])):(null==(r=this.NOt)||r.Hf(),this.NOt=void 0);this.bjt()}vjt(t,i){if(this.WOt){this.WOt.wCt.CNt===t?i&&(this.WOt.i_(),this.WOt.pCt.tL()):(this.WOt.Hf(),this.WOt=void 0)}if(!this.WOt&&t){const i=this.ZOt.get(t.Bw);i.Xw=Da.zn,this.WOt=function(t,i,e,s,n,r,h){const o=e.wr.iI,a=new Wq(i,o),u=new Fq(o),c=new Rq(Zt.Au,t,e,u,s,n,r,h),l=new Jq(u,o,Zt.Au),d=new iX(c,u,l);return d.MCt(a),d}(t,i,this.Llt,this.LS,this.Eut,this.ULt,this._Lt.useCredentials)}}bjt(){const t=[this.e$,this.s$].filter(oe).map((t=>t.$w));this.Llt.wr.iI.mbt(t)}async Y4(t,i,e,s){await Promise.all(t.map((t=>t.catch(h)))),Pi(s),await this.gjt(),Pi(s),this.uOt=void 0,this.lOt=void 0,this.Ilt=!0;const n=this.qct.SB(i);this.eP.Em(n,e),this.dOt&&this.aOt.length>0&&(this.Ljt(this.eP.I_),this.mjt())}Ljt(t){for(const i of this.aOt)i.Ukt(t)||(i.SCt(),i.pCt.kxt()),i.DCt(t)||(i.ECt(),i.pCt.xxt())}_jt(){for(const t of this.aOt)t.i_()}gjt(){return Promise.all([this.kjt(),this.xjt(),this.Cjt()])}mjt(){this.Ojt(),this.jjt(),this.zjt()}async sjt(){this.dOt&&this.aOt.length>0&&(this.aOt.forEach((t=>t.SCt())),await this.kjt(),this.Ojt(),this.aOt.forEach((t=>t.wCt.Hkt())))}Ojt(){if(this.Pjt)return;const t=()=>{this.Pjt=void 0};this.Bjt=new Z_,this.Pjt=this.Rjt(this.Bjt.$f).catch(this.wOt).then(t,t)}async kjt(){var t;null==(t=this.Bjt)||t.i_();const i=this.Pjt;this.Pjt=void 0,i&&await i}async Rjt(i){Pi(i);const e=this.aOt;for(;;){const s=[],n=this.eP.I_;for(const t of e){const i=t.wCt,e=t.awt(n);if(i.DLt)s.push(i.ELt());else if(t.ICt(n,e,this.hR.qW)){const n=i.Qkt(e);if(void 0===n){if(i.CNt.ANt.wSt)continue;const t=i.CNt.ANt.vit;t.length&&t[0].Fm>e&&(this.I_=1/0),i.Zkt(),i.Gkt(e)}else{const[e,s]=n;i.e_t(e,s,t.gLt),t.vCt.tCt(e,s)}s.push(i.ELt())}}await ig((i=>{if(0===s.length){e.every((t=>t.wCt.Rkt))||s.push(this.eP.w_(t.XA,i));for(const t of e)s.push(t.vCt.w_(ca.Fxt,i))}return Oi(Promise.race(s),i)}),i)}}jjt(){if(this.Ujt)return;const t=()=>{this.Ujt=void 0};this.Qjt=new Z_,this.Ujt=this.Fjt(this.Qjt.$f).catch(this.wOt).then(t,t)}async xjt(){var t;null==(t=this.Qjt)||t.i_();const i=this.Ujt;this.Ujt=void 0,i&&await i}async Fjt(t){Pi(t);const i=this.aOt;for(;;){const e=[];for(const t of i){const i=t.wCt,s=t.vCt;if(s.DLt)e.push(s.ELt());else{const t=i.Ckt();t?"wrt"===t.$w?(s.nCt(t),e.push(s.ELt())):"lSt"===t.$w&&(s.iCt(t),e.push(s.ELt())):e.push(i.qkt())}}if(0===e.length)break;await Oi(Promise.race(e),t)}}zjt(){if(this.Yjt)return;this.Gjt=new Z_;const t=()=>{this.Yjt=void 0};this.Yjt=this.Wjt(this.Gjt.$f).catch(this.wOt).then(t,t)}async Cjt(){var t;null==(t=this.Gjt)||t.i_();const i=this.Yjt;this.Yjt=void 0,i&&await i}async Wjt(t){for(;;){const i=this.aOt;i.forEach((t=>t.t_t()));const e=[],s=[],n=[];for(const t of i){const i=t.vCt;for(const r of t._Ct){const t=r.yLt?e:s;if(r.DLt)t.push(r.ELt());else if(!r.bLt(this.eP.I_)){const e=i.cCt(r.$w);e?"wrt"===e.$w&&e._St===this.rOt?(r.dwt(e),t.push(r.ELt())):"dCt"===e.$w&&e._St===this.rOt&&(r.MK(e),t.push(r.ELt())):n.push(i.lCt(r.$w))}}}if(0===e.length){const e=Cs(i,(t=>t._Ct.filter((t=>t.yLt)).map((i=>t.vCt.cCt(i.$w)))));if(e.length>0&&e.every((t=>void 0!==t&&"dCt"===t.$w&&t._St!==this.rOt))){const s=e,n=gh(s,(t=>t._St))._St;if(s.every((t=>t._St===n))){const i=R_(s,(t=>t.Fm)).Fm,e=await this.Vjt(s);this.uP.mH(e)?(p.hDt(kV,"Seamless switch from",this.uP.dd,"to",e),await this.uP.yH(e),p.hDt(kV,"Seamless switch complete.")):await this.Hjt(i,e,t),this.rOt=s[0]._St}else for(const t of i)for(const i of t._Ct){let e=t.vCt.cCt(i.$w);for(;e&&e._St!==n;)t.vCt.kLt(e),e=t.vCt.cCt(i.$w)}continue}}if(0===e.length&&0===s.length&&0===n.length){i.every((t=>t._Ct.length>0&&t._Ct.every((t=>t.bLt(this.eP.I_)))))&&this.uP.hJ();break}await Oi(Promise.race([...e,...s,...n]),t)}}async Vjt(t){const i=t.map((t=>t.fCt.Tet)),e=i.map((t=>({_P:t}))),s=Cs(t,(t=>t.fCt.hSt));s.push(...this.Llt.wr.pbt);let n=await cH(this._Lt.contentProtection,i,s,this.LS,this._Lt.useCredentials);return 0===n.length&&this.uP&&this.uP.dd.gP.length>0&&(n=this.uP.dd.gP),{$w:si.tO,c$:e,gP:n,p$:this._Lt.useManagedMediaSource}}async Hjt(i,e,s){var n;const r=this.uP,h=r.lt,o=this.I_<i;if(o)try{for(p.hDt(kV,"Marking end of stream and waiting for ended to switch discontinuity."),r.hJ();!this.eP.L_&&this.eP.I_<i;)await this.eP.w_([t.XA,t.NA],s)}catch(t){throw r.ZK(),r.r$(h),t}p.hDt(kV,"Perform hard switch from",null==(n=this.uP)?void 0:n.dd,"to",e);try{this.eP.K2(),this.I_<i&&this.eP.Em(i,!0,!0),this.s$=void 0,this.e$=void 0,this.bjt(),await this.eP.Gn(),this.uP=await this.eP.En(e),this.o$(),this.lMt(),this.dMt(),this.uP.JJ&&(this.s$=new jr(Zt.Yv,this.uP.JJ,this.pOt?this.pdt:void 0,this.yOt?this.WCt:void 0)),this.uP.KJ&&(this.e$=new jr(Zt.Gv,this.uP.KJ,this.pOt?this.pdt:void 0,this.yOt?this.WCt:void 0)),this.bjt()}finally{o&&Mo(this.eP.Bg()),this.eP.J2()}if(this.XCt){const t=void 0!==this.e$&&void 0===this.NOt?[this.s$,this.e$]:[this.s$];this.XCt.yCt(t)}this.NOt&&this.NOt.yCt([this.e$]),p.hDt(kV,"Hard switch complete.")}yjt(t){return Oi(Nc(Cs(this.aOt,(t=>t._Ct.map((t=>t.ELt()))))),t)}async ln(){p.oN(mi,"Unloading the player."),this.qjt(),this.ldt(),await this.Gn(),this.eP.bP=void 0,this.XOt.ln(),await this.NP.ln(),await this.pdt.ln(),await this.WCt.ln(),this.qv.ln(),this.Zv.ln(),this.Tl.ln(),this.Xjt.ln(),this.Ldt.Hf(),this.ULt.Hf()}async Gn(){p.oN(mi,"Resetting the player."),this.hn(Mu.gNt,this.handleBufferingErrorEvent),this.rOt=-1,this.bOt.i_(),this.bOt=new Z_,this.OS.i_(),this.OS=new Z_,this.Q4.i_(),this.Q4=new Z_,this.djt.i_(),this.djt=new Z_;const t=[this.Mdt,this.sAt,this.F4,this.gOt].filter(oe);await Promise.all(t.map((t=>t.catch(h)))),this.Mdt=void 0,this.sAt=void 0,this.F4=void 0,this.gOt=void 0,this.sOt=void 0,this.nOt=void 0,this.oOt=void 0,this.POt=void 0,this.vOt=void 0,this.AOt=void 0,this.UOt=void 0,this.ljt=[],this.COt(void 0),this._jt(),await this.gjt(),this.NOt&&(this.NOt.Hf(),this.NOt=void 0),this.XCt&&(this.XCt.Hf(),this.XCt=void 0),this.WOt&&(this.WOt.Hf(),this.WOt=void 0),this.e$=void 0,this.s$=void 0,this.uP=void 0,this.mCt&&(this.mCt.Hf(),this.mCt=void 0),this.Llt&&(this.Llt.Hf(),this.Llt=void 0),this.SOt&&(this.Tl.qz(this.SOt.rt),this.SOt=void 0),await this.NP.Gn(),await this.pdt.Gn(),await this.WCt.Gn(),this.eP.DP(),await this.eP.Gn(),this._Lt=void 0,this.uc=void 0,this.dOt=!1,this.a$=re.ZB(),this.uOt=void 0,this.Edt=void 0,this.lOt=void 0,this.Ilt=!1,le.r_(this.fOt),this.rlt=!1,this.Zjt=!1,this.Kct=0,this.Xjt.Gn(),this.Kjt(),this.jo(new Fo(this.I_,this.og))}Kjt(){for(const t of this.qv.Nw)t.ln();for(const t of this.Zv.Nw)t.ln();for(const t of this.Tl.Nw)t.ln();this.qv.Gn(),this.Zv.Gn(),this.Tl.Gn(),this.ZOt.clear()}Jjt(){this.Xjt.dn(yX,this.Ds),this.Xjt.dn(Dt._v,this.jP),this.Xjt.dn(Dt.fv,this.$jt),this.Xjt.dn(Dt.rv,this.tzt),this.hR.dn("PW",this._Mt),this.hR.dn("QW",this.gMt),this.eP.dn(MX,this.Ds),this.eP.dn(t.AA,this.handleContentProtectionErrorEvent),this.eP.dn(t.yA,this.izt),this.eP.dn(t.NA,this._h),this.eP.dn(t.bh,this.ezt),this.eP.dn(t.wh,this.szt),this.eP.dn(t.BA,this.nzt),this.eP.dn(Dt._w,this.AO),this.eP.dn(t.XA,this.a1),this.eP.dn(t.YA,this.Ge),this.eP.dn(t.FA,this.CP),this.eP.dn(t.ZA,this.rzt)}qjt(){this.Xjt.hn(yX,this.Ds),this.Xjt.hn(Dt._v,this.jP),this.Xjt.hn(Dt.fv,this.$jt),this.Xjt.hn(Dt.rv,this.tzt),this.hR.hn("PW",this._Mt),this.hR.hn("QW",this.gMt),this.eP.hn(MX,this.Ds),this.eP.hn(t.AA,this.handleContentProtectionErrorEvent),this.eP.hn(t.yA,this.izt),this.eP.hn(t.NA,this._h),this.eP.hn(t.bh,this.ezt),this.eP.hn(t.wh,this.szt),this.eP.hn(t.BA,this.nzt),this.eP.hn(Dt._w,this.AO),this.eP.hn(t.XA,this.a1),this.eP.hn(t.YA,this.Ge),this.eP.hn(t.FA,this.CP),this.eP.hn(t.ZA,this.rzt)}constructor(t,i,e,s,n,r,o){super(),this.hR=e,this.ULt=s,this.EOt=n,this.ZOt=Kn(),this.yOt=!0,this.pOt=!0,this.dOt=!1,this.OS=new Z_,this.uc=void 0,this._Lt=void 0,this.uP=void 0,this.sAt=void 0,this.Mdt=void 0,this.bOt=new Z_,this.Llt=void 0,this.vOt=void 0,this.AOt=void 0,this.UOt=void 0,this.KCt=void 0,this.sOt=void 0,this.nOt=void 0,this.oOt=void 0,this.POt=void 0,this.ljt=[],this.e$=void 0,this.s$=void 0,this.NOt=void 0,this.XCt=void 0,this.WOt=void 0,this.mCt=void 0,this.djt=new Z_,this.gOt=void 0,this.Q4=new Z_,this.F4=void 0,this.rOt=-1,this.Bjt=void 0,this.Qjt=void 0,this.Gjt=void 0,this.Pjt=void 0,this.Ujt=void 0,this.Yjt=void 0,this._ot=!0,this.KOt=0,this.YOt=!1,this.aP=Sl.uB,this.rP=void 0,this.hP=void 0,this.a$=re.ZB(),this.hzt=[],this.uOt=void 0,this.cOt=!1,this.Ilt=!1,this.Edt=void 0,this.lOt=void 0,this.fOt=0,this.rlt=!1,this.Zjt=!1,this.ejt=void 0,this.ozt=void 0,this.lP=new hu,this.Kct=0,this.handleContentProtectionErrorEvent=t=>{this.rP=Yn(t.errorObject),this.hP=t.errorObject,this.Ds(t)},this.handleBufferingErrorEvent=t=>{this.HP(new Ri(ue.MEDIA_LOAD_ERROR,t.dt.message,t.dt))},this.izt=()=>{this.HEt();const t=this.lt;t!==this.Edt&&(this.Edt=t,this.jo(new jn(this.Edt)))},this._h=()=>{this.L_&&this.jo(new Ki(this.I_))},this.ezt=()=>{this.jo(new bs(this.I_))},this.szt=()=>{this._ct(),this.jo(new ih(this.I_))},this.jP=()=>{void 0!==this.ozt&&le.r_(this.ozt),this.jo(new Kr(this.I_))},this.nzt=()=>{this.jo(new vi(this.I_))},this.AO=()=>{this.jo(new Z(this.I_,this.og))},this.a1=()=>{const t=this.PNt;ph(this.hzt,t)||(this.jo(new Nq),this.hzt=t),this.jo(new bl(this.I_,this.M_))},this.Tjt=Xi((t=>{t.TS===Zt.Yv&&this.qCt()&&Mo(this.ZCt())}),200),this.Njt=t=>{var i;this.Kct+=t.Dkt,"wrt"===t.Nkt&&t.TS===Zt.Yv&&Mo(this.$Ot()),this.jo(new AY(function(t){if(t){if(void 0!==t.Frt){var i,e;const s=t.Frt.yn+(null!=(e=t.Frt.L)?e:0);return{Iu:t.zy,net:[null==(i=t.Frt)?void 0:i.yn,s],NS:!0}}return{Iu:t.zy.toString()||"",NS:!0}}return{Iu:"",NS:!0}}(t.uri),(null==(i=this.ONt)?void 0:i.jz)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.TS,t.httpStatusCode,t.Dkt))},this.Ge=()=>{this.jo(new gt(this.I_))},this.CP=()=>{this.jo(new ke(this.I_))},this.rzt=()=>{this.jo(new ge(this.I_,this.Mg))},this.$jt=()=>{this.eP.fg?this.jo(new tc(this.I_)):(null!=this.ozt||(this.ozt=le.h_((()=>{this.Zjt&&(this.ejt=void 0,Mo(this.$Ct()))}),2500)),this._ct(),this.jo(new tc(this.I_)))},this.tzt=()=>{this.Zjt=!0,this.jo(new E(this.I_,this.og))},this.wOt=t=>{Er(t)||kt(t)||Um(t)||(this._jt(),Mo(this.gjt()),this.jo(new GV(t)))},this.fLt=()=>{this.HEt()},this.IOt=t=>{Mo(this.cjt(t.CNt))},this.yct=t=>{if(Er(t))return;const i=t instanceof Ri?t:new Ri(ue.MEDIA_DECODE_ERROR,t.message,t);this.HP(i)},this.onTextTrackChange=t=>{if(!this.KCt)return;const i=t.Ht,e=xe(this.KCt.LSt,(t=>i===this.ZOt.get(t.Bw)));e&&(i.Xw===Da.Zw||i.Xw===Da.zn?(Mo(this.ujt(e)),this.ZOt.forEach((t=>{t!==i&&(t.Xw=Da.yh)}))):this.oOt&&this.oOt===e&&Mo(this.DOt(this.sOt,this.nOt,void 0)))},this.retryOfflineRenditionsCallback=async(t,i)=>{this.hOt!==t&&this.WNt!==t&&this.HNt!==t||(await this.Llt.$bt(t,i),t.ANt.jEt=-1/0)},this._Mt=()=>{this.lMt()},this.gMt=()=>{this.dMt()},this.Djt=t=>{const i=this.KCt;if(!(null==i?void 0:i.DSt)&&(this.Llt.lLt(t.Tet,t.CNt.ANt),this.OOt._Dt(),i)){const t=void 0!==this.sOt&&!ks(i.cDt,this.sOt),e=void 0!==this.nOt&&!ks(i.lDt,this.nOt);(t||e)&&this.DOt(t?void 0:this.sOt,e?void 0:this.nOt,this.oOt).catch(h)}},this.Ijt=t=>{this.OOt.ADt(t.CNt,t.Eet)},this.Sjt=t=>{this.OOt.mDt(t.CNt,t.Wxt.vp())},this.Ejt=t=>{this.Llt.uLt(t.CNt)},this.Eut=new jF(r),this.eP=t,this.LS=i,this.fP=new YV(this.hR.SW),this.njt=new WV(this.eP),this.tjt=new eH(this.hR),this.Tut=o.retryConfiguration,this.qv=new ls,this.Zv=new ls,this.OOt=new CV(this,this.qv,this.Zv),this.XOt=new Or,this.NP=new Ma(this.eP,this.LS),this.pdt=new CF(this.eP),this.WCt=new gW(this.eP),this.Tl=new Fe([this.XOt,this.NP.tt,this.pdt.tt,this.WCt.tt]),this.mP=new sI(this.LS),this.eP.bP=this.mP,this.Ldt=new IX(this,this.eP),this.Xjt=new uu(this.Ldt,!0),this.Jjt()}},DX=class{async XP(t,i){if(!ow(t.type))return!1;if(t.useNativePlayback)return!1;const e=t.contentProtection;if(e&&!EN(e)){if(!Be(e))return!1;if(!await this.Ktt(e))return!1}return!0}async Ktt(t){return!!t.aes128||(!(!t.playready||!await le.Zx())||(!(!t.widevine||!await le.Hx())||(!(!t.clearkey||!await le.Xx())||!t.fairplay&&await le.eC())))}},IX=class extends iN{get og(){return this.Qo.og}Cdt(){this.jo(new Z(this.I_,this.og))}constructor(t,i){super(i),this.Qo=t}};function SX(t){const i=xe(t,(t=>t.vNt)),e=t.filter((t=>t.mNt)),s=le.T7,n=e.map((t=>t.ys)).filter(oe),r=uX(n,s);return r?xe(e,(t=>t.ys===r)):i}function EX(t,i){for(const e of i){const i=t.filter((t=>t.Tet&&t.Tet.ZNt&&rk(t.Tet.ZNt,e)));if(0!==i.length)return i}}function bX(t){var i;return null!=(i=SX(t))?i:t[0]}function LX(t,i){const e=i+TX;return t.filter((t=>t.lDt.some((t=>t.ANt.jEt<le.n_()-e))||0===t.lDt.length))}function kX(t,i){if(!i||i.ANt.wSt)return!1;const e=i.ANt.vit;return 0!==e.length&&e[0].Fm>t}r(),r();var xX=class{async BLt(t,i,e){try{const s=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:e},s,t);return new A(n)}catch(t){throw new Ri(ue.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}Hf(){}static hC(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}};r(),r(),r(),r();var Tr=class extends d{constructor(t,i){super(t),this.data=i}},CX=["message","messageerror","error"];r();var OX=class extends d{constructor(t){super(be.ha),this.error=t}},jX=class extends i{get azt(){return this.uzt.$f.Gf}czt(t,i){this.azt||(void 0!==this.lzt?this.lzt.czt(t,i):this.dzt.push({Yb:t,fzt:i}))}_zt(){this.azt||(this.uzt.i_(),sr(this.dzt),void 0!==this.lzt&&this.lzt._zt())}constructor(t){super(),this.lzt=void 0,this.dzt=[],this.gzt=t=>{if(this.azt)t._zt();else{this.lzt=t,this.lzt.dn(CX,this.Ds);for(const i of this.dzt)t.czt(i.Yb,i.fzt);sr(this.dzt)}},this.wzt=t=>{if(this.azt)return;const i=t instanceof k?t:new k("Could not create Worker.");this.jo(new OX(i)),this._zt()},this.uzt=new Z_,t(this.uzt.$f).then(this.gzt,this.wzt)}};r(),r();var zX=class extends i{czt(t,i){i?this.lzt.postMessage(t,i):this.lzt.postMessage(t)}_zt(){this.Uo(),this.lzt.removeEventListener("message",this.Azt),this.lzt.removeEventListener("messageerror",this.vzt),this.lzt.removeEventListener("error",this.G2),this.lzt.terminate()}constructor(t){super(),this.Azt=t=>{this.jo(new Tr("message",t.data))},this.vzt=t=>{this.jo(new Tr("messageerror",t.data))},this.G2=t=>{null==t.preventDefault||t.preventDefault();const i=t.error instanceof k?t.error:new k(t.message);this.jo(new OX(i)),this._zt()},this.lzt=new id(t),this.lzt.addEventListener("message",this.Azt),this.lzt.addEventListener("messageerror",this.vzt),this.lzt.addEventListener("error",this.G2)}};r();var PX=0,BX=class extends i{czt(t,i){i?this.mzt.contentWindow.postMessage({type:"message",data:t},"*",i):this.mzt.contentWindow.postMessage({type:"message",data:t},"*")}_zt(){var t;this.mzt.removeEventListener("load",this.pzt),self.removeEventListener("message",this.yzt),null==(t=this.mzt.contentWindow)||t.postMessage({type:"terminate"},"*"),rs(this.mzt)}constructor(t,i){super(),this.pzt=()=>{this.mzt.removeEventListener("load",this.pzt),this.mzt.contentWindow.postMessage({type:"initialize",id:this.ym,script:this.Mzt},"*")},this.yzt=t=>{t.origin===this.Tzt&&t.data.id===this.ym&&("initialized"===t.data.type||("error"===t.data.type?(this.jo(new OX(new k(t.data.data.message))),this._zt()):this.jo(new Tr("message",t.data.data))))},this.ym=PX++,this.Mzt=t;const e=le.Ph("iframe.html",i);this.mzt=function(t){const i=c.createElement("iframe");return i.width="0",i.height="0",i.style.display="none",i.src=t,c.body.appendChild(i),i}(e.href),this.Tzt=e.origin,this.mzt.addEventListener("load",this.pzt),self.addEventListener("message",this.yzt)}};function RX(t,i){const e=le.Sv(t,i);return new jX((t=>async function(t,i,e){let s;try{return s=new zX(t),await YX(s,e),s}catch(t){null==s||s._zt(),Et(t)}if(FX&&fr){let i;try{const s=await le.yO.BI({Iu:t,mS:Vt.GET,pS:$m.Au,$f:e});i=await s.kS(e)}catch(t){Et(t)}if(i){let t;try{const n=fr([i],{type:"application/javascript"});return t=URL.createObjectURL(n),s=new zX(t),await YX(s,e),s}catch(t){null==s||s._zt(),Et(t),FX=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return s=new BX(t,i),await YX(s,e),s}catch(t){throw null==s||s._zt(),t}}(e,i,t)))}var UX,QX,FX=!0;async function YX(t,i){const e=await t.w_(["message","error"],i);if("error"===e.type)throw function(t){return new Ri(ue.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(e.error);if(!function(t){return rt(t)&&"6.5.0"===t.Nzt}(e.data))throw new Ri(ue.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (6.5.0).");return e}r(),function(t){t.Dzt="BLt",t.Izt="ukt"}(UX||(UX={})),function(t){t.Szt="Ezt",t.bzt="Lzt"}(QX||(QX={}));var GX=class{kzt(){const t=RX(this.xzt,this.Czt);return t.dn("message",this.Ozt),t.dn("error",this.Y7),t}BLt(t,i,e){const s=""+ ++this.jzt,n={zzt:UX.Dzt,Pzt:s,Bzt:t,Rzt:i,Uzt:e},r=new $s;return this.Qzt.set(s,r),null!=this.lzt||(this.lzt=this.kzt()),this.lzt.czt(n),r.sL}Hf(t){void 0===t&&(t=new Eu),this.Qzt.forEach((i=>i.eL(t))),this.Qzt.clear(),this.lzt&&(this.lzt._zt(),this.lzt=void 0)}constructor(t){this.lzt=void 0,this.jzt=0,this.Qzt=Mt(),this.Ozt=t=>{const i=t.data,e=i.Fzt,s=this.Qzt.get(e);s&&(this.Qzt.delete(e),i.Yzt===QX.Szt?s.iL(i.Gzt):i.Yzt===QX.bzt&&s.eL(new Ri(ue.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")))},this.Y7=t=>{const i=new Ri(ue.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.Hf(i)},this.Czt=t;try{this.xzt=le.Sv("theoplayer.d.js",t)}catch(t){throw new Ri(ue.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function WX(t){return xX.hC()?new xX:new GX(t)}function VX(t){const i=xe(t.boxes,wL);if(!i)return;const e=xe(i.boxes,AL);return e?e.handlerType:void 0}function HX(t){const i=new ZM;return i.boxes.push(...t.boxes),i}function qX(t){const i=new cu;return i.boxes.push(...t.boxes),i}r(),r(),r(),r();var XX=8;function ZX(t,i){const e=function(t){const i=new xs;return i.boxes.push(...t.boxes),i}(t),s=JX(i);for(let t=0;t<e.boxes.length;t++){const n=e.boxes[t];if(n===i)e.boxes[t]=new Wy(new A(i.getSize()-XX));else if(vL(n)){const i=n,r=qt(i.boxes,(t=>t instanceof Ua&&t.trackId===s));if(r>=0){const s=i.boxes[r],n=qX(i);n.boxes[r]=new Wy(new A(s.getSize()-XX)),e.boxes[t]=n}}}return e}function KX(t,i){const e=function(t){const i=new OM;return i.boxes.push(...t.boxes),i}(t);for(let t=0;t<e.boxes.length;t++){const s=e.boxes[t];if(yL(s)){const n=xe(s.boxes,ML);n&&n.trackId===i&&(e.boxes[t]=new Wy(new A(s.getSize()-XX)))}}return e}function JX(t){return xe(t.boxes,gL).trackId}function $X(t,i,e,s){const n=xe(t.boxes,ML),r=e.Ny(i).Vp();let h=Gt.ZERO;for(const i of t.boxes){if(i instanceof eu){h=wA(i.baseMediaDecodeTime,r),i.baseMediaDecodeTime=i.baseMediaDecodeTime.subtract(h);break}if(i instanceof EM){h=wA(Gt.fromNumber(i.baseMediaDecodeTime),r),i.baseMediaDecodeTime-=h.toNumber();break}}if(h.isZero())return;const o=xe(t.boxes,TL);if(void 0!==o&&o.samples.length>0){const t=o.samples;if(!o.flags.sampleDurationPresent){o.flags.sampleDurationPresent=!0;const i=null!=s?s:n.defaultSampleDuration;for(const e of t)e.duration=i}t[0].duration+=h.toNumber(),o.samples=t}}r();var tZ="Mp4Transmuxer",iZ=class extends Zq{sCt(t,i){Pi(i);const e=t.CNt,s=K(mo(t.lSt.JM.JM));if(!s)throw new k("Mp4Transmuxer - Unable to parse "+e.$w+" MP4 initializer.");this.DK=s;const n=function(t){let i,e;for(const s of t.tt)i||(i=s.TZ),e||(e=s.MZ);if(i||e)return{ZNt:i,KNt:e,mIt:void 0};return}(s);n&&this.hCt(e,n);const r=function(t){for(const i of t.tt)if(void 0!==i.NZ)return i.NZ;return}(s);void 0!==r&&this.oCt(e,r);const h=function(t){var i;const e=eT(t),s=xe(e.boxes,fL),n=s.boxes.filter(_L),r=xe(n,(t=>VX(t)===tM.AUDIO)),h=xe(n,(t=>VX(t)===tM.VIDEO)),o={ZNt:{tN:r?JX(r):void 0},KNt:{tN:h?JX(h):void 0}},a=null==(i=xe(s.boxes,vL))?void 0:i.boxes.filter(mL);var u,c;const l=a?{ZNt:null!=(u=xe(a,(t=>t.trackId===o.ZNt.tN)))?u:void 0,KNt:null!=(c=xe(a,(t=>t.trackId===o.KNt.tN)))?c:void 0}:void 0;var d,f;if(l&&(o.ZNt.gD=null==(d=l.ZNt)?void 0:d.defaultSampleDuration,o.KNt.gD=null==(f=l.KNt)?void 0:f.defaultSampleDuration),!r||!h)return{ZNt:r?t:void 0,KNt:h?t:void 0,hI:o};const _=HX(e),g=HX(e),w=e.boxes.indexOf(s);_.boxes[w]=ZX(s,h),g.boxes[w]=ZX(s,r);const A=_.serialize().join(),v=g.serialize().join();return{ZNt:A,KNt:v,hI:o}}(t.lSt.JM.JM);if(this.Wzt=h.hI,h.KNt){const i=xe(s.tt,(t=>t.tN===h.hI.KNt.tN)),e={$w:"dCt",JM:{$w:nL._H,JM:h.KNt},aat:Zt.Yv,_St:t._St,fCt:{Tet:'video/mp4; codecs="'+i.MZ+'"',hSt:t.hSt},Fm:t.Fm,CNt:t.CNt,OLt:t.lSt.OLt};this.Ixt(e)}if(h.ZNt){const i=xe(s.tt,(t=>t.tN===h.hI.ZNt.tN)),e={$w:"dCt",JM:{$w:nL._H,JM:h.ZNt},aat:Zt.Gv,_St:t._St,fCt:{Tet:'audio/mp4; codecs="'+i.TZ+'"',hSt:t.hSt},Fm:t.Fm,CNt:t.CNt,OLt:t.lSt.OLt};this.Ixt(e)}return Promise.resolve()}async rCt(t,i){Pi(i);const e=t.wrt.OLt;p.oN(tZ,"Transmuxing fMP4: "+Qo(e.xst));const s=t.wrt.JM,n=eZ(s.JM,this.DK),r=dc(n.map((t=>t.s8)),fl);if(void 0!==r&&(e.n8=r,this.uCt(t.CNt)),!this.Tbt.ebt(t._St)){const s=So.Ey(e.Fm);if(n.length>0){const i=dc(n.map((t=>t.Vzt)),fl);for(const e of this.Zxt)this.Tbt.dbt(t._St,e,i,s,!1);this.uCt(t.CNt)}this.Tbt.ebt(t._St)||await Oi(this.Tbt.nbt(t._St),i)}const h=this.Tbt.abt(t._St),o=e.n8?this.Tbt.ubt(e.n8,e).vp():e.Fm;var a;const u={Bxt:Kq(e,o),Fm:o,lt:null!=(a=e.lt)?a:0,Zy:h.vp(),_St:t._St,CNt:t.CNt,OLt:t.wrt.OLt},c=function(t,i){if(void 0===i.ZNt.tN)return{ZNt:void 0,KNt:t};if(void 0===i.KNt.tN)return{ZNt:t,KNt:void 0};const e=eT(t),s=HX(e),n=HX(e);for(let t=0;t<e.boxes.length;t++){const r=e.boxes[t];pL(r)&&(s.boxes[t]=KX(r,i.KNt.tN),n.boxes[t]=KX(r,i.ZNt.tN))}const r=s.serialize().join(),h=n.serialize().join();return{ZNt:r,KNt:h}}(s.JM,this.Wzt);if(c.KNt){var l;const i=this.Wzt.KNt.tN,s=xe(this.DK.tt,(t=>t.tN===i)),h=xe(n,(t=>t.tN===i)),o=this.Hzt(c.KNt,s,h,null==(l=this.Wzt)?void 0:l.KNt.gD,e);this.qzt=s,this.aCt(t.CNt,e,h.s8.bp(r));const a=qr({$w:"wrt",JM:{$w:nL._H,JM:o},aat:Zt.Yv},u);this.Ixt(a)}if(c.ZNt){const t=qr({$w:"wrt",JM:{$w:nL._H,JM:c.ZNt},aat:Zt.Gv},u);this.Ixt(t)}this.Xzt=e,this.Zzt=n}Hzt(t,i,e,s,n){if(!function(t){return hq(t)?t.cSt:0===t.GSt&&t.FSt.cSt}(n))return t;if(!this.Xzt||!this.qzt||!this.Zzt)return t;const r=this.qzt.tN,h=xe(this.Zzt,(t=>t.tN===r)),o=this.Tbt.ubt(h.Kzt,this.Xzt),a=this.Tbt.ubt(e.s8,n).bp(o).Ny(i.vy);if(a.Tp(So.zp))return t;if(a.mp(So.Ey(.5)))return t;const u=hq(n)?n:n.FSt;return p.hDt(tZ,"Stretching first video frame of segment #"+u.VIt+" to fill gap of "+a.vp()+"s"),function(t,i,e,s){const n=eT(t),r=xe(n.boxes,pL);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof pe&&$X(t,i,e,s);const n=r.getSize();if(n!==t){const i=n-t;for(const t of r.boxes)t instanceof pe&&NL(t,i)}}return n.serialize().join()}(t,i.vy,a,s)}constructor(...t){super(...t),this.DK=void 0,this.Wzt=void 0,this.Xzt=void 0,this.Zzt=void 0,this.qzt=void 0}};function eZ(t,i){const e=em(Rs.ST(mo(t)),At.xM);if(!e)throw new k("Mp4Transmuxer - Unable to parse segment or part.");return function(t,i){const e=[];for(const n of t.tt){if(!n.ED||0===n.SD.length||0===n.SD[0].OD.length)continue;const t=n.pT.tN,r=xe(i.tt,(i=>i.tN===t));let h=0,o=1/0,a=0;const u=n.pT.gD||0;for(const t of n.SD)for(const i of t.OD){const t=i.jD||0,e=h+t;var s;h+=null!=(s=i.lt)?s:u;const n=h+t;e<o&&(o=e),n>a&&(a=n)}const c=So.Cp(n.ED.ED,r.vy);e.push({tN:t,Vzt:c,s8:c.gm(So.Op(o,r.vy)),Jzt:c.gm(So.Op(h,r.vy)),Kzt:c.gm(So.Op(a,r.vy))})}return e}(e,i)}var sZ,nZ="MpegtsTransmuxer",rZ=class extends iZ{sCt(t,i){return super.sCt(t,i)}tCt(t,i){if(super.tCt(t,i),this.ott.$zt())return;var e;const s=null!=(e=null==i?void 0:i.xst)?e:t.xst;if(!s)return;/\.(ts|aac|mp3)/i.test(s.zy)&&this.ott.tPt()}iPt(t){let i;return this.ePt.has(t._St)?i=this.ePt.get(t._St):(i=AX(t.wrt.JM.JM),this.ePt.set(t._St,i)),i}async rCt(t,i){Pi(i);const e=this.iPt(t),s=t.wrt;if(e!==lX.FCt&&e!==lX.YCt)return super.rCt(t,i);if(s.OLt.hSt.some(oZ))throw new Ri(ue.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.ott.tPt();let r;e===lX.FCt?(p.oN(nZ,"Transmuxing MPEG-TS: "+Qo(s.OLt.xst)),r=await n.sPt({data:s.JM.JM,metadata:this.nPt})):(p.oN(nZ,"Transmuxing raw audio: "+Qo(s.OLt.xst)),r=await n.rPt({data:s.JM.JM,metadata:this.nPt})),Pi(i),this.hCt(t.CNt,{ZNt:r.metadata.audio_codec,KNt:r.metadata.video_codec,mIt:void 0}),r.metadata.video_frame_rate&&this.oCt(t.CNt,r.metadata.video_frame_rate);const h=aZ(r.metadata.first_decode_timestamp),o=aZ(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?aZ(r.metadata.first_video_presentation_timestamp):void 0;if(s.OLt.n8=o,this.uCt(t.CNt),void 0!==a&&this.aCt(t.CNt,s.OLt,function(t,i){let e=t.bp(i);return e.Dp(So.zp)&&(e=e.gm(In())),e}(a,o)),!this.Tbt.ebt(t._St)){const e=So.Ey(s.OLt.Fm);for(const i of this.Zxt)this.Tbt.dbt(t._St,i,h,e,!0);this.uCt(t.CNt),this.Tbt.ebt(t._St)||await Oi(this.Tbt.nbt(t._St),i)}const u=this.Tbt.lbt(h,s.OLt);this.nPt=r.metadata;const c=this.Tbt.ubt(o,s.OLt).vp();var l;const d={Bxt:Kq(s.OLt,c),Fm:c,lt:null!=(l=s.OLt.lt)?l:0,Zy:u.vp(),_St:t._St,CNt:t.CNt,OLt:s.OLt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.Zxt){const i=qr({$w:"wrt",JM:void 0,aat:t},d);this.Ixt(i)}return}const f=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.hPt||this.oPt!==t._St||!ds(this.hPt,r.data.audio_init))){const i=this.Tbt.ubt(s.OLt.n8,s.OLt).vp(),e={$w:"dCt",JM:{$w:nL._H,JM:r.data.audio_init},aat:Zt.Gv,_St:t._St,fCt:{Tet:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',hSt:s.OLt.hSt},Fm:i,CNt:t.CNt,OLt:s.OLt};this.hPt=r.data.audio_init,this.oPt=t._St,this.Ixt(e)}const i=qr({$w:"wrt",JM:{$w:nL._H,JM:r.data.audio_media},aat:Zt.Gv},d);this.Ixt(i)}else if(t.wrt.OLt.USt&&ks(this.Zxt,Zt.Gv)){const t=qr({$w:"wrt",JM:void 0,aat:Zt.Gv},d);this.Ixt(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.aPt||this.uPt!==t._St||!ds(this.aPt,r.data.video_init))){const i=this.Tbt.ubt(s.OLt.n8,s.OLt).vp(),e={$w:"dCt",JM:{$w:nL._H,JM:r.data.video_init},aat:Zt.Yv,_St:t._St,fCt:{Tet:'video/mp4; codecs="'+r.metadata.video_codec+'"',hSt:s.OLt.hSt},Fm:i,CNt:t.CNt,OLt:s.OLt};this.aPt=r.data.video_init,this.uPt=t._St,this.cPt=K(mo(r.data.video_init)),this.Ixt(e)}const i=this.cPt.tt[0],e=eZ(r.data.video_media,this.cPt)[0],n=this.Hzt(r.data.video_media,i,e,void 0,s.OLt);this.qzt=i;const h=qr({$w:"wrt",JM:{$w:nL._H,JM:n},aat:Zt.Yv},d);this.Ixt(h),f.push(e)}else if(t.wrt.OLt.USt&&ks(this.Zxt,Zt.Yv)){const t=qr({$w:"wrt",JM:void 0,aat:Zt.Yv},d);this.Ixt(t)}this.Xzt=s.OLt,this.Zzt=f}i_(){this.hPt=void 0,this.aPt=void 0,super.i_()}constructor(t,i,e,s){super(i,e,s),this.nPt=void 0,this.hPt=void 0,this.aPt=void 0,this.cPt=void 0,this.oPt=0,this.uPt=0,this.ePt=Kn(),this.ott=t}},hZ=class{zut(t,i,e){return new rZ(this,t,i,e)}};function oZ(t){return t.mS===$o.yIt}function aZ(t){return So.Cp(Gt.fromBits(t.low,t.high),t.base)}r(),r(),function(t){t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4"}(sZ||(sZ={}));var uZ=class{sPt(t){return this.lPt(sZ.MPEGTS_TO_FMP4,t)}rPt(t){return this.lPt(sZ.RAW_AUDIO_TO_FMP4,t)}kzt(){const t=RX(this.xzt,this.Czt);return t.dn("message",this.Ozt),t.dn("error",this.Y7),t}lPt(t,i){const e=++this.jzt,s={type:t,id:e,input:i},n=new $s;return this.Qzt.set(e,n),this.lzt.czt(s),n.sL}Hf(t){void 0===t&&(t=new Eu),this.Qzt.forEach((i=>i.eL(t))),this.Qzt.clear(),this.lzt._zt()}constructor(t){this.jzt=0,this.Qzt=Kn(),this.Ozt=t=>{const i=t.data;if(void 0!==i.requestId){const t=this.Qzt.get(i.requestId);if(!t)return;this.Qzt.delete(i.requestId),i.success?t.iL(i.output):t.eL(new Ri(i.errorCode,i.error))}else i.success||this.Hf(new Ri(i.errorCode,i.error))},this.Y7=t=>{const i=new Ri(ue.MEDIA_DECODE_ERROR,t.error.message,t.error);this.Hf(i)},this.Czt=t,this.dPt=function(){if("undefined"==typeof WebAssembly)return!1;const t=li.TE;return!(t>0&&t<=56)}();const i=this.dPt?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.xzt=le.Sv(i,t)}catch(t){throw new Ri(ue.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.lzt=this.kzt()}},cZ=class extends hZ{$zt(){return void 0!==this.lzt}tPt(){var t;return null!=(t=this.lzt)?t:this.lzt=new uZ(this.fPt)}Hf(){this.lzt&&(this.lzt.Hf(),this.lzt=void 0)}constructor(t){super(),this.fPt=t,this.lzt=void 0}},lZ=class{h8(){return new cZ(this.fPt)}constructor(t){this.fPt=t}},dZ=class extends NX{Cg(){if(CR(this.eP))return this.eP.Cg()}get Sg(){return!1}set Sg(t){}},fZ=class extends dZ{async ln(){await super.ln(),await this.kP.LP(this.eP)}constructor(t,i,e,s,n,r,h){const o=new ic(t);super(o.qP(Zt.Yv),i,e,s,n,r,h),this.kP=o}},_Z=class extends DX{async XP(t,i){return!!gk(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(li.Ra||li.Mb))&&(!i.manifestMetadataTrack&&super.XP(t,i)))}async Ktt(t){return(!t.clearkey||!li.ZE)&&super.Ktt(t)}};La(new class extends _Z{ij(t,i,e,s,n,r){return new fZ(i,e,n,WX(s.libraryLocation),new lZ(s.libraryLocation),new V(Re.Lb.mit,Re.Lb.Ait,Re.Lb.vit,Re.Lb.yit),s)}ZP(){return!0}constructor(...t){super(...t),this.KP=Rt.Lv}}),p.Ot=()=>Boolean(null==s?void 0:s.THEOplayerDebugLogsEnabled),r(),r(),r(),r();var gZ=class{iit(t,i){return Promise.resolve(!1)}sit(t,i){return Promise.resolve(void 0)}Jtt(t){return Promise.resolve(void 0)}RV(t){return Promise.resolve(void 0)}},wZ=class extends i{_Pt(){var t;return null==(t=this.gPt)?void 0:t.ANt}yn(t){Mo(Sa((()=>this.wPt(t)),t))}async wPt(t){await this.Llt.Wbt(t),this.APt&&(this.vPt(this.APt.Ti,this.APt.Mi),this.APt=void 0),this.M1=!0}mPt(t,i){this.M1?this.vPt(t,i):this.APt={Ti:t,Mi:i}}vPt(t,i){const e=this.pPt(t,i),s=null==e?void 0:e.lDt[0];s!==this.gPt&&(this.yPt(),void 0!==s&&(this.gPt=s,this.MPt=new Cr(this.Llt,s),this.MPt.XLt()))}yPt(){this.gPt=void 0,this.MPt&&(this.MPt.Hf(),this.MPt=void 0)}pPt(t,i){const e=xe(this.Llt.wr.uDt,(e=>void 0!==e.tDt&&e.tDt.Ti===t&&e.tDt.Mi===i));return null!=e?e:this.Llt.wr.uDt[0]}ln(){this.Uo(),this.yPt(),this.Llt.Hf()}constructor(i,e,s){super(),this.gPt=void 0,this.MPt=void 0,this.APt=void 0,this.TPt=()=>{this.jo(new Ch)},this.uc=i,this.Llt=new vq(s,new gZ,i.useCredentials,i.src),this.Llt.dn(t.OA,this.Ds),this.M1=!1}};r();var AZ,vZ=class extends ${get ot(){return this.r4.ot}get p_(){return this.r4.p_}get M_(){return this.r4.M_}set M_(t){this.r4.M_=t}get I_(){return this.r4.I_}set I_(t){this.r4.I_=t}get lt(){return this.r4.lt}get L_(){return this.r4.L_}get C_(){return this.r4.C_}get j_(){return this.r4.j_}get dt(){return this.r4.dt}get P_(){return this.r4.P_}get R_(){return this.r4.R_}get Q_(){return this.r4.Q_}set Q_(t){this.r4.Q_=t}get G_(){return this.r4.G_}get V_(){return this.r4.V_}get q_(){return this.r4.q_}set q_(t){this.r4.q_=t}get K_(){return this.r4.K_}get eg(){return this.r4.eg}set eg(t){this.r4.eg=t}get og(){return this.r4.og}get cg(){return this.r4.cg}get fg(){return this.r4.fg}get cP(){return this.r4.cP}get rt(){return this.r4.rt}get wg(){return this.r4.wg}get ht(){return this.r4.ht}get pg(){return this.r4.pg}get Mg(){return this.r4.Mg}set Mg(t){this.r4.Mg=t}get Dg(){return this.r4.Dg}get Sg(){return this.r4.Sg}set Sg(t){this.r4.Sg=t}get dP(){return this.r4.dP}Ug(){return this.r4.Ug()}xg(){return this.r4.xg()}Cg(){return this.r4.Cg()}we(){return this.r4.we()}Yg(){return this.r4.Yg()}Gg(){return this.r4.Gg()}Pg(){return this.r4.Pg()}Bg(){return this.r4.Bg()}Gn(){return this.r4.Gn()}Zh(t,i,e){return this.r4.Zh(t,i,e)}ye(){return this.r4.ye()}Qg(){return this.r4.Qg()}Fg(){return this.r4.Fg()}ln(){this.Uo();for(const t of wI)this.r4.hn(t,this.Ds);return this.r4.ln()}constructor(t){super(),this.r4=t;for(const t of wI)this.r4.dn(t,this.Ds)}},mZ=class extends vZ{async Zh(t,i,e){await super.Zh(t,i,e),t.hlsDateRange&&this.Est(t,i,e)}Est(i,e,s){this.NPt=new wZ(i,e,this.DPt),this.NPt.dn(t.OA,this.handleManifestUpdate),this.NPt.yn(s)}Gn(){return this.dLt&&(this.rt.st(this.dLt),this.s2.st(this.dLt),this.dLt.ln(),this.dLt=void 0,this.IPt=!1),this.NPt&&(this.NPt.ln(),this.NPt=void 0),this.s2.Gn(),super.Gn()}ln(){return this.hn(t.QA,this.SPt),this.NPt&&(this.NPt.ln(),this.NPt=void 0),this.s2.ln(),super.ln()}constructor(i,e,s){super(i),this.NPt=void 0,this.IPt=!1,this.dLt=void 0,this.handleManifestUpdate=()=>{const t=this.NPt._Pt();if(t){const i=this.cP;if(i){const e=i.getTime();let s=this.dLt;s||(s=new qH,this.dLt=s),s.Hn(t.gSt,(t=>(t.getTime()-e)/1e3)),!this.IPt&&s.H.L>0&&(this.rt.it(s),this.s2.it(s),this.IPt=!0)}}},this.SPt=()=>{this.NPt&&this.NPt.mPt(this.pg,this.wg)},this.DPt=e,this.PV=s,this.s2=new Px(this),this.dn(t.QA,this.SPt)}};!function(t){Rn.JP().$P(t)}((function(t,i,e){return new mZ(t,i,e)})),r(),r(),r(),(AZ||(AZ={})).EPt="statechange";var pZ=class extends d{constructor(t){super("statechange"),this.q3=t}};r(),r();var Bo,Fh=class extends Ga{get name(){return"CastError"}constructor(t,i=""){super("An error occurred while casting."),this.errorCode=t,this.description=i}},yZ=class{bPt(){return this.LPt||(this.LPt=this.kPt().catch((()=>{throw new Fh("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}))),this.LPt}async kPt(){TZ()||await this.xPt(),MZ()||(le.Wv('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await function(t){return new Promise(((i,e)=>{const s=c.createElement("script");s.onload=()=>i(),s.onerror=t=>e((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(c.head||c.documentElement).appendChild(s)}))}("//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js"))}xPt(){return new Promise(((t,i)=>{const e=s.__onGCastApiAvailable;s.__onGCastApiAvailable=(n,r)=>{n?t():i(new k(r)),s.__onGCastApiAvailable=e,e&&e(n,r)}}))}constructor(){this.LPt=void 0}};function MZ(){return Boolean("undefined"!=typeof cast&&cast.framework)}function TZ(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}yZ.Lb=new yZ,r(),r(),r(),r(),function(t){t.CPt="receiver_info",t.qIt="event",t.OPt="propertychange",t.jPt="trackevent"}(Bo||(Bo={})),r();var NZ,fi,Br="urn:x-cast:com.theoplayer.cast",DZ=class{zPt(t){let i;try{i=JSON.parse(t)}catch(t){0}return i}PPt(t){this.BPt.push(t)}RPt(t){Hc(this.BPt,t)}dn(t){this.a_.push(t)}hn(t){Hc(this.a_,t)}UPt(t){this.QPt=t}FPt(t){this.QPt=void 0}V6(t,i,e,s){const n=e||h,r=s||h;this.YPt.V6(t,i).then(n).catch(r)}ln(){this.YPt.GPt(Br,this.WPt),sr(this.a_),sr(this.BPt),this.QPt=void 0}constructor(t){this.BPt=[],this.a_=[],this.WPt=(t,i)=>{let e=this.zPt(i);if(e)if(e.type===Bo.OPt)for(let t of this.BPt)for(let i in e.properties)t(i,e.properties[i]);else if(e.type===Bo.qIt)for(let t of this.a_)t(e.event);else e.type===Bo.jPt&&this.QPt&&e.event.trackState&&this.QPt(e.event.trackId,e.event.trackState.targetQualityIds)},this.YPt=t,this.YPt.VPt(Br,this.WPt)}};r(),r(),function(t){t.CPt="theoplayer_receiver_info",t.jPt="theoplayer_trackpropertychange",t.HPt="theoplayer_propertychange"}(NZ||(NZ={})),r(),function(t){t.qPt="medialoadedchange",t.ZA="volumechange",t.XPt="casterror",t.ZPt="playererror",t.KPt="targetqualitychanged",t.JPt="receiverinfochanged"}(fi||(fi={}));var ea,IZ=class extends d{constructor(){super("medialoadedchange")}},SZ=class extends d{constructor(t,i){super("volumechange"),this.Mg=t,this.Q_=i}},EZ=class extends d{constructor(t){super("casterror"),this.dt=t}},bZ=class extends d{constructor(t){super("playererror"),this.dt=t}},LZ=class extends d{constructor(t,i){super("targetqualitychanged"),this.tN=t,this.$Pt=i}},kZ=class extends d{constructor(){super("receiverinfochanged")}},xZ=class extends i{tBt(t,i,e){this.iBt.V6(Br,function(t,i,e){return{type:NZ.jPt,trackID:t,trackType:i,properties:{targetQuality:e}}}(t,i,e),h,this.eBt)}sBt(){this.YPt.VPt(Br,this.nBt),this.iBt.V6(Br,{type:NZ.CPt})}rBt(){return this.hBt}ln(){this.Uo(),this.YPt.GPt(Br,this.nBt),this.iBt.RPt(this.oBt),this.iBt.FPt(this.aBt),this.iBt.ln(),this.YPt.ln()}constructor(t){super(),this.hBt=void 0,this.eBt=t=>{this.jo(new EZ(t))},this.oBt=(t,i)=>{"error"===t&&this.jo(new bZ(i))},this.aBt=(t,i)=>{this.jo(new LZ(t,i))},this.nBt=(t,i)=>{const e=JSON.parse(i);e.type===Bo.CPt&&(this.hBt=e.info,this.jo(new kZ))},this.YPt=t,this.iBt=new DZ(this.YPt),this.iBt.PPt(this.oBt),this.iBt.UPt(this.aBt),this.sBt()}};r(),r(),r(),function(t){t.dH="bufferedchange",t.XA="timeupdate",t.yA="durationchange",t._w="readystatechange",t.HPt="playbackratechange",t.uBt="played",t.wh="play",t.bh="pause",t.cBt="programdatetimechange",t.NA="ended",t.lBt="mediastopped",t.XPt="error",t.YA="seeking",t.FA="seeked",t.dBt="seekablechange",t.QA="resize",t.fBt="sourceupdate",t._Bt="trackupdate",t.gBt="activetrackupdate",t.fv="waiting",t._v="playing",t.UA="representationchange",t.GA="segmentnotfound",t.TA="encrypted",t.AA="contentprotectionerror",t.vA="contentprotectionsuccess"}(ea||(ea={}));var CZ,Oa,OZ=class extends d{constructor(t){super("bufferedchange"),this.p_=t}},jZ=class extends d{constructor(t){super("timeupdate"),this.I_=t}},zZ=class extends d{constructor(t){super("programdatetimechange"),this.dSt=t}},PZ=class extends d{constructor(t){super("durationchange"),this.lt=t}},BZ=class extends d{constructor(){super("ended")}},RZ=class extends d{constructor(t){super("error"),this.dt=t}},UZ=class extends d{constructor(t){super("pause"),this.V_=t}},QZ=class extends d{constructor(t){super("playbackratechange"),this.q_=t}},FZ=class extends d{constructor(t){super("played"),this.K_=t}},YZ=class extends d{constructor(t){super("readystatechange"),this.og=t}},GZ=class extends d{constructor(t){super("seekablechange"),this.cg=t}},WZ=class extends d{constructor(t,i){super("sourceupdate"),this.wt=t,this.ac=i}},VZ=class extends d{constructor(t){super("seeking"),this.I_=t}},HZ=class extends d{constructor(t){super("seeked"),this.I_=t}},qZ=class extends d{constructor(t,i){super("resize"),this.pg=t,this.wg=i}},XZ=class extends d{constructor(){super("mediastopped")}},ZZ=class extends d{constructor(t,i,e){super("trackupdate"),this.audioTracks=t,this.videoTracks=i,this.textTracks=e}},KZ=class extends d{constructor(t){super("activetrackupdate"),this.trackIds=t}},JZ=class extends d{constructor(t){super("waiting"),this.I_=t}},$Z=class extends d{constructor(t){super("playing"),this.I_=t}},tK=class extends d{constructor(t,i){super("representationchange"),this.ngt=t,this.Iyt=i}},iK=class extends d{constructor(t,i,e,s,n,r=0){super("segmentnotfound"),this.egt=t,this.dt=i,this.aat=e,this.Ht=s,this.Jst=n,this.wBt=r}},eK=class extends d{constructor(t,i,e){super("encrypted"),this.Pb=t,this.Xb=i,this.I_=e}},sK=class extends d{constructor(t,i,e,s,n,r){super("contentprotectionerror"),this.dt=t,this.ABt=i,this.FI=e,this.vj=s,this.vBt=n,this.rL=r}},nK=class extends d{constructor(){super("contentprotectionsuccess")}},rK=class extends i{Z_(t){this.iBt.V6(Br,function(t){return{type:NZ.HPt,properties:{playbackRate:t}}}(t),h,this.eBt)}ln(){this.Uo(),this.iBt.hn(this.EJ),this.iBt.RPt(this.mBt)}constructor(i){super(),this.eBt=t=>{this.jo(new RZ(t))},this.mBt=(t,i)=>{switch(t){case"buffered":this.jo(new OZ(new re(i)));break;case"currentProgramDateTime":this.jo(new zZ(new Date(i)));break;case"played":this.jo(new FZ(new re(i)));break;case"seekable":this.jo(new GZ(new re(i)));break;case"videoHeight":this.jo(new qZ(void 0,i));break;case"videoWidth":this.jo(new qZ(i,void 0))}},this.EJ=i=>{switch(i.type){case Dt._w:this.jo(new YZ(i.readyState));break;case t.YA:this.jo(new VZ(i.currentTime));break;case t.FA:this.jo(new HZ(i.currentTime));break;case Dt.fv:this.jo(new JZ(i.currentTime));break;case Dt._v:this.jo(new $Z(i.currentTime));break;case t.UA:this.jo(new tK(i.representation,i.previousRepresentation));break;case t.GA:this.jo(new iK(i.segmentStartTime,i.error,i.trackType,i.track,i.quality,i.retryCount));break;case t.TA:this.jo(new eK(i.initDataType,i.initData,i.currentTime));break;case t.AA:this.jo(new sK(i.error,i.licenseAcquisitionURL,i.status,i.statusText,i.licenseAcquisitionMessage,i.systemCode));break;case t.vA:this.jo(new nK)}},this.iBt=i,this.iBt.dn(this.EJ),this.iBt.PPt(this.mBt)}};function hK(t){return"AUDIO"===t.type}function oK(t){return"VIDEO"===t.type}function aK(t){return"TEXT"===t.type}function Pr(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}r(),function(t){t.Au="TEXT",t.Gv="AUDIO",t.Yv="VIDEO"}(CZ||(CZ={})),function(t){t.HM="SUBTITLES",t.kI="CAPTIONS",t.xI="DESCRIPTIONS",t.An="CHAPTERS",t.XM="METADATA"}(Oa||(Oa={})),r();var uK=class t extends rK{pBt(){return this.yBt.getEstimatedTime()}MBt(){const t=this.yBt.activeTrackIds;t&&this.jo(new KZ(t))}TBt(){var t;const i=null==(t=this.yBt.media)?void 0:t.tracks;if(!i)return;const e=i.filter(hK),s=i.filter(oK),n=i.filter(aK);this.jo(new ZZ(e,s,n))}NBt(){var t,i;let e;var s;(null==(t=this.DBt.rBt())?void 0:t.version)?e=null==(s=this.yBt.customData)?void 0:s.sourceDescription:e=$a({sources:this.yBt.media.contentId},Qe({}));this.jo(new WZ(null==(i=this.yBt.customData)?void 0:i.currentSource,e))}jn(){const t=this.pBt();this.jo(new jZ(t))}IBt(){this.SBt=b(this.jn.bind(this),t.TIMEUPDATE_INTERVAL)}EBt(){w(this.SBt)}bBt(){this.EBt(),this.IBt()}LBt(){const t=this.yBt,i=Boolean(t.customData)?t.customData.buffers:void 0;i&&this.jo(new GZ(new re(i.seekable)))}o$(){const t=this.yBt.media;let i;i=Boolean(t)&&t.streamType===chrome.cast.media.StreamType.LIVE?1/0:t&&t.duration||NaN,this.jo(new PZ(i))}kBt(){const t=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(this.yBt)||cK(this.yBt);this.jo(new UZ(t))}Xr(){const t=this.yBt.playbackRate;this.jo(new QZ(t))}Pg(){const t=new chrome.cast.media.PauseRequest;this.yBt.pause(t,h,this.xBt)}Rg(){const t=new chrome.cast.media.StopRequest;this.yBt.stop(t,h,this.xBt)}Bg(){const t=new chrome.cast.media.PlayRequest;this.yBt.play(t,h,this.xBt)}Em(t,i){const e=new chrome.cast.media.SeekRequest;return e.currentTime=t,e.resumeState=i?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise(((t,i)=>{this.yBt.seek(e,t,(t=>{var e;i(new Fh(Pr(t.code),null!=(e=t.description)?e:void 0))}))}))}CBt(t){const i=new chrome.cast.media.EditTracksInfoRequest(t);this.yBt.editTracksInfo(i,h,this.xBt)}ln(){this.EBt(),this.yBt.removeUpdateListener(this.OBt),super.ln()}constructor(t,i,e){super(i),this.OBt=t=>{this.LBt(),this.o$(),this.kBt(),this.Xr(),this.jn(),this.bBt(),this.TBt(),this.MBt(),t||(cK(this.yBt)&&this.jo(new BZ),this.jo(new XZ))},this.xBt=t=>{var i;const e=new Fh(Pr(t.code),null!=(i=t.description)?i:void 0);this.eBt(e)},this.DBt=t,this.yBt=e;const s=new chrome.cast.media.GetStatusRequest;this.yBt.getStatus(s,(()=>{this.NBt()}),h),this.yBt.addUpdateListener(this.OBt),this.IBt(),this.OBt(!0)}};function cK(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}uK.TIMEUPDATE_INTERVAL=250,r();var lK=class{VPt(t,i){this.DBt.addMessageListener(t,i)}GPt(t,i){this.DBt.removeMessageListener(t,i)}V6(t,i){return new Promise(((e,s)=>{this.DBt.sendMessage(t,i,e,(t=>{s(new Fh(Pr(t.code),t.description))}))}))}ln(){}constructor(t){this.DBt=t}},dK=class extends xZ{jBt(){return this.DBt.getSessionObj()}zBt(t){!this.PBt&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this.PBt=new uK(this,this.iBt,t),this.BBt(),this.PBt.dn(ea.lBt,this.RBt),this.jo(new IZ))}UBt(){return this.PBt}async QBt(t){const i=function(t,i,e){const s=function(t){const i=mS(t)||"",e=AS(t)||"",s=new chrome.cast.media.MediaInfo(i,e);return s.metadata=function(t,i,e){const s=new i.cast.media.GenericMediaMetadata;if(e&&(s.images=[new i.cast.Image(e)]),!t)return s;if(t.images)if(s.images||(s.images=[]),ji(t.images))s.images.push(new i.cast.Image(t.images));else for(let e of t.images)if(ji(e)){let t=new i.cast.Image(e);s.images.push(t)}else{let t=new i.cast.Image(e.src);t.height=e.height||void 0,t.width=e.width||void 0,s.images.push(t)}return t.type&&(s.metadataType=function(t,i){switch(t){case"movie":return i.cast.media.MetadataType.MOVIE;case"audio":return i.cast.media.MetadataType.MUSIC_TRACK;case"tv-show":return i.cast.media.MetadataType.TV_SHOW;default:return i.cast.media.MetadataType.GENERIC}}(t.type,i)),qr({},t,s)}(t.metadata,chrome,t.poster),s}(t),n=new chrome.cast.media.LoadRequest(s);return n.autoplay=!0,n.currentTime=i,n.customData=e,n}(t.FBt,t.I_,t.YBt);let e;try{e=await this.DBt.loadMedia(i)}catch(t){e=t}if(e)throw new Fh(Pr(e))}Y_(t){this.jBt().setReceiverMuted(t,h,this.GBt)}Ng(t){this.jBt().setReceiverVolumeLevel(t,h,this.GBt)}WBt(){return this.jBt().receiver.friendlyName}ln(){this.DBt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.VBt),this.jBt().removeUpdateListener(this.BBt),super.ln()}constructor(t){super(new lK(t.getSessionObj())),this.BBt=()=>{const t=this.jBt();this.jo(new SZ(t.receiver.volume.level,t.receiver.volume.muted))},this.VBt=()=>this.zBt(this.DBt.getMediaSession()),this.RBt=()=>{var t;null==(t=this.PBt)||t.hn(ea.lBt,this.RBt),this.PBt=void 0,this.jo(new IZ)},this.GBt=t=>{const i=new Fh(Pr(t.code),t.description);this.eBt(i)},this.DBt=t,this.DBt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.VBt),this.jBt().addUpdateListener(this.BBt),this.BBt();const i=this.DBt.getMediaSession();i&&this.zBt(i)}};r(),r(),r(),r();r();var qu,fK=class extends i{y_(){return re.ZB().ks()}S_(){return this.KB}T_(){}yd(){return this.KL}k_(){return this.D$}x_(){}H_(){return this.tR}HBt(){}X_(){return this.iR}Z_(t){this.iR!==t&&(this.iR=t,this.jo(new ce(this.Qo.I_,t)))}ag(){return he.Rv}J_(){return re.ZB().ks()}dg(){return re.ZB().ks()}_g(){return!1}A_(){return this.qv}vg(){return this.Zv}gg(){return this.Tl}CBt(t){}yg(){return this.qBt}Ag(){return this.XBt}Bg(){}Pg(){}Em(t){}Rg(){}ln(){}constructor(t,i,e,s,n,r,h,o,a,u,c){super(),this.Qo=t,this.KB=i,this.KL=e,this.D$=s,this.tR=n,this.iR=r,this.qBt=u,this.XBt=c,this.qv=h,this.qv.Gn(),this.Zv=o,this.Zv.Gn(),this.Tl=a,this.Tl.Gn()}};r(),r(),r(),r(),function(t){t.ZBt="ccmodechangerequest",t.KBt="cctargetqualitychangerequest",t.JBt="cctrackchangerequest"}(qu||(qu={}));var _K=class extends d{constructor(t,i,e){super(qu.ZBt),this.track=t,this.trackId=i,this.mode=e}},gK=class extends i{get so(){return this.Oa||(this.Oa=Ig(this)),this.Oa}get fh(){return this.Tm}set fh(t){t!==this.Tm&&(this.Tm=t,this.jo(new ms(this)))}get W(){return this.Q$}get H(){return this.F$}get Xw(){return this.NR}set Xw(t){t=Hs(t),this.NR!==t&&(this.NR=t,this.$Bt!==t&&this.jo(new _K(this,this.Bw,t)),this.jo(new eo(this)))}get tRt(){return this.$Bt}set tRt(t){t=Hs(t);let i=this.NR!==t;this.NR=t,this.$Bt=t,i&&this.jo(new eo(this))}Kw(t){this.Xw=t}iRt(t){}ln(){}Gn(){}constructor(t){super(),this.Oa=void 0;let i=t.customData;this.Bw=+t.trackId||0,this.u=(i&&i.id||this.Bw)+"",this.Tm=i&&i.label||t.name||"",this.ys=i&&i.language||t.language||"",this.qw=i&&i.inBandMetadataTrackDispatchType||"",this.Lt=i&&i.kind||function(t){switch(t){case Oa.HM:return ra.HM;case Oa.kI:return ra.kI;case Oa.xI:return ra.xI;case Oa.An:return ra.An;case Oa.XM:return ra.XM}return}(t.subtype)||"subtitles",this.og=gu.NONE,this.$w=i&&void 0!==i.type?function(t){return Io(t)?t:jo.DEFAULT}(i.type):jo.WEBVTT,this.U$=[],this.F$=new Zn(this.U$),this.X$=[],this.Q$=new Zn(this.X$),this.NR=Hs(i&&i.mode||Da.yh),this.$Bt=this.NR}};r(),r();var wK=class extends d{constructor(t,i){super(qu.JBt),this.trackId=t,this.enabled=i}};r();var AK,vK=class extends d{constructor(t,i){super(qu.KBt),this.track=t,this.targetQuality=i}};r(),function(t){t.Gv="audio",t.Yv="video",t.Au="text"}(AK||(AK={}));var mK,pK=class extends i{get Pw(){return this.Jot}get Qw(){return this.Kot}set Qw(t){this.eRt(t),this.jo(new vK(this,t))}get Uw(){return this._m}get fh(){return this.Tm}set label(t){t!==this.Tm&&(this.Tm=t,this.jo(new ms(this)))}get Ot(){return this.He}set Ot(t){this.He!==t&&(this.He=t,this.sRt!==t&&this.jo(new wK(this.Bw,t)),this.jo(new eo(this)))}get nRt(){return this.sRt}set nRt(t){let i=this.He!==t;this.He=t,this.sRt=t,i&&this.jo(new eo(this))}get so(){return this.Oa||(this.Oa=es(this)),this.Oa}get Xw(){return this.Ot?"enabled":"disabled"}Dm(t){this.Ot=t}iRt(t){if(t.targetQualityIds){let i=[];for(let e=0;e<this._m.L;e++){let s=this._m.Iw(e);t.targetQualityIds.indexOf(s.u)>-1&&i.push(s)}const e=i.length?i:void 0;this.eRt(e)}}eRt(t){(function(t,i){return!t&&i||t&&!i||t&&i&&!ph(t,i)})(this.Kot,t)&&(this.Kot=t&&this._m.Am(t)?t:void 0,this.jo(new Bh(this.Kot,this)))}unload(){for(const t of this._m.Nw)t.hn("update",this.YNt);this._m.Gn()}constructor(t){super(),this.Jot=void 0,this._m=new Gc,this.Kot=void 0,this.Oa=void 0,this.YNt=()=>this.jo(new ms(this));let i=t.customData;if(this.Bw=+t.trackId||0,this.u=(i&&i.id||this.Bw)+"",this.Tm=i&&i.label||t.name||"",this.ys=i&&i.language||t.language||"",this.Lt=i&&i.kind||"main",this.He=i&&i.enabled,this.sRt=this.He,hK(t)){this.aJ=AK.Gv;let i=t.customData&&t.customData.qualities;if(i)for(let t of i){const i=new vU(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);i.dn("update",this.YNt),this._m.gm(i)}}else{this.aJ=AK.Yv;let i=t.customData&&t.customData.qualities;if(i)for(let t of i){const i=new AU(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);i.dn("update",this.YNt),this._m.gm(i)}}}};r(),function(t){t.rRt="legacy",t.hRt="caf"}(mK||(mK={}));var yK=class extends i{HBt(){this.tR=!1,this.jo(new ih(this.S_()))}y_(){return this.tTt.ks()}S_(){return this.KB}T_(){if(this.oRt)return new Date(this.S_()+this.oRt)}yd(){return this.KL}x_(){return this.rP}k_(){return this.D$}H_(){return this.tR}X_(){return this.iR}Z_(t){this.iR!==t&&(this.aRt=this.iR,this.iR=t,this.jo(new ce(this.S_(),t)),this.yBt.Z_(t))}ag(){return this.I$}J_(){return this.zo.ks()}dg(){const t=this.a$.ks(),i=t.end;return t.end=t=>{const e=this.S_();return i(t)<e?e:i(t)},t}_g(){return this.JB}A_(){return this.qv}vg(){return this.Zv}gg(){return this.Tl}uRt(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.Ag(),id:"0",name:"",width:this.yg()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:CZ.Yv}}cRt(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:CZ.Gv}}lRt(){var t,i;return!(void 0!==(null==(t=this.DBt.rBt())?void 0:t.version))||(null==(i=this.DBt.rBt())?void 0:i.sdkType)===mK.hRt}CBt(t){this.lRt()&&Hc(t,0),this.yBt.CBt(t)}yg(){return this.qBt}Ag(){return this.XBt}Bg(){this.tR&&(this.tR=!1,this.dRt=!1,this.jo(new ih(this.S_()))),this.yBt.Bg()}Pg(){this.tR||(this.tR=!0,this.dRt=!0,this.jo(new bs(this.S_()))),this.yBt.Pg()}Em(t){const i=void 0!==this.fRt;if(this.fRt=t,this.dRt=this.H_(),!i){var e,s;null!=(s=null==(e=this.DBt.rBt())?void 0:e.version)&&s&&this.Ge(new VZ(t)),this.Y4(t)}}Y4(t){this.yBt.Em(t,this.dRt).then(this._Rt(t)).catch(this.eBt)}_Rt(t){return()=>{void 0!==this.fRt&&(this.fRt===t?this.fRt=void 0:this.Y4(this.fRt))}}Rg(){this.yBt.Rg()}ln(){this.yBt.hn(ea.NA,this._h),this.yBt.hn(ea.bh,this.ezt),this.yBt.hn(ea.QA,this.gRt),this.yBt.hn(ea.FA,this.CP),this.yBt.hn(ea._v,this.jP),this.yBt.hn(ea.YA,this.Ge),this.yBt.hn(ea.fv,this.wRt),this.yBt.hn(ea.TA,this.ARt),this.yBt.hn(ea.XPt,this.vRt),this.yBt.hn(ea.XA,this.Ql),this.yBt.hn(ea._Bt,this.mRt),this.yBt.hn(ea.uBt,this.pRt),this.yBt.hn(ea.dH,this.iJ),this.yBt.hn(ea.yA,this.iQ),this.yBt.hn(ea.dBt,this.yRt),this.yBt.hn(ea.GA,this.MRt),this.yBt.hn(ea._w,this.TRt),this.yBt.hn(ea.gBt,this.NRt),this.yBt.hn(ea.HPt,this.DRt),this.yBt.hn(ea.UA,this.IRt),this.yBt.hn(ea.cBt,this.SRt),this.yBt.hn(ea.AA,this.ERt),this.yBt.hn(ea.vA,this.bRt),this.yBt.ln()}constructor(t,i,e){super(),this.tTt=re.ZB(),this.oRt=void 0,this.D$=!1,this.rP=void 0,this.aRt=void 0,this.I$=he.Rv,this.zo=re.ZB(),this.a$=re.ZB(),this.JB=!1,this.fRt=void 0,this.dRt=!1,this.wRt=t=>{this.jo(new tc(t.I_))},this.jP=t=>{this.jo(new Kr(t.I_))},this.IRt=t=>{this.jo(new cG(t.ngt,t.Iyt))},this.MRt=t=>{this.jo(new GY(t.egt,t.dt,t.aat,t.Ht,t.Jst,t.wBt))},this.ARt=t=>{this.jo(new FQ(t.I_,t.Pb,t.Xb))},this.ERt=t=>{this.jo(new Mn(new ae(ue.CONTENT_PROTECTION_ERROR,t.dt,void 0,t.ABt,t.FI,t.vj,t.vBt,t.rL)))},this.bRt=()=>{this.jo(new Vx)},this.Ql=t=>{this.JB||t.I_===this.S_()||(this.KB=t.I_,this.jo(new bl(this.S_(),this.T_())))},this.iJ=t=>{this.tTt=t.p_,this.jo(new vi(this.S_()))},this.SRt=t=>{this.oRt=t.dSt.getTime()-this.S_()},this.vRt=t=>{this.Ds(t)},this.pRt=t=>{this.zo=t.K_},this.yRt=t=>{this.a$=t.cg},this.gRt=t=>{var i,e;this.XBt=null!=(i=t.wg)?i:this.XBt,this.qBt=null!=(e=t.pg)?e:this.qBt,this.jo(new Gs)},this.TRt=t=>{this.I$=t.og,this.jo(new Z(this.S_(),t.og))},this.Ge=t=>{this.JB=!0,this.KB=t.I_,this.jo(new gt(t.I_))},this.CP=t=>{this.JB=!1,this.KB=t.I_,this.jo(new bl(this.S_(),this.T_())),this.jo(new ke(t.I_))},this.iQ=t=>{const i=t.lt;this.KL===i||M(this.KL)&&M(i)||(this.KL=i,this.jo(new jn(this.KL)))},this._h=()=>{this.D$=!0,this.KB=this.yd(),this.jo(new Ki(this.S_()))},this.ezt=t=>{const i=t.V_;this.dRt=i,this.tR!==i&&(this.tR=i,this.tR?this.jo(new bs(this.S_())):this.jo(new ih(this.S_())))},this.DRt=t=>{const i=t.q_;this.aRt!==i&&(this.aRt=void 0,this.iR!==i&&(this.iR=i,this.jo(new ce(this.S_(),i))))},this.mRt=t=>{TK(this.qv,t.audioTracks.map((t=>t.trackId))),TK(this.Zv,t.videoTracks.map((t=>t.trackId))),TK(this.Tl,t.textTracks.map((t=>t.trackId)));const i=t.videoTracks;if(this.lRt()&&0===i.length&&0!==this.yg()){const t=this.uRt();i.push(t)}const e=t.audioTracks;if(this.lRt()&&0===e.length){const t=this.cRt();e.push(t)}NK(e,this.qv),NK(i,this.Zv),function(t,i){let e=!1;for(let s of t){let t=MK(i,s.trackId);t||(t=new gK(s),i.it(t),e=!0)}}(t.textTracks,this.Tl)},this.NRt=t=>{const i=t.trackIds;if(this.lRt()){const t=this.Zv.Nw.map((t=>t.u)),e=this.qv.Nw.map((t=>t.u));ks(t.concat(e),"0")&&i.push(0)}DK(i,this.qv),DK(i,this.Zv),function(t,i){let e=!1;for(let e of i.Nw)e.tRt=ks(t,e.Bw)?Da.zn:Da.yh}(i,this.Tl)},this.eBt=t=>{this.fRt=void 0,this.jo(new RZ(t))},this.DBt=t,this.yBt=i,this.KB=e.S_(),this.KL=e.yd(),this.tR=e.H_(),this.iR=e.X_(),this.qBt=e.yg(),this.XBt=e.Ag(),this.qv=e.A_(),this.Zv=e.vg(),this.Tl=e.gg(),this.yBt.dn(ea.NA,this._h),this.yBt.dn(ea.bh,this.ezt),this.yBt.dn(ea.QA,this.gRt),this.yBt.dn(ea.FA,this.CP),this.yBt.dn(ea._v,this.jP),this.yBt.dn(ea.YA,this.Ge),this.yBt.dn(ea.fv,this.wRt),this.yBt.dn(ea.TA,this.ARt),this.yBt.dn(ea.XPt,this.vRt),this.yBt.dn(ea.XA,this.Ql),this.yBt.dn(ea._Bt,this.mRt),this.yBt.dn(ea.uBt,this.pRt),this.yBt.dn(ea.dH,this.iJ),this.yBt.dn(ea.yA,this.iQ),this.yBt.dn(ea.dBt,this.yRt),this.yBt.dn(ea.GA,this.MRt),this.yBt.dn(ea._w,this.TRt),this.yBt.dn(ea.gBt,this.NRt),this.yBt.dn(ea.HPt,this.DRt),this.yBt.dn(ea.UA,this.IRt),this.yBt.dn(ea.cBt,this.SRt),this.yBt.dn(ea.AA,this.ERt),this.yBt.dn(ea.vA,this.bRt)}};function MK(t,i){for(let e of t.Nw)if(e.Bw===i)return e}function TK(t,i){let e=!1;for(let s=0;s<t.L;s++){let n=t.Iw(s);-1===i.indexOf(n.Bw)&&(t.st(n),s--,e=!0)}return e}function NK(t,i){let e=!1;for(let s of t){let t=MK(i,s.trackId);t||(t=new pK(s),i.it(t),e=!0)}return e}function DK(t,i){for(let e of i.Nw)e.nRt=ks(t,e.Bw);return!1}var IK=[t.NA,t.yA,t.RA,t.QA,t.bh,t.wh,t.BA,t.XA,t.YA,t.FA,Dt.fv,Dt._v,t.UA,t.GA,t.TA,t.AA,t.vA],SK=class extends ${mB(t){if(!t)return;Xc(this.lB&&ac(this.lB),t&&ac(t))||(this.lB=t,this.jo(new fs(t)))}NBt(t){if(!t)return;Xc(this.uc&&ac(this.uc),t&&ac(t))||(this.LRt=0,this.uc=t,this.jo(new rj(t)),this.ya.HBt())}kRt(t){for(const i of this.ht.Nw)if(i.Bw===t)return i;for(const i of this.ot.Nw)if(i.Bw===t)return i}set q3(t){var i,e,s;null==(i=this.ya)||i.hn(ea.XPt,this.vRt),null==(e=this.ya)||e.hn(IK,this.Ds),null==(s=this.ya)||s.hn(Dt._w,this.AO);const n=this.ya;this.ya=t,null==n||n.ln(),this.ya.dn(ea.XPt,this.vRt),this.ya.dn(IK,this.Ds),this.ya.dn(Dt._w,this.AO)}get ao(){return this.uo}get ot(){return this.ya.A_()}get p_(){return this.ya.y_()}get xRt(){return this.CRt||this.uc}set xRt(t){this.CRt=t}En(){const t=this.CRt||this.Qo.$a();this.uo&&t&&this.QBt(t,!this.Qo.V_,this.Qo.I_)}get M_(){return this.ya.T_()}get wt(){return this.lB}get I_(){return this.ya.S_()+this.LRt}set I_(t){this.ORt||(this.DBt.UBt()||this.ORt||!this.uc?this.ya.Em(t-this.LRt):this.QBt(this.uc,!0,t))}get lt(){return this.ya.yd()}get _e(){return this.Qo._e}get L_(){return this.ya.k_()}get dt(){return this.rP}get C_(){return this.hP}get j_(){}get R_(){return{Jv:0,$v:0,tm:0,im:0,nm:0,hm:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get Q_(){return this.uo?this.$B:this.Qo.Q_}set Q_(t){this.$B=t,this.jo(new ge(this.I_,this.Mg)),this.DBt.Y_(t)}get G_(){return!0}get V_(){return this.ya.H_()}get q_(){return this.ya.X_()}set q_(t){this.ya.Z_(t)}get K_(){return this.ya.J_()}get eg(){return Sl.cB}set eg(t){}get og(){return this.ya.ag()}get cg(){return this.ya.dg()}get fg(){return this.ya._g()}$a(){return this.uc}async Zh(t){this.uc=t,await this.QBt(t,!0,0),this.CRt=void 0}get rt(){return this.ya.gg()}get wg(){return this.ya.Ag()}get pg(){return this.ya.yg()}get ht(){return this.ya.vg()}get Mg(){return this.uo?this.wk:this.Qo.Mg}set Mg(t){this.wk=t,this.jo(new ge(this.I_,this.Mg)),this.DBt.Ng(t)}get Dg(){return this.Qo.Dg}get Sg(){return!1}set Sg(t){}Cg(){}xg(){return this.eR}m_(){return[]}zg(){}Bg(){this.DBt.UBt()||this.ORt||!this.uc?this.ya.Bg():this.QBt(this.uc,!0,0)}Pg(){this.ya.Pg()}async Rg(){this.ya.Rg()}Og(t){this.uo=!0}jg(){this.lB=void 0;const t=this.Mg,i=this.Q_;this.uo=!1,t===this.Qo.Mg&&i===this.Qo.Q_||this.jo(new ge(this.I_,this.Mg))}Wg(t){return!1}ye(){}we(){}get P_(){return!1}Ug(){return!1}Qg(){}Fg(){}QBt(t,i,e){this.ORt=!0,this.Gn(),this.LRt=this.Qo.cg.length>0?this.Qo.cg.start(0):0;const s=this.lt===1/0,n=function(t,i,e){return{theoplayer_version:1,streamStart:t,isLive:i,sourceDescription:e}}(this.LRt,s,t),r={FBt:t,I_:e?e-this.LRt:0,YBt:n};return this.jRt(r)}async jRt(t){try{await this.DBt.QBt(t)}catch(t){this.zRt(t)}finally{this.ORt=!1}}PRt(){this.BRt(this.ot,"audio"),this.BRt(this.ht,"video"),this.BRt(this.rt,"text")}BRt(t,i){for(let e of t.Nw)this.RRt(e,i);t.dn(Po.qg,(t=>{this.RRt(t.Ht,i)}))}RRt(t,i){"text"!==i?(t.dn(qu.KBt,this.Wyt),t.dn(qu.JBt,this.URt),t.dn(qu.JBt,this.MBt)):(t.dn(qu.ZBt,this.QRt),t.dn(qu.ZBt,this.MBt))}FRt(){let t=[];for(let i of this.ht.Nw)i.Ot&&t.push(i.Bw);for(let i of this.ot.Nw)i.Ot&&t.push(i.Bw);for(let i of this.rt.Nw)i.Xw===Da.zn&&t.push(i.Bw);this.ya.CBt(t)}YRt(t){var i,e;if(!t)return!1;return(null!=(e=null==(i=this.DBt.rBt())?void 0:i.version)?e:-1)>=2?t.map((t=>t.u)):[t[0].u]}GRt(t){this.WRt=t}Yg(){}Gg(){}Gn(){return this.aO=he.Rv,this.eO=!1,this.rO=!1,this.rP=void 0,this.hP=void 0,Promise.resolve()}async ln(){await this.Gn(),this.Uo(),this.q3=this.VRt(),this.DBt.hn(fi.XPt,this.vRt),this.DBt.hn(fi.ZPt,this.HRt),this.DBt.hn(fi.ZA,this.qRt),this.DBt.hn(fi.qPt,this.XRt),this.DBt.hn(fi.KPt,this.ZRt),this.DBt.ln()}VRt(){return new fK(this,this.ya.S_(),this.ya.yd(),this.ya.k_(),this.ya.H_(),this.ya.X_(),this.ya.A_(),this.ya.vg(),this.ya.gg(),this.ya.yg(),this.ya.Ag())}constructor(t,i){super(),this.Qo=t,this.uo=!1,this.WRt=h,this.LRt=0,this.aO=he.Rv,this.eO=!1,this.rO=!1,this.ORt=!1,this.CRt=void 0,this.rP=void 0,this.hP=void 0,this.eR=new Th,this.qRt=t=>{var i,e;(t.Mg&&!go(t.Mg,this.wk,1e-5)||t.Q_&&t.Q_!==this.$B)&&(this.wk=null!=(i=t.Mg)?i:this.wk,this.$B=null!=(e=t.Q_)?e:this.$B,this.jo(new ge(this.I_,this.wk)))},this.XRt=()=>{var t;const i=this.DBt.UBt();null==(t=this.PBt)||t.hn(ea.fBt,this.KRt),i?(this.PBt=i,this.PBt.dn(ea.fBt,this.KRt),this.q3=new yK(this.DBt,i,this.ya)):this.q3=this.VRt()},this.KRt=t=>{this.mB(t.wt),this.NBt(t.ac)},this.ZRt=t=>{const i=this.kRt(t.tN);if(!i)return void 0;const e={targetQualityIds:t.$Pt};i.iRt(e)},this.vRt=t=>{this.zRt(t.dt)},this.zRt=t=>{this.WRt&&this.WRt(t)},this.HRt=t=>{this.rP=t.dt,this.hP=No(this.rP),this.jo(new _i(this.hP))},this.URt=t=>{if(!t.enabled)return;const i=this.ht.Nw.some((i=>i.Bw===t.trackId))?this.ht:this.ot;for(const e of i.Nw)e.Ot&&e.Bw!==t.trackId&&(e.Ot=!1)},this.QRt=t=>{if(t.mode===Da.zn)for(const i of this.rt.Nw)i.Xw===Da.zn&&i.Bw!==t.trackId&&jm(i.Lt,t.track.Lt)&&(i.Xw=Da.yh)},this.MBt=J_((()=>{this.FRt()}),50),this.Wyt=t=>{const i=this.YRt(t.targetQuality),e=t.track;this.DBt.tBt(e.Bw,e.aJ,i)},this.AO=t=>{this.jo(t);let i=t.readyState;!this.eO&&this.aO===he.Rv&&i>=he.Un&&(this.eO=!0,this.jo(new as(t.currentTime))),!this.rO&&this.aO<=he.Un&&i>=he.Uv&&(this.rO=!0,this.jo(new js(t.currentTime))),this.aO<=he.Uv&&i>=he.Qv&&this.jo(new E(t.currentTime)),this.aO<=he.Qv&&i===he.Fv&&this.jo(new us(t.currentTime)),this.aO=i},this.wk=this.Qo.Mg,this.$B=this.Qo.Q_,this.DBt=i,this.DBt.dn(fi.XPt,this.vRt),this.DBt.dn(fi.ZPt,this.HRt),this.DBt.dn(fi.ZA,this.qRt),this.DBt.dn(fi.qPt,this.XRt),this.DBt.dn(fi.KPt,this.ZRt),this.lB=this.Qo.wt,this.uc=this.Qo.$a(),this.q3=new fK(this,this.Qo.I_,this.Qo.lt,this.Qo.L_,this.Qo.V_,this.Qo.q_,new ls,new ls,new Or,this.Qo.pg,this.Qo.wg),this.PRt()}};r();var EK=class extends Js{Qh(){return new bK(this.dt)}constructor(t){super("error"),this.dt=t}},bK=class extends d{constructor(t){super("error"),this.error=t}};r();var LK=class extends d{constructor(t){super("statechange"),this.state=t}};function kK(t,i){let e;return{get casting(){return t.NV},get error(){return t.dt},get receiverName(){return t.JRt},get state(){return t.q3},start(){t.yn()},stop(){t.Rg()},join(){t.$Rt()},leave(){t.tUt()},set connectionCallback(t){null==i||i.iUt(t)},get connectionCallback(){return null==i?void 0:i.eUt()},get source(){return e||t.ac},set source(i){e=i,t.ac=i?$a(i):void 0},addEventListener(i,e){const s=bo(i,hs);t.dn(s,e)},removeEventListener(i,e){const s=bo(i,hs);t.hn(s,e)}}}r();var xK=class extends ${get NV(){return this.q3===Zo.CONNECTING||this.q3===Zo.CONNECTED}get dt(){return this.rP}get so(){return this.Oa||(this.Oa=kK(this,this.sUt)),this.Oa}get JRt(){var t;return null==(t=this.sUt.nUt())?void 0:t.WBt()}get ac(){var t;return this.CRt?this.CRt:null==(t=this.Qo)?void 0:t.xRt}set ac(t){this.CRt=t,t&&this.Qo&&(this.Qo.xRt=t,this.Qo.En())}get q3(){return this.ya}set q3(t){this.rUt||t!==Zo.CONNECTING&&t!==Zo.CONNECTED||(t=Zo.AVAILABLE),this.ya!==t&&(this.ya=t,this.jo(new LK(this.q3)))}async hUt(){if(!this.oUt)throw new k("Chromecast must be initialized before starting a session");await this.oUt,this.sUt.nUt()||await this.sUt.aUt()}async yn(){this.rUt=!0;try{var t;if(this.q3=Zo.CONNECTING,await this.hUt(),this.uUt(),this.Qo){var i;const t=null==(i=this.cUt)?void 0:i.$a(),e=await this.sUt.lUt(t);e?this.Qo.xRt=e:this.CRt?this.Qo.xRt=this.CRt:this.Qo.xRt=t,this.Qo.En()}this.q3=Zo.CONNECTED,null==(t=this.cUt)||t.Gn()}catch(t){await this.dUt(!1),this.q3=Zo.AVAILABLE,Er(t)||this.L1(t)}}async $Rt(){this.rUt=!0;try{var t;if(this.q3=Zo.CONNECTING,await this.hUt(),this.uUt(),this.Qo){var i;const t=null==(i=this.cUt)?void 0:i.$a(),e=await this.sUt.fUt(t);e&&(this.Qo.xRt=e)}this.q3=Zo.CONNECTED,null==(t=this.cUt)||t.Gn()}catch(t){await this.dUt(!0),this.q3=Zo.AVAILABLE,Er(t)||this.L1(t)}}async _Ut(){this.sUt.nUt()&&await this.yn()}uUt(){this.cUt=this.gUt.pV.Ew,this.Qo||(this.Qo=this.wUt(this.cUt)),this.rP=void 0,this.cUt.Pg(),this.gUt.pV.Ew=this.Qo}wUt(t){const i=new SK(t,this.sUt.nUt());return i.GRt(this.L1),this.gUt.pV.lm(i),i}AUt(){this.Qo&&(this.gUt.pV.dm(this.Qo),this.Qo.ln(),this.Qo=void 0)}async dUt(t){if(this.rUt=!1,!this.Qo)return;const i=this.Qo.ao;this.gUt.pV.Ew=this.cUt;const e=this.Qo.$a(),s=this.Qo.I_;if(this.AUt(),i){let i;i=t?await this.sUt.vUt(e):await this.sUt.mUt(e),(i||e)&&(this.gUt.so.source=i||e,this.gUt.E_(s),this.gUt.Bg())}}tUt(){this.NV&&(this.sUt.pUt(!1),this.dUt(!0))}Rg(){this.NV&&(this.sUt.pUt(!0),this.dUt(!1))}ln(){this.sUt.hn(AZ.EPt,this.yUt),this.Uo(),this.AUt()}constructor(t,i,e){super(),this.rP=void 0,this.Oa=void 0,this.cUt=void 0,this.Qo=void 0,this.ya=Zo.UNAVAILABLE,this.rUt=!1,this.MUt=()=>{this.sUt.dn(AZ.EPt,this.yUt),this.q3=this.sUt.TUt()},this.yUt=t=>{const i=t.q3;i!==Zo.UNAVAILABLE&&i!==Zo.AVAILABLE||this.dUt(!1),this.q3=i},this.CRt=void 0,this.L1=t=>{t instanceof Fh&&(this.rP=t,this.jo(new EK(t).so))},this.gUt=t,this.sUt=e,this.mC=i.chromecast,this.NUt=i.strategy,this.oUt=this.sUt.YW(this.mC),this.oUt.then(this.MUt).catch(this.L1)}};xK.DUt="ChromecastController",r(),As((function(t){return class extends t{Qh(){let t=this.jQ.so;return Wt(super.Qh(),{get cast(){return t}})}}}),cs.v9),r();var CK=class extends ${get NV(){return!1}get dt(){}get JRt(){}get ac(){}set ac(t){}get q3(){return Zo.UNAVAILABLE}get so(){return this.Oa||(this.Oa=kK(this)),this.Oa}$Rt(){console.warn("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}tUt(){console.warn("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}yn(){console.warn("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}Rg(){console.warn("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}_Ut(){return Promise.resolve()}ln(){}};r();var Xo,OK=new class extends i{iUt(t){this.IUt=t}eUt(){return this.IUt}nUt(){return this.SUt}TUt(){switch(this.EUt.getCastState()){case cast.framework.CastState.CONNECTED:return Zo.CONNECTED;case cast.framework.CastState.CONNECTING:return Zo.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return Zo.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return Zo.UNAVAILABLE}}async YW(t){await yZ.Lb.bPt(),this.EUt=cast.framework.CastContext.getInstance(),this.EUt.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.EV),this.EUt.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async aUt(){try{const t=await this.EUt.requestSession();if(t)throw t}catch(t){throw new Fh(Pr(t))}}lUt(t){var i;const e=new $s,s=null==(i=this.IUt)?void 0:i.onStart(t),n=s?$a(s,Qe({})):void 0;return e.iL(n),e.sL}mUt(t){var i;const e=new $s,s=null==(i=this.IUt)?void 0:i.onStop(t),n=s?$a(s,Qe({})):void 0;return e.iL(n),e.sL}fUt(t){var i;const e=new $s,s=null==(i=this.IUt)?void 0:i.onJoin(t),n=s?$a(s,Qe({})):void 0;return e.iL(n),e.sL}vUt(t){var i;const e=new $s,s=null==(i=this.IUt)?void 0:i.onLeave(t),n=s?$a(s,Qe({})):void 0;return e.iL(n),e.sL}pUt(t){this.EUt.endCurrentSession(t)}constructor(...t){super(...t),this.SUt=void 0,this.IUt=void 0,this.EV=()=>{const t=this.TUt();this.SUt=t===Zo.CONNECTED?new dK(this.EUt.getCurrentSession()):void 0,this.jo(new pZ(t))}}},jK=new class{get so(){return this.Oa||(this.Oa=function(t){return{initialize(i){const e=t.YW(ew(i));return e.catch(h),e},startSession(){const i=t.aUt();return i.catch(h),i},endSession(){t.bUt()}}}(this)),this.Oa}async YW(t){this.oUt||(this.oUt=this.LUt(t)),await this.oUt}async LUt(t){await this.sUt.YW(t)}async aUt(){if(!this.oUt)throw new k("Chromecast must be initialized before starting a session");await this.oUt,this.sUt.nUt()||await this.sUt.aUt()}kUt(){this.sUt.pUt(!1)}bUt(){this.sUt.pUt(!0)}constructor(t){this.oUt=void 0,this.Oa=void 0,this.sUt=t}}(OK),zK={get chromecast(){return jK.so}};As(function(t){return i=>class extends i{Qh(){let t=this,i=super.Qh();return Wt(i.cast,{get chromecast(){return t.xUt.so}}),i}$a(){var t,i;const e=super.$a();return!e&&(null==(t=this.xUt)?void 0:t.NV)&&(null==(i=this.xUt)?void 0:i.ac)?this.xUt.ac:e}Bg(){super.Bg(),this.dd.cast.strategy===Pc.AUTO&&this.xUt&&!this.xUt.NV&&this.xUt._Ut()}ln(){this.xUt&&this.xUt.ln(),super.ln()}constructor(i,e){super(i,e),this.dd.cast.strategy!==Pc.DISABLED?(this.xUt=new xK(this,this.dd.cast,t),this.jQ.SV(this.xUt)):this.xUt=new CK}}}(OK),cs.v9),r(),r(),r(),r(),r(),function(t){t[t.CUt=0]="CUt",t[t.OUt=1]="OUt"}(Xo||(Xo={})),r(),r();var PK=class{jUt(t,i,e,s,n,r,h,o,a,u,c){t.kR.forEach((t=>{if(!this.zUt(t.PUt)){const l=t.BUt(i,e,s,n,r,h,o,a,u,c);l&&this.RUt(l,e)}}))}zUt(t){return this.UUt.get(t)}RUt(t,i){this.UUt.set(t.QUt,t),this.FUt.set(t.QUt,t.YUt),i.lm(t),this.GUt.Ua(t.WUt)}VUt(t){this.UUt.has(t.QUt)||(this.FUt.set(t.QUt,t),this.GUt.Ua(t.WUt))}HUt(t){return this.FUt.forEach(t)}qUt(t){this.UUt.forEach((i=>{i.qUt(t)}))}ln(){this.UUt.forEach((t=>t.ln())),this.FUt.forEach((t=>t.ln())),this.UUt.clear(),this.FUt.clear()}constructor(t){this.GUt=t,this.UUt=Mt(),this.FUt=Mt()}};r();var ze,qe,bi=class extends Ga{get XUt(){return this.ZUt}get KUt(){var t;return null!=(t=this.JUt)?t:900}constructor(t,i,e,s){super(e||i&&BK[i]||t,s),this.ZUt=t,this.JUt=i,this.$Ut=e}};!function(t){t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general"}(ze||(ze={})),function(t){t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED"}(qe||(qe={}));var BK={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};r();var $h=class t extends Js{Qh(){return new RK(this.XUt,this.Yb,this.nL,this.ac)}static tQt(i){return new t(ze.GENERAL,i.Yb,i.KUt)}static iQt(i,e){return new t(i.XUt,i.message,i.KUt,e)}constructor(t,i,e,s){super("eQt"),this.XUt=t,this.Yb=i,this.nL=e,this.ac=s}},RK=class extends d{constructor(t,i,e,s){super("aderror"),this.problemType=t,this.message=i,this.errorCode=e,this.source=s}};r(),r();var UK=class extends Wi{Bg(){this.sQt.Ew=this.nQt,this.sQt.Bg()}constructor(t,i,e){super(i),this.sQt=t,this.nQt=e}},QK=class extends zI{get rQt(){return this.hQt}get oQt(){return this.aQt}get jc(){let t=!1;return this.uQt((i=>{t=t||i.cQt})),t}i1(t,i,e){try{this.lQt=e;const s=Ts.Lb.OR(t),n=this.hQt.zUt(s.PUt);if(!n)throw new bi(ze.ADBLOCK);i!==Xo.OUt&&this.S4||(this.dQt=new UK(this.sQt,this.sQt.Ew,n),this.sQt.Ew=this.dQt),s.i1(t,i,n,this.lQt)}catch(i){0,this.jo($h.iQt(i,t.sources))}}qUt(t){this.hQt.qUt(t)}fQt(t){var i;const e=new Ri(ue.AD_BLOCKER_DETECTED,t),s=Yn(e);this.sQt.Ew=new gl(this.Qo._e,s,e),null==(i=this.dQt)||i.ln(),this.Qo.ln(),this.ln(),this.sQt.dm(this.Qo)}uQt(t){return this.rQt.HUt(t)}Gn(){var t;this.S4=!1,this.sQt.Ew===this.dQt&&(this.sQt.Ew=this.Qo),null==(t=this.dQt)||t.Gn(),this.dQt=void 0}ln(){this.Uo(),this.sQt.hn(t.wh,this.m8),this.hn("eQt",this._Qt),this.hQt.ln(),this.aQt.ln(),this.dQt=void 0}constructor(i,e){super(),this.Qo=i,this.sQt=e,this.lQt=!1,this.S4=!1,this._Qt=()=>{this.lQt&&this.fQt("Starting ads was not possible. Turn off your AdBlocker and try again.")},this.m8=()=>{this.S4=!0},e.dn(t.wh,this.m8),this.so=function(t){return{get playing(){return t.jc},get currentAds(){let i=[];return t.uQt((t=>{const e=t.gQt;e.length&&(i=i.concat(e))})),i},get currentAdBreak(){let i=null;return t.uQt((t=>{!i&&t.wQt&&(i=t.wQt)})),i},get scheduledAds(){let i=[];return t.uQt((t=>{i=i.concat(t.AQt)})),i},get scheduledAdBreaks(){let i=[];return t.uQt((t=>{i=i.concat(t.vQt)})),i},skip(){t.uQt((t=>{t.uT()}))},schedule(i){let e=SS(i,Ts.Lb);e?t.i1(e,Xo.CUt,!1):console.error("Invalid ad description")},addEventListener(i,e){t.oQt.dn(i,e)},removeEventListener(i,e){t.oQt.hn(i,e)}}}(this),this.aQt=new na(this,this.so),this.hQt=new PK(this),this.dn("eQt",this._Qt)}};As((function(t){return class extends t{Zh(t){this.Pc.Gn(),super.Zh(t)}async E9(t,i){if(Pi(i),await super.E9(t,i),Pi(i),!t||!t.ads)return;const e=Boolean(t.blockContentIfAdError);this.Pc.qUt(t.playAdsAfterTime);for(const i of t.ads)this.Pc.i1(i,Xo.OUt,e)}Qh(){const t=this;return Wt(super.Qh(),{get ads(){return t.Pc.so}})}ln(){this.Pc.ln(),super.ln()}constructor(t,i){super(t,i),this.Pc=new QK(this.w9,this.pV)}}}),cs.v9),r(),As((function(t){return class extends t{ln(){super.ln()}constructor(t,i){super(t,i),this.Pc&&this.Pc.rQt.jUt(Ts.Lb,this.w9,this.pV,this.Su,i,this.e9,this.Il,this.t9,this.yO,t,this.r9)}}}),cs.v9),r(),r(),r();var FK=0!==li.JE?li.JE:li.dE,YK=li.Ra&&FK<12,po=class extends ${get YUt(){return this}get vQt(){return[]}get j_(){}get Dg(){return this.lP}get WUt(){return this.mQt}get ot(){return this.qv}get cQt(){return this.pQt.Ew===this}get p_(){return re.ZB().ks()}get M_(){return null}set M_(t){}get wt(){return this.h.wt}get P_(){return!1}get R_(){return{Jv:0,$v:0,tm:0,im:0,nm:0,hm:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get G_(){return!0}get q_(){return 1}set q_(t){}get eg(){return this.h.eg}set eg(t){this.h.eg=t}get K_(){return new re([0,this.I_]).ks()}get fg(){return!1}get rt(){return this.Tl}get ht(){return this.Zv}get Sg(){return!1}set Sg(t){}Og(t){Dw(this,t)}jg(){0}xg(){return this.eR}$a(){return this.pQt.$a()}async Zh(t,i){Pi(i),await this.h.Zh(t,i)}Ug(){return!1}Qg(){}Fg(){}async ln(){this.Uo(),this.qv.ln(),this.Zv.ln(),this.Tl.ln(),this.mQt.ln(),this.h.hn(t.mA,this.Ds)}yQt(){YK&&this.MQt(),this.TQt=this.h.q_,this.pQt.Ew!==this&&(this.Mg=this.h.Mg,this.Q_=this.h.Q_,this.pQt.Ew=this)}NQt(){this.pQt.Ew!==this.h&&(YK&&this.DQt(),li.Mb&&this._e.querySelectorAll("video[src]").forEach((t=>{t.src=""})),le.Ks.a7&&this.h.Gg(),this.h.q_=this.TQt,this.h.Mg=this.Mg,this.h.Q_=this.Q_,this.pQt.Ew=this.h)}MQt(){this.IQt||(J.addEventListener("blur",this.SQt),J.addEventListener("focus",this.EQt),this.IQt=!0)}DQt(){J.removeEventListener("blur",this.SQt),J.removeEventListener("focus",this.EQt),this.IQt=!1}bQt(){requestAnimationFrame((()=>this.h.we()))}Yg(){}Gg(){}Gn(){return Promise.resolve()}constructor(i,e,s){super(),this.h=i,this.pQt=e,this.Su=s,this.IQt=!1,this.TQt=1,this.eR=new Th,this.lP=new hu,this.SQt=()=>{this.h.ye()},this.EQt=()=>{this.bQt()},this.Zv=new ls,this.qv=new ls,this.Tl=new Or,this.mQt=new zI,this.h.dn(t.mA,this.Ds)}};function Lr(t){c.createElement("img").src=t}r(),r(),r(),r();var GK=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function WK(t){if(!ji(t))return;const i=t.match(GK);return i?3600*j(i[1],10)+60*j(i[2],10)+Number(i[3])+(Number(i[4])||0)/1e3:void 0}function VK(t){if(void 0===t)return;const i=t.match(/^([1-9]?\d|100)%$/);return i?j(i[1])/100:void 0}r(),r(),r(),r();var HK=class{},qK=class extends HK{get LQt(){return this.kQt}constructor(t){super(),this.kQt=t}};r(),r();var aa=class{get xQt(){return this.CQt}constructor(){this.CQt=void 0}},XK=class extends aa{bc(){const t=this.OQt.LQt;for(;void 0!==this.jQt||this.zQt<t.length;)if(void 0===this.jQt){const i=t[this.zQt];this.jQt=i.PQt(),this.zQt+=1}else{if(this.CQt=this.jQt.bc(),void 0!==this.CQt)return this.CQt;this.jQt=void 0}}dt(){return this.bc()}constructor(t){super(),this.OQt=t,this.zQt=0,this.jQt=void 0}},ZK=class extends qK{PQt(){return new XK(this)}constructor(t){super(t.sort(((t,i)=>t.MD-i.MD)))}};r(),r();var KK=class extends HK{get u(){return this.BQt}get MD(){return this.RQt}get UQt(){return this.QQt}constructor(t,i){super(),this.BQt=t,this.RQt=i,this.QQt=!1}};r();var JK=class extends aa{bc(){if(this.FQt)this.CQt=void 0;else{let t,i,e,s;this.FQt=!0;let n=[];const r=this.OQt.YQt||[];this.OQt.dt&&(s=this.OQt.dt);for(const s of this.OQt.GQt)s.WQt&&(t=s.WQt),s.VQt&&(i=s.VQt),s.HQt&&(e=s.HQt),n=n.concat(s.universalAdIds);this.CQt={qQt:r,WQt:t,XQt:i,HQt:e,dt:s,ZQt:n}}return this.CQt}dt(){return this.bc()}constructor(t){super(),this.OQt=t,this.FQt=!1}},$K=class extends KK{get GQt(){return this.KQt}get JQt(){return this.$Qt}get tFt(){return this.iFt}get YQt(){return this.eFt}get dt(){return this.rP}PQt(){return new JK(this)}constructor(t,i,e,s,n,r,h){super(t,i),this.$Qt=e,this.iFt=s,this.eFt=n,this.KQt=r,this.rP=h}};r(),r(),r();var tJ,iJ=class{get sFt(){return this.nFt}get rFt(){return this.hFt}constructor(t,i){this.nFt=t,this.hFt=i}},eJ=class{get oFt(){return this.aFt}get uFt(){return this.cFt}get lFt(){return this.dFt}get fFt(){return this._Ft}get Ol(){return this.gFt}set Ol(t){this.gFt=t}get wFt(){return this.AFt}get vFt(){return this.mFt}pFt(){this.mFt=!0}get JQt(){return this.$Qt}constructor(t,i,e,s,n,r){this.aFt=t,this.cFt=i,this.dFt=e,this._Ft=s,this.mFt=!1,this.AFt=n,this.$Qt=r}};r(),function(t){t.yFt="all",t.MFt="any",t.uB="none"}(tJ||(tJ={}));var sJ=class{get TFt(){return this.NFt}get DFt(){return this.IFt}constructor(t,i){this.NFt=t,this.IFt=i}},nJ=class{get u(){return this.ym}get Ti(){return this.vk}get Mi(){return this.pk}get SFt(){return this.EFt}get bFt(){return this.LFt}get kFt(){return this.xFt}get CFt(){return this.OFt}get jFt(){return this.zFt}get PFt(){return this.BFt}get RFt(){return this.UFt}get oFt(){return this.aFt}get uFt(){return this.cFt}get lFt(){return this.dFt}get QFt(){return this.FFt}get rFt(){return this.YFt}get GFt(){return this.WFt}constructor(t,i,e,s,n,r,h,o,a,u,c,l,d,f,_,g){this.vk=t,this.pk=i,this.ym=e,this.EFt=s,this.LFt=n,this.xFt=r,this.OFt=h,this.zFt=o,this.BFt=a,this.UFt=u,this.aFt=c,this.cFt=l,this.dFt=d,this.FFt=f,this.YFt=_,this.WFt=g}};r();var rJ=class{get id(){return this.ym}get uri(){return this.HSt}constructor(t,i){this.ym=t,this.HSt=i}},Ur=class{get VFt(){return this.HFt}get qFt(){return this.XFt}get ZFt(){return this.KFt}get JFt(){return this.$Ft}constructor(t,i,e,s){this.HFt=t,this.XFt=i,this.KFt=e,this.$Ft=s}},hJ=class extends aa{bc(){if(!this.FQt&&this.OQt.tYt){void 0===this.jQt&&(this.jQt=this.OQt.tYt.PQt()),this.FQt=!0;const c=this.jQt.bc();if(void 0===c)return void(this.CQt=void 0);let l,d,f;if(this.OQt.GQt)for(const t of this.OQt.GQt)t.WQt&&(l=t.WQt),t.VQt&&(d=t.VQt),t.HQt&&(f=t.HQt);const _=c.qQt.concat(this.OQt.qQt);let g=c.WQt;if(l&&c.WQt){const t=new Ur(c.WQt.iYt.VFt,c.WQt.iYt.qFt,c.WQt.iYt.ZFt.concat(l.iYt.ZFt),c.WQt.iYt.JFt.concat(l.iYt.JFt));g=c.WQt,g.iYt=t,g.rFt=g.rFt.concat(l.rFt)}let w=c.XQt;if(d&&d.sFt){var t,i;const o=[];for(const t of d.sFt)o.concat(t.fFt.ZFt);const a=[];var e,s;for(const i of null!=(e=null==(t=c.XQt)?void 0:t.sFt)?e:[]){var n,r,h;const t=new Ur(i.fFt.VFt,i.fFt.qFt,i.fFt.ZFt.concat(o),(null!=(r=null==(n=c.WQt)?void 0:n.iYt.JFt)?r:[]).concat(null!=(h=null==l?void 0:l.iYt.JFt)?h:[]));a.push(new eJ(i.oFt,i.uFt,i.lFt,t,i.wFt,i.JQt))}w=new iJ(a,(null!=(s=null==(i=c.XQt)?void 0:i.rFt)?s:[]).concat(d.rFt))}let A=c.HQt;if(A){var o;let t=A.TFt;var a,u;f&&f.TFt&&(t=f.TFt),A=new sJ(t,(null!=(a=null==(o=c.HQt)?void 0:o.DFt)?a:[]).concat(null!=(u=null==f?void 0:f.DFt)?u:[]))}let v=c.dt;this.OQt.dt&&(v=this.OQt.dt),this.CQt={qQt:_,WQt:g,XQt:w,HQt:A,dt:v,ZQt:c.ZQt}}else this.FQt||(this.FQt=!0),this.CQt=void 0;return this.CQt}dt(){return this.bc()}constructor(t){super(),this.OQt=t,this.FQt=!1,this.jQt=void 0}},oJ=class extends KK{get qQt(){return this.eYt}get tYt(){return this.sYt}get nYt(){return this.rYt}get GQt(){return this.KQt}get hYt(){return this.oYt}get aYt(){return this.uYt}get dt(){return this.rP}PQt(){return new hJ(this)}constructor(t,i,e,s,n,r,h,o,a){super(t,i),this.eYt=e,this.sYt=s,this.rYt=n,this.KQt=r,this.oYt=h,this.uYt=o,this.rP=a}};r();var aJ=class{get u(){return this.ym}get cYt(){return this.lYt}get dYt(){return this.fYt}get jFt(){return this.zFt}get WQt(){return this._Yt}get VQt(){return this.gYt}get HQt(){return this.wYt}get universalAdIds(){return this.AYt}constructor(t,i,e,s,n,r,h,o){this.ym=t,this.lYt=i,this.fYt=e,this.zFt=s,this._Yt=n,this.gYt=r,this.wYt=h,this.AYt=o}};r();var se,uJ=class{get lt(){return this.vYt}get mYt(){return this.pYt}get rFt(){return this.hFt}set rFt(t){this.hFt=t}set iYt(t){this.yYt=t}get iYt(){return this.yYt}get MYt(){return this.TYt}set MYt(t){this.TYt=t}get NYt(){return this.mFt}get Ol(){return this.gFt}set Ol(t){this.gFt=t}get wFt(){return this.AFt}get JQt(){return this.$Qt}pFt(){this.mFt=!0}constructor(t,i,e,s,n,r,h){this.vYt=t,this.pYt=i,this.hFt=e,this.yYt=s,this.TYt=n,this.mFt=!1,this.AFt=r,this.$Qt=h}};function ho(t,i){return dJ(t)&&t.getAttribute(i)||void 0}function cJ(t,i){return lJ(t,i,void 0,!1)}function lJ(t,i,e,s){return i===(t.localName?t.localName:t.nodeName)&&(s&&e?e===t.namespaceURI:!e||!t.namespaceURI||e===t.namespaceURI)}function Kc(t,i){const e=[];for(let s=0;s<t.childNodes.length;s+=1){const n=t.childNodes.item(s);dJ(n)&&cJ(n,i)&&e.push(n)}return e}function dJ(t){return t&&1===t.nodeType}function fJ(t,i){const e=(new DOMParser).parseFromString(t,i);if(!e||e.getElementsByTagName("parsererror").length>0)throw new k('Invalid document for MIME type "'+i+'"');return e}function _J(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}r(),r(),function(t){t.DYt="mute",t.IYt="unmute",t.bh="pause",t.SYt="resume",t.EYt="rewind",t.bYt="skip",t.LYt="playerExpand",t.kYt="playerCollapse",t.xh="fullscreen",t.xYt="exitFullscreen",t.CYt="expand",t.COLLAPSE="collapse",t.eut="start",t.OYt="firstQuartile",t.jYt="thirdQuartile",t.zYt="midpoint",t.PYt="complete",t.BYt="acceptInvitationLinear",t.RYt="acceptInvitation",t.UYt="timeSpentViewing",t.QYt="otherAdInteraction",t.BA="progress",t.FYt="creativeView",t.YYt="adExpand",t.GYt="adCollapse",t.WYt="minimize",t.VYt="close",t.HYt="closeLinear",t.qYt="overlayViewDuration",t.XYt="breakStart",t.ZYt="breakEnd",t.ha="error"}(se||(se={}));var gJ=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function wJ(t){return void 0!==t&&-1!==gJ.indexOf(t)}var AJ=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function vJ(t){return void 0!==t&&-1!==AJ.indexOf(t)}var mJ=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function pJ(t){return void 0!==t&&-1!==mJ.indexOf(t)}function yJ(t,i){if(void 0===t||""===t||void 0===i)return;let e=t.match(/^(\d+):(\d+):(\d+)$/);return e?T(e[1]||"0")+60*T(e[2]||"0")+T(e[3]||"0"):(e=t.match(/^(100|[1-9]\d|\d)%$/),e?T(e[1]||"0")*i/100:void 0)}var MJ=class{get qU(){return this.KYt}get Lu(){return this.JYt}get eventURL(){return this.$Yt}constructor(t,i,e){this.KYt=t,this.JYt=i,this.$Yt=e}};r();var TJ=class{get tGt(){return this.iGt}constructor(t){this.iGt=t}},NJ=class extends TJ{get VFt(){return this.HFt}get GFt(){return this.WFt}get eGt(){return this.sGt}constructor(t,i,e,s){super(t),this.sGt=i,this.HFt=e,this.WFt=s}},DJ=class extends TJ{constructor(t){super(t)}},IJ=class extends TJ{constructor(t){super(t)}};r();var _t={nGt:{nL:100,Yb:"XML parsing error."},rGt:{nL:303,Yb:"Empty or invalid VAST error."},hGt:{nL:400,Yb:"General linear error"},oGt:{nL:403,Yb:"Unsupported MIME-type or missing mediafiles error"},aGt:{nL:500,Yb:"General nonlinear error"},pU:{nL:900,Yb:"Network error"}},SJ=class{get uGt(){return this.cGt}lGt(t){if(!this.uGt)return;const i=this.uGt.replace(/\[ERRORCODE]/,""+t.nL);Lr(i)}constructor(t){this.cGt=t}};function EJ(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case Bt.Lv:case Bt.zv:case Bt.bv:return!0;default:return!1}}function bJ(t){const i=KT();return!!(EJ(t)||t&&i&&(null==i?void 0:i.canPlayType)&&i.canPlayType(t))||(mr("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function LJ(t,i){i.forEach((i=>{new SJ(i).lGt(t)}))}function mr(t){0}r(),r();var kJ,xJ=class{get dGt(){return this.fGt}get _Gt(){return this.gGt}constructor(t,i){this.fGt=t,this.gGt=i}};!function(t){t.wGt="linear",t.AGt="nonlinear",t.vGt="companion",t.mGt="vmap"}(kJ||(kJ={}));var CJ,Gu=class t{async pGt(i,e){if("vmap"===i.sources.type||void 0===i.sources.type&&void 0===i.timeOffset){const s=await t.yGt(i.sources.src,e),n=s&&s.documentElement;if(!n)throw new bi(ze.NETWORK,qe.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(cJ(n,"VMAP"))return await this.MGt(n,i,e);if(cJ(n,"VAST")){const t=await this.TGt(n,e,!1);if(t){const e=new Ju("",!0,!0,t);return[new jJ("start",e,CJ.wGt,"",[],!1,!0,i)]}return[]}throw new bi(ze.GENERAL,qe.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if("vast"===i.sources.type||void 0===i.sources.type&&void 0!==i.timeOffset)return[new zJ(String(i.timeOffset),i,e)];throw new bi(ze.GENERAL,qe.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async NGt(i,e,s,n){let r;void 0===n&&(n=[]);try{r=await t.yGt(i,e)}catch(t){throw LJ(t instanceof bi&&t.KUt===qe.VAST_MALFORMED_RESPONSE?_t.rGt:_t.pU,n),t}const h=r&&r.documentElement;if(h&&cJ(h,"VAST"))return await this.TGt(h,e,s,n)}async DGt(t,i,e,s){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new bi(ze.GENERAL,qe.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.NGt(t.sources.src,s,!1),h=new Ju("",!0,!0,r),o=new jJ(i,h,CJ.wGt,"",[],!1,!0,t);return o.IGt=e,o}static async requestSuccessOnly(t,i){let e;try{e=await i.BI(t)}catch(t){throw new bi(ze.NETWORK,qe.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!rr(e))throw new bi(ze.NETWORK,qe.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return e}static async yGt(t,i){const e=new ai({Iu:t,pS:$m.Au,mS:Vt.GET}),s=await this.requestSuccessOnly(e,i);try{return function(t){return fJ(t,"text/xml")}(await s.JM())}catch(t){throw new bi(ze.NETWORK,qe.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async TGt(t,i,e,s){void 0===s&&(s=[]);const n=[],r=[],h=[];if(t&&cJ(t,"VAST")){if(0!==Kc(t,"Ad").length){for(const e of Kc(t,"Ad"))try{const t=await this.SGt(e,i,s);0===t.MD?n.push(t):r.push(t)}catch(t){h.push(t)}if(0===n.length&&0===r.length&&h.length>0)throw h[0];return 1===n.length&&0===r.length?n[0]:0===n.length&&0!==r.length?new ZK(r):n.length>0||r.length>0?new ZK(r.concat(n)):void 0}if(0!==Kc(t,"Error").length){for(const i of Kc(t,"Error")){mr(_t.nGt.Yb);const t=i.textContent;t&&s.push(t),LJ(_t.nGt,s)}throw new bi(ze.GENERAL,qe.VAST_MALFORMED_RESPONSE,"The Ad Server responded with a VAST Error")}if(e)throw LJ(_t.rGt,s),new bi(ze.PARSING,qe.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.")}else if(e)throw LJ(_t.rGt,s),new bi(ze.PARSING,qe.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.")}async MGt(t,i,e){const s=[],n=Kc(t,"AdBreak");for(const t of n)try{const n=await this.EGt(t,i,e);n&&s.push(n)}catch(t){le.w7(t)}return s}async SGt(i,e,s){const n=ho(i,"id")||"";let r=Ba(ho(i,"sequence"));r||(r=0);const h=Kc(i,"InLine"),o=Kc(i,"Wrapper");if(0!==o.length)return await this.bGt(o[0],n,r,e,s);if(0!==h.length)return t.LGt(h[0],n,r,s);throw new bi(ze.PARSING,qe.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static LGt(i,e,s,n){const r=Kc(i,"Error")[0];let h;r&&r.textContent&&(h=r.textContent,n.push(h));const o=Kc(i,"AdSystem")[0];let a,u="";o&&(u=o.textContent||u);const c=Kc(i,"AdTitle")[0];c&&(a=c.textContent||void 0);const l=[];for(const t of Kc(i,"Impression"))t.textContent&&l.push(t.textContent);const d=t.kGt(Kc(i,"Creatives")[0],u,n);return new $K(e,s,u,a,l,d,new SJ(h))}async bGt(i,e,s,n,r){const h=Kc(i,"Error")[0];let o="";h&&h.textContent&&(o=h.textContent,r.push(o));const a=Kc(i,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of Kc(i,"Impression"))t.textContent&&c.push(t.textContent);const l=Kc(i,"VASTAdTagURI")[0];let d="";l&&l.textContent&&(d=l.textContent);const f=await this.NGt(d,n,!0,r),_=Kc(i,"Creatives")[0];let g=[];_&&(g=t.xGt(_,u,r));let w=va(ho(i,"followAdditionalWrappers"));w||(w=!0);let A=va(ho(i,"allowMultipleAds"));A||(A=!0);let v=va(ho(i,"fallbackOnNoAd"));return v||(v=!1),new oJ(e,s,c,f,w,g,A,v,new SJ(o))}static xGt(i,e,s){const n=[];for(const r of Kc(i,"Creative")){let i=ho(r,"id");i||(i="");let h=Ba(ho(r,"sequence"));h||(h=0);let o=ho(r,"adId");o||(o="");const a=Kc(r,"Linear")[0];let u;a&&(u=t.CGt(a,"wrapper",i,e,s));const c=Kc(r,"NonLinearAds")[0];let l,d;if(c)try{d=t.OGt(c,i,e),l=d}catch(t){}const f=Kc(r,"CompanionAds")[0];let _;f&&(_=t.jGt(f)),n.push(new aJ(i,o,h,"",u,l,_,[]))}return n}static kGt(i,e,s){const n=[];for(const r of Kc(i,"Creative")){let i=ho(r,"id");i||(i="");let h=Ba(ho(r,"sequence"));h||(h=0);let o=ho(r,"adId");o||(o="");let a=ho(r,"apiFramework");a||(a="");const u=Kc(r,"Linear")[0];let c;if(u)try{c=t.CGt(u,"inline",i,e,s)}catch(t){}const l=Kc(r,"NonLinearAds")[0];let d,f;if(l)try{f=t.OGt(l,i,e),d=f}catch(t){}const _=Kc(r,"CompanionAds")[0];let g;_&&(g=t.jGt(_));const w=Kc(r,"UniversalAdId"),A=t.parseUniversalAdIds(w);n.push(new aJ(i,o,h,a,c,d,g,A))}return n}static CGt(i,e,s,n,r){const h=Kc(i,"Duration")[0];let o=0;if(h)o=WK(h.textContent)||0;else if(!h&&"inline"===e)throw new bi(ze.PARSING,qe.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const a=ho(i,"skipoffset");let u=-1;if(a){let t=WK(a);if(void 0===t&&a.indexOf("%")>-1){const i=S.abs(Number(a.replace(/(?![0-9])./g,"")))/100;M(i)||(t=o*i)}void 0!==t&&(u=t)}const c=Kc(i,"MediaFiles")[0];let l=[];if(c&&(l=function(t,i){const e=[];for(const s of Kc(t,"MediaFile")){const t=ho(s,"delivery"),n=ho(s,"type");if(!n){mr();continue}if(!i(n))continue;let r=Ba(ho(s,"width")),h=Ba(ho(s,"height"));r||(mr(),r=0),h||(mr(),h=0);const o={delivery:t,type:n,width:r,height:h,contentURL:""+s.textContent};e.push(o)}return e}(c,bJ)),"inline"===e&&(!c||0===l.length))throw LJ(_t.oGt,r),new bi(ze.PARSING,qe.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const d=Kc(i,"TrackingEvents")[0];let f=[];d&&(f=t.zGt(d,wJ,"linear"));const _=Kc(i,"VideoClicks")[0],g=t.PGt(_);return new uJ(o,l,f,g,u,s,n)}static PGt(i){if(!i)return new Ur("","",[],[]);const e=Kc(i,"ClickThrough")[0];let s,n="";e&&(s=e.textContent||void 0,n=ho(e,"id")||"");const r=t.BGt(Kc(i,"ClickTracking")),h=t.BGt(Kc(i,"CustomClick"));return new Ur(s,n,r,h)}static BGt(t){const i=[];for(const e of t){const t=e.textContent;if(!t)continue;const s=ho(e,"id")||"";i.push(new rJ(s,t))}return i}static zGt(t,i,e){const s=[];for(const n of Kc(t,"Tracking")){const r=ho(n,"event");if(!i(r)){mr();continue}let h="";"linear"===e&&(h=ho(t,"offset")||"0");const o=n.textContent;o&&s.push(new MJ(r,h,o))}return s}static OGt(i,e,s){const n=[];for(const r of Kc(i,"NonLinear")){const i=Kc(r,"NonLinearClickThrough")[0];let h;i&&(h=i.textContent||void 0);const o=t.BGt(Kc(r,"NonLinearClickTracking")),a=Kc(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=ho(a,"creativeType"),i=a.textContent||"",e=Kc(a.parentNode,"NonLinearClickThrough")[0];let s="";e&&(s=e.textContent||""),u=new NJ(i,t,s,"")}const c=Kc(r,"IFrameResource")[0];let l;if(c){const t=c.textContent;l=new DJ(t)}const d=Kc(r,"HTMLResource")[0];let f;if(d){const t=d.textContent;f=new IJ(t)}if(!u&&!l&&!f){mr();continue}const _=new Ur(h,"",o,[]);n.push(new eJ(u,l,f,_,e,s))}if(0===n.length)throw new bi(ze.PARSING,qe.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=Kc(i,"TrackingEvents")[0];let h=[];return r&&(h=t.zGt(r,vJ,"nonlinear")),new iJ(n,h)}static parseUniversalAdIds(t){const i=[];for(const r of t){var e;const t=null!=(e=ho(r,"idRegistry"))?e:"";var s,n;const h=null!=(n=null!=(s=ho(r,"idValue"))?s:r.textContent)?n:"";i.push(new xJ(t,h))}return i}static jGt(i){let e=ho(i,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(e)||(e=tJ.uB);const s=[];for(const e of Kc(i,"Companion")){let i=Ba(ho(e,"width")),n=Ba(ho(e,"height")),r=ho(e,"id"),h=Ba(ho(e,"assetWidth")),o=Ba(ho(e,"assetHeight")),a=Ba(ho(e,"expandedWidth")),u=Ba(ho(e,"rxpandedHeight")),c=ho(e,"apiFramework"),l=ho(e,"adSlotId"),d=Ba(ho(e,"pxratio"));const f=Kc(e,"AltText")[0];let _=f?f.textContent:"";i||(mr(),i=0),n||(mr(),n=0),r||(r=""),h||(h=0),o||(o=0),a||(a=0),u||(u=0),c||(c=""),l||(l=""),d||(d=1),_||(_="");const g=t.RGt(e),w=t.UGt(e),A=t.parseHtmlResource(e),v=Kc(e,"TrackingEvents")[0];let m=[];v&&(m=t.zGt(v,pJ,"companion"));const p=Kc(e,"CompanionClickThrough")[0];let y;p&&(y=p.textContent||void 0);const M=t.BGt(Kc(e,"CompanionClickTracking"));(g||w||A)&&s.push(new nJ(i,n,r,h,o,a,u,c,l,d,g,w,A,new Ur(y,"",M,[]),m,_))}return new sJ(e,s)}static RGt(t){const i=Kc(t,"StaticResource")[0];let e;if(i&&i.parentNode){let t=ho(i,"creativeType");t||(t="");const s=i.textContent,n=Kc(i.parentNode,"AltText")[0],r=Kc(i.parentNode,"CompanionClickThrough")[0];let h,o="";n&&(o=n.textContent||""),r&&(h=r.textContent||void 0),s&&(e=new NJ(s,t,h,o))}return e}static UGt(t){const i=Kc(t,"IFrameResource")[0];let e;if(i){const t=i.textContent;e=new DJ(t)}return e}static parseHtmlResource(t){const i=Kc(t,"HTMLResource")[0];let e;if(i){const t=i.textContent;e=new IJ(t)}return e}async EGt(i,e,s){const n=ho(i,"timeOffset")||"0",r=ho(i,"breakType");let h=ho(i,"breakId"),o=va(ho(i,"repeatAfter"));if(void 0===h&&(h=""),void 0===o&&(o=!1),!(void 0!==kc.QGt(n)))throw new bi(ze.PARSING,qe.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=Kc(i,"AdSource")[0],u=Kc(i,"TrackingEvents")[0];let c=[];u&&(c=t.zGt(u,_J,"vmap"));let l=ho(a,"id");l||(l="");let d=va(ho(a,"allowMultipleAds"));void 0===d&&(d=!0);let f=va(ho(a,"followRedirects"));f||(f=!0);const _=Kc(a,"AdTagURI")[0];let g="";const w=Kc(a,"VASTAdData")[0];if(!_||!_.textContent){if(w){if(w.firstElementChild&&lJ(w.firstElementChild,"VAST")){const t=await this.TGt(w.firstElementChild,s,!1);if(t){const i=new Ju(l,d,f,t);return new jJ(n,i,r,h,c,o,!1,e)}return}throw new bi(ze.PARSING,qe.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new bi(ze.PARSING,qe.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{g=_.textContent;const t=JSON.parse(JSON.stringify(e));return t.sources.src=g,new zJ(n,t,s)}catch(t){return}}};!function(t){t.wGt="linear",t.FGt="nonlinear",t.YGt="display"}(CJ||(CJ={}));var OJ,kc=class{static GGt(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static WGt(t){}static VGt(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static HGt(t){const i=t.split(":");let e=0;return e+=3600*Number(i[0]),e+=60*Number(i[1]),e+=Number(i[2]),e}static qGt(t){if(t<=0)return"00:00:00.000";const i=S.floor(t),e=t-i;return this.XGt(i/3600,2)+":"+this.XGt(i/60%60,2)+":"+this.XGt(i%60,2)+"."+this.XGt(1e3*e,3)}static XGt(t,i){return("00"+S.floor(t)).slice(-i)}static ZGt(t,i){const e=this.QGt(t);if(0===e)switch(t){case"start":return 0;case"end":return-1}else{if(2===e)return VK(t)*i;if(1===e)return WK(t);if(3===e)return this.VGt(t);if(4===e){const i=Number(t);if(!M(i)&&i>=-1)return i}}}static QGt(t){return"start"===t||"end"===t?0:void 0!==WK(t.toString())?1:void 0!==VK(t.toString())?2:void 0!==this.WGt(t.toString())?3:M(t)?void 0:4}};!function(t){t[t.g5=0]="g5",t[t.KGt=1]="KGt",t[t.JGt=2]="JGt",t[t.$Gt=3]="$Gt",t[t.tWt=4]="tWt"}(OJ||(OJ={}));var jJ=class{get iWt(){return this.eWt}get sSt(){return this.sWt}get MYt(){return this.TYt}set MYt(t){this.TYt=t}get rFt(){return this.YFt}get nWt(){return this.rWt}get hWt(){return this.oWt}get aWt(){return this.uWt}get cWt(){return this.IGt.Ll}get G(){return!0}En(){return Promise.resolve(this)}get IGt(){return this.lWt}set IGt(t){this.lWt=t}constructor(t,i,e,s,n,r,h,o){this.TYt=-1,this.eWt=i,this.sWt=t,this.dWt=e,this.rWt=s,this.oWt=r,this.YFt=n,this.fWt=h,this.uWt=o,this.lWt=null}},zJ=class{get iWt(){return this.gFt.iWt}get sSt(){return this.gFt.sSt}get MYt(){return this.gFt.MYt}set MYt(t){this.gFt.MYt=t}get rFt(){return this.gFt.rFt}get nWt(){return this.gFt.nWt}get hWt(){return this.gFt.hWt}get aWt(){return this.gFt.aWt}get cWt(){return this.gFt.cWt}get G(){return Boolean(this._Wt)}async En(t){return this._Wt||(this._Wt=(new Gu).DGt(this.aWt,this.sSt,this.IGt,this.LS),this.gFt=await this._Wt,t()),this._Wt}get IGt(){return this.gFt.IGt}set IGt(t){this.gFt.IGt=t}constructor(t,i,e){this.LS=e,this.gFt=new jJ(t,null,null,"",[],!1,!1,i)}},Ju=class{get u(){return this.ym}get hYt(){return this.gWt}get wWt(){return this.AWt}get LQt(){return this.vWt}constructor(t,i,e,s){this.ym=t,this.gWt=i,this.vWt=s,this.AWt=e}};function PJ(t){return"vmap"===t||"adrule"===t}function BJ(t){if(t)return ji(t)?{src:hs(t),type:void 0}:function(t){return Uo(t)&&Boolean(t.src)}(t)?{src:hs(t.src),type:RJ(t.type)}:void 0}function RJ(t){if(ji(t)){const i=t.toLowerCase();switch(i){case"vast":case"vmap":case"adrule":return i;default:return void Ii("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||Ii("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function UJ(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return GK.test(t)}(t))return kc.HGt(t);if(QJ(t))return t}return Number(t)>=0?Number(t):void 0}}function QJ(t){return new RegExp(/^\d{1,2}%$/).test(t)}function FJ(t){const i=[],e=(t,s)=>{if(Gr(s))for(let i=0,n=s.length;i<n;i++){const n=Uo(s[i])&&s[i]?String(i):"";e(t+"["+encodeURIComponent(n)+"]",s[i])}else if(Uo(s))for(const i of C.keys(s))e(t+"["+encodeURIComponent(i)+"]",s[i]);else((t,e)=>{i.push(t+"="+encodeURIComponent(null!=e?e:""))})(t,String(s))};for(const i of C.keys(t))e(encodeURIComponent(i),t[i]);return i.join("&")}r();var YJ=class t{get mWt(){return this.pWt}get yWt(){return this.MWt}get TWt(){return this.NWt}DWt(t){const i=this.IWt===t.timeOffset;return!this.SWt&&i}get EWt(){return this.bWt}get LWt(){return QJ(this.kWt)&&!this.SWt}get IWt(){return this.kWt}get Ll(){return this.xWt}CWt(){if(M(this.xWt)){let t=this.IWt;if(void 0===t)return void(this.xWt=0);"string"==typeof t&&QJ(t)&&(M(this.Qo.lt)||this.Qo.lt===1/0||(t=VK(t)*this.Qo.lt)),M(t)||(this.xWt=t)}}get OWt(){return this.jWt}set OWt(t){this.jWt=t}get zWt(){return this.PWt}set zWt(t){this.PWt=t,this.BWt=!1}get RWt(){return this.UWt}QWt(t){this.UWt.push(t)}FWt(){if(!this.SWt){let t,i;const e=this.MWt===Xo.OUt&&void 0===this.YWt&&1===this.mWt.length;PJ(this.mWt[0].type)||e?t=this.mWt[0].src:i=this.GWt(),this.SWt={WWt:this.Qo._e.offsetWidth,VWt:this.Qo._e.offsetHeight,HWt:this.Qo._e.offsetWidth,qWt:this.Qo._e.offsetHeight,XWt:this.i9,ZWt:this.$B,KWt:t,JWt:i,$Wt:this.tVt}}return this.SWt}GWt(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.mWt.map((t=>this.iVt(t))).join("\n")+"</vmap:VMAP>"}iVt(t){return'<vmap:AdBreak timeOffset="'+this.eVt()+'" breakType="linear,nonlinear" breakId="midroll"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:AdTagURI templateType="vast3"><![CDATA['+t.src+"]]></vmap:AdTagURI></vmap:AdSource></vmap:AdBreak>"}eVt(){if(0===this.IWt)return"start";if(this.IWt===1/0)return"end";const t=this.IWt;if("string"==typeof t&&QJ(t)){const i=VK(t)*this.Qo.lt;return kc.qGt(i)}return kc.qGt(this.IWt||0)}sVt(t){this.pWt.push(t)}static nVt(t){if(void 0!==t)return-1===t?1/0:t}rVt(){this.bWt=!0}get fm(){return this.i9}set fm(t){this.i9=t}get Q_(){return this.$B}set Q_(t){this.$B=t}constructor(i,e,s,n,r,h){this.MWt=s,this.Qo=n,this.NWt=r,this.xWt=NaN,this.jWt=!1,this.PWt=!1,this.bWt=!1,this.UWt=[],this.i9=!1,this.$B=!1,this.pWt=[],this.YWt=e,this.kWt=t.nVt(e),this.CWt(),this.pWt.push(i),this.tVt=h}};r();var GJ,WJ=class{get hVt(){return this.oVt.hVt}get aVt(){return this.oVt.aVt}get AQt(){return this.oVt.AQt}get h(){return this.oVt.h}qUt(t){this.uVt=t}cVt(t){return!(this.hVt&&!this.hVt.EWt&&"nonlinear"!==this.aVt.lVt)||this.hVt.Ll>t.Ll&&this.hVt.Ll!==t.Ll}dVt(t){if(t.length)return t.sort(((t,i)=>t.Ll-i.Ll))[0]}fVt(){if(this.AQt.length)return this.dVt(this._Vt(this.h.I_))}gVt(){if(!(void 0!==this.uVt&&this.uVt>=0))return this.AQt.filter((t=>!t.OWt&&0===t.Ll&&t!==this.hVt))[0]}_Vt(t){if(!this.wVt&&(this.wVt=!this.AQt.some((t=>M(t.Ll))),!this.wVt))return[];const i=this.AQt.filter((i=>!i.OWt&&!M(i.Ll)&&t<=i.Ll));return void 0===this.uVt?i:i.filter((t=>void 0===t.IWt||t.Ll>this.uVt))}constructor(t){this.wVt=!1,this.oVt=t,this.uVt=void 0}};!function(t){t[t.AVt=0]="AVt",t[t.vVt=1]="vVt",t[t.mVt=2]="mVt"}(GJ||(GJ={}));var To,VJ,Ta,HJ,qJ=class{zg(){this.ko=!0,this.pVt&&this.yVt()}MVt(t,i){this.TVt(t,i);const e=xe(this.AQt,(i=>i.DWt(t)));if(e)e.sVt(t.sources);else{const e=void 0===t.replaceContent||t.replaceContent,s=new YJ(t.sources,t.timeOffset,i,this.Qo,e,t.omidAccessModeRules);this.NVt.push(s),2===this.DVt&&this.SVt.IVt(s.Ll,s,s.IWt),this.EVt(i,s)}}get aVt(){return this.bVt}get AQt(){return this.NVt}get h(){return this.Qo}get LVt(){return Boolean(this.sAt)}get DVt(){return this.kVt}xVt(){if(Hc(this.AQt,this.hVt),this.hVt){for(const t of this.hVt.RWt)this.SVt.CVt();this.hVt=void 0}}OVt(){for(const t of this.NVt)for(const i of t.RWt)this.SVt.jVt(i,!0);sr(this.NVt)}async zVt(t){this.xVt(),this.PVt=!0,this.hVt=t,this.BVt=t.Ll,this.sAt=this.RVt(t),await this.sAt,this.sAt=void 0}async RVt(t){this.UVt(t);const i=t.FWt(),e=this.bVt.QVt(i);t.OWt=!0;try{await e,t.yWt===Xo.CUt&&await this.bVt.FVt()}catch(t){0,this.hVt=void 0,await this.yVt()}}UVt(t){this.ko?t.fm=!0:t.fm=this.sQt.fm,t.Q_=this.sQt.Q_}YVt(){var t;return null!=(t=this.GVt.gVt())?t:this.GVt.fVt()}async yVt(){if(this.hVt&&!this.hVt.EWt)return this.sAt;const t=this.YVt();t&&await this.zVt(t)}get hVt(){return this.WVt}set hVt(t){this.WVt=t}get PVt(){return this.VVt}set PVt(t){this.VVt=t}Gn(){this.xVt(),sr(this.NVt),this.BVt=0,this.hVt=void 0,this.sAt=void 0,this.PVt=!1}zWt(){this.PVt=!1,this.hVt&&(this.hVt.zWt=!0)}async EVt(t,i){t===Xo.CUt&&this.ko&&this.GVt.cVt(i)&&!this.LVt&&"linear"!==this.bVt.lVt&&(!this.hVt||this.hVt&&this.hVt.OWt)&&(await Promise.resolve(),await this.zVt(i))}rVt(){this.hVt&&this.hVt.rVt()}get HVt(){if(this.LVt||this.PVt)return!1;if(this.hVt&&!this.hVt.EWt)return!1;return!!this.NVt.filter((t=>this.hVt!==t)).length&&Boolean(this.YVt())}async qVt(){if(!this.HVt)return void 0;const t=this.YVt();t&&await this.zVt(t)}TVt(t,i){const e=t.sources.type,s=i===Xo.OUt&&void 0===t.timeOffset,n=PJ(e)||s?1:2;n!==this.kVt&&(this.kVt=n,this.OVt(),this.bVt.XVt&&!this.LVt&&"linear"!==this.bVt.lVt&&(this.bVt.XVt.Hf(),this.hVt=void 0,this.sAt=void 0),this.BVt=0,this.pVt=!0)}qUt(t){this.GVt.qUt(t)}ln(){this.Qo.hn(t.yA,this.iQ)}constructor(i,e,s,n,r){this.kVt=0,this.sAt=void 0,this.VVt=!1,this.iQ=()=>{const t=this.NVt.filter((t=>t.LWt));for(const i of t){i.CWt();const t=i.IWt;this.SVt.ZVt(t,i.Ll)}this.ko&&this.HVt&&this.yVt()},this.NVt=[],this.bVt=i,this.ko=!1,this.pVt=!1,this.Qo=e,this.sQt=s,this.hVt=void 0,this.BVt=0,this.GVt=new WJ(this),this.s9=n,this.SVt=r,this.Qo.dn(t.yA,this.iQ)}};function XJ(t){const i=t.getAdPodInfo();let e;try{e={KVt:i.getAdPosition(),JVt:i.getMaxDuration(),$Vt:i.getPodIndex(),sSt:i.getTimeOffset(),tHt:i.getTotalAds(),iHt:i.getIsBumper()}}catch(t){e=void 0}const s=t.getUniversalAdIds(),n=[];for(const t of s)n.push({eHt:t.getAdIdRegistry(),sHt:t.getAdIdValue()});const r=new google.ima.CompanionAdSelectionSettings;r.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,r.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,r.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE;const h=t.getCompanionAds(0,0,r),o=[];for(const t of h)o.push({PFt:t.getAdSlotId(),_P:t.getContentType(),V:t.getContent(),Mi:t.getHeight(),Ti:t.getWidth()});var a,u,c;return{cYt:t.getAdId(),JQt:t.getAdSystem(),nHt:t.getAdvertiserName(),jFt:null!=(a=t.getApiFramework())?a:void 0,HQt:o,_P:null!=(u=t.getContentType())?u:void 0,wFt:t.getCreativeId(),rHt:t.getCreativeAdId(),hHt:t.getDealId(),dN:t.getDescription(),lt:t.getDuration(),Ti:t.getWidth(),Mi:t.getHeight(),oHt:null!=(c=t.getMediaUrl())?c:void 0,aHt:t.getMinSuggestedDuration(),uHt:t.getSkipTimeOffset(),cHt:t.getSurveyUrl(),vP:t.getTitle(),lHt:t.getTraffickingParameters(),dHt:t.getTraffickingParametersString(),fHt:t.getUiElements(),ZQt:n,_Ht:t.getVastMediaBitrate(),gHt:t.getVastMediaHeight(),wHt:t.getVastMediaWidth(),AHt:t.getWrapperAdIds(),vHt:t.getWrapperAdSystems(),mHt:t.getWrapperCreativeIds(),pHt:t.isLinear(),yHt:e}}function ZJ(t,i){if(t===To.MHt){const t=i;return{THt:t.adBreakDuration,KVt:t.adPosition,I_:t.currentTime,lt:t.duration,tHt:t.totalAds}}return i}function KJ(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return HJ.NHt;case google.ima.AdError.Type.AD_PLAY:return HJ.DHt}}function JJ(t){return Uo(t)&&function(t){return"function"==typeof t}(t.getVastErrorCode)}function $J(t){const i=t.getInnerError(),e=i&&JJ(i)?$J(i):void 0;return{Yb:t.getMessage(),KUt:t.getErrorCode(),IHt:t.getVastErrorCode(),$w:KJ(t.getType()),SHt:e}}function t$(t){return oe(t)?t:{}}r(),r(),function(t){t.EHt="contentResumeRequested",t.bHt="contentPauseRequested",t.LHt="click",t.yA="durationChange",t.kHt="expandedChanged",t.xHt="start",t.CHt="impression",t.Dv="pause",t.OHt="resume",t.MHt="adProgress",t.jHt="adBuffering",t.zHt="firstQuartile",t.zYt="midpoint",t.PHt="thirdQuartile",t.PYt="complete",t.BHt="userClose",t.RHt="linearChanged",t.UHt="loaded",t.QHt="adCanPlay",t.FHt="adMetadata",t.YHt="adBreakReady",t.GHt="interaction",t.WHt="allAdsCompleted",t.VHt="skip",t.HHt="skippableStateChanged",t.qHt="log",t.XHt="viewableImpression",t.ZHt="volumeChange",t.KHt="mute"}(To||(To={})),r(),(VJ||(VJ={})).JHt="adError",r(),function(t){t[t.$Ht=-1]="$Ht",t[t.tqt=-1]="tqt",t[t.iqt=-1]="iqt",t[t.eqt=101]="eqt",t[t.sqt=102]="sqt",t[t.nqt=200]="nqt",t[t.rqt=201]="rqt",t[t.hqt=202]="hqt",t[t.oqt=300]="oqt",t[t.aqt=301]="aqt",t[t.uqt=302]="uqt",t[t.cqt=303]="cqt",t[t.lqt=400]="lqt",t[t.dqt=402]="dqt",t[t.fqt=403]="fqt",t[t._qt=405]="_qt",t[t.gqt=500]="gqt",t[t.wqt=501]="wqt",t[t.Aqt=-1]="Aqt",t[t.vqt=503]="vqt",t[t.mqt=602]="mqt",t[t.pqt=900]="pqt",t[t.yqt=901]="yqt",t[t.Mqt=1005]="Mqt",t[t.Tqt=1007]="Tqt",t[t.Nqt=1009]="Nqt",t[t.Dqt=1010]="Dqt",t[t.Iqt=1011]="Iqt",t[t.Sqt=1012]="Sqt",t[t.Eqt=1013]="Eqt",t[t.bqt=1020]="bqt",t[t.Lqt=1021]="Lqt",t[t.kqt=1101]="kqt",t[t.xqt=1204]="xqt",t[t.Cqt=1205]="Cqt",t[t.Oqt=1300]="Oqt",t[t.jqt=-1]="jqt",t[t.zqt=-1]="zqt",t[t.Pqt=-1]="Pqt",t[t.Bqt=-1]="Bqt"}(Ta||(Ta={})),function(t){t.NHt="adLoadError",t.DHt="adPlayError"}(HJ||(HJ={})),r(),r();var ft,i$=class extends i{Rqt(t){this.bVt.jo(t)}Uqt(t){this.Qqt=t,this.Qqt.dn(VJ.JHt,this.Fqt),this.Qqt.dn(To.bHt,this.Yqt),this.Qqt.dn(To.EHt,this.Gqt),this.Qqt.dn(To.WHt,this.Wqt),this.Qqt.dn(To.xHt,this.Vqt),this.Qqt.dn(To.PYt,this.Hqt),this.Qqt.dn(To.VHt,this.qqt),this.Qqt.dn(To.BHt,this.Xqt),this.Qqt.dn(To.LHt,this.Zqt),this.Qqt.dn(To.QHt,this.Kqt),this.Qqt.dn(To.Dv,(()=>{this.bVt.V_||(this.bVt.V_=!0,this.bVt.jo(new bs(this.bVt.I_))),this.Jqt(!0)})),this.Qqt.dn(To.OHt,(()=>{this.bVt.V_&&(this.bVt.V_=!1,this.bVt.jo(new ih(this.bVt.I_)))})),this.Qqt.dn(To.KHt,(()=>{const i=t.Tg();i>=0&&this.$qt(i)})),this.Qqt.dn(To.ZHt,(()=>{const i=t.Tg();i>=0&&this.$qt(i)})),this.Qqt.dn(To.FHt,(t=>{this.iXt.tXt(t.type)})),this.Qqt.dn(To.yA,(t=>{t.eXt&&this.sXt(t.eXt.lt)})),this.Qqt.dn(To.qHt,(async t=>{const i=t.nXt.adError,e=JJ(i)?$J(i):void 0;e&&(this.rXt(e)?await this.hXt(t):this.oXt(e)?await this.aXt(e):this.uXt(e)&&this.cXt(e))})),this.Qqt.dn(To.UHt,(t=>{if(t.eXt&&(this.bVt.zWt(),this.iXt.lXt(t.eXt),this.dXt=0,t.eXt.pHt)){var i;const t=this.bVt.og,e=he.Rv;this.bVt.og=e;const s=this.bVt.I_,n=this.bVt.og;n!==t&&this.Rqt(new Fo(s,n)),null==(i=this.Qqt)||i.Ng(this.bVt.fXt()),this.Rqt(new as(s,e))}})),this.Qqt.dn([To.jHt,To.CHt,To.zHt,To.zYt,To.PHt],(t=>{t.eXt&&this.iXt._Xt(t.eXt,t.type,this.bVt.I_)})),this.Qqt.dn(To.zHt,this.gXt),this.Qqt.dn(To.MHt,this.wXt)}async switchToPlayerIfNoNextAd(){if(this.Qqt){const t=this.Qqt.AXt();t&&this.vXt(t)||(this.bVt.HVt()?await this.bVt.qVt():(this.bVt.mXt(),this.sQt.V_&&!this.sQt.L_&&this.sQt.Bg()))}else if(this.bVt.HVt())await this.bVt.qVt();else{const t=this.sQt.V_;this.bVt.mXt(),t||this.Qo.Bg()}}vXt(t){const i=t.yHt,e=null==i?void 0:i.tHt;return(null==i?void 0:i.KVt)!==e}QJ(){this.bVt.gc&&(w(this.bVt.gc),this.bVt.gc=null)}uXt(t){return t.$w===HJ.NHt}oXt(t){return t.$w===HJ.DHt}rXt(t){return t.KUt===Ta.Nqt}async aXt(t){var i;this.cXt(t);const e=[Ta.lqt,Ta.yqt,Ta.Lqt,Ta.Cqt];var s;this.bVt.pXt||ks(e,t.KUt)||ks(e,null==(i=t.SHt)?void 0:i.KUt)||(this.bVt.yXt.PVt=!1,null==(s=this.bVt.yXt.hVt)||s.rVt(),await this.switchToPlayerIfNoNextAd())}cXt(t){this.bVt.MXt(t)}async TXt(){this.iXt.CVt(),this.bVt.rVt(),"nonlinear"===this.bVt.lVt&&(this.iXt.NXt(-1,!1),this.bVt.DXt(void 0)),"nonlinear"!==this.bVt.lVt&&"none"!==this.bVt.lVt||this.bVt.HVt()&&await this.bVt.qVt(),await this.bVt.IXt(),this.sQt.Ew===this.bVt?this.bVt.NQt():this.SXt()&&this.Qo.jo(new Ki(this.Qo.I_))}SXt(){return this.bVt.EXt&&!this.bVt.bXt&&this.sQt.L_}setCountdownTimer(){this.QJ(),this.bVt.gc=b((()=>this.Jqt()),250)}async hXt(t){void 0!==t.eXt&&(this.bVt.yXt.PVt=!1,this.bVt.rVt(),this.bVt.HVt()?await this.bVt.qVt():this.bVt.V_=!0)}sXt(t){this.bVt.lt!==t&&t>=0&&(this.bVt.lt=t,this.Rqt(new jn(this.bVt.lt)))}$qt(t){this.bVt.fXt()!==t&&(0===t?this.bVt.LXt(t,!0,!1):this.bVt.LXt(t,!1,!1))}async kXt(){this.bVt.xXt&&this.Qo.dt&&(this.CXt=new Z_,await this.Qo.Zh(this.Qo.$a(),this.CXt.$f),this.OXt&&(this.Qo.I_=this.OXt),this.OXt=void 0)}Jqt(t){if(this.Qqt){const t=this.Qqt.jXt();t>this.bVt.lt&&this.sXt(S.round(t))}const i=this.bVt.I_;(t||!this.bVt.V_&&i!==this.bVt.zXt)&&(this.bVt.jo(new bl(i,void 0)),this.bVt.zXt=i)}Gn(){this.CXt&&(this.CXt.i_(),this.CXt=void 0),this.PXt=!1,this.dXt=0}ln(){this.Gn(),this.Uo()}constructor(t,i,e,s){super(),this.bVt=t,this.Qo=i,this.sQt=e,this.iXt=s,this.PXt=!1,this.CXt=void 0,this.OXt=void 0,this.dXt=0,this.gXt=t=>{if(!t.eXt||!t.eXt.yHt)return;const i=t.eXt.yHt;this.iXt.BXt(i.sSt,i.tHt,i.JVt)},this.wXt=t=>{var i,e,s;if(this.dXt>=5)return;this.dXt++;const n=t.nXt;if(!function(t){return Uo(t)&&void 0!==t.THt&&void 0!==t.tHt}(n))return;const r=null==(i=null==(e=this.Qqt)?void 0:e.AXt())||null==(s=i.yHt)?void 0:s.sSt;void 0!==r&&this.iXt.BXt(r,n.tHt,n.THt)},this.Fqt=async t=>{t.nXt.RXt&&await this.aXt(t.nXt.RXt)},this.Wqt=async()=>{this.PXt=!0,await this.Gqt()},this.Vqt=t=>{if(!t.eXt)return;const i=t.eXt;this.bVt.DXt(i),this.bVt.ye(),this.bVt.UXt(),this.iXt.QXt(i);const e=i.lt;if(this.sXt(e),i.pHt){const t=this.bVt.I_,i=this.bVt.og;this.bVt.og=he.Qv,this.Rqt(new js(t,i)),this.Rqt(new E(t,i)),this.Rqt(new us(t,i)),this.bVt.V_||this.Rqt(new Kr(this.bVt.I_)),this.setCountdownTimer(),this.Jqt(!0)}else this.bVt.NQt(),this.Qo.ye(),this.bVt.V_||this.Qo.Bg()},this.Hqt=t=>{var i;if(!t.eXt)return;const e=t.eXt;if(this.QJ(),this.iXt.NXt(this.bVt.lt,e.pHt),this.bVt.og!==he.Rv){const t=he.Rv;this.bVt.og=t;const i=this.bVt.I_;this.Rqt(new Fo(i,t))}this.sXt(NaN),this.bVt.FXt=!1,null==(i=this.Qqt)||i.Ng(this.bVt.fXt()),this.bVt.rVt()},this.qqt=t=>{t.eXt&&(this.Hqt(t),this.iXt.qqt(t.eXt,this.bVt.I_,this.bVt.lt))},this.Xqt=t=>{t.eXt&&(this.iXt.NXt(-1,t.eXt.pHt),this.bVt.rVt(),!t.eXt.pHt&&this.bVt.HVt()&&this.bVt.qVt())},this.Zqt=t=>{t.eXt&&(t.eXt.pHt?this.bVt.Pg():this.Qo.Pg())},this.Kqt=()=>{var t;(this.bVt.FXt=!0,this.bVt.YXt)&&(null==(t=this.Qqt)||t.Pg(),this.bVt.YXt=!1)},this.Yqt=t=>{var i;if(!t.eXt)return;this.bVt.xXt&&(this.OXt=this.Qo.I_,this.Qo.Yg(),this.Qo.Sg=!0),this.bVt.GXt=!0;const e=t.eXt;this.iXt.bd(e);const s=e.lt;this.bVt.DXt(e),this.sXt(s),this.bVt.V_=!1,this.bVt.ye(),this.bVt.yQt(),this.bVt.xXt||this.Qo.we(),this.Qo.Pg(),this.bVt.WXt(e);0===(null==(i=e.yHt)?void 0:i.sSt)||this.bVt.jo(new tc(this.bVt.I_))},this.Gqt=async t=>{const i=null==t?void 0:t.eXt;this.bVt.GXt=!1,"linear"===this.bVt.lVt&&this.iXt.wd(),i&&i.lt>=0&&this.sXt(i.lt),this.Qo.lt===1/0&&this.bVt.VXt(),this.bVt.FXt=!1,this.PXt&&await this.TXt(),this.bVt.V_=!0;try{await this.kXt()}catch(t){return void(Er(t)||this.jo(new OX(t)))}if(this.bVt.NQt(),this.bVt.we(),this.Qo.L_||this.Qo.Bg(),i&&this.bVt.DXt(i),this.bVt.EXt){if(this.bVt.xXt){var e;const t=this.Qo.Cg(),i=null==(e=this.Qo.wt)?void 0:e.src;t&&i&&(t.src=i)}this.bVt.bXt=!0}this.Qo.Sg=!1,this.bVt.HVt()&&await this.bVt.qVt()}}};r(),function(t){t.HXt="theo",t.qXt="google-ima",t.Jh="google-dai",t.XXt="freewheel",t.MEDIATAILOR="mediatailor"}(ft||(ft={})),r(),r(),r();var e$=class{get Pc(){return this.Sc}get JVt(){return this.ZXt}set JVt(t){this.ZXt=t}get KXt(){return this.JXt}set KXt(t){this.JXt=t}set sSt(t){this.sWt=t}get sSt(){return this.sWt}$Xt(){this.tZt=!0}iZt(t){this.Sc.push(t)}get K_(){return this.tZt}eZt(){return this.Oa||(this.Oa=function(t){return{get ads(){return t.Pc.map((t=>t.eZt()))},get maxDuration(){return t.JVt},get maxRemainingDuration(){return t.KXt},get timeOffset(){return t.sSt},get integration(){return t.sZt}}}(this)),this.Oa}constructor(t,i,e){this.ZXt=t,this.JXt=i,this.sWt=e,this.Sc=[],this.tZt=!1}};var s$=class extends e${get sZt(){return ft.qXt}get nZt(){return this.rZt}constructor(t,i){super(-1,-1,t),this.rZt=i}};r(),r();var Wu=class extends Js{constructor(t,i){super(t),this.Ol=i}},Ru=class extends d{get ad(){return this.adBreak}constructor(t,i){super(t),this.adBreak=i}},n$=class extends Wu{Qh(){return new r$(this.Ol.eZt())}constructor(t){super("hZt",t)}},r$=class extends Ru{constructor(t){super("addadbreak",t)}};r();var h$=class extends Wu{Qh(){return new o$(this.Ol.eZt())}constructor(t){super("oZt",t)}},o$=class extends Ru{constructor(t){super("removeadbreak",t)}};r(),r(),r(),r();var Vr,a$,Dr=class t{aZt(i){if(!i||!i.G)return[];const e=t.uZt(i),s=[];if(e){let t=e.bc();const n=[];for(;void 0!==t;)t.HQt&&n.push(...t.HQt.DFt),t.WQt&&(s.push(new Qh(t.WQt,n,i,new za(this.nQt,this.Qo),t.ZQt).eZt()),sr(n)),t.XQt&&s.push(new Hr(t.XQt.sFt[0],n,i,new za(this.nQt,this.Qo),t.ZQt).eZt()),t=e.bc()}return s}static uZt(t){var i,e;return null==(i=t.iWt)||null==(e=i.LQt)?void 0:e.PQt()}constructor(t,i){this.nQt=t,this.Qo=i}},za=class{get XVt(){return this.Qqt}get h(){return this.Qo}constructor(t,i){this.Qqt=t,this.Qo=i}},u$=class{eZt(){const t=[],i=this;for(const i of this.gFt.IGt.cZt){const e=this.lZt(i);if(e)for(;e.bc();){const i=e.xQt;if(i){let e=[];i.HQt&&(e=i.HQt.DFt),i.WQt&&t.push(new Qh(i.WQt,e,this.gFt,this.dZt,i.ZQt)),i.XQt&&i.XQt.sFt.forEach((s=>{t.push(new Hr(s,e,this.gFt,this.dZt,i.ZQt))}))}}}return{maxDuration:i.yd(),timeOffset:i.sSt,get maxRemainingDuration(){return i.KXt},ads:t.map((t=>t.eZt())),integration:ft.HXt}}get sSt(){const t=this.gFt.IGt.Ll;return t>=0?t:this.dZt.h.lt}get KXt(){let t=0;return this.gFt.IGt.cZt.forEach((i=>{const e=this.lZt(i);e&&(t+=this.fZt(e))})),this.dZt&&this.dZt.XVt&&(t+=this.dZt.XVt.lt-this.dZt.XVt.I_),t}fZt(t){let i=0,e=t.bc();for(;void 0!==e;)e.WQt&&!e.WQt.NYt&&(i+=e.WQt.lt),e=t.bc();return i}yd(){let t=0;for(const i of this.gFt.IGt.cZt){const e=this.lZt(i);if(e){let i=e.bc();for(;void 0!==i;)i.WQt&&(t+=i.WQt.lt),i=e.bc()}}return t}lZt(t){return Dr.uZt(t)}constructor(t,i){this.gFt=t,this.dZt=i}},c$=class{},l$={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},d$=class extends c${_Zt(t){return qr({},l$,{resourceURI:t.tGt||""})}gZt(t){return qr({},l$,{contentHTML:t.tGt.trim(),type:"HTMLResource"})}wZt(t){var i,e;return qr({},l$,{clickThrough:(null==(i=t.VFt)?void 0:i.trim())||"",resourceURI:(null==(e=t.tGt)?void 0:e.trim())||"",altText:t.GFt||"",type:"StaticResource"})}AZt(t,i,e){if(!t||!i)return;const s="<img "+(e?"title='"+e+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(i)+"' target='_blank' rel='noopener'>"+s+"</a>"}HQt(t){return t?t.map((t=>{let i;const e={adSlotId:t.PFt||"",height:t.Mi||0,width:t.Ti||0};if(t.oFt){var s;const e=this.wZt(t.oFt),n=e.clickThrough||(null==(s=t.QFt)?void 0:s.VFt);i=qr({},e,{contentHTML:this.AZt(e.resourceURI,n,e.altText)||""})}else if(t.lFt)i=this.gZt(t.lFt);else{if(!t.uFt)return;i=this._Zt(t.uFt)}return Wt(i,e)})).filter((t=>void 0!==t)):[]}vZt(){return this.mZt.JQt}pZt(){if(this.mZt.mYt)return this.mZt.mYt[0].contentURL;{const t=this.mZt;return t&&t.oFt?t.oFt.tGt:""}}yZt(){if(this.mZt.mYt)return this.mZt.mYt[0].type;{const t=this.mZt,i=t&&t.oFt;return i&&i.eGt?i.eGt:""}}constructor(t,i,e,s,n){super(),this.mZt=t,this.IFt=i,this.gFt=e,this.dZt=s,this.AYt=n}},Hr=class extends d${Qh(){const t=this.gFt,i=this.dZt,e={companions:this.HQt(this.IFt),type:"nonlinear",id:this.mZt.wFt,skipOffset:this.MYt,integration:ft.HXt,adSystem:this.mZt.JQt,get adBreak(){return t?new u$(t,i).eZt():void 0},creativeId:this.mZt.wFt,universalAdIds:this.AYt.map((t=>({adIdRegistry:t.dGt,adIdValue:t._Gt})))};return this.mZt.uFt?Wt(this._Zt(this.mZt.uFt),e):this.mZt.lFt?Wt(this.gZt(this.mZt.lFt),e):this.mZt.oFt?Wt(this.wZt(this.mZt.oFt),e):e}eZt(){return this.Oa||(this.Oa=this.Qh()),this.Oa}get MYt(){const t=this.mZt.Ol;return t&&t.aWt&&void 0!==t.aWt.skipOffset?kc.ZGt(t.aWt.skipOffset,this.dZt.XVt.lt):(null==(i=this.mZt.Ol)?void 0:i.MYt)||-1;var i}constructor(t,i,e,s,n){super(t,i,e,s,n)}},Qh=class extends d${eZt(){const t=this.gFt,i=this.dZt;var e;this.Oa||(this.Oa={companions:this.HQt(this.IFt),duration:this.mZt.lt,id:this.mZt.wFt,mediaFiles:this.mZt.mYt,skipOffset:this.MYt,type:"linear",integration:ft.HXt,adSystem:this.mZt.JQt,width:void 0,height:void 0,get adBreak(){return t?new u$(t,i).eZt():void 0},clickThrough:null==(e=this.mZt.iYt)?void 0:e.VFt,creativeId:this.mZt.wFt,universalAdIds:this.AYt.map((t=>({adIdRegistry:t.dGt,adIdValue:t._Gt})))});return this.Oa}get MYt(){const t=this.mZt.Ol;return t&&t.aWt&&void 0!==t.aWt.skipOffset?kc.ZGt(t.aWt.skipOffset,this.dZt.XVt.lt):this.mZt.MYt||-1}constructor(t,i,e,s,n){super(t,i,e,s,n)}};!function(t){t.wGt="linear",t.AGt="nonlinear",t.Hv="unknown"}(Vr||(Vr={})),function(t){t.NONE="none",t.READY="ready"}(a$||(a$={}));var f$=class extends c${MZt(t,i,e,s,n,r){this.ym=t,this.vk=i,this.pk=e,this.KL=s,this.IFt=n,this.TYt=r,this.TZt="ready"}get NZt(){return this.TZt}get Ol(){return this.gFt}get DFt(){return this.IFt}get lt(){return this.KL}eZt(){return this.Oa||(this.Oa=this.Qh()),this.Oa}get Mi(){return this.pk}get u(){return this.ym}get MYt(){return this.TYt}get Ti(){return this.vk}get lVt(){return this.DZt}get VFt(){}vZt(){return""}yZt(){return""}pZt(){return""}constructor(t,i){super(),this.gFt=t,this.DZt=i,this.ym=void 0,this.TYt=void 0,this.vk=void 0,this.pk=void 0,this.KL=void 0,this.IFt=[],this.TZt="none"}};function Vo(t){return{adSystem:void 0,creativeId:void 0,universalAdIds:[],get readyState(){return t.NZt},get adBreak(){return t.Ol.eZt()},get duration(){return t.lt},get companions(){return t.DFt.map((t=>t.eZt()))},get clickThrough(){return t.VFt},get width(){return t.Ti},get type(){return t.lVt},get height(){return t.Mi},get id(){return t.u},get skipOffset(){return t.MYt},get integration(){return t.sZt}}}r(),r();var _$=class{get PFt(){return this.BFt}get GFt(){return""}get IZt(){return this.SZt}get VFt(){return this.HFt}get Mi(){return this.pk}get tGt(){return this.EZt}get Ti(){return this.vk}eZt(){return this.Oa||(this.Oa=function(t){return{get adSlotId(){return t.PFt},get altText(){return t.GFt},get contentHTML(){return t.IZt},get clickThrough(){return t.VFt},get height(){return t.Mi},get resourceURI(){return t.tGt},get width(){return t.Ti}}}(this)),this.Oa}bZt(t){const i=function(t){try{return fJ(t,"text/html")}catch(t){return}}(t.V);i&&(this.HFt=g$(i,"a","href"),this.EZt=g$(i,"img","src"))}constructor(t){this.Oa=void 0,this.HFt=void 0,this.EZt=void 0,this.vk=t.Ti,this.pk=t.Mi,this.SZt=t.V,this.BFt=t.PFt,this.bZt(t)}};function g$(t,i,e){const s=t.querySelector(i);return s&&s.getAttribute(e)||""}r();var w$=class extends f${set LZt(t){this.kZt=t}get LZt(){return this.kZt}get sZt(){return ft.Jh}get JQt(){var t;return null==(t=this.xZt)?void 0:t.JQt}get CZt(){var t;return null==(t=this.xZt)?void 0:t.jFt}get wFt(){var t;return null==(t=this.xZt)?void 0:t.wFt}get vP(){var t;return null==(t=this.xZt)?void 0:t.vP}get AHt(){var t,i;return null!=(i=null==(t=this.xZt)?void 0:t.AHt)?i:[]}get vHt(){var t,i;return null!=(i=null==(t=this.xZt)?void 0:t.vHt)?i:[]}get mHt(){var t,i;return null!=(i=null==(t=this.xZt)?void 0:t.mHt)?i:[]}Qh(){return function(t,i){return Wt(t,{bitrate:0,contentType:void 0,mediaUrl:void 0,traffickingParameters:void 0,traffickingParametersString:void 0,universalAdIds:[],get adSystem(){return i.JQt},get apiFramework(){return i.CZt},get creativeId(){return i.wFt},get title(){return i.vP},get wrapperAdIds(){return i.AHt},get wrapperAdSystems(){return i.vHt},get wrapperCreativeIds(){return i.mHt}})}(Vo(this),this)}OZt(t){this.xZt=t;const i=A$(t);this.MZt(t.cYt,t.wHt,t.gHt,t.lt,i,-1)}constructor(...t){super(...t),this.kZt=0,this.xZt=void 0}};function A$(t){return t.HQt.map((t=>new _$(t)))}var v$=class extends f${Qh(){return function(t,i){return Wt(t,{get adSystem(){return i.JQt},get apiFramework(){return i.CZt},get bitrate(){return i.jZt},get contentType(){return i._P},get creativeId(){return i.wFt},get mediaUrl(){return i.oHt},get title(){return i.vP},get traffickingParameters(){return i.lHt},get traffickingParametersString(){return i.dHt},get wrapperAdIds(){return i.AHt},get wrapperAdSystems(){return i.vHt},get wrapperCreativeIds(){return i.mHt},get universalAdIds(){return i.ZQt}})}(Vo(this),this)}OZt(t){this.xZt=t,this.MZt(t.cYt,t.wHt,t.gHt,t.lt,A$(t),t.uHt),this.DZt=t.pHt?Vr.wGt:Vr.AGt}get sZt(){return ft.qXt}get JQt(){return this.xZt?m$(this.xZt.JQt):void 0}get CZt(){return this.xZt?m$(this.xZt.jFt):void 0}get jZt(){return this.xZt?this.xZt._Ht:0}get _P(){return this.xZt?m$(this.xZt._P):void 0}get wFt(){return this.xZt?m$(this.xZt.wFt):void 0}get rHt(){return this.xZt?m$(this.xZt.rHt):void 0}get oHt(){var t;const i=null==(t=this.xZt)?void 0:t.oHt;return oe(i)?i:this.zZt}set oHt(t){this.zZt=t}get vP(){var t;return null==(t=this.xZt)?void 0:t.vP}get lHt(){return this.xZt?m$(this.xZt.lHt):void 0}get dHt(){return this.xZt?m$(this.xZt.dHt):void 0}get AHt(){var t,i;return null!=(i=null==(t=this.xZt)?void 0:t.AHt)?i:[]}get vHt(){var t,i;return null!=(i=null==(t=this.xZt)?void 0:t.vHt)?i:[]}get mHt(){var t,i;return null!=(i=null==(t=this.xZt)?void 0:t.mHt)?i:[]}get ZQt(){var t,i;return null!=(i=null==(t=this.xZt)?void 0:t.ZQt.map((t=>({adIdRegistry:t.eHt,adIdValue:t.sHt}))))?i:[]}constructor(t){super(t,Vr.Hv),this.xZt=void 0,this.zZt=void 0}};function m$(t){return null===t?void 0:t}r(),r();var p$=class{get WUt(){return this.iXt.WUt}get QUt(){return this.PZt}get cQt(){return this.iXt.cQt}get wQt(){const t=this.iXt.wQt;return t?t.eZt():null}get gQt(){const t=this.iXt.BZt;return t?[t.eZt()]:[]}get AQt(){return[]}get vQt(){return this.iXt.vQt.map((t=>t.eZt()))}RZt(t,i,e){0}uT(){this.iXt.uT()}ln(){return Promise.resolve()}constructor(t,i){this.iXt=t,this.PZt=i}},y$=class{get UZt(){return this.QZt}get WUt(){return this.mQt}get cQt(){return this.FZt}get AQt(){return[]}get BZt(){return this.mZt}get wQt(){return this.YZt}uT(){}constructor(t,i){this.mQt=t,this.GZt=[],this.FZt=!1,this.QZt=new p$(this,i)}};r(),r();var gs=class extends Js{constructor(t,i){super(t),this.eXt=i}},lo=class extends d{constructor(t,i){super(t),this.ad=i}},M$=class extends gs{Qh(){return new T$(this.eXt.eZt())}constructor(t){super("WZt",t)}},T$=class extends lo{constructor(t){super("updatead",t)}};r();var N$=class extends gs{Qh(){return new D$(this.eXt.eZt())}constructor(t){super("VZt",t)}},D$=class extends lo{constructor(t){super("addad",t)}};r();var mc=class extends gs{Qh(){return new I$(this.eXt.eZt(),this.currentTime)}constructor(t,i){super("HZt",t),this.currentTime=i}},I$=class extends lo{constructor(t,i){super("adbegin",t),this.currentTime=i}};r();var S$=class extends gs{Qh(){return new E$(this.eXt.eZt())}constructor(t){super("qZt",t)}},E$=class extends lo{constructor(t){super("adloaded",t)}};r();var b$=class extends gs{Qh(){return new L$(this.eXt.eZt())}constructor(t){super("XZt",t)}},L$=class extends lo{constructor(t){super("adimpression",t)}};r();var Fa=class extends gs{Qh(){return new k$(this.eXt.eZt(),this.currentTime)}constructor(t,i){super("ZZt",t),this.currentTime=i}},k$=class extends lo{constructor(t,i){super("adfirstquartile",t),this.currentTime=i}};r();var x$=class extends gs{Qh(){return new C$(this.eXt.eZt(),this.currentTime)}constructor(t,i){super("KZt",t),this.currentTime=i}},C$=class extends lo{constructor(t,i){super("admidpoint",t),this.currentTime=i}};r();var su=class extends gs{Qh(){return new O$(this.eXt.eZt(),this.currentTime)}constructor(t,i){super("JZt",t),this.currentTime=i}},O$=class extends lo{constructor(t,i){super("adthirdquartile",t),this.ad=t,this.currentTime=i}};r();var j$=class extends gs{Qh(){return new z$(this.eXt.eZt(),this.$Zt)}get $Zt(){return this.tKt}constructor(t,i){super("iKt",t),this.tKt=i}},z$=class extends lo{constructor(t,i){super("adskip",t),this.playedPercentage=i}};r();var Aa=class extends gs{Qh(){return new P$(this.eXt.eZt(),this.currentTime)}constructor(t,i){super("eKt",t),this.currentTime=i}},P$=class extends lo{constructor(t,i){super("adend",t),this.currentTime=i}};r();var ct=class extends Wu{Qh(){return new B$(this.Ol.eZt())}constructor(t){super("sKt",t)}},B$=class extends Ru{constructor(t){super("adbreakbegin",t)}};r();var Oh=class extends Wu{Qh(){return new R$(this.Ol.eZt())}constructor(t){super("nKt",t)}},R$=class extends Ru{constructor(t){super("adbreakend",t)}};r();var U$=class extends Wu{Qh(){return new Q$(this.Ol.eZt())}constructor(t){super("rKt",t)}},Q$=class extends Ru{constructor(t){super("updateadbreak",t)}};r();var F$=class extends Js{Qh(){return new Y$(this.eXt.eZt())}constructor(t){super("hKt"),this.eXt=t}},Y$=class extends d{constructor(t){super("adbuffering"),this.ad=t}};r();var G$=class extends Js{Qh(){return new W$}constructor(){super("oKt")}},W$=class extends d{constructor(){super("admetadata")}},V$=class t extends y${aKt(t,i){for(let e=0;e<t;e++){const t=new v$(i);i.iZt(t),this.WUt.jo(new N$(t))}}IVt(t,i,e){let s=t;s===1/0&&(s=-1);const n=new s$(s,e);this.GZt.push(n),i.QWt(n),this.WUt.jo(new n$(n))}ZVt(t,i){for(const e of this.GZt)M(e.sSt)&&e.nZt===t&&(e.sSt=i,this.WUt.jo(new U$(e)))}jVt(t,i){void 0===i&&(i=!1),i&&Hc(this.GZt,t),this.WUt.jo(new h$(t))}CVt(){if(this.wQt){this.jVt(this.wQt,!0);const t=Boolean(this.mZt&&this.mZt.lVt===Vr.wGt);this.uKt(void 0,t)}}cKt(t,i){const e=i.yHt;if(!e)return;const s=e.KVt-1,n=t.Pc[s];return n.OZt(i),this.WUt.jo(new M$(n)),n.Ol.JVt=e.JVt,n}get cQt(){return this.lKt.cQt}dKt(t){if(!ks(this.fKt,t)){if(t){if(this.mZt===t)return;this.mZt=t;for(const i of this._Kt)this.tXt(i,t,this.lKt.I_)}else{if(!this.mZt)return;const t=new Aa(this.mZt,this.mZt.Ol.sSt);this.fKt.push(this.mZt),this.mZt=void 0,this.mQt.jo(t)}sr(this._Kt)}}uKt(t,i){if(t){var e;if((null==(e=this.wQt)?void 0:e.sSt)===t.sSt)return;this.YZt=t,i&&this.WUt.jo(new ct(this.YZt))}else{if(!this.YZt)return;const t=new Oh(this.YZt);this.YZt=void 0,sr(this.fKt),i&&this.mQt.jo(t)}}get BZt(){return this.mZt}get wQt(){return this.YZt}get vQt(){return this.GZt.filter((t=>!t.K_))}gKt(t){return this.GZt.filter((i=>go(i.sSt,t,.01)))[0]}static wKt(t,i){if(i.yHt)return t.Pc[i.yHt.KVt-1]}bd(t){if(!t.yHt)return;const i=t.yHt,e=this.gKt(i.sSt);e&&(sr(this._Kt),this.uKt(e,t.pHt))}wd(){this.wQt&&this.WUt.jo(new Oh(this.wQt)),sr(this._Kt),this.CVt()}QXt(i){if(!this.YZt&&i.yHt){const t=this.gKt(i.yHt.sSt);this.uKt(t,i.pHt)}if(this.YZt){const e=t.wKt(this.YZt,i);if(!e)return;this.cKt(this.YZt,i);const s=i.oHt;oe(s)&&!oe(e.oHt)&&(e.oHt=s,this.WUt.jo(new M$(e))),this.dKt(e),this.WUt.jo(new mc(this.mZt,e.Ol.sSt))}else 0}NXt(t,i){if(this.dKt(void 0),!i&&this.wQt){const t=this.wQt;this.uKt(void 0,!1),this.jVt(t)}}lXt(t){const i=t.yHt;if(!i)return;const e=this.gKt(i.sSt);if(!e)return;this.BXt(i.sSt,i.tHt,i.JVt);const s=this.cKt(e,t);s&&this.WUt.jo(new S$(s))}BXt(t,i,e){const s=this.gKt(t);if(!s)return;const n=s.Pc.length;if(i>n){const t=i-n;this.aKt(t,s),s.JVt=e,this.WUt.jo(new U$(s))}}qqt(i,e,s){if(!this.YZt)return;const n=t.wKt(this.YZt,i);if(n){const t=e/s;this.WUt.jo(new j$(n,t))}}_Xt(i,e,s){if(!this.YZt)return;let n=this.mZt;if(!n){const s=t.wKt(this.YZt,i);if(!s||ks(this.fKt,s))return void this._Kt.push(e);n=s,this.cKt(this.YZt,i),this.dKt(n)}this.tXt(e,n,s)}tXt(t,i,e){t===To.FHt?this.WUt.jo(new G$):t===To.CHt&&i?this.WUt.jo(new b$(i)):t===To.jHt&&i?this.WUt.jo(new F$(i)):t===To.zHt&&i&&e?this.WUt.jo(new Fa(i,e)):t===To.zYt&&i&&e?this.WUt.jo(new x$(i,e)):t===To.PHt&&i&&e&&this.WUt.jo(new su(i,e))}uT(){this.lKt.uT()}Gn(){const t=Boolean(this.mZt&&this.mZt.lVt===Vr.wGt);this.dKt(void 0),this.uKt(void 0,t);for(const t of this.GZt)this.jVt(t);sr(this.GZt),sr(this._Kt),sr(this.fKt)}ln(){this.Gn()}constructor(t,i){super(t,ft.qXt),this.lKt=i,this._Kt=[],this.fKt=[]}};function H$(t){const i=s.google.ima.settings;t.ads&&t.ads.vpaidMode&&s.google.ima.settings.setVpaidMode(function(t){const i=s.google.ima.ImaSdkSettings.VpaidMode;switch(t){case tw.ENABLED:return i.ENABLED;case tw.INSECURE:return i.INSECURE;case tw.DISABLED:default:return i.DISABLED}}(t.ads.vpaidMode)),i.setPlayerVersion("6.5.0"),i.setPlayerType("THEOplayer"),i.setAutoPlayAdBreaks(!0),i.setDisableCustomPlaybackForIOS10Plus(!q$(t));const e=function(t){const i=t.ui&&t.ui.language;return"string"==typeof i?i:void 0}(t);e&&i.setLocale(e)}function q$(t){return li.Ra&&t.allowNativeFullscreen}r();var X$=class i extends po{get YUt(){return this.SVt.UZt}get AKt(){return this.SVt}get yXt(){return this.oVt}get xXt(){return q$(this.PV)}RZt(t,i,e){i===Xo.OUt&&void 0!==e&&(this.lQt=e),this.oVt.MVt(t,i)}static get QUt(){return ft.qXt}get QUt(){return i.QUt}get vKt(){return this.PV.ads.preload===an.MIDROLL_AND_POSTROLL}get AQt(){return[]}get gQt(){return[]}get wQt(){return null}set lVt(t){this.DZt=t}get lVt(){return this.DZt}get XVt(){return this.Qqt}set XVt(t){this.Qqt=t,this.mKt=!1}get I_(){if(!this.XVt)return 0;const t=this.XVt.jXt();return M(this.lt)||t<0?0:this.lt-t}set I_(t){}get lt(){return this.KL||NaN}set lt(t){this.KL=t}get Q_(){return this.h.Q_}set Q_(t){this.LXt(this.Mg,t,!0)}get G_(){return!0}get V_(){return this.tR}set V_(t){this.tR=t}get FXt(){return this.pKt}set FXt(t){this.pKt=t}get pXt(){return this.lQt}get EXt(){return this.yKt}get YXt(){return this.MKt}set YXt(t){this.MKt=t}get bXt(){return this.TKt}set bXt(t){this.TKt=t}get wg(){return 0}get pg(){return 0}m_(){return[]}qUt(t){this.uVt=t,this.oVt.qUt(t)}async FVt(){!this.mKt&&this.XVt&&(await this.XVt.yn(),this.mKt=!0)}DXt(t){this.lVt=t?t.pHt?"linear":"nonlinear":"none"}get cg(){return re.ZB().ks()}get Mg(){return this.h.Mg}set Mg(t){this.LXt(t,this.Q_,!0)}fXt(){return this.h.Q_?0:this.h.Mg}LXt(t,i,e){const s=this.h.Mg!==t||this.h.Q_!==i;s&&(this.h.Mg=t,this.h.Q_=i),this.XVt&&e&&this.XVt.Ng(this.fXt()),s&&this.jo(new ge(this.I_,this.Mg))}get _e(){return this.h._e}get L_(){return!1}get dt(){if(this.NKt&&this.lQt)return this.NKt}get C_(){if(this.DKt&&this.lQt)return this.DKt}get og(){return this.I$}set og(t){this.I$=t,this.jo(new Z(this.I_,t))}get GXt(){return this.IKt}set GXt(t){this.IKt=t}zg(){this.h.hn(t.wh,this.SKt),this.ko||(this.ko=!0,this.oVt.zg(),this.UXt())}EKt(){return this.bKt||(this.bKt=this.LKt.YW()),this.bKt}async Bg(){if(this.kKt)return;this.xKt.i_(),this.xKt=new Z_;const t=this.V_;this.V_=!1,this.jo(new ih(this.I_)),this.CKt()||(this.xXt||this.h.we(),this.jo(new tc(this.I_))),this.FXt||(this.YXt=!1);const i=Boolean(this.XVt);this.kKt=this.oVt.yVt();try{await this.kKt}finally{this.kKt=void 0}try{Pi(this.xKt.$f)}catch(t){return}if(this.ko||this.SKt(),!this.NKt||!this.lQt)if(this.XVt){if(t)if(i)try{await Oi(this.XVt.OKt(),this.xKt.$f),this.jo(new Kr(this.I_))}catch(t){return}else await this.FVt()}else this.lQt||(this.NQt(),this.pQt.Bg())}Pg(){var t;this.V_||(this.V_=!0,this.jo(new bs(this.I_))),this.xKt.i_(),this.FXt?null==(t=this.XVt)||t.Pg():this.YXt=!0}uT(){var t;null==(t=this.XVt)||t.uT()}async IXt(){this.XVt&&(await this.zKt.jKt(),await this.XVt.Rg(),await this.XVt.Hf(),this.XVt=void 0,this.lVt="none",this.mKt=!1)}async Rg(){var t;this.zXt=0,this.oVt.Gn(),this.xKt.i_(),this.V_=!0,this.yKt=!1,this.TKt=!1,this.FXt=!1,this.SVt.Gn(),await this.IXt(),this.mXt(),null==(t=this.PKt)||t.Gn(),this.YXt=!1}ye(){this.BKt()}async BKt(){await this.EKt(),await this.LKt.ye()}we(){this.LKt.we()}RKt(){return Boolean(this.XVt)&&ks(this.XVt.UKt(),-1)&&!this.yKt}zWt(){this.oVt.zWt()}HVt(){return this.oVt.HVt}rVt(){this.oVt.rVt()}qVt(){return this.oVt.qVt()}Wg(i){if(this.RKt()){if(i.type===t.bh&&this.h.L_)return!0;if(i.type===t.NA)return this.yKt=!0,this.zKt.jKt(),!0}return!1}CKt(){return Boolean(this.XVt&&this.XVt.AXt())}async QVt(t){try{await this.IXt();const i=this.QKt();await this.EKt(),this.XVt=await this.zKt.QVt(t,this.PKt,i),await this.FKt(this.XVt)}catch(t){this.YKt.aXt(t)}}async FKt(t){if(await t.Ng(this.fXt()),this.oVt.DVt===GJ.vVt){const i=t.UKt();if(i.length)for(const t of i)this.SVt.IVt(t,this.oVt.hVt);else this.SVt.IVt(this.oVt.hVt.Ll,this.oVt.hVt)}this.YKt.Gn(),this.YKt.Uqt(t)}Cg(){if(this.Qqt&&this.xXt&&this.CKt())return this.h.Cg()}xg(){return this.xXt&&this.pQt.Ew===this?this.h.xg():super.xg()}QKt(){const t=this.oVt.DVt===GJ.vVt,i=!(!this.GKt||!t)&&this.vKt;let e,s;this.PV.ads.showCountdown||(e=[]),void 0!==this.PV.ads.allowedMimeTypes&&(s=this.PV.ads.allowedMimeTypes);return{WKt:s,fHt:e,VKt:i,jZt:this.PV.ads.googleIma.bitrate,HKt:void 0,qKt:this.uVt}}UXt(){if(!this.GKt&&!this.Q_&&(this.GKt=!0,this.Qqt)){const t=this.QKt();this.Qqt.XKt(t)}}MXt(t){this.NKt=new ma(Gi.ADVERTISEMENT_ERROR,t.Yb),this.DKt=new Ri(ue.AD_ERROR,"There was a problem playing ads.",this.NKt),this.WUt.jo($h.tQt(t)),this.lQt&&this.jo(new _i(this.DKt))}mXt(){this.pQt.Ew===this&&(this.h.ye(),this.NQt(),this.we())}VXt(){var t;if(this.h.I_===1/0||!this.h.cg.length)return;(null==(t=this.oVt.hVt)?void 0:t.TWt)&&-1!==this.ZKt&&(this.h.I_+=this.ZKt,this.ZKt=-1)}WXt(t){var i,e;this.ZKt=null!=(e=null==(i=t.yHt)?void 0:i.JVt)?e:-1}NQt(){super.NQt(),this.h.ye(),this.xXt&&!this.h.L_&&this.h.Bg()}bQt(){this.xXt||super.bQt()}async ln(){this.YKt.hn(be.ha,this.KKt),await super.ln(),this.pQt.dm(this),await this.IXt(),this.zKt.hn("JKt",this.$Kt),await this.zKt.Hf(),await this.LKt.Hf(),this.oVt.ln(),this.YKt.ln()}constructor(i,e,s,n,r,h,o,a){super(i,e,s),this.bKt=void 0,this.ko=!1,this.lQt=!1,this.NKt=void 0,this.DKt=void 0,this.ZKt=-1,this.DZt="none",this.IKt=!1,this.GKt=!1,this.mKt=!1,this.xKt=new Z_,this.pKt=!1,this.MKt=!1,this.$Kt=t=>{this.WUt.jo(t)},this.KKt=t=>{this.NKt=new ma(Gi.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.DKt=No(this.NKt)},this.zXt=NaN,this.SKt=()=>{this.ko||this.zg()},this.PV=n,this.tR=!0,this.KL=NaN,this.I$=he.Rv,this.yKt=!1,this.TKt=!1,this.SVt=new V$(this.WUt,this),this.YKt=new i$(this,this.h,this.pQt,this.SVt),this.YKt.dn(be.ha,this.KKt),this.h.dn(t.wh,this.SKt),this.oVt=new qJ(this,this.h,this.pQt,r,this.SVt),this.PKt=a,this.zKt=o,this.LKt=h,this.we(),this.zKt.dn("JKt",this.$Kt)}};r();var Z$=class{registerWebImaAdPlayerConstructor(t){this.tJt=t}registerNativeImaAdPlayerConstructor(t){this.iJt=t}createAdPlayer(t,i,e,s,n){var r,h;return null!=(h=null==(r=s.ads.googleIma)?void 0:r.useNativeIma)&&h&&this.iJt?this.iJt(t,i,e,s,n):K$()&&this.tJt?this.tJt(t,i,e,s,n):void 0}};function K$(){if(Boolean(J.google&&J.google.ima)){return!(1===C.keys(J.google.ima).length&&J.google.ima.dai)}return!1}Z$.Lb=new Z$;var J$=class{get PUt(){return X$.QUt}jR(t){return t&&t.integration===Mh.GOOGLE_IMA}BUt(t,i,e,s,n){return Z$.Lb.createAdPlayer(t,i,e,s,n)}i1(t,i,e,s){e.RZt(t,i,s)}sF(t){const i=BJ(t.sources);if(!i)return;const e={integration:Mh.GOOGLE_IMA,sources:i,omidAccessModeRules:t.omidAccessModeRules},s=UJ(t.timeOffset);return void 0!==s&&(e.timeOffset=s),e}};Ts.Lb.zR(new J$),r(),r(),r(),r();var $$=class extends Js{Qh(){return new t0}constructor(){super("qZt")}},t0=class extends d{constructor(){super("adloaded")}},i0=-1,e0=class{get cZt(){return this.GZt}get het(){return this.Y9}get eJt(){return this.kWt}get sJt(){return this.nJt}get Ll(){if(M(this.rJt)){const t=kc.ZGt(this.kWt,this.Qo.lt);void 0===t||M(t)||(this.rJt=t)}return this.rJt}get hJt(){return this.oJt}get aJt(){return this.FQt}set aJt(t){this.FQt=t}bc(t){let i;return this.cZt.length>this.Y9&&(t?(i=this.cZt[this.Y9],this.Y9++):i=this.cZt[this.Y9]),i}uJt(t){t.IGt=this,this.cZt.push(t)}async cJt(t){let i=!1;for(const e of this.GZt)try{await e.En((()=>{})),i=!0}catch(i){0,Hc(this.GZt,e);const s=e.aWt.sources,n="string"==typeof s?s:s.src;t.jo($h.iQt(i,n))}return this.nJt=!0,i}lJt(){this.oJt=!0}dJt(){return this.oJt}fJt(){for(const t of this.GZt){const i=Dr.uZt(t);if(i){let t=i.bc();for(;void 0!==t;){if(t.WQt)return!0;t=i.bc()}}}return!1}constructor(t,i){this.GZt=[],this.oJt=!1,this.kWt=t,this.Y9=0,this.FQt=0,this.Qo=i,this.rJt=NaN,this.nJt=!1}},s0=class t extends ${get _Jt(){let t=0;for(const i of this.gJt)i.hJt||(t+=1);return t}wJt(){this.vJt.AJt()}yn(){this.Bo(),this.mJt.dn("eKt",this.vJt.pJt)}wn(){this.Ro(),this.mJt.hn("eKt",this.vJt.pJt),this.VJ=this.$m,this.vJt.Gn();for(const t of this.gJt)t.hJt||t.lJt();sr(this.gJt)}Bo(){this.yJt||(this.Qo.dn("timeupdate",this.MJt),this.yJt=!0)}Ro(){this.yJt&&(this.Qo.hn("timeupdate",this.MJt),this.yJt=!1)}get AQt(){return this.gJt}TJt(){return this.NJt(new bl(i0,void 0))}DJt(t){return this.IJt(t,0,0).length>0}SJt(t,i){const e=this.gJt.filter((t=>!t.hJt));if(0!==e.length){let s,n=0;for(const r of e){const e=r.Ll;e>=t&&e<=i&&e>=n&&!M(e)&&(s=r,n=s.Ll)}return s}}EJt(t){return this.NJt(new bl(t,void 0))}bJt(){if(!this.LJt&&void 0!==this.uVt){this.LJt=!this.gJt.some((t=>M(t.Ll)));for(const t of this.gJt)t.Ll!==i0&&t.Ll<=this.uVt&&!t.dJt()&&t.lJt()}}kJt(t){for(const i of t)i.lJt();this.nQt.xJt(t),0===this._Jt&&this.Ro()}IJt(t,i,e){const s=[];for(const n of this.gJt)if(!n.hJt){const r=n.Ll;(this.CJt(r,t)||this.OJt(r,t,i,e))&&s.push(n)}return s}CJt(t,i){switch(i){case 0:return 0===t;case i0:return t===i0;default:return!1}}OJt(t,i,e,s){if(t<0)return!1;const n=t-i;return-1!==n&&n<=e&&n>=-s}jJt(i){if(i&&i.length>0){for(const e of i){const i=t.nVt(e.sSt);let s=this.qpt(e);-1===s&&(this.LJt=void 0===this.uVt,this.gJt.push(new e0(i,this.Qo)),s=this.gJt.length-1);this.gJt[s].uJt(e)}this.Bo()}}static nVt(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}qpt(i){const e=t.nVt(i.sSt);for(let i=0,s=this.gJt.length;i<s;i++){const s=this.gJt[i];if(e===t.nVt(s.eJt))return i}return-1}zJt(t){const i=this.gJt.indexOf(t);Ks(this.gJt,i)}qUt(t){this.uVt=t,this.LJt=void 0===t}constructor(t,i,e,s){super(),this.LJt=!1,this.MJt=t=>Mo(this.NJt(t)),this.NJt=async t=>{this.bJt();const i=t.currentTime,e=t.currentTime!==i0?this.SJt(this.VJ,t.currentTime):this.IJt(t.currentTime,0,0)[0];let s,n;const r=this.Qo.lt-10;if(n=this.DJt(i0)&&S.ceil(i)===S.ceil(r)?this.IJt(i0,10,0).filter((t=>!t.sJt)):this.IJt(i,10,0).filter((t=>!t.sJt)),n.length){const t=(await Promise.all(n.map((t=>t.cJt(this.mJt))))).some((t=>!0===t));t&&this.jo(new $$),(!t||!this.vJt.PJt||n[0].Ll<this.vJt.PJt.Ll)&&(s=n[0])}e&&(e!==this.vJt.PJt&&(s=e),this.kJt([e])),s&&(this.vJt.pJt(),this.vJt.PJt=s,await this.vJt.AJt()),M(this.Qo.lt)||(this.VJ=t.currentTime)},this.Qo=t,this.nQt=i,this.uVt=void 0,this.LJt=!1,t.lt!==1/0?this.$m=0:this.$m=t.I_,this.VJ=this.$m,this.gJt=[],this.mJt=e,this.vJt=s,this.yJt=!1}};r(),r();var n0,r0=class extends ${get BJt(){return this.RJt}get WUt(){return this.mQt}UJt(){this.QJt(),this.FJt(),this.rP=void 0}YJt(t){this.GJt=this.GJt.concat(t)}WJt(t){this.VJt=this.VJt.concat(t)}FJt(){this.GJt=[]}QJt(){this.VJt=[]}HJt(t){for(const i of this.GJt)i.qU===t&&Lr(i.eventURL)}ye(){this.BJt.style.display=""}we(){this.BJt.style.display="none"}ln(){this.Uo(),this.mQt.Uo(),rs(this.RJt)}constructor(t,i){super(),this.VJt=[],this.GJt=[],this.rP=void 0,this.mQt=new $,this.qJt=t=>{t.stopPropagation(),this.XJt()},this.XJt=()=>{for(const t of this.VJt)for(const i of t.ZFt)Lr(i.uri)},this.RJt=c.createElement("div"),this.RJt.style.display="none",this.ZJt=t,this.KJt=i}};function h0(t,i){let e=i;if(!function(t){return"ui"in t}(t))return e;const s=t.ui.language;let n;if(ji(s)){const i=t.ui.languages;if(!i)return e;n=i[s]}else n=s;return n&&n[i]&&(e=n[i]),e}r(),r(),r(),function(t){t.JJt="theo-size-xs",t.$Jt="theo-size-s",t.t$t="theo-size-m",t.i$t="theo-size-l",t.e$t="theo-size-xl"}(n0||(n0={}));var o0=[1200,992,768,576],a0={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},u0=class{s$t(t){let i=c0(t);i!==this.n$t&&(Nn(this.zs,i),QT(this.zs,this.n$t),this.n$t=i)}ln(){this.$u.hn(yt.un,this.cn)}constructor(t,i){this.zs=t,this.$u=i,this.cn=t=>{this.s$t(t.width)},this.n$t=c0(i.lu),Nn(this.zs,this.n$t),i.dn(yt.un,this.cn)}};function c0(t){for(let i of o0)if(t>i)return a0[i];return"theo-size-xs"}var l0=class extends i{get _e(){return this.zs}get Xw(){return this.NR}get kS(){return this.Ul.textContent||""}set kS(t){Ir(this.Ul,t)}r$t(){this.NR="skip",this.kS="Skip Ad",this.h$t(),this._e.classList.remove("theoplayer-ad-skip-countdown"),this._e.classList.add("theoplayer-ad-skip-button")}h$t(){this._e.addEventListener("mouseup",this.o$t),this._e.addEventListener("touchend",this.o$t)}a$t(){this._e.removeEventListener("mouseup",this.o$t),this._e.removeEventListener("touchend",this.o$t)}ln(){this.a$t(),this.Du.ln(),rs(this.zs),rs(this.Ul),this.u$t&&rs(this.u$t)}constructor(t,i){super(),this.o$t=()=>{this.jo(new d("uT"))},this.zs=c.createElement("div"),this._e.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this._e.style.position="absolute",this.Ul=c.createElement("span"),this._e.appendChild(this.Ul),i&&(this.u$t=c.createElement("div"),this.u$t.className="theoplayer-ad-skip-poster",this.u$t.style.backgroundImage='url("'+qg(i)+'")',this._e.appendChild(this.u$t)),this.NR="countdown",this.Du=new u0(this._e,t)}};r();var d0={[Bt.bv]:1,[Bt.Lv]:2,[Bt.zv]:2};function f0(t,i){const e=i?i.map((t=>t.toLowerCase())):i;return Ec(t.filter((t=>{const i=t.type.toLowerCase();return!!Gr(e)&&-1!==e.indexOf(i)&&EJ(i)})),((t,i)=>d0[t.type]-d0[i.type])).map(_0)}function _0(t){return tu({src:t.contentURL,type:t.type,isAdvertisement:!0})}function g0(t,i){return $Q(w0(t),w0(i))}function w0(t){return{Mi:t.height,Ti:t.width}}function A0(t,i,e,s){const n=function(t,i,e,s){let n,r=1/0;const h=t.filter((t=>!EJ(t.type))).filter((t=>void 0===s||-1!==s.indexOf(t.type)));if(h.length){for(const t of h){const s=(S.abs(t.width/i-1)+S.abs(t.height/e-1))/2;s<r&&(r=s,n=t)}return _0(n||h.sort(g0)[0])}}(t,i.width,i.height,e),r=f0(t,e);return n&&r.push(n),$a({sources:r},s)}r();var hc=class extends i{get c$t(){return this.l$t}set c$t(t){this.l$t!==t&&(this.l$t=t,this.zs.href=t)}Hf(){this.Uo(),this.zs.removeEventListener("touchstart",this.d$t),this.zs.removeEventListener("touchend",this.f$t),this.ott.removeEventListener("mousedown",this.d$t),this.ott.removeEventListener("click",this.f$t),this.ott.removeChild(this.zs),this.ott.style.cursor=""}constructor(t,i){super(),this.d$t=t=>{t.stopPropagation(),this.jo(new d("clickstart"))},this.f$t=t=>{t.stopPropagation(),this.jo(new d("click"))},this.ott=t,this.l$t=i,this.zs=c.createElement("a"),this.zs.href=i,this.zs.style.position="absolute",this.zs.style.zIndex="11",this.zs.target="Tu",le.Ks.Qe?(Ir(this.zs,"learn more"),this.zs.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.zs.setAttribute("rel","noopener"),this.zs.addEventListener("touchstart",this.d$t),this.zs.addEventListener("touchend",this.f$t)):(this.ott.style.cursor="pointer",Du(this.zs),this.ott.addEventListener("mousedown",this.d$t),this.ott.addEventListener("click",this.f$t)),this.ott.appendChild(this.zs)}},v0=class extends r0{get _$t(){return this.nQt.g$t()}get w$t(){return this.A$t}get I_(){return this.v$t.I_}get lt(){let t=this.v$t.lt;return M(t)&&this._Yt&&(t=this._Yt.lt||0),t}get L_(){return this.v$t.L_}get Q_(){return this.v$t.Q_}set Q_(t){this.v$t.Q_=t,t?this.HJt(se.DYt):this.HJt(se.IYt)}get V_(){return this.v$t.V_}get Mg(){return this.v$t.Mg}set Mg(t){this.v$t.Mg=t}get WQt(){return this._Yt}get m$t(){return this.p$t}get y$t(){return this.AYt}Bg(){this.v$t.V_&&(this.v$t.Bg(),this.jo(new ih(this.I_)),this.A$t&&this.HJt(se.SYt),this.A$t=!0)}Pg(){this.v$t.V_||(this.v$t.Pg(),this.jo(new bs(this.I_)),this.HJt(se.bh))}async Rg(){var t;null==(t=this.EC)||t.i_(),this.EC=void 0,this.we(),this.A$t=!1,this.M$t=!0,this.T$t(),this.N$t(),await this.D$t()}I$t(t){this.p$t.push(t)}S$t(t){void 0===t&&(t=!0),this.A$t=!1,t&&this.HJt(se.PYt),this.we(),this.KJt()}E$t(){if(!this._Yt)return;this.b$t||this.L$t();const t=S.round(this._Yt.MYt-this.I_);this.b$t.kS="You can skip in "+t+" seconds"}L$t(){var t;const i=null==(t=this.v_.$a())?void 0:t.poster;this.b$t=new l0(this.$u,i),this.BJt.appendChild(this.b$t._e),this.b$t.dn("uT",this.k$t)}x$t(){this._Yt&&this._Yt.iYt.VFt&&(this.C$t=new hc(this.BJt,this._Yt.iYt.VFt),this.C$t.dn("clickstart",this.O$t),this.C$t.dn("click",this.XJt))}j$t(t,i){for(const e of this.GJt)if(e.qU===se.BA){const s=yJ(e.Lu,i);void 0!==s&&this.VJ<s&&s<=t&&Lr(e.eventURL)}}async z$t(){if(!this._Yt||!this.P$t)return;const t=A0(this._Yt.mYt,this.P$t,this.mC.ads.allowedMimeTypes,this.mC);if(!t.sources.length)return await this.v$t.Gn(),this.ZJt(""),void this._Yt.pFt();this.EC=new Z_,this.M$t=!0,await this.v$t.Zh(t,this.EC.$f),this.v$t.ye(),this._Yt.pFt(),this.x$t()}async B$t(i,e,s,n){this._Yt=i,this.AYt=n,this.v$t.dn(t.XA,this.R$t),this.v$t.dn(t.yA,this.U$t),this.v$t.dn(t.ZA,this.Q$t),this._Yt.rFt&&0!==this._Yt.rFt.length&&this.YJt(this._Yt.rFt),this._Yt.iYt&&this.WJt(this._Yt.iYt),this.rP=e,this.P$t=s,0!==i.mYt.length&&(this.v$t.dn(be.ha,this.F$t),await this.z$t(),this.v$t.dn(t.NA,this.Y$t),this.v$t.dn(t.XA,this.G$t),this.v$t.dn(Dt._v,this.Ds),this.v$t.dn(Dt._v,this.W$t))}V$t(){this.w$t&&this.H$t&&this.k$t()}get H$t(){return this.WQt&&-1!==this.WQt.MYt&&this.v$t.I_>=this.WQt.MYt}q$t(){this.HJt(se.eut);const t=this.WQt;if(t){const i=new Qh(t,this.p$t,t.Ol,this._$t,this.y$t);this.WUt.jo(new mc(i,this.I_))}}async D$t(){if(this.v$t.hn(be.ha,this.F$t),this.v$t.hn(t.NA,this.Y$t),this.v$t.hn(t.XA,this.G$t),this.v$t.hn(Dt._v,this.Ds),this.v$t.hn(Dt._v,this.W$t),this.v$t.hn(t.XA,this.R$t),this.v$t.hn(t.yA,this.U$t),this.v$t.hn(t.ZA,this.Q$t),this._Yt){const t=this._Yt,i=new Qh(t,this.p$t,t.Ol,this._$t,this.y$t);this.WUt.jo(new Aa(i,this.I_))}this.X$t(),this.UJt(),this.T$t(),this.N$t(),this._Yt=void 0,this.AYt=[],this.P$t=void 0,await this.v$t.Gn(),this.v$t.we(),this.BJt.style.cursor="",this.Z$t=0,this.VJ=-1,sr(this.p$t),this.K$t&&(this.J$t.D$t(),this.K$t=!1)}X$t(){this.C$t&&(this.C$t.Hf(),this.C$t=void 0)}N$t(){this.$$t&&(rs(this.$$t),this.$$t=void 0)}T$t(){this.b$t&&(this.b$t.ln(),this.b$t=void 0)}t0t(){this.K$t=!0}i0t(){this.$$t||(this.$$t=c.createElement("div"),this.$$t.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this.BJt.appendChild(this.$$t));const t=this.nQt.wQt;if(!t||!t.ads)return;const i=t.ads.filter((t=>"linear"===t.type)).length;let e=h0(this.mC,"The content will play in")+" "+S.round(t.maxRemainingDuration)+" "+h0(this.mC,"seconds");if(i>1){const t=this.nQt.e0t;if(t){e+=" Ad "+(t.IGt.aJt+1)+"/"+i}}Ir(this.$$t,e)}constructor(t,i,e,s,n,r,h,o){super(t,i),this.v_=e,this.J$t=s,this.mC=n,this.nQt=r,this.$u=h,this.v$t=o,this.p$t=[],this.A$t=!1,this.Z$t=0,this.VJ=-1,this.EC=new Z_,this.AYt=[],this.M$t=!0,this.Y$t=()=>{this.S$t()},this.W$t=()=>{this.EC=void 0,this.A$t||(this.q$t(),this.A$t=!0),this.M$t&&(this.M$t=!1,this.nQt.wJt()),this.BJt.style.display="block",this.v$t.hn(Dt._v,this.W$t),this.A$t=!0},this.G$t=()=>{const t=this.I_,i=this.lt,e=t/i;0===this.Z$t&&e>=.25?(this.HJt(se.OYt),this.Z$t=1):1===this.Z$t&&e>=.5?(this.HJt(se.zYt),this.Z$t=2):2===this.Z$t&&e>=.75&&(this.HJt(se.jYt),this.Z$t=3),this.j$t(t,i),this.i0t(),this.VJ=t,this._Yt&&-1!==this._Yt.MYt&&this._Yt.MYt<this._Yt.lt&&(this.I_<this._Yt.MYt?this.E$t():(this.b$t||this.L$t(),this.b$t&&"skip"!==this.b$t.Xw&&this.b$t.r$t()))},this.F$t=()=>{var t,i;this.EC=void 0,this.v$t.hn(be.ha,this.F$t),this.M$t=!0,null==(t=this.rP)||t.lGt(_t.hGt),this.A$t=!1,this.v$t.we();const e=(null==(i=this.v$t.wt)?void 0:i.src)||"";this.ZJt(e)},this.R$t=()=>{this.Ds(new bl(this.I_,void 0))},this.U$t=()=>{this.Ds(new jn(this.lt))},this.Q$t=()=>{this.Ds(new ge(this.I_,this.Mg))},this.O$t=()=>{this.nQt.Pg()},this.k$t=()=>{if(!this._Yt)return;this.HJt(se.bYt);const t=new Qh(this._Yt,this.p$t,this._Yt.Ol,this._$t,this.y$t);this.WUt.jo(new j$(t,this.I_/this.lt)),this.S$t(!1)},this.BJt.className="theoplayer-ad-linear",this.BJt.style.zIndex="10",Du(this.BJt),this.v$t.we(),this.K$t=!1}};r(),r();var m0=class t extends i{get _e(){return this.zs}h$t(){this._e.addEventListener("mouseup",this.o$t),this._e.addEventListener("touchend",this.o$t),this._e.addEventListener("mousedown",this.s0t)}a$t(){this._e.removeEventListener("mouseup",this.o$t),this._e.removeEventListener("touchend",this.o$t),this._e.removeEventListener("mousedown",this.s0t)}static sr(){const t=c.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}ln(){this.a$t(),this.zs=null}constructor(){super(),this.o$t=t=>{this.jo(new d("uT")),this.s0t(t)},this.s0t=t=>{t.stopPropagation()},this.zs=t.sr(),this.h$t()}},p0=class extends r0{get VQt(){return this.n0t}get m$t(){return this.p$t}get r0t(){return this.Ya}get y$t(){return this.AYt}UJt(){super.UJt(),this.BJt&&PT(this.BJt)}async B$t(t,i,e,s){this.n0t&&this.D$t(),this.n0t=t,this.AYt=s,0!==this.n0t.rFt.length&&this.YJt(this.n0t.rFt),this.rP=i,this.P$t=e,0!==this.n0t.sFt.length&&(this.WJt(this.n0t.sFt[0].fFt),this.BJt.addEventListener("error",this.h0t),this.BJt.addEventListener("load",this.o0t),await this.z$t(),this.a0t())}V$t(){if(void 0===this.u0t&&this.n0t&&-1!==this.n0t.sFt[0].Ol.MYt){this.HJt(se.bYt);const t=this.n0t.sFt[0],i=new Hr(t,this.p$t,t.Ol,this._$t,this.y$t);this.WUt.jo(new j$(i,0)),this.c0t()}}q$t(){const t=this.n0t.sFt[0],i=new Hr(t,this.p$t,t.Ol,this._$t,this.y$t);this.WUt.jo(new mc(i,this.sQt.I_))}Rg(){this.D$t(),this.P$t=void 0,this.n0t=void 0,this.AYt=[]}D$t(){if(this.l0t(),this.n0t){const t=this.n0t.sFt[0],i=new Hr(t,this.p$t,t.Ol,this._$t,this.y$t);this.WUt.jo(new Aa(i,this.sQt.I_))}this.UJt(),sr(this.p$t),this.d0t(),void 0!==this.u0t&&(m(this.u0t),this.u0t=void 0)}I$t(t){this.p$t.push(t)}l0t(){this.BJt.removeEventListener("load",this.o0t),this.BJt.removeEventListener("error",this.h0t)}async z$t(){const t=c.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const i=this.n0t.sFt[0],e=c.createElement("a");if(i.fFt.VFt&&(e.href=i.fFt.VFt,e.target="Tu",e.setAttribute("rel","noopener")),i.uFt){const t=i.uFt,s=c.createElement("iframe");s.src=t.tGt,e.appendChild(s)}else if(i.oFt){const t=i.oFt,s=c.createElement("img");s.src=t.tGt,e.appendChild(s)}else if(i.lFt){const t=i.lFt,s=c.createElement("iframe");s.src=t.tGt,e.appendChild(s)}i.pFt(),e.addEventListener("mousedown",this.qJt),e.addEventListener("touchend",this.qJt),this.BJt.firstChild&&(PT(this.BJt),this.D$t()),t.appendChild(e),this.BJt.appendChild(t),this.ye()}a0t(){if(!this.n0t)return;const t=this.n0t.sFt[0].Ol.MYt;-1!==t&&void 0!==t&&(this.u0t=J.setTimeout(this.f0t,1e3*t))}d0t(){this.r0t&&(this.r0t.hn("uT",this._0t),this.r0t.ln()),this.Ya=void 0}get _$t(){return this.nQt.g$t()}constructor(t,i,e,s){super(t,i),this.p$t=[],this.P$t=void 0,this.AYt=[],this.o0t=()=>{this.l0t(),this.HJt(se.FYt),this.KJt()},this.h0t=t=>{var i,e;this.l0t(),null==(i=this.rP)||i.lGt(_t.aGt);const s=null==(e=this.n0t)?void 0:e.sFt[0];var n,r;const h=null!=(r=null!=(n=null==s?void 0:s.uFt)?n:null==s?void 0:s.oFt)?r:null==s?void 0:s.lFt;var o;this.ZJt(null!=(o=null==h?void 0:h.tGt)?o:"")},this.c0t=()=>{this.we(),PT(this.BJt),this.KJt(),this.n0t=void 0,this.AYt=[]},this.f0t=()=>{this.r0t||(this.u0t=void 0,this.Ya=new m0,this.BJt.children[0].appendChild(this.Ya._e),this.Ya.dn("uT",this._0t))},this._0t=()=>{this.HJt(se.bYt),this.V$t()},this.BJt.className="theoplayer-ad-nonlinear",this.BJt.style.position="absolute",this.BJt.style.width="100%",this.BJt.style.bottom="3em",this.BJt.style.zIndex="10",this.BJt.style.textAlign="center",this.nQt=e,this.sQt=s}};r();var y0=class extends Wu{Qh(){return new M0(this.Ol.eZt())}constructor(t){super("g0t",t)}},M0=class extends Ru{constructor(t){super("adbreakchange",t)}};r();var T0=class{static async w0t(t,i,e){let s=[],n=t.shift();for(;n;){try{const t=await(new Gu).pGt(n,i);s=s.concat(t)}catch(t){0;const i=$h.iQt(t,n.sources.src);e.jo(i)}n=t.shift()}return s}};r();var N0=class extends Js{Qh(){return new D0}constructor(){super("A0t")}},D0=class extends d{constructor(){super("adadded")}};r(),r(),r();var Ko,Qc=class extends Js{Qh(){return new I0}constructor(){super("Mft")}},I0=class extends d{constructor(){super("statechange")}};r(),function(t){t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted"}(Ko||(Ko={})),r(),r();var S0=class{get Ru(){return this.Ou}get L(){return this.Ou.length}get so(){return this.Oa||(this.Oa=this.Qh()),this.Oa}Iw(t){return this.Ou[t]}gm(t){this.Ou.push(t),this.Oa&&this.Oa.push(t.so),this.v0t(t)}m0t(t){for(const i of t)this.gm(i)}p0t(t,i){i>=0&&i<=this.Ou.length&&(this.Ou.splice(i,0,t),this.Oa&&this.Oa.splice(i,0,t.so),this.v0t(t))}Am(t){return ks(this.Ou,t)}wm(t){this.y0t(this.Ou.indexOf(t))}y0t(t){if(!(t>=0&&t<this.Ou.length))return;const i=this.Ou[t];Ks(this.Ou,t),this.Oa&&Ks(this.Oa,t),this.M0t(i)}tL(){const t=this.Ou.slice();sr(this.Ou),this.Oa&&sr(this.Oa);for(const i of t)this.M0t(i)}constructor(){this.Ou=[],this.Oa=void 0}},E0=class extends S0{Qh(){return function(t){const i=function(t){const i=t.Ru.map((t=>t.so));return i.item=i=>{const e=0|i,s=t.Iw(e);return s&&s.so||void 0},i}(t),e=new na(t,i);return i.addEventListener=(t,i)=>{e.dn(t,i)},i.removeEventListener=(t,i)=>{e.hn(t,i)},i}(this)}dn(t,i){this.T0t.dn(t,i)}c_(t){this.T0t.c_(t)}Uo(){this.T0t.Uo()}jo(t){this.T0t.jo(t)}hn(t,i){this.T0t.hn(t,i)}__(t){this.T0t.__(t)}g_(t){this.T0t.g_(t)}w_(t,i){return this.T0t.w_(t,i)}constructor(...t){super(...t),this.T0t=new $,this.Ds=t=>{this.jo(t)}}};r();var b0=class extends d{constructor(t){super("addtask"),this.task=t}},L0=class extends Js{Qh(){return new b0(this.N0t.so)}constructor(t){super("D0t"),this.N0t=t}};r();var k0,x0=class extends d{constructor(t){super("removetask"),this.task=t}},C0=class extends Js{Qh(){return new x0(this.task.so)}constructor(t){super("I0t"),this.task=t}},O0=class extends E0{v0t(t){this.jo(new L0(t))}M0t(t){this.jo(new C0(t))}constructor(){super()}};!function(t){t.UNINITIALISED="uninitialised",t.INITIALISED="initialised"}(k0||(k0={}));var Yu=class extends i{async zg(){await this.S0t(),this.Rft("initialised")}async S0t(){try{await this.E0t()}catch(t){0}}async E0t(){const t=await this.kut.cit();for(const i of t){const t=this.L0t.b0t(i.id,i.sourceDescription,i.parameters,this.k0t);this.x0t(t),this.bC.gm(t),await t.C0t}}get FI(){return this.Bft}Rft(t){this.Bft=t,this.jo(new Qc)}get O0t(){return this.bC}b0t(t,i,e){void 0===e&&(e="persistent");const s=this.L0t.j0t(t,i,e);return this.z0t(s,e),this.bC.gm(s),this.x0t(s),s}async z0t(t,i){try{await this.P0t(t,i)}catch(t){throw k("Unable to persist task - "+t)}}async P0t(t,i){await this.kut.oit({key:t.u,id:t.u,sourceDescription:t.ac,parameters:t.pI},i)}x0t(t){t.dn("Mft",(()=>{t.FI===Ko.EVICTED&&this.bC.wm(t)}))}constructor(t,i,e){super(),this.Bft="uninitialised",this.bC=new O0,this.L0t=i,this.k0t=e,this.kut=t,this.zg()}};r(),r(),r(),r();var Dh=class{get HB(){return this.B0t}get R0t(){return this.U0t}get Q0t(){return this.F0t.HB}get Y0t(){let t=0,i=0;return this._m.forEach((e=>{t+=e.timeRanges.HB,i+=e.totalQualityDurationToCache})),0===i?0:S.min(1,t/i)}get F0t(){return this.G0t}hp(t){return!!Xc(this._m,t._m)&&(!!x_(this.U0t,t.U0t)&&(!!x_(this.HB,t.HB)&&(!!x_(this.Q0t,t.Q0t)&&this.F0t.UB(t.F0t))))}constructor(t,i,e){if(this.U0t=t,this._m=i,this.B0t=e,0===this._m.size)this.G0t=re.ZB();else{let t=new re([-1/0,1/0]);this._m.forEach((i=>{t=t.bn(i.timeRanges)})),this.G0t=t}}};Dh.QUALITY_TIME_RANGES_NULL_OBJECT=Mt(),Dh.CACHE_PROGRESSION_NULL_OBJECT=new Dh(0,Dh.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),Dh.W0t=Dh.CACHE_PROGRESSION_NULL_OBJECT,r(),r(),r(),r();var j0=class extends d{constructor(){super("progress")}},z0=class extends Js{Qh(){return new j0}constructor(){super("V0t")}};r(),r();var P0,B0=class extends Ga{get name(){return"H0t"}constructor(t,i){super(t,i)}};async function R0(t,i,e){const s=[];for(const n of t.Dht)s.push(U0(n,i,e));return{q0t:await Promise.all(s)}}async function U0(t,i,e){const s=[];for(const n of t.dst)Q0(n)||s.push(G0(n,i,e));return{tt:await Promise.all(s),$w:t.$w}}function Q0(t){return t.rst.every(Y0)}r(),r(),r(),function(t){t[t.bv=0]="bv",t[t.Lv=1]="Lv"}(P0||(P0={}));var F0=1;function Y0(t){return t.bet!==F0&&Boolean(t.bet)}async function G0(t,i,e){const s=[];for(const i of t.rst)Y0(i)||s.push(W0(i,e));const n=await Promise.all(s),r=t.Tet[0],h=t.Det,o=h?function(t,i){const e=[],s=function(t){return t?Ji(t,"avc")?el.VIDEO_H264:Ji(t,"hev")||Ji(t,"hvc")||Ji(t,"hvt")||Ji(t,"lhv")||Ji(t,"lhe")||Ji(t,"lht")?el.VIDEO_H265:Ji(t,"mp4")?el.VIDEO_MP4:Ji(t,"mpeg2")?el.VIDEO_MPEG2:Ji(t,"mpeg")?el.VIDEO_MPEG:el.VIDEO_UNKNOWN:el.VIDEO_UNKNOWN}(t);for(const t of i){const i=t.iet.split(":").pop(),n=t.tet;e.push({mimeType:s,uuid:i,data:n})}const n=P0.bv,r=Np;return{type:n,schemeType:r,schemeDatas:e}}(r,h):void 0,a=yF(t,i);return{Uw:n,ys:t.U5,$w:t.$w,gP:o,zlt:a}}async function W0(t,i){const e=await async function(t,i){const e=[],s=t.met;t.qst&&e.push({Fm:0,lt:0,X0t:t.qst});const n=s.Tnt();let r=n;for(;r;){if(t.ont(r)){const s=await t.ant(r,i,(new Z_).$f);for(let i=0;i<s.L;i++)e.push(V0(s.jrt(i),t))}else e.push(V0(r,t));r=s.Rnt(r)}const h=s.Ent(),o=h.Ym-n.Fm;return{lt:o,vit:e}}(t,i),s={u:H0(t),iI:e,jz:t.jz,g7:t.g7,Mi:t.Mi,$w:t.$w,Ti:t.Ti};switch(t.$w){case Zt.Au:break;case Zt.Yv:var n,r;s.Eet=null!=(r=null==(n=t.Eet)?void 0:n.vp())?r:NaN;break;case Zt.Gv:s.audioSamplingRate=t.Met}return s}function V0(t,i){return{Fm:t.Fm,lt:t.lt,X0t:i.snt(t)}}function H0(t){return t.Kst.yn+"-"+(""+t.u)}function q0(t,i){const e=function(t){const i=function(t){const i=Mt();for(const e of t){let t=i.get(e.yNt);t||(t={$w:e.$w,ZT:[]},i.set(e.yNt,t)),t.ZT.push(e)}return i}(t),e=Kn();return i.forEach((t=>{for(const i of t.ZT){let s=e.get(t.$w);s||(s=Mt(),e.set(t.$w,s));let n=s.get(i.v);n||(n=[],s.set(i.v,n)),n.push(i)}})),e}(t);return function(t,i){const e=Kn();return t.forEach(((t,s)=>{const n=Mt();t.forEach(((t,e)=>{const r=[];for(const e of t){const t=X0(e,s,i);r.push(t)}n.set(e,r)})),e.set(s,n)})),e}(e,i)}function X0(t,i,e){const s=t.yNt,n={CNt:t,uDt:[]};for(const t of e)fq(i,s,t)&&n.uDt.push(t);return n}async function Z0(t,i){const e=await i.Qot([t],{});return RH(e.xS,{},e.Yot)}async function K0(t,i){return nH(t)?async function(t,i){const e=q0(t.ZT,t.oSt),s=await async function(t,i){const e=[],s=t.entries();for(let t=s.next();!t.done;t=s.next()){const[s,n]=t.value,r=await t1(n,s,i);e.push(r)}return e}(e,i),n=await async function(t,i){const e=[];for(const o of t){var s,n;const t=await n1(o.xst,i);var r,h;t.jz=o.jz,t.g7=o.Tet?$0(o.Tet):"",t.Mi=null!=(r=null==(s=o.tDt)?void 0:s.Mi)?r:0,t.Ti=null!=(h=null==(n=o.tDt)?void 0:n.Ti)?h:0,e.push(t)}return{$w:Zt.Hv,tt:[{ys:AG,$w:Zt.Hv,Uw:e}]}}(t.oSt,i);return s.push(n),{lt:J0(s),Z0t:[t.xst],Nst:[{q0t:s}]}}(t,i):function(t){const i=r1(t);return{lt:i.lt,Z0t:[t.xst],Nst:[{q0t:[{$w:Zt.Hv,tt:[{$w:Zt.Hv,ys:AG,Uw:[{u:t.xst,iI:i,jz:0,g7:"",Mi:0,$w:Zt.Hv,Ti:0}]}]}]}]}}(t)}function J0(t){let i=-1/0;for(const e of t)for(const t of e.tt)i=S.max(i,...t.Uw.map((t=>t.iI.lt)));return i}function $0(t){return[t.ZNt,t.KNt,t.mIt].filter(oe).join(",")}async function t1(t,i,e){const s=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,i]=t.value,n=await i1(i,e);s.push(n)}return{$w:e1(i),tt:s}}async function i1(t,i){const e=[],s=t[0].CNt;for(const s of t){const t=await s1(s,i);e.push(t)}return{ys:s.ys||AG,$w:e1(s.$w),Uw:e}}function e1(t){switch(t){case ve.Gv:return Zt.Gv;case ve.Yv:return Zt.Yv;case ve.HM:case ve.MIt:return Zt.Au;default:return Zt.Hv}}function s1(t,i){const e=function(t){const i=t.CNt.xst,e=t.uDt.map((t=>t.xst));return i||(e.length?e[0]:void 0)}(t);return n1(e,i)}async function n1(t,i){let e={lt:0,vit:[]};if(t){const s=await Z0(t,i);rH(s)&&(e=r1(s))}return{u:t||"default",K0t:t,iI:e,jz:0,g7:"",Mi:0,$w:Zt.Hv,Ti:0}}function r1(t){const i=[];let e,s=0;for(const n of t.vit){const t=s;!n.lSt||void 0!==e&&oH(n.lSt.xst,e)||(i.push(h1(n.lSt,t)),e=n.lSt.xst),i.push(o1(n,t)),s+=n.lt}return{lt:s,vit:i}}function h1(t,i){return{Fm:i,lt:0,X0t:a1(t.xst)}}function o1(t,i){return{Fm:i,lt:t.lt,X0t:a1(t.xst)}}function a1(t){return{Iu:t.zy,net:t.Frt?[t.Frt.yn,t.Frt.yn+t.Frt.L]:void 0,NS:!1}}r(),r();var u1=class{async J0t(t){if(!t.src)throw new k("Invalid typed source");const i=t.type;if(ow(i))return await this.$0t(t);if(hw(i))return await this.t1t(t);throw new k("Unexpected source type")}async $0t(t){try{const i=await Z0(t.src,this.Fot);return await K0(i,this.Fot)}catch(t){throw new k("Unable to fetch HLS manifest")}}async t1t(t){try{const i=new SQ({tA:le.Ph(t.src),yot:t.liveOffset,Iot:t.timeServer,NS:t.useCredentials},this.i1t,ab.QG,this.Fot,t.dash);return await i.G,await async function(t,i,e){const s=[];for(const n of t.Nst)s.push(R0(n,i,e));const n=await Promise.all(s);return{lt:t.yst.Vit(),Z0t:[t.lot],Nst:n}}(i.wr.Zst,t.contentProtection,this.Xgt)}catch(t){throw new k("Unable to fetch DASH manifest")}}constructor(t,i,e){this.Fot=t,this.Xgt=i,this.i1t=e}};r();var c1=class{e1t(){const t=new $s;return this.s1t.push(t),this.n1t(),t.sL}async r1t(t,i){try{await t}finally{this.h1t-=1,this.n1t(),0===this.s1t.length&&0===this.h1t&&i.iL(!0)}}n1t(){if(this.s1t.length>0&&this.h1t<this.o1t){this.s1t.shift().iL(),this.h1t+=1}}constructor(t){this.s1t=[],this.h1t=0,this.o1t=t}};var l1=class extends i{get C0t(){return this.zg()}async zg(){const t=new u1(this.Fot,this.Xgt,this.i1t);this.a1t=await t.J0t(this.u1t);const i=function(t,i){if(ji(t)){if(Ji(t,"%"))return T(t)/100*i;throw new k("Unexpected - Invalid string supplied as amount to cache.")}return i<t?i:t}(this.xut.pI.amount,this.a1t.lt);let e;this.B0t=i;const s=R(this.a1t.Z0t[0]),n=(await this.Dit.Ait.fit(s,"manifestURL")).filter((t=>ks(t.references,this.xut.u))),r=[],h=this.xut.pI.bandwidth;for(const t of this.a1t.Nst)for(const i of t.q0t)for(const t of f1(i,this.xut.pI.preferredTrackSelection))for(const i of g1(t.Uw,h))r.push(i);this.c1t=S.ceil(r.map((t=>t.jz*function(t,i){let e=0;for(const s of t.iI.vit.map((t=>t.lt)))if(e+=s,e>=i)return e;return e}(t,i)/8)).reduce(((t,i)=>t+i),0));const o=Mt();if(n&&0!==n.length){const t=n.reduce(((t,i)=>t+i.byteSize),0);for(const t of n){const i=t.qualityId,e=new re(t.startsAndEnds);if(o.has(i))o.get(i).timeRanges=o.get(i).timeRanges.xB(e).kB(5e-4);else{const t=xe(r,(t=>t.u===i));var a;const s=S.min(this.B0t,null!=(a=null==t?void 0:t.iI.lt)?a:1/0);o.set(i,{timeRanges:e,totalQualityDurationToCache:s})}}e=new Dh(t,o,this.B0t)}else{for(const t of r)o.set(t.u,{timeRanges:re.ZB(),totalQualityDurationToCache:S.min(t.iI.lt,this.B0t)});e=new Dh(0,o,this.B0t)}this.l1t=e}get d1t(){return this.c1t}get l1t(){return this.f1t}set l1t(t){this.f1t.hp(t)||(this.f1t=t,t.hp(Dh.W0t)||this.jo(new z0))}async mi(t){await this.ko,await this._1t(this.a1t,t)}async _1t(t,i){if(!t.Z0t)throw new k("Unexpected - manifest is missing locations");await this.g1t();const e=[];for(const s of t.Nst)e.push(this.w1t(s,t.Z0t[0],i));return Nc(e)}async g1t(){const t=await this.A1t.cit();for(const i of t){const t=await this.Dit.mit.Kb(i.key);if(t)await d1(t,this.xut.u,this.Dit.mit,this.k0t);else try{await this.Dit.mit.oit(i,this.k0t)}catch(t){throw new B0("Unable to store manifest with url: "+i.locationURL,t)}}await this.A1t.git()}w1t(t,i,e){const s=[];for(const n of t.q0t){const t=f1(n,this.xut.pI.preferredTrackSelection);for(const n of t)s.push(this.v1t(n,i,e))}return Nc(s)}async v1t(t,i,e){const s=this.xut.pI.bandwidth,n=g1(t.Uw,s);t.$w===Zt.Yv&&t.zlt&&t.zlt.FO.widevine&&"persistent"===t.zlt.FO.widevine.licenseType&&(await this.m1t(t.zlt),Pi(e));const r=[];for(const t of n)r.push(this.p1t(t,i,e));return Nc(r)}async p1t(t,i,e){Pi(e);const s=t.iI.vit[0].Fm+this.B0t,n=[];let r=!1;for(const h of t.iI.vit){if(h.Fm>=s||this.stopIfFailed(r))break;await this.y1t(e),await this.M1t.e1t(),n.push(this.M1t.r1t(this.T1t(h,t,i),this.N1t).catch((t=>(r=!0,Promise.reject(t)))))}return Nc(n)}async y1t(t){if(null==t?void 0:t.Gf)throw await this.N1t.sL,new Eu}async D1t(){return await this.ko.catch(h),this.a1t}m1t(t){return Promise.resolve()}I1t(){return le.Wv("License renewal unsupported in this SDK."),Promise.resolve()}async T1t(t,i,e){const s=this.Dit.Ait,n=sh(t.X0t.Iu,t.X0t.net),r=await s.Kb(n);if(r)await d1(r,this.xut.u,s,this.k0t),this.S1t(r,!1);else try{const s=await this.E1t(t.X0t),{segmentMetadataEntry:n,segmentEntry:r}=this.b1t(t,i,e,s);await this.Dit.wit((async t=>{await t.Ait.oit(n,this.k0t),await t.vit.oit(r,this.k0t)})),this.S1t(n,!0)}catch(i){throw new B0("Unable to store segment with url: "+t.X0t.Iu,i)}}async E1t(t){const i=await this.ogt.e_t(t,!1,this.DEFAULT_CACHING_SEGMENT_TIMEOUT,void 0,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT);return await this.agt(i)}async agt(t){return{buffer:await t.jj()}}b1t(t,i,e,s){const n=sh(t.X0t.Iu,t.X0t.net),r=t.Fm,h=t.lt,o=this.L1t(s);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:R(e),qualityId:i.u,byteSize:o,startsAndEnds:new re([r,r+h]).pB,references:[this.xut.u]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:R(e),data:s,references:[this.xut.u]}}}L1t(t){return t.buffer.byteLength}S1t(t,i){const e=t.qualityId,s=this.f1t,n=s._m;n.get(e).timeRanges=n.get(e).timeRanges.xB(new re(t.startsAndEnds)).kB(5e-4),this.l1t=new Dh(i?s.R0t+t.byteSize:s.R0t,n,this.B0t)}stopIfFailed(t){return!1}constructor(t,i,e,s,n,r,h,o){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this.N1t=new $s,this.f1t=Dh.W0t,this.xut=t,this.Dit=i,this.Fot=e,this.A1t=s,this.ogt=n,this.Xgt=r,this.i1t=o,this.k0t=h,this.c1t=-1;const a=this.xut.ac.sources[0];this.u1t=a,this.ko=this.zg(),this.M1t=new c1(this.xut.pI.parallelTasksThreshold)}};async function d1(t,i,e,s){ks(t.references,i)||(t.references.push(i),await e.oit(t,s))}function f1(t,i){switch(t.$w){case Zt.Gv:return _1(t.tt,i.audioTrackSelection);case Zt.Au:return _1(t.tt,i.textTrackSelection);default:return _1(t.tt,[])}}function _1(t,i){if(0===i.length)return t.length?[t[0]]:[];const e=[];for(const s of t)i.indexOf(s.ys)>-1&&e.push(s);return e}function g1(t,i){if(!t.length)return[];const e=[...t].sort(tF),s=e.filter((t=>t.jz<=i));return s.length>0?[s.pop()]:[e.shift()]}var w1=class{async k1t(){await this.Dit.wit((async t=>{await this.x1t(t),await this.C1t(t),await this.O1t(t),await this.j1t(t)}))}async x1t(t){const i=t.pit,e=this.xut.u;await i.wm(e)}async C1t(t){const i=t.Ait,e=t.vit,s=this.xut.ac.sources[0];if(!qc(s))return;const n=R(s.src),r=(await i.fit(n,"manifestURL")).filter((t=>ks(t.references,this.xut.u)));for(const t of r)Hc(t.references,this.xut.u),0===t.references.length?(await i.wm(t.key),await e.wm(t.key)):await i.oit(t)}async O1t(t){const i=t.mit,e=this.z1t(),s=(await i.$tt(e)).filter((t=>ks(t.references,this.xut.u)));for(const t of s)Hc(t.references,this.xut.u),0===t.references.length?await i.wm(t.key):await i.oit(t)}z1t(){if(!this.a1t)return[];const t=this.xut.ac.sources[0];if(!qc(t))return[];const i=R(t.src),e=function(t){if(!t)return[];const i=[];for(const e of t.Nst)for(const t of e.q0t)for(const e of t.tt)for(const t of e.Uw)t.K0t&&i.push(t.K0t);return function(t){return t.reduce(((t,i)=>(t.indexOf(i)<0&&t.push(i),t)),[])}(i)}(this.a1t).map((t=>({src:t}))).map((t=>R(t.src)));return[i,...e]}async j1t(t){const i=t.yit,e=(await i.cit()).filter((t=>ks(t.references,this.xut.u)));for(const t of e)Hc(t.references,this.xut.u),0===t.references.length?(await i.wm(t.key),this.P1t(t)):await i.oit(t)}P1t(t){}constructor(t,i,e){this.xut=t,this.Dit=i,this.a1t=e}},A1=new class{h8(t,i,e){return new w1(t,i,e)}};r(),r();var v1=class{get so(){return this.Oa||(this.Oa=function(t){return{renew(i){t.B1t(i)}}}(this)),this.Oa}B1t(t){this.R1t(t)}async R1t(t){try{await this.U1t.I1t(t)}catch(t){0,this.ott.Rft(Ko.ERROR)}}constructor(t,i){this.ott=t,this.U1t=i}},m1=class extends ${get C0t(){return this.U1t.C0t}get so(){return this.Oa||(this.Oa=function(t){let i,e={get id(){return t.u},get status(){return t.FI},get source(){return t.ac},get parameters(){return t.pI},get duration(){return t.lt},get cached(){return t.Q1t.ks()},get secondsCached(){return t.F1t},get percentageCached(){return t.Y1t},get bytes(){return t.G1t},get bytesCached(){return t.W1t},get license(){return t.uY.so},start(){t.yn()},pause(){t.Pg()},remove(){t.wm()},addEventListener(t,e){i.dn(t,e)},removeEventListener(t,e){i.hn(t,e)}};return i=new xb(t,["V0t","Mft"],e),e}(this)),this.Oa}get u(){return this.ym}get uY(){return this.V1t}get FI(){return this.Bft}Rft(t){this.Bft!==t&&(this.Bft=t,this.jo(new Qc))}get ac(){return this.uc}get pI(){return this.H1t}get lt(){return this.U1t.l1t.HB}get Q1t(){return this.U1t.l1t.F0t}get F1t(){return this.U1t.l1t.Q0t}get Y1t(){return this.U1t.l1t.Y0t}get G1t(){return this.U1t.d1t}get W1t(){return this.U1t.l1t.R0t}yn(){this.Bft===Ko.EVICTED||this.Bft===Ko.DONE||this.q1t()}async q1t(){try{this.Rft(Ko.LOADING);const t=new Z_;this.X1t=t,await this.U1t.mi(t.$f),this.Rft(Ko.DONE)}catch(t){Er(t)?this.Rft(Ko.IDLE):this.Rft(Ko.ERROR)}finally{this.X1t.Hf()}}Pg(){this.X1t.i_()}wm(){this.FI===Ko.LOADING?(this.dn("Mft",this.evictOnLoading),this.Pg()):this.Z1t()}async Z1t(){try{const t=await this.U1t.D1t();await A1.h8(this,this.Dit,t).k1t(),this.U1t.l1t=Dh.W0t,this.Rft(Ko.EVICTED)}catch(t){0,this.Rft(Ko.ERROR)}}constructor(t,i,e,s,n,r){super(),this.X1t=new Z_,this.evictOnLoading=()=>{this.hn("Mft",this.evictOnLoading),this.Z1t()},this.ym=t,this.uc=i,this.H1t=e,this.Dit=s,this.U1t=n.h8(this,this.Dit,r),this.V1t=new v1(this,this.U1t),this.Bft=1===this.U1t.l1t.Y0t?Ko.DONE:Ko.IDLE,this.U1t.dn("V0t",(t=>{this.Ds(t),1===this.Y1t&&this.Rft(Ko.DONE)}));const h=new Date,o=this.H1t.expirationDate.getTime()-h.getTime();(function(t){return t<2147483647})(o)&&v((()=>this.Z1t()),o)}};var Zu=class{j0t(t,i,e){const s=Tn();return this.b0t(s,t,i,e)}b0t(t,i,e,s){return new m1(t,i,e,this.Dit,this.K1t,s)}constructor(t,i){this.Dit=t,this.K1t=i}};r();var p1=30,y1=5;function M1(t){if(!t)throw new k("Unexpected - The cache parameters are undefined");const i=function(t){if(ji(t)&&!Ji(t,"%"))return j(t);return t}(t.amount);!function(t){if(function(t){return ji(t)&&Ji(t,"%")}(t)){const i=T(t);if(M(i)||i<0||i>100)throw new k("The amount as percentage must be between 0 and 100 percent.")}if(!ji(t)&&M(t))throw new k("The amount must be a number or a string")}(i);const e=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+p1),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||D_(t)&&t>new Date}(t))throw new k("Invalid expiration date for the cache parameters")}(e);const s=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(M(t)||t<0)throw new k("The bandwidth must be between zero and infinity.")}(s);const n=function(t){if(!t)return y1;if(M(t))throw new k("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:i,expirationDate:e,bandwidth:s,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}var T1=class{set PJt(t){this.J1t=t,this.$1t=0}get PJt(){return this.J1t}YVt(){if(!this.J1t)return;const t=this.J1t.cZt;for(;void 0!==this.t4t||this.$1t<t.length;)if(void 0===this.t4t){const i=t[this.$1t];this.t4t=Dr.uZt(i),this.$1t+=1}else{let t=this.t4t.bc();for(;void 0!==t&&void 0===t.WQt;)t=this.t4t.bc();if(void 0!==t)return t.WQt;this.t4t=void 0}}Gn(){for(this.PJt=void 0,this.t4t=void 0,this.$1t=0,this.EC.i_(),this.EC=new Z_;this.i4t.length;)this.pJt()}getCachingTaskService(t){return new Yu(Re.Lb.pit,t,"temporary")}async LOt(t){const i=f0(t.mYt,this.PV.ads.allowedMimeTypes);if(!i.length)return;const e=await Ne.Lb.aB(i,$a({sources:i}));if(!e.h.ZP())return;this.U1t||(this.U1t=new this.K1t(this.e4t));const s=Re.Lb,n=new Zu(s,this.U1t),r=this.getCachingTaskService(n).b0t($a({sources:e.ac}),M1({amount:10,bandwidth:Ho.Lb.Dz()||this.hR.WW}),"temporary");this.i4t.push(r);const o=this.U1t.h8(r,s,"temporary");this.EC.i_(),this.EC=new Z_,o.mi(this.EC.$f).then(h),this.s4t(o,t)}constructor(t,i,e,s){this.i4t=[],this.$1t=0,this.AJt=async()=>{const t=this.YVt();t&&await this.LOt(t)},this.pJt=()=>{const t=this.i4t.shift();null==t||t.wm()},this.s4t=async(t,i)=>{let e=!1;for(;!e;)await t.w_("V0t"),e=1===t.l1t.Y0t;i.lt<5&&this.AJt()},this.PV=t,this.e4t=i,this.EC=new Z_,this.K1t=e,this.hR=s}};r(),r();var N1={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new re([0,0]).pB,references:[]},D1={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},I1=class t extends RY{async cht(t,i,e,s){try{return await super.cht(t,i,e,s)}catch(t){Et(t)}const n=await this.n4t.cht(t,i,e,s);return await this.r4t(t,i,n),n}async r4t(i,e,s){if(void 0===this.h4t)return;const n=this.Dit.Ait,r=sh(i,e),h=await n.Kb(r);if(h)await d1(h,this.h4t,n,this.k0t);else try{const i={buffer:s},{segmentMetadataEntry:e,segmentEntry:n}=t.b1t(r,i,this.h4t);await this.Dit.wit((async t=>{await t.Ait.oit(e,this.k0t),await t.vit.oit(n,this.k0t)}))}catch(t){throw new B0("Unable to store segment with url: "+i,t)}}static b1t(t,i,e){return{segmentMetadataEntry:qr({},N1,{key:t,segmentURLsegmentByteRange:t,references:[e]}),segmentEntry:qr({},D1,{key:t,segmentURLsegmentByteRange:t,data:i,references:[e]})}}constructor(t,i,e,s,n){super(t),this.n4t=new BY(i),this.Dit=e,this.h4t=s,this.k0t=n}};var S1,E1=class{h8(t,i,e){void 0===e&&(e="persistent");const s=Boolean(t.ac.sources[0].useCredentials),n=new KF(this.LS,en.Hv),r=new sF(this.LS,s),h=new V(i.mit,i.Ait,i.vit,i.yit),o=function(t,i,e,s,n){return new I1(i,t,e,s,n)}(this.LS,h,i,t.u,e),a=new An,u=new aF(oF(r,h),a,t);return this.o4t(t,i,u,a,n,o,e)}constructor(t){this.LS=t}},b1=class extends E1{o4t(t,i,e,s,n,r,h){return new l1(t,i,e,s,n,r,h,YW())}},L1=b1;!function(t){t[t.NOT_INITIALISED=0]="NOT_INITIALISED",t[t.a4t=1]="a4t",t[t.u4t=2]="u4t",t[t._v=3]="_v",t[t.Dv=4]="Dv",t[t.c4t=5]="c4t"}(S1||(S1={}));var k1=class i extends po{get e0t(){return this.YZt}static get QUt(){return ft.HXt}get QUt(){return i.QUt}RZt(t,i,e){this.MWt=i,"boolean"==typeof e&&(this.lQt=e),this.I$=he.Rv,this.jo(new Z(this.I_,he.Rv)),i===Xo.CUt&&this.S4?Mo(this.QVt([t])):this.l4t.push(t)}get I_(){return this.d4t.w$t?this.d4t.I_:this.h.I_}set I_(t){}get lt(){return this.d4t.lt}get _e(){return this.h._e}get L_(){return this.d4t.L_}get dt(){return this.NKt}get C_(){return this.DKt}get Q_(){return this.d4t.Q_}set Q_(t){this.Q_!==t&&(this.d4t.Q_=t,this.jo(new ge(this.I_,this.Mg)))}get G_(){return!0}get V_(){return this.d4t.V_}get og(){return this.I$}get cg(){return re.ZB().ks()}get wg(){return 0}get pg(){return 0}get Mg(){return this.d4t.Mg}set Mg(t){this.Mg!==t&&(this.d4t.Mg=t,this.jo(new ge(this.I_,this.Mg)))}async Bg(){if(this.f4t)return;if(this.jo(new ih(this.I_)),this._4t(),this.l4t.length&&(this.f4t=this.QVt(this.l4t),await this.f4t,this.f4t=void 0),this.NKt&&this.lQt)return;await this.g4t.EJt(this.h.I_);const t=this.w4t;4!==t&&1!==t&&5!==t||(!this.YZt&&this.A4t.length?this.v4t():this.YZt?(this.m4t=!1,this.d4t.Bg()):(this.NQt(),this.h.Bg()),this.w4t=3)}Pg(){3===this.w4t&&(this.d4t.Pg(),this.w4t=4)}wJt(){this.g4t.wJt()}yn(){this.w4t=1,this.g4t.yn(),this.I$=he.Uv,this.jo(new Z(this.I_,he.Uv))}async Rg(){this.g4t&&(this.g4t.wn(),this.p4t(!1),this.J$t.Rg(),this.w4t=5,this.y4t=!1,this.YZt&&(this.g4t.zJt(this.YZt.IGt),this.YZt=void 0)),this.S4=!1,this.m4t=!0,sr(this.A4t),this.pQt.Ew===this&&(this.NQt(),this.h.ye()),sr(this.l4t),await this.d4t.Rg(),await this.v$t.Gn()}uT(){this.d4t.V$t(),this.J$t.V$t()}zg(){this.v$t.zg(),this._4t()}Wg(i){return!(i.type!==t.NA||!this.g4t||!this.g4t.DJt(-1))&&(this.g4t.TJt().then(h),!0)}M4t(){return this.d4t.w$t}ye(){}we(){}async QVt(t){const i=await T0.w0t(t,this.LS,this.WUt);if(!i.length){const t="Ads could not be loaded.";return this.WUt.jo($h.iQt(new bi(ze.ADBLOCK,qe.FILE_NOT_FOUND),t)),void(this.lQt?(this.DKt=new Ri(ue.AD_BLOCKER_DETECTED,t),this.NKt=Yn(this.DKt),this.jo(new _i(this.DKt))):this.S4&&!this.YZt&&0===this.A4t.length&&this.T4t())}this.g4t.jJt(i),this.I$=he.Un,this.jo(new Z(this.I_,this.I$)),this.WUt.jo(new N0),this.pQt.Ew===this||this.pQt.V_||this.g4t.EJt(this.h.I_),0!==this.w4t&&5!==this.w4t||this.yn()}async v4t(){if(2!==this.w4t&&!this.N4t){0,this.N4t=!0,this.w4t=2;const t=this.YZt;this.D4t(),this.YZt?(await this.YZt.IGt.cJt(this.WUt),this.I4t()||(this.N4t=!1),this.WUt.jo(new y0(this.S4t(this.YZt))),await this.E4t()):((null==t?void 0:t.IGt.fJt())&&this.WUt.jo(new Oh(this.S4t(t))),this.N4t=!1,this.w4t=1,this.T4t())}}T4t(){this.NQt(),this.h.ye(),this.h.L_?this.h.jo(new Ki(this.h.I_)):this.pQt.Bg()}D4t(){let t;if(this.YZt&&this.I4t())t=this.YZt.IGt;else{if(0===this.A4t.length)return;t=this.A4t.shift()}if(!t)return;const i=t.bc(!0);i?this.YZt=i:(this.YZt&&(this.g4t.zJt(this.YZt.IGt),this.YZt=void 0),this.YZt=void 0)}async E4t(){const t=this.b4t();if(t){if(!this.YZt)return;this.L4t=t,this.k4t(this.YZt.rFt),this.x4t(se.XYt);const i=this.L4t.bc();this.YZt.IGt.fJt()&&(this.J$t.D$t(),1===this.YZt.IGt.het&&this.WUt.jo(new ct(this.S4t(this.YZt)))),await this.B$t(i)}else this.w4t=1,this.N4t=!1,this.YZt=void 0,this.v4t()}async B$t(t){if(t){let i=Boolean(t.WQt),e=Boolean(t.XQt);const s=Boolean(t.HQt);if(t.HQt)for(const s of t.HQt.DFt)i?this.d4t.I$t(s):e&&this.J$t.I$t(s);const n=this.YZt;if(t.WQt){if(t.WQt.Ol=n,void 0!==n.aWt.skipOffset){const i=kc.ZGt(n.aWt.skipOffset,t.WQt.lt);i&&i<t.WQt.lt&&(t.WQt.MYt=i)}this.J$t.D$t(),this.yQt(),await this.d4t.B$t(t.WQt,t.dt,{width:this.h._e.offsetWidth,height:this.h._e.offsetHeight},t.ZQt),i=!0}if(t.XQt){if(t.XQt.sFt[0].Ol=n,void 0!==n.aWt.skipOffset){const i=kc.ZGt(n.aWt.skipOffset,this.h.lt);i&&(t.XQt.sFt[0].Ol.MYt=i)}i&&this.d4t.t0t(),await this.J$t.B$t(t.XQt,t.dt,{width:this.h._e.offsetWidth,height:this.h._e.offsetHeight},t.ZQt),e=!0}if(i){this.w4t=3,this.d4t.ye();const t=!(this.wQt&&0===this.wQt.timeOffset);this.m4t=t,this.v$t.Pg(),this.d4t.Bg(),this.h.Pg(),this.h.we(),this.yQt(),this.I$=he.Qv,this.jo(new Z(this.I_,he.Qv)),this.d4t.q$t()}e&&(this.w4t=3,this.J$t.ye(),this.J$t.q$t()),(i||e||s)&&this.C4t(t.qQt),i||e||await this.O4t(),!i&&e&&(this.I4t()||this.A4t.length>0?this.v4t():(this.T4t(),this.YZt=n))}else null===t?await this.O4t():this.p4t(!0)}O4t(){const t=this.L4t;return this.B$t(t&&t.bc())}p4t(t){this.x4t(se.ZYt),this.j4t(),this.w4t=1;const i=this.YZt&&this.YZt.IGt.bc(!1);if(this.N4t=!1,i)t&&(this.w4t=1,this.v4t());else{if(this.pQt.Ew!==this)return;this.h.ye(),!this.h.L_&&t&&this.h.Bg(),this.NQt()}}NQt(){this.z4t(),super.NQt()}z4t(){this.h.L_&&(this.w4t=5),this.YZt&&(this.YZt.IGt.fJt()&&this.WUt.jo(new Oh(this.S4t(this.YZt))),this.g4t.zJt(this.YZt.IGt),this.YZt=void 0)}k4t(t){this.P4t=this.P4t.concat(t)}j4t(){this.P4t=[]}B4t(t){this.h._e.appendChild(t)}x4t(t){for(const i of this.P4t)i.qU===t&&Lr(i.eventURL)}C4t(t){this.d4t.HJt(se.FYt);for(const i of t)Lr(i)}get wQt(){return this.YZt?this.S4t(this.YZt).eZt():null}get gQt(){if(!this.YZt)return[];const t=[];if(this.d4t.WQt){const i=this.d4t.WQt;t.push(new Qh(i,this.d4t.m$t,this.YZt,this.g$t(),this.d4t.y$t).eZt())}if(this.J$t.VQt){const i=this.J$t.VQt.sFt[0];i&&t.push(new Hr(i,this.J$t.m$t,this.YZt,this.g$t(),this.J$t.y$t).eZt())}return t}get AQt(){const t=this.g4t?this.A4t.concat(this.g4t.AQt.filter((t=>!t.dJt()))).map((t=>t.cZt)):[];let i=[];for(const e of t)for(const t of e)i=i.concat(this.R4t.aZt(t));return i}get vQt(){return this.g4t.AQt.map((t=>{let i=[],e=0;for(const e of t.cZt)i=i.concat(this.R4t.aZt(e));return i.forEach((t=>{t.duration&&(e+=t.duration)})),{timeOffset:t.Ll,maxDuration:e,maxRemainingDuration:e,ads:i}}))}I4t(){if(!this.YZt)return!1;const t=this.b4t();if(t){let i=t.bc();for(;void 0!==i;){if(i.WQt)return!0;i=t.bc()}}return!1}b4t(){if(this.YZt)return Dr.uZt(this.YZt)}S4t(t){const i=new za(this,this.h);return new u$(t,i)}g$t(){return this.U4t||(this.U4t=new za(this,this.h)),this.U4t}Cg(){return this.v$t.Cg()}m_(){return this.v$t.m_()}qUt(t){this.g4t.qUt(t)}async ln(){await super.ln(),this.h.hn(t.wh,this._4t),this.pQt.dm(this),this.WUt.vR(this.d4t.WUt),this.WUt.vR(this.J$t.WUt),this.WUt.vR(this.g4t),this.d4t.ln(),this.J$t.ln(),await this.v$t.ln()}constructor(i,e,s,n,r,h,o){super(i,s,n),this.lQt=!1,this.NKt=void 0,this.DKt=void 0,this.S4=!1,this.m4t=!0,this.Q4t=i=>{i.type!==t.wh||this.m4t?this.jo(i):this.m4t=!0},this._4t=()=>{this.S4||(this.S4=!0)},this.xJt=t=>{this.A4t.push(...t);for(const i of t)this.S4&&this.pQt.Ew!==this&&this.v4t()},this.F4t=async()=>(this.w4t=1,await this.d4t.D$t(),this.YZt&&this.YZt.IGt.aJt++,this.B$t(this.L4t.bc())),this.Y4t=async t=>{const i=new bi(ze.PLAYBACK,qe.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.WUt.jo($h.iQt(i,t)),await this.d4t.D$t(),this.YZt&&this.YZt.IGt.aJt++,this.B$t(this.L4t.dt())},this.G4t=()=>(this.J$t.D$t(),this.B$t(this.L4t.bc())),this.W4t=t=>{const i=new bi(ze.PLAYBACK,qe.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.WUt.jo($h.iQt(i,t)),this.J$t.D$t(),this.B$t(this.L4t.dt())},this.LS=o,this.y4t=!1,this.v$t=e,this.J$t=new p0(this.W4t,this.G4t,this,s),this.d4t=new v0(this.Y4t,this.F4t,i,this.J$t,r,this,n,e),this.B4t(this.J$t.BJt),this.B4t(this.d4t.BJt);const a=new Pu(o,!1),u=new T1(r,a,b1,h);this.g4t=new s0(this.h,this,this.WUt,u),this.d4t.c_(this.Q4t),this.J$t.c_(this.Ds),this.WUt.Ua(this.d4t.WUt),this.WUt.Ua(this.J$t.WUt),this.WUt.Ua(this.g4t),this.P4t=[],this.A4t=[],this.YZt=void 0,this.L4t=void 0,this.R4t=new Dr(this,this.h),this.w4t=0,this.I$=0,this.jo(new Fo(this.I_,0)),this.jo(new Z(this.I_,0)),this.Su.dn(yt.un,this.Ds),this.N4t=!1,this.l4t=[],this.h.dn(t.wh,this._4t)}};Ts.Lb.zR(new class{get PUt(){return k1.QUt}jR(t){return t&&("string"!=typeof t.integration||t.integration===Mh.DEFAULT||t.integration===Mh.THEO)}BUt(t,i,e,s,n,r,h,o,a,u){const c=new ml(a,s,o,h,u,r);return new k1(t,c,i,e,s,h,o)}i1(t,i,e,s){e.RZt(t,i,s)}sF(t){const i=BJ(t.sources);if(!i)return;const e={integration:Mh.THEO,sources:i};"vast"===e.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===e.sources.type&&void 0!==t.timeOffset&&Ii("property timeOffset will be ignored for vmap ad sources");const s=UJ(t.timeOffset);void 0!==s&&(e.timeOffset=s);const n=UJ(t.skipOffset);return void 0!==n&&(e.skipOffset=n),e}}),r(),r();var x1=class{YW(){var t;return null==(t=this.LKt)||t.initialize(),Promise.resolve()}get BJt(){return this.RJt}get V4t(){return this.H4t.offsetHeight}get q4t(){return this.H4t.offsetWidth}get X4t(){return this.LKt}Z4t(t){"linear"===t?this.RJt.style.marginTop="0px":"nonlinear"===t&&(this.RJt.style.marginTop="-45px")}ye(){return this.RJt.style.opacity="1",this.RJt.style.pointerEvents="",Promise.resolve()}we(){return this.RJt.style.opacity="0",this.RJt.style.pointerEvents="none",Promise.resolve()}Hf(){var t;return null==(t=this.LKt)||t.destroy(),this.LKt=void 0,Promise.resolve()}constructor(t,i){this.LKt=void 0,this.c8=t;const e=c.createElement("div");e.className="theoplayer-ima-wrapper",Du(e),e.style.zIndex="10",li.Ys&&function(t,i){t.addEventListener(i,YT)}(e,"mousedown"),i.appendChild(e);const s=c.createElement("div");s.className="theoplayer-ima",s.style.height="100%",this.H4t=s,e.appendChild(s),this.RJt=e,this.LKt=new google.ima.AdDisplayContainer(this.H4t,this.c8)}};function C1(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}r(),r();var O1=class extends i{async Ng(t){var i;null==(i=this.Qqt)||i.setVolume(t)}Tg(){return this.Qqt.getVolume()}jXt(){return this.Qqt.getRemainingTime()}async Hf(){this.$u.hn(yt.un,this.K4t),this.Qqt.removeEventListener(google.ima.AdEvent.Type.LOADED,this.J4t),this.Qqt.removeEventListener(C1(),this.forwardAdEventListener),this.Qqt.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener),this.Qqt.destroy()}async yn(){this.Qqt.start()}async OKt(){this.Qqt.resume()}async Pg(){this.Qqt.pause()}async uT(){this.Qqt.skip()}async Rg(){this.Qqt.stop()}AXt(){const t=this.Qqt.getCurrentAd();if(t)return XJ(t)}UKt(){return this.Qqt.getCuePoints()}async XKt(t){this.Qqt.updateAdsRenderingSettings(P1(t))}constructor(t,i,e){super(),this.J4t=t=>{t.getAd().isLinear()?this.LKt.Z4t("linear"):this.LKt.Z4t("nonlinear")},this.K4t=()=>{this.Qqt.resize(this.LKt.q4t,this.LKt.V4t,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const i=t.getAd(),e=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:To.EHt,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:To.bHt,[google.ima.AdEvent.Type.CLICK]:To.LHt,[google.ima.AdEvent.Type.DURATION_CHANGE]:To.yA,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:To.kHt,[google.ima.AdEvent.Type.STARTED]:To.xHt,[google.ima.AdEvent.Type.IMPRESSION]:To.CHt,[google.ima.AdEvent.Type.PAUSED]:To.Dv,[google.ima.AdEvent.Type.RESUMED]:To.OHt,[google.ima.AdEvent.Type.AD_PROGRESS]:To.MHt,[google.ima.AdEvent.Type.AD_BUFFERING]:To.jHt,[google.ima.AdEvent.Type.FIRST_QUARTILE]:To.zHt,[google.ima.AdEvent.Type.MIDPOINT]:To.zYt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:To.PHt,[google.ima.AdEvent.Type.COMPLETE]:To.PYt,[google.ima.AdEvent.Type.USER_CLOSE]:To.BHt,[google.ima.AdEvent.Type.LINEAR_CHANGED]:To.RHt,[google.ima.AdEvent.Type.LOADED]:To.UHt,[google.ima.AdEvent.Type.AD_CAN_PLAY]:To.QHt,[google.ima.AdEvent.Type.AD_METADATA]:To.FHt,[google.ima.AdEvent.Type.AD_BREAK_READY]:To.YHt,[google.ima.AdEvent.Type.INTERACTION]:To.GHt,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:To.WHt,[google.ima.AdEvent.Type.SKIPPED]:To.VHt,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:To.HHt,[google.ima.AdEvent.Type.LOG]:To.qHt,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:To.XHt,[google.ima.AdEvent.Type.VOLUME_CHANGED]:To.ZHt,[google.ima.AdEvent.Type.VOLUME_MUTED]:To.KHt}[t]}(t.type),s={type:e,date:new Date,eXt:i?XJ(i):void 0,nXt:ZJ(e,t.getAdData())};this.jo(s)},this.forwardAdErrorEventListener=t=>{this.jo({date:new Date,eXt:void 0,type:VJ.JHt,nXt:{RXt:$J(t.getError())}})},this.Qqt=t,this.LKt=i,this.$u=e,this.$u.dn(yt.un,this.K4t),this.Qqt.init(this.LKt.q4t,this.LKt.V4t,google.ima.ViewMode.NORMAL),this.Qqt.addEventListener(google.ima.AdEvent.Type.LOADED,this.J4t),this.Qqt.addEventListener(C1(),this.forwardAdEventListener),this.Qqt.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener)}};r();var j1=class extends Js{get $4t(){return this.t2t}get BJt(){return this.RJt}Qh(){return this}constructor(t,i){super("JKt"),this.t2t=t,this.RJt=i}},z1=class extends i{async jKt(){var t;null==(t=this.zKt)||t.contentComplete()}async QVt(t,i,e){if(this.i2t)throw new k("Only one ImaAdsRequest can be made at a time.");if(!this.e2t.X4t)throw new k("AdDisplayContainer is not initialized.");this.zKt=new google.ima.AdsLoader(this.e2t.X4t),this.zKt.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.zKt.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.i2t=new $s,this.s2t=i,this.n2t=e;const s=new google.ima.AdsRequest;return t.KWt?s.adTagUrl=t.KWt:t.JWt&&(s.adsResponse=t.JWt),s.linearAdSlotWidth=t.WWt,s.linearAdSlotHeight=t.VWt,s.nonLinearAdSlotWidth=t.HWt,s.nonLinearAdSlotHeight=t.qWt,s.setAdWillAutoPlay(t.XWt),s.setAdWillPlayMuted(t.ZWt),t.$Wt&&(s.omidAccessModeRules=t$(t.$Wt)),this.zKt.requestAds(s),this.i2t.sL}async Hf(){var t,i,e,s;null==(t=this.zKt)||t.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),null==(i=this.zKt)||i.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),null==(e=this.zKt)||e.destroy(),this.zKt=void 0,null==(s=this.i2t)||s.eL("AdsLoader destroyed"),this.i2t=void 0}constructor(t,i){super(),this.onAdsManagerLoadedListener=t=>{if(this.s2t&&this.n2t&&this.i2t){var i;const e=P1(this.n2t),s=this.s2t,n=t.getAdsManager({get currentTime(){return s.I_},get duration(){return s.lt}},e),r=new O1(n,this.e2t,this.$u);this.jo(new j1(n,this.e2t.BJt)),null==(i=this.i2t)||i.iL(r),this.i2t=void 0}},this.onAdsManagerErrorListener=t=>{var i;const e={Yb:t.getError().getMessage(),IHt:t.getError().getVastErrorCode(),KUt:t.getError().getErrorCode(),$w:KJ(t.getError().getType()),SHt:void 0};null==(i=this.i2t)||i.eL(e),this.i2t=void 0},this.$u=i,this.e2t=t}};function P1(t){const i=new google.ima.AdsRenderingSettings;return i.enablePreloading=t.VKt,t.fHt&&(i.uiElements=t.fHt),i.mimeTypes=t.WKt,void 0!==t.qKt&&(i.playAdsAfterTime=t.qKt),void 0!==t.HKt&&(i.loadVideoTimeout=t.HKt),void 0!==t.jZt&&(i.bitrate=t.jZt),void 0!==t.qKt&&(i.playAdsAfterTime=t.qKt),i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i}r();var B1=class extends i{get I_(){return this.Qo.fg?this.r2t:this.Qo.I_}get lt(){return this.Qo.lt}get Q_(){return this.Qo.Q_}get Mg(){return this.Qo.Mg}Gn(){this.r2t=0}constructor(i){super(),this.Qo=i,this.r2t=this.Qo.I_,this.Qo.dn(t.XA,(()=>{this.Qo.fg||(this.r2t=this.Qo.I_),this.jo(new bl(this.I_,void 0))}))}};Z$.Lb.registerWebImaAdPlayerConstructor((function(t,i,e,s,n){H$(s);const r=q$(s)?t.Cg():void 0,h=new x1(r,t._e),o=new z1(h,e),a=new B1(t);return new X$(t,i,e,s,n,h,o,a)})),r(),r(),r(),r(),r();var R1=class extends i{get NV(){return this.q3===Zo.CONNECTED}get q3(){return this.ya}get so(){return this.Oa||(this.Oa=function(t){return{get casting(){return t.NV},get state(){return t.q3},start(){t.Qg()},stop(){t.Fg()},addEventListener(i,e){const s=bo(i,hs);t.dn(s,e)},removeEventListener(i,e){const s=bo(i,hs);t.hn(s,e)}}}(this)),this.Oa}h2t(){this.o2t(),this.jyt.dn(t.vo,this.a2t),le.Ks.n7&&this.ba(Zo.AVAILABLE)}preloadPlayer(t){if(Pi(t),this.Qo.og<he.Un){let i=this.Qo.w_(Dt.uv,t);return this.Qo.eg=Sl.XM,i}return Promise.resolve()}ba(t){t!==this.ya&&(this.ya=t,this.jo(new LK(this.ya)))}async u2t(t){await this.preloadPlayer(t),this.OW.Qg()}Fg(){le.Ks.n7&&this.Qo.Fg()}ln(){this.Uo(),this.jyt.hn(t.vo,this.a2t),this.c2t.i_()}constructor(t,i){super(),this.Oa=void 0,this.ya=Zo.UNAVAILABLE,this.c2t=new Z_,this.handleAirplayChangedEvent=()=>{this.Qo&&this.Qo.P_?this.l2t():this.q3===Zo.CONNECTED&&this.d2t()},this.jyt=t,this.OW=i}},U1=class extends R1{o2t(){this.Qo&&this.Qo.hn(t.fA,this.handleAirplayChangedEvent),this.f2t?this.Qo=this.OW:this.Qo=this._2t,this.Qo.dn(t.fA,this.handleAirplayChangedEvent)}get f2t(){return this.OW.Ug()}async l2t(){if(this.Qo){if(this.f2t){if(!this.Qo.V_){const i=new Promise((t=>v(t,800))),e=this.Qo.w_(t.bh,this.c2t.$f);await Promise.race([e,i])}this.Qo.Bg()}else{this.g2t=this.OW.I_,this.w2t=this.OW.M_,this._2t.dn(t.XA,this.handleAirplayPlayerTimeUpdate),this.A2t=this.OW.Ew,this.OW.Ew=this._2t,this.A2t.Pg(),this.A2t.we(),this._2t.ye(),this._2t.Q_=this.A2t.Q_,this._2t.q_=this.A2t.q_,this._2t.Mg=this.A2t.Mg;let i=this._2t.w_(t.FA);this._2t.I_=this.A2t.I_,await i,this._2t.Bg(),this._2t.Q_=this.A2t.Q_,this._2t.q_=this.A2t.q_,this._2t.Mg=this.A2t.Mg}this.ba(Zo.CONNECTED)}}d2t(){if(this.A2t){this._2t.hn(t.XA,this.handleAirplayPlayerTimeUpdate),this.A2t.Q_=this._2t.Q_,this.A2t.q_=this._2t.q_,this.A2t.Mg=this._2t.Mg;li.ZE&&!li.Ra&&this.OW.lt===1/0?this.w2t?this.A2t.M_=this.w2t:this.A2t.I_=1/0:this.A2t.I_=this.g2t,this.w2t=void 0,this.g2t=void 0,this.A2t.ye(),this._2t.we(),this._2t.V_||this.A2t.Bg(),this.OW.Ew=this.A2t,this._2t.Gn(),this.A2t=void 0}else this.Qo&&(this.Qo.I_=this.Qo.I_+1e-4);this.ba(Zo.AVAILABLE)}Qg(){le.Ks.n7&&(this.jyt.zg(),this.c2t.i_(),this.c2t=new Z_,this.f2t?Mo(this.u2t(this.c2t.$f)):Mo(this.v2t(this.c2t.$f)))}async v2t(t){try{await this._2t.Gn();const i=this.OW.$a();if(void 0===i)throw new k("Not possible to start Airplay without a source");await this._2t.Zh(i,t);const e=this._2t.w_(Dt._v,t);this._2t.Bg(),await function(t,i){return ig((e=>Promise.race([t,yc(i,e).then((()=>{throw new k("Timeout")}))])))}(e,3e3),this._2t.Pg(),Pi(t),this._2t.Qg()}catch(t){if(Er(t))return;0}}ln(){var t;super.ln(),this.OW.dm(this._2t),null==(t=this._2t)||t.ln()}constructor(t,i,e){super(t,i),this.a2t=()=>{var t;const i=null==(t=this.OW.$a())?void 0:t.sources.filter(Co);le.Ks.n7&&(null==i?void 0:i.some(cI))?this.ba(Zo.AVAILABLE):this.ba(Zo.UNAVAILABLE)},this.handleAirplayPlayerTimeUpdate=t=>{this.g2t=t.currentTime,this.w2t=this.OW.M_},this._2t=e,this._2t.we(),i.lm(e),this.h2t()}};r();var dh,Q1=class extends ${Gg(){this.m2t.Gg()}get ot(){return this.m2t.ot}get p_(){return this.m2t.p_}get wt(){return this.lB}get I_(){return this.m2t.I_}set I_(t){this.m2t.I_=t}get M_(){return this.m2t.M_}get lt(){return this.m2t.lt}get _e(){return this.zs}get L_(){return this.m2t.L_}get dt(){return this.m2t.dt}get C_(){return this.m2t.C_}get j_(){return this.m2t.j_}get P_(){return this.m2t.P_}get Sg(){return this.m2t.Sg}get Dg(){return this.m2t.Dg}get R_(){return this.m2t.R_}get Q_(){return this.m2t.Q_}set Q_(t){this.m2t.Q_=t}get G_(){return this.m2t.G_}get V_(){return this.m2t.V_}get q_(){return this.m2t.q_}set q_(t){this.m2t.q_=t}get K_(){return this.m2t.K_}get eg(){return this.m2t.eg}set eg(t){this.m2t.eg=t}get og(){return this.m2t.og}get cg(){return this.m2t.cg}get fg(){return this.m2t.fg}Ug(){return this.m2t.Ug()}Qg(){this.m2t.Qg()}Fg(){this.m2t.Fg()}get rt(){return this.m2t.rt}get wg(){return this.m2t.wg}get pg(){return this.m2t.pg}get ht(){return this.m2t.ht}get Mg(){return this.m2t.Mg}set Mg(t){this.m2t.Mg=t}Bg(){Mo(this.m2t.Bg())}Pg(){this.m2t.Pg()}async Rg(){}$a(){return this.uc}async Zh(t,i){let e;if(Pi(i),this.uc=t,Wc(t.sources))e=tu({src:""});else{const i=t.sources.filter(Co);for(let t of i)if(cI(t)){e=t;break}}if(!e)throw new k("Unsupported source.");await this.m2t.Zh(e,t,i),this.mB(e)}mB(t){this.lB!==t&&(this.lB=t,this.jo(new fs(t)))}Cg(){return this.m2t.Cg()}m_(){return[]}zg(){this.p2t.nR()}Og(t){Dw(this,t)}jg(){}Wg(t){return!1}Yg(){this.m2t.Yg()}async Gn(){this.lB=void 0,this.uc=void 0,await this.m2t.Gn()}ye(){this.m2t.ye()}we(){this.m2t.we()}xg(){return this.m2t.xg()}async ln(){this.Uo(),this.p2t.ln(),await this.m2t.ln(),this.qv.ln(),this.Zv.ln(),this.Tl.ln()}constructor(t,i,e,s,n,r){super(),this.lB=void 0,this.uc=void 0,this.qv=new au,this.Zv=new au,this.Tl=new Vc,this.zs=t,this.p2t=new vp(n,r,1,[Zt.Yv]),this.p2t.cR(t),this.m2t=new uI(t,this.p2t,i,e,s),this.m2t.c_(this.Ds),this.qv.Ew=this.m2t.ot,this.Zv.Ew=this.m2t.ht,this.Tl.Ew=this.m2t.rt}};As((function(t){return class extends t{Qh(){let t=this,i=super.Qh();return Wt(i.cast,{get airplay(){return t.y2t.so}}),i}ln(){this.y2t.ln(),super.ln()}constructor(t,i){super(t,i);const e=new Q1(this.pV._e,this.yO,this.dd,this.t9,this.r9,this.Il);this.y2t=new U1(this,this.pV,e),this.jQ.SV(this.y2t),this.dn("currentsourcechange",(()=>{this.y2t.o2t()}))}}}),cs.v9),r(),r(),r(),r(),function(t){t.LHt="click",t.M2t="continue",t.T2t="end",t.ha="error",t.xh="fullscreen",t.XM="metadata",t.DYt="mute",t.FGt="nonlinear",t.bh="pause",t.$Gt="position",t.N2t="ready",t.SYt="resume",t.D2t="seek_end",t.I2t="seek_start",t.S2t="stall",t.eut="start",t.Au="text",t.E2t="linear_event"}(dh||(dh={}));var F1=class{b2t(t){this.L2t=t}k2t(t,i){let e;switch(t){case dh.LHt:e=this.x2t.CLICK;break;case dh.M2t:e=this.x2t.CONTINUE;break;case dh.T2t:e=this.x2t.END;break;case dh.ha:e=this.x2t.ERROR;break;case dh.xh:e=this.x2t.FULLSCREEN;break;case dh.XM:e=this.x2t.METADATA;break;case dh.DYt:e=this.x2t.MUTE;break;case dh.FGt:e=this.x2t.NONLINEAR;break;case dh.bh:e=this.x2t.PAUSE;break;case dh.$Gt:e=this.x2t.POSITION;break;case dh.N2t:e=this.x2t.READY;break;case dh.SYt:e=this.x2t.RESUME;break;case dh.D2t:e=this.x2t.SEEK_END;break;case dh.I2t:e=this.x2t.SEEK_START;break;case dh.S2t:e=this.x2t.STALL;break;case dh.eut:e=this.x2t.START;break;case dh.Au:e=this.x2t.TEXT;break;case dh.E2t:e=this.x2t.LINEAR_EVENT}this.L2t.reportPlayerEvent(e,i)}constructor(t){this.x2t=t}};r(),r();var Y1,G1=class{CS(t){t.dn(kl.Rm,this.C2t)}ln(){for(let t of this.O2t)this.st(t);this.Lyt.hn(Po.qg,this.Kz)}st(t){if(t.Lt===ra.XM){for(let i of t.H.Nw)i.hn(kl.Rm,this.C2t);t.hn(ia.Jg,this.v1),t.hn(ia.iw,this.j2t)}}constructor(t,i){this.Lyt=t,this.xtt=i,this.O2t=[],this.Kz=t=>{const i=t.Ht;if(i.Lt===ra.XM){for(let t of i.H.Nw)this.z2t(t)&&this.CS(t);i.dn(ia.Jg,this.v1),i.dn(ia.iw,this.j2t),this.O2t.push(i)}},this.v1=t=>{this.z2t(t.Qm)&&this.CS(t.Qm)},this.j2t=t=>{t.Qm.hn(kl.Rm,this.C2t)},this.Lyt.dn(Po.qg,this.Kz)}},W1=class extends G1{P2t(t){return ks(this.B2t,t)}vY(t){var i;const e=function(t,i){if(!t||!i||i.L<=0)return[];const e=t.Fm,s=i.Nw,n=[];for(let i=Ok(t)+1,r=s.length;i<r;i++){const r=s[i],h=r.V;if(e===r.Fm&&V1(h)){if(r.V.id===t.V.id)break;n.push(r)}}return n}(t,null==(i=t.Ht)?void 0:i.H);this.R2t(e);const s=[t].concat(e);this.U2t(s)}R2t(t){this.B2t=this.B2t.concat(t)}U2t(t){let i={};for(let e of t){let t=e.V;i[t.id]=t.text}this.xtt.k2t(dh.XM,i)}Q2t(t){Hc(this.B2t,t)}constructor(t,i){super(t,i),this.B2t=[],this.C2t=t=>{let i=t.Qm;this.P2t(i)?this.Q2t(i):this.vY(i)},this.z2t=t=>t.V.id&&V1(t.V)}};function V1(t){switch(t.id){case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return!0}return!1}r(),r(),function(t){t.wGt="linear",t.AGt="nonlinear"}(Y1||(Y1={}));var H1=class{constructor(t,i){this.$w=t,this.c$t=i}},q1=class extends H1{get F2t(){return this.Y2t}get het(){return this.Y9}constructor(t,i,e){super("nonlinear",t),this.Y2t=i,this.Y9=e}},X1=class extends H1{constructor(t){super("linear",t)}};r();var Z1,K1="yospace",J1="urn:yospace:a:id3:2016";function $1(t){return Boolean(qc(t)&&_g(t,["ssai"])&&function(t){return Boolean(_g(t,["integration"])&&t.integration===K1)}(t.ssai))}!function(t){t.S="S",t.M="M",t.E="E"}(Z1||(Z1={}));var t4=class{G2t(t){this.W2t=t}V2t(){let t={AdBreakStart:()=>{this.W2t&&this.W2t.AdBreakStart&&this.W2t.AdBreakStart()},AdvertStart:t=>{this.H2t(),this.W2t&&this.W2t.AdvertStart&&this.W2t.AdvertStart(t)},AdvertEnd:t=>{this.X2t.q2t(),this.W2t&&this.W2t.AdvertEnd&&this.W2t.AdvertEnd(t)},AdBreakEnd:()=>{this.X2t.q2t(),this.W2t&&this.W2t.AdBreakEnd&&this.W2t.AdBreakEnd()},UpdateTimeline:t=>{this.W2t&&this.W2t.UpdateTimeline&&this.W2t.UpdateTimeline(t)},InjectVast:()=>{this.W2t&&this.W2t.InjectVast&&this.W2t.InjectVast()}};this.L2t.registerPlayer(t)}ln(){this.X2t.ln(),this.L2t=void 0,this.Z2t&&(w(this.Z2t),this.Z2t=void 0)}constructor(t,i){this.L2t=t,this.X2t=i,this.H2t=()=>{if(this.Z2t&&(w(this.Z2t),this.Z2t=void 0),this.L2t.session.currentAdvert){let t=this.L2t.session.currentAdvert.advert,i=t.getLinear(),e=t.getNonLinears();const s=[];i&&i.clickThrough&&s.push(new X1(i.clickThrough));const n=e.filter((t=>{const i=t.resources.images||{};return 0!==C.keys(i).length}));if(n.length){const t=function(t){const i=C.keys(t.resources.images);return t.resources.images[i[0]]}(n[0]);t&&s.push(new q1(n[0].clickThrough,t,String(e.indexOf(n[0]))))}this.X2t.K2t(s)}else this.Z2t=b(this.H2t,250)},this.V2t()}};r();var i4=class t{K2t(t){for(let i of t)i.$w===Y1.wGt?this.J2t(i):this.$2t(i)}$2t(i){let e=c.createElement("img");e.src=i.F2t,e.className="theoplayer-yospace-non-linear-image",e.style.maxWidth="100%";const s=t.x$t(i.c$t,"theoplayer-yospace-advert"),n=le.Ks.Qe?"touchend":"click";s.addEventListener(n,this.t3t),s.setAttribute("data-advertindex",i.het),s.appendChild(e),s.style.zIndex="10",s.style.position="absolute",this.zs.appendChild(s),this.i3t.push(s)}e3t(){rs(this.s3t),this.s3t=void 0}q2t(){this.e3t(),this.n3t()}J2t(i){this.e3t();let e=t.x$t(i.c$t,"theoplayer-yospace-ad-clickthrough");e.style.zIndex="10";const s=le.Ks.Qe?"touchend":"click";e.addEventListener(s,this.r3t),Du(e),this.zs.appendChild(e),this.s3t=e}static x$t(t,i){const e=c.createElement("a");return e.setAttribute("href",t),e.setAttribute("target","Tu"),i&&(e.className=i),e.setAttribute("rel","noopener"),e}ln(){this.q2t(),this.zs=void 0}constructor(t,i){this.zs=t,this.xtt=i,this.i3t=[],this.r3t=t=>{this.xtt.k2t(dh.LHt),t.stopPropagation()},this.t3t=t=>{const i=t.currentTarget.getAttribute("data-advertindex");i&&(this.xtt.k2t(dh.FGt,i),t.stopPropagation())},this.n3t=()=>{for(let t of this.i3t)t&&t.parentElement&&t.parentElement.removeChild(t);sr(this.i3t)}}};r();var e4,s4,n4=class extends G1{U2t(t){this.xtt.k2t(dh.XM,t)}constructor(t,i){super(t,i),this.C2t=t=>{const i=function(t){const i=Vg(t),e=i.split(","),s={};for(const t of e){const[i,e]=t.split("=");s[i]=e}return s}(t.Qm.V);if(i.YTYP===Z1.E){if(oe(this.h3t)&&i.YMID!==this.h3t)return;this.h3t=void 0}else i.YTYP===Z1.S&&(this.h3t=i.YMID);this.U2t(i)},this.z2t=t=>{const i=t;return oe(i.zD)&&function(t){return t===J1}(i.zD)}}};!function(t){t[t.o3t=-1]="o3t",t[t.a3t=-2]="a3t",t[t.u3t=-3]="u3t",t[t.c3t=-10]="c3t",t[t.l3t=-11]="l3t"}(e4||(e4={})),function(t){t.d3t="ready",t.f3t="error",t._3t="no-analytics"}(s4||(s4={}));var r4,h4=class extends i{get so(){return this.Oa}b2t(t,i){this.L2t=t,this.g3t=i,this.g3t.G2t(this.w3t),this.jo(new d("sessionavailable"))}Qh(){let t=this;return{get session(){return t.L2t&&t.L2t.session},registerPlayer(i){t.w3t=i,t.g3t&&t.g3t.G2t(t.w3t)},addEventListener(i,e){t.dn(i,e)},removeEventListener(i,e){t.hn(i,e)}}}ln(){this.Uo()}constructor(){super(),this.Oa=this.Qh()}};!function(t){t[t.wh=0]="wh",t[t.bh=1]="bh"}(r4||(r4={}));var o4=class{Pg(){this.A3t?this.v3t=1:this.Qo.m3t()}Bg(){this.A3t?this.v3t=0:this.Qo.p3t()}get y3t(){return this.M3t}T3t(t){-11===t&&Ii("A connection has been established with the CSM, but the stream cannot be paused. This is only valid for Linear playback"),this.Qo.N3t(qr({},this._B,{sources:[qr({},this.D3t,{src:this.L2t&&this.L2t.masterPlaylist(),type:this.D3t&&this.D3t.type})]})),this.I3t(),0===this.v3t&&this.Qo.p3t()}S3t(t){let i;i=-11===t?"Yospace: A connection has been established with the CSM, but the stream cannot be paused. This is only valid for Linear playback":-2===t?"Yospace: The primary URL is not a valid SSAI stream":-10===t?"Yospace: The stream URL is not correctly formatted":-1===t?"Yospace: Connection error":-3===t?"Yospace: Connection timeout":"Yospace: Session could not be initialised",this.L2t&&(this.L2t.shutdown(),this.L2t=void 0),this.Qo.E3t(new Ri(ue.SOURCE_INVALID,i))}Zh(t){this._B=t,this.b3t(),this.D3t=t?xe(t.sources,$1):void 0;let i=!!J.YSSessionManager;if(this.D3t,this.D3t&&this.D3t.src&&i){this.A3t=!0;const t=J.YSSessionManager;let i;switch(this.D3t.ssai.streamType){case"vod":i=t.createForVoD;break;case"livepause":i=t.createForLivePause;break;case"nonlinear":i=t.createForNonLinear;break;default:i=t.createForLive}const e=i(this.D3t.src,{},this.L3t);if(this.k3t(e),!this.g3t)throw new k("An error occured while instantiating a YospaceSessionManager");this.M3t.b2t(e,this.g3t),this.x3t=this.startPositionPoller(),this.C3t=this.Qo.Q_}else this.A3t=!1,this.Qo.N3t(t)}k3t(t){this.L2t=t,this.xtt.b2t(this.L2t),this.O3t&&this.O3t.ln(),this.O3t=new W1(this.Qo.rt,this.xtt),this.j3t&&this.j3t.ln(),this.j3t=new n4(this.Qo.rt,this.xtt),this.g3t&&this.g3t.ln();const i=new i4(this.Qo._e,this.xtt);this.g3t=new t4(this.L2t,i)}b3t(){var i;this.Qo.hn("presentationmodechange",this.z3t),this.Qo.hn(t.ZA,this.qRt),this.Qo.hn(t.wh,this.P3t),this.Qo.hn(t.wh,this.B3t),this.Qo.hn(t.NA,this._h),this.Qo.hn(t.bh,this.ezt),this.Qo.hn(t.YA,this.Ge),this.Qo.hn(t.FA,this.CP),this.Qo.hn(Dt.fv,this.wRt),this.Qo.hn(Dt._v,this.jP),w(this.x3t),this.x3t=null,this.v3t=1,this.A3t=!1,null==(i=this.L2t)||i.shutdown(),this.L2t=void 0}ln(){this.b3t(),this.y3t.ln()}constructor(i){this.xtt=new F1(J.YSPlayerEvents),this.A3t=!1,this.v3t=1,this.M3t=new h4,this.R3t=!1,this.C3t=!1,this.L3t=(t,i)=>{if(!this.L2t)throw new k("An error occured while instantiating a YospaceSessionManager");if(this.A3t=!1,"ready"===t)this.T3t(i);else this.S3t(i)},this.I3t=()=>{this.Qo.dn("presentationmodechange",this.z3t),this.Qo.dn(t.ZA,this.qRt),this.Qo.dn(t.wh,this.P3t),this.Qo.dn(t.NA,this._h),this.Qo.dn(t.bh,this.ezt),this.Qo.dn(t.YA,this.Ge),this.Qo.dn(t.FA,this.CP),this.Qo.dn(Dt.fv,this.wRt),this.Qo.dn(Dt._v,this.jP)},this.z3t=()=>{this.xtt.k2t(dh.xh,this.Qo.ls())},this.qRt=()=>{const t=this.Qo.Q_;t!==this.C3t&&(this.C3t=t,this.xtt.k2t(dh.DYt,t))},this.P3t=()=>{this.Qo.hn(t.wh,this.P3t),this.Qo.dn(t.wh,this.B3t),this.xtt.k2t(dh.eut)},this.B3t=()=>{this.xtt.k2t(dh.SYt)},this._h=()=>{this.xtt.k2t(dh.T2t)},this.ezt=()=>{this.xtt.k2t(dh.bh)},this.Ge=()=>{this.xtt.k2t(dh.I2t)},this.CP=()=>{this.xtt.k2t(dh.D2t)},this.wRt=()=>{this.R3t=!0,this.xtt.k2t(dh.S2t)},this.jP=()=>{this.R3t&&(this.xtt.k2t(dh.M2t),this.R3t=!1)},this.startPositionPoller=()=>{let t=-1;return b((()=>{let i=this.Qo.S_();i!==t&&(t=i,this.xtt.k2t(dh.$Gt,i))}),250)},this.Qo=i}};As((function(t){return class extends t{Zh(t){this.ldt(),this.U3t.Zh(t)}Bg(){this.U3t.Bg()}Pg(){this.U3t.Pg()}O_(){var t;return null!=(t=this.hP)?t:super.O_()}x_(){var t;return null!=(t=this.rP)?t:super.x_()}N3t(t){super.Zh(t)}p3t(){super.Bg()}m3t(){super.Pg()}E3t(t){this.hP=t,this.rP=Yn(this.hP),this.jo(new _i(this.hP))}Qh(){let t=this.U3t.y3t;return Wt(super.Qh(),{get yospace(){return t.so}})}ldt(){this.rP=void 0,this.hP=void 0}ln(){this.U3t.ln(),super.ln()}constructor(t,i){super(t,i),this.rP=void 0,this.hP=void 0,this.U3t=new o4(this)}}}),cs.Ha),r(),r();var a4="VPAID";Ts.Lb.zR(new class t extends J${jR(t){return t&&t.integration===Mh.SPOTX}BUt(i,e,s,n,r){return n.ads||(n.ads={}),n.ads.vpaidMode=n.ads.vpaidMode||t.Q3t(),super.BUt(i,e,s,n,r)}i1(i,e,s,n){const r=t.F3t(i,s._e);s.RZt(r,e,n)}sF(t){const i=Qi(t);return i.queryParameters||(i.queryParameters={}),i.custom&&(i.queryParameters.custom?Ii('"custom" parameter is redefined in queryParameters! Please use "queryParameters.custom" only!'):(i.queryParameters.custom=i.custom,delete i.custom)),i.app&&(i.queryParameters.app?Ii('"app" parameter is redefined in queryParameters! Please use "queryParameters.app" only!'):(i.queryParameters.app=i.app,delete i.app)),i.device&&(i.queryParameters.device?Ii('"device" parameter is redefined in queryParameters! Please use "queryParameters.device" only!'):(i.queryParameters.device=i.device,delete i.device)),i.user&&(i.queryParameters.user?Ii('"user" parameter is redefined in queryParameters! Please use "queryParameters.user" only!'):(i.queryParameters.user=i.user,delete i.user)),i.ipAddress&&(i.queryParameters.ip_addr?Ii('"ipAddress" parameter is redefined in queryParameters! Please use "queryParameters.ip_addr" or "ipAddress" only!'):(i.queryParameters.ip_addr=i.ipAddress,delete i.ipAddress)),i.maximumAdDuration&&(i.queryParameters.VMaxd?Ii('"maximumAdDuration" parameter is redefined in queryParameters! Please use "queryParameters.VMaxd" or "maximumAdDuration" only!'):(i.queryParameters.VMaxd=i.maximumAdDuration,delete i.maximumAdDuration)),i}static F3t(i,e){return{integration:Mh.SPOTX,sources:{src:t.Y3t(i,J.location.href,e.offsetWidth,e.offsetHeight,li.Mb)}}}static Y3t(i,e,s,n,r){if(i.sources)return i.sources;let h=n,o=s;r&&0===o&&(o=320,h=180);const a={custom_skin:1,player_width:o,player_height:h};i.cacheBuster&&(a.cb=S.random()),t.G3t(e)&&(a.content_page_url=e);const u=qr({},a,i.queryParameters);return u[a4]||u.VPI||(u[a4]="js"),"https://search.spotxchange.com/vast/2.0/"+i.id+"?"+t.W3t(u)}static G3t(t){return Lt(t,"http://")||Lt(t,"https://")}static W3t(t){return FJ(t)}static Q3t(){return li.BE?tw.ENABLED:tw.INSECURE}}),r(),r(),r(),r();var Qa=void 0!==s?s:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},u4=function(){return/Android/i.test(td.userAgent)||/iPhone|iPad|iPod/i.test(td.userAgent)},c4=function(t,i){for(var e=0,s=t.length;e<s;e++)i[e]=t[e]},l4=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},d4=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),C.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),f4=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in C(t))return function(t,i){var e=[],s=!0,n=!1,r=void 0;try{for(var h,o=t[Symbol.iterator]();!(s=(h=o.next()).done)&&(e.push(h.value),!i||e.length!==i);s=!0);}catch(t){n=!0,r=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw r}}return e}(t,i);throw new _("Invalid attempt to destructure non-iterable instance")},_4=function(t,i,e){return t+(i-t)*e},Mc=function(){var t=/iPad|iPhone|iPod/.test(td.platform);return function(){return t}}(),g4=function(){var t=-1!==td.userAgent.indexOf("Version")&&-1!==td.userAgent.indexOf("Android")&&-1!==td.userAgent.indexOf("Chrome");return function(){return t}}(),w4=(function(){var t=/^((?!chrome|android).)*safari/i.test(td.userAgent)}(),function(){var t=-1!==td.userAgent.indexOf("Firefox")&&-1!==td.userAgent.indexOf("Android");return function(){return t}}()),A4=function(){var t=td.userAgent.match(/.*Chrome\/([0-9]+)/),i=t?j(t[1],10):null;return function(){return i}}(),v4=function(){var t=!1;if(65===A4()){var i=td.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(i){var e=i[1].split("."),s=f4(e,4),n=(s[0],s[1],s[2]),r=s[3];t=3325===j(n,10)&&j(r,10)<148}}return function(){return t}}(),m4=function(){var t=-1!==td.userAgent.indexOf("R7 Build");return function(){return t}}(),p4=function(){var t=90==s.orientation||-90==s.orientation;return m4()?!t:t},y4=function(){return S.max(s.screen.width,s.screen.height)*s.devicePixelRatio},M4=function(){return S.min(s.screen.width,s.screen.height)*s.devicePixelRatio},T4=function(){if(c.exitFullscreen)c.exitFullscreen();else if(c.webkitExitFullscreen)c.webkitExitFullscreen();else if(c.mozCancelFullScreen)c.mozCancelFullScreen();else{if(!c.msExitFullscreen)return!1;c.msExitFullscreen()}return!0},N4=function(t,i,e,s){var n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,i),t.compileShader(n);var r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,e),t.compileShader(r);var h=t.createProgram();for(var o in t.attachShader(h,n),t.attachShader(h,r),s)t.bindAttribLocation(h,s[o],o);return t.linkProgram(h),t.deleteShader(n),t.deleteShader(r),h},D4=function(t,i){for(var e={},s=t.getProgramParameter(i,t.ACTIVE_UNIFORMS),n="",r=0;r<s;r++){e[n=t.getActiveUniform(i,r).name.replace("[0]","")]=t.getUniformLocation(i,n)}return e},I4=function(){var t,i=!1;return t=td.userAgent||td.vendor||s.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(i=!0),i},S4=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},$r=[],E4=function(t){if(Mc()){b4(t);var i,e,n=t.style.width,r=t.style.height,h=t.offsetWidth+1,o=t.offsetHeight;t.style.width=h+"px",t.style.height=o+"px";var a=function(){s.cancelAnimationFrame(e);for(var h=0;h<$r.length;h++)if($r[h]===i){t.style.width=n,t.style.height=r,$r.splice(h,1);break}};i={d9:t,V3t:a},$r.push(i),e=s.requestAnimationFrame(a)}},b4=function(t){if(Mc())for(var i=0;i<$r.length;i++)if($r[i].d9===t){$r[i].V3t();break}},L4=function(){var t=S.PI/180,i=.25*S.PI;var e=new Float32Array([0,0,0,1]),s=new Float32Array([0,0,0]);function n(n,r,h,o,a,u){!function(e,s,n,r){var h=S.tan(s?s.upDegrees*t:i),o=S.tan(s?s.downDegrees*t:i),a=S.tan(s?s.leftDegrees*t:i),u=S.tan(s?s.rightDegrees*t:i),c=2/(a+u),l=2/(h+o);e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-u)*c*.5,e[9]=(h-o)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0}(n,o||null,u.depthNear,u.depthFar),function(t,i,e){var s=i[0],n=i[1],r=i[2],h=i[3],o=s+s,a=n+n,u=r+r,c=s*o,l=s*a,d=s*u,f=n*a,_=n*u,g=r*u,w=h*o,A=h*a,v=h*u;t[0]=1-(f+g),t[1]=l+v,t[2]=d-A,t[3]=0,t[4]=l-v,t[5]=1-(c+g),t[6]=_+w,t[7]=0,t[8]=d+A,t[9]=_-w,t[10]=1-(c+f),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1}(r,h.orientation||e,h.position||s),a&&function(t,i,e){var s,n,r,h,o,a,u,c,l,d,f,_,g=e[0],w=e[1],A=e[2];i===t?(t[12]=i[0]*g+i[4]*w+i[8]*A+i[12],t[13]=i[1]*g+i[5]*w+i[9]*A+i[13],t[14]=i[2]*g+i[6]*w+i[10]*A+i[14],t[15]=i[3]*g+i[7]*w+i[11]*A+i[15]):(s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],_=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=_,t[12]=s*g+o*w+l*A+i[12],t[13]=n*g+a*w+d*A+i[13],t[14]=r*g+u*w+f*A+i[14],t[15]=h*g+c*w+_*A+i[15])}(r,r,a),function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=i[4],o=i[5],a=i[6],u=i[7],c=i[8],l=i[9],d=i[10],f=i[11],_=i[12],g=i[13],w=i[14],A=i[15],v=e*o-s*h,m=e*a-n*h,p=e*u-r*h,y=s*a-n*o,M=s*u-r*o,T=n*u-r*a,N=c*g-l*_,D=c*w-d*_,I=c*A-f*_,S=l*w-d*g,E=l*A-f*g,b=d*A-f*w,L=v*b-m*E+p*S+y*I-M*D+T*N;L&&(L=1/L,t[0]=(o*b-a*E+u*S)*L,t[1]=(n*E-s*b-r*S)*L,t[2]=(g*T-w*M+A*y)*L,t[3]=(d*M-l*T-f*y)*L,t[4]=(a*I-h*b-u*D)*L,t[5]=(e*b-n*I+r*D)*L,t[6]=(w*p-_*T-A*m)*L,t[7]=(c*T-d*p+f*m)*L,t[8]=(h*E-o*I+u*N)*L,t[9]=(s*I-e*E-r*N)*L,t[10]=(_*M-g*p+A*v)*L,t[11]=(l*p-c*M-f*v)*L,t[12]=(o*D-h*S-a*N)*L,t[13]=(e*S-s*D+n*N)*L,t[14]=(g*m-_*y-w*v)*L,t[15]=(c*y-l*m+d*v)*L)}(r,r)}return function(t,i,e){return!(!t||!i)&&(t.pose=i,t.timestamp=i.timestamp,n(t.leftProjectionMatrix,t.leftViewMatrix,i,e.H3t("left"),e.q3t("left"),e),n(t.rightProjectionMatrix,t.rightViewMatrix,i,e.H3t("right"),e.q3t("right"),e),!0)}}(),k4=function(t){var i,e=t.indexOf("://");i=-1!==e?e+3:0;var s=t.indexOf("/",i);return-1===s&&(s=t.length),t.substring(0,s)},x4=function(){var t={};return function(i,e){void 0===t[i]&&(console.warn("webvr-polyfill: "+e),t[i]=!0)}}(),oh=function(t,i){x4(t,t+" has been deprecated. This may not work on native WebVR displays. "+(i?"Please use "+i+" instead.":""))};var C4=function(t,i,e){if(i){for(var s=[],n=null,r=0;r<i.length;++r){switch(h=i[r]){case t.TEXTURE_BINDING_2D:case t.TEXTURE_BINDING_CUBE_MAP:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),s.push(null,null);break}n||(n=t.getParameter(t.ACTIVE_TEXTURE)),t.activeTexture(a),s.push(t.getParameter(h),null);break;case t.ACTIVE_TEXTURE:n=t.getParameter(t.ACTIVE_TEXTURE),s.push(null);break;default:s.push(t.getParameter(h))}}e(t);for(r=0;r<i.length;++r){var h=i[r],o=s[r];switch(h){case t.ACTIVE_TEXTURE:break;case t.ARRAY_BUFFER_BINDING:t.bindBuffer(t.ARRAY_BUFFER,o);break;case t.COLOR_CLEAR_VALUE:t.clearColor(o[0],o[1],o[2],o[3]);break;case t.COLOR_WRITEMASK:t.colorMask(o[0],o[1],o[2],o[3]);break;case t.CURRENT_PROGRAM:t.useProgram(o);break;case t.ELEMENT_ARRAY_BUFFER_BINDING:t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o);break;case t.FRAMEBUFFER_BINDING:t.bindFramebuffer(t.FRAMEBUFFER,o);break;case t.RENDERBUFFER_BINDING:t.bindRenderbuffer(t.RENDERBUFFER,o);break;case t.TEXTURE_BINDING_2D:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_2D,o);break;case t.TEXTURE_BINDING_CUBE_MAP:var a;if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_CUBE_MAP,o);break;case t.VIEWPORT:t.viewport(o[0],o[1],o[2],o[3]);break;case t.BLEND:case t.CULL_FACE:case t.DEPTH_TEST:case t.SCISSOR_TEST:case t.STENCIL_TEST:o?t.enable(h):t.disable(h);break;default:console.log("No GL restore behavior for 0x"+h.toString(16))}n&&t.activeTexture(n)}}else e(t)},O4=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),j4=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function so(t,i,e,s){this.gl=t,this.cardboardUI=i,this.bufferScale=e,this.dirtySubmitFrameBindings=s,this.ctxAttribs=t.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=t.drawingBufferWidth,this.bufferHeight=t.drawingBufferHeight,this.realBindFramebuffer=t.bindFramebuffer,this.realEnable=t.enable,this.realDisable=t.disable,this.realColorMask=t.colorMask,this.realClearColor=t.clearColor,this.realViewport=t.viewport,Mc()||(this.realCanvasWidth=C.getOwnPropertyDescriptor(t.canvas.__proto__,"width"),this.realCanvasHeight=C.getOwnPropertyDescriptor(t.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=N4(t,O4,j4,this.attribs),this.uniforms=D4(t,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.indexCount=0,this.renderTarget=t.createTexture(),this.framebuffer=t.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=t.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=t.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=t.createRenderbuffer()),this.patch(),this.onResize()}so.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},so.prototype.onResize=function(){var t=this.gl,i=this,e=[t.RENDERBUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0];C4(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.framebuffer),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.texImage2D(t.TEXTURE_2D,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,i.bufferWidth,i.bufferHeight,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i.renderTarget,0),i.ctxAttribs.depth&&i.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,i.depthStencilBuffer)):i.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,i.depthBuffer)):i.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,i.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,i.stencilBuffer)),!t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),i.realClearColor.apply(t,i.clearColor)})),this.cardboardUI&&this.cardboardUI.onResize()},so.prototype.patch=function(){if(!this.isPatched){var t=this,i=this.gl.canvas,e=this.gl;Mc()||(i.width=y4()*this.bufferScale,i.height=M4()*this.bufferScale,C.defineProperty(i,"width",{configurable:!0,enumerable:!0,get:function(){return t.bufferWidth},set:function(e){t.bufferWidth=e,t.realCanvasWidth.set.call(i,e),t.onResize()}}),C.defineProperty(i,"height",{configurable:!0,enumerable:!0,get:function(){return t.bufferHeight},set:function(e){t.bufferHeight=e,t.realCanvasHeight.set.call(i,e),t.onResize()}})),this.lastBoundFramebuffer=e.getParameter(e.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(i,s){t.lastBoundFramebuffer=s||t.framebuffer,t.realBindFramebuffer.call(e,i,t.lastBoundFramebuffer)},this.cullFace=e.getParameter(e.CULL_FACE),this.depthTest=e.getParameter(e.DEPTH_TEST),this.blend=e.getParameter(e.BLEND),this.scissorTest=e.getParameter(e.SCISSOR_TEST),this.stencilTest=e.getParameter(e.STENCIL_TEST),e.enable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!0;break;case e.DEPTH_TEST:t.depthTest=!0;break;case e.BLEND:t.blend=!0;break;case e.SCISSOR_TEST:t.scissorTest=!0;break;case e.STENCIL_TEST:t.stencilTest=!0}t.realEnable.call(e,i)},e.disable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!1;break;case e.DEPTH_TEST:t.depthTest=!1;break;case e.BLEND:t.blend=!1;break;case e.SCISSOR_TEST:t.scissorTest=!1;break;case e.STENCIL_TEST:t.stencilTest=!1}t.realDisable.call(e,i)},this.colorMask=e.getParameter(e.COLOR_WRITEMASK),e.colorMask=function(i,s,n,r){t.colorMask[0]=i,t.colorMask[1]=s,t.colorMask[2]=n,t.colorMask[3]=r,t.realColorMask.call(e,i,s,n,r)},this.clearColor=e.getParameter(e.COLOR_CLEAR_VALUE),e.clearColor=function(i,s,n,r){t.clearColor[0]=i,t.clearColor[1]=s,t.clearColor[2]=n,t.clearColor[3]=r,t.realClearColor.call(e,i,s,n,r)},this.viewport=e.getParameter(e.VIEWPORT),e.viewport=function(i,s,n,r){t.viewport[0]=i,t.viewport[1]=s,t.viewport[2]=n,t.viewport[3]=r,t.realViewport.call(e,i,s,n,r)},this.isPatched=!0,E4(i)}},so.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,i=this.gl.canvas;Mc()||(C.defineProperty(i,"width",this.realCanvasWidth),C.defineProperty(i,"height",this.realCanvasHeight)),i.width=this.bufferWidth,i.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1,v((function(){E4(i)}),1)}},so.prototype.setTextureBounds=function(t,i){t||(t=[0,0,.5,1]),i||(i=[.5,0,.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=i[0],this.viewportOffsetScale[5]=i[1],this.viewportOffsetScale[6]=i[2],this.viewportOffsetScale[7]=i[3]},so.prototype.submitFrame=function(){var t=this.gl,i=this,e=[];if(this.dirtySubmitFrameBindings||e.push(t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0),C4(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.cullFace&&i.realDisable.call(t,t.CULL_FACE),i.depthTest&&i.realDisable.call(t,t.DEPTH_TEST),i.blend&&i.realDisable.call(t,t.BLEND),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realDisable.call(t,t.STENCIL_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),(i.ctxAttribs.alpha||Mc())&&(i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(i.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.enableVertexAttribArray(i.attribs.position),t.enableVertexAttribArray(i.attribs.texCoord),t.vertexAttribPointer(i.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(i.attribs.texCoord,3,t.FLOAT,!1,20,8),t.activeTexture(t.TEXTURE0),t.uniform1i(i.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.uniform4fv(i.uniforms.viewportOffsetScale,i.viewportOffsetScale),t.drawElements(t.TRIANGLES,i.indexCount,t.UNSIGNED_SHORT,0),i.cardboardUI&&i.cardboardUI.renderNoState(),i.realBindFramebuffer.call(i.gl,t.FRAMEBUFFER,i.framebuffer),i.ctxAttribs.preserveDrawingBuffer||(i.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),i.dirtySubmitFrameBindings||i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.cullFace&&i.realEnable.call(t,t.CULL_FACE),i.depthTest&&i.realEnable.call(t,t.DEPTH_TEST),i.blend&&i.realEnable.call(t,t.BLEND),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realEnable.call(t,t.STENCIL_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),!i.ctxAttribs.alpha&&i.ctxAttribs.preserveDrawingBuffer||i.realClearColor.apply(t,i.clearColor)})),Mc()){var s=t.canvas;s.width==i.bufferWidth&&s.height==i.bufferHeight||(i.bufferWidth=s.width,i.bufferHeight=s.height,i.onResize())}},so.prototype.updateDeviceInfo=function(t){var i=this.gl,e=this,s=[i.ARRAY_BUFFER_BINDING,i.ELEMENT_ARRAY_BUFFER_BINDING];C4(i,s,(function(i){var s=e.X3t(e.meshWidth,e.meshHeight,t);if(i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer),i.bufferData(i.ARRAY_BUFFER,s,i.STATIC_DRAW),!e.indexCount){var n=e.Z3t(e.meshWidth,e.meshHeight);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n,i.STATIC_DRAW),e.indexCount=n.length}}))},so.prototype.X3t=function(t,i,e){for(var s=new Float32Array(2*t*i*5),n=e.getLeftEyeVisibleTanAngles(),r=e.getLeftEyeNoLensTanAngles(),h=e.getLeftEyeVisibleScreenRect(r),o=0,a=0;a<2;a++){for(var u=0;u<i;u++)for(var c=0;c<t;c++,o++){var l=c/(t-1),d=u/(i-1),f=l,_=d,g=_4(n[0],n[2],l),w=_4(n[3],n[1],d),A=S.sqrt(g*g+w*w),v=e.distortion.distortInverse(A),m=w*v/A;l=(g*v/A-r[0])/(r[2]-r[0]),d=(m-r[3])/(r[1]-r[3]),l=2*(h.x+l*h.width-.5),d=2*(h.y+d*h.height-.5),s[5*o+0]=l,s[5*o+1]=d,s[5*o+2]=f,s[5*o+3]=_,s[5*o+4]=a}var p=n[2]-n[0];n[0]=-(p+n[0]),n[2]=p-n[2],p=r[2]-r[0],r[0]=-(p+r[0]),r[2]=p-r[2],h.x=1-(h.x+h.width)}return s},so.prototype.Z3t=function(t,i){for(var e=new Uint16Array(2*(t-1)*(i-1)*6),s=t/2,n=i/2,r=0,h=0,o=0;o<2;o++)for(var a=0;a<i;a++)for(var u=0;u<t;u++,r++)0!=u&&0!=a&&(u<=s==a<=n?(e[h++]=r,e[h++]=r-t-1,e[h++]=r-t,e[h++]=r-t-1,e[h++]=r,e[h++]=r-1):(e[h++]=r-1,e[h++]=r-t,e[h++]=r,e[h++]=r-t,e[h++]=r-1,e[h++]=r-t-1));return e},so.prototype.K3t=function(t,i){var e=C.getOwnPropertyDescriptor(t,i);return void 0!==e.get&&void 0!==e.set||(e.configurable=!0,e.enumerable=!0,e.get=function(){return this.getAttribute(i)},e.set=function(t){this.setAttribute(i,t)}),e};var z4=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),P4=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),B4=S.PI/180,R4=.3125,Xr=28;function U4(t){this.gl=t,this.attribs={position:0},this.program=N4(t,z4,P4,this.attribs),this.uniforms=D4(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function Q4(t){this.coefficients=t}U4.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},U4.prototype.listen=function(t,i){var e=this.gl.canvas,s="undefined"!=typeof TouchEvent;this.listener=function(n){var r=e.clientWidth/2,h=s&&n instanceof TouchEvent?(n.preventDefault(),n.changedTouches[0]):n;h.clientX>r-42&&h.clientX<r+42&&h.clientY>e.clientHeight-42?(n.preventDefault(),n.stopImmediatePropagation(),t(n)):h.clientX<42&&h.clientY<42&&(n.preventDefault(),n.stopImmediatePropagation(),i(n))},e.addEventListener("click",this.listener,!1),e.addEventListener("touchstart",this.listener,!1)},U4.prototype.onResize=function(){var t=this.gl,i=this,e=[t.ARRAY_BUFFER_BINDING];C4(t,e,(function(t){var e=[],n=t.drawingBufferWidth/2,r=S.max(screen.width,screen.height)*s.devicePixelRatio,h=t.drawingBufferWidth/r*s.devicePixelRatio,o=4*h/2,a=42*h,u=Xr*h/2,c=14*h;function l(t,i){var s=(90-t)*B4,r=S.cos(s),h=S.sin(s);e.push(R4*r*u+n,R4*h*u+u),e.push(i*r*u+n,i*h*u+u)}e.push(n-o,a),e.push(n-o,t.drawingBufferHeight),e.push(n+o,a),e.push(n+o,t.drawingBufferHeight),i.gearOffset=e.length/2;for(var d=0;d<=6;d++){var f=60*d;l(f,1),l(f+12,1),l(f+20,.75),l(f+40,.75),l(f+48,1)}function _(i,s){e.push(c+i,t.drawingBufferHeight-c-s)}i.gearVertexCount=e.length/2-i.gearOffset,i.arrowOffset=e.length/2;var g=o/S.sin(45*B4);_(0,u),_(u,0),_(u+g,g),_(g,u+g),_(g,u-g),_(0,u),_(u,2*u),_(u+g,2*u-g),_(g,u-g),_(0,u),_(g,u-o),_(Xr*h,u-o),_(g,u+o),_(Xr*h,u+o),i.arrowVertexCount=e.length/2-i.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW)}))},U4.prototype.render=function(){var t=this.gl,i=this,e=[t.CULL_FACE,t.DEPTH_TEST,t.BLEND,t.SCISSOR_TEST,t.STENCIL_TEST,t.COLOR_WRITEMASK,t.VIEWPORT,t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING];C4(t,e,(function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.renderNoState()}))},U4.prototype.renderNoState=function(){var t,i,e,s,n,r,h,o,a,u,c=this.gl;c.useProgram(this.program),c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer),c.enableVertexAttribArray(this.attribs.position),c.vertexAttribPointer(this.attribs.position,2,c.FLOAT,!1,8,0),c.uniform4f(this.uniforms.color,1,1,1,1),t=this.projMat,i=0,e=c.drawingBufferWidth,s=0,n=c.drawingBufferHeight,o=1/(i-e),a=1/(s-n),u=1/((r=.1)-(h=1024)),t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(i+e)*o,t[13]=(n+s)*a,t[14]=(h+r)*u,t[15]=1,c.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),c.drawArrays(c.TRIANGLE_STRIP,0,4),c.drawArrays(c.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),c.drawArrays(c.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},Q4.prototype.distortInverse=function(t){for(var i=0,e=1,s=t-this.distort(i);S.abs(e-i)>1e-4;){var n=t-this.distort(e),r=e-n*((e-i)/(n-s));i=e,e=r,s=n}return e},Q4.prototype.distort=function(t){for(var i=t*t,e=0,s=0;s<this.coefficients.length;s++)e=i*(e+this.coefficients[s]);return(e+1)*t};var F4=S.PI/180,Y4=180/S.PI,Ns=function(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0};Ns.prototype={constructor:Ns,set:function(t,i,e){return this.x=t,this.y=i,this.z=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return S.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();if(0!==t){var i=1/t;this.multiplyScalar(i)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(t){var i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,h=t.z,o=t.w,a=o*i+r*s-h*e,u=o*e+h*i-n*s,c=o*s+n*e-r*i,l=-n*i-r*e-h*s;return this.x=a*o+l*-n+u*-h-c*-r,this.y=u*o+l*-r+c*-n-a*-h,this.z=c*o+l*-h+a*-r-u*-n,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(t,i){var e=t.x,s=t.y,n=t.z,r=i.x,h=i.y,o=i.z;return this.x=s*o-n*h,this.y=n*r-e*o,this.z=e*h-s*r,this}};var ss=function(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1};function G4(t){this.width=t.width||y4(),this.height=t.height||M4(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}ss.prototype={constructor:ss,set:function(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(t,i,e){var s=S.cos(t/2),n=S.cos(i/2),r=S.cos(e/2),h=S.sin(t/2),o=S.sin(i/2),a=S.sin(e/2);return this.x=h*n*r+s*o*a,this.y=s*o*r-h*n*a,this.z=s*n*a+h*o*r,this.w=s*n*r-h*o*a,this},setFromEulerYXZ:function(t,i,e){var s=S.cos(t/2),n=S.cos(i/2),r=S.cos(e/2),h=S.sin(t/2),o=S.sin(i/2),a=S.sin(e/2);return this.x=h*n*r+s*o*a,this.y=s*o*r-h*n*a,this.z=s*n*a-h*o*r,this.w=s*n*r+h*o*a,this},setFromAxisAngle:function(t,i){var e=i/2,s=S.sin(e);return this.x=t.x*s,this.y=t.y*s,this.z=t.z*s,this.w=S.cos(e),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,i){var e=t.x,s=t.y,n=t.z,r=t.w,h=i.x,o=i.y,a=i.z,u=i.w;return this.x=e*u+r*h+s*a-n*o,this.y=s*u+r*o+n*h-e*a,this.z=n*u+r*a+e*o-s*h,this.w=r*u-e*h-s*o-n*a,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=S.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var e=this.x,s=this.y,n=this.z,r=this.w,h=r*t.w+e*t.x+s*t.y+n*t.z;if(h<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,h=-h):this.copy(t),h>=1)return this.w=r,this.x=e,this.y=s,this.z=n,this;var o=S.acos(h),a=S.sqrt(1-h*h);if(S.abs(a)<.001)return this.w=.5*(r+this.w),this.x=.5*(e+this.x),this.y=.5*(s+this.y),this.z=.5*(n+this.z),this;var u=S.sin((1-i)*o)/a,c=S.sin(i*o)/a;return this.w=r*u+this.w*c,this.x=e*u+this.x*c,this.y=s*u+this.y*c,this.z=n*u+this.z*c,this},setFromUnitVectors:function(){var t,i;return function(e,s){return void 0===t&&(t=new Ns),(i=e.dot(s)+1)<1e-6?(i=0,S.abs(e.x)>S.abs(e.z)?t.set(-e.y,e.x,0):t.set(0,-e.z,e.y)):t.crossVectors(e,s),this.x=t.x,this.y=t.y,this.z=t.z,this.w=i,this.normalize(),this}}()};var W4=new G4({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),V4=new G4({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),H4={CardboardV1:new q4({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new q4({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function la(t){this.viewer=H4.CardboardV2,this.updateDeviceParams(t),this.distortion=new Q4(this.viewer.distortionCoefficients)}function q4(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}la.prototype.updateDeviceParams=function(t){this.device=this.J3t(t)||this.device},la.prototype.getDevice=function(){return this.device},la.prototype.setViewer=function(t){this.viewer=t,this.distortion=new Q4(this.viewer.distortionCoefficients)},la.prototype.J3t=function(t){if(!t)return Mc()?(console.warn("Using fallback iOS device measurements."),V4):(console.warn("Using fallback Android device measurements."),W4);var i=.0254,e=i/t.xdpi,s=i/t.ydpi;return new G4({widthMeters:e*y4(),heightMeters:s*M4(),bevelMeters:.001*t.bevelMm})},la.prototype.getDistortedFieldOfViewLeftEye=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=(i.widthMeters-t.interLensDistance)/2,r=t.interLensDistance/2,h=t.baselineLensDistance-i.bevelMeters,o=i.heightMeters-h,a=Y4*S.atan(e.distort(n/s)),u=Y4*S.atan(e.distort(r/s)),c=Y4*S.atan(e.distort(h/s)),l=Y4*S.atan(e.distort(o/s));return{leftDegrees:S.min(a,t.fov),rightDegrees:S.min(u,t.fov),downDegrees:S.min(c,t.fov),upDegrees:S.min(l,t.fov)}},la.prototype.getLeftEyeVisibleTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=S.tan(-F4*t.fov),n=S.tan(F4*t.fov),r=S.tan(F4*t.fov),h=S.tan(-F4*t.fov),o=i.widthMeters/4,a=i.heightMeters/2,u=t.baselineLensDistance-i.bevelMeters-a,c=t.interLensDistance/2-o,l=-u,d=t.screenLensDistance,f=e.distort((c-o)/d),_=e.distort((l+a)/d),g=e.distort((c+o)/d),w=e.distort((l-a)/d),A=new Float32Array(4);return A[0]=S.max(s,f),A[1]=S.min(n,_),A[2]=S.min(r,g),A[3]=S.max(h,w),A},la.prototype.getLeftEyeNoLensTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=new Float32Array(4),n=e.distortInverse(S.tan(-F4*t.fov)),r=e.distortInverse(S.tan(F4*t.fov)),h=e.distortInverse(S.tan(F4*t.fov)),o=e.distortInverse(S.tan(-F4*t.fov)),a=i.widthMeters/4,u=i.heightMeters/2,c=t.baselineLensDistance-i.bevelMeters-u,l=t.interLensDistance/2-a,d=-c,f=t.screenLensDistance,_=(l-a)/f,g=(d+u)/f,w=(l+a)/f,A=(d-u)/f;return s[0]=S.max(n,_),s[1]=S.min(r,g),s[2]=S.min(h,w),s[3]=S.max(o,A),s},la.prototype.getLeftEyeVisibleScreenRect=function(t){var i=this.viewer,e=this.device,s=i.screenLensDistance,n=(e.widthMeters-i.interLensDistance)/2,r=i.baselineLensDistance-e.bevelMeters,h=(t[0]*s+n)/e.widthMeters,o=(t[1]*s+r)/e.heightMeters,a=(t[2]*s+n)/e.widthMeters,u=(t[3]*s+r)/e.heightMeters;return{x:h,y:u,width:a-h,height:o-u}},la.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},la.prototype.getFieldOfViewRightEye=function(t){var i=this.getFieldOfViewLeftEye(t);return{leftDegrees:i.rightDegrees,rightDegrees:i.leftDegrees,upDegrees:i.upDegrees,downDegrees:i.downDegrees}},la.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.$3t();return{leftDegrees:Y4*S.atan(t.outerDist),rightDegrees:Y4*S.atan(t.innerDist),downDegrees:Y4*S.atan(t.bottomDist),upDegrees:Y4*S.atan(t.topDist)}},la.prototype.getUndistortedViewportLeftEye=function(){var t=this.$3t(),i=this.viewer,e=this.device,s=i.screenLensDistance,n=e.widthMeters/s,r=e.heightMeters/s,h=e.width/n,o=e.height/r,a=S.round((t.eyePosX-t.outerDist)*h),u=S.round((t.eyePosY-t.bottomDist)*o);return{x:a,y:u,width:S.round((t.eyePosX+t.innerDist)*h)-a,height:S.round((t.eyePosY+t.topDist)*o)-u}},la.prototype.$3t=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=t.interLensDistance/2/s,r=i.widthMeters/s,h=i.heightMeters/s,o=r/2-n,a=(t.baselineLensDistance-i.bevelMeters)/s,u=t.fov,c=e.distortInverse(S.tan(F4*u)),l=S.min(o,c),d=S.min(n,c),f=S.min(a,c);return{outerDist:l,innerDist:d,topDist:S.min(h-a,c),bottomDist:f,eyePosX:o,eyePosY:a}},la.Viewers=H4;var X4={format:1,last_updated:"2018-02-20T22:55:10Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]};function Z4(t,i){if(this.dpdb=X4,this.t5t(),t){this.onDeviceParamsUpdated=i;var e=new ed,s=this;e.open("GET",t,!0),e.addEventListener("load",(function(){s.loading=!1,e.status>=200&&e.status<=299?(s.dpdb=JSON.parse(e.response),s.t5t()):console.error("Error loading online DPDB!")})),e.send()}}function K4(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}function J4(t,i){this.set(t,i)}function $4(t,i){this.kFilter=t,this.isDebug=i,this.currentAccelMeasurement=new J4,this.currentGyroMeasurement=new J4,this.previousGyroMeasurement=new J4,Mc()?this.filterQ=new ss(-1,0,0,1):this.filterQ=new ss(1,0,0,1),this.previousFilterQ=new ss,this.previousFilterQ.copy(this.filterQ),this.accelQ=new ss,this.isOrientationInitialized=!1,this.estimatedGravity=new Ns,this.measuredGravity=new Ns,this.gyroIntegralQ=new ss}function t2(t,i){this.predictionTimeS=t,this.isDebug=i,this.previousQ=new ss,this.previousTimestampS=null,this.deltaQ=new ss,this.outQ=new ss}function i2(t,i,e,n){this.yawOnly=e,this.accelerometer=new Ns,this.gyroscope=new Ns,this.filter=new $4(t,n),this.posePredictor=new t2(i,n),this.isFirefoxAndroid=w4(),this.isIOS=Mc();var r=A4();this.isDeviceMotionInRadians=!this.isIOS&&r&&r<66,this.isWithoutDeviceMotion=v4(),this.filterToWorldQ=new ss,Mc()?this.filterToWorldQ.setFromAxisAngle(new Ns(1,0,0),S.PI/2):this.filterToWorldQ.setFromAxisAngle(new Ns(1,0,0),-S.PI/2),this.inverseWorldToScreenQ=new ss,this.worldToScreenQ=new ss,this.originalPoseAdjustQ=new ss,this.originalPoseAdjustQ.setFromAxisAngle(new Ns(0,0,1),-s.orientation*S.PI/180),this.i5t(),p4()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new ss,this.e5t=new Float32Array(4),this.start()}Z4.prototype.getDeviceParams=function(){return this.deviceParams},Z4.prototype.t5t=function(){var t=this.s5t();t?(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},Z4.prototype.s5t=function(){var t=this.dpdb;if(!t)return console.error("DPDB not available."),null;if(1!=t.format)return console.error("DPDB has unexpected format version."),null;if(!t.devices||!t.devices.length)return console.error("DPDB does not have a devices section."),null;var i=td.userAgent||td.vendor||s.opera,e=y4(),n=M4();if(!t.devices)return console.error("DPDB has no devices section."),null;for(var r=null,h=1/0,o=0;o<t.devices.length;o++){var a=t.devices[o];if(a.rules)if("ios"==a.type||"android"==a.type){if(Mc()==("ios"==a.type)){for(var u=!1,c=0;c<a.rules.length;c++){var l=a.rules[c],d=this.n5t(l,i,e,n);if(!0===d){h=d,r=a,u=!0;break}!1!==d&&d<h&&(h=d,r=a)}if(u)break}}else console.warn("Device["+o+"] has invalid type.");else console.warn("Device["+o+"] has no rules section.")}return r?new K4({xdpi:r.dpi[0]||r.dpi,ydpi:r.dpi[1]||r.dpi,bevelMm:r.bw}):(console.warn("No DPDB device match."),null)},Z4.prototype.n5t=function(t,i,e,s){if(!t.ua&&!t.res)return!1;if(t.ua&&i.indexOf(t.ua)<0)return!1;if(t.res){if(!t.res[0]||!t.res[1])return!1;var n=t.res[0],r=t.res[1],h=S.min(e,s)-S.min(n,r),o=S.max(e,s)-S.max(n,r),a=S.abs(h)+S.abs(o);if(a>0)return a}return!0},J4.prototype.set=function(t,i){this.sample=t,this.timestampS=i},J4.prototype.copy=function(t){this.set(t.sample,t.timestampS)},$4.prototype.addAccelMeasurement=function(t,i){this.currentAccelMeasurement.set(t,i)},$4.prototype.addGyroMeasurement=function(t,i){this.currentGyroMeasurement.set(t,i),function(t){return!(M(t)||t<=.001||t>1)}(i-this.previousGyroMeasurement.timestampS)&&this.r5t(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},$4.prototype.r5t=function(){if(!this.isOrientationInitialized)return this.accelQ=this.h5t(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,i=this.o5t(this.currentGyroMeasurement.sample,t);this.gyroIntegralQ.multiply(i),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(i);var e=new ss;e.copy(this.filterQ),e.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(e),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var s=new ss;s.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),s.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",Y4*function(t){return t.w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*S.acos(t.w)}(s),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var n=new ss;n.copy(this.filterQ),n.multiply(s),this.filterQ.slerp(n,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},$4.prototype.getOrientation=function(){return this.filterQ},$4.prototype.h5t=function(t){var i=new Ns;i.copy(t),i.normalize();var e=new ss;return e.setFromUnitVectors(new Ns(0,0,-1),i),e.inverse(),e},$4.prototype.o5t=function(t,i){var e=new ss,s=new Ns;return s.copy(t),s.normalize(),e.setFromAxisAngle(s,t.length()*i),e},t2.prototype.getPrediction=function(t,i,e){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=e,t;var s=new Ns;s.copy(i),s.normalize();var n=i.length();if(n<20*F4)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(Y4*n).toFixed(1)),this.outQ.copy(t),this.previousQ.copy(t),this.outQ;var r=n*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(s,r),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.previousTimestampS=e,this.outQ},i2.prototype.getPosition=function(){return null},i2.prototype.getOrientation=function(){var t=void 0;if(this.isWithoutDeviceMotion&&this.a5t)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(i=(new ss).setFromAxisAngle(new Ns(0,0,-1),0),e=new ss,-90===s.orientation?e.setFromAxisAngle(new Ns(0,1,0),S.PI/-2):e.setFromAxisAngle(new Ns(0,1,0),S.PI/2),i.multiply(e)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var t=new ss;return t.setFromAxisAngle(new Ns(1,0,0),-S.PI/2),t}(),t=this.a5t,(n=new ss).copy(t),n.multiply(this.deviceOrientationFilterToWorldQ),n.multiply(this.resetQ),n.multiply(this.worldToScreenQ),n.multiplyQuaternions(this.deviceOrientationFixQ,n),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.e5t[0]=n.x,this.e5t[1]=n.y,this.e5t[2]=n.z,this.e5t[3]=n.w,this.e5t;var i,e,n,r=this.filter.getOrientation();return t=this.posePredictor.getPrediction(r,this.gyroscope,this.previousTimestampS),(n=new ss).copy(this.filterToWorldQ),n.multiply(this.resetQ),n.multiply(t),n.multiply(this.worldToScreenQ),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.e5t[0]=n.x,this.e5t[1]=n.y,this.e5t[2]=n.z,this.e5t[3]=n.w,this.e5t},i2.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),p4()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},i2.prototype.u5t=function(t){this.a5t=this.a5t||new ss;var i=t.alpha,e=t.beta,s=t.gamma;i=(i||0)*S.PI/180,e=(e||0)*S.PI/180,s=(s||0)*S.PI/180,this.a5t.setFromEulerYXZ(e,i,-s)},i2.prototype.c5t=function(t){this.l5t(t)},i2.prototype.l5t=function(t){var i=t.accelerationIncludingGravity,e=t.rotationRate,s=t.timeStamp/1e3,n=s-this.previousTimestampS;return n<0?(x4("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=s)):n<=.001||n>1?(x4("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=s)):(this.accelerometer.set(-i.x,-i.y,-i.z),m4()?this.gyroscope.set(-e.beta,e.alpha,e.gamma):this.gyroscope.set(e.alpha,e.beta,e.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(S.PI/180),this.filter.addAccelMeasurement(this.accelerometer,s),this.filter.addGyroMeasurement(this.gyroscope,s),void(this.previousTimestampS=s))},i2.prototype.d5t=function(t){this.i5t()},i2.prototype.zx=function(t){var i=t.data;i&&i.type&&("devicemotion"===i.type.toLowerCase()&&this.l5t(i.deviceMotionEvent))},i2.prototype.i5t=function(){switch(this.worldToScreenQ.set(0,0,0,1),s.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new Ns(0,0,1),-S.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new Ns(0,0,1),S.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},i2.prototype.start=function(){var t,i,e;this.f5t=this.c5t.bind(this),this._5t=this.d5t.bind(this),this.g5t=this.zx.bind(this),this.w5t=this.u5t.bind(this),Mc()&&(t=s.self!==s.top,i=k4(c.referrer),e=k4(s.location.href),t&&i!==e)&&s.addEventListener("message",this.g5t),s.addEventListener("orientationchange",this._5t),this.isWithoutDeviceMotion?s.addEventListener("deviceorientation",this.w5t):s.addEventListener("devicemotion",this.f5t)},i2.prototype.stop=function(){s.removeEventListener("devicemotion",this.f5t),s.removeEventListener("deviceorientation",this.w5t),s.removeEventListener("orientationchange",this._5t),s.removeEventListener("message",this.g5t)};var e2=new Ns(1,0,0),s2=new Ns(0,0,1),n2={};screen.orientation?n2=screen.orientation:screen.msOrientation?n2=screen.msOrientation:C.defineProperty(n2,"angle",{get:function(){return s.orientation||0}});var r2=new ss;r2.setFromAxisAngle(e2,-S.PI/2),r2.multiply((new ss).setFromAxisAngle(s2,S.PI/2));var h2=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new _("Cannot call a class as a function")}(this,t),this.config=i,this.sensor=null,this.fusionSensor=null,this.A5t=new Float32Array(4),this.api=null,this.errors=[],this.v5t=new ss,this.m5t=new ss,this.p5t=new ss,this.y5t=this.y5t.bind(this),this.M5t=this.M5t.bind(this),this.T5t=this.T5t.bind(this),this.T5t(),this.init()}return d4(t,[{key:"init",value:function(){var t=null;try{(t=new RelativeOrientationSensor({frequency:60})).addEventListener("error",this.M5t)}catch(t){this.errors.push(t),"SecurityError"===t.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===t.name?this.useDeviceMotion():console.error(t)}t&&(this.api="sensor",this.sensor=t,this.sensor.addEventListener("reading",this.y5t),this.sensor.start()),s.addEventListener("orientationchange",this.T5t)}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new i2(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this.A5t[0]=this.A5t[1]=this.A5t[2]=0,this.A5t[3]=1,this.A5t;var t=this.sensor.quaternion;this.v5t.set(t[0],t[1],t[2],t[3]);var i=this.p5t;return i.copy(r2),i.multiply(this.v5t),i.multiply(this.m5t),this.config.YAW_ONLY&&(i.x=i.z=0,i.normalize()),this.A5t[0]=i.x,this.A5t[1]=i.y,this.A5t[2]=i.z,this.A5t[3]=i.w,this.A5t}},{key:"M5t",value:function(t){this.errors.push(t.error),"NotAllowedError"===t.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===t.error.name?console.error("Sensor could not be read"):console.error(t.error)}},{key:"y5t",value:function(){}},{key:"T5t",value:function(){var t=-n2.angle*S.PI/180;this.m5t.setFromAxisAngle(s2,t)}}]),t}();function th(){this.N5t();var t=c.createElement("div");(r=t.style).position="fixed",r.top=0,r.right=0,r.bottom=0,r.left=0,r.backgroundColor="gray",r.fontFamily="sans-serif",r.zIndex=1e6;var i=c.createElement("img");i.src=this.icon,(r=i.style).marginLeft="25%",r.marginTop="25%",r.width="50%",t.appendChild(i);var e=c.createElement("div");(r=e.style).textAlign="center",r.fontSize="16px",r.lineHeight="24px",r.margin="24px 25%",r.width="50%",e.innerHTML="Place your phone into your Cardboard viewer.",t.appendChild(e);var s=c.createElement("div");(r=s.style).backgroundColor="#CFD8DC",r.position="fixed",r.bottom=0,r.width="100%",r.height="48px",r.padding="14px 24px",r.boxSizing="border-box",r.color="#656A6B",t.appendChild(s);var n=c.createElement("div");n.style.float="left",n.innerHTML="No Cardboard viewer?";var r,h=c.createElement("a");h.href="https://www.google.com/get/cardboard/get-cardboard/",h.innerHTML="get one",h.target="Tu",(r=h.style).float="right",r.fontWeight=600,r.textTransform="uppercase",r.borderLeft="1px solid gray",r.paddingLeft="24px",r.textDecoration="none",r.color="#656A6B",s.appendChild(n),s.appendChild(h),this.overlay=t,this.text=e,this.hide()}th.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):c.body.appendChild(this.overlay),this.overlay.style.display="block";var i=this.overlay.querySelector("img").style;p4()?(i.width="20%",i.marginLeft="40%",i.marginTop="3%"):(i.width="50%",i.marginLeft="25%",i.marginTop="25%")},th.prototype.hide=function(){this.overlay.style.display="none"},th.prototype.showTemporarily=function(t,i){this.show(i),this.timer=v(this.hide.bind(this),t)},th.prototype.disableShowTemporarily=function(){m(this.timer)},th.prototype.update=function(){this.disableShowTemporarily(),!p4()&&I4()?this.show():this.hide()},th.prototype.N5t=function(){this.icon="data:"+"image/svg+xml"+";base64,"+"PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"};var o2="CardboardV1",a2="WEBVR_CARDBOARD_VIEWER";function qi(){try{this.selectedKey=localStorage.getItem(a2)}catch(t){console.error("Failed to load viewer profile: %s",t)}this.selectedKey||(this.selectedKey=o2),this.dialog=this.D5t(la.Viewers),this.root=null,this.I5t=[]}qi.prototype.show=function(t){this.root=t,t.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},qi.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},qi.prototype.getCurrentViewer=function(){return la.Viewers[this.selectedKey]},qi.prototype.S5t=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},qi.prototype.onChange=function(t){this.I5t.push(t)},qi.prototype.E5t=function(t){for(var i=0;i<this.I5t.length;i++)this.I5t[i](t)},qi.prototype.b5t=function(){if(this.selectedKey=this.S5t(),this.selectedKey&&la.Viewers[this.selectedKey]){this.E5t(la.Viewers[this.selectedKey]);try{localStorage.setItem(a2,this.selectedKey)}catch(t){console.error("Failed to save viewer profile: %s",t)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},qi.prototype.D5t=function(t){var i=c.createElement("div");i.classList.add("webvr-polyfill-viewer-selector"),i.style.display="none";var e=c.createElement("div");(n=e.style).position="fixed",n.left=0,n.top=0,n.width="100%",n.height="100%",n.background="rgba(0, 0, 0, 0.3)",e.addEventListener("click",this.hide.bind(this));var s=c.createElement("div"),n=s.style;for(var r in n.boxSizing="border-box",n.position="fixed",n.top="24px",n.left="50%",n.marginLeft="-140px",n.width="280px",n.padding="24px",n.overflow="hidden",n.background="#fafafa",n.fontFamily="'Roboto', sans-serif",n.boxShadow="0px 5px 20px #666",s.appendChild(this.L5t("Select your viewer")),t)s.appendChild(this.k5t(r,t[r].label));return s.appendChild(this.x5t("Save",this.b5t.bind(this))),i.appendChild(e),i.appendChild(s),i},qi.prototype.L5t=function(t){var i=c.createElement("h1"),e=i.style;return e.color="black",e.fontSize="20px",e.fontWeight="bold",e.marginTop=0,e.marginBottom="24px",i.innerHTML=t,i},qi.prototype.k5t=function(t,i){var e=c.createElement("div");e.style.marginTop="8px",e.style.color="black";var s=c.createElement("input");s.style.fontSize="30px",s.setAttribute("id",t),s.setAttribute("type","radio"),s.setAttribute("value",t),s.setAttribute("name","field");var n=c.createElement("label");return n.style.marginLeft="4px",n.setAttribute("for",t),n.innerHTML=i,e.appendChild(s),e.appendChild(n),e},qi.prototype.x5t=function(t,i){var e=c.createElement("button");e.innerHTML=t;var s=e.style;return s.float="right",s.textTransform="uppercase",s.color="#1094f7",s.fontSize="14px",s.letterSpacing=0,s.border=0,s.background="none",s.marginTop="16px",e.addEventListener("click",i),e};void 0!==s||("undefined"!=typeof global?global:"undefined"!=typeof self&&self);var u2=function(t){return t&&t.__esModule?t.default:t}(function(t,i){return t(i={exports:{}},i.exports),i.exports}((function(t,i){var e;e=function(){return function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||C.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return C.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),C.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),r=e(1),h=void 0!==td&&T((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(td.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!s.MSStream,o=function(){function t(){!function(t,i){if(!(t instanceof i))throw new _("Cannot call a class as a function")}(this,t),h?this.noSleepTimer=null:(this.noSleepVideo=c.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",r),this.noSleepVideo.addEventListener("timeupdate",function(t){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=S.random())}.bind(this)))}return n(t,[{key:"enable",value:function(){h?(this.disable(),this.noSleepTimer=s.setInterval((function(){s.location.href="/",s.setTimeout(s.stop,0)}),15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){h?this.noSleepTimer&&(s.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),t}();t.exports=o},function(t,i,e){t.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])},t.exports=e()}))),c2=1e3,l2=[0,0,.5,1],d2=[.5,0,.5,1],f2=s.requestAnimationFrame,_2=s.cancelAnimationFrame;function g2(t){C.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:t.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:t.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:t.canPresent},maxLayers:{writable:!1,enumerable:!0,value:t.maxLayers},hasOrientation:{enumerable:!0,get:function(){return oh("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),t.hasOrientation}}})}function kr(t){var i=!("wakelock"in(t=t||{}))||t.wakelock;this.isPolyfilled=!0,this.displayId=c2++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,C.defineProperty(this,"isConnected",{get:function(){return oh("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new g2({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.C5t=!1,this.iN=null,this.O5t=null,this.uG=null,this.f9=null,this.j5t=null,this.z5t=null,this.P5t=null,this.B5t=null,i&&I4()&&(this.R5t=new u2)}kr.prototype.getFrameData=function(t){return L4(t,this.U5t(),this)},kr.prototype.getPose=function(){return oh("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this.U5t()},kr.prototype.resetPose=function(){return oh("VRDisplay.prototype.resetPose"),this.Q5t()},kr.prototype.getImmediatePose=function(){return oh("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this.U5t()},kr.prototype.requestAnimationFrame=function(t){return f2(t)},kr.prototype.cancelAnimationFrame=function(t){return _2(t)},kr.prototype.wrapForFullscreen=function(t){if(Mc())return t;if(!this.f9){this.f9=c.createElement("div");var i=["height: "+S.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.f9.setAttribute("style",i.join("; ")+";"),this.f9.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.uG==t)return this.f9;if(this.uG&&(this.O5t?this.O5t.appendChild(this.uG):this.uG.parentElement.removeChild(this.uG)),this.uG=t,this.O5t=t.parentElement,this.O5t||c.body.appendChild(t),!this.f9.parentElement){var e=this.uG.parentElement;e.insertBefore(this.f9,this.uG),e.removeChild(this.uG)}this.f9.insertBefore(this.uG,this.f9.firstChild),this.j5t=this.uG.getAttribute("style");var s=this;return function(){if(s.uG){var t=["position: absolute","top: 0","left: 0","width: "+S.max(screen.width,screen.height)+"px","height: "+S.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];s.uG.setAttribute("style",t.join("; ")+";")}}(),this.f9},kr.prototype.removeFullscreenWrapper=function(){if(this.uG){var t=this.uG;this.j5t?t.setAttribute("style",this.j5t):t.removeAttribute("style"),this.uG=null,this.j5t=null;var i=this.f9.parentElement;return this.f9.removeChild(t),this.O5t===i?i.insertBefore(t,this.f9):this.O5t&&this.O5t.appendChild(t),i.removeChild(this.f9),t}},kr.prototype.requestPresent=function(t){var i=this.isPresenting,e=this;return t instanceof Array||(oh("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),t=[t]),new Promise((function(s,n){if(e.capabilities.canPresent)if(0==t.length||t.length>e.capabilities.maxLayers)n(new k("Invalid number of layers."));else{var r=t[0];if(r.source){var h=r.leftBounds||l2,o=r.rightBounds||d2;if(i){var a=e.iN;a.source!==r.source&&(a.source=r.source);for(var u=0;u<4;u++)a.leftBounds[u]=h[u],a.rightBounds[u]=o[u];return e.wrapForFullscreen(e.iN.source),e.F5t(),void s()}if(e.iN={predistorted:r.predistorted,source:r.source,leftBounds:h.slice(0),rightBounds:o.slice(0)},e.C5t=!1,e.iN&&e.iN.source){var l=e.wrapForFullscreen(e.iN.source);e.Y5t(l,(function(){var t=c.fullscreenElement||c.webkitFullscreenElement||c.mozFullScreenElement||c.msFullscreenElement;e.isPresenting=l===t,e.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch((function(t){console.error("screen.orientation.lock() failed due to",t.message)})),e.C5t=!1,e.G5t(),s()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),e.disableWakeLock(),e.W5t(),e.removeFullscreenWrapper(),e.V5t()),e.H5t()}),(function(){e.C5t&&(e.removeFullscreenWrapper(),e.V5t(),e.disableWakeLock(),e.C5t=!1,e.isPresenting=!1,n(new k("Unable to present.")))})),!function(t){if(c.fullscreenEnabled&&t.requestFullscreen)t.requestFullscreen();else if(c.webkitFullscreenEnabled&&t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(c.mozFullScreenEnabled&&t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!c.msFullscreenEnabled||!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0}(l)?(Mc()||g4())&&(e.enableWakeLock(),e.isPresenting=!0,e.G5t(),e.H5t(),s()):(e.enableWakeLock(),e.C5t=!0)}e.C5t||Mc()||(T4(),n(new k("Unable to present.")))}else s()}else n(new k("VRDisplay is not capable of presenting."))}))},kr.prototype.exitPresent=function(){var t=this.isPresenting,i=this;return this.isPresenting=!1,this.iN=null,this.disableWakeLock(),new Promise((function(e,s){t?(T4(),i.W5t(),i.removeFullscreenWrapper(),i.V5t(),i.H5t(),e()):s(new k("Was not presenting to VRDisplay."))}))},kr.prototype.getLayers=function(){return this.iN?[this.iN]:[]},kr.prototype.H5t=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});s.dispatchEvent(t)},kr.prototype.q5t=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});s.dispatchEvent(t)},kr.prototype.Y5t=function(t,i,e){this.V5t(),this.z5t=t,this.P5t=i,this.B5t=e,i&&(c.fullscreenEnabled?t.addEventListener("fullscreenchange",i,!1):c.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenchange",i,!1):c.mozFullScreenEnabled?c.addEventListener("mozfullscreenchange",i,!1):c.msFullscreenEnabled&&t.addEventListener("msfullscreenchange",i,!1)),e&&(c.fullscreenEnabled?t.addEventListener("fullscreenerror",e,!1):c.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenerror",e,!1):c.mozFullScreenEnabled?c.addEventListener("mozfullscreenerror",e,!1):c.msFullscreenEnabled&&t.addEventListener("msfullscreenerror",e,!1))},kr.prototype.V5t=function(){if(this.z5t){var t=this.z5t;if(this.P5t){var i=this.P5t;t.removeEventListener("fullscreenchange",i,!1),t.removeEventListener("webkitfullscreenchange",i,!1),c.removeEventListener("mozfullscreenchange",i,!1),t.removeEventListener("msfullscreenchange",i,!1)}if(this.B5t){var e=this.B5t;t.removeEventListener("fullscreenerror",e,!1),t.removeEventListener("webkitfullscreenerror",e,!1),c.removeEventListener("mozfullscreenerror",e,!1),t.removeEventListener("msfullscreenerror",e,!1)}this.z5t=null,this.P5t=null,this.B5t=null}},kr.prototype.enableWakeLock=function(){this.R5t&&this.R5t.enable()},kr.prototype.disableWakeLock=function(){this.R5t&&this.R5t.disable()},kr.prototype.G5t=function(){},kr.prototype.W5t=function(){},kr.prototype.submitFrame=function(t){},kr.prototype.getEyeParameters=function(t){return null};var w2={MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},A2="left",v2="right";function Se(t){var i=S4({},w2);t=S4(i,t||{}),kr.call(this,{wakelock:t.MOBILE_WAKE_LOCK}),this.config=t,this.displayName="Cardboard VRDisplay",this.capabilities=new g2({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.X5t=this.config.BUFFER_SCALE,this.Z5t=new h2(this.config),this.K5t=null,this.J5t=null,this.d9=null,this.$5t=null,this.t6t=new Z4(this.config.DPDB_URL,this.i6t.bind(this)),this.e6t=new la(this.t6t.getDeviceParams()),this.s6t=new qi,this.s6t.onChange(this.n6t.bind(this)),this.e6t.setViewer(this.s6t.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.r6t=new th),Mc()&&s.addEventListener("resize",this.qY.bind(this))}Se.prototype=C.create(kr.prototype),Se.prototype.U5t=function(){return{position:null,orientation:this.Z5t.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},Se.prototype.Q5t=function(){this.Z5t.resetPose&&this.Z5t.resetPose()},Se.prototype.H3t=function(t){var i;if(t==A2)i=this.e6t.getFieldOfViewLeftEye();else{if(t!=v2)return console.error("Invalid eye provided: %s",t),null;i=this.e6t.getFieldOfViewRightEye()}return i},Se.prototype.q3t=function(t){var i;if(t==A2)i=[.5*-this.e6t.viewer.interLensDistance,0,0];else{if(t!=v2)return console.error("Invalid eye provided: %s",t),null;i=[.5*this.e6t.viewer.interLensDistance,0,0]}return i},Se.prototype.getEyeParameters=function(t){var i=this.q3t(t),e=this.H3t(t),s={offset:i,renderWidth:.5*this.e6t.device.width*this.X5t,renderHeight:this.e6t.device.height*this.X5t};return C.defineProperty(s,"fieldOfView",{enumerable:!0,get:function(){return oh("VRFieldOfView","VRFrameData's projection matrices"),e}}),s},Se.prototype.i6t=function(t){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.e6t.updateDeviceParams(t),this.K5t&&this.K5t.updateDeviceInfo(this.e6t)},Se.prototype.h6t=function(){this.iN&&this.K5t&&(this.iN.leftBounds||this.iN.rightBounds)&&this.K5t.setTextureBounds(this.iN.leftBounds,this.iN.rightBounds)},Se.prototype.G5t=function(){var t=this.iN.source.getContext("webgl");if(t||(t=this.iN.source.getContext("experimental-webgl")),t||(t=this.iN.source.getContext("webgl2")),t){if(this.d9=t.canvas,this.$5t=t.canvas.getAttribute("style"),this.iN.predistorted?this.config.CARDBOARD_UI_DISABLED||(t.canvas.width=y4()*this.X5t,t.canvas.height=M4()*this.X5t,this.J5t=new U4(t)):(this.config.CARDBOARD_UI_DISABLED||(this.J5t=new U4(t)),this.K5t=new so(t,this.J5t,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.K5t.updateDeviceInfo(this.e6t)),this.J5t&&this.J5t.listen(function(t){this.s6t.show(this.iN.source.parentElement),t.stopPropagation(),t.preventDefault()}.bind(this),function(t){this.exitPresent(),t.stopPropagation(),t.preventDefault()}.bind(this)),this.r6t){var i=this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT;p4()&&I4()&&i?this.r6t.showTemporarily(i,this.iN.source.parentElement):this.r6t.update()}this.orientationHandler=this.d5t.bind(this),s.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.h6t.bind(this),s.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.qY(),this.o6t()}},Se.prototype.W5t=function(){this.K5t&&(this.K5t.destroy(),this.K5t=null),this.J5t&&(this.J5t.destroy(),this.J5t=null),this.r6t&&this.r6t.hide(),this.s6t.hide(),this.d9&&(b4(this.d9),this.$5t?this.d9.setAttribute("style",this.$5t):this.d9.removeAttribute("style"),E4(this.d9),this.d9=null,this.$5t=null),s.removeEventListener("orientationchange",this.orientationHandler),s.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},Se.prototype.F5t=function(){this.W5t(),this.G5t()},Se.prototype.submitFrame=function(t){if(this.K5t)this.h6t(),this.K5t.submitFrame();else if(this.J5t&&this.iN){var i=this.iN.source.getContext("webgl").canvas;i.width==this.lastWidth&&i.height==this.lastHeight||this.J5t.onResize(),this.lastWidth=i.width,this.lastHeight=i.height,this.J5t.render()}},Se.prototype.d5t=function(t){this.s6t.hide(),this.r6t&&this.r6t.update(),this.qY()},Se.prototype.qY=function(t){if(this.iN){var i=this.iN.source.getContext("webgl");b4(i.canvas);i.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),E4(i.canvas)}},Se.prototype.n6t=function(t){this.e6t.setViewer(t),this.K5t&&this.K5t.updateDeviceInfo(this.e6t),this.o6t()},Se.prototype.o6t=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.e6t}});s.dispatchEvent(t)},Se.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},Se.VRDisplay=kr;var m2={PROVIDE_MOBILE_VRDISPLAY:!0,GET_VR_DISPLAYS_TIMEOUT:1e3,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function wu(t){this.config=l4(l4({},m2),t),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in td,this.native={},this.native.getVRDisplays=td.getVRDisplays,this.native.VRFrameData=s.VRFrameData,this.native.VRDisplay=s.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&u4())&&(this.enable(),this.getVRDisplays().then((function(t){t&&t[0]&&t[0].q5t&&t[0].q5t()})))}wu.prototype.getPolyfillDisplays=function(){if(this.a6t)return this.polyfillDisplays;if(u4()){var t=new Se({MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,TOUCH_PANNER_DISABLED:this.config.TOUCH_PANNER_DISABLED,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(t)}return this.a6t=!0,this.polyfillDisplays},wu.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var t=this.native.VRFrameData,i=new this.native.VRFrameData,e=this.native.VRDisplay.prototype.getFrameData;s.VRDisplay.prototype.getFrameData=function(s){s instanceof t?e.call(this,s):(e.call(this,i),s.pose=i.pose,c4(i.leftProjectionMatrix,s.leftProjectionMatrix),c4(i.rightProjectionMatrix,s.rightProjectionMatrix),c4(i.leftViewMatrix,s.leftViewMatrix),c4(i.rightViewMatrix,s.rightViewMatrix))}}td.getVRDisplays=this.getVRDisplays.bind(this),s.VRDisplay=Se.VRDisplay,s.VRFrameData=Se.VRFrameData},wu.prototype.getVRDisplays=function(){var t,i=this,e=this.config;return this.hasNative?function(t){return Promise.race?Promise.race(t):new Promise((function(i,e){for(var s=0;s<t.length;s++)t[s].then(i,e)}))}([this.native.getVRDisplays.call(td),new Promise((function(i){t=v((function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),i([])}),e.GET_VR_DISPLAYS_TIMEOUT)}))]).then((function(e){return m(t),e.length>0?e:i.getPolyfillDisplays()})):Promise.resolve(this.getPolyfillDisplays())},wu.version="0.10.5-opentelly.3",wu.VRFrameData=Se.VRFrameData,wu.VRDisplay=Se.VRDisplay;var p2=C.freeze({default:wu}),y2=p2&&wu||p2;void 0!==Qa&&Qa.window&&(Qa.document||(Qa.document=Qa.window.document),Qa.navigator||(Qa.navigator=Qa.window.navigator));new y2({TOUCH_PANNER_DISABLED:!0,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:0,MOBILE_WAKE_LOCK:!li.Mb&&!li.Ra,DPDB_URL:void 0});r(),r(),r();var M2=class{u6t(t,i){const e=this.c6t;let s;switch(i){case e.VERTEX_SHADER:s=e.createShader(i),this.l6t=s;break;case e.FRAGMENT_SHADER:s=e.createShader(i),this.d6t=s;break;default:return void console.error("Invalid Shader Type:",i)}e.attachShader(this.f6t,s),e.shaderSource(s,t),e.compileShader(s)}_6t(t){const i=this.c6t;if(t){this.g6t={};for(const e in t)i.bindAttribLocation(this.f6t,t[e],e),this.g6t[e]=t[e]}}w6t(){this.c6t.linkProgram(this.f6t)}A6t(){const t=this.c6t;if(this.v6t){if(t.getProgramParameter(this.f6t,t.LINK_STATUS)){if(!this.g6t){this.g6t={};const i=t.getProgramParameter(this.f6t,t.ACTIVE_ATTRIBUTES);for(let e=0;e<i;e++){const i=t.getActiveAttrib(this.f6t,e);this.g6t[i.name]=t.getAttribLocation(this.f6t,i.name)}}this.m6t={};const i=t.getProgramParameter(this.f6t,t.ACTIVE_UNIFORMS);let e="";for(let s=0;s<i;s++){e=t.getActiveUniform(this.f6t,s).name.replace("[0]",""),this.m6t[e]=t.getUniformLocation(this.f6t,e)}}else this.l6t&&!t.getShaderParameter(this.l6t,t.COMPILE_STATUS)?console.error("Vertex shader compile error:",t.getShaderInfoLog(this.l6t)):this.d6t&&!t.getShaderParameter(this.d6t,t.COMPILE_STATUS)?console.error("Fragment shader compile error:",t.getShaderInfoLog(this.d6t)):console.error("Program link error:",t.getProgramInfoLog(this.f6t)),t.deleteProgram(this.f6t),this.f6t=null;t.deleteShader(this.l6t),t.deleteShader(this.d6t),this.v6t=!1}t.useProgram(this.f6t)}constructor(t){this.g6t=null,this.m6t=null,this.v6t=!0,this.l6t=null,this.d6t=null,this.c6t=t,this.f6t=t.createProgram()}},T2=class{hr(t,i,e){let s=this.c6t;this.p6t(t,i,s,e),this.h.V_||this.h.d9.LY(s,s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE),s.drawElements(s.TRIANGLES,this.y6t,s.UNSIGNED_SHORT,0)}M6t(t){this.T6t||(t.bindTexture(t.TEXTURE_2D,this.N6t),this.h.d9.LY(t,t.TEXTURE_2D,0,t.RGB,t.RGB,t.UNSIGNED_BYTE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.T6t=!0)}p6t(t,i,e,s){const n=this.f6t;n.A6t(),this.M6t(e);const r=n.m6t,h=n.g6t;let o;e.uniformMatrix4fv(r.projectionMat,!1,t),e.uniformMatrix4fv(r.modelViewMat,!1,i),o="right"===s?this.D6t:this.I6t,e.bindBuffer(e.ARRAY_BUFFER,o),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.S6t),e.enableVertexAttribArray(h.position),e.enableVertexAttribArray(h.texCoord),e.vertexAttribPointer(h.position,3,e.FLOAT,!1,20,0),e.vertexAttribPointer(h.texCoord,2,e.FLOAT,!1,20,12),e.activeTexture(e.TEXTURE0),e.uniform1i(r.diffuse,0),e.bindTexture(e.TEXTURE_2D,this.N6t)}constructor(t,i,e){this.T6t=!1,this.c6t=t,this.N6t=t.createTexture();let s=["uniform mat4 projectionMat;","uniform mat4 modelViewMat;","attribute vec3 position;","attribute vec2 texCoord;","varying vec2 vTexCoord;","void main() {","  vTexCoord = texCoord;","  gl_Position = projectionMat * modelViewMat * vec4( position, 1.0 );","}"].join("\n"),n=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");this.f6t=new M2(t),this.f6t.u6t(s,t.VERTEX_SHADER),this.f6t.u6t(n,t.FRAGMENT_SHADER),this.f6t._6t({position:0,texCoord:1}),this.f6t.w6t();const r=[],h=[],o=[],a=40;for(let t=0;t<=40;++t){const i=t*S.PI/40,s=S.sin(i),n=S.cos(i);for(let i=0;i<=a;++i){const o=2*i*S.PI/a-S.PI,u=S.sin(o)*s,c=n,l=-S.cos(o)*s,d=i/a,f=t/40;switch(e){case"horizontal":r.push(2*u,2*c,2*l,d/2,f),h.push(2*u,2*c,2*l,d/2+.5,f);break;case"vertical":r.push(2*u,2*c,2*l,d,f/2),h.push(2*u,2*c,2*l,d,f/2+.5);break;default:r.push(2*u,2*c,2*l,d,f)}}}for(let t=0;t<40;++t){let i=41*t,e=41*(t+1);for(let t=0;t<a;++t){let s=i+t,n=e+t;o.push(s,n,s+1,n,n+1,s+1)}}switch(this.I6t=t.createBuffer(),this.D6t=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.I6t),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.D6t),e){case"horizontal":case"vertical":t.bufferData(t.ARRAY_BUFFER,new Float32Array(h),t.STATIC_DRAW);break;default:t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW)}this.S6t=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.S6t),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),t.STATIC_DRAW),this.y6t=o.length,this.h=i}};r();var Ro=class extends Js{Qh(){return new N2}constructor(){super("E6t")}},N2=class extends d{constructor(){super("stereochange")}};r();var Ku=class extends Js{Qh(){return new D2}constructor(){super("b6t")}},D2=class extends d{constructor(){super("directionchange")}};r(),r();var io=S.PI/180,qa=180/S.PI,Jc=class{pz(t,i){return this.x=t,this.y=i,this}nvt(t){return this.x=t.x,this.y=t.y,this}L6t(t){return this.pz(t[0],t[1])}k6t(){const t=new Float32Array(2);return t[0]=this.x,t[1]=this.y,t}x6t(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}constructor(t,i){this.x=t||0,this.y=i||0}},Kh=class{pz(t,i,e){return this.x=t,this.y=i,this.z=e,this}nvt(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}L6t(t){return this.pz(t[0],t[1],t[2])}k6t(){const t=new Float32Array(3);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t}L(){return S.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}C6t(){const t=this.L();if(0!==t){const i=1/t;this.O6t(i)}else this.x=0,this.y=0,this.z=0;return this}O6t(t){this.x*=t,this.y*=t,this.z*=t}j6t(t){const i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,h=t.z,o=t.w,a=o*i+r*s-h*e,u=o*e+h*i-n*s,c=o*s+n*e-r*i,l=-n*i-r*e-h*s;return this.x=a*o+l*-n+u*-h-c*-r,this.y=u*o+l*-r+c*-n-a*-h,this.z=c*o+l*-h+a*-r-u*-n,this}z6t(t){return this.x*t.x+this.y*t.y+this.z*t.z}P6t(t,i){const e=t.x,s=t.y,n=t.z,r=i.x,h=i.y,o=i.z;return this.x=s*o-n*h,this.y=n*r-e*o,this.z=e*h-s*r,this}constructor(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0}},I2=class{pz(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this}nvt(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}L6t(t){return this.pz(t[0],t[1],t[2],t[3])}k6t(){const t=new Float32Array(4);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=this.w,t}z6t(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}oy(t){return this.B6t(this,t)}B6t(t,i){const e=t.x,s=t.y,n=t.z,r=t.w,h=i.x,o=i.y,a=i.z,u=i.w;return this.x=e*u+r*h+s*a-n*o,this.y=s*u+r*o+n*h-e*a,this.z=n*u+r*a+e*o-s*h,this.w=r*u-e*h-s*o-n*a,this}R6t(){return this.x*=-1,this.y*=-1,this.z*=-1,this.C6t(),this}U6t(){const t=this.x,i=this.y,e=this.z,s=this.w,n=t*i+e*s;let r,h,o;if(n>.499)r=2*S.atan2(t,s),h=S.PI/2,o=0;else if(n<-.499)r=-2*S.atan2(t,s),h=-S.PI/2,o=0;else{const a=t*t,u=i*i,c=e*e;r=S.atan2(2*i*s-2*t*e,1-2*u-2*c),h=S.asin(2*n),o=S.atan2(2*t*s-2*i*e,1-2*a-2*c)}return new oc(r,o,h)}C6t(){let t=S.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this}constructor(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1}},oc=class{pz(t,i,e){return this.Q6t=t,this.F6t=i,this.Y6t=e,this}nvt(t){return this.pz(t.Q6t,t.F6t,t.Y6t)}gm(t){return this.Q6t+=t.Q6t,this.F6t+=t.F6t,this.Y6t+=t.Y6t,this}G6t(){const t=this.Q6t,i=this.Y6t,e=this.F6t,s=S.cos(t/2),n=S.cos(i/2),r=S.cos(e/2),h=S.sin(t/2),o=S.sin(i/2),a=S.sin(e/2),u=s*n,c=h*o;return new I2(u*a+c*r,h*n*r+s*o*a,s*o*r-h*n*a,u*r-c*a)}constructor(t,i,e){this.Q6t=t||0,this.F6t=i||0,this.Y6t=e||0}},S2=.15,E2=class{ZI(){this.Ot||(this.Ot=!0,this._e.addEventListener("keydown",this.W6t),this._e.addEventListener("mousedown",this.V6t),this._e.addEventListener("touchstart",this.H6t),s.addEventListener("mousemove",this.Jn),s.addEventListener("mouseup",this.q6t),this.X6t(s),s.addEventListener("touchmove",this.Z6t),s.addEventListener("touchend",this.K6t))}X6t(t){if(qT(t));else if(Xs(t))try{t.parent.addEventListener("mouseup",this.q6t),this.X6t(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.J6t)}}KI(){this.Ot&&(this.Ot=!1,this.$6t=!1,this.t8t&&(Ws(this.t8t),this.t8t=null),this._e.removeEventListener("keydown",this.W6t),this._e.removeEventListener("mousedown",this.V6t),this._e.removeEventListener("touchstart",this.H6t),s.removeEventListener("mousemove",this.Jn),s.removeEventListener("mouseup",this.q6t),this.i8t(s),s.removeEventListener("touchmove",this.Z6t),s.removeEventListener("touchend",this.K6t))}i8t(t){if(t.document.documentElement.removeEventListener("mouseleave",this.J6t),Xs(t))try{t.parent.removeEventListener("mouseup",this.q6t),this.i8t(t.parent)}catch(t){}}get e8t(){return new oc(this.s8t,this.n8t,this.r8t)}set e8t(t){this.s8t=t.Q6t,this.n8t=t.F6t,this.r8t=t.Y6t}h8t(t){this.o8t("s8t",t)}a8t(t){t=et(t,-S.PI/2,S.PI/2),this.o8t("n8t",t)}o8t(t,i){this.t8t&&Ws(this.t8t);let e=this[t],s=Cu(),n=()=>{let r=Cu()-s;if(r>=80)return this[t]=i,Ws(this.t8t),void(this.t8t=null);this.t8t=Xh(n);let h=r/80;this[t]=e+(i-e)*h};this.t8t=Xh(n)}u8t(){this.n8t+=2*S.PI*this.c8t.y/this._e.clientHeight*.3,this.s8t+=2*S.PI*this.c8t.x/this._e.clientWidth*.5,this.n8t=et(this.n8t,-S.PI/2,S.PI/2)}l8t(){this.$6t=!1}d8t(){return(c.pointerLockElement||c.mozPointerLockElement||c.webkitPointerLockElement)===this._e}resetPose(){this.n8t=0,this.s8t=0}ln(){this.KI()}constructor(t){this.Ot=!1,this.n8t=0,this.s8t=0,this.r8t=0,this.t8t=null,this.f8t=new Jc,this._8t=new Jc,this.c8t=new Jc,this.$6t=!1,this.W6t=t=>{38===t.keyCode?this.a8t(this.n8t+S2):39===t.keyCode?this.h8t(this.s8t-S2):40===t.keyCode?this.a8t(this.n8t-S2):37===t.keyCode&&this.h8t(this.s8t+S2)},this.V6t=t=>{this.f8t.pz(t.clientX,t.clientY),this.$6t=!0,t.preventDefault()},this.H6t=t=>{t.touches&&1===t.touches.length&&(this.f8t.pz(t.touches[0].pageX,t.touches[0].pageY),this.$6t=!0,t.preventDefault())},this.Jn=t=>{if(this.$6t||this.d8t()){if(this.d8t()){let i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this._8t.pz(this.f8t.x-i,this.f8t.y-e)}else this._8t.pz(t.clientX,t.clientY);this.c8t.x6t(this._8t,this.f8t),this.f8t.nvt(this._8t),this.u8t()}},this.Z6t=t=>{this.$6t&&(this._8t.pz(t.touches[0].pageX,t.touches[0].pageY),this.c8t.x6t(this._8t,this.f8t),this.f8t.nvt(this._8t),this.u8t())},this.q6t=t=>{this.l8t()},this.K6t=t=>{this.l8t()},this.J6t=t=>{this.l8t()},this._e=t}};r();var to=ro(d_()),b2=ro(f_()),L2=(ro(__()),ro(g_())),k2=(ro(w_()),ro(A_())),x2=ro(v_()),C2=ro(m_()),O2=ro(p_()),j2=ro(y_());r();var Ut,z2=["b6t","Mft","E6t","error"];function P2(t){let i,e={get stereo(){return t.g8t},set stereo(i){t.g8t=i},get useDeviceMotionControls(){return t.w8t},set useDeviceMotionControls(i){t.w8t=i},get direction(){return t.A8t},set direction(i){t.A8t=i},get verticalFOV(){return t.v8t},set verticalFOV(i){t.v8t=i},get canPresentVR(){return t.m8t},get state(){return t.q3},addEventListener(t,e){i.dn(t,e)},removeEventListener(t,e){i.hn(t,e)}};return i=new xb(t,z2,e),e}r(),function(t){t.Rs="unavailable",t.p8t="available",t.Pa="presenting"}(Ut||(Ut={}));var B2=new oc(0*io,0,0);function R2(t){return L_(t+180,360)-180}function U2(t,i){let e=t.z6t(i);return 1-e*e<1e-4}var Q2=class extends i{_o(){td.getVRDisplays?(this.y8t=new VRFrameData,this.M8t(),s.addEventListener("vrdisplayconnect",this.M8t,!1),s.addEventListener("vrdisplaydisconnect",this.M8t,!1),s.addEventListener("vrdisplayactivate",this.T8t,!1),s.addEventListener("vrdisplaydeactivate",this.N8t,!1),s.addEventListener("vrdisplaypresentchange",this.D8t,!1)):td.getVRDevices?this.I8t("Your browser supports WebVR but not the latest version.",ue.VR_PLATFORM_UNSUPPORTED):this.I8t("Your browser does not support WebVR.",ue.VR_PLATFORM_UNSUPPORTED),this.h.dn(t.vo,this.po),this.po()}S8t(){let t={alpha:!1,antialias:!1,preserveDrawingBuffer:!0};if(!this.E8t){const t=c.createElement("canvas");t.className="theoplayer-vr",Du(t),t.style.zIndex="2",this.h._e.appendChild(t),this.E8t=t}this.c6t=this.E8t.getContext("webgl",t),this.c6t||(this.c6t=this.E8t.getContext("experimental-webgl",t),this.c6t)?(this.c6t.enable(this.c6t.DEPTH_TEST),this.c6t.enable(this.c6t.CULL_FACE)):this.I8t("Your browser does not support WebGL.",ue.VR_PLATFORM_UNSUPPORTED)}b8t(){let t=this.A8t;this.L8t||(this.S8t(),this.L8t=!0),this.c6t&&(this.k8t(new T2(this.c6t,this.h,this.x8t)),this.E8t.style.display="",this.yi||(this.yi=new E2(this.E8t)),this.yi.ZI(),this.h.fa.dn(_c.ra,this.qY),this.h.dn(yt.un,this.qY),this.A8t=t,this.qY(),this.C8t=Xh(this.O8t))}j8t(){let t=this.A8t;this.k8t(void 0),this.yi&&this.yi.KI(),this.E8t&&(this.E8t.style.display="none"),this.h.fa.hn(_c.ra,this.qY),this.h.hn(yt.un,this.qY),this.C8t&&Ws(this.C8t),this.A8t=t}z8t(){var t;return null==(t=this.h.$a())?void 0:t.vr}P8t(t){let i=this.q3,e=this.g8t;this.B8t&&(this.R8t=void 0,this.N8t()),this.B8t=t,this.B8t&&(this.B8t.depthNear=.1,this.B8t.depthFar=1024),this.g8t=e,this.q3!==i&&this.jo(new Qc),this.g8t!==e&&this.jo(new Ro)}U8t(t){let i=this.q3;this.Q8t=t,this.q3!==i&&this.jo(new Qc)}k8t(t){let i=this.q3;this.F8t=t,this.q3!==i&&this.jo(new Qc)}Y8t(t){let i=this.q3,e=this.g8t;this.G8t=t,this.yi&&(t?this.yi.KI():this.yi.ZI()),this.q3!==i&&this.jo(new Qc),this.g8t!==e&&this.jo(new Ro)}W8t(t){let i=this.g8t;this.V8t=t,this.g8t!==i&&this.jo(new Ro)}H8t(){let t=this.E8t;this.q8t===t.width&&this.X8t===t.height||(t.width=this.q8t,t.height=this.X8t,this.Z8t())}K8t(t,i){(0,b2.default)(t,i.k6t()),(0,k2.default)(t,t)}useDeviceOrientation(){return!!this.G8t||(li.Ra?this.J8t&&this.$8t:this.J8t)}t9t(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().then((t=>{this.$8t="granted"===t}))}I8t(t,i){Ja(t),this.jo(new _i(new Ri(i,t)))}i9t(){this.jo(new Ku)}get g8t(){return this.m8t?this.G8t:this.V8t}set g8t(t){this.m8t?t?this.T8t():(this.N8t(),this.J8t=!1):this.W8t(t)}get w8t(){return this.J8t}set w8t(t){this.g8t||(this.J8t=t,t&&li.Ra&&this.t9t())}get A8t(){let t=this.e8t;return{yaw:R2(t.Q6t*qa),pitch:t.F6t*qa,roll:S.round(t.Y6t*qa)}}set A8t(t){let i=R2(t&&+t.yaw||0),e=R2(t&&+t.pitch||0),s=R2(t&&+t.roll||0);this.e8t=new oc(i*io,e*io,s*io)}get e8t(){if(this.q3===Ut.Rs)return this.e9t.U6t();let t=this.s9t,i=this.n9t,e=new oc;return t&&e.gm(t),i&&e.gm(i),e}set e8t(t){const i=this.e8t.G6t();if(this.q3===Ut.Rs)this.e9t=t.G6t();else{let i=this.B8t;i&&i.resetPose&&i.resetPose(),this.yi&&(this.yi.e8t=t),this.e9t=this.e8t.G6t()}U2(i,this.e9t)||this.i9t()}get s9t(){let t=this.R8t&&this.R8t.orientation;if(t)return(new I2).L6t(t).U6t()}get n9t(){return this.yi&&this.yi.e8t}get v8t(){return 180*this.r9t}set v8t(t){t&&t>=0&&t<=180&&(this.r9t=+t/180)}get m8t(){return!(!this.B8t||!this.B8t.capabilities.canPresent)}get q3(){var t;return this.Q8t&&((null==(t=this.z8t())?void 0:t.nativeVR)||this.F8t)?this.G8t?Ut.Pa:Ut.p8t:Ut.Rs}ln(){this.Uo(),this.j8t(),this.N8t(),this.h.hn(t.vo,this.po),td.getVRDisplays&&(s.removeEventListener("vrdisplayconnect",this.M8t,!1),s.removeEventListener("vrdisplaydisconnect",this.M8t,!1),s.removeEventListener("vrdisplayactivate",this.T8t,!1),s.removeEventListener("vrdisplaydeactivate",this.N8t,!1),s.removeEventListener("vrdisplaypresentchange",this.D8t,!1))}constructor(t){super(),this.e9t=new I2,this.r9t=.4,this.V8t=!1,this.J8t=!1,this.Q8t=!1,this.dd=void 0,this.x8t=iS.NONE,this.yi=void 0,this.h9t=[],this.B8t=void 0,this.G8t=!1,this.L8t=!1,this.E8t=void 0,this.F8t=void 0,this.c6t=null,this.C8t=0,this.y8t=void 0,this.R8t=void 0,this.o9t=(0,to.default)(),this.a9t=(0,to.default)(),this.q8t=0,this.X8t=0,this.u9t=!0,this.c9t=0,this.$8t=!1,this.l9t=()=>{this.h.hn(Dt._v,this.l9t);let t=this.z8t();t&&!t.nativeVR&&this.b8t()},this.po=()=>{this.j8t();let t=this.z8t();this.dd=t,t&&t.panoramaMode!==Xu.NONE?(t.panoramaMode===Xu.PM180&&Ii("PanoramaMode is set to '180' while the VR API only supports '360', consider using the WebXR API if you need to play 180 degree content."),this.U8t(!0),t.nativeVR?this.jo(new Qc):(this.x8t=t.stereoMode,this.h.dn(Dt._v,this.l9t))):this.U8t(!1)},this.T8t=async()=>{if(this.q3!==Ut.Rs&&this.m8t){this.u9t=!1,this.d9t();try{await this.B8t.requestPresent([{source:this.E8t}])}catch(t){this.I8t("Failed to present VR content.",ue.VR_PRESENTATION_ERROR)}finally{this.D8t()}}},this.N8t=async()=>{if(this.B8t)try{await this.B8t.exitPresent()}catch(t){}finally{this.D8t()}},this.M8t=async()=>{try{this.h9t=await td.getVRDisplays(),this.B8t&&ks(this.h9t,this.B8t)||this.P8t(this.h9t[0])}catch(t){this.h9t=[],this.P8t(void 0)}},this.D8t=()=>{this.Y8t(!!this.B8t&&this.B8t.isPresenting),this.qY(),this.u9t=!this.G8t,this.u9t?Xh(this.Z8t):this.d9t()},this.qY=()=>{if(!this.E8t)return;const t=this.h._e.offsetWidth,i=this.h._e.offsetHeight;let e=this.B8t;if(e&&this.g8t){let t=e.getEyeParameters("left"),i=e.getEyeParameters("right");t&&i&&(this.q8t=2*S.max(t.renderWidth,i.renderWidth),this.X8t=S.max(t.renderHeight,i.renderHeight))}else{let e=le.Ks.A4;this.q8t=t*e,this.X8t=i*e}},this.Z8t=()=>{if(!li.Ra||!this.E8t||!this.u9t)return;this.d9t();let t=this.E8t,i=t.offsetWidth+1,e=t.offsetHeight;t.style.width=i+"px",t.style.height=e+"px",this.c9t=Xh(this.d9t)},this.d9t=()=>{if(!this.c9t)return;let t=this.E8t;t.style.width="100%",t.style.height="100%",Ws(this.c9t),this.c9t=0},this.O8t=()=>{let t=this.B8t,i=this.r9t,e=this.E8t,s=this.F8t,n=this.c6t,r=this.y8t,h=this.o9t,o=this.a9t;this.H8t(),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),t&&this.useDeviceOrientation()&&(t.getFrameData(r),this.R8t=r.pose);let a=this.e8t.G6t();this.K8t(o,a),t&&t.isPresenting?(this.C8t=t.requestAnimationFrame(this.O8t),n.viewport(0,0,.5*e.width,e.height),s.hr(r.leftProjectionMatrix,o,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.hr(r.rightProjectionMatrix,o,"right"),t.submitFrame()):(this.C8t=Xh(this.O8t),(0,C2.default)(h,S.PI*i,e.width/e.height,.1,1024),this.g8t?(n.viewport(0,0,.5*e.width,e.height),s.hr(h,o,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.hr(h,o,"right")):(n.viewport(0,0,e.width,e.height),s.hr(h,o))),U2(a,this.e9t)||(this.e9t.nvt(a),this.i9t())},this.h=t,this.e8t=B2,this.so=P2(this),this._o()}};r(),As((function(t){return class extends t{Qh(){if(null!==this.f9t){const t=this.f9t.so;return Wt(super.Qh(),{vr:t})}return super.Qh()}ln(){var t;null==(t=this.f9t)||t.ln(),super.ln()}constructor(t,i){super(t,i),this.f9t=null,i.vr.useWebXR||(this.f9t=new Q2(this))}}}),cs.Ha),r(),r(),r(),r();var F2=class{ZI(){this.He||(this.He=!0,this.zs.addEventListener("mousedown",this.V6t),this.zs.addEventListener("touchstart",this.H6t),s.addEventListener("mousemove",this.Jn),s.addEventListener("touchmove",this.Z6t),s.addEventListener("mouseup",this.q6t),s.addEventListener("touchend",this.K6t),this.X6t(s))}KI(){this.He&&(this.He=!1,this.zs.removeEventListener("mousedown",this.V6t),this.zs.removeEventListener("touchstart",this.H6t),s.removeEventListener("mousemove",this.Jn),s.removeEventListener("touchmove",this.Z6t),s.removeEventListener("mouseup",this.q6t),s.removeEventListener("touchend",this.K6t),this.i8t(s))}X6t(t){if(qT(t));else if(Xs(t))try{t.parent.addEventListener("mouseup",this.q6t),this.X6t(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.J6t)}}i8t(t){if(t.document.documentElement.removeEventListener("mouseleave",this.J6t),Xs(t))try{t.parent.removeEventListener("mouseup",this.q6t),this.i8t(t.parent)}catch(t){}}l8t(){this._9t=!1}u8t(){const t=this.w9t.g9t;t.yaw+=2*S.PI*this.A9t.x*.4/this.zs.clientWidth,t.pitch+=2*S.PI*this.A9t.y*.5/this.zs.clientHeight,t.pitch=et(t.pitch,-S.PI/2,S.PI/2),this.w9t.g9t=t}d8t(){return(c.pointerLockElement||c.mozPointerLockElement||c.webkitPointerLockElement)===this.zs}ln(){this.KI()}constructor(t,i){this.He=!1,this.v9t=new Jc,this.m9t=new Jc,this.A9t=new Jc,this._9t=!1,this.V6t=t=>{this.v9t.pz(t.clientX,t.clientY),this._9t=!0,t.preventDefault(),t.stopPropagation()},this.H6t=t=>{t.touches&&1===t.touches.length&&(this.v9t.pz(t.touches[0].pageX,t.touches[0].pageY),this._9t=!0,t.preventDefault())},this.Jn=t=>{if(this._9t||this.d8t()){if(this.d8t()){const i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.m9t.pz(this.v9t.x-i,this.v9t.y-e)}else this.m9t.pz(t.clientX,t.clientY);this.A9t.x6t(this.m9t,this.v9t),this.v9t.nvt(this.m9t),this.u8t()}},this.Z6t=t=>{this._9t&&(this.m9t.pz(t.touches[0].pageX,t.touches[0].pageY),this.A9t.x6t(this.m9t,this.v9t),this.v9t.nvt(this.m9t),this.u8t())},this.q6t=()=>{this.l8t()},this.K6t=()=>{this.l8t()},this.J6t=()=>{this.l8t()},this.w9t=t,this.zs=i}};r();var Y2=class{p9t(t){t.clearColor(...this.$V),t.clear(t.COLOR_BUFFER_BIT)}y9t(t,i){t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.DEPTH_BUFFER_BIT),this.M9t.forEach((e=>{e.y9t(t,i)}))}T9t(t){this.M9t.push(t)}N9t(){this.M9t=[]}constructor(){this.$V=[0,0,0,1],this.M9t=[]}};r(),r(),r();var G2=class{D9t(t,i,e){const s=t.createBuffer();return null===s?(Ii("Failed to create buffer."),null):(t.bindBuffer(i,s),t.bufferData(i,e,t.STATIC_DRAW),s)}constructor(t,i,e,s,n){this.I9t=t,this.aL=this.D9t(t,i,e),this.S9t=s,this.J$=n,this.E9t=!1,this.b9t=0,this.Hu=0}},W2=class extends G2{ZI(t){if(null===this.aL)return void Ii("Attempted to enable buffer that failed to initialize.");if(null===t)return void Ii("Attempted to enable attribute without location.");const i=this.I9t;i.bindBuffer(i.ARRAY_BUFFER,this.aL),i.vertexAttribPointer(t,this.S9t,this.J$,this.E9t,this.b9t,this.Hu),i.enableVertexAttribArray(t)}KI(t){t&&this.I9t.disableVertexAttribArray(t)}constructor(t,i,e){super(t,t.ARRAY_BUFFER,i,e,t.FLOAT)}};var V2,Su,eh,H2=class extends G2{L9t(){const t=this.I9t;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.aL),t.drawElements(t.TRIANGLES,this.k9t,this.J$,this.Hu)}constructor(t,i){super(t,t.ELEMENT_ARRAY_BUFFER,i,1,t.UNSIGNED_SHORT),this.k9t=i.length}};r(),function(t){t.VertexPos="aVertexPosition",t.VertexUV="aVertexUV",t.VertexColor="aVertexColor"}(V2||(V2={})),function(t){t.ProjectionMat="uProjectionMatrix",t.ModelViewMat="uModelViewMatrix",t.Texture="uTexture"}(Su||(Su={})),function(t){t.Normal="vNormal",t.Color="vColor",t.UV="vUV"}(eh||(eh={}));var q2=class{x9t(t,i,e){const s=this.C9t(t,t.VERTEX_SHADER,i),n=this.C9t(t,t.FRAGMENT_SHADER,e);if(null===s||null===n)return Ii("Failed to create vertex or fragment shader."),null;const r=t.createProgram();return null===r?(Ii("Failed to create shader program"),null):(t.attachShader(r,s),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(Ii("Failed to initialize shader program"),null))}C9t(t,i,e){const s=t.createShader(i);if(null===s)return Ii("failed to create shader."),null;if(t.shaderSource(s,e),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){const i=t.getShaderInfoLog(s);return Ii("Failed to compile shader with error: "+i),t.deleteShader(s),null}return s}O9t(){return this.j9t}z9t(t){const i=this.j9t;if(null===i)return Ii("Attempted to retrieve attribute location when shader program was not initialized"),null;const e=this.I9t.getAttribLocation(i,t);return-1===e?null:e}P9t(t){const i=this.j9t;if(null===i)return Ii("Attempted to retrieve uniform location when shader program was not initialized"),null;const e=this.I9t.getUniformLocation(i,t);return null===e&&Ja("Attempted to retrieve nonexistent uniform: "+t),e}constructor(t,i,e){this.I9t=t,this.j9t=this.x9t(this.I9t,i,e)}},X2=class{B9t(){const t=this.R9t.length,i=S.max(...this.U9t);return i>=t?(Ja("Created geometry where largest index ("+i+") is larger than/equal to attribute array size ("+t+")"),!1):(i<t-1&&Ii("Created geometry where largest index ("+i+") is smaller than attribute buffer - 1 ("+(t-1)+") resulting in unused vertices"),!this.Q9t||this.Q9t.length===t||(Ja("Created geometry where position ("+t+") and uv ("+this.Q9t.length+") buffers have different length."),!1))}F9t(t,i){if(!this.B9t())throw new k("Failed to validate buffers for WebGLGeometry.");const e=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y,t.z)})),new W2(t,new Float32Array(e),3)}(t,this.R9t),s=function(t,i){return new H2(t,new Uint16Array(i))}(t,this.U9t),n=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y)})),new W2(t,new Float32Array(e),2)}(t,this.Q9t);return new Z2(e,s,n,i)}constructor(t,i,e){this.R9t=t,this.U9t=i,this.Q9t=e}},Z2=class{Y9t(){this.R9t.ZI(this.G9t),null!==this.W9t&&this.Q9t.ZI(this.W9t)}V9t(){this.R9t.KI(this.G9t),null!==this.W9t&&this.Q9t.KI(this.W9t)}y9t(){this.U9t.L9t()}constructor(t,i,e,s){this.R9t=t;const n=s.z9t(V2.VertexPos);if(null===n)throw new k("Failed to get position attribute location.");this.G9t=n,this.Q9t=e,this.W9t=s.z9t(V2.VertexUV),this.U9t=i}},K2=class extends X2{constructor(t=1,i=32,e=16,s=0,n=2*S.PI,r=0,h=S.PI){let o=0;const a=S.min(r+h,S.PI),u=[],c=[],l=[],d=[];for(let u=0;u<=e;u++){const f=[],_=u/e;let g=0;0===u&&0===r?g=.5/i:u===e&&a===S.PI&&(g=-.5/i);for(let e=0;e<=i;e++){const a=e/i,u=-t*S.cos(s+a*n)*S.sin(r+_*h),d=t*S.cos(r+_*h),w=t*S.sin(s+a*n)*S.sin(r+_*h);c.push(new Kh(u,d,w)),l.push(new Jc(a+g,1-_)),f.push(o++)}d.push(f)}for(let t=0;t<e;t++)for(let s=0;s<i;s++){const i=d[t][s+1],n=d[t][s],h=d[t+1][s],o=d[t+1][s+1];(0!==t||r>0)&&u.push(i,n,o),(t!==e-1||a<S.PI)&&u.push(n,h,o)}super(c,u,l)}};r(),r();var J2=[0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,255],$2=class{H9t(){const t=this.I9t;t.activeTexture(this.q9t),t.bindTexture(t.TEXTURE_2D,this.X9t)}Og(){const t=this.I9t;t.activeTexture(this.q9t),t.bindTexture(t.TEXTURE_2D,this.X9t),t.uniform1i(this.Z9t,0)}K9t(t){const i=this.I9t;i.bindTexture(i.TEXTURE_2D,this.X9t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,this.XZ,this.J9t,this.$9t,this.t7t,t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}i7t(t){const i=this.I9t;i.bindTexture(i.TEXTURE_2D,this.X9t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),t.d9.LY(i,i.TEXTURE_2D,this.XZ,this.J9t,this.$9t,this.t7t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}constructor(t,i){if(this.I9t=t,this.X9t=t.createTexture(),null===this.X9t)throw new k("Failed to create texture");const e=i.P9t(Su.Texture);if(null===e)throw new k("Failed to get texture location.");this.Z9t=e,t.bindTexture(t.TEXTURE_2D,this.X9t),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.q9t=t.TEXTURE0,this.XZ=0,this.J9t=t.RGBA,this.$9t=t.RGBA,this.t7t=t.UNSIGNED_BYTE,t.texImage2D(t.TEXTURE_2D,this.XZ,this.J9t,2,2,0,this.$9t,this.t7t,new A(J2))}},t3="\n    attribute vec4 "+V2.VertexPos+";\n    attribute vec2 "+V2.VertexUV+";\n\n    uniform mat4 "+Su.ModelViewMat+";\n    uniform mat4 "+Su.ProjectionMat+";\n    \n    varying mediump vec2 "+eh.UV+";\n    \n    void main() {\n      gl_Position = "+Su.ProjectionMat+" * "+Su.ModelViewMat+" * "+V2.VertexPos+";\n      "+eh.UV+" = "+V2.VertexUV+";\n    }\n",i3="\n    varying mediump vec2 "+eh.UV+";\n    \n    uniform sampler2D "+Su.Texture+";\n\n    void main() {\n      gl_FragColor = texture2D("+Su.Texture+", "+eh.UV+");\n    }\n",e3=class{O9t(){return this.j9t}ZI(){this.I9t.useProgram(this.j9t.O9t()),this.X9t.Og()}e7t(t){this.X9t.K9t(t)}s7t(t){this.X9t.i7t(t)}constructor(t){this.I9t=t,this.j9t=new q2(t,t3,i3),this.X9t=new $2(t,this.j9t)}};r();var s3=class{y9t(t,i){if(this.n7t(i.r7t)){this.h7t.Y9t(),this.o7t.ZI();const e=this.a7t,s=i.u7t,n=(0,x2.default)(s,s,e);t.uniformMatrix4fv(this.c7t,!1,n);const r=i.l7t;t.uniformMatrix4fv(this.d7t,!1,r),this.h7t.y9t(),this.h7t.V9t()}}n7t(t){return"none"===this.r7t||"right"!==t&&"left"===this.r7t||"right"===t&&"right"===this.r7t}get a7t(){const t=(0,to.default)(),i=this.yo;return(0,j2.default)(t,t,i.k6t()),(0,O2.default)(t,t,this.f7t.x,new Float32Array([1,0,0])),(0,O2.default)(t,t,this.f7t.y,new Float32Array([0,1,0])),(0,O2.default)(t,t,this.f7t.z,new Float32Array([0,0,1])),t}constructor(t,i,e,s){this.yo=new Kh,this.f7t=new Kh,this.r7t="none",this.o7t=e;const n=e.O9t();this.h7t=i.F9t(t,n),s&&(this.r7t=s);const r=n.P9t(Su.ModelViewMat);if(null===r)throw new k("Failed to get model view matrix location.");this.c7t=r;const h=n.P9t(Su.ProjectionMat);if(null===h)throw new k("Failed to get projection matrix location.");this.d7t=h}};r();var n3=class{_7t(){const t=(0,to.default)();return(0,C2.default)(t,this.g7t,this.w7t,this.A7t,this.v7t)}m7t(){this.p7t=this._7t()}get l7t(){return new Float32Array(this.p7t)}set l7t(t){this.p7t=t}y7t(){const t=(0,to.default)(),i=(0,L2.default)((0,to.default)(),this.M7t.k6t()),e=(0,b2.default)((0,to.default)(),this.T7t.k6t());return(0,x2.default)(t,i,e),(0,k2.default)(t,t),t}N7t(){this.D7t=this.y7t()}get u7t(){return new Float32Array(this.D7t)}I7t(){this.N7t(),this.m7t()}Gn(){this.M7t=new Kh,this.f7t=new I2,this.I7t()}S7t(t){const i=this.T7t.U6t();i.gm(t),this.f7t=i.G6t()}E7t(t){this.f7t=t.G6t()}get b7t(){return this.g7t}set b7t(t){this.g7t=t,this.m7t()}get L7t(){return this.w7t}set L7t(t){this.w7t=t,this.m7t()}get yo(){return(new Kh).nvt(this.M7t)}set yo(t){this.M7t=t,this.N7t()}get f7t(){return(new I2).nvt(this.T7t)}set f7t(t){this.T7t=t,this.N7t()}constructor(t){this.g7t=72*S.PI/180,this.w7t=1.77,this.A7t=.1,this.v7t=100,this.r7t="none",this.M7t=new Kh,this.T7t=new I2,this.p7t=this._7t(),this.D7t=this.y7t(),t&&(this.r7t=t)}},r3=1e-4,h3=class extends i{_o(){this.k7t(),this.I9t?td.xr?(td.xr.addEventListener("devicechange",this.x7t),this.C7t().then((()=>{this.O7t?(this.j7t(),this.z7t(),this.P7t()):this.I8t("XR: Inline session not available. Panorama functionality will not work.",ue.VR_PRESENTATION_ERROR)}))):this.I8t("Your browser does not support WebXR",ue.VR_PLATFORM_UNSUPPORTED):this.I8t("Your browser does not support webGL",ue.VR_PLATFORM_UNSUPPORTED)}P7t(){this.Qo.fa.dn(_c.ra,this.cn),this.Qo.dn(yt.un,this.cn),this.Qo.dn(t.vo,this.po),this.Qo.dn(t.FA,this.RU)}k7t(){this.B7t=c.createElement("canvas"),this.B7t.className="theoplayer-vr",this.B7t.style.zIndex="2",this.B7t.style.background="black",this.B7t.style.display="none",this.Qo._e.appendChild(this.B7t),Du(this.B7t);let t=this.B7t.getContext("webgl2");t||(t=this.B7t.getContext("webgl")),t&&(this.I9t=t,this.R7t=new F2(this,this.B7t))}async C7t(){td.xr?await Promise.all([td.xr.isSessionSupported("inline").then((t=>{this.O7t=t})).catch((t=>{this.O7t=!1,this.I8t("exception when calling xr.isSessionSupported for inline session: "+t,ue.VR_PRESENTATION_ERROR)})),td.xr.isSessionSupported("immersive-vr").then((t=>{this.U7t=t})).catch((t=>{this.U7t=!1,this.I8t("exception when calling xr.isSessionSupported for immersive-vr session: "+t,ue.VR_PRESENTATION_ERROR)}))]):(this.O7t=!1,this.U7t=!1)}j7t(){const t=this.z8t();this.mC=t,this.Q8t=Boolean(t),this.Q8t&&(this.Q7t=(null==t?void 0:t.stereoMode)||iS.NONE,this.F7t=(null==t?void 0:t.panoramaMode)||Xu.NONE,this.Y7t&&(this.G7t(this.F7t,this.Q7t),this.b8t()))}G7t(t,i){if(!this.I9t||t===Xu.NONE)return;const e=this.I9t;let s,n;this.W7t.N9t(),t===Xu.PM360?(s=2*S.PI,n=-S.PI/2):(s=S.PI,n=-S.PI);const r=new K2(16,60,40,0,s),h=[],o=[];for(let t=0;t<r.Q9t.length;t++){const e=r.Q9t[t];switch(i){case iS.NONE:h.push(e),o.push(e);break;case iS.VERTICAL:h.push(new Jc(e.x,.5*e.y)),o.push(new Jc(e.x,.5*e.y+.5));break;case iS.HORIZONTAL:h.push(new Jc(.5*e.x,e.y)),o.push(new Jc(.5*e.x+.5,e.y))}}r.R9t.forEach((t=>{t.x*=-1}));const a=new X2(r.R9t,r.U9t,h),u=new X2(r.R9t,r.U9t,o);this.V7t=new e3(e);const c=new s3(e,a,this.V7t,"left");c.f7t.y=n,this.W7t.T9t(c);const l=new s3(e,u,this.V7t,"right");l.f7t.y=n,this.W7t.T9t(l)}b8t(){this.B7t.style.display="block",this.O7t&&this.Qo.dn(t.wh,this.H7t)}j8t(){this.q7t(),this.Qo.hn(t.wh,this.H7t),this.B7t.style.display="none"}X7t(){this.Z7t(),this.K7t()}async J7t(){if(this.$7t||!this.O7t)return;const t={optionalFeatures:["local"]};try{const i=await td.xr.requestSession("inline",t);let e;e=li.Ys?li.yE?"viewer":"local":"viewer";const s=await i.requestReferenceSpace(e);i.addEventListener("end",this.Z7t),this.tti=s,this.$7t=i,this.R7t.ZI(),this.iti(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,this.I9t),inlineVerticalFieldOfView:this.g7t*io})}catch(t){this.Z7t(),this.I8t(t,ue.VR_PRESENTATION_ERROR)}}Z7t(){this.$7t&&(this.q7t(),this.R7t.KI(),this.$7t.removeEventListener("end",this.K7t),this.$7t.end(),this.$7t=null,this.z7t())}async eti(){if(!this.sti&&this.U7t){this.q7t();try{const t=await td.xr.requestSession("immersive-vr"),i=await t.requestReferenceSpace("local");t.addEventListener("end",this.K7t),this.nti=i,this.sti=t,await this.rti(),this.iti()}catch(t){this.K7t(),this.I8t(t,ue.VR_PRESENTATION_ERROR)}}}async rti(){const t=this.I9t,i=this.sti;this.B7t&&t&&i&&!this.hti&&(this.B7t.addEventListener("webglcontextlost",(t=>{t.preventDefault()})),this.B7t.addEventListener("webglcontextrestored",(()=>{this.G7t(this.F7t,this.Q7t)})),this.hti=!0,await t.makeXRCompatible(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,t)}))}z7t(){if(!this.sti&&this.I9t){const t=this.I9t,i=this.B7t.clientWidth,e=this.B7t.clientHeight,s=le.Ks.A4;this.B7t.width=i*s,this.B7t.height=e*s,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}}iti(){null===this.oti&&(this.ati(),this.uti?this.oti=this.uti.requestAnimationFrame(this.cti):(this.lti(),Ii("XR: Attempted to start animation loop without inline or immersive session.")))}q7t(){null!==this.oti&&(this.lti(),this.uti?this.uti.cancelAnimationFrame(this.oti):Ii("XR: Attempted to stop animation loop by cancelAnimationFrame even though there is no session running."),this.oti=null)}ati(){if(null!==this.dti)return;const t=this.Qo.Cg();if(void 0===t||!(t instanceof HTMLVideoElement))return void Ii("No video source.");if("function"!=typeof t.requestVideoFrameCallback)return;const i=()=>{this.V7t.s7t(this.Qo),this.dti=t.requestVideoFrameCallback(i)};this.fti=t,this.dti=t.requestVideoFrameCallback(i)}lti(){var t;null!==this.dti&&(null==(t=this.fti)||null==t.cancelVideoFrameCallback||t.cancelVideoFrameCallback(this.dti),this.fti=null,this.dti=null)}_ti(){return!!this.gti||(li.Ra?this.wti&&this.Ati:this.wti)}t9t(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().then((t=>{this.Ati="granted"===t}))}vti(){return(!this.V_()||Boolean(this.mti))&&this.pti()}V_(){return this.Qo.V_}pti(){return this.Qo.og>=2}get Q8t(){return this.yti}set Q8t(t){const i=this.q3;this.yti=t,this.q3!==i&&this.jo(new Qc)}get Y7t(){return this.F7t!==Xu.NONE}get F7t(){return this.Mti}set F7t(t){const i=this.q3;this.Mti=t,this.q3!==i&&this.jo(new Qc)}get U7t(){return this.Tti}set U7t(t){const i=this.q3;this.Tti=t,this.q3!==i&&this.jo(new Qc)}get m8t(){return this.U7t}get uti(){return this.sti||this.$7t}get sti(){return this.gti}set sti(t){const i=this.q3;this.gti=t,this.q3!==i&&this.jo(new Qc)}get Nti(){return this.nti||this.tti}get A8t(){const t=this.Dti.U6t();return{yaw:t.Q6t*qa,pitch:t.F6t*qa,roll:t.Y6t*qa}}set A8t(t){const i=o3(t&&t.pitch||0)*io,e=o3(t&&t.roll||0)*io,s=o3(t&&t.yaw||0)*io,n=new oc(s,i,e);this.Dti=n.G6t()}get g9t(){const t=this.Iti.U6t();return{yaw:t.Q6t,pitch:t.F6t,roll:t.Y6t}}set g9t(t){const i=a3(t&&t.pitch||0),e=a3(t&&t.roll||0),s=a3(t&&t.yaw||0),n=new oc(s,i,e);this.Iti=n.G6t()}get q3(){return this.Q8t?this.sti?Ut.Pa:Ut.p8t:Ut.Rs}get g8t(){return null!==this.sti}set g8t(t){const i=this.g8t;t&&this.U7t?this.eti():this.K7t(),this.g8t!==i&&this.jo(new Ro)}get w8t(){return this.wti}set w8t(t){null===this.gti&&(this.wti=t,t&&li.Ra&&this.t9t())}get v8t(){return this.g7t}set v8t(t){t&&t>=0&&t<=180&&(this.g7t=t,null!==this.$7t&&this.$7t.updateRenderState({inlineVerticalFieldOfView:this.g7t*io}))}I8t(t,i){Ja(t),this.jo(new _i(new Ri(i,t)))}z8t(){const t=this.Qo.$a();return t&&t.vr}ln(){this.X7t(),this.Uo()}constructor(t){super(),this.O7t=!1,this.Tti=!1,this.Dti=new I2,this.Sti=new I2,this.Iti=new I2,this.g7t=74,this.wti=!1,this.mC=void 0,this.Q7t=iS.NONE,this.yti=!1,this.Mti=Xu.NONE,this.W7t=new Y2,this.$7t=null,this.gti=null,this.tti=null,this.nti=null,this.hti=!1,this.oti=null,this.fti=null,this.dti=null,this.mti=0,this.Ati=!1,this.x7t=()=>{this.C7t()},this.po=()=>{this.j8t(),this.X7t(),this.j7t()},this.H7t=()=>{this.J7t()},this.K7t=()=>{this.sti&&(jS("Ending immersive session"),this.q7t(),this.sti.removeEventListener("end",this.K7t),this.sti.end(),this.sti=null,this.nti=null,this.hti=!1,this.$7t?this.iti():this.J7t())},this.cn=()=>{this.z7t()},this.cti=(t,i)=>{if(!this.I9t)return;const e=this.I9t,s=this.uti;if(null===this.dti&&this.vti()&&(this.V7t.s7t(this.Qo),this.mti>0&&(this.mti-=1)),null===s||void 0===i)return void Ii("Attempted to run webXR animation loop without session or xrFrame.");this.oti=s.requestAnimationFrame(this.cti);const n=s.renderState.baseLayer,r=i.getViewerPose(this.Nti);if(void 0===n||void 0===r)return void Ii("Attempted to run webXR animation loop without glLayer or viewerPose.");e.bindFramebuffer(e.FRAMEBUFFER,n.framebuffer);let h=new oc,o=0;for(const t of r.views){const i=new n3(t.eye);if(i.l7t=t.projectionMatrix,this._ti()){let e;if(li.Ys&&li.yE&&null===this.gti){if(e=t.transform.inverse.orientation,0===e.x&&0===e.y&&0===e.z&&1===e.w)return}else e=t.transform.orientation;i.f7t=new I2(e.x,e.y,e.z,e.w)}this.$7t&&i.S7t(this.Iti.U6t()),h=h.gm(i.f7t.U6t()),o+=1;const s=n.getViewport(t);s&&e.viewport(s.x,s.y,s.width,s.height),this.W7t.y9t(e,i)}const a=new oc(h.Q6t/o,h.F6t/o,h.Y6t);this.Dti=a.G6t(),function(t,i){const e=t.z6t(i);return 1-e*e<r3}(this.Dti,this.Sti)||(this.Sti.nvt(this.Dti),this.jo(new Ku))},this.RU=()=>{this.mti=5},this.Qo=t,this.so=P2(this),this._o()}};function o3(t){return L_(t+180,360)-180}function a3(t){return L_(t+S.PI,2*S.PI)-S.PI}function u3(t,i){let e=i;for(let i in t)rt(t[i])?(e[i]=e[i]||{},u3(t[i],e[i])):$c.call(e,i)||(e[i]=t[i]);return e}r(),As((function(t){return class extends t{Qh(){return null!==this.w9t?Wt(super.Qh(),{vr:this.w9t.so}):super.Qh()}ln(){var t;null==(t=this.w9t)||t.ln(),super.ln()}constructor(t,i){super(t,i),this.w9t=null,i.vr.useWebXR&&(this.w9t=new h3(this))}}}),cs.Ha),r(),r(),r();var c3=class{getEpochTimeMs(){return Nr()}release(){}};r();var l3=class{createTimer(t,i,e){let s=b(t,i);return()=>w(s)}release(){}};r();var d3=class{makeRequest(t,i,e,s,n,r){const h=function(t){switch(t.toLowerCase()){case"get":return Vt.GET;case"post":return Vt.POST;case"put":return Vt.PUT;case"delete":return Vt.DELETE;case"head":return Vt.HEAD;case"options":return Vt.OPTIONS;default:throw new k("Request method unknown.")}}(t);if(this.Eti){if(h===Vt.GET)(new Image).src=i+"?"+e;else{const t=e||new ArrayBuffer(0),n=s||void 0;this.LS.yY({Iu:i,AS:t,_P:n})}return()=>{}}const o=new Z_,a=s?{"Content-Type":s}:void 0,u=new ai({Iu:i,AS:e,NS:!1,pS:$m.Au,YI:n,mS:h,$f:o.$f,vS:a});return this.bti(u,r),()=>o.i_()}async bti(t,i){if(i)try{const e=await this.LS.BI(t);if(e.FI>=200&&e.FI<300){i(!0,await e.kS())}else i(!1,"HTTP"+e.FI)}catch(t){i(!1,String(t))}}release(){s.removeEventListener("beforeunload",this.Lti)}constructor(t){this.Eti=!1,this.Lti=()=>{this.Eti=!0},this.LS=t,s.addEventListener("beforeunload",this.Lti)}};r();var f3=class{saveData(t,i,e,s){try{return localStorage.setItem(t+"/"+i,e),s(!0,null)}catch(t){return s(!1,t.toString())}}loadData(t,i,e){try{return e(!0,localStorage.getItem(t+"/"+i))}catch(t){return e(!1,t.toString())}}release(){}};r();var _3=()=>null,g3=class{getDeviceBrand(){return this.kti?this.kti.brand:null}getDeviceCategory(){return li.wb||li.vb?this.xti.Client.DeviceCategory.ANDROID_DEVICE:li.Mb||li.Nb?this.xti.Client.DeviceCategory.APPLE_DEVICE:li.Ib?this.xti.Client.DeviceCategory.CHROMECAST:this.xti.Client.DeviceCategory.WEB}getDeviceManufacturer(){return this.kti?this.kti.manufacturer:null}getDeviceModel(){return this.kti?this.kti.model:null}getDeviceVersion(){return this.kti?this.kti.version:null}getDeviceType(){return null}getFrameworkName(){return li.wb?"THEOplayer AndroidTV SDK":li.vb?"THEOplayer Android SDK":li.Mb?"THEOplayer IOS SDK":li.Nb?"THEOplayer tvOS SDK":li.Ib?"THEOplayer Chromecast SDK":"THEOplayer Web SDK"}release(){}constructor(t,i){this.xti=t,this.kti=i,this.getBrowserName=_3,this.getBrowserVersion=_3,this.getFrameworkVersion=_3,this.getOperatingSystemName=_3,this.getOperatingSystemVersion=_3}};r();var w3=class{consoleLog(t,i){switch(i){case Conviva.SystemSettings.LogLevel.ERROR:return Ja(t);case Conviva.SystemSettings.LogLevel.WARNING:return Ii(t);default:return jS(t)}}release(){}};r(),As((function(t){return class extends t{Qh(){const t={};return Wt(super.Qh(),{get analytics(){return t}})}}}),cs.v9),r();var A3=self.theoplayerDeviceMetadata;r();var v3,m3=class{getPHT(){return-1}getBufferLength(){const t=re.gn(this.Qo.y_()),i=this.Qo.S_(),e=t.jB(i);if(e<0)return 0;return ee(t.wn(e)-i)}getSignalStrength(){return 1e3}getRenderedFrameRate(){return-1}constructor(t){this.Qo=t}},p3="conviva";function y3(t){return t&&t.integration===p3}function M3(t){if(t)for(let i of t)if(y3(i))return i}function T3(t,i){if(!i)return t;if(!t)return i;return u3(i,Qi(t))}var N3=["emptied","play","pause","playing","waiting","ended","error","readystatechange"],D3=class{get so(){return this.Oa||(this.Oa=function(t){return{get client(){return t.Cti},get contentSessionKey(){return t.Oti},createSession:()=>t.Bx(),cleanupSession:()=>t.jti()}}(this)),this.Oa}get Cti(){return this.zti}get Oti(){return this.Pti}Bti(){return this.h.V_?this.Rti.PlayerStateManager.PlayerState.PAUSED:this.Uti||this.h.og<he.Qv?this.Rti.PlayerStateManager.PlayerState.BUFFERING:this.Rti.PlayerStateManager.PlayerState.PLAYING}r$(t){let i=this.Qti;i&&i.getDuration()!==t&&i.setDuration(t)}Fti(t){let i=this.Qti;i&&i.getPlayerState()!==t&&i.setPlayerState(t)}Yti(){this.Uti="none"===this.h.eg||this.h.og<he.Uv,this.Gti(),this.h.fg&&this.BU(),this.Wti&&this.Vti()}aUt(){this.Hti&&!this.Hti.manualSessionControl&&(this.Bx(),this.h.$U.G_||this.qti())}pUt(){this.Qti&&this.Fti(this.Rti.PlayerStateManager.PlayerState.STOPPED),this.Hti&&!this.Hti.manualSessionControl&&this.jti()}Bx(){if(this.Xti&&void 0===this.Pti){let t=this.zti.getPlayerStateManager();this.Qti=t,t.setPlayerVersion&&t.setPlayerVersion("6.5.0"),this.Pti=this.zti.createSession(this.Xti),this.Yti(),this.zti.attachPlayer(this.Pti,this.Qti);const i=new m3(this.h);t.setClientMeasureInterface(i)}}jti(){this.ZU=!1,this.Uti=!1,this.Qti&&(this.zti.releasePlayerStateManager(this.Qti),this.Qti=void 0),void 0!==this.Pti&&(this.zti.cleanupSession(this.Pti),this.Pti=void 0)}Zti(){this.h.dn("durationchange",this.Kti),this.h.dn("seeking",this.BU),this.h.dn("seeked",this.RU),this.h.dn("ended",this.Jti),this.h.dn("error",this.L1),this.h.dn("segmentnotfound",this.$ti),this.h.dn(["loadstart","waiting"],this.tii),this.h.dn(["emptied","playing"],this.eii),this.h.dn(N3,this.Gti),this.h.Pc&&(this.h.Pc.dn("sKt",this.sii),this.h.Pc.dn("nKt",this.nii)),s.addEventListener("beforeunload",this.Jti),this.rii()}hii(){this.h.hn("durationchange",this.Kti),this.h.hn("seeking",this.BU),this.h.hn("seeked",this.RU),this.h.hn("ended",this.Jti),this.h.hn("error",this.L1),this.h.hn("segmentnotfound",this.$ti),this.h.hn(["loadstart","waiting"],this.tii),this.h.hn(["emptied","playing"],this.eii),this.h.hn(N3,this.Gti),this.h.Pc&&(this.h.Pc.hn("sKt",this.sii),this.h.Pc.hn("nKt",this.nii)),this.h.ht.hn(Po.qg,this.rii),this.Wti&&(this.Wti.hn(ia.pw,this.Vti),this.Wti=void 0),s.removeEventListener("beforeunload",this.Jti)}ln(){this.hii(),this.pUt(),this.jti()}constructor(i,e,s,n){this.h=i,this.Rti=e,this.zti=s,this.oii=n,this.ZU=!1,this.Uti=!1,this.Xti=void 0,this.Hti=void 0,this.Qti=void 0,this.Pti=void 0,this.Wti=void 0,this.sii=t=>{void 0!==this.Oti&&(this.zti.adStart(this.Oti,function(t){const i=t.Ol.eZt().integration;return"theo"===i||"google-ima"===i||"freewheel"===i?Conviva.Client.AdStream.SEPARATE:Conviva.Client.AdStream.CONTENT}(t),this.Rti.Client.AdPlayer.CONTENT,function(t,i){const e=t.Ol.eZt().timeOffset;return 0===e?Conviva.Client.AdPosition.PREROLL:-1===e||go(e,i,.001)?Conviva.Client.AdPosition.POSTROLL:Conviva.Client.AdPosition.MIDROLL}(t,this.h.yd())),this.zti.detachPlayer(this.Oti))},this.nii=()=>{void 0!==this.Oti&&void 0!==this.Qti&&(this.zti.attachPlayer(this.Oti,this.Qti),this.zti.adEnd(this.Oti))},this.tii=()=>{this.Uti=!0},this.eii=()=>{this.Uti=!1},this.Kti=()=>{let t=this.h.yd();M(t)||t===1/0||this.r$(t)},this.Jti=()=>{this.pUt()},this.L1=()=>{let t=this.h.x_();t&&this.Qti&&this.Qti.sendError(t.code+": "+t.message,this.Rti.Client.ErrorSeverity.FATAL),this.pUt()},this.aii=()=>{!this.h.$U.G_&&this.Qti&&this.qti()},this.qti=()=>{var t;null==(t=this.Qti)||t.sendError("A Video Playback Failure has occurred: Waiting for the manifest to come back online",this.Rti.Client.ErrorSeverity.FATAL)},this.$ti=()=>{var t;null==(t=this.Qti)||t.sendError("A Video Playback Failure has occurred: Segment not found",this.Rti.Client.ErrorSeverity.FATAL)},this.RU=()=>{var t;this.ZU&&(this.ZU=!1,(null==(t=this.Qti)?void 0:t.setPlayerSeekEnd)&&this.Qti.setPlayerSeekEnd())},this.BU=()=>{var t;this.ZU||(this.ZU=!0,(null==(t=this.Qti)?void 0:t.setPlayerSeekStart)&&this.Qti.setPlayerSeekStart(-1))},this.po=()=>{this.pUt(),this.Hti=void 0,this.Xti=void 0,this.uii()},this.uii=()=>{if(this.Xti)return;let t=this.h.$a();if(!t)return;let i=this.h.wt;if(!i)return;let e=T3(function(t){return M3(t.analytics)}(t),this.oii);if(!e)return;let s=e.contentMetadata;if(s&&this.Rti){let t=i.src;this.zti||(this.zti=function(t,i,e){if(!v3){let s=new i.SystemSettings,n=new i.SystemInterface(new c3,new l3,new d3(e),new f3,new g3(i,A3),new w3),r=new i.SystemFactory(n,s),h=new i.ClientSettings(t.customerKey),o=ka(t.heartbeatInterval);o>0?h.heartbeatInterval=o:void 0===h.heartbeatInterval&&(h.heartbeatInterval=10);let a=hs(t.gatewayUrl);a&&(h.gatewayUrl=a),v3=new i.Client(h,r)}return v3}(e,this.Rti,this.h.yO)),this.Hti=e,this.Xti=function(t,i,e){let s=new e.ContentMetadata;return s.assetName=t.assetName,s.streamUrl=i,s.streamType=function(t,i){return t?i.ContentMetadata.StreamType.LIVE:!1===t?i.ContentMetadata.StreamType.VOD:i.ContentMetadata.StreamType.UNKNOWN}(t.live,e),s.defaultBitrateKbps=t.defaultBitrateKbps,s.defaultResource=t.defaultResource,s.duration=t.duration,s.encodedFrameRate=t.encodedFrameRate,s.applicationName=t.applicationName||"THEOplayer",s.viewerId=t.viewerId||Tn(),s.custom=t.custom,s}(s,t,this.Rti),this.h.V_||this.H7t()}},this.H7t=()=>{this.aUt()},this.Vti=()=>{if(!this.Wti||!this.Qti)return;let t=this.Wti.Pw;if(t){let i=this.Qti;i.setBitrateKbps(t.jz/1e3),i.setEncodedFrameRate&&t.Eet&&i.setEncodedFrameRate(t.Eet),i.setVideoResolutionWidth&&t.Ti&&i.setVideoResolutionWidth(t.Ti),i.setVideoResolutionHeight&&t.Mi&&i.setVideoResolutionHeight(t.Mi)}},this.rii=()=>{let t=this.h.ht;t&&t.hn(Po.qg,this.rii),t.L?(this.Wti=t.Iw(0),this.Wti.hn(ia.pw,this.Vti),this.Wti.dn(ia.pw,this.Vti)):t.dn(Po.qg,this.rii)},this.Gti=()=>{this.Fti(this.Bti())},this.h.dn("sourcechange",this.po),this.h.dn("currentsourcechange",this.uii),this.h.dn("play",this.H7t),this.Zti(),this.h.$U.dn(t.zA,this.aii),this.h.$U.dn(t.PA,this.aii)}};As((function(t){return class extends t{Qh(){const t=super.Qh();if(this.cii){const i=this.cii.so;Wt(t.analytics,{get conviva(){return i}})}return t}ln(){this.cii&&this.cii.ln(),super.ln()}constructor(t,i){super(t,i);const e=s.Conviva;if(e){const t=function(t){return M3(Qe(t).analytics)}(i);this.cii=new D3(this,e,v3,t)}}}}),cs.Ha),r(),r();var I3=class extends ${get so(){return this.Oa||(this.Oa=function(t){let i,e={get status(){return t.FI},get tasks(){return t.O0t},get network(){return t.$U.so},createTask:(i,e)=>t.lii(i,e),addEventListener(t,e){i.dn(t,e)},removeEventListener(t,e){i.hn(t,e)}};return i=new na(t,e),e}(this)),this.Oa}get FI(){return this.dii.FI}get O0t(){return this.dii.O0t.so}get $U(){return this.o9}lii(t,i,e){let s,n;if(void 0===e&&(e="persistent"),!t)throw new k("Unexpected - The source description is undefined");if(s=$a(t),n=M1(i),lu(s))throw new k("Invalid source description");return this.dii.b0t(s,n).so}constructor(t,i){super(),this.dii=t,this.o9=i,this.dii.dn("Mft",this.Ds)}};var S3=function(){const t=new Pu(le.yO,!1),i=Re.Lb,e=new L1(t),s=new Zu(i,e),n=new mb(t),r=new Yu(i.pit,s,"persistent");return new I3(r,n)}().so;function E3(t,i){if("function"==typeof t.getAll){return b3(void 0===i?t.getAll():t.getAll(i))}return function(t){let i=new $s,e=[];return t.onsuccess=()=>{let s=t.result;s&&s.value?(e.push(s.value),s.continue()):i.iL(e),h()},t.onerror=()=>{i.eL(t.error),h()},i.sL}(void 0===i?t.openCursor():t.openCursor(i))}function b3(t){return new Promise(((i,e)=>{t.onsuccess=()=>{i(t.result),h()},t.onerror=()=>{e(t.error),h()}}))}r(),r(),r(),r(),r(),r(),r();var L3=class{i_(){if(this.ao)try{this.wit.abort(),this.ao=!1}catch(t){}}constructor(t){this.wit=t,this.ao=!0,this.sL=new Promise(((t,i)=>{this.wit.oncomplete=()=>{this.ao=!1,t(),h()},this.wit.onerror=()=>{this.ao&&(this.ao=!1,i(this.wit.error||new k("Transaction error")),h())},this.wit.onabort=()=>{this.ao=!1,i(new k("Transaction aborted")),h()}}))}};async function uc(t,i,e){const s=new L3(t);try{const[t]=await Promise.all([i(e),s.sL]);return t}catch(t){if(!s.ao)throw new B0("IDBTransaction committed prematurely",t);throw t}finally{s.i_()}}var k3=class{get v(){return this.ott.v}hit(t){return Promise.resolve("persistent"===t)}oit(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(z(i));return b3(this.fii(Ae.Sit).put(t))}async ait(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(z(i));for(const e of t)await this.oit(e,i)}async Zb(t){return Boolean(await this.Kb(t))}Kb(t){return b3(this.fii(Ae.Iit).get(t))}uit(t,i){return b3(this.fii(Ae.Iit).index(i).get(t))}async $tt(t){const i=[];for(let e of t){const t=await this.Kb(e);t&&i.push(t)}return i}cit(){return E3(this.fii(Ae.Iit))}dit(t){return E3(this.fii(Ae.Iit),t)}fit(t,i){return E3(this.fii(Ae.Iit).index(i),t)}wm(t){return b3(this.fii(Ae.Sit).delete(t))}async _it(t){for(const i of t)await this.wm(i)}git(){return b3(this.fii(Ae.Sit).clear())}fii(t){if(!this._ii)throw new k("Lock was released");if(!function(t,i){return t===Ae.Iit&&i===Ae.Iit||i===Ae.Sit}(t,this._ii.mode))throw new k("Incompatible transaction mode: "+this._ii.mode+", expected "+t);return this._ii.objectStore(this.v)}gii(){this.ott.wii(this),this._ii=void 0}constructor(t,i){this.ott=t,this._ii=i}};var x3=class{hit(t){return Promise.resolve("persistent"===t)}oit(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(z(i)):this.wit(Ae.Sit,(i=>i.oit(t)))}ait(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(z(i)):this.wit(Ae.Sit,(i=>i.ait(t)))}Zb(t){return this.wit(Ae.Iit,(i=>i.Zb(t)))}Kb(t){return this.wit(Ae.Iit,(i=>i.Kb(t)))}uit(t,i){return this.wit(Ae.Iit,(e=>e.uit(t,i)))}$tt(t){return this.wit(Ae.Iit,(i=>i.$tt(t)))}cit(){return this.wit(Ae.Iit,(t=>t.cit()))}dit(t){return this.wit(Ae.Iit,(i=>i.dit(t)))}fit(t,i){return this.wit(Ae.Iit,(e=>e.fit(t,i)))}wm(t){return this.wit(Ae.Sit,(i=>i.wm(t)))}_it(t){return this.wit(Ae.Sit,(i=>i._it(t)))}git(){return this.wit(Ae.Sit,(t=>t.git()))}dTt(t){return this.Aii(),this.$Mt=new k3(this,t),this.$Mt}Aii(){if(void 0!==this.$Mt)throw new k("Already locked")}wii(t){if(this.$Mt!==t)throw new k("Incorrect lock");this.$Mt=void 0}SC(t){return this.IH.SC(t)}wit(t,i){return this.SC((()=>this.vii(t,i)))}async vii(t,i){this.Aii();const e=this.mii.transaction(this.v,t),s=this.dTt(e);try{return await uc(e,i,s)}finally{s.gii()}}pii(t){this.Aii();const i=this.mii.transaction(this.v,t);return this.dTt(i)}static yii(t,i){let e;const s=new Promise((t=>{e=t})),n=t.reduce(((t,i)=>t.then((()=>{let t;const e=new Promise((i=>{t=i}));return i.SC((()=>(t(),s))).catch(h),e}))),Promise.resolve());return e(n.then(i)),s}constructor(t,i){this.$Mt=void 0,this.IH=new te,this.mii=t,this.v=i}};r(),r(),r(),r(),r();var C3={DT:17,Mii:async t=>{const{transaction:i,database:e}=t,s=i.objectStoreNames;if(s&&s.length)for(let t=0;t<s.length;t++)e.deleteObjectStore(s[t]);e.createObjectStore(B3,{keyPath:"id"}),e.createObjectStore(R3,{keyPath:"key"}),e.createObjectStore(U3,{keyPath:"key"});e.createObjectStore(Q3,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");e.createObjectStore(F3,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},O3=class{async Tii(t){for(const i of this.Nii)this.Dii<i.DT&&await i.Mii(t)}constructor(t){this.Dii=t}},j3=class extends O3{get Nii(){return[C3]}},z3=new class{Iii(t){this.Sii=t}h8(t){return this.Sii(t)}constructor(){this.Sii=t=>new j3(t)}},P3=18,B3="cachingTask",R3="licences",U3="manifest",Q3="segment",F3="segmentMetadata";async function Y3(){!function(){if("undefined"==typeof indexedDB)throw new k("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",P3);return t.addEventListener("upgradeneeded",G3),await b3(t)}async function G3(t){const i=t.oldVersion<=P3?t.oldVersion:-1,e=t.target,s=e.result,n=e.transaction,r=z3.h8(i),h={database:s,transaction:n};await uc(n,(t=>r.Tii(t)),h)}var W3=class{static get Lb(){return this.Yit||(this.Yit=Y3()),this.Yit}};W3.Yit=void 0,r();var V3=class{wit(t){return t(this)}gii(){this.Ait.gii(),this.vit.gii(),this.mit.gii(),this.pit.gii(),this.yit.gii()}constructor(t,i){this.Ait=t.Ait.dTt(i),this.vit=t.vit.dTt(i),this.mit=t.mit.dTt(i),this.pit=t.pit.dTt(i),this.yit=t.yit.dTt(i)}};Re.no(class t{static async h8(){const i=await W3.Lb;return new t(i)}wit(t){const i=this.allCollections;return x3.yii(i,(()=>this.vii(i,t)))}async vii(t,i){const e=t.map((t=>t.v)),s=this.mii.transaction(e,Ae.Sit),n=new V3(this,s);try{return await uc(s,i,n)}finally{n.gii()}}get allCollections(){return[this.vit,this.Ait,this.mit,this.pit,this.yit]}constructor(t){this.mii=t,this.Ait=new x3(t,F3),this.vit=new x3(t,Q3),this.mit=new x3(t,U3),this.pit=new x3(t,B3),this.yit=new x3(t,R3)}}.h8),r(),r(),As((function(t){return class extends t{Qh(){const t=this.ro;return Wt(super.Qh(),{get visibility(){return t.so}})}ln(){this.ro.ln(),super.ln()}constructor(t,i){super(t,i),this.ro=new HO(t)}}}),cs.Ha),r(),r(),r();var H3=class{Eii(t){const i=this.OW.m_(),e=t.createGain();for(const s of i){t.createMediaElementSource(s).connect(e)}return e}get so(){return this.Oa||(this.Oa=this.Qh()),this.Oa}Qh(){const t=this;return{createAudioSourceNode:i=>t.Eii(i)}}constructor(t){this.Oa=void 0,this.OW=t}};As((function(t){return class extends t{Qh(){const t=this.bii.so;return Wt(super.Qh(),{get audio(){return t}})}constructor(t,i){super(t,i),this.bii=new H3(this.pV)}}}),cs.Ha),r(),r();As((function(t){return class i extends t{Zh(t){const e=i.Lii(this.dd.analytics),s=i.Lii(t?t.analytics:void 0);e||s?this.kii(qr({},e,s)):this.xii&&this.xii.disable(),super.Zh(t)}kii(t){if(this.xii)this.xii.enable(),this.xii.setOptions(t);else{const i=s.youbora;if(!i)throw new k("Youbora JavaScript library not loaded.");if(!i.adapters.TheoPlayer2)throw new k("TheoPlayer2 adapter not available on Youbora JavasScript library");const e=new i.Plugin(t);e.setAdapter(new i.adapters.TheoPlayer2(this.so)),this.Pc&&i.adapters.TheoPlayer2.NativeAdsAdapter&&e.setAdsAdapter(new i.adapters.TheoPlayer2.NativeAdsAdapter(this.so)),this.xii=e}}static Lii(t){if(t){const i=t.filter((t=>"youbora"===t.integration));if(0===i.length)return;if(i.length>1)throw new k("Only one youbora analytics configuration expected");const e=i[0],{integration:s}=e;return AN(e,["integration"])}}ln(){this.xii&&this.xii.disable(),super.ln()}constructor(t,i){super(t,i)}}}),cs.Ha),r(),r(),r();var q3=1,X3=0,Z3=1e3,K3=class i extends ng{Cii(){const t=this.lt===1/0,i=t?q3:X3,e=t?-1:this.lt,s=Cs(this.Qo.ht.Nw,this.Oii);this.jii.setPresentationInformation(new this.zii(i,e,s))}Oii(t){const i=[];for(const e of t.Uw.so){const t=e;t.width&&t.height&&i.push({trackIdx:e.id,bitrate:t.bandwidth,width:t.width,height:t.height,codecIdentifier:t.codecs})}return i}Pii(){return this.Qo.S_()*Z3}get lt(){return this.Qo.yd()*Z3}get Bii(){return this.Rii}get Uii(){return this.Qii}set Uii(t){this.Qii=t,t&&this.jii.reportPlayerState(t)}set Fii(t){this.Yii=t}Gii(){return b((()=>{this.Wii(),this.Vii()}),i.Hii)}qii(){this.Qo.Pc&&(this.Qo.Pc.dn("HZt",this.Xii),this.Qo.Pc.dn("eKt",this.Zii),this.Qo.Pc.dn("eQt",this.Kii),this.Qo.Pc.dn("iKt",this.Jii)),this.Qo.dn(t.NA,this.Jti),this.Qo.dn(be.ha,this.L1),this.Qo.dn(t.bh,this.$ii),this.Qo.dn(t.wh,this.H7t),this.Qo.dn(Dt._v,this.PU),this.Qo.dn(t.QA,this.qY),this.Qo.dn(t.FA,this.RU),this.Qo.dn(Dt.fv,this.jU),this.Qo.dn(t.WA,this.tei)}iei(){this.Qo.Pc&&(this.Qo.Pc.hn("HZt",this.Xii),this.Qo.Pc.hn("eKt",this.Zii),this.Qo.Pc.hn("eQt",this.Kii),this.Qo.Pc.hn("iKt",this.Jii)),this.Qo.hn(t.NA,this.Jti),this.Qo.hn(be.ha,this.L1),this.Qo.hn(t.bh,this.$ii),this.Qo.hn(t.wh,this.H7t),this.Qo.hn(Dt._v,this.PU),this.Qo.hn(t.QA,this.qY),this.Qo.hn(t.FA,this.RU),this.Qo.hn(Dt.fv,this.jU),this.Qo.hn(t.WA,this.tei)}ln(){w(this.eei),this.iei()}constructor(t,i,e,s=MMPlayerState,n=MMAdState,r=MMPresentationInfo){super(),this.Qo=t,this.mC=i,this.jii=e,this.sei=s,this.nei=n,this.zii=r,this.rei=!0,this.Rii=!1,this.Yii=void 0,this.Qii=void 0,this.hei=void 0,this.Xii=t=>{const i=t.eXt;i.pZt();var e;e=i.eZt().duration;const s="linear"===i.eZt().type;i.yZt(),i.vZt();s&&(this.Rii=!0),this.Fii=this.nei.AD_IMPRESSION,this.Fii=this.nei.AD_STARTED},this.Zii=t=>{this.Rii=!1,this.Fii=this.nei.AD_COMPLETED},this.Kii=t=>{t.XUt===ze.ADBLOCK?this.Fii=this.nei.AD_BLOCKED:this.Fii=this.nei.AD_ERROR},this.Jii=()=>{this.Fii=this.nei.AD_SKIPPED},this.tei=t=>{var i,e,s,n;t.TS===Zt.Yv&&(this.hei&&t.DQ!==this.hei&&this.jii.reportABRSwitch(this.hei,t.DQ),this.hei=t.DQ,this.jii.reportChunkRequest(new MMChunkInformation(t.tN,t.DQ,t.MD,t.P_t.Iu,void 0,void 0,null!=(s=null==(i=t.P_t.net)?void 0:i[0])?s:0,null!=(n=null==(e=t.P_t.net)?void 0:e[1])?n:-1)))},this.Jti=t=>{this.Uii=this.sei.STOPPED,this.jo(t)},this.L1=t=>{this.Uii=this.sei.ERROR,this.jii.reportError(t.error,this.Pii())},this.$ii=()=>{this.Bii?this.Fii=this.nei.AD_PAUSED:this.Uii=this.sei.PAUSED},this.H7t=()=>{this.Bii&&(this.Fii=this.nei.AD_PLAY)},this.PU=()=>{this.Bii?(this.Yii===this.nei.AD_PAUSED&&(this.Fii=this.nei.AD_RESUMED),this.Fii=this.nei.AD_PLAYING):(this.rei&&(this.rei=!1,this.Cii(),this.Uii=this.sei.STARTED),this.Uii!==this.sei.PAUSED&&this.Uii!==this.sei.BUFFERING||(this.Uii=this.sei.RESUMED))},this.qY=()=>{this.jii.reportPresentationSize(this.Qo.pg,this.Qo.wg)},this.RU=t=>{this.Bii||this.Uii!==this.sei.PAUSED||this.jii.reportPlayerSeekCompleted(t.currentTime*Z3)},this.jU=()=>{this.Bii||(this.Uii=this.sei.BUFFERING)},this.Vii=()=>{this.jii.reportDownloadRate(S.floor(Ho.Lb.Dz()))},this.Wii=()=>{this.Bii||this.jii.reportPlaybackPosition(this.Pii())},this.Uii=this.sei.INITIALIZED,this.qii(),this.eei=this.Gii()}};K3.Hii=2e3,As((function(i){return class extends i{ln(){super.ln(),this.oei()}constructor(i,e){super(i,e),this.aei=void 0,this.uei=void 0,this.cei=()=>{this.uei=void 0,this.oei();const t=super.$a();t&&(this.uei=function(t,i){const e=function(t,i){if(t&&t.analytics)for(const i of t.analytics)if("smartsight"===i.integration)return i;if(i&&i.analytics)for(const t of i.analytics)if("smartsight"===t.integration)return t;return}(t,i);if(!e)return;return e}(t,this.dd)),this.lei()},this.lei=()=>{if(!this.aei&&this.uei&&this.wt&&this.wt.src&&!this.V_){const t=MMSmartStreaming.getInstance();!function(t,i,e){t.registerMMSmartStreaming(e.playerName,e.customerID,e.subscriberID,e.domainName),t.reportComponent("THEOSDK"),t.reportPlayerInfo("THEOplayer","THEOplayer","6.5.0"),t.reportDeviceInfo(void 0,void 0,void 0,void 0,void 0,s.innerWidth,s.innerHeight),t.initializeSession("QBRModeDisabled",i,e.metaURL,e.assetID)}(t,this.wt.src,this.uei),this.aei=new K3(this,this.uei,t),this.aei.dn("ended",this.oei)}},this.oei=()=>{this.aei&&(this.aei.ln(),this.aei=void 0)},this.dn(t.vo,this.cei),this.dn(t.mA,this.lei),this.dn(t.wh,this.lei)}}}),cs.Ha),r(),r();var J3=String.fromCharCode(95);var $3=class t{get so(){return this.Oa||(this.Oa=function(t){return{get adsManager(){return t.adsManager},get ids(){return t.ids},get adContainer(){return t.adContainer},get imaSDK(){return t.imaSDK},get sendEvent(){return t.sendEvent},set sendEvent(i){t.sendEvent=i}}}(this)),this.Oa}get id(){return this.ym}get adsManager(){return this.t2t}get ids(){return this.dei}get adContainer(){return this.RJt}get sendEvent(){return this.fei}set sendEvent(t){for(let t of this._ei)this.t2t.removeEventListener(t.type,t.listener);this._ei=[],this.fei=t,this.gei()}get imaSDK(){return!0}wei(){for(let t in google.ima.AdEvent.Type)this.t2t.addEventListener(google.ima.AdEvent.Type[t],this.Aei),this._ei.push({type:google.ima.AdEvent.Type[t],listener:this.Aei})}vei(){sr(this._ei);for(let t in google.ima.AdEvent.Type)this.t2t.removeEventListener(google.ima.AdEvent.Type[t],this.Aei)}mei(t){this.gR.push({type:t.type,adVolume:this.adsManager.getVolume()})}gei(){this.fei(this.gR),this.gR=[]}static pei(i){return t.yei[i]||i}constructor(i,e,s,n){this.Aei=i=>{this.mei({type:t.pei(i.type)})},this.ym=i,this.t2t=e,this.dei=s,this.RJt=n,this._ei=[],this.gR=[]}};$3.yei={loaded:"AdLoaded",impression:"AdImpression",start:"AdVideoStart",firstquartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdquartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",skip:"AdSkipped",volumeChange:"AdVolumeChange"};var t5=class{Mei(t,i){this.Tei=c.createElement("script"),this.Tei.id=t.id,this.Tei.type="text/javascript",t.adContainer.appendChild(this.Tei),this.Tei.src="https://z.moatads.com/"+i+"/moatvideo.js#"+t.id,this.Nei=t.id,s[this.Nei]=t.so}Dei(){this.Tei&&rs(this.Tei),this.Nei&&(s[this.Nei]=void 0)}constructor(){this.Tei=void 0,this.Nei=void 0}};As((function(t){return class i extends t{Zh(t){var e,s,n;this.Iei(),null==(e=this.Sei)||e.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.Eei),null==(s=this.Sei)||s.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Iei),null==(n=this.Sei)||n.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.bei),this.Sei=void 0,this.RJt=void 0,super.Zh(t);const r=t&&t.analytics;this.Lei=i.kei(r);this.Pc&&this.Lei&&K$()&&this.xei()}ln(){var t,i,e;this.Iei(),null==(t=this.Sei)||t.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.Eei),null==(i=this.Sei)||i.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Iei),null==(e=this.Sei)||e.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.bei),this.Sei=void 0,this.RJt=void 0,this.Pc&&this.Pc.hn("JKt",this.$Kt),super.ln()}xei(){this.Pc&&this.Pc.dn("JKt",this.$Kt)}Cei(t,i,e){const s=J3+"moatApi"+S.floor(1e8*S.random());this.Oei=new $3(s,t,i,e),this.Oei.wei(),this.jei.Mei(this.Oei,this.Lei.partnerCode)}static kei(t){if(t){const i=t.filter((t=>"moat"===t.integration));if(0===i.length)return;if(i.length>1)throw new k("Only one Moat analytics configuration expected");return i[0]}}constructor(t,i){super(t,i),this.Lei=void 0,this.Oei=void 0,this.Sei=void 0,this.RJt=void 0,this.bei=()=>{this.Cei(this.Sei,{partnerCode:this.Lei.partnerCode,viewMode:google.ima.ViewMode.NORMAL},this.RJt)},this.$Kt=t=>{this.Sei=t.$4t,this.RJt=t.BJt,this.Iei(),this.Sei.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.Eei),this.Sei.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Iei),this.Sei.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.bei)},this.Eei=t=>{const i=t.getAd().getAdPodInfo();i.getAdPosition()<i.getTotalAds()&&(this.Iei(),this.bei())},this.Iei=()=>{this.Oei&&(this.Oei.vei(),this.Oei=void 0),this.jei.Dei()},this.jei=new t5}}}),cs.Ha),r(),r(),r();var wi,i5=class extends d{constructor(t,i,e){super(t,new Date),this.zei=i,this.eXt=e}};!function(t){t.LOADED="DAILoaded",t.AD_BREAK_STARTED="DAIAdBreakStarted",t.AD_BREAK_ENDED="DAIAdBreakEnded",t.AD_PERIOD_STARTED="DAIAdPeriodStarted",t.AD_PERIOD_ENDED="DAIAdPeriodEnded",t.AD_PROGRESS="DAIAdProgress",t.CUEPOINTS_CHANGED="DAICuePointsChanged",t.CLICK="DAIClick",t.ERROR="DAIError",t.STARTED="DAIStarted",t.FIRST_QUARTILE="DAIFirstQuartile",t.MIDPOINT="DAIMidpoint",t.STREAM_INITIALIZED="DAIStreamInitialized",t.THIRD_QUARTILE="DAIThirdQuartile",t.COMPLETE="DAIComplete"}(wi||(wi={}));var e5=class extends i5{constructor(t,i){super("DAILoaded",t,i)}},s5=class extends i5{constructor(t,i){super("DAIAdBreakStarted",t,i)}},n5=class extends i5{constructor(t,i){super("DAIAdBreakEnded",t,i)}},r5=class extends i5{constructor(t,i){super("DAIAdProgress",t,i)}},h5=class extends i5{constructor(t,i){super("DAICuePointsChanged",t,i)}},o5=class extends i5{constructor(t,i){super("DAIClick",t,i)}},a5=class extends i5{constructor(t,i){super("DAIError",t,i)}},u5=class extends i5{constructor(t,i){super("DAIStarted",t,i)}},c5=class extends i5{constructor(t,i){super("DAIFirstQuartile",t,i)}},l5=class extends i5{constructor(t,i){super("DAIMidpoint",t,i)}},d5=class extends i5{constructor(t,i){super("DAIStreamInitialized",t,i)}},f5=class extends i5{constructor(t,i){super("DAIThirdQuartile",t,i)}},_5=class extends i5{constructor(t,i){super("DAIComplete",t,i)}};var g5=class extends i{replaceAdTagParameters(t){return this.Pei.replaceAdTagParameters(null!=t?t:null)}Bei(t){return this.Pei.contentTimeForStreamTime(t)}Rei(t){return this.Pei.streamTimeForContentTime(t)}YLt(t,i){const e=function(t){let i;"vod"===t.availabilityType?(i=new s.google.ima.dai.api.VODStreamRequest,i.contentSourceId=t.contentSourceID,i.videoId=t.videoID):"live"===t.availabilityType&&(i=new s.google.ima.dai.api.LiveStreamRequest,i.assetKey=t.assetKey);const e=google.ima.dai.api.StreamRequest.StreamFormat;return i.format="dash"===t.format?e.DASH:e.HLS,i.apiKey=t.apiKey,i.adTagParameters=t.adTagParameters,i.omidAccessModeRules=t$(t.omidAccessModeRules),i}(t);this.Pei.requestStream(e)}Gn(){this.Uei(!1),this.Pei.reset()}ln(){this.Uo();const t=google.ima.dai.api.StreamEvent.Type;this.Pei.removeEventListener(t.AD_BREAK_STARTED,this.Qei),this.Pei.removeEventListener(t.AD_PROGRESS,this.Fei),this.Pei.removeEventListener(t.CLICK,this.o$t),this.Pei.removeEventListener(t.COMPLETE,this.Yei),this.Pei.removeEventListener(t.CUEPOINTS_CHANGED,this.Gei),this.Pei.removeEventListener(t.ERROR,this.Ss),this.Pei.removeEventListener(t.FIRST_QUARTILE,this.Wei),this.Pei.removeEventListener(t.LOADED,this.Vei),this.Pei.removeEventListener(t.MIDPOINT,this.Hei),this.Pei.removeEventListener(t.STARTED,this.qei),this.Pei.removeEventListener(t.STREAM_INITIALIZED,this.Xei),this.Pei.removeEventListener(t.THIRD_QUARTILE,this.Zei),this.Pei.removeEventListener(t.AD_BREAK_ENDED,this.Kei),this.Gn()}Jei(t){this.Pei.onTimedMetadata(t)}$ei(t,i,e){this.Pei.processMetadata(t,i,e)}tsi(t){const i=this.Pei.previousCuePointForStreamTime(t),e=i&&!i.played?i.start:void 0;return Promise.resolve(e)}Uei(t){this.C$t.style.display=t?"block":"none"}constructor(t,i){super(),this.Pei=t,this.C$t=i,this.Qei=t=>{this.Uei(!0);const i=xi(t),e=oi(t);this.jo(new s5(i,e))},this.Kei=t=>{this.Uei(!1);const i=xi(t),e=oi(t);this.jo(new n5(i,e))},this.Fei=t=>{const i=xi(t),e=oi(t);this.jo(new r5(i,e))},this.o$t=t=>{const i=xi(t),e=oi(t);this.jo(new o5(i,e))},this.Yei=t=>{const i=xi(t),e=oi(t);this.jo(new _5(i,e))},this.Gei=t=>{const i=xi(t),e=oi(t);this.jo(new h5(i,e))},this.Ss=t=>{const i=xi(t),e=oi(t);this.jo(new a5(i,e))},this.Wei=t=>{const i=xi(t),e=oi(t);this.jo(new c5(i,e))},this.Vei=t=>{const i=xi(t),e=oi(t);this.jo(new e5(i,e))},this.Hei=t=>{const i=xi(t),e=oi(t);this.jo(new l5(i,e))},this.qei=t=>{const i=xi(t),e=oi(t);this.jo(new u5(i,e))},this.Xei=t=>{const i=xi(t),e=oi(t);this.jo(new d5(i,e))},this.Zei=t=>{const i=xi(t),e=oi(t);this.jo(new f5(i,e))},this.C$t.style.display="none",this.Pei.setClickElement(this.C$t);const e=google.ima.dai.api.StreamEvent.Type;this.Pei.addEventListener(e.AD_BREAK_STARTED,this.Qei),this.Pei.addEventListener(e.AD_PROGRESS,this.Fei),this.Pei.addEventListener(e.CLICK,this.o$t),this.Pei.addEventListener(e.COMPLETE,this.Yei),this.Pei.addEventListener(e.CUEPOINTS_CHANGED,this.Gei),this.Pei.addEventListener(e.ERROR,this.Ss),this.Pei.addEventListener(e.FIRST_QUARTILE,this.Wei),this.Pei.addEventListener(e.LOADED,this.Vei),this.Pei.addEventListener(e.MIDPOINT,this.Hei),this.Pei.addEventListener(e.STARTED,this.qei),this.Pei.addEventListener(e.STREAM_INITIALIZED,this.Xei),this.Pei.addEventListener(e.THIRD_QUARTILE,this.Zei),this.Pei.addEventListener(e.AD_BREAK_ENDED,this.Kei)}};function xi(t){const i=t.getStreamData(),e=i.adProgressData;let s;e&&(s={THt:e.adBreakDuration,isi:e.duration,KVt:e.adPosition,I_:e.currentTime,lt:e.duration,tHt:e.totalAds});return{esi:s,ssi:(i.cuepoints||[]).map((t=>({Fm:t.start,Ym:t.end,K_:t.played}))),nsi:i.errorMessage||void 0,rsi:i.manifestFormat||void 0,hsi:i.streamId||void 0,osi:(i.subtitles||[]).map((t=>({asi:t.webvtt,usi:t.ttml,ys:t.language}))),Iu:i.url}}function w5(t){return{PFt:t.getAdSlotId(),V:t.getContent(),_P:t.getContentType(),Mi:t.getHeight(),Ti:t.getWidth()}}function oi(t){const i=t.getAd();if(!i)return;const e=i.getAdPodInfo(),s=i.getCompanionAds().map(w5);return{cYt:i.getAdId(),yHt:{KVt:e.getAdPosition(),JVt:e.getMaxDuration(),$Vt:e.getPodIndex(),sSt:e.getTimeOffset(),tHt:e.getTotalAds()},JQt:i.getAdSystem(),nHt:i.getAdvertiserName(),jFt:i.getApiFramework(),HQt:s,wFt:i.getCreativeId(),rHt:i.getCreativeAdId(),hHt:i.getDealId(),dN:i.getDescription(),lt:i.getDuration(),vP:i.getTitle(),lsi:i.getUniversalAdIdRegistry(),dsi:i.getUniversalAdIdValue(),gHt:i.getVastMediaHeight(),wHt:i.getVastMediaWidth(),AHt:i.getWrapperAdIds(),vHt:i.getWrapperAdSystems(),mHt:i.getWrapperCreativeIds()}}r(),r(),r();var A5="theo-dai-clickthrough",v5="urn:google:dai:2018",m5=class{get so(){const t=this,i=this.fsi;return{contentTimeForStreamTime:i=>t.Pei?t.Pei.Bei(i):i,streamTimeForContentTime:i=>t.Pei?t.Pei.Rei(i):i,replaceAdTagParameters(i){t.Pei&&t.Pei.replaceAdTagParameters(i)},get snapback(){return t._si},set snapback(i){t._si=i},get sourceTransformer(){return i.gsi},set sourceTransformer(t){i.gsi=t}}}E_(t){this.Q4.i_(),this.Q4=new Z_,Mo(this.wsi(t,this.Q4.$f))}async wsi(t,i){if(Pi(i),!this.Asi||!this.Pei)return this.Qo.vsi(t);if(this.Asi.wQt)return;if(t>this.Qo.S_()&&this._si){const e=await Oi(this.Pei.tsi(t),i);e&&(this.Qo.vsi(e),await this.Pei.w_(wi.AD_BREAK_ENDED,i))}this.Qo.vsi(t)}dg(){const t=this.Asi&&this.Asi.wQt;if(t){const i=re.gn(this.Qo.msi()),e=t.sSt,s=e+t.JVt,n=new re([e,s]);return i.bn(n).ks()}return this.Qo.msi()}async E9(t,i){if(!t)return this.Qo.psi(t,i);try{this.Qo.rt.dn(Po.qg,this.ysi);const e=await this.fsi.Msi(t,i);this.Asi&&this.Pei&&(this.Tsi=!0),await this.Qo.psi(e,i)}catch(t){if(Et(t),t.code===Gi.LICENSE_INVALID)return;const i=new Ri(ue.SOURCE_NOT_SUPPORTED,"Something went wrong while setting up a Google DAI stream.",t);throw this.rP=Yn(i),this.hP=i,this.Qo.jo(new _i(i)),i}}Gn(){if(this.Tsi){if(this.Qo.rt.hn(Po.qg,this.ysi),this.Nsi){this.Nsi.hn(ia.Jg,this.Dsi);for(const t of this.Nsi.H.Nw)t.hn(kl.Rm,this.C2t);this.Nsi=void 0}this.rP=void 0,this.hP=void 0,this.Q4.i_(),this.Asi&&this.Asi.Gn(),this.Pei&&this.Pei.Gn(),this.Tsi=!1}}get dt(){return this.rP||this.Qo.Isi()}get C_(){return this.hP||this.Qo.Ssi()}ln(){this.Gn(),this.Qo.Esi(),this.Pei&&this.Pei.ln()}constructor(t,i,e,s){this.Nsi=void 0,this.rP=void 0,this.hP=void 0,this.Q4=new Z_,this.Tsi=!1,this._si=!0,this.ysi=t=>{const i=t.Ht;i.Lt===ra.XM&&(i.$w===jo.ID3||i.$w===jo.EVENT_STREAM&&i.qw===v5)&&(i.Xw=Da.Zw,this.Nsi=i,i.dn(ia.Jg,this.Dsi))},this.Dsi=t=>{t.Qm.dn(kl.Rm,this.C2t)},this.C2t=t=>{var i,e;if(this.Pei)if((null==(i=this.Nsi)?void 0:i.$w)===jo.ID3){const i=t.Qm.V;"TXXX"===i.id&&this.Pei.Jei({TXXX:i.text})}else if((null==(e=this.Nsi)?void 0:e.$w)===jo.EVENT_STREAM){const i=t.Qm.V;this.Pei.$ei(v5,i,t.Ay)}},this.Qo=t,this.Pei=i,this.Asi=e,this.fsi=s,e&&i&&this.Qo.Pc&&this.Qo.Pc.rQt.VUt(e.UZt)}};r(),r();var p5=class extends e${get bsi(){return this.Lsi}get sZt(){return ft.Jh}constructor(t,i,e,s=!0){super(t,i,e),this.Lsi=s}},y5=class extends y${ksi(){const t=[wi.STARTED,wi.FIRST_QUARTILE,wi.MIDPOINT,wi.THIRD_QUARTILE,wi.COMPLETE];this.Pei.dn(t,this.xsi),this.Pei.dn(wi.AD_BREAK_ENDED,this.Kei),this.Pei.dn(wi.AD_PROGRESS,this.Fei),this.Pei.dn(wi.CUEPOINTS_CHANGED,this.Gei)}get cQt(){return this.FZt}get WUt(){return this.mQt}get vQt(){return this.GZt.filter((t=>!t.K_))}Csi(t){let i=t.yHt.sSt,e=this.YZt||this.findAdBreakWithPredicate(i,(t=>!t.K_));if(!e){const s=t.yHt.JVt;i=this.Qo.S_(),e=new p5(s,s,i,!1),e.$Xt(),this.GZt.push(e)}return e}Osi(t){switch(t){case wi.STARTED:this.FZt=!0;break;case wi.AD_BREAK_ENDED:this.FZt=!1}}jsi(t,i,e){if(i)switch(t){case wi.STARTED:case wi.FIRST_QUARTILE:case wi.MIDPOINT:case wi.THIRD_QUARTILE:case wi.COMPLETE:this.WUt.jo(new ct(this.YZt))}if(e)switch(t){case wi.STARTED:case wi.FIRST_QUARTILE:case wi.MIDPOINT:case wi.THIRD_QUARTILE:case wi.COMPLETE:this.WUt.jo(new mc(this.mZt,this.mZt.LZt))}switch(t){case wi.COMPLETE:this.WUt.jo(new Aa(this.mZt,this.BZt.LZt));break;case wi.AD_BREAK_ENDED:this.WUt.jo(new Oh(this.wQt))}switch(t){case wi.FIRST_QUARTILE:this.WUt.jo(new Fa(this.mZt,this.BZt.LZt));break;case wi.MIDPOINT:this.WUt.jo(new x$(this.mZt,this.BZt.LZt));break;case wi.THIRD_QUARTILE:this.WUt.jo(new su(this.mZt,this.BZt.LZt))}}zsi(t){const i=t.eXt,e=this.Csi(i),s=function(t,i){if(t.Pc.length)return!1;for(let e=0;e<i;e++){const i=new w$(t,Vr.wGt);t.iZt(i)}return!0}(e,i.yHt.tHt),n=function(t,i){const e=i.yHt.KVt-1;return t.Pc[e]}(e,i),r=function(t,i){return t.NZt!==a$.READY&&(t.OZt(i),!0)}(n,i);this.mZt=n,this.YZt=e,e.$Xt(),this.jsi(t.type,s,r)}Psi(t){for(const i of this.GZt)if(b_(t,i.sSt))return i}findAdBreakWithPredicate(t,i){for(const e of this.GZt)if(b_(e.sSt,t)&&i(e))return e}get Bsi(){const t=this.findAdBreakWithPredicate(0,(t=>t.bsi));let i=0;return t&&(i=t.JVt),i}Rsi(t,i){let e;for(const s of this.GZt)s.sSt>=t&&s.sSt<=i&&!s.K_&&(!e||s.sSt>=e.sSt)&&(e=s);return e}Gn(){this.mZt&&(this.WUt.jo(new Aa(this.mZt,this.mZt.LZt)),this.mZt=void 0),this.YZt&&(this.WUt.jo(new Oh(this.YZt)),this.YZt=void 0),this.FZt=!1,sr(this.GZt)}ln(){this.Gn(),this.WUt.ln()}constructor(t,i){super(new zI,ft.Jh),this.Pei=t,this.Qo=i,this.Fei=t=>{const i=this.YZt;if(!i||!this.mZt)return;const e=t.zei.esi;this.mZt.LZt=e.I_,function(t,i){const e=i.KVt,s=i.tHt,n=i.lt,r=i.THt,h=i.I_;let o;o=1===e?r-h:e===s?n-h:r-h-(e-1)*n;t.KXt=o}(i,e)},this.Gei=t=>{const i=t.zei.ssi;if(i)for(const t of i)if(!this.Psi(t.Fm)){const i=t.Ym-t.Fm,e=new p5(i,i,t.Fm,!0);this.GZt.push(e)}},this.xsi=t=>{this.Osi(t.type),this.zsi(t)},this.Kei=t=>{this.FZt=!1,this.mZt=void 0;const i=this.wQt;i&&(i.KXt=0,this.jsi(t.type,!1,!1),this.YZt=void 0)},this.ksi()}};function M5(t){if(t.sources)if(Gr(t.sources)){for(const i of t.sources)if(ha(i))return!0}else if(Uo(t.sources))return ha(t.sources);return!1}r();var T5=class{async Msi(t,i){const e=[],s=[];for(const i of t.sources)if(ha(i)){if(!this.Pei)continue;e.push(i)}else s.push(i);if(0===e.length)return t;let n,r;for(;void 0===n&&0!==e.length;){const{ac:h}=await Ne.Lb.aB(e,t),o=h;Pi(i);try{n=await this.Usi(o,i),s.push(n)}catch(t){Et(t),r=t,Hc(e,o)}}if(0!==t.sources.length&&0===s.length)throw new k("Fatal: unable to play DAI streams.");return r&&Ii(r.message),qr({},t,{sources:s})}async Usi(t,i){if(!this.Pei)throw new k("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=this.Pei.w_(wi.LOADED,i),s=this.Pei.w_(wi.ERROR,i),n=t.type===Bt.bv?"dash":"hls";this.Pei.YLt(qr({},t.ssai,{format:n}));const r=await Promise.race([e,s]);if(r.type===wi.LOADED){const i=t.type===Bt.bv?Bt.bv:Bt.zv;return tu(qr({},t,{src:this.gsi?await this.gsi(r.zei.Iu||""):r.zei.Iu,type:i}))}throw k(r.zei.nsi)}constructor(t){this.Pei=t,this.gsi=t=>t}};As(function(t){return i=>class extends i{Qh(){const t=super.Qh(),i=t.ads;if(!i)return t;const e=this.Qsi.so;return Wt(t,{get ads(){return Wt(i,{get dai(){return e}})}})}get Fl(){return this.Fsi}vsi(t){super.E_(t)}E_(t){this.Qsi.E_(t)}msi(){return super.dg()}dg(){return this.Qsi.dg()}Zh(t){return this.Qsi.Gn(),super.Zh(t)}async psi(t,i){return super.E9(t,i)}async E9(t,i){return this.Qsi.E9(t,i)}Isi(){return super.x_()}Ssi(){return super.O_()}x_(){return this.Qsi.dt}O_(){return this.Qsi.C_}Esi(){super.ln()}ln(){this.Qsi.ln()}constructor(i,e){super(i,e),this.Fsi=!1,this.Ysi=t=>{13===t.which&&this.C$t.click(),this.Pg()};const s=this.Cg();let n,r;try{this.C$t=c.createElement("button"),this.C$t.className=A5,this.C$t.addEventListener("keydown",this.Ysi),this.C$t.addEventListener("click",this.Ysi),n=t(s,this.C$t),r=new y5(n,this),this._e.appendChild(this.C$t),this.Fsi=!0}catch(t){}const h=new T5(n);this.Qsi=new m5(this,n,r,h)}}}((function(t,i){if(!(s.google&&s.google.ima&&Uo(s.google.ima.dai)))throw new k("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=new google.ima.dai.api.StreamManager(t);return new g5(e,i)})),cs.Ha),r(),r(),r();var N5=class{get Gsi(){return void 0===this.Wsi?0:(performance.now()-this.Wsi)/1e3}Vsi(t){this.Hsi=t,this.Xsi.qsi(t),this.Qo.dn("play",this.H7t),this.Qo.dn("ended",this.Jti),this.Qo.dn("timeupdate",this.Zsi),this.Qo.dn("error",this.L1),this.Qo.dn("waiting",this.tii),this.Qo.dn(["canplay","canplaythrough","playing"],this.eii),this.Qo.dn("durationchange",this.Kti),Os.EY(this.Ksi)}Jsi(){this.Qo.hn("play",this.H7t),this.Qo.hn("ended",this.Jti),this.Qo.hn("timeupdate",this.Zsi),this.Qo.hn("error",this.L1),this.Qo.hn("waiting",this.tii),this.Qo.hn(["canplay","canplaythrough","playing"],this.eii),this.Qo.hn("durationchange",this.Kti),Os.NY(this.Ksi),this.$si||(this.Xsi.tni(this.ini),this.Xsi.eni()),this.sni&&this.nni(),this.Hsi=void 0,this.rni=!1,this.$si=!1,this.ini=-1/0,sr(this.hni)}oni(){this.rni&&this.Xsi.ani(),this.Wsi=performance.now(),this.uni=b(this.cni,6e4)}nni(){this.Xsi.lni(this.Gsi),this.sni=!1,this.Wsi=void 0,this.uni&&(w(this.uni),this.uni=void 0)}dni(){if(M(this.Qo.yd()))return;const t=10*function(t,i){return S.floor(t/i)}(this.Qo.S_()/this.Qo.yd()*100,10);ks(this.hni,t)||(this.hni.push(t),this.Xsi.fni(t))}constructor(t,i){this.Qo=t,this.Xsi=i,this.rni=!1,this.$si=!1,this.hni=[],this.ini=-1/0,this.sni=!1,this.H7t=()=>{this.rni||(this.Xsi._ni(),this.sni&&this.Xsi.ani(),this.rni=!0)},this.Jti=()=>{this.Xsi.gni(),this.$si=!0},this.Zsi=()=>{this.ini<this.Qo.S_()&&(this.ini=this.Qo.S_()),this.dni()},this.tii=()=>{this.rni&&(this.wni=performance.now(),this.Xsi.Ani(this.Qo.S_()))},this.eii=()=>{this.wni&&(this.Xsi.vni((performance.now()-this.wni)/1e3),this.wni=void 0)},this.L1=()=>{this.ini<this.Qo.S_()&&(this.ini=this.Qo.S_()),this.Xsi.ktt(this.Qo.dt.message)},this.Kti=()=>{const t=this.Qo.yd()===1/0;t&&!this.sni&&(this.sni=t,this.oni())},this.Ksi=()=>{this.Xsi.tni(this.ini),this.Xsi.mni()},this.cni=()=>{void 0!==this.Wsi&&this.Xsi.pni(this.Gsi)}}};r();var D5=class{qsi(t){this.yni(["setDocumentTitle",t.itemTitle]),this.yni(["setCustomUrl","https://content.streamone.net/embed/cust=Xo9oT45EptMG/account="+t.accountID+"/item="+t.itemID]),this.yni(["trackPageView"])}_ni(){this.Mni("item first play","viewing","1")}eni(){this.Mni("item skipped","skipped","1")}fni(t){this.Mni("item progress","percent",""+t)}mni(){this.Mni("item abandoned","window closed","1")}tni(t){this.Mni("item time","watched",""+t)}gni(){this.Mni("item finished","ended","1")}Ani(t){this.Mni("buffering started","timestamp",""+t)}vni(t){this.Mni("buffering ended","duration",""+t)}ktt(t){this.Mni("error","message",""+t)}ani(){this.Mni("livestream first play","viewing","1")}pni(t){this.Mni("livestream progress","duration",""+t)}lni(t){this.Mni("livestream time","watched",""+t)}Mni(t,i,e){this.yni(["trackEvent","Video",t,i,e])}yni(t){const i="undefined"!=typeof _paq?_paq:void 0;i?i.push(t):console.warn("The Piwik library required for the StreamOne pre-integration was not found. Make sure it is loaded before instantiating THEOplayer.")}};r();var I5=class{get Tni(){if(!this.Nni)return;const t=this.Qo.S_()/this.Nni;return S.floor(4*t)+1}get M4t(){return void 0!==this.Nni}Vsi(){this.Sc.dn("HZt",this.Xii),this.Sc.dn("eKt",this.Zii),this.Sc.dn("iKt",this.Jii),this.Sc.dn("eQt",this.Kii),this.Qo.dn("timeupdate",this.Zsi),Os.EY(this.Ksi)}Jsi(){this.Sc.hn("HZt",this.Xii),this.Sc.hn("eKt",this.Zii),this.Sc.hn("iKt",this.Jii),this.Sc.hn("eQt",this.Kii),this.Qo.hn("timeupdate",this.Zsi),sr(this.Dni),Os.NY(this.Ksi),this.Nni=void 0}constructor(t,i,e){this.Qo=t,this.Sc=i,this.Xsi=e,this.Dni=[],this.Xii=()=>{this.Nni=this.Qo.yd(),this.Xsi.Ini(this.Nni)},this.Zii=()=>{this.Nni&&(this.Xsi.Sni(this.Nni),sr(this.Dni),this.Nni=void 0)},this.Jii=t=>{if(!this.Nni)return;const i=this.Nni-this.Nni*t.$Zt;this.Xsi.Eni(i),this.Nni=void 0},this.Kii=()=>{this.Nni=this.Qo.yd(),this.Xsi.bni()},this.Zsi=()=>{const t=this.Tni;if(this.M4t&&t&&!ks(this.Dni,t)){switch(t){case 1:this.Xsi.Lni();break;case 2:this.Xsi.kni();break;case 3:this.Xsi.xni();break;case 4:this.Xsi.Cni()}this.Dni.push(t)}},this.Ksi=()=>{this.Xsi.Oni()}}};r();var S5=class{Ini(t){this.Xsi.Mni("ad start","duration",""+t)}Sni(t){this.Xsi.Mni("ad finished","duration",""+t)}Eni(t){this.Xsi.Mni("ad skipped","remaining time",""+t)}bni(){this.Xsi.Mni("ad blocker","detected","1")}Lni(){this.Xsi.Mni("ad progress","firstQuartile","")}kni(){this.Xsi.Mni("ad progress","secondQuartile","")}xni(){this.Xsi.Mni("ad progress","thirdQuartile","")}Cni(){this.Xsi.Mni("ad progress","fourthQuartile","")}Oni(){this.Xsi.Mni("ad abandoned","window closed","1")}constructor(t){this.Xsi=t}};function E5(t){return t&&"streamone"===t.integration}As((function(t){return class extends t{ln(){this.hn("sourcechange",this.po),this.jni&&(this.zni&&this.zni.Jsi(),this.Pni&&this.Pni.Jsi(),this.jni=!1),super.ln()}constructor(t,i){super(t,i),this.jni=!1,this.po=()=>{this.jni&&(this.zni.Jsi(),this.Pni&&this.Pni.Jsi());const t=this.$a();if(this.jni=!1,!t)return;const i=function(t){if(t.analytics)for(let i of t.analytics)if(E5(i))return i}(t);i&&(this.jni=!0,this.zni.Vsi(i),this.Pni&&this.Pni.Vsi())};const e=new D5;if(this.zni=new N5(this,e),this.Pc){const t=new S5(e);this.Pni=new I5(this,this.Pc,t)}this.dn("sourcechange",this.po)}}}),cs.Ha),r(),r(),r(),r(),r(),r();var b5=class extends ht{async MK(t,i,e){const s=await L5(t);await super.MK(s,i,e),this.Bni(s,i)}async mK(t,i,e){const s=await L5(t);await super.mK(s,i,e),this.Bni(s,i)}Bni(t,i){const e=this.Uni.Rni;if(void 0===e)return;const s=i.XZ;let n;if(this.Qni!==s&&(this.Qni=s,e.setLevelSwitching(s),e.setContainerFormat(2)),function(t){return $c.call(t,"n8")}(i)){const t=i.n8,r=i.n8+i.lt;n=i.Zy,e.newPts(t,r,"video",s)}else 0;e.appendBuffer(t.JM,"video",s,n)}async wm(t,i,e){var s;await super.wm(t,i,e),null==(s=this.Uni.Rni)||s.flushBuffer(t,i)}constructor(t,i){super(t),this.Uni=i,this.Qni=void 0}};async function L5(t){switch(t.$w){case nL._H:return t;case nL.iS:{const i=await FE(t.JM);return{$w:nL._H,JM:new A(i)}}case nL.gH:throw new k("Opaque initialization segments are not supported on web.")}}var k5=class extends HW{jMt(t){return t.aJ===Zt.Yv?new b5(t,this.Uni):new ht(t)}constructor(t,i){super(t),this.Uni=i,this.CMt(t)}},x5=class extends ur{get Rni(){return this.Fni}Yni(){this.Fni=new LcevcDil.LcevcDil(this.eP.oP,this.Gni,{})}ye(){super.ye(),this.Wni()}we(){super.we(),this.Gni.style.display="none"}Gn(){return this.Gni.style.display="none",void 0!==this.Fni&&(this.Fni.close(),this.Yni()),super.Gn()}Hf(){return this.Vni=!0,void 0!==this.Fni&&(this.Fni.close(),this.Fni=void 0),this.hu.removeChild(this.Gni),super.Hf()}HP(t){this.jo(new tt(new ma(Gi.ABORTED,t)))}Wni(){this.eP.oP.style.display="none",this.Gni.style.display="block"}get vMt(){return this.eP}bMt(t){return new k5(t,this)}EMt(t){return new ki(t)}constructor(t,i){super(t),this.Vni=!1,this.Hni=t=>{this.Vni||(t||this.HP("LCEVC SDK failed to initialize."),this.Yni())},this.qni=()=>{this.Vni||this.HP("LCEVC SDK failed to initialize.")},this.hu=i,this.Gni=c.createElement("canvas"),this.Gni.style.width="100%",this.Gni.style.height="100%",this.Gni.style.position="absolute",this.Gni.style.top="50%",this.Gni.style.left="50%",this.Gni.style.transform="translate(-50%, -50%)",this.Gni.style.display="none",this.hu.appendChild(this.Gni),LcevcDil.ready.then(this.Hni,this.qni)}},C5=class extends Li{qP(t){if(t===Zt.Yv)return this.Xni=new x5(super.qP(t),this.hu),this.Xni}async LP(t){this.Xni=void 0;const i=t;await i.Hf(),await super.LP(i.vMt)}get Zni(){return this.Xni}constructor(t,i){super(t),this.hu=i}},O5=class extends $W{async ln(){for(const t of this.Zv.Nw)t.hn(ia.pw,this.Kni);this.ht.hn(Po.qg,this.Jni),this.ht.hn(Po.Zg,this.$ni),await super.ln(),await this.eP.Hf(),await this.kP.LP(this.eP)}constructor(t,i,e,s,n,r,h){const o=new C5(n,h),a=new ic(o);super(t,i,e,s,a.qP(r),h),this.Jni=t=>{t.Ht.dn(ia.pw,this.Kni)},this.$ni=t=>{t.Ht.hn(ia.pw,this.Kni)},this.Kni=t=>{var i;const e=null==(i=this.tri.Zni)?void 0:i.Rni,s=t.Jst.Bw;null==e||e.setCurrentLevel(s)},this.kP=a,this.tri=o,this.Zv.dn(Po.qg,this.Jni),this.Zv.dn(Po.Zg,this.$ni)}};La(new class extends NR{ij(t,i,e,s,n,r){const h=new V(Re.Lb.mit,Re.Lb.Ait,Re.Lb.vit,Re.Lb.yit);let o=i;return oo.hC()&&(o=new oo(o)),new O5(e,s,n,h,o,Zt.Yv,t)}async XP(t){if(!t.lcevc)return!1;if(!await super.XP(t))return!1;if(void 0===s.LcevcDil)throw new Ri(ue.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}ZP(){return!1}constructor(...t){super(...t),this.KP=Rt.Iz}}),r();var Za,j5=class extends dZ{async ln(){for(const t of this.Zv.Nw)t.hn(ia.pw,this.Kni);this.ht.hn(Po.qg,this.Jni),this.ht.hn(Po.Zg,this.$ni),await super.ln(),await this.kP.LP(this.eP)}constructor(t,i,e,s,n,r,h,o){const a=new C5(i,t),u=new ic(a);super(u.qP(Zt.Yv),e,s,n,r,h,o),this.Jni=t=>{t.Ht.dn(ia.pw,this.Kni)},this.$ni=t=>{t.Ht.hn(ia.pw,this.Kni)},this.Kni=t=>{var i;const e=null==(i=this.tri.Zni)?void 0:i.Rni,s=t.Jst.CNt.Bw;null==e||e.setCurrentLevel(s)},this.kP=u,this.tri=a,this.Zv.dn(Po.qg,this.Jni),this.Zv.dn(Po.Zg,this.$ni)}};La(new class extends _Z{ij(t,i,e,s,n,r){return new j5(t,i,e,n,WX(s.libraryLocation),new lZ(s.libraryLocation),new V(Re.Lb.mit,Re.Lb.Ait,Re.Lb.vit,Re.Lb.yit),s)}async XP(t,i){if(!t.lcevc)return!1;if(!await super.XP(t,i))return!1;if(void 0===s.LcevcDil)throw new Ri(ue.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}ZP(){return!1}constructor(...t){super(...t),this.KP=Rt.Lz}}),r(),r(),r(),r(),function(t){t.iri="Gn",t.eri="sri"}(Za||(Za={}));var z5="freewheel-nonlinear-ad",P5=[t.yA,t.XA,t.ZA,t.bh,Dt._v,t.wh],B5=class i extends po{zg(){this.kP.nR()}nri(){this.rri.dn("sKt",this.hri),this.rri.dn(["HZt","eKt"],this.ari),this.rri.dn("nKt",this.T4t)}cri(){this.rri.hn("sKt",this.hri),this.rri.hn(["HZt","eKt"],this.ari),this.rri.hn("nKt",this.T4t)}lri(){this.WUt.Ua(this.rri.dri)}fri(){this.rri._ri.dn(P5,this.Ds)}gri(){this.rri._ri.hn(P5,this.Ds)}get _e(){return this.h._e}static get QUt(){return ft.XXt}get QUt(){return i.QUt}get wQt(){return this.rri.dri.wri}get gQt(){return this.rri.dri.Ari}get I_(){return this.rri._ri.I_}set I_(t){}get lt(){return this.rri._ri.lt}get L_(){return this.rri._ri.L_}get dt(){return this.rP}get C_(){return this.hP}get wg(){return 0}get pg(){return 0}get Mg(){return this.rri._ri.Mg}set Mg(t){this.rri._ri.Mg=t}get Q_(){return this.rri._ri.Q_}set Q_(t){this.rri._ri.Q_=t}get og(){return this.rri._ri.og}get AQt(){return[]}get vQt(){return this.rri.dri.vri}get cg(){return this.rri._ri.cg}get V_(){return this.rri._ri.V_}Wg(i){if(this.pQt.Ew===this.h&&this.rri.Vg(i),this.rri.pri){if(i.type===t.bh&&this.h.L_)return!0;if(i.type===t.NA)return this.rri.Mri.yri(),!0}return!1}we(){this.rri.we()}Pg(){this.V_||this.rri._ri.Pg()}async Tri(){if(!this.rri.Nri)try{await this.rri.QVt()}catch(t){this.Dri(t,ze.GENERAL)}}async Iri(){if(this.rri._ri.Sri)return this.rri._ri.Bg(),!1;if(this.rri.Eri)try{await this.rri.Mri.bri()}catch(t){this.Dri(t,ze.PLAYBACK)}return!0}get Lri(){return Boolean(this.dt)}Dri(t,i){t.name!==Za.iri&&(this.lQt?(this.hP=new Ri(ue.AD_BLOCKER_DETECTED,"It was not possible to play the ads. Try disabling your ad blocker."),this.rP=Yn(this.hP),this.jo(new _i(this.hP))):this.WUt.jo(new $h(i,"THEOplayer was able to set up the FreeWheel advertisement, but it unable to play it.")))}async Bg(){if(this.V_&&this.jo(new ih(this.I_)),await this.Tri(),this.Lri)return;const t=await this.Iri();!this.Lri&&t&&this.T4t()}RZt(t,i,e){i===Xo.OUt&&("boolean"==typeof e&&(this.lQt=e),this.rri.RZt(t))}ye(){this.rri.ye()}uT(){this.rri._ri.uT()}Cg(){return this.c8}m_(){return this.kP.aR.map((t=>t.oP))}qUt(t){}async ln(){await this.Rg(),this.rri.ln(),await this.kP.LP(this.eP),this.cri(),this.gri(),this.WUt.vR(this.rri.dri)}async Rg(){this.rri.Gn(),this.pQt.Ew===this&&(this.h.ye(),this.NQt(),this.we())}constructor(t,i,e,s,n,r){super(t,i,e),this.rP=void 0,this.hP=void 0,this.lQt=!1,this.ari=t=>{const i=t.eXt,e="HZt"===t.type;if(i.lVt===Vr.AGt){const t=this.h._e.classList;e?t.add(z5):t.remove(z5)}e?this.ye():this.we()},this.hri=()=>{this.yQt(),this.h.Pg(),this.h.we()},this.T4t=()=>{this.rri.Nri&&(this.h.L_||this.h.Bg(),this.we(),this.h.ye(),this.NQt())},this.rri=n,this.kP=s,this.eP=r,this.c8=r.oP,this.c8.controls=!1,this.nri(),this.lri(),this.fri()}};r(),r(),r();var R5=class extends e${get kri(){return this.xri}get Cri(){return this.Pc[this.Ori]}set jri(t){this.Ori=t}get jri(){return this.Ori}get lVt(){return this.DZt}get sZt(){return ft.XXt}constructor(t,i,e,s){super(t,i,e),this.xri=s,this.Ori=0,this.DZt=Q5(s)}};r();var U5=class extends f${get zri(){return this.Pri}set zri(t){this.Pri!==t&&(this.Pri=t)}get Mi(){return this.Ol.kri.getHeight()}get Ti(){return this.Ol.kri.getWidth()}get VFt(){return this.zri.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]}get sZt(){return ft.XXt}Qh(){return Vo(this)}constructor(t,i,e){super(t,i),this.Pri=e}};function Q5(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY?Vr.AGt:Vr.wGt}var F5=class t extends ${async Bri(t,i){this.Rri=t,this.Uri=i,this.Qri(t),await i,this.Fri()}get Yri(){return this.Gri}get Wri(){return this.Vri}get Hri(){return this.qri}get wQt(){return this.YZt}get BZt(){return this.mZt}get Ari(){const t=[];return this.BZt&&t.push(this.BZt.eZt()),t}get vri(){return this.Xri.map((t=>t.eZt()))}get wri(){return this.wQt?this.wQt.eZt():null}Fri(){this.Zri()}Qri(t){t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Kri),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Jri),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.$ri),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.thi),t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.ihi)}ehi(){this.Rri&&(this.Rri.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Kri),this.Rri.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Jri),this.Rri.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.$ri),this.Rri.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.thi),this.Rri.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.ihi))}Zri(){this.Gri=this.shi(this.nhi),this.Vri=this.shi(this.rhi).concat(this.shi(this.hhi)),this.qri=this.shi(this.ohi),this.Xri=this.Gri.concat(this.Vri).concat(this.qri)}shi(t){if(!this.Rri)return[];const i=this.Rri.getSlotsByTimePositionClass(t);return this.ahi(i)}uhi(t){if(!this.YZt)return void 0;const i=t.getSlot().getAdInstances().indexOf(t);-1!==i&&(this.YZt.jri=i);const e=this.YZt.Cri;return e&&(e.zri=t),e}lhi(t){return this.Xri.filter((i=>i.kri===t))[0]}ahi(i){return i.map((i=>{const e=i.getTotalDuration(),s=t.dhi(i);return new R5(e,e,s,i)}))}static fhi(t,i){const e=t.getAdInstances(),s=[];for(const t of e){const e=Q5(t.getSlot()),n=new U5(i,e,t),r=[];n.MZt(t.getAdId(),t.getSlot().getWidth(),t.getSlot().getHeight(),t.getDuration(),r,0),i.iZt(n),s.push(n)}return s}_hi(){const t=this.BZt;t&&this.jo(new j$(t,this.ghi()))}whi(){const t=this.BZt;t&&(this.jo(new Aa(t,t.zri.getPlayheadTime())),this.mZt=void 0)}Ahi(t){const i=this.wQt;i&&(i.KXt=function(t,i,e){void 0===e&&(e=0);let s=0;const n=t.Pc.length;for(let r=i;r<n;r++){const n=t.Pc[r],h=n.lt;if(n){let t=h;r===i&&(t=et(h-e,0,h)),s+=t}}return s}(i,i.jri,t))}static dhi(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL?-1:t.getTimePosition()}ghi(){const t=this.BZt;if(!t)return 0;const i=t.zri;return i.getPlayheadTime()/i.getDuration()}vhi(t){Hc(this.Xri,t),Hc(this.Gri,t),Hc(this.Vri,t),Hc(this.qri,t)}Gn(){this.ehi(),this.Gri.length=0,this.Vri.length=0,this.qri.length=0,this.Xri.length=0,this.mZt=void 0,this.YZt=void 0,this.Rri=void 0,this.Uri=void 0}ln(){this.Gn(),this.Uo()}constructor(i,e){super(),this.zs=i,this.QC=e,this.nhi=tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,this.rhi=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,this.ohi=tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL,this.hhi=tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY,this.Gri=[],this.Vri=[],this.qri=[],this.Xri=[],this.Kri=i=>{const e=i.slot,s=this.lhi(e);t.fhi(e,s),this.YZt=s,s.$Xt(),this.vhi(s),s.lVt===Vr.wGt&&this.jo(new ct(s))},this.Jri=()=>{const t=this.wQt;t&&t.lVt===Vr.wGt&&(this.jo(new Oh(t)),this.QC.src=""),this.YZt=void 0},this.$ri=t=>{const i=this.uhi(t.adInstance);i&&(this.jo(new mc(i,i.zri.getPlayheadTime())),this.mZt=i),t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&(this.zs.style.cursor="pointer",this.zs.addEventListener("click",this.mhi))},this.thi=()=>{this.zs.style.cursor="",this.zs.removeEventListener("click",this.mhi)},this.mhi=()=>{this.BZt&&this.BZt.zri.getRendererController().processEvent({name:tv.freewheel.SDK.EVENT_AD_CLICK})},this.ihi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.whi();break;case tv.freewheel.SDK.EVENT_AD_SKIPPED:this._hi(),this.whi()}}}};r();var Y5=class t extends ${phi(){if(this.nMt){this.nMt.setAdVolume(G5(this.Q_,this.Mg))}}yhi(t){this.nMt=t,this.Qri(t)}Qri(t){t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.Mhi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Thi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Nhi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.Dhi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.Ihi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.Shi)}Ehi(){const t=this.nMt;t&&(t.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.Mhi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Thi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Nhi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.Dhi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.Ihi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.Shi))}Bg(){this.Gst.wQt&&(this.Gst.wQt.kri.resume(),this.V_=!1)}Pg(){this.Gst.wQt&&(this.Gst.wQt.kri.pause(),this.V_=!0)}get I_(){const t=this.Gst.BZt;return t&&(this.I_=t.zri.getPlayheadTime()),this.KB}set I_(t){this.KB=t}get lt(){return this.KL}get Sri(){return!!this.Gst&&void 0!==this.Gst.wQt}get V_(){return this.tR}set V_(t){this.tR=t}get Mg(){return this.wk}set Mg(t){this.nMt&&this.nMt.setAdVolume(t),this.wk=t}get Q_(){return this.nMt&&(this.bhi=0===this.nMt.getAdVolume()),this.bhi}set Q_(t){this.nMt&&this.nMt.setAdVolume(G5(t,this.Mg)),this.bhi=t}get cg(){return this.a$}get L_(){return this.D$}set L_(t){this.D$=t}get og(){return this.I$}static Lhi(t){switch(t){case"pause":return tv.freewheel.SDK.VIDEO_STATE_PAUSED;case"playing":return tv.freewheel.SDK.VIDEO_STATE_PLAYING;case"ended":return tv.freewheel.SDK.VIDEO_STATE_COMPLETED;case"stop":return tv.freewheel.SDK.VIDEO_STATE_STOPPED}}khi(i){const e=t.Lhi(i);this.nMt&&e&&this.nMt.setVideoState(e)}uT(){const t=this.Gst.BZt;t&&t.zri.skip()}Gn(){if(this.Ehi(),this.nMt){this.khi("stop"),this.nMt.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);const t=this.nMt.getTemporalSlots();for(const i of t)i.stop();this.nMt.dispose(),this.nMt=void 0}this.KL=NaN,this.L_=!1,this.I$=he.Rv,this.I_=0,this.xhi=0,this.V_=!0,void 0!==this.Chi&&(w(this.Chi),this.Chi=void 0)}ln(){this.Gn(),this.Uo(),this.Gst.hn("sKt",this.bd),this.$u.hn(yt.un,this.Thi),this.RJt.removeEventListener("click",this.Ohi)}constructor(t,i,e,s){super(),this.Qo=t,this.$u=i,this.Gst=e,this.RJt=s,this.a$=re.ZB().ks(),this.tR=!0,this.KL=NaN,this.bhi=!1,this.D$=!1,this.I$=he.Rv,this.KB=0,this.xhi=0,this.Mhi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_PAUSE:(function(t){if(!t)return!0;const i=t.zri,e=i.getPlayheadTime(),s=i.getDuration();return e>=s||b_(s,e)})(this.Gst.BZt)||(this.V_=!0,this.jo(new bs(this.I_)));break;case tv.freewheel.SDK.EVENT_AD_RESUME:this.V_=!1,this.jo(new Kr(this.I_));break;case tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE:if(this.nMt){const t=this.nMt.getAdVolume();0===t?this.bhi=!0:this.wk=t,this.jo(new ge(this.I_,this.Mg))}}},this.Nhi=()=>{this.L_=!1;const t=this.V_;if(this.V_=!1,t&&(this.jo(new ih(this.I_)),this.jo(new Kr(this.I_))),this.I$=he.Qv,this.I_=0,!this.Gst.BZt)return;const i=this.Gst.BZt.zri;this.KL=i.getDuration(),this.jo(new jn(this.KL)),this.Chi=b((()=>{if(!this.Sri)return void this.QJ();this.Gst.Ahi(this.I_);const t=i.getPlayheadTime();go(t,this.xhi,.001)||this.jo(new bl(t,void 0)),this.xhi=t}),250),this.nMt&&this.nMt.setAdVolume(G5(this.Q_,this.Mg))},this.Ohi=()=>{const t=this.Gst.BZt;t&&(t.lVt===Vr.AGt?this.Qo.Pg():this.V_||this.Pg())},this.QJ=()=>{w(this.Chi),this.Chi=void 0},this.Dhi=()=>{this.QJ(),this.L_=!0},this.Ihi=()=>{this.khi("pause")},this.Shi=()=>{this.khi("playing")},this.bd=t=>{t.Ol.lVt===Vr.wGt&&(this.V_=!1)},this.Thi=()=>{this.nMt&&this.nMt.resize(this.$u.lu,this.$u.fu)},this.wk=t.Mg,e.dn("sKt",this.bd),this.$u.dn(yt.un,this.Thi),this.RJt.addEventListener("click",this.Ohi)}};function G5(t,i){return t?0:i}r(),r();var lc=class extends Ga{get name(){return Za.eri}constructor(){super("A FreeWheel Ad Error occurred")}};r();var W5=class extends Ga{get name(){return Za.iri}constructor(){super("A FreeWheel Reset Error Occurred")}},V5=0;var H5=class{jhi(t,i,e){t.setNetwork(i.networkId),t.setServer(i.adServerUrl);const s=this.nMt;if(s.setProfile(i.profile),i.assetId&&i.assetDuration&&s.setVideoAsset(i.assetId,i.assetDuration),i.siteSectionId&&s.setSiteSection(i.siteSectionId),s.registerVideoDisplayBase(e),i.cuePoints&&i.cuePoints.length)for(const t of i.cuePoints)s.addTemporalSlot("cue-"+ ++V5,t.adUnit,t.timeOffset);const n=i.customData;if(Uo(n)){const t=C.keys(n);for(const i of t){const t=n[i];s.addKeyValue(i,t)}}}async zhi(){this.nMt.submitRequest(),await this.Phi.sL}Gn(){this.nMt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Bhi),this.Phi.eL(new W5)}constructor(t,i,e,s){this.nMt=i,this.Bhi=t=>{this.nMt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Bhi),t.success?this.Phi.iL(void 0):this.Phi.eL(new lc)},this.jhi(t,e,s),i.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Bhi),this.Phi=new $s}};r(),r();var q5=class{Rhi(){this.Rri.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Jri),this.Rri.removeEventListener(tv.freewheel.SDK.EVENT_ERROR,this.Jri)}get Uhi(){return this.t_.sL}ukt(){this.Rhi(),this.t_.eL(new W5)}constructor(t){this.Rri=t,this.Jri=t=>{this.Rhi(),this.t_.iL(void 0)},this.aXt=t=>{this.Rhi(),this.t_.eL(new lc)},this.t_=new $s,t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Jri),t.addEventListener(tv.freewheel.SDK.EVENT_ERROR,this.aXt)}},X5=class{lm(t){this.Rri=t}bri(){return this.Qhi(this.Fhi.Yri)}yri(){this.Qhi(this.Fhi.Hri)}async Qhi(t){if(this.Rri)for(;t.length>0;){this.Yhi=new q5(this.Rri);const i=this.Yhi.Uhi,e=this.Fhi.wQt;e&&e.lVt===Vr.AGt&&e.kri.stop();t.shift().kri.play();try{await i}finally{this.Yhi=void 0}}}Gn(){this.Yhi&&(this.Yhi.ukt(),this.Yhi=void 0),this.Ghi=0}ln(){this.Qo.hn(t.XA,this.Whi)}constructor(i,e){this.Qo=i,this.Fhi=e,this.Ghi=0,this.Whi=()=>{const t=this.Qo.I_;for(const i of this.Fhi.Wri){const e=new re([this.Ghi,t],[!0,!0]),s=i.kri.getTimePosition();if(e.ur(s))switch(i.kri.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.Qhi([i]);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:i.kri.play(),i.kri.setVisible(!0)}}this.Ghi=t},i.dn(t.XA,this.Whi)}},Z5=0,K5=class t extends zI{static createUniqueDisplayBaseId(){return"theo-freewheel-"+ ++Z5}get pri(){return 0!==this.dri.Hri.length}get Eri(){return 0!==this.dri.Yri.length}async QVt(){if(!this.uWt)throw new k("Invalid state");const t=this.Vhi,i=t.newContext();i.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),i.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);const e=new H5(t,i,this.uWt,this.Hhi),s=this.dri.Bri(i,e.zhi());this.qhi.lm(i),this._ri.yhi(i),this.Xhi=e;try{await s}finally{this._ri.phi(),this.Zhi=!0}}get _ri(){return this.iXt}get dri(){return this.Khi}get Nri(){return this.Zhi}static Jhi(t,i,e){const s=c.createElement("div");return s.id=e,s.className="theo-freewheel",i.classList.add("theo-freewheel-video"),s.appendChild(i),t.appendChild(s),s}get Mri(){return this.qhi}Vg(t){this._ri.khi(t.type)}ye(){this.RJt.style.display="block",this.QC.style.display="block"}we(){this.RJt.style.display="none",this.QC.style.display="none"}RZt(t){this.uWt=t}Gn(){this.Zhi=!1,this.uWt=void 0,this.dri.Gn(),this.qhi.Gn(),this.Xhi&&(this.Xhi.Gn(),this.Xhi=void 0),this._ri.Gn(),this.QC.src=""}ln(){this.Gn(),this.iXt.ln(),this.qhi.ln(),this.dri.ln(),this.RJt.remove(),this.Qo._e.removeChild(this.RJt)}constructor(i,e,n){super(),this.Qo=i,this.QC=e,this.Zhi=!1,this.Hhi=t.createUniqueDisplayBaseId(),this.RJt=t.Jhi(i._e,e,this.Hhi),this.Vhi=new s.tv.freewheel.SDK.AdManager,this.Khi=new F5(this.RJt,this.QC),this.qhi=new X5(this.Qo,this.dri),this.Ua(this.dri),this.iXt=new Y5(i,n,this.dri,this.RJt)}};function J5(t){if(s.tv)switch(t){case"preroll":return tv.freewheel.SDK.ADUNIT_PREROLL;case"midroll":return tv.freewheel.SDK.ADUNIT_MIDROLL;case"postroll":return tv.freewheel.SDK.ADUNIT_POSTROLL;case"overlay":return tv.freewheel.SDK.ADUNIT_OVERLAY}}function $5(t,i,e){if(void 0!==i&&M(i)||i<0||i===1/0)return NaN;switch(t){case"preroll":return 0;case"postroll":return e}return UJ(i)}var t6;function Ti(t){return t.navigator&&t.navigator.userAgent||""}Ts.Lb.zR(new class{get PUt(){return ft.XXt}jR(t){return t.integration===Mh.FREEWHEEL}BUt(t,i,e,n,r,h){if(!Boolean(s.tv&&s.tv.freewheel&&s.tv.freewheel.SDK&&s.tv.freewheel.SDK.AdManager))return;const o=new vp(e,h,1,[Zt.Yv]);o.cR(t._e);const a=o.qP(Zt.Yv),u=new K5(i,a.oP,e);return new B5(t,i,e,o,u,a)}sF(t){const i=Qi(t);Gr(i.cuePoints)||(i.cuePoints=[]);const e=[],s=t.assetDuration||0;for(const t of i.cuePoints){const i=$5(t.adUnit,t.timeOffset,s),n=J5(t.adUnit);!M(i)&&ji(n)?(t.adUnit=n,t.timeOffset=i,e.push(t)):le.Wv("Invalid adUnit/timeOffset combination. Cue was removed.")}return i.cuePoints=e,i}i1(t,i,e,s){e.RZt(t,i,s)}}),r(),r(),r(),r(),r(),r(),r(),r(),function(t){t.$hi="Windows 10",t.toi="Windows 8.1",t.ioi="Windows 8",t.eoi="Windows 7",t.soi="Windows Vista",t.noi="Windows Server 2003",t.roi="Windows XP",t.hoi="Windows Phone",t.ooi="Mac OS X",t.aoi="Mac OS",t.RS="Android",t.QS="iOS",t.uoi="Ubuntu",t.coi="Linux",t.loi="Chrome OS"}(t6||(t6={}));var i6={"Windows 10":/(Windows 10.0|Windows NT 10.0)/i,"Windows 8.1":/(Windows 8.1|Windows NT 6.3)/i,"Windows 8":/(Windows 8|Windows NT 6.2)/i,"Windows 7":/(Windows 7|Windows NT 6.1)/i,"Windows Vista":/Windows NT 6.0/i,"Windows Server 2003":/Windows NT 5.2/i,"Windows XP":/(Windows NT 5.1|Windows XP)/i,"Windows Phone":/Windows Phone/i,Android:/Android/i,Linux:/(Linux(?!.*Ubuntu)|X11)/,Ubuntu:/Ubuntu/i,iOS:/(iPhone|iPad|iPod)/i,"Mac OS X":/Mac OS X/i,"Mac OS":/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i,"Chrome OS":/CrOS/i};function Ha(t,i){const e=i6[i];return!!e&&Boolean(Ti(t).match(e))}function e6(t){return Ha(t,"Android")}function s6(t){return Ha(t,"Windows Phone")}function n6(t){return Ha(t,"iOS")&&!s6(t)}function r6(t){return Ha(t,"Ubuntu")}var h6,ah=/Windows (NT|Phone) ([0-9.]+)/i,o6=/Mac.*?(OS |OS X )(\d+(([_.])\d+)?(([_.])\d+)?)/i,a6={"Windows 10":ah,"Windows 8.1":ah,"Windows 8":ah,"Windows 7":ah,"Windows Vista":ah,"Windows Server 2003":ah,"Windows XP":ah,"Windows Phone":/Windows Phone ([0-9.]+)/i,Android:/Android (\d+(([_.])\d+)?(([_.])\d+)?)/i,Linux:void 0,Ubuntu:void 0,iOS:/(iPad|iPhone|iPod).*?(OS |os |OS_)(\d+(([_.])\d+)?(([_.])\d+)?)/i,"Mac OS X":o6,"Mac OS":o6,"Chrome OS":void 0};function u6(t,i){const e=a6[i];return e?Ti(t).match(e):null}function c6(t){return t.split(/[_.]/).map((t=>j(t,10)))}function l6(t){if(function(t){return Boolean(Ti(t).match(/Windows/i))}(t)){if(function(t){return Ha(t,"Windows 10")}(t))return"Windows 10";if(s6(t))return"Windows Phone";if(function(t){return Ha(t,"Windows 8.1")}(t))return"Windows 8.1";if(function(t){return Ha(t,"Windows 8")}(t))return"Windows 8";if(function(t){return Ha(t,"Windows 7")}(t))return"Windows 7";if(function(t){return Ha(t,"Windows Vista")}(t))return"Windows Vista";if(function(t){return Ha(t,"Windows Server 2003")}(t))return"Windows Server 2003";if(function(t){return Ha(t,"Windows XP")}(t))return"Windows XP"}else{if(e6(t))return"Android";if(n6(t))return"iOS";if(function(t){return Ha(t,"Mac OS X")}(t))return"Mac OS X";if(function(t){return Ha(t,"Mac OS")}(t))return"Mac OS";if(r6(t))return"Ubuntu";if(function(t){return Ha(t,"Chrome OS")}(t))return"Chrome OS";if(function(t){return Ha(t,"Linux")&&!r6(t)}(t))return"Linux"}}function d6(t,i){const e=function(t){const i=u6(t,"Windows 10");return i&&i.length>2?c6(i[2]):void 0}(t),s=function(t){const i=u6(t,"Mac OS X");return i&&i.length>2?c6(i[2]):void 0}(t),n=function(t){const i=u6(t,"Android");return i&&i.length>1?c6(i[1]):void 0}(t),r=function(t){const i=u6(t,"iOS");return i&&i.length>3?c6(i[3]):void 0}(t),h=function(t){const i=u6(t,"Chrome OS");return i&&i.length>0?c6(i[0]):void 0}(t);return e?e.length>i?e[i]:void 0:s?s.length>i?s[i]:void 0:n?n.length>i?n[i]:void 0:r?r.length>i?r[i]:void 0:h&&h.length>i?h[i]:void 0}function f6(t){const i=function(t){return d6(t,0)}(t),e=function(t){return d6(t,1)}(t),s=function(t){return d6(t,2)}(t);if(void 0!==i)return void 0===e?""+i:void 0===s?i+"."+e:i+"."+e+"."+s}!function(t){t.doi="Chrome",t.foi="Chrome Mobile",t._oi="Chrome iOS",t.goi="Chromium",t.woi="Firefox",t.Aoi="Seamonkey",t.voi="Firefox iOS",t.moi="Firefox Mobile",t.poi="Safari",t.yoi="Safari Mobile",t.Moi="Edge",t.Toi="Edge Chromium",t.Noi="Edge Mobile",t.Doi="IE",t.Ioi="Opera",t.Soi="Opera Mobile",t.Eoi="Vivaldi",t.boi="HeadlessChrome",t.Loi="Android Browser"}(h6||(h6={}));var _6={Chrome:/Chrome/i,"Chrome Mobile":void 0,"Chrome iOS":/CriOS/i,Chromium:/Chromium/i,HeadlessChrome:/HeadlessChrome/i,Firefox:/Firefox/i,Seamonkey:/Seamonkey/i,"Firefox iOS":/FxiOS/i,Safari:/Safari/i,Edge:/Edge\/\d+/i,"Edge Chromium":/Edg\/\d+/i,IE:/Trident/i,Opera:/Opera|OPR/i,Vivaldi:/Vivaldi/i,"Android Browser":void 0};function gi(t,i){const e=_6[i];return!!e&&Boolean(Ti(t).match(e))}function g6(t){return Boolean(Ti(t).match(/Mobi/i))}function w6(t){return Boolean(t.chrome&&t.navigator&&t.navigator.vendor&&/google/i.test(t.navigator.vendor))||A6(t)}function A6(t){return gi(t,"Chrome iOS")}function v6(t){return gi(t,"Firefox")&&!p6(t)}function m6(t){return gi(t,"Firefox Mobile")&&!p6(t)&&g6(t)}function p6(t){return gi(t,"Seamonkey")}function y6(t){return gi(t,"Firefox iOS")&&!p6(t)}function M6(t){return gi(t,"Safari")&&!gi(t,"Chrome")&&!li.iE}function T6(t){return Boolean(k6(t))}function N6(t){return gi(t,"Edge")}function D6(t){return gi(t,"Edge Chromium")}function I6(t){return gi(t,"IE")}function S6(t){return gi(t,"Vivaldi")}var E6,b6=/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,L6={Chrome:b6,"Chrome Mobile":b6,"Chrome iOS":/CriOS\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,Chromium:b6,HeadlessChrome:b6,Firefox:/Firefox\/([0-9.]+)/i,"Firefox iOS":/FxiOS\/([0-9.]+)/i,Safari:/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/,"Safari Mobile":void 0,Edge:/Edge\/(\d+)/i,"Edge Chromium":/Edg\/(\d+)/i,"Edge Mobile":void 0,IE:/(MSIE |Trident.*?rv:)(\d+)/i,Opera:/(OPR\/(\d+\.\d+))|(Opera(?=.*Version\/((\d+)\.(\d+))))/i,"Opera Mobile":void 0,Vivaldi:/Vivaldi\/((\d+)\.(\d+)\.(\d+)(?:\.(\d+))?)/i,"Android Browser":void 0};function fu(t,i){const e=L6[i];return e?Ti(t).match(e):null}function k6(t){return fu(t,"Opera")}function x6(t){const i=function(t){return fu(t,"Firefox")}(t);return i?T(i[1]):0}function C6(t){const i=function(t){return fu(t,"Firefox iOS")}(t);return i?T(i[1].split(".")[0]):0}function O6(t){const i=function(t){return fu(t,"Safari")}(t);return i?T(i[2].split(".")[0]):0}function j6(t){const i=function(t){return fu(t,"Edge")}(t);return i?T(i[1]):0}function z6(t){const i=function(t){return fu(t,"Edge Chromium")}(t);return i?T(i[1]):0}function P6(t){const i=function(t){return fu(t,"IE")}(t);return i?T(i[2]):0}function B6(t){const i=function(t){return fu(t,"Vivaldi")}(t);return i?T(i[1]):0}function R6(t){if(e6(t))return w6(t)?"Chrome Mobile":v6(t)||m6(t)?"Firefox Mobile":N6(t)?"Edge Mobile":T6(t)?"Opera Mobile":"Android Browser";if(n6(t)){if(w6(t)||A6(t))return"Chrome iOS";if(v6(t)||y6(t))return"Firefox iOS";if(N6(t))return"Edge Mobile";if(M6(t)||function(t){return M6(t)&&g6(t)}(t))return"Safari Mobile";if(T6(t))return"Opera Mobile"}return function(t){return gi(t,"Chromium")}(t)?"Chromium":function(t){return gi(t,"HeadlessChrome")}(t)?"HeadlessChrome":w6(t)?"Chrome":v6(t)?"Firefox":M6(t)?"Safari":N6(t)?"Edge":D6(t)?"Edge Chromium":I6(t)?"IE":T6(t)?"Opera":S6(t)?"Vivaldi":void 0}function U6(t){return S6(t)?B6(t):A6(t)?Number(function(t){const i=L6["Chrome iOS"];return i&&i.exec(Ti(t))||[]}(t)[1]):w6(t)?Number(function(t){const i=L6.Chrome;return i&&i.exec(Ti(t))||[]}(t)[1]):v6(t)||m6(t)?x6(t):y6(t)?C6(t):M6(t)?O6(t):N6(t)?j6(t):D6(t)?z6(t):I6(t)?P6(t):T6(t)?function(t){const i=k6(t);return i&&i[0].indexOf("Opera")>-1?T(i[5]):i?T(i[2].split(".")[0]):0}(t):void 0}function Q6(t){const i=Ti(t);return i.match(/CrKey|Roku|AFTS|AppleTV|Nexus Player/i)?"settop":i.match(/Xbox|Playstation|Wii|Nintendo/i)?"console":/(iPad|Tablet|(Android(?!.*Mobi))|(Windows(?!.*Phone)(.*Touch))|Kindle|Playbook|Silk|(Puffin(?!.*(IP|AP|WP))))/i.test(i)?"tablet":/Mobi/.test(i)?"mobile":i.match(/GoogleTV|SmartTV|SMART-TV|Internet TV|NetCast|NETTV|boxee|Kylo|DLNADOC|hbbtv|CE-HTML/i)?"smarttv":i.match(/(nuhk|Googlebot|bingbot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/i)?"searchbot":function(t){return Boolean(R6(t))}(t)?"pc":void 0}!function(t){t.koi="pc",t.xoi="console",t.Coi="settop",t.Ooi="mobile",t.joi="tablet",t.zoi="smarttv",t.Poi="searchbot"}(E6||(E6={}));var F6=class{JQ(t){this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_ID,t.deviceID||function(){let t=Ht.Kb("deviceId");if(t)return t;let i=$I();return Ht.pz("deviceId",i),i}()),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER,"THEOplayer"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER_VERSION,"6.5.0"),this.Boi(t),this.Roi(),this.Uoi(t),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_VERSION,"3.0"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_BUILDDATE,"2023-04-17 12:00:00"),t.application&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION,t.application),t.applicationVersion&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION_VERSION,t.applicationVersion),t.userAccountID&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.USER_ACCOUNT_ID,t.userAccountID);const i=t.connectionType;i?this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i):(this.Qoi(),td.connection&&td.connection.addEventListener&&td.connection.addEventListener("change",this.Qoi))}Boi(t){this.Foi(t);const i=t.deviceManufacturer||A3&&A3.manufacturer;i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MANUFACTURER,i);const e=t.deviceModel||A3&&A3.model;e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MODEL,e)}Foi(t){const i=t.deviceType||function(){const t=Q6(self);switch(t){case E6.xoi:return"game-console";case E6.zoi:return"tv";case E6.Coi:return"media-streamer";default:return t}}();i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_TYPE,i)}Roi(){const t=R6(self);t&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER,t);const i=U6(self);void 0!==i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER_VERSION,i.toString())}Uoi(t){const i=t.deviceOs||l6(self);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS,i);const e=t.deviceOsVersion||f6(self);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS_VERSION,e.toString())}ln(){td.connection&&td.connection.removeEventListener&&td.connection.removeEventListener("change",this.Qoi)}constructor(t,i){this.empClient=t,this.agama=i,this.Qoi=()=>{const t=le.Itt;switch(t){case"wifi":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,"wlan");break;case"ethernet":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,t);break;case"cellular":const i=function(t){switch(t){case"3g":return"mobile/3G";case"4g":return"mobile/4G";default:return}}(le.Dtt);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i)}}}};var Y6,Zh;As(function(t){return i=>class extends i{E_(t){this.Yoi&&this.Yoi.UU(),super.E_(t)}ln(){this.Yoi&&this.Yoi.ln(),super.ln()}constructor(i,e){super(i,e),this.bU=new t,this.Yoi=new nS(this,this.bU,e)}}}(class extends GI{zg(t){this.Goi=t,this.Woi&&(this.bU=function(t,i){const e=function(t,i){switch(i){case"info":return t.LogLevel.INFO;case"debug":return t.LogLevel.DEBUG;case"warning":return t.LogLevel.WARNING;case"error":return t.LogLevel.ERROR;default:return t.LogLevel.FATAL}}(i,t.logLevel);i.setLogLevel(e);const s=new i.EMPClient(t.config);return function(t,i){return t.setExternalConfig(i.config),t}(s,t)}(t,this.Woi),this.bU&&(this.Voi=new F6(this.bU,this.Woi),this.ko=!0))}KQ(){return this.Woi||console.warn("Please load the Agama Library (empclient.min.js) in order to use the integration"),!!this.Woi}XQ(){return this.ko}NQ(t,i){if(this.bU&&this.Woi)switch(t){case os.XR:this.bU.setMeasurement(this.Woi.Measurement.BUFFER_LENGTH,i);break;case os.ZR:this.bU.setMeasurement(this.Woi.Measurement.BYTES_RECEIVED,i);break;case os.JR:this.bU.setMeasurement(this.Woi.Measurement.SEGMENT_PROFILE_BITRATE,i);break;case os.$R:this.bU.setMeasurement(this.Woi.Measurement.VIDEO_PROFILE_BITRATE,i);break;case os.KR:this.bU.setMeasurement(this.Woi.Measurement.SEGMENT_READ_BITRATE,i);break;case os.YR:this.bU.setMeasurement(this.Woi.Measurement.HTTP_REQUEST_STATUS_CODE_1XX,i);break;case os.GR:this.bU.setMeasurement(this.Woi.Measurement.HTTP_REQUEST_STATUS_CODE_2XX,i);break;case os.WR:this.bU.setMeasurement(this.Woi.Measurement.HTTP_REQUEST_STATUS_CODE_3XX,i);break;case os.HR:this.bU.setMeasurement(this.Woi.Measurement.HTTP_REQUEST_STATUS_CODE_4XX,i);break;case os.qR:this.bU.setMeasurement(this.Woi.Measurement.HTTP_REQUEST_STATUS_CODE_5XX,i);break;case os.iU:this.bU.setMeasurement(this.Woi.Measurement.PLAYBACK_POSITION,i);break;case os.eU:this.bU.setMeasurement(this.Woi.Measurement.NUMBER_OF_FRAMES_DECODED,i);break;case os.tU:this.bU.setMeasurement(this.Woi.Measurement.NUMBER_OF_FRAMES_DROPPED,i)}}rQ(t,i){if(this.bU&&this.Woi)switch(t){case Ps.oU:this.bU.setSessionMetadata(this.Woi.SessionMetadata.ASSET_DURATION,i);break;case Ps.hU:this.bU.setSessionMetadata(this.Woi.SessionMetadata.MANIFEST_URI,i);break;case Ps.aU:this.bU.setSessionMetadata(this.Woi.SessionMetadata.NUMBER_OF_CONTENT_PROFILES,i);break;case Ps.lU:this.bU.setSessionMetadata(this.Woi.SessionMetadata.SERVICE_NAME,i);break;case Ps.uU:this.bU.setSessionMetadata(this.Woi.SessionMetadata.CDN,i);break;case Ps.cU:this.bU.setSessionMetadata(this.Woi.SessionMetadata.CONTENT_TITLE,i);break;case Ps.dU:this.bU.setSessionMetadata(this.Woi.SessionMetadata.CONTENT_TYPE,i);break;case Ps.fU:this.bU.setSessionMetadata(this.Woi.SessionMetadata.CONTENT_DESCRIPTION,i)}}JQ(){this.Voi&&this.Goi&&this.Voi.JQ(this.Goi)}ZQ(t,i){this.Woi&&this.bU&&(this.CQ(),function(t,i,e,s){const n=tS(t,e,s);i.abrSession(n,t.ViewState.INITIAL_BUFFERING)}(this.Woi,this.bU,t,i),this.Hoi=!0)}ln(){this.Voi&&this.Voi.ln(),this.qoi(UI._U),this.bU=void 0}WU(t){this.Xoi(t)}qU(t,i){this.bU&&this.bU.event(t.code,i)}CQ(){this.bU&&this.Hoi&&(this.bU.exitSession(),this.Hoi=!1)}qoi(t){if(this.bU&&this.Woi&&(this.CQ(),t===UI._U))this.bU.shutdown(this.Woi.ShutdownType.NORMAL_SHUTDOWN)}VU(t,i,e){this.Xoi(t,i,e)}Xoi(t,i,e){if(this.bU&&this.Woi)switch(t){case cc._v:this.Zoi(this.Woi.ViewState.PLAYING,i,e);break;case cc.UR:this.Zoi(this.Woi.ViewState.FAILED,i,e);break;case cc.QR:this.Zoi(this.Woi.ViewState.INITIAL_BUFFERING,i,e);break;case cc.Dv:this.Zoi(this.Woi.ViewState.PAUSED,i,e);break;case cc.PR:this.Zoi(this.Woi.ViewState.SEEK,i,e);break;case cc.RR:this.Zoi(this.Woi.ViewState.STALLED,i,e);break;case cc.FR:this.Zoi(this.Woi.ViewState.NO_ACCESS,i,e)}}Zoi(t,i,e){if(this.bU)if(i){const s=function(t){return t||""}(e);this.bU.viewStateExtended(t,i.code,s)}else this.bU.viewStateChanged(t)}constructor(){super(),this.ko=!1,this.Hoi=!1,this.Woi=J.Agama}}),cs.Ha),r(),r(),r(),r(),r(),function(t){t.PLAY_ALL="play-all",t.PLAY_NONE="play-none",t.PLAY_LAST="play-last"}(Y6||(Y6={})),r(),function(t){t.VOD="vod",t.LIVE="live"}(Zh||(Zh={}));var G6=class{get so(){return this.Koi.so}get dt(){return this.rP}get C_(){return this.hP}Joi(t){this.rP=Yn(t),this.hP=t,this.Qo.jo(new _i(t))}Zh(t){this.$oi.Gn(),this.tai.tL(),this.iai=!1,this.Qo.eai(t)}async E9(t,i){if(this.sai.Gn(),this.iai=!1,!t||!function(t){return t.sources.some((t=>t.integration===sS.VERIZON_MEDIA))}(t))return await this.Qo.nai(t,i);try{this.rai=await this.hai.Msi(t),await this.Qo.nai(this.rai,i)}catch(t){this.Joi(new Ri(ue.MANIFEST_LOAD_ERROR,t.message,t))}}ln(){this.Q4.i_(),this.oai.i_(),this.Qo.hn("currentsourcechange",this.uii),this.Qo.hn("timeupdate",this.Zsi),this.Qo.hn("ended",this.Jti),this.Qo.hn("loadeddata",this.gd);for(const t of this.$oi.cZt.Ru)t.hn("aai",this.uai),t.hn("sKt",this.sii),t.hn("nKt",this.nii);this.$oi.cZt.hn("hZt",this.cai),this.$oi.cZt.hn("oZt",this.lai),this.$oi.ln(),this.C$t&&(this.C$t.Hf(),this.C$t=void 0),this.iai=!1}async fetchAssetInfo(t){if(t&&t.integrationData)try{const i=await this.fai.Qot(t.integrationData.source.prefix,t.integrationData.source.id,this.oai.$f,t.integrationData.preplayResponse.sid);this.Koi._ai(i),this.tai.gai(i,this.$oi.cZt.Ru)}catch(t){0}}wai(t){this.$oi.Aai(t),this.$oi.gQt.forEach((i=>i.vai(t))),this.$oi.mai(this.Qo.dg()),this.pai()}E_(t){this.$oi.wQt||(this.Q4.i_(),this.Q4=new Z_,Mo(this.wsi(t,this.Q4.$f)))}async wsi(t,i){if(Pi(i),t<this.Qo.S_())return void this.yai(t);let e=[];switch(this.$oi.Mai){case Y6.PLAY_ALL:e=this.$oi.Tai(this.Qo.S_(),t),await this.Nai(t,e,i);break;case Y6.PLAY_LAST:const s=this.$oi.Tai(this.Qo.S_(),t).pop();e=s?[s]:[],await this.Nai(t,e,i);break;case Y6.PLAY_NONE:this.Dai(t)}}yai(t){const i=xe(this.$oi.cZt.Ru,(i=>i.net.ur(t)));i?this.Qo.Iai(i.Fm):this.Qo.Iai(t)}Dai(t){const i=this.$oi.Tai(this.Qo.S_(),t).pop();i&&i.net.ur(t)?this.Qo.Iai(i.Ym):this.Qo.Iai(t)}async Nai(t,i,e){for(const t of i)await this.Sai(t,e);const s=i[i.length-1];s&&s.net.ur(t)?this.Qo.S_()<t&&this.Qo.Iai(s.Ym):this.Qo.Iai(t)}async Sai(t,i){t.hn("aai",this.uai);const e=Promise.race([t.w_("nKt",i),t.w_("aai",i)]);this.wai(this.Qo.S_()),t.ao||this.Qo.Iai(t.Fm),await e,t.dn("aai",this.uai)}pai(){const t=xe(this.$oi.gQt,(t=>t.Eai.length>0));if(t){const i=t.Eai[0];this.C$t?this.C$t.c$t=i:(this.C$t=new hc(this.Qo._e,i),this.C$t.dn("clickstart",this.bai))}else this.C$t&&(this.C$t.Hf(),this.C$t=void 0)}constructor(t,i,e,s,n,r,h){this.Qo=t,this.sai=i,this.hai=e,this.$oi=s,this.Koi=n,this.fai=r,this.tai=h,this.rP=void 0,this.hP=void 0,this.Q4=new Z_,this.oai=new Z_,this.Lai=void 0,this.iai=!1,this.C$t=void 0,this.uii=t=>{const i=t.currentSource;if(!i||!i.integrationData)return;const{preplayResponse:e,source:s}=i.integrationData;this.Koi.kai(e),e&&e.type===Zh.VOD&&e.ads&&this.$oi.gai(e.ads),this.sai.xai=i.integrationData,s.assetInfo&&Mo(this.fetchAssetInfo(i))},this.H7t=()=>{this.iai=!0},this.Zsi=()=>{this.iai&&this.wai(this.Qo.S_())},this.Jti=()=>{this.iai&&(this.wai(1/0),this.iai=!1)},this.gd=()=>{Mo(this.sai.yn())},this.uai=t=>{this.Q4.i_(),this.Q4=new Z_,Mo(this.wsi(t.Ol.Ym,this.Q4.$f))},this.sii=()=>{1!==this.Qo.q_&&(this.Lai=this.Qo.q_,this.Qo.q_=1)},this.nii=()=>{void 0!==this.Lai&&(this.Qo.q_=this.Lai,this.Lai=void 0)},this.cai=t=>{t.Ol.dn("aai",this.uai),t.Ol.dn("sKt",this.sii),t.Ol.dn("nKt",this.nii)},this.lai=t=>{t.Ol.hn("aai",this.uai),t.Ol.hn("sKt",this.sii),t.Ol.hn("nKt",this.nii)},this.bai=()=>{this.Qo.Pg()},this.Qo.dn("currentsourcechange",this.uii),this.Qo.dn("play",this.H7t),this.Qo.dn("timeupdate",this.Zsi),this.Qo.dn("ended",this.Jti),this.Qo.dn("loadeddata",this.gd),this.$oi.cZt.dn("hZt",this.cai),this.$oi.cZt.dn("oZt",this.lai)}};r(),r();var W6=Ze({breaksIndex:Fr,adsIndex:Fr,startTime:Fr,endTime:Fr}),V6=Ze({index:Fr,timeOffset:Fr}),H6=Ze({duration:Fr,apiFramework:rl(Ni,jD),creative:Ni,mimeType:Ni,width:Fr,height:Fr,companions:di(OD),extensions:rl($e,di(OD)),fw_parameters:rl($e,ir(Ni)),events:ir(di(Ni))}),q6=Ze({type:St(["linear","nonlinear"]),position:St(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:Fr,duration:Fr,ads:di(H6),events:ir(di(Ni))}),X6=Ze({breaks:di(q6),breakOffsets:di(V6),placeholderOffsets:di(W6)}),Z6=Ze({fairplayCertificateURL:rl($e,Ni),widevineLicenseURL:rl($e,Ni),playreadyLicenseURL:rl($e,Ni)}),K6={type:St(PD(Zh)),playURL:Ni,prefix:Ni,sid:Ni,drm:rl($e,Z6)},J6=Ze(qr({},K6,{type:St([Zh.VOD]),ads:X6,interstitialURL:rl(Ni,jD,$e)})),$6=rl(J6,Ze(qr({},K6,{type:St([Zh.LIVE])})));r();var t8,i8=Ni,e8=Ze({userId:Ni,externalId:rl(Ni,di(Ni))});!function(t){t[t.AD_IMPRESSIONS=1]="AD_IMPRESSIONS",t[t.FW_VIDEO_VIEWS=2]="FW_VIDEO_VIEWS",t[t.LINEAR_AD_DATA=4]="LINEAR_AD_DATA"}(t8||(t8={}));var s8=class{async Qot(t){try{return this.Cai(t)}catch(t){throw t}}async Cai(t){const i=await async function(t){const i=t.prefix,e=n8[t.assetType],s=function(t){if(di(i8).$j(t))return 1===t.length?t[0]:t.join(",")+"/multiple";if(i8.$j(t))return t;if(e8.$j(t)&&Gr(t.externalId))return 1===t.externalId.length?"ext/"+t.userId+"/"+t.externalId[0]:"ext/"+t.userId+"/"+t.externalId.join(",")+"/multiple";if(e8.$j(t))return"ext/"+t.userId+"/"+t.externalId;throw new _("Invalid asset id")}(t.id),n=await async function(t){if(t&&await le.Kx())return{rmt:"fps",manifest:"m3u8"};if(t&&await le.Hx())return{rmt:"wv",manifest:"mpd"};if(t&&await le.Zx())return{rmt:"pr",manifest:"mpd"};return{}}(t.contentProtected),r=function(t,i){const e=r8(t,i);return e?{"ad.cping":"1","ad.pingf":String(e)}:{}}(t.assetType,t.ping);let h={};Gr(t.preplayParameters)?t.preplayParameters.forEach((t=>{h[t[0]]=t[1]})):h=t.preplayParameters;const o=i+"/preplay/"+e+s+".json";return sa(o,qr({v:"2"},h,n,r,h))}(t),e=this.LS.BI({mS:Vt.GET,Iu:i,pS:$m.tS}),s=await e,n=qr({},await s.JM(),{type:t.assetType===Va.ASSET?Zh.VOD:Zh.LIVE});return $6.$j(n)||$6.iz(n,"PreplayResponse"),n}constructor(t){this.LS=t}},n8={[Va.ASSET]:"",[Va.CHANNEL]:"channel/",[Va.EVENT]:"event/"};function r8(t,i){const e=t!==Va.ASSET;return(!e&&i.adImpressions?1:0)+(!e&&i.freeWheelVideoViews?2:0)+(e&&i.linearAdData?4:0)}r(),r();var h8,o8=Ze({ad_id:Ni,apiFramework:rl(jD,Ni),companions:di(OD),creative:Ni,duration:Fr,mimeType:Ni,height:Fr,width:Fr,extensions:rl($e,di(OD)),fw_parameters:rl($e,ir(Ni))}),a8=Ze({breakId:Ni,ads:di(o8),type:St(["linear","nonlinear"]),position:St(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:Fr,duration:Fr,height:rl($e,Fr),width:rl($e,Fr),events:ir(di(Ni))}),u8=Ze({breaks:di(a8)}),c8=Ze({next_time:Fr,ads:rl($e,u8),extensions:rl($e,di(OD)),error:rl($e,Ni),currentBreakEnd:rl($e,Fr)});!function(t){t.eut="start",t.PR="seek"}(h8||(h8={}));var l8=class{async Qot(t,i){try{return this.Cai(t,i)}catch(t){throw t}}async Cai(t,i){const e=function(t){const i={v:"3",pt:String(t.currentTime)};(function(t){return void 0!==t.seekTime})(t)&&t.hasFreeWheelVideoViews&&(i.ft=String(t.seekTime));t.event&&(i.ev=t.event);return sa(t.zonePrefix+"/session/ping/"+t.sessionId+".json",qr({},i))}(t),s=this.LS.BI({mS:Vt.GET,Iu:e,pS:$m.tS,$f:i}),n=await s,r=await n.JM();return c8.$j(r)||c8.iz(r,"PingResponse"),r}constructor(t){this.LS=t}};r(),r();var d8=class extends Js{get UI(){return this.QI}Qh(){return new f8(this.QI)}constructor(t){super("Oai"),this.QI=t}},f8=class extends d{constructor(t){super("pingresponse"),this.response=t}};r();var _8=class extends Js{get dt(){return this.rP}Qh(){return new g8(this.rP)}constructor(t){super("jai"),this.rP=t}},g8=class extends d{constructor(t){super("pingerror"),this.error=t}},w8=class extends i{set xai(t){this.zai=t}get Pai(){return this.Bai}async yn(){const t=this.zai;if(!t)return;0!==r8(t.source.assetType,t.source.ping)&&(this.Bai=this.Qo.dg().start(0),await this.Rai(h8.eut),this.Qo.dn("timeupdate",this.Uai),this.Qo.dn("seeking",this.Qai))}async Rai(t,i){const e=this.zai.preplayResponse,s={};if(M(this.Bai))return void 0;if(oe(this.Fai)&&b_(this.Fai,this.Qo.S_()-this.Bai))return;void 0!==i&&(s.seekTime=i),void 0!==t&&(s.event=t);let n,r=this.Qo.S_()-this.Bai;t===h8.eut?r=0:t!==h8.PR&&this.Yai&&(r=S.min(r,this.Yai)),this.Fai=r;try{var h;const t=await this.Gai.Qot(qr({zonePrefix:e.prefix,sessionId:e.sid,currentTime:r,hasFreeWheelVideoViews:null==(h=this.zai)?void 0:h.source.ping.freeWheelVideoViews},s),this.EC.$f);this.jo(new d8(t)),this.Yai=-1!==t.next_time?t.next_time:void 0,n=t.error}catch(t){Er(t)||(n=t.message)}finally{n&&this.jo(new _8(n))}}Gn(){this.Yai=void 0,this.zai=void 0,this.Bai=NaN,this.Wai=!1,this.Vai=NaN,this.Fai=void 0,this.Qo.hn("seeking",this.Qai),this.Qo.hn("timeupdate",this.Uai),this.Hai()}Hai(){this.EC.i_(),this.EC=new Z_}ln(){this.Gn()}constructor(t,i){super(),this.Gai=t,this.Qo=i,this.Bai=NaN,this.Yai=void 0,this.Wai=!1,this.Vai=NaN,this.EC=new Z_,this.Fai=void 0,this.Uai=async()=>{const t=this.Qo.S_();if(this.Vai=t,this.Wai||Go(this.Yai)||M(this.Bai))return;this.Bai+this.Yai<=t&&(this.Wai=!0,await this.Rai(),this.Wai=!1)},this.Qai=()=>{if(this.Qo.S_()===this.Bai)return;this.Wai&&this.Hai(),this.Vai=this.Qo.S_();const t=this.Vai-(this.Bai||0);M(t)?Mo(this.Rai(h8.PR,0)):Mo(this.Rai(h8.PR,t))}}};r();var A8=class{async Msi(t){const i=[];for(const e of t.sources)if(v8(e))try{const s=p8({source:e,preplayResponse:await this.qai.Qot(e)},t,this.PV);s.src&&(s.src=sa(s.src,e.playbackUrlParameters)),i.push(s)}catch(t){0}else i.push(e);if(0!==t.sources.length&&0===i.length)throw new k("Fatal: unable to play VerizonMediaSources.");return qr({},t,{sources:i})}constructor(t,i){this.qai=t,this.PV=i}};function v8(t){return"verizon-media"===t.integration}function m8(t){if(t.sources)if(Gr(t.sources)){for(const i of t.sources)if(!ji(i)&&"verizon-media"===i.integration)return!0}else if(!ji(t.sources))return"verizon-media"===t.sources.integration;return!1}function p8(t,i,e){const s=t.preplayResponse;let n;t.source.contentProtected&&s.drm&&(n={integration:"uplynk"},s.drm.fairplayCertificateURL&&(n.fairplay={certificateURL:s.drm.fairplayCertificateURL}),s.drm.widevineLicenseURL&&(n.widevine={licenseAcquisitionURL:s.drm.widevineLicenseURL}),s.drm.playreadyLicenseURL&&(n.playready={licenseAcquisitionURL:s.drm.playreadyLicenseURL}));const r=tu({src:s.playURL,contentProtection:n,useNativePlayback:t.source.useNativePlayback,hls:t.source.hls,dash:t.source.dash},i,e);return r.integrationData=t,r}r(),r(),r();var y8=class extends Js{Qh(){return new M8(this.Ol.so)}constructor(t,i){super("sKt"),this.Ol=t,this.Ay=i}},M8=class extends d{constructor(t){super("adbreakbegin"),this.adBreak=t}};r();var T8=class extends Js{Qh(){return new N8(this.Ol.so)}constructor(t,i){super("nKt"),this.Ol=t,this.Ay=i}},N8=class extends d{constructor(t){super("adbreakend"),this.adBreak=t}};r();var D8=class extends Js{Qh(){return new I8(this.Ol.so)}constructor(t){super("aai"),this.Ol=t}},I8=class extends d{constructor(t){super("adbreakskip"),this.adBreak=t}};r(),r();var S8=class extends Js{Qh(){return new E8(this.Ol.so)}constructor(t){super("rKt"),this.Ol=t}},E8=class extends d{constructor(t){super("updateadbreak"),this.adBreak=t}},b8=class extends ${get so(){return this.Oa||(this.Oa=function(t){let i;const e={get startTime(){return t.Fm},get endTime(){return t.Ym},get duration(){return t.lt},get ads(){return t.Pc.so},get skipOffset(){return t.MYt},set skipOffset(i){t.MYt=i},addEventListener(t,e){i.dn(t,e)},removeEventListener(t,e){i.hn(t,e)}};return i=new na(t,e),e}(this)),this.Oa}get Fm(){return this.$m}get Ym(){return this.KL?this.$m+this.KL:void 0}Xai(t){this.KL=t-this.Fm;for(const i of this.Pc.Ru)i.Fm>t&&this.Pc.wm(i);this.jo(new S8(this))}get lt(){return this.KL}get net(){const t=this.Ym;return oe(t)?new re([this.Fm,t]):re.ZB()}get Pc(){return this.Sc}get Zai(){return this.Kai}get ao(){return this.uo}get MYt(){return this.sni?-1:this.TYt}set MYt(t){this.sni||(this.TYt=t)}pgt(t){return t>=this.Fm&&(Go(this.lt)||t<=this.Fm+this.lt)}Jai(t){return-1!==this.MYt&&(!!oe(this.Ym)&&t-this.Fm>=this.MYt)}uT(){this.Sc.Ru.forEach((t=>t.uT())),this.jo(new D8(this))}$ai(t){const i=oe(this.Ym)&&t>=this.Ym,e=this.Fm<=t&&!i&&!this.ao,s=this.ao&&this.Ym&&t>=this.Ym;e&&(this.uo=!0,this.jo(new y8(this,this.Fm))),this.Sc.Ru.forEach((i=>i.$ai(t))),s&&(this.Kai=!0,this.uo=!1,this.jo(new T8(this,this.Ym)))}constructor(t,i,e,s,n){super(),this.$m=t,this.KL=i,this.Sc=e,this.sni=s,this.uo=!1,this.Kai=!1,this.TYt=n}};r(),r();var L8=class extends Js{Qh(){return new k8(this.eXt.so)}constructor(t,i){super("HZt"),this.eXt=t,this.Ay=i}},k8=class extends d{constructor(t){super("adbegin"),this.ad=t}};r();var x8=class extends Js{Qh(){return new C8(this.eXt.so)}constructor(t,i){super("eKt"),this.eXt=t,this.Ay=i}},C8=class extends d{constructor(t){super("adend"),this.ad=t}};r(),r();var O8=class extends Js{Qh(){return new j8(this.eXt.so)}constructor(t){super("tui"),this.eXt=t}},j8=class extends d{constructor(t){super("removead"),this.ad=t}},Zr=class extends E0{v0t(t){}M0t(t){this.jo(new O8(t))}constructor(){super()}};r();var z8=class extends Js{Qh(){return new P8(this.eXt.so)}constructor(t){super("ZZt"),this.eXt=t}},P8=class extends d{constructor(t){super("adfirstquartile"),this.ad=t}},B8=class extends Js{Qh(){return new R8(this.eXt.so)}constructor(t){super("KZt"),this.eXt=t}},R8=class extends d{constructor(t){super("admidpoint"),this.ad=t}},U8=class extends Js{Qh(){return new Q8(this.eXt.so)}constructor(t){super("JZt"),this.eXt=t}},Q8=class extends d{constructor(t){super("adthirdquartile"),this.ad=t}},F8=class extends Js{Qh(){return new Y8(this.eXt.so)}constructor(t){super("iui"),this.eXt=t}},Y8=class extends d{constructor(t){super("adcomplete"),this.ad=t}};r();var G8=class t extends ${static eui(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.eui(i,e))),e.extensions,e.fw_parameters,e.events,void 0)}static sui(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.sui(i,e))),e.extensions,e.fw_parameters,void 0,e.ad_id)}get so(){return this.Oa||(this.Oa=function(t){let i;const e={get apiFramework(){return t.jFt},get companions(){return t.DFt.so},get creative(){return t.nui},get duration(){return t.lt},get endTime(){return t.Ym},get events(){return t.rY},get extensions(){return t.rui},get freeWheelParameters(){return t.hui},get height(){return t.Mi},get mimeType(){return t.nY},get startTime(){return t.Fm},get width(){return t.Ti},addEventListener(t,e){i.dn(t,e)},removeEventListener(t,e){i.hn(t,e)}};return i=new na(t,e),e}(this)),this.Oa}get Fm(){return this.$m}get Ym(){return this.$m+this.KL}get lt(){return this.KL}get jFt(){return this.zFt}get nui(){return this.oui}get nY(){return this.mY}get Ti(){return this.vk}get Mi(){return this.pk}get rY(){return this.gR}get DFt(){return this.IFt}get rui(){return this.aui}get hui(){return this.uui}get ao(){return this.uo}get Eai(){var t;return null!=(t=this.gR.clickthroughs)?t:[]}$ai(t){const i=this.Fm<=t&&t<this.Ym,e=i&&!this.ao,s=!i&&this.ao;e&&(this.cui=!1,this.lui=!1,this.dui=!1,this.fui=!1,this.uo=!0,this.jo(new L8(this,this.Fm))),s&&(this.uo=!1,this.jo(new x8(this,this.Ym)))}vai(t){const i=(t-this.Fm)/this.lt;!this.cui&&i>=.25&&(this.cui=!0,this.jo(new z8(this))),!this.lui&&i>=.5&&(this.lui=!0,this.jo(new B8(this))),!this.dui&&i>=.75&&(this.dui=!0,this.jo(new U8(this))),!this.fui&&i>=.9999&&(this.fui=!0,this.jo(new F8(this)))}uT(){this.cui=!0,this.lui=!0,this.dui=!0,this.fui=!0}ln(){this.hn("HZt",this._ui),this.hn("eKt",this.gui)}constructor(t,i,e,s,n,r,h,o,a=[],u={},c={},l){super(),this.$m=t,this.KL=i,this.zFt=e,this.oui=s,this.mY=n,this.vk=r,this.pk=h,this.aui=a,this.uui=u,this.gR=c,this.lYt=l,this.IFt=new Zr,this.uo=!1,this.cui=!1,this.lui=!1,this.dui=!1,this.fui=!1,this._ui=()=>this.vai(this.$m),this.gui=()=>this.vai(this.Ym),this.IFt.m0t(o),this.dn("HZt",this._ui),this.dn("eKt",this.gui)}};r(),r();var W8=class extends Js{Qh(){return new V8(this.Ol.so)}constructor(t){super("hZt"),this.Ol=t}},V8=class extends d{constructor(t){super("addadbreak"),this.adBreak=t}};r();var H8,q8,X8,Z8=class extends Js{Qh(){return new K8(this.Ol.so)}constructor(t){super("oZt"),this.Ol=t}},K8=class extends d{constructor(t){super("removeadbreak"),this.adBreak=t}},J8=class extends E0{v0t(t){this.jo(new W8(t))}M0t(t){this.jo(new Z8(t))}constructor(){super()}},$8=class{get so(){return this.Oa||(this.Oa=function(t){return{get adBreaks(){return t.cZt.so},get currentAdBreak(){if(t.wQt)return t.wQt.so},get currentAds(){return t.wQt?t.wQt.Pc.so:(new Zr).so},skip(){t.uT()}}}(this)),this.Oa}get cZt(){return this.GZt}get wQt(){return xe(this.GZt.Ru,(t=>t.ao))}get gQt(){return this.wQt?this.wQt.Pc.Ru.filter((t=>t.ao)):[]}get wui(){if(0===this.cZt.L||0===this.Aui.dg().length)return;const t=this.Aui.dg().end(this.Aui.dg().length-1);return xe(this.cZt.Ru,(i=>i.pgt(t)))}get Mai(){return this.vui}mai(t){if(0===t.length)return;const i=re.gn(t);for(const t of this.GZt.Ru.slice())oe(t.Ym)&&i.yn(0)>t.Ym&&this.GZt.wm(t)}gai(t){const i=!function(t){return oe(t.breakOffsets)}(t),e=i?this.sai.Pai:0;for(const s of t.breaks){if(0===s.ads.length)continue;let t=s.timeOffset+e;const n=new Zr;let r=0;for(const e of s.ads){const s=i?G8.sui(t,e):G8.eui(t,e);n.gm(s),t+=s.lt,r+=s.lt}const h=s.timeOffset+e,o=i?void 0:s.duration,a=new b8(h,o,n,i,this.mui);i&&this.pui.push({gFt:a,MDt:h+r}),this.GZt.gm(a)}}yui(t){const i=this.wui;i&&i.Xai(t+this.sai.Pai)}Aai(t){this.Mui=t,this.GZt.Ru.forEach((i=>i.$ai(t)))}uT(){const t=this.Mui,i=this.wQt;t&&i&&i.Jai(t)&&i.uT()}Tai(t,i){let e=[];for(const s of this.cZt.Ru)!s.Zai&&s.Fm>=t&&s.Fm<i&&e.push(s);return e}ln(){this.Aui.hn("timeupdate",this.Tui),this.sai.hn("Oai",this.Nui)}Gn(){for(const t of this.cZt.Ru){for(const i of t.Pc.Ru)i.Uo();t.Uo()}this.cZt.tL(),this.Mui=void 0,this.pui=[]}constructor(t,i,e,s){this.pui=[],this.Nui=t=>{t.UI.ads&&this.gai(t.UI.ads),t.UI.currentBreakEnd&&this.yui(t.UI.currentBreakEnd)},this.Tui=t=>{if(0===this.pui.length||0===this.Aui.dg().length)return;const i=this.Aui.dg().end(this.Aui.dg().length-1);for(const t of this.pui.slice())oe(t.gFt.lt)?Hc(this.pui,t):t.MDt<i&&(t.gFt.Xai(t.MDt),Hc(this.pui,t))},this.Aui=t,this.sai=i,this.GZt=new J8,this.mui=e,this.vui=s,t.dn("timeupdate",this.Tui),this.sai.dn("Oai",this.Nui)}};r(),r(),r(),function(t){t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.G=1]="G",t[t.PG=2]="PG",t[t.PG_13=3]="PG_13",t[t.R=4]="R",t[t.NC_17=5]="NC_17",t[t.X=6]="X",t[t.NOT_RATED=7]="NOT_RATED"}(H8||(H8={})),function(t){t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.TV_Y=1]="TV_Y",t[t.TV_Y7=2]="TV_Y7",t[t.TV_G=3]="TV_G",t[t.TV_PG=4]="TV_PG",t[t.TV_14=5]="TV_14",t[t.TV_MA=6]="TV_MA",t[t.NOT_RATED=7]="NOT_RATED"}(q8||(q8={})),function(t){t[t.ADULT_LANGUAGE=1]="ADULT_LANGUAGE",t[t.SEXUAL_SITUATIONS=2]="SEXUAL_SITUATIONS",t[t.VIOLENCE=4]="VIOLENCE",t[t.DRUGS=8]="DRUGS"}(X8||(X8={}));var t9=class t{static Dui(i,e,s){const n=new Fc(i.rating_flags);return new t(e,s,i.duration,Boolean(i.audio_only),i.boundary_details,Boolean(i.error),i.tv_rating,i.max_slice,i.thumb_prefix,i.slice_dur,i.movie_rating,i.owner,i.meta,i.rates,i.thumbs,i.poster_url,i.default_poster_url,i.desc,n.Cm(1),n.Cm(2),n.Cm(4),n.Cm(8),i.external_id,Boolean(i.is_ad),i.asset)}get so(){return this.Oa||(this.Oa=function(t){return{startTime:t.Fm,endTime:t.Ym,duration:t.lt,audioOnly:t.Iui,boundaryDetails:t.Sui,error:t.dt,tvRating:t.Eui,maxSlice:t.bui,thumbPrefix:t.Lui,sliceDuration:t.kui,movieRating:t.xui,ownerId:t.Cui,metadata:t.hI,rates:t.Oui,thumbnailResolutions:t.jui,posterUrl:t.zui,defaultPosterUrl:t.Pui,description:t.dN,hasAdultLanguage:t.Bui,hasSexualSituations:t.Rui,hasViolence:t.Uui,hasDrugSituations:t.Qui,externalId:t.Fui,isAd:t.Yui,assetId:t.Gui}}(this)),this.Oa}constructor(t,i,e,s,n,r,h,o,a,u,c,l,d,f,_,g,w,A,v,m,p,y,M,T,N){this.Fm=t,this.Ym=i,this.lt=e,this.Iui=s,this.Sui=n,this.dt=r,this.Eui=h,this.bui=o,this.Lui=a,this.kui=u,this.xui=c,this.Cui=l,this.hI=d,this.Oui=f,this.jui=_,this.zui=g,this.Pui=w,this.dN=A,this.Bui=v,this.Rui=m,this.Uui=p,this.Qui=y,this.Fui=M,this.Yui=T,this.Gui=N}};var i9=Ze({duration:Fr,offset:Fr}),e9=Ze({c3:i9}),s9=Ze({c7:i9}),n9=Ze({halftime:i9}),r9=St(PD(q8)),h9=St(PD(H8)),o9=Ze({width:rl($e,Fr),prefix:Ni,bw:Fr,bh:Fr,height:rl($e,Fr)}),a9=Ze({audio_only:Fr,boundary_details:rl($e,di(rl(e9,s9,n9))),error:Fr,tv_rating:r9,max_slice:Fr,thumb_prefix:Ni,slice_dur:Fr,movie_rating:h9,owner:Ni,meta:OD,rates:di(Fr),thumbs:di(o9),poster_url:Ni,duration:Fr,default_poster_url:Ni,desc:Ni,rating_flags:Fr,external_id:Ni,is_ad:Fr,asset:Ni}),u9=class{async Qot(t,i,e,s){const n=function(t,i,e){if(i8.$j(i))return[c9(t,i,e)];if(di(i8).$j(i))return i.map((i=>c9(t,i,e)));if(e8.$j(i)){return(Gr(i.externalId)?i.externalId:[i.externalId]).map((s=>c9(t,"ext/"+i.userId+"/"+s,e)))}throw new _("Invalid asset id")}(t,i,s),r=n.map((t=>Sa((()=>this.Cai(t)),e)));return(await Promise.all(r)).filter(oe)}async Cai(t){const i=this.LS.BI({mS:Vt.GET,Iu:t,pS:$m.tS}),e=await i,s=await e.JM();return a9.$j(s)||a9.iz(s,"AssetInfoResponse"),s}constructor(t){this.LS=t}};function c9(t,i,e){return e?t+"/player/assetinfo/"+i+".json?pbs="+e:t+"/player/assetinfo/"+i+".json"}r(),r();var l9=class extends Js{Qh(){return new d9(this.Wl.so)}constructor(t){super("Wui"),this.Wl=t}},d9=class extends d{constructor(t){super("removeasset"),this.asset=t}};r();var f9=class extends Js{Qh(){return new _9(this.Wl.so)}constructor(t){super("Vui"),this.Wl=t}},_9=class extends d{constructor(t){super("addasset"),this.asset=t}},g9=class extends E0{gai(t,i){let e,s=0;for(const n of t){e=s+n.duration;for(const t of i)s<=t.Fm&&t.Fm<e&&(e+=t.lt||0);this.gm(t9.Dui(n,s,e)),s=e}}v0t(t){this.jo(new f9(t))}M0t(t){this.jo(new l9(t))}constructor(){super()}};r(),r();var w9=class extends Js{Qh(){return new A9(this.UI)}constructor(t){super("Hui"),this.UI=t}},A9=class extends d{constructor(t){super("preplayresponse"),this.response=t}};r();var Vi,v9=class extends Js{Qh(){return new m9(this.UI)}constructor(t){super("qui"),this.UI=t}},m9=class extends d{constructor(t){super("assetinforesponse"),this.response=t}},p9=class extends ${kai(t){t&&this.jo(new w9(Qi(t)))}_ai(t){t.forEach((t=>this.jo(new v9(t))))}get so(){return this.Oa||(this.Oa=this.Qh()),this.Oa}Qh(){let t;const i=this,e={get ads(){return i.$oi.so},get assets(){return i.tai.so},addEventListener(i,e){t.dn(i,e)},removeEventListener(i,e){t.hn(i,e)}};return t=new na(i,e),e}constructor(t,i,e){super(),this.$oi=t,this.tai=i,this.sai=e,e.dn("Oai",this.Ds),e.dn("jai",this.Ds)}},y9=class{Xui(t,i){const e=new s8(t.yO),s=new l8(t.yO),n=function(t){if(t.verizonMedia&&oe(t.verizonMedia.defaultSkipOffset)){const i=t.verizonMedia.defaultSkipOffset;return I_(i)?i:-1}return-1}(i),r=function(t){const i=t.verizonMedia?t.verizonMedia.onSeekOverAd:void 0;return function(t){if(!t)return"play-none";switch(t.toLowerCase()){case"play-all":return"play-all";case"play-none":default:return"play-none";case"play-last":return"play-last"}}(i)}(i),h=new w8(s,t),o=new A8(e,i),a=new $8(t,h,n,r),u=new u9(t.yO),c=new g9,l=new p9(a,c,h);return new G6(t,h,o,a,l,u,c)}};As((function(t){return class extends t{eai(t){super.Zh(t)}nai(t,i){return super.E9(t,i)}Iai(t){super.E_(t)}x_(){var t;return null!=(t=this.Zui.dt)?t:super.x_()}O_(){var t;return null!=(t=this.Zui.C_)?t:super.O_()}E_(t){this.Zui.E_(t)}Zh(t){this.Zui.Zh(t)}E9(t,i){return this.Zui.E9(t,i)}Qh(){const t=this.Zui.so;return Wt(super.Qh(),{get verizonMedia(){return t}})}ln(){this.Zui.ln(),super.ln()}constructor(t,i){super(t,i),this.Zui=(new y9).Xui(this,i)}}}),cs.Ha),r(),r(),r(),r(),function(t){t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error"}(Vi||(Vi={})),r();var M9=class extends f${Qh(){return Vo(this)}get sZt(){return ft.MEDIATAILOR}get Fm(){return this.$m}get rFt(){return this.YFt}constructor(t,i,e,s){super(t,i),this.YFt=s,this.$m=e}};r();var T9=class extends e${get dSt(){return this.Kui}get sZt(){return ft.MEDIATAILOR}constructor(t,i,e){if(super(t,t,i),e){const t=new Date(e);_D(t)&&(this.Kui=t)}}},N9=class{Ow(){this.Qo.dn(Dt._v,this.jP),this.Qo.dn(t.bh,this.ezt),this.Qo.dn(t.wh,this.szt),this.Qo.dn(t.YA,this.Ge),this.Qo.dn(t.NA,this._h),this.Qo.dn(t.XA,this.Ql),this.Qo.dn(t.ZA,this.qRt),this.Qo.dn("presentationmodechange",this.Jui)}xw(){this.Qo.hn(Dt._v,this.jP),this.Qo.hn(t.bh,this.ezt),this.Qo.hn(t.wh,this.szt),this.Qo.hn(t.YA,this.Ge),this.Qo.hn(t.NA,this._h),this.Qo.hn(t.XA,this.Ql),this.Qo.hn(t.ZA,this.qRt),this.Qo.hn("presentationmodechange",this.Jui)}get $ui(){return this.tci}get gQt(){const t=this.$ui;if(!t)return[];const i=[],e=this.ici();for(const s of t.Pc)e>=s.Fm&&this.Ghi<=s.Fm+s.lt&&i.push(s);return i}ici(){return this.Qo.S_()-this.eci}sci(){if(this.nci)return;if(this.Qo.yd()!==1/0)return void(0===this.rci.length&&(this.nci=this.hci()));const t=()=>{var t;null==(t=this.aci)||t.Hf(),this.aci=void 0,this.nci=void 0};this.aci=new Z_,this.nci=this.uci(this.aci.$f).catch(this.L1).then(t,t)}async cci(){const t=S.min(1e3*2**this.lci,3e4);try{var i;await yc(t,null==(i=this.aci)?void 0:i.$f),this.lci++}catch(t){if(Er(t))return void(this.lci=0)}this.sci()}async uci(t){for(;Pi(t),!this.Qo.V_;){const i=le.n_()-this.dci;if(i>1e4)await this.hci(t),this.dci=le.n_(),this.lci=0;else{const e=1e4-i;await yc(e,t)}}}fci(t){const i=t.dSt;if(i&&this.Qo.M_&&0===this.eci&&!this._ci&&0!==S.floor(this.Qo.dg().start(0))){const e=(this.Qo.M_.getTime()-i.getTime())/1e3,s=this.Qo.S_()-t.sSt;this.eci=s-e}}async hci(t){try{const i=await this.Qo.yO.BI({Iu:this.gci}),e=await i.Aj(t);if(0===e.avails.length)return void(0!==this.rci.length&&(this.rci=[]));if(e.avails.length===this.rci.length&&e.avails[0].startTimeInSeconds===this.rci[0].sSt)return void this.fci(this.rci[0]);const s=[];for(const t of e.avails){const i=new T9(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const e of t.ads){const t=new M9(i,Vr.wGt,e.startTimeInSeconds,e.trackingEvents);t.MZt(e.adId,e.width,e.height,e.durationInSeconds,[],e.skipoffset),i.iZt(t)}s.push(i),this.fci(i)}this.rci=Ec(s,((t,i)=>t.sSt-i.sSt))}catch(t){throw Et(t),new k("Failed to poll MediaTailor tracking events")}}wci(){var t;null==(t=this.aci)||t.i_(),this.aci=void 0,this.nci=void 0,this.dci=-1/0}Aci(){if(0===this.rci.length)return;const t=this.rci[this.rci.length-1],i=this.ici();if(t.sSt+t.JVt<this.Ghi){var e;this.tci&&(null==(e=this.Qo.Pc)||e.jo(new Oh(this.tci)),this.tci=void 0)}else{for(const t of this.rci){const e=t.sSt;if(!(e+t.JVt<this.Ghi)&&(e<=i&&e+t.JVt>this.Ghi)){var s;if(this.$ui===t)return;return this.tci=t,void(null==(s=this.Qo.Pc)||s.jo(new ct(this.tci)))}}var n;if(this.tci)null==(n=this.Qo.Pc)||n.jo(new Oh(this.tci)),this.tci=void 0}}vci(){const t=this.gQt;if(0===t.length)return;let i=[];for(const e of t){const t=e.rFt.filter((t=>ks(this.mci,t.eventType)));i=i.concat(t)}for(const t of i)this.pci(t.startTimeInSeconds)&&(t.eventType===Vi.COMPLETE&&this.yci(Vi.ENGAGED_VIEW),this.Mci(t))}Tci(t,i){return i.rFt.filter((i=>ns(i.eventType,t)))[0]}yci(t){const i=this.gQt;if(0===i.length)return;const e=this.Tci(t,i[0]);e&&this.Mci(e)}Mci(t){this.jsi(t.eventType);for(const i of t.beaconUrls){const t={mS:Vt.GET,Iu:i,AS:"",pS:$m.tS};0,Mo(this.Nci(t))}}jsi(t){let i;const e=this.gQt;switch(t){case Vi.START:i=new mc(e[e.length-1],this.Qo.S_());break;case Vi.COMPLETE:i=new Aa(e[0],this.Qo.S_());break;case Vi.FIRST_QUARTILE:i=new Fa(e[0],this.Qo.S_());break;case Vi.MID_POINT:i=new x$(e[0],this.Qo.S_());break;case Vi.THIRD_QUARTILE:i=new su(e[0],this.Qo.S_())}var s;void 0!==i&&(null==(s=this.Qo.Pc)||s.jo(i))}async Nci(t){const i=await this.Qo.yO.BI(t);i.FI}pci(t){const i=this.ici();return t>=this.Ghi&&t<i}ln(){this.xw(),this.wci(),this.Ghi=-1}constructor(t,i,e){this.dci=-1/0,this.tci=void 0,this.eci=0,this.rci=[],this.bhi=!1,this.IR=!1,this.Ghi=-1,this.aci=void 0,this.nci=void 0,this.lci=0,this.jP=()=>{this.sci()},this.szt=()=>{this.yci(Vi.RESUME)},this.ezt=()=>{this.wci(),this.yci(Vi.PAUSE)},this.Ge=()=>{this.wci(),this.Ghi=-1},this._h=()=>{this.wci()},this.Ql=()=>{-1===this.Ghi&&(this.Ghi=this.ici()),this.Aci(),this.vci(),this.Ghi=this.ici()},this.qRt=()=>{if(this.bhi!==this.Qo.Q_){this.bhi=this.Qo.Q_;const t=this.bhi?Vi.MUTE:Vi.UNMUTE;this.yci(t)}},this.Jui=()=>{if(this.IR!==this.Qo.ls()){this.IR=this.Qo.ls();const t=this.IR?Vi.FULL_SCREEN:Vi.EXIT_FULL_SCREEN;this.yci(t)}},this.L1=t=>{Er(t)||(this.yci(Vi.ERROR),Mo(this.cci()))},this.mci=[Vi.START,Vi.FIRST_QUARTILE,Vi.MID_POINT,Vi.THIRD_QUARTILE,Vi.COMPLETE,Vi.IMPRESSION,Vi.CREATIVE_VIEW],this.Qo=t,this.gci=i,this._ci=e,this.Ow()}};As((function(t){return class extends t{Zh(t){return this.Dci&&(this.Dci.ln(),this.Dci=void 0,this.ldt()),super.Zh(t)}async E9(t,i){if(!t||!function(t){return t.sources.some((t=>t.integration===sS.MEDIATAILOR))}(t))return super.E9(t,i);try{const e=await this.Ici(t,i);await super.E9(e,i)}catch(t){this.HP(new Ri(ue.MANIFEST_LOAD_ERROR,t.message,t))}}E_(t){var i;(null==(i=this.Dci)?void 0:i.$ui)||super.E_(t)}x_(){var t;return null!=(t=this.rP)?t:super.x_()}O_(){var t;return null!=(t=this.hP)?t:super.O_()}HP(t){this.rP=Yn(t),this.hP=t,this.jo(new _i(t))}ldt(){this.rP=void 0,this.hP=void 0}async Ici(t,i){let e=[];for(const s of t.sources){if(!uw(s)){e.push(s);continue}const t=s;if(!t.src){e.push(s);continue}const n=await this.Sci(t,i);Pi(i);const r=qr({},t,{integration:void 0,src:n});e.push(r)}const s=Qi(t);return s.sources=e,s}async Sci(t,i){const e=t.src||"",s=e.match(/.+?(?=\/v1\/)/);if(!s)throw new k("Could not find MediaTailor session initialization url");const n=s[0],r=Ji(e,"?ads."),h=r?{Iu:e,pS:$m.tS}:{Iu:e,mS:Vt.POST,AS:JSON.stringify({adParams:t.adParams}),pS:$m.tS},o=await Sa((()=>this.Eci(h,i)),i);let a;try{if(a=n+o.manifestUrl,!r){const t=n+o.trackingUrl,i=sw(a);this.Dci=new N9(this,t,i)}}catch(t){throw new k("Something went wrong parsing the MediaTailor session initialization response")}return a}async Eci(t,i){try{const e=await this.yO.BI(t);return await e.Aj(i)}catch(t){throw Et(t),new k("Failed to initialize MediaTailor session manifest")}}ln(){this.Dci&&(this.Dci.ln(),this.Dci=void 0),this.ldt(),super.ln()}constructor(t,i){super(t,i),this.Dci=void 0,this.rP=void 0,this.hP=void 0}}}),cs.Ha);export{r as a,le as b,li as c,oe as d,Gr as e,Uo as f,ji as g,Xi as h,et as i,fP as j,rs as k,UT as l,Nn as m,QT as n,FT as o,VT as p,HT as q,vP as r,mP as s,qr as t,Ji as u,qg as v,Ec as w,pi as x,de as y,xe as z,Hc as A,ks as B,sr as C,i as D,d as E,ue as F,ju as G,t as H,fg as I,Wt as J,Xc as K,_g as L,Uc as M,ka as N,Lw as O,gu as P,al as Q,Da as R,ra as S,jm as T,Fm as U,he as V,tc as W,cs as X,As as Y,ij as Z,Fo as _,Qe as $,re as aa,_c as ba,OI as ca,jI as da,mu as ea,PI as fa,Zo as ga,wS as ha,Xh as ia,yt as ja,pE as ka,SE as la,kE as ma,xE as na,CE as oa,jE as pa,bn as qa,AC as ra,vC as sa,mC as ta,yC as ua,MC as va,TC as wa,YC as xa,GC as ya,WC as za,VC as Aa,Ir as Ba,VO as Ca,HO as Da,nj as Ea,fj as Fa,_j as Ga,gj as Ha,wj as Ia,vR as Ja,mR as Ka,pR as La,yR as Ma,AG as Na,vG as Oa,zK as Pa,ft as Qa,u0 as Ra,Ut as Sa,S3 as Ta,A5 as Ua,M5 as Va,m8 as Wa};