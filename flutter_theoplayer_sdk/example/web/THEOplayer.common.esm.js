/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 6.9.0
 Created: 2024-01-30T10:59:47.754Z
 */
var Nl,Dl,Il,El,Ll,Ol,zl,Wr,Pl,Bl,Rl,Ul,Ql,Fl,Yl,Gl,Vl,Wl,Hl,ql,Xl,Zl,Kl,Jl,$l,td,f,id,xh,ed,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==s?s:"undefined"!=typeof global?global:this,s=a.window,h=a.document,sd=a.location,nd=a.navigator,u=a.setTimeout,c=a.clearTimeout,v=a.setInterval,m=a.clearInterval,b=a.Error,k=a.TypeError,_=(a.SyntaxError,a.Object),x=a.Math,C=a.parseInt,S=a.parseFloat,j=a.isNaN,T=a.Uint8Array,rd=a.Worker,hd=(a.WorkerGlobalScope,a.XMLHttpRequest),od=_.create,ad=_.defineProperty,ud=_.getOwnPropertyDescriptor,cd=_.getOwnPropertyNames,ld=_.getPrototypeOf,dd=_.prototype.hasOwnProperty,fd=(t,i)=>()=>(t&&(i=t(t=0)),i),to=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),Zh=(t,i,e)=>(e=null!=t?od(ld(t)):{},((t,i,e,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let n of cd(i))dd.call(t,n)||n===e||ad(t,n,{get:()=>i[n],enumerable:!(s=ud(i,n))||s.enumerable});return t})(!i&&t&&t.__esModule?e:ad(e,"default",{value:t,enumerable:!0}),t));function _d(){}function st(t){return"object"==typeof t&&null!==t||"function"==typeof t}function gd(t){return t.slice()}function wd(t,i,e,s,n){new T(t).set(new T(e,s,n),i)}function Ad(t){return!1!==function(t){if("number"!=typeof t)return!1;if(Dl(t))return!1;if(t<0)return!1;return!0}(t)&&t!==1/0}function vd(t,i,e){if("function"!=typeof t)throw new k("Argument is not a function");return Function.prototype.apply.call(t,i,e)}function md(t,i,e,s){var n=t[i];if(void 0!==n){if("function"!=typeof n)throw new k(n+" is not a method");switch(e){case 0:return function(){return yd(n,t,s)};case 1:return function(i){var e=[i].concat(s);return yd(n,t,e)}}}return function(){return Ui(void 0)}}function pd(t,i,e){var s=t[i];if(void 0!==s)return vd(s,t,e)}function yd(t,i,e){try{return Ui(vd(t,i,e))}catch(t){return oh(t)}}function po(t){if(t=Number(t),Dl(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function Md(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new k("size property of a queuing strategy must be a function");return function(i){return t(i)}}function qc(t){return new El(t)}function Ui(t){return Ol(t)}function oh(t){return zl(t)}function Td(t,i,e){return Ll.call(t,i,e)}function Gi(t,i,e){Td(Td(t,i,e),void 0,Il)}function Nd(t,i){Gi(t,i)}function Dd(t,i){Gi(t,void 0,i)}function hh(t,i,e){return Td(t,i,e)}function Id(t){Td(t,void 0,Il)}function Xe(t,i,e){var s=null;!0===e&&(s=_.prototype);var n=_.create(s);return n.value=t,n.done=i,n}function Sd(t,i){t.ul=!0,t.hd=i,i.Md=t,"readable"===i.ba?Ld(t):"closed"===i.ba?function(t){Ld(t),xd(t)}(t):kd(t,i.Td)}function Ed(t,i){return qr(t.hd,i)}function bd(t){"readable"===t.hd.ba?Cd(t,new k("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,i){kd(t,i)}(t,new k("Reader was released and can no longer be used to monitor the stream's closedness")),t.hd.Md=void 0,t.hd=void 0}function _o(t){return new k("Cannot "+t+" a stream using a released reader")}function Ld(t){t.Nd=qc((function(i,e){t.Dd=i,t.Id=e}))}function kd(t,i){Ld(t),Cd(t,i)}function Cd(t,i){Id(t.Nd),t.Id(i),t.Dd=void 0,t.Id=void 0}function xd(t){t.Dd(void 0),t.Dd=void 0,t.Id=void 0}function Od(t,i){void 0===i&&(i=!1);var e=new Rl(t);return e.ul=i,e}function jd(t){return qc((function(i,e){var s={Sd:i,Ed:e};t.Md.Ld.push(s)}))}function zd(t,i,e){var s=t.Md;s.Ld.shift().Sd(Xe(i,e,s.ul))}function Pd(t){return t.Md.Ld.length}function Bd(t){var i=t.Md;return void 0!==i&&!!fr(i)}function fr(t){return!!st(t)&&!!_.prototype.hasOwnProperty.call(t,"Ld")}function Rd(t){var i=t.hd;return i.Cd=!0,"closed"===i.ba?Ui(Xe(void 0,!0,t.ul)):"errored"===i.ba?oh(i.Td):i.Od[Bl]()}function Ud(t){return new k("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}function Qd(t){return!!st(t)&&!!_.prototype.hasOwnProperty.call(t,"jd")}function Fd(t){return new k("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function Yd(t){var i=t.zd.shift();return t.Pd-=i.size,t.Pd<0&&(t.Pd=0),i.value}function Gd(t,i,e){if(!Ad(e=Number(e)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.zd.push({value:i,size:e}),t.Pd+=e}function Vd(t){t.zd=new Wr,t.Pd=0}function Wd(t){return new Wl(t)}function Hd(t){t.ba="writable",t.Td=void 0,t.Bd=void 0,t.Rd=void 0,t.Ud=new Wr,t.Qd=void 0,t.Fd=void 0,t.Yd=void 0,t.Gd=void 0,t.Vd=!1}function Lr(t){return!!st(t)&&!!_.prototype.hasOwnProperty.call(t,"Rd")}function xo(t){return void 0!==t.Bd}function qd(t,i){var e=t.ba;if("closed"===e||"errored"===e)return Ui(void 0);if(void 0!==t.Gd)return t.Gd.Wd;var s=!1;"erroring"===e&&(s=!0,i=void 0);var n=qc((function(e,n){t.Gd={Wd:void 0,Sd:e,Ed:n,Hd:i,qd:s}}));return t.Gd.Wd=n,!1===s&&Kd(t,i),n}function Xd(t){var i=t.ba;if("closed"===i||"errored"===i)return oh(new k("The stream (in "+i+" state) is not in the writable state and cannot be closed"));var e=qc((function(i,e){var s={Sd:i,Ed:e};t.Fd=s})),s=t.Bd;return void 0!==s&&!0===t.Vd&&"writable"===i&&Df(s),function(t){Gd(t,"close",0),cf(t)}(t.Rd),e}function Zd(t,i){"writable"!==t.ba?Jd(t):Kd(t,i)}function Kd(t,i){var e=t.Rd;t.ba="erroring",t.Td=i;var s=t.Bd;void 0!==s&&nf(s,i),!1===function(t){if(void 0===t.Qd&&void 0===t.Yd)return!1;return!0}(t)&&!0===e.Xd&&Jd(t)}function Jd(t){t.ba="errored",t.Rd[Gl]();var i=t.Td;if(t.Ud.forEach((function(t){t.Ed(i)})),t.Ud=new Wr,void 0!==t.Gd){var e=t.Gd;if(t.Gd=void 0,!0===e.qd)return e.Ed(i),void $d(t);Gi(t.Rd[Yl](e.Hd),(function(){e.Sd(),$d(t)}),(function(i){e.Ed(i),$d(t)}))}else $d(t)}function eo(t){return void 0!==t.Fd||void 0!==t.Yd}function $d(t){void 0!==t.Fd&&(t.Fd.Ed(t.Td),t.Fd=void 0);var i=t.Bd;void 0!==i&&mf(i,t.Td)}function tf(t,i){var e=t.Bd;void 0!==e&&i!==t.Vd&&(!0===i?function(t){yf(t)}(e):Df(e)),t.Vd=i}function pr(t){return!!st(t)&&!!_.prototype.hasOwnProperty.call(t,"Zd")}function ef(t){return Xd(t.Zd)}function sf(t,i){"pending"===t.Kd?mf(t,i):function(t,i){vf(t,i)}(t,i)}function nf(t,i){"pending"===t.Jd?Nf(t,i):function(t,i){Mf(t,i)}(t,i)}function rf(t){var i=t.Zd,e=new k("Writer was released and can no longer be used to monitor the stream's closedness");nf(t,e),sf(t,e),i.Bd=void 0,t.Zd=void 0}function hf(t,i){var e=t.Zd,s=e.Rd,n=function(t,i){try{return t.$d(i)}catch(i){return lf(t,i),1}}(s,i);if(e!==t.Zd)return oh(wf("write to"));var r=e.ba;if("errored"===r)return oh(e.Td);if(!0===eo(e)||"closed"===r)return oh(new k("The stream is closing or closed and cannot be written to"));if("erroring"===r)return oh(e.Td);var h=function(t){return qc((function(i,e){var s={Sd:i,Ed:e};t.Ud.push(s)}))}(e);return function(t,i,e){var s={chunk:i};try{Gd(t,s,e)}catch(i){return void lf(t,i)}var n=t.tf;if(!1===eo(n)&&"writable"===n.ba){tf(n,df(t))}cf(t)}(s,i,n),h}function of(t,i,e,s,n,r,h,o){i.tf=t,t.Rd=i,i.zd=void 0,i.Pd=void 0,Vd(i),i.Xd=!1,i.$d=o,i.if=h,i.ef=s,i.sf=n,i.nf=r;var a=df(i);tf(t,a),Gi(Ui(e()),(function(){i.Xd=!0,cf(i)}),(function(e){i.Xd=!0,Zd(t,e)}))}function af(t){t.ef=void 0,t.sf=void 0,t.nf=void 0,t.$d=void 0}function uf(t){return t.if-t.Pd}function cf(t){var i=t.tf;if(!1!==t.Xd&&void 0===i.Qd)if("erroring"!==i.ba){if(0!==t.zd.length){var e=function(t){return t.zd.peek().value}(t);"close"===e?function(t){var i=t.tf;(function(t){t.Yd=t.Fd,t.Fd=void 0})(i),Yd(t);var e=t.sf();af(t),Gi(e,(function(){!function(t){t.Yd.Sd(void 0),t.Yd=void 0,"erroring"===t.ba&&(t.Td=void 0,void 0!==t.Gd&&(t.Gd.Sd(),t.Gd=void 0)),t.ba="closed";var i=t.Bd;void 0!==i&&pf(i)}(i)}),(function(t){!function(t,i){t.Yd.Ed(i),t.Yd=void 0,void 0!==t.Gd&&(t.Gd.Ed(i),t.Gd=void 0),Zd(t,i)}(i,t)}))}(t):function(t,i){var e=t.tf;!function(t){t.Qd=t.Ud.shift()}(e);var s=t.ef(i);Gi(s,(function(){!function(t){t.Qd.Sd(void 0),t.Qd=void 0}(e);var i=e.ba;if(Yd(t),!1===eo(e)&&"writable"===i){var s=df(t);tf(e,s)}cf(t)}),(function(i){"writable"===e.ba&&af(t),function(t,i){t.Qd.Ed(i),t.Qd=void 0,Zd(t,i)}(e,i)}))}(t,e.chunk)}}else Jd(i)}function lf(t,i){"writable"===t.tf.ba&&ff(t,i)}function df(t){return uf(t)<=0}function ff(t,i){var e=t.tf;af(t),Kd(e,i)}function _f(t){return new k("WritableStream.prototype."+t+" can only be used on a WritableStream")}function gf(t){return new k("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function wf(t){return new k("Cannot "+t+" a stream using a released writer")}function Af(t){t.Nd=qc((function(i,e){t.Dd=i,t.Id=e,t.Kd="pending"}))}function vf(t,i){Af(t),mf(t,i)}function mf(t,i){Id(t.Nd),t.Id(i),t.Dd=void 0,t.Id=void 0,t.Kd="rejected"}function pf(t){t.Dd(void 0),t.Dd=void 0,t.Id=void 0,t.Kd="resolved"}function yf(t){t.rf=qc((function(i,e){t.hf=i,t.uf=e})),t.Jd="pending"}function Mf(t,i){yf(t),Nf(t,i)}function Tf(t){yf(t),Df(t)}function Nf(t,i){Id(t.rf),t.uf(i),t.hf=void 0,t.uf=void 0,t.Jd="rejected"}function Df(t){t.hf(void 0),t.hf=void 0,t.uf=void 0,t.Jd="fulfilled"}function If(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}function Sf(t,i,e,s,n,r){var h=Od(t),o=Wd(i);t.Cd=!0;var a=!1,u=Ui(void 0);return qc((function(c,l){var d,f,_,g;if(void 0!==r){if(d=function(){var e=new Xl("Aborted","AbortError"),r=[];!1===s&&r.push((function(){return"writable"===i.ba?qd(i,e):Ui(void 0)})),!1===n&&r.push((function(){return"readable"===t.ba?qr(t,e):Ui(void 0)})),m((function(){return Promise.all(r.map((function(t){return t()})))}),!0,e)},!0===r.aborted)return void d();r.addEventListener("abort",d)}if(v(t,h.Nd,(function(t){!1===s?m((function(){return qd(i,t)}),!0,t):p(!0,t)})),v(i,o.Nd,(function(i){!1===n?m((function(){return qr(t,i)}),!0,i):p(!0,i)})),f=t,_=h.Nd,g=function(){!1===e?m((function(){return function(t){var i=t.Zd,e=i.ba;return!0===eo(i)||"closed"===e?Ui(void 0):"errored"===e?oh(i.Td):ef(t)}(o)})):p()},"closed"===f.ba?g():Nd(_,g),!0===eo(i)||"closed"===i.ba){var w=new k("the destination writable stream closed before all data could be piped to it");!1===n?m((function(){return qr(t,w)}),!0,w):p(!0,w)}function A(){var t=u;return Td(u,(function(){return t!==u?A():void 0}))}function v(t,i,e){"errored"===t.ba?e(t.Td):Dd(i,e)}function m(t,e,s){function n(){Gi(t(),(function(){return y(e,s)}),(function(t){return y(!0,t)}))}!0!==a&&(a=!0,"writable"===i.ba&&!1===eo(i)?Nd(A(),n):n())}function p(t,e){!0!==a&&(a=!0,"writable"===i.ba&&!1===eo(i)?Nd(A(),(function(){return y(t,e)})):y(t,e))}function y(t,i){rf(o),bd(h),void 0!==r&&r.removeEventListener("abort",d),t?l(i):c(void 0)}Id(qc((function(t,i){!function e(s){s?t():Td(!0===a?Ui(!0):Td(o.rf,(function(){return Td(Rd(h),(function(t){return!0===t.done||(u=Td(hf(o,t.value),void 0,_d),!1)}))})),e,i)}(!1)})))}))}function Ef(t){return!!st(t)&&!!_.prototype.hasOwnProperty.call(t,"cf")}function bf(t){!1!==Lf(t)&&(!0!==t.lf?(t.lf=!0,Gi(t.df(),(function(){t.lf=!1,!0===t._f&&(t._f=!1,bf(t))}),(function(i){Of(t,i)}))):t._f=!0)}function Lf(t){var i=t.cf;return!1!==$o(t)&&(!1!==t.Xd&&(!0===u_(i)&&Pd(i)>0||jf(t)>0))}function kf(t){t.df=void 0,t.gf=void 0,t.$d=void 0}function Cf(t){var i=t.cf;t.wf=!0,0===t.zd.length&&(kf(t),ul(i))}function xf(t,i){var e=t.cf;if(!0===u_(e)&&Pd(e)>0)zd(e,i,!1);else{var s=void 0;try{s=t.$d(i)}catch(i){throw Of(t,i),i}try{Gd(t,i,s)}catch(i){throw Of(t,i),i}}bf(t)}function Of(t,i){var e=t.cf;"readable"===e.ba&&(Vd(t),kf(t),c_(e,i))}function jf(t){var i=t.cf.ba;return"errored"===i?null:"closed"===i?0:t.if-t.Pd}function $o(t){var i=t.cf.ba;return!1===t.wf&&"readable"===i}function zf(t,i,e,s,n,r,h){i.cf=t,i.zd=void 0,i.Pd=void 0,Vd(i),i.Xd=!1,i.wf=!1,i._f=!1,i.lf=!1,i.$d=h,i.if=r,i.df=s,i.gf=n,t.Od=i,Gi(Ui(e()),(function(){i.Xd=!0,bf(i)}),(function(t){Of(i,t)}))}function Pf(t){return new k("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}function Bf(t){return!!st(t)&&!!_.prototype.hasOwnProperty.call(t,"Af")}function Rf(t){return!!st(t)&&!!_.prototype.hasOwnProperty.call(t,"vf")}function nh(t){var i=function(t){var i=t.Af;if("readable"!==i.ba)return!1;if(!0===t.wf)return!1;if(!1===t.Xd)return!1;if(!0===Bd(i)&&Pd(i)>0)return!0;if(!0===s_(i)&&e_(i)>0)return!0;var e=Kf(t);if(e>0)return!0;return!1}(t);!1!==i&&(!0!==t.lf?(t.lf=!0,Gi(t.df(),(function(){t.lf=!1,!0===t._f&&(t._f=!1,nh(t))}),(function(i){vl(t,i)}))):t._f=!0)}function Uf(t,i){var e=!1;"closed"===t.ba&&(e=!0);var s=Qf(i);"default"===i.readerType?zd(t,s,e):function(t,i,e){var s=t.Md,n=s.mf.shift();n.Sd(Xe(i,e,s.ul))}(t,s,e)}function Qf(t){var i=t.bytesFilled,e=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,i/e)}function Ff(t,i,e,s){t.zd.push({buffer:i,byteOffset:e,byteLength:s}),t.Pd+=s}function Yf(t,i){var e=i.elementSize,s=i.bytesFilled-i.bytesFilled%e,n=x.min(t.Pd,i.byteLength-i.bytesFilled),r=i.bytesFilled+n,h=r-r%e,o=n,a=!1;h>s&&(o=h-i.bytesFilled,a=!0);for(var u=t.zd;o>0;){var c=u.peek(),l=x.min(o,c.byteLength),d=i.byteOffset+i.bytesFilled;wd(i.buffer,d,c.buffer,c.byteOffset,l),c.byteLength===l?u.shift():(c.byteOffset+=l,c.byteLength-=l),t.Pd-=l,Gf(t,l,i),o-=l}return a}function Gf(t,i,e){Wf(t),e.bytesFilled+=i}function Vf(t){0===t.Pd&&!0===t.wf?(Zf(t),ul(t.Af)):nh(t)}function Wf(t){void 0!==t.pf&&(t.pf.vf=void 0,t.pf.yf=void 0,t.pf=void 0)}function Hf(t){for(;t.Mf.length>0;){if(0===t.Pd)return;var i=t.Mf.peek();!0===Yf(t,i)&&(Xf(t),Uf(t.Af,i))}}function qf(t,i){var e=t.Mf.peek();if("closed"===t.Af.ba){if(0!==i)throw new k("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,i){i.buffer=i.buffer;var e=t.Af;if(!0===s_(e))for(;e_(e)>0;)Uf(e,Xf(t))}(t,e)}else!function(t,i,e){if(e.bytesFilled+i>e.byteLength)throw new RangeError("bytesWritten out of range");if(Gf(t,i,e),!(e.bytesFilled<e.elementSize)){Xf(t);var s=e.bytesFilled%e.elementSize;if(s>0){var n=e.byteOffset+e.bytesFilled,r=e.buffer.slice(n-s,n);Ff(t,r,0,r.byteLength)}e.buffer=e.buffer,e.bytesFilled-=s,Uf(t.Af,e),Hf(t)}}(t,i,e);nh(t)}function Xf(t){var i=t.Mf.shift();return Wf(t),i}function Zf(t){t.df=void 0,t.gf=void 0}function vl(t,i){var e=t.Af;"readable"===e.ba&&(!function(t){Wf(t),t.Mf=new Wr}(t),Vd(t),Zf(t),c_(e,i))}function Kf(t){var i=t.Af.ba;return"errored"===i?null:"closed"===i?0:t.if-t.Pd}function Jf(t,i,e){var s=_.create($l.prototype);var n=md(i,"pull",0,[s]),r=md(i,"cancel",1,[]),h=i.autoAllocateChunkSize;if(void 0!==h&&(h=Number(h),!1===Kl(h)||h<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,i,e,s,n,r,h){i.Af=t,i._f=!1,i.lf=!1,i.pf=void 0,i.zd=i.Pd=void 0,Vd(i),i.wf=!1,i.Xd=!1,i.if=po(r),i.df=s,i.gf=n,i.Tf=h,i.Mf=new Wr,t.Od=i,Gi(Ui(e()),(function(){i.Xd=!0,nh(i)}),(function(t){vl(i,t)}))}(t,s,(function(){return pd(i,"start",[s])}),n,r,e,h)}function $f(t){return new k("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function t_(t){return new k("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function i_(t){return qc((function(i,e){var s={Sd:i,Ed:e};t.Md.mf.push(s)}))}function e_(t){return t.Md.mf.length}function s_(t){var i=t.Md;return void 0!==i&&!!n_(i)}function n_(t){return!!st(t)&&!!_.prototype.hasOwnProperty.call(t,"mf")}function r_(t,i){var e=t.hd;return e.Cd=!0,"errored"===e.ba?oh(e.Td):function(t,i){var e=t.Af,s=1;i.constructor!==DataView&&(s=i.constructor.BYTES_PER_ELEMENT);var n=i.constructor,r={buffer:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.Mf.length>0)return t.Mf.push(r),i_(e);if("closed"===e.ba)return Ui(Xe(new n(r.buffer,r.byteOffset,0),!0,e.Md.ul));if(t.Pd>0){if(!0===Yf(t,r)){var h=Qf(r);return Vf(t),Ui(Xe(h,!1,e.Md.ul))}if(!0===t.wf){var o=new k("Insufficient bytes to fill elements in the given buffer");return vl(t,o),oh(o)}}t.Mf.push(r);var a=i_(e);return nh(t),a}(e.Od,i)}function h_(t){return new k("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}function o_(t,i,e,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=_.create(f.prototype);return a_(r),zf(r,_.create(Zl.prototype),t,i,e,s,n),r}function a_(t){t.ba="readable",t.Md=void 0,t.Td=void 0,t.Cd=!1}function no(t){return!!st(t)&&!!_.prototype.hasOwnProperty.call(t,"Od")}function u_(t){return void 0!==t.Md}function qr(t,i){return t.Cd=!0,"closed"===t.ba?Ui(void 0):"errored"===t.ba?oh(t.Td):(ul(t),hh(t.Od[Pl](i),_d))}function ul(t){t.ba="closed";var i=t.Md;void 0!==i&&(fr(i)&&(i.Ld.forEach((function(t){t.Sd(Xe(void 0,!0,i.ul))})),i.Ld=new Wr),xd(i))}function c_(t,i){t.ba="errored",t.Td=i;var e=t.Md;void 0!==e&&(fr(e)?(e.Ld.forEach((function(t){t.Ed(i)})),e.Ld=new Wr):(e.mf.forEach((function(t){t.Ed(i)})),e.mf=new Wr),Cd(e,i))}function wr(t){return new k("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}function l_(t,i,e,s,n,r){function h(){return i}t.Nf=function(t,i,e,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var h=_.create(Vl.prototype);return Hd(h),of(h,_.create(Hl.prototype),t,i,e,s,n,r),h}(h,(function(i){return function(t,i){var e=t.Df;if(!0===t.Vd){return hh(t.If,(function(){var s=t.Nf;if("erroring"===s.ba)throw s.Td;return m_(e,i)}))}return m_(e,i)}(t,i)}),(function(){return function(t){var i=t.Sf,e=t.Df,s=e.Ef();return A_(e),hh(s,(function(){if("errored"===i.ba)throw i.Td;var t=i.Od;!0===$o(t)&&Cf(t)}),(function(e){throw f_(t,e),i.Td}))}(t)}),(function(i){return function(t,i){return f_(t,i),Ui(void 0)}(t,i)}),e,s),t.Sf=o_(h,(function(){return function(t){return g_(t,!1),t.If}(t)}),(function(i){return __(t,i),Ui(void 0)}),n,r),t.Vd=void 0,t.If=void 0,t.bf=void 0,g_(t,!0),t.Df=void 0}function d_(t){return!!st(t)&&!!_.prototype.hasOwnProperty.call(t,"Df")}function f_(t,i){Of(t.Sf.Od,i),__(t,i)}function __(t,i){A_(t.Df),lf(t.Nf.Rd,i),!0===t.Vd&&g_(t,!1)}function g_(t,i){void 0!==t.If&&t.bf(),t.If=qc((function(i){t.bf=i})),t.Vd=i}function w_(t){return!!st(t)&&!!_.prototype.hasOwnProperty.call(t,"Lf")}function A_(t){t.kf=void 0,t.Ef=void 0}function v_(t,i){var e=t.Lf,s=e.Sf.Od;if(!1===$o(s))throw new k("Readable side is not in a state that permits enqueue");try{xf(s,i)}catch(t){throw __(e,t),e.Sf.Td}var n=function(t){return!0!==Lf(t)}(s);n!==e.Vd&&g_(e,!0)}function m_(t,i){return hh(t.kf(i),void 0,(function(i){throw f_(t.Lf,i),i}))}function p_(t){return new k("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function y_(t){return new k("TransformStream.prototype."+t+" can only be used on a TransformStream")}var le,g,Ku,M_=fd((()=>{var t;r(),Nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:function(t){return"Symbol("+t+")"},Dl=Number.isNaN||function(t){return t!=t},Il=_d,El=Promise,Ll=Promise.prototype.then,Ol=Promise.resolve.bind(El),zl=Promise.reject.bind(El),16384,Wr=function(){function t(){this.Cf=0,this.xf=0,this.Of={jf:[],zf:void 0},this.Pf=this.Of,this.Cf=0,this.xf=0}return _.defineProperty(t.prototype,"length",{get:function(){return this.xf},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var i=this.Pf,e=i;16383===i.jf.length&&(e={jf:[],zf:void 0}),i.jf.push(t),e!==i&&(this.Pf=e,i.zf=e),++this.xf},t.prototype.shift=function(){var t=this.Of,i=t,e=this.Cf,s=e+1,n=t.jf,r=n[e];return 16384===s&&(i=t.zf,s=0),--this.xf,this.Cf=s,t!==i&&(this.Of=i),n[e]=void 0,r},t.prototype.forEach=function(t){for(var i=this.Cf,e=this.Of,s=e.jf;!(i===s.length&&void 0===e.zf||i===s.length&&(i=0,0===(s=(e=e.zf).jf).length));)t(s[i]),++i},t.prototype.peek=function(){var t=this.Of,i=this.Cf;return t.jf[i]},t}(),Pl=Nl("[[CancelSteps]]"),Bl=Nl("[[PullSteps]]"),Rl=function(){function t(t){if(!1===no(t))throw new k("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===u_(t))throw new k("This stream has already been locked for exclusive reading by another reader");Sd(this,t),this.Ld=new Wr}return _.defineProperty(t.prototype,"closed",{get:function(){return fr(this)?this.Nd:oh(Ud("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return fr(this)?void 0===this.hd?oh(_o("cancel")):Ed(this,t):oh(Ud("cancel"))},t.prototype.read=function(){return fr(this)?void 0===this.hd?oh(_o("read from")):Rd(this):oh(Ud("read"))},t.prototype.releaseLock=function(){if(!fr(this))throw Ud("releaseLock");if(void 0!==this.hd){if(this.Ld.length>0)throw new k("Tried to release a reader lock when that reader has pending read() calls un-settled");bd(this)}},t}(),"symbol"==typeof Nl.asyncIterator&&((Ul={})[Nl.asyncIterator]=function(){return this},Ql=Ul,_.defineProperty(Ql,Nl.asyncIterator,{enumerable:!1})),Fl={next:function(){if(!1===Qd(this))return oh(Fd("next"));var t=this.jd;return void 0===t.hd?oh(_o("iterate")):hh(Rd(t),(function(i){var e=i.done;return e&&bd(t),Xe(i.value,e,!0)}))},return:function(t){if(!1===Qd(this))return oh(Fd("next"));var i=this.jd;if(void 0===i.hd)return oh(_o("finish iterating"));if(i.Ld.length>0)return oh(new k("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.Bf){var e=Ed(i,t);return bd(i),hh(e,(function(){return Xe(t,!0,!0)}))}return bd(i),Ui(Xe(t,!0,!0))}},void 0!==Ql&&_.setPrototypeOf(Fl,Ql),_.defineProperty(Fl,"next",{enumerable:!1}),_.defineProperty(Fl,"return",{enumerable:!1}),Yl=Nl("[[AbortSteps]]"),Gl=Nl("[[ErrorSteps]]"),Vl=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),Hd(this);var e=i.size,s=i.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=Md(e);void 0===s&&(s=1),function(t,i,e,s){var n=_.create(Hl.prototype),r=md(i,"write",1,[n]),h=md(i,"close",0,[]),o=md(i,"abort",1,[]);of(t,n,(function(){return pd(i,"start",[n])}),r,h,o,e,s)}(this,t,s=po(s),n)}return _.defineProperty(t.prototype,"locked",{get:function(){if(!1===Lr(this))throw _f("locked");return xo(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===Lr(this)?oh(_f("abort")):!0===xo(this)?oh(new k("Cannot abort a stream that already has a writer")):qd(this,t)},t.prototype.close=function(){return!1===Lr(this)?oh(_f("close")):!0===xo(this)?oh(new k("Cannot close a stream that already has a writer")):!0===eo(this)?oh(new k("Cannot close an already-closing stream")):Xd(this)},t.prototype.getWriter=function(){if(!1===Lr(this))throw _f("getWriter");return Wd(this)},t}(),Wl=function(){function t(t){if(!1===Lr(t))throw new k("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===xo(t))throw new k("This stream has already been locked for exclusive writing by another writer");this.Zd=t,t.Bd=this;var i=t.ba;if("writable"===i)!1===eo(t)&&!0===t.Vd?yf(this):Tf(this),Af(this);else if("erroring"===i)Mf(this,t.Td),Af(this);else if("closed"===i)Tf(this),function(t){Af(t),pf(t)}(this);else{var e=t.Td;Mf(this,e),vf(this,e)}}return _.defineProperty(t.prototype,"closed",{get:function(){return!1===pr(this)?oh(gf("closed")):this.Nd},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===pr(this))throw gf("desiredSize");if(void 0===this.Zd)throw wf("desiredSize");return function(t){var i=t.Zd,e=i.ba;return"errored"===e||"erroring"===e?null:"closed"===e?0:uf(i.Rd)}(this)},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"ready",{get:function(){return!1===pr(this)?oh(gf("ready")):this.rf},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===pr(this)?oh(gf("abort")):void 0===this.Zd?oh(wf("abort")):function(t,i){return qd(t.Zd,i)}(this,t)},t.prototype.close=function(){if(!1===pr(this))return oh(gf("close"));var t=this.Zd;return void 0===t?oh(wf("close")):!0===eo(t)?oh(new k("Cannot close an already-closing stream")):ef(this)},t.prototype.releaseLock=function(){if(!1===pr(this))throw gf("releaseLock");void 0!==this.Zd&&rf(this)},t.prototype.write=function(t){return!1===pr(this)?oh(gf("write")):void 0===this.Zd?oh(wf("write to")):hf(this,t)},t}(),Hl=function(){function t(){throw new k("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){return!!st(t)&&!!_.prototype.hasOwnProperty.call(t,"tf")}(this))throw new k("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.tf.ba&&ff(this,t)},t.prototype[Yl]=function(t){var i=this.nf(t);return af(this),i},t.prototype[Gl]=function(){Vd(this)},t}(),ql="undefined"!=typeof DOMException?DOMException:void 0,Xl=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}(ql)?ql:((t=function(t,i){this.message=t||"",this.name=i||"Error",b.captureStackTrace&&b.captureStackTrace(this,this.constructor)}).prototype=_.create(b.prototype),_.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),t),Zl=function(){function t(){throw new k}return _.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===Ef(this))throw Pf("desiredSize");return jf(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===Ef(this))throw Pf("close");if(!1===$o(this))throw new k("The stream is not in a state that permits close");Cf(this)},t.prototype.enqueue=function(t){if(!1===Ef(this))throw Pf("enqueue");if(!1===$o(this))throw new k("The stream is not in a state that permits enqueue");return xf(this,t)},t.prototype.error=function(t){if(!1===Ef(this))throw Pf("error");Of(this,t)},t.prototype[Pl]=function(t){Vd(this);var i=this.gf(t);return kf(this),i},t.prototype[Bl]=function(){var t=this.cf;if(this.zd.length>0){var i=Yd(this);return!0===this.wf&&0===this.zd.length?(kf(this),ul(t)):bf(this),Ui(Xe(i,!1,t.Md.ul))}var e=jd(t);return bf(this),e},t}(),Kl=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&x.floor(t)===t},Jl=function(){function t(){throw new k("ReadableStreamBYOBRequest cannot be used directly")}return _.defineProperty(t.prototype,"view",{get:function(){if(!1===Rf(this))throw $f("view");return this.yf},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===Rf(this))throw $f("respond");if(void 0===this.vf)throw new k("This BYOB request has been invalidated");this.yf.buffer,function(t,i){if(!1===Ad(i=Number(i)))throw new RangeError("bytesWritten must be a finite");qf(t,i)}(this.vf,t)},t.prototype.respondWithNewView=function(t){if(!1===Rf(this))throw $f("respond");if(void 0===this.vf)throw new k("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new k("You can only respond with array buffer views");t.buffer,function(t,i){var e=t.Mf.peek();if(e.byteOffset+e.bytesFilled!==i.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(e.byteLength!==i.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");e.buffer=i.buffer,qf(t,i.byteLength)}(this.vf,t)},t}(),$l=function(){function t(){throw new k("ReadableByteStreamController constructor cannot be used directly")}return _.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===Bf(this))throw t_("byobRequest");if(void 0===this.pf&&this.Mf.length>0){var t=this.Mf.peek(),i=new T(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),e=_.create(Jl.prototype);!function(t,i,e){t.vf=i,t.yf=e}(e,this,i),this.pf=e}return this.pf},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===Bf(this))throw t_("desiredSize");return Kf(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===Bf(this))throw t_("close");if(!0===this.wf)throw new k("The stream has already been closed; do not close it again!");var t=this.Af.ba;if("readable"!==t)throw new k("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var i=t.Af;if(t.Pd>0)t.wf=!0;else{if(t.Mf.length>0&&t.Mf.peek().bytesFilled>0){var e=new k("Insufficient bytes to fill elements in the given buffer");throw vl(t,e),e}Zf(t),ul(i)}}(this)},t.prototype.enqueue=function(t){if(!1===Bf(this))throw t_("enqueue");if(!0===this.wf)throw new k("stream is closed or draining");var i=this.Af.ba;if("readable"!==i)throw new k("The stream (in "+i+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new k("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,i){var e=t.Af,s=i.buffer,n=i.byteOffset,r=i.byteLength,h=s;!0===Bd(e)?0===Pd(e)?Ff(t,h,n,r):zd(e,new T(h,n,r),!1):!0===s_(e)?(Ff(t,h,n,r),Hf(t)):Ff(t,h,n,r),nh(t)}(this,t)},t.prototype.error=function(t){if(!1===Bf(this))throw t_("error");vl(this,t)},t.prototype[Pl]=function(t){this.Mf.length>0&&(this.Mf.peek().bytesFilled=0);Vd(this);var i=this.gf(t);return Zf(this),i},t.prototype[Bl]=function(){var t=this.Af;if(this.Pd>0){var i=this.zd.shift();this.Pd-=i.byteLength,Vf(this);var e=void 0;try{e=new T(i.buffer,i.byteOffset,i.byteLength)}catch(t){return oh(t)}return Ui(Xe(e,!1,t.Md.ul))}var s=this.Tf;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return oh(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:T,readerType:"default"};this.Mf.push(r)}var h=jd(t);return nh(this),h},t}(),td=function(){function t(t){if(!no(t))throw new k("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===Bf(t.Od))throw new k("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(u_(t))throw new k("This stream has already been locked for exclusive reading by another reader");Sd(this,t),this.mf=new Wr}return _.defineProperty(t.prototype,"closed",{get:function(){return n_(this)?this.Nd:oh(h_("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return n_(this)?void 0===this.hd?oh(_o("cancel")):Ed(this,t):oh(h_("cancel"))},t.prototype.read=function(t){return n_(this)?void 0===this.hd?oh(_o("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?oh(new k("view must have non-zero byteLength")):r_(this,t)):oh(new k("view must be an array buffer view")):oh(h_("read"))},t.prototype.releaseLock=function(){if(!n_(this))throw h_("releaseLock");if(void 0!==this.hd){if(this.mf.length>0)throw new k("Tried to release a reader lock when that reader has pending read() calls un-settled");bd(this)}},t}(),f=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),a_(this);var e=i.size,s=i.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==e)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),Jf(this,t,s=po(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=Md(e);void 0===s&&(s=1),function(t,i,e,s){var n=_.create(Zl.prototype),r=md(i,"pull",0,[n]),h=md(i,"cancel",1,[]);zf(t,n,(function(){return pd(i,"start",[n])}),r,h,e,s)}(this,t,s=po(s),r)}}return _.defineProperty(t.prototype,"locked",{get:function(){if(!1===no(this))throw wr("locked");return u_(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===no(this)?oh(wr("cancel")):!0===u_(this)?oh(new k("Cannot cancel a stream that already has a reader")):qr(this,t)},t.prototype.getReader=function(t){var i=(void 0===t?{}:t).mode;if(!1===no(this))throw wr("getReader");if(void 0===i)return Od(this,!0);if("byob"===(i=String(i)))return function(t,i){void 0===i&&(i=!1);var e=new td(t);return e.ul=i,e}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,i){var e=t.writable,s=t.readable,n=void 0===i?{}:i,r=n.preventClose,h=n.preventAbort,o=n.preventCancel,a=n.signal;if(!1===no(this))throw wr("pipeThrough");if(!1===Lr(e))throw new k("writable argument to pipeThrough must be a WritableStream");if(!1===no(s))throw new k("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),h=Boolean(h),o=Boolean(o),void 0!==a&&!If(a))throw new k("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===u_(this))throw new k("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===xo(e))throw new k("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return Id(Sf(this,e,r,h,o,a)),s},t.prototype.pipeTo=function(t,i){var e=void 0===i?{}:i,s=e.preventClose,n=e.preventAbort,r=e.preventCancel,h=e.signal;return!1===no(this)?oh(wr("pipeTo")):!1===Lr(t)?oh(new k("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===h||If(h)?!0===u_(this)?oh(new k("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===xo(t)?oh(new k("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Sf(this,t,s,n,r,h):oh(new k("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===no(this))throw wr("tee");var t=function(t,i){var e,s,n,r,h,o=Od(t),a=!1,u=!1,c=!1,l=qc((function(t){h=t}));function d(){return!0===a||(a=!0,Id(hh(Rd(o),(function(t){if(a=!1,!0===t.done)return!1===u&&Cf(n.Od),void(!1===c&&Cf(r.Od));var i=t.value,e=i,s=i;!1===u&&xf(n.Od,e),!1===c&&xf(r.Od,s)})))),Ui(void 0)}function f(){}return n=o_(f,d,(function(i){if(u=!0,e=i,!0===c){var n=gd([e,s]),r=qr(t,n);h(r)}return l})),r=o_(f,d,(function(i){if(c=!0,s=i,!0===u){var n=gd([e,s]),r=qr(t,n);h(r)}return l})),Dd(o.Nd,(function(t){Of(n.Od,t),Of(r.Od,t)})),[n,r]}(this);return gd(t)},t.prototype.getIterator=function(t){var i=(void 0===t?{}:t).preventCancel,e=void 0!==i&&i;if(!1===no(this))throw wr("getIterator");return function(t,i){void 0===i&&(i=!1);var e=Od(t),s=_.create(Fl);return s.jd=e,s.Bf=Boolean(i),s}(this,e)},t}(),"symbol"==typeof Nl.asyncIterator&&_.defineProperty(f.prototype,Nl.asyncIterator,{value:f.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0}),function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(t){return t.byteLength},t}(),id=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(){return 1},t}(),xh=function(){function t(t,i,e){void 0===t&&(t={}),void 0===i&&(i={}),void 0===e&&(e={});var s=i.size,n=i.highWaterMark,r=e.size,h=e.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var o=Md(s);if(void 0===n&&(n=1),n=po(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=Md(r);void 0===h&&(h=0),h=po(h),l_(this,qc((function(t){a=t})),n,o,h,u),function(t,i){var e=_.create(ed.prototype),s=function(t){try{return v_(e,t),Ui(void 0)}catch(t){return oh(t)}},n=i.transform;if(void 0!==n){if("function"!=typeof n)throw new k("transform is not a method");s=function(t){return yd(n,i,[t,e])}}var r=md(i,"flush",0,[e]);!function(t,i,e,s){i.Lf=t,t.Df=i,i.kf=e,i.Ef=s}(t,e,s,r)}(this,t);var c=pd(t,"start",[this.Df]);a(c)}return _.defineProperty(t.prototype,"readable",{get:function(){if(!1===d_(this))throw y_("readable");return this.Sf},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"writable",{get:function(){if(!1===d_(this))throw y_("writable");return this.Nf},enumerable:!0,configurable:!0}),t}(),ed=function(){function t(){throw new k("TransformStreamDefaultController instances cannot be created directly")}return _.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===w_(this))throw p_("desiredSize");return jf(this.Lf.Sf.Od)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===w_(this))throw p_("enqueue");v_(this,t)},t.prototype.error=function(t){if(!1===w_(this))throw p_("error");!function(t,i){f_(t.Lf,i)}(this,t)},t.prototype.terminate=function(){if(!1===w_(this))throw p_("terminate");!function(t){var i=t.Lf,e=i.Sf.Od;!0===$o(e)&&Cf(e),__(i,new k("TransformStream terminated"))}(this)},t}()})),r=fd((()=>{"use strict";M_()})),T_=to(((t,i)=>{r(),i.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),N_=to(((t,i)=>{r(),i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=e+e,o=s+s,a=n+n,u=e*h,c=s*h,l=s*o,d=n*h,f=n*o,_=n*a,g=r*h,w=r*o,A=r*a;return t[0]=1-l-_,t[1]=c+A,t[2]=d-w,t[3]=0,t[4]=c-A,t[5]=1-u-_,t[6]=f+g,t[7]=0,t[8]=d+w,t[9]=f-g,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),D_=to(((t,i)=>{r(),i.exports=function(t,i,e){var s,n,r,h=e[0],o=e[1],a=e[2],u=x.sqrt(h*h+o*o+a*a);if(x.abs(u)<1e-6)return null;return h*=u=1/u,o*=u,a*=u,s=x.sin(i),n=x.cos(i),r=1-n,t[0]=h*h*r+n,t[1]=o*h*r+a*s,t[2]=a*h*r-o*s,t[3]=0,t[4]=h*o*r-a*s,t[5]=o*o*r+n,t[6]=a*o*r+h*s,t[7]=0,t[8]=h*a*r+o*s,t[9]=o*a*r-h*s,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),I_=to(((t,i)=>{r(),i.exports=function(t,i){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}})),S_=to(((t,i)=>{r(),i.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),E_=to(((t,i)=>{r(),i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=i[4],o=i[5],a=i[6],u=i[7],c=i[8],l=i[9],d=i[10],f=i[11],_=i[12],g=i[13],w=i[14],A=i[15],v=e*o-s*h,m=e*a-n*h,p=e*u-r*h,y=s*a-n*o,M=s*u-r*o,T=n*u-r*a,N=c*g-l*_,D=c*w-d*_,I=c*A-f*_,S=l*w-d*g,E=l*A-f*g,b=d*A-f*w,L=v*b-m*E+p*S+y*I-M*D+T*N;if(!L)return null;return L=1/L,t[0]=(o*b-a*E+u*S)*L,t[1]=(n*E-s*b-r*S)*L,t[2]=(g*T-w*M+A*y)*L,t[3]=(d*M-l*T-f*y)*L,t[4]=(a*I-h*b-u*D)*L,t[5]=(e*b-n*I+r*D)*L,t[6]=(w*p-_*T-A*m)*L,t[7]=(c*T-d*p+f*m)*L,t[8]=(h*E-o*I+u*N)*L,t[9]=(s*I-e*E-r*N)*L,t[10]=(_*M-g*p+A*v)*L,t[11]=(l*p-c*M-f*v)*L,t[12]=(o*D-h*S-a*N)*L,t[13]=(e*S-s*D+n*N)*L,t[14]=(g*m-_*y-w*v)*L,t[15]=(c*y-l*m+d*v)*L,t}})),b_=to(((t,i)=>{r(),i.exports=function(t,i,e){var s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],_=i[11],g=i[12],w=i[13],A=i[14],v=i[15],m=e[0],p=e[1],y=e[2],M=e[3];return t[0]=m*s+p*o+y*l+M*g,t[1]=m*n+p*a+y*d+M*w,t[2]=m*r+p*u+y*f+M*A,t[3]=m*h+p*c+y*_+M*v,m=e[4],p=e[5],y=e[6],M=e[7],t[4]=m*s+p*o+y*l+M*g,t[5]=m*n+p*a+y*d+M*w,t[6]=m*r+p*u+y*f+M*A,t[7]=m*h+p*c+y*_+M*v,m=e[8],p=e[9],y=e[10],M=e[11],t[8]=m*s+p*o+y*l+M*g,t[9]=m*n+p*a+y*d+M*w,t[10]=m*r+p*u+y*f+M*A,t[11]=m*h+p*c+y*_+M*v,m=e[12],p=e[13],y=e[14],M=e[15],t[12]=m*s+p*o+y*l+M*g,t[13]=m*n+p*a+y*d+M*w,t[14]=m*r+p*u+y*f+M*A,t[15]=m*h+p*c+y*_+M*v,t}})),L_=to(((t,i)=>{r(),i.exports=function(t,i,e,s,n){var r=1/x.tan(i/2),h=1/(s-n);return t[0]=r/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+s)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*s*h,t[15]=0,t}})),k_=to(((t,i)=>{r(),i.exports=function(t,i,e,s){var n,r,h,o,a,u,c,l,d,f,_,g,w,A,v,m,p,y,M,T,N,D,I,S,E=s[0],b=s[1],L=s[2],k=x.sqrt(E*E+b*b+L*L);if(x.abs(k)<1e-6)return null;E*=k=1/k,b*=k,L*=k,n=x.sin(e),r=x.cos(e),h=1-r,o=i[0],a=i[1],u=i[2],c=i[3],l=i[4],d=i[5],f=i[6],_=i[7],g=i[8],w=i[9],A=i[10],v=i[11],m=E*E*h+r,p=b*E*h+L*n,y=L*E*h-b*n,M=E*b*h-L*n,T=b*b*h+r,N=L*b*h+E*n,D=E*L*h+b*n,I=b*L*h-E*n,S=L*L*h+r,t[0]=o*m+l*p+g*y,t[1]=a*m+d*p+w*y,t[2]=u*m+f*p+A*y,t[3]=c*m+_*p+v*y,t[4]=o*M+l*T+g*N,t[5]=a*M+d*T+w*N,t[6]=u*M+f*T+A*N,t[7]=c*M+_*T+v*N,t[8]=o*D+l*I+g*S,t[9]=a*D+d*I+w*S,t[10]=u*D+f*I+A*S,t[11]=c*D+_*I+v*S,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]);return t}})),C_=to(((t,i)=>{r(),i.exports=function(t,i,e){var s,n,r,h,o,a,u,c,l,d,f,_,g=e[0],w=e[1],A=e[2];i===t?(t[12]=i[0]*g+i[4]*w+i[8]*A+i[12],t[13]=i[1]*g+i[5]*w+i[9]*A+i[13],t[14]=i[2]*g+i[6]*w+i[10]*A+i[14],t[15]=i[3]*g+i[7]*w+i[11]*A+i[15]):(s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],_=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=_,t[12]=s*g+o*w+l*A+i[12],t[13]=n*g+a*w+d*A+i[13],t[14]=r*g+u*w+f*A+i[14],t[15]=h*g+c*w+_*A+i[15]);return t}}));function Zc(t,i){return O_(t.slice(),i)}function x_(t,i){const e=O_(t,i);return e!==t&&j_(e,void 0,t.length,t),t}function O_(t,i){let e=t;const s=e.length;if(s<=1)return e;let n=new Array(s);for(let t=1;t<s;t*=2){j_(e,i,t,n);const s=e;e=n,n=s}return e}function j_(t,i,e,s){const n=t.length;let r=0;const h=2*e;let o,a,u,c,l;for(a=0;a<n;a+=h)for(u=a+e,o=u+e,u>n&&(u=n),o>n&&(o=n),c=a,l=u;;)if(c<u&&l<o)i&&i(t[c],t[l])<=0?s[r++]=t[c++]:s[r++]=t[l++];else if(c<u)s[r++]=t[c++];else{if(!(l<o))break;s[r++]=t[l++]}}r(),(g=le||(le={}))[g.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",g[g.LICENSE_ERROR=2e3]="LICENSE_ERROR",g[g.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",g[g.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",g[g.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",g[g.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",g[g.SOURCE_INVALID=3e3]="SOURCE_INVALID",g[g.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",g[g.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",g[g.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",g[g.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",g[g.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",g[g.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",g[g.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",g[g.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",g[g.MEDIA_ABORTED=5004]="MEDIA_ABORTED",g[g.NETWORK_ERROR=6e3]="NETWORK_ERROR",g[g.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",g[g.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",g[g.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",g[g.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",g[g.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",g[g.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",g[g.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",g[g.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",g[g.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",g[g.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",g[g.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",g[g.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",g[g.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",g[g.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",g[g.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",g[g.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",g[g.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",g[g.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",g[g.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",g[g.AD_ERROR=1e4]="AD_ERROR",g[g.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",g[g.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",g[g.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",g[g.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",function(t){t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE"}(Ku||(Ku={})),(Ku||(Ku={})).fromCode=function(t){const i=x.floor(t/1e3);if(i in Ku)return i;throw new k("Invalid error code: "+t)},r(),r(),r(),r(),r(),r(),r(),r(),r(),r();var Xc={}.hasOwnProperty,Do={}.toString;function z_(t){return null!=t}function Wo(t){return void 0===t}var Yn=Array.isArray||function(t){return"[object Array]"===Do.call(t)};function rt(t){return lt(t)&&Xc.call(t,"length")&&R_(t.length)}function lt(t){return"object"==typeof t&&null!==t}function kt(t){return lt(t)&&t.constructor&&t.constructor===_}function ae(t){return"string"==typeof t}function P_(t){return"boolean"==typeof t}function B_(t){return z_(t)&&"function"==typeof t.then}function Cl(t){return"[object Date]"===Do.call(t)}function R_(t){return"number"==typeof t}r(),r();var Ji,pu=9007199254740991,U_=2**-52;function It(t,i,e){return x.min(x.max(t,i),e)}function Ua(t,i,e){return t===i||x.abs(t-i)<=e}function Q_(t,i){if(t===i)return!0;const e=x.abs(t-i);if(e<U_)return!0;return e<x.max(x.abs(t),x.abs(i))*U_}function F_(t,i){return t%i+(t<0?i:0)}function Y_(t){return t!=t}function G_(t,i){return t===i||Y_(t)&&Y_(i)}function V_(t,i){let e=t,s=i;for(;0!==s;){const t=e%s;e=s,s=t}return e<0?-e:e}function So(t,i){return t.reduce(((t,e)=>t+i(e)),0)}!function(t){t[t.Wr=0]="Wr",t[t.Rf=1]="Rf",t[t.Uf=-1]="Uf"}(Ji||(Ji={}));var Xo=(t,i)=>(0|t)-(0|i),Li=(t,i)=>t===i?0:t<i?-1:t>i?1:j(t)?j(i)?0:1:-1;function W_(t,i,e){return Ua(t,i,e)?0:Li(t,i)}var H_=(t,i)=>Q_(t,i)?0:Li(t,i);var q_="function"==typeof Array.prototype.find?(t,i)=>t.find(i):(t,i)=>{const e=Da(t,i);return-1===e?void 0:t[e]},Gr=q_,X_="function"==typeof Array.prototype.findLast?(t,i)=>t.findLast(i):(t,i)=>{const e=K_(t,i);return-1===e?void 0:t[e]},Z_=X_,Da="function"==typeof Array.prototype.findIndex?(t,i)=>t.findIndex(i):(t,i)=>{for(let e=0;e<t.length;e+=1){if(i(t[e],e,t))return e}return-1},K_="function"==typeof Array.prototype.findLastIndex?(t,i)=>t.findLastIndex(i):(t,i)=>{for(let e=t.length-1;e>=0;e-=1){if(i(t[e],e,t))return e}return-1};function Et(t,i){const e=t.indexOf(i);return-1!==e&&(jc(t,e),!0)}function jc(t,i){0===i?t.shift():t.splice(i,1)}function J_(t,i){const e=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===i){n++,e.length-=1;break}e[s++]=t[n++]}for(;n<t.length;)e[s++]=t[n++];return e}function na(t,i){return-1!==t.indexOf(i)}function _l(t,i,e){if(t===i)return!0;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s+=1)if(!e(t[s],i[s]))return!1;return!0}function Ri(t){t.length=0}function zo(t,i){if(t.length!==i.length)return!1;for(const e of t)if(!na(i,e))return!1;return!0}Array.prototype.flat;var Nh="function"==typeof Array.prototype.flatMap?(t,i)=>t.flatMap(i):(t,i)=>{const e=[];for(let s=0;s<t.length;s++)e.push(...i(t[s],s));return e};function Oo(t,i){return kh(t,((t,e)=>Li(i(t),i(e))))}function $_(t,i){return tg(t,((t,e)=>Li(i(t),i(e))))}function kh(t,i){if(0!==t.length)return t.reduce(((t,e)=>i(t,e)<=0?t:e))}function tg(t,i){return kh(t,((t,e)=>i(e,t)))}function Ic(t){return t.filter(((i,e)=>t.indexOf(i)===e))}function ig(t,i){return Promise.all(t.map(i)).then((i=>t.filter(((t,e)=>i[e]))))}function eg(t,i,e){if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(!e(t[s],i[s]))return!1;return!0}function wl(){const t=_.create(null);return t.Qf=void 0,delete t.Qf,t}function Qt(){return new hg}function Ye(){return new og}function sg(t){const i=Qt();for(const e in t)Xc.call(t,e)&&i.set(e,t[e]);return i}function ng(t){const i=[];return t.forEach((t=>i.push(t))),i}r();var rg="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,hg=rg||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,i){this.index=0,this.data=t,this.selector=i,this.keys=_.keys(t)}}return class{get(t){return this.data[t]}set(t,i){return this.has(t)||this.size++,this.data[t]=i,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=wl(),this.size=0}keys(){return new t(this.data,((t,i)=>i))}values(){return new t(this.data,((t,i)=>t[i]))}entries(){return new t(this.data,((t,i)=>[i,t[i]]))}forEach(t){for(const i in this.data)t(this.data[i],i)}constructor(){this.data=wl(),this.size=0}}}();var og=rg||function(){class t{next(){const t=this.Ff.next();return t.done?t:{value:this.Yf(t.value),done:!1}}constructor(t,i){this.Ff=t,this.Yf=i}}return class{get size(){return this.Gf.size}get(t){return this.Gf.get(""+t)}set(t,i){return this.Gf.set(""+t,i),this}has(t){return this.Gf.has(""+t)}delete(t){return this.Gf.delete(""+t)}clear(){this.Gf.clear()}keys(){return new t(this.Gf.keys(),(t=>Number(t)))}values(){return this.Gf.values()}entries(){return new t(this.Gf.entries(),(t=>{let[i,e]=t;return[Number(i),e]}))}forEach(t){this.Gf.forEach(((i,e)=>{t(i,Number(e))}))}constructor(){this.Gf=Qt()}}}();r(),r();var Fc=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];b.apply(this,i)};(Fc.prototype=_.create(b.prototype)).constructor=Fc;var Jo=class extends Fc{get name(){return"BaseError"}constructor(t,i){super(),this.message=t||"Unknown error",this.cause=i,b.captureStackTrace&&b.captureStackTrace(this,this.constructor)}};r();var fe,ag=class{Vf(){if(!this.Wf&&!this.Hf){this.Wf=!0;for(const t of this.qf.slice())t();this.Xf()}}Xf(){if(!this.Hf){this.Hf=!0;for(const t of this.Zf.slice())t();Ri(this.qf),Ri(this.Zf)}}Kf(t){this.Hf||this.qf.push(t)}Jf(t){this.Hf||Et(this.qf,t)}$f(t){this.Hf||this.Zf.push(t)}t_(t){this.Hf||Et(this.Zf,t)}constructor(){this.Wf=!1,this.Hf=!1,this.qf=[],this.Zf=[]}},Po=class t{get i_(){return this.e_}s_(){this.e_.Vf()}Xf(){this.e_.Xf()}n_(t){const i=this.e_;if(i.Wf)return;if(t.Wf)return void i.Vf();if(i.Hf||t.Hf)return;const e=()=>{s(),i.Vf()},s=()=>{t.Jf(e),t.t_(s),i.Jf(e),i.t_(s)};t.Kf(e),t.$f(s),i.Kf(e),i.$f(s)}r_(){const i=new t,e=new t,s=i.i_,n=e.i_,r=this.e_,h=()=>{s.Wf&&n.Hf||n.Wf&&s.Hf?r.Vf():s.Hf&&n.Hf&&r.Xf()};s.Kf(h),n.Kf(h),s.$f(h),n.$f(h),i.n_(r),e.n_(r);return r.$f((()=>{s.Jf(h),n.Jf(h),s.t_(h),n.t_(h)})),[i,e]}constructor(){this.e_=new ag}};r(),r();var xs=()=>{},ug=t=>t;function oo(t,i){let e=-1/0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const h=fe.h_();h-e>=i&&(t.apply(this,n),e=h)}}function kl(t,i){let e=0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const h=this;0!==e&&fe.o_(e),e=fe.a_((()=>{e=0,t.apply(h,n)}),i)}}function Ml(t){let i;return()=>(void 0!==t&&(i=t(),t=void 0),i)}var sa=class extends Jo{get name(){return"AbortError"}constructor(t,i){super(t||"Aborted",i)}};function Oi(t){return t instanceof b&&"AbortError"===t.name}function Pi(t){if(t&&t.Wf)throw new sa}function yo(t){if(Oi(t))throw t}function Ah(t){if(!Oi(t))throw t}function hl(t,i){return i?new Promise(((e,s)=>{if(i.Wf)return t.catch(xs),s(new sa);const n=()=>{i.Jf(n),s(new sa)};i.Kf(n),t.then((t=>{i.Jf(n),e(t)}),(t=>{i.Jf(n),s(t)}))})):t}function ui(t,i){return t.then((t=>(i.Xf(),t)),(t=>{throw i.Xf(),t}))}function cg(t,i){const e=new Po;return i&&e.n_(i),ui(t(e.i_),e)}r();var lg=Promise.resolve(),yc="function"==typeof queueMicrotask?queueMicrotask:t=>{lg.then(t)};function W(t){t.then(xs,xs)}async function tl(t){try{return await Promise.all(t)}catch(i){throw await Promise.all(t.map((t=>t.catch(xs)))),i}}function be(t,i){return new Promise(((e,s)=>{if(void 0!==i&&i.Wf)return void s(new sa);const n=fe.a_((()=>{void 0!==i&&i.Jf(r),e()}),t),r=()=>{fe.o_(n),s(new sa)};void 0!==i&&i.Kf(r)}))}function dg(t,i,e){if("function"==typeof e)e.call(t,i);else for(const s of e)s.call(t,i)}var gt,i=class{ln(t,i){if("function"==typeof i)if("string"==typeof t)this.u_(t,i);else for(const e of t)this.u_(e,i)}u_(t,i){const e=this.c_[t];void 0===e?this.c_[t]=i:"function"==typeof e?this.c_[t]=[e,i]:0===this.l_?e.push(i):this.c_[t]=e.concat(i)}d_(t){if("function"!=typeof t)return;const i=this.f_;void 0===i?this.f_=t:"function"==typeof i?this.f_=[i,t]:0===this.l_?i.push(t):this.f_=i.concat(t)}Bo(){this.c_=wl(),this.f_=void 0}mo(t){this.l_++;const i=this.c_[t.type],e=this.f_;void 0!==i&&dg(this.__,t,i),void 0!==e&&dg(this.__,t,e),this.l_--}rn(t,i){if("function"==typeof i)if("string"==typeof t)this.g_(t,i);else for(const e of t)this.g_(e,i)}g_(t,i){const e=this.c_[t];void 0!==e&&("function"==typeof e?e===i&&(this.c_[t]=void 0):0===this.l_?Et(e,i):this.c_[t]=J_(e,i))}w_(t){if("string"==typeof t)this.c_[t]=void 0;else for(const i of t)this.c_[i]=void 0}A_(t){const i=this.f_;void 0!==i&&("function"==typeof i?i===t&&(this.f_=void 0):0===this.l_?Et(i,t):this.f_=J_(i,t))}v_(t,i){return new Promise(((e,s)=>{if(i&&i.Wf)return s(new sa);const n=t=>{h(),e(t)},r=()=>{h(),s(new sa)},h=()=>{this.rn(t,n),i&&i.Jf(r)};this.ln(t,n),i&&i.Kf(r)}))}constructor(t){this.c_=wl(),this.f_=void 0,this.l_=0,this.Ds=t=>{this.mo(t)},this.__=null!=t?t:this}},H=class extends i{mo(t){yc((()=>{super.mo(t)}))}},ha=class extends i{d_(t){super.d_(t)}A_(t){super.A_(t)}},fg=class extends ha{},_g=class extends ha{get ht(){return this.m_()}m_(){return this.p_.ht}y_(){return this.p_.y_()}get M_(){return this.T_()}T_(){return this.p_.M_}get N_(){return this.D_()}set N_(t){this.I_(t)}D_(){return this.p_.N_}I_(t){this.p_.N_=t}get bt(){return this.S_()}S_(){return this.p_.bt}get E_(){return this.b_()}set E_(t){this.L_(t)}b_(){return this.p_.E_}L_(t){this.p_.E_=t}get ct(){return this.kd()}kd(){return this.p_.ct}get we(){return this.k_()}k_(){return this.p_.we}get C_(){return this.x_()}x_(){return this.p_.C_}get lt(){return this.O_()}get j_(){return this.z_()}O_(){return this.p_.lt}z_(){return this.p_.j_}get P_(){return this.B_()}B_(){return this.p_.P_}get R_(){return this.U_()}U_(){return this.p_.R_}get Q_(){return this.F_()}F_(){return this.p_.Q_}get Y_(){return this.G_()}set Y_(t){this.V_(t)}G_(){return this.p_.Y_}V_(t){this.p_.Y_=t}get W_(){return this.H_()}H_(){return this.p_.W_}get q_(){return this.X_()}X_(){return this.p_.q_}get Z_(){return this.K_()}set Z_(t){this.J_(t)}K_(){return this.p_.Z_}J_(t){this.p_.Z_=t}get eg(){return this.rg()}rg(){return this.p_.eg}get hg(){return this.og()}set hg(t){this.ag(t)}og(){return this.p_.hg}ag(t){this.p_.hg=t}get cg(){return this.dg()}dg(){return this.p_.cg}get fg(){return this._g()}_g(){return this.p_.fg}get gg(){return this.wg()}wg(){return this.p_.gg}Oa(){return this.p_.Oa()}ca(t,i){return this.p_.ca(t,i)}get nt(){return this.Ag()}Ag(){return this.p_.nt}get vg(){return this.pg()}pg(){return this.p_.vg}get rt(){return this.yg()}yg(){return this.p_.rt}get Mg(){return this.Tg()}Tg(){return this.p_.Mg}get Ng(){return this.Dg()}set Ng(t){this.Ig(t)}get Sg(){return this.Eg()}Eg(){return this.p_.Sg}Dg(){return this.p_.Ng}Ig(t){this.p_.Ng=t}get Lg(){return this.p_.Lg}set Lg(t){this.p_.Lg=t}Cg(){return this.p_.Cg()}xg(){return this.p_.xg()}Og(t){this.p_.Og(t)}jg(){this.p_.jg()}be(){this.p_.be()}zg(){this.p_.zg()}Pg(){this.p_.Pg()}Bg(){this.p_.Bg()}ge(){this.p_.ge()}Rg(){return this.p_.Rg()}Ug(){return this.p_.Ug()}Qg(){this.p_.Qg()}Fg(){this.p_.Fg()}Wn(){return this.p_.Wn()}Yg(){this.p_.Yg()}Gg(){this.p_.Gg()}Vg(t){return this.p_.Vg(t)}Wg(t){return!1}async cn(){this.Bo(),await this.p_.cn()}constructor(t){super(),this.Hg=t=>{this.Wg(t)||this.mo(t)},this.p_=t,t.d_(this.Hg)}};r(),r(),r(),function(t){t.qg="Xg",t.Zg="Kg"}(gt||(gt={})),r(),r(),r(),r(),r();var gg=class{constructor(t,i=new Date){this.type=t,this.date=i}},Ha=class extends gg{get oa(){return this.Ua||(this.Ua=this.ha()),this.Ua}constructor(t,i){super(t,i),this.Ua=void 0}};function wg(t){return Boolean(t&&t.oa)}var bo=class extends Ha{constructor(t){super(t)}},te=class extends gg{constructor(t){super(t)}},Ag=class extends bo{ha(){return new vg(this.Lt.oa)}constructor(t){super(gt.qg),this.Lt=t}},vg=class extends te{constructor(t){super("addtrack"),this.track=t}};r();var Os,mg=class extends bo{ha(){return new pg(this.Lt.oa)}constructor(t){super(gt.Zg),this.Lt=t}},pg=class extends te{constructor(t){super("removetrack"),this.track=t}};r(),function(t){t.Jg="$g",t.iw="ew",t.nw="hw",t.ow="aw",t.uw="cw",t.lw="dw",t.Ko="fw",t._w="gw",t.ww="Aw",t.mw="Ln",t.pw="yw",t.Mw="Tw",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality"}(Os||(Os={}));var co=class extends i{get Nw(){return this.Dw}get oa(){return this.Ua||(this.Ua=this.ha()),this.Ua}get U(){return this.Dw.length}Iw(t){return this.Dw[t]}tt(t){return!(!t||na(this.Dw,t))&&(this.Dw.push(t),this.Ua&&this.Ua.push(t.oa),t.ln(Os.Ko,this.Ds),this.mo(new Ag(t)),!0)}it(t){if(!t)return!1;const i=this.Dw.indexOf(t);return!(i<0)&&(jc(this.Dw,i),this.Ua&&jc(this.Ua,i),t.rn(Os.Ko,this.Ds),this.mo(new mg(t)),!0)}Sw(t){return na(this.Dw,t)}Wn(){const t=this.Dw;for(let i=t.length-1;i>=0;i-=1)this.it(t[i])}cn(){this.Wn(),this.Bo()}constructor(){super(),this.Dw=[],this.Ua=void 0}};r();var de=class extends bo{ha(){return new yg(this.Lt.oa)}constructor(t){super(Os.Ko),this.Lt=t}},yg=class extends te{constructor(t){super("change"),this.track=t}},Lc=class extends co{get Ew(){return this.Lw}set Ew(t){const i=this.Lw;if(t!==i){if(i){this.Cw(i);for(const e of i.Nw)t&&t.Sw(e)||this.it(e)}if(this.Lw=t,t){const i=[];for(const e of t.Nw)this.tt(e),this.xw(e)&&i.push(e);this.Ow(t);for(const t of i)t.mo(new de(t))}}}Ow(t){t.ln(gt.qg,this.jw),t.ln(gt.Zg,this.zw)}Cw(t){t.rn(gt.qg,this.jw),t.rn(gt.Zg,this.zw)}cn(){this.Lw&&this.Lw.cn(),super.cn()}constructor(){super(),this.Lw=void 0,this.jw=t=>{const i=t.Lt;this.tt(i)},this.zw=t=>{const i=t.Lt;this.it(i)}}};r(),r(),r();var Mg=_.freeze||ug;function Vc(t,i,e){_.defineProperty(t,i,{writable:!1,enumerable:!0,value:e})}function Tg(t){return Mg(t)}function Ou(t,i){for(const e of _.getOwnPropertyNames(i))_.defineProperty(t,e,_.getOwnPropertyDescriptor(i,e));return t}function Zr(t){if(kt(t)){const i={};for(const e in t)Xc.call(t,e)&&(i[e]=Zr(t[e]));return i}if(Yn(t)){const i=new Array(t.length);for(let e=0;e<i.length;e++)e in t&&(i[e]=Zr(t[e]));return i}return t}function Ph(t,i){return t===i||!(!t||!i)&&(!(!lt(t)||!lt(i))&&(rt(t)?!!rt(i)&&function(t,i){const e=t.length,s=i.length;if(e!==s)return!1;for(let s=0;s<e;s+=1)if(!Ph(t[s],i[s]))return!1;return!0}(t,i):!rt(i)&&function(t,i){const e=_.keys(t),s=_.keys(i);if(!e||!s||e.length!==s.length)return!1;for(const s of e)if(!Xc.call(i,s)||!Ph(t[s],i[s]))return!1;return!0}(t,i)))}function Ng(t,i){if(!lt(t))return!1;for(const e of i)if(!(e in t))return!1;return!0}function Dg(t,i){return t.constructor===i.constructor}function Ig(t){const i={};for(const e of _.keys(t)){const s=t[e];null!=s&&(i[e]=s)}return i}function wh(t){const i={};for(const e of _.keys(t)){const s=t[e];if(rt(s)){const t=[];for(let i=0;i<s.length;i+=1){const e=s[i];if(null!=e){const i=lt(e)?wh(e):e;t.push(i)}}i[e]=t}else null!=s&&(i[e]=lt(s)?wh(s):s)}return i}function Sg(t){let i=t;if("string"==typeof i){if(i=i.toLowerCase(),"true"===i)return!0;if("false"===i)return!1}return Boolean(i)}function nt(t){return z_(t)?Sg(t):void 0}function Ee(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function Eg(t){const i=Ee(t);if(j(i))throw new b("Expected a valid number.");return i}function P(t){return"string"==typeof t?t:""}function bg(t,i){if(!rt(t))return[];const e=0|t.length,s=new Array(e);for(let n=0;n<e;n++)s[n]=i(t[n]);return s}function Ls(t,i){let e;return e=rt(t)?bg(t,i):i(t),e}r();var Yu,Lg=[gt.qg,gt.Zg,Os.Ko];function kg(t){let i;const e=t.Nw.map((t=>t.oa));return e.item=i=>{const e=0|i,s=t.Iw(e);return s&&s.oa||void 0},e.addEventListener=(t,e)=>{i.ln(t,e)},e.removeEventListener=(t,e)=>{i.rn(t,e)},i=new H(e),t.ln(Lg,(t=>i.mo(t.oa))),e}function Cg(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function xg(){}function Di(t){const i=[Os.mw,Os.Ko,Os.pw,Os.Mw,Os.QUALITY_UNAVAILABLE];let e;const s={get activeQuality(){return t.Pw&&t.Pw.oa},get enabled(){return t.Rt},set enabled(i){t.Rt=Sg(i)},get id(){return t.o},get uid(){return t.Bw},get kind(){return t.zt},get label(){return t.dh},set label(i){t.dh=P(i)},get accessibility(){var i,e;return null!=(e=null==(i=t.Rw)?void 0:i.map(Cg))?e:[]},get language(){return t.gs},get qualities(){return t.Uw.oa},set targetQuality(i){let e;e=i?function(t,i){const e=[];for(const s of t.Uw.Nw)for(const t of i)s.oa===t&&e.push(s);return e}(t,Yn(i)?i:[i]):[],e.length>0?t.Qw=e:t.Qw=void 0},get targetQuality(){if(t.Qw)return 1===t.Qw.length?t.Qw[0].oa:t.Qw.map((t=>t.oa))},addEventListener(t,i){const s=Ls(t,P);e.ln(s,i)},removeEventListener(t,i){const s=Ls(t,P);e.rn(s,i)}};return e=new H(s),t.ln(i,(t=>e.mo(t.oa))),_.defineProperty(s,"constructor",{value:xg}),s}function Og(){}function jg(t){const i=kg(t);return _.defineProperty(i,"constructor",{value:Og}),i}r(),function(t){t[t.Fw=0]="Fw",t[t.Yw=1]="Yw",t[t.Gw=2]="Gw",t[t.Vw=3]="Vw",t[t.Ww=4]="Ww",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.Hw=7]="Hw"}(Yu||(Yu={}));var Ht,Bi,As=class extends Lc{ha(){return jg(this)}xw(t){return t.Rt}};function Ne(t){if("string"==typeof t){const i=t.toLowerCase();switch(i){case"disabled":case"hidden":case"showing":return i}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}function zg(){}function Qo(t){const i=[Os.Ko,Os.mw,Os.Jg,Os.iw,Os.ow,Os.uw,Os.nw,Os.lw,Os._w,Os.ww],e=[Bi.Zo];let s;const n={get kind(){return t.zt},get label(){return t.dh},set label(i){t.dh=P(i)},get language(){return t.gs},get id(){return t.o},get uid(){return t.Bw},get inBandMetadataTrackDispatchType(){return t.qw},get mode(){return t.Xw},set mode(i){i!==Ht.Un&&i!==Ht.Zw&&i!==Ht.gh||t.Kw(i)},get forced(){return Boolean(t.Jw)},get accessibility(){var i,e;return null!=(e=null==(i=t.Rw)?void 0:i.map(Cg))?e:[]},get type(){return t.$w},get readyState(){return t.cg},get cues(){return t.Xw===Ht.gh?null:t.L.oa},get activeCues(){return t.Xw===Ht.gh?null:t.q.oa},get src(){return t.tA||""},addEventListener(t,i){const e=Ls(t,P);s.ln(e,i)},removeEventListener(t,i){const e=Ls(t,P);s.rn(e,i)}};return s=new H(t),t.ln(i,(t=>s.mo(t.oa))),t.ln(e,(t=>s.mo(t))),_.defineProperty(n,"constructor",{value:zg}),n}function Pg(){}function Hc(t){const i=kg(t);return _.defineProperty(i,"constructor",{value:Pg}),i}r(),r(),r(),function(t){t.gh="disabled",t.Zw="hidden",t.Un="showing"}(Ht||(Ht={})),r(),(Bi||(Bi={})).Zo="error";var Ac=class extends Lc{ha(){return Hc(this)}xw(t){return t.Xw===Ht.Un}};r(),r(),r(),r();var t,qo,Bg=.25,Rg=400,Ug={iA:.2,eA:.45,sA:.7,nA:3,rA:Ch,hA:Sh},Qg={iA:.4,eA:.65,sA:1,nA:3,rA:Ch,hA:Sh},Fg={iA:.4,eA:.7,sA:.9,nA:3,rA:Ch,hA:Sh},Yg={iA:.2,eA:.45,sA:1,nA:3,rA:Ch,hA:Sh},Gg={iA:.5,eA:1.125,sA:1.75,nA:2.55,rA:Ch,hA:Sh};function jl(){let t;return t=fe.Ys.oA?Yg:fe.Ys.aA?Qg:fe.Ys.uA?"Android"===fe.lA.cA?Fg:Ug:Gg,fe.lA.dA?function(t){if(fe.lA.dA){const i=(Rg+250)/1e3,e=x.max(i,t.iA),s=x.max(e+Bg,t.eA),n=x.max(s+Bg,t.sA);return{iA:e,eA:s,sA:n,nA:x.max(n+Bg,t.nA),rA:Ch,hA:Sh}}return t}(t):t}function Vg(t){return{windowStart:t.iA,windowEnd:t.sA,target:t.eA,maxOffset:t.nA}}r(),r(),function(t){t.fA="_A",t.gA="wA",t.AA="contentprotectionerror",t.vA="contentprotectionsuccess",t.mA="currentsourcechange",t.pA="destroy",t.yA="durationchange",t.MA="emptied",t.TA="encrypted",t.NA="ended",t.DA="IA",t.SA="EA",t.bA="LA",t.kA="CA",t.xA="loadstart",t.OA="manifestupdate",t.jA="nosupportedrepresentationfound",t.zA="offline",t.PA="online",t.yh="pause",t.bh="play",t.BA="progress",t.RA="ratechange",t.UA="representationchange",t.QA="resize",t.FA="seeked",t.YA="seeking",t.GA="segmentnotfound",t.VA="WA",t.HA="qA",t.no="sourcechange",t.XA="timeupdate",t.ZA="volumechange",t.KA="JA",t.$A="metricschange"}(t||(t={})),r(),function(t){t.rv="canplay",t.hv="canplaythrough",t.ov="loadeddata",t.uv="loadedmetadata",t._w="readystatechange",t.fv="waiting",t._v="playing"}(qo||(qo={}));var Wh=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"];function oe(){return oe=_.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var s in e)_.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},oe.apply(this,arguments)}r(),r();var Wg,Ch=.92,Sh=1.08;!function(t){t[t.gh=0]="gh",t[t.Av=1]="Av",t[t.vv=2]="vv"}(Wg||(Wg={}));var Wc=class extends i{get mv(){}get pv(){}get yv(){}get Mv(){return!1}get Tv(){}get oa(){var t;return null!=(t=this.Ua)?t:this.Ua=Hg(this)}Nv(){}constructor(...t){super(...t),this.Dv=Vg(jl())}};function Hg(t){return{goLive:()=>t.Nv(),get isLive(){return t.Mv},get currentServerLiveTime(){return t.mv},get currentLatency(){return t.pv},get latencies(){return t.yv},get latency(){return t.Dv},set latency(i){if(!function(t){if(!lt(t))return!1;const i=t,e=z_(i.target)&&"number"==typeof i.target&&z_(i.windowEnd)&&"number"==typeof i.windowEnd&&z_(i.windowStart)&&"number"==typeof i.windowStart&&z_(i.maxOffset)&&"number"==typeof i.maxOffset,s=i.windowStart>=0&&i.windowStart<=i.target&&i.target<=i.windowEnd&&i.maxOffset>=i.windowEnd;return e&&s}(i))throw new b("Invalid latency configuration");t.Dv=i},get manifest(){return t.Tv},addEventListener(i,e){t.ln(Xg(i),e)},removeEventListener(i,e){t.rn(Xg(i),e)}}}var qg=["golive","latencyrecoveryseek"];function Xg(t){const i=Ls(t,P);return(ae(i)?[i]:i).filter((t=>na(qg,t)))}var ra=class extends i{set Ew(t){const i=this.Lw;t!==i&&(i&&this.Cw(i),t&&this.Ow(t),this.Lw=t,this.Lw&&(this.Lw.Dv=this.Iv))}get Ew(){return this.Lw}get oa(){return this.Ua||(this.Ua=Hg(this)),this.Ua}Ow(t){t.ln(qg,this.Ds)}Cw(t){t.rn(qg,this.Ds)}Nv(){var t;null==(t=this.Lw)||t.Nv()}get mv(){var t;return null==(t=this.Lw)?void 0:t.mv}get pv(){var t;return null==(t=this.Lw)?void 0:t.pv}get yv(){var t;return null==(t=this.Lw)?void 0:t.yv}get Mv(){return!!this.Lw&&this.Lw.Mv}get Dv(){return this.Lw?this.Lw.Dv:this.Iv}set Dv(t){this.Lw&&(this.Lw.Dv=t),this.Iv=t}get Tv(){var t;return null==(t=this.Lw)?void 0:t.Tv}cn(){this.Bo(),this.Lw&&this.Cw(this.Lw),this.Lw=void 0}constructor(){super(),this.Lw=void 0,this.Ua=void 0,this.Iv=Vg(jl()),this.Lw=void 0}};r(),r(),r();var dl="function"==typeof String.prototype.replaceAll?(t,i,e)=>t.replaceAll(i,e):(t,i,e)=>t.split(i).join(e);function Va(t,i){return z_(t)&&-1!==t.indexOf(i)}var Zg="function"==typeof String.prototype.startsWith?(t,i)=>z_(t)&&t.startsWith(i):(t,i)=>z_(t)&&t.substr(0,i.length)===i,Eh="function"==typeof String.prototype.endsWith?(t,i)=>z_(t)&&t.endsWith(i):(t,i)=>z_(t)&&t.substr(t.length-i.length,i.length)===i;function Ei(t,i){return t.length===i.length&&t.toUpperCase()===i.toUpperCase()}var Kg="function"==typeof String.prototype.repeat?(t,i)=>t.repeat(i):(t,i)=>{let e=0|i;if(0===t.length||0===e)return"";let s=t,n="";for(;1==(1&e)&&(n+=s),e>>>=1,0!==e;)s+=s;return n},va="function"==typeof String.prototype.padStart?(t,i,e)=>(void 0===e&&(e=" "),t.padStart(i,e)):(t,i,e)=>{void 0===e&&(e=" ");let s=e;const n=(0|i)-t.length;return n<=0?t:(n>s.length&&(s+=Kg(s,n/s.length)),s.slice(0,n)+t)},Jg=(String.prototype.padEnd,16384),$g="function"==typeof String.fromCodePoint?t=>t.length<=Jg?String.fromCodePoint(...t):tw(t,String.fromCodePoint):t=>{const i=[];for(let e of t)e>65535&&(e-=65536,i.push(e>>>10&1023|55296),e=56320|1023&e),i.push(e);return zh(i)};function zh(t){return t.length<=Jg?String.fromCharCode(...t):tw(t,String.fromCharCode)}function tw(t,i){const e=[];for(let s=0;s<t.length;s+=Jg)e.push(i(...t.slice(s,s+Jg)));return e.join("")}function iw(t){return t.replace(/[\\"]/g,(t=>"\\"+t))}function ua(t,i){const e=fe.Ah(t);return Gc(e,i),e.toString()}function Gc(t,i){for(const e of _.keys(i))t.searchParams.set(e,i[e])}function Wa(t,i){let e=fe.Sv(t);return i&&!Eh(e,"/")&&(e+="/"),e}var ew=/cache:(.+)?(?=&|$)/,sw="http://webcache.googleusercontent.com/search?q=cache:";function nw(t){if(!Zg(t,sw))return"";const i=fe.Ah(t).search.match(ew);return i&&i.length>1?i[1]:""}function rw(t){return fe.Ah(".",t)}r();var hw,Te,hi,xa,Dh,Ks,ow,aw="1ADD53F3";function uw(t){return{appID:t&&t.appID?P(t.appID):aw}}function Qc(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":return!0;default:return!1}}function cw(t){return!!t&&Va(t,"mpd")}function jh(t){let i=hi.Ev;return cw(t)&&(i=hi.bv),function(t){return!!t&&Va(t,"m3u8")}(t)&&(i=hi.Lv),i}function lw(t){switch(t){case Te.Cv:case Te.xv:return t;default:return Te.Ov}}function dw(t){if(!t)return!1;const i=t.toLowerCase();return Zg(i,hi.bv)}function pa(t){if(!t)return!1;const i=t.toLowerCase();return Zg(i,hi.Lv)||Zg(i,hi.zv)}function ga(t){return lt(t)&&lt(t.ssai)&&"google-dai"===t.ssai.integration}function fw(t){return lt(t)&&ae(t.integration)&&"verizon-media"===t.integration}function _w(t){return lt(t)&&ae(t.integration)&&"mediatailor"===t.integration}function gw(t){if(ae(t))return!t;if(fw(t))return!t.id;if(ga(t)){const i=t.ssai,e="live"===i.availabilityType&&i.assetKey,s="vod"===i.availabilityType&&i.contentSourceID&&i.videoID;return Boolean(e&&s)}return!t.src}function il(t){return Boolean(lt(t)&&ae(t.src))}function ww(t){return t.type===hi.Pv||t.type===hi.Bv}function Aw(t){return ae(t)||il(t)||ga(t)||fw(t)}function ml(t){if(t){if(Aw(t))return gw(t);for(const i of t)if(!gw(i))return!1;return!0}return!0}function vw(){return{crossOrigin:Te.Ov,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[]}}function mw(){return oe({},vw(),{src:void 0,type:hi.Ev,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function pw(t){const i={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:xa.ENABLED,googleIma:{useNativeIma:!1,bitrate:-1}};return void 0===t||(void 0!==t.preload&&(i.preload=function(t){return"none"===t?Dh.NONE:Dh.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(i.showCountdown=Sg(t.showCountdown)),void 0!==t.vpaidMode&&(i.vpaidMode=function(t){switch(t){case"insecure":return xa.INSECURE;case"disabled":return xa.DISABLED;default:return xa.ENABLED}}(t.vpaidMode)),Yn(t.allowedMimeTypes)&&(i.allowedMimeTypes=t.allowedMimeTypes.filter(ae)),void 0!==t.googleIma&&(i.googleIma=function(t){return void 0===t?{useNativeIma:!1,bitrate:-1}:{useNativeIma:Sg(t.useNativeIma),bitrate:null!=(i=t.bitrate)?i:-1};var i}(t.googleIma))),i}function yw(t){if(!rt(t))return[];const i=[];for(const e of t)kt(e)&&i.push(e);return i}function Tl(t){return ae(t.src)}function Mw(t){return Yn(t)?t.filter(Qc):[]}!function(t){t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled"}(hw||(hw={})),r(),r(),function(t){t.Ov="",t.Cv="anonymous",t.xv="use-credentials"}(Te||(Te={})),function(t){t.bv="application/dash+xml",t.Lv="application/vnd.apple.mpegurl",t.zv="application/x-mpegurl",t.Ev="video/mp4",t.Pv="application/vnd.theoplayer.hesp+json",t.Bv="application/vnd.theo.hesp+json"}(hi||(hi={})),r(),r(),function(t){t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled"}(xa||(xa={})),r(),r(),function(t){t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll"}(Dh||(Dh={})),r(),function(t){t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange"}(Ks||(Ks={})),r(),r(),function(t){t[t.Rv=0]="Rv",t[t.Vn=1]="Vn",t[t.Uv=2]="Uv",t[t.Qv=3]="Qv",t[t.Fv=4]="Fv"}(ow||(ow={}));var bl=class extends gg{constructor(i,e=ow.Rv){super(t.MA),this.currentTime=i,this.readyState=e}};r();var ws=class extends gg{constructor(i){super(t.yh),this.currentTime=i}};r();var vh=class extends gg{constructor(i){super(t.bh),this.currentTime=i}};r();var Wi=class extends gg{constructor(t,i=ow.Vn){super(qo.uv),this.currentTime=t,this.readyState=i}};r();var ts=class extends gg{constructor(i){super(t.yA),this.duration=i}};r();var se=class extends gg{constructor(i,e){super(t.RA),this.currentTime=i,this.playbackRate=e}};r();var Tc=class extends gg{constructor(i,e){super(t.XA),this.currentTime=i,this.currentProgramDateTime=e}};r();var Ds=class extends gg{constructor(i){super(t.NA),this.currentTime=i}};r();var Xi=class extends gg{constructor(t,i=ow.Uv){super(qo.ov),this.currentTime=t,this.readyState=i}};r();var ja=class extends gg{constructor(i){super(t.YA),this.currentTime=i}};r();var _e=class extends gg{constructor(i){super(t.FA),this.currentTime=i}};r();var Ve=class extends gg{constructor(i,e){super(t.ZA),this.currentTime=i,this.volume=e}};r();var mt=class extends gg{constructor(t,i=ow.Qv){super(qo.rv),this.currentTime=t,this.readyState=i}};r();var Yi=class extends gg{constructor(t,i=ow.Fv){super(qo.hv),this.currentTime=t,this.readyState=i}};r();var Qi=class extends gg{constructor(t,i){super(qo._w),this.currentTime=t,this.readyState=i}};r();var me=class extends Ha{get error(){return this.errorObject.message}ha(){return this}constructor(t){super(Bi.Zo),this.errorObject=t}};async function hu(t,i,e,s,n){void 0===e&&(e=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(i)}catch(t){if(yo(t),r<e){const t=x.min(s*2**r,n);r++,await be(t,i);continue}throw t}}r();var Tw,Nw,Dw={maxRetries:1/0,minimumBackoff:200,maximumBackoff:3e4};function gl(t){if(!z_(t))return;return Sw(bg(null==t?void 0:t.preferredAudioCodecs,P),bg(null==t?void 0:t.preferredVideoCodecs,P),nt(null==t?void 0:t.restrictToPlayerSize))}function Iw(t,i){if(!z_(t)&&!z_(i))return;var e;return Sw(Ew(null==t?void 0:t.preferredAudioCodecs,null==i?void 0:i.preferredAudioCodecs),Ew(null==t?void 0:t.preferredVideoCodecs,null==i?void 0:i.preferredVideoCodecs),null!=(e=null==t?void 0:t.restrictToPlayerSize)?e:null==i?void 0:i.restrictToPlayerSize)}function Sw(t,i,e){if(0!==t.length||0!==i.length||void 0!==e)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===i.length?void 0:i,restrictToPlayerSize:e}}function Ew(t,i){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=i?i:[]}function bw(t,i){if(void 0!==i)switch(t){case Tw.Yv:return i.preferredVideoCodecs;case Tw.Gv:return i.preferredAudioCodecs;default:return}}function Lw(t){switch(t){case"all":case"content":return t;default:return"none"}}function kw(t){const i=Zr(t||{});return i.libraryLocation&&(i.libraryLocation=Wa(i.libraryLocation,!0)),i.isEmbeddable=Boolean(i.isEmbeddable),i.cast=function(t){const i=uw(t?t.chromecast:void 0),e=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:i,strategy:e}}(i.cast),i.ads=pw(i.ads),i.analytics=yw(i.analytics),i.mutedAutoplay=Lw(i.mutedAutoplay),i.allowNativeFullscreen=Boolean(i.allowNativeFullscreen),i.allowMixedContent=Boolean(i.allowMixedContent),i.persistVolume=Boolean(i.persistVolume),i.liveOffset=function(t){return Number(t)||void 0}(i.liveOffset),i.hlsDateRange=function(t){return Boolean(t)}(i.hlsDateRange),i.retainPlaybackRateOnSourceChange=Boolean(i.retainPlaybackRateOnSourceChange),i.license=function(t){return ae(t)?t:void 0}(i.license),i.licenseUrl=function(t){if(!t)return;try{return Wa(t)}catch(t){return void fe.Vv("Invalid 'licenseUrl', falling back to default URL")}}(i.licenseUrl),i.vr=function(t){return{useWebXR:Boolean(t&&t.useWebXR)}}(i.vr),i.abr=gl(i.abr),i.retryConfiguration=function(t){const i=oe({},Dw);return void 0!==t&&(void 0!==t.maxRetries&&(i.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(i.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(i.maximumBackoff=Number(t.maximumBackoff))),i}(i.retryConfiguration),i.hideDeprecationWarnings=Boolean(i.hideDeprecationWarnings),i}function Cw(t){return{E_:t.E_,ct:t.ct,C_:t.C_,lt:t.lt,j_:t.j_,Y_:t.Y_,q_:t.q_,Z_:t.Z_,cg:t.cg,gg:t.gg,vg:t.vg,Mg:t.Mg,Ng:t.Ng}}function xw(t,i){const e=i.Ng,s=i.Y_;t.Ng=e,t.Y_=s}function Ta(t,i,e){if(i===e)return;const s=i.E_,n=i.ct,r=i.Y_,h=i.q_,o=i.Z_,a=i.cg,u=i.gg,c=(i.Mg,i.vg,i.Ng),l=e.E_,d=e.ct,f=e.C_,_=e.j_,g=e.Y_,w=e.q_,A=e.Z_,v=e.cg,m=e.gg,p=(e.Mg,e.vg,e.Ng);a!==ow.Rv&&t.mo(new bl(l,v)),w&&!h?t.mo(new ws(l)):!w&&h&&t.mo(new vh(l)),v>=ow.Vn&&t.mo(new Wi(l,v)),d===n||j(d)&&j(n)||t.mo(new ts(d)),A!==o&&t.mo(new se(l,A)),l!==s&&t.mo(new Tc(l,void 0)),f&&t.mo(new Ds(l)),v>=ow.Uv&&t.mo(new Xi(l,v)),m&&!u?t.mo(new ja(l)):!m&&u&&t.mo(new _e(l)),p===c&&g===r||t.mo(new Ve(l,p)),v>=ow.Qv&&t.mo(new mt(l,v)),v>=ow.Fv&&t.mo(new Yi(l,v)),v!==a&&t.mo(new Qi(l,v)),_&&t.mo(new me(_))}r(),r(),function(t){t.Gv="audio",t.Yv="video",t.Eu="text",t.Wv="image",t.Hv="unknown"}(Tw||(Tw={})),function(t){t.NONE="none",t.ALL="all",t.CONTENT="content"}(Nw||(Nw={})),r();var jt=class extends gg{constructor(i){super(t.mA),this.currentSource=i}};r();var dt=class extends gg{constructor(){super(t.DA)}};r();var ns=class extends gg{constructor(){super(t.SA)}},Ow=class extends _g{m_(){return this.qv}get P_(){return this.B_()}B_(){return this.Xv}Ag(){return this.Al}yg(){return this.Zv}Kv(t){const i=this.p_;if(i===t)return;i.A_(this.Hg);const e=Cw(this),s=this.S_(),n=this.Cg(),r=this.xg();this.p_=t,this.qv.Ew=t.ht,this.Zv.Ew=t.rt,this.Al.Ew=t.nt,this.Xv.Ew=t.P_,void 0!==e&&Ta(this,e,this);const h=this.S_();h!==s&&this.mo(new jt(h)),this.Cg()!==n&&this.mo(new dt),this.xg()!==r&&this.mo(new ns),t.d_(this.Hg)}async cn(){await super.cn(),this.qv.cn(),this.Zv.cn(),this.Al.cn(),this.Xv.cn()}constructor(t){super(t),this.qv=new As,this.Zv=new As,this.Al=new Ac,this.Xv=new ra,this.qv.Ew=t.ht,this.Zv.Ew=t.rt,this.Al.Ew=t.nt,this.Xv.Ew=t.P_}};r();var jw=class extends Ow{F_(){return function(t){let i=0,e=0,s=0,n=0,r=0,h=0,o=0;for(const a of t)i+=a.Jv,e+=a.$v,s+=a.tm,n+=a.im,r+=a.nm,h+=a.hm.amountOfBufferedAudioSegments,o+=a.hm.amountOfBufferedVideoSegments;return{Jv:i,$v:e,tm:s,im:n,nm:r,hm:{amountOfBufferedAudioSegments:h,amountOfBufferedVideoSegments:o}}}(this.um.map((t=>t.Q_)))}Rg(){return tl(this.um.map((t=>t.Rg()))).then(xs)}Wn(){return tl(this.um.map((t=>t.Wn()))).then(xs)}zg(){if(!this.lo){for(const t of this.um)t.zg();this.lo=!0}}y_(){const t=[];for(const i of this.um)t.push(...i.y_());return t}Vg(t){let i=!1;for(const e of this.um)i=e.Vg(t)||i;return i}mo(t){this.Vg(t)||super.mo(t)}get Ew(){return this.p_}set Ew(t){this.Kv(t)}lm(t){this.um.push(t)}dm(t){Et(this.um,t)}Kv(t){if(t===this.p_)return;const i=this.p_;i.jg(),super.Kv(t),t.Og(i)}Yg(){for(const t of this.um)t.Yg()}async cn(){this.Bo(),this.p_.jg();for(const t of this.um)this.p_!==t&&await t.cn();await super.cn()}constructor(t){super(t),this.um=[],this.lo=!1,this.fm=!1,this.lm(t)}};r(),r();var ce=class extends Jo{get name(){return"THEOplayerError"}get category(){return Ku.fromCode(this.code)}constructor(t,i,e){super(i,e),this.code=t}};r();var zw,Yr=class extends ce{get name(){return"ContentProtectionError"}constructor(t,i,e,s,n,r,h,o){super(t,i,e),this.url=s,this.status=n,this.statusText=r,this.response=h,this.systemCode=o}};!function(t){t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR"}(zw||(zw={}));var cc=class extends Fc{get name(){return"MediaError"}constructor(t,i,e,s){super(i),this.code=t,this.message=null!=i?i:"Unknown error",this.cause=e,this.systemCode=s,b.captureStackTrace&&b.captureStackTrace(this,this.constructor)}};function Pw(t){Vc(t,"MEDIA_ERR_ABORTED",1),Vc(t,"MEDIA_ERR_NETWORK",2),Vc(t,"MEDIA_ERR_DECODE",3),Vc(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),Vc(t,"MEDIA_ERR_ENCRYPTED",5)}function Qh(t){var i,e;return function(t){return t.category===Ku.CONTENT_PROTECTION}(t)?new cc(5,t.message,null==(i=t.cause)?void 0:i.message,t.systemCode):new cc(Bw(t.code),t.message,null==(e=t.cause)?void 0:e.message)}function Bw(t){if(t===le.MEDIA_ABORTED)return 1;if(t===le.MANIFEST_LOAD_ERROR||t===le.MEDIA_LOAD_ERROR||t===le.SUBTITLE_LOAD_ERROR)return 2;if(t===le.MEDIA_DECODE_ERROR)return 3;if(t===le.MEDIA_NOT_SUPPORTED)return 4;const i=Ku.fromCode(t);return i===Ku.NETWORK?2:i===Ku.SOURCE?4:i===Ku.LICENSE?6:i===Ku.CONTENT_PROTECTION?5:i===Ku.AD?7:3}function cl(t){return new ce(Rw(t.code),t.message,t)}function Rw(t){switch(t){case 1:return le.MEDIA_ABORTED;case 2:return le.NETWORK_ERROR;case 3:return le.MEDIA_DECODE_ERROR;case 4:return le.SOURCE_NOT_SUPPORTED;case 5:return le.CONTENT_PROTECTION_ERROR;case 6:return le.LICENSE_ERROR;case 7:return le.AD_ERROR}}Pw(cc),Pw(cc.prototype),r(),r(),r(),r(),r();var qe=class extends co{tt(t){return super.tt(t)}ha(){return jg(this)}};r(),r(),r(),r();var Uw=class{get Nw(){return this._m}get U(){return this._m.length}get oa(){return this.Ua||(this.Ua=function(t){const i=t.Nw.map((t=>t.oa));return i.item=i=>{const e=0|i,s=t.Iw(e);return s&&s.oa||void 0},i}(this)),this.Ua}gm(t){this._m.push(t),this.Ua&&this.Ua.push(t.oa)}wm(t){Et(this._m,t),this.Ua&&Et(this.Ua,t.oa)}Iw(t){return this._m[t]}Am(t){return Yn(t)?function(t,i){for(const e of i)if(!na(t,e))return!1;return!0}(this._m,t):na(this._m,t)}Wn(){Ri(this._m),this.Ua&&Ri(this.Ua)}constructor(){this._m=[],this.Ua=void 0}};r();var Oe=class extends bo{ha(){return new Qw(this.Lt.oa)}constructor(t){super(Os.mw),this.Lt=t}},Qw=class extends te{constructor(t){super("update"),this.track=t}};r();var Fw=0;function mu(){return Fw++}var Yw=0;var Gw=0;function Vw(){return Gw++}var Ww=0;function Hw(){return Ww++}var qw=0;var Xw=class extends i{get Pw(){}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.vm=t,this.mo(new de(this)))}get vm(){return this.pm.enabled}set vm(t){this.pm.enabled=t}get oa(){return this.Ua||(this.Ua=Di(this)),this.Ua}get o(){return this.ym}get Bw(){return this.Mm}get zt(){return this.pm.kind}get dh(){return this.Tm}set dh(t){t!==this.Tm&&(this.Tm=t,this.mo(new Oe(this)))}get gs(){return this.pm.language}get Xw(){return this.Rt?"enabled":"disabled"}get Nm(){return this.pm}get Uw(){return this._m}get Qw(){}set Qw(t){}Dm(t){this.Rt=t}Im(){this.Rt=this.vm}constructor(t){super(),this.$w=Tw.Gv,this.Le=!1,this.Ua=void 0,this.pm=t,this.Mm=mu(),this.ym=qw+++"",this.Tm=t.label,this._m=new Uw,this.Im()}};r();var Zw=0;var Kw=class extends i{get Pw(){}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.vm=t,this.mo(new de(this)))}get vm(){return!!this.pm.selected}set vm(t){this.pm.selected=t}get oa(){return this.Ua||(this.Ua=Di(this)),this.Ua}get o(){return this.ym}get Bw(){return this.Mm}get zt(){return"main"}get dh(){return this.Tm}set dh(t){t!==this.Tm&&(this.Tm=t,this.mo(new Oe(this)))}get gs(){return this.pm.language}get Xw(){return this.Rt?"enabled":"disabled"}get Nm(){return this.pm}get Uw(){return this._m}get Qw(){}set Qw(t){}Im(){this.Rt=this.vm}Dm(t){this.Rt=t}constructor(t){super(),this.$w=Tw.Yv,this.Le=!1,this.Ua=void 0,this.pm=t,this.Mm=mu(),this.ym=Zw+++"",this._m=new Uw,this.Tm=t.label,this.Im()}};r();var Ot,Jw=class extends gg{constructor(i){super(t.fA),this.R_=i}};r(),r(),function(t){t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR"}(Ot||(Ot={})),r(),r(),r(),r();var $w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),tA=16383,iA=/[\t\n\f\r ]/g;function eA(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:sA()}function sA(){throw new b("Invalid base64 input")}function vi(t){let i=t;iA.test(i)&&(i=i.replace(iA,""));let e=i.length;e%4==0&&e>=1&&"="===i[e-1]&&(e>=2&&"="===i[e-2]?e-=2:e-=1,i=i.substr(0,e));const s=e%4;if(1===s)return sA();const n=0===s?0:4-s,r=new T(function(t,i){return 3*(t+i)/4-i}(e,n)),h=n>0?e-4:e;let o,a=0,u=0;for(;a<h;a+=4)o=eA(i.charCodeAt(a))<<18|eA(i.charCodeAt(a+1))<<12|eA(i.charCodeAt(a+2))<<6|eA(i.charCodeAt(a+3)),r[u++]=o>>16&255,r[u++]=o>>8&255,r[u++]=255&o;return 2===n?(o=eA(i.charCodeAt(a))<<2|eA(i.charCodeAt(a+1))>>4,r[u++]=255&o):1===n&&(o=eA(i.charCodeAt(a))<<10|eA(i.charCodeAt(a+1))<<4|eA(i.charCodeAt(a+2))>>2,r[u++]=o>>8&255,r[u++]=255&o),r}function nA(t,i,e){return $w[t>>2]+$w[(3&t)<<4|i>>4]+$w[(15&i)<<2|e>>6]+$w[63&e]}function rA(t,i,e){const s=[];for(let n=i;n<e;n+=3)s.push(nA(t[n],t[n+1],t[n+2]));return s.join("")}function Fh(t){const i=t.length,e=i%3,s=[],n=i-e;for(let i=0;i<n;i+=tA)s.push(rA(t,i,x.min(n,i+tA)));if(1===e){const e=t[i-1];s.push($w[e>>2]+$w[(3&e)<<4]+"==")}else if(2===e){const e=t[i-2],n=t[i-1];s.push($w[e>>2]+$w[(3&e)<<4|n>>4]+$w[(15&n)<<2]+"=")}return s.join("")}function hA(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}var oA=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],_a=ArrayBuffer.isView||(t=>t&&na(oA,Do.call(t)));function ba(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;return ms(new T(t),new T(i))}function ms(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;for(let e=0;e<t.length;e+=1)if(t[e]!==i[e])return!1;return!0}function Vh(t){const i=t.reduce(((t,i)=>t+i.byteLength),0);return aA(t,i)}function aA(t,i){const e=new T(i);let s=0;for(const i of t)e.set(i,s),s+=i.byteLength;return e}function uA(t,i,e){const s=new T(t.byteLength+i.byteLength),n=iv(t,0,e),r=iv(t,e);return s.set(n),s.set(i,e),s.set(r,e+i.byteLength),s}function Sa(t){return vi(t).buffer}function cA(t){return Fh(new T(t))}function wa(t){return Fh(XA(t))}function hn(t,i){const e=i.qu,s=t.getUint8(e>>3),n=1<<7-(7&e);return i.Sm(1),(s&n)===n?1:0}function ls(t,i,e){let s=0;for(let n=0;n<e;n++)s=2*s+hn(t,i);return s}r();var Yc=class t{get qu(){return this.Wu}Sm(t){this.Wu+=t}Em(t){this.Wu=t}Lm(){return new t(this.qu)}constructor(t=0){this.Wu=t}};var lA=x.clz32||function(t){let i=32,e=t>>16;return e&&(i-=16,t=e),e=t>>8,e&&(i-=8,t=e),e=t>>4,e&&(i-=4,t=e),e=t>>2,e&&(i-=2,t=e),e=t>>1,e?i-2:i-t};r(),r();var Mt=null;try{Mt=new WebAssembly.Instance(new WebAssembly.Module(new T([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(g){}function mi(t,i,e){this.low=0|t,this.high=0|i,this.unsigned=!!e}function $h(t){return!0===(t&&t.Cm)}function dA(t){var i=x.clz32(t&-t);return t?31-i:i}mi.prototype.Cm,_.defineProperty(mi.prototype,"Cm",{value:!0}),mi.isLong=$h;var fA={},_A={};function Ih(t,i){var e,s,n;return i?(n=0<=(t>>>=0)&&t<256)&&(s=_A[t])?s:(e=He(t,0,!0),n&&(_A[t]=e),e):(n=-128<=(t|=0)&&t<128)&&(s=fA[t])?s:(e=He(t,t<0?-1:0,!1),n&&(fA[t]=e),e)}function _t(t,i){if(j(t))return i?pA:Ws;if(i){if(t<0)return pA;if(t>=AA)return NA}else{if(t<=-vA)return DA;if(t+1>=vA)return TA}return t<0?_t(-t,i).neg():He(t%ol|0,t/ol|0,i)}function He(t,i,e){return new mi(t,i,e)}mi.fromInt=Ih,mi.fromNumber=_t,mi.fromBits=He;var gA=x.pow;function wA(t,i,e){if(0===t.length)throw b("empty string");if("number"==typeof i?(e=i,i=!1):i=!!i,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return i?pA:Ws;if((e=e||10)<2||36<e)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw b("interior hyphen");if(0===s)return wA(t.substring(1),i,e).neg();for(var n=_t(gA(e,8)),r=Ws,h=0;h<t.length;h+=8){var o=x.min(8,t.length-h),a=C(t.substring(h,h+o),e);if(o<8){var u=_t(gA(e,o));r=r.mul(u).add(_t(a))}else r=(r=r.mul(n)).add(_t(a))}return r.unsigned=i,r}function Ke(t,i){return"number"==typeof t?_t(t,i):"string"==typeof t?wA(t,i):He(t.low,t.high,"boolean"==typeof i?i:t.unsigned)}mi.fromString=wA,mi.fromValue=Ke;var ol=4294967296,AA=ol*ol,vA=AA/2,mA=Ih(1<<24),Ws=Ih(0);mi.ZERO=Ws;var pA=Ih(0,!0);mi.UZERO=pA;var pl=Ih(1);mi.ONE=pl;var yA=Ih(1,!0);mi.UONE=yA;var MA=Ih(-1);mi.NEG_ONE=MA;var TA=He(-1,2147483647,!1);mi.MAX_VALUE=TA;var NA=He(-1,-1,!0);mi.MAX_UNSIGNED_VALUE=NA;var DA=He(0,-2147483648,!1);mi.MIN_VALUE=DA;var To=mi.prototype;To.toInt=function(){return this.unsigned?this.low>>>0:this.low},To.toNumber=function(){return this.unsigned?(this.high>>>0)*ol+(this.low>>>0):this.high*ol+(this.low>>>0)},To.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(DA)){var i=_t(t),e=this.div(i),s=e.mul(i).sub(this);return e.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=_t(gA(t,6),this.unsigned),r=this,h="";;){var o=r.div(n),a=(r.sub(o.mul(n)).toInt()>>>0).toString(t);if((r=o).isZero())return a+h;for(;a.length<6;)a="0"+a;h=""+a+h}},To.getHighBits=function(){return this.high},To.getHighBitsUnsigned=function(){return this.high>>>0},To.getLowBits=function(){return this.low},To.getLowBitsUnsigned=function(){return this.low>>>0},To.getNumBitsAbs=function(){if(this.isNegative())return this.eq(DA)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,i=31;i>0&&0==(t&1<<i);i--);return 0!=this.high?i+33:i+1},To.isZero=function(){return 0===this.high&&0===this.low},To.eqz=To.isZero,To.isNegative=function(){return!this.unsigned&&this.high<0},To.isPositive=function(){return this.unsigned||this.high>=0},To.isOdd=function(){return 1==(1&this.low)},To.isEven=function(){return 0==(1&this.low)},To.equals=function(t){return $h(t)||(t=Ke(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},To.eq=To.equals,To.notEquals=function(t){return!this.eq(t)},To.neq=To.notEquals,To.ne=To.notEquals,To.lessThan=function(t){return this.comp(t)<0},To.lt=To.lessThan,To.lessThanOrEqual=function(t){return this.comp(t)<=0},To.lte=To.lessThanOrEqual,To.le=To.lessThanOrEqual,To.greaterThan=function(t){return this.comp(t)>0},To.gt=To.greaterThan,To.greaterThanOrEqual=function(t){return this.comp(t)>=0},To.gte=To.greaterThanOrEqual,To.ge=To.greaterThanOrEqual,To.compare=function(t){if($h(t)||(t=Ke(t)),this.eq(t))return 0;var i=this.isNegative(),e=t.isNegative();return i&&!e?-1:!i&&e?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},To.comp=To.compare,To.negate=function(){return!this.unsigned&&this.eq(DA)?DA:this.not().add(pl)},To.neg=To.negate,To.add=function(t){$h(t)||(t=Ke(t));var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=0,u=0,c=0,l=0;return c+=(l+=n+(65535&t.low))>>>16,u+=(c+=s+o)>>>16,a+=(u+=e+h)>>>16,a+=i+r,He((c&=65535)<<16|(l&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},To.subtract=function(t){return $h(t)||(t=Ke(t)),this.add(t.neg())},To.sub=To.subtract,To.multiply=function(t){if(this.isZero())return this;if($h(t)||(t=Ke(t)),Mt)return He(Mt.mul(this.low,this.high,t.low,t.high),Mt.get_high(),this.unsigned);if(t.isZero())return this.unsigned?pA:Ws;if(this.eq(DA))return t.isOdd()?DA:Ws;if(t.eq(DA))return this.isOdd()?DA:Ws;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(mA)&&t.lt(mA))return _t(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=65535&t.low,u=0,c=0,l=0,d=0;return l+=(d+=n*a)>>>16,c+=(l+=s*a)>>>16,l&=65535,c+=(l+=n*o)>>>16,u+=(c+=e*a)>>>16,c&=65535,u+=(c+=s*o)>>>16,c&=65535,u+=(c+=n*h)>>>16,u+=i*a+e*o+s*h+n*r,He((l&=65535)<<16|(d&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},To.mul=To.multiply,To.divide=function(t){if($h(t)||(t=Ke(t)),t.isZero())throw b("division by zero");var i,e,s;if(Mt)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?He((this.unsigned?Mt.div_u:Mt.div_s)(this.low,this.high,t.low,t.high),Mt.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?pA:Ws;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return pA;if(t.gt(this.shru(1)))return yA;s=pA}else{if(this.eq(DA))return t.eq(pl)||t.eq(MA)?DA:t.eq(DA)?pl:(i=this.shr(1).div(t).shl(1)).eq(Ws)?t.isNegative()?pl:MA:(e=this.sub(t.mul(i)),s=i.add(e.div(t)));if(t.eq(DA))return this.unsigned?pA:Ws;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=Ws}for(e=this;e.gte(t);){i=x.max(1,x.floor(e.toNumber()/t.toNumber()));for(var n=x.ceil(x.log(i)/x.LN2),r=n<=48?1:gA(2,n-48),h=_t(i),o=h.mul(t);o.isNegative()||o.gt(e);)o=(h=_t(i-=r,this.unsigned)).mul(t);h.isZero()&&(h=pl),s=s.add(h),e=e.sub(o)}return s},To.div=To.divide,To.modulo=function(t){return $h(t)||(t=Ke(t)),Mt?He((this.unsigned?Mt.rem_u:Mt.rem_s)(this.low,this.high,t.low,t.high),Mt.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},To.mod=To.modulo,To.rem=To.modulo,To.not=function(){return He(~this.low,~this.high,this.unsigned)},To.countLeadingZeros=function(){return this.high?x.clz32(this.high):x.clz32(this.low)+32},To.clz=To.countLeadingZeros,To.countTrailingZeros=function(){return this.low?dA(this.low):dA(this.high)+32},To.ctz=To.countTrailingZeros,To.and=function(t){return $h(t)||(t=Ke(t)),He(this.low&t.low,this.high&t.high,this.unsigned)},To.or=function(t){return $h(t)||(t=Ke(t)),He(this.low|t.low,this.high|t.high,this.unsigned)},To.xor=function(t){return $h(t)||(t=Ke(t)),He(this.low^t.low,this.high^t.high,this.unsigned)},To.shiftLeft=function(t){return $h(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?He(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):He(0,this.low<<t-32,this.unsigned)},To.shl=To.shiftLeft,To.shiftRight=function(t){return $h(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?He(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):He(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},To.shr=To.shiftRight,To.shiftRightUnsigned=function(t){return $h(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?He(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):He(32===t?this.high:this.high>>>t-32,0,this.unsigned)},To.shru=To.shiftRightUnsigned,To.shr_u=To.shiftRightUnsigned,To.rotateLeft=function(t){var i;return $h(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?He(this.high,this.low,this.unsigned):t<32?(i=32-t,He(this.low<<t|this.high>>>i,this.high<<t|this.low>>>i,this.unsigned)):(i=32-(t-=32),He(this.high<<t|this.low>>>i,this.low<<t|this.high>>>i,this.unsigned))},To.rotl=To.rotateLeft,To.rotateRight=function(t){var i;return $h(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?He(this.high,this.low,this.unsigned):t<32?(i=32-t,He(this.high<<i|this.low>>>t,this.low<<i|this.high>>>t,this.unsigned)):(i=32-(t-=32),He(this.low<<i|this.high>>>t,this.high<<i|this.low>>>t,this.unsigned))},To.rotr=To.rotateRight,To.toSigned=function(){return this.unsigned?He(this.low,this.high,!1):this},To.toUnsigned=function(){return this.unsigned?this:He(this.low,this.high,!0)},To.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},To.toBytesLE=function(){var t=this.high,i=this.low;return[255&i,i>>>8&255,i>>>16&255,i>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},To.toBytesBE=function(){var t=this.high,i=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i]},mi.fromBytes=function(t,i,e){return e?mi.fromBytesLE(t,i):mi.fromBytesBE(t,i)},mi.fromBytesLE=function(t,i){return new mi(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,i)},mi.fromBytesBE=function(t,i){return new mi(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],i)};var Se=mi;function IA(t,i){return t.lessThan(i)?t:i}function SA(t){if(t>=55296&&t<=57343)throw new b("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function EA(t,i){return t>>i&63|128}function bA(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(SA(t),i.push(t>>12&15|224),i.push(EA(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(EA(t,12)),i.push(EA(t,6))),i.push(63&t|128)):i.push(t)}function LA(t,i){if(i.qu>=t.length)throw new b("Invalid byte index");const e=255&t[i.qu];if(i.Sm(1),128==(192&e))return 63&e;throw new b("Invalid continuation byte")}function kA(t,i){const e=i.qu;if(e>t.length)throw new b("Invalid byte index");if(e===t.length)return!1;const s=255&t[e];if(i.Sm(1),0==(128&s))return s;if(192==(224&s)){const e=(31&s)<<6|LA(t,i);if(e>=128)return e;throw new b("Invalid continuation byte")}if(224==(240&s)){const e=(15&s)<<12|LA(t,i)<<6|LA(t,i);if(e>=2048)return SA(e),e;throw new b("Invalid continuation byte")}if(240==(248&s)){const e=(7&s)<<18|LA(t,i)<<12|LA(t,i)<<6|LA(t,i);if(e>=65536&&e<=1114111)return e}throw new b("Invalid UTF-8 detected")}r(),r();var CA=65279;var xA=[128,64,32,16,8,4,2,1],OA=class{xm(t){return jA(this.Om,t)}constructor(t){this.Om=t}};function jA(t,i){return(t&i)===i}function eu(t,i){return jA(t,xA[i])}function F(t,i){const e=t.getUint8(i.qu);return i.Sm(1),e}function zA(t,i,e){t.setUint8(i.qu,e),i.Sm(1)}function lc(t,i,e){const s=iv(xe(t),i.qu,i.qu+e);return i.Sm(s.byteLength),s}function qh(t,i,e){xe(t).set(xe(e),i.qu),i.Sm(e.byteLength)}function PA(t,i,e){return i.qu+e<=t.byteLength}function Fi(t,i,e,s){return void 0===s&&(s=!1),s?function(t,i,e){let s=0,n=1;for(let r=0;r<e;r++)s+=F(t,i)*n,n*=256;return s}(t,i,e):function(t,i,e){let s=0;for(let n=0;n<e;n++)s=256*s+F(t,i);return s}(t,i,e)}function BA(t,i,e){void 0===e&&(e=!1);const s=t.getUint16(i.qu,e);return i.Sm(2),s}function RA(t,i,e,s){void 0===s&&(s=!1),t.setUint16(i.qu,e,s),i.Sm(2)}function Sn(t,i,e){void 0===e&&(e=!1);const s=t.getUint32(i.qu,e);return i.Sm(4),s}function Pu(t,i,e,s){void 0===s&&(s=!1),t.setUint32(i.qu,e,s),i.Sm(4)}function De(t,i,e){void 0===e&&(e=!1);const s=Sn(t,i,e),n=Sn(t,i,e),r=e?n:s,h=e?s:n;return Se.fromBits(h,r,!0)}function UA(t,i,e,s){void 0===s&&(s=!1);const n=e.getHighBitsUnsigned(),r=e.getLowBitsUnsigned(),h=s?n:r;Pu(t,i,s?r:n,s),Pu(t,i,h,s)}function QA(t,i){return du(t,i)}function Vo(t,i,e){return zh(sv(lc(t,i,e)))}function FA(t,i){const e=F(t,i);let s;return 0==(128&e)?s=e:192==(224&e)?s=64*(31&e)+(63&F(t,i)):224==(240&e)?s=4096*(15&e)+64*(63&F(t,i))+(63&F(t,i)):240==(248&e)&&(s=262144*(7&e)+4096*(63&F(t,i))+64*(63&F(t,i))+(63&F(t,i))),s}function du(t,i){return YA(t,i,!0)}function YA(t,i,e){const s=[];for(;i.qu<t.byteLength;){const n=F(t,i);if(e&&!n)break;s.push(n)}return zh(s)}function GA(t,i,e){const s=e.length;for(let n=0;n<s;n+=1){zA(t,i,e.charCodeAt(n))}}function VA(t,i){if(!(i.qu+2<=t.byteLength))return;const e=t.getUint8(i.qu),s=t.getUint8(i.qu+1);return(254!==e||255!==s)&&(255===e&&254===s||void 0)}function WA(t,i){const e=VA(t,i);return void 0!==e&&i.Sm(2),Fa(t,i,!0===e)}function Fa(t,i,e){return void 0===e&&(e=!1),HA(t,i,e,!0)}function HA(t,i,e,s){const n=[];for(;i.qu+2<=t.byteLength;){const r=BA(t,i,e);if(s&&!r)break;n.push(r)}return zh(n)}function qA(t,i,e,s){void 0===s&&(s=!1);const n=e.length;for(let r=0;r<n;r+=1){RA(t,i,e.charCodeAt(r),s)}}function cs(t){return YA(Ao(t),new Vr,!1)}function XA(t){const i=new T(t.length);return GA(Ao(i),new Vr,t),i}function ZA(t,i){return void 0===i&&(i=!1),HA(Ao(t),new Vr,i,!1)}function KA(t,i){void 0===i&&(i=!1);const e=new T(2*t.length);return qA(Ao(e),new Vr,t,i),e}function JA(t,i){return i.qu+3<=t.byteLength&&(239===t.getUint8(i.qu)&&187===t.getUint8(i.qu+1)&&191===t.getUint8(i.qu+2))}function yl(t,i){return function(t,i,e){const s=[],n=JA(t,i);n&&i.Sm(3);for(;i.qu<t.byteLength;){const n=FA(t,i);if(void 0===n)break;if(e&&0===n)break;s.push(n)}return $g(s)}(t,i,!0)}function Aa(t){return function(t){return $g(t)}(function(t,i){const e=[],s=new Vr;let n;if(!i){if(n=kA(t,s),!1===n)return e;n===CA||e.push(n)}for(;!1!==(n=kA(t,s));)e.push(n);return e}(xe(t)))}function Xh(t){return new T(function(t){const i=[];for(const e of t)bA(e,i);return i}(function(t){const i=[];let e=0;const s=t.length;for(;e<s;){const n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){const s=t.charCodeAt(e++);56320==(64512&s)?i.push(((1023&n)<<10)+(1023&s)+65536):(i.push(n),e--)}else i.push(n)}return i}(t)))}function $A(t,i){if(JA(t,i))return yl(t,i);if(void 0!==VA(t,i))return WA(t,i);if(i.qu+4<=t.byteLength){if(0===t.getUint8(i.qu)&&0===t.getUint8(i.qu+2))return Fa(t,i,!1);if(0===t.getUint8(i.qu+1)&&0===t.getUint8(i.qu+3))return Fa(t,i,!0)}return yl(t,i)}function iv(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new T(t.buffer,t.byteOffset+i,e-i)}function We(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function Ao(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function xe(t){return new T(t.buffer,t.byteOffset,t.byteLength)}function ev(t){return t instanceof ArrayBuffer||_a(t)}function Ur(t){return t instanceof ArrayBuffer?new T(t):xe(t)}function Th(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),t.slice?t.slice(i,e):Ge(iv(t,i,e))}function Ge(t){if(t.slice)return t.slice(0);{const i=new T(t.byteLength);return i.set(t,0),i}}function sv(t){return[].slice.call(t)}var Ra,Vr=class t{get qu(){return this.Wu}Sm(t){this.Wu+=t}Em(t){this.Wu=t}Lm(){return new t(this.qu)}jm(){return new Yc(this.qu<<3)}constructor(t=0){this.Wu=t}};function Lh(t){let i=t.toLowerCase(),e=0,s=0;Zg(i,"0x")&&(i=i.substring(2));const n=new T(x.ceil(i.length/2));for(1==(1&i.length)&&(e=1,n[s++]=C(i[0],16));e<i.length;e+=2)n[s++]=C(i.substr(e,2),16);return n}function nv(t){return.001*t}r(),function(t){t.zm="cue",t.Pm="region",t.Bm="stylesheet"}(Ra||(Ra={})),r(),r();var Sl,rv={"line-left":"start",center:"middle","line-right":"end"},hv={start:"line-left",middle:"center",end:"line-right"};function ov(t,i){if("auto"===t)switch(i){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function av(t,i){if("auto"===t)switch(i){case"left":return 0;case"right":return 100;default:return 50}return function(t,i){const e="number"==typeof t?t:S(t);return j(e)?i:e}(t,50)}r(),r(),r(),function(t){t.Rm="uo",t.Um="yo",t.mw="Ln"}(Sl||(Sl={}));var au=class extends bo{constructor(t,i){super(t),this.Qm=i}},Ja=class extends te{constructor(t,i){super(t),this.cue=i}};function Rh(t){const i=[Sl.Rm,Sl.Um,Sl.mw];let e;const s={get track(){return t.Lt.oa},get id(){return t.o},get uid(){return t.Bw},get startTime(){return t.Fm},set startTime(i){t.Fm=i},get endTime(){return t.Ym},set endTime(i){t.Ym=i},get content(){return t.O},addEventListener(t,i){const s=Ls(t,P);e.ln(s,i)},removeEventListener(t,i){const s=Ls(t,P);e.rn(s,i)}};return e=new H(s),t.ln(i,(t=>e.mo(t.oa))),s}function uv(){}function cv(t){return Ou(Rh(t),{get align(){return t.Gm},get line(){return t.Vm},get lineAlign(){return t.Wm},get position(){return t.ao},get positionAlign(){return t.Hm},get region(){return t.qm?t.qm.oa:null},get size(){return t.Xm},get snapToLines(){return t.Zm},get text(){return t.O},get vertical(){return t.Pt}})}r(),r();var yu=class extends au{ha(){return new lv(this.Qm.oa)}constructor(t){super(Sl.mw,t)}},lv=class extends Ja{constructor(t){super("update",t)}};r();var za=class extends bo{ha(){return new dv(this.Qm.oa)}constructor(t){super(Os.nw),this.Qm=t}},dv=class extends te{constructor(t){super("updatecue"),this.cue=t}},uo=.02;function fv(t,i){return Ua(t.Km,i.Km,uo)&&Ua(t.Jm,i.Jm,uo)&&t.o===i.o}var Hn=class extends i{get Fm(){return this.$m}set Fm(t){var i,e;this.$m!==t&&(this.$m=t,null==(i=this.tp)||i.ip(this),this.mo(new yu(this)),null==(e=this.tp)||e.mo(new za(this)))}get Ym(){return this.ep}set Ym(t){var i,e;this.ep!==t&&(this.ep=t,null==(i=this.tp)||i.ip(this),this.mo(new yu(this)),null==(e=this.tp)||e.mo(new za(this)))}get o(){return this.ym}get Bw(){return this.Mm}get oa(){return this.Ua||(this.Ua=this.ha()),this.Ua}ha(){return Rh(this)}get Yh(){return this.Kh}set Yh(t){this.Kh=t}get Lt(){return this.tp}set Lt(t){this.tp=t}get O(){return this.sp}set O(t){var i;this.sp!==t&&(this.sp=t,this.mo(new yu(this)),null==(i=this.tp)||i.mo(new za(this)))}get np(){return this.rp}set np(t){this.rp=t}hp(t){return this===t||Dg(this,t)&&fv(this,t)&&this.op(t)}op(t){return Ph(this.O,t.O)}ap(t,i){this.$m=t,this.ep=i,this.Km=t,this.Jm=i}cn(){this.Bo()}constructor(t,i,e,s,n){super(),this.Ua=void 0,this.tp=void 0,this.Kh=!1,this.cp=-1,this.Mm=Hw(),this.$m=t,this.ep=i,this.Km=t,this.Jm=i,this.sp=e,this.rp=Boolean(s),this.ym=null!=n?n:""}};function _v(t,i){return t.O===i.O&&t.Vm===i.Vm&&t.Wm===i.Wm&&t.ao===i.ao&&t.Hm===i.Hm&&t.qm===i.qm&&t.Zm===i.Zm&&t.Xm===i.Xm&&t.Gm===i.Gm&&t.Pt===i.Pt}var Hi=class extends Hn{get oa(){return this.Ua||(this.Ua=cv(this)),this.Ua}get $w(){return Ra.zm}op(t){return _v(this,t)}constructor(t,i,e,s,n){super(t,i,e,s,n),this.Vm="auto",this.Wm="start",this.ao="auto",this.Hm="auto",this.qm=void 0,this.Zm=!0,this.Xm=100,this.Gm="center",this.Pt=""}};function gv(t){const i=R_(t.Vm)?t.Vm:S(t.Vm);return j(i)||t.Zm||!(i<0||i>100)?j(i)?t.Zm?-1:100:i:100}function wv(t){return av(t.ao,t.Gm)}function Av(t){return ov(t.Hm,t.Gm)}function vv(t){const i=Av(t),e=wv(t);let s;switch(i){case"line-left":s=100-e;break;case"line-right":s=e;break;case"center":s=e<=50?2*e:2*(100-e)}return x.min(t.Xm,s)}function mv(t){return{get id(){return t.o},get identifier(){return t.o},get lines(){return t.lp},get regionAnchorX(){return t.dp},get regionAnchorY(){return t.fp},get scrollValue(){return t._p},get viewportAnchorX(){return t.gp},get viewportAnchorY(){return t.wp},get width(){return t.ji}}}r(),r();var pv=class{get oa(){return this.Ua||(this.Ua=mv(this)),this.Ua}get $w(){return Ra.Pm}constructor(t,i,e,s,n,r,h,o){this.o=t,this.ji=i,this.lp=e,this.dp=s,this.fp=n,this.gp=r,this.wp=h,this._p=o}};r(),r();var yv=1e6,Ps=class{Ap(t){return this.vp()*t}mp(t){return this.pp(t)>0}yp(t){return this.pp(t)>=0}Mp(t,i){return this.Np(t).Tp(i)}hp(t){return 0===this.pp(t)}Dp(t){return this.pp(t)<0}Tp(t){return this.pp(t)<=0}Ip(){return this.Sp()?this.Ep():this}bp(t){return this.gm(t.Ep())}Np(t){return this.bp(t).Ip()}};function Mv(t,i){return t.Lp()?i.Lp()?Ji.Wr:Ji.Rf:i.Lp()?Ji.Uf:t.kp()?i.kp()&&t.Sp()===i.Sp()?Ji.Wr:t.Sp()?Ji.Uf:Ji.Rf:i.Sp()?Ji.Rf:Ji.Uf}r(),r();var Tv=4294967296,Nv=Tv*Tv,Dv=Nv*Nv,Iv=Dv/2,is=class t{static Cp(i,e,s){return s?new t(i.toUnsigned(),e.toUnsigned()):new t(i.toSigned(),e.toSigned())}static xp(i){return i.unsigned?new t(i,Se.UZERO):new t(i,i.isNegative()?Se.NEG_ONE:Se.ZERO)}static Op(i,e){if(j(i))return e?t.jp:t.zp;if(e){if(i<0)return t.jp;if(i>=Dv)return t.Pp}else{if(i<=-Iv)return t.Bp;if(i+1>=Iv)return t.Rp}return i<0?t.Op(-i,e).Ep():t.Cp(Se.fromNumber(i%Nv),Se.fromNumber(i/Nv),e)}Up(){return this.Qp.unsigned}Fp(){return this.Yp.isZero()&&this.Qp.isZero()}Sp(){return this.Qp.isNegative()}Gp(){return this.Up()?t.Cp(this.Yp,this.Qp,!1):this}Vp(){return this.Up()?this:t.Cp(this.Yp,this.Qp,!0)}Wp(){return this.Yp}vp(){return this.Sp()?-this.Ep().vp():this.Qp.toNumber()*Nv+this.Yp.toUnsigned().toNumber()}Hp(){return this.Yp.toInt()}hp(t){return(this.Up()===t.Up()||this.Qp.getHighBits()>>>31!=1||t.Qp.getHighBits()>>>31!=1)&&(this.Qp.toUnsigned().eq(t.Qp.toUnsigned())&&this.Yp.toUnsigned().eq(t.Yp.toUnsigned()))}pp(t){if(this.hp(t))return Ji.Wr;const i=this.Sp(),e=t.Sp();if(i&&!e)return Ji.Uf;if(!i&&e)return Ji.Rf;if(!this.Up())return this.bp(t).Sp()?Ji.Uf:Ji.Rf;const s=this.Vp(),n=t.Vp(),r=n.Qp.comp(s.Qp);return r>0||0===r&&n.Yp.gt(s.Yp)?Ji.Uf:Ji.Rf}Dp(t){return this.pp(t)<0}Tp(t){return this.pp(t)<=0}qp(t){return this.pp(t)>0}Xp(t){return this.pp(t)>=0}Zp(){return new t(this.Yp.not(),this.Qp.not())}Kp(i){return new t(this.Yp.and(i.Yp),this.Qp.and(i.Qp))}Jp(i){return new t(this.Yp.or(i.Yp),this.Qp.or(i.Qp))}$p(i){const e=127&i;return 0===e?this:e<64?t.Cp(this.Yp.shl(e),this.Qp.shl(e).or(this.Yp.shru(64-e)),this.Up()):t.Cp(Se.ZERO,this.Yp.shl(e-64),this.Up())}iy(i){const e=127&i;return 0===e?this:e<64?t.Cp(this.Yp.shru(e).or(this.Qp.shl(64-e)),this.Qp.shr(e),this.Up()):t.Cp(this.Qp.shr(e-64),this.Qp.isNegative()?Se.NEG_ONE:Se.ZERO,this.Up())}ey(i){const e=127&i;return 0===e?this:e<64?t.Cp(this.Yp.shru(e).or(this.Qp.shl(64-e)),this.Qp.shru(e),this.Up()):64===e?t.Cp(this.Qp,Se.ZERO,this.Up()):t.Cp(this.Qp.shru(e-64),Se.ZERO,this.Up())}gm(i){const e=this.Qp.high>>>16,s=65535&this.Qp.high,n=this.Qp.low>>>16,r=65535&this.Qp.low,h=this.Yp.high>>>16,o=65535&this.Yp.high,a=this.Yp.low>>>16,u=65535&this.Yp.low,c=i.Qp.high>>>16,l=65535&i.Qp.high,d=i.Qp.low>>>16,f=65535&i.Qp.low,_=i.Yp.high>>>16,g=65535&i.Yp.high,w=i.Yp.low>>>16;let A=0,v=0,m=0,p=0,y=0,M=0,T=0,N=0;N+=u+(65535&i.Yp.low),T+=N>>>16,N&=65535,T+=a+w,M+=T>>>16,T&=65535,M+=o+g,y+=M>>>16,M&=65535,y+=h+_,p+=y>>>16,y&=65535,p+=r+f,m+=p>>>16,p&=65535,m+=n+d,v+=m>>>16,m&=65535,v+=s+l,A+=v>>>16,v&=65535,A+=e+c,A&=65535;const D=this.Up(),I=Se.fromBits(m<<16|p,A<<16|v,D),S=Se.fromBits(T<<16|N,y<<16|M,D);return t.Cp(S,I,D)}bp(t){return this.gm(t.Ep())}Ep(){return this.Zp().gm(t.sy)}oy(i){if(this.Fp()||i.Fp())return this.Up()?t.jp:t.zp;if(this.Sp())return i.Sp()?this.Ep().oy(i.Ep()):this.Ep().oy(i).Ep();if(i.Sp())return this.oy(i.Ep()).Ep();if(this.Qp.isZero()&&0===this.Yp.high&&i.Qp.isZero()&&0===i.Yp.high)return t.xp(this.Yp.multiply(i.Yp));const e=Se.fromBits(4294967295,0,!0),s=this.Yp.and(e),n=this.Yp.shru(32),r=this.Qp.and(e),h=this.Qp.shru(32),o=i.Yp.and(e),a=i.Yp.shru(32),u=i.Qp.and(e),c=i.Qp.shru(32);let l=Se.UZERO,d=Se.UZERO,f=Se.UZERO,_=Se.UZERO;l=l.add(s.mul(o)),d=d.add(l.shru(32)),l=l.and(e),d=d.add(n.mul(o)),f=f.add(d.shru(32)),d=d.and(e),d=d.add(s.mul(a)),f=f.add(d.shru(32)),d=d.and(e),f=f.add(r.mul(o)),_=_.add(f.shru(32)),f=f.and(e),f=f.add(n.mul(a)),_=_.add(f.shru(32)),f=f.and(e),f=f.add(s.mul(u)),_=_.add(f.shru(32)),f=f.and(e),_=_.add(h.mul(o)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(e);const g=Se.fromBits(l.getLowBitsUnsigned(),d.getLowBitsUnsigned(),!0),w=Se.fromBits(f.getLowBitsUnsigned(),_.getLowBitsUnsigned(),!0);return t.Cp(g,w,this.Up())}uy(i){let e,s,n=i;if(n.Fp())throw new RangeError("division by zero");if(this.Fp())return this.Up()?[t.jp,t.jp]:[t.zp,t.zp];if(this.Up()){if(n.Up()||(n=n.Vp()),n.qp(this))return[t.jp,this];if(n.qp(this.ey(1)))return s=t.ly,e=this.bp(n),[s,e];s=t.jp}else{if(this.hp(t.Bp)){if(n.hp(t.sy)||n.hp(t._y))return[t.Bp,t.zp];if(n.hp(t.Bp))return[t.sy,t.zp];{const i=this.iy(1).gy(n).$p(1);return i.hp(t.zp)?s=n.Sp()?t.sy:t._y:(e=this.bp(n.oy(i)),s=i.gm(e.gy(n))),e=this.bp(n.oy(s)),[s,e]}}if(n.hp(t.Bp))return this.Up()?[t.jp,this]:[t.zp,this];if(this.Sp())return n.Sp()?this.Ep().uy(n.Ep()):([s,e]=this.Ep().uy(n),[s.Ep(),e.Ep()]);if(n.Sp())return[s,e]=this.uy(n.Ep()),[s.Ep(),e.Ep()];s=t.zp}for(e=this;e.Xp(n);){let i=x.max(1,x.floor(e.vp()/n.vp()));const r=x.ceil(x.log(i)/x.LN2),h=r<=48?1:2**(r-48);let o=t.Op(i),a=o.oy(n);for(;a.Sp()||a.qp(e);)i-=h,o=t.Op(i,this.Up()),a=o.oy(n);o.Fp()&&(o=t.sy),s=s.gm(o),e=e.bp(a)}return[s,e]}gy(t){return this.uy(t)[0]}wy(t){return this.uy(t)[1]}toString(i){const e=i||10;if(e<2||e>36)throw new RangeError("radix");if(this.Fp())return"0";if(this.Sp()){if(this.hp(t.Bp)){const i=t.Op(e),s=this.gy(i),n=s.oy(i).bp(this);return s.toString(e)+n.Hp().toString(e)}return"-"+this.Ep().toString(e)}const s=t.Op(e**6,this.Up());let n=this,r="";for(;;){const t=n.gy(s);let i=(n.bp(t.oy(s)).Hp()>>>0).toString(e);if(n=t,n.Fp())return i+r;for(;i.length<6;)i="0"+i;r=String(i)+r}}constructor(t,i){this.Yp=t,this.Qp=i}};is.zp=is.xp(Se.ZERO),is.jp=is.xp(Se.UZERO),is.sy=is.xp(Se.ONE),is.ly=is.xp(Se.UONE),is._y=is.xp(Se.NEG_ONE),is.Rp=is.Cp(Se.NEG_ONE,Se.MAX_VALUE,!1),is.Pp=is.Cp(Se.MAX_UNSIGNED_VALUE,Se.MAX_UNSIGNED_VALUE,!0),is.Bp=is.Cp(Se.ZERO,Se.MIN_VALUE,!1),r();var Sv=class t{get kp(){return!isFinite(this.Ay)}get ql(){return this.Ay/this.vy}static py(i){return new t(x.ceil(i.Ay),i.vy)}static yy(i){return new t(x.floor(i.Ay),i.vy)}static My(t,i){return t.yp(i)?t:i}static Ty(t,i){return t.Tp(i)?t:i}gm(i){return this.vy>=i.vy?new t(this.Ay+i.Ny(this.vy).Ay,this.vy):new t(this.Ny(i.vy).Ay+i.Ay,i.vy)}mp(t){return t.Dp(this)}yp(t){return t.Tp(this)}Np(i){if(this.vy>=i.vy){const e=x.abs(this.Ay-i.Ny(this.vy).Ay),s=this.vy;return new t(e,s)}return i.Np(this)}Mp(t,i){return this.Np(t).Tp(i)}pp(t){return function(t,i){return t.vy>=i.vy?H_(t.Ay,i.Ny(t.vy).Ay):H_(t.Ny(i.vy).Ay,i.Ay)}(this,t)}hp(t){return 0===this.pp(t)}Dp(t){return this.pp(t)<0}Tp(t){return this.pp(t)<=0}Ny(i){return new t(this.Ay*(i/this.vy),i)}bp(i){return this.vy>=i.vy?new t(this.Ay-i.Ny(this.vy).Ay,this.vy):new t(this.Ny(i.vy).Ay-i.Ay,i.vy)}Dy(i){return new t(this.Ay*i,this.vy)}constructor(t,i=1){this.Ay=t,this.vy=i}};Sv.Wl=new Sv(1/6,1),Sv.zp=new Sv(0),Sv.Iy=new Sv(1/0),Sv.Sy=1e6;var Oh=class t extends Ps{static Ey(i,e){return void 0===e&&(e=yv),t.Op(i*e,e)}static Op(i,e){return j(i)?t.by:i===1/0?t.Ly:i===-1/0?t.Cy:new t(Se.fromNumber(i),e)}static xp(i,e){return new t(i,e)}static xy(i){return t.Ey(i.ql,yv)}static Oy(i){return new t(Se.fromNumber(i.getTime()),1e3)}static My(t,i){return t.yp(i)?t:i}static Ty(t,i){return t.Tp(i)?t:i}static jy(i,e,s){return t.My(e,t.Ty(s,i))}Sp(){return this.zy.isNegative()}Fp(){return 0!==this.vy&&this.zy.isZero()}kp(){return 0===this.vy&&!this.zy.isZero()}Lp(){return 0===this.vy&&this.zy.isZero()}vp(){if(0===this.vy)return this.zy.isZero()?NaN:this.zy.isNegative()?-1/0:1/0;const t=this.zy.divide(this.vy),i=this.zy.subtract(t.multiply(this.vy));return t.toNumber()+i.toNumber()/this.vy}Wp(){if(0===this.vy)throw new b("Failed to convert timestamp");return this.zy}Py(){return new Date(0===this.vy?NaN:this.Ny(1e3).zy.toNumber())}By(){return new Sv(0===this.vy?this.vp():this.zy.toNumber(),this.vy)}Ny(i,e){void 0===e&&(e=_u.Ry);const s=this.vy;if(s===i)return this;if(0===s)return this;const n=V_(s,i),r=function(t,i,e){const[s,n]=t.uy(i);if(n.Fp())return s;if(e===_u.Ry)return n.Sp()?s.bp(is.sy):s;if(e===_u.Uy)return n.Sp()?s:s.gm(is.sy);{const t=n.oy(is.Op(2));return t.Sp()?t.Ep().Dp(i)?s:s.bp(is.sy):t.Dp(i)?s:s.gm(is.sy)}}(is.xp(this.zy).oy(is.Op(i/n)),is.Op(s/n),e);return new t(r.Wp(),i)}pp(t){if(this===t)return Ji.Wr;if(0===this.vy||0===t.vy)return Mv(this,t);if(this.Fp())return t.Fp()?Ji.Wr:t.Sp()?Ji.Rf:Ji.Uf;if(t.Fp())return this.Sp()?Ji.Uf:Ji.Rf;const i=x.min(this.vy,t.vy),e=this.Ny(i,_u.Qy).zy,s=t.Ny(i,_u.Qy).zy;return e.compare(s)}Ep(){return 0===this.vy?function(t){0;return t.Lp()?t:t.Sp()?Oh.Ly:Oh.Cy}(this):new t(this.zy.negate(),this.vy)}gm(i){if(0===this.vy||0===i.vy)return function(t,i){0;if(t.Lp()||i.Lp())return Oh.by;if(t.kp()&&i.kp())return t.Sp()===i.Sp()?t:Oh.by;return t.kp()?t:i}(this,i);if(this.Fp())return i;if(i.Fp())return this;const e=x.max(this.vy,i.vy),s=this.Ny(e,_u.Qy),n=i.Ny(e,_u.Qy);return new t(s.zy.add(n.zy),e)}oy(i){if(this.Lp()||j(i))return t.by;if(this.kp()||!isFinite(i)){if(this.Fp()||0===i)return t.by;{const e=this.Sp()?t.Cy:t.Ly;return i<0?e.Ep():e}}return this.Fp()?this:new t(0===i?Se.ZERO:this.zy.multiply(i),this.vy)}gy(i){if(this.Lp()||j(i))return t.by;if(this.kp())return isFinite(i)?0===i?1/i<0?this.Ep():this:i<0?this.Ep():this:t.by;if(!isFinite(i))return new t(Se.ZERO,this.vy);if(this.Fp())return 0===i?t.by:new t(Se.ZERO,this.vy);if(0===i){const e=this.Sp()?t.Cy:t.Ly;return 1/i<0?e.Ep():e}return new t(this.zy.divide(i),this.vy)}Fy(){return[this.zy.low,this.zy.high,this.vy]}constructor(t,i){super(),this.zy=t.toSigned(),this.vy=i>>>0}};Oh.zp=new Oh(Se.ZERO,yv),Oh.by=new Oh(Se.ZERO,0),Oh.Ly=new Oh(Se.ONE,0),Oh.Cy=new Oh(Se.NEG_ONE,0),r();var _u,Ct=class t extends Ps{static Ey(i,e){return void 0===e&&(e=yv),t.Op(i*e,e)}static Op(i,e){return j(i)?t.by:i===1/0?t.Ly:i===-1/0?t.Cy:new t(BigInt(x.floor(i)),e)}static xp(i,e){return new t(BigInt(i.high)<<BigInt(32)|BigInt(i.low>>>0),e)}static xy(i){return t.Ey(i.ql,yv)}static Oy(i){return t.Op(i.getTime(),1e3)}static get zp(){return t.Yy||(t.Yy=new t(BigInt(0),yv)),t.Yy}static get by(){return t.Gy||(t.Gy=new t(BigInt(0),0)),t.Gy}static get Ly(){return t.Vy||(t.Vy=new t(BigInt(1),0)),t.Vy}static get Cy(){return t.Wy||(t.Wy=new t(BigInt(-1),0)),t.Wy}static My(t,i){return t.yp(i)?t:i}static Ty(t,i){return t.Tp(i)?t:i}static jy(i,e,s){return t.My(e,t.Ty(s,i))}Sp(){return this.zy<BigInt(0)}Fp(){return 0!==this.vy&&this.zy===BigInt(0)}kp(){return 0===this.vy&&this.zy!==BigInt(0)}Lp(){return 0===this.vy&&this.zy===BigInt(0)}vp(){if(0===this.vy)return this.zy===BigInt(0)?NaN:this.zy<BigInt(0)?-1/0:1/0;const t=this.zy/BigInt(this.vy),i=this.zy-t*BigInt(this.vy);return Number(t)+Number(i)/this.vy}Wp(){if(0===this.vy)throw new b("Failed to convert timestamp");return this.Hy()}Hy(){const t=this.zy&BigInt(4294967295),i=this.zy>>BigInt(32)&BigInt(4294967295);return Se.fromBits(Number(t),Number(i))}Py(){return new Date(0===this.vy?NaN:Number(this.Ny(1e3).zy))}By(){return new Sv(0===this.vy?this.vp():Number(this.zy),this.vy)}Ny(i,e){void 0===e&&(e=_u.Ry);const s=this.vy;if(s===i)return this;if(0===s)return this;const n=V_(s,i),r=function(t,i,e){const s=t/i,n=t-s*i;if(n===BigInt(0))return s;if(e===_u.Ry)return n<BigInt(0)?s-BigInt(1):s;if(e===_u.Uy)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<i?s:s-BigInt(1):t<i?s:s+BigInt(1)}}(this.zy*BigInt(i/n),BigInt(s/n),e);return new t(r,i)}pp(t){if(this===t)return Ji.Wr;if(0===this.vy||0===t.vy)return Mv(this,t);if(this.Fp())return t.Fp()?Ji.Wr:t.Sp()?Ji.Rf:Ji.Uf;if(t.Fp())return this.Sp()?Ji.Uf:Ji.Rf;const i=x.min(this.vy,t.vy),e=this.Ny(i,_u.Qy).zy,s=t.Ny(i,_u.Qy).zy;return e>s?Ji.Rf:e<s?Ji.Uf:Ji.Wr}Ep(){return 0===this.vy?function(t){0;return t.Lp()?t:t.Sp()?Ct.Ly:Ct.Cy}(this):new t(-this.zy,this.vy)}gm(i){if(0===this.vy||0===i.vy)return function(t,i){0;if(t.Lp()||i.Lp())return Ct.by;if(t.kp()&&i.kp())return t.Sp()===i.Sp()?t:Ct.by;return t.kp()?t:i}(this,i);if(this.Fp())return i;if(i.Fp())return this;const e=x.max(this.vy,i.vy),s=this.Ny(e,_u.Qy),n=i.Ny(e,_u.Qy);return new t(s.zy+n.zy,e)}oy(i){if(this.Lp()||j(i))return t.by;if(this.kp()||!isFinite(i)){if(this.Fp()||0===i)return t.by;{const e=this.Sp()?t.Cy:t.Ly;return i<0?e.Ep():e}}return this.Fp()?this:new t(0===i?BigInt(0):this.zy*BigInt(i),this.vy)}gy(i){if(this.Lp()||j(i))return t.by;if(this.kp())return isFinite(i)?0===i?1/i<0?this.Ep():this:i<0?this.Ep():this:t.by;if(!isFinite(i))return new t(BigInt(0),this.vy);if(this.Fp())return 0===i?t.by:new t(BigInt(0),this.vy);if(0===i){const e=this.Sp()?t.Cy:t.Ly;return 1/i<0?e.Ep():e}return new t(this.zy/BigInt(i),this.vy)}Fy(){const t=this.Hy();return[t.low,t.high,this.vy]}constructor(t,i){super(),this.zy=BigInt.asIntN(64,t),this.vy=i>>>0}};Ct.Yy=void 0,Ct.Gy=void 0,Ct.Vy=void 0,Ct.Wy=void 0,function(t){t[t.Ry=0]="Ry",t[t.Uy=1]="Uy",t[t.Qy=2]="Qy"}(_u||(_u={}));var aa=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?Ct:Oh;function Ev(t,i){return t.pp(i)}function bv(t,i){return void 0!==t?void 0!==i?aa.Ty(t,i):t:i}r();var Lv=9e4,kv=Ml((()=>aa.Op(8589934592,Lv))),Cv=Ml((()=>kv().gy(2)));r();var xv,Ov,fu,Wt,ir,jv={qy:0,Xy:1/0,Zy:0},zv=6,Pv=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],Bv=[" ","\t","\n","\f","\r"],Rv=/^\d*$/,Uv=/.*[0-9]+.*/,Qv=/^[\d.-]+$/,Fv=/(^\.|\.$)/,Yv=/(\D\.|\.\D)/;function Gv(t,i){void 0===i&&(i=jv);return Vv($A(Ao(t),new Vr),i)}function Vv(t,i){void 0===i&&(i=jv);const e={L:[],Ky:[],Jy:[]},s=Wv(t),n=new Vr;if(em(s),$a(s,(t=>"\n"!==t),n),n.qu>=s.length)return e;if(n.Sm(1),"\n"!==s.charAt(n.qu)){Kv(Hv(s,n,false,!0,e,i),e)}else n.Sm(1);for($a(s,(t=>"\n"===t),n);n.qu<s.length;){Kv(Hv(s,n,false,!1,e,i),e),$a(s,(t=>"\n"===t),n)}return e}function Wv(t){const i=dl(t,"\0"," "),e=dl(i,"\r\n","\n");return dl(e,"\r","\n")}function $a(t,i,e){const s=e.qu;for(;e.qu<t.length&&i(t.charAt(e.qu));)e.Sm(1);return t.substring(s,e.qu)}function Hv(t,i,e,s,n,r){let h,o=0,a=i.qu,u="",c=!1,l=!1,d=null,f=null,_=null;for(;!c;)if(h=$a(t,(t=>"\n"!==t),i),o++,i.qu>=t.length?c=!0:i.Sm(1),Va(h,"--\x3e")){if(s||1!==o&&(2!==o||l)){i.Em(a);break}l=!0,a=i.qu,d=new Hi(0,0,"",!1,u);try{Jv(h,n.Ky,d,r),u=""}catch(t){fe.Vv(t),d=null}}else{if(""===h)break;s&&Zg(h,"X-TIMESTAMP-MAP")&&(n.$y=qv(h)),s||2!==o||e||(Ei("STYLE",u.replace(/ /g,""))?(f={$w:Ra.Bm},u=""):Ei("REGION",u.replace(/ /g,""))&&(_=new pv("",100,3,0,100,0,100,""),u="")),u&&(u+="\n"),u+=h,a=i.qu}if(d)return d.O=u,d;if(f);else if(_)return function(t,i){const e=t.split(/\s/),s=":";for(const t of e)if(0!==t.length&&Va(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const e=t.indexOf(s),n=t.substring(0,e),r=t.substring(e+1,t.length);switch(n.toUpperCase()){case"ID":fm(r,i);break;case"WIDTH":wm(r,i);break;case"LINES":gm(r,i);break;case"REGIONANCHOR":{const t=dm(r);t&&(i.dp=t[0],i.fp=t[1]);break}case"VIEWPORTANCHOR":{const t=dm(r);t&&(i.gp=t[0],i.wp=t[1]);break}case"SCROLL":_m(r,i)}}}(u,_),_;return null}function qv(t){const i=t.split("=")[1].trim().split(","),e=Zv(i[0].trim(),"MPEGTS")?i[0]:i[1],s=Zv(i[0].trim(),"LOCAL")?i[0]:i[1];var n;return{tM:Xv(Number(e.split(/:(.*)/)[1].trim())||0),eh:aa.Ey(null!=(n=La(s.split(/:(.*)/)[1].trim(),new Vr))?n:0)}}function Xv(t){return aa.Op(t,Lv)}function Zv(t,i){return Zg(t,i)}function Kv(t,i){t&&function(t){return"cue"===t.$w}(t)?i.L.push(t):t&&function(t){return"region"===t.$w}(t)?i.Ky.push(t):t&&function(t){return"stylesheet"===t.$w}(t)&&i.Jy.push(t)}function Jv(t,i,e,s){const n=new Vr;nm(t,n);const r=$v(La(t,n),s);if(nm(t,n),"--\x3e"!==t.substring(n.qu,n.qu+3))throw b("Something went wrong with parsing a WebVTT Cue");n.Sm(3),nm(t,n);const h=$v(La(t,n),s);e.ap(r,h);!function(t,i,e){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&Va(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),h=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":am(h,i,e);break;case"VERTICAL":cm(h,i);break;case"D":lm(h,i);break;case"LINE":case"L":hm(h,i);break;case"POSITION":case"T":om(h,i);break;case"SIZE":case"S":um(h,i);break;case"ALIGN":case"A":rm(h,i)}}}(t.substring(n.qu,t.length),e,i)}function $v(t,i){return t+i.qy}function tm(t){return/^[0-9]$/.test(t)}function La(t,i){const e=dl(t,",",".");let s,n,r,h=!1;if(i.qu>=e.length||!tm(e.charAt(i.qu)))throw new b("Something went wrong with parsing a WebVTT Cue timestamp");const o=$a(e,tm,i),a=C(o,10);if((o.length>2||a>59)&&(h=!0),i.qu>=e.length||":"!==e.charAt(i.qu))throw new b("Something went wrong with parsing a WebVTT Cue timestamp");i.Sm(1);const u=$a(e,tm,i);if(2!==u.length)throw new b("Something went wrong with parsing a WebVTT Cue timestamp");const c=C(u,10);if(h||i.qu<e.length&&":"===e.charAt(i.qu)){if(i.qu>=e.length||":"!==e.charAt(i.qu))throw new b("Something went wrong with parsing a WebVTT Cue timestamp");i.Sm(1);const t=$a(e,tm,i);if(2!==u.length)throw new b("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=C(t,10)}else s=0,n=a,r=c;if(i.qu>=e.length||"."!==e.charAt(i.qu))throw new b("Something went wrong with parsing a WebVTT Cue timestamp");i.Sm(1);const l=$a(e,tm,i),d=C(l,10);if(c>59||r>59)throw new b("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+d/1e3}function im(t){return em(Wv(t))}function em(t){if(t.length<zv)return!1;for(const i of Pv)if(Zg(t,i))return!0;return!1}function sm(t){return na(Bv,t)}function nm(t,i){for(;i.qu<t.length&&sm(t.charAt(i.qu));)i.Sm(1)}function Ni(t){const i=t.lastIndexOf("%");if(i>-1){const e=S(t.substring(0,i));if(!j(e)&&e>=0&&e<=100)return e}return null}function rm(t,i){const e=t.toLowerCase();switch(e){case"start":case"center":case"end":case"left":case"right":i.Gm=e;break;case"middle":i.Gm="center"}}function hm(t,i){let e,s;const n=t.indexOf(",");if(n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s=""),!Uv.test(e))return;let r,h;if(Eh(e,"%")){const t=Ni(e);if(null===t)return;r=t,h=!1}else{if(!Qv.test(e)||e.lastIndexOf("-")>0)return;const t=e.indexOf(".");if(t>=0&&(t!==e.lastIndexOf(".")||!Yv.test(e)||Fv.test(e)))return;if(r=S(e),j(r))return;h=!0}switch(i.Vm=r,i.Zm=h,s=s.toLowerCase(),s){case"start":case"center":case"end":i.Wm=s;break;case"middle":i.Wm="center"}}function om(t,i){let e,s;const n=t.indexOf(",");n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s="");const r=Ni(e);if(null!==r)switch(i.ao=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":i.Hm=s;break;case"start":i.Hm="line-left";break;case"middle":i.Hm="center";break;case"end":i.Hm="line-right"}}function am(t,i,e){const s=Z_(e,(i=>i.o===t));void 0!==s&&(i.qm=s)}function um(t,i){const e=Ni(t);null!==e&&(i.Xm=e)}function cm(t,i){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":i.Pt="rl";break;case"lr":case"vertical:lr":case"vertical-lr":i.Pt="lr";break;default:i.Pt=""}}function lm(t,i){"VERTICAL"===t.toUpperCase()?i.Pt="rl":"VERTICAL-LR"===t.toUpperCase()&&(i.Pt="lr")}function dm(t){if(t.indexOf(",")>=0){const i=Ni(t.substring(0,t.indexOf(","))),e=Ni(t.substring(t.indexOf(",")+1,t.length));return[It(i||0,0,100),It(e||100,0,100)]}return null}function fm(t,i){i.o=t}function _m(t,i){"up"===t.toLowerCase()&&(i._p="up")}function gm(t,i){Rv.test(t)&&(i.lp=C(t))}function wm(t,i){const e=Ni(t);null!==e&&(i.ji=e)}r(),r(),r(),function(t){t.iM="moov",t.eM="mvhd",t.sM="trak",t.nM="tkhd",t.rM="mdia",t.hM="mdhd",t.oM="hdlr",t.aM="minf",t.uM="stbl",t.cM="stsd",t.lM="stsc",t.dM="mvex",t.fM="trex",t._M="avc1",t.gM="avcC",t.wM="hev1",t.AM="hvc1",t.vM="hvcC",t.mM="vp09",t.pM="vpcC",t.yM="av01",t.MM="av1C",t.TM="colr",t.NM="pasp",t.DM="mp4a",t.IM="esds",t.SM="wvtt",t.EM="vttC",t.bM="vlab",t.LM="enca",t.kM="encv",t.CM="moof",t.xM="mfhd",t.OM="traf",t.jM="tfhd",t.zM="trun",t.PM="tfdt",t.BM="senc",t.RM="mdat",t.UM="pssh",t.QM="emsg",t.FM="sidx",t.YM="styp",t.GM="ftyp",t.VM="sinf",t.WM="frma"}(xv||(xv={})),function(t){t.Yv="vide",t.Gv="soun",t.HM="subt",t.qM="hint",t.XM="meta",t.ZM="auxv"}(Ov||(Ov={})),function(t){t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof"}(fu||(fu={})),function(t){t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF"}(Wt||(Wt={})),function(t){t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT"}(ir||(ir={})),r();var ya=class t{KM(){return F(this.JM,this.$M)}tT(){return BA(this.JM,this.$M)}iT(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt16(i.qu,e);return i.Sm(2),s}(this.JM,this.$M)}eT(){return Sn(this.JM,this.$M)}sT(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt32(i.qu,e);return i.Sm(4),s}(this.JM,this.$M)}nT(){return De(this.JM,this.$M)}rT(t){return lc(this.JM,this.$M,t)}hT(t){return function(t,i,e){const s=[];for(let n=0;n<e;n++)s.push(Sn(t,i));return s}(this.JM,this.$M,t)}oT(t){return Vo(this.JM,this.$M,t)}aT(){return yl(this.JM,this.$M)}uT(t){this.$M.Sm(t)}Lm(){return new t(this.JM,this.$M.Lm())}constructor(t,i){this.JM=t,this.$M=i}};r(),r();function Am(t,i){return t.$w===i}function vm(t,i){for(const e of t)if(Am(e,i))return e}var mm=class extends Jo{get name(){return"DataIncompleteError"}constructor(t,i){super(),this.cT=t,this.lT=i}},Mi=class t{static dT(i){const e=i.JM,s=i.$M,n=t.fT(e,s,!1);if(!n._T)throw new mm(s.qu,n.m);return n.m}static fT(i,e,s){const n=[];for(;e.qu<i.byteLength;){const r=t.gT(i,e,s);if(!r._T)return{_T:!1,m:n};n.push(r.wT)}return{_T:!0,m:n}}static AT(i,e){const s=t.gT(i,e,!1);if(!s._T)throw new mm(e.qu);return s.wT}static vT(i,e){const s=i.JM,n=i.$M;for(;n.qu<s.byteLength;){const i=t.gT(s,n,!1);if(!i._T)return;if(i.wT.$w===e)return i.wT}}static gT(i,e,s){const n=e.qu,r=t.mT(i,e);if(!r._T)return r;const h=r.pT;let o=h.Xm;if(0===o){if(s)return e.Em(n),{_T:!1,yT:1/0};o=i.byteLength-n}const a=n+o;if(a>i.byteLength){const t=a;return e.Em(n),{_T:!1,yT:t}}const u={$w:h.$w,qu:n,JM:new ya(We(i,n,a),new Vr(h.MT))};return e.Em(a),{_T:!0,wT:u}}static mT(t,i){const e=i.qu;if(!PA(t,i,8)){return{_T:!1,yT:i.qu+8}}let s=Sn(t,i),n=Vo(t,i,4);if(1===s){if(!PA(t,i,8)){const t=i.qu+8;return i.Em(e),{_T:!1,yT:t}}s=De(t,i).toNumber()}if("uuid"===n){if(!PA(t,i,16)){const t=i.qu+16;return i.Em(e),{_T:!1,yT:t}}n=Vo(t,i,16)}return{_T:!0,pT:{$w:n,Xm:s,MT:i.qu-e}}}static TT(t,i,e){const s=t.JM,n=t.$M;let r=iv(xe(s),n.qu,s.byteLength);return e&&(r=Ge(r)),n.Sm(r.byteLength),{$w:i,JM:r}}static NT(i,e,s){const n=i.eT(),{version:r,flags:h}=sc(n);return{$w:e,DT:r,IT:h,JM:t.TT(i,e,s).JM}}};function Ns(t,i){const e=pm(t,i);if(!e)throw new b("Missing "+i+" atom");return e}function pm(t,i){for(const e of t)if(e.$w===i)return e.JM}function go(t,i){const e=[];for(const s of t)s.$w===i&&e.push(s.JM);return e}function sc(t){return{version:t>>24,flags:new OA(16777215&t)}}var ds=class t{static ST(i){const e=[],s=Mi.dT(new ya(i,new Vr));for(const i of s){const s=t.ET(i);s&&e.push(s)}return e}static bT(t){return Mi.fT(t,new Vr,!1).m.some(this.LT)}static kT(i){return go(Mi.dT(new ya(i,new Vr)),xv.UM).map(t.CT)}static xT(i){return go(Mi.dT(i.JM),xv.UM).map(t.CT)}static LT(t){return t.$w===xv.GM||t.$w===xv.YM||t.$w===xv.iM||t.$w===xv.CM||t.$w===xv.RM||t.$w===xv.FM||t.$w===xv.QM}static ET(i){switch(i.$w){case xv.iM:return t.OT(i.JM);case xv.CM:return t.jT(i.JM,i.qu);case xv.RM:return t.zT(i.JM);case xv.FM:return t.PT(i.JM);case xv.QM:return t.BT(i.JM)}}static OT(i){const e=Mi.dT(i),s=Ns(e,xv.eM),n=go(e,xv.sM),r=pm(e,xv.dM),h=t.RT(s),o=n.map(t.UT),a=r?t.QT(r):void 0;return{$w:xv.iM,pT:h,Z:o,FT:a}}static RT(t){const i=t.eT(),{version:e,flags:s}=sc(i),n=1===e?t.nT():t.eT(),r=1===e?t.nT():t.eT(),h=t.eT(),o=1===e?t.nT():t.eT(),a=t.eT(),u=t.tT()>>8;t.uT(2),t.uT(8);const c=t.hT(9);t.uT(24);const l=t.eT();return{$w:xv.eM,DT:e,IT:s,YT:n,GT:r,vy:h,ct:o,VT:a,Ng:u,WT:c,HT:l}}static UT(i){const e=Mi.dT(i),s=Ns(e,xv.nM),n=Ns(e,xv.rM),r=t.qT(s),h=t.XT(n);return{$w:xv.sM,pT:r,ZT:h}}static qT(t){const i=t.eT(),{version:e,flags:s}=sc(i),n=1===e?t.nT():t.eT(),r=1===e?t.nT():t.eT(),h=t.eT();t.uT(4);const o=1===e?t.nT():t.eT();t.uT(8);const a=t.iT(),u=t.iT(),c=t.iT()/256;t.uT(2);const l=t.hT(9),d=t.eT()/65536,f=t.eT()/65536;return{$w:xv.nM,KT:s.xm(1),JT:s.xm(2),$T:s.xm(4),YT:n,GT:r,tN:h,ct:o,iN:a,eN:u,Ng:c,WT:l,ji:d,Ti:f}}static XT(i){const e=Mi.dT(i),s=Ns(e,xv.hM),n=Ns(e,xv.oM),r=Ns(e,xv.aM),h=t.sN(s),o=t.nN(n),a=t.rN(r);return{$w:xv.rM,pT:h,hN:o,oN:a}}static sN(t){const i=t.eT(),{version:e,flags:s}=sc(i),n=1===e?t.nT():t.eT(),r=1===e?t.nT():t.eT(),h=t.eT(),o=1===e?t.nT():t.eT();t.tT();return t.uT(2),{$w:xv.hM,DT:e,IT:s,YT:n,GT:r,vy:h,ct:o}}static nN(t){const i=t.eT(),{version:e,flags:s}=sc(i);t.uT(4);const n=t.oT(4);t.uT(12);const r=t.aT();return{$w:xv.oM,DT:e,IT:s,aN:n,l:r}}static rN(i){const e=Ns(Mi.dT(i),xv.uM),s=t.uN(e);return{$w:xv.aM,cN:s}}static uN(i){const e=Ns(Mi.dT(i),xv.cM),s=t.lN(e);return{$w:xv.uM,dN:s}}static lN(i){const e=i.eT(),{version:s,flags:n}=sc(e),r=(i.eT(),[]),h=Mi.dT(i);for(const i of h){const e=t.fN(i.JM,i.$w);e&&r.push(e)}return{$w:xv.cM,DT:s,IT:n,_N:r}}static fN(i,e){let s=t.gN(i,e);return s||(s=t.wN(i,e),s||(e===xv.SM?t.AN(i):void 0))}static gN(i,e){return e===xv.DM?t.vN(i):e===xv.LM?t.mN(i):void 0}static wN(i,e){return e===xv._M?t.pN(i):e===xv.wM||e===xv.AM?t.yN(i,e):e===xv.mM?t.MN(i,e):e===xv.yM?t.TN(i,e):e===xv.kM?t.NN(i):void 0}static DN(t,i){t.uT(6);return{$w:i,IN:t.tT()}}static SN(i,e){const s=t.DN(i,e);i.uT(8);const n=i.tT(),r=i.tT();i.uT(2),i.uT(2);return oe({},s,{EN:n,bN:r,LN:i.eT()>>>16})}static kN(i,e){const s=t.DN(i,e);i.uT(2),i.uT(2),i.uT(12);const n=i.tT(),r=i.tT(),h=i.eT(),o=i.eT();i.uT(4);const a=i.tT();i.uT(32);const u=i.tT();return i.uT(2),oe({},s,{ji:n,Ti:r,CN:h,xN:o,ON:a,jN:u})}static vN(i){const e=t.SN(i,xv.DM),s=Ns(Mi.dT(i),xv.IM);return oe({},e,{zN:t.PN(s)})}static AN(i){const e=t.DN(i,xv.SM),s=Mi.dT(i),n=Ns(s,xv.EM),r=t.BN(n),h=pm(s,xv.bM);return oe({},e,{RN:r,UN:h?t.QN(h):h})}static BN(t){return{$w:xv.EM,vd:t.aT()}}static QN(t){return{$w:xv.bM,dh:t.aT()}}static PN(t){return Mi.NT(t,xv.IM,!0)}static pN(i){const e=t.kN(i,xv._M),s=Mi.dT(i),n=Ns(s,xv.gM),r=pm(s,xv.NM);return oe({},e,{FN:t.YN(n),GN:r?t.VN(r):void 0})}static yN(i,e){const s=t.kN(i,e),n=Ns(Mi.dT(i),xv.vM);return oe({},s,{WN:t.HN(n)})}static MN(i,e){const s=t.kN(i,e),n=Ns(Mi.dT(i),xv.pM);return oe({},s,{qN:t.XN(n)})}static TN(i,e){const s=t.kN(i,e),n=Mi.dT(i),r=Ns(n,xv.MM),h=t.ZN(r),o=pm(n,xv.TM);return oe({},s,{KN:h,JN:o?t.$N(o):void 0})}static NN(i){const e=i.Lm(),s=t.kN(i,xv.kM),n=Ns(Mi.dT(i),xv.VM),r=t.tD(n);return oe({},s,{iD:t.wN(e,r.sD.eD),nD:r})}static mN(i){const e=i.Lm(),s=t.SN(i,xv.LM),n=Ns(Mi.dT(i),xv.VM),r=t.tD(n);return oe({},s,{iD:t.gN(e,r.sD.eD),nD:r})}static tD(i){const e=Ns(Mi.dT(i),xv.WM),s=t.rD(e);return{$w:xv.VM,sD:s}}static rD(t){const i=t.oT(4);return{$w:xv.WM,eD:i}}static YN(t){return Mi.TT(t,xv.gM,!0)}static HN(t){return Mi.TT(t,xv.vM,!0)}static XN(t){return Mi.TT(t,xv.pM,!0)}static ZN(t){return Mi.TT(t,xv.MM,!0)}static $N(t){const i=t.oT(4);switch(i){case"nclx":return{hD:fu.ON_SCREEN_COLOURS,oD:t.tT(),aD:t.tT(),uD:t.tT(),cD:0!=(128&t.KM())};case"rICC":return{hD:fu.RESTRICTED_ICC_PROFILE};case"prof":return{hD:fu.UNRESTRICED_ICC_PROFILE};default:throw b("Could not parse ColourInformationBox: unknown type '"+i+"'.")}}static VN(t){const i=t.eT(),e=t.eT();return{$w:xv.NM,lD:i,dD:e}}static QT(i){const e=go(Mi.dT(i),xv.fM).map(t.fD);return{$w:xv.dM,Z:e}}static fD(t){const i=t.eT(),{version:e,flags:s}=sc(i),n=t.eT(),r=t.eT(),h=t.eT(),o=t.eT(),a=t.eT();return{$w:xv.fM,DT:e,IT:s,tN:n,_D:r,gD:h,wD:o,vD:a}}static jT(i,e){const s=Mi.dT(i),n=Ns(s,xv.xM),r=go(s,xv.OM),h=t.mD(n),o=r.map(t.pD);return{$w:xv.CM,yD:e,pT:h,Z:o}}static mD(t){const i=t.eT(),{version:e,flags:s}=sc(i),n=t.eT();return{$w:xv.xM,DT:e,IT:s,MD:n}}static pD(i){const e=Mi.dT(i),s=Ns(e,xv.jM),n=go(e,xv.zM),r=pm(e,xv.PM),h=t.TD(s),o=n.map((i=>t.ND(i,h))),a=r?t.DD(r):void 0;return{$w:xv.OM,pT:h,SD:o,ED:a}}static TD(t){const i=t.eT(),{version:e,flags:s}=sc(i),n=t.eT(),r=s.xm(Wt.BASE_DATA_OFFSET_PRESENT)?t.nT():void 0,h=s.xm(Wt.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.eT():void 0,o=s.xm(Wt.DEFAULT_SAMPLE_DURATION_PRESENT)?t.eT():void 0,a=s.xm(Wt.DEFAULT_SAMPLE_SIZE_PRESENT)?t.eT():void 0,u=s.xm(Wt.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.eT():void 0;return{$w:xv.jM,DT:e,IT:s,tN:n,bD:r,LD:h,gD:o,wD:a,vD:u}}static ND(i,e){const s=i.eT(),{version:n,flags:r}=sc(s),h=i.eT(),o=r.xm(ir.DATA_OFFSET_PRESENT)?i.sT():void 0,a=r.xm(ir.FIRST_SAMPLE_FLAGS_PRESENT)?i.eT():void 0,u=[];for(let s=0;s<h;s++){const h=t.kD(i,r,n,e);0===s&&void 0!==a&&(h.IT=a),u.push(h)}return{$w:xv.zM,DT:n,IT:r,CD:h,yD:o,xD:a,OD:u}}static kD(t,i,e,s){return{ct:i.xm(ir.SAMPLE_DURATION_PRESENT)?t.eT():s.gD,Xm:i.xm(ir.SAMPLE_SIZE_PRESENT)?t.eT():s.wD,IT:i.xm(ir.SAMPLE_FLAGS_PRESENT)?t.eT():s.vD,jD:i.xm(ir.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===e?t.eT():t.sT():void 0}}static BT(t){const i=t.JM,e=t.$M,s=Sn(i,e),{version:n,flags:r}=sc(s);if(1===n){const t=Sn(i,e),s=De(i,e),h=Sn(i,e),o=Sn(i,e),a=QA(i,e),u=QA(i,e),c=Th(xe(i),e.qu,i.byteLength);return e.Sm(c.byteLength),{$w:xv.QM,DT:n,IT:r,zD:a,zy:u,vy:t,PD:s,BD:h,o:o,RD:c}}{const t=QA(i,e),s=QA(i,e),h=Sn(i,e),o=Sn(i,e),a=Sn(i,e),u=Sn(i,e),c=Th(xe(i),e.qu,i.byteLength);return e.Sm(c.byteLength),{$w:xv.QM,IT:r,DT:n,zD:t,zy:s,vy:h,UD:o,BD:a,o:u,RD:c}}}static zT(t){return Mi.TT(t,xv.RM,!1)}static CT(i){const e=i.JM,s=i.$M,n=Ge(xe(e)).buffer,r=Sn(e,s),{version:h,flags:o}=sc(r),a=t.QD(e,s),u=[];if(h>0){const t=Sn(e,s);for(let i=0;i<t;i++){const t=lc(e,s,16);u.push(t)}}const c=Sn(e,s),l=new T(n,s.qu,c);return s.Sm(e.byteLength),{$w:xv.UM,DT:h,IT:o,FD:a,YD:u,GD:c,JM:l,VD:n}}static QD(t,i){let e="";for(let s=0;s<4;s++){const s=F(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=F(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=F(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=F(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<6;s++){const s=F(t,i).toString(16);e+=1===s.length?"0"+s:s}return e.toLowerCase()}static PT(t){const i=t.JM,e=t.$M,s=Sn(i,e),{version:n,flags:r}=sc(s),h=Sn(i,e),o=Sn(i,e);let a,u;0===n?(a=Se.fromBits(Sn(i,e),0,!0),u=Se.fromBits(Sn(i,e),0,!0)):(a=De(i,e),u=De(i,e)),e.Sm(2);const c=BA(i,e),l=[];for(let t=0;t<c;t+=1){const t=Sn(i,e),s=t>>31&1,n=2147483647&t,r=Sn(i,e),h=Sn(i,e),o=h>>31&1,a=h>>28&7,u=268435455&h;l.push({WD:s,HD:n,ct:r,qD:o,XD:a,ZD:u})}return{$w:xv.FM,DT:n,IT:r,KD:h,vy:o,JD:a,$D:u,tI:c,iI:l}}static DD(t){const i=t.JM,e=t.$M,s=Sn(i,e),{version:n,flags:r}=sc(s);let h;return h=0===n?Se.fromBits(Sn(i,e),0,!0):De(i,e),{$w:xv.PM,DT:n,IT:r,ED:h}}};function ym(t){return t&&"eI"in t?t.eI:t}r(),r();var Bt,Mm=class extends Hn{get sI(){return this.nI}get Ky(){return this.rI}get hI(){return this.oI}get oa(){return this.Ua||(this.Ua=function(t){return Ou(Rh(t),{get styles(){return t.sI},get regions(){return t.Ky},get metadata(){return ym(t.hI)},get content(){return ym(t.O)}})}(this)),this.Ua}op(t){return!!Ph(this.sI,t.sI)&&(!!Ph(this.Ky,t.Ky)&&(this.hI&&t.hI?!!this.hI.aI(t.hI)&&(this.O&&t.O?this.O.aI(t.O):this.O===t.O):this.hI===t.hI))}constructor(t,i,e,s,n,r,h){super(t,i,e,s),this.nI=n,this.rI=r,this.oI=h||void 0}};function rs(t){return 1===t.uI}function Tm(t){return 3===t.uI}r(),r(),function(t){t[t.cI=1]="cI",t[t.lI=2]="lI",t[t.Eu=3]="Eu",t[t.dI=4]="dI",t[t.fI=9]="fI"}(Bt||(Bt={}));var Nm=class{get _I(){return this.yf.gI(!0)}get Fm(){return this.wI}get Ym(){return this.AI}constructor(t,i,e){this.wI=t,this.AI=i,rs(e)?this.yf=function(t,i,e){for(const t of["begin","end","dur"])e.vI(t);return e}(0,0,e):this.yf=e}};r();var wo={VIDEO_H264:"video/avc",VIDEO_H265:"video/hevc",VIDEO_MP4:"video/mp4",VIDEO_MPEG:"video/mpeg",VIDEO_MPEG2:"video/mpeg2",VIDEO_WEBM:"video/webm",VIDEO_UNKNOWN:"video/x-unknown",AUDIO_AAC:"audio/mp4a-latm",AUDIO_MP4:"audio/mp4",AUDIO_WEBM:"audio/webm",AUDIO_UNKOWN:"audio/x-unknown",IMAGE_JPEG:"image/jpeg",APPLICATION_TTML_XML:"application/ttml+xml",APPLICATION_MP4:"application/mp4",TEXT_VTT:"text/vtt"};function ln(t){return Va(t,wo.APPLICATION_MP4)||Va(t,wo.VIDEO_MP4)||Va(t,wo.AUDIO_MP4)}function Dm(t){return Va(t,wo.VIDEO_WEBM)||Va(t,wo.AUDIO_WEBM)}var Im=class{mI(t){for(const[i,e]of this.pI)if(i.toLowerCase()===t.toLowerCase())return e}constructor(t,i){this.$w=t,this.pI=i}};function Sm(t){const i=t.trim(),e=i.indexOf(";");if(e<0)return new Im(i,[]);const s=i.substr(0,e).trim(),n=i.substr(e+1).trim(),r=[];let h=0,o=!1;for(let t=0;t<n.length;t++){const i=n[t];if(o||";"!==i)'"'===i&&(o=!o);else{const i=Em(n.substr(h,t));i&&r.push(i),h=t+1}}if(h!==n.length){const t=Em(n.substr(h));t&&r.push(t)}return new Im(s,r)}function Em(t){const i=t.indexOf("=");if(i<0)return;const e=t.substr(0,i).trim();let s=t.substr(i+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[e,s]}function _s(t){const i=t.trim(),e=i.indexOf(";");return e<0?i:i.substr(0,e).trim()}function bm(t){let i=t;const e=i.match(/^avc1\.(\d+)\.(\d+)$/);if(e){const t=Number(e[1]),s=Number(e[2]);i="avc1."+va((t<<16|s).toString(16),6,"0")}return i}r();var Lm="http://www.w3.org/XML/1998/namespace";function km(t,i,e,s){let n=t.yI(e,i);return 0===n.length&&(n=t.MI(s+":"+i)),n}function Cm(t){const i={};for(const e of t.TI)i[e.NI]=e.zy;return i}var xm=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,Om=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,Jh="http://www.w3.org/ns/ttml";function jm(t,i,e,s){void 0===e&&(e=jv),void 0===s&&(s=wo.APPLICATION_TTML_XML);let n=[];const r=Ao(t);return s===wo.APPLICATION_MP4?n=function(t,i,e){const s=ds.ST(t),n=vm(s,xv.RM);if(!n)return[];return Bm(Ao(n.JM),i,e)}(r,i,e):s===wo.APPLICATION_TTML_XML&&(n=Bm(r,i,e)),n}function zm(t,i,e){return void 0===e&&(e=jv),Rm(t,i,e)}function Pm(t,i){const e=Hm(i._I),s={};for(const i of e)s[i]=t[i];return s}function Bm(t,i,e){return Rm($A(t,new Vr),i,e)}function Rm(t,i,e){const s=[];let n;try{n=fe.DI(t)}catch(t){return s}const r=n.II;if("tt"!==r.NI)return s;const h=r&&r.yI(Jh,"head")[0],o=r&&r.yI(Jh,"body")[0];if(!o||!h)return s;const a=function(t){const i={},e=t.yI(Jh,"styling")[0],s=e&&e.yI(Jh,"style")||[];for(const t of s){i[t.SI(Lm,"id")]=Cm(t)}return i}(h),u=function(t){const i={},e=t.yI(Jh,"layout")[0],s=e&&e.yI(Jh,"region")||[];for(const t of s){const e=t.SI(Lm,"id");if(!e)continue;i[e]=Cm(t);const s=Wm(t);for(const t in s)Xc.call(s,t)&&(i[e][t]=s[t])}return i}(h),c=function(t,i){const e=Zr(t),s=Fm(i.EI("tts:extent"));if(!s)return e;for(const t of _.keys(e)){const i=Fm(e[t].extent);if(i){const n=Um(i[0],s[0]),r=Um(i[1],s[1]);e[t].extent=n+" "+r}const n=Fm(e[t].origin);if(n){const i=Um(n[0],s[0]),r=Um(n[1],s[1]);e[t].origin=i+" "+r}}return e}(u,r),l=h.yI(Jh,"metadata")[0],d=Ym(o,e.qy,e.Xy,e.Zy);for(const t of d){const i=Pm(c,t);s.push(new Mm(t.Fm,t.Ym,t._I,!1,a,i,l))}return s}function Um(t,i){const e=Qm(t),s=Qm(i);if(e&&s&&e===s){const n=Number(t.slice(0,-e.length)),r=Number(i.slice(0,-s.length));return j(n)||j(r)?t:n/r*100+"%"}return t}function Qm(t){return Eh(t,"px")?"px":Eh(t,"em")?"em":Eh(t,"c")?"c":Eh(t,"%")?"%":void 0}function Fm(t){if(!t)return;const i=t.split(" ");return 2===i.length?[i[0],i[1]]:void 0}function Ym(t,i,e,s){let n,r=i,h=e,o=[];const a=[];if(rs(t)){var u,c;r=null!=(u=Vm(t.EI("begin"),s))?u:r,n=Vm(t.EI("dur"),0),h=null!=(c=Vm(t.EI("end"),s))?c:void 0!==n?r+n:h;const i=t.bI;for(let e=0;e<i.length;e++)("body"===t.NI||"div"===t.NI)&&i[e].uI>1||(o=o.concat(Ym(i[e],r,h,s)))}const l=function(t,i,e){const s=[];s.push(t,i);for(const t of e)s.push(t.Fm,t.Ym);s.sort(Li);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(jc(s,t+1),t--,n=s.length);return s}(r,h,o);for(let i=0;i<l.length-1;i++){const e=Gm(l[i],l[i+1],o);if(e.length<=0&&qm(t)){const e=t.gI(!1);a.push(new Nm(l[i],l[i+1],e))}else if(e.length>0){const s=t.gI(!1);e.forEach((t=>s.LI(t._I))),a.push(new Nm(l[i],l[i+1],s))}}return a}function Gm(t,i,e){const s=[];for(let n=0;n<e.length;n++){const r=e[n].Fm,h=e[n].Ym;(r>=t&&h<=i||r<i&&h>=i||r<t&&h>t)&&s.push(e[n])}return s}function Vm(t,i){if(t){if(xm.test(t)){const e=xm.exec(t);if(!e)return;const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,h=e[6];return 3600*s+60*n+r+(h?Number(h)*.1**h.length:0)+i}if(Om.test(t)){const e=Om.exec(t);if(!e)return;const s=Number(e[1]);let n;switch(e[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+i}}}function Wm(t){const i={},e=t.MI("style")||[];for(const t of e){const e=Cm(t);for(const t in e)Xc.call(e,t)&&(i[t]=e[t])}return i}function Hm(t){let i,e=[];if(rs(t)){i=t.EI("region"),i&&e.push(i);const s=t.bI;for(let t=0;t<s.length;t++)e=e.concat(Hm(s[t]))}return e}function qm(t){if(rs(t)){const i=t.NI.toUpperCase(),e=Boolean(t.EI("smpte:backgroundImage"));return"BR"===i||e}return t.uI===Bt.Eu}function Xm(t){const i=function(t){try{return fe.DI(t).II}catch(t){}}(t);return"tt"===(null==i?void 0:i.NI)}r(),r();var Pt,Tn=class extends co{tt(t){return super.tt(t)}it(t){const i=super.it(t);return i&&(t.Xw=Ht.gh),i}ha(){return Hc(this)}};r(),r(),function(t){t.HM="subtitles",t.kI="captions",t.CI="descriptions",t.Mn="chapters",t.XM="metadata",t.xI="thumbnails"}(Pt||(Pt={}));var Zm=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function Km(t){return"string"==typeof t&&na(Zm,t)}function Jm(t,i){return!(!Km(t)||!Km(i))&&(t===i||"subtitles"===t&&"captions"===i||"captions"===t&&"subtitles"===i)}r();var fs,$m=class extends ce{constructor(t,i,e,s,n){super(t,i,n),this.url=e,this.status=s}};r(),function(t){t.OI="HttpOpenError",t.jI="HttpResponseError",t.zI="HttpTimeoutError"}(fs||(fs={}));var M=class extends Jo{get BI(){return this.RI}constructor(t,i,e){super(i,e),this.RI=t}};r(),r();var ve=class extends M{get name(){return fs.jI}get UI(){return this.QI}constructor(t,i,e){super(t.BI,null!=e?e:function(t){return"Error while loading "+t.BI.Fu+", status code "+t.FI}(t),i),this.QI=t}};r();var tp,Qs=class extends M{get name(){return fs.zI}constructor(t,i){super(t,function(t){return"Request for "+t.Fu+" timed out after "+t.YI+" seconds."}(t),i)}};function zt(t){return t instanceof M}function gu(t){return t instanceof ve}function ip(t){return t instanceof Qs}function ep(t){return t===Pt.HM||t===Pt.kI}function sp(t){return t.some(np)}function np(t){return Va(t,"stpp")}function rp(t){return t.some(hp)}function hp(t){return Va(t,"vtt")||Va(t,"wvtt")}function Uo(t,i){return ln(t)&&rp(i)}function op(t,i){return t===Pt.xI||t===Pt.XM&&i===Pt.xI}function ap(t,i,e,s){for(const n of t.L.Nw){if(n.Fm>e)break;i<=n.Ym&&!na(s,n)&&s.push(n)}}function up(t,i){return Xo(t.Bw,i.Bw)}function cp(t,i,e,s){const n=function(t){switch(t){case Ks.WEBVTT:return"WebVTT";case Ks.SRT:return"SRT";case Ks.TTML:return"TTML";default:return""}}(t);return new $m(le.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",i,e,s)}function lp(t,i){const e=[];for(const s of t.L.Nw)if(s.Ym<=i)e.push(s);else if(s.Fm>=i)break;for(const i of e)t.GI(i)}function dp(t,i){if(t.U>0){const e=10,s=t.gn(0),n=x.max(0,s-e);for(const t of i)t.VI(n)}}!function(t){t.WI="vtt",t.SM="wvtt",t.HI="stpp"}(tp||(tp={}));var Rt,ai=class extends i{tt(t){t.ln(Os.Ko,this.qI),this.Z.tt(t),this.XI(t)}it(t){t.rn(Os.Ko,this.qI),t.Xw=Ht.gh,this.Z.it(t)}ZI(t){}KI(t){}XI(t){t.Xw!==Ht.gh?this.ZI(t):this.KI(t)}JI(){for(const t of this.Z.Nw)t.rn(Os.Ko,this.qI),t.cn()}VI(t){if(t>0)for(const i of this.Z.Nw)lp(i,t)}Wn(){return this.JI(),this.Z.Wn(),Promise.resolve()}async cn(){this.Bo(),await this.Wn(),this.Z.cn()}constructor(...t){super(...t),this.Z=new Tn,this.qI=t=>{const i=t.Lt;this.XI(i)}}};r(),r(),function(t){t.$I="arraybuffer",t.tS="json",t.iS="stream",t.Eu="text"}(Rt||(Rt={})),r();var Kc,zu,jo,yn,Ko=class t{append(t,i){let e=t,s=i;e=fp(e),s=_p(s);const n=e.toLowerCase();if(this.Gf.hasOwnProperty(n)){const t=this.Gf[n],i=t[1];t[1]=i?i+", "+s:s}else this.Gf[n]=[e,s]}delete(t){const i=fp(t).toLowerCase();delete this.Gf[i]}get(t){const i=fp(t).toLowerCase();return this.Gf.hasOwnProperty(i)?this.Gf[i][1]:null}has(t){const i=fp(t).toLowerCase();return this.Gf.hasOwnProperty(i)}set(t,i){let e=t;e=fp(e);const s=e.toLowerCase();this.Gf[s]=[e,_p(i)]}forEach(t,i){for(const e in this.Gf)this.Gf.hasOwnProperty(e)&&t.call(i,this.Gf[e][1],e,this)}asList(){const t=[];for(const i in this.Gf)if(this.Gf.hasOwnProperty(i)){const[e,s]=this.Gf[i];t.push([e,s])}return t}eS(){const t={};return this.forEach(((i,e)=>{t[e]=i})),t}sS(t){t.forEach(((t,i)=>{this.append(i,t)}))}nS(t){t.forEach(((t,i)=>{this.set(i,t)}))}constructor(i){this.Gf={},i instanceof t?i.asList().forEach((t=>{let[i,e]=t;this.append(i,e)})):Array.isArray(i)?i.forEach((t=>{this.append(t[0],t[1])})):i&&_.getOwnPropertyNames(i).forEach((t=>{this.append(t,i[t])}))}};function fp(t){let i=t;if("string"!=typeof i&&(i=String(i)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(i))throw new k("Invalid character in header field name");return i}function _p(t){let i=t;return"string"!=typeof i&&(i=String(i)),i}!function(t){t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT"}(Kc||(Kc={})),function(t){t.Hv="",t.rS="manifest",t.hS="segment",t.oS="preload-hint",t.aS="content-protection"}(zu||(zu={})),function(t){t.Hv="",t.uS="initialization-segment",t.cS="fairplay-license",t.lS="fairplay-certificate",t.dS="widevine-license",t.fS="widevine-certificate",t._S="playready-license",t.gS="clearkey-license",t.wS="aes128-key"}(jo||(jo={})),function(t){t.Hv="",t.Gv="audio",t.Yv="video",t.Eu="text",t.Wv="image"}(yn||(yn={}));var nc=class{constructor(t,i){const e=t.Fu;let s,n,r,h,o,a,u,c,l,d,f,_;i?(s=i.AS,n=i.vS,r=i.mS,h=i.pS,o=i.YI,a=i.yS,u=i.i_,c=i.$w,l=i.MS,d=i.TS,f=i.NS,_=i.DS):(s=null,n={},r="GET",h=Rt.Eu,o=0,a=0,c="",l="",d="",f=!1),this.Fu=e,this.AS=t.AS||s,this.vS=new Ko(t.vS||n),this.mS=t.mS||r,this.pS=t.pS||h,this.YI=void 0!==t.YI?Number(t.YI)||0:o,this.yS=void 0!==t.yS?Number(t.yS)||0:a,this.i_=t.i_||u||(new Po).i_,this.$w=t.$w||c,this.MS=t.MS||l,this.TS=t.TS||d,this.NS=void 0!==t.NS?Boolean(t.NS):f,this.DS=t.DS||_}};r();var gp,wp=class extends Ha{get error(){return this.errorObject.message}ha(){return this}constructor(t){super(Bi.Zo),this.errorObject=t}},Ya=class extends ai{IS(t){if(!t.src)return;const i=t.kind||Pt.HM,e=this.ES.SS(i,t.id,t.label,t.srclang,t.default);return e.tA=Wa(t.src),this.tt(e),e}async bS(t,i){t.cg=Ot.LOADING;const e=new nc({Fu:t.tA,pS:Rt.Eu,mS:Kc.GET,i_:i});let s,n;try{const t=await this.LS.BI(e);n=t.FI,s=await t.kS()}catch(i){return yo(i),t.cg=Ot.ERROR,void t.mo(new wp(function(t,i){let e=i,s=0;if(zt(t)&&t.name===fs.OI)e=t.BI.Fu;else if(gu(t)){const i=t.UI;if(e=i.CS,s=i.FI,0===s)return new $m(le.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",e,s,t)}return new $m(le.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",e,s,t)}(i,t.tA)))}try{const i=function(t){return im(t)?Ks.WEBVTT:Xm(t)?Ks.TTML:Ks.SRT}(s);t.$w=i;let e=[];if(i===Ks.WEBVTT||i===Ks.SRT){e=Vv(s).L}else i===Ks.TTML&&(e=zm(s,t));for(const i of e)t.xS(i)}catch(i){return yo(i),t.cg=Ot.ERROR,void t.mo(new wp(cp(t.$w,t.tA,n,i)))}t.cg=Ot.LOADED}ZI(t){na(this.Z.Nw,t)&&t.cg===Ot.NONE&&this.bS(t,this.OS.i_).catch(Ah)}Pn(){}async Wn(){this.OS.s_(),this.OS=new Po;for(const t of this.Z.Nw)this.ES.jS(t);await super.Wn()}constructor(t,i){super(),this.OS=new Po,this.ES=t,this.LS=i}};function Ap(t,i){for(const e of t)if(e.zt===i&&e.zS)return e}function vp(t,i){mp(Ap(t.Nw,i))}function mp(t){void 0!==t&&(t.Xw=Ht.Un)}function pp(t,i){const e=Ap(t.Nw,i)||function(t,i){for(const e of t)if(e.zt===i)return e}(t.Nw,i);mp(e)}function Ss(t){for(const i of Zm)i===Pt.Mn?pp(t,i):vp(t,i)}r(),r(),r(),function(t){t.PS="web",t.RS="android",t.US="android-tv",t.QS="ios",t.FS="tvos",t.YS="chromecast",t.GS="theoliveweb"}(gp||(gp={}));var di=nd?nd.userAgent:"",yp=di.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Mp=di.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Tp=di.match(/Android ([0-9\.]+)/i),Np=di.match(/Windows NT ([0-9\.]+)/i),Dp=di.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),Ip=di.match(/Firefox\/([0-9\.]+)/i),Sp=di.match(/OPR\/(\d+\.\d+)/i),Ep=di.match(/Tizen ([0-9\.]+)/i),bp=di.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),Lp=class{get Je(){return this.VS}get WS(){return this.HS}get qS(){return this.XS}get ZS(){return this.KS}get JS(){return this.$S}get tE(){return this.iE}get eE(){return this.sE}get nE(){return this.rE}get hE(){return this.oE}get aE(){return this.uE}get cE(){return this.lE}get Va(){return this.dE}get fE(){return this._E}get gE(){return this.wE||this.AE}get Gl(){return this.vE}get Qs(){return this.mE}get pE(){return this.yE}get ME(){return this.TE}get NE(){return this.DE}get SE(){return this.EE}get bE(){return this.LE}get kE(){return this.CE}get xE(){return this.OE}get jE(){return this.zE}get PE(){return this.BE}get RE(){return this.UE}get QE(){return this.FE}get YE(){return this.GE}get VE(){return this.WE}get HE(){return this.qE}get XE(){return this.ZE}get KE(){return this.JE}get $E(){return this.ib}get eb(){return this.sb}get hb(){return this.ob}get ub(){return this.fb}get _b(){return this.gb}get wb(){return!(!this.jE&&!this.kE)&&this.NE<=56}get Ab(){return this.vb}get mb(){return this.pb}get yb(){return this.Mb}get Tb(){return this.Nb}get Db(){return this.Ib}get Sb(){return this.Eb}get bb(){return this.Lb}constructor(){this.VS=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||nd&&nd.msMaxTouchPoints),this.HS=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(di)||/(macintosh|mac(?=_powerpc)\s)/i.test(di),this.XS=/Windows NT/i.test(di),this.KS=Np?S(Np[1]):0,this.$S=/Android/i.test(di),this.iE=Tp?S(Tp[1]):0,this.sE=/windows phone (8|8\.1)/i.test(di),this.rE=/iPhone/i.test(di),this.oE=/iPad/i.test(di),this.uE=this.HS&&this.VS&&!this.oE,this.lE=/iPod/i.test(di),this.vE=/Mobile Safari/i.test(di),this.wE=/EOS\d*STB/i.test(di),this.AE=/APP\d*STB/i.test(di),this.dE=(this.rE||this.oE||this.uE||this.lE)&&!this.sE,this._E=bp?S(bp[2]):0,this.mE=this.sE||this.dE||this.$S||this.vE,this.yE=/CriOS/i.test(di),this.TE=Boolean(self.chrome&&/google/i.test(nd.vendor))||this.yE,this.EE=this.TE&&/Edg\//i.test(nd.userAgent),this.LE=Mp?C(Mp[1],10):0,this.Lb=Boolean(self.chrome||/Chrome/i.test(di)||/CriOS/i.test(di)),this.DE=yp?C(yp[1],10):0,this.CE=/SMART-TV.*Tizen/i.test(di),this.OE=Ep?S(Ep[1]):0,this.zE=/webos|web0s/i.test(di),this.BE=/VIZIO/i.test(di),this.UE=/Edge\/\d+/i.test(di),this.FE=/Trident/i.test(di),this.GE=this.FE&&!self.ActiveXObject&&"ActiveXObject"in self,this.WE=/Vivaldi/i.test(di),this.qE=/Firefox/i.test(di)&&!/Seamonkey/i.test(di),this.ZE=Ip?S(Ip[1]):0,this.JE=/Safari/i.test(di)&&!/Chrome/i.test(di)&&!this.sE&&!this.CE,this.ib=Dp?S(Dp[2]):0,this.sb=Boolean(Sp),this.ob=Sp?S(Sp[1]):0,this.fb=/CrKey/.test(di),this.gb=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(di),this.vb="web"===gp.US,this.pb="web"===gp.RS,this.Mb=this.pb||this.vb,this.Nb="web"===gp.QS,this.Ib="web"===gp.FS,this.Eb="web"===gp.YS}};Lp.kb=new Lp;var _n=Lp.kb;r();var kp,Cp,us,Ys,xp,Op,jp,Vu=class extends gg{constructor(){super(t.QA)}};r(),r(),r(),function(t){t.Cb="9a04f079-9840-4286-ab92-e65be0885f95",t.xb="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t.Ob="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.jb="94ce86fb-07ff-4f43-adb8-93d2fa968ca2"}(jp||(jp={}));var Ci,zp="urn:mpeg:dash:mp4protection:2011",Pp="cenc",Bp="sinf",la="skd",Rp="9a04f079-9840-4286-ab92-e65be0885f95",ps="urn:uuid:"+Rp,Up="com.microsoft.playready",Qp="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Xt="urn:uuid:"+Qp,Fp="com.widevine.alpha",Yp="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Gp="urn:uuid:"+Yp,Vp="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",Wp="urn:uuid:"+Vp,Hp="com.apple.fps.1_0",qp="com.apple.streamingkeydelivery",Xp="identity";r(),function(t){t.Cb="playready",t.xb="widevine",t.jb="fairplay",t.Ob="clearkey",t.zb="aes128"}(Ci||(Ci={}));var Zp={$w:Ci.Cb,Pb:Up,Bb:"cenc",Rb:Rp,Ub:ps,Qb:"PlayReady"},Kp={$w:Ci.xb,Pb:Fp,Bb:"cenc",Rb:Qp,Ub:Xt,Qb:"Widevine"},Jp={$w:Ci.jb,Pb:Hp,Bb:"skd",Rb:Vp,Ub:Wp,Qb:"FairPlay"},$p={$w:Ci.jb,Pb:"com.apple.fps",Bb:"sinf",Rb:Vp,Ub:Wp,Qb:"FairPlay"},Qa={$w:Ci.Ob,Pb:"org.w3.clearkey",Bb:"cenc",Rb:Yp,Ub:Gp,Qb:"ClearKey"},ty=[Zp,Kp,Jp,Qa];function iy(t){return ty.filter((i=>i.Ub===t.toLowerCase()))}r(),r(),r(),r(),r(),r();var sr,ey=["cenc"],sy=["cbcs","cbcs-1-9"],Ze=class extends gg{constructor(t){super("Fb"),this.Yb=t}},bs=class extends gg{constructor(t,i,e,s){super("Gb"),this.Yb=t,this.Vb=i,this.Gb=e,this.Wb=s}},ny=class extends gg{constructor(){super("lt")}};!function(t){t.TA="Hb",t.qb="Xb"}(sr||(sr={}));var vs=class extends gg{constructor(t,i){super("Hb"),this.Bb=t,this.Zb=i}},ry=class extends gg{constructor(){super("Xb")}};r();var hy=new T([0]).buffer,Bs=class{get Xm(){return this.Uu.length}Kb(t){for(const i of this.Uu)if(i[0]===t)return!0;return!1}Jb(t){for(const i of this.Uu)if(i[0]===t)return i[1]}$b(t,i){this.Uu.forEach((i=>t(i[1],i[0])),i)}tL(t,i){this.Uu.push([t,i])}iL(){Ri(this.Uu)}constructor(){this.Uu=[]}};r();var No=class{eL(t){this.Sd&&(this.Sd(t),this.Xf())}sL(t){this.Ed&&(this.Ed(t),this.Xf())}s_(){this.nL.catch(xs),this.sL(new sa)}n_(t){t.then((t=>this.eL(t)),(t=>this.sL(t)))}Xf(){this.Sd=void 0,this.Ed=void 0}constructor(){this.nL=new Promise(((t,i)=>{this.Sd=t,this.Ed=i}))}};function oy(){return new T([8,4]).buffer}function ay(t,i){return t===Up?function(t){if(t.byteLength<2*uy.length)return t;const i=new DataView(t,0,2*uy.length),e=ZA(i,!0);if(e===uy)return t;return function(t){const i='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',e='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+i+cA(t)+e;return KA(s,!0).buffer}(t)}(i):i}r();var uy="<PlayReady";r(),r();var cy=class extends Jo{constructor(t,i,e,s){super(t,s),this.rL=i,this.hL=e}};r(),r(),r(),r(),r();var ly=function(t,i){return(ly=_.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)_.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)};function Zt(t,i){if("function"!=typeof i&&null!==i)throw new k("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}ly(t,i),t.prototype=null===i?_.create(i):(e.prototype=i.prototype,new e)}function dy(t,i,e){return t.indexOf?t.indexOf(i,e):Array.prototype.indexOf.call(t,i,e)}r(),r(),r(),r(),r(),r(),r();!function(){function t(t,i){this.oL=t,this.aL=i}t.prototype.get=function(t){var i=this.oL.get(t);if(0===this.aL||void 0===i)return i;var e=this.oL.get(t+1)||0,s=i&(1<<8-this.aL)-1,n=e>>8-this.aL;return(s<<this.aL)+n},t.prototype.getBit=function(t){if(!(t<0)){var i=this.oL.get(x.floor((t+this.aL)/8));if(void 0!==i)return(i&1<<7-this.aL-t%8)>0?1:0}},_.defineProperty(t.prototype,"bitLength",{get:function(){return this.oL.bitLength-this.aL},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"length",{get:function(){return this.oL.length},enumerable:!1,configurable:!0})}();r(),r();x.pow(2,-52);function fy(t,i,e){return x.min(x.max(t,i),e)}function ee(t,i){return t>>8-i}function _y(t,i){return t&(1<<i)-1}var gy=function(){function t(t){this.uL=t,this.cL=0,this.lL=0}return _.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.cL+this.lL},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"done",{get:function(){return this.cL===this.uL.length&&0===this.lL},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"location",{get:function(){return{byte:this.cL,bit:this.lL}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var i=new t(this.uL);return i.seek(this.cL,this.lL),i},t.prototype.canReadBits=function(t){return 8*this.cL+t+this.lL<=8*this.uL.length},t.prototype.canReadBytes=function(t){return 0===this.lL?this.cL+t<=this.uL.length:this.cL+t<this.uL.length},t.prototype.incBit=function(){this.lL++,this.lL>7&&(this.cL++,this.lL=0)},t.prototype.seek=function(t,i){this.cL=t,this.lL=i},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new b("Cannot read past end of buffer.");return this.uL.get(this.cL)>>7-this.lL&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new b("Cannot read past end of buffer.");if(0===this.lL)return this.uL.get(this.cL++);var t=_y(this.uL.get(this.cL),8-this.lL),i=ee(this.uL.get(this.cL+1),this.lL);return this.cL++,t<<this.lL|i},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new b("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readBit());return i},t.prototype.readUInt=function(t){if(t>32)throw new b("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new b("Cannot read past end of buffer.");var i=0;if(0===this.lL&&t%8==0)for(var e=t-8;e>=0;e-=8)i|=this.readByte()<<e;else for(e=t-1;e>=0;e--)i|=this.readBit()<<e;return i},t.prototype.readInt=function(t){if(t>32)throw new b("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new b("Cannot read past end of buffer.");var i=this.readUInt(t);return 0===(i&1<<t-1)?i:i-x.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var i=1<<t;return i+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new b("Skipping over the buffer edge is not allowed.");var i=this.lL+t;this.cL+=i>>3,this.lL=7&i},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new b("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readByte());return String.fromCharCode.apply(String,i)},t}();r(),r(),r();var wy=function(t,i){return t===i?0:t<i?-1:t>i?1:j(t)?j(i)?0:1:-1},Jr=function(){function t(){this.dL=[],this.fL=[],this._L=0}return t.from=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var s=new t,n=0,r=i;n<r.length;n++){var h=r[n];s.pushRange(h)}return s},t.prototype.pushRange=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=t.length),e<0)throw new b("The buffer length must be positive.");if(0!==e){if(0===this.fL.length)this.fL.push(0);else{var s=this.fL[this.fL.length-1]+this.dL[this.dL.length-1].length;this.fL.push(s)}this.dL.push(t.subarray(i,i+e)),this._L+=e}},t.prototype.concat=function(i){var e=new t;return e.pushRange(this.join()),e.pushRange(i.join()),e},t.prototype.copy=function(t,i,e,s){if(void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=this.length),i<0||e<0||s<0)throw new RangeError;return this.slice(e,s).copyInternal(t,i)},t.prototype.copyInternal=function(t,i){for(var e=0,s=i,n=0,r=this.dL;n<r.length;n++){var h=r[n];t.set(h,s),e+=h.length,s+=h.length}return e},t.prototype.clear=function(){this.dL=[],this.fL=[],this._L=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var i=this.findContainingBufferIndex(t),e=t-this.fL[i];return this.dL[i][e]}},_.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.dL.length<1)return-1;if(this.dL.length>1){var i=this.join();this.clear(),this.pushRange(i)}var e=this.dL[0];return"number"==typeof t?dy(e,t):"undefined"!=typeof Buffer?Buffer.from(e.buffer,e.byteOffset,e.byteLength).indexOf(t):function(t,i){if(0===i.length)return 0;for(var e=i[0],s=i.length,n=t.length-s,r=0;r<=n&&!((r=dy(t,e,r))<0||r>n);r++){for(var h=r+1,o=r+s,a=1;h<o&&t[h]===i[a];h++,a++);if(h===o)return r}return-1}(e,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,i,e){if(0!==t.length){var s=0,n=t.length-1;if(1!==e(t[s],i)){if(1===e(i,t[n]))return n;for(;s!==n;){var r=x.ceil((s+n)/2);e(t[r],i)<=0?s=r:n=r-1}return s}}}(this.fL,t,wy)},t.prototype.join=function(){if(1===this.dL.length)return this.dL[0];var t=new T(this.length);return this.copyInternal(t,0),t},_.defineProperty(t.prototype,"length",{get:function(){return this._L},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,i){if(i<=0||i>4)throw new b("Expected byteLength to be between 0 and 4 but was "+i);if(t<0||t>this.length-i)throw new b("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-i)+")");if(1===i)return this.get(t);for(var e=0,s=0;s<i;s++)e+=this.get(t+s)*x.pow(2,8*(i-s-1));return e},t.prototype.slice=function(i,e){void 0===e&&(e=this.length);var s=fy(i,0,this.length),n=fy(e,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,h=this.findContainingBufferIndex(s),o=this.dL[h],a=s,u=a-this.fL[h];a+o.length-u<n;)r.pushRange(o,u,o.length-u),h+=1,u=(a+=o.length-u)-this.fL[h],o=this.dL[h];var c=n-a;return r.pushRange(o,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var i=this.length-1,e=this.dL.length-1,s=this.dL[e],n=s.length-1;i>=0&&e>=0;){if(0!==s[n])break;if(0===n){if(0===e)return new t;e-=1,n=(s=this.dL[e]).length-1}else n-=1;i-=1}return this.slice(0,i+1)},t}(),Ay=function(){function t(i){this.gL=i||t.BUFFER_CHUNK_SIZE,this.wL=!1,this.AL=new Jr,this.uL=new T(this.gL),this.vL=0,this.mL=0,this.lL=7}return t.prototype.closeByte=function(){this.uL[this.vL++]=this.mL,this.vL>=this.gL&&this.closeBuffer(),this.mL=0,this.lL=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.vL&&(this.AL.pushRange(this.uL,0,this.vL),t&&(this.uL=new T(this.gL)),this.vL=0)},_.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.lL},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.wL)throw new b("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.wL=!0,this.AL},t.prototype.writeBit=function(t){if(this.wL)throw new b("Cannot write to a closed BitWriter.");this.mL|=t<<this.lL,0===this.lL?this.closeByte():this.lL--},t.prototype.writeByte=function(t){if(this.wL)throw new b("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.mL=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var i=this.lL;this.mL|=ee(t,i+1),this.closeByte(),this.mL=_y(t,8-i)<<i+1,this.lL=i},t.prototype.writeBits=function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.wL)throw new b("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.vL+t.length<=this.gL?(this.uL.set(t,this.vL),this.vL+=t.length,this.vL===this.gL&&this.closeBuffer()):(this.closeBuffer(),this.AL.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var i=this.lL;this.mL|=ee(t[0],i+1),this.closeByte();for(var e=1;e<t.length;e++){var s=_y(t[e-1],8-i),n=ee(t[e],i+1);this.mL=s<<i+1|n,this.closeByte()}this.mL=_y(t[t.length-1],8-i)<<i+1,this.lL=i}},t.prototype.writeUInt=function(t,i){if(t<0)throw new b("Received a negative number.");if(i>32)throw new b("The max bitlength that can be provided is 32.");if(t>=x.pow(2,i))throw new b("Uint "+t+" cannot be represented in "+i+" bit(s).");if(this.isWritingStartBit&&i%8==0)for(var e=i-8;e>=0;e-=8)this.writeByte(t>>e&255);else for(e=i-1;e>=0;e--)this.writeBool((t&1<<e)>0)},t.prototype.writeInt=function(t,i){if(i>32)throw new b("The max bitlength that can be provided is 32.");if(x.abs(t)>=x.pow(2,i-1))throw new b("Signed integer "+t+" cannot be represented in "+i+" bit(s).");t<0?this.writeUInt(t+x.pow(2,i),i):this.writeUInt(t,i)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new b("Received a negative number.");for(var i=x.floor(x.log2(t+1))+1,e=0;e<i-1;e++)this.writeBit(0);this.writeUInt(t+1,i)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var i=function(t){for(var i=new T(t.length),e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}(t),e=0;e<i.length;e++)this.writeByte(i[e])},t.BUFFER_CHUNK_SIZE=1024,t}();r();var vy=function(){function t(t){this.rb=new Jr,this.Bd=t}return t.prototype.closeWriter=function(){void 0!==this.Bd&&(this.rb=this.rb.concat(this.Bd.close()),this.Bd=void 0)},_.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.Bd&&(this.Bd=new Ay),this.Bd},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),Mn=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new b("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(i){var e=this.getSize(),s=e>=t.LARGE_SIZE/8,n=16===this.boxType.length;i.writeUInt(s?1:e,32),i.writeString(n?"uuid":this.boxType),s&&(i.writeUInt(x.floor(e/t.LARGE_SIZE),32),i.writeUInt(e%t.LARGE_SIZE,32)),n&&i.writeString(this.boxType)},t.prototype.getSize=function(){var i=8+(this.boxType.length>4?16:0),e=this.getBoxContentSize()+i;return e>=t.LARGE_SIZE/8&&(e+=8),e},t.prototype.serialize=function(){var t=new vy;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=x.pow(2,32),t}();function my(t,i){return t instanceof Se?64===i:t<x.pow(2,i)}function E(t,i){return x.round(t*x.pow(2,i))}function py(t,i){for(var e=0;e<i.length;e++)t.writeByte(i[e])}function Jc(t,i){return t/x.pow(2,i)}r();var Lt=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!my(e,8))throw new b("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Zt(i,t),_.defineProperty(i.prototype,"flags",{get:function(){return this.pL},set:function(t){this.pL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new b("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(Mn);r(),r();var yy=function(t){function i(i,e){var s=t.call(this,i)||this;return s.data=e,s}return Zt(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(Jr.from(this.data))},i}(Mn);r(),r();var My=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();r();var Ty=16384;function Ny(t){var i=t.length;if(i<=Ty)return String.fromCharCode.apply(String,t);for(var e=[],s=0;s<i;s+=Ty)e.push(String.fromCharCode.apply(String,t.slice(s,s+Ty)));return e.join("")}var Dy=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,i){return(t&i)===i}(this.raw,t)},t}();function Iy(t,i){var e=t.getUint8(i.offset);return i.shift(1),e}function Sy(t,i,e){var s=Oy(Py(t),i.offset,i.offset+e);return i.shift(s.byteLength),s}function Ey(t,i,e){return i.offset+e<=t.byteLength}function by(t,i,e){void 0===e&&(e=!1);var s=t.getUint32(i.offset,e);return i.shift(4),s}function Ly(t,i,e){void 0===e&&(e=!1);var s=by(t,i,e),n=by(t,i,e),r=e?n:s,h=e?s:n;return Se.fromBits(h,r,!0)}function ky(t,i,e){return Ny(function(t){return[].slice.call(t)}(Sy(t,i,e)))}function Cy(t,i){var e,s=Iy(t,i);return 0==(128&s)?e=s:192==(224&s)?e=64*(31&s)+(63&Iy(t,i)):224==(240&s)?e=4096*(15&s)+64*(63&Iy(t,i))+(63&Iy(t,i)):240==(248&s)&&(e=262144*(7&s)+4096*(63&Iy(t,i))+64*(63&Iy(t,i))+(63&Iy(t,i))),e}function xy(t,i){return function(t,i,e){var s=[],n=function(t,i){return i.offset+3<=t.byteLength&&239===t.getUint8(i.offset)&&187===t.getUint8(i.offset+1)&&191===t.getUint8(i.offset+2)}(t,i);n&&i.shift(3);for(;i.offset<t.byteLength;){var r=Cy(t,i);if(void 0===r)break;if(e&&0===r)break;s.push(r)}return function(t){for(var i=[],e=0,s=t;e<s.length;e++){var n=s[e];n>65535&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n)}return Ny(i)}(s)}(t,i,!0)}function Oy(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new T(t.buffer,t.byteOffset+i,e-i)}function jy(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function zy(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Py(t){return new T(t.buffer,t.byteOffset,t.byteLength)}var By=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new My(this.offset<<3)},t}();r();var Ry=function(){function t(t,i){this.data=t,this.cursor=i}return t.prototype.nextUint8=function(){return Iy(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getUint16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return by(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt32(i.offset,e);return i.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,i,e){void 0===e&&(e=!1);var s=by(t,i,e),n=by(t,i,e),r=e?n:s,h=e?s:n;return Se.fromBits(h,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return Ly(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return Sy(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,i,e){for(var s=[],n=0;n<e;n++)s.push(by(t,i));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return ky(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return xy(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function fo(t,i){return t.type===i}var Uy=8;function Io(t){var i=function(t,i){var e=[];for(;i.offset<t.byteLength;){var s=Qy(t,i);if(!s.complete)return{complete:!1,boxes:e};e.push(s.box)}return{complete:!0,boxes:e}}(t.data,t.cursor);if(!i.complete)throw new b("Data incomplete");return i.boxes}function Qy(t,i){var e=i.offset,s=function(t,i){var e=i.offset;if(!Ey(t,i,Uy)){return{complete:!1,neededOffset:r=i.offset+Uy}}var s=by(t,i),n=ky(t,i,4);if(1===s){if(!Ey(t,i,8)){var r=i.offset+8;return i.seek(e),{complete:!1,neededOffset:r}}s=Ly(t,i).toNumber()}if("uuid"===n){if(!Ey(t,i,16)){r=i.offset+16;return i.seek(e),{complete:!1,neededOffset:r}}n=ky(t,i,16)}var h=i.offset,o={type:n,size:s,headerSize:h-e};return{complete:!0,header:o}}(t,i);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-e);var h=e+r;if(h>t.byteLength){var o=h;return i.seek(e),{complete:!1,neededOffset:o}}var a={type:n.type,offset:e,data:new Ry(jy(t,e,h),new By(n.headerSize))};return i.seek(h),{complete:!0,box:a}}function Xu(t){return{version:t>>24,flags:new Dy(16777215&t)}}function Fy(t,i){var e,s,n,r;return 1===i?(e=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(e=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:e,modification:s,scale:n,duration:r}}function Lo(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function Yy(t){var i=t.nextUint32Array(9);return{a:Jc(i[0],16),b:Jc(i[1],16),u:Jc(i[2],30),c:Jc(i[3],16),d:Jc(i[4],16),v:Jc(i[5],30),x:Jc(i[6],16),y:Jc(i[7],16),w:Jc(i[8],30)}}function Uh(t){return new yy(t.type,Oy(Py(t.data.data),t.data.cursor.offset))}var Gy=function(t){function i(i,e,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=e,r.handlerType=i,r}return Zt(i,t),_.defineProperty(i.prototype,"handlerType",{get:function(){return this.yL},set:function(t){this.yL=t},enumerable:!1,configurable:!0}),i.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(e=null===(i=this.name)||void 0===i?void 0:i.length)&&void 0!==e?e:0)+1},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeString(this.handlerType),this.serializeReserved(i),this.name&&i.writer.writeString(this.name),i.writer.writeByte(0)},i}(Lt);function Vy(t){var i=t.data,e=Xu(i.nextUint32()),s=e.version,n=e.flags;i.skip(4);var r=i.nextChars(4);i.skip(12);var h=i.nextUTF8String();return new Gy(r,h,s,n.raw)}!function(t){function i(){return t.call(this,"mdir")||this}Zt(i,t),i.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(Gy);r(),r(),r();var Cu=function(){function t(t,i){void 0===i&&(i=!1),this.fixed28BitMode=i,this.tag=t}return t.prototype.encodeSize=function(t){for(var i=[];t>0;)i.length>0&&(i[i.length-1]+=128),i.push(t%128),t>>=7;if(this.fixed28BitMode)for(;i.length<4;)i.push(128);return i.reverse()},_.defineProperty(t.prototype,"tag",{get:function(){return this.ML},set:function(t){if(!my(t,8))throw new b("Provided tag does not fit in 8 bits.");this.ML=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var i=0,e=this.encodeSize(this.getDescriptorSize());i<e.length;i++){var s=e[i];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}();r();!function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o={});var a=t.call(this,4,o.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=h,a.objectTypeIndication=i,a.streamType=e,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}Zt(i,t),_.defineProperty(i.prototype,"objectTypeIndication",{get:function(){return this.TL},set:function(t){if(!my(t,8))throw new b("Provided objectTypeIndication does not fit in 8 bits.");this.TL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"streamType",{get:function(){return this.NL},set:function(t){if(!my(t,6))throw new b("Provided streamType does not fit in 6 bits.");this.NL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.DL},set:function(t){if(!my(t,24))throw new b("Provided bufferSizeDb does not fit in 24 bits.");this.DL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"maxBitrate",{get:function(){return this.IL},set:function(t){if(!my(t,32))throw new b("Provided maxBitrate does not fit in 32 bits.");this.IL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"avgBitrate",{get:function(){return this.SL},set:function(t){if(!my(t,32))throw new b("Provided avgBitrate does not fit in 32 bits.");this.SL=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var i=0,e=this.decoderSpecificInfo;i<e.length;i++){e[i].serialize(t)}}}(Cu);r();!function(t){function i(i,e){void 0===e&&(e={});var s=t.call(this,5,e.fixed28BitMode)||this;return s.data=i,s}Zt(i,t),i.prototype.getDescriptorSize=function(){return this.data.length},i.prototype.serializeDescriptorContent=function(t){t.concat(Jr.from(this.data))}}(Cu);r(),r();var Wy=function(t){function i(i){void 0===i&&(i=!1);var e=t.call(this,6,i)||this;return e.predefined=2,e}return Zt(i,t),i.prototype.getDescriptorSize=function(){return 1},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},i}(Cu);!function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=i,r.streamPriority=e,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new Wy(n.fixed28BitMode),r}Zt(i,t),_.defineProperty(i.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"esId",{get:function(){return this.EL},set:function(t){if(!my(t,16))throw new b("Provided esId does not fit in 16 bits.");this.EL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"streamPriority",{get:function(){return this.bL},set:function(t){if(!my(t,5))throw new b("Provided streamPriority does not fit in 5 bits.");this.bL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"dependsOnEsId",{get:function(){return this.LL},set:function(t){if(t&&!my(t,16))throw new b("Provided dependsOnEsId does not fit in 16 bits.");this.LL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"ocrEsId",{get:function(){return this.kL},set:function(t){if(t&&!my(t,16))throw new b("Provided ocrEsId does not fit in 16 bits.");this.kL=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},i.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(Cu);r(),r(),r(),r(),r();var Hy=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.boxes=[],i}return Zt(i,t),i.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serialize=function(){for(var i=t.prototype.serialize.call(this),e=0,s=this.boxes;e<s.length;e++){var n=s[e];i=i.concat(n.serialize())}return i},i}(Mn),Dt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Zt(i,t),i.prototype.serializeBoxContent=function(t){},i.prototype.getBoxContentSize=function(){return 0},i}(Hy),qy=function(t){function i(i,e){var s=t.call(this,i)||this;return s.dataReferenceIndex=e,s}return Zt(i,t),_.defineProperty(i.prototype,"dataReferenceIndex",{get:function(){return this.CL},set:function(t){if(!my(t,16))throw new b("Provided dataReferenceIndex does not fit in 16 bits.");this.CL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){for(var i=0;i<6;i++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},i}(Dt),Xy=function(t){function i(i,e,s,n){var r,h,o=this;return(o=t.call(this,i,e)||this).extra=n,o.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,o.sampleSize=null!==(h=s.sampleSize)&&void 0!==h?h:16,o.sampleRate=s.sampleRate,o}return Zt(i,t),_.defineProperty(i.prototype,"channelCount",{get:function(){return this.xL},set:function(t){if(!my(t,16))throw new b("Provided channelCount does not fit in 16 bits.");this.xL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleSize",{get:function(){return this.OL},set:function(t){if(!my(t,16))throw new b("Provided sampleSize does not fit in 16 bits.");this.OL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleRate",{get:function(){return this.jL},set:function(t){if(!my(E(t,16),32))throw new b("Provided rate does not fit in 32 bits (fixed 16.16).");this.jL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(e=null===(i=this.extra)||void 0===i?void 0:i.length)&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.channelCount,16),i.writer.writeUInt(this.sampleSize,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(E(this.sampleRate,16),32),this.extra&&py(i.writer,this.extra)},i}(qy);r();!function(t){function i(i){var e=t.call(this,"stco",0,0)||this;return e.entries=i,e}Zt(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.zL},set:function(t){if(!my(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!my(t,32)})))throw new b("Not all entries can be represented in 32 bits.");this.zL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(Lt);r();!function(t){function i(i){var e=t.call(this,"clap")||this;return e.cleanApertureWidthN=i.cleanApertureWidthN,e.cleanApertureWidthD=i.cleanApertureWidthD,e.cleanApertureHeightN=i.cleanApertureHeightN,e.cleanApertureHeightD=i.cleanApertureHeightD,e.horizOffN=i.horizOffN,e.horizOffD=i.horizOffD,e.vertOffN=i.vertOffN,e.vertOffD=i.vertOffD,e}Zt(i,t),_.defineProperty(i.prototype,"cleanApertureWidthN",{get:function(){return this.PL},set:function(t){if(!my(t,32))throw new b("Provided cleanApertureWidthN does not fit in 32 bits.");this.PL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"cleanApertureWidthD",{get:function(){return this.BL},set:function(t){if(!my(t,32))throw new b("Provided cleanApertureWidthD does not fit in 32 bits.");this.BL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"cleanApertureHeightN",{get:function(){return this.RL},set:function(t){if(!my(t,32))throw new b("Provided cleanApertureHeightN does not fit in 32 bits.");this.RL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"cleanApertureHeightD",{get:function(){return this.UL},set:function(t){if(!my(t,32))throw new b("Provided cleanApertureHeightD does not fit in 32 bits.");this.UL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"horizOffN",{get:function(){return this.QL},set:function(t){if(!my(t,32))throw new b("Provided horizOffN does not fit in 32 bits.");this.QL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"horizOffD",{get:function(){return this.FL},set:function(t){if(!my(t,32))throw new b("Provided horizOffD does not fit in 32 bits.");this.FL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"vertOffN",{get:function(){return this.YL},set:function(t){if(!my(t,32))throw new b("Provided vertOffN does not fit in 32 bits.");this.YL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"vertOffD",{get:function(){return this.GL},set:function(t){if(!my(t,32))throw new b("Provided vertOffD does not fit in 32 bits.");this.GL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 32},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(Mn);r();!function(t){function i(i,e){var s=t.call(this,"ctts",i,0)||this;return s.entries=e,s}Zt(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.zL},set:function(t){if(!my(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!my(t.sampleCount,32)||!my(t.sampleOffset,32)})))throw new b("Not all entries can be represented in 64 bits.");this.zL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),0===this.version?i.writer.writeUInt(n.sampleOffset,32):1===this.version&&i.writer.writeInt(n.sampleOffset,32)}}}(Lt);r();!function(t){function i(i){var e=t.call(this,"url ",0,void 0===i?1:0)||this;return e.location=i,e}Zt(i,t),_.defineProperty(i.prototype,"location",{get:function(){return this.VL},set:function(t){this.flags=void 0===t?1:0,this.VL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this);return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(Lt);r();!function(t){function i(i,e,s){var n=t.call(this,"urn ",0,s)||this;return n.name=i,n.location=e,n}Zt(i,t),_.defineProperty(i.prototype,"location",{get:function(){return this.VL},set:function(t){if(1&this.flags)throw new b("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.VL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.name),i.writer.writeByte(0),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(Lt);r();!function(t){function i(){return t.call(this,"dinf")||this}Zt(i,t)}(Dt);r(),r();var Zy=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!my(e,8))throw new b("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Zt(i,t),_.defineProperty(i.prototype,"flags",{get:function(){return this.pL},set:function(t){this.pL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new b("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(Hy);!function(t){function i(){return t.call(this,"dref",0,0)||this}Zt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(Zy);r(),r();var Ky=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"elst",e,s)||this;return n.entries=i,n}return Zt(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"entries",{get:function(){return this.zL},set:function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!my(s.segmentDuration,this.bitSize))throw new b("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!my(s.mediaTime,this.bitSize))throw new b("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!my(s.mediaRateInteger,16))throw new b("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!my(s.mediaRateFraction,16))throw new b("Provided mediaRateFraction does not fit in 16 bits.")}this.zL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(i)},i}(Lt),Jy=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Zt(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(Ky),$y=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Zt(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(Ky);function tM(t){for(var i=t.data,e=Xu(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),h=[],o=0;o<r;o++){var a=void 0,u=void 0;0===s?(a=i.nextUint32(),u=i.nextInt32()):(a=i.nextUint64(),u=i.nextInt64());var c=i.nextInt16(),l=i.nextInt16();h.push({segmentDuration:a,mediaTime:u,mediaRateFraction:l,mediaRateInteger:c})}return 0===s?new Jy(h,n.raw):new $y(h,n.raw)}var iM=function(t){function i(){return t.call(this,"edts")||this}return Zt(i,t),i}(Dt);function eM(t){for(var i=new iM,e=0,s=Io(t.data);e<s.length;e++){var n=s[e];fo(n,"elst")?i.boxes.push(tM(n)):i.boxes.push(Uh(n))}return i}r(),r();var sM=function(t){function i(i,e,s,n){var r=t.call(this,i)||this;return r.majorBrand=e,r.minorVersion=s,r.compatibleBrands=n,r}return Zt(i,t),_.defineProperty(i.prototype,"majorBrand",{get:function(){return this.WL},set:function(t){if(4!==t.length)throw new b("the provided major brand does not conform to the 4 character requirement");this.WL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"minorVersion",{get:function(){return this.HL},set:function(t){if(!my(t,32))throw new b("the provided minor version does not fit in 32 bits.");this.HL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"compatibleBrands",{get:function(){return this.qL},set:function(t){if(t.some((function(t){return 4!==t.length})))throw new b("Some of the compatible brands do not conform to the 4 character requirement");this.qL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var i=0,e=this.compatibleBrands;i<e.length;i++){var s=e[i];t.writer.writeString(s)}},i}(Mn),nM=function(t){function i(i,e,s){return t.call(this,"ftyp",i,e,s)||this}return Zt(i,t),i}(sM);function rM(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new nM(e,s,n)}r();var hM=function(t){function i(i,e){void 0===e&&(e="free");var s=t.call(this,e)||this;return s.data=i,s}return Zt(i,t),i.prototype.getBoxContentSize=function(){var t,i;return null!==(i=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==i?i:0},i.prototype.serializeBoxContent=function(t){this.data&&t.concat(Jr.from(this.data))},i}(Mn);r(),r();var oM=function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=i.creation,r.modificationTime=i.modification,r.timescale=i.scale,r.duration=i.duration,r.language=e,r}return Zt(i,t),_.defineProperty(i.prototype,"creationTime",{get:function(){return this.XL},set:function(t){if(!my(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.XL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"modificationTime",{get:function(){return this.ZL},set:function(t){if(!my(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.ZL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"timescale",{get:function(){return this.KL},set:function(t){if(!my(t,32))throw new b("Provided sequence number does not fit in 32 bits.");this.KL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"duration",{get:function(){return this.JL},set:function(t){if(!my(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.JL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"language",{get:function(){return this.$L},set:function(t){if(!lM(t))throw new b("Expected an ISO-639-2/T language code");this.$L=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMdiaContent(i),i.writer.writeBit(0);for(var e=0,s=this.language;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.charCodeAt(0)-96,5)}i.writer.writeUInt(0,16)},i}(Lt),aM=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,0,s)||this}return Zt(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(oM),uM=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,1,s)||this}return Zt(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(oM);function cM(t){var i=t.data,e=Xu(i.nextUint32()),s=e.version,n=e.flags,r=Fy(i,s),h=new gy(Jr.from(i.nextUint8Array(2)));h.skipBits(1);for(var o=[],a=0;a<3;a++)o.push(h.readUInt(5));var u=o.map((function(t){return String.fromCharCode(t+96)})).join("");return lM(u)||(u="und"),i.skip(2),0===s?new aM(r,u,n.raw):new uM(r,u,n.raw)}function lM(t){return/^[a-z]{3}$/.test(t)}var qs=function(t){function i(){return t.call(this,"mdia")||this}return Zt(i,t),i}(Dt);function dM(t){for(var i=new qs,e=0,s=Io(t.data);e<s.length;e++){var n=s[e];fo(n,"mdhd")?i.boxes.push(cM(n)):fo(n,"hdlr")?i.boxes.push(Vy(n)):i.boxes.push(Uh(n))}return i}r();var fM=function(t){function i(){var i=t.call(this,"mdat")||this;return i.data=new Jr,i}return Zt(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(this.data)},i}(Mn);function _M(t){var i=t.data,e=i.nextUint8Array(i.data.byteLength-i.cursor.offset),s=new fM;return s.data.pushRange(e),s}r();!function(t){function i(){return t.call(this,"minf")||this}Zt(i,t)}(Dt);r();var gM;!function(t){function i(i){var e=t.call(this,"meta",0,0)||this;return e.handler=i,e}Zt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.handler.serialize())}}(Zy);r(),r(),function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(gM||(gM={})),r();var wM,AM,vM={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function mM(t,i){i.writer.writeUInt(E(t.a,16),32),i.writer.writeUInt(E(t.b,16),32),i.writer.writeUInt(E(0,30),32),i.writer.writeUInt(E(t.c,16),32),i.writer.writeUInt(E(t.d,16),32),i.writer.writeUInt(E(0,30),32),i.writer.writeUInt(E(t.x,16),32),i.writer.writeUInt(E(t.y,16),32),i.writer.writeUInt(E(1,30),32)}function pM(t,i){var e,s,n,r;i.writer.writeUInt(null!==(e=t.isLeading)&&void 0!==e?e:wM.UNKNOWN,2),i.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:AM.UNKNOWN,2),i.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:AM.UNKNOWN,2),i.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:AM.UNKNOWN,2)}function Ia(t,i){var e,s,n;i.writer.writeUInt(0,4),pM(t,i),i.writer.writeUInt(null!==(e=t.samplePaddingValue)&&void 0!==e?e:0,3),i.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),i.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}r(),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(wM||(wM={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(AM||(AM={})),r(),r();var yM=function(){};r(),r(),r();var MM=function(t){function i(i,e,s){var n=t.call(this,"pssh",i,0)||this;return n.systemId=e,n.data=s,n}return Zt(i,t),_.defineProperty(i.prototype,"systemId",{get:function(){return this.ek},set:function(t){if(16!==t.length)throw new b("Provided systemId length is not 16.");this.ek=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"data",{get:function(){return this.nk},set:function(t){if(!my(t.length,32))throw new b("Provided data length does not fit in 32 bits.");this.nk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},i.prototype.serializeVersionBoxContent=function(t){},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(Jr.from(this.systemId)),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.data.length,32),i.concat(Jr.from(this.data))},i}(Lt),TM=function(t){function i(i,e){return t.call(this,0,i,e)||this}return Zt(i,t),i}(MM),NM=function(t){function i(i,e,s){var n=t.call(this,1,i,e)||this;return n.kIds=s,n}return Zt(i,t),_.defineProperty(i.prototype,"kIds",{get:function(){return this.rk},set:function(t){if(!my(t.length,32))throw new b("Provided kIds length cannot fit in 32 bits.");if(t.some((function(t){return 16!==t.length})))throw new b("Not all provided key ids are 16 bytes long.");this.rk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var i=0,e=this.kIds;i<e.length;i++){var s=e[i];t.concat(Jr.from(s))}},i}(MM);function DM(t){var i=t.data.nextUint8();t.data.skip(3);var e=t.data.nextUint8Array(16),s=[];if(1===i)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var h=t.data.nextUint32(),o=t.data.nextUint8Array(h);return 1===i?new NM(e,o,s):new TM(e,o)}r(),r();var IM=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"mehd",e,s)||this;return n.fragmentDuration=i,n}return Zt(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"fragmentDuration",{get:function(){return this.hk},set:function(t){if(!my(t,this.bitSize))throw new b("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.hk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(Lt),SM=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Zt(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration,32)},i}(IM),EM=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Zt(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),i.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},i}(IM);function bM(t){var i=t.data,e=Xu(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new SM(i.nextUint32(),n.raw):new EM(i.nextUint64(),n.raw)}r();var LM=function(t){function i(i,e,s,n){void 0===e&&(e={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,h,o,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=i,a.defaultSampleDescriptionIndex=null!==(r=null==e?void 0:e.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(h=e.sampleDuration)&&void 0!==h?h:0,a.defaultSampleSize=null!==(o=e.sampleSize)&&void 0!==o?o:0,a.defaultSampleFlags=e.sampleFlags,a}return Zt(i,t),_.defineProperty(i.prototype,"trackId",{get:function(){return this.ck},set:function(t){if(!my(t,32))throw new b("Provided track id does not fit in 32 bits.");this.ck=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.lk},set:function(t){if(!my(t,32))throw new b("Provided default sample description index does not fit in 32 bits.");this.lk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.dk},set:function(t){if(!my(t,32))throw new b("Provided default sample duration does not fit in 32 bits.");this.dk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.fk},set:function(t){if(!my(t,32))throw new b("Provided default sample size does not fit in 32 bits.");this.fk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this._k},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!my(t.samplePaddingValue,3))throw new b("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!my(t.sampleDegradationPriority,16))throw new b("Provided sample degradation priority does not fit in 16 bits.");this._k=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},i.prototype.serializeBoxContent=function(i){var e;t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),i.writer.writeUInt(this.defaultSampleDescriptionIndex,32),i.writer.writeUInt(this.defaultSampleDuration,32),i.writer.writeUInt(this.defaultSampleSize,32),Ia(null!==(e=this.defaultSampleFlags)&&void 0!==e?e:{},i)},i}(Lt);function kM(t){var i=t.data,e=Xu(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),h=i.nextUint32(),o=i.nextUint32(),a=i.nextUint32(),u=Lo(new gy(Jr.from(i.nextUint8Array(4))));return new LM(r,{sampleDescriptionIndex:h,sampleDuration:o,sampleSize:a,sampleFlags:u},s,n.raw)}var CM=function(t){function i(){return t.call(this,"mvex")||this}return Zt(i,t),i}(Dt);function xM(t){for(var i=new CM,e=0,s=Io(t.data);e<s.length;e++){var n=s[e];fo(n,"mehd")?i.boxes.push(bM(n)):fo(n,"trex")?i.boxes.push(kM(n)):i.boxes.push(Uh(n))}return i}r();var OM=function(t){function i(e,s,n,r,h){void 0===h&&(h=0);var o,a,u,c=this;return(c=t.call(this,"mvhd",r,h)||this).creationTime=e.creation,c.modificationTime=e.modification,c.timescale=e.scale,c.duration=e.duration,c.rate=null!==(o=n.rate)&&void 0!==o?o:i.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:i.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:vM,c.gk=s,c}return Zt(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"creationTime",{get:function(){return this.XL},set:function(t){if(!my(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.XL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"modificationTime",{get:function(){return this.ZL},set:function(t){if(!my(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.ZL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"timescale",{get:function(){return this.KL},set:function(t){if(!my(t,32))throw new b("Provided sequence number does not fit in 32 bits.");this.KL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"duration",{get:function(){return this.JL},set:function(t){if(!my(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.JL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"rate",{get:function(){return this.wk},set:function(t){if(!my(E(t,16),32))throw new b("Provided rate does not fit in 32 bits (fixed 16.16).");this.wk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"volume",{get:function(){return this.Ak},set:function(t){if(!my(E(t,8),16))throw new b("Provided volume does not fit in 16 bits (fixed 8.8).");this.Ak=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"matrix",{get:function(){return this.vk},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new b("(u, v, w) does not match the required (0, 0, 1)");this.vk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"nextTrackId",{get:function(){return this.gk},set:function(t){if(0===t)throw new b("NextTrackId cannot be 0.");if(!my(t,32))throw new b("NextTrackId cannot exceed 32 bits.");this.gk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMvhdContent(i),i.writer.writeUInt(E(this.rate,16),32),i.writer.writeUInt(E(this.volume,8),16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),mM(this.matrix,i);for(var e=0;e<6;e++)i.writer.writeUInt(0,32);i.writer.writeUInt(this.nextTrackId,32)},i.DEFAULT_RATE=1,i.DEFAULT_VOLUME=1,i}(Lt),jM=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,0,n)||this}return Zt(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(OM),zM=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,1,n)||this}return Zt(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(OM);function PM(t){var i=t.data,e=Xu(i.nextUint32()),s=e.version,n=e.flags,r=Fy(i,s),h=Jc(i.nextUint32(),16),o=Jc(i.nextUint16(),8);i.skip(2),i.skip(8);var a=Yy(i);i.skip(24);var u=i.nextUint32();return 0===s?new jM(r,u,{rate:h,volume:o,matrix:a},n.raw):new zM(r,u,{rate:h,volume:o,matrix:a},n.raw)}r(),r();var BM=function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o={});var a,u,c,l=this;return l=t.call(this,"tkhd",i,function(t){var i,e,s,n;return{trackEnabled:null===(i=null==t?void 0:t.trackEnabled)||void 0===i||i,trackInMovie:null===(e=null==t?void 0:t.trackInMovie)||void 0===e||e,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(o))||this,l.creationTime=e.creation,l.modificationTime=e.modification,l.trackId=s,l.duration=e.duration,l.volume=n,l.width=r,l.height=h,l.layer=null!==(a=o.layer)&&void 0!==a?a:0,l.alternateGroup=null!==(u=o.alternateGroup)&&void 0!==u?u:0,l.matrix=null!==(c=o.matrix)&&void 0!==c?c:vM,l}return Zt(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"creationTime",{get:function(){return this.XL},set:function(t){if(!my(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.XL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"modificationTime",{get:function(){return this.ZL},set:function(t){if(!my(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.ZL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"trackId",{get:function(){return this.ck},set:function(t){if(0===t)throw new b("trackId cannot be 0.");if(!my(t,32))throw new b("trackId cannot exceed 32 bits.");this.ck=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"duration",{get:function(){return this.JL},set:function(t){if(!my(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.JL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"volume",{get:function(){return this.Ak},set:function(t){if(!my(E(t,8),16))throw new b("Provided volume does not fit in 16 bits (fixed 8.8).");this.Ak=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"width",{get:function(){return this.pk},set:function(t){if(!my(E(t,16),32))throw new b("Provided width does not fit in 32 bits (fixed 16.16).");this.pk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"height",{get:function(){return this.yk},set:function(t){if(!my(E(t,16),32))throw new b("Provided height does not fit in 32 bits (fixed 16.16).");this.yk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"layer",{get:function(){return this.Mk},set:function(t){if(!my(t,16))throw new b("Provided layer does not fit in 16 bits.");this.Mk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"alternateGroup",{get:function(){return this.Tk},set:function(t){if(!my(t,16))throw new b("Provided alternateGroup does not fit in 16 bits.");this.Tk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"matrix",{get:function(){return this.vk},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new b("(u, v, w) does not match the required (0, 0, 1)");this.vk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeTkhdContent(i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.layer,16),i.writer.writeUInt(this.alternateGroup,16),i.writer.writeUInt(E(this.volume,8),16),i.writer.writeUInt(0,16),mM(this.matrix,i),i.writer.writeUInt(E(this.width,16),32),i.writer.writeUInt(E(this.height,16),32)},i}(Lt),RM=function(t){function i(i,e,s,n,r,h){return t.call(this,0,i,e,s,n,r,h)||this}return Zt(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},i}(BM),ju=function(t){function i(i,e,s,n,r,h){return t.call(this,1,i,e,s,n,r,h)||this}return Zt(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(BM);function UM(t){var i,e,s,n,r=t.data,h=Xu(r.nextUint32()),o=h.version,a=h.flags,u=a.isSet(8),c=a.isSet(4),l=a.isSet(2),d=a.isSet(1);0===o?(i=r.nextUint32(),e=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(i=r.nextUint64(),e=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),_=r.nextInt16(),g=Jc(r.nextInt16(),8);r.skip(2);var w=Yy(r),A=Jc(r.nextUint32(),16),v=Jc(r.nextUint32(),16);return 0===o?new RM({creation:i,modification:e,duration:n},s,g,A,v,{layer:f,matrix:w,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l}):new ju({creation:i,modification:e,duration:n},s,g,A,v,{layer:f,matrix:w,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l})}var Ie=function(t){function i(){return t.call(this,"trak")||this}return Zt(i,t),i}(Dt);function QM(t){for(var i=new Ie,e=0,s=Io(t.data);e<s.length;e++){var n=s[e];fo(n,"tkhd")?i.boxes.push(UM(n)):fo(n,"mdia")?i.boxes.push(dM(n)):fo(n,"edts")?i.boxes.push(eM(n)):i.boxes.push(Uh(n))}return i}var je=function(t){function i(){return t.call(this,"moov")||this}return Zt(i,t),i}(Dt);function FM(t){for(var i=new je,e=0,s=Io(t.data);e<s.length;e++){var n=s[e];fo(n,"mvhd")?i.boxes.push(PM(n)):fo(n,"trak")?i.boxes.push(QM(n)):fo(n,"mvex")?i.boxes.push(xM(n)):fo(n,"pssh")?i.boxes.push(DM(n)):i.boxes.push(Uh(n))}return i}r(),r(),r();var YM=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",e,s)||this;return n.baseMediaDecodeTime=i,n}return Zt(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"baseMediaDecodeTime",{get:function(){return this.Nk},set:function(t){if(!my(t,this.bitSize))throw new b("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.Nk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(Lt),ou=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Zt(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime,32)},i}(YM),GM=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Zt(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},i}(YM);function VM(t){var i=t.data,e=Xu(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new ou(i.nextUint32(),n.raw):new GM(i.nextUint64(),n.raw)}r();var WM=function(t){function i(i,e){void 0===e&&(e=0);var s=t.call(this,"tfhd",e,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(i))||this;return s.trackId=i.trackId,s.baseDataOffset=i.baseDataOffset,s.sampleDescriptionIndex=i.sampleDescriptionIndex,s.defaultSampleDuration=i.defaultSampleDuration,s.defaultSampleSize=i.defaultSampleSize,s.defaultSampleFlags=i.defaultSampleFlags,s}return Zt(i,t),_.defineProperty(i.prototype,"trackId",{get:function(){return this.ck},set:function(t){if(!my(t,32))throw new b("Provided track id does not fit in 32 bits.");this.ck=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"baseDataOffset",{get:function(){return this.Dk},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new b("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new b("The base data offset present flag is not set.");if(t&&!my(t,64))throw new b("Provided baseDataOffset does not fit in 32 bits.");this.Dk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleDescriptionIndex",{get:function(){return this.Ik},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new b("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new b("The sample description index flag is not set.");if(t&&!my(t,32))throw new b("Provided sampleDescriptionIndex does not fit in 32 bits.");this.Ik=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.dk},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new b("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new b("The default sample duration present flag is not set.");if(t&&!my(t,32))throw new b("Provided defaultSampleDuration does not fit in 32 bits.");this.dk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.fk},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new b("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new b("The default sample size present flag is not set.");if(t&&!my(t,32))throw new b("Provided defaultSampleSize does not fit in 32 bits.");this.fk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this._k},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new b("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new b("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!my(t.samplePaddingValue,3))throw new b("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!my(t.sampleDegradationPriority,16))throw new b("Provided sample degradation priority does not fit in 16 bits.");this._k=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(i+=8),this.flags.sampleDescriptionIndexPresent&&(i+=4),this.flags.defaultSampleDurationPresent&&(i+=4),this.flags.defaultSampleSizePresent&&(i+=4),this.flags.defaultSampleFlagsPresent&&(i+=4),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(i.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&i.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&i.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&i.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&Ia(this.defaultSampleFlags,i)},i}(Lt);function HM(t){var i=t.data,e=i.nextUint8(),s=new gy(Jr.from(i.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var h=Boolean(s.readBit()),o=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),l=i.nextUint32(),d=c?i.nextUint64():void 0,f=u?i.nextUint32():void 0,_=a?i.nextUint32():void 0,g=o?i.nextUint32():void 0,w=h?Lo(new gy(Jr.from(i.nextUint8Array(4)))):void 0;return new WM({trackId:l,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:d,sampleDescriptionIndex:f,defaultSampleDuration:_,defaultSampleSize:g,defaultSampleFlags:w},e)}r();var Fo=function(t){function i(i,e,s){var n=t.call(this,"trun",i,function(t){var i,e,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(i=t.sampleDurationPresent)&&void 0!==i&&i,sampleSizePresent:null!==(e=t.sampleSizePresent)&&void 0!==e&&e,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(e))||this;return n.dataOffset=e.dataOffset,n.samples=s,n.firstSampleFlags=e.firstSampleFlags,n}return Zt(i,t),_.defineProperty(i.prototype,"dataOffset",{get:function(){return this.Sk},set:function(t){if(t&&!my(t,32))throw new b("Provided data offset does not fit in 32 bits.");this.Sk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"firstSampleFlags",{get:function(){return this.Ek},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!my(t.samplePaddingValue,3))throw new b("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!my(t.sampleDegradationPriority,16))throw new b("Provided sample degradation priority does not fit in 16 bits.");this.Ek=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"samples",{get:function(){return this.bk},set:function(t){var i,e;if(!my(t.length,32))throw new b("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new b("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new b("The sample duration present flag is not set.");if(r.duration&&!my(r.duration,32))throw new b("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new b("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new b("The sample size present flag is not set.");if(r.size&&!my(r.size,32))throw new b("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new b("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new b("The sample flags present flag is not set.");if((null===(i=r.flags)||void 0===i?void 0:i.samplePaddingValue)&&!my(r.flags.samplePaddingValue,3))throw new b("Provided sample padding value does not fit in 3 bits.");if((null===(e=r.flags)||void 0===e?void 0:e.sampleDegradationPriority)&&!my(r.flags.sampleDegradationPriority,16))throw new b("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new b("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new b("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!my(r.compositionTimeOffset,32))throw new b("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.bk=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(i+=4),this.flags.firstSampleFlagsPresent&&(i+=4),this.flags.sampleDurationPresent&&(i+=4*this.samples.length),this.flags.sampleSizePresent&&(i+=4*this.samples.length),this.flags.sampleFlagsPresent&&(i+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(i+=4*this.samples.length),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&i.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&Ia(this.firstSampleFlags,i);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];this.flags.sampleDurationPresent&&i.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&i.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&Ia(n.flags,i),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?i.writer.writeUInt(n.compositionTimeOffset,32):i.writer.writeInt(n.compositionTimeOffset,32))}},i}(Lt);function qM(t){var i=t.data,e=i.nextUint8(),s=new gy(Jr.from(i.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),h=Boolean(s.readBit()),o=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=i.nextUint32(),l={sampleDurationPresent:o,sampleSizePresent:h,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(l.dataOffset=i.nextInt32()),a&&(l.firstSampleFlags=Lo(new gy(Jr.from(i.nextUint8Array(4)))));for(var d=[],f=0;f<c;f++){var _={};o&&(_.duration=i.nextUint32()),h&&(_.size=i.nextUint32()),r&&(_.flags=Lo(new gy(Jr.from(i.nextUint8Array(4))))),n&&(_.compositionTimeOffset=0===e?i.nextUint32():i.nextInt32()),d.push(_)}return new Fo(e,l,d)}var zs=function(t){function i(){return t.call(this,"traf")||this}return Zt(i,t),i}(Dt);function XM(t){for(var i=new zs,e=0,s=Io(t.data);e<s.length;e++){var n=s[e];fo(n,"tfhd")?i.boxes.push(HM(n)):fo(n,"tfdt")?i.boxes.push(VM(n)):fo(n,"trun")?i.boxes.push(qM(n)):i.boxes.push(Uh(n))}return i}var ZM=function(t){function i(){return t.call(this,"moof")||this}return Zt(i,t),i}(Dt);function KM(t){for(var i=new ZM,e=0,s=Io(t.data);e<s.length;e++){var n=s[e];fo(n,"traf")?i.boxes.push(XM(n)):fo(n,"pssh")?i.boxes.push(DM(n)):i.boxes.push(Uh(n))}return i}r();!function(t){function i(i){var e=t.call(this,"mfhd",0,0)||this;return e.sequenceNumber=i,e}Zt(i,t),_.defineProperty(i.prototype,"sequenceNumber",{get:function(){return this.Lk},set:function(t){if(!my(t,32))throw new b("Provided sequence number does not fit in 32 bits.");this.Lk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.sequenceNumber,32)}}(Lt);r();var JM=function(t){function i(i){var e=t.call(this,"frma")||this;return e.codingName=i,e}return Zt(i,t),_.defineProperty(i.prototype,"codingName",{get:function(){return this.Ck},set:function(t){if(4!==t.length)throw new b("Provided coding name was not 4 characters long.");this.Ck=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},i}(Mn);r();!function(t){function i(i,e){var s=t.call(this,"pasp")||this;return s.hSpacing=i,s.vSpacing=e,s}Zt(i,t),_.defineProperty(i.prototype,"hSpacing",{get:function(){return this.xk},set:function(t){if(!my(t,32))throw new b("Provided hSpacing does not fit in 32 bits.");this.xk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"vSpacing",{get:function(){return this.Ok},set:function(t){if(!my(t,32))throw new b("Provided vSpacing does not fit in 32 bits.");this.Ok=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(Mn);r();!function(t){function i(i,e,s){var n=t.call(this,i)||this;return n.sample=e,n.sinf=s,n}Zt(i,t),i.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},i.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(Dt);r();!function(t){function i(i,e,s){var n=t.call(this,"sinf")||this;return n.schm=e,n.schi=s,n.frma=new JM(i),n}Zt(i,t),i.prototype.getBoxContentSize=function(){var t,i,e,s;return this.frma.getSize()+(null!==(i=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==i?i:0)+(null!==(s=null===(e=this.schi)||void 0===e?void 0:e.getSize())&&void 0!==s?s:0)},i.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(Mn);r();var $M=function(t){function i(i,e,s){var n=t.call(this,"saio",i,void 0===s?0:1)||this;return n.entries=e,n.explicitAuxInfoType=s,n}return Zt(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"entries",{get:function(){return this.zL},set:function(t){var i=this;if(!my(t.length,32))throw new b("Number of entries provided does not fit in 32 bits.");if(t.some((function(t){return!my(t,i.bitSize)})))throw new b("Not all provided entries fit in ".concat(this.bitSize," bits."));this.zL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.jk},set:function(t){if(void 0===t)this.flags=0;else{if(!my(t.auxInfoType,32))throw new b("Provided auxInfoType does not fit in 32 bits.");if(!my(t.auxInfoTypeParameter,32))throw new b("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.jk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(i)},i}(Lt);(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Zt(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s,32)}}})($M),function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Zt(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}($M);r();!function(t){function i(i,e,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=i,n.sampleInfoSizes=e,n.explicitAuxInfoType=s,n}Zt(i,t),_.defineProperty(i.prototype,"defaultSampleInfoSize",{get:function(){return this.zk},set:function(t){if(!my(t,8))throw new b("Provided defaultSampleInfoSize does not fit in a single byte.");this.zk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleInfoSizes",{get:function(){return this.Pk},set:function(t){if(!my(t.length,32))throw new b("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some((function(t){return!my(t,8)})))throw new b("Not all provided sampleInfoSizes fit in a byte.");this.Pk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.jk},set:function(t){if(void 0===t)this.flags=0;else{if(!my(t.auxInfoType,32))throw new b("Provided auxInfoType does not fit in 32 bits.");if(!my(t.auxInfoTypeParameter,32))throw new b("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.jk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},i.prototype.serializeBoxContent=function(i){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new b("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeByte(this.defaultSampleInfoSize),i.writer.writeUInt(this.sampleInfoSizes.length,32);for(var e=0,s=this.sampleInfoSizes;e<s.length;e++){var n=s[e];i.writer.writeByte(n)}}}(Lt);r();!function(t){function i(i){var e=t.call(this,"sdtp",0,0)||this;return e.samples=i,e}Zt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i);for(var e=0,s=this.samples;e<s.length;e++){pM(s[e],i)}}}(Lt);r();!function(t){function i(i){return t.call(this,"stsd",i,0)||this}Zt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(Zy);r();var tT=function(t){function i(i,e,s){var n=t.call(this,"sgpd",i,0)||this;return n.entries=s,n.groupingType=e,n}return Zt(i,t),_.defineProperty(i.prototype,"groupingType",{get:function(){return this.Bk},set:function(t){if(4!==t.length)throw new b("The provided groupingType does not equal 4 characters.");this.Bk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.groupingType),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];this.serializeEntryBoxContent(i,n)}},i.prototype.serializeEntryBoxContent=function(t,i){i.serializeBoxContent(t)},i}(Lt);(function(t){function i(i,e){return t.call(this,0,i,e)||this}Zt(i,t),i.prototype.serializeVersionBoxContent=function(t){}})(tT),function(t){function i(i,e,s){var n=t.call(this,1,i,s)||this;return n.defaultLength=e,n}Zt(i,t),_.defineProperty(i.prototype,"defaultLength",{get:function(){return this.Rk},set:function(t){if(!my(t,32))throw new b("The provided defaultLength does not fit in 32 bits.");this.Rk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},i.prototype.serializeEntryBoxContent=function(t,i){0===this.defaultLength&&t.writer.writeUInt(i.getBoxContentSize(),32),i.serializeBoxContent(t)}}(tT),function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=this;if(i<2)throw new b("This constructor is only meant for versions 2 and up.");return(r=t.call(this,i,e,s)||this).defaultSampleDescriptionIndex=n,r}Zt(i,t),_.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.lk},set:function(t){if(!my(t,32))throw new b("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.lk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(tT);r();(function(t){function i(i){void 0===i&&(i=[]);var e=t.call(this,"stsz",0,0)||this;return e.sampleSizes=i,e}Zt(i,t),_.defineProperty(i.prototype,"sampleSizes",{get:function(){return this.Uk},set:function(t){if(!my(t.length,32))throw new b("Number of allowed samples cannot fit in 32 bits.");if(t.some((function(t){return!my(t,32)})))throw new b("Not all sampleSizes can be represented in 32 bits.");this.Uk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(this.sampleSizes.length,32);for(var e=0,s=this.sampleSizes;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}})(Lt),function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=i,s.samples=e,s}Zt(i,t),_.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.fk},set:function(t){if(!my(t,32))throw new b("Provided defaultSampleSize does not fit in 32 bits.");this.fk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"samples",{get:function(){return this.bk},set:function(t){if(!my(t,32))throw new b("Number of allowed samples cannot fit in 32 bits.");this.bk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.defaultSampleSize,32),i.writer.writeUInt(this.samples,32)}}(Lt);r();!function(t){function i(){return t.call(this,"stbl")||this}Zt(i,t)}(Dt);r();!function(t){function i(i){var e=t.call(this,"stsc",0,0)||this;return e.entries=i,e}Zt(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.zL},set:function(t){if(!my(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!my(t.firstChunk,32)||!my(t.sampleDescriptionIndex,32)||!my(t.samplesPerChunk,32)})))throw new b("Not all entries can be represented in 96 bits.");this.zL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.firstChunk,32),i.writer.writeUInt(n.samplesPerChunk,32),i.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(Lt);r();!function(t){function i(){return t.call(this,"schi")||this}Zt(i,t)}(Dt);r();!function(t){function i(i,e,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=i,n.schemeVersion=e,n.schemeUri=s,n}Zt(i,t),_.defineProperty(i.prototype,"schemeType",{get:function(){return this.Qk},set:function(t){if(4!==t.length)throw new b("The provided schemeType does not have a length of 4.");this.Qk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"schemeVersion",{get:function(){return this.Fk},set:function(t){if(!my(t,32))throw new b("The provided schemeVersion does not fit in 23 bits.");this.Fk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"schemeUri",{get:function(){return this.Yk},set:function(t){if(t&&4!==t.length)throw new b("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this.Yk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeType),i.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(i.writer.writeString(this.schemeUri),i.writer.writeByte(0))}}(Lt);r();var iT=function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o=0);var a=t.call(this,"sidx",i,o)||this;return a.referenceId=e,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=h,a}return Zt(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"referenceId",{get:function(){return this.Gk},set:function(t){if(!my(t,32))throw new b("Provided referenceId does not fit in 32 bits.");this.Gk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"timescale",{get:function(){return this.KL},set:function(t){if(!my(t,32))throw new b("Provided timescale does not fit in 32 bits.");this.KL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"earliestPresentationTime",{get:function(){return this.Vk},set:function(t){if(!my(t,this.bitSize))throw new b("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.Vk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"firstOffset",{get:function(){return this.Wk},set:function(t){if(!my(t,this.bitSize))throw new b("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.Wk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"references",{get:function(){return this.Hk},set:function(t){if(!my(t.length,16))throw new b("The number of provided reference items does not fit in 16 bits.");for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!my(s.referencedSize,31))throw new b("Provided referenced size does not fit in 31 bits.");if(!my(s.subsegmentDuration,32))throw new b("Provided subsegment duration does not fit in 31 bits.");if(!my(s.sapType,3))throw new b("Provided SAP type does not fit in 3 bits.");if(!my(s.sapDeltaTime,28))throw new b("Provided SAP delta time does not fit in 28 bits.")}this.Hk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.referenceId,32),i.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(i),i.writer.writeUInt(0,16),i.writer.writeUInt(this.references.length,16);for(var e=0,s=this.references;e<s.length;e++){var n=s[e];i.writer.writeBit(n.referenceType),i.writer.writeUInt(n.referencedSize,31),i.writer.writeUInt(n.subsegmentDuration,32),i.writer.writeBool(n.startsWithSap),i.writer.writeUInt(n.sapType,3),i.writer.writeUInt(n.sapDeltaTime,28)}},i}(Lt),eT=function(t){function i(i,e,s,n,r,h){return void 0===h&&(h=0),t.call(this,0,i,e,s,n,r,h)||this}return Zt(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},i}(iT),sT=function(t){function i(i,e,s,n,r,h){return void 0===h&&(h=0),t.call(this,1,i,e,s,n,r,h)||this}return Zt(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},i}(iT);r();var nT=function(t){function i(i,e,s){return t.call(this,"styp",i,e,s)||this}return Zt(i,t),i}(sM);function rT(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new nT(e,s,n)}r();!function(t){function i(i){void 0===i&&(i=0);var e=t.call(this,"smhd",0,0)||this;return e.balance=i,e}Zt(i,t),_.defineProperty(i.prototype,"balance",{get:function(){return this.qk},set:function(t){if(t<-1||t>1)throw new b("Provided balance does not fit in the allowed range [-1, 1].");if(!my(E(t,8),16))throw new b("Provided balance does not fit in 16 bits (fixed 8.8).");this.qk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(E(this.balance,8),16),i.writer.writeUInt(0,16)}}(Lt);r();!function(t){function i(i){var e=t.call(this,"stss",0,0)||this;return e.entries=i,e}Zt(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.zL},set:function(t){if(!my(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!my(t,32)})))throw new b("Not all entries can be represented in 32 bits.");this.zL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(Lt);r();!function(t){function i(i){var e=t.call(this,"stts",0,0)||this;return e.entries=i,e}Zt(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.zL},set:function(t){if(!my(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!my(t.sampleCount,32)||!my(t.sampleDelta,32)})))throw new b("Not all entries can be represented in 64 bits.");this.zL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),i.writer.writeUInt(n.sampleDelta,32)}}}(Lt);r();!function(t){function i(i){var e=t.call(this,"trep",0,0)||this;return e.trackId=i,e}Zt(i,t),_.defineProperty(i.prototype,"trackId",{get:function(){return this.ck},set:function(t){if(!my(t,32))throw new b("The provided trackId does not fit in 32 bits.");this.ck=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32)}}(Zy);r();!function(t){function i(){return t.call(this,"udta")||this}Zt(i,t)}(Dt);r();var hT={red:0,green:0,blue:0};!function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=hT);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=i,s.opColor=e,s}Zt(i,t),_.defineProperty(i.prototype,"opColor",{get:function(){return this.Xk},set:function(t){if(!my(t.red,16)||!my(t.green,16)||!my(t.blue,16))throw new b("Not all colors could be represented in 16 bits.");this.Xk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.graphicsMode,16),i.writer.writeUInt(this.opColor.red,16),i.writer.writeUInt(this.opColor.green,16),i.writer.writeUInt(this.opColor.blue,16)}}(Lt);r();var oT=function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h,o,a,u,c,l=this;return(l=t.call(this,i,e)||this).width=s.width,l.height=s.height,l.horizontalResolution=null!==(h=s.horizontal)&&void 0!==h?h:72,l.verticalResolution=null!==(o=s.vertical)&&void 0!==o?o:72,l.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",l.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,l.depth=null!==(c=n.depth)&&void 0!==c?c:24,l.clap=n.clap,l.pasp=n.pasp,l.extra=r,l}return Zt(i,t),_.defineProperty(i.prototype,"width",{get:function(){return this.pk},set:function(t){if(!my(t,16))throw new b("Provided width does not fit in 16 bits.");this.pk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"height",{get:function(){return this.yk},set:function(t){if(!my(t,16))throw new b("Provided height does not fit in 16 bits.");this.yk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"horizontalResolution",{get:function(){return this.Zk},set:function(t){if(!my(E(t,16),32))throw new b("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.Zk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"verticalResolution",{get:function(){return this.Kk},set:function(t){if(!my(E(t,16),32))throw new b("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.Kk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"compressorName",{get:function(){return this.Jk},set:function(t){if(t.length>31)throw new b("The provided compressorName should at most be 31 characters long.");this.Jk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"frameCount",{get:function(){return this.$k},set:function(t){if(!my(t,16))throw new b("Provided frameCount does not fit in 16 bits.");this.$k=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"depth",{get:function(){return this.tC},set:function(t){if(!my(t,16))throw new b("Provided depth does not fit in 16 bits.");this.tC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e,s,n,r,h;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(e=null===(i=this.clap)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(h=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==h?h:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.width,16),i.writer.writeUInt(this.height,16),i.writer.writeUInt(E(this.horizontalResolution,16),32),i.writer.writeUInt(E(this.verticalResolution,16),32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.frameCount,16),i.writer.writeByte(this.compressorName.length),i.writer.writeString(this.compressorName);for(var e=0;e<31-this.compressorName.length;e++)i.writer.writeByte(0);i.writer.writeUInt(this.depth,16),i.writer.writeInt(-1,16),this.clap&&i.concat(this.clap.serialize()),this.pasp&&i.concat(this.pasp.serialize()),this.extra&&py(i.writer,this.extra)},i}(qy);r(),r();!function(t){function i(i){var e=t.call(this,"esds",0,0)||this;return e.esDescriptor=i,e}Zt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof T?this.esDescriptor.length:this.esDescriptor.getSize())},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor instanceof T?i.concat(Jr.from(this.esDescriptor)):this.esDescriptor.serialize(i)}}(Lt);r();!function(t){function i(i,e,s){var n=t.call(this,"mp4a",i,s)||this;return n.esd=e,n}Zt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.esd.serialize())}}(Xy);r();!function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",i,e,n)||this;return r.esDescriptor=s,r}Zt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(oT);r();!function(t){function i(i,e){var s=t.call(this,"mp4s",i)||this;return s.esDescriptor=e,s}Zt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(qy);r(),r();!function(t){function i(i){var e=t.call(this,"avcC")||this;return e.decoderConfig=i,e}Zt(i,t),i.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},i.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(Mn);r();!function(){function t(t,i,e,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=e,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=i,this.spsSets=s,this.ppsSets=n}_.defineProperty(t.prototype,"version",{get:function(){return this.iC},set:function(t){if(!my(t,8))throw new b("Provided version does not fit in 8 bits.");this.iC=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"profileIndication",{get:function(){return this.eC},set:function(t){if(!my(t,8))throw new b("Provided profileIndication does not fit in 8 bits.");this.eC=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.sC},set:function(t){if(!my(t,8))throw new b("Provided profileCompatibility does not fit in 8 bits.");this.sC=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"levelIndication",{get:function(){return this.nC},set:function(t){if(!my(t,8))throw new b("Provided levelIndication does not fit in 8 bits.");this.nC=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"spsSets",{get:function(){return this.rC},set:function(t){if(!my(t.length,5))throw new b("Provided number of spsSets exceeds the max (32)");this.rC=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"ppsSets",{get:function(){return this.hC},set:function(t){if(!my(t.length,8))throw new b("Provided number of ppsSets exceeds the max (256)");this.hC=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce((function(t,i){return t+i.length}),0)+2*this.ppsSets.length+this.ppsSets.reduce((function(t,i){return t+i.length}),0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var i=0,e=this.spsSets;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.length,16),t.concat(Jr.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var h=r[n];t.writer.writeUInt(h.length,16),t.concat(Jr.from(h))}}}();r();!function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h=t.call(this,"avc1",i,e,n)||this;return h.configurationBox=s,h.bitrateBox=r,h}Zt(i,t),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(e=null===(i=this.bitrateBox)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.configurationBox.serialize()),this.bitrateBox&&i.concat(this.bitrateBox.serialize())}}(oT);r();!function(t){function i(i,e,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=i,n.max=e,n.avg=s,n}Zt(i,t),_.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.DL},set:function(t){if(!my(t,32))throw new b("Provided bufferSizeDb does not fit in 32 bits.");this.DL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"max",{get:function(){return this.oC},set:function(t){if(!my(t,32))throw new b("Provided max does not fit in 32 bits.");this.oC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"avg",{get:function(){return this.aC},set:function(t){if(!my(t,32))throw new b("Provided avg does not fit in 32 bits.");this.aC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 12},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(Mn);r(),r(),r();var aT=function(t){function i(i,e){var s,n,r,h,o=this;if(o=t.call(this,"tenc",i,0)||this,e.perSampleIvSize>0&&(null!==(n=null===(s=e.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new b("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return o.kId=e.kId,o.isProtected=null!==(r=e.isProtected)&&void 0!==r?r:1,e.perSampleIvSize>0?o.perSampleIvSize=e.perSampleIvSize:o.constantIv=null!==(h=e.constantIv)&&void 0!==h?h:new T(0),o}return Zt(i,t),_.defineProperty(i.prototype,"isProtected",{get:function(){return this.uC},set:function(t){if(!my(t,8))throw new b("Provided isProtected does not fit in 1 byte.");this.uC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"perSampleIvSize",{get:function(){return this.cC},set:function(t){if(![8,16].includes(t))throw new b("Provided perSampleIvSize does not match any allowed value [8, 16].");this.cC=t,this.lC=new T(0)},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"kId",{get:function(){return this.dC},set:function(t){if(16!==t.length)throw new b("Provided kId length is not 16.");this.dC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"constantIv",{get:function(){return this.lC},set:function(t){if(![8,16].includes(t.length))throw new b("Provided constant IV length does not match any allowed value [8, 16].");this.lC=t,this.cC=0},enumerable:!1,configurable:!0}),i.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeOwnContent(i)},i.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),py(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),py(t.writer,this.constantIv))},i}(Lt),uT=(function(t){function i(i){return t.call(this,0,i)||this}Zt(i,t)}(aT),function(t){function i(i){var e=t.call(this,1,i)||this;return e.cryptByteBlocks=i.cryptByteBlock,e.skipByteBlocks=i.skipByteBlock,e}return Zt(i,t),_.defineProperty(i.prototype,"cryptByteBlocks",{get:function(){return this.fC},set:function(t){if(!my(t,4))throw new b("Provided cryptByteBlocks does not fit in 4 bits.");this.fC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"skipByteBlocks",{get:function(){return this._C},set:function(t){if(!my(t,4))throw new b("Provided skipByteBlocks does not fit in 4 bits.");this._C=t},enumerable:!1,configurable:!0}),i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},i}(aT));!function(t){function i(i){var e=t.call(this)||this;return e.tencBox=new uT(i),e}Zt(i,t),i.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},i.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(yM);function cT(t){return void 0!==t.iv}function Be(t){return void 0!==t.subsamples}r();!function(t){function i(i){var e=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return e.samples=i,e}Zt(i,t),_.defineProperty(i.prototype,"samples",{get:function(){return this.bk},set:function(t){var i;if(!my(t.length,32))throw new b("The number of samples provided does not fit in 32 bits.");for(var e=0,s=t;e<s.length;e++){var n=s[e];if(cT(n)&&![8,16].includes(n.iv.length))throw new b("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===i&&(i=Be(n)),!0===i&&!Be(n)||!1===i&&Be(n))throw new b("Mix of samples with and without subsamples detected.");if(Be(n)){if(!my(n.subsamples.length,16))throw new b("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];if(!my(o.clearData,16))throw new b("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!my(o.protectedData,23))throw new b("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=i&&i,this.bk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){for(var i=0,e=0,s=this.samples;e<s.length;e++){var n=s[e];cT(n)&&(i+=n.iv.length),Be(n)&&(i+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];if(cT(n)&&py(i.writer,n.iv),Be(n)){i.writer.writeUInt(n.subsamples.length,16);for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];i.writer.writeUInt(o.clearData,16),i.writer.writeUInt(o.protectedData,32)}}}},i.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}}(Lt);r(),r();!function(t){function i(i,e,s,n,r){var h=t.call(this,"emsg",0,0)||this;return h.schemeIdUri=i,h.value=e,h.data=r,h.id=s,h.timescale=n.timescale,h.presentationTimeDelta=n.presentationTimeDelta,h.eventDuration=n.eventDuration,h}Zt(i,t),_.defineProperty(i.prototype,"timescale",{get:function(){return this.KL},set:function(t){if(!my(t,32))throw new b("The provided timescale does not fit in 32 bits.");this.KL=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"presentationTimeDelta",{get:function(){return this.gC},set:function(t){if(!my(t,32))throw new b("The provided presentationTimeDelta does not fit in 32 bits.");this.gC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"eventDuration",{get:function(){return this.wC},set:function(t){if(!my(t,32))throw new b("The provided eventDuration does not fit in 32 bits.");this.wC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"id",{get:function(){return this.ym},set:function(t){if(!my(t,32))throw new b("The provided id does not fit in 32 bits.");this.ym=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeIdUri),i.writer.writeByte(0),i.writer.writeString(this.value),i.writer.writeByte(0),i.writer.writeUInt(this.timescale,32),i.writer.writeUInt(this.presentationTimeDelta,32),i.writer.writeUInt(this.eventDuration,32),i.writer.writeUInt(this.id,32),i.concat(Jr.from(this.data))}}(Lt);r(),r(),r();var lT=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new vy,i=0,e=this.boxes;i<e.length;i++){var s=e[i];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function dT(t,i){return function(e){var s=function(t,i){for(var e=t.data,s=t.cursor;s.offset<e.byteLength;){var n=Qy(e,s);if(!n.complete)return;if(fo(n.box,i))return n.box}}(new Ry(zy(e),new By),t);if(!s)throw new b("".concat(t," box not found"));return i(s)}}var fT=dT("moov",FM),_T=dT("sidx",(function(t){var i,e,s=t.data,n=Xu(s.nextUint32()),r=n.version,h=n.flags,o=s.nextUint32(),a=s.nextUint32();0===r?(i=s.nextUint32(),e=s.nextUint32()):(i=s.nextUint64(),e=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],l=0;l<u;l++){var d=new gy(Jr.from(s.nextUint8Array(12))),f=d.readBit(),_=d.readUInt(31),g=d.readUInt(32),w=Boolean(d.readBit()),A=d.readUInt(3),v=d.readUInt(28);c.push({referenceType:f,referencedSize:_,subsegmentDuration:g,startsWithSap:w,sapType:A,sapDeltaTime:v})}return 0===r?new eT(o,a,i,e,c,h.raw):new sT(o,a,i,e,c,h.raw)})),gT=dT("moof",KM),wT=dT("pssh",DM);function AT(t){return function(t){for(var i=new lT,e=0,s=Io(t);e<s.length;e++){var n=s[e];fo(n,"ftyp")?i.boxes.push(rM(n)):fo(n,"styp")?i.boxes.push(rT(n)):fo(n,"moov")?i.boxes.push(FM(n)):fo(n,"moof")?i.boxes.push(KM(n)):fo(n,"mdat")?i.boxes.push(_M(n)):i.boxes.push(Uh(n))}return i}(new Ry(zy(t),new By))}var vT=class extends i{get AC(){return this.Nd}get vC(){return this.mC.expiration}get pC(){return this.yC}get MC(){return this.mC.sessionId}Ws(){if(this.TC)return this.Nd;const t=[];return t.push(Promise.resolve(this.mC.close())),t.push(be(1e3)),this.NC.n_(Promise.race(t).catch(mT)),this.TC=!0,this.Nd}DC(t,i,e){if(_n.gE){const t=wT(Ur(i));if(1===t.version){i=new TM(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.mC.generateRequest(t,i)).catch(mT)}Pn(t){return Promise.resolve(this.mC.load(t)).catch(mT)}wm(){return Promise.resolve(this.mC.remove()).catch(mT)}Ln(t){return Promise.resolve(this.mC.update(t)).catch(mT)}IC(){this.yC.iL(),this.mC.keyStatuses.forEach(((t,i)=>{this.SC(i,t)})),this.mo(new Ze(this))}SC(t,i){if("string"==typeof t){const e=t;t=i,i=e}const e=Ur(t);if(this.EC===Up&&16===e.byteLength){let t=Ao(e),i=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,i,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.EC===Up&&"status-pending"===i&&(i="usable"),this.yC.tL(e,i)}constructor(t,i){super(),this.mC=t,this.EC=i,this.TC=!1,this.bC=()=>{this.IC()},this.LC=t=>{this.mo(new bs(this,t.messageType,ay(this.EC,t.message)))},this.kC=()=>{this.TC=!0,this.yC.Xm>0&&(this.yC.iL(),this.mo(new Ze(this))),this.mC.removeEventListener("keystatuseschange",this.bC),this.mC.removeEventListener("message",this.LC)},this.mC.addEventListener("keystatuseschange",this.bC),this.mC.addEventListener("message",this.LC),this.yC=new Bs;const e=[];this.mC.closed&&e.push(Promise.resolve(this.mC.closed)),this.NC=new No,e.push(this.NC.nL),this.Nd=Promise.race(e).then(this.kC,this.kC),this.IC()}};function mT(t){let i;if(t.message){const e=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);e&&(i=0|C(e[1],16))}throw new cy(t.message,void 0,i,t)}var pT=class{async xC(t){return new vT(this.OC.createSession(t),this.jC)}zC(t){return Promise.resolve(this.OC.setServerCertificate(t))}dn(t){return Promise.resolve(t.setMediaKeys(this.OC))}BC(t){return Promise.resolve(t.setMediaKeys(null))}Wn(){return Promise.resolve()}constructor(t,i,e){this.OC=t,this.jC=i,this.vd=e}},yT=class{get jC(){return this.RC.keySystem}async UC(){const t=await this.RC.createMediaKeys();return new pT(t,this.EC,this.QC)}FC(){return this.QC}constructor(t,i,e){this.RC=t,this.EC=i,this.QC=e}};r();var MT=_n.ME&&_n.NE>=42||_n.HE&&_n.XE>=38||_n.RE||_n.YE||_n.eb&&_n.hb>=29;function TT(t,i){return Va(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[oe({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[oe({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function NT(){return void 0!==nd&&"function"==typeof nd.requestMediaKeySystemAccess}function Za(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var DT=class{YC(){return this.GC(Kp)}VC(){return this.GC(Qa)}WC(){return this.GC(Zp)}HC(){return this.GC(Jp)}GC(t){const i=t.Ub,e=this.qC.get(i);if(e)return e;const s=this.XC(t,'video/mp4; codecs="avc1.42000a"');return this.qC.set(i,s),s}async XC(t,i){try{return await this.KC.ZC(t.Pb,[TT(i,!0)]),!0}catch(e){try{return await this.KC.ZC(t.Pb,[TT(i,!1)]),!0}catch(t){return!1}}}JC(){return this.$C||(this.$C=this.tx()),this.$C}async tx(){return"https:"!==xp.protocol&&(!!MT&&!await this.VC())}constructor(t){this.qC=Qt(),this.$C=void 0,this.KC=t}};function IT(t,i,e,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,ix:s.ix};let h=!1;if(s.audioCapabilities){const o=s.audioCapabilities.filter((t=>Boolean(t.contentType)));o.length&&(r.audioCapabilities=o.filter((s=>ST(t,i,e,s))),h=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const o=s.videoCapabilities.filter((t=>Boolean(t.contentType)));o.length&&(r.videoCapabilities=o.filter((s=>ST(t,i,e,s))),h=!0,r.videoCapabilities.length&&(n=!0))}return h||(n=t(e,"video/mp4")),n?r:void 0}function ST(t,i,e,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!na(i,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(e,_s(s.contentType))}function ET(t){if(t.videoCapabilities)for(const i of t.videoCapabilities)if(i.contentType)return i.contentType;if(t.audioCapabilities)for(const i of t.audioCapabilities)if(i.contentType)return i.contentType}function bT(t){const i=[];for(const e of t)e.encryptionScheme&&i.push({contentType:e.contentType,robustness:e.robustness});return t.concat(i)}function LT(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(kT))||!(!t.videoCapabilities||!t.videoCapabilities.some(kT))}function kT(t){return!t.robustness}function CT(t,i){const e=[];for(const s of t)s.robustness?e.push(s):e.push(oe({},s,{robustness:i}));return e}r();var xT=class{async ZC(t,i){i=i.filter((t=>!t.ix));for(const t of i)t.audioCapabilities&&(t.audioCapabilities=bT(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=bT(t.videoCapabilities));if(t===Fp&&i.some(LT)){const e=i.map((t=>function(t,i){return oe({},t,{videoCapabilities:t.videoCapabilities?CT(t.videoCapabilities,i):void 0,audioCapabilities:t.audioCapabilities?CT(t.audioCapabilities,i):void 0})}(t,"SW_SECURE_CRYPTO")));try{const i=await nd.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new yT(i,t,s)}catch(t){}}const e=await nd.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new yT(e,t,s)}static sx(){return NT()}};r(),r(),r(),r();var OT=class extends i{get MC(){return this.nx&&this.nx.sessionId||""}get vC(){return NaN}get AC(){return this.hx.nL}get pC(){return this.ox}async DC(t,i,e){this.ux(),this.lx=new No,this.xC(Ur(i),e),await this.lx.nL}xC(t,i){if(!t)throw new k("Expected initData to be defined but was "+t+".");const e=i&&i.playready&&i.playready._x;let s;return s=i?this.gx.createSession(this.wx,t,e):this.gx.createSession(this.wx,t),s.addEventListener("mskeyclose",this.kC),s.addEventListener("mskeymessage",this.Ax),s.addEventListener("mskeyerror",this.Ss),s.addEventListener("mskeyadded",this.vx),this.nx=s,this.mx("status-pending"),s}async Pn(t){return this.ux(),!0}async Ln(t){if(this.yx=new No,this.ux(),!this.nx)return Promise.resolve();const i=Ur(t);if(0===i.byteLength)throw new k("Cannot call update with an empty response.");this.nx.update(i),await this.yx.nL}Ws(){return!this.TC&&this.nx&&(this.TC=!0,this.nx.close()),this.hx.nL}async wm(){this.ux()}ux(){if(this.TC)throw new k("Already closing or closed.")}mx(t){this.ox.iL(),this.ox.tL(hy,t),this.mo(new Ze(this))}constructor(t,i){super(),this.gx=t,this.wx=i,this.TC=!1,this.yx=void 0,this.lx=void 0,this.nx=void 0,this.kC=()=>{this.TC=!0,this.hx.eL(void 0),this.nx&&(this.nx.removeEventListener("mskeyclose",this.kC),this.nx.removeEventListener("mskeymessage",this.Ax),this.nx.removeEventListener("mskeyerror",this.Ss),this.nx.removeEventListener("mskeyadded",this.vx))},this.Ax=t=>{this.lx&&(this.lx.eL(void 0),this.lx=void 0),this.mo(new bs(this,"license-request",Ge(t.message).buffer,t.destinationURL||void 0))},this.Ss=()=>{const t=this.nx&&this.nx.error;if(!t)return;const i=new cy("Unknown CDM error",t.code,t.systemCode);if(this.lx)this.lx.sL(i),this.lx=void 0;else if(this.yx)this.yx.sL(i),this.yx=void 0;else switch(i.rL){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.mx("output-not-allowed");break;default:this.mx("internal-error")}},this.vx=()=>{this.lx&&(this.mx("usable"),this.lx.eL(void 0),this.lx=void 0),this.yx&&(this.mx("usable"),this.yx.eL(void 0),this.yx=void 0)},this.hx=new No,this.ox=new Bs}},jT=class{async xC(t){return new OT(this.gx,this.wx)}zC(t){return Promise.resolve(!1)}dn(t){const i=()=>{t.msSetMediaKeys(this.gx),t.removeEventListener("loadedmetadata",i)};return t.readyState>=1?t.msSetMediaKeys(this.gx):t.addEventListener("loadedmetadata",i),Promise.resolve()}BC(t){return Promise.resolve()}Wn(){return Promise.resolve()}constructor(t,i,e){this.gx=t,this.jC=i,this.vd=e;const s=ET(e)||"video/mp4";this.wx=_s(s)}},zT=class{get jC(){return this.EC}FC(){return this.Mx}UC(){const t=new Ys.MSMediaKeys(this.EC);return Promise.resolve(new jT(t,this.EC,this.Mx))}constructor(t,i){this.EC=t,this.Mx=i}},PT=class{ZC(t,i){try{return Promise.resolve(function(t,i){if(!BT())throw new k("Unsupported key system "+t);for(let e of i){let i=IT(RT,ey,t,e);if(i)return new zT(t,i)}throw new k("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static sx(){return BT()}};function BT(){return void 0!==Ys.MSMediaKeys&&"function"==typeof Ys.MSMediaKeys.isTypeSupported}function RT(t,i){return Ys.MSMediaKeys.isTypeSupported(t,i)}r(),r(),r(),r();var UT=class extends i{get MC(){return this.Tx?this.Tx.sessionId:""}get vC(){return NaN}get AC(){return this.hx.nL}get pC(){return this.ox}DC(t,i,e){const s=e&&e.fairplay&&e.fairplay.Nx;if(!s)throw new k("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,i,e){const s=Aa(t),n=2*s.length,r=2*i.length;let h=new ArrayBuffer(4+n+4+r+4+e.byteLength),o=new DataView(h),a=new Vr;return Pu(o,a,n,!0),qA(o,a,s,!0),Pu(o,a,r,!0),qA(o,a,i,!0),Pu(o,a,e.byteLength,!0),qh(o,a,e),new T(h)}(Ur(i),s,this.Dx);return this.Tx=this.Ix.createSession(this.wx,n),this.Tx.addEventListener("webkitkeymessage",this.Ax,!1),this.Tx.addEventListener("webkitkeyadded",this.vx,!1),this.Tx.addEventListener("webkitkeyerror",this.Ss,!1),this.mx("status-pending"),this.Sx.eL(this.Tx),this.Sx=new No,Promise.resolve()}Pn(t){return Promise.resolve(!0)}async Ln(t){const i=Ur(t);if(0===i.byteLength)throw new k("Cannot call update with an empty response.");this.Ex=new No;(this.Tx||await this.Sx.nL).update(i),await this.Ex.nL}Ws(){var t;const i=this.Tx;return i&&(i.removeEventListener("webkitkeymessage",this.Ax,!1),i.removeEventListener("webkitkeyadded",this.vx,!1),i.removeEventListener("webkitkeyerror",this.Ss,!1),i.close()),this.Sx.s_(),null==(t=this.Ex)||t.s_(),this.hx.eL(void 0),this.hx.nL}wm(){return Promise.resolve(void 0)}mx(t){this.ox.iL(),this.ox.tL(hy,t),this.mo(new Ze(this))}constructor(t,i,e){super(),this.Ix=t,this.wx=i,this.Dx=e,this.hx=new No,this.Ex=void 0,this.ox=new Bs,this.Tx=void 0,this.Sx=new No,this.Ss=()=>{const t=this.Tx&&this.Tx.error;if(!t)return;const i=new cy("Unknown CDM error",t.code,t.systemCode);this.Ex?(this.Ex.sL(i),this.Ex=void 0):i.rL===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.mx("output-not-allowed"):this.mx("internal-error"),this.mo(new ny)},this.Ax=t=>{this.mo(new bs(this,"license-request",Ge(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.vx=()=>{this.Ex&&(this.Ex.eL(void 0),this.Ex=void 0),this.mx("usable")}}};var QT=class{getInternalMediaKeys(){return this.Ix}async xC(t){if(!this.Dx)throw new ce(le.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new UT(this.Ix,this.wx,this.Dx)}zC(t){return this.Dx=Ur(t),Promise.resolve(!0)}dn(t){return t.webkitSetMediaKeys(this.Ix),Promise.resolve()}BC(t){return t.webkitSetMediaKeys(null),Promise.resolve()}Wn(){return Promise.resolve()}constructor(t,i,e){this.Ix=t,this.jC=i,this.vd=e,this.Dx=void 0;const s=ET(e)||"video/mp4";this.wx=_s(s)}},FT=class{get jC(){return this.EC}FC(){return this.Mx}UC(){const t=new Ys.WebKitMediaKeys(this.EC);return Promise.resolve(new QT(t,this.EC,this.Mx))}constructor(t,i){this.EC=t,this.Mx=i}},YT=class{ZC(t,i){try{return Promise.resolve(function(t,i){if(t!==Hp)throw new k(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!GT())throw new k("Unsupported key system "+t);for(let e of i){let i=IT(VT,sy,t,e);if(i)return new FT(t,i)}throw new k("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static sx(){return GT()}};function GT(){return void 0!==Ys.WebKitMediaKeys&&"function"==typeof Ys.WebKitMediaKeys.isTypeSupported}function VT(t,i){return Ys.WebKitMediaKeys.isTypeSupported(t,i)}r();var WT=class{async ZC(t,i){for(let e of this.bx)try{return await e.ZC(t,i)}catch(t){}throw new k("Unsupported key system configuration for "+t)}constructor(t){this.bx=t}};r(),r(),r(),r(),r();var ro=class{Lx(t,i){return new Promise((e=>{const s=new Po;s.n_(this.kx.i_),i&&s.n_(i);const n=()=>{s.Xf()};this.Cx.push((()=>{const i=HT(t,s.i_);return e(i),i.then(n,n)})),this.xx||(this.xx=this.Ox())}))}s_(){return this.jx(!0)}cn(){return this.zx=void 0,this.jx(!1)}jx(t){const i=this.xx;return this.kx.s_(),t&&(this.kx=new Po),Promise.resolve(i)}constructor(t){this.Cx=[],this.xx=void 0,this.kx=new Po,this.Ox=()=>{if(0===this.Cx.length)return this.zx?HT(this.zx,this.kx.i_).then(this.Px,this.Px):this.Px();return this.Cx.shift()().then(this.Ox)},this.Px=()=>{if(0!==this.Cx.length)return this.Ox();this.xx=void 0},this.zx=t}};function HT(t,i){return new Promise((e=>e(t(i))))}var qT,XT=new ro,ZT=class extends i{Bx(){this.Ex&&(this.mx("usable"),this.Ex.eL(void 0),this.Ex=void 0)}Rx(t){const i=new cy("Unknown CDM error",t.errorCode,t.systemCode);this.Ex?(this.Ex.sL(i),this.Ex=void 0):this.lx?(this.lx.sL(i),this.lx=void 0):i.rL===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.mx("output-restricted"):1===i.hL?this.mx("expired"):this.mx("internal-error")}Ux(t){0!==t.message.byteLength&&(this.lx&&(this.lx.eL(void 0),this.lx=void 0),this.mo(new bs(this,"license-request",ay(this.EC,Ge(t.message).buffer),t.defaultURL||void 0)))}Qx(t){this.Fx||(this.Fx=t,this.Yx.eL(t))}get pC(){return this.Gx}get MC(){return this.Vx}set MC(t){this.Vx=t}get AC(){return this.hx.nL}get vC(){return NaN}async Ws(){this.throwIfClosed(),this.Ex&&(this.Ex.sL(void 0),this.Ex=void 0),this.wL=!0,this.hx.eL(void 0)}async DC(t,i){this.throwIfClosed(),this.lx=new No,this.Wx=Ur(i);(this.Fx||await this.Yx.nL).webkitGenerateKeyRequest(this.EC,this.Wx),await this.lx.nL}async Pn(t){return this.throwIfClosed(),!1}async wm(){this.throwIfClosed()}async Ln(t){if(this.throwIfClosed(),this.Ex=new No,_n.jE||_n.kE)return XT.Lx((async()=>{await this.doUpdate(t)}));await this.doUpdate(t)}async doUpdate(t){if(void 0===this.Ex)return;(this.Fx||await this.Yx.nL).webkitAddKey(this.EC,Ur(t),this.Wx,this.MC),await this.Ex.nL}throwIfClosed(){if(this.wL)throw new k("Already closing or closed.")}mx(t){this.Gx.iL(),this.Gx.tL(hy,t),this.mo(new Ze(this))}async Hx(){const t=this.Fx||await this.Yx.nL;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.EC,this.Vx)}catch(t){}finally{await be(500)}}constructor(t){super(),this.EC=t,this.lx=void 0,this.Ex=void 0,this.wL=!1,this.Wx=void 0,this.Fx=void 0,this.hx=new No,this.Vx="",this.Yx=new No,this.Gx=new Bs}},KT=class{dn(t){return this.Fx=t,this.Fx.addEventListener("webkitkeyadded",this.vx),this.Fx.addEventListener("webkitkeyerror",this.qx),this.Fx.addEventListener("webkitkeymessage",this.Xx),this.Zx.forEach(((i,e)=>i.Qx(t))),this.Kx.forEach((i=>i.Qx(t))),Promise.resolve()}BC(t){return t.removeEventListener("webkitkeyadded",this.vx),t.removeEventListener("webkitkeyerror",this.qx),t.removeEventListener("webkitkeymessage",this.Xx),this.Fx=void 0,Promise.resolve()}async Wn(){let t=this.Zx.entries(),i=t.next();for(;!i.done;)await i.value[1].Hx(),i=t.next();this.Zx.clear()}async xC(t,i,e){const s=new ZT(this.jC);return this.Fx&&s.Qx(this.Fx),this.Kx.push(s),s}zC(t){return Promise.resolve(!1)}Jx(t){if(!t)return;let i=this.Zx.get(t);return i||(i=this.Kx.shift(),i?(i.MC=t,this.Zx.set(t,i),i):void 0)}constructor(t,i){this.jC=t,this.vd=i,this.Fx=void 0,this.Zx=Qt(),this.Kx=[],this.vx=t=>{const i=this.Jx(t.sessionId);i&&i.Bx()},this.qx=t=>{const i=this.Jx(t.sessionId);i&&i.Rx(t)},this.Xx=t=>{const i=this.Jx(t.sessionId);i&&i.Ux(t)}}},JT=class{UC(){return Promise.resolve(new KT(this.jC,this.$x))}FC(){return this.$x}constructor(t,i){this.jC=t,this.$x=i}};function ei(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Fe(t){if(!t)return;let i;for(;z_(i=t.firstChild);)t.removeChild(i)}function $T(t){const i=t.className;return"string"==typeof i?i:i&&"string"==typeof i.baseVal?i.baseVal:""}function tN(t,i){const e=t.className;"string"==typeof e?t.className=i:e&&"string"==typeof e.baseVal&&(e.baseVal=i)}function iN(t,i){return void 0!==t.classList?t.classList.contains(i):void 0!==t.className&&-1!==(" "+$T(t)+" ").indexOf(" "+i+" ")}function eN(t,i){if(void 0!==t.classList)t.classList.add(i);else if(void 0!==t.className){const e=$T(t);-1===(" "+e+" ").indexOf(" "+i+" ")&&tN(t,(e+" "+i).trim())}}function sN(t,i){if(void 0!==t.classList)t.classList.remove(i);else if(void 0!==t.className){let e=" "+$T(t)+" ";const s=" "+i+" ";for(;-1!==e.indexOf(s);)e=e.replace(s," ");tN(t,e.trim())}}function nN(t,i,e){void 0===e&&(e=!iN(t,i)),e?eN(t,i):sN(t,i)}function rN(t){t.stopPropagation()}function hN(t,i){_n.kE&&_n.xE<3?function(t,i){let e=i;switch(i){case"flex":e="-webkit-flex";break;case"inline-flex":e="-webkit-inline-flex"}t.display=e}(t,i):function(t,i){if(t.display=i,t.display!==i){let e=i;switch(i){case"flex":e="-ms-flexbox";break;case"inline-flex":e="-ms-inline-flexbox"}t.display=e}}(t,i)}function ze(t,i){const e=i.style;if(e)for(const i of _.keys(t)){const s=t[i];void 0!==s&&(e[i]=s)}}function ia(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.top="0",i.bottom="0",i.width="100%",i.height="100%"}function oN(t){t.removeAttribute("title")}function aN(t){t.addEventListener("mouseover",(t=>{oN(t.target)}))}function uN(t){try{return Boolean(t)&&t===t.top}catch(t){return!1}}function nn(t){try{return Boolean(t)&&t.parent!==t}catch(t){return!1}}function Fs(t){return"video"===function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}(t)}function cN(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load())}function lN(){return void 0!==h?h.createElement("video"):void 0}function dN(){return qT||(qT=lN()),qT}r(),r();var fN,Pe,_N=class{ZC(t,i){try{return Promise.resolve(function(t,i){if(!_N.sx())throw new k("Unsupported key system "+t);for(let e of i){let i=IT(gN,ey,t,e);if(i)return new JT(t,i)}throw new k("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static sx(){return Za()}};function gN(t,i){const e=dN();return!(!e||!e.canPlayType||""===e.canPlayType(i,t))}function wN(){return fN||(fN=function(){const t=[];YT.sx()&&t.push(new YT);xT.sx()&&t.push(new xT);PT.sx()&&t.push(new PT);_N.sx()&&t.push(new _N);return new WT(t)}()),fN}r(),r(),function(t){t[t.tO=0]="tO",t[t.iO=1]="iO"}(Pe||(Pe={})),r(),r();var wc=class extends gg{constructor(t){super(qo.fv),this.currentTime=t}};r();var Vi=class extends gg{constructor(t){super(qo._v),this.currentTime=t}},AN=[qo._w,qo._v,t.bh,t.yh],ru=class extends i{eO(t){!this.sO&&t>=ow.Vn&&(this.sO=!0,this.mo(new Wi(this.nO.E_,t)))}rO(t){!this.hO&&t>=ow.Uv&&(this.hO=!0,this.mo(new Xi(this.nO.E_,t)))}oO(t){this.aO||(t>=ow.Qv&&this.uO<ow.Qv&&!this.nO.q_||this.cO&&t>=ow.Qv)&&this.mo(new Vi(this.nO.E_))}lO(t){!this.dO(t)||this.nO.C_||this.nO.lt||this.mo(new wc(this.nO.E_))}fO(t){this.uO<=ow.Uv&&t>=ow.Qv&&this.mo(new mt(this.nO.E_,t))}maybeDispatchCanPlayThroughEvent(t){t===ow.Fv&&this.mo(new Yi(this.nO.E_,t))}dO(t){const i=!this.nO.q_&&t<=ow.Uv,e=!this._O&&this.uO<=ow.Uv;return i&&!e}get cO(){return!this.nO.q_&&this._O}Wn(){this.uO=ow.Rv,this._O=!0,this.hO=!1,this.sO=!1}cn(){this.Bo(),this.aO&&this.nO.rn(qo._v,this.gO),this.nO.rn(t.bh,this.wO),this.nO.rn(t.yh,this.AO),this.nO.rn(qo._w,this.vO)}constructor(i,e=!1){super(),this.nO=i,this.aO=e,this.uO=ow.Rv,this._O=!0,this.hO=!1,this.sO=!1,this.vO=t=>{const i=this.nO.cg;i!==this.uO&&this.mo(new Qi(t.currentTime,i)),i===ow.Rv&&(this.hO=!1,this.sO=!1),this.eO(i),this.rO(i),this.fO(i),this.maybeDispatchCanPlayThroughEvent(i),this.oO(i),this.lO(i),this.uO=i},this.wO=()=>{this.lO(this.uO),this.oO(this.uO),this._O=this.nO.q_},this.AO=()=>{this._O=this.nO.q_},this.gO=t=>{this.mo(new Vi(t.currentTime))},this.nO.ln(qo._w,this.vO),this.nO.ln(t.bh,this.wO),this.nO.ln(t.yh,this.AO),this.aO&&this.nO.ln(qo._v,this.gO)}},en=class extends i{get E_(){return this.nO.E_}get C_(){return this.nO.C_}get lt(){return this.nO.lt}get q_(){return this.nO.q_}get cg(){return this.nO.cg}Xf(){this.Bo(),this.nO.rn(AN,this.Ds)}constructor(t){super(),this.nO=t,this.nO.ln(AN,this.Ds)}};r(),r();var vN="titanium",un="conax",mN="ezdrm",pN="irdeto",Ga="vudrm",yN="verimatrix",MN="keyos",nu="drmtoday",TN="expressplay",an="azure",wu="xstream",NN="vimond",DN="axinom",IN="uplynk",SN="comcast",EN="custom";r(),r(),r();var ge=class{mO(){return this.pO}yO(t){this.pO=t}get MO(){return this.LS}get TO(){return!1}get DO(){const t=this.IO.certificate;if(t)return ae(t)?vi(t):Ur(t)}SO(){return this.IO.licenseAcquisitionURL||this.mO()}get EO(){return!1}bO(t){return Promise.resolve()}LO(t,i){return Promise.resolve(void 0)}get NS(){return Boolean(this.IO.useCredentials)}async kO(t,i,e,s){const n=this.CO(t,i,e,s);if(""===n.Fu)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.MO.BI(n);return await t.xO(i)}catch(t){return yo(t),void await this.OO(t,n.Fu,s)}}CO(t,i,e,s){const n=this.jO().eS(),r=this.NS,h={Fu:this.zO(),pS:i,vS:n,AS:t,NS:r,mS:Kc.POST,YI:0,i_:s,$w:zu.aS,MS:e};return new nc(h)}PO(t,i){return Promise.resolve(t)}BO(t,i,e,s){return Promise.resolve(t)}jO(){return new Ko(this.IO.headers||{})}async OO(t,i,e){throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}zO(t,i){let e=i;const s=this.IO.queryParameters;if(!e){const t=this.SO();if(!t)return"";e=t}if(s||t){const i=fe.Ah(e);t&&Gc(i,t),s&&Gc(i,s),e=i.href}return e}RO(t,i){return bN(t)}UO(t){return new T(t)}async QO(t,i,e){const s=await this.RO(t,e),n=await this.kO(s,this.FO,i,e);return this.UO(n)}cn(){}constructor(t,i,e,s,n){this.pO=void 0,this.jC=t,this.YO=i,this.GO=e,this.LS=s,this.FO=n,this.IO=this.VO(i)}};function bN(t){return Promise.resolve(Ge(t).buffer)}var gs,$s=class extends ge{VO(t){return t.widevine||{}}async WO(t,i){return this.DO?this.DO:this.HO(new T(t),i)}HO(t,i){return super.QO(t,jo.dS,i)}constructor(t,i,e,s){super(Kp,t,i,e,s)}};function LN(t,i){if(null==t)return{};var e,s,n={},r=_.keys(t);for(s=0;s<r.length;s++)e=r[s],i.indexOf(e)>=0||(n[e]=t[e]);return n}function kN(t){return z_(t.token&&t.deviceId)}function CN(t){var i;const e=null==(i=t.fairplay)?void 0:i.headers;return void 0!==e&&z_(e.PreAuthorization)}function xN(t){const i=t;return kN(i)&&""!==i.token&&""!==i.deviceId&&!CN(i)}r(),r(),r(),r(),r(),r(),function(t){t.qO=!1,t.XO=!1,t.ZO=!1,t.KO=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.JO=!1,t.$O=!1,t.LOG_LCEVC_DETAILS=!1}(gs||(gs={})),r();var ON,jN=class{get tj(){return this.ij}get jC(){return this.EC}ej(t){return function(t){const i=t.onCertificateRequest;if(void 0!==i&&"function"!=typeof i)throw new k("ContentProtectionIntegration.onCertificateRequest is not a function.");const e=t.onCertificateResponse;if(void 0!==e&&"function"!=typeof e)throw new k("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new k("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new k("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new k("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.sj.build(t))}constructor(t,i,e){this.ij=t,this.EC=i,this.sj=e}};r(),function(t){t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED"}(ON||(ON={}));var Ea=class{registerContentProtectionIntegration(t,i,e){switch(this.nj(t,i,e)){case ON.FAILED:throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+i+".");case ON.OVERRIDDEN:{const e=Ue(i);fe.Vv("Warning: Overwriting an earlier registered integration for "+t+" and "+e+".");break}case ON.SUCCEEDED:Ue(i);0;break}}nj(t,i,e){const s=Ue(i);if(!s)return ON.FAILED;let n=ON.SUCCEEDED;for(const i of this.rj.slice())i.tj===t&&i.jC===s&&(n=ON.OVERRIDDEN,Et(this.rj,i));return this.rj.push(new jN(t,s,e)),n}hj(t,i){return void 0!==this.aj(t,i)}uj(t,i,e){const s=this.aj(t,i);if(!s)throw b("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+i);return s.ej(e)}aj(t,i){for(const e of this.rj)if(e.tj===t&&(!i||e.jC===i))return e}constructor(){this.rj=[]}};Ea.cj=new Ea;var zN={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function PN(t){if(!t)return!0;const i=t.licenseAcquisitionURL,e=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,h=t.queryParameters;return!(i||e||s||n||r||h)}function BN(t){return t&&void 0!==t.licenseAcquisitionURL}var RN,UN=BN,QN=BN;function FN(t){if(!t)return!0;if(WN(t))return!1;const i=t.fairplay,e=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return PN(i)&&PN(e)&&PN(s)&&void 0===n&&PN(r)}function YN(t){const i=xN(t),e=function(t){var i;const e=t;return CN(e)&&""!==(null==(i=e.fairplay)?void 0:i.headers.PreAuthorization)&&!kN(e)}(t);return(!i||!e)&&(i||e)}function GN(t){return t.integration===pN}function VN(t){const i=t;if(!i)return!1;if(FN(i))return!1;const e=i.fairplay,s=i.playready,n=i.widevine,r=i.clearkey;if(WN(t))return!0;if(e&&!function(t){const i=t;return i&&(void 0!==i.certificateURL||void 0!==i.certificate)}(e))return!1;if(s&&!UN(s))return!1;if(n&&!QN(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(i.integration){if(Ea.cj.hj(i.integration))return!0;switch(i.integration){case vN:if(!function(t){const i=t,e=i.integration===vN;return e&&(HN(t)||qN(t))}(t))return!1;break;case Ga:if(!cu(t))return!1;break;case yN:if(!function(t){const i=t;return i.integration===yN}(t))return!1;break;case pN:if(!GN(t))return!1;break;case un:if(!YN(t))return!1;break;case mN:if(!function(t){const i=t;return i.integration===mN}(t))return!1;break;case MN:if(!WN(t))return!1;break;case nu:if(!function(t){const i=t;return i.integration===nu&&(void 0!==i.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(i))}(t))return!1;break;case TN:if(!function(t){const i=t;return i.integration===TN}(t))return!1;break;case wu:if(!XN(t))return!1;break;case NN:if(!function(t){return t.integration===NN}(t))return!1;break;case DN:if(!$u(t))return!1;break;case an:if(!function(t){const i=t;return i.integration===an&&void 0!==i.token}(t))return!1;break;case IN:if(!function(t){const i=t;return i.integration===IN}(t))return!1;break;case SN:if(!function(t){const i=t;return i&&z_(i.releasePid)&&z_(i.accountId)&&z_(i.token)}(t))return!1;break;case EN:return!0;default:return!1}}return!0}function WN(t){return t.integration===MN}function HN(t){return void 0!==t.authToken}function qN(t){const i=t;return void 0!==i.accountName&&void 0!==i.customerName&&void 0!==i.portalId}function cu(t){const i=t;return i.integration===Ga&&void 0!==i.token}function XN(t){const i=t;return i&&i.integration===wu&&ae(i.ticketAcquisitionURL)&&ae(i.streamId)}function $u(t){const i=t;return i.integration===DN&&void 0!==i.token}function ZN(t,i){const e=i[t];var s;const n=null!=(s=null==e?void 0:e.licenseAcquisitionURL)?s:zN[t];var r;const h=null!=(r=null==e?void 0:e.customdata)?r:i.customdata,o=h?{customData:h}:{};var a;const u=oe({},null!=(a=null==e?void 0:e.headers)?a:{},o),c=null!=e?e:{},{customdata:l}=c;return oe({},LN(c,["customdata"]),{licenseAcquisitionURL:n,headers:u})}function Ue(t){switch(t.toLowerCase()){case"widevine":case Xt:return Xt;case"playready":case ps:return ps;case"fairplay":case Wp:return Wp}}function KN(t,i){switch(t){case Pp:return function(t){const i={},e=ds.kT(new DataView(t));for(const t of e)i[t.FD]=t.VD;return i}(i);case Bp:case la:return function(t){return{[Vp]:t}}(i);default:throw new ce(le.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}!function(t){t.xb="Widevine",t.lj="PlayreadyV2",t.dj="PlayreadyV3",t.Cb="PlayreadyV2",t.jb="Fairplay"}(RN||(RN={}));var JN={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function $N(t,i){var e,s,n,r;const h=JN[i],o=t.accountName;return{CustomerName:t.customerName,AccountName:o,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(e=fe._j)?void 0:e.Ys,OSVersion:null==(s=fe._j)?void 0:s.gj,DRMProvider:h.DRMProvider,DRMVersion:h.DRMVersion,DRMType:h.DRMType,DeviceVendor:null==(n=fe._j)?void 0:n.wj,DeviceModel:null==(r=fe._j)?void 0:r.Aj}}}function tD(t,i){if(!t.accountName)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, accountName is not set.");if(!t.customerName)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, customerName is not set.");if(!t.portalId)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, portalId is not set.");throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration.")}function iD(t,i,e){let s;if(HN(t))s={AuthToken:t.authToken,Payload:i};else{if(!qN(t))throw tD(t,e);s={LatensRegistration:$N(t,e),Payload:i}}return wa(JSON.stringify(s))}async function eD(t,i,e){const s=t.UI;if(!s)throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,i);const n=s;let r,h;try{r=await n.vj(e),h=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){h=""}throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.BI.Fu,n.FI,n.mj,h)}r();var sD=class extends $s{static pj(){return fe.Ys.yj?"required":"optional"}OO(t,i,e){return eD(t,i,e)}bO(t){return this.Mj?hl(this.Mj.nL,t):(this.Mj=new No,Promise.resolve())}async RO(t,i){const e=this.YO;if(!e)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return iD(e,Fh(t),RN.xb)}UO(t){let i;if(!t.license)throw new Yr(le.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return i=vi(t.license),i}Tj(t){return Promise.resolve(new T(t))}async WO(t,i){this.Nj();const e=await this.RO(t,i),s=await this.kO(e,Rt.$I,jo.fS,i);return await this.Tj(s)}async HO(t,i){const e=await super.HO(t,i);return this.Nj(),e}Nj(){this.Mj||(this.Mj=new No),this.Mj.eL()}cn(){this.Mj&&this.Mj.s_(),super.cn()}constructor(t,i,e){super(t,i,e,Rt.tS),this.Mj=void 0}};r();var nD=class extends $s{get Dj(){if(cu(this.YO))return this.YO.token}async RO(t,i){const e=await bN(t),s=this.GO,n=sv(new T(e)),r=this.Dj;if(!r)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:s})}constructor(t,i,e){super(t,i,e,Rt.$I),this.yO("https://widevine-proxy.drm.technology/proxy")}};function rD(t,i){let e=i||{};return t.ticket&&t.sessionId&&(e=oe({},e,{SessionId:t.sessionId,Ticket:t.ticket})),oe({},e,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}r(),r();var hD=class extends $s{zO(t,i){let e=t;return GN(this.YO)&&(e=rD(this.YO,e)),super.zO(e,i)}constructor(t,i,e){super(t,i,e,Rt.$I),this.yO("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}};r(),r();var oD="Conax-Custom-Data";function aD(t,i,e){const s=t&&YN(t)&&t;if(s&&!e.has(oD)){const t=xN(s)?s.token:void 0,n=xN(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:i+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});e.set(oD,r)}return e}var uD=class extends $s{jO(){const t=super.jO();return aD(this.YO,"Widevine",t)}constructor(t,i,e){super(t,i,e,Rt.$I),this.yO("https://connect.conax.com:8094/license")}};function cD(t){const i=cs(new T(t));return vi(JSON.parse(i).license)}function lD(t){return"string"==typeof t.token?t.token:wa(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function dD(t,i,e){let s;return s=e.token?"x-dt-auth-token":"dt-custom-data",t.set(s,i),t}r(),r();var fD=class extends $s{get Dj(){return lD(this.YO)}UO(t){return cD(t)}jO(){return dD(super.jO(),this.Dj,this.YO)}constructor(t,i,e){super(t,i,e,Rt.$I),this.yO("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}};r();var _D=class extends $s{jO(){const t=super.jO(),i=this.YO.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e){super(t,i,e,Rt.$I)}};async function gD(t,i,e,s){if(!XN(t))throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new Ko;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const h=t.streamId;let o;o=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:i,licenseType:o,streamId:h},u={Fu:t.ticketAcquisitionURL,pS:Rt.tS,vS:n,mS:Kc.POST,AS:JSON.stringify(a),i_:s},c=await e.BI(u);return await c.vj()}r(),r();var wD=class extends $s{jO(){const t=super.jO();return t.set("Content-Type","application/json"),t}async RO(t,i){const e=cA(t.buffer),s=this.YO,n=await gD(s,"widevine_modular",this.MO,i);this.yO(n.licenseServerUrl);const r=XA(JSON.stringify({payload:e,ticket:n.ticket}));return super.RO(r,i)}UO(t){return vi(t.license)}constructor(t,i,e){super(t,i,e,Rt.tS)}};r();var AD=class extends $s{jO(){if(!$u(this.YO))throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.jO();return t.set("X-AxDRM-Message",this.YO.token),t}constructor(t,i,e){super(t,i,e,Rt.$I)}};function vD(t){const i=new T(2*t.length);for(let e=0;e<t.length;e+=1)i[2*e]=t.charCodeAt(e),i[2*e+1]=0;return i}r();var Zs=class extends ge{VO(t){return t.playready||{}}jO(){const t=new Ko(this.Ij);return t.nS(super.jO()),t}Sj(t){return t.length>=1&&t[0].bI.length>0}LO(t){const i=this.YO.playready.customData;if(i){const t=vD(i),e=vD('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+Fh(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{_x:e}})}return super.LO(t)}async RO(t,i){const e=await bN(t);return this.Ej(e)}async Ej(t){var i,e;let s=null;const n=Fa(new DataView(t),new Vr,!0);let r;try{r=fe.DI(n)}catch(t){return s}const h=null==(i=r.MI("PlayReadyKeyMessage")[0])?void 0:i.MI("LicenseAcquisition")[0];var o;const a=null!=(o=null==h?void 0:h.MI("Challenge"))?o:[];this.Sj(a)&&(s=Sa(a[0].bj));const u=new Ko;var c;const l=null!=(c=null==(e=null==h?void 0:h.MI("HttpHeaders")[0])?void 0:e.MI("HttpHeader"))?c:[];for(const t of l){const i=t.MI("name")[0].bj,e=t.MI("value")[0].bj;u.append(i,e)}return this.Ij=u,s}WO(t,i){return Promise.resolve(t)}HO(t,i){return super.QO(t,jo._S,i)}constructor(t,i,e){super(Zp,t,i,e,Rt.$I),this.Ij=void 0}};r(),r();var mD=class t{static Lj(t){return"3"===t.version?RN.dj:RN.lj}Cj(){const t={};if(this.iC===RN.dj){const i={LatensRegistration:$N(this.xj,RN.dj)};t["X-TITANIUM-DRM-CDATA"]=wa(JSON.stringify(i))}return t}get Oj(){return this.iC}get ix(){return this.iC===RN.lj}constructor(i){this.xj=i,this.iC=t.Lj(i)}};var pD=class extends Zs{LO(t){const i=this.YO;if(!this.YO)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(qN(i)){const t={};return t.playready={_x:yD(i,this.jj.Oj)},Promise.resolve(t)}return Promise.reject(tD(i,RN.Cb))}jO(){const t=new Ko(this.jj.Cj());return t.nS(super.jO()),t}async OO(t,i,e){const s=t.UI;if(!s)throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i);let n,r;try{const t=await s.zj(e),i=cs(new T(t)),o=fe.DI(i);if(o){const t=function(t,i){return function(t,i){const e=t.m.slice(),s=[];for(;e.length>0;){const t=e.shift();i(t)?s.push(t):e.push(...t.m)}return s}(t,(t=>t.Pj===i))}(o,"CustomData");var h;if(t.length>0)n=JSON.parse(t[0].bj),r=null==(h=n.DrmErr)?void 0:h.desc}}catch(t){}throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i,s.FI,s.mj,r)}Sj(t){if(1!==t.length)throw new Yr(le.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,i,e){super(t,i,e),this.jj=new mD(this.YO)}};function yD(t,i){const e=$N(t,i),s=e.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+wa('<LatensRegistration formatversion="'+s+'"><AccountName>'+e.AccountName+"</AccountName><CustomerName>"+e.CustomerName+"</CustomerName><PortalID>"+e.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+e.DeviceInfo.DeviceType+"</DeviceType><OSType>"+e.DeviceInfo.OSType+"</OSType><OSVersion>"+e.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+e.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+e.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+e.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+e.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+e.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=KA(n,!0);return KA('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+Fh(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}r();var MD=class extends Zs{get Dj(){if(cu(this.YO))return this.YO.token}Sj(t){if(1!==t.length)throw new Yr(le.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}zO(t,i){const e=oe({},t||{},{token:this.Dj});return super.zO(e,i)}constructor(t,i,e){super(t,i,e),this.yO("https://playready-license.drm.technology/rightsmanager.asmx")}};r();var TD=class extends Zs{zO(t,i){let e=t;return GN(this.YO)&&(e=rD(this.YO,e)),super.zO(e,i)}constructor(t,i,e){super(t,i,e),this.yO("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}};r();var ND=class extends Zs{jO(){const t=super.jO();return aD(this.YO,"PlayReady",t)}constructor(t,i,e){super(t,i,e),this.yO("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}};r();var DD,ID=class extends Zs{get Dj(){return lD(this.YO)}UO(t){const i=function(t){const i=cs(new T(t));return Zg(i,"<?xml")?0:1}(t);return 1===i?cD(t):super.UO(new T(t))}jO(){return dD(super.jO(),this.Dj,this.YO)}constructor(t,i,e){super(t,i,e),this.yO("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};!function(t){t[t.Bj=0]="Bj",t[t.vj=1]="vj"}(DD||(DD={})),r();var SD=class extends Zs{jO(){const t=super.jO();return this.Rj&&t.set("Ticket",this.Rj),t.set("Content-Type","text/xml"),t}async RO(t,i){const e=this.YO,s=await gD(e,"playready",this.MO,i);return this.yO(s.licenseServerUrl),this.Rj=s.ticket,super.RO(t,i)}constructor(t,i,e){super(t,i,e)}};r();var ne,ED=class extends Zs{jO(){if(!$u(this.YO))throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.jO();return t.set("X-AxDRM-Message",this.YO.token),t}};r(),r(),function(t){t.tS="application/json",t.Uj="application/x-www-form-urlencoded",t.Qj="application/octet-stream",t.Eu="text/plain;charset=UTF-8"}(ne||(ne={}));var Zo=class extends ge{get EO(){return!0}Fj(){return this.IO.certificateURL||this.Yj}Gj(t){this.Yj=t}RO(t){return Promise.resolve(this.Vj(t,this.Wj))}Vj(t,i){return"spc="+encodeURIComponent(Fh(t))+"&assetId="+encodeURIComponent(i)}get Hj(){return ne.Uj}VO(t){return t.fairplay||{}}qj(t){const i=t.indexOf("?");if(i>=0)return Promise.resolve(t.substr(i+1));{const i=t.split("skd://").pop();if(i){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(i))return Promise.resolve(i)}const e=t.split("/");return Promise.resolve(e[e.length-1])}}async LO(t){var i;const e=null!=(i=this.Xj)?i:Aa(new T(t)),s=await this.qj(e);this.Wj=s;const n={};return n.fairplay={Nx:s},n}jO(){const t=super.jO();return t.set("Content-Type",this.Hj),t}async WO(t,i){return this.DO?this.DO:await this.Zj(i)}HO(t,i){return super.QO(t,jo.cS,i)}Kj(t){const i=this.Fj(),e=this.jO(),s={Fu:i,pS:Rt.$I,vS:e,mS:Kc.GET,NS:!1,AS:null,YI:0,i_:t,$w:zu.aS,MS:jo.lS};return new nc(s)}async Zj(t){const i=this.Kj(t),e=await this.MO.BI(i),s=await e.zj();return new T(s)}UO(t){let i;if("string"==typeof t){let e=t.trim();"<ckc>"===e.substr(0,5)&&"</ckc>"===e.substr(-6)&&(e=e.slice(5,-6)),i=vi(e)}else i=new T(t);return i}zO(t,i){let e=super.zO(t,i);return Zg(e,"skd:")&&(e=e.substr(4)),e}constructor(t,i,e,s,n){super(t.jC,i,e,s,n),this.Wj="",this.Yj=void 0,this.Xj=t.Jj}};function bD(t){return!j(t.getTime())}function Yo(){return Date.now()||(new Date).getTime()}function LD(t){return t/1e3}function Is(t){return 1e3*t}r(),r();var Dc=1/6,kD=Se.fromNumber(pu);function B(t,i){if(0===i)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(kD))return t.toNumber()/i;const e=t.divide(i),s=t.subtract(e.multiply(i));return e.toNumber()+s.toNumber()/i}var CD=class extends Zo{get Hj(){return ne.Qj}qj(t){let i=t.split("://",1);return"skd"!==i[0].slice(-3).toLowerCase()?Promise.resolve(""):(i=t.split(";",2),i.length>1?Promise.resolve(i[1]):Promise.resolve(super.qj(t)))}async RO(t){return t}UO(t){return new T(t)}zO(t,i){const e=t||{};return e.p1=Yo(),super.zO(e,i)}constructor(t,i,e,s){super(t,i,e,s,Rt.$I)}};r();var xD=class extends Zo{get Hj(){return ne.tS}get Dj(){if(!cu(this.YO))throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.YO.token}Vj(t,i){const e={token:this.Dj,contentId:i,payload:Fh(t)};return JSON.stringify(e)}UO(t){return new T(t)}jO(){const t=super.jO();return t.set("x-vudrm-token",this.Dj),t}constructor(t,i,e,s){super(t,i,e,s,Rt.$I),this.yO("https://fairplay-license.drm.technology/license"),this.Gj("https://fairplay-license.drm.technology/certificate")}};r();var OD="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",jD="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",zD=class extends Zo{UO(t){const i=function(t){let i;try{i=JSON.parse(t).ckc}catch(t){throw new Yr(le.CONTENT_PROTECTION_LICENSE_INVALID,OD)}if(!i)throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,jD);return i}(cs(new DataView(t)));return super.UO(i)}constructor(t,i,e,s){super(t,i,e,s,Rt.$I)}};r();var PD=class extends Zo{get Hj(){return ne.tS}async RO(t){const i=this.YO;if(!i)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return iD(i,Fh(t),RN.jb)}UO(t){try{let i;if(ae(t)){const e=t.trim();i=JSON.parse(e)}else i=t;if(i.license){const t=Sa(i.license);return new T(t)}throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new Yr(le.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}OO(t,i,e){return eD(t,i,e)}constructor(t,i,e,s){super(t,i,e,s,Rt.tS)}};r();var BD=class extends Zo{Fj(){const t=super.Fj();if(!t)return t;const i=fe.Ah(t),e=this.YO;return GN(e)&&Gc(i,{accountId:e.accountId,applicationId:e.applicationId||""}),i.href}qj(t){return GN(this.YO)?Promise.resolve(this.YO.contentId):super.qj(t)}async RO(t){return t}UO(t){return new T(t)}get Hj(){return ne.Qj}zO(t,i){let e=t;return GN(this.YO)&&(e=function(t,i){return oe({},rD(t,i),{KeyId:t.keyId})}(this.YO,e)),super.zO(e,i)}constructor(t,i,e,s){super(t,i,e,s,Rt.$I),this.yO("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.Gj("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}};r();var RD=class extends Zo{jO(){const t=super.jO();return aD(this.YO,"FairPlay",t)}async Zj(t){const i={Fu:this.Fj(),pS:Rt.$I,vS:{},mS:Kc.GET,NS:!1,AS:null,YI:0,i_:t,$w:zu.aS,MS:jo.lS},e=await this.MO.BI(i),s=await e.zj();return new T(s)}async RO(t){return t}qj(t){const i=t.indexOf("?");if(0===t.indexOf("skd://")){let e;return e=i>=0?t.substring(6,i):t.substring(6),Promise.resolve(function(t){return cs(vi(t))}(e))}return Promise.resolve("unknown")}UO(t){try{const i=JSON.parse(t);return new T(Sa(i.CkcMessage))}catch(t){throw new b("CFLRW-66")}}constructor(t,i,e,s){if(super(t,i,e,s,Rt.Eu),!YN(i))throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.yO("https://connect.conax.com:8097/license")}};r();var UD=class extends Zo{qj(t){return Zg(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new Yr(le.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}Vj(t,i){return"spc="+Fh(t)+"&assetId="+i}constructor(t,i,e,s){super(t,i,e,s,Rt.Eu),this.yO(zN[Ci.jb])}};r();var QD=class extends Zo{get Dj(){return lD(this.YO)}Vj(t,i){const e="spc="+encodeURIComponent(Fh(t))+"&"+encodeURI(i);return"persistent"===this.IO.licenseType?e+"&offline=true":e}jO(){return dD(super.jO(),this.Dj,this.YO)}constructor(t,i,e,s){super(t,i,e,s,Rt.Eu),this.yO("https://lic.drmtoday.com/license-server-fairplay/")}};r();var FD=class extends Zo{qj(t){let i=t;return Zg(i,"skd:")&&(i="http:"+i.substring(4)),Zg(i,"http:")||Zg(i,"https:")?Promise.resolve(fe.Ah(i).hostname):Promise.reject(new b("Could not parse ExpressPlay FairPlay content ID."))}async RO(t){return t}UO(t){return new T(t)}get Hj(){return ne.Qj}constructor(t,i,e,s){super(t,i,e,s,Rt.$I)}};r();var YD=class extends Zo{jO(){const t=super.jO(),i=this.YO.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e,s){super(t,i,e,s,Rt.Eu)}};r();var GD=class extends Zo{async Zj(t){const i=this.Fj(),e=this.jO(),s={Fu:i,pS:Rt.tS,vS:e,mS:Kc.POST,i_:t,$w:zu.aS,MS:jo.lS},n=await this.MO.BI(s),r=await n.vj();return new T(vi(r.certificate))}get Hj(){return ne.tS}async HO(t,i,e){void 0===e&&(e=Rt.Eu);const s=Fh(t),n=this.YO,r=await gD(n,"fairplay",this.MO,i),h=XA(JSON.stringify({spc:s,ticket:r.ticket})),o={Fu:this.SO(),pS:Rt.tS,vS:this.jO(),mS:Kc.POST,AS:h,YI:0,i_:i,$w:zu.aS,MS:jo.cS},a=await this.MO.BI(o);return vi((await a.vj()).licence)}constructor(t,i,e,s){if(super(t,i,e,s,Rt.tS),!XN(i))throw new b("Invalid Xstream DRM configuration")}};r();var VD=class extends Zo{Vj(t,i){return Fh(t)}UO(t){if(0===t.length)throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.UO(t)}jO(){const t=super.jO();return t.set("Content-Type","text/plain"),t}constructor(t,i,e,s){super(t,i,e,s,Rt.Eu)}};r();var WD=class extends Zo{get Hj(){return ne.tS}Vj(t,i){return t}UO(t){return new T(t)}jO(){if(!$u(this.YO))throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.jO();return t.set("X-AxDRM-Message",this.YO.token),t}constructor(t,i,e,s){super(t,i,e,s,Rt.$I)}};r();var HD=class extends Zo{get Hj(){return ne.Eu}Vj(t,i){const e={spc:Fh(t)};return JSON.stringify(e)}qj(t){const i=fe.Ah(t);return this.$j=t,i.searchParams.has("b")?Promise.resolve(i.searchParams.get("b")):Promise.reject(new Yr(le.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}zO(t,i){let e=this.SO();return!e&&this.$j&&(e=this.$j),e&&(e=e.replace("skd://","https://")),super.zO(t,i||e)}UO(t){try{let i;if(i=ae(t)?JSON.parse(t.trim()):t,i.ckc)return vi(i.ckc)}catch(t){throw new Yr(le.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,i,e,s){super(t,i,e,s,Rt.tS),this.$j=void 0}};r(),r(),r();var qD=class{tz(t){return this.iz(t)}ez(t,i){throw new k(i+" must be "+this.sz+". (Received: "+t+")")}constructor(t,i){this.iz=t,this.sz=i}},Ii=(new qD((function(t){return!0}),"any"),new qD(R_,"a number")),pi=new qD(ae,"a string"),XD=new qD(P_,"a boolean"),rn=(new qD(Cl,"a date"),new qD(Wo,"undefined")),ZD=new qD(lt,"an object"),KD=new qD((function(t){return null===t}),"null");new qD((function(t){return null==t}),"null or undefined");function JD(t,i){throw new k(i+" has an incorrect type")}function sn(t){return{tz(i){if(!lt(i))return!1;for(const e of _.keys(t)){if(!t[e].tz(i[e]))return!1}return!0},ez(i,e){if(!lt(i))throw new k(e+" must be an object.");for(const s of _.keys(t)){const n=t[s];if(!n.tz(i[s]))return n.ez(i[s],e+"."+String(s))}throw new k}}}function $D(t){return _.keys(t).map((i=>t[i]))}function ni(t){return{tz:i=>na(t,i),ez:JD}}function K(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return{tz:t=>i.some((i=>i.tz(t))),ez:JD}}function wt(t){return{tz:i=>Yn(i)&&i.every((i=>t.tz(i))),ez(i,e){if(!Yn(i))throw new k(e+" must be an array.");return i.forEach(((i,s)=>{if(!t.tz(i))return t.ez(i,e+"["+s+"]")})),JD(0,e)}}}function Bu(t){return{tz:i=>lt(i)&&_.keys(i).every((e=>t.tz(i[e]))),ez(i,e){if(!lt(i))throw new k(e+" must be an object.");for(const s of _.keys(i))if(!t.tz(i[s]))return t.ez(i[s],e+"."+s);return JD(0,e)}}}var tI=sn({responseCode:Ii,isException:XD,description:pi,title:pi,correlationId:pi});async function iI(t,i,e,s,n){const r=function(t,i,e,s){const n={token:i.token,account:i.accountId,form:"json"},r=decodeURIComponent(ua(e,n)),h=new Ko({});h.append("Content-Type","application/json");const o=Fh(t),a={getFairplayLicense:{releasePid:i.releasePid,spcMessage:o}};return{Fu:r,pS:Rt.Eu,vS:h,mS:Kc.POST,AS:JSON.stringify(a),i_:s,$w:zu.aS,MS:jo.cS}}(t,i,e,n);return await async function(t,i){const e=await i.BI(t),s=await e.vj();if(tI.tz(s))throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.Fu,s.responseCode);return vi(s.getFairplayLicenseResponse.ckcResponse)}(r,s)}var eI=class extends Zo{qj(t){const i=t.replace("FairPlay",this.nz.releasePid);return super.qj(i)}async HO(t,i){return await iI(t,this.nz,this.SO(),this.MO,i)}constructor(t,i,e,s){super(t,i,e,s,Rt.$I),this.nz=i}};r();var sI=class extends ge{VO(t){return t.clearkey||{}}async kO(t,i,e,s){const n=this.IO;if(this.SO())return super.kO(t,this.FO,e,s);if(n.keys&&n.keys.length){const t={keys:n.keys.map((t=>{let i=t;return i||(i={}),{kty:"oct",kid:i.id,k:i.value}}))};return Xh(JSON.stringify(t)).buffer}throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}WO(t,i){return Promise.resolve(new T(0))}async HO(t,i){const e=await super.QO(t,jo.gS,i),s=JSON.parse(Aa(e));if(s.keys)for(const t of s.keys)t.k&&(t.k=hA(t.k)),t.kid&&(t.kid=hA(t.kid));return Xh(JSON.stringify(s))}constructor(t,i,e){super(Qa,t,i,e,Rt.$I)}};r();var R=class extends $s{};r(),r();var nI={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function rI(t,i,e){const s=uI(i),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(i);const r=await hl(Promise.resolve(n.call(t,s)),e);return ev(r)?Ur(r):aI(oe({},nI,r))}async function hI(t,i,e,s,n){const r=t.onCertificateResponse,h=oI(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);return Ur(await hl(Promise.resolve(r.call(t,h)),n))}async function pt(t,i,e,s){const n=await async function(t,i,e,s){const n=null==t?void 0:t.onLicenseRequest,r=J(i,e);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const h=await hl(Promise.resolve(n.call(t,r)),s);if(ev(h))return Ur(h).buffer;return oe({fairplaySkdUrl:void 0},nI,h)}(t,i,e,s);return n instanceof ArrayBuffer?n:aI(n)}async function Z(t,i,e,s,n,r){const h=J(e,n),o=await async function(t,i,e,s,n){const r=null==t?void 0:t.onLicenseResponse,h=oI(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);0;const o=await hl(Promise.resolve(r.call(t,h)),n);return Ur(o)}(t,new T(i),h,s,r);return Ur(o)}function J(t,i){return oe({},uI(t),{fairplaySkdUrl:i})}function oI(t,i,e){return{url:e.CS,status:e.FI,statusText:e.mj,headers:e.vS.eS(),body:t,request:i}}function aI(t){return new nc({Fu:t.url,mS:t.method,vS:t.headers,AS:t.body,NS:t.useCredentials})}function uI(t){var i;return{url:t.Fu,body:null!=(i=cI(t.AS))?i:null,headers:t.vS.eS(),method:t.mS,useCredentials:t.NS}}function cI(t){if(t)return"string"==typeof t?Xh(t):t instanceof ArrayBuffer?new T(t):_a(t)?xe(t):void 0}var lI=class extends Zs{WO(t,i){return Promise.resolve(t)}async HO(t,i){const e=await this.Ej(Ge(t).buffer),s=this.CO(e,Rt.$I,jo._S,i),n=await pt(this.rz,s,void 0,i);if(n instanceof ArrayBuffer)return new T(n);if(""===n.Fu)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.MO.BI(n),e=await t.zj(i);return await Z(this.rz,e,s,t,void 0,i)}catch(t){throw yo(t),new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,i,e,s){super(t,i,e),this.rz=s}};r();var dI=class extends R{async WO(t,i){if(this.DO)return this.DO;const e=this.CO(t,Rt.$I,jo.fS,i),s=await rI(this.rz,e,i);if(s instanceof T)return s;if(""===s.Fu)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this.MO.BI(s),r=await n.zj(i)}catch(t){throw yo(t),new Yr(le.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const h=J(e,void 0);return await hI(this.rz,new T(r),h,n,i)}async HO(t,i){const e=this.CO(t,Rt.$I,jo.dS,i),s=await pt(this.rz,e,void 0,i);if(s instanceof ArrayBuffer)return new T(s);if(""===s.Fu)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.MO.BI(s),n=await t.zj(i);return await Z(this.rz,n,e,t,void 0,i)}catch(t){throw yo(t),new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,i,e,s){super(t,i,e,Rt.$I),this.rz=s}};r();var fI=class extends Zo{async WO(t,i){if(this.DO)return this.DO;const e=this.Kj(i),s=await rI(this.rz,e,i);if(_a(s))return s;try{const t=await this.MO.BI(s),n=await t.zj(),r=J(e,void 0);return await hI(this.rz,new T(n),r,t,i)}catch(t){throw yo(t),new Yr(le.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async HO(t,i){const e=this.CO(t,Rt.$I,jo.cS,i),s=await pt(this.rz,e,this.oz,i);if(s instanceof ArrayBuffer)return new T(s);if(""===s.Fu)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.MO.BI(s),n=await t.zj(i);return await Z(this.rz,n,e,t,this.oz,i)}catch(t){throw yo(t),new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}qj(t){var i;return this.oz=t,(null==(i=this.rz)?void 0:i.extractFairplayContentId)?Promise.resolve(this.rz.extractFairplayContentId(t)):super.qj(t)}constructor(t,i,e,s,n){super(t,i,e,s,Rt.$I),this.rz=n}},V=class{cz(t,i,e,s){switch(t.jC.$w){case Ci.xb:return this.lz(i,e,s);case Ci.Cb:return this.fz(i,e,s);case Ci.jb:return this._z(t,i,e,s);case Ci.Ob:default:return this.gz(i,e,s)}}lz(t,i,e){const s=function(t){return t.integration===EN&&ae(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&Ea.cj.hj(s,Xt)){const n=Ea.cj.uj(s,Xt,t);return new dI(t,i,e,n)}switch(s){case vN:return new sD(t,i,e);case Ga:return new nD(t,i,e);case pN:return new hD(t,i,e);case un:return new uD(t,i,e);case nu:return new fD(t,i,e);case an:return new _D(t,i,e);case wu:return new wD(t,i,e);case DN:return new AD(t,i,e);default:return new R(t,i,e,Rt.$I)}}fz(t,i,e){const s=t.integration;if(s&&Ea.cj.hj(s,ps)){const n=Ea.cj.uj(s,ps,t);return new lI(t,i,e,n)}switch(s){case vN:return new pD(t,i,e);case Ga:return new MD(t,i,e);case pN:return new TD(t,i,e);case un:return new ND(t,i,e);case nu:return new ID(t,i,e);case wu:return new SD(t,i,e);case DN:return new ED(t,i,e);default:return new Zs(t,i,e)}}_z(t,i,e,s){const n=i.integration;if(n&&Ea.cj.hj(n,Wp)){const r=Ea.cj.uj(n,Wp,i);return new fI(t,i,e,s,r)}switch(n){case mN:return new CD(t,i,e,s);case Ga:return new xD(t,i,e,s);case yN:return new zD(t,i,e,s);case vN:return new PD(t,i,e,s);case pN:return new BD(t,i,e,s);case un:return new RD(t,i,e,s);case MN:return new UD(t,i,e,s);case nu:return new QD(t,i,e,s);case TN:return new FD(t,i,e,s);case an:return new YD(t,i,e,s);case wu:return new GD(t,i,e,s);case NN:return new VD(t,i,e,s);case DN:return new WD(t,i,e,s);case IN:return new HD(t,i,e,s);case SN:return new eI(t,i,e,s);default:return new Zo(t,i,e,s,Rt.Eu)}}gz(t,i,e){return new sI(t,i,e)}wz(t){return t.$w===Ci.Cb||t.$w===Ci.xb||t.$w===Ci.jb||t.$w===Ci.Ob}ix(t,i){var e;if(t.$w!==Ci.Cb)return!1;if(z_(null==(e=i.playready)?void 0:e.customData))return!0;const s=i.integration;return(!s||!Ea.cj.hj(s,Wp))&&(s===vN&&new mD(i).ix)}pj(t,i){if(t.$w!==Ci.xb)return;const e=i.integration;return e&&Ea.cj.hj(e,Wp)?void 0:e===vN?sD.pj():void 0}};r(),r(),r(),r();var si,_I="default",gI="theoplayer-stored-network-info-v2",wI=25e5,ca=class{Az(t){var i;const e=null==(i=fe.vz)?void 0:i.Jb(t);if(void 0===e)return;const s=JSON.parse(e);if(void 0!==s&&void 0!==s[this.mz]){if(!this.pz(s))return s[this.mz].availableBandwidth;var n;null==(n=fe.vz)||n.yz(t,JSON.stringify({}))}}Mz(){const t=this.Az(gI);if(void 0!==t)return t;const i=this.Az("theoplayer-stored-network-info");return i?8*i:void 0}pz(t){const i=t[this.mz].storedTimestamp;return!!i&&Yo()-i>36e5}Tz(t){this.Nz=t,this.Dz()}Iz(){var t;return null!=this.Nz||(this.Nz=null!=(t=this.Mz())?t:wI),this.Nz}constructor(){this.mz=_I,this.Nz=void 0,this.Dz=oo((()=>{var t;const i={[this.mz]:{availableBandwidth:this.Nz,storedTimestamp:Yo()}};null==(t=fe.vz)||t.yz(gI,JSON.stringify(i))}),1e4)}};ca.kb=new ca,r(),function(t){t[t.Sz=0]="Sz",t[t.Ez=1]="Ez",t[t.bz=2]="bz",t[t.Lz=3]="Lz",t[t.kz=4]="kz",t[t.Lv=5]="Lv",t[t.Cz=6]="Cz",t[t.xz=7]="xz",t[t.Bv=8]="Bv",t[t.Oz=9]="Oz",t[t.jz=10]="jz"}(si||(si={})),r();var Su=class{get zz(){return 0}get Pz(){return 0}Bz(t){}};r();var AI=class{Rz(t){this.xj=t}pj(t){const i=this.xj;if(void 0!==i)return this.Uz.pj(t,i)}ix(t){const i=this.xj;return void 0!==i&&this.Uz.ix(t,i)}Qz(t){const i={jC:t.jC,Fz:t.Fz||[],Yz:t.Yz,Jj:t.Jj},e=this.Uz.cz(i,this.xj||{},t.GO,this.LS);return i.Yz&&e.yO(i.Yz),new vI(e)}constructor(t,i=new V){this.xj=void 0,this.LS=t,this.Uz=i}},vI=class{bO(t){return this.Gz.bO(t)}LO(t,i,e){return this.Gz.LO(i,e)}EO(){return this.Gz.EO||void 0!==this.Gz.DO}WO(t,i){return this.Gz.WO(t,i)}HO(t,i,e){return i&&this.Gz.yO(i),this.Gz.HO(t,e)}Xf(){this.Gz.cn()}constructor(t){this.Gz=t}};r();var yh=class extends co{Vz(t){this.Wz.push(t);for(const i of t.Nw)this.tt(i);this.qz(t)}Xz(t){Et(this.Wz,t),this.Zz(t);for(const i of t.Nw)this.Kz(i)||this.it(i)}Kz(t){for(const i of this.Wz)if(i.Sw(t))return!0;return!1}qz(t){t.ln(gt.qg,this.Jz),t.ln(gt.Zg,this.$z)}Zz(t){t.rn(gt.qg,this.Jz),t.rn(gt.Zg,this.$z)}cn(){for(;this.Wz.length>0;)this.Xz(this.Wz[0]);super.cn()}ha(){return Hc(this)}constructor(t){super(),this.Wz=[],this.Jz=t=>{this.tt(t.Lt)},this.$z=t=>{const i=t.Lt;this.Kz(i)||this.it(i)};for(const i of t)this.Vz(i)}};function mI(t){return{get enabled(){return t.Rt},set enabled(i){t.Rt=Sg(i)},get currentLatency(){return t.pv},get streamConfiguration(){if(void 0!==t.tP)return function(t){return{get minimumOffset(){return t.iA},get maximumOffset(){return t.sA},get targetOffset(){return t.eA},get forceSeekOffset(){return t.nA},get minimumPlaybackRate(){return t.rA},get maximumPlaybackRate(){return t.hA}}}(t.tP)},get configuration(){return function(t){return{get minimumOffset(){return t.iA},set minimumOffset(i){t.iA=Ee(i)},get maximumOffset(){return t.sA},set maximumOffset(i){t.sA=Ee(i)},get targetOffset(){return t.eA},set targetOffset(i){t.eA=Ee(i)},get forceSeekOffset(){return t.nA},set forceSeekOffset(i){t.nA=Ee(i)},get minimumPlaybackRate(){return t.rA},set minimumPlaybackRate(i){t.rA=Ee(i)},get maximumPlaybackRate(){return t.hA},set maximumPlaybackRate(i){t.hA=Ee(i)},update(i){t.Ln(function(t){const i={};void 0!==t.minimumOffset&&(i.iA=Ee(t.minimumOffset));void 0!==t.maximumOffset&&(i.sA=Ee(t.maximumOffset));void 0!==t.targetOffset&&(i.eA=Ee(t.targetOffset));void 0!==t.forceSeekOffset&&(i.nA=Ee(t.forceSeekOffset));void 0!==t.minimumPlaybackRate&&(i.rA=Ee(t.minimumPlaybackRate));void 0!==t.maximumPlaybackRate&&(i.hA=Ee(t.maximumPlaybackRate));return i}(i))}}}(t.vd)}}}r(),r();var pI,Wu=class{get oa(){return null!=this.Ua||(this.Ua=mI(this)),this.Ua}get Rt(){return!1}set Rt(t){}get pv(){}get tP(){}get vd(){return this.iP}constructor(){this.iP={nA:0,sA:0,hA:0,iA:0,rA:0,eA:0,Ln:xs}}};function yI(){return pI||(pI=Ys&&Ys.document&&Ys.document.createElement("video")),pI}var MI=!(!Ys||!Ys.TextTrack),TI=class extends ha{get eP(){const t=this.sP.M_,i=this.E_;return t.ar(i,.01)}get ht(){return this.qv}get M_(){return this.sP.M_.ks()}get N_(){return this.sP.N_}set N_(t){t&&this.sP.nP(t)}get E_(){return void 0!==this.rP?this.rP:this.sP.E_}set E_(t){this.R_&&(this.rP=t),this.sP.Em(t)}get ct(){return this.sP.ct}get C_(){return this.sP.C_}get lt(){return this.hP}get j_(){return this.oP}get P_(){}get R_(){return this.sP.R_}get Q_(){return oe({},{Jv:0,$v:0,tm:0,im:0,nm:0,hm:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.sP.F_())}get Y_(){return this.sP.Y_}set Y_(t){this.sP.Y_=t}get W_(){return!0}get q_(){return this.sP.q_}get Z_(){return this.sP.Z_}set Z_(t){this.sP.Z_=t}get eg(){return this.sP.aP.played}get hg(){return this.uP}set hg(t){this.uP=t,this.cP&&(this.cP.hg=t)}get cg(){return this.sP.cg}get fg(){return this.sP.fg.ks()}get gg(){return this.sP.gg}get lP(){return this.sP.lP}get nt(){return this.Al}get rt(){return this.Zv}get vg(){return this.sP.vg}get Mg(){return this.sP.Mg}get Ng(){return this.sP.Ng}set Ng(t){this.sP.Ng=t}get Sg(){return this.dP}get Lg(){return this.sP.Lg}set Lg(t){this.sP.Lg=t}get fP(){return this._P}be(){this.sP.be()}ge(){this.sP.ge()}async ca(t,i,e){Pi(e);const s={$w:Pe.tO,tA:t.src,gP:t.type,wP:this.AP(t),hg:this.uP,vP:t.crossOrigin,mP:i.metadata&&i.metadata.title};this.pP.Rz(t.contentProtection),this.cP=await this.sP.Pn(s),Pi(e),i.textTracks&&this.yP(i.textTracks),Ss(this.nt)}yP(t){for(let e of t)if(this.sP.MP()&&_n.Va&&MI&&!op(e.kind,e.label)&&this.TP(e)){var i;const t=null!=(i=e.kind)?i:Pt.HM;this.sP.NP(e.src,t,e.label,e.srclang,e.default)}else{if(void 0===e.src)continue;this.DP.IS(e)}}TP(t){return!t.format||"webvtt"===t.format}async Bg(){try{await this.sP.Bg()}catch(t){}for(;!this.eP;)await this.sP.v_(t.BA)}Pg(){this.sP.Pg()}Ug(){return void 0!==this.sP.aP.webkitShowPlaybackTargetPicker}Qg(){this.sP.aP.webkitShowPlaybackTargetPicker&&this.sP.aP.webkitShowPlaybackTargetPicker()}Fg(){this.sP.aP.webkitShowPlaybackTargetPicker&&this.sP.aP.webkitShowPlaybackTargetPicker()}xg(){return this.sP.aP}Cg(){return this.sP.la}async Wn(){this.hP=void 0,this.oP=void 0,this.cP=void 0,await this.DP.Wn(),this.sP.IP(),await this.sP.Wn(),this.SP.Wn(),this.hg=this.uP,this.ht.Wn(),this.rt.Wn(),this.rP=void 0}async cn(){await this.Wn(),this.Bo(),this.EP(),this.bP(),this.SP.cn(),this.sP.LP=void 0,await this.CP.kP(this.sP),this.qv.cn(),this.Zv.cn(),this.Al.cn(),await this.DP.cn()}xP(){this.sP.ln(t.bh,this.Ds),this.sP.ln(t.yh,this.Ds),this.sP.ln(t.XA,this.fc),this.sP.ln(t.BA,this.Ds),this.sP.ln(t.xA,this.Ds),this.sP.ln(t.YA,this.Ds),this.sP.ln(t.FA,this.OP),this.sP.ln(t.NA,this.Ds),this.sP.ln(t.RA,this.Ds),this.sP.ln(t.ZA,this.Ds),this.sP.ln(t.yA,this.Ds),this.sP.ln(t.QA,this.jP),this.sP.ln(qo._v,this.zP),this.sP.ln(Bi.Zo,this.PP),this.sP.ln(t.vA,this.Ds),this.sP.ln(t.AA,this.BP),this.sP.aP.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.RP)}EP(){this.sP.rn(t.bh,this.Ds),this.sP.rn(t.yh,this.Ds),this.sP.rn(t.XA,this.fc),this.sP.rn(t.BA,this.Ds),this.sP.rn(t.xA,this.Ds),this.sP.rn(t.YA,this.Ds),this.sP.rn(t.FA,this.OP),this.sP.rn(t.NA,this.Ds),this.sP.rn(t.RA,this.Ds),this.sP.rn(t.ZA,this.Ds),this.sP.rn(t.yA,this.Ds),this.sP.rn(t.QA,this.jP),this.sP.rn(qo._v,this.zP),this.sP.rn(Bi.Zo,this.PP),this.sP.rn(t.vA,this.Ds),this.sP.rn(t.AA,this.BP),this.sP.aP.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.RP)}AP(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{jC:Jp,UP:[{initDataTypes:[Jp.Bb],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}QP(){let t=this.sP.aP.audioTracks,i=this.sP.aP.videoTracks;t&&(t.addEventListener("addtrack",this.FP),t.addEventListener("removetrack",this.YP),t.addEventListener("change",this.GP)),i&&(i.addEventListener("addtrack",this.VP),i.addEventListener("removetrack",this.WP),i.addEventListener("change",this.HP))}bP(){let t=this.sP.aP.audioTracks,i=this.sP.aP.videoTracks;t&&(t.removeEventListener("addtrack",this.FP),t.removeEventListener("removetrack",this.YP),t.removeEventListener("change",this.GP)),i&&(i.removeEventListener("addtrack",this.VP),i.removeEventListener("removetrack",this.WP),i.removeEventListener("change",this.HP))}Yr(t){for(let i=0;i<t.U;i++){t.Iw(i).Im()}}Yg(){this.sP.Yg()}Gg(){}qP(t,i){this.hP||(this.hP=i,this.oP=t,this.mo(new me(t)))}constructor(t,i,e,s,n,r=new V,h=wN()){super(),this.cP=void 0,this.hP=void 0,this.oP=void 0,this._P=new Su,this.dP=new Wu,this.PP=t=>{const i=t.lt,e=i.code,s=new ce(Rw(e),"Something went wrong during native playback.",i),n=new cc(e,s.message,i.message);this.qP(s,n)},this.fc=()=>{this.mo(new Tc(this.E_,this.N_))},this.OP=t=>{this.q_||(this.rP=void 0),this.mo(t)},this.zP=t=>{this.rP=void 0},this.RP=()=>{this.mo(new Jw(this.R_))},this.jP=()=>{this.Mg>0&&this.vg>0&&this.mo(new Vu)},this.FP=t=>{this.qv.tt(new Xw(t.track))},this.YP=t=>{const i=II(this.qv,t.track);i&&this.qv.it(i)},this.GP=()=>{this.Yr(this.qv)},this.VP=t=>{this.Zv.tt(new Kw(t.track))},this.WP=t=>{const i=II(this.Zv,t.track);i&&this.Zv.it(i)},this.HP=()=>{this.Yr(this.Zv)},this.BP=t=>{this.mo(t),this.qP(t.errorObject,Qh(t.errorObject))},this.CP=i,this.LS=e,this.KC=h,this.sP=this.CP.XP(Tw.Yv),this.uP=this.sP.aP.preload,this.SP=new ru(this.sP,!0),this.SP.ln(Wh,this.Ds),this.pP=new AI(e,r),this.sP.LP=this.pP,this.xP(),this.qv=new qe,this.Zv=new qe,this.QP(),this.DP=new Ya(this.sP,this.LS),this.Al=new yh([this.sP.nt]),this.ge()}};function NI(t){return!t.type||!(!yI().canPlayType||!yI().canPlayType(t.type))}var DI=class{ej(t,i,e,s,n,r){return new TI(t,i,e,s,n)}ZP(t,i){return NI(t)}KP(){return!1}constructor(){this.JP=si.jz}};function II(t,i){for(let e of t.Nw)if(e.Nm===i)return e}var Iu=class{static $P(){return this.kb}tB(t){this.iB.push(t)}get JP(){return this.eB.JP}ej(t,i,e,s,n,r){let h=this.eB.ej(t,i,e,s,n,r);for(const t of this.iB)h=t(h,e,s);return h}ZP(t,i){return this.eB.ZP(t,i)}KP(){return!1}constructor(){this.eB=new DI,this.iB=[]}};function SI(t,i){return Xo(t.JP,i.JP)}Iu.kb=new Iu,r(),r();var EI=class{sB(t){this.nB.push(t),this.nB.sort(SI)}async rB(t,i){for(const e of this.nB){const s=e.ZP(t,i);if(B_(s)?await s:Boolean(s))return e}}constructor(){this.nB=[]}};function lu(t){Je.kb.sB(t)}var Je=class extends EI{hB(t){this.oB=t}aB(){return this.oB}async uB(t,i){for(let e of t){let t=await this.rB(e,i);if(t)return{cc:e,t:t}}const e=this.oB;for(let s of t)if(e.ZP(s,i))return{cc:s,t:e};return{cc:t[0],t:e}}constructor(...t){super(...t),this.oB=Iu.$P()}};Je.kb=new Je,r();var Al,bI=class{cn(){ei(this.Us)}constructor(t){this.Us=Ys&&Ys.document&&Ys.document.createElement("div"),ia(this.Us),t.appendChild(this.Us)}};r(),r(),function(t){t.jz="",t.cB="none",t.XM="metadata",t.lB="auto"}(Al||(Al={}));var LI=[Bi.Zo,t.MA,t.TA,t.$A,t.fA,t.DA,t.SA,t.zA,t.PA,t.VA,t.HA,qo.rv,qo.hv,qo.ov,qo.uv,qo._w,qo.fv,qo._v,t.AA,t.vA,t.yA,t.NA,t.xA,t.OA,t.bh,t.BA,t.yh,t.RA,t.QA,t.YA,t.FA,t.XA,t.ZA,t.UA,t.jA,t.GA],kI=class extends ha{get ht(){return this.qv}get M_(){return this.Lo.M_}get lt(){return this.Lo.lt}get j_(){return this.Lo.j_}get N_(){return this.Lo.N_}set N_(t){this.Lo.N_=t}get bt(){return this.dB}get E_(){return this.Lo.E_}set E_(t){this.Lo.E_=t}get ct(){return this.Lo.ct}get C_(){return this.Lo.C_}get P_(){return this.Xv}get R_(){return this.Lo.R_}get Q_(){return this.Lo.Q_}get Y_(){return this.Lo.Y_}set Y_(t){this.Lo.Y_=t}get W_(){return this.Lo.W_}get q_(){return this.Lo.q_}get Z_(){return this.Lo.Z_}set Z_(t){this.Lo.Z_=t}get eg(){return this.Lo.eg}get hg(){return this.uP}set hg(t){this.uP=t,this.Lo&&(this.Lo.hg=this.uP)}get cg(){return this.Lo.cg}get fg(){return this.Lo.fg}get gg(){return this.Lo.gg}get nt(){return this.Al}get vg(){return this.Lo.vg}get rt(){return this.Zv}get Mg(){return this.Lo.Mg}get Ng(){return this.Lo.Ng}set Ng(t){this.Lo.Ng=t}get Sg(){return this.Lo.Sg}get fP(){return this.Lo.fP}Pg(){this.Lo.Pg()}Bg(){const t=this.Lo.Bg();B_(t)&&W(t)}Rg(){return this.ca(void 0)}zg(){}fB(){this.qv.Ew=this.Lo.ht,this.Zv.Ew=this.Lo.rt,this.Al.Ew=this.Lo.nt,this.Xv.Ew=this.Lo.P_,this.Lo.ln(LI,this.Ds)}_B(){this.Lo.rn(LI,this.Ds),this.qv.Ew=void 0,this.Zv.Ew=void 0,this.Al.Ew=void 0,this.Xv.Ew=void 0}Oa(){return this.gB}async ca(t,i){if(Pi(i),this.gB=t,!t)return;const e=t.sources.filter(Tl);if(ml(e))return;const s=await this.wB.uB(e,t);Pi(i);const n=s.cc,r=s.t,h=this.Cg(),o=Cw(this);(this.AB!==r||this.lt)&&(this._B(),await this.Lo.cn(),Pi(i),this.AB=r,this.Lo=this.vB(r,n),function(t,i){t.Y_!==i.Y_&&(t.Y_=i.Y_);t.Ng!==i.Ng&&(t.Ng=i.Ng);t.Z_!==i.Z_&&(t.Z_=i.Z_)}(this.Lo,o),Ta(this,o,this),this.fB()),this.Lo.hg=this.hg,this.mB?this.Lo.ge():this.Lo.be(),await this.Lo.ca(n,t,i),Pi(i),this.pB(n),this.Cg()!==h&&this.mo(new dt)}pB(t){this.dB!==t&&(this.dB=t,this.mo(new jt(t)))}Ug(){return this.Lo.Ug()}Qg(){this.Lo.Qg()}Fg(){this.Lo.Fg()}Cg(){return this.Lo.Cg()}Yg(){this.Lo.Yg()}Gg(){this.Lo.Gg()}async Wn(){this.gB=void 0,this.pB(void 0),await this.Lo.Wn()}async cn(){this.Bo(),await this.Wn(),await this.Lo.cn(),this.qv.cn(),this.Zv.cn(),this.Al.cn(),this.Xv.cn()}ge(){this.mB=!0,this.Lo.ge()}be(){this.mB=!1,this.Lo.be()}constructor(t,i){super(),this.AB=void 0,this.dB=void 0,this.uP=Al.cB,this.gB=void 0,this.mB=!0,this.qv=new As,this.Zv=new As,this.Al=new Ac,this.Xv=new ra,this.wB=t,this.Lo=i,this.Lo.hg=this.hg,this.fB()}};function CI(t,i,e){return e?t<=i:t<i}r(),r(),r();var Pc,Ki=class t{get yB(){return this.MB.slice()}gn(t){return this.MB[2*t]}bn(t){return this.MB[2*t+1]}TB(t){return this.NB[2*t]}DB(t){return this.NB[2*t+1]}ks(){const t=this;return{get length(){return t.U},start(i){const e=0|i;return t.IB(e),t.gn(e)},end(i){const e=0|i;return t.IB(e),t.bn(e)}}}SB(){const i=new Array(2*this.U),e=new Array(2*this.U);for(let t=0;t<this.U;t++)i[2*t]=this.gn(t),i[2*t+1]=this.bn(t),e[2*t]=!0,e[2*t+1]=!0;return new t(i,e)}IB(t){if(t<0)throw new b("The index provided ("+t+") must be non-negative");if(t>=this.U)throw new b("The index provided ("+t+") is greater than the maximum bound ("+this.U+")")}EB(t){if(0===this.U)return 0;if(this.ar(t))return t;if(t<=this.gn(0))return this.gn(0);if(t>=this.bn(this.U-1))return this.bn(this.U-1);{let i=0,e=1/0;for(let s=0;s<this.U;s++){const n=this.gn(s),r=x.abs(n-t);r<e&&(i=n,e=r);const h=this.bn(s),o=x.abs(h-t);o<e&&(i=h,e=o)}return i}}yn(i){let e=0,s=0;const n=[],r=[];for(;e<this.U&&s<i.U;){const t=this.gn(e),h=this.bn(e),o=this.TB(e),a=this.DB(e),u=i.gn(s),c=i.bn(s),l=i.TB(s),d=i.DB(s),f=x.max(t,u),_=x.min(h,c);let g,w;g=t===u?o&&l:f===t?o:l,w=h===c?a&&d:_===h?a:d,(f<_||g&&w&&f===_)&&(n.push(f,_),r.push(g,w)),h===c?(e+=1,s+=1):h<c?e+=1:s+=1}return new t(n,r)}bB(){const i=this.LB(),e=i.U;if(0===e)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=i.gn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!i.TB(0)));for(let t=0;t<e-1;t++)s.push(i.bn(t),i.gn(t+1)),n.push(!i.DB(t),!i.TB(t+1));const h=i.bn(e-1);return h!==1/0&&(s.push(h,1/0),n.push(!i.DB(e-1),!1)),new t(s,n)}kB(i){let e=0,s=0;const n=this.U,r=i.U,h=new Array(2*(n+r)),o=new Array(2*(n+r));let a=0;for(;e<n&&s<r;){const t=this.gn(e),n=this.bn(e),r=i.gn(s),u=i.bn(s);t<r||t===r&&n<u?(h[a]=t,h[a+1]=n,o[a]=this.TB(e),o[a+1]=this.DB(e),e++):(h[a]=r,h[a+1]=u,o[a]=i.TB(s),o[a+1]=i.DB(s),s++),a+=2}for(;e<n;)h[a]=this.gn(e),h[a+1]=this.bn(e),o[a]=this.TB(e),o[a+1]=this.DB(e),e++,a+=2;for(;s<r;)h[a]=i.gn(s),h[a+1]=i.bn(s),o[a]=i.TB(s),o[a+1]=i.DB(s),s++,a+=2;return new t(h,o)}CB(i){void 0===i&&(i=0);const e=this.U;if(e<2)return this;const s=[],n=[];let r=this.gn(0),h=this.bn(0),o=this.TB(0),a=this.DB(0);for(let t=1;t<e;t++){const e=this.gn(t),u=this.bn(t);let c=this.TB(t),l=this.DB(t);r<e&&h>u||(r===e&&(c=o||c,o=c),h===u&&(l=a||l,a=l),CI(e,h+i,a||c)?(h=u,a=l):(s.push(r,h),n.push(o,a),r=e,h=u,o=c,a=l))}return s.push(r,h),n.push(o,a),new t(s,n).LB()}LB(){const i=[],e=[];for(let t=0;t<this.U;t++){const s=this.gn(t),n=this.bn(t),r=this.TB(t),h=this.DB(t);s===n?(r||h)&&(i.push(s,n),e.push(!0,!0)):(i.push(s,n),e.push(r,h))}return new t(i,e)}xB(t){if(0===this.U)return t;if(0===t.U)return this;return this.kB(t).CB()}OB(t){const i=this.LB(),e=t.LB(),s=i.bB(),n=e.bB(),r=s.yn(e),h=n.yn(i);return r.xB(h)}Sm(i){if(0===this.U||0===i)return this;const e=[],s=[];for(let t=0;t<this.U;t++){const n=this.gn(t)+i,r=this.bn(t)+i;e.push(n,r),s.push(this.TB(t),this.DB(t))}return new t(e,s)}jB(t){return 0===this.U||0===t.U?this:this.LB().yn(t.LB().bB())}ar(t,i){return this.zB(t,i)>=0}PB(t,i,e,s,n){return this.BB(t,i,e,s,n)>=0}RB(t,i,e,s,n){return this.UB(t,i,e,s,n)>=0}QB(t){if(t.U!==this.U)return!1;for(let i=0;i<this.U;i++)if(this.gn(i)!==t.gn(i)||this.bn(i)!==t.bn(i)||this.TB(i)!==t.TB(i)||this.DB(i)!==t.DB(i))return!1;return!0}FB(i){const e=[],s=[];for(let t=0;t<this.U;t++){const n=this.gn(t),r=this.bn(t),h=this.TB(t),o=this.DB(t);i(n,r,h,o)&&(e.push(n,r),s.push(h,o))}return new t(e,s)}UB(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,h=i+n;for(let t=0;t<this.U;t+=1)if(CI(this.gn(t),h,!s||this.TB(t))&&CI(r,this.bn(t),!e||this.DB(t)))return t;return-1}BB(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,h=i-n;for(let t=0;t<this.U;t+=1)if(CI(this.gn(t),r,!e||this.TB(t))&&CI(h,this.bn(t),!s||this.DB(t)))return t;return-1}zB(t,i){return this.BB(t,t,!0,!0,i)}YB(t,i){void 0===i&&(i=0);const e=t+i;for(let t=this.U-1;t>=0;t-=1)if(CI(this.gn(t),e,this.TB(t)))return t;return-1}GB(t,i){void 0===i&&(i=0);const e=t-i;for(let t=0;t<this.U;t+=1)if(CI(e,this.bn(t),this.DB(t)))return t;return-1}VB(t,i){void 0===i&&(i=0);const e=t+i;for(let t=0;t<this.U;t+=1)if(this.gn(t)>e)return t;return-1}WB(i){return this.IB(i),new t([this.gn(i),this.bn(i)],[this.TB(i),this.DB(i)])}HB(t,i){const e=this.zB(t,i);return e<0?void 0:this.WB(e)}get qB(){let t=0;for(let i=0;i<this.U;i++){t+=this.bn(i)-this.gn(i)}return t}static mn(i){const e=[];for(let t=0;t<i.length;t++)e.push(i.start(t),i.end(t));return new t(e)}static XB(i){return new t([i,i],[!0,!0])}static ZB(i,e){return i<=e?new t([i,e]):t.KB()}static KB(){return xI}constructor(t,i){this.U=t.length>>1,this.MB=t,this.NB=i||function(t){const i=new Array(2*t);for(let e=0,s=0;e<t;e+=1,s+=2)i[s]=!0,i[s+1]=!1;return i}(this.U)}},xI=new Ki([]);r(),r(),function(t){t.Ko="fullscreenchange",t.ea="fullscreensupportchange",t.Zo="fullscreenerror"}(Pc||(Pc={})),r();var Du=class extends gg{constructor(){super(Pc.Zo)}},Ro=(Pc.Ko,Pc.ea,Pc.Zo,class extends i{get cs(){return!1}get Go(){return!1}uo(){this.mo(new Du)}yo(){}cn(){this.Bo()}}),OI=class extends i{get N_(){}set N_(t){}get E_(){return this.JB}set E_(t){this.JB!==t&&(this.JB=t,this.$B=!0,this.mo(new ja(this.E_)))}get Q_(){return{Jv:0,$v:0,tm:0,im:0,nm:0,hm:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get Y_(){return this.tR}set Y_(t){this.tR!==t&&(this.tR=t,this.mo(new Ve(this.E_,this.Ng)))}get q_(){return this.iR}get Z_(){return this.eR}set Z_(t){this.eR!==t&&(this.eR=t,this.mo(new se(this.E_,this.Z_)))}get gg(){return this.$B}get Ng(){return this.Ak}set Ng(t){this.Ak!==t&&(this.Ak=t,this.mo(new Ve(this.E_,this.Ng)))}get Lg(){return!1}set Lg(t){}get fP(){return this._P}ge(){}be(){}Bg(){this.iR&&(this.iR=!1,this.mo(new vh(this.E_)),this.mo(new wc(this.E_)))}Pg(){this.iR||(this.iR=!0,this.mo(new Tc(this.E_,this.N_)),this.mo(new ws(this.E_)))}ca(t,i){return Promise.resolve()}Ug(){return!1}Qg(){}Fg(){}Cg(){return this.sR}Yg(){}Gg(){}async Wn(){this.JB=0,this.$B=!1,this.Pg(),this.mo(new bl(this.JB))}async cn(){this.Bo(),this.ht.cn(),this.nt.cn(),this.rt.cn()}constructor(...t){super(...t),this.JB=0,this.tR=!1,this.iR=!0,this.eR=1,this.$B=!1,this.Ak=1,this.ht=new qe,this.M_=Ki.KB().ks(),this.ct=NaN,this.C_=!1,this.lt=void 0,this.j_=void 0,this.P_=void 0,this.R_=!1,this.W_=!0,this.eg=Ki.KB().ks(),this.hg=Al.cB,this.cg=ow.Rv,this.fg=Ki.KB().ks(),this.lP=void 0,this.nt=new Tn,this.vg=0,this.rt=new qe,this.Mg=0,this.Sg=new Wu,this._P=new Su,this.sR=new Ro}},jI=class extends OI{set nR(t){this.CP=t,this.sP=t.XP(Tw.Yv)}xg(){var t;return null==(t=this.sP)?void 0:t.aP}async cn(){await super.cn(),this.sP&&(await this.CP.kP(this.sP),this.sP=void 0)}constructor(...t){super(...t),this.CP=void 0,this.sP=void 0}},Y=class extends kI{get we(){return this.au}get Lg(){return this.Lo.Lg}set Lg(t){this.Lo.Lg=t}zg(){super.zg(),this.hR.rR()}Og(t){xw(this,t)}jg(){}Vg(t){return!1}async ca(t,i){const e=this.Cg(),s=this.xg();await super.ca(t,i),this.Cg()!==e&&this.mo(new dt),this.xg()!==s&&this.mo(new ns)}vB(t,i){return t.ej(this.au,this.hR,this.LS,this.Mx,this.oR,this.aR,i)}xg(){return this.Lo.xg()}y_(){return this.hR.uR.map((t=>t.aP))}async cn(){await super.cn(),this.hR.cn(),this.cR.cn()}constructor(t,i,e,s,n,r){const h=new jI;super(Je.kb,h),this.au=t,this.Mx=i,this.LS=e,this.oR=s,this.aR=r,this.hR=new kp(n,this.aR),this.hR.lR(this.au),h.nR=this.hR,this.cR=new bI(this.au)}};r(),r();var zI=class extends ha{get ht(){return this.dR}get M_(){return Ki.KB().ks()}get N_(){return new Date(NaN)}set N_(t){}get bt(){}get E_(){return 0}set E_(t){}get ct(){return 0}get we(){return this.au}get C_(){return!0}get lt(){return this.fR}get j_(){return this._R}get P_(){}get Q_(){return{Jv:0,$v:0,tm:0,im:0,nm:0,hm:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get Y_(){return!1}set Y_(t){}get W_(){return!0}get q_(){return!0}get Z_(){return 0}set Z_(t){}get eg(){return Ki.KB().ks()}get hg(){return Al.cB}set hg(t){}get cg(){return ow.Rv}get fg(){return Ki.KB().ks()}get gg(){return!1}get nt(){return this.gR}get vg(){return 0}get rt(){return this.dR}get Mg(){return 0}get Ng(){return 1}set Ng(t){}get Sg(){return this.dP}get Lg(){return!1}set Lg(t){}Vg(t){return!0}be(){}Bg(){throw this.mo(new me(this._R)),this.fR}Pg(){}Oa(){}async ca(t,i){throw Pi(i),this.mo(new me(this._R)),this.fR}ge(){}Rg(){return Promise.resolve()}xg(){}Cg(){return this.sR}y_(){return[]}zg(){}Og(t){}jg(){}get R_(){return!1}Ug(){return!1}Qg(){}Fg(){}Yg(){}Gg(){}Wn(){return Promise.resolve()}cn(){return this.Bo(),this.dR.cn(),this.gR.cn(),Promise.resolve()}constructor(t,i,e){super(),this.sR=new Ro,this.dP=new Wu,this.au=t,this.fR=i,this.dR=new qe,this.gR=new Tn,this._R=e}};function PI(t){if(t&&lt(t))return oe({},t,{integration:BI(t.integration),fairplay:GI(t.fairplay),widevine:RI(t.widevine),playready:UI(t.playready),clearkey:VI(t.clearkey),aes128:WI(t.aes128),integrationParameters:HI(t.integrationParameters),preferredKeySystems:qI(t.preferredKeySystems)})}function BI(t){if(ae(t))return t}function RI(t){if(t&&lt(t))return{persistentState:QI(t.persistentState),distinctiveIdentifier:QI(t.distinctiveIdentifier),audioRobustness:FI(t.audioRobustness),videoRobustness:FI(t.videoRobustness),licenseAcquisitionURL:ae(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:YI(t.licenseType),headers:t.headers,useCredentials:!!P_(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:ae(t.certificate)||ev(t.certificate)?t.certificate:void 0}}function UI(t){if(!t)return;const i=RI(t);if(!i)return;return oe({},i,{customData:ae(t.customData)?t.customData:void 0})}function QI(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function FI(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function YI(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function GI(t){if(!t)return;const i=RI(t);if(!i)return;return oe({},i,{certificateURL:ae(t.certificateURL)?t.certificateURL:void 0})}function VI(t){if(!t)return;const i=RI(t);if(!i)return;const e=Yn(t.keys)?t.keys.map((t=>function(t){if(!t||!lt(t))return;const i=t.id,e=t.value;if(!ae(i)||!ae(e))return;return{id:i,value:e}}(t))).filter(z_):void 0;return oe({},i,{keys:e})}function WI(t){if(lt(t))return{useCredentials:P_(t.useCredentials)?t.useCredentials:void 0}}function HI(t){if(lt(t))return t}function qI(t){return t&&Yn(t)?t.map((t=>Ue(t))).filter(z_):[Xt,ps,Wp]}r(),r(),r(),r(),r(),r(),r();var XI=class extends gg{constructor(t){super("presentationmodechange"),this.presentationMode=t}};function Kt(t,i,e){return new Promise(((s,n)=>{if(e&&e.Wf)return n(new sa);const r=t=>{o(),s(t)},h=()=>{o(),n(new sa)},o=()=>{t.removeEventListener(i,r),e&&e.Jf(h)};t.addEventListener(i,r),e&&e.Kf(h)}))}r(),r(),r();var bu,ZI=class extends i{La(t){for(const i of this.wR)t.ln(i,this.AR);this.vR.push(t)}mR(t){for(const i of this.wR)t.rn(i,this.AR);this.vR.push(t)}cn(){this.Bo();for(const t of this.vR)this.mR(t);Ri(this.vR)}constructor(t,i=!1,e){super(e),this.vR=[],this.pR=t=>{yc((()=>{this.Ds(t)}))},this.wR=t,this.AR=i?this.pR:this.Ds}},Mu=class extends ha{La(t){t.d_(this.yR),this.vR.push(t)}mR(t){t.A_(this.yR),Et(this.vR,t)}cn(){this.Bo();for(const t of this.vR)t.A_(this.yR);Ri(this.vR)}constructor(t,i=!1){super(t),this.vR=[],this.pR=t=>{yc((()=>{this.Ds(t)}))},this.yR=i?this.pR:this.Ds}};!function(t){t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture"}(bu||(bu={}));var KI,JI=class extends ha{get oa(){return this.Ua||(this.Ua=this.ha()),this.Ua}ha(){return function(t){let i,e={get currentMode(){return t.Ro()},requestMode(i){const e=tS(i);e&&t.Wo(e)},supportsMode(i){const e=tS(i);return!!e&&t.Vo(e)},addEventListener(t,e){i.ln(t,e)},removeEventListener(t,e){i.rn(t,e)}};return i=new Mu(e,!0),i.La(t),e}(this)}Wo(t){this.Uo(t,t)}Uo(t,i){this.MR!==i&&(this.NR=!0,this.DR=t,this.zo(i,this.MR),"fullscreen"!==t&&(this.IR=t),this.NR=!1,this.Hr())}Ro(){return this.SR?"fullscreen":"inline"}Vo(t){switch(t){case"fullscreen":return this.sR.Go;case"inline":return!0}return!1}Hr(){if(this.NR)return;const t=this.MR,i=this.Ro();this.MR=i,"fullscreen"!==i&&(this.ER=i),t!==i&&this.mo(new XI(i))}zo(t,i){const e="fullscreen"===t;this.SR=e,e!==this.sR.cs&&(e?this.sR.uo():this.sR.yo())}wi(){if(this.NR)return;const t=this.sR.cs;this.SR=t,t?this.Uo("fullscreen","fullscreen"):t||"fullscreen"!==this.DR?this.Hr():this.Uo(this.IR,this.ER)}bR(){this.wi(),this.mo(new me(new ce(le.FULLSCREEN_ERROR,"Failed to enter fullscreen.")))}cn(){this.sR.cn(),this.Bo()}constructor(t){super(),this.DR="inline",this.MR="inline",this.NR=!1,this.SR=!1,this.IR="inline",this.ER="inline",this.Ua=void 0,this.LR=()=>this.wi(),this.kR=()=>this.bR(),this.sR=t,this.sR.ln(Pc.Ko,this.LR),this.sR.ln(Pc.Zo,this.kR),this.Hr()}},$I={E_:0,ct:NaN,C_:!1,lt:void 0,j_:void 0,Y_:!1,q_:!0,Z_:1,cg:ow.Rv,gg:!1,vg:0,Mg:0,Ng:1};function tS(t){switch(t){case bu.INLINE:case bu.FULLSCREEN:case bu.PICTURE_IN_PICTURE:return t;default:return}}r(),function(t){t.DEFAULT="",t.THEO="theo",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor"}(KI||(KI={}));var al,ku,ta,iS,eS,Dr=class{get xR(){return this.OR}jR(t){const i=this.xR.filter((i=>i.zR(t)));if(i.length>1)0;else if(0===i.length)throw b("Unknown ad integration: "+t.integration);return i[0]||null}PR(t){this.OR.push(t)}constructor(){this.OR=[]}};Dr.kb=new Dr,r(),r(),r(),r(),function(t){t._v="PLAYING",t.vv="PAUSED",t.RR="SEEK",t.UR="STALLED",t.QR="FAILED",t.FR="INITIAL_BUFFERING",t.YR="NO_ACCESS"}(al||(al={})),function(t){t.GR="HTTP_REQUEST_STATUS_CODE_1XX",t.WR="HTTP_REQUEST_STATUS_CODE_2XX",t.HR="HTTP_REQUEST_STATUS_CODE_3XX",t.qR="HTTP_REQUEST_STATUS_CODE_4XX",t.XR="HTTP_REQUEST_STATUS_CODE_5XX",t.ZR="BUFFER_LENGTH",t.KR="BYTES_RECEIVED",t.JR="SEGMENT_READ_BITRATE",t.$R="SEGMENT_PROFILE_BITRATE",t.tU="VIDEO_PROFILE_BITRATE",t.iU="NUMBER_OF_FRAMES_DROPPED",t.eU="PLAYBACK_POSITION",t.sU="NUMBER_OF_FRAMES_DECODED",t.nU="PLAYBACK_DELTA_TO_ORIGIN",t.rU="STREAM_DELTA_TO_ORIGIN",t.hU="ORIGIN_TIMESTAMP"}(ku||(ku={})),function(t){t.oU="MANIFEST_URI",t.aU="ASSET_DURATION",t.uU="NUMBER_OF_CONTENT_PROFILES",t.cU="CDN",t.lU="CONTENT_TITLE",t.dU="SERVICE_NAME",t.fU="CONTENT_TYPE",t._U="CONTENT_DESCRIPTION"}(ta||(ta={})),(iS||(iS={})).gU="shutdown_normal_shutdown",function(t){t.wU="session/",t.AU="content/",t.vU="internalError/",t.mU="drmError/",t.pU="caError/",t.yU="networkError/"}(eS||(eS={}));var sS,nS=class{get code(){return this.category+this.statusCode}constructor(t,i){this.category=t,this.statusCode=i}};!function(t){t.MU="userAction",t.TU="endOfStreamReached"}(sS||(sS={}));var rS,hS=class extends i{};r(),r(),function(t){t.PAUSE="NU",t.RESUME="DU"}(rS||(rS={}));var oS=class extends gg{constructor(){super("IU")}},aS=class extends i{SU(){this.EU=!0}bU(){}cn(){this.EU=!1,this.LU.rn(rS.PAUSE,this.kU),this.LU.rn(rS.RESUME,this.CU)}xU(){return isFinite(this.Lo.kd())}constructor(t,i){super(),this.Lo=t,this.LU=i,this.EU=!1,this.kU=()=>{this.bU(),this.EU=!1},this.CU=()=>{this.EU=!0},this.LU.ln(rS.PAUSE,this.kU),this.LU.ln(rS.RESUME,this.CU)}},uS=class extends aS{SU(){super.SU(),this.OU()}cn(){this.jU(),super.cn()}OU(){this.Lo.ln("waiting",this.zU),this.Lo.ln("pause",this.PU),this.Lo.ln("playing",this.BU),this.Lo.ln("seeking",this.RU),this.Lo.ln("seeked",this.UU)}jU(){this.Lo.rn("waiting",this.zU),this.Lo.rn("pause",this.PU),this.Lo.rn("playing",this.BU),this.Lo.rn("seeking",this.RU),this.Lo.rn("seeked",this.UU)}QU(){this.FU=!0}YU(){const t=this.Lo.O_(),i=new nS(eS.vU,String(t.code));this.GU(al.QR,i,t.message)}VU(t){this.EU&&(this.LU.WU(t),this.mo(new oS))}GU(t,i,e){this.LU.HU(t,i,e),this.mo(new oS)}qU(t,i){this.LU.XU(t,i)}constructor(...t){super(...t),this.FU=!1,this.ZU=!1,this.KU=!1,this.zU=()=>{this.ZU&&!this.KU&&this.VU(al.UR)},this.BU=()=>{this.Lo.q_||(this.ZU||this.qU(new nS(eS.AU,"firstFrameDisplayed"),"now"),this.ZU=!0,this.VU(al._v))},this.PU=()=>{this.Lo.q_&&(this.ZU=!0,this.VU(al.vv))},this.RU=()=>{this.FU&&(this.KU=!0,this.FU=!1,this.VU(al.RR))},this.UU=()=>{this.KU=!1,this.Lo.q_&&this.VU(al.vv)}}};r();var cS=class extends aS{SU(){super.SU(),this.JU(),this.OU()}cn(){this.jU(),super.cn()}OU(){this.Lo.rt.ln("fw",this.JU),this.Lo.tQ.$U(this.iQ),this.Lo.ln(t.yA,this.eQ)}jU(){this.Lo.rt.rn("fw",this.JU),this.Lo.tQ.sQ(this.iQ),this.Lo.rn(t.yA,this.eQ)}nQ(t){t.serviceName&&this.rQ(ta.dU,t.serviceName),t.cdn&&this.rQ(ta.cU,t.cdn),t.contentTitle&&this.rQ(ta.lU,t.contentTitle),t.contentType&&this.rQ(ta.fU,t.contentType),t.contentDescription&&this.rQ(ta._U,t.contentDescription)}rQ(t,i){this.EU&&this.LU.hQ(t,i)}constructor(...t){super(...t),this.eQ=()=>{this.xU()&&this.rQ(ta.aU,x.round(this.Lo.kd()))},this.iQ=t=>{"manifest"===t.request.type&&this.rQ(ta.oU,t.url)},this.JU=()=>{const t=Gr(this.Lo.rt.Nw,(t=>t.Rt));t&&this.rQ(ta.uU,t.Uw.U)}}};r();var lS=class extends aS{SU(){super.SU(),this.oQ=this.Lo.Q_.Jv,this.aQ=this.Lo.Q_.tm,this.OU(),this.uQ.push(v(this.cQ,1e3))}bU(){super.bU(),this.lQ()}cn(){this.lQ(),this.jU(),this.uQ.forEach(m),Ri(this.uQ),super.cn()}OU(){this.Lo.tQ.$U(this.dQ),this.Lo.ln(t.HA,this.fQ)}jU(){this.Lo.tQ.sQ(this.dQ),this.Lo.rn(t.HA,this.fQ)}_Q(){this.lQ()}gQ(t){this.wQ+=t,this.AQ(ku.KR,this.wQ)}vQ(t,i){const e=this.mQ.get(i)||0;this.AQ(t,e)}pQ(){const t=this.Lo.Q_.Jv-this.oQ;this.AQ(ku.iU,t)}yQ(){const t=this.Lo.Q_.tm-this.aQ;this.AQ(ku.sU,t)}MQ(){const t=ca.kb.Iz();this.AQ(ku.JR,nv(t))}TQ(t){this.AQ(ku.$R,nv(t)),this.AQ(ku.tU,nv(t))}lQ(){if(!this.xU())return;const t=x.round(Is(this.Lo.b_()));this.AQ(ku.eU,t)}NQ(){const t=Ki.mn(this.Lo.T_()),i=this.Lo.b_(),e=t.HB(i),s=e?Is(e.bn(0)-i):0;this.AQ(ku.ZR,s)}AQ(t,i){this.EU&&this.LU.DQ(t,i)}constructor(...t){super(...t),this.mQ=Qt(),this.wQ=0,this.oQ=0,this.aQ=0,this.uQ=[],this.cQ=()=>{this.pQ(),this.yQ(),this.NQ()},this.fQ=t=>{t.TS===Tw.Yv&&(this.gQ(t.nm),this.MQ(),this.TQ(t.IQ),this.lQ())},this.dQ=t=>{const i=t.status.toString()[0],e=this.mQ.get(i)||0;this.mQ.set(i,e+1),this.vQ(ku.GR,"1"),this.vQ(ku.WR,"2"),this.vQ(ku.HR,"3"),this.vQ(ku.qR,"4"),this.vQ(ku.XR,"5")}}};r(),r(),r();var G=class{iL(t){this.SQ.delete(t)}EQ(){this.SQ.clear()}Jb(t){return this.SQ.get(t)}yz(t,i){this.SQ.set(t,i)}constructor(){this.SQ=Qt()}},yi=class t{static bQ(){return t.kb||(t.kb=dS.sx()?new dS:new G),t.kb}static iL(i){t.bQ().iL(i)}static EQ(){t.bQ().EQ()}static Jb(i){return t.bQ().Jb(i)}static yz(i,e){t.bQ().yz(i,e)}};yi.kb=void 0;var $r,dS=class extends yi{static sx(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}iL(t){self.sessionStorage.removeItem(t)}EQ(){self.sessionStorage.clear()}Jb(t){var i;return null!=(i=self.sessionStorage.getItem(t))?i:void 0}yz(t,i){self.sessionStorage.setItem(t,i)}};function fS(t){return t&&t.integration===yS}function _S(t){if(!ae(t.asset))throw new k("Agama source configuration: expected 'asset' to be a string");if(!function(t){return!!ae(t)&&("live"===t||"vod"===t)}(t.streamType))throw new k("Agama source configuration: expected 'streamType' to be 'live' or 'vod'");if(void 0!==t.serviceName&&!function(t){return!!ae(t)&&("live"===t||"svod"===t||"nvod"===t||"tvod"===t||"avod"===t||"catchuptv"===t)}(t.serviceName))throw new k("Agama source configuration: expected 'serviceName' to be 'live', 'svod', 'nvod','tvod', 'avod' or 'catchuptv'");if(void 0!==t.cdn&&!ae(t.cdn))throw new k("Agama source configuration: expected 'cdn' to be a string");if(void 0!==t.contentTitle&&!ae(t.contentTitle))throw new k("Agama source configuration: expected 'contentTitle' to be a string");if(void 0!==t.contentType&&!ae(t.contentType))throw new k("Agama source configuration: expected 'contentType' to be a string");if(void 0!==t.contentDescription&&!ae(t.contentDescription))throw new k("Agama source configuration: expected 'contentDescription' to be a string");return t}function gS(t){if(!ae(t.config))throw new k("Agama player configuration: expected 'config' to be a string");if(void 0!==t.logLevel&&!function(t){return!!ae(t)&&("info"===t||"debug"===t||"warning"===t||"error"===t||"fatal"===t)}(t.logLevel))throw new k("Agama player configuration: expected 'logLevel' to be 'info', 'debug', 'warning','error' or 'fatal'");if(void 0!==t.application&&!ae(t.application))throw new k("Agama player configuration: expected 'application' to be a string");if(void 0!==t.applicationVersion&&!ae(t.applicationVersion))throw new k("Agama player configuration: expected 'applicationVersion' to be a string");if(void 0!==t.userAccountID&&!ae(t.userAccountID))throw new k("Agama player configuration: expected 'userAccountID' to be a string");if(void 0!==t.deviceID&&!ae(t.deviceID))throw new k("Agama player configuration: expected 'deviceID' to be a string");return t}function wS(){let t="00000000-0000-0000-0000-000000000000",i=s.navigator,e=s.screen,n=""+i.mimeTypes.length;n+=i.userAgent.replace(/\D+/g,""),n+=i.plugins.length,n+=e.height||"",n+=e.width||"",n+=e.pixelDepth||"",n+=x.floor(1e3*x.random());let r=function(t){let i,e,s=0;if(0===t.length)return"0";for(i=0;i<t.length;i++)e=t.charCodeAt(i),s=(s<<5)-s+e,s|=0;return x.abs(s).toString().substring(0,12)}(n);return t=[t.slice(0,t.length-r.length),r].join(""),t}function AS(t,i,e){const s=i,n=function(t,i){return pa(i)?t.DsProtocol.APPLE_HLS:t.DsProtocol.MPEG_DASH}(t,s.type),r=function(t,i){let e=t.DsPlaylistType.VOD;"live"===i&&(e=t.DsPlaylistType.LIVE);return e}(t,e.streamType);return{asset:e.asset,playlistType:r,protocol:n,uri:s.src}}r(),function(t){t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected"}($r||($r={}));var Xa,sl,Go,vS,mS,Pa,pS=class{LQ(){this.Lo.rn("error",this.kQ),this.CQ(),this.xQ(),this.LU.OQ()}jQ(){this.Lo.zQ.oa.chromecast&&this.Lo.zQ.oa.chromecast.addEventListener("statechange",this.BQ)}xQ(){this.Lo.zQ.oa.chromecast&&this.Lo.zQ.oa.chromecast.removeEventListener("statechange",this.BQ)}RQ(){return void 0!==this.Lo.zQ.oa.chromecast&&this.Lo.zQ.oa.chromecast.state===$r.CONNECTED}cn(){this.Lo.rn("sourcechange",this.ro),this.Lo.rn("play",this.UQ),this.Lo.rn("ended",this.QQ),this.LQ(),this.LU.cn()}FQ(){this.YQ||(this.YQ=new uS(this.Lo,this.LU)),this.GQ||(this.GQ=new lS(this.Lo,this.LU)),this.VQ||(this.VQ=new cS(this.Lo,this.LU))}SU(){this.YQ&&(this.YQ.SU(),this.YQ.ln("IU",this.WQ)),this.GQ&&this.GQ.SU(),this.VQ&&this.VQ.SU()}CQ(){this.YQ&&(this.YQ.rn("IU",this.WQ),this.YQ.cn(),this.YQ=void 0),this.GQ&&(this.GQ.cn(),this.GQ=void 0),this.VQ&&(this.VQ.cn(),this.VQ=void 0)}nQ(t){this.VQ&&this.VQ.nQ(t)}HQ(){this.YQ&&this.YQ.YU()}QU(){this.YQ&&this.YQ.QU()}constructor(t,i,e){this.Lo=t,this.LU=i,this.ro=()=>{this.qQ(),this.QQ()},this.qQ=()=>{const t=this.Lo.Oa(),i=t&&t.analytics;this.XQ=function(t){void 0===t&&(t=[]);for(let i of t)if(fS(i))return _S(i)}(i)},this.QQ=()=>{this.LQ(),this.Lo.rn("play",this.UQ),!this.RQ()&&this.LU.ZQ()&&this.Lo.bt&&this.XQ&&(this.FQ(),this.Lo.q_||this.Lo.C_?this.Lo.ln("play",this.UQ):this.UQ())},this.UQ=()=>{this.Lo.bt&&this.XQ&&(this.LU.KQ(this.Lo.bt,this.XQ),this.SU(),this.nQ(this.XQ),this.jQ(),this.Lo.ln("error",this.kQ),this.Lo.rn("play",this.UQ))},this.BQ=()=>{this.RQ()&&this.LQ()},this.kQ=()=>{this.HQ(),this.LQ()},this.WQ=()=>{this.GQ&&this.GQ._Q()};const s=function(t){void 0===t&&(t=[]);for(const i of t)if(fS(i))return gS(i)}(e.analytics);s&&this.LU.JQ()&&(this.LU.zg(s),this.LU.ZQ()?(this.LU.$Q(),this.Lo.ln("sourcechange",this.ro),this.Lo.ln("ended",this.QQ)):console.warn("An error occurred while initializing an Agama EMP client. Please check your configuration"))}},yS="agama";function MS(t){switch(t){case"":return Xa.NONE;case"horizontal":return Xa.HORIZONTAL;case"vertical":return Xa.VERTICAL;default:throw new k}}function TS(t,i){if(i)return sl.PM360;if(null==t)return sl.NONE;switch(t){case"":return sl.NONE;case"360":return sl.PM360;case"180":return sl.PM180;default:throw new k("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}function NS(t){const i=function(t){if(!t||!ae(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}(null==t?void 0:t.useSeamlessPeriodSwitch);return{useSeamlessPeriodSwitch:i,needsTimescaleShifting:nt(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?Ee(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:nt(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:nt(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:nt(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards)}}function DS(t){return{discontinuityAlignment:IS(null==t?void 0:t.discontinuityAlignment)}}function IS(t){if(!t||!ae(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}function SS(t,i,e){const{useCredentials:s,crossOrigin:n}=function(t,i){let e=Te.Ov;t.useCredentials?e=Te.xv:t.crossOrigin&&(e=lw(t.crossOrigin));e===Te.Ov&&i&&i.vr&&i.vr[360]&&(e=Te.Cv);const s=e===Te.xv;return{useCredentials:s,crossOrigin:e}}(t,i);let r=t.liveOffset;z_(r)||(r=e&&z_(e.liveOffset)?e.liveOffset:void 0);let h=t.timeServer;z_(h)||(h=i&&z_(i.timeServer)?i.timeServer:void 0);let o=t.hlsDateRange;z_(o)||(o=e&&z_(e.hlsDateRange)?Boolean(e.hlsDateRange):void 0);return{crossOrigin:n,useCredentials:s,liveOffset:r,timeServer:h,hlsDateRange:o,experimentalRendering:Boolean(t.experimentalRendering),nativeUiRendering:Boolean(t.nativeUiRendering),lowLatency:Boolean(t.lowLatency),useNativePlayback:Boolean(t.useNativePlayback),useManagedMediaSource:Boolean(t.useManagedMediaSource),dash:z_(t.dash)?NS(t.dash):void 0,hls:z_(t.hls)?DS(t.hls):void 0,abr:Iw(gl(t.abr),null==e?void 0:e.abr),lcevc:nt(t.lcevc),ignoreEmbeddedTextTrackTypes:z_(t.ignoreEmbeddedTextTrackTypes)?Mw(t.ignoreEmbeddedTextTrackTypes):[]}}function et(t){if(null!==t)return t}function ES(t){const i={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:et(t.streamActivityMonitorID),adTagParameters:lt(t.adTagParameters)?t.adTagParameters:{},authToken:et(t.authToken),omidAccessModeRules:et(t.omidAccessModeRules)};if("vod"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.videoID&&i.contentSourceID)}(t)){const e=t.videoID,s=t.contentSourceID;return e?s?oe({},i,{availabilityType:"vod",videoID:e,contentSourceID:s}):void fe.Vv("A VOD DAI configuration was provided without valid contentSourceID which is required."):void fe.Vv("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.assetKey)}(t)){const e=t.assetKey;return e?oe({},i,{availabilityType:"live",assetKey:e}):void fe.Vv("A Live DAI configuration was provided without valid assetKey which is required.")}fe.Vv("A DAI configuration was provided without a valid availabilityType which is required.")}function bS(t){switch(t.integration){case"google-dai":return ES(t);case"imagine":return function(t){return{integration:t.integration}}(t);case"yospace":return function(t){var i;return{integration:t.integration,streamType:null!=(i=t.streamType)?i:void 0}}(t);default:return{integration:t.integration}}}function LS(t,i,e){const s=SS(t,i,e),n=et(t.src);let r=t.type;r||(r=t.src?jh(t.src):void 0);const h=function(t,i){let e;e=z_(t.contentProtection)?t.contentProtection:z_(t.drm)?t.drm:z_(i)&&z_(i.contentProtection)?i.contentProtection:z_(i)&&z_(i.drm)?i.drm:void 0;return kS(e)}(t,i);return oe({},s,{src:n,type:r,contentProtection:h,ssai:z_(t.ssai)?bS(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function kS(t){return VN(t)&&t.integration&&t.integration===MN?function(t){const i=ZN(Ci.xb,t),e=ZN(Ci.Cb,t),s=t[Ci.jb]&&ZN(Ci.jb,t);return oe({integration:"keyos",widevine:i,playready:e},s?{fairplay:s}:{})}(t):t}r(),r(),function(t){t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(Xa||(Xa={})),r(),function(t){t.NONE="",t.PM360="360",t.PM180="180"}(sl||(sl={})),r(),r(),r(),function(t){t.lB="auto",t.tF="always",t.iF="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only"}(Go||(Go={})),r(),function(t){t.lB="auto",t.eF="playlist",t.sF="media"}(vS||(vS={})),function(t){t.VERIZON_MEDIA="verizon-media",t.MEDIATAILOR="mediatailor"}(mS||(mS={})),r(),r(),r(),r(),r(),r(),function(t){t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event"}(Pa||(Pa={})),r();var CS="https://content.uplynk.com";function Uu(t){if(!t)return!0;const i=!function(t){return Aw(t)||rt(t)&&Aw(t[0])}(t.sources)||ml(t.sources),e=!t.ads||xS(t.ads),s=""!==t.poster&&!t.poster;return i&&e&&s}function xS(t){return!t||Yn(t)&&0===t.length}function OS(t){if(t&&t.sources)return jS(t.sources)}function jS(t){return ae(t)?jh(t):il(t)?t.type||t.src&&jh(t.src):rt(t)&&t.length>0?jS(t[0]):void 0}function zS(t){if(t&&t.sources)return PS(t.sources)}function PS(t){return ae(t)?t:il(t)?t.src:rt(t)&&t.length>0?PS(t[0]):void 0}function BS(t,i,e){return fw(t)?function(t,i,e){let s=oe({},vw(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:mS.VERIZON_MEDIA,id:"",prefix:CS,preplayParameters:{},playbackUrlParameters:{},assetType:Pa.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(ae(t))return t;if(rt(t)&&ae(t[0]))return t;if(function(t){return lt(t)&&ae(t.userId)&&(rt(t.externalId)||ae(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return Pa.CHANNEL;case"event":return Pa.EVENT;default:return Pa.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=Sg(t.contentProtected));t.assetInfo?s.assetInfo=Sg(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=P(t.prefix)||CS);return s.ping=function(t,i){let e=!1,s=!1,n=!1;i?(e=!!P_(i.adImpressions)&&i.adImpressions,s=!!P_(i.freeWheelVideoViews)&&i.freeWheelVideoViews,n=P_(i.linearAdData)?i.linearAdData:t!==Pa.ASSET):t!==Pa.ASSET&&(n=!0);return{adImpressions:e,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=US(s,t),s=FS(s,i,e),s=QS(s,t,e),s}(t,i,e):_w(t)?function(t,i,e){var s;return oe({},RS(t,i,e),{integration:mS.MEDIATAILOR,adParams:null!=(s=t.adParams)?s:{}})}(t,i,e):RS(t,i,e)}function RS(t,i,e){let s=mw();const n=i&&(i.contentProtection||i.drm);if(ae(t)){if(s.src=t,s.type=jh(t),n){const t=PI(n);s.contentProtection=kS(t)}}else if(il(t)||ga(t)){s.src=t.src,s.type=t.type||jh(t.src),s.isAdvertisement=t.isAdvertisement;const i=ww(t)?t.hesp:void 0;void 0!==i&&(s.hesp=i);_w(t)&&(s.integration=t.integration);const e=PI(t.contentProtection||t.drm||n);s.contentProtection=kS(e),t.ssai&&(s.ssai=bS(t.ssai)),s=US(s,t)}return s=FS(s,i,e),s=QS(s,t,e),s}function US(t,i){i.useCredentials?t.crossOrigin=Te.xv:i.crossOrigin&&(t.crossOrigin=lw(i.crossOrigin)),ae(i.timeServer)&&(t.timeServer=i.timeServer),i.liveOffset&&(t.liveOffset=i.liveOffset),i.hlsDateRange&&(t.hlsDateRange=i.hlsDateRange),i.lowLatency&&(t.lowLatency=Sg(i.lowLatency)),i.useNativePlayback&&(t.useNativePlayback=Sg(i.useNativePlayback)),i.useManagedMediaSource&&(t.useManagedMediaSource=Sg(i.useManagedMediaSource)),i.dash&&(t.dash=NS(i.dash)),i.hls&&(t.hls=DS(i.hls)),i.lcevc&&(t.lcevc=Sg(i.lcevc)),i.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=Mw(i.ignoreEmbeddedTextTrackTypes));const e=nt(i.experimentalRendering);void 0!==e&&(t.experimentalRendering=e);const s=nt(i.nativeUiRendering);return void 0!==s&&(t.nativeUiRendering=s),t}function QS(t,i,e){return t.abr=Iw(ae(i)?void 0:gl(i.abr),null==e?void 0:e.abr),t}function FS(t,i,e){var s;const n=i&&i.timeServer;return e&&e.liveOffset&&!z_(t.liveOffset)&&(t.liveOffset=e.liveOffset),e&&e.hlsDateRange&&!z_(t.hlsDateRange)&&(t.hlsDateRange=e.hlsDateRange),t.crossOrigin===Te.Ov&&(null==i||null==(s=i.vr)?void 0:s[360])&&(t.crossOrigin=Te.Cv),t.useCredentials=t.crossOrigin===Te.xv,ae(n)&&!t.timeServer&&(t.timeServer=n),t}function YS(t){const i={src:""};if(t&&t.src){if(i.src=P(t.src),"default"in t&&(i.default=Sg(t.default)),i.kind=function(t){const i=String(t||"").toLowerCase();return Km(i)?i:i?"metadata":"subtitles"}(t.kind),Qc(t.format)&&(i.format=t.format),"srclang"in t){const e=t.srclang;"string"==typeof e&&""!==e&&(i.srclang=e)}if("label"in t){const e=t.label;"string"==typeof e&&""!==e&&(i.label=e)}}return i}function GS(t,i){if(kt(t))try{return i.jR(t).nF(t)}catch(t){return}}function VS(t){return ae(t.sources)&&""!==t.sources||lt(t.sources)&&ae(t.sources.src)}function WS(t){return t.integration===KI.SPOTX&&!j(t.id)}function HS(t){return"freewheel"===t.integration}function rl(t,i,e){if(void 0===e&&(e=Dr.kb),Uu(t))return{sources:[mw()]};const s=Zr(t);if(s.sources=function(t,i,e){if(Aw(t))return[BS(t,i,e)];if(rt(t)&&Aw(t[0])){const s=[];for(const n of t)s.push(BS(n,i,e));return s}return[mw()]}(s.sources,s,i),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,i){if(!rt(t))return[];const e=[];for(let s of t)s=GS(s,i),s&&(VS(s)||WS(s)||HS(s))&&e.push(s);return e}(s.ads,e);0===t.length?delete s.ads:s.ads=t}const n=!ml(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!rt(t))return[];const i=[];for(let e of t)e=YS(e),""!==e.src&&i.push(e);return i}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=P(s.poster)),"streamType"in s&&(s.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(s.streamType)),"vr"in s&&(s.vr=function(t){const i=t||{};return i.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(i.stereoMode),{panoramaMode:TS(i.panoramaMode,Boolean(i[360])),stereoMode:i.stereoMode?MS(i.stereoMode):Xa.NONE,nativeVR:Boolean(i.nativeVR)}}(s.vr));if("analytics"in s||(null==i?void 0:i.analytics)){const t=yw(s.analytics),e=i&&i.analytics||[];s.analytics=function(t,i){const e=Zr(t);for(const s of i){const i=!t.some((t=>t.integration===s.integration));i&&s.integration!==yS&&e.push(s)}return e}(t,e)}return"mutedAutoplay"in s&&(s.mutedAutoplay=Lw(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=Ee(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}r();var qS=!(_n.QE&&!_n.YE),Tu=self.console;function XS(t){if(lt(t))try{return JSON.stringify(t)}catch(t){}return t}function ZS(t){return t.map(XS).join(" ")}function KS(t){const i=Tu&&Tu[t];return i?i.bind&&qS?i.bind(Tu):function(){for(var i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];Tu[t](ZS(e))}:void 0}var JS=KS("log")||xs,ji=KS("warn")||JS.bind(void 0,"WARNING:"),Nu=KS("error")||JS.bind(void 0,"ERROR:"),$S=(()=>{const t=Tu&&Tu.assert;return t?t.bind&&qS?t.bind(Tu):function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];Tu.assert(t,ZS(e))}:function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];t||Nu("Assertion failed:",...e)}})();r(),r(),r();var tE=function(){function t(t){this.rF=t}return t.prototype.hF=function(t){var i,e,s,n,r,h,o,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.rF.charAt(64);for(i=0;i<t.length;i+=4)e=(o=this.rF.indexOf(t.charAt(i))<<18|this.rF.indexOf(t.charAt(i+1))<<12|(r=this.rF.indexOf(t.charAt(i+2)))<<6|(h=this.rF.indexOf(t.charAt(i+3))))>>>16&255,s=o>>>8&255,n=255&o,a[i/4]=String.fromCharCode(e,s,n),64===h&&(a[i/4]=String.fromCharCode(e,s)),64===r&&(a[i/4]=String.fromCharCode(e));return a.join("")},t.prototype.oF=function(t,i){var e,s,n,r,h,o,a,u=[],c="";if((o=t.length%3)>0)for(;o++<3;)c+=this.rF.charAt(64),t+="\0";for(o=0;o<t.length;o+=3)s=(e=t.charCodeAt(o)<<16|t.charCodeAt(o+1)<<8|t.charCodeAt(o+2))>>18&63,n=e>>12&63,r=e>>6&63,h=63&e,u[o/3]=this.rF.charAt(s)+this.rF.charAt(n)+this.rF.charAt(r)+this.rF.charAt(h);return a=(a=u.join("")).slice(0,a.length-c.length),i||(a+=c),a},t.eh=new t(function(){var t,i,e,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(i=r[t],e=0;e<i.length;e+=1)s=i.charAt(e),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.aF=new t(function(t){return t.hF("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.eh)),t}();function _c(t){return"string"==typeof t}function iE(t){return"number"==typeof t}r(),r(),r();var eE={}.toString;var $t,sE=Array.isArray||function(t){return"[object Array]"===eE.call(t)};function dc(t,i){return sE(t)&&t.every(i)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb"}($t||($t={}));var bt,nE=_.keys($t).map((function(t){return $t[t]}));function rE(t){return-1!==nE.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview"}(bt||(bt={}));var hE,oE=_.keys(bt).map((function(t){return bt[t]}));function aE(t){return-1!==oE.indexOf(t)}function uE(t){try{var i=tE.aF.hF(t),e=JSON.parse(i);if(!function(t,i){var e,s=function(t){return"object"==typeof t&&null!==t}(t),n=_c(t.key),r=_c(t.customer_id),h=iE(t.generation_date),o=iE(t.expiration_date),a=dc(t.domains_page,_c),u=dc(t.domains_source,_c),c=dc(t.sdks,i?rE:_c),l=function(t){return"boolean"==typeof t}(t.send_impression);t.features?e=dc(t.features,i?aE:_c):(e=!0,t.features=[]);if(!(s&&n&&r&&h&&o&&a&&u&&c&&l&&e))return!1;return!0}(e,!1))throw new b("The provided license could not be decoded correctly.");return e}catch(t){throw new b("The provided license could not be decoded correctly.")}}function cE(){return hE||(hE={Fu:xp.href,uF:Ys.parent&&Ys.parent!==s,cF:dE()}),hE}var Js,lE=["http:","https:","ftp:","ws:","wss:"];function dE(){var t;try{if(null==Ys?void 0:Ys.top)return Ys.top.location.href}catch(t){}return null==Ys||null==(t=Ys.document)?void 0:t.referrer}!function(t){t[t.lF=0]="lF",t[t.dF=1]="dF",t[t.fF=2]="fF"}(Js||(Js={}));var fE,it=class{constructor(t,i,e,s,n=[],r="",h=Date.now(),o=[],a=!0){this._F=t,this.gF=i,this.wF=e,this.AF=s,this.vF=n,this.mF=r,this.pF=h,this.yF=o,this.MF=a}};!function(t){t.dF="expired",t.TF="invaliddomain",t.NF="invalidsource",t.DF="invalidfeature",t.Zo="error"}(fE||(fE={}));var _E=class t{IF(t,i){let e=[];Aw(t.sources)?e=[t.sources]:rt(t.sources)&&(e=t.sources),this.SF(t,e,i),this.EF(e,i)}SF(t,i,e){if(Uu(t)||0===e.wF.length||AE(e.wF))return;if(!i.every((t=>this.bF(t,e)))){const t="invalidsource",i=ci.LF(t);throw new ce(gE(t),i)}}EF(t,i){for(const e of t)il(e)&&ww(e)&&this.kF([bt.HESP],i)}CF(i){return this.xF(i.yF)&&this.OF(i)?t.jF(i.AF)?0:1:2}kF(t,i){for(const e of t)if(!na(i.vF,e)){const t="invalidfeature",i=ci.zF(t,e);throw new ce(gE(t),i)}}xF(t){return 0===t.length||t.some((t=>this.PF(t)))}PF(t){return"web"===function(t){switch(t){case $t.ANDROID:return gp.RS;case $t.ANDROIDTV:case $t.FIRETV:return gp.US;case $t.IOS:return gp.QS;case $t.TVOS:return gp.FS;case $t.CHROMECAST:case $t.CHROMECASTCAF:return gp.YS;case $t.THEOLIVEWEB:return gp.GS;default:return gp.PS}}(t)}static jF(t){const i=Number(new Date);return!!t&&i<=t}OF(t){return!(this.BF&&0!==t.gF.length&&!AE(t.gF))||!!(this.BF&&this.RF(t.gF)&&this.UF(t.gF))}RF(t){return vE(this.VL.Fu,t)}UF(t){if(!this.VL.uF)return!0;if(this.QF)return!0;const i=this.FF();return!!i&&vE(i,t)}FF(){if(!this.VL.uF)return;const t=sd.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.VL.cF?this.VL.cF:void 0}bF(i,e){return!!t.YF(i,e.wF)}static YF(t,i){return vE(this.GF(t),i)}static GF(t){return ae(t)?t:il(t)&&t.src||""}constructor(t,i,e){this.QF=t,this.VF=i,this.VL=e,this.BF=pE(this.VL)}};function gE(t){switch(t){case"invaliddomain":return le.LICENSE_INVALID_DOMAIN;case"invalidsource":return le.LICENSE_INVALID_SOURCE;case"expired":return le.LICENSE_EXPIRED;case"invalidfeature":return le.LICENSE_INVALID_FEATURE;case"error":return le.LICENSE_ERROR}}function wE(t,i){let e=t,s=i;if(!e)return!1;if(s=s.trim(),"*"===s)return!0;if(e=e.replace(/\.+$/,""),s===e)return!0;const n="\\.",r="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",h="(\\*|"+r+")",o=new RegExp("ip-range\\("+h+n+h+n+h+n+h+"\\)"),a=s.match(o),u=t=>"*"===t?"("+r+")":t;if(null!==a&&5===a.length){const t=new RegExp("^"+a[1]+n+u(a[2])+n+u(a[3])+n+u(a[4])+"$");return null!==e.match(t)}return s="."+s,-1!==e.indexOf(s,e.length-s.length)}function AE(t){return t.some((t=>"*"===t))}function vE(t,i){const e=fe.Ah(t);if(!mE(e))return!0;for(const s of i){if(wE(e.hostname,s))return!0;if(wE(nw(t),s))return!0}return!1}function mE(t){return-1!==lE.indexOf(t.protocol)}function pE(t){const i=fe.Ah(t.Fu);return mE(i)&&!function(t){return wE(t.hostname,"localhost")}(i)&&!function(t){return wE(t.hostname,"theoplayer.doubleclick.net")}(i)}var re,ci=class{static zF(t,i){return"The requested feature '"+i+"' is not available with the license for this player."}static LF(t){return"invaliddomain"===t?this.WF:"invalidsource"===t?this.HF:"expired"===t?this.qF:"invalidfeature"===t?this.XF:this.ZF}};function yE(t){const i=[t.MD,t.KF,t.JF];switch(t.KF){case 1:i.push(t.tA);break;case 4:i.push(t.E_),i.push(t.lt);break;case 5:i.push(t.lt)}return i}ci.ZF="The license for this player is invalid.",ci.qF="The usage license for this video player has expired.",ci.WF="The current domain is incompatible with the license for this player.",ci.HF="The provided video source is incompatible with the license for this player.",ci.XF="The requested feature is not available with the license for this player.",r(),r(),function(t){t[t.tY=1]="tY",t[t.iY=4]="iY",t[t.eY=5]="eY"}(re||(re={})),r();var nl=new Array(256);for(let t=0;t<256;t+=1)nl[t]=(t<16?"0":"")+t.toString(16);function Rs(){const t=Yo(),i=(4294967296*x.random()|0)+t&3029421624,e=(4294967296*x.random()|0)+t&3595553209,s=(4294967296*x.random()|0)+t&1130486254,n=(4294967296*x.random()|0)+t&1284287105;return nl[255&i]+nl[i>>>8&255]+nl[i>>>16&255]+nl[i>>>24&255]+"-"+nl[255&e]+nl[e>>>8&255]+"-"+nl[e>>>16&15|64]+nl[e>>>24&255]+"-"+nl[63&s|128]+nl[s>>>8&255]+"-"+nl[s>>>16&255]+nl[s>>>24&255]+nl[255&n]+nl[n>>>8&255]+nl[n>>>16&255]+nl[n>>>24&255]}function ME(t){return Lh(t.replace(/-/g,""))}function Fu(){return fe.h_()}r(),r(),r();var TE,NE="theoplayer-session-id";function DE(){if(!TE){const t=yi.Jb(NE);t?TE=t:(TE=Rs(),yi.yz(NE,TE))}return TE}r(),r();var IE=/[^\x00-\x7E]/g;function SE(t){return"\\u"+va(t.charCodeAt(0).toString(16),4,"0")}var EE="https://license.theoplayer.com";function bE(t){const i=function(t){const i=[];return function(t,i,e){return JSON.stringify(t,i,e).replace(IE,SE)}(t,((t,e)=>{if(lt(e)){if(-1!==i.indexOf(e))return null;i.push(e)}return e}))}(function(t){return[t.sY,t.MC,t._F,t.DT,t.nY,t.rY,t.hY.map(yE)]}(t));return tE.aF.oF(i)}var LE=class{get hY(){return this.wR}oY(){return Boolean(this.nY)}get nY(){return this.aY}async uY(t){if(!(await this.lY.cY()).MF)return;const i={KF:re.tY,JF:Yo(),tA:t};await this.qU(i)}async dY(t,i){const e={KF:re.iY,JF:Yo(),E_:i,lt:t};await this.qU(e)}async fY(t){const i={KF:re.eY,JF:Yo(),lt:t};await this.qU(i)}async qU(t){const i=await this.lY.cY();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this._Y.oF(i._F)&&t.KF!==re.eY||(t.KF===re.tY?this.gY():this.oY()||this.gY(),t.MD=this.Lk++,this.wR.push(t),!function(t){return t===re.tY||t===re.eY}(t.KF)?this.wR.length>this.wY&&await this.AY():await this.vY())}async vY(t){for(void 0===t&&(t=!1);this.wR.length>0;)await this.AY(t)}async mY(t){const i=await this.lY.cY();return{sY:Yo(),MC:DE(),_F:this._Y.oF(i._F)||"dev",DT:this.iC,nY:this.aY,rY:this.pY,hY:t}}async AY(t){void 0===t&&(t=!1);const i=this.wR.splice(0,this.yY),e=await this.mY(i);t?this.MY(e):this.TY(e),this.NY=Fu()}async TY(t){const i=bE(t),e=new nc({Fu:EE,AS:i,NS:!1,pS:Rt.Eu,vS:{"Content-Type":ne.Uj},YI:4e3,mS:Kc.POST});try{const t=await this.LS.BI(e);await t.zj()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+i}}MY(t){const i=bE(t);this.LS.MY({Fu:EE,AS:i,gP:ne.Uj})}gY(){this.oY()&&this.vY(),this.aY=Rs(),this.Lk=0}cn(){us.DY(this.IY),m(this.SY),this.vY()}constructor(t,i,e,s=tE.eh,n=0,r=1){this.iC=t,this.LS=i,this.lY=e,this._Y=s,this.wY=n,this.yY=r,this.wR=[],this.aY=null,this.NY=0,this.pY="unknown",this.Lk=0,this.EY=()=>{Fu()-this.NY>6e4&&this.vY()},this.IY=()=>{this.vY(!0)},us.bY(this.IY),this.SY=v(this.EY,6e4)}};r(),r(),r();var kE=0;var CE=c,Hr=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,fh=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;Hr&&fh||(Hr=function(t){const i=Fu(),e=x.max(0,16-(i-kE)),s=u((()=>t(i+e)),e);return kE=i+e,s},fh=CE),Hr=Hr.bind(self),fh=fh.bind(self);var xE=_n.QE||_n.Va&&_n.$E<13;function OE(t,i,e){const s=t.getImageData(i,e,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var xr,jE=class{get oa(){var t;return null!=(t=this.Ua)?t:this.Ua=function(t){return{drawImage(i){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];return t.LY(i,...s)},texImage2D:(i,e,s,n,r,h)=>t.kY(i,e,s,n,r,h),requestVideoFrameCallback:i=>t.CY(i),cancelVideoFrameCallback:i=>t.xY(i)}}(this)}LY(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];const n=this.OY;return void 0!==n&&(t.drawImage(n,...e),!0)}kY(t,i,e,s,n,r){let h=this.OY;return void 0!==h&&(xE&&(h=this.jY(h)),t.texImage2D(i,e,s,n,r,h),!0)}CY(t){const i=this.zY++,e=this.PY(t,i);return this.BY.set(i,{RY:t,UY:e}),i}xY(t){const i=this.BY.get(t);void 0!==i&&(this.BY.delete(t),i.UY())}PY(t,i){const e=this.OY;if(void 0===e)return xs;if(e instanceof HTMLVideoElement&&e.requestVideoFrameCallback){const s=e.requestVideoFrameCallback(((e,s)=>{this.BY.delete(i),t(e,s)}));return()=>e.cancelVideoFrameCallback(s)}{let e;const s=n=>{this.QY()?(this.BY.delete(i),this.FY=!1,t(n,void 0)):e=Hr(s)};return e=Hr(s),()=>fh(e)}}QY(){return(!this.t.q_||this.FY)&&!this.t.gg&&this.t.cg>=ow.Uv}jY(t){let i=this.YY;void 0===i&&(i=h.createElement("canvas"),this.YY=i);const e=i.getContext("2d"),s=this.t,n=s.Mg,r=s.vg,o=i.width,a=i.height;e.clearRect(0,0,i.width,i.height),o===n&&a===r||(i.width=n,i.height=r),e.drawImage(t,0,0,n,r);let u=!1;return n>0&&OE(e,n-1,0)&&(i.width=o,u=!0),r>0&&OE(e,0,r-1)&&(i.height=a,u=!0),u&&e.drawImage(t,0,0,n,r),i}cn(){this.BY.forEach((t=>t.UY())),this.BY.clear(),this.t.rn(t.SA,this.GY),this.t.rn(t.FA,this.VY),this.OY=void 0,this.YY=void 0}constructor(i){this.OY=void 0,this.Ua=void 0,this.YY=void 0,this.BY=Ye(),this.zY=1,this.FY=!0,this.VY=()=>{this.FY=!0},this.GY=()=>{this.OY=this.t.xg(),this.BY.forEach(((t,i)=>{t.UY(),t.UY=this.PY(t.RY,i)}))},this.t=i,this.t.ln(t.SA,this.GY),this.t.ln(t.FA,this.VY),this.GY()}};r(),r(),r(),(xr||(xr={})).an="dimensionchange";var zE=class extends gg{constructor(t,i){super(xr.an),this.width=t,this.height=i}};r(),r();var PE,BE=class{constructor(t,i){this.we=t,this.RY=i}},RE=class extends BE{get pu(){return this.WY}get fu(){return this.HY}cn(){this.qY.disconnect()}constructor(t,i){super(t,i),this.WY=0,this.HY=0,this.XY=t=>{if(t.length>0){const i=t[t.length-1].contentRect;this.HY=i.width,this.WY=i.height,this.RY(this.HY,this.WY)}},this.qY=new Ys.ResizeObserver(this.XY),this.qY.observe(this.we)}};r(),r();var UE=["Webkit","Moz","O","ms"],QE=(()=>{let t=!1;try{if(void 0!==Ys&&"function"==typeof Ys.addEventListener){const i=_.defineProperty({},"passive",{get(){t=!0}});Ys.addEventListener("testPassiveEventSupport",xs,i),Ys.removeEventListener("testPassiveEventSupport",xs,i)}}catch(t){}return t})(),FE=Qt();function YE(t){return FE.has(t)||FE.set(t,function(t){const i=(PE||(PE=Ys&&Ys.document&&Ys.document.createElement("span")),PE);if(!i||!i.style)return t;if(void 0!==i.style[t])return t;const e=t.charAt(0).toUpperCase()+t.slice(1);for(const t of UE){const s=t+e;if(void 0!==i.style[s])return s}return t}(t)),FE.get(t)}function GE(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.bottom="0",i.top="0",i.overflow="scroll",i.zIndex="-1",i.visibility="hidden"}function VE(t){const i=t.style;i.position="absolute",i.left="0",i.top="0",i[YE("transition")]="0s"}var WE=class extends BE{cn(){fh(this.ZY),this.ZY=0,this.KY.removeEventListener("scroll",this.JY),this.$Y.removeEventListener("scroll",this.JY),ei(this.tG),s&&s.removeEventListener("resize",this.iG)}get pu(){return this.we.getBoundingClientRect().height||this.WY||0}get fu(){return this.we.getBoundingClientRect().width||this.HY||0}constructor(t,i,e){super(t,i),this.ZY=0,this.HY=NaN,this.WY=NaN,this.eG=void 0,this.Wn=()=>{const t=1e5;this.sG.style.width=t+"px",this.sG.style.height=t+"px",this.KY.scrollLeft=t,this.KY.scrollTop=t,this.$Y.scrollLeft=t,this.$Y.scrollTop=t,0===this.$Y.scrollTop&&Hr(this.Wn)},this.nG=()=>{const t=this.fu,i=this.pu;this.RY(t,i),this.HY=t,this.WY=i,this.Wn(),this.ZY=0},this.JY=()=>{if(this.ZY)return;const t=this.fu,i=this.pu;t===this.HY&&i===this.WY||(this.ZY=Hr(this.nG))},this.iG=()=>{this.eG||(this.eG=u(this.rG,66))},this.rG=()=>{this.eG=void 0,this.hG()},this.hG=()=>{this.JY()};const n=function(t,i){return s.getComputedStyle(t,void 0).getPropertyValue(i)||t.style[i]}(t,"position");e||"static"!==n||(t.style.position="relative");const r=h.createElement("div");this.tG=r,this.KY=h.createElement("div"),this.sG=h.createElement("div"),this.$Y=h.createElement("div"),this.oG=h.createElement("div"),GE(this.KY),GE(this.$Y),VE(this.sG),function(t){VE(t),t.style.width="200%",t.style.height="200%"}(this.oG),r.appendChild(this.KY),r.appendChild(this.$Y),this.KY.appendChild(this.sG),this.$Y.appendChild(this.oG),t.appendChild(r),this.KY.addEventListener("scroll",this.JY),this.$Y.addEventListener("scroll",this.JY),s&&s.addEventListener("resize",this.iG),this.JY()}},HE=class extends i{dn(t){this.qY||("function"==typeof Ys.ResizeObserver?this.qY=new RE(this.we,this.XY):this.qY=new WE(this.we,this.XY,t))}cn(){this.Bo(),this.qY&&(this.qY.cn(),this.qY=void 0)}get pu(){return this.qY?this.qY.pu:0}get fu(){return this.qY?this.qY.fu:0}constructor(t){super(),this.qY=void 0,this.XY=(t,i)=>{this.mo(new zE(t,i))},this.we=t}};r(),r();var kc=class extends gg{constructor(){super(Pc.Ko)}};r();var qE=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(let i of t)if(i[1]in h)return{aG:i[0],uG:i[1],cG:i[2],lG:i[3],Qe:i[4],dG:i[5]}}();r();var XE=class extends gg{constructor(){super(Pc.ea)}},ZE=class t extends i{static Xo(t){return Boolean(qE&&h[qE.lG]&&qE.aG in t)}uo(){const t=this.we[qE.aG]();t&&t.then?t.then(this.fG,this._G):(h.removeEventListener(qE.dG,this._G),h.addEventListener(qE.dG,this._G))}yo(){const t=h[qE.uG]();t&&t.then?t.then(this.fG,this._G):(h.removeEventListener(qE.dG,this._G),h.addEventListener(qE.dG,this._G))}LR(){const t=this.cs,i=this.we===h[qE.cG];this.cs=i,t!==i&&this.mo(new kc)}kR(){this.mo(new Du)}cn(){this.Bo(),h.removeEventListener(qE.Qe,this.fG),h.removeEventListener(qE.dG,this._G)}constructor(i){super(),this.cs=!1,this.fG=()=>this.LR(),this._G=()=>this.kR(),this.we=i,this.Go=t.Xo(i),h.addEventListener(qE.Qe,this.fG),this.LR()}},KE=class t extends i{static Xo(t){return _n.Va&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}uo(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("fullscreen")?_n.Va?requestAnimationFrame((()=>this.we.webkitSetPresentationMode("fullscreen"))):this.we.webkitSetPresentationMode("fullscreen"):this.we.webkitEnterFullscreen()}yo(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("inline")?this.we.webkitSetPresentationMode("inline"):this.we.webkitExitFullscreen()}LR(){const t=this.cs;let i;i=this.we.webkitPresentationMode?"fullscreen"===this.we.webkitPresentationMode:Boolean(this.we.webkitDisplayingFullscreen),this.cs=i,t!==i&&this.mo(new kc)}cn(){this.Bo(),this.we.removeEventListener("webkitbeginfullscreen",this.fG),this.we.removeEventListener("webkitendfullscreen",this.fG),this.we.removeEventListener("webkitpresentationmodechanged",this.fG)}constructor(i){super(),this.cs=!1,this.fG=()=>this.LR(),this.we=i,this.Go=t.Xo(i),this.we.addEventListener("webkitbeginfullscreen",this.fG),this.we.addEventListener("webkitendfullscreen",this.fG),this.we.addEventListener("webkitpresentationmodechanged",this.fG),this.LR()}},JE=class extends i{get Go(){return!!this.gG&&this.gG.Go}get cs(){return this.SR}uo(){this.gG?this.gG.uo():this.mo(new Du)}yo(){for(const t of this.wG)t.cs&&t.yo()}AG(t){this.gG=t}vG(t){this.wG.push(t),t.ln(Pc.Ko,this.LR),t.ln(Pc.Zo,this.Ds),this.LR()}mG(t){Et(this.wG,t),t.rn(Pc.Ko,this.LR),t.rn(Pc.Zo,this.Ds)}pG(){for(const t of this.wG)if(t.cs)return!0;return!1}Wn(){this.gG=void 0,this.SR=!1;const t=this.wG.slice();for(const i of t)this.mG(i),i.cn();this.LR()}cn(){this.Bo(),this.Wn()}constructor(...t){super(...t),this.wG=[],this.gG=void 0,this.SR=!1,this.LR=()=>{const t=this.SR,i=this.pG();t!==i&&(this.SR=i,this.mo(new kc))}}},$E=class extends i{get Go(){return!!this.yG&&this.MG.Go}get cs(){return this.MG.cs}uo(){this.yG&&this.MG.uo()}yo(){this.MG.yo()}TG(){this.MG.ln([Pc.Ko,Pc.ea],this.LR),this.MG.ln(Pc.Zo,this.Ds)}NG(){this.MG.rn([Pc.Ko,Pc.ea],this.LR),this.MG.rn(Pc.Zo,this.Ds)}Ln(){const t=this.MG,i=this.t.Cg();if(t===i)return;this.ta=!0;const e=this.cs,s=this.Go;e&&this.yo(),this.NG(),this.MG=i,this.TG(),e&&!this.cs&&this.Go?this.uo():this.yo(),this.ta=!1,s!==this.Go&&this.mo(new XE),e!==this.cs&&this.mo(new kc)}cn(){this.Bo(),this.NG(),this.t.rn(t.DA,this.DG)}constructor(i,e){super(),this.ta=!1,this.DG=()=>this.Ln(),this.LR=t=>{this.ta||this.mo(t)},this.t=i,this.yG=e,this.MG=new Ro,this.TG(),this.t.ln(t.DA,this.DG),this.Ln()}};r(),r(),r(),r(),r(),r(),r(),M_(),r();var tb,ib=class extends Jo{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=t}};function eb(t){return function(t){return new f({start(i){for(const e of t)i.enqueue(e);i.close()}})}([t])}function sb(t){return eb(function(t){return new T(t)}(t))}function oi(t,i){return function(t,i){let e=i;const s=t.getReader(),n=new No,r=()=>{h();const t=new sa;s.cancel(t).catch(xs),n.sL(t)},h=()=>{e&&(e.Jf(r),e=void 0)};e&&(e.Wf?r():e.Kf(r));const o=[],a=t=>t.done?(h(),Promise.resolve(o)):(o.push(t.value),Promise.resolve(s.read()).then(a));return Promise.resolve(s.read()).then(a).then((t=>{h(),n.eL(t)}),(t=>{h(),n.sL(t)})),n.nL}(t,i).then((t=>Vh(t).buffer))}function nb(t,i){let e=i;const{readable:s,writable:n}=new xh,r=n.getWriter(),h=()=>{e&&e.s_()};return r.closed.then(h,h),t.then((t=>(e=void 0,r.releaseLock(),t.pipeTo(n).catch(xs))),(t=>(e=void 0,r.releaseLock(),n.abort(t).catch(xs)))),s}function rb(t){const{readable:i,writable:e}=new xh;return t.pipeTo(e,{preventCancel:!0}).catch((i=>{let e;e=Yn(i)?i[0]===i[1]||Oi(i[0])&&Oi(i[1])?i[0]:new ib(i):i,t.cancel(e).catch(xs)})),i.tee()}function hb(t){return Aa(new T(t))}function ob(t){return Xh(t).buffer}r(),function(t){t[t.iS=0]="iS",t[t.IG=1]="IG"}(tb||(tb={}));var ab="content-type",ub="text/plain;charset=UTF-8",Ru=class{vj(t){return this.kS(t).then(JSON.parse)}xO(t,i){switch(t){case Rt.$I:return this.zj(i);case Rt.tS:return this.vj(i);case Rt.iS:return this.SG();case Rt.Eu:return this.kS(i);default:throw new k}}};function cb(t,i,e){if(t instanceof Ru)return t;if(t instanceof f)return function(t,i){return new db({$w:0,SG:t,gP:lb(i)})}(t,e);const s=lb(e),n=Promise.resolve(t).then((t=>function(t,i){if(t){if("string"==typeof t)return{$w:Rt.Eu,AS:t,gP:i||ub};if(t instanceof ArrayBuffer||_a(t))return{$w:Rt.$I,AS:mb(t),gP:i};if(kt(t)||Yn(t))return{$w:Rt.tS,AS:t,gP:i};throw new k("Unsupported BodyInit type")}return{$w:Rt.Eu,AS:null,gP:i}}(t,s)));return new db({$w:1,nL:n,EG:i})}function lb(t){return(t.get(ab)||"").toLowerCase()}var db=class t extends Ru{get bG(){return this.LG}kG(){return this.CG.nL}kS(t){return this.xG(fb,t)}vj(t){return this.xG(gb,t)}zj(t){return this.xG(Ab,t)}SG(){return this.OG(function(t){return 0===t.$w?t.SG:nb(t.nL.then(vb).then(sb),t.EG)}(this.jG))}xG(t,i){if(this.LG)return Promise.reject(new k("Already used"));this.LG=!0;const e=t(this.jG,i);return this.CG.n_(e.then(xs)),e}OG(t){if(this.LG)throw new k("Already used");if(t.locked)throw new k("Body stream is locked");this.LG=!0;const i=new xh,e=Promise.resolve(t.pipeTo(i.writable));return this.CG.n_(e),i.readable}zG(t){this.jG=t,1===t.$w&&t.nL.catch(xs)}BG(){if(this.LG)throw new k("Already used");const i=function(t){if(0===t.$w){const[i,e]=t.SG.tee();return[{$w:t.$w,SG:i,gP:t.gP},{$w:t.$w,SG:e,gP:t.gP}]}{const[i,e]=t.EG.r_();return[{$w:t.$w,nL:t.nL,EG:i},{$w:t.$w,nL:t.nL,EG:e}]}}(this.jG),e=i[0],s=i[1];return this.zG(e),new t(s)}constructor(t){super(),this.LG=!1,this.CG=new No,this.CG.nL.catch(xs),this.zG(t)}};function fb(t,i){return 0===t.$w?oi(t.SG,i).then(hb):(i&&t.EG.n_(i),ui(t.nL.then(_b),t.EG))}function _b(t){switch(t.$w){case Rt.Eu:return Promise.resolve(t.AS||"");case Rt.$I:return Promise.resolve(t.AS).then(hb);case Rt.tS:return Promise.resolve(t.AS).then(JSON.stringify)}}function gb(t,i){return 0===t.$w?fb(t,i).then(JSON.parse):(i&&t.EG.n_(i),ui(t.nL.then(wb),t.EG))}function wb(t){return t.$w===Rt.tS?Promise.resolve(t.AS):_b(t).then(JSON.parse)}function Ab(t,i){return 0===t.$w?oi(t.SG,i):(i&&t.EG.n_(i),ui(t.nL.then(vb),t.EG))}function vb(t){switch(t.$w){case Rt.$I:return Promise.resolve(t.AS);case Rt.Eu:case Rt.tS:return _b(t).then(ob)}}function mb(t){return t instanceof ArrayBuffer?t:Ge(xe(t)).buffer}var pb=class extends Ru{get bG(){return this.UG.bG}kG(){return this.UG.kG()}kS(t){return this.UG.kS(t)}vj(t){return this.UG.vj(t)}zj(t){return this.UG.zj(t)}SG(){return this.UG.SG()}BG(){return this.UG.BG()}constructor(t){super(),this.UG=t}};function mc(t){return t.FI>=200&&t.FI<=299||304===t.FI}var Hh=class t extends pb{JM(t){return this.xO(this.pS,t)}Lm(){return new t({JM:this.BG(),BI:this.BI},this)}constructor(t,i){let e,s,n,r,h;i?(e=i.vS,s=i.pS,n=i.FI,r=i.mj,h=i.QG):(e=[],s=Rt.Eu,n=200,r="OK",h=!1);const o=t.BI,a=new Ko(t.vS||e),u=t.pS||s,c=t.CS||(i&&i.BI===o?i.CS:o.Fu),l=i?i.UG:null;super(cb(void 0!==t.JM?t.JM:l,t.EG||new Po,a)),this.vS=a,this.BI=o,this.CS=c,this.pS=u,this.FI=void 0!==t.FI?t.FI:n,this.mj=void 0!==t.mj?String(t.mj):r,this.QG=t.QG||h}},yb=class{BI(i){const e=function(i){return new Hh({JM:null,vS:{},BI:i,CS:i.Fu,pS:i.pS,FI:0,mj:t.zA})}(new nc(i));return Promise.resolve(e)}MY(t){}cn(){}};var Mb=class t{static get FG(){return t.YG||(t.YG=new t(new yb)),t.YG}BI(t){const i=this.GG(t);return this.VG.BI(i)}MY(t){return this.VG.MY(this.WG(t))}GG(i){let e=new nc(i);if(!this.HG){const i=t.qG(e.Fu);e=new nc({Fu:i},e)}return e}WG(i){let e=i.Fu;return this.HG||(e=t.qG(e)),{Fu:e,AS:i.AS}}static qG(t){return fe.XG&&Zg(t,"http://")?t.replace(":","s:"):t}cn(){this.VG.cn()}constructor(t,i=!0){this.VG=t,this.HG=i}};function Tb(t){let i;return{get url(){return t.Fu},get method(){return t.mS},get headers(){return i||(i=t.vS.eS()),i},get body(){return t.AS},get useCredentials(){return t.NS},get type(){return t.$w},get subType(){return t.MS},get mediaType(){return t.TS},get responseType(){return t.pS}}}function Nb(t){switch(t.toLowerCase()){case"arraybuffer":return Rt.$I;case"json":return Rt.tS;case"stream":return Rt.iS;default:return Rt.Eu}}function Db(t){switch(t.toUpperCase()){case"POST":return Kc.POST;case"PUT":return Kc.PUT;case"DELETE":return Kc.DELETE;case"HEAD":return Kc.HEAD;case"OPTIONS":return Kc.OPTIONS;default:return Kc.GET}}function Ib(t){switch(t.toLowerCase()){case"manifest":return zu.rS;case"segment":return zu.hS;case"preload-hint":return zu.oS;case"content-protection":return zu.aS;default:return zu.Hv}}function Sb(t){switch(t.toLowerCase()){case"initialization-segment":return jo.uS;case"fairplay-license":return jo.cS;case"fairplay-certificate":return jo.lS;case"widevine-license":return jo.dS;case"widevine-certificate":return jo.fS;case"playready-license":return jo._S;case"clearkey-license":return jo.gS;case"aes128-key":return jo.wS;default:return jo.Hv}}function Eb(t){switch(t.toLowerCase()){case"audio":return yn.Gv;case"video":return yn.Yv;case"text":return yn.Eu;case"image":return yn.Wv;default:return yn.Hv}}Mb.YG=void 0,r(),r(),r();var bb=class{get ZG(){return this.KG.nL}get oa(){return this.Ua||(this.Ua=this.JG()),this.Ua}get $G(){return this.tV}get iV(){return!this.tV}get eV(){return this.sV>0}get UI(){return this.QI}_T(){this.tV=!0,this.KG.eL(null)}nV(){this.KG.sL(new ib(this.rV))}hV(t){if(!this.iV)throw new k("Cannot respond more than once");if(!lt(t))throw new k("Expected valid response");this.QI=this.oV(t),this._T()}aV(){try{const t=this.uV(this.oa);t?this.cV(t):this.eV||this.$G||this._T()}catch(t){this.rV.push(t),this.nV()}}cV(t){if(this.$G)throw new b("Request has been redirected or a response already exists");if(B_(t))this.lV(t);else{if("function"!=typeof t)throw new k("Expected promise or function");{const i=new No,e=t=>{t?i.sL(t):i.eL(void 0)};try{const s=t(e);B_(s)&&i.n_(s)}catch(t){i.sL(t)}this.lV(i.nL)}}}async lV(t){try{this.sV++,await t,this.sV--,this.eV||this.$G||(this.rV.length?this.nV():this._T())}catch(t){this.sV--,this.rV.push(t),this.eV||this.$G||this.nV()}}constructor(t,i){this.dV=t,this.uV=i,this.KG=new No,this.rV=[],this.Ua=void 0,this.tV=!1,this.QI=void 0,this.sV=0}},Lb=class t extends bb{get AS(){return this.fV}get vS(){return this.dV.vS}get BI(){return this.dV.BI}get UI(){return this.QI}get FI(){return this.dV.FI}get mj(){return this.dV.mj}get Fu(){return this.dV.CS}static _V(t,i,e){const s=void 0===t.body?e:t.body;return new Hh({JM:s,BI:i.BI,pS:i.BI.pS,vS:t.headers,FI:t.status,mj:t.statusText,CS:t.url,QG:!0},i)}JG(){return function(t){let i;const e=Tb(t.BI);return{get closed(){return!t.iV},get request(){return e},get url(){return t.Fu},get status(){return t.FI},get statusText(){return t.mj},get headers(){return i||(i=t.vS.eS()),i},get body(){return t.AS},respondWith:i=>t.hV(i),waitUntil:i=>t.cV(i)}}(this)}oV(i){return t._V(i,this.dV,this.fV)}constructor(t,i,e){super(t,i),this.fV=e,this.aV()}};r();var kb=class extends bb{get AS(){return this.dV.AS}get iV(){return this.gV&&!this.tV}get vS(){return this.dV.vS}get mS(){return this.dV.mS}get wV(){return this.AV}get UI(){return this.QI}get pS(){return this.dV.pS}get YI(){return this.dV.YI}get yS(){return this.dV.yS}get i_(){return this.dV.i_}get $w(){return this.dV.$w}get MS(){return this.dV.MS}get TS(){return this.dV.TS}get Fu(){return this.dV.Fu}get NS(){return this.dV.NS}get DS(){return this.dV.DS}JG(){return function(t){let i;return{get url(){return t.Fu},get method(){return t.mS},get headers(){return i||(i=t.vS.eS()),i},get body(){return t.AS},get closed(){return!t.iV},get useCredentials(){return t.NS},get type(){return t.$w},get subType(){return t.MS},get mediaType(){return t.TS},get responseType(){return t.pS},redirect:i=>t.vV(i),respondWith:i=>t.hV(i),waitUntil:i=>t.cV(i)}}(this)}oV(t){const i=this.dV.AS,e=new Hh({JM:i,vS:{},BI:this.dV,CS:this.dV.Fu,pS:this.dV.pS,FI:200,mj:"OK"});return Lb._V(t,e,i)}vV(t){if(!this.iV)throw new k("Cannot redirect, already redirected or has a response");let i;i=ae(t)?{url:t}:t,this.AV=function(t,i){return new nc({Fu:void 0===t.url?i.Fu:t.url,mS:void 0!==t.method?Db(t.method):void 0,vS:t.headers,AS:t.body,NS:t.useCredentials,$w:void 0!==t.type?Ib(t.type):void 0,MS:void 0!==t.subType?Sb(t.subType):void 0,TS:void 0!==t.mediaType?Eb(t.mediaType):void 0,pS:void 0!==t.responseType?Nb(t.responseType):void 0},i)}(i,this.dV),this._T()}constructor(t,i,e){super(t,i),this.AV=void 0,this.gV=e,this.aV()}};var Cb=class extends Mb{mV(t){this.pV.mV(t)}yV(t){this.pV.yV(t)}MV(t){this.pV.MV(t)}$U(t){this.pV.$U(t)}sQ(t){this.pV.sQ(t)}constructor(t,i=!0){const e=new xb(t);super(e,i),this.pV=e}},xb=class{async BI(t){let i;try{i=await this.TV(t,t.i_)}catch(i){if(i instanceof M)return await this.NV(i,t.i_);throw i}if(i=await this.DV(i,t.i_),mc(i))return i;throw new ve(i)}MY(t){return this.VG.MY(t)}async TV(t,i){Pi(i);let e,s=t;for(const t of this.SV.slice()){Pi(i);const n=new kb(s,t,!e);if(!n.$G)try{await n.ZG}catch(t){0;continue}n.wV&&!e?s=n.wV:n.UI&&!e&&(e=n.UI)}return e||this.VG.BI(s)}async NV(t,i){let e;e=t instanceof ve?t.UI:new Hh({JM:null,BI:t.BI,FI:0,mj:""});const s=await this.DV(e,i);if(s===e)throw t;if(mc(s))return s;throw new ve(s)}async DV(t,i){let e=t;for(const t of this.EV.slice()){Pi(i);const s=await Promise.resolve(e.Lm().JM(i)),n=new Lb(e,t,s);if(!n.$G)try{await n.ZG}catch(t){0;continue}e=n.UI||e}return e}mV(t){this.SV.unshift(t)}yV(t){this.SV.push(t)}MV(t){Et(this.SV,t)}$U(t){this.EV.unshift(t)}sQ(t){Et(this.EV,t)}cn(){this.VG.cn(),Ri(this.SV),Ri(this.EV)}constructor(t){this.SV=[],this.EV=[],this.VG=t}};r();var qa,Ob=class{get oa(){return this.Ua||(this.Ua=function(t){return{addRequestInterceptor(i){t.mV(i)},removeRequestInterceptor(i){t.MV(i)},addResponseInterceptor(i){t.$U(i)},removeResponseInterceptor(i){t.sQ(i)}}}(this)),this.Ua}mV(t){this.LS.mV(t)}MV(t){this.LS.MV(t)}$U(t){this.LS.$U(t)}sQ(t){this.LS.sQ(t)}constructor(t){this.LS=t}},jb=class extends i{get oa(){return this.Ua||(this.Ua=function(t){return{get online(){return t.W_},get estimator(){return function(t){return{get bandwidth(){return t.zz},get roundTripTime(){return t.Pz}}}(t.bV)},setEstimator(i){t.LV(function(t){if(!t)return;return{get zz(){return Eg(t.bandwidth)},get Pz(){return Eg(t.roundTripTime)},Bz:i=>function(t){if(!t)return;return{kV(i){t.markRequestStart(i)},CV(i){t.markResponseStart(i)},xV(i,e){t.markResponseData(i,e)},OV(i){t.markResponseEnd(i)}}}(t.createMeasurer(Tb(i)))}}(i))},addRequestInterceptor(i){t.mV(i)},removeRequestInterceptor(i){t.MV(i)},addResponseInterceptor(i){t.$U(i)},removeResponseInterceptor(i){t.sQ(i)},addEventListener(i,e){t.ln(i,e)},removeEventListener(i,e){t.rn(i,e)}}}(this)),this.Ua}get W_(){return this.jV.W_}get bV(){return this.oR.bV}LV(t){this.oR.LV(t)}mV(t){this.LS.mV(t)}MV(t){this.LS.MV(t)}$U(t){this.LS.$U(t)}sQ(t){this.LS.sQ(t)}cn(){this.Bo(),this.jV.rn(t.PA,this.zV),this.jV.rn(t.zA,this.PV)}constructor(i,e,s){super(e),this.jV=i,this.LS=e,this.oR=s,this.zV=t=>{this.mo(t)},this.PV=t=>{this.mo(t)},this.jV.ln(t.PA,this.zV),this.jV.ln(t.zA,this.PV)}};r(),r(),r(),function(t){t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth"}(qa||(qa={})),r();function zb(t,i,e,s,n,r){const h=[];let o=t-x.max(r,1),a=t+n;if(i&&e){const t=It(e,1,5),s=i-t;o=x.min(o,s);const n=i+e+t;a=x.max(a,n)}0!==o&&s.RB(0,o)&&h.push([0,o]);return s.RB(a,1/0)&&h.push([a,1/0]),h}function fc(t){return t instanceof b&&"QuotaExceededError"===t.name}r();var Pb={type:qa.BANDWIDTH};function Bb(t){const i=Zr(Pb);return ae(t)?i.type=Rb(t):lt(t)&&function(t){switch(t){case qa.PERFORMANCE:case qa.QUALITY:case qa.BANDWIDTH:return!0;default:return!1}}(t.type)&&(i.type=Rb(t.type)),lt(t)&&lt(t.metadata)&&(i.metadata=function(t){const i={},e=Ee(t.bitrate);return j(e)||(i.bitrate=e),i}(t.metadata)),i}function Rb(t){switch(t){case"bandwidth":return qa.BANDWIDTH;case"performance":return qa.PERFORMANCE;case"quality":return qa.QUALITY}}r();var Ub=class extends gg{constructor(t){super("BV"),this.RV=t}};r();var Qb=class extends gg{constructor(t){super("QV"),this.FV=t}};r();var Fb=class extends gg{constructor(t){super("YV"),this.GV=t}},Yb=class extends i{VV(t){this.WV=t}get HV(){switch(this.qV.type){case qa.PERFORMANCE:return 0;case qa.QUALITY:return 1/0;case qa.BANDWIDTH:return this.qV.metadata&&void 0!==this.qV.metadata.bitrate?this.qV.metadata.bitrate:ca.kb.Iz();default:return ca.kb.Iz()}}get oa(){return this.Ua}get FV(){return this.qV}set FV(t){this.qV=t,this.mo(new Qb(t))}get RV(){return this.XV}set RV(t){this.XV=t,this.mo(new Ub(t))}get ZV(){return x.min(this.XV,this.KV)}get GV(){return this.JV}set GV(t){this.JV=t,this.mo(new Fb(t))}get $V(){return this.KV}get bV(){var t;return null!=(t=this.tW)?t:this.WV.fP}LV(t){this.tW=t}iW(t){let i=x.min(t,.8*this.KV);if(i=x.max(10,i),this.KV===i)return!1;const e=this.ZV;this.KV=i;const s=this.ZV;return s!==e&&this.mo(new Ub(s)),!0}get eW(){return this.sW}set eW(t){this.sW=t}constructor(...t){super(...t),this.Ua=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.FV)},set strategy(i){t.FV=Bb(i)},get targetBuffer(){return t.RV},set targetBuffer(i){const e=Ee(i);j(e)||(t.RV=e)},get bufferLookbackWindow(){return t.GV},set bufferLookbackWindow(i){const e=Ee(i);j(e)||(t.GV=e<=0?30:e)},get maxBufferLength(){return t.$V},get clearBufferWhenSettingTargetQuality(){return t.eW},set clearBufferWhenSettingTargetQuality(i){t.eW=Sg(i)}}}(this),this.qV=Pb,this.XV=20,this.JV=30,this.KV=1/0,this.sW=!1,this.tW=void 0}};r(),r();var Gb=class extends Ha{ha(){return new Vb}constructor(){super("fw")}},Vb=class extends gg{constructor(){super("change")}};r(),r();var Lu=class extends i{cn(){this.Bo();for(const t of this.wR)this.nW.rn(t,this.rW)}constructor(t,i,e){super(e),this.rW=t=>{wg(t)&&yc((()=>{this.mo(t.oa)}))},this.nW=t,this.wR=i;for(const t of this.wR)this.nW.ln(t,this.rW)}},ma=class extends ha{cn(){this.Bo(),this.nW.A_(this.rW)}constructor(t,i){super(i),this.rW=t=>{wg(t)&&yc((()=>{this.mo(t.oa)}))},this.nW=t,this.nW.d_(this.rW)}};var Wb=class extends ha{get Fm(){return this.$m}set Fm(t){if(this.Ym<=t)throw new b("Start time of a clip should be smaller than the end time.");this.$m!==t&&(this.$m=t,this.mo(new Gb))}get Ym(){return this.ep}set Ym(t){if(t<=this.Fm)throw new b("End time of a clip should be larger than the start time.");this.ep!==t&&(this.ep=t,this.mo(new Gb))}get oa(){return this.Ua||(this.Ua=function(t){let i,e={get startTime(){return t.Fm},set startTime(i){t.Fm=i},get endTime(){return t.Ym},set endTime(i){t.Ym=i},addEventListener(t,e){i.ln(t,e)},removeEventListener(t,e){i.rn(t,e)}};return i=new ma(t,e),e}(this)),this.Ua}Wn(){0===this.$m&&this.ep===1/0||(this.$m=0,this.ep=1/0,this.mo(new Gb))}hW(){return new Ki([this.Fm,this.Ym],[!0,!0])}constructor(...t){super(...t),this.$m=0,this.ep=1/0}};r();var Hb=class i extends _g{L_(t){const i=this.oW.hW().EB(t);super.L_(i),this.aW()}x_(){return super.x_()||this.uW}get cW(){return this._g().length?this._g():this.oW.hW().ks()}_g(){return Ki.mn(super._g()).yn(this.oW.hW()).ks()}Bg(){this.x_()?this.L_(this.cW.start(0)):this.lW(),super.Bg(),this.aW()}async ca(t,i){Pi(i),this.uW=!1,this.oW.Wn(),await super.ca(t,i)}cn(){return this.oW.rn("fw",this.dW),this.p_.rn(t.XA,this.fc),this.fW(),super.cn()}Wg(i){switch(i.type){case t.YA:return this.mo(i),this._W(),!0;case t.FA:case t.MA:return this.mo(i),this.gW(),!0;case t.NA:if(this.wW)return!0}return super.Wg(i)}get wW(){return this.oW.Ym<this.ct}fW(){this.AW&&(fh(this.AW),this.AW=void 0)}aW(){const t=this.E_,e=this.wW&&t>=this.oW.Ym-i.Wl;this.uW&&!e?(this.uW=!1,this.q_&&this.Bg()):this.uW||!e||this.gg||this.vW||(this.uW=!0,this.mo(new Ds(t)),this.Pg())}lW(){if(this.ct===1/0)return;const t=this.cW,e=Ki.mn(t).EB(this.E_);Ua(this.E_,e,i.Wl)||this.L_(e)}constructor(e,s){super(e),this.uW=!1,this.AW=void 0,this.vW=!1,this.dW=()=>{this.lW(),this.aW()},this.fc=()=>{this.fW(),this.aW();this.wW&&this.E_>=this.oW.Ym-i.mW&&!this.C_&&(this.AW=Hr(this.fc))},this._W=()=>{this.vW=!0},this.gW=()=>{this.vW&&(this.vW=!1,this.aW())},this.oW=s,this.oW.ln("fw",this.dW),this.p_.ln(t.XA,this.fc)}};Hb.mW=1,Hb.Wl=.001,r();var qb=class{get pW(){return this.yW}set pW(t){this.yW=t}constructor(){this.yW=!1}};r();var Xb=class extends _g{x_(){return!this.yW.pW&&super.x_()}Pg(){this.MW=!0,super.Pg()}Bg(){this.MW=!1,super.Bg()}Wg(i){if(this.yW.pW)switch(i.type){case t.NA:return this.E_=0,this.MW||(this.gg?this.TW=!0:this.Bg()),!0;case t.FA:this.TW&&(this.TW=!1,this.Bg());break;case t.yh:if(this.TW||super.x_())return!0}return super.Wg(i)}constructor(t,i){super(t),this.TW=!1,this.MW=!1,this.yW=i}};r(),r();var Zb=class{get oa(){return this.Ua}get $v(){return this.Lo.Q_.$v}get im(){return this.Lo.Q_.im}get Jv(){return this.Lo.Q_.Jv}get NW(){throw new b("Not implemented")}get DW(){throw new b("Not implemented")}get nm(){return this.Lo.Q_.nm}get tm(){return this.Lo.Q_.tm}get hm(){return this.Lo.Q_.hm}constructor(t){this.Lo=t,this.Ua=function(t){return{get currentBandwidthEstimate(){return t.im},get corruptedVideoFrames(){return t.$v},get droppedVideoFrames(){return t.Jv},get totalBytesLoaded(){return t.nm},get bufferedSegments(){return t.hm}}}(this)}};function Kb(t){if(!t||!Fs(t))return{Jv:0,$v:0,tm:0,im:0,nm:0,hm:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const i=t.getVideoPlaybackQuality();return{Jv:i.droppedVideoFrames,$v:i.corruptedVideoFrames||0,tm:i.totalVideoFrames}}return{Jv:t.webkitDroppedFrameCount||0,$v:0,tm:t.webkitDecodedFrameCount||0}}r(),r();var Jb=class extends Ha{ha(){return new $b}constructor(){super("IW")}},$b=class extends gg{constructor(){super("castingchange")}};r();var tL=class extends i{get SW(){var t,i;return(null==(t=this.EW)?void 0:t.SW)||(null==(i=this.bW)?void 0:i.SW)||!1}get LW(){return this.EW}get kW(){return this.bW}xW(t){this.EW=t,this.OW(t)}jW(t){this.bW=t,this.OW(t)}OW(t){t.ln("statechange",this.zW)}PW(t){t.rn("statechange",this.zW)}get oa(){return this.Ua||(this.Ua=function(t){let i;const e={get casting(){return t.SW},get airplay(){var i;return null==(i=t.LW)?void 0:i.oa},get chromecast(){var i;return null==(i=t.kW)?void 0:i.oa},addEventListener(t,e){i.ln(t,e)},removeEventListener(t,e){i.rn(t,e)}};return i=new Lu(t,["IW"],e),e}(this)),this.Ua}cn(){this.Bo(),this.EW&&(this.PW(this.EW),this.EW=void 0),this.bW&&(this.PW(this.bW),this.bW=void 0)}constructor(...t){super(...t),this.EW=void 0,this.bW=void 0,this.BW=!1,this.Ua=void 0,this.zW=()=>{const t=this.BW,i=this.SW;t!==i&&(this.BW=i,this.mo(new Jb))}}};r(),r();var tn=class{static async RW(t,i){try{const e=new nc({Fu:t,pS:Rt.Eu,mS:Kc.GET}),s=await i.BI(e);return(await s.JM()).trim()}catch(t){return void Oi(t)}}static UW(t){try{const i=uE(t);return new it(i.key,i.domains_page,i.domains_source,i.expiration_date,i.features,i.customer_id,i.generation_date,i.sdks,i.send_impression)}catch(t){throw new ce(le.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static QW(t){void 0===t&&(t=tE.eh),fe.Vv("The baked-in license is used. Please update the configuration with your license.");const i=t.hF("F2b-iL'[FL[S"),e=JSON.parse('["F$(:_L50F|aY"]').map((i=>t.hF(i))),s=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map((i=>t.hF(i))),n=Number(new Date(Number(t.hF('COD|aHpHa:p3Ceo3Co""')))),r=JSON.parse("[]").map((i=>t.hF(i)));return new it(i,e,s,n,r)}static convertLicenseToDummyLicense(t){return new it(t._F,t.gF,t.wF,864e13,t.vF,t.mF,Date.now(),t.yF,t.MF)}};r();var vt=class t{static bQ(){return t.kb||(t.kb=iL.sx()?new iL:new G),t.kb}static iL(i){t.bQ().iL(i)}static EQ(){t.bQ().EQ()}static Jb(i){return t.bQ().Jb(i)}static yz(i,e){t.bQ().yz(i,e)}static FW(i){const e=t.Jb(i);if(void 0!==e)return S(e)}static YW(i){return"true"===t.Jb(i)}};vt.kb=void 0;var iL=class extends vt{static sx(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}iL(t){self.localStorage.removeItem(t)}EQ(){self.localStorage.clear()}Jb(t){var i;return null!=(i=self.localStorage.getItem(t))?i:void 0}yz(t,i){self.localStorage.setItem(t,i)}},eL="https://validate.theoplayer.com/1/",sL=72e5,nL=x.floor(14399999*x.random()-sL),rL="THEOplayer.license",hL=class{async GW(){const t=await this.VW(this.WW.license,this.WW.licenseUrl);this.lY.HW(t)}async VW(t,i){let e,s=i;t?e=tn.UW(t):s||(e=tn.QW()),s||(s=eL+e._F);const n=this.qW();let r;if(e&&(r=this.XW.CF(e),r===Js.lF)){if(this.ZW(e.AF)&&this.ZW(null==n?void 0:n.AF)){const t=await this.KW(s);if(t)return t}return e}if(n){if(this.XW.CF(n)===Js.lF){if(this.ZW(null==n?void 0:n.AF)){const t=await this.KW(s);if(t)return t}return n}vt.iL(rL)}const h=await tn.RW(s,this.LS);let o;if(h){o=tn.UW(h);if(this.XW.CF(o)===Js.lF)return vt.yz(rL,h),o;vt.iL(rL)}else if(!this.BF&&e&&r===Js.dF&&s===eL+e._F)return tn.convertLicenseToDummyLicense(e);if(!e&&!o)throw new ce(le.LICENSE_ERROR,"The given license is invalid!");this.JW(null!=e?e:o,new ce(le.LICENSE_ERROR,"The given license is invalid!"))}async IF(t){let i=await this.lY.cY();if(this.ZW(i.AF)){var e;const t=null!=(e=this.WW.licenseUrl)?e:eL+i._F,s=await this.KW(t);s&&(this.lY.HW(s),i=s)}try{const e=this.XW.CF(i);if(e===Js.fF){const t=fE.TF;throw new ce(gE(t),ci.LF(t))}if(e===Js.dF){const t=fE.dF;throw new ce(gE(t),ci.LF(t))}this.XW.IF(t,i)}catch(t){this.$W(t)}}async kF(t){const i=await this.lY.cY();try{this.XW.kF(t,i)}catch(t){this.$W(t)}}async KW(t){try{const i=await tn.RW(t,this.LS);if(void 0===i)return;const e=tn.UW(i);return this.XW.CF(e)===Js.lF?(vt.yz(rL,i),e):void 0}catch(t){return}}ZW(t){return!t||Number(new Date)+2592e5+nL>=t}qW(){const t=vt.Jb(rL);if(t)return tn.UW(t)}JW(t,i){this.lY.HW(t),this.$W(i)}$W(t){throw Nu(t.message),this.tH.fY(t.message),t}constructor(t,i,e,s,n,r){this.LS=t,this.XW=i,this.tH=e,this.lY=s,this.WW=n,this.VL=r,this.BF=pE(r)}};r();var oL=class{HW(t){this.iH=t,this.eH.eL()}get sH(){return this.iH}async cY(){return this.iH?Promise.resolve(this.iH):(await this.eH.nL,this.iH)}constructor(){this.eH=new No}};r(),r();var aL=class extends Ha{ha(){return new uL}constructor(){super("fw")}},uL=class extends gg{constructor(){super("change")}};function cL(t){let i;const e={get fontFamily(){return t.nH},set fontFamily(i){t.nH=i},get fontColor(){return t.rH},set fontColor(i){t.rH=i},get fontSize(){return t.hH},set fontSize(i){t.hH=i},get backgroundColor(){return t.oH},set backgroundColor(i){t.oH=i},get windowColor(){return t.aH},set windowColor(i){t.aH=i},get edgeStyle(){return t.uH},set edgeStyle(i){t.uH=i},get marginTop(){return t.cH},set marginTop(i){t.cH=i},get marginBottom(){return t.lH},set marginBottom(i){t.lH=i},get marginLeft(){return t.dH},set marginLeft(i){t.dH=i},get marginRight(){return t.fH},set marginRight(i){t.fH=i},addEventListener(t,e){const s=Ls(t,P);i.ln(s,e)},removeEventListener(t,e){const s=Ls(t,P);i.rn(s,e)}};return i=new H(e),t.ln(["fw"],(t=>i.mo(t.oa))),e}r();var lL={nH:void 0,rH:void 0,hH:void 0,oH:void 0,aH:void 0,uH:void 0,_H:void 0,cH:void 0,lH:void 0,dH:void 0,fH:void 0},Vt="THEOplayer.textTrackStyle.",dL=class t extends i{get gH(){return this.wH}get nH(){return this.wH.nH}set nH(t){this.Ln({nH:t})}get rH(){return this.wH.rH}set rH(t){this.Ln({rH:t})}get hH(){return this.wH.hH}set hH(t){this.Ln({hH:t})}get oH(){return this.wH.oH}set oH(t){this.Ln({oH:t})}get aH(){return this.wH.aH}set aH(t){this.Ln({aH:t})}get uH(){return this.wH.uH}set uH(t){this.Ln({uH:t})}get _H(){return this.wH._H}get cH(){return this.wH.cH}set cH(t){this.Ln({cH:t})}get lH(){return this.wH.lH}set lH(t){this.Ln({lH:t})}get fH(){return this.wH.fH}set fH(t){this.Ln({fH:t})}get dH(){return this.wH.dH}set dH(t){this.Ln({dH:t})}get oa(){return this.Ua||(this.Ua=cL(this)),this.Ua}Ln(i){this.wH=oe({},this.wH,i),t.AH(this.wH),this.mo(new aL)}static vH(){let t=oe({},lL);return t.nH=vt.Jb(Vt+"fontFamily")||t.nH,t.rH=vt.Jb(Vt+"fontColor")||t.rH,t.hH=vt.Jb(Vt+"fontSize")||t.hH,t.oH=vt.Jb(Vt+"backgroundColor")||t.oH,t.aH=vt.Jb(Vt+"windowColor")||t.aH,t.uH=vt.Jb(Vt+"edgeStyle")||t.uH,t}static AH(t){vt.yz(Vt+"fontFamily",t.nH||""),vt.yz(Vt+"fontColor",t.rH||""),vt.yz(Vt+"fontSize",t.hH||""),vt.yz(Vt+"backgroundColor",t.oH||""),vt.yz(Vt+"windowColor",t.aH||""),vt.yz(Vt+"edgeStyle",t.uH||"")}constructor(){super(),this.Ua=void 0,this.wH=t.vH()}};function fL(t,i){var e,s;t.style.marginLeft=(null!=(e=i.dH)?e:0)+"px",t.style.marginRight=(null!=(s=i.fH)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}r(),r(),r(),r();var ii,_L=[t.bh,t.yh,qo._v,t.XA,t.BA,t.xA,t.YA,t.FA,t.NA,t.RA,t.ZA,t.yA,qo._w,t.QA,Bi.Zo,sr.TA,sr.qb,t.vA,t.AA,t.KA,t.bA,t.kA,t.SA,t.DA],gL={mH:!1};function wL(t){return t.vd.$w===Pe.iO}r(),(ii||(ii={})).pH="yH";var Ho,on=["yH"];!function(t){t[t.MH=0]="MH",t[t.iS=1]="iS",t[t.TH=2]="TH"}(Ho||(Ho={})),r(),r();var AL,vL=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"];(AL||(AL={})).TU="NH";var mL=class extends i{get ht(){throw new b("Not implemented")}get vd(){return this.Mx}get aP(){return this.Fx}get rt(){throw new b("Not implemented")}async DH(t,i){const e=await this.KC.ZC(t.Pb,i),s=await e.UC();return await this.IH(s),s}SH(t){const i=this.OC;return i?0!==t.wP.length&&t.wP.some((t=>t.jC.Pb===i.jC)):0!==this.Mx.wP.length?t.wP.some((t=>this.Mx.wP.some((i=>t.jC===i.jC)))):0===t.wP.length||!this.EH}bH(t){return this.LH.bH(t),this.Mx=t,Promise.resolve()}kH(t){return!1}async Xf(){this.Bo(),this.Fx.removeEventListener("loadedmetadata",this.CH);for(const t of vL)this.Fx.removeEventListener(t,this.xH);await this.OH.cn(),this.jH(),await this.LH.Wn(),await this.zH(void 0)}PH(t){t!==this.BH&&(this.BH=t,t?this.RH.eL(void 0):this.RH=new No)}IH(t){return this.OH.Lx((()=>this.zH(t)))}async zH(t){if(t&&!this.Fx.src)throw new Yr(le.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.Fx.src)throw new Yr(le.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this.BH&&await this.RH.nL;const i=this.OC;i&&(await i.BC(this.Fx),this.OC=void 0),t&&(await t.dn(this.Fx),this.OC=t)}ca(t){return this.OH.Lx((()=>this.UH(t)))}UH(t){this.PH(!1);const i=this.sP.Z_;if(function(t){if(void 0!==s.ManagedMediaSource&&t instanceof s.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&_n.Va&&_n.$E>=17}(this.Fx))try{this.Fx.srcObject=t}catch(i){this.Fx.src=URL.createObjectURL(t)}else this.Fx.src=URL.createObjectURL(t);else this.Fx.src=t;this.sP.Z_=i}QH(t){return this.OH.Lx((()=>this.FH(t)))}FH(t){this.UH(t),this.Fx.load()}jH(){this.PH(!1),cN(this.Fx)}async YH(){this.OC&&await this.OC.Wn()}constructor(t,i,e,s){super(),this.BH=!1,this.RH=new No,this.EH=!1,this.OH=new ro,this.OC=void 0,this.CH=()=>{this.EH=!0},this.xH=()=>{this.PH(!0)},this.Mx=t,this.sP=i,this.Fx=i.aP,this.LH=e,this.KC=s,this.Fx.addEventListener("loadedmetadata",this.CH);for(const t of vL)this.Fx.addEventListener(t,this.xH)}};var pL=class extends mL{get M_(){return Ki.mn(this.Fx.buffered)}get ct(){return this.Fx.duration}get GH(){const t=this.ct;if(!isFinite(t))return!1;const i=this.M_;if(0===i.U)return!1;return t-i.bn(i.U-1)<Dc}get hg(){return this.Fx.preload}set hg(t){this.Fx.preload=t}get fg(){return Ki.mn(this.Fx.seekable)}get VH(){return this.M_}get WH(){if(Fs(this.Fx)&&(this.Fx.videoWidth>0||this.Fx.videoHeight>0))return this.M_}async VV(){const t=this.vd;switch(t.vP){case Te.Cv:case Te.xv:this.Fx.setAttribute("crossorigin",t.vP);break;case Te.Ov:default:this.Fx.removeAttribute("crossorigin")}void 0!==t.hg?this.Fx.preload=t.hg:this.Fx.preload=Al.jz,void 0!==t.mP?this.Fx.title=t.mP:oN(this.Fx),await this.ca(t.tA),this.LH.Pn(this,t)}SH(t){return!1}bH(t){return Promise.resolve(void 0)}async Xf(){oN(this.Fx),await super.Xf()}static HH(t,i){return!!i.canPlayType&&Boolean(i.canPlayType(t.gP))}};r();var _i=class extends gg{constructor(i){super(t.BA),this.currentTime=i}};r();var yL,ie=class extends gg{constructor(){super(t.xA)}};r(),r(),(yL||(yL={})).qH="XH";var ML=class extends gg{constructor(t){super("XH"),this.ZH=t}},TL=class extends i{get KH(){return this.JH}$H(t,i){const e=new Ki([t,i]);this.JH=this.JH.xB(e),this.mo(new ML(e))}tq(t,i){this.JH=this.JH.jB(new Ki([t,i]))}Wn(){this.JH=Ki.KB()}cn(){this.Bo()}constructor(...t){super(...t),this.JH=Ki.KB()}};r(),r(),r();var NL=class{start(t){this.eH=t,this.iq()&&this.nq()}pull(){this.zd.length>0?this.rq():this.hq=!0,this.iq()&&this.nq()}cancel(t){return Ri(this.zd),this.Pd=0,this.hq=!1,this.Md.cancel(t)}rq(){if(0===this.zd.length)return;const t=this.zd;this.zd=[],this.Pd=0,this.hq=!1,this.eH.enqueue(t)}iq(){if(this.hq)return!0;return this.oq-this.Pd>0}nq(){if(this.aq)return;const t=this.Md.read().then(this.uq).catch(this.cq);this.aq=t;const i=()=>{this.aq===t&&(this.aq=void 0)};t.then(i,i)}constructor(t,{size:i=(()=>1),highWaterMark:e=1}){this.zd=[],this.Pd=0,this.eH=void 0,this.hq=!1,this.aq=void 0,this.uq=t=>t.done?(this.rq(),void this.eH.close()):(this.zd.push(t.value),this.Pd+=this.lq(t.value),this.hq&&this.rq(),this.iq()?this.Md.read().then(this.uq):void 0),this.cq=t=>{this.rq(),this.eH.error(t)},this.Md=t.getReader(),this.lq=i,this.oq=e}};r(),r(),r(),r();var DL,IL=class{dq(t){this.fq.push(t),this.Xm+=t.byteLength}_q(t){if(this.Xm<=t)return this.gq();const i=this.fq;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.slice(0,s);if(s<i.length&&e<t){const r=t-e;0,n.push(iv(i[s],0,r)),e+=r}return{fq:n,Xm:e}}wq(t){const i=this._q(t);return 1===i.fq.length?i.fq[0]:aA(i.fq,i.Xm)}gq(){return{fq:this.fq,Xm:this.Xm}}Aq(t){if(this.Xm<=t)return this.vq();const i=this.fq;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.splice(0,s);if(i.length>0&&e<t){const s=t-e;0,n.push(iv(i[0],0,s)),i[0]=iv(i[0],s),e+=s}return this.Xm-=e,{fq:n,Xm:e}}mq(t){const i=this.Aq(t);return 1===i.fq.length?i.fq[0]:aA(i.fq,i.Xm)}vq(){const t=this.gq();return this.fq=[],this.Xm=0,t}pq(){const t=1===this.fq.length?this.fq[0]:aA(this.fq,this.Xm);return this.fq=[],this.Xm=0,t}constructor(){this.fq=[],this.Xm=0}};!function(t){t[t.yq=0]="yq",t[t.Mq=1]="Mq",t[t.Tq=2]="Tq"}(DL||(DL={}));var Gu=class{Nq(t,i){}Dq(){}Iq(t){this.zd.dq(t),this.Sq(!1)}Eq(){this.Sq(!0)}bq(){return 0!==this.ba||0!==this.zd.Xm}Sq(t){for(;0!==this.zd.Xm;){if(!t&&this.Lq>this.zd.Xm)return;switch(this.ba){case 0:this.kq(t);break;case 1:this.Cq(t);break;case 2:this.xq(t)}}}Oq(){this.ba=0,this.Lq=8}kq(t){const i=Ao(this.zd.wq(this.Lq)),e=new Vr,s=Mi.mT(i,e);if(!s._T)return this.Lq=s.yT,void(t&&this.Lq>this.zd.Xm&&this.jq(this.zd.Xm));const n=s.pT.$w;let r=s.pT.Xm;0===r&&(r=1/0),this.Nq(n,r),this.zq(n)?this.Pq(r):this.jq(r)}Pq(t){this.ba=1,this.Lq=t}Cq(t){const i=Ao(this.zd.mq(this.Lq)),e=new Vr,s=Mi.gT(i,e,!t);if(!s._T)throw new mm(e.qu);this.Dq(),this.Bq(s.wT),this.Oq()}jq(t){this.ba=2,this.Lq=0,this.Rq=t}xq(t){const i=this.zd.Aq(this.Rq);this.Rq-=i.Xm;for(const t of i.fq)this.Uq(t);(0===this.Rq||t&&this.Rq===1/0)&&(this.Dq(),this.Oq())}constructor(){this.zd=new IL,this.ba=0,this.Lq=0,this.Rq=0,this.Oq()}};function SL(t){return t instanceof je}function EL(t){return t instanceof Ie}function bL(t){return t instanceof RM||t instanceof ju}function LL(t){return t instanceof qs}function kL(t){return t instanceof Gy}function CL(t){return t instanceof CM}function xL(t){return t instanceof LM}function OL(t){return t instanceof ZM}function jL(t){return t instanceof zs}function zL(t){return t instanceof WM}function PL(t){return t instanceof Fo}function BL(t,i){const e=Gr(t.boxes,zL);if(e&&e.flags.baseDataOffsetPresent)e.baseDataOffset=e.baseDataOffset.add(i);else for(const e of t.boxes)e instanceof Fo&&e.flags.dataOffsetPresent&&(e.dataOffset=e.dataOffset+i)}r();var RL=class extends Gu{start(t){this.eH=t}transform(t){this.Iq(t)}flush(){this.Eq()}zq(t){return t===xv.iM||t===xv.CM||t===xv.FM}Bq(t){const i=this.Qq(t);this.eH.enqueue(i)}Uq(t){this.eH.enqueue(t)}Qq(t){const i=xe(t.JM.JM);switch(t.$w){case"moov":return this.Fq(i);case"sidx":return this.Yq(i);case"moof":return this.Gq(i)}return i}get Vq(){if(void 0===this.Wq)throw new b("Expected to have found a movie header timescale.");return this.Wq}Hq(t){const i=this.qq.get(t);if(void 0===i)throw new b("Expected to have found a media header timescale for track ID "+t+".");return i}Fq(t){const i=fT(t);for(let t=0;t<i.boxes.length;t++){const e=i.boxes[t];e instanceof jM?i.boxes[t]=this.Xq(e):e instanceof zM?i.boxes[t]=this.Zq(e):e instanceof Ie&&this.Kq(e)}for(const t of i.boxes)t instanceof CM&&this.Jq(t);return i.serialize().join()}Xq(t){this.Wq=t.timescale;const i=Cc(Se.fromNumber(t.duration,!0),this.Vq,this.$q);return 0!==i.getHighBits()?this.Zq(function(t){return new zM({creation:Se.fromNumber(t.creationTime,!0),modification:Se.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:Se.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.$q,t.duration=i.toInt(),t)}Zq(t){return this.Wq=t.timescale,t.timescale=this.$q,t.duration=Cc(t.duration,this.Vq,this.$q),t}Kq(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof RM?(i=s.trackId,t.boxes[e]=this.tX(s)):s instanceof ju?(i=s.trackId,t.boxes[e]=this.iX(s)):s instanceof qs?this.eX(s,i):s instanceof iM&&this.sX(s)}}tX(t){const i=Cc(Se.fromNumber(t.duration,!0),this.Vq,this.$q);return 0!==i.getHighBits()?this.iX(function(t){return new ju({creation:Se.fromNumber(t.creationTime,!0),modification:Se.fromNumber(t.modificationTime,!0),duration:Se.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=i.toInt(),t)}iX(t){return t.duration=Cc(t.duration,this.Vq,this.$q),t}eX(t,i){for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof aM?t.boxes[e]=this.nX(s,i):s instanceof uM&&(t.boxes[e]=this.rX(s,i))}}nX(t,i){this.qq.set(i,t.timescale);const e=Cc(Se.fromNumber(t.duration,!0),t.timescale,this.$q);return 0!==e.getHighBits()?this.rX(function(t){return new uM({creation:Se.fromNumber(t.creationTime,!0),modification:Se.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:Se.fromNumber(t.duration,!0)},t.language,t.flags)}(t),i):(t.timescale=this.$q,t.duration=e.toInt(),t)}rX(t,i){return this.qq.set(i,t.timescale),t.timescale=this.$q,t.duration=Cc(t.duration,t.timescale,this.$q),t}sX(t){for(const i of t.boxes)i instanceof Jy?this.hX(i):i instanceof $y&&this.oX(i)}hX(t){for(const i of t.entries)i.mediaTime=xc(i.mediaTime,this.Vq,this.$q),i.segmentDuration=xc(i.segmentDuration,this.Vq,this.$q)}oX(t){for(const i of t.entries)i.mediaTime=Cc(i.mediaTime,this.Vq,this.$q),i.segmentDuration=Cc(i.segmentDuration,this.Vq,this.$q)}Jq(t){for(let i=0;i<t.boxes.length;i++){const e=t.boxes[i];e instanceof LM?this.aX(e):e instanceof SM?t.boxes[i]=this.uX(e):e instanceof EM&&(t.boxes[i]=this.cX(e))}}aX(t){const i=this.Hq(t.trackId);t.defaultSampleDuration=xc(t.defaultSampleDuration,i,this.$q)}uX(t){const i=Cc(Se.fromNumber(t.fragmentDuration,!0),this.Vq,this.$q);return 0!==i.getHighBits()?this.cX(function(t){return new EM(Se.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=i.toInt(),t)}cX(t){return t.fragmentDuration=Cc(t.fragmentDuration,this.Vq,this.$q),t}Yq(t){let i=_T(t);return i=i instanceof eT?this.lX(i):this.dX(i),i.serialize().join()}lX(t){const i=t.timescale,e=Cc(Se.fromNumber(t.earliestPresentationTime,!0),i,this.$q);if(0!==e.getHighBits())return this.dX(function(t){return new sT(t.referenceId,t.timescale,Se.fromNumber(t.earliestPresentationTime,!0),Se.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.$q,t.earliestPresentationTime=e.toInt();for(const e of t.references)e.subsegmentDuration=xc(e.subsegmentDuration,i,this.$q);return t}dX(t){const i=t.timescale;t.timescale=this.$q,t.earliestPresentationTime=Cc(t.earliestPresentationTime,i,this.$q);for(const e of t.references)e.subsegmentDuration=xc(e.subsegmentDuration,i,this.$q);return t}Gq(t){const i=gT(t),e=i.getSize();for(const t of i.boxes)t instanceof zs&&this.fX(t);const s=i.getSize();if(s!==e){const t=s-e;for(const e of i.boxes)e instanceof zs&&BL(e,t)}return i.serialize().join()}fX(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof WM?(i=this.Hq(s.trackId),this._X(s,i)):s instanceof ou?t.boxes[e]=this.gX(s,i):s instanceof GM?t.boxes[e]=this.wX(s,i):s instanceof Fo&&this.AX(s,i)}}_X(t,i){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=xc(t.defaultSampleDuration,i,this.$q))}gX(t,i){const e=Cc(Se.fromNumber(t.baseMediaDecodeTime,!0),i,this.$q);return 0!==e.getHighBits()?this.wX(function(t){return new GM(Se.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),i):(t.baseMediaDecodeTime=e.toInt(),t)}wX(t,i){return t.baseMediaDecodeTime=Cc(t.baseMediaDecodeTime,i,this.$q),t}AX(t,i){let e=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=xc(s,i,this.$q);n.duration=t-e,e=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=UL(n.compositionTimeOffset,i,this.$q))}}constructor(t){super(),this.qq=Ye(),this.$q=t}};function UL(t,i,e){return Se.fromInt(t,!1).multiply(e).divide(i).toNumber()}function xc(t,i,e){return Se.fromInt(t,!0).multiply(e).divide(i).toNumber()}function Cc(t,i,e){return is.xp(t).oy(is.Op(e,!0)).gy(is.Op(i,!0)).Wp()}var QL,FL,YL,GL=class{vX(t){return t.pipeThrough(new xh(this.mX))}constructor(t){this.mX=new RL(t)}};function VL(t,i,e){const s=F(t,i);if(s!==e)throw new k("Expected descriptor with tag "+e+", but found "+s)}function WL(t,i){VL(t,i,3);const e=HL(t,i),s=i.qu+e,n=BA(t,i),r=F(t,i),h=0!=(64&r),o=0!=(32&r),a=31&r;let u,c,l;if(0!=(128&r)&&(u=BA(t,i)),h){c=Vo(t,i,F(t,i))}o&&(l=Vo(t,i,2));const d=function(t,i){VL(t,i,4);const e=HL(t,i),s=i.qu+e,n=F(t,i),r=F(t,i),h=r>>2,o=0!=(2&r),a=Fi(t,i,3),u=Sn(t,i),c=Sn(t,i);let l;if(i.qu<s){const e=function(t,i){return t.getUint8(i.qu)}(t,i);5===e&&(l=function(t,i){VL(t,i,5);const e=HL(t,i),s=lc(t,i,e);return{pX:5,yX:s}}(t,i))}return i.Em(s),{pX:4,MX:n,TX:h,NX:o,DX:a,IX:u,SX:c,EX:l}}(t,i);return i.Em(s),{pX:3,o:n,bX:u,Fu:c,LX:a,kX:l,CX:d}}function HL(t,i){let e=0;for(let s=0;s<4;s++){const s=F(t,i);if(e=e<<7|127&s,!(128&s))break}return e}function qL(t,i){const e=F(t,i),s=F(t,i),n=F(t,i),r=F(t,i),h=3&F(t,i),o=31&F(t,i),a=[];for(let e=0;e<o;e++){const e=BA(t,i);a.push(lc(t,i,e))}const u=F(t,i),c=[];for(let e=0;e<u;e++){const e=BA(t,i);c.push(lc(t,i,e))}return{xX:e,OX:s,jX:n,zX:r,PX:h,BX:a,RX:c}}function XL(t,i,e){if(e&&i.byte>=e)return;const s=t.Jb(i.byte);return i.byte+=1,s}function ZL(t,i){return function(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=256*s+XL(t,i);return s}(t,i,2)}r(),r(),function(t){t[t.UX=3]="UX",t[t.QX=4]="QX",t[t.FX=5]="FX"}(QL||(QL={})),function(t){t[t.YX=64]="YX",t[t.GX=103]="GX",t[t.VX=107]="VX"}(FL||(FL={})),r(),r(),function(t){t[t.WX=0]="WX",t[t.HX=1]="HX",t[t.GX=2]="GX",t[t.qX=5]="qX",t[t.XX=34]="XX"}(YL||(YL={})),r(),r(),r(),r();var KL=class t{ZX(t){this.KX=this.KX.concat(t.KX),this.JX+=t.U}$X(t,i,e){const s=this.JX,n=e-i;n>0&&(this.KX.push({tZ:i,iZ:e,eZ:n,sZ:s,nZ:t}),this.JX+=n)}Jb(t){for(const i of this.KX)if(i.sZ<=t&&t<i.sZ+i.eZ)return i.nZ[t+i.tZ-i.sZ]}rZ(t,i){let e=i;for(const i of this.KX){const s=i.iZ;for(let n=i.tZ;n<s;n+=1,e+=1)t[e]=i.nZ[n]}return e}get U(){return this.JX}set U(t){const i=this.KX;let e=this.JX-t;if(!(t>=this.JX))if(this.JX=t,0!==t)for(let t=i.length-1;t>=0;t-=1){const s=i[t];if(e<=s.eZ)return s.iZ-=e,s.eZ-=e,void(i.length!==t+1&&(i.length=t+1));e-=s.eZ}else i.length=0}get JM(){const t=new Array(this.JX);let i=0;for(const e of this.KX){const s=e.iZ;for(let n=e.tZ;n<s;n+=1,i+=1)t[i]=e.nZ[n]}return t}hZ(){const t=new T(this.JX);let i=0;for(const e of this.KX){const s=e.iZ;for(let n=e.tZ;n<s;n+=1,i+=1)t[i]=e.nZ[n]}return t}Lm(i){const e=new t;for(const t of this.KX)e.$X(t.nZ,t.tZ,t.iZ);return e.hI=i||oe({},this.hI),e}constructor(){this.JX=0,this.KX=[],this.hI={}}};r();var JL,$L=[128,64,32,16,8,4,2,1];function ys(t,i){const e=x.floor(i.bit/8),s=0==(t.Jb(e)&$L[i.bit%8])?0:1;return i.bit+=1,s}function he(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=2*s+ys(t,i);return s}function ac(t,i){let e=0;for(;0===ys(t,i)&&e<32;)e+=1;return he(t,i,e)+2**e-1}function tk(t,i){const e=ac(t,i);return 1&e?x.floor((e+1)/2):-x.floor(e/2)}function ik(t,i){const e=[],s={byte:1};let n;do{e.push(sk(t,i,s)),n=i.Jb(s.byte)}while(void 0!==n&&128!==n);return e}function ek(t,i){let e,s=0;do{e=XL(t,i),s+=e}while(255===e);return s}function sk(t,i,e){const s=ek(i,e),n=ek(i,e),r=e.byte,h=r+n;return e.byte=h,{oZ:t,aZ:s,uZ:n,cZ:r,lZ:h,dZ:i}}!function(t){t[t.fZ=1]="fZ",t[t._Z=2]="_Z",t[t.gZ=3]="gZ",t[t.wZ=4]="wZ",t[t.AZ=5]="AZ",t[t.vZ=6]="vZ",t[t.mZ=7]="mZ",t[t.pZ=8]="pZ",t[t.yZ=9]="yZ"}(JL||(JL={}));var nk=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function rk(t,i,e){let s=8,n=8;for(let r=0;r<e;r+=1){if(0!==n){n=(s+tk(t,i)+256)%256}s=0===n?s:n}}var hk=class{MZ(){const t=this.TZ;let i=x.max(0,this.NZ+t.length-2);const e=this.DZ,s=e.U;let n=0;for(;i<s;i+=1){const s=e.Jb(i);0===s?n+=1:(3===s&&n>=2&&t.push(i),n=0)}this.NZ=i-t.length}IZ(t){const i=this.TZ;let e=t;for(const t of i){if(!(t<=e))return e;e+=1}return e}Jb(t){if(!(t>this.DZ.U))return t>this.NZ&&this.MZ(),this.DZ.Jb(this.IZ(t))}constructor(t){this.TZ=[],this.NZ=0,this.DZ=t}};function ok(t){const i=new hk(t);let e,s,n,r,h,o,a=0,u=0,c=0,l=0;const d=i.Jb(1),f={bit:32};if(ac(i,f),100===d||110===d||122===d||144===d){const t=ac(i,f);3===t&&(e=ys(i,f)),ac(i,f),ac(i,f),ys(i,f);if(1===ys(i,f))for(let e=0;e<(3!==t?8:12);e+=1){1===ys(i,f)&&rk(i,f,e<6?16:64)}}const _=ac(i,f),g=ac(i,f);if(0===g)ac(i,f);else if(1===g){ys(i,f),tk(i,f),tk(i,f);const t=ac(i,f);for(let e=0;e<t;e+=1)tk(i,f)}ac(i,f),ys(i,f);const w=ac(i,f),A=ac(i,f),v=ys(i,f);0===v&&ys(i,f),ys(i,f);1===ys(i,f)&&(a=ac(i,f),u=ac(i,f),c=ac(i,f),l=ac(i,f));if(1===ys(i,f)){if(1===ys(i,f)){const t=he(i,f,8);if(255===t)s=he(i,f,16),n=he(i,f,16);else{const i=nk[t];i&&(s=i[0],n=i[1])}}1===ys(i,f)&&ys(i,f);if(1===ys(i,f)){he(i,f,3),ys(i,f);1===ys(i,f)&&(he(i,f,8),he(i,f,8),he(i,f,8))}1===ys(i,f)&&(ac(i,f),ac(i,f)),r=ys(i,f),1===r&&(h=he(i,f,32),o=he(i,f,32),ys(i,f))}return{width:x.floor(16*(w+1)-2*a-2*u),height:x.floor((2-v)*(A+1)*16-2*c-2*l),lD:s,dD:n,SZ:r?o/(2*h):void 0,EZ:e,bZ:_}}function ak(t){const i=vm(ds.ST(t),xv.iM);if(!i)return;const e=i.pT.vy,s=[];for(const t of i.Z){const i=t.pT.tN,e=t.ZT.pT.vy;let o,a,u;for(const i of t.ZT.oN.cN.dN._N){const t=uk(i);var n,r,h;if(t)o=null!=(n=t.LZ)?n:o,a=null!=(r=t.kZ)?r:a,u=null!=(h=t.CZ)?h:u}s.push({tN:i,vy:e,LZ:o,kZ:a,CZ:u})}return{vy:e,Z:s}}function uk(t){let i,e,s;if(t.$w===xv._M){var n;const e=qL(Ao(t.FN.JM),new Vr);i=function(t){return"avc1."+ck(t.OX,2)+ck(t.jX,2)+ck(t.zX,2)}(e),s=null==(n=function(t){if(0===t.BX.length)return;const i=t.BX[0],e=new KL;return e.$X(i,0,i.byteLength),ok(e)}(e))?void 0:n.SZ}else if(t.$w===xv.wM||t.$w===xv.AM){const e=function(t,i){const e=i.jm(),s=ls(t,e,8),n=ls(t,e,2),r=ls(t,e,1),h=ls(t,e,5),o=ls(t,e,32),a=[];for(let i=0;i<6;i++)a.push(ls(t,e,8));const u=ls(t,e,8);e.Sm(4);const c=ls(t,e,12);e.Sm(6);const l=ls(t,e,2);e.Sm(6);const d=ls(t,e,2);e.Sm(5);const f=ls(t,e,3);e.Sm(5);const _=ls(t,e,3),g=ls(t,e,16),w=ls(t,e,2),A=ls(t,e,3),v=ls(t,e,1),m=ls(t,e,2),p=ls(t,e,8),y=[];for(let i=0;i<p;i++){const i=ls(t,e,1);e.Sm(1);const s=ls(t,e,6),n=ls(t,e,16),r=[];for(let i=0;i<n;i++){const i=ls(t,e,16),s=lc(t,new Vr(e.qu>>3),i);e.Sm(8*i),r.push({xZ:i,OZ:s})}y.push({jZ:i,zZ:s,PZ:n,BZ:r})}return{xX:s,RZ:n,UZ:r,QZ:h,FZ:a,YZ:u,GZ:c,VZ:l,WZ:o,HZ:d,qZ:f,XZ:_,ZZ:g,KZ:A,JZ:v,$Z:w,PX:m,tK:p,iK:y}}(Ao(t.WN.JM),new Vr);i=function(t,i){let e=t.toString()+".";switch(i.RZ){case 0:break;case 1:e+="A";break;case 2:e+="B";break;case 3:e+="C";break;default:return}switch(e+=i.QZ.toString()+".",e+=function(t){let i=t;return i=i>>>1&1431655765|(1431655765&i)<<1,i=i>>>2&858993459|(858993459&i)<<2,i=i>>>4&252645135|(252645135&i)<<4,i=i>>>8&16711935|(16711935&i)<<8,i=i>>>16|i<<16,i}(i.WZ).toString(16)+".",i.UZ){case 0:e+="L";break;case 1:e+="H";break;default:return}e+=i.YZ.toString();const s=i.FZ.reduce(((t,i)=>0===t?i:i+1),0);for(let t=0;t<s;t++)e+="."+i.FZ[t].toString(16).toUpperCase();return e}(t.$w,e)}else if(t.$w===xv.mM){const e=function(t,i){const e=i.jm(),s=ls(t,e,8);e.Sm(24);const n=ls(t,e,8),r=ls(t,e,8),h=ls(t,e,4),o=ls(t,e,3),a=hn(t,e),u=ls(t,e,8),c=ls(t,e,8),l=ls(t,e,8),d=ls(t,e,16),f=new Array(8);for(let i=0;i<d;i++)f[i]=ls(t,e,8);return{xX:s,eK:n,sK:r,nK:h,rK:o,hK:a,oD:u,aD:c,uD:l,oK:d,aK:f}}(Ao(t.qN.JM),new Vr);i=function(t,i){let e=t.toString()+".";return e+="0"+i.eK+".",e+=va(""+i.sK,2,"0")+".",e+=va(""+i.nK,2,"0")+".",e+=va(""+i.rK,2,"0")+".",e+=va(""+i.oD,2,"0")+".",e+=va(""+i.aD,2,"0")+".",e+=va(""+i.uD,2,"0")+".",e+="0"+i.hK,e}(t.$w,e)}else if(t.$w===xv.yM){const e=function(t,i){const e=i.jm();e.Sm(1);const s=ls(t,e,7),n=ls(t,e,3),r=ls(t,e,5),h=hn(t,e),o=hn(t,e),a=hn(t,e),u=hn(t,e),c=hn(t,e),l=hn(t,e),d=ls(t,e,2);e.Sm(3);const f=hn(t,e);let _;return f?_=ls(t,e,4):e.Sm(4),{DT:s,uK:n,cK:r,lK:h,dK:o,fK:a,_K:u,gK:c,wK:l,AK:d,vK:f,mK:_}}(Ao(t.KN.JM),new Vr);i=function(t,i,e){let s=t.toString()+".";if(s+=i.uK+".",s+=""+va(""+i.cK,2,"0"),s+=(0===i.lK?"M":"H")+".",s+=(1===i.fK?12:10)+".",s+=(1===i.uK?0:i._K)+".",s+=""+i.gK+i.wK+(1===i.gK&&1===i.wK?i.AK:"0"),e&&e.hD===fu.ON_SCREEN_COLOURS){const t=e;s+="."+va(""+t.oD,2,"0")+"."+va(""+t.aD,2,"0")+"."+va(""+t.uD,2,"0")+"."+(t.cD?1:0)}return s}(t.$w,e,t.JN)}else{if(t.$w!==xv.DM)return(t.$w===xv.kM||t.$w===xv.LM)&&t.iD?uk(t.iD):void 0;e=function(t){const i=t.CX;switch(i.MX){case FL.YX:return function(t){var i;if(!(null==(i=t.EX)?void 0:i.yX))return"mp4a.40";const e=function(t,i){let e=ls(t,i,5);31===e&&(e=32+ls(t,i,6));const s=ls(t,i,4);let n;return 15===s&&(n=ls(t,i,24)),{pK:e,yK:s,MK:n,TK:ls(t,i,4)}}(Ao(t.EX.yX),new Yc);return"mp4a.40."+e.pK}(i);case FL.GX:return"mp4a.40.2";case FL.VX:return"mp4a.40.34"}}(WL(Ao(t.zN.JM),new Vr))}return{LZ:i,kZ:e,CZ:s}}function ck(t,i){const e=t.toString(16);return va(e,i,"0")}function lk(t,i){const e=ds.ST(Ao(t)),s=function(t,i){let e;for(const n of t.Z){var s;const t=null==(s=n.ED)?void 0:s.ED;if(t){const s=n.pT.tN,r=Gr(i.Z,(t=>t.tN===s)),h=aa.xp(t,r.vy);e&&!h.Dp(e)||(e=h)}}return e}(vm(e,xv.CM),i),n=vm(e,xv.RM);return{Fm:s.vp(),NK:n.JM}}r();var dk=_n.KE,fk=class extends i{get RV(){return this.XV}set RV(t){this.XV=t}get GV(){return this.JV}set GV(t){this.JV=t}get ta(){return this.DK||this.IK.updating}SK(t,i,e){switch(t.$w){case Ho.MH:case Ho.iS:return this.EK((e=>this.bK(t,i,e)),e);case Ho.TH:throw new b("Opaque segments are not supported on web.")}}LK(t,i){switch(t.$w){case Ho.MH:return this.EK((i=>this.kK(t,i)),i);case Ho.iS:throw new b("Streaming initialization segments are not supported on web.");case Ho.TH:throw new b("Opaque initialization segments are not supported on web.")}}async kK(t,i){this.CK?this.xK=ak(Ao(t.JM)):(await this.jK(t,void 0,i),dk&&(this.zK=!1,this.PK=t))}async bK(t,i,e){dk&&this.zK&&this.PK&&await this.kK(this.PK,e);try{if(Pi(e),this.CK&&this.xK){const n=await async function(t,i){switch(t.$w){case Ho.MH:return t;case Ho.iS:{const e=await oi(t.JM,i);return Pi(i),{$w:Ho.MH,JM:new T(e)}}case Ho.TH:throw new b("MediaBufferWrapper - Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,e),r=lk(n.JM,this.xK);var s;t={$w:Ho.MH,JM:r.NK},i=oe({},i,{Zy:r.Fm+(null!=(s=i.Zy)?s:0)})}await this.jK(t,i,e),this.mo(new gg(ii.pH))}finally{t.$w===Ho.iS&&t.JM.cancel(new sa).catch(xs)}}async jK(t,i,e){switch(Pi(e),i&&await this.BK(i),t.$w){case Ho.MH:if(this.RK){const i=this.RK.vX(eb(t.JM));return await this.UK(i,e)}return await this.QK(t.JM);case Ho.iS:if(this.RK){const i=this.RK.vX(t.JM);return await this.UK(i,e)}return await this.UK(t.JM,e)}}async UK(t,i){const e=this.FK.M_,s=function(t,i){return void 0===i&&(i=new id({highWaterMark:1/0})),new f(new NL(t,i),{highWaterMark:0})}(t),n=s.getReader();let r=!1;try{for(;;){const t=await hl(n.read(),i);if(t.done){r=!1;break}Pi(i);const e=Vh(t.value);r=!0,await this.QK(e)}}catch(t){if(n.cancel(t).catch(xs),r){await this.YK();const t=this.FK.M_.yn(e.bB());for(let i=0;i<t.U;i++)await this.GK(t.gn(i),t.bn(i))}throw t}}VK(t,i){return this.EK((()=>this.WK(t,i)))}async WK(t,i){this.IK.appendWindowStart===t&&this.IK.appendWindowEnd===i||(await this.YK(),this.IK.appendWindowStart=0,this.IK.appendWindowEnd=i,this.IK.appendWindowStart=t)}async BK(t){if(this.IK.timestampOffset!==t.Zy)try{this.IK.timestampOffset=t.Zy}catch(i){await this.YK(),this.IK.timestampOffset=t.Zy}}async QK(t){this.IK.appendBuffer(t),this.HK=!0,await this.qK()}XK(t,i,e){return this.EK((e=>this.GK(t,i,e)),e)}async GK(t,i,e){Pi(e),this.IK.remove(t,i),await this.qK()}qK(){const t=this.FK.M_;return new Promise(((i,e)=>{let s,n=!1,r=()=>{n=!0},h=()=>{n=!1,s="error"},o=()=>{n=!1,s="aborted"},a=()=>{u(),n&&!s?(t.QB(this.FK.M_)||this.mo(new gg(ii.pH)),i()):e(new b(s))},u=()=>{this.IK.removeEventListener("update",r),this.IK.removeEventListener("error",h),this.IK.removeEventListener("abort",o),this.IK.removeEventListener("updateend",a)};this.IK.addEventListener("update",r),this.IK.addEventListener("error",h),this.IK.addEventListener("abort",o),this.IK.addEventListener("updateend",a)}))}ZK(){return this.EK((()=>this.YK()))}async YK(){if(this.KK.cg===Pn.OI){dk&&(this.zK=!0),this.IK.updating&&(this.DK=!0);try{this.IK.abort()}catch(t){0,this.DK=!1}this.ta&&await this.qK().catch(xs)}}JK(){return"function"==typeof this.IK.changeType}bH(t){if(this.$K(),this.KK.cg===Pn.tJ)return;var i;this.iJ=t;const e=null!=(i=this.KK.eJ(t.gP))?i:t.gP;this.CK=_k(t.gP,this.sJ),this.JK()&&!Ei(this.sJ,e)&&(this.sJ=e,this.IK.changeType(this.sJ))}nJ(){this.KK.cg!==Pn.NA||this.rJ||this.ta||(this.IK.timestampOffset=this.IK.timestampOffset,this.KK.hJ())}async EK(t,i){this.$K();const e=new Po;e.n_(this.oJ.i_),i&&e.n_(i);try{this.rJ=t(e.i_),await this.rJ,this.KK.hJ(),this.ta&&await this.qK()}finally{this.rJ=void 0,e.Xf()}}$K(){if(this.rJ)throw new b("Internal error")}async Xf(){this.Bo(),this.oJ.s_(),this.rJ&&(await this.rJ.catch(xs),this.rJ=void 0),this.IK.removeEventListener("updateend",this.aJ),this.IK.removeEventListener("bufferedchange",this.uJ)}constructor(t,i,e,s,n){var r;if(super(),this.XV=20,this.JV=30,this.DK=!1,this.HK=!1,this.rJ=void 0,this.oJ=new Po,this.zK=!1,this.PK=void 0,this.CK=!1,this.xK=void 0,this.aJ=()=>{this.DK=!1},this.uJ=t=>{t.removedRanges&&this.mo(new gg(ii.pH))},this.KK=i,this.FK=t,this.IK=e,this.IK.addEventListener("updateend",this.aJ),this.IK.addEventListener("bufferedchange",this.uJ),this.iJ=s,this.sJ=n,this.CK=_k(s.gP,n),null==(r=i.vd)?void 0:r.cJ){var h;const t=null!=(h=i.vd.lJ)?h:1e5;this.RK=new GL(t)}}};function _k(t,i){return Zg(t,"audio/mp4")&&Zg(i,"audio/mpeg")}r();var gk=class{get M_(){if(this.dJ.cg===Pn.tJ)return Ki.KB();let t=Ki.mn(this.IK.buffered).yn(new Ki([0,1/0]));const i=this.fJ;return void 0!==i&&t.U>0&&t.bn(t.U-1)===i&&(t=t.xB(Ki.XB(i))),t}GH(){return!!this.fJ&&this.M_.SB().ar(this.fJ)}_J(){const t=this.M_;this.fJ=t.U>0?t.bn(t.U-1):0,this.dJ.gJ()}nJ(){this.fJ=void 0}constructor(t,i){this.fJ=void 0,this.dJ=i,this.IK=t}};function wk(t){const i=t.mI("codecs");return i?i.split(",").map((t=>t.trim())):[]}function Ak(t,i){const e=vk(t)||mk(t),s=vk(i)||mk(i);return!e&&!s||t===i}function vk(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function mk(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function qt(t,i){if(t===i)return!0;const e=t.split("."),s=i.split("."),n=e[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,i]=e,[,n,r]=s;if(t!==n)return!1;if(Number(i)!==Number(r))return!1}return!0}function pk(t,i,e,s,n,r,h){const o=new gk(n,t),a=new fk(o,t,n,e,r);return new yk(t,i,e,s,o,a,h)}r();var yk=class extends i{get M_(){return this.FK.M_}get vd(){return this.Mx}get gP(){return this.wx}get wJ(){return this.AJ}get vJ(){return this.mJ.KH}get RV(){return this.pJ.RV}set RV(t){this.pJ.RV=t}get GV(){return this.pJ.GV}set GV(t){this.pJ.GV=t}get ta(){return this.pJ.ta}GH(){return this.FK.GH()}_J(){this.FK._J()}nJ(){this.FK.nJ(),this.pJ.nJ()}yJ(t,i){this.mJ.$H(t,i)}MJ(t,i){this.mJ.tq(t,i)}TJ(){return this.pJ.ZK()}SK(t,i,e){return this.pJ.SK(t,i,e)}LK(t,i,e){return this.pJ.LK(t,e)}VK(t,i){return _n.kE&&_n.xE<3?this.pJ.VK(t,1/0):this.pJ.VK(t,i)}async wm(t,i,e){this.MJ(t,i);const s=this.M_;await this.pJ.XK(t,i,e);const n=0!==s.U&&0===this.M_.U;(_n.ub||_n.jE)&&n&&this.sP.Em(this.sP.E_)}SH(t){const i=t.gP;if(this.wx===i)return!0;const e=this.NJ.get(i);if(void 0!==e)return e;const s=this.DJ(t);return this.NJ.set(i,s),s}DJ(t){const i=this.KK.eJ(t.gP);if(void 0===i)return!1;const e=Sm(this.wx),s=Sm(i),n=wk(e),r=wk(s);if(this.pJ.JK()){if(!function(t,i){return eg(t,i,Ak)}(n,r))return!1}else{if(e.$w!==s.$w)return!1;if(!function(t,i){return eg(t,i,qt)}(n,r))return!1}return!0}async bH(t){const i=t.gP;this.wx!==i&&(this.NJ.clear(),this.pJ.bH(t),this.wx=i),this.Mx=t,this.KK.IJ()}async Xf(){this.NJ.clear(),this.Bo(),this.mJ.cn();try{this.pJ.rn(ii.pH,this.Ds),await this.pJ.Xf()}catch(t){}}constructor(t,i,e,s,n,r,h){super(),this.NJ=Qt(),this.KK=t,this.Mx=e,this.wx=e.gP,this.AJ=s,this.sP=i,this.FK=n,this.pJ=r,this.mJ=h,this.pJ.ln(ii.pH,this.Ds)}};r();var Mk=class{SJ(){let t=this.gn,i=this.bn;if(this.EJ||this.bJ){const e=.001*(fe.h_()-this.LJ);this.EJ&&(t+=e),this.bJ&&(i+=e)}return Ki.ZB(t,i)}constructor(t,i,e=!1,s=!1){this.gn=t,this.bn=i,this.EJ=e,this.bJ=s,this.LJ=fe.h_()}};r();var Tk=.5,Nk=[t.bh,t.yh,t.YA,t.FA,t.bA,t.kA,t.NA,t.RA,qo._w,Bi.Zo],Dk=class{kJ(t){this.CJ.push(t),t.ln(yL.qH,this.xJ)}get KH(){return this.CJ.reduce(((t,i)=>t.xB(i.KH)),Ki.KB())}cn(){this.OJ(),this.jJ.rn(qo._w,this.zJ),this.sP.rn(t.BA,this.zJ),this.sP.rn(Nk,this.PJ),this.CJ.forEach((t=>t.rn(yL.qH,this.xJ))),0!==this.BJ&&(fe.o_(this.BJ),this.BJ=0),this.RJ=!0}kH(t){if(this.sP.C_)return!1;if(0!==this.BJ)return!1;const i=this.FK.M_,e=i.zB(t);if(e>=0&&t+Tk<i.bn(e))return!1;const s=e>=0?e+1:i.VB(t);if(s<0||s>=i.U)return!1;const n=i.gn(s);if(Ki.ZB(t,n).jB(this.KH).qB>1)return!1;if(fe.UJ)return this.QJ=this.sP.E_,this.BJ=fe.a_((()=>{this.QJ===this.sP.E_&&this.FJ(n),this.BJ=0}),250),!0;return!(x.abs(n-t)<=.001)&&(this.FJ(n),!0)}FJ(t){this.sP.Em(t,!1,!0)}YJ(){0!==this.GJ&&(fe.o_(this.GJ),this.GJ=0),this.sP.rn(t.XA,this.zl)}VJ(){0===this.WJ&&(this.YJ(),this.WJ=fe.HJ(this.qJ,250))}OJ(){0!==this.WJ&&(fe.XJ(this.WJ),this.WJ=0),this.YJ(),this.sP.gg||(this.ZJ=0)}KJ(){return!this.sP.q_&&!this.sP.gg&&0!==this.sP.Z_&&!this.sP.C_&&!this.sP.lt&&(this.JJ()||this.jJ.cg>=ow.Qv)}JJ(){const t=this.sP.E_,i=this.FK.M_,e=i.zB(t);return-1!==e&&i.bn(e)>t+Tk}$J(t,i){const e=i.zB(t);return e>-1?i.bn(e):t}constructor(i,e,s,n){this.FK=i,this.jJ=e,this.sP=s,this.RJ=!1,this.CJ=[],this.BJ=0,this.GJ=0,this.t$=0,this.QJ=0,this.ZJ=0,this.WJ=0,this.i$=1,this.xJ=t=>{const i=this.sP.E_,e=t.ZH.ar(i),s=t.ZH.ar(i,Tk)&&this.sP.cg<=ow.Uv;(e||s)&&this.kH(i)},this.zJ=kl((t=>{if(this.RJ)return;if(this.jJ.cg<=ow.Uv){const t=this.sP.E_;this.kH(t)||this.qJ()}}),100),this.zl=kl((t=>{this.RJ||0===this.WJ&&this.VJ()}),100),this.PJ=()=>{this.KJ()?0===this.WJ&&(this.sP.ln(t.XA,this.zl),this.GJ=fe.a_((()=>{this.VJ()}),3500)):this.OJ()},this.qJ=()=>{const t=this.t$,i=this.ZJ,e=this.sP.E_,s=fe.h_(),n=this.FK.M_;if(t!==e)return this.t$=e,this.ZJ=s,this.i$=1,void(this.e$=fe.s$?2e3:1e3);if(this.KJ()&&0!==n.U&&i>0&&s>i+this.e$){let t;const i=this.KH.SB().jB(n),s=i.GB(e);if(-1!==s){const n=i.gn(s);if(n-e<1){const e=i.bn(s);0,t=e}}var r;if(!t)t=null==(r=this.n$)?void 0:r.determineStallJumpTarget(),t||(t=e+.01*this.i$,n.ar(t)||(t=this.$J(e,n)));0,this.t$=t,this.i$++,this.e$=x.min(2*this.e$,1e4),this.FJ(t)}},this.jJ.ln(qo._w,this.zJ),this.sP.ln(t.BA,this.zJ),this.sP.ln(Nk,this.PJ),this.n$=n,this.e$=fe.s$?2e3:1e3}};function Ik(t){const i=[];if(t.r$&&i.push(t.r$.M_),t.h$&&i.push(t.h$.M_),0===i.length)return Ki.KB();let e=0;for(const t of i)t.U>0&&(e=x.max(e,t.bn(t.U-1)));const s=t.GH;let n=new Ki([0,e],[!0,s]);for(let t of i)s&&t.U>0&&(t=t.xB(new Ki([t.bn(t.U-1),e],[!0,!0]))),n=n.yn(t);return n}function Sk(t,i,e){const s=t.M_;let n,r=s.zB(i);if(r>=0){if(!(r+1<s.U))return Promise.resolve();n=s.gn(r+1)}else{if(r=s.VB(i),!(r>=0))return Promise.resolve();n=s.gn(r)}return t.wm(n,1/0,e)}function Ek(t,i,e){if(!t.ar(i)){const s=t.zB(i,e);if(s>=0){const e=t.gn(s);if(i<e)return e}}return i}r(),r();var bk=class{o$(){return new this.a$}u$(t){return this.a$.isTypeSupported(t)}constructor(t){this.a$=Lk(t)}};function Lk(t){return t&&"function"==typeof Ys.ManagedMediaSource?Ys.ManagedMediaSource:"function"==typeof Ys.MediaSource?Ys.MediaSource:void 0}var Pn,kk=_n.RE||_n.QE,Ck=_n.HE||_n.KE&&_n.$E>=17;!function(t){t.tJ="closed",t.OI="open",t.NA="ended"}(Pn||(Pn={}));var xk=class extends mL{get r$(){return this.c$}get h$(){return this.l$}get ct(){if(this.d$)return this.d$;const t=this.cP.duration;return t===pu?1/0:t}f$(t){if(j(t)||t<0)throw new b("Invalid duration");this._$()?this.g$(t):this.d$=t}g$(t){const i=t===1/0;if(i&&this.cP.setLiveSeekableRange){const t=2**39;this.cP.setLiveSeekableRange(0,t)}this.cP.duration=i?Ck?1/0:pu:t,this.d$=void 0}get M_(){return kk?Ik(this):function(t,i){let e=i;return e.U>0&&t.GH&&(e=e.xB(Ki.XB(e.bn(e.U-1)))),e}(this,Ki.mn(this.Fx.buffered))}get VH(){var t;return null==(t=this.c$)?void 0:t.M_}get WH(){var t;return null==(t=this.l$)?void 0:t.M_}get fg(){return this.w$.SJ().yn(new Ki([0,this.ct],[!0,!0]))}A$(t,i,e,s){this.w$=new Mk(t,i,!!e,!!s)}get GH(){return(!this.c$||this.c$.GH())&&(!this.l$||this.l$.GH())}get cg(){return this.cP.readyState}async VV(){const t=this.Mx,i=Gr(t.v$,(t=>Zg(t.gP,"audio"))),e=Gr(t.v$,(t=>Zg(t.gP,"video")));if(this.Fx.disableRemotePlayback=!0,await this.m$(),i){const t=new TL;var s;this.p$.kJ(t);const e=null!=(s=this.eJ(i.gP))?s:i.gP;this.y$=this.cP.addSourceBuffer(e),this.c$=pk(this,this.sP,i,Tw.Gv,this.y$,e,t),this.c$.ln(ii.pH,this.uJ)}if(e){const t=new TL;var n;this.p$.kJ(t);const i=null!=(n=this.eJ(e.gP))?n:e.gP;this.M$=this.cP.addSourceBuffer(i),this.l$=pk(this,this.sP,e,Tw.Yv,this.M$,i,t),this.l$.ln(ii.pH,this.uJ)}this.LH.Pn(this,t)}async m$(){await super.QH(this.cP),"open"!==this.cg&&await Kt(this.cP,"sourceopen")}_$(){if("open"!==this.cg)return!1;const t=this.c$&&this.c$.ta,i=this.l$&&this.l$.ta;return!(t||i)}_J(){this.T$=!0,this.c$&&this.c$._J(),this.l$&&this.l$._J(),this.T$=!1,this.N$()}nJ(){this.c$&&this.c$.nJ(),this.l$&&this.l$.nJ()}SH(t){const i=Gr(t.v$,(t=>Zg(t.gP,"audio"))),e=Gr(t.v$,(t=>Zg(t.gP,"video")));if(this.c$){if(!i)return!1;if(!this.c$.SH(i))return!1}else if(i)return!1;if(this.l$){if(!e)return!1;if(!this.l$.SH(e))return!1}else if(e)return!1;return!!super.SH(t)}async bH(t){const i=Gr(t.v$,(t=>Zg(t.gP,"audio"))),e=Gr(t.v$,(t=>Zg(t.gP,"video"))),s=[];this.c$&&s.push(this.c$.bH(i)),this.l$&&s.push(this.l$.bH(e)),await Promise.all(s),await super.bH(t)}async Xf(){if(_n.jE&&await this.YH(),this.c$){if(await this.c$.Xf(),this.c$=void 0,Za()&&(_n.jE||_n.kE))try{this.cP.removeSourceBuffer(this.y$)}catch(t){}this.y$=void 0}if(this.l$){if(await this.l$.Xf(),this.l$=void 0,Za()&&(_n.jE||_n.kE))try{this.cP.removeSourceBuffer(this.M$)}catch(t){}this.M$=void 0}this.Fx.src&&URL.revokeObjectURL(this.Fx.src),this.Fx.disableRemotePlayback=!1,this.sP.rn([t.YA,t.bA],this.D$),this.p$.cn(),_n.kE&&await this.YH(),await super.Xf()}IJ(){const t=this.Mx,i=t.v$.map((t=>Zg(t.gP,"audio")&&this.c$?this.c$.vd:Zg(t.gP,"video")&&this.l$?this.l$.vd:t));this.Mx=oe({},t,{v$:i})}gJ(){this.T$||this.N$()}get I$(){if(!this.GH)return!1;const t=this.M_;return 0!==t.U&&t.gn(t.U-1)<=this.sP.E_}N$(){this.I$&&this._$()&&(this.cP.endOfStream(),this.d$=void 0,this.mo(new gg(AL.TU)),this.sP.uJ())}hJ(){this._$()&&(this.GH?this.N$():void 0!==this.d$&&this.g$(this.d$))}kH(t){return this.p$.kH(t)}eJ(t){return Ok(this.S$,t)}static HH(t){const i=Lk(t.E$);if(void 0===i)return!1;if("function"!=typeof i.isTypeSupported)return!1;const e=new bk(t.E$);for(const i of t.v$)if(void 0===Ok(e,i.gP))return!1;return!0}constructor(i,e,s,n,r,h=new bk(i.E$),o){super(i,e,n,r),this.c$=void 0,this.y$=void 0,this.l$=void 0,this.M$=void 0,this.w$=new Mk(0,1/0),this.d$=void 0,this.T$=!1,this.D$=()=>{this.N$()},this.uJ=()=>{this.sP.uJ()},this.S$=h,this.cP=this.S$.o$(),this.sP.ln([t.YA,t.bA],this.D$),this.p$=new Dk(this,s,this.sP,o)}};function Ok(t,i){const e=Sm(i),s="audio/mp4"===e.$w&&function(t,i){return _l(t,i,((t,i)=>t===i))}(wk(e),["mp4a.40.34"]);if(t.u$(i)&&(!s||!_n.KE))return i;if(s){const i=Gr(['audio/mp4; codecs="mp3"',"audio/mpeg"],(i=>t.u$(i)));return void 0!==i?i:void 0}}r(),r();var jk=class extends gg{constructor(i){super(t.bA),this.currentTime=i}},zk=[t.ZA,t.RA,t.YA,t.bA,t.bh,t.yh],Pk=class extends i{get E_(){return this.JB}get b$(){return this.L$}get k$(){return this.C$}get ct(){return this.JL}get C_(){return this.x$}get q_(){return this.iR}get cg(){return this.O$}get gg(){return this.$B}get Y_(){return this.tR}set Y_(t){this.Y_!==t&&(this.tR=t,this.mo(new Ve(this.E_,this.Ng)))}get Z_(){return this.eR}set Z_(t){this.Z_!==t&&(this.eR=t,this.mo(new se(this.E_,this.Z_)))}get Ng(){return this.Ak}set Ng(t){this.Ng!==t&&(this.Ak=t,this.mo(new Ve(this.E_,this.Ng)))}Em(t,i,e){this.JB!==t&&(this.JB=t,this.L$=i,e&&!this.$B?(this.C$=!0,this.mo(new jk(this.E_))):(this.C$=!1,this.$B=!0,this.mo(new ja(this.E_))))}Pg(){this.iR||(this.iR=!0,this.mo(new ws(this.E_)))}Bg(){this.iR&&(this.iR=!1,this.mo(new vh(this.E_)))}Xf(){this.Bo()}constructor(t,i,e,s,n,r,h,o,a,u,c){super(),this.JB=t,this.JL=i,this.x$=e,this.iR=s,this.$B=n,this.tR=r,this.eR=h,this.Ak=o,this.O$=a,this.L$=u,this.C$=c}};function Bk(t){return new Pk(t.E_,t.ct,t.C_,t.q_,t.gg,t.Y_,t.Z_,t.Ng,t.cg,!1,t.k$)}function Rk(t,i){i.ct===t.ct||j(i.ct)&&j(t.ct)||t.mo(new ts(t.ct)),t.Y_=i.Y_,t.Ng=i.Ng,t.Z_=i.Z_,i.q_?t.Pg():t.Bg().catch(xs),i.E_!==t.E_||i.cg>ow.Rv&&t.cg===ow.Rv?t.Em(i.E_,i.b$,i.k$):!i.gg&&t.gg?t.mo(new ja(t.E_)):i.gg&&!t.gg&&t.cg>=ow.Uv&&t.mo(new _e(t.E_)),!i.C_&&t.C_&&t.mo(new Ds(t.E_))}r(),r();var Uk=class extends i{get cg(){return this.dg()}j$(t){this.uO!==t&&(this.uO=t,this.mo(new Qi(this.sP.E_,t)))}z$(){this.j$(this.dg())}Wn(){this.j$(ow.Rv)}Xf(){this.Bo()}constructor(t){super(),this.uO=ow.Rv,this.P$=()=>{this.z$()},this.sP=t}};r();var Qk=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],Fk=class extends Uk{dg(){let t=this.sP.aP.readyState;return t>ow.Uv&&this.sP.B$?ow.Uv:(this.sP.aP.seeking&&t>ow.Vn&&(t=ow.Vn),t)}Xf(){for(const t of Qk)this.sP.aP.removeEventListener(t,this.P$);super.Xf()}constructor(t){super(t);for(const t of Qk)this.sP.aP.addEventListener(t,this.P$)}};r();var Yk=class extends Uk{dg(){if(this.sP.aP.readyState===ow.Rv)return ow.Rv;const t=this.R$(),i=t?t.bn-t.gn:0;if(!t)return ow.Vn;const e=this.sP.Z_;return this.U$()||i>=3*e?ow.Fv:i>=3?ow.Qv:ow.Uv}R$(){const t=this.sP.E_,i=this.sP.M_.CB(.04),e=i.zB(t);if(!(e<0))return{gn:t,bn:i.bn(e)}}U$(){if(this.sP.C_)return!0;const t=this.sP.ct,i=this.R$();return!!i&&t-i.bn<=.16666666666666666}Xf(){this.sP.rn([t.YA,t.bA],this.P$);for(const t of Qk)this.sP.aP.removeEventListener(t,this.P$);super.Xf()}constructor(i){super(i),this.sP.ln([t.YA,t.bA],this.P$);for(const t of Qk)this.sP.aP.addEventListener(t,this.P$)}};r(),r();var Gk=[qo._w,t.bh,t.yh,t.YA,t.FA,t.bA,t.kA,t.NA,Bi.Zo],Vk=class extends i{Q$(){return(!this.nO.k$||!this.nO.F$)&&this.nO.cg<ow.Qv}Y$(){return!this.nO.gg&&!(this.nO.q_||this.nO.C_||this.nO.lt||this.Q$())}Ln(){const t=this.G$;this.G$=this.Y$(),!t&&this.G$&&this.mo(new Vi(this.nO.E_))}Wn(){this.G$=!1}Xf(){this.Bo(),this.nO.rn(Gk,this.DG)}constructor(t){super(),this.G$=!1,this.DG=()=>{this.Ln()},this.nO=t,this.nO.ln(Gk,this.DG)}},Wk=class extends Vk{Y$(){return this.V$&&super.Y$()}Ln(){this.V$&&(this.Fx.paused||this.Fx.ended||this.Fx.error)&&(this.V$=!1),super.Ln()}Wn(){super.Wn(),this.V$=!1}Xf(){this.Fx.removeEventListener(qo._v,this.gO),super.Xf()}constructor(t){super(t),this.V$=!1,this.gO=()=>{this.V$=!0,this.Ln()},this.Fx=t.aP,this.Fx.addEventListener(qo._v,this.gO)}};r();var Hk=class extends gg{constructor(t){super(Bi.Zo),this.lt=t}};function qk(t,i){return t.Fm<=i&&t.Ym>i}function N(t,i){return function(t,i){return W_(t.Fm,i.Fm,uo)}(t,i)||function(t,i){return W_(t.Ym,i.Ym,uo)}(t,i)}function Xk(t,i){return function(t,i){return W_(t.Km,i.Km,uo)}(t,i)||function(t,i){return W_(t.Jm,i.Jm,uo)}(t,i)}function Zk(t,i,e){let s=function(t,i,e,s,n,r,h){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===h&&(h=t.length);let o=r,a=h-1;for(;o<=a;){const h=o+(a-o>>1),u=s(e(t[h]),i);if(u<0)o=h+1;else if(u>0)a=h-1;else{if(!(n&&h>r&&0===s(e(t[h-1]),i)))return h;a=h-1}}return~o}(t,i,ug,e,!0);if(s<0)return s;for(;s<t.length&&e(i,t[s])===Ji.Wr;s++)if(t[s].hp(i))return s;return-(s+1)}function Kk(t,i,e){const s=Zk(t,i,e);return s>=0?s:-(s+1)}function Jk(t){const i=t.Lt;if(!i)return-1;if(t instanceof Hn)return i.W$(t);const e=i.L;if(!e)return-1;const s=Zk(e.Nw,t,N);return s>=0?s:-1}function $k(t,i){const e=function(t,i,e){const s=t.length,n=i.length;let r=0,h=0;const o=[],a=[];for(;r<s&&h<n;){const s=t[r],n=i[h];s===n?(r++,h++):e(n,s)<=0?(o.push(n),h++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;h<n;)o.push(i[h]),h++;return{H$:o,q$:a}}(t,i,N);return function(t,i){const e=i.length;for(let s=0;s<e;s++)t[s]=i[s];t.length=e}(t,i),e}r(),r(),r(),r();var tC=class{get Nw(){return this.X$}get U(){return this.X$.length}get oa(){if(this.Ua){const t=this.X$;this.Ua.length=t.length;for(let i=0;i<t.length;i++)this.Ua[i]=t[i].oa}else this.Ua=this.ha();return this.Ua}ha(){return function(t){const i=[];for(let e=0;e<t.U;e++)i[e]=t.Jb(e).oa;return i.item=i=>{const e=0|i,s=t.Jb(e);return s&&s.oa||void 0},_.defineProperty(i,"constructor",{value:uv}),i}(this)}Am(t){const i=this.X$;for(let e=i.length-1;e>=0;e-=1){const s=i[e];if(t.hp(s))return!0}return!1}Jb(t){return this.X$[t]}constructor(t){this.Ua=void 0,this.X$=t}};r();var iC=class extends bo{ha(){return new eC(this.Lt.oa,this.cg)}constructor(t,i){super(Os._w),this.Lt=t,this.cg=i}},eC=class extends te{constructor(t,i){super("readystatechange"),this.track=t,this.readyState=i}};r();var sC=class extends bo{ha(){return new nC(this.Lt.oa)}constructor(t){super(Os.ww),this.Lt=t}},nC=class extends te{constructor(t){super("typechange"),this.track=t}};r();var rC=class extends bo{ha(){return new hC(this.Qm.oa)}constructor(t){super(Os.Jg),this.Qm=t}},hC=class extends te{constructor(t){super("addcue"),this.cue=t}};r();var oC=class extends bo{ha(){return new aC(this.Qm.oa)}constructor(t){super(Os.iw),this.Qm=t}},aC=class extends te{constructor(t){super("removecue"),this.cue=t}},wn=class extends i{get q(){return this.Z$}get L(){return this.K$}J$(t){return Gr(this.K$.Nw,(i=>i.o===t))}get zS(){return this.t0}set zS(t){this.t0=t}get Jw(){return this.i0}get oa(){return this.Ua||(this.Ua=this.ha()),this.Ua}ha(){return Qo(this)}get o(){return this.ym}get Bw(){return this.Mm}get qw(){return this.e0}set qw(t){this.e0=t}get zt(){return this.s0}get dh(){return this.Tm}set dh(t){t!==this.Tm&&(this.Tm=t,this.mo(new Oe(this)))}get gs(){return this.$L}get Rw(){return this.n0}get Xw(){return this.DR}set Xw(t){this.Uo(t)}Uo(t){const i=Ne(t);i!==this.Xw&&(this.DR=i,i===Ht.gh&&(this.r0.forEach((t=>{t.Yh=!1})),Ri(this.r0),this.h0=0),this.mo(new de(this)))}get cg(){return this.O$}set cg(t){this.O$!==t&&(this.O$=t,this.mo(new iC(this,this.O$)))}get tA(){return this.o0}set tA(t){this.o0=t}get $w(){return this.a0}set $w(t){this.a0!==t&&(this.a0=t,this.mo(new sC(this)))}xS(t){if(!t||t.Lt)return;const i=Zk(this.u0,t,Xk);if(i>=0)return;const e=Zk(this.L.Nw,t,N);t.Lt=this;const s=-(i+1);this.u0.splice(s,0,t);const n=-(e+1);this.c0(t,n),this.mo(new rC(t))}c0(t,i){this.X$.splice(i,0,t),this.l0(i),t.cp=i,i<this.h0&&(this.h0=i)}GI(t){if(!t||t.Lt!==this)return;const i=this.W$(t);if(i<0)return;t.Yh=!1;const e=this.r0,s=Zk(e,t,N);s>=0&&jc(e,s);Zk(this.u0,t,Xk);s>=0&&jc(this.u0,s),this.d0(t,i),this.mo(new oC(t))}d0(t,i){jc(this.X$,i),this.l0(i),t.cp=-1,this.h0>i&&--this.h0}ip(t){if(!t||t.Lt!==this)return;const i=this.W$(t);if(i<0)return;this.d0(t,i);const e=Kk(this.L.Nw,t,N);this.c0(t,e);const s=Da(this.r0,(i=>i===t));if(s>=0){jc(this.r0,s);const i=Kk(this.r0,t,N);this.r0.splice(i,0,t)}}f0(t,i){const e=this.r0,s=this.X$;let n=this.h0,r=!1;i&&(n=0);for(let i=e.length-1;i>=0;i--){qk(e[i],t)||(r=!0,jc(e,i))}for(;n<s.length&&s[n].Fm<=t;){const i=s[n];if(0===t)break;qk(i,t)&&!na(e,i)&&(r=!0,e.push(i)),n++}r&&x_(e,N),this.h0=n}W$(t){return(-1===t.cp||t.cp>=this._0)&&this.g0(),t.cp}g0(){const t=this.X$;for(let i=this._0;i<t.length;i++)t[i].cp=i;this._0=t.length}l0(t){t<this._0&&(this._0=t)}Kw(t){this.Jw||(this.Xw=t)}cn(){this.Bo();const t=this.X$.slice();for(const i of t)i.cn();Ri(this.X$),Ri(this.u0),Ri(this.r0)}constructor(t,i,e,s,n,r,h,o,a){super(),this.Mm=mu(),this.t0=!1,this.DR=Ht.gh,this.O$=Ot.NONE,this.o0=void 0,this.X$=[],this.u0=[],this.r0=[],this._0=0,this.h0=0,this.ym=i||"",this.e0=o||"",this.s0=t,this.$L=s||"",this.t0=Boolean(n),this.i0=Boolean(h),this.a0=r||Ks.DEFAULT,this.Tm=e||"",this.n0=a||[],this.K$=new tC(this.X$),this.Z$=new tC(this.r0)}};r(),r(),r();var uC=class extends au{ha(){return new cC(this.Qm.oa)}constructor(t,i){super(Sl.Rm,t),this.Ay=i}},cC=class extends Ja{constructor(t){super("enter",t)}};r();var lC=class extends au{ha(){return new dC(this.Qm.oa)}constructor(t,i){super(Sl.Um,t),this.Ay=i}},dC=class extends Ja{constructor(t){super("exit",t)}};r();var fC=class extends bo{ha(){return new _C(this.Qm.oa)}constructor(t){super(Os.ow),this.Qm=t}},_C=class extends te{constructor(t){super("entercue"),this.cue=t}};r();var gC=class extends bo{ha(){return new wC(this.Qm.oa)}constructor(t){super(Os.uw),this.Qm=t}},wC=class extends te{constructor(t){super("exitcue"),this.cue=t}},Qu=class extends ha{get Bw(){return this.Mm}get Fm(){return this.w0.startTime}set Fm(t){this.w0.startTime=t}get Ym(){return this.w0.endTime}set Ym(t){this.w0.endTime=t}get O(){return this.sp}set O(t){this.sp=t}get np(){return!!this.w0.pauseOnExit}set np(t){this.w0.pauseOnExit=!!t}get Lt(){return this.tp}set Lt(t){this.tp=t}get o(){return this.w0.id||""}get oa(){return this.Ua||(this.Ua=this.ha()),this.Ua}ha(){return Rh(this)}get Yh(){return this.Kh}set Yh(t){this.Yh!==t&&(this.Kh=t,t?(this.mo(new uC(this,this.Fm)),this.tp&&this.tp.mo(new fC(this))):(this.mo(new lC(this,this.Ym)),this.tp&&this.tp.mo(new gC(this))))}hp(t){return this===t||Dg(this,t)&&fv(this,t)&&this.op(t)}op(t){return Ph(this.O,t.O)}cn(){this.Bo(),this.w0.removeEventListener("enter",this.A0),this.w0.removeEventListener("exit",this.v0)}constructor(t){super(),this.sp=void 0,this.tp=void 0,this.Ua=void 0,this.Kh=!1,this.A0=()=>{this.Yh=!0},this.v0=()=>{this.Yh=!1},this.Mm=Hw(),this.w0=t,this.Km=t.startTime,this.Jm=t.endTime,this.w0.addEventListener("enter",this.A0),this.w0.addEventListener("exit",this.v0)}};r();var AC=class extends bo{ha(){return new vC(this.Lt.oa)}constructor(t){super(Os.lw),this.Lt=t}},vC=class extends te{constructor(t){super("cuechange"),this.track=t}};function mC(t){if(!t)return;let i=t.THEOplayerVTTRegion;return i||(i=new pC(t),t.THEOplayerVTTRegion=i),i}r(),r();var pC=class{get m0(){return this.p0}get o(){return this.p0.id||""}get ji(){return+this.p0.width||0}set ji(t){this.p0.width=t||0}get lp(){return+this.p0.lines||0}set lp(t){this.p0.lines=t||0}get dp(){return+this.p0.regionAnchorX||0}set dp(t){this.p0.regionAnchorX=t||0}get fp(){return+this.p0.regionAnchorY||0}set fp(t){this.p0.regionAnchorY=t||0}get gp(){return+this.p0.viewportAnchorX||0}set gp(t){this.p0.viewportAnchorX=t||0}get wp(){return+this.p0.viewportAnchorY||0}set wp(t){this.p0.viewportAnchorY=t||0}get _p(){return this.p0.scroll||""}get oa(){return this.Ua||(this.Ua=mv(this)),this.Ua}constructor(t){this.Ua=void 0,this.p0=t}};var yC=class extends Qu{get O(){return this.w0.text}set O(t){this.w0.text=t}get Pt(){return this.w0.vertical||""}set Pt(t){this.w0.vertical=t||""}get Zm(){return this.w0.snapToLines}set Zm(t){this.w0.snapToLines=t}get Vm(){return this.w0.line}set Vm(t){this.w0.line=t}get Xm(){return+this.w0.size}set Xm(t){this.w0.size=It(t,0,100)}get oa(){return this.Ua||(this.Ua=this.ha()),this.Ua}ha(){return cv(this)}op(t){return _v(this,t)}constructor(t){super(t)}},MC=class extends yC{get qm(){return mC(this.w0.region)}get Wm(){return this.w0.lineAlign||"start"}set Wm(t){this.w0.lineAlign=t||"start"}get ao(){return this.w0.position}set ao(t){this.w0.position=t}get Hm(){return this.w0.positionAlign||"auto"}set Hm(t){this.w0.positionAlign=t||"auto"}get Gm(){return this.w0.align||"center"}set Gm(t){this.w0.align=t||"center"}constructor(t){super(t)}},TC=class extends yC{get qm(){return mC(this.m0)}get m0(){return function(t,i){if(void 0===i)return;let e=t&&t.regions;return e&&e.getRegionById(i)||void 0}(this.w0.track,this.w0.regionId)}get Wm(){return function(t){return"middle"===t?"center":t}(this.w0.lineAlign||"start")}set Wm(t){this.w0.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get ao(){return this.w0.position}set ao(t){this.w0.position=function(t,i){return av(t,i)}(t,this.Gm)}get Hm(){return function(t){return hv[t]}(this.w0.positionAlign||"middle")}set Hm(t){this.w0.positionAlign=function(t,i){return rv[ov(t,i)]}(t||"center",this.Gm)}get Gm(){return function(t){return"middle"===t?"center":t}(this.w0.align||"middle")}set Gm(t){this.w0.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function NC(t,i){return t.O===i.O}function DC(t,i){if(0===i.length)return;const e=i.length-1;if(i[e].Fm<t.Fm)return void IC(i,e,t.Fm);const s=i[0];if(s.Fm>t.Fm)return void(t.Ym=s.Fm);const n=Zk(i,t,N);if(n>=0)return;const r=-(n+1),h=r-1;if(h>=0){i[h].Fm<t.Fm&&IC(i,h,t.Fm)}if(r<i.length){const e=i[r];t.Ym=e.Fm}}function IC(t,i,e){const s=t[i].Fm;for(let n=i;n>=0&&t[n].Fm===s;n--)t[n].Ym=e}function SC(t){return Rh(t)}r(),r(),r(),r();var EC,bC,LC=class extends Qu{get O(){return this.y0}get oa(){return this.Ua||(this.Ua=this.ha()),this.Ua}ha(){return SC(this)}op(t){return NC(this,t)}constructor(t,i){super(t),this.y0=i}};function $(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function I(t){switch(t){case 0:return du;case 1:return WA;case 2:return Fa;case 3:return yl}}function kC(t,i){const e=i.qu,s=t.byteLength,n=xe(t);return i.Sm(s-e),Th(n,e,s).buffer}function CC(t,i){return{id:t||"",data:i instanceof ArrayBuffer?i:void 0}}function xC(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s);return{id:e,language:Vo(t,i,3),description:n(t,i),text:n(t,i)}}function OC(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s);return{id:e,mimeType:du(t,i),fileName:n(t,i),description:n(t,i),data:kC(t,i)}}function jC(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s),r=[];for(;i.qu<t.byteLength;)r.push({involvement:n(t,i),involvee:n(t,i)});return{id:e,entries:r}}function zC(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s),r=Vo(t,i,3),h=F(t,i),o=F(t,i),a=n(t,i);let u=!1;const c=[];for(;i.qu<t.byteLength;){let e;if(1===s){let s=VA(t,i);void 0===s?s=u:u=s,e=Fa(t,i,s)}else e=n(t,i);if(!e||i.qu+4>t.byteLength)break;c.push({text:e,timestamp:Sn(t,i)})}return{id:e,language:r,format:h,contentType:o,description:a,entries:c}}function PC(t,i,e){return{id:e,ownerIdentifier:du(t,i),identifier:kC(t,i)}}function BC(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s);return{id:e,language:Vo(t,i,3),description:n(t,i),text:n(t,i)}}function RC(t,i,e){const s=F(t,i);if(!$(s))return;return{id:e,text:I(s)(t,i)}}function UC(t,i,e){return{id:e,url:du(t,i)}}function QC(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s);return{id:e,description:n(t,i),text:n(t,i)}}function FC(t,i,e){const s=F(t,i);if(!$(s))return;return{id:e,description:I(s)(t,i),url:du(t,i)}}function YC(t,i,e){switch(e){case"COM":return xC(t,i,e);case"GEO":return OC(t,i,e);case"IPL":return jC(t,i,e);case"PIC":return function(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s),r=Vo(t,i,3),h=F(t,i),o=n(t,i);let a,u;return"--\x3e"===r?(a=r,u=du(t,i)):(a="image/"+r.toLowerCase(),u=kC(t,i)),{id:e,mimeType:a,pictureType:h,description:o,data:u}}(t,i,e);case"SLT":return zC(t,i,e);case"TXX":return QC(t,i,e);case"UFI":return PC(t,i,e);case"ULT":return BC(t,i,e);case"WXX":return FC(t,i,e);default:if("T"===e.charAt(0))return RC(t,i,e);if("W"===e.charAt(0))return UC(t,i,e)}}function GC(t,i,e){switch(e){case"APIC":return function(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s),r=du(t,i),h=F(t,i),o=n(t,i);let a;return a="--\x3e"===r?du(t,i):kC(t,i),{id:e,mimeType:r,pictureType:h,description:o,data:a}}(t,i,e);case"COMM":return xC(t,i,e);case"COMR":return function(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s),r=du(t,i),h=Vo(t,i,8),o=du(t,i),a=F(t,i),u=n(t,i),c=n(t,i);let l,d;return i.qu<t.byteLength&&(l=du(t,i)||"image/",d=kC(t,i)),{id:e,price:r,validUntil:h,contactURL:o,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:l,sellerLogo:d}}(t,i,e);case"GEOB":return OC(t,i,e);case"IPLS":return jC(t,i,e);case"PRIV":return function(t,i,e){return{id:e,ownerIdentifier:du(t,i),data:kC(t,i)}}(t,i,e);case"POSS":return function(t,i,e){return{id:e,format:F(t,i),position:Sn(t,i)}}(t,i,e);case"SYLT":return zC(t,i,e);case"TXXX":return QC(t,i,e);case"UFID":return PC(t,i,e);case"USER":return function(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s);return{id:e,language:Vo(t,i,3),text:n(t,i)}}(t,i,e);case"USLT":return BC(t,i,e);case"WXXX":return FC(t,i,e);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return RC(t,i,e);default:{const s=e.charAt(0);if("T"===s)return RC(t,i,e);if("W"===s)return UC(t,i,e)}}}r(),r(),function(t){t[t.ISO_8859_1=0]="ISO_8859_1",t[t.UTF16_BOM=1]="UTF16_BOM",t[t.UTF16=2]="UTF16",t[t.UTF8=3]="UTF8"}(EC||(EC={})),function(t){t[t.V22=2]="V22",t[t.V23=3]="V23",t[t.V24=4]="V24"}(bC||(bC={}));var VC=10;function WC(t,i){return(127&F(t,i))<<21|(127&F(t,i))<<14|(127&F(t,i))<<7|127&F(t,i)}function HC(t,i){switch(t){case 4:return{M0:eu(i,0),T0:eu(i,1),N0:eu(i,2),D0:eu(i,3)};case 3:return{M0:eu(i,0),T0:eu(i,1),N0:eu(i,2)};case 2:return{M0:eu(i,0),I0:eu(i,1)}}}function qC(t,i,e){switch(e.DT){case 3:e.IT.T0&&function(t,i){const e=i.qu,s=Sn(t,i)+4,n=32768&BA(t,i);i.Em(e+s),n&&Sn(t,i)}(t,i);break;case 4:e.IT.T0&&function(t,i){const e=i.qu,s=WC(t,i);i.Em(e+s)}(t,i)}}function XC(t,i){if(t.byteLength-i.qu<VC)return null;if(73!==F(t,i)||68!==F(t,i)||51!==F(t,i))return null;const e=F(t,i),s=F(t,i);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(e))return null;const n=F(t,i),r=WC(t,i);return{DT:e,S0:s,IT:HC(e,n),E0:r}}function ZC(t,i,e){switch(e){case 2:return function(t,i){if(i.qu+6>t.byteLength)return;return{o:Vo(t,i,3),Xm:Fi(t,i,3)}}(t,i);case 3:return function(t,i){if(i.qu+10>t.byteLength)return;const e=Vo(t,i,4),s=Sn(t,i);F(t,i);const n=F(t,i);return{o:e,Xm:s,IT:{I0:eu(n,0),b0:eu(n,1),groupingIdentity:eu(n,2)}}}(t,i);case 4:return function(t,i){if(i.qu+10>t.byteLength)return;const e=Vo(t,i,4),s=WC(t,i);F(t,i);const n=F(t,i);return{o:e,Xm:s,IT:{groupingIdentity:eu(n,1),I0:eu(n,4),b0:eu(n,5),M0:eu(n,6),L0:eu(n,7)}}}(t,i)}}function KC(t){const i=xe(t),e=new T(i.byteLength);let s=0;for(let t=0;t<i.byteLength;t++){const n=i[t];255===n&&t++,e[s]=n,s++}return Ao(Th(e,0,s))}function JC(t,i){const e=i||new Vr,s=XC(t,e);if(!s)return null;const n=function(t,i,e){const s=[],n=i.qu;let r=We(t,n,n+e.E0);const h=new Vr;switch(i.Sm(e.E0),e.DT){case 2:case 3:e.IT.M0&&(r=KC(r))}qC(t,i,e);for(;h.qu<r.byteLength;){const t=$C(r,h,e);if(void 0===t)break;s.push(t)}return s}(t,e,s);return{pT:s,k0:n}}function $C(t,i,e){const s=ZC(t,i,e.DT);if(void 0===s)return;if(0===s.o.charCodeAt(0)||0===s.Xm)return;const n=i.qu;let r,h,o=We(t,n,n+s.Xm);switch(i.Sm(s.Xm),e.DT){case 2:{const t=s;h=o,r=YC(h,new Vr,t.o);break}case 3:{const t=s,i=new Vr;!function(t,i,e){const s=e.IT;let n,r,h;s.I0&&(n=Sn(t,i)),s.b0&&(r=F(t,i)),s.groupingIdentity&&(h=F(t,i))}(o,i,t);h=We(o,i.qu,o.byteLength),r=GC(h,new Vr,t.o);break}case 4:{const t=s,i=new Vr;t.IT.M0&&(o=KC(o)),function(t,i,e){const s=e.IT;let n,r,h,o;s.groupingIdentity&&(n=F(t,i)),s.I0&&(r=Sn(t,i)),s.b0&&(h=F(t,i)),s.L0&&(o=WC(t,i))}(o,i,t);h=We(o,i.qu,o.byteLength),r=GC(h,new Vr,t.o);break}}if(!r){const t=Ge(xe(h));r=CC(s.o,t.buffer)}return r}function tx(t){return function(t,i,e){return RC(t,i,e)}(new DataView(t.data),new Vr,t.key)}function ix(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return tx(t);default:let i=t.key.charAt(0);if("T"===i)return function(t){return{id:t.key,text:t.data}}(t);if("W"===i)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return CC(t.key,t.data)}(t)}r(),r();var Us=class t extends i{get q(){return this.Z$}get zS(){return this.C0?this.C0.default:void 0}get L(){return this.K$}get oa(){return this.Ua||(this.Ua=this.ha()),this.Ua}ha(){return Qo(this)}get o(){return this.pm.id||this.C0&&this.C0.id||""}get Bw(){return this.Mm}get qw(){return this.pm.inBandMetadataTrackDispatchType||""}get zt(){return this.pm.kind||Pt.HM}get dh(){return this.Tm}set dh(t){t!==this.Tm&&(this.Tm=t,void 0!==this.C0&&(this.C0.label=t),this.mo(new Oe(this)))}get gs(){return this.pm.language||""}get Xw(){return this.DR}set Xw(t){let i=this.Xw;this.DR=Ne(t),this.x0();let e=this.Xw;i!==e&&this.mo(new de(this)),e!==Ht.gh&&this.O0(Ot.LOADING)}get j0(){return Ne(this.pm.mode)}set j0(t){this.pm.mode=t}get Nm(){return this.pm}get cg(){return this.O$}get z0(){return this.C0?+this.C0.readyState||Ot.NONE:Ot.LOADED}get tA(){return this.o0}get $w(){return this.a0}set $w(t){this.a0!==t&&(this.a0=t,this.mo(new sC(this)))}get P0(){return this.B0}set P0(t){this.B0=t,t&&(this.R0=!0,u((()=>{this.R0=!1}),50)),this.x0()}x0(){let t=this.Xw;this.P0||t!==Ht.Un?this.j0=t:this.j0=Ht.Zw}U0(){let t=this.Xw,i=this.j0;t!==i&&(this.P0||t!==Ht.Un||i!==Ht.Zw)&&("metadata"===this.zt&&i===Ht.gh?this.Xw=t:this.R0&&i===Ht.gh&&t===Ht.Un?this.j0=t:this.Xw=i)}z$(t){this.O$!==t&&(this.O$=t,this.mo(new iC(this,t)))}O0(t){let i=x.max(this.O$,this.z0,t);this.z$(i)}static Q0(t){return t&&t.THEOplayerTextTrackCue||void 0}F0(i){let e=t.Q0(i);if(e)return e;if(e=this.Y0(i),rt(e))for(let t of e)t.Lt=this;else e.Lt=this;return i.THEOplayerTextTrackCue=e,e}Y0(t){return function(t){return!(!t||"org.id3"!==t.type||!t.value)}(t)?(this.$w=Ks.ID3,function(t){let i;try{i=ix(t.value)}catch(t){i=CC("")}return new LC(t,i)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.$w=Ks.ID3,function(t){let i=[];try{let e=JC(new DataView(t.data));if(e)for(let s of e.k0)i.push(new LC(t,s))}catch(t){}return i}(t)):function(t){return"text"in t}(t)?(this.$w=Ks.WEBVTT,function(t){return"regionId"in t}(t)?new TC(t):new MC(t)):new Qu(t)}G0(t){let i=[];if(!t)return i;let e=t.length;for(let s=0;s<e;s++){let e=this.F0(t[s]||t.item(s));if(rt(e))for(let t of e)i.push(t);else i.push(e)}return i}V0(){let t=this.G0(this.pm.cues),i=$k(this.X$,t);for(let t of i.q$)t.rn(Sl.Um,this.W0),t.rn(Sl.Rm,this.W0),this.mo(new oC(t));for(let t of i.H$)t.ln(Sl.Rm,this.W0),t.ln(Sl.Um,this.W0),this.mo(new rC(t))}f0(){let t=this.G0(this.pm.activeCues),i=$k(this.r0,t);for(let t of i.q$)t.Yh=!1;for(let t of i.H$)t.Yh=!0;(i.H$.length||i.q$.length)&&this.mo(new AC(this))}Kw(t){this.Xw=t}cn(){this.Bo();const t=this.X$.slice();for(let i of t)i.cn();Ri(this.X$),Ri(this.r0),this.pm.removeEventListener("cuechange",this.H0),this.pm.removeEventListener("cuechange",this.W0),this.C0&&(this.C0.removeEventListener("load",this.q0),this.C0.removeEventListener("error",this.X0),ei(this.C0))}constructor(t,i,e=!0){super(),this.X$=[],this.r0=[],this.DR=Ht.gh,this.O$=Ot.NONE,this.o0=void 0,this.a0=Ks.DEFAULT,this.R0=!1,this.H0=()=>{this.x0(),this.pm.removeEventListener("cuechange",this.H0)},this.W0=()=>{this.Xw!==Ht.gh&&(this.V0(),this.f0(),this.X$.length&&this.O0(Ot.LOADING))},this.q0=()=>{this.O0(Ot.LOADED)},this.X0=()=>{this.O0(Ot.ERROR)},this.pm=t,this.B0=e,this.pm.addEventListener("cuechange",this.H0),this.pm.addEventListener("cuechange",this.W0),this.C0=i,this.C0&&(this.o0=Wa(this.C0.src),this.C0.addEventListener("load",this.q0),this.C0.addEventListener("error",this.X0)),this.Mm=mu(),this.Tm=t.label||"",this.K$=new tC(this.X$),this.Z$=new tC(this.r0),this.Xw=this.j0,yc((()=>{this.W0(),this.O0(Ot.NONE)}))}};r(),r();function ex(t,i){return Li(t.Ay,i.Ay)||function(t,i){return t.Lt===i.Lt?Xo(Jk(t),Jk(i)):up(t.Lt,i.Lt)}(t.Qm,i.Qm)||function(t,i){return t===i?Ji.Wr:t===Sl.Rm?Ji.Uf:Ji.Rf}(t.type,i.type)}var sx=class{Wn(){Ri(this.Z0);for(const t of this.Al.slice())this.it(t);this.K0(),this.J0=0,this._n=0,this.$0=!1,this.t1=!1,this.i1=void 0}tt(t){if(!na(this.Al,t)){if(this.Al.push(t),t.ln(Os.Jg,this.e1),t.ln(Os.iw,this.s1),t.ln(Os.nw,this.n1),t.ln(Os.Ko,this.o1),t.L.U>0){for(const i of t.L.Nw)this.a1.push(i);this.u1()}this.c1()}}it(t){if(Et(this.Al,t)){if(t.rn(Os.Jg,this.e1),t.rn(Os.iw,this.s1),t.rn(Os.nw,this.n1),t.rn(Os.Ko,this.o1),t.L.U>0){for(const i of t.L.Nw)Et(this.Z0,i),Et(this.a1,i);this.u1()}this.c1()}}c1(){this.$0=this.Al.some((t=>t.Xw!==Ht.gh))}l1(){this.Lo.gg||this.Lo.q_?this.K0():this.u1()}u1(){this.$0&&(this.J0||(this.J0=this.f1.d1(this._1)))}K0(){this.J0&&(this.f1.g1(this.J0),this.J0=0)}w1(){if(!this.$0)return;if(this.Lo.gg)return;const t=this.Al,i=this._n;var e;const s=null!=(e=this.i1)?e:this.Lo.E_,n=s-i<-.1;let r=this.t1||n;r&&s>i&&s-i<.1&&(r=!1),this.t1=!1,this.i1=void 0;const h=[];for(const i of t)if(i.Xw!==Ht.gh){i.f0(s,r);for(const t of i.q.Nw)h.push(t)}const o=this.Z0.slice();if(r);else for(const e of t)e.Xw!==Ht.gh&&ap(e,i-Dc,s,o);for(let t=o.length-1;t>=0;t--)na(h,o[t])&&jc(o,t);const a=[];if(!r)for(let t=o.length-1;t>=0;t--){const e=o[t];e.Fm>i&&e.Ym<=s&&(a.push(e),jc(o,t))}for(const t of this.a1)Et(a,t);Ri(this.a1);const u=[],c=[];for(const t of a)t.Yh||u.push(new uC(t,t.Fm)),u.push(new lC(t,x.max(t.Fm,t.Ym))),t.Yh=!1;for(const t of o)t.Yh&&(u.push(new lC(t,x.max(t.Fm,t.Ym))),t.Yh=!1);for(const t of h)t.Yh||(u.push(new uC(t,t.Fm)),t.Yh=!0);u.sort(ex);for(const t of u){const i=t.Qm;i.mo(t);const e=i.Lt;e&&(t.type===Sl.Rm?e.mo(new fC(i)):e.mo(new gC(i)),na(c,e)||c.push(e))}c.sort(up);for(const t of c)t.mo(new AC(t));this._n=s,this.Z0=h}cn(){this.Wn(),this.Lo.rn(t.XA,this.A1),this.Lo.rn(t.bh,this.A1),this.Lo.rn(qo._v,this.A1),this.Lo.rn(t.yh,this.A1),this.Lo.rn(t.YA,this.v1),this.Lo.rn(t.FA,this.m1)}constructor(i,e){this.Al=[],this.J0=0,this._n=0,this.Z0=[],this.a1=[],this.$0=!1,this.t1=!1,this.i1=void 0,this._1=()=>{this.J0=0,this.w1(),this.l1()},this.A1=()=>{this.w1(),this.l1()},this.v1=()=>{this.t1=!0,this.i1=this.Lo.E_,this.K0()},this.m1=()=>{this.w1(),this.l1()},this.o1=()=>{this.c1(),this.w1(),this.l1()},this.e1=t=>{const i=t.Qm;na(this.a1,i)||this.a1.push(i),this.u1()},this.s1=t=>{const i=t.Qm;Et(this.Z0,i),Et(this.a1,i),this.u1()},this.n1=t=>{this.u1()},this.f1=e,this.Lo=i,i.ln(t.XA,this.A1),i.ln(t.bh,this.A1),i.ln(qo._v,this.A1),i.ln(t.yh,this.A1),i.ln(t.YA,this.v1),i.ln(t.FA,this.m1),this.u1()}};r();var nx=class{d1(t){return Hr(t)}g1(t){fh(t)}},rx=new nx,hx=class extends sx{constructor(t,i=rx){super(t,i)}};r(),r();var ox=class extends Hn{get oa(){return this.Ua||(this.Ua=SC(this)),this.Ua}op(t){return NC(this,t)}constructor(t,i,e){super(t,1/0,i,!1,e)}};r(),r();var ax=class extends wn{constructor(t,i,e=Ks.DEFAULT){super(Pt.XM,"",i||"","",!1,e,!1,t)}},ux=class extends ax{xS(t){DC(t,this.X$),super.xS(t)}ha(){return Qo(this)}constructor(t,i){super(t,i),this.$w=Ks.ID3}};function cx(t){const i=t&&t.THEOplayerTextTrackCue||void 0;if(i)return i;const e=t.startTime,s=ix(t.value);return t.THEOplayerTextTrackCue=new ox(e,s),t.THEOplayerTextTrackCue}var lx=class extends ux{get o(){return this.pm.id||""}get qw(){return this.pm.inBandMetadataTrackDispatchType||""}get gs(){return this.pm.language||""}Uo(t){super.Uo(t),this.j0=this.Xw}get j0(){return Ne(this.pm.mode)}set j0(t){this.pm.mode=t}get Nm(){return this.pm}O0(t){this.cg=x.max(this.cg,t)}V0(){let t=this.pm.cues;if(!t)return;let i=function(t){const i=t.length,e=[];for(let s=0;s<i;s++)e.push(cx(t[s]||t.item(s)));return x_(e,N),e}(t),e=$k(this.L.Nw.slice(),i);for(let t of e.q$)this.GI(t);for(let t of e.H$)this.xS(t)}cn(){this.pm.removeEventListener("cuechange",this.W0),super.cn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.W0=()=>{this.Xw!==Ht.gh&&(this.V0(),this.O0(Ot.LOADED))},this.pm=t,this.pm.addEventListener("cuechange",this.W0),this.Xw=this.j0,yc((()=>{this.W0()}))}};r();var dx=class extends ai{M1(){this.T1.ln(gt.qg,this.Jz),this.T1.ln(gt.Zg,this.$z)}N1(){this.T1.rn(gt.qg,this.Jz),this.T1.rn(gt.Zg,this.$z)}D1(t){const i=t.L.Nw[0];if(!fx(i))return;const e=function(t){const i=t.match(_x);if(!i)return;return{Lt:i[1],gs:i[2]}}(i.O.description),s=e.Lt,n=e.gs;if(this.I1(s,n))return;const r=this.ES.SS(Pt.HM,t.o,s,n,!1,Ks.TTML);this.tt(r),this.S1.set(t.Bw,r);for(let i of t.L.Nw)fx(i)&&this.E1(i);t.ln(Os.Jg,this.b1)}I1(t,i){return this.Z.Nw.some((e=>e.dh===t&&e.gs===i))}E1(t){if(!t.Lt)return;const i=this.S1.get(t.Lt.Bw),e=zm(t.O.text,i,{qy:0,Xy:1/0,Zy:t.Fm});for(let t of e)i.xS(t)}async Wn(){for(let t of this.T1.Nw)t.rn(Os.Jg,this.b1);for(let t of this.Z.Nw)this.ES.jS(t);this.S1.clear(),await super.Wn()}async cn(){this.N1(),await super.cn()}constructor(t,i){super(),this.ES=t,this.T1=i,this.S1=Ye(),this.Jz=async t=>{const i=t.Lt;if(i.$w||await i.v_(Os.ww),i.$w===Ks.ID3){for(;0===i.L.U;)await i.v_(Os.Jg);this.D1(i)}},this.$z=t=>{const i=t.Lt;if(i.$w!==Ks.ID3||!this.S1.has(i.Bw))return;const e=this.S1.get(i.Bw);this.it(e),this.ES.jS(e),i.rn(Os.Jg,this.b1)},this.b1=t=>{fx(t.Qm)&&this.E1(t.Qm)},this.M1()}};function fx(t){return function(t){return function(t){return"TXXX"===t.id||"TXX"===t.id}(t)&&_x.test(t.description)}(t.O)}var _x=/^Track:(.+),Lang:(.+)$/;r(),r();var Le=class extends gg{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(i){super(t.AA),this.errorObject=i}};r(),r(),r();var gx=class extends gg{constructor(){super(t.vA)}};r();var wx=class extends gg{constructor(t){super("JA"),this.L1=t}},Ax=new ro,vx=class extends gg{constructor(t){super("Ws"),this.session=t}},mx=class extends i{DC(){return this.C1=!0,Ax.Lx((t=>this.O1(t)),this.kx.i_)}async O1(t){try{Pi(t),await this.j1.bO(t);const i=await this.j1.LO(this.z1.Bb,this.z1.Zb,t);await this.P1.DC(this.z1.Bb,this.z1.Zb,i)}catch(t){yo(t);const i=t instanceof cy?t.hL:void 0,e=new Yr(le.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,i);throw this.Ss(e),e}}async PO(t,i){let e;try{e=function(t){return ba(t,oy())}(t)?await this.j1.WO(new T(t),this.kx.i_):await this.j1.HO(new T(t),i,this.kx.i_)}catch(t){if(Oi(t))return;throw t}if(this.kx.i_.Wf)return;const s=this.B1,n=new No;this.B1=n;try{await this.P1.Ln(e),await be(100)}catch(t){const i=t instanceof cy?t.hL:void 0;throw new Yr(le.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,i)}finally{void 0!==s&&await s.nL,n.eL(),this.B1===n&&(this.B1=void 0)}}Ss(t){const i=t instanceof Yr?t:new Yr(le.CONTENT_PROTECTION_ERROR,t.message,t);this.mo(new Le(i)),this.Ws()}R1(){this.P1.rn("Gb",this.LC),this.P1.rn("Fb",this.U1),this.P1.rn("lt",this.Q1),this.F1=!1,this.kx.s_(),this.mo(new vx(this))}async Ws(){let t;this.Bo();do{t=this.B1,void 0!==t&&await t.nL}while(this.B1!==t);this.R1(),await this.P1.Ws().catch(xs)}constructor(t,i,e){super(),this.P1=t,this.j1=i,this.z1=e,this.C1=!1,this.F1=!1,this.kx=new Po,this.LC=t=>{if(!this.kx.i_.Wf)switch(t.Vb){case"license-request":case"license-renewal":this.PO(t.Gb,t.Wb).catch((t=>this.Ss(t)));break;default:this.Ss(new Yr(le.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.Vb))}},this.U1=t=>{this.P1.pC.$b(((t,i)=>{switch(t){case"usable":fe.a_((()=>{this.F1=!0,this.mo(new gx)}),100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this.mo(new wx(i))}}))},this.Q1=t=>{this.Ss(new Yr(le.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.ln("Gb",this.LC),t.ln("Fb",this.U1),t.ln("lt",this.Q1),t.AC.then((()=>this.R1()),(t=>this.Ss(t)))}};r();var px=[t.vA,t.AA,t.KA],yx=class extends i{get jC(){return this.EC}EO(){return this.Y1.EO()}G1(t){return this.V1||(this.V1=this.W1(t)),this.V1}async W1(t){Pi(t);const i=await this.Y1.WO(new T(oy()),t);if(Pi(t),!this.OC)throw new b("Invalid MediaKeys when setting ServerCertificate");await this.OC.zC(i.buffer)}async H1(t){if(!this.OC)throw new b("Invalid MediaKeys when creating KeySession");try{this.q1.push(t);const i=await this.OC.xC("temporary"),e=new mx(i,this.Y1,t);return this.X1.push(e),e.ln(px,this.Ds),e.ln("Ws",this.Z1),e}finally{Et(this.q1,t)}}K1(t){if(t.J1)return!1;for(const i of this.X1)if(Mx(i.z1,t))return!0;for(const i of this.q1)if(Mx(i,t))return!0;return!1}async cn(){this.OC=void 0,this.Bo();const t=this.X1.slice();Ri(this.X1),await Promise.all(t.map((t=>t.Ws()))),this.Y1.Xf()}constructor(t,i,e){super(),this.X1=[],this.V1=void 0,this.q1=[],this.Z1=t=>{t.session.rn(px,this.Ds),t.session.rn("Ws",this.Z1),Et(this.X1,t.session)},this.EC=t,this.OC=i,this.Y1=e}};function Mx(t,i){return!t.J1&&t.Bb===i.Bb&&ba(t.Zb,i.Zb)}var Tx=class extends i{get t4(){var t;return null==(t=this.EC)?void 0:t.jC}get LP(){return this.Y1}set LP(t){this.Y1=t}Pn(t,i){this.cP=t,this.bH(i)}bH(t){this.Mx=t,this.i4(this.kx.i_).catch(Ah)}async i4(t){if(!fe.Ys.e4||!await this.s4(t))return this.Mx&&this.Mx.n4?await this.r4(t):void 0}async s4(t){var i,e;if(!(null==(i=this.Mx)?void 0:i.wP))return!1;let s=!1;var n;for(const i of null!=(n=null==(e=this.Mx)?void 0:e.wP)?n:[]){var r;for(const e of null!=(r=i.Fz)?r:[])try{await this.h4(i.jC.Bb,e,t),s=!0}catch(t){yo(t)}if(s)return!0}return!1}async h4(t,i,e){if(Pi(e),!i.byteLength)return;if(!this.Mx||!this.Mx.wP.length)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(t!==Pp&&t!==la&&t!==Bp)return void 0;const s=KN(t,i),n=this.Mx.wP;let r;for(const i of n){Pi(e);const n=s[i.jC.Rb];if(n&&i.jC.Bb===t)try{const t=await this.o4(i,e);t.EO()&&await t.G1();const s=this.sP.R_,r={Bb:i.jC.Bb,Zb:n,J1:s};if(this.a4(t,r)){const i=await t.H1(r);await i.DC()}return}catch(t){yo(t),r=t}}throw await fe.JC()?new Yr(le.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",r):new Yr(le.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",r)}async r4(t){var i;const e=null==(i=this.Mx)?void 0:i.wP;if(e)for(const i of e){Pi(t);try{const e=await this.o4(i,t);return void(e.EO()&&await e.G1())}catch(t){yo(t)}}}a4(t,i){return fe.Ys.u4||this.sP.c4.mH||!t.K1(i)}o4(t,i){return this.OH.Lx((i=>this.l4(t,i)),i)}async l4(i,e){if(Pi(e),!this.Mx||!this.Y1||!this.cP)throw new b("Not initialized");if(this.EC){if(this.EC.jC!==i.jC)throw new b("Internal key system error");return this.EC}const s=this.Y1;var n;const r=oe({},i,{UP:i.UP.map((t=>oe({},t,{persistentState:null!=(n=t.persistentState)?n:s.pj(i.jC),ix:t.ix||s.ix(i.jC)})))}),h=await this.cP.DH(r.jC,r.UP),o=s.Qz(r),a=new yx(r.jC,h,o);return a.ln([t.vA,t.AA,t.KA],this.Ds),this.EC=a,a}Ss(t){if(Oi(t))return;const i=t instanceof Yr?t:new Yr(le.CONTENT_PROTECTION_ERROR,t.message,t);this.mo(new Le(i))}async Wn(){this.cP=void 0,this.Mx=void 0,this.kx.s_(),this.kx=new Po,await this.d4()}async d4(){await this.OH.s_();const i=this.EC;i&&(i.rn(t.KA,this.Ds),this.EC=void 0,await i.cn())}async Xf(){this.Bo(),this.sP.rn(sr.TA,this.f4),await this.Wn(),await this.OH.cn()}constructor(t){super(),this.kx=new Po,this.OH=new ro,this.Mx=void 0,this.Y1=void 0,this.cP=void 0,this.EC=void 0,this.f4=t=>{this.h4(t.Bb,t.Zb,this.kx.i_).catch((t=>this.Ss(t)))},this.sP=t,this.sP.ln(sr.TA,this.f4)}};r();r();var Nx=class extends gg{constructor(i){super(t.kA),this.currentTime=i}};r();var Dx=class extends i{get cg(){return void 0!==this._4?this._4.cg:ow.Rv}z$(){var t;null==(t=this._4)||t.z$()}Wn(){var t;null==(t=this._4)||t.Wn()}Xf(){this.Bo(),void 0!==this._4&&(this._4.Xf(),this._4=void 0)}g4(t){if(this._4===t)return;const i=this.cg;void 0!==this._4&&this._4.Xf(),this._4=t,void 0!==t&&(t.ln(qo._w,this.Ds),t.z$());const e=this.cg;i!==e&&this.mo(new Qi(this.w4.E_,e))}constructor(t){super(),this.w4=t}},Ix=_n.RE||_n.QE,Sx=_n.bb,Ex=_n.KE,bx=_n.KE&&_n.Va,Lx=class extends i{A4(){this.aP.ended||this.E_===this.ct||(this.v4=!1)}get B$(){return this.m4}get M_(){return this.cP?this.cP.M_:Ki.KB()}get N_(){const t=this.lP;if(!t||j(t.getTime()))return;const i=1e3*this.E_;return new Date(t.getTime()+i)}get lP(){if(this.aP.getStartDate)return this.$B&&this.y4||(this.y4=this.aP.getStartDate()),this.y4}get E_(){return this.M4?this.M4.E_:void 0!==this.T4?this.T4:this.Fx.currentTime}get Tu(){return this.Ou}get ct(){return this.M4?this.M4.ct:this.cP?this.cP.ct:this.Fx.duration}get C_(){return this.gg?this.N4():this.M4?this.M4.C_:this.Fx.ended||this.v4}N4(){return void 0!==this.T4&&this.ct===this.T4}get lt(){return this.hP}get aP(){return this.Fx}get q_(){return this.D4?this.I4:this.M4?this.M4.q_:this.Fx.paused}get eg(){return this.Io.xB(Ki.mn(this.Fx.played))}get Ti(){return this.Fx.offsetHeight*fe.Ys.S4}get ji(){return this.Fx.offsetWidth*fe.Ys.S4}get la(){return this.sR}get cg(){return this.E4.cg}get fg(){return this.cP?this.cP.fg:Ki.KB()}get gg(){return this.M4?this.M4.gg:this.$B}get k$(){return this.M4?this.M4.k$:this.C$}get F$(){return 0!==this.b4}get Y_(){return this.M4?this.M4.Y_:this.Fx.muted}set Y_(t){this.M4?this.M4.Y_=t:(this.Fx.muted=t,this.L4())}get Z_(){return this.M4?this.M4.Z_:void 0!==this.C4?this.C4:this.Fx.playbackRate}set Z_(t){this.M4?this.M4.Z_=t:this.q_||this.m4?(this.C4=t,this.x4()):(this.C4=void 0,this.Fx.playbackRate=t,this.x4())}x4(){const t=this.Z_;this.O4!==t&&(this.O4=t,this.mo(new se(this.E_,t)))}get j4(){return this.mB}get Ng(){return this.M4?this.M4.Ng:this.Fx.volume}set Ng(t){this.M4?this.M4.Ng=t:(this.Fx.volume=t,this.L4())}L4(){const t=this.Ng,i=this.Y_;this.z4===t&&this.P4===i||(this.z4=t,this.P4=i,this.mo(new Ve(this.E_,this.Ng)))}F_(){return Kb(this.Fx)}Bg(){this.B4||(this.B4=!0);const t=this.R4();return this.U4(),t}U4(){this.D4?this.I4&&(this.I4=!1,this.mo(new vh(this.E_))):this.Q4()}Q4(){if(this.M4)this.M4.Bg();else{_n.KE&&!_n.Va&&this.Fx.preload===Al.cB&&(this.Fx.preload=Al.XM);const t=this.Z_,i=this.Fx.play();t!==this.aP.playbackRate&&(this.Z_=t),B_(i)?i.then(this.F4,this.Y4):this.G4.Y$()&&this.V4()}}Pg(){this.D4?this.I4||(this.I4=!0,this.mo(new ws(this.E_))):this.W4()}W4(){this.M4?this.M4.Pg():(this.Fx.pause(),this.G4.Ln()),this.H4(new sa)}R4(){const t=new No;return this.q4.push(t),t.nL}X4(){for(const t of this.q4)t.eL(void 0);Ri(this.q4)}H4(t){for(const i of this.q4)i.sL(t);Ri(this.q4)}V4(){this.D4||this.M4||this.X4()}Z4(t){this.D4||this.M4||this.H4(t)}Em(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.M4?this.M4.Em(t,i,e):(this.K4.s_(),this.K4=new Po,this.J4=this.t2(t,i,e,this.J4,this.K4.i_).catch(xs))}nP(t){const i=this.lP;if(!i||j(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Em(e)}async t2(i,e,s,n,r){try{for(this.T4=i,this.i2=i,this.e2=fe.h_(),s&&!this.$B?this.C$=!0:(this.$B=!0,this.C$=!1),this.v4&&!this.N4()&&(this.v4=!1),this.C$?this.mo(new jk(this.E_)):this.mo(new ja(i)),await n.catch(xs),Pi(r),this.s2&&this.n2(),this.E4.cg===ow.Rv&&await this.E4.v_(qo._w,r);0===this.Fx.seekable.length||bx&&!this.B4;)await Promise.race([Kt(this.Fx,"timeupdate",r),be(100,r)]),Pi(r);let h=Ek(this.M_,i,.05),o=this.fg,a=!0,u=!1;for(;;){if(o=this.fg,o.U>0&&!o.ar(h)&&(h=o.EB(h),a=!0),e&&!this.Fx.fastSeek){const t=this.M_;if(!t.ar(h)){const i=Ek(t,h,1);i!==h&&(h=i,a=!0)}}if(Ex){const t=this.h2();void 0!==t&&h>t&&(h=t,a=!0)}if(!u){const t=this.o2();void 0!==t&&h>t&&(u=!0,await this.a2(t,!1,r),await Kt(this.Fx,"seeked",r),Pi(r),a=!0)}if(a){a=!1,await this.a2(h,e,r),Pi(r);let t=this.E_;o=this.fg,h=o.EB(h);let i=1;for(;x.abs(h-t)>=Dc;)o=this.fg,h=Cx(h,o,i),await this.a2(h,e,r),Pi(r),t=this.E_,i++}if(!(this.Fx.seeking||this.E4.cg<ow.Uv))break;await cg((i=>{var e;return Promise.race([Kt(this.Fx,"seeked",i),this.v_([t.BA,t.yA],i),this.E4.v_(qo._w,i),null==(e=this.cP)?void 0:e.v_(AL.TU,i)].filter(z_))}),r),Pi(r)}this.u2()}catch(t){if(Oi(t))return;0}}async a2(i,e,s){Pi(s);let n=this.fg;if(i=n.EB(i),this.s2){let e=!0;for(;e||this.E4.cg<ow.Qv;)n=this.fg,n.ar(i)||(i=n.EB(i),e=!0),e?(e=!1,this.T4=i,this.c2(this.E_)):await cg((i=>Promise.race([this.v_(t.yA,i),this.E4.v_(qo._w,i)])),s);Pi(s)}const r=Kt(this.Fx,"seeking",s);e&&this.Fx.fastSeek?this.Fx.fastSeek(i):this.Fx.currentTime=i,this.T4=void 0,this.c2(this.E_),this.Fx.seeking&&await r}h2(){if(!this.cP||!this.cP.GH)return;const t=this.cP.VH,i=this.cP.WH,e=t&&i?t.yn(i):t||i;if(!e||0===e.U)return;const s=e.gn(e.U-1),n=e.bn(e.U-1);return x.max(s,n-.001)}o2(){if(!this.cP||!this.cP.GH)return;const t=this.cP.WH;if(!t||0===t.U)return;const i=t.gn(t.U-1);let e=t.bn(t.U-1)-.02;return e-=.001,x.max(i,e)}c2(t){this.i2!==t&&(this.i2=t,this.C$?this.mo(new jk(t)):this.mo(new ja(t)))}u2(){const t=this.C$;this.$B=!1,this.C$=!1,this.e2=0,this.i2=NaN,this.s2&&this.l2(),t?(this.mo(new Nx(this.E_)),this.d2()):this.mo(new _e(this.E_))}n2(){this.D4||(this.I4=this.q_,this.D4=!0,this.W4())}l2(){this.D4&&(this.D4=!1,this.I4||this.U4())}HH(t){for(const i of t){if(i.$w===Pe.tO&&pL.HH(i,this.Fx))return i;if(i.$w===Pe.iO&&xk.HH(i))return i}}be(){this.mB=!1,Fs(this.Fx)&&(this.Fx.style.display="none")}ge(){this.mB=!0,Fs(this.Fx)&&(this.Fx.style.display="block")}get nt(){return this.f2}get Nl(){return this.aR}SS(t,i,e,s,n,r,h,o,a){const u=new wn(t,i,e,s,n,r,h,a,o);return this.Al.tt(u),this._2.tt(u),u}MP(){return!0}NP(t,i,e,s,n){const r=h.createElement("track");r.src=Wa(t),r.kind=i,r.label=null!=e?e:"",s&&(r.srclang=s),r.default=!!n,r.id=Rs(),this.Fx.appendChild(r);const o=this.Fx.textTracks.getTrackById(r.id),a=new Us(o,r);return this.g2.tt(a),this.w2.push(a),a}jS(t){this.Al.it(t),this._2.it(t)}IP(){for(const t of this.Al.Nw.slice())t.cn();this.Al.Wn();for(const t of this.w2.slice())this.g2.it(t),t.cn();Ri(this.w2)}QP(){let t=this.Fx.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this.A2),t.addEventListener("removetrack",this.m2),t.addEventListener("change",this.M2))}bP(){let t=this.Fx.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this.A2),t.removeEventListener("removetrack",this.m2),t.removeEventListener("change",this.M2))}T2(t,i){if(_n.KE){if(t.kind===Pt.XM)return void this.N2(t);if(t.kind===Pt.kI&&""===t.label&&""===t.language&&!Ox(t))return void this.D2(t,i)}xx(this.g2,t)||this.g2.tt(new Us(t,i))}N2(t){t.mode=Ht.Zw;const i=new lx(t);this.g2.tt(i),this._2.tt(i)}D2(t,i){const e=()=>{Ox(t)&&(t.removeEventListener("cuechange",e),this.g2.tt(new Us(t,i)))};t.addEventListener("cuechange",e),t.mode=Ht.Zw}I2(t){let i=this.Fx.getElementsByTagName("track");for(let e=0;e<i.length;e++){let s=i[e]||i.item(e);if(s.track===t)return s}}Pn(i){return this.S2.Lx((async e=>{if(Pi(e),this.cP)throw new b("Already loaded a media source");let s;if(i.$w===Pe.tO)s=new pL(i,this,this.LH,this.KC),this.s2=!1,this.E4.g4(new Fk(this));else{if(i.$w!==Pe.iO)throw new b("Unsupported configuration");{const e=this.s2?new Yk(this):new Fk(this);s=new xk(i,this,e,this.LH,this.KC,void 0,this.n$),this.s2=Ix,this.E4.g4(e),Sx&&(this.ln(t.XA,this.E2),this.E4.ln(qo._w,this.b2))}}return this.cP=s,await s.VV(),s}))}L2(){if(this.m4)return;const t=this.Z_;this.m4=!0,this.Z_=t,this.Fx.playbackRate=0,this.E4&&this.E4.z$()}C2(){if(!this.m4)return;const t=this.Z_;this.m4=!1,this.Z_=t,this.O2()}O2(){this.Fx.currentTime=this.Fx.currentTime,this.E4&&this.E4.z$()}async Wn(){this.$B=!1,this.C$=!1,fe.o_(this.b4),this.b4=0,this.Io=Ki.KB(),this.K4.s_(),this.T4=void 0,this.i2=NaN,this.y4=void 0,this.s2=!1,this.D4=!1,this.hP=void 0,this.v4=!1,this.j2=void 0,this.z2=!1,this.B4=!1,this.P2&&(this.B2(),this.P2=!1),this.H4(new sa),this.E4.g4(new Fk(this)),this.G4.Wn(),this.g2.Wn(),this.C2(),Sx&&(fh(this.R2),this.R2=0,this.rn(t.XA,this.E2)),await this.S2.s_(),await this.S2.Lx((async()=>{this.cP&&(await this.cP.Xf(),this.cP=void 0)}))}async Xf(){this.P2=!1,this.U2(),this.bP(),await this.Wn(),await this.S2.cn(),this.G4.Xf(),this.E4.Xf(),await this.LH.Xf(),this.IP(),this.Al.cn(),this.g2.cn(),await this.Q2.cn(),this.F2.cn(),this.f2.cn(),this.Bo()}B2(){this.aP.addEventListener("play",this.Y2),this.aP.addEventListener("pause",this.G2),this.aP.addEventListener("timeupdate",this.V2),this.aP.addEventListener("progress",this.W2),this.aP.addEventListener("loadstart",this.H2),this.aP.addEventListener("ended",this.q2),this.aP.addEventListener("ratechange",this.X2),this.aP.addEventListener("volumechange",this.Z2),this.aP.addEventListener("durationchange",this.K2),this.aP.addEventListener("resize",this.J2),this.aP.addEventListener("loadedmetadata",this.J2),this.aP.addEventListener("error",this.t3),this.aP.addEventListener("emptied",this.i3),NT()?(this.Fx.addEventListener("encrypted",this.e3),this.Fx.addEventListener("waitingforkey",this.s3)):void 0!==Ys.WebKitMediaKeys&&"function"==typeof Ys.WebKitMediaKeys.isTypeSupported?this.Fx.addEventListener("webkitneedkey",this.n3):Za()?this.Fx.addEventListener("webkitneedkey",this.r3):void 0!==Ys.MSMediaKeys&&"function"==typeof Ys.MSMediaKeys.isTypeSupported&&this.Fx.addEventListener("msneedkey",this.h3)}U2(){this.aP.removeEventListener("play",this.Y2),this.aP.removeEventListener("pause",this.G2),this.aP.removeEventListener("timeupdate",this.V2),this.aP.removeEventListener("progress",this.W2),this.aP.removeEventListener("loadstart",this.H2),this.aP.removeEventListener("ended",this.q2),this.aP.removeEventListener("ratechange",this.X2),this.aP.removeEventListener("volumechange",this.Z2),this.aP.removeEventListener("durationchange",this.K2),this.aP.removeEventListener("resize",this.J2),this.aP.removeEventListener("loadedmetadata",this.J2),this.aP.removeEventListener("error",this.t3),this.aP.removeEventListener("encrypted",this.e3),this.aP.removeEventListener("waitingforkey",this.s3),this.aP.removeEventListener("webkitneedkey",this.n3),this.aP.removeEventListener("webkitneedkey",this.r3),this.aP.removeEventListener("msneedkey",this.h3),this.aP.removeEventListener("emptied",this.i3)}o3(){this.M4||(this.Io=this.eg,this.M4=Bk(this),this.U2(),this.M4.ln(zk,this.Ds))}a3(){if(!this.M4)return;const t=this.M4;this.M4=void 0,this.E4.z$(),Rk(this,t),t.Xf(),this.B2()}d2(){const t=this.E_;this.mo(new Tc(t,void 0)),this.j2=t}qP(t){this.hP=t,this.H4(this.hP),this.mo(new Hk(this.hP))}get R_(){return!!this.Fx.webkitCurrentPlaybackTargetIsWireless}get u3(){return this.l3}get c4(){return oe({},gL)}d3(){this.u3||(lj(this.Fx,fe.Ys),this.l3=!0)}f3(t){t.appendChild(this.Fx)}uJ(){Sx&&this.E2(),this.E4.z$()}get LP(){return this.LH.LP}set LP(t){this.LH.LP=t}get _3(){return this.n$}set _3(t){this.n$=t}get t4(){return this.LH.t4}Yg(){this.LH.d4().catch(xs),this.g2.Wn()}get Lg(){return this.z2}set Lg(t){this.z2=t,this.P2&&!this.z2&&(this.P2=!1,this.B2())}constructor(i,e,s,n){super(),this.hP=void 0,this.mB=!0,this.cP=void 0,this.S2=new ro,this.M4=void 0,this.sR=new Ro,this.w2=[],this.T4=void 0,this.e2=0,this.i2=NaN,this.y4=void 0,this.j2=void 0,this.$B=!1,this.C$=!1,this.g3=ow.Rv,this.b4=0,this.J4=Promise.resolve(),this.K4=new Po,this.q4=[],this.Io=Ki.KB(),this.C4=void 0,this.O4=1,this.P4=!1,this.z4=1,this.v4=!1,this.z2=!1,this.P2=!1,this.s2=!1,this.D4=!1,this.I4=!1,this.m4=!1,this.l3=!1,this.R2=0,this.B4=!1,this.A2=t=>{const i=t.track,e=this.I2(i);this.T2(i,e)},this.m2=t=>{const i=xx(this.g2,t.track);i&&this.g2.it(i)},this.M2=()=>{for(let t=0;t<this.g2.U;t++){let i=this.g2.Iw(t);i instanceof Us&&i.U0()}},this.E2=()=>{if(void 0===this.cP||!wL(this.cP))return;const t=this.cP,i=t.r$,e=t.h$;if(!i||!e)return;if(t.GH)return void this.C2();if(t.cg===Pn.tJ)return;const s=i.M_,n=e.M_;if(0===s.U&&0===n.U)return void this.C2();const r=this.E_;if(r<s.gn(0)||r<n.gn(0))return void this.C2();if(s.ar(r)!==n.ar(r)){if(t.kH(r))return;this.L2()}else if(this.C2(),!this.R2&&this.G4.Y$()){s.OB(n).RB(r,r+.5)&&(this.R2=Hr(this.w3))}},this.w3=()=>{this.R2=0,this.E2()},this.b2=()=>{if(this.gg||this.k$)return;if(this.E4.cg>=ow.Qv)return;if(void 0===this.cP||!wL(this.cP))return;const t=this.cP,i=t.r$,e=t.h$;if(!i||!e)return;const s=this.E_,n=i.M_,r=e.M_;if(!n.ar(s)||!r.ar(s))return;n.OB(r).RB(s-5,s)&&(this.m4?this.C2():this.O2())},this.Y2=()=>{this.mo(new vh(this.E_))},this.G2=()=>{this.Z4(new sa),this.mo(new ws(this.E_))},this.A3=()=>{this.V4(),this.mo(new Vi(this.E_))},this.X2=()=>{this.x4()},this.K2=()=>{this.mo(new ts(this.ct))},this.W2=()=>{this.mo(new _i(this.E_))},this.H2=()=>{this.mo(new ie)},this.V2=()=>{const t=this.E_,i=this.gg,e=this.E4.cg<ow.Qv&&!this.C_,s=void 0!==this.j2,n=s&&this.j2!==t;(i||!s||n&&!e)&&this.d2()},this.q2=()=>{!this.v4&&this.C_&&(this.v4=!0,this.mo(new Ds(this.E_)))},this.t3=()=>{if(null!==this.Fx.error){const i=this.Fx.error;var t;this.qP(new cc(null!=(t=i.code)?t:zw.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.i3=()=>{this.z2&&(this.U2(),this.P2=!0)},this.v3=t=>{if(fe.o_(this.b4),this.b4=0,t.readyState<=ow.Uv)if(this.$B||this.C$){const i=fe.h_()-this.e2;if(i<250)return void(this.b4=fe.a_((()=>this.v3(t)),250-i))}else if(void 0!==this.cP&&this.cP.kH(this.E_))return void(this.b4=fe.a_((()=>this.v3(t)),250));this.g3!==t.readyState&&(this.g3=t.readyState,this.mo(t))},this.Z2=()=>{this.L4()},this.J2=()=>{this.Mg>0&&this.vg>0&&this.mo(new Vu)},this.e3=t=>{this.mo(new vs(t.initDataType,t.initData||new ArrayBuffer(0)))},this.s3=()=>{this.mo(new ry)},this.h3=t=>{const i=t.initData,e=i?Ge(i).buffer:new ArrayBuffer(0);this.mo(new vs(Pp,e))},this.n3=t=>{if(t.initData){const i=function(t){try{const i=Ao(t),e=new Vr,s=lc(i,e,Sn(i,e,!0));return XA(ZA(s,!0))}catch(t){return}}(t.initData);if(!i)return;this.mo(new vs(la,i))}else this.mo(new vs(la,new ArrayBuffer(0)))},this.r3=t=>{const i=t.initData,e=i?Ge(i).buffer:new ArrayBuffer(0);this.mo(new vs(Pp,e))},this.F4=()=>{this.V4()},this.Y4=t=>{this.Z4(t)},this.m3=i=>{this.mo(i),i.type===t.AA&&this.qP(Qh(i.errorObject))},this.Fx=i,this.KC=e,this.Ou=s,this.aR=n,this.E4=new Dx(this),this.E4.ln(qo._w,this.v3),this.E4.g4(new Fk(this)),this.G4=new Wk(this),this.G4.ln(qo._v,this.A3),this.LH=new Tx(this),this.LH.ln([t.vA,t.AA,t.KA],this.m3),this.Al=new Tn,this.g2=new Tn,this.F2=new yh([this.Al,this.g2]),this.Q2=new dx(this,this.F2),this.f2=new yh([this.F2,this.Q2.Z]),this._2=new hx(this),this.B2(),this.QP()}};var kx=.01;function Cx(t,i,e){if(void 0===e&&(e=0),!i.U)return 0;let s=i.EB(t);const n=kx*e;return s===i.gn(0)?s+=n:s===i.bn(i.U-1)&&(s-=n),s}function xx(t,i){for(let e of t.Nw)if(e.Nm===i)return e}function Ox(t){return!!t.cues&&t.cues.length>0}r();var jx={nH:void 0,rH:void 0,hH:void 0,oH:void 0,aH:void 0,uH:void 0,_H:void 0,cH:void 0,lH:void 0,dH:void 0,fH:void 0},zx=class extends i{get oa(){return this.Ua||(this.Ua=cL(this)),this.Ua}get nH(){}get rH(){}get hH(){}get oH(){}get aH(){}get uH(){}get _H(){}get cH(){}get lH(){}get dH(){}get fH(){}constructor(...t){super(...t),this.Ua=void 0}},Px=class extends Lx{xg(){}get vg(){return 0}get Mg(){return 0}constructor(t,i,e){super(t,i,e,new zx)}};r(),r();var Bx=class{get we(){return this.y3}be(){this.y3.style.display="none"}ge(){this.y3.style.display="block"}f3(t){t.appendChild(this.y3)}cn(){ei(this.y3)}constructor(t=5){let i=Ys.document.createElement("div");i.className="theoplayer-texttracks",i.style.position="absolute",i.style.display="none",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.width="100%",i.style.height="100%",i.style.lineHeight="1.3em",i.style.zIndex=""+t,this.y3=i,this.ge()}};function Rx(t,i){return oe({},i,Ig(function(t){return{nH:t.nH,rH:t.rH,hH:t.hH,oH:t.oH,aH:t.aH,uH:t.uH,_H:t._H,cH:t.cH,lH:t.lH,dH:t.dH,fH:t.fH}}(t)))}function Ux(t){return t.hH&&Eh(t.hH,"%")?Number(t.hH.replace("%",""))/100:t.hH&&Eh(t.hH,"em")?Number(t.hH.replace("em","")):1}r(),r(),r(),r();var Qx,jn,Fx=class{M3(t){const i=this.T3(t);if(!i)return!1;for(const t of i)ei(t);return this.N3(t),!0}get Lt(){return this.tp}get aP(){return this.Fx}get Tu(){return this.Ou}get D3(){return this.I3}get S3(){return this.E3}VV(){this.b3(),this.tp.L.Nw.forEach((t=>this.xS(t))),this.Tu.ln(xr.an,this.L3),this.C3(this.Tu.fu,this.Tu.pu)}x3(t){this.E3=t,this.I3=Rx(this.E3,this.O3),this.I3.nH&&(this.aP.style.fontFamily=this.I3.nH),this.I3._H&&(this.aP.style.visibility=this.I3._H),this.C3(this.Tu.fu,this.Tu.pu),this.j3(!0)}z3(){return this.I3}P3(t){return this.B3.has(t.Bw)}b3(){this.tp.ln(Os.Jg,this.R3),this.tp.ln(Os.iw,this.U3),this.tp.ln(Os.Ko,this.Q3)}F3(){this.tp.rn(Os.Jg,this.R3),this.tp.rn(Os.iw,this.U3),this.tp.rn(Os.Ko,this.Q3)}Y3(t){t.ln(Sl.Rm,this.G3),t.ln(Sl.Um,this.V3),t.ln(Sl.mw,this.W3)}H3(t){t.rn(Sl.Rm,this.G3),t.rn(Sl.Um,this.V3),t.rn(Sl.mw,this.W3)}xS(t){this.Y3(t),t.Yh&&this.q3(t)}GI(t){this.H3(t),this.X3(t)}Z3(){this.tp.Xw===Ht.Un?this.K3():this.J3()}K3(){if(!this.t5)return;this.t5=!1;const t=this.Tu.fu,i=this.Tu.pu;this.C3(t,i),this.j3(!1)}J3(){this.t5||(this.t5=!0,this.j3(!0))}q3(t){this.t5||t.Yh&&!this.P3(t)&&this.j3(!1)}X3(t){this.P3(t)&&this.j3(!0)}i5(t){(t.Yh||this.P3(t))&&this.j3(!0)}j3(t){const i=this.e5,e=this.t5?[]:this.tp.q.Nw.slice();this.s5(e,i,t),this.e5=e}T3(t){var i;return null==(i=this.B3.get(t.Bw))?void 0:i.n5}r5(t,i){this.B3.set(t.Bw,{Qm:t,n5:i})}N3(t){this.B3.delete(t.Bw)}h5(){return this.e5.slice()}cn(){ei(this.aP),this.B3.clear(),this.F3(),this.tp.L.Nw.forEach((t=>this.H3(t))),this.Tu.rn(xr.an,this.L3)}constructor(t,i,e,s,n){this.B3=Ye(),this.t5=!0,this.E3=oe({},jx),this.e5=[],this.R3=t=>this.xS(t.Qm),this.U3=t=>this.GI(t.Qm),this.Q3=()=>this.Z3(),this.G3=t=>this.q3(t.Qm),this.V3=t=>this.X3(t.Qm),this.W3=t=>this.i5(t.Qm),this.L3=t=>{this.C3(t.width,t.height)},this.tp=t,this.O3=this.I3=n,this.Fx=this.o5(e),this.Ou=s,i.appendChild(this.Fx)}};function Yx(t,i){return t?{a5:t.a5,u5:t.u5,c5:t.c5,wl:i}:null}function Gx(t){const i=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return i?{a5:C(i[1],16),u5:C(i[2],16),c5:C(i[3],16)}:null}function Vx(t){return("0"+t.toString(16)).slice(-2)}function Wx(t){return"#"+Vx(t.a5)+Vx(t.u5)+Vx(t.c5)}function Hx(t){const i=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return i?{a5:C(i[1],10),u5:C(i[2],10),c5:C(i[3],10),wl:S(i[4])}:null}function qx(t,i){return function(t){return t?"rgba("+t.a5+", "+t.u5+", "+t.c5+", "+t.wl+")":void 0}(Yx(Gx(t),i/100))}function Xx(t){return Zx[t||"none"]}r(),function(t){t.Rc='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.Oc='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.Vc='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.Uc='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif'}(Qx||(Qx={})),function(t){t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent"}(jn||(jn={}));var Zx={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},Kx=sg({monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:"monospace, sans-serif",monospaceSerif:"monospace, serif",proportionalSansSerif:"Arial",proportionalSerif:"Times New Roman",default:"monospace, sans-serif"}),Jx={rH:jn.WHITE,nH:"Arial, Helvetica, Sans-Serif",hH:"100%",oH:jn.TRANSPARENT,aH:jn.TRANSPARENT,uH:"none",_H:"visible",cH:void 0,lH:void 0,dH:void 0,fH:void 0},$x=class extends Fx{o5(t){let i=h.createElement("div");i.className="theoplayer-ttml-texttrack-"+t;const e=i.style;return e.position="absolute",hN(e,"flex"),e.overflow="hidden",e.pointerEvents="none",e.top="0",e.left="0",e.width="100%",e.height="100%",i}C3(t,i){let e=x.min(t,i)/15;this.aP.style.fontSize=e+"px"}s5(t,i,e){for(const t of i)!e&&t.Yh||this.M3(t);for(const i of t)this.l5(i)}l5(t){let i=this.T3(t);i||(i=this.d5(t),this.r5(t,i));for(const t of i)this.aP.appendChild(t)}d5(t){let i=[],e=t.sI,s=t.Ky,n=t.O;if(0===_.keys(s).length){const s=h.createElement("div");uO(s),tO(n,e,t.hI,s,s),s.firstChild&&i.push(s)}else for(let r of _.keys(s)){let o=h.createElement("div");o.id=r,uO(o),sO(o,"region",s[r],e),tO(n,e,t.hI,o,o),o.firstChild&&i.push(o)}return i}x3(t){!function(t,i){var e,s;t.style.marginTop=(null!=(e=i.cH)?e:0)+"px",t.style.marginBottom=(null!=(s=i.lH)?s:0)+"px",t.style.height="calc(100% - "+t.style.marginTop+" - "+t.style.marginBottom+")"}(this.aP,t),fL(this.aP,t)}constructor(t,i,e,s){super(t,i,e,s,Jx)}};function tO(t,i,e,s,n){if(rs(t)&&function(t){return"SPAN"===t.NI.toUpperCase()||"P"===t.NI.toUpperCase()||"BR"===t.NI.toUpperCase()||"DIV"===t.NI.toUpperCase()||"BODY"===t.NI.toUpperCase()}(t)){let r=iO(t);if(!r||(null==n?void 0:n.id)===r){let r;if("BODY"===t.NI.toUpperCase())r=n;else{if(r=function(t){let i;switch(t.NI.toUpperCase()){case"BR":i=h.createElement("br");break;case"SPAN":i=h.createElement("span"),eO(i,t);break;case"P":i=h.createElement("p"),function(t){const i=t.style;i.fontFamily="inherit",i.color="inherit",i.textAlign="inherit",i.padding="0",i.margin="0",i.lineHeight="inherit"}(i),eO(i,t);break;case"DIV":i=h.createElement("div"),eO(i,t)}return i}(t),!r)return;s.appendChild(r)}!function(t,i,e,s){let n=i.EI("style");hO(t,i.NI,n,e,s),function(t,i,e){for(const s of i.TI)oO(t,i.NI,s.NI,s.zy,e)}(t,i,s)}(r,t,i,n),function(t,i,e){let s=null==i?void 0:i.EI("smpte:backgroundImage");if(s){s=s.replace("#","");let n=e&&nO(e,(t=>t.TI.some((t=>"id"===t.NI&&t.zy===s))));n&&rO(t,n,i,!0)}!function(t,i){const[e]=i.m;if(!e||"metadata"!==e.NI.toLowerCase())return;const[s]=e.m;rO(t,s,i)}(t,i)}(r,t,e);for(const s of t.bI)tO(s,i,e,r,n)}}else if(Tm(t)){const i=h.createTextNode(t.JM);s.appendChild(i)}}function iO(t){const i=t.EI("region");if("p"===t.NI.toLowerCase())return i;const e=[];for(const i of t.m)e.push(iO(i));return Ic(e),0===e.length?i:1===e.length?null!=(s=e[0])?s:i:void 0;var s}function eO(t,i){let e=i.SI(Lm,"id");e&&(t.id=e)}function sO(t,i,e,s){hO(t,i,e.style,s,t);for(const s of _.keys(e))oO(t,i,s,e[s],t)}function nO(t,i){if(i(t))return t;for(let e of t.m){const t=nO(e,i);if(t)return t}return null}function rO(t,i,e,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const i=t&&t.bI.length>0?t.bI[0]:null;return i&&Tm(i)?"data:image/png;base64,"+i.JM:""}(i),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,i){const e=t.style;hN(e,"flex");let s=i.EI("smpte:backgroundImageVertical");if(s)switch(s.toLowerCase()){case"left":e.alignItems="flex-start";break;case"center":e.alignItems="center";break;case"right":e.alignItems="flex-end";break;case"inherit":e.alignItems="inherit"}else e.alignItems="center";let n=i.EI("smpte:backgroundImageHorizontal");if(n)switch(n.toLowerCase()){case"left":e.justifyContent="flex-start";break;case"center":e.justifyContent="center";break;case"right":e.justifyContent="flex-end";break;case"inherit":e.justifyContent="inherit"}else e.justifyContent="center"}(t,e),t.appendChild(n)}function hO(t,i,e,s,n){if(e)for(const r of e.split(" "))if(s[r])for(const e of _.keys(s[r]))"style"===e.toLowerCase()?hO(t,i,s[r][e],s,n):oO(t,i,e,s[r][e],n)}function oO(t,i,e,s,n){const r=t.style;switch(e){case"backgroundColor":r.backgroundColor=s;break;case"color":r.color=s;break;case"direction":r.direction=s;break;case"display":"none"===s&&(r.display="none");break;case"fontFamily":{const t=Kx.get(s);r.fontFamily=t||s;break}case"fontSize":Eh(s,"px")?s=C(s)/24+"em":Eh(s,"c")&&(s=s.replace("c","em")),r.fontSize=s;break;case"fontStyle":r.fontStyle=s;break;case"fontWeight":r.fontWeight=s;break;case"lineHeight":r.lineHeight=s;break;case"opacity":r.opacity=s;break;case"overflow":r.overflow=s;break;case"padding":r.padding=s;break;case"textAlign":"right"===s?(r.textAlign="right",r.justifyContent="flex-end"):"start"===s?(r.textAlign="start",r.justifyContent="flex-start"):"center"===s?(r.textAlign="center",r.justifyContent="center"):"end"===s?(r.textAlign="end",r.justifyContent="flex-end"):"left"===s&&(r.textAlign="left",r.justifyContent="flex-start");break;case"textDecoration":{let t=s;t=t.replace("lineThrough","line-through"),t=t.replace("noUnderline","none"),t=t.replace("noLineThrough","none"),t=t.replace("noOverline","none"),r.textDecoration=t;break}case"unicodeBidi":r.unicodeBidi=s.replace("bidiOverride","bidi-override");break;case"visibility":r.visibility=s;break;case"zIndex":r.zIndex=s;break;case"displayAlign":{let t;if("before"===s.toLowerCase())t="flex-start";else if("center"===s.toLowerCase())t="center";else{if("after"!==s.toLowerCase())return;t="flex-end"}r.alignItems=t;break}case"extent":{const e=aO(i.toLowerCase())?n:t;let r,h,o=s.split(" ");o.length>=2?(r=o[0],h=o[1]):r=h="100%",e&&(e.style.height=h,e.style.width=r);break}case"origin":{const e=aO(i.toLowerCase())?n:t,[r,h]=s.split(" ");e&&(r||h)&&(r&&(e.style.left=r),h&&(e.style.top=h));break}case"showBackground":case"textOutline":break;case"wrapOption":r.whiteSpace=s.replace("noWrap","nowrp").replace("wrap","normal").replace("nowrp","nowrap");break;case"writingMode":{let t,i,e,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",i="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",e="upright";break;case"tblr":t="vertical-lr",e="upright";break;case"rl":t="horizontal-tb",i="rtl";break;default:return}r.writingMode=t,r.setProperty("-webkit-writing-mode",t),i&&(r.direction=i),e&&(r.textOrientation=e,r.setProperty("-webkit-text-orientation",e)),n&&(r.unicodeBidi=n);break}case"linePadding":if(Eh(s,"c")){let t=s.replace("c","em");r.paddingLeft=r.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?r.textAlign="":r.textAlign=s}}function aO(t){return"div"===t||"p"===t||"span"===t}function uO(t){const i=t.style;hN(i,"flex"),i.top="auto",i.left="5%",i.width="90%",i.height="100%",i.maxHeight="100%",i.maxWidth="100%",i.alignItems="flex-start",i.overflow="visible",i.position="absolute",i.fontFamily="Arial, Helvetica, Sans-Serif",i.color="white",i.textShadow="rgb(0, 0, 0) -1px -1px 0px, rgb(0, 0, 0) 1px -1px 0px, rgb(0, 0, 0) -1px 1px 0px, rgb(0, 0, 0) 1px 1px 0px",i.textAlign="start",i.writingMode="horizontal-tb",i.setProperty("-webkit-writing-mode","horizontal-tb"),i.padding="0",i.margin="0",i.lineHeight="1.3em"}r(),r();var cO,lO,dO=void 0;function fO(t){return dO||(dO=Ys.document.createElement("textarea")),dO.innerHTML=t,dO.value}function _O(t,i){let e="Data",s="",n=[],r=t.charAt(i.qu),h="",o={$w:"starttag",Pj:"",f5:[]};for(;i.qu<t.length+1;){switch(r=i.qu<t.length?t.charAt(i.qu):"EOF",e){case"Data":switch(r){case"&":let n=t.substring(i.qu).match(/&#?[0-9a-zA-Z]+;/);n?(s+=fO(n[0]),i.Sm(n[0].length-1)):s+="&";break;case"<":if(s)return{$w:"string",O:s};e="Tag";break;case"EOF":return{$w:"string",O:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":e="StartTagAnnotation";break;case".":e="StartTagClass";break;case"/":e="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,e="TimestampTag";break;case">":return i.Sm(1),o;case"EOF":return o;default:s=r,e="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":e="StartTagAnnotation";break;case"\n":h=r,e="StartTagAnnotation";break;case".":e="StartTagClass";break;case">":return i.Sm(1),{$w:"starttag",Pj:s,f5:[]};case"EOF":return{$w:"starttag",Pj:s,f5:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(h),h="",e="StartTagAnnotation";break;case"\n":n.push(h),h=r,e="StartTagAnnotation";break;case".":n.push(h),h="";break;case">":return i.Sm(1),n.push(h),{$w:"starttag",Pj:s,f5:n};case"EOF":return n.push(h),{$w:"starttag",Pj:s,f5:n};default:h+=r}break;case"StartTagAnnotation":switch(r){case"&":e="CharRefInAnnotation";break;case">":i.Sm(1);let t=h.trim();return t=t.replace(/\s/," "),{$w:"starttag",Pj:s,f5:n,_5:t};default:h+=r}break;case"CharRefInAnnotation":let a="";for(let e=i.qu;">"===t.charAt(e);e++)a+=t.charAt(e);h+=a||"&",e="StartTagAnnotation";break;case"EndTag":switch(r){case">":return i.Sm(1),{$w:"endtag",Pj:s};case"EOF":return{$w:"endtag",Pj:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return i.Sm(1),{$w:"timestamp",g5:s};case"EOF":return{$w:"timestamp",g5:s};default:s+=r}}i.Sm(1)}return o}function gO(t){let i;if(t.getBoundingClientRect&&t.parentNode&&(i=t.getBoundingClientRect()),!i)return{left:0,top:0};const e=h.documentElement,n=h.body,r=e.clientLeft||n.clientLeft||0,o=s.pageXOffset||n.scrollLeft,a=i.left+o-r,u=e.clientTop||n.clientTop||0,c=s.pageYOffset||n.scrollTop,l=i.top+c-u;return{left:x.round(a),top:x.round(l)}}function wO(t,i,e,s){if(void 0===s&&(s=0),!t||!i)return;t.style.left="0px";let n=t.getClientRects(),r=i.getClientRects();if(0===n.length||0===r.length)return;let h=n[0],o=r[0],a=h.width/2+h.left;AO(t,o.width/2+o.left-a,e,s)}function AO(t,i,e,s){void 0===s&&(s=0),mO(t,i,"left","right",e,s)}function vO(t,i,e,s){void 0===s&&(s=0),mO(t,i,"top","bottom",e,s)}function mO(t,i,e,s,n,r){void 0===r&&(r=0);const h=t.getClientRects();if(n&&h.length>0){const t=h[0];i=It(i,n[e]+r-t[e],n[s]-r-t[s])}t.style[e]=i+"px"}function fn(t,i){void 0===t.textContent?t.innerText=i:t.textContent=i}!function(t){t.w5="Data",t.A5="Tag",t.v5="StartTag",t.m5="StartTagClass",t.p5="StartTagAnnotation",t.y5="CharRefInAnnotation",t.M5="EndTag",t.T5="TimestampTag"}(cO||(cO={})),function(t){t.N5="string",t.D5="starttag",t.I5="endtag",t.S5="timestamp"}(lO||(lO={})),r(),r();var pO,yO=class t{get E5(){return this.b5+this.ji}set E5(t){this.b5=t-this.ji}get L5(){return this.k5+this.Ti}set L5(t){this.k5=t-this.Ti}C5(t){return this.b5<t.E5&&this.E5>t.b5&&this.k5<t.L5&&this.L5>t.k5}Am(t){return this.b5<=t.b5&&t.E5<=this.E5&&this.k5<=t.k5&&t.L5<=this.L5}Lm(){return new t(this.b5,this.k5,this.ji,this.Ti)}constructor(t,i,e,s){this.b5=t,this.k5=i,this.ji=e,this.Ti=s}},MO={rH:jn.WHITE,nH:"sans-serif",hH:"100%",oH:"rgba(0,0,0,0.8)",aH:jn.TRANSPARENT,uH:"none",_H:"visible",cH:void 0,lH:void 0,dH:void 0,fH:void 0},TO="theoplayer-webvtt-region-",NO="theoplayer-webvtt-styling-",DO="theoplayer-webvtt-default-style",IO=5.23,SO=1.14,EO=class extends Fx{o5(t){let i=h.createElement("div");i.className="theoplayer-webvtt-texttrack-"+t,ia(i),i.style.overflow="hidden",i.style.pointerEvents="none";const e=this.D3.nH;return e&&(i.style.fontFamily=e),i.style.whiteSpace="pre-line",function(){if(h.getElementById(DO))return;const t=[];for(const[i,e]of FO)t.push("."+NO+i+" { color: "+e+" !important; }"),t.push("."+NO+"x5"+i+" { background-color: "+e+" !important; }"),t.push("video::cue(."+i+") { color: "+e+"; }"),t.push("O5"+i+") { background-color: "+e+"; }");const i=h.createElement("style");i.id=DO,i.innerHTML=t.join("\n"),h.body.appendChild(i)}(),i}VV(){this.aP.appendChild(this.j5),super.VV()}C3(t,i){const e=x.min(t/100,i/100),s=Ux(this.D3);this.z5.forEach((t=>{let{qm:i,P5:n}=t;this.B5(n,e,s,i)})),this.B5(this.j5,e,s)}x3(t){fL(this.aP,t),super.x3(t)}s5(t,i,e){const s=this.aP,n=this.Tu.pu/100;let r=[];for(const i of t)void 0!==i.qm&&(na(r,i.qm)||r.push(i.qm));this.z5.forEach(((t,i)=>{let{qm:s,P5:n}=t;!e&&na(r,s)||(ei(n),this.z5.delete(i))}));for(const t of i)!e&&t.Yh||this.M3(t);let h=[];const o=PO(this.j5.getBoundingClientRect());h.push(...this.R5(o));for(const t of r){let i;this.z5.has(t.o)?i=this.z5.get(t.o).P5:(i=OO(t,n),s.appendChild(i),this.z5.set(t.o,{qm:t,P5:i})),h.push(PO(i.getBoundingClientRect()))}for(const i of t){const t=this.l5(i,h,o);void 0!==t&&h.push(t)}}R5(t){const i=[],e=this.D3;if(void 0!==e.cH){const s=t.Lm();s.Ti=e.cH,i.push(s)}if(void 0!==e.lH){const s=t.Lm();s.Ti=e.lH,s.L5=t.L5,i.push(s)}return i}l5(t,i,e){var s;let n;t.qm?(n=this.z5.get(t.qm.o).P5,"up"===t.qm._p&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.j5;let r=null==(s=this.T3(t))?void 0:s[0];if(r?n.appendChild(r):(r=this.U5(t),n.appendChild(r),t.qm||(t.Zm?function(t,i,e,s){const n=jO(t),r=n?e.Ti:e.ji;let h=S(getComputedStyle(i).lineHeight);if(0===h)return;let o=PO(i.getBoundingClientRect()),a=x.round(gv(t));"rl"===t.Pt&&(a=-(a+1));let u=h*a;"rl"===t.Pt&&(u=u-o.ji+h);a<0&&(u+=r,h=-h);n?o.k5+=u:o.b5+=u;const c=o.Lm();let l=!1;for(;!e.Am(o)||zO(o,s);)if(n)if(h<0&&o.k5<e.k5||h>0&&o.L5>e.L5){if(o.k5=c.k5,l)break;h=-h,l=!0}else o.k5+=h;else if(h<0&&o.b5<e.b5||h>0&&o.E5>e.E5){if(o.b5=c.b5,l)break;h=-h,l=!0}else o.b5+=h;n?i.style.top=(o.k5-e.k5)/e.Ti*100+"%":i.style.left=(o.b5-e.b5)/e.ji*100+"%"}(t,r,e,i):function(t,i,e,s){let n=PO(i.getBoundingClientRect());if(0===n.ji||0===n.Ti)return;jO(t)?"center"===t.Wm?n.k5-=n.Ti/2:"end"===t.Wm&&(n.k5-=n.Ti):"center"===t.Wm?n.b5-=n.ji/2:"end"===t.Wm&&(n.b5-=n.ji);let r,h=n.Lm(),o=h,a=1,u=!1;r=""===t.Pt?[2,3,0,1]:"lr"===t.Pt?[0,1,2,3]:[1,0,2,3];const c=4,l=S(getComputedStyle(i).lineHeight)/c;if(l>0){for(let t=0;t<r.length&&!u;t++){for(;!RO(n,e,r[t],.01)&&(!e.Am(n)||zO(n,s));)BO(n,r[t],l);if(e.Am(n)){o=n.Lm(),u=!0;break}let i=UO(n,e);a>i&&(o=n.Lm(),a=i),n=h.Lm()}e.Am(n)||(o=h.Lm())}i.style.left=(o.b5-e.b5)/e.ji*100+"%",i.style.top=(o.k5-e.k5)/e.Ti*100+"%"}(t,r,e,i)),this.r5(t,[r])),!t.qm)return PO(r.getBoundingClientRect())}U5(t){let i=new Vr,e=t.O,s=this.Q5(t),n={F5:void 0,we:s},r=n,o="",a="",u=[n],c=[],l=[];for(;i.qu<e.length;){let t=_O(e,i);if(t.$w===lO.N5){const i=h.createElement("span");fn(i,t.O),bO(i,u),""!==o&&(i.lang=o),this.Y5(i,a),r.we.appendChild(i)}else if(t.$w===lO.D5){const i=t.Pj.toLowerCase();switch(i){case"i":case"b":case"u":case"ruby":{let e=h.createElement(i);r.we.appendChild(e),r={F5:t,we:e},u.push(r);break}case"rt":var d;if("ruby"===(null==(d=r.F5)?void 0:d.Pj.toLowerCase())){let i=h.createElement("rt");r.we.appendChild(i),r={F5:t,we:i},u.push(r)}break;case"c":case"v":r={F5:t,we:r.we},u.push(r);break;case"font":{var f;const i=null==(f=t._5)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);i&&(a=i[1],l.push(a),r={F5:t,we:r.we},u.push(r));break}case"lang":var _;o=null!=(_=t._5)?_:"",c.push(o)}}else if(t.$w===lO.I5){var g;const i=t.Pj.toLowerCase(),e=null==(g=r.F5)?void 0:g.Pj.toLowerCase();e===i?(u.pop(),r=u[u.length-1],"font"===i&&(l.pop(),a=l.length>0?l[l.length-1]:"")):"rt"===e&&"ruby"===i?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===i&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.$w===lO.S5){let i=t.g5,e=new Vr;try{La(i,e)}catch(t){Nu("ERROR collecting timestamp",t)}}}return s}Y5(t,i){const e=this.D3,s=this.S3;e.oH&&(t.style.background=e.oH);const n=s.rH||i||e.rH;n&&(t.style.color=n)}B5(t,i,e,s){if(s){let n=LO(s,i);t.style.height=n*e+"px",t.style.left=kO(s)+"%",t.style.top=CO(s,i)+"px"}t.style.fontSize=IO*i*e+"px"}Q5(t){const i=h.createElement("div");i.style.position="absolute",i.style.margin="0",i.style.padding="0",i.style.unicodeBidi="plaintext",i.style.wordWrap="break-word",i.style.overflowWrap="break-word",i.style.width="auto",i.style.textAlign=t.Gm,function(t,i){"rl"===i.Pt?t.style.writingMode="vertical-rl":"lr"===i.Pt?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(i,t),function(t,i){let e=vv(i);jO(i)?(t.style.width=e+"%",t.style.height="auto"):(t.style.height=e+"%",t.style.width="auto")}(i,t),function(t,i){let e,s,n=Av(i),r=wv(i),h=vv(i);if(jO(i)){switch(n){case"line-left":e=r;break;case"center":e=r-h/2;break;case"line-right":e=r-h}s=i.Zm?0:gv(i)}else{switch(n){case"line-left":s=r;break;case"center":s=r-h/2;break;case"line-right":s=r-h}e=i.Zm?0:gv(i)}t.style.left=e+"%",t.style.top=s+"%"}(i,t);const e=this.D3.aH;e&&(i.style.background=e);const s=this.D3.rH;return s&&(i.style.color=s),i.style.textShadow=Xx(this.D3.uH),i}constructor(t,i,e,s){super(t,i,e,s,MO),this.z5=Qt(),this.j5=xO(3)}};function bO(t,i){for(const e of i)if(e.F5){for(const i of e.F5.f5)eN(t,NO+i);"v"===e.F5.Pj.toLowerCase()&&e.F5._5&&eN(t,"theoplayer-webvtt-voice-"+e.F5._5)}}function LO(t,i){return t.lp*(IO*i)*SO}function kO(t){return t.gp-t.dp*t.ji/100}function CO(t,i){let e=t.wp,s=t.fp*LO(t,i)/100;return x.max(0,e-s)}function xO(t){let i=h.createElement("div");return i.className=TO+"default",ia(i),i.style.wordWrap="break-word",i.style.writingMode="horizontal-tb",i.style.pointerEvents="none",i.style.width="auto",i.style.height="auto",i.style.maxHeight="100%",i.style.minHeight="0px",i.style.padding="0",i.style.boxSizing="border-box",i.style.fontSize=IO*t+"px",i.style.lineHeight=SO+"em",i}function OO(t,i){let e=xO(i);e.className=TO+t.o;let s=t.ji,n=LO(t,i);return e.style.width=s+"%",e.style.height=n+"px",e.style.left=kO(t)+"%",e.style.right="",e.style.top=CO(t,i)+"px",e.style.bottom="",e.style.boxSizing="border-box",e}function jO(t){return""===t.Pt}function zO(t,i){return i.some((i=>t.C5(i)))}function PO(t){return new yO(t.left,t.top,t.width,t.height)}function BO(t,i,e){switch(i){case 0:t.b5+=e;break;case 1:t.b5-=e;break;case 2:t.k5+=e;break;case 3:t.k5-=e}}function RO(t,i,e,s){switch(e){case 0:return t.E5>i.E5+s;case 1:return t.b5<i.b5-s;case 2:return t.L5>i.L5+s;case 3:return t.k5<i.k5-s}}function UO(t,i){return x.max(0,x.min(t.E5,i.E5)-x.max(t.b5,i.b5))*x.max(0,x.min(t.L5,i.L5)-x.max(t.k5,i.k5))/(t.ji*t.Ti)}!function(t){t[t.POS_X=0]="POS_X",t[t.NEG_X=1]="NEG_X",t[t.POS_Y=2]="POS_Y",t[t.NEG_Y=3]="NEG_Y"}(pO||(pO={}));var QO,FO=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]];r(),r(),r(),function(t){t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics"}(QO||(QO={}));var YO={rH:jn.WHITE,nH:Qx.Vc,hH:"100%",oH:jn.BLACK,aH:"transparent",uH:"none",G5:"regular",_H:"visible",cH:void 0,lH:void 0,dH:void 0,fH:void 0},GO=[{V5:jn.WHITE,G5:"regular",W5:0},{V5:jn.WHITE,G5:"underline",W5:0},{V5:jn.GREEN,G5:"regular",W5:0},{V5:jn.GREEN,G5:"underline",W5:0},{V5:jn.BLUE,G5:"regular",W5:0},{V5:jn.BLUE,G5:"underline",W5:0},{V5:jn.CYAN,G5:"regular",W5:0},{V5:jn.CYAN,G5:"underline",W5:0},{V5:jn.RED,G5:"regular",W5:0},{V5:jn.RED,G5:"underline",W5:0},{V5:jn.YELLOW,G5:"regular",W5:0},{V5:jn.YELLOW,G5:"underline",W5:0},{V5:jn.MAGENTA,G5:"regular",W5:0},{V5:jn.MAGENTA,G5:"underline",W5:0},{V5:jn.WHITE,G5:"italics",W5:0},{V5:jn.WHITE,G5:"underline-italics",W5:0},{V5:jn.WHITE,G5:"regular",W5:0},{V5:jn.WHITE,G5:"underline",W5:0},{V5:jn.WHITE,G5:"regular",W5:4},{V5:jn.WHITE,G5:"underline",W5:4},{V5:jn.WHITE,G5:"regular",W5:8},{V5:jn.WHITE,G5:"underline",W5:8},{V5:jn.WHITE,G5:"regular",W5:12},{V5:jn.WHITE,G5:"underline",W5:12},{V5:jn.WHITE,G5:"regular",W5:16},{V5:jn.WHITE,G5:"underline",W5:16},{V5:jn.WHITE,G5:"regular",W5:20},{V5:jn.WHITE,G5:"underline",W5:20},{V5:jn.WHITE,G5:"regular",W5:24},{V5:jn.WHITE,G5:"underline",W5:24},{V5:jn.WHITE,G5:"regular",W5:28},{V5:jn.WHITE,G5:"underline",W5:28}],VO=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function WO(t,i){return Ev(t.H5,i.H5)||Xo(t.MD,i.MD)}r();var el=32,HO=/CC([1-4])=(.*)/;function qO(t){if(!t)return[];const i=[],e=t.trim().split(";");if(e.every((t=>t.match(HO))))for(const t of e){const[,e,s]=t.match(HO);i.push({q5:Number(e),X5:s})}else for(let t=0;t<e.length;t++)i.push({q5:t+1,X5:e[t]});return i}var XO=class t{get Z5(){return this.J5.K5}get t6(){return this.J5.i6}get e6(){return this.J5.i6.W5-this.J5.K5.W5+1}get s6(){return this.J5.i6.n6-this.J5.K5.n6+1}rr(){return this.r6=this.h6(),this.o6(),this.a6(),this.r6}h6(){let t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.e6/el*this.c6.u6*100+"%",t.style.height=1.2*this.s6+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.c6.l6?"calc(1em - 1ch)":"";const i=this.I3.nH;i&&(t.style.fontFamily=i);const e=this.I3.aH;return e&&(t.style.backgroundColor=e),t}o6(){if(!this.r6)return;let t=this.Z5.n6/15*100,i=this.Z5.W5/el*100,e=(el-this.t6.W5-1)/el*100,s=(15-this.t6.n6-1)/15*100;this.c6.d6||(i=e=1,this.r6.style.width="98%"),s<t?this.r6.style.bottom=s*this.c6.u6+"%":this.r6.style.top=t*this.c6.u6+"%",e<i?this.r6.style.right=e+"%":this.r6.style.left=i+"%"}a6(){const t=this.J5.f6.sort(ZO);for(let i=0;i<t.length;i++)this._6(t[i-1],t[i]),this.g6(t[i]);this._6(t[t.length-1],void 0)}g6(i){var e;const s=Rx(this.I3,i.w6),n=t.A6(s);fn(n,i.v6),null==(e=this.r6)||e.appendChild(n)}static A6(t){const i=h.createElement("span");i.style.display="inline-block",t.G5!==QO.FONT_ITALICS&&t.G5!==QO.FONT_UNDERLINE_ITALICS||(i.style.fontStyle="italic"),t.G5!==QO.FONT_UNDERLINE&&t.G5!==QO.FONT_UNDERLINE_ITALICS||(i.style.textDecoration="underline");const e=t.rH;e&&(i.style.color=e);const s=t.oH;return s&&(i.style.backgroundColor=s),i.style.textShadow=Xx(t.uH),i.style.height="1.2em",i}_6(t,i){let e=t?t.i6.n6:this.J5.K5.n6;const s=i?i.K5.n6:this.J5.i6.n6;let n=t?t.i6.W5:this.J5.K5.W5;const r=i?i.K5.W5:this.J5.i6.W5;e<s&&(!i||t&&t.K5.n6!==i.K5.n6?this.m6():this.p6(this.J5.i6.W5-n),n=this.J5.K5.W5),n<r&&(i?this.p6(r-n):this.m6())}m6(){var t;const i=h.createElement("br");null==(t=this.r6)||t.appendChild(i)}p6(t){var i;if(t<=0)return;const e=h.createElement("span");e.style.display="inline-block",fn(e,Kg(" ",t)),null==(i=this.r6)||i.appendChild(e)}constructor(t,i,e){this.J5=t,this.c6=i,this.I3=e}};function ZO(t,i){return function(t,i){if(t.n6!==i.n6)return t.n6-i.n6;return t.W5-i.W5}(t.K5,i.K5)}var KO=class extends Fx{o5(t){let i=h.createElement("div");return i.className="theoplayer-cea608-texttrack-"+t,i.style.position="absolute",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.top="10%",i.style.bottom="10%",this.D3.nH&&(i.style.fontFamily=this.D3.nH),i}C3(t,i){this.sl()}sl(){let t=Ux(this.D3);this.y6=function(t){return{u6:t/100,l6:t<=100,d6:t<=150}}(100*t);const i=this.M6/el;this.T6=i*t,this.aP.style.fontSize=this.T6+"px"}get M6(){let t=this.aP.offsetWidth;return this.y6&&this.y6.d6||(t*=.8),t}s5(t,i,e){for(const t of i)!e&&t.Yh||this.M3(t);for(const i of t)this.l5(i)}l5(t){this.y6&&this.y6.d6?this.N6(80):this.N6(100),this.sl();let i=this.T3(t);i||(i=this.d5(t),this.r5(t,i));for(const t of i)this.aP.appendChild(t)}d5(t){return t.O.map((t=>new XO(t,this.y6,this.D3).rr()))}N6(t){const i=(100-t)/2;this.aP.style.left=i+"%",this.aP.style.width=t+"%"}constructor(t,i,e,s){super(t,i,e,s,YO)}},ic=class t{D6(t){for(let i of this.I6)if(i.Lt===t)return i}static S6(t){switch(t.$w){case Ks.TTML:case Ks.SRT:case Ks.WEBVTT:case Ks.CEA608:return!0}return!1}E6(t){switch(t.$w){case Ks.TTML:return new $x(t,this.b6,t.dh,this.Ou);case Ks.SRT:case Ks.WEBVTT:return new EO(t,this.b6,t.dh,this.Ou);case Ks.CEA608:return new KO(t,this.b6,t.dh,this.Ou)}}L6(t){let i=this.D6(t);i||(i=this.E6(t),i&&(i.VV(),i.x3(this.aR),this.I6.push(i),t.Xw===Ht.Un&&i.K3()))}k6(t){let i=this.I6;for(let e=i.length-1;e>=0;e-=1){let s=i[e];s.Lt===t&&(s.cn(),jc(i,e))}}C6(i){ep(i.zt)&&t.S6(i)&&(i.cg===Ot.ERROR?this.k6(i):this.L6(i))}get P0(){return this.x6.cs}Wn(){for(let t of this.I6)t.Lt.rn(Os._w,this.O6),t.Lt.rn(Os.ww,this.O6),t.cn();Ri(this.I6)}cn(){this.Wn();for(let t of this.I6)t.cn();this.Al.rn(gt.qg,this.j6),this.Al.rn(gt.Zg,this.z6),this.Al.rn(Os.Ko,this.O6),this.x6.rn(Pc.Ko,this.P6),this.aR.rn("fw",this.B6)}constructor(t,i,e,s,n){this.I6=[],this.j6=t=>{let i=t.Lt;i.ln(Os._w,this.O6),i.ln(Os.ww,this.O6),i instanceof Us&&(i.P0=this.P0),this.C6(i)},this.O6=t=>{let i=t.Lt;this.C6(i)},this.z6=t=>{let i=t.Lt;i.rn(Os._w,this.O6),i.rn(Os.ww,this.O6),this.k6(i)},this.P6=()=>{let t=this.P0;for(let i of this.Al.Nw)i instanceof Us&&(i.P0=t)},this.B6=()=>{for(let t of this.I6)t.x3(this.aR)},this.R6=()=>{for(let t of this.I6)t.x3(oe({},t.z3(),{_H:"hidden"}))},this.U6=()=>{for(let t of this.I6)t.x3(oe({},t.z3(),{_H:"visible"}))},this.b6=t,this.Ou=i,this.Al=e,this.x6=n,this.aR=s,this.Al.ln(gt.qg,this.j6),this.Al.ln(gt.Zg,this.z6),this.Al.ln(Os.Ko,this.O6),this.x6.ln(Pc.Ko,this.P6),this.aR.ln("fw",this.B6),this.P6()}};function JO(t){const i=new JE,e=function(t){const i=[];return ZE.Xo(t)&&i.push(new ZE(t)),KE.Xo(t)&&i.push(new KE(t)),i}(t);if(e.length>0){for(const t of e)i.vG(t);i.AG(e[0])}return i}var $O=class extends Lx{get aP(){return this.Fx}get vg(){return this.Fx.videoHeight}get Mg(){return this.Fx.videoWidth}get la(){return this.Q6}xg(){return this.Fx}async Xf(){this.Q6.cn(),this.F6.cn(),this.Y6.cn(),await super.Xf()}be(){super.be(),this.F6.be()}ge(){super.ge(),this.F6.ge()}f3(t){super.f3(t),this.F6.f3(t)}constructor(t,i,e,s){super(t,i,e,s),this.Q6=JO(t),this.F6=new Bx,this.Y6=new ic(this.F6.we,this.Tu,this.nt,this.Nl,this.la)}};r(),r();r(),r();var tj;!function(t){t.G6="HELLO",t.V6="HI_THERE",t.W6="INITIALIZE",t.H6="APPEND_INIT",t.q6="APPEND_DATA",t.X6="ACK",t.Z6="REMOVE",t.K6="DESTROY_SESSION"}(tj||(tj={}));var ij=class{J6(t){return this.OH.Lx((async t=>{Pi(t);const i=new MessageChannel,e=i.port1,s=i.port2;nd.serviceWorker.controller||await Kt(nd.serviceWorker,"install",t),"activated"!==nd.serviceWorker.controller.state&&await Kt(nd.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};nd.serviceWorker.controller.postMessage(n,[s]),e.start(),this.t8=e;try{const i=await Kt(e,"message",t),s=i.data;if("HI_THERE"!==s.kind)throw new b("Could not set up message channel");this.Vx=s.sessionId}catch(t){throw Oi(t)&&this.i8(),t}}),t)}e8(t,i){return this.t8,this.OH.Lx((async()=>{if(!this.t8)throw new b("MessageSession not set up yet or already closed.");i||(i=[]),this.t8.postMessage(t,i);const e=await Kt(this.t8,"message");return e.data}))}s8(){return this.OH.Lx((()=>this.i8()))}i8(){if(!nd.serviceWorker.controller)return;if("activated"!==nd.serviceWorker.controller.state)return;if(!this.t8)return;const t={kind:"DESTROY_SESSION"};this.t8.postMessage(t),this.t8.close(),this.t8=void 0}constructor(){this.OH=new ro}};r();var ej,sj=class{get n8(){return this.r8}h8(t,i){const e=t-i;this.r8=e>this.n8?this.r8:e}o8(t){this.r8=t}constructor(){this.r8=1/0}};r(),r(),r(),function(t){t.Gv="audio",t.Yv="video",t.XM="metadata"}(ej||(ej={}));var nj=class extends i{get M_(){return void 0===this.a8||void 0===this.u8?Ki.KB():new Ki([this.a8,this.u8])}get vd(){return{gP:this.pY}}get wJ(){return Tw.Hv}get rY(){return this.pY}get vJ(){return Ki.KB()}get RV(){return 30}set RV(t){}get GV(){return 30}set GV(t){}yJ(t,i){}MJ(t,i){}GH(){return this.c8}get ta(){return this.l8}get d8(){return this.a8}get Ym(){return this.u8}async TJ(){}async VK(t,i){}async SK(t,i,e){if(t.$w!==Ho.MH)throw new b("Streaming or opaque segments are not supported yet.");const s=t.JM,n=async()=>{const t=s.buffer,e={kind:tj.q6,mediaType:rj(this.pY),segment:s,startPts:i.f8,totalDuration:i.ct};if(await this._8.e8(e,[t]),void 0===this.a8){const t=i.f8+i.Zy;this.a8=t,this.u8=t}this.u8=this.u8+i.ct,this.mo(new gg(ii.pH))};return this.OH.Lx((async t=>{Pi(t);try{this.l8=!0,await n()}finally{this.l8=!1}}),e)}async LK(t,i,e){if(t.$w!==Ho.MH)throw new b("Streaming or opaque initialization segments are not supported yet.");const s=t.JM,n=async()=>{const t={kind:tj.H6,mediaType:rj(this.pY),segment:s};await this._8.e8(t,[])};return this.OH.Lx((async t=>{Pi(t);try{this.l8=!0,await n()}finally{this.l8=!1}}),e)}_J(){this.c8=!0}nJ(){this.c8=!1}async wm(t,i,e){const s=async()=>{const t={kind:tj.Z6,mediaType:rj(this.pY),endTime:i};await this._8.e8(t),this.a8=void 0,this.u8=void 0,this.mo(new gg(ii.pH))};return this.OH.Lx((async t=>{Pi(t);try{this.l8=!0,await s()}finally{this.l8=!1}}),e)}SH(t){return this.pY===t.gP}bH(t){return this.pY=t.gP,Promise.resolve()}async Xf(){this.Bo(),await this.OH.cn()}constructor(t,i){super(),this.pY=t,this._8=i,this.a8=void 0,this.u8=void 0,this.OH=new ro,this.l8=!1,this.c8=!1}};function rj(t){return t.match(/video/)?ej.Yv:ej.Gv}var hj=class t{static g8(i,e,s,n){const r=[];for(let t=0;t<i.v$.length;t++){const s=i.v$[t].gP;r.push(new nj(s,e))}return new t(i,r,s,n)}w8(){}get A8(){return[this.c$,this.l$].filter(z_)}get r$(){return this.c$}get M_(){return Ik(this)}get vd(){return this.Mx}get ct(){return 0}get GH(){var t,i,e;const s=null==(e=null==(t=this.c$)?void 0:t.GH())||e;var n;const r=null==(n=null==(i=this.l$)?void 0:i.GH())||n;return s&&r}get fg(){return new Ki([0,1/0])}get h$(){return this.l$}get rt(){throw new b("Not implemented")}async Xf(){await Promise.all([this.c$,this.l$].filter(z_).map((t=>t.Xf())))}f$(t){}A$(t,i,e,s){}_J(){var t,i;null==(t=this.c$)||t._J(),null==(i=this.l$)||i._J()}nJ(){var t,i;null==(t=this.c$)||t.nJ(),null==(i=this.l$)||i.nJ()}SH(t){return!0}bH(t){return this.Mx=t,Promise.resolve()}async DH(t,i){const e=await this.KC.ZC(t.Pb,i),s=await e.UC();return await this.IH(s),s}async IH(t){if(t&&!this.Fx.src)throw new Yr(le.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.Fx.src)throw new Yr(le.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const i=this.OC;i&&(await i.BC(this.Fx),this.OC=void 0),t&&(await t.dn(this.Fx),this.OC=t)}constructor(t,i,e,s){this.OC=void 0,this.Mx=t,this.l$=Gr(i,(t=>Boolean(t.rY.match(/video/)))),this.c$=Gr(i,(t=>Boolean(t.rY.match(/audio/)))),this.KC=e,this.Fx=s,this.w8()}},oj=class extends i{v8(){this.m8.addEventListener("timeupdate",this.p8),this.m8.addEventListener("ended",this.y8),this.m8.addEventListener("timeupdate",this.M8),this.m8.addEventListener("ratechange",this.T8),this.m8.addEventListener("volumechange",this.N8),this.m8.addEventListener("durationchange",this.D8),this.m8.addEventListener("playing",this.I8),this.m8.addEventListener("seeking",this.S8),this.m8.addEventListener("play",this.E8),this.m8.addEventListener("pause",this.b8),this.m8.addEventListener("encrypted",this.e3)}L8(){this.m8.removeEventListener("timeupdate",this.p8),this.m8.removeEventListener("ended",this.y8),this.m8.removeEventListener("timeupdate",this.M8),this.m8.removeEventListener("ratechange",this.T8),this.m8.removeEventListener("volumechange",this.N8),this.m8.removeEventListener("durationchange",this.D8),this.m8.removeEventListener("playing",this.I8),this.m8.removeEventListener("seeking",this.S8),this.m8.removeEventListener("play",this.E8),this.m8.removeEventListener("pause",this.b8)}k8(){this.E4.ln(qo._w,this.Ds)}C8(){this.E4.rn(qo._w,this.Ds)}get aP(){return this.m8}get B$(){return!1}get E_(){return this.m8.currentTime+this.x8.n8}get q_(){return this.m8.paused}get Ng(){return this.m8.volume}set Ng(t){this.m8.volume=t}get Z_(){return this.m8.playbackRate}set Z_(t){this.m8.playbackRate=t}get O8(){return this.m8.defaultPlaybackRate}get M_(){var t,i;return null!=(i=null==(t=this.cP)?void 0:t.M_)?i:Ki.KB()}get j8(){return Ki.mn(this.m8.buffered)}get eg(){const t=this.z8;return this.Io.xB(t.Sm(this.x8.n8))}get z8(){return Ki.mn(this.m8.played)}get gg(){return this.$B}get k$(){return!1}get F$(){return!1}get ct(){return this.m8.duration}get Y_(){return this.m8.muted}set Y_(t){this.m8.muted=t}get w6(){return this.m8.style}get c4(){return oe({},gL,{mH:!0})}Em(t,i,e){this.K4.s_(),this.K4=new Po,this.J4=this.t2(t,this.J4,this.K4.i_).catch(xs)}async t2(t,i,e){var s;this.Io=this.eg;const n=null==(s=this.cP)?void 0:s.A8;if(!n)return;const r=x.max(...n.map((t=>t.d8?t.d8:1/0)));this.$B=!0,this.mo(new ja(t)),await i.catch(xs),Pi(e);try{for(this.P8||this.B8(),this.m8.load(),this.U8||(this.Q8=!1,await hl(this.m8.play(),e));this.cg<ow.Uv;)await this.E4.v_(qo._w,e);this.F8.eL(),this.P8=!1,this.$B=!1,this.mo(new _e(this.E_))}catch(t){throw this.F8.sL(t),t}finally{this.Y8(),this.x8.o8(r)}}Pg(){this.U8=!0,this.m8.pause()}async Bg(){this.U8&&(this.m8.src||this.d3(),await this.F8.nL,await this.m8.play())}async Xf(){this._8&&this._8.s8().catch(xs),this.K4.s_(),this.L8(),this.C8(),this.E4.Xf(),this.Bo(),this.Al.cn()}async Wn(){this._8&&this._8.s8().catch(xs),this.K4.s_(),this.m8.removeAttribute("src"),this.m8.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.m8.removeAttribute("x-airplay-deny"),this.m8.disableRemotePlayback=!1,this.m8.load(),this.E4.Wn(),this.Io=Ki.KB()}d3(){this.u3||(lj(this.m8,fe.Ys),this.l3=!0)}get cg(){return this.E4.cg}B8(){const t=this.m8.getClientRects();let i;if(!(t.length>0))return;i=t[0];const e=i.width,s=this.m8.videoWidth/this.m8.videoHeight,n=i.height;let r,h;e/n>s?(r=n*s,h=n):(h=e/s,r=e),this.m8.style.width=r+"px",this.m8.style.height=h+"px",this.m8.style.marginLeft=(e-r)/2+"px",this.m8.style.marginTop=(n-h)/2+"px",this.m8.style.backgroundColor="black"}Y8(){this.m8.style.width="100%",this.m8.style.height="100%",this.m8.style.marginLeft="",this.m8.style.marginTop="",this.m8.style.backgroundColor=""}get vg(){return this.m8.videoHeight}get Mg(){return this.m8.videoWidth}get C_(){return this.m8.ended}get Ti(){return this.m8.offsetHeight*fe.Ys.S4}get ji(){return this.m8.offsetWidth*fe.Ys.S4}get R_(){return!1}get u3(){return this.l3}get N_(){}get Tu(){}get lt(){}get la(){return this.Q6}get fg(){return this.cP?this.cP.fg:Ki.KB()}get lP(){}get nt(){return this.Al}get Nl(){}get Lg(){return!1}set Lg(t){}NP(t,i,e,s,n){}SS(t,i,e,s,n,r,h,o,a){const u=new wn(t,i,e,s,n,r,h,a,o);return this.Al.tt(u),this._2.tt(u),u}HH(t){}F_(){return Kb(this.m8)}get j4(){return"block"===this.m8.style.display}ge(){this.m8.style.display="block"}be(){this.m8.style.display="none"}o3(){}async Pn(t){if(t.$w===Pe.tO)throw new b("Not yet implemented");await this._8.J6();const i=Gr(t.wP,(t=>t.jC.$w===Ci.jb)),e={kind:tj.W6,mediaBufferConfigs:t.v$.map((t=>t.gP)),fairPlaySdkUri:null==i?void 0:i.Jj};return await this._8.e8(e),this.cP=hj.g8(t,this._8,this.KC,this.m8),this.LH.Pn(this.cP,t),this.m8.setAttribute("x-webkit-airplay","deny"),this.m8.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.m8.disableRemotePlayback=!0,this.m8.preload="none",this.m8.src="https://theo.proxy/"+this._8.Vx+"/master.m3u8",this.cP}a3(){}jS(t){this.Al.it(t),this._2.it(t)}IP(){for(const t of this.Al.Nw.slice())t.cn();this.Al.Wn()}nP(t){}MP(){return!1}f3(t){t.appendChild(this.m8)}xg(){return this.m8}A4(){}get LP(){return this.LH.LP}set LP(t){this.LH.LP=t}get _3(){}set _3(t){}get t4(){}Yg(){}constructor(t,i){super(),this.P8=!0,this._8=new ij,this.x8=new sj,this.U8=!0,this.F8=new No,this.$B=!1,this.J4=Promise.resolve(),this.K4=new Po,this.Q8=!0,this.Io=Ki.KB(),this.l3=!1,this.p8=()=>{this.q_||this.j8.U<=0||this.M_.U<=0||this.x8.h8(this.M_.bn(this.M_.U-1),this.j8.bn(this.j8.U-1))},this.y8=()=>{this.mo(new Ds(this.E_))},this.M8=()=>{this.mo(new Tc(this.E_,this.N_))},this.T8=()=>{this.mo(new se(this.E_,this.Z_))},this.N8=()=>{this.mo(new Ve(this.E_,this.Ng))},this.D8=()=>{this.mo(new ts(this.ct))},this.I8=()=>{this.mo(new Vi(this.E_))},this.S8=()=>{this.Em(this.E_)},this.E8=async()=>{this.Q8&&this.mo(new vh(this.E_)),this.U8=!1,this.Q8=!0},this.b8=()=>{this.U8=!0,this.mo(new ws(this.E_))},this.e3=t=>{const i=t.initDataType;var e;const s=null!=(e=t.initData)?e:new ArrayBuffer(0);this.mo(new vs(i,s))},this.m8=t,this.E4=new Fk(this),this.m8.playsInline=!0,this.m8.style.width="100%",this.m8.style.height="100%",this.v8(),this.k8(),this.Q6=JO(this.m8),this.LH=new Tx(this),this.KC=i,this.Al=new Tn,this._2=new hx(this)}},aj=[Tw.Gv,Tw.Yv];function uj(t){const i=h.createElement(t);return Fs(i)&&function(t){t.addEventListener("contextmenu",(t=>{t.preventDefault()}))}(i),cj(i),i}function cj(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),Fe(t),cN(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload=Al.lB,t.controls=!1,t.style.display="none",Fs(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function lj(t,i){if(i.G8){const i=t.muted;t.muted=!0,t.muted=!1,t.muted=i}else if(t.paused){const i=t.play();B_(i)&&W(i),t.pause()}}r(),r();var dj=class{BI(t){return this.LS.BI(t)}MY(t){this.LS.MY(t)}cn(){this.LS.cn()}constructor(t){this.LS=t}},fj=class extends dj{async BI(t){const i=new nc(t),e=this.oR.bV.Bz(i);if(!e)return this.LS.BI(i);e.kV(fe.h_()/1e3);const s=await this.LS.BI(t);e.CV(fe.h_()/1e3);const n={JM:s.SG().pipeThrough(new xh(new _j(e))),BI:s.BI};return new Hh(n,s)}constructor(t,i){super(t),this.oR=i}},_j=class{start(t){this.eH=t}transform(t){this.V8.xV(fe.h_()/1e3,t),this.eH.enqueue(t)}flush(){this.V8.OV(fe.h_()/1e3)}constructor(t){this.V8=t}};function gj(t){return{get ratio(){return t.Do},get thresholds(){return t.W8.slice()}}}function wj(t){const i=[],e=x.floor(1/t);if(j(e))return[];for(let s=0;s<=e;s++){const e=It(s*t,0,1);i.push(e)}return i}r(),r(),r();var Aj=class{get Do(){return this.H8}get W8(){return this.q8}X8(t){return i=>{const e=i[i.length-1];this.H8=e.intersectionRatio,t(e.intersectionRatio)}}get oa(){return this.Ua||(this.Ua=gj(this)),this.Ua}Rg(){this.Z8.disconnect()}constructor(t,i,e){this.H8=1,this.Ua=void 0,this.q8=wj(i);const n=this.X8(e);this.Z8=new s.IntersectionObserver(n,{root:null,threshold:this.q8}),this.Z8.observe(t)}},vj=class{get Do(){return this.H8}get W8(){return this.q8}get oa(){return this.Ua||(this.Ua=gj(this)),this.Ua}K8(t){this.H8=t;const i=this.q8;let e=0;if(t>0)for(;e<i.length&&i[e]<=t;)++e;this.J8!==e&&(this.J8=e,this.t9(t))}constructor(t,i){this.H8=1,this.J8=-1,this.Ua=void 0,this.q8=wj(t),this.t9=i}},mj=class extends vj{i9(){const t=this.co.getBoundingClientRect();return It(x.max(0,x.min(s.innerWidth,t.right)-x.max(0,t.left))*x.max(0,x.min(s.innerHeight,t.bottom)-x.max(0,t.top))/(t.width*t.height),0,1)}Rg(){s.removeEventListener("scroll",this.e9)}constructor(t,i,e){super(i,e),this.e9=oo((()=>this.K8(this.i9())),50),this.co=t,s.addEventListener("scroll",this.e9,!!QE&&{passive:!0}),yc((()=>this.K8(this.i9())))}},pj=.1,yj=class{get s9(){return this.n9}get Fo(){return this.r9}set Fo(t){if(j(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.r9=t}get oa(){return this.Ua||(this.Ua=function(t){return{get ratio(){return t.s9},get visible(){return t.s9>t.Fo},get visibleThreshold(){return t.Fo},set visibleThreshold(i){i=Ee(i),t.Fo=i},addObserver:(i,e)=>(i=Ee(i),t.Mo(i,e).oa),removeObserver(i){let e=t.h9(i);e&&t.Eo(e)}}}(this)),this.Ua}o9(t){return i=>{this.n9=i,null==t||t(this.n9)}}Mo(t,i){if(j(t))throw new k("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let e;return e="function"==typeof s.IntersectionObserver?new Aj(this.co,t,this.o9(i)):new mj(this.co,t,this.o9(i)),this.a9.push(e),e}Eo(t){t.Rg(),Et(this.a9,t)}h9(t){for(const i of this.a9)if(i.oa===t)return i}cn(){for(const t of this.a9)t.Rg();Ri(this.a9)}constructor(t){this.n9=1,this.r9=0,this.a9=[],this.Ua=void 0,this.co=t,this.Mo(.1,this.o9())}};r();var Mj=class extends gg{constructor(){super(t.pA)}};r();var Tj=class{get u9(){return this.c9}set u9(t){this.c9=t}get oa(){var t;return null!=(t=this.Ua)?t:this.Ua=function(t){return{get conviva(){var i;return null==(i=t.u9)?void 0:i.oa}}}(this)}cn(){this.c9=void 0}};var Nj=class extends ha{get l9(){return this.oR}get fm(){return this.d9}set fm(t){this.d9=t,this.f9.fm=t}get _9(){return this.g9}get ht(){return this.f9.ht}get zQ(){return this.w9}get Tu(){return this.A9}get P_(){return this.f9.P_}get Q_(){return this.v9}get tQ(){return this.m9}get nt(){return this.f9.nt}get Nl(){return this.aR}get rt(){return this.f9.rt}get M_(){return this.T_()}T_(){return this.f9.M_}get p9(){return this.oW}get pW(){return this.yW}get E_(){return this.b_()}set E_(t){this.L_(t)}b_(){return this.f9.E_}L_(t){this.f9.E_=t}y9(){return this.b_()}get N_(){return this.f9.N_}set N_(t){this.f9.N_=t}get bt(){return this.f9.bt}get ct(){return this.kd()}kd(){return this.f9.ct}get we(){return this.f9.we}get C_(){return this.f9.C_}get lt(){return this.O_()}O_(){return this.f9.lt}get j_(){return this.z_()}z_(){return this.f9.j_}get la(){return this.f9.Cg()}get Lg(){return this.f9.Lg}set Lg(t){this.f9.Lg=t}get Y_(){return this.f9.Y_}set Y_(t){const i=Boolean(t);this.V_(i)}V_(t){this.f9.Y_=t,t||this.q_||this.zg()}get q_(){return this.f9.q_}get Z_(){return this.f9.Z_}set Z_(t){this.f9.Z_=t}get eg(){return this.rg()}rg(){return this.f9.eg}get hg(){return this.f9.hg}set hg(t){this.f9.hg=t}get cg(){return this.f9.cg}get fg(){return this._g()}_g(){return this.f9.fg}get gg(){return this.f9.gg}get Bw(){return this.Mm}get vg(){return this.f9.vg}get Mg(){return this.f9.Mg}get Ng(){return this.f9.Ng}set Ng(t){const i=It(Number(t),0,1)||0;this.Ig(i)}get Sg(){return this.f9.Sg}Ig(t){this.f9.Ng=t}fa(){Ta(this,$I,this)}Bg(){this.f9.Bg()}Pg(){this.f9.Pg()}Oa(){return this.gB}async ca(t,i){if(this.gB=t,t){this.M9.IF(t).catch(this.T9);const e=function(t){t.sources;const i=t.sources.filter((t=>Wo(t.integration)));0;return t.sources=i,t}(t);await this.f9.ca(e,i)}}zg(){if(this.lo)return;this.f9.zg(),this.g9.zg();const t=this.we.getElementsByTagName("video");for(let i=0;i<t.length;i++){const e=t[i];"Advertisement"===e.title&&lj(e,fe.Ys)}this.lo=!0}cs(){return this.N9.Ro()===bu.FULLSCREEN}ge(){this.f9.ge()}be(){this.f9.be()}xg(){return this.f9.xg()}Yg(){this.f9.Yg()}Gg(){this.f9.Gg()}async Rg(){this.gB=void 0,await this.f9.Rg(),await this.f9.Wn()}async cn(){this.mo(new Mj),this.Bo(),this.w9.cn(),this.MO.cn(),this.m9.cn(),this.D9.cn(),this.I9.cn(),this.N9.cn(),this.A9.cn(),this.S9.cn(),this.E9.cn(),this.g9.cn(),this.hR.cn(),await this.f9.cn()}constructor(i,e){super(),this.d9=!1,this.lo=!1,this.gB=void 0,this.b9=!1,this.S9=new Tj,this.da=void 0,this.T9=t=>{if(this.b9)return;this.b9=!0;const i=this.L9,e=Qh(t);this.f9.Ew=new zI(this.we,e,t),W(i.cn())},this.k9=i=>{i.type!==t.PA&&i.type!==t.zA&&this.mo(i)};const s=Ee(e.uid);j(s)?this.Mm=Yw++:this.Mm=s,this.vd=e;const n=fe.MO,r=new oL;this.E9=new LE("6.9.0",n,r),this.oR=new Yb;const h=new fj(n,this.oR);this.MO=new Cb(h,e.allowMixedContent),this.XW=new _E(e.isEmbeddable,"6.9.0",cE()),this.M9=new hL(n,this.XW,this.E9,r,e,cE()),this.M9.GW().catch(this.T9),this.A9=new HE(i),this.A9.ln(xr.an,this.Ds),this.aR=new dL,this.oW=new Wb,this.yW=new qb;const o=new Y(i,e,this.MO,this.oR,this.A9,this.aR);this.oR.VV(o);let a=o;a=new Hb(a,this.p9),a=new Xb(a,this.pW),this.L9=a,this.f9=new jw(this.L9),this.f9.d_(this.k9),this.v9=new Zb(this.f9),this.m9=new jb(this.f9,this.MO,this.oR),this.D9=new jE(this),this.I9=new $E(this.f9,e.allowNativeFullscreen),this.N9=new JI(this.I9),this.A9.dn(),this.jo=new yj(i),this.hR=new kp(this.A9,this.aR,1,[Tw.Yv]),this.g9=new Cp(this.hR),this.w9=new tL}};r(),r();var iu,O=class extends ha{get l9(){return this.Lo.l9}get Nc(){return this.C9()}C9(){return this.Lo.Nc}get S9(){return this.Lo.S9}get E9(){return this.Lo.E9}get _9(){return this.x9()}x9(){return this.Lo._9}get fm(){return this.Lo.fm}set fm(t){this.Lo.fm=t}get D9(){return this.Lo.D9}get zQ(){return this.Lo.zQ}get p9(){return this.Lo.p9}get vd(){return this.Lo.vd}get Tu(){return this.Lo.Tu}get la(){return this.Cg()}Cg(){return this.Lo.la}get MO(){return this.Lo.MO}get Sg(){return this.Lo.Sg}get pW(){return this.Lo.pW}get tQ(){return this.Lo.tQ}get N9(){return this.Lo.N9}get A9(){return this.Lo.A9}get f9(){return this.Lo.f9}get Nl(){return this.Lo.Nl}get Bw(){return this.Lo.Bw}get jo(){return this.Lo.jo}get ht(){return this.m_()}m_(){return this.Lo.ht}T_(){return this.Lo.T_()}get N_(){return this.D_()}set N_(t){this.I_(t)}D_(){return this.Lo.N_}I_(t){this.Lo.N_=t}get bt(){return this.S_()}S_(){return this.Lo.bt}b_(){return this.Lo.b_()}L_(t){this.Lo.L_(t)}y9(){return this.Lo.y9()}kd(){return this.Lo.kd()}get we(){return this.Lo.we}get C_(){return this.x_()}x_(){return this.Lo.C_}O_(){return this.Lo.O_()}z_(){return this.Lo.z_()}get P_(){return this.B_()}B_(){return this.Lo.P_}get Lg(){return this.Lo.Lg}set Lg(t){this.Lo.Lg=t}get Q_(){return this.F_()}F_(){return this.Lo.Q_}get Y_(){return this.G_()}set Y_(t){this.V_(t)}G_(){return this.Lo.Y_}V_(t){this.Lo.V_(t)}get q_(){return this.X_()}X_(){return this.Lo.q_}get Z_(){return this.K_()}set Z_(t){this.J_(t)}K_(){return this.Lo.Z_}J_(t){this.Lo.Z_=t}rg(){return this.Lo.rg()}get hg(){return this.og()}set hg(t){this.ag(t)}og(){return this.Lo.hg}ag(t){this.Lo.hg=t}get cg(){return this.dg()}dg(){return this.Lo.cg}get da(){return this.Lo.da}set da(t){this.Lo.da=t}_g(){return this.Lo._g()}get gg(){return this.wg()}wg(){return this.Lo.gg}get nt(){return this.Ag()}Ag(){return this.Lo.nt}get vg(){return this.pg()}pg(){return this.Lo.vg}get rt(){return this.yg()}yg(){return this.Lo.rt}get Mg(){return this.Tg()}Tg(){return this.Lo.Mg}get Ng(){return this.Dg()}set Ng(t){this.Ig(t)}Dg(){return this.Lo.Ng}Ig(t){this.Lo.Ig(t)}zg(){this.Lo.zg()}Pg(){this.Lo.Pg()}Bg(){this.Lo.Bg()}ge(){this.Lo.ge()}be(){this.Lo.be()}cs(){return this.Lo.cs()}xg(){return this.Lo.xg()}Yg(){this.Lo.Yg()}Gg(){this.Lo.Gg()}fa(){this.Lo.fa()}Oa(){return this.Lo.Oa()}ca(t,i){return this.Lo.ca(t,i)}Rg(){return this.Lo.Rg()}Wg(t){return!1}async cn(){this.Bo(),await this.Lo.cn()}constructor(t,i){super(),this.Hg=t=>{this.Wg(t)||this.mo(t)},this.Lo=t,this.O9=!i,this.O9&&t.d_(this.Hg)}};!function(t){t[t.Wa=0]="Wa",t[t.j9=1]="j9",t[t.z9=2]="z9",t[t.P9=3]="P9"}(iu||(iu={}));var Dj=[0,1,2,3],Ij={};function tr(t,i){(Ij[i]||(Ij[i]=[])).push(t)}var Sj={};function Ej(t,i){(Sj[i]||(Sj[i]=[])).push(t)}var bj=[];function Lj(t){for(const i of bj)i(t)}r();var kj=self.CustomEvent;var Cj=function(){try{const t=new kj("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,i){return new CustomEvent(t,i)}:function(t,i){const e=h.createEvent("CustomEvent");return e.initCustomEvent(t,(null==i?void 0:i.bubbles)||!1,(null==i?void 0:i.cancelable)||!1,null==i?void 0:i.detail),e};r();var xj=new class{get U(){return this.um.length}get oa(){var t;return null!=(t=this.Ua)?t:this.Ua=function(t){const i=[];for(let e=0;e<t.U;e++)i[e]=t.Iw(e).oa;return i.getPlayerByUID=i=>{const e=t.B9(i);return e&&e.oa},i}(this)}Iw(t){return this.um[t]}dq(t){this.um.push(t),this.oa.push(t.oa)}wm(t){const i=this.um.indexOf(t);i<0||(jc(this.um,i),this.Ua&&jc(this.Ua,i))}B9(t){for(const i of this.um)if(i.Bw===t)return i}constructor(){this.um=[],this.Ua=void 0}};r(),r(),r();var Oj=class extends gg{constructor(i){super(t.no),this.source=i}};r();var jj=class extends ha{get N_(){}set N_(t){}get E_(){return this.b_()}set E_(t){this.L_(t)}b_(){return this.JB}y9(){return this.b_()}L_(t){this.$B&&this.JB===t||(this.JB=t,this.$B=!0,this.mo(new ja(this.JB)))}get q_(){return this.iR}get Z_(){return this.eR}set Z_(t){this.eR!==t&&(this.eR=t,this.mo(new se(this.JB,this.Z_)))}get cg(){return ow.Rv}get gg(){return this.$B}Bg(){this.iR&&(this.iR=!1,this.mo(new vh(this.JB)),this.mo(new wc(this.JB)))}Pg(){this.iR||(this.iR=!0,this.mo(new Tc(this.JB,this.N_)),this.mo(new ws(this.JB)))}Wn(){this.JB=0,this.$B=!1,this.eR=1,this.Pg()}cn(){this.Bo()}be(){}ge(){}constructor(){super(),this.JB=0,this.iR=!0,this.$B=!1,this.eR=1}};r();var Vs,zj={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},Pj={visibility:"hidden"},Bj={visibility:"visible"},Rj=class{get Fu(){return void 0!==this.R9?this.R9:void 0!==this.U9?this.U9:void 0}set Q9(t){this.U9=t,this.Ln()}Ln(){const t=this.Lo.q_,i=this.F9;this.Fu?this.Us.style.backgroundImage='url("'+iw(this.Fu)+'")':this.Us.style.backgroundImage="",t&&this.Fu&&!i?this.ge():this.be()}ge(){ze(Pj,this.Lo.we),ze(Bj,this.Us)}be(){ze(Pj,this.Us),ze(Bj,this.Lo.we)}fB(){this.Lo.ln(t.no,this.Y9),this.Lo.ln(t.bh,this.wO)}cn(){this.Lo.rn(t.no,this.Y9),this.Lo.rn(t.bh,this.wO),ei(this.Us)}constructor(t){this.F9=!1,this.Y9=t=>{var i;this.F9=!this.Lo.q_,this.R9=null==(i=t.source)?void 0:i.poster,this.Ln()},this.wO=()=>{this.F9=!0,this.be()},this.Lo=t,this.fB(),this.Us=function(){let t=Ys&&Ys.document&&Ys.document.createElement("div");return t.className="theoplayer-poster",ze(zj,t),t}(),t.we.appendChild(this.Us)}};function qu(t){let i;const e={get playing(){return t.Mc},get currentAds(){return t.G9.map((t=>t.V9()))},get currentAdBreak(){var i,e;return null!=(e=null==(i=t.W9)?void 0:i.V9())?e:null},get scheduledAds(){return t.H9.map((t=>t.V9()))},get scheduledAdBreaks(){return t.q9.map((t=>t.V9()))},skip(){t.uT()},schedule(i){let e=GS(i,Dr.kb);e?t.d1(e,Vs.X9,!1):console.error("Invalid ad description")},addEventListener(t,e){i.ln(t,e)},removeEventListener(t,e){i.rn(t,e)}};return i=new ma(t,e),e}r(),r(),r(),function(t){t[t.X9=0]="X9",t[t.Z9=1]="Z9"}(Vs||(Vs={})),r(),r();var tc=class extends Ha{constructor(t,i){super(t),this.Ul=i}},pc=class extends gg{get ad(){return this.adBreak}constructor(t,i){super(t),this.adBreak=i}},cn=class extends tc{ha(){return new Uj(this.Ul.V9())}constructor(t){super("K9",t)}},Uj=class extends pc{constructor(t){super("removeadbreak",t)}};r();var Qj=class extends tc{ha(){return new Fj(this.Ul.V9())}constructor(t){super("J9",t)}},Fj=class extends pc{constructor(t){super("addadbreak",t)}};r(),r();var $e=class extends Ha{constructor(t,i){super(t),this.t7=i}},Ts=class extends gg{constructor(t,i){super(t),this.ad=i}},pn=class extends $e{ha(){return new Yj(this.t7.V9())}constructor(t){super("i7",t)}},Yj=class extends Ts{constructor(t){super("addad",t)}};r();var Bh=class extends tc{ha(){return new Gj(this.Ul.V9())}constructor(t){super("e7",t)}},Gj=class extends pc{constructor(t){super("adbreakend",t)}};r();var ka=class extends tc{ha(){return new Vj(this.Ul.V9())}constructor(t){super("s7",t)}},Vj=class extends pc{constructor(t){super("adbreakbegin",t)}};r();var tu=class extends $e{ha(){return new Wj(this.t7.V9(),this.currentTime)}constructor(t,i){super("n7",t),this.currentTime=i}},Wj=class extends Ts{constructor(t,i){super("adbegin",t),this.currentTime=i}};r();var fa=class extends $e{ha(){return new Hj(this.t7.V9(),this.currentTime)}constructor(t,i){super("r7",t),this.currentTime=i}},Hj=class extends Ts{constructor(t,i){super("adend",t),this.currentTime=i}};r();var vn=class extends Ha{ha(){return new qj}constructor(){super("h7")}},qj=class extends gg{constructor(){super("adadded")}},mn=class extends ha{get Mc(){return!!this.Tc&&this.Tc.Mc}get G9(){return this.Tc?this.Tc.G9:[]}get W9(){return this.Tc?this.Tc.W9:null}get H9(){return this.Tc?this.Tc.H9:[]}get q9(){return this.Tc?this.Tc.q9:[]}d1(t,i,e){var s;null==(s=this.Tc)||s.d1(t,i,e)}o7(t){var i;null==(i=this.Tc)||i.o7(t)}uT(){var t;null==(t=this.Tc)||t.uT()}a7(t){var i;null==(i=this.Tc)||i.a7(t)}get oa(){var t;return null!=(t=this.Ua)?t:this.Ua=qu(this)}get Ew(){return this.Tc}set Ew(t){const i=this.Tc;if(i===t)return;const e=this.G9,s=this.W9,n=this.H9,r=this.q9;null==i||i.A_(this.Ds),this.Tc=t,null==t||t.d_(this.Ds);const h=this.G9,o=this.W9,a=this.H9,u=this.q9,c=[];let l=!1;for(const t of r)na(u,t)||c.push(new cn(t));for(const t of u)na(r,t)||c.push(new Qj(t));for(const t of a)na(n,t)||(c.push(new pn(t)),l=!0);l&&c.push(new vn),s!==o&&(s&&c.push(new Bh(s)),o&&c.push(new ka(o)));for(const t of e)na(h,t)||c.push(new fa(t,this.Lo.b_()));for(const t of h)na(e,t)||c.push(new tu(t,this.Lo.b_()));for(const t of c)this.mo(t)}cn(){var t;return this.Bo(),null==(t=this.Tc)||t.A_(this.Ds),this.Tc=void 0,Promise.resolve()}constructor(t){super(),this.Ua=void 0,this.Lo=t}};r();var Xj,gn=class extends ha{get Mc(){return!1}get G9(){return[]}get W9(){return null}get H9(){return[]}get q9(){return[]}d1(t,i,e){this.u7.push({l7:t,d7:i,f7:e})}uT(){}a7(t){}get oa(){var t;return null!=(t=this.Ua)?t:this.Ua=qu(this)}o7(t){const i=this.u7.slice();this.Wn();for(const e of i)t.d1(e.l7,e.d7,e.f7)}_7(){const t=this.u7.map((t=>t.l7));return this.Wn(),t}Wn(){Ri(this.u7)}cn(){return this.Bo(),this.Wn(),Promise.resolve()}constructor(...t){super(...t),this.Ua=void 0,this.u7=[]}};function Zj(i){return class extends ha{get E9(){return this.g7.E9}get Nc(){return this.Tc}get S9(){return this.g7.S9}get D9(){return this.g7.D9}get vd(){return this.g7.vd}get MO(){return this.g7.MO}get la(){return this.g7.la}get N9(){return this.g7.N9}get A9(){return this.g7.A9}get f9(){return this.g7.f9}get l9(){return this.g7.l9}get fm(){return this.g7.fm}set fm(t){this.g7.fm=t,this.w7()}get _9(){return this.g7._9}get ht(){return this.g7.ht}get zQ(){return this.g7.zQ}get Tu(){return this.g7.A9}get oa(){return this.Ua||(this.Ua=this.ha()),this.Ua}get P_(){return this.g7.P_}get Lg(){return this.g7.Lg}set Lg(t){this.g7.Lg=t}get Q_(){return this.g7.Q_}get tQ(){return this.g7.tQ}get nt(){return this.g7.nt}get Nl(){return this.g7.Nl}get rt(){return this.g7.rt}get p9(){return this.g7.p9}get pW(){return this.g7.pW}get N_(){return this.Lo.N_}set N_(t){this.Lo.N_=t}get bt(){return this.g7.bt}get we(){return this.g7.we}get C_(){return this.g7.C_}get Y_(){return this.g7.Y_}set Y_(t){this.V_(t)}get q_(){return this.Lo.q_}get mi(){return this.A7.Fu||""}set mi(t){this.A7.Q9=t}get Z_(){return this.g7.Z_}set Z_(t){this.Lo.Z_=t}get hg(){return this.g7.hg}set hg(t){this.g7.hg=t}get cg(){return this.Lo.cg}get da(){return this.g7.da}set da(t){this.g7.da=t}get gg(){return this.Lo.gg}get Bw(){return this.g7.Bw}get vg(){return this.g7.vg}get Mg(){return this.g7.Mg}get Ng(){return this.g7.Ng}set Ng(t){this.Ig(t)}get Sg(){return this.g7.Sg}get jo(){return this.g7.jo}async Lx(t,i){return this.OH.Lx(t,i).catch(Ah)}async v7(t,i){Pi(i),this.g7.d_(this.m7);try{await this.g7.ca(t,i)}finally{this.g7.A_(this.m7)}}async w7(){const t=await this.p7();this.y7(t)}async p7(){const t=this.Oa();return t&&!Uu(t)&&this.fm&&this.q_?this._9.M7(this.Y_):"none"}y7(t){var i;const e=(null==(i=this.Oa())?void 0:i.mutedAutoplay)||this.vd.mutedAutoplay;switch(t){case"all":this.T7();break;case"muted":(this.Y_||e===Nw.ALL)&&(this.Y_=!0,this.Bg())}}ca(t){Uu(this.gB)||this.mo(new bl(0,ow.Rv)),this.Wn(),this.gB=t,W(this.Lx((async i=>{Pi(i);try{await this.v7(t,i)}catch(t){return this.gB=void 0,void this.qP(function(t,i){return t instanceof ce?t:t instanceof b?new ce(i,t.message,t):new ce(i,String(t))}(t,le.SOURCE_NOT_SUPPORTED))}finally{this.N7(this.g7)}const e=await this.p7();this.mo(new Oj(this.Oa())),this.y7(e)})))}L_(t){this.Lo.L_(t)}O_(){var t;return null!=(t=this.fR)?t:this.g7.O_()}z_(){var t;return null!=(t=this.hP)?t:this.g7.z_()}qP(t){void 0===this.z_()&&(this.hP=t,this.fR=Qh(t),this.mo(new me(t)))}Bg(){this.Lo.Bg()}T7(){this.Y_||this.zg(),this.Bg()}zg(){this.g7.zg()}Pg(){this.Lo.Pg()}Rg(){this.ca(void 0)}ge(){this.mB=!0,this.Lo.ge()}be(){this.mB=!1,this.Lo.be()}fa(){this.g7.fa()}Ig(t){this.g7.Ig(t)}V_(t){this.g7.V_(t)}va(t){this.D7=t,t.dq(this)}cs(){return this.g7.cs()}Oa(){return this.gB}xg(){return this.g7.xg()}b_(){return this.Lo.b_()}y9(){return this.Lo.y9()}kd(){return this.g7.kd()}T_(){return this.g7.T_()}rg(){return this.g7.rg()}_g(){return this.g7._g()}Yg(){this.g7.Yg()}Gg(){this.g7.Gg()}Wn(){this.gB=void 0,this.hP=void 0,this.fR=void 0,this.I7=!0,Ri(this.S7),this.E7.Wn(),this.N7(this.E7),this.OH.s_(),W(this.OH.Lx((async t=>{Pi(t),await this.g7.Rg()})))}cn(){this.mo(new Mj),this.A7.cn(),this._B(),this.Wn(),W(this.Lx((async()=>{await this.g7.cn(),this.D7&&(this.D7.wm(this),this.D7=void 0),this.OH.cn()}))),this.Bo()}N7(t){if(this.Lo===t)return;const i=this.Lo.q_,e=this.Lo.b_(),s=this.Lo.Z_,n=this.Lo.cg,r=this.Lo.gg;this.b7=i,this.g3=n,this._B(),t.d_(this.L7),t===this.g7?(void 0!==this.Tc&&(this.Tc.Ew=t.Nc,this.k7.o7(this.Tc)),(r||t.b_()!==e)&&t.L_(e),t.Z_!==s&&(t.Z_=s),i?t.Pg():t.Bg()):(void 0!==this.Tc&&(this.Tc.Ew=this.k7,this.k7.Wn()),this.vd.retainPlaybackRateOnSourceChange?t.Z_=s:1!==s&&this.mo(new se(this.b_(),1))),t.A_(this.L7),this.Lo=t,this.fB();for(const t of this.S7)this.mo(t);Ri(this.S7),this.mB?t.ge():t.be()}fB(){this.Lo.d_(this.Vg)}_B(){this.Lo.A_(this.Vg)}ha(){return function(t){let i,e;const s=i=>{e=i;const s=rl(i,t.vd);t.ca(s)};let n={get abr(){return t.l9.oa},get ads(){var i;return null==(i=t.Nc)?void 0:i.oa},get analytics(){return t.S9.oa},get audioTracks(){return t.ht.oa},get autoplay(){return t.fm},set autoplay(i){t.fm=Boolean(i)},get buffered(){return t.T_()},get canvas(){return t.D9.oa},get cast(){var i;return null==(i=t.zQ)?void 0:i.oa},get clip(){return t.p9.oa},get currentProgramDateTime(){var i;return null!=(i=t.N_)?i:null},set currentProgramDateTime(i){t.N_=null!=i?i:void 0},get currentTime(){return t.b_()},set currentTime(i){t.L_(Number(i))},get duration(){return t.kd()},get element(){return t.we},get ended(){return t.C_},get error(){return t.O_()},get errorObject(){return t.z_()},get loop(){return t.pW.pW},set loop(i){t.pW.pW=Boolean(i)},get metrics(){return t.Q_.oa},get muted(){return t.Y_},set muted(i){t.V_(i)},get network(){return t.tQ.oa},get paused(){return t.q_},get playbackRate(){return t.Z_},set playbackRate(i){const e=Number(i);if(e<0)throw new RangeError("playbackRate must be a positive number");t.Z_=e},get played(){return t.rg()},get poster(){return t.mi},set poster(i){t.mi=P(i)},get preload(){return t.hg},set preload(i){t.hg=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(i)},get presentation(){return t.N9.oa},get readyState(){return t.cg},get seekable(){return t._g()},get seeking(){return t.gg},get source(){return e},set source(t){s(t)},get src(){return zS(t.Oa())},set src(t){s({sources:t})},get textTracks(){return t.nt.oa},get textTrackStyle(){return t.Nl.oa},get uid(){return t.Bw},get videoHeight(){return t.vg},get videoTracks(){return t.rt.oa},get videoWidth(){return t.Mg},get visibility(){return t.jo.oa},get volume(){return t.Ng},set volume(i){t.Ig(Number(i))},get latency(){return t.Sg.oa},destroy(){t.cn(),t=null,e=void 0},play(){t.T7()},pause(){t.Pg()},stop(){e=void 0,t.Rg()},prepareWithUserAction(){t.zg()},addEventListener(t,e){i.ln(t,e)},removeEventListener(t,e){i.rn(t,e)},setSource(t){s(t)}};return i=new Mu(n,!0),i.La(t),i.ln("destroy",(()=>{i.cn()})),n}(this)}constructor(e,s){super(),this.b7=!0,this.g3=ow.Rv,this.I7=!1,this.gB=void 0,this.hP=void 0,this.fR=void 0,this.m7=i=>{i.type!==t.RA&&this.S7.push(i)},this.L7=i=>{(i.type!==t.bh||this.Lo.q_)&&(i.type===t.yh&&this.Lo.q_||i.type===t.YA&&this.Lo.gg&&this.Lo.b_()===i.currentTime||i.type===t.RA&&this.Lo.Z_===i.playbackRate||this.mo(i))},this.Vg=i=>{if(this.I7){if(i.type===qo.fv)return;i.type!==qo.rv&&i.type!==qo._v||(this.I7=!1)}if(i.type===t.bh){if(!this.b7)return;this.b7=!1}else if(i.type===t.yh){if(this.b7)return;this.b7=!0}else if(i.type===qo._w){if(this.g3===i.readyState)return;this.g3=i.readyState}else if(i.type===t.pA)return;this.mo(i)},this.g7=new i(e,s),this.E7=new jj,this.Lo=this.g7,this.A7=new Rj(this),this.g7.Nc&&(this.Tc=new mn(this),this.Tc.Ew=this.g7.Nc,this.k7=new gn),this.OH=new ro,this.S7=[],this.mB=!0,this.fB()}}}function Kj(){if(!Xj){let t=Nj;t=function(t){return class extends O{constructor(i,e){let s=new t(i,e);for(const t of Dj)if(Sj[t])for(const i of Sj[t])s=i(s);super(s)}}}(t);let i=Zj(t);i=function(t){let i=t;for(const t of Dj)if(Ij[t])for(const e of Ij[t])i=e(i);return i}(i),Xj=i}return Xj}function Jj(t,i){const e=kw(i),s=new(Kj())(t,e);s.da=s;let n=s.oa;return s.fa(),s.va(xj),_.defineProperty(n,"constructor",{value:Jj}),n=Tg(n),Lj(s),n}yc((()=>{self.dispatchEvent&&self.dispatchEvent(Cj("theoplayerready"))})),r();var $j={base64:new class{encode(t){return Fh(t)}decode(t){return vi(t)}}};r();var tz=JSON.parse('["dash","hls","chromecast","ads","airplay","yospace","spotx","vr","vr-webxr","conviva","cache","webaudio","youbora","mediamelon","moat","google-dai","streamone","lcevc","freewheel","agama","verizonmedia","mediatailor","ui","relatedcontent","social","upnext","contextmenu","texttrackstyle-ui","activequalitylabel","upcomingadnotification"]');function iz(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),_.defineProperty(t,s.key,s)}}function ez(t,i){var e=function(t,i){var e=t.length;if(e<=1)return t;for(var s=new Array(e),n=1;n<e;n*=2){sz(t,i,n,s);var r=t;t=s,s=r}return t}(t,i);return e!==t&&sz(e,null,t.length,t),t}function sz(t,i,e,s){var n,r,h,o,a,u=t.length,c=0,l=2*e;for(n=0;n<u;n+=l)for(h=(r=n+e)+e,r>u&&(r=u),h>u&&(h=u),o=n,a=r;;)if(o<r&&a<h)i(t[o],t[a])<=0?s[c++]=t[o++]:s[c++]=t[a++];else if(o<r)s[c++]=t[o++];else{if(!(a<h))break;s[c++]=t[a++]}}r(),r(),r(),r();var nz=/[a-zA-Z]/,rz=/[0-9]/,hz=/[0-9a-fA-F]/,oz=/^0x/i,az=/^[0-9]+$/,uz=/^[0-9a-fA-F]+$/,cz=/^[0-7]+$/,lz=_.prototype.toString,dz=Array.isArray||function(t){return"[object Array]"===lz.call(t)},fz="undefined"!=typeof Symbol&&"symbol"==typeof Symbol.iterator;function _z(t){return dz(t)?t:Array.from(t)}function gz(t,i,e){var s=t[i];t[i]=t[e],t[e]=s}function wz(t){return t>=65&&t<=90}function Az(t){return wz(t)||function(t){return t>=97&&t<=122}(t)}function vz(t){return t>=48&&t<=57}function mz(t){return vz(t)||Az(t)}function pz(t){return vz(t)||t>=65&&t<=70||t>=97&&t<=102}function yz(t){return wz(t)?t+32:t}function Mz(t){return vz(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function Tz(t,i){return void 0===i&&(i=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(i?87:55):-1}var Nz=x.min,Dz=String.fromCharCode,Iz=16384;function Sz(t){for(var i=t.length,e=[],s=0;s<i;s+=Iz){var n=Nz(s+Iz,i);e.push(Dz.apply(null,t.slice(s,n)))}return e.join("")}var Ez=2147483647,bz=/[^\0-\x7E]/,Lz=/[\x2E\u3002\uFF0E\uFF61]/g,kz={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Cz=x.floor,xz=String.fromCharCode;function Oz(t){throw new RangeError(kz[t])}function jz(t){for(var i=[],e=0,s=t.length;e<s;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){var r=t.charCodeAt(e++);56320==(64512&r)?i.push(((1023&n)<<10)+(1023&r)+65536):(i.push(n),e--)}else i.push(n)}return i}var zz,Pz,Bz,Rz=function(t,i){return t+22+75*(t<26)-((0!=i)<<5)},Uz=function(t,i,e){var s=0;for(t=e?Cz(t/700):t>>1,t+=Cz(t/i);t>455;s+=36)t=Cz(t/35);return Cz(s+36*t/(t+38))},Qz=function(t){return function(t,i){var e=t.split("@"),s="";e.length>1&&(s=e[0]+"@",t=e[1]);var n=function(t,i){for(var e=[],s=t.length;s--;)e[s]=i(t[s]);return e}((t=t.replace(Lz,".")).split("."),i).join(".");return s+n}(t,(function(t){return bz.test(t)?"xn--"+function(t){for(var i=[],e=(t=jz(t)).length,s=128,n=0,r=72,h=0,o=t;h<o.length;h++){var a=o[h];a<128&&i.push(xz(a))}var u=i.length,c=u;for(u&&i.push("-");c<e;){for(var l=Ez,d=0,f=t;d<f.length;d++){var _=f[d];_>=s&&_<l&&(l=_)}var g=c+1;l-s>Cz((Ez-n)/g)&&Oz("overflow"),n+=(l-s)*g,s=l;for(var w=0,A=t;w<A.length;w++){var v=A[w];if(v<s&&++n>Ez&&Oz("overflow"),v==s){for(var m=n,p=36;;p+=36){var y=p<=r?1:p>=r+26?26:p-r;if(m<y)break;var M=m-y,T=36-y;i.push(xz(Rz(y+M%T,0))),m=Cz(M/T)}i.push(xz(Rz(m,0))),r=Uz(n,g,c==u),n=0,++c}}++n,++s}return i.join("")}(t):t}))};function Ut(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s)}return Sz(i)}function Fz(t){if(t>=55296&&t<=57343)throw new b("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Yz(t,i){return t>>i&63|128}function Gz(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(Fz(t),i.push(t>>12&15|224),i.push(Yz(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(Yz(t,12)),i.push(Yz(t,6))),i.push(63&t|128)):i.push(t)}function Vz(t){for(var i=[],e=0;e<t.length;e++){Gz(t[e],i)}return i}function Wz(){if(Bz>=Pz)throw new b("Invalid byte index");var t=255&zz[Bz];if(Bz++,128==(192&t))return 63&t;throw new b("Invalid continuation byte")}function Hz(){var t,i;if(Bz>Pz)throw new b("Invalid byte index");if(Bz===Pz)return!1;if(t=255&zz[Bz],Bz++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|Wz())>=128)return i;throw new b("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|Wz()<<6|Wz())>=2048)return Fz(i),i;throw new b("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|Wz()<<12|Wz()<<6|Wz())>=65536&&i<=1114111)return i;throw new b("Invalid UTF-8 detected")}function qz(t){return[37,Tz(t>>4),Tz(15&t)]}function Xz(t){return function(t){return t>=0&&t<=31}(t)||t>126}function Zz(t){return Xz(t)||32===t||34===t||60===t||62===t||96===t}function Kz(t){return Zz(t)||35===t||63===t||123===t||125===t}function Jz(t){return Kz(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function $z(t){return t<33||t>126||34===t||35===t||60===t||62===t}function tP(t){return $z(t)||39===t}function iP(t,i){if(!i(t))return[t];for(var e=Vz([t]),s=[],n=0;n<e.length;n++){var r=e[n];s.push.apply(s,qz(r))}return s}function eP(t,i){for(var e=[],s=0,n=jz(t);s<n.length;s++){var r=n[s];e.push.apply(e,iP(r,i))}return Ut(e)}function sP(t){return function(t){for(var i=[],e=t.length,s=0;s<e;s++){var n=t[s];if(37===n&&s+2<e&&pz(t[s+1])&&pz(t[s+2])){var r=Mz(t[s+1])<<4|Mz(t[s+2]);i.push(r),s+=2}else i.push(n)}return i}(Vz(t))}function nP(t){return Ut(function(t){zz=t.slice(),Pz=zz.length,Bz=0;for(var i,e=[];!1!==(i=Hz());)e.push(i);return e}(sP(jz(t))))}function rP(t){var i=t.length,e=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<i&&":"===t[r]){if(!(r+1<i&&":"===t[r+1]))throw new k;r+=2,n=s+=1}for(;r<i;){if(8===s)throw new k("Too many groups");if(":"!==t[r]){for(var h=0,o=0;o<4&&r<i&&hz.test(t[r]);)h=h<<4|C(t[r],16),r+=1,o+=1;if("."===t[r]){if(0===o)throw new k;if(r-=o,s>6)throw new k;for(var a=0;r<i;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new k;r+=1}if(!rz.test(t[r]))throw new k;for(;r<i&&rz.test(t[r]);){var c=C(t[r],10);if(null===u)u=c;else{if(0===u)throw new k;if((u=10*u+c)>255)throw new k}r+=1}e[s]=e[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new k;break}if(":"===t[r]){if((r+=1)===i)throw new k}else if(r<i)throw new k;e[s]=h,s+=1}else{if(null!==n)throw new k("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var l=s-n;for(s=7;0!==s&&l>0;)gz(e,s,n+l-1),s-=1,l-=1}else if(8!==s)throw new k;return e}function hP(t){var i=10,e=az;return oz.test(t)?(t=t.slice(2),i=16,e=uz):t.length>=2&&"0"===t[0]&&(t=t.slice(1),i=8,e=cz),""===t?0:e.test(t)?C(t,i):void 0}var oP={a0:4},aP=/[\0\t\n\r #%/:?@\[\\\]]/,uP=/[\0\t\n\r #/:?@\[\\\]]/;function cP(t,i){if("["===t[0]){if("]"!==t[t.length-1])throw new k("Invalid IPv6 address");return{a0:2,C7:rP(t.slice(1,-1))}}if(!i)return function(t){if(uP.test(t))throw new k("Invalid code point in opaque host");var i=eP(t,Xz);return""===i?oP:{a0:3,nk:i}}(t);var e=function(t){var i=function(t){return Qz(t.toLowerCase())}(t);return i}(nP(t));if(aP.test(e))throw new k("Invalid code point in host");var s=function(t){var i=t.split(".");if(""===i[i.length-1]&&i.pop(),!(i.length>4)){for(var e=[],s=0;s<i.length;s++){var n=i[s];if(""===n)return;var r=hP(n);if(void 0===r)return;e.push(r)}for(var h=0;h<e.length-1;h++)if(e[h]>255)throw new k;if(e[e.length-1]>=x.pow(256,5-e.length))throw new k;for(var o=e.pop(),a=0;a<e.length;a++)o+=e[a]*x.pow(256,3-a);return o}}(e);return void 0!==s?{a0:1,C7:s}:""===e?oP:{a0:0,x7:e}}function lP(t){switch(t.a0){case 0:return t.x7;case 1:return function(t){for(var i=[],e=t,s=1;s<=4;s++)i.push(""+(255&e)),4!==s&&i.push("."),e>>>=8;return i.reverse().join("")}(t.C7);case 2:return"["+function(t){for(var i="",e=function(t){for(var i=0,e=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>e&&(i=s,e=n),n=0);return n>e&&(i=s,e=n),e>1?i:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}e!==n?(i+=t[n].toString(16),7!==n&&(i+=":")):(i+=0===n?"::":":",s=!0)}return i}(t.C7)+"]";case 3:return t.nk;case 4:return""}}var dP=/\+/g;function fP(t){return 42===t||45===t||46===t||95===t||mz(t)}function _P(t){for(var i=t.split("&"),e=[],s=0;s<i.length;s++){var n=i[s];if(""!==n){var r=n.indexOf("="),h=void 0,o=void 0;-1!==r?(h=n.slice(0,r),o=n.slice(r+1)):(h=n,o=""),h=h.replace(dP," "),o=o.replace(dP," ");var a=nP(h),u=nP(o);e.push([a,u])}}return e}function gP(t){for(var i="",e=0;e<t.length;e++){var s=t[e];e>0&&(i+="&"),i+=wP(Vz(jz(s[0])))+"="+wP(Vz(jz(s[1])))}return i}function wP(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];32===s?i.push(43):fP(s)?i.push(s):i.push.apply(i,qz(s))}return Sz(i)}var AP=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function uc(t){var i=""+t,e=AP.exec(i);return e?function(t,i){for(var e=t.length,s=[],n=i;n<e;n++){var r=t.charCodeAt(n);if(mP(r))if(pP(r)||n===e-1)s.push(vP);else{var h=t.charCodeAt(n+1);pP(h)?(s.push(r,h),n++):s.push(vP)}else s.push(r)}return t.slice(0,i)+Sz(s)}(i,e.index):i}var vP=65533,mP=function(t){return 55296==(63488&t)},pP=function(t){return 0!=(1024&t)};function yP(t,i){var e=t[0],s=i[0];return e===s?0:e<s?-1:1}function MP(t){t.O7.length=0}function TP(t,i){!function(t,i){for(var e=0;e<i.length;e++)t[e]=i[e];t.length=i.length}(t.O7,_P(i))}function NP(t){if(t.zu){var i=gP(t.O7);""===i&&(i=null),t.zu.zu.j7=i}}var DP=function(){function t(t){if(void 0===t&&(t=void 0),this.zu=null,null==t)this.O7=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof DP&&!!dz(t.O7)&&(!fz||t[Symbol.iterator]===IP)}(t))this.O7=t.O7.slice();else if(function(t){return null!=t&&(!!dz(t)||!!fz&&"function"==typeof t[Symbol.iterator])}(t)){this.O7=[];for(var i=0,e=_z(t);i<e.length;i++){var s=_z(e[i]);if(2!==s.length)throw new k("Invalid name-value pair");this.O7.push([uc(s[0]),uc(s[1])])}}else for(var n in this.O7=[],t)_.prototype.hasOwnProperty.call(t,n)&&this.O7.push([uc(n),uc(t[n])]);else(t=uc(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.O7=_P(t)}var i=t.prototype;return i.append=function(t,i){t=uc(t),i=uc(i),this.O7.push([t,i]),NP(this)},i.delete=function(t){t=uc(t);for(var i=this.O7,e=0;e<i.length;){i[e][0]===t?i.splice(e,1):e++}NP(this)},i.get=function(t){t=uc(t);for(var i=this.O7,e=0;e<i.length;e++){var s=i[e];if(s[0]===t)return s[1]}return null},i.getAll=function(t){t=uc(t);for(var i=this.O7,e=[],s=0;s<i.length;s++){var n=i[s];n[0]===t&&e.push(n[1])}return e},i.has=function(t){t=uc(t);for(var i=this.O7,e=0;e<i.length;e++){if(i[e][0]===t)return!0}return!1},i.set=function(t,i){t=uc(t),i=uc(i);for(var e=this.O7,s=!1,n=0;n<e.length;){var r=e[n];r[0]===t?s?e.splice(n,1):(r[1]=i,s=!0,n++):n++}s||e.push([t,i]),NP(this)},i.sort=function(){ez(this.O7,yP),NP(this)},i.toString=function(){return gP(this.O7)},i.entries=function(){return new LP(this.O7,SP)},i.keys=function(){return new LP(this.O7,EP)},i.values=function(){return new LP(this.O7,bP)},i.forEach=function(t){var i=this;this.O7.forEach((function(e){return t(e[1],e[0],i)}))},t}(),IP=DP.prototype.entries;fz&&(DP.prototype[Symbol.iterator]=IP);var SP=function(t){return[t[0],t[1]]},EP=function(t){return t[0]},bP=function(t){return t[1]},LP=function(){function t(t,i){this.z7=0,this.O7=t,this.P7=i}return t.prototype.next=function(){return this.z7<this.O7.length?{done:!1,value:this.P7(this.O7[this.z7++])}:{done:!0,value:void 0}},t}(),kP="null";var En=_.create(null);En.ftp=21,En.file=0,En.gopher=70,En.http=80,En.https=443,En.ws=80,En.wss=443;var CP=/^(?:\.|%2e)$/i,xP=/^(?:\.|%2e){2}$/i;function OP(t){return CP.test(t)}function jP(t){return xP.test(t)}function zP(t){return void 0!==En[t]}function fl(t){return zP(t.B7)}function PP(t){return""!==t.R7||""!==t.U7}function BP(t){var i=t.length;if(!(i>=2))return!1;if(!UP(t.slice(0,2)))return!1;if(2!==i){var e=t[2];if(47!==e&&92!==e&&63!==e&&35!==e)return!1}return!0}function RP(t){return 2===t.length&&nz.test(t[0])&&(":"===t[1]||"|"===t[1])}function UP(t){return 2===t.length&&RP(Sz(t))}function QP(t){return RP(t)&&":"===t[1]}function FP(t){var i=t.Q7;0!==i.length&&("file"===t.B7&&1===i.length&&QP(i[0])||i.pop())}function YP(t){return null===t.F7||oP===t.F7||t.Y7||"file"===t.B7}var A=-1,GP=/\t|\n|\r/g,VP=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function WP(t,i,e,s){void 0===e&&(e=null),void 0===s&&(s=null),e||(e=new qP,t=t.replace(VP,""));var n=null!==s?s:0;i=i||null;for(var r=[],h=!1,o=!1,a=!1,u=jz(t=t.replace(GP,"")),c=u.length,l=0;l<=c;){var d=l<c?u[l]:A;switch(n){case 0:if(!Az(d)){if(null===s){r.length=0,n=2;continue}throw new k("Invalid scheme")}r.push(yz(d)),n=1;break;case 1:if(mz(d)||43===d||45===d||46===d)r.push(yz(d));else{if(58!==d){if(null===s){r.length=0,n=2,l=0;continue}throw new k("Invalid scheme")}var f=Ut(r);if(null!==s){if(zP(e.B7)&&!zP(f))return;if(!zP(e.B7)&&zP(f))return;if((PP(e)||null!==e.t8)&&"file"===f)return;if("file"===e.B7&&(e.F7===oP||null===e.F7))return}if(e.B7=f,null!==s)return void(fl(e)&&e.t8===En[e.B7]&&(e.t8=null));r.length=0,"file"===e.B7?n=13:fl(e)&&i&&i.B7===e.B7?n=3:fl(e)?n=7:47===u[l+1]?(n=4,l+=1):(e.Y7=!0,e.Q7.push(""),n=18)}break;case 2:if(!i||i.Y7&&35!==d)throw new k("Invalid scheme");i.Y7&&35===d?(e.B7=i.B7,e.Q7=i.Q7.slice(),e.j7=i.j7,e.G7="",e.Y7=!0,n=20):"file"!==i.B7?(n=5,l-=1):(n=13,l-=1);break;case 3:47===d&&47===u[l+1]?n=8:(n=5,l-=1);break;case 4:47===d?n=9:(n=17,l-=1);break;case 5:e.B7=i.B7,A===d?(e.R7=i.R7,e.U7=i.U7,e.F7=i.F7,e.t8=i.t8,e.Q7=i.Q7.slice(),e.j7=i.j7):47===d?n=6:63===d?(e.R7=i.R7,e.U7=i.U7,e.F7=i.F7,e.t8=i.t8,e.Q7=i.Q7.slice(),e.j7="",n=19):35===d?(e.R7=i.R7,e.U7=i.U7,e.F7=i.F7,e.t8=i.t8,e.Q7=i.Q7.slice(),e.j7=i.j7,e.G7="",n=20):92===d&&fl(e)?n=6:(e.R7=i.R7,e.U7=i.U7,e.F7=i.F7,e.t8=i.t8,e.Q7=i.Q7.slice(),e.Q7.pop(),n=17,l-=1);break;case 6:!fl(e)||47!==d&&92!==d?47===d?n=9:(e.R7=i.R7,e.U7=i.U7,e.F7=i.F7,e.t8=i.t8,n=17,l-=1):n=8;break;case 7:if(47!==d||47!==u[l+1]){n=8;continue}n=8,l+=1;break;case 8:47!==d&&92!==d&&(n=9,l-=1);break;case 9:if(64===d){h&&r.unshift(37,52,48),h=!0;for(var _=0;_<r.length;_++){var g=r[_];if(58!==g||a){var w=Ut(iP(g,Jz));a?e.U7+=w:e.R7+=w}else a=!0}r.length=0}else if(A===d||47===d||63===d||35===d||fl(e)&&92===d){if(h&&0===r.length)throw new k("Invalid host");l-=r.length+1,r.length=0,n=10}else r.push(d);break;case 10:case 11:if(null!==s&&"file"===e.B7)l-=1,n=15;else if(58!==d||o)if(A===d||47===d||63===d||35===d||fl(e)&&92===d){if(l-=1,fl(e)&&0===r.length)throw new k("Invalid host");if(null!==s&&0===r.length&&(PP(e)||null!==e.t8))return;var v=cP(Ut(r),fl(e));if(e.F7=v,r.length=0,n=16,null!==s)return}else 91===d?o=!0:93===d&&(o=!1),r.push(d);else{if(0===r.length)throw new k("Invalid host");var m=cP(Ut(r),fl(e));if(e.F7=m,r.length=0,n=12,11===s)return}break;case 12:if(vz(d))r.push(d);else{if(!(A===d||47===d||63===d||35===d||fl(e)&&92===d||null!==s))throw new k("Invalid port");if(0!==r.length){var p=C(Ut(r),10);if(p>65535)throw new k("Invalid port");e.t8=p===En[e.B7]?null:p,r.length=0}if(null!==s)return;n=16,l-=1}break;case 13:e.B7="file",47===d||92===d?n=14:i&&"file"===i.B7?A===d?(e.F7=i.F7,e.Q7=i.Q7.slice(),e.j7=i.j7):63===d?(e.F7=i.F7,e.Q7=i.Q7.slice(),e.j7="",n=19):35===d?(e.F7=i.F7,e.Q7=i.Q7.slice(),e.j7=i.j7,e.G7="",n=20):(BP(u.slice(l))||(e.F7=i.F7,e.Q7=i.Q7.slice(),FP(e)),n=17,l-=1):(n=17,l-=1);break;case 14:47===d||92===d?n=15:(i&&"file"===i.B7&&!BP(u.slice(l))&&(QP(i.Q7[0])?e.Q7.push(i.Q7[0]):e.F7=i.F7),n=17,l-=1);break;case 15:if(A===d||47===d||92===d||63===d||35===d)if(l-=1,null===s&&UP(r))n=17;else if(0===r.length){if(e.F7=oP,null!==s)return;n=16}else{var y=cP(Ut(r),fl(e));if(0===y.a0&&"localhost"===y.x7&&(y=oP),e.F7=y,null!==s)return;r.length=0,n=16}else r.push(d);break;case 16:fl(e)?(n=17,47!==d&&92!==d&&(l-=1)):null===s&&63===d?(e.j7="",n=19):null===s&&35===d?(e.G7="",n=20):A!==d&&(n=17,47!==d&&(l-=1));break;case 17:if(A===d||47===d||fl(e)&&92===d||null===s&&(63===d||35===d)){var M=Ut(r);if(jP(M)?(FP(e),47===d||fl(e)&&92===d||e.Q7.push("")):!OP(M)||47===d||fl(e)&&92===d?OP(M)||("file"===e.B7&&0===e.Q7.length&&UP(r)&&(oP!==e.F7&&null!==e.F7&&(e.F7=oP),r[1]=58,M=Ut(r)),e.Q7.push(M)):e.Q7.push(""),r.length=0,"file"===e.B7&&(A===d||63===d||35===d))for(;e.Q7.length>1&&""===e.Q7[0];)e.Q7.shift();63===d?(e.j7="",n=19):35===d&&(e.G7="",n=20)}else r.push.apply(r,iP(d,Kz));break;case 18:63===d?(e.j7="",n=19):35===d?(e.G7="",n=20):A!==d&&(e.Q7[0]+=Ut(iP(d,Xz)));break;case 19:null===s&&35===d?(e.G7="",n=20):A!==d&&(e.j7+=Ut(iP(d,fl(e)?tP:$z)));break;case 20:A===d||0===d||(e.G7+=Ut(iP(d,Zz)))}l++}return e}function HP(t,i,e,s){try{WP(t,i,e,s)}catch(t){}}var qP=function(){this.B7="",this.R7="",this.U7="",this.F7=null,this.t8=null,this.Q7=[],this.j7=null,this.G7=null,this.Y7=!1};function XP(t){switch(t.B7){case"blob":var i;try{i=WP(t.Q7[0],null)}catch(t){return kP}return XP(i);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,i,e){return t+"://"+lP(i)+(null===e?"":":"+e)}(t.B7,t.F7,t.t8);default:return kP}}var ZP=function(){function t(t,i){var e,s=null;if(null!=i)if(function(t){return null!=t&&t instanceof ZP&&"object"==typeof t.zu}(i))s=i.zu;else try{s=WP(String(i),null)}catch(t){throw new k("Invalid base URL: "+t.message)}try{e=WP(String(t),s)}catch(t){throw new k("Invalid URL: "+t.message)}var n=e.j7;this.zu=e,this.j7=function(t){var i=new DP;return null!==t&&TP(i,t),i}(n),this.j7.zu=this}var i=t.prototype;return i.toString=function(){return this.href},i.toJSON=function(){return this.href},function(t,i,e){i&&iz(t.prototype,i),e&&iz(t,e)}(t,[{key:"href",get:function(){return function(t,i){void 0===i&&(i=!1);var e=t.B7+":";if(null!==t.F7?(e+="//",PP(t)&&(e+=t.R7,""!==t.U7&&(e+=":"+t.U7),e+="@"),e+=lP(t.F7),null!==t.t8&&(e+=":"+t.t8)):null===t.F7&&"file"===t.B7&&(e+="//"),t.Y7)e+=t.Q7[0];else for(var s=0,n=t.Q7;s<n.length;s++)e+="/"+n[s];return null!==t.j7&&(e+="?"+t.j7),i||null===t.G7||(e+="#"+t.G7),e}(this.zu)},set:function(t){var i;try{i=WP(String(t),null)}catch(t){throw new k("Invalid URL: "+t.message)}this.zu=i,MP(this.j7);var e=this.zu.j7;null!==e&&TP(this.j7,e)}},{key:"origin",get:function(){return XP(this.zu)}},{key:"protocol",get:function(){return this.zu.B7+":"},set:function(t){HP(t+":",null,this.zu,0)}},{key:"username",get:function(){return this.zu.R7},set:function(t){YP(this.zu)||(this.zu.R7=eP(t,Jz))}},{key:"password",get:function(){return this.zu.U7},set:function(t){YP(this.zu)||(this.zu.U7=eP(t,Jz))}},{key:"host",get:function(){var t=this.zu,i=t.F7;if(null===i)return"";var e=t.t8,s=lP(i);return null!==e&&(s+=":"+e),s},set:function(t){this.zu.Y7||HP(t,null,this.zu,10)}},{key:"hostname",get:function(){var t=this.zu.F7;return null===t?"":lP(t)},set:function(t){this.zu.Y7||HP(t,null,this.zu,11)}},{key:"port",get:function(){var t=this.zu.t8;return null===t?"":""+t},set:function(t){YP(this.zu)||(""===t?this.zu.t8=null:HP(t,null,this.zu,12))}},{key:"pathname",get:function(){var t=this.zu.Q7;return this.zu.Y7?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.zu.Y7||(this.zu.Q7.length=0,HP(t,null,this.zu,16))}},{key:"search",get:function(){var t=this.zu.j7;return null===t||""===t?"":"?"+t},set:function(t){t=uc(t);var i=this.zu;if(""===t)return i.j7=null,void MP(this.j7);"?"===t[0]&&(t=t.slice(1)),i.j7="",HP(t,null,i,19),TP(this.j7,t)}},{key:"searchParams",get:function(){return this.j7}},{key:"hash",get:function(){var t=this.zu.G7;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.zu.G7="",HP(t,null,this.zu,20)):this.zu.G7=null}}]),t}();function KP(t){return t.document&&t.document.baseURI||t.location.href||""}function JP(){let t=Ys,i=t.location.href;for(;t!==s.top;){t=t.parent;try{i=t.location.href}catch(t){}}return i}r(),r(),r(),r(),r();var $P=!!("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||!(!nd||!nd.msMaxTouchPoints),tB=dN(),iB=!(!tB||!tB.webkitShowPlaybackTargetPicker),eB=class{get V7(){return void 0===this.W7&&(this.W7=this.H7()),this.W7}H7(){return 0}get q7(){return!_n._b}get X7(){if(s.screen)return{width:s.screen.width,height:s.screen.height}}get S4(){return s.devicePixelRatio||1}get Z7(){return iB}get u4(){return!1}get e4(){return!0}get oA(){return _n.KE||_n.Va}get K7(){return!_n.Va}get yj(){return!0}get uA(){return!0}get aA(){return!1}get J7(){}get ttt(){return!0}get cJ(){return!1}get itt(){return!1}get ett(){return _n.PE}stt(t,i){return!0}ntt(t){return t>=2*Dc}constructor(){this.W7=void 0,this.htt=!1,this.Je=$P,this.Qs=!1,this.G8=!0}};r();var sB=function(){const t=lN();if(!t)return!1;const i=t.muted;return t.muted=!i,t.muted!==i}(),nB=function(){if(_n.aE)return!1;const t=lN();if(!t)return!1;const i=t.volume;return t.volume=i/2+.1,i!==t.volume}();var U=class extends eB{H7(){return this.ott?this.ott.V7:super.H7()}get J7(){var t;return null==(t=this.ott)?void 0:t.J7}get ttt(){var t,i;return null==(i=null==(t=this.ott)?void 0:t.ttt)||i}stt(t,i){return this.ott?this.ott.stt(t,i):super.stt(t,i)}ntt(t){return this.ott?this.ott.ntt(t):super.ntt(t)}constructor(t){super(),this.ott=t,this.ott&&(this.htt=this.ott.htt,this.Je=this.ott.Je,this.G8=sB&&this.ott.G8)}},rB=class extends U{get aA(){return _n.Va}constructor(t){super(t),this.htt=!0,this.Qs=!0}},hB=class extends rB{get aA(){return!0}H7(){return Lk(!0)?super.H7():1}};r();var oB=class extends U{get u4(){return _n.xE<3}get e4(){return _n.xE>=3}get X7(){return s.tizen&&!this.att&&s.tizen.systeminfo.getPropertyValue("DISPLAY",(t=>{const i=t.resolutionWidth,e=t.resolutionHeight;1===i&&1===e||(this.att={width:i,height:e})})),this.att}get cJ(){return _n.xE<3}get itt(){return!0}stt(t,i){return super.stt(t,i)}};r();var L=class extends eB{constructor(){super()}};r();var aB=class extends L{get J7(){if(_n.WS)return 4096}stt(t,i){if(t&&t.utt&&i&&i.utt){let e=q(t.utt,"mp4a.40.2")&&q(i.utt,"mp4a.40.5"),s=q(t.utt,"mp4a.40.5")&&q(i.utt,"mp4a.40.2"),n=q(t.utt,"mp4a.40.2")&&q(i.utt,"mp4a.40.34"),r=q(t.utt,"mp4a.40.34")&&q(i.utt,"mp4a.40.2"),h=q(t.utt,"mp4a.40.5")&&q(i.utt,"mp4a.40.34"),o=q(t.utt,"mp4a.40.34")&&q(i.utt,"mp4a.40.5");return!(e||s||n||r||h||o)}return!0}};function q(t,i){return t.indexOf(i)>-1}r();var uB=class extends L{ntt(t){return t>=2}};r();var cB=class extends L{constructor(){super(),this.htt=_n.$E>=11,this.G8=_n.KE&&!(_n.Va&&_n.$E<10)}};r();var lB=class extends U{get X7(){return s.webOS&&!this.att&&s.webOS.deviceInfo((t=>{this.att={width:t.screenWidth,height:t.screenHeight}})),this.att}get yj(){return!1}get itt(){return!0}};r();var dB=class extends L{get ttt(){return!_n.qS||(_n.SE?92!==_n.bE:_n.NE>=100)}};r();var fB=class extends U{get aA(){return!0}},_B=class{ctt(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];JS(...i)}Vv(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];ji(...i)}ltt(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Nu(...i)}dtt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];$S(t,...e)}a_(t,i){return u(t,i)}HJ(t,i){return v(t,i)}o_(t){c(t)}XJ(t){m(t)}JC(){return this.ftt.JC()}VC(){return this.ftt.VC()}HC(){return this.ftt.HC()}WC(){return this.ftt.WC()}YC(){return this.ftt.YC()}XC(t,i){return this.ftt.XC(t,i)}GC(t){return this.ftt.GC(t)}get _j(){return this._tt}Ah(t,i){let e;return void 0===i&&(i=KP(Ys)),e="object"!=typeof i||i instanceof ZP?i:i.href,new ZP(t,e)}Sv(t,i){if(void 0===i&&(i=KP(Ys)),this.gtt){const e=ae(i)?i:i.toString();return new self.URL(t,e).href}return this.Ah(t,i).href}get Ys(){return this.wtt}get lA(){return{cA:nd&&nd.userAgent.match(/Android /i)?"Android":"other",dA:Boolean(nd&&nd.userAgent.match(/Android 8.0.0/i))}}get XG(){return self&&self.location&&"https:"===self.location.protocol}get Att(){return"languages"in nd?nd.languages.slice():[nd.language]}constructor(){this._tt=new gB,this.wtt=function(){const t=function(){if(_n.HE)return new aB;if(_n.RE||_n.QE)return new uB;if(_n.KE)return new cB;if(_n.ME)return new dB;return new L}();return _n.Va?new hB(t):_n.Qs?new rB(t):_n.kE?new oB(t):_n.jE?new lB(t):_n.WS?new fB(t):new U(t)}(),this.gtt=function(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}(),self.performance&&self.performance.now?this.h_=()=>self.performance.now():this.h_=Yo}},gB=class{get gj(){return nd.oscpu}get Ys(){return nd.platform}get wj(){return nd.vendor}get Aj(){return nd.vendorSub}};r(),r();var wB=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(i,e)=>new t(i,e)}(t)}catch(t){}const i=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(i)return function(t){return(i,e)=>{const s=new t;if(i)for(const t of i)s.append(t);return s.getBlob(e&&e.type||"")}}(i)})();function AB(t,i,e){const s=wB([i],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,i){let e=t;const s=e.indexOf("?");if(s>=0&&(e=e.substr(0,s)),e=e.substr(e.lastIndexOf("/")+1),i){let t=e.indexOf(".");t<0&&(t=e.length),e=e.substr(0,t)+i+e.substr(t)}return e}(t,e),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}r(),r(),r();var vB=class extends M{get name(){return fs.OI}constructor(t,i){super(t,function(t){return"Error while opening "+t+". Invalid URL."}(t.Fu),i)}};r();var mB=function(t,i){return(mB=_.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)};function pB(t,i){function e(){this.constructor=t}mB(t,i),t.prototype=null===i?_.create(i):(e.prototype=i.prototype,new e)}var ke="object"==typeof s?s:"object"==typeof self?self:"object"==typeof global?global:null;var yB=function(){var t=ke.Blob;if(t)try{return new t,function(t,i){return new ke.Blob(t,i)}}catch(t){}var i=ke.BlobBuilder||ke.WebKitBlobBuilder||ke.MozBlobBuilder||ke.MSBlobBuilder;return i?function(t){return function(i,e){var s=new t;if(i)for(var n=0,r=i;n<r.length;n++){var h=r[n];s.append(h)}return s.getBlob(e&&e.type||"")}}(i):null}(),Sr="function"==typeof f?f:void 0;function MB(t){return t&&"function"==typeof t.getReader}function TB(t){if("function"!=typeof t)return!1;try{var i=!1,e=new t({start:function(){i=!0}});return!!i&&MB(e)}catch(t){return!1}}var NB=function(){function t(t,i){this.Md=t,this.mtt=i}return t.prototype.pull=function(t){var i=this;return this.Md.read().then((function(e){i.mtt&&i.mtt(e),e.done?t.close():t.enqueue(e.value)}))},t.prototype.cancel=function(t){return this.Md.cancel(t)},t}();function DB(t,i){return i.constructor===t?i:new t(new NB(i.getReader()),{highWaterMark:0})}var IB=function(){function t(t,i){this.ptt=t,this.ytt=i}return t.prototype.pull=function(t){return this.ptt().then((function(i){t.enqueue(new T(i)),t.close()}))},t.prototype.cancel=function(t){this.ytt&&this.ytt(t)},t}();function SB(t,i,e){return new t(new IB(i,e),{highWaterMark:0})}var tt={searchParams:"URLSearchParams"in ke,iterable:"Symbol"in ke&&"iterator"in Symbol,blob:"FileReader"in ke&&!!yB,formData:"FormData"in ke,arrayBuffer:"ArrayBuffer"in ke,stream:TB(Sr),streamRequest:"Request"in ke&&"body"in ke.Request.prototype,streamResponse:"Response"in ke&&"body"in ke.Response.prototype,abort:"AbortController"in ke&&"Request"in ke&&"signal"in ke.Request.prototype,encoding:"TextEncoder"in ke&&"TextDecoder"in ke,url:"URL"in ke&&function(t){try{return new ke.URL(t).toString()===t}catch(t){return!1}}("http://example.com/"),firefox:"navigator"in ke&&/Firefox\//.test(ke.navigator.userAgent)};function EB(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new k("Invalid character in header field name");return t}function bB(t){return"string"!=typeof t&&(t=String(t)),t}function LB(t){var i={next:function(){var i=t.shift();return{done:void 0===i,value:i}}};return tt.iterable&&(i[Symbol.iterator]=function(){return i}),i}var kB=function(){function t(t){var i=this;this.Gf={};var e=function(t,e){Array.isArray(t)&&2===t.length?i.append(t[0],t[1]):i.append(e,t)};!function(t){return t&&"function"==typeof t.forEach}(t)?!function(t){return tt.iterable&&t&&t[Symbol.iterator]}(t)?t&&_.getOwnPropertyNames(t).forEach((function(e){i.append(e,t[e])})):Array.from(t).forEach(e):t.forEach(e)}return t.prototype.append=function(t,i){t=EB(t),i=bB(i);var e=t.toLowerCase();if(this.Gf.hasOwnProperty(e)){var s=this.Gf[e],n=s[1];s[1]=n?n+", "+i:i}else this.Gf[e]=[t,i]},t.prototype.delete=function(t){var i=EB(t).toLowerCase();delete this.Gf[i]},t.prototype.get=function(t){var i=EB(t).toLowerCase();return this.Gf.hasOwnProperty(i)?this.Gf[i][1]:null},t.prototype.has=function(t){var i=EB(t).toLowerCase();return this.Gf.hasOwnProperty(i)},t.prototype.set=function(t,i){var e=(t=EB(t)).toLowerCase();this.Gf[e]=[t,bB(i)]},t.prototype.forEach=function(t,i){for(var e in this.Gf)this.Gf.hasOwnProperty(e)&&t.call(i,this.Gf[e][1],e,this)},t.prototype.keys=function(){var t=[];return this.forEach((function(i,e){t.push(e)})),LB(t)},t.prototype.values=function(){var t=[];return this.forEach((function(i){t.push(i)})),LB(t)},t.prototype.entries=function(){var t=[];return this.forEach((function(i,e){t.push([e,i])})),LB(t)},t.prototype.asList=function(){var t=[];for(var i in this.Gf)if(this.Gf.hasOwnProperty(i)){var e=this.Gf[i],s=e[0],n=e[1];t.push([s,n])}return t},t}();function CB(){}tt.iterable&&(kB.prototype[Symbol.iterator]=kB.prototype.entries);var xB,OB,Fn,jB=x.min,zB=String.fromCharCode,PB=16384;function BB(t){for(var i=[],e=0,s=t;e<s.length;e++){var n=s[e];n>65535&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n)}return function(t){for(var i=t.length,e=[],s=0;s<i;s+=PB){var n=jB(s+PB,i);e.push(zB.apply(null,t.slice(s,n)))}return e.join("")}(i)}function RB(t){if(t>=55296&&t<=57343)throw new b("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function UB(t,i){return t>>i&63|128}function QB(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(RB(t),i.push(t>>12&15|224),i.push(UB(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(UB(t,12)),i.push(UB(t,6))),i.push(63&t|128)):i.push(t)}function FB(){if(Fn>=OB)throw new b("Invalid byte index");var t=255&xB[Fn];if(Fn++,128==(192&t))return 63&t;throw new b("Invalid continuation byte")}function YB(){var t,i;if(Fn>OB)throw new b("Invalid byte index");if(Fn===OB)return!1;if(t=255&xB[Fn],Fn++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|FB())>=128)return i;throw new b("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|FB()<<6|FB())>=2048)return RB(i),i;throw new b("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|FB()<<12|FB()<<6|FB())>=65536&&i<=1114111)return i;throw new b("Invalid UTF-8 detected")}var GB=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];function VB(t){return t&&URLSearchParams.prototype.isPrototypeOf(t)}function WB(t){return t&&ArrayBuffer.prototype.isPrototypeOf(t)}function HB(t){return t&&DataView.prototype.isPrototypeOf(t)}var ko,qB=ArrayBuffer.isView||function(t){return t&&(GB.indexOf(_.prototype.toString.call(t))>-1||HB(t))};function XB(t){if(t.bodyUsed)return Promise.reject(new k("Already used"));t.bodyUsed=!0}function ZB(t){return new Promise((function(i,e){t.onload=function(){i(t.result)},t.onerror=function(){e(t.error)}}))}function KB(t){return tt.encoding?new ke.TextDecoder("utf-8").decode(new T(t)):BB(function(t){OB=(xB=t).length,Fn=0;for(var i,e=[];!1!==(i=YB());)e.push(i);return e}(new T(t)))}function JB(t){return tt.encoding?(new ke.TextEncoder).encode(t).buffer:new T(function(t){for(var i=[],e=0,s=t;e<s.length;e++)QB(s[e],i);return i}(function(t){for(var i=[],e=0,s=t.length;e<s;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){var r=t.charCodeAt(e++);56320==(64512&r)?i.push(((1023&n)<<10)+(1023&r)+65536):(i.push(n),e--)}else i.push(n)}return i}(t))).buffer}function $B(t){var i=t.getReader(),e=[],s=function(t){var n=t.done,r=t.value;return n?Promise.resolve(e):(e.push(r),i.read().then(s))};return i.read().then(s)}function tR(t){return $B(t).then((function(t){return function(t){for(var i=0,e=0,s=t;e<s.length;e++)i+=(a=s[e]).byteLength;for(var n=new T(i),r=0,h=0,o=t;h<o.length;h++){var a=o[h];n.set(a,r),r+=a.byteLength}return n}(t).buffer}))}function iR(t){return t.slice?t.slice(0):eR(new T(t))}function eR(t){if(t.slice)return t.slice(0).buffer;var i=new T(t.byteLength);return i.set(new T(t.buffer,t.byteOffset,t.byteLength)),i.buffer}function sR(t){var i=new FormData;return t.trim().split("&").forEach((function(t){if(t){var e=t.split("="),s=e.shift().replace(/\+/g," "),n=e.join("=").replace(/\+/g," ");i.append(decodeURIComponent(s),decodeURIComponent(n))}})),i}function nR(t){var i=t;if(i.bodyUsed)throw new k("Already used");if(i.Mtt===ko.Ttt){if(!i.Ntt.tee)throw new b("could not clone ReadableStream body");var e=i.Ntt.tee(),s=e[0],n=e[1];return i.body=s,i.Ntt=s,i.Dtt=s,n}return i.Mtt===ko.$I?iR(i.Ntt):i.Mtt===ko.IG?i.Ntt.then(nR):i.Dtt}!function(t){t[t.Eu=0]="Eu",t[t.Itt=1]="Itt",t[t.Stt=2]="Stt",t[t.$I=3]="$I",t[t.Ttt=4]="Ttt",t[t.IG=5]="IG"}(ko||(ko={}));var rR=function(){function t(i,e){this.bodyUsed=!1;var s=this;if(this.Dtt=i||null,i)if("string"==typeof i)this.Mtt=ko.Eu,this.Ntt=i;else if(function(t){return t&&"function"==typeof t.then}(i))this.Mtt=ko.IG,this.Ntt=Promise.resolve(i).then((function(i){return new t(i,e)})),this.Ntt.catch(CB);else if(tt.blob&&function(t){return t&&Blob.prototype.isPrototypeOf(t)}(i))this.Mtt=ko.Itt,this.Ntt=i;else if(tt.formData&&function(t){return t&&FormData.prototype.isPrototypeOf(t)}(i))this.Mtt=ko.Stt,this.Ntt=i;else if(tt.searchParams&&VB(i))this.Mtt=ko.Eu,this.Ntt=i.toString();else if(tt.arrayBuffer&&(WB(i)||qB(i)))HB(i)&&(this.Dtt=function(t){return new T(t.buffer,t.byteOffset,t.byteLength)}(i)),this.Mtt=ko.$I,this.Ntt=function(t){return WB(t)?iR(t):eR(t)}(i);else{if(!tt.stream||!MB(i))throw new b("unsupported BodyInit type");i=DB(Sr,i),this.Mtt=ko.Ttt,this.Ntt=i,this.Dtt=i}else this.Mtt=ko.Eu,this.Ntt="";this.Ett="",e.has("content-type")?this.Ett=(e.get("content-type")||"").toLowerCase():("string"==typeof i?this.Ett="text/plain;charset=UTF-8":s.Mtt===ko.Itt&&s.Ntt.type?this.Ett=s.Ntt.type:tt.searchParams&&VB(i)&&(this.Ett="application/x-www-form-urlencoded;charset=UTF-8"),this.Ett&&e.set("content-type",this.Ett)),tt.stream&&(null==i?this.body=null:s.Mtt===ko.Ttt?this.body=s.Ntt:this.body=SB(Sr,(function(){return s.arrayBuffer()}),(function(){s.bodyUsed=!0})))}return t.prototype.text=function(){var t=this,i=XB(t);return i||(t.Mtt===ko.Itt?function(t){var i=new FileReader,e=ZB(i);return i.readAsText(t),e}(t.Ntt):t.Mtt===ko.$I?Promise.resolve(t.Ntt).then(KB):t.Mtt===ko.Ttt?function(t){return tR(t).then(KB)}(t.Ntt):t.Mtt===ko.IG?t.Ntt.then((function(t){return t.text()})):t.Mtt===ko.Stt?Promise.reject(new b("could not read FormData body as text")):Promise.resolve(t.Ntt))},t.prototype.json=function(){return this.text().then(JSON.parse)},t}();tt.blob&&(rR.prototype.blob=function(){var t=this,i=XB(t);return i||(t.Mtt===ko.Itt?Promise.resolve(t.Ntt):t.Mtt===ko.$I?Promise.resolve(yB([t.Ntt],{type:t.Ett})):t.Mtt===ko.Ttt?function(t,i){return $B(t).then((function(t){return yB(t,{type:i||""})}))}(t.Ntt,t.Ett):t.Mtt===ko.IG?t.Ntt.then((function(t){return t.blob()})):t.Mtt===ko.Stt?Promise.reject(new b("could not read FormData body as Blob")):Promise.resolve(yB([t.Ntt],{type:t.Ett})))}),tt.arrayBuffer&&(rR.prototype.arrayBuffer=function(){var t=this;return t.Mtt===ko.$I?XB(t)||Promise.resolve(t.Ntt):t.Mtt===ko.Itt?XB(t)||function(t){var i=new FileReader,e=ZB(i);return i.readAsArrayBuffer(t),e}(t.Ntt):t.Mtt===ko.Ttt?tR(t.Ntt):t.Mtt===ko.IG?XB(t)||t.Ntt.then((function(t){return t.arrayBuffer()})):t.Mtt===ko.Stt?Promise.reject(new b("could not read FormData body as ArrayBuffer")):Promise.resolve(t.Ntt).then(JB)}),tt.formData&&(rR.prototype.formData=function(){var t=this;return t.Mtt===ko.Stt?XB(t)||Promise.resolve(t.Ntt):t.text().then(sR)});var hR=[301,302,303,307,308],oR=function(t){function i(i,e){var s=this,n=new kB((e=e||{}).headers);return(s=t.call(this,i||null,n)||this).type="default",s.status=void 0===e.status?200:e.status,s.ok=s.status>=200&&s.status<300,s.statusText=void 0!==e.statusText?String(e.statusText):"",s.headers=n,s.url=e.url||"",s}return pB(i,t),i.prototype.clone=function(){return new i(nR(this),{status:this.status,statusText:this.statusText,headers:new kB(this.headers),url:this.url})},i.error=function(){var t=new i(null,{status:0,statusText:""});return t.type="error",t},i.redirect=function(t,e){if(-1===hR.indexOf(e))throw new RangeError("Invalid status code");return new i(null,{status:e,headers:{location:t}})},i}(rR);var aR=function(t,i){return t(i={exports:{}},i.exports),i.exports}((function(t,i){function e(t,i){if(!(t instanceof i))throw new k("Cannot call a class as a function")}function s(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),_.defineProperty(t,s.key,s)}}function n(t,i,e){return i&&s(t.prototype,i),e&&s(t,e),t}function r(t){return(r=_.setPrototypeOf?_.getPrototypeOf:function(t){return t.__proto__||_.getPrototypeOf(t)})(t)}function o(t,i){return(o=_.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,i,e){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,i,e){var s=function(t,i){for(;!_.prototype.hasOwnProperty.call(t,i)&&null!==(t=r(t)););return t}(t,i);if(s){var n=_.getOwnPropertyDescriptor(s,i);return n.get?n.get.call(e):n.value}},c(t,i,e||t)}_.defineProperty(i,"__esModule",{value:!0});var l=function(){function t(){e(this,t),_.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(t,[{key:"addEventListener",value:function(t,i){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(i)}},{key:"removeEventListener",value:function(t,i){if(t in this.listeners)for(var e=this.listeners[t],s=0,n=e.length;s<n;s++)if(e[s]===i)return void e.splice(s,1)}},{key:"dispatchEvent",value:function(t){var i=this;if(t.type in this.listeners){for(var e=function(e){u((function(){return e.call(i,t)}))},s=this.listeners[t.type],n=0,r=s.length;n<r;n++)e(s[n]);return!t.defaultPrevented}}}]),t}(),d=function(t){function i(){var t;return e(this,i),t=function(t,i){return!i||"object"!=typeof i&&"function"!=typeof i?a(t):i}(this,r(i).call(this)),t.listeners||l.call(a(t)),_.defineProperty(a(t),"aborted",{value:!1,writable:!0,configurable:!0}),_.defineProperty(a(t),"onabort",{value:null,writable:!0,configurable:!0}),t}return function(t,i){if("function"!=typeof i&&null!==i)throw new k("Super expression must either be null or a function");t.prototype=_.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&o(t,i)}(i,t),n(i,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(t){"abort"===t.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,t)),c(r(i.prototype),"dispatchEvent",this).call(this,t)}}]),i}(l),f=function(){function t(){e(this,t),_.defineProperty(this,"signal",{value:new d,writable:!0,configurable:!0})}return n(t,[{key:"abort",value:function(){var t;try{t=new Event("abort")}catch(i){void 0!==h?h.createEvent?(t=h.createEvent("Event")).initEvent("abort",!1,!1):(t=h.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(f.prototype[Symbol.toStringTag]="AbortController",d.prototype[Symbol.toStringTag]="AbortSignal"),i.AbortSignal=d,i.AbortController=f,i.default=f}));!function(t){t&&t.__esModule&&_.prototype.hasOwnProperty.call(t,"default")&&t.default}(aR);aR.AbortSignal;var uR=aR.AbortController,cR=ke.DOMException;try{new cR}catch(g){(cR=function(t,i){b.call(this,t),this.name=i||"Error",b.captureStackTrace&&b.captureStackTrace(this,this.constructor)}).prototype=_.create(b.prototype),cR.prototype.constructor=cR}var lR=uR;function dR(t,i){if(!t.signal.aborted)if(i.aborted)t.abort();else{var e=function(){i.removeEventListener("abort",e),t.signal.removeEventListener("abort",e),t.abort()};i.addEventListener("abort",e),t.signal.addEventListener("abort",e)}}function fR(t,i,e){return new Promise((function(s,n){if(i.signal.aborted)return t.catch(CB),n(_R());var r=function(){i.signal.removeEventListener("abort",r),n(_R())};i.signal.addEventListener("abort",r),t.then((function(t){i.signal.removeEventListener("abort",r),s(t),e&&i.abort()}),(function(t){i.signal.removeEventListener("abort",r),n(t),e&&i.abort()}))}))}function _R(){return new cR("Aborted","AbortError")}var gR,wR="moz-chunked-arraybuffer";function AR(t){try{var i=new hd;return i.open("GET","https://test"),i.responseType=t,i.responseType===t}catch(t){}return!1}!function(t){t[t.UNSENT=0]="UNSENT",t[t.OPENED=1]="OPENED",t[t.HEADERS_RECEIVED=2]="HEADERS_RECEIVED",t[t.LOADING=3]="LOADING",t[t.DONE=4]="DONE"}(gR||(gR={}));var vR=function(){function t(t,i){var e=this;this.btt=!1,this.RI=t,this.Ltt=i,this.ktt=new hd,this.Ctt=new Promise((function(t,i){e.xtt=t,e.Ott=i}))}return t.prototype.send=function(){var t=this;return this.jtt().then((function(i){return t.ztt(i,t.Ltt),t.Ctt}))},t.prototype.jtt=function(){var t=this.RI;return t.Mtt===ko.Ttt?t.arrayBuffer():Promise.resolve(t.Dtt)},t.prototype.Ptt=function(t){this.RI.onprogress&&this.RI.onprogress(t.loaded,t.lengthComputable?t.total:void 0)},t.prototype.Btt=function(t){this.Ott(t)},t.prototype.cq=function(){this.Btt(new k("Network request failed"))},t.prototype.Rtt=function(){this.Btt(new k("Network request failed"))},t.prototype.Utt=function(){this.Btt(_R())},t.prototype.ztt=function(t,i){var e=this,s=this.RI,n=this.ktt,r=function(){return e.Qtt()};if(s.signal.aborted)return this.Utt();n.onreadystatechange=function(){if(n.readyState>=gR.HEADERS_RECEIVED&&!e.btt){var t=function(t){var i=new kB;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var e=t.split(":"),s=e.shift().trim();if(s){var n=e.join(":").trim();i.append(s,n)}})),i}(n.getAllResponseHeaders()||""),i={status:n.status,statusText:n.statusText,headers:t,url:n.responseURL||t.get("X-Request-URL")};e.btt=!0,e.Ftt(i)}},n.onprogress=function(t){return e.Ptt(t)},n.onload=function(){return e.Ytt()},n.onerror=function(){return e.cq()},n.ontimeout=function(){return e.Rtt()},n.onabort=function(){return e.Utt()},n.open(s.method,s.url,!0),n.withCredentials="include"===s.credentials,"responseType"in n&&i&&(n.responseType=i),s.headers.forEach((function(t,i){n.setRequestHeader(i,t)})),s.signal.addEventListener("abort",r),n.onloadend=function(){s.signal.removeEventListener("abort",r)},t?n.send(t):n.send()},t.prototype.Qtt=function(){this.Utt(),this.ktt.abort()},t}(),mR=function(t){function i(i,e){var s=t.call(this,i,e)||this;return s.Gtt=void 0,s.Vtt=void 0,s}return pB(i,t),i.prototype.Ftt=function(t){var i=this;this.Gtt=new Promise((function(t,e){i.Vtt=t,i.Wtt=e})),this.xtt(new oR(this.Gtt,t))},i.prototype.Ytt=function(){var t=this.ktt.response;if(null==t){var i=this.Ltt;""===i||"text"===i?t=this.ktt.responseText:"document"===i?t=this.ktt.responseXML:"arraybuffer"===i?t=new ArrayBuffer(0):"blob"===i&&(t=yB([]))}this.Vtt(t)},i.prototype.Btt=function(i){t.prototype.Btt.call(this,i),this.Wtt&&this.Wtt(i)},i}(vR),pR=function(t){function i(i){var e=t.call(this,i,wR)||this;return e.Htt=void 0,e.qtt=void 0,e.Xtt=!1,e}return pB(i,t),i.prototype.Ftt=function(t){var i=this;this.Htt=new Sr({start:function(t){i.qtt=t},cancel:function(){i.Xtt=!0,i.Qtt()}}),this.xtt(new oR(this.Htt,t))},i.prototype.Ptt=function(i){this.Xtt||this.qtt.enqueue(new T(this.ktt.response)),t.prototype.Ptt.call(this,i)},i.prototype.Ytt=function(){this.qtt.close()},i.prototype.Btt=function(i){t.prototype.Btt.call(this,i),this.qtt&&!this.Xtt&&(this.Xtt=!0,this.qtt.error(i))},i}(vR),yR=function(){var t=tt.firefox&&AR(wR);return yR=function(){return t},t},MR=function(){var t;return t=tt.arrayBuffer&&AR("arraybuffer")?"arraybuffer":tt.blob&&AR("blob")?"blob":"",MR=function(){return t},t};function TR(t){return(tt.stream&&yR()?new pR(t):new mR(t,MR())).send()}var NR=ke.fetch,DR=ke.Request,IR=(ke.Response,ke.AbortController);var SR=["http:","https:"];var ER=function(){try{if(tt.streamRequest){var t=new DR("about:blank",{body:"",method:"POST"}).body;if(t&&TB(t.constructor))return t.constructor}}catch(t){}}();function bR(t){return(t instanceof kB?t:new kB(t)).asList()}function LR(t,i,e){var s;if(tt.stream){var n=void 0;if(tt.streamResponse){var r=t.body;n=r&&DB(Sr,r)}else n=SB(Sr,(function(){return fR(t.arrayBuffer(),i,!0)}),(function(){i.abort()}));n&&e&&(n=function(t,i,e){var s=0,n=function(t){var n=t.done,r=t.value;n?e=void 0===e?s:e:s+=r.byteLength,i(s,e)};return function(t,i,e){return new t(new NB(i.getReader(),e),{highWaterMark:0})}(Sr,t,n)}(n,e,kR(t.headers))),s=n}else{var h=fR(t.arrayBuffer(),i,!0);e&&(h=function(t,i,e){return Promise.resolve().then((function(){return i(0,e),t})).then((function(t){var s=t.byteLength;return i(s,e=void 0===e?s:e),t}))}(h,e,kR(t.headers))),s=h}return new oR(s,t)}function kR(t){return t.has("content-length")?Number(t.get("content-length")):void 0}function CR(t){var i=new lR;return t.signal&&dR(i,t.signal),function(t,i){var e,s,n=t;if(e=n.Mtt===ko.Ttt?tt.streamRequest&&ER?Promise.resolve(DB(ER,n.Ntt)):fR(t.arrayBuffer(),i,!1):fR(Promise.resolve(t.Dtt),i,!1),tt.abort){var r=new IR;dR(r,i.signal),s=r.signal}return e.then((function(i){return new DR(t.url,{body:i||void 0,credentials:t.credentials,headers:bR(t.headers),method:t.method,mode:t.mode,referrer:t.referrer,referrerPolicy:t.referrerPolicy,signal:s})}))}(t,i).then((function(e){return NR(e).then((function(e){return LR(e,i,t.onprogress)}))}))}var xR=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];var OR=function(t){function i(e,s){var n,r,h,o,a,u,c,l,d,f=this,_=(s=s||{}).body||null;if(e instanceof i){if(e.bodyUsed)throw new k("Already used");n=e.url,r=e.credentials,s.headers||(h=new kB(e.headers)),o=e.method,a=e.mode,u=e.referrer,c=e.referrerPolicy,l=e.signal,d=e.onprogress,_||null==e.Dtt||(_=e.Dtt,e.bodyUsed=!0)}else n=String(e),r="same-origin",o="GET",a="cors",u="about:client",c="",l=null,d=null;if(!s.headers&&h||(h=new kB(s.headers)),s&&(u="about:client",c=""),(f=t.call(this,_,h)||this).url=n,f.headers=h,f.credentials=s.credentials||r,f.method=function(t){var i=t.toUpperCase();return xR.indexOf(i)>-1?i:t}(s.method||o),f.mode=s.mode||a,f.signal=s.signal||l||(new lR).signal,f.referrer=void 0!==s.referrer?s.referrer:u,f.referrerPolicy=void 0!==s.referrerPolicy?s.referrerPolicy:c,f.onprogress=s.onprogress||d,("GET"===f.method||"HEAD"===f.method)&&_)throw new k("Body not allowed for GET or HEAD requests");return f}return pB(i,t),i.prototype.clone=function(){return new i(this,{body:nR(this)})},i}(rR),jR="function"==typeof NR&&tt.stream&&tt.streamResponse&&tt.url;function zR(t,i){return new Promise((function(e){var s=new OR(t,i),n=jR&&function(t){try{return SR.indexOf(new ke.URL(t,ke.location.href).protocol)>=0}catch(t){return!1}}(s.url)?CR:TR;e(n(s))}))}zR.polyfill=!0;var PR=class{async Ztt(){const t=this.RI;let i,e;t.YI&&u((()=>{this.Ktt=!0,this.kx.s_()}),t.YI);try{i=zR(t.Fu,{method:t.mS,headers:t.vS.eS(),body:t.AS,credentials:t.NS?"include":"same-origin",signal:UR(this.kx.i_),onprogress:t.DS})}catch(i){throw new vB(t,i)}try{e=await i}catch(t){const i=this.Jtt(t);throw Oi(i)&&this.kx.s_(),i}const s=e.url||t.Fu,n=0===e.status&&"file:"===function(t){return fe.Ah(t).protocol}(s)?200:e.status,r=new BR(this,e,this.kx),h=new Hh({JM:r,BI:t,pS:t.pS,vS:new Ko(e.headers.asList()),FI:n,mj:e.statusText,CS:s});if(this.QI=h,mc(h))return h;throw new ve(h)}Jtt(t){return Oi(t)?this.Ktt?new Qs(this.RI):new sa(t.message,t):this.QI?new ve(this.QI,t):new vB(this.RI,t)}constructor(t){this.kx=new Po,this.QI=void 0,this.Ktt=!1,this.RI=t,this.kx.n_(t.i_),this.UI=this.Ztt()}},BR=class t extends Ru{get bG(){return this.$tt.bodyUsed}kG(){return this.CG.nL}kS(t){return this.xG(this.$tt.text(),t)}zj(t){return this.xG(this.$tt.arrayBuffer(),t)}SG(){const t=this.$tt.body;return t?this.OG(t):nb(this.zj().then(sb),this.kx)}BG(){const i=this.$tt.clone(),[e,s]=this.kx.r_();return this.kx=e,new t(this.tit,i,s)}xG(t,i){i&&this.kx.n_(i);let e=Promise.resolve(t).catch((t=>{throw this.tit.Jtt(t)}));return e=ui(e,this.kx),this.CG.n_(e.then(xs)),e}OG(t){const i=new xh;let e=Promise.resolve(t.pipeTo(i.writable,{preventAbort:!0})).catch((t=>{const e=this.tit.Jtt(t);throw i.writable.abort(e).catch(xs),e}));return e=ui(e,this.kx),this.CG.n_(e.then(xs)),i.readable}constructor(t,i,e){super(),this.CG=new No,this.tit=t,this.$tt=i,this.kx=e,this.CG.nL.catch(xs)}},RR="abort";function UR(t){const i=new lR;if(t.Wf)i.abort();else if(!t.Hf){const e=()=>{s(),i.abort()},s=()=>{i.signal.removeEventListener(RR,e),t.Jf(e),t.t_(s)};i.signal.addEventListener(RR,e),t.Kf(e),t.$f(s)}return i.signal}var QR=class{BI(t){return new PR(t).UI}MY(t){if(Op&&Op.sendBeacon)Op.sendBeacon(t.Fu,wB([t.AS],{type:t.gP}));else{const i=t.gP?{"Content-type":t.gP}:void 0;W(this.BI(new nc({mS:Kc.POST,Fu:t.Fu,AS:t.AS,vS:i})))}}cn(){}};r(),r();var FR=class extends Jo{constructor(t){super("Invalid XML",t)}},YR=class{DI(t){const i=new DOMParser;let e;try{e=i.parseFromString(t,"text/xml")}catch(t){throw new FR(t)}if(!e||e.getElementsByTagName("parsererror").length>0)throw new FR;return new ZR(e)}},GR=class t{get uI(){return Bt.lI}get NI(){var t;return null!=(t=this.iit.localName)?t:$R(this.iit.nodeName)}get l(){return this.iit.nodeName}get eit(){var t;return null!=(t=this.iit.namespaceURI)?t:void 0}get sit(){var t;return null!=(t=this.iit.prefix)?t:void 0}get zy(){return this.iit.nodeValue}aI(t){return this.iit.isEqualNode(t.iit)}gI(i){return new t(this.iit.cloneNode(i))}constructor(t){this.iit=t}},VR=class{get bI(){return void 0===this.nit&&(this.nit=function(t){const i=[];for(let e=0;e<t.length;e++){const s=JR(t.item(e));s&&i.push(s)}return i}(this.rit.childNodes)),this.nit}get m(){return this.bI.filter(KR)}MI(t){return this.bI.filter((i=>KR(i)&&i.Pj===t))}yI(t,i){return this.bI.filter((e=>KR(e)&&e.NI===i&&e.eit===t))}get eI(){return this.rit}LI(t){this.rit.appendChild(t.eI),this.nit&&this.nit.push(t)}aI(t){return this.rit.isEqualNode(t.eI)}constructor(t){this.nit=void 0,this.rit=t}},WR=class t extends VR{get uI(){return Bt.cI}get NI(){var t;return null!=(t=this.rit.localName)?t:$R(this.rit.nodeName)}get eit(){var t;return null!=(t=this.rit.namespaceURI)?t:void 0}get sit(){var t;return null!=(t=this.rit.prefix)?t:void 0}get Pj(){return this.rit.nodeName}get TI(){return function(t){const i=[];for(let e=0;e<t.length;e++)i.push(new GR(t.item(e)));return i}(this.rit.attributes)}get bj(){return this.rit.textContent}EI(t){if(this.rit.hasAttribute(t))return this.rit.getAttribute(t)}SI(t,i){if(this.rit.hasAttributeNS(t,i))return this.rit.getAttributeNS(t,i)}vI(t){this.rit.removeAttribute(t)}hit(t,i){this.rit.removeAttributeNS(t,i)}oit(t,i){this.rit.setAttribute(t,i)}ait(t,i,e){this.rit.setAttributeNS(t,i,e)}gI(i){return new t(this.rit.cloneNode(i))}constructor(t){super(t)}},HR=class{get JM(){return this.rit.nodeValue}get eI(){return this.rit}aI(t){return this.JM===t.JM}constructor(t){this.rit=t}},qR=class t extends HR{get uI(){return Bt.Eu}gI(i){return new t(this.rit.cloneNode(i))}constructor(t){super(t)}},XR=class t extends HR{get uI(){return Bt.dI}gI(i){return new t(this.rit.cloneNode(i))}constructor(t){super(t)}},ZR=class t extends VR{get uI(){return Bt.fI}get II(){return new WR(this.rit.documentElement)}gI(i){return new t(this.rit.cloneNode(i))}constructor(t){super(t)}};function KR(t){return rs(t)}function JR(t){switch(t.nodeType){case Bt.cI:return new WR(t);case Bt.Eu:return new qR(t);case Bt.dI:return new XR(t)}}function $R(t){const i=t.indexOf(":");return i<0?t:t.substr(i+1)}!function(t){fe=t}(new class extends _B{get ftt(){return this.uit||(this.uit=new DT(wN())),this.uit}get cit(){return this.dit}get UJ(){return this.fit}get s$(){return this._it}get git(){return!1}get vz(){return yi.bQ()}get wit(){return{Ait:AB}}get vit(){return nd.connection&&nd.connection.effectiveType||_I}get mit(){return nd.connection&&nd.connection.type||"unknown"}get MO(){return this.pit||(this.pit=new Mb(new QR)),this.pit}DI(t){return this.yit.DI(t)}constructor(...t){super(...t),this.uit=void 0,this.dit=function(){if(_n.gE)return!1;try{return"body"in self.Response.prototype}catch(t){return!1}}(),this.fit=_n.wb||_n.gE,this._it=(_n.wb||_n.gE)&&!(_n.kE&&_n.xE<3),this.pit=void 0,this.yit=new YR}}),r(),r();var tU=class{get E_(){const t=this.Lo.currentTime;return"number"==typeof t&&isFinite(t)?t:"now"}get Mit(){return this.Lo.src||""}Wn(){}constructor(t,i){this.Tit=!1,this.Nit=t=>{this.Dit.dY(t.error,this.E_)},this.Iit=()=>{this.Dit.uY(this.Mit),this.Lo.removeEventListener("playing",this.Iit),this.Tit=!1},this.js=()=>{this.Tit||(this.Lo.addEventListener("playing",this.Iit),this.Tit=!0)},this.Dit=i,this.Lo=t,this.Lo.addEventListener("error",this.Nit),this.Lo.addEventListener("sourcechange",this.js),this.js()}};!function(t){bj.push(t)}((function(t){new tU(t.oa,t.E9)})),r();var iU="theoplayer-stored-volume",eU="theoplayer-stored-mutedstate";tr((function(t){return class extends t{V_(t){this.vd.persistVolume&&vt.yz(eU,""+Boolean(t)),super.V_(t)}Ig(t){this.vd.persistVolume&&vt.yz(iU,""+Number(t)),super.Ig(t)}constructor(t,i){if(super(t,i),i.persistVolume){let t=vt.FW(iU);(void 0===t||j(t))&&(t=1);const i=vt.YW(eU)||!1;this.Ng=t,this.Y_=i}}}}),iu.Wa);var sU="6.9.0",nU="2024.1.1",rU=xj.oa,hU=Ea.cj.registerContentProtectionIntegration.bind(Ea.cj);r(),r(),r();var oU={bY(t){Ys.addEventListener("beforeunload",t)},DY(t){Ys.removeEventListener("beforeunload",t)}};!function(t){kp=t.Sit,Cp=t.Eit,us=t.Lit,Ys=t.kit,xp=Ys&&Ys.location,Op=Ys&&Ys.navigator}({Sit:class{get uR(){const t=[];for(const i of this.Cit){const e=this.xit.get(i);if(e){const i=e.map((t=>t.Oit));t.push(...i)}}return this.jit&&t.push(this.jit),t}lR(t){for(const i of this.uR)i.f3(t)}XP(t){const i=Gr(this.xit.get(t),(t=>t.zit));if(i)return i.zit=!1,i.Oit}Pit(t){if(!this.jit){var i;const t=null==(i=this.xit.get(Tw.Yv))?void 0:i[0].Oit.aP;if(!t)throw new b("Error creating iOS Safari MediaController");this.jit=new oj(t,this.KC)}return this.jit}async kP(t){const i=t.aP,e=i.tagName.toLowerCase();await t.Wn(),cj(i);const s=Gr(this.xit.get(e)||[],(i=>t===i.Oit));s&&(s.zit=!0)}rR(){for(const t of this.uR)t.d3()}cn(){for(const t of this.uR){const i=t.aP;t.Xf(),cj(i),ei(i)}this.xit.clear(),this.jit=void 0}Bit(){for(const t of this.Cit){const i=[];this.xit.set(t,i);for(let e=0;e<this.Rit;e++){const e=uj(t),s=t===Tw.Gv?new Px(e,this.KC,this.Ou):new $O(e,this.KC,this.Ou,this.aR);i.push({Oit:s,zit:!0})}}}constructor(t,i,e=2,s=aj,n=wN()){this.Rit=e,this.Cit=[...s],this.KC=n,this.Ou=t,this.aR=i,this.xit=Qt(),this.Bit()}},Eit:class t{M7(t){return this.Uit.Lx((()=>this.Qit(t)))}zg(){this.hR.rR()}async Qit(i){const e=this.hR.XP(Tw.Yv),s=e.aP,n=await t.Fit(s,i);return await this.hR.kP(e),n}static async Fit(i,e){return _n.jE||_n.kE?"all":(i.src||(i.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.Yit(),!e&&await t.Git(i,!1)?"all":await t.Git(i,!0)?"muted":"none")}static async Git(t,i){t.muted=i;const e=t.play();try{if(!B_(e))return!_n.Qs;const t=be(250);return await Promise.race([e,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static Yit(){return new Promise((t=>{if("function"==typeof MessageChannel){const i=new MessageChannel;i.port1.onmessage=()=>t(),i.port2.postMessage("")}else u(t,0)}))}cn(){this.Uit.cn()}constructor(t){this.hR=t,this.Uit=new ro}},Lit:oU,kit:s}),r(),r(),r(),r();var aU=class t{async ZP(i){if(!dw(i.type))return!1;const e=i.contentProtection;if(e&&!FN(e)){if(!VN(e))return!1;if(!await t.Vit(e))return!1}return!0}static async Vit(t){return!(!t.playready||!await fe.WC())||(!(!t.widevine||!await fe.YC())||(!(!t.clearkey||!await fe.VC())||!!await fe.JC()))}},uU=class extends aU{async ZP(t){return!!Lk(t.useManagedMediaSource)&&super.ZP(t)}};function Ti(t){return Wa(t)}function cU(t,i){const e=Wa(t);return i?""+e+i:""+e}r(),r();var St=class{async Wit(t){return(await this.qit.Hit(t.map(Ti))).shift()}Xit(t,i){const e=cU(t,i);return this.Zit.Kb(e)}async Kit(t,i){var e;const s=cU(t,i);return null==(e=await this.Jit.Jb(s))?void 0:e.data}qW(t){return this.$it.Jb(t)}constructor(t,i,e,s){this.qit=t,this.Zit=i,this.Jit=e,this.$it=s}};r(),r(),r();var lU=class{tet(t){return Promise.resolve(!1)}iet(t){return Promise.reject(dU)}eet(t){return Promise.reject(dU)}Kb(t){return Promise.resolve(!1)}Jb(t){return Promise.resolve(void 0)}net(t,i){return Promise.resolve(void 0)}Hit(t){return Promise.resolve([])}ret(){return Promise.resolve([])}het(t){return Promise.resolve([])}oet(t,i){return Promise.resolve([])}wm(t){return Promise.reject(dU)}aet(t){return Promise.reject(dU)}uet(){return Promise.reject(dU)}},dU="Storage disabled",fU=class t{static g8(){return Promise.resolve(new t)}cet(t){return Promise.reject(_U)}constructor(){this.let=new lU,this.det=new lU,this.fet=new lU,this._et=new lU,this.wet=new lU}},_U="Storage disabled";r(),r(),r();var ye,kn=class{get Aet(){return this.e_.nL}async tet(t){return(this.vet||await this.Aet).tet(t)}async iet(t,i){return(this.vet||await this.Aet).iet(t,i)}async eet(t,i){return(this.vet||await this.Aet).eet(t,i)}async Kb(t){return(this.vet||await this.Aet).Kb(t)}async Jb(t){return(this.vet||await this.Aet).Jb(t)}async net(t,i){return(this.vet||await this.Aet).net(t,i)}async Hit(t){return(this.vet||await this.Aet).Hit(t)}async ret(){return(this.vet||await this.Aet).ret()}async het(t){return(this.vet||await this.Aet).het(t)}async oet(t,i){return(this.vet||await this.Aet).oet(t,i)}async wm(t){return(this.vet||await this.Aet).wm(t)}async aet(t){return(this.vet||await this.Aet).aet(t)}async uet(){return(this.vet||await this.Aet).uet()}constructor(t){this.e_=new No,this.vet=void 0,this.e_.n_(t),this.e_.nL.then((t=>{this.vet=t}))}},gU=class{get met(){return this.e_.nL}async cet(t){const i=this.pet||await this.met;return await i.cet(t)}constructor(t){this.e_=new No,this.pet=void 0,this.e_.n_(t);const i=this.e_.nL;i.then((t=>{this.pet=t})),this.det=new kn(i.then((t=>t.det))),this.let=new kn(i.then((t=>t.let))),this.fet=new kn(i.then((t=>t.fet))),this._et=new kn(i.then((t=>t._et))),this.wet=new kn(i.then((t=>t.wet)))}};function ft(t){return new b("This storage cannot handle persistency type "+t)}r(),r(),r(),function(t){t.yet="readonly",t.Met="readwrite"}(ye||(ye={}));var Hs=class{tet(t){return Promise.resolve("temporary"===t)}iet(t,i){return void 0===i&&(i="temporary"),"temporary"!==i?Promise.reject(ft(i)):(this.Tet(t.key),this.zL.push(t),Promise.resolve())}eet(t,i){if(void 0===i&&(i="temporary"),"temporary"!==i)return Promise.reject(ft(i));for(const i of t)this.Tet(i.key);for(const i of t)this.zL.push(i);return Promise.resolve()}Kb(t){return Promise.resolve(Boolean(this.Net(t)))}Jb(t){return Promise.resolve(this.Net(t))}net(t,i){return Promise.resolve(this.Det(t,i))}Hit(t){const i=t?t.map((t=>this.Net(t))):this.zL;return Promise.resolve(i.filter(z_))}ret(){return Promise.resolve([...this.zL])}het(t){return this.oet(t,"key")}oet(t,i){const e=this.zL.filter((e=>e[i]===t));return Promise.resolve(e)}wm(t){return this.Tet(t),Promise.resolve()}aet(t){for(const i of t)this.Tet(i);return Promise.resolve()}uet(){return Ri(this.zL),Promise.resolve()}Net(t){return this.Det(t,"key")}Det(t,i){for(const e of this.zL)if(e[i]===t)return e}Tet(t){const i=this.Net(t);i&&Et(this.zL,i)}constructor(){this.zL=[]}},wU=class t{static g8(){return Promise.resolve(new t)}cet(t){return t(this)}constructor(){this.let=new Hs,this.det=new Hs,this.fet=new Hs,this._et=new Hs,this.wet=new Hs}};r(),r();var AU=class{async tet(t){for(let i of this.Iet)if(await i.tet(t))return!0;return!1}async iet(t,i){void 0===i&&(i="persistent");for(let e of this.Iet)if(await e.tet(i))return e.iet(t);throw ft(i)}async eet(t,i){void 0===i&&(i="persistent");for(let e of this.Iet)if(await e.tet(i))return e.eet(t);throw ft(i)}async Kb(t){for(let i of this.Iet)if(await i.Kb(t))return!0;return!1}async Jb(t){for(let i of this.Iet){const e=await i.Jb(t);if(e)return e}}async net(t,i){for(let e of this.Iet){const s=await e.net(t,i);if(s)return s}}async Hit(t){const i=[];for(let e of this.Iet)i.push(...await e.Hit(t));return i}async ret(){const t=[];for(let i of this.Iet)t.push(...await i.ret());return t}async het(t){const i=[];for(let e of this.Iet)i.push(...await e.het(t));return i}async oet(t,i){const e=[];for(let s of this.Iet)e.push(...await s.oet(t,i));return e}async wm(t){for(let i of this.Iet)await i.wm(t)}async aet(t){for(let i of this.Iet)await i.aet(t)}async uet(){for(let t of this.Iet)await t.uet()}constructor(t){this.Iet=t}};function vU(t){return async()=>{const i=await Promise.all(t.map((t=>t())));return mU.g8(i)}}var Q,mU=class t{static g8(i){return Promise.resolve(new t(i))}get _et(){return this.Eet}get wet(){return this.bet}get fet(){return this.Let}get let(){return this.ket}get det(){return this.Cet}cet(i){if(0===this.xet.length)return i(this);const e=[];let s=0;const n=r=>(e.push(r),s++,s<this.xet.length?this.xet[s].cet(n):i(new t(e)));return this.xet[s].cet(n)}constructor(t){this.xet=t,this.Eet=new AU(t.map((t=>t._et))),this.bet=new AU(t.map((t=>t.wet))),this.Let=new AU(t.map((t=>t.fet))),this.ket=new AU(t.map((t=>t.let))),this.Cet=new AU(t.map((t=>t.det)))}},pU=class{g8(){return new gU(this.Oet())}async Oet(){this.jet&&(await Promise.resolve(),this.jet=!1);for(const t of this.zet)try{return await vU([wU.g8,t])()}catch(t){}return await vU([wU.g8,this.Pet])()}va(t){if(!this.jet)throw new b("Registration overdue");this.zet.push(t)}constructor(t){this.zet=[],this.jet=!0,this.Pet=t}},ti=class t{static va(i){t.Uz.va(i)}static get kb(){return t.Bet||(t.Bet=t.Uz.g8()),t.Bet}};function yU(t){return void 0!==t.vg}ti.Uz=new pU(fU.g8),ti.Bet=void 0,r(),r(),r(),r(),r(),r(),function(t){t.tO="static",t.iO="dynamic"}(Q||(Q={})),r(),r();var MU,TU=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,NU=class t{static ST(i){const e=i.match(TU);if(!e)throw new b("The given value could not be parsed as a valid DateTimeInterval");const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,h=Number(e[4])||0,o=Number(e[5])||0,a=Number(e[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*h+60*o+a)}get Ret(){return aa.Ey(this.Uet,1e3)}Qet(){return this.Uet}Fet(){return 1e3*this.Uet}constructor(t){this.Uet=t}};r(),function(t){t.Yet="progressive",t.Get="interlaced",t.Hv="unknown"}(MU||(MU={})),r();var DU=class{vp(){return this.Vet/this.Wet}constructor(t,i){this.Vet=t,this.Wet=i}},IU=/^(?:true|false)$/i,SU=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function Re(t){if(void 0!==t)return NU.ST(t)}function EU(t){if(void 0===t)return;const i=t.match(SU);if(!i)throw new b("The given value could not be parsed as a valid Date");const[,e,s,n,r,h,o,a,u,c,l,d]=i,f=("-"===e?-1:1)*Number(s),_=Number(n)-1,g=Number(r),w=Number(h);let A=Number(o);const v=Number(a),m=Number("0."+(u||"")),p=x.round(1e3*m);if(c){A-=("-"===c?-1:1)*(60*Number(l)+Number(d))}const y=new Date(Date.UTC(f,_,g,w,A,v,p));if(j(y.getTime()))throw new b("The given value could not be parsed as a valid Date");return y}function bU(t){if(!t)return;const i=/(\d+)-(\d+)/.exec(t);return i?[D(i[1]),D(i[2])]:void 0}function LU(t){if(void 0!==t){if(!j(Number(t)))try{return Se.fromString(t,!0)}catch(t){}throw new b("The given value could not be parsed as a valid unsigned long")}}function D(t){if(void 0===t)return;const i=Number(t);if(!j(i))return i;throw new b("The given value could not be parsed as a valid Number")}function kU(t){if(void 0===t)return;const i=t.split("/"),e=Number(i[0]),s=Number(i[1]||1);if(!j(e)&&!j(s))return new DU(e,s);throw new b("The given value could not be parsed as a valid frame rate")}function CU(t){if(void 0!==t){if(IU.test(t))return"true"===t.toLowerCase();if(!j(C(t)))return Boolean(C(t));throw new b("The given value could not be parsed as a valid Boolean.")}}function xU(t){return{Fu:t.bj,Het:CU(t.EI("availabilityTimeComplete")),qet:D(t.EI("availabilityTimeOffset"))}}function OU(t){return t.map(xU)}function jU(t){const i=VU(t),e=function(t,i,e,s){let n=t.SI(e,i);return void 0===n&&(n=t.EI(s+":"+i)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=km(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=Sa(n.bj)),!s){const i=km(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==i&&(s=function(t){const i=vi(t.bj),e=new T([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=i.length,n=12+e.length+4+s,r=new ArrayBuffer(n),h=new T(r),o=new DataView(r),a=new Vr;Pu(o,a,n),Pu(o,a,1886614376),Pu(o,a,0),qh(o,a,e),Pu(o,a,s),qh(o,a,i),!1;return h.buffer}(i))}return{GO:e,Xet:s,Zet:i.Zet,zy:i.zy}}function zU(t){return{Ket:t.EI("sourceURL"),Jet:bU(t.EI("range"))}}function PU(t,i){const e=t.EI("d"),s=t.EI("t"),n=D(t.EI("r"));i.push({ct:e,Fm:s,$et:n})}function BU(t){return{tst:t.EI("index"),ist:bU(t.EI("indexRange")),ZT:t.EI("media"),sst:bU(t.EI("mediaRange"))}}function RU(t){const i=QU(t),e=function(t){const i=t.map(BU);return i.length>0?i:void 0}(t.MI("SegmentURL"));return oe({},i,{nst:e,rst:t.EI("xlink:href"),hst:t.EI("xlink:actuate")})}function UU(t){const i=CU(t.EI("availabilityTimeComplete")),e=D(t.EI("availabilityTimeOffset")),s=bU(t.EI("indexRange")),n=CU(t.EI("indexRangeExact")),r=t.MI("Initialization");if(r.length>1)throw new b("The provided MPEG-DASH document's "+t.Pj+" element can not have more than one Initialization element.");const h=1===r.length?zU(r[0]):void 0,o=LU(t.EI("presentationTimeOffset")),a=t.MI("RepresentationIndex");if(a.length>1)throw new b("The provided MPEG-DASH document's "+t.Pj+" element can not have more than one RepresentationIndex element.");return{Het:i,qet:e,ist:s,ost:n,ast:h,ust:o,cst:1===a.length?zU(a[0]):void 0,lst:Re(t.EI("timeShiftBufferDepth")),vy:D(t.EI("timescale"))}}function QU(t){const i=UU(t),e=t.MI("BitstreamSwitching"),s=e.length>0?zU(e[0]):void 0,n=D(t.EI("duration")),r=t.MI("SegmentTimeline");if(r.length>1)throw new b("The provided MPEG-DASH document's "+t.Pj+" element can not have more than one SegmentTimeline element.");const h=1===r.length?function(t){const i=[],e=t.MI("S");for(const t of e)PU(t,i);return i}(r[0]):void 0;return oe({},i,{dst:s,ct:n,fst:h,_st:D(t.EI("startNumber")),gst:D(t.EI("endNumber"))})}function FU(t){return{wst:function(t){if(!t)return;const i=t.split(/\s/);return i.length>1?(i.length=2,i.map(D)):1===i.length?i.map(D)[0]:void 0}(t.EI("audioSamplingRate")),Ast:t.EI("codecs"),vst:CU(t.EI("codingDependency")),mst:function(t){if(0!==t.length)return t.map(jU)}(t.MI("ContentProtection")),pst:function(t){return t.map(WU)}(t.MI("EssentialProperty")),yst:kU(t.EI("frameRate")),Ti:D(t.EI("height")),Mst:D(t.EI("maxPlayoutRate")),Tst:D(t.EI("maximumSAPPeriod")),rY:t.EI("mimeType"),Nst:t.EI("profiles"),Dst:t.EI("sar"),Ist:function(t){switch(t){case MU.Yet:case MU.Get:case MU.Hv:return t;default:return}}(t.EI("scanType")),Sst:t.EI("segmentProfiles"),Est:D(t.EI("startWithSAP")),ji:D(t.EI("width"))}}function YU(t){const i=OU(t.MI("BaseURL")),e=t.MI("SegmentBase");if(e.length>1)throw new b("The provided MPEG-DASH document's "+t.NI+" element can not have more than one SegmentBase element.");const s=1===e.length?UU(e[0]):void 0,n=function(t){const i=t.map(RU);return i.length>0?i:void 0}(t.MI("SegmentList")),r=t.MI("SegmentTemplate");if(r.length>1)throw new b("The provided MPEG-DASH document's "+t.NI+" element can not have more than one SegmentTemplate element.");const h=1===r.length?function(t){return oe({},QU(t),{bst:t.EI("bitstreamSwitching"),Lst:t.EI("index"),kst:t.EI("initialization"),Cst:t.EI("media")})}(r[0]):void 0;return{xst:i,Ost:s,jst:n,zst:h}}function GU(t){const i=FU(t),e=YU(t),s=D(t.EI("bandwidth")),n=t.EI("dependencyId"),r=t.EI("id"),h=t.EI("mediaStreamStructureId"),o=D(t.EI("qualityRanking"));if(t.MI("SegmentBase").length>1)throw new b("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return oe({},i,e,{zz:s,Pst:n,o:r,Bst:h,Rst:o})}function VU(t){return{Zet:t.EI("schemeIdUri"),zy:t.EI("value")}}function WU(t){return VU(t)}function HU(t){return VU(t)}function qU(t){return VU(t)}function XU(t){var i;const e=FU(t),s=YU(t),n=function(t){return t.map(qU)}(t.MI("Accessibility")),r=CU(t.EI("bitstreamSwitching")),h=t.EI("contentType"),o=D(t.EI("group")),a=D(t.EI("id")),u=(null==(i=t.MI("Label")[0])?void 0:i.bj)||"",c=t.EI("lang"),l=D(t.EI("maxBandwidth")),d=kU(t.EI("maxFrameRate")),f=D(t.EI("maxHeight")),_=D(t.EI("maxWidth")),g=D(t.EI("minBandwidth")),w=kU(t.EI("minFrameRate")),A=D(t.EI("minHeight")),v=D(t.EI("minWidth")),m=t.EI("par"),p=function(t){return t.map(GU)}(t.MI("Representation"));if(0===p.length)throw new b("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const y=function(t){return t.map(HU)}(t.MI("Role")),M=CU(t.EI("segmentAlignment"))||!1,T=D(t.EI("selectionPriority")),N=T||1,I=CU(t.EI("subsegmentAlignment"))||!1;let S;try{S=D(t.EI("subsegmentStartsWithSAP"))}catch(t){}return oe({},e,s,{Ust:n,dst:r,gP:h,Qst:o,o:a,dh:u,gs:c,Fst:l,Yst:d,Gst:f,Vst:_,Wst:g,Hst:w,qst:A,Xst:v,Zst:m,Kst:p,Jst:y,$st:M,JP:N,tnt:I,int:S,ent:t.EI("xlink:actuate")||"onRequest",snt:t.EI("xlink:href")})}function ZU(t){const i=LU(t.EI("presentationTime"))||Se.ZERO,e=LU(t.EI("duration")),s=D(t.EI("id")),n=function(t){const i=t.TI,e={};for(let t=0;t<i.length;t++)e[i[t].l]=i[t].zy;return e}(t),r=t.bj;return{PD:i,ct:e,o:s,TI:n,JM:""!==r.trim()?r:t.EI("messageData")||""}}function KU(t){return{snt:t.EI("xlink:href"),ent:t.EI("xlink:actuate"),Zet:t.EI("schemeIdUri"),zy:t.EI("value"),vy:D(t.EI("timescale")),ust:LU(t.EI("presentationTimeOffset")),hY:t.MI("Event").map(ZU)}}function JU(t){const i=YU(t),e=t.MI("AssetIdentifier");if(e.length>1)throw new b("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===e.length?function(t){return VU(t)}(e[0]):void 0,n=function(t){return t.map(XU)}(t.MI("AdaptationSet")),r=CU(t.EI("bitstreamSwitching")),h=Re(t.EI("duration")),o=function(t){return t.map(KU)}(t.MI("EventStream")),a=t.EI("id"),u=Re(t.EI("start")),c=(t.MI("Subset"),t.EI("xlink:href"));return oe({},i,{nnt:n,rnt:s,dst:r,ct:h,hnt:o,o:a,gn:u,ent:t.EI("xlink:actuate"),snt:c})}function $U(t){const i=t.EI("schemeIdUri");if(!i)return;return{Zet:i,zy:t.EI("value")}}function tQ(t,i){const e=EU(t.EI("availabilityEndTime")),s=EU(t.EI("availabilityStartTime")),n=OU(t.MI("BaseURL")),r=t.EI("id"),h=function(t){return t.map((t=>""+t.bj))}(t.MI("Location")),o=Re(t.EI("maxSegmentDuration")),a=Re(t.EI("maxSubsegmentDuration")),u=Re(t.EI("mediaPresentationDuration")),c=(t.MI("Metrics"),Re(t.EI("minBufferTime")));if(!c)throw new b("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const l=Re(t.EI("minimumUpdatePeriod")),d=function(t){return t.map((t=>JU(t)))}(t.MI("Period"));if(!d.length)throw new b("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.EI("profiles");if(!f)throw new b("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const _=EU(t.EI("publishTime")),g=Re(t.EI("suggestedPresentationDelay")),w=Re(t.EI("timeShiftBufferDepth")),A=function(t){switch(t){case Q.tO:case Q.iO:return t;default:return}}(t.EI("type")),v=function(t){const i=[];for(const e of t){const t=$U(e);t&&i.push(t)}return i}(t.MI("UTCTiming"));return{ont:e,ant:s,xst:n,o:r,unt:h,cnt:i,lnt:o,dnt:a,fnt:u,_nt:c,gnt:l,wnt:d,Nst:f,Ant:_,vnt:g,lst:w,$w:A,mnt:v}}var iQ=class{pnt(t,i){return function(t,i){if(!t)throw new b("The provided MPEG-DASH document does not contain a valid MPD root element.");return tQ(t,i)}(fe.DI(t).II,i)}};function eQ(t){return{get bandwidth(){return t.zz},get codecs(){return t.Ast},get id(){return t.o},get uid(){return t.Bw},get name(){return t.dh},get averageBandwidth(){return t.ynt},get label(){return t.dh},set label(i){t.dh=P(i)},get available(){return t.zit},get score(){return t.Mnt},addEventListener(i,e){t.ln(i,e)},removeEventListener(i,e){t.rn(i,e)}}}function sQ(t){return Ou(eQ(t),{get height(){return t.Ti},get width(){return t.ji},get frameRate(){return t.yst},get firstFrame(){return t.Tnt}})}function nQ(t){return Ou(eQ(t),{get audioSamplingRate(){return t.wst}})}r(),r(),r(),r(),r(),r(),r(),r();var rQ=class extends gg{constructor(t){super("update"),this.quality=t}},hQ=class extends i{get dh(){return this.Tm}set dh(t){this.Tm!==t&&(this.Tm=t,this.mo(new rQ(this.oa)))}get ynt(){}get zit(){return this.Nnt}get Mnt(){}KI(){this.Nnt=!1,this.mo(new rQ(this.oa))}constructor(t,i,e,s,n){super(),this.o=t,this.zz=i,this.Ast=e,this.Dnt=n,this.Bw=Vw(),this.Tm=s||"",this.Nnt=!0}},oQ=class extends hQ{get oa(){return this.Ua||(this.Ua=sQ(this)),this.Ua}constructor(t,i,e,s,n,r,h,o,a=0){super(t,i,e,s,n),this.yst=r,this.ji=h,this.Ti=o,this.Tnt=a,this.Ua=void 0}},aQ=class extends hQ{get oa(){return this.Ua||(this.Ua=nQ(this)),this.Ua}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.wst=r,this.Ua=void 0}};r(),r();var xl,bn=class extends i{get Int(){const t=this.Snt();return null==t?void 0:t.gn}get Ent(){const t=this.Snt();return null==t?void 0:t.bn}constructor(...t){super(...t),this.bnt=t=>{this.mo(t)}}};function Ft(t){return R_(t.Lnt)}function uQ(t){return Ft(t)?t.Lnt:t.tst}r(),r(),function(t){t.knt="Cnt",t.xnt="Ont"}(xl||(xl={}));var cQ=class extends bn{get jnt(){return this.znt}get wst(){var t;return null!=(t=this.Pnt.JM.wst)?t:this.jnt.wst}get zz(){return this.Pnt.JM.zz||0}get Ast(){const t=this.Pnt.JM;return t.Ast?[t.Ast]:this.jnt.Ast}get Bnt(){const t=this.Pnt.JM;return t.Ast?[t.Ast]:[]}get utt(){return this.Pnt.JM.Ast||this.jnt.utt}get vst(){return this.Pnt.JM.vst||this.jnt.vst}get mst(){return this.Pnt.JM.mst||this.jnt.mst}get gP(){return this.rY+'; codecs="'+this.utt+'"'}get pst(){const t=this.Pnt.JM;return t.pst.length?t.pst:this.jnt.pst}get oa(){return this.Ua||(this.Ua=function(t){return{get id(){return t.o},get type(){return t.$w},get bandwidth(){return t.zz},get width(){return t.ji},get height(){return t.Ti},get frameRate(){var i,e;return null!=(e=null==(i=t.yst)?void 0:i.vp())?e:NaN},get audioSamplingRate(){return t.wst}}}(this))}get yst(){var t;return null!=(t=this.Pnt.JM.yst)?t:this.jnt.yst}get Ti(){return this.Pnt.JM.Ti||this.jnt.Ti}get o(){return this.Pnt.JM.o||""}get Rnt(){return this.Unt}set Rnt(t){this.Unt=t}get Qnt(){const t=this.Pnt.Fnt();if(t)return{Fu:t.Fu,Jet:t.Jet,NS:this.Ynt.NS}}get Mst(){return this.Pnt.JM.Mst||this.jnt.Mst||1}get Tst(){return this.Pnt.JM.Tst||this.jnt.Tst}get Ynt(){return this.Gnt.Ynt}get rY(){return this.Pnt.JM.rY||this.jnt.rY}get Gnt(){return this.jnt.Gnt}get Nst(){return this.Pnt.JM.Nst||this.jnt.Nst}get Vnt(){return this.Wnt}get Dst(){return this.Pnt.JM.Dst||this.jnt.Dst}get Ist(){return this.Pnt.JM.Ist||this.jnt.Ist}get Hnt(){return this.Pnt.Hnt}get Sst(){return this.Pnt.JM.Sst||this.jnt.Sst}get fst(){return this.Pnt.fst}get Est(){return this.Pnt.JM.Est||this.jnt.Est}get $w(){const t=this.rY.split("/")[0];return"application"===t||"text"===t||Uo(this.rY,this.Ast)?Tw.Eu:"video"===t?Tw.Yv:"audio"===t?Tw.Gv:"image"===t?Tw.Wv:Tw.Hv}get ji(){return this.Pnt.JM.ji||this.jnt.ji}get qnt(){return this.Xnt}set qnt(t){this.Xnt=t}Znt(t){const i=Ft(t)?this.Pnt.Knt(t):this.Pnt.Znt(t);return{Fu:i.Fu,Jet:i.Jet,NS:this.Ynt.NS}}Jnt(){return this.Pnt.Jnt()}Snt(){return this.Pnt.Snt()}$nt(){return this.Pnt.$nt()}trt(t){return this.Pnt.trt(t)}irt(t,i,e){return this.Pnt.irt(t,this.Ynt.NS,i,e)}ert(t){return Ft(t)?this.fst.nrt(t,this.Pnt):this.fst.ert(t)}rrt(t){return Ft(t)?this.fst.hrt(t,this.Pnt):this.fst.rrt(t)}cn(){this.Pnt.rn(xl.knt,this.bnt)}constructor(t,i){if(super(),this.Ua=void 0,this.Unt=void 0,this.Xnt=!1,this.znt=t,this.Pnt=i,this.Pnt.ln(xl.knt,this.bnt),this.$w===Tw.Yv){var e,s;const t=null!=(s=null==(e=this.yst)?void 0:e.vp())?s:NaN;this.Wnt=new oQ(this.o,this.zz,this.utt,"","",t,this.ji,this.Ti)}else this.$w===Tw.Gv?this.Wnt=new aQ(this.o,this.zz,this.utt,"","",this.wst):this.Wnt=void 0}},lQ=class extends bn{get Ust(){return this.Pnt.JM.Ust}get wst(){var t;return null!=(t=this.Pnt.JM.wst)?t:-1}get Ast(){if(this.Pnt.JM.Ast)return[this.Pnt.JM.Ast];{const t=[];for(const i of this.Kst)i.Bnt.length&&-1===t.indexOf(i.utt)&&t.push(i.utt);return t}}get utt(){return this.Ast.join()}get vst(){return this.Pnt.JM.vst}get mst(){return this.Pnt.JM.mst}get gP(){return this.rY+'; codecs="'+this.utt+'"'}get pst(){return this.ort}get yst(){return this.Pnt.JM.yst}get Qst(){return this.Pnt.JM.Qst}get Ti(){return this.Pnt.JM.Ti||0}get o(){return this.Pnt.JM.o}get dh(){return this.Pnt.JM.dh||""}get Mst(){return this.Pnt.JM.Mst}get Tst(){return this.Pnt.JM.Tst}get Ynt(){return this.Gnt.Ynt}get rY(){return this.Pnt.JM.rY||this.art[0].rY}get Gnt(){return this.urt}get Nst(){return this.Pnt.JM.Nst}get Kst(){return this.art}get Jst(){return this.Pnt.JM.Jst||[]}get Dst(){return this.Pnt.JM.Dst}get Ist(){return this.Pnt.JM.Ist}get Sst(){return this.Pnt.JM.Sst}get JP(){return this.Pnt.JM.JP}get Est(){return this.Pnt.JM.Est}get $w(){const t=(this.Pnt.JM.gP||this.rY).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||Uo(this.rY,this.Ast)?Tw.Eu:"video"===t?Tw.Yv:"audio"===t?Tw.Gv:"image"===t?Tw.Wv:Tw.Hv}get ji(){return this.Pnt.JM.ji||0}get X5(){return this.Pnt.JM.gs||""}get crt(){return this.Int}get lrt(){const t=this.crt,i=this.Ent;if(void 0===t||void 0===i)return;const e=x.min(i,this.Ynt.drt);return x.max(t,e)}async Ln(t,i){if(0===this.art.length){this.art=[];const e=this.Pnt.Kst.map((e=>this.frt(e,t,i)));this.art=(await Promise.all(e)).filter(z_)}this._rt()}async frt(t,i,e){const s=new cQ(this,t),n=await i(s);if(Pi(e),n)return s}_rt(){if(!this.art.length)throw new b("Detected an AdaptationSet without any supported Representations.")}Snt(){return this.Pnt.Snt()}$nt(){return this.Pnt.$nt()}cn(){this.Pnt.rn(xl.knt,this.bnt);for(const t of this.art)t.cn();Ri(this.art)}constructor(t,i){super(),this.ort=[],this.art=[],this.urt=t,this.Pnt=i,this.Pnt.ln(xl.knt,this.bnt)}};function dQ(t,i){const e=[];for(const s of i)for(const i of t)e.push(fe.Ah(i,s));return e}r(),r(),r(),r(),r(),r(),r();var Cn=class{grt(t){const i=t-this.urt.gn;if(i<0||i>=this.urt.ct)return;const e=this.wrt();return void 0!==e&&Ua(e,i,1e-5)?this.Art():this.vrt(i)}mrt(t){const i=t-this.urt.gn;if(!(i<0))return this.prt(x.min(i,this.urt.ct))}Art(){return this.yrt(0)}Mrt(){const t=this.urt.ct;if(isFinite(t))return this.prt(t)}get Trt(){return this.urt.Drt.Nrt&&void 0!==this.Irt()}Jnt(t){if(this.urt.Drt.$w===Q.iO){if(this.Trt){const i=this.Art(),e=this.Irt();if(void 0===i||void 0===e)return;return{Srt:t,Ert:i,brt:e}}const i=this.Lrt(t);if(!i)return;return{Srt:t,Ert:this.krt(t),brt:i}}{0;const i=this.Art();if(i)return{Srt:t,Ert:i,brt:this.Mrt()}}}$nt(t,i){if(i){let t=this.Crt(i.Ert);const e=this.xrt(i.brt);if(e){const i=this.Ort(e);(!t||i.getTime()<t.getTime())&&(t=i)}return t}{const i=this.Art();if(i){const e=this.Ort(i);if(t.getTime()<e.getTime())return e}const e=this.urt.Drt.ant;return t.getTime()<e.getTime()?e:void 0}}Lrt(t){const i=(t.getTime()-this.urt.Drt.ant.getTime())/1e3-this.urt.gn+this.jrt;let e=this.prt(It(i,0,this.urt.ct));if(!e)return;if(e=this.zrt(e,t),!e)return;let s=this.xrt(e);for(;s&&this.Prt(s,t);)e=s,s=this.xrt(e);return e}krt(t){let i;const e=this.Brt.lst;if(e){const s=(t.getTime()-this.urt.Drt.ant.getTime())/1e3-this.urt.gn-e.Qet();i=this.prt(It(s,0,this.urt.ct)),i||(i=this.Art())}else i=this.Art();if(!i)return;if(i=this.zrt(i,t),!i)return;let s=this.Rrt(i);for(;s&&this.Prt(s,t);)i=s,s=this.Rrt(i);return i}zrt(t,i){let e=t;for(;e&&this.Ort(e).getTime()>i.getTime();)e=this.Rrt(e);if(!e)return;const s=this.Crt(e);if(s&&s.getTime()<=i.getTime()){const t=this.Rrt(e);for(t&&this.Prt(t,i)&&(e=t);e;){if(this.Ort(e).getTime()>i.getTime())return;if(this.Prt(e,i))break;e=this.xrt(e)}if(!e)return}return e}Prt(t,i){if(this.Trt)return!0;if(this.Ort(t).getTime()>i.getTime())return!1;const e=this.Crt(t);return!(e&&i.getTime()>=e.getTime())}Urt(t,i){if(this.Trt)return!0;if(this.Qrt(t).getTime()>i.getTime())return!1;const e=this.Crt(t);return!(e&&i.getTime()>=e.getTime())}Frt(t,i,e){const s=B(i,this.KL)+this.urt.gn;return{tst:t,Yrt:i,Fm:s,ct:e,Ym:s+e}}Qrt(t){return this.urt.Drt.$w===Q.iO?new Date(this.urt.Drt.ant.getTime()+1e3*(t.Fm+t.ct)):this.urt.Drt.ant}Ort(t){const i=this.Qrt(t);return this.urt.Drt.$w===Q.iO?new Date(i.getTime()-1e3*this.jrt):i}Crt(t){let i=1/0;if(this.urt.Drt.$w===Q.iO){const e=this.Brt.lst;e&&(i=this.Qrt(t).getTime()+1e3*t.ct+e.Fet())}const e=this.urt.Drt.ont;return e&&(i=x.min(i,e.getTime())),i===1/0?void 0:new Date(i)}Grt(t,i){return t.tst+i}get Zy(){return this.urt.gn-B(this.Vrt,this.KL)}get ust(){return B(this.Vrt,this.KL)}trt(t){return!1}irt(t,i,e,s,n){const r=this.Wrt(t);if(!r)return Promise.reject(new b("Invalid segment"));const h=this.Hrt(r.tst,i);return h?Promise.resolve(h):hl(this.qrt(r.tst,i,e,s),n)}Hrt(t,i){}qrt(t,i,e,s){return Promise.reject(new b("Not supported"))}Rrt(t){const i=this.Wrt(t);if(i)return this.yrt(i.tst-1)}xrt(t){const i=this.Wrt(t);if(i)return this.yrt(i.tst+1)}Wrt(t){const i=this.yrt(t.tst);if(i&&i.Fm===t.Fm)return i;const e=this.grt(t.Fm);return e&&e.Fm===t.Fm?e:void 0}Xrt(t,i){const e=this.Zrt(t);if(!e||!this.trt(e.tst))return;const s=this.Hrt(e.tst,i);return s?s.Xrt(t):void 0}Zrt(t){return this.yrt(t.Krt)}ert(t){const i=this.Wrt(t);return!!i&&0===i.tst}nrt(t,i){const e=this.Xrt(t,i);return!!e&&0===e.Lnt}rrt(t){const i=this.Wrt(t);if(!i)return!1;const e=this.Mrt();return!!e&&i.tst===e.tst}hrt(t,i){const e=this.Xrt(t,i);if(!e)return!1;const s=this.Mrt();if(!s||e.Krt!==s.tst)return!1;const n=this.Hrt(e.Krt,i);return e.Lnt+1===n.U}Xf(){}constructor(t,i){this.urt=t,this.Brt=i,this.KL=i.vy,this.jrt=i.qet,this.Vrt=i.ust}},fQ=class extends Cn{yrt(t){if(t<0)return;const i=this.Jrt.multiply(t),e=B(i,this.KL),s=this.urt.ct;if(e>=s)return;const n=this.$rt();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.Frt(t,i,s-e)}return isFinite(s)&&e+this.tht>s?this.Frt(t,i,s-e):this.Frt(t,i,this.tht)}wrt(){return 0}vrt(t){const i=x.floor(t/this.tht),e=this.$rt();return void 0!==e&&i>=e?this.yrt(e):this.yrt(i)}prt(t){if(t>=this.urt.ct){const t=x.ceil(this.urt.ct/this.tht)-1,i=this.$rt();return void 0!==i&&t>=i?this.yrt(i):this.yrt(t)}return this.vrt(t)}$rt(){const t=this.Brt.gst;var i;if(void 0!==t)return t-(null!=(i=this.Brt._st)?i:1);const e=this.Brt.iht;return void 0!==e&&e>0?e-1:void 0}Irt(){if(isFinite(this.urt.ct))return this.Mrt()}eht(t,i){return this.Jrt.multiply(t.tst+(i-1))}Ln(){}constructor(t,i){super(i,t);const e=t.sht,s=t.ct;if(void 0===e||void 0===s)throw new b("MultipleSegmentBase does not have a segment duration specified.");this.Jrt=e,this.tht=s}};function _Q(t,i,e){const s=i.length;if(0===s)return-1;let n=0,r=s-1,h=t.nht(i[n]),o=t.rht(i[r]);for(;n<=r&&t.hht(h,e)<=0&&t.hht(e,o)<0;){const a=n+x.floor(t.oht(e,h,o)*(r-n)),u=i[a],c=t.nht(u),l=a+1<s?t.nht(i[a+1]):t.rht(u);if(t.hht(l,e)<=0)n=a+1,h=l;else{if(!(t.hht(e,c)<0))return a;r=a-1,o=c}}return-1}function gQ(t,i){return _Q(wQ.kb,t,i)}r(),r(),r();var wQ=class t{static get kb(){return null!=this.Bet||(this.Bet=new t),this.Bet}nht(t){return t.Fm}rht(t){return t.Ym}hht(t,i){return t.compare(i)}oht(t,i,e){return t.subtract(i).toNumber()/e.subtract(i).toNumber()}},AQ=class extends Cn{yrt(t){if(!(t<0))return t<this.aht.length?this.aht[t].uht:this.cht(t-this.aht.length)}wrt(){if(this.aht.length>0)return B(this.aht[0].Fm,this.KL)}vrt(t){if(this.dht&&B(this.dht.Fm,this.KL)<=t){const i=B(this.dht.Fm,this.KL),e=B(this.dht.ct,this.KL),s=x.floor((t-i)/e);return this.cht(s)}if(this.aht.length>0&&Ua(t,B(this.aht[0].Fm,this.KL),1e-5))return this.aht[0].uht;const i=gQ(this.aht,Se.fromNumber(t*this.KL));return i<0?void 0:this.aht[i].uht}prt(t){if(!this.dht&&this.aht.length>0){const i=this.aht[this.aht.length-1];if(function(t,i,e){return W_(t,i,e)>=0}(t,B(i.Ym,this.KL),1e-5))return i.uht}const i=this.wrt();return i&&t<i?this.aht[0].uht:this.vrt(t)}Irt(){return isFinite(this.urt.ct)?this.Mrt():this.yrt(this.aht.length-1)}eht(t){return this.fht(t)}cht(t){if(!this.dht)return;const i=this.dht.Fm,e=this.dht.ct,s=i.add(e.multiply(t)),n=B(s,this.KL),r=this.urt.ct;if(n>=r)return;const h=this.aht.length+t,o=x.min(B(e,this.KL),n+r);return this.Frt(h,s,o)}fht(t){return t.Yrt.add(this.Vrt)}Ln(){const t=this.Brt.JM.fst;if(!t)throw new b("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this._ht(t)}_ht(t){const i=this.Vrt;this.ght(t,i);const e=this.wht(t);this.Aht(t,i,e.vht,e.Krt)}ght(t,i){const e=this.aht;if(0===t.length)Ri(e);else{const s=t[0],n=s.Fm?Se.fromString(s.Fm,!1).subtract(i):Se.ZERO;let r=0;for(;r<e.length&&e[r].Fm.lessThan(n);)r++;r>0&&e.splice(0,r)}}wht(t){const i=this.aht,e=this.mht;let s=0,n=0;for(;s<t.length&&n<i.length;){const r=t[s].$et||0;if(r<0)break;const h=n+r;if(h>=i.length)break;if(i[h].Fm.greaterThanOrEqual(e))break;if(i[n].uht.tst===n)n=h+1;else for(;n<=h;)i[n].uht.tst=n,n++;0,s++}return{vht:s,Krt:n}}Aht(t,i,e,s){const n=this.aht;let r,h=e,o=s;for(;h<t.length;){const e=t[h],s=Se.fromString(e.ct,!1),a=e.$et||0;let u;if(e.Fm){if(u=Se.fromString(e.Fm,!1).subtract(i),o>0){const t=n[o-1];t.Ym.greaterThan(u)&&(t.ct=u.subtract(t.Fm),t.Ym=t.Fm.add(t.ct))}}else u=o>0?n[o-1].Ym:Se.ZERO;if(a<0){if(h+1===t.length){r={Fm:u,ct:s};break}const e=Se.fromString(t[h+1].Fm,!1).subtract(i);for(;u.lessThan(e);){const t=u.add(s);this.pht(n,o,u,s,t),u=t,o++}}else{const t=o+a;for(;o<=t;){const t=u.add(s);this.pht(n,o,u,s,t),u=t,o++}}h++}o<n.length&&n.splice(o),n.length>0&&(this.mht=n[n.length-1].Fm),this.dht=r}pht(t,i,e,s,n){if(i<t.length){const r=t[i];0,r.ct.equals(s)?r.uht.tst=i:t[i]={Fm:e,ct:s,Ym:n,uht:this.Frt(i,e,B(s,this.KL))}}else t.push({Fm:e,ct:s,Ym:n,uht:this.Frt(i,e,B(s,this.KL))})}constructor(t,i){super(i,t),this.aht=[],this.dht=void 0,this.mht=Se.ZERO,this.Ln()}};r();var vQ=class{get JM(){return this.nk}get qet(){return this.nk&&void 0!==this.nk.qet?this.nk.qet:this.yht?this.yht.qet:0}get ust(){return this.nk&&void 0!==this.nk.ust?this.nk.ust:this.yht?this.yht.ust:Se.ZERO}get lst(){return this.nk&&void 0!==this.nk.lst?this.nk.lst:this.yht?this.yht.lst:this.Gnt.Drt.lst}get vy(){return this.nk&&void 0!==this.nk.vy?this.nk.vy:this.yht&&this.yht.vy?this.yht.vy:1}get ist(){return this.nk&&void 0!==this.nk.ist?this.nk.ist:this.yht?this.yht.ist:void 0}get ast(){return this.nk&&void 0!==this.nk.ast?this.nk.ast:this.yht?this.yht.ast:void 0}get fst(){return this.Mht||(this.Mht=this.Tht()),this.Mht}Tht(){if(this.Nht=this.Dht(),this.Nht)return this.Nht;if(this.yht)return this.yht.fst;throw new b("Missing media segment information.")}Fnt(t){const i=this.ast;if(i){return{Fu:(void 0!==i.Ket?fe.Ah(i.Ket,t.xst[0]):t.xst[0]).href,Jet:i.Jet}}const e=this.ist;if(e)return{Fu:t.xst[0].href,Jet:[0,e[0]-1]}}Ln(t){this.nk=t,this.Nht&&this.Nht.Ln()}Xf(){this.Nht&&(this.Nht.Xf(),this.Nht=void 0)}constructor(t,i,e){this.Mht=void 0,this.Nht=void 0,this.Gnt=t,this.yht=i,this.nk=e}},Pr=class extends vQ{get ct(){return void 0!==this.nk.ct?this.nk.ct/this.vy:this.yht&&mQ(this.yht)?this.yht.ct:void 0}get sht(){return void 0!==this.nk.ct?Se.fromNumber(this.nk.ct):this.yht&&mQ(this.yht)?this.yht.sht:void 0}get _st(){return void 0!==this.nk._st?this.nk._st:this.yht&&mQ(this.yht)?this.yht._st:void 0}get gst(){return void 0!==this.nk.gst?this.nk.gst:this.yht&&mQ(this.yht)?this.yht.gst:void 0}Dht(){return void 0!==this.nk.fst?new AQ(this,this.Gnt):void 0!==this.nk.ct?new fQ(this,this.Gnt):void 0}};function mQ(t){return t instanceof Pr}r();var pQ=class{eL(t){return this.Iht.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,((i,e,s,n)=>{if("$$"===i)return"$";const r=t[e];if(void 0===r)return i;if(void 0===s)return r.toString();let h=function(t,i){switch(i){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===h?i:(h=va(h,Number(s),"0"),h)}))}constructor(t){this.Iht=t}};var yQ=class t extends Pr{get kst(){return this.Sht?this.Sht:this.yht&&this.yht instanceof t?this.yht.kst:void 0}get Cst(){return this.Eht?this.Eht:this.yht&&this.yht instanceof t?this.yht.Cst:void 0}Fnt(t){const i=this.kst;if(!i)return super.Fnt(t);const e=i.eL({Bandwidth:t.JM.zz,RepresentationID:t.JM.o});return{Fu:fe.Sv(e,t.xst[0])}}Znt(t,i){var e;const s=null!=(e=i.Hnt._st)?e:1,n=this.Cst.eL({Bandwidth:i.JM.zz,Number:i.fst.Grt(t,s),RepresentationID:i.JM.o,Time:i.fst.eht(t,s)});return{Fu:fe.Sv(n,i.xst[0])}}Knt(t,i){}get iht(){}constructor(t,i,e){super(t,i,e),this.Sht=e.kst?new pQ(e.kst):void 0,this.Eht=e.Cst?new pQ(e.Cst):void 0}};r();var MQ=class t extends Pr{Znt(t,i){const e=this.nst[t.tst],s=i.xst[0];let n;return n=e.ZT?fe.Ah(e.ZT,s):s,{Fu:n.href,Jet:e.sst}}Knt(t,i){}get nst(){return void 0!==this.nk.nst?this.nk.nst:this.yht&&this.yht instanceof t?this.yht.nst:void 0}get iht(){var t;return null==(t=this.nst)?void 0:t.length}};r(),r(),r(),r();var TQ=class{Xrt(t){const i=this.bht(t.Lnt);if(i&&i.Fm===t.Fm)return i;const e=this.Lht(t.Fm);return e&&e.Fm===t.Fm?e:void 0}},NQ=class extends TQ{get U(){return this.kht.length}bht(t){if(t>=0&&t<this.U)return this.Cht(this.kht[t])}Lht(t){const i=this.xht(t);if(this.kht.length>0){const t=this.kht[0];if(i<=B(t.Fm,this.vy))return this.Cht(t)}const e=gQ(this.kht,Se.fromNumber(i*this.vy));if(!(e<0))return this.Cht(this.kht[e])}Oht(t){const i=this.xht(t);if(this.kht.length>0){const t=this.kht[this.kht.length-1];if(i>=B(t.Ym,this.vy))return this.Cht(t)}return this.Lht(t)}Cht(t){const i=B(t.Fm,this.vy)-this.ust,e=i+this.jht,s=B(t.ct,this.vy);return{Krt:this.Krt,Lnt:t.tst,Fm:e,Yrt:Se.fromNumber(i*this.vy),ct:s,Ym:e+s,zht:[t.Pht,t.Bht]}}xht(t){return t-this.jht+this.ust}constructor(t,i,e,s,n){super(),this.Krt=t,this.vy=i,this.jht=e,this.ust=s,this.kht=n}};r(),r(),r();var DQ=class t{Rht(){return this.$M.qu<this.JM.byteLength}Uht(){const i=this.Qht(),e=this.Fht(),s=this.$M.qu,n=this.JM.byteLength;let r;r=t.Yht(e)?n-s:t.Ght(e);const h=s+r<=n?r:n-s,o=lc(this.JM,this.$M,h);return new SQ(i,Ao(o))}Qht(){const t=this.Fht();if(t.length>7)throw new RangeError("Invalid EBML ID size");let i=0;for(let e=0;e<t.length;e++)i=256*i+t[e];return i}Fht(){const t=F(this.JM,this.$M.Lm());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const i=8-(31-lA(t));return fe.dtt(i<=8&&i>=1,"Incorrect log2 value"),lc(this.JM,this.$M,i)}static Ght(t){if(8===t.length&&224&t[1])throw new k("EBML variable sized integer is too large");let i=0;for(let e=0;e<t.length;e++){const s=t[e];if(0===e){i=s&(1<<8-t.length)-1}else i=256*i+s}return i}static Yht(t){for(const i of IQ)if(ms(t,new T(i)))return!0;return!1}constructor(t){this.JM=t,this.$M=new Vr}},IQ=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],SQ=class{Vht(){return this.Wht.byteOffset}Hht(){return new DQ(this.Wht)}qht(){const t=this.Wht.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.Wht.getUint8(0))throw new RangeError("EMBL integer field value is too large");let i=0;for(let e=0;e<t;e++){i=256*i+this.Wht.getUint8(e)}return i}FW(){if(4===this.Wht.byteLength)return this.Wht.getFloat32(0);if(8===this.Wht.byteLength)return this.Wht.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,i){this.id=t,this.Wht=i}};function EQ(t,i){const e=function(t){const i=new DQ(Ao(t)),e=i.Uht();if(e.id!==LQ)throw new k("Missing WebM EBML header");const s=i.Uht();if(s.id!==kQ)throw new k("Missing WebM SegmentElement");const n=s.Vht(),r=function(t){const i=t.Hht();let e;for(;i.Rht();){const t=i.Uht();if(t.id===CQ){e=t;break}}if(!e)throw new k("Missing WebM InfoElement");return function(t){const i=t.Hht();let e,s=1e6;for(;i.Rht();){const t=i.Uht();t.id===xQ?s=t.qht():t.id===OQ&&(e=t.FW())}if(void 0===e)throw new k("Missing Duration in WebM InfoElement");const n=s/1e9,r=e*n;return{timecodeScale:n,duration:r}}(e)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(i),s=new DQ(Ao(t)).Uht();if(s.id!==jQ)throw new k("Missing WebM CuesElement");const n=function(t,i,e,s){const n=[],r=t.Hht();let h,o;for(;r.Rht();){const t=r.Uht();if(t.id!==zQ)continue;const e=bQ(t);if(!e)continue;const s=e.unscaledTime,a=i+e.relativeOffset;void 0!==h&&n.push({tst:n.length,Fm:h,ct:s.subtract(h),Ym:s,Pht:o,Bht:a-1}),h=s,o=a}if(void 0!==h){0;const t=Se.fromNumber(s/e);n.push({tst:n.length,Fm:h,ct:t.subtract(h),Ym:t,Pht:o,Bht:void 0})}return n}(s,e.segmentOffset,e.timecodeScale,e.duration);return{vy:x.round(1/e.timecodeScale),Xht:n}}function bQ(t){const i=t.Hht(),e=i.Uht();if(e.id!==PQ)throw new k("Missing CueTime in WebM CuePointElement");const s=Se.fromNumber(e.qht()),n=i.Uht();if(n.id!==BQ)throw new k("Missing CueTrackPositions in WebM CuePointElement");const r=n.Hht();let h=0;for(;r.Rht();){const t=r.Uht();if(t.id===RQ){h=t.qht();break}}return{unscaledTime:s,relativeOffset:h}}var LQ=440786851,kQ=408125543,CQ=357149030,xQ=2807729,OQ=17545,jQ=475249515,zQ=187,PQ=179,BQ=183,RQ=241,UQ=class extends Cn{yrt(t){if(0===t)return this.Zht}wrt(){return 0}vrt(t){return this.Zht}prt(t){return this.vrt(t)}Irt(){return this.Zht}eht(t,i){return Se.ZERO}Jnt(t){const i=this.Kht(t);return i&&{Srt:t,Ert:i,brt:i}}Kht(t){const i=this.Zht;return this.Prt(i,t)?i:void 0}Lrt(t){return this.Kht(t)}krt(t){return this.Kht(t)}Ln(){}trt(t){return 0===t&&void 0!==this.Jht}Hrt(t,i){const e=i.xst[0].href;return this.$ht.get(e)}qrt(t,i,e,s){const n=i.xst[0].href;let r=this.tot.get(n);if(void 0===r){const h=i.rY,o=this.iot.i_;if(ln(h))r=this.eot(t,n,e,s,o);else{if(!Dm(h))throw new ce(le.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+h);r=this.rot(t,n,i,e,s,o)}this.tot.set(n,r)}return r}async eot(t,i,e,s,n){const r=this.Jht,h=await s.hot(i,r,e,n),o=this.oot(t,h);return this.$ht.set(i,o),o}oot(t,i){const e=this.Jht,s=Mi.AT(new DataView(i),new Vr);if(s.$w!==xv.FM)throw new b("Invalid segment index");const n=ds.PT(s.JM),r=function(t,i){const e=[];let s=t.JD,n=i+t.$D.toNumber(),r=0;for(const i of t.iI){const t=i.HD,h=Se.fromNumber(i.ct),o=s.add(h);0===i.WD&&e.push({tst:r++,Fm:s,ct:h,Ym:o,Pht:n,Bht:n+t-1}),n+=t,s=o}return e}(n,e[1]+1);return new NQ(t,n.vy,this.urt.gn,B(this.Vrt,this.KL),r)}async rot(t,i,e,s,n,r){const h=e.Fnt(),o=this.Jht,a=n.hot(h.Fu,h.Jet,s,r),u=n.hot(i,o,s,r),[c,l]=await Promise.all([a,u]),d=this.aot(t,l,c);return this.$ht.set(i,d),d}aot(t,i,e){const s=EQ(new T(i),new T(e));return new NQ(t,s.vy,this.urt.gn,B(this.Vrt,this.KL),s.Xht)}Xf(){super.Xf(),this.iot.s_()}constructor(t,i){super(i,t),this.$ht=Qt(),this.tot=Qt(),this.iot=new Po,this.Jht=t.ist,this.Zht=this.Frt(0,Se.ZERO,this.urt.ct)}},QQ=class extends vQ{get _st(){}Znt(t,i){return{Fu:i.xst[0].href}}Knt(t,i){return{Fu:i.xst[0].href,Jet:t.zht}}Dht(){return new UQ(this,this.Gnt)}};r();var FQ=class extends gg{constructor(){super(xl.knt)}};r();var Bn=class extends i{get JM(){return this.nk}get xst(){return this.uot}cot(){var t,i;return null!=(i=this.Brt)?i:null==(t=this.tit)?void 0:t.cot()}lot(t){const i=this.Gnt,e=this.tit&&this.tit.cot();this.nk.zst?this.Brt=new yQ(i,e,this.nk.zst):this.nk.jst?this.Brt=new MQ(i,e,this.nk.jst[0]):this.nk.Ost?this.Brt=new QQ(i,e,this.nk.Ost):t&&!e&&(this.Brt=new QQ(i,e,void 0))}fot(t,i){this.nk=t,this.uot=t.xst&&t.xst.length>0?dQ(t.xst.map((t=>t.Fu)),i):i.slice(),this.Brt&&(t.zst?this.Brt.Ln(t.zst):t.jst?this.Brt.Ln(t.jst[0]):t.Ost&&this.Brt.Ln(t.Ost))}Snt(){var t;return null==(t=this._ot)?void 0:t.got}$nt(){var t;return null==(t=this._ot)?void 0:t.wot}Aot(t){const i=this.vot,e=this.Gnt.ct,s=this._ot,n=this.mot(t);s&&Ua(e,i,1e-5)&&WQ(s,n)||(this.vot=e,this._ot=n,this.mo(new FQ))}Xf(){this.Bo(),this.Brt&&(this.Brt.Xf(),this.Brt=void 0)}constructor(t,i,e){super(),this.Brt=void 0,this.vot=1/0,this._ot=void 0,this.tit=i,this.fot(t,e)}};function YQ(t){let i,e;for(const e of t){const t=e.Snt();if(t){i=t.gn;break}}if(void 0!==i){for(let i=t.length-1;i>=0;i--){const s=t[i].Snt();if(s){e=s.bn;break}}return void 0!==e?{gn:i,bn:e}:void 0}}function GQ(t){if(0===t.length)return;let i=0,e=1/0;for(const s of t){const t=s.Snt();if(!t)return;if(i=x.max(i,t.gn),e=x.min(e,t.bn),i>=e)return}return{gn:i,bn:e}}function VQ(t){let i;for(const e of t){const t=e.$nt();t&&(!i||t.getTime()<i.getTime())&&(i=t)}return i}function WQ(t,i){return function(t,i){return t&&i?t.getTime()===i.getTime():t===i}(t.wot,i.wot)&&function(t,i){return t&&i?Ua(t.gn,i.gn,1e-5)&&Ua(t.bn,i.bn,1e-5):t===i}(t.got,i.got)}var HQ=class extends bn{get nnt(){return this.pot}get Ast(){return this.nnt.reduce(((t,i)=>{for(const e of i.Ast)na(t,e)||t.push(e);return t}),[])}get utt(){return this.Ast.length>0?this.Ast[0]:""}get $w(){return this.pot[0].$w}get o(){return this.ym}get Ynt(){return this.urt.Ynt}get rY(){return this.pot[0].rY}get Gnt(){return this.urt}get Kst(){return Nh(this.nnt,(t=>t.Kst))}Snt(){return GQ(this.pot)}$nt(){let t;for(const i of this.pot){const e=i.$nt();e&&(!t||e.getTime()<t.getTime())&&(t=e)}return t}cn(){this.Bo();for(const t of this.pot)t.rn(xl.knt,this.bnt)}constructor(t,i,e){super(),this.urt=t,this.ym=i,this.pot=e.slice();for(const t of e)t.ln(xl.knt,this.bnt)}};r();var qQ=class extends gg{constructor(){super(xl.xnt)}};function XQ(t){const i=[];for(const e of t){let t;const s=e.Qst;void 0===s||(t=Gr(i,(t=>t.o===s))),t||(t={o:s,nnt:[]},i.push(t)),t.nnt.push(e)}return i}r();var ZQ=class extends bn{get nnt(){return this.pot}get yot(){return this.Mot}get rnt(){return this.Pnt.JM.rnt}get ct(){return this.Pnt.ct}get bn(){return this.gn+this.ct}get hnt(){return this.Pnt.JM.hnt||[]}get o(){return this.Pnt.o}get Ont(){return this.Tot}get Ynt(){return this.Not}get Dot(){return this.Not.Iot(this)}get Gnt(){return this}get Sot(){return this.Not.Eot(this)}get bot(){return this.Lot(1/0,x.min)}get kot(){return this.Lot(0,x.max)}Lot(t,i){if(0===this.Mot.length)return;let e=t;for(const t of this.Mot){const s=t.$w;if(s===Tw.Gv||s===Tw.Yv){const s=t.Ent;if(void 0===s)return;e=i(e,s)}}return e}get gn(){return this.Pnt.gn}get NS(){return this.Ynt.NS}Cot(){this.Tot||(this.Tot=!0,this.mo(new qQ),this.cn())}async Ln(t,i){0===this.pot.length?(await this.xot(this.Pnt.nnt,t,i),this.Oot(this.pot),Pi(i)):await this.jot(t,i)}async xot(t,i,e){for(const s of t){const t=new lQ(this,s);try{await t.Ln(i,e),this.pot.push(t)}catch(t){yo(t)}}}Oot(t){const i=XQ(t);for(const t of i){const i=new HQ(this,t.o,t.nnt);this.Mot.push(i)}}async jot(t,i){for(const e of this.pot)await e.Ln(t,i)}Snt(){return this.Pnt.Snt()}$nt(){return this.Pnt.$nt()}cn(){this.Bo(),this.Pnt.rn(xl.knt,this.bnt);for(const t of this.Mot)t.cn();for(const t of this.pot)t.cn();Ri(this.pot),Ri(this.Mot)}constructor(t,i){super(),this.pot=[],this.Mot=[],this.Tot=!1,this.Not=t,this.Pnt=i,this.Pnt.ln(xl.knt,this.bnt)}};r();var Mr,KQ=class extends gg{constructor(){super(t.OA)}};r(),r(),(Mr||(Mr={})).zot="Pot";var JQ=class extends gg{constructor(){super(Mr.zot)}};r(),r(),r(),r();var $Q=class extends Bn{get jnt(){return this.znt}get Gnt(){return this.znt.Gnt}get Drt(){return this.znt.Drt}get rY(){return this.nk.rY||this.znt.rY}get Hnt(){return this.cot()}get fst(){return this.Hnt.fst}trt(t){const i=this.rY;return!(!ln(i)&&!Dm(i))&&this.fst.trt(t.tst)}irt(t,i,e,s){return this.fst.irt(t,this,i,e,s)}Fnt(){return this.Hnt.Fnt(this)}Znt(t){return this.Hnt.Znt(t,this)}Knt(t){return this.Hnt.Knt(t,this)}Jnt(){return this.Bot}mot(t){const i=this.fst,e=i.Jnt(t),s=e&&function(t,i){const{Ert:e,brt:s,Srt:n}=t,r=e.Fm;let h;const o=i.Qrt(s);if(o.getTime()<=n.getTime())h=s.Ym;else{const t=(o.getTime()-n.getTime())/1e3,i=x.max(s.ct-t,0);h=s.Fm+i}return{gn:r,bn:h}}(e,i),n=this.fst.$nt(t,e);return this.Bot=e,{Srt:t,got:s,wot:n}}Ln(t){this.fot(t,this.znt.xst)}constructor(t,i){super(t,i,i.xst),this.Bot=void 0,this.znt=i,this.lot(!0)}},tF=class extends Bn{get Kst(){return this.art}get Gnt(){return this.urt}get Drt(){return this.urt.Drt}get Qst(){return this.nk.Qst}get rY(){var t;return this.nk.rY||(null==(t=this.art[0])?void 0:t.JM.rY)||""}Ln(t){this.fot(t,this.urt.xst);const i=t.Kst||[];if(this.art.length!==i.length)throw new b("Expected "+this.art.length+' representations in adaptation set "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.art[t].Ln(i[t])}Aot(t){for(const i of this.art)i.Aot(t);super.Aot(t)}mot(t){return{Srt:t,got:GQ(this.art),wot:VQ(this.art)}}Xf(){for(const t of this.art)t.Xf();super.Xf()}constructor(t,i){super(t,i,i.xst),this.urt=i,this.lot(!1),this.art=t.Kst.map((t=>new $Q(t,this)))}},iF=class extends Bn{get nnt(){return this.pot}get yot(){return this.Mot}get Gnt(){return this}get Drt(){return this.Rot}get o(){return this.nk.o}get gn(){return this.wI}get ct(){return this.JL}Ln(t,i){this.fot(t,this.Rot.xst),this.JL=i;const e=t.nnt||[];if(this.pot.length!==e.length)throw new b("Expected "+this.pot.length+' adaptation sets in period "'+t.o+'", found '+e.length);for(let t=0;t<e.length;t++)this.pot[t].Ln(e[t])}Aot(t){for(const i of this.pot)i.Aot(t);super.Aot(t)}mot(t){return{Srt:t,got:GQ(this.pot),wot:VQ(this.pot)}}Xf(){for(const t of this.pot)t.Xf();super.Xf()}constructor(t,i,e,s){super(i,void 0,t.xst),this.Mot=[],this.Rot=t,this.wI=e,this.JL=s,this.lot(!1),this.pot=(i.nnt||[]).map((t=>new tF(t,this))),this.Mot=XQ(this.pot)}},eF=new Date("2000-01-01"),sF=class extends i{get JM(){return this.nk}get $w(){return this.nk.$w||Q.tO}get ant(){return this.Uot||this.nk.ant||this.Ant}get ont(){return this.nk.ont}get Nrt(){var t,i;return null!=(i=null==(t=this.Qot)?void 0:t.ignoreAvailabilityWindow)&&i}get fnt(){return this.Fot}get xst(){return this.uot}get unt(){return this.Yot}get wnt(){return this.Got}get Ant(){return this.nk.Ant||this._n}get lst(){return this.nk.lst}get Vot(){return this.Wot}get Hot(){return this._n}Snt(){var t;return null==(t=this._ot)?void 0:t.got}$nt(){var t;return null==(t=this._ot)?void 0:t.wot}Ln(t,i,e,s){var n;const r=void 0!==this.nk&&this.nk.$w===Q.iO;this.nk=t,this.qot=i,this.Wot=null!=s?s:e,this._n=e;const h=[rw(i)];this.uot=t.xst&&t.xst.length>0?dQ(t.xst.map((t=>t.Fu)),h):h,this.Yot=t.unt&&t.unt.length>0?dQ(t.unt,this.uot):[];const o=this.Yot.map((t=>t.href)),a=i.href;na(o,a)||(this.Yot.push(i),o.push(a));const u=this.Xot.href;na(o,u)||(this.Yot.push(this.Xot),o.push(u)),this.Fot=null==(n=t.fnt)?void 0:n.Qet();const c=t.$w===Q.iO,l=function(t,i,e){const s=[];for(let e=0;e<t.length;e++){const n=t[e];let r;if(n.gn)r=n.gn.Qet();else if(e>0&&t[e-1].ct){r=s[e-1]+t[e-1].ct.Qet()}else{if(0!==e||i)break;r=0}s.push(r)}const n=[];for(let i=0;i<s.length-1;i++)n.push({JM:t[i],gn:s[i],ct:s[i+1]-s[i]});if(s.length>0){const r=s.length-1,h=t[r],o=s[r];let a=1/0;i||(a=h.ct?h.ct.Qet():e-o),n.push({JM:h,gn:o,ct:a})}return n}(t.wnt,c,this.Fot);this.Zot(l,r,c),this.Aot(e)}Zot(t,i,e){const s=this.Got;if(0===t.length)return void Ri(s);const n=t[0].JM.o;let r=0;for(;r<s.length&&s[r].o!==n;)r++;const h=s.splice(0,r);for(const t of h)t.Xf();if(i&&!e&&s.length>0&&t.length>0){var o;const i=null!=(o=nF(s[0].JM))?o:aa.zp;var a;const e=null!=(a=nF(t[0].JM))?a:aa.zp;if(e.mp(i)){const n=e.bp(i);void 0!==this.Fot&&(this.Fot+=n.vp());for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];e.gn=t.gn,uF(e.JM,t.JM)}i===t.length-1&&(e.ct+=n.vp())}}}for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];0,t.Ln(e.JM,e.ct)}else s.push(new iF(this,e.JM,e.gn,e.ct))}}Aot(t){for(const i of this.Got)i.Aot(t);const i=this._ot,e=this.mot(t);i&&WQ(i,e)||(this._ot=e,this.mo(new FQ))}mot(t){return{Srt:t,got:YQ(this.Got),wot:VQ(this.Got)}}Irt(){if(0===this.Got.length)return;const t=this.Got[this.Got.length-1];if(isFinite(t.ct))return;if(0===t.nnt.length)return;const i=t.nnt[0];if(0===i.Kst.length)return;const e=i.Kst[0].fst,s=e.Irt();return s?{uht:s,ont:e.Crt(s)}:void 0}Xf(){this.Bo();for(const t of this.Got)t.Xf()}constructor(t,i,e,s,n){if(super(),this._ot=void 0,this.Fot=void 0,this.Uot=void 0,this.Got=[],this.Xot=i,this.Qot=n,this.Ln(t,e,s),t.$w===Q.iO){const t=this.Irt();t&&t.ont&&t.ont.getTime()<eF.getTime()&&(this.Uot=new Date(this.Ant.getTime()-1e3*(t.uht.Fm+t.uht.ct)),this.Aot(s))}}};function nF(t){let i=oF(t);var e,s;for(const s of null!=(e=t.nnt)?e:[])i=bv(i,rF(s));for(const e of null!=(s=t.hnt)?s:[])i=bv(i,aF(e));return i}function rF(t){let i=oF(t);for(const e of t.Kst)i=bv(i,hF(e));return i}function hF(t){return oF(t)}function oF(t){let i;if(void 0!==t.zst&&(i=bv(i,aF(t.zst))),void 0!==t.Ost&&(i=bv(i,aF(t.Ost))),void 0!==t.jst)for(const e of t.jst)i=bv(i,aF(e));return i}function aF(t){var i,e;return aa.xp(null!=(i=t.ust)?i:Se.ZERO,null!=(e=t.vy)?e:1)}function uF(t,i){if(dF(t,i),t.gn=i.gn,void 0!==t.nnt&&void 0!==i.nnt&&t.nnt.length===i.nnt.length)for(let e=0;e<t.nnt.length;e++)cF(t.nnt[e],i.nnt[e]);if(void 0!==t.hnt&&void 0!==i.hnt&&t.hnt.length===i.hnt.length)for(let e=0;e<t.hnt.length;e++)fF(t.hnt[e],i.hnt[e])}function cF(t,i){if(dF(t,i),void 0!==t.Kst&&void 0!==i.Kst&&t.Kst.length===i.Kst.length)for(let e=0;e<t.Kst.length;e++)lF(t.Kst[e],i.Kst[e])}function lF(t,i){dF(t,i)}function dF(t,i){if(void 0!==t.zst&&void 0!==i.zst&&fF(t.zst,i.zst),void 0!==t.Ost&&void 0!==i.Ost&&fF(t.Ost,i.Ost),void 0!==t.jst&&void 0!==i.jst&&t.jst.length===i.jst.length)for(let e=0;e<t.jst.length;e++)fF(t.jst[e],i.jst[e])}function fF(t,i){t.vy=i.vy,t.ust=i.ust}r();var _F=class{async VV(t){await this.Kot(t,this.LS,this.Jot,this.$ot).catch(Ah)}iat(){return new Date(Yo()+this.eat)}async Kot(t,i,e,s){let n;if(s&&(n=await this.sat(i,s,e)),void 0===n){Pi(e);for(const s of t)if(n=await this.nat(i,s,e),void 0!==n)break}this.eat=void 0===n?0:n-Yo()}async nat(t,i,e){switch(i.Zet){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=i.zy;if(s)return await this.sat(t,s,e);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=i.zy;if(t){const i=new Date(t).getTime();if(!j(i))return i}break}default:return}}async sat(t,i,e){try{const s=await t.BI({Fu:i,mS:Kc.GET,pS:Rt.Eu,i_:e}),n=await s.kS(),r=new Date(n).getTime();if(!j(r))return r}catch(t){yo(t)}}constructor(t,i,e){this.LS=t,this.Jot=i,this.$ot=e,this.eat=0}},gF=class extends i{get ont(){return this.Pnt&&this.Pnt.ont}get ant(){return this.Pnt&&this.Pnt.ant}get Nrt(){return this.Pnt&&this.Pnt.Nrt}get o(){return this.Pnt&&this.Pnt.JM.o}get Vot(){var t;return null==(t=this.Pnt)?void 0:t.Vot}get rat(){var t;return null==(t=this.Pnt)?void 0:t.Hot}get unt(){return this.Pnt?this.Pnt.unt.map((t=>t.href)):[this.oat]}get oat(){return this.aat.href}get lnt(){return this.Pnt&&this.Pnt.JM.lnt}get dnt(){return this.Pnt&&this.Pnt.JM.dnt}get fnt(){return this.Pnt&&this.Pnt.JM.fnt}get _nt(){return this.Pnt&&this.Pnt.JM._nt}get gnt(){var t,i;const e=(null==(t=null==(i=this.Pnt)?void 0:i.JM.gnt)?void 0:t.Fet())||0;return x.max(e,AF)}get W_(){return this.uat}dat(t){const i=this.W_;this.uat=t,i!==this.W_&&this.mo(new JQ)}get wnt(){return this.Got}get fat(){return this.$w===Q.iO?this.drt:this._at}get gat(){const t=this.fat;if(void 0!==t)for(const i of this.wnt)if(i.gn<=t&&i.bn>t)return i}get Nst(){return this.Pnt&&this.Pnt.JM.Nst}get Ant(){return this.Pnt&&this.Pnt.Ant}get bot(){for(let t=this.Got.length-1;t>=0;t-=1){const i=this.Got[t].bot;if(i)return i}}get drt(){const t=this.bot;if(void 0===t)return;const i=t-this.wat;return x.max(i,this._at)}get _at(){for(const t of this.Got){const i=t.Int;if(void 0!==i)return i}}get NS(){return Boolean(this.Aat.NS)}get wat(){const t=this.Pnt&&this.Pnt.JM.vnt;return t?t.Qet():this.$w===Q.iO?this.vat:0}get vat(){return this.Aat.vat?this.Aat.vat:1.5*this._nt.Qet()}get lst(){return this.Pnt&&this.Pnt.lst}get $w(){return this.Pnt?this.Pnt.$w:void 0}async Ln(t,i,e){const s=[],n=[],r=t.cnt?fe.Ah(t.cnt,this.aat):this.aat;void 0===this.Pnt?(await this.mat.VV(t.mnt),this.Pnt=new sF(t,this.aat,r,this.iat(),this.Qot),this.Pnt.ln(xl.knt,this.Ds)):this.Pnt.Ln(t,r,this.iat(),i);const h=this.Pnt.wnt;let o;if(0===h.length)o=this.Got.slice(),Ri(this.Got);else{const t=h[0].o;let i=0;for(;i<this.Got.length&&this.Got[i].o!==t;)i++;o=this.Got.splice(0,i);for(let t=0;t<h.length;t++){const i=h[t];let r;t<this.Got.length?r=this.Got[t]:(r=new ZQ(this,i),s.push(r)),n.push(r.Ln(this.pat,e))}}await Promise.all(n),this.Got.push(...s);for(const t of o)t.Cot();this.mo(new KQ)}iat(){return this.mat.iat()}Eot(t){const i=this.Got.indexOf(t);if(i>0)return this.Got[i-1]}Iot(t){const i=this.Got.indexOf(t);if(i>=0&&i+1<this.Got.length)return this.Got[i+1]}Snt(){return this.Pnt?this.Pnt.Snt():void 0}$nt(){return this.Pnt&&this.Pnt.$nt()}Aot(t){this.Pnt&&this.Pnt.Aot(t)}cn(){this.Bo(),this.yat=void 0,this.dat(!1);for(const t of this.Got)t.cn();Ri(this.Got),this.Pnt&&this.Pnt.Xf()}constructor(t,i,e,s,n){super(),this.Pnt=void 0,this.uat=!0,this.Got=[],this.yat=void 0,this.Aat=t,this.aat=t.tA,this.pat=i,this.LS=e,this.Mat=s,this.mat=new _F(this.LS,this.Mat,this.Aat.Tat),this.Qot=n}},wF=class{get Ynt(){return this.Not}constructor(t,i,e,s,n){this.Not=new gF(t,i,e,s,n)}},AF=1e3,vF=class{get br(){return this.Pnt}get W(){return this.Nat||(this.Nat=this.Ztt(this.Dat.i_),W(this.Nat)),this.Nat}async Ztt(t){this.Pnt.Ynt.mo(new ie);try{await this.Iat(t),this.Pnt.Ynt.dat(!0)}catch(t){throw yo(t),this.Nat=void 0,this.Pnt.Ynt.dat(!1),new b("The provided MPEG-DASH document could not be loaded - "+t.message)}this.Sat=this.Eat(this.Dat.i_)}async Eat(t){try{for(;this.Pnt.Ynt.$w===Q.iO;)await hl(this.bat,t)}catch(t){}}get bat(){return this.Pnt.Ynt.rat&&this.Pnt.Ynt.$w===Q.iO?this.Lat(this.Dat.i_):this.W}async Cat(t){Pi(t);const i=this.xat();if(i>0){const e=x.min(i,2147483647);await be(e,t)}try{await this.Iat(t),this.Pnt.Ynt.dat(!0)}catch(t){throw new b("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.Oat=void 0}}xat(){const t=this.Pnt.Ynt.iat().getTime()-this.Pnt.Ynt.Vot.getTime();return this.Pnt.Ynt.gnt-t}jat(t){const i=this.Pnt.Ynt.$nt();if(i){const e=i.getTime()-t.getTime();if(e>0)return e}this.Pnt.Ynt.Aot(t);const e=this.Pnt.Ynt.$nt();return e?e.getTime()-t.getTime():NaN}async Lat(t){this.Oat||(this.Oat=this.Cat(t));const i=new Po;i.n_(t);try{await Promise.race([this.Oat,this.zat(i.i_)].filter(z_))}catch(t){Ah(t)}finally{i.s_()}}zat(t){const i=this.Pnt.Ynt.iat(),e=this.jat(i);if(!j(e)&&!this.br.Ynt.Nrt)return this.Pat(e,t)}async Pat(t,i){await be(t,i);const e=this.Pnt.Ynt.iat();this.Pnt.Ynt.Aot(e)}async Bat(t,i){const e=await this.Uat.Rat(t,{},i);return(new iQ).pnt(e.Qat,e.CS)}cn(){return this.Dat.s_(),this.Sat=void 0,this.Nat=void 0,this.Oat=void 0,this.Pnt.Ynt.cn(),Promise.resolve()}constructor(t,i,e,s,n){this.Dat=new Po,this.Iat=async t=>{try{const i=this.Pnt.Ynt.iat(),e=await this.Bat(this.Pnt.Ynt.unt,t);await this.Pnt.Ynt.Ln(e,i,t)}catch(t){throw zt(t)&&this.Pnt.Ynt.dat(!1),t}},this.Uat=s,this.Pnt=new wF(t,i,e,this.Dat.i_,n)}};r(),r();var mF=class extends gg{constructor(t,i){super("Fat"),this.Yat=t,this.Gat=i}},pF=class extends i{get Gat(){return this.Vat}get $w(){return this.a0}get Z(){return this.Dw.slice()}ZI(t){t&&this.Vat!==t&&this.Wat(t)}KI(t){this.Vat===t&&this.Wat(void 0)}Wat(t){this.Vat=t,this.mo(new mF(this,this.Vat))}cn(){this.Bo();for(const t of this.Dw)t.Qst=void 0;Ri(this.Dw)}constructor(t,i){super(),this.Vat=void 0,this.a0=t,this.Dw=i;for(const t of this.Dw)t.Qst=this}};r(),r();var yF=class extends Ha{ha(){return new MF(this.Uw.map((t=>t.oa)))}constructor(t,i){super(Os.Mw),this.Uw=t||[],this.Lt=i}},MF=class extends gg{constructor(t){super("targetqualitychanged"),this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}};r();var TF=class extends bo{ha(){return new NF(this.quality.oa)}constructor(t){super(Os.QUALITY_UNAVAILABLE),this.quality=t}},NF=class extends te{constructor(t){super("qualityunavailable"),this.quality=t}};r();var DF=class extends gg{constructor(){super(Os.NO_QUALITY)}};function IF(t){return{zz:t.zz,utt:t.Ast,Ti:SF(t)?t.Ti:0,$w:SF(t)?Tw.Yv:Tw.Gv,ji:SF(t)?t.ji:0}}function SF(t){const i=t;return void 0!==i.Ti&&void 0!==i.ji}r();var Eu,EF=0,bF=class extends i{get Rw(){return this.znt.Ust.map(LF).filter(z_)}Hat(t){if(!this._m.Am(t))return;t.KI();const i=this.qat();if(this.Xat&&na(this.Xat,t)){const t=this.Xat.filter((t=>t.zit));0===t.length&&i.length>0?this.Qw=i:this.Qw=t}else this.Qw=i;this.mo(new TF(t))}qat(){const t=[];for(const i of this._m.Nw)i.zit&&t.push(i);return t}get Pw(){return this.Zat}Kat(t){this.Zat=t.Vnt,this.mo(t)}get jnt(){return this.znt}get Rt(){return this.Le}set Rt(t){this.Dm(t)}get oa(){return this.Ua||(this.Ua=Di(this)),this.Ua}get Qst(){return this.Jat}set Qst(t){this.Jat=t}get o(){return this.ym}get Bw(){return this.Mm}get zt(){return this.s0}get gs(){return this.$L}get dh(){return this.Tm}set dh(t){t!==this.Tm&&(this.Tm=t,this.mo(new Oe(this)))}get Xw(){return this.Rt?"enabled":"disabled"}get Qw(){return this.Xat}set Qw(t){let i=[];if(t){const e=(null!=t?t:[]).filter((t=>{const i=this.Pw?IF(this.Pw):void 0;return fe.Ys.stt(i,IF(t))}));if(0===e.length)return;i=e.filter((t=>t.zit))}else i=this.qat();0===i.length&&this.mo(new DF),this.Xat=t&&this._m.Am(t)?t:void 0,this.$at=this.tut(this.Xat),this.mo(new yF(t,this))}get iut(){return this.$at}tut(t){if(!t||0===t.length)return;const i=[];for(const e of this.Kst)for(const s of t)s===e.Vnt&&s.zit&&i.push(e);return i}get Uw(){return this._m}get Kst(){return this.jnt&&this.jnt.Kst}get eut(){return this.sut}Dm(t){this.Le=t,this.Jat&&(t?this.Jat.ZI(this):this.Jat.KI(this))}nut(t){this.Le=t,this.rut!==t&&(this.rut=t,this.mo(new de(this)))}cn(){for(const t of this._m.Nw)t.rn("update",this.hut);this._m.Wn()}constructor(t,i,e="alternative"){super(),this.Zat=void 0,this.Le=!1,this.Ua=void 0,this.Jat=void 0,this.ym="",this.rut=!1,this._m=new Uw,this.Xat=void 0,this.$at=void 0,this.hut=()=>this.mo(new Oe(this)),this.znt=t,this.ym=String(EF++),this.Mm=mu(),this.s0=e,this.$L=t.X5,this.Tm=t.dh,this.sut=t.$w;for(const t of i)t.ln("update",this.hut),this.Uw.gm(t)}};function LF(t){if("urn:mpeg:dash:role:2011"===t.Zet)return kF(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.Zet){if("1"===t.zy)return Yu.Yw;if("2"===t.zy)return Yu.Vw}}function kF(t){if(void 0!==(null==t?void 0:t.zy))switch(t.zy){case"caption":return Yu.Fw;case"sign":return Yu.Gw;case"description":return Yu.Yw;case"enhanced-audio-intelligibility":return Yu.Vw;default:return}}r(),function(t){t[t.QR=0]="QR",t[t.out=1]="out",t[t.aut=10]="aut",t[t.uut=11]="uut",t[t.cut=12]="cut",t[t.lut=13]="lut",t[t.fut=14]="fut",t[t._ut=15]="_ut",t[t.gut=20]="gut",t[t.wut=21]="wut",t[t.Aut=22]="Aut",t[t.vut=23]="vut",t[t.mut=24]="mut",t[t.yut=30]="yut",t[t.Mut=31]="Mut",t[t.Tut=32]="Tut",t[t.Nut=33]="Nut",t[t.Dut=34]="Dut",t[t.Iut=35]="Iut",t[t.Sut=40]="Sut",t[t.Eut=41]="Eut",t[t.but=42]="but",t[t.Lut=43]="Lut",t[t.kut=44]="kut",t[t.Cut=50]="Cut",t[t.xut=51]="xut",t[t.Out=60]="Out",t[t.jut=61]="jut",t[t.zut=62]="zut",t[t.Put=63]="Put",t[t.But=70]="But",t[t.Rut=71]="Rut",t[t.Uut=72]="Uut",t[t.Qut=73]="Qut",t[t.Fut=74]="Fut",t[t.Yut=75]="Yut",t[t.Gut=76]="Gut",t[t.Vut=77]="Vut",t[t.Wut=90]="Wut",t[t.Hut=91]="Hut"}(Eu||(Eu={})),r(),r();var CF,Ar,xF=class extends gg{constructor(i,e,s){super(t.TA),this.currentTime=i,this.initDataType=e,this.initData=s}};function jr(t,i,e,s,n){let r=[],h=[];for(const t of i)t.$w===Tw.Gv?r=r.concat(t.Z):t.$w===Tw.Yv&&(h=h.concat(t.Z));return[OF(t,r,e,s,null==n?void 0:n.preferredAudioCodecs),jF(t,h,e,s,null==n?void 0:n.preferredVideoCodecs)].filter(z_)}function OF(t,i,e,s,n){const r=Gr(s||[],(t=>t.eut===Tw.Gv&&t.Rt)),h=[PF(r,e,t),BF(r),RF(r,n),UF(),t=>{const i=t.filter((t=>"main"===t.zt));return i.length>0?i:t}];return zF(i,h)}function jF(t,i,e,s,n){const r=Gr(s||[],(t=>t.eut===Tw.Yv&&t.Rt)),h=[PF(r,e,t),RF(r,n),UF(),t=>{const i=t.filter((t=>"main"===t.zt));return i.length>0?i:t}];return zF(i,h)}function zF(t,i){if(0===t.length)return;let e=t;for(const t of i){if(1===e.length)return e[0];e=t(e)}return e[0]}function PF(t,i,e){return s=>{const n=t?t.jnt.o:void 0;if(!z_(n))return s;const r=null==i?void 0:i.rnt,h=e.rnt,o=r&&h&&r.zy===h.zy,a=Gr(s,(t=>t.jnt.o===n));return o&&a?[a]:s}}function BF(t){return i=>{const e=t?t.gs:"",s=i.some((t=>""!==t.gs))?i.filter((t=>""!==t.gs)):i;if(""===e)return s;const n=Gr(s,(t=>t.gs===e));return n?[n]:s}}function RF(t,i){return e=>{if(void 0===t&&i&&i.length>0)for(const t of i){const i=e.filter((i=>i.Uw.Nw.some((i=>qt(i.Ast,t)))));if(i.length>0)return i}return e}}function UF(){return t=>{let i=[],e=-1/0;for(const s of t){const t=s.jnt.JP;t>e?(e=t,i=[s]):t===e&&i.push(s)}return i}}r(),r(),function(t){t.qut="api",t.Xut="start"}(CF||(CF={})),r(),(Ar||(Ar={})).Zut="Kut",r();var QF=class extends gg{constructor(i){super(t.jA),this.error=i}};function FF(t){return void 0!==t.Z_}function YF(t,i){const e=t.ji&&i.ji,s=t.Ti&&i.Ti;if(e||s){if(e&&s)return t.ji*t.Ti-i.ji*i.Ti;if(e)return t.ji-i.ji;if(s)return t.Ti-i.Ti;return(t.ji||1)*(t.Ti||1)-(i.ji||1)*(i.Ti||1)}return 0}function GF(t,i){return YF(t,i)||function(t,i){return t.zz-i.zz}(t,i)}r(),r();var VF=class t{Jut(i,e,s,n){let r=t.sortByQuality(i);if(void 0!==this.$ut&&void 0===e&&i.length>1){const i=t.tct(r,this.$ut);i&&(r=i)}const h=this.ict(r,e,s,n);return h.length?h[h.length-1]:r[0]}ict(i,e,s,n){var r;const h=t.sortByQuality(i),o={ect:void 0===n||this.nct.sct?this.nct.ect:n,Z_:FF(s)&&s.Z_?s.Z_:1,rct:s.ji,hct:s.Ti,act:null==(r=this.uct)?void 0:r.restrictToPlayerSize};let a=h;for(const t of this.cct)a=t(a,e,o,this.wtt,this.lct);return a}static dct(i){return t.sortByQuality(i)[0]}static fct(i,e){var s;return e?t.dct(null!=(s=t.tct(i,e))?s:i):t.dct(i)}static tct(t,i){for(const e of i){const i=t.filter((t=>qt(t.utt,e)));if(i.length>0)return i}}static sortByQuality(t){const i=[...t];return i.sort(GF),i}constructor(t,i,e,s,n,r){this.cct=t,this.nct=i,this.wtt=e,this.uct=s,this.$ut=n,this.lct=r}};r();var WF={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},HF=class{_ct(t,i,e){const s=this.gct.maxRetries===1/0?WF:this.gct;return hu((()=>this.wct(t,i,e)),e,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async wct(t,i,e){let s;for(const n of t)try{const t=new nc({Fu:n,pS:Rt.Eu,vS:i,NS:this.Act,mS:Kc.GET,$w:zu.rS,MS:jo.Hv,i_:e,YI:3e4,yS:5e3}),s=await this.LS.BI(t),r=await s.kS(e);return{Qat:r,vct:n,CS:s.CS}}catch(t){s=t}throw s}constructor(t,i,e=WF){this.LS=t,this.Act=i,this.gct=e}};r();var qF=class{async Rat(t,i,e){let s;for(const n of this.mct)try{return await n.Rat(t,i,e)}catch(t){yo(t),s=t}throw s}constructor(t){this.mct=t}},XF=class{async Rat(t,i,e){const s=await this.pct.Wit(t);if(s)return{Qat:s.data,vct:s.locationURL,CS:s.responseURL};throw new b("Manifest fetch from cache unsuccesful")}constructor(t){this.pct=t}},ZF=class{async Rat(t,i,e){return await this.yct._ct(t,i,e)}constructor(t){this.yct=t}};function KF(t,i){return new qF([new XF(i),new ZF(t)])}var JF=class{async Rat(t,i,e){const s=await this.Uat.Rat(t,i,e);return await this.Mct(s),s}async Mct(t){await this.Tct.iet({key:Ti(t.vct),locationURL:Wa(t.vct),responseURL:Wa(t.CS),data:t.Qat,references:[this.Nct.o]})}constructor(t,i,e){this.Uat=t,this.Tct=i,this.Nct=e}};r();var $F=class extends gg{constructor(){super(t.PA)}};r();var tY=class extends gg{constructor(){super(t.zA)}};r(),r();var $n=class extends ai{Dct(t){return t.cg=Ot.LOADED,this.tt(t),t}Ict(t){for(const i of this.Z.Nw)if(i.qw===t)return i}constructor(){super()}};function iY(t,i){return""===i?t:t+" "+i}r(),r(),r();var eY=class extends Hn{get oa(){return this.Ua||(this.Ua=function(t){return Ou(Rh(t),{get attributes(){return t.TI},get eventID(){var i;return""+(null!=(i=t.Sct)?i:"")}})}(this)),this.Ua}op(t){return this.O===t.O}constructor(t,i,e,s,n){super(t,i,e,!1,null==n?void 0:n.toString()),this.TI=s,this.Sct=n}},sY=class extends $n{Ect(t){const i=this.ES.SS(Pt.XM,"","","",void 0,Ks.EVENT_STREAM);return i.qw=t,this.Dct(i),i}bct(t,i,e){const s=t.Zet;var n;const r=null!=(n=t.zy)?n:"";var h;const o=null!=(h=t.vy)?h:1;var a;const u=null!=(a=t.ust)?a:Se.ZERO,c=iY(s,r);let l=this.Ict(c);l||(l=this.Ect(c));for(const s of t.hY)if(!nY(s,l)){const t=rY(s,o,u,i);t.Ym>e&&l.xS(t)}}async Pn(i){await this.Wn(),this.Rot=i,this.Rot.ln(t.OA,this.Lct),this.Lct()}async Wn(){this.Rot&&(this.Rot.rn(t.OA,this.Lct),this.Rot=void 0);for(const t of this.Z.Nw)this.ES.jS(t);await super.Wn()}constructor(t){super(),this.Rot=void 0,this.Lct=()=>{var t,i;const e=null!=(i=null==(t=this.Rot.Snt())?void 0:t.gn)?i:0;if(e>0)for(const t of this.Z.Nw)lp(t,e);for(const t of this.Rot.wnt)if(t.bn>e)for(const i of t.hnt)this.bct(i,t,e)},this.ES=t}};function nY(t,i){const e=t.o;if(void 0!==e){if(Gr(i.L.Nw,(i=>i.Sct===e&&i.O===t.JM)))return!0}return!1}function rY(t,i,e,s){const n=t.o,r=t.PD.toSigned().subtract(e),h=t.ct,o=t.JM,a=t.TI,u=r.toNumber()/i+s.gn,c=h?h.toNumber()/i:void 0,l=void 0!==c?u+c:s.kot;return new eY(u,l,o,a,n)}function hY(t,i,e,s){const n=[],r=Gr(e,(t=>t.Zet===zp));if(void 0===r)return;const h=r.zy?function(t){const i=t.split(":",1)[0];switch(i){case"cbcs":case"cenc":return i;default:return}}(r.zy.toLowerCase()):"cenc";if(void 0!==h){for(const t of e)if(t.Zet!==zp)for(const i of iy(t.Zet))n.push({jC:i,Fz:t.Xet?[t.Xet]:[],Yz:void 0,Jj:void 0});if(n.length)return{YO:t,kct:{Cct:h,GO:r.GO},xct:n,Oct:i===Tw.Gv?s.slice():[],jct:i===Tw.Yv?s.slice():[],n4:!1}}}function oY(t,i){if(!t)return i;if(!i)return t;const e=[],s=Qt();var n;return aY(e,s,t.xct),aY(e,s,i.xct),{YO:t.YO,kct:{Cct:t.kct.Cct,GO:null!=(n=t.kct.GO)?n:i.kct.GO},xct:e,Oct:uY(t.Oct,i.Oct,na),jct:uY(t.jct,i.jct,na),n4:t.n4||i.n4||!1}}function aY(t,i,e){for(const s of e){const e=s.jC.Ub;let n;i.has(e)?(n=i.get(e),n.Fz=uY(n.Fz,s.Fz,cY)):(n=oe({},s),t.push(n),i.set(e,n))}}function uY(t,i,e){const s=t.slice();for(const t of i)e(s,t)||s.push(t);return s}function cY(t,i){for(const e of t)if(ba(e,i))return!0;return!1}function lY(t,i){let e;const s=t.mst;if(s){const n=t.rY,r=[];for(const i of t.Ast)r.push(n+'; codecs="'+i+'"');e=hY(i||{},t.$w,s,r)}for(const s of t.Kst)e=oY(e,dY(s,i));return e}function dY(t,i){return hY(i||{},t.$w,t.mst||[],[t.gP])}function fY(t){return t?t.xct.map((i=>{const e=_Y(t.YO,i.jC),s=t.kct.Cct;return{jC:i.jC,Fz:i.Fz,Jj:i.Jj,UP:[{initDataTypes:[i.jC.Bb],audioCapabilities:gY(t.Oct,s,null==e?void 0:e.audioRobustness),videoCapabilities:gY(t.jct,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]}})):[]}function _Y(t,i){switch(i.$w){case Ci.xb:return t.widevine;case Ci.Cb:return t.playready;case Ci.jb:return t.fairplay;case Ci.Ob:return t.clearkey}}function gY(t,i,e){if(0!==t.length)return t.map((t=>({contentType:t,encryptionScheme:i,robustness:e})))}r(),r();var wY=class extends $n{Ect(t){const i=this.ES.SS(Pt.XM,t.o,"thumbnails","",!1,Ks.DEFAULT);return i.Xw=Ht.Un,this.Dct(i),i}async Pn(i){await this.Wn(),this.Rot=i,this.Rot.ln(t.OA,this.Ln),this.Ln()}zct(t){this.Pct(t),this.Bct()}Bct(){const t=[];for(const i of this.Z.Nw)this.Rct(i)||t.push(i);for(const i of t)this.it(i)}Pct(t){const i=[];for(const e of this.art)-1===t.indexOf(e)&&i.push(e);for(const t of i)Et(this.art,t)}async Wn(){this.Rot&&(this.Rot.rn(t.OA,this.Ln),this.Rot=void 0);for(const t of this.art)t.rn(xl.knt,this.Uct);this.art.length=0;for(const t of this.Z.Nw)this.ES.jS(t);await super.Wn()}cn(){return this.Uct=void 0,super.cn()}Qct(){var t,i;const e=null!=(i=null==(t=this.Rot.Snt())?void 0:t.gn)?i:0;if(e>0)for(const t of this.Z.Nw)lp(t,e)}Fct(t){return this.Z.Nw.some((i=>i.o===t.o))}Yct(t){return Gr(this.Z.Nw,(i=>i.o===t.o))}Rct(t){return this.art.some((i=>t.o===i.o))}constructor(t){super(),this.art=[],this.Ln=()=>{const t=[];for(const i of this.Rot.wnt)for(const e of i.nnt)if(e.$w===Tw.Wv&&e.Kst.length>0){const i=e.Kst[0];t.push(i),this.Fct(i)||this.Ect(i),-1===this.art.indexOf(i)&&(this.art.push(i),i.ln(xl.knt,this.Uct)),this.Gct(i)}this.zct(t)},this.Gct=t=>{const i=this.Yct(t);i&&t&&i.Xw!==Ht.gh&&(this.Qct(),function(t,i){const e=t.fst,s=t.Jnt();if(!s)return;const n=s.Ert,r=s.brt,h=t.ji,o=t.Ti,[a,u]=function(t){for(const i of t)if(Ei(i.Zet,vY)||Ei(i.Zet,mY)){const t=i.zy.match(AY);if(t){const[,i,e]=t;return[Number(i),Number(e)]}}return[1,1]}(t.pst);let c=n;for(;c&&c.tst<=r.tst;){const s=t.Hnt.ct||c.ct,n=pY(i,c,t.Znt(c).Fu,h,o,a,u,s);for(const t of n)i.xS(t);c=e.xrt(c)}}(t,i))},this.ES=t;const i=this;this.Uct=function(){i.Gct(this)}}},AY=/^(\d+)x(\d+)$/,vY="http://dashif.org/guidelines/thumbnail_tile",mY="http://dashif.org/thumbnail_tile";function pY(t,i,e,s,n,r,h,o){const a=[],u=i.Fm,c=r*h,l=s/r,d=n/h,f=x.round(l),_=x.round(d),g=o/c;if(1===c){const i=u+g;return yY(t,u,i,e)?a:[new Hn(u,i,e,!1)]}for(let s=0;s<h;s++)for(let n=0;n<r;n++){const h=u+(s*r+n)*g,o=h+g,c=e+"#xywh="+x.round(n*l)+","+x.round(s*d)+","+f+","+_;if(yY(t,h,o,c)||a.push(new Hn(h,o,c,!1)),o>=i.Ym)return a}return a}function yY(t,i,e,s){return t.L.Nw.some((t=>t.Fm===i&&t.Ym===e&&t.O===s))}r(),r(),r(),r();var MY=class extends Hn{get zD(){return this.Vct}get zy(){return this.Wct}get Hct(){return this.qct}get oa(){return this.Ua||(this.Ua=function(t){return Ou(Rh(t),{get schemeIDURI(){return t.zD},get value(){return t.zy},get emsgID(){return t.Hct}})}(this)),this.Ua}op(t){return ms(this.O,t.O)}constructor(t,i,e,s,n,r){super(t,i,r,!1),this.Vct=e,this.Wct=s,this.qct=n}},TY=class t extends $n{Xct(i,e,s){const n=ds.ST(Ao(i));if(!n)return;const r=function(t,i){const e=[];for(const s of t)Am(s,i)&&e.push(s);return e}(n,xv.QM);if(r.length){const i=t.Zct(n,e,s);this.Kct(r,i,s)}}Kct(t,i,e){for(const s of t){let t;t=1===s.DT?s.PD.toNumber()/s.vy+e:i+s.UD/s.vy;const n=t+s.BD/s.vy;"https://aomedia.org/emsg/ID3"===s.zD?this.Jct(s,t):this.$ct(s,t,n)}}$ct(t,i,e){const s=iY(t.zD,t.zy);let n=this.Ict(s);n||(n=this.tlt(s),this.Dct(n)),n.xS(new MY(i,e,t.zD,t.zy,t.o,t.RD))}Jct(t,i){const e=JC(Ao(t.RD));if(!e)return;const s=iY(t.zD,t.zy);let n=this.Ict(s);n||(n=this.ilt(s),this.Dct(n));for(const t of e.k0){const e=new ox(i,t);DC(e,n.L.Nw),n.xS(e)}}static Zct(t,i,e){const s=vm(t,xv.FM);return s?B(s.JD,s.vy)+e:i}tlt(t){const i=this.ES.SS(Pt.XM,"","","",void 0,Ks.EMSG);return i.qw=t,i.Xw=Ht.Zw,i}ilt(t){const i=this.ES.SS(Pt.XM,"","","",void 0,Ks.ID3);return i.qw=t,i.Xw=Ht.Zw,i}async Wn(){for(const t of this.Z.Nw)this.ES.jS(t);await super.Wn()}constructor(t){super(),this.ES=t}},NY=class extends TY{async Pn(i){await this.Wn(),this.Rot=i,this.Rot.ln(t.OA,this.Lct),this.Lct()}async Wn(){this.Rot&&(this.Rot.rn(t.OA,this.Lct),this.Rot=void 0),await super.Wn()}constructor(...t){super(...t),this.Lct=()=>{var t,i;const e=null!=(i=null==(t=this.Rot.Snt())?void 0:t.gn)?i:0;this.VI(e)}}};r(),r();var DY=class{Xit(t,i){return this.elt?this.pct.Xit(t,i):Promise.resolve(!1)}Kit(t,i){return this.elt?this.pct.Kit(t,i):Promise.resolve(void 0)}async Wit(t){const i=await this.pct.Wit(t);return this.elt=void 0!==i,i}qW(t){return this.pct.qW(t)}constructor(t){this.elt=!1,this.pct=t}},IY=[t.BA,t.UA,t.GA,t.jA,t.VA],SY=[t.RA,t.ZA,t.SA,t.DA],EY=class e extends i{async slt(i,e,s,n){const r=this.nlt(this.LS,this.oR,this.pct,this.lc,i,n);return r.ln(xl.xnt,this.rlt),r.ln(t.jA,this.Ds),await r.VV(e,s),r}hlt(t){void 0===t&&(t=!1),this.olt.s_(),this.K4.s_(),this.ult.s_(),this.ult=new Po,this.clt=this.llt(this.dlt,this.J4,this.clt,t,this.ult.i_).catch(this.flt)}async llt(t,i,e,s,n){await Promise.all([t,i,e]),Pi(n),await hl(this._lt.nL,n);const r=this.glt;await r.wlt(),this.nJ(),Pi(n);const h=r.cc,o=r.Alt,a=r.vlt;let u=this.plt(h,a,h,o,!1),c=this.ylt(a,u);!s&&this.Mlt(c)?await this.Tlt(a,u,c):(u=this.plt(h,a,h,o,!0),c=this.ylt(a,u),await this.Nlt(a,u,c,n)),Pi(n),this.gg?this.Em(this.E_):this.Dlt(),this.Ilt()}async Tlt(t,i,e){const s=this.glt;await this.Slt(e),this.Elt=e,await this.blt(s,t,i),await s.Llt(Eu.uut)}async Nlt(t,i,e,s){const n=this.glt;this.n2(),this.klt();const r=this.Clt;await this.xlt(),await this.o$(e),this.Elt=e,await this.blt(n,t,i);try{const t=this.Olt(r,!1,!0,s);await n.Llt(Eu.uut),await t}finally{this.l2(),this.jlt()}}get ht(){return this.qv}get eP(){const t=this.Clt,i=this.zlt,e=i.zB(t);if(-1!==e)return{gn:i.gn(e),bn:i.bn(e)}}get zlt(){var t,i,e;const s=null!=(e=null==(t=this.glt)?void 0:t.M_)?e:Ki.KB();var n;const r=null!=(n=null==(i=this.Plt)?void 0:i.M_)?n:Ki.KB();return s.xB(r)}get M_(){return this.zlt.ks()}get N_(){var t;const i=null==(t=this.Pnt)?void 0:t.Ynt,e=null==i?void 0:i.ant;if(!i||!e)return;const s=e.getTime(),n=1e3*this.E_;return new Date(n+s)}set N_(t){var i;const e=null==(i=this.Pnt)?void 0:i.Ynt,s=null==e?void 0:e.ant;if(!t||!e||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.Em(r-n)}get Clt(){return void 0!==this.T4?this.T4:void 0!==this.Blt?this.Blt:this.sP.E_}get E_(){return this.Clt}set E_(t){this.Em(t,t===1/0)}get ct(){let t=NaN;return this.glt&&this.glt.Rlt?t=this.glt.bn:this.Pnt&&void 0!==this.Pnt.Ynt.$w&&(t=this.Pnt.Ynt.fnt?this.Pnt.Ynt.fnt.Qet():1/0),t}get bn(){return this.ct}get C_(){return!(!this.glt||!this.glt.Rlt)&&(this.gg?this.Clt===this.glt.bn:this.sP.C_)}get lt(){return this.hP}get j_(){return this.oP}get P_(){}Ult(){var t;const i=this.Qlt;if(0===i.U)return!0;var e;return(null!=(e=null==(t=this.eP)?void 0:t.bn)?e:this.Clt)>=i.gn(0)}Flt(){var t;if(!this.Pnt)return!1;if(this.Pnt.Ynt.$w!==Q.iO)return!1;const i=null==(t=this.glt)?void 0:t.cc;if(i&&i.Ont)return!0;const e=[];for(const t of this.Pnt.Ynt.wnt){const i=t.Int,s=t.kot;void 0!==i&&void 0!==s&&e.push(i,s)}const s=new Ki(e).CB();return function(t,i,e){if(!i.U||!e.U)return Ki.KB();const s=i.gn(0),n=i.bn(i.U-1),r=t.yn(e).bB().yn(t).xB(i);return Ki.ZB(r.gn(0),r.bn(r.U-1)).OB(r).FB(((t,i)=>t<s&&i<=n&&i-t>Dc))}(this.zlt,this.Qlt,s).U>0}get Q_(){return oe({},this.Ylt,{im:ca.kb.Iz(),nm:this.Glt,hm:{amountOfBufferedAudioSegments:this.Vlt,amountOfBufferedVideoSegments:this.Wlt}})}get q_(){return this.D4?this.Hlt:this.glt&&this.glt.Rlt?this.qlt:this.Hlt}get eg(){let t=this.Io;return this.glt&&(t=t.xB(this.Xlt)),t.CB(.1).ks()}Zlt(t){this.Io=this.Io.xB(t)}get hg(){return this.uP}set hg(t){this.uP=t,this.Klt()}get cg(){let t=this.sP.cg;return this.Jlt&&(t=x.max(ow.Vn,t)),t}get Qlt(){return this.$lt(!1)}get tdt(){return this.$lt(!0)}get fg(){return this.Qlt.ks()}get gg(){return this.$B||this.idt}get lP(){}get edt(){var t,i;return null!=(i=null==(t=this.Pnt)?void 0:t.Ynt.$w)?i:Q.tO}get nt(){return this.Al}get rt(){return this.Zv}get vg(){var t;return this.sdt||(null==(t=this.ndt())?void 0:t.Ti)||0}get Mg(){var t;return this.rdt||(null==(t=this.ndt())?void 0:t.ji)||0}get Sg(){return this.dP}get Lg(){return!1}set Lg(t){}get fP(){return this._P}hdt(i){i.ln(IY,this.Ds),i.ln(t.HA,this.odt),i.ln(t.gA,this.adt),i.ln(Bi.Zo,this.udt),i.ln(t.AA,this.cdt),i.ln(t.UA,this.ldt),i.ln("Fat",this.ddt),i.ln("fdt",this.ddt)}_dt(i){i.rn(IY,this.Ds),i.rn(t.HA,this.odt),i.rn(t.gA,this.adt),i.rn(Bi.Zo,this.udt),i.rn(t.AA,this.cdt),i.rn(t.UA,this.ldt),i.rn("Fat",this.ddt),i.rn("fdt",this.ddt)}gdt(i){i.ln(t.BA,this.Ds)}wdt(i){i.rn(t.BA,this.Ds)}ndt(){if(!this.glt)return;const t=Gr(this.glt.vlt,(t=>t.eut===Tw.Yv));return t?t.Pw:void 0}$lt(t){var i;const e=null==(i=this.Pnt)?void 0:i.Ynt;if(!e)return Ki.KB();const s=e._at;let n=t?e.bot:e.drt;if(void 0===s||void 0===n)return Ki.KB();if(!t){const t=this.Xlt;t.U>0&&t.bn(t.U-1)>n&&(n=x.min(t.bn(t.U-1),e.bot))}const r=this.ct;return isFinite(r)&&r>n&&(n=r),Ki.ZB(s,n).SB()}async Pn(t,i){let e,s;Pi(i);try{e=this.Pnt.Ynt.gat,s=this.Pnt.Ynt.fat}catch(t){throw new b("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!e)throw new b("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new b("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.Adt(t.textTracks),this.n2();const n=this.vdt(e),r=jr(e,n,void 0,void 0,this.mdt),h=this.plt(e,r,e,r,!0);r.forEach((t=>t.Rt=!0));const o=this.ylt(r,h);await this.o$(o),this.Elt=o,Pi(i);const a=await this.slt(e,n,r,h);Pi(i),this.pdt(a),this.l2(),Pi(i),await a.Llt(),Pi(i),this.ydt||this.Em(s,!0,CF.Xut)}Dlt(){this.olt.s_(),this.olt=new Po,this.dlt=this.Mdt(this.dlt,this.clt,this.olt.i_).catch(this.flt)}Tdt(){this.olt.s_()}async Mdt(t,i,e){for(await Promise.all([t,i]),Pi(e);;){var s;const t=null==(s=this.glt)?void 0:s.cc;if(!t){0;break}if(!await this.Ndt(t,e)){0;break}}}async Ndt(t,i){var e;Pi(i);const s=this.glt;for(0;this.Pnt.Ynt.$w===Q.iO&&void 0===(null==(e=this.Iot(t))?void 0:e.Int);)await hl(this.Ddt.bat,i),await this.Idt();for(Pi(i),await this.Idt(),Pi(i);!s.Sdt();)await s.v_(Ar.Zut,i),await this.Idt();Pi(i),await this.Idt(),Pi(i);const n=this.Iot(t);return n?(this.Edt(n)?await this.bdt(n,i):await this.Ldt(n,i),!0):(this._J(),!1)}Edt(t){var i,e,s,n,r,h;const o=null!=(h=null==(i=this.lc)||null==(e=i.dash)?void 0:e.useSeamlessPeriodSwitch)?h:Go.lB;if(o===Go.tF)return!0;if(o===Go.iF)return!1;const a=this.glt,u=null==a?void 0:a.cc,c=null==a?void 0:a.vlt,l=jr(t,this.vdt(t),u,c,this.mdt),d=this.plt(t,l,u,c,!1);if(o===Go.CLEAR_ONLY&&((null==(s=this.glt)?void 0:s.kdt)||d)||o===Go.SAME_DRM_ONLY&&!((null==(n=this.glt)?void 0:n.kdt)&&d||!(null==(r=this.glt)?void 0:r.kdt)&&!d))return!1;const f=this.ylt(l,d);return this.Mlt(f)}Cdt(){return!1}xdt(t){const i=this.Odt();for(const e of i)e!==t&&(e.Xw=Ht.gh)}Ilt(){if(void 0!==this.jdt){if(this.jdt.Jw){const t=Gr(this.ht.Nw,(t=>t.Rt));void 0!==t&&this.jdt.gs===t.gs||(this.jdt.Xw=Ht.gh)}}else this.zdt()}zdt(){if(this.Odt().length)return;const t=Gr(this.ht.Nw,(t=>t.Rt));if(void 0===t)return;const i=this.nt.Nw.filter((t=>t.Jw));for(const e of i)if(e.gs===t.gs)return e.Xw=Ht.Un,void(this.jdt=e)}Odt(){return this.nt.Nw.filter((t=>t.Xw===Ht.Un&&(t.zt===Pt.kI||t.zt===Pt.HM)))}Pdt(t){if(t&&this.jdt){const i=function(t,i){if(""===t.gs)return;return i.filter((i=>i.gs===t.gs))[0]}(this.jdt,t.nt.Nw);i&&(i.Xw=Ht.Un)}}async bdt(i,e){var s,n;const r=this.glt;let h=this.Plt;const o=this.Elt;try{Pi(e);const s=r.cc,n=r.vlt,o=this.vdt(i),a=jr(i,o,s,n,this.mdt),u=this.plt(i,a,s,n,!1);a.forEach((t=>t.Rt=!0));const c=this.ylt(a,u);for(0,await r.wlt(),this.nJ(),Pi(e),h&&h.cc===i?(this.Mlt(c)&&await this.Slt(c),this.Elt=c):(h&&await h.cn(!0),this.Mlt(c)&&await this.Slt(c),this.Elt=c,h=await this.slt(i,o,a,u),this.Plt=h,this.gdt(h),this.Bdt.Ew=h.nt),await h.Llt(),Pi(e);this.Clt<i.gn;)await this.sP.v_(t.XA,e);Pi(e),this.pdt(h)}catch(t){throw Oi(t)&&(h&&await h.wlt(),o&&this.Elt!==o&&(this.Mlt(o)&&await this.Slt(o),this.Elt=o)),t}(null==(s=this.lc)||null==(n=s.dash)?void 0:n.forceSeekToSynchronize)&&await this.Rdt(i,e)}async Rdt(t,i){const e=Date.now()/1e3;if(void 0===this.Udt)this.Udt=e;else if(e-this.Udt>900){this.Udt=e,this.klt();const s=x.max(this.Clt,t.gn);try{await this.Olt(s,!1,!0,i)}finally{this.jlt()}}}async Ldt(i,e){for(Pi(e),await this.glt.wlt(),this.nJ(),await this.Qdt(i.gn),Pi(e),this._J();!this.sP.C_&&this.Clt<i.gn;)await this.sP.v_([t.XA,t.NA],e);Pi(e);const s=this.glt.cc,n=this.glt.vlt,r=this.vdt(i),h=jr(i,r,s,n,this.mdt),o=this.plt(i,h,s,n,!0);h.forEach((t=>t.Rt=!0));const a=this.ylt(h,o);this.glt&&(this.Fdt.rn(Os.Ko,this.Ydt),await this.glt.cn(),this.Fdt.ln(Os.Ko,this.Ydt),this.glt=void 0),this.Plt&&(await this.Plt.cn(),this.Plt=void 0),this.klt(),this.n2();const u=x.max(this.Clt,i.gn);await this.xlt(),await this.o$(a),this.Elt=a;const c=await this.slt(i,r,h,o);this.pdt(c);try{const t=this.Olt(u,!1,!0,e);await c.Llt(),await cg((i=>Promise.race([t,c.v_([Ar.Zut],i)])),e)}finally{this.l2(),this.jlt()}}async Idt(){const t=this.Plt;t&&t.cc.Ont&&(await t.cn(!0),this.Plt=void 0)}static Gdt(t,i){const e=i.some((t=>t.Jst.some((t=>"main"===t.zy)))),s=i.map(((t,i)=>{const s=function(t,i){const e=t.filter((t=>"urn:mpeg:dash:role:2011"===t.Zet)).map((t=>t.zy)).filter(z_);if(i||na(e,"main"))return na(e,"caption")?"captions":na(e,"subtitle")?"subtitles":na(e,"dub")?"translation":"main";if(na(e,"sign"))return"sign";if(na(e,"description"))return"descriptions";if(na(e,"commentary"))return"commentary";return"alternative"}(t.Ust.concat(t.Jst),!e&&0===i),n=t.Kst.map((t=>t.Vnt));return new bF(t,n,s)}));return new pF(t,s)}vdt(t){const i=[],s=[];for(const e of t.yot)e.$w!==Tw.Gv&&e.$w!==Tw.Yv||(0===e.Kst.length?this.mo(new QF("No supported representation found in the AdaptationSet with mimetype : "+e.$w)):e.$w===Tw.Gv?i.push(...e.nnt):s.push(...e.nnt));const n=[];return i.length>0&&n.push(e.Gdt(Tw.Gv,i)),s.length>0&&n.push(e.Gdt(Tw.Yv,s)),n}ylt(t,i){var e,s,n,r,h,o,a,u,c,l,d,f;const _=t.map((t=>VF.fct(null!=(f=t.iut)?f:t.Kst,bw(t.eut,this.mdt)))).map((t=>({gP:t.gP}))),g=null==(e=this.lc)||null==(s=e.dash)?void 0:s.desiredTimescale;var w;const A=(null==(n=this.lc)||null==(r=n.dash)?void 0:r.useSeamlessPeriodSwitch)!==Go.iF&&(null==(h=this.lc)||null==(o=h.dash)?void 0:o.useSeamlessPeriodSwitch)!==Go.CLEAR_ONLY&&(null==(a=this.lc)||null==(u=a.dash)?void 0:u.useSeamlessPeriodSwitch)!==Go.SAME_DRM_ONLY&&(null!=(w=null==(c=this.lc)||null==(l=c.dash)?void 0:l.needsTimescaleShifting)?w:fe.Ys.cJ),v=null==(d=this.lc)?void 0:d.useManagedMediaSource;return{$w:Pe.iO,v$:_,wP:fY(i),n4:null==i?void 0:i.n4,cJ:A,lJ:g,E$:v}}static Vdt(t,i){if(!t.length)return;let e;for(const s of t)e=oY(e,lY(s.jnt,i));return(null==i?void 0:i.preferredKeySystems)&&e&&(e.xct=function(t,i){const e=t=>{const e=i.indexOf(t.jC.Ub);return e>=0?e:i.length};return Zc(t,((t,i)=>e(t)-e(i)))}(e.xct,i.preferredKeySystems)),e}plt(t,i,s,n,r){var h,o,a;const u=this.lc.contentProtection;let c=e.Vdt(i,u);if(void 0!==c)return c;var l;const d=null!=(l=null==(h=this.lc)||null==(o=h.dash)?void 0:o.useSeamlessPeriodSwitch)?l:Go.lB;if(d===Go.iF||d===Go.CLEAR_ONLY||d===Go.SAME_DRM_ONLY)return;const f=null==(a=this.glt)?void 0:a.kdt;if(!r&&void 0!==f){const t=!f.n4;if(d===Go.lB&&t&&!this.Cdt())return;return f}const _=!r&&d===Go.lB;return c=this.Wdt(t,u,s,n,_),void 0!==c?(c.n4=!0,c):void 0}Wdt(t,i,s,n,r){let h=t,o=!1;for(;;){if(h=o?this.Eot(h):this.Iot(h),void 0===h){if(o)return;o=!0,h=t;continue}const a=jr(h,this.vdt(h),s,n,this.mdt),u=e.Vdt(a,i);if(r){const t=this.ylt(a,u);if(!this.Mlt(t))return}if(void 0!==u)return u}}Pg(){this.q_||(this.Hlt=!0,this.D4||(this.Hdt(new sa),this.qdt()),this.Xdt())}Bg(){this.Zdt||(this.Zdt=new No),this.Kdt();const t=this.Zdt.nL;return W(t),t}Kdt(){if(this.Hlt=!1,this.B4=!0,this.Klt(),this.C_){const t=this.Qlt;t.U>0&&this.Em(t.gn(0))}this.D4||this.U4().then(this.Jdt,this.Hdt),this.rlt(),this.Xdt()}n2(){this.D4||(this.Hlt=this.q_,this.D4=!0,this.qdt())}l2(){this.D4&&(this.D4=!1,this.Hlt||this.U4().then(this.Jdt,this.Hdt),this.rlt(),this.Xdt())}Xdt(){const t=this._O,i=this.q_;t!==i&&(this._O=i,i?this.mo(new ws(this.E_)):this.mo(new vh(this.E_)))}Em(t,i,e){return void 0===i&&(i=!1),void 0===e&&(e=CF.qut),this.ydt=!0,this.olt.s_(),this.K4.s_(),this.$B=!0,this.T4=t,this.Zlt(this.Xlt),this.$dt(new ja(this.E_)),this.K4=new Po,this.J4=this.t2(t,this.dlt,this.J4,this.clt,this.K4.i_,i,e).catch(this.flt),this.J4}tft(){this.K4.s_()}async t2(t,i,e,s,n,r,h,o){void 0===r&&(r=!1),void 0===h&&(h=CF.qut),void 0===o&&(o=!1);try{var a,u;0,await Promise.all([i,e,s]),Pi(n),await hl(this._lt.nL,n);const c=this.Qlt.EB(t);this.T4=c;const l=o||(null==(a=this.lc)||null==(u=a.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&c<=this.E_,d=this.ift(c),f=this.glt;if(l||!f||!f.fg.ar(c)&&h!==CF.Xut&&f.cc!==d){if(d){let t=this.Plt;if(this.n2(),f&&await f.wlt(),t&&t.cc===d&&!l){const i=this.ylt(t.Alt,t.kdt);this.nJ(),this.Mlt(i)&&await this.Slt(i),this.Elt=i}else{t&&await t.cn(!0);const i=this.vdt(d),e=null==f?void 0:f.cc,s=null==f?void 0:f.vlt,n=jr(d,i,e,s,this.mdt);let r=this.plt(d,n,e,s,!1);n.forEach((t=>t.Rt=!0));let h=this.ylt(n,r);this.Edt(d)&&!l?(this.nJ(),this.Mlt(h)&&await this.Slt(h)):(r=this.plt(d,n,e,s,!0),h=this.ylt(n,r),f&&(this.Fdt.rn(Os.Ko,this.Ydt),await f.cn(),this.Fdt.ln(Os.Ko,this.Ydt),this.glt=void 0),await this.xlt(),await this.o$(h)),this.Elt=h,t=await this.slt(d,i,n,r),this.Plt=t,this.Bdt.Ew=t.nt,this.gdt(t)}await t.Llt(Eu.lut),this.pdt(t)}}else{0;const t=this.Plt;if(t&&!t.eft){await t.wlt(),this.nJ();const i=this.ylt(f.Alt,f.kdt);this.Mlt(i)&&await this.Slt(i),this.Elt=i}}0;const _=this.Olt(c,r,!1,n);this.T4=void 0,await this.glt.Llt(Eu.lut),Pi(n),this.Dlt(),await _,Pi(n),this.l2(),this.$B=!1,this.sft(new _e(this.E_))}catch(t){if(Oi(t))return void 0;0}}async Olt(i,e,s,n){let r,h,o=!0,a=i;for(;;){const u=this.tdt;if(u.U>0){const t=u.EB(i);a!==t&&(u.ar(a)&&this.Pnt.Ynt.$w===Q.iO||(a=t,o=!0))}if(o)o=!1,r&&W(r),null==h||h.s_(),h=new Po,h.n_(n),r=this.nft(a,e,s,h.i_);else if(!this.idt&&!this.k$)break;await cg((i=>Promise.race([r,this.v_([t.GA,t.yA],i),this.Pnt.Ynt.v_(xl.knt,i)])),n)}}klt(){void 0===this.Blt&&(this.Blt=this.Clt,this.sP.rn(t.YA,this.$dt),this.sP.rn(t.FA,this.sft))}jlt(){if(void 0===this.Blt)return;const i=this.Clt;this.Blt=void 0,this.sP.ln(t.YA,this.$dt),this.sP.ln(t.FA,this.sft),this.Clt!==i&&this.fc()}rft(t){this.Io=this.Io.xB(t)}ift(t){const i=this.Pnt.Ynt;let e=i.wnt;if(fe.Ys.itt&&(e=e.filter((t=>t.ct>=.2))),0===e.length)return;const s=e[0];if(t<=s.gn)return s;for(const i of e)if(i.bn>t)return i;return i.$w!==Q.iO?e[e.length-1]:void 0}Eot(t){let i=t.Sot;if(fe.Ys.itt)for(;i&&i.ct<.2;)i=i.Sot;return i}Iot(t){let i=t.Dot;if(fe.Ys.itt)for(;i&&i.ct<.2;)i=i.Dot;return i}async ca(i,e,s){if(this.hft(),this.lc&&!ml(this.lc)&&await this.Wn(),!i||ml(i))return;this.OS=new Po,s&&this.OS.n_(s),this.lc=i,this.oft=e,this.mdt=i.abr,this.aft=i.ignoreEmbeddedTextTrackTypes;const n=KF(new HF(this.LS,Boolean(this.lc.useCredentials),this.gct),this.pct);this.dat(!0),this.Ddt=new vF({tA:fe.Ah(this.lc.src),vat:this.lc.liveOffset,Tat:this.lc.timeServer,NS:this.lc.useCredentials},this.uft(this.mdt),this.LS,n,this.lc.dash),this.Pnt=this.Ddt.br,this.Pnt.Ynt.ln(t.xA,this.cft),this.Pnt.Ynt.ln(t.OA,this.lft),this.Pnt.Ynt.ln(Mr.zot,this.dft),this.Pnt.Ynt.ln(xl.knt,this.rlt),await this.fft.Pn(this.Pnt.Ynt),await this._ft.Pn(this.Pnt.Ynt),na(this.aft,Ks.EMSG)||(this.gft=new NY(this.ES),this.Al.Vz(this.gft.Z),await this.gft.Pn(this.Pnt.Ynt)),this.Klt()}async wft(){const t=this.Pnt.Ynt.W_;var i,e;(this.dat(t),t)?this.ddt():(await Promise.all([null==(i=this.glt)?void 0:i.wlt(Eu.Eut),null==(e=this.Plt)?void 0:e.wlt(Eu.Eut)].filter(z_)),this.Tdt(),this.tft(),this.ult.s_())}get W_(){return this.uat}dat(t){this.uat!==t&&(this.uat=t,this.mo(t?new $F:new tY))}Klt(){return this.Pnt?(this.Aft=this.vft(this.Aft,this.OS.i_),this.Aft.catch(this.flt)):Promise.resolve()}async vft(t,i){t&&(await t,Pi(i));try{this.hg===Al.lB||this.B4?await this.mft(i):this.hg===Al.XM&&await this.pft(i)}catch(t){throw yo(t),this.qP(new ce(le.MANIFEST_LOAD_ERROR,t.message,t)),t}}async mft(t){await this.pft(t),this.yft||(this.yft=!0,this._lt.n_(this.Pn(this.oft,t)));try{await this._lt.nL}catch(t){yo(t),this.qP(new ce(le.MEDIA_DECODE_ERROR,t.message,t))}}async pft(t){await hl(this.Ddt.W,t)}pdt(t){const i=this.glt;t!==i&&(this.glt&&this._dt(this.glt),this.Plt&&this.wdt(this.Plt),i&&this.Zlt(this.Xlt),this.glt=t,this.Plt=i,this.hdt(this.glt),this.Plt&&this.gdt(this.Plt),this.qv.Ew=t.ht,this.Zv.Ew=t.rt,this.Pdt(t),this.Fdt.rn(Os.Ko,this.Ydt),e.Mft(this.Fdt),this.Fdt.ln(Os.Ko,this.Ydt),this.Fdt.Ew=t.nt,this.Bdt.Ew=void 0,this.zdt())}static Mft(t){for(const i of t.Nw)i.Xw=Ht.gh}ge(){this.mB=!0}be(){this.mB=!1}qP(t){this.hP||(W(this.Wn()),this.hP=Qh(t),this.oP=t,this.mo(new me(t)))}hft(){this.hP=void 0,this.oP=void 0}async Wn(){this.Z_=1,this.OS.s_(),this.tft(),this.Tdt(),this.ult.s_(),this._lt.s_(),this.ydt=!1,this.Pg(),this.B4=!1,this.qv.Ew=void 0,this.Zv.Ew=void 0,this.Fdt.Ew=void 0,this.Bdt.Ew=void 0,this.Aft&&(await this.Aft.catch(xs),this.Aft=void 0),await Promise.all([this.dlt,this.J4,this.clt,this._lt.nL.catch(xs)]),this.glt&&(await this.glt.cn(),this.glt=void 0),this.Plt&&(await this.Plt.cn(),this.Plt=void 0),await this.xlt(),this.Elt=void 0,this.jdt=void 0,this.SP.Wn(),await this.fft.Wn(),await this._ft.Wn(),void 0!==this.gft&&(this.Al.Xz(this.gft.Z),await this.gft.cn(),this.gft=void 0),this.ES.Wn(),this.Pnt&&(this.Pnt.Ynt.rn(t.xA,this.cft),this.Pnt.Ynt.rn(t.OA,this.lft),this.Pnt.Ynt.rn(Mr.zot,this.dft),await this.Ddt.cn(),this.Pnt=void 0),this.Jlt=!1,this.Tft=NaN,this.Nft=0,this.Dft=0,this.Blt=void 0,this.D4=!1,this.Io=Ki.KB(),this._O=!0,this.T4=void 0,this.Ift=!1,this.$B=!1,this.yft=!1,this._lt=new No,this.Glt=0,this.Vlt=0,this.Wlt=0,this.lc=void 0,this.oft=void 0,this.aft=[],this.Udt=void 0}async cn(){this.Bo(),this.hft(),await this.Wn(),this.Bo(),this.qv.cn(),this.Zv.cn(),this.glt&&await this.glt.cn(),this.Plt&&(this.wdt(this.Plt),await this.Plt.cn()),this.Fdt.cn(),this.Bdt.cn(),this.Al.cn(),this.SP.cn(),this.Sft.Xf(),await this.fft.cn(),await this._ft.cn(),this.ES.cn(),this.sP.rn(t.yA,this.K2),this.sP.rn(sr.TA,this.f4),this.sP.rn(t.NA,this.q2),this.sP.rn(t.YA,this.$dt),this.sP.rn(t.FA,this.sft),this.sP.rn(t.QA,this.ldt),this.sP.rn(t.XA,this.fc),this.sP.rn([t.bh,t.yh],this.Eft),this.sP.rn(SY,this.Ds)}Cg(){return this.sP.la}get R_(){return!1}Ug(){return!1}Qg(){}Fg(){}Yg(){}Gg(){this.hlt(!0)}constructor(i,e,s,n,r){super(),this.glt=void 0,this.Plt=void 0,this.B4=!1,this.Tft=NaN,this.hP=void 0,this.oP=void 0,this.D4=!1,this.Blt=void 0,this.T4=void 0,this.Ift=!1,this.Nft=0,this.Dft=0,this.Jlt=!1,this.OS=new Po,this._lt=new No,this.yft=!1,this.Pnt=void 0,this.Ddt=void 0,this.uat=!0,this.Hlt=!0,this.Zdt=void 0,this.Io=Ki.KB(),this.uP=Al.cB,this.Aft=void 0,this._O=!0,this.lc=void 0,this.oft=void 0,this.mdt=void 0,this.aft=[],this.$B=!1,this.mB=!0,this.dP=new Wu,this.olt=new Po,this.dlt=Promise.resolve(),this.K4=new Po,this.J4=Promise.resolve(),this.ydt=!1,this.ult=new Po,this.clt=Promise.resolve(),this.Elt=void 0,this.gft=void 0,this.Glt=0,this.Vlt=0,this.Wlt=0,this._P=new Su,this.sR=new Ro,this.Udt=void 0,this.ddt=()=>{this.hlt()},this.fc=()=>{this.mo(new Tc(this.E_,this.N_))},this.f4=t=>{this.mo(new xF(this.E_,t.Bb,t.Zb))},this.odt=t=>{this.Glt+=t.nm,this.mo(t)},this.adt=t=>{const i=t.segments.filter((t=>t.bft));t.track===Tw.Gv?this.Vlt=i.length:t.track===Tw.Yv&&(this.Wlt=i.length)},this.K2=()=>{const t=this.ct;j(t)||t===this.Tft||(this.Tft=t,this.mo(new ts(this.Tft)))},this.Eft=()=>{this.rlt(),this.Xdt()},this.q2=t=>{this.C_&&this.mo(t)},this.lft=t=>{this.Ds(t),this.Jlt||(this.Jlt=!0,this.Sft.Lft())},this.cft=()=>{this.Pnt.Ynt.rn(t.xA,this.cft),this.mo(new ie)},this.cdt=t=>{this.qP(t.errorObject),this.mo(t)},this.udt=t=>{this.qP(t.errorObject)},this.flt=t=>{Oi(t)||this.qP(new ce(le.MEDIA_DECODE_ERROR,t.message,t))},this.rlt=()=>{if(!this.q_)if(this.Ult())if(this.Flt()){const t=this.Pnt.Ynt.fat;this.Em(t,!0)}else;else{const t=this.Pnt.Ynt.fat;this.Em(t,!0)}},this.$dt=t=>{this.Ift=this.gg,this.mo(t)},this.sft=t=>{const i=this.Ift,e=this.gg;this.Ift=e,i&&!e&&this.mo(t)},this.ldt=()=>{const t=this.Mg,i=this.vg;this.Nft===t&&this.Dft===i||(this.Nft=t,this.Dft=i,this.mo(new Vu))},this.Ydt=t=>{const i=t.Lt;i.Xw===Ht.Un?(this.xdt(i),this.jdt=i):i===this.jdt&&i.Xw===Ht.gh&&(this.jdt=void 0,this.zdt())},this.Jdt=()=>{this.D4||this.Zdt&&(this.Zdt.eL(),this.Zdt=void 0)},this.Hdt=t=>{this.D4||this.Zdt&&(this.Zdt.sL(t),this.Zdt=void 0)},this.dft=()=>{this.wft().catch(this.flt)},this.LS=i,this.oR=s,this.pct=new DY(n),this.sP=r,this.qv=new As,this.Zv=new As,this.sP.ln(t.yA,this.K2),this.sP.ln(sr.TA,this.f4),this.sP.ln(t.NA,this.q2),this.sP.ln(t.YA,this.$dt),this.sP.ln(t.FA,this.sft),this.sP.ln(t.QA,this.ldt),this.sP.ln(t.XA,this.fc),this.sP.ln([t.bh,t.yh],this.Eft),this.sP.ln(SY,this.Ds),this.Sft=new bY(this,this.sP),this.SP=new ru(this.Sft,!0),this.SP.ln(qo.fv,this.rlt),this.SP.ln(Wh,this.Ds),this.Fdt=new Ac,this.Fdt.ln(Os.Ko,this.Ydt),this.Bdt=new Ac,this.ES=this.kft(),this.fft=new sY(this.ES),this._ft=new wY(this.ES),this.Al=new yh([this.Fdt,this.fft.Z,this._ft.Z]),this.gct=e.retryConfiguration}},bY=class extends en{get cg(){return this.Lo.cg}Lft(){this.mo(new Qi(this.E_,this.cg))}constructor(t,i){super(i),this.Lo=t}};r(),r(),r(),r(),r(),r();var Gs,LY=class{Cft(t,i,e){return Promise.resolve()}xft(t,i,e,s){let n=[];if(s){const r={qy:i.Fm,Xy:i.Ym,Zy:e.fst.Zy};s.$w===Ks.TTML?n=jm(t,s,r,e.rY):s.$w===Ks.WEBVTT&&(n=Gv(t,r).L)}return n}Wn(){}};r(),r(),r(),function(t){t.EM="vttc",t.Oft="vsid",t.jft="iden",t.zft="ctim",t.Pft="sttg",t.Bft="payl",t.Rft="vtte",t.Uft="vtta"}(Gs||(Gs={}));var kY=class t{static Qft(i){return Boolean(t.Fft[i])}static ST(i){const e=[],s=Mi.dT(new ya(i,new Vr));for(const i of s)t.Qft(i.$w)&&e.push(t.Fft[i.$w](i.JM));return e}static Yft(i){const e=Mi.dT(i),s=pm(e,Gs.Oft),n=pm(e,Gs.jft),r=pm(e,Gs.zft),h=pm(e,Gs.Pft),o=pm(e,Gs.Bft);return{$w:Gs.EM,Gft:s?t.Vft(s):void 0,Wft:n?t.Hft(n):void 0,qft:r?t.Xft(r):void 0,Zft:h?t.Kft(h):void 0,Jft:o?t.$ft(o):void 0}}static Vft(t){return{$w:Gs.Oft,t_t:t.sT()}}static Hft(t){return{$w:Gs.jft,Wft:t.aT()}}static Xft(t){return{$w:Gs.zft,i_t:t.aT()}}static Kft(t){return{$w:Gs.Pft,e_t:t.aT()}}static $ft(t){return{$w:Gs.Bft,s_t:t.aT()}}static n_t(t){return{$w:Gs.Rft}}static r_t(t){return{$w:Gs.Uft,h_t:t.aT()}}};kY.Fft={[Gs.EM]:kY.Yft,[Gs.Rft]:kY.n_t,[Gs.Uft]:kY.r_t};var CY=class{Cft(t,i,e){const s=new DataView(t.o_t),n=ds.ST(s),r=Gr(n,(t=>t.$w===xv.iM));return r&&(this.a_t=r.Z[0].ZT.pT.vy),Promise.resolve()}xft(t,i,e){if(j(this.a_t))return[];const s=Ao(t),n=ds.ST(s),r=vm(n,xv.CM),h=vm(n,xv.RM);if(!r||0===r.Z.length||!h)return[];const o=function(t,i,e){const s=t.Z[0],n=s.ED?s.ED.ED.toNumber()/e:i.Fm,r=[];for(const t of s.SD)r.push(...t.OD);return{u_t:n,OD:r}}(r,i,this.a_t),a=e.fst.Zy;return function(t,i,e,s){const n=kY.ST(Ao(i.JM)),r=t.OD,h=t.u_t+s,o=[];let a=0;for(let t=0;t<r.length;t++){const i=r[t],s=n[t];var u;const c=(null!=(u=i.ct)?u:0)/e;let l;s.$w===Gs.EM&&(l=xY(s,a,c,h)),l&&o.push(l),a+=c}return o}(o,h,this.a_t,a)}Wn(){this.a_t=NaN}constructor(){this.a_t=NaN}};function xY(t,i,e,s){if(!t.Jft)return void 0;const n=t.qft?function(t){return La(t.i_t,new Vr(0))}(t.qft):i,r=s+n,h=r+e,o=t.Jft.s_t;return new Hi(r,h,o,!1)}r(),r(),r();var OY=class t extends ai{get Gat(){return this.Vat}set Gat(t){this.Vat=t}get Rt(){for(const t of this.Z.Nw)if(t.Xw!==Ht.gh)return!0;return!1}async Pn(t){await this.Wn(),this.c_t=t,this.vdt(t)}vdt(t){for(const i of t.nnt){const t=this.l_t(i);this.d_t(t,i),t.cg=Ot.LOADED,this.tt(t)}}it(t){this.f_t(t),super.it(t)}ZI(t){const i=this.__t(t);if(i&&this.Gat!==i){this.Gat=i;for(const t of this.Z.Nw)t!==i&&(t.Xw=Ht.gh)}}KI(t){const i=this.__t(t);i&&this.Gat===i&&(this.Gat=void 0)}__t(t){return Gr(this.Z.Nw,(i=>t.Bw===i.Bw))}d_t(t,i){this.g_t.set(t.Bw,i)}w_t(t){return this.g_t.get(t.Bw)}f_t(t){this.g_t.delete(t.Bw)}A_t(){if(!this.Gat)return;const i=this.w_t(this.Gat);return i?t.v_t(i):void 0}static v_t(t){return t.Kst&&t.Kst.length>0?t.Kst[0]:void 0}constructor(...t){super(...t),this.g_t=Ye()}};function jY(t,i){const e=i.FB(((i,e)=>t.RB(i,e,!1,!1)));return t.xB(e)}function zY(t,i){const e=i.yn(t.bB()).FB(((i,e)=>t.ar(e)));return t.xB(e)}r(),r(),r(),r();var PY,An=class extends Jo{constructor(t,i,e){super("m_t"),this.gn=t,this.bn=i,this.Vnt=e}},BY=class extends gg{constructor(){super("p_t")}};!function(t){t.y_t="M_t",t.T_t="N_t",t.D_t="I_t",t.QR="S_t"}(PY||(PY={}));var RY=[t.VA,t.HA,t.GA,t.gA],UY=class extends i{get E_t(){var t,i;return(null==(t=this.L_t.b_t)?void 0:t.Vnt)||(null==(i=this.L_t.k_t)?void 0:i.Vnt)}get C_t(){return this.x_t}set O_t(t){this.L_t.O_t=t}get O_t(){return this.L_t.O_t}get FI(){return this.j_t}z_t(t){this.j_t!==t&&(this.j_t=t,this.mo(new BY))}get eut(){return this.x_t.Lt.eut}get lt(){return this.hP}async gn(t){if(!this.P_t&&!this.B_t)return;const i=this.v_("p_t");this.P_t?(this.R_t.s_(),this.R_t=new Po,this.U_t(this.R_t.i_)):(this.Q_t.eL(void 0),this.Q_t=new No),await i}get P_t(){return"M_t"===this.j_t}get B_t(){return"N_t"===this.j_t}get F_t(){return"I_t"===this.j_t}get Y_t(){return"S_t"===this.j_t}async Rg(t){if(this.F_t||this.B_t)for(0,this.R_t.s_();!this.P_t&&!this.Y_t;)await this.v_("p_t")}async Wn(t){this.Y_t?(this.hP=void 0,this.z_t("M_t")):await this.Rg(t),this.L_t.Wn(),this.x_t.Wn()}qP(t){this.hP=t,this.z_t("S_t"),this.mo(new me(t))}G_t(){this.w4.ln(t.XA,this.Kl),this.w4.ln([t.YA,t.bA],this.We),this.L_t.ln(RY,this.Ds),this.znt.ln(xl.knt,this.Kl)}V_t(){this.w4.rn(t.XA,this.Kl),this.w4.rn([t.YA,t.bA],this.We),this.L_t.rn(RY,this.Ds),this.znt.rn(xl.knt,this.Kl)}async wlt(t){this.V_t(),this.W_t.s_(),await this.Rg(null!=t?t:Eu.Lut),this.L_t.Wn()}async Llt(t){this.G_t(),await this.gn(null!=t?t:Eu._ut)}async cn(){this.Bo(),this.V_t(),this.W_t.s_(),await this.Rg(Eu.kut),this.L_t.cn()}async U_t(t){for(;;)try{Pi(t),this.z_t("I_t"),await this.L_t.H_t(t),Pi(t),this.z_t("N_t"),await hl(this.Q_t.nL,t)}catch(t){if(Oi(t))this.z_t("M_t");else{const i=t instanceof ce?t:new ce(le.MEDIA_LOAD_ERROR,t.message,t);this.qP(i)}break}}async q_t(t){Pi(t),await this.Rg(Eu.but),this.L_t.Wn(),Pi(t),await this.gn(Eu.lut)}constructor(t,i,e,s,n){super(),this.X_t=t,this.znt=i,this.x_t=e,this.L_t=s,this.w4=n,this.j_t="M_t",this.hP=void 0,this.Q_t=new No,this.W_t=new Po,this.R_t=new Po,this.We=t=>{this.P_t||this.Y_t||!fe.git&&this.L_t.Z_t(t.currentTime)||(this.W_t.s_(),this.W_t=new Po,this.q_t(this.W_t.i_).catch(Ah))},this.Kl=oo((()=>{if(this.B_t){try{this.L_t.K_t();if(this.L_t.J_t())return}catch(t){if(!(t instanceof An))throw t}this.gn(Eu.fut)}}),250),this.G_t()}};r(),r();var QY=class t{$_t(t,i,e,s,n){return this.tgt(t,i,!1,e,n,s)}igt(t,i,e,s,n){return this.tgt(t,i,!0,e,n,s)}async tgt(i,e,s,n,r,h){Pi(h);const o=await this.egt(i,s,n,r,h);return e?t.sgt(o):this.ngt(o)}ngt(t){return t}static sgt(t){return t}egt(t,i,e,s,n){var r;const h=new nc({Fu:t.Fu,pS:Rt.$I,vS:t.Jet?{Range:"bytes="+t.Jet[0]+"-"+(null!=(r=t.Jet[1])?r:"")}:void 0,NS:t.NS,mS:Kc.GET,$w:zu.hS,MS:i?jo.uS:jo.Hv,TS:this.rgt,YI:e,yS:s,i_:n});return this.LS.BI(h)}constructor(t,i){this.LS=t,this.rgt=i}};r(),r();var FY=class{hgt(t,i){const e=this.ogt**t,s=i*(1-e)+e*this.h8;j(s)||(this.h8=s,this.agt+=t)}ugt(){const t=1-this.ogt**this.agt;return this.h8/t}constructor(t){this.h8=0,this.agt=0,this.ogt=x.exp(x.log(.5)/t)}},YY=class{hgt(t,i){const e=8e3*i/t,s=t/1e3;this.cgt+=i,this.lgt.hgt(s,e),this.dgt.hgt(s,e)}ugt(){return this.sct()?x.min(this.lgt.ugt(),this.dgt.ugt()):this.fgt}sct(){return this.cgt>=this._gt}constructor(t=2,i=5,e=128e3){this.cgt=0,this.fgt=wI,this.lgt=new FY(t),this.dgt=new FY(i),this._gt=e}},GY=class{get ect(){return this.ggt.ugt()}get sct(){return this.ggt.sct()}wgt(t){const i=t.Agt,e=this.vgt?t.mgt-t.pgt:t.mgt-t.ygt,s=t.Mgt;!s&&i<this.Tgt||(s?this.ggt.hgt(2*e,i):this.ggt.hgt(e,i))}constructor(t,i){this.vgt=i,!i||t!==Tw.Yv&&t!==Tw.Gv?(this.Tgt=16e3,this.ggt=new YY):t===Tw.Yv?(this.Tgt=5e3,this.ggt=new YY(.05,1,0)):(this.Tgt=0,this.ggt=new YY(.005,.1,0))}};r(),r();var VY=["WA","qA"],WY=class extends i{async Ngt(t,i){let e;for(const s of this.Dgt)try{return await s.Ngt(t,i)}catch(t){yo(t),e=t}throw e}async Igt(t,i){let e;for(const s of this.Dgt)try{return await s.Igt(t,i)}catch(t){yo(t),e=t}throw e}cn(){for(const t of this.Dgt)t.rn(VY,this.Ds),t.cn()}constructor(t){super(),this.Dgt=t;for(const t of this.Dgt)t.ln(VY,this.Ds)}};r(),r(),r();var HY=class{transform(t,i){this.Bd.write(t).catch(xs),i.enqueue(t)}flush(){this.Bd.close().catch(xs)}constructor(t){this.Bd=t}},qY=class{Sgt(){return new XY(sb(this.o_t),this.Egt,this.bgt)}constructor(t,i,e){this.o_t=t,this.Egt=i,this.bgt=e}},XY=class t{get SG(){return this.Lgt}zj(t){return oi(this.Lgt,t)}Lm(){const[i,e]=rb(this.Lgt);return this.Lgt=i,new t(e,this.Egt,this.bgt)}kgt(){const[i,e]=function(t){const i=new xh,e=i.writable.getWriter(),s=new xh(new HY(e));return t.pipeTo(s.writable).catch((t=>{e.abort(t).catch(xs)})),[s.readable,i.readable]}(this.Lgt);return this.Lgt=i,new t(e,this.Egt,this.bgt)}Cgt(t){return this.zj(t).then((t=>new qY(t,this.Egt,this.bgt)))}constructor(t,i,e){this.Lgt=t,this.Egt=i,this.bgt=e}};r();var ZY=class extends Jo{constructor(t,i,e){super(i,e),this.uht=t}},KY="Cache lookup failed.",JY=class extends i{async Ngt(t,i){Pi(i);const e=await this.pct.Kit(t.Fu.Fu,t.Fu.Jet);if(Pi(i),!e)throw new ZY(t,KY);const s=new qY(e.buffer,e.byteLength,e.reference);return{uht:t.uht,xgt:{$w:Ho.MH,JM:s},Vnt:t.Vnt,Fu:t.Fu}}async Igt(t,i){Pi(i);const e=await this.pct.Kit(t.Fu,t.Jet);if(Pi(i),!e)throw new ZY(t,KY);const s=new qY(e.buffer,e.byteLength,e.reference);return{$w:Ho.MH,JM:s}}cn(){this.Bo()}constructor(t){super(),this.pct=t}};r(),r(),r();var $Y=class extends gg{constructor(t,i,e,s,n,r){super(t),this.Ogt=i,this.IQ=e,this.MD=s,this.tN=n,this.TS=r}},tG=class extends $Y{constructor(i,e,s,n,r){super(t.VA,i,e,s,n,r)}};r(),r();var iG=class{constructor(t,i){this.jgt=t,this.zgt=i}},eG=class extends iG{get Agt(){return this.Pgt}start(){}transform(t,i){this.Pgt+=t.byteLength,i.enqueue(t)}flush(){this.Bgt(!1)}s_(){this.Bgt(!0)}Bgt(t){this.jgt(this.zgt,fe.h_(),this.Agt,t)}constructor(...t){super(...t),this.Pgt=0}},sG=class extends iG{get Agt(){return this.Pgt}start(){this.zgt=fe.h_()}transform(t,i){this.Pgt+=t.byteLength,this.Rgt||this.Ugt(t)&&this.Bgt(!1),i.enqueue(t)}flush(){}s_(){this.Bgt(!0)}Ugt(t){const i=this.Qgt(t),e=this.Fgt(i);return Boolean(Gr(e,nG))}Qgt(t){return this.Ygt&&void 0!==this.Ggt?(this.Ygt=Vh([this.Ygt,t]),new ya(Ao(this.Ygt),new Vr(this.Ggt))):(this.Ygt=t,new ya(Ao(t),new Vr))}Fgt(t){const i=Mi.fT(t.JM,t.$M,!0);return i._T?(this.Ygt=void 0,this.Ggt=void 0):this.Ggt=t.$M.qu,i.m}Bgt(t){this.Rgt||(this.jgt(this.zgt,fe.h_(),this.Agt,t),this.Rgt=!0)}constructor(...t){super(...t),this.Pgt=0,this.Rgt=!1}};function nG(t){return t.$w===xv.RM}var rG=class{Vgt(t){const i=t.QG?this.Wgt:fe.h_(),e=this.Hgt(i),s=new xh(e),n=t.SG().pipeTo(s.writable).then((()=>({Q_:{Agt:e.Agt}})),(t=>{throw e.s_(),t}));return this.qgt.n_(n),s.readable}Xgt(t){const i=t.QG?this.Wgt:fe.h_(),e=t.zj(),s=e.then((t=>{const e=fe.h_();return this.wgt(i,e,t.byteLength,!1),{Q_:{Agt:t.byteLength}}}),(t=>{const e=fe.h_();throw this.wgt(i,e,0,!0),t}));return this.qgt.n_(s),e}get Zgt(){return this.qgt.nL}constructor(t){this.Kgt=t,this.qgt=new No,this.wgt=(t,i,e,s)=>{const n={ygt:this.Wgt,pgt:t,mgt:i,Agt:e,Mgt:s};this.Kgt.wgt(n),this.Kgt.sct&&ca.kb.Tz(this.Kgt.ect)},this.qgt.nL.catch(xs),this.Wgt=fe.h_()}},hG=class extends rG{Hgt(t){return new eG(this.wgt,t)}},oG=class extends rG{Hgt(t){return new sG(this.wgt,t)}};r();var aG=class extends $Y{constructor(i,e,s,n,r,h,o){super(t.HA,i,e,s,n,r),this.Jgt=h,this.nm=o}};r();var qn=class extends Jo{constructor(t,i,e){super("Error downloading segment "+uQ(i),t),this.$gt=i.Fm,this.twt=i.Ym,this.iwt=e}},uG=class extends i{ewt(){return fe.cit}swt(){return this.vgt?new oG(this.Kgt):new hG(this.Kgt)}async Ngt(t,i){Pi(i);const e=t.Vnt,s=t.Fu,n=t.uht,r=uQ(n),h=e.Vnt?e.Vnt.Bw:-1;this.mo(new tG(s,e.zz,r,h,e.$w));try{const t=this.swt(),o=await this.nwt.$_t(s,this.ewt(),1e3*x.max(1.2*n.ct,1),i),a=await this.rwt(o,this.ewt(),i,t);return W(this.hwt(t.Zgt,e,s,r,h,o)),{xgt:a,Vnt:e,uht:n,Fu:s}}catch(t){throw yo(t),new qn(t,n,e)}}async Igt(t,i){Pi(i);const e=await this.nwt.igt(t,false,1e4,i);return await this.rwt(e,false,i)}async rwt(t,i,e,s){if(i){const i=s?s.Vgt(t):t.SG();return{$w:Ho.iS,JM:new XY(i)}}{const i=s?await s.Xgt(t):await t.zj(e);return{$w:Ho.MH,JM:new qY(i)}}}async hwt(t,i,e,s,n,r){try{const h=await t;this.mo(new aG(e,i.zz,s,n,i.$w,r.FI,h.Q_.Agt))}catch(t){}}cn(){this.Bo()}constructor(t,i,e){super(),this.nwt=t,this.Kgt=i,this.vgt=e}},cG=class{owt(t,i,e,s,n){const r=new JY(n),h=this.awt(t,e,s);return new WY([r,h])}awt(t,i,e){return new uG(t,i,e)}};r();var lG=.001,dG=class{get M_(){return this.uwt.M_}get cwt(){return this.uwt.cwt}get KH(){return this.uwt.KH}get lwt(){if(this.jJ.cg<ow.Vn)return!1;if(this.uwt.bn<=this.dwt&&this.uwt.fwt())return!0;const t=this.uwt.eP;if(!t||0===t.U)return!1;const i=Ki.ZB(this.w4.E_,1/0);return t.yn(i).jB(this.uwt.KH).qB>=this.oR.ZV}get dwt(){const t=this.uwt.eP;let i;if(t&&t.U>0)i=t.bn(0);else{i=this.w4.E_;const t=this.uwt.KH,e=t.zB(i);e>=0&&(i=t.bn(e))}const e=this.uwt.fg.gn(0);if(e>i){if(this.uwt.gn<=i&&this.uwt.bn>=i&&e>i+lG)throw new An(i,e);i=e}return i=this.uwt._wt.EB(i),i}constructor(t,i,e,s){this.uwt=t,this.w4=i,this.jJ=e,this.oR=s}};r();var fG=class{get gwt(){if(0===this.Gf.size)return Ki.KB();let t=Ki.ZB(0,1/0);return this.Gf.forEach((i=>{t=t.yn(i)})),t}wwt(){let t=Ki.KB();return this.Gf.forEach((i=>{t=t.xB(i)})),t}Awt(t){let i=!1;return this.Gf.forEach((e=>{i=i||e.ar(t)})),i}vwt(t,i){const e=this.Gf.get(i.o);return!!e&&e.ar(t)}PB(t,i){let e=!1;return this.Gf.forEach((s=>{e=e||s.PB(t,i)})),e}mwt(t,i){const e=this.Gf.get(i.o).xB(t);this.Gf.set(i.o,e)}pwt(t){this.Gf.forEach(((i,e)=>{const s=i.xB(t);this.Gf.set(e,s)}))}ywt(t){this.Gf.forEach(((i,e)=>{this.Gf.set(e,i.yn(t))}))}Wn(){this.Gf.forEach(((t,i)=>{this.Gf.set(i,Ki.KB())}))}constructor(t){this.Gf=function(t){const i=Qt();for(const e of t)i.set(e.o,Ki.KB());return i}(t)}},_G=class{get Mwt(){return this.Twt}get KH(){return this.JH}Nwt(t){for(const i of this.det){if(i.Dwt>t)break;if(i.Iwt>t)return i}}Swt(t){for(const i of this.det){if(i.Ewt>t)break;if(i.bwt>=t)return i}}Lwt(t,i){const e=[];for(const s of this.det){if(s.Dwt>t)break;s.Iwt>=i&&e.push(s)}return e}kwt(){return this.det}Cwt(t,i){const e=Ki.ZB(t.Ewt,t.bwt),s=e.bB();this.Twt.ywt(s),this.Twt.mwt(e,i),this.xwt(s);const n=Da(this.det,(i=>t.Dwt<=i.Dwt));if(n<0)this.det.push(t);else{this.det[n].Iwt<=t.Iwt?this.det.splice(n,1,t):this.det.splice(n,0,t)}}$H(t,i){this.JH.mwt(t,i)}Owt(t){this.JH.pwt(t)}ywt(t){this.Twt.ywt(t),this.JH.ywt(t);const i=this.Twt.wwt();this.xwt(i)}xwt(t){this.det=this.det.filter((i=>t.RB(i.Ewt,i.bwt))).map((i=>i.bft&&!t.PB(i.Ewt,i.bwt)?function(t,i){return{Dwt:t.Dwt,Iwt:t.Iwt,Ewt:t.Ewt,bwt:t.bwt,bft:i}}(i,!1):i))}Wn(){this.Twt.Wn(),this.JH.Wn(),this.det=[]}cn(){this.Wn()}constructor(t){this.det=[],this.Lt=t,this.Twt=new fG(t.Kst),this.JH=new fG(t.Kst)}};r(),r();var gG=class{get O_t(){return this.jwt}set O_t(t){this.jwt=t}get eut(){return this.x_t.Lt.eut}async zwt(t,i,e){let s;Pi(e);const n=this.x_t.Swt(t);s=n&&Ua(n.bwt,t,1e-5)?x.max(n.Iwt,t):t;const r=this.Pwt(s),h=function(t){return wG.bind(void 0,t)}(s);let o=await this.P7.Bwt(h,r,i,e);for(Pi(e);o&&this.Rwt(o.uht);){const t=pG(o.uht),s=o.Vnt;o=await this.P7.Bwt(t,[s],i,e),Pi(e)}if(!o)return void 0;if(!this.Uwt(o.uht))return o;const a=this.Qwt(o.uht);if(t<a.gn)return await this.findFirstNonAppendedSegmentBeforeSegment(o,i,e,a);if(t>=a.bn)return await this.findFirstNonAppendedSegmentAfterSegment(o,i,e);if(!o.Vnt.rrt(o.uht))throw new b("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,i,e){let s=t;do{const n=pG(s.uht),r=t.Vnt;s=await this.P7.Bwt(n,[r],i,e),Pi(e)}while(s&&this.Uwt(s.uht));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,i,e,s){let n=t;do{const s=mG(n.uht),r=t.Vnt;n=await this.P7.Bwt(s,[r],i,e),Pi(e)}while(n&&this.Uwt(n.uht));if(!n){0;const i=t.Vnt.Gnt.gn;throw new An(i,s.gn,t.Vnt)}return n}Fwt(t){return this.x_t.Mwt.Awt(t)}Ywt(t){return this.x_t.Lwt(t.Fm,t.Ym)}Uwt(t){const i=this.Ywt(t);return i.length>0&&function(t,i){return function(t){let i=Ki.KB();for(const e of t)i=i.xB(Ki.ZB(e.Dwt,e.Iwt));return i}(t).PB(i.Fm,i.Ym)}(i,t)&&i.every(yG)}Rwt(t){return this.x_t.KH.PB(t.Fm,t.Ym)}Qwt(t){const i=this.Ywt(t);return{gn:i[0].Ewt,bn:i[i.length-1].bwt}}Pwt(t){const i=this.Gwt(t);if(0===i.length)return i;const e=i.filter((t=>!t.qnt));return e.length>0?e:[i[i.length-1]]}Gwt(t){return(this.jwt?this.jwt:this.x_t.Lt.Kst).filter((i=>!this.x_t.KH.vwt(t,i)))}constructor(t,i,e){this.X_t=t,this.x_t=i,this.P7=e}};async function wG(t,i,e,s){const n=i.fst.mrt(t);if(n){if(i.trt(n)){return(await i.irt(n,e,s)).Oht(t)}return n}}async function AG(t,i,e,s){if(Ft(t)){if(0===t.Lnt)return;const n=i.fst.Zrt(t);if(!n)return;return(await i.irt(n,e,s)).bht(t.Lnt-1)}return i.fst.Rrt(t)}async function vG(t,i,e,s){if(Ft(t)){const n=i.fst.Zrt(t);if(!n)return;const r=await i.irt(n,e,s);if(t.Lnt+1===r.U)return;return r.bht(t.Lnt+1)}return i.fst.xrt(t)}function mG(t){return AG.bind(void 0,t)}function pG(t){return vG.bind(void 0,t)}function yG(t){return t.bft}r();var MG=class{async Bwt(t,i,e,s){Pi(s);const n=this.Vwt(i,e);if(!n)return;const r=await t(n,this.Wwt,s);if(!r)return;const h=n.Znt(r);return{Vnt:n,uht:r,Fu:h}}Vwt(t,i){if(0===t.length)return;const e=this.Hwt.Jut(t,this.qwt?i:void 0,this.uwt,this.oR.HV);return this.qwt||(this.qwt=!0),e}constructor(t,i,e,s){this.Hwt=t,this.uwt=i,this.oR=e,this.Wwt=s,this.qwt=!1}};r();var TG=class{async Bwt(t,i,e,s){Pi(s);const n=this.Hwt.ict(i,e,this.uwt);if(!n.length)return;let r;for(const i of n)try{Pi(s);const e=await t(i,this.Wwt,s);if(e){const t=i.Znt(e);if(await this.pct.Xit(t.Fu,t.Jet))return{uht:e,Vnt:i,Fu:t}}}catch(t){yo(t),r=t}if(r)throw r}constructor(t,i,e,s){this.Hwt=t,this.uwt=i,this.pct=e,this.Wwt=s}};r();var NG=(t,i,e,s,n)=>t.filter((t=>n.SH(t)&&s.stt(i,t)));r();var DG=(t,i,e)=>t.filter((t=>function(t,i,e){const s=e.ect;if(s<=0)return!1;return.8*s>t.zz*e.Z_}(t,0,e)));r();var IG=(t,i,e,s,n)=>{const r=e.act;if(void 0===r&&!s.Qs)return t;if(!1===r)return t;if(t.length>0&&t[0].$w!==Tw.Yv)return t;for(let i=t.length-1;i>=0;i--){const s=t[i];if(s.Ti===e.hct&&s.ji===e.rct)return t.slice(0,i+1);if(s.Ti<e.hct||s.ji<e.rct)return t.slice(0,i+2)}return[]};r();var SG=class{async Bwt(t,i,e,s){let n;for(const r of this.Xwt)try{const n=await r.Bwt(t,i,e,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this.Xwt=t}};r(),r();var EG=class{async hot(t,i,e,s){let n;for(const r of this.Zwt)try{return await r.hot(t,i,e,s)}catch(t){yo(t),n=t}throw n}constructor(t){this.Zwt=t}};r();var bG=class{async hot(t,i,e,s){var n;const r=await this.LS.BI({Fu:t,pS:Rt.$I,vS:i?{Range:"bytes="+i[0]+"-"+(null!=(n=i[1])?n:"")}:void 0,NS:e,mS:Kc.GET,$w:zu.Hv,i_:s});return await r.zj()}constructor(t){this.LS=t}};r();var LG=class{async hot(t,i,e,s){const n=await this.pct.Kit(t,i);if(n)return n.buffer;if(i){const e=await this.pct.Kit(t);if(e)return Th(new T(e.buffer),i[0],i[1])}throw new ZY({Fu:t,Jet:i,NS:!1})}constructor(t){this.pct=t}};r();var kG=1.05,CG=(t,i,e,s)=>{if(!1===e.act)return t;if(s.q7)return t;const n=s.X7;var r;const h=(null!=(r=null==n?void 0:n.width)?r:e.rct)*kG;var o;const a=(null!=(o=null==n?void 0:n.height)?o:e.hct)*kG;for(let i=t.length-1;i>=0;i--){const e=t[i];if(e.Ti<=a&&e.ji<=h)return t.slice(0,i+1)}return[]},xG=class{static g8(t,i,e,s,n,r,h,o,a,u){const c=function(t,i){return new EG([new LG(i),new bG(t)])}(r,h),l=new VF([NG],n,fe.Ys,o,a,u),d=new TG(l,i,h,c),f=new VF([DG,NG,IG,CG],n,fe.Ys,o,a,u),_=new MG(f,i,s,c),g=new SG([d,_]);return new gG(t,e,g)}};r();var OG=class{Xct(t,i,e,s){return this.uwt.Xct(t,i,e,s)}Kwt(t,i,e){return this.uwt.Cft(t,i,e)}Jwt(t,i,e){return this.uwt.Jwt(t,i,e)}$H(t,i){this.uwt.$H(t,i)}tq(t,i){this.uwt.tq(t,i)}_J(){this.uwt._J()}iW(){return this.uwt.iW()}constructor(t){this.uwt=t}};r(),r();var jG=class extends gg{constructor(i,e,s,n,r,h=0){super(t.GA),this.segmentStartTime=i,this.error=e,this.trackType=s,this.track=n,this.quality=r,this.retryCount=h}};r();var zG=class extends gg{constructor(i,e){super(t.gA),this.track=i,this.segments=e}},PG=class extends Jo{constructor(t,i){super(i),this.$wt=t}},BG=[t.VA,t.HA],RG=class extends i{get b_t(){return this.tAt}get k_t(){return this.iAt}set O_t(t){this.eAt.O_t=t}get O_t(){return this.eAt.O_t}get eut(){return this.x_t.Lt.eut}sAt(t){return!this.PK||!t||!ba(this.PK.o_t,t.o_t)}Z_t(t){if(!this.tAt)return!1;const i=this.tAt.uht,e=Ki.ZB(i.Fm,i.Ym),s=this.nAt.cwt,n=s.zB(t);return n<0?e.ar(t,lG):e.RB(t,s.bn(n),!0,!0,lG)}async H_t(t){const i=this.x_t.Lt.Kst;for(;;)try{Pi(t),this.K_t();if(this.J_t())break;const e=this.rAt(),s=await this.Bwt(e,t);if(void 0===s)break;if(this.tAt=s,!UG(this.tAt)){await this.hAt(this.tAt,t);continue}this.iAt&&!qt(this.iAt.Vnt.gP,this.tAt.Vnt.gP)&&await this.lct.bH(this.tAt.Vnt),await this.oAt(e,this.tAt.uht,t),this.PK=await this.aAt(this.tAt.Vnt,t);const n=await this.Ngt(this.tAt,t),r=this.nAt.M_,h=this.iAt;this.iAt=await this.uAt(n,t);const o=this.nAt.M_;this.cAt(h,this.tAt,r,o),i.forEach((t=>t.qnt=!1))}catch(e){if(e instanceof An){this.yJ(e.gn,e.bn,e.Vnt);continue}if(e instanceof PG){let s;if(i.every((t=>t.qnt))){if(this.lAt===this.gct.maxRetries)throw new ce(le.MEDIA_LOAD_ERROR,e.message,e);this.lAt++,s=x.min(this.gct.minimumBackoff*2**(this.lAt-1),this.gct.maximumBackoff)}await be(null!=s?s:500,t);continue}throw this.dAt=Ki.KB(),e}finally{this.tAt=void 0}}cAt(t,i,e,s){const n=s.jB(e),r=i.Vnt.ert(i.uht),h=i.Vnt.rrt(i.uht);let o=i.uht.Fm,a=i.uht.Ym;r&&(o=x.min(o,x.max(0,i.Vnt.Gnt.gn-.05))),h&&(a=x.max(a,i.Vnt.Gnt.bn));const u=Ki.ZB(o,a).jB(s);if(0===n.U)return 0===this.dAt.U&&this.dAt.xB(Ki.ZB(e.bn(e.U-1),o)),this.dAt=this.dAt.xB(u),void this.x_t.Owt(this.dAt);if(r||this.dAt.U>0){const t=u.yn(Ki.ZB(o,n.gn(0)));this.fAt(t)}const c=n.bB().yn(Ki.ZB(n.gn(0),n.bn(n.U-1)));if(this.fAt(c),h){const t=u.yn(Ki.ZB(n.bn(n.U-1),a));this.fAt(t)}if(this.dAt.U>0){const t=this.dAt.jB(n);this.fAt(t),this.dAt=Ki.KB()}const l=i.Vnt.fst,d=Ft(i.uht)?void 0:l.Rrt(i.uht);var f;const _=null!=(f=null==t?void 0:t.uht)?f:this._At(d)?d:void 0;if(_){const t=this.x_t.Lwt(_.Fm,_.Ym);if(t.length>0){const i=Ki.ZB(t[t.length-1].bwt,n.gn(0));this.fAt(i)}}const g=Ft(i.uht)?void 0:l.xrt(i.uht);if(g&&this._At(g)){const t=this.x_t.Lwt(g.Fm,g.Ym);if(t.length>0){const i=Ki.ZB(n.bn(n.U-1),t[0].Ewt);this.fAt(i)}}}_At(t){return!!t&&this.x_t.Lwt(t.Fm,t.Ym).length>0}fAt(t){const i=t.jB(this.nAt.M_);for(let t=0;t<i.U;t++)i.gn(t)!==i.bn(t)&&this.gAt.$H(i.gn(t),i.bn(t))}wAt(t,i){throw new PG(t,i)}K_t(){if(this.dAt.U>0)return;var t;const i=this.nAt.cwt.xB(null!=(t=this.nAt.KH.SB().HB(this.nAt.dwt))?t:Ki.KB());this.x_t.ywt(i),this.AAt&&!this.vAt(this.AAt)&&(this.AAt=void 0),this.mo(new zG(this.x_t.Lt.eut,this.x_t.kwt()))}J_t(){return this.iAt&&this.iAt.Vnt.rrt(this.iAt.uht)?(this.gAt._J(),!0):(this.AAt&&this.AAt.Vnt.rrt(this.AAt.uht)&&this.vAt(this.AAt)&&this.gAt._J(),!!this.nAt.lwt)}vAt(t){return this.x_t.Mwt.PB(t.mAt,t.pAt)}yAt(t,i,e){(!this.AAt||this.AAt.uht.Ym<t.uht.Ym)&&(this.AAt=oe({},t,{mAt:i,pAt:e}))}rAt(){const t=this.nAt.dwt;return t}async Bwt(t,i){Pi(i);const e=this.iAt?this.iAt.Vnt:void 0,s=await this.eAt.zwt(t,e,i);if(s)return s}async hAt(t,i){const e=t.Vnt,s=e.fst,n=Ft(t.uht)?s.Zrt(t.uht):t.uht,r=e.Ynt.iat(),h=s.Crt(n);if(h&&h.getTime()<=r.getTime())return this.wAt(Eu.Aut,"Segment is not available.");const o=s.Ort(n).getTime()-r.getTime();await cg((t=>Promise.race([be(o,t),e.v_(xl.knt,t)])),i)}async aAt(t,i,e){void 0===e&&(e=0),Pi(i);const s=t.Qnt;if(!s)return this.PK;try{if(!t.Rnt){const e=await this.MAt.Igt(s,i);t.Rnt=e.JM}}catch(s){if(yo(s),zt(s)){if(2===e)return t.qnt=!0,this.wAt(Eu.Iut,"Could not fetch the initializer.");const s=x.min(this.gct.minimumBackoff*2**e,this.gct.maximumBackoff);return await be(s,i),this.aAt(t,i,e+1)}throw new ce(le.MEDIA_LOAD_ERROR,s.message,s)}Pi(i);try{this.sAt(t.Rnt)&&await this.gAt.Kwt(t.Rnt,t,i)}catch(t){if(yo(t),zt(t))return this.wAt(Eu.Iut,"Could not append the initializer.");throw new ce(le.MEDIA_DECODE_ERROR,t.message,t)}return t.Rnt}async Ngt(t,i,e){void 0===e&&(e=0);try{return Pi(i),await this.MAt.Ngt(t,i)}catch(s){if(yo(s),s instanceof qn){if(ip(s.cause))return this.TAt(new qn(s,t.uht,t.Vnt),e),this.wAt(Eu.Aut,"Could not append the segment.");if(2===e)return t.Vnt.qnt=!0,this.TAt(s,e),this.NAt(t,s),this.wAt(Eu.Aut,"Could not fetch the segment.");const n=x.min(this.gct.minimumBackoff*2**e,this.gct.maximumBackoff);return await be(n,i),await this.Ngt(t,i,e+1)}throw new ce(le.MEDIA_LOAD_ERROR,s.message,s)}}async oAt(t,i,e){const s=this.x_t.Lwt(i.Fm,i.Ym),n=this.nAt.cwt.HB(t);let r=Ki.KB();for(const t of s){Pi(e);const i=t.Ewt,s=t.bwt,h=n&&n.RB(i,s)?x.max(i,n.bn(0)):i,o=s;h<o&&(r=r.xB(Ki.ZB(h,o)))}for(let t=0;t<r.U;t++)await this.gAt.Jwt(r.gn(t),r.bn(t),e);this.K_t()}async uAt(t,i){try{Pi(i);const e=await this.gAt.Xct(t.xgt,t.uht,t.Vnt,i);return this.DAt(t,e.mAt,e.pAt),this.yAt(t,e.mAt,e.pAt),t}catch(i){if(yo(i),zt(i))return this.TAt(new qn(i,t.uht,t.Vnt),0),this.wAt(Eu.Aut,"Could not append the segment.");if(fc(i)&&this.gAt.iW())return this.wAt(Eu.mut,"Buffer is full. Could not reduce the buffer.");throw new ce(le.MEDIA_DECODE_ERROR,i.message,i)}}DAt(t,i,e){const s=t.Vnt,n=t.uht;this.Cwt(n,s,i,e)}Cwt(t,i,e,s){this.x_t.Cwt({Dwt:t.Fm,Iwt:t.Ym,Ewt:e,bwt:s,bft:!0},i),this.gAt.tq(e,s)}yJ(t,i,e){const s=Ki.ZB(t,i);e?this.x_t.$H(s,e):this.x_t.Owt(s),this.gAt.$H(t,i)}NAt(t,i){if(!i||!i.cause)return;const e=i.cause;if(ip(e)||gu(e)&&e.UI.FI>=400&&e.UI.FI<500){const i=Ki.ZB(t.uht.Fm,t.uht.Ym);t.Vnt?this.x_t.$H(i,t.Vnt):this.x_t.Owt(i);const e=this.nAt.M_;this.cAt(this.iAt,t,e,e)}}TAt(t,i){const e=t.$gt,s=this.x_t.Lt.eut,n=this.x_t.Lt.oa,r=t.iwt.Vnt&&t.iwt.Vnt.oa,h=new jG(e,t.message,s,n,r,i);this.mo(h)}Wn(){this.PK=void 0,this.iAt=void 0}cn(){this.Wn(),this.AAt=void 0,this.MAt.rn(BG,this.Ds),this.MAt.cn()}constructor(t,i,e,s,n,r,h,o){super(),this.X_t=t,this.x_t=i,this.nAt=e,this.eAt=s,this.MAt=n,this.gAt=r,this.lct=h,this.gct=o,this.tAt=void 0,this.PK=void 0,this.iAt=void 0,this.AAt=void 0,this.lAt=0,this.dAt=Ki.KB(),this.MAt.ln(BG,this.Ds)}};function UG(t){const i=t.Vnt,e=i.fst,s=Ft(t.uht)?e.Zrt(t.uht):t.uht;return e.Prt(s,i.Ynt.iat())}var QG=0,FG=class{g8(t){const i=QG++,e=this.uwt.wJ,s=new _G(t),n=new GY(e,this.IAt),r=new dG(this.uwt,this.w4,this.jJ,this.oR),h=xG.g8(i,this.uwt,s,this.oR,n,this.LS,this.pct,this.uct,this.$ut,this.lct),o=function(t){switch(t){case Tw.Gv:return yn.Gv;case Tw.Yv:return yn.Yv;case Tw.Eu:return yn.Eu;case Tw.Wv:return yn.Wv;default:return yn.Hv}}(e),a=new QY(this.LS,o),u=this.owt(a,n,this.IAt),c=new OG(this.uwt),l=new RG(i,s,r,h,u,c,this.lct,this.gct);return new UY(i,t.jnt,s,l,this.w4)}constructor(t,i,e,s,n,r,h,o,a,u,c){this.uwt=t,this.w4=i,this.jJ=e,this.LS=s,this.oR=n,this.IAt=r,this.pct=h,this.uct=o,this.$ut=a,this.lct=u,this.gct=c}},YG=class extends FG{owt(t,i,e){return(new cG).owt(t,this.uwt,i,e,this.pct)}},GG=class extends FG{SAt(t,i){const e={eut:Tw.Eu,jnt:i,Kst:i.Kst,oa:t.oa};return super.g8(e)}owt(t,i){return(new cG).owt(t,this.uwt,i,!1,this.pct)}};r();var VG=class{SH(t){return this.EAt.SH(t)}bH(t){return this.EAt.bH(t)}constructor(t){this.EAt=t}},WG=class{SH(t){return!0}bH(t){return Promise.resolve(void 0)}},HG=class extends OY{get eP(){const t=this.w4.E_;return this.cwt.HB(t,.01)}get bAt(){return this.Gat&&this.LAt[this.Gat.Bw]?this.LAt[this.Gat.Bw]:Ki.KB()}get kAt(){return this.Gat&&this.CAt[this.Gat.Bw]?this.CAt[this.Gat.Bw]:Ki.KB()}get _wt(){return new Ki([0,1/0])}get M_(){return this.bAt}get KH(){return this.xAt?this.xAt.C_t.KH.gwt:Ki.KB()}get cwt(){return jY(this.M_,this.KH).CB(2*this.OAt)}get gn(){return this.c_t?this.c_t.Gnt.gn:NaN}get bn(){return this.c_t?this.c_t.Gnt.bn:NaN}get C_(){const t=this.bn;return!!t&&this.w4.E_>=t}get OAt(){var t;const i=this.A_t();if(!i)return.04;var e;return 1/(null!=(e=this.Gat&&(null==i||null==(t=i.yst)?void 0:t.vp()))?e:25)}get Ti(){return this.yk}get wJ(){return Tw.Eu}get Z_(){return this.eR}set Z_(t){this.eR=t}get eg(){return this.kAt}get fg(){if(!this.Gat)return Ki.XB(0);const t=this.w_t(this.Gat),i=null==t?void 0:t.lrt,e=null==t?void 0:t.crt;if(void 0===e||void 0===i)return Ki.XB(0);const s=x.max(i,this.w4.E_);return new Ki([e,s]).SB()}get ji(){return this.pk}_J(){}fwt(){return this.cwt.ar(this.bn)}async Xct(t,i,e,s){const n=t.$w===Ho.MH?t.JM.o_t:await t.JM.zj(s),r=this.findTrackForRepresentation(e),h=this.LAt[r.Bw],o=i.Fm,a=i.Ym,u=new Ki([o,a]);h||(this.LAt[r.Bw]=Ki.KB(),this.CAt[r.Bw]=Ki.KB()),this.jAt(s);const c=this.xft(new T(n),i,e,r);for(const t of c)r.xS(t);return this.LAt[r.Bw]=this.LAt[r.Bw].xB(u),{mAt:o,pAt:a}}jAt(t){const i=zb(this.w4.E_,void 0,void 0,this.M_,this.oR.ZV,this.oR.GV);for(const[e,s]of i)W(this.Jwt(e,s,t))}Cft(t,i,e){return this.zAt.Cft(t,i,e)}xft(t,i,e,s){return this.zAt.xft(t,i,e,s)}Jwt(t,i,e){const s=t,n=i;let r=new Ki([t,i]);for(const t of this.Z.Nw){const i=[];for(const e of t.L.Nw)e.Fm>=s&&e.Ym<=n?i.push(e):r=r.jB(new Ki([e.Fm,e.Ym]));for(const e of i)t.GI(e);const e=this.LAt[t.Bw];e&&(this.LAt[t.Bw]=e.jB(r))}return Promise.resolve()}$H(t,i){}tq(t,i){}iW(){return!1}ZI(t){if(super.ZI(t),this.zAt.Wn(),this.xAt&&(this.xAt.cn(),this.xAt=void 0),this.Gat){const t=this.w_t(this.Gat);this.xAt=new GG(this,this.w4,this.w4,this.LS,this.oR,!1,this.pct,void 0,void 0,new WG,Dw).SAt(this.Gat,t),this.xAt.ln(Bi.Zo,this.PAt),this.xAt.gn(Eu.uut)}}KI(t){this.Gat===t&&(super.KI(t),this.xAt&&(this.xAt.cn(),this.xAt=void 0))}l_t(t){const i=function(t){const i=t.Kst&&t.Kst.length>0&&t.Kst[0],e=i&&sp(i.Ast),s=sp(t.Ast),n=t.rY===wo.APPLICATION_TTML_XML;return e||s||n?Ks.TTML:t.rY===wo.TEXT_VTT||Uo(t.rY,t.Ast)?Ks.WEBVTT:Ks.DEFAULT}(t);if(!i)throw new b("Unknown TextTrack type for Representation");const e=t.Jst.concat(t.Ust);return this.BAt(function(t){return na(t.filter((t=>"urn:mpeg:dash:role:2011"===t.Zet)).map((t=>t.zy)).filter(z_),"caption")?Pt.kI:Pt.HM}(e),t.dh,t.X5,!1,i,t,function(t){return t.filter((t=>"urn:mpeg:dash:role:2011"===t.Zet)).some((t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.zy)))}(t.Jst),t.Ust.map(kF).filter(z_))}async Wn(){await super.Wn(),this.xAt&&(await this.xAt.Wn(Eu.xut),this.xAt.rn(Bi.Zo,this.PAt),this.xAt=void 0),this.c_t=void 0,this.LAt={},this.CAt={}}RAt(){this.LAt={},this.CAt={}}findTrackForRepresentation(t){for(const i of this.Z.Nw){const e=this.w_t(i);if(e&&OY.v_t(e)===t)return i}}constructor(t,i,e,s,n){super(),this.yk=0,this.eR=1,this.xAt=void 0,this.LAt={},this.CAt={},this.pk=0,this.PAt=t=>{0},this.w4=t,this.LS=i,this.oR=e,this.zAt=s,this.pct=n}},qG=class extends HG{BAt(t,i,e,s,n,r,h,o){var a;const u=r.Kst.reduce(((t,i)=>t||i.o),void 0);var c;const l=null!=(c=null!=u?u:null==(a=r.o)?void 0:a.toString())?c:"";return this.ES.SS(t,l,i,e,s,n,h,o)}cn(){for(const t of this.Z.Nw)this.ES.jS(t);return super.cn()}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.ES=r}},XG=class{get nt(){return this.Al}async bS(t){if(t.$w!==Tw.Eu)return;const i=function(t,i){return sp(i)||t===wo.APPLICATION_TTML_XML||t===wo.TEXT_VTT?new LY:Uo(t,i)?new CY:void 0}(t.rY,t.Ast);if(i){const e=this.UAt(i);return this.QAt(e),await e.Pn(t),e}}UAt(t){return new qG(this.w4,this.LS,this.oR,t,this.pct,this.ES)}QAt(t){this.FAt.push(t),this.Al.Vz(t.Z)}async Wn(){for(const t of this.FAt.slice())await t.Wn();Ri(this.FAt),this.Al.Wn()}async cn(){for(const t of this.FAt)await t.cn();Ri(this.FAt),this.Al.cn()}constructor(t,i,e,s,n){this.FAt=[],this.Al=new yh([]),this.w4=t,this.LS=i,this.oR=e,this.pct=s,this.ES=n}};r();var ZG=class extends gg{constructor(){super(Ar.Zut)}},KG=class extends i{VV(t,i){return this.YAt(t,i)}async YAt(t,i){for(const i of t)this.GAt(i);await this.Pn(i);for(const t of this.urt.yot)t.$w===Tw.Eu&&(t.Kst&&0!==t.Kst.length?await this.VAt.bS(t):this.mo(new QF("No supported representation found in the AdaptationSet with mimetype : "+t.$w)))}get Bw(){return this.Mm}F_t(){return this.FAt.some((t=>t.F_t()))}fwt(){return 0!==this.FAt.length&&this.FAt.every((t=>t.fwt()))}WAt(){this.Sdt()&&this.mo(new ZG)}HAt(i){i.ln([Bi.Zo,t.UA,t.GA,t.VA,t.HA,t.gA],this.Ds),i.ln(ii.pH,this.qAt),i.ln("fdt",this.Ds)}get Rt(){return this.FAt.some((t=>t.Rt))}async XAt(t){await Promise.all(this.FAt.map((i=>i.cn(t)))),Ri(this.FAt)}get ht(){return this.qv}get M_(){if(0===this.FAt.length)return Ki.KB();const t=this.FAt.map((t=>t.M_));let i=Ki.ZB(0,1/0);for(const e of t)i=i.yn(e);if(0===i.U)return i;if(this.fwt()){const t=i.yn(this._wt);if(0===t.U)return i;const e=t.bn(t.U-1);let s=0;for(const t of this.FAt)s=x.max(s,t.ZAt);e<=s&&(i=i.xB(new Ki([e,s],[!0,!0])))}return i}get E_(){return this.sP.E_}get kdt(){return this.KAt}get bn(){if(this.Rlt){const t=this.ct;if(!j(t)&&t!==pu)return t}if(!this.FAt.length)return NaN;let t=0;for(const i of this.FAt)t=x.max(t,i.bn);return t}get Rlt(){const t=this.urt.Ynt;if(t.$w===Q.iO)return!1;const i=t.wnt;return 0!==i.length&&this.urt===i[i.length-1]}get fg(){if(!this.FAt.length)return Ki.KB();let t=new Ki([0,1/0]);for(const i of this.FAt)t=t.yn(i.fg);if(t.U>0&&this.Rlt&&isFinite(this.ct)){const i=this.ct,e=t.bn(t.U-1);i>e&&(t=t.xB(Ki.ZB(e,i).SB()))}return t}get cc(){return this.urt}get nt(){return this.Al}get rt(){return this.Zv}get eP(){const t=this.E_,i=this.M_,e=i.zB(t);if(-1!==e)return{gn:i.gn(e),bn:i.bn(e)}}get _wt(){const t=this.urt.gn,i=this.Rlt?1/0:this.urt.bn;return Ki.ZB(t,i)}Sdt(){if(this.F_t())return!1;if(!this.fwt())return!1;const t=this.M_;if(0===t.U)return!1;const i=this.E_;if(this.Rlt)return t.gn(t.U-1)<=i;{const e=t.yn(this._wt);if(0===e.U)return!0;const s=e.gn(e.U-1),n=e.bn(e.U-1)+.1;return s<=i&&i<=n}}get eft(){return this.JAt}async wlt(t){this.JAt||(this.JAt=!0,await Promise.all(this.FAt.map((i=>i.wlt(t)))))}async Llt(t){this.JAt&&(this.JAt=!1,await Promise.all(this.FAt.map((i=>i.Llt(t)))))}async cn(t){this.Bo(),this.urt.rn(xl.xnt,this.Ds),this.$At.s_(),this.tvt&&(await this.tvt.catch(xs),this.tvt=void 0),await this.XAt(t),await this.VAt.cn(),this.qv.cn(),this.Zv.cn(),this.Al.cn(),this.ivt()}GAt(t){this.evt.push(t),t.ln("Fat",this.svt);const i=t.$w===Tw.Gv?this.qv:this.Zv;for(const e of t.Z)i.tt(e)}nvt(t){const i=t.$w===Tw.Gv?this.qv:this.Zv;for(const e of t.Z)i.it(e),e.cn();t.cn(),Et(this.evt,t)}ivt(){for(let t=this.evt.length-1;t>=0;t--)this.nvt(this.evt[t])}get vlt(){return this.evt.map((t=>t.Gat)).filter(z_)}get Alt(){return this.FAt.map((t=>t.Gat)).filter(z_)}Pn(t,i){return this.$At.s_(),this.$At=new Po,i&&this.$At.n_(i),this.tvt=ui(this.Ztt(t,this.tvt,this.$At.i_),this.$At).catch(this.flt),this.tvt}async Ztt(t,i,e){i&&await i.catch(xs),Pi(e);const s=[],n=this.FAt.slice(),r=t.slice();Ri(this.FAt);for(const t of n){const i=t.Gat;i&&na(r,i)?(this.FAt.push(t),s.push(t.Pn(i,e)),Et(r,i)):(this.Al.Xz(t.nt),await t.cn(),Pi(e))}for(const t of r){const i=this.rvt(t.eut);this.Al.Vz(i.nt),this.FAt.push(i),this.HAt(i),s.push(i.Pn(t,e))}await Promise.all(s),this.ovt()}async avt(t,i){await this.Pn(t),this.KAt=i}constructor(t,i,e,s,n,r,h,o,a,u){super(),this.qv=new qe,this.Zv=new qe,this.evt=[],this.$At=new Po,this.JAt=!0,this.FAt=[],this.tvt=void 0,this.qAt=oo((()=>{this.mo(new _i(this.E_))}),350),this.svt=t=>{const i=t.Yat.Gat;if(i)for(const t of this.evt){var e;t.Gat&&t.Gat!==i&&t.$w===(null==(e=i.Qst)?void 0:e.$w)&&(t.rn("Fat",this.svt),t.Gat.Rt=!1,t.ln("Fat",this.svt))}this.Ds(t)},this.flt=t=>{Oi(t)||this.mo(new me(new ce(le.MEDIA_LOAD_ERROR,t.message,t)))},this.uvt=t=>{const i=t.L1;if(i)for(const t of this.Alt){if((t.jnt.mst||[]).some((t=>t.GO&&ms(Ur(i),ME(t.GO)))))return void this.mo(new Le(new Yr(le.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions")))}},this.LS=t,this.oR=i,this.pct=e,this.sP=s,this.lc=n,this.Mm=mu(),this.evt=[],this.urt=r,this.KAt=h,this.ES=o,this.VAt=new XG(s,t,i,e,o),this.Al=new yh([this.VAt.nt]),this.gct=a,this.aft=u,this.urt.ln(xl.xnt,this.Ds)}};r(),r(),r();var JG=[Bi.Zo,t.GA,t.VA,t.HA,t.gA];r();var $G=0;r();var ot,fi,tV,iV=class extends gg{constructor(i,e){super(t.UA),this.representation=i,this.previousRepresentation=e}};function eV(t,i,e){return e===ot.cvt?e:i!==fi.lvt&&i!==fi.dvt||e!==ot.fvt&&e!==ot._vt?t?i===fi.gvt?ot.wvt:i===fi.Avt?ot.vvt:ot.cvt:ot.mvt:ot._vt}function sV(t,i,e,s){const n={byte:e};let r=ot.fvt;const h=[],o=31&XL(i,n,s);n.byte+=1;for(let e=0;e<o;e+=1){const o=XL(i,n,s),a=4&o,u=3&o;r=eV(Boolean(a),u,r);const c=XL(i,n,s),l=XL(i,n,s);h.push({pvt:t,MD:-1,yvt:!e,Mvt:Boolean(a),$w:u,n5:r,Tvt:c,Nvt:l})}return h}function nV(t,i,e){const s=XL(t,i,e);if(!j(s))return String.fromCharCode(s)}function rV(t){const i=t.dZ,e={byte:t.cZ},s=t.lZ,n=XL(i,e,s);if(255===n&&(e.byte+=1),181!==n)return;const r=ZL(i,e);if(47!==r&&49!==r)return;if(49===r){const t=function(t,i,e){let s="",n=e;for(;n>0;)n-=1,s+=nV(t,i);return s}(i,e,4);if("GA94"!==t)return}if(3!==XL(i,e,s))return;47===r&&(e.byte+=1);const h=t;return h.Dvt=e.byte,h}function hV(t){return 4===t.aZ}function oV(t){const i=t.filter(hV).map(rV).filter(z_),e=[];for(const t of i)e.push(...sV(t.oZ,t.dZ,t.Dvt,t.lZ));return e}r(),r(),r(),function(t){t[t.cvt=0]="cvt",t[t.fvt=1]="fvt",t[t._vt=2]="_vt",t[t.vvt=3]="vvt",t[t.wvt=4]="wvt",t[t.mvt=5]="mvt"}(ot||(ot={})),function(t){t[t.lvt=0]="lvt",t[t.dvt=1]="dvt",t[t.gvt=2]="gvt",t[t.Avt=3]="Avt"}(fi||(fi={})),function(t){t[t.Ivt=47]="Ivt",t[t.Svt=49]="Svt"}(tV||(tV={})),r();var aV="und";function uV(t){if(t===aV)return;const i=t.toLowerCase();for(const t of cV)if(t[1]===i||t[2]===i||t["2T"]===i||t["2B"]===i||t[3]===i)return t}var cV=[{l:"Abkhaz",eh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",eh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",eh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",eh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",eh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",eh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",eh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",eh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",eh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",eh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",eh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",eh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",eh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",eh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",eh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",eh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",eh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",eh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",eh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",eh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",eh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",eh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",eh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",eh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",eh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",eh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",eh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",eh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",eh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",eh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",eh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",eh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",eh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",eh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",eh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",eh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",eh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",eh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",eh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",eh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",eh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",eh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",eh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",eh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",eh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",eh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",eh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",eh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",eh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",eh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",eh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",eh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",eh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",eh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",eh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",eh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",eh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",eh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",eh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",eh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",eh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",eh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",eh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",eh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",eh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",eh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",eh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",eh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",eh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",eh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",eh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",eh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",eh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",eh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",eh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",eh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",eh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",eh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",eh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",eh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",eh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",eh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",eh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",eh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",eh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",eh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",eh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",eh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",eh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",eh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",eh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",eh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",eh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",eh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",eh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",eh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",eh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",eh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",eh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",eh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",eh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",eh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",eh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",eh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",eh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",eh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",eh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",eh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",eh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",eh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",eh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",eh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",eh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",eh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",eh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",eh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",eh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",eh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",eh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",eh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",eh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",eh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",eh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",eh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",eh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",eh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",eh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",eh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",eh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",eh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",eh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",eh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",eh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",eh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",eh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",eh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",eh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",eh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",eh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",eh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",eh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",eh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",eh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",eh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",eh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",eh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",eh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",eh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",eh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",eh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",eh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",eh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",eh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",eh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",eh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",eh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",eh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",eh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",eh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",eh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",eh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",eh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",eh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",eh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",eh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",eh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",eh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",eh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",eh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",eh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",eh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",eh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",eh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",eh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",eh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",eh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",eh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",eh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",eh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",eh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",eh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",eh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",eh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",eh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];r();function lV(t){var i;const e=null!=(i=function(t){const i=t.BX,e=new KL;return e.$X(i,0,i.byteLength),ok(e).SZ}(t))?i:24;return t.Evt/e}function dV(t){return t.$w===xv.CM}var fV;function _V(t,i,e,s,n){const r=function(t,i,e,s){const n=e.Evt,r=Se.fromNumber(t.jD||0),h=s.gm(aa.xp(r,n));return{Ret:s.vp(),bvt:s,Lvt:h,kvt:s}}(t,0,e,s),h=aa.Op(t.ct||0,e.Evt),o=t.IT||0,a=!(65536&o)&&1!==(o>>24&3);let u;const c=Ao(n),l=new Vr;for(;l.qu<c.byteLength;){const t=Sn(c,l);if((31&Fi(c,l,1))===JL.vZ){const i=new KL;i.$X(n,l.qu-1,l.qu+t-1);const e=new hk(i),s=ik(r.Lvt,e);u=u||[],u.push(...oV(s))}l.Sm(t-1)}return oe({},r,{ct:h.vp(),Cvt:h,xvt:r.Lvt.vp(),Ovt:r.Ret,jvt:a,zvt:u,Pvt:!1,Bvt:!1})}function gV(t){return{tN:t.pT.tN,Evt:t.ZT.pT.vy}}function wV(t){return t.$w===xv.iM}!function(t){t[t.SAMPLE_DEPENDS_ON_UNKNOWN=0]="SAMPLE_DEPENDS_ON_UNKNOWN",t[t.SAMPLE_DEPENDS_ON_OTHERS=1]="SAMPLE_DEPENDS_ON_OTHERS",t[t.SAMPLE_DEPENDS_ON_NO_OTHER=2]="SAMPLE_DEPENDS_ON_NO_OTHER",t[t.SAMPLE_DEPENDS_ON_RESERVED=3]="SAMPLE_DEPENDS_ON_RESERVED"}(fV||(fV={})),r(),r(),r(),r(),r(),r(),r(),r();var AV=class{hp(t){return this.n6===t.n6&&this.W5===t.W5}constructor(t,i){this.n6=t,this.W5=i}};r();var vV=class{get v6(){return this.Rvt}get f6(){return[this]}get w6(){return this.wH}get K5(){return this.Uvt}get i6(){return new AV(this.K5.n6,this.K5.W5+this.v6.length-1)}Qvt(t){this.Rvt+=t}Fvt(t){for(const i of t)this.Qvt(i)}constructor(t,i){this.wH=t,this.Uvt=i,this.Rvt=""}};function mV(t,i){return t===i||t.v6===i.v6&&t.K5.hp(i.K5)&&Ph(t.w6,i.w6)}function pV(t,i){return t===i||t.K5.hp(i.K5)&&t.i6.hp(i.i6)&&_l(t.f6,i.f6,mV)}var yV=class extends Hn{op(t){return _l(this.O,t.O,pV)}constructor(t,i,e){super(t,i,e,!1)}};r();var MV=class{Yvt(t){return t.Fy(this)}Gvt(t){return Nh(t,((t,i)=>t.Fy(this,i)))}Vvt(t,i){return new TV(t,i).Wvt()}},TV=class{Wvt(){if(this.Hvt)return[];for(let t=0;t<this.n6.length;t++)this.qvt(t);return this.Xvt(),this.Zvt}Kvt(t){this.Jvt=new vV(YO,new AV(this.$vt,t))}Xvt(){this.Jvt&&(this.Zvt.push(this.Jvt),this.Jvt=null)}qvt(t){const i=this.n6[t];NV(i)?this.Jvt&&this.Xvt():(this.Jvt||this.Kvt(t),this.Jvt.Qvt(i))}get Hvt(){return this.n6.every(NV)}constructor(t,i){this.n6=t,this.$vt=i,this.Zvt=[],this.Jvt=null}};function NV(t){return null==t}var DV=class{static tmt(t,i,e){if(i>=e)return;const s=Nh(t,((t,i)=>new TV(t.map((t=>t?t.imt():null)),i).Wvt()));return 0!==s.length?new yV(i,e,s):void 0}},Rn="black",IV="white";r(),r();var SV=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce(((t,i)=>(t[i[0]]=i[1],t)),{}),EV=class{emt(t){for(let i=0;i<el;i++)t&&(this.smt[i]=t.smt[i])}hp(t){for(let i=0;i<el;i++)if(this.smt[i]!==t.smt[i])return!1;return!0}nmt(){for(let t=0;t<el;t++)if(null!==this.smt[t])return!1;return!0}hmt(t){this.omt!==t&&(this.omt=t),this.omt<0?this.omt=0:this.omt>el&&(this.omt=31)}amt(t){const i=this.omt+t;this.hmt(i)}umt(){this.amt(-1),this.smt[this.omt]=null}Qvt(t){t>=144&&this.umt();const i=function(t){return SV[t]?String.fromCharCode(SV[t]):String.fromCharCode(t)}(t);this.addParsedChar(i)}addParsedChar(t){this.omt>=el||(32===Number(t)?(this.smt[this.omt]=this.cmt?"</i>":"<i>",this.cmt=!this.cmt):this.smt[this.omt]=t,this.amt(1))}lmt(t){for(let i=t;i<el;i++)this.smt[i]=null}iL(){this.lmt(0),this.omt=0}dmt(){this.lmt(this.omt)}fmt(t,i){const e=this.smt;let s=null;for(let n=0;n<el;n++){const r=e[n];null===r?s=null:(s||(s={Vh:n,Uh:t,ji:0,Ti:1,smt:[[]]},i.push(s)),s.smt[0].push(r),s.ji++)}}Fy(t,i){return t.Vvt(this.smt,i)}constructor(){this.smt=[],this.omt=0;for(let t=0;t<el;t++)this.smt.push(null);this.cmt=!1}};var Un,bV=class{_mt(t,i){const e="CC"+(this.gmt<<1|this.wmt+1);if(t>=i)return null;const s=(new MV).Gvt(this.Amt.slice(1));return 0===s.length?null:{Qm:new yV(t,i,s),SG:e,vmt:this.gmt<<1|this.wmt+1}}Wn(){this.mmt(),this.pmt=1}ymt(){return this.pmt}Mmt(t){this.pmt=t}hmt(t){this.Amt[this.pmt].hmt(t)}amt(t){this.Amt[this.pmt].amt(t)}Tmt(){return this.Nmt}Dmt(t){this.Nmt=t}Qvt(t,i){if(i<32||i>127)return;let e="";switch(t){case 0:e=void 0!==CV[i]?CV[i]:String.fromCharCode(i);break;case 1:e=xV[i];break;case 2:this.Imt(),e=OV[i];break;case 3:this.Imt(),e=jV[i]}e&&this.Amt[this.pmt].addParsedChar(e)}Imt(){this.Amt[this.pmt].umt()}Smt(t,i,e){if(t>=i)for(let s=e-1;s>=0;s--)this.Amt[t+s]=this.Amt[i+s];else for(let s=0;s<e;s++)this.Amt[t+s]=this.Amt[i+s]}Emt(t,i){for(let e=0;e<=i;e++)this.Amt[t+e]=new EV}mmt(){this.Emt(0,LV)}bmt(){this.pmt=this.Nmt>0?this.Nmt:0,this.mmt()}Lmt(t){this.kmt=t}Cmt(t){this.xmt=t}Omt(t){this.jmt=t}zmt(t){this.Pmt=t}constructor(t,i){this.Amt=new Array(LV+1);for(let t=0;t<=LV;t++)this.Amt[t]=new EV;this.pmt=1,this.Nmt=0,this.gmt=t,this.wmt=i,this.kmt=!1,this.xmt=!1,this.jmt=IV,this.Pmt=Rn,this.Wn()}},LV=15;!function(t){t[t.Bmt=0]="Bmt",t[t.Rmt=1]="Rmt",t[t.Umt=2]="Umt",t[t.Qmt=3]="Qmt"}(Un||(Un={}));var kV,CV={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},xV={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},OV={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},jV={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"},zV=class{Wn(){this.Fmt=!0,this.Ymt=0,this.a0=0,this.Gmt=this.Vmt,this.Wmt=void 0,this.Vmt.Wn(),this.Hmt.Wn(),this.qmt.Wn()}Xmt(t,i){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|i>>5&1]}Zmt(t,i){const e=this.Xmt(t,i),s=(30&i)>>1;let n=IV,r=!1;s<7?n=RV[s]:7===s&&(r=!0);const h=1==(1&i);if(4===this.a0)return;const o=this.Gmt;if(3===this.a0&&e!==o.ymt()){const t=1+o.ymt()-o.Tmt(),i=1+e-o.Tmt();o.Smt(i,t,o.Tmt()),o.Emt(0,i-1),o.Emt(e+1,LV-e)}o.Mmt(e);const a=VO[t<<1&14|i>>5&1]-1;if(a<0)return;const u=function(t,i){const e=i>95?i-96:i-64;return{V5:GO[e].V5,G5:GO[e].G5,W5:GO[e].W5,n6:t}}(a,i);o.hmt(u.W5),this.Gmt.Lmt(h),this.Gmt.Cmt(r),this.Gmt.Omt(n),this.Gmt.zmt(Rn)}Kmt(t,i){this.Gmt.Lmt(!1),this.Gmt.Cmt(!1),this.Gmt.Omt(IV);const e=this.Jmt(t,Un.Bmt," ".charCodeAt(0));let s=IV,n=!1;const r=1==(1&i);return s=RV[(14&i)>>1],"white_italics"===s&&(s="white",n=!0),this.Gmt.Lmt(r),this.Gmt.Cmt(n),this.Gmt.Omt(s),e}Jmt(t,i,e){if(this.Gmt.Qvt(i,e),2===this.a0||3===this.a0){const i=this.$mt(this.Gmt,this.Ymt,t);return this.Ymt=t,i}return null}$mt(t,i,e){return this.Fmt?null:2===this.a0||3===this.a0?t._mt(e,e+10):t._mt(i,e)}tpt(t,i){let e=Rn;0==(7&t)&&(e=BV[(14&i)>>1]),this.Gmt.zmt(e)}ipt(t){const i=PV,e=t.ept,s=t.spt;let n=null;switch(e){case i.RCL:this.npt();break;case i.BS:this.rpt();break;case i.AOD:case i.AON:case i.DER:break;case i.RU2:n=this.hpt(2,s);break;case i.RU3:n=this.hpt(3,s);break;case i.RU4:n=this.hpt(4,s);break;case i.FON:n=this.opt(s);break;case i.RDC:this.apt(s);break;case i.TR:this.upt();break;case i.RTD:this.cpt();break;case i.EDM:n=this.lpt(s);break;case i.CR:n=this.dpt(s);break;case i.ENM:this.fpt();break;case i.EOC:n=this._pt(s)}return n}dpt(t){const i=this.Gmt;if(3!==this.a0)return null;const e=this.$mt(i,this.Ymt,t),s=i.ymt()-i.Tmt()+1;return i.Smt(s-1,s,i.Tmt()),i.Emt(0,s-1),i.Emt(i.ymt(),LV-i.ymt()),this.Ymt=t,e}hpt(t,i){this.Gmt=this.Vmt;const e=this.Gmt;let s=null;return 3!==this.a0&&4!==this.a0&&(s=this.$mt(e,this.Ymt,i),this.Vmt.bmt(),this.Hmt.bmt(),this.Fmt=!1,e.Mmt(LV)),this.a0=3,e.Dmt(t),s}opt(t){return this.Jmt(t,Un.Bmt," ".charCodeAt(0))}lpt(t){const i=this.Vmt;let e=null;return 4!==this.a0&&(e=this.$mt(i,this.Ymt,t)),i.mmt(),this.Fmt=!1,e}apt(t){this.a0=2,this.Gmt=this.Vmt,this.Gmt.Dmt(0),this.Ymt=t}fpt(){this.Hmt.mmt()}_pt(t){let i=null;4!==this.a0&&(i=this.$mt(this.Vmt,this.Ymt,t));const e=this.Hmt;return this.Hmt=this.Vmt,this.Vmt=e,this.npt(),this.Ymt=t,i}npt(){this.a0=1,this.Gmt=this.Hmt,this.Gmt.Dmt(0)}rpt(){this.Gmt.Imt()}upt(){this.qmt.Wn(),this.Fmt=!1,this.cpt()}cpt(){this.Gmt=this.qmt,this.a0=4}gpt(t,i,e){return this.Gmt.Qvt(Un.Bmt,i),this.Jmt(t,Un.Bmt,e)}wpt(t,i,e){const s=1&i?Un.Qmt:Un.Umt;return this.Jmt(t,s,e)}Apt(t){const i=t.vpt,e=t.ept,s=t.spt;if(this.Wmt===(i<<8|e))return this.Wmt=void 0,null;if(this.Wmt=i<<8|e,this.mpt(i,e))this.Zmt(i,e);else{if(this.ppt(i,e))return this.Kmt(s,e);if(this.ypt(i,e))this.tpt(i,e);else{if(this.Mpt(i,e))return this.Jmt(s,Un.Rmt,e);if(this.Tpt(i,e))return this.wpt(s,i,e);if(this.Npt(i,e))return this.ipt(t);this.isTabOffset(i)&&this.Gmt.amt(e-32)}}return null}isTabOffset(t){return 23===t||31===t}Npt(t,i){return 20==(246&t)&&32==(240&i)}mpt(t,i){return 16==(240&t)&&64==(192&i)}ppt(t,i){return 17==(247&t)&&32==(240&i)}ypt(t,i){return 16==(247&t)&&32==(240&i)||23==(247&t)&&45==(255&i)}Mpt(t,i){return 17==(247&t)&&48==(240&i)}Tpt(t,i){return 18==(246&t)&&32==(224&i)}static Dpt(t){return 16==(112&t)}constructor(t,i){this.a0=0,this.qmt=new bV(t,i),this.Vmt=new bV(t,i),this.Hmt=new bV(t,i),this.Gmt=this.Vmt,this.Ymt=0,this.Wmt=void 0,this.Fmt=!1}},PV={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47};!function(t){t[t.cB=0]="cB",t[t.Ipt=1]="Ipt",t[t.Spt=2]="Spt",t[t.Ept=3]="Ept",t[t.Eu=4]="Eu"}(kV||(kV={}));var BV=["black","green","blue","cyan","red","yellow","magenta","black"],RV=["white","green","blue","cyan","red","yellow","magenta","white_italics"];r(),r(),r();var UV,QV=class{imt(){return this.bpt}Lpt(){return this.kmt}kpt(){return this.xmt}Cpt(){return this.Pmt}xpt(){return this.jmt}constructor(t,i,e,s,n){this.bpt=t,this.kmt=i,this.xmt=e,this.Pmt=s,this.jmt=n}},FV=class{Opt(t,i,e,s,n,r,h){this.mB=t,this.jpt=i,this.zpt=e,this.Ppt=s,this.Bpt=n,this.Rpt=r,this.Upt=h}Qpt(){this.Fpt=[];for(let t=0;t<GV;t++)this.Fpt.push(this.Ypt())}Ypt(){const t=[];for(let i=0;i<YV;i++)t.push(null);return t}Gpt(t){this.Vpt()&&(this.Fpt[this.pmt][this.Wpt]=new QV(t,this.kmt,this.xmt,this.Pmt,this.jmt),this.Wpt++)}Hpt(){this.Vpt()&&(this.Wpt<=0&&this.pmt<=0||(this.Wpt<=0?(this.Wpt=this.Upt-1,this.pmt--):this.Wpt--,this.Fpt[this.pmt][this.Wpt]=null))}Vpt(){const t=this.pmt<this.Rpt&&this.pmt>=0,i=this.Wpt<this.Upt&&this.Wpt>=0;return t&&i}qpt(){return this.mB}Xpt(t){let i=0;for(let e=t;e<GV;e++,i++)this.Fpt[i]=this.Fpt[e];for(let e=0;e<t;e++,i++)this.Fpt[i]=this.Ypt()}Zpt(){if(this.pmt+1>=this.Rpt)return this.Xpt(1),void(this.Wpt=0);this.pmt++,this.Wpt=0}Kpt(){this.Fpt[this.pmt]=this.Ypt(),this.Wpt=0}_mt(t,i){if(this.$m>=t)return null;const e=DV.tmt(this.Fpt,this.$m,t);return e?(this.Jpt(t),{Qm:e,SG:"svc"+i,vmt:i}):null}$pt(t,i){this.pmt=t,this.Wpt=i}tyt(t){this.Pmt=t}iyt(t){this.jmt=t}eyt(t){this.kmt=t}syt(t){this.xmt=t}nyt(){this.pmt=0,this.Wpt=0,this.kmt=!1,this.xmt=!1,this.jmt=IV,this.Pmt=Rn}ryt(t){this.hyt=t}oyt(){this.mB=!0}be(){this.mB=!1}fh(){this.mB=!this.mB}Jpt(t){this.$m=t}constructor(t){this.ayt=t,this.mB=!1,this.Bpt=!1,this.zpt=0,this.jpt=0,this.Ppt=0,this.Rpt=0,this.Upt=0,this.hyt=2,this.Fpt=[],this.$m=0,this.pmt=0,this.Wpt=0,this.xmt=!1,this.kmt=!1,this.jmt=IV,this.Pmt=Rn,this.Qpt()}};!function(t){t[t.uyt=0]="uyt",t[t.cyt=1]="cyt",t[t.lyt=2]="lyt",t[t.dyt=3]="dyt"}(UV||(UV={}));var YV=42,GV=15,VV=class{fyt(t){const i=t._yt();let e=i.zy;const s=i.spt;if(e===ZV){e=e<<16|t._yt().zy}return e>=0&&e<=31?this.gyt(e,s):e>=128&&e<=159?this.wyt(t,e,s):(e>=4096&&e<=4127?this.Ayt(t,255&e):e>=4224&&e<=4255?this.vyt(t,255&e):e>=32&&e<=127?this.myt(e):e>=160&&e<=255?this.pyt(e):e>=4128&&e<=4223?this.yyt(255&e):e>=4256&&e<=4351&&this.Myt(255&e),null)}myt(t){this.Tyt&&(127!==t?this.Tyt.Gpt(String.fromCharCode(t)):this.Tyt.Gpt("\u266a"))}pyt(t){this.Tyt&&this.Tyt.Gpt(String.fromCharCode(t))}yyt(t){if(!this.Tyt)return;if(void 0===KV[t])return void this.Tyt.Gpt("_");const i=KV[t];this.Tyt.Gpt(i)}Myt(t){this.Tyt&&(160===t?this.Tyt.Gpt("[CC]"):this.Tyt.Gpt("_"))}gyt(t,i){if(!this.Tyt)return null;const e=this.Tyt;let s=null;switch(t){case WV:e.Hpt();break;case qV:e.qpt()&&(s=e._mt(i,this.Nyt)),e.Zpt();break;case XV:e.qpt()&&(s=e._mt(i,this.Nyt)),e.Kpt();break;case HV:e.qpt()&&(s=e._mt(i,this.Nyt)),e.Qpt(),e.$pt(0,0)}return s}wyt(t,i,e){if(i>=128&&i<=135){const t=7&i;this.Dyt(t)}else{if(136===i){const i=t._yt().zy;return this.Iyt(i,e)}if(137===i){const i=t._yt().zy;this.Syt(i,e)}else{if(138===i){const i=t._yt().zy;return this.Eyt(i,e)}if(139===i){const i=t._yt().zy;return this.byt(i,e)}if(140===i){const i=t._yt().zy;return this.Lyt(i,e)}if(143===i)return this.Wn(e);if(144===i)this.kyt(t);else if(145===i)this.Cyt(t);else if(146===i)this.$pt(t);else if(151===i)this.xyt(t);else if(i>=152&&i<=159){const s=(15&i)-8;this.Opt(t,s,e)}}}return null}Ayt(t,i){i>=8&&i<=15?t.uT(1):i>=16&&i<=23?t.uT(2):i>=24&&i<=31&&t.uT(3)}vyt(t,i){i>=128&&i<=135?t.uT(4):i>=136&&i<=143&&t.uT(5)}Dyt(t){this.Oyt[t]&&(this.Tyt=this.Oyt[t])}*jyt(t){for(let i=0;i<8;i++){1==(1&t)&&this.Oyt[i]&&(yield i),t>>=1}}Iyt(t,i){let e=null;for(const s of this.jyt(t)){const t=this.Oyt[s];t.qpt()&&(e=t._mt(i,this.Nyt)),t.Qpt()}return e}Syt(t,i){for(const e of this.jyt(t)){const t=this.Oyt[e];t.qpt()||t.Jpt(i),t.oyt()}}Eyt(t,i){let e=null;for(const s of this.jyt(t)){const t=this.Oyt[s];t.qpt()&&(e=t._mt(i,this.Nyt)),t.be()}return e}byt(t,i){let e=null;for(const s of this.jyt(t)){const t=this.Oyt[s];t.qpt()?e=t._mt(i,this.Nyt):t.Jpt(i),t.fh()}return e}Lyt(t,i){let e=null;for(const s of this.jyt(t)){const t=this.Oyt[s];t.qpt()&&(e=t._mt(i,this.Nyt)),this.Oyt[s]=void 0}return e}Wn(t){const i=this.Lyt(255,t);return this.iL(),i}iL(){this.Tyt=void 0,this.Oyt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}kyt(t){t.uT(1);const i=t._yt().zy;if(!this.Tyt)return;const e=(128&i)>0,s=(64&i)>0;this.Tyt.syt(e),this.Tyt.eyt(s)}Cyt(t){const i=t._yt().zy,e=t._yt().zy;if(t.uT(1),!this.Tyt)return;const s=3&i,n=(12&i)>>2,r=(48&i)>>4,h=3&e,o=(12&e)>>2,a=(48&e)>>4,u=this.zyt(r,n,s),c=this.zyt(a,o,h);this.Tyt.iyt(u),this.Tyt.tyt(c)}$pt(t){const i=t._yt().zy,e=t._yt().zy;if(!this.Tyt)return;const s=15&i,n=63&e;this.Tyt.$pt(s,n)}xyt(t){t.uT(1),t.uT(1);const i=t._yt().zy;if(t.uT(1),!this.Tyt)return;const e=3&i;this.Tyt.ryt(e)}Opt(t,i,e){const s=void 0!==this.Oyt[i];if(!s){const t=new FV(i);t.Jpt(e),this.Oyt[i]=t}const n=t._yt().zy,r=t._yt().zy,h=t._yt().zy,o=t._yt().zy,a=t._yt().zy,u=t._yt().zy,c=(32&n)>0,l=127&r,d=(128&r)>0,f=h,_=1+(15&o),g=(240&o)>>4,w=1+(63&a);s&&0===(7&u)||this.Oyt[i].nyt(),this.Oyt[i].Opt(c,l,f,g,d,_,w),this.Tyt=this.Oyt[i]}zyt(t,i,e){const s={0:0,1:0,2:1,3:1};return JV[s[t]<<2|s[i]<<1|s[e]]}constructor(t){this.Nyt=t,this.Oyt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.Tyt=void 0}},WV=8,HV=12,qV=13,XV=14,ZV=16,KV={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},JV=["black","blue","green","cyan","red","magenta","yellow","white"];r();var $V=class{Pyt(t){if(t.$w===fi.Avt){const i=63&t.zy;return this.Byt=2*i-1,void(this.Ryt=[])}if(this.Ryt&&(this.Byt>0&&(this.Ryt.push(t),this.Byt--),0===this.Byt)){const t=new tW(this.Ryt);this.Uyt.push(t),this.Ryt=null,this.Byt=0}}Qyt(){return this.Uyt}Fyt(){this.Uyt=[]}iL(){this.Uyt=[],this.Ryt=[],this.Byt=0}constructor(){this.Uyt=[],this.Ryt=null,this.Byt=0}},tW=class{Rht(){return this.Yyt<this.Gyt.length}Vyt(){return this.Yyt}_yt(){if(!this.Rht())throw new ce(le.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.Gyt[this.Yyt++]}uT(t){if(this.Yyt+t>this.Gyt.length)throw new ce(le.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this.Yyt+=t}constructor(t){this.Yyt=0,this.Gyt=t}},iW=class{iL(){this.Wyt=0,this.Hyt=[],this.qyt=[],this.Xyt.iL(),this.Wn(),this.Zyt.forEach((t=>{t.iL()}))}Wn(){this.Kyt=0,this.Jyt=0,this.$yt.forEach((t=>{t.Wn()}))}tMt(t,i){if(t.Mvt){const e=t.Tvt,s=t.Nvt,n=t.$w;n===fi.lvt||n===fi.dvt?this.Hyt.push({spt:i,$w:n,vpt:e,ept:s,iMt:this.Hyt.length}):this.eMt&&(this.qyt.push({spt:i,$w:n,zy:e,iMt:this.qyt.length}),this.qyt.push({spt:i,$w:fi.gvt,zy:s,iMt:this.qyt.length}))}}hF(){const t=[];this.Hyt.sort(((t,i)=>t.spt-i.spt||t.iMt-i.iMt)),this.qyt.sort(((t,i)=>t.spt-i.spt||t.iMt-i.iMt));for(const i of this.Hyt){const e=this.sMt(i);e&&t.push(e)}for(const t of this.qyt)this.Xyt.Pyt(t);const i=this.Xyt.Qyt();for(const e of i){const i=this.nMt(e);t.push(...i)}return this.Xyt.Fyt(),this.Hyt=[],this.qyt=[],t}sMt(t){const i=t.$w;if(zV.Dpt(t.vpt)){const e=t.vpt>>3&1;0===i?this.Kyt=e:this.Jyt=e}const e="CC"+(i<<1|(i?this.Jyt:this.Kyt)+1),s=this.$yt.get(e);return 255===t.vpt&&255===t.ept||!t.vpt&&!t.ept||!this.rMt(t.vpt)||!this.rMt(t.ept)?(++this.Wyt>=45&&this.Wn(),null):(this.Wyt=0,t.vpt&=127,t.ept&=127,t.vpt||t.ept?zV.Dpt(t.vpt)?s.Apt(t):s.gpt(t.spt,t.vpt,t.ept):null)}nMt(t){const i=[];try{for(;t.Rht();){const e=t._yt().zy;let s=(224&e)>>5;const n=31&e;if(7===s&&0!==n){s=63&t._yt().zy}if(0!==s){if(!this.Zyt.has(s)){const t=new VV(s);this.Zyt.set(s,t)}const e=this.Zyt.get(s),r=t.Vyt();for(;t.Vyt()-r<n;){const s=e.fyt(t);s&&i.push(s)}}}}catch(t){if(!(t instanceof ce&&t.code===le.SUBTITLE_PARSE_ERROR))throw t}return i}rMt(t){let i=0;for(;t;)i^=1&t,t>>=1;return 1===i}constructor(){this.eMt=!1,this.Hyt=[],this.qyt=[],this.Xyt=new $V,this.Wyt=0,this.$yt=sg({CC1:new zV(0,0),CC2:new zV(0,1),CC3:new zV(1,0),CC4:new zV(1,1)}),this.Kyt=0,this.Jyt=0,this.Zyt=Ye(),this.Wn()}};r();var eW=class extends gg{constructor(t,i){super("hMt"),this.vmt=t,this.Qm=i}},sW=aa.Ey(.1),nW=class extends i{oMt(t,i){this.aMt.tMt(t,i)}hF(){const t=this.aMt.hF();for(const i of t)this.mo(new eW(i.vmt,i.Qm))}Wn(){this.aMt.iL()}cn(){this.Bo(),this.aMt.iL()}constructor(){super(),this.aMt=new iW}},rW=class extends nW{uMt(t,i,e,s){const n=this.cMt(t,s);this.lMt(n,i,e),this.hF()}cMt(t,i){const e=t.slice().sort(WO),s=this.dMt;if(0===s.length)return e;if(0===e.length)return s;let n;const r=s[0].H5,h=s[s.length-1].H5,o=e[0].H5,a=s[0].Vnt===e[0].Vnt;if(h.bp(o).Ip().Dp(aa.Ey(2.5*i))&&a)n=s.concat(e).sort(WO);else if(o.yp(r)){let t=0;for(;t<s.length&&s[t].H5.Dp(o);)t++;let i=!1,r=!1;for(let n=t,h=0;n<s.length&&h<e.length;n++,h++)hW(s[n],e[h])?i=!0:r=!0;const h=i&&!r,a=i&&r;!i&&r?n=s.concat(e).sort(WO):h?n=s.slice(0,t).concat(e):(n=e,a&&this.Wn())}else n=e,this.Wn();return n}lMt(t,i,e){for(let s=0;s<t.length;s++){const n=t[s],r=n.H5.vp();if(!e&&i-r<sW.vp())return void(this.dMt=t.slice(s));this.oMt(n,r)}this.dMt=[]}constructor(...t){super(...t),this.dMt=[]}};function hW(t,i){return t.H5.hp(i.H5)&&t.$w===i.$w&&t.Tvt===i.Tvt&&t.Nvt===i.Nvt}var oW=class extends ai{fMt(t){return this._Mt.get(t)}gMt(t){let i=this._Mt.get(t.q5);return i||(i=this.wMt(t),this._Mt.set(t.q5,i)),i}wMt(t){const i=[Yu.Fw],e=uV(t.X5);let s,n=e?e.l:"";t.AMt&&(n="easy "+n,i.push(Yu.Ww)),s=t.dh?"CC "+t.dh:n?"CC "+n:"CC"+t.q5;const r=this.ES.SS(Pt.kI,s,s,t.X5,!1,Ks.CEA608,void 0,i);return this.tt(r),r}Cft(t){const i=ds.ST(Ao(t));this.vMt=function(t){for(const i of t.Z){const t=gV(i),e=i.ZT.oN.cN.dN._N;let s=Gr(e,(t=>t.$w===xv._M));if(!s){const t=e.filter((t=>t.$w===xv.kM)),i=Gr(t,(t=>{var i;return(null==(i=t.iD)?void 0:i.$w)===xv._M}));i&&(s=i.iD)}if(!s)continue;const n=qL(Ao(s.FN.JM),new Vr),r=s.GN;return oe({},t,{tN:i.pT.tN,FN:sv(s.FN.JM),ji:s.ji,Ti:s.Ti,dD:r&&r.dD,lD:r&&r.lD,eK:n.OX,mMt:n.jX,sK:n.zX,BX:n.BX[0],RX:n.RX[0]})}}(Gr(i,wV))}Xct(t,i,e,s,n,r){var h;if(!this.vMt)return;if(!j(this.mht)&&Ua(this.mht,i,1e-5))return;j(this.pMt)||Ua(this.pMt,i,.1)||this.yMt.Wn();const o=function(t,i,e,s,n){const r=[],h=i.filter(dV),o=s(e);for(const i of h){const s=Gr(i.Z,(t=>t.pT.tN===e.tN));if(!s)continue;const h=s.pT.gD||0,u=s.pT.wD||0;let c=s.ED?s.ED.ED:Se.ZERO;var a;const l=i.yD+(null!=(a=s.pT.bD)?a:Se.ZERO).toNumber();for(const a of s.SD){let s=l+(a.yD||0);for(const l of a.OD){const a=l.Xm||u,d=new KL;d.$X(t,s,s+a);const f=aa.xp(c,e.Evt);d.hI=n(l,i,e,f,Th(t,s,s+a)),r.push(d),s+=a,c=c.add(l.ct||h||o)}}}return r}(t,ds.ST(Ao(t)),this.vMt,lV,_V);var a;const u=null!=(a=null==(h=tg(o,(t=>t.hI.ct)))?void 0:h.hI.ct)?a:0,c=function(t){const i=[];for(const e of t)e.hI.zvt&&i.push(...e.hI.zvt),delete e.hI.zvt;for(let t=0;t<i.length;t+=1)i[t].MD=t;return i}(o),l=aa.Ey(s),d=[];for(const t of c)d.push(oe({},t,{Vnt:n,H5:t.pvt.gm(l)}));this.yMt.uMt(d,e,r,u),this.mht=i,this.pMt=e}Wn(){return this.yMt.Wn(),this._Mt.forEach((t=>{t.cn(),this.it(t),this.ES.jS(t)})),this._Mt.clear(),this.vMt=void 0,this.mht=NaN,this.pMt=NaN,super.Wn()}cn(){return this.yMt.rn("hMt",this.MMt),this.yMt.cn(),super.cn()}constructor(t){super(),this.vMt=void 0,this.mht=NaN,this.pMt=NaN,this.MMt=t=>{const i=this.gMt({q5:t.vmt,X5:""}),e=t.Qm;for(const t of i.L.Nw)e.Fm<t.Fm&&e.Ym>t.Fm?e.Ym=t.Fm:e.Fm>t.Fm&&t.Ym>e.Fm?t.Ym=e.Fm:e.Fm===t.Fm&&(e.Ym=t.Ym);i.xS(e)},this.ES=t,this._Mt=Ye(),this.yMt=new rW,this.yMt.ln("hMt",this.MMt)}};r(),r();var aW=/(.*)=(.*)/,uW=/(.*):(.*)/;function cW(t){if(!t)return[];const i=[],e=t.trim().split(";");for(const t of e){const e=t.match(aW);if(e){const[,t,s]=e;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(uW)){const[,i,e]=t.match(uW);switch(i){case"lang":n=e;break;case"er":r=Boolean(Number(e))}}i.push({q5:Number(t),X5:n,AMt:r})}}return i}var lW={1:1,2:3,3:2,4:4},dW="urn:scte:dash:cc:cea-608:2015",fW="urn:scte:dash:cc:cea-708:2015";r(),r();var _W=class extends Ha{ha(){return new gW(this.Vnt&&this.Vnt.oa)}constructor(t,i,e){super(Os.pw),this.Vnt=t,this.iwt=i,this.TMt=e}},gW=class extends gg{constructor(t){super("activequalitychanged"),this.quality=t}},wW=[t.bh,qo._w,t.XA],AW=class extends i{NMt(t){const i=this.xAt.C_t;for(const e of i.Lt.Kst)if(i.Mwt.vwt(t,e))return e}cn(){this.Bo(),this.sP.rn(wW,this.DMt)}constructor(t,i){super(),this.DMt=t=>{const i=this.IMt,e=this.NMt(t.currentTime)||this.xAt.E_t;e&&i!==e&&(this.IMt=e,e.Vnt&&this.mo(new _W(e.Vnt,null==e?void 0:e.oa,null==i?void 0:i.oa)))},this.sP=t,this.sP.ln(wW,this.DMt),this.xAt=i}},vW=class extends i{get Gat(){return this.Vat}get o(){return this.ym}get wJ(){return this.AJ}get nt(){return this.SMt}get yst(){return function(t){const i=29.97,e=1024,s=44100;return t===Tw.Gv?s/e:i}(this.AJ)}get OAt(){return 1/this.yst}get Rt(){return Boolean(this.Vat&&this.Vat.Rt)}get KH(){const t=this.xAt?this.xAt.C_t.KH.gwt:Ki.KB();return this.EMt().xB(t)}get M_(){let t=this.bMt();const i=this.LMt;return void 0!==i&&t.SB().ar(i)&&(t=t.xB(Ki.XB(i))),t}get cwt(){return jY(this.bMt(),this.KH.xB(this.kMt)).CB(2*this.OAt)}get kMt(){const t=this.LMt;if(t&&isFinite(t)){const i=this.CMt.bn;if(isFinite(i)&&t<i)return new Ki([t,i],[!1,!0])}return Ki.KB()}get fg(){const t=this.Vat;if(!t)return Ki.XB(0);const i=t.jnt.lrt,e=t.jnt.crt;if(void 0===e||void 0===i)return Ki.XB(0);const s=e;let n=i>=t.jnt.Gnt.bn?x.max(i,this.bn):i;return n=x.max(s,n),Ki.ZB(s,n).SB()}get eP(){return this.cwt.HB(this.E_)}get _wt(){return this.CMt._wt}get E_(){return this.sP.E_}get gn(){return this.Vat?this.Vat.jnt.Gnt.gn:NaN}get bn(){const t=this.xMt(),i=this.LMt;return void 0===t?NaN:void 0!==i?i:t}xMt(){var t;return null==(t=this.Vat)?void 0:t.jnt.Gnt.bn}get Ti(){return this.CMt.Ti}get ji(){return this.CMt.ji}get ZAt(){return this.LMt}F_t(){return void 0!==this.xAt&&this.xAt.F_t}fwt(){if(void 0===this.LMt)return!1;const t=this.bMt().SB(),i=t.zB(this.LMt);return!(i<0)&&t.gn(i)!==this.LMt}_J(){const t=this.CMt._wt,i=this.bMt().yn(t);this.LMt=i.U>0?i.bn(i.U-1):0;const e=t.bn(0);isFinite(e)&&this.LMt<e&&this.$H(this.LMt,e),this.WAt()}async Xct(t,i,e,s){const n=e.fst.Zy,r=this.OMt(t,i,e,n,s),h=this.jMt(t,i,e,n,s),[o]=await tl([h,r]);return o}async OMt(t,i,e,s,n){if(!ln(e.rY))return;let r;if(t.$w===Ho.iS){const i=t.JM.kgt(),e=await i.zj(n);r=new T(e)}else r=new T(t.JM.o_t);const h=[];if(void 0!==this.gft&&(this.gft.Xct(r,i.Fm,s),h.push(this.gft)),void 0!==this.zMt){const t=e.rrt(i);this.zMt.Xct(r,i.Fm,i.Ym,s,e.Vnt,t),h.push(this.zMt)}dp(this.M_,h)}Cft(t,i,e){return Pi(e),this.zMt&&this.zMt.Cft(new T(t.o_t)),Promise.resolve()}Pn(t,i){const e=new Po;i&&e.n_(i),this.OS.s_(),this.OS=e;const s=this.PMt(t,this.tvt,e.i_);return this.tvt=s,s}BMt(t){if(na(this.aft,Ks.CEA608))return;const i=t.jnt.Ust;if(function(t){return t.some((t=>t.Zet===dW||t.Zet===fW))}(i)){this.zMt=new oW(this.ES);const t=function(t){const i=[];for(const e of t)if(e.Zet===dW){const t=qO(e.zy);for(const e of t)i.push(e)}else if(e.Zet===fW){const t=cW(e.zy);for(const e of t)if(e.q5<=4){const t=lW[e.q5];i.push(oe({},e,{q5:t}))}}return i}(i);for(const i of t)this.zMt.gMt(i);this.SMt.Vz(this.zMt.Z)}}async PMt(t,i,e){Pi(e),i&&await i.catch(xs),this.Vat===t&&this.RMt||(await this.UMt(),Pi(e),await this.QMt(),Pi(e),t&&await this.bS(t))}async UMt(){const t=this.Vat;this.Vat=void 0,this.RMt=!1,this.LMt=void 0,t&&(t.rn(Os.Mw,this.FMt),t.nut(!1),t.rn(Os.NO_QUALITY,this.Ds)),this.YMt&&(this.YMt.cn(),this.YMt=void 0),this.xAt&&(await this.xAt.cn(),this.xAt=void 0),this.zMt&&(this.SMt.Xz(this.zMt.Z),await this.zMt.cn())}async bS(t){this.Vat=t,this.BMt(t),t.ln(Os.Mw,this.FMt),t.ln(Os.NO_QUALITY,this.Ds),await this.GMt(t),this.xAt=this.VMt(t),this.xAt.ln(JG,this.Ds),this.xAt.ln("p_t",this.WAt),this.xAt.O_t=t.iut,this.YMt=new AW(this.sP,this.xAt),this.YMt.ln(Os.pw,this.Kat),t.nut(!0),this.RMt=!0}async Wn(t){this.OS.s_(),this.tvt&&(await this.tvt.catch(xs),this.tvt=void 0),await this.UMt(),t||await this.QMt(),await this.WMt()}async HMt(){await this.UMt()}qMt(t){this.xAt&&this.Vat&&this.Vat===t.Lt&&(this.xAt.O_t=this.Vat.iut)}async wlt(t){this.xAt&&await this.xAt.wlt(t)}async Llt(t){this.xAt&&await this.xAt.Llt(t)}iW(){const t=this.M_.qB;return this.oR.iW(t)}async cn(t){this.Bo();try{await this.Wn(t),await this.HMt()}catch(t){}}constructor(t,i,e,s,n,r,h,o,a,u,c){super(),this.Vat=void 0,this.xAt=void 0,this.RMt=!1,this.OS=new Po,this.tvt=void 0,this.LMt=void 0,this.zMt=void 0,this.SMt=new yh([]),this.WAt=()=>{!this.F_t()&&this.fwt()&&this.CMt.WAt()},this.Kat=t=>{this.Vat.Kat(t),this.mo(new iV(t.iwt,t.TMt))},this.FMt=t=>{this.qMt(t)},this.ym=function(){const t=$G;return $G+=1,t}(),this.AJ=t,this.LS=s,this.oR=n,this.CMt=i,this.sP=e,this.pct=r,this.ES=h,this.gft=o,this.uct=a,this.$ut=a?bw(t,a):void 0,this.gct=u,this.aft=c}};function mW(t,i,e){const s=new ya(Ao(t),new Vr),n=Mi.vT(s,xv.iM);if(!n)return;const r=Mi.dT(n.JM),h=Gr(r,(t=>t.$w===xv.sM)),o=Gr(r,(t=>t.$w===xv.UM));if(!h)return;const a=Mi.vT(h.JM,xv.rM);if(!a)return;const u=Mi.vT(a.JM,xv.aM);if(!u)return;const c=Mi.vT(u.JM,xv.uM);if(!c)return;const l=Mi.dT(c.JM),d=Gr(l,(t=>t.$w===xv.cM));if(!d)return;const f=Mi.NT(d.JM,xv.cM,!1),_=new ya(Ao(f.JM),new Vr);_.uT(4);const g=Mi.dT(_),w=[];for(const t of g){if(t.$w===xv.LM||t.$w===xv.kM)return;t.$w===xv._M?w.push({XMt:t,ZMt:xv.kM}):t.$w===xv.DM&&w.push({XMt:t,ZMt:xv.LM})}if(!function(t,i){return void 0===t&&void 0!==i&&i.length>0}(o,i)&&0===w.length)return;let A=Ge(t);const v=Gr(r,(t=>t.$w===xv.dM)),m=v?Mi.vT(v.JM,xv.fM):void 0,p=m?function(t){const i=t.JM.Lm();return i.uT(4),i.uT(4),i.eT()}(m):1,y=Gr(l,(t=>t.$w===xv.lM));y&&function(t,i,e){const s=MW(Ao(t),i),n=Mi.AT(s,new Vr),r=n.JM;r.uT(4);const h=r.eT();for(let t=0;t<h;t++){r.uT(4),r.uT(4);const t=r.$M.Lm(),i=r.eT();Pu(r.JM,t,i+e)}}(A,y,w.length),m&&function(t,i,e){const s=MW(Ao(t),i),n=Mi.AT(s,new Vr),r=n.JM;r.uT(4),r.uT(4),Pu(r.JM,r.$M,e)}(A,m,1),A=function(t,i,e,s){if(e||!s)return t;let n=t;for(const t of s)n=pW(n,i,new T(t));return n}(A,n,o,i);const M=[n,h,a,u,c,d];for(let t=w.length-1;t>=0;t--){const i=w[t];A=yW(A,i.XMt,d,M,i.ZMt,e)}return{KMt:A,JMt:{$Mt:w.length,_D:p}}}function pW(t,i,e){const s=uA(t,e,i.JM.JM.byteOffset+i.JM.JM.byteLength);return TW(MW(Ao(s),i),e.byteLength),s}function yW(t,i,e,s,n,r){const h=function(t,i,e){0;const s=t.JM.JM,n=EW(),r=new T(s.byteLength+n.byteLength),h=Ao(r);r.set(xe(s),0),TW(h,n.byteLength),GA(h,new Vr(kW),i),r.set(n,s.byteLength),GA(h,new Vr(s.byteLength+bW),t.$w),e&&qh(h,new Vr(s.byteLength+LW),e);return r}(i,n,r),o=uA(t,h,i.JM.JM.byteOffset),a=Ao(o);!function(t,i){const e=Mi.AT(t,new Vr),s=Mi.NT(e.JM,xv.cM,!1),n=Ao(s.JM),r=n.getUint32(0);n.setUint32(0,r+i)}(MW(a,e),1);for(const t of s)TW(MW(a,t),h.byteLength);return o}function MW(t,i){const e=i.JM.JM.byteOffset;return We(t,e,e+i.JM.JM.byteLength)}function TW(t,i){const e=new Vr,s=Sn(t,e);if(0===s);else if(1===s){e.Sm(4);const s=De(t,e.Lm());UA(t,e,s.add(i))}else e.Em(0),Pu(t,e,s+i)}r();var NW=class extends Gu{start(t){this.eH=t}transform(t){this.Iq(t),this.tTt()}flush(){this.Eq(),this.tTt()}zq(t){return t===xv.CM}Bq(t){let i=Ge(xe(t.JM.JM));const e=Mi.AT(Ao(i),new Vr);i=DW(i,e,this.iTt),this.eTt.push(i)}Uq(t){this.eTt.push(t)}tTt(){for(const t of function(t){if(t.length<2)return t;const i=[];let{buffer:e,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const h=t[r];e===h.buffer&&s+n===h.byteOffset?n+=h.byteLength:(i.push(new T(e,s,n)),({buffer:e,byteOffset:s,byteLength:n}=h))}return i.push(new T(e,s,n)),i}(this.eTt))this.eH.enqueue(t);Ri(this.eTt)}constructor(t){super(),this.eTt=[],this.iTt=t}};function DW(t,i,e){let s=t;const n=Mi.dT(i.JM);for(let t=n.length-1;t>=0;t--){const r=n[t];r.$w===xv.OM&&(s=IW(s,r,i,e))}return s}function IW(t,i,e,s){const n=MW(Ao(t),i),r=Mi.AT(n,new Vr),h=Mi.dT(r.JM),o=Gr(h,(t=>t.$w===xv.jM));if(!o)return t;const a=o.JM,u=a.$M.Lm(),c=a.eT(),{flags:l}=sc(c);a.uT(4),l.xm(Wt.BASE_DATA_OFFSET_PRESENT)&&a.uT(8);const d=a.$M.Lm();if(l.xm(Wt.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const i=Sn(a.JM,d);return Pu(a.JM,a.$M,i+s.$Mt),t}{Pu(a.JM,u,c|Wt.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new T(4);Ao(n).setUint32(0,s._D+s.$Mt);const r=a.JM.byteOffset+d.qu;for(const t of h.filter((t=>t.$w===xv.zM)))SW(t,n.byteLength);for(const s of[o,i,e])TW(MW(Ao(t),s),n.byteLength);return uA(t,n,r)}}function SW(t,i){const e=t.JM,s=e.eT(),{flags:n}=sc(s);if(e.uT(4),n.xm(ir.DATA_OFFSET_PRESENT)){const t=e.Lm().eT();Pu(e.JM,e.$M,t+i)}}var EW=Ml((()=>new T([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),bW=16,LW=64,kW=4,CW=class extends vW{bMt(){return this.EAt?this.EAt.M_:Ki.KB()}EMt(){return this.EAt?this.EAt.vJ:Ki.KB()}get ji(){return this.CMt.ji}async jMt(t,i,e,s,n){var r;let h;if(Pi(n),t.$w===Ho.iS){let i=t.JM.SG;this.sTt&&(i=function(t,i){return t.pipeThrough(new xh(new NW(i)))}(i,this.sTt)),h={$w:Ho.iS,JM:i}}else{let i=new T(t.JM.o_t);this.sTt&&(i=function(t,i){let e=Ge(t);const s=new ya(Ao(e),new Vr),n=Mi.dT(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.$w===xv.CM&&(e=DW(e,s,i))}return e}(i,this.sTt)),h={$w:Ho.MH,JM:i}}const o={f8:i.Fm,ct:i.ct,Zy:s,sK:null==(r=e.Vnt)?void 0:r.Bw},a=this.EAt.M_;await this.nTt(),await this.EAt.SK(h,o,n);return function(t,i,e,s){let n,r,h=i.jB(t.SB());return h=h.jB(e.jB(i)),0===h.U?(n=s.Ym,r=n):(n=h.gn(0),r=h.bn(0)),{mAt:n,pAt:r}}(a,this.EAt.M_,this.EAt.vJ,i)}async Cft(t,i,e){var s;await super.Cft(t,i,e);let n=new T(t.o_t);if(this.rTt(i)){const t=this.CMt.kdt;let i,e=[];t&&(e=Nh(t.xct,(t=>t.Fz)),i=t.kct.GO?ME(t.kct.GO):void 0);const s=mW(n,e,i);s?(this.sTt=s.JMt,n=s.KMt):this.sTt=void 0}const r={$w:Ho.MH,JM:n};await this.nTt(),await this.EAt.LK(r,{sK:null==(s=i.Vnt)?void 0:s.Bw},e)}Jwt(t,i,e){return this.EAt.wm(t,i,e)}$H(t,i){this.EAt.yJ(t,i)}tq(t,i){this.EAt.MJ(t,i)}async GMt(t){var i;const e=VF.fct(null!=(i=t.iut)?i:t.Kst,this.$ut).rY;this.EAt||(this.EAt=await this.CMt.hTt(e),this.EAt.ln(ii.pH,this.Ds),this.lct=new VG(this.EAt)),await this.nTt()}qMt(t){const i=t.Lt.iut;if(void 0===i)return super.qMt(t);if(i.some((t=>this.lct.SH(t))))return super.qMt(t);this.mo(new gg("fdt"))}WMt(){return this.EAt&&(this.EAt.rn(ii.pH,this.Ds),this.EAt=void 0),Promise.resolve()}QMt(){return this.EAt?this.EAt.wm(0,1/0):Promise.resolve()}VMt(t){return new YG(this,this.sP,this.sP,this.LS,this.oR,this.IAt,this.pct,this.uct,this.$ut,this.lct,this.gct).g8(t)}nTt(){const t=this.CMt._wt,i=x.max(0,t.gn(0)-.1),e=t.bn(0)+.01;return this.EAt.VK(i,e)}rTt(t){if(!ln(t.rY))return!1;if(this.CMt.t4)return!0;return void 0!==this.CMt.kdt}constructor(t,i,e,s,n,r,h,o,a,u,c,l){super(t,i,e,s,n,h,o,a,u,c,l),this.EAt=void 0,this.lct=new WG,this.sTt=void 0,this.IAt=r}},xW=class extends KG{get ji(){return this.ou.ji}get Ti(){return this.ou.Ti}get ct(){return this.sP.ct}get t4(){return this.sP.t4}async bH(t,i,e){this.KK!==e&&(this.KK=e,await this.XAt(!1)),await super.avt(t,i)}rvt(t){return new CW(t,this,this.sP,this.LS,this.oR,this.IAt,this.pct,this.ES,this.gft,this.mdt,this.gct,this.aft)}ovt(){}hTt(t){if(Zg(t,"audio")){if(this.KK.r$)return Promise.resolve(this.KK.r$)}else if(Zg(t,"video")&&this.KK.h$)return Promise.resolve(this.KK.h$);throw new b("Cannot allocate source buffer for mime type "+t)}cn(i){return this.sP.rn(t.KA,this.uvt),super.cn(i)}constructor(i,e,s,n,r,h,o,a,u,c,l,d,f){super(s,n,r,i,h,o,a,c,d,f),this.ou=u,this.KK=e,this.IAt=h.lowLatency,this.gft=l,this.mdt=h.abr,this.sP.ln(t.KA,this.uvt)}},OW=class extends EY{nlt(t,i,e,s,n,r){const h=this.sP,o=this.cP;return new xW(h,o,t,i,e,s,n,r,this.oTt,h,this.gft,this.gct,this.aft)}blt(t,i,e){return t.bH(i,e,this.cP)}Mlt(t){return!!this.cP&&this.cP.SH(t)}async o$(t){this.cP=await this.sP.Pn(t),this.aTt(),this.uTt(),this.cP.f$(this.ct)}async xlt(){this.cTt=this.Ylt,this.cP&&(await this.sP.Wn(),this.cP=void 0)}_J(){this.cP._J()}nJ(){const t=this.ct;this.cP.ct<t&&this.cP.f$(t),this.cP.nJ()}async Qdt(t){const i=this.cP,e=[];i.r$&&e.push(Sk(i.r$,t)),i.h$&&e.push(Sk(i.h$,t)),await Promise.all(e)}Slt(t){return this.cP.bH(t)}Cdt(){return!0}get qlt(){return this.sP.q_}U4(){return this.sP.Bg()}qdt(){this.sP.Pg()}get Z_(){return this.sP.Z_}set Z_(t){this.sP.Z_=t}get Xlt(){return this.sP.eg}ge(){super.ge(),this.sP.ge()}be(){super.be(),this.sP.be()}get nt(){return this.Al}get Y_(){return this.sP.Y_}set Y_(t){this.sP.Y_=t}get Ng(){return this.sP.Ng}set Ng(t){this.sP.Ng=It(t,0,1)}Adt(t){for(const i of t)i.src&&this.DP.IS(i);Ss(this.DP.Z)}async nft(i,e,s,n){for(this.sP.Em(i,e,s);this.idt||this.k$;)await this.sP.v_([t.FA,t.kA],n)}get idt(){return this.sP.gg}get k$(){return this.sP.k$}get Ylt(){return function(t,i){return{Jv:t.Jv+i.Jv,$v:t.$v+i.$v,tm:t.tm+i.tm}}(this.cTt,this.sP.F_())}aTt(){const t=this.cP;t&&(t.h$&&(t.h$.RV=this.oR.ZV),t.r$&&(t.r$.RV=this.oR.ZV))}uTt(){const t=this.cP;t&&(t.h$&&(t.h$.GV=this.oR.GV),t.r$&&(t.r$.GV=this.oR.GV))}ca(t,i,e){return this.pP.Rz(t.contentProtection),super.ca(t,i,e)}determineStallJumpTarget(){if(this.glt)return this.glt.Sdt()&&this.E_>this.glt.bn-Tk&&!this.glt.Rlt?this.glt.bn:void 0}async Wn(){await super.Wn(),this.cTt={Jv:0,$v:0,tm:0},await this.DP.Wn(),this.sP.IP()}async cn(){await super.cn(),await this.DP.cn(),this.Al.cn(),this.oR.rn("BV",this.lTt),this.oR.rn("YV",this.dTt),this.sP.rn(Bi.Zo,this.fTt),this.sP.rn([t.vA,t.AA],this.Ds),this.sP.LP=void 0,this.sP._3=void 0}constructor(i,e,s,n,r,h){super(i,e,s,n,r),this.cP=void 0,this.cTt={Jv:0,$v:0,tm:0},this.fTt=t=>{this.qP(cl(t.lt))},this.lTt=()=>{this.aTt()},this.dTt=()=>{this.uTt()},this.sP.ln(Bi.Zo,this.fTt),this.oR.ln("BV",this.lTt),this.oR.ln("YV",this.dTt),this.oTt=h,this.DP=new Ya(this.sP,this.LS),this.Al.Vz(this.DP.Z),this.pP=new AI(i),this.sP.LP=this.pP,this.sP._3=this,this.sP.ln([t.vA,t.AA],this.Ds)}};function jW(t){const i=_n.jE||_n.kE,e=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some((t=>"ac-3"===t||"ec-3"===t)),s=i&&!e,n=new bk(!0);return async t=>{const i=t.gP;if(!n.u$(i)&&!function(t,i){return!!t&&(ln(t)?sp(i)||rp(i):Va(t,wo.APPLICATION_TTML_XML)||Va(t,wo.TEXT_VTT)||Va(t,wo.IMAGE_JPEG))}(t.rY,t.Ast))return!1;const e=t.Ast.some((t=>"ac-3"===t||"ec-3"===t));if(s&&e)return!1;if(t.mst){const e=t.mst,s=Nh(e,(t=>iy(t.Zet))).filter(z_),n=await async function(t,i){for(const e of t)if(await i(e))return!0;return!1}(s,(t=>fe.XC(t,i)));if(!n)return!1}return!0}}r(),r();var zW=class{get Ti(){return this._Tt.offsetHeight*fe.Ys.S4}get ji(){return this._Tt.offsetWidth*fe.Ys.S4}constructor(t){this._Tt=t}};r();var Dn=class{get nt(){return this.Al}SS(t,i,e,s,n,r,h,o){const a=new wn(t,i,e,s,n,r,h,void 0,o);return this.Al.tt(a),this._2.tt(a),a}jS(t){this.Al.it(t),this._2.it(t),t.cn()}Wn(){for(const t of this.Al.Nw.slice())t.cn();this.Al.Wn(),this._2.Wn()}cn(){this.Wn(),this.Al.cn(),this._2.cn()}constructor(t,i){this.Al=new Tn,this._2=new sx(t,i)}};r(),r();var xt=class{XP(t){return this.Uz.XP(t)}Pit(t){return this.Uz.Pit(t)}kP(t){return this.Uz.kP(t)}constructor(t){this.Uz=t}};r(),r(),r();var PW=class extends i{get gTt(){return this.sP}get M_(){return this.T_()}T_(){return this.sP.M_}get N_(){return this.D_()}D_(){return this.sP.N_}get E_(){return this.b_()}b_(){return this.sP.E_}get Tu(){return this.sP.Tu}get ct(){return this.kd()}kd(){return this.sP.ct}get lP(){return this.wTt()}wTt(){return this.sP.lP}get C_(){return this.ATt()}ATt(){return this.sP.C_}get lt(){return this.sP.lt}get Ti(){return this.sP.Ti}get ji(){return this.sP.ji}get la(){return this.Cg()}Cg(){return this.sP.la}get Y_(){return this.sP.Y_}set Y_(t){this.sP.Y_=t}get q_(){return this.vTt()}vTt(){return this.sP.q_}get Z_(){return this.sP.Z_}set Z_(t){this.sP.Z_=t}get eg(){return this.rg()}rg(){return this.sP.eg}get cg(){return this.dg()}dg(){return this.sP.cg}get fg(){return this._g()}_g(){return this.sP.fg}get gg(){return this.wg()}wg(){return this.sP.gg}get k$(){return this.mTt()}mTt(){return this.sP.k$}get F$(){return this.pTt()}pTt(){return this.sP.F$}get nt(){return this.Ag()}Ag(){return this.yTt}get Nl(){return this.z3()}z3(){return this.sP.Nl}get j4(){return this.sP.j4}get Ng(){return this.sP.Ng}set Ng(t){this.sP.Ng=t}get u3(){return this.sP.u3}get R_(){return this.sP.R_}get c4(){return this.sP.c4}get LP(){return this.MTt()}set LP(t){this.TTt(t)}MTt(){return this.sP.LP}TTt(t){this.sP.LP=t}get _3(){return this.sP._3}set _3(t){this.NTt(t)}NTt(t){this.sP._3=t}get t4(){return this.DTt()}DTt(){return this.sP.t4}F_(){return this.sP.F_()}Bg(){return this.sP.Bg()}Pg(){this.sP.Pg()}Em(t,i,e){this.sP.Em(t,i,e)}nP(t){this.sP.nP(t)}ge(){this.sP.ge()}be(){this.sP.be()}SS(t,i,e,s,n,r,h,o){return this.sP.SS(t,i,e,s,n,r,h,o)}MP(){return this.sP.MP()}NP(t,i,e,s,n){return this.sP.NP(t,i,e,s,n)}jS(t){this.sP.jS(t)}IP(){this.sP.IP()}HH(t){return this.sP.HH(t)}async Pn(t){const i=await this.sP.Pn(t);let e;return e=t.$w===Pe.tO?this.ITt(i):this.STt(i),this.cP=e,e}async Wn(){this.cP&&(await this.cP.Xf(),this.cP=void 0),await this.sP.Wn()}o3(){this.sP.o3()}a3(){this.sP.a3()}async Xf(){this.Bo(),this.sP.rn(_L,this.ETt),this.yTt.Ew=void 0,this.yTt.cn(),this.cP&&(await this.cP.Xf(),this.cP=void 0)}d3(){this.sP.d3()}bTt(t){this.sP.rn(_L,this.ETt),this.sP=t,this.yTt.Ew=t.nt,this.sP.ln(_L,this.ETt)}Vg(t){this.mo(t)}constructor(t){super(),this.cP=void 0,this.yTt=new Ac,this.ETt=t=>this.Vg(t),this.sP=t,this.yTt.Ew=t.nt,this.sP.ln(_L,this.ETt)}},BW=class extends PW{get aP(){return this.sP.aP}get B$(){return this.sP.B$}get Lg(){return this.sP.Lg}set Lg(t){this.sP.Lg=t}f3(t){this.sP.f3(t)}A4(){this.sP.A4()}Yg(){this.sP.Yg()}constructor(t){super(t)}};r(),r(),r();var RW=class{get vd(){return this.FC()}FC(){return this.cP.vd}get fg(){return this._g()}_g(){return this.cP.fg}get rt(){return this.cP.rt}SH(t){return this.cP.SH(t)}bH(t){return this.cP.bH(t)}Xf(){return Promise.resolve()}constructor(t){this.cP=t}},ut=class extends RW{get r$(){return this.c$}get h$(){return this.l$}get M_(){return this.T_()}T_(){return this.cP.M_}get ct(){return this.kd()}kd(){return this.cP.ct}get GH(){return this.LTt()}LTt(){return this.cP.GH}f$(t){this.cP.f$(t)}A$(t,i,e,s){this.cP.A$(t,i,e,s)}_J(){this.cP._J()}nJ(){this.cP.nJ()}Xf(){return this.c$&&(this.c$.Xf(),this.c$=void 0),this.l$&&(this.l$.Xf(),this.l$=void 0),super.Xf()}kTt(t){this.cP=t,this.c$?t.r$?this.c$.CTt(t.r$):(this.c$.Xf(),this.c$=void 0):t.r$&&(this.c$=this.xTt(t.r$),this.c$.ln(on,this.OTt)),this.l$?t.h$?this.l$.CTt(t.h$):(this.l$.Xf(),this.l$=void 0):t.h$&&(this.l$=this.xTt(t.h$),this.l$.ln(on,this.OTt))}jTt(t){}constructor(t){super(t),this.c$=void 0,this.l$=void 0,this.OTt=t=>this.jTt(t)}};r(),r(),r();var UW=class extends i{get GV(){return this.JV}set GV(t){this.JV=t}get M_(){return Ki.KB()}get vd(){return this.Mx}get wJ(){return Tw.Hv}get vJ(){return Ki.KB()}get zTt(){return!1}get RV(){return this.XV}set RV(t){this.XV=t}SK(t,i,e){return Promise.reject(new b("Invalid media buffer"))}TJ(){return Promise.reject(new b("Invalid media buffer"))}LK(t,i,e){return Promise.reject(new b("Invalid media buffer"))}GH(){return!1}_J(){}yJ(t,i){}MJ(t,i){}wm(t,i,e){return Promise.resolve()}VK(t,i){return Promise.reject(new b("Invalid media buffer"))}Dm(t,i){return Promise.reject(new b("Invalid media buffer"))}SH(t){return!1}bH(t){return Promise.reject(new b("Invalid media buffer"))}Xf(){this.Bo()}constructor(t){super(),this.XV=0,this.JV=0,this.Mx=t}},QW=class extends i{get GV(){return this.PTt()}set GV(t){this.BTt(t)}PTt(){return this.EAt.GV}BTt(t){this.EAt.GV=t}get M_(){return this.T_()}T_(){return this.EAt.M_}get vd(){return this.FC()}FC(){return this.EAt.vd}get wJ(){return this.EAt.wJ}get vJ(){return this.RTt()}RTt(){return this.EAt.vJ}get RV(){return this.UTt()}set RV(t){this.QTt(t)}UTt(){return this.EAt.RV}QTt(t){this.EAt.RV=t}SK(t,i,e){return this.EAt.SK(t,i,e)}TJ(){return this.EAt.TJ()}LK(t,i,e){return this.EAt.LK(t,i,e)}GH(){return this.EAt.GH()}_J(){this.EAt._J()}yJ(t,i){this.EAt.yJ(t,i)}MJ(t,i){this.EAt.MJ(t,i)}wm(t,i,e){return this.EAt.wm(t,i,e)}VK(t,i){return this.EAt.VK(t,i)}SH(t){return this.EAt.SH(t)}bH(t){return this.EAt.bH(t)}Vg(t){this.mo(t)}Xf(){this.Bo(),this.CTt(new UW(this.vd))}CTt(t){this.EAt.rn(on,this.FTt),this.EAt=t,this.EAt.ln(on,this.FTt)}constructor(t){super(),this.FTt=t=>this.Vg(t),this.EAt=t,this.EAt.ln(on,this.FTt)}},FW=class extends QW{get Oit(){return this.sP}set Oit(t){this.sP=t}async SK(t,i,e){return Pi(e),await this.jAt(this.sP.E_,null==i?void 0:i.f8,null==i?void 0:i.ct),Pi(e),t.$w===Ho.iS?await this.YTt(t,i,e):await this.GTt(t,i,e)}async YTt(t,i,e){let s=t;for(;;){const[t,n]=rb(s.JM);s={$w:Ho.iS,JM:t};try{return await this.VTt(s,i,e),void n.cancel(new sa).catch(xs)}catch(t){if(fc(t)){if(await this.jAt(this.sP.E_,i.f8,i.ct,e)){s={$w:Ho.iS,JM:n};continue}}throw n.cancel(t).catch(xs),t}}}async GTt(t,i,e){for(;;)try{return Pi(e),await this.VTt(t,i,e)}catch(t){if(fc(t)){if(await this.jAt(this.sP.E_,i.f8,i.ct,e))continue}throw t}}async jAt(t,i,e,s){const n=zb(t,i,e,this.M_,this.RV,this.GV);for(const[t,i]of n)await this.WTt(t,i,s);return n.length>0}VTt(t,i,e){return super.SK(t,i,e)}WTt(t,i,e){return super.wm(t,i,e)}constructor(t){super(t),this.sP=void 0}},YW=class extends ut{get Oit(){return this.sP}set Oit(t){this.sP=t,this.c$&&(this.c$.Oit=t),this.l$&&(this.l$.Oit=t)}xTt(t){const i=new FW(t);return i.Oit=this.sP,i}constructor(t){super(t),this.sP=void 0,this.kTt(t)}};r();var wi=class extends RW{get hg(){return this.cP.hg}set hg(t){this.cP.hg=t}};r();var xn=class extends PW{get aP(){return this.sP.aP}get B$(){return this.sP.B$}get Mg(){return this.sP.Mg}get vg(){return this.sP.vg}get Lg(){return this.sP.Lg}set Lg(t){this.sP.Lg=t}f3(t){this.sP.f3(t)}A4(){this.sP.A4()}Yg(){this.sP.Yg()}xg(){return this.sP.xg()}constructor(t){super(t)}},GW=class extends BW{get gTt(){return this.sP}STt(t){const i=new YW(t);return i.Oit=this,i}ITt(t){return new wi(t)}},VW=class extends xn{get gTt(){return this.sP}STt(t){const i=new YW(t);return i.Oit=this,i}ITt(t){return new wi(t)}},Zu=class extends xt{XP(t){return t===Tw.Yv?new VW(super.XP(t)):t===Tw.Gv?new GW(super.XP(t)):void 0}async kP(t){const i=t;await i.Xf(),await super.kP(i.gTt)}};r();var WW=class{HTt(){this.Lo.Gg()}cn(){s.removeEventListener("pageshow",this.qTt)}constructor(t){this.qTt=t=>{t.persisted&&this.HTt()},this.Lo=t,s.addEventListener("pageshow",this.qTt)}},HW=class extends OW{xg(){if(yU(this.sP))return this.sP.xg()}get sdt(){return yU(this.sP)?this.sP.vg:0}get rdt(){return yU(this.sP)?this.sP.Mg:0}async cn(){var t;await super.cn(),null==(t=this.XTt)||t.cn()}Edt(t){var i,e,s;return((null!=(s=null==(i=this.lc)||null==(e=i.dash)?void 0:e.useSeamlessPeriodSwitch)?s:Go.lB)!==Go.lB||!_n.Ab)&&super.Edt(t)}Cdt(){return!(_n.kE&&_n.xE<3)&&super.Cdt()}kft(){return new Dn(this,new nx)}uft(t){return jW(t)}constructor(t,i,e,s,n,r){super(t,i,e,s,n,new zW(r)),this._Tt=r,_n.KE&&(this.XTt=new WW(this))}},qW=class extends HW{async cn(){await super.cn(),await this.CP.kP(this.sP)}constructor(t,i,e,s,n,r,h){const o=new Zu(n);super(t,i,e,s,o.XP(r),h),this.CP=o}};r(),r(),r(),r(),r();var XW=class extends QW{get ZTt(){return this.tit.ZTt}T_(){return super.T_().Sm(this.ZTt)}RTt(){return super.RTt().Sm(this.ZTt)}SK(t,i,e){const s=this.ZTt;return super.SK(t,{f8:i.f8-s,ct:i.ct,Zy:i.Zy-s},e)}VK(t,i){const e=this.ZTt;return super.VK(x.max(0,t-e),x.max(0,i-e))}wm(t,i,e){const s=this.ZTt;return super.wm(x.max(0,t-s),x.max(0,i-s),e)}yJ(t,i){const e=this.ZTt;super.yJ(x.max(0,t-e),x.max(0,i-e))}MJ(t,i){const e=this.ZTt;super.MJ(x.max(0,t-e),x.max(0,i-e))}constructor(t,i){super(i),this.tit=t}},ZW=class extends ut{get ZTt(){return this.tit.ZTt}kd(){return super.kd()+this.ZTt}f$(t){super.f$(t-this.ZTt)}_g(){return super._g().Sm(this.ZTt)}A$(t,i,e,s){const n=this.ZTt;super.A$(t-n,i-n,e,s)}xTt(t){return new XW(this,t)}constructor(t,i){super(i),this.kTt(i),this.tit=t}},KW=class extends xn{get gTt(){return this.sP}get ZTt(){return this.KTt}set ZTt(t){this.KTt=t}T_(){return super.T_().Sm(this.KTt)}D_(){return JW(super.D_(),this.KTt)}b_(){return super.b_()+this.KTt}kd(){return super.kd()+this.KTt}rg(){return super.rg().Sm(this.KTt)}_g(){return super._g().Sm(this.KTt)}Em(t,i,e){const s=x.max(0,t-this.KTt);super.Em(s,i,e)}nP(t){super.nP(JW(t,-this.KTt))}Ag(){return this.Al}SS(t,i,e,s,n,r,h,o){return this.ES.SS(t,i,e,s,n,r,h,o)}jS(t){this.ES.jS(t)}IP(){this.ES.Wn(),super.IP()}MP(){return!1}NP(t,i,e,s,n){throw new b("Not supported")}Xf(){return this.Y6.cn(),this.F6.cn(),this.ES.cn(),this.Al.cn(),super.Xf()}STt(t){return new ZW(this,t)}ITt(t){return new wi(t)}Vg(i){let e;switch(i.type){case t.bh:e=new vh(i.currentTime+this.KTt);break;case t.yh:e=new ws(i.currentTime+this.KTt);break;case qo._v:e=new Vi(i.currentTime+this.KTt);break;case t.XA:e=new Tc(i.currentTime+this.KTt,JW(i.currentProgramDateTime,this.KTt));break;case t.BA:e=new _i(i.currentTime+this.KTt);break;case t.YA:e=new ja(i.currentTime+this.KTt);break;case t.FA:e=new _e(i.currentTime+this.KTt);break;case t.bA:e=new jk(i.currentTime+this.KTt);break;case t.kA:e=new Nx(i.currentTime+this.KTt);break;case t.NA:e=new Ds(i.currentTime+this.KTt);break;case t.RA:e=new se(i.currentTime+this.KTt,i.playbackRate);break;case t.ZA:e=new Ve(i.currentTime+this.KTt,i.volume);break;case t.yA:e=new ts(i.duration+this.KTt);break;case qo._w:e=new Qi(i.currentTime+this.KTt,i.readyState);break;default:e=i}super.Vg(e)}be(){super.be(),this.F6.be()}ge(){super.ge(),this.F6.ge()}constructor(t){super(t),this.KTt=0,this.ES=new Dn(this,new nx),this.Al=new yh([this.ES.nt,super.Ag()]),this.F6=new Bx,this.F6.f3(this.aP.parentElement),this.Y6=new ic(this.F6.we,this.Tu,this.Al,this.Nl,this.la)}};function JW(t,i){return t?new Date(t.getTime()+1e3*i):void 0}var $W=class extends xt{XP(t){if(t===Tw.Yv)return new KW(super.XP(t))}async kP(t){const i=t;await i.Xf(),await super.kP(i.gTt)}},tH=class extends HW{async o$(t){await super.o$(t),void 0===this.JTt&&(this.JTt=this.$Tt(),this.sP.ZTt=this.JTt)}$Tt(){if(this.ct===1/0){const t=this.Qlt;if(t.U>0)return x.max(0,t.gn(0)-300)}return 0}t2(t,i,e,s,n,r,h,o){return void 0===r&&(r=!1),void 0===h&&(h=CF.qut),void 0===o&&(o=!1),o||(o=this.ct===1/0&&_n.kE&&_n.xE<3&&t<=this.E_),super.t2(t,i,e,s,n,r,h,o)}async Wn(){await super.Wn(),this.JTt=void 0,this.sP.ZTt=0}async cn(){await super.cn(),await this.sP.Xf(),await this.CP.kP(this.sP)}static sx(t){var i;return(!t||"google-dai"!==(null==t||null==(i=t.ssai)?void 0:i.integration))&&(_n.kE&&_n.xE<4)}constructor(t,i,e,s,n,r,h){const o=new $W(new Zu(n));super(t,i,e,s,o.XP(r),h),this.CP=o,this.JTt=void 0}};r(),r(),r(),r(),r();var iH=class extends PW{get gTt(){return this.sP}get vg(){return this.sP.vg}get Mg(){return this.sP.Mg}constructor(t){super(t)}};r(),r(),r();var eH=class extends QW{PTt(){return this.tNt?this.JV:super.PTt()}BTt(t){this.tNt?this.JV=t:super.BTt(t)}T_(){return this.tNt?this.iNt:super.T_()}FC(){return this.tNt?this.Mx:super.FC()}RTt(){return this.tNt?this.eNt:super.RTt()}UTt(){return this.tNt?this.XV:super.UTt()}QTt(t){this.tNt?this.XV=t:super.QTt(t)}SK(t,i,e){return this.EK((e=>this.sNt(t,i,e)),e)}sNt(t,i,e){return super.SK(t,i,e)}TJ(){return this.EK((()=>this.nNt()))}nNt(){return super.TJ()}LK(t,i,e){return this.EK((e=>this.rNt(t,i,e)),e)}rNt(t,i,e){return super.LK(t,i,e)}GH(){return this.tNt?this.c8:super.GH()}_J(){this.tNt?this.hNt=!0:super._J()}yJ(t,i){this.$K(),this.tNt?(this.eNt=this.eNt.xB(new Ki([t,i])),this.oNt.push({$w:"mwt",Fm:t,Ym:i})):this.aNt(t,i)}aNt(t,i){super.yJ(t,i)}VK(t,i){return this.EK((()=>this.uNt(t,i)))}uNt(t,i){return super.VK(t,i)}MJ(t,i){this.$K(),this.tNt?(this.eNt=this.eNt.jB(new Ki([t,i])),this.oNt.push({$w:"wm",Fm:t,Ym:i})):this.cNt(t,i)}cNt(t,i){super.MJ(t,i)}wm(t,i,e){return this.EK((e=>this.lNt(t,i,e)),e)}lNt(t,i,e){return super.wm(t,i,e)}bH(t){return this.EK((()=>this.dNt(t)))}dNt(t){return super.bH(t)}async EK(t,i){this.$K(),this.tNt&&(await hl(this.tNt.nL,i),this.$K()),Pi(i);try{this.rJ=t(i),await this.rJ}finally{this.rJ=void 0}}$K(){if(this.rJ)throw new b("Internal error")}async fNt(){if(this.tNt)throw new k("Already locked");this.tNt=new No,this._Nt(),this.rJ&&(await this.rJ.catch(xs),this._Nt())}gNt(){var t;null==(t=this.tNt)||t.eL(),this.tNt=void 0,this.wNt()}_Nt(){this.Mx=super.FC(),this.JV=super.PTt(),this.XV=super.UTt(),this.iNt=super.T_(),this.eNt=super.RTt(),this.c8=super.GH(),this.hNt=!1}wNt(){this.$K(),super.BTt(this.JV),super.QTt(this.XV);const t=this.oNt.slice();Ri(this.oNt);for(const i of t)"mwt"===i.$w?this.aNt(i.Fm,i.Ym):this.cNt(i.Fm,i.Ym);this.hNt&&super._J(),this.iNt.QB(super.T_())||this.mo(new gg(ii.pH))}Xf(){var t;null==(t=this.tNt)||t.s_(),this.tNt=void 0,super.Xf()}constructor(t){super(t),this.rJ=void 0,this.tNt=void 0,this.JV=0,this.iNt=Ki.KB(),this.eNt=Ki.KB(),this.oNt=[],this.c8=!1,this.hNt=!1,this.XV=0,this.Mx=t.vd}},sH=class extends eH{T_(){var t,i;return super.T_().xB(null!=(i=null==(t=this.ANt)?void 0:t.M_)?i:Ki.KB())}RTt(){var t,i;return super.RTt().xB(null!=(i=null==(t=this.ANt)?void 0:t.vJ)?i:Ki.KB())}BTt(t){super.BTt(t),this.ANt&&(this.ANt.GV=t)}QTt(t){super.QTt(t),this.ANt&&(this.ANt.RV=t)}aNt(t,i){super.aNt(t,i),this.ANt&&this.ANt.yJ(t,i)}cNt(t,i){super.cNt(t,i),this.ANt&&this.ANt.MJ(t,i)}async lNt(t,i,e){Pi(e);const s=[];s.push(super.lNt(t,i,e)),this.ANt&&s.push(this.ANt.wm(t,i,e)),await Promise.all(s)}SH(t){return!!super.SH(t)||this.tit.vNt(t)}dNt(t){return super.SH(t)?super.dNt(t):this.tit.mNt(t)}pNt(t){var i,e;null==(i=this.ANt)||i.rn(on,this.FTt),this.ANt=t,null==(e=this.ANt)||e.ln(on,this.FTt)}constructor(t,i){super(i),this.ANt=void 0,this.tit=t}},nH=class extends ut{SH(t){const i=void 0!==this.c$,e=void 0!==this.l$,s=t.v$.some((t=>Zg(t.gP,"audio"))),n=t.v$.some((t=>Zg(t.gP,"video")));return i===s&&e===n&&(!!super.SH(t)||(!(!this.yNt||!this.yNt.SH(t))||this.tit.MNt(t)))}async bH(t){return super.SH(t)?await super.bH(t):this.yNt&&this.yNt.SH(t)?(this.TNt(),await this.bH(t)):(await this.tit.NNt(t),await this.bH(t))}vNt(t){return this.SH(this.DNt(t))}mNt(t){return this.bH(this.DNt(t))}DNt(t){const i=this.vd,e=i.v$.map((i=>Zg(t.gP,"audio")&&Zg(i.gP,"audio")||Zg(t.gP,"video")&&Zg(i.gP,"video")?t:i));return oe({},i,{v$:e})}A$(t,i,e,s){super.A$(t,i,e,s),this.yNt&&this.yNt.A$(t,i,e,s)}INt(){return!this.SNt&&this.ENt}kd(){return void 0!==this.bNt?this.bNt:this.INt()?this.JL:super.kd()}f$(t){this.JL=t,this.bNt=void 0,this.INt()||super.f$(t)}LTt(){return!this.INt()&&super.LTt()}_J(){this.bNt=x.max(rH(this.cP.r$),rH(this.cP.h$)),this.INt()||super._J()}nJ(){this.bNt=void 0,this.INt()||super.nJ()}xTt(t){return new sH(this,t)}LNt(){this.SNt=!this.SNt}TNt(){const t=this.cP,i=this.yNt;i&&(this.SNt=!this.SNt,this.kTt(i),this.kNt(t),this.INt()&&this.CNt())}kNt(t){var i,e;this.yNt=t,null==(i=this.c$)||i.pNt(null==t?void 0:t.r$),null==(e=this.l$)||e.pNt(null==t?void 0:t.h$)}xNt(t){const i=this.cP,e=this.yNt;if(!e)return;const s=this.SNt,n=s?i:e,r=(s?e:i).M_.HB(t);if(!r)return;const h=zY(n.M_,this.RTt()).HB(r.bn(0),Dc);return!h||r.bn(0)+Dc>=h.bn(0)?void 0:x.max(r.bn(0),h.gn(0))}ONt(t,i){if(this.ENt)return Promise.resolve();const e=this.SNt?this.yNt:this.cP;return e?(this.ENt=!0,this.jNt((i=>{if(Pi(i),this.ENt)return async function(t,i,e){Pi(e);const s=[];t.r$&&s.push(Sk(t.r$,i,e));t.h$&&s.push(Sk(t.h$,i,e));await Promise.all(s),t._J()}(e,t,i)}),i)):Promise.resolve()}CNt(){if(!this.ENt)return;const t=this.SNt?this.yNt:this.cP;if(!t)return;var i;this.ENt=!1;const e=null!=(i=this.bNt)?i:this.JL;t.ct<e&&t.f$(e),t.nJ()}zNt(t){var i;const e=null!=(i=this.bNt)?i:this.JL;t.f$(e),this.SNt?this.kTt(t):this.kNt(t)}RTt(){var t,i,e;const s=null!=(e=null==(t=this.c$)?void 0:t.vJ)?e:Ki.KB();var n;const r=null!=(n=null==(i=this.l$)?void 0:i.vJ)?n:Ki.KB();return s.xB(r)}async jNt(t,i){const e=[];this.c$&&e.push(this.c$.fNt()),this.l$&&e.push(this.l$.fNt());try{await Promise.all(e),await t(i)}finally{this.c$&&this.c$.gNt(),this.l$&&this.l$.gNt()}}jTt(t){t.type===ii.pH&&this.tit.uJ(),super.jTt(t)}constructor(t,i){super(i),this.yNt=void 0,this.JL=NaN,this.SNt=!1,this.ENt=!1,this.bNt=void 0,this.kTt(i),this.tit=t}};function rH(t){if(!t)return 0;const i=t.M_;return i.U>0?i.bn(i.U-1):0}function Rr(t){return t.vd.$w===Pe.iO}r();var hH=class extends iH{get PNt(){return this.BNt}T_(){return super.T_().xB(this.BNt.M_)}kd(){if(!this.RNt){const t=this.cP;if(t&&Rr(t))return t.ct}return super.kd()}ATt(){return!!super.ATt()&&!(!this.RNt&&!this.GH())}vTt(){return!!super.vTt()&&!(!this.RNt&&super.ATt()&&!this.GH())}GH(){const t=this.cP;return!(!t||!Rr(t))&&t.GH}rg(){return this.Io.xB(this.sP.eg)}_g(){return super._g().xB(this.BNt.fg)}dg(){return super.dg()}wTt(){var t;return null!=(t=super.wTt())?t:this.BNt.lP}Bg(){return this.iR=!1,super.Bg()}Pg(){this.iR=!0,super.Pg()}o3(){this.RNt=!0,super.o3(),this.BNt.o3()}a3(){this.RNt=!1,super.a3(),this.BNt.o3()}b_(){var t;return null!=(t=this.T4)?t:super.b_()}wg(){return void 0!==this.T4||super.wg()}Em(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.UNt.s_(),this.K4.s_(),this.K4=new Po,this.QNt=this.t2(t,i,e,this.QNt,this.K4.i_).catch(xs)}async t2(t,i,e,s,n){this.T4=t,this.i2=t,this.mo(new ja(t)),s&&await s.catch(xs),Pi(n),this.cP&&Rr(this.cP)&&this.cP.CNt(),this.T4=void 0,super.Em(t,i,e),this.BNt.Em(t,i,e),this.FNt()}nP(t){const i=this.lP;if(!i||j(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Em(e)}d3(){super.d3(),this.BNt.d3()}get vg(){return this.YNt.vg}get Mg(){return this.YNt.Mg}be(){this.mB&&(this.mB=!1,this.YNt.be())}ge(){this.mB||(this.mB=!0,this.YNt.ge())}async GNt(){var t;this.T4=void 0,this.i2=NaN,this.Io=Ki.KB(),null==(t=this.VNt)||t.s_(),this.UNt.s_(),this.K4.s_(),this.QNt&&(await this.QNt.catch(xs),this.QNt=void 0)}TTt(t){super.TTt(t),this.BNt.LP=t}NTt(t){super.NTt(t),this.BNt._3=t}Ag(){return this.Al}SS(t,i,e,s,n,r,h,o){return this.ES.SS(t,i,e,s,n,r,h,o)}jS(t){this.ES.jS(t)}IP(){this.ES.Wn(),super.IP()}async Pn(t){const i=await super.Pn(t);return Rr(i)&&this.FNt(),i}async Wn(){await this.GNt(),await super.Wn(),await this.BNt.Wn()}async Xf(){await this.GNt(),this.ES.cn(),this.Al.cn(),await super.Xf()}STt(t){return new nH(this,t)}ITt(t){return new wi(t)}FNt(){this.UNt.s_(),this.UNt=new Po,this.QNt=this.WNt(this.QNt,this.UNt.i_).catch(xs)}async WNt(i,e){if(i&&await i.catch(xs),this.cP&&Rr(this.cP))for(;;){let i;for(Pi(e),this.HNt()&&this.LNt(),this.cP.CNt(),Pi(e);Pi(e),!this.HNt();){if(i=this.cP.xNt(this.b_()),void 0!==i){0,this.qNt(),await this.cP.ONt(i,e),Pi(e),this.BNt.Em(i);break}await cg((i=>Promise.race([this.v_(t.XA,i),this.XNt(i)])),e)}for(Pi(e);!this.HNt();)await this.sP.v_([t.XA,t.NA,qo._w],e)}}HNt(){const t=this.cP;if(void 0===t||!Rr(t))return!1;const i=this.b_(),e=this.sP.M_;if(!this.sP.C_&&e.ar(i))return!1;return!!zY(this.BNt.M_,t.RTt()).RB(i,i+Dc)}LNt(){if(this.ZNt)return;this.ZNt=!0,this.Io=this.rg();const t=Bk(this),i=this.wg(),e=this.dg(),s=this.sP,n=this.BNt,r=this.cP;r.CNt(),r.LNt(),Rk(n,t),this.bTt(n),this.BNt=s,s.Pg(),s.Y_=!0,this.ZNt=!1;const h=this.wg();i!==h&&(h?this.mo(new ja(this.E_)):this.mo(new _e(this.E_)));const o=this.dg();e!==o&&this.mo(new Qi(this.E_,o)),h||this.qNt()}qNt(){const t=this.sP,i=this.YNt;if(i===t)return;const e=this.Mg,s=this.vg;this.YNt=t,this.mB&&(i.be(),t.ge());const n=this.Mg,r=this.vg;n>0&&r>0&&(e!==n||s!==r)&&this.mo(new Vu)}MNt(t){return void 0!==this.BNt.HH([t])}async NNt(t){this.qNt();const i=this.cP,e=this.BNt;await e.Wn();const s=await e.Pn(t);i.zNt(s)}XNt(t){return this.VNt=new No,hl(this.VNt.nL,t)}uJ(){var t;null==(t=this.VNt)||t.eL()}Vg(i){i.type===t.YA&&this.i2===i.currentTime||(i.type===t.FA&&(this.i2=NaN,this.qNt()),i.type!==qo._w&&i.type!==t.yh&&i.type!==t.NA||this.ZNt||!this.HNt()?(i.type!==t.NA||this.C_)&&super.Vg(i):this.FNt())}constructor(t,i,e){super(t),this.RNt=!1,this.T4=void 0,this.i2=NaN,this.Io=Ki.KB(),this.iR=!0,this.ZNt=!1,this.mB=!0,this.VNt=void 0,this.QNt=void 0,this.UNt=new Po,this.K4=new Po,this.BNt=i,this.YNt=t,this.sP.ge(),this.BNt.be(),this.ES=new Dn(this,e),this.Al=new yh([this.ES.nt,super.Ag()])}},oH=class extends hH{get gTt(){return this.sP}get PNt(){return this.BNt}be(){super.be(),this.F6.be()}ge(){super.ge(),this.F6.ge()}get aP(){return this.sP.aP}get B$(){return this.sP.B$}get Lg(){return this.sP.Lg}set Lg(t){this.sP.Lg=t}f3(t){this.sP.f3(t),this.BNt.f3(t)}A4(){this.sP.A4()}Yg(){this.sP.Yg(),this.BNt.Yg()}xg(){return this.sP.xg()}bTt(t){const i=this.Cg(),e=this.xg();super.bTt(t),this.Cg()!==i&&this.mo(new dt),this.xg()!==e&&this.mo(new ns)}Xf(){return this.Y6.cn(),this.F6.cn(),super.Xf()}constructor(t,i){super(t,i,new nx),this.F6=new Bx,this.F6.f3(t.aP.parentElement),this.Y6=new ic(this.F6.we,this.Tu,this.nt,this.Nl,this.la)}},aH=class extends xt{XP(t){if(t===Tw.Yv){const i=super.XP(t),e=super.XP(t);return new oH(i,e)}return super.XP(t)}async kP(t){t instanceof oH?(await t.Xf(),await super.kP(t.gTt),await super.kP(t.PNt)):await super.kP(t)}},uH=class extends HW{async cn(){await super.cn(),await this.CP.kP(this.sP)}static sx(t){var i;return!_n.Qs&&!_n._b&&!(t&&"google-dai"===(null==(i=t.ssai)?void 0:i.integration))}constructor(t,i,e,s,n,r,h){const o=new Zu(new aH(n));super(t,i,e,s,o.XP(r),h),this.CP=o}};r(),r(),r();var Au,cH=class extends ut{xTt(t){return new eH(t)}FC(){return this.KNt?this.Mx:super.FC()}T_(){return this.KNt?this.iNt:super.T_()}kd(){return this.KNt?this.JL:super.kd()}f$(t){this.KNt?(this.JL=t,this.JNt=!0):super.f$(t)}_g(){return this.KNt?this.$Nt?this.$Nt.SJ():this.w$:super._g()}A$(t,i,e,s){this.KNt?this.$Nt=new Mk(t,i,e,s):super.A$(t,i,e,s)}LTt(){return this.KNt?this.c8&&!1!==this.hNt:super.LTt()}_J(){this.KNt?this.hNt=!0:super._J()}nJ(){this.KNt?this.hNt=!1:super.nJ()}SH(t){return!this.KNt&&super.SH(t)}bH(t){return this.KNt?Promise.reject(new k("Not supported")):super.bH(t)}async fNt(){if(this.KNt)throw new k("Already locked");this.KNt=!0,this._Nt();const t=[];this.c$&&t.push(this.c$.fNt()),this.l$&&t.push(this.l$.fNt()),await Promise.all(t)}gNt(){this.KNt=!1,this.c$&&this.c$.gNt(),this.l$&&this.l$.gNt(),this.wNt()}_Nt(){this.Mx=super.FC(),this.iNt=super.T_(),this.JL=super.kd(),this.w$=super._g(),this.JNt=!1,this.hNt=void 0,this.$Nt=void 0}wNt(){if(this.JNt&&(super.f$(this.JL),this.JNt=!1),void 0!==this.$Nt){const t=this.$Nt;super.A$(t.gn,t.bn,t.EJ,t.bJ),this.$Nt=void 0}void 0!==this.hNt&&(this.hNt?super._J():super.nJ(),this.hNt=void 0)}constructor(t){super(t),this.KNt=!1,this.iNt=Ki.KB(),this.JL=0,this.JNt=!1,this.c8=!1,this.hNt=void 0,this.w$=Ki.KB(),this.$Nt=void 0,this.kTt(t),this.Mx=t.vd}},lH=class extends xn{get gTt(){return this.sP}Bg(){return void 0!==this.cP&&Rr(this.cP)&&this.C_&&this.Em(0),super.Bg()}Em(t,i,e){void 0!==this.cP&&Rr(this.cP)&&this.C_&&t<this.ct&&this.tDt(),super.Em(t,i,e)}o3(){this.iDt=!0,super.o3()}a3(){this.iDt=!1,this.eDt()||super.a3()}eDt(){return this.iDt||this.sDt}nDt(){this.sDt||(this.sDt=!0,super.o3())}rDt(){this.sDt&&(this.sDt=!1,this.eDt()||super.a3())}Pn(t){this.hDt.s_();const i=this.Ztt(t,this.oDt);return this.aDt=i,i}async Ztt(t,i){return i&&await i.catch(xs),this.rDt(),await super.Pn(t)}STt(t){return new cH(t)}ITt(t){return new wi(t)}Wn(){this.hDt.s_();const t=this.uDt(this.oDt);return this.aDt=t,t}async uDt(t){return t&&await t.catch(xs),this.rDt(),await super.Wn()}tDt(){this.nDt(),this.hDt.s_(),this.hDt=new Po,this.oDt=ui(this.cDt(this.aDt,this.oDt,this.hDt.i_),this.hDt).catch(Ah)}async cDt(t,i,e){t&&await t.catch(xs),i&&await i.catch(xs),Pi(e);const s=this.cP;if(!s||!Rr(s))return;const n=s.vd;await s.fNt(),await this.sP.Wn();const r=await this.sP.Pn(n);r.f$(s.ct),s.kTt(r),s.gNt(),this.rDt()}async Xf(){this.hDt.s_(),this.oDt&&(await this.oDt.catch(xs),this.oDt=void 0),this.eDt()&&super.a3(),await super.Xf()}constructor(...t){super(...t),this.iDt=!1,this.sDt=!1,this.aDt=void 0,this.oDt=void 0,this.hDt=new Po}},Ln=class extends xt{XP(t){if(t===Tw.Yv)return new lH(super.XP(t))}async kP(t){const i=t;await i.Xf(),await super.kP(i.gTt)}static sx(){return _n.wb}};lu(new class extends uU{ej(t,i,e,s,n,r,h){const o=new St(ti.kb.fet,ti.kb.let,ti.kb.det,ti.kb.wet);let a;a=tH.sx(h)?tH:uH.sx(h)?uH:qW;let u=i;return Ln.sx()&&(u=new Ln(u)),new a(e,s,n,o,u,Tw.Yv,t)}KP(){return!0}constructor(...t){super(...t),this.JP=si.Lz}}),r(),r(),r(),r(),function(t){t.lDt="currentbufferingrenditionchange",t.dDt="fDt",t._Dt="gDt",t.wDt="ADt"}(Au||(Au={})),r(),r();var dH,fH,_H=class{constructor(t,i){var e,s;this.Bw=Vw(),this.vDt=i,this.$w=t.$w,this.mDt=t.mDt,this.pDt=t.pDt,this.yDt=t.yDt,this.l=t.l,this.gs=t.gs,this.MDt=t.MDt,this.TDt=t.TDt,this.NDt=void 0===t.Dnt,this.DDt=null!=(s=null==(e=t.DDt)?void 0:e.split(","))?s:[]}};function gH(t,i){return t.$w===i.$w&&(t.l===i.l||!(!t.mDt||!i.mDt))}function wH(t,i){return t.vDt===i.vDt&&t.MDt===i.MDt}function AH(t,i){for(const e of t)if(wH(e,i))return!0;return!1}r(),function(t){t.IDt="alternative",t.SDt="main",t.EDt="commentary",t.bDt="",t.CI="descriptions",t.LDt="main-desc",t.kDt="translation"}(dH||(dH={})),function(t){t.IDt="alternative",t.SDt="main",t.EDt="commentary",t.bDt="",t.kI="captions",t.Gw="sign",t.HM="subtitles"}(fH||(fH={}));var vH,mH=class extends i{get Rw(){return this.CDt}get Rt(){const t=this.xDt();if(!t)return!1;for(const i of this.Uw.Nw)if(i.ODt===t)return!0;return!1}set Rt(t){if(t!==this.Rt&&t){let t=this.Uw.Iw(0).ODt;const i=this.Lo.jDt;for(const e of this.Uw.Nw)if(e.zDt===i){t=e.ODt;break}this.PDt(t)}}get Pw(){if(!this.Rt)return;const t=this.Lo.BDt;for(const i of this.Uw.Nw)if(AH(t,i.ODt))return i}get oa(){return this.Ua||(this.Ua=Di(this)),this.Ua}get o(){return this.Mm.toString()}get Bw(){return this.Mm}get dh(){return this.Tm}set dh(t){t!==this.Tm&&(this.Tm=t,this.mo(new Oe(this)))}get gs(){return this.$L}get Xw(){return this.Rt?"enabled":"disabled"}get Qw(){return this.jwt}set Qw(t){let i=[];if(t){i=t.filter((t=>{const i=this.Pw?IF(this.Pw):void 0;return fe.Ys.stt(i,IF(t))})).filter((i=>this.Uw.Am(t)&&i.zit))}else i=this.Uw.Nw.filter((t=>t.zit));if(0!==i.length){if(!(t===this.jwt||this.jwt&&zo(this.jwt,i))){if(this.jwt=t?i:void 0,this.Lo.RDt(i.map((t=>t.zDt))),1===i.length){const t=i[0].zDt,e=this.a0===Tw.Yv,s=this.oR.eW;W(this.Lo.UDt(t,{QDt:!0,FDt:s&&e,YDt:s&&!e}))}this.mo(new yF(i,this))}}else this.mo(new DF)}Dm(t){this.Rt=t}cn(){this.Bo(),this.Lo.rn(Au.lDt,this.GDt),this.Lo.rn(Au.dDt,this.VDt);for(const t of this.Uw.Nw)t.cn();this.Uw.Wn()}constructor(t,i,e,s,n){var r;super(),this.a0=t,this.Lo=i,this.oR=e,this.rh=s,this.Uw=n,this.jwt=void 0,this.WDt=void 0,this.HDt=()=>this.mo(new Oe(this)),this.GDt=()=>{const t=this.Pw;t&&this.WDt!==t&&(this.WDt=t,this.mo(new _W(t)))},this.VDt=()=>{const t=this.Rt;this.qDt!==t&&(this.qDt=t,this.rh.mo(new de(this)),this.mo(new de(this)))},this.WDt=this.Pw,this.qDt=this.Rt;const h=n.Iw(0);var o,a;this.Tm=null!=(o=null==h?void 0:h.ODt.l)?o:"",this.$L=null!=(a=null==h?void 0:h.ODt.gs)?a:"",this.CDt=null==h||null==(r=h.ODt)?void 0:r.DDt.map(DH).filter(z_),this.Mm=mu(),this.Lo.ln(Au.lDt,this.GDt),this.Lo.ln(Au.dDt,this.VDt);for(let t=0;t<this.Uw.U;t++){this.Uw.Iw(t).ln("update",this.HDt)}}},pH=class extends mH{get zt(){return dH.SDt}xDt(){return this.Lo.XDt}PDt(t){W(this.Lo.ZDt(t))}constructor(t,i,e,s){super(Tw.Gv,t,i,e,s)}},yH=class extends mH{get zt(){return fH.SDt}xDt(){return this.Lo.KDt}PDt(t){W(this.Lo.JDt(t))}constructor(t,i,e,s){super(Tw.Yv,t,i,e,s)}},MH=class extends i{get o(){return String(this.zDt.o)}get Bw(){return this.zDt.o}get zz(){return this.zDt.zz}get ynt(){return this.zDt.ynt}get dh(){var t;return null!=(t=this.Tm)?t:this.ODt.l}set dh(t){this.dh!==t&&(this.Tm=t,this.mo(new rQ(this.oa)))}get Dnt(){return this.ODt.vDt.$Dt()}get Mnt(){return this.zDt.Mnt}KI(){}cn(){this.Bo()}constructor(t,i){super(),this.zDt=t,this.ODt=i,this.Tm="",this.zit=!0}},TH=class extends MH{get wst(){return 0}get Ast(){var t;return(null==(t=this.zDt.Ast)?void 0:t.tIt)||""}get oa(){return this.Ua||(this.Ua=this.ha()),this.Ua}ha(){return nQ(this)}constructor(t,i){super(t,i),this.Ua=void 0}},NH=class extends MH{get Ast(){var t;return(null==(t=this.zDt.Ast)?void 0:t.iIt)||""}get Tnt(){return this.eIt}set Tnt(t){this.eIt!==t&&(this.eIt=t,this.mo(new rQ(this.oa)))}get yst(){var t,i;return null!=(i=null!=(t=this.sIt)?t:this.zDt.yst)?i:0}set yst(t){this.yst!==t&&(this.sIt=t,this.mo(new rQ(this.oa)))}get Ti(){var t,i;return null!=(i=null==(t=this.zDt.nIt)?void 0:t.Ti)?i:0}get ji(){var t,i;return null!=(i=null==(t=this.zDt.nIt)?void 0:t.ji)?i:0}get oa(){return this.Ua||(this.Ua=this.ha()),this.Ua}ha(){return sQ(this)}constructor(t,i){super(t,i),this.Ua=void 0,this.eIt=0,this.sIt=void 0}};function DH(t){return"public.accessibility.describes-video"===t?Yu.Hw:"public.accessibility.transcribes-spoken-dialog"===t?Yu.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?Yu.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?Yu.Ww:void 0}r(),r(),function(t){t.rIt="FATAL",t.Zo="ERROR",t.hIt="WARNING",t.oIt="INFO",t.aIt="DEBUG"}(vH||(vH={}));var At=new class{uIt(t){if(!this.Rt())return!1;const i=[];return!(i.length>0)||i.some((i=>i.toLowerCase()===t.toLowerCase()))}cIt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.uIt(t)&&fe.ctt("DEBUG "+t+" -",...e)}oN(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.uIt(t)&&fe.ctt("INFO "+t+" -",...e)}lIt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.uIt(t)&&fe.Vv("WARNING "+t+" -",...e)}lt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.uIt(t)&&fe.ltt("ERROR "+t+" -",...e)}dIt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.uIt(t)&&fe.ltt("FATAL "+t+" -",...e)}constructor(){this.Rt=()=>!1}},ss="HLSPlaylistParser",IH="Discontinuity",rr="Buffering",SH=class{vdt(){var t;const i=null==(t=this.Lo.br)?void 0:t.fIt;if(!i||0===i.length)return void At.lIt("LLHLSTrackConfigurator","The HLSModel contains no variant streams.");var e;const s=null!=(e=Gr(i,(t=>0!==t._It.length&&0!==t.gIt.length)))?e:i[0],n=i.filter((t=>t!==s));for(const t of s._It){const i=new Uw,e=[];i.gm(new TH(s,t)),e.push(t);for(const s of n)for(const n of s._It)if(gH(n,t)&&!AH(e,n)){i.gm(new TH(s,n)),e.push(n);break}this.wIt.tt(new pH(this.Lo,this.oR,this.wIt,i))}for(const t of s.gIt){const i=new Uw,e=[];i.gm(new NH(s,t)),e.push(t);for(const s of n)for(const n of s.gIt)if(gH(n,t)&&!AH(e,n)){i.gm(new NH(s,n)),e.push(n);break}this.AIt.tt(new yH(this.Lo,this.oR,this.AIt,i))}}vIt(){this.mIt(this.wIt),this.mIt(this.AIt)}mIt(t){const i=[];for(const e of t.Nw){const t=[];for(const i of e.Uw.Nw)na(i.zDt.pIt,i.ODt)||t.push(i);for(const i of t)e.Uw.wm(i),i.cn();0===e.Uw.U&&i.push(e)}for(const e of i)t.it(e),e.cn()}yIt(t,i){const e=this.MIt(t);void 0!==e&&(e.yst=i)}TIt(t,i){const e=this.MIt(t);void 0!==e&&(e.Tnt=i)}MIt(t){for(const i of this.AIt.Nw){const e=Gr(i.Uw.Nw,(i=>i.ODt===t));if(void 0!==e)return e}}constructor(t,i,e,s){this.Lo=t,this.oR=i,this.wIt=e,this.AIt=s}};r(),r(),r();var ur=class{get h8(){const t=1-this.NIt**this.DIt;return this.IIt/t}hgt(t,i){const e=this.NIt**t,s=i*(1-e)+e*this.IIt;j(s)||(this.IIt=s,this.DIt+=t)}bH(t){const i=x.exp(x.log(.5)/t);if(i===this.NIt)return;if(0===this.DIt)return void(this.NIt=i);const e=this.h8,s=1-i**this.DIt;this.IIt=e*s,this.NIt=i}constructor(t){this.IIt=0,this.DIt=0,this.NIt=x.exp(x.log(.5)/t)}},Nn=class t{get h8(){return this.sct()?x.max(this.SIt.h8,this.EIt.h8):this.bIt}hgt(t){const i=fe.h_(),e=t;this.LIt&&void 0!==this.kIt&&i-this.kIt>=this.CIt&&this.Wn(),this.xIt+=1,this.SIt.hgt(1,e),this.EIt.hgt(1,e),this.OIt.push(e),this.OIt.length>this.jIt&&this.OIt.shift(),this.kIt=i}sct(){return void 0!==this.kIt&&fe.h_()-this.kIt<=this.CIt}Wn(){this.SIt=new ur(this.zIt),this.EIt=new ur(this.PIt),this.xIt=0,this.OIt=[],this.kIt=void 0}constructor(i=t.BIt,e=t.RIt,s=t.fgt,n=!1){this.xIt=0,this.OIt=[],this.kIt=void 0,this.CIt=6e4,this.jIt=10,this.zIt=i,this.PIt=e,this.bIt=s,this.LIt=n,this.SIt=new ur(i),this.EIt=new ur(e)}};Nn.BIt=2,Nn.RIt=5,Nn.fgt=.1,r();var EH=class{kV(t){for(const i of this.UIt)i.kV(t)}CV(t){for(const i of this.UIt)i.CV(t)}xV(t,i){for(const e of this.UIt)e.xV(t,i)}OV(t){for(const i of this.UIt)i.OV(t)}constructor(t){this.UIt=t}};r();var bH=class{kV(t){this.QIt=t}CV(t){this.FIt.hgt(t-this.QIt)}xV(t){}OV(t){}constructor(t){this.QIt=0,this.FIt=t}};r();var LH=class{CV(t){this.YIt=t}xV(t,i){this.ggt.hgt(t-this.YIt,i.byteLength),this.YIt=t}OV(t){}kV(t){}constructor(t){this.YIt=0,this.ggt=t}};r();var kH,CH=class{kV(t){}xV(t,i){const e=i.byteLength,s=this.GIt;this.GIt=e;const n=t-this._n;this._n=t,this.VIt.Iq(i);const r=!this.VIt.WIt(),h=e>=this.HIt;s!==fe.Ys.J7&&r&&h&&this.ggt.hgt(n,e)}CV(t){this._n=t}OV(t){}constructor(t,i=0){this.VIt=new xH,this._n=0,this.GIt=0,this.ggt=t,this.HIt=i}},xH=class extends Gu{WIt(){return this.qIt}Iq(t){this.qIt=!1,super.Iq(t)}Nq(t,i){this.XIt&&this.XIt!==xv.RM||(this.qIt=!0),super.Nq(t,i),this.XIt=t}zq(t){return!1}Bq(t){}Uq(t){}constructor(...t){super(...t),this.XIt=void 0,this.qIt=!1}};r(),r(),(kH||(kH={})).ZIt="sample";var OH=class extends i{Tz(){if(!this.sct())return;const t=fe.h_();t-this.KIt>1e3&&(this.KIt=t,ca.kb.Tz(this.h8))}constructor(...t){super(...t),this.KIt=0}},Oc=class t extends OH{hgt(t,i){const e=8*i/t;this.SIt.hgt(t,e),this.EIt.hgt(t,e),this.JIt+=i,this.Tz(),this.mo(new gg(kH.ZIt))}get h8(){return this.sct()?x.min(this.SIt.h8,this.EIt.h8):this.bIt}sct(){return this.JIt>=this.$It}constructor(i=t.BIt,e=t.RIt,s=t.tSt,n=t.fgt){super(),this.JIt=0,this.$It=s,this.SIt=new ur(i),this.EIt=new ur(e),this.bIt=n}};Oc.tSt=128e3,Oc.fgt=wI,Oc.BIt=.5,Oc.RIt=5;var jH=class{get zz(){return this.ggt.h8}get Pz(){return this.iSt.h8}Bz(t){if("segment"!==t.$w&&"preload-hint"!==t.$w)return;const i=[new bH(this.iSt)];return"stream"!==t.pS||!function(t){return"segment"===t.$w&&"initialization-segment"!==t.MS}(t)&&"preload-hint"!==t.$w?i.push(new LH(this.ggt)):i.push(new CH(this.ggt,1e3)),new EH(i)}eSt(t){this.ggt=new Oc(Oc.BIt,Oc.RIt,1,t)}constructor(t){const i=t.zz>0?t.zz:Oc.fgt,e=t.Pz>0?t.Pz:Nn.fgt;this.ggt=new Oc(Oc.BIt,Oc.RIt,1,i),this.iSt=new Nn(Nn.BIt,Nn.RIt,e)}};r();var zH=class extends gg{constructor(t){super(Au.wDt),this.lt=t}};r();var PH=class{HH(t,i){const e={$w:Pe.iO,wP:[],v$:t.map((t=>({gP:t}))),E$:i};return Promise.resolve(void 0!==this.Oit.HH([e]))}constructor(t){this.Oit=t}};r(),r();var BH=(t,i,e,s,n)=>t.filter((t=>!!na(s,t)||1.1*t.zz<=e.zz)),RH=(t,i,e,s,n)=>t.filter((t=>{if(na(s,t))return!0;let r=1/0;for(const i of t.pIt){var h,o;r=x.min(r,null!=(o=null!=(h=i.vDt.sSt)?h:i.vDt.nSt)?o:1/0)}r===1/0&&(r=1);const a=2*e.Pz+t.zz*r/e.zz;return t.zz<=i.zz||n.rSt>a})),UH=(t,i,e,s,n)=>Zc(t,((t,i)=>i.zz-t.zz)),QH=(t,i,e,s,n)=>t.every((t=>t.Mnt&&!j(t.Mnt)))?Zc(t,((t,i)=>i.Mnt-t.Mnt)):t,FH=(t,i,e,s,n)=>0===s.length?t:Zc(t,((t,i)=>{const e=na(s,t)?1:0;return(na(s,i)?1:0)-e})),YH=(t,i,e,s,n,r)=>t.filter((t=>!t.Ast||!i.Ast||!(void 0!==i.Ast.iIt&&void 0!==t.Ast.iIt&&!qt(i.Ast.iIt,t.Ast.iIt)&&!r.hSt({gP:'video/mp4; codecs="'+t.Ast.iIt}))&&!(void 0!==i.Ast.tIt&&void 0!==t.Ast.tIt&&!qt(i.Ast.tIt,t.Ast.tIt)&&!r.oSt({gP:'audio/mp4; codecs="'+t.Ast.tIt})))),GH=(t,i,e,s,n)=>{if(!1===n.act)return t;if(fe.Ys.q7)return t;const r=fe.Ys.X7;var h;const o=(null!=(h=null==r?void 0:r.width)?h:n.ji)*kG;var a;const u=(null!=(a=null==r?void 0:r.height)?a:n.Ti)*kG;for(let i=0;i<t.length;i++){const e=t[i];if(void 0===e.nIt)return t;const s=e.nIt.Ti,n=e.nIt.ji;if(s<=u&&n<=o)return t.slice(i,t.length)}return[]},VH=(t,i,e,s,n)=>function(t,i){const e=i.act;if(void 0===e&&!fe.Ys.Qs)return t;if(!1===e)return t;for(let e=0;e<t.length;e++){const s=t[e];if(void 0===s.nIt)return t;const n=s.nIt.Ti,r=s.nIt.ji;if(n===i.Ti&&r===i.ji)return t.slice(e,t.length);if(n<i.Ti||r<i.ji)return t.slice(0===e?e:e-1,t.length)}return[]}(t,n);var Eo,Jt,xu,WH,HH="AbrEvaluator",qH=class{get aSt(){return this.oR.bV}uSt(t){this.cct=t}async cSt(t,i,e,s,n){return(await this.lSt(t,i,e,s,n))[0]}async lSt(t,i,e,s,n){if(0===t.length)throw new b("AbrEvaluator - Unable to select optimal variant stream from an empty list.");At.cIt(HH,"Performing optimal variant stream selection.");const r=this.aSt;let h=t;for(const t of this.cct){const o=t(h,i,r,e,s,n);h=Yn(o)?o:await o}if(0===h.length){At.lIt(HH,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[Oo(t,(t=>t.zz))]}return h}constructor(t){this.oR=t,this.cct=[YH,BH,RH,UH,GH,VH,QH,FH]}};function XH(t,i){return[t,void 0!==i?t+i-1:pu]}function ZH(t){return Boolean(t.ZT)}function KH(t){return Boolean(t.det)}function Nt(t){return t?t.zht?t.zy+"@"+t.zht.gn+"-"+(null!=(i=t.zht.U)?i:""):""+t.zy:"";var i}function JH(t,i){if(i===t)return!0;if(i.zy!==t.zy)return!1;if(!t.zht)return!0;if(i.zht){const e=XH(t.zht.gn,t.zht.U),s=XH(i.zht.gn,i.zht.U);if(e[0]<=s[0])return void 0===e[1]||void 0!==s[1]&&e[1]>=s[1]}return!1}function $H(t,i){return t===i||t.zy===i.zy&&(t.zht&&i.zht?t.zht.gn===i.zht.gn&&t.zht.U===i.zht.U:t.zht===i.zht)}function tq(t){const i=!!t.dSt||void 0;return{o:t.o,fSt:t.fSt,lP:t.lP,_St:t._St,ct:t.ct,gSt:t.gSt,dSt:i,wSt:t.ASt,vSt:t.mSt,pSt:t.pSt,ySt:t.ySt}}function iq(t,i){var e,s,n;return{tIt:null!=(e=i.tIt)?e:null==t?void 0:t.tIt,iIt:null!=(s=i.iIt)?s:null==t?void 0:t.iIt,MSt:null!=(n=i.MSt)?n:null==t?void 0:t.MSt}}async function eq(t,i,e,s,n){const r=i.filter((t=>Va(t,"audio"))),h=i.filter((t=>Va(t,"video"))),o=[],a=e.map((t=>async function(t,i,e){if(!t.Dnt)return;if(!t.TSt)return;if(t.mS!==xu.NSt)return;const s=sq(t.TSt);if(!s)return;if(s.Ub===Wp)return{jC:s,Fz:[],Yz:void 0,Jj:t.Dnt};if(s.Ub===Gp&&t.TSt===Xp)return{jC:s,Fz:[],Yz:t.Dnt,Jj:void 0};{At.oN("HLSDrmUtils","Fetching key uri "+t.Dnt+".");const n=await i.BI({Fu:t.Dnt,NS:e});return{jC:s,Fz:[await n.zj()],Yz:void 0,Jj:void 0}}}(t,s,n)));var u;const c=function(t,i){if(0===i.length)return t;const e=t=>{const e=i.indexOf(t.jC.Ub);return e>=0?e:i.length};return Zc(t,((t,i)=>e(t)-e(i)))}((await Promise.all(a)).filter(z_),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const i of c){const e=_Y(null!=t?t:{},i.jC),s="cbcs";o.push({jC:i.jC,Fz:i.Fz,Yz:i.Yz,Jj:i.Jj,UP:[{initDataTypes:[i.jC.Bb],audioCapabilities:gY(r,s,null==e?void 0:e.audioRobustness),videoCapabilities:gY(h,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]})}return o}function sq(t){return t===Xt?Kp:t===Up?Zp:t===qp?$p:t===Xp?Qa:void 0}function nq(t){if("#"!==t[0])throw new b("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function rq(t){return"#"!==t[0]?t:t.split(":",1)[0]}function hq(t){const i=t.indexOf(":");if(-1===i||t.length<i+1)throw new b("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(i+1)}function oq(t){const i=dn(hq(t));if(void 0===i)throw new b("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return i}function X(t){const i={},e=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=e.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?i[n]=r:At.lIt(ss,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=e.exec(t)}return i}function aq(t,i){const e=X(t);let s,n;try{s=e.URI?fe.Sv(e.URI,i):void 0,n=function(t){switch(t){case"AUDIO":return Eo.Gv;case"VIDEO":return Eo.Yv;case"SUBTITLES":return Eo.HM;case"CLOSED-CAPTIONS":return Eo.DSt}throw new b("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(e.TYPE)}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const r=e["GROUP-ID"],h=e.LANGUAGE,o=e["ASSOC-LANGUAGE"],a=e.NAME,u="YES"===e.DEFAULT;let c="YES"===e.AUTOSELECT;const l="YES"===e.FORCED,d=e["INSTREAM-ID"],f=e.CHARACTERISTICS,_=e.CHANNELS;if(r||At.lIt(ss,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),h||At.lIt(ss,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),a||At.lIt(ss,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),n===Eo.DSt?(s&&At.lIt(ss,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),d?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(d)||At.lIt(ss,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):At.lIt(ss,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):d&&At.lIt(ss,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),u&&!c&&(c=!0,e.AUTOSELECT&&At.lIt(ss,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),e.FORCED&&n!==Eo.HM&&At.lIt(ss,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===r||void 0===a)throw new b("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{ISt:o,SSt:_,DDt:f,MDt:r,pDt:c,mDt:u,yDt:l,TDt:d,gs:h,l:a,$w:n,Dnt:s}}function uq(t,i,e){const s=X(t);let n,r,h;try{n=fe.Sv(e,i),h=function(t){if(void 0===t)return;const i=t.split("x"),e=Number(i[0]),s=Number(i[1]);if(j(e)||j(s))throw new b("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{ji:e,Ti:s}}(s.RESOLUTION),r=function(t){if(!t)return;let i,e,s;const n=t.split(",");for(const t of n){const n=t.trim();Zg(n,"mp4a")?i="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n?i=n:Zg(n,"avc")||Zg(n,"hvc1")||Zg(n,"hev1")||Zg(n,"dvh")||Zg(n,"vp09")||Zg(n,"av01")?e=t:s=s?s+","+n:n}return{tIt:i,iIt:e,MSt:s}}(s.CODECS)}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const o=dn(s.BANDWIDTH),a=dn(s["AVERAGE-BANDWIDTH"]),u=dn(s.SCORE),c=dn(s["FRAME-RATE"]),l=s["HDCP-LEVEL"],d=[];if(void 0!==s["ALLOWED-CPC"]){const t=s["ALLOWED-CPC"].split(",");d.push(...t.map((t=>{const i=t.split(":");return{keysystem:i[0],label:i[1]}})))}const f=s["VIDEO-RANGE"],_=s.AUDIO,g=s.VIDEO,w=s.SUBTITLES,A=s["CLOSED-CAPTIONS"];if(void 0===o?At.lIt(ss,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==a&&a>o&&At.lIt(ss,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),r||At.oN(ss,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),r&&r.iIt&&void 0===h&&At.oN(ss,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===l||na(["TYPE-0","TYPE-1","NONE"],l)||At.lIt(ss,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===f||na(["SDR","PQ","HLG"],f)||At.lIt(ss,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===o)throw new b("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{ESt:d,bSt:_,ynt:a,zz:o,LSt:A,Ast:r,yst:c,kSt:l,nIt:h,Mnt:u,CSt:w,Dnt:n,xSt:g,OSt:f}}function cq(t,i){const e=X(t);if(!e.URI)throw new b("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return uq(t,i,e.URI)}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function dn(t){const i=Number(t);return j(i)?void 0:i}function lq(t,i){const e=X(t);let s,n;try{s=function(t){switch(t){case"NONE":return xu.cB;case"AES-128":return xu.jSt;case"SAMPLE-AES":return xu.NSt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new b("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(e.METHOD),n=e.URI?mq(e.URI,i):void 0}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=e.KEYFORMAT,h=e.IV,o=e.KEYFORMATVERSIONS;let a,u,c,l,d;if(s!==xu.cB){if(c=r||Xp,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(sq(c)!==Kp)throw new b("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=xu.NSt}else a=s;u=n,l=h?Lh(h):void 0,d=o?o.split("/").map((t=>Number(t))):[1]}else a=xu.cB,(n||r||o||h)&&At.lIt(ss,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{mS:a,Dnt:u,zSt:l,TSt:c,PSt:d}}function dq(t){const i=hq(t);if(!i)return[void 0,""];const[e,s]=i.split(",");return[dn(e),s]}function fq(t,i){const e=t.split("@"),s=dn(e[0]),n=e.length>1?dn(e[1]):i;if(void 0===s||void 0===n)throw new b("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{gn:n,U:s}}function _q(t){if(void 0!==t)return fq(t,void 0)}function gq(t,i){return fq(hq(t),i)}function wq(t,i){const e=X(t);try{const t=mq(e.URI,i);return{zy:t,zht:_q(e.BYTERANGE)}}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function Aq(t){const i=hq(t);if(!i)throw new b("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const e=new Date(i);if(!bD(e))throw new b("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return e}function vq(t){const i=X(t),e=i["START-DATE"],s=i["END-DATE"],n=dn(i["PLANNED-DURATION"]);let r,h,o,a=dn(i.DURATION);void 0!==i["SCTE35-CMD"]&&(r=Lh(i["SCTE35-CMD"]).buffer),i["SCTE35-IN"]&&(h=Lh(i["SCTE35-IN"]).buffer),i["SCTE35-OUT"]&&(o=Lh(i["SCTE35-OUT"]).buffer);const u="YES"===i["END-ON-NEXT"],c=function(t){const i={};for(const e of _.keys(t)){const s=t[e];void 0!==s&&Zg(e,"X-")&&(i[e]=s)}return i}(i),l=i.ID,d=i.CLASS;let f,g;if(void 0===e)At.lIt(ss,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+e+".");else if(f=new Date(e),g=void 0!==s?new Date(s):void 0,bD(f)||At.lIt(ss,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const i=new Date(f.getTime()+1e3*a);g?g.getTime()!==i.getTime()&&(At.lIt(ss,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),g=i):g=i}else g&&(a=(f.getTime()-g.getTime())/1e3);if(u&&(i.CLASS||At.lIt(ss,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),i.DURATION&&At.lIt(ss,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),g&&At.lIt(ss,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===l&&At.lIt(ss,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===l||void 0===f)throw new b("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:l,fSt:d,lP:f,_St:g,ct:a,gSt:n,mSt:r,ySt:h,pSt:o,dSt:u,ASt:c}}function mq(t,i){if(void 0===t)throw new b("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return fe.Sv(t,i)}function pq(t,i){const e=X(t),s=dn(e.DURATION),n=mq(e.URI,i),r=_q(e.BYTERANGE),h="YES"===e.INDEPENDENT,o="YES"===e.GAP;if(void 0===s)throw new b("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:s,Dnt:{zy:n,zht:r},BSt:h,RSt:o}}function yq(t){const i=X(t);return{USt:"YES"===i["CAN-BLOCK-RELOAD"],QSt:dn(i["CAN-SKIP-UNTIL"]),FSt:"YES"===i["CAN-SKIP-DATERANGES"],YSt:dn(i["HOLD-BACK"]),GSt:dn(i["PART-HOLD-BACK"])}}function Mq(t,i){const e=X(t);if(void 0===e.URI)throw new b("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=mq(e.URI,i),n=dn(e["LAST-MSN"]),r=dn(e["LAST-PART"]);if(void 0===n)throw new b("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{Dnt:s,VSt:n,WSt:r}}function Tq(t,i){var e;const s=X(t),n=dn(s["SKIPPED-SEGMENTS"]),r=null==(e=s["RECENTLY-REMOVED-DATERANGES"])?void 0:e.split("\t");if(!n)throw new b("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{HSt:n,qSt:r,XSt:i}}function Nq(t){const i=dn(X(t)["PART-TARGET"]);if(void 0===i)throw new b("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return i}function Dq(t){switch(hq(t)){case"VOD":return WH.ZSt;case"EVENT":return WH.KSt;default:return At.lIt(ss,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),WH.Hv}}function Iq(t,i){const e=X(t);let s,n;try{s=function(t){if(void 0===t)throw new b("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return Jt.JSt;if("PART"===t)return Jt.$St;throw new b("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(e.TYPE),n=mq(e.URI,i)}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=dn(e["BYTERANGE-START"]),h=dn(e["BYTERANGE-LENGTH"]);let o;return void 0===r&&void 0===h||(o={gn:r||0,U:h}),{$w:s,Dnt:{zy:n,zht:o}}}r(),r(),r(),r(),r(),function(t){t[t.Gv=0]="Gv",t[t.Yv=1]="Yv",t[t.HM=2]="HM",t[t.DSt=3]="DSt"}(Eo||(Eo={})),function(t){t[t.JSt=0]="JSt",t[t.$St=1]="$St"}(Jt||(Jt={})),function(t){t[t.cB=0]="cB",t[t.jSt=1]="jSt",t[t.NSt=2]="NSt"}(xu||(xu={})),function(t){t[t.Hv=0]="Hv",t[t.ZSt=1]="ZSt",t[t.KSt=2]="KSt"}(WH||(WH={})),r(),r(),r();var Sq=class t{tEt(){const t=this.iEt[this.eEt];return this.eEt+=1,t}sEt(){return this.iEt[this.eEt]}Lm(){const i=new t("");return i.eEt=0,i.iEt=this.iEt.slice(this.eEt),i}static nEt(t){if(!t)return[];return t.split(/[\r\n]+/).map((t=>t.trim())).filter((t=>t))}constructor(i){this.eEt=0,this.iEt=t.nEt(i)}};function Eq(t,i,e){const s=t.Dnt;let n=t.DT,r=t.rEt,h=t.gn;switch(e){case"#EXT-X-VERSION":n=function(t){const i=oq(t);return j(i)?(At.lIt(ss,"Playlist version is NaN: "+t+"."),1):i}(i);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":h=function(t){const i=X(t),e=dn(i["TIME-OFFSET"]);if(void 0===e)throw new b("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{hEt:e,oEt:"YES"===i.PRECISE}}(i);break;case"#EXT-X-DEFINE":At.lIt(ss,"Ignoring unsupported #EXT-X-DEFINE: "+i+".");break;default:At.oN(ss,"Ignoring unrecognized line or comment: "+i+".")}return{Dnt:s,DT:n,rEt:r,gn:h}}function bq(t,i){return t.map((t=>t.mS===xu.cB||t.zSt?t:oe({},t,{zSt:Lq(i)})))}function Lq(t){const i=new DataView(new ArrayBuffer(16)),e=new Vr;return e.Sm(8),UA(i,e,Se.fromNumber(t)),new T(i.buffer)}function kq(t,i,e){At.oN(ss,"Parsing M3U8 playlist at "+t+".");const s=new Sq(e);if("#EXTM3U"!==s.tEt())throw new b("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(e)?function(t,i){let e;try{e=fe.Sv(t)}catch(i){throw At.lIt(ss,"The master playlist has no valid base URI: "+t+"."),new b("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let s={Dnt:e,rEt:void 0,gn:void 0,DT:void 0};const n=[],r=[],h=[],o=[];for(;;){const t=i.tEt();if(!t)break;try{const a=nq(t);switch(a){case"#EXT-X-MEDIA":{const i=aq(t,e);n.push(i);break}case"#EXT-X-STREAM-INF":{const s=uq(t,e,i.tEt());r.push(s);break}case"#EXT-X-I-FRAME-STREAM-INF":{const i=cq(t,e);h.push(i);break}case"#EXT-X-SESSION-DATA":At.lIt(ss,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const i=lq(t,e);o.push(i);break}default:s=Eq(s,t,a)}}catch(i){At.lIt(ss,"Ignoring unparsable line: "+t,i)}}let a=s.DT;var u;const c=null!=(u=s.rEt)&&u,l=s.gn;return void 0===a&&(At.lIt(ss,"The playlist has no #EXT-X-VERSION, assuming version is 2."),a=2),a>=8&&(r.some((t=>void 0!==t.Mnt))||h.some((t=>void 0!==t.Mnt)))&&(r.some((t=>void 0===t.Mnt))||h.some((t=>void 0===t.Mnt)))&&At.lIt(ss,"If one master playlist variant stream has a SCORE, all variants should have it."),{Dnt:e,DT:a,rEt:c,gn:l,aEt:h,uEt:o,ZT:n,cEt:r}}(t,s):function(t,i,e){let s={Dnt:t,rEt:void 0,gn:void 0,DT:void 0};const n=[];let r,h,o,a,u=!1,c=!1;const l=[],d=Qt();let f,_,g,w,A,v,m,p,y,M=[],T=[],N=!1,D=!1;const I=[],S=[];let E,L,k,C,x,O=0,j=!1,z=WH.Hv,P=!1,B=0;try{x=fe.Sv(t)}catch(i){throw At.lIt(ss,"The media playlist has no valid base URI: "+t+".",i),new b("HLSPlaylistParser - Could not parse HLS media playlist.")}const R=e.Lm();for(;void 0===L||void 0===k;){const t=R.tEt();if(!t)break;try{switch(rq(t)){case"#EXT-X-MEDIA-SEQUENCE":L=oq(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":k=oq(t)}}catch(i){At.lIt(ss,"Ignoring unparsable line: "+t,i)}}void 0===L&&(At.oN(ss,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),L=0),void 0===k&&(At.oN(ss,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),k=0);let U=L,Q=k;for(;;){const t=e.tEt();if(!t)break;let i=!1;try{const e=rq(t);switch(e){case"#EXTINF":i=!0,[f,_]=dq(t);break;case"#EXT-X-BYTERANGE":i=!0,g=gq(t,O),g&&(O=g.gn+g.U);break;case"#EXT-X-DISCONTINUITY":i=!0,N=!0,Q++;break;case"#EXT-X-KEY":{var F;i=!0;const e=lq(t,x);if(e.mS===xu.cB){d.clear(),y=void 0;break}var Y;const s=null!=(Y=null==(F=e.TSt)?void 0:F.toString())?Y:"identity";d.set(s,e),e.mS===xu.jSt&&(y=e);break}case"#EXT-X-MAP":i=!0,A=wq(t,x),v=y;break;case"#EXT-X-PROGRAM-DATE-TIME":i=!0,m=Aq(t);break;case"#EXT-X-GAP":i=!0,D=!0;break;case"#EXT-X-BITRATE":i=!0,p=oq(t);break;case"#EXT-X-TARGETDURATION":r=oq(t);break;case"#EXT-X-DATERANGE":{const i=vq(t);n.push(i);break}case"#EXT-X-PART":{i=!0;const e=pq(t,x);T.push(e);break}case"#EXT-X-PRELOAD-HINT":{const i=Iq(t,x);I.push(i);break}case"#EXT-X-SKIP":{l.length>0&&At.lIt(ss,"#EXT-X-SKIP must appear before any #EXTINF tags."),i=!0;const e=Tq(t,U);B=e.HSt,C=e.qSt,U+=e.HSt;break}case"#EXT-X-SERVER-CONTROL":{const i=yq(t);u=i.USt,h=i.QSt,c=i.FSt,o=i.YSt,a=i.GSt;break}case"#EXT-X-RENDITION-REPORT":{const i=Mq(t,x);S.push(i);break}case"#EXT-X-PART-INF":E=Nq(t);break;case"#EXT-X-MEDIA-SEQUENCE":i&&At.lIt(ss,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":i&&At.lIt(ss,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":j=!0;break;case"#EXT-X-PLAYLIST-TYPE":z=Dq(t);break;case"#EXT-X-I-FRAMES-ONLY":P=!0;break;default:if(Zg(e,"#"))s=Eq(s,t,e);else{w=fe.Sv(t,x);const i=A?{Dnt:A,lEt:v}:void 0,e={uEt:bq(ng(d),U),hI:M,dEt:T,ct:f,mP:_,fEt:N,Dnt:{zht:g,zy:w},_Et:i,gEt:m,RSt:D,wEt:p,XSt:U,AEt:Q};l.push(e),U++,M=[],T=[],f=void 0,_=void 0,N=!1,g=void 0,w=void 0,m=void 0,D=!1,p=void 0}}}catch(i){At.lIt(ss,"Ignoring unparsable line: "+t,i)}}if(T.length){const t=A?{Dnt:A,lEt:y}:void 0,i={uEt:bq(ng(d),U),hI:M,dEt:T,ct:f,mP:_,fEt:N,Dnt:void 0,_Et:t,gEt:m,RSt:D,wEt:p,XSt:U,AEt:Q};l.push(i)}let G=s.DT;var V;const W=null!=(V=s.rEt)&&V,H=s.gn;void 0===G&&(At.lIt(ss,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),G=2),void 0===r&&At.lIt(ss,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const q=l.length,X=q>0;X||At.lIt(ss,"The HLS media playlist contains no segments.");const Z=X&&l[q-1].dEt.length>0;return Z&&void 0===E&&At.lIt(ss,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),Z&&void 0===a&&At.lIt(ss,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{USt:u,QSt:h,FSt:c,vEt:n,AEt:k,mEt:j,rEt:W,YSt:o,pEt:P,XSt:L,HSt:B,GSt:a,sSt:E,yEt:z,MEt:I,qSt:C,TEt:S,NEt:r,det:l,gn:H,Dnt:x,DEt:i,DT:G}}(t,i,s)}r(),r();var Cq=class{get Dnt(){return this.vDt.Dnt}get Ast(){return this.IEt}set Ast(t){this.IEt=t?Oq(t):void 0,this.SEt=!0}get EEt(){return this.SEt}get bEt(){if(!this.LEt.length)return Ki.KB();var t,i;const e=null!=(i=$_(this.LEt,(i=>null!=(t=i.vDt.kEt)?t:0)))?i:this.pIt[0],s=e.vDt.det;if(!s.length||s.length<2)return Ki.KB();const n=e.vDt.mEt?s[0].Fm:s[1].Fm;var r,h;const o=s[s.length-1].Ym-this.pIt.reduce(((t,i)=>x.max(null!=(h=null!=(r=i.vDt.GSt)?r:i.vDt.YSt)?h:0,t)),0);return o<n?Ki.KB():new Ki([n,o])}get pIt(){return this.LEt}get _It(){return this.LEt.filter((t=>t.$w===Eo.Gv))}get gIt(){return this.LEt.filter((t=>t.$w===Eo.Yv))}get CEt(){return this.LEt.filter((t=>t.$w===Eo.HM))}get xEt(){return this.LEt.filter((t=>t.$w===Eo.DSt))}OEt(t){for(const i of this.LEt){const e=i.vDt.OEt(t);if(void 0!==e)return e}}jEt(t){for(const i of this.LEt){const e=i.vDt.jEt(t);if(void 0!==e)return e}}zEt(t){Et(this.LEt,t)}constructor(t,i,e){var s,n,r,h;this.o=xq++,this.Mnt=void 0,this.nIt=void 0,this.ynt=void 0,this.SEt=!1,this.LEt=[],this.vDt=i,this.zz=t.zz,this.ynt=t.ynt,this.Mnt=t.Mnt,this.IEt=t.Ast?Oq(t.Ast):void 0,this.nIt=t.nIt,this.yst=t.yst,this.bSt=null!=(s=t.bSt)?s:"PEt"+this.o,this.xSt=null!=(n=t.xSt)?n:"BEt"+this.o,this.CSt=null!=(r=t.CSt)?r:"REt"+this.o,this.LSt=null!=(h=t.LSt)?h:"UEt"+this.o,this.LEt=e}},xq=0;function Oq(t){return oe({},t,{iIt:t.iIt?bm(t.iIt):void 0})}r(),r(),r();var Qr,jq=class{get Fm(){var t;return this.$m+(null!=(t=this.QEt)?t:0)}get FEt(){return this.YEt}get uEt(){return this.GEt.uEt}VEt(t,i){this.$m=t,this.YEt=i}constructor(t,i,e,s,n){this.f8=void 0,this.GEt=t,this.WEt=i,this.$m=e,this.YEt=s,this.ct=n.ct,this.Dnt=n.Dnt,this.BSt=n.BSt,this.RSt=n.RSt}},zq=class{get Fm(){var t;return this.$m+(null!=(t=this.HEt)?t:0)}get qEt(){return this.$m}get ct(){return this.JL}get Dnt(){return this.XEt}get ZEt(){return this.KEt}get FEt(){return this.YEt}get dEt(){return this.JEt}get $Et(){return this.tbt}get Ym(){var t;return this.Fm+(null!=(t=this.JL)?t:this.tbt)}set QEt(t){this.HEt=t;for(const i of this.JEt)i.QEt=t}get QEt(){return this.HEt}ibt(t){return this.JEt[t]}ebt(t){for(let i=0;i<this.JEt.length;i++){const e=this.JEt[i],s=e.Fm,n=s+e.ct;if(s<=t&&t<=n)return t===n&&i+1<this.JEt.length?this.JEt[i+1]:e}}sbt(t){for(let i=this.JEt.length-1;i>=0;i--){const e=this.JEt[i];if(e.Fm<=t)return e}}nbt(t){let i=this.sbt(t);for(;i&&!i.BSt&&i.WEt>0;)i=this.ibt(i.WEt-1);return i}VEt(t,i,e){const s=t.dEt.length!==this.JEt.length||e!==this.YEt;this.KEt=i,this.YEt=e,this.JL=t.ct,null!=this.gEt||(this.gEt=t.gEt),void 0===this.XEt&&(this.XEt=t.Dnt),s&&this.rbt(t.dEt)}rbt(t){this.JEt.length>t.length&&(this.JEt.length=t.length);let i=0;for(let e=0;e<t.length;e++){const s=t[e],n=this.YEt&&e===t.length-1,r=this.$m+i;if(e<this.JEt.length)this.JEt[e].VEt(r,n);else{const t=new jq(this,e,r,n,s);this.JEt.push(t)}i+=s.ct}this.tbt=i}hbt(){Ri(this.JEt),this.tbt=0}constructor(t,i,e,s,n){this.f8=void 0,this.JEt=[],this.tbt=0,this.$m=t,this._Et=n._Et,this.KEt=e,this.YEt=s,this.JL=n.ct,this.gEt=n.gEt,this.XEt=n.Dnt,this.RSt=n.RSt,this.XSt=n.XSt,this.fEt=n.fEt,this.AEt=i,this.uEt=n.uEt,this.rbt(n.dEt)}};r(),function(t){t.obt="YES",t.abt="v2"}(Qr||(Qr={})),r();var Or=class extends Jo{};r(),r(),r();var Pq=class extends Hn{get oa(){return this.Ua||(this.Ua=function(t){return Ou(Rh(t),{get content(){return t.O},get class(){return t.fSt},get startDate(){return t.lP},get endDate(){return t._St},get duration(){return t.ct},get plannedDuration(){return t.gSt},get endOnNext(){return t.dSt},get scte35Cmd(){return t.vSt},get scte35Out(){return t.pSt},get scte35In(){return t.ySt},get customAttributes(){return t.wSt}})}(this)),this.Ua}get fSt(){return this.ubt}get lP(){return this.cbt}get _St(){return this.lbt}get ct(){return this.JL}get gSt(){return this.dbt}get dSt(){return this.fbt}get vSt(){return this._bt}get pSt(){return this.gbt}get ySt(){return this.wbt}get wSt(){return this.Abt}Ln(t){let i=!1;var e;(void 0===this.ubt&&void 0!==t.fSt&&(i=!0,this.ubt=t.fSt),void 0===this.lbt&&void 0!==t._St&&(i=!0,this.lbt=t._St),void 0===this.JL&&void 0!==t.ct&&(i=!0,this.JL=t.ct),void 0===this.dbt&&void 0!==t.gSt&&(i=!0,this.dbt=t.gSt),!this.fbt&&t.dSt&&(i=!0,this.fbt=t.dSt),i=this.updateCustomAttributes(t,i),void 0===this._bt&&void 0!==t.vSt&&(i=!0,this._bt=t.vSt),void 0===this.gbt&&void 0!==t.pSt&&(i=!0,this.gbt=t.pSt),void 0===this.wbt&&void 0!==t.ySt&&(i=!0,this.wbt=t.ySt),this.vbt(),this.mbt(),this.pbt(),i)&&(this.mo(new yu(this)),null==(e=this.tp)||e.mo(new za(this)))}updateCustomAttributes(t,i){let e=i;if(t.wSt)for(const i of _.keys(t.wSt))void 0===this.Abt[i]&&(e=!0,this.Abt[i]=t.wSt[i]);return e}vbt(){this.JL&&!this.lbt&&(this.lbt=new Date(this.cbt.getTime()+Is(this.JL)))}mbt(){this.lbt&&!this.JL&&(this.JL=LD(this.lbt.getTime()-this.cbt.getTime()))}pbt(){this.ep===1/0&&(this.lbt||this.JL)&&(this.ep=Bq(this.$m,this.JL,this.cbt,this.lbt))}constructor(t,i){super(i,Bq(i,t.ct,t.lP,t._St),void 0,!1,t.o),this.ubt=t.fSt,this.cbt=t.lP,this.lbt=t._St,this.JL=t.ct,this.dbt=t.gSt,this.fbt=Boolean(t.dSt),this.Abt=t.wSt||{},this._bt=t.vSt,this.gbt=t.pSt,this.wbt=t.ySt,this.vbt(),this.mbt()}};function Bq(t,i,e,s){return z_(i)?t+i:s?t+(LD(s.getTime())-LD(e.getTime())):1/0}var Rq=class extends ax{Ln(t,i){Uq(this,Qq(t),i)}xS(t){Fq(this.L.Nw,t),super.xS(t)}constructor(){super(void 0,void 0,Ks.DATE_RANGE)}};function Uq(t,i,e){const s=t.L.Nw;for(let e=s.length-1;e>=0;e--){const n=s[e],r=Gr(i,(t=>t.o===n.o));r?n.Ln(r):t.GI(n)}for(const s of i){const i=s.lP;if(void 0!==i&&!t.J$(s.o)){const n=e(i),r=new Pq(s,n);Fq(t.L.Nw,r),t.xS(r)}}}function Qq(t){const i=Qt(),e=[];for(const s of t)if(i.has(s.o)){const t=i.get(s.o),e=oe({},t,Ig(s),{wSt:oe({},t.wSt,s.wSt)});i.set(s.o,e)}else i.set(s.o,s),e.push(s.o);return e.map((t=>i.get(t)))}function Fq(t,i){const e=Z_(t,(t=>t.fSt===i.fSt));e&&e.dSt&&e.Ln({o:e.o,_St:i.lP})}var Yq=String.fromCharCode(95),Gq=Yq+"HLS_msn",Vq=Yq+"HLS_part",Wq=Yq+"HLS_skip",Hq="HLSMediaPlaylist",qq=class{get mEt(){return Boolean(Gr(this.aht,(t=>t.FEt)))}get ct(){return this.JL}get fg(){return this.w$}get ybt(){return this.Mbt}get nSt(){return this.Tbt}get sSt(){return this.Nbt}get YSt(){return this.mEt?0:this.Dbt?this.Dbt:this.Tbt?3*this.Tbt:void 0}get GSt(){var t;return null!=(t=this.Ibt)?t:this.Nbt?3*this.Nbt:void 0}get Sbt(){if(this.mEt)return;if(0===this.aht.length)return;const t=this.aht[this.aht.length-1];var i,e;const s=null!=(e=null!=(i=this.GSt)?i:this.YSt)?e:0;return t.Ym-s}get USt(){return this.Ebt}get QSt(){return this.bbt}get FSt(){return this.Lbt}get yEt(){return this.kbt}get Cbt(){return void 0!==this.sSt}get xbt(){if(this.mEt)return!0;const t=fe.h_()/1e3,i=this.kEt,e=this.Obt;return void 0!==i&&t-i<e}get kEt(){return this.jbt}get QEt(){return this.HEt}get Obt(){var t;return null!=(t=this.Tbt)?t:void 0===this.jbt?5:1}get det(){return this.aht}get vEt(){return this.zbt}get Pbt(){return this.Bbt}set Pbt(t){this.Bbt=t}get gn(){return this.wI}get Rbt(){return this.Ubt}$Dt(t){if(!t)return this.Dnt;const i=fe.Ah(this.Dnt);return void 0!==t.XSt&&i.searchParams.append(Gq,String(t.XSt)),void 0!==t.Qbt&&i.searchParams.append(Vq,String(t.Qbt)),void 0!==t.uT&&i.searchParams.append(Wq,t.uT),i.href}tgt(t){const i=this.aht;if(0===i.length)return;const e=t-i[0].XSt;return e<0||e>=i.length?void 0:i[e]}Fbt(t){if(0===this.aht.length)return;const i=_Q(Xq.kb,this.aht,t);if(!(i<0)){const e=this.aht[i];return t===e.Ym&&i+1<this.aht.length?this.aht[i+1]:e}{const i=this.aht[this.aht.length-1];if(t===i.Ym)return i}}Ybt(t){if(0===this.aht.length)return;const i=this.aht[0];if(t<i.Ym)return i;const e=this.aht[this.aht.length-1];return t>=e.Fm?e:this.Fbt(t)}OEt(t){const i=this.Ybt(t);if(void 0===i)return;for(let e=i.XSt-this.aht[0].XSt;e>=0;e--){const i=this.aht[e];if(void 0!==i.gEt)return new Date(i.gEt.getTime()+1e3*(t-i.Fm))}}jEt(t){let i;for(const e of this.aht)if(Zq(e))if(void 0===i)i=e;else{if(!(e.gEt.getTime()<=t.getTime()))break;i=e}if(void 0!==i)return i.Fm+(t.getTime()-i.gEt.getTime())/1e3}Gbt(t){switch(t){case Jt.JSt:return this.Vbt;case Jt.$St:return this.Wbt;default:return}}VEt(t){var i;void 0===this.Tbt&&(this.Tbt=null!=(i=t.NEt)?i:this.Hbt(t));void 0===this.Dbt&&void 0!==t.YSt&&(this.Dbt=t.YSt),void 0===this.Nbt&&void 0!==t.sSt&&(this.Nbt=t.sSt),void 0===this.Ibt&&void 0!==t.GSt&&(this.Ibt=t.GSt),this.Ebt=t.USt,this.bbt=t.QSt,this.Lbt=t.FSt,this.kbt=t.yEt,this._ht(t),this.qbt(t);const e=Gr(t.MEt,(t=>t.$w===Jt.JSt)),s=Gr(t.MEt,(t=>t.$w===Jt.$St));this.Vbt=e?{Dnt:e.Dnt,$w:e.$w,AEt:t.AEt}:void 0,this.Wbt=s?{Dnt:s.Dnt,$w:s.$w,AEt:t.AEt}:void 0,this.jbt=fe.h_()/1e3,this.Xbt(),null!=this.wI||(this.wI=t.gn)}Xbt(){this.Mbt=this.Zbt(),this.w$=this.Kbt(this.Mbt),this.JL=this.Jbt()}Zbt(){const t=this.det;if(0===t.length)return Ki.KB();const i=t[0].Fm,e=t[t.length-1].Ym;return new Ki([i,e])}Kbt(t){if(0===t.U||this.mEt)return t;const i=t.gn(0);var e,s;const n=t.bn(0)-(null!=(s=null!=(e=this.GSt)?e:this.YSt)?s:0);return n<i?Ki.XB(i):new Ki([i,n])}Jbt(){return 0===this.aht.length?0:this.mEt?So(this.aht,(i=>null!=(t=i.ct)?t:i.$Et)):1/0;var t}Hbt(t){let i;for(const e of t.det)if(void 0!==e.ct){const t=x.max(1,x.round(e.ct));(void 0===i||i<t)&&(i=t)}if(void 0===i)throw new b("HLSModel - Could not determine required segment target duration.");return i}_ht(t){if(0===t.det.length)return Ri(this.aht),void this.$bt();const i=this.tLt(t);if(!i)return;let e,s,n;i.iLt>0&&this.aht.splice(0,i.iLt);const r=t.HSt;if(r>0){if(r>this.aht.length)throw new Or("New playlist skips over missing segments.");const i=this.aht[r-1];if(void 0===i.ct)throw new Or("New playlist skips over an incomplete segment.");e=i.qEt+i.ct,n=i.AEt-t.AEt,s=r;for(let t=0;t<r;t++)this.aht[t].hbt()}else e=i.eLt,n=0,s=0;for(let i=0;i<t.det.length;i++,s++){const r=t.det[i],h=0===i,o=t.mEt&&i===t.det.length-1,a=r.ct,u=r.AEt+n;if(s<this.aht.length){const t=this.aht[s];0,t.VEt(r,h,o)}else{let t=r;if(this.aht.length>0&&void 0===t._Et){t=oe({},t,{_Et:this.aht[this.aht.length-1]._Et})}const i=new zq(e,u,h,o,t);i.QEt=this.HEt,this.aht.push(i)}void 0!==a&&(e+=a)}}tLt(t){if(0===this.aht.length)return{iLt:0,eLt:0};const i=this.aht[0].XSt,e=this.aht[this.aht.length-1].XSt,s=t.det[0].XSt-t.HSt,n=t.det[t.det.length-1].XSt;let r=0,h=0;if(s<i){const e=this.det[0].gEt,n=t.det[0].gEt;if(!(e&&n&&e<n))return void At.lIt(Hq,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+i+")");r=this.aht.length,this.$bt()}else{if(n<e)return void At.lIt(Hq,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+e+")");if(e<s){var o;h=null!=(o=function(t,i){const e=Z_(t,(t=>void 0!==t.gEt));if(void 0===e)return;const s=function(t){let i=0;for(const s of t){if(s.fEt)return;if(s.gEt)return[s,i];var e;i+=null!=(e=s.ct)?e:0}return}(i.det);if(void 0===s)return;const[n,r]=s;if(e.AEt!==n.AEt)return;const h=(n.gEt.getTime()-e.gEt.getTime())/1e3;return e.qEt+h-r}(this.aht,t))?o:function(t,i,e){const s=t[t.length-1];var n;const r=null!=(n=s.ct)?n:x.max(e,s.$Et),h=e*(i-s.XSt-1);return s.qEt+r+h}(this.aht,s,this.Tbt),At.cIt(Hq,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+e+"), resetting playlist and restarting at "+h+"s"),r=this.aht.length,this.$bt()}else{0;const t=Da(this.aht,(t=>t.XSt===s));0,h=this.aht[t].qEt,t>0&&(r=t)}}return{iLt:r,eLt:h}}qbt(t){let i=t.vEt.map(tq);if(t.FSt&&t.DEt.uT===Qr.abt&&(i=this.zbt.concat(i)),this.zbt=Qq(i),t.qSt)for(const i of t.qSt){const t=Da(this.zbt,(t=>t.o===i));t>=0&&jc(this.zbt,t)}}sLt(t,i){if(this.HEt!==t){this.HEt=t;for(const t of this.aht)t.QEt=this.HEt;this.Xbt()}this.Ubt=i}$bt(){this.HEt=void 0,this.Ubt=void 0}constructor(t,i){this.jbt=void 0,this.Vbt=void 0,this.Wbt=void 0,this.Tbt=void 0,this.Nbt=void 0,this.Dbt=void 0,this.Ibt=void 0,this.aht=[],this.zbt=[],this.Ebt=!1,this.bbt=void 0,this.Lbt=!1,this.kbt=WH.Hv,this.w$=Ki.KB(),this.Mbt=Ki.KB(),this.JL=void 0,this.Bbt=-1/0,this.Ubt=void 0,this.Dnt=t,this.wI=i}},Xq=class t{static get kb(){return null!=this.Bet||(this.Bet=new t),this.Bet}nht(t){return t.Fm}rht(t){return t.Ym}hht(t,i){return Li(t,i)}oht(t,i,e){return(t-i)/(e-i)}};function Zq(t){return void 0!==t.gEt}function hr(t){return void 0!==t.dEt}function Kq(t){return hr(t)?t.ZEt:0===t.WEt&&t.GEt.ZEt}function Jq(t,i){return hr(t)?hr(i)?t.XSt+1===i.XSt:0===i.WEt&&Jq(t,i.GEt):t.WEt===t.GEt.dEt.length-1?Jq(t.GEt,i):!hr(i)&&t.GEt===i.GEt&&t.WEt+1===i.WEt}r(),r();var $q=class{nLt(t){const i=this.rLt.get(t);return void 0!==i&&tX(i)}hLt(t){return this.aLt(t).oLt.nL}uLt(t){const i=this.rLt.get(t);if(!i||!tX(i))throw new b("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return i}cLt(t){return this.uLt(t).Zy}lLt(t,i){const e=hr(i)?i:i.GEt,s=this.uLt(e.AEt);let n=t.gm(s.Zy);if(s.dLt){const t=aa.Ey(i.Fm).bp(n);if(t.Ip().mp(Cv())){const i=x.round(t.vp()/kv().vp());n=n.gm(kv().oy(i))}}return n}fLt(t,i){return this.lLt(t,i).bp(t)}_Lt(t,i,e,s,n){const r=this.aLt(t);void 0===r.Zy&&(r.gLt.some((t=>t.eut===i))||(r.gLt.push({eut:i,wLt:e,ALt:s.Ny(e.vy),dLt:n}),this.vLt(r)))}vLt(t){if(t.Zy||!this.mLt(t))return;const i=kh(t.gLt,iX);Ri(t.gLt),t.Zy=i.ALt.bp(i.wLt),t.dLt=i.dLt,t.oLt.eL()}mLt(t){return this.pLt.length>0&&this.pLt.every((i=>t.gLt.some((t=>t.eut===i))))}aLt(t){if(this.rLt.has(t))return this.rLt.get(t);{const i={Zy:void 0,dLt:!1,oLt:new No,gLt:[]};return this.rLt.set(t,i),i}}yLt(t){this.pLt=t,this.rLt.forEach((t=>this.vLt(t)))}Xf(){this.rLt.forEach((t=>t.oLt.s_())),this.rLt.clear()}constructor(){this.pLt=[],this.rLt=Ye()}};function tX(t){return void 0!==t.Zy}function iX(t,i){return t.dLt||i.dLt?function(t,i){let e=t.bp(i);return t.kp()||i.kp()||(e.yp(Cv())?e=e.bp(kv()):e.Dp(Cv().Ep())&&(e=e.gm(kv()))),e}(t.wLt,i.wLt).pp(aa.zp):t.wLt.pp(i.wLt)}var eX=class{get MLt(){return this.TLt}get fIt(){return this.NLt}get iI(){return this.DLt}VEt(t,i){if(KH(t))if(0===this.NLt.length)this.ILt(t);else{if(!i)return void At.lIt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");i.vDt.VEt(t)}else{if(0!==this.NLt.length)return void At.lIt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.SLt(t)}}ILt(t){const i=this.ELt(t.Dnt);i.VEt(t);const e=this.bLt(Eo.Gv,i),s=this.bLt(Eo.Yv,i),n=new Cq({Dnt:i.Dnt,zz:0,ynt:0,Mnt:NaN,Ast:void 0,nIt:void 0,yst:0,ESt:[],kSt:void 0,OSt:void 0,bSt:void 0,xSt:void 0,CSt:void 0,LSt:void 0},i,[e,s]);this.NLt.push(n)}SLt(t){this.TLt.push(...t.uEt);const i=this.LLt(t);for(const e of t.cEt){const s=i.filter((t=>nX(t,e)));this.kLt(e,s);const n=new Cq(e,this.ELt(e.Dnt,t.gn),s);this.NLt.push(n)}}ELt(t,i){let e=this.CLt.get(t);return void 0===e&&(e=new qq(t,i),this.CLt.set(t,e)),e}LLt(t){const i=[];for(const e of t.ZT)if(void 0===e.Dnt){for(const s of t.cEt)if(sX(e.$w,e.MDt,s)){const t=new _H(e,this.ELt(s.Dnt));i.push(t)}}else{const t=new _H(e,this.ELt(e.Dnt));i.push(t)}return i}bLt(t,i){return new _H({$w:t,Dnt:void 0,MDt:"",gs:void 0,ISt:void 0,l:"",mDt:!0,pDt:!1,yDt:!1,DDt:void 0,TDt:void 0,SSt:void 0},i)}kLt(t,i){const e=i.filter((t=>t.$w===Eo.Gv)),s=i.filter((t=>t.$w===Eo.Yv)),n=t.Ast&&(t.Ast.iIt||t.Ast.tIt);if((!n||t.Ast.iIt)&&0===s.length){const e=this.bLt(Eo.Yv,this.ELt(t.Dnt));i.push(e)}if((!n||t.Ast.tIt)&&0===e.length){const e=this.bLt(Eo.Gv,this.ELt(t.Dnt));i.push(e)}t.Ast&&t.Ast.MSt}xLt(t){for(const i of this.NLt)for(const e of i.pIt)if(e===t)return e}OLt(t){for(const i of this.NLt)if(i===t)return i}jLt(t){for(const i of this.NLt)if(na(i.pIt,t))return i}Xf(){Ri(this.NLt),Ri(this.TLt),this.CLt.clear(),this.DLt.Xf()}constructor(t){this.zLt=t,this.NLt=[],this.TLt=[],this.CLt=Qt(),this.DLt=new $q}};function sX(t,i,e){switch(t){case Eo.Gv:return e.bSt===i;case Eo.Yv:return e.xSt===i;case Eo.HM:return e.CSt===i;case Eo.DSt:return e.LSt===i}return!1}function nX(t,i){return sX(t.$w,t.MDt,i)&&(!t.NDt||t.vDt.Dnt===i.Dnt)}r();var rX=class extends gg{constructor(t){super(Yh.PLt),this.ODt=t}};r();var Yh,hX=class extends gg{constructor(t){super(Yh.BLt),this.ODt=t}},oX="HlsModelUpdater";!function(t){t.PLt="RLt",t.BLt="ULt"}(Yh||(Yh={}));var aX=class extends i{get QLt(){return this.FLt}get YLt(){return this.GLt}get br(){return this.Pnt}get VLt(){return this.WLt}async HLt(t){const i=this.Pnt.zLt;if(!i)throw new b("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this.mo(new ie);const e=await this.qLt(i,{},2,!0,t),s=e.vDt;if(!ZH(s)&&!KH(s))throw new b("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");ZH(s)||At.oN(oX,"Detected media playlist only HLS stream."),this.XLt(s),e.ZLt&&(this.GLt=!0,await this.KLt(t)),this.FLt=!0}async JLt(t,i,e,s){const n=this.Pnt.xLt(t);if(!n)throw new b("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={XSt:i,Qbt:e,uT:dX(n)},h=Is(x.max(1,3*t.vDt.Obt));try{await this.$Lt(n,r,s,h)}catch(t){throw yo(t),this.tkt(n),t}}ikt(t,i){const e=this.Pnt.xLt(t);if(!e)throw new b("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={XSt:void 0,Qbt:void 0,uT:dX(e)},n=Is(x.max(1,3*t.vDt.Obt));return this.$Lt(e,s,i,n)}ekt(t,i){return this.skt.has(t.Bw)||this.skt.set(t.Bw,new No),hl(this.skt.get(t.Bw).nL,i)}tkt(t){this.mo(new hX(t))}async $Lt(t,i,e,s){const n=t.vDt.$Dt(i);let r;try{r=(await this.qLt(n,i,0,this.GLt,e,s)).vDt}catch(i){throw yo(i),t.vDt.Pbt=fe.h_(),i}if(!KH(r))throw new b("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");try{this.XLt(r,t)}catch(n){if(n instanceof Or&&void 0!==i.uT){const n=oe({},i,{uT:void 0});return this.$Lt(t,n,e,s)}throw n}if(this.nkt&&t!==this.nkt&&!this.nkt.vDt.xbt)try{await this.ikt(this.nkt,e)}catch(i){yo(i),this.nkt=t,this.rkt()}this.hkt(t),this.nkt=t}async qLt(t,i,e,s,n,r){if(At.oN(oX,"Loading HLS playlist at "+t+"."),s){const i=await this.okt(t,n);if(void 0!==i)return{vDt:i,ZLt:!0}}return{vDt:await this.akt(t,i,e,n,r),ZLt:!1}}async okt(t,i){try{const e=await this.pct.Wit([t]);if(Pi(i),void 0!==e)return kq(e.responseURL,{},e.data)}catch(t){yo(t)}}async akt(t,i,e,s,n){const r={Fu:t,pS:Rt.Eu,NS:this.Act,mS:Kc.GET,$w:zu.rS,i_:s,YI:n},h=await hu((()=>this.ukt(r)),s,e);return kq(h.CS,i,h.JM)}async ukt(t){const i=await this.LS.BI(t);return{JM:await i.kS(),CS:i.CS}}async KLt(t){Pi(t);const i=[];for(const e of this.Pnt.fIt)for(const s of e.pIt)i.push(this.ckt(s,t));await Promise.all(i)}async ckt(t,i){try{const e=await this.pct.Wit([t.vDt.Dnt]);Pi(i),void 0===e||t.vDt.xbt||await this.ikt(t,i)}catch(t){yo(t)}}rkt(){for(const t of this.Pnt.fIt)for(const i of t.pIt)i!==this.nkt&&void 0!==i.vDt.QEt&&(i.vDt.xbt?this.hkt(i):i.vDt.$bt())}hkt(t){if(0!==t.vDt.det.length){if(!this.nkt)return this.nkt=t,void this.nkt.vDt.sLt(0,void 0);if(this.lkt(this.nkt),!this.lkt(t)&&void 0===t.vDt.QEt){const i=this.dkt(t,this.nkt);At.cIt(oX,"Assuming global timeline offset of "+i+"s for rendition "+t.vDt.Dnt+"."),t.vDt.sLt(i,void 0)}}}dkt(t,i){if(uX(t)){const e=t.vDt.det[0],s=i.vDt.det[0];return At.cIt(oX,"Synchronizing by start of VOD: "+s.Fm+" vs "+e.Fm),s.Fm-e.qEt}const e=function(t,i){let e=t.length-1,s=i.length-1;for(;e>=0&&s>=0;){const n=t[e],r=i[s];if(n.AEt>r.AEt)e--;else if(n.AEt<r.AEt)s--;else if(n.fEt){if(r.fEt)return{segment:n,referenceSegment:r};s--}else e--}return}(t.vDt.det,i.vDt.det);if(void 0!==e){const{segment:t,referenceSegment:i}=e;return At.cIt(oX,"Synchronizing by start of discontinuity #"+i.AEt+": "+i.Fm+" vs "+t.Fm),i.Fm-t.qEt}const s=lX(t.vDt.det);if(void 0!==s){const t=lX(i.vDt.det);if(void 0!==t){At.cIt(oX,"Synchronizing by PDT:",t.gEt.toISOString()+" vs "+s.gEt.getTime());return t.Fm-s.qEt-(t.gEt.getTime()-s.gEt.getTime())/1e3}}const n=cX(i),r=cX(t);var h;const o=null!=(h=t.vDt.QEt)?h:0;return At.cIt(oX,"Synchronizing by last segment:",n+" vs "+r),n-r+o}lkt(t){const i=this.Pnt.xLt(t);if(!i)return!1;if(uX(i))return!1;const e=function(t,i){return Z_(t,(t=>void 0!==t.f8&&i.nLt(t.AEt)))}(i.vDt.det,this.Pnt.iI);if(void 0===e)return!1;if(i.vDt.Rbt===e.AEt)return!0;const s=this.Pnt.iI.lLt(e.f8,e).vp()-e.qEt;return At.cIt(oX,"Synchronize by media timestamp: "+s+"s for rendition "+t.vDt.Dnt+"."),i.vDt.sLt(s,e.AEt),(void 0===this.nkt||void 0===this.nkt.vDt.Rbt||this.nkt.vDt.Rbt<e.AEt)&&(this.nkt=i),!0}XLt(t,i){var e;(this.Pnt.VEt(t,i),KH(t)&&i)&&(this.WLt=i,this.mo(new rX(i)),null==(e=this.skt.get(i.Bw))||e.eL(),this.skt.delete(i.Bw));this.mo(new KQ)}fkt(t,i){for(const e of this.Pnt.fIt){const s=Gr(e.gIt,(t=>t.vDt===i));void 0!==s&&void 0===t.iIt&&e.zEt(s);const n=Gr(e._It,(t=>t.vDt===i));void 0!==n&&void 0===t.tIt&&e.zEt(n),void 0===s&&void 0===n||(e.Ast=iq(e.Ast,t))}}Xf(){this.Bo(),this.Pnt.Xf(),this.skt.forEach((t=>t.s_())),this.skt.clear()}constructor(t,i,e,s){super(),this.LS=t,this.pct=i,this.Act=e,this.FLt=!1,this.GLt=!1,this.nkt=void 0,this.WLt=void 0,this.skt=Ye(),this.Pnt=new eX(s)}};function uX(t){return t.vDt.mEt||t.vDt.yEt===WH.KSt}function cX(t){const i=t.vDt.det;return i[i.length-1].Ym}function lX(t){return Z_(t,(t=>void 0!==t.gEt))}function dX(t){if(void 0!==t.vDt.QSt&&!t.vDt.mEt&&!(void 0===t.vDt.kEt||fe.h_()/1e3-t.vDt.kEt>=t.vDt.QSt/2))return t.vDt.FSt?Qr.abt:Qr.obt}var fX=class{get nt(){return this.SMt}qbt(t){if(0===t.vDt.vEt.length)return;var i;this._kt||(this._kt=this.sP.SS(Pt.XM,void 0,void 0,void 0,void 0,Ks.DATE_RANGE),this.SMt.tt(this._kt));Uq(this._kt,t.vDt.vEt,(e=>null!=(i=t.vDt.jEt(e))?i:NaN))}constructor(t,i,e){this.gkt=t=>{this.wkt.hlsDateRange&&this.qbt(t.ODt)},this.wkt=t,this.Ddt=i,this.sP=e,this.SMt=new Tn,this.Ddt.ln(Yh.PLt,this.gkt)}};r();var _X=class extends gg{constructor(){super(Au.lDt)}};r(),r(),r();var uh=class{get Akt(){return this.PK}get M_(){return jY(this.EAt.M_,this.EAt.vJ)}get det(){return this.aht}get ZAt(){return this.LMt}vkt(t){var i;return null==(i=this.mkt(t))?void 0:i.ODt}Kwt(t){this.PK=t,this.pkt()}Xct(t,i,e,s,n,r){this.aht.push({ODt:t,uht:i,ykt:Ki.ZB(n,r),Mkt:Ki.ZB(e,s)}),this.pkt()}mkt(t){return Gr(this.aht,(i=>i.Mkt.ar(t)))}tgt(t){return Gr(this.aht,(i=>i.uht===t))}Rrt(t,i){return Gr(this.aht,(e=>e.ODt===t&&Jq(e.uht,i)))}_J(){const t=this.M_;t.U>0&&(this.LMt=t.bn(t.U-1))}pkt(){const t=this.EAt.M_;this.aht=this.aht.filter((i=>0!==t.yn(i.Mkt).U))}constructor(t){this.EAt=t,this.aht=[],this.PK=void 0,this.LMt=void 0}},gX=class{get $w(){return this.a0}get Tkt(){return this.a0===Tw.Gv||this.a0===Tw.Yv}get Nkt(){return this.x_t}get Dkt(){return this.Ikt}get Skt(){return void 0!==this.Ekt}bkt(){if(this.Skt)throw new b("Cannot perform new operation while BufferAppender is still busy")}CTt(t){this.EAt!==t&&(this.bkt(),this.EAt=t,this.x_t=new uh(t))}Lkt(){return this.Ekt?this.Ekt.nL:Promise.resolve()}kkt(t){var i;const e=this.x_t.ZAt,s=this.x_t.M_;if(void 0===e)return!1;const n=x.min(t,e);var r;return null!=(r=null==(i=s.SB().jB(this.Dkt).HB(n))?void 0:i.ar(e))&&r}Ckt(t){return this.x_t.vkt(t)}s_(){this.kx.s_(),this.kx=new Po}LK(t){this.bkt(),this.Ekt=new No;const i=i=>{this.Okt.xkt(t),this.jkt(i)};this.kK(t,this.kx.i_).then(i,i)}async kK(t,i){At.cIt(rr,"Appending initializer",Nt(t.zkt.Dnt)),await this.EAt.LK(t,i),At.cIt(rr,"Appended initializer",Nt(t.zkt.Dnt)),this.x_t.Kwt(t)}uAt(t){this.bkt(),this.Ekt=new No;const i=i=>{this.Okt.xkt(t),this.jkt(i)};this.Pkt(t,this.kx.i_).then(i,i)}async Pkt(t,i){const e=t.ODt;if(void 0===e.vDt.nSt)throw new b("MediaBufferWrapper - Cannot append HLSAsset to "+this.a0+" MediaBuffer for a HLSRendition with an undefined targetDuration.");const s=this.x_t.M_.yB,n=this.EAt.M_;At.cIt(rr,"Appending",Nt(t.zkt.Dnt)),await this.EAt.SK(t,i),At.cIt(rr,"Appended",Nt(t.zkt.Dnt),s,this.x_t.M_.yB);const r=t.Fm,h=r+t.ct,o=t.zkt,a=o.Fm;var u;const c=o.Fm+(null!=(u=o.ct)?u:0);this.x_t.Xct(e,o,r,h,a,c);const l=this.EAt.M_.jB(n),d=this.x_t.Rrt(e,o);if(this.$w===Tw.Yv)if(d)if(this.Bkt(d))if(0===l.U){if(void 0===this.x_t.tgt(o)){const t=this.EAt.vJ.yn(new Ki([r,h]));this.Ikt=this.Ikt.xB(t)}}else{const t=l.gn(0),i=new Ki([t,h]);if(this.Ikt=this.Ikt.jB(i),t>r){const i=this.EAt.vJ.yn(new Ki([r,t]));this.Ikt=this.Ikt.xB(i)}}else{const t=l.U>0&&l.gn(0)<r?l.gn(0):r;this.Ikt=this.Ikt.jB(new Ki([t,h]))}else if(0===l.U){const t=this.EAt.vJ.yn(new Ki([r,h]));this.Ikt=this.Ikt.xB(t)}else{var f;const t=l.gn(0),i=null==(f=n.HB(r))?void 0:f.bn(0),e=i&&i>r?i:r;if(t>e){const t=this.EAt.vJ.yn(new Ki([e,l.gn(0)]));this.Ikt=this.Ikt.xB(t)}}t.zkt.FEt&&this.x_t._J()}Bkt(t){const i=t.Mkt,e=i.gn(0),s=i.bn(i.U-1),n=i.TB(0),r=i.DB(i.U-1);return this.Ikt.PB(e,s,n,r)}constructor(t,i,e,s,n){this.Ekt=void 0,this.kx=new Po,this.Ikt=Ki.KB(),this.jkt=t=>{this.Ekt&&(t?fc(t)&&this.Tkt?this.Rkt.iW(this.EAt.M_.qB)?this.Ekt.eL():this.Ekt.sL(t):Oi(t)?this.Ekt.eL():this.Ekt.sL(t):this.Ekt.eL(),this.Ekt=void 0)},this.a0=t,this.Okt=e,this.EAt=i,this.x_t=s,this.Rkt=n}};r(),r();var wX=class{async Ukt(t,i,e,s){const n=await this.Qkt(i,s);return await this.Fkt.Ukt(t,n,e)}async Qkt(t,i){var e;if((null==(e=this.Ykt)?void 0:e.Fu)!==t){At.cIt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const e=await this.LS.BI({Fu:t,pS:Rt.$I,mS:Kc.GET,i_:i,$w:zu.aS,MS:jo.wS,NS:this.Act}),s=await e.zj(),n=new T(s);this.Ykt={Fu:t,JM:n}}return this.Ykt.JM}constructor(t,i,e){this.Fkt=t,this.LS=i,this.Act=e,this.Ykt=void 0}};r();var AX=class{async BI(t,i,e,s,n){const r=await this.Gkt(t,i,e,Rt.$I,s,n),h=await r.zj(n);return{httpStatusCode:r.FI,response:new T(h)}}async Vkt(t,i,e,s,n){return(await this.Gkt(t,i,e,Rt.iS,s,n)).SG(n)}async Gkt(t,i,e,s,n,r){let h;t.zht&&(h=XH(t.zht.gn,t.zht.U),0===h[0]&&h[1]===pu&&(h=void 0));const o=h?{Range:"bytes="+h[0]+"-"+h[1]}:void 0,a=new nc({Fu:t.zy,pS:s,vS:o,NS:this.Act,mS:Kc.GET,$w:i,MS:e,TS:this.rgt,DS:n,i_:r});try{const i=await this.pct.Kit(t.zy,h);if(Pi(r),void 0!==i)return null==n||n(i.buffer.byteLength,i.buffer.byteLength),new Hh({BI:a,JM:i.buffer})}catch(t){yo(t)}return await hu((()=>hl(this.LS.BI(a),a.i_)),r,this.Wkt)}constructor(t,i,e,s,n=2){this.LS=t,this.pct=i,this.rgt=e,this.Act=s,this.Wkt=n}};r();var vX,mX=class{Hkt(){return this.qkt.vDt.USt}async Xkt(t,i,e){if(!this.Hkt())throw new b("Could not perform blocking playlist update.");try{await this.Zkt(),Pi(e),await this.Ddt.JLt(this.qkt,t,i,e),this._n=fe.h_()}catch(t){throw Oi(t)&&this.Kkt(),t}this.Kkt()}Jkt(t){return this.Ddt.ekt(this.qkt,t)}Kkt(){if(!this.$kt&&!this.tCt){const t=()=>{this.$kt=void 0};this.$kt=this.iCt(this.eCt.i_).then(t,t)}}async Zkt(){this.$kt&&(this.eCt.s_(),this.eCt=new Po,await this.$kt.catch(xs),this.$kt=void 0)}async iCt(t){for(;;){if(this.qkt.vDt.mEt&&this.qkt.vDt.xbt)return;const i=fe.h_()-this._n,e=1e3*this.qkt.vDt.Obt;i<e&&await be(e-i,t);try{await this.Ddt.ikt(this.qkt,t)}catch(t){throw yo(t),this.Ddt.tkt(this.qkt),t}this._n=fe.h_()}}Xf(){this.tCt=!0,W(this.Zkt())}constructor(t,i){this.$kt=void 0,this.eCt=new Po,this._n=-1/0,this.tCt=!1,this.Ddt=t,this.qkt=i,this.Kkt()}};r(),function(t){t[t.JSt=0]="JSt",t[t.$St=1]="$St",t[t.hS=2]="hS",t[t.oS=3]="oS"}(vX||(vX={})),r(),r();var oa="AssetExtractor",pX=class{sCt(t,i,e){let s=i;for(const i of this.nCt){if(s>=t)return!0;if(s<i.gn)return!1;if(s<i.bn){if(e<=i.bn)return!0;s=i.bn}}return s>=t}rCt(t,i){const e=[];for(let s=0;s<this.nCt.length;s+=1){const n=this.nCt[s],r=t-n.gn,h=n.JM.length,o=x.min(h,x.max(r,0)),a=x.max(0,i+r),u=Th(n.JM,o,a);u.length&&(s=this.hCt(s,n,t,o,a),e.push(u))}return e}oCt(t,i){this.nCt.push({gn:t,bn:t+i.length,JM:i})}hCt(t,i,e,s,n){let r=t;this.nCt.splice(r,1),r-=1,i.gn<e&&(r+=1,this.nCt.splice(r,0,{gn:i.gn,bn:e,JM:Th(i.JM,0,s)}));const h=e+n-s;return h<i.bn&&(r+=1,this.nCt.splice(r,0,{gn:h,bn:i.bn,JM:Th(i.JM,n)})),r}constructor(){this.nCt=[]}},yX=class{get aCt(){return this.uCt}async cCt(){const t=await this.Md.read();if(t.done)throw this.uCt=1/0,new b("No more data can be read from the given stream.");return this.uCt+=t.value.length,t.value}async lCt(t){await this.Md.cancel(t)}constructor(t,i){this.uCt=i,this.Md=t.getReader()}},MX=class{dCt(){this.fCt.eL(),this.fCt=new No}_Ct(t){const{Pht:i,Bht:e}=NX(this.XEt.zht),s=this.gCt.rCt(i,e-i);At.cIt(oa,"Collected "+s.length+" chunks.");for(const i of s)t.enqueue(i)}async readAndSliceOutAssetBytes(t){await this.wCt.nL;const{Pht:i,Bht:e}=NX(this.XEt.zht);try{for(;;){const s=this.Md.aCt,n=await this.Md.cCt(),r=n.length;At.cIt(oa,"Read "+r+" at "+s+" for extraction of "+Nt(this.XEt));const h=x.min(s+r,i)-s;if(!(h>0)){if(s+r<=e)return At.cIt(oa,"Extracting the read data range for extraction of "+Nt(this.XEt)),t.enqueue(n),this.dCt(),W(this.readAndSliceOutAssetBytes(t));{const i=e-s,h=Th(n,0,i),o=Th(n,i);return h.length>0&&(At.cIt(oa,"Extracting "+h.length+" bytes for extraction of "+Nt(this.XEt)),t.enqueue(h)),At.cIt(oa,"Of the read "+r+" bytes, the last "+o.length+" will be stored locally for extraction of "+Nt(this.XEt)),this.gCt.oCt(s+i,o),At.cIt(oa,"Extraction of "+Nt(this.XEt)+" completed as the entire request has been fulfilled."),this.ACt(t),void(this.vCt&&(At.cIt(oa,"Aborting stream upstream as no more bytes are needed from "+Nt(this.XEt)+"."),await this.Md.lCt("AssetExtraction - AbortOnEnd")))}}{const i=Th(n,0,h),e=Th(n,h);if(At.cIt(oa,"Of the read "+r+" bytes, the first "+h+" will be stored locally for extraction of "+Nt(this.XEt)),this.gCt.oCt(s,i),e.length>0)return At.cIt(oa,"Extracting "+e.length+" bytes for extraction of "+Nt(this.XEt)),t.enqueue(e),this.dCt(),W(this.readAndSliceOutAssetBytes(t))}}}catch(i){At.cIt(oa,"Extraction of "+Nt(this.XEt)+" completed as the entire source stream has been read."),this.ACt(t)}}ACt(t){t.close(),this.dCt(),this.mCt.eL()}start(t){At.cIt(oa,"Preparing to push all collected data to controller for extraction of "+Nt(this.XEt)),this._Ct(t),At.cIt(oa,"Collected data pushed to controller for extraction of "+Nt(this.XEt));const{Bht:i}=NX(this.XEt.zht);this.Md.aCt>=i?(At.cIt(oa,"Extraction of "+Nt(this.XEt)+" completed as the entire request has been fulfilled."),this.ACt(t)):(At.cIt(oa,"Continuing read from original stream for extraction of "+Nt(this.XEt)),W(this.readAndSliceOutAssetBytes(t)))}get pCt(){return this.mCt.nL}pull(){return this.wCt.eL(),this.wCt=new No,this.fCt.nL}constructor(t,i,e,s){this.mCt=new No,this.XEt=t,this.Md=i,this.gCt=e,this.vCt=s,this.wCt=new No,this.fCt=new No}},TX=class{Am(t){if(!JH(this.XEt,t))return!1;const{Pht:i,Bht:e}=NX(t.zht);return this.gCt.sCt(this.yCt.aCt,i,e)}async tMt(t,i){void 0===i&&(i=!1);const e=this.yCt,s=this.gCt;if(At.oN(oa,"Extracting data from "+Nt(t)+" out of "+Nt(this.XEt)),this.MCt&&(At.cIt(oa,"Awaiting previous extraction before extracting "+Nt(t)+" out of "+Nt(this.XEt)),await this.MCt),!this.Am(t))throw new b("The extractor does not contain the data requested");const n=new MX(t,e,s,i);return this.MCt=n.pCt,new f(n)}constructor(t,i){this.XEt=i;const{Pht:e}=NX(this.XEt.zht);this.yCt=new yX(t,e),this.gCt=new pX}};function NX(t){if(t){const i=t.gn;return{Pht:i,Bht:void 0!==t.U?i+t.U:pu}}return{Pht:0,Bht:pu}}var DX=class{async Pn(){const t=await this.TCt.Vkt(this.XEt,zu.oS,jo.Hv,void 0,this.kx.i_);return new TX(t,this.XEt)}Am(t){return JH(this.XEt,t)}async tMt(t,i){void 0===i&&(i=!1);const e=await this.tvt;return await hl(e.tMt(t,i),this.kx.i_)}s_(){this.tvt.catch(xs),this.kx.s_()}constructor(t,i){this.XEt=t,this.TCt=i,this.kx=new Po,this.tvt=this.Pn()}};r();var IX=class extends gg{constructor(t){super(On.NCt),this.TS=t}};r();var SX=class extends gg{constructor(t,i,e,s,n,r,h){super(On.DCt),this.uri=t,this.ICt=i,this.TS=e,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.SCt=r,this.httpStatusCode=h}};function EX(t,i,e){const s=hr(e)?e:e.GEt;if(i.nLt(s.AEt)){if(void 0!==e.f8)return i.lLt(e.f8,e).vp();if(e!==s&&void 0!==s.f8){const t=i.lLt(s.f8,s).vp();return e.Fm+(t-s.Fm)}}const n=t.vDt.tgt(s.XSt-1);if(void 0!==n&&i.nLt(n.AEt)){if(n.dEt.length>0){const t=n.ibt(n.dEt.length-1);if(void 0!==t.f8){const s=i.lLt(t.f8,t).vp();return e.Fm+(s-t.Fm)}}if(void 0!==n.f8){const t=i.lLt(n.f8,n).vp();return e.Fm+(t-n.Fm)}}const r=t.vDt.tgt(s.XSt+1);if(void 0!==r&&i.nLt(r.AEt)){if(r.dEt.length>0){const t=r.ibt(0);if(void 0!==t.f8){const s=i.lLt(t.f8,t).vp();return e.Fm+(s-t.Fm)}}if(void 0!==r.f8){const t=i.lLt(r.f8,r).vp();return e.Fm+(t-r.Fm)}}return e.Fm}r();var On,bX="HlsPlaylistDownloader";!function(t){t.NCt="segmentdownloadprogress",t.DCt="segmentdownloaded"}(On||(On={}));var LX=class extends i{ECt(t){this.bCt.Xf(),this.bCt=new mX(this.Ddt,t),this.Skt?this.LCt=t:(this.qkt=t,this.kCt=0,this.CCt=void 0,this.xCt=void 0)}get Skt(){return void 0!==this.OCt}Lkt(){return this.OCt?this.OCt.nL:Promise.resolve()}jCt(){return this.Okt.jCt()}zCt(t){this.Okt.zCt(t)}s_(){var t,i,e;this.PCt.s_(),this.PCt=new Po,null==(t=this.BCt)||t.s_(),this.BCt=void 0,null==(i=this.RCt)||i.s_(),null==(e=this.UCt)||e.s_(),this.RCt=void 0,this.UCt=void 0,this.kCt=0,this.CCt=void 0,this.xCt=void 0}Xf(){this.bCt.Xf()}get ODt(){var t;return null!=(t=this.LCt)?t:this.qkt}get QCt(){if(!this.qkt.vDt.mEt||void 0===this.CCt)return!1;const t=this.qkt.vDt.tgt(this.CCt);if(!t.FEt)return!1;if(void 0!==this.xCt){if(!t.ibt(this.xCt).FEt)return!1}return!0}FCt(t){const i=this.qkt.vDt.Fbt(t);if(!i)return!1;if(void 0!==this.CCt){const e=i.XSt===this.CCt;return void 0!==this.xCt?i.ebt(t)===i.ibt(this.xCt)&&e:e}return!1}YCt(t){let i;if(void 0===this.CCt||t<this.kCt)i=this.GCt(t);else if(i=this.VCt(this.CCt,this.xCt),void 0!==i){const[e,s]=i,n=(null!=s?s:e).Fm,r=3*this.qkt.vDt.nSt;x.abs(n-t)>=r&&(i=this.GCt(t))}else if(this.qkt.vDt.mEt){if(this.qkt.vDt.tgt(this.CCt).FEt&&(i=this.GCt(t),void 0!==i&&i[0].XSt===this.CCt))return}if(i){this.kCt=t;const[e,s]=i;return 0===(null==s?void 0:s.WEt)&&void 0!==e.ct?[e,void 0]:[e,s]}}GCt(t){let i,e;const s=this.qkt.vDt.det;if(0===s.length)return;const n=this.Ddt.br.iI,r=aa.Ey(t),[h,o]=function(t,i,e){const s=t.vDt.det;if(0===s.length)return[void 0,void 0];const n=t.vDt.Ybt(e.vp());if(!i.nLt(n.AEt))return[void 0,void 0];const r=n.XSt-s[0].XSt;let h,o,a,u=0;for(let t=r;t>=0;t--){const i=s[t];if(i.AEt!==n.AEt)break;if(void 0!==i.f8){h=i,u=t;break}}if(void 0===h){for(let t=r+1;t<s.length;t++){const i=s[t];if(i.AEt!==n.AEt)break;if(void 0!==i.f8){h=i,u=t;break}}if(void 0===h)return[void 0,void 0]}if(i.lLt(h.f8,h).Tp(e)){o=h;for(let t=u+1;t<s.length;t++){const r=s[t];if(r.AEt!==n.AEt)break;if(void 0!==r.f8){if(!i.lLt(r.f8,r).Tp(e)){a=r;break}o=r}}}else{a=h;for(let t=u-1;t>=0;t--){const r=s[t];if(r.AEt!==n.AEt)break;if(void 0!==r.f8){if(i.lLt(r.f8,r).Tp(e)){o=r;break}a=r}}}return[o,a]}(this.qkt,n,r);let a;if(void 0!==h&&void 0!==o){const t=n.lLt(h.f8,h),i=n.lLt(o.f8,o),e=r.bp(t).vp()/i.bp(t).vp()*(o.Fm-h.Fm);a=h.Fm+e}else a=t;const u=s[s.length-1];return u.Ym<=a?(i=u,e=u.nbt(a)):s[0].Fm>a?(i=s[0],e=i.ibt(0)):(i=this.qkt.vDt.Fbt(a),e=null==i?void 0:i.nbt(a)),i?[i,e]:void 0}VCt(t,i){let e,s;if(e=this.qkt.vDt.tgt(t),e&&void 0!==i){if(0===e.dEt.length)return[e,void 0];s=e.ibt(i+1)}return void 0!==e&&void 0!==s||(e=this.qkt.vDt.tgt(t+1),s=null==e?void 0:e.ibt(0)),e?[e,s]:void 0}bkt(){if(this.Skt)throw new b("Cannot perform new operation while PlaylistDownloader is still busy")}WCt(t){this.bkt(),this.OCt=new No,this.HCt(t,this.PCt.i_).then(this.qCt,this.qCt)}XCt(){this.bCt.Kkt()}async HCt(t,i){if(this.qkt.vDt.mEt)return;let e=this.YCt(t);for(!e&&this.bCt.Hkt()&&void 0!==this.CCt&&(await this.bCt.Xkt(void 0===this.xCt?this.CCt+1:this.CCt,void 0!==this.xCt?this.xCt+1:void 0,i),e=this.YCt(t)),!e&&this.bCt.Hkt()&&void 0!==this.CCt&&(await this.bCt.Xkt(this.CCt+1,0,i),e=this.YCt(t));!e;){At.oN(bX,"No next segment / part available, need to update playlist before continuing."),await this.bCt.Jkt(i);const s=this.ODt.vDt.det;s[0].Fm>t&&(this.xCt=void 0,this.CCt=void 0);s[s.length-1].XSt<this.CCt&&(this.xCt=void 0,this.CCt=void 0),e=this.YCt(t)}}ZCt(){return this.Okt.KCt()}JCt(){this.bkt();try{const t=this.qkt.vDt.Gbt(Jt.JSt);t&&this.$Ct(t);const i=this.qkt.vDt.Gbt(Jt.$St);i&&this.txt(i)}catch(t){throw yo(t),this.qkt.vDt.Pbt=fe.h_(),this.Ddt.tkt(this.qkt),t}}$Ct(t){this.UCt&&!this.UCt.Am(t.Dnt)&&(this.UCt.s_(),this.UCt=void 0),this.UCt||(this.UCt=new DX(t.Dnt,this.TCt))}txt(t){this.RCt&&!this.RCt.Am(t.Dnt)&&(this.RCt.s_(),this.RCt=void 0),this.RCt||(this.RCt=new DX(t.Dnt,this.TCt))}$_t(t,i,e){this.bkt(),At.oN(bX,"Starting download of segment "+Nt(t.Dnt)+" and part "+(null==i?void 0:i.WEt)),this.OCt=new No,this.ixt(t,i,e,this.PCt.i_).catch((t=>{throw yo(t),this.qkt.vDt.Pbt=fe.h_(),this.Ddt.tkt(this.qkt),t})).then(this.qCt,this.qCt)}async ixt(t,i,e,s){let n;if(t._Et){var r,h;if(!e||!$H(e.zkt.Dnt,null==(r=t._Et)?void 0:r.Dnt)||t.AEt!==e.AEt){var o;null==(o=this.BCt)||o.s_(),this.BCt=new No;const i=this.ext(t._Et,t,s).then((()=>{this.BCt=void 0}));this.BCt.n_(i)}n=null==(h=this.BCt)?void 0:h.nL}await this.sxt(t,i,n,s)}async ext(t,i,e){const s=await this.nxt(t,i,e),n=s._Et.JM.JM.byteLength;this.Okt.rxt(s),this.mo(new SX(s._Et.zkt.Dnt,s.$w,this.a0,i.XSt,s.ODt.Bw,n,s._Et.Jgt)),At.cIt(rr,"Download initializer complete",Nt(t.Dnt))}async sxt(t,i,e,s){const n=await this.hxt(t,i,s),r=n.uht.JM.JM.byteLength;var h;e&&await hl(e,s),this.Okt.rxt(n),this.mo(new SX(n.uht.zkt.Dnt,n.$w,this.a0,t.XSt,n.ODt.Bw,r,n.uht.Jgt)),At.cIt(rr,"Download complete",Nt(null!=(h=null==i?void 0:i.Dnt)?h:t.Dnt))}async hxt(t,i,e){let s;if(i){if(this.RCt)if(this.RCt.Am(i.Dnt)){const t=await this.RCt.tMt(i.Dnt),n=await oi(t,e),r=new T(n);s=CX(i,await this.Ukt(r,i.uEt,e),200)}else this.RCt.s_(),this.RCt=void 0;s||(At.cIt(rr,"Start download",Nt(i.Dnt)),s=await this.oxt(i,e))}else At.cIt(rr,"Start download",Nt(t.Dnt)),s=await this.egt(t,e);return this.CCt=t.XSt,this.xCt=null==i?void 0:i.WEt,{$w:"uht",uht:s,ODt:this.qkt,AEt:t.AEt}}async nxt(t,i,e){let s;if(this.UCt){var n;if(this.UCt.Am(t.Dnt)){const n=await hl(this.UCt.tMt(t.Dnt),e),r=await oi(n,e),h=new T(r);s=kX(t,i,await this.Ukt(h,t.lEt?[t.lEt]:[],e),200)}At.oN(bX,"MAP is required for segment, downloading MAP data."),null==(n=this.UCt)||n.s_(),this.UCt=void 0}return s||(At.cIt(rr,"Start download",Nt(t.Dnt)),s=await this.axt(t,i,e)),{$w:"_Et",_Et:s,ODt:this.qkt,Fm:i.Fm,AEt:i.AEt,uEt:i.uEt}}async axt(t,i,e){const{response:s,httpStatusCode:n}=await this.TCt.BI(t.Dnt,zu.hS,jo.uS,void 0,e),r=t.lEt?[t.lEt]:[];return kX(t,i,await this.Ukt(s,r,e),n)}async egt(t,i){if(!t.Dnt)throw new b("Internal error: attempted to download an incomplete segment");let e,s;try{this.uxt(t);const n=await this.TCt.BI(t.Dnt,zu.hS,jo.Hv,this.cxt,i);e=n.response,s=n.httpStatusCode}finally{this.lxt()}return function(t,i,e){return{JM:{JM:i,$w:Ho.MH},$w:vX.hS,Jgt:e,zkt:t,AEt:t.AEt}}(t,await this.Ukt(e,t.uEt,i),s)}async oxt(t,i){let e,s;try{this.uxt(t);const n=await this.TCt.BI(t.Dnt,zu.hS,jo.Hv,this.cxt,i);e=n.response,s=n.httpStatusCode}finally{this.lxt()}return CX(t,await this.Ukt(e,t.uEt,i),s)}async Ukt(t,i,e){const s=Gr(i,(t=>t.mS===xu.jSt));return s?s.Dnt&&s.zSt?await this.dxt.Ukt(t,s.Dnt,s.zSt,e):(At.lt(bX,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}uxt(t){var i,e,s;this.fxt=t,this._xt=0,this.gxt=0,this.wxt=null!=(s=null==(i=t.Dnt)||null==(e=i.zht)?void 0:e.U)?s:0}lxt(){this.fxt=void 0,this._xt=0,this.gxt=0,this.wxt=0}Axt(){if(void 0!==this.fxt)return{uht:this.fxt,vxt:this.gxt,mxt:this.wxt}}pxt(t){return void 0!==this.fxt&&(0!==this._xt&&(0!==this.wxt&&(!(this.gxt>=this.wxt)&&!(t-this._xt<500))))}constructor(t,i,e,s,n,r,h,o){super(),this.LCt=void 0,this.OCt=void 0,this.fxt=void 0,this._xt=0,this.gxt=0,this.wxt=0,this.PCt=new Po,this.BCt=void 0,this.kCt=0,this.CCt=void 0,this.xCt=void 0,this.UCt=void 0,this.RCt=void 0,this.qCt=t=>{this.LCt&&(this.qkt=this.LCt,this.LCt=void 0,this.kCt=0,this.CCt=void 0,this.xCt=void 0),this.OCt&&(t&&!Oi(t)?this.OCt.sL(t):this.OCt.eL(),this.OCt=void 0)},this.cxt=(t,i)=>{this.gxt=t,t>0&&0===this._xt&&(this._xt=fe.h_()),void 0!==i&&(this.wxt=i),this.mo(new IX(this.a0))},this.a0=t,this.Ddt=e,this.Okt=s,this.qkt=i,this.bCt=new mX(e,i),this.dxt=new wX(h,n,o),this.TCt=new AX(n,r,function(t){switch(t){case Eo.Yv:return yn.Yv;case Eo.Gv:return yn.Gv;case Eo.HM:case Eo.DSt:return yn.Eu;default:return yn.Hv}}(i.$w),o)}};function kX(t,i,e,s){return{JM:{JM:e,$w:Ho.MH},$w:vX.JSt,Jgt:s,zkt:t,AEt:i.AEt}}function CX(t,i,e){return{JM:{JM:i,$w:Ho.MH},Jgt:e,$w:vX.$St,zkt:t,AEt:t.GEt.AEt}}r();var xX=class{get Akt(){return this.yxt}get Mxt(){const t=[];for(const e of this.Txt)if("uht"===e.$w){const s=e.uht.zkt,n=EX(e.ODt,this.DLt,s);var i;t.push({uht:s,ODt:e.ODt,Fm:n,Ym:n+(null!=(i=s.ct)?i:0)})}return t}get Nxt(){const t=[];return this.Dxt.forEach((i=>{for(const e of i.Ixt)"uht"===e.$w&&t.push({uht:e.zkt,ODt:e.ODt,Fm:e.Fm,Ym:e.Fm+e.ct})})),t}rxt(t){"_Et"===t.$w&&(this.yxt=t._Et),this.Txt.push(t),this.Sxt&&(this.Sxt.eL(),this.Sxt=void 0)}jCt(){return this.Txt[0]}zCt(t){Et(this.Txt,t)}KCt(){return null!=this.Sxt||(this.Sxt=new No),this.Sxt.nL}Ext(t){this.bxt(t.eut).Ext(t)}Lxt(t){return this.bxt(t).Lxt()}xkt(t){this.bxt(t.eut).xkt(t)}kxt(t){var i;null==(i=this.Dxt.get(t))||i.Xf()}Cxt(t){return this.bxt(t).Cxt()}bxt(t){if(this.Dxt.has(t))return this.Dxt.get(t);{const i=new OX;return this.Dxt.set(t,i),i}}iL(){this.xxt(),this.Oxt()}xxt(){this.yxt=void 0,Ri(this.Txt)}Oxt(){this.Dxt.forEach((t=>t.iL()))}Xf(){this.Dxt.forEach((t=>t.Xf())),this.Dxt.clear(),this.iL(),this.Sxt&&(this.Sxt.s_(),this.Sxt=void 0)}constructor(t){this.Txt=[],this.Dxt=Qt(),this.Sxt=void 0,this.yxt=void 0,this.DLt=t}},OX=class{get Ixt(){return this.jxt}Ext(t){this.jxt.push(t),this.zxt&&(this.zxt.eL(),this.zxt=void 0)}Lxt(){return this.jxt[0]}xkt(t){Et(this.jxt,t)}Cxt(){return null!=this.zxt||(this.zxt=new No),this.zxt.nL}iL(){Ri(this.jxt)}Xf(){this.iL(),this.zxt&&(this.zxt.s_(),this.zxt=void 0)}constructor(){this.jxt=[],this.zxt=void 0}};r();var jX=1e-6,zX=class{get M_(){return this.iNt}get vJ(){return this.eNt}async LK(t,i){const e=t.JM.JM;if(this.Pxt(e),this.Bxt.$w===Ks.TTML){this.DLt.nLt(t.AEt)||await hl(this.DLt.hLt(t.AEt),i);const s=this.Rxt(e,t.AEt);for(const t of s)this.Bxt.xS(t)}}async SK(t,i){if(void 0===t.JM)return;const e=t.Fm,s=e+t.ct;this.iNt=this.iNt.xB(Ki.ZB(e,s)).CB(jX),this.yJ(t.Uxt,t.Qxt),this.MJ(e,s),this.DLt.nLt(t.AEt)||await hl(this.DLt.hLt(t.AEt),i),this.bK(t.JM.JM,t.AEt,t.zkt)}bK(t,i,e){let s;this.Pxt(t),s=this.Bxt.$w===Ks.WEBVTT?this.Fxt(t,e):this.Rxt(t,i);for(const t of s)this.Bxt.xS(t)}Fxt(t,i){const e=Gv(t),s=e.L;var n;const r=null!=(n=e.$y)?n:{tM:aa.zp,eh:aa.zp};for(const t of s){const e=aa.Ey(t.Fm).bp(r.eh).gm(r.tM),s=this.DLt.lLt(e,i).vp(),n=s+(t.Ym-t.Fm);t.ap(s,n)}return s}Rxt(t,i){const e=this.DLt.cLt(i).vp();return jm(t,this.Bxt,{qy:0,Xy:1/0,Zy:e},wo.APPLICATION_MP4)}Pxt(t){this.Bxt.$w===Ks.DEFAULT&&(this.Bxt.$w=this.Yxt(t)?Ks.WEBVTT:Ks.TTML)}Yxt(t){return im($A(We(Ao(t),0,x.min(t.byteLength,16)),new Vr))}yJ(t,i){this.eNt=this.eNt.xB(Ki.ZB(t,i)).CB(jX)}MJ(t,i){this.eNt=this.eNt.jB(Ki.ZB(t,i))}constructor(t,i){this.iNt=Ki.KB(),this.eNt=Ki.KB(),this.Bxt=t,this.DLt=i}};r(),r(),r();var PX=class extends gg{constructor(t,i){super(Hu.Gxt),this.ODt=t,this.Ast=i}};r();var BX=class extends gg{constructor(t){super(Hu.Vxt),this.ODt=t}};r();var RX=class extends gg{constructor(t,i){super(Hu.Wxt),this.ODt=t,this.yst=i}};r();var Hu,UX=class extends gg{constructor(t,i){super(Hu.Hxt),this.ODt=t,this.qxt=i}};!function(t){t.Gxt="Xxt",t.Wxt="Zxt",t.Hxt="Kxt",t.Vxt="Jxt"}(Hu||(Hu={}));var QX=class extends i{get $xt(){return this.tOt}iOt(t){for(const i of this.tOt)na(t,i)||this.Okt.kxt(i);this.tOt=t}get Skt(){return void 0!==this.eOt}Lkt(){var t,i;return null!=(i=null==(t=this.eOt)?void 0:t.nL)?i:Promise.resolve()}bkt(){if(this.Skt)throw new b("Cannot perform new operation while transmuxer is still busy")}sOt(t,i){}nOt(t){this.bkt(),this.eOt=new No;const i=i=>{this.rOt(t,i)};this.hOt(t,this.kx.i_).then(i,i)}oOt(t){this.bkt(),this.eOt=new No;const i=i=>{this.rOt(t,i)};this.aOt(t,this.kx.i_).then(i,i)}rOt(t,i){this.eOt&&(!i||Oi(i)?(i||this.Okt.zCt(t),this.eOt.eL(),this.eOt=void 0):this.eOt.sL(i))}uOt(t,i){this.mo(new PX(t,i))}cOt(t,i){this.mo(new RX(t,i))}lOt(t,i,e){Kq(i)&&this.mo(new UX(t,e))}dOt(t){this.mo(new BX(t))}Ext(t){na(this.tOt,t.eut)&&this.Okt.Ext(t)}fOt(t){return this.Okt.Lxt(t)}xkt(t){this.Okt.xkt(t)}_Ot(t){return this.Okt.Cxt(t)}s_(){this.kx.s_(),this.kx=new Po}constructor(t,i,e){super(),this.eOt=void 0,this.kx=new Po,this.Okt=t,this.DLt=i,this.tOt=e}};function ec(t,i){return Kq(t)?0:x.min(t.Fm,i)}function FX(t,i){var e;return x.max(t.Fm,i)+(null!=(e=t.ct)?e:0)}var YX=class extends QX{hOt(t,i){Pi(i);const e={$w:"gOt",JM:t._Et.JM,eut:this.$xt[0],AEt:t.AEt,wOt:{Ast:"",uEt:t.uEt},Fm:t.Fm,ODt:t.ODt,zkt:t._Et.zkt};return this.Ext(e),Promise.resolve()}async aOt(t,i){Pi(i);const e=t.uht.zkt;let s;void 0!==e.f8?(this.DLt.nLt(t.AEt)||await hl(this.DLt.hLt(t.AEt),i),s=this.DLt.lLt(e.f8,e).vp()):s=e.Fm;const n=ec(e,s),r=FX(e,n);var h;const o={$w:"uht",JM:t.uht.JM,eut:this.$xt[0],Uxt:n,Qxt:r,Fm:s,ct:null!=(h=e.ct)?h:0,Zy:0,AEt:t.AEt,ODt:t.ODt,zkt:t.uht.zkt};this.Ext(o)}constructor(t,i,e){super(t,i,[e])}};function GX(t,i){let e=Ki.KB();for(const s of t){let n=s.Fm;if(s.ODt.vDt.mEt&&Kq(s.uht))n=0;else{const e=t=>s.ODt===t.ODt&&Jq(t.uht,s.uht),r=Gr(t,e);if(void 0!==r)n=x.min(n,r.Ym);else{const t=Gr(i,e);void 0!==t&&(n=x.min(n,t.Mkt.bn(0)))}}e=e.xB(Ki.ZB(n,s.Ym))}return e}r();var VX=.001,WX=class{get AOt(){return this.vOt}get mOt(){return this.pOt}get yOt(){return this.MOt}get TOt(){return this.Okt}get ODt(){return this.pOt.ODt}ECt(t){this.pOt.ECt(t)}NOt(t){const i=t.slice();for(let t=this.vOt.length-1;t>=0;t--){const e=this.vOt[t];if(!e.Tkt)throw new b("Invalid state");const s=Da(i,(t=>t.$w===e.$w));s>=0?(e.CTt(i[s]),jc(i,s)):jc(this.vOt,t)}for(const t of i){const i=new uh(t);this.vOt.push(new gX(t.$w,t,this.Okt,i,this))}i.length>0&&this.Okt.iL();const e=t.map((t=>t.$w));this.MOt.iOt(e)}iW(t){var i;const e=(null==(i=this.oR)?void 0:i.iW(t))||!1;return e&&(this.s_(),this.TOt.iL()),e}DOt(t){for(const t of this.vOt)if(t.$w!==Tw.Eu||t.Skt)throw new b("Invalid state");const i=new uh(t),e=new gX(Tw.Eu,t,this.Okt,i,this);this.vOt=[e]}get Akt(){const t=this.Okt.Akt;if(t)return t;if(this.vOt.length>0){const t=this.vOt[0].Nkt.Akt;if(t&&this.vOt.every((i=>i.Nkt.Akt===t)))return t}}K_t(){for(const t of this.vOt)t.Nkt.pkt()}get IOt(){if(0===this.vOt.length)return Ki.KB();const t=GX(this.Okt.Mxt.concat(this.Okt.Nxt),Nh(this.vOt,(t=>t.Nkt.det))).SB();let i=new Ki([0,1/0]);for(const t of this.vOt)i=i.yn(t.Nkt.M_);for(const t of this.vOt)i=i.jB(t.Dkt);return i=i.xB(t),i}get SOt(){if(0===this.vOt.length)return Ki.KB();const t=GX(this.Okt.Nxt,Nh(this.vOt,(t=>t.Nkt.det))).SB();let i=new Ki([0,1/0]);for(const t of this.vOt)i=i.yn(t.Nkt.M_);return i=i.xB(t),i}rAt(t){const i=this.IOt.HB(t,VX);return i?i.bn(i.U-1):t}FCt(t){return!!this.IOt.HB(t,VX)||this.pOt.FCt(t)}EOt(t){return this.SOt.ar(t,VX)}bOt(t,i,e){for(const t of this.vOt){const e=t.Nkt,s=e.ZAt;if(void 0!==s&&i>=s&&!e.M_.SB().ar(s))return!0}return i-t<e}s_(){this.LOt(),this.kOt()}LOt(){this.mOt.s_()}kOt(){this.yOt.s_(),this.AOt.forEach((t=>t.s_()))}Xf(){this.s_(),this.mOt.Xf()}constructor(t,i,e,s){this.pOt=t,this.Okt=i,this.MOt=e,this.oR=s,this.vOt=[]}};r();var HX=class extends gg{constructor(){super(Au._Dt)}};r();var qX=class extends gg{constructor(){super(Au.dDt)}};r(),r();var XX="LazyMediaBuffer",ZX=class extends i{get gP(){return this.wx}get wJ(){return this.a0}get vd(){if(!this.EAt)throw new ce(le.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.EAt.vd}get RV(){return this.XV}set RV(t){this.XV=t,this.EAt&&(this.EAt.RV=t)}GH(){return this.EAt?this.EAt.GH():this.COt}get M_(){return this.EAt?this.EAt.M_:Ki.KB()}get vJ(){return this.EAt?this.EAt.vJ:this.mJ.KH}get GV(){return this.JV}set GV(t){this.JV=t,this.EAt&&(this.EAt.GV=t)}yJ(t,i){At.cIt(XX,"Marking gap from "+t+" to "+i+"."),this.mJ.$H(t,i),this.EAt&&this.EAt.yJ(t,i)}MJ(t,i){At.cIt(XX,"Removing gap from "+t+" to "+i+"."),this.mJ.tq(t,i),this.EAt&&this.EAt.MJ(t,i)}xOt(t){this.EAt=t,this.EAt.GV=this.JV,this.EAt.RV=this.XV;const i=this.mJ.KH;for(let t=0;t<i.U;t++)this.EAt.yJ(i.gn(t),i.bn(t));var e;this.COt&&(At.cIt(XX,"End of stream"),null==(e=this.EAt)||e._J());this.EAt.ln(ii.pH,this.Ds),this.OOt.eL(t)}jOt(t){return hl(this.OOt.nL,t)}async SK(t,i,e){const s=await this.jOt(e);await s.SK(t,i,e)}async TJ(){const t=await this.jOt();await t.TJ()}async LK(t,i,e){const s=await this.jOt(e);await s.LK(t,i,e)}async wm(t,i,e){const s=await this.jOt(e);await s.wm(t,i,e)}async VK(t,i){const e=await this.jOt();await e.VK(t,i)}_J(){this.COt=!0,this.EAt&&this.EAt._J()}SH(t){return!!this.EAt&&this.EAt.SH(t)}async bH(t){const i=await this.jOt();await i.bH(t)}async cn(){var t;this.Bo(),null==(t=this.EAt)||t.rn(ii.pH,this.Ds)}constructor(t,i){super(),this.a0=t,this.zOt=i,this.wx=void 0,this.EAt=void 0,this.OOt=new No,this.XV=20,this.COt=!1,this.JV=30,this.mJ=new TL}},KX="LazyMediaSource",JX=class{get vd(){return{$w:Pe.iO,v$:[],wP:[]}}get rt(){throw new b("Not implemented")}get r$(){return this.POt}get h$(){return this.BOt}get M_(){return this.cP?this.cP.M_:Ki.KB()}get ct(){return this.cP?this.cP.ct:this.JL}get GH(){return!!this.cP&&this.cP.GH}get fg(){return this.cP?this.cP.fg:new Ki([0,1/0])}f$(t){this.JL=t,this.cP&&this.cP.f$(t)}_J(){this.c8=!0,this.cP&&this.cP._J()}nJ(){this.c8=!1,this.cP&&this.cP.nJ()}A$(t,i,e,s){this.ROt=t,this.UOt=i,this.QOt=Boolean(e),this.FOt=Boolean(s),this.cP&&this.cP.A$(t,i,e,s)}SH(t){return!this.cP||this.cP.SH(t)}async bH(t){if(!this.SH(t))throw new b("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.cP)await this.cP.bH(t);else{var i,e;this.sP.o3();const s=await this.sP.Pn(t);j(this.JL)||s.f$(this.JL),this.c8&&s._J(),s.A$(this.ROt,this.UOt,this.QOt,this.FOt),At.cIt(KX,"The MediaSource has been loaded."),this.YOt=!0,this.cP=s,null==(i=this.POt)||i.xOt(this.cP.r$),null==(e=this.BOt)||e.xOt(this.cP.h$),this.GOt.eL(s),this.sP.a3()}}async Xf(){this.cP&&await this.cP.Xf()}constructor(t,i,e){this.sP=t,this.POt=void 0,this.BOt=void 0,this.GOt=new No,this.cP=void 0,this.YOt=!1,this.JL=NaN,this.c8=!1,this.ROt=0,this.UOt=1/0,this.QOt=!1,this.FOt=!1,i&&(At.cIt(KX,"Created lazy media buffer for audio."),this.POt=new ZX(Tw.Gv,this)),e&&(At.cIt(KX,"Created lazy media buffer for video."),this.BOt=new ZX(Tw.Yv,this))}};function $X(t,i){return void 0===i&&(i=!1),function(e,s){void 0===s&&(s="*");let n=iZ(e,"tag");const r=iZ(null==s?"*":s,"range"),h=[];let o,a,u,c=-1;for(;++c<r.length;)if(o=r[c].toLowerCase(),i||"*"!==o){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),o)){if(!i)return n[a];h.push(n[a])}else u.push(n[a]);n=u}return i?h:void 0}}r();$X(((t,i)=>"*"===i||t===i||Va(t,i+"-")),!0),$X(((t,i)=>{const e=t.split("-"),s=i.split("-");let n=0,r=0;if("*"!==s[r]&&e[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!e[n])return!1;if(e[n]!==s[r]){if(1===e[n].length)return!1;n++}else n++,r++}else r++;return!0}),!0);var tZ=$X(((t,i)=>{let e,s=i;for(;;){if("*"===s||t===s)return!0;if(e=s.lastIndexOf("-"),e<0)return!1;"-"===s.charAt(e-2)&&(e-=2),s=s.slice(0,e)}}));function iZ(t,i){const e=t&&"string"==typeof t?[t]:t;if(!e||"object"!=typeof e||!("length"in e))throw new b("Invalid "+i+" `"+e+"`, expected non-empty string");return e}r(),r();var eZ,sZ=16384,nZ=71,rZ=188,hZ=2,oZ=3;function aZ(t){return uZ(t)?1:function(t){return function(t){if(t.length<hZ*rZ)return-1;const i=t.length<oZ*rZ?hZ:oZ,e=x.min(1e3,t.length-i*rZ);for(let s=0;s<=e;s++){let e=!0;for(let n=0;n<i;n++)if(t[s+n*rZ]!==nZ){e=!1;break}if(e)return s}return-1}(t)>=0}(t)?2:function(t){return null!==XC(Ao(t),new Vr)}(t)?3:0}function uZ(t){const i=iv(t,0,x.min(t.length,sZ));return ds.bT(Ao(i))}!function(t){t[t.Hv=0]="Hv",t[t.Ev=1]="Ev",t[t.VOt=2]="VOt",t[t.WOt=3]="WOt"}(eZ||(eZ={}));var cZ=class{get $w(){return this.a0}get M_(){return this.EAt.M_}get vJ(){return this.EAt.vJ}HOt(t){return this.EAt===t}async LK(t,i){await this.EAt.LK(t.JM,{sK:t.ODt.Bw},i),void 0!==this.qOt&&this.a0===Tw.Yv&&uZ(t.JM.JM)&&this.qOt.Cft(t.JM.JM)}async SK(t,i){Pi(i),At.oN("HlsMediaBuffer","Got media data, appending to "+this.a0+" MediaBuffer: "+Nt(t.zkt.Dnt));const e=t.Uxt,s=t.Qxt,n={f8:t.Fm,ct:t.ct,Zy:t.Zy,sK:t.ODt.Bw};void 0!==t.JM&&(await this.EAt.SK(t.JM,n,i),this.XOt(t.JM,t)),this.ZOt(e,s)}XOt(t,i){var e;if(!uZ(t.JM))return;const s=i.Fm,n=s+i.ct,r=i.Zy;if(null==(e=this.gft)||e.Xct(t.JM,s,r),void 0!==this.qOt&&this.a0===Tw.Yv){const e=i.zkt.FEt;this.qOt.Xct(t.JM,s,n,r,i.ODt,e)}const h=[];void 0!==this.gft&&h.push(this.gft),void 0!==this.qOt&&h.push(this.qOt),dp(this.M_,h)}ZOt(t,i){const e=this.EAt.M_,s=new Ki([t,i]).jB(e);for(let t=0;t<s.U;t++)this.EAt.yJ(s.gn(t),s.bn(t));for(let t=0;t<e.U;t++)this.EAt.MJ(e.gn(t),e.bn(t))}yJ(t,i){this.EAt.yJ(t,i)}MJ(t,i){this.EAt.MJ(t,i)}constructor(t,i,e,s){this.a0=t,this.EAt=i,this.gft=e,this.qOt=s}};r();function lZ(t){if(t.$w!==Eo.DSt||void 0===t.TDt)return;const i=t.TDt.match(/^CC([1-4])$/);if(i)return Number(i[1]);const e=t.TDt.match(/^SERVICE([\d+])$/);return e?Number(e[1]):void 0}r(),r(),r();var dZ=class{hSt(t){var i,e,s;return null==(s=null==(i=this.cP)||null==(e=i.h$)?void 0:e.SH(t))||s}oSt(t){var i,e,s;return null==(s=null==(i=this.cP)||null==(e=i.r$)?void 0:e.SH(t))||s}constructor(t){this.cP=t}},ki="LLHLSPlayer",fZ=[qo.hv,qo.ov,qo.uv,qo._w],_Z=[t.RA,t.vA,t.SA,t.DA],gZ=2e3,wZ=class extends i{KOt(){if(void 0===this.JOt)return!1;const t=fe.h_();if(!this.JOt.mOt.pxt(t))return!1;const i=this.JOt.mOt.Axt();if(void 0===i||void 0===i.uht.ct)return!1;const e=this.E_,s=this.Z_,n=this.JOt.IOt.HB(e);if((void 0!==n?n.bn(0)-e:0)>=2*i.uht.ct*s)return!1;return 8*i.mxt/this.oR.bV.zz>=1.8*i.uht.ct}async $Ot(){var t;const i=await this.cSt();if(void 0===i)return;const e=null==(t=this.JOt)?void 0:t.mOt.Axt();if(void 0===e)return;const s=this.tjt;if(x.max(0,e.mxt-e.vxt)<=e.mxt*(i.zz/s.zz))return;const n=i.zz<s.zz;await this.UDt(i,{QDt:n})}ijt(t){return Oo(t,(t=>t.zz))}async ejt(){let t=await this.sjt();if(0===t.length)return;const i=await this.njt(t);i.length>0&&(t=i);const e=this.ijt(t);void 0!==e&&(await this.UDt(e,{QDt:!0}),this._P.eSt(e.zz))}get rjt(){const t=[this.hjt,this.ojt].filter(z_);for(const i of t){if(!i.vDt.mEt)return!1;const t=i.vDt.det,e=t[t.length-1];if(e&&e.AEt!==this.ajt)return!1}return!0}get jDt(){return this.tjt}get XDt(){return this.hjt}get KDt(){return this.ojt}get ujt(){return this.cjt}get ht(){return this.qv}get M_(){return this.sP.M_.ks()}get BDt(){const t=[];if(this.tjt){const i=this.sP.E_;for(const e of this.ljt)for(const s of e.AOt){const e=s.Ckt(i);e&&!na(t,e)&&t.push(e)}}return t}get N_(){if(this.tjt){const t=this.sP.E_;return this.tjt.OEt(t)}}set N_(t){if(!t||!this.tjt)return;const i=this.tjt.jEt(t);void 0!==i&&this.Em(i,!1,!0)}get E_(){var t;return null!=(t=this.djt)?t:this.sP.E_}set E_(t){this.Em(t,t===1/0,!0)}Em(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),At.oN(ki,"Seeking to "+t+" s."),this.djt=t,this.fjt=i,this._jt=!0,this.ydt=!0,this.mo(new ja(t)),this.K4.s_(),this.gjt&&(fe.o_(this.wjt),e?this.wjt=fe.a_((()=>this.Ajt(t,i)),50):this.Ajt(t,i))}Ajt(t,i){fe.o_(this.wjt);const e=[this.tvt,this.vjt,this.J4].filter(z_);this.K4=new Po,this.J4=this.t2(e,t,i,this.K4.i_).catch(this.mjt)}get ct(){var t,i,e,s,n,r,h;if(!this.rjt)return null!=(h=null!=(r=null!=(n=null==(t=this.hjt)?void 0:t.vDt.ct)?n:null==(i=this.ojt)?void 0:i.vDt.ct)?r:null==(e=this.Ddt)||null==(s=e.VLt)?void 0:s.vDt.ct)?h:1/0;const o=this.sP.ct;if(j(o)){var a,u,c;const t=null!=(c=null==(a=this.pjt)?void 0:a.vDt.ct)?c:null==(u=this.yjt)?void 0:u.vDt.ct;if(void 0!==t)return t}return o}get C_(){if(!this.rjt)return!1;if(this.gg&&this.gjt){var t,i;const e=this.E_,s=null==(t=this.hjt)?void 0:t.vDt.ct,n=null==(i=this.ojt)?void 0:i.vDt.ct;return!(void 0!==s&&e<s)&&!(void 0!==n&&e<n)}return this.sP.C_}get lt(){return this.hP}get j_(){return this.oP}get P_(){}get R_(){return!1}get Q_(){return oe({},{Jv:0,$v:0,tm:0,im:0,nm:0,hm:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.sP.F_(),{nm:this.Glt,im:this.oR.bV.zz})}get br(){var t;return null==(t=this.Ddt)?void 0:t.br}get Y_(){return this.sP.Y_}set Y_(t){this.sP.Y_=t}get W_(){return this.uat}set W_(t){this.uat!==t&&(this.uat=t,this.mo(t?new $F:new tY))}get q_(){return this.sP.q_}get Z_(){return this.sP.Z_}set Z_(t){At.oN(ki,"Setting playback rate to "+t+"."),this.sP.Z_=t}get eg(){return this.Xlt.ks()}get Xlt(){return this.sP.eg}get hg(){return this.uP}set hg(t){this.uP!==t&&(this.uP=t,this.Mjt())}get cg(){let t=this.sP.cg;return this.Jlt&&(t=x.max(ow.Vn,t)),t}get fg(){return this.Qlt.ks()}get Qlt(){let t=this.w$;const i=[this.hjt,this.ojt].filter(z_);if(t.U>0&&i.some((t=>!t.vDt.mEt))){const e=this.Xlt,s=t.bn(t.U-1);if(e.U>0&&e.bn(e.U-1)>s){let n=e.bn(e.U-1);const r=function(t){return t.reduce(((t,i)=>t.yn(i.vDt.ybt)),new Ki([0,1/0]))}(i);r.U>0&&(n=x.min(n,r.bn(r.U-1))),t=t.xB(new Ki([s,n]))}}return t}Xbt(){let t=function(t){if(0===t.length)return Ki.KB();let i=new Ki([0,1/0]),e=0;for(const s of t){const t=s.vDt.fg;t.U>0&&(i=i.yn(t),e=x.max(e,t.gn(0)))}if(i.U>0)return i;return Ki.XB(e)}([this.hjt,this.ojt].filter(z_));0!==t.U&&(this.cP&&this.rjt&&this.cP.ct!==1/0&&(t=new Ki([t.gn(0),this.cP.ct])),this.w$=t,this.Tjt&&this.gft.VI(t.gn(0)),this.Njt&&this.qOt.VI(t.gn(0)))}get gg(){var t;return null!=(t=this._jt)?t:this.sP.gg}get lP(){}get nt(){return this.Al}get rt(){return this.Zv}get vg(){var t,i;return this.sP.vg||(null==(t=this.tjt)||null==(i=t.nIt)?void 0:i.Ti)||0}get Mg(){var t,i;return this.sP.Mg||(null==(t=this.tjt)||null==(i=t.nIt)?void 0:i.ji)||0}get Ng(){return this.sP.Ng}set Ng(t){At.oN(ki,"Setting volume to "+t+"."),this.sP.Ng=t}get Sg(){return this.dP}get Lg(){return!1}set Lg(t){}get fP(){return this._P}Ug(){return!1}Cg(){return this.sP.la}be(){At.oN(ki,"Hiding the player."),this.sP.be()}Pg(){At.oN(ki,"Pausing the player."),this.sP.Pg()}async Bg(){const t=this.sP.Bg();if(this.C_){const t=this.Qlt;t.U>0&&this.Em(t.gn(0))}this.gjt||await this.Pn(),this.rlt(),await t}rlt(){var t;if(!this.Ult())if(null==(t=this.jDt)?void 0:t.vDt.mEt){var i;let t=!0,e=0;const s=null==(i=this.tjt)?void 0:i.vDt.gn;if(!this.ydt&&s&&(t=!s.oEt,e=s.hEt,e<0)){const t=this.jDt.vDt.ybt;e+=t.bn(t.U-1)}this.Ajt(e,t)}else this.Ajt(1/0,!0);this.Djt()&&this.Ajt(1/0,!0)}Ult(){var t;const i=this.Qlt;if(0===i.U)return!0;const e=null==(t=this.Ijt)?void 0:t.zB(this.E_);return(e&&e>0?this.Ijt.bn(e):this.E_)>=i.gn(0)}get Ijt(){var t,i;const e=null==(t=this.Sjt)?void 0:t.IOt,s=null==(i=this.JOt)?void 0:i.IOt;return e?s?s.yn(e):e:s}Djt(){return TZ(this.E_,this.hjt)||TZ(this.E_,this.ojt)}hft(){this.hP=void 0,this.oP=void 0}qP(t){this.hP||(W(this.Wn()),this.hP=Qh(t),this.oP=t,this.mo(new me(t)))}ge(){At.oN(ki,"Showing the player."),this.sP.ge()}Qg(){throw new b("Not implemented")}Fg(){throw new b("Not implemented")}Yg(){}Gg(){this.gjt&&W(this.Ejt(this.hjt,this.ojt,this.cjt,{Gg:!0}))}async ca(i,e,s){At.oN(ki,"Setting the player source to "+i.src+"."),this.hft(),this.wkt&&!ml(this.wkt)&&(await this.Wn(),Pi(s)),i.src&&!ml(i)&&(this.pP.Rz(i.contentProtection),this.wkt=i,this.Njt=!na(i.ignoreEmbeddedTextTrackTypes,Ks.CEA608),this.Tjt=!na(i.ignoreEmbeddedTextTrackTypes,Ks.EMSG),this.ln(Au.wDt,this.handleBufferingErrorEvent),this.Ddt=new aX(this.LS,this.pct,i.useCredentials,fe.Sv(i.src)),this.Ddt.ln(Yh.PLt,this.gkt),this.Ddt.ln(Yh.BLt,this.bjt),this.Ddt.ln(t.xA,this.Ds),this.Ddt.ln(t.OA,this.Ds),this.Ljt=new fX(i,this.Ddt,this.sP),this.Al.Vz(this.Ljt.nt),this.MOt=this.kjt.g8(),e.textTracks&&this.yP(e.textTracks),Ss(this.Al),this.Mjt())}Mjt(){this.Cjt.s_(),this.Cjt=new Po,this.Aft=this.xjt(this.Aft,this.Cjt.i_).catch(this.flt)}async xjt(t,i){const e=this.uP;t&&(await t,Pi(i)),e!==Al.cB&&this.Ddt&&(e!==Al.XM?this.Pn().catch(this.flt):this.Ojt(i).catch(this.flt))}async Ojt(t){if(void 0===this.Ddt||this.Jlt)return;if(!this.Ddt.QLt){try{await this.Ddt.HLt(t)}catch(t){throw yo(t),this.W_=!1,new ce(le.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.jjt.vdt()}const i=await this.zjt();this.Pjt(i),await this.Bjt(i,t),this.Jlt=!0,this.Sft.Lft()}async zjt(){if(this.Rjt=this.Ddt.br.fIt,!this.Rjt.length)throw new ce(le.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.Ujt(this.Rjt);if(0===t.length)throw new ce(le.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const i=await this.njt(t);return i.length>0&&(t=i),At.oN(ki,"Selecting initial active variant stream."),function(t,i,e,s){void 0===s&&(s=Dw.maximumBackoff);const n=function(t,i){if(void 0===i)return t;const e=i.preferredVideoCodecs,s=i.preferredAudioCodecs;if(void 0!==e){let i;for(const n of e){const e=t.filter((t=>t.Ast&&t.Ast.iIt&&qt(t.Ast.iIt,n)));if(0===e.length)continue;if(void 0===s)return e;void 0===i&&(i=e);const r=pZ(e,s);if(void 0!==r)return r}if(void 0!==i)return i}if(void 0!==s){const i=pZ(t,s);if(void 0!==i)return i}return t}(t,i),r=MZ(n,s);switch(e.FV.type){case qa.BANDWIDTH:{const t=e.HV,i=r.filter((i=>i.zz<=t));if(i.length>0)return $_(i,(t=>t.zz))}case qa.PERFORMANCE:return Oo(r,(t=>t.zz));case qa.QUALITY:return $_(r,(t=>t.zz))}}(t,this.wkt.abr,this.oR,this.gct.maximumBackoff)}async Bjt(t,i){const e=[],s=yZ(t._It);s&&this.yjt!==s&&(At.oN(ki,"Detected initial audio rendition."),this.yjt=s,e.push(this.Qjt(s,i)));const n=mZ(t.CEt);let r;n&&this.Fjt!==n&&(At.oN(ki,"Detected initial subtitle rendition."),this.Fjt=n,e.push(this.Qjt(n,i))),n||(r=mZ(t.xEt),r&&(At.oN(ki,"Detected initial closed caption rendition."),this.Yjt(t,r)));const h=yZ(t.gIt);if(h&&this.pjt!==h){At.oN(ki,"Detected initial video rendition."),this.pjt=h;s&&wH(h,s)||e.push(this.Qjt(h,i))}await Promise.all(e)}async Qjt(t,i){try{await this.Ddt.ikt(t,i)}catch(e){yo(e),(zt(e)||gu(e))&&await this.Gjt(t,i)}}async Gjt(t,i){if(!this.Vjt)if(t.$w!==Eo.Yv)await this.Wjt(t,i);else if(this.Rjt&&this.Rjt.length<=1)await this.Wjt(t,i);else{const t=await this.zjt();this.Pjt(t),await this.Bjt(t,i)}}Pn(){return this.tvt||(this.tvt=this.Ztt(this.OS.i_).catch(this.flt)),this.tvt}async Ztt(t){await this.Ojt(t),this.Ejt(this.yjt,this.pjt,this.Fjt).catch(xs),this.gjt=!0}yP(t){for(const i of t)i.src&&this.DP.IS(i)}Yjt(t,i){if(!this.Njt)return;const e=function(t){const i=[];for(const e of t){const t=lZ(e);void 0!==t&&i.push({q5:t,X5:e.gs||"",dh:e.l})}return i}(t.xEt);for(const t of e)this.qOt.gMt(t);if(void 0!==i){const t=lZ(i);this.qOt.fMt(t).Xw=Ht.Un}}get ljt(){return[this.Sjt,this.JOt,this.Hjt].filter(z_)}RDt(t){for(const i of t)if(!this.qjt(i))throw new b("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.Rjt=t}qjt(t){const i=this.br;return!!i&&na(i.fIt,t)}Xjt(t){if(this.tjt)return Gr(this.tjt.pIt,(i=>i===t))}Pjt(t){if(At.oN(ki,"Setting active variant stream."),this.tjt!==t){var i;if((null==(i=this.tjt)?void 0:i.CSt)!==(null==t?void 0:t.CSt)){if(this.tjt)for(const t of this.tjt.CEt)this.jS(t);if(t)for(const i of t.CEt)this.Zjt(i)}this.tjt=t,this.mo(new HX),this.ldt()}}Zjt(t){const i=this.sP.SS(Pt.HM,void 0,t.l,t.gs,t.mDt,void 0,void 0,t.DDt.map(DH).filter(z_));this.Kjt.tt(i),this.Jjt.set(t.Bw,i),i.ln(Os.Ko,this.onTextTrackChange)}jS(t){const i=this.Jjt.get(t.Bw);i&&(i.rn(Os.Ko,this.onTextTrackChange),this.Kjt.it(i),this.Jjt.delete(t.Bw),this.sP.jS(i))}async sjt(){var t;const i=null!=(t=this.Rjt)?t:this.br.fIt;if(0===i.length&&!this.Rjt)return At.oN(ki,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===i.length&&!this.Rjt)return At.oN(ki,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const e=await this.Ujt(i);if(0===e.length)return At.lIt(ki,"LLHLSPlayer - No variant streams with supported codecs available to perform ABR selection on."),[];const s=MZ(e,this.gct.maximumBackoff);return 0===s.length?(this.Vjt||(At.lIt(ki,"LLHLSPlayer - No variant streams with online renditions available to perform ABR selection on."),this.$jt++,await this.tzt(e)),[]):s}async izt(){const t=await this.cSt();if(void 0===t)return;const i=!!this.tjt&&t.zz<this.tjt.zz;await this.UDt(t,{QDt:i})}async cSt(){var t,i;const e=await this.sjt();if(0===e.length)return;const s=function(t){const i=t.E_,e=t.M_.HB(i);return e?e.bn(0)-i:0}(this.sP),n=await this.njt(e),r={ji:this.sP.ji,Ti:this.sP.Ti,rSt:s,act:null==(t=this.wkt)||null==(i=t.abr)?void 0:i.restrictToPlayerSize},h=await this.ezt.cSt(e,this.tjt,n,r,new dZ(this.cP));return!!this.tjt&&h.zz<this.tjt.zz||this.szt(h,e,s)?h:void 0}szt(t,i,e){var s;if(t===this.jDt)return!1;if(t===this.ijt(i))return!0;(!this.nzt||this.nzt.zDt.zz>t.zz)&&(this.nzt={zDt:t,Ret:fe.h_()});const n=fe.h_()-this.nzt.Ret;var r;const h=null!=(r=null==(s=this.KDt)?void 0:s.vDt.nSt)?r:1/0;return e>=x.max(h-1,5)||n>1e3}async tzt(t){this.Vjt=!0;let i=!1;for(const e of t)try{const t=this.ojt?Gr(e.gIt,(t=>gH(t,this.ojt))):void 0;if(void 0===t)continue;await this.ikt(t),t.vDt.Pbt=-1/0,i=!0}catch(t){}if(i)this.$jt=0,await this.rzt();else{if(this.$jt>=this.gct.maxRetries)return void this.qP(new ce(le.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=x.min(this.gct.minimumBackoff*2**(this.$jt-1),this.gct.maximumBackoff);await be(t)}this.Vjt=!1,await this.izt()}async Ujt(t){let i=await ig(t,(async t=>{var i,e,s;const n=[(null==(i=t.Ast)?void 0:i.tIt)?'audio/mp4; codecs="'+t.Ast.tIt+'"':void 0,(null==(e=t.Ast)?void 0:e.iIt)?'video/mp4; codecs="'+t.Ast.iIt+'"':void 0].filter(z_);return 0===n.length||await this.hzt.HH(n,null==(s=this.wkt)?void 0:s.useManagedMediaSource)}));return i.some((t=>{var i;return null==(i=t.Ast)?void 0:i.iIt}))&&(i=i.filter((t=>!t.Ast||t.Ast.iIt||0!==t.gIt.length))),i.some((t=>{var i;return null==(i=t.Ast)?void 0:i.tIt}))&&(i=i.filter((t=>!t.Ast||t.Ast.tIt||0!==t._It.length))),i}njt(t){return this.Ddt.YLt?ig(t,(t=>async function(t,i){for(const e of t)if(!await i(e))return!1;return!0}([yZ(t._It),yZ(t.gIt),mZ(t.CEt),mZ(t.xEt)].filter(z_),(t=>this.ozt(t))))):Promise.resolve([])}async ozt(t){if(0===t.vDt.det.length)return!1;const i=t.vDt.det[0];if(!i.Dnt)return!1;const e=i.Dnt,s=e.zht?XH(e.zht.gn,e.zht.U):void 0;try{return await this.pct.Xit(e.zy,s)}catch(t){return!1}}async UDt(t,i){if(!this.gjt)throw new b("LLHLSPlayer - The LLHLSPlayer is not loaded.");if(!t)throw new b("LLHLSPlayer - Cannot explicitly set the active variant stream to undefined.");if(!this.qjt(t))throw new b("LLHLSPlayer - Trying to set an active variant stream that does not exists on the internal model.");if(t===this.tjt)return void At.oN(ki,"Trying to set the already active variant stream, ignoring.");const e=this.hjt?Gr(t._It,(t=>gH(t,this.hjt))):void 0,s=this.ojt?Gr(t.gIt,(t=>gH(t,this.ojt))):void 0,n=this.cjt?Gr(t.CEt,(t=>gH(t,this.cjt))):void 0;this.Pjt(t),this.nzt=void 0,await this.Ejt(e,s,n,i)}async ZDt(t){if(!this.gjt)throw new b("LLHLSPlayer - The LLHLSPlayer is not loaded");if(!this.tjt)throw new b("LLHLSPlayer - Cannot set the active audio rendition when there is no active variant stream.");if(!t)throw new b("LLHLSPlayer - Cannot explicitly set the active audio rendition to undefined.");const i=this.Xjt(t);if(!i)throw new b("LLHLSPlayer - Trying to set an invalid rendition as the active audio rendition.");At.oN(ki,"Switching audio rendition"),await this.Ejt(i,this.ojt,this.cjt,{YDt:!0})}async JDt(t){if(!this.gjt)throw new b("LLHLSPlayer - The LLHLSPlayer is not loaded");if(!this.tjt)throw new b("LLHLSPlayer - Cannot set the active video rendition when there is no active variant stream.");if(!t)throw new b("LLHLSPlayer - Cannot explicitly set the active video rendition to undefined.");const i=this.Xjt(t);if(!i)throw new b("LLHLSPlayer - Trying to set an invalid rendition as the active video rendition.");At.oN(ki,"Switching video rendition"),await this.Ejt(this.hjt,i,this.cjt,{FDt:!0})}async azt(t){if(!this.gjt)throw new b("LLHLSPlayer - The LLHLSPlayer is not loaded");if(!this.tjt)throw new b("LLHLSPlayer - Cannot set the active subtitle rendition when there is no active variant stream.");if(!t)throw new b("LLHLSPlayer - Cannot explicitly set the active video rendition to undefined.");const i=this.Xjt(t);if(!i)throw new b("LLHLSPlayer - Trying to set an invalid rendition as the active subtitle rendition.");At.oN(ki,"Switching subtitle rendition"),await this.Ejt(this.hjt,this.ojt,i)}async uzt(t,i){this.Vjt||(t.$w!==Eo.Yv?await this.Wjt(t,i):this.Rjt&&this.Rjt.length<=1?(this.ojt!==t&&await this.Ejt(this.hjt,t,this.cjt),await this.Wjt(t,i)):await this.izt())}async ikt(t,i){try{await this.Ddt.ikt(t,i)}catch(e){throw yo(e),(zt(e)||gu(e))&&await this.uzt(t,i),e}}async Wjt(t,i){if(!na(this.czt,t)){this.czt.push(t);try{const e=t.$w===Eo.HM||t.$w===Eo.DSt?1/0:this.gct.maxRetries;await hu((()=>this.retryOfflineRenditionsCallback(t,i)),i,e,this.gct.minimumBackoff,this.gct.maximumBackoff)}catch(t){this.qP(new ce(le.MEDIA_LOAD_ERROR,t.message,t))}finally{Et(this.czt,t),t.vDt.Pbt===-1/0&&await this.rzt()}}}Ejt(t,i,e,s){void 0===s&&(s={});const n={QDt:s.QDt||!1,YDt:s.YDt||!1,FDt:s.FDt||!1,Gg:s.Gg||!1};return n.Gg||this.hjt!==t||this.ojt!==i||this.cjt!==e?void 0===t&&void 0===i?Promise.reject(new b("Trying to buffer no media renditions.")):(this.hjt=t,this.ojt=i,this.cjt=e,this.Xbt(),this.mo(new qX),this.K4.s_(),this.K4=new Po,this.lzt.s_(),this.lzt=new Po,this.vjt=this.dzt([this.vjt,this.J4].filter(z_),t,i,e,n,this.lzt.i_).catch(this.mjt),this.vjt):Promise.resolve()}async dzt(t,i,e,s,n,r){var h;await Promise.all(t.map((t=>t.catch(xs)))),this.fzt(),await this._zt();const o=[];n.YDt&&this.cP&&this.cP.r$&&o.push(this.cP.r$.wm(0,1/0)),n.FDt&&this.cP&&this.cP.h$&&o.push(this.cP.h$.wm(0,1/0)),await Promise.all(o),Pi(r);const a=await this.gzt(i,e,n.Gg,r);this.wzt(i,e,n.QDt||a),this.Azt(s,n.QDt),Pi(r);const u=[e,i&&e&&wH(i,e)?void 0:i,s].filter(z_);try{await Promise.all(u.filter((t=>!t.vDt.xbt)).map((t=>{var i;return null==(i=this.Ddt)?void 0:i.ekt(t,r)})))}catch(t){yo(t)}if(Pi(r),this.g$(),this.Xbt(),void 0!==this.djt)this.Ajt(this.djt,this.fjt);else if(!this.ydt&&(null==(h=this.tjt)?void 0:h.vDt.gn)){const t=this.tjt.vDt,i=t.gn;let e=i.hEt;if(i.hEt<0){const i=t.ybt;e+=i.bn(i.U-1)}this.Ajt(e,!i.oEt)}else!this.ydt&&u.every((t=>!t.vDt.mEt))?this.Ajt(1/0,!0):this.ljt.length>0&&this.vzt()}async gzt(t,i,e,s){var n,r;const h=void 0!==t&&t!==i,o=void 0!==i,a=await this.mzt(t,i,this.tjt);if(Pi(s),!e&&this.cP&&!a)return!1;const u=void 0!==(null==(n=this.cP)?void 0:n.r$),c=void 0!==(null==(r=this.cP)?void 0:r.h$);if(!e&&!(h!==u||o!==c)&&a&&this.cP&&this.cP.SH(a))return await this.pzt(s),await this.cP.bH(a),!0;for(const t of this.ljt)t.AOt.forEach((t=>t.s_()));this.sP.o3();try{this.cP&&await this.sP.Wn(),this.cP=await this.yzt(a,h,o)}finally{this.sP.a3()}return!0}async mzt(t,i,e){var s,n;const r=e.Ast,h=[];if(void 0!==t){if(!r||!r.tIt)return;{const t='audio/mp4; codecs="'+r.tIt+'"';At.oN(ki,"Configuring MediaSource for initial audio rendition with codec: "+t+"."),h.push(t)}}if(void 0!==i){if(!r||!r.iIt)return;{const t='video/mp4; codecs="'+r.iIt+'"';At.oN(ki,"Configuring MediaSource for initial video rendition with codec: "+t+"."),h.push(t)}}if(0===h.length)return void At.lIt(ki,"No codecs found on the active variant stream.");var o;const a=null!=(o=null==(s=null==i?void 0:i.vDt.det[0])?void 0:s.uEt)?o:[];var u;const c=null!=(u=null==(n=null==t?void 0:t.vDt.det[0])?void 0:n.uEt)?u:[],l=this.Ddt.br,d=await eq(this.wkt.contentProtection,h,l.MLt.concat(c).concat(a),this.LS,this.wkt.useCredentials);return{$w:Pe.iO,v$:h.map((t=>({gP:t}))),wP:d,E$:this.wkt.useManagedMediaSource}}async yzt(t,i,e){let s;return s=t?await this.sP.Pn(t):new JX(this.sP,i,e),this.cP=s,this.g$(),this.aTt(),this.uTt(),s}g$(){const t=this.cP;if(t&&j(t.ct)){var i,e,s;const n=null!=(s=null==(i=this.hjt)?void 0:i.vDt.ct)?s:null==(e=this.ojt)?void 0:e.vDt.ct;void 0!==n&&n>0&&t.f$(n)}this.Xbt()}aTt(){const t=this.cP;t&&(t.h$&&(t.h$.RV=this.oR.ZV),t.r$&&(t.r$.RV=this.oR.ZV))}uTt(){const t=this.cP;t&&(t.h$&&(t.h$.GV=this.oR.GV),t.r$&&(t.r$.GV=this.oR.GV))}wzt(t,i,e){if(!this.cP)throw new b("Invalid state");this.cP.r$?this.c$&&this.c$.HOt(this.cP.r$)||(this.c$=new cZ(Tw.Gv,this.cP.r$,this.Tjt?this.gft:void 0,this.Njt?this.qOt:void 0)):this.c$=void 0,this.cP.h$?this.l$&&this.l$.HOt(this.cP.h$)||(this.l$=new cZ(Tw.Yv,this.cP.h$,this.Tjt?this.gft:void 0,this.Njt?this.qOt:void 0)):this.l$=void 0;const s=t&&i&&wH(t,i);if(this.l$&&i){const t=s&&this.c$?[this.l$,this.c$]:[this.l$];this.JOt?this.JOt.ODt!==i&&(e&&(this.JOt.s_(),this.JOt.TOt.iL()),this.JOt.ECt(i)):(this.JOt=function(t,i,e,s,n,r,h,o,a,u){const c=s.br.iI,l=new xX(c),d=new LX(Tw.Yv,t,s,l,n,r,h,u),f=i.map((t=>t.$w)),_=o.Ect(l,s.br.iI,f),g=new WX(d,l,_,a);return g.NOt(i),g}(i,t,this.sP,this.Ddt,this.LS,this.pct,this.Fkt,this.MOt,this.oR,this.wkt.useCredentials),this.JOt.mOt.ln(On.NCt,this.Mzt),this.JOt.mOt.ln(On.DCt,this.Tzt),this.JOt.yOt.ln(Hu.Gxt,this.Nzt),this.JOt.yOt.ln(Hu.Wxt,this.Dzt),this.JOt.yOt.ln(Hu.Hxt,this.Izt),this.JOt.yOt.ln(Hu.Vxt,this.Szt)),this.JOt.NOt(t)}else{var n;null==(n=this.JOt)||n.Xf(),this.JOt=void 0}var r;this.c$&&t&&!s?(this.Sjt?this.Sjt.ODt!==t&&(e&&(this.Sjt.s_(),this.Sjt.TOt.iL()),this.Sjt.ECt(t)):(this.Sjt=function(t,i,e,s,n,r,h,o,a,u){const c=s.br.iI,l=new xX(c),d=new LX(Tw.Gv,t,s,l,n,r,h,u),f=o.Ect(l,s.br.iI,[i.$w]),_=new WX(d,l,f,a);return _.NOt([i]),_}(t,this.c$,this.sP,this.Ddt,this.LS,this.pct,this.Fkt,this.MOt,this.oR,this.wkt.useCredentials),this.Sjt.mOt.ln(On.DCt,this.Tzt),this.Sjt.yOt.ln(Hu.Gxt,this.Nzt),this.Sjt.yOt.ln(Hu.Vxt,this.Szt)),this.Sjt.NOt([this.c$])):(null==(r=this.Sjt)||r.Xf(),this.Sjt=void 0);this.Ezt()}Azt(t,i){if(this.Hjt){this.Hjt.mOt.ODt===t?i&&(this.Hjt.s_(),this.Hjt.TOt.iL()):(this.Hjt.Xf(),this.Hjt=void 0)}if(!this.Hjt&&t){const i=this.Jjt.get(t.Bw);i.Xw=Ht.Un,this.Hjt=function(t,i,e,s,n,r,h){const o=e.br.iI,a=new zX(i,o),u=new xX(o),c=new LX(Tw.Eu,t,e,u,s,n,r,h),l=new YX(u,o,Tw.Eu),d=new WX(c,u,l);return d.DOt(a),d}(t,i,this.Ddt,this.LS,this.pct,this.Fkt,this.wkt.useCredentials)}}Ezt(){const t=[this.c$,this.l$].filter(z_).map((t=>t.$w));this.Ddt.br.iI.yLt(t)}async t2(t,i,e,s){await Promise.all(t.map((t=>t.catch(xs)))),Pi(s),await this._zt(),Pi(s),this.djt=void 0,this._jt=void 0,this.ydt=!0;const n=this.Qlt.EB(i);this.sP.Em(n,e),this.gjt&&this.ljt.length>0&&(this.bzt(this.sP.E_),this.vzt())}bzt(t){for(const i of this.ljt)i.FCt(t)||(i.LOt(),i.TOt.xxt()),i.EOt(t)||(i.kOt(),i.TOt.Oxt())}fzt(){for(const t of this.ljt)t.s_()}_zt(){return Promise.all([this.Lzt(),this.kzt(),this.Czt()])}vzt(){this.xzt(),this.Ozt(),this.jzt()}async rzt(){this.gjt&&this.ljt.length>0&&(this.ljt.forEach((t=>t.LOt())),await this.Lzt(),this.xzt(),this.ljt.forEach((t=>t.mOt.XCt())))}xzt(){if(this.zzt)return;const t=()=>{this.zzt=void 0};this.Pzt=new Po,this.zzt=this.Bzt(this.Pzt.i_).catch(this.mjt).then(t,t)}async Lzt(){var t;null==(t=this.Pzt)||t.s_();const i=this.zzt;this.zzt=void 0,i&&await i}async Bzt(i){Pi(i);const e=this.ljt;for(;;){const s=[],n=this.sP.E_;for(const t of e){const i=t.mOt,e=t.rAt(n);if(i.Skt)s.push(i.Lkt());else if(t.bOt(n,e,this.oR.ZV)){const n=i.YCt(e);if(void 0===n){if(i.ODt.vDt.mEt)continue;const t=i.ODt.vDt.det;t.length&&t[0].Fm>e&&(this.E_=1/0),i.JCt(),i.WCt(e)}else{const[e,s]=n;i.$_t(e,s,t.Akt),t.yOt.sOt(e,s)}s.push(i.Lkt())}}await cg((i=>{if(0===s.length){e.every((t=>t.mOt.QCt))||s.push(this.sP.v_(t.XA,i));for(const t of e)s.push(t.yOt.v_(Hu.Vxt,i))}return hl(Promise.race(s),i)}),i)}}Ozt(){if(this.Rzt)return;const t=()=>{this.Rzt=void 0};this.Uzt=new Po,this.Rzt=this.Qzt(this.Uzt.i_).catch(this.mjt).then(t,t)}async kzt(){var t;null==(t=this.Uzt)||t.s_();const i=this.Rzt;this.Rzt=void 0,i&&await i}async Qzt(t){Pi(t);const i=this.ljt;for(;;){const e=[];for(const t of i){const i=t.mOt,s=t.yOt;if(s.Skt)e.push(s.Lkt());else{const t=i.jCt();t?"uht"===t.$w?(s.oOt(t),e.push(s.Lkt())):"_Et"===t.$w&&(s.nOt(t),e.push(s.Lkt())):e.push(i.ZCt())}}if(0===e.length)break;await hl(Promise.race(e),t)}}jzt(){if(this.Fzt)return;this.Yzt=new Po;const t=()=>{this.Fzt=void 0};this.Fzt=this.Gzt(this.Yzt.i_).catch(this.mjt).then(t,t)}async Czt(){var t;null==(t=this.Yzt)||t.s_();const i=this.Fzt;this.Fzt=void 0,i&&await i}async Gzt(t){for(;;){const i=this.ljt;i.forEach((t=>t.K_t()));const e=[],s=[],n=[];for(const t of i){const i=t.yOt;for(const r of t.AOt){const t=r.Tkt?e:s;if(r.Skt)t.push(r.Lkt());else if(!r.kkt(this.sP.E_)){const e=i.fOt(r.$w);e?"uht"===e.$w&&e.AEt===this.ajt?(r.uAt(e),t.push(r.Lkt())):"gOt"===e.$w&&e.AEt===this.ajt&&(r.LK(e),t.push(r.Lkt())):n.push(i._Ot(r.$w))}}}if(0===e.length){const e=Nh(i,(t=>t.AOt.filter((t=>t.Tkt)).map((i=>t.yOt.fOt(i.$w)))));if(e.length>0&&e.every((t=>void 0!==t&&"gOt"===t.$w&&t.AEt!==this.ajt))){const s=e,n=$_(s,(t=>t.AEt)).AEt;if(s.every((t=>t.AEt===n))){const i=Oo(s,(t=>t.Fm)).Fm,e=await this.Vzt(s);this.cP.SH(e)?(At.cIt(IH,"Seamless switch from",this.cP.vd,"to",e),await this.cP.bH(e),At.cIt(IH,"Seamless switch complete.")):await this.Wzt(i,e,t),this.ajt=s[0].AEt}else for(const t of i)for(const i of t.AOt){let e=t.yOt.fOt(i.$w);for(;e&&e.AEt!==n;)t.yOt.xkt(e),e=t.yOt.fOt(i.$w)}continue}}if(0===e.length&&0===s.length&&0===n.length){i.every((t=>t.AOt.length>0&&t.AOt.every((t=>t.kkt(this.sP.E_)))))&&this.cP._J();break}await hl(Promise.race([...e,...s,...n]),t)}}async Vzt(t){const i=t.map((t=>t.wOt.Ast)),e=i.map((t=>({gP:t}))),s=Nh(t,(t=>t.wOt.uEt));s.push(...this.Ddt.br.MLt);let n=await eq(this.wkt.contentProtection,i,s,this.LS,this.wkt.useCredentials);return 0===n.length&&this.cP&&this.cP.vd.wP.length>0&&(n=this.cP.vd.wP),{$w:Pe.iO,v$:e,wP:n,E$:this.wkt.useManagedMediaSource}}async Wzt(i,e,s){var n;const r=this.cP,h=r.ct,o=this.E_<i;if(o)try{for(At.cIt(IH,"Marking end of stream and waiting for ended to switch discontinuity."),r._J();!this.sP.C_&&this.sP.E_<i;)await this.sP.v_([t.XA,t.NA],s)}catch(t){throw r.nJ(),r.f$(h),t}At.cIt(IH,"Perform hard switch from",null==(n=this.cP)?void 0:n.vd,"to",e);try{this.sP.o3(),this.E_<i&&this.sP.Em(i,!0,!0),this.l$=void 0,this.c$=void 0,this.Ezt(),await this.sP.Wn(),this.cP=await this.sP.Pn(e),this.g$(),this.aTt(),this.uTt(),this.cP.h$&&(this.l$=new cZ(Tw.Yv,this.cP.h$,this.Tjt?this.gft:void 0,this.Njt?this.qOt:void 0)),this.cP.r$&&(this.c$=new cZ(Tw.Gv,this.cP.r$,this.Tjt?this.gft:void 0,this.Njt?this.qOt:void 0)),this.Ezt()}finally{o&&W(this.sP.Bg()),this.sP.a3()}if(this.JOt){const t=void 0!==this.c$&&void 0===this.Sjt?[this.l$,this.c$]:[this.l$];this.JOt.NOt(t)}this.Sjt&&this.Sjt.NOt([this.c$]),At.cIt(IH,"Hard switch complete.")}pzt(t){return hl(tl(Nh(this.ljt,(t=>t.AOt.map((t=>t.Lkt()))))),t)}ldt(){const t=this.Mg,i=this.vg;this.Nft===t&&this.Dft===i||(this.Nft=t,this.Dft=i,this.mo(new Vu))}async cn(){At.oN(ki,"Unloading the player."),this.Hzt(),this.hft(),await this.Wn(),this.sP.LP=void 0,this.Kjt.cn(),await this.DP.cn(),await this.gft.cn(),await this.qOt.cn(),this.qv.cn(),this.Zv.cn(),this.Al.cn(),this.qzt.cn(),this.Sft.Xf(),this.Fkt.Xf()}async Wn(){At.oN(ki,"Resetting the player."),this.rn(Au.wDt,this.handleBufferingErrorEvent),this.ajt=-1,this.Cjt.s_(),this.Cjt=new Po,this.OS.s_(),this.OS=new Po,this.K4.s_(),this.K4=new Po,this.lzt.s_(),this.lzt=new Po;const t=[this.Aft,this.tvt,this.J4,this.vjt].filter(z_);await Promise.all(t.map((t=>t.catch(xs)))),this.Aft=void 0,this.tvt=void 0,this.J4=void 0,this.vjt=void 0,this.hjt=void 0,this.ojt=void 0,this.cjt=void 0,this.Rjt=void 0,this.yjt=void 0,this.pjt=void 0,this.Fjt=void 0,this.czt=[],this.Pjt(void 0),this.fzt(),await this._zt(),this.Sjt&&(this.Sjt.Xf(),this.Sjt=void 0),this.JOt&&(this.JOt.Xf(),this.JOt=void 0),this.Hjt&&(this.Hjt.Xf(),this.Hjt=void 0),this.c$=void 0,this.l$=void 0,this.cP=void 0,this.MOt&&(this.MOt.Xf(),this.MOt=void 0),this.Ddt&&(this.Ddt.Xf(),this.Ddt=void 0),this.Ljt&&(this.Al.Xz(this.Ljt.nt),this.Ljt=void 0),await this.DP.Wn(),await this.gft.Wn(),await this.qOt.Wn(),this.sP.IP(),await this.sP.Wn(),this.wkt=void 0,this.gjt=!1,this.w$=Ki.KB(),this.djt=void 0,this.Tft=void 0,this.Nft=0,this.Dft=0,this._jt=void 0,this.ydt=!1,fe.o_(this.wjt),this.Jlt=!1,this.Xzt=!1,this.Glt=0,this.qzt.Wn(),this.Zzt(),this.mo(new bl(this.E_,this.cg))}Zzt(){for(const t of this.qv.Nw)t.cn();for(const t of this.Zv.Nw)t.cn();for(const t of this.Al.Nw)t.cn();this.qv.Wn(),this.Zv.Wn(),this.Al.Wn(),this.Jjt.clear()}Kzt(){this.qzt.ln(fZ,this.Ds),this.qzt.ln(qo._v,this.zP),this.qzt.ln(qo.fv,this.Jzt),this.qzt.ln(qo.rv,this.$zt),this.oR.ln("BV",this.lTt),this.oR.ln("YV",this.dTt),this.sP.ln(_Z,this.Ds),this.sP.ln(t.AA,this.handleContentProtectionErrorEvent),this.sP.ln(t.yA,this.tPt),this.sP.ln(t.NA,this.wh),this.sP.ln(t.yh,this.iPt),this.sP.ln(t.bh,this.ePt),this.sP.ln(t.BA,this.sPt),this.sP.ln(qo._w,this.vO),this.sP.ln(t.XA,this.A1),this.sP.ln(t.YA,this.We),this.sP.ln(t.FA,this.OP),this.sP.ln(t.QA,this.nPt),this.sP.ln(t.ZA,this.rPt)}Hzt(){this.qzt.rn(fZ,this.Ds),this.qzt.rn(qo._v,this.zP),this.qzt.rn(qo.fv,this.Jzt),this.qzt.rn(qo.rv,this.$zt),this.oR.rn("BV",this.lTt),this.oR.rn("YV",this.dTt),this.sP.rn(_Z,this.Ds),this.sP.rn(t.AA,this.handleContentProtectionErrorEvent),this.sP.rn(t.yA,this.tPt),this.sP.rn(t.NA,this.wh),this.sP.rn(t.yh,this.iPt),this.sP.rn(t.bh,this.ePt),this.sP.rn(t.BA,this.sPt),this.sP.rn(qo._w,this.vO),this.sP.rn(t.XA,this.A1),this.sP.rn(t.YA,this.We),this.sP.rn(t.FA,this.OP),this.sP.rn(t.QA,this.nPt),this.sP.rn(t.ZA,this.rPt)}constructor(t,i,e,s,n,r,h){super(),this.oR=e,this.Fkt=s,this.kjt=n,this.Jjt=Ye(),this.Njt=!0,this.Tjt=!0,this.gjt=!1,this.OS=new Po,this.wkt=void 0,this.cP=void 0,this.tvt=void 0,this.Aft=void 0,this.Cjt=new Po,this.Ddt=void 0,this.yjt=void 0,this.pjt=void 0,this.Fjt=void 0,this.tjt=void 0,this.hjt=void 0,this.ojt=void 0,this.cjt=void 0,this.Rjt=void 0,this.czt=[],this.c$=void 0,this.l$=void 0,this.Sjt=void 0,this.JOt=void 0,this.Hjt=void 0,this.MOt=void 0,this.lzt=new Po,this.vjt=void 0,this.K4=new Po,this.J4=void 0,this.ajt=-1,this.Pzt=void 0,this.Uzt=void 0,this.Yzt=void 0,this.zzt=void 0,this.Rzt=void 0,this.Fzt=void 0,this.uat=!0,this.$jt=0,this.Vjt=!1,this.uP=Al.cB,this.hP=void 0,this.oP=void 0,this.w$=Ki.KB(),this.hPt=[],this.djt=void 0,this.fjt=!1,this.ydt=!1,this.Tft=void 0,this.Nft=0,this.Dft=0,this._jt=void 0,this.wjt=0,this.Jlt=!1,this.Xzt=!1,this.nzt=void 0,this.oPt=void 0,this.dP=new Wu,this.Glt=0,this.handleContentProtectionErrorEvent=t=>{this.hP=Qh(t.errorObject),this.oP=t.errorObject,this.Ds(t)},this.handleBufferingErrorEvent=t=>{this.qP(new ce(le.MEDIA_LOAD_ERROR,t.lt.message,t.lt))},this.tPt=()=>{this.Xbt();const t=this.ct;t!==this.Tft&&(this.Tft=t,this.mo(new ts(this.Tft)))},this.wh=()=>{this.C_&&this.mo(new Ds(this.E_))},this.iPt=()=>{this.mo(new ws(this.E_))},this.ePt=()=>{this.rlt(),this.mo(new vh(this.E_))},this.zP=()=>{void 0!==this.oPt&&fe.o_(this.oPt),this.mo(new Vi(this.E_))},this.sPt=()=>{this.mo(new _i(this.E_))},this.vO=()=>{this.mo(new Qi(this.E_,this.cg))},this.A1=()=>{const t=this.BDt;zo(this.hPt,t)||(this.mo(new _X),this.hPt=t),this.mo(new Tc(this.E_,this.N_))},this.Mzt=oo((t=>{t.TS===Tw.Yv&&this.KOt()&&W(this.$Ot())}),200),this.Tzt=t=>{var i;this.Glt+=t.SCt,"uht"===t.ICt&&t.TS===Tw.Yv&&W(this.izt()),this.mo(new aG(function(t){if(t){if(void 0!==t.zht){var i,e;const s=t.zht.gn+(null!=(e=t.zht.U)?e:0);return{Fu:t.zy,Jet:[null==(i=t.zht)?void 0:i.gn,s],NS:!0}}return{Fu:t.zy.toString()||"",NS:!0}}return{Fu:"",NS:!0}}(t.uri),(null==(i=this.jDt)?void 0:i.zz)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.TS,t.httpStatusCode,t.SCt))},this.We=()=>{this.mo(new ja(this.E_))},this.OP=()=>{this.mo(new _e(this.E_))},this.nPt=()=>{this.ldt()},this.rPt=()=>{this.mo(new Ve(this.E_,this.Ng))},this.Jzt=()=>{this.sP.gg?this.mo(new wc(this.E_)):(null!=this.oPt||(this.oPt=fe.a_((()=>{this.Xzt&&(this.nzt=void 0,W(this.ejt()))}),2500)),this.rlt(),this.mo(new wc(this.E_)))},this.$zt=()=>{this.Xzt=!0,this.mo(new mt(this.E_,this.cg))},this.mjt=t=>{Oi(t)||zt(t)||gu(t)||(this.fzt(),W(this._zt()),this.mo(new zH(t)))},this.gkt=()=>{this.Xbt()},this.bjt=t=>{W(this.uzt(t.ODt))},this.flt=t=>{if(Oi(t))return;const i=t instanceof ce?t:new ce(le.MEDIA_DECODE_ERROR,t.message,t);this.qP(i)},this.onTextTrackChange=t=>{if(!this.tjt)return;const i=t.Lt,e=Gr(this.tjt.CEt,(t=>i===this.Jjt.get(t.Bw)));e&&(i.Xw===Ht.Zw||i.Xw===Ht.Un?(W(this.azt(e)),this.Jjt.forEach((t=>{t!==i&&(t.Xw=Ht.gh)}))):this.cjt&&this.cjt===e&&W(this.Ejt(this.hjt,this.ojt,void 0)))},this.retryOfflineRenditionsCallback=async(t,i)=>{this.ujt!==t&&this.XDt!==t&&this.KDt!==t||(await this.Ddt.ikt(t,i),t.vDt.Pbt=-1/0)},this.lTt=()=>{this.aTt()},this.dTt=()=>{this.uTt()},this.Nzt=t=>{const i=this.tjt;if(!(null==i?void 0:i.EEt)&&(this.Ddt.fkt(t.Ast,t.ODt.vDt),this.jjt.vIt(),i)){const t=void 0!==this.hjt&&!na(i._It,this.hjt),e=void 0!==this.ojt&&!na(i.gIt,this.ojt);(t||e)&&this.Ejt(t?void 0:this.hjt,e?void 0:this.ojt,this.cjt).catch(xs)}},this.Dzt=t=>{this.jjt.yIt(t.ODt,t.yst)},this.Izt=t=>{this.jjt.TIt(t.ODt,t.qxt.vp())},this.Szt=t=>{this.Ddt.lkt(t.ODt)},this.pct=new DY(r),this.sP=t,this.LS=i,this._P=new jH(this.oR.bV),this.hzt=new PH(this.sP),this.ezt=new qH(this.oR),this.gct=h.retryConfiguration,this.qv=new qe,this.Zv=new qe,this.jjt=new SH(this,this.oR,this.qv,this.Zv),this.Kjt=new Tn,this.DP=new Ya(this.sP,this.LS),this.gft=new TY(this.sP),this.qOt=new oW(this.sP),this.Al=new yh([this.Kjt,this.DP.Z,this.gft.Z,this.qOt.Z]),this.pP=new AI(this.LS),this.sP.LP=this.pP,this.Sft=new vZ(this,this.sP),this.qzt=new ru(this.Sft,!0),this.Kzt()}},AZ=class{async ZP(t,i){if(!pa(t.type))return!1;if(t.useNativePlayback)return!1;const e=t.contentProtection;if(e&&!FN(e)){if(!VN(e))return!1;if(!await this.Vit(e))return!1}return!0}async Vit(t){return!!t.aes128||(!(!t.playready||!await fe.WC())||(!(!t.widevine||!await fe.YC())||(!(!t.clearkey||!await fe.VC())||!t.fairplay&&await fe.JC())))}},vZ=class extends en{get cg(){return this.Lo.cg}Lft(){this.mo(new Qi(this.E_,this.cg))}constructor(t,i){super(i),this.Lo=t}};function mZ(t){const i=Gr(t,(t=>t.mDt)),e=t.filter((t=>t.pDt)),s=fe.Att,n=e.map((t=>t.gs)).filter(z_),r=tZ(n,s);return r?Gr(e,(t=>t.gs===r)):i}function pZ(t,i){for(const e of i){const i=t.filter((t=>t.Ast&&t.Ast.tIt&&qt(t.Ast.tIt,e)));if(0!==i.length)return i}}function yZ(t){var i;return null!=(i=mZ(t))?i:t[0]}function MZ(t,i){const e=i+gZ;return t.filter((t=>t.gIt.some((t=>t.vDt.Pbt<fe.h_()-e))||0===t.gIt.length))}function TZ(t,i){if(!i||i.vDt.mEt)return!1;const e=i.vDt.det;return 0!==e.length&&e[0].Fm>t}r(),r();var NZ=class{async Ukt(t,i,e){try{const s=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:e},s,t);return new T(n)}catch(t){throw new ce(le.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}Xf(){}static sx(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}};r(),r(),r(),r();var ih=class extends gg{constructor(t,i){super(t),this.data=i}},DZ=["message","messageerror","error"];r();var yr=class extends gg{constructor(t){super(Bi.Zo),this.error=t}},IZ=class extends i{get aPt(){return this.uPt.i_.Wf}cPt(t,i){this.aPt||(void 0!==this.lPt?this.lPt.cPt(t,i):this.dPt.push({Gb:t,fPt:i}))}_Pt(){this.aPt||(this.uPt.s_(),Ri(this.dPt),void 0!==this.lPt&&this.lPt._Pt())}constructor(t){super(),this.lPt=void 0,this.dPt=[],this.gPt=t=>{if(this.aPt)t._Pt();else{this.lPt=t,this.lPt.ln(DZ,this.Ds);for(const i of this.dPt)t.cPt(i.Gb,i.fPt);Ri(this.dPt)}},this.wPt=t=>{if(this.aPt)return;const i=t instanceof b?t:new b("Could not create Worker.");this.mo(new yr(i)),this._Pt()},this.uPt=new Po,t(this.uPt.i_).then(this.gPt,this.wPt)}};r(),r();var SZ=class extends i{cPt(t,i){i?this.lPt.postMessage(t,i):this.lPt.postMessage(t)}_Pt(){this.Bo(),this.lPt.removeEventListener("message",this.APt),this.lPt.removeEventListener("messageerror",this.vPt),this.lPt.removeEventListener("error",this.t3),this.lPt.terminate()}constructor(t,i){super(),this.APt=t=>{this.mo(new ih("message",t.data))},this.vPt=t=>{this.mo(new ih("messageerror",t.data))},this.t3=t=>{null==t.preventDefault||t.preventDefault();const i=t.error instanceof b?t.error:new b(t.message);this.mo(new yr(i)),this._Pt()},this.lPt=new rd(t,i),this.lPt.addEventListener("message",this.APt),this.lPt.addEventListener("messageerror",this.vPt),this.lPt.addEventListener("error",this.t3)}};r();var EZ=0,bZ=class extends i{cPt(t,i){i?this.mPt.contentWindow.postMessage({type:"message",data:t},"*",i):this.mPt.contentWindow.postMessage({type:"message",data:t},"*")}_Pt(){var t;this.mPt.removeEventListener("load",this.pPt),self.removeEventListener("message",this.yPt),null==(t=this.mPt.contentWindow)||t.postMessage({type:"terminate"},"*"),ei(this.mPt)}constructor(t,i){super(),this.pPt=()=>{this.mPt.removeEventListener("load",this.pPt),this.mPt.contentWindow.postMessage({type:"initialize",id:this.ym,script:this.MPt},"*")},this.yPt=t=>{t.origin===this.TPt&&t.data.id===this.ym&&("initialized"===t.data.type||("error"===t.data.type?(this.mo(new yr(new b(t.data.data.message))),this._Pt()):this.mo(new ih("message",t.data.data))))},this.ym=EZ++,this.MPt=t;const e=fe.Ah("iframe.html",i);this.mPt=function(t){const i=h.createElement("iframe");return i.width="0",i.height="0",i.style.display="none",i.src=t,h.body.appendChild(i),i}(e.href),this.TPt=e.origin,this.mPt.addEventListener("load",this.pPt),self.addEventListener("message",this.yPt)}};function LZ(t,i,e){const s=fe.Sv(t,i);return new IZ((t=>async function(t,i,e,s){let n;try{return n=new SZ(t,e),await OZ(n,s),n}catch(t){null==n||n._Pt(),yo(t)}if(xZ&&wB){let i;try{const e=await fe.MO.BI({Fu:t,mS:Kc.GET,pS:Rt.Eu,i_:s});i=await e.kS(s)}catch(t){yo(t)}if(i){let t;try{const r=wB([i],{type:"application/javascript"});return t=URL.createObjectURL(r),n=new SZ(t,e),await OZ(n,s),n}catch(t){null==n||n._Pt(),yo(t),xZ=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return n=new bZ(t,i),await OZ(n,s),n}catch(t){throw null==n||n._Pt(),t}}(s,i,e,t)))}var kZ,CZ,xZ=!0;async function OZ(t,i){const e=await t.v_(["message","error"],i);if("error"===e.type)throw function(t){return new ce(le.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(e.error);if(!function(t){return kt(t)&&"6.9.0"===t.NPt}(e.data))throw new ce(le.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (6.9.0).");return e}r(),function(t){t.DPt="Ukt",t.IPt="lCt"}(kZ||(kZ={})),function(t){t.SPt="EPt",t.bPt="LPt"}(CZ||(CZ={}));var jZ=class{kPt(){const t=LZ(this.CPt,this.xPt,{name:"THEOplayer decrypt worker"});return t.ln("message",this.OPt),t.ln("error",this.Btt),t}Ukt(t,i,e){const s=""+ ++this.jPt,n={zPt:kZ.DPt,PPt:s,BPt:t,RPt:i,UPt:e},r=new No;return this.QPt.set(s,r),null!=this.lPt||(this.lPt=this.kPt()),this.lPt.cPt(n),r.nL}Xf(t){void 0===t&&(t=new sa),this.QPt.forEach((i=>i.sL(t))),this.QPt.clear(),this.lPt&&(this.lPt._Pt(),this.lPt=void 0)}constructor(t){this.lPt=void 0,this.jPt=0,this.QPt=Qt(),this.OPt=t=>{const i=t.data,e=i.FPt,s=this.QPt.get(e);s&&(this.QPt.delete(e),i.YPt===CZ.SPt?s.eL(i.GPt):i.YPt===CZ.bPt&&s.sL(new ce(le.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")))},this.Btt=t=>{const i=new ce(le.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.Xf(i)},this.xPt=t;try{this.CPt=fe.Sv("theoplayer.d.js",t)}catch(t){throw new ce(le.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function zZ(t){return NZ.sx()?new NZ:new jZ(t)}function PZ(t){const i=Gr(t.boxes,LL);if(!i)return;const e=Gr(i.boxes,kL);return e?e.handlerType:void 0}function BZ(t){const i=new lT;return i.boxes.push(...t.boxes),i}function RZ(t){const i=new CM;return i.boxes.push(...t.boxes),i}r(),r(),r(),r();var UZ=8;function QZ(t,i){const e=function(t){const i=new je;return i.boxes.push(...t.boxes),i}(t),s=YZ(i);for(let t=0;t<e.boxes.length;t++){const n=e.boxes[t];if(n===i)e.boxes[t]=new hM(new T(i.getSize()-UZ));else if(CL(n)){const i=n,r=Da(i.boxes,(t=>t instanceof LM&&t.trackId===s));if(r>=0){const s=i.boxes[r],n=RZ(i);n.boxes[r]=new hM(new T(s.getSize()-UZ)),e.boxes[t]=n}}}return e}function FZ(t,i){const e=function(t){const i=new ZM;return i.boxes.push(...t.boxes),i}(t);for(let t=0;t<e.boxes.length;t++){const s=e.boxes[t];if(jL(s)){const n=Gr(s.boxes,zL);n&&n.trackId===i&&(e.boxes[t]=new hM(new T(s.getSize()-UZ)))}}return e}function YZ(t){return Gr(t.boxes,bL).trackId}function GZ(t,i,e,s){const n=Gr(t.boxes,zL),r=e.Ny(i).Wp();let h=Se.ZERO;for(const i of t.boxes){if(i instanceof GM){h=IA(i.baseMediaDecodeTime,r),i.baseMediaDecodeTime=i.baseMediaDecodeTime.subtract(h);break}if(i instanceof ou){h=IA(Se.fromNumber(i.baseMediaDecodeTime),r),i.baseMediaDecodeTime-=h.toNumber();break}}if(h.isZero())return;const o=Gr(t.boxes,PL);if(void 0!==o&&o.samples.length>0){const t=o.samples;if(!o.flags.sampleDurationPresent){o.flags.sampleDurationPresent=!0;const i=null!=s?s:n.defaultSampleDuration;for(const e of t)e.duration=i}t[0].duration+=h.toNumber(),o.samples=t}}r();var VZ="Mp4Transmuxer",WZ=class extends QX{hOt(t,i){Pi(i);const e=t.ODt,s=ak(Ao(t._Et.JM.JM));if(!s)throw new b("Mp4Transmuxer - Unable to parse "+e.$w+" MP4 initializer.");this.xK=s;const n=function(t){let i,e;for(const s of t.Z)i||(i=s.kZ),e||(e=s.LZ);if(i||e)return{tIt:i,iIt:e,MSt:void 0};return}(s);n&&this.uOt(e,n);const r=function(t){for(const i of t.Z)if(void 0!==i.CZ)return i.CZ;return}(s);void 0!==r&&this.cOt(e,r);const h=function(t){var i;const e=AT(t),s=Gr(e.boxes,SL),n=s.boxes.filter(EL),r=Gr(n,(t=>PZ(t)===gM.AUDIO)),h=Gr(n,(t=>PZ(t)===gM.VIDEO)),o={tIt:{tN:r?YZ(r):void 0},iIt:{tN:h?YZ(h):void 0}},a=null==(i=Gr(s.boxes,CL))?void 0:i.boxes.filter(xL);var u,c;const l=a?{tIt:null!=(u=Gr(a,(t=>t.trackId===o.tIt.tN)))?u:void 0,iIt:null!=(c=Gr(a,(t=>t.trackId===o.iIt.tN)))?c:void 0}:void 0;var d,f;if(l&&(o.tIt.gD=null==(d=l.tIt)?void 0:d.defaultSampleDuration,o.iIt.gD=null==(f=l.iIt)?void 0:f.defaultSampleDuration),!r||!h)return{tIt:r?t:void 0,iIt:h?t:void 0,hI:o};const _=BZ(e),g=BZ(e),w=e.boxes.indexOf(s);_.boxes[w]=QZ(s,h),g.boxes[w]=QZ(s,r);const A=_.serialize().join(),v=g.serialize().join();return{tIt:A,iIt:v,hI:o}}(t._Et.JM.JM);if(this.VPt=h.hI,h.iIt){const i=Gr(s.Z,(t=>t.tN===h.hI.iIt.tN)),e={$w:"gOt",JM:{$w:Ho.MH,JM:h.iIt},eut:Tw.Yv,AEt:t.AEt,wOt:{Ast:'video/mp4; codecs="'+i.LZ+'"',uEt:t.uEt},Fm:t.Fm,ODt:t.ODt,zkt:t._Et.zkt};this.Ext(e)}if(h.tIt){const i=Gr(s.Z,(t=>t.tN===h.hI.tIt.tN)),e={$w:"gOt",JM:{$w:Ho.MH,JM:h.tIt},eut:Tw.Gv,AEt:t.AEt,wOt:{Ast:'audio/mp4; codecs="'+i.kZ+'"',uEt:t.uEt},Fm:t.Fm,ODt:t.ODt,zkt:t._Et.zkt};this.Ext(e)}return Promise.resolve()}async aOt(t,i){Pi(i);const e=t.uht.zkt;At.oN(VZ,"Transmuxing fMP4: "+Nt(e.Dnt));const s=t.uht.JM,n=HZ(s.JM,this.xK),r=kh(n.map((t=>t.d8)),Ev);if(void 0!==r&&(e.f8=r,this.dOt(t.ODt)),!this.DLt.nLt(t.AEt)){const s=aa.Ey(e.Fm);if(n.length>0){const i=kh(n.map((t=>t.WPt)),Ev);for(const e of this.$xt)this.DLt._Lt(t.AEt,e,i,s,!1);this.dOt(t.ODt)}this.DLt.nLt(t.AEt)||await hl(this.DLt.hLt(t.AEt),i)}const h=this.DLt.cLt(t.AEt),o=e.f8?this.DLt.lLt(e.f8,e).vp():e.Fm,a=ec(e,o);var u;const c={Uxt:a,Qxt:FX(e,a),Fm:o,ct:null!=(u=e.ct)?u:0,Zy:h.vp(),AEt:t.AEt,ODt:t.ODt,zkt:t.uht.zkt},l=function(t,i){if(void 0===i.tIt.tN)return{tIt:void 0,iIt:t};if(void 0===i.iIt.tN)return{tIt:t,iIt:void 0};const e=AT(t),s=BZ(e),n=BZ(e);for(let t=0;t<e.boxes.length;t++){const r=e.boxes[t];OL(r)&&(s.boxes[t]=FZ(r,i.iIt.tN),n.boxes[t]=FZ(r,i.tIt.tN))}const r=s.serialize().join(),h=n.serialize().join();return{tIt:r,iIt:h}}(s.JM,this.VPt);if(l.iIt){var d;const i=this.VPt.iIt.tN,s=Gr(this.xK.Z,(t=>t.tN===i)),h=Gr(n,(t=>t.tN===i)),o=this.HPt(l.iIt,s,h,null==(d=this.VPt)?void 0:d.iIt.gD,e);this.qPt=s,this.lOt(t.ODt,e,h.d8.bp(r));const a=oe({$w:"uht",JM:{$w:Ho.MH,JM:o},eut:Tw.Yv},c);this.Ext(a)}if(l.tIt){const t=oe({$w:"uht",JM:{$w:Ho.MH,JM:l.tIt},eut:Tw.Gv},c);this.Ext(t)}this.XPt=e,this.ZPt=n}HPt(t,i,e,s,n){if(!function(t){return hr(t)?t.fEt:0===t.WEt&&t.GEt.fEt}(n))return t;if(!this.XPt||!this.qPt||!this.ZPt)return t;const r=this.qPt.tN,h=Gr(this.ZPt,(t=>t.tN===r)),o=this.DLt.lLt(h.KPt,this.XPt),a=this.DLt.lLt(e.d8,n).bp(o).Ny(i.vy);if(a.Tp(aa.zp))return t;if(a.mp(aa.Ey(.5)))return t;const u=hr(n)?n:n.GEt;return At.cIt(VZ,"Stretching first video frame of segment #"+u.XSt+" to fill gap of "+a.vp()+"s"),function(t,i,e,s){const n=AT(t),r=Gr(n.boxes,OL);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof zs&&GZ(t,i,e,s);const n=r.getSize();if(n!==t){const i=n-t;for(const t of r.boxes)t instanceof zs&&BL(t,i)}}return n.serialize().join()}(t,i.vy,a,s)}constructor(...t){super(...t),this.xK=void 0,this.VPt=void 0,this.XPt=void 0,this.ZPt=void 0,this.qPt=void 0}};function HZ(t,i){const e=vm(ds.ST(Ao(t)),xv.CM);if(!e)throw new b("Mp4Transmuxer - Unable to parse segment or part.");return function(t,i){const e=[];for(const n of t.Z){if(!n.ED||0===n.SD.length||0===n.SD[0].OD.length)continue;const t=n.pT.tN,r=Gr(i.Z,(i=>i.tN===t));let h=0,o=1/0,a=0;const u=n.pT.gD||0;for(const t of n.SD)for(const i of t.OD){const t=i.jD||0,e=h+t;var s;h+=null!=(s=i.ct)?s:u;const n=h+t;e<o&&(o=e),n>a&&(a=n)}const c=aa.xp(n.ED.ED,r.vy);e.push({tN:t,WPt:c,d8:c.gm(aa.Op(o,r.vy)),JPt:c.gm(aa.Op(h,r.vy)),KPt:c.gm(aa.Op(a,r.vy))})}return e}(e,i)}var qZ,XZ="MpegtsTransmuxer",ZZ=class extends WZ{hOt(t,i){return super.hOt(t,i)}sOt(t,i){if(super.sOt(t,i),this.tit.$Pt())return;var e;const s=null!=(e=null==i?void 0:i.Dnt)?e:t.Dnt;if(!s)return;/\.(ts|aac|mp3)/i.test(s.zy)&&this.tit.tBt()}iBt(t){let i;return this.eBt.has(t.AEt)?i=this.eBt.get(t.AEt):(i=aZ(t.uht.JM.JM),this.eBt.set(t.AEt,i)),i}async aOt(t,i){Pi(i);const e=this.iBt(t),s=t.uht;if(e!==eZ.VOt&&e!==eZ.WOt)return super.aOt(t,i);if(s.zkt.uEt.some(JZ))throw new ce(le.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.tit.tBt();let r;e===eZ.VOt?(At.oN(XZ,"Transmuxing MPEG-TS: "+Nt(s.zkt.Dnt)),r=await n.sBt({data:s.JM.JM,metadata:this.nBt})):(At.oN(XZ,"Transmuxing raw audio: "+Nt(s.zkt.Dnt)),r=await n.rBt({data:s.JM.JM,metadata:this.nBt})),Pi(i),this.uOt(t.ODt,{tIt:r.metadata.audio_codec,iIt:r.metadata.video_codec,MSt:void 0}),r.metadata.video_frame_rate&&this.cOt(t.ODt,r.metadata.video_frame_rate);const h=$Z(r.metadata.first_decode_timestamp),o=$Z(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?$Z(r.metadata.first_video_presentation_timestamp):void 0;if(s.zkt.f8=o,this.dOt(t.ODt),void 0!==a&&this.lOt(t.ODt,s.zkt,function(t,i){let e=t.bp(i);return e.Dp(aa.zp)&&(e=e.gm(kv())),e}(a,o)),!this.DLt.nLt(t.AEt)){const e=aa.Ey(s.zkt.Fm);for(const i of this.$xt)this.DLt._Lt(t.AEt,i,h,e,!0);this.dOt(t.ODt),this.DLt.nLt(t.AEt)||await hl(this.DLt.hLt(t.AEt),i)}const u=this.DLt.fLt(h,s.zkt);this.nBt=r.metadata;const c=this.DLt.lLt(o,s.zkt).vp(),l=ec(s.zkt,c);var d;const f={Uxt:l,Qxt:FX(s.zkt,l),Fm:c,ct:null!=(d=s.zkt.ct)?d:0,Zy:u.vp(),AEt:t.AEt,ODt:t.ODt,zkt:s.zkt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.$xt){const i=oe({$w:"uht",JM:void 0,eut:t},f);this.Ext(i)}return}const _=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.hBt||this.oBt!==t.AEt||!ms(this.hBt,r.data.audio_init))){const i=this.DLt.lLt(s.zkt.f8,s.zkt).vp(),e={$w:"gOt",JM:{$w:Ho.MH,JM:r.data.audio_init},eut:Tw.Gv,AEt:t.AEt,wOt:{Ast:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',uEt:s.zkt.uEt},Fm:i,ODt:t.ODt,zkt:s.zkt};this.hBt=r.data.audio_init,this.oBt=t.AEt,this.Ext(e)}const i=oe({$w:"uht",JM:{$w:Ho.MH,JM:r.data.audio_media},eut:Tw.Gv},f);this.Ext(i)}else if(t.uht.zkt.FEt&&na(this.$xt,Tw.Gv)){const t=oe({$w:"uht",JM:void 0,eut:Tw.Gv},f);this.Ext(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.aBt||this.uBt!==t.AEt||!ms(this.aBt,r.data.video_init))){const i=this.DLt.lLt(s.zkt.f8,s.zkt).vp(),e={$w:"gOt",JM:{$w:Ho.MH,JM:r.data.video_init},eut:Tw.Yv,AEt:t.AEt,wOt:{Ast:'video/mp4; codecs="'+r.metadata.video_codec+'"',uEt:s.zkt.uEt},Fm:i,ODt:t.ODt,zkt:s.zkt};this.aBt=r.data.video_init,this.uBt=t.AEt,this.cBt=ak(Ao(r.data.video_init)),this.Ext(e)}const i=this.cBt.Z[0],e=HZ(r.data.video_media,this.cBt)[0],n=this.HPt(r.data.video_media,i,e,void 0,s.zkt);this.qPt=i;const h=oe({$w:"uht",JM:{$w:Ho.MH,JM:n},eut:Tw.Yv},f);this.Ext(h),_.push(e)}else if(t.uht.zkt.FEt&&na(this.$xt,Tw.Yv)){const t=oe({$w:"uht",JM:void 0,eut:Tw.Yv},f);this.Ext(t)}this.XPt=s.zkt,this.ZPt=_}s_(){this.hBt=void 0,this.aBt=void 0,super.s_()}constructor(t,i,e,s){super(i,e,s),this.nBt=void 0,this.hBt=void 0,this.aBt=void 0,this.cBt=void 0,this.oBt=0,this.uBt=0,this.eBt=Ye(),this.tit=t}},KZ=class{Ect(t,i,e){return new ZZ(this,t,i,e)}};function JZ(t){return t.mS===xu.NSt}function $Z(t){return aa.xp(Se.fromBits(t.low,t.high),t.base)}r(),r(),function(t){t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4"}(qZ||(qZ={}));var tK=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=_n.NE;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module(vi("AGFzbQEAAAA="))}catch(t){return!1}}();return tK=()=>t,t};var iK=class{sBt(t){return this.lBt(qZ.MPEGTS_TO_FMP4,t)}rBt(t){return this.lBt(qZ.RAW_AUDIO_TO_FMP4,t)}kPt(){const t=LZ(this.CPt,this.xPt,{name:"THEOplayer transmux worker"});return t.ln("message",this.OPt),t.ln("error",this.Btt),t}lBt(t,i){const e=++this.jPt,s={type:t,id:e,input:i},n=new No;return this.QPt.set(e,n),this.lPt.cPt(s),n.nL}Xf(t){void 0===t&&(t=new sa),this.QPt.forEach((i=>i.sL(t))),this.QPt.clear(),this.lPt._Pt()}constructor(t){this.jPt=0,this.QPt=Ye(),this.OPt=t=>{const i=t.data;if(void 0!==i.requestId){const t=this.QPt.get(i.requestId);if(!t)return;this.QPt.delete(i.requestId),i.success?t.eL(i.output):t.sL(new ce(i.errorCode,i.error))}else i.success||this.Xf(new ce(i.errorCode,i.error))},this.Btt=t=>{const i=new ce(le.MEDIA_DECODE_ERROR,t.error.message,t.error);this.Xf(i)},this.xPt=t;const i=tK()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.CPt=fe.Sv(i,t)}catch(t){throw new ce(le.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.lPt=this.kPt()}},eK=class extends KZ{$Pt(){return void 0!==this.lPt}tBt(){var t;return null!=(t=this.lPt)?t:this.lPt=new iK(this.dBt)}Xf(){this.lPt&&(this.lPt.Xf(),this.lPt=void 0)}constructor(t){super(),this.dBt=t,this.lPt=void 0}},sK=class{g8(){return new eK(this.dBt)}constructor(t){this.dBt=t}},nK=class extends wZ{xg(){if(yU(this.sP))return this.sP.xg()}get Lg(){return!1}set Lg(t){}async cn(){var t;await super.cn(),null==(t=this.XTt)||t.cn()}constructor(t,i,e,s,n,r,h){super(t,i,e,s,n,r,h),_n.KE&&(this.XTt=new WW(this))}},rK=class extends nK{async cn(){await super.cn(),await this.CP.kP(this.sP)}constructor(t,i,e,s,n,r,h){const o=new Zu(t);super(o.XP(Tw.Yv),i,e,s,n,r,h),this.CP=o}},hK=class extends AZ{async ZP(t,i){return!!Lk(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(_n.Va||_n.Tb))&&(!i.manifestMetadataTrack&&super.ZP(t,i)))}async Vit(t){return(!t.clearkey||!_n.KE)&&super.Vit(t)}};lu(new class extends hK{ej(t,i,e,s,n,r){return new rK(i,e,n,zZ(s.libraryLocation),new sK(s.libraryLocation),new St(ti.kb.fet,ti.kb.let,ti.kb.det,ti.kb.wet),s)}KP(){return!0}constructor(...t){super(...t),this.JP=si.Lv}}),At.Rt=()=>Boolean(null==s?void 0:s.THEOplayerDebugLogsEnabled),r(),r(),r(),r();var oK=class{Xit(t,i){return Promise.resolve(!1)}Kit(t,i){return Promise.resolve(void 0)}Wit(t){return Promise.resolve(void 0)}qW(t){return Promise.resolve(void 0)}},aK=class extends i{fBt(){var t;return null==(t=this._Bt)?void 0:t.vDt}gn(t){W(hu((()=>this.gBt(t)),t))}async gBt(t){await this.Ddt.HLt(t),this.wBt&&(this.ABt(this.wBt.ji,this.wBt.Ti),this.wBt=void 0),this.C1=!0}vBt(t,i){this.C1?this.ABt(t,i):this.wBt={ji:t,Ti:i}}ABt(t,i){const e=this.mBt(t,i),s=null==e?void 0:e.gIt[0];s!==this._Bt&&(this.pBt(),void 0!==s&&(this._Bt=s,this.yBt=new mX(this.Ddt,s),this.yBt.Kkt()))}pBt(){this._Bt=void 0,this.yBt&&(this.yBt.Xf(),this.yBt=void 0)}mBt(t,i){const e=Gr(this.Ddt.br.fIt,(e=>void 0!==e.nIt&&e.nIt.ji===t&&e.nIt.Ti===i));return null!=e?e:this.Ddt.br.fIt[0]}cn(){this.Bo(),this.pBt(),this.Ddt.Xf()}constructor(i,e,s){super(),this._Bt=void 0,this.yBt=void 0,this.wBt=void 0,this.MBt=()=>{this.mo(new KQ)},this.lc=i,this.Ddt=new aX(s,new oK,i.useCredentials,i.src),this.Ddt.ln(t.OA,this.Ds),this.C1=!1}};r();var uK=class extends ha{get ht(){return this._4.ht}get M_(){return this._4.M_}get N_(){return this._4.N_}set N_(t){this._4.N_=t}get E_(){return this._4.E_}set E_(t){this._4.E_=t}get ct(){return this._4.ct}get C_(){return this._4.C_}get j_(){return this._4.j_}get P_(){return this._4.P_}get lt(){return this._4.lt}get R_(){return this._4.R_}get Q_(){return this._4.Q_}get Y_(){return this._4.Y_}set Y_(t){this._4.Y_=t}get W_(){return this._4.W_}get q_(){return this._4.q_}get Z_(){return this._4.Z_}set Z_(t){this._4.Z_=t}get eg(){return this._4.eg}get hg(){return this._4.hg}set hg(t){this._4.hg=t}get cg(){return this._4.cg}get fg(){return this._4.fg}get gg(){return this._4.gg}get lP(){return this._4.lP}get nt(){return this._4.nt}get vg(){return this._4.vg}get rt(){return this._4.rt}get Mg(){return this._4.Mg}get Ng(){return this._4.Ng}set Ng(t){this._4.Ng=t}get Sg(){return this._4.Sg}get Lg(){return this._4.Lg}set Lg(t){this._4.Lg=t}get fP(){return this._4.fP}Ug(){return this._4.Ug()}Cg(){return this._4.Cg()}xg(){return this._4.xg()}be(){return this._4.be()}Yg(){return this._4.Yg()}Gg(){return this._4.Gg()}Pg(){return this._4.Pg()}Bg(){return this._4.Bg()}Wn(){return this._4.Wn()}ca(t,i,e){return this._4.ca(t,i,e)}ge(){return this._4.ge()}Qg(){return this._4.Qg()}Fg(){return this._4.Fg()}cn(){this.Bo();for(const t of LI)this._4.rn(t,this.Ds);return this._4.cn()}constructor(t){super(),this._4=t;for(const t of LI)this._4.ln(t,this.Ds)}},cK=class extends uK{async ca(t,i,e){await super.ca(t,i,e),t.hlsDateRange&&this.pnt(t,i,e)}pnt(i,e,s){this.TBt=new aK(i,e,this.NBt),this.TBt.ln(t.OA,this.handleManifestUpdate),this.TBt.gn(s)}Wn(){return this._kt&&(this.nt.it(this._kt),this._2.it(this._kt),this._kt.cn(),this._kt=void 0,this.DBt=!1),this.TBt&&(this.TBt.cn(),this.TBt=void 0),this._2.Wn(),super.Wn()}cn(){return this.rn(t.QA,this.nPt),this.TBt&&(this.TBt.cn(),this.TBt=void 0),this._2.cn(),super.cn()}constructor(i,e,s){super(i),this.TBt=void 0,this.DBt=!1,this._kt=void 0,this.handleManifestUpdate=()=>{const t=this.TBt.fBt();if(t){const i=this.lP;if(i){const e=i.getTime();let s=this._kt;s||(s=new Rq,this._kt=s),s.Ln(t.vEt,(t=>(t.getTime()-e)/1e3)),!this.DBt&&s.L.U>0&&(this.nt.tt(s),this._2.tt(s),this.DBt=!0)}}},this.nPt=()=>{this.TBt&&this.TBt.vBt(this.Mg,this.vg)},this.NBt=e,this.WW=s,this._2=new hx(this),this.ln(t.QA,this.nPt)}};!function(t){Iu.$P().tB(t)}((function(t,i,e){return new cK(t,i,e)})),r(),r(),r(),r();var lK,Ca=class extends Jo{get name(){return"CastError"}constructor(t,i=""){super("An error occurred while casting."),this.errorCode=t,this.description=i}},dK="//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js";function fK(){return lK||(lK=async function(){gK()||await async function(){const t=new No,i=s.__onGCastApiAvailable;return s.__onGCastApiAvailable=(e,n)=>{e?t.eL():t.sL(new b(n)),s.__onGCastApiAvailable=i,i&&i(e,n)},t.nL}();_K()||await be(100);_K()||(fe.Vv('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await function(t){return new Promise(((i,e)=>{const s=h.createElement("script");s.onload=()=>i(),s.onerror=t=>e((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(h.head||h.documentElement).appendChild(s)}))}(dK));return}().catch((()=>{throw new Ca("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}))),lK}function _K(){return Boolean("undefined"!=typeof cast&&cast.framework)}function gK(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function wK(t,i,e,s){if(z_(i))for(const e of _.keys(i)){if("type"===e||"images"===e)continue;const s=i[e];z_(s)&&(t[e]=s)}!function(t,i,e,s){if(!z_(e)&&!z_(null==i?void 0:i.images))return;t.images=[],e&&t.images.push(new s.Image(e));if(null==i?void 0:i.images)if(ae(i.images))t.images.push(new s.Image(i.images));else if(Yn(i.images))for(const e of i.images){let i;var n,r;if(ae(e))i=new s.Image(e);else i=new s.Image(e.src),i.height=null!=(n=e.height)?n:null,i.width=null!=(r=e.width)?r:null;t.images.push(i)}}(t,i,e,s)}function AK(t,i,e){return void 0===e&&(e=chrome),function(t,i,e){switch(null==t?void 0:t.type){case"movie":{const s=new e.MovieMediaMetadata;return wK(s,t,i,e),s}case"audio":{const s=new e.MusicTrackMediaMetadata;return wK(s,t,i,e),!z_(s.artist)&&z_(t.artistName)&&(s.artist=t.artistName),s}case"tv-show":{const s=new e.TvShowMediaMetadata;return wK(s,t,i,e),!z_(s.title)&&z_(t.episodeTitle)&&(s.title=t.episodeTitle),!z_(s.season)&&z_(t.seasonNumber)&&(s.season=t.seasonNumber),!z_(s.episode)&&z_(t.episodeNumber)&&(s.episode=t.episodeNumber),s}default:{const s=new e.GenericMediaMetadata;return wK(s,t,i,e),s}}}(t,i,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(e))}function Wn(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function vK(t){if(t.items&&t.items.length>0&&t.currentItemId>=0)return Gr(t.items,(i=>i.itemId===t.currentItemId))}r(),r(),r(),r(),r();var mK,mr="urn:x-cast:com.theoplayer.cast";r(),r(),function(t){t.IBt="theoplayer_receiver_info",t.SBt="theoplayer_trackpropertychange",t.EBt="theoplayer_propertychange"}(mK||(mK={})),r();var pK;(pK||(pK={})).SKIP_AD="SKIP_AD",r();function Ir(t){h.createElement("img").src=t}r(),r(),r();var yK=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function MK(t){if(!ae(t))return;const i=t.match(yK);return i?3600*C(i[1],10)+60*C(i[2],10)+Number(i[3])+(Number(i[4])||0)/1e3:void 0}function rc(t){if(void 0===t)return;const i=t.match(/^([1-9]?\d|100)%$/);return i?C(i[1])/100:void 0}function TK(t,i){return"vmap"===t.type||!z_(t.type)&&!z_(i)}function NK(t,i){return"vast"===t.type||!z_(t.type)&&z_(i)}r(),r(),r();var hc=class{},DK=class extends hc{get bBt(){return this.Tc}LBt(){return null!=this.kBt||(this.kBt=Nh(this.Tc,(t=>t.LBt()))),this.kBt}constructor(t){super(),this.Tc=t.sort(((t,i)=>t.MD-i.MD))}};r(),r();var oc=class extends hc{get o(){return this.CBt}get MD(){return this.xBt}get OBt(){return this.jBt}constructor(t,i){super(),this.CBt=t,this.xBt=i,this.jBt=!1}},IK=class extends oc{get zBt(){return this.PBt}get BBt(){return this.RBt}get UBt(){return this.QBt}get FBt(){return this.YBt}get lt(){return this.hP}LBt(){if(void 0===this.GBt){let t,i,e,s=[];for(const n of this.PBt)n.VBt&&(t=n.VBt),n.WBt&&(i=n.WBt),n.HBt&&(e=n.HBt),s=s.concat(n.universalAdIds);this.GBt={FBt:this.FBt,VBt:t,qBt:i,HBt:e,lt:this.lt,XBt:s}}return[this.GBt]}constructor(t,i,e,s,n,r,h){super(t,i),this.RBt=e,this.QBt=s,this.YBt=n,this.PBt=r,this.hP=h}};r(),r();var SK,bc=class{get ZBt(){return this.KBt}get JBt(){return this.$Bt}constructor(t,i){this.KBt=t,this.$Bt=i}},EK=class{get tRt(){return this.iRt}get eRt(){return this.sRt}get nRt(){return this.rRt}get hRt(){return this.oRt}get Ul(){return this.aRt}set Ul(t){this.aRt=t}get uRt(){return this.cRt}get lRt(){return this.dRt}fRt(){this.dRt=!0}get BBt(){return this.RBt}constructor(t,i,e,s,n,r){this.iRt=t,this.sRt=i,this.rRt=e,this.oRt=s,this.dRt=!1,this.cRt=n,this.RBt=r}};r(),function(t){t._Rt="all",t.gRt="any",t.cB="none"}(SK||(SK={}));var bK=class{get wRt(){return this.ARt}get vRt(){return this.mRt}constructor(t,i){this.ARt=t,this.mRt=i}},LK=class{get o(){return this.ym}get ji(){return this.pk}get Ti(){return this.yk}get pRt(){return this.yRt}get MRt(){return this.TRt}get NRt(){return this.DRt}get IRt(){return this.SRt}get ERt(){return this.bRt}get LRt(){return this.kRt}get CRt(){return this.xRt}get tRt(){return this.iRt}get eRt(){return this.sRt}get nRt(){return this.rRt}get ORt(){return this.jRt}get JBt(){return this.zRt}get PRt(){return this.BRt}constructor(t,i,e,s,n,r,h,o,a,u,c,l,d,f,_,g){this.pk=t,this.yk=i,this.ym=e,this.yRt=s,this.TRt=n,this.DRt=r,this.SRt=h,this.bRt=o,this.kRt=a,this.xRt=u,this.iRt=c,this.sRt=l,this.rRt=d,this.jRt=f,this.zRt=_,this.BRt=g}};r();var kK=class{get id(){return this.ym}get uri(){return this.XEt}constructor(t,i){this.ym=t,this.XEt=i}},_r=class{get RRt(){return this.URt}get QRt(){return this.FRt}get YRt(){return this.GRt}get VRt(){return this.WRt}constructor(t,i,e,s){this.URt=t,this.FRt=i,this.GRt=e,this.WRt=s}},CK=class extends oc{get FBt(){return this.YBt}get HRt(){return this.qRt}get XRt(){return this.ZRt}get zBt(){return this.PBt}get KRt(){return this.JRt}get $Rt(){return this.tUt}get lt(){return this.hP}LBt(){return void 0===this.qRt?[]:(null!=this.kBt||(this.kBt=this.qRt.LBt().map((t=>this.iUt(t)))),this.kBt)}iUt(t){let i,e,s;for(const t of this.zBt)t.VBt&&(i=t.VBt),t.WBt&&(e=t.WBt),t.HBt&&(s=t.HBt);const n=t.FBt.concat(this.FBt);let r=t.VBt;if(i&&t.VBt){const e=new _r(t.VBt.eUt.RRt,t.VBt.eUt.QRt,t.VBt.eUt.YRt.concat(i.eUt.YRt),t.VBt.eUt.VRt.concat(i.eUt.VRt));r=t.VBt,r.eUt=e,r.JBt=r.JBt.concat(i.JBt)}let h=t.qBt;if(e&&e.ZBt){var o,a;const s=[];for(const t of e.ZBt)s.concat(t.hRt.YRt);const n=[];var u,c;for(const e of null!=(u=null==(o=t.qBt)?void 0:o.ZBt)?u:[]){var l,d,f;const r=new _r(e.hRt.RRt,e.hRt.QRt,e.hRt.YRt.concat(s),(null!=(d=null==(l=t.VBt)?void 0:l.eUt.VRt)?d:[]).concat(null!=(f=null==i?void 0:i.eUt.VRt)?f:[]));n.push(new EK(e.tRt,e.eRt,e.nRt,r,e.uRt,e.BBt))}h=new bc(n,(null!=(c=null==(a=t.qBt)?void 0:a.JBt)?c:[]).concat(e.JBt))}let _=t.HBt;if(_){var g;let i=_.wRt;var w,A;s&&s.wRt&&(i=s.wRt),_=new bK(i,(null!=(w=null==(g=t.HBt)?void 0:g.vRt)?w:[]).concat(null!=(A=null==s?void 0:s.vRt)?A:[]))}let v=t.lt;return this.lt&&(v=this.lt),{FBt:n,VBt:r,qBt:h,HBt:_,lt:v,XBt:t.XBt}}constructor(t,i,e,s,n,r,h,o,a){super(t,i),this.YBt=e,this.qRt=s,this.ZRt=n,this.PBt=r,this.JRt=h,this.tUt=o,this.hP=a}};r();var xK=class{get o(){return this.ym}get sUt(){return this.nUt}get rUt(){return this.hUt}get ERt(){return this.bRt}get VBt(){return this.oUt}get WBt(){return this.aUt}get HBt(){return this.uUt}get universalAdIds(){return this.cUt}constructor(t,i,e,s,n,r,h,o){this.ym=t,this.nUt=i,this.hUt=e,this.bRt=s,this.oUt=n,this.aUt=r,this.uUt=h,this.cUt=o}};r();var Xs,OK=class{get ct(){return this.lUt}get dUt(){return this.fUt}get JBt(){return this.$Bt}set JBt(t){this.$Bt=t}set eUt(t){this._Ut=t}get eUt(){return this._Ut}get gUt(){return this.wUt}set gUt(t){this.wUt=t}get AUt(){return this.dRt}get Ul(){return this.aRt}set Ul(t){this.aRt=t}get uRt(){return this.cRt}get BBt(){return this.RBt}fRt(){this.dRt=!0}constructor(t,i,e,s,n,r,h){this.lUt=t,this.fUt=i,this.$Bt=e,this._Ut=s,this.wUt=n,this.dRt=!1,this.cRt=r,this.RBt=h}};function we(t,i){return PK(t)&&t.getAttribute(i)||void 0}function jK(t,i){return zK(t,i,void 0,!1)}function zK(t,i,e,s){return i===(t.localName?t.localName:t.nodeName)&&(s&&e?e===t.namespaceURI:!e||!t.namespaceURI||e===t.namespaceURI)}function at(t,i){const e=[];for(let s=0;s<t.childNodes.length;s+=1){const n=t.childNodes.item(s);PK(n)&&jK(n,i)&&e.push(n)}return e}function PK(t){return t&&1===t.nodeType}function BK(t,i){const e=(new DOMParser).parseFromString(t,i);if(!e||e.getElementsByTagName("parsererror").length>0)throw new b('Invalid document for MIME type "'+i+'"');return e}function RK(t){return t.replace(/[<>&'"]/g,(t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}}))}function UK(t){return"data:application/xml,"+encodeURIComponent(t)}function QK(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}r(),r(),function(t){t.vUt="mute",t.mUt="unmute",t.yh="pause",t.pUt="resume",t.yUt="rewind",t.MUt="skip",t.TUt="playerExpand",t.NUt="playerCollapse",t._h="fullscreen",t.DUt="exitFullscreen",t.IUt="expand",t.COLLAPSE="collapse",t.Xut="start",t.SUt="firstQuartile",t.EUt="thirdQuartile",t.bUt="midpoint",t.LUt="complete",t.kUt="acceptInvitationLinear",t.CUt="acceptInvitation",t.xUt="timeSpentViewing",t.OUt="otherAdInteraction",t.BA="progress",t.jUt="creativeView",t.zUt="adExpand",t.PUt="adCollapse",t.BUt="minimize",t.RUt="close",t.UUt="closeLinear",t.QUt="overlayViewDuration",t.FUt="breakStart",t.YUt="breakEnd",t.Zo="error"}(Xs||(Xs={}));var FK=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function YK(t){return void 0!==t&&-1!==FK.indexOf(t)}var GK=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function VK(t){return void 0!==t&&-1!==GK.indexOf(t)}var WK=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function HK(t){return void 0!==t&&-1!==WK.indexOf(t)}function qK(t,i){if(void 0===t||""===t||void 0===i)return;let e=t.match(/^(\d+):(\d+):(\d+)$/);return e?S(e[1]||"0")+60*S(e[2]||"0")+S(e[3]||"0"):(e=t.match(/^(100|[1-9]\d|\d)%$/),e?S(e[1]||"0")*i/100:void 0)}var XK=class{get XU(){return this.GUt}get qu(){return this.VUt}get eventURL(){return this.WUt}constructor(t,i,e){this.GUt=t,this.VUt=i,this.WUt=e}};r();var ZK=class{get HUt(){return this.qUt}constructor(t){this.qUt=t}},KK=class extends ZK{get RRt(){return this.URt}get PRt(){return this.BRt}get XUt(){return this.ZUt}constructor(t,i,e,s){super(t),this.ZUt=i,this.URt=e,this.BRt=s}},JK=class extends ZK{constructor(t){super(t)}},$K=class extends ZK{constructor(t){super(t)}};r();var Si={KUt:{rL:100,Gb:"XML parsing error."},JUt:{rL:303,Gb:"Empty or invalid VAST error."},$Ut:{rL:400,Gb:"General linear error"},tQt:{rL:403,Gb:"Unsupported MIME-type or missing mediafiles error"},iQt:{rL:500,Gb:"General nonlinear error"},yU:{rL:900,Gb:"Network error"}},rh=class{get eQt(){return this.sQt}nQt(t){if(!this.eQt)return;const i=this.eQt.replace(/\[ERRORCODE]/,""+t.rL);Ir(i)}constructor(t){this.sQt=t}};r();var Qe,th,bi=class extends Jo{get rQt(){return this.hQt}get oQt(){var t;return null!=(t=this.aQt)?t:900}constructor(t,i,e,s){super(e||i&&tJ[i]||t,s),this.hQt=t,this.aQt=i,this.uQt=e}};!function(t){t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general"}(Qe||(Qe={})),function(t){t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED"}(th||(th={}));var tJ={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};function iJ(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case hi.Lv:case hi.zv:case hi.bv:return!0;default:return!1}}function eJ(t){const i=dN();return!!(iJ(t)||t&&i&&(null==i?void 0:i.canPlayType)&&i.canPlayType(t))||(Nr("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function sJ(t,i){for(const e of i){new rh(e).nQt(t)}}function Nr(t){0}r(),r();var nJ,rJ=class{get cQt(){return this.lQt}get dQt(){return this.fQt}constructor(t,i){this.lQt=t,this.fQt=i}};!function(t){t._Qt="linear",t.gQt="nonlinear",t.wQt="companion",t.AQt="vmap"}(nJ||(nJ={}));var vc,hJ=class t{async vQt(i,e){if(TK(i.sources,i.timeOffset)){const s=await t.mQt(i.sources.src,e),n=s&&s.documentElement;if(!n)throw new bi(Qe.NETWORK,th.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(jK(n,"VMAP"))return await this.pQt(n,i,e);if(jK(n,"VAST")){const t=await this.yQt(n,e,!1);if(t){const e=new cJ("",!0,!0,t);return[new aJ("start",e,vc._Qt,"",[],!1,!0,i)]}return[]}throw new bi(Qe.GENERAL,th.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if(NK(i.sources,i.timeOffset))return[new uJ(String(i.timeOffset),i,e)];throw new bi(Qe.GENERAL,th.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async MQt(i,e,s,n){let r;void 0===n&&(n=[]);try{r=await t.mQt(i,e)}catch(t){throw sJ(t instanceof bi&&t.oQt===th.VAST_MALFORMED_RESPONSE?Si.JUt:Si.yU,n),t}const h=r&&r.documentElement;if(h&&jK(h,"VAST"))return await this.yQt(h,e,s,n)}async TQt(t,i,e,s){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new bi(Qe.GENERAL,th.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.MQt(t.sources.src,s,!1),h=new cJ("",!0,!0,r),o=new aJ(i,h,vc._Qt,"",[],!1,!0,t);return o.NQt=e,o}static async requestSuccessOnly(t,i){let e;try{e=await i.BI(t)}catch(t){throw new bi(Qe.NETWORK,th.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!mc(e))throw new bi(Qe.NETWORK,th.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return e}static async mQt(t,i){const e=new nc({Fu:t,pS:Rt.Eu,mS:Kc.GET}),s=await this.requestSuccessOnly(e,i);try{return function(t){return BK(t,"text/xml")}(await s.JM())}catch(t){throw new bi(Qe.NETWORK,th.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async yQt(t,i,e,s){void 0===s&&(s=[]);const n=[],r=[],h=[];if(t&&jK(t,"VAST")){if(0!==at(t,"Ad").length){for(const e of at(t,"Ad"))try{const t=await this.DQt(e,i,s);0===t.MD?n.push(t):r.push(t)}catch(t){h.push(t)}if(0===n.length&&0===r.length&&h.length>0)throw h[0];return 1===n.length&&0===r.length?n[0]:0===n.length&&0!==r.length?new DK(r):n.length>0||r.length>0?new DK(r.concat(n)):void 0}if(0!==at(t,"Error").length){for(const i of at(t,"Error")){Nr(Si.KUt.Gb);const t=i.textContent;t&&s.push(t),sJ(Si.KUt,s)}throw new bi(Qe.GENERAL,th.VAST_MALFORMED_RESPONSE,"The Ad Server responded with a VAST Error")}if(e)throw sJ(Si.JUt,s),new bi(Qe.PARSING,th.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.")}else if(e)throw sJ(Si.JUt,s),new bi(Qe.PARSING,th.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.")}async pQt(t,i,e){const s=[],n=at(t,"AdBreak");for(const t of n)try{const n=await this.IQt(t,i,e);n&&s.push(n)}catch(t){fe.ctt(t)}return s}async DQt(i,e,s){const n=we(i,"id")||"";let r=D(we(i,"sequence"));r||(r=0);const h=at(i,"InLine"),o=at(i,"Wrapper");if(0!==o.length)return await this.SQt(o[0],n,r,e,s);if(0!==h.length)return t.EQt(h[0],n,r,s);throw new bi(Qe.PARSING,th.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static EQt(i,e,s,n){const r=at(i,"Error")[0];let h;r&&r.textContent&&(h=r.textContent,n.push(h));const o=at(i,"AdSystem")[0];let a,u="";o&&(u=o.textContent||u);const c=at(i,"AdTitle")[0];c&&(a=c.textContent||void 0);const l=[];for(const t of at(i,"Impression"))t.textContent&&l.push(t.textContent);const d=t.bQt(at(i,"Creatives")[0],u,n);return new IK(e,s,u,a,l,d,new rh(h))}async SQt(i,e,s,n,r){const h=at(i,"Error")[0];let o="";h&&h.textContent&&(o=h.textContent,r.push(o));const a=at(i,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of at(i,"Impression"))t.textContent&&c.push(t.textContent);const l=at(i,"VASTAdTagURI")[0];let d="";l&&l.textContent&&(d=l.textContent);const f=await this.MQt(d,n,!0,r),_=at(i,"Creatives")[0];let g=[];_&&(g=t.LQt(_,u,r));let w=CU(we(i,"followAdditionalWrappers"));w||(w=!0);let A=CU(we(i,"allowMultipleAds"));A||(A=!0);let v=CU(we(i,"fallbackOnNoAd"));return v||(v=!1),new CK(e,s,c,f,w,g,A,v,new rh(o))}static LQt(i,e,s){const n=[];for(const r of at(i,"Creative")){let i=we(r,"id");i||(i="");let h=D(we(r,"sequence"));h||(h=0);let o=we(r,"adId");o||(o="");const a=at(r,"Linear")[0];let u;a&&(u=t.kQt(a,"wrapper",i,e,s));const c=at(r,"NonLinearAds")[0];let l,d;if(c)try{d=t.CQt(c,i,e),l=d}catch(t){}const f=at(r,"CompanionAds")[0];let _;f&&(_=t.xQt(f)),n.push(new xK(i,o,h,"",u,l,_,[]))}return n}static bQt(i,e,s){const n=[];for(const r of at(i,"Creative")){let i=we(r,"id");i||(i="");let h=D(we(r,"sequence"));h||(h=0);let o=we(r,"adId");o||(o="");let a=we(r,"apiFramework");a||(a="");const u=at(r,"Linear")[0];let c;if(u)try{c=t.kQt(u,"inline",i,e,s)}catch(t){}const l=at(r,"NonLinearAds")[0];let d,f;if(l)try{f=t.CQt(l,i,e),d=f}catch(t){}const _=at(r,"CompanionAds")[0];let g;_&&(g=t.xQt(_));const w=at(r,"UniversalAdId"),A=t.parseUniversalAdIds(w);n.push(new xK(i,o,h,a,c,d,g,A))}return n}static kQt(i,e,s,n,r){const h=at(i,"Duration")[0];let o=0;if(h)o=MK(h.textContent)||0;else if(!h&&"inline"===e)throw new bi(Qe.PARSING,th.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const a=we(i,"skipoffset");let u=-1;if(a){let t=MK(a);if(void 0===t&&a.indexOf("%")>-1){const i=x.abs(Number(a.replace(/(?![0-9])./g,"")))/100;j(i)||(t=o*i)}void 0!==t&&(u=t)}const c=at(i,"MediaFiles")[0];let l=[];if(c&&(l=function(t,i){const e=[];for(const s of at(t,"MediaFile")){const t=we(s,"delivery"),n=we(s,"type");if(!n){Nr();continue}if(!i(n))continue;let r=D(we(s,"width")),h=D(we(s,"height"));r||(Nr(),r=0),h||(Nr(),h=0);const o={delivery:t,type:n,width:r,height:h,contentURL:""+s.textContent};e.push(o)}return e}(c,eJ)),"inline"===e&&(!c||0===l.length))throw sJ(Si.tQt,r),new bi(Qe.PARSING,th.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const d=at(i,"TrackingEvents")[0];let f=[];d&&(f=t.OQt(d,YK,"linear"));const _=at(i,"VideoClicks")[0],g=t.jQt(_);return new OK(o,l,f,g,u,s,n)}static jQt(i){if(!i)return new _r("","",[],[]);const e=at(i,"ClickThrough")[0];let s,n="";e&&(s=e.textContent||void 0,n=we(e,"id")||"");const r=t.zQt(at(i,"ClickTracking")),h=t.zQt(at(i,"CustomClick"));return new _r(s,n,r,h)}static zQt(t){const i=[];for(const e of t){const t=e.textContent;if(!t)continue;const s=we(e,"id")||"";i.push(new kK(s,t))}return i}static OQt(t,i,e){const s=[];for(const n of at(t,"Tracking")){const r=we(n,"event");if(!i(r)){Nr();continue}let h="";"linear"===e&&(h=we(t,"offset")||"0");const o=n.textContent;o&&s.push(new XK(r,h,o))}return s}static CQt(i,e,s){const n=[];for(const r of at(i,"NonLinear")){const i=at(r,"NonLinearClickThrough")[0];let h;i&&(h=i.textContent||void 0);const o=t.zQt(at(r,"NonLinearClickTracking")),a=at(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=we(a,"creativeType"),i=a.textContent||"",e=at(a.parentNode,"NonLinearClickThrough")[0];let s="";e&&(s=e.textContent||""),u=new KK(i,t,s,"")}const c=t.PQt(r),l=t.parseHtmlResource(r);if(!u&&!c&&!l){Nr();continue}const d=new _r(h,"",o,[]);n.push(new EK(u,c,l,d,e,s))}if(0===n.length)throw new bi(Qe.PARSING,th.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=at(i,"TrackingEvents")[0];let h=[];return r&&(h=t.OQt(r,VK,"nonlinear")),new bc(n,h)}static parseUniversalAdIds(t){const i=[];for(const r of t){var e;const t=null!=(e=we(r,"idRegistry"))?e:"";var s,n;const h=null!=(n=null!=(s=we(r,"idValue"))?s:r.textContent)?n:"";i.push(new rJ(t,h))}return i}static xQt(i){let e=we(i,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(e)||(e=SK.cB);const s=[];for(const e of at(i,"Companion")){let i=D(we(e,"width")),n=D(we(e,"height")),r=we(e,"id"),h=D(we(e,"assetWidth")),o=D(we(e,"assetHeight")),a=D(we(e,"expandedWidth")),u=D(we(e,"rxpandedHeight")),c=we(e,"apiFramework"),l=we(e,"adSlotId"),d=D(we(e,"pxratio"));const f=at(e,"AltText")[0];let _=f?f.textContent:"";i||(Nr(),i=0),n||(Nr(),n=0),r||(r=""),h||(h=0),o||(o=0),a||(a=0),u||(u=0),c||(c=""),l||(l=""),d||(d=1),_||(_="");const g=t.BQt(e),w=t.PQt(e),A=t.parseHtmlResource(e),v=at(e,"TrackingEvents")[0];let m=[];v&&(m=t.OQt(v,HK,"companion"));const p=at(e,"CompanionClickThrough")[0];let y;p&&(y=p.textContent||void 0);const M=t.zQt(at(e,"CompanionClickTracking"));(g||w||A)&&s.push(new LK(i,n,r,h,o,a,u,c,l,d,g,w,A,new _r(y,"",M,[]),m,_))}return new bK(e,s)}static BQt(t){const i=at(t,"StaticResource")[0];let e;if(i&&i.parentNode){let t=we(i,"creativeType");t||(t="");const s=i.textContent,n=at(i.parentNode,"AltText")[0],r=at(i.parentNode,"CompanionClickThrough")[0];let h,o="";n&&(o=n.textContent||""),r&&(h=r.textContent||void 0),s&&(e=new KK(s,t,h,o))}return e}static PQt(t){const i=at(t,"IFrameResource")[0];let e;if(i){const t=i.textContent||"";e=new JK(t)}return e}static parseHtmlResource(t){const i=at(t,"HTMLResource")[0];let e;if(i){const t=i.textContent||"";e=new $K(t)}return e}async IQt(i,e,s){const n=we(i,"timeOffset")||"0",r=we(i,"breakType")||vc.Hv;let h=we(i,"breakId"),o=CU(we(i,"repeatAfter"));if(void 0===h&&(h=""),void 0===o&&(o=!1),!(void 0!==vo.RQt(n)))throw new bi(Qe.PARSING,th.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=at(i,"AdSource")[0],u=at(i,"TrackingEvents")[0];let c=[];u&&(c=t.OQt(u,QK,"vmap"));let l=we(a,"id");l||(l="");let d=CU(we(a,"allowMultipleAds"));void 0===d&&(d=!0);let f=CU(we(a,"followRedirects"));f||(f=!0);const _=at(a,"AdTagURI")[0];let g="";const w=at(a,"VASTAdData")[0];if(!_||!_.textContent){if(w){if(w.firstElementChild&&zK(w.firstElementChild,"VAST")){const t=await this.yQt(w.firstElementChild,s,!1);if(t){const i=new cJ(l,d,f,t);return new aJ(n,i,r,h,c,o,!1,e)}return}throw new bi(Qe.PARSING,th.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new bi(Qe.PARSING,th.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{g=_.textContent;const t=Zr(e);return t.sources.src=g,new uJ(n,t,s)}catch(t){return}}};!function(t){t.Hv="",t._Qt="linear",t.UQt="nonlinear",t.QQt="display"}(vc||(vc={}));var oJ,vo=class{static FQt(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static YQt(t){}static GQt(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static VQt(t){const i=t.split(":");let e=0;return e+=3600*Number(i[0]),e+=60*Number(i[1]),e+=Number(i[2]),e}static WQt(t){if(t<=0)return"00:00:00.000";const i=x.floor(t),e=t-i;return this.HQt(i/3600,2)+":"+this.HQt(i/60%60,2)+":"+this.HQt(i%60,2)+"."+this.HQt(1e3*e,3)}static HQt(t,i){return("00"+x.floor(t)).slice(-i)}static qQt(t,i){const e=this.RQt(t);if(0===e)switch(t){case"start":return 0;case"end":return-1}else{if(2===e)return rc(t)*i;if(1===e)return MK(t);if(3===e)return this.GQt(t);if(4===e){const i=Number(t);if(!j(i)&&i>=-1)return i}}}static RQt(t){return"start"===t||"end"===t?0:void 0!==MK(t.toString())?1:void 0!==rc(t.toString())?2:void 0!==this.YQt(t.toString())?3:j(Number(t))?void 0:4}};!function(t){t[t.N5=0]="N5",t[t.XQt=1]="XQt",t[t.ZQt=2]="ZQt",t[t.KQt=3]="KQt",t[t.JQt=4]="JQt"}(oJ||(oJ={}));var Er,aJ=class{get $Qt(){return this.tFt}get hEt(){return this.iFt}get gUt(){return this.wUt}set gUt(t){this.wUt=t}get JBt(){return this.zRt}get eFt(){return this.sFt}get nFt(){return this.rFt}get l7(){return this.hFt}get oFt(){return this.NQt.ql}get W(){return!0}Pn(){return Promise.resolve()}get NQt(){return this.aFt}set NQt(t){this.aFt=t}constructor(t,i,e,s,n,r,h,o){this.wUt=-1,this.tFt=i,this.iFt=t,this.uFt=e,this.sFt=s,this.rFt=r,this.zRt=n,this.cFt=h,this.hFt=o}},uJ=class{get $Qt(){return this.aRt.$Qt}get hEt(){return this.aRt.hEt}get gUt(){return this.aRt.gUt}set gUt(t){this.aRt.gUt=t}get JBt(){return this.aRt.JBt}get eFt(){return this.aRt.eFt}get nFt(){return this.aRt.nFt}get l7(){return this.aRt.l7}get oFt(){return this.aRt.oFt}get W(){return this.lFt}Pn(){var t;return null!=(t=this.dFt)?t:this.dFt=this.Ztt()}async Ztt(){const t=new hJ;this.aRt=await t.TQt(this.l7,this.hEt,this.NQt,this.LS),this.lFt=!0}get NQt(){return this.aRt.NQt}set NQt(t){this.aRt.NQt=t}constructor(t,i,e){this.lFt=!1,this.LS=e,this.aRt=new aJ(t,void 0,"","",[],!1,!1,i)}},cJ=class{get o(){return this.ym}get KRt(){return this.fFt}get _Ft(){return this.gFt}get bBt(){return this.wFt}constructor(t,i,e,s){this.ym=t,this.fFt=i,this.wFt=s,this.gFt=e}};function lJ(t,i){let e;if(t.vastAdsRequest&&(e=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return UK(t.adsResponse);return}(t.vastAdsRequest)),!e){const i=function(t){const i=t.contentUrl||t.contentId;if(!i)return;const e=t.contentType||"video/mp4",s=cw(e)||pa(t.contentType)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+vo.WQt(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+vo.WQt(t.whenSkippable)+'"':"",h='<MediaFile delivery="'+s+'" type="'+e+'">'+RK(i)+"</MediaFile>",o=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+RK(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+h+"</MediaFiles>"+o+"</Linear>",u=t.title?"<AdTitle>"+RK(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);i&&(e=UK(i))}const s=t.customData;if(e){const n={integration:null==s?void 0:s.integration,sources:{src:e,type:"vast"},timeOffset:i};return n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}!function(t){t.AFt="error",t.vFt="sourceupdate"}(Er||(Er={}));var dJ=class extends gg{constructor(t){super("error"),this.lt=t}},fJ=class extends gg{constructor(t,i){super("sourceupdate"),this.bt=t,this.cc=i}},_J=class extends i{get ZT(){return this.mFt}pFt(t){this.yFt.pFt(t)}MFt(t){this.yFt.MFt(t)}TFt(t){this.yFt.TFt(t)}NFt(t){this.yFt.NFt(t)}DFt(t){this.mFt.addUpdateListener(t)}IFt(t){this.mFt.removeUpdateListener(t)}SFt(){const t=new No,i=new chrome.cast.media.GetStatusRequest;return this.mFt.getStatus(i,(()=>{t.eL({bt:this.S_(),cc:this.Oa()})}),(i=>t.sL(i))),t.nL}S_(){var t;return null==(t=this.mFt.customData)?void 0:t.currentSource}Oa(){var t;let i;if(null==(t=this.bFt.EFt())?void 0:t.version){var e;i=null==(e=this.mFt.customData)?void 0:e.sourceDescription}else{var s;const t=null==(s=vK(this.mFt))?void 0:s.customData;(function(t){return lt(t)&&t.theoplayer_version>=1&&z_(t.streamStart)&&z_(t.isLive)&&z_(t.sourceDescription)})(t)&&(i=t.sourceDescription),i||(i=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:gJ(t)}}(this.mFt.media))}return i}Pg(){const t=new chrome.cast.media.PauseRequest;this.mFt.pause(t,xs,this.LFt)}Rg(){const t=new chrome.cast.media.StopRequest;this.mFt.stop(t,xs,this.LFt)}Bg(){const t=new chrome.cast.media.PlayRequest;this.mFt.play(t,xs,this.LFt)}Em(t,i){const e=new chrome.cast.media.SeekRequest;return e.currentTime=t,e.resumeState=i?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise(((t,i)=>{this.mFt.seek(e,t,(t=>{var e;i(new Ca(Wn(t.code),null!=(e=t.description)?e:void 0))}))}))}J_(t){this.yFt.e8(mr,function(t){return{type:mK.EBt,properties:{playbackRate:t}}}(t)).catch(this.kFt)}CFt(t){const i=new chrome.cast.media.EditTracksInfoRequest(t);this.mFt.editTracksInfo(i,xs,this.LFt)}xFt(){return this.mFt.getEstimatedTime()}OFt(){return this.mFt.getEstimatedBreakClipTime()}jFt(){return this.mFt.getEstimatedBreakTime()}zFt(){this.yFt.e8("urn:x-cast:com.google.cast.media",{type:pK.SKIP_AD,requestId:this.PFt++,mediaSessionId:this.mFt.mediaSessionId}).catch(this.kFt)}cn(){this.Bo()}constructor(t,i,e){super(i),this.PFt=0,this.kFt=t=>{this.mo(new dJ(t))},this.LFt=t=>{var i;const e=new Ca(Wn(t.code),null!=(i=t.description)?i:void 0);this.kFt(e)},this.bFt=t,this.yFt=i,this.mFt=e}};function gJ(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?Nh(t.breaks,(i=>function(t,i){const e=[];if(t.isWatched)return e;for(const s of t.breakClipIds){const n=Gr(i,(t=>t.id===s));if(n){const i=lJ(n,t.position);i&&e.push(i)}}return e}(i,t.breakClips))):[]}r();var er,wJ=class{BFt(t,i){this.bFt.addMessageListener(t,i)}RFt(t,i){this.bFt.removeMessageListener(t,i)}e8(t,i){return new Promise(((e,s)=>{this.bFt.sendMessage(t,i,e,(t=>{var i;s(new Ca(Wn(t.code),null!=(i=t.description)?i:void 0))}))}))}cn(){}constructor(t){this.bFt=t}};function AJ(t){return"vmap"===t||"adrule"===t}function gc(t){if(t)return ae(t)?{src:P(t),type:void 0}:function(t){return lt(t)&&Boolean(t.src)}(t)?{src:P(t.src),type:vJ(t.type)}:void 0}function vJ(t){if(ae(t)){const i=t.toLowerCase();switch(i){case"vast":case"vmap":case"adrule":return i;default:return void ji("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||ji("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function lh(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return yK.test(t)}(t))return vo.VQt(t);if(mJ(t))return t}return Number(t)>=0?Number(t):void 0}}function mJ(t){return new RegExp(/^\d{1,2}%$/).test(t)}function pJ(t){const i=[],e=(t,s)=>{if(Yn(s))for(let i=0,n=s.length;i<n;i++){const n=lt(s[i])&&s[i]?String(i):"";e(t+"["+encodeURIComponent(n)+"]",s[i])}else if(lt(s))for(const i of _.keys(s))e(t+"["+encodeURIComponent(i)+"]",s[i]);else((t,e)=>{i.push(t+"="+encodeURIComponent(null!=e?e:""))})(t,String(s))};for(const i of _.keys(t))e(encodeURIComponent(i),t[i]);return i.join("&")}r(),r(),r(),function(t){t.IBt="receiver_info",t.KSt="event",t.UFt="propertychange",t.SBt="trackevent"}(er||(er={}));var gi,yJ=class{QFt(t){let i;try{i=JSON.parse(t)}catch(t){0}return i}pFt(t){this.FFt.push(t)}MFt(t){Et(this.FFt,t)}TFt(t){this.YFt.push(t)}NFt(t){Et(this.YFt,t)}GFt(t){this.VFt=t}e8(t,i){return this.WFt.e8(t,i)}cn(){this.WFt.RFt(mr,this.HFt),Ri(this.YFt),Ri(this.FFt),this.VFt=void 0}constructor(t){this.FFt=[],this.YFt=[],this.HFt=(t,i)=>{const e=this.QFt(i);if(e)if(e.type===er.UFt)for(const t of this.FFt)for(const i of _.keys(e.properties))t(i,e.properties[i]);else if(e.type===er.KSt)for(const t of this.YFt)t(e.event);else e.type===er.SBt&&this.VFt&&e.event.trackState&&this.VFt(e.event.trackId,e.event.trackState.targetQualityIds)},this.WFt=t,this.WFt.BFt(mr,this.HFt)}};r(),r(),function(t){t.qFt="medialoadedchange",t.ZA="volumechange",t.AFt="casterror",t.XFt="playererror",t.ZFt="targetqualitychanged",t.KFt="receiverinfochanged"}(gi||(gi={}));var MJ,TJ=class extends gg{constructor(){super("medialoadedchange")}},NJ=class extends gg{constructor(t,i){super("volumechange"),this.Ng=t,this.Y_=i}},DJ=class extends gg{constructor(t){super("casterror"),this.lt=t}},IJ=class extends gg{constructor(t){super("playererror"),this.lt=t}},SJ=class extends gg{constructor(t,i){super("targetqualitychanged"),this.tN=t,this.JFt=i}},EJ=class extends gg{constructor(){super("receiverinfochanged")}},bJ=class extends i{$Ft(t,i,e){this.yFt.e8(mr,function(t,i,e){return{type:mK.SBt,trackID:t,trackType:i,properties:{targetQuality:e}}}(t,i,e)).catch(this.kFt)}tYt(){this.WFt.BFt(mr,this.iYt),this.yFt.e8(mr,{type:mK.IBt}).catch(xs)}EFt(){return this.eYt}sYt(){return this.bFt.getSessionObj()}nYt(t){!this.rYt&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this.rYt=new _J(this,this.yFt,t),this.hYt(),this.mo(new TJ),this.rYt.DFt(this.oYt))}aYt(){return this.rYt}async uYt(t){const i=function(t){const i=function(t,i,e,s){const n=zS(t)||"",r=OS(t)||"",h=new chrome.cast.media.MediaInfo(n,r);return h.metadata=AK(t.metadata,t.poster),h.streamType=s,function(t,i,e){const s=[],n=[];let r,h=0,o=0;for(const t of i){const i=gc(t.sources);if(i)if(TK(i,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=i.src;else if(NK(i,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const l=null!=(u=vo.qQt(r,e))?u:0,d=void 0!==c?vo.qQt(c,e):void 0,f=new chrome.cast.media.BreakClip("bc"+o++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=i.src,f.whenSkippable=d,f.customData={integration:t.integration};let _=Gr(n,(t=>t.position===l));void 0===_&&(_=new chrome.cast.media.Break("b"+h++,[],l),n.push(_)),_.breakClipIds.push(f.id),s.push(f)}else 0;else 0}t.breakClips=s,t.breaks=n,t.vmapAdsRequest=r}(h,i,e),h}(t.cYt,t.Nc,t.ct,t.TX),e=new chrome.cast.media.LoadRequest(i);return e.autoplay=!0,e.currentTime=t.E_,e.customData=t.lYt,e}(t);let e;try{e=await this.bFt.loadMedia(i)}catch(t){e=t}if(e)throw new Ca(Wn(e))}V_(t){this.sYt().setReceiverMuted(t,xs,this.dYt)}Ig(t){this.sYt().setReceiverVolumeLevel(t,xs,this.dYt)}fYt(){return this.sYt().receiver.friendlyName}cn(){this.Bo(),this.bFt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this._Yt),this.sYt().removeUpdateListener(this.hYt),this.WFt.RFt(mr,this.iYt),this.yFt.cn(),this.WFt.cn()}constructor(t){super(),this.eYt=void 0,this.kFt=t=>{this.mo(new DJ(t))},this.gYt=(t,i)=>{"error"===t&&this.mo(new IJ(i))},this.wYt=(t,i)=>{this.mo(new SJ(t,i))},this.iYt=(t,i)=>{const e=JSON.parse(i);e.type===er.IBt&&(this.eYt=e.info,this.mo(new EJ))},this.hYt=()=>{const t=this.sYt(),{level:i,muted:e}=t.receiver.volume;this.mo(new NJ(null!=i?i:void 0,null!=e?e:void 0))},this._Yt=()=>this.nYt(this.bFt.getMediaSession()),this.oYt=t=>{var i;t||(null==(i=this.rYt)||i.IFt(this.oYt),this.rYt=void 0,this.mo(new TJ))},this.dYt=t=>{var i;const e=new Ca(Wn(t.code),null!=(i=t.description)?i:void 0);this.kFt(e)},this.bFt=t,this.bFt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this._Yt),this.WFt=new wJ(t.getSessionObj()),this.yFt=new yJ(this.WFt),this.yFt.pFt(this.gYt),this.yFt.GFt(this.wYt),this.sYt().addUpdateListener(this.hYt),this.hYt(),this.tYt();const i=this.bFt.getMediaSession();i&&this.nYt(i)}};(MJ||(MJ={})).AYt="statechange";var LJ=class extends gg{constructor(t){super("statechange"),this.n5=t}};r(),r(),r(),r();var $c,kJ=class extends i{C9(){return this.Tc}T_(){return Ki.KB()}b_(){return this.JB+this.vYt}y9(){return this.b_()}D_(){}kd(){return this.JL}x_(){return this.x$}O_(){}X_(){return this.iR}mYt(){}K_(){return this.eR}J_(t){this.eR!==t&&(this.eR=t,this.mo(new se(this.Lo.E_,t)))}dg(){return ow.Rv}rg(){return Ki.KB()}_g(){return Ki.KB()}wg(){return!1}m_(){return this.qv}yg(){return this.Zv}Ag(){return this.Al}CFt(t){}Tg(){return this.pYt}pg(){return this.yYt}Bg(){this.iR=!1}Pg(){this.iR=!0}Em(t){this.JB=t-this.vYt}MYt(){return this.vYt}TYt(t){this.vYt=t}o7(t){this.Tc.o7(t)}Rg(){}cn(){this.Bo(),this.qv.cn(),this.Zv.cn(),this.Al.cn(),this.Tc.cn()}constructor(t,i,e,s,n,r,h,o,a){super(),this.Lo=t,this.vYt=0,this.qv=new qe,this.Zv=new qe,this.Al=new Tn,this.Tc=new gn,this.vYt=i,this.JB=e-i,this.JL=s,this.x$=n,this.iR=r,this.eR=h,this.pYt=o,this.yYt=a}};r(),r(),r(),r(),function(t){t.NYt="ccmodechangerequest",t.DYt="cctargetqualitychangerequest",t.IYt="cctrackchangerequest"}($c||($c={}));var CJ,Vn,xJ=class extends gg{constructor(t,i,e){super($c.NYt),this.track=t,this.trackId=i,this.mode=e}};function OJ(t){return"AUDIO"===t.type}function jJ(t){return"VIDEO"===t.type}function zJ(t){return"TEXT"===t.type}r(),function(t){t.Eu="TEXT",t.Gv="AUDIO",t.Yv="VIDEO"}(CJ||(CJ={})),function(t){t.HM="SUBTITLES",t.kI="CAPTIONS",t.CI="DESCRIPTIONS",t.Mn="CHAPTERS",t.XM="METADATA"}(Vn||(Vn={}));var PJ=class extends i{get oa(){return this.Ua||(this.Ua=Qo(this)),this.Ua}get dh(){return this.Tm}set dh(t){t!==this.Tm&&(this.Tm=t,this.mo(new Oe(this)))}get q(){return this.Z$}get L(){return this.K$}get Xw(){return this.DR}set Xw(t){const i=Ne(t);this.DR!==i&&(this.DR=i,this.SYt!==i&&this.mo(new xJ(this,this.Bw,i)),this.mo(new de(this)))}get EYt(){return this.SYt}set EYt(t){const i=Ne(t),e=this.DR!==i;this.DR=i,this.SYt=i,e&&this.mo(new de(this))}Kw(t){this.Xw=t}bYt(t){}cn(){}Wn(){}constructor(t){super(),this.Ua=void 0;const i=t.customData;this.Bw=Number(t.trackId)||0,this.o=""+(i&&i.id||this.Bw),this.Tm=i&&i.label||t.name||"",this.gs=i&&i.language||t.language||"",this.qw=i&&i.inBandMetadataTrackDispatchType||"",this.zt=i&&i.kind||function(t){switch(t){case Vn.HM:return Pt.HM;case Vn.kI:return Pt.kI;case Vn.CI:return Pt.CI;case Vn.Mn:return Pt.Mn;case Vn.XM:return Pt.XM}return}(t.subtype)||"subtitles",this.cg=Ot.NONE,this.$w=i&&void 0!==i.type?function(t){return Qc(t)?t:Ks.DEFAULT}(i.type):Ks.WEBVTT,this.X$=[],this.K$=new tC(this.X$),this.r0=[],this.Z$=new tC(this.r0),this.DR=Ne(i&&i.mode||Ht.gh),this.SYt=this.DR}};r(),r();var BJ=class extends gg{constructor(t,i){super($c.IYt),this.trackId=t,this.enabled=i}};r();var RJ,UJ=class extends gg{constructor(t,i){super($c.DYt),this.track=t,this.targetQuality=i}};r(),function(t){t.Gv="audio",t.Yv="video",t.Eu="text"}(RJ||(RJ={}));var QJ,eh,FJ=class extends i{get Pw(){return this.Zat}get Qw(){return this.Xat}set Qw(t){this.LYt(t),this.mo(new UJ(this,t))}get Uw(){return this._m}get dh(){return this.Tm}set dh(t){t!==this.Tm&&(this.Tm=t,this.mo(new Oe(this)))}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.kYt!==t&&this.mo(new BJ(this.Bw,t)),this.mo(new de(this)))}get CYt(){return this.kYt}set CYt(t){const i=this.Le!==t;this.Le=t,this.kYt=t,i&&this.mo(new de(this))}get oa(){return this.Ua||(this.Ua=Di(this)),this.Ua}get Xw(){return this.Rt?"enabled":"disabled"}Dm(t){this.Rt=t}bYt(t){if(t.targetQualityIds){const i=[];for(let e=0;e<this._m.U;e++){const s=this._m.Iw(e);t.targetQualityIds.indexOf(s.o)>-1&&i.push(s)}const e=i.length?i:void 0;this.LYt(e)}}LYt(t){(function(t,i){return!t&&i||t&&!i||t&&i&&!zo(t,i)})(this.Xat,t)&&(this.Xat=t&&this._m.Am(t)?t:void 0,this.mo(new yF(this.Xat,this)))}unload(){for(const t of this._m.Nw)t.rn("update",this.HDt);this._m.Wn()}constructor(t){super(),this.Zat=void 0,this._m=new Uw,this.Xat=void 0,this.Ua=void 0,this.HDt=()=>this.mo(new Oe(this));const i=t.customData;if(this.Bw=Number(t.trackId)||0,this.o=""+(i&&i.id||this.Bw),this.Tm=i&&i.label||t.name||"",this.gs=i&&i.language||t.language||"",this.zt=i&&i.kind||"main",this.Le=i&&i.enabled,this.kYt=this.Le,OJ(t)){this.wJ=RJ.Gv;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new aQ(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);i.ln("update",this.HDt),this._m.gm(i)}}else{this.wJ=RJ.Yv;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new oQ(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);i.ln("update",this.HDt),this._m.gm(i)}}}};r(),function(t){t.xYt="legacy",t.OYt="caf"}(QJ||(QJ={})),r(),r(),r(),function(t){t.jYt="theo",t.zYt="google-ima",t.Xh="google-dai",t.PYt="freewheel",t.BYt="mediatailor",t.YS="chromecast"}(eh||(eh={})),r(),r();var YJ=class{wc(){if(this.RYt>=this.Tc.length)return;const t=this.Tc[this.RYt];return this.RYt+=1,t}lt(){return this.wc()}constructor(t){this.RYt=0,this.Tc=t}};function Tr(t){var i,e,s;return null!=(s=null==(i=t.$Qt)||null==(e=i.bBt)?void 0:e.LBt())?s:[]}var GJ=class{},sh=class{V9(){var t;return null!=(t=this.Ua)?t:this.Ua=function(t){return{get ads(){return t.Nc.map((t=>t.V9()))},get integration(){return t.UYt},get maxDuration(){return t.QYt},get maxRemainingDuration(){return t.FYt},get timeOffset(){return t.hEt}}}(this)}constructor(){this.Ua=void 0}},VJ=class{get YYt(){return this.GYt}get t(){return this.Lo}constructor(t,i){this.GYt=t,this.Lo=i}},WJ=class extends sh{get NQt(){return this.aFt}get Nc(){const t=[];for(const s of this.aFt.VYt)for(const n of Tr(s)){var i,e;const r=null!=(e=null==(i=n.HBt)?void 0:i.vRt)?e:[];if(n.VBt&&t.push(this.WYt(n.VBt,r,n.XBt,s.l7)),n.qBt)for(const i of n.qBt.ZBt)t.push(this.HYt(i,r,n.qBt,n.XBt,s.l7))}return t}WYt(t,i,e,s){const n=Gr(this.qYt,(i=>i.VBt===t));if(void 0!==n)return n;const r=new ZJ(t,i,this,this.XYt,e,s);return this.qYt.push(r),r}HYt(t,i,e,s,n){const r=Gr(this.ZYt,(i=>i.qBt===t));if(void 0!==r)return r;const h=new XJ(t,i,e,this,this.XYt,s,n);return this.ZYt.push(h),h}get UYt(){return eh.jYt}get hEt(){const t=this.aFt.ql;return t>=0?t:this.XYt.t.kd()}get FYt(){let t=0;for(const i of this.aFt.VYt)for(const e of Tr(i))e.VBt&&!e.VBt.AUt&&(t+=e.VBt.ct);return this.XYt&&this.XYt.YYt&&(t+=this.XYt.YYt.ct-this.XYt.YYt.E_),t}get QYt(){let t=0;for(const i of this.aFt.VYt)for(const e of Tr(i))e.VBt&&(t+=e.VBt.ct);return t}constructor(t,i){super(),this.qYt=[],this.ZYt=[],this.aFt=t,this.XYt=i}},HJ={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},qJ=class extends GJ{get Ul(){return this.aRt}get l7(){return this.hFt}get XBt(){return this.cUt}KYt(){return this.JYt}$Yt(){this.JYt=!0}tGt(t){return oe({},HJ,{resourceURI:t.HUt||""})}iGt(t){return oe({},HJ,{contentHTML:t.HUt.trim(),type:"HTMLResource"})}eGt(t){var i,e;return oe({},HJ,{clickThrough:(null==(i=t.RRt)?void 0:i.trim())||"",resourceURI:(null==(e=t.HUt)?void 0:e.trim())||"",altText:t.PRt||"",type:"StaticResource"})}sGt(t,i,e){if(!t||!i)return;const s="<img "+(e?"title='"+e+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(i)+"' target='_blank' rel='noopener'>"+s+"</a>"}HBt(t){return t?t.map((t=>{let i;const e={adSlotId:t.LRt||"",height:t.Ti||0,width:t.ji||0};if(t.tRt){var s;const e=this.eGt(t.tRt),n=e.clickThrough||(null==(s=t.ORt)?void 0:s.RRt);i=oe({},e,{contentHTML:this.sGt(e.resourceURI,n,e.altText)||""})}else if(t.nRt)i=this.iGt(t.nRt);else{if(!t.eRt)return;i=this.tGt(t.eRt)}return Ou(i,e)})).filter((t=>void 0!==t)):[]}nGt(){return this.rGt.BBt}constructor(t,i,e,s,n,r){super(),this.JYt=!1,this.rGt=t,this.mRt=i,this.aRt=e,this.XYt=s,this.cUt=n,this.hFt=r}},XJ=class extends qJ{get qBt(){return this.rGt}get WBt(){return this.hGt}ha(){const t=this.aRt,i={companions:this.HBt(this.mRt),type:"nonlinear",id:this.rGt.uRt,skipOffset:this.gUt,integration:eh.jYt,adSystem:this.rGt.BBt,get adBreak(){return t.V9()},creativeId:this.rGt.uRt,universalAdIds:this.cUt.map((t=>({adIdRegistry:t.cQt,adIdValue:t.dQt})))};return this.rGt.eRt?Ou(this.tGt(this.rGt.eRt),i):this.rGt.nRt?Ou(this.iGt(this.rGt.nRt),i):this.rGt.tRt?Ou(this.eGt(this.rGt.tRt),i):i}V9(){var t;return null!=(t=this.Ua)?t:this.Ua=this.ha()}oGt(){var t,i;return null!=(i=null==(t=this.rGt.tRt)?void 0:t.HUt)?i:""}aGt(){var t,i,e;return null!=(e=null==(t=this.rGt)||null==(i=t.tRt)?void 0:i.XUt)?e:""}get gUt(){const t=this.rGt.Ul;return t&&t.l7&&void 0!==t.l7.skipOffset?vo.qQt(t.l7.skipOffset,this.XYt.YYt.ct):(null==(i=this.rGt.Ul)?void 0:i.gUt)||-1;var i}constructor(t,i,e,s,n,r,h){super(t,i,s,n,r,h),this.hGt=e}},ZJ=class extends qJ{get VBt(){return this.rGt}ha(){var t;const i=this.aRt;return{companions:this.HBt(this.mRt),duration:this.rGt.ct,id:this.rGt.uRt,mediaFiles:this.rGt.dUt,skipOffset:this.gUt,type:"linear",integration:eh.jYt,adSystem:this.rGt.BBt,width:void 0,height:void 0,get adBreak(){return i.V9()},clickThrough:null==(t=this.rGt.eUt)?void 0:t.RRt,creativeId:this.rGt.uRt,universalAdIds:this.cUt.map((t=>({adIdRegistry:t.cQt,adIdValue:t.dQt})))}}V9(){var t;return null!=(t=this.Ua)?t:this.Ua=this.ha()}oGt(){return this.rGt.dUt.length>0?this.rGt.dUt[0].contentURL:""}aGt(){return this.rGt.dUt.length>0?this.rGt.dUt[0].type:""}get gUt(){const t=this.rGt.Ul;return t&&t.l7&&void 0!==t.l7.skipOffset?vo.qQt(t.l7.skipOffset,this.XYt.YYt.ct):this.rGt.gUt||-1}constructor(t,i,e,s,n,r){super(t,i,e,s,n,r)}};function KJ(t){return t instanceof ZJ}r();var ah=class extends $e{ha(){return new JJ(this.t7.V9())}constructor(t){super("uGt",t)}},JJ=class extends Ts{constructor(t){super("updatead",t)}};r();var Mc=class extends $e{ha(){return new $J(this.t7.V9())}constructor(t){super("cGt",t)}},$J=class extends Ts{constructor(t){super("adloaded",t)}},t$=class extends ha{get Mc(){return void 0!==this.lGt}get G9(){return this.rGt?[this.rGt]:[]}get W9(){var t;return null!=(t=this.lGt)?t:null}get H9(){return Nh(this.dGt,(t=>{const i=t.Nc;if(t===this.lGt&&void 0!==this.rGt){const t=i.indexOf(this.rGt);if(t>=0)return i.slice(t+1)}return t.fGt()?[]:i}))}get q9(){return this.dGt.filter((t=>t===this.lGt||!t.fGt()))}get oa(){var t;return null!=(t=this.Ua)?t:this.Ua=qu(this)}d1(t,i,e){throw new k("Scheduling ads while casting is not supported.")}uT(){this.mFt.zFt()}a7(t){}_Gt(t){return Gr(this.dGt,(i=>i.o===t))}gGt(t,i,e,s){const n=this.dGt,r=[];let h=!1;for(const n of t){let t=this._Gt(n.id);void 0===t&&(t=new i$(n),s.push(new Qj(t))),!z_(t.wGt)&&z_(e)&&(t.wGt=this.AGt(t.vGt,e));const o=t.Nc;t.Ln(n,i,e,s);const a=t.Nc;for(const t of a)na(o,t)||(s.push(new pn(t)),h=!0);r.push(t)}this.dGt=r,h&&s.push(new vn);for(const t of n)na(r,t)||s.push(new cn(t))}mGt(t,i){const e=this.lGt,s=this.rGt;let n,r;if(t){var h;const{breakId:i,breakClipId:e}=t;n=i?this._Gt(i):void 0,r=e?null==(h=this.lGt)?void 0:h.pGt(e):void 0}if(this.lGt=n,this.rGt=r,n!==e&&(void 0!==e&&(e.yGt=void 0,i.push(new Bh(e))),void 0!==n&&(n.yGt=this.mFt,i.push(new ka(n)))),r!==s){const t=this.Lo.b_();void 0!==s&&i.push(new fa(s,t)),void 0!==r&&i.push(new tu(r,t))}}AGt(t,i){if(!i||!i.breaks)return;const e=Gr(i.breaks,(i=>i.id===t.id));return e}o7(t){const i=[];for(const t of this.dGt){let e=t.Nc;if(t===this.lGt&&void 0!==this.rGt){const t=e.indexOf(this.rGt);t>=0&&(e=e.slice(t))}else if(t.fGt())continue;for(const t of e){const e=t.MGt();e&&i.push(e)}}for(const e of i)t.d1(e,Vs.X9,!1)}cn(){return this.Bo(),this.mFt.IFt(this.Hr),void 0!==this.lGt&&(this.lGt.yGt=void 0,this.lGt=void 0),this.rGt=void 0,Ri(this.dGt),Promise.resolve(void 0)}constructor(t,i){super(),this.dGt=[],this.lGt=void 0,this.rGt=void 0,this.Ua=void 0,this.Hr=t=>{var i;if(!t)return;const e=this.mFt.ZT,{breakStatus:s}=e,{breakClips:n,breaks:r}=e.media,h=null==(i=vK(e))?void 0:i.media,o=[];r&&n&&this.gGt(r,n,h,o),this.mGt(s,o);for(const t of o)this.mo(t)},this.Lo=t,this.mFt=i,this.mFt.DFt(this.Hr)}},i$=class extends sh{get vGt(){return this.TGt}get o(){return this.TGt.id}get Nc(){return this.Tc}get UYt(){return eh.YS}get QYt(){let t=this.TGt.duration;return void 0===t&&this.Tc.length>0&&(t=So(this.Tc,(t=>t.ct)),j(t)&&(t=void 0)),t}get FYt(){const t=this.QYt;if(void 0!==t&&void 0!==this.yGt){const i=this.yGt.jFt();if(void 0!==i)return x.max(0,t-i)}return t}get hEt(){return this.TGt.position}fGt(){return this.TGt.isWatched}pGt(t){return Gr(this.Tc,(i=>i.o===t))}Ln(t,i,e,s){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const h=t.breakClipIds[r],o=Gr(i,(t=>t.id===h));if(void 0===o)continue;const a=r<this.Tc.length?this.Tc[r]:new e$(o,this);!z_(a.NGt)&&z_(e)&&(a.NGt=this.DGt(e,h,r)),a.Ln(o,s),n.push(a)}this.TGt=t,this.Tc=n}DGt(t,i,e){if(!t||!t.breakClips)return;let s=Gr(t.breakClips,(t=>t.id===i));if(!s){var n;const i=null==(n=this.wGt)?void 0:n.breakClipIds[e];i&&(s=Gr(t.breakClips,(t=>t.id===i)))}return s}constructor(t){super(),this.wGt=void 0,this.Tc=[],this.yGt=void 0,this.TGt=t}},e$=class{get IGt(){return this.SGt}get o(){return this.SGt.id}get vRt(){return[]}get ct(){var t;return null!=(t=this.SGt.duration)?t:NaN}get dUt(){const t=this.oGt();return t?[{contentURL:t,delivery:"progressive",type:this.aGt(),width:0,height:0}]:[]}get gUt(){const{whenSkippable:t}=this.SGt;return void 0===t?void 0:t<0?-1:t}get RRt(){return this.SGt.clickThroughUrl}get uRt(){}get XBt(){return[]}nGt(){return""}aGt(){var t;return null!=(t=this.SGt.contentType)?t:""}oGt(){var t,i;return null!=(i=null!=(t=this.SGt.contentUrl)?t:this.SGt.contentId)?i:""}Ln(t,i){const e=this.o,s=this.ct,n=this.SGt.contentUrl;this.SGt=t;const r=this.o,h=this.ct,o=this.SGt.contentUrl;e===r&&(s===h||j(s)&&j(h))&&n===o||i.push(new ah(this)),j(s)&&!j(h)&&i.push(new Mc(this))}MGt(){let t;return this.NGt&&(t=lJ(this.NGt,this.Ul.hEt)),t||(t=lJ(this.SGt,this.Ul.hEt)),t}V9(){var t;return null!=(t=this.Ua)?t:this.Ua=this.ha()}ha(){const t=this;return{get companions(){return t.vRt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.dUt},get skipOffset(){return t.gUt},type:"linear",integration:eh.YS,get adSystem(){return t.nGt()},width:void 0,height:void 0,get adBreak(){return t.Ul.V9()},get clickThrough(){return t.RRt},get creativeId(){return t.uRt},get universalAdIds(){return t.XBt.map((t=>({adIdRegistry:t.cQt,adIdValue:t.dQt})))}}}constructor(t,i){this.Ua=void 0,this.SGt=t,this.Ul=i}};r();var s$,Qn=class extends i{get EGt(){return this.bGt}set EGt(t){this.bGt!==t&&(this.bGt=t,this.Us.href=null!=t?t:"",t?this.ZI():this.KI())}ZI(){if(this.Le)return;this.Le=!0,this.Us.style.display="",this.LGt||(this.tit.style.cursor="pointer");const t=this.LGt?this.Us:this.tit;fe.Ys.Je?(t.addEventListener("touchstart",this.kGt),t.addEventListener("touchend",this.CGt)):(t.addEventListener("mousedown",this.kGt),t.addEventListener("click",this.CGt))}KI(){if(!this.Le)return;this.Le=!1,this.Us.style.display="none",this.LGt||(this.tit.style.cursor="");const t=this.LGt?this.Us:this.tit;fe.Ys.Je?(t.removeEventListener("touchstart",this.kGt),t.removeEventListener("touchend",this.CGt)):(t.removeEventListener("mousedown",this.kGt),t.removeEventListener("click",this.CGt))}Xf(){this.Bo(),this.KI(),this.tit.removeChild(this.Us)}constructor(t,i=fe.Ys.Je){super(),this.Le=!1,this.kGt=t=>{t.stopPropagation(),this.mo(new gg("clickstart"))},this.CGt=t=>{t.stopPropagation(),this.mo(new gg("click"))},this.tit=t,this.LGt=i,this.Us=h.createElement("a"),this.Us.style.position="absolute",this.Us.style.zIndex="11",this.Us.target="Au",this.LGt?(fn(this.Us,"learn more"),this.Us.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Us.setAttribute("rel","noopener")):ia(this.Us),this.tit.appendChild(this.Us),this.KI()}};r(),r(),function(t){t.xGt="theo-size-xs",t.OGt="theo-size-s",t.jGt="theo-size-m",t.zGt="theo-size-l",t.PGt="theo-size-xl"}(s$||(s$={}));var n$=[1200,992,768,576],r$={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},h$=class{BGt(t){let i=o$(t);i!==this.RGt&&(eN(this.Us,i),sN(this.Us,this.RGt),this.RGt=i)}cn(){this.Ou.rn(xr.an,this.un)}constructor(t,i){this.Us=t,this.Ou=i,this.un=t=>{this.BGt(t.width)},this.RGt=o$(i.fu),eN(this.Us,this.RGt),i.ln(xr.an,this.un)}};function o$(t){for(let i of n$)if(t>i)return r$[i];return"theo-size-xs"}var a$=class extends i{get we(){return this.Us}get Xw(){return this.DR}get kS(){return this.Ll.textContent||""}set kS(t){fn(this.Ll,t)}UGt(t){"countdown"!==this.DR&&(this.DR="countdown",this.QGt(),this.we.classList.remove("theoplayer-ad-skip-button"),this.we.classList.add("theoplayer-ad-skip-countdown")),this.kS="You can skip in "+x.round(t)+" seconds"}FGt(){"skip"!==this.DR&&(this.DR="skip",this.kS="Skip Ad",this.YGt(),this.we.classList.remove("theoplayer-ad-skip-countdown"),this.we.classList.add("theoplayer-ad-skip-button"))}YGt(){this.we.addEventListener("mouseup",this.GGt),this.we.addEventListener("touchend",this.GGt)}QGt(){this.we.removeEventListener("mouseup",this.GGt),this.we.removeEventListener("touchend",this.GGt)}cn(){this.Bo(),this.QGt(),this.Ru.cn(),ei(this.Us),ei(this.Ll),this.VGt&&ei(this.VGt)}constructor(t,i){super(),this.GGt=()=>{this.mo(new gg("uT"))},this.Us=h.createElement("div"),this.we.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.we.style.position="absolute",this.Ll=h.createElement("span"),this.we.appendChild(this.Ll),i&&(this.VGt=h.createElement("div"),this.VGt.className="theoplayer-ad-skip-poster",this.VGt.style.backgroundImage='url("'+iw(i)+'")',this.we.appendChild(this.VGt)),this.DR="countdown",this.Ru=new h$(this.we,t)}},u$=class extends i{WGt(){const t=this.mFt.ZT.activeTrackIds;if(t){if(this.HGt()){const i=this.Zv.Nw.map((t=>t.o)),e=this.qv.Nw.map((t=>t.o));na(i.concat(e),"0")&&t.push(0)}_$(t,this.qv),_$(t,this.Zv),function(t,i){const e=!1;for(const e of i.Nw)e.EYt=na(t,e.Bw)?Ht.Un:Ht.gh}(t,this.Al)}}qGt(){var t;const i=null==(t=this.mFt.ZT.media)?void 0:t.tracks;if(!i)return;const e=i.filter(OJ),s=i.filter(jJ),n=i.filter(zJ);if(d$(this.qv,e.map((t=>t.trackId))),d$(this.Zv,s.map((t=>t.trackId))),d$(this.Al,n.map((t=>t.trackId))),this.HGt()&&0===s.length&&0!==this.Tg()){const t=this.XGt();s.push(t)}if(this.HGt()&&0===e.length){const t=this.ZGt();e.push(t)}f$(e,this.qv),f$(s,this.Zv),function(t,i){let e=!1;for(const s of t){let t=l$(i,s.trackId);t||(t=new PJ(s),i.tt(t),e=!0)}}(n,this.Al)}KGt(){this.iR||(this.JGt=v(this.Kl,250))}$Gt(){m(this.JGt)}tVt(){this.$Gt(),this.KGt()}iVt(){var t;const i=this.mFt.ZT,e=i.media;var s;const n=null!=(s=null==e?void 0:e.duration)?s:NaN,r=(null==e?void 0:e.streamType)===chrome.cast.media.StreamType.LIVE||n<0,h=r?1/0:n;this.JL=h,this.eVt();const o=i.getEstimatedLiveSeekableRange(),a=null==(t=i.customData)?void 0:t.buffers;if(z_(o)){const{start:t,end:i,isMovingWindow:e=r,isLiveDone:s=!1}=o;this.Xbt(t,i,e,s)}else if(z_(a)){const[t,i]=a.seekable;this.Xbt(t,i,r,!1)}else r?this.Xbt(void 0,void 0,!0,!1):this.Xbt(0,h,!1,!1)}sVt(){const t=this.mFt.ZT,i=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||c$(t);this.nVt=i,this.iR!==i&&(this.iR=i,this.iR?this.mo(new ws(this.b_())):this.mo(new vh(this.b_())))}Gr(){const{playbackRate:t}=this.mFt.ZT;this.rVt!==t&&(this.rVt=void 0,this.eR!==t&&(this.eR=t,this.mo(new se(this.b_(),t))))}hVt(){const{playerState:t}=this.mFt.ZT;let i;switch(t){case chrome.cast.media.PlayerState.IDLE:i=ow.Rv;break;case chrome.cast.media.PlayerState.BUFFERING:i=ow.Vn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:i=ow.Qv}this.z$(i),this.oVt()}Xbt(t,i,e,s){z_(t)&&z_(i)?this.w$=new Mk(t,i,e,e&&!s):this.w$=void 0}aVt(t,i){this.yYt=null!=i?i:this.yYt,this.pYt=null!=t?t:this.pYt,this.mo(new Vu)}We(t){this.uVt!==t?(this.$B=!0,this.mo(new ja(this.b_()))):this.uVt=void 0}OP(){if(!this.$B)return;this.$B=!1;const t=this.b_();this.mo(new Tc(t,this.D_())),this.mo(new _e(t))}wh(){this.x$=!0,this.x_()&&this.mo(new Ds(this.b_()))}eVt(){const t=this.Tft,i=this.kd();t===i||j(t)&&j(i)||(this.Tft=i,this.mo(new ts(i)))}cVt(){const t=this.b_();this.$B||this.lVt===t||(this.lVt=t,this.mo(new Tc(t,this.D_())))}mYt(){this.iR&&(this.iR=!1,this.mo(new vh(this.b_())),this.z$(ow.Rv))}C9(){return this.Tc}T_(){return this.iNt.Sm(this.vYt)}b_(){if(this.Tc.Mc){const t=this.mFt.OFt();if(void 0!==t)return t}return this.y9()}y9(){return void 0!==this.dVt?this.vYt+this.dVt:this.x$?this.kd():this.vYt+this.mFt.xFt()}D_(){if(this.fVt)return new Date(this.y9()+this.fVt)}kd(){if(this.Tc.Mc){var t;const i=null==(t=this.Tc.G9[0])?void 0:t.ct;if(void 0!==i&&!j(i))return i}return this.vYt+this.JL}O_(){return this.hP}x_(){return!this.Tc.Mc&&this.x$}X_(){return this.iR}K_(){return this.eR}J_(t){this.eR!==t&&(this.rVt=this.eR,this.eR=t,this.mo(new se(this.b_(),t)),this.mFt.J_(t))}dg(){return this.O$}rg(){return this.Tc.Mc?Ki.ZB(0,this.b_()):this.Io.Sm(this.vYt)}_g(){var t,i;if(this.Tc.Mc)return Ki.KB();let e=null!=(i=null==(t=this.w$)?void 0:t.SJ().Sm(this.vYt))?i:Ki.KB();if(e.U>0){const t=e.bn(e.U-1);e=e.xB(Ki.ZB(t,this.b_()))}return e}wg(){return this.$B}m_(){return this.qv}yg(){return this.Zv}Ag(){return this.Al}XGt(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.pg(),id:"0",name:"",width:this.Tg()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:CJ.Yv}}ZGt(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:CJ.Gv}}HGt(){var t,i;return!(void 0!==(null==(t=this.bFt.EFt())?void 0:t.version))||(null==(i=this.bFt.EFt())?void 0:i.sdkType)===QJ.OYt}CFt(t){this.HGt()&&Et(t,0),this.mFt.CFt(t)}Tg(){return this.pYt}pg(){return this.yYt}Bg(){this.iR&&(this.iR=!1,this.nVt=!1,this.mo(new vh(this.b_()))),this.mFt.Bg()}Pg(){this.iR||(this.iR=!0,this.nVt=!0,this.mo(new ws(this.b_()))),this.mFt.Pg()}Em(t){if(this.Tc.Mc)return;let i=x.max(0,t-this.vYt);i=x.round(1e6*i)/1e6;const e=this.dVt;this.dVt=i,this.nVt=this.X_(),this.uVt=i,this.$B=!0,this.mo(new ja(this.b_())),void 0===e&&this.t2(i)}t2(t){this.mFt.Em(t,this.nVt).then(this._Vt(t)).catch(this.kFt)}_Vt(t){return()=>{void 0!==this.dVt&&(this.dVt===t?this.dVt=void 0:this.t2(this.dVt))}}z$(t){this.O$!==t&&(this.O$=t,this.mo(new Qi(this.b_(),t))),void 0===this.dVt&&this.$B&&t>=ow.Uv&&this.OP(),this.oVt()}oVt(){if(this.iR)return void(this.gVt=!1);const t=this.O$>=ow.Qv;this.gVt!==t&&(this.gVt=t,t?this.mo(new Vi(this.b_())):this.mo(new wc(this.b_())))}wVt(){this.AVt||(this.AVt=h.createElement("div"),this.Lo.we.appendChild(this.AVt),this.AVt.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.AVt.style.zIndex="10",ia(this.AVt)),this.AVt.style.display=this.Tc.Mc?"":"none"}vVt(){var t;const i=null==(t=this.Tc.G9[0])?void 0:t.RRt;i&&!this.mVt?(this.mVt=new Qn(this.AVt,!0),this.mVt.EGt=i,this.mVt.ln("clickstart",this.pVt)):this.mVt&&(this.mVt.EGt=i)}yVt(){var t;const i=null==(t=this.Tc.G9[0])?void 0:t.gUt;if(void 0===i||i<0)return void(this.MVt&&(this.MVt.cn(),this.MVt=void 0));if(!this.MVt){var e;const t=null==(e=this.Lo.da)?void 0:e.mi;this.MVt=new a$(this.Lo.Tu,t),this.AVt.appendChild(this.MVt.we),this.MVt.ln("uT",this.TVt)}const s=this.mFt.OFt();void 0!==s&&(s<i?this.MVt.UGt(i-s):this.MVt.FGt())}MYt(){return this.vYt}TYt(t){this.vYt=t}o7(t){}Rg(){this.mFt.Rg()}cn(){this.Bo(),this.Tc.cn(),this.mVt&&(this.mVt.Xf(),this.mVt=void 0),this.MVt&&(this.MVt.cn(),this.MVt=void 0),this.AVt&&(ei(this.AVt),this.AVt=void 0),this.mFt.NFt(this.zJ),this.mFt.MFt(this.NVt),this.mFt.IFt(this.oYt),this.mFt.rn(Er.AFt,this.DVt),this.mFt.cn()}constructor(i,e,s,n){super(),this.iNt=Ki.KB(),this.fVt=void 0,this.x$=!1,this.hP=void 0,this.rVt=void 0,this.O$=ow.Rv,this.gVt=!1,this.Io=Ki.KB(),this.w$=void 0,this.$B=!1,this.qv=new qe,this.Zv=new qe,this.Al=new Tn,this.Tft=NaN,this.dVt=void 0,this.nVt=!1,this.lVt=NaN,this.uVt=void 0,this.JGt=0,this.NVt=(t,i)=>{switch(t){case"buffered":this.iNt=new Ki(i),this.mo(new _i(this.b_()));break;case"currentProgramDateTime":this.fVt=new Date(i).getTime()-this.b_();break;case"played":this.Io=new Ki(i);break;case"seekable":this.iVt();break;case"videoHeight":this.aVt(void 0,i);break;case"videoWidth":this.aVt(i,void 0)}},this.zJ=i=>{switch(i.type){case t.YA:this.We(i.currentTime);break;case t.FA:this.OP();break;case t.UA:this.mo(new iV(i.representation,i.previousRepresentation));break;case t.GA:this.mo(new jG(i.segmentStartTime,i.error,i.trackType,i.track,i.quality,i.retryCount));break;case t.TA:this.mo(new xF(i.currentTime,i.initDataType,i.initData));break;case t.AA:this.mo(new Le(new Yr(le.CONTENT_PROTECTION_ERROR,i.error,void 0,i.licenseAcquisitionURL,i.status,i.statusText,i.licenseAcquisitionMessage,i.systemCode)));break;case t.vA:this.mo(new gx)}},this.oYt=t=>{this.iVt(),this.sVt(),this.Gr(),this.hVt(),this.cVt(),this.tVt(),this.qGt(),this.WGt(),this.wVt(),this.vVt(),this.yVt(),t||c$(this.mFt.ZT)&&this.wh()},this.Kl=()=>{this.cVt(),this.yVt()},this.DVt=t=>{this.mo(t)},this.kFt=t=>{this.dVt=void 0,this.mo(new dJ(t))},this.pVt=()=>{this.Pg()},this.TVt=()=>{this.Tc.uT()},this.Lo=i,this.bFt=e,this.mFt=s,this.Tc=new t$(i,s),this.vYt=n.MYt(),this.JL=n.kd()-this.vYt,this.iR=n.X_(),this.eR=n.K_(),this.pYt=n.Tg(),this.yYt=n.pg(),this.mFt.TFt(this.zJ),this.mFt.pFt(this.NVt),this.mFt.DFt(this.oYt),this.mFt.ln(Er.AFt,this.DVt),this.mFt.SFt().then((t=>{this.mo(new fJ(t.bt,t.cc))}),this.kFt)}};function c$(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function l$(t,i){for(const e of t.Nw)if(e.Bw===i)return e}function d$(t,i){let e=!1;for(let s=0;s<t.U;s++){const n=t.Iw(s);-1===i.indexOf(n.Bw)&&(t.it(n),s--,e=!0)}return e}function f$(t,i){let e=!1;for(const s of t){let t=l$(i,s.trackId);t||(t=new FJ(s),i.tt(t),e=!0)}return e}function _$(t,i){for(const e of i.Nw)e.CYt=na(t,e.Bw);return!1}r();var g$=class{M7(t){return Promise.resolve("all")}zg(){}cn(){}};r();function w$(t,i,e){if(j(t))return e;if(t===1/0){if("live"===e||"dvr"===e)return e;if(i&&i.length>0){if(i.end(i.length-1)-i.start(0)>60)return"dvr"}return"live"}return"vod"}var A$=[t.NA,t.yA,t.RA,t.QA,t.yh,t.bh,t.BA,t.XA,t.YA,t.FA,qo.fv,qo._v,t.UA,t.GA,t.TA,t.AA,t.vA],v$=class extends O{pB(t){if(!t)return;Ph(this.dB&&wh(this.dB),t&&wh(t))||(this.dB=t,this.mo(new jt(t)))}IVt(t){if(!t)return;const i=rl(t,this.Lo.vd);Ph(this.lc&&wh(this.lc),i&&wh(i))||(this.ba.TYt(0),this.lc=i,this.mo(new Oj(i)),this.ba.mYt())}SVt(t){for(const i of this.rt.Nw)if(i.Bw===t)return i;for(const i of this.ht.Nw)if(i.Bw===t)return i}get n5(){return this.ba}set n5(t){const i=this.ba;i&&(i.rn(Er.AFt,this.DVt),i.rn(Er.vFt,this.EVt),i.rn(A$,this.Ds),i.rn(qo._w,this.vO),t.TYt(i.MYt()),i.o7(t.C9())),this.ba=t,this.qv.Ew=t.m_(),this.Zv.Ew=t.yg(),this.Al.Ew=t.Ag(),this.Tc.Ew=t.C9(),i&&i.cn(),t.ln(Er.AFt,this.DVt),t.ln(Er.vFt,this.EVt),t.ln(A$,this.Ds),t.ln(qo._w,this.vO)}get Yh(){return this.Kh}get Nc(){return this.C9()}C9(){return this.Tc}x9(){return this.g9}m_(){return this.qv}T_(){return this.ba.T_().ks()}get bVt(){return this.LVt||this.lc}set bVt(t){this.LVt=t}async Pn(t,i){var e;t&&await this.uYt(t,null!=(e=t.ads)?e:[],t.streamType,NaN,0,null!=i?i:0)}async kVt(t){var i;const e=null!=(i=this.LVt)?i:this.lc;if(!e)return;var s;const n=this.LVt?null!=(s=this.LVt.ads)?s:[]:this._7(),r=this.Lo.kd(),h=this.Lo._g(),o=w$(r,h,e.streamType),a=h.length>0?h.start(0):0,u=null!=t?t:this.y9();await this.uYt(e,n,o,r,a,u)}_7(){const t=new gn;return this.Tc.o7(t),t._7()}D_(){return this.ba.D_()}S_(){return this.dB}get E_(){return this.b_()}set E_(t){this.L_(t)}b_(){return this.ba.b_()}y9(){return this.ba.y9()}L_(t){this.CVt||(this.bFt.aYt()||this.CVt||!this.lc?this.ba.Em(t):this.Pn(this.lc,t))}kd(){return this.ba.kd()}x_(){return this.ba.x_()}O_(){return this.hP}z_(){return this.oP}B_(){return this.Xv}F_(){return this.Lo.Q_}G_(){return this.tR}V_(t){this.tR=t,this.mo(new Ve(this.E_,this.Ng)),this.bFt.V_(t)}X_(){return this.ba.X_()}K_(){return this.ba.K_()}J_(t){this.ba.J_(t)}rg(){return this.ba.rg().ks()}og(){return Al.lB}ag(t){}dg(){return this.ba.dg()}_g(){return this.ba._g().ks()}wg(){return this.ba.wg()}Oa(){return this.lc}async ca(t){this.lc=t,await this.Pn(t),this.LVt=void 0,this.ba.mYt()}Ag(){return this.Al}pg(){return this.ba.pg()}Tg(){return this.ba.Tg()}yg(){return this.Zv}Dg(){return this.Ak}Ig(t){this.Ak=t,this.mo(new Ve(this.E_,this.Ng)),this.bFt.Ig(t)}get Lg(){return!1}set Lg(t){}xg(){}Cg(){return this.sR}zg(){}Bg(){this.bFt.aYt()||this.CVt||!this.lc?this.ba.Bg():this.Pn(this.lc)}Pg(){this.ba.Pg()}Og(){this.Kh=!0}jg(){this.dB=void 0,this.Kh=!1}ge(){}be(){}async uYt(t,i,e,s,n,r){this.CVt=!0,this.xVt(),this.ba.TYt(n);const h="live"===e||"dvr"===e,o=function(t,i,e){return{theoplayer_version:1,streamStart:t,isLive:i,sourceDescription:e}}(n,h,t),a={cYt:t,Nc:i,E_:x.max(0,r-n),ct:s,TX:h?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,lYt:o};try{await this.bFt.uYt(a)}catch(t){this.OVt(t)}finally{this.CVt=!1}}jVt(){this.zVt(this.qv),this.zVt(this.Zv),this.PVt(this.Al)}zVt(t){for(const i of t.Nw)this.BVt(i);t.ln(gt.qg,(t=>{this.BVt(t.Lt)}))}PVt(t){for(const i of t.Nw)this.RVt(i);t.ln(gt.qg,(t=>{this.RVt(t.Lt)}))}BVt(t){t.ln($c.DYt,this.FMt),t.ln($c.IYt,this.UVt),t.ln($c.IYt,this.WGt)}RVt(t){t.ln($c.NYt,this.QVt),t.ln($c.NYt,this.WGt)}FVt(){const t=[];for(const i of this.rt.Nw)i.Rt&&t.push(i.Bw);for(const i of this.ht.Nw)i.Rt&&t.push(i.Bw);for(const i of this.nt.Nw)i.Xw===Ht.Un&&t.push(i.Bw);this.ba.CFt(t)}YVt(t){var i,e;if(!t)return!1;return(null!=(e=null==(i=this.bFt.EFt())?void 0:i.version)?e:-1)>=2?t.map((t=>t.o)):[t[0].o]}GVt(t){this.VVt=t}Yg(){}Gg(){}async Rg(){this.ba.Rg(),this.xVt()}xVt(){this.uO=ow.Rv,this.sO=!1,this.hO=!1,this.hP=void 0,this.oP=void 0}async cn(){this.xVt(),this.Bo(),this.n5=this.WVt(),this.bFt.rn(gi.AFt,this.DVt),this.bFt.rn(gi.XFt,this.HVt),this.bFt.rn(gi.ZA,this.qVt),this.bFt.rn(gi.qFt,this.XVt),this.bFt.rn(gi.ZFt,this.ZVt),this.bFt.cn()}WVt(){return new kJ(this,this.ba.MYt(),this.ba.b_(),this.ba.kd(),this.ba.x_(),this.ba.X_(),this.ba.K_(),this.ba.Tg(),this.ba.pg())}constructor(t,i){super(t,!0),this.Kh=!1,this.VVt=xs,this.uO=ow.Rv,this.sO=!1,this.hO=!1,this.CVt=!1,this.LVt=void 0,this.hP=void 0,this.oP=void 0,this.qv=new As,this.Zv=new As,this.Al=new Ac,this.sR=new Ro,this.Xv=new Wc,this.g9=new g$,this.qVt=t=>{var i,e;(z_(t.Ng)&&!Ua(t.Ng,this.Ak,1e-5)||z_(t.Y_)&&t.Y_!==this.tR)&&(this.Ak=null!=(i=t.Ng)?i:this.Ak,this.tR=null!=(e=t.Y_)?e:this.tR,this.mo(new Ve(this.E_,this.Ak)))},this.XVt=()=>{const t=this.bFt.aYt();this.n5=t?new u$(this,this.bFt,t,this.ba):this.WVt()},this.EVt=t=>{this.pB(t.bt),this.IVt(t.cc)},this.ZVt=t=>{const i=this.SVt(t.tN);if(!i)return void 0;const e={targetQualityIds:t.JFt};i.bYt(e)},this.DVt=t=>{this.OVt(t.lt)},this.OVt=t=>{this.VVt&&this.VVt(t)},this.HVt=t=>{this.hP=t.lt,this.oP=cl(this.hP),this.mo(new me(this.oP))},this.UVt=t=>{if(!t.enabled)return;const i=this.rt.Nw.some((i=>i.Bw===t.trackId))?this.rt:this.ht;for(const e of i.Nw)e.Rt&&e.Bw!==t.trackId&&(e.Rt=!1)},this.QVt=t=>{if(t.mode===Ht.Un)for(const i of this.nt.Nw)i.Xw===Ht.Un&&i.Bw!==t.trackId&&Jm(i.zt,t.track.zt)&&(i.Xw=Ht.gh)},this.WGt=kl((()=>{this.FVt()}),50),this.FMt=t=>{const i=this.YVt(t.targetQuality),e=t.track;this.bFt.$Ft(e.Bw,e.wJ,i)},this.vO=t=>{this.mo(t);const i=t.readyState;!this.sO&&this.uO===ow.Rv&&i>=ow.Vn&&(this.sO=!0,this.mo(new Wi(t.currentTime))),!this.hO&&this.uO<=ow.Vn&&i>=ow.Uv&&(this.hO=!0,this.mo(new Xi(t.currentTime))),this.uO<=ow.Uv&&i>=ow.Qv&&this.mo(new mt(t.currentTime)),this.uO<=ow.Qv&&i===ow.Fv&&this.mo(new Yi(t.currentTime)),this.uO=i},this.Ak=this.Lo.Ng,this.tR=this.Lo.Y_,this.bFt=i,this.bFt.ln(gi.AFt,this.DVt),this.bFt.ln(gi.XFt,this.HVt),this.bFt.ln(gi.ZA,this.qVt),this.bFt.ln(gi.qFt,this.XVt),this.bFt.ln(gi.ZFt,this.ZVt),this.Tc=new mn(this),this.dB=this.Lo.bt,this.lc=this.Lo.Oa(),this.n5=new kJ(this,0,this.Lo.y9(),this.Lo.kd(),this.Lo.C_,this.Lo.q_,this.Lo.Z_,this.Lo.Mg,this.Lo.vg),this.jVt()}};r();var m$=class extends Ha{ha(){return new p$(this.lt)}constructor(t){super("error"),this.lt=t}},p$=class extends gg{constructor(t){super("error"),this.error=t}};r();var y$=class extends gg{constructor(t){super("statechange"),this.state=t}};function M$(t,i){let e;return{get casting(){return t.SW},get error(){return t.lt},get receiverName(){return t.KVt},get state(){return t.n5},start(){t.gn()},stop(){t.Rg()},join(){t.JVt()},leave(){t.$Vt()},set connectionCallback(t){null==i||i.tWt(t)},get connectionCallback(){return null==i?void 0:i.iWt()},get source(){return e||t.cc},set source(i){e=i,t.cc=i},addEventListener(i,e){const s=Ls(i,P);t.ln(s,e)},removeEventListener(i,e){const s=Ls(i,P);t.rn(s,e)}}}r();var T$=class extends ha{get SW(){return this.n5===$r.CONNECTING||this.n5===$r.CONNECTED}get lt(){return this.hP}get oa(){return this.Ua||(this.Ua=M$(this,this.eWt)),this.Ua}get KVt(){var t;return null==(t=this.eWt.sWt())?void 0:t.fYt()}get cc(){return this.Lo?this.Lo.bVt:this.LVt}set cc(t){this.LVt=t?rl(t,this.nWt.vd):void 0,this.Lo&&(this.Lo.bVt=this.LVt,this.LVt&&this.Lo.Pn(this.LVt))}get n5(){return this.ba}set n5(t){let i=t;this.rWt||i!==$r.CONNECTING&&i!==$r.CONNECTED||(i=$r.AVAILABLE),this.ba!==i&&(this.ba=i,this.mo(new y$(this.n5)))}async hWt(){if(!this.oWt)throw new b("Chromecast must be initialized before starting a session");await this.oWt,this.eWt.sWt()||await this.eWt.aWt()}async gn(){this.rWt=!0;try{if(this.n5=$r.CONNECTING,await this.hWt(),await this.uWt(),this.Lo){const t=this.nWt.Oa(),i=this.eWt.cWt(t);this.Lo.bVt=i?rl(i,this.nWt.vd):this.LVt,this.Lo.kVt()}this.n5=$r.CONNECTED,await this.nWt.Rg()}catch(t){this.lWt(!1).catch(xs),this.n5=$r.AVAILABLE,Oi(t)||this.Q1(t)}}async JVt(){this.rWt=!0;try{if(this.n5=$r.CONNECTING,await this.hWt(),await this.uWt(),this.Lo){const t=this.nWt.Oa(),i=this.eWt.dWt(t);i&&(this.Lo.bVt=rl(i,this.nWt.vd))}this.n5=$r.CONNECTED,await this.nWt.Rg()}catch(t){await this.lWt(!0).catch(xs),this.n5=$r.AVAILABLE,Oi(t)||this.Q1(t)}}async fWt(){this.eWt.sWt()&&await this.gn()}async uWt(){null!=this.Lo||(this.Lo=this._Wt()),this.hP=void 0,this.nWt.Pg(),await this.jV.gWt(this.Lo)}_Wt(){const t=new v$(this.nWt,this.eWt.sWt());return t.GVt(this.Q1),t}wWt(){this.Lo&&(this.Lo.cn(),this.Lo=void 0)}async lWt(t){if(this.rWt=!1,!this.Lo)return;const i=this.Lo.Yh,e=this.Lo.Oa(),s=this.Lo.y9();try{if(i){let i;i=t?this.eWt.AWt(e):this.eWt.vWt(e),null!=i||(i=e),await this.jV.mWt(i,i===e),this.nWt.L_(s),this.nWt.Bg()}}finally{this.wWt()}}$Vt(){this.SW&&(this.eWt.pWt(!1),this.lWt(!0).catch(this.Q1))}Rg(){this.SW&&(this.eWt.pWt(!0),this.lWt(!1).catch(this.Q1))}cn(){this.eWt.rn(MJ.AYt,this.yWt),this.Bo(),this.wWt()}constructor(t,i,e,s){super(),this.hP=void 0,this.Ua=void 0,this.Lo=void 0,this.ba=$r.UNAVAILABLE,this.rWt=!1,this.MWt=()=>{this.eWt.ln(MJ.AYt,this.yWt),this.n5=this.eWt.TWt()},this.yWt=t=>{const i=t.n5;this.n5=i,i!==$r.UNAVAILABLE&&i!==$r.AVAILABLE||this.lWt(!1).catch(this.Q1)},this.LVt=void 0,this.Q1=t=>{t instanceof Ca&&(this.hP=t,this.mo(new m$(t).oa))},this.jV=t,this.nWt=i,this.eWt=s,this.Mx=e.chromecast,this.oWt=this.eWt.VV(this.Mx),this.oWt.then(this.MWt).catch(this.Q1)}};r();var N$=class extends ha{get SW(){return!1}get lt(){}get KVt(){}get cc(){}set cc(t){}get n5(){return $r.UNAVAILABLE}get oa(){return this.Ua||(this.Ua=M$(this)),this.Ua}JVt(){fe.Vv("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}$Vt(){fe.Vv("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}gn(){fe.Vv("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}Rg(){fe.Vv("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}fWt(){return Promise.resolve()}cn(){}};function D$(t){return{E_:t.b_(),ct:t.kd(),C_:t.C_,lt:t.O_(),j_:t.z_(),Y_:t.Y_,q_:t.q_,Z_:t.Z_,cg:t.cg,gg:t.gg,vg:t.vg,Mg:t.Mg,Ng:t.Ng}}r(),r();var I$=class extends O{C9(){return this.Tc}m_(){return this.qv}get P_(){return this.B_()}B_(){return this.Xv}Ag(){return this.Al}yg(){return this.Zv}Kv(t){const i=this.Lo;if(i===t)return;let e;this.O9&&(i.A_(this.Hg),e=D$(this));const s=this.S_(),n=this.Cg(),r=this.xg();if(this.Lo=t,this.qv.Ew=t.ht,this.Zv.Ew=t.rt,this.Al.Ew=t.nt,this.Xv.Ew=t.P_,this.Tc.Ew=t.Nc,void 0!==e){Ta(this,e,D$(this))}const h=this.S_();h!==s&&this.mo(new jt(h)),this.Cg()!==n&&this.mo(new dt),this.xg()!==r&&this.mo(new ns),this.O9&&t.d_(this.Hg)}async cn(){await super.cn(),this.qv.cn(),this.Zv.cn(),this.Al.cn(),this.Xv.cn(),await this.Tc.cn()}constructor(t,i){super(t,i),this.qv=new As,this.Zv=new As,this.Al=new Ac,this.Xv=new ra,this.qv.Ew=t.ht,this.Zv.Ew=t.rt,this.Al.Ew=t.nt,this.Xv.Ew=t.P_,this.Tc=new mn(this),this.Tc.Ew=t.Nc}},S$=class extends I${Oa(){const t=super.Oa();return!t&&this.NWt.SW&&this.NWt.cc?this.NWt.cc:t}ca(t,i){return this.OH.Lx((i=>(this.DWt=new Po,this.DWt.n_(i),super.ca(t,this.DWt.i_))),i)}Bg(){super.Bg(),this.vd.cast.strategy!==hw.AUTO||this.NWt.SW||this.NWt.fWt()}gWt(t){return this.OH.Lx((i=>this.IWt(t,i)))}mWt(t,i){return void 0===t&&(t=void 0),void 0===i&&(i=!1),this.OH.Lx((e=>this.SWt(t,i,e)))}IWt(t,i){Pi(i),this.EWt.Nc&&this.EWt.Nc.o7(t.Nc),this.bWt=t,this.Kv(t),this.bWt.Og()}async SWt(t,i,e){Pi(e);const s=this.bWt;if(void 0!==s)try{if(t){await this.EWt.Rg(),Pi(e);const s=rl(t,this.EWt.vd);i&&(s.ads=void 0),this.DWt=new Po,this.DWt.n_(e),await this.EWt.ca(s,this.DWt.i_)}i&&this.EWt.Nc&&s.Nc.o7(this.EWt.Nc)}catch(t){Ah(t)}finally{s.jg(),this.Kv(this.EWt),this.bWt===s&&(this.bWt=void 0)}}Rg(){var t;return null==(t=this.DWt)||t.s_(),this.OH.Lx((()=>super.Rg()))}async cn(){var t;null==(t=this.DWt)||t.s_(),this.NWt.cn(),await this.mWt(),await this.OH.cn(),await super.cn()}constructor(t,i){super(t),this.OH=new ro,this.EWt=t,this.vd.cast.strategy!==hw.DISABLED?this.NWt=new T$(this,t,this.vd.cast,i):this.NWt=new N$,this.zQ.jW(this.NWt)}};r();var E$=new class extends i{tWt(t){this.LWt=t}iWt(){return this.LWt}sWt(){return this.kWt}TWt(){switch(this.CWt.getCastState()){case cast.framework.CastState.CONNECTED:return $r.CONNECTED;case cast.framework.CastState.CONNECTING:return $r.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return $r.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return $r.UNAVAILABLE}}async VV(t){await fK(),this.CWt=cast.framework.CastContext.getInstance(),this.CWt.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.zW),this.CWt.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async aWt(){try{const t=await this.CWt.requestSession();if(t)throw t}catch(t){throw new Ca(Wn(t))}}cWt(t){var i;return null==(i=this.LWt)?void 0:i.onStart(t)}vWt(t){var i;return null==(i=this.LWt)?void 0:i.onStop(t)}dWt(t){var i;return null==(i=this.LWt)?void 0:i.onJoin(t)}AWt(t){var i;return null==(i=this.LWt)?void 0:i.onLeave(t)}pWt(t){this.CWt.endCurrentSession(t)}constructor(...t){super(...t),this.kWt=void 0,this.LWt=void 0,this.zW=()=>{const t=this.TWt();this.kWt=t===$r.CONNECTED?new bJ(this.CWt.getCurrentSession()):void 0,this.mo(new LJ(t))}}},b$=new class{get oa(){return this.Ua||(this.Ua=function(t){return{initialize(i){const e=t.VV(uw(i));return e.catch(xs),e},startSession(){const i=t.aWt();return i.catch(xs),i},endSession(){t.xWt()}}}(this)),this.Ua}async VV(t){this.oWt||(this.oWt=this.OWt(t)),await this.oWt}async OWt(t){await this.eWt.VV(t)}async aWt(){if(!this.oWt)throw new b("Chromecast must be initialized before starting a session");await this.oWt,this.eWt.sWt()||await this.eWt.aWt()}jWt(){this.eWt.pWt(!1)}xWt(){this.eWt.pWt(!0)}constructor(t){this.oWt=void 0,this.Ua=void 0,this.eWt=t}}(E$),L$={get chromecast(){return b$.oa}};Ej((t=>new S$(t,E$)),iu.z9),r(),r(),r(),r(),r(),r(),r();var k$=class{zWt(t,i,e,s){t.xR.forEach((t=>{if(!this.PWt(t.BWt)){const n=t.RWt(i,e,s);n&&this.UWt(n)}}))}PWt(t){return this.QWt.get(t)}UWt(t){this.QWt.set(t.FWt,t),this.YWt.set(t.FWt,t.GWt),this.VWt.La(t.WWt)}a7(t){this.QWt.has(t.FWt)||(this.YWt.set(t.FWt,t),this.VWt.La(t.WWt))}HWt(t){return this.YWt.forEach(t)}qWt(t){return this.QWt.forEach(t)}XWt(t){let i=!1;return this.QWt.forEach((e=>{i=e.XWt(t)||i})),i}async cn(){const t=[];this.QWt.forEach((i=>t.push(i.cn()))),this.YWt.forEach((i=>t.push(i.cn()))),await Promise.all(t),this.QWt.clear(),this.YWt.clear()}constructor(t){this.VWt=t,this.QWt=Qt(),this.YWt=Qt()}};r();var Ba=class t extends Ha{ha(){return new C$(this.rQt,this.Gb,this.rL,this.cc)}static ZWt(i){return new t(Qe.GENERAL,i.Gb,i.oQt)}static KWt(i,e){return new t(i.rQt,i.message,i.oQt,e)}constructor(t,i,e,s){super("JWt"),this.rQt=t,this.Gb=i,this.rL=e,this.cc=s}},C$=class extends gg{constructor(t,i,e,s){super("aderror"),this.problemType=t,this.message=i,this.errorCode=e,this.source=s}},x$=class extends Mu{get $Wt(){return this.tHt}get Mc(){let t=!1;return this.iHt((i=>{t=t||i.eHt})),t}get G9(){const t=[];return this.iHt((i=>{const e=i.G9;e.length&&t.push(...e)})),t}get W9(){let t=null;return this.iHt((i=>{null!=t||(t=i.W9)})),t}get H9(){const t=[];return this.iHt((i=>{t.push(...i.H9)})),t}get q9(){const t=[];return this.iHt((i=>{t.push(...i.q9)})),t}o7(t){this.iHt((i=>{i.o7(t)}))}get oa(){var t;return null!=(t=this.Ua)?t:this.Ua=qu(this)}d1(t,i,e){try{this.sHt=e;const s=Dr.kb.jR(t),n=this.tHt.PWt(s.BWt);if(!n)throw new bi(Qe.ADBLOCK,void 0,"Ads could not be loaded.");i!==Vs.Z9&&this.B4||this.rHt.nHt(n),s.d1(t,i,n,this.sHt)}catch(i){0,this.mo(Ba.KWt(i,t.sources))}}uT(){this.iHt((t=>{t.uT()}))}a7(t){this.tHt.a7(t)}hHt(t){this.tHt.qWt((i=>{i.hHt(t)}))}XWt(t){return this.tHt.XWt(t)}iHt(t){return this.tHt.HWt(t)}zg(){this.tHt.qWt((t=>t.zg()))}async Wn(){this.B4=!1;const t=[];this.tHt.qWt((i=>t.push(i.Rg()))),await Promise.all(t)}async cn(){this.Bo(),this.rHt.rn(t.bh,this.E8),this.rn("JWt",this.oHt),await this.tHt.cn()}constructor(i){super(),this.rHt=i,this.sHt=!1,this.B4=!1,this.Ua=void 0,this.oHt=t=>{if(!this.sHt)return;const i=new cc(zw.ADVERTISEMENT_ERROR,t.Gb),e=new ce(le.AD_BLOCKER_DETECTED,t.Gb+" Turn off your AdBlocker and try again.",i);this.rHt.qP(e)},this.E8=()=>{this.B4=!0},i.ln(t.bh,this.E8),this.tHt=new k$(this),this.ln("JWt",this.oHt)}},O$=class extends I${C9(){return this.aHt}get uHt(){return this.cHt}zg(){this.EWt.zg(),this.aHt.zg()}Bg(){void 0===this.hP?(void 0!==this.lHt&&this.dHt(this.lHt),super.Bg()):this.mo(new me(this.hP))}async ca(t,i){if(Pi(i),await super.ca(t,i),Pi(i),!t||!t.ads)return;const e=Boolean(t.blockContentIfAdError);this.aHt.hHt(t.playAdsAfterTime);for(const i of t.ads)this.aHt.d1(i,Vs.Z9,e)}async Rg(){this.hP=void 0,this.fR=void 0,await this.aHt.Wn(),this.mWt(),await super.Rg()}dHt(t){this.fHt=this.Lo.Z_;const i=this.Lo.Ng,e=this.Lo.Y_;t.Ig(i),t.V_(e),this.mB&&(this.EWt.be(),t.ge()),this.cHt=t,this.lHt=void 0,this.Kv(t)}nHt(t){void 0===this.cHt&&(this.lHt=t)}mWt(){this.lHt=void 0,void 0!==this.cHt&&(this.EWt.Z_=this.fHt,this.EWt.Ng=this.Ng,this.EWt.Y_=this.Y_,this.mB&&(this.cHt.be(),this.EWt.ge()),this.Kv(this.EWt),this.cHt=void 0)}O_(){var t;return null!=(t=this.fR)?t:super.O_()}z_(){var t;return null!=(t=this.hP)?t:super.z_()}qP(t){void 0===this.z_()&&(this.hP=t,this.fR=Qh(t),this.mo(new me(t)))}ge(){this.mB=!0,super.ge()}be(){this.mB=!1,super.be()}Wg(t){return void 0===this.cHt&&this.aHt.XWt(t)}async cn(){await this.aHt.cn(),this.mWt(),await super.cn()}constructor(t,i){super(t),this.hP=void 0,this.fR=void 0,this.mB=!0,this.fHt=1,this.EWt=t,this.aHt=new x$(this),this.aHt.$Wt.zWt(i,t,this,t.vd)}};Ej((t=>new O$(t,Dr.kb)),iu.j9),r(),r(),r();var j$=0!==_n.$E?_n.$E:_n.fE,z$=_n.Va&&j$<12,P$=class extends O{get E_(){return this.b_()}set E_(t){this.L_(t)}y9(){return this.Lo.y9()}get ct(){return this.kd()}get P_(){return this.Xv}get fg(){return this._g()}get Sg(){return this.dP}get WWt(){return this._Ht}get ht(){return this.qv}get eHt(){return this.rHt.uHt===this}T_(){return Ki.KB().ks()}D_(){}I_(t){}K_(){return 1}J_(t){}rg(){return new Ki([0,this.E_]).ks()}wg(){return!1}Ag(){return this.Al}yg(){return this.Zv}cs(){return this.Cg().cs}Cg(){return this.sR}fa(){}async cn(){this.Bo(),this.qv.cn(),this.Zv.cn(),this.Al.cn(),this._Ht.cn(),this.Lo.rn(t.mA,this.Ds)}gHt(){z$&&this.wHt(),this.eHt||this.rHt.dHt(this)}mWt(){this.eHt&&(z$&&this.AHt(),_n.Tb&&this.we.querySelectorAll("video[src]").forEach((t=>{t.src=""})),fe.Ys.ett&&this.Lo.Gg(),this.rHt.mWt())}wHt(){this.vHt||(Ys.addEventListener("blur",this.mHt),Ys.addEventListener("focus",this.pHt),this.vHt=!0)}AHt(){Ys.removeEventListener("blur",this.mHt),Ys.removeEventListener("focus",this.pHt),this.vHt=!1}yHt(){requestAnimationFrame((()=>this.Lo.be()))}constructor(i,e){super(i,!0),this.rHt=e,this.vHt=!1,this.Zv=new qe,this.qv=new qe,this.Al=new Tn,this.Xv=new Wc,this._Ht=new Mu,this.sR=new Ro,this.dP=new Wu,this.mHt=()=>{this.Lo.ge()},this.pHt=()=>{this.yHt()},this.Lo.ln(t.mA,this.Ds)}};r(),r();var B$=0,R$="theoplayer-wrapper",U$=class t{get MHt(){return this.THt}get NHt(){return this.DHt}get IHt(){return this.SHt}EHt(t){const i=this.bHt===t.timeOffset;return!this.LHt&&i}get kHt(){return this.CHt}get xHt(){return mJ(this.OHt)&&!this.LHt}get bHt(){return this.OHt}get ql(){return this.jHt}zHt(){if(j(this.jHt)){let t=this.bHt;if(void 0===t)return void(this.jHt=0);if("string"==typeof t&&mJ(t)){const i=this.Lo.kd();j(i)||i===1/0||(t=rc(t)*i)}j(t)||(this.jHt=t)}}get PHt(){return this.BHt}set PHt(t){this.BHt=t}get RHt(){return this.UHt}set RHt(t){this.UHt=t,this.QHt=!1}get FHt(){return this.YHt}GHt(t){this.YHt.push(t)}VHt(){if(!this.LHt){let t,i;const e=this.THt===Vs.Z9&&void 0===this.WHt&&1===this.DHt.length,s=this.DHt[0];AJ(s.sources.type)||e?t=s.sources.src:i=this.HHt(),this.LHt={qHt:this.Lo.we.offsetWidth,XHt:this.Lo.we.offsetHeight,ZHt:this.Lo.we.offsetWidth,KHt:this.Lo.we.offsetHeight,JHt:this.d9,$Ht:this.tR,tqt:t,iqt:i,eqt:s.omidAccessModeRules}}return this.LHt}HHt(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.DHt.map(((t,i)=>this.sqt(t.sources,i))).join("\n")+"</vmap:VMAP>"}sqt(t,i){const e=this.nqt(),s=t.src;return'<vmap:AdBreak timeOffset="'+e+'" breakType="linear,nonlinear" breakId="theoplayer-break-'+this.Bw+"-"+i+'"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:VASTAdData><VAST version="3.0"><Ad id="'+R$+"-"+this.Bw+"-"+i+'"><Wrapper allowMultipleAds="true" followAdditionalWrappers="true"><VASTAdTagURI><![CDATA['+s+"]]></VASTAdTagURI></Wrapper></Ad></VAST></vmap:VASTAdData></vmap:AdSource></vmap:AdBreak>"}nqt(){if(0===this.bHt)return"start";if(this.bHt===1/0)return"end";const t=this.bHt;if("string"==typeof t&&mJ(t)){const i=rc(t)*this.Lo.kd();return vo.WQt(i)}return vo.WQt(this.bHt||0)}rqt(t){this.DHt.push(t)}hqt(t){const i=R$+"-"+this.Bw+"-";for(const e of t)if(Zg(e,i)){const t=Number(e.slice(i.length));if(!j(t)&&t>=0&&t<this.DHt.length)return t}return-1}static oqt(t){if(void 0!==t)return-1===t?1/0:t}aqt(){this.CHt=!0}get fm(){return this.d9}set fm(t){this.d9=t}get Y_(){return this.tR}set Y_(t){this.tR=t}constructor(i,e,s,n){this.THt=e,this.Lo=s,this.SHt=n,this.jHt=NaN,this.BHt=!1,this.UHt=!1,this.CHt=!1,this.YHt=[],this.d9=!1,this.tR=!1,this.DHt=[],this.Bw=++B$,this.WHt=i.timeOffset,this.OHt=t.oqt(this.WHt),this.zHt(),this.DHt.push(i)}};r();var Q$,F$=class{get uqt(){return this.cqt.uqt}get lqt(){return this.cqt.lqt}get H9(){return this.cqt.H9}get t(){return this.cqt.t}hHt(t){this.dqt=t}fqt(t){return!(this.uqt&&!this.uqt.kHt&&"nonlinear"!==this.lqt._qt)||this.uqt.ql>t.ql&&this.uqt.ql!==t.ql}gqt(t){if(t.length)return t.sort(((t,i)=>t.ql-i.ql))[0]}wqt(){if(this.H9.length)return this.gqt(this.Aqt(this.t.b_()))}vqt(){if(!(void 0!==this.dqt&&this.dqt>=0))return this.H9.filter((t=>!t.PHt&&0===t.ql&&t!==this.uqt))[0]}Aqt(t){if(!this.mqt&&(this.mqt=!this.H9.some((t=>j(t.ql))),!this.mqt))return[];const i=this.H9.filter((i=>!i.PHt&&!j(i.ql)&&t<=i.ql));return void 0===this.dqt?i:i.filter((t=>void 0===t.bHt||t.ql>this.dqt))}constructor(t){this.mqt=!1,this.cqt=t,this.dqt=void 0}};!function(t){t[t.pqt=0]="pqt",t[t.yqt=1]="yqt",t[t.Mqt=2]="Mqt"}(Q$||(Q$={}));var Mo,Y$,zn,Gn,G$=class{zg(){this.lo=!0,this.Tqt&&this.Nqt()}Dqt(t,i){this.Iqt(t,i);const e=Gr(this.H9,(i=>i.EHt(t)));if(e)e.rqt(t);else{var s;const e=new U$(t,i,this.Lo,null==(s=t.replaceContent)||s);this.Sqt.push(e),2===this.Eqt&&this.Lqt.bqt(e.ql,e,e.bHt),this.kqt(i,e)}}get lqt(){return this.Cqt}get H9(){return this.Sqt}get t(){return this.Lo}get xqt(){return Boolean(this.tvt)}get Eqt(){return this.Oqt}jqt(){if(Et(this.H9,this.uqt),this.uqt){for(const t of this.uqt.FHt)this.Lqt.zqt();this.uqt=void 0}}Pqt(){for(const t of this.Sqt)for(const i of t.FHt)this.Lqt.Bqt(i,!0);Ri(this.Sqt)}async Rqt(t){this.jqt(),this.Uqt=!0,this.uqt=t,this.Qqt=t.ql,this.tvt=this.Fqt(t),await this.tvt,this.tvt=void 0}async Fqt(t){this.Yqt(t);const i=t.VHt(),e=this.Cqt.Gqt(i);t.PHt=!0;try{await e,t.MHt===Vs.X9&&this.Cqt.Vqt()}catch(t){0,this.uqt=void 0,await this.Nqt()}}Yqt(t){this.lo?t.fm=!0:t.fm=this.rHt.fm,t.Y_=this.rHt.Y_}Wqt(){var t;return null!=(t=this.Hqt.vqt())?t:this.Hqt.wqt()}async Nqt(){if(this.uqt&&!this.uqt.kHt)return this.tvt;const t=this.Wqt();t&&await this.Rqt(t)}get uqt(){return this.qqt}set uqt(t){this.qqt=t}get Uqt(){return this.Xqt}set Uqt(t){this.Xqt=t}Wn(){this.jqt(),Ri(this.Sqt),this.Qqt=0,this.uqt=void 0,this.tvt=void 0,this.Uqt=!1}RHt(){this.Uqt=!1,this.uqt&&(this.uqt.RHt=!0)}async kqt(t,i){t===Vs.X9&&this.lo&&this.Hqt.fqt(i)&&!this.xqt&&"linear"!==this.Cqt._qt&&(!this.uqt||this.uqt&&this.uqt.PHt)&&(await Promise.resolve(),await this.Rqt(i))}aqt(){this.uqt&&this.uqt.aqt()}get Zqt(){if(this.xqt||this.Uqt)return!1;if(this.uqt&&!this.uqt.kHt)return!1;return!!this.Sqt.filter((t=>this.uqt!==t)).length&&Boolean(this.Wqt())}async Kqt(){if(!this.Zqt)return void 0;const t=this.Wqt();t&&await this.Rqt(t)}Iqt(t,i){const e=t.sources.type,s=i===Vs.Z9&&void 0===t.timeOffset,n=AJ(e)||s?1:2;n!==this.Oqt&&(this.Oqt=n,this.Pqt(),this.Cqt.YYt&&!this.xqt&&"linear"!==this.Cqt._qt&&(this.Cqt.YYt.Xf(),this.uqt=void 0,this.tvt=void 0),this.Qqt=0,this.Tqt=!0)}hHt(t){this.Hqt.hHt(t)}cn(){this.Lo.rn(t.yA,this.eQ)}constructor(i,e,s,n,r){this.Oqt=0,this.tvt=void 0,this.Xqt=!1,this.eQ=()=>{const t=this.Sqt.filter((t=>t.xHt));for(const i of t){i.zHt();const t=i.bHt;this.Lqt.Jqt(t,i.ql)}this.lo&&this.Zqt&&this.Nqt()},this.Sqt=[],this.Cqt=i,this.lo=!1,this.Tqt=!1,this.Lo=e,this.rHt=s,this.uqt=void 0,this.Qqt=0,this.Hqt=new F$(this),this.g9=n,this.Lqt=r,this.Lo.ln(t.yA,this.eQ)}};function V$(t,i){if(t===Mo.$qt){const t=i;return{tXt:t.adBreakDuration,iXt:t.adPosition,E_:t.currentTime,ct:t.duration,eXt:t.totalAds}}return i}function W$(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return Gn.sXt;case google.ima.AdError.Type.AD_PLAY:return Gn.nXt}}function H$(t){return lt(t)&&function(t){return"function"==typeof t}(t.getVastErrorCode)}function q$(t){const i=t.getInnerError(),e=i&&H$(i)?q$(i):void 0;return{Gb:t.getMessage(),oQt:t.getErrorCode(),rXt:t.getVastErrorCode(),$w:W$(t.getType()),hXt:e}}function X$(t){if(z_(t))return t}r(),r(),function(t){t.oXt="contentResumeRequested",t.aXt="contentPauseRequested",t.uXt="click",t.yA="durationChange",t.cXt="expandedChanged",t.lXt="start",t.dXt="impression",t.vv="pause",t.fXt="resume",t.$qt="adProgress",t._Xt="adBuffering",t.gXt="firstQuartile",t.bUt="midpoint",t.wXt="thirdQuartile",t.LUt="complete",t.AXt="userClose",t.vXt="linearChanged",t.mXt="loaded",t.pXt="adCanPlay",t.yXt="adMetadata",t.MXt="adBreakReady",t.TXt="interaction",t.NXt="allAdsCompleted",t.DXt="skip",t.IXt="skippableStateChanged",t.SXt="log",t.EXt="viewableImpression",t.bXt="volumeChange",t.LXt="mute"}(Mo||(Mo={})),r(),(Y$||(Y$={})).kXt="adError",r(),function(t){t[t.CXt=-1]="CXt",t[t.xXt=-1]="xXt",t[t.OXt=-1]="OXt",t[t.jXt=101]="jXt",t[t.zXt=102]="zXt",t[t.PXt=200]="PXt",t[t.BXt=201]="BXt",t[t.RXt=202]="RXt",t[t.UXt=300]="UXt",t[t.QXt=301]="QXt",t[t.FXt=302]="FXt",t[t.YXt=303]="YXt",t[t.GXt=400]="GXt",t[t.VXt=402]="VXt",t[t.WXt=403]="WXt",t[t.HXt=405]="HXt",t[t.qXt=500]="qXt",t[t.XXt=501]="XXt",t[t.ZXt=-1]="ZXt",t[t.KXt=503]="KXt",t[t.JXt=602]="JXt",t[t.$Xt=900]="$Xt",t[t.tZt=901]="tZt",t[t.iZt=1005]="iZt",t[t.eZt=1007]="eZt",t[t.sZt=1009]="sZt",t[t.nZt=1010]="nZt",t[t.rZt=1011]="rZt",t[t.hZt=1012]="hZt",t[t.oZt=1013]="oZt",t[t.aZt=1020]="aZt",t[t.uZt=1021]="uZt",t[t.cZt=1101]="cZt",t[t.lZt=1204]="lZt",t[t.dZt=1205]="dZt",t[t.fZt=1300]="fZt",t[t._Zt=-1]="_Zt",t[t.gZt=-1]="gZt",t[t.wZt=-1]="wZt",t[t.AZt=-1]="AZt"}(zn||(zn={})),function(t){t.sXt="adLoadError",t.nXt="adPlayError"}(Gn||(Gn={})),r(),r();var Z$=class extends i{vZt(t){this.Cqt.mo(t)}mZt(t){this.GYt=t,this.GYt.ln(Y$.kXt,this.pZt),this.GYt.ln(Mo.aXt,this.yZt),this.GYt.ln(Mo.oXt,this.MZt),this.GYt.ln(Mo.NXt,this.TZt),this.GYt.ln(Mo.lXt,this.NZt),this.GYt.ln(Mo.LUt,this.DZt),this.GYt.ln(Mo.DXt,this.IZt),this.GYt.ln(Mo.AXt,this.SZt),this.GYt.ln(Mo.uXt,this.EZt),this.GYt.ln(Mo.pXt,this.bZt),this.GYt.ln(Mo.vv,(()=>{this.Cqt.q_||(this.Cqt.LZt(!0),this.Cqt.mo(new ws(this.Cqt.E_))),this.kZt(!0)})),this.GYt.ln(Mo.fXt,(()=>{this.Cqt.q_&&(this.Cqt.LZt(!1),this.Cqt.mo(new vh(this.Cqt.E_)))})),this.GYt.ln(Mo.LXt,(()=>{const i=t.Dg();i>=0&&this.CZt(i)})),this.GYt.ln(Mo.bXt,(()=>{const i=t.Dg();i>=0&&this.CZt(i)})),this.GYt.ln(Mo.yXt,(t=>{this.OZt.xZt(t.type)})),this.GYt.ln(Mo.yA,(t=>{t.t7&&this.jZt(t.t7.ct)})),this.GYt.ln(Mo.SXt,(async t=>{const i=t.zZt.adError,e=H$(i)?q$(i):void 0;e&&(this.PZt(e)?await this.BZt(t):this.RZt(e)?await this.UZt(e):this.QZt(e)&&this.FZt(e))})),this.GYt.ln(Mo.mXt,(t=>{if(t.t7&&(this.Cqt.RHt(),this.OZt.YZt(t.t7),this.GZt=0,t.t7.VZt)){var i;const t=this.Cqt.cg,e=ow.Rv;this.Cqt.j$(e);const s=this.Cqt.E_,n=this.Cqt.cg;n!==t&&this.vZt(new bl(s,n)),null==(i=this.GYt)||i.Ig(this.Cqt.WZt()),this.vZt(new Wi(s,e))}})),this.GYt.ln([Mo._Xt,Mo.dXt,Mo.gXt,Mo.bUt,Mo.wXt],(t=>{t.t7&&this.OZt.HZt(t.t7,t.type,this.Cqt.E_)})),this.GYt.ln(Mo.gXt,this.qZt),this.GYt.ln(Mo.$qt,this.XZt)}async switchToPlayerIfNoNextAd(){if(this.GYt){const t=this.GYt.ZZt();t&&this.KZt(t)||(this.Cqt.Zqt()?await this.Cqt.Kqt():(this.Cqt.JZt(),this.Lo.q_&&!this.Lo.C_&&this.Lo.Bg()))}else if(this.Cqt.Zqt())await this.Cqt.Kqt();else{const t=this.Cqt.q_;this.Cqt.JZt(),t||this.Lo.Bg()}}KZt(t){const i=t.$Zt,e=null==i?void 0:i.eXt;return(null==i?void 0:i.iXt)!==e}XJ(){this.Cqt.bc&&(m(this.Cqt.bc),this.Cqt.bc=null)}QZt(t){return t.$w===Gn.sXt}RZt(t){return t.$w===Gn.nXt}PZt(t){return t.oQt===zn.sZt}async UZt(t){var i;this.FZt(t);const e=[zn.GXt,zn.tZt,zn.uZt,zn.dZt];var s;this.Cqt.f7||na(e,t.oQt)||na(e,null==(i=t.hXt)?void 0:i.oQt)||(this.Cqt.tKt.Uqt=!1,null==(s=this.Cqt.tKt.uqt)||s.aqt(),await this.switchToPlayerIfNoNextAd())}FZt(t){this.Cqt.iKt(t)}async eKt(){this.OZt.zqt(),this.Cqt.aqt(),"nonlinear"===this.Cqt._qt&&(this.OZt.sKt(-1,!1),this.Cqt.nKt(void 0)),"nonlinear"!==this.Cqt._qt&&"none"!==this.Cqt._qt||this.Cqt.Zqt()&&await this.Cqt.Kqt(),this.Cqt.rKt(),this.Cqt.eHt?this.Cqt.mWt():this.hKt()&&this.Lo.mo(new Ds(this.Lo.b_()))}hKt(){return this.Cqt.oKt&&!this.Cqt.aKt&&this.Lo.C_}setCountdownTimer(){this.XJ(),this.Cqt.bc=v((()=>this.kZt()),250)}async BZt(t){void 0!==t.t7&&(this.Cqt.tKt.Uqt=!1,this.Cqt.aqt(),this.Cqt.Zqt()?await this.Cqt.Kqt():this.Cqt.LZt(!0))}jZt(t){this.Cqt.ct!==t&&t>=0&&(this.Cqt.f$(t),this.vZt(new ts(this.Cqt.ct)))}CZt(t){this.Cqt.WZt()!==t&&(0===t?this.Cqt.uKt(t,!0,!1):this.Cqt.uKt(t,!1,!1))}async cKt(){this.Cqt.lKt&&void 0!==this.Lo.O_()&&(this.dKt=new Po,await this.Lo.ca(this.Lo.Oa(),this.dKt.i_),this.fKt&&this.Lo.L_(this.fKt),this.fKt=void 0)}kZt(t){if(this.GYt){const t=this.GYt._Kt();t>this.Cqt.ct&&this.jZt(x.round(t))}const i=this.Cqt.E_;(t||!this.Cqt.q_&&i!==this.Cqt.gKt)&&(this.Cqt.mo(new Tc(i,void 0)),this.Cqt.gKt=i)}Wn(){this.dKt&&(this.dKt.s_(),this.dKt=void 0),this.wKt=!1,this.GZt=0}cn(){this.Wn(),this.Bo()}constructor(t,i,e){super(),this.Cqt=t,this.Lo=i,this.OZt=e,this.wKt=!1,this.dKt=void 0,this.fKt=void 0,this.GZt=0,this.qZt=t=>{if(!t.t7||!t.t7.$Zt)return;const i=t.t7.$Zt;this.OZt.AKt(i.hEt,i.eXt,i.QYt)},this.XZt=t=>{var i,e,s;if(this.GZt>=5)return;this.GZt++;const n=t.zZt;if(!function(t){return lt(t)&&void 0!==t.tXt&&void 0!==t.eXt}(n))return;const r=null==(i=null==(e=this.GYt)?void 0:e.ZZt())||null==(s=i.$Zt)?void 0:s.hEt;void 0!==r&&this.OZt.AKt(r,n.eXt,n.tXt)},this.pZt=async t=>{t.zZt.vKt&&await this.UZt(t.zZt.vKt)},this.TZt=async()=>{this.wKt=!0,this.Cqt.aqt(),await this.MZt()},this.NZt=t=>{if(!t.t7)return;const i=t.t7;this.Cqt.nKt(i),this.Cqt.ge(),this.Cqt.mKt(),this.OZt.pKt(i);const e=i.ct;if(this.jZt(e),i.VZt){const t=this.Cqt.E_,i=this.Cqt.cg;this.Cqt.j$(ow.Qv),this.vZt(new Xi(t,i)),this.vZt(new mt(t,i)),this.vZt(new Yi(t,i)),this.Cqt.q_||this.vZt(new Vi(this.Cqt.E_)),this.setCountdownTimer(),this.kZt(!0)}else this.Cqt.mWt(),this.Lo.ge(),this.Cqt.q_||this.Lo.Bg()},this.DZt=t=>{var i;if(!t.t7)return;const e=t.t7;if(this.XJ(),this.OZt.sKt(this.Cqt.ct,e.VZt),this.Cqt.cg!==ow.Rv){const t=ow.Rv;this.Cqt.j$(t);const i=this.Cqt.E_;this.vZt(new bl(i,t))}this.jZt(NaN),this.Cqt.yKt=!1,null==(i=this.GYt)||i.Ig(this.Cqt.WZt())},this.IZt=t=>{t.t7&&(this.DZt(t),this.OZt.IZt(t.t7,this.Cqt.E_,this.Cqt.ct))},this.SZt=t=>{t.t7&&(this.OZt.sKt(-1,t.t7.VZt),this.Cqt.aqt(),!t.t7.VZt&&this.Cqt.Zqt()&&this.Cqt.Kqt())},this.EZt=t=>{t.t7&&(t.t7.VZt?this.Cqt.Pg():this.Lo.Pg())},this.bZt=()=>{var t;(this.Cqt.yKt=!0,this.Cqt.MKt)&&(null==(t=this.GYt)||t.Pg(),this.Cqt.MKt=!1)},this.yZt=t=>{var i;if(!t.t7)return;this.Cqt.lKt&&(this.fKt=this.Lo.b_(),this.Lo.Yg(),this.Lo.Lg=!0),this.Cqt.TKt=!0;const e=t.t7;this.OZt.wd(e);const s=e.ct;this.Cqt.nKt(e),this.jZt(s),this.Cqt.LZt(!1),this.Cqt.ge(),this.Cqt.gHt(),this.Cqt.lKt||this.Lo.be(),this.Lo.Pg(),this.Cqt.NKt(e);0===(null==(i=e.$Zt)?void 0:i.hEt)||this.Cqt.mo(new wc(this.Cqt.E_))},this.MZt=async t=>{const i=null==t?void 0:t.t7;this.Cqt.TKt=!1,"linear"===this.Cqt._qt&&this.OZt._d(),i&&i.ct>=0&&this.jZt(i.ct),this.Lo.kd()===1/0&&this.Cqt.DKt(),this.Cqt.yKt=!1,this.wKt&&await this.eKt(),this.Cqt.LZt(!0);try{await this.cKt()}catch(t){return void(Oi(t)||this.mo(new yr(t)))}if(this.Cqt.mWt(),this.Cqt.be(),this.Lo.C_||this.Lo.Bg(),i&&this.Cqt.nKt(i),this.Cqt.oKt){if(this.Cqt.lKt){var e;const t=this.Lo.xg(),i=null==(e=this.Lo.bt)?void 0:e.src;t&&i&&(t.src=i)}this.Cqt.aKt=!0}this.Lo.Lg=!1,this.Cqt.Zqt()&&await this.Cqt.Kqt()}}};r(),r(),r();var zr,K$,J$=class extends sh{get Nc(){return this.Tc}get QYt(){return this.IKt}set QYt(t){this.IKt=t}get FYt(){return this.SKt}set FYt(t){this.SKt=t}set hEt(t){this.iFt=t}get hEt(){return this.iFt}EKt(){this.bKt=!0}LKt(t){this.Tc.push(t)}get eg(){return this.bKt}constructor(t,i,e){super(),this.IKt=t,this.SKt=i,this.iFt=e,this.Tc=[],this.bKt=!1}},$$=class extends J${get UYt(){return eh.zYt}constructor(t,i,e){super(-1,-1,t),this.kKt=i,this.CKt=e}};r(),r(),function(t){t._Qt="linear",t.gQt="nonlinear",t.Hv="unknown"}(zr||(zr={})),function(t){t.NONE="none",t.READY="ready"}(K$||(K$={}));var t0=class extends GJ{xKt(t,i,e,s,n,r){this.ym=t,this.pk=i,this.yk=e,this.JL=s,this.mRt=n,this.wUt=r,this.OKt="ready"}get jKt(){return this.OKt}get vRt(){return this.mRt}get ct(){return this.JL}V9(){var t;return null!=(t=this.Ua)?t:this.Ua=this.ha()}get Ti(){return this.yk}get o(){return this.ym}get gUt(){return this.wUt}get ji(){return this.pk}get _qt(){return this.zKt}get RRt(){}nGt(){return""}aGt(){return""}oGt(){return""}constructor(t,i){super(),this.zKt=i,this.ym=void 0,this.wUt=void 0,this.pk=void 0,this.yk=void 0,this.JL=void 0,this.mRt=[],this.OKt="none",this.Ul=t}};function Kn(t){return{adSystem:void 0,creativeId:void 0,universalAdIds:[],get readyState(){return t.jKt},get adBreak(){return t.Ul.V9()},get duration(){return t.ct},get companions(){return t.vRt.map((t=>t.V9()))},get clickThrough(){return t.RRt},get width(){return t.ji},get type(){return t._qt},get height(){return t.Ti},get id(){return t.o},get skipOffset(){return t.gUt},get integration(){return t.UYt}}}r(),r();var i0=class{get LRt(){return this.kRt}get PRt(){return""}get PKt(){return this.BKt}get RRt(){return this.URt}get Ti(){return this.yk}get HUt(){return this.RKt}get ji(){return this.pk}V9(){return this.Ua||(this.Ua=function(t){return{get adSlotId(){return t.LRt},get altText(){return t.PRt},get contentHTML(){return t.PKt},get clickThrough(){return t.RRt},get height(){return t.Ti},get resourceURI(){return t.HUt},get width(){return t.ji}}}(this)),this.Ua}UKt(t){const i=function(t){try{return BK(t,"text/html")}catch(t){return}}(t.O);i&&(this.URt=e0(i,"a","href"),this.RKt=e0(i,"img","src"))}constructor(t){this.Ua=void 0,this.URt=void 0,this.RKt=void 0,this.pk=t.ji,this.yk=t.Ti,this.BKt=t.O,this.kRt=t.LRt,this.UKt(t)}};function e0(t,i,e){const s=t.querySelector(i);return s&&s.getAttribute(e)||""}r();var s0=class extends t0{set QKt(t){this.FKt=t}get QKt(){return this.FKt}get UYt(){return eh.Xh}get BBt(){var t;return null==(t=this.YKt)?void 0:t.BBt}get GKt(){var t;return null==(t=this.YKt)?void 0:t.ERt}get uRt(){var t;return null==(t=this.YKt)?void 0:t.uRt}get mP(){var t;return null==(t=this.YKt)?void 0:t.mP}get VKt(){var t,i;return null!=(i=null==(t=this.YKt)?void 0:t.VKt)?i:[]}get WKt(){var t,i;return null!=(i=null==(t=this.YKt)?void 0:t.WKt)?i:[]}get HKt(){var t,i;return null!=(i=null==(t=this.YKt)?void 0:t.HKt)?i:[]}ha(){return function(t,i){return Ou(t,{bitrate:0,contentType:void 0,mediaUrl:void 0,traffickingParameters:void 0,traffickingParametersString:void 0,universalAdIds:[],get adSystem(){return i.BBt},get apiFramework(){return i.GKt},get creativeId(){return i.uRt},get title(){return i.mP},get wrapperAdIds(){return i.VKt},get wrapperAdSystems(){return i.WKt},get wrapperCreativeIds(){return i.HKt}})}(Kn(this),this)}qKt(t){this.YKt=t;const i=n0(t);this.xKt(t.sUt,t.XKt,t.ZKt,t.ct,i,-1)}constructor(t,i){super(t,i),this.FKt=0,this.YKt=void 0}};function n0(t){return t.HBt.map((t=>new i0(t)))}var r0=class extends t0{ha(){return function(t,i){return Ou(t,{get adSystem(){return i.BBt},get apiFramework(){return i.GKt},get bitrate(){return i.KKt},get contentType(){return i.gP},get creativeId(){return i.uRt},get mediaUrl(){return i.JKt},get title(){return i.mP},get traffickingParameters(){return i.$Kt},get traffickingParametersString(){return i.tJt},get wrapperAdIds(){return i.VKt},get wrapperAdSystems(){return i.WKt},get wrapperCreativeIds(){return i.HKt},get universalAdIds(){return i.XBt}})}(Kn(this),this)}qKt(t){this.YKt=t,this.xKt(t.sUt,t.XKt,t.ZKt,t.ct,n0(t),t.iJt),this.zKt=t.VZt?zr._Qt:zr.gQt}get UYt(){return eh.zYt}get BBt(){return this.YKt?_h(this.YKt.BBt):void 0}get GKt(){return this.YKt?_h(this.YKt.ERt):void 0}get KKt(){return this.YKt?this.YKt.eJt:0}get gP(){return this.YKt?_h(this.YKt.gP):void 0}get uRt(){return this.YKt?_h(this.YKt.uRt):void 0}get sJt(){return this.YKt?_h(this.YKt.sJt):void 0}get JKt(){var t;const i=null==(t=this.YKt)?void 0:t.JKt;return z_(i)?i:this.nJt}set JKt(t){this.nJt=t}get mP(){var t;return null==(t=this.YKt)?void 0:t.mP}get $Kt(){return this.YKt?_h(this.YKt.$Kt):void 0}get tJt(){return this.YKt?_h(this.YKt.tJt):void 0}get VKt(){var t,i;return null!=(i=null==(t=this.YKt)?void 0:t.VKt)?i:[]}get WKt(){var t,i;return null!=(i=null==(t=this.YKt)?void 0:t.WKt)?i:[]}get HKt(){var t,i;return null!=(i=null==(t=this.YKt)?void 0:t.HKt)?i:[]}get XBt(){var t,i;return null!=(i=null==(t=this.YKt)?void 0:t.XBt.map((t=>({adIdRegistry:t.rJt,adIdValue:t.hJt}))))?i:[]}constructor(t){super(t,zr.Hv),this.YKt=void 0,this.nJt=void 0}};function _h(t){return null===t?void 0:t}r(),r();var h0=class{get WWt(){return this.OZt.WWt}get FWt(){return this.oJt}get eHt(){return this.OZt.eHt}get W9(){var t;return null!=(t=this.OZt.W9)?t:null}get G9(){const t=this.OZt.aJt;return t?[t]:[]}get H9(){return this.OZt.H9}get q9(){return this.OZt.q9}o7(t){this.OZt.o7(t)}uT(){this.OZt.uT()}cn(){return Promise.resolve()}constructor(t,i){this.OZt=t,this.oJt=i}},Nc=class{get uJt(){return this.cJt}get WWt(){return this._Ht}get eHt(){return this.lJt}get aJt(){return this.rGt}get W9(){return this.lGt}get H9(){return Nh(this.dGt,(t=>{if(t.eg)return[];const i=t.Nc;if(t===this.lGt&&void 0!==this.rGt){const t=i.indexOf(this.rGt);if(t>=0)return i.slice(t+1)}return i}))}get q9(){return this.dGt.filter((t=>!t.eg))}constructor(t,i){this._Ht=t,this.dGt=[],this.lJt=!1,this.cJt=new h0(this,i)}};r();var o0=class extends $e{ha(){return new a0(this.t7.V9())}constructor(t){super("dJt",t)}},a0=class extends Ts{constructor(t){super("adimpression",t)}};r();var u0=class extends $e{ha(){return new c0(this.t7.V9(),this.currentTime)}constructor(t,i){super("fJt",t),this.currentTime=i}},c0=class extends Ts{constructor(t,i){super("adfirstquartile",t),this.currentTime=i}};r();var ar=class extends $e{ha(){return new l0(this.t7.V9(),this.currentTime)}constructor(t,i){super("_Jt",t),this.currentTime=i}},l0=class extends Ts{constructor(t,i){super("admidpoint",t),this.currentTime=i}};r();var d0=class extends $e{ha(){return new f0(this.t7.V9(),this.currentTime)}constructor(t,i){super("gJt",t),this.currentTime=i}},f0=class extends Ts{constructor(t,i){super("adthirdquartile",t),this.ad=t,this.currentTime=i}};r();var lr=class extends $e{ha(){return new _0(this.t7.V9(),this.wJt)}get wJt(){return this.AJt}constructor(t,i){super("vJt",t),this.AJt=i}},_0=class extends Ts{constructor(t,i){super("adskip",t),this.playedPercentage=i}};r();var g0=class extends tc{ha(){return new w0(this.Ul.V9())}constructor(t){super("mJt",t)}},w0=class extends pc{constructor(t){super("updateadbreak",t)}};r();var A0=class extends Ha{ha(){return new v0(this.t7.V9())}constructor(t){super("pJt"),this.t7=t}},v0=class extends gg{constructor(t){super("adbuffering"),this.ad=t}};r();var m0=class extends Ha{ha(){return new p0}constructor(){super("yJt")}},p0=class extends gg{constructor(){super("admetadata")}},y0=class t extends Nc{MJt(t,i){for(let e=0;e<t;e++){const t=new r0(i);i.LKt(t),this.WWt.mo(new pn(t))}}bqt(t,i,e){let s=t;s===1/0&&(s=-1);const n=new $$(s,e,i);this.dGt.push(n),i.GHt(n),this.WWt.mo(new Qj(n))}Jqt(t,i){for(const e of this.dGt)j(e.hEt)&&e.kKt===t&&(e.hEt=i,this.WWt.mo(new g0(e)))}Bqt(t,i){void 0===i&&(i=!1),i&&Et(this.dGt,t),this.WWt.mo(new cn(t))}zqt(){if(this.W9){this.Bqt(this.W9,!0);const t=Boolean(this.rGt&&this.rGt._qt===zr._Qt);this.TJt(void 0,t)}}NJt(t,i){const e=i.$Zt;if(!e)return;const s=e.iXt-1,n=t.Nc[s];return n.qKt(i),this.WWt.mo(new ah(n)),n.Ul.QYt=e.QYt,n}get eHt(){return this.DJt.eHt}IJt(t){if(!na(this.SJt,t)){if(t){if(this.rGt===t)return;this.rGt=t;for(const i of this.EJt)this.xZt(i,t,this.DJt.E_)}else{if(!this.rGt)return;const t=new fa(this.rGt,this.rGt.Ul.hEt);this.SJt.push(this.rGt),this.rGt=void 0,this._Ht.mo(t)}Ri(this.EJt)}}TJt(t,i){if(t){var e;if((null==(e=this.W9)?void 0:e.hEt)===t.hEt)return;this.lGt=t,i&&this.WWt.mo(new ka(this.lGt))}else{if(!this.lGt)return;const t=new Bh(this.lGt);this.lGt=void 0,Ri(this.SJt),i&&this._Ht.mo(t)}}bJt(t){return this.dGt.filter((i=>Ua(i.hEt,t,.01)))[0]}static LJt(t,i){if(i.$Zt)return t.Nc[i.$Zt.iXt-1]}wd(t){if(!t.$Zt)return;const i=t.$Zt,e=this.bJt(i.hEt);e&&(Ri(this.EJt),this.TJt(e,t.VZt))}_d(){this.W9&&this.WWt.mo(new Bh(this.W9)),Ri(this.EJt),this.zqt()}pKt(i){if(!this.lGt&&i.$Zt){const t=this.bJt(i.$Zt.hEt);this.TJt(t,i.VZt)}if(this.lGt){const e=t.LJt(this.lGt,i);if(!e)return;this.NJt(this.lGt,i);const s=i.JKt;z_(s)&&!z_(e.JKt)&&(e.JKt=s,this.WWt.mo(new ah(e))),this.IJt(e),this.WWt.mo(new tu(this.rGt,e.Ul.hEt))}else 0}sKt(t,i){if(this.IJt(void 0),!i&&this.W9){const t=this.W9;this.TJt(void 0,!1),this.Bqt(t)}}YZt(t){const i=t.$Zt;if(!i)return;const e=this.bJt(i.hEt);if(!e)return;this.AKt(i.hEt,i.eXt,i.QYt);const s=this.NJt(e,t);s&&this.WWt.mo(new Mc(s))}AKt(t,i,e){const s=this.bJt(t);if(!s)return;const n=s.Nc.length;if(i>n){const t=i-n;this.MJt(t,s),s.QYt=e,this.WWt.mo(new g0(s))}}IZt(i,e,s){if(!this.lGt)return;const n=t.LJt(this.lGt,i);if(n){const t=e/s;this.WWt.mo(new lr(n,t))}}HZt(i,e,s){if(!this.lGt)return;let n=this.rGt;if(!n){const s=t.LJt(this.lGt,i);if(!s||na(this.SJt,s))return void this.EJt.push(e);n=s,this.NJt(this.lGt,i),this.IJt(n)}this.xZt(e,n,s)}xZt(t,i,e){t===Mo.yXt?this.WWt.mo(new m0):t===Mo.dXt&&i?this.WWt.mo(new o0(i)):t===Mo._Xt&&i?this.WWt.mo(new A0(i)):t===Mo.gXt&&i&&e?this.WWt.mo(new u0(i,e)):t===Mo.bUt&&i&&e?this.WWt.mo(new ar(i,e)):t===Mo.wXt&&i&&e&&this.WWt.mo(new d0(i,e))}uT(){this.DJt.uT()}o7(t){this.DJt.o7(t)}Wn(){const t=Boolean(this.rGt&&this.rGt._qt===zr._Qt);this.IJt(void 0),this.TJt(void 0,t);for(const t of this.dGt)this.Bqt(t);Ri(this.dGt),Ri(this.EJt),Ri(this.SJt)}cn(){this.Wn()}constructor(t,i){super(t,eh.zYt),this.DJt=i,this.EJt=[],this.SJt=[]}};function M0(t){const i=s.google.ima.settings;t.ads&&t.ads.vpaidMode&&s.google.ima.settings.setVpaidMode(function(t){const i=s.google.ima.ImaSdkSettings.VpaidMode;switch(t){case xa.ENABLED:return i.ENABLED;case xa.INSECURE:return i.INSECURE;case xa.DISABLED:default:return i.DISABLED}}(t.ads.vpaidMode)),i.setPlayerVersion("6.9.0"),i.setPlayerType("THEOplayer"),i.setAutoPlayAdBreaks(!0),i.setDisableCustomPlaybackForIOS10Plus(!T0(t));const e=function(t){const i=t.ui&&t.ui.language;return"string"==typeof i?i:void 0}(t);e&&i.setLocale(e)}function T0(t){return _n.Va&&t.allowNativeFullscreen}r();var N0=class i extends P${get GWt(){return this.Lqt.uJt}get kJt(){return this.Lqt}get tKt(){return this.cqt}get lKt(){return T0(this.WW)}CJt(t,i,e){i===Vs.Z9&&void 0!==e&&(this.sHt=e),this.cqt.Dqt(t,i)}static get FWt(){return eh.zYt}get FWt(){return i.FWt}get xJt(){return this.WW.ads.preload===Dh.MIDROLL_AND_POSTROLL}o7(t){const i=this.OJt();for(const e of i)TK(e.sources,e.timeOffset)||t.d1(e,Vs.X9,!1)}OJt(){const t=[],{G9:i,H9:e}=this.GWt,s=[];for(const n of i.concat(e)){const i=n.Ul.CKt;if(na(s,i.Bw))continue;const e=i.hqt(n.VKt);e>=0?t.push(...i.NHt.slice(e)):t.push(...i.NHt),s.push(i.Bw)}for(const i of this.cqt.H9)i.PHt||t.push(...i.NHt);return Ic(t)}set _qt(t){this.zKt=t}get _qt(){return this.zKt}get YYt(){return this.GYt}set YYt(t){this.GYt=t,this.jJt=!1}b_(){if(!this.YYt)return 0;const t=this.YYt._Kt();return j(this.ct)||t<0?0:this.ct-t}L_(t){}kd(){return this.JL||NaN}f$(t){this.JL=t}G_(){return this.Lo.Y_}V_(t){this.uKt(this.Ng,t,!0)}X_(){return this.iR}LZt(t){this.iR=t}get yKt(){return this.zJt}set yKt(t){this.zJt=t}get f7(){return this.sHt}get oKt(){return this.PJt}get MKt(){return this.BJt}set MKt(t){this.BJt=t}get aKt(){return this.RJt}set aKt(t){this.RJt=t}pg(){var t,i,e;return null!=(e=null==(t=null==(i=this.YYt)?void 0:i.ZZt())?void 0:t.ZKt)?e:0}Tg(){var t,i,e;return null!=(e=null==(t=null==(i=this.YYt)?void 0:i.ZZt())?void 0:t.XKt)?e:0}y_(){return[]}hHt(t){this.dqt=t,this.cqt.hHt(t)}Vqt(){!this.jJt&&this.YYt&&(this.YYt.gn(),this.jJt=!0)}nKt(t){this._qt=t?t.VZt?"linear":"nonlinear":"none"}_g(){return Ki.KB().ks()}Dg(){return this.Lo.Ng}Ig(t){this.uKt(t,this.Y_,!0)}WZt(){return this.Lo.Y_?0:this.Lo.Ng}uKt(t,i,e){const s=this.Lo.Ng!==t||this.Lo.Y_!==i;s&&(this.Lo.Ng=t,this.Lo.Y_=i),this.YYt&&e&&this.YYt.Ig(this.WZt()),s&&this.mo(new Ve(this.E_,this.Ng))}x_(){return!1}O_(){if(this.UJt&&this.sHt)return this.UJt}z_(){if(this.QJt&&this.sHt)return this.QJt}dg(){return this.O$}j$(t){this.O$=t,this.mo(new Qi(this.E_,t))}get TKt(){return this.FJt}set TKt(t){this.FJt=t}zg(){this.Lo.rn(t.bh,this.YJt),this.lo||(this.lo=!0,this.cqt.zg(),this.mKt())}async Bg(){if(this.GJt)return;this.VJt.s_(),this.VJt=new Po;const t=this.q_;this.LZt(!1),this.mo(new vh(this.E_)),this.WJt()||(this.lKt||this.Lo.be(),this.mo(new wc(this.E_))),this.yKt||(this.MKt=!1);const i=Boolean(this.YYt);this.GJt=this.cqt.Nqt();try{await this.GJt}finally{this.GJt=void 0}try{Pi(this.VJt.i_)}catch(t){return}if(this.lo||this.YJt(),!this.UJt||!this.sHt)if(this.YYt){if(t)if(i)try{Pi(this.VJt.i_),this.YYt.HJt(),this.mo(new Vi(this.E_))}catch(t){return}else this.Vqt()}else this.sHt||(this.mWt(),this.rHt.Bg())}Pg(){var t;this.q_||(this.LZt(!0),this.mo(new ws(this.E_))),this.VJt.s_(),this.yKt?null==(t=this.YYt)||t.Pg():this.MKt=!0}uT(){var t;null==(t=this.YYt)||t.uT()}rKt(){this.YYt&&(this.XJt.qJt(),this.YYt.Rg(),this.YYt.Xf(),this.YYt=void 0,this._qt="none",this.jJt=!1)}async Rg(){var t;this.gKt=0,this.cqt.Wn(),this.VJt.s_(),this.LZt(!0),this.PJt=!1,this.RJt=!1,this.yKt=!1,this.Lqt.Wn(),this.rKt(),this.JZt(),null==(t=this.ZJt)||t.Wn(),this.MKt=!1,this.XJt.Xf()}ge(){this.KJt.ge(),this.lKt&&this.Lo.ge()}be(){this.KJt.be()}JJt(){return Boolean(this.YYt)&&na(this.YYt.$Jt(),-1)&&!this.PJt}RHt(){this.cqt.RHt()}Zqt(){return this.cqt.Zqt}aqt(){this.cqt.aqt()}Kqt(){return this.cqt.Kqt()}XWt(i){if(this.JJt()){if(i.type===t.yh&&this.Lo.C_)return!0;if(i.type===t.NA)return this.PJt=!0,this.XJt.qJt(),!0}return!1}WJt(){return Boolean(this.YYt&&this.YYt.ZZt())}async Gqt(t){try{this.rKt();const i=this.t$t();this.KJt.VV(),this.YYt=await this.XJt.Gqt(t,this.ZJt,i),this.i$t(this.YYt)}catch(t){this.e$t.UZt(t)}}i$t(t){if(t.Ig(this.WZt()),this.cqt.Eqt===Q$.yqt){const i=t.$Jt();if(i.length)for(const t of i)this.Lqt.bqt(t,this.cqt.uqt);else this.Lqt.bqt(this.cqt.uqt.ql,this.cqt.uqt)}this.e$t.Wn(),this.e$t.mZt(t)}xg(){if(this.GYt&&this.lKt&&this.WJt())return this.Lo.xg()}Cg(){return this.lKt&&this.eHt?this.Lo.la:super.Cg()}t$t(){const t=this.cqt.Eqt===Q$.yqt,i=!(!this.s$t||!t)&&this.xJt;let e,s;this.WW.ads.showCountdown||(e=[]),void 0!==this.WW.ads.allowedMimeTypes&&(s=this.WW.ads.allowedMimeTypes);return{n$t:s,r$t:e,h$t:i,KKt:this.WW.ads.googleIma.bitrate,o$t:void 0,a$t:this.dqt}}mKt(){if(!this.s$t&&!this.Y_&&(this.s$t=!0,this.GYt)){const t=this.t$t();this.GYt.u$t(t)}}iKt(t){this.UJt=new cc(zw.ADVERTISEMENT_ERROR,t.Gb),this.QJt=new ce(le.AD_ERROR,"There was a problem playing ads.",this.UJt),this.WWt.mo(Ba.ZWt(t))}JZt(){this.eHt&&(this.Lo.ge(),this.mWt(),this.be())}DKt(){var t;if(this.Lo.b_()===1/0||0===this.Lo._g().length)return;(null==(t=this.cqt.uqt)?void 0:t.IHt)&&-1!==this.c$t&&(this.Lo.L_(this.Lo.b_()+this.c$t),this.c$t=-1)}NKt(t){var i,e;this.c$t=null!=(e=null==(i=t.$Zt)?void 0:i.QYt)?e:-1}mWt(){super.mWt(),this.Lo.ge(),this.lKt&&!this.Lo.C_&&this.Lo.Bg()}yHt(){this.lKt||super.yHt()}async cn(){this.e$t.rn(Bi.Zo,this.l$t),await super.cn(),this.rKt(),this.XJt.rn("d$t",this.f$t),this.XJt.Xf(),this.KJt.Xf(),this.cqt.cn(),this.e$t.cn()}constructor(i,e,s,n,r,h,o){super(i,e),this.lo=!1,this.sHt=!1,this.UJt=void 0,this.QJt=void 0,this.c$t=-1,this.zKt="none",this.FJt=!1,this.s$t=!1,this.jJt=!1,this.VJt=new Po,this.zJt=!1,this.BJt=!1,this.f$t=t=>{this.WWt.mo(t)},this.l$t=t=>{this.UJt=new cc(zw.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.QJt=cl(this.UJt)},this.gKt=NaN,this.YJt=()=>{this.lo||this.zg()},this.WW=s,this.iR=!0,this.JL=NaN,this.O$=ow.Rv,this.PJt=!1,this.RJt=!1,this.Lqt=new y0(this.WWt,this),this.e$t=new Z$(this,this.Lo,this.Lqt),this.e$t.ln(Bi.Zo,this.l$t),this.Lo.ln(t.bh,this.YJt),this.cqt=new G$(this,this.Lo,this.rHt,n,this.Lqt),this.ZJt=o,this.XJt=h,this.KJt=r,this.be(),this.XJt.ln("d$t",this.f$t)}};r();var dr=class{registerWebImaAdPlayerConstructor(t){this._$t=t}createAdPlayer(t,i,e){return D0()&&this._$t?this._$t(t,i,e):void 0}};function D0(){if(Boolean(Ys.google&&Ys.google.ima)){return!(1===_.keys(Ys.google.ima).length&&Ys.google.ima.dai)}return!1}dr.kb=new dr;var I0=class{get BWt(){return N0.FWt}zR(t){return t&&t.integration===KI.GOOGLE_IMA}RWt(t,i,e){return dr.kb.createAdPlayer(t,i,e)}d1(t,i,e,s){e.CJt(t,i,s)}nF(t){const i=gc(t.sources);if(!i)return;const e={integration:KI.GOOGLE_IMA,sources:i,omidAccessModeRules:X$(t.omidAccessModeRules)},s=lh(t.timeOffset);return void 0!==s&&(e.timeOffset=s),e}};Dr.kb.PR(new I0),r(),r(),r(),r();var S0=class extends Ha{ha(){return new E0}constructor(){super("cGt")}},E0=class extends gg{constructor(){super("adloaded")}},mh=-1,b0=class{get VYt(){return this.dGt}get g$t(){return this.w$t}get tst(){return this.z7}get A$t(){return this.OHt}get v$t(){return this.m$t}get ql(){if(j(this.p$t)){const t=vo.qQt(this.OHt,this.XYt.t.kd());void 0===t||j(t)||(this.p$t=t)}return this.p$t}y$t(){return this.z7<this.dGt.length}wc(){let t;return this.z7<this.dGt.length&&(t=this.dGt[this.z7],this.z7++),t}M$t(t){t.NQt=this,this.dGt.push(t)}async T$t(t){let i=!1;for(const e of this.dGt)try{await e.Pn(),i=!0}catch(i){0,Et(this.dGt,e);const s=e.l7.sources,n="string"==typeof s?s:s.src;t.mo(Ba.KWt(i,n))}return this.m$t=!0,i}$Yt(){this.JYt=!0}KYt(){return this.JYt}N$t(){return this.dGt.some((t=>Tr(t).some((t=>t.VBt))))}constructor(t,i){this.dGt=[],this.JYt=!1,this.OHt=t,this.z7=0,this.XYt=i,this.p$t=NaN,this.m$t=!1,this.w$t=new WJ(this,this.XYt)}},L0=class i extends ha{get D$t(){let t=0;for(const i of this.I$t)i.KYt()||(t+=1);return t}S$t(){this.b$t.E$t()}gn(){this.xo(),this.L$t.ln("r7",this.b$t.k$t)}bn(){this.Po(),this.L$t.rn("r7",this.b$t.k$t),this.t$=this.$m,this.b$t.Wn();for(const t of this.I$t)t.$Yt();Ri(this.I$t)}xo(){this.C$t||(this.Lo.ln(t.XA,this.x$t),this.C$t=!0)}Po(){this.C$t&&(this.Lo.rn(t.XA,this.x$t),this.C$t=!1)}get H9(){return this.I$t}O$t(){return this.j$t(new Tc(mh,void 0))}z$t(t){return this.P$t(t,0,0).length>0}B$t(t,i){let e,s=0;for(const n of this.I$t){if(n.KYt())continue;const r=n.ql;r>=t&&r<=i&&r>=s&&!j(r)&&(e=n,s=e.ql)}return e}R$t(t){return this.j$t(new Tc(t,void 0))}U$t(){if(!this.Q$t&&void 0!==this.dqt){this.Q$t=!this.I$t.some((t=>j(t.ql)));for(const t of this.I$t)t.ql!==mh&&t.ql<=this.dqt&&!t.KYt()&&t.$Yt()}}F$t(t){for(const i of t)i.$Yt();this.cHt.Y$t(t),0===this.D$t&&this.Po()}P$t(t,i,e){return this.I$t.filter((s=>{if(s.KYt())return!1;const n=s.ql;return this.G$t(n,t)||this.V$t(n,t,i,e)}))}G$t(t,i){switch(i){case 0:return 0===t;case mh:return t===mh;default:return!1}}V$t(t,i,e,s){if(t<0)return!1;const n=t-i;return-1!==n&&n<=e&&n>=-s}W$t(t){if(t&&t.length>0){for(const e of t){const t=i.oqt(e.hEt);let s=this.Vyt(e);-1===s&&(this.Q$t=void 0===this.dqt,this.I$t.push(new b0(t,this.H$t)),s=this.I$t.length-1);this.I$t[s].M$t(e)}this.xo()}}static oqt(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}Vyt(t){const e=i.oqt(t.hEt);return Da(this.I$t,(t=>e===i.oqt(t.A$t)))}q$t(t){Et(this.I$t,t)}hHt(t){this.dqt=t,this.Q$t=void 0===t}constructor(t,i,e,s){super(),this.Q$t=!1,this.x$t=t=>W(this.j$t(t)),this.j$t=async t=>{this.U$t();const i=t.currentTime,e=t.currentTime!==mh?this.B$t(this.t$,t.currentTime):this.P$t(t.currentTime,0,0)[0];let s,n;const r=this.Lo.kd()-10;if(n=this.z$t(mh)&&x.ceil(i)===x.ceil(r)?this.P$t(mh,10,0).filter((t=>!t.v$t)):this.P$t(i,10,0).filter((t=>!t.v$t)),n.length){const t=(await Promise.all(n.map((t=>t.T$t(this.L$t))))).some((t=>!0===t));t&&this.mo(new S0),(!t||!this.b$t.X$t||n[0].ql<this.b$t.X$t.ql)&&(s=n[0])}e&&(e!==this.b$t.X$t&&(s=e),this.F$t([e])),s&&(this.b$t.k$t(),this.b$t.X$t=s,await this.b$t.E$t()),j(this.Lo.kd())||(this.t$=t.currentTime)},this.Lo=t,this.cHt=i,this.H$t=new VJ(this.cHt,this.Lo),this.dqt=void 0,this.Q$t=!1,t.kd()!==1/0?this.$m=0:this.$m=t.b_(),this.t$=this.$m,this.I$t=[],this.L$t=e,this.b$t=s,this.C$t=!1}};r(),r();var k0=class extends ha{get Z$t(){return this.AVt}get WWt(){return this._Ht}K$t(){this.J$t(),this.$$t(),this.hP=void 0}t0t(t){this.i0t=this.i0t.concat(t)}e0t(t){this.s0t=this.s0t.concat(t)}$$t(){this.i0t=[]}J$t(){this.s0t=[]}n0t(t){for(const i of this.i0t)i.XU===t&&Ir(i.eventURL)}ge(){this.Z$t.style.display=""}be(){this.Z$t.style.display="none"}cn(){this.Bo(),this._Ht.Bo(),ei(this.AVt)}constructor(t,i){super(),this.s0t=[],this.i0t=[],this.hP=void 0,this._Ht=new ha,this.r0t=t=>{t.stopPropagation(),this.h0t()},this.h0t=()=>{for(const t of this.s0t)for(const i of t.YRt)Ir(i.uri)},this.AVt=h.createElement("div"),this.AVt.style.display="none",this.o0t=t,this.a0t=i}};function C0(t,i){let e=i;if(!function(t){return"ui"in t}(t))return e;const s=t.ui.language;let n;if(ae(s)){const i=t.ui.languages;if(!i)return e;n=i[s]}else n=s;return n&&n[i]&&(e=n[i]),e}r(),r();var x0={[hi.bv]:1,[hi.Lv]:2,[hi.zv]:2};function O0(t,i){const e=i?i.map((t=>t.toLowerCase())):i;return Zc(t.filter((t=>{const i=t.type.toLowerCase();return!!Yn(e)&&-1!==e.indexOf(i)&&iJ(i)})),((t,i)=>x0[t.type]-x0[i.type])).map(j0)}function j0(t){return LS({src:t.contentURL,type:t.type,isAdvertisement:!0})}function z0(t,i){return YF(P0(t),P0(i))}function P0(t){return{Ti:t.height,ji:t.width}}function B0(t,i,e,s){const n=function(t,i,e,s){let n,r=1/0;const h=t.filter((t=>!iJ(t.type))).filter((t=>void 0===s||-1!==s.indexOf(t.type)));if(h.length){for(const t of h){const s=(x.abs(t.width/i-1)+x.abs(t.height/e-1))/2;s<r&&(r=s,n=t)}return j0(n||h.sort(z0)[0])}}(t,i.width,i.height,e),r=O0(t,e);return n&&r.push(n),rl({sources:r},s)}var R0=class extends k0{get u0t(){return this.c0t}get E_(){return this.l0t.E_}get ct(){let t=this.l0t.ct;return j(t)&&this.oUt&&(t=this.oUt.ct||0),t}get C_(){return this.l0t.C_}get Y_(){return this.l0t.Y_}set Y_(t){this.l0t.Y_=t,t?this.n0t(Xs.vUt):this.n0t(Xs.mUt)}get q_(){return this.l0t.q_}get cg(){return this.l0t.cg}get Ng(){return this.l0t.Ng}set Ng(t){this.l0t.Ng=t}get vg(){return this.l0t.vg}get Mg(){return this.l0t.Mg}get d0t(){return this.f0t}Bg(){this.l0t.q_&&(this.l0t.Bg(),this.mo(new vh(this.E_)),this.c0t&&this.n0t(Xs.pUt),this.c0t=!0)}Pg(){this.l0t.q_||(this.l0t.Pg(),this.mo(new ws(this.E_)),this.n0t(Xs.yh))}async Rg(){var t;null==(t=this.kx)||t.s_(),this.kx=void 0,this.be(),this.c0t=!1,this._0t=!0,this.g0t(),this.w0t(),await this.A0t()}v0t(t){void 0===t&&(t=!0),this.c0t=!1,t&&this.n0t(Xs.LUt),this.be(),this.a0t()}m0t(){var t;const i=null==(t=this.cHt.da)?void 0:t.mi,e=new a$(this.Ou,i);return this.Z$t.appendChild(e.we),e.ln("uT",this.p0t),e}y0t(){this.oUt&&this.oUt.eUt.RRt&&(this.mVt=new Qn(this.Z$t),this.mVt.EGt=this.oUt.eUt.RRt,this.mVt.ln("clickstart",this.M0t),this.mVt.ln("click",this.h0t))}T0t(t,i){for(const e of this.i0t)if(e.XU===Xs.BA){const s=qK(e.qu,i);void 0!==s&&this.t$<s&&s<=t&&Ir(e.eventURL)}}async N0t(){if(!this.oUt||!this.D0t)return;const t=B0(this.oUt.dUt,this.D0t,this.Mx.ads.allowedMimeTypes,this.Mx);if(!t.sources.length)return await this.l0t.Wn(),this.o0t(""),void this.oUt.fRt();this.kx=new Po,this._0t=!0,await this.l0t.ca(t,this.kx.i_),this.l0t.ge(),this.oUt.fRt(),this.y0t()}async I0t(i,e,s){this.f0t=i,this.oUt=i.VBt,this.l0t.ln(t.XA,this.S0t),this.l0t.ln(t.yA,this.E0t),this.l0t.ln(t.ZA,this.b0t),this.l0t.ln(Wh,this.Ds),this.oUt.JBt&&0!==this.oUt.JBt.length&&this.t0t(this.oUt.JBt),this.oUt.eUt&&this.e0t(this.oUt.eUt),this.hP=e,this.D0t=s,0!==this.oUt.dUt.length&&(this.l0t.ln(Bi.Zo,this.L0t),await this.N0t(),this.l0t.ln(t.NA,this.k0t),this.l0t.ln(t.XA,this.C0t),this.l0t.ln(qo._v,this.x0t),this.l0t.ln(t.QA,this.Ds))}zFt(){this.u0t&&this.O0t&&this.p0t()}get O0t(){return this.oUt&&-1!==this.oUt.gUt&&this.l0t.E_>=this.oUt.gUt}j0t(){this.n0t(Xs.Xut),this.f0t&&this.WWt.mo(new tu(this.f0t,this.E_))}async A0t(){this.l0t.rn(Bi.Zo,this.L0t),this.l0t.rn(t.NA,this.k0t),this.l0t.rn(t.XA,this.C0t),this.l0t.rn(qo._v,this.Ds),this.l0t.rn(qo._v,this.x0t),this.l0t.rn(t.QA,this.Ds),this.l0t.rn(t.XA,this.S0t),this.l0t.rn(t.yA,this.E0t),this.l0t.rn(t.ZA,this.b0t),this.l0t.rn(Wh,this.Ds),this.f0t&&(this.f0t.$Yt(),this.WWt.mo(new fa(this.f0t,this.E_))),this.z0t(),this.K$t(),this.g0t(),this.w0t(),this.f0t=void 0,this.oUt=void 0,this.D0t=void 0,await this.l0t.Wn(),this.l0t.be(),this.Z$t.style.cursor="",this.P0t=0,this.t$=-1,this.B0t&&(this.R0t.A0t(),this.B0t=!1)}z0t(){this.mVt&&(this.mVt.Xf(),this.mVt=void 0)}w0t(){this.U0t&&(ei(this.U0t),this.U0t=void 0)}g0t(){this.MVt&&(this.MVt.cn(),this.MVt=void 0)}Q0t(){this.B0t=!0}F0t(){var t;this.U0t||(this.U0t=h.createElement("div"),this.U0t.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this.Z$t.appendChild(this.U0t));const i=null==(t=this.f0t)?void 0:t.Ul;if(!i)return;const e=i.Nc.filter(KJ);let s=C0(this.Mx,"The content will play in")+" "+x.round(i.FYt)+" "+C0(this.Mx,"seconds");if(e.length>1){const t=e.filter((t=>t.KYt())).length;s+=". "+C0(this.Mx,"Ad")+" "+(t+1)+"/"+e.length}fn(this.U0t,s)}constructor(t,i,e,s,n,r,h){super(t,i),this.R0t=e,this.Mx=s,this.cHt=n,this.Ou=r,this.l0t=h,this.c0t=!1,this.P0t=0,this.t$=-1,this.kx=new Po,this._0t=!0,this.k0t=()=>{this.v0t()},this.x0t=()=>{this.kx=void 0,this.c0t||(this.j0t(),this.c0t=!0),this._0t&&(this._0t=!1,this.cHt.S$t()),this.Z$t.style.display="block",this.l0t.rn(qo._v,this.x0t),this.c0t=!0},this.C0t=()=>{const t=this.E_,i=this.ct,e=t/i;(0===this.P0t&&e>=.25?(this.n0t(Xs.SUt),this.P0t=1):1===this.P0t&&e>=.5?(this.n0t(Xs.bUt),this.P0t=2):2===this.P0t&&e>=.75&&(this.n0t(Xs.EUt),this.P0t=3),this.T0t(t,i),this.F0t(),this.t$=t,this.oUt)&&(-1!==this.oUt.gUt&&this.oUt.gUt<this.oUt.ct&&(null!=this.MVt||(this.MVt=this.m0t()),this.E_<this.oUt.gUt?this.MVt.UGt(this.oUt.gUt-this.E_):this.MVt.FGt()))},this.L0t=()=>{var t,i;this.kx=void 0,this.l0t.rn(Bi.Zo,this.L0t),this._0t=!0,null==(t=this.hP)||t.nQt(Si.$Ut),this.c0t=!1,this.l0t.be();const e=(null==(i=this.l0t.bt)?void 0:i.src)||"";this.o0t(e)},this.S0t=()=>{this.Ds(new Tc(this.E_,void 0))},this.E0t=()=>{this.Ds(new ts(this.ct))},this.b0t=()=>{this.Ds(new Ve(this.E_,this.Ng))},this.M0t=()=>{this.cHt.Pg()},this.p0t=()=>{this.f0t&&(this.n0t(Xs.MUt),this.WWt.mo(new lr(this.f0t,this.E_/this.ct)),this.v0t(!1))},this.Z$t.className="theoplayer-ad-linear",this.Z$t.style.zIndex="10",ia(this.Z$t),this.l0t.be(),this.B0t=!1}};r(),r();var U0=class t extends i{get we(){return this.Us}YGt(){this.we.addEventListener("mouseup",this.GGt),this.we.addEventListener("touchend",this.GGt),this.we.addEventListener("mousedown",this.Y0t)}QGt(){this.we.removeEventListener("mouseup",this.GGt),this.we.removeEventListener("touchend",this.GGt),this.we.removeEventListener("mousedown",this.Y0t)}static ir(){const t=h.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}cn(){this.QGt(),ei(this.Us)}constructor(){super(),this.GGt=t=>{this.mo(new gg("uT")),this.Y0t(t)},this.Y0t=t=>{t.stopPropagation()},this.Us=t.ir(),this.YGt()}},Q0=class extends k0{get G0t(){return this.V0t}get W0t(){return this.Za}K$t(){super.K$t(),this.Z$t&&Fe(this.Z$t)}async I0t(t,i,e){this.hGt&&this.A0t(),this.V0t=t,this.hGt=t.WBt,0!==this.hGt.JBt.length&&this.t0t(this.hGt.JBt),this.hP=i,0!==this.hGt.ZBt.length&&(this.e0t(this.hGt.ZBt[0].hRt),this.Z$t.addEventListener("error",this.H0t),this.Z$t.addEventListener("load",this.q0t),await this.N0t(),this.X0t())}zFt(){var t;if(void 0!==this.Z0t)return;const i=null==(t=this.hGt)?void 0:t.ZBt[0];i&&i.Ul&&-1!==i.Ul.gUt&&(this.n0t(Xs.MUt),this.WWt.mo(new lr(this.V0t,0)),this.K0t())}j0t(){void 0!==this.V0t&&this.WWt.mo(new tu(this.V0t,this.cHt.E_))}Rg(){this.A0t(),this.V0t=void 0,this.hGt=void 0}A0t(){this.J0t(),void 0!==this.V0t&&(this.V0t.$Yt(),this.WWt.mo(new fa(this.V0t,this.cHt.E_))),this.K$t(),this.$0t(),void 0!==this.Z0t&&(c(this.Z0t),this.Z0t=void 0)}J0t(){this.Z$t.removeEventListener("load",this.q0t),this.Z$t.removeEventListener("error",this.H0t)}async N0t(){const t=h.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const i=this.hGt.ZBt[0],e=h.createElement("a");if(i.hRt.RRt&&(e.href=i.hRt.RRt,e.target="Au",e.setAttribute("rel","noopener")),i.eRt){const t=i.eRt,s=h.createElement("iframe");s.src=t.HUt,e.appendChild(s)}else if(i.tRt){const t=i.tRt,s=h.createElement("img");s.src=t.HUt,e.appendChild(s)}else if(i.nRt){const t=i.nRt,s=h.createElement("iframe");s.src=t.HUt,e.appendChild(s)}i.fRt(),e.addEventListener("mousedown",this.r0t),e.addEventListener("touchend",this.r0t),this.Z$t.firstChild&&(Fe(this.Z$t),this.A0t()),t.appendChild(e),this.Z$t.appendChild(t),this.ge()}X0t(){var t;if(!this.hGt)return;const i=null==(t=this.hGt.ZBt[0].Ul)?void 0:t.gUt;void 0!==i&&-1!==i&&(this.Z0t=Ys.setTimeout(this.t1t,1e3*i))}$0t(){this.Za&&(this.Za.rn("uT",this.i1t),this.Za.cn()),this.Za=void 0}get e1t(){return this.cHt.s1t()}constructor(t,i,e){super(t,i),this.q0t=()=>{this.J0t(),this.n0t(Xs.jUt),this.a0t()},this.H0t=t=>{var i,e;this.J0t(),null==(i=this.hP)||i.nQt(Si.iQt);const s=null==(e=this.hGt)?void 0:e.ZBt[0];var n,r;const h=null!=(r=null!=(n=null==s?void 0:s.eRt)?n:null==s?void 0:s.tRt)?r:null==s?void 0:s.nRt;var o;this.o0t(null!=(o=null==h?void 0:h.HUt)?o:"")},this.K0t=()=>{this.be(),Fe(this.Z$t),this.a0t(),this.V0t=void 0,this.hGt=void 0},this.t1t=()=>{this.Za||(this.Z0t=void 0,this.Za=new U0,this.Z$t.children[0].appendChild(this.Za.we),this.Za.ln("uT",this.i1t))},this.i1t=()=>{this.n0t(Xs.MUt),this.zFt()},this.Z$t.className="theoplayer-ad-nonlinear",this.Z$t.style.position="absolute",this.Z$t.style.width="100%",this.Z$t.style.bottom="3em",this.Z$t.style.zIndex="10",this.Z$t.style.textAlign="center",this.cHt=e}};r();var F0=class extends tc{ha(){return new Y0(this.Ul.V9())}constructor(t){super("n1t",t)}},Y0=class extends pc{constructor(t){super("adbreakchange",t)}};r();var G0=class{static async r1t(t,i,e){let s=[],n=t.shift();for(;n;){try{const t=await(new hJ).vQt(n,i);s=s.concat(t)}catch(t){0;const i=Ba.KWt(t,n.sources.src);e.mo(i)}n=t.shift()}return s}};r(),r(),r();var da,ll=class extends Ha{ha(){return new V0}constructor(){super("p_t")}},V0=class extends gg{constructor(){super("statechange")}};r(),function(t){t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted"}(da||(da={})),r(),r();var W0=class{get Vu(){return this.Uu}get U(){return this.Uu.length}get oa(){return this.Ua||(this.Ua=this.ha()),this.Ua}Iw(t){return this.Uu[t]}gm(t){this.Uu.push(t),this.Ua&&this.Ua.push(t.oa),this.h1t(t)}o1t(t){for(const i of t)this.gm(i)}a1t(t,i){i>=0&&i<=this.Uu.length&&(this.Uu.splice(i,0,t),this.Ua&&this.Ua.splice(i,0,t.oa),this.h1t(t))}Am(t){return na(this.Uu,t)}wm(t){this.u1t(this.Uu.indexOf(t))}u1t(t){if(!(t>=0&&t<this.Uu.length))return;const i=this.Uu[t];jc(this.Uu,t),this.Ua&&jc(this.Ua,t),this.c1t(i)}iL(){const t=this.Uu.slice();Ri(this.Uu),this.Ua&&Ri(this.Ua);for(const i of t)this.c1t(i)}constructor(){this.Uu=[],this.Ua=void 0}},H0=class extends W0{ha(){return function(t){const i=function(t){const i=t.Vu.map((t=>t.oa));return i.item=i=>{const e=0|i,s=t.Iw(e);return s&&s.oa||void 0},i}(t),e=new ma(t,i);return i.addEventListener=(t,i)=>{e.ln(t,i)},i.removeEventListener=(t,i)=>{e.rn(t,i)},i}(this)}ln(t,i){this.l1t.ln(t,i)}d_(t){this.l1t.d_(t)}Bo(){this.l1t.Bo()}mo(t){this.l1t.mo(t)}rn(t,i){this.l1t.rn(t,i)}w_(t){this.l1t.w_(t)}A_(t){this.l1t.A_(t)}v_(t,i){return this.l1t.v_(t,i)}constructor(...t){super(...t),this.l1t=new ha,this.Ds=t=>{this.mo(t)}}};r();var q0=class extends gg{constructor(t){super("addtask"),this.task=t}},X0=class extends Ha{ha(){return new q0(this.d1t.oa)}constructor(t){super("f1t"),this.d1t=t}};r();var Z0,K0=class extends gg{constructor(t){super("removetask"),this.task=t}},J0=class extends Ha{ha(){return new K0(this.task.oa)}constructor(t){super("_1t"),this.task=t}},$0=class extends H0{h1t(t){this.mo(new X0(t))}c1t(t){this.mo(new J0(t))}constructor(){super()}};!function(t){t.UNINITIALISED="uninitialised",t.INITIALISED="initialised"}(Z0||(Z0={}));var t1=class extends i{async zg(){await this.g1t(),this.z_t("initialised")}async g1t(){try{await this.w1t()}catch(t){0}}async w1t(){const t=await this.Tct.ret();for(const i of t){const t=this.v1t.A1t(i.id,i.sourceDescription,i.parameters,this.m1t);this.p1t(t),this.Cx.gm(t),await t.y1t}}get FI(){return this.j_t}z_t(t){this.j_t=t,this.mo(new ll)}get M1t(){return this.Cx}A1t(t,i,e){void 0===e&&(e="persistent");const s=this.v1t.T1t(t,i,e);return this.N1t(s,e),this.Cx.gm(s),this.p1t(s),s}async N1t(t,i){try{await this.D1t(t,i)}catch(t){throw b("Unable to persist task - "+t)}}async D1t(t,i){await this.Tct.iet({key:t.o,id:t.o,sourceDescription:t.cc,parameters:t.pI},i)}p1t(t){t.ln("p_t",(()=>{t.FI===da.EVICTED&&this.Cx.wm(t)}))}constructor(t,i,e){super(),this.j_t="uninitialised",this.Cx=new $0,this.v1t=i,this.m1t=e,this.Tct=t,this.zg()}};r(),r(),r(),r();var Ma=class{get qB(){return this.I1t}get S1t(){return this.E1t}get b1t(){return this.L1t.qB}get k1t(){let t=0,i=0;return this._m.forEach((e=>{t+=e.timeRanges.qB,i+=e.totalQualityDurationToCache})),0===i?0:x.min(1,t/i)}get L1t(){return this.C1t}hp(t){return!!Ph(this._m,t._m)&&(!!G_(this.E1t,t.E1t)&&(!!G_(this.qB,t.qB)&&(!!G_(this.b1t,t.b1t)&&this.L1t.QB(t.L1t))))}constructor(t,i,e){if(this.E1t=t,this._m=i,this.I1t=e,0===this._m.size)this.C1t=Ki.KB();else{let t=new Ki([-1/0,1/0]);this._m.forEach((i=>{t=t.yn(i.timeRanges)})),this.C1t=t}}};Ma.QUALITY_TIME_RANGES_NULL_OBJECT=Qt(),Ma.CACHE_PROGRESSION_NULL_OBJECT=new Ma(0,Ma.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),Ma.x1t=Ma.CACHE_PROGRESSION_NULL_OBJECT,r(),r(),r(),r();var i1=class extends gg{constructor(){super("progress")}},e1=class extends Ha{ha(){return new i1}constructor(){super("O1t")}};r(),r();var s1,n1=class extends Jo{get name(){return"j1t"}constructor(t,i){super(t,i)}};async function r1(t,i,e){const s=[];for(const n of t.yot)s.push(h1(n,i,e));return{z1t:await Promise.all(s)}}async function h1(t,i,e){const s=[];for(const n of t.nnt)o1(n)||s.push(c1(n,i,e));return{Z:await Promise.all(s),$w:t.$w}}function o1(t){return t.Kst.every(u1)}r(),r(),r(),function(t){t[t.bv=0]="bv",t[t.Lv=1]="Lv"}(s1||(s1={}));var a1=1;function u1(t){return t.Mst!==a1&&Boolean(t.Mst)}async function c1(t,i,e){const s=[];for(const i of t.Kst)u1(i)||s.push(l1(i,e));const n=await Promise.all(s),r=t.Ast[0],h=t.mst,o=h?function(t,i){const e=[],s=function(t){return t?Va(t,"avc")?wo.VIDEO_H264:Va(t,"hev")||Va(t,"hvc")||Va(t,"hvt")||Va(t,"lhv")||Va(t,"lhe")||Va(t,"lht")?wo.VIDEO_H265:Va(t,"mp4")?wo.VIDEO_MP4:Va(t,"mpeg2")?wo.VIDEO_MPEG2:Va(t,"mpeg")?wo.VIDEO_MPEG:wo.VIDEO_UNKNOWN:wo.VIDEO_UNKNOWN}(t);for(const t of i){const i=t.Zet.split(":").pop(),n=t.Xet;e.push({mimeType:s,uuid:i,data:n})}const n=s1.bv,r=Pp;return{type:n,schemeType:r,schemeDatas:e}}(r,h):void 0,a=lY(t,i);return{Uw:n,gs:t.X5,$w:t.$w,wP:o,kdt:a}}async function l1(t,i){const e=await async function(t,i){const e=[],s=t.fst;t.Qnt&&e.push({Fm:0,ct:0,P1t:t.Qnt});const n=s.Art();let r=n;for(;r;){if(t.trt(r)){const s=await t.irt(r,i,(new Po).i_);for(let i=0;i<s.U;i++)e.push(d1(s.bht(i),t))}else e.push(d1(r,t));r=s.xrt(r)}const h=s.Mrt(),o=h.Ym-n.Fm;return{ct:o,det:e}}(t,i),s={o:f1(t),iI:e,zz:t.zz,utt:t.utt,Ti:t.Ti,$w:t.$w,ji:t.ji};switch(t.$w){case Tw.Eu:break;case Tw.Yv:var n,r;s.yst=null!=(r=null==(n=t.yst)?void 0:n.vp())?r:NaN;break;case Tw.Gv:s.audioSamplingRate=t.wst}return s}function d1(t,i){return{Fm:t.Fm,ct:t.ct,P1t:i.Znt(t)}}function f1(t){return t.Gnt.gn+"-"+(""+t.o)}function _1(t,i){const e=function(t){const i=function(t){const i=Qt();for(const e of t){let t=i.get(e.MDt);t||(t={$w:e.$w,ZT:[]},i.set(e.MDt,t)),t.ZT.push(e)}return i}(t),e=Ye();return i.forEach((t=>{for(const i of t.ZT){let s=e.get(t.$w);s||(s=Qt(),e.set(t.$w,s));let n=s.get(i.l);n||(n=[],s.set(i.l,n)),n.push(i)}})),e}(t);return function(t,i){const e=Ye();return t.forEach(((t,s)=>{const n=Qt();t.forEach(((t,e)=>{const r=[];for(const e of t){const t=g1(e,s,i);r.push(t)}n.set(e,r)})),e.set(s,n)})),e}(e,i)}function g1(t,i,e){const s=t.MDt,n={ODt:t,fIt:[]};for(const t of e)sX(i,s,t)&&n.fIt.push(t);return n}async function w1(t,i){const e=await i.Rat([t],{});return kq(e.CS,{},e.Qat)}async function A1(t,i){return ZH(t)?async function(t,i){const e=_1(t.ZT,t.cEt),s=await async function(t,i){const e=[],s=t.entries();for(let t=s.next();!t.done;t=s.next()){const[s,n]=t.value,r=await p1(n,s,i);e.push(r)}return e}(e,i),n=await async function(t,i){const e=[];for(const o of t){var s,n;const t=await N1(o.Dnt,i);var r,h;t.zz=o.zz,t.utt=o.Ast?m1(o.Ast):"",t.Ti=null!=(r=null==(s=o.nIt)?void 0:s.Ti)?r:0,t.ji=null!=(h=null==(n=o.nIt)?void 0:n.ji)?h:0,e.push(t)}return{$w:Tw.Hv,Z:[{gs:aV,$w:Tw.Hv,Uw:e}]}}(t.cEt,i);return s.push(n),{ct:v1(s),B1t:[t.Dnt],wnt:[{z1t:s}]}}(t,i):function(t){const i=D1(t);return{ct:i.ct,B1t:[t.Dnt],wnt:[{z1t:[{$w:Tw.Hv,Z:[{$w:Tw.Hv,gs:aV,Uw:[{o:t.Dnt,iI:i,zz:0,utt:"",Ti:0,$w:Tw.Hv,ji:0}]}]}]}]}}(t)}function v1(t){let i=-1/0;for(const e of t)for(const t of e.Z)i=x.max(i,...t.Uw.map((t=>t.iI.ct)));return i}function m1(t){return[t.tIt,t.iIt,t.MSt].filter(z_).join(",")}async function p1(t,i,e){const s=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,i]=t.value,n=await y1(i,e);s.push(n)}return{$w:M1(i),Z:s}}async function y1(t,i){const e=[],s=t[0].ODt;for(const s of t){const t=await T1(s,i);e.push(t)}return{gs:s.gs||aV,$w:M1(s.$w),Uw:e}}function M1(t){switch(t){case Eo.Gv:return Tw.Gv;case Eo.Yv:return Tw.Yv;case Eo.HM:case Eo.DSt:return Tw.Eu;default:return Tw.Hv}}function T1(t,i){const e=function(t){const i=t.ODt.Dnt,e=t.fIt.map((t=>t.Dnt));return i||(e.length?e[0]:void 0)}(t);return N1(e,i)}async function N1(t,i){let e={ct:0,det:[]};if(t){const s=await w1(t,i);KH(s)&&(e=D1(s))}return{o:t||"default",R1t:t,iI:e,zz:0,utt:"",Ti:0,$w:Tw.Hv,ji:0}}function D1(t){const i=[];let e,s=0;for(const n of t.det){const t=s;!n._Et||void 0!==e&&$H(n._Et.Dnt,e)||(i.push(I1(n._Et,t)),e=n._Et.Dnt),i.push(S1(n,t)),s+=n.ct}return{ct:s,det:i}}function I1(t,i){return{Fm:i,ct:0,P1t:E1(t.Dnt)}}function S1(t,i){return{Fm:i,ct:t.ct,P1t:E1(t.Dnt)}}function E1(t){return{Fu:t.zy,Jet:t.zht?[t.zht.gn,t.zht.gn+t.zht.U]:void 0,NS:!1}}r(),r();var b1=class{async U1t(t){if(!t.src)throw new b("Invalid typed source");const i=t.type;if(pa(i))return await this.Q1t(t);if(dw(i))return await this.F1t(t);throw new b("Unexpected source type")}async Q1t(t){try{const i=await w1(t.src,this.Uat);return await A1(i,this.Uat)}catch(t){throw new b("Unable to fetch HLS manifest")}}async F1t(t){try{const i=new vF({tA:fe.Ah(t.src),vat:t.liveOffset,Tat:t.timeServer,NS:t.useCredentials},this.Y1t,Mb.FG,this.Uat,t.dash);return await i.W,await async function(t,i,e){const s=[];for(const n of t.wnt)s.push(r1(n,i,e));const n=await Promise.all(s);return{ct:t.fnt.Qet(),B1t:[t.oat],wnt:n}}(i.br.Ynt,t.contentProtection,this.Wwt)}catch(t){throw new b("Unable to fetch DASH manifest")}}constructor(t,i,e){this.Uat=t,this.Wwt=i,this.Y1t=e}};r();var L1=class{G1t(){const t=new No;return this.V1t.push(t),this.W1t(),t.nL}async H1t(t,i){try{await t}finally{this.q1t-=1,this.W1t(),0===this.V1t.length&&0===this.q1t&&i.eL(!0)}}W1t(){if(this.V1t.length>0&&this.q1t<this.X1t){this.V1t.shift().eL(),this.q1t+=1}}constructor(t){this.V1t=[],this.q1t=0,this.X1t=t}};var k1=class extends i{get y1t(){return this.zg()}async zg(){const t=new b1(this.Uat,this.Wwt,this.Y1t);this.Z1t=await t.U1t(this.K1t);const i=function(t,i){if(ae(t)){if(Va(t,"%"))return S(t)/100*i;throw new b("Unexpected - Invalid string supplied as amount to cache.")}return i<t?i:t}(this.Nct.pI.amount,this.Z1t.ct);let e;this.I1t=i;const s=Ti(this.Z1t.B1t[0]),n=(await this.pet.let.oet(s,"manifestURL")).filter((t=>na(t.references,this.Nct.o))),r=[],h=this.Nct.pI.bandwidth;for(const t of this.Z1t.wnt)for(const i of t.z1t)for(const t of x1(i,this.Nct.pI.preferredTrackSelection))for(const i of j1(t.Uw,h))r.push(i);this.J1t=x.ceil(r.map((t=>t.zz*function(t,i){let e=0;for(const s of t.iI.det.map((t=>t.ct)))if(e+=s,e>=i)return e;return e}(t,i)/8)).reduce(((t,i)=>t+i),0));const o=Qt();if(n&&0!==n.length){const t=n.reduce(((t,i)=>t+i.byteSize),0);for(const t of n){const i=t.qualityId,e=new Ki(t.startsAndEnds);if(o.has(i))o.get(i).timeRanges=o.get(i).timeRanges.xB(e).CB(5e-4);else{const t=Gr(r,(t=>t.o===i));var a;const s=x.min(this.I1t,null!=(a=null==t?void 0:t.iI.ct)?a:1/0);o.set(i,{timeRanges:e,totalQualityDurationToCache:s})}}e=new Ma(t,o,this.I1t)}else{for(const t of r)o.set(t.o,{timeRanges:Ki.KB(),totalQualityDurationToCache:x.min(t.iI.ct,this.I1t)});e=new Ma(0,o,this.I1t)}this.$1t=e}get t4t(){return this.J1t}get $1t(){return this.i4t}set $1t(t){this.i4t.hp(t)||(this.i4t=t,t.hp(Ma.x1t)||this.mo(new e1))}async pi(t){await this.lo,await this.e4t(this.Z1t,t)}async e4t(t,i){if(!t.B1t)throw new b("Unexpected - manifest is missing locations");await this.s4t();const e=[];for(const s of t.wnt)e.push(this.n4t(s,t.B1t[0],i));return tl(e)}async s4t(){const t=await this.r4t.ret();for(const i of t){const t=await this.pet.fet.Jb(i.key);if(t)await C1(t,this.Nct.o,this.pet.fet,this.m1t);else try{await this.pet.fet.iet(i,this.m1t)}catch(t){throw new n1("Unable to store manifest with url: "+i.locationURL,t)}}await this.r4t.uet()}n4t(t,i,e){const s=[];for(const n of t.z1t){const t=x1(n,this.Nct.pI.preferredTrackSelection);for(const n of t)s.push(this.h4t(n,i,e))}return tl(s)}async h4t(t,i,e){const s=this.Nct.pI.bandwidth,n=j1(t.Uw,s);t.$w===Tw.Yv&&t.kdt&&t.kdt.YO.widevine&&"persistent"===t.kdt.YO.widevine.licenseType&&(await this.o4t(t.kdt),Pi(e));const r=[];for(const t of n)r.push(this.a4t(t,i,e));return tl(r)}async a4t(t,i,e){Pi(e);const s=t.iI.det[0].Fm+this.I1t,n=[];let r=!1;for(const h of t.iI.det){if(h.Fm>=s||this.stopIfFailed(r))break;await this.u4t(e),await this.c4t.G1t(),n.push(this.c4t.H1t(this.l4t(h,t,i),this.d4t).catch((t=>(r=!0,Promise.reject(t)))))}return tl(n)}async u4t(t){if(null==t?void 0:t.Wf)throw await this.d4t.nL,new sa}async f4t(){return await this.lo.catch(xs),this.Z1t}o4t(t){return Promise.resolve()}_4t(){return fe.Vv("License renewal unsupported in this SDK."),Promise.resolve()}async l4t(t,i,e){const s=this.pet.let,n=cU(t.P1t.Fu,t.P1t.Jet),r=await s.Jb(n);if(r)await C1(r,this.Nct.o,s,this.m1t),this.g4t(r,!1);else try{const s=await this.w4t(t.P1t),{segmentMetadataEntry:n,segmentEntry:r}=this.A4t(t,i,e,s);await this.pet.cet((async t=>{await t.let.iet(n,this.m1t),await t.det.iet(r,this.m1t)})),this.g4t(n,!0)}catch(i){throw new n1("Unable to store segment with url: "+t.P1t.Fu,i)}}async w4t(t){const i=await this.nwt.$_t(t,!1,this.DEFAULT_CACHING_SEGMENT_TIMEOUT,void 0,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT);return await this.rwt(i)}async rwt(t){return{buffer:await t.zj()}}A4t(t,i,e,s){const n=cU(t.P1t.Fu,t.P1t.Jet),r=t.Fm,h=t.ct,o=this.v4t(s);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:Ti(e),qualityId:i.o,byteSize:o,startsAndEnds:new Ki([r,r+h]).yB,references:[this.Nct.o]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:Ti(e),data:s,references:[this.Nct.o]}}}v4t(t){return t.buffer.byteLength}g4t(t,i){const e=t.qualityId,s=this.i4t,n=s._m;n.get(e).timeRanges=n.get(e).timeRanges.xB(new Ki(t.startsAndEnds)).CB(5e-4),this.$1t=new Ma(i?s.S1t+t.byteSize:s.S1t,n,this.I1t)}stopIfFailed(t){return!1}constructor(t,i,e,s,n,r,h,o){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this.d4t=new No,this.i4t=Ma.x1t,this.Nct=t,this.pet=i,this.Uat=e,this.r4t=s,this.nwt=n,this.Wwt=r,this.Y1t=o,this.m1t=h,this.J1t=-1;const a=this.Nct.cc.sources[0];this.K1t=a,this.lo=this.zg(),this.c4t=new L1(this.Nct.pI.parallelTasksThreshold)}};async function C1(t,i,e,s){na(t.references,i)||(t.references.push(i),await e.iet(t,s))}function x1(t,i){switch(t.$w){case Tw.Gv:return O1(t.Z,i.audioTrackSelection);case Tw.Eu:return O1(t.Z,i.textTrackSelection);default:return O1(t.Z,[])}}function O1(t,i){if(0===i.length)return t.length?[t[0]]:[];const e=[];for(const s of t)i.indexOf(s.gs)>-1&&e.push(s);return e}function j1(t,i){if(!t.length)return[];const e=[...t].sort(GF),s=e.filter((t=>t.zz<=i));return s.length>0?[s.pop()]:[e.shift()]}var z1=class{async m4t(){await this.pet.cet((async t=>{await this.p4t(t),await this.y4t(t),await this.M4t(t),await this.T4t(t)}))}async p4t(t){const i=t._et,e=this.Nct.o;await i.wm(e)}async y4t(t){const i=t.let,e=t.det,s=this.Nct.cc.sources[0];if(!il(s))return;const n=Ti(s.src),r=(await i.oet(n,"manifestURL")).filter((t=>na(t.references,this.Nct.o)));for(const t of r)Et(t.references,this.Nct.o),0===t.references.length?(await i.wm(t.key),await e.wm(t.key)):await i.iet(t)}async M4t(t){const i=t.fet,e=this.N4t(),s=(await i.Hit(e)).filter((t=>na(t.references,this.Nct.o)));for(const t of s)Et(t.references,this.Nct.o),0===t.references.length?await i.wm(t.key):await i.iet(t)}N4t(){if(!this.Z1t)return[];const t=this.Nct.cc.sources[0];if(!il(t))return[];const i=Ti(t.src),e=function(t){if(!t)return[];const i=[];for(const e of t.wnt)for(const t of e.z1t)for(const e of t.Z)for(const t of e.Uw)t.R1t&&i.push(t.R1t);return function(t){return t.reduce(((t,i)=>(t.indexOf(i)<0&&t.push(i),t)),[])}(i)}(this.Z1t).map((t=>({src:t}))).map((t=>Ti(t.src)));return[i,...e]}async T4t(t){const i=t.wet,e=(await i.ret()).filter((t=>na(t.references,this.Nct.o)));for(const t of e)Et(t.references,this.Nct.o),0===t.references.length?(await i.wm(t.key),this.D4t(t)):await i.iet(t)}D4t(t){}constructor(t,i,e){this.Nct=t,this.pet=i,this.Z1t=e}},P1=new class{g8(t,i,e){return new z1(t,i,e)}};r(),r();var B1=class{get oa(){return this.Ua||(this.Ua=function(t){return{renew(i){t.I4t(i)}}}(this)),this.Ua}I4t(t){this.S4t(t)}async S4t(t){try{await this.E4t._4t(t)}catch(t){0,this.tit.z_t(da.ERROR)}}constructor(t,i){this.tit=t,this.E4t=i}},R1=class extends ha{get y1t(){return this.E4t.y1t}get oa(){return this.Ua||(this.Ua=function(t){let i,e={get id(){return t.o},get status(){return t.FI},get source(){return t.cc},get parameters(){return t.pI},get duration(){return t.ct},get cached(){return t.b4t.ks()},get secondsCached(){return t.L4t},get percentageCached(){return t.k4t},get bytes(){return t.C4t},get bytesCached(){return t.x4t},get license(){return t.cY.oa},start(){t.gn()},pause(){t.Pg()},remove(){t.wm()},addEventListener(t,e){i.ln(t,e)},removeEventListener(t,e){i.rn(t,e)}};return i=new Lu(t,["O1t","p_t"],e),e}(this)),this.Ua}get o(){return this.ym}get cY(){return this.O4t}get FI(){return this.j_t}z_t(t){this.j_t!==t&&(this.j_t=t,this.mo(new ll))}get cc(){return this.lc}get pI(){return this.j4t}get ct(){return this.E4t.$1t.qB}get b4t(){return this.E4t.$1t.L1t}get L4t(){return this.E4t.$1t.b1t}get k4t(){return this.E4t.$1t.k1t}get C4t(){return this.E4t.t4t}get x4t(){return this.E4t.$1t.S1t}gn(){this.j_t===da.EVICTED||this.j_t===da.DONE||this.z4t()}async z4t(){try{this.z_t(da.LOADING);const t=new Po;this.P4t=t,await this.E4t.pi(t.i_),this.z_t(da.DONE)}catch(t){Oi(t)?this.z_t(da.IDLE):this.z_t(da.ERROR)}finally{this.P4t.Xf()}}Pg(){this.P4t.s_()}wm(){this.FI===da.LOADING?(this.ln("p_t",this.evictOnLoading),this.Pg()):this.B4t()}async B4t(){try{const t=await this.E4t.f4t();await P1.g8(this,this.pet,t).m4t(),this.E4t.$1t=Ma.x1t,this.z_t(da.EVICTED)}catch(t){0,this.z_t(da.ERROR)}}constructor(t,i,e,s,n,r){super(),this.P4t=new Po,this.evictOnLoading=()=>{this.rn("p_t",this.evictOnLoading),this.B4t()},this.ym=t,this.lc=i,this.j4t=e,this.pet=s,this.E4t=n.g8(this,this.pet,r),this.O4t=new B1(this,this.E4t),this.j_t=1===this.E4t.$1t.k1t?da.DONE:da.IDLE,this.E4t.ln("O1t",(t=>{this.Ds(t),1===this.k4t&&this.z_t(da.DONE)}));const h=new Date,o=this.j4t.expirationDate.getTime()-h.getTime();(function(t){return t<2147483647})(o)&&u((()=>this.B4t()),o)}};var U1=class{T1t(t,i,e){const s=Rs();return this.A1t(s,t,i,e)}A1t(t,i,e,s){return new R1(t,i,e,this.pet,this.R4t,s)}constructor(t,i){this.pet=t,this.R4t=i}};r();var Q1=30,F1=5;function Y1(t){if(!t)throw new b("Unexpected - The cache parameters are undefined");const i=function(t){if(ae(t)&&!Va(t,"%"))return C(t);return t}(t.amount);!function(t){if(function(t){return ae(t)&&Va(t,"%")}(t)){const i=S(t);if(j(i)||i<0||i>100)throw new b("The amount as percentage must be between 0 and 100 percent.")}if(!ae(t)&&j(t))throw new b("The amount must be a number or a string")}(i);const e=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+Q1),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||Cl(t)&&t>new Date}(t))throw new b("Invalid expiration date for the cache parameters")}(e);const s=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(j(t)||t<0)throw new b("The bandwidth must be between zero and infinity.")}(s);const n=function(t){if(!t)return F1;if(j(t))throw new b("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:i,expirationDate:e,bandwidth:s,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}var G1=class{set X$t(t){this.U4t=t,this.Q4t=0,this.F4t=0,this.Y4t=void 0}get X$t(){return this.U4t}Wqt(){if(!this.U4t)return;const t=this.U4t.VYt;for(;this.Q4t<t.length;){const i=t[this.Q4t];for(void 0===this.Y4t&&(this.Y4t=Tr(i),this.F4t=0);this.F4t<this.Y4t.length;){const t=this.Y4t[this.F4t];if(this.F4t++,void 0!==t.VBt)return t.VBt}this.Q4t++,this.Y4t=void 0}}Wn(){for(this.X$t=void 0,this.kx.s_(),this.kx=new Po;this.G4t.length;)this.k$t()}V4t(t){return new t1(this.pet._et,t,"temporary")}async xjt(t){const i=O0(t.dUt,this.WW.ads.allowedMimeTypes);if(!i.length)return;const e=await Je.kb.uB(i,rl({sources:i}));if(!e.t.KP())return;this.E4t||(this.E4t=new this.R4t(this.LS));const s=this.pet,n=new U1(s,this.E4t),r=this.V4t(n).A1t(rl({sources:e.cc}),Y1({amount:10,bandwidth:ca.kb.Iz()||this.oR.HV}),"temporary");this.G4t.push(r);const h=this.E4t.g8(r,s,"temporary");this.kx.s_(),this.kx=new Po,h.pi(this.kx.i_).then(xs),this.W4t(h,t)}constructor(t,i,e,s){this.G4t=[],this.Q4t=0,this.F4t=0,this.E$t=async()=>{const t=this.Wqt();t&&await this.xjt(t)},this.k$t=()=>{const t=this.G4t.shift();null==t||t.wm()},this.W4t=async(t,i)=>{let e=!1;for(;!e;)await t.v_("O1t"),e=1===t.$1t.k1t;i.ct<5&&this.E$t()},this.WW=t,this.LS=i,this.kx=new Po,this.R4t=e,this.oR=s,this.pet=new wU}};r(),r();var V1={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new Ki([0,0]).yB,references:[]},W1={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},H1=class t extends LG{async hot(t,i,e,s){try{return await super.hot(t,i,e,s)}catch(t){yo(t)}const n=await this.H4t.hot(t,i,e,s);return await this.q4t(t,i,n),n}async q4t(i,e,s){if(void 0===this.X4t)return;const n=this.pet.let,r=cU(i,e),h=await n.Jb(r);if(h)await C1(h,this.X4t,n,this.m1t);else try{const i={buffer:s},{segmentMetadataEntry:e,segmentEntry:n}=t.A4t(r,i,this.X4t);await this.pet.cet((async t=>{await t.let.iet(e,this.m1t),await t.det.iet(n,this.m1t)}))}catch(t){throw new n1("Unable to store segment with url: "+i,t)}}static A4t(t,i,e){return{segmentMetadataEntry:oe({},V1,{key:t,segmentURLsegmentByteRange:t,references:[e]}),segmentEntry:oe({},W1,{key:t,segmentURLsegmentByteRange:t,data:i,references:[e]})}}constructor(t,i,e,s,n){super(t),this.H4t=new bG(i),this.pet=e,this.X4t=s,this.m1t=n}};var q1,X1=class{g8(t,i,e){void 0===e&&(e="persistent");const s=Boolean(t.cc.sources[0].useCredentials),n=new QY(this.LS,yn.Hv),r=new HF(this.LS,s),h=new St(i.fet,i.let,i.det,i.wet),o=function(t,i,e,s,n){return new H1(i,t,e,s,n)}(this.LS,h,i,t.o,e),a=new Hs,u=new JF(KF(r,h),a,t);return this.Z4t(t,i,u,a,n,o,e)}constructor(t){this.LS=t}},Z1=class extends X1{Z4t(t,i,e,s,n,r,h){return new k1(t,i,e,s,n,r,h,jW())}},K1=Z1;!function(t){t[t.NOT_INITIALISED=0]="NOT_INITIALISED",t[t.K4t=1]="K4t",t[t.J4t=2]="J4t",t[t._v=3]="_v",t[t.vv=4]="vv",t[t.$4t=5]="$4t"}(q1||(q1={}));var J1=class i extends P${get GWt(){return this}static get FWt(){return eh.jYt}get FWt(){return i.FWt}CJt(t,i,e){i===Vs.X9&&this.B4?W(this.Gqt([t])):this.t2t.push(t)}b_(){return this.i2t.u0t?this.i2t.E_:this.y9()}L_(t){}kd(){return this.i2t.ct}x_(){return this.i2t.C_}O_(){}z_(){}G_(){return this.i2t.Y_}V_(t){this.Y_!==t&&(this.i2t.Y_=t,this.mo(new Ve(this.E_,this.Ng)))}X_(){return this.i2t.q_}dg(){return this.i2t.cg}_g(){return Ki.KB().ks()}pg(){return this.i2t.vg}Tg(){return this.i2t.Mg}Dg(){return this.i2t.Ng}Ig(t){this.Ng!==t&&(this.i2t.Ng=t,this.mo(new Ve(this.E_,this.Ng)))}async Bg(){if(this.e2t)return;this.mo(new vh(this.E_)),this.s2t(),this.t2t.length&&(this.e2t=this.Gqt(this.t2t),await this.e2t,this.e2t=void 0),await this.n2t.R$t(this.Lo.b_());const t=this.r2t;4!==t&&1!==t&&5!==t||(!this.lGt&&this.h2t.length?this.o2t():this.lGt?(this.a2t=!0,this.i2t.Bg()):(this.mWt(),this.Lo.Bg()),this.r2t=3)}Pg(){3===this.r2t&&(this.i2t.Pg(),this.r2t=4)}S$t(){this.n2t.S$t()}gn(){this.r2t=1,this.n2t.gn()}async Rg(){this.n2t&&(this.n2t.bn(),this.u2t(!1),this.R0t.Rg(),this.r2t=5,this.lGt&&(this.n2t.q$t(this.lGt.NQt),this.lGt=void 0)),this.B4=!1,this.a2t=!1,Ri(this.h2t),this.eHt&&(this.mWt(),this.Lo.ge()),Ri(this.t2t),await this.i2t.Rg(),await this.l0t.Wn()}uT(){this.i2t.zFt(),this.R0t.zFt()}zg(){this.l0t.zg(),this.s2t()}XWt(i){return!(i.type!==t.NA||!this.n2t||!this.n2t.z$t(-1))&&(this.n2t.O$t().then(xs),!0)}ge(){void 0!==this.i2t.d0t&&(this.l0t.ge(),this.i2t.ge()),void 0!==this.R0t.G0t&&this.R0t.ge()}be(){this.l0t.be(),this.i2t.be(),this.R0t.be()}async Gqt(t){const i=await G0.r1t(t,this.LS,this.WWt);if(!i.length){const t="Ads could not be loaded.";return this.WWt.mo(Ba.KWt(new bi(Qe.ADBLOCK,th.FILE_NOT_FOUND),t)),void(this.B4&&!this.lGt&&0===this.h2t.length&&this.c2t())}this.n2t.W$t(i),this.WWt.mo(new vn),this.eHt||this.Lo.q_||this.n2t.R$t(this.Lo.b_()),0!==this.r2t&&5!==this.r2t||this.gn()}Y$t(t){this.h2t.push(...t);for(const i of t)this.B4&&!this.eHt&&this.o2t()}async o2t(){if(2!==this.r2t&&!this.l2t){0,this.l2t=!0,this.r2t=2;const t=this.lGt;this.d2t(),this.lGt?(await this.lGt.NQt.T$t(this.WWt),this.f2t()||(this.l2t=!1),this.WWt.mo(new F0(this._2t(this.lGt))),await this.g2t()):((null==t?void 0:t.NQt.N$t())&&this.WWt.mo(new Bh(this._2t(t))),this.l2t=!1,this.r2t=1,this.c2t())}}c2t(){this.mWt(),this.Lo.ge(),this.Lo.C_?this.Lo.mo(new Ds(this.Lo.b_())):this.Lo.Bg()}d2t(){let t;if(this.lGt&&this.f2t())t=this.lGt.NQt;else{if(0===this.h2t.length)return;t=this.h2t.shift()}if(!t)return;const i=t.wc();i?this.lGt=i:(this.lGt&&(this.n2t.q$t(this.lGt.NQt),this.lGt=void 0),this.lGt=void 0)}async g2t(){const t=this.lGt?function(t){var i,e;const s=null==(i=t.$Qt)||null==(e=i.bBt)?void 0:e.LBt();return void 0===s?void 0:new YJ(s)}(this.lGt):void 0;if(t){if(!this.lGt)return;this.w2t=t,this.A2t(this.lGt.JBt),this.v2t(Xs.FUt);const i=this.w2t.wc();this.lGt.NQt.N$t()&&(this.R0t.A0t(),1===this.lGt.NQt.tst&&this.WWt.mo(new ka(this._2t(this.lGt)))),await this.I0t(i)}else this.r2t=1,this.l2t=!1,this.lGt=void 0,this.o2t()}async I0t(t){if(t){var i;let s=z_(t.VBt),n=z_(t.qBt);var e;const r=null!=(e=null==(i=t.HBt)?void 0:i.vRt)?e:[],h=r.length>0,o=this.lGt,a=this._2t(o);if(t.VBt){if(t.VBt.Ul=o,void 0!==o.l7.skipOffset){const i=vo.qQt(o.l7.skipOffset,t.VBt.ct);i&&i<t.VBt.ct&&(t.VBt.gUt=i)}const i=a.WYt(t.VBt,r,t.XBt,o.l7);this.R0t.A0t(),this.gHt(),await this.i2t.I0t(i,t.lt,{width:this.Lo.we.offsetWidth,height:this.Lo.we.offsetHeight}),s=!0}if(t.qBt){const i=t.qBt.ZBt[0];if(i.Ul=o,void 0!==o.l7.skipOffset){const t=vo.qQt(o.l7.skipOffset,this.Lo.kd());t&&(i.Ul.gUt=t)}const e=s?[]:r,h=a.HYt(i,e,t.qBt,t.XBt,o.l7);s&&this.i2t.Q0t(),await this.R0t.I0t(h,t.lt,{width:this.Lo.we.offsetWidth,height:this.Lo.we.offsetHeight}),n=!0}if(s){this.r2t=3,this.i2t.ge();const t=0===a.hEt;this.a2t=t,this.l0t.Pg(),this.i2t.Bg(),this.Lo.Pg(),this.Lo.be(),this.gHt(),this.i2t.j0t()}n&&(this.r2t=3,this.R0t.ge(),this.R0t.j0t()),(s||n||h)&&this.m2t(t.FBt),s||n||await this.p2t(),!s&&n&&(this.f2t()||this.h2t.length>0?this.o2t():(this.c2t(),this.lGt=o))}else null===t?await this.p2t():this.u2t(!0)}p2t(){const t=this.w2t;return this.I0t(t&&t.wc())}u2t(t){this.v2t(Xs.YUt),this.y2t(),this.r2t=1;const i=void 0!==this.lGt&&this.lGt.NQt.y$t();if(this.l2t=!1,i)t&&(this.r2t=1,this.o2t());else{if(!this.eHt)return;this.Lo.ge(),!this.Lo.C_&&t&&this.Lo.Bg(),this.mWt()}}mWt(){this.M2t(),super.mWt()}M2t(){this.Lo.C_&&(this.r2t=5),this.lGt&&(this.lGt.NQt.N$t()&&this.WWt.mo(new Bh(this._2t(this.lGt))),this.n2t.q$t(this.lGt.NQt),this.lGt=void 0)}A2t(t){this.T2t=this.T2t.concat(t)}y2t(){this.T2t=[]}N2t(t){this.Lo.we.appendChild(t)}v2t(t){for(const i of this.T2t)i.XU===t&&Ir(i.eventURL)}m2t(t){this.i2t.n0t(Xs.jUt);for(const i of t)Ir(i)}get W9(){return this.lGt?this._2t(this.lGt):null}get G9(){return this.lGt?[this.i2t.d0t,this.R0t.G0t].filter(z_):[]}get H9(){const t=this.h2t.concat(this.n2t.H9.filter((t=>!t.KYt())));return Nh(t,(t=>t.g$t.Nc.filter((t=>!t.KYt()))))}get q9(){return this.n2t.H9.map((t=>t.g$t))}o7(t){const i=this.OJt();for(const e of i)TK(e.sources,e.timeOffset)||t.d1(e,Vs.X9,!1)}OJt(){const t=[];for(const i of this.G9.concat(this.H9))t.push(i.l7);const i=this.h2t.concat(this.n2t.H9.filter((t=>!t.KYt())));for(const e of i)for(const i of e.VYt)i.W||t.push(i.l7);return t.push(...this.t2t),Ic(t)}f2t(){return!!this.lGt&&Tr(this.lGt).some((t=>t.VBt))}_2t(t){return t.NQt.g$t}s1t(){return this.D2t}xg(){return this.l0t.xg()}y_(){return this.l0t.y_()}hHt(t){this.n2t.hHt(t)}async cn(){await super.cn(),this.Lo.rn(t.bh,this.s2t),this.WWt.mR(this.i2t.WWt),this.WWt.mR(this.R0t.WWt),this.WWt.mR(this.n2t),this.i2t.cn(),this.R0t.cn(),await this.l0t.cn()}constructor(i,e,s,n,r,h){super(i,e),this.h2t=[],this.r2t=0,this.T2t=[],this.l2t=!1,this.B4=!1,this.a2t=!0,this.t2t=[],this.I2t=i=>{i.type===t.bh&&this.a2t?this.a2t=!1:this.mo(i)},this.s2t=()=>{this.B4=!0},this.S2t=async()=>(this.r2t=1,await this.i2t.A0t(),this.I0t(this.w2t.wc())),this.E2t=async t=>{const i=new bi(Qe.PLAYBACK,th.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.WWt.mo(Ba.KWt(i,t)),await this.i2t.A0t(),this.I0t(this.w2t.wc())},this.b2t=()=>(this.R0t.A0t(),this.I0t(this.w2t.wc())),this.L2t=t=>{const i=new bi(Qe.PLAYBACK,th.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.WWt.mo(Ba.KWt(i,t)),this.R0t.A0t(),this.I0t(this.w2t.wc())},this.LS=h,this.l0t=s,this.R0t=new Q0(this.L2t,this.b2t,this),this.i2t=new R0(this.E2t,this.S2t,this.R0t,n,this,i.Tu,s),this.N2t(this.R0t.Z$t),this.N2t(this.i2t.Z$t);const o=new G1(n,h,Z1,r);this.n2t=new L0(this.Lo,this,this.WWt,o),this.i2t.d_(this.I2t),this.R0t.d_(this.Ds),this.WWt.La(this.i2t.WWt),this.WWt.La(this.R0t.WWt),this.WWt.La(this.n2t),this.D2t=new VJ(this,this.Lo),this.Tu.ln(xr.an,this.Ds),this.Lo.ln(t.bh,this.s2t)}};Dr.kb.PR(new class{get BWt(){return J1.FWt}zR(t){return t&&("string"!=typeof t.integration||t.integration===KI.DEFAULT||t.integration===KI.THEO)}RWt(t,i,e){const s=new Y(t.we,e,t.MO,t.l9,t.A9,t.Nl);return new J1(t,i,s,e,t.l9,t.MO)}d1(t,i,e,s){e.CJt(t,i,s)}nF(t){const i=gc(t.sources);if(!i)return;const e={integration:KI.THEO,sources:i};"vast"===e.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===e.sources.type&&void 0!==t.timeOffset&&ji("property timeOffset will be ignored for vmap ad sources");const s=lh(t.timeOffset);void 0!==s&&(e.timeOffset=s);const n=lh(t.skipOffset);return void 0!==n&&(e.skipOffset=n),e}}),r(),r();var $1=class{VV(){var t;this.C1||(null==(t=this.KJt)||t.initialize(),this.C1=!0)}get Z$t(){return this.AVt}get k2t(){return this.C2t.offsetHeight}get x2t(){return this.C2t.offsetWidth}get O2t(){return this.KJt}j2t(t){"linear"===t?this.AVt.style.marginTop="0px":"nonlinear"===t&&(this.AVt.style.marginTop="-45px")}ge(){this.AVt.style.opacity="1",this.AVt.style.pointerEvents=""}be(){this.AVt.style.opacity="0",this.AVt.style.pointerEvents="none"}Xf(){var t;null==(t=this.KJt)||t.destroy(),this.KJt=void 0}constructor(t,i){this.KJt=void 0,this.C1=!1,this.m8=t;const e=h.createElement("div");e.className="theoplayer-ima-wrapper",ia(e),e.style.zIndex="10",_n.Qs&&function(t,i){t.addEventListener(i,rN)}(e,"mousedown"),i.appendChild(e);const s=h.createElement("div");s.className="theoplayer-ima",s.style.height="100%",this.C2t=s,e.appendChild(s),this.AVt=e,this.KJt=new google.ima.AdDisplayContainer(this.C2t,this.m8)}};r(),r(),r();var t4=class{get sUt(){return this.z2t.getAdId()}get $Zt(){const t=this.z2t.getAdPodInfo();if(void 0!==t)try{return{iXt:t.getAdPosition(),QYt:t.getMaxDuration(),P2t:t.getPodIndex(),hEt:t.getTimeOffset(),eXt:t.getTotalAds(),B2t:t.getIsBumper()}}catch(t){return}}get BBt(){return this.z2t.getAdSystem()}get R2t(){return this.z2t.getAdvertiserName()}get ERt(){var t;return null!=(t=this.z2t.getApiFramework())?t:void 0}get HBt(){return this.mRt.map((t=>({LRt:t.getAdSlotId(),gP:t.getContentType(),O:t.getContent(),Ti:t.getHeight(),ji:t.getWidth()})))}get gP(){var t;return null!=(t=this.z2t.getContentType())?t:void 0}get uRt(){return this.z2t.getCreativeId()}get sJt(){return this.z2t.getCreativeAdId()}get U2t(){return this.z2t.getDealId()}get dN(){return this.z2t.getDescription()}get ct(){return this.z2t.getDuration()}get ji(){return this.z2t.getWidth()}get Ti(){return this.z2t.getHeight()}get JKt(){var t;return null!=(t=this.z2t.getMediaUrl())?t:void 0}get Q2t(){return this.z2t.getMinSuggestedDuration()}get iJt(){return this.z2t.getSkipTimeOffset()}get F2t(){return this.z2t.getSurveyUrl()}get mP(){return this.z2t.getTitle()}get $Kt(){return this.z2t.getTraffickingParameters()}get tJt(){return this.z2t.getTraffickingParametersString()}get XBt(){return this.z2t.getUniversalAdIds().map((t=>({rJt:t.getAdIdRegistry(),hJt:t.getAdIdValue()})))}get r$t(){return this.z2t.getUiElements()}get eJt(){return this.z2t.getVastMediaBitrate()}get ZKt(){return this.z2t.getVastMediaHeight()}get XKt(){return this.z2t.getVastMediaWidth()}get VKt(){return this.z2t.getWrapperAdIds()}get WKt(){return this.z2t.getWrapperAdSystems()}get HKt(){return this.z2t.getWrapperCreativeIds()}get VZt(){return this.z2t.isLinear()}constructor(t){this.z2t=t;const i=new google.ima.CompanionAdSelectionSettings;i.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,i.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,i.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,this.mRt=t.getCompanionAds(0,0,i)}};function i4(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}var e4=class extends i{Ig(t){var i;null==(i=this.GYt)||i.setVolume(t)}Dg(){return this.GYt.getVolume()}_Kt(){return this.GYt.getRemainingTime()}Xf(){Ri(this.Tc),this.Ou.rn(xr.an,this.Y2t),this.GYt.removeEventListener(google.ima.AdEvent.Type.LOADED,this.G2t),this.GYt.removeEventListener(i4(),this.forwardAdEventListener),this.GYt.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener),this.GYt.destroy()}gn(){this.GYt.start()}HJt(){this.GYt.resume()}Pg(){this.GYt.pause()}uT(){this.GYt.skip()}Rg(){this.GYt.stop()}ZZt(){const t=this.GYt.getCurrentAd();if(t)return this.V2t(t)}$Jt(){return this.GYt.getCuePoints()}V2t(t){let i=Gr(this.Tc,(i=>i.z2t===t));return i||(i=new t4(t),this.Tc.push(i)),i}u$t(t){this.GYt.updateAdsRenderingSettings(r4(t))}constructor(t,i,e){super(),this.Tc=[],this.G2t=t=>{t.getAd().isLinear()?this.KJt.j2t("linear"):this.KJt.j2t("nonlinear")},this.Y2t=()=>{this.GYt.resize(this.KJt.x2t,this.KJt.k2t,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const i=t.getAd(),e=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:Mo.oXt,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:Mo.aXt,[google.ima.AdEvent.Type.CLICK]:Mo.uXt,[google.ima.AdEvent.Type.DURATION_CHANGE]:Mo.yA,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:Mo.cXt,[google.ima.AdEvent.Type.STARTED]:Mo.lXt,[google.ima.AdEvent.Type.IMPRESSION]:Mo.dXt,[google.ima.AdEvent.Type.PAUSED]:Mo.vv,[google.ima.AdEvent.Type.RESUMED]:Mo.fXt,[google.ima.AdEvent.Type.AD_PROGRESS]:Mo.$qt,[google.ima.AdEvent.Type.AD_BUFFERING]:Mo._Xt,[google.ima.AdEvent.Type.FIRST_QUARTILE]:Mo.gXt,[google.ima.AdEvent.Type.MIDPOINT]:Mo.bUt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:Mo.wXt,[google.ima.AdEvent.Type.COMPLETE]:Mo.LUt,[google.ima.AdEvent.Type.USER_CLOSE]:Mo.AXt,[google.ima.AdEvent.Type.LINEAR_CHANGED]:Mo.vXt,[google.ima.AdEvent.Type.LOADED]:Mo.mXt,[google.ima.AdEvent.Type.AD_CAN_PLAY]:Mo.pXt,[google.ima.AdEvent.Type.AD_METADATA]:Mo.yXt,[google.ima.AdEvent.Type.AD_BREAK_READY]:Mo.MXt,[google.ima.AdEvent.Type.INTERACTION]:Mo.TXt,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:Mo.NXt,[google.ima.AdEvent.Type.SKIPPED]:Mo.DXt,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:Mo.IXt,[google.ima.AdEvent.Type.LOG]:Mo.SXt,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:Mo.EXt,[google.ima.AdEvent.Type.VOLUME_CHANGED]:Mo.bXt,[google.ima.AdEvent.Type.VOLUME_MUTED]:Mo.LXt}[t]}(t.type),s={type:e,date:new Date,t7:i?this.V2t(i):void 0,zZt:V$(e,t.getAdData())};this.mo(s)},this.forwardAdErrorEventListener=t=>{this.mo({date:new Date,t7:void 0,type:Y$.kXt,zZt:{vKt:q$(t.getError())}})},this.GYt=t,this.KJt=i,this.Ou=e,this.Ou.ln(xr.an,this.Y2t),this.GYt.init(this.KJt.x2t,this.KJt.k2t,google.ima.ViewMode.NORMAL),this.GYt.addEventListener(google.ima.AdEvent.Type.LOADED,this.G2t),this.GYt.addEventListener(i4(),this.forwardAdEventListener),this.GYt.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener)}};r();var s4=class extends Ha{get W2t(){return this.H2t}get Z$t(){return this.AVt}ha(){return this}constructor(t,i){super("d$t"),this.H2t=t,this.AVt=i}},n4=class extends i{qJt(){var t;null==(t=this.XJt)||t.contentComplete()}async Gqt(t,i,e){if(this.q2t)throw new b("Only one ImaAdsRequest can be made at a time.");if(!this.X2t.O2t)throw new b("AdDisplayContainer is not initialized.");this.XJt=new google.ima.AdsLoader(this.X2t.O2t),this.XJt.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.XJt.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.q2t=new No,this.Z2t=i,this.K2t=e;const s=new google.ima.AdsRequest;return t.tqt?s.adTagUrl=t.tqt:t.iqt&&(s.adsResponse=t.iqt),s.linearAdSlotWidth=t.qHt,s.linearAdSlotHeight=t.XHt,s.nonLinearAdSlotWidth=t.ZHt,s.nonLinearAdSlotHeight=t.KHt,s.setAdWillAutoPlay(t.JHt),s.setAdWillPlayMuted(t.$Ht),t.eqt&&(s.omidAccessModeRules=t.eqt),this.XJt.requestAds(s),this.q2t.nL}Xf(){var t;void 0!==this.XJt&&(this.XJt.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.XJt.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.XJt.destroy(),this.XJt=void 0),null==(t=this.q2t)||t.sL("AdsLoader destroyed"),this.q2t=void 0}constructor(t,i){super(),this.onAdsManagerLoadedListener=t=>{if(this.Z2t&&this.K2t&&this.q2t){var i;const e=r4(this.K2t),s=this.Z2t,n=t.getAdsManager({get currentTime(){return s.E_},get duration(){return s.ct}},e),r=new e4(n,this.X2t,this.Ou);this.mo(new s4(n,this.X2t.Z$t)),null==(i=this.q2t)||i.eL(r),this.q2t=void 0}},this.onAdsManagerErrorListener=t=>{var i;const e={Gb:t.getError().getMessage(),rXt:t.getError().getVastErrorCode(),oQt:t.getError().getErrorCode(),$w:W$(t.getError().getType()),hXt:void 0};null==(i=this.q2t)||i.sL(e),this.q2t=void 0},this.Ou=i,this.X2t=t}};function r4(t){const i=new google.ima.AdsRenderingSettings;return i.enablePreloading=t.h$t,t.r$t&&(i.uiElements=t.r$t),i.mimeTypes=t.n$t,void 0!==t.a$t&&(i.playAdsAfterTime=t.a$t),void 0!==t.o$t&&(i.loadVideoTimeout=t.o$t),void 0!==t.KKt&&(i.bitrate=t.KKt),void 0!==t.a$t&&(i.playAdsAfterTime=t.a$t),i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i}r();var h4=class extends i{get E_(){return this.Lo.gg?this.J2t:this.Lo.b_()}get ct(){return this.Lo.kd()}get Y_(){return this.Lo.Y_}get Ng(){return this.Lo.Ng}Wn(){this.J2t=0}constructor(i){super(),this.Lo=i,this.J2t=this.Lo.b_(),this.Lo.ln(t.XA,(()=>{this.Lo.gg||(this.J2t=this.Lo.b_()),this.mo(new Tc(this.E_,void 0))}))}};dr.kb.registerWebImaAdPlayerConstructor((function(t,i,e){M0(e);const s=T0(e)?t.xg():void 0,n=new $1(s,t.we),r=new n4(n,t.Tu),h=new h4(t);return new N0(t,i,e,t._9,n,r,h)})),r(),r(),r(),r(),r();var o4=class extends i{get SW(){return this.n5===$r.CONNECTED}get n5(){return this.ba}get oa(){return this.Ua||(this.Ua=function(t){return{get casting(){return t.SW},get state(){return t.n5},start(){t.Qg()},stop(){t.Fg()},addEventListener(i,e){const s=Ls(i,P);t.ln(s,e)},removeEventListener(i,e){const s=Ls(i,P);t.rn(s,e)}}}(this)),this.Ua}$2t(){this.t3t(),this.CMt.ln(t.no,this.i3t),fe.Ys.Z7&&this.ka($r.AVAILABLE)}preloadPlayer(t){if(Pi(t),this.Lo.cg<ow.Vn){const i=this.Lo.v_(qo.uv,t);return this.Lo.hg=Al.XM,i}return Promise.resolve()}ka(t){t!==this.ba&&(this.ba=t,this.mo(new y$(this.ba)))}async e3t(t){await this.preloadPlayer(t),this.jV.Qg()}Fg(){fe.Ys.Z7&&this.Lo.Fg()}cn(){this.Bo(),this.CMt.rn(t.no,this.i3t),this.s3t.s_()}constructor(t,i){super(),this.Ua=void 0,this.ba=$r.UNAVAILABLE,this.s3t=new Po,this.handleAirplayChangedEvent=()=>{this.Lo&&this.Lo.R_?this.n3t():this.n5===$r.CONNECTED&&this.r3t()},this.CMt=t,this.jV=i}},a4=class extends o4{t3t(){this.Lo&&this.Lo.rn(t.fA,this.handleAirplayChangedEvent),this.h3t?this.Lo=this.jV:this.Lo=this.o3t,this.Lo.ln(t.fA,this.handleAirplayChangedEvent)}get h3t(){return this.jV.Ug()}async n3t(){if(this.Lo){if(this.h3t){if(!this.Lo.q_){const i=new Promise((t=>u(t,800))),e=this.Lo.v_(t.yh,this.s3t.i_);await Promise.race([e,i])}this.Lo.Bg()}else{this.a3t=this.jV.E_,this.u3t=this.jV.N_,this.o3t.ln(t.XA,this.handleAirplayPlayerTimeUpdate),this.c3t=this.jV.Ew,this.jV.Ew=this.o3t,this.c3t.Pg(),this.c3t.be(),this.o3t.ge(),this.o3t.Y_=this.c3t.Y_,this.o3t.Z_=this.c3t.Z_,this.o3t.Ng=this.c3t.Ng;const i=this.o3t.v_(t.FA);this.o3t.E_=this.c3t.E_,await i,this.o3t.Bg(),this.o3t.Y_=this.c3t.Y_,this.o3t.Z_=this.c3t.Z_,this.o3t.Ng=this.c3t.Ng}this.ka($r.CONNECTED)}}r3t(){if(this.c3t){this.o3t.rn(t.XA,this.handleAirplayPlayerTimeUpdate),this.c3t.Y_=this.o3t.Y_,this.c3t.Z_=this.o3t.Z_,this.c3t.Ng=this.o3t.Ng;_n.KE&&!_n.Va&&this.jV.ct===1/0?this.u3t?this.c3t.N_=this.u3t:this.c3t.E_=1/0:this.c3t.E_=this.a3t,this.u3t=void 0,this.a3t=void 0,this.c3t.ge(),this.o3t.be(),this.o3t.q_||this.c3t.Bg(),this.jV.Ew=this.c3t,this.o3t.Wn(),this.c3t=void 0}else this.Lo&&(this.Lo.E_=this.Lo.E_+1e-4);this.ka($r.AVAILABLE)}Qg(){fe.Ys.Z7&&(this.CMt.zg(),this.s3t.s_(),this.s3t=new Po,this.h3t?W(this.e3t(this.s3t.i_)):W(this.l3t(this.s3t.i_)))}async l3t(t){try{await this.o3t.Wn();const i=this.jV.Oa();if(void 0===i)throw new b("Not possible to start Airplay without a source");await this.o3t.ca(i,t);const e=this.o3t.v_(qo._v,t);this.o3t.Bg(),await function(t,i){return cg((e=>Promise.race([t,be(i,e).then((()=>{throw new b("Timeout")}))])))}(e,3e3),this.o3t.Pg(),Pi(t),this.o3t.Qg()}catch(t){if(Oi(t))return;0}}cn(){var t;super.cn(),this.jV.dm(this.o3t),null==(t=this.o3t)||t.cn()}constructor(t,i,e){super(t,i),this.i3t=()=>{var t;const i=null==(t=this.jV.Oa())?void 0:t.sources.filter(Tl);fe.Ys.Z7&&(null==i?void 0:i.some(NI))?this.ka($r.AVAILABLE):this.ka($r.UNAVAILABLE)},this.handleAirplayPlayerTimeUpdate=t=>{this.a3t=t.currentTime,this.u3t=this.jV.N_},this.o3t=e,this.o3t.be(),i.lm(e),this.$2t()}};r();var Es,u4=class extends ha{Gg(){this.d3t.Gg()}get ht(){return this.d3t.ht}get M_(){return this.d3t.M_}get bt(){return this.dB}get E_(){return this.d3t.E_}set E_(t){this.d3t.E_=t}get N_(){return this.d3t.N_}get ct(){return this.d3t.ct}get we(){return this.Us}get C_(){return this.d3t.C_}get lt(){return this.d3t.lt}get j_(){return this.d3t.j_}get P_(){return this.d3t.P_}get R_(){return this.d3t.R_}get Lg(){return this.d3t.Lg}get Sg(){return this.d3t.Sg}get Q_(){return this.d3t.Q_}get Y_(){return this.d3t.Y_}set Y_(t){this.d3t.Y_=t}get W_(){return this.d3t.W_}get q_(){return this.d3t.q_}get Z_(){return this.d3t.Z_}set Z_(t){this.d3t.Z_=t}get eg(){return this.d3t.eg}get hg(){return this.d3t.hg}set hg(t){this.d3t.hg=t}get cg(){return this.d3t.cg}get fg(){return this.d3t.fg}get gg(){return this.d3t.gg}Ug(){return this.d3t.Ug()}Qg(){this.d3t.Qg()}Fg(){this.d3t.Fg()}get nt(){return this.d3t.nt}get vg(){return this.d3t.vg}get Mg(){return this.d3t.Mg}get rt(){return this.d3t.rt}get Ng(){return this.d3t.Ng}set Ng(t){this.d3t.Ng=t}Bg(){W(this.d3t.Bg())}Pg(){this.d3t.Pg()}async Rg(){}Oa(){return this.lc}async ca(t,i){let e;if(Pi(i),this.lc=t,ml(t.sources))e=LS({src:""});else{const i=t.sources.filter(Tl);for(const t of i)if(NI(t)){e=t;break}}if(!e)throw new b("Unsupported source.");await this.d3t.ca(e,t,i),this.pB(e)}pB(t){this.dB!==t&&(this.dB=t,this.mo(new jt(t)))}xg(){return this.d3t.xg()}y_(){return[]}zg(){this.f3t.rR()}Og(t){xw(this,t)}jg(){}Vg(t){return!1}Yg(){this.d3t.Yg()}async Wn(){this.dB=void 0,this.lc=void 0,await this.d3t.Wn()}ge(){this.d3t.ge()}be(){this.d3t.be()}Cg(){return this.d3t.Cg()}async cn(){this.Bo(),this.f3t.cn(),await this.d3t.cn(),this.qv.cn(),this.Zv.cn(),this.Al.cn()}constructor(t,i,e,s,n,r){super(),this.dB=void 0,this.lc=void 0,this.qv=new As,this.Zv=new As,this.Al=new Ac,this.Us=t,this.f3t=new kp(n,r,1,[Tw.Yv]),this.f3t.lR(t),this.d3t=new TI(t,this.f3t,i,e,s),this.d3t.d_(this.Ds),this.qv.Ew=this.d3t.ht,this.Zv.Ew=this.d3t.rt,this.Al.Ew=this.d3t.nt}},c4=class extends O{async cn(){this._3t.cn(),await super.cn()}constructor(i){super(i);const e=new u4(this.f9.we,this.MO,this.vd,this.l9,this.A9,this.Nl);this._3t=new a4(this,this.f9,e),this.zQ.xW(this._3t),this.ln(t.mA,(()=>{this._3t.t3t()}))}};Ej((t=>new c4(t)),iu.z9),r(),r(),r(),r(),function(t){t.uXt="click",t.g3t="continue",t.w3t="end",t.Zo="error",t._h="fullscreen",t.XM="metadata",t.vUt="mute",t.UQt="nonlinear",t.yh="pause",t.KQt="position",t.A3t="ready",t.pUt="resume",t.v3t="seek_end",t.m3t="seek_start",t.p3t="stall",t.Xut="start",t.Eu="text",t.y3t="linear_event"}(Es||(Es={}));var l4=class{M3t(t){this.T3t=t}N3t(t,i){let e;switch(t){case Es.uXt:e=this.D3t.CLICK;break;case Es.g3t:e=this.D3t.CONTINUE;break;case Es.w3t:e=this.D3t.END;break;case Es.Zo:e=this.D3t.ERROR;break;case Es._h:e=this.D3t.FULLSCREEN;break;case Es.XM:e=this.D3t.METADATA;break;case Es.vUt:e=this.D3t.MUTE;break;case Es.UQt:e=this.D3t.NONLINEAR;break;case Es.yh:e=this.D3t.PAUSE;break;case Es.KQt:e=this.D3t.POSITION;break;case Es.A3t:e=this.D3t.READY;break;case Es.pUt:e=this.D3t.RESUME;break;case Es.v3t:e=this.D3t.SEEK_END;break;case Es.m3t:e=this.D3t.SEEK_START;break;case Es.p3t:e=this.D3t.STALL;break;case Es.Xut:e=this.D3t.START;break;case Es.Eu:e=this.D3t.TEXT;break;case Es.y3t:e=this.D3t.LINEAR_EVENT}this.T3t.reportPlayerEvent(e,i)}constructor(t){this.D3t=t}};r(),r();var d4,f4=class{xS(t){t.ln(Sl.Rm,this.I3t)}cn(){for(let t of this.S3t)this.it(t);this.SMt.rn(gt.qg,this.Jz)}it(t){if(t.zt===Pt.XM){for(let i of t.L.Nw)i.rn(Sl.Rm,this.I3t);t.rn(Os.Jg,this.b1),t.rn(Os.iw,this.E3t)}}constructor(t,i){this.SMt=t,this.Dit=i,this.S3t=[],this.Jz=t=>{const i=t.Lt;if(i.zt===Pt.XM){for(let t of i.L.Nw)this.b3t(t)&&this.xS(t);i.ln(Os.Jg,this.b1),i.ln(Os.iw,this.E3t),this.S3t.push(i)}},this.b1=t=>{this.b3t(t.Qm)&&this.xS(t.Qm)},this.E3t=t=>{t.Qm.rn(Sl.Rm,this.I3t)},this.SMt.ln(gt.qg,this.Jz)}},_4=class extends f4{L3t(t){return na(this.k3t,t)}mY(t){var i;const e=function(t,i){if(!t||!i||i.U<=0)return[];const e=t.Fm,s=i.Nw,n=[];for(let i=Jk(t)+1,r=s.length;i<r;i++){const r=s[i],h=r.O;if(e===r.Fm&&g4(h)){if(r.O.id===t.O.id)break;n.push(r)}}return n}(t,null==(i=t.Lt)?void 0:i.L);this.C3t(e);const s=[t].concat(e);this.x3t(s)}C3t(t){this.k3t=this.k3t.concat(t)}x3t(t){let i={};for(let e of t){let t=e.O;i[t.id]=t.text}this.Dit.N3t(Es.XM,i)}O3t(t){Et(this.k3t,t)}constructor(t,i){super(t,i),this.k3t=[],this.I3t=t=>{let i=t.Qm;this.L3t(i)?this.O3t(i):this.mY(i)},this.b3t=t=>t.O.id&&g4(t.O)}};function g4(t){switch(t.id){case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return!0}return!1}r(),r(),function(t){t._Qt="linear",t.gQt="nonlinear"}(d4||(d4={}));var w4=class{constructor(t,i){this.$w=t,this.EGt=i}},A4=class extends w4{get j3t(){return this.z3t}get tst(){return this.z7}constructor(t,i,e){super("nonlinear",t),this.z3t=i,this.z7=e}},v4=class extends w4{constructor(t){super("linear",t)}};r();var m4,p4="yospace",y4="urn:yospace:a:id3:2016";function M4(t){return Boolean(il(t)&&Ng(t,["ssai"])&&function(t){return Boolean(Ng(t,["integration"])&&t.integration===p4)}(t.ssai))}!function(t){t.S="S",t.M="M",t.E="E"}(m4||(m4={}));var T4=class{P3t(t){this.B3t=t}R3t(){let t={AdBreakStart:()=>{this.B3t&&this.B3t.AdBreakStart&&this.B3t.AdBreakStart()},AdvertStart:t=>{this.U3t(),this.B3t&&this.B3t.AdvertStart&&this.B3t.AdvertStart(t)},AdvertEnd:t=>{this.F3t.Q3t(),this.B3t&&this.B3t.AdvertEnd&&this.B3t.AdvertEnd(t)},AdBreakEnd:()=>{this.F3t.Q3t(),this.B3t&&this.B3t.AdBreakEnd&&this.B3t.AdBreakEnd()},UpdateTimeline:t=>{this.B3t&&this.B3t.UpdateTimeline&&this.B3t.UpdateTimeline(t)},InjectVast:()=>{this.B3t&&this.B3t.InjectVast&&this.B3t.InjectVast()}};this.T3t.registerPlayer(t)}cn(){this.F3t.cn(),this.T3t=void 0,this.Y3t&&(m(this.Y3t),this.Y3t=void 0)}constructor(t,i){this.T3t=t,this.F3t=i,this.U3t=()=>{if(this.Y3t&&(m(this.Y3t),this.Y3t=void 0),this.T3t.session.currentAdvert){let t=this.T3t.session.currentAdvert.advert,i=t.getLinear(),e=t.getNonLinears();const s=[];i&&i.clickThrough&&s.push(new v4(i.clickThrough));const n=e.filter((t=>{const i=t.resources.images||{};return 0!==_.keys(i).length}));if(n.length){const t=function(t){const i=_.keys(t.resources.images);return t.resources.images[i[0]]}(n[0]);t&&s.push(new A4(n[0].clickThrough,t,String(e.indexOf(n[0]))))}this.F3t.G3t(s)}else this.Y3t=v(this.U3t,250)},this.R3t()}};r();var N4=class t{G3t(t){for(let i of t)i.$w===d4._Qt?this.V3t(i):this.W3t(i)}W3t(i){let e=h.createElement("img");e.src=i.j3t,e.className="theoplayer-yospace-non-linear-image",e.style.maxWidth="100%";const s=t.y0t(i.EGt,"theoplayer-yospace-advert"),n=fe.Ys.Je?"touchend":"click";s.addEventListener(n,this.H3t),s.setAttribute("data-advertindex",i.tst),s.appendChild(e),s.style.zIndex="10",s.style.position="absolute",this.Us.appendChild(s),this.q3t.push(s)}X3t(){ei(this.Z3t),this.Z3t=void 0}Q3t(){this.X3t(),this.K3t()}V3t(i){this.X3t();let e=t.y0t(i.EGt,"theoplayer-yospace-ad-clickthrough");e.style.zIndex="10";const s=fe.Ys.Je?"touchend":"click";e.addEventListener(s,this.J3t),ia(e),this.Us.appendChild(e),this.Z3t=e}static y0t(t,i){const e=h.createElement("a");return e.setAttribute("href",t),e.setAttribute("target","Au"),i&&(e.className=i),e.setAttribute("rel","noopener"),e}cn(){this.Q3t(),this.Us=void 0}constructor(t,i){this.Us=t,this.Dit=i,this.q3t=[],this.J3t=t=>{this.Dit.N3t(Es.uXt),t.stopPropagation()},this.H3t=t=>{const i=t.currentTarget.getAttribute("data-advertindex");i&&(this.Dit.N3t(Es.UQt,i),t.stopPropagation())},this.K3t=()=>{for(let t of this.q3t)t&&t.parentElement&&t.parentElement.removeChild(t);Ri(this.q3t)}}};r();var D4,I4,S4=class extends f4{x3t(t){this.Dit.N3t(Es.XM,t)}constructor(t,i){super(t,i),this.I3t=t=>{const i=function(t){const i=zh(t),e=i.split(","),s={};for(const t of e){const[i,e]=t.split("=");s[i]=e}return s}(t.Qm.O);if(i.YTYP===m4.E){if(z_(this.$3t)&&i.YMID!==this.$3t)return;this.$3t=void 0}else i.YTYP===m4.S&&(this.$3t=i.YMID);this.x3t(i)},this.b3t=t=>{const i=t;return z_(i.zD)&&function(t){return t===y4}(i.zD)}}};!function(t){t[t.t5t=-1]="t5t",t[t.i5t=-2]="i5t",t[t.e5t=-3]="e5t",t[t.s5t=-10]="s5t",t[t.n5t=-11]="n5t"}(D4||(D4={})),function(t){t.r5t="ready",t.h5t="error",t.o5t="no-analytics"}(I4||(I4={}));var E4,b4=class extends i{get oa(){return this.Ua}M3t(t,i){this.T3t=t,this.a5t=i,this.a5t.P3t(this.u5t),this.mo(new gg("sessionavailable"))}ha(){let t=this;return{get session(){return t.T3t&&t.T3t.session},registerPlayer(i){t.u5t=i,t.a5t&&t.a5t.P3t(t.u5t)},addEventListener(i,e){t.ln(i,e)},removeEventListener(i,e){t.rn(i,e)}}}cn(){this.Bo()}constructor(){super(),this.Ua=this.ha()}};!function(t){t[t.bh=0]="bh",t[t.yh=1]="yh"}(E4||(E4={}));var L4=class{Pg(){this.c5t?this.l5t=1:this.Lo.d5t()}Bg(){this.c5t?this.l5t=0:this.Lo.f5t()}get _5t(){return this.g5t}w5t(t){-11===t&&ji("A connection has been established with the CSM, but the stream cannot be paused. This is only valid for Linear playback"),this.Lo.A5t(oe({},this.gB,{sources:[oe({},this.v5t,{src:this.T3t&&this.T3t.masterPlaylist(),type:this.v5t&&this.v5t.type})]})),this.m5t(),0===this.l5t&&this.Lo.f5t()}p5t(t){let i;i=-11===t?"Yospace: A connection has been established with the CSM, but the stream cannot be paused. This is only valid for Linear playback":-2===t?"Yospace: The primary URL is not a valid SSAI stream":-10===t?"Yospace: The stream URL is not correctly formatted":-1===t?"Yospace: Connection error":-3===t?"Yospace: Connection timeout":"Yospace: Session could not be initialised",this.T3t&&(this.T3t.shutdown(),this.T3t=void 0),this.Lo.y5t(new ce(le.SOURCE_INVALID,i))}ca(t){this.gB=t,this.M5t(),this.v5t=t?Gr(t.sources,M4):void 0;let i=!!Ys.YSSessionManager;if(this.v5t,this.v5t&&this.v5t.src&&i){this.c5t=!0;const t=Ys.YSSessionManager;let i;switch(this.v5t.ssai.streamType){case"vod":i=t.createForVoD;break;case"livepause":i=t.createForLivePause;break;case"nonlinear":i=t.createForNonLinear;break;default:i=t.createForLive}const e=i(this.v5t.src,{},this.T5t);if(this.N5t(e),!this.a5t)throw new b("An error occured while instantiating a YospaceSessionManager");this.g5t.M3t(e,this.a5t),this.D5t=this.startPositionPoller(),this.I5t=this.Lo.Y_}else this.c5t=!1,this.Lo.A5t(t)}N5t(t){this.T3t=t,this.Dit.M3t(this.T3t),this.S5t&&this.S5t.cn(),this.S5t=new _4(this.Lo.nt,this.Dit),this.E5t&&this.E5t.cn(),this.E5t=new S4(this.Lo.nt,this.Dit),this.a5t&&this.a5t.cn();const i=new N4(this.Lo.we,this.Dit);this.a5t=new T4(this.T3t,i)}M5t(){var i;this.Lo.rn("presentationmodechange",this.b5t),this.Lo.rn(t.ZA,this.qVt),this.Lo.rn(t.bh,this.L5t),this.Lo.rn(t.bh,this.k5t),this.Lo.rn(t.NA,this.wh),this.Lo.rn(t.yh,this.iPt),this.Lo.rn(t.YA,this.We),this.Lo.rn(t.FA,this.OP),this.Lo.rn(qo.fv,this.C5t),this.Lo.rn(qo._v,this.zP),m(this.D5t),this.D5t=null,this.l5t=1,this.c5t=!1,null==(i=this.T3t)||i.shutdown(),this.T3t=void 0}cn(){this.M5t(),this._5t.cn()}constructor(i){this.Dit=new l4(Ys.YSPlayerEvents),this.c5t=!1,this.l5t=1,this.g5t=new b4,this.x5t=!1,this.I5t=!1,this.T5t=(t,i)=>{if(!this.T3t)throw new b("An error occured while instantiating a YospaceSessionManager");if(this.c5t=!1,"ready"===t)this.w5t(i);else this.p5t(i)},this.m5t=()=>{this.Lo.ln("presentationmodechange",this.b5t),this.Lo.ln(t.ZA,this.qVt),this.Lo.ln(t.bh,this.L5t),this.Lo.ln(t.NA,this.wh),this.Lo.ln(t.yh,this.iPt),this.Lo.ln(t.YA,this.We),this.Lo.ln(t.FA,this.OP),this.Lo.ln(qo.fv,this.C5t),this.Lo.ln(qo._v,this.zP)},this.b5t=()=>{this.Dit.N3t(Es._h,this.Lo.cs())},this.qVt=()=>{const t=this.Lo.Y_;t!==this.I5t&&(this.I5t=t,this.Dit.N3t(Es.vUt,t))},this.L5t=()=>{this.Lo.rn(t.bh,this.L5t),this.Lo.ln(t.bh,this.k5t),this.Dit.N3t(Es.Xut)},this.k5t=()=>{this.Dit.N3t(Es.pUt)},this.wh=()=>{this.Dit.N3t(Es.w3t)},this.iPt=()=>{this.Dit.N3t(Es.yh)},this.We=()=>{this.Dit.N3t(Es.m3t)},this.OP=()=>{this.Dit.N3t(Es.v3t)},this.C5t=()=>{this.x5t=!0,this.Dit.N3t(Es.p3t)},this.zP=()=>{this.x5t&&(this.Dit.N3t(Es.g3t),this.x5t=!1)},this.startPositionPoller=()=>{let t=-1;return v((()=>{let i=this.Lo.b_();i!==t&&(t=i,this.Dit.N3t(Es.KQt,i))}),250)},this.Lo=i}};tr((function(t){return class extends t{ca(t){this.hft(),this.O5t.ca(t)}Bg(){this.O5t.Bg()}Pg(){this.O5t.Pg()}z_(){var t;return null!=(t=this.oP)?t:super.z_()}O_(){var t;return null!=(t=this.hP)?t:super.O_()}A5t(t){super.ca(t)}f5t(){super.Bg()}d5t(){super.Pg()}y5t(t){this.oP=t,this.hP=Qh(this.oP),this.mo(new me(this.oP))}ha(){let t=this.O5t._5t;return Ou(super.ha(),{get yospace(){return t.oa}})}hft(){this.hP=void 0,this.oP=void 0}cn(){this.O5t.cn(),super.cn()}constructor(t,i){super(t,i),this.hP=void 0,this.oP=void 0,this.O5t=new L4(this)}}}),iu.j9),r(),r();var k4="VPAID";function C4(t){return"spotx"===t.integration}Dr.kb.PR(new class t{get BWt(){return this.j5t.BWt}zR(t){return C4(t)}RWt(i,e,s){return s.ads||(s.ads=pw({})),s.ads.vpaidMode=s.ads.vpaidMode||t.z5t(),this.j5t.RWt(i,e,s)}d1(i,e,s,n){!function(t){if(!C4(t))throw new b("Unknown ad integration: "+t.integration)}(i);const r=t.P5t(i,s.we);this.j5t.d1(r,e,s,n)}nF(t){const i=Zr(t);return i.queryParameters||(i.queryParameters={}),i.custom&&(i.queryParameters.custom?ji('"custom" parameter is redefined in queryParameters! Please use "queryParameters.custom" only!'):(i.queryParameters.custom=i.custom,delete i.custom)),i.app&&(i.queryParameters.app?ji('"app" parameter is redefined in queryParameters! Please use "queryParameters.app" only!'):(i.queryParameters.app=i.app,delete i.app)),i.device&&(i.queryParameters.device?ji('"device" parameter is redefined in queryParameters! Please use "queryParameters.device" only!'):(i.queryParameters.device=i.device,delete i.device)),i.user&&(i.queryParameters.user?ji('"user" parameter is redefined in queryParameters! Please use "queryParameters.user" only!'):(i.queryParameters.user=i.user,delete i.user)),i.ipAddress&&(i.queryParameters.ip_addr?ji('"ipAddress" parameter is redefined in queryParameters! Please use "queryParameters.ip_addr" or "ipAddress" only!'):(i.queryParameters.ip_addr=i.ipAddress,delete i.ipAddress)),i.maximumAdDuration&&(i.queryParameters.VMaxd?ji('"maximumAdDuration" parameter is redefined in queryParameters! Please use "queryParameters.VMaxd" or "maximumAdDuration" only!'):(i.queryParameters.VMaxd=i.maximumAdDuration,delete i.maximumAdDuration)),i}static P5t(i,e){return{integration:KI.SPOTX,sources:{src:t.B5t(i,Ys.location.href,e.offsetWidth,e.offsetHeight,_n.Tb)}}}static B5t(i,e,s,n,r){if(i.sources)return i.sources;let h=n,o=s;r&&0===o&&(o=320,h=180);const a={custom_skin:1,player_width:o,player_height:h};i.cacheBuster&&(a.cb=x.random()),t.R5t(e)&&(a.content_page_url=e);const u=oe({},a,i.queryParameters);return u[k4]||u.VPI||(u[k4]="js"),"https://search.spotxchange.com/vast/2.0/"+i.id+"?"+t.U5t(u)}static R5t(t){return Zg(t,"http://")||Zg(t,"https://")}static U5t(t){return pJ(t)}static z5t(){return _n.RE?xa.ENABLED:xa.INSECURE}constructor(){this.j5t=new I0}}),r(),r(),r(),r();var x4=void 0!==s?s:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},O4=function(){return/Android/i.test(nd.userAgent)||/iPhone|iPad|iPod/i.test(nd.userAgent)},j4=function(t,i){for(var e=0,s=t.length;e<s;e++)i[e]=t[e]},z4=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},P4=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),_.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),B4=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in _(t))return function(t,i){var e=[],s=!0,n=!1,r=void 0;try{for(var h,o=t[Symbol.iterator]();!(s=(h=o.next()).done)&&(e.push(h.value),!i||e.length!==i);s=!0);}catch(t){n=!0,r=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw r}}return e}(t,i);throw new k("Invalid attempt to destructure non-iterable instance")},R4=function(t,i,e){return t+(i-t)*e},Bc=function(){var t=/iPad|iPhone|iPod/.test(nd.platform);return function(){return t}}(),U4=function(){var t=-1!==nd.userAgent.indexOf("Version")&&-1!==nd.userAgent.indexOf("Android")&&-1!==nd.userAgent.indexOf("Chrome");return function(){return t}}(),Q4=(function(){var t=/^((?!chrome|android).)*safari/i.test(nd.userAgent)}(),function(){var t=-1!==nd.userAgent.indexOf("Firefox")&&-1!==nd.userAgent.indexOf("Android");return function(){return t}}()),F4=function(){var t=nd.userAgent.match(/.*Chrome\/([0-9]+)/),i=t?C(t[1],10):null;return function(){return i}}(),Y4=function(){var t=!1;if(65===F4()){var i=nd.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(i){var e=i[1].split("."),s=B4(e,4),n=(s[0],s[1],s[2]),r=s[3];t=3325===C(n,10)&&C(r,10)<148}}return function(){return t}}(),G4=function(){var t=-1!==nd.userAgent.indexOf("R7 Build");return function(){return t}}(),V4=function(){var t=90==s.orientation||-90==s.orientation;return G4()?!t:t},W4=function(){return x.max(s.screen.width,s.screen.height)*s.devicePixelRatio},H4=function(){return x.min(s.screen.width,s.screen.height)*s.devicePixelRatio},q4=function(){if(h.exitFullscreen)h.exitFullscreen();else if(h.webkitExitFullscreen)h.webkitExitFullscreen();else if(h.mozCancelFullScreen)h.mozCancelFullScreen();else{if(!h.msExitFullscreen)return!1;h.msExitFullscreen()}return!0},X4=function(t,i,e,s){var n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,i),t.compileShader(n);var r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,e),t.compileShader(r);var h=t.createProgram();for(var o in t.attachShader(h,n),t.attachShader(h,r),s)t.bindAttribLocation(h,s[o],o);return t.linkProgram(h),t.deleteShader(n),t.deleteShader(r),h},Z4=function(t,i){for(var e={},s=t.getProgramParameter(i,t.ACTIVE_UNIFORMS),n="",r=0;r<s;r++){e[n=t.getActiveUniform(i,r).name.replace("[0]","")]=t.getUniformLocation(i,n)}return e},K4=function(){var t,i=!1;return t=nd.userAgent||nd.vendor||s.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(i=!0),i},J4=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},dh=[],$4=function(t){if(Bc()){t2(t);var i,e,n=t.style.width,r=t.style.height,h=t.offsetWidth+1,o=t.offsetHeight;t.style.width=h+"px",t.style.height=o+"px";var a=function(){s.cancelAnimationFrame(e);for(var h=0;h<dh.length;h++)if(dh[h]===i){t.style.width=n,t.style.height=r,dh.splice(h,1);break}};i={D9:t,Q5t:a},dh.push(i),e=s.requestAnimationFrame(a)}},t2=function(t){if(Bc())for(var i=0;i<dh.length;i++)if(dh[i].D9===t){dh[i].Q5t();break}},i2=function(){var t=x.PI/180,i=.25*x.PI;var e=new Float32Array([0,0,0,1]),s=new Float32Array([0,0,0]);function n(n,r,h,o,a,u){!function(e,s,n,r){var h=x.tan(s?s.upDegrees*t:i),o=x.tan(s?s.downDegrees*t:i),a=x.tan(s?s.leftDegrees*t:i),u=x.tan(s?s.rightDegrees*t:i),c=2/(a+u),l=2/(h+o);e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-u)*c*.5,e[9]=(h-o)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0}(n,o||null,u.depthNear,u.depthFar),function(t,i,e){var s=i[0],n=i[1],r=i[2],h=i[3],o=s+s,a=n+n,u=r+r,c=s*o,l=s*a,d=s*u,f=n*a,_=n*u,g=r*u,w=h*o,A=h*a,v=h*u;t[0]=1-(f+g),t[1]=l+v,t[2]=d-A,t[3]=0,t[4]=l-v,t[5]=1-(c+g),t[6]=_+w,t[7]=0,t[8]=d+A,t[9]=_-w,t[10]=1-(c+f),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1}(r,h.orientation||e,h.position||s),a&&function(t,i,e){var s,n,r,h,o,a,u,c,l,d,f,_,g=e[0],w=e[1],A=e[2];i===t?(t[12]=i[0]*g+i[4]*w+i[8]*A+i[12],t[13]=i[1]*g+i[5]*w+i[9]*A+i[13],t[14]=i[2]*g+i[6]*w+i[10]*A+i[14],t[15]=i[3]*g+i[7]*w+i[11]*A+i[15]):(s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],_=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=_,t[12]=s*g+o*w+l*A+i[12],t[13]=n*g+a*w+d*A+i[13],t[14]=r*g+u*w+f*A+i[14],t[15]=h*g+c*w+_*A+i[15])}(r,r,a),function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=i[4],o=i[5],a=i[6],u=i[7],c=i[8],l=i[9],d=i[10],f=i[11],_=i[12],g=i[13],w=i[14],A=i[15],v=e*o-s*h,m=e*a-n*h,p=e*u-r*h,y=s*a-n*o,M=s*u-r*o,T=n*u-r*a,N=c*g-l*_,D=c*w-d*_,I=c*A-f*_,S=l*w-d*g,E=l*A-f*g,b=d*A-f*w,L=v*b-m*E+p*S+y*I-M*D+T*N;L&&(L=1/L,t[0]=(o*b-a*E+u*S)*L,t[1]=(n*E-s*b-r*S)*L,t[2]=(g*T-w*M+A*y)*L,t[3]=(d*M-l*T-f*y)*L,t[4]=(a*I-h*b-u*D)*L,t[5]=(e*b-n*I+r*D)*L,t[6]=(w*p-_*T-A*m)*L,t[7]=(c*T-d*p+f*m)*L,t[8]=(h*E-o*I+u*N)*L,t[9]=(s*I-e*E-r*N)*L,t[10]=(_*M-g*p+A*v)*L,t[11]=(l*p-c*M-f*v)*L,t[12]=(o*D-h*S-a*N)*L,t[13]=(e*S-s*D+n*N)*L,t[14]=(g*m-_*y-w*v)*L,t[15]=(c*y-l*m+d*v)*L)}(r,r)}return function(t,i,e){return!(!t||!i)&&(t.pose=i,t.timestamp=i.timestamp,n(t.leftProjectionMatrix,t.leftViewMatrix,i,e.F5t("left"),e.Y5t("left"),e),n(t.rightProjectionMatrix,t.rightViewMatrix,i,e.F5t("right"),e.Y5t("right"),e),!0)}}(),e2=function(t){var i,e=t.indexOf("://");i=-1!==e?e+3:0;var s=t.indexOf("/",i);return-1===s&&(s=t.length),t.substring(0,s)},s2=function(){var t={};return function(i,e){void 0===t[i]&&(console.warn("webvr-polyfill: "+e),t[i]=!0)}}(),Kr=function(t,i){s2(t,t+" has been deprecated. This may not work on native WebVR displays. "+(i?"Please use "+i+" instead.":""))};var n2=function(t,i,e){if(i){for(var s=[],n=null,r=0;r<i.length;++r){switch(h=i[r]){case t.TEXTURE_BINDING_2D:case t.TEXTURE_BINDING_CUBE_MAP:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),s.push(null,null);break}n||(n=t.getParameter(t.ACTIVE_TEXTURE)),t.activeTexture(a),s.push(t.getParameter(h),null);break;case t.ACTIVE_TEXTURE:n=t.getParameter(t.ACTIVE_TEXTURE),s.push(null);break;default:s.push(t.getParameter(h))}}e(t);for(r=0;r<i.length;++r){var h=i[r],o=s[r];switch(h){case t.ACTIVE_TEXTURE:break;case t.ARRAY_BUFFER_BINDING:t.bindBuffer(t.ARRAY_BUFFER,o);break;case t.COLOR_CLEAR_VALUE:t.clearColor(o[0],o[1],o[2],o[3]);break;case t.COLOR_WRITEMASK:t.colorMask(o[0],o[1],o[2],o[3]);break;case t.CURRENT_PROGRAM:t.useProgram(o);break;case t.ELEMENT_ARRAY_BUFFER_BINDING:t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o);break;case t.FRAMEBUFFER_BINDING:t.bindFramebuffer(t.FRAMEBUFFER,o);break;case t.RENDERBUFFER_BINDING:t.bindRenderbuffer(t.RENDERBUFFER,o);break;case t.TEXTURE_BINDING_2D:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_2D,o);break;case t.TEXTURE_BINDING_CUBE_MAP:var a;if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_CUBE_MAP,o);break;case t.VIEWPORT:t.viewport(o[0],o[1],o[2],o[3]);break;case t.BLEND:case t.CULL_FACE:case t.DEPTH_TEST:case t.SCISSOR_TEST:case t.STENCIL_TEST:o?t.enable(h):t.disable(h);break;default:console.log("No GL restore behavior for 0x"+h.toString(16))}n&&t.activeTexture(n)}}else e(t)},r2=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),h2=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function Fr(t,i,e,s){this.gl=t,this.cardboardUI=i,this.bufferScale=e,this.dirtySubmitFrameBindings=s,this.ctxAttribs=t.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=t.drawingBufferWidth,this.bufferHeight=t.drawingBufferHeight,this.realBindFramebuffer=t.bindFramebuffer,this.realEnable=t.enable,this.realDisable=t.disable,this.realColorMask=t.colorMask,this.realClearColor=t.clearColor,this.realViewport=t.viewport,Bc()||(this.realCanvasWidth=_.getOwnPropertyDescriptor(t.canvas.__proto__,"width"),this.realCanvasHeight=_.getOwnPropertyDescriptor(t.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=X4(t,r2,h2,this.attribs),this.uniforms=Z4(t,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.indexCount=0,this.renderTarget=t.createTexture(),this.framebuffer=t.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=t.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=t.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=t.createRenderbuffer()),this.patch(),this.onResize()}Fr.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},Fr.prototype.onResize=function(){var t=this.gl,i=this,e=[t.RENDERBUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0];n2(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.framebuffer),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.texImage2D(t.TEXTURE_2D,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,i.bufferWidth,i.bufferHeight,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i.renderTarget,0),i.ctxAttribs.depth&&i.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,i.depthStencilBuffer)):i.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,i.depthBuffer)):i.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,i.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,i.stencilBuffer)),!t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),i.realClearColor.apply(t,i.clearColor)})),this.cardboardUI&&this.cardboardUI.onResize()},Fr.prototype.patch=function(){if(!this.isPatched){var t=this,i=this.gl.canvas,e=this.gl;Bc()||(i.width=W4()*this.bufferScale,i.height=H4()*this.bufferScale,_.defineProperty(i,"width",{configurable:!0,enumerable:!0,get:function(){return t.bufferWidth},set:function(e){t.bufferWidth=e,t.realCanvasWidth.set.call(i,e),t.onResize()}}),_.defineProperty(i,"height",{configurable:!0,enumerable:!0,get:function(){return t.bufferHeight},set:function(e){t.bufferHeight=e,t.realCanvasHeight.set.call(i,e),t.onResize()}})),this.lastBoundFramebuffer=e.getParameter(e.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(i,s){t.lastBoundFramebuffer=s||t.framebuffer,t.realBindFramebuffer.call(e,i,t.lastBoundFramebuffer)},this.cullFace=e.getParameter(e.CULL_FACE),this.depthTest=e.getParameter(e.DEPTH_TEST),this.blend=e.getParameter(e.BLEND),this.scissorTest=e.getParameter(e.SCISSOR_TEST),this.stencilTest=e.getParameter(e.STENCIL_TEST),e.enable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!0;break;case e.DEPTH_TEST:t.depthTest=!0;break;case e.BLEND:t.blend=!0;break;case e.SCISSOR_TEST:t.scissorTest=!0;break;case e.STENCIL_TEST:t.stencilTest=!0}t.realEnable.call(e,i)},e.disable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!1;break;case e.DEPTH_TEST:t.depthTest=!1;break;case e.BLEND:t.blend=!1;break;case e.SCISSOR_TEST:t.scissorTest=!1;break;case e.STENCIL_TEST:t.stencilTest=!1}t.realDisable.call(e,i)},this.colorMask=e.getParameter(e.COLOR_WRITEMASK),e.colorMask=function(i,s,n,r){t.colorMask[0]=i,t.colorMask[1]=s,t.colorMask[2]=n,t.colorMask[3]=r,t.realColorMask.call(e,i,s,n,r)},this.clearColor=e.getParameter(e.COLOR_CLEAR_VALUE),e.clearColor=function(i,s,n,r){t.clearColor[0]=i,t.clearColor[1]=s,t.clearColor[2]=n,t.clearColor[3]=r,t.realClearColor.call(e,i,s,n,r)},this.viewport=e.getParameter(e.VIEWPORT),e.viewport=function(i,s,n,r){t.viewport[0]=i,t.viewport[1]=s,t.viewport[2]=n,t.viewport[3]=r,t.realViewport.call(e,i,s,n,r)},this.isPatched=!0,$4(i)}},Fr.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,i=this.gl.canvas;Bc()||(_.defineProperty(i,"width",this.realCanvasWidth),_.defineProperty(i,"height",this.realCanvasHeight)),i.width=this.bufferWidth,i.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1,u((function(){$4(i)}),1)}},Fr.prototype.setTextureBounds=function(t,i){t||(t=[0,0,.5,1]),i||(i=[.5,0,.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=i[0],this.viewportOffsetScale[5]=i[1],this.viewportOffsetScale[6]=i[2],this.viewportOffsetScale[7]=i[3]},Fr.prototype.submitFrame=function(){var t=this.gl,i=this,e=[];if(this.dirtySubmitFrameBindings||e.push(t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0),n2(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.cullFace&&i.realDisable.call(t,t.CULL_FACE),i.depthTest&&i.realDisable.call(t,t.DEPTH_TEST),i.blend&&i.realDisable.call(t,t.BLEND),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realDisable.call(t,t.STENCIL_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),(i.ctxAttribs.alpha||Bc())&&(i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(i.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.enableVertexAttribArray(i.attribs.position),t.enableVertexAttribArray(i.attribs.texCoord),t.vertexAttribPointer(i.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(i.attribs.texCoord,3,t.FLOAT,!1,20,8),t.activeTexture(t.TEXTURE0),t.uniform1i(i.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.uniform4fv(i.uniforms.viewportOffsetScale,i.viewportOffsetScale),t.drawElements(t.TRIANGLES,i.indexCount,t.UNSIGNED_SHORT,0),i.cardboardUI&&i.cardboardUI.renderNoState(),i.realBindFramebuffer.call(i.gl,t.FRAMEBUFFER,i.framebuffer),i.ctxAttribs.preserveDrawingBuffer||(i.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),i.dirtySubmitFrameBindings||i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.cullFace&&i.realEnable.call(t,t.CULL_FACE),i.depthTest&&i.realEnable.call(t,t.DEPTH_TEST),i.blend&&i.realEnable.call(t,t.BLEND),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realEnable.call(t,t.STENCIL_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),!i.ctxAttribs.alpha&&i.ctxAttribs.preserveDrawingBuffer||i.realClearColor.apply(t,i.clearColor)})),Bc()){var s=t.canvas;s.width==i.bufferWidth&&s.height==i.bufferHeight||(i.bufferWidth=s.width,i.bufferHeight=s.height,i.onResize())}},Fr.prototype.updateDeviceInfo=function(t){var i=this.gl,e=this,s=[i.ARRAY_BUFFER_BINDING,i.ELEMENT_ARRAY_BUFFER_BINDING];n2(i,s,(function(i){var s=e.G5t(e.meshWidth,e.meshHeight,t);if(i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer),i.bufferData(i.ARRAY_BUFFER,s,i.STATIC_DRAW),!e.indexCount){var n=e.V5t(e.meshWidth,e.meshHeight);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n,i.STATIC_DRAW),e.indexCount=n.length}}))},Fr.prototype.G5t=function(t,i,e){for(var s=new Float32Array(2*t*i*5),n=e.getLeftEyeVisibleTanAngles(),r=e.getLeftEyeNoLensTanAngles(),h=e.getLeftEyeVisibleScreenRect(r),o=0,a=0;a<2;a++){for(var u=0;u<i;u++)for(var c=0;c<t;c++,o++){var l=c/(t-1),d=u/(i-1),f=l,_=d,g=R4(n[0],n[2],l),w=R4(n[3],n[1],d),A=x.sqrt(g*g+w*w),v=e.distortion.distortInverse(A),m=w*v/A;l=(g*v/A-r[0])/(r[2]-r[0]),d=(m-r[3])/(r[1]-r[3]),l=2*(h.x+l*h.width-.5),d=2*(h.y+d*h.height-.5),s[5*o+0]=l,s[5*o+1]=d,s[5*o+2]=f,s[5*o+3]=_,s[5*o+4]=a}var p=n[2]-n[0];n[0]=-(p+n[0]),n[2]=p-n[2],p=r[2]-r[0],r[0]=-(p+r[0]),r[2]=p-r[2],h.x=1-(h.x+h.width)}return s},Fr.prototype.V5t=function(t,i){for(var e=new Uint16Array(2*(t-1)*(i-1)*6),s=t/2,n=i/2,r=0,h=0,o=0;o<2;o++)for(var a=0;a<i;a++)for(var u=0;u<t;u++,r++)0!=u&&0!=a&&(u<=s==a<=n?(e[h++]=r,e[h++]=r-t-1,e[h++]=r-t,e[h++]=r-t-1,e[h++]=r,e[h++]=r-1):(e[h++]=r-1,e[h++]=r-t,e[h++]=r,e[h++]=r-t,e[h++]=r-1,e[h++]=r-t-1));return e},Fr.prototype.W5t=function(t,i){var e=_.getOwnPropertyDescriptor(t,i);return void 0!==e.get&&void 0!==e.set||(e.configurable=!0,e.enumerable=!0,e.get=function(){return this.getAttribute(i)},e.set=function(t){this.setAttribute(i,t)}),e};var o2=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),a2=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),u2=x.PI/180,c2=.3125,Xr=28;function Gh(t){this.gl=t,this.attribs={position:0},this.program=X4(t,o2,a2,this.attribs),this.uniforms=Z4(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function l2(t){this.coefficients=t}Gh.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},Gh.prototype.listen=function(t,i){var e=this.gl.canvas,s="undefined"!=typeof TouchEvent;this.listener=function(n){var r=e.clientWidth/2,h=s&&n instanceof TouchEvent?(n.preventDefault(),n.changedTouches[0]):n;h.clientX>r-42&&h.clientX<r+42&&h.clientY>e.clientHeight-42?(n.preventDefault(),n.stopImmediatePropagation(),t(n)):h.clientX<42&&h.clientY<42&&(n.preventDefault(),n.stopImmediatePropagation(),i(n))},e.addEventListener("click",this.listener,!1),e.addEventListener("touchstart",this.listener,!1)},Gh.prototype.onResize=function(){var t=this.gl,i=this,e=[t.ARRAY_BUFFER_BINDING];n2(t,e,(function(t){var e=[],n=t.drawingBufferWidth/2,r=x.max(screen.width,screen.height)*s.devicePixelRatio,h=t.drawingBufferWidth/r*s.devicePixelRatio,o=4*h/2,a=42*h,u=Xr*h/2,c=14*h;function l(t,i){var s=(90-t)*u2,r=x.cos(s),h=x.sin(s);e.push(c2*r*u+n,c2*h*u+u),e.push(i*r*u+n,i*h*u+u)}e.push(n-o,a),e.push(n-o,t.drawingBufferHeight),e.push(n+o,a),e.push(n+o,t.drawingBufferHeight),i.gearOffset=e.length/2;for(var d=0;d<=6;d++){var f=60*d;l(f,1),l(f+12,1),l(f+20,.75),l(f+40,.75),l(f+48,1)}function _(i,s){e.push(c+i,t.drawingBufferHeight-c-s)}i.gearVertexCount=e.length/2-i.gearOffset,i.arrowOffset=e.length/2;var g=o/x.sin(45*u2);_(0,u),_(u,0),_(u+g,g),_(g,u+g),_(g,u-g),_(0,u),_(u,2*u),_(u+g,2*u-g),_(g,u-g),_(0,u),_(g,u-o),_(Xr*h,u-o),_(g,u+o),_(Xr*h,u+o),i.arrowVertexCount=e.length/2-i.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW)}))},Gh.prototype.render=function(){var t=this.gl,i=this,e=[t.CULL_FACE,t.DEPTH_TEST,t.BLEND,t.SCISSOR_TEST,t.STENCIL_TEST,t.COLOR_WRITEMASK,t.VIEWPORT,t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING];n2(t,e,(function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.renderNoState()}))},Gh.prototype.renderNoState=function(){var t,i,e,s,n,r,h,o,a,u,c=this.gl;c.useProgram(this.program),c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer),c.enableVertexAttribArray(this.attribs.position),c.vertexAttribPointer(this.attribs.position,2,c.FLOAT,!1,8,0),c.uniform4f(this.uniforms.color,1,1,1,1),t=this.projMat,i=0,e=c.drawingBufferWidth,s=0,n=c.drawingBufferHeight,o=1/(i-e),a=1/(s-n),u=1/((r=.1)-(h=1024)),t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(i+e)*o,t[13]=(n+s)*a,t[14]=(h+r)*u,t[15]=1,c.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),c.drawArrays(c.TRIANGLE_STRIP,0,4),c.drawArrays(c.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),c.drawArrays(c.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},l2.prototype.distortInverse=function(t){for(var i=0,e=1,s=t-this.distort(i);x.abs(e-i)>1e-4;){var n=t-this.distort(e),r=e-n*((e-i)/(n-s));i=e,e=r,s=n}return e},l2.prototype.distort=function(t){for(var i=t*t,e=0,s=0;s<this.coefficients.length;s++)e=i*(e+this.coefficients[s]);return(e+1)*t};var d2=x.PI/180,f2=180/x.PI,Jn=function(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0};Jn.prototype={constructor:Jn,set:function(t,i,e){return this.x=t,this.y=i,this.z=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();if(0!==t){var i=1/t;this.multiplyScalar(i)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(t){var i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,h=t.z,o=t.w,a=o*i+r*s-h*e,u=o*e+h*i-n*s,c=o*s+n*e-r*i,l=-n*i-r*e-h*s;return this.x=a*o+l*-n+u*-h-c*-r,this.y=u*o+l*-r+c*-n-a*-h,this.z=c*o+l*-h+a*-r-u*-n,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(t,i){var e=t.x,s=t.y,n=t.z,r=i.x,h=i.y,o=i.z;return this.x=s*o-n*h,this.y=n*r-e*o,this.z=e*h-s*r,this}};var as=function(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1};function _2(t){this.width=t.width||W4(),this.height=t.height||H4(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}as.prototype={constructor:as,set:function(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(t,i,e){var s=x.cos(t/2),n=x.cos(i/2),r=x.cos(e/2),h=x.sin(t/2),o=x.sin(i/2),a=x.sin(e/2);return this.x=h*n*r+s*o*a,this.y=s*o*r-h*n*a,this.z=s*n*a+h*o*r,this.w=s*n*r-h*o*a,this},setFromEulerYXZ:function(t,i,e){var s=x.cos(t/2),n=x.cos(i/2),r=x.cos(e/2),h=x.sin(t/2),o=x.sin(i/2),a=x.sin(e/2);return this.x=h*n*r+s*o*a,this.y=s*o*r-h*n*a,this.z=s*n*a-h*o*r,this.w=s*n*r+h*o*a,this},setFromAxisAngle:function(t,i){var e=i/2,s=x.sin(e);return this.x=t.x*s,this.y=t.y*s,this.z=t.z*s,this.w=x.cos(e),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,i){var e=t.x,s=t.y,n=t.z,r=t.w,h=i.x,o=i.y,a=i.z,u=i.w;return this.x=e*u+r*h+s*a-n*o,this.y=s*u+r*o+n*h-e*a,this.z=n*u+r*a+e*o-s*h,this.w=r*u-e*h-s*o-n*a,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var e=this.x,s=this.y,n=this.z,r=this.w,h=r*t.w+e*t.x+s*t.y+n*t.z;if(h<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,h=-h):this.copy(t),h>=1)return this.w=r,this.x=e,this.y=s,this.z=n,this;var o=x.acos(h),a=x.sqrt(1-h*h);if(x.abs(a)<.001)return this.w=.5*(r+this.w),this.x=.5*(e+this.x),this.y=.5*(s+this.y),this.z=.5*(n+this.z),this;var u=x.sin((1-i)*o)/a,c=x.sin(i*o)/a;return this.w=r*u+this.w*c,this.x=e*u+this.x*c,this.y=s*u+this.y*c,this.z=n*u+this.z*c,this},setFromUnitVectors:function(){var t,i;return function(e,s){return void 0===t&&(t=new Jn),(i=e.dot(s)+1)<1e-6?(i=0,x.abs(e.x)>x.abs(e.z)?t.set(-e.y,e.x,0):t.set(0,-e.z,e.y)):t.crossVectors(e,s),this.x=t.x,this.y=t.y,this.z=t.z,this.w=i,this.normalize(),this}}()};var g2=new _2({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),w2=new _2({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),A2={CardboardV1:new v2({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new v2({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function ea(t){this.viewer=A2.CardboardV2,this.updateDeviceParams(t),this.distortion=new l2(this.viewer.distortionCoefficients)}function v2(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}ea.prototype.updateDeviceParams=function(t){this.device=this.H5t(t)||this.device},ea.prototype.getDevice=function(){return this.device},ea.prototype.setViewer=function(t){this.viewer=t,this.distortion=new l2(this.viewer.distortionCoefficients)},ea.prototype.H5t=function(t){if(!t)return Bc()?(console.warn("Using fallback iOS device measurements."),w2):(console.warn("Using fallback Android device measurements."),g2);var i=.0254,e=i/t.xdpi,s=i/t.ydpi;return new _2({widthMeters:e*W4(),heightMeters:s*H4(),bevelMeters:.001*t.bevelMm})},ea.prototype.getDistortedFieldOfViewLeftEye=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=(i.widthMeters-t.interLensDistance)/2,r=t.interLensDistance/2,h=t.baselineLensDistance-i.bevelMeters,o=i.heightMeters-h,a=f2*x.atan(e.distort(n/s)),u=f2*x.atan(e.distort(r/s)),c=f2*x.atan(e.distort(h/s)),l=f2*x.atan(e.distort(o/s));return{leftDegrees:x.min(a,t.fov),rightDegrees:x.min(u,t.fov),downDegrees:x.min(c,t.fov),upDegrees:x.min(l,t.fov)}},ea.prototype.getLeftEyeVisibleTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=x.tan(-d2*t.fov),n=x.tan(d2*t.fov),r=x.tan(d2*t.fov),h=x.tan(-d2*t.fov),o=i.widthMeters/4,a=i.heightMeters/2,u=t.baselineLensDistance-i.bevelMeters-a,c=t.interLensDistance/2-o,l=-u,d=t.screenLensDistance,f=e.distort((c-o)/d),_=e.distort((l+a)/d),g=e.distort((c+o)/d),w=e.distort((l-a)/d),A=new Float32Array(4);return A[0]=x.max(s,f),A[1]=x.min(n,_),A[2]=x.min(r,g),A[3]=x.max(h,w),A},ea.prototype.getLeftEyeNoLensTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=new Float32Array(4),n=e.distortInverse(x.tan(-d2*t.fov)),r=e.distortInverse(x.tan(d2*t.fov)),h=e.distortInverse(x.tan(d2*t.fov)),o=e.distortInverse(x.tan(-d2*t.fov)),a=i.widthMeters/4,u=i.heightMeters/2,c=t.baselineLensDistance-i.bevelMeters-u,l=t.interLensDistance/2-a,d=-c,f=t.screenLensDistance,_=(l-a)/f,g=(d+u)/f,w=(l+a)/f,A=(d-u)/f;return s[0]=x.max(n,_),s[1]=x.min(r,g),s[2]=x.min(h,w),s[3]=x.max(o,A),s},ea.prototype.getLeftEyeVisibleScreenRect=function(t){var i=this.viewer,e=this.device,s=i.screenLensDistance,n=(e.widthMeters-i.interLensDistance)/2,r=i.baselineLensDistance-e.bevelMeters,h=(t[0]*s+n)/e.widthMeters,o=(t[1]*s+r)/e.heightMeters,a=(t[2]*s+n)/e.widthMeters,u=(t[3]*s+r)/e.heightMeters;return{x:h,y:u,width:a-h,height:o-u}},ea.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},ea.prototype.getFieldOfViewRightEye=function(t){var i=this.getFieldOfViewLeftEye(t);return{leftDegrees:i.rightDegrees,rightDegrees:i.leftDegrees,upDegrees:i.upDegrees,downDegrees:i.downDegrees}},ea.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.q5t();return{leftDegrees:f2*x.atan(t.outerDist),rightDegrees:f2*x.atan(t.innerDist),downDegrees:f2*x.atan(t.bottomDist),upDegrees:f2*x.atan(t.topDist)}},ea.prototype.getUndistortedViewportLeftEye=function(){var t=this.q5t(),i=this.viewer,e=this.device,s=i.screenLensDistance,n=e.widthMeters/s,r=e.heightMeters/s,h=e.width/n,o=e.height/r,a=x.round((t.eyePosX-t.outerDist)*h),u=x.round((t.eyePosY-t.bottomDist)*o);return{x:a,y:u,width:x.round((t.eyePosX+t.innerDist)*h)-a,height:x.round((t.eyePosY+t.topDist)*o)-u}},ea.prototype.q5t=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=t.interLensDistance/2/s,r=i.widthMeters/s,h=i.heightMeters/s,o=r/2-n,a=(t.baselineLensDistance-i.bevelMeters)/s,u=t.fov,c=e.distortInverse(x.tan(d2*u)),l=x.min(o,c),d=x.min(n,c),f=x.min(a,c);return{outerDist:l,innerDist:d,topDist:x.min(h-a,c),bottomDist:f,eyePosX:o,eyePosY:a}},ea.Viewers=A2;var m2={format:1,last_updated:"2018-02-20T22:55:10Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]};function p2(t,i){if(this.dpdb=m2,this.X5t(),t){this.onDeviceParamsUpdated=i;var e=new hd,s=this;e.open("GET",t,!0),e.addEventListener("load",(function(){s.loading=!1,e.status>=200&&e.status<=299?(s.dpdb=JSON.parse(e.response),s.X5t()):console.error("Error loading online DPDB!")})),e.send()}}function y2(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}function M2(t,i){this.set(t,i)}function ch(t,i){this.kFilter=t,this.isDebug=i,this.currentAccelMeasurement=new M2,this.currentGyroMeasurement=new M2,this.previousGyroMeasurement=new M2,Bc()?this.filterQ=new as(-1,0,0,1):this.filterQ=new as(1,0,0,1),this.previousFilterQ=new as,this.previousFilterQ.copy(this.filterQ),this.accelQ=new as,this.isOrientationInitialized=!1,this.estimatedGravity=new Jn,this.measuredGravity=new Jn,this.gyroIntegralQ=new as}function T2(t,i){this.predictionTimeS=t,this.isDebug=i,this.previousQ=new as,this.previousTimestampS=null,this.deltaQ=new as,this.outQ=new as}function qi(t,i,e,n){this.yawOnly=e,this.accelerometer=new Jn,this.gyroscope=new Jn,this.filter=new ch(t,n),this.posePredictor=new T2(i,n),this.isFirefoxAndroid=Q4(),this.isIOS=Bc();var r=F4();this.isDeviceMotionInRadians=!this.isIOS&&r&&r<66,this.isWithoutDeviceMotion=Y4(),this.filterToWorldQ=new as,Bc()?this.filterToWorldQ.setFromAxisAngle(new Jn(1,0,0),x.PI/2):this.filterToWorldQ.setFromAxisAngle(new Jn(1,0,0),-x.PI/2),this.inverseWorldToScreenQ=new as,this.worldToScreenQ=new as,this.originalPoseAdjustQ=new as,this.originalPoseAdjustQ.setFromAxisAngle(new Jn(0,0,1),-s.orientation*x.PI/180),this.Z5t(),V4()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new as,this.K5t=new Float32Array(4),this.start()}p2.prototype.getDeviceParams=function(){return this.deviceParams},p2.prototype.X5t=function(){var t=this.J5t();t?(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},p2.prototype.J5t=function(){var t=this.dpdb;if(!t)return console.error("DPDB not available."),null;if(1!=t.format)return console.error("DPDB has unexpected format version."),null;if(!t.devices||!t.devices.length)return console.error("DPDB does not have a devices section."),null;var i=nd.userAgent||nd.vendor||s.opera,e=W4(),n=H4();if(!t.devices)return console.error("DPDB has no devices section."),null;for(var r=null,h=1/0,o=0;o<t.devices.length;o++){var a=t.devices[o];if(a.rules)if("ios"==a.type||"android"==a.type){if(Bc()==("ios"==a.type)){for(var u=!1,c=0;c<a.rules.length;c++){var l=a.rules[c],d=this.$5t(l,i,e,n);if(!0===d){h=d,r=a,u=!0;break}!1!==d&&d<h&&(h=d,r=a)}if(u)break}}else console.warn("Device["+o+"] has invalid type.");else console.warn("Device["+o+"] has no rules section.")}return r?new y2({xdpi:r.dpi[0]||r.dpi,ydpi:r.dpi[1]||r.dpi,bevelMm:r.bw}):(console.warn("No DPDB device match."),null)},p2.prototype.$5t=function(t,i,e,s){if(!t.ua&&!t.res)return!1;if(t.ua&&i.indexOf(t.ua)<0)return!1;if(t.res){if(!t.res[0]||!t.res[1])return!1;var n=t.res[0],r=t.res[1],h=x.min(e,s)-x.min(n,r),o=x.max(e,s)-x.max(n,r),a=x.abs(h)+x.abs(o);if(a>0)return a}return!0},M2.prototype.set=function(t,i){this.sample=t,this.timestampS=i},M2.prototype.copy=function(t){this.set(t.sample,t.timestampS)},ch.prototype.addAccelMeasurement=function(t,i){this.currentAccelMeasurement.set(t,i)},ch.prototype.addGyroMeasurement=function(t,i){this.currentGyroMeasurement.set(t,i),function(t){return!(j(t)||t<=.001||t>1)}(i-this.previousGyroMeasurement.timestampS)&&this.t6t(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},ch.prototype.t6t=function(){if(!this.isOrientationInitialized)return this.accelQ=this.i6t(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,i=this.e6t(this.currentGyroMeasurement.sample,t);this.gyroIntegralQ.multiply(i),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(i);var e=new as;e.copy(this.filterQ),e.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(e),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var s=new as;s.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),s.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",f2*function(t){return t.w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*x.acos(t.w)}(s),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var n=new as;n.copy(this.filterQ),n.multiply(s),this.filterQ.slerp(n,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},ch.prototype.getOrientation=function(){return this.filterQ},ch.prototype.i6t=function(t){var i=new Jn;i.copy(t),i.normalize();var e=new as;return e.setFromUnitVectors(new Jn(0,0,-1),i),e.inverse(),e},ch.prototype.e6t=function(t,i){var e=new as,s=new Jn;return s.copy(t),s.normalize(),e.setFromAxisAngle(s,t.length()*i),e},T2.prototype.getPrediction=function(t,i,e){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=e,t;var s=new Jn;s.copy(i),s.normalize();var n=i.length();if(n<20*d2)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(f2*n).toFixed(1)),this.outQ.copy(t),this.previousQ.copy(t),this.outQ;var r=n*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(s,r),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.previousTimestampS=e,this.outQ},qi.prototype.getPosition=function(){return null},qi.prototype.getOrientation=function(){var t=void 0;if(this.isWithoutDeviceMotion&&this.s6t)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(i=(new as).setFromAxisAngle(new Jn(0,0,-1),0),e=new as,-90===s.orientation?e.setFromAxisAngle(new Jn(0,1,0),x.PI/-2):e.setFromAxisAngle(new Jn(0,1,0),x.PI/2),i.multiply(e)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var t=new as;return t.setFromAxisAngle(new Jn(1,0,0),-x.PI/2),t}(),t=this.s6t,(n=new as).copy(t),n.multiply(this.deviceOrientationFilterToWorldQ),n.multiply(this.resetQ),n.multiply(this.worldToScreenQ),n.multiplyQuaternions(this.deviceOrientationFixQ,n),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.K5t[0]=n.x,this.K5t[1]=n.y,this.K5t[2]=n.z,this.K5t[3]=n.w,this.K5t;var i,e,n,r=this.filter.getOrientation();return t=this.posePredictor.getPrediction(r,this.gyroscope,this.previousTimestampS),(n=new as).copy(this.filterToWorldQ),n.multiply(this.resetQ),n.multiply(t),n.multiply(this.worldToScreenQ),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.K5t[0]=n.x,this.K5t[1]=n.y,this.K5t[2]=n.z,this.K5t[3]=n.w,this.K5t},qi.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),V4()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},qi.prototype.n6t=function(t){this.s6t=this.s6t||new as;var i=t.alpha,e=t.beta,s=t.gamma;i=(i||0)*x.PI/180,e=(e||0)*x.PI/180,s=(s||0)*x.PI/180,this.s6t.setFromEulerYXZ(e,i,-s)},qi.prototype.r6t=function(t){this.h6t(t)},qi.prototype.h6t=function(t){var i=t.accelerationIncludingGravity,e=t.rotationRate,s=t.timeStamp/1e3,n=s-this.previousTimestampS;return n<0?(s2("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=s)):n<=.001||n>1?(s2("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=s)):(this.accelerometer.set(-i.x,-i.y,-i.z),G4()?this.gyroscope.set(-e.beta,e.alpha,e.gamma):this.gyroscope.set(e.alpha,e.beta,e.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(x.PI/180),this.filter.addAccelMeasurement(this.accelerometer,s),this.filter.addGyroMeasurement(this.gyroscope,s),void(this.previousTimestampS=s))},qi.prototype.o6t=function(t){this.Z5t()},qi.prototype.LC=function(t){var i=t.data;i&&i.type&&("devicemotion"===i.type.toLowerCase()&&this.h6t(i.deviceMotionEvent))},qi.prototype.Z5t=function(){switch(this.worldToScreenQ.set(0,0,0,1),s.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new Jn(0,0,1),-x.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new Jn(0,0,1),x.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},qi.prototype.start=function(){var t,i,e;this.a6t=this.r6t.bind(this),this.u6t=this.o6t.bind(this),this.c6t=this.LC.bind(this),this.l6t=this.n6t.bind(this),Bc()&&(t=s.self!==s.top,i=e2(h.referrer),e=e2(s.location.href),t&&i!==e)&&s.addEventListener("message",this.c6t),s.addEventListener("orientationchange",this.u6t),this.isWithoutDeviceMotion?s.addEventListener("deviceorientation",this.l6t):s.addEventListener("devicemotion",this.a6t)},qi.prototype.stop=function(){s.removeEventListener("devicemotion",this.a6t),s.removeEventListener("deviceorientation",this.l6t),s.removeEventListener("orientationchange",this.u6t),s.removeEventListener("message",this.c6t)};var N2=new Jn(1,0,0),D2=new Jn(0,0,1),I2={};screen.orientation?I2=screen.orientation:screen.msOrientation?I2=screen.msOrientation:_.defineProperty(I2,"angle",{get:function(){return s.orientation||0}});var S2=new as;S2.setFromAxisAngle(N2,-x.PI/2),S2.multiply((new as).setFromAxisAngle(D2,x.PI/2));var E2=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new k("Cannot call a class as a function")}(this,t),this.config=i,this.sensor=null,this.fusionSensor=null,this.d6t=new Float32Array(4),this.api=null,this.errors=[],this.f6t=new as,this._6t=new as,this.g6t=new as,this.w6t=this.w6t.bind(this),this.A6t=this.A6t.bind(this),this.v6t=this.v6t.bind(this),this.v6t(),this.init()}return P4(t,[{key:"init",value:function(){var t=null;try{(t=new RelativeOrientationSensor({frequency:60})).addEventListener("error",this.A6t)}catch(t){this.errors.push(t),"SecurityError"===t.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===t.name?this.useDeviceMotion():console.error(t)}t&&(this.api="sensor",this.sensor=t,this.sensor.addEventListener("reading",this.w6t),this.sensor.start()),s.addEventListener("orientationchange",this.v6t)}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new qi(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this.d6t[0]=this.d6t[1]=this.d6t[2]=0,this.d6t[3]=1,this.d6t;var t=this.sensor.quaternion;this.f6t.set(t[0],t[1],t[2],t[3]);var i=this.g6t;return i.copy(S2),i.multiply(this.f6t),i.multiply(this._6t),this.config.YAW_ONLY&&(i.x=i.z=0,i.normalize()),this.d6t[0]=i.x,this.d6t[1]=i.y,this.d6t[2]=i.z,this.d6t[3]=i.w,this.d6t}},{key:"A6t",value:function(t){this.errors.push(t.error),"NotAllowedError"===t.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===t.error.name?console.error("Sensor could not be read"):console.error(t.error)}},{key:"w6t",value:function(){}},{key:"v6t",value:function(){var t=-I2.angle*x.PI/180;this._6t.setFromAxisAngle(D2,t)}}]),t}();function ph(){this.m6t();var t=h.createElement("div");(r=t.style).position="fixed",r.top=0,r.right=0,r.bottom=0,r.left=0,r.backgroundColor="gray",r.fontFamily="sans-serif",r.zIndex=1e6;var i=h.createElement("img");i.src=this.icon,(r=i.style).marginLeft="25%",r.marginTop="25%",r.width="50%",t.appendChild(i);var e=h.createElement("div");(r=e.style).textAlign="center",r.fontSize="16px",r.lineHeight="24px",r.margin="24px 25%",r.width="50%",e.innerHTML="Place your phone into your Cardboard viewer.",t.appendChild(e);var s=h.createElement("div");(r=s.style).backgroundColor="#CFD8DC",r.position="fixed",r.bottom=0,r.width="100%",r.height="48px",r.padding="14px 24px",r.boxSizing="border-box",r.color="#656A6B",t.appendChild(s);var n=h.createElement("div");n.style.float="left",n.innerHTML="No Cardboard viewer?";var r,o=h.createElement("a");o.href="https://www.google.com/get/cardboard/get-cardboard/",o.innerHTML="get one",o.target="Au",(r=o.style).float="right",r.fontWeight=600,r.textTransform="uppercase",r.borderLeft="1px solid gray",r.paddingLeft="24px",r.textDecoration="none",r.color="#656A6B",s.appendChild(n),s.appendChild(o),this.overlay=t,this.text=e,this.hide()}ph.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):h.body.appendChild(this.overlay),this.overlay.style.display="block";var i=this.overlay.querySelector("img").style;V4()?(i.width="20%",i.marginLeft="40%",i.marginTop="3%"):(i.width="50%",i.marginLeft="25%",i.marginTop="25%")},ph.prototype.hide=function(){this.overlay.style.display="none"},ph.prototype.showTemporarily=function(t,i){this.show(i),this.timer=u(this.hide.bind(this),t)},ph.prototype.disableShowTemporarily=function(){c(this.timer)},ph.prototype.update=function(){this.disableShowTemporarily(),!V4()&&K4()?this.show():this.hide()},ph.prototype.m6t=function(){this.icon="data:"+"image/svg+xml"+";base64,"+"PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"};var b2="CardboardV1",L2="WEBVR_CARDBOARD_VIEWER";function Ce(){try{this.selectedKey=localStorage.getItem(L2)}catch(t){console.error("Failed to load viewer profile: %s",t)}this.selectedKey||(this.selectedKey=b2),this.dialog=this.p6t(ea.Viewers),this.root=null,this.y6t=[]}Ce.prototype.show=function(t){this.root=t,t.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},Ce.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},Ce.prototype.getCurrentViewer=function(){return ea.Viewers[this.selectedKey]},Ce.prototype.M6t=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},Ce.prototype.onChange=function(t){this.y6t.push(t)},Ce.prototype.T6t=function(t){for(var i=0;i<this.y6t.length;i++)this.y6t[i](t)},Ce.prototype.N6t=function(){if(this.selectedKey=this.M6t(),this.selectedKey&&ea.Viewers[this.selectedKey]){this.T6t(ea.Viewers[this.selectedKey]);try{localStorage.setItem(L2,this.selectedKey)}catch(t){console.error("Failed to save viewer profile: %s",t)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},Ce.prototype.p6t=function(t){var i=h.createElement("div");i.classList.add("webvr-polyfill-viewer-selector"),i.style.display="none";var e=h.createElement("div");(n=e.style).position="fixed",n.left=0,n.top=0,n.width="100%",n.height="100%",n.background="rgba(0, 0, 0, 0.3)",e.addEventListener("click",this.hide.bind(this));var s=h.createElement("div"),n=s.style;for(var r in n.boxSizing="border-box",n.position="fixed",n.top="24px",n.left="50%",n.marginLeft="-140px",n.width="280px",n.padding="24px",n.overflow="hidden",n.background="#fafafa",n.fontFamily="'Roboto', sans-serif",n.boxShadow="0px 5px 20px #666",s.appendChild(this.D6t("Select your viewer")),t)s.appendChild(this.I6t(r,t[r].label));return s.appendChild(this.S6t("Save",this.N6t.bind(this))),i.appendChild(e),i.appendChild(s),i},Ce.prototype.D6t=function(t){var i=h.createElement("h1"),e=i.style;return e.color="black",e.fontSize="20px",e.fontWeight="bold",e.marginTop=0,e.marginBottom="24px",i.innerHTML=t,i},Ce.prototype.I6t=function(t,i){var e=h.createElement("div");e.style.marginTop="8px",e.style.color="black";var s=h.createElement("input");s.style.fontSize="30px",s.setAttribute("id",t),s.setAttribute("type","radio"),s.setAttribute("value",t),s.setAttribute("name","field");var n=h.createElement("label");return n.style.marginLeft="4px",n.setAttribute("for",t),n.innerHTML=i,e.appendChild(s),e.appendChild(n),e},Ce.prototype.S6t=function(t,i){var e=h.createElement("button");e.innerHTML=t;var s=e.style;return s.float="right",s.textTransform="uppercase",s.color="#1094f7",s.fontSize="14px",s.letterSpacing=0,s.border=0,s.background="none",s.marginTop="16px",e.addEventListener("click",i),e};void 0!==s||("undefined"!=typeof global?global:"undefined"!=typeof self&&self);var k2=function(t,i){return t(i={exports:{}},i.exports),i.exports}((function(t,i){var e;e=function(){return function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||_.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return _.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),_.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),r=e(1),o=void 0!==nd&&S((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(nd.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!s.MSStream,a=function(){function t(){!function(t,i){if(!(t instanceof i))throw new k("Cannot call a class as a function")}(this,t),o?this.noSleepTimer=null:(this.noSleepVideo=h.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",r),this.noSleepVideo.addEventListener("timeupdate",function(t){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=x.random())}.bind(this)))}return n(t,[{key:"enable",value:function(){o?(this.disable(),this.noSleepTimer=s.setInterval((function(){s.location.href="/",s.setTimeout(s.stop,0)}),15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){o?this.noSleepTimer&&(s.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),t}();t.exports=a},function(t,i,e){t.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])},t.exports=e()})),C2=function(t){return t&&t.__esModule?t.default:t}(k2),x2=1e3,O2=[0,0,.5,1],j2=[.5,0,.5,1],z2=s.requestAnimationFrame,P2=s.cancelAnimationFrame;function B2(t){_.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:t.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:t.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:t.canPresent},maxLayers:{writable:!1,enumerable:!0,value:t.maxLayers},hasOrientation:{enumerable:!0,get:function(){return Kr("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),t.hasOrientation}}})}function ho(t){var i=!("wakelock"in(t=t||{}))||t.wakelock;this.isPolyfilled=!0,this.displayId=x2++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,_.defineProperty(this,"isConnected",{get:function(){return Kr("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new B2({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.E6t=!1,this.iN=null,this.b6t=null,this.cG=null,this.I9=null,this.L6t=null,this.k6t=null,this.C6t=null,this.x6t=null,i&&K4()&&(this.O6t=new C2)}ho.prototype.getFrameData=function(t){return i2(t,this.j6t(),this)},ho.prototype.getPose=function(){return Kr("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this.j6t()},ho.prototype.resetPose=function(){return Kr("VRDisplay.prototype.resetPose"),this.z6t()},ho.prototype.getImmediatePose=function(){return Kr("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this.j6t()},ho.prototype.requestAnimationFrame=function(t){return z2(t)},ho.prototype.cancelAnimationFrame=function(t){return P2(t)},ho.prototype.wrapForFullscreen=function(t){if(Bc())return t;if(!this.I9){this.I9=h.createElement("div");var i=["height: "+x.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.I9.setAttribute("style",i.join("; ")+";"),this.I9.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.cG==t)return this.I9;if(this.cG&&(this.b6t?this.b6t.appendChild(this.cG):this.cG.parentElement.removeChild(this.cG)),this.cG=t,this.b6t=t.parentElement,this.b6t||h.body.appendChild(t),!this.I9.parentElement){var e=this.cG.parentElement;e.insertBefore(this.I9,this.cG),e.removeChild(this.cG)}this.I9.insertBefore(this.cG,this.I9.firstChild),this.L6t=this.cG.getAttribute("style");var s=this;return function(){if(s.cG){var t=["position: absolute","top: 0","left: 0","width: "+x.max(screen.width,screen.height)+"px","height: "+x.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];s.cG.setAttribute("style",t.join("; ")+";")}}(),this.I9},ho.prototype.removeFullscreenWrapper=function(){if(this.cG){var t=this.cG;this.L6t?t.setAttribute("style",this.L6t):t.removeAttribute("style"),this.cG=null,this.L6t=null;var i=this.I9.parentElement;return this.I9.removeChild(t),this.b6t===i?i.insertBefore(t,this.I9):this.b6t&&this.b6t.appendChild(t),i.removeChild(this.I9),t}},ho.prototype.requestPresent=function(t){var i=this.isPresenting,e=this;return t instanceof Array||(Kr("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),t=[t]),new Promise((function(s,n){if(e.capabilities.canPresent)if(0==t.length||t.length>e.capabilities.maxLayers)n(new b("Invalid number of layers."));else{var r=t[0];if(r.source){var o=r.leftBounds||O2,a=r.rightBounds||j2;if(i){var u=e.iN;u.source!==r.source&&(u.source=r.source);for(var c=0;c<4;c++)u.leftBounds[c]=o[c],u.rightBounds[c]=a[c];return e.wrapForFullscreen(e.iN.source),e.P6t(),void s()}if(e.iN={predistorted:r.predistorted,source:r.source,leftBounds:o.slice(0),rightBounds:a.slice(0)},e.E6t=!1,e.iN&&e.iN.source){var l=e.wrapForFullscreen(e.iN.source);e.B6t(l,(function(){var t=h.fullscreenElement||h.webkitFullscreenElement||h.mozFullScreenElement||h.msFullscreenElement;e.isPresenting=l===t,e.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch((function(t){console.error("screen.orientation.lock() failed due to",t.message)})),e.E6t=!1,e.R6t(),s()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),e.disableWakeLock(),e.U6t(),e.removeFullscreenWrapper(),e.Q6t()),e.F6t()}),(function(){e.E6t&&(e.removeFullscreenWrapper(),e.Q6t(),e.disableWakeLock(),e.E6t=!1,e.isPresenting=!1,n(new b("Unable to present.")))})),!function(t){if(h.fullscreenEnabled&&t.requestFullscreen)t.requestFullscreen();else if(h.webkitFullscreenEnabled&&t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(h.mozFullScreenEnabled&&t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!h.msFullscreenEnabled||!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0}(l)?(Bc()||U4())&&(e.enableWakeLock(),e.isPresenting=!0,e.R6t(),e.F6t(),s()):(e.enableWakeLock(),e.E6t=!0)}e.E6t||Bc()||(q4(),n(new b("Unable to present.")))}else s()}else n(new b("VRDisplay is not capable of presenting."))}))},ho.prototype.exitPresent=function(){var t=this.isPresenting,i=this;return this.isPresenting=!1,this.iN=null,this.disableWakeLock(),new Promise((function(e,s){t?(q4(),i.U6t(),i.removeFullscreenWrapper(),i.Q6t(),i.F6t(),e()):s(new b("Was not presenting to VRDisplay."))}))},ho.prototype.getLayers=function(){return this.iN?[this.iN]:[]},ho.prototype.F6t=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});s.dispatchEvent(t)},ho.prototype.Y6t=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});s.dispatchEvent(t)},ho.prototype.B6t=function(t,i,e){this.Q6t(),this.k6t=t,this.C6t=i,this.x6t=e,i&&(h.fullscreenEnabled?t.addEventListener("fullscreenchange",i,!1):h.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenchange",i,!1):h.mozFullScreenEnabled?h.addEventListener("mozfullscreenchange",i,!1):h.msFullscreenEnabled&&t.addEventListener("msfullscreenchange",i,!1)),e&&(h.fullscreenEnabled?t.addEventListener("fullscreenerror",e,!1):h.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenerror",e,!1):h.mozFullScreenEnabled?h.addEventListener("mozfullscreenerror",e,!1):h.msFullscreenEnabled&&t.addEventListener("msfullscreenerror",e,!1))},ho.prototype.Q6t=function(){if(this.k6t){var t=this.k6t;if(this.C6t){var i=this.C6t;t.removeEventListener("fullscreenchange",i,!1),t.removeEventListener("webkitfullscreenchange",i,!1),h.removeEventListener("mozfullscreenchange",i,!1),t.removeEventListener("msfullscreenchange",i,!1)}if(this.x6t){var e=this.x6t;t.removeEventListener("fullscreenerror",e,!1),t.removeEventListener("webkitfullscreenerror",e,!1),h.removeEventListener("mozfullscreenerror",e,!1),t.removeEventListener("msfullscreenerror",e,!1)}this.k6t=null,this.C6t=null,this.x6t=null}},ho.prototype.enableWakeLock=function(){this.O6t&&this.O6t.enable()},ho.prototype.disableWakeLock=function(){this.O6t&&this.O6t.disable()},ho.prototype.R6t=function(){},ho.prototype.U6t=function(){},ho.prototype.submitFrame=function(t){},ho.prototype.getEyeParameters=function(t){return null};var R2={MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},U2="left",Q2="right";function js(t){var i=J4({},R2);t=J4(i,t||{}),ho.call(this,{wakelock:t.MOBILE_WAKE_LOCK}),this.config=t,this.displayName="Cardboard VRDisplay",this.capabilities=new B2({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.G6t=this.config.BUFFER_SCALE,this.V6t=new E2(this.config),this.W6t=null,this.H6t=null,this.D9=null,this.q6t=null,this.X6t=new p2(this.config.DPDB_URL,this.Z6t.bind(this)),this.K6t=new ea(this.X6t.getDeviceParams()),this.J6t=new Ce,this.J6t.onChange(this.$6t.bind(this)),this.K6t.setViewer(this.J6t.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.t8t=new ph),Bc()&&s.addEventListener("resize",this.XY.bind(this))}js.prototype=_.create(ho.prototype),js.prototype.j6t=function(){return{position:null,orientation:this.V6t.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},js.prototype.z6t=function(){this.V6t.resetPose&&this.V6t.resetPose()},js.prototype.F5t=function(t){var i;if(t==U2)i=this.K6t.getFieldOfViewLeftEye();else{if(t!=Q2)return console.error("Invalid eye provided: %s",t),null;i=this.K6t.getFieldOfViewRightEye()}return i},js.prototype.Y5t=function(t){var i;if(t==U2)i=[.5*-this.K6t.viewer.interLensDistance,0,0];else{if(t!=Q2)return console.error("Invalid eye provided: %s",t),null;i=[.5*this.K6t.viewer.interLensDistance,0,0]}return i},js.prototype.getEyeParameters=function(t){var i=this.Y5t(t),e=this.F5t(t),s={offset:i,renderWidth:.5*this.K6t.device.width*this.G6t,renderHeight:this.K6t.device.height*this.G6t};return _.defineProperty(s,"fieldOfView",{enumerable:!0,get:function(){return Kr("VRFieldOfView","VRFrameData's projection matrices"),e}}),s},js.prototype.Z6t=function(t){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.K6t.updateDeviceParams(t),this.W6t&&this.W6t.updateDeviceInfo(this.K6t)},js.prototype.i8t=function(){this.iN&&this.W6t&&(this.iN.leftBounds||this.iN.rightBounds)&&this.W6t.setTextureBounds(this.iN.leftBounds,this.iN.rightBounds)},js.prototype.R6t=function(){var t=this.iN.source.getContext("webgl");if(t||(t=this.iN.source.getContext("experimental-webgl")),t||(t=this.iN.source.getContext("webgl2")),t){if(this.D9=t.canvas,this.q6t=t.canvas.getAttribute("style"),this.iN.predistorted?this.config.CARDBOARD_UI_DISABLED||(t.canvas.width=W4()*this.G6t,t.canvas.height=H4()*this.G6t,this.H6t=new Gh(t)):(this.config.CARDBOARD_UI_DISABLED||(this.H6t=new Gh(t)),this.W6t=new Fr(t,this.H6t,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.W6t.updateDeviceInfo(this.K6t)),this.H6t&&this.H6t.listen(function(t){this.J6t.show(this.iN.source.parentElement),t.stopPropagation(),t.preventDefault()}.bind(this),function(t){this.exitPresent(),t.stopPropagation(),t.preventDefault()}.bind(this)),this.t8t){var i=this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT;V4()&&K4()&&i?this.t8t.showTemporarily(i,this.iN.source.parentElement):this.t8t.update()}this.orientationHandler=this.o6t.bind(this),s.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.i8t.bind(this),s.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.XY(),this.e8t()}},js.prototype.U6t=function(){this.W6t&&(this.W6t.destroy(),this.W6t=null),this.H6t&&(this.H6t.destroy(),this.H6t=null),this.t8t&&this.t8t.hide(),this.J6t.hide(),this.D9&&(t2(this.D9),this.q6t?this.D9.setAttribute("style",this.q6t):this.D9.removeAttribute("style"),$4(this.D9),this.D9=null,this.q6t=null),s.removeEventListener("orientationchange",this.orientationHandler),s.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},js.prototype.P6t=function(){this.U6t(),this.R6t()},js.prototype.submitFrame=function(t){if(this.W6t)this.i8t(),this.W6t.submitFrame();else if(this.H6t&&this.iN){var i=this.iN.source.getContext("webgl").canvas;i.width==this.lastWidth&&i.height==this.lastHeight||this.H6t.onResize(),this.lastWidth=i.width,this.lastHeight=i.height,this.H6t.render()}},js.prototype.o6t=function(t){this.J6t.hide(),this.t8t&&this.t8t.update(),this.XY()},js.prototype.XY=function(t){if(this.iN){var i=this.iN.source.getContext("webgl");t2(i.canvas);i.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),$4(i.canvas)}},js.prototype.$6t=function(t){this.K6t.setViewer(t),this.W6t&&this.W6t.updateDeviceInfo(this.K6t),this.e8t()},js.prototype.e8t=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.K6t}});s.dispatchEvent(t)},js.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},js.VRDisplay=ho;var F2={PROVIDE_MOBILE_VRDISPLAY:!0,GET_VR_DISPLAYS_TIMEOUT:1e3,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function or(t){this.config=z4(z4({},F2),t),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in nd,this.native={},this.native.getVRDisplays=nd.getVRDisplays,this.native.VRFrameData=s.VRFrameData,this.native.VRDisplay=s.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&O4())&&(this.enable(),this.getVRDisplays().then((function(t){t&&t[0]&&t[0].Y6t&&t[0].Y6t()})))}or.prototype.getPolyfillDisplays=function(){if(this.s8t)return this.polyfillDisplays;if(O4()){var t=new js({MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,TOUCH_PANNER_DISABLED:this.config.TOUCH_PANNER_DISABLED,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(t)}return this.s8t=!0,this.polyfillDisplays},or.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var t=this.native.VRFrameData,i=new this.native.VRFrameData,e=this.native.VRDisplay.prototype.getFrameData;s.VRDisplay.prototype.getFrameData=function(s){s instanceof t?e.call(this,s):(e.call(this,i),s.pose=i.pose,j4(i.leftProjectionMatrix,s.leftProjectionMatrix),j4(i.rightProjectionMatrix,s.rightProjectionMatrix),j4(i.leftViewMatrix,s.leftViewMatrix),j4(i.rightViewMatrix,s.rightViewMatrix))}}nd.getVRDisplays=this.getVRDisplays.bind(this),s.VRDisplay=js.VRDisplay,s.VRFrameData=js.VRFrameData},or.prototype.getVRDisplays=function(){var t,i=this,e=this.config;return this.hasNative?function(t){return Promise.race?Promise.race(t):new Promise((function(i,e){for(var s=0;s<t.length;s++)t[s].then(i,e)}))}([this.native.getVRDisplays.call(nd),new Promise((function(i){t=u((function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),i([])}),e.GET_VR_DISPLAYS_TIMEOUT)}))]).then((function(e){return c(t),e.length>0?e:i.getPolyfillDisplays()})):Promise.resolve(this.getPolyfillDisplays())},or.version="0.10.5-opentelly.3",or.VRFrameData=js.VRFrameData,or.VRDisplay=js.VRDisplay;var Y2=_.freeze({default:or}),G2=Y2&&or||Y2;void 0!==x4&&x4.window&&(x4.document||(x4.document=x4.window.document),x4.navigator||(x4.navigator=x4.window.navigator));new G2({TOUCH_PANNER_DISABLED:!0,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:0,MOBILE_WAKE_LOCK:!_n.Tb&&!_n.Va,DPDB_URL:void 0});r(),r(),r();var V2=class{n8t(t,i){const e=this.r8t;let s;switch(i){case e.VERTEX_SHADER:s=e.createShader(i),this.h8t=s;break;case e.FRAGMENT_SHADER:s=e.createShader(i),this.o8t=s;break;default:return void console.error("Invalid Shader Type:",i)}e.attachShader(this.a8t,s),e.shaderSource(s,t),e.compileShader(s)}u8t(t){const i=this.r8t;if(t){this.c8t={};for(const e in t)i.bindAttribLocation(this.a8t,t[e],e),this.c8t[e]=t[e]}}l8t(){this.r8t.linkProgram(this.a8t)}d8t(){const t=this.r8t;if(this.f8t){if(t.getProgramParameter(this.a8t,t.LINK_STATUS)){if(!this.c8t){this.c8t={};const i=t.getProgramParameter(this.a8t,t.ACTIVE_ATTRIBUTES);for(let e=0;e<i;e++){const i=t.getActiveAttrib(this.a8t,e);this.c8t[i.name]=t.getAttribLocation(this.a8t,i.name)}}this._8t={};const i=t.getProgramParameter(this.a8t,t.ACTIVE_UNIFORMS);let e="";for(let s=0;s<i;s++){e=t.getActiveUniform(this.a8t,s).name.replace("[0]",""),this._8t[e]=t.getUniformLocation(this.a8t,e)}}else this.h8t&&!t.getShaderParameter(this.h8t,t.COMPILE_STATUS)?console.error("Vertex shader compile error:",t.getShaderInfoLog(this.h8t)):this.o8t&&!t.getShaderParameter(this.o8t,t.COMPILE_STATUS)?console.error("Fragment shader compile error:",t.getShaderInfoLog(this.o8t)):console.error("Program link error:",t.getProgramInfoLog(this.a8t)),t.deleteProgram(this.a8t),this.a8t=null;t.deleteShader(this.h8t),t.deleteShader(this.o8t),this.f8t=!1}t.useProgram(this.a8t)}constructor(t){this.c8t=null,this._8t=null,this.f8t=!0,this.h8t=null,this.o8t=null,this.r8t=t,this.a8t=t.createProgram()}},W2=class{rr(t,i,e){let s=this.r8t;this.g8t(t,i,s,e),this.t.q_||this.t.D9.kY(s,s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE),s.drawElements(s.TRIANGLES,this.w8t,s.UNSIGNED_SHORT,0)}A8t(t){this.v8t||(t.bindTexture(t.TEXTURE_2D,this.m8t),this.t.D9.kY(t,t.TEXTURE_2D,0,t.RGB,t.RGB,t.UNSIGNED_BYTE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.v8t=!0)}g8t(t,i,e,s){const n=this.a8t;n.d8t(),this.A8t(e);const r=n._8t,h=n.c8t;let o;e.uniformMatrix4fv(r.projectionMat,!1,t),e.uniformMatrix4fv(r.modelViewMat,!1,i),o="right"===s?this.p8t:this.y8t,e.bindBuffer(e.ARRAY_BUFFER,o),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.M8t),e.enableVertexAttribArray(h.position),e.enableVertexAttribArray(h.texCoord),e.vertexAttribPointer(h.position,3,e.FLOAT,!1,20,0),e.vertexAttribPointer(h.texCoord,2,e.FLOAT,!1,20,12),e.activeTexture(e.TEXTURE0),e.uniform1i(r.diffuse,0),e.bindTexture(e.TEXTURE_2D,this.m8t)}constructor(t,i,e){this.v8t=!1,this.r8t=t,this.m8t=t.createTexture();let s=["uniform mat4 projectionMat;","uniform mat4 modelViewMat;","attribute vec3 position;","attribute vec2 texCoord;","varying vec2 vTexCoord;","void main() {","  vTexCoord = texCoord;","  gl_Position = projectionMat * modelViewMat * vec4( position, 1.0 );","}"].join("\n"),n=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");this.a8t=new V2(t),this.a8t.n8t(s,t.VERTEX_SHADER),this.a8t.n8t(n,t.FRAGMENT_SHADER),this.a8t.u8t({position:0,texCoord:1}),this.a8t.l8t();const r=[],h=[],o=[],a=40;for(let t=0;t<=40;++t){const i=t*x.PI/40,s=x.sin(i),n=x.cos(i);for(let i=0;i<=a;++i){const o=2*i*x.PI/a-x.PI,u=x.sin(o)*s,c=n,l=-x.cos(o)*s,d=i/a,f=t/40;switch(e){case"horizontal":r.push(2*u,2*c,2*l,d/2,f),h.push(2*u,2*c,2*l,d/2+.5,f);break;case"vertical":r.push(2*u,2*c,2*l,d,f/2),h.push(2*u,2*c,2*l,d,f/2+.5);break;default:r.push(2*u,2*c,2*l,d,f)}}}for(let t=0;t<40;++t){let i=41*t,e=41*(t+1);for(let t=0;t<a;++t){let s=i+t,n=e+t;o.push(s,n,s+1,n,n+1,s+1)}}switch(this.y8t=t.createBuffer(),this.p8t=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.y8t),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.p8t),e){case"horizontal":case"vertical":t.bufferData(t.ARRAY_BUFFER,new Float32Array(h),t.STATIC_DRAW);break;default:t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW)}this.M8t=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.M8t),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),t.STATIC_DRAW),this.w8t=o.length,this.t=i}};r();var H2=class extends Ha{ha(){return new q2}constructor(){super("T8t")}},q2=class extends gg{constructor(){super("stereochange")}};r();var X2=class extends Ha{ha(){return new Z2}constructor(){super("N8t")}},Z2=class extends gg{constructor(){super("directionchange")}};r(),r();var so=x.PI/180,cr=180/x.PI,Mh=class{yz(t,i){return this.x=t,this.y=i,this}emt(t){return this.x=t.x,this.y=t.y,this}D8t(t){return this.yz(t[0],t[1])}I8t(){const t=new Float32Array(2);return t[0]=this.x,t[1]=this.y,t}S8t(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}constructor(t,i){this.x=t||0,this.y=i||0}},K2=class{yz(t,i,e){return this.x=t,this.y=i,this.z=e,this}emt(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}D8t(t){return this.yz(t[0],t[1],t[2])}I8t(){const t=new Float32Array(3);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t}U(){return x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}E8t(){const t=this.U();if(0!==t){const i=1/t;this.b8t(i)}else this.x=0,this.y=0,this.z=0;return this}b8t(t){this.x*=t,this.y*=t,this.z*=t}L8t(t){const i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,h=t.z,o=t.w,a=o*i+r*s-h*e,u=o*e+h*i-n*s,c=o*s+n*e-r*i,l=-n*i-r*e-h*s;return this.x=a*o+l*-n+u*-h-c*-r,this.y=u*o+l*-r+c*-n-a*-h,this.z=c*o+l*-h+a*-r-u*-n,this}k8t(t){return this.x*t.x+this.y*t.y+this.z*t.z}C8t(t,i){const e=t.x,s=t.y,n=t.z,r=i.x,h=i.y,o=i.z;return this.x=s*o-n*h,this.y=n*r-e*o,this.z=e*h-s*r,this}constructor(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0}},Oa=class{yz(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this}emt(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}D8t(t){return this.yz(t[0],t[1],t[2],t[3])}I8t(){const t=new Float32Array(4);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=this.w,t}k8t(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}oy(t){return this.x8t(this,t)}x8t(t,i){const e=t.x,s=t.y,n=t.z,r=t.w,h=i.x,o=i.y,a=i.z,u=i.w;return this.x=e*u+r*h+s*a-n*o,this.y=s*u+r*o+n*h-e*a,this.z=n*u+r*a+e*o-s*h,this.w=r*u-e*h-s*o-n*a,this}O8t(){return this.x*=-1,this.y*=-1,this.z*=-1,this.E8t(),this}j8t(){const t=this.x,i=this.y,e=this.z,s=this.w,n=t*i+e*s;let r,h,o;if(n>.499)r=2*x.atan2(t,s),h=x.PI/2,o=0;else if(n<-.499)r=-2*x.atan2(t,s),h=-x.PI/2,o=0;else{const a=t*t,u=i*i,c=e*e;r=x.atan2(2*i*s-2*t*e,1-2*u-2*c),h=x.asin(2*n),o=x.atan2(2*t*s-2*i*e,1-2*a-2*c)}return new J2(r,o,h)}E8t(){let t=x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this}constructor(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1}},J2=class{yz(t,i,e){return this.z8t=t,this.P8t=i,this.B8t=e,this}emt(t){return this.yz(t.z8t,t.P8t,t.B8t)}gm(t){return this.z8t+=t.z8t,this.P8t+=t.P8t,this.B8t+=t.B8t,this}R8t(){const t=this.z8t,i=this.B8t,e=this.P8t,s=x.cos(t/2),n=x.cos(i/2),r=x.cos(e/2),h=x.sin(t/2),o=x.sin(i/2),a=x.sin(e/2),u=s*n,c=h*o;return new Oa(u*a+c*r,h*n*r+s*o*a,s*o*r-h*n*a,u*r-c*a)}constructor(t,i,e){this.z8t=t||0,this.P8t=i||0,this.B8t=e||0}},$2=.15,t3=class{ZI(){this.Rt||(this.Rt=!0,this.we.addEventListener("keydown",this.U8t),this.we.addEventListener("mousedown",this.Q8t),this.we.addEventListener("touchstart",this.F8t),s.addEventListener("mousemove",this.Xn),s.addEventListener("mouseup",this.Y8t),this.G8t(s),s.addEventListener("touchmove",this.V8t),s.addEventListener("touchend",this.W8t))}G8t(t){if(uN(t));else if(nn(t))try{t.parent.addEventListener("mouseup",this.Y8t),this.G8t(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.H8t)}}KI(){this.Rt&&(this.Rt=!1,this.q8t=!1,this.X8t&&(fh(this.X8t),this.X8t=null),this.we.removeEventListener("keydown",this.U8t),this.we.removeEventListener("mousedown",this.Q8t),this.we.removeEventListener("touchstart",this.F8t),s.removeEventListener("mousemove",this.Xn),s.removeEventListener("mouseup",this.Y8t),this.Z8t(s),s.removeEventListener("touchmove",this.V8t),s.removeEventListener("touchend",this.W8t))}Z8t(t){if(t.document.documentElement.removeEventListener("mouseleave",this.H8t),nn(t))try{t.parent.removeEventListener("mouseup",this.Y8t),this.Z8t(t.parent)}catch(t){}}get K8t(){return new J2(this.J8t,this.$8t,this.t9t)}set K8t(t){this.J8t=t.z8t,this.$8t=t.P8t,this.t9t=t.B8t}i9t(t){this.e9t("J8t",t)}s9t(t){t=It(t,-x.PI/2,x.PI/2),this.e9t("$8t",t)}e9t(t,i){this.X8t&&fh(this.X8t);let e=this[t],s=Fu(),n=()=>{let r=Fu()-s;if(r>=80)return this[t]=i,fh(this.X8t),void(this.X8t=null);this.X8t=Hr(n);let h=r/80;this[t]=e+(i-e)*h};this.X8t=Hr(n)}n9t(){this.$8t+=2*x.PI*this.r9t.y/this.we.clientHeight*.3,this.J8t+=2*x.PI*this.r9t.x/this.we.clientWidth*.5,this.$8t=It(this.$8t,-x.PI/2,x.PI/2)}h9t(){this.q8t=!1}o9t(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.we}resetPose(){this.$8t=0,this.J8t=0}cn(){this.KI()}constructor(t){this.Rt=!1,this.$8t=0,this.J8t=0,this.t9t=0,this.X8t=null,this.a9t=new Mh,this.u9t=new Mh,this.r9t=new Mh,this.q8t=!1,this.U8t=t=>{38===t.keyCode?this.s9t(this.$8t+$2):39===t.keyCode?this.i9t(this.J8t-$2):40===t.keyCode?this.s9t(this.$8t-$2):37===t.keyCode&&this.i9t(this.J8t+$2)},this.Q8t=t=>{this.a9t.yz(t.clientX,t.clientY),this.q8t=!0,t.preventDefault()},this.F8t=t=>{t.touches&&1===t.touches.length&&(this.a9t.yz(t.touches[0].pageX,t.touches[0].pageY),this.q8t=!0,t.preventDefault())},this.Xn=t=>{if(this.q8t||this.o9t()){if(this.o9t()){let i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.u9t.yz(this.a9t.x-i,this.a9t.y-e)}else this.u9t.yz(t.clientX,t.clientY);this.r9t.S8t(this.u9t,this.a9t),this.a9t.emt(this.u9t),this.n9t()}},this.V8t=t=>{this.q8t&&(this.u9t.yz(t.touches[0].pageX,t.touches[0].pageY),this.r9t.S8t(this.u9t,this.a9t),this.a9t.emt(this.u9t),this.n9t())},this.Y8t=t=>{this.h9t()},this.W8t=t=>{this.h9t()},this.H8t=t=>{this.h9t()},this.we=t}};r();var Kh=Zh(T_()),i3=Zh(N_()),e3=(Zh(D_()),Zh(I_())),s3=(Zh(S_()),Zh(E_())),n3=Zh(b_()),r3=Zh(L_()),h3=Zh(k_()),o3=Zh(C_());r();var xi,a3=["N8t","p_t","T8t","error"];function u3(t){let i,e={get stereo(){return t.c9t},set stereo(i){t.c9t=i},get useDeviceMotionControls(){return t.l9t},set useDeviceMotionControls(i){t.l9t=i},get direction(){return t.d9t},set direction(i){t.d9t=i},get verticalFOV(){return t.f9t},set verticalFOV(i){t.f9t=i},get canPresentVR(){return t._9t},get state(){return t.n5},addEventListener(t,e){i.ln(t,e)},removeEventListener(t,e){i.rn(t,e)}};return i=new Lu(t,a3,e),e}r(),function(t){t.Rs="unavailable",t.g9t="available",t.Na="presenting"}(xi||(xi={}));var c3=new J2(0*so,0,0);function l3(t){return F_(t+180,360)-180}function d3(t,i){let e=t.k8t(i);return 1-e*e<1e-4}var f3=class extends i{do(){nd.getVRDisplays?(this.w9t=new VRFrameData,this.A9t(),s.addEventListener("vrdisplayconnect",this.A9t,!1),s.addEventListener("vrdisplaydisconnect",this.A9t,!1),s.addEventListener("vrdisplayactivate",this.v9t,!1),s.addEventListener("vrdisplaydeactivate",this.m9t,!1),s.addEventListener("vrdisplaypresentchange",this.p9t,!1)):nd.getVRDevices?this.y9t("Your browser supports WebVR but not the latest version.",le.VR_PLATFORM_UNSUPPORTED):this.y9t("Your browser does not support WebVR.",le.VR_PLATFORM_UNSUPPORTED),this.t.ln(t.no,this.ro),this.ro()}M9t(){let t={alpha:!1,antialias:!1,preserveDrawingBuffer:!0};if(!this.T9t){const t=h.createElement("canvas");t.className="theoplayer-vr",ia(t),t.style.zIndex="2",this.t.we.appendChild(t),this.T9t=t}this.r8t=this.T9t.getContext("webgl",t),this.r8t||(this.r8t=this.T9t.getContext("experimental-webgl",t),this.r8t)?(this.r8t.enable(this.r8t.DEPTH_TEST),this.r8t.enable(this.r8t.CULL_FACE)):this.y9t("Your browser does not support WebGL.",le.VR_PLATFORM_UNSUPPORTED)}N9t(){let t=this.d9t;this.D9t||(this.M9t(),this.D9t=!0),this.r8t&&(this.I9t(new W2(this.r8t,this.t,this.S9t)),this.T9t.style.display="",this.gi||(this.gi=new t3(this.T9t)),this.gi.ZI(),this.t.la.ln(Pc.Ko,this.XY),this.t.ln(xr.an,this.XY),this.d9t=t,this.XY(),this.E9t=Hr(this.b9t))}L9t(){let t=this.d9t;this.I9t(void 0),this.gi&&this.gi.KI(),this.T9t&&(this.T9t.style.display="none"),this.t.la.rn(Pc.Ko,this.XY),this.t.rn(xr.an,this.XY),this.E9t&&fh(this.E9t),this.d9t=t}k9t(){var t;return null==(t=this.t.Oa())?void 0:t.vr}C9t(t){let i=this.n5,e=this.c9t;this.x9t&&(this.O9t=void 0,this.m9t()),this.x9t=t,this.x9t&&(this.x9t.depthNear=.1,this.x9t.depthFar=1024),this.c9t=e,this.n5!==i&&this.mo(new ll),this.c9t!==e&&this.mo(new H2)}j9t(t){let i=this.n5;this.z9t=t,this.n5!==i&&this.mo(new ll)}I9t(t){let i=this.n5;this.P9t=t,this.n5!==i&&this.mo(new ll)}B9t(t){let i=this.n5,e=this.c9t;this.R9t=t,this.gi&&(t?this.gi.KI():this.gi.ZI()),this.n5!==i&&this.mo(new ll),this.c9t!==e&&this.mo(new H2)}U9t(t){let i=this.c9t;this.Q9t=t,this.c9t!==i&&this.mo(new H2)}F9t(){let t=this.T9t;this.Y9t===t.width&&this.G9t===t.height||(t.width=this.Y9t,t.height=this.G9t,this.V9t())}W9t(t,i){(0,i3.default)(t,i.I8t()),(0,s3.default)(t,t)}useDeviceOrientation(){return!!this.R9t||this.H9t}q9t(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().catch(xs)}y9t(t,i){Nu(t),this.mo(new me(new ce(i,t)))}X9t(){this.mo(new X2)}get c9t(){return this._9t?this.R9t:this.Q9t}set c9t(t){this._9t?t?this.v9t():this.m9t():this.U9t(t)}get l9t(){return this.H9t}set l9t(t){this.c9t||(this.H9t=t,t&&_n.Va&&this.q9t())}get d9t(){let t=this.K8t;return{yaw:l3(t.z8t*cr),pitch:t.P8t*cr,roll:x.round(t.B8t*cr)}}set d9t(t){let i=l3(t&&+t.yaw||0),e=l3(t&&+t.pitch||0),s=l3(t&&+t.roll||0);this.K8t=new J2(i*so,e*so,s*so)}get K8t(){if(this.n5===xi.Rs)return this.Z9t.j8t();let t=this.K9t,i=this.J9t,e=new J2;return t&&e.gm(t),i&&e.gm(i),e}set K8t(t){const i=this.K8t.R8t();if(this.n5===xi.Rs)this.Z9t=t.R8t();else{let i=this.x9t;i&&i.resetPose&&i.resetPose(),this.gi&&(this.gi.K8t=t),this.Z9t=this.K8t.R8t()}d3(i,this.Z9t)||this.X9t()}get K9t(){let t=this.O9t&&this.O9t.orientation;if(t)return(new Oa).D8t(t).j8t()}get J9t(){return this.gi&&this.gi.K8t}get f9t(){return 180*this.$9t}set f9t(t){t&&t>=0&&t<=180&&(this.$9t=+t/180)}get _9t(){return!(!this.x9t||!this.x9t.capabilities.canPresent)}get n5(){var t;return this.z9t&&((null==(t=this.k9t())?void 0:t.nativeVR)||this.P9t)?this.R9t?xi.Na:xi.g9t:xi.Rs}cn(){this.Bo(),this.L9t(),this.m9t(),this.t.rn(t.no,this.ro),nd.getVRDisplays&&(s.removeEventListener("vrdisplayconnect",this.A9t,!1),s.removeEventListener("vrdisplaydisconnect",this.A9t,!1),s.removeEventListener("vrdisplayactivate",this.v9t,!1),s.removeEventListener("vrdisplaydeactivate",this.m9t,!1),s.removeEventListener("vrdisplaypresentchange",this.p9t,!1))}constructor(t){super(),this.Z9t=new Oa,this.$9t=.4,this.Q9t=!1,this.H9t=!1,this.z9t=!1,this.vd=void 0,this.S9t=Xa.NONE,this.gi=void 0,this.t7t=[],this.x9t=void 0,this.R9t=!1,this.D9t=!1,this.T9t=void 0,this.P9t=void 0,this.r8t=null,this.E9t=0,this.w9t=void 0,this.O9t=void 0,this.i7t=(0,Kh.default)(),this.e7t=(0,Kh.default)(),this.Y9t=0,this.G9t=0,this.s7t=!0,this.n7t=0,this.r7t=()=>{this.t.rn(qo._v,this.r7t);let t=this.k9t();t&&!t.nativeVR&&this.N9t()},this.ro=()=>{this.L9t();let t=this.k9t();this.vd=t,t&&t.panoramaMode!==sl.NONE?(t.panoramaMode===sl.PM180&&ji("PanoramaMode is set to '180' while the VR API only supports '360', consider using the WebXR API if you need to play 180 degree content."),this.j9t(!0),t.nativeVR?this.mo(new ll):(this.S9t=t.stereoMode,this.t.ln(qo._v,this.r7t))):this.j9t(!1)},this.v9t=async()=>{if(this.n5!==xi.Rs&&this._9t){this.s7t=!1,this.h7t();try{await this.x9t.requestPresent([{source:this.T9t}])}catch(t){this.y9t("Failed to present VR content.",le.VR_PRESENTATION_ERROR)}finally{this.p9t()}}},this.m9t=async()=>{if(this.x9t)try{await this.x9t.exitPresent()}catch(t){}finally{this.p9t()}},this.A9t=async()=>{try{this.t7t=await nd.getVRDisplays(),this.x9t&&na(this.t7t,this.x9t)||this.C9t(this.t7t[0])}catch(t){this.t7t=[],this.C9t(void 0)}},this.p9t=()=>{this.B9t(!!this.x9t&&this.x9t.isPresenting),this.XY(),this.s7t=!this.R9t,this.s7t?Hr(this.V9t):this.h7t()},this.XY=()=>{if(!this.T9t)return;const t=this.t.we.offsetWidth,i=this.t.we.offsetHeight;let e=this.x9t;if(e&&this.c9t){let t=e.getEyeParameters("left"),i=e.getEyeParameters("right");t&&i&&(this.Y9t=2*x.max(t.renderWidth,i.renderWidth),this.G9t=x.max(t.renderHeight,i.renderHeight))}else{let e=fe.Ys.S4;this.Y9t=t*e,this.G9t=i*e}},this.V9t=()=>{if(!_n.Va||!this.T9t||!this.s7t)return;this.h7t();let t=this.T9t,i=t.offsetWidth+1,e=t.offsetHeight;t.style.width=i+"px",t.style.height=e+"px",this.n7t=Hr(this.h7t)},this.h7t=()=>{if(!this.n7t)return;let t=this.T9t;t.style.width="100%",t.style.height="100%",fh(this.n7t),this.n7t=0},this.b9t=()=>{let t=this.x9t,i=this.$9t,e=this.T9t,s=this.P9t,n=this.r8t,r=this.w9t,h=this.i7t,o=this.e7t;this.F9t(),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),t&&this.useDeviceOrientation()&&(t.getFrameData(r),this.O9t=r.pose);let a=this.K8t.R8t();this.W9t(o,a),t&&t.isPresenting?(this.E9t=t.requestAnimationFrame(this.b9t),n.viewport(0,0,.5*e.width,e.height),s.rr(r.leftProjectionMatrix,o,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.rr(r.rightProjectionMatrix,o,"right"),t.submitFrame()):(this.E9t=Hr(this.b9t),(0,r3.default)(h,x.PI*i,e.width/e.height,.1,1024),this.c9t?(n.viewport(0,0,.5*e.width,e.height),s.rr(h,o,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.rr(h,o,"right")):(n.viewport(0,0,e.width,e.height),s.rr(h,o))),d3(a,this.Z9t)||(this.Z9t.emt(a),this.X9t())},this.t=t,this.K8t=c3,this.oa=u3(this),this.do()}};r(),tr((function(t){return class extends t{ha(){if(null!==this.o7t){const t=this.o7t.oa;return Ou(super.ha(),{vr:t})}return super.ha()}cn(){var t;null==(t=this.o7t)||t.cn(),super.cn()}constructor(t,i){super(t,i),this.o7t=null,i.vr.useWebXR||(this.o7t=new f3(this))}}}),iu.Wa),r(),r(),r(),r();var _3=class{ZI(){this.Le||(this.Le=!0,this.Us.addEventListener("mousedown",this.Q8t),this.Us.addEventListener("touchstart",this.F8t),s.addEventListener("mousemove",this.Xn),s.addEventListener("touchmove",this.V8t),s.addEventListener("mouseup",this.Y8t),s.addEventListener("touchend",this.W8t),this.G8t(s))}KI(){this.Le&&(this.Le=!1,this.Us.removeEventListener("mousedown",this.Q8t),this.Us.removeEventListener("touchstart",this.F8t),s.removeEventListener("mousemove",this.Xn),s.removeEventListener("touchmove",this.V8t),s.removeEventListener("mouseup",this.Y8t),s.removeEventListener("touchend",this.W8t),this.Z8t(s))}G8t(t){if(uN(t));else if(nn(t))try{t.parent.addEventListener("mouseup",this.Y8t),this.G8t(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.H8t)}}Z8t(t){if(t.document.documentElement.removeEventListener("mouseleave",this.H8t),nn(t))try{t.parent.removeEventListener("mouseup",this.Y8t),this.Z8t(t.parent)}catch(t){}}h9t(){this.a7t=!1}n9t(){const t=this.c7t.u7t;t.yaw+=2*x.PI*this.l7t.x*.4/this.Us.clientWidth,t.pitch+=2*x.PI*this.l7t.y*.5/this.Us.clientHeight,t.pitch=It(t.pitch,-x.PI/2,x.PI/2),this.c7t.u7t=t}o9t(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.Us}cn(){this.KI()}constructor(t,i){this.Le=!1,this.d7t=new Mh,this.f7t=new Mh,this.l7t=new Mh,this.a7t=!1,this.Q8t=t=>{this.d7t.yz(t.clientX,t.clientY),this.a7t=!0,t.preventDefault(),t.stopPropagation()},this.F8t=t=>{t.touches&&1===t.touches.length&&(this.d7t.yz(t.touches[0].pageX,t.touches[0].pageY),this.a7t=!0,t.preventDefault())},this.Xn=t=>{if(this.a7t||this.o9t()){if(this.o9t()){const i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.f7t.yz(this.d7t.x-i,this.d7t.y-e)}else this.f7t.yz(t.clientX,t.clientY);this.l7t.S8t(this.f7t,this.d7t),this.d7t.emt(this.f7t),this.n9t()}},this.V8t=t=>{this.a7t&&(this.f7t.yz(t.touches[0].pageX,t.touches[0].pageY),this.l7t.S8t(this.f7t,this.d7t),this.d7t.emt(this.f7t),this.n9t())},this.Y8t=()=>{this.h9t()},this.W8t=()=>{this.h9t()},this.H8t=()=>{this.h9t()},this.c7t=t,this.Us=i}};r();var g3=class{_7t(t){t.clearColor(...this.oH),t.clear(t.COLOR_BUFFER_BIT)}g7t(t,i){t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.DEPTH_BUFFER_BIT),this.w7t.forEach((e=>{e.g7t(t,i)}))}A7t(t){this.w7t.push(t)}v7t(){this.w7t=[]}constructor(){this.oH=[0,0,0,1],this.w7t=[]}};r(),r(),r();var w3=class{m7t(t,i,e){const s=t.createBuffer();return null===s?(ji("Failed to create buffer."),null):(t.bindBuffer(i,s),t.bufferData(i,e,t.STATIC_DRAW),s)}constructor(t,i,e,s,n){this.p7t=t,this.uL=this.m7t(t,i,e),this.y7t=s,this.a0=n,this.M7t=!1,this.T7t=0,this.Wu=0}},A3=class extends w3{ZI(t){if(null===this.uL)return void ji("Attempted to enable buffer that failed to initialize.");if(null===t)return void ji("Attempted to enable attribute without location.");const i=this.p7t;i.bindBuffer(i.ARRAY_BUFFER,this.uL),i.vertexAttribPointer(t,this.y7t,this.a0,this.M7t,this.T7t,this.Wu),i.enableVertexAttribArray(t)}KI(t){t&&this.p7t.disableVertexAttribArray(t)}constructor(t,i,e){super(t,t.ARRAY_BUFFER,i,e,t.FLOAT)}};var v3,zc,bh,m3=class extends w3{N7t(){const t=this.p7t;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.uL),t.drawElements(t.TRIANGLES,this.D7t,this.a0,this.Wu)}constructor(t,i){super(t,t.ELEMENT_ARRAY_BUFFER,i,1,t.UNSIGNED_SHORT),this.D7t=i.length}};r(),function(t){t.VertexPos="aVertexPosition",t.VertexUV="aVertexUV",t.VertexColor="aVertexColor"}(v3||(v3={})),function(t){t.ProjectionMat="uProjectionMatrix",t.ModelViewMat="uModelViewMatrix",t.Texture="uTexture"}(zc||(zc={})),function(t){t.Normal="vNormal",t.Color="vColor",t.UV="vUV"}(bh||(bh={}));var p3=class{I7t(t,i,e){const s=this.S7t(t,t.VERTEX_SHADER,i),n=this.S7t(t,t.FRAGMENT_SHADER,e);if(null===s||null===n)return ji("Failed to create vertex or fragment shader."),null;const r=t.createProgram();return null===r?(ji("Failed to create shader program"),null):(t.attachShader(r,s),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(ji("Failed to initialize shader program"),null))}S7t(t,i,e){const s=t.createShader(i);if(null===s)return ji("failed to create shader."),null;if(t.shaderSource(s,e),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){const i=t.getShaderInfoLog(s);return ji("Failed to compile shader with error: "+i),t.deleteShader(s),null}return s}E7t(){return this.b7t}L7t(t){const i=this.b7t;if(null===i)return ji("Attempted to retrieve attribute location when shader program was not initialized"),null;const e=this.p7t.getAttribLocation(i,t);return-1===e?null:e}k7t(t){const i=this.b7t;if(null===i)return ji("Attempted to retrieve uniform location when shader program was not initialized"),null;const e=this.p7t.getUniformLocation(i,t);return null===e&&Nu("Attempted to retrieve nonexistent uniform: "+t),e}constructor(t,i,e){this.p7t=t,this.b7t=this.I7t(this.p7t,i,e)}},lo=class{C7t(){const t=this.x7t.length,i=x.max(...this.O7t);return i>=t?(Nu("Created geometry where largest index ("+i+") is larger than/equal to attribute array size ("+t+")"),!1):(i<t-1&&ji("Created geometry where largest index ("+i+") is smaller than attribute buffer - 1 ("+(t-1)+") resulting in unused vertices"),!this.j7t||this.j7t.length===t||(Nu("Created geometry where position ("+t+") and uv ("+this.j7t.length+") buffers have different length."),!1))}z7t(t,i){if(!this.C7t())throw new b("Failed to validate buffers for WebGLGeometry.");const e=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y,t.z)})),new A3(t,new Float32Array(e),3)}(t,this.x7t),s=function(t,i){return new m3(t,new Uint16Array(i))}(t,this.O7t),n=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y)})),new A3(t,new Float32Array(e),2)}(t,this.j7t);return new y3(e,s,n,i)}constructor(t,i,e){this.x7t=t,this.O7t=i,this.j7t=e}},y3=class{P7t(){this.x7t.ZI(this.B7t),null!==this.R7t&&this.j7t.ZI(this.R7t)}U7t(){this.x7t.KI(this.B7t),null!==this.R7t&&this.j7t.KI(this.R7t)}g7t(){this.O7t.N7t()}constructor(t,i,e,s){this.x7t=t;const n=s.L7t(v3.VertexPos);if(null===n)throw new b("Failed to get position attribute location.");this.B7t=n,this.j7t=e,this.R7t=s.L7t(v3.VertexUV),this.O7t=i}},M3=class extends lo{constructor(t=1,i=32,e=16,s=0,n=2*x.PI,r=0,h=x.PI){let o=0;const a=x.min(r+h,x.PI),u=[],c=[],l=[],d=[];for(let u=0;u<=e;u++){const f=[],_=u/e;let g=0;0===u&&0===r?g=.5/i:u===e&&a===x.PI&&(g=-.5/i);for(let e=0;e<=i;e++){const a=e/i,u=-t*x.cos(s+a*n)*x.sin(r+_*h),d=t*x.cos(r+_*h),w=t*x.sin(s+a*n)*x.sin(r+_*h);c.push(new K2(u,d,w)),l.push(new Mh(a+g,1-_)),f.push(o++)}d.push(f)}for(let t=0;t<e;t++)for(let s=0;s<i;s++){const i=d[t][s+1],n=d[t][s],h=d[t+1][s],o=d[t+1][s+1];(0!==t||r>0)&&u.push(i,n,o),(t!==e-1||a<x.PI)&&u.push(n,h,o)}super(c,u,l)}};r(),r();var T3=[0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,255],N3=class{Q7t(){const t=this.p7t;t.activeTexture(this.F7t),t.bindTexture(t.TEXTURE_2D,this.Y7t)}Og(){const t=this.p7t;t.activeTexture(this.F7t),t.bindTexture(t.TEXTURE_2D,this.Y7t),t.uniform1i(this.G7t,0)}V7t(t){const i=this.p7t;i.bindTexture(i.TEXTURE_2D,this.Y7t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,this.sK,this.W7t,this.H7t,this.q7t,t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}X7t(t){const i=this.p7t;i.bindTexture(i.TEXTURE_2D,this.Y7t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),t.D9.kY(i,i.TEXTURE_2D,this.sK,this.W7t,this.H7t,this.q7t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}constructor(t,i){if(this.p7t=t,this.Y7t=t.createTexture(),null===this.Y7t)throw new b("Failed to create texture");const e=i.k7t(zc.Texture);if(null===e)throw new b("Failed to get texture location.");this.G7t=e,t.bindTexture(t.TEXTURE_2D,this.Y7t),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.F7t=t.TEXTURE0,this.sK=0,this.W7t=t.RGBA,this.H7t=t.RGBA,this.q7t=t.UNSIGNED_BYTE,t.texImage2D(t.TEXTURE_2D,this.sK,this.W7t,2,2,0,this.H7t,this.q7t,new T(T3))}},D3="\n    attribute vec4 "+v3.VertexPos+";\n    attribute vec2 "+v3.VertexUV+";\n\n    uniform mat4 "+zc.ModelViewMat+";\n    uniform mat4 "+zc.ProjectionMat+";\n    \n    varying mediump vec2 "+bh.UV+";\n    \n    void main() {\n      gl_Position = "+zc.ProjectionMat+" * "+zc.ModelViewMat+" * "+v3.VertexPos+";\n      "+bh.UV+" = "+v3.VertexUV+";\n    }\n",I3="\n    varying mediump vec2 "+bh.UV+";\n    \n    uniform sampler2D "+zc.Texture+";\n\n    void main() {\n      gl_FragColor = texture2D("+zc.Texture+", "+bh.UV+");\n    }\n",S3=class{E7t(){return this.b7t}ZI(){this.p7t.useProgram(this.b7t.E7t()),this.Y7t.Og()}Z7t(t){this.Y7t.V7t(t)}K7t(t){this.Y7t.X7t(t)}constructor(t){this.p7t=t,this.b7t=new p3(t,D3,I3),this.Y7t=new N3(t,this.b7t)}};r();var E3=class{g7t(t,i){if(this.J7t(i.$7t)){this.tti.P7t(),this.iti.ZI();const e=this.eti,s=i.sti,n=(0,n3.default)(s,s,e);t.uniformMatrix4fv(this.nti,!1,n);const r=i.rti;t.uniformMatrix4fv(this.hti,!1,r),this.tti.g7t(),this.tti.U7t()}}J7t(t){return"none"===this.$7t||"right"!==t&&"left"===this.$7t||"right"===t&&"right"===this.$7t}get eti(){const t=(0,Kh.default)(),i=this.ao;return(0,o3.default)(t,t,i.I8t()),(0,h3.default)(t,t,this.oti.x,new Float32Array([1,0,0])),(0,h3.default)(t,t,this.oti.y,new Float32Array([0,1,0])),(0,h3.default)(t,t,this.oti.z,new Float32Array([0,0,1])),t}constructor(t,i,e,s){this.ao=new K2,this.oti=new K2,this.$7t="none",this.iti=e;const n=e.E7t();this.tti=i.z7t(t,n),s&&(this.$7t=s);const r=n.k7t(zc.ModelViewMat);if(null===r)throw new b("Failed to get model view matrix location.");this.nti=r;const h=n.k7t(zc.ProjectionMat);if(null===h)throw new b("Failed to get projection matrix location.");this.hti=h}};r();var b3=class{ati(){const t=(0,Kh.default)();return(0,r3.default)(t,this.uti,this.cti,this.lti,this.dti)}fti(){this._ti=this.ati()}get rti(){return new Float32Array(this._ti)}set rti(t){this._ti=t}gti(){const t=(0,Kh.default)(),i=(0,e3.default)((0,Kh.default)(),this.wti.I8t()),e=(0,i3.default)((0,Kh.default)(),this.Ati.I8t());return(0,n3.default)(t,i,e),(0,s3.default)(t,t),t}vti(){this.mti=this.gti()}get sti(){return new Float32Array(this.mti)}pti(){this.vti(),this.fti()}Wn(){this.wti=new K2,this.oti=new Oa,this.pti()}yti(t){const i=this.Ati.j8t();i.gm(t),this.oti=i.R8t()}Mti(t){this.oti=t.R8t()}get Tti(){return this.uti}set Tti(t){this.uti=t,this.fti()}get Nti(){return this.cti}set Nti(t){this.cti=t,this.fti()}get ao(){return(new K2).emt(this.wti)}set ao(t){this.wti=t,this.vti()}get oti(){return(new Oa).emt(this.Ati)}set oti(t){this.Ati=t,this.vti()}constructor(t){this.uti=72*x.PI/180,this.cti=1.77,this.lti=.1,this.dti=100,this.$7t="none",this.wti=new K2,this.Ati=new Oa,this._ti=this.ati(),this.mti=this.gti(),t&&(this.$7t=t)}},L3=1e-4,k3=class extends i{do(){this.Dti(),this.p7t?nd.xr?(nd.xr.addEventListener("devicechange",this.Iti),this.Sti().then((()=>{this.Eti?(this.bti(),this.Lti(),this.kti()):this.y9t("XR: Inline session not available. Panorama functionality will not work.",le.VR_PRESENTATION_ERROR)}))):this.y9t("Your browser does not support WebXR",le.VR_PLATFORM_UNSUPPORTED):this.y9t("Your browser does not support webGL",le.VR_PLATFORM_UNSUPPORTED)}kti(){this.Lo.la.ln(Pc.Ko,this.un),this.Lo.ln(xr.an,this.un),this.Lo.ln(t.no,this.ro),this.Lo.ln(t.FA,this.UU)}Dti(){this.Cti=h.createElement("canvas"),this.Cti.className="theoplayer-vr",this.Cti.style.zIndex="2",this.Cti.style.background="black",this.Cti.style.display="none",this.Lo.we.appendChild(this.Cti),ia(this.Cti);let t=this.Cti.getContext("webgl2");t||(t=this.Cti.getContext("webgl")),t&&(this.p7t=t,this.xti=new _3(this,this.Cti))}async Sti(){nd.xr?await Promise.all([nd.xr.isSessionSupported("inline").then((t=>{this.Eti=t})).catch((t=>{this.Eti=!1,this.y9t("exception when calling xr.isSessionSupported for inline session: "+t,le.VR_PRESENTATION_ERROR)})),nd.xr.isSessionSupported("immersive-vr").then((t=>{this.Oti=t})).catch((t=>{this.Oti=!1,this.y9t("exception when calling xr.isSessionSupported for immersive-vr session: "+t,le.VR_PRESENTATION_ERROR)}))]):(this.Eti=!1,this.Oti=!1)}bti(){const t=this.k9t();this.Mx=t,this.z9t=Boolean(t),this.z9t&&(this.jti=(null==t?void 0:t.stereoMode)||Xa.NONE,this.zti=(null==t?void 0:t.panoramaMode)||sl.NONE,this.Pti&&(this.Bti(this.zti,this.jti),this.N9t()))}Bti(t,i){if(!this.p7t||t===sl.NONE)return;const e=this.p7t;let s,n;this.Rti.v7t(),t===sl.PM360?(s=2*x.PI,n=-x.PI/2):(s=x.PI,n=-x.PI);const r=new M3(16,60,40,0,s),h=[],o=[];for(let t=0;t<r.j7t.length;t++){const e=r.j7t[t];switch(i){case Xa.NONE:h.push(e),o.push(e);break;case Xa.VERTICAL:h.push(new Mh(e.x,.5*e.y)),o.push(new Mh(e.x,.5*e.y+.5));break;case Xa.HORIZONTAL:h.push(new Mh(.5*e.x,e.y)),o.push(new Mh(.5*e.x+.5,e.y))}}r.x7t.forEach((t=>{t.x*=-1}));const a=new lo(r.x7t,r.O7t,h),u=new lo(r.x7t,r.O7t,o);this.Uti=new S3(e);const c=new E3(e,a,this.Uti,"left");c.oti.y=n,this.Rti.A7t(c);const l=new E3(e,u,this.Uti,"right");l.oti.y=n,this.Rti.A7t(l)}N9t(){this.Cti.style.display="block",this.Eti&&this.Lo.ln(t.bh,this.Qti)}L9t(){this.Fti(),this.Lo.rn(t.bh,this.Qti),this.Cti.style.display="none"}Yti(){this.Gti(),this.Vti()}async Wti(){if(this.Hti||!this.Eti)return;const t={optionalFeatures:["local"]};try{const i=await nd.xr.requestSession("inline",t);let e;e=_n.Qs?_n.ME?"viewer":"local":"viewer";const s=await i.requestReferenceSpace(e);i.addEventListener("end",this.Gti),this.qti=s,this.Hti=i,this.xti.ZI(),this.Xti(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,this.p7t),inlineVerticalFieldOfView:this.uti*so})}catch(t){this.Gti(),this.y9t(t,le.VR_PRESENTATION_ERROR)}}Gti(){this.Hti&&(this.Fti(),this.xti.KI(),this.Hti.removeEventListener("end",this.Vti),this.Hti.end(),this.Hti=null,this.Lti())}async Zti(){if(!this.Kti&&this.Oti){this.Fti();try{const t=await nd.xr.requestSession("immersive-vr"),i=await t.requestReferenceSpace("local");t.addEventListener("end",this.Vti),this.Jti=i,this.Kti=t,await this.$ti(),this.Xti()}catch(t){this.Vti(),this.y9t(t,le.VR_PRESENTATION_ERROR)}}}async $ti(){const t=this.p7t,i=this.Kti;this.Cti&&t&&i&&!this.tii&&(this.Cti.addEventListener("webglcontextlost",(t=>{t.preventDefault()})),this.Cti.addEventListener("webglcontextrestored",(()=>{this.Bti(this.zti,this.jti)})),this.tii=!0,await t.makeXRCompatible(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,t)}))}Lti(){if(!this.Kti&&this.p7t){const t=this.p7t,i=this.Cti.clientWidth,e=this.Cti.clientHeight,s=fe.Ys.S4;this.Cti.width=i*s,this.Cti.height=e*s,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}}Xti(){null===this.eii&&(this.sii(),this.nii?this.eii=this.nii.requestAnimationFrame(this.rii):(this.hii(),ji("XR: Attempted to start animation loop without inline or immersive session.")))}Fti(){null!==this.eii&&(this.hii(),this.nii?this.nii.cancelAnimationFrame(this.eii):ji("XR: Attempted to stop animation loop by cancelAnimationFrame even though there is no session running."),this.eii=null)}sii(){if(null!==this.oii)return;const t=this.Lo.xg();if(void 0===t||!(t instanceof HTMLVideoElement))return void ji("No video source.");if("function"!=typeof t.requestVideoFrameCallback)return;const i=()=>{this.Uti.K7t(this.Lo),this.oii=t.requestVideoFrameCallback(i)};this.aii=t,this.oii=t.requestVideoFrameCallback(i)}hii(){var t;null!==this.oii&&(null==(t=this.aii)||null==t.cancelVideoFrameCallback||t.cancelVideoFrameCallback(this.oii),this.aii=null,this.oii=null)}uii(){return!!this.cii||(_n.Va?this.lii&&this.dii:this.lii)}q9t(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().then((t=>{this.dii="granted"===t}))}fii(){return(!this.q_()||Boolean(this._ii))&&this.gii()}q_(){return this.Lo.q_}gii(){return this.Lo.cg>=2}get z9t(){return this.wii}set z9t(t){const i=this.n5;this.wii=t,this.n5!==i&&this.mo(new ll)}get Pti(){return this.zti!==sl.NONE}get zti(){return this.Aii}set zti(t){const i=this.n5;this.Aii=t,this.n5!==i&&this.mo(new ll)}get Oti(){return this.vii}set Oti(t){const i=this.n5;this.vii=t,this.n5!==i&&this.mo(new ll)}get _9t(){return this.Oti}get nii(){return this.Kti||this.Hti}get Kti(){return this.cii}set Kti(t){const i=this.n5;this.cii=t,this.n5!==i&&this.mo(new ll)}get mii(){return this.Jti||this.qti}get d9t(){const t=this.pii.j8t();return{yaw:t.z8t*cr,pitch:t.P8t*cr,roll:t.B8t*cr}}set d9t(t){const i=C3(t&&t.pitch||0)*so,e=C3(t&&t.roll||0)*so,s=C3(t&&t.yaw||0)*so,n=new J2(s,i,e);this.pii=n.R8t()}get u7t(){const t=this.yii.j8t();return{yaw:t.z8t,pitch:t.P8t,roll:t.B8t}}set u7t(t){const i=x3(t&&t.pitch||0),e=x3(t&&t.roll||0),s=x3(t&&t.yaw||0),n=new J2(s,i,e);this.yii=n.R8t()}get n5(){return this.z9t?this.Kti?xi.Na:xi.g9t:xi.Rs}get c9t(){return null!==this.Kti}set c9t(t){const i=this.c9t;t&&this.Oti?this.Zti():this.Vti(),this.c9t!==i&&this.mo(new H2)}get l9t(){return this.lii}set l9t(t){null===this.cii&&(this.lii=t,t&&_n.Va&&this.q9t())}get f9t(){return this.uti}set f9t(t){t&&t>=0&&t<=180&&(this.uti=t,null!==this.Hti&&this.Hti.updateRenderState({inlineVerticalFieldOfView:this.uti*so}))}y9t(t,i){Nu(t),this.mo(new me(new ce(i,t)))}k9t(){const t=this.Lo.Oa();return t&&t.vr}cn(){this.Yti(),this.Bo()}constructor(t){super(),this.Eti=!1,this.vii=!1,this.pii=new Oa,this.Mii=new Oa,this.yii=new Oa,this.uti=74,this.lii=!1,this.Mx=void 0,this.jti=Xa.NONE,this.wii=!1,this.Aii=sl.NONE,this.Rti=new g3,this.Hti=null,this.cii=null,this.qti=null,this.Jti=null,this.tii=!1,this.eii=null,this.aii=null,this.oii=null,this._ii=0,this.dii=!1,this.Iti=()=>{this.Sti()},this.ro=()=>{this.L9t(),this.Yti(),this.bti()},this.Qti=()=>{this.Wti()},this.Vti=()=>{this.Kti&&(JS("Ending immersive session"),this.Fti(),this.Kti.removeEventListener("end",this.Vti),this.Kti.end(),this.Kti=null,this.Jti=null,this.tii=!1,this.Hti?this.Xti():this.Wti())},this.un=()=>{this.Lti()},this.rii=(t,i)=>{if(!this.p7t)return;const e=this.p7t,s=this.nii;if(null===this.oii&&this.fii()&&(this.Uti.K7t(this.Lo),this._ii>0&&(this._ii-=1)),null===s||void 0===i)return void ji("Attempted to run webXR animation loop without session or xrFrame.");this.eii=s.requestAnimationFrame(this.rii);const n=s.renderState.baseLayer,r=i.getViewerPose(this.mii);if(void 0===n||void 0===r)return void ji("Attempted to run webXR animation loop without glLayer or viewerPose.");e.bindFramebuffer(e.FRAMEBUFFER,n.framebuffer);let h=new J2,o=0;for(const t of r.views){const i=new b3(t.eye);if(i.rti=t.projectionMatrix,this.uii()){let e;if(_n.Qs&&_n.ME&&null===this.cii){if(e=t.transform.inverse.orientation,0===e.x&&0===e.y&&0===e.z&&1===e.w)return}else e=t.transform.orientation;i.oti=new Oa(e.x,e.y,e.z,e.w)}this.Hti&&i.yti(this.yii.j8t()),h=h.gm(i.oti.j8t()),o+=1;const s=n.getViewport(t);s&&e.viewport(s.x,s.y,s.width,s.height),this.Rti.g7t(e,i)}const a=new J2(h.z8t/o,h.P8t/o,h.B8t);this.pii=a.R8t(),function(t,i){const e=t.k8t(i);return 1-e*e<L3}(this.pii,this.Mii)||(this.Mii.emt(this.pii),this.mo(new X2))},this.UU=()=>{this._ii=5},this.Lo=t,this.oa=u3(this),this.do()}};function C3(t){return F_(t+180,360)-180}function x3(t){return F_(t+x.PI,2*x.PI)-x.PI}function O3(t,i){let e=i;for(let i in t)kt(t[i])?(e[i]=e[i]||{},O3(t[i],e[i])):Xc.call(e,i)||(e[i]=t[i]);return e}r(),tr((function(t){return class extends t{ha(){return null!==this.c7t?Ou(super.ha(),{vr:this.c7t.oa}):super.ha()}cn(){var t;null==(t=this.c7t)||t.cn(),super.cn()}constructor(t,i){super(t,i),this.c7t=null,i.vr.useWebXR&&(this.c7t=new k3(this))}}}),iu.Wa),r(),r(),r();var j3=class{getEpochTimeMs(){return Yo()}release(){}};r();var z3=class{createTimer(t,i,e){let s=v(t,i);return()=>m(s)}release(){}};r();var P3=class{makeRequest(t,i,e,s,n,r){const h=function(t){switch(t.toLowerCase()){case"get":return Kc.GET;case"post":return Kc.POST;case"put":return Kc.PUT;case"delete":return Kc.DELETE;case"head":return Kc.HEAD;case"options":return Kc.OPTIONS;default:throw new b("Request method unknown.")}}(t);if(this.Tii){if(h===Kc.GET)(new Image).src=i+"?"+e;else{const t=e||new ArrayBuffer(0),n=s||void 0;this.LS.MY({Fu:i,AS:t,gP:n})}return()=>{}}const o=new Po,a=s?{"Content-Type":s}:void 0,u=new nc({Fu:i,AS:e,NS:!1,pS:Rt.Eu,YI:n,mS:h,i_:o.i_,vS:a});return this.Nii(u,r),()=>o.s_()}async Nii(t,i){if(i)try{const e=await this.LS.BI(t);if(e.FI>=200&&e.FI<300){i(!0,await e.kS())}else i(!1,"HTTP"+e.FI)}catch(t){i(!1,String(t))}}release(){s.removeEventListener("beforeunload",this.Dii)}constructor(t){this.Tii=!1,this.Dii=()=>{this.Tii=!0},this.LS=t,s.addEventListener("beforeunload",this.Dii)}};r();var B3=class{saveData(t,i,e,s){try{return localStorage.setItem(t+"/"+i,e),s(!0,null)}catch(t){return s(!1,t.toString())}}loadData(t,i,e){try{return e(!0,localStorage.getItem(t+"/"+i))}catch(t){return e(!1,t.toString())}}release(){}};r();var R3=()=>null,U3=class{getDeviceBrand(){return this.Iii?this.Iii.brand:null}getDeviceCategory(){return _n.Ab||_n.mb?this.Sii.Client.DeviceCategory.ANDROID_DEVICE:_n.Tb||_n.Db?this.Sii.Client.DeviceCategory.APPLE_DEVICE:_n.Sb?this.Sii.Client.DeviceCategory.CHROMECAST:this.Sii.Client.DeviceCategory.WEB}getDeviceManufacturer(){return this.Iii?this.Iii.manufacturer:null}getDeviceModel(){return this.Iii?this.Iii.model:null}getDeviceVersion(){return this.Iii?this.Iii.version:null}getDeviceType(){return null}getFrameworkName(){return _n.Ab?"THEOplayer AndroidTV SDK":_n.mb?"THEOplayer Android SDK":_n.Tb?"THEOplayer IOS SDK":_n.Db?"THEOplayer tvOS SDK":_n.Sb?"THEOplayer Chromecast SDK":"THEOplayer Web SDK"}release(){}constructor(t,i){this.Sii=t,this.Iii=i,this.getBrowserName=R3,this.getBrowserVersion=R3,this.getFrameworkVersion=R3,this.getOperatingSystemName=R3,this.getOperatingSystemVersion=R3}};r();var Q3=class{consoleLog(t,i){switch(i){case Conviva.SystemSettings.LogLevel.ERROR:return Nu(t);case Conviva.SystemSettings.LogLevel.WARNING:return ji(t);default:return JS(t)}}release(){}};r();var Uc=self.theoplayerDeviceMetadata;r();var F3,Y3=class{getPHT(){return-1}getBufferLength(){const t=Ki.mn(this.Lo.T_()),i=this.Lo.b_(),e=t.zB(i);if(e<0)return 0;return Is(t.bn(e)-i)}getSignalStrength(){return 1e3}getRenderedFrameRate(){return-1}constructor(t){this.Lo=t}},G3="conviva";function V3(t){return t&&t.integration===G3}function W3(t){if(t)for(let i of t)if(V3(i))return i}function H3(t,i){if(!i)return t;if(!t)return i;return O3(i,Zr(t))}var q3=["emptied","play","pause","playing","waiting","ended","error","readystatechange"],X3=class{get oa(){return this.Ua||(this.Ua=function(t){return{get client(){return t.Eii},get contentSessionKey(){return t.bii},createSession:()=>t.xC(),cleanupSession:()=>t.Lii()}}(this)),this.Ua}get Eii(){return this.kii}get bii(){return this.Cii}xii(){return this.t.q_?this.Oii.PlayerStateManager.PlayerState.PAUSED:this.jii||this.t.cg<ow.Qv?this.Oii.PlayerStateManager.PlayerState.BUFFERING:this.Oii.PlayerStateManager.PlayerState.PLAYING}f$(t){let i=this.zii;i&&i.getDuration()!==t&&i.setDuration(t)}Pii(t){let i=this.zii;i&&i.getPlayerState()!==t&&i.setPlayerState(t)}Bii(){this.jii="none"===this.t.hg||this.t.cg<ow.Uv,this.hVt(),this.t.gg&&this.RU(),this.Rii&&this.Uii()}aWt(){this.Qii&&!this.Qii.manualSessionControl&&(this.xC(),this.t.tQ.W_||this.Fii())}pWt(){this.zii&&this.Pii(this.Oii.PlayerStateManager.PlayerState.STOPPED),this.Qii&&!this.Qii.manualSessionControl&&this.Lii()}xC(){if(this.Yii&&void 0===this.Cii){let t=this.kii.getPlayerStateManager();this.zii=t,t.setPlayerVersion&&t.setPlayerVersion("6.9.0"),this.Cii=this.kii.createSession(this.Yii),this.Bii(),this.kii.attachPlayer(this.Cii,this.zii);const i=new Y3(this.t);t.setClientMeasureInterface(i)}}Lii(){this.KU=!1,this.jii=!1,this.zii&&(this.kii.releasePlayerStateManager(this.zii),this.zii=void 0),void 0!==this.Cii&&(this.kii.cleanupSession(this.Cii),this.Cii=void 0)}Gii(){this.t.ln("durationchange",this.Vii),this.t.ln("seeking",this.RU),this.t.ln("seeked",this.UU),this.t.ln("ended",this.Wii),this.t.ln("error",this.Q1),this.t.ln("segmentnotfound",this.Hii),this.t.ln(["loadstart","waiting"],this.qii),this.t.ln(["emptied","playing"],this.Xii),this.t.ln(q3,this.hVt),this.t.Nc&&(this.t.Nc.ln("s7",this.Zii),this.t.Nc.ln("e7",this.Kii)),s.addEventListener("beforeunload",this.Wii),this.Jii()}$ii(){this.t.rn("durationchange",this.Vii),this.t.rn("seeking",this.RU),this.t.rn("seeked",this.UU),this.t.rn("ended",this.Wii),this.t.rn("error",this.Q1),this.t.rn("segmentnotfound",this.Hii),this.t.rn(["loadstart","waiting"],this.qii),this.t.rn(["emptied","playing"],this.Xii),this.t.rn(q3,this.hVt),this.t.Nc&&(this.t.Nc.rn("s7",this.Zii),this.t.Nc.rn("e7",this.Kii)),this.t.rt.rn(gt.qg,this.Jii),this.Rii&&(this.Rii.rn(Os.pw,this.Uii),this.Rii=void 0),s.removeEventListener("beforeunload",this.Wii)}cn(){this.$ii(),this.pWt(),this.Lii()}constructor(i,e,s,n){this.t=i,this.Oii=e,this.kii=s,this.tei=n,this.KU=!1,this.jii=!1,this.Yii=void 0,this.Qii=void 0,this.zii=void 0,this.Cii=void 0,this.Rii=void 0,this.Zii=t=>{void 0!==this.bii&&(this.kii.adStart(this.bii,function(t){const i=t.Ul.V9().integration;return"theo"===i||"google-ima"===i||"freewheel"===i?Conviva.Client.AdStream.SEPARATE:Conviva.Client.AdStream.CONTENT}(t),this.Oii.Client.AdPlayer.CONTENT,function(t,i){const e=t.Ul.V9().timeOffset;return 0===e?Conviva.Client.AdPosition.PREROLL:-1===e||Ua(e,i,.001)?Conviva.Client.AdPosition.POSTROLL:Conviva.Client.AdPosition.MIDROLL}(t,this.t.kd())),this.kii.detachPlayer(this.bii))},this.Kii=()=>{void 0!==this.bii&&void 0!==this.zii&&(this.kii.attachPlayer(this.bii,this.zii),this.kii.adEnd(this.bii))},this.qii=()=>{this.jii=!0},this.Xii=()=>{this.jii=!1},this.Vii=()=>{let t=this.t.kd();j(t)||t===1/0||this.f$(t)},this.Wii=()=>{this.pWt()},this.Q1=()=>{let t=this.t.O_();t&&this.zii&&this.zii.sendError(t.code+": "+t.message,this.Oii.Client.ErrorSeverity.FATAL),this.pWt()},this.iei=()=>{!this.t.tQ.W_&&this.zii&&this.Fii()},this.Fii=()=>{var t;null==(t=this.zii)||t.sendError("A Video Playback Failure has occurred: Waiting for the manifest to come back online",this.Oii.Client.ErrorSeverity.FATAL)},this.Hii=()=>{var t;null==(t=this.zii)||t.sendError("A Video Playback Failure has occurred: Segment not found",this.Oii.Client.ErrorSeverity.FATAL)},this.UU=()=>{var t;this.KU&&(this.KU=!1,(null==(t=this.zii)?void 0:t.setPlayerSeekEnd)&&this.zii.setPlayerSeekEnd())},this.RU=()=>{var t;this.KU||(this.KU=!0,(null==(t=this.zii)?void 0:t.setPlayerSeekStart)&&this.zii.setPlayerSeekStart(-1))},this.ro=()=>{this.pWt(),this.Qii=void 0,this.Yii=void 0,this.eei()},this.eei=()=>{if(this.Yii)return;let t=this.t.Oa();if(!t)return;let i=this.t.bt;if(!i)return;let e=function(t){return W3(t.analytics)}(t),s=H3(e,this.tei);if(!s)return;let n=s.contentMetadata;if(n&&this.Oii){let t=i.src;this.kii||(this.kii=function(t,i,e){if(!F3){let s=new i.SystemSettings,n=new i.SystemInterface(new j3,new z3,new P3(e),new B3,new U3(i,Uc),new Q3),r=new i.SystemFactory(n,s),h=new i.ClientSettings(t.customerKey),o=Ee(t.heartbeatInterval);o>0?h.heartbeatInterval=o:void 0===h.heartbeatInterval&&(h.heartbeatInterval=10);let a=P(t.gatewayUrl);a&&(h.gatewayUrl=a),F3=new i.Client(h,r)}return F3}(s,this.Oii,this.t.MO)),this.Qii=s,this.Yii=function(t,i,e){let s=new e.ContentMetadata;return s.assetName=t.assetName,s.streamUrl=i,s.streamType=function(t,i){return t?i.ContentMetadata.StreamType.LIVE:!1===t?i.ContentMetadata.StreamType.VOD:i.ContentMetadata.StreamType.UNKNOWN}(t.live,e),s.defaultBitrateKbps=t.defaultBitrateKbps,s.defaultResource=t.defaultResource,s.duration=t.duration,s.encodedFrameRate=t.encodedFrameRate,s.applicationName=t.applicationName||"THEOplayer",s.viewerId=t.viewerId||Rs(),s.custom=t.custom,s}(n,t,this.Oii),this.t.q_||this.Qti()}},this.Qti=()=>{this.aWt()},this.Uii=()=>{if(!this.Rii||!this.zii)return;let t=this.Rii.Pw;if(t){let i=this.zii;i.setBitrateKbps(t.zz/1e3),i.setEncodedFrameRate&&t.yst&&i.setEncodedFrameRate(t.yst),i.setVideoResolutionWidth&&t.ji&&i.setVideoResolutionWidth(t.ji),i.setVideoResolutionHeight&&t.Ti&&i.setVideoResolutionHeight(t.Ti)}},this.Jii=()=>{let t=this.t.rt;t&&t.rn(gt.qg,this.Jii),t.U?(this.Rii=t.Iw(0),this.Rii.rn(Os.pw,this.Uii),this.Rii.ln(Os.pw,this.Uii)):t.ln(gt.qg,this.Jii)},this.hVt=()=>{this.Pii(this.xii())},this.t.ln("sourcechange",this.ro),this.t.ln("currentsourcechange",this.eei),this.t.ln("play",this.Qti),this.Gii(),this.t.tQ.ln(t.zA,this.iei),this.t.tQ.ln(t.PA,this.iei)}};tr((function(t){return class extends t{cn(){this.c9&&this.c9.cn(),super.cn()}constructor(t,i){super(t,i);const e=s.Conviva;if(e){const t=function(t){return W3(kw(t).analytics)}(i);this.c9=new X3(this,e,F3,t),this.S9.u9=this.c9}}}}),iu.P9),r(),r();var Z3=class extends ha{get oa(){return this.Ua||(this.Ua=function(t){let i,e={get status(){return t.FI},get tasks(){return t.M1t},get network(){return t.tQ.oa},createTask:(i,e)=>t.sei(i,e),addEventListener(t,e){i.ln(t,e)},removeEventListener(t,e){i.rn(t,e)}};return i=new ma(t,e),e}(this)),this.Ua}get FI(){return this.nei.FI}get M1t(){return this.nei.M1t.oa}get tQ(){return this.m9}sei(t,i,e){let s,n;if(void 0===e&&(e="persistent"),!t)throw new b("Unexpected - The source description is undefined");if(s=rl(t),n=Y1(i),Uu(s))throw new b("Invalid source description");return this.nei.A1t(s,n).oa}constructor(t,i){super(),this.nei=t,this.m9=i,this.nei.ln("p_t",this.Ds)}};var K3=function(){const t=new Cb(fe.MO,!1),i=ti.kb,e=new K1(t),s=new U1(i,e),n=new Ob(t),r=new t1(i._et,s,"persistent");return new Z3(r,n)}().oa;function J3(t,i){if("function"==typeof t.getAll){return $3(void 0===i?t.getAll():t.getAll(i))}return function(t){let i=new No,e=[];return t.onsuccess=()=>{let s=t.result;s&&s.value?(e.push(s.value),s.continue()):i.eL(e),xs()},t.onerror=()=>{i.sL(t.error),xs()},i.nL}(void 0===i?t.openCursor():t.openCursor(i))}function $3(t){return new Promise(((i,e)=>{t.onsuccess=()=>{i(t.result),xs()},t.onerror=()=>{e(t.error),xs()}}))}r(),r(),r(),r(),r(),r(),r();var t5=class{s_(){if(this.Yh)try{this.cet.abort(),this.Yh=!1}catch(t){}}constructor(t){this.cet=t,this.Yh=!0,this.nL=new Promise(((t,i)=>{this.cet.oncomplete=()=>{this.Yh=!1,t(),xs()},this.cet.onerror=()=>{this.Yh&&(this.Yh=!1,i(this.cet.error||new b("Transaction error")),xs())},this.cet.onabort=()=>{this.Yh=!1,i(new b("Transaction aborted")),xs()}}))}};async function Sc(t,i,e){const s=new t5(t);try{const[t]=await Promise.all([i(e),s.nL]);return t}catch(t){if(!s.Yh)throw new n1("IDBTransaction committed prematurely",t);throw t}finally{s.s_()}}var i5=class{get l(){return this.tit.l}tet(t){return Promise.resolve("persistent"===t)}iet(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(ft(i));return $3(this.rei(ye.Met).put(t))}async eet(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(ft(i));for(const e of t)await this.iet(e,i)}async Kb(t){return Boolean(await this.Jb(t))}Jb(t){return $3(this.rei(ye.yet).get(t))}net(t,i){return $3(this.rei(ye.yet).index(i).get(t))}async Hit(t){const i=[];for(let e of t){const t=await this.Jb(e);t&&i.push(t)}return i}ret(){return J3(this.rei(ye.yet))}het(t){return J3(this.rei(ye.yet),t)}oet(t,i){return J3(this.rei(ye.yet).index(i),t)}wm(t){return $3(this.rei(ye.Met).delete(t))}async aet(t){for(const i of t)await this.wm(i)}uet(){return $3(this.rei(ye.Met).clear())}rei(t){if(!this.hei)throw new b("Lock was released");if(!function(t,i){return t===ye.yet&&i===ye.yet||i===ye.Met}(t,this.hei.mode))throw new b("Incompatible transaction mode: "+this.hei.mode+", expected "+t);return this.hei.objectStore(this.l)}oei(){this.tit.aei(this),this.hei=void 0}constructor(t,i){this.tit=t,this.hei=i}};var e5=class{tet(t){return Promise.resolve("persistent"===t)}iet(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(ft(i)):this.cet(ye.Met,(i=>i.iet(t)))}eet(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(ft(i)):this.cet(ye.Met,(i=>i.eet(t)))}Kb(t){return this.cet(ye.yet,(i=>i.Kb(t)))}Jb(t){return this.cet(ye.yet,(i=>i.Jb(t)))}net(t,i){return this.cet(ye.yet,(e=>e.net(t,i)))}Hit(t){return this.cet(ye.yet,(i=>i.Hit(t)))}ret(){return this.cet(ye.yet,(t=>t.ret()))}het(t){return this.cet(ye.yet,(i=>i.het(t)))}oet(t,i){return this.cet(ye.yet,(e=>e.oet(t,i)))}wm(t){return this.cet(ye.Met,(i=>i.wm(t)))}aet(t){return this.cet(ye.Met,(i=>i.aet(t)))}uet(){return this.cet(ye.Met,(t=>t.uet()))}fNt(t){return this.uei(),this.tNt=new i5(this,t),this.tNt}uei(){if(void 0!==this.tNt)throw new b("Already locked")}aei(t){if(this.tNt!==t)throw new b("Incorrect lock");this.tNt=void 0}Lx(t){return this.OH.Lx(t)}cet(t,i){return this.Lx((()=>this.cei(t,i)))}async cei(t,i){this.uei();const e=this.lei.transaction(this.l,t),s=this.fNt(e);try{return await Sc(e,i,s)}finally{s.oei()}}dei(t){this.uei();const i=this.lei.transaction(this.l,t);return this.fNt(i)}static fei(t,i){let e;const s=new Promise((t=>{e=t})),n=t.reduce(((t,i)=>t.then((()=>{let t;const e=new Promise((i=>{t=i}));return i.Lx((()=>(t(),s))).catch(xs),e}))),Promise.resolve());return e(n.then(i)),s}constructor(t,i){this.tNt=void 0,this.OH=new ro,this.lei=t,this.l=i}};r(),r(),r(),r(),r();var s5={DT:17,_ei:async t=>{const{transaction:i,database:e}=t,s=i.objectStoreNames;if(s&&s.length)for(let t=0;t<s.length;t++)e.deleteObjectStore(s[t]);e.createObjectStore(a5,{keyPath:"id"}),e.createObjectStore(u5,{keyPath:"key"}),e.createObjectStore(c5,{keyPath:"key"});e.createObjectStore(l5,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");e.createObjectStore(d5,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},n5=class{async gei(t){for(const i of this.wei)this.Aei<i.DT&&await i._ei(t)}constructor(t){this.Aei=t}},r5=class extends n5{get wei(){return[s5]}},h5=new class{vei(t){this.mei=t}g8(t){return this.mei(t)}constructor(){this.mei=t=>new r5(t)}},o5=18,a5="cachingTask",u5="licences",c5="manifest",l5="segment",d5="segmentMetadata";async function f5(){!function(){if("undefined"==typeof indexedDB)throw new b("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",o5);return t.addEventListener("upgradeneeded",_5),await $3(t)}async function _5(t){const i=t.oldVersion<=o5?t.oldVersion:-1,e=t.target,s=e.result,n=e.transaction,r=h5.g8(i),h={database:s,transaction:n};await Sc(n,(t=>r.gei(t)),h)}var g5=class{static get kb(){return this.Bet||(this.Bet=f5()),this.Bet}};g5.Bet=void 0,r();var w5=class{cet(t){return t(this)}oei(){this.let.oei(),this.det.oei(),this.fet.oei(),this._et.oei(),this.wet.oei()}constructor(t,i){this.let=t.let.fNt(i),this.det=t.det.fNt(i),this.fet=t.fet.fNt(i),this._et=t._et.fNt(i),this.wet=t.wet.fNt(i)}};ti.va(class t{static async g8(){const i=await g5.kb;return new t(i)}cet(t){const i=this.allCollections;return e5.fei(i,(()=>this.cei(i,t)))}async cei(t,i){const e=t.map((t=>t.l)),s=this.lei.transaction(e,ye.Met),n=new w5(this,s);try{return await Sc(s,i,n)}finally{n.oei()}}get allCollections(){return[this.det,this.let,this.fet,this._et,this.wet]}constructor(t){this.lei=t,this.let=new e5(t,d5),this.det=new e5(t,l5),this.fet=new e5(t,c5),this._et=new e5(t,a5),this.wet=new e5(t,u5)}}.g8),r(),r(),r();var A5=class{pei(t){const i=this.jV.y_(),e=t.createGain();for(const s of i){t.createMediaElementSource(s).connect(e)}return e}get oa(){return this.Ua||(this.Ua=this.ha()),this.Ua}ha(){const t=this;return{createAudioSourceNode:i=>t.pei(i)}}constructor(t){this.Ua=void 0,this.jV=t}};tr((function(t){return class extends t{ha(){const t=this.yei.oa;return Ou(super.ha(),{get audio(){return t}})}constructor(t,i){super(t,i),this.yei=new A5(this.f9)}}}),iu.Wa),r(),r();tr((function(t){return class i extends t{ca(t){const e=i.Mei(this.vd.analytics),s=i.Mei(t?t.analytics:void 0);e||s?this.Tei(oe({},e,s)):this.Nei&&this.Nei.disable(),super.ca(t)}Tei(t){if(this.Nei)this.Nei.enable(),this.Nei.setOptions(t);else{const i=s.youbora;if(!i)throw new b("Youbora JavaScript library not loaded.");if(!i.adapters.TheoPlayer2)throw new b("TheoPlayer2 adapter not available on Youbora JavasScript library");const e=new i.Plugin(t);e.setAdapter(new i.adapters.TheoPlayer2(this.oa)),this.Nc&&i.adapters.TheoPlayer2.NativeAdsAdapter&&e.setAdsAdapter(new i.adapters.TheoPlayer2.NativeAdsAdapter(this.oa)),this.Nei=e}}static Mei(t){if(t){const i=t.filter((t=>"youbora"===t.integration));if(0===i.length)return;if(i.length>1)throw new b("Only one youbora analytics configuration expected");const e=i[0],{integration:s}=e;return LN(e,["integration"])}}cn(){this.Nei&&this.Nei.disable(),super.cn()}constructor(t,i){super(t,i)}}}),iu.P9),r(),r(),r();var v5=1,m5=0,p5=1e3,y5=class i extends fg{Dei(){const t=this.ct===1/0,i=t?v5:m5,e=t?-1:this.ct,s=Nh(this.Lo.rt.Nw,this.Iei);this.Sei.setPresentationInformation(new this.Eei(i,e,s))}Iei(t){const i=[];for(const e of t.Uw.oa){const t=e;t.width&&t.height&&i.push({trackIdx:e.id,bitrate:t.bandwidth,width:t.width,height:t.height,codecIdentifier:t.codecs})}return i}bei(){return this.Lo.b_()*p5}get ct(){return this.Lo.kd()*p5}get Lei(){return this.kei}get Cei(){return this.xei}set Cei(t){this.xei=t,t&&this.Sei.reportPlayerState(t)}set Oei(t){this.jei=t}zei(){return v((()=>{this.Pei(),this.Bei()}),i.Rei)}Uei(){this.Lo.Nc&&(this.Lo.Nc.ln("n7",this.Qei),this.Lo.Nc.ln("r7",this.Fei),this.Lo.Nc.ln("JWt",this.Yei),this.Lo.Nc.ln("vJt",this.Gei)),this.Lo.ln(t.NA,this.Wii),this.Lo.ln(Bi.Zo,this.Q1),this.Lo.ln(t.yh,this.Vei),this.Lo.ln(t.bh,this.Qti),this.Lo.ln(qo._v,this.BU),this.Lo.ln(t.QA,this.XY),this.Lo.ln(t.FA,this.UU),this.Lo.ln(qo.fv,this.zU),this.Lo.ln(t.VA,this.Wei)}Hei(){this.Lo.Nc&&(this.Lo.Nc.rn("n7",this.Qei),this.Lo.Nc.rn("r7",this.Fei),this.Lo.Nc.rn("JWt",this.Yei),this.Lo.Nc.rn("vJt",this.Gei)),this.Lo.rn(t.NA,this.Wii),this.Lo.rn(Bi.Zo,this.Q1),this.Lo.rn(t.yh,this.Vei),this.Lo.rn(t.bh,this.Qti),this.Lo.rn(qo._v,this.BU),this.Lo.rn(t.QA,this.XY),this.Lo.rn(t.FA,this.UU),this.Lo.rn(qo.fv,this.zU),this.Lo.rn(t.VA,this.Wei)}cn(){m(this.qei),this.Hei()}constructor(t,i,e,s=MMPlayerState,n=MMAdState,r=MMPresentationInfo){super(),this.Lo=t,this.Mx=i,this.Sei=e,this.Xei=s,this.Zei=n,this.Eei=r,this.Kei=!0,this.kei=!1,this.jei=void 0,this.xei=void 0,this.Jei=void 0,this.Qei=t=>{const i=t.t7;i.oGt();var e;e=i.V9().duration;const s="linear"===i.V9().type;i.aGt(),i.nGt();s&&(this.kei=!0),this.Oei=this.Zei.AD_IMPRESSION,this.Oei=this.Zei.AD_STARTED},this.Fei=t=>{this.kei=!1,this.Oei=this.Zei.AD_COMPLETED},this.Yei=t=>{t.rQt===Qe.ADBLOCK?this.Oei=this.Zei.AD_BLOCKED:this.Oei=this.Zei.AD_ERROR},this.Gei=()=>{this.Oei=this.Zei.AD_SKIPPED},this.Wei=t=>{var i,e,s,n;t.TS===Tw.Yv&&(this.Jei&&t.IQ!==this.Jei&&this.Sei.reportABRSwitch(this.Jei,t.IQ),this.Jei=t.IQ,this.Sei.reportChunkRequest(new MMChunkInformation(t.tN,t.IQ,t.MD,t.Ogt.Fu,void 0,void 0,null!=(s=null==(i=t.Ogt.Jet)?void 0:i[0])?s:0,null!=(n=null==(e=t.Ogt.Jet)?void 0:e[1])?n:-1)))},this.Wii=t=>{this.Cei=this.Xei.STOPPED,this.mo(t)},this.Q1=t=>{this.Cei=this.Xei.ERROR,this.Sei.reportError(t.error,this.bei())},this.Vei=()=>{this.Lei?this.Oei=this.Zei.AD_PAUSED:this.Cei=this.Xei.PAUSED},this.Qti=()=>{this.Lei&&(this.Oei=this.Zei.AD_PLAY)},this.BU=()=>{this.Lei?(this.jei===this.Zei.AD_PAUSED&&(this.Oei=this.Zei.AD_RESUMED),this.Oei=this.Zei.AD_PLAYING):(this.Kei&&(this.Kei=!1,this.Dei(),this.Cei=this.Xei.STARTED),this.Cei!==this.Xei.PAUSED&&this.Cei!==this.Xei.BUFFERING||(this.Cei=this.Xei.RESUMED))},this.XY=()=>{this.Sei.reportPresentationSize(this.Lo.Mg,this.Lo.vg)},this.UU=t=>{this.Lei||this.Cei!==this.Xei.PAUSED||this.Sei.reportPlayerSeekCompleted(t.currentTime*p5)},this.zU=()=>{this.Lei||(this.Cei=this.Xei.BUFFERING)},this.Bei=()=>{this.Sei.reportDownloadRate(x.floor(ca.kb.Iz()))},this.Pei=()=>{this.Lei||this.Sei.reportPlaybackPosition(this.bei())},this.Cei=this.Xei.INITIALIZED,this.Uei(),this.qei=this.zei()}};y5.Rei=2e3,tr((function(i){return class extends i{cn(){super.cn(),this.$ei()}constructor(i,e){super(i,e),this.tsi=void 0,this.isi=void 0,this.esi=()=>{this.isi=void 0,this.$ei();const t=super.Oa();t&&(this.isi=function(t,i){const e=function(t,i){if(t&&t.analytics)for(const i of t.analytics)if("smartsight"===i.integration)return i;if(i&&i.analytics)for(const t of i.analytics)if("smartsight"===t.integration)return t;return}(t,i);if(!e)return;return e}(t,this.vd)),this.ssi()},this.ssi=()=>{if(!this.tsi&&this.isi&&this.bt&&this.bt.src&&!this.q_){const t=MMSmartStreaming.getInstance();!function(t,i,e){t.registerMMSmartStreaming(e.playerName,e.customerID,e.subscriberID,e.domainName),t.reportComponent("THEOSDK"),t.reportPlayerInfo("THEOplayer","THEOplayer","6.9.0"),t.reportDeviceInfo(void 0,void 0,void 0,void 0,void 0,s.innerWidth,s.innerHeight),t.initializeSession("QBRModeDisabled",i,e.metaURL,e.assetID)}(t,this.bt.src,this.isi),this.tsi=new y5(this,this.isi,t),this.tsi.ln("ended",this.$ei)}},this.$ei=()=>{this.tsi&&(this.tsi.cn(),this.tsi=void 0)},this.ln(t.no,this.esi),this.ln(t.mA,this.ssi),this.ln(t.bh,this.ssi)}}}),iu.P9),r(),r();var M5=String.fromCharCode(95);var T5=class t{get oa(){return this.Ua||(this.Ua=function(t){return{get adsManager(){return t.adsManager},get ids(){return t.ids},get adContainer(){return t.adContainer},get imaSDK(){return t.imaSDK},get sendEvent(){return t.sendEvent},set sendEvent(i){t.sendEvent=i}}}(this)),this.Ua}get id(){return this.ym}get adsManager(){return this.H2t}get ids(){return this.nsi}get adContainer(){return this.AVt}get sendEvent(){return this.rsi}set sendEvent(t){for(let t of this.hsi)this.H2t.removeEventListener(t.type,t.listener);this.hsi=[],this.rsi=t,this.osi()}get imaSDK(){return!0}asi(){for(let t in google.ima.AdEvent.Type)this.H2t.addEventListener(google.ima.AdEvent.Type[t],this.usi),this.hsi.push({type:google.ima.AdEvent.Type[t],listener:this.usi})}lsi(){Ri(this.hsi);for(let t in google.ima.AdEvent.Type)this.H2t.removeEventListener(google.ima.AdEvent.Type[t],this.usi)}dsi(t){this.wR.push({type:t.type,adVolume:this.adsManager.getVolume()})}osi(){this.rsi(this.wR),this.wR=[]}static fsi(i){return t._si[i]||i}constructor(i,e,s,n){this.usi=i=>{this.dsi({type:t.fsi(i.type)})},this.ym=i,this.H2t=e,this.nsi=s,this.AVt=n,this.hsi=[],this.wR=[]}};T5._si={loaded:"AdLoaded",impression:"AdImpression",start:"AdVideoStart",firstquartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdquartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",skip:"AdSkipped",volumeChange:"AdVolumeChange"};var N5=class{gsi(t,i){this.wsi=h.createElement("script"),this.wsi.id=t.id,this.wsi.type="text/javascript",t.adContainer.appendChild(this.wsi),this.wsi.src="https://z.moatads.com/"+i+"/moatvideo.js#"+t.id,this.Asi=t.id,s[this.Asi]=t.oa}vsi(){this.wsi&&ei(this.wsi),this.Asi&&(s[this.Asi]=void 0)}constructor(){this.wsi=void 0,this.Asi=void 0}};tr((function(t){return class i extends t{ca(t){var e,s,n;this.msi(),null==(e=this.psi)||e.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.ysi),null==(s=this.psi)||s.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.msi),null==(n=this.psi)||n.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Msi),this.psi=void 0,this.AVt=void 0,super.ca(t);const r=t&&t.analytics;this.Tsi=i.Nsi(r);this.Nc&&this.Tsi&&D0()&&this.Dsi()}cn(){var t,i,e;this.msi(),null==(t=this.psi)||t.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.ysi),null==(i=this.psi)||i.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.msi),null==(e=this.psi)||e.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Msi),this.psi=void 0,this.AVt=void 0,this.Nc&&this.Nc.rn("d$t",this.f$t),super.cn()}Dsi(){this.Nc&&this.Nc.ln("d$t",this.f$t)}Isi(t,i,e){const s=M5+"moatApi"+x.floor(1e8*x.random());this.Ssi=new T5(s,t,i,e),this.Ssi.asi(),this.Esi.gsi(this.Ssi,this.Tsi.partnerCode)}static Nsi(t){if(t){const i=t.filter((t=>"moat"===t.integration));if(0===i.length)return;if(i.length>1)throw new b("Only one Moat analytics configuration expected");return i[0]}}constructor(t,i){super(t,i),this.Tsi=void 0,this.Ssi=void 0,this.psi=void 0,this.AVt=void 0,this.Msi=()=>{this.Isi(this.psi,{partnerCode:this.Tsi.partnerCode,viewMode:google.ima.ViewMode.NORMAL},this.AVt)},this.f$t=t=>{this.psi=t.W2t,this.AVt=t.Z$t,this.msi(),this.psi.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.ysi),this.psi.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.msi),this.psi.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Msi)},this.ysi=t=>{const i=t.getAd().getAdPodInfo();i.getAdPosition()<i.getTotalAds()&&(this.msi(),this.Msi())},this.msi=()=>{this.Ssi&&(this.Ssi.lsi(),this.Ssi=void 0),this.Esi.vsi()},this.Esi=new N5}}}),iu.P9),r(),r(),r();var ct,Ka=class extends gg{constructor(t,i,e){super(t,new Date),this.bsi=i,this.t7=e}};!function(t){t.LOADED="DAILoaded",t.AD_BREAK_STARTED="DAIAdBreakStarted",t.AD_BREAK_ENDED="DAIAdBreakEnded",t.AD_PERIOD_STARTED="DAIAdPeriodStarted",t.AD_PERIOD_ENDED="DAIAdPeriodEnded",t.AD_PROGRESS="DAIAdProgress",t.CUEPOINTS_CHANGED="DAICuePointsChanged",t.CLICK="DAIClick",t.ERROR="DAIError",t.STARTED="DAIStarted",t.FIRST_QUARTILE="DAIFirstQuartile",t.MIDPOINT="DAIMidpoint",t.STREAM_INITIALIZED="DAIStreamInitialized",t.THIRD_QUARTILE="DAIThirdQuartile",t.COMPLETE="DAIComplete"}(ct||(ct={}));var D5=class extends Ka{constructor(t,i){super("DAILoaded",t,i)}},I5=class extends Ka{constructor(t,i){super("DAIAdBreakStarted",t,i)}},S5=class extends Ka{constructor(t,i){super("DAIAdBreakEnded",t,i)}},E5=class extends Ka{constructor(t,i){super("DAIAdProgress",t,i)}},b5=class extends Ka{constructor(t,i){super("DAICuePointsChanged",t,i)}},L5=class extends Ka{constructor(t,i){super("DAIClick",t,i)}},k5=class extends Ka{constructor(t,i){super("DAIError",t,i)}},C5=class extends Ka{constructor(t,i){super("DAIStarted",t,i)}},x5=class extends Ka{constructor(t,i){super("DAIFirstQuartile",t,i)}},O5=class extends Ka{constructor(t,i){super("DAIMidpoint",t,i)}},j5=class extends Ka{constructor(t,i){super("DAIStreamInitialized",t,i)}},z5=class extends Ka{constructor(t,i){super("DAIThirdQuartile",t,i)}},P5=class extends Ka{constructor(t,i){super("DAIComplete",t,i)}};var B5=class extends i{replaceAdTagParameters(t){return this.Lsi.replaceAdTagParameters(null!=t?t:null)}ksi(t){return this.Lsi.contentTimeForStreamTime(t)}Csi(t){return this.Lsi.streamTimeForContentTime(t)}Vkt(t,i){const e=function(t){let i;"vod"===t.availabilityType?(i=new s.google.ima.dai.api.VODStreamRequest,i.contentSourceId=t.contentSourceID,i.videoId=t.videoID):"live"===t.availabilityType&&(i=new s.google.ima.dai.api.LiveStreamRequest,i.assetKey=t.assetKey);const e=google.ima.dai.api.StreamRequest.StreamFormat;var n;return i.format="dash"===t.format?e.DASH:e.HLS,i.apiKey=t.apiKey,i.adTagParameters=t.adTagParameters,i.omidAccessModeRules=null!=(n=X$(t.omidAccessModeRules))?n:{},i}(t);this.Lsi.requestStream(e)}Wn(){this.xsi(!1),this.Lsi.reset()}cn(){this.Bo();const t=google.ima.dai.api.StreamEvent.Type;this.Lsi.removeEventListener(t.AD_BREAK_STARTED,this.Osi),this.Lsi.removeEventListener(t.AD_PROGRESS,this.jsi),this.Lsi.removeEventListener(t.CLICK,this.GGt),this.Lsi.removeEventListener(t.COMPLETE,this.zsi),this.Lsi.removeEventListener(t.CUEPOINTS_CHANGED,this.Psi),this.Lsi.removeEventListener(t.ERROR,this.Ss),this.Lsi.removeEventListener(t.FIRST_QUARTILE,this.Bsi),this.Lsi.removeEventListener(t.LOADED,this.Rsi),this.Lsi.removeEventListener(t.MIDPOINT,this.Usi),this.Lsi.removeEventListener(t.STARTED,this.Qsi),this.Lsi.removeEventListener(t.STREAM_INITIALIZED,this.Fsi),this.Lsi.removeEventListener(t.THIRD_QUARTILE,this.Ysi),this.Lsi.removeEventListener(t.AD_BREAK_ENDED,this.Gsi),this.Wn()}Vsi(t){this.Lsi.onTimedMetadata(t)}Wsi(t,i,e){this.Lsi.processMetadata(t,i,e)}Hsi(t){const i=this.Lsi.previousCuePointForStreamTime(t);if(i)return{Ym:i.end,Fm:i.start,eg:i.played}}qsi(t){const i=this.Hsi(t),e=i&&!i.eg?i.Fm:void 0;return Promise.resolve(e)}xsi(t){this.mVt.style.display=t?"block":"none"}constructor(t,i){super(),this.Lsi=t,this.mVt=i,this.Osi=t=>{this.xsi(!0);const i=yt(t),e=ht(t);this.mo(new I5(i,e))},this.Gsi=t=>{this.xsi(!1);const i=yt(t),e=ht(t);this.mo(new S5(i,e))},this.jsi=t=>{const i=yt(t),e=ht(t);this.mo(new E5(i,e))},this.GGt=t=>{const i=yt(t),e=ht(t);this.mo(new L5(i,e))},this.zsi=t=>{const i=yt(t),e=ht(t);this.mo(new P5(i,e))},this.Psi=t=>{const i=yt(t),e=ht(t);this.mo(new b5(i,e))},this.Ss=t=>{const i=yt(t),e=ht(t);this.mo(new k5(i,e))},this.Bsi=t=>{const i=yt(t),e=ht(t);this.mo(new x5(i,e))},this.Rsi=t=>{const i=yt(t),e=ht(t);this.mo(new D5(i,e))},this.Usi=t=>{const i=yt(t),e=ht(t);this.mo(new O5(i,e))},this.Qsi=t=>{const i=yt(t),e=ht(t);this.mo(new C5(i,e))},this.Fsi=t=>{const i=yt(t),e=ht(t);this.mo(new j5(i,e))},this.Ysi=t=>{const i=yt(t),e=ht(t);this.mo(new z5(i,e))},this.mVt.style.display="none",this.Lsi.setClickElement(this.mVt);const e=google.ima.dai.api.StreamEvent.Type;this.Lsi.addEventListener(e.AD_BREAK_STARTED,this.Osi),this.Lsi.addEventListener(e.AD_PROGRESS,this.jsi),this.Lsi.addEventListener(e.CLICK,this.GGt),this.Lsi.addEventListener(e.COMPLETE,this.zsi),this.Lsi.addEventListener(e.CUEPOINTS_CHANGED,this.Psi),this.Lsi.addEventListener(e.ERROR,this.Ss),this.Lsi.addEventListener(e.FIRST_QUARTILE,this.Bsi),this.Lsi.addEventListener(e.LOADED,this.Rsi),this.Lsi.addEventListener(e.MIDPOINT,this.Usi),this.Lsi.addEventListener(e.STARTED,this.Qsi),this.Lsi.addEventListener(e.STREAM_INITIALIZED,this.Fsi),this.Lsi.addEventListener(e.THIRD_QUARTILE,this.Ysi),this.Lsi.addEventListener(e.AD_BREAK_ENDED,this.Gsi)}};function yt(t){const i=t.getStreamData(),e=i.adProgressData;let s;e&&(s={tXt:e.adBreakDuration,Xsi:e.duration,iXt:e.adPosition,E_:e.currentTime,ct:e.duration,eXt:e.totalAds});return{Zsi:s,Ksi:(i.cuepoints||[]).map((t=>({Fm:t.start,Ym:t.end,eg:t.played}))),Jsi:i.errorMessage||void 0,$si:i.manifestFormat||void 0,tni:i.streamId||void 0,ini:(i.subtitles||[]).map((t=>({eni:t.webvtt,sni:t.ttml,gs:t.language}))),Fu:i.url}}function R5(t){return{LRt:t.getAdSlotId(),O:t.getContent(),gP:t.getContentType(),Ti:t.getHeight(),ji:t.getWidth()}}function ht(t){const i=t.getAd();if(!i)return;const e=i.getAdPodInfo(),s=i.getCompanionAds().map(R5);return{sUt:i.getAdId(),$Zt:{iXt:e.getAdPosition(),QYt:e.getMaxDuration(),P2t:e.getPodIndex(),hEt:e.getTimeOffset(),eXt:e.getTotalAds()},BBt:i.getAdSystem(),R2t:i.getAdvertiserName(),ERt:i.getApiFramework(),HBt:s,uRt:i.getCreativeId(),sJt:i.getCreativeAdId(),U2t:i.getDealId(),dN:i.getDescription(),ct:i.getDuration(),mP:i.getTitle(),nni:i.getUniversalAdIdRegistry(),rni:i.getUniversalAdIdValue(),ZKt:i.getVastMediaHeight(),XKt:i.getVastMediaWidth(),VKt:i.getWrapperAdIds(),WKt:i.getWrapperAdSystems(),HKt:i.getWrapperCreativeIds()}}r(),r(),r();var U5="theo-dai-clickthrough",Q5="urn:google:dai:2018",F5=class{get oa(){const t=this,i=this.hni;return{contentTimeForStreamTime:i=>t.Lsi?t.Lsi.ksi(i):i,streamTimeForContentTime:i=>t.Lsi?t.Lsi.Csi(i):i,replaceAdTagParameters(i){t.Lsi&&t.Lsi.replaceAdTagParameters(i)},get snapback(){return t.oni},set snapback(i){t.oni=i},get sourceTransformer(){return i.ani},set sourceTransformer(t){i.ani=t}}}L_(t){this.K4.s_(),this.K4=new Po,W(this.uni(t,this.K4.i_))}async uni(t,i){if(Pi(i),!this.cni||!this.Lsi)return this.Lo.lni(t);if(this.cni.W9)return;if(t>this.Lo.b_()&&this.oni){const e=await hl(this.Lsi.qsi(t),i);if(e){this.Lo.lni(e),await this.Lsi.v_(ct.AD_BREAK_ENDED,i);if(this.Lsi.Hsi(t).Ym>t)return}}this.Lo.lni(t)}_g(){const t=this.cni&&this.cni.W9;if(t){const i=Ki.mn(this.Lo.dni()),e=t.hEt,s=e+t.QYt,n=new Ki([e,s]);return i.yn(n).ks()}return this.Lo.dni()}async v7(t,i){if(!t)return this.Lo.fni(t,i);try{this.Lo.nt.ln(gt.qg,this._ni);const e=await this.hni.gni(t,i);this.cni&&this.Lsi&&(this.wni=!0),await this.Lo.fni(e,i)}catch(t){if(yo(t),t.code===zw.LICENSE_INVALID)return;const i=new ce(le.SOURCE_NOT_SUPPORTED,"Something went wrong while setting up a Google DAI stream.",t);throw this.hP=Qh(i),this.oP=i,this.Lo.mo(new me(i)),i}}Wn(){if(this.wni){if(this.Lo.nt.rn(gt.qg,this._ni),this.Ani){this.Ani.rn(Os.Jg,this.vni);for(const t of this.Ani.L.Nw)t.rn(Sl.Rm,this.I3t);this.Ani=void 0}this.hP=void 0,this.oP=void 0,this.K4.s_(),this.cni&&this.cni.Wn(),this.Lsi&&this.Lsi.Wn(),this.wni=!1}}get lt(){return this.hP||this.Lo.mni()}get j_(){return this.oP||this.Lo.pni()}cn(){this.Wn(),this.Lo.yni(),this.Lsi&&this.Lsi.cn()}constructor(t,i,e,s){this.Ani=void 0,this.hP=void 0,this.oP=void 0,this.K4=new Po,this.wni=!1,this.oni=!0,this._ni=t=>{const i=t.Lt;i.zt===Pt.XM&&(i.$w===Ks.ID3||i.$w===Ks.EVENT_STREAM&&i.qw===Q5)&&(i.Xw=Ht.Zw,this.Ani=i,i.ln(Os.Jg,this.vni))},this.vni=t=>{t.Qm.ln(Sl.Rm,this.I3t)},this.I3t=t=>{var i,e;if(this.Lsi)if((null==(i=this.Ani)?void 0:i.$w)===Ks.ID3){const i=t.Qm.O;"TXXX"===i.id&&this.Lsi.Vsi({TXXX:i.text})}else if((null==(e=this.Ani)?void 0:e.$w)===Ks.EVENT_STREAM){const i=t.Qm.O;this.Lsi.Wsi(Q5,i,t.Ay)}},this.Lo=t,this.Lsi=i,this.cni=e,this.hni=s,e&&i&&this.Lo.Nc&&this.Lo.Nc.a7(e.uJt)}};r(),r();var Y5=class extends J${get Mni(){return this.Tni}get UYt(){return eh.Xh}constructor(t,i,e,s=!0){super(t,i,e),this.Tni=s}},G5=class extends Nc{Nni(){const t=[ct.STARTED,ct.FIRST_QUARTILE,ct.MIDPOINT,ct.THIRD_QUARTILE,ct.COMPLETE];this.Lsi.ln(t,this.Dni),this.Lsi.ln(ct.AD_BREAK_ENDED,this.Gsi),this.Lsi.ln(ct.AD_PROGRESS,this.jsi),this.Lsi.ln(ct.CUEPOINTS_CHANGED,this.Psi)}get eHt(){return this.lJt}get WWt(){return this._Ht}Ini(t){let i=t.$Zt.hEt,e=this.lGt||this.findAdBreakWithPredicate(i,(t=>!t.eg));if(!e){const s=t.$Zt.QYt;i=this.Lo.b_(),e=new Y5(s,s,i,!1),e.EKt(),this.dGt.push(e)}return e}Sni(t){switch(t){case ct.STARTED:this.lJt=!0;break;case ct.AD_BREAK_ENDED:this.lJt=!1}}Eni(t,i,e){if(i)switch(t){case ct.STARTED:case ct.FIRST_QUARTILE:case ct.MIDPOINT:case ct.THIRD_QUARTILE:case ct.COMPLETE:this.WWt.mo(new ka(this.lGt))}if(e)switch(t){case ct.STARTED:case ct.FIRST_QUARTILE:case ct.MIDPOINT:case ct.THIRD_QUARTILE:case ct.COMPLETE:this.WWt.mo(new tu(this.rGt,this.rGt.QKt))}switch(t){case ct.COMPLETE:this.WWt.mo(new fa(this.rGt,this.aJt.QKt));break;case ct.AD_BREAK_ENDED:this.WWt.mo(new Bh(this.W9))}switch(t){case ct.FIRST_QUARTILE:this.WWt.mo(new u0(this.rGt,this.aJt.QKt));break;case ct.MIDPOINT:this.WWt.mo(new ar(this.rGt,this.aJt.QKt));break;case ct.THIRD_QUARTILE:this.WWt.mo(new d0(this.rGt,this.aJt.QKt))}}bni(t){const i=t.t7,e=this.Ini(i),s=function(t,i){if(t.Nc.length)return!1;for(let e=0;e<i;e++){const i=new s0(t,zr._Qt);t.LKt(i)}return!0}(e,i.$Zt.eXt),n=function(t,i){const e=i.$Zt.iXt-1;return t.Nc[e]}(e,i),r=function(t,i){return t.jKt!==K$.READY&&(t.qKt(i),!0)}(n,i);this.rGt=n,this.lGt=e,e.EKt(),this.Eni(t.type,s,r)}Lni(t){for(const i of this.dGt)if(Q_(t,i.hEt))return i}findAdBreakWithPredicate(t,i){for(const e of this.dGt)if(Q_(e.hEt,t)&&i(e))return e}get kni(){const t=this.findAdBreakWithPredicate(0,(t=>t.Mni));let i=0;return t&&(i=t.QYt),i}Cni(t,i){let e;for(const s of this.dGt)s.hEt>=t&&s.hEt<=i&&!s.eg&&(!e||s.hEt>=e.hEt)&&(e=s);return e}uT(){}o7(t){}Wn(){this.rGt&&(this.WWt.mo(new fa(this.rGt,this.rGt.QKt)),this.rGt=void 0),this.lGt&&(this.WWt.mo(new Bh(this.lGt)),this.lGt=void 0),this.lJt=!1,Ri(this.dGt)}cn(){this.Wn(),this.WWt.cn()}constructor(t,i){super(new Mu,eh.Xh),this.Lsi=t,this.Lo=i,this.jsi=t=>{const i=this.lGt;if(!i||!this.rGt)return;const e=t.bsi.Zsi;this.rGt.QKt=e.E_,function(t,i){const e=i.iXt,s=i.tXt,n=i.E_;var r;const h=So(t.Nc.slice(0,e-1),(t=>null!=(r=t.ct)?r:0));t.FYt=s-n-h}(i,e)},this.Psi=t=>{const i=t.bsi.Ksi;if(i)for(const t of i)if(!this.Lni(t.Fm)){const i=t.Ym-t.Fm,e=new Y5(i,i,t.Fm,!0);this.dGt.push(e)}},this.Dni=t=>{this.Sni(t.type),this.bni(t)},this.Gsi=t=>{this.lJt=!1,this.rGt=void 0;const i=this.W9;i&&(i.FYt=0,this.Eni(t.type,!1,!1),this.lGt=void 0)},this.Nni()}};function V5(t){if(t.sources)if(Yn(t.sources)){for(const i of t.sources)if(ga(i))return!0}else if(lt(t.sources))return ga(t.sources);return!1}r();var W5=class{async gni(t,i){const e=[],s=[];for(const i of t.sources)if(ga(i)){if(!this.Lsi)continue;e.push(i)}else s.push(i);if(0===e.length)return t;let n,r;for(;void 0===n&&0!==e.length;){const{cc:h}=await Je.kb.uB(e,t),o=h;Pi(i);try{n=await this.xni(o,i),s.push(n)}catch(t){yo(t),r=t,Et(e,o)}}if(0!==t.sources.length&&0===s.length)throw new b("Fatal: unable to play DAI streams.");return r&&ji(r.message),oe({},t,{sources:s})}async xni(t,i){if(!this.Lsi)throw new b("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=this.Lsi.v_(ct.LOADED,i),s=this.Lsi.v_(ct.ERROR,i),n=t.type===hi.bv?"dash":"hls";this.Lsi.Vkt(oe({},t.ssai,{format:n}));const r=await Promise.race([e,s]);if(r.type===ct.LOADED){const i=t.type===hi.bv?hi.bv:hi.zv;return LS(oe({},t,{src:this.ani?await this.ani(r.bsi.Fu||""):r.bsi.Fu,type:i}))}throw b(r.bsi.Jsi)}constructor(t){this.Lsi=t,this.ani=t=>t}};tr(function(t){return i=>class extends i{ha(){const t=super.ha(),i=t.ads;if(i){const t=this.Oni.oa;Ou(i,{get dai(){return t}})}return t}get Il(){return this.jni}lni(t){super.L_(t)}L_(t){this.Oni.L_(t)}dni(){return super._g()}_g(){return this.Oni._g()}ca(t){return this.Oni.Wn(),super.ca(t)}async fni(t,i){return super.v7(t,i)}async v7(t,i){return this.Oni.v7(t,i)}mni(){return super.O_()}pni(){return super.z_()}O_(){return this.Oni.lt}z_(){return this.Oni.j_}yni(){super.cn()}cn(){this.Oni.cn()}constructor(i,e){super(i,e),this.jni=!1,this.zni=t=>{13===t.which&&this.mVt.click(),this.Pg()};const s=this.xg();let n,r;try{this.mVt=h.createElement("button"),this.mVt.className=U5,this.mVt.addEventListener("keydown",this.zni),this.mVt.addEventListener("click",this.zni),n=t(s,this.mVt),r=new G5(n,this),this.we.appendChild(this.mVt),this.jni=!0}catch(t){}const o=new W5(n);this.Oni=new F5(this,n,r,o)}}}((function(t,i){if(!(s.google&&s.google.ima&&lt(s.google.ima.dai)))throw new b("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=new google.ima.dai.api.StreamManager(t);return new B5(e,i)})),iu.j9),r(),r(),r();var H5=class{get Pni(){return void 0===this.Bni?0:(performance.now()-this.Bni)/1e3}Rni(t){this.Uni=t,this.Fni.Qni(t),this.Lo.ln("play",this.Qti),this.Lo.ln("ended",this.Wii),this.Lo.ln("timeupdate",this.Yni),this.Lo.ln("error",this.Q1),this.Lo.ln("waiting",this.qii),this.Lo.ln(["canplay","canplaythrough","playing"],this.Xii),this.Lo.ln("durationchange",this.Vii),us.bY(this.Gni)}Vni(){this.Lo.rn("play",this.Qti),this.Lo.rn("ended",this.Wii),this.Lo.rn("timeupdate",this.Yni),this.Lo.rn("error",this.Q1),this.Lo.rn("waiting",this.qii),this.Lo.rn(["canplay","canplaythrough","playing"],this.Xii),this.Lo.rn("durationchange",this.Vii),us.DY(this.Gni),this.Wni||(this.Fni.Hni(this.qni),this.Fni.Xni()),this.Zni&&this.Kni(),this.Uni=void 0,this.Jni=!1,this.Wni=!1,this.qni=-1/0,Ri(this.$ni)}tri(){this.Jni&&this.Fni.iri(),this.Bni=performance.now(),this.eri=v(this.sri,6e4)}Kni(){this.Fni.nri(this.Pni),this.Zni=!1,this.Bni=void 0,this.eri&&(m(this.eri),this.eri=void 0)}rri(){if(j(this.Lo.kd()))return;const t=10*function(t,i){return x.floor(t/i)}(this.Lo.b_()/this.Lo.kd()*100,10);na(this.$ni,t)||(this.$ni.push(t),this.Fni.hri(t))}constructor(t,i){this.Lo=t,this.Fni=i,this.Jni=!1,this.Wni=!1,this.$ni=[],this.qni=-1/0,this.Zni=!1,this.Qti=()=>{this.Jni||(this.Fni.ari(),this.Zni&&this.Fni.iri(),this.Jni=!0)},this.Wii=()=>{this.Fni.cri(),this.Wni=!0},this.Yni=()=>{this.qni<this.Lo.b_()&&(this.qni=this.Lo.b_()),this.rri()},this.qii=()=>{this.Jni&&(this.lri=performance.now(),this.Fni.dri(this.Lo.b_()))},this.Xii=()=>{this.lri&&(this.Fni.fri((performance.now()-this.lri)/1e3),this.lri=void 0)},this.Q1=()=>{this.qni<this.Lo.b_()&&(this.qni=this.Lo.b_()),this.Fni.Nit(this.Lo.lt.message)},this.Vii=()=>{const t=this.Lo.kd()===1/0;t&&!this.Zni&&(this.Zni=t,this.tri())},this.Gni=()=>{this.Fni.Hni(this.qni),this.Fni._ri()},this.sri=()=>{void 0!==this.Bni&&this.Fni.gri(this.Pni)}}};r();var q5=class{Qni(t){this.wri(["setDocumentTitle",t.itemTitle]),this.wri(["setCustomUrl","https://content.streamone.net/embed/cust=Xo9oT45EptMG/account="+t.accountID+"/item="+t.itemID]),this.wri(["trackPageView"])}ari(){this.Ari("item first play","viewing","1")}Xni(){this.Ari("item skipped","skipped","1")}hri(t){this.Ari("item progress","percent",""+t)}_ri(){this.Ari("item abandoned","window closed","1")}Hni(t){this.Ari("item time","watched",""+t)}cri(){this.Ari("item finished","ended","1")}dri(t){this.Ari("buffering started","timestamp",""+t)}fri(t){this.Ari("buffering ended","duration",""+t)}Nit(t){this.Ari("error","message",""+t)}iri(){this.Ari("livestream first play","viewing","1")}gri(t){this.Ari("livestream progress","duration",""+t)}nri(t){this.Ari("livestream time","watched",""+t)}Ari(t,i,e){this.wri(["trackEvent","Video",t,i,e])}wri(t){const i="undefined"!=typeof _paq?_paq:void 0;i?i.push(t):console.warn("The Piwik library required for the StreamOne pre-integration was not found. Make sure it is loaded before instantiating THEOplayer.")}};r();var X5=class{get vri(){if(!this.pri)return;const t=this.Lo.b_()/this.pri;return x.floor(4*t)+1}get yri(){return void 0!==this.pri}Rni(){this.Tc.ln("n7",this.Qei),this.Tc.ln("r7",this.Fei),this.Tc.ln("vJt",this.Gei),this.Tc.ln("JWt",this.Yei),this.Lo.ln("timeupdate",this.Yni),us.bY(this.Gni)}Vni(){this.Tc.rn("n7",this.Qei),this.Tc.rn("r7",this.Fei),this.Tc.rn("vJt",this.Gei),this.Tc.rn("JWt",this.Yei),this.Lo.rn("timeupdate",this.Yni),Ri(this.Mri),us.DY(this.Gni),this.pri=void 0}constructor(t,i,e){this.Lo=t,this.Tc=i,this.Fni=e,this.Mri=[],this.Qei=()=>{this.pri=this.Lo.kd(),this.Fni.Tri(this.pri)},this.Fei=()=>{this.pri&&(this.Fni.Nri(this.pri),Ri(this.Mri),this.pri=void 0)},this.Gei=t=>{if(!this.pri)return;const i=this.pri-this.pri*t.wJt;this.Fni.Dri(i),this.pri=void 0},this.Yei=()=>{this.pri=this.Lo.kd(),this.Fni.Iri()},this.Yni=()=>{const t=this.vri;if(this.yri&&t&&!na(this.Mri,t)){switch(t){case 1:this.Fni.Sri();break;case 2:this.Fni.Eri();break;case 3:this.Fni.bri();break;case 4:this.Fni.Lri()}this.Mri.push(t)}},this.Gni=()=>{this.Fni.kri()}}};r();var Z5=class{Tri(t){this.Fni.Ari("ad start","duration",""+t)}Nri(t){this.Fni.Ari("ad finished","duration",""+t)}Dri(t){this.Fni.Ari("ad skipped","remaining time",""+t)}Iri(){this.Fni.Ari("ad blocker","detected","1")}Sri(){this.Fni.Ari("ad progress","firstQuartile","")}Eri(){this.Fni.Ari("ad progress","secondQuartile","")}bri(){this.Fni.Ari("ad progress","thirdQuartile","")}Lri(){this.Fni.Ari("ad progress","fourthQuartile","")}kri(){this.Fni.Ari("ad abandoned","window closed","1")}constructor(t){this.Fni=t}};function K5(t){return t&&"streamone"===t.integration}tr((function(t){return class extends t{cn(){this.rn("sourcechange",this.ro),this.Cri&&(this.xri&&this.xri.Vni(),this.Ori&&this.Ori.Vni(),this.Cri=!1),super.cn()}constructor(t,i){super(t,i),this.Cri=!1,this.ro=()=>{this.Cri&&(this.xri.Vni(),this.Ori&&this.Ori.Vni());const t=this.Oa();if(this.Cri=!1,!t)return;const i=function(t){if(t.analytics)for(let i of t.analytics)if(K5(i))return i}(t);i&&(this.Cri=!0,this.xri.Rni(i),this.Ori&&this.Ori.Rni())};const e=new q5;if(this.xri=new H5(this,e),this.Nc){const t=new Z5(e);this.Ori=new X5(this,this.Nc,t)}this.ln("sourcechange",this.ro)}}}),iu.P9),r(),r(),r(),r(),r(),r();var J5=class extends QW{async LK(t,i,e){const s=await $5(t);await super.LK(s,i,e),this.jri(s,i)}async SK(t,i,e){const s=await $5(t);await super.SK(s,i,e),this.jri(s,i)}jri(t,i){const e=this.Pri.zri;if(void 0===e)return;const s=i.sK;let n;if(this.Bri!==s&&(this.Bri=s,e.setLevelSwitching(s),e.setContainerFormat(2)),function(t){return Xc.call(t,"f8")}(i)){const t=i.f8,r=i.f8+i.ct;n=i.Zy,e.newPts(t,r,"video",s)}else 0;e.appendBuffer(t.JM,"video",s,n)}async wm(t,i,e){var s;await super.wm(t,i,e),null==(s=this.Pri.zri)||s.flushBuffer(t,i)}constructor(t,i){super(t),this.Pri=i,this.Bri=void 0}};async function $5(t){switch(t.$w){case Ho.MH:return t;case Ho.iS:{const i=await oi(t.JM);return{$w:Ho.MH,JM:new T(i)}}case Ho.TH:throw new b("Opaque initialization segments are not supported on web.")}}var t6=class extends ut{xTt(t){return t.wJ===Tw.Yv?new J5(t,this.Pri):new QW(t)}constructor(t,i){super(t),this.Pri=i,this.kTt(t)}},i6=class extends xn{get zri(){return this.Rri}Uri(){this.Rri=new LcevcDil.LcevcDil(this.sP.aP,this.Qri,{})}ge(){super.ge(),this.Fri()}be(){super.be(),this.Qri.style.display="none"}Wn(){return this.Qri.style.display="none",void 0!==this.Rri&&(this.Rri.close(),this.Uri()),super.Wn()}Xf(){return this.Yri=!0,void 0!==this.Rri&&(this.Rri.close(),this.Rri=void 0),this.au.removeChild(this.Qri),super.Xf()}qP(t){this.mo(new Hk(new cc(zw.ABORTED,t)))}Fri(){this.sP.aP.style.display="none",this.Qri.style.display="block"}get gTt(){return this.sP}STt(t){return new t6(t,this)}ITt(t){return new wi(t)}constructor(t,i){super(t),this.Yri=!1,this.Gri=t=>{this.Yri||(t||this.qP("LCEVC SDK failed to initialize."),this.Uri())},this.Vri=()=>{this.Yri||this.qP("LCEVC SDK failed to initialize.")},this.au=i,this.Qri=h.createElement("canvas"),this.Qri.style.width="100%",this.Qri.style.height="100%",this.Qri.style.position="absolute",this.Qri.style.top="50%",this.Qri.style.left="50%",this.Qri.style.transform="translate(-50%, -50%)",this.Qri.style.display="none",this.au.appendChild(this.Qri),LcevcDil.ready.then(this.Gri,this.Vri)}},Rc=class extends xt{XP(t){if(t===Tw.Yv)return this.Wri=new i6(super.XP(t),this.au),this.Wri}async kP(t){this.Wri=void 0;const i=t;await i.Xf(),await super.kP(i.gTt)}get Hri(){return this.Wri}constructor(t,i){super(t),this.au=i}},e6=class extends HW{async cn(){for(const t of this.Zv.Nw)t.rn(Os.pw,this.qri);this.rt.rn(gt.qg,this.Xri),this.rt.rn(gt.Zg,this.Zri),await super.cn(),await this.sP.Xf(),await this.CP.kP(this.sP)}constructor(t,i,e,s,n,r,h){const o=new Rc(n,h),a=new Zu(o);super(t,i,e,s,a.XP(r),h),this.Xri=t=>{t.Lt.ln(Os.pw,this.qri)},this.Zri=t=>{t.Lt.rn(Os.pw,this.qri)},this.qri=t=>{var i;const e=null==(i=this.Kri.Hri)?void 0:i.zri,s=t.Vnt.Bw;null==e||e.setCurrentLevel(s)},this.CP=a,this.Kri=o,this.Zv.ln(gt.qg,this.Xri),this.Zv.ln(gt.Zg,this.Zri)}};lu(new class extends uU{ej(t,i,e,s,n,r){const h=new St(ti.kb.fet,ti.kb.let,ti.kb.det,ti.kb.wet);let o=i;return Ln.sx()&&(o=new Ln(o)),new e6(e,s,n,h,o,Tw.Yv,t)}async ZP(t){if(!t.lcevc)return!1;if(!await super.ZP(t))return!1;if(void 0===s.LcevcDil)throw new ce(le.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}KP(){return!1}constructor(...t){super(...t),this.JP=si.Sz}}),r();var s6,n6=class extends nK{async cn(){for(const t of this.Zv.Nw)t.rn(Os.pw,this.qri);this.rt.rn(gt.qg,this.Xri),this.rt.rn(gt.Zg,this.Zri),await super.cn(),await this.CP.kP(this.sP)}constructor(t,i,e,s,n,r,h,o){const a=new Rc(i,t),u=new Zu(a);super(u.XP(Tw.Yv),e,s,n,r,h,o),this.Xri=t=>{t.Lt.ln(Os.pw,this.qri)},this.Zri=t=>{t.Lt.rn(Os.pw,this.qri)},this.qri=t=>{var i;const e=null==(i=this.Kri.Hri)?void 0:i.zri,s=t.Vnt.ODt.Bw;null==e||e.setCurrentLevel(s)},this.CP=u,this.Kri=a,this.Zv.ln(gt.qg,this.Xri),this.Zv.ln(gt.Zg,this.Zri)}};lu(new class extends hK{ej(t,i,e,s,n,r){return new n6(t,i,e,n,zZ(s.libraryLocation),new sK(s.libraryLocation),new St(ti.kb.fet,ti.kb.let,ti.kb.det,ti.kb.wet),s)}async ZP(t,i){if(!t.lcevc)return!1;if(!await super.ZP(t,i))return!1;if(void 0===s.LcevcDil)throw new ce(le.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}KP(){return!1}constructor(...t){super(...t),this.JP=si.kz}}),r(),r(),r(),r(),function(t){t.Jri="Wn",t.$ri="thi"}(s6||(s6={}));var r6="freewheel-nonlinear-ad",h6=[t.yA,t.XA,t.ZA,t.yh,qo._v,t.bh],o6=class i extends P${zg(){this.CP.rR()}ihi(){this.ehi.ln("s7",this.shi),this.ehi.ln(["n7","r7"],this.nhi),this.ehi.ln("e7",this.c2t)}rhi(){this.ehi.rn("s7",this.shi),this.ehi.rn(["n7","r7"],this.nhi),this.ehi.rn("e7",this.c2t)}hhi(){this.WWt.La(this.ehi.ohi)}ahi(){this.ehi.uhi.ln(h6,this.Ds)}lhi(){this.ehi.uhi.rn(h6,this.Ds)}get GWt(){return this}static get FWt(){return eh.PYt}get FWt(){return i.FWt}get W9(){var t;return null!=(t=this.ehi.ohi.W9)?t:null}get G9(){const t=this.ehi.ohi.aJt;return t?[t]:[]}o7(t){}b_(){return this.ehi.uhi.E_}L_(t){}kd(){return this.ehi.uhi.ct}x_(){return this.ehi.uhi.C_}O_(){return this.hP}z_(){return this.oP}pg(){return 0}Tg(){return 0}Dg(){return this.ehi.uhi.Ng}Ig(t){this.ehi.uhi.Ng=t}G_(){return this.ehi.uhi.Y_}V_(t){this.ehi.uhi.Y_=t}dg(){return this.ehi.uhi.cg}get H9(){return this.ehi.ohi.H9}get q9(){return this.ehi.ohi.q9}_g(){return this.ehi.uhi.fg}X_(){return this.ehi.uhi.q_}XWt(i){if(this.eHt||this.ehi.XWt(i),this.ehi.dhi){if(i.type===t.yh&&this.Lo.C_)return!0;if(i.type===t.NA)return this.ehi._hi.fhi(),!0}return!1}be(){this.ehi.be()}Pg(){this.q_||this.ehi.uhi.Pg()}async ghi(){if(!this.ehi.whi)try{await this.ehi.Gqt()}catch(t){this.Ahi(t,Qe.GENERAL)}}async vhi(){if(this.ehi.uhi.mhi)return this.ehi.uhi.Bg(),!1;if(this.ehi.phi)try{await this.ehi._hi.yhi()}catch(t){this.Ahi(t,Qe.PLAYBACK)}return!0}get Mhi(){return z_(this.O_())}Ahi(t,i){t.name!==s6.Jri&&this.WWt.mo(new Ba(i,"Ads could not be loaded."))}async Bg(){if(this.q_&&this.mo(new vh(this.E_)),await this.ghi(),this.Mhi)return;const t=await this.vhi();!this.Mhi&&t&&this.c2t()}CJt(t,i,e){i===Vs.Z9&&this.ehi.CJt(t)}ge(){this.ehi.ge()}uT(){this.ehi.uhi.uT()}xg(){return this.m8}y_(){return this.CP.uR.map((t=>t.aP))}hHt(t){}async cn(){await this.Rg(),this.ehi.cn(),await this.CP.kP(this.sP),this.rhi(),this.lhi(),this.WWt.mR(this.ehi.ohi)}async Rg(){this.ehi.Wn(),this.eHt&&(this.Lo.ge(),this.mWt(),this.be())}constructor(t,i,e,s,n){super(t,i),this.hP=void 0,this.oP=void 0,this.nhi=t=>{const i=t.t7,e="n7"===t.type;if(i._qt===zr.gQt){const t=this.Lo.we.classList;e?t.add(r6):t.remove(r6)}e?this.ge():this.be()},this.shi=()=>{this.gHt(),this.Lo.Pg(),this.Lo.be()},this.c2t=()=>{this.ehi.whi&&(this.Lo.C_||this.Lo.Bg(),this.be(),this.Lo.ge(),this.mWt())},this.ehi=s,this.CP=e,this.sP=n,this.m8=n.aP,this.m8.controls=!1,this.ihi(),this.hhi(),this.ahi()}};r(),r(),r();var a6=class extends J${get Thi(){return this.Nhi}get Dhi(){return this.Nc[this.Ihi]}set Shi(t){this.Ihi=t}get Shi(){return this.Ihi}get _qt(){return this.zKt}get UYt(){return eh.PYt}constructor(t,i,e,s){super(t,i,e),this.Nhi=s,this.Ihi=0,this.zKt=c6(s)}};r();var u6=class extends t0{get Ehi(){return this.bhi}set Ehi(t){this.bhi!==t&&(this.bhi=t)}get Ti(){return this.Ul.Thi.getHeight()}get ji(){return this.Ul.Thi.getWidth()}get RRt(){return this.Ehi.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]}get UYt(){return eh.PYt}ha(){return Kn(this)}constructor(t,i,e){super(t,i),this.bhi=e}};function c6(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY?zr.gQt:zr._Qt}var l6=class t extends ha{async Lhi(t,i){this.khi=t,this.Chi=i,this.xhi(t),await i,this.Ohi()}get jhi(){return this.zhi}get Phi(){return this.Bhi}get Rhi(){return this.Uhi}get W9(){return this.lGt}get aJt(){return this.rGt}get H9(){const t=[];if(this.lGt){const i=this.lGt.Shi;i>=0&&t.push(...this.lGt.Nc.slice(i+1))}for(const i of this.Qhi)t.push(...i.Nc);return t}get q9(){return this.Qhi}Ohi(){this.Fhi()}xhi(t){t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Yhi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Ghi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Vhi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.Whi),t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.Hhi)}qhi(){this.khi&&(this.khi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Yhi),this.khi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Ghi),this.khi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Vhi),this.khi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.Whi),this.khi.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.Hhi))}Fhi(){this.zhi=this.Xhi(this.Zhi),this.Bhi=this.Xhi(this.Khi).concat(this.Xhi(this.Jhi)),this.Uhi=this.Xhi(this.$hi),this.Qhi=this.zhi.concat(this.Bhi).concat(this.Uhi)}Xhi(t){if(!this.khi)return[];const i=this.khi.getSlotsByTimePositionClass(t);return this.toi(i)}ioi(t){if(!this.lGt)return void 0;const i=t.getSlot().getAdInstances().indexOf(t);-1!==i&&(this.lGt.Shi=i);const e=this.lGt.Dhi;return e&&(e.Ehi=t),e}eoi(t){return Gr(this.Qhi,(i=>i.Thi===t))}toi(i){return i.map((i=>{const e=i.getTotalDuration(),s=t.soi(i);return new a6(e,e,s,i)}))}static noi(t,i){const e=t.getAdInstances(),s=[];for(const t of e){const e=c6(t.getSlot()),n=new u6(i,e,t),r=[];n.xKt(t.getAdId(),t.getSlot().getWidth(),t.getSlot().getHeight(),t.getDuration(),r,0),i.LKt(n),s.push(n)}return s}TVt(){const t=this.aJt;t&&this.mo(new lr(t,this.roi()))}hoi(){const t=this.aJt;t&&(this.mo(new fa(t,t.Ehi.getPlayheadTime())),this.rGt=void 0)}ooi(t){const i=this.W9;i&&(i.FYt=function(t,i,e){void 0===e&&(e=0);let s=0;const n=t.Nc.length;for(let r=i;r<n;r++){const n=t.Nc[r],h=n.ct;if(n){let t=h;r===i&&(t=It(h-e,0,h)),s+=t}}return s}(i,i.Shi,t))}static soi(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL?-1:t.getTimePosition()}roi(){const t=this.aJt;if(!t)return 0;const i=t.Ehi;return i.getPlayheadTime()/i.getDuration()}aoi(t){Et(this.Qhi,t),Et(this.zhi,t),Et(this.Bhi,t),Et(this.Uhi,t)}Wn(){this.qhi(),this.zhi.length=0,this.Bhi.length=0,this.Uhi.length=0,this.Qhi.length=0,this.rGt=void 0,this.lGt=void 0,this.khi=void 0,this.Chi=void 0}cn(){this.Wn(),this.Bo()}constructor(i,e){super(),this.Us=i,this.Fx=e,this.Zhi=tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,this.Khi=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,this.$hi=tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL,this.Jhi=tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY,this.zhi=[],this.Bhi=[],this.Uhi=[],this.Qhi=[],this.Yhi=i=>{const e=i.slot,s=this.eoi(e);s&&(t.noi(e,s),this.lGt=s,s.EKt(),this.aoi(s),s._qt===zr._Qt&&this.mo(new ka(s)))},this.Ghi=()=>{const t=this.W9;t&&t._qt===zr._Qt&&(this.mo(new Bh(t)),this.Fx.src=""),this.lGt=void 0},this.Vhi=t=>{const i=this.ioi(t.adInstance);i&&(this.mo(new tu(i,i.Ehi.getPlayheadTime())),this.rGt=i),t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&(this.Us.style.cursor="pointer",this.Us.addEventListener("click",this.uoi))},this.Whi=()=>{this.Us.style.cursor="",this.Us.removeEventListener("click",this.uoi)},this.uoi=()=>{this.aJt&&this.aJt.Ehi.getRendererController().processEvent({name:tv.freewheel.SDK.EVENT_AD_CLICK})},this.Hhi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.hoi();break;case tv.freewheel.SDK.EVENT_AD_SKIPPED:this.TVt(),this.hoi()}}}};r();var d6=class t extends ha{coi(){if(this.iTt){this.iTt.setAdVolume(f6(this.Y_,this.Ng))}}loi(t){this.iTt=t,this.xhi(t)}xhi(t){t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.doi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.foi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this._oi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.goi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.woi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.Aoi)}voi(){const t=this.iTt;t&&(t.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.doi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.foi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this._oi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.goi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.woi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.Aoi))}Bg(){this.Pnt.W9&&(this.Pnt.W9.Thi.resume(),this.q_=!1)}Pg(){this.Pnt.W9&&(this.Pnt.W9.Thi.pause(),this.q_=!0)}get E_(){const t=this.Pnt.aJt;return t&&(this.E_=t.Ehi.getPlayheadTime()),this.JB}set E_(t){this.JB=t}get ct(){return this.JL}get mhi(){return!!this.Pnt&&void 0!==this.Pnt.W9}get q_(){return this.iR}set q_(t){this.iR=t}get Ng(){return this.Ak}set Ng(t){this.iTt&&this.iTt.setAdVolume(t),this.Ak=t}get Y_(){return this.iTt&&(this.moi=0===this.iTt.getAdVolume()),this.moi}set Y_(t){this.iTt&&this.iTt.setAdVolume(f6(t,this.Ng)),this.moi=t}get fg(){return this.w$}get C_(){return this.x$}set C_(t){this.x$=t}get cg(){return this.O$}static poi(t){switch(t){case"pause":return tv.freewheel.SDK.VIDEO_STATE_PAUSED;case"playing":return tv.freewheel.SDK.VIDEO_STATE_PLAYING;case"ended":return tv.freewheel.SDK.VIDEO_STATE_COMPLETED;case"stop":return tv.freewheel.SDK.VIDEO_STATE_STOPPED}}yoi(i){const e=t.poi(i);this.iTt&&e&&this.iTt.setVideoState(e)}uT(){const t=this.Pnt.aJt;t&&t.Ehi.skip()}Wn(){if(this.voi(),this.iTt){this.yoi("stop"),this.iTt.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);const t=this.iTt.getTemporalSlots();for(const i of t)i.stop();this.iTt.dispose(),this.iTt=void 0}this.JL=NaN,this.C_=!1,this.O$=ow.Rv,this.E_=0,this.Moi=0,this.q_=!0,void 0!==this.Toi&&(m(this.Toi),this.Toi=void 0)}cn(){this.Wn(),this.Bo(),this.Pnt.rn("s7",this.wd),this.Ou.rn(xr.an,this.foi),this.AVt.removeEventListener("click",this.Noi)}constructor(t,i,e,s){super(),this.Lo=t,this.Ou=i,this.Pnt=e,this.AVt=s,this.w$=Ki.KB().ks(),this.iR=!0,this.JL=NaN,this.moi=!1,this.x$=!1,this.O$=ow.Rv,this.JB=0,this.Moi=0,this.doi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_PAUSE:(function(t){if(!t)return!0;const i=t.Ehi,e=i.getPlayheadTime(),s=i.getDuration();return e>=s||Q_(s,e)})(this.Pnt.aJt)||(this.q_=!0,this.mo(new ws(this.E_)));break;case tv.freewheel.SDK.EVENT_AD_RESUME:this.q_=!1,this.mo(new Vi(this.E_));break;case tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE:if(this.iTt){const t=this.iTt.getAdVolume();0===t?this.moi=!0:this.Ak=t,this.mo(new Ve(this.E_,this.Ng))}}},this._oi=()=>{this.C_=!1;const t=this.q_;if(this.q_=!1,t&&(this.mo(new vh(this.E_)),this.mo(new Vi(this.E_))),this.O$=ow.Qv,this.E_=0,!this.Pnt.aJt)return;const i=this.Pnt.aJt.Ehi;this.JL=i.getDuration(),this.mo(new ts(this.JL)),this.Toi=v((()=>{if(!this.mhi)return void this.XJ();this.Pnt.ooi(this.E_);const t=i.getPlayheadTime();Ua(t,this.Moi,.001)||this.mo(new Tc(t,void 0)),this.Moi=t}),250),this.iTt&&this.iTt.setAdVolume(f6(this.Y_,this.Ng))},this.Noi=()=>{const t=this.Pnt.aJt;t&&(t._qt===zr.gQt?this.Lo.Pg():this.q_||this.Pg())},this.XJ=()=>{m(this.Toi),this.Toi=void 0},this.goi=()=>{this.XJ(),this.C_=!0},this.woi=()=>{this.yoi("pause")},this.Aoi=()=>{this.yoi("playing")},this.wd=t=>{t.Ul._qt===zr._Qt&&(this.q_=!1)},this.foi=()=>{this.iTt&&this.iTt.resize(this.Ou.fu,this.Ou.pu)},this.Ak=t.Ng,e.ln("s7",this.wd),this.Ou.ln(xr.an,this.foi),this.AVt.addEventListener("click",this.Noi)}};function f6(t,i){return t?0:i}r(),r();var _6=class extends Jo{get name(){return s6.$ri}constructor(){super("A FreeWheel Ad Error occurred")}};r();var Ec=class extends Jo{get name(){return s6.Jri}constructor(){super("A FreeWheel Reset Error Occurred")}},g6=0;var w6=class{Doi(t,i,e){t.setNetwork(i.networkId),t.setServer(i.adServerUrl);const s=this.iTt;if(s.setProfile(i.profile),i.assetId&&i.assetDuration&&s.setVideoAsset(i.assetId,i.assetDuration),i.siteSectionId&&s.setSiteSection(i.siteSectionId),s.registerVideoDisplayBase(e),i.cuePoints&&i.cuePoints.length)for(const t of i.cuePoints)s.addTemporalSlot("cue-"+ ++g6,t.adUnit,t.timeOffset);const n=i.customData;if(lt(n)){const t=_.keys(n);for(const i of t){const t=n[i];s.addKeyValue(i,t)}}}async Ioi(){this.iTt.submitRequest(),await this.Soi.nL}Wn(){this.iTt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Eoi),this.Soi.sL(new Ec)}constructor(t,i,e,s){this.iTt=i,this.Eoi=t=>{this.iTt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Eoi),t.success?this.Soi.eL(void 0):this.Soi.sL(new _6)},this.Doi(t,e,s),i.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Eoi),this.Soi=new No}};r(),r();var A6=class{boi(){this.khi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Ghi),this.khi.removeEventListener(tv.freewheel.SDK.EVENT_ERROR,this.Ghi)}get Loi(){return this.e_.nL}lCt(){this.boi(),this.e_.sL(new Ec)}constructor(t){this.khi=t,this.Ghi=t=>{this.boi(),this.e_.eL(void 0)},this.UZt=t=>{this.boi(),this.e_.sL(new _6)},this.e_=new No,t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Ghi),t.addEventListener(tv.freewheel.SDK.EVENT_ERROR,this.UZt)}},v6=class{lm(t){this.khi=t}yhi(){return this.koi(this.Coi.jhi)}fhi(){this.koi(this.Coi.Rhi)}async koi(t){if(this.khi)for(;t.length>0;){this.xoi=new A6(this.khi);const i=this.xoi.Loi,e=this.Coi.W9;e&&e._qt===zr.gQt&&e.Thi.stop();t.shift().Thi.play();try{await i}finally{this.xoi=void 0}}}Wn(){this.xoi&&(this.xoi.lCt(),this.xoi=void 0),this.Ooi=0}cn(){this.Lo.rn(t.XA,this.joi)}constructor(i,e){this.Lo=i,this.Coi=e,this.Ooi=0,this.joi=()=>{const t=this.Lo.b_();for(const i of this.Coi.Phi){const e=new Ki([this.Ooi,t],[!0,!0]),s=i.Thi.getTimePosition();if(e.ar(s))switch(i.Thi.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.koi([i]);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:i.Thi.play(),i.Thi.setVisible(!0)}}this.Ooi=t},i.ln(t.XA,this.joi)}},m6=0,p6=class t extends Mu{static createUniqueDisplayBaseId(){return"theo-freewheel-"+ ++m6}get dhi(){return 0!==this.ohi.Rhi.length}get phi(){return 0!==this.ohi.jhi.length}async Gqt(){if(!this.hFt)throw new b("Invalid state");const t=this.zoi,i=t.newContext();i.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),i.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);const e=new w6(t,i,this.hFt,this.Poi),s=this.ohi.Lhi(i,e.Ioi());this.Boi.lm(i),this.uhi.loi(i),this.Roi=e;try{await s}finally{this.uhi.coi(),this.Uoi=!0}}get uhi(){return this.OZt}get ohi(){return this.Qoi}get whi(){return this.Uoi}static Foi(t,i,e){const s=h.createElement("div");return s.id=e,s.className="theo-freewheel",i.classList.add("theo-freewheel-video"),s.appendChild(i),t.appendChild(s),s}get _hi(){return this.Boi}XWt(t){this.uhi.yoi(t.type)}ge(){this.AVt.style.display="block",this.Fx.style.display="block"}be(){this.AVt.style.display="none",this.Fx.style.display="none"}CJt(t){this.hFt=t}Wn(){this.Uoi=!1,this.hFt=void 0,this.ohi.Wn(),this.Boi.Wn(),this.Roi&&(this.Roi.Wn(),this.Roi=void 0),this.uhi.Wn(),this.Fx.src=""}cn(){this.Wn(),this.OZt.cn(),this.Boi.cn(),this.ohi.cn(),this.AVt.remove(),this.Lo.we.removeChild(this.AVt)}constructor(i,e,n){super(),this.Lo=i,this.Fx=e,this.Uoi=!1,this.Poi=t.createUniqueDisplayBaseId(),this.AVt=t.Foi(i.we,e,this.Poi),this.zoi=new s.tv.freewheel.SDK.AdManager,this.Qoi=new l6(this.AVt,this.Fx),this.Boi=new v6(this.Lo,this.ohi),this.La(this.ohi),this.OZt=new d6(i,n,this.ohi,this.AVt)}};function y6(t){if(s.tv)switch(t){case"preroll":return tv.freewheel.SDK.ADUNIT_PREROLL;case"midroll":return tv.freewheel.SDK.ADUNIT_MIDROLL;case"postroll":return tv.freewheel.SDK.ADUNIT_POSTROLL;case"overlay":return tv.freewheel.SDK.ADUNIT_OVERLAY}}function M6(t,i,e){if(void 0!==i&&j(i)||i<0||i===1/0)return NaN;switch(t){case"preroll":return 0;case"postroll":return e}return lh(i)}var T6;function Cs(t){return t.navigator&&t.navigator.userAgent||""}Dr.kb.PR(new class{get BWt(){return eh.PYt}zR(t){return t.integration===KI.FREEWHEEL}RWt(t,i,e){if(!Boolean(s.tv&&s.tv.freewheel&&s.tv.freewheel.SDK&&s.tv.freewheel.SDK.AdManager))return;const n=new kp(t.Tu,t.Nl,1,[Tw.Yv]);n.lR(t.we);const r=n.XP(Tw.Yv),h=new p6(t,r.aP,t.Tu);return new o6(t,i,n,h,r)}nF(t){const i=Zr(t);Yn(i.cuePoints)||(i.cuePoints=[]);const e=[],s=t.assetDuration||0;for(const t of i.cuePoints){const i=M6(t.adUnit,t.timeOffset,s),n=y6(t.adUnit);!j(i)&&ae(n)?(t.adUnit=n,t.timeOffset=i,e.push(t)):fe.Vv("Invalid adUnit/timeOffset combination. Cue was removed.")}return i.cuePoints=e,i}d1(t,i,e,s){e.CJt(t,i,s)}}),r(),r(),r(),r(),r(),r(),r(),r(),function(t){t.Yoi="Windows 10",t.Goi="Windows 8.1",t.Voi="Windows 8",t.Woi="Windows 7",t.Hoi="Windows Vista",t.qoi="Windows Server 2003",t.Xoi="Windows XP",t.Zoi="Windows Phone",t.Koi="Mac OS X",t.Joi="Mac OS",t.RS="Android",t.QS="iOS",t.$oi="Ubuntu",t.tai="Linux",t.iai="Chrome OS"}(T6||(T6={}));var N6={"Windows 10":/(Windows 10.0|Windows NT 10.0)/i,"Windows 8.1":/(Windows 8.1|Windows NT 6.3)/i,"Windows 8":/(Windows 8|Windows NT 6.2)/i,"Windows 7":/(Windows 7|Windows NT 6.1)/i,"Windows Vista":/Windows NT 6.0/i,"Windows Server 2003":/Windows NT 5.2/i,"Windows XP":/(Windows NT 5.1|Windows XP)/i,"Windows Phone":/Windows Phone/i,Android:/Android/i,Linux:/(Linux(?!.*Ubuntu)|X11)/,Ubuntu:/Ubuntu/i,iOS:/(iPhone|iPad|iPod)/i,"Mac OS X":/Mac OS X/i,"Mac OS":/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i,"Chrome OS":/CrOS/i};function vu(t,i){const e=N6[i];return!!e&&Boolean(Cs(t).match(e))}function D6(t){return vu(t,"Android")}function I6(t){return vu(t,"Windows Phone")}function S6(t){return vu(t,"iOS")&&!I6(t)}function E6(t){return vu(t,"Ubuntu")}var b6,gh=/Windows (NT|Phone) ([0-9.]+)/i,L6=/Mac.*?(OS |OS X )(\d+(([_.])\d+)?(([_.])\d+)?)/i,k6={"Windows 10":gh,"Windows 8.1":gh,"Windows 8":gh,"Windows 7":gh,"Windows Vista":gh,"Windows Server 2003":gh,"Windows XP":gh,"Windows Phone":/Windows Phone ([0-9.]+)/i,Android:/Android (\d+(([_.])\d+)?(([_.])\d+)?)/i,Linux:void 0,Ubuntu:void 0,iOS:/(iPad|iPhone|iPod).*?(OS |os |OS_)(\d+(([_.])\d+)?(([_.])\d+)?)/i,"Mac OS X":L6,"Mac OS":L6,"Chrome OS":void 0};function C6(t,i){const e=k6[i];return e?Cs(t).match(e):null}function x6(t){return t.split(/[_.]/).map((t=>C(t,10)))}function O6(t){if(function(t){return Boolean(Cs(t).match(/Windows/i))}(t)){if(function(t){return vu(t,"Windows 10")}(t))return"Windows 10";if(I6(t))return"Windows Phone";if(function(t){return vu(t,"Windows 8.1")}(t))return"Windows 8.1";if(function(t){return vu(t,"Windows 8")}(t))return"Windows 8";if(function(t){return vu(t,"Windows 7")}(t))return"Windows 7";if(function(t){return vu(t,"Windows Vista")}(t))return"Windows Vista";if(function(t){return vu(t,"Windows Server 2003")}(t))return"Windows Server 2003";if(function(t){return vu(t,"Windows XP")}(t))return"Windows XP"}else{if(D6(t))return"Android";if(S6(t))return"iOS";if(function(t){return vu(t,"Mac OS X")}(t))return"Mac OS X";if(function(t){return vu(t,"Mac OS")}(t))return"Mac OS";if(E6(t))return"Ubuntu";if(function(t){return vu(t,"Chrome OS")}(t))return"Chrome OS";if(function(t){return vu(t,"Linux")&&!E6(t)}(t))return"Linux"}}function j6(t,i){const e=function(t){const i=C6(t,"Windows 10");return i&&i.length>2?x6(i[2]):void 0}(t),s=function(t){const i=C6(t,"Mac OS X");return i&&i.length>2?x6(i[2]):void 0}(t),n=function(t){const i=C6(t,"Android");return i&&i.length>1?x6(i[1]):void 0}(t),r=function(t){const i=C6(t,"iOS");return i&&i.length>3?x6(i[3]):void 0}(t),h=function(t){const i=C6(t,"Chrome OS");return i&&i.length>0?x6(i[0]):void 0}(t);return e?e.length>i?e[i]:void 0:s?s.length>i?s[i]:void 0:n?n.length>i?n[i]:void 0:r?r.length>i?r[i]:void 0:h&&h.length>i?h[i]:void 0}function z6(t){const i=function(t){return j6(t,0)}(t),e=function(t){return j6(t,1)}(t),s=function(t){return j6(t,2)}(t);if(void 0!==i)return void 0===e?""+i:void 0===s?i+"."+e:i+"."+e+"."+s}!function(t){t.eai="Chrome",t.sai="Chrome Mobile",t.nai="Chrome iOS",t.rai="Chromium",t.hai="Firefox",t.oai="Seamonkey",t.aai="Firefox iOS",t.uai="Firefox Mobile",t.cai="Safari",t.lai="Safari Mobile",t.fai="Edge",t._ai="Edge Chromium",t.gai="Edge Mobile",t.wai="IE",t.Aai="Opera",t.vai="Opera Mobile",t.mai="Vivaldi",t.pai="HeadlessChrome",t.yai="Android Browser"}(b6||(b6={}));var P6={Chrome:/Chrome/i,"Chrome Mobile":void 0,"Chrome iOS":/CriOS/i,Chromium:/Chromium/i,HeadlessChrome:/HeadlessChrome/i,Firefox:/Firefox/i,Seamonkey:/Seamonkey/i,"Firefox iOS":/FxiOS/i,Safari:/Safari/i,Edge:/Edge\/\d+/i,"Edge Chromium":/Edg\/\d+/i,IE:/Trident/i,Opera:/Opera|OPR/i,Vivaldi:/Vivaldi/i,"Android Browser":void 0};function ri(t,i){const e=P6[i];return!!e&&Boolean(Cs(t).match(e))}function B6(t){return Boolean(Cs(t).match(/Mobi/i))}function R6(t){return Boolean(t.chrome&&t.navigator&&t.navigator.vendor&&/google/i.test(t.navigator.vendor))||U6(t)}function U6(t){return ri(t,"Chrome iOS")}function Q6(t){return ri(t,"Firefox")&&!Y6(t)}function F6(t){return ri(t,"Firefox Mobile")&&!Y6(t)&&B6(t)}function Y6(t){return ri(t,"Seamonkey")}function G6(t){return ri(t,"Firefox iOS")&&!Y6(t)}function V6(t){return ri(t,"Safari")&&!ri(t,"Chrome")&&!_n.eE}function W6(t){return Boolean(t8(t))}function H6(t){return ri(t,"Edge")}function q6(t){return ri(t,"Edge Chromium")}function X6(t){return ri(t,"IE")}function Z6(t){return ri(t,"Vivaldi")}var K6,J6=/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,$6={Chrome:J6,"Chrome Mobile":J6,"Chrome iOS":/CriOS\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,Chromium:J6,HeadlessChrome:J6,Firefox:/Firefox\/([0-9.]+)/i,"Firefox iOS":/FxiOS\/([0-9.]+)/i,Safari:/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/,"Safari Mobile":void 0,Edge:/Edge\/(\d+)/i,"Edge Chromium":/Edg\/(\d+)/i,"Edge Mobile":void 0,IE:/(MSIE |Trident.*?rv:)(\d+)/i,Opera:/(OPR\/(\d+\.\d+))|(Opera(?=.*Version\/((\d+)\.(\d+))))/i,"Opera Mobile":void 0,Vivaldi:/Vivaldi\/((\d+)\.(\d+)\.(\d+)(?:\.(\d+))?)/i,"Android Browser":void 0};function kr(t,i){const e=$6[i];return e?Cs(t).match(e):null}function t8(t){return kr(t,"Opera")}function i8(t){const i=function(t){return kr(t,"Firefox")}(t);return i?S(i[1]):0}function e8(t){const i=function(t){return kr(t,"Firefox iOS")}(t);return i?S(i[1].split(".")[0]):0}function s8(t){const i=function(t){return kr(t,"Safari")}(t);return i?S(i[2].split(".")[0]):0}function n8(t){const i=function(t){return kr(t,"Edge")}(t);return i?S(i[1]):0}function r8(t){const i=function(t){return kr(t,"Edge Chromium")}(t);return i?S(i[1]):0}function h8(t){const i=function(t){return kr(t,"IE")}(t);return i?S(i[2]):0}function o8(t){const i=function(t){return kr(t,"Vivaldi")}(t);return i?S(i[1]):0}function a8(t){if(D6(t))return R6(t)?"Chrome Mobile":Q6(t)||F6(t)?"Firefox Mobile":H6(t)?"Edge Mobile":W6(t)?"Opera Mobile":"Android Browser";if(S6(t)){if(R6(t)||U6(t))return"Chrome iOS";if(Q6(t)||G6(t))return"Firefox iOS";if(H6(t))return"Edge Mobile";if(V6(t)||function(t){return V6(t)&&B6(t)}(t))return"Safari Mobile";if(W6(t))return"Opera Mobile"}return function(t){return ri(t,"Chromium")}(t)?"Chromium":function(t){return ri(t,"HeadlessChrome")}(t)?"HeadlessChrome":R6(t)?"Chrome":Q6(t)?"Firefox":V6(t)?"Safari":H6(t)?"Edge":q6(t)?"Edge Chromium":X6(t)?"IE":W6(t)?"Opera":Z6(t)?"Vivaldi":void 0}function u8(t){return Z6(t)?o8(t):U6(t)?Number(function(t){const i=$6["Chrome iOS"];return i&&i.exec(Cs(t))||[]}(t)[1]):R6(t)?Number(function(t){const i=$6.Chrome;return i&&i.exec(Cs(t))||[]}(t)[1]):Q6(t)||F6(t)?i8(t):G6(t)?e8(t):V6(t)?s8(t):H6(t)?n8(t):q6(t)?r8(t):X6(t)?h8(t):W6(t)?function(t){const i=t8(t);return i&&i[0].indexOf("Opera")>-1?S(i[5]):i?S(i[2].split(".")[0]):0}(t):void 0}function c8(t){const i=Cs(t);return i.match(/CrKey|Roku|AFTS|AppleTV|Nexus Player/i)?"settop":i.match(/Xbox|Playstation|Wii|Nintendo/i)?"console":/(iPad|Tablet|(Android(?!.*Mobi))|(Windows(?!.*Phone)(.*Touch))|Kindle|Playbook|Silk|(Puffin(?!.*(IP|AP|WP))))/i.test(i)?"tablet":/Mobi/.test(i)?"mobile":i.match(/GoogleTV|SmartTV|SMART-TV|Internet TV|NetCast|NETTV|boxee|Kylo|DLNADOC|hbbtv|CE-HTML/i)?"smarttv":i.match(/(nuhk|Googlebot|bingbot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/i)?"searchbot":function(t){return Boolean(a8(t))}(t)?"pc":void 0}!function(t){t.Mai="pc",t.Tai="console",t.Nai="settop",t.Dai="mobile",t.Iai="tablet",t.Sai="smarttv",t.Eai="searchbot"}(K6||(K6={}));var l8=class{$Q(t){this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_ID,t.deviceID||function(){let t=yi.Jb("deviceId");if(t)return t;let i=wS();return yi.yz("deviceId",i),i}()),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER,"THEOplayer"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER_VERSION,"6.9.0"),this.bai(t),this.Lai(),this.kai(t),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_VERSION,"3.0"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_BUILDDATE,"2023-04-17 12:00:00"),t.application&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION,t.application),t.applicationVersion&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION_VERSION,t.applicationVersion),t.userAccountID&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.USER_ACCOUNT_ID,t.userAccountID);const i=t.connectionType;i?this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i):(this.Cai(),nd.connection&&nd.connection.addEventListener&&nd.connection.addEventListener("change",this.Cai))}bai(t){this.xai(t);const i=t.deviceManufacturer||Uc&&Uc.manufacturer;i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MANUFACTURER,i);const e=t.deviceModel||Uc&&Uc.model;e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MODEL,e)}xai(t){const i=t.deviceType||function(){const t=c8(self);switch(t){case K6.Tai:return"game-console";case K6.Sai:return"tv";case K6.Nai:return"media-streamer";default:return t}}();i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_TYPE,i)}Lai(){const t=a8(self);t&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER,t);const i=u8(self);void 0!==i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER_VERSION,i.toString())}kai(t){const i=t.deviceOs||O6(self);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS,i);const e=t.deviceOsVersion||z6(self);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS_VERSION,e.toString())}cn(){nd.connection&&nd.connection.removeEventListener&&nd.connection.removeEventListener("change",this.Cai)}constructor(t,i){this.empClient=t,this.agama=i,this.Cai=()=>{const t=fe.mit;switch(t){case"wifi":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,"wlan");break;case"ethernet":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,t);break;case"cellular":const i=function(t){switch(t){case"3g":return"mobile/3G";case"4g":return"mobile/4G";default:return}}(fe.vit);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i)}}}};var d8,io;tr(function(t){return i=>class extends i{L_(t){this.Oai&&this.Oai.QU(),super.L_(t)}cn(){this.Oai&&this.Oai.cn(),super.cn()}constructor(i,e){super(i,e),this.LU=new t,this.Oai=new pS(this,this.LU,e)}}}(class extends hS{zg(t){this.jai=t,this.zai&&(this.LU=function(t,i){const e=function(t,i){switch(i){case"info":return t.LogLevel.INFO;case"debug":return t.LogLevel.DEBUG;case"warning":return t.LogLevel.WARNING;case"error":return t.LogLevel.ERROR;default:return t.LogLevel.FATAL}}(i,t.logLevel);i.setLogLevel(e);const s=new i.EMPClient(t.config);return function(t,i){return t.setExternalConfig(i.config),t}(s,t)}(t,this.zai),this.LU&&(this.Pai=new l8(this.LU,this.zai),this.lo=!0))}JQ(){return this.zai||console.warn("Please load the Agama Library (empclient.min.js) in order to use the integration"),!!this.zai}ZQ(){return this.lo}DQ(t,i){if(this.LU&&this.zai)switch(t){case ku.ZR:this.LU.setMeasurement(this.zai.Measurement.BUFFER_LENGTH,i);break;case ku.KR:this.LU.setMeasurement(this.zai.Measurement.BYTES_RECEIVED,i);break;case ku.$R:this.LU.setMeasurement(this.zai.Measurement.SEGMENT_PROFILE_BITRATE,i);break;case ku.tU:this.LU.setMeasurement(this.zai.Measurement.VIDEO_PROFILE_BITRATE,i);break;case ku.JR:this.LU.setMeasurement(this.zai.Measurement.SEGMENT_READ_BITRATE,i);break;case ku.GR:this.LU.setMeasurement(this.zai.Measurement.HTTP_REQUEST_STATUS_CODE_1XX,i);break;case ku.WR:this.LU.setMeasurement(this.zai.Measurement.HTTP_REQUEST_STATUS_CODE_2XX,i);break;case ku.HR:this.LU.setMeasurement(this.zai.Measurement.HTTP_REQUEST_STATUS_CODE_3XX,i);break;case ku.qR:this.LU.setMeasurement(this.zai.Measurement.HTTP_REQUEST_STATUS_CODE_4XX,i);break;case ku.XR:this.LU.setMeasurement(this.zai.Measurement.HTTP_REQUEST_STATUS_CODE_5XX,i);break;case ku.eU:this.LU.setMeasurement(this.zai.Measurement.PLAYBACK_POSITION,i);break;case ku.sU:this.LU.setMeasurement(this.zai.Measurement.NUMBER_OF_FRAMES_DECODED,i);break;case ku.iU:this.LU.setMeasurement(this.zai.Measurement.NUMBER_OF_FRAMES_DROPPED,i)}}hQ(t,i){if(this.LU&&this.zai)switch(t){case ta.aU:this.LU.setSessionMetadata(this.zai.SessionMetadata.ASSET_DURATION,i);break;case ta.oU:this.LU.setSessionMetadata(this.zai.SessionMetadata.MANIFEST_URI,i);break;case ta.uU:this.LU.setSessionMetadata(this.zai.SessionMetadata.NUMBER_OF_CONTENT_PROFILES,i);break;case ta.dU:this.LU.setSessionMetadata(this.zai.SessionMetadata.SERVICE_NAME,i);break;case ta.cU:this.LU.setSessionMetadata(this.zai.SessionMetadata.CDN,i);break;case ta.lU:this.LU.setSessionMetadata(this.zai.SessionMetadata.CONTENT_TITLE,i);break;case ta.fU:this.LU.setSessionMetadata(this.zai.SessionMetadata.CONTENT_TYPE,i);break;case ta._U:this.LU.setSessionMetadata(this.zai.SessionMetadata.CONTENT_DESCRIPTION,i)}}$Q(){this.Pai&&this.jai&&this.Pai.$Q(this.jai)}KQ(t,i){this.zai&&this.LU&&(this.OQ(),function(t,i,e,s){const n=AS(t,e,s);i.abrSession(n,t.ViewState.INITIAL_BUFFERING)}(this.zai,this.LU,t,i),this.Bai=!0)}cn(){this.Pai&&this.Pai.cn(),this.Rai(iS.gU),this.LU=void 0}WU(t){this.Uai(t)}XU(t,i){this.LU&&this.LU.event(t.code,i)}OQ(){this.LU&&this.Bai&&(this.LU.exitSession(),this.Bai=!1)}Rai(t){if(this.LU&&this.zai&&(this.OQ(),t===iS.gU))this.LU.shutdown(this.zai.ShutdownType.NORMAL_SHUTDOWN)}HU(t,i,e){this.Uai(t,i,e)}Uai(t,i,e){if(this.LU&&this.zai)switch(t){case al._v:this.Qai(this.zai.ViewState.PLAYING,i,e);break;case al.QR:this.Qai(this.zai.ViewState.FAILED,i,e);break;case al.FR:this.Qai(this.zai.ViewState.INITIAL_BUFFERING,i,e);break;case al.vv:this.Qai(this.zai.ViewState.PAUSED,i,e);break;case al.RR:this.Qai(this.zai.ViewState.SEEK,i,e);break;case al.UR:this.Qai(this.zai.ViewState.STALLED,i,e);break;case al.YR:this.Qai(this.zai.ViewState.NO_ACCESS,i,e)}}Qai(t,i,e){if(this.LU)if(i){const s=function(t){return t||""}(e);this.LU.viewStateExtended(t,i.code,s)}else this.LU.viewStateChanged(t)}constructor(){super(),this.lo=!1,this.Bai=!1,this.zai=Ys.Agama}}),iu.P9),r(),r(),r(),r(),r(),function(t){t.PLAY_ALL="play-all",t.PLAY_NONE="play-none",t.PLAY_LAST="play-last"}(d8||(d8={})),r(),function(t){t.VOD="vod",t.LIVE="live"}(io||(io={}));var f8=class{get oa(){return this.Fai.oa}get lt(){return this.hP}get j_(){return this.oP}Yai(t){this.hP=Qh(t),this.oP=t,this.Lo.mo(new me(t))}ca(t){this.Gai.Wn(),this.Vai.iL(),this.Wai=!1,this.Lo.Hai(t)}async v7(t,i){if(this.qai.Wn(),this.Wai=!1,!t||!function(t){return t.sources.some((t=>t.integration===mS.VERIZON_MEDIA))}(t))return await this.Lo.Xai(t,i);try{this.Zai=await this.Kai.gni(t),await this.Lo.Xai(this.Zai,i)}catch(t){this.Yai(new ce(le.MANIFEST_LOAD_ERROR,t.message,t))}}cn(){this.K4.s_(),this.Jai.s_(),this.Lo.rn("currentsourcechange",this.eei),this.Lo.rn("timeupdate",this.Yni),this.Lo.rn("ended",this.Wii),this.Lo.rn("loadeddata",this.bd);for(const t of this.Gai.VYt.Vu)t.rn("$ai",this.tui),t.rn("s7",this.Zii),t.rn("e7",this.Kii);this.Gai.VYt.rn("J9",this.iui),this.Gai.VYt.rn("K9",this.eui),this.Gai.cn(),this.mVt&&(this.mVt.Xf(),this.mVt=void 0),this.Wai=!1}async fetchAssetInfo(t){if(t&&t.integrationData)try{const i=await this.sui.Rat(t.integrationData.source.prefix,t.integrationData.source.id,this.Jai.i_,t.integrationData.preplayResponse.sid);this.Fai.nui(i),this.Vai.rui(i,this.Gai.VYt.Vu)}catch(t){0}}hui(t){this.Gai.oui(t),this.Gai.G9.forEach((i=>i.aui(t))),this.Gai.uui(this.Lo._g()),this.vVt()}L_(t){this.Gai.W9||(this.K4.s_(),this.K4=new Po,W(this.uni(t,this.K4.i_)))}async uni(t,i){if(Pi(i),t<this.Lo.b_())return void this.cui(t);let e=[];switch(this.Gai.lui){case d8.PLAY_ALL:e=this.Gai.dui(this.Lo.b_(),t),await this.fui(t,e,i);break;case d8.PLAY_LAST:const s=this.Gai.dui(this.Lo.b_(),t).pop();e=s?[s]:[],await this.fui(t,e,i);break;case d8.PLAY_NONE:this._ui(t)}}cui(t){const i=Gr(this.Gai.VYt.Vu,(i=>i.Jet.ar(t)));i?this.Lo.gui(i.Fm):this.Lo.gui(t)}_ui(t){const i=this.Gai.dui(this.Lo.b_(),t).pop();i&&i.Jet.ar(t)?this.Lo.gui(i.Ym):this.Lo.gui(t)}async fui(t,i,e){for(const t of i)await this.wui(t,e);const s=i[i.length-1];s&&s.Jet.ar(t)?this.Lo.b_()<t&&this.Lo.gui(s.Ym):this.Lo.gui(t)}async wui(t,i){t.rn("$ai",this.tui);const e=Promise.race([t.v_("e7",i),t.v_("$ai",i)]);this.hui(this.Lo.b_()),t.Yh||this.Lo.gui(t.Fm),await e,t.ln("$ai",this.tui)}vVt(){const t=Gr(this.Gai.G9,(t=>t.Aui.length>0));if(t){const i=t.Aui[0];this.mVt||(this.mVt=new Qn(this.Lo.we),this.mVt.ln("clickstart",this.vui)),this.mVt.EGt=i}else this.mVt&&(this.mVt.Xf(),this.mVt=void 0)}constructor(t,i,e,s,n,r,h){this.Lo=t,this.qai=i,this.Kai=e,this.Gai=s,this.Fai=n,this.sui=r,this.Vai=h,this.hP=void 0,this.oP=void 0,this.K4=new Po,this.Jai=new Po,this.mui=void 0,this.Wai=!1,this.mVt=void 0,this.eei=t=>{const i=t.currentSource;if(!i||!i.integrationData)return;const{preplayResponse:e,source:s}=i.integrationData;this.Fai.pui(e),e&&e.type===io.VOD&&e.ads&&this.Gai.rui(e.ads),this.qai.yui=i.integrationData,s.assetInfo&&W(this.fetchAssetInfo(i))},this.Qti=()=>{this.Wai=!0},this.Yni=()=>{this.Wai&&this.hui(this.Lo.b_())},this.Wii=()=>{this.Wai&&(this.hui(1/0),this.Wai=!1)},this.bd=()=>{W(this.qai.gn())},this.tui=t=>{this.K4.s_(),this.K4=new Po,W(this.uni(t.Ul.Ym,this.K4.i_))},this.Zii=()=>{1!==this.Lo.Z_&&(this.mui=this.Lo.Z_,this.Lo.Z_=1)},this.Kii=()=>{void 0!==this.mui&&(this.Lo.Z_=this.mui,this.mui=void 0)},this.iui=t=>{t.Ul.ln("$ai",this.tui),t.Ul.ln("s7",this.Zii),t.Ul.ln("e7",this.Kii)},this.eui=t=>{t.Ul.rn("$ai",this.tui),t.Ul.rn("s7",this.Zii),t.Ul.rn("e7",this.Kii)},this.vui=()=>{this.Lo.Pg()},this.Lo.ln("currentsourcechange",this.eei),this.Lo.ln("play",this.Qti),this.Lo.ln("timeupdate",this.Yni),this.Lo.ln("ended",this.Wii),this.Lo.ln("loadeddata",this.bd),this.Gai.VYt.ln("J9",this.iui),this.Gai.VYt.ln("K9",this.eui)}};r(),r();var _8=sn({breaksIndex:Ii,adsIndex:Ii,startTime:Ii,endTime:Ii}),g8=sn({index:Ii,timeOffset:Ii}),w8=sn({duration:Ii,apiFramework:K(pi,KD),creative:pi,mimeType:pi,width:Ii,height:Ii,companions:wt(ZD),extensions:K(rn,wt(ZD)),fw_parameters:K(rn,Bu(pi)),events:Bu(wt(pi))}),A8=sn({type:ni(["linear","nonlinear"]),position:ni(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:Ii,duration:Ii,ads:wt(w8),events:Bu(wt(pi))}),v8=sn({breaks:wt(A8),breakOffsets:wt(g8),placeholderOffsets:wt(_8)}),m8=sn({fairplayCertificateURL:K(rn,pi),widevineLicenseURL:K(rn,pi),playreadyLicenseURL:K(rn,pi)}),p8={type:ni($D(io)),playURL:pi,prefix:pi,sid:pi,drm:K(rn,m8)},y8=sn(oe({},p8,{type:ni([io.VOD]),ads:v8,interstitialURL:K(pi,KD,rn)})),M8=K(y8,sn(oe({},p8,{type:ni([io.LIVE])})));r();var T8,N8=pi,D8=sn({userId:pi,externalId:K(pi,wt(pi))});!function(t){t[t.AD_IMPRESSIONS=1]="AD_IMPRESSIONS",t[t.FW_VIDEO_VIEWS=2]="FW_VIDEO_VIEWS",t[t.LINEAR_AD_DATA=4]="LINEAR_AD_DATA"}(T8||(T8={}));var I8=class{async Rat(t){try{return this.Mui(t)}catch(t){throw t}}async Mui(t){const i=await async function(t){const i=t.prefix,e=S8[t.assetType],s=function(t){if(wt(N8).tz(t))return 1===t.length?t[0]:t.join(",")+"/multiple";if(N8.tz(t))return t;if(D8.tz(t)&&Yn(t.externalId))return 1===t.externalId.length?"ext/"+t.userId+"/"+t.externalId[0]:"ext/"+t.userId+"/"+t.externalId.join(",")+"/multiple";if(D8.tz(t))return"ext/"+t.userId+"/"+t.externalId;throw new k("Invalid asset id")}(t.id),n=await async function(t){if(t&&await fe.HC())return{rmt:"fps",manifest:"m3u8"};if(t&&await fe.YC())return{rmt:"wv",manifest:"mpd"};if(t&&await fe.WC())return{rmt:"pr",manifest:"mpd"};return{}}(t.contentProtected),r=function(t,i){const e=E8(t,i);return e?{"ad.cping":"1","ad.pingf":String(e)}:{}}(t.assetType,t.ping);let h={};Yn(t.preplayParameters)?t.preplayParameters.forEach((t=>{h[t[0]]=t[1]})):h=t.preplayParameters;const o=i+"/preplay/"+e+s+".json";return ua(o,oe({v:"2"},h,n,r,h))}(t),e=this.LS.BI({mS:Kc.GET,Fu:i,pS:Rt.tS}),s=await e,n=oe({},await s.JM(),{type:t.assetType===Pa.ASSET?io.VOD:io.LIVE});return M8.tz(n)||M8.ez(n,"PreplayResponse"),n}constructor(t){this.LS=t}},S8={[Pa.ASSET]:"",[Pa.CHANNEL]:"channel/",[Pa.EVENT]:"event/"};function E8(t,i){const e=t!==Pa.ASSET;return(!e&&i.adImpressions?1:0)+(!e&&i.freeWheelVideoViews?2:0)+(e&&i.linearAdData?4:0)}r(),r();var vr,b8=sn({ad_id:pi,apiFramework:K(KD,pi),companions:wt(ZD),creative:pi,duration:Ii,mimeType:pi,height:Ii,width:Ii,extensions:K(rn,wt(ZD)),fw_parameters:K(rn,Bu(pi))}),L8=sn({breakId:pi,ads:wt(b8),type:ni(["linear","nonlinear"]),position:ni(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:Ii,duration:Ii,height:K(rn,Ii),width:K(rn,Ii),events:Bu(wt(pi))}),k8=sn({breaks:wt(L8)}),C8=sn({next_time:Ii,ads:K(rn,k8),extensions:K(rn,wt(ZD)),error:K(rn,pi),currentBreakEnd:K(rn,Ii)});!function(t){t.Xut="start",t.RR="seek"}(vr||(vr={}));var x8=class{async Rat(t,i){try{return this.Mui(t,i)}catch(t){throw t}}async Mui(t,i){const e=function(t){const i={v:"3",pt:String(t.currentTime)};(function(t){return void 0!==t.seekTime})(t)&&t.hasFreeWheelVideoViews&&(i.ft=String(t.seekTime));t.event&&(i.ev=t.event);return ua(t.zonePrefix+"/session/ping/"+t.sessionId+".json",oe({},i))}(t),s=this.LS.BI({mS:Kc.GET,Fu:e,pS:Rt.tS,i_:i}),n=await s,r=await n.JM();return C8.tz(r)||C8.ez(r,"PingResponse"),r}constructor(t){this.LS=t}};r(),r();var O8=class extends Ha{get UI(){return this.QI}ha(){return new j8(this.QI)}constructor(t){super("Tui"),this.QI=t}},j8=class extends gg{constructor(t){super("pingresponse"),this.response=t}};r();var z8=class extends Ha{get lt(){return this.hP}ha(){return new P8(this.hP)}constructor(t){super("Nui"),this.hP=t}},P8=class extends gg{constructor(t){super("pingerror"),this.error=t}},B8=class extends i{set yui(t){this.Dui=t}get Iui(){return this.Sui}async gn(){const t=this.Dui;if(!t)return;0!==E8(t.source.assetType,t.source.ping)&&(this.Sui=this.Lo._g().start(0),await this.Eui(vr.Xut),this.Lo.ln("timeupdate",this.bui),this.Lo.ln("seeking",this.Lui))}async Eui(t,i){const e=this.Dui.preplayResponse,s={};if(j(this.Sui))return void 0;if(z_(this.kui)&&Q_(this.kui,this.Lo.b_()-this.Sui))return;void 0!==i&&(s.seekTime=i),void 0!==t&&(s.event=t);let n,r=this.Lo.b_()-this.Sui;t===vr.Xut?r=0:t!==vr.RR&&this.Cui&&(r=x.min(r,this.Cui)),this.kui=r;try{var h;const t=await this.xui.Rat(oe({zonePrefix:e.prefix,sessionId:e.sid,currentTime:r,hasFreeWheelVideoViews:null==(h=this.Dui)?void 0:h.source.ping.freeWheelVideoViews},s),this.kx.i_);this.mo(new O8(t)),this.Cui=-1!==t.next_time?t.next_time:void 0,n=t.error}catch(t){Oi(t)||(n=t.message)}finally{n&&this.mo(new z8(n))}}Wn(){this.Cui=void 0,this.Dui=void 0,this.Sui=NaN,this.Oui=!1,this.jui=NaN,this.kui=void 0,this.Lo.rn("seeking",this.Lui),this.Lo.rn("timeupdate",this.bui),this.zui()}zui(){this.kx.s_(),this.kx=new Po}cn(){this.Wn()}constructor(t,i){super(),this.xui=t,this.Lo=i,this.Sui=NaN,this.Cui=void 0,this.Oui=!1,this.jui=NaN,this.kx=new Po,this.kui=void 0,this.bui=async()=>{const t=this.Lo.b_();if(this.jui=t,this.Oui||Wo(this.Cui)||j(this.Sui))return;this.Sui+this.Cui<=t&&(this.Oui=!0,await this.Eui(),this.Oui=!1)},this.Lui=()=>{if(this.Lo.b_()===this.Sui)return;this.Oui&&this.zui(),this.jui=this.Lo.b_();const t=this.jui-(this.Sui||0);j(t)?W(this.Eui(vr.RR,0)):W(this.Eui(vr.RR,t))}}};r();var R8=class{async gni(t){const i=[];for(const e of t.sources)if(U8(e))try{const s=F8({source:e,preplayResponse:await this.Pui.Rat(e)},t,this.WW);s.src&&(s.src=ua(s.src,e.playbackUrlParameters)),i.push(s)}catch(t){0}else i.push(e);if(0!==t.sources.length&&0===i.length)throw new b("Fatal: unable to play VerizonMediaSources.");return oe({},t,{sources:i})}constructor(t,i){this.Pui=t,this.WW=i}};function U8(t){return"verizon-media"===t.integration}function Q8(t){if(t.sources)if(Yn(t.sources)){for(const i of t.sources)if(!ae(i)&&"verizon-media"===i.integration)return!0}else if(!ae(t.sources))return"verizon-media"===t.sources.integration;return!1}function F8(t,i,e){const s=t.preplayResponse;let n;t.source.contentProtected&&s.drm&&(n={integration:"uplynk"},s.drm.fairplayCertificateURL&&(n.fairplay={certificateURL:s.drm.fairplayCertificateURL}),s.drm.widevineLicenseURL&&(n.widevine={licenseAcquisitionURL:s.drm.widevineLicenseURL}),s.drm.playreadyLicenseURL&&(n.playready={licenseAcquisitionURL:s.drm.playreadyLicenseURL}));const r=LS({src:s.playURL,contentProtection:n,useNativePlayback:t.source.useNativePlayback,hls:t.source.hls,dash:t.source.dash},i,e);return r.integrationData=t,r}r(),r(),r();var Y8=class extends Ha{ha(){return new G8(this.Ul.oa)}constructor(t,i){super("s7"),this.Ul=t,this.Ay=i}},G8=class extends gg{constructor(t){super("adbreakbegin"),this.adBreak=t}};r();var V8=class extends Ha{ha(){return new W8(this.Ul.oa)}constructor(t,i){super("e7"),this.Ul=t,this.Ay=i}},W8=class extends gg{constructor(t){super("adbreakend"),this.adBreak=t}};r();var H8=class extends Ha{ha(){return new q8(this.Ul.oa)}constructor(t){super("$ai"),this.Ul=t}},q8=class extends gg{constructor(t){super("adbreakskip"),this.adBreak=t}};r(),r();var X8=class extends Ha{ha(){return new Z8(this.Ul.oa)}constructor(t){super("mJt"),this.Ul=t}},Z8=class extends gg{constructor(t){super("updateadbreak"),this.adBreak=t}},K8=class extends ha{get oa(){return this.Ua||(this.Ua=function(t){let i;const e={get startTime(){return t.Fm},get endTime(){return t.Ym},get duration(){return t.ct},get ads(){return t.Nc.oa},get skipOffset(){return t.gUt},set skipOffset(i){t.gUt=i},addEventListener(t,e){i.ln(t,e)},removeEventListener(t,e){i.rn(t,e)}};return i=new ma(t,e),e}(this)),this.Ua}get Fm(){return this.$m}get Ym(){return this.JL?this.$m+this.JL:void 0}Bui(t){this.JL=t-this.Fm;for(const i of this.Nc.Vu)i.Fm>t&&this.Nc.wm(i);this.mo(new X8(this))}get ct(){return this.JL}get Jet(){const t=this.Ym;return z_(t)?new Ki([this.Fm,t]):Ki.KB()}get Nc(){return this.Tc}get Rui(){return this.Uui}get Yh(){return this.Kh}get gUt(){return this.Zni?-1:this.wUt}set gUt(t){this.Zni||(this.wUt=t)}Awt(t){return t>=this.Fm&&(Wo(this.ct)||t<=this.Fm+this.ct)}Qui(t){return-1!==this.gUt&&(!!z_(this.Ym)&&t-this.Fm>=this.gUt)}uT(){this.Tc.Vu.forEach((t=>t.uT())),this.mo(new H8(this))}Fui(t){const i=z_(this.Ym)&&t>=this.Ym,e=this.Fm<=t&&!i&&!this.Yh,s=this.Yh&&this.Ym&&t>=this.Ym;e&&(this.Kh=!0,this.mo(new Y8(this,this.Fm))),this.Tc.Vu.forEach((i=>i.Fui(t))),s&&(this.Uui=!0,this.Kh=!1,this.mo(new V8(this,this.Ym)))}constructor(t,i,e,s,n){super(),this.$m=t,this.JL=i,this.Tc=e,this.Zni=s,this.Kh=!1,this.Uui=!1,this.wUt=n}};r(),r();var J8=class extends Ha{ha(){return new $8(this.t7.oa)}constructor(t,i){super("n7"),this.t7=t,this.Ay=i}},$8=class extends gg{constructor(t){super("adbegin"),this.ad=t}};r();var t9=class extends Ha{ha(){return new i9(this.t7.oa)}constructor(t,i){super("r7"),this.t7=t,this.Ay=i}},i9=class extends gg{constructor(t){super("adend"),this.ad=t}};r(),r();var e9=class extends Ha{ha(){return new s9(this.t7.oa)}constructor(t){super("Yui"),this.t7=t}},s9=class extends gg{constructor(t){super("removead"),this.ad=t}},mo=class extends H0{h1t(t){}c1t(t){this.mo(new e9(t))}constructor(){super()}};r();var n9=class extends Ha{ha(){return new r9(this.t7.oa)}constructor(t){super("fJt"),this.t7=t}},r9=class extends gg{constructor(t){super("adfirstquartile"),this.ad=t}},h9=class extends Ha{ha(){return new o9(this.t7.oa)}constructor(t){super("_Jt"),this.t7=t}},o9=class extends gg{constructor(t){super("admidpoint"),this.ad=t}},a9=class extends Ha{ha(){return new u9(this.t7.oa)}constructor(t){super("gJt"),this.t7=t}},u9=class extends gg{constructor(t){super("adthirdquartile"),this.ad=t}},c9=class extends Ha{ha(){return new l9(this.t7.oa)}constructor(t){super("Gui"),this.t7=t}},l9=class extends gg{constructor(t){super("adcomplete"),this.ad=t}};r();var d9=class t extends ha{static Vui(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.Vui(i,e))),e.extensions,e.fw_parameters,e.events,void 0)}static Wui(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.Wui(i,e))),e.extensions,e.fw_parameters,void 0,e.ad_id)}get oa(){return this.Ua||(this.Ua=function(t){let i;const e={get apiFramework(){return t.ERt},get companions(){return t.vRt.oa},get creative(){return t.Hui},get duration(){return t.ct},get endTime(){return t.Ym},get events(){return t.hY},get extensions(){return t.qui},get freeWheelParameters(){return t.Xui},get height(){return t.Ti},get mimeType(){return t.rY},get startTime(){return t.Fm},get width(){return t.ji},addEventListener(t,e){i.ln(t,e)},removeEventListener(t,e){i.rn(t,e)}};return i=new ma(t,e),e}(this)),this.Ua}get Fm(){return this.$m}get Ym(){return this.$m+this.JL}get ct(){return this.JL}get ERt(){return this.bRt}get Hui(){return this.Zui}get rY(){return this.pY}get ji(){return this.pk}get Ti(){return this.yk}get hY(){return this.wR}get vRt(){return this.mRt}get qui(){return this.Kui}get Xui(){return this.Jui}get Yh(){return this.Kh}get Aui(){var t;return null!=(t=this.wR.clickthroughs)?t:[]}Fui(t){const i=this.Fm<=t&&t<this.Ym,e=i&&!this.Yh,s=!i&&this.Yh;e&&(this.$ui=!1,this.tci=!1,this.ici=!1,this.eci=!1,this.Kh=!0,this.mo(new J8(this,this.Fm))),s&&(this.Kh=!1,this.mo(new t9(this,this.Ym)))}aui(t){const i=(t-this.Fm)/this.ct;!this.$ui&&i>=.25&&(this.$ui=!0,this.mo(new n9(this))),!this.tci&&i>=.5&&(this.tci=!0,this.mo(new h9(this))),!this.ici&&i>=.75&&(this.ici=!0,this.mo(new a9(this))),!this.eci&&i>=.9999&&(this.eci=!0,this.mo(new c9(this)))}uT(){this.$ui=!0,this.tci=!0,this.ici=!0,this.eci=!0}cn(){this.rn("n7",this.sci),this.rn("r7",this.nci)}constructor(t,i,e,s,n,r,h,o,a=[],u={},c={},l){super(),this.$m=t,this.JL=i,this.bRt=e,this.Zui=s,this.pY=n,this.pk=r,this.yk=h,this.Kui=a,this.Jui=u,this.wR=c,this.nUt=l,this.mRt=new mo,this.Kh=!1,this.$ui=!1,this.tci=!1,this.ici=!1,this.eci=!1,this.sci=()=>this.aui(this.$m),this.nci=()=>this.aui(this.Ym),this.mRt.o1t(o),this.ln("n7",this.sci),this.ln("r7",this.nci)}};r(),r();var f9=class extends Ha{ha(){return new _9(this.Ul.oa)}constructor(t){super("J9"),this.Ul=t}},_9=class extends gg{constructor(t){super("addadbreak"),this.adBreak=t}};r();var g9,w9,A9,v9=class extends Ha{ha(){return new m9(this.Ul.oa)}constructor(t){super("K9"),this.Ul=t}},m9=class extends gg{constructor(t){super("removeadbreak"),this.adBreak=t}},p9=class extends H0{h1t(t){this.mo(new f9(t))}c1t(t){this.mo(new v9(t))}constructor(){super()}},y9=class{get oa(){return this.Ua||(this.Ua=function(t){return{get adBreaks(){return t.VYt.oa},get currentAdBreak(){if(t.W9)return t.W9.oa},get currentAds(){return t.W9?t.W9.Nc.oa:(new mo).oa},skip(){t.uT()}}}(this)),this.Ua}get VYt(){return this.dGt}get W9(){return Gr(this.dGt.Vu,(t=>t.Yh))}get G9(){return this.W9?this.W9.Nc.Vu.filter((t=>t.Yh)):[]}get rci(){if(0===this.VYt.U||0===this.hci._g().length)return;const t=this.hci._g().end(this.hci._g().length-1);return Gr(this.VYt.Vu,(i=>i.Awt(t)))}get lui(){return this.aci}uui(t){if(0===t.length)return;const i=Ki.mn(t);for(const t of this.dGt.Vu.slice())z_(t.Ym)&&i.gn(0)>t.Ym&&this.dGt.wm(t)}rui(t){const i=!function(t){return z_(t.breakOffsets)}(t),e=i?this.qai.Iui:0;for(const s of t.breaks){if(0===s.ads.length)continue;let t=s.timeOffset+e;const n=new mo;let r=0;for(const e of s.ads){const s=i?d9.Wui(t,e):d9.Vui(t,e);n.gm(s),t+=s.ct,r+=s.ct}const h=s.timeOffset+e,o=i?void 0:s.duration,a=new K8(h,o,n,i,this.uci);i&&this.cci.push({aRt:a,IIt:h+r}),this.dGt.gm(a)}}lci(t){const i=this.rci;i&&i.Bui(t+this.qai.Iui)}oui(t){this.dci=t,this.dGt.Vu.forEach((i=>i.Fui(t)))}uT(){const t=this.dci,i=this.W9;t&&i&&i.Qui(t)&&i.uT()}dui(t,i){let e=[];for(const s of this.VYt.Vu)!s.Rui&&s.Fm>=t&&s.Fm<i&&e.push(s);return e}cn(){this.hci.rn("timeupdate",this.fci),this.qai.rn("Tui",this._ci)}Wn(){for(const t of this.VYt.Vu){for(const i of t.Nc.Vu)i.Bo();t.Bo()}this.VYt.iL(),this.dci=void 0,this.cci=[]}constructor(t,i,e,s){this.cci=[],this._ci=t=>{t.UI.ads&&this.rui(t.UI.ads),t.UI.currentBreakEnd&&this.lci(t.UI.currentBreakEnd)},this.fci=t=>{if(0===this.cci.length||0===this.hci._g().length)return;const i=this.hci._g().end(this.hci._g().length-1);for(const t of this.cci.slice())z_(t.aRt.ct)?Et(this.cci,t):t.IIt<i&&(t.aRt.Bui(t.IIt),Et(this.cci,t))},this.hci=t,this.qai=i,this.dGt=new p9,this.uci=e,this.aci=s,t.ln("timeupdate",this.fci),this.qai.ln("Tui",this._ci)}};r(),r(),r(),function(t){t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.G=1]="G",t[t.PG=2]="PG",t[t.PG_13=3]="PG_13",t[t.R=4]="R",t[t.NC_17=5]="NC_17",t[t.X=6]="X",t[t.NOT_RATED=7]="NOT_RATED"}(g9||(g9={})),function(t){t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.TV_Y=1]="TV_Y",t[t.TV_Y7=2]="TV_Y7",t[t.TV_G=3]="TV_G",t[t.TV_PG=4]="TV_PG",t[t.TV_14=5]="TV_14",t[t.TV_MA=6]="TV_MA",t[t.NOT_RATED=7]="NOT_RATED"}(w9||(w9={})),function(t){t[t.ADULT_LANGUAGE=1]="ADULT_LANGUAGE",t[t.SEXUAL_SITUATIONS=2]="SEXUAL_SITUATIONS",t[t.VIOLENCE=4]="VIOLENCE",t[t.DRUGS=8]="DRUGS"}(A9||(A9={}));var M9=class t{static gci(i,e,s){const n=new OA(i.rating_flags);return new t(e,s,i.duration,Boolean(i.audio_only),i.boundary_details,Boolean(i.error),i.tv_rating,i.max_slice,i.thumb_prefix,i.slice_dur,i.movie_rating,i.owner,i.meta,i.rates,i.thumbs,i.poster_url,i.default_poster_url,i.desc,n.xm(1),n.xm(2),n.xm(4),n.xm(8),i.external_id,Boolean(i.is_ad),i.asset)}get oa(){return this.Ua||(this.Ua=function(t){return{startTime:t.Fm,endTime:t.Ym,duration:t.ct,audioOnly:t.wci,boundaryDetails:t.Aci,error:t.lt,tvRating:t.vci,maxSlice:t.mci,thumbPrefix:t.pci,sliceDuration:t.yci,movieRating:t.Mci,ownerId:t.Tci,metadata:t.hI,rates:t.Nci,thumbnailResolutions:t.Dci,posterUrl:t.Ici,defaultPosterUrl:t.Sci,description:t.dN,hasAdultLanguage:t.Eci,hasSexualSituations:t.bci,hasViolence:t.Lci,hasDrugSituations:t.kci,externalId:t.Cci,isAd:t.xci,assetId:t.Oci}}(this)),this.Ua}constructor(t,i,e,s,n,r,h,o,a,u,c,l,d,f,_,g,w,A,v,m,p,y,M,T,N){this.Fm=t,this.Ym=i,this.ct=e,this.wci=s,this.Aci=n,this.lt=r,this.vci=h,this.mci=o,this.pci=a,this.yci=u,this.Mci=c,this.Tci=l,this.hI=d,this.Nci=f,this.Dci=_,this.Ici=g,this.Sci=w,this.dN=A,this.Eci=v,this.bci=m,this.Lci=p,this.kci=y,this.Cci=M,this.xci=T,this.Oci=N}};var T9=sn({duration:Ii,offset:Ii}),N9=sn({c3:T9}),D9=sn({c7:T9}),I9=sn({halftime:T9}),S9=ni($D(w9)),E9=ni($D(g9)),b9=sn({width:K(rn,Ii),prefix:pi,bw:Ii,bh:Ii,height:K(rn,Ii)}),L9=sn({audio_only:Ii,boundary_details:K(rn,wt(K(N9,D9,I9))),error:Ii,tv_rating:S9,max_slice:Ii,thumb_prefix:pi,slice_dur:Ii,movie_rating:E9,owner:pi,meta:ZD,rates:wt(Ii),thumbs:wt(b9),poster_url:pi,duration:Ii,default_poster_url:pi,desc:pi,rating_flags:Ii,external_id:pi,is_ad:Ii,asset:pi}),k9=class{async Rat(t,i,e,s){const n=function(t,i,e){if(N8.tz(i))return[C9(t,i,e)];if(wt(N8).tz(i))return i.map((i=>C9(t,i,e)));if(D8.tz(i)){return(Yn(i.externalId)?i.externalId:[i.externalId]).map((s=>C9(t,"ext/"+i.userId+"/"+s,e)))}throw new k("Invalid asset id")}(t,i,s),r=n.map((t=>hu((()=>this.Mui(t)),e)));return(await Promise.all(r)).filter(z_)}async Mui(t){const i=this.LS.BI({mS:Kc.GET,Fu:t,pS:Rt.tS}),e=await i,s=await e.JM();return L9.tz(s)||L9.ez(s,"AssetInfoResponse"),s}constructor(t){this.LS=t}};function C9(t,i,e){return e?t+"/player/assetinfo/"+i+".json?pbs="+e:t+"/player/assetinfo/"+i+".json"}r(),r();var x9=class extends Ha{ha(){return new O9(this.Xl.oa)}constructor(t){super("jci"),this.Xl=t}},O9=class extends gg{constructor(t){super("removeasset"),this.asset=t}};r();var j9=class extends Ha{ha(){return new z9(this.Xl.oa)}constructor(t){super("zci"),this.Xl=t}},z9=class extends gg{constructor(t){super("addasset"),this.asset=t}},P9=class extends H0{rui(t,i){let e,s=0;for(const n of t){e=s+n.duration;for(const t of i)s<=t.Fm&&t.Fm<e&&(e+=t.ct||0);this.gm(M9.gci(n,s,e)),s=e}}h1t(t){this.mo(new j9(t))}c1t(t){this.mo(new x9(t))}constructor(){super()}};r(),r();var B9=class extends Ha{ha(){return new R9(this.UI)}constructor(t){super("Pci"),this.UI=t}},R9=class extends gg{constructor(t){super("preplayresponse"),this.response=t}};r();var Zi,U9=class extends Ha{ha(){return new Q9(this.UI)}constructor(t){super("Bci"),this.UI=t}},Q9=class extends gg{constructor(t){super("assetinforesponse"),this.response=t}},F9=class extends ha{pui(t){t&&this.mo(new B9(Zr(t)))}nui(t){t.forEach((t=>this.mo(new U9(t))))}get oa(){return this.Ua||(this.Ua=this.ha()),this.Ua}ha(){let t;const i=this,e={get ads(){return i.Gai.oa},get assets(){return i.Vai.oa},addEventListener(i,e){t.ln(i,e)},removeEventListener(i,e){t.rn(i,e)}};return t=new ma(i,e),e}constructor(t,i,e){super(),this.Gai=t,this.Vai=i,this.qai=e,e.ln("Tui",this.Ds),e.ln("Nui",this.Ds)}},Y9=class{Rci(t,i){const e=new I8(t.MO),s=new x8(t.MO),n=function(t){if(t.verizonMedia&&z_(t.verizonMedia.defaultSkipOffset)){const i=t.verizonMedia.defaultSkipOffset;return R_(i)?i:-1}return-1}(i),r=function(t){const i=t.verizonMedia?t.verizonMedia.onSeekOverAd:void 0;return function(t){if(!t)return"play-none";switch(t.toLowerCase()){case"play-all":return"play-all";case"play-none":default:return"play-none";case"play-last":return"play-last"}}(i)}(i),h=new B8(s,t),o=new R8(e,i),a=new y9(t,h,n,r),u=new k9(t.MO),c=new P9,l=new F9(a,c,h);return new f8(t,h,o,a,l,u,c)}};tr((function(t){return class extends t{Hai(t){super.ca(t)}Xai(t,i){return super.v7(t,i)}gui(t){super.L_(t)}O_(){var t;return null!=(t=this.Uci.lt)?t:super.O_()}z_(){var t;return null!=(t=this.Uci.j_)?t:super.z_()}L_(t){this.Uci.L_(t)}ca(t){this.Uci.ca(t)}v7(t,i){return this.Uci.v7(t,i)}ha(){const t=this.Uci.oa;return Ou(super.ha(),{get verizonMedia(){return t}})}cn(){this.Uci.cn(),super.cn()}constructor(t,i){super(t,i),this.Uci=(new Y9).Rci(this,i)}}}),iu.j9),r(),r(),r(),r(),function(t){t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error"}(Zi||(Zi={})),r();var G9=class extends t0{ha(){return Kn(this)}get UYt(){return eh.BYt}get Fm(){return this.$m}get JBt(){return this.zRt}constructor(t,i,e,s){super(t,i),this.zRt=s,this.$m=e}};r();var V9=class extends J${get gEt(){return this.Qci}get UYt(){return eh.BYt}constructor(t,i,e){if(super(t,t,i),e){const t=new Date(e);bD(t)&&(this.Qci=t)}}},W9=class{Ow(){this.Lo.ln(qo._v,this.zP),this.Lo.ln(t.yh,this.iPt),this.Lo.ln(t.bh,this.ePt),this.Lo.ln(t.YA,this.We),this.Lo.ln(t.NA,this.wh),this.Lo.ln(t.XA,this.Kl),this.Lo.ln(t.ZA,this.qVt),this.Lo.ln("presentationmodechange",this.Fci)}Cw(){this.Lo.rn(qo._v,this.zP),this.Lo.rn(t.yh,this.iPt),this.Lo.rn(t.bh,this.ePt),this.Lo.rn(t.YA,this.We),this.Lo.rn(t.NA,this.wh),this.Lo.rn(t.XA,this.Kl),this.Lo.rn(t.ZA,this.qVt),this.Lo.rn("presentationmodechange",this.Fci)}get Yci(){return this.Gci}get G9(){const t=this.Yci;if(!t)return[];const i=[],e=this.Vci();for(const s of t.Nc)e>=s.Fm&&this.Ooi<=s.Fm+s.ct&&i.push(s);return i}Vci(){return this.Lo.b_()-this.Wci}Hci(){if(this.qci)return;if(this.Lo.kd()!==1/0)return void(0===this.Xci.length&&(this.qci=this.Zci()));const t=()=>{var t;null==(t=this.Kci)||t.Xf(),this.Kci=void 0,this.qci=void 0};this.Kci=new Po,this.qci=this.Jci(this.Kci.i_).catch(this.Q1).then(t,t)}async $ci(){const t=x.min(1e3*2**this.tli,3e4);try{var i;await be(t,null==(i=this.Kci)?void 0:i.i_),this.tli++}catch(t){if(Oi(t))return void(this.tli=0)}this.Hci()}async Jci(t){for(;Pi(t),!this.Lo.q_;){const i=fe.h_()-this.ili;if(i>1e4)await this.Zci(t),this.ili=fe.h_(),this.tli=0;else{const e=1e4-i;await be(e,t)}}}eli(t){const i=t.gEt;if(i&&this.Lo.N_&&0===this.Wci&&!this.sli&&0!==x.floor(this.Lo._g().start(0))){const e=(this.Lo.N_.getTime()-i.getTime())/1e3,s=this.Lo.b_()-t.hEt;this.Wci=s-e}}async Zci(t){try{const i=await this.Lo.MO.BI({Fu:this.nli}),e=await i.vj(t);if(0===e.avails.length)return void(0!==this.Xci.length&&(this.Xci=[]));if(e.avails.length===this.Xci.length&&e.avails[0].startTimeInSeconds===this.Xci[0].hEt)return void this.eli(this.Xci[0]);const s=[];for(const t of e.avails){const i=new V9(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const e of t.ads){const t=new G9(i,zr._Qt,e.startTimeInSeconds,e.trackingEvents);t.xKt(e.adId,e.width,e.height,e.durationInSeconds,[],e.skipoffset),i.LKt(t)}s.push(i),this.eli(i)}this.Xci=Zc(s,((t,i)=>t.hEt-i.hEt))}catch(t){throw yo(t),new b("Failed to poll MediaTailor tracking events")}}rli(){var t;null==(t=this.Kci)||t.s_(),this.Kci=void 0,this.qci=void 0,this.ili=-1/0}hli(){if(0===this.Xci.length)return;const t=this.Xci[this.Xci.length-1],i=this.Vci();if(t.hEt+t.QYt<this.Ooi){var e;this.Gci&&(null==(e=this.Lo.Nc)||e.mo(new Bh(this.Gci)),this.Gci=void 0)}else{for(const t of this.Xci){const e=t.hEt;if(!(e+t.QYt<this.Ooi)&&(e<=i&&e+t.QYt>this.Ooi)){var s;if(this.Yci===t)return;return this.Gci=t,void(null==(s=this.Lo.Nc)||s.mo(new ka(this.Gci)))}}var n;if(this.Gci)null==(n=this.Lo.Nc)||n.mo(new Bh(this.Gci)),this.Gci=void 0}}oli(){const t=this.G9;if(0===t.length)return;let i=[];for(const e of t){const t=e.JBt.filter((t=>na(this.ali,t.eventType)));i=i.concat(t)}for(const t of i)this.uli(t.startTimeInSeconds)&&(t.eventType===Zi.COMPLETE&&this.cli(Zi.ENGAGED_VIEW),this.lli(t))}dli(t,i){return i.JBt.filter((i=>Ei(i.eventType,t)))[0]}cli(t){const i=this.G9;if(0===i.length)return;const e=this.dli(t,i[0]);e&&this.lli(e)}lli(t){this.Eni(t.eventType);for(const i of t.beaconUrls){const t={mS:Kc.GET,Fu:i,AS:"",pS:Rt.tS};0,W(this.fli(t))}}Eni(t){let i;const e=this.G9;switch(t){case Zi.START:i=new tu(e[e.length-1],this.Lo.b_());break;case Zi.COMPLETE:i=new fa(e[0],this.Lo.b_());break;case Zi.FIRST_QUARTILE:i=new u0(e[0],this.Lo.b_());break;case Zi.MID_POINT:i=new ar(e[0],this.Lo.b_());break;case Zi.THIRD_QUARTILE:i=new d0(e[0],this.Lo.b_())}var s;void 0!==i&&(null==(s=this.Lo.Nc)||s.mo(i))}async fli(t){const i=await this.Lo.MO.BI(t);i.FI}uli(t){const i=this.Vci();return t>=this.Ooi&&t<i}cn(){this.Cw(),this.rli(),this.Ooi=-1}constructor(t,i,e){this.ili=-1/0,this.Gci=void 0,this.Wci=0,this.Xci=[],this.moi=!1,this.SR=!1,this.Ooi=-1,this.Kci=void 0,this.qci=void 0,this.tli=0,this.zP=()=>{this.Hci()},this.ePt=()=>{this.cli(Zi.RESUME)},this.iPt=()=>{this.rli(),this.cli(Zi.PAUSE)},this.We=()=>{this.rli(),this.Ooi=-1},this.wh=()=>{this.rli()},this.Kl=()=>{-1===this.Ooi&&(this.Ooi=this.Vci()),this.hli(),this.oli(),this.Ooi=this.Vci()},this.qVt=()=>{if(this.moi!==this.Lo.Y_){this.moi=this.Lo.Y_;const t=this.moi?Zi.MUTE:Zi.UNMUTE;this.cli(t)}},this.Fci=()=>{if(this.SR!==this.Lo.cs()){this.SR=this.Lo.cs();const t=this.SR?Zi.FULL_SCREEN:Zi.EXIT_FULL_SCREEN;this.cli(t)}},this.Q1=t=>{Oi(t)||(this.cli(Zi.ERROR),W(this.$ci()))},this.ali=[Zi.START,Zi.FIRST_QUARTILE,Zi.MID_POINT,Zi.THIRD_QUARTILE,Zi.COMPLETE,Zi.IMPRESSION,Zi.CREATIVE_VIEW],this.Lo=t,this.nli=i,this.sli=e,this.Ow()}};tr((function(t){return class extends t{ca(t){return this._li&&(this._li.cn(),this._li=void 0,this.hft()),super.ca(t)}async v7(t,i){if(!t||!function(t){return t.sources.some((t=>t.integration===mS.MEDIATAILOR))}(t))return super.v7(t,i);try{const e=await this.gli(t,i);await super.v7(e,i)}catch(t){this.qP(new ce(le.MANIFEST_LOAD_ERROR,t.message,t))}}L_(t){var i;(null==(i=this._li)?void 0:i.Yci)||super.L_(t)}O_(){var t;return null!=(t=this.hP)?t:super.O_()}z_(){var t;return null!=(t=this.oP)?t:super.z_()}qP(t){this.hP=Qh(t),this.oP=t,this.mo(new me(t))}hft(){this.hP=void 0,this.oP=void 0}async gli(t,i){let e=[];for(const s of t.sources){if(!_w(s)){e.push(s);continue}const t=s;if(!t.src){e.push(s);continue}const n=await this.wli(t,i);Pi(i);const r=oe({},t,{integration:void 0,src:n});e.push(r)}const s=Zr(t);return s.sources=e,s}async wli(t,i){const e=t.src||"",s=e.match(/.+?(?=\/v1\/)/);if(!s)throw new b("Could not find MediaTailor session initialization url");const n=s[0],r=Va(e,"?ads."),h=r?{Fu:e,pS:Rt.tS}:{Fu:e,mS:Kc.POST,AS:JSON.stringify({adParams:t.adParams}),pS:Rt.tS},o=await hu((()=>this.Ali(h,i)),i);let a;try{if(a=n+o.manifestUrl,!r){const t=n+o.trackingUrl,i=cw(a);this._li=new W9(this,t,i)}}catch(t){throw new b("Something went wrong parsing the MediaTailor session initialization response")}return a}async Ali(t,i){try{const e=await this.MO.BI(t);return await e.vj(i)}catch(t){throw yo(t),new b("Failed to initialize MediaTailor session manifest")}}cn(){this._li&&(this._li.cn(),this._li=void 0),this.hft(),super.cn()}constructor(t,i){super(t,i),this._li=void 0,this.hP=void 0,this.oP=void 0}}}),iu.P9);export{r as a,fe as b,_n as c,z_ as d,Yn as e,lt as f,ae as g,oo as h,It as i,JP as j,ei as k,iN as l,eN as m,sN as n,nN as o,oN as p,aN as q,sB as r,nB as s,oe as t,Va as u,iw as v,Zc as w,Ji as x,Li as y,Gr as z,Et as A,na as B,Ri as C,i as D,gg as E,le as F,Ku as G,t as H,Tg as I,Ou as J,Ph as K,Ng as L,Sg as M,Ee as N,Bw as O,Ot as P,Sv as Q,Ht as R,Pt as S,Jm as T,ep as U,ow as V,wc as W,iu as X,tr as Y,Lj as Z,bl as _,ts as $,kw as aa,Ki as ba,Pc as ca,XI as da,ZI as ea,bu as fa,JI as ga,tS as ha,$r as ia,xS as ja,Hr as ka,xr as la,zE as ma,YE as na,HE as oa,kc as pa,qE as qa,ZE as ra,ie as sa,Qx as ta,Yx as ua,Gx as va,Wx as wa,Hx as xa,qx as ya,gO as za,wO as Aa,AO as Ba,vO as Ca,fn as Da,pj as Ea,yj as Fa,xj as Ga,Kj as Ha,Jj as Ia,$j as Ja,tz as Ka,sU as La,nU as Ma,rU as Na,hU as Oa,aV as Pa,uV as Qa,eh as Ra,h$ as Sa,w$ as Ta,L$ as Ua,xi as Va,K3 as Wa,U5 as Xa,V5 as Ya,Q8 as Za};