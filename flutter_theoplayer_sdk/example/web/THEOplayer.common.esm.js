/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 7.3.0
 Created: 2024-05-08T09:44:32.484Z
 */
var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==s?s:"undefined"!=typeof global?global:this,s=a.window,h=a.document,Lu=a.location,Uu=a.navigator,u=a.setTimeout,c=a.clearTimeout,Hu=a.setInterval,Wu=a.clearInterval,v=a.Error,p=a.TypeError,g=(a.SyntaxError,a.Object),b=a.Math,k=a.parseInt,w=a.parseFloat,j=a.isNaN,S=a.Uint8Array,qu=a.Worker,Vu=(a.WorkerGlobalScope,a.XMLHttpRequest),mh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:function(t){return"Symbol("+t+")"};function zu(){}var Xu=Number.isNaN||function(t){return t!=t},Gu=zu;function Qu(t){return"object"==typeof t&&null!==t||"function"==typeof t}function Ku(t){return t.slice()}function Yu(t,e,i,s,n){new S(t).set(new S(i,s,n),e)}function Zu(t){return!1!==function(t){if("number"!=typeof t)return!1;if(Xu(t))return!1;if(t<0)return!1;return!0}(t)&&t!==1/0}function Ju(t,e,i){if("function"!=typeof t)throw new p("Argument is not a function");return Function.prototype.apply.call(t,e,i)}function Tu(t,e,i,s){var n=t[e];if(void 0!==n){if("function"!=typeof n)throw new p(n+" is not a method");switch(i){case 0:return function(){return ec(n,t,s)};case 1:return function(e){var i=[e].concat(s);return ec(n,t,i)}}}return function(){return an(void 0)}}function tc(t,e,i){var s=t[e];if(void 0!==s)return Ju(s,t,i)}function ec(t,e,i){try{return an(Ju(t,e,i))}catch(t){return $o(t)}}function ic(t){if(t=Number(t),Xu(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function sc(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new p("size property of a queuing strategy must be a function");return function(e){return t(e)}}var nc=Promise,rc=Promise.prototype.then,oc=Promise.resolve.bind(nc),hc=Promise.reject.bind(nc);function dh(t){return new nc(t)}function an(t){return oc(t)}function $o(t){return hc(t)}function vh(t,e,i){return rc.call(t,e,i)}function $t(t,e,i){vh(vh(t,e,i),void 0,Gu)}function ac(t,e){$t(t,e)}function uc(t,e){$t(t,void 0,e)}function cc(t,e,i){return vh(t,e,i)}function Tr(t){vh(t,void 0,Gu)}var E=function(){function t(){this.ui=0,this.Au=0,this.Eu={Pu:[],Iu:void 0},this.Ru=this.Eu,this.ui=0,this.Au=0}return g.defineProperty(t.prototype,"length",{get:function(){return this.Au},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var e=this.Ru,i=e;16383===e.Pu.length&&(i={Pu:[],Iu:void 0}),e.Pu.push(t),i!==e&&(this.Ru=i,e.Iu=i),++this.Au},t.prototype.shift=function(){var t=this.Eu,e=t,i=this.ui,s=i+1,n=t.Pu,r=n[i];return 16384===s&&(e=t.Iu,s=0),--this.Au,this.ui=s,t!==e&&(this.Eu=e),n[i]=void 0,r},t.prototype.forEach=function(t){for(var e=this.ui,i=this.Eu,s=i.Pu;!(e===s.length&&void 0===i.Iu||e===s.length&&(e=0,0===(s=(i=i.Iu).Pu).length));)t(s[e]),++e},t.prototype.peek=function(){var t=this.Eu,e=this.ui;return t.Pu[e]},t}();function D(t,e,i){var s=null;!0===i&&(s=g.prototype);var n=g.create(s);return n.value=t,n.done=e,n}function lc(t,e){t.Du=!0,t.Nu=e,e.Bu=t,"readable"===e.Aa?vc(t):"closed"===e.Aa?function(t){vc(t),wc(t)}(t):gc(t,e.Ou)}function dc(t,e){return fd(t.Nu,e)}function fc(t){"readable"===t.Nu.Aa?mc(t,new p("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,e){gc(t,e)}(t,new p("Reader was released and can no longer be used to monitor the stream's closedness")),t.Nu.Bu=void 0,t.Nu=void 0}function _c(t){return new p("Cannot "+t+" a stream using a released reader")}function vc(t){t.Mu=dh((function(e,i){t.Lu=e,t.Fu=i}))}function gc(t,e){vc(t),mc(t,e)}function mc(t,e){Tr(t.Mu),t.Fu(e),t.Lu=void 0,t.Fu=void 0}function wc(t){t.Lu(void 0),t.Lu=void 0,t.Fu=void 0}var pc=mh("[[CancelSteps]]"),yc=mh("[[PullSteps]]");function Ac(t,e){void 0===e&&(e=!1);var i=new Ic(t);return i.Du=e,i}function bc(t){return dh((function(e,i){var s={Uu:e,Hu:i};t.Bu.Wu.push(s)}))}function Tc(t,e,i){var s=t.Bu;s.Wu.shift().Uu(D(e,i,s.Du))}function Sc(t){return t.Bu.Wu.length}function Ec(t){var e=t.Bu;return void 0!==e&&!!Rc(e)}var kc,Pc,Ic=function(){function t(t){if(!1===qt(t))throw new p("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===Su(t))throw new p("This stream has already been locked for exclusive reading by another reader");lc(this,t),this.Wu=new E}return g.defineProperty(t.prototype,"closed",{get:function(){return Rc(this)?this.Mu:$o(xc("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return Rc(this)?void 0===this.Nu?$o(_c("cancel")):dc(this,t):$o(xc("cancel"))},t.prototype.read=function(){return Rc(this)?void 0===this.Nu?$o(_c("read from")):Cc(this):$o(xc("read"))},t.prototype.releaseLock=function(){if(!Rc(this))throw xc("releaseLock");if(void 0!==this.Nu){if(this.Wu.length>0)throw new p("Tried to release a reader lock when that reader has pending read() calls un-settled");fc(this)}},t}();function Rc(t){return!!Qu(t)&&!!g.prototype.hasOwnProperty.call(t,"Wu")}function Cc(t){var e=t.Nu;return e.Vu=!0,"closed"===e.Aa?an(D(void 0,!0,t.Du)):"errored"===e.Aa?$o(e.Ou):e.Xu[yc]()}function xc(t){return new p("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof mh.asyncIterator&&((kc={})[mh.asyncIterator]=function(){return this},Pc=kc,g.defineProperty(Pc,mh.asyncIterator,{enumerable:!1}));var Dc={next:function(){if(!1===Nc(this))return $o(Bc("next"));var t=this.Gu;return void 0===t.Nu?$o(_c("iterate")):cc(Cc(t),(function(e){var i=e.done;return i&&fc(t),D(e.value,i,!0)}))},return:function(t){if(!1===Nc(this))return $o(Bc("next"));var e=this.Gu;if(void 0===e.Nu)return $o(_c("finish iterating"));if(e.Wu.length>0)return $o(new p("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.Qu){var i=dc(e,t);return fc(e),cc(i,(function(){return D(t,!0,!0)}))}return fc(e),an(D(t,!0,!0))}};function Nc(t){return!!Qu(t)&&!!g.prototype.hasOwnProperty.call(t,"Gu")}function Bc(t){return new p("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function Oc(t){var e=t.Ku.shift();return t.Yu-=e.size,t.Yu<0&&(t.Yu=0),e.value}function Mc(t,e,i){if(!Zu(i=Number(i)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.Ku.push({value:e,size:i}),t.Yu+=i}function Lc(t){t.Ku=new E,t.Yu=0}void 0!==Pc&&g.setPrototypeOf(Dc,Pc),g.defineProperty(Dc,"next",{enumerable:!1}),g.defineProperty(Dc,"return",{enumerable:!1});var Fc=mh("[[AbortSteps]]"),Uc=mh("[[ErrorSteps]]"),Hc=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),qc(this);var i=e.size,s=e.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=sc(i);void 0===s&&(s=1),function(t,e,i,s){var n=g.create(rl.prototype);function r(){return tc(e,"start",[n])}var o=Tu(e,"write",1,[n]),h=Tu(e,"close",0,[]),a=Tu(e,"abort",1,[]);ol(t,n,r,o,h,a,i,s)}(this,t,s=ic(s),n)}return g.defineProperty(t.prototype,"locked",{get:function(){if(!1===Vc(this))throw fl("locked");return zc(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===Vc(this)?$o(fl("abort")):!0===zc(this)?$o(new p("Cannot abort a stream that already has a writer")):Xc(this,t)},t.prototype.close=function(){return!1===Vc(this)?$o(fl("close")):!0===zc(this)?$o(new p("Cannot close a stream that already has a writer")):!0===Xt(this)?$o(new p("Cannot close an already-closing stream")):Gc(this)},t.prototype.getWriter=function(){if(!1===Vc(this))throw fl("getWriter");return Wc(this)},t}();function Wc(t){return new Jc(t)}function qc(t){t.Aa="writable",t.Ou=void 0,t.Zu=void 0,t.Ju=void 0,t.$u=new E,t.tc=void 0,t.ec=void 0,t.ic=void 0,t.nc=void 0,t.rc=!1}function Vc(t){return!!Qu(t)&&!!g.prototype.hasOwnProperty.call(t,"Ju")}function zc(t){return void 0!==t.Zu}function Xc(t,e){var i=t.Aa;if("closed"===i||"errored"===i)return an(void 0);if(void 0!==t.nc)return t.nc.hc;var s=!1;"erroring"===i&&(s=!0,e=void 0);var n=dh((function(i,n){t.nc={hc:void 0,Uu:i,Hu:n,ac:e,uc:s}}));return t.nc.hc=n,!1===s&&Kc(t,e),n}function Gc(t){var e=t.Aa;if("closed"===e||"errored"===e)return $o(new p("The stream (in "+e+" state) is not in the writable state and cannot be closed"));var i=dh((function(e,i){var s={Uu:e,Hu:i};t.ec=s})),s=t.Zu;return void 0!==s&&!0===t.rc&&"writable"===e&&Tl(s),function(t){Mc(t,"close",0),ul(t)}(t.Ju),i}function Qc(t,e){"writable"!==t.Aa?jc(t):Kc(t,e)}function Kc(t,e){var i=t.Ju;t.Aa="erroring",t.Ou=e;var s=t.Zu;void 0!==s&&il(s,e),!1===function(t){if(void 0===t.tc&&void 0===t.ic)return!1;return!0}(t)&&!0===i.cc&&jc(t)}function jc(t){t.Aa="errored",t.Ju[Uc]();var e=t.Ou;if(t.$u.forEach((function(t){t.Hu(e)})),t.$u=new E,void 0!==t.nc){var i=t.nc;if(t.nc=void 0,!0===i.uc)return i.Hu(e),void Yc(t);$t(t.Ju[Fc](i.ac),(function(){i.Uu(),Yc(t)}),(function(e){i.Hu(e),Yc(t)}))}else Yc(t)}function Xt(t){return void 0!==t.ec||void 0!==t.ic}function Yc(t){void 0!==t.ec&&(t.ec.Hu(t.Ou),t.ec=void 0);var e=t.Zu;void 0!==e&&ml(e,t.Ou)}function Zc(t,e){var i=t.Zu;void 0!==i&&e!==t.rc&&(!0===e?function(t){pl(t)}(i):Tl(i)),t.rc=e}var Jc=function(){function t(t){if(!1===Vc(t))throw new p("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===zc(t))throw new p("This stream has already been locked for exclusive writing by another writer");this.lc=t,t.Zu=this;var e=t.Aa;if("writable"===e)!1===Xt(t)&&!0===t.rc?pl(this):Al(this),vl(this);else if("erroring"===e)yl(this,t.Ou),vl(this);else if("closed"===e)Al(this),function(t){vl(t),wl(t)}(this);else{var i=t.Ou;yl(this,i),gl(this,i)}}return g.defineProperty(t.prototype,"closed",{get:function(){return!1===$c(this)?$o(_l("closed")):this.Mu},enumerable:!0,configurable:!0}),g.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===$c(this))throw _l("desiredSize");if(void 0===this.lc)throw Fn("desiredSize");return function(t){var e=t.lc,i=e.Aa;if("errored"===i||"erroring"===i)return null;if("closed"===i)return 0;return al(e.Ju)}(this)},enumerable:!0,configurable:!0}),g.defineProperty(t.prototype,"ready",{get:function(){return!1===$c(this)?$o(_l("ready")):this.dc},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===$c(this)?$o(_l("abort")):void 0===this.lc?$o(Fn("abort")):function(t,e){var i=t.lc;return Xc(i,e)}(this,t)},t.prototype.close=function(){if(!1===$c(this))return $o(_l("close"));var t=this.lc;return void 0===t?$o(Fn("close")):!0===Xt(t)?$o(new p("Cannot close an already-closing stream")):tl(this)},t.prototype.releaseLock=function(){if(!1===$c(this))throw _l("releaseLock");void 0!==this.lc&&sl(this)},t.prototype.write=function(t){return!1===$c(this)?$o(_l("write")):void 0===this.lc?$o(Fn("write to")):nl(this,t)},t}();function $c(t){return!!Qu(t)&&!!g.prototype.hasOwnProperty.call(t,"lc")}function tl(t){return Gc(t.lc)}function el(t,e){"pending"===t.fc?ml(t,e):function(t,e){gl(t,e)}(t,e)}function il(t,e){"pending"===t._c?bl(t,e):function(t,e){yl(t,e)}(t,e)}function sl(t){var e=t.lc,i=new p("Writer was released and can no longer be used to monitor the stream's closedness");il(t,i),el(t,i),e.Zu=void 0,t.lc=void 0}function nl(t,e){var i=t.lc,s=i.Ju,n=function(t,e){try{return t.vc(e)}catch(e){return cl(t,e),1}}(s,e);if(i!==t.lc)return $o(Fn("write to"));var r=i.Aa;if("errored"===r)return $o(i.Ou);if(!0===Xt(i)||"closed"===r)return $o(new p("The stream is closing or closed and cannot be written to"));if("erroring"===r)return $o(i.Ou);var o=function(t){return dh((function(e,i){var s={Uu:e,Hu:i};t.$u.push(s)}))}(i);return function(t,e,i){var s={chunk:e};try{Mc(t,s,i)}catch(e){return void cl(t,e)}var n=t.gc;if(!1===Xt(n)&&"writable"===n.Aa){Zc(n,ll(t))}ul(t)}(s,e,n),o}var rl=function(){function t(){throw new p("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){if(!Qu(t))return!1;if(!g.prototype.hasOwnProperty.call(t,"gc"))return!1;return!0}(this))throw new p("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.gc.Aa&&dl(this,t)},t.prototype[Fc]=function(t){var e=this.mc(t);return hl(this),e},t.prototype[Uc]=function(){Lc(this)},t}();function ol(t,e,i,s,n,r,o,h){e.gc=t,t.Ju=e,e.Ku=void 0,e.Yu=void 0,Lc(e),e.cc=!1,e.vc=h,e.wc=o,e.yc=s,e.Ac=n,e.mc=r;var a=ll(e);Zc(t,a),$t(an(i()),(function(){e.cc=!0,ul(e)}),(function(i){e.cc=!0,Qc(t,i)}))}function hl(t){t.yc=void 0,t.Ac=void 0,t.mc=void 0,t.vc=void 0}function al(t){return t.wc-t.Yu}function ul(t){var e=t.gc;if(!1!==t.cc&&void 0===e.tc)if("erroring"!==e.Aa){if(0!==t.Ku.length){var i=function(t){return t.Ku.peek().value}(t);"close"===i?function(t){var e=t.gc;(function(t){t.ic=t.ec,t.ec=void 0})(e),Oc(t);var i=t.Ac();hl(t),$t(i,(function(){!function(t){t.ic.Uu(void 0),t.ic=void 0,"erroring"===t.Aa&&(t.Ou=void 0,void 0!==t.nc&&(t.nc.Uu(),t.nc=void 0)),t.Aa="closed";var e=t.Zu;void 0!==e&&wl(e)}(e)}),(function(t){!function(t,e){t.ic.Hu(e),t.ic=void 0,void 0!==t.nc&&(t.nc.Hu(e),t.nc=void 0),Qc(t,e)}(e,t)}))}(t):function(t,e){var i=t.gc;!function(t){t.tc=t.$u.shift()}(i);var s=t.yc(e);$t(s,(function(){!function(t){t.tc.Uu(void 0),t.tc=void 0}(i);var e=i.Aa;if(Oc(t),!1===Xt(i)&&"writable"===e){var s=ll(t);Zc(i,s)}ul(t)}),(function(e){"writable"===i.Aa&&hl(t),function(t,e){t.tc.Hu(e),t.tc=void 0,Qc(t,e)}(i,e)}))}(t,i.chunk)}}else jc(e)}function cl(t,e){"writable"===t.gc.Aa&&dl(t,e)}function ll(t){return al(t)<=0}function dl(t,e){var i=t.gc;hl(t),Kc(i,e)}function fl(t){return new p("WritableStream.prototype."+t+" can only be used on a WritableStream")}function _l(t){return new p("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function Fn(t){return new p("Cannot "+t+" a stream using a released writer")}function vl(t){t.Mu=dh((function(e,i){t.Lu=e,t.Fu=i,t.fc="pending"}))}function gl(t,e){vl(t),ml(t,e)}function ml(t,e){Tr(t.Mu),t.Fu(e),t.Lu=void 0,t.Fu=void 0,t.fc="rejected"}function wl(t){t.Lu(void 0),t.Lu=void 0,t.Fu=void 0,t.fc="resolved"}function pl(t){t.dc=dh((function(e,i){t.Tc=e,t.Sc=i})),t._c="pending"}function yl(t,e){pl(t),bl(t,e)}function Al(t){pl(t),Tl(t)}function bl(t,e){Tr(t.dc),t.Sc(e),t.Tc=void 0,t.Sc=void 0,t._c="rejected"}function Tl(t){t.Tc(void 0),t.Tc=void 0,t.Sc=void 0,t._c="fulfilled"}function Sl(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var El="undefined"!=typeof DOMException?DOMException:void 0;var i,kl=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}(El)?El:((i=function(t,e){this.message=t||"",this.name=e||"Error",v.captureStackTrace&&v.captureStackTrace(this,this.constructor)}).prototype=g.create(v.prototype),g.defineProperty(i.prototype,"constructor",{value:i,writable:!0,configurable:!0}),i);function Pl(t,e,i,s,n,r){var o=Ac(t),h=Wc(e);t.Vu=!0;var a=!1,u=an(void 0);return dh((function(c,l){var d,f,_,v;if(void 0!==r){if(d=function(){var i=new kl("Aborted","AbortError"),r=[];!1===s&&r.push((function(){return"writable"===e.Aa?Xc(e,i):an(void 0)})),!1===n&&r.push((function(){return"readable"===t.Aa?fd(t,i):an(void 0)})),y((function(){return Promise.all(r.map((function(t){return t()})))}),!0,i)},!0===r.aborted)return void d();r.addEventListener("abort",d)}if(w(t,o.Mu,(function(t){!1===s?y((function(){return Xc(e,t)}),!0,t):A(!0,t)})),w(e,h.Mu,(function(e){!1===n?y((function(){return fd(t,e)}),!0,e):A(!0,e)})),f=t,_=o.Mu,v=function(){!1===i?y((function(){return function(t){var e=t.lc,i=e.Aa;return!0===Xt(e)||"closed"===i?an(void 0):"errored"===i?$o(e.Ou):tl(t)}(h)})):A()},"closed"===f.Aa?v():ac(_,v),!0===Xt(e)||"closed"===e.Aa){var g=new p("the destination writable stream closed before all data could be piped to it");!1===n?y((function(){return fd(t,g)}),!0,g):A(!0,g)}function m(){var t=u;return vh(u,(function(){return t!==u?m():void 0}))}function w(t,e,i){"errored"===t.Aa?i(t.Ou):uc(e,i)}function y(t,i,s){function n(){$t(t(),(function(){return b(i,s)}),(function(t){return b(!0,t)}))}!0!==a&&(a=!0,"writable"===e.Aa&&!1===Xt(e)?ac(m(),n):n())}function A(t,i){!0!==a&&(a=!0,"writable"===e.Aa&&!1===Xt(e)?ac(m(),(function(){return b(t,i)})):b(t,i))}function b(t,e){sl(h),fc(o),void 0!==r&&r.removeEventListener("abort",d),t?l(e):c(void 0)}Tr(dh((function(t,e){!function i(s){s?t():vh(!0===a?an(!0):vh(h.dc,(function(){return vh(Cc(o),(function(t){return!0===t.done||(u=vh(nl(h,t.value),void 0,zu),!1)}))})),i,e)}(!1)})))}))}var Il=function(){function t(){throw new p}return g.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===Rl(this))throw Ml("desiredSize");return Nl(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===Rl(this))throw Ml("close");if(!1===Bl(this))throw new p("The stream is not in a state that permits close");Vn(this)},t.prototype.enqueue=function(t){if(!1===Rl(this))throw Ml("enqueue");if(!1===Bl(this))throw new p("The stream is not in a state that permits enqueue");return Dl(this,t)},t.prototype.error=function(t){if(!1===Rl(this))throw Ml("error");ei(this,t)},t.prototype[pc]=function(t){Lc(this);var e=this.Ec(t);return xl(this),e},t.prototype[yc]=function(){var t=this.kc;if(this.Ku.length>0){var e=Oc(this);return!0===this.Pc&&0===this.Ku.length?(xl(this),Un(t)):On(this),an(D(e,!1,t.Bu.Du))}var i=bc(t);return On(this),i},t}();function Rl(t){return!!Qu(t)&&!!g.prototype.hasOwnProperty.call(t,"kc")}function On(t){!1!==Cl(t)&&(!0!==t.Ic?(t.Ic=!0,$t(t.Rc(),(function(){t.Ic=!1,!0===t.Cc&&(t.Cc=!1,On(t))}),(function(e){ei(t,e)}))):t.Cc=!0)}function Cl(t){var e=t.kc;return!1!==Bl(t)&&(!1!==t.cc&&(!0===Su(e)&&Sc(e)>0||Nl(t)>0))}function xl(t){t.Rc=void 0,t.Ec=void 0,t.vc=void 0}function Vn(t){var e=t.kc;t.Pc=!0,0===t.Ku.length&&(xl(t),Un(e))}function Dl(t,e){var i=t.kc;if(!0===Su(i)&&Sc(i)>0)Tc(i,e,!1);else{var s=void 0;try{s=t.vc(e)}catch(e){throw ei(t,e),e}try{Mc(t,e,s)}catch(e){throw ei(t,e),e}}On(t)}function ei(t,e){var i=t.kc;"readable"===i.Aa&&(Lc(t),xl(t),_d(i,e))}function Nl(t){var e=t.kc.Aa;return"errored"===e?null:"closed"===e?0:t.wc-t.Yu}function Bl(t){var e=t.kc.Aa;return!1===t.Pc&&"readable"===e}function Ol(t,e,i,s,n,r,o){e.kc=t,e.Ku=void 0,e.Yu=void 0,Lc(e),e.cc=!1,e.Pc=!1,e.Cc=!1,e.Ic=!1,e.vc=o,e.wc=r,e.Rc=s,e.Ec=n,t.Xu=e,$t(an(i()),(function(){e.cc=!0,On(e)}),(function(t){ei(e,t)}))}function Ml(t){return new p("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}var Ll=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&b.floor(t)===t},Fl=function(){function t(){throw new p("ReadableStreamBYOBRequest cannot be used directly")}return g.defineProperty(t.prototype,"view",{get:function(){if(!1===Wl(this))throw id("view");return this.xc},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===Wl(this))throw id("respond");if(void 0===this.Dc)throw new p("This BYOB request has been invalidated");this.xc.buffer,function(t,e){if(e=Number(e),!1===Zu(e))throw new RangeError("bytesWritten must be a finite");Zl(t,e)}(this.Dc,t)},t.prototype.respondWithNewView=function(t){if(!1===Wl(this))throw id("respond");if(void 0===this.Dc)throw new p("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new p("You can only respond with array buffer views");t.buffer,function(t,e){var i=t.Nc.peek();if(i.byteOffset+i.bytesFilled!==e.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.byteLength!==e.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");i.buffer=e.buffer,Zl(t,e.byteLength)}(this.Dc,t)},t}(),Ul=function(){function t(){throw new p("ReadableByteStreamController constructor cannot be used directly")}return g.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===Hl(this))throw sd("byobRequest");if(void 0===this.Bc&&this.Nc.length>0){var t=this.Nc.peek(),e=new S(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),i=g.create(Fl.prototype);!function(t,e,i){t.Dc=e,t.xc=i}(i,this,e),this.Bc=i}return this.Bc},enumerable:!0,configurable:!0}),g.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===Hl(this))throw sd("desiredSize");return td(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===Hl(this))throw sd("close");if(!0===this.Pc)throw new p("The stream has already been closed; do not close it again!");var t=this.Oc.Aa;if("readable"!==t)throw new p("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var e=t.Oc;if(t.Yu>0)return void(t.Pc=!0);if(t.Nc.length>0){if(t.Nc.peek().bytesFilled>0){var i=new p("Insufficient bytes to fill elements in the given buffer");throw Ln(t,i),i}}$l(t),Un(e)}(this)},t.prototype.enqueue=function(t){if(!1===Hl(this))throw sd("enqueue");if(!0===this.Pc)throw new p("stream is closed or draining");var e=this.Oc.Aa;if("readable"!==e)throw new p("The stream (in "+e+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new p("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,e){var i=t.Oc,s=e.buffer,n=e.byteOffset,r=e.byteLength,o=s;if(!0===Ec(i)){if(0===Sc(i))Xl(t,o,n,r);else Tc(i,new S(o,n,r),!1)}else!0===od(i)?(Xl(t,o,n,r),Yl(t)):Xl(t,o,n,r);ql(t)}(this,t)},t.prototype.error=function(t){if(!1===Hl(this))throw sd("error");Ln(this,t)},t.prototype[pc]=function(t){this.Nc.length>0&&(this.Nc.peek().bytesFilled=0);Lc(this);var e=this.Ec(t);return $l(this),e},t.prototype[yc]=function(){var t=this.Oc;if(this.Yu>0){var e=this.Ku.shift();this.Yu-=e.byteLength,Kl(this);var i=void 0;try{i=new S(e.buffer,e.byteOffset,e.byteLength)}catch(t){return $o(t)}return an(D(i,!1,t.Bu.Du))}var s=this.Mc;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return $o(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:S,readerType:"default"};this.Nc.push(r)}var o=bc(t);return ql(this),o},t}();function Hl(t){return!!Qu(t)&&!!g.prototype.hasOwnProperty.call(t,"Oc")}function Wl(t){return!!Qu(t)&&!!g.prototype.hasOwnProperty.call(t,"Dc")}function ql(t){var e=function(t){var e=t.Oc;if("readable"!==e.Aa)return!1;if(!0===t.Pc)return!1;if(!1===t.cc)return!1;if(!0===Ec(e)&&Sc(e)>0)return!0;if(!0===od(e)&&rd(e)>0)return!0;var i=td(t);if(i>0)return!0;return!1}(t);!1!==e&&(!0!==t.Ic?(t.Ic=!0,$t(t.Rc(),(function(){t.Ic=!1,!0===t.Cc&&(t.Cc=!1,ql(t))}),(function(e){Ln(t,e)}))):t.Cc=!0)}function Vl(t,e){var i=!1;"closed"===t.Aa&&(i=!0);var s=zl(e);"default"===e.readerType?Tc(t,s,i):function(t,e,i){var s=t.Bu,n=s.Lc.shift();n.Uu(D(e,i,s.Du))}(t,s,i)}function zl(t){var e=t.bytesFilled,i=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,e/i)}function Xl(t,e,i,s){t.Ku.push({buffer:e,byteOffset:i,byteLength:s}),t.Yu+=s}function Gl(t,e){var i=e.elementSize,s=e.bytesFilled-e.bytesFilled%i,n=b.min(t.Yu,e.byteLength-e.bytesFilled),r=e.bytesFilled+n,o=r-r%i,h=n,a=!1;o>s&&(h=o-e.bytesFilled,a=!0);for(var u=t.Ku;h>0;){var c=u.peek(),l=b.min(h,c.byteLength),d=e.byteOffset+e.bytesFilled;Yu(e.buffer,d,c.buffer,c.byteOffset,l),c.byteLength===l?u.shift():(c.byteOffset+=l,c.byteLength-=l),t.Yu-=l,Ql(t,l,e),h-=l}return a}function Ql(t,e,i){jl(t),i.bytesFilled+=e}function Kl(t){0===t.Yu&&!0===t.Pc?($l(t),Un(t.Oc)):ql(t)}function jl(t){void 0!==t.Bc&&(t.Bc.Dc=void 0,t.Bc.xc=void 0,t.Bc=void 0)}function Yl(t){for(;t.Nc.length>0;){if(0===t.Yu)return;var e=t.Nc.peek();!0===Gl(t,e)&&(Jl(t),Vl(t.Oc,e))}}function Zl(t,e){var i=t.Nc.peek();if("closed"===t.Oc.Aa){if(0!==e)throw new p("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,e){e.buffer=e.buffer;var i=t.Oc;if(!0===od(i))for(;rd(i)>0;)Vl(i,Jl(t))}(t,i)}else!function(t,e,i){if(i.bytesFilled+e>i.byteLength)throw new RangeError("bytesWritten out of range");if(Ql(t,e,i),!(i.bytesFilled<i.elementSize)){Jl(t);var s=i.bytesFilled%i.elementSize;if(s>0){var n=i.byteOffset+i.bytesFilled,r=i.buffer.slice(n-s,n);Xl(t,r,0,r.byteLength)}i.buffer=i.buffer,i.bytesFilled-=s,Vl(t.Oc,i),Yl(t)}}(t,e,i);ql(t)}function Jl(t){var e=t.Nc.shift();return jl(t),e}function $l(t){t.Rc=void 0,t.Ec=void 0}function Ln(t,e){var i=t.Oc;"readable"===i.Aa&&(!function(t){jl(t),t.Nc=new E}(t),Lc(t),$l(t),_d(i,e))}function td(t){var e=t.Oc.Aa;return"errored"===e?null:"closed"===e?0:t.wc-t.Yu}function ed(t,e,i){var s=g.create(Ul.prototype);var n=Tu(e,"pull",0,[s]),r=Tu(e,"cancel",1,[]),o=e.autoAllocateChunkSize;if(void 0!==o&&(o=Number(o),!1===Ll(o)||o<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,e,i,s,n,r,o){e.Oc=t,e.Cc=!1,e.Ic=!1,e.Bc=void 0,e.Ku=e.Yu=void 0,Lc(e),e.Pc=!1,e.cc=!1,e.wc=ic(r),e.Rc=s,e.Ec=n,e.Mc=o,e.Nc=new E,t.Xu=e,$t(an(i()),(function(){e.cc=!0,ql(e)}),(function(t){Ln(e,t)}))}(t,s,(function(){return tc(e,"start",[s])}),n,r,i,o)}function id(t){return new p("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function sd(t){return new p("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function nd(t){return dh((function(e,i){var s={Uu:e,Hu:i};t.Bu.Lc.push(s)}))}function rd(t){return t.Bu.Lc.length}function od(t){var e=t.Bu;return void 0!==e&&!!ad(e)}var hd=function(){function t(t){if(!qt(t))throw new p("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===Hl(t.Xu))throw new p("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(Su(t))throw new p("This stream has already been locked for exclusive reading by another reader");lc(this,t),this.Lc=new E}return g.defineProperty(t.prototype,"closed",{get:function(){return ad(this)?this.Mu:$o(ud("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return ad(this)?void 0===this.Nu?$o(_c("cancel")):dc(this,t):$o(ud("cancel"))},t.prototype.read=function(t){return ad(this)?void 0===this.Nu?$o(_c("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?$o(new p("view must have non-zero byteLength")):function(t,e){var i=t.Nu;if(i.Vu=!0,"errored"===i.Aa)return $o(i.Ou);return function(t,e){var i=t.Oc,s=1;e.constructor!==DataView&&(s=e.constructor.BYTES_PER_ELEMENT);var n=e.constructor,r={buffer:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.Nc.length>0)return t.Nc.push(r),nd(i);if("closed"===i.Aa)return an(D(new n(r.buffer,r.byteOffset,0),!0,i.Bu.Du));if(t.Yu>0){if(!0===Gl(t,r)){var o=zl(r);return Kl(t),an(D(o,!1,i.Bu.Du))}if(!0===t.Pc){var h=new p("Insufficient bytes to fill elements in the given buffer");return Ln(t,h),$o(h)}}t.Nc.push(r);var a=nd(i);return ql(t),a}(i.Xu,e)}(this,t)):$o(new p("view must be an array buffer view")):$o(ud("read"))},t.prototype.releaseLock=function(){if(!ad(this))throw ud("releaseLock");if(void 0!==this.Nu){if(this.Lc.length>0)throw new p("Tried to release a reader lock when that reader has pending read() calls un-settled");fc(this)}},t}();function ad(t){return!!Qu(t)&&!!g.prototype.hasOwnProperty.call(t,"Lc")}function ud(t){return new p("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var cd=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),dd(this);var i=e.size,s=e.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==i)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),ed(this,t,s=ic(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=sc(i);void 0===s&&(s=1),function(t,e,i,s){var n=g.create(Il.prototype),r=Tu(e,"pull",0,[n]),o=Tu(e,"cancel",1,[]);Ol(t,n,(function(){return tc(e,"start",[n])}),r,o,i,s)}(this,t,s=ic(s),r)}}return g.defineProperty(t.prototype,"locked",{get:function(){if(!1===qt(this))throw vd("locked");return Su(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===qt(this)?$o(vd("cancel")):!0===Su(this)?$o(new p("Cannot cancel a stream that already has a reader")):fd(this,t)},t.prototype.getReader=function(t){var e=(void 0===t?{}:t).mode;if(!1===qt(this))throw vd("getReader");if(void 0===e)return Ac(this,!0);if("byob"===(e=String(e)))return function(t,e){void 0===e&&(e=!1);var i=new hd(t);return i.Du=e,i}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,e){var i=t.writable,s=t.readable,n=void 0===e?{}:e,r=n.preventClose,o=n.preventAbort,h=n.preventCancel,a=n.signal;if(!1===qt(this))throw vd("pipeThrough");if(!1===Vc(i))throw new p("writable argument to pipeThrough must be a WritableStream");if(!1===qt(s))throw new p("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),o=Boolean(o),h=Boolean(h),void 0!==a&&!Sl(a))throw new p("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===Su(this))throw new p("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===zc(i))throw new p("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return Tr(Pl(this,i,r,o,h,a)),s},t.prototype.pipeTo=function(t,e){var i=void 0===e?{}:e,s=i.preventClose,n=i.preventAbort,r=i.preventCancel,o=i.signal;return!1===qt(this)?$o(vd("pipeTo")):!1===Vc(t)?$o(new p("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===o||Sl(o)?!0===Su(this)?$o(new p("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===zc(t)?$o(new p("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Pl(this,t,s,n,r,o):$o(new p("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===qt(this))throw vd("tee");var t=function(t,e){var i,s,n,r,o,h=Ac(t),a=!1,u=!1,c=!1,l=dh((function(t){o=t}));function d(){return!0===a||(a=!0,Tr(cc(Cc(h),(function(t){if(a=!1,!0===t.done)return!1===u&&Vn(n.Xu),void(!1===c&&Vn(r.Xu));var e=t.value,i=e,s=e;!1===u&&Dl(n.Xu,i),!1===c&&Dl(r.Xu,s)})))),an(void 0)}function f(){}return n=ld(f,d,(function(e){if(u=!0,i=e,!0===c){var n=Ku([i,s]),r=fd(t,n);o(r)}return l})),r=ld(f,d,(function(e){if(c=!0,s=e,!0===u){var n=Ku([i,s]),r=fd(t,n);o(r)}return l})),uc(h.Mu,(function(t){ei(n.Xu,t),ei(r.Xu,t)})),[n,r]}(this);return Ku(t)},t.prototype.getIterator=function(t){var e=(void 0===t?{}:t).preventCancel,i=void 0!==e&&e;if(!1===qt(this))throw vd("getIterator");return function(t,e){void 0===e&&(e=!1);var i=Ac(t),s=g.create(Dc);return s.Gu=i,s.Qu=Boolean(e),s}(this,i)},t}();function ld(t,e,i,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=g.create(cd.prototype);return dd(r),Ol(r,g.create(Il.prototype),t,e,i,s,n),r}function dd(t){t.Aa="readable",t.Bu=void 0,t.Ou=void 0,t.Vu=!1}function qt(t){return!!Qu(t)&&!!g.prototype.hasOwnProperty.call(t,"Xu")}function Su(t){return void 0!==t.Bu}function fd(t,e){return t.Vu=!0,"closed"===t.Aa?an(void 0):"errored"===t.Aa?$o(t.Ou):(Un(t),cc(t.Xu[pc](e),zu))}function Un(t){t.Aa="closed";var e=t.Bu;void 0!==e&&(Rc(e)&&(e.Wu.forEach((function(t){t.Uu(D(void 0,!0,e.Du))})),e.Wu=new E),wc(e))}function _d(t,e){t.Aa="errored",t.Ou=e;var i=t.Bu;void 0!==i&&(Rc(i)?(i.Wu.forEach((function(t){t.Hu(e)})),i.Wu=new E):(i.Lc.forEach((function(t){t.Hu(e)})),i.Lc=new E),mc(i,e))}function vd(t){return new p("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof mh.asyncIterator&&g.defineProperty(cd.prototype,mh.asyncIterator,{value:cd.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});!function(){function t(t){var e=t.highWaterMark;this.highWaterMark=e}t.prototype.size=function(t){return t.byteLength}}();var gd=function(){function t(t){var e=t.highWaterMark;this.highWaterMark=e}return t.prototype.size=function(){return 1},t}(),Da=function(){function t(t,e,i){void 0===t&&(t={}),void 0===e&&(e={}),void 0===i&&(i={});var s=e.size,n=e.highWaterMark,r=i.size,o=i.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var h=sc(s);if(void 0===n&&(n=1),n=ic(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=sc(r);void 0===o&&(o=0),o=ic(o),function(t,e,i,s,n,r){function o(){return e}function h(e){return function(t,e){var i=t.Fc;if(!0===t.rc){return cc(t.Uc,(function(){var s=t.Hc;if("erroring"===s.Aa)throw s.Ou;return Ed(i,e)}))}return Ed(i,e)}(t,e)}function a(e){return function(t,e){return wd(t,e),an(void 0)}(t,e)}function u(){return function(t){var e=t.Wc,i=t.Fc,s=i.qc();return Td(i),cc(s,(function(){if("errored"===e.Aa)throw e.Ou;var t=e.Xu;!0===Bl(t)&&Vn(t)}),(function(i){throw wd(t,i),e.Ou}))}(t)}function c(){return function(t){return yd(t,!1),t.Uc}(t)}function l(e){return pd(t,e),an(void 0)}t.Hc=function(t,e,i,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var o=g.create(Hc.prototype);return qc(o),ol(o,g.create(rl.prototype),t,e,i,s,n,r),o}(o,h,u,a,i,s),t.Wc=ld(o,c,l,n,r),t.rc=void 0,t.Uc=void 0,t.Vc=void 0,yd(t,!0),t.Fc=void 0}(this,dh((function(t){a=t})),n,h,o,u),function(t,e){var i=g.create(Ad.prototype),s=function(t){try{return Sd(i,t),an(void 0)}catch(t){return $o(t)}},n=e.transform;if(void 0!==n){if("function"!=typeof n)throw new p("transform is not a method");s=function(t){return ec(n,e,[t,i])}}var r=Tu(e,"flush",0,[i]);!function(t,e,i,s){e.zc=t,t.Fc=e,e.Xc=i,e.qc=s}(t,i,s,r)}(this,t);var c=tc(t,"start",[this.Fc]);a(c)}return g.defineProperty(t.prototype,"readable",{get:function(){if(!1===md(this))throw Pd("readable");return this.Wc},enumerable:!0,configurable:!0}),g.defineProperty(t.prototype,"writable",{get:function(){if(!1===md(this))throw Pd("writable");return this.Hc},enumerable:!0,configurable:!0}),t}();function md(t){return!!Qu(t)&&!!g.prototype.hasOwnProperty.call(t,"Fc")}function wd(t,e){ei(t.Wc.Xu,e),pd(t,e)}function pd(t,e){Td(t.Fc),cl(t.Hc.Ju,e),!0===t.rc&&yd(t,!1)}function yd(t,e){void 0!==t.Uc&&t.Vc(),t.Uc=dh((function(e){t.Vc=e})),t.rc=e}var Ot,Cr,Ad=function(){function t(){throw new p("TransformStreamDefaultController instances cannot be created directly")}return g.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===bd(this))throw kd("desiredSize");return Nl(this.zc.Wc.Xu)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===bd(this))throw kd("enqueue");Sd(this,t)},t.prototype.error=function(t){if(!1===bd(this))throw kd("error");!function(t,e){wd(t.zc,e)}(this,t)},t.prototype.terminate=function(){if(!1===bd(this))throw kd("terminate");!function(t){var e=t.zc,i=e.Wc.Xu;!0===Bl(i)&&Vn(i);var s=new p("TransformStream terminated");pd(e,s)}(this)},t}();function bd(t){return!!Qu(t)&&!!g.prototype.hasOwnProperty.call(t,"zc")}function Td(t){t.Xc=void 0,t.qc=void 0}function Sd(t,e){var i=t.zc,s=i.Wc.Xu;if(!1===Bl(s))throw new p("Readable side is not in a state that permits enqueue");try{Dl(s,e)}catch(t){throw pd(i,t),i.Wc.Ou}var n=function(t){return!0!==Cl(t)}(s);n!==i.rc&&yd(i,!0)}function Ed(t,e){return cc(t.Xc(e),void 0,(function(e){throw wd(t.zc,e),e}))}function kd(t){return new p("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function Pd(t){return new p("TransformStream.prototype."+t+" can only be used on a TransformStream")}function gh(t,e){return Id(t.slice(),e)}function Wn(t,e){const i=Id(t,e);return i!==t&&Rd(i,void 0,t.length,t),t}function Id(t,e){let i=t;const s=i.length;if(s<=1)return i;let n=new Array(s);for(let t=1;t<s;t*=2){Rd(i,e,t,n);const s=i;i=n,n=s}return i}function Rd(t,e,i,s){const n=t.length;let r=0;const o=2*i;let h,a,u,c,l;for(a=0;a<n;a+=o)for(u=a+i,h=u+i,u>n&&(u=n),h>n&&(h=n),c=a,l=u;;)if(c<u&&l<h)e&&e(t[c],t[l])<=0?s[r++]=t[c++]:s[r++]=t[l++];else if(c<u)s[r++]=t[c++];else{if(!(l<h))break;s[r++]=t[l++]}}!function(t){t[t.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",t[t.LICENSE_ERROR=2e3]="LICENSE_ERROR",t[t.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",t[t.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",t[t.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",t[t.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",t[t.SOURCE_INVALID=3e3]="SOURCE_INVALID",t[t.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",t[t.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",t[t.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",t[t.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",t[t.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",t[t.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",t[t.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",t[t.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",t[t.MEDIA_ABORTED=5004]="MEDIA_ABORTED",t[t.NETWORK_ERROR=6e3]="NETWORK_ERROR",t[t.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",t[t.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",t[t.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",t[t.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",t[t.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",t[t.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",t[t.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",t[t.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",t[t.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",t[t.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",t[t.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",t[t.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",t[t.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",t[t.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",t[t.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",t[t.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",t[t.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",t[t.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",t[t.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",t[t.AD_ERROR=1e4]="AD_ERROR",t[t.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",t[t.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",t[t.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",t[t.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",t[t.THEO_LIVE_UNKNOWN_ERROR=13e3]="THEO_LIVE_UNKNOWN_ERROR",t[t.THEO_LIVE_CHANNEL_NOT_FOUND=13001]="THEO_LIVE_CHANNEL_NOT_FOUND",t[t.THEO_LIVE_END_OF_DEMO=13002]="THEO_LIVE_END_OF_DEMO",t[t.THEO_LIVE_ANALYTICS_ERROR=13003]="THEO_LIVE_ANALYTICS_ERROR"}(Ot||(Ot={})),function(t){t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE",t[t.THEOLIVE=13]="THEOLIVE"}(Cr||(Cr={})),function(t){t.fromCode=function(e){const i=b.floor(e/1e3);if(i in t)return i;throw new p("Invalid error code: "+e)}}(Cr||(Cr={}));var N={}.hasOwnProperty,Pr={}.toString;function it(t){return null!=t}function Cd(t){return void 0===t}var ya=Array.isArray||function(t){return"[object Array]"===Pr.call(t)};function Qa(t){return or(t)&&N.call(t,"length")&&xd(t.length)}function or(t){return"object"==typeof t&&null!==t}function B(t){return or(t)&&t.constructor&&t.constructor===g}function Ts(t){return"string"==typeof t}function bh(t){return"boolean"==typeof t}function le(t){return it(t)&&"function"==typeof t.then}function xd(t){return"number"==typeof t}function Dd(t){return function(t){return"function"==typeof t}(t)||or(t)}var Ze,cs=9007199254740991,Nd=2**-52;function Eo(t,e,i){return b.min(b.max(t,e),i)}function _e(t,e,i){return t===e||b.abs(t-e)<=i}function Bd(t,e){let i=t,s=e;for(;0!==s;){const t=i%s;i=s,s=t}return i<0?-i:i}function Od(t,e){return t.reduce(((t,i)=>t+e(i)),0)}!function(t){t[t.ih=0]="ih",t[t.Gc=1]="Gc",t[t.Qc=-1]="Qc"}(Ze||(Ze={}));var Mu=(t,e)=>(0|t)-(0|e),F=(t,e)=>t===e?0:t<e?-1:t>e?1:j(t)?j(e)?0:1:-1;function Mr(t,e,i){return _e(t,e,i)?0:F(t,e)}var Md=(t,e)=>function(t,e){if(t===e)return!0;const i=b.abs(t-e);return i<Nd||i<b.max(b.abs(t),b.abs(e))*Nd}(t,e)?0:F(t,e);var Ld="function"==typeof Array.prototype.find?(t,e)=>t.find(e):(t,e)=>{const i=Ud(t,e);return-1===i?void 0:t[i]},Rt=Ld,Fd="function"==typeof Array.prototype.findLast?(t,e)=>t.findLast(e):(t,e)=>{const i=Hd(t,e);return-1===i?void 0:t[i]},jh=Fd,Ud="function"==typeof Array.prototype.findIndex?(t,e)=>t.findIndex(e):(t,e)=>{for(let i=0;i<t.length;i+=1){if(e(t[i],i,t))return i}return-1},Hd="function"==typeof Array.prototype.findLastIndex?(t,e)=>t.findLastIndex(e):(t,e)=>{for(let i=t.length-1;i>=0;i-=1){if(e(t[i],i,t))return i}return-1};function so(t,e){const i=t.indexOf(e);return-1!==i&&(Zt(t,i),!0)}function Zt(t,e){0===e?t.shift():t.splice(e,1)}function Wd(t,e){const i=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===e){n++,i.length-=1;break}i[s++]=t[n++]}for(;n<t.length;)i[s++]=t[n++];return i}function Yi(t,e){return-1!==t.indexOf(e)}function Bn(t,e,i){if(t===e)return!0;if(t.length!==e.length)return!1;for(let s=0;s<t.length;s+=1)if(!i(t[s],e[s]))return!1;return!0}function wr(t){t.length=0}function Dr(t,e){if(t.length!==e.length)return!1;for(const i of t)if(!Yi(e,i))return!1;return!0}Array.prototype.flat;var ls="function"==typeof Array.prototype.flatMap?(t,e)=>t.flatMap(e):(t,e)=>{const i=[];for(let s=0;s<t.length;s++)i.push(...e(t[s],s));return i};function Br(t,e){return Vd(t,((t,i)=>F(e(t),e(i))))}function qd(t,e){return zd(t,((t,i)=>F(e(t),e(i))))}function Vd(t,e){if(0!==t.length)return t.reduce(((t,i)=>e(t,i)<=0?t:i))}function zd(t,e){return Vd(t,((t,i)=>e(i,t)))}function Xd(t,e){return Promise.all(t.map(e)).then((e=>t.filter(((t,i)=>e[i]))))}function Gd(t,e,i){if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(!i(t[s],e[s]))return!1;return!0}function Qn(){const t=g.create(null);return t.Kc=void 0,delete t.Kc,t}function rs(){return new Yd}function Re(){return new Zd}function Qd(t){const e=rs();for(const i in t)N.call(t,i)&&e.set(i,t[i]);return e}function Kd(t){const e=[];return t.forEach((t=>e.push(t))),e}var jd="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,Yd=jd||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,e){this.index=0,this.data=t,this.selector=e,this.keys=g.keys(t)}}return class{get(t){return this.data[t]}set(t,e){return this.has(t)||this.size++,this.data[t]=e,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=Qn(),this.size=0}keys(){return new t(this.data,((t,e)=>e))}values(){return new t(this.data,((t,e)=>t[e]))}entries(){return new t(this.data,((t,e)=>[e,t[e]]))}forEach(t){for(const e in this.data)t(this.data[e],e)}constructor(){this.data=Qn(),this.size=0}}}();var Zd=jd||function(){class t{next(){const t=this.jc.next();return t.done?t:{value:this.Yc(t.value),done:!1}}constructor(t,e){this.jc=t,this.Yc=e}}return class{get size(){return this.Zc.size}get(t){return this.Zc.get(""+t)}set(t,e){return this.Zc.set(""+t,e),this}has(t){return this.Zc.has(""+t)}delete(t){return this.Zc.delete(""+t)}clear(){this.Zc.clear()}keys(){return new t(this.Zc.keys(),(t=>Number(t)))}values(){return this.Zc.values()}entries(){return new t(this.Zc.entries(),(t=>{let[e,i]=t;return[Number(e),i]}))}forEach(t){this.Zc.forEach(((e,i)=>{t(e,Number(i))}))}constructor(){this.Zc=rs()}}}();var $r=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];v.apply(this,e)};($r.prototype=g.create(v.prototype)).constructor=$r;var f,Xs=class extends $r{get name(){return"BaseError"}constructor(t,e){super(),this.message=t||"Unknown error",this.cause=e,v.captureStackTrace&&v.captureStackTrace(this,this.constructor)}},Jd=class{Jc(){if(!this.$c&&!this.il){this.$c=!0;for(const t of this.ol.slice())t();this.hl()}}hl(){if(!this.il){this.il=!0;for(const t of this.al.slice())t();wr(this.ol),wr(this.al)}}ul(t){this.il||this.ol.push(t)}cl(t){this.il||so(this.ol,t)}ll(t){this.il||this.al.push(t)}dl(t){this.il||so(this.al,t)}constructor(){this.$c=!1,this.il=!1,this.ol=[],this.al=[]}},Zs=class t{get fl(){return this._l}vl(){this._l.Jc()}hl(){this._l.hl()}wl(t){const e=this._l;if(e.$c)return;if(t.$c)return void e.Jc();if(e.il||t.il)return;const i=()=>{s(),e.Jc()},s=()=>{t.cl(i),t.dl(s),e.cl(i),e.dl(s)};t.ul(i),t.ll(s),e.ul(i),e.ll(s)}yl(){const e=new t,i=new t,s=e.fl,n=i.fl,r=this._l,o=()=>{s.$c&&n.il||n.$c&&s.il?r.Jc():s.il&&n.il&&r.hl()};s.ul(o),n.ul(o),s.ll(o),n.ll(o),e.wl(r),i.wl(r);return r.ll((()=>{s.cl(o),n.cl(o),s.dl(o),n.dl(o)})),[e,i]}constructor(){this._l=new Jd}};var $d=()=>{},tf=t=>t;function ef(t,e){let i=-1/0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=f.Al();o-i>=e&&(t.apply(this,n),i=o)}}function Xn(t,e){let i=0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=this;0!==i&&f.bl(i),i=f.Tl((()=>{i=0,t.apply(o,n)}),e)}}function Rr(t){let e;return()=>(void 0!==t&&(e=t(),t=void 0),e)}var Sr=class extends Xs{get name(){return"AbortError"}constructor(t,e){super(t||"Aborted",e)}};function Lr(t){return t instanceof v&&"AbortError"===t.name}function gi(t){if(t&&t.$c)throw new Sr}function eo(t){if(Lr(t))throw t}function yr(t){if(!Lr(t))throw t}function sf(t,e){return e?new Promise(((i,s)=>{if(e.$c)return t.catch($d),s(new Sr);const n=()=>{e.cl(n),s(new Sr)};e.ul(n),t.then((t=>{e.cl(n),i(t)}),(t=>{e.cl(n),s(t)}))})):t}function oa(t,e){return t.then((t=>(e.hl(),t)),(t=>{throw e.hl(),t}))}function ts(t,e){const i=new Zs;return e&&i.wl(e),oa(t(i.fl),i)}var nf=Promise.resolve(),Ai="function"==typeof queueMicrotask?queueMicrotask:t=>{nf.then(t)};function Ui(t){t.then($d,$d)}async function rf(t){try{return await Promise.all(t)}catch(e){throw await Promise.all(t.map((t=>t.catch($d)))),e}}function ye(t,e){return new Promise(((i,s)=>{if(void 0!==e&&e.$c)return void s(new Sr);const n=f.Tl((()=>{void 0!==e&&e.cl(r),i()}),t),r=()=>{f.bl(n),s(new Sr)};void 0!==e&&e.ul(r)}))}function of(t,e,i){if("function"==typeof i)i.call(t,e);else for(const s of i)s.call(t,e)}var Qs,d=class{kn(t,e){if("function"==typeof e)if("string"==typeof t)this.Sl(t,e);else for(const i of t)this.Sl(i,e)}Sl(t,e){const i=this.El[t];void 0===i?this.El[t]=e:"function"==typeof i?this.El[t]=[i,e]:0===this.Pl?i.push(e):this.El[t]=i.concat(e)}Il(t){if("function"!=typeof t)return;const e=this.Rl;void 0===e?this.Rl=t:"function"==typeof e?this.Rl=[e,t]:0===this.Pl?e.push(t):this.Rl=e.concat(t)}Lo(){this.El=Qn(),this.Rl=void 0}To(t){this.Pl++;const e=this.El[t.type],i=this.Rl;void 0!==e&&of(this.Cl,t,e),void 0!==i&&of(this.Cl,t,i),this.Pl--}pn(t,e){if("function"==typeof e)if("string"==typeof t)this.xl(t,e);else for(const i of t)this.xl(i,e)}xl(t,e){const i=this.El[t];void 0!==i&&("function"==typeof i?i===e&&(this.El[t]=void 0):0===this.Pl?so(i,e):this.El[t]=Wd(i,e))}Dl(t){if("string"==typeof t)this.El[t]=void 0;else for(const e of t)this.El[e]=void 0}Nl(t){const e=this.Rl;void 0!==e&&("function"==typeof e?e===t&&(this.Rl=void 0):0===this.Pl?so(e,t):this.Rl=Wd(e,t))}Bl(t,e){return new Promise(((i,s)=>{if(e&&e.$c)return s(new Sr);const n=t=>{o(),i(t)},r=()=>{o(),s(new Sr)},o=()=>{this.pn(t,n),e&&e.cl(r)};this.kn(t,n),e&&e.ul(r)}))}constructor(t){this.El=Qn(),this.Rl=void 0,this.Pl=0,this.Rs=t=>{this.To(t)},this.Cl=null!=t?t:this}},hf=class extends d{To(t){Ai((()=>{super.To(t)}))}},Ro=class extends d{Il(t){super.Il(t)}Nl(t){super.Nl(t)}},ci=class extends Ro{get ht(){return this.Ol()}Ol(){return this.Ml.ht}Ll(){return this.Ml.Ll()}get Fl(){return this.Ul()}Ul(){return this.Ml.Fl}get Hl(){return this.Wl()}set Hl(t){this.ql(t)}Wl(){return this.Ml.Hl}ql(t){this.Ml.Hl=t}get bt(){return this.Vl()}Vl(){return this.Ml.bt}get zl(){return this.Xl()}set zl(t){this.Gl(t)}Xl(){return this.Ml.zl}Gl(t){this.Ml.zl=t}get ct(){return this.Ql()}Ql(){return this.Ml.ct}get Se(){return this.Kl()}Kl(){return this.Ml.Se}get jl(){return this.Yl()}Yl(){return this.Ml.jl}get lt(){return this.Zl()}get Jl(){return this.$l()}Zl(){return this.Ml.lt}$l(){return this.Ml.Jl}get td(){return this.ed()}ed(){return this.Ml.td}get rd(){return this.od()}od(){return this.Ml.rd}get hd(){return this.ud()}ud(){return this.Ml.hd}get ld(){return this.dd()}set ld(t){this.fd(t)}dd(){return this.Ml.ld}fd(t){this.Ml.ld=t}get _d(){return this.vd()}vd(){return this.Ml._d}get md(){return this.wd()}wd(){return this.Ml.md}get pd(){return this.yd()}set pd(t){this.Ad(t)}yd(){return this.Ml.pd}Ad(t){this.Ml.pd=t}get bd(){return this.Td()}Td(){return this.Ml.bd}get Sd(){return this.Ed()}set Sd(t){this.kd(t)}Ed(){return this.Ml.Sd}kd(t){this.Ml.Sd=t}get Pd(){return this.Id()}Id(){return this.Ml.Pd}get Rd(){return this.Cd()}Cd(){return this.Ml.Rd}get xd(){return this.Dd()}Dd(){return this.Ml.xd}Nd(){return this.Ml.Nd()}ba(t,e){return this.Ml.ba(t,e)}get nt(){return this.Bd()}Bd(){return this.Ml.nt}get Od(){return this.Md()}Md(){return this.Ml.Od}get rt(){return this.Ld()}Ld(){return this.Ml.rt}get Fd(){return this.Ud()}Ud(){return this.Ml.Fd}get Hd(){return this.Wd()}set Hd(t){this.qd(t)}get Vd(){return this.zd()}zd(){return this.Ml.Vd}Wd(){return this.Ml.Hd}qd(t){this.Ml.Hd=t}get Xd(){return this.Ml.Xd}set Xd(t){this.Ml.Xd=t}Gd(){return this.Ml.Gd()}Qd(){return this.Ml.Qd()}Kd(t){this.Ml.Kd(t)}jd(){this.Ml.jd()}we(){this.Ml.we()}Yd(){this.Ml.Yd()}Zd(){this.Ml.Zd()}Jd(){this.Ml.Jd()}be(){this.Ml.be()}$d(){return this.Ml.$d()}tf(){return this.Ml.tf()}ef(){this.Ml.ef()}if(){this.Ml.if()}ir(){return this.Ml.ir()}sf(){this.Ml.sf()}nf(){this.Ml.nf()}rf(t){return this.Ml.rf(t)}hf(t){return!1}async bn(){this.Lo(),await this.Ml.bn()}constructor(t){super(),this.uf=t=>{this.hf(t)||this.To(t)},this.Ml=t,t.Il(this.uf)}};!function(t){t.cf="lf",t.df="_f"}(Qs||(Qs={}));var Ci=class{constructor(t,e=new Date){this.type=t,this.date=e}},nu=class extends Ci{get ma(){return this.vf||(this.vf=this.pa()),this.vf}constructor(t,e){super(t,e),this.vf=void 0}};function af(t){return Boolean(t&&t.ma)}var Bs,jt=class extends nu{constructor(t){super(t)}},Ir=class extends Ci{constructor(t){super(t)}},uf=class extends jt{pa(){return new cf(this.Ht.ma)}constructor(t){super(Qs.cf),this.Ht=t}},cf=class extends Ir{constructor(t){super("addtrack"),this.track=t}},lf=class extends jt{pa(){return new df(this.Ht.ma)}constructor(t){super(Qs.df),this.Ht=t}},df=class extends Ir{constructor(t){super("removetrack"),this.track=t}};!function(t){t.gf="mf",t.wf="pf",t.yf="Af",t.bf="Tf",t.Sf="Ef",t.kf="Pf",t.oa="If",t.Rf="Cf",t.xf="Df",t.Nf="Kn",t.Bf="Of",t.Mf="Lf",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality"}(Bs||(Bs={}));var ff=class extends d{get Ff(){return this.Uf}get ma(){return this.vf||(this.vf=this.pa()),this.vf}get V(){return this.Uf.length}Hf(t){return this.Uf[t]}tt(t){return!(!t||Yi(this.Uf,t))&&(this.Uf.push(t),this.vf&&this.vf.push(t.ma),t.kn(Bs.oa,this.Rs),this.To(new uf(t)),!0)}it(t){if(!t)return!1;const e=this.Uf.indexOf(t);return!(e<0)&&(Zt(this.Uf,e),this.vf&&Zt(this.vf,e),t.pn(Bs.oa,this.Rs),this.To(new lf(t)),!0)}Wf(t){return Yi(this.Uf,t)}ir(){const t=this.Uf;for(let e=t.length-1;e>=0;e-=1)this.it(t[e])}bn(){this.ir(),this.Lo()}constructor(){super(),this.Uf=[],this.vf=void 0}},Ys=class extends jt{pa(){return new _f(this.Ht.ma)}constructor(t){super(Bs.oa),this.Ht=t}},_f=class extends Ir{constructor(t){super("change"),this.track=t}},Or=class extends ff{get qf(){return this.Vf}set qf(t){const e=this.Vf;if(t!==e){if(e){this.zf(e);for(const i of e.Ff)t&&t.Wf(i)||this.it(i)}if(this.Vf=t,t){const e=[];for(const i of t.Ff)this.tt(i),this.Xf(i)&&e.push(i);this.Gf(t);for(const t of e)t.To(new Ys(t))}}}Gf(t){t.kn(Qs.cf,this.Qf),t.kn(Qs.df,this.Kf)}zf(t){t.pn(Qs.cf,this.Qf),t.pn(Qs.df,this.Kf)}bn(){this.Vf&&this.Vf.bn(),super.bn()}constructor(){super(),this.Vf=void 0,this.Qf=t=>{const e=t.Ht;this.tt(e)},this.Kf=t=>{const e=t.Ht;this.it(e)}}},vf=g.freeze||tf;function gf(t,e,i){g.defineProperty(t,e,{writable:!1,enumerable:!0,value:i})}function mf(t){return vf(t)}function Dh(t,e){for(const i of g.getOwnPropertyNames(e))g.defineProperty(t,i,g.getOwnPropertyDescriptor(e,i));return t}function $a(t){if(B(t)){const e={};for(const i in t)N.call(t,i)&&(e[i]=$a(t[i]));return e}if(ya(t)){const e=new Array(t.length);for(let i=0;i<e.length;i++)i in t&&(e[i]=$a(t[i]));return e}return t}function qi(t,e){return t===e||!(!t||!e)&&(!(!or(t)||!or(e))&&(Qa(t)?!!Qa(e)&&function(t,e){const i=t.length,s=e.length;if(i!==s)return!1;for(let s=0;s<i;s+=1)if(!qi(t[s],e[s]))return!1;return!0}(t,e):!Qa(e)&&function(t,e){const i=g.keys(t),s=g.keys(e);if(!i||!s||i.length!==s.length)return!1;for(const s of i)if(!N.call(e,s)||!qi(t[s],e[s]))return!1;return!0}(t,e)))}function wf(t,e){return t.constructor===e.constructor}function pf(t){const e={};for(const i of g.keys(t)){const s=t[i];null!=s&&(e[i]=s)}return e}function yf(t){const e={};for(const i of g.keys(t)){const s=t[i];if(Qa(s)){const t=[];for(let e=0;e<s.length;e+=1){const i=s[e];if(null!=i){const e=or(i)?yf(i):i;t.push(e)}}e[i]=t}else null!=s&&(e[i]=or(s)?yf(s):s)}return e}function $u(t){let e=t;if("string"==typeof e){if(e=e.toLowerCase(),"true"===e)return!0;if("false"===e)return!1}return Boolean(e)}function is(t){return it(t)?$u(t):void 0}function ve(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function Af(t){const e=ve(t);if(j(e))throw new v("Expected a valid number.");return e}function ai(t){return"string"==typeof t?t:""}function bf(t,e){if(!Qa(t))return[];const i=0|t.length,s=new Array(i);for(let n=0;n<i;n++)s[n]=e(t[n]);return s}function Wo(t,e){let i;return i=Qa(t)?bf(t,e):e(t),i}var we,Tf=[Qs.cf,Qs.df,Bs.oa];function Sf(t){let e;const i=t.Ff.map((t=>t.ma));return i.item=e=>{const i=0|e,s=t.Hf(i);return s&&s.ma||void 0},i.addEventListener=(t,i)=>{e.kn(t,i)},i.removeEventListener=(t,i)=>{e.pn(t,i)},e=new hf(i),t.kn(Tf,(t=>e.To(t.ma))),i}function Ef(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function kf(){}function ni(t){const e=[Bs.Nf,Bs.oa,Bs.Bf,Bs.Mf,Bs.QUALITY_UNAVAILABLE];let i;const s={get activeQuality(){return t.jf&&t.jf.ma},get enabled(){return t.Ot},set enabled(e){t.Ot=$u(e)},get id(){return t.o},get uid(){return t.Yf},get kind(){return t.Lt},get label(){return t.jh},set label(e){t.jh=ai(e)},get accessibility(){var e,i;return null!=(i=null==(e=t.Zf)?void 0:e.map(Ef))?i:[]},get language(){return t.gs},get qualities(){return t.Jf.ma},set targetQuality(e){let i;i=e?function(t,e){const i=[];for(const s of t.Jf.Ff)for(const t of e)s.ma===t&&i.push(s);return i}(t,ya(e)?e:[e]):[],i.length>0?t.$f=i:t.$f=void 0},get targetQuality(){if(t.$f)return 1===t.$f.length?t.$f[0].ma:t.$f.map((t=>t.ma))},addEventListener(t,e){const s=Wo(t,ai);i.kn(s,e)},removeEventListener(t,e){const s=Wo(t,ai);i.pn(s,e)}};return i=new hf(s),t.kn(e,(t=>i.To(t.ma))),g.defineProperty(s,"constructor",{value:kf}),s}function Pf(){}function If(t){const e=Sf(t);return g.defineProperty(e,"constructor",{value:Pf}),e}!function(t){t[t.t_=0]="t_",t[t.e_=1]="e_",t[t.i_=2]="i_",t[t.s_=3]="s_",t[t.n_=4]="n_",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.r_=7]="r_"}(we||(we={}));var _s,lt,aa=class extends Or{pa(){return If(this)}Xf(t){return t.Ot}};function G(t){if("string"==typeof t){const e=t.toLowerCase();switch(e){case"disabled":case"hidden":case"showing":return e}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}function Rf(){}function bi(t){const e=[Bs.oa,Bs.Nf,Bs.gf,Bs.wf,Bs.bf,Bs.Sf,Bs.yf,Bs.kf,Bs.Rf,Bs.xf],i=[lt.aa];let s;const n={get kind(){return t.Lt},get label(){return t.jh},set label(e){t.jh=ai(e)},get language(){return t.gs},get id(){return t.o},get uid(){return t.Yf},get inBandMetadataTrackDispatchType(){return t.o_},get mode(){return t.h_},set mode(e){e!==_s.Jn&&e!==_s.a_&&e!==_s.Th||t.u_(e)},get forced(){return Boolean(t.c_)},get accessibility(){var e,i;return null!=(i=null==(e=t.Zf)?void 0:e.map(Ef))?i:[]},get type(){return t.l_},get readyState(){return t.Pd},get cues(){return t.h_===_s.Th?null:t.L.ma},get activeCues(){return t.h_===_s.Th?null:t.W.ma},get src(){return t.d_||""},addEventListener(t,e){const i=Wo(t,ai);s.kn(i,e)},removeEventListener(t,e){const i=Wo(t,ai);s.pn(i,e)}};return s=new hf(t),t.kn(e,(t=>s.To(t.ma))),t.kn(i,(t=>s.To(t))),g.defineProperty(n,"constructor",{value:Rf}),n}function Cf(){}function Gr(t){const e=Sf(t);return g.defineProperty(e,"constructor",{value:Cf}),e}!function(t){t.Th="disabled",t.a_="hidden",t.Jn="showing"}(_s||(_s={})),(lt||(lt={})).aa="error";var r,En,Mt=class extends Or{pa(){return Gr(this)}Xf(t){return t.h_===_s.Jn}},xf=.25,Df=400,Nf={f_:.2,__:.45,v_:.7,g_:3,m_:qf,w_:Vf},Bf={f_:.4,__:.65,v_:1,g_:3,m_:qf,w_:Vf},Of={f_:.4,__:.7,v_:.9,g_:3,m_:qf,w_:Vf},Mf={f_:.2,__:.45,v_:1,g_:3,m_:qf,w_:Vf},Lf={f_:.5,__:1.125,v_:1.75,g_:2.55,m_:qf,w_:Vf};function Ff(){let t;return t=f.Zs.p_?Mf:f.Zs.y_?Bf:f.Zs.A_?"Android"===f.T_.b_?Of:Nf:Lf,f.T_.S_?function(t){if(f.T_.S_){const e=(Df+250)/1e3,i=b.max(e,t.f_),s=b.max(i+xf,t.__),n=b.max(s+xf,t.v_);return{f_:i,__:s,v_:n,g_:b.max(n+xf,t.g_),m_:qf,w_:Vf}}return t}(t):t}function Uf(t){return{windowStart:t.f_,windowEnd:t.v_,target:t.__,maxOffset:t.g_}}!function(t){t.E_="k_",t.P_="I_",t.R_="contentprotectionerror",t.C_="contentprotectionsuccess",t.x_="currentsourcechange",t.D_="destroy",t.N_="durationchange",t.B_="emptied",t.O_="encrypted",t.M_="ended",t.L_="F_",t.U_="H_",t.W_="q_",t.V_="z_",t.X_="loadstart",t.G_="manifestupdate",t.Q_="nosupportedrepresentationfound",t.K_="offline",t.j_="online",t.Ch="pause",t.Ah="play",t.Y_="progress",t.Z_="ratechange",t.J_="representationchange",t.tv="resize",t.ev="seeked",t.rv="seeking",t.ov="segmentnotfound",t.hv="uv",t.fv="_v",t.do="sourcechange",t.vv="timeupdate",t.mv="volumechange",t.wv="pv",t.yv="metricschange"}(r||(r={})),function(t){t.Av="canplay",t.bv="canplaythrough",t.Tv="loadeddata",t.Sv="loadedmetadata",t.Rf="readystatechange",t.Ev="waiting",t.Pv="playing"}(En||(En={}));var Hf=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"];function no(){return no=g.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)g.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},no.apply(this,arguments)}var Wf,qf=.92,Vf=1.08;!function(t){t[t.Th=0]="Th",t[t.Iv=1]="Iv",t[t.Rv=2]="Rv"}(Wf||(Wf={}));var zf=class extends d{get Cv(){}get xv(){}get Dv(){}get Nv(){return!1}get Bv(){}get ma(){var t;return null!=(t=this.vf)?t:this.vf=Xf(this)}Ov(){}constructor(...t){super(...t),this.Mv=Uf(Ff())}};function Xf(t){return{goLive:()=>t.Ov(),get isLive(){return t.Nv},get currentServerLiveTime(){return t.Cv},get currentLatency(){return t.xv},get latencies(){return t.Dv},get latency(){return t.Mv},set latency(e){if(!function(t){if(!or(t))return!1;const e=t,i=it(e.target)&&"number"==typeof e.target&&it(e.windowEnd)&&"number"==typeof e.windowEnd&&it(e.windowStart)&&"number"==typeof e.windowStart&&it(e.maxOffset)&&"number"==typeof e.maxOffset,s=e.windowStart>=0&&e.windowStart<=e.target&&e.target<=e.windowEnd&&e.maxOffset>=e.windowEnd;return i&&s}(e))throw new v("Invalid latency configuration");t.Mv=e},get manifest(){return t.Bv},addEventListener(e,i){t.kn(Qf(e),i)},removeEventListener(e,i){t.pn(Qf(e),i)}}}var Gf=["golive","latencyrecoveryseek"];function Qf(t){const e=Wo(t,ai);return(Ts(e)?[e]:e).filter((t=>Yi(Gf,t)))}var au=class extends d{set qf(t){const e=this.Vf;t!==e&&(e&&this.zf(e),t&&this.Gf(t),this.Vf=t,this.Vf&&(this.Vf.Mv=this.Lv))}get qf(){return this.Vf}get ma(){return this.vf||(this.vf=Xf(this)),this.vf}Gf(t){t.kn(Gf,this.Rs)}zf(t){t.pn(Gf,this.Rs)}Ov(){var t;null==(t=this.Vf)||t.Ov()}get Cv(){var t;return null==(t=this.Vf)?void 0:t.Cv}get xv(){var t;return null==(t=this.Vf)?void 0:t.xv}get Dv(){var t;return null==(t=this.Vf)?void 0:t.Dv}get Nv(){return!!this.Vf&&this.Vf.Nv}get Mv(){return this.Vf?this.Vf.Mv:this.Lv}set Mv(t){this.Vf&&(this.Vf.Mv=t),this.Lv=t}get Bv(){var t;return null==(t=this.Vf)?void 0:t.Bv}bn(){this.Lo(),this.Vf&&this.zf(this.Vf),this.Vf=void 0}constructor(){super(),this.Vf=void 0,this.vf=void 0,this.Lv=Uf(Ff()),this.Vf=void 0}},Kf="function"==typeof String.prototype.replaceAll?(t,e,i)=>t.replaceAll(e,i):(t,e,i)=>t.split(e).join(i);function Ei(t,e){return it(t)&&-1!==t.indexOf(e)}var bt="function"==typeof String.prototype.startsWith?(t,e)=>it(t)&&t.startsWith(e):(t,e)=>it(t)&&t.substr(0,e.length)===e,pi="function"==typeof String.prototype.endsWith?(t,e)=>it(t)&&t.endsWith(e):(t,e)=>it(t)&&t.substr(t.length-e.length,e.length)===e;function jf(t,e){return t.length===e.length&&t.toUpperCase()===e.toUpperCase()}var Yf="function"==typeof String.prototype.repeat?(t,e)=>t.repeat(e):(t,e)=>{let i=0|e;if(0===t.length||0===i)return"";let s=t,n="";for(;1==(1&i)&&(n+=s),i>>>=1,0!==i;)s+=s;return n},Qt="function"==typeof String.prototype.padStart?(t,e,i)=>(void 0===i&&(i=" "),t.padStart(e,i)):(t,e,i)=>{void 0===i&&(i=" ");let s=i;const n=(0|e)-t.length;return n<=0?t:(n>s.length&&(s+=Yf(s,n/s.length)),s.slice(0,n)+t)},Zf=(String.prototype.padEnd,16384),Jf="function"==typeof String.fromCodePoint?t=>t.length<=Zf?String.fromCodePoint(...t):$f(t,String.fromCodePoint):t=>{const e=[];for(let i of t)i>65535&&(i-=65536,e.push(i>>>10&1023|55296),i=56320|1023&i),e.push(i);return Gn(e)};function Gn(t){return t.length<=Zf?String.fromCharCode(...t):$f(t,String.fromCharCode)}function $f(t,e){const i=[];for(let s=0;s<t.length;s+=Zf)i.push(e(...t.slice(s,s+Zf)));return i.join("")}function t_(t){return t.replace(/[\\"]/g,(t=>"\\"+t))}function zr(t,e){for(const i of g.keys(e))t.searchParams.set(i,e[i])}function eh(t,e){let i=f.Fv(t);return e&&!pi(i,"/")&&(i+="/"),i}var e_=/cache:(.+)?(?=&|$)/,i_="http://webcache.googleusercontent.com/search?q=cache:";function s_(t){if(!bt(t,i_))return"";const e=f.Oh(t).search.match(e_);return e&&e.length>1?e[1]:""}function n_(t){return f.Oh(".",t)}var Zn,po,Gi,r_="8E80B9CE";function o_(t){return{appID:t&&t.appID?ai(t.appID):r_}}function Ur(t){if(null!==t)return t}function h_(t){const e={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:Ur(t.streamActivityMonitorID),adTagParameters:or(t.adTagParameters)?t.adTagParameters:{},authToken:Ur(t.authToken),omidAccessModeRules:Ur(t.omidAccessModeRules)};if("vod"===(null==t?void 0:t.availabilityType)||function(t){const e=t;return Boolean(e.videoID&&e.contentSourceID)}(t)){const i=t.videoID,s=t.contentSourceID;return i?s?no({},e,{availabilityType:"vod",videoID:i,contentSourceID:s}):void f.Uv("A VOD DAI configuration was provided without valid contentSourceID which is required."):void f.Uv("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const e=t;return Boolean(e.assetKey)}(t)){const i=t.assetKey;return i?no({},e,{availabilityType:"live",assetKey:i}):void f.Uv("A Live DAI configuration was provided without valid assetKey which is required.")}f.Uv("A DAI configuration was provided without a valid availabilityType which is required.")}function a_(t){switch(t.integration){case"google-dai":return h_(t);case"imagine":return function(t){return{integration:t.integration}}(t);case"yospace":return function(t){var e;return{integration:t.integration,streamType:null!=(e=t.streamType)?e:void 0}}(t);default:return{integration:t.integration}}}!function(t){t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled"}(Zn||(Zn={})),function(t){t.Hv="",t.Wv="anonymous",t.qv="use-credentials"}(po||(po={})),function(t){t.Vv="application/dash+xml",t.zv="application/vnd.apple.mpegurl",t.Xv="application/x-mpegurl",t.Gv="video/mp4",t.Qv="application/vnd.theoplayer.hesp+json",t.Kv="application/vnd.theo.hesp+json"}(Gi||(Gi={}));var Do,Lh,kh="titanium",Wr="conax",u_="ezdrm",c_="irdeto",l_="vudrm",Hn="verimatrix",d_="keyos",f_="drmtoday",__="expressplay",Hr="azure",v_="xstream",g_="vimond",m_="axinom",tr="uplynk",w_="comcast",p_="custom";function y_(t){return it(t.token&&t.deviceId)}function A_(t){var e;const i=null==(e=t.fairplay)?void 0:e.headers;return void 0!==i&&it(i.PreAuthorization)}function b_(t){const e=t;return y_(e)&&""!==e.token&&""!==e.deviceId&&!A_(e)}!function(t){t.Yv="playready",t.Zv="widevine",t.Jv="fairplay",t.$v="clearkey",t.eg="aes128"}(Do||(Do={})),function(t){t.rg=!1,t.og=!1,t.hg=!1,t.ag=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.cg=!1,t.dg=!1,t.LOG_LCEVC_DETAILS=!1}(Lh||(Lh={}));var io=class extends Xs{get name(){return"THEOplayerError"}get category(){return Cr.fromCode(this.code)}constructor(t,e,i){super(e,i),this.code=t}};var _r=class extends io{get name(){return"ContentProtectionError"}constructor(t,e,i,s,n,r,o,h){super(t,e,i),this.url=s,this.status=n,this.statusText=r,this.response=o,this.systemCode=h}};var Wh,T_=class{get fg(){return this._g}get vg(){return this.gg}wg(t){return function(t){const e=t.onCertificateRequest;if(void 0!==e&&"function"!=typeof e)throw new p("ContentProtectionIntegration.onCertificateRequest is not a function.");const i=t.onCertificateResponse;if(void 0!==i&&"function"!=typeof i)throw new p("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new p("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new p("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new p("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.pg.build(t))}constructor(t,e,i){this._g=t,this.gg=e,this.pg=i}};!function(t){t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED"}(Wh||(Wh={}));var S_,Fu=class{registerContentProtectionIntegration(t,e,i){switch(this.yg(t,e,i)){case Wh.FAILED:throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+e+".");case Wh.OVERRIDDEN:{const i=wh(e);f.Uv("Warning: Overwriting an earlier registered integration for "+t+" and "+i+".");break}case Wh.SUCCEEDED:wh(e);0;break}}yg(t,e,i){const s=wh(e);if(!s)return Wh.FAILED;let n=Wh.SUCCEEDED;for(const e of this.Ag.slice())e.fg===t&&e.vg===s&&(n=Wh.OVERRIDDEN,so(this.Ag,e));return this.Ag.push(new T_(t,s,i)),n}Tg(t,e){return void 0!==this.Sg(t,e)}Eg(t,e,i){const s=this.Sg(t,e);if(!s)throw v("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+e);return s.wg(i)}Sg(t,e){for(const i of this.Ag)if(i.fg===t&&(!e||i.vg===e))return i}constructor(){this.Ag=[]}};Fu.Pg=new Fu,function(t){t.Yv="9a04f079-9840-4286-ab92-e65be0885f95",t.Zv="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t.$v="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.Jv="94ce86fb-07ff-4f43-adb8-93d2fa968ca2"}(S_||(S_={}));var E_,k_,oi,Ha,J,P_="urn:mpeg:dash:mp4protection:2011",I_="cenc",R_="sinf",C_="skd",x_="9a04f079-9840-4286-ab92-e65be0885f95",Ks="urn:uuid:"+x_,Sh="com.microsoft.playready",D_="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Ua="urn:uuid:"+D_,N_="com.widevine.alpha",B_="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",O_="urn:uuid:"+B_,M_="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",_i="urn:uuid:"+M_,L_="com.apple.fps.1_0",F_="com.apple.streamingkeydelivery",U_="identity";!function(t){t.Ig="moov",t.Rg="mvhd",t.Cg="trak",t.xg="tkhd",t.Dg="mdia",t.Ng="mdhd",t.Bg="hdlr",t.Og="minf",t.Mg="stbl",t.Lg="stsd",t.Fg="stsc",t.Ug="mvex",t.Hg="trex",t.Wg="avc1",t.qg="avcC",t.Vg="hev1",t.zg="hvc1",t.Xg="hvcC",t.Gg="vp09",t.Qg="vpcC",t.Kg="av01",t.jg="av1C",t.Yg="colr",t.Zg="pasp",t.Jg="mp4a",t.$g="esds",t.tm="wvtt",t.im="vttC",t.nm="vlab",t.hm="enca",t.um="encv",t.lm="moof",t.dm="mfhd",t.fm="traf",t._m="tfhd",t.vm="trun",t.gm="tfdt",t.wm="senc",t.pm="mdat",t.ym="pssh",t.Am="emsg",t.Tm="sidx",t.Sm="styp",t.Em="ftyp",t.Pm="sinf",t.Im="frma"}(E_||(E_={})),function(t){t.Rm="vide",t.Cm="soun",t.xm="subt",t.Dm="hint",t.Nm="meta",t.Bm="auxv"}(k_||(k_={})),function(t){t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof"}(oi||(oi={})),function(t){t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF"}(Ha||(Ha={})),function(t){t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT"}(J||(J={}));var $h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),H_=16383,W_=/[\t\n\f\r ]/g;function q_(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:V_()}function V_(){throw new v("Invalid base64 input")}function ea(t){let e=t;W_.test(e)&&(e=e.replace(W_,""));let i=e.length;i%4==0&&i>=1&&"="===e[i-1]&&(i>=2&&"="===e[i-2]?i-=2:i-=1,e=e.substr(0,i));const s=i%4;if(1===s)return V_();const n=0===s?0:4-s,r=new S(function(t,e){return 3*(t+e)/4-e}(i,n)),o=n>0?i-4:i;let h,a=0,u=0;for(;a<o;a+=4)h=q_(e.charCodeAt(a))<<18|q_(e.charCodeAt(a+1))<<12|q_(e.charCodeAt(a+2))<<6|q_(e.charCodeAt(a+3)),r[u++]=h>>16&255,r[u++]=h>>8&255,r[u++]=255&h;return 2===n?(h=q_(e.charCodeAt(a))<<2|q_(e.charCodeAt(a+1))>>4,r[u++]=255&h):1===n&&(h=q_(e.charCodeAt(a))<<10|q_(e.charCodeAt(a+1))<<4|q_(e.charCodeAt(a+2))>>2,r[u++]=h>>8&255,r[u++]=255&h),r}function z_(t,e,i){return $h[t>>2]+$h[(3&t)<<4|e>>4]+$h[(15&e)<<2|i>>6]+$h[63&i]}function X_(t,e,i){const s=[];for(let n=e;n<i;n+=3)s.push(z_(t[n],t[n+1],t[n+2]));return s.join("")}function xe(t){const e=t.length,i=e%3,s=[],n=e-i;for(let e=0;e<n;e+=H_)s.push(X_(t,e,b.min(n,e+H_)));if(1===i){const i=t[e-1];s.push($h[i>>2]+$h[(3&i)<<4]+"==")}else if(2===i){const i=t[e-2],n=t[e-1];s.push($h[i>>2]+$h[(3&i)<<4|n>>4]+$h[(15&n)<<2]+"=")}return s.join("")}function G_(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}var Q_=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],K_=ArrayBuffer.isView||(t=>t&&Yi(Q_,Pr.call(t)));function j_(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;return Ki(new S(t),new S(e))}function Ki(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let i=0;i<t.length;i+=1)if(t[i]!==e[i])return!1;return!0}function Y_(t){const e=t.reduce(((t,e)=>t+e.byteLength),0);return Z_(t,e)}function Z_(t,e){const i=new S(e);let s=0;for(const e of t)i.set(e,s),s+=e.byteLength;return i}function J_(t,e,i){const s=new S(t.byteLength+e.byteLength),n=ph(t,0,i),r=ph(t,i);return s.set(n),s.set(e,i),s.set(r,i+e.byteLength),s}function Pu(t){return ea(t).buffer}function $_(t){return xe(new S(t))}function Ni(t){return xe(Oi(t))}function U(t,e){const i=e.Om,s=t.getUint8(i>>3),n=1<<7-(7&i);return e.Mm(1),(s&n)===n?1:0}function Ii(t,e,i){let s=0;for(let n=0;n<i;n++)s=2*s+U(t,e);return s}var Jr=class t{get Om(){return this.Lm}Mm(t){this.Lm+=t}Fm(t){this.Lm=t}Um(){return new t(this.Om)}constructor(t=0){this.Lm=t}};var tv=b.clz32||function(t){let e=32,i=t>>16;return i&&(e-=16,t=i),i=t>>8,i&&(e-=8,t=i),i=t>>4,i&&(e-=4,t=i),i=t>>2,i&&(e-=2,t=i),i=t>>1,i?e-2:e-t},Wa=null;try{Wa=new WebAssembly.Instance(new WebAssembly.Module(new S([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(i){}function dt(t,e,i){this.low=0|t,this.high=0|e,this.unsigned=!!i}function Hs(t){return!0===(t&&t.Hm)}function ev(t){var e=b.clz32(t&-t);return t?31-e:e}dt.prototype.Hm,g.defineProperty(dt.prototype,"Hm",{value:!0}),dt.isLong=Hs;var iv={},sv={};function nv(t,e){var i,s,n;return e?(n=0<=(t>>>=0)&&t<256)&&(s=sv[t])?s:(i=vu(t,0,!0),n&&(sv[t]=i),i):(n=-128<=(t|=0)&&t<128)&&(s=iv[t])?s:(i=vu(t,t<0?-1:0,!1),n&&(iv[t]=i),i)}function rv(t,e){if(j(t))return e?uo:H;if(e){if(t<0)return uo;if(t>=uv)return vv}else{if(t<=-cv)return js;if(t+1>=cv)return _v}return t<0?rv(-t,e).neg():vu(t%av|0,t/av|0,e)}function vu(t,e,i){return new dt(t,e,i)}dt.fromInt=nv,dt.fromNumber=rv,dt.fromBits=vu;var ov=b.pow;function hv(t,e,i){if(0===t.length)throw v("empty string");if("number"==typeof e?(i=e,e=!1):e=!!e,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e?uo:H;if((i=i||10)<2||36<i)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw v("interior hyphen");if(0===s)return hv(t.substring(1),e,i).neg();for(var n=rv(ov(i,8)),r=H,o=0;o<t.length;o+=8){var h=b.min(8,t.length-o),a=k(t.substring(o,o+h),i);if(h<8){var u=rv(ov(i,h));r=r.mul(u).add(rv(a))}else r=(r=r.mul(n)).add(rv(a))}return r.unsigned=e,r}function Y(t,e){return"number"==typeof t?rv(t,e):"string"==typeof t?hv(t,e):vu(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}dt.fromString=hv,dt.fromValue=Y;var av=4294967296,uv=av*av,cv=uv/2,lv=nv(1<<24),H=nv(0);dt.ZERO=H;var uo=nv(0,!0);dt.UZERO=uo;var Hh=nv(1);dt.ONE=Hh;var dv=nv(1,!0);dt.UONE=dv;var fv=nv(-1);dt.NEG_ONE=fv;var _v=vu(-1,2147483647,!1);dt.MAX_VALUE=_v;var vv=vu(-1,-1,!0);dt.MAX_UNSIGNED_VALUE=vv;var js=vu(0,-2147483648,!1);dt.MIN_VALUE=js;var jo=dt.prototype;jo.toInt=function(){return this.unsigned?this.low>>>0:this.low},jo.toNumber=function(){return this.unsigned?(this.high>>>0)*av+(this.low>>>0):this.high*av+(this.low>>>0)},jo.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(js)){var e=rv(t),i=this.div(e),s=i.mul(e).sub(this);return i.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=rv(ov(t,6),this.unsigned),r=this,o="";;){var h=r.div(n),a=(r.sub(h.mul(n)).toInt()>>>0).toString(t);if((r=h).isZero())return a+o;for(;a.length<6;)a="0"+a;o=""+a+o}},jo.getHighBits=function(){return this.high},jo.getHighBitsUnsigned=function(){return this.high>>>0},jo.getLowBits=function(){return this.low},jo.getLowBitsUnsigned=function(){return this.low>>>0},jo.getNumBitsAbs=function(){if(this.isNegative())return this.eq(js)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},jo.isZero=function(){return 0===this.high&&0===this.low},jo.eqz=jo.isZero,jo.isNegative=function(){return!this.unsigned&&this.high<0},jo.isPositive=function(){return this.unsigned||this.high>=0},jo.isOdd=function(){return 1==(1&this.low)},jo.isEven=function(){return 0==(1&this.low)},jo.equals=function(t){return Hs(t)||(t=Y(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},jo.eq=jo.equals,jo.notEquals=function(t){return!this.eq(t)},jo.neq=jo.notEquals,jo.ne=jo.notEquals,jo.lessThan=function(t){return this.comp(t)<0},jo.lt=jo.lessThan,jo.lessThanOrEqual=function(t){return this.comp(t)<=0},jo.lte=jo.lessThanOrEqual,jo.le=jo.lessThanOrEqual,jo.greaterThan=function(t){return this.comp(t)>0},jo.gt=jo.greaterThan,jo.greaterThanOrEqual=function(t){return this.comp(t)>=0},jo.gte=jo.greaterThanOrEqual,jo.ge=jo.greaterThanOrEqual,jo.compare=function(t){if(Hs(t)||(t=Y(t)),this.eq(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},jo.comp=jo.compare,jo.negate=function(){return!this.unsigned&&this.eq(js)?js:this.not().add(Hh)},jo.neg=jo.negate,jo.add=function(t){Hs(t)||(t=Y(t));var e=this.high>>>16,i=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=0,u=0,c=0,l=0;return c+=(l+=n+(65535&t.low))>>>16,u+=(c+=s+h)>>>16,a+=(u+=i+o)>>>16,a+=e+r,vu((c&=65535)<<16|(l&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},jo.subtract=function(t){return Hs(t)||(t=Y(t)),this.add(t.neg())},jo.sub=jo.subtract,jo.multiply=function(t){if(this.isZero())return this;if(Hs(t)||(t=Y(t)),Wa)return vu(Wa.mul(this.low,this.high,t.low,t.high),Wa.get_high(),this.unsigned);if(t.isZero())return this.unsigned?uo:H;if(this.eq(js))return t.isOdd()?js:H;if(t.eq(js))return this.isOdd()?js:H;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(lv)&&t.lt(lv))return rv(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,i=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=65535&t.low,u=0,c=0,l=0,d=0;return l+=(d+=n*a)>>>16,c+=(l+=s*a)>>>16,l&=65535,c+=(l+=n*h)>>>16,u+=(c+=i*a)>>>16,c&=65535,u+=(c+=s*h)>>>16,c&=65535,u+=(c+=n*o)>>>16,u+=e*a+i*h+s*o+n*r,vu((l&=65535)<<16|(d&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},jo.mul=jo.multiply,jo.divide=function(t){if(Hs(t)||(t=Y(t)),t.isZero())throw v("division by zero");var e,i,s;if(Wa)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?vu((this.unsigned?Wa.div_u:Wa.div_s)(this.low,this.high,t.low,t.high),Wa.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?uo:H;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return uo;if(t.gt(this.shru(1)))return dv;s=uo}else{if(this.eq(js))return t.eq(Hh)||t.eq(fv)?js:t.eq(js)?Hh:(e=this.shr(1).div(t).shl(1)).eq(H)?t.isNegative()?Hh:fv:(i=this.sub(t.mul(e)),s=e.add(i.div(t)));if(t.eq(js))return this.unsigned?uo:H;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=H}for(i=this;i.gte(t);){e=b.max(1,b.floor(i.toNumber()/t.toNumber()));for(var n=b.ceil(b.log(e)/b.LN2),r=n<=48?1:ov(2,n-48),o=rv(e),h=o.mul(t);h.isNegative()||h.gt(i);)h=(o=rv(e-=r,this.unsigned)).mul(t);o.isZero()&&(o=Hh),s=s.add(o),i=i.sub(h)}return s},jo.div=jo.divide,jo.modulo=function(t){return Hs(t)||(t=Y(t)),Wa?vu((this.unsigned?Wa.rem_u:Wa.rem_s)(this.low,this.high,t.low,t.high),Wa.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},jo.mod=jo.modulo,jo.rem=jo.modulo,jo.not=function(){return vu(~this.low,~this.high,this.unsigned)},jo.countLeadingZeros=function(){return this.high?b.clz32(this.high):b.clz32(this.low)+32},jo.clz=jo.countLeadingZeros,jo.countTrailingZeros=function(){return this.low?ev(this.low):ev(this.high)+32},jo.ctz=jo.countTrailingZeros,jo.and=function(t){return Hs(t)||(t=Y(t)),vu(this.low&t.low,this.high&t.high,this.unsigned)},jo.or=function(t){return Hs(t)||(t=Y(t)),vu(this.low|t.low,this.high|t.high,this.unsigned)},jo.xor=function(t){return Hs(t)||(t=Y(t)),vu(this.low^t.low,this.high^t.high,this.unsigned)},jo.shiftLeft=function(t){return Hs(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?vu(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):vu(0,this.low<<t-32,this.unsigned)},jo.shl=jo.shiftLeft,jo.shiftRight=function(t){return Hs(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?vu(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):vu(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},jo.shr=jo.shiftRight,jo.shiftRightUnsigned=function(t){return Hs(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?vu(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):vu(32===t?this.high:this.high>>>t-32,0,this.unsigned)},jo.shru=jo.shiftRightUnsigned,jo.shr_u=jo.shiftRightUnsigned,jo.rotateLeft=function(t){var e;return Hs(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?vu(this.high,this.low,this.unsigned):t<32?(e=32-t,vu(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(e=32-(t-=32),vu(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))},jo.rotl=jo.rotateLeft,jo.rotateRight=function(t){var e;return Hs(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?vu(this.high,this.low,this.unsigned):t<32?(e=32-t,vu(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(e=32-(t-=32),vu(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))},jo.rotr=jo.rotateRight,jo.toSigned=function(){return this.unsigned?vu(this.low,this.high,!1):this},jo.toUnsigned=function(){return this.unsigned?this:vu(this.low,this.high,!0)},jo.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},jo.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},jo.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},dt.fromBytes=function(t,e,i){return i?dt.fromBytesLE(t,e):dt.fromBytesBE(t,e)},dt.fromBytesLE=function(t,e){return new dt(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},dt.fromBytesBE=function(t,e){return new dt(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};var rt=dt;function gv(t,e){return t.lessThan(e)?t:e}function mv(t){if(t>=55296&&t<=57343)throw new v("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function wv(t,e){return t>>e&63|128}function pv(t,e){0!=(4294967168&t)?(0==(4294965248&t)?e.push(t>>6&31|192):0==(4294901760&t)?(mv(t),e.push(t>>12&15|224),e.push(wv(t,6))):0==(4292870144&t)&&(e.push(t>>18&7|240),e.push(wv(t,12)),e.push(wv(t,6))),e.push(63&t|128)):e.push(t)}function yv(t,e){if(e.Om>=t.length)throw new v("Invalid byte index");const i=255&t[e.Om];if(e.Mm(1),128==(192&i))return 63&i;throw new v("Invalid continuation byte")}function Av(t,e){const i=e.Om;if(i>t.length)throw new v("Invalid byte index");if(i===t.length)return!1;const s=255&t[i];if(e.Mm(1),0==(128&s))return s;if(192==(224&s)){const i=(31&s)<<6|yv(t,e);if(i>=128)return i;throw new v("Invalid continuation byte")}if(224==(240&s)){const i=(15&s)<<12|yv(t,e)<<6|yv(t,e);if(i>=2048)return mv(i),i;throw new v("Invalid continuation byte")}if(240==(248&s)){const i=(7&s)<<18|yv(t,e)<<12|yv(t,e)<<6|yv(t,e);if(i>=65536&&i<=1114111)return i}throw new v("Invalid UTF-8 detected")}var bv=65279;var Tv=[128,64,32,16,8,4,2,1],Sv=class{Wm(t){return Ev(this.qm,t)}constructor(t){this.qm=t}};function Ev(t,e){return(t&e)===e}function tt(t,e){return Ev(t,Tv[e])}function Fo(t,e){const i=t.getUint8(e.Om);return e.Mm(1),i}function kv(t,e,i){t.setUint8(e.Om,i),e.Mm(1)}function M(t,e,i){const s=ph(fi(t),e.Om,e.Om+i);return e.Mm(s.byteLength),s}function Pv(t,e,i){fi(t).set(fi(i),e.Om),e.Mm(i.byteLength)}function Iv(t,e,i){return e.Om+i<=t.byteLength}function Zh(t,e,i,s){return void 0===s&&(s=!1),s?function(t,e,i){let s=0,n=1;for(let r=0;r<i;r++)s+=Fo(t,e)*n,n*=256;return s}(t,e,i):function(t,e,i){let s=0;for(let n=0;n<i;n++)s=256*s+Fo(t,e);return s}(t,e,i)}function Go(t,e,i){void 0===i&&(i=!1);const s=t.getUint16(e.Om,i);return e.Mm(2),s}function Rv(t,e,i,s){void 0===s&&(s=!1),t.setUint16(e.Om,i,s),e.Mm(2)}function to(t,e,i){void 0===i&&(i=!1);const s=t.getUint32(e.Om,i);return e.Mm(4),s}function at(t,e,i,s){void 0===s&&(s=!1),t.setUint32(e.Om,i,s),e.Mm(4)}function R(t,e,i){void 0===i&&(i=!1);const s=to(t,e,i),n=to(t,e,i),r=i?n:s,o=i?s:n;return rt.fromBits(o,r,!0)}function Cv(t,e,i,s){void 0===s&&(s=!1);const n=i.getHighBitsUnsigned(),r=i.getLowBitsUnsigned(),o=s?n:r;at(t,e,s?r:n,s),at(t,e,o,s)}function xv(t,e){return de(t,e)}function Ka(t,e,i){return Gn(sr(M(t,e,i)))}function Dv(t,e){const i=Fo(t,e);let s;return 0==(128&i)?s=i:192==(224&i)?s=64*(31&i)+(63&Fo(t,e)):224==(240&i)?s=4096*(15&i)+64*(63&Fo(t,e))+(63&Fo(t,e)):240==(248&i)&&(s=262144*(7&i)+4096*(63&Fo(t,e))+64*(63&Fo(t,e))+(63&Fo(t,e))),s}function de(t,e){return Nv(t,e,!0)}function Nv(t,e,i){const s=[];for(;e.Om<t.byteLength;){const n=Fo(t,e);if(i&&!n)break;s.push(n)}return Gn(s)}function Bv(t,e,i){const s=i.length;for(let n=0;n<s;n+=1){kv(t,e,i.charCodeAt(n))}}function Ov(t,e){if(!(e.Om+2<=t.byteLength))return;const i=t.getUint8(e.Om),s=t.getUint8(e.Om+1);return(254!==i||255!==s)&&(255===i&&254===s||void 0)}function Mv(t,e){const i=Ov(t,e);return void 0!==i&&e.Mm(2),Ri(t,e,!0===i)}function Ri(t,e,i){return void 0===i&&(i=!1),Lv(t,e,i,!0)}function Lv(t,e,i,s){const n=[];for(;e.Om+2<=t.byteLength;){const r=Go(t,e,i);if(s&&!r)break;n.push(r)}return Gn(n)}function Fv(t,e,i,s){void 0===s&&(s=!1);const n=i.length;for(let r=0;r<n;r+=1){Rv(t,e,i.charCodeAt(r),s)}}function ki(t){return Nv(wa(t),new ds,!1)}function Oi(t){const e=new S(t.length);return Bv(wa(e),new ds,t),e}function Uv(t,e){return void 0===e&&(e=!1),Lv(wa(t),new ds,e,!1)}function er(t,e){void 0===e&&(e=!1);const i=new S(2*t.length);return Fv(wa(i),new ds,t,e),i}function Hv(t,e){return e.Om+3<=t.byteLength&&(239===t.getUint8(e.Om)&&187===t.getUint8(e.Om+1)&&191===t.getUint8(e.Om+2))}function zh(t,e){return function(t,e,i){const s=[],n=Hv(t,e);n&&e.Mm(3);for(;e.Om<t.byteLength;){const n=Dv(t,e);if(void 0===n)break;if(i&&0===n)break;s.push(n)}return Jf(s)}(t,e,!0)}function Li(t){return function(t){return Jf(t)}(function(t,e){const i=[],s=new ds;let n;if(!e){if(n=Av(t,s),!1===n)return i;n===bv||i.push(n)}for(;!1!==(n=Av(t,s));)i.push(n);return i}(fi(t)))}function Wv(t){return new S(function(t){const e=[];for(const i of t)pv(i,e);return e}(function(t){const e=[];let i=0;const s=t.length;for(;i<s;){const n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<s){const s=t.charCodeAt(i++);56320==(64512&s)?e.push(((1023&n)<<10)+(1023&s)+65536):(e.push(n),i--)}else e.push(n)}return e}(t)))}function Rh(t,e){if(Hv(t,e))return zh(t,e);if(void 0!==Ov(t,e))return Mv(t,e);if(e.Om+4<=t.byteLength){if(0===t.getUint8(e.Om)&&0===t.getUint8(e.Om+2))return Ri(t,e,!1);if(0===t.getUint8(e.Om+1)&&0===t.getUint8(e.Om+3))return Ri(t,e,!0)}return zh(t,e)}function ph(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new S(t.buffer,t.byteOffset+e,i-e)}function et(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new DataView(t.buffer,t.byteOffset+e,i-e)}function wa(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function fi(t){return new S(t.buffer,t.byteOffset,t.byteLength)}function qv(t){return t instanceof ArrayBuffer||K_(t)}function Js(t){return t instanceof ArrayBuffer?new S(t):fi(t)}function Na(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),t.slice?t.slice(e,i):hh(ph(t,e,i))}function hh(t){if(t.slice)return t.slice(0);{const e=new S(t.byteLength);return e.set(t,0),e}}function sr(t){return[].slice.call(t)}var ds=class t{get Om(){return this.Lm}Mm(t){this.Lm+=t}Fm(t){this.Lm=t}Um(){return new t(this.Om)}Vm(){return new Jr(this.Om<<3)}constructor(t=0){this.Lm=t}};function Vv(t){let e=t.toLowerCase(),i=0,s=0;bt(e,"0x")&&(e=e.substring(2));const n=new S(b.ceil(e.length/2));for(1==(1&e.length)&&(i=1,n[s++]=k(e[0],16));i<e.length;i+=2)n[s++]=k(e.substr(i,2),16);return n}var Nh=class t{zm(){return Fo(this.Xm,this.Gm)}Qm(){return Go(this.Xm,this.Gm)}Km(){return function(t,e,i){void 0===i&&(i=!1);const s=t.getInt16(e.Om,i);return e.Mm(2),s}(this.Xm,this.Gm)}jm(){return to(this.Xm,this.Gm)}Ym(){return function(t,e,i){void 0===i&&(i=!1);const s=t.getInt32(e.Om,i);return e.Mm(4),s}(this.Xm,this.Gm)}Zm(){return R(this.Xm,this.Gm)}Jm(t){return M(this.Xm,this.Gm,t)}$m(t){return function(t,e,i){const s=[];for(let n=0;n<i;n++)s.push(to(t,e));return s}(this.Xm,this.Gm,t)}ew(t){return Ka(this.Xm,this.Gm,t)}iw(){return zh(this.Xm,this.Gm)}nw(t){this.Gm.Mm(t)}Um(){return new t(this.Xm,this.Gm.Um())}constructor(t,e){this.Xm=t,this.Gm=e}};function zv(t,e){return t.l_===e}function Yo(t,e){for(const i of t)if(zv(i,e))return i}var vo=class extends Xs{get name(){return"DataIncompleteError"}constructor(t,e){super(),this.ow=t,this.hw=e}},P=class t{static aw(e){const i=e.Xm,s=e.Gm,n=t.uw(i,s,!1);if(!n.cw)throw new vo(s.Om,n.m);return n.m}static uw(e,i,s){const n=[];for(;i.Om<e.byteLength;){const r=t.lw(e,i,s);if(!r.cw)return{cw:!1,m:n};n.push(r.dw)}return{cw:!0,m:n}}static fw(e,i){const s=t.lw(e,i,!1);if(!s.cw)throw new vo(i.Om);return s.dw}static _w(e,i){const s=e.Xm,n=e.Gm;for(;n.Om<s.byteLength;){const e=t.lw(s,n,!1);if(!e.cw)return;if(e.dw.l_===i)return e.dw}}static lw(e,i,s){const n=i.Om,r=t.gw(e,i);if(!r.cw)return r;const o=r.mw;let h=o.ww;if(0===h){if(s)return i.Fm(n),{cw:!1,pw:1/0};h=e.byteLength-n}const a=n+h;if(a>e.byteLength){const t=a;return i.Fm(n),{cw:!1,pw:t}}const u={l_:o.l_,Om:n,Xm:new Nh(et(e,n,a),new ds(o.yw))};return i.Fm(a),{cw:!0,dw:u}}static gw(t,e){const i=e.Om;if(!Iv(t,e,8)){return{cw:!1,pw:e.Om+8}}let s=to(t,e),n=Ka(t,e,4);if(1===s){if(!Iv(t,e,8)){const t=e.Om+8;return e.Fm(i),{cw:!1,pw:t}}s=R(t,e).toNumber()}if("uuid"===n){if(!Iv(t,e,16)){const t=e.Om+16;return e.Fm(i),{cw:!1,pw:t}}n=Ka(t,e,16)}return{cw:!0,mw:{l_:n,ww:s,yw:e.Om-i}}}static Aw(t,e,i){const s=t.Xm,n=t.Gm;let r=ph(fi(s),n.Om,s.byteLength);return i&&(r=hh(r)),n.Mm(r.byteLength),{l_:e,Xm:r}}static bw(e,i,s){const n=e.jm(),{version:r,flags:o}=pt(n);return{l_:i,Tw:r,Sw:o,Xm:t.Aw(e,i,s).Xm}}};function Ia(t,e){const i=ao(t,e);if(!i)throw new v("Missing "+e+" atom");return i}function ao(t,e){for(const i of t)if(i.l_===e)return i.Xm}function Xv(t,e){const i=[];for(const s of t)s.l_===e&&i.push(s.Xm);return i}function pt(t){return{version:t>>24,flags:new Sv(16777215&t)}}var hs=class t{static Ew(e){const i=[],s=P.aw(new Nh(e,new ds));for(const e of s){const s=t.Pw(e);s&&i.push(s)}return i}static Iw(t){return P.uw(t,new ds,!1).m.some(this.Rw)}static Cw(e){return Xv(P.aw(new Nh(e,new ds)),E_.ym).map(t.xw)}static Dw(e){return Xv(P.aw(e.Xm),E_.ym).map(t.xw)}static Rw(t){return t.l_===E_.Em||t.l_===E_.Sm||t.l_===E_.Ig||t.l_===E_.lm||t.l_===E_.pm||t.l_===E_.Tm||t.l_===E_.Am}static Pw(e){switch(e.l_){case E_.Ig:return t.Nw(e.Xm);case E_.lm:return t.Bw(e.Xm,e.Om);case E_.pm:return t.Ow(e.Xm);case E_.Tm:return t.Mw(e.Xm);case E_.Am:return t.Lw(e.Xm)}}static Nw(e){const i=P.aw(e),s=Ia(i,E_.Rg),n=Xv(i,E_.Cg),r=ao(i,E_.Ug),o=t.Fw(s),h=n.map(t.Uw),a=r?t.Hw(r):void 0;return{l_:E_.Ig,mw:o,Z:h,Ww:a}}static Fw(t){const e=t.jm(),{version:i,flags:s}=pt(e),n=1===i?t.Zm():t.jm(),r=1===i?t.Zm():t.jm(),o=t.jm(),h=1===i?t.Zm():t.jm(),a=t.jm(),u=t.Qm()>>8;t.nw(2),t.nw(8);const c=t.$m(9);t.nw(24);const l=t.jm();return{l_:E_.Rg,Tw:i,Sw:s,qw:n,Vw:r,zw:o,ct:h,Xw:a,Hd:u,Gw:c,Qw:l}}static Uw(e){const i=P.aw(e),s=Ia(i,E_.xg),n=Ia(i,E_.Dg),r=t.Kw(s),o=t.jw(n);return{l_:E_.Cg,mw:r,Yw:o}}static Kw(t){const e=t.jm(),{version:i,flags:s}=pt(e),n=1===i?t.Zm():t.jm(),r=1===i?t.Zm():t.jm(),o=t.jm();t.nw(4);const h=1===i?t.Zm():t.jm();t.nw(8);const a=t.Km(),u=t.Km(),c=t.Km()/256;t.nw(2);const l=t.$m(9),d=t.jm()/65536,f=t.jm()/65536;return{l_:E_.xg,Zw:s.Wm(1),Jw:s.Wm(2),$w:s.Wm(4),qw:n,Vw:r,tp:o,ct:h,ep:a,ip:u,Hd:c,Gw:l,Ti:d,Ci:f}}static jw(e){const i=P.aw(e),s=Ia(i,E_.Ng),n=Ia(i,E_.Bg),r=Ia(i,E_.Og),o=t.sp(s),h=t.np(n),a=t.rp(r);return{l_:E_.Dg,mw:o,op:h,hp:a}}static sp(t){const e=t.jm(),{version:i,flags:s}=pt(e),n=1===i?t.Zm():t.jm(),r=1===i?t.Zm():t.jm(),o=t.jm(),h=1===i?t.Zm():t.jm();t.Qm();return t.nw(2),{l_:E_.Ng,Tw:i,Sw:s,qw:n,Vw:r,zw:o,ct:h}}static np(t){const e=t.jm(),{version:i,flags:s}=pt(e);t.nw(4);const n=t.ew(4);t.nw(12);const r=t.iw();return{l_:E_.Bg,Tw:i,Sw:s,ap:n,l:r}}static rp(e){const i=Ia(P.aw(e),E_.Mg),s=t.cp(i);return{l_:E_.Og,lp:s}}static cp(e){const i=Ia(P.aw(e),E_.Lg),s=t.dp(i);return{l_:E_.Mg,fp:s}}static dp(e){const i=e.jm(),{version:s,flags:n}=pt(i),r=(e.jm(),[]),o=P.aw(e);for(const e of o){const i=t._p(e.Xm,e.l_);i&&r.push(i)}return{l_:E_.Lg,Tw:s,Sw:n,vp:r}}static _p(e,i){let s=t.gp(e,i);return s||(s=t.mp(e,i),s||(i===E_.tm?t.wp(e):void 0))}static gp(e,i){return i===E_.Jg?t.pp(e):i===E_.hm?t.yp(e):void 0}static mp(e,i){return i===E_.Wg?t.Ap(e):i===E_.Vg||i===E_.zg?t.bp(e,i):i===E_.Gg?t.Tp(e,i):i===E_.Kg?t.Sp(e,i):i===E_.um?t.Ep(e):void 0}static kp(t,e){t.nw(6);return{l_:e,Pp:t.Qm()}}static Ip(e,i){const s=t.kp(e,i);e.nw(8);const n=e.Qm(),r=e.Qm();e.nw(2),e.nw(2);return no({},s,{Rp:n,Cp:r,xp:e.jm()>>>16})}static Dp(e,i){const s=t.kp(e,i);e.nw(2),e.nw(2),e.nw(12);const n=e.Qm(),r=e.Qm(),o=e.jm(),h=e.jm();e.nw(4);const a=e.Qm();e.nw(32);const u=e.Qm();return e.nw(2),no({},s,{Ti:n,Ci:r,Np:o,Bp:h,Op:a,Mp:u})}static pp(e){const i=t.Ip(e,E_.Jg),s=Ia(P.aw(e),E_.$g);return no({},i,{Lp:t.Fp(s)})}static wp(e){const i=t.kp(e,E_.tm),s=P.aw(e),n=Ia(s,E_.im),r=t.Up(n),o=ao(s,E_.nm);return no({},i,{Hp:r,Wp:o?t.qp(o):void 0})}static Up(t){return{l_:E_.im,Vp:t.iw()}}static qp(t){return{l_:E_.nm,jh:t.iw()}}static Fp(t){return P.bw(t,E_.$g,!0)}static Ap(e){const i=t.Dp(e,E_.Wg),s=P.aw(e),n=Ia(s,E_.qg),r=ao(s,E_.Zg);return no({},i,{zp:t.Xp(n),Gp:r?t.Qp(r):void 0})}static bp(e,i){const s=t.Dp(e,i),n=Ia(P.aw(e),E_.Xg);return no({},s,{Kp:t.jp(n)})}static Tp(e,i){const s=t.Dp(e,i),n=Ia(P.aw(e),E_.Qg);return no({},s,{Yp:t.Zp(n)})}static Sp(e,i){const s=t.Dp(e,i),n=P.aw(e),r=Ia(n,E_.jg),o=t.Jp(r),h=ao(n,E_.Yg);return no({},s,{$p:o,ey:h?t.iy(h):void 0})}static Ep(e){const i=e.Um(),s=t.Dp(e,E_.um),n=Ia(P.aw(e),E_.Pm),r=t.sy(n);return no({},s,{oy:t.mp(i,r.ly.uy),_y:r})}static yp(e){const i=e.Um(),s=t.Ip(e,E_.hm),n=Ia(P.aw(e),E_.Pm),r=t.sy(n);return no({},s,{oy:t.gp(i,r.ly.uy),_y:r})}static sy(e){const i=Ia(P.aw(e),E_.Im),s=t.vy(i);return{l_:E_.Pm,ly:s}}static vy(t){const e=t.ew(4);return{l_:E_.Im,uy:e}}static Xp(t){return P.Aw(t,E_.qg,!0)}static jp(t){return P.Aw(t,E_.Xg,!0)}static Zp(t){return P.Aw(t,E_.Qg,!0)}static Jp(t){return P.Aw(t,E_.jg,!0)}static iy(t){const e=t.ew(4);switch(e){case"nclx":return{gy:oi.ON_SCREEN_COLOURS,wy:t.Qm(),py:t.Qm(),yy:t.Qm(),Ay:0!=(128&t.zm())};case"rICC":return{gy:oi.RESTRICTED_ICC_PROFILE};case"prof":return{gy:oi.UNRESTRICED_ICC_PROFILE};default:throw v("Could not parse ColourInformationBox: unknown type '"+e+"'.")}}static Qp(t){const e=t.jm(),i=t.jm();return{l_:E_.Zg,by:e,Ty:i}}static Hw(e){const i=Xv(P.aw(e),E_.Hg).map(t.Sy);return{l_:E_.Ug,Z:i}}static Sy(t){const e=t.jm(),{version:i,flags:s}=pt(e),n=t.jm(),r=t.jm(),o=t.jm(),h=t.jm(),a=t.jm();return{l_:E_.Hg,Tw:i,Sw:s,tp:n,Ey:r,Py:o,Iy:h,Ry:a}}static Bw(e,i){const s=P.aw(e),n=Ia(s,E_.dm),r=Xv(s,E_.fm),o=t.Cy(n),h=r.map(t.xy);return{l_:E_.lm,Dy:i,mw:o,Z:h}}static Cy(t){const e=t.jm(),{version:i,flags:s}=pt(e),n=t.jm();return{l_:E_.dm,Tw:i,Sw:s,Ny:n}}static xy(e){const i=P.aw(e),s=Ia(i,E_._m),n=Xv(i,E_.vm),r=ao(i,E_.gm),o=t.By(s),h=n.map((e=>t.Oy(e,o))),a=r?t.My(r):void 0;return{l_:E_.fm,mw:o,Ly:h,Fy:a}}static By(t){const e=t.jm(),{version:i,flags:s}=pt(e),n=t.jm(),r=s.Wm(Ha.BASE_DATA_OFFSET_PRESENT)?t.Zm():void 0,o=s.Wm(Ha.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.jm():void 0,h=s.Wm(Ha.DEFAULT_SAMPLE_DURATION_PRESENT)?t.jm():void 0,a=s.Wm(Ha.DEFAULT_SAMPLE_SIZE_PRESENT)?t.jm():void 0,u=s.Wm(Ha.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.jm():void 0;return{l_:E_._m,Tw:i,Sw:s,tp:n,Uy:r,Hy:o,Py:h,Iy:a,Ry:u}}static Oy(e,i){const s=e.jm(),{version:n,flags:r}=pt(s),o=e.jm(),h=r.Wm(J.DATA_OFFSET_PRESENT)?e.Ym():void 0,a=r.Wm(J.FIRST_SAMPLE_FLAGS_PRESENT)?e.jm():void 0,u=[];for(let s=0;s<o;s++){const o=t.Wy(e,r,n,i);0===s&&void 0!==a&&(o.Sw=a),u.push(o)}return{l_:E_.vm,Tw:n,Sw:r,qy:o,Dy:h,Vy:a,zy:u}}static Wy(t,e,i,s){return{ct:e.Wm(J.SAMPLE_DURATION_PRESENT)?t.jm():s.Py,ww:e.Wm(J.SAMPLE_SIZE_PRESENT)?t.jm():s.Iy,Sw:e.Wm(J.SAMPLE_FLAGS_PRESENT)?t.jm():s.Ry,Xy:e.Wm(J.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===i?t.jm():t.Ym():void 0}}static Lw(t){const e=t.Xm,i=t.Gm,s=to(e,i),{version:n,flags:r}=pt(s);if(1===n){const t=to(e,i),s=R(e,i),o=to(e,i),h=to(e,i),a=xv(e,i),u=xv(e,i),c=Na(fi(e),i.Om,e.byteLength);return i.Mm(c.byteLength),{l_:E_.Am,Tw:n,Sw:r,Gy:a,Qy:u,zw:t,Ky:s,jy:o,o:h,Yy:c}}{const t=xv(e,i),s=xv(e,i),o=to(e,i),h=to(e,i),a=to(e,i),u=to(e,i),c=Na(fi(e),i.Om,e.byteLength);return i.Mm(c.byteLength),{l_:E_.Am,Sw:r,Tw:n,Gy:t,Qy:s,zw:o,Zy:h,jy:a,o:u,Yy:c}}}static Ow(t){return P.Aw(t,E_.pm,!1)}static xw(e){const i=e.Xm,s=e.Gm,n=hh(fi(i)).buffer,r=to(i,s),{version:o,flags:h}=pt(r),a=t.Jy(i,s),u=[];if(o>0){const t=to(i,s);for(let e=0;e<t;e++){const t=M(i,s,16);u.push(t)}}const c=to(i,s),l=new S(n,s.Om,c);return s.Mm(i.byteLength),{l_:E_.ym,Tw:o,Sw:h,$y:a,tA:u,eA:c,Xm:l,iA:n}}static Jy(t,e){let i="";for(let s=0;s<4;s++){const s=Fo(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=Fo(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=Fo(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=Fo(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<6;s++){const s=Fo(t,e).toString(16);i+=1===s.length?"0"+s:s}return i.toLowerCase()}static Mw(t){const e=t.Xm,i=t.Gm,s=to(e,i),{version:n,flags:r}=pt(s),o=to(e,i),h=to(e,i);let a,u;0===n?(a=rt.fromBits(to(e,i),0,!0),u=rt.fromBits(to(e,i),0,!0)):(a=R(e,i),u=R(e,i)),i.Mm(2);const c=Go(e,i),l=[];for(let t=0;t<c;t+=1){const t=to(e,i),s=t>>31&1,n=2147483647&t,r=to(e,i),o=to(e,i),h=o>>31&1,a=o>>28&7,u=268435455&o;l.push({sA:s,nA:n,ct:r,rA:h,oA:a,hA:u})}return{l_:E_.Tm,Tw:n,Sw:r,aA:o,zw:h,uA:a,cA:u,lA:c,dA:l}}static My(t){const e=t.Xm,i=t.Gm,s=to(e,i),{version:n,flags:r}=pt(s);let o;return o=0===n?rt.fromBits(to(e,i),0,!0):R(e,i),{l_:E_.gm,Tw:n,Sw:r,Fy:o}}},Gv={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function Qv(t){if(!t)return!0;const e=t.licenseAcquisitionURL,i=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,o=t.queryParameters;return!(e||i||s||n||r||o)}function Kv(t){return t&&void 0!==t.licenseAcquisitionURL}var jv,Fs,$i,Yh,Hi,dr,nt,Yv,Zv=Kv,Jv=Kv;function $v(t){if(!t)return!0;if(ig(t))return!1;const e=t.fairplay,i=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return Qv(e)&&Qv(i)&&Qv(s)&&void 0===n&&Qv(r)}function tg(t){const e=b_(t),i=function(t){var e;const i=t;return A_(i)&&""!==(null==(e=i.fairplay)?void 0:e.headers.PreAuthorization)&&!y_(i)}(t);return(!e||!i)&&(e||i)}function eg(t){return t.integration===c_}function lo(t){const e=t;if(!e)return!1;if($v(e))return!1;const i=e.fairplay,s=e.playready,n=e.widevine,r=e.clearkey;if(ig(t))return!0;if(i&&!function(t){const e=t;return e&&(void 0!==e.certificateURL||void 0!==e.certificate)}(i))return!1;if(s&&!Zv(s))return!1;if(n&&!Jv(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(e.integration){if(Fu.Pg.Tg(e.integration))return!0;switch(e.integration){case kh:if(!function(t){const e=t,i=e.integration===kh;return i&&(sg(t)||ng(t))}(t))return!1;break;case l_:if(!rg(t))return!1;break;case Hn:if(!function(t){const e=t;return e.integration===Hn}(t))return!1;break;case c_:if(!eg(t))return!1;break;case Wr:if(!tg(t))return!1;break;case u_:if(!function(t){const e=t;return e.integration===u_}(t))return!1;break;case d_:if(!ig(t))return!1;break;case f_:if(!function(t){const e=t;return e.integration===f_&&(void 0!==e.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(e))}(t))return!1;break;case __:if(!function(t){const e=t;return e.integration===__}(t))return!1;break;case v_:if(!og(t))return!1;break;case g_:if(!function(t){return t.integration===g_}(t))return!1;break;case m_:if(!hg(t))return!1;break;case Hr:if(!function(t){const e=t;return e.integration===Hr&&void 0!==e.token}(t))return!1;break;case tr:if(!function(t){const e=t;return e.integration===tr}(t))return!1;break;case w_:if(!function(t){const e=t;return e&&it(e.releasePid)&&it(e.accountId)&&it(e.token)}(t))return!1;break;case p_:return!0;default:return!1}}return!0}function ig(t){return t.integration===d_}function sg(t){return void 0!==t.authToken}function ng(t){const e=t;return void 0!==e.accountName&&void 0!==e.customerName&&void 0!==e.portalId}function rg(t){const e=t;return e.integration===l_&&void 0!==e.token}function og(t){const e=t;return e&&e.integration===v_&&Ts(e.ticketAcquisitionURL)&&Ts(e.streamId)}function hg(t){const e=t;return e.integration===m_&&void 0!==e.token}function ag(t,e){const i=e[t];var s;const n=null!=(s=null==i?void 0:i.licenseAcquisitionURL)?s:Gv[t];var r;const o=null!=(r=null==i?void 0:i.customdata)?r:e.customdata,h=o?{customData:o}:{};var a;const u=no({},null!=(a=null==i?void 0:i.headers)?a:{},h),c=null!=i?i:{},{customdata:l}=c,d=function(t,e){if(null==t)return{};var i,s,n={},r=g.keys(t);for(s=0;s<r.length;s++)i=r[s],e.indexOf(i)>=0||(n[i]=t[i]);return n}(c,["customdata"]);return no({},d,{licenseAcquisitionURL:n,headers:u})}function wh(t){switch(t.toLowerCase()){case"widevine":case Ua:return Ua;case"playready":case Ks:return Ks;case"fairplay":case _i:return _i}}function ug(t,e){switch(t){case I_:return function(t){const e={},i=hs.Cw(new DataView(t));for(const t of i)e[t.$y]=t.iA;return e}(e);case R_:case C_:return function(t){return{[M_]:t}}(e);default:throw new io(Ot.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}function cg(t,e,i){const s=function(t,e,i){var s;const{useCredentials:n,crossOrigin:r}=function(t,e){let i=po.Hv;return t.useCredentials?i=po.qv:t.crossOrigin&&(i=bg(t.crossOrigin)),i===po.Hv&&e&&e.vr&&e.vr[360]&&(i=po.Wv),{useCredentials:i===po.qv,crossOrigin:i}}(t,e);let o=t.liveOffset;it(o)||(o=i&&it(i.liveOffset)?i.liveOffset:void 0);let h=t.timeServer;it(h)||(h=e&&it(e.timeServer)?e.timeServer:void 0);let a=t.hlsDateRange;it(a)||(a=i&&it(i.hlsDateRange)?Boolean(i.hlsDateRange):void 0);const u=Boolean(t.experimentalRendering),c=Boolean(t.nativeUiRendering),l=Boolean(t.lowLatency),d=Boolean(t.useNativePlayback),f=Boolean(t.useManagedMediaSource),_=it(t.dash)?dg(t.dash):void 0,v=it(t.hls)?fg(t.hls):void 0,g=vg(Jh(t.abr),null==i?void 0:i.abr),m=is(t.lcevc),w=it(t.ignoreEmbeddedTextTrackTypes)?Dg(t.ignoreEmbeddedTextTrackTypes):[];var p;const y=pg(null!=(p=t.seamlessSwitchStrategy)?p:null==(s=t.dash)?void 0:s.useSeamlessPeriodSwitch);return{crossOrigin:r,useCredentials:n,liveOffset:o,timeServer:h,hlsDateRange:a,experimentalRendering:u,nativeUiRendering:c,lowLatency:l,useNativePlayback:d,useManagedMediaSource:f,dash:_,hls:v,abr:g,lcevc:m,ignoreEmbeddedTextTrackTypes:w,seamlessSwitchStrategy:y}}(t,e,i),n=Ur(t.src);let r=t.type;r||(r=t.src?Ag(t.src):void 0);const o=function(t,e){let i;i=it(t.contentProtection)?t.contentProtection:it(t.drm)?t.drm:it(e)&&it(e.contentProtection)?e.contentProtection:it(e)&&it(e.drm)?e.drm:void 0;return lg(i)}(t,e);return no({},s,{src:n,type:r,contentProtection:o,ssai:it(t.ssai)?a_(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function lg(t){return lo(t)&&t.integration&&t.integration===d_?function(t){const e=ag(Do.Zv,t),i=ag(Do.Yv,t),s=t[Do.Jv]&&ag(Do.Jv,t);return no({integration:"keyos",widevine:e,playready:i},s?{fairplay:s}:{})}(t):t}function dg(t){return{useSeamlessPeriodSwitch:pg(null==t?void 0:t.useSeamlessPeriodSwitch),needsTimescaleShifting:is(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?ve(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:is(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:is(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:is(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards)}}function fg(t){return{discontinuityAlignment:_g(null==t?void 0:t.discontinuityAlignment)}}function _g(t){if(!t||!Ts(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}function Jh(t){if(!it(t))return;return gg(bf(null==t?void 0:t.preferredAudioCodecs,ai),bf(null==t?void 0:t.preferredVideoCodecs,ai),is(null==t?void 0:t.restrictToPlayerSize))}function vg(t,e){if(!it(t)&&!it(e))return;var i;return gg(mg(null==t?void 0:t.preferredAudioCodecs,null==e?void 0:e.preferredAudioCodecs),mg(null==t?void 0:t.preferredVideoCodecs,null==e?void 0:e.preferredVideoCodecs),null!=(i=null==t?void 0:t.restrictToPlayerSize)?i:null==e?void 0:e.restrictToPlayerSize)}function gg(t,e,i){if(0!==t.length||0!==e.length||void 0!==i)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===e.length?void 0:e,restrictToPlayerSize:i}}function mg(t,e){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=e?e:[]}function wg(t,e){if(void 0!==e)switch(t){case Fs.Rm:return e.preferredVideoCodecs;case Fs.Cm:return e.preferredAudioCodecs;default:return}}function pg(t){if(!t||!Ts(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}function co(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":return!0;default:return!1}}function yg(t){return!!t&&Ei(t,"mpd")}function Ag(t){let e=Gi.Gv;return yg(t)&&(e=Gi.Vv),function(t){return!!t&&Ei(t,"m3u8")}(t)&&(e=Gi.zv),e}function bg(t){switch(t){case po.Wv:case po.qv:return t;default:return po.Hv}}function Kn(t){if(!t)return!1;const e=t.toLowerCase();return bt(e,Gi.zv)||bt(e,Gi.Xv)}function Tg(t){return or(t)&&or(t.ssai)&&"google-dai"===t.ssai.integration}function Sg(t){return or(t)&&Ts(t.integration)&&"verizon-media"===t.integration}function Eg(t){return or(t)&&Ts(t.integration)&&"mediatailor"===t.integration}function kg(t){if(Ts(t))return!t;if(Sg(t))return!t.id;if(Tg(t)){const e=t.ssai,i="live"===e.availabilityType&&e.assetKey,s="vod"===e.availabilityType&&e.contentSourceID&&e.videoID;return Boolean(i&&s)}return!t.src}function zi(t){return Boolean(or(t)&&Ts(t.src))}function Pg(t){return t.type===Gi.Qv||t.type===Gi.Kv}function Xi(t){return Ts(t)||zi(t)||Tg(t)||Sg(t)}function fo(t){if(t){if(Xi(t))return kg(t);for(const e of t)if(!kg(e))return!1;return!0}return!0}function Ig(){return{crossOrigin:po.Hv,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[],seamlessSwitchStrategy:$i.fA}}function Rg(){return no({},Ig(),{src:void 0,type:Gi.Gv,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function Cg(t){const e={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:Hi.ENABLED,googleIma:{useNativeIma:!1,bitrate:-1,language:void 0,uiElements:void 0}};return void 0===t||(void 0!==t.preload&&(e.preload=function(t){return"none"===t?dr.NONE:dr.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(e.showCountdown=$u(t.showCountdown)),void 0!==t.vpaidMode&&(e.vpaidMode=function(t){switch(t){case"insecure":return Hi.INSECURE;case"disabled":return Hi.DISABLED;default:return Hi.ENABLED}}(t.vpaidMode)),ya(t.allowedMimeTypes)&&(e.allowedMimeTypes=t.allowedMimeTypes.filter(Ts)),void 0!==t.googleIma&&(e.googleIma=function(t){return void 0===t?{useNativeIma:!1,bitrate:-1,language:void 0,uiElements:void 0}:{useNativeIma:$u(t.useNativeIma),bitrate:null!=(e=t.bitrate)?e:-1,language:it(t.language)?ai(t.language):void 0,uiElements:t.uiElements};var e}(t.googleIma))),e}function xg(t){if(!Qa(t))return[];const e=[];for(const i of t)B(i)&&e.push(i);return e}function Uo(t){return Ts(t.src)}function Dg(t){return ya(t)?t.filter(co):[]}!function(t){t.fA="auto",t._A="playlist",t.vA="media"}(jv||(jv={})),function(t){t.Cm="audio",t.Rm="video",t.gA="text",t.mA="image",t.wA="unknown"}(Fs||(Fs={})),function(t){t.fA="auto",t.pA="always",t.yA="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only"}($i||($i={})),function(t){t.VERIZON_MEDIA="verizon-media",t.MEDIATAILOR="mediatailor",t.THEOLIVE="theolive"}(Yh||(Yh={})),function(t){t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled"}(Hi||(Hi={})),function(t){t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll"}(dr||(dr={})),function(t){t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange"}(nt||(nt={})),function(t){t[t.AA=0]="AA",t[t.Qn=1]="Qn",t[t.bA=2]="bA",t[t.TA=3]="TA",t[t.SA=4]="SA"}(Yv||(Yv={}));var Ng=class extends Ci{constructor(t,e=Yv.AA){super(r.B_),this.currentTime=t,this.readyState=e}},Cn=class extends Ci{constructor(t){super(r.Ch),this.currentTime=t}},gs=class extends Ci{constructor(t){super(r.Ah),this.currentTime=t}},Wi=class extends Ci{constructor(t,e=Yv.Qn){super(En.Sv),this.currentTime=t,this.readyState=e}},Pt=class extends Ci{constructor(t){super(r.N_),this.duration=t}},Cs=class extends Ci{constructor(t,e){super(r.Z_),this.currentTime=t,this.playbackRate=e}},oh=class extends Ci{constructor(t,e){super(r.vv),this.currentTime=t,this.currentProgramDateTime=e}},X=class extends Ci{constructor(t){super(r.M_),this.currentTime=t}},ys=class extends Ci{constructor(t,e=Yv.bA){super(En.Tv),this.currentTime=t,this.readyState=e}},Uh=class extends Ci{constructor(t){super(r.rv),this.currentTime=t}},ja=class extends Ci{constructor(t){super(r.ev),this.currentTime=t}},Ao=class extends Ci{constructor(t,e){super(r.mv),this.currentTime=t,this.volume=e}},ji=class extends Ci{constructor(t,e=Yv.TA){super(En.Av),this.currentTime=t,this.readyState=e}},fs=class extends Ci{constructor(t,e=Yv.SA){super(En.bv),this.currentTime=t,this.readyState=e}},Io=class extends Ci{constructor(t,e){super(En.Rf),this.currentTime=t,this.readyState=e}},An=class extends nu{get error(){return this.errorObject.message}pa(){return this}constructor(t){super(lt.aa),this.errorObject=t}};async function yi(t,e,i,s,n){void 0===i&&(i=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(e)}catch(t){if(eo(t),r<i){const t=b.min(s*2**r,n);r++,await ye(t,e);continue}throw t}}var Bg,Og={maxRetries:1/0,minimumBackoff:200,maximumBackoff:3e4};function Mg(t){switch(t){case"all":case"content":return t;default:return"none"}}function Lg(t){const e=$a(t||{});return e.libraryLocation&&(e.libraryLocation=eh(e.libraryLocation,!0)),e.isEmbeddable=Boolean(e.isEmbeddable),e.cast=function(t){const e=o_(t?t.chromecast:void 0),i=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:e,strategy:i}}(e.cast),e.ads=Cg(e.ads),e.analytics=xg(e.analytics),e.mutedAutoplay=Mg(e.mutedAutoplay),e.allowNativeFullscreen=Boolean(e.allowNativeFullscreen),e.allowMixedContent=Boolean(e.allowMixedContent),e.persistVolume=Boolean(e.persistVolume),e.liveOffset=function(t){return Number(t)||void 0}(e.liveOffset),e.hlsDateRange=function(t){return Boolean(t)}(e.hlsDateRange),e.retainPlaybackRateOnSourceChange=Boolean(e.retainPlaybackRateOnSourceChange),e.license=function(t){return Ts(t)?t:void 0}(e.license),e.licenseUrl=function(t){if(!t)return;try{return eh(t)}catch(t){return void f.Uv("Invalid 'licenseUrl', falling back to default URL")}}(e.licenseUrl),e.vr=function(t){return{useWebXR:Boolean(t&&t.useWebXR)}}(e.vr),e.abr=Jh(e.abr),e.retryConfiguration=function(t){const e=no({},Og);return void 0!==t&&(void 0!==t.maxRetries&&(e.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(e.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(e.maximumBackoff=Number(t.maximumBackoff))),e}(e.retryConfiguration),e.hideDeprecationWarnings=Boolean(e.hideDeprecationWarnings),e.theoLive=function(t){if(!t)return t;return no({},t,{externalSessionId:t.externalSessionId?ai(t.externalSessionId):void 0,fallbackEnabled:is(t.fallbackEnabled)})}(e.theoLive),e}function Fg(t){return{zl:t.zl,ct:t.ct,jl:t.jl,lt:t.lt,Jl:t.Jl,ld:t.ld,md:t.md,pd:t.pd,Pd:t.Pd,xd:t.xd,Od:t.Od,Fd:t.Fd,Hd:t.Hd}}function Ug(t,e){const i=e.Hd,s=e.ld;t.Hd=i,t.ld=s}function as(t,e,i){if(e===i)return;const s=e.zl,n=e.ct,r=e.ld,o=e.md,h=e.pd,a=e.Pd,u=e.xd,c=(e.Fd,e.Od,e.Hd),l=i.zl,d=i.ct,f=i.jl,_=i.Jl,v=i.ld,g=i.md,m=i.pd,w=i.Pd,p=i.xd,y=(i.Fd,i.Od,i.Hd);a!==Yv.AA&&t.To(new Ng(l,w)),g&&!o?t.To(new Cn(l)):!g&&o&&t.To(new gs(l)),w>=Yv.Qn&&t.To(new Wi(l,w)),d===n||j(d)&&j(n)||t.To(new Pt(d)),m!==h&&t.To(new Cs(l,m)),l!==s&&t.To(new oh(l,void 0)),f&&t.To(new X(l)),w>=Yv.bA&&t.To(new ys(l,w)),p&&!u?t.To(new Uh(l)):!p&&u&&t.To(new ja(l)),y===c&&v===r||t.To(new Ao(l,y)),w>=Yv.TA&&t.To(new ji(l,w)),w>=Yv.SA&&t.To(new fs(l,w)),w!==a&&t.To(new Io(l,w)),_&&t.To(new An(_))}!function(t){t.NONE="none",t.ALL="all",t.CONTENT="content"}(Bg||(Bg={}));var Hg=class extends Ci{constructor(t){super(r.x_),this.currentSource=t}},Cu=class extends Ci{constructor(){super(r.L_)}},Ls=class extends Ci{constructor(){super(r.U_)}},Wg=class extends ci{Ol(){return this.EA}get td(){return this.ed()}ed(){return this.kA}Bd(){return this.xu}Ld(){return this.PA}IA(t){const e=this.Ml;if(e===t)return;e.Nl(this.uf);const i=Fg(this),s=this.Vl(),n=this.Gd(),r=this.Qd();this.Ml=t,this.EA.qf=t.ht,this.PA.qf=t.rt,this.xu.qf=t.nt,this.kA.qf=t.td,void 0!==i&&as(this,i,this);const o=this.Vl();o!==s&&this.To(new Hg(o)),this.Gd()!==n&&this.To(new Cu),this.Qd()!==r&&this.To(new Ls),t.Il(this.uf)}async bn(){await super.bn(),this.EA.bn(),this.PA.bn(),this.xu.bn(),this.kA.bn()}constructor(t){super(t),this.EA=new aa,this.PA=new aa,this.xu=new Mt,this.kA=new au,this.EA.qf=t.ht,this.PA.qf=t.rt,this.xu.qf=t.nt,this.kA.qf=t.td}};var qg,Vg=class extends Wg{ud(){return function(t){let e=0,i=0,s=0,n=0,r=0,o=0,h=0;for(const a of t)e+=a.RA,i+=a.CA,s+=a.xA,n+=a.DA,r+=a.NA,o+=a.BA.amountOfBufferedAudioSegments,h+=a.BA.amountOfBufferedVideoSegments;return{RA:e,CA:i,xA:s,DA:n,NA:r,BA:{amountOfBufferedAudioSegments:o,amountOfBufferedVideoSegments:h}}}(this.OA.map((t=>t.hd)))}$d(){return rf(this.OA.map((t=>t.$d()))).then($d)}ir(){return rf(this.OA.map((t=>t.ir()))).then($d)}Yd(){if(!this.wo){for(const t of this.OA)t.Yd();this.wo=!0}}Ll(){const t=[];for(const e of this.OA)t.push(...e.Ll());return t}rf(t){let e=!1;for(const i of this.OA)e=i.rf(t)||e;return e}To(t){this.rf(t)||super.To(t)}get qf(){return this.Ml}set qf(t){this.IA(t)}MA(t){this.OA.push(t)}LA(t){so(this.OA,t)}IA(t){if(t===this.Ml)return;const e=this.Ml;e.jd(),super.IA(t),t.Kd(e)}sf(){for(const t of this.OA)t.sf()}async bn(){this.Lo(),this.Ml.jd();for(const t of this.OA)this.Ml!==t&&await t.bn();await super.bn()}constructor(t){super(t),this.OA=[],this.wo=!1,this.FA=!1,this.MA(t)}};!function(t){t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR"}(qg||(qg={}));var zg=class extends $r{get name(){return"MediaError"}constructor(t,e,i,s){super(e),this.code=t,this.message=null!=e?e:"Unknown error",this.cause=i,this.systemCode=s,v.captureStackTrace&&v.captureStackTrace(this,this.constructor)}};function Xg(t){gf(t,"MEDIA_ERR_ABORTED",1),gf(t,"MEDIA_ERR_NETWORK",2),gf(t,"MEDIA_ERR_DECODE",3),gf(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),gf(t,"MEDIA_ERR_ENCRYPTED",5)}function Gg(t){var e,i;return function(t){return t.category===Cr.CONTENT_PROTECTION}(t)?new zg(5,t.message,null==(e=t.cause)?void 0:e.message,t.systemCode):new zg(Qg(t.code),t.message,null==(i=t.cause)?void 0:i.message)}function Qg(t){if(t===Ot.MEDIA_ABORTED)return 1;if(t===Ot.MANIFEST_LOAD_ERROR||t===Ot.MEDIA_LOAD_ERROR||t===Ot.SUBTITLE_LOAD_ERROR)return 2;if(t===Ot.MEDIA_DECODE_ERROR)return 3;if(t===Ot.MEDIA_NOT_SUPPORTED)return 4;const e=Cr.fromCode(t);return e===Cr.NETWORK?2:e===Cr.SOURCE?4:e===Cr.LICENSE?6:e===Cr.CONTENT_PROTECTION?5:e===Cr.AD?7:3}function Kg(t){return new io(jg(t.code),t.message,t)}function jg(t){switch(t){case 1:return Ot.MEDIA_ABORTED;case 2:return Ot.NETWORK_ERROR;case 3:return Ot.MEDIA_DECODE_ERROR;case 4:return Ot.SOURCE_NOT_SUPPORTED;case 5:return Ot.CONTENT_PROTECTION_ERROR;case 6:return Ot.LICENSE_ERROR;case 7:return Ot.AD_ERROR}}Xg(zg),Xg(zg.prototype);var Qh=class extends ff{tt(t){return super.tt(t)}pa(){return If(this)}};var yh=class{get Ff(){return this.UA}get V(){return this.UA.length}get ma(){return this.vf||(this.vf=function(t){const e=t.Ff.map((t=>t.ma));return e.item=e=>{const i=0|e,s=t.Hf(i);return s&&s.ma||void 0},e}(this)),this.vf}HA(t){this.UA.push(t),this.vf&&this.vf.push(t.ma)}WA(t){so(this.UA,t),this.vf&&so(this.vf,t.ma)}Hf(t){return this.UA[t]}qA(t){return ya(t)?function(t,e){for(const i of e)if(!Yi(t,i))return!1;return!0}(this.UA,t):Yi(this.UA,t)}ir(){wr(this.UA),this.vf&&wr(this.vf)}constructor(){this.UA=[],this.vf=void 0}},cr=class extends jt{pa(){return new Yg(this.Ht.ma)}constructor(t){super(Bs.Nf),this.Ht=t}},Yg=class extends Ir{constructor(t){super("update"),this.track=t}},Zg=0;function ws(){return Zg++}var Jg=0;var $g=0;function tm(){return $g++}var em=0;function im(){return em++}var sm=0;var nm=class extends d{get jf(){}get Ot(){return this.We}set Ot(t){this.We!==t&&(this.We=t,this.VA=t,this.To(new Ys(this)))}get VA(){return this.zA.enabled}set VA(t){this.zA.enabled=t}get ma(){return this.vf||(this.vf=ni(this)),this.vf}get o(){return this.XA}get Yf(){return this.GA}get Lt(){return this.zA.kind}get jh(){return this.QA}set jh(t){t!==this.QA&&(this.QA=t,this.To(new cr(this)))}get gs(){return this.zA.language}get h_(){return this.Ot?"enabled":"disabled"}get KA(){return this.zA}get Jf(){return this.UA}get $f(){}set $f(t){}jA(t){this.Ot=t}YA(){this.Ot=this.VA}constructor(t){super(),this.l_=Fs.Cm,this.We=!1,this.vf=void 0,this.zA=t,this.GA=ws(),this.XA=sm+++"",this.QA=t.label,this.UA=new yh,this.YA()}},rm=0;var Gh,ss,om=class extends d{get jf(){}get Ot(){return this.We}set Ot(t){this.We!==t&&(this.We=t,this.VA=t,this.To(new Ys(this)))}get VA(){return!!this.zA.selected}set VA(t){this.zA.selected=t}get ma(){return this.vf||(this.vf=ni(this)),this.vf}get o(){return this.XA}get Yf(){return this.GA}get Lt(){return"main"}get jh(){return this.QA}set jh(t){t!==this.QA&&(this.QA=t,this.To(new cr(this)))}get gs(){return this.zA.language}get h_(){return this.Ot?"enabled":"disabled"}get KA(){return this.zA}get Jf(){return this.UA}get $f(){}set $f(t){}YA(){this.Ot=this.VA}jA(t){this.Ot=t}constructor(t){super(),this.l_=Fs.Rm,this.We=!1,this.vf=void 0,this.zA=t,this.GA=ws(),this.XA=rm+++"",this.UA=new yh,this.QA=t.label,this.YA()}},hm=class extends Ci{constructor(t){super(r.E_),this.rd=t}};!function(t){t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR"}(Gh||(Gh={})),function(t){t.ZA="cue",t.JA="region",t.$A="stylesheet"}(ss||(ss={}));var re,am={"line-left":"start",center:"middle","line-right":"end"},um={start:"line-left",middle:"center",end:"line-right"};function cm(t,e){if("auto"===t)switch(e){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function lm(t,e){if("auto"===t)switch(e){case"left":return 0;case"right":return 100;default:return 50}return function(t,e){const i="number"==typeof t?t:w(t);return j(i)?e:i}(t,50)}!function(t){t.eb="bo",t.ib="Co",t.Nf="Kn"}(re||(re={}));var us=class extends jt{constructor(t,e){super(t),this.sb=e}},os=class extends Ir{constructor(t,e){super(t),this.cue=e}};function xh(t){const e=[re.eb,re.ib,re.Nf];let i;const s={get track(){return t.Ht.ma},get id(){return t.o},get uid(){return t.Yf},get startTime(){return t.ob},set startTime(e){t.ob=e},get endTime(){return t.hb},set endTime(e){t.hb=e},get content(){return t.R},addEventListener(t,e){const s=Wo(t,ai);i.kn(s,e)},removeEventListener(t,e){const s=Wo(t,ai);i.pn(s,e)}};return i=new hf(s),t.kn(e,(t=>i.To(t.ma))),s}function dm(){}function fm(t){return Dh(xh(t),{get align(){return t.ub},get line(){return t.cb},get lineAlign(){return t.fb},get position(){return t.yo},get positionAlign(){return t._b},get region(){return t.vb?t.vb.ma:null},get size(){return t.ww},get snapToLines(){return t.gb},get text(){return t.R},get vertical(){return t.Mt}})}var ms=class extends us{pa(){return new _m(this.sb.ma)}constructor(t){super(re.Nf,t)}},_m=class extends os{constructor(t){super("update",t)}},Ss=class extends jt{pa(){return new vm(this.sb.ma)}constructor(t){super(Bs.yf),this.sb=t}},vm=class extends Ir{constructor(t){super("updatecue"),this.cue=t}},gm=.02;function mm(t,e){return _e(t.mb,e.mb,gm)&&_e(t.wb,e.wb,gm)&&t.o===e.o}var No=class extends d{get ob(){return this.pb}set ob(t){var e,i;this.pb!==t&&(this.pb=t,null==(e=this.yb)||e.Ab(this),this.To(new ms(this)),null==(i=this.yb)||i.To(new Ss(this)))}get hb(){return this.bb}set hb(t){var e,i;this.bb!==t&&(this.bb=t,null==(e=this.yb)||e.Ab(this),this.To(new ms(this)),null==(i=this.yb)||i.To(new Ss(this)))}get o(){return this.XA}get Yf(){return this.GA}get ma(){return this.vf||(this.vf=this.pa()),this.vf}pa(){return xh(this)}get oo(){return this.ao}set oo(t){this.ao=t}get Ht(){return this.yb}set Ht(t){this.yb=t}get R(){return this.Tb}set R(t){var e;this.Tb!==t&&(this.Tb=t,this.To(new ms(this)),null==(e=this.yb)||e.To(new Ss(this)))}get Sb(){return this.Eb}set Sb(t){this.Eb=t}kb(t){return this===t||wf(this,t)&&mm(this,t)&&this.Pb(t)}Pb(t){return qi(this.R,t.R)}Ib(t,e){this.pb=t,this.bb=e,this.mb=t,this.wb=e}bn(){this.Lo()}constructor(t,e,i,s,n){super(),this.vf=void 0,this.yb=void 0,this.ao=!1,this.Rb=-1,this.GA=im(),this.pb=t,this.bb=e,this.mb=t,this.wb=e,this.Tb=i,this.Eb=Boolean(s),this.XA=null!=n?n:""}};function wm(t,e){return t.R===e.R&&t.cb===e.cb&&t.fb===e.fb&&t.yo===e.yo&&t._b===e._b&&t.vb===e.vb&&t.gb===e.gb&&t.ww===e.ww&&t.ub===e.ub&&t.Mt===e.Mt}var pm=class extends No{get ma(){return this.vf||(this.vf=fm(this)),this.vf}get l_(){return ss.ZA}Pb(t){return wm(this,t)}constructor(t,e,i,s,n){super(t,e,i,s,n),this.cb="auto",this.fb="start",this.yo="auto",this._b="auto",this.vb=void 0,this.gb=!0,this.ww=100,this.ub="center",this.Mt=""}};function ym(t){const e=t.cb,i=xd(e);return i&&!t.gb&&(e<0||e>100)?100:i?Number(e):t.gb?-1:100}function Am(t){return lm(t.yo,t.ub)}function bm(t){return cm(t._b,t.ub)}function Tm(t){const e=bm(t),i=Am(t);let s;switch(e){case"line-left":s=100-i;break;case"line-right":s=i;break;case"center":s=i<=50?2*i:2*(100-i)}return b.min(t.ww,s)}function Sm(t){return{get id(){return t.o},get identifier(){return t.o},get lines(){return t.Cb},get regionAnchorX(){return t.xb},get regionAnchorY(){return t.Db},get scrollValue(){return t.Nb},get viewportAnchorX(){return t.Bb},get viewportAnchorY(){return t.Ob},get width(){return t.Ti}}}var Em=class{get ma(){return this.vf||(this.vf=Sm(this)),this.vf}get l_(){return ss.JA}constructor(t,e,i,s,n,r,o,h){this.o=t,this.Ti=e,this.Cb=i,this.xb=s,this.Db=n,this.Bb=r,this.Ob=o,this.Nb=h}},km=1e6,bo=class{Mb(t){return this.Lb()*t}Fb(t){return this.Ub(t)>0}Hb(t){return this.Ub(t)>=0}Wb(t,e){return this.Vb(t).qb(e)}kb(t){return 0===this.Ub(t)}zb(t){return this.Ub(t)<0}qb(t){return this.Ub(t)<=0}Xb(){return this.Gb()?this.Qb():this}Kb(t){return this.HA(t.Qb())}Vb(t){return this.Kb(t).Xb()}};function Pm(t,e){return t.jb()?e.jb()?Ze.ih:Ze.Gc:e.jb()?Ze.Qc:t.Yb()?e.Yb()&&t.Gb()===e.Gb()?Ze.ih:t.Gb()?Ze.Qc:Ze.Gc:e.Gb()?Ze.Gc:Ze.Qc}var Im=4294967296,Rm=Im*Im,Cm=Rm*Rm,xm=Cm/2,gu=class t{static Zb(e,i,s){return s?new t(e.toUnsigned(),i.toUnsigned()):new t(e.toSigned(),i.toSigned())}static Jb(e){return e.unsigned?new t(e,rt.UZERO):new t(e,e.isNegative()?rt.NEG_ONE:rt.ZERO)}static $b(e,i){if(j(e))return i?t.tT:t.eT;if(i){if(e<0)return t.tT;if(e>=Cm)return t.iT}else{if(e<=-xm)return t.sT;if(e+1>=xm)return t.nT}return e<0?t.$b(-e,i).Qb():t.Zb(rt.fromNumber(e%Rm),rt.fromNumber(e/Rm),i)}rT(){return this.oT.unsigned}hT(){return this.aT.isZero()&&this.oT.isZero()}Gb(){return this.oT.isNegative()}uT(){return this.rT()?t.Zb(this.aT,this.oT,!1):this}cT(){return this.rT()?this:t.Zb(this.aT,this.oT,!0)}lT(){return this.aT}Lb(){return this.Gb()?-this.Qb().Lb():this.oT.toNumber()*Rm+this.aT.toUnsigned().toNumber()}dT(){return this.aT.toInt()}kb(t){return(this.rT()===t.rT()||this.oT.getHighBits()>>>31!=1||t.oT.getHighBits()>>>31!=1)&&(this.oT.toUnsigned().eq(t.oT.toUnsigned())&&this.aT.toUnsigned().eq(t.aT.toUnsigned()))}Ub(t){if(this.kb(t))return Ze.ih;const e=this.Gb(),i=t.Gb();if(e&&!i)return Ze.Qc;if(!e&&i)return Ze.Gc;if(!this.rT())return this.Kb(t).Gb()?Ze.Qc:Ze.Gc;const s=this.cT(),n=t.cT(),r=n.oT.comp(s.oT);return r>0||0===r&&n.aT.gt(s.aT)?Ze.Qc:Ze.Gc}zb(t){return this.Ub(t)<0}qb(t){return this.Ub(t)<=0}fT(t){return this.Ub(t)>0}_T(t){return this.Ub(t)>=0}vT(){return new t(this.aT.not(),this.oT.not())}gT(e){return new t(this.aT.and(e.aT),this.oT.and(e.oT))}mT(e){return new t(this.aT.or(e.aT),this.oT.or(e.oT))}wT(e){const i=127&e;return 0===i?this:i<64?t.Zb(this.aT.shl(i),this.oT.shl(i).or(this.aT.shru(64-i)),this.rT()):t.Zb(rt.ZERO,this.aT.shl(i-64),this.rT())}pT(e){const i=127&e;return 0===i?this:i<64?t.Zb(this.aT.shru(i).or(this.oT.shl(64-i)),this.oT.shr(i),this.rT()):t.Zb(this.oT.shr(i-64),this.oT.isNegative()?rt.NEG_ONE:rt.ZERO,this.rT())}yT(e){const i=127&e;return 0===i?this:i<64?t.Zb(this.aT.shru(i).or(this.oT.shl(64-i)),this.oT.shru(i),this.rT()):64===i?t.Zb(this.oT,rt.ZERO,this.rT()):t.Zb(this.oT.shru(i-64),rt.ZERO,this.rT())}HA(e){const i=this.oT.high>>>16,s=65535&this.oT.high,n=this.oT.low>>>16,r=65535&this.oT.low,o=this.aT.high>>>16,h=65535&this.aT.high,a=this.aT.low>>>16,u=65535&this.aT.low,c=e.oT.high>>>16,l=65535&e.oT.high,d=e.oT.low>>>16,f=65535&e.oT.low,_=e.aT.high>>>16,v=65535&e.aT.high,g=e.aT.low>>>16;let m=0,w=0,p=0,y=0,A=0,b=0,T=0,S=0;S+=u+(65535&e.aT.low),T+=S>>>16,S&=65535,T+=a+g,b+=T>>>16,T&=65535,b+=h+v,A+=b>>>16,b&=65535,A+=o+_,y+=A>>>16,A&=65535,y+=r+f,p+=y>>>16,y&=65535,p+=n+d,w+=p>>>16,p&=65535,w+=s+l,m+=w>>>16,w&=65535,m+=i+c,m&=65535;const E=this.rT(),k=rt.fromBits(p<<16|y,m<<16|w,E),P=rt.fromBits(T<<16|S,A<<16|b,E);return t.Zb(P,k,E)}Kb(t){return this.HA(t.Qb())}Qb(){return this.vT().HA(t.AT)}bT(e){if(this.hT()||e.hT())return this.rT()?t.tT:t.eT;if(this.Gb())return e.Gb()?this.Qb().bT(e.Qb()):this.Qb().bT(e).Qb();if(e.Gb())return this.bT(e.Qb()).Qb();if(this.oT.isZero()&&0===this.aT.high&&e.oT.isZero()&&0===e.aT.high)return t.Jb(this.aT.multiply(e.aT));const i=rt.fromBits(4294967295,0,!0),s=this.aT.and(i),n=this.aT.shru(32),r=this.oT.and(i),o=this.oT.shru(32),h=e.aT.and(i),a=e.aT.shru(32),u=e.oT.and(i),c=e.oT.shru(32);let l=rt.UZERO,d=rt.UZERO,f=rt.UZERO,_=rt.UZERO;l=l.add(s.mul(h)),d=d.add(l.shru(32)),l=l.and(i),d=d.add(n.mul(h)),f=f.add(d.shru(32)),d=d.and(i),d=d.add(s.mul(a)),f=f.add(d.shru(32)),d=d.and(i),f=f.add(r.mul(h)),_=_.add(f.shru(32)),f=f.and(i),f=f.add(n.mul(a)),_=_.add(f.shru(32)),f=f.and(i),f=f.add(s.mul(u)),_=_.add(f.shru(32)),f=f.and(i),_=_.add(o.mul(h)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(i);const v=rt.fromBits(l.getLowBitsUnsigned(),d.getLowBitsUnsigned(),!0),g=rt.fromBits(f.getLowBitsUnsigned(),_.getLowBitsUnsigned(),!0);return t.Zb(v,g,this.rT())}TT(e){let i,s,n=e;if(n.hT())throw new RangeError("division by zero");if(this.hT())return this.rT()?[t.tT,t.tT]:[t.eT,t.eT];if(this.rT()){if(n.rT()||(n=n.cT()),n.fT(this))return[t.tT,this];if(n.fT(this.yT(1)))return s=t.ST,i=this.Kb(n),[s,i];s=t.tT}else{if(this.kb(t.sT)){if(n.kb(t.AT)||n.kb(t.ET))return[t.sT,t.eT];if(n.kb(t.sT))return[t.AT,t.eT];{const e=this.pT(1).kT(n).wT(1);return e.kb(t.eT)?s=n.Gb()?t.AT:t.ET:(i=this.Kb(n.bT(e)),s=e.HA(i.kT(n))),i=this.Kb(n.bT(s)),[s,i]}}if(n.kb(t.sT))return this.rT()?[t.tT,this]:[t.eT,this];if(this.Gb())return n.Gb()?this.Qb().TT(n.Qb()):([s,i]=this.Qb().TT(n),[s.Qb(),i.Qb()]);if(n.Gb())return[s,i]=this.TT(n.Qb()),[s.Qb(),i.Qb()];s=t.eT}for(i=this;i._T(n);){let e=b.max(1,b.floor(i.Lb()/n.Lb()));const r=b.ceil(b.log(e)/b.LN2),o=r<=48?1:2**(r-48);let h=t.$b(e),a=h.bT(n);for(;a.Gb()||a.fT(i);)e-=o,h=t.$b(e,this.rT()),a=h.bT(n);h.hT()&&(h=t.AT),s=s.HA(h),i=i.Kb(a)}return[s,i]}kT(t){return this.TT(t)[0]}PT(t){return this.TT(t)[1]}toString(e){const i=e||10;if(i<2||i>36)throw new RangeError("radix");if(this.hT())return"0";if(this.Gb()){if(this.kb(t.sT)){const e=t.$b(i),s=this.kT(e),n=s.bT(e).Kb(this);return s.toString(i)+n.dT().toString(i)}return"-"+this.Qb().toString(i)}const s=t.$b(i**6,this.rT());let n=this,r="";for(;;){const t=n.kT(s);let e=(n.Kb(t.bT(s)).dT()>>>0).toString(i);if(n=t,n.hT())return e+r;for(;e.length<6;)e="0"+e;r=String(e)+r}}constructor(t,e){this.aT=t,this.oT=e}};gu.eT=gu.Jb(rt.ZERO),gu.tT=gu.Jb(rt.UZERO),gu.AT=gu.Jb(rt.ONE),gu.ST=gu.Jb(rt.UONE),gu.ET=gu.Jb(rt.NEG_ONE),gu.nT=gu.Zb(rt.NEG_ONE,rt.MAX_VALUE,!1),gu.iT=gu.Zb(rt.MAX_UNSIGNED_VALUE,rt.MAX_UNSIGNED_VALUE,!0),gu.sT=gu.Zb(rt.ZERO,rt.MIN_VALUE,!1);var ta=class t{get Yb(){return!isFinite(this.IT)}get RT(){return this.IT/this.zw}static CT(e){return new t(b.ceil(e.IT),e.zw)}static xT(e){return new t(b.floor(e.IT),e.zw)}static DT(t,e){return t.Hb(e)?t:e}static NT(t,e){return t.qb(e)?t:e}HA(e){return this.zw>=e.zw?new t(this.IT+e.BT(this.zw).IT,this.zw):new t(this.BT(e.zw).IT+e.IT,e.zw)}Fb(t){return t.zb(this)}Hb(t){return t.qb(this)}Vb(e){if(this.zw>=e.zw){const i=b.abs(this.IT-e.BT(this.zw).IT),s=this.zw;return new t(i,s)}return e.Vb(this)}Wb(t,e){return this.Vb(t).qb(e)}Ub(t){return function(t,e){return t.zw>=e.zw?Md(t.IT,e.BT(t.zw).IT):Md(t.BT(e.zw).IT,e.IT)}(this,t)}kb(t){return 0===this.Ub(t)}zb(t){return this.Ub(t)<0}qb(t){return this.Ub(t)<=0}BT(e){return new t(this.IT*(e/this.zw),e)}Kb(e){return this.zw>=e.zw?new t(this.IT-e.BT(this.zw).IT,this.zw):new t(this.BT(e.zw).IT-e.IT,e.zw)}OT(e){return new t(this.IT*e,this.zw)}constructor(t,e=1){this.IT=t,this.zw=e}};ta.MT=new ta(1/6,1),ta.eT=new ta(0),ta.LT=new ta(1/0),ta.FT=1e6;var Vi=class t extends bo{static UT(e,i){return void 0===i&&(i=km),t.$b(e*i,i)}static $b(e,i){return j(e)?t.HT:e===1/0?t.WT:e===-1/0?t.qT:new t(rt.fromNumber(e),i)}static Jb(e,i){return new t(e,i)}static VT(e){return t.UT(e.RT,km)}static zT(e){return new t(rt.fromNumber(e.getTime()),1e3)}static DT(t,e){return t.Hb(e)?t:e}static NT(t,e){return t.qb(e)?t:e}static XT(e,i,s){return t.DT(i,t.NT(s,e))}Gb(){return this.Qy.isNegative()}hT(){return 0!==this.zw&&this.Qy.isZero()}Yb(){return 0===this.zw&&!this.Qy.isZero()}jb(){return 0===this.zw&&this.Qy.isZero()}Lb(){if(0===this.zw)return this.Qy.isZero()?NaN:this.Qy.isNegative()?-1/0:1/0;const t=this.Qy.divide(this.zw),e=this.Qy.subtract(t.multiply(this.zw));return t.toNumber()+e.toNumber()/this.zw}lT(){if(0===this.zw)throw new v("Failed to convert timestamp");return this.Qy}GT(){return new Date(0===this.zw?NaN:this.BT(1e3).Qy.toNumber())}QT(){return new ta(0===this.zw?this.Lb():this.Qy.toNumber(),this.zw)}BT(e,i){void 0===i&&(i=be.KT);const s=this.zw;if(s===e)return this;if(0===s)return this;const n=Bd(s,e),r=function(t,e,i){const[s,n]=t.TT(e);if(n.hT())return s;if(i===be.KT)return n.Gb()?s.Kb(gu.AT):s;if(i===be.jT)return n.Gb()?s:s.HA(gu.AT);{const t=n.bT(gu.$b(2));return t.Gb()?t.Qb().zb(e)?s:s.Kb(gu.AT):t.zb(e)?s:s.HA(gu.AT)}}(gu.Jb(this.Qy).bT(gu.$b(e/n)),gu.$b(s/n),i);return new t(r.lT(),e)}Ub(t){if(this===t)return Ze.ih;if(0===this.zw||0===t.zw)return Pm(this,t);if(this.hT())return t.hT()?Ze.ih:t.Gb()?Ze.Gc:Ze.Qc;if(t.hT())return this.Gb()?Ze.Qc:Ze.Gc;const e=b.min(this.zw,t.zw),i=this.BT(e,be.YT).Qy,s=t.BT(e,be.YT).Qy;return i.compare(s)}Qb(){return 0===this.zw?function(t){0;return t.jb()?t:t.Gb()?Vi.WT:Vi.qT}(this):new t(this.Qy.negate(),this.zw)}HA(e){if(0===this.zw||0===e.zw)return function(t,e){0;if(t.jb()||e.jb())return Vi.HT;if(t.Yb()&&e.Yb())return t.Gb()===e.Gb()?t:Vi.HT;return t.Yb()?t:e}(this,e);if(this.hT())return e;if(e.hT())return this;const i=b.max(this.zw,e.zw),s=this.BT(i,be.YT),n=e.BT(i,be.YT);return new t(s.Qy.add(n.Qy),i)}bT(e){if(this.jb()||j(e))return t.HT;if(this.Yb()||!isFinite(e)){if(this.hT()||0===e)return t.HT;{const i=this.Gb()?t.qT:t.WT;return e<0?i.Qb():i}}return this.hT()?this:new t(0===e?rt.ZERO:this.Qy.multiply(e),this.zw)}kT(e){if(this.jb()||j(e))return t.HT;if(this.Yb())return isFinite(e)?0===e?1/e<0?this.Qb():this:e<0?this.Qb():this:t.HT;if(!isFinite(e))return new t(rt.ZERO,this.zw);if(this.hT())return 0===e?t.HT:new t(rt.ZERO,this.zw);if(0===e){const i=this.Gb()?t.qT:t.WT;return 1/e<0?i.Qb():i}return new t(this.Qy.divide(e),this.zw)}ZT(){return[this.Qy.low,this.Qy.high,this.zw]}constructor(t,e){super(),this.Qy=t.toSigned(),this.zw=e>>>0}};Vi.eT=new Vi(rt.ZERO,km),Vi.HT=new Vi(rt.ZERO,0),Vi.WT=new Vi(rt.ONE,0),Vi.qT=new Vi(rt.NEG_ONE,0);var be,Dm=class t extends bo{static UT(e,i){return void 0===i&&(i=km),t.$b(e*i,i)}static $b(e,i){return j(e)?t.HT:e===1/0?t.WT:e===-1/0?t.qT:new t(BigInt(b.floor(e)),i)}static Jb(e,i){return new t(BigInt(e.high)<<BigInt(32)|BigInt(e.low>>>0),i)}static VT(e){return t.UT(e.RT,km)}static zT(e){return t.$b(e.getTime(),1e3)}static get eT(){return t.JT||(t.JT=new t(BigInt(0),km)),t.JT}static get HT(){return t.$T||(t.$T=new t(BigInt(0),0)),t.$T}static get WT(){return t.tS||(t.tS=new t(BigInt(1),0)),t.tS}static get qT(){return t.eS||(t.eS=new t(BigInt(-1),0)),t.eS}static DT(t,e){return t.Hb(e)?t:e}static NT(t,e){return t.qb(e)?t:e}static XT(e,i,s){return t.DT(i,t.NT(s,e))}Gb(){return this.Qy<BigInt(0)}hT(){return 0!==this.zw&&this.Qy===BigInt(0)}Yb(){return 0===this.zw&&this.Qy!==BigInt(0)}jb(){return 0===this.zw&&this.Qy===BigInt(0)}Lb(){if(0===this.zw)return this.Qy===BigInt(0)?NaN:this.Qy<BigInt(0)?-1/0:1/0;const t=this.Qy/BigInt(this.zw),e=this.Qy-t*BigInt(this.zw);return Number(t)+Number(e)/this.zw}lT(){if(0===this.zw)throw new v("Failed to convert timestamp");return this.iS()}iS(){const t=this.Qy&BigInt(4294967295),e=this.Qy>>BigInt(32)&BigInt(4294967295);return rt.fromBits(Number(t),Number(e))}GT(){return new Date(0===this.zw?NaN:Number(this.BT(1e3).Qy))}QT(){return new ta(0===this.zw?this.Lb():Number(this.Qy),this.zw)}BT(e,i){void 0===i&&(i=be.KT);const s=this.zw;if(s===e)return this;if(0===s)return this;const n=Bd(s,e),r=function(t,e,i){const s=t/e,n=t-s*e;if(n===BigInt(0))return s;if(i===be.KT)return n<BigInt(0)?s-BigInt(1):s;if(i===be.jT)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<e?s:s-BigInt(1):t<e?s:s+BigInt(1)}}(this.Qy*BigInt(e/n),BigInt(s/n),i);return new t(r,e)}Ub(t){if(this===t)return Ze.ih;if(0===this.zw||0===t.zw)return Pm(this,t);if(this.hT())return t.hT()?Ze.ih:t.Gb()?Ze.Gc:Ze.Qc;if(t.hT())return this.Gb()?Ze.Qc:Ze.Gc;const e=b.min(this.zw,t.zw),i=this.BT(e,be.YT).Qy,s=t.BT(e,be.YT).Qy;return i>s?Ze.Gc:i<s?Ze.Qc:Ze.ih}Qb(){return 0===this.zw?function(t){0;return t.jb()?t:t.Gb()?Dm.WT:Dm.qT}(this):new t(-this.Qy,this.zw)}HA(e){if(0===this.zw||0===e.zw)return function(t,e){0;if(t.jb()||e.jb())return Dm.HT;if(t.Yb()&&e.Yb())return t.Gb()===e.Gb()?t:Dm.HT;return t.Yb()?t:e}(this,e);if(this.hT())return e;if(e.hT())return this;const i=b.max(this.zw,e.zw),s=this.BT(i,be.YT),n=e.BT(i,be.YT);return new t(s.Qy+n.Qy,i)}bT(e){if(this.jb()||j(e))return t.HT;if(this.Yb()||!isFinite(e)){if(this.hT()||0===e)return t.HT;{const i=this.Gb()?t.qT:t.WT;return e<0?i.Qb():i}}return this.hT()?this:new t(0===e?BigInt(0):this.Qy*BigInt(e),this.zw)}kT(e){if(this.jb()||j(e))return t.HT;if(this.Yb())return isFinite(e)?0===e?1/e<0?this.Qb():this:e<0?this.Qb():this:t.HT;if(!isFinite(e))return new t(BigInt(0),this.zw);if(this.hT())return 0===e?t.HT:new t(BigInt(0),this.zw);if(0===e){const i=this.Gb()?t.qT:t.WT;return 1/e<0?i.Qb():i}return new t(this.Qy/BigInt(e),this.zw)}ZT(){const t=this.iS();return[t.low,t.high,this.zw]}constructor(t,e){super(),this.Qy=BigInt.asIntN(64,t),this.zw=e>>>0}};Dm.JT=void 0,Dm.$T=void 0,Dm.tS=void 0,Dm.eS=void 0,function(t){t[t.KT=0]="KT",t[t.jT=1]="jT",t[t.YT=2]="YT"}(be||(be={}));var Bh=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?Dm:Vi;function xr(t,e){return t.Ub(e)}function Nm(t,e){return void 0!==t?void 0!==e?Bh.NT(t,e):t:e}var Bm=9e4,Om=Rr((()=>Bh.$b(8589934592,Bm))),Mm=Rr((()=>Om().kT(2)));var Oo={sS:0,nS:1/0,rS:0},Lm=6,Fm=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],Um=[" ","\t","\n","\f","\r"],Hm=/^\d*$/,Wm=/.*[0-9]+.*/,qm=/^[\d.-]+$/,Vm=/(^\.|\.$)/,zm=/(\D\.|\.\D)/;function Xm(t,e){void 0===e&&(e=Oo);return Gm(Rh(wa(t),new ds),e)}function Gm(t,e){void 0===e&&(e=Oo);const i={L:[],oS:[],hS:[]},s=Qm(t),n=new ds;if(sw(s),ps(s,(t=>"\n"!==t),n),n.Om>=s.length)return i;if(n.Mm(1),"\n"!==s.charAt(n.Om)){Jm(Km(s,n,false,!0,i,e),i)}else n.Mm(1);for(ps(s,(t=>"\n"===t),n);n.Om<s.length;){Jm(Km(s,n,false,!1,i,e),i),ps(s,(t=>"\n"===t),n)}return i}function Qm(t){const e=Kf(t,"\0"," "),i=Kf(e,"\r\n","\n");return Kf(i,"\r","\n")}function ps(t,e,i){const s=i.Om;for(;i.Om<t.length&&e(t.charAt(i.Om));)i.Mm(1);return t.substring(s,i.Om)}function Km(t,e,i,s,n,r){let o,h=0,a=e.Om,u="",c=!1,l=!1,d=null,_=null,v=null;for(;!c;)if(o=ps(t,(t=>"\n"!==t),e),h++,e.Om>=t.length?c=!0:e.Mm(1),Ei(o,"--\x3e")){if(s||1!==h&&(2!==h||l)){e.Fm(a);break}l=!0,a=e.Om,d=new pm(0,0,"",!1,u);try{$m(o,n.oS,d,r),u=""}catch(t){f.Uv(t),d=null}}else{if(""===o)break;s&&bt(o,"X-TIMESTAMP-MAP")&&(n.aS=jm(o)),s||2!==h||i||(jf("STYLE",u.replace(/ /g,""))?(_={l_:ss.$A},u=""):jf("REGION",u.replace(/ /g,""))&&(v=new Em("",100,3,0,100,0,100,""),u="")),u&&(u+="\n"),u+=o,a=e.Om}if(d)return d.R=u,d;if(_);else if(v)return function(t,e){const i=t.split(/\s/),s=":";for(const t of i)if(0!==t.length&&Ei(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const i=t.indexOf(s),n=t.substring(0,i),r=t.substring(i+1,t.length);switch(n.toUpperCase()){case"ID":_w(r,e);break;case"WIDTH":mw(r,e);break;case"LINES":gw(r,e);break;case"REGIONANCHOR":{const t=fw(r);t&&(e.xb=t[0],e.Db=t[1]);break}case"VIEWPORTANCHOR":{const t=fw(r);t&&(e.Bb=t[0],e.Ob=t[1]);break}case"SCROLL":vw(r,e)}}}(u,v),v;return null}function jm(t){const e=t.split("=")[1].trim().split(","),i=Zm(e[0].trim(),"MPEGTS")?e[0]:e[1],s=Zm(e[0].trim(),"LOCAL")?e[0]:e[1];var n;return{uS:Ym(Number(i.split(/:(.*)/)[1].trim())||0),dh:Bh.UT(null!=(n=ew(s.split(/:(.*)/)[1].trim(),new ds))?n:0)}}function Ym(t){return Bh.$b(t,Bm)}function Zm(t,e){return bt(t,e)}function Jm(t,e){t&&function(t){return"cue"===t.l_}(t)?e.L.push(t):t&&function(t){return"region"===t.l_}(t)?e.oS.push(t):t&&function(t){return"stylesheet"===t.l_}(t)&&e.hS.push(t)}function $m(t,e,i,s){const n=new ds;rw(t,n);const r=tw(ew(t,n),s);if(rw(t,n),"--\x3e"!==t.substring(n.Om,n.Om+3))throw v("Something went wrong with parsing a WebVTT Cue");n.Mm(3),rw(t,n);const o=tw(ew(t,n),s);i.Ib(r,o);!function(t,e,i){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&Ei(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),o=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":uw(o,e,i);break;case"VERTICAL":lw(o,e);break;case"D":dw(o,e);break;case"LINE":case"L":hw(o,e);break;case"POSITION":case"T":aw(o,e);break;case"SIZE":case"S":cw(o,e);break;case"ALIGN":case"A":ow(o,e)}}}(t.substring(n.Om,t.length),i,e)}function tw(t,e){return t+e.sS}function jr(t){return/^[0-9]$/.test(t)}function ew(t,e){const i=Kf(t,",",".");let s,n,r,o=!1;if(e.Om>=i.length||!jr(i.charAt(e.Om)))throw new v("Something went wrong with parsing a WebVTT Cue timestamp");const h=ps(i,jr,e),a=k(h,10);if((h.length>2||a>59)&&(o=!0),e.Om>=i.length||":"!==i.charAt(e.Om))throw new v("Something went wrong with parsing a WebVTT Cue timestamp");e.Mm(1);const u=ps(i,jr,e);if(2!==u.length)throw new v("Something went wrong with parsing a WebVTT Cue timestamp");const c=k(u,10);if(o||e.Om<i.length&&":"===i.charAt(e.Om)){if(e.Om>=i.length||":"!==i.charAt(e.Om))throw new v("Something went wrong with parsing a WebVTT Cue timestamp");e.Mm(1);const t=ps(i,jr,e);if(2!==u.length)throw new v("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=k(t,10)}else s=0,n=a,r=c;if(e.Om>=i.length||"."!==i.charAt(e.Om))throw new v("Something went wrong with parsing a WebVTT Cue timestamp");e.Mm(1);const l=ps(i,jr,e),d=k(l,10);if(c>59||r>59)throw new v("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+d/1e3}function iw(t){return sw(Qm(t))}function sw(t){if(t.length<Lm)return!1;for(const e of Fm)if(bt(t,e))return!0;return!1}function nw(t){return Yi(Um,t)}function rw(t,e){for(;e.Om<t.length&&nw(t.charAt(e.Om));)e.Mm(1)}function qo(t){const e=t.lastIndexOf("%");if(e>-1){const i=w(t.substring(0,e));if(!j(i)&&i>=0&&i<=100)return i}return null}function ow(t,e){const i=t.toLowerCase();switch(i){case"start":case"center":case"end":case"left":case"right":e.ub=i;break;case"middle":e.ub="center"}}function hw(t,e){let i,s;const n=t.indexOf(",");if(n>=0?(i=t.substring(0,n),s=t.substring(n+1,t.length)):(i=t,s=""),!Wm.test(i))return;let r,o;if(pi(i,"%")){const t=qo(i);if(null===t)return;r=t,o=!1}else{if(!qm.test(i)||i.lastIndexOf("-")>0)return;const t=i.indexOf(".");if(t>=0&&(t!==i.lastIndexOf(".")||!zm.test(i)||Vm.test(i)))return;if(r=w(i),j(r))return;o=!0}switch(e.cb=r,e.gb=o,s=s.toLowerCase(),s){case"start":case"center":case"end":e.fb=s;break;case"middle":e.fb="center"}}function aw(t,e){let i,s;const n=t.indexOf(",");n>=0?(i=t.substring(0,n),s=t.substring(n+1,t.length)):(i=t,s="");const r=qo(i);if(null!==r)switch(e.yo=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":e._b=s;break;case"start":e._b="line-left";break;case"middle":e._b="center";break;case"end":e._b="line-right"}}function uw(t,e,i){const s=jh(i,(e=>e.o===t));void 0!==s&&(e.vb=s)}function cw(t,e){const i=qo(t);null!==i&&(e.ww=i)}function lw(t,e){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":e.Mt="rl";break;case"lr":case"vertical:lr":case"vertical-lr":e.Mt="lr";break;default:e.Mt=""}}function dw(t,e){"VERTICAL"===t.toUpperCase()?e.Mt="rl":"VERTICAL-LR"===t.toUpperCase()&&(e.Mt="lr")}function fw(t){if(t.indexOf(",")>=0){const e=qo(t.substring(0,t.indexOf(","))),i=qo(t.substring(t.indexOf(",")+1,t.length));return[Eo(e||0,0,100),Eo(i||100,0,100)]}return null}function _w(t,e){e.o=t}function vw(t,e){"up"===t.toLowerCase()&&(e.Nb="up")}function gw(t,e){Hm.test(t)&&(e.Cb=k(t))}function mw(t,e){const i=qo(t);null!==i&&(e.Ti=i)}function ww(t){return t&&"cS"in t?t.cS:t}var pw,yw=class extends No{get lS(){return this.dS}get oS(){return this.fS}get _S(){return this.vS}get ma(){return this.vf||(this.vf=function(t){return Dh(xh(t),{get styles(){return t.lS},get regions(){return t.oS},get metadata(){return ww(t._S)},get content(){return ww(t.R)}})}(this)),this.vf}Pb(t){return!!qi(this.lS,t.lS)&&(!!qi(this.oS,t.oS)&&(this._S&&t._S?!!this._S.gS(t._S)&&(this.R&&t.R?this.R.gS(t.R):this.R===t.R):this._S===t._S))}constructor(t,e,i,s,n,r,o){super(t,e,i,s),this.dS=n,this.fS=r,this.vS=o||void 0}};function ks(t){return 1===t.mS}function Aw(t){return 3===t.mS}!function(t){t[t.wS=1]="wS",t[t.pS=2]="pS",t[t.gA=3]="gA",t[t.yS=4]="yS",t[t.AS=9]="AS"}(pw||(pw={}));var bw=class{get bS(){return this.xc.TS(!0)}get ob(){return this.SS}get hb(){return this.ES}constructor(t,e,i){this.SS=t,this.ES=e,ks(i)?this.xc=function(t,e,i){for(const t of["begin","end","dur"])i.kS(t);return i}(0,0,i):this.xc=i}};var bu={VIDEO_H264:"video/avc",VIDEO_H265:"video/hevc",VIDEO_MP4:"video/mp4",VIDEO_MPEG:"video/mpeg",VIDEO_MPEG2:"video/mpeg2",VIDEO_WEBM:"video/webm",VIDEO_UNKNOWN:"video/x-unknown",AUDIO_AAC:"audio/mp4a-latm",AUDIO_MP4:"audio/mp4",AUDIO_WEBM:"audio/webm",AUDIO_UNKOWN:"audio/x-unknown",IMAGE_JPEG:"image/jpeg",APPLICATION_TTML_XML:"application/ttml+xml",APPLICATION_MP4:"application/mp4",TEXT_VTT:"text/vtt"};function q(t){return Ei(t,bu.APPLICATION_MP4)||Ei(t,bu.VIDEO_MP4)||Ei(t,bu.AUDIO_MP4)}function Tw(t){return Ei(t,bu.VIDEO_WEBM)||Ei(t,bu.AUDIO_WEBM)}var Sw=class{PS(t){for(const[e,i]of this.IS)if(e.toLowerCase()===t.toLowerCase())return i}constructor(t,e){this.l_=t,this.IS=e}};function Ew(t){const e=t.trim(),i=e.indexOf(";");if(i<0)return new Sw(e,[]);const s=e.substr(0,i).trim(),n=e.substr(i+1).trim(),r=[];let o=0,h=!1;for(let t=0;t<n.length;t++){const e=n[t];if(h||";"!==e)'"'===e&&(h=!h);else{const e=kw(n.substr(o,t));e&&r.push(e),o=t+1}}if(o!==n.length){const t=kw(n.substr(o));t&&r.push(t)}return new Sw(s,r)}function kw(t){const e=t.indexOf("=");if(e<0)return;const i=t.substr(0,e).trim();let s=t.substr(e+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[i,s]}function _o(t){const e=t.trim(),i=e.indexOf(";");return i<0?e:e.substr(0,i).trim()}function Pw(t){let e=t;const i=e.match(/^avc1\.(\d+)\.(\d+)$/);if(i){const t=Number(i[1]),s=Number(i[2]);e="avc1."+Qt((t<<16|s).toString(16),6,"0")}return e}var Iw="http://www.w3.org/XML/1998/namespace";function Rw(t,e,i,s){let n=t.RS(i,e);return 0===n.length&&(n=t.CS(s+":"+e)),n}function Cw(t){const e={};for(const i of t.xS)e[i.DS]=i.Qy;return e}var xw=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,Dw=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,Nw="http://www.w3.org/ns/ttml";function Bw(t,e,i,s){void 0===i&&(i=Oo),void 0===s&&(s=bu.APPLICATION_TTML_XML);let n=[];const r=wa(t);return s===bu.APPLICATION_MP4?n=function(t,e,i){const s=hs.Ew(t),n=Yo(s,E_.pm);if(!n)return[];return Lw(wa(n.Xm),e,i)}(r,e,i):s===bu.APPLICATION_TTML_XML&&(n=Lw(r,e,i)),n}function Ow(t,e,i){return void 0===i&&(i=Oo),Fw(t,e,i)}function Mw(t,e){const i=Gw(e.bS),s={};for(const e of i)s[e]=t[e];return s}function Lw(t,e,i){return Fw(Rh(t,new ds),e,i)}function Fw(t,e,i){const s=[];let n;try{n=f.NS(t)}catch(t){return s}const r=n.OS;if("tt"!==r.DS)return s;const o=r&&r.RS(Nw,"head")[0],h=r&&r.RS(Nw,"body")[0];if(!h||!o)return s;const a=function(t){const e={},i=t.RS(Nw,"styling")[0],s=i&&i.RS(Nw,"style")||[];for(const t of s){e[t.MS(Iw,"id")]=Cw(t)}return e}(o),u=function(t){const e={},i=t.RS(Nw,"layout")[0],s=i&&i.RS(Nw,"region")||[];for(const t of s){const i=t.MS(Iw,"id");if(!i)continue;e[i]=Cw(t);const s=Xw(t);for(const t in s)N.call(s,t)&&(e[i][t]=s[t])}return e}(o),c=function(t,e){const i=$a(t),s=Ww(e.LS("tts:extent"));if(!s)return i;for(const t of g.keys(i)){const e=Ww(i[t].extent);if(e){const n=Uw(e[0],s[0]),r=Uw(e[1],s[1]);i[t].extent=n+" "+r}const n=Ww(i[t].origin);if(n){const e=Uw(n[0],s[0]),r=Uw(n[1],s[1]);i[t].origin=e+" "+r}}return i}(u,r),l=o.RS(Nw,"metadata")[0],d=qw(h,i.sS,i.nS,i.rS);for(const t of d){const e=Mw(c,t);s.push(new yw(t.ob,t.hb,t.bS,!1,a,e,l))}return s}function Uw(t,e){const i=Hw(t),s=Hw(e);if(i&&s&&i===s){const n=Number(t.slice(0,-i.length)),r=Number(e.slice(0,-s.length));return j(n)||j(r)?t:n/r*100+"%"}return t}function Hw(t){return pi(t,"px")?"px":pi(t,"em")?"em":pi(t,"c")?"c":pi(t,"%")?"%":void 0}function Ww(t){if(!t)return;const e=t.split(" ");return 2===e.length?[e[0],e[1]]:void 0}function qw(t,e,i,s){let n,r=e,o=i,h=[];const a=[];if(ks(t)){var u,c;r=null!=(u=zw(t.LS("begin"),s))?u:r,n=zw(t.LS("dur"),0),o=null!=(c=zw(t.LS("end"),s))?c:void 0!==n?r+n:o;const e=t.FS;for(let i=0;i<e.length;i++)("body"===t.DS||"div"===t.DS)&&e[i].mS>1||(h=h.concat(qw(e[i],r,o,s)))}const l=function(t,e,i){const s=[];s.push(t,e);for(const t of i)s.push(t.ob,t.hb);s.sort(F);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(Zt(s,t+1),t--,n=s.length);return s}(r,o,h);for(let e=0;e<l.length-1;e++){const i=Vw(l[e],l[e+1],h);if(i.length<=0&&Qw(t)){const i=t.TS(!1);a.push(new bw(l[e],l[e+1],i))}else if(i.length>0){const s=t.TS(!1);i.forEach((t=>s.US(t.bS))),a.push(new bw(l[e],l[e+1],s))}}return a}function Vw(t,e,i){const s=[];for(let n=0;n<i.length;n++){const r=i[n].ob,o=i[n].hb;(r>=t&&o<=e||r<e&&o>=e||r<t&&o>t)&&s.push(i[n])}return s}function zw(t,e){if(t){if(xw.test(t)){const i=xw.exec(t);if(!i)return;const s=Number(i[1])||0,n=Number(i[2])||0,r=Number(i[3])||0,o=i[6];return 3600*s+60*n+r+(o?Number(o)*.1**o.length:0)+e}if(Dw.test(t)){const i=Dw.exec(t);if(!i)return;const s=Number(i[1]);let n;switch(i[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+e}}}function Xw(t){const e={},i=t.CS("style")||[];for(const t of i){const i=Cw(t);for(const t in i)N.call(i,t)&&(e[t]=i[t])}return e}function Gw(t){let e,i=[];if(ks(t)){e=t.LS("region"),e&&i.push(e);const s=t.FS;for(let t=0;t<s.length;t++)i=i.concat(Gw(s[t]))}return i}function Qw(t){if(ks(t)){const e=t.DS.toUpperCase(),i=Boolean(t.LS("smpte:backgroundImage"));return"BR"===e||i}return t.mS===pw.gA}function Kw(t){const e=function(t){try{return f.NS(t).OS}catch(t){}}(t);return"tt"===(null==e?void 0:e.DS)}var K,ih=class extends ff{tt(t){return super.tt(t)}it(t){const e=super.it(t);return e&&(t.h_=_s.Th),e}pa(){return Gr(this)}};!function(t){t.xm="subtitles",t.HS="captions",t.WS="descriptions",t.$n="chapters",t.Nm="metadata",t.qS="thumbnails"}(K||(K={}));var jw=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function Yw(t){return"string"==typeof t&&Yi(jw,t)}function Zw(t,e){return!(!Yw(t)||!Yw(e))&&(t===e||"subtitles"===t&&"captions"===e||"captions"===t&&"subtitles"===e)}var ce,Co=class extends io{constructor(t,e,i,s,n){super(t,e,n),this.url=i,this.status=s}};!function(t){t.VS="HttpOpenError",t.zS="HttpResponseError",t.XS="HttpTimeoutError"}(ce||(ce={}));var pu=class extends Xs{get GS(){return this.QS}constructor(t,e,i){super(e,i),this.QS=t}};var st=class extends pu{get name(){return ce.zS}get KS(){return this.jS}constructor(t,e,i){super(t.GS,null!=i?i:function(t){return"Error while loading "+t.GS.YS+", status code "+t.ZS}(t),e),this.jS=t}};var Jw,Xo=class extends pu{get name(){return ce.XS}constructor(t,e){super(t,function(t){return"Request for "+t.YS+" timed out after "+t.JS+" seconds."}(t),e)}};function We(t){return t instanceof pu}function So(t){return t instanceof st}function $w(t){return t===K.xm||t===K.HS}function tp(t){return t.some(ep)}function ep(t){return Ei(t,"stpp")}function ip(t){return t.some(sp)}function sp(t){return Ei(t,"vtt")||Ei(t,"wvtt")}function np(t,e){return q(t)&&ip(e)}function rp(t,e){return t===K.qS||t===K.Nm&&e===K.qS}function op(t,e,i,s){for(const n of t.L.Ff){if(n.ob>i)break;e<=n.hb&&!Yi(s,n)&&s.push(n)}}function hp(t,e){return Mu(t.Yf,e.Yf)}function ap(t,e,i,s){const n=function(t){switch(t){case nt.WEBVTT:return"WebVTT";case nt.SRT:return"SRT";case nt.TTML:return"TTML";default:return""}}(t);return new Co(Ot.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",e,i,s)}function Ko(t,e){const i=[];for(const s of t.L.Ff)if(s.hb<=e)i.push(s);else if(s.ob>=e)break;for(const e of i)t.$S(e)}function up(t,e){if(t.V>0){const i=10,s=t.Tn(0),n=b.max(0,s-i);for(const t of e)t.tE(n)}}!function(t){t.eE="vtt",t.tm="wvtt",t.iE="stpp"}(Jw||(Jw={}));var Ct,cp=class extends d{tt(t){t.kn(Bs.oa,this.sE),this.Z.tt(t),this.nE(t)}it(t){t.pn(Bs.oa,this.sE),t.h_=_s.Th,this.Z.it(t)}rE(t){}oE(t){}nE(t){t.h_!==_s.Th?this.rE(t):this.oE(t)}hE(){for(const t of this.Z.Ff)t.pn(Bs.oa,this.sE),t.bn()}tE(t){if(t>0)for(const e of this.Z.Ff)Ko(e,t)}ir(){return this.hE(),this.Z.ir(),Promise.resolve()}async bn(){this.Lo(),await this.ir(),this.Z.bn()}constructor(...t){super(...t),this.Z=new ih,this.sE=t=>{const e=t.Ht;this.nE(e)}}};!function(t){t.aE="arraybuffer",t.uE="json",t.cE="stream",t.gA="text"}(Ct||(Ct={}));var Fr,ro,Ru,Au,lp,ou=class t{append(t,e){let i=t,s=e;i=dp(i),s=fp(s);const n=i.toLowerCase();if(this.Zc.hasOwnProperty(n)){const t=this.Zc[n],e=t[1];t[1]=e?e+", "+s:s}else this.Zc[n]=[i,s]}delete(t){const e=dp(t).toLowerCase();delete this.Zc[e]}get(t){const e=dp(t).toLowerCase();return this.Zc.hasOwnProperty(e)?this.Zc[e][1]:null}has(t){const e=dp(t).toLowerCase();return this.Zc.hasOwnProperty(e)}set(t,e){let i=t;i=dp(i);const s=i.toLowerCase();this.Zc[s]=[i,fp(e)]}forEach(t,e){for(const i in this.Zc)this.Zc.hasOwnProperty(i)&&t.call(e,this.Zc[i][1],i,this)}asList(){const t=[];for(const e in this.Zc)if(this.Zc.hasOwnProperty(e)){const[i,s]=this.Zc[e];t.push([i,s])}return t}lE(){const t={};return this.forEach(((e,i)=>{t[i]=e})),t}dE(t){t.forEach(((t,e)=>{this.append(e,t)}))}fE(t){t.forEach(((t,e)=>{this.set(e,t)}))}constructor(e){this.Zc={},e instanceof t?e.asList().forEach((t=>{let[e,i]=t;this.append(e,i)})):Array.isArray(e)?e.forEach((t=>{this.append(t[0],t[1])})):e&&g.getOwnPropertyNames(e).forEach((t=>{this.append(t,e[t])}))}};function dp(t){let e=t;if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new p("Invalid character in header field name");return e}function fp(t){let e=t;return"string"!=typeof e&&(e=String(e)),e}!function(t){t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT"}(Fr||(Fr={})),function(t){t.wA="",t._E="manifest",t.vE="segment",t.gE="preload-hint",t.mE="content-protection"}(ro||(ro={})),function(t){t.wA="",t.wE="initialization-segment",t.pE="fairplay-license",t.yE="fairplay-certificate",t.AE="widevine-license",t.bE="widevine-certificate",t.TE="playready-license",t.SE="clearkey-license",t.EE="aes128-key"}(Ru||(Ru={})),function(t){t.wA="",t.Cm="audio",t.Rm="video",t.gA="text",t.mA="image"}(Au||(Au={})),function(t){t.kE="same-origin",t.Hv="no-cors",t.PE="cors",t.IE="navigate"}(lp||(lp={}));var Pi,Yt=class{constructor(t,e){const i=t.YS;let s,n,r,o,h,a,u,c,l,d,f,_,v;var g;e?(s=e.RE,n=e.CE,r=e.xE,o=e.DE,h=e.JS,a=e.NE,u=e.fl,c=e.l_,l=e.BE,d=e.OE,f=e.ME,_=e.LE,v=e.h_):(s=null,n={},r="GET",o=Ct.gA,h=0,a=0,c="",l="",d="",f=!1,v=void 0),this.YS=i,this.RE=t.RE||s,this.CE=new ou(t.CE||n),this.xE=t.xE||r,this.DE=t.DE||o,this.JS=void 0!==t.JS?Number(t.JS)||0:h,this.NE=void 0!==t.NE?Number(t.NE)||0:a,this.fl=t.fl||u||(new Zs).fl,this.l_=t.l_||c,this.BE=t.BE||l,this.OE=t.OE||d,this.ME=void 0!==t.ME?Boolean(t.ME):f,this.LE=t.LE||_,this.h_=null!=(g=t.h_)?g:v}},_p=class extends nu{get error(){return this.errorObject.message}pa(){return this}constructor(t){super(lt.aa),this.errorObject=t}},Ds=class extends cp{FE(t){if(!t.src)return;const e=t.kind||K.xm,i=this.HE.UE(e,t.id,t.label,t.srclang,t.default);return i.d_=eh(t.src),this.tt(i),i}async WE(t,e){t.Pd=Gh.LOADING;const i=new Yt({YS:t.d_,DE:Ct.gA,xE:Fr.GET,fl:e});let s,n;try{const t=await this.qE.GS(i);n=t.ZS,s=await t.VE()}catch(e){return eo(e),t.Pd=Gh.ERROR,void t.To(new _p(function(t,e){let i=e,s=0;if(We(t)&&t.name===ce.VS)i=t.GS.YS;else if(So(t)){const e=t.KS;if(i=e.zE,s=e.ZS,0===s)return new Co(Ot.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",i,s,t)}return new Co(Ot.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",i,s,t)}(e,t.d_)))}try{const e=function(t){return iw(t)?nt.WEBVTT:Kw(t)?nt.TTML:nt.SRT}(s);t.l_=e;let i=[];if(e===nt.WEBVTT||e===nt.SRT){i=Gm(s).L}else e===nt.TTML&&(i=Ow(s,t));for(const e of i)t.XE(e)}catch(e){return eo(e),t.Pd=Gh.ERROR,void t.To(new _p(ap(t.l_,t.d_,n,e)))}t.Pd=Gh.LOADED}rE(t){Yi(this.Z.Ff,t)&&t.Pd===Gh.NONE&&this.WE(t,this.GE.fl).catch(yr)}Rn(){}async ir(){this.GE.vl(),this.GE=new Zs;for(const t of this.Z.Ff)this.HE.QE(t);await super.ir()}constructor(t,e){super(),this.GE=new Zs,this.HE=t,this.qE=e}};function vp(t,e){for(const i of t)if(i.Lt===e&&i.KE)return i}function gp(t,e){mp(vp(t.Ff,e))}function mp(t){void 0!==t&&(t.h_=_s.Jn)}function wp(t,e){const i=vp(t.Ff,e)||function(t,e){for(const i of t)if(i.Lt===e)return i}(t.Ff,e);mp(i)}function Bo(t){for(const e of jw)e===K.$n?wp(t,e):gp(t,e)}!function(t){t.jE="web",t.YE="android",t.ZE="android-tv",t.JE="ios",t.$E="tvos",t.ek="chromecast",t.nk="theoliveweb"}(Pi||(Pi={}));var lr=Uu?Uu.userAgent:"",pp=lr.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),yp=lr.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Ap=lr.match(/Android ([0-9\.]+)/i),bp=lr.match(/Windows NT ([0-9\.]+)/i),Tp=lr.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),Sp=lr.match(/Firefox\/([0-9\.]+)/i),Ep=lr.match(/OPR\/(\d+\.\d+)/i),kp=lr.match(/Tizen ([0-9\.]+)/i),Pp=lr.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),Ip=class{get Ye(){return this.rk}get hk(){return this.ck}get lk(){return this.dk}get fk(){return this._k}get vk(){return this.gk}get wk(){return this.pk}get yk(){return this.Ak}get bk(){return this.Tk}get Sk(){return this.Ek}get Pk(){return this.Ik}get Rk(){return this.Ck}get xk(){return this.Dk}get Nk(){return this.Bk}get Ok(){return this.Mk||this.Lk}get Fk(){return this.Uk}get Ks(){return this.Hk}get Wk(){return this.qk}get Vk(){return this.zk}get Xk(){return this.Gk}get Qk(){return this.Kk}get jk(){return this.Yk}get Zk(){return this.Jk}get $k(){return this.tP}get eP(){return this.iP}get sP(){return this.nP}get rP(){return this.oP}get hP(){return this.aP}get uP(){return this.cP}get lP(){return this.dP}get fP(){return this._P}get vP(){return this.gP}get mP(){return this.wP}get pP(){return this.yP}get AP(){return this.bP}get TP(){return this.SP}get EP(){return this.kP}get PP(){return this.IP}get RP(){return!(!this.eP&&!this.Zk)&&this.Xk<=56}get CP(){return this.xP}get DP(){return this.NP}get BP(){return this.OP}get MP(){return this.LP}get FP(){return this.UP}get HP(){return this.WP}get qP(){return this.VP}constructor(){this.rk=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||Uu&&Uu.msMaxTouchPoints),this.ck=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(lr)||/(macintosh|mac(?=_powerpc)\s)/i.test(lr),this.dk=/Windows NT/i.test(lr),this._k=bp?w(bp[1]):0,this.gk=/Android/i.test(lr),this.pk=Ap?w(Ap[1]):0,this.Ak=/windows phone (8|8\.1)/i.test(lr),this.Tk=/iPhone/i.test(lr),this.Ek=/iPad/i.test(lr),this.Ik=this.ck&&this.rk&&!this.Ek,this.Ck=/iPod/i.test(lr),this.Uk=/Mobile Safari/i.test(lr),this.Mk=/EOS\d*STB/i.test(lr),this.Lk=/APP\d*STB/i.test(lr),this.Dk=(this.Tk||this.Ek||this.Ik||this.Ck)&&!this.Ak,this.Bk=Pp?w(Pp[2]):0,this.Hk=this.Ak||this.Dk||this.gk||this.Uk,this.qk=/CriOS/i.test(lr),this.zk=Boolean(self.chrome&&/google/i.test(Uu.vendor))||this.qk,this.Kk=this.zk&&/Edg\//i.test(Uu.userAgent),this.Yk=yp?k(yp[1],10):0,this.VP=Boolean(self.chrome||/Chrome/i.test(lr)||/CriOS/i.test(lr)),this.Gk=pp?k(pp[1],10):0,this.Jk=/SMART-TV.*Tizen/i.test(lr),this.tP=kp?w(kp[1]):0,this.iP=/webos|web0s/i.test(lr),this.nP=/VIZIO/i.test(lr),this.oP=/Edge\/\d+/i.test(lr),this.aP=/Trident/i.test(lr),this.cP=this.aP&&!self.ActiveXObject&&"ActiveXObject"in self,this.dP=/Vivaldi/i.test(lr),this._P=/Firefox/i.test(lr)&&!/Seamonkey/i.test(lr),this.gP=Sp?w(Sp[1]):0,this.wP=/Safari/i.test(lr)&&!/Chrome/i.test(lr)&&!this.Ak&&!this.Jk,this.yP=Tp?w(Tp[2]):0,this.bP=Boolean(Ep),this.SP=Ep?w(Ep[1]):0,this.kP=/CrKey/.test(lr),this.IP=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(lr),this.xP="web"===Pi.ZE,this.NP="web"===Pi.YE,this.OP=this.NP||this.xP,this.LP="web"===Pi.JE,this.UP="web"===Pi.$E,this.WP="web"===Pi.ek}};Ip.zP=new Ip;var Rp,Cp,xp,qh,Dp,Np,Bp=Ip.zP,Sn=class extends Ci{constructor(){super(r.tv)}};var Op={l_:Do.Yv,XP:Sh,GP:"cenc",QP:x_,KP:Ks,jP:"PlayReady"},Mp={l_:Do.Zv,XP:N_,GP:"cenc",QP:D_,KP:Ua,jP:"Widevine"},Jo={l_:Do.Jv,XP:L_,GP:"skd",QP:M_,KP:_i,jP:"FairPlay"},Lp={l_:Do.Jv,XP:"com.apple.fps",GP:"sinf",QP:M_,KP:_i,jP:"FairPlay"},Fp={l_:Do.$v,XP:"org.w3.clearkey",GP:"cenc",QP:B_,KP:O_,jP:"ClearKey"},Up=[Op,Mp,Jo,Fp];function Hp(t){return Up.filter((e=>e.KP===t.toLowerCase()))}var vt,Wp=["cenc"],qp=["cbcs","cbcs-1-9"],x=class extends Ci{constructor(t){super("YP"),this.ZP=t}},ke=class extends Ci{constructor(t,e,i,s){super("JP"),this.ZP=t,this.$P=e,this.JP=i,this.tI=s}},Vp=class extends Ci{constructor(){super("lt")}};!function(t){t.O_="eI",t.iI="sI"}(vt||(vt={}));var Te=class extends Ci{constructor(t,e){super("eI"),this.GP=t,this.nI=e}},zp=class extends Ci{constructor(){super("sI")}},Zo=new S([0]).buffer,De=class{get ww(){return this.rI.length}oI(t){for(const e of this.rI)if(e[0]===t)return!0;return!1}hI(t){for(const e of this.rI)if(e[0]===t)return e[1]}aI(t,e){this.rI.forEach((e=>t(e[1],e[0])),e)}uI(t,e){this.rI.push([t,e])}cI(){wr(this.rI)}constructor(){this.rI=[]}},Os=class{lI(t){this.Uu&&(this.Uu(t),this.hl())}dI(t){this.Hu&&(this.Hu(t),this.hl())}vl(){this.fI.catch($d),this.dI(new Sr)}wl(t){t.then((t=>this.lI(t)),(t=>this.dI(t)))}hl(){this.Uu=void 0,this.Hu=void 0}constructor(){this.fI=new Promise(((t,e)=>{this.Uu=t,this.Hu=e}))}};function Xp(){return new S([8,4]).buffer}function Gp(t,e){return t===Sh?function(t){if(t.byteLength<2*Qp.length)return t;const e=new DataView(t,0,2*Qp.length),i=Uv(e,!0);if(i===Qp)return t;return function(t){const e='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',i='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+e+$_(t)+i;return er(s,!0).buffer}(t)}(e):e}var Qp="<PlayReady";var ia=class extends Xs{constructor(t,e,i,s){super(t,s),this._I=e,this.vI=i}},Kp=function(t,e){return(Kp=g.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)g.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function jp(t,e){if("function"!=typeof e&&null!==e)throw new p("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}Kp(t,e),t.prototype=null===e?g.create(e):(i.prototype=e.prototype,new i)}function Yp(t,e,i){return t.indexOf?t.indexOf(e,i):Array.prototype.indexOf.call(t,e,i)}(function(){function t(t,e){this.gI=t,this.mI=e}t.prototype.get=function(t){var e=this.gI.get(t);if(0===this.mI||void 0===e)return e;var i=this.gI.get(t+1)||0,s=e&(1<<8-this.mI)-1,n=i>>8-this.mI;return(s<<this.mI)+n},t.prototype.getBit=function(t){if(!(t<0)){var e=this.gI.get(b.floor((t+this.mI)/8));if(void 0!==e)return(e&1<<7-this.mI-t%8)>0?1:0}},g.defineProperty(t.prototype,"bitLength",{get:function(){return this.gI.bitLength-this.mI},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"length",{get:function(){return this.gI.length},enumerable:!1,configurable:!0})})(),b.pow(2,-52);function Zp(t,e,i){return b.min(b.max(t,e),i)}function Jp(t,e){return t>>8-e}function ha(t,e){return t&(1<<e)-1}var sh=function(){function t(t){this.wI=t,this.pI=0,this.yI=0}return g.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.pI+this.yI},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"done",{get:function(){return this.pI===this.wI.length&&0===this.yI},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"location",{get:function(){return{byte:this.pI,bit:this.yI}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var e=new t(this.wI);return e.seek(this.pI,this.yI),e},t.prototype.canReadBits=function(t){return 8*this.pI+t+this.yI<=8*this.wI.length},t.prototype.canReadBytes=function(t){return 0===this.yI?this.pI+t<=this.wI.length:this.pI+t<this.wI.length},t.prototype.incBit=function(){this.yI++,this.yI>7&&(this.pI++,this.yI=0)},t.prototype.seek=function(t,e){this.pI=t,this.yI=e},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new v("Cannot read past end of buffer.");return this.wI.get(this.pI)>>7-this.yI&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new v("Cannot read past end of buffer.");if(0===this.yI)return this.wI.get(this.pI++);var t=ha(this.wI.get(this.pI),8-this.yI),e=Jp(this.wI.get(this.pI+1),this.yI);return this.pI++,t<<this.yI|e},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new v("Cannot read past end of buffer.");for(var e=[],i=0;i<t;i++)e.push(this.readBit());return e},t.prototype.readUInt=function(t){if(t>32)throw new v("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new v("Cannot read past end of buffer.");var e=0;if(0===this.yI&&t%8==0)for(var i=t-8;i>=0;i-=8)e|=this.readByte()<<i;else for(i=t-1;i>=0;i--)e|=this.readBit()<<i;return e},t.prototype.readInt=function(t){if(t>32)throw new v("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new v("Cannot read past end of buffer.");var e=this.readUInt(t);return 0===(e&1<<t-1)?e:e-b.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var e=1<<t;return e+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new v("Skipping over the buffer edge is not allowed.");var e=this.yI+t;this.pI+=e>>3,this.yI=7&e},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new v("Cannot read past end of buffer.");for(var e=[],i=0;i<t;i++)e.push(this.readByte());return String.fromCharCode.apply(String,e)},t}(),$p=function(t,e){return t===e?0:t<e?-1:t>e?1:j(t)?j(e)?0:1:-1},xi=function(){function t(){this.AI=[],this.bI=[],this.TI=0}return t.from=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var s=new t,n=0,r=e;n<r.length;n++){var o=r[n];s.pushRange(o)}return s},t.prototype.pushRange=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=t.length),i<0)throw new v("The buffer length must be positive.");if(0!==i){if(0===this.bI.length)this.bI.push(0);else{var s=this.bI[this.bI.length-1]+this.AI[this.AI.length-1].length;this.bI.push(s)}this.AI.push(t.subarray(e,e+i)),this.TI+=i}},t.prototype.concat=function(e){var i=new t;return i.pushRange(this.join()),i.pushRange(e.join()),i},t.prototype.copy=function(t,e,i,s){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=this.length),e<0||i<0||s<0)throw new RangeError;return this.slice(i,s).copyInternal(t,e)},t.prototype.copyInternal=function(t,e){for(var i=0,s=e,n=0,r=this.AI;n<r.length;n++){var o=r[n];t.set(o,s),i+=o.length,s+=o.length}return i},t.prototype.clear=function(){this.AI=[],this.bI=[],this.TI=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var e=this.findContainingBufferIndex(t),i=t-this.bI[e];return this.AI[e][i]}},g.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.AI.length<1)return-1;if(this.AI.length>1){var e=this.join();this.clear(),this.pushRange(e)}var i=this.AI[0];return"number"==typeof t?Yp(i,t):"undefined"!=typeof Buffer?Buffer.from(i.buffer,i.byteOffset,i.byteLength).indexOf(t):function(t,e){if(0===e.length)return 0;for(var i=e[0],s=e.length,n=t.length-s,r=0;r<=n&&!((r=Yp(t,i,r))<0||r>n);r++){for(var o=r+1,h=r+s,a=1;o<h&&t[o]===e[a];o++,a++);if(o===h)return r}return-1}(i,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,e,i){if(0!==t.length){var s=0,n=t.length-1;if(1!==i(t[s],e)){if(1===i(e,t[n]))return n;for(;s!==n;){var r=b.ceil((s+n)/2);i(t[r],e)<=0?s=r:n=r-1}return s}}}(this.bI,t,$p)},t.prototype.join=function(){if(1===this.AI.length)return this.AI[0];var t=new S(this.length);return this.copyInternal(t,0),t},g.defineProperty(t.prototype,"length",{get:function(){return this.TI},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,e){if(e<=0||e>4)throw new v("Expected byteLength to be between 0 and 4 but was "+e);if(t<0||t>this.length-e)throw new v("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-e)+")");if(1===e)return this.get(t);for(var i=0,s=0;s<e;s++)i+=this.get(t+s)*b.pow(2,8*(e-s-1));return i},t.prototype.slice=function(e,i){void 0===i&&(i=this.length);var s=Zp(e,0,this.length),n=Zp(i,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,o=this.findContainingBufferIndex(s),h=this.AI[o],a=s,u=a-this.bI[o];a+h.length-u<n;)r.pushRange(h,u,h.length-u),o+=1,u=(a+=h.length-u)-this.bI[o],h=this.AI[o];var c=n-a;return r.pushRange(h,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var e=this.length-1,i=this.AI.length-1,s=this.AI[i],n=s.length-1;e>=0&&i>=0;){if(0!==s[n])break;if(0===n){if(0===i)return new t;i-=1,n=(s=this.AI[i]).length-1}else n-=1;e-=1}return this.slice(0,e+1)},t}(),ty=function(){function t(e){this.SI=e||t.BUFFER_CHUNK_SIZE,this.EI=!1,this.kI=new xi,this.wI=new S(this.SI),this.II=0,this.RI=0,this.yI=7}return t.prototype.closeByte=function(){this.wI[this.II++]=this.RI,this.II>=this.SI&&this.closeBuffer(),this.RI=0,this.yI=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.II&&(this.kI.pushRange(this.wI,0,this.II),t&&(this.wI=new S(this.SI)),this.II=0)},g.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.yI},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.EI)throw new v("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.EI=!0,this.kI},t.prototype.writeBit=function(t){if(this.EI)throw new v("Cannot write to a closed BitWriter.");this.RI|=t<<this.yI,0===this.yI?this.closeByte():this.yI--},t.prototype.writeByte=function(t){if(this.EI)throw new v("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.RI=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var e=this.yI;this.RI|=Jp(t,e+1),this.closeByte(),this.RI=ha(t,8-e)<<e+1,this.yI=e},t.prototype.writeBits=function(t){for(var e=0,i=t;e<i.length;e++){var s=i[e];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.EI)throw new v("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.II+t.length<=this.SI?(this.wI.set(t,this.II),this.II+=t.length,this.II===this.SI&&this.closeBuffer()):(this.closeBuffer(),this.kI.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var e=this.yI;this.RI|=Jp(t[0],e+1),this.closeByte();for(var i=1;i<t.length;i++){var s=ha(t[i-1],8-e),n=Jp(t[i],e+1);this.RI=s<<e+1|n,this.closeByte()}this.RI=ha(t[t.length-1],8-e)<<e+1,this.yI=e}},t.prototype.writeUInt=function(t,e){if(t<0)throw new v("Received a negative number.");if(e>32)throw new v("The max bitlength that can be provided is 32.");if(t>=b.pow(2,e))throw new v("Uint "+t+" cannot be represented in "+e+" bit(s).");if(this.isWritingStartBit&&e%8==0)for(var i=e-8;i>=0;i-=8)this.writeByte(t>>i&255);else for(i=e-1;i>=0;i--)this.writeBool((t&1<<i)>0)},t.prototype.writeInt=function(t,e){if(e>32)throw new v("The max bitlength that can be provided is 32.");if(b.abs(t)>=b.pow(2,e-1))throw new v("Signed integer "+t+" cannot be represented in "+e+" bit(s).");t<0?this.writeUInt(t+b.pow(2,e),e):this.writeUInt(t,e)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new v("Received a negative number.");for(var e=b.floor(b.log2(t+1))+1,i=0;i<e-1;i++)this.writeBit(0);this.writeUInt(t+1,e)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var e=function(t){for(var e=new S(t.length),i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(t),i=0;i<e.length;i++)this.writeByte(e[i])},t.BUFFER_CHUNK_SIZE=1024,t}(),ey=function(){function t(t){this.rb=new xi,this.Zu=t}return t.prototype.closeWriter=function(){void 0!==this.Zu&&(this.rb=this.rb.concat(this.Zu.close()),this.Zu=void 0)},g.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.Zu&&(this.Zu=new ty),this.Zu},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),es=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new v("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(e){var i=this.getSize(),s=i>=t.LARGE_SIZE/8,n=16===this.boxType.length;e.writeUInt(s?1:i,32),e.writeString(n?"uuid":this.boxType),s&&(e.writeUInt(b.floor(i/t.LARGE_SIZE),32),e.writeUInt(i%t.LARGE_SIZE,32)),n&&e.writeString(this.boxType)},t.prototype.getSize=function(){var e=8+(this.boxType.length>4?16:0),i=this.getBoxContentSize()+e;return i>=t.LARGE_SIZE/8&&(i+=8),i},t.prototype.serialize=function(){var t=new ey;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=b.pow(2,32),t}();function oo(t,e){return t instanceof rt?64===e:t<b.pow(2,e)}function Mo(t,e){return b.round(t*b.pow(2,e))}function ko(t,e){for(var i=0;i<e.length;i++)t.writeByte(e[i])}function tn(t,e){return t/b.pow(2,e)}var V=function(t){function e(e,i,s){var n=t.call(this,e)||this;if(n.version=i,!oo(i,8))throw new v("the provided version cannot fit in 8 bits.");return n.flags=s,n}return jp(e,t),g.defineProperty(e.prototype,"flags",{get:function(){return this.CI},set:function(t){this.CI=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new v("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},e.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},e}(es),iy=function(t){function e(e,i){var s=t.call(this,e)||this;return s.data=i,s}return jp(e,t),e.prototype.getBoxContentSize=function(){return this.data.length},e.prototype.serializeBoxContent=function(t){t.concat(xi.from(this.data))},e}(es),sy=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();var ny=16384;function ry(t){var e=t.length;if(e<=ny)return String.fromCharCode.apply(String,t);for(var i=[],s=0;s<e;s+=ny)i.push(String.fromCharCode.apply(String,t.slice(s,s+ny)));return i.join("")}var oy=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,e){return(t&e)===e}(this.raw,t)},t}();function ka(t,e){var i=t.getUint8(e.offset);return e.shift(1),i}function hy(t,e,i){var s=fy(gy(t),e.offset,e.offset+i);return e.shift(s.byteLength),s}function ay(t,e,i){return e.offset+i<=t.byteLength}function yo(t,e,i){void 0===i&&(i=!1);var s=t.getUint32(e.offset,i);return e.shift(4),s}function uy(t,e,i){void 0===i&&(i=!1);var s=yo(t,e,i),n=yo(t,e,i),r=i?n:s,o=i?s:n;return rt.fromBits(o,r,!0)}function cy(t,e,i){return ry(function(t){return[].slice.call(t)}(hy(t,e,i)))}function ly(t,e){var i,s=ka(t,e);return 0==(128&s)?i=s:192==(224&s)?i=64*(31&s)+(63&ka(t,e)):224==(240&s)?i=4096*(15&s)+64*(63&ka(t,e))+(63&ka(t,e)):240==(248&s)&&(i=262144*(7&s)+4096*(63&ka(t,e))+64*(63&ka(t,e))+(63&ka(t,e))),i}function dy(t,e){return function(t,e,i){var s=[],n=function(t,e){return e.offset+3<=t.byteLength&&239===t.getUint8(e.offset)&&187===t.getUint8(e.offset+1)&&191===t.getUint8(e.offset+2)}(t,e);n&&e.shift(3);for(;e.offset<t.byteLength;){var r=ly(t,e);if(void 0===r)break;if(i&&0===r)break;s.push(r)}return function(t){for(var e=[],i=0,s=t;i<s.length;i++){var n=s[i];n>65535&&(n-=65536,e.push(n>>>10&1023|55296),n=56320|1023&n),e.push(n)}return ry(e)}(s)}(t,e,!0)}function fy(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new S(t.buffer,t.byteOffset+e,i-e)}function _y(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new DataView(t.buffer,t.byteOffset+e,i-e)}function vy(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function gy(t){return new S(t.buffer,t.byteOffset,t.byteLength)}var my=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new sy(this.offset<<3)},t}(),wy=function(){function t(t,e){this.data=t,this.cursor=e}return t.prototype.nextUint8=function(){return ka(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getUint16(e.offset,i);return e.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getInt16(e.offset,i);return e.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return yo(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getInt32(e.offset,i);return e.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,e,i){void 0===i&&(i=!1);var s=yo(t,e,i),n=yo(t,e,i),r=i?n:s,o=i?s:n;return rt.fromBits(o,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return uy(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return hy(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,e,i){for(var s=[],n=0;n<i;n++)s.push(yo(t,e));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return cy(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return dy(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function Ea(t,e){return t.type===e}var py=8;function mr(t){var e=function(t,e){var i=[];for(;e.offset<t.byteLength;){var s=yy(t,e);if(!s.complete)return{complete:!1,boxes:i};i.push(s.box)}return{complete:!0,boxes:i}}(t.data,t.cursor);if(!e.complete)throw new v("Data incomplete");return e.boxes}function yy(t,e){var i=e.offset,s=function(t,e){var i=e.offset;if(!ay(t,e,py)){return{complete:!1,neededOffset:r=e.offset+py}}var s=yo(t,e),n=cy(t,e,4);if(1===s){if(!ay(t,e,8)){var r=e.offset+8;return e.seek(i),{complete:!1,neededOffset:r}}s=uy(t,e).toNumber()}if("uuid"===n){if(!ay(t,e,16)){r=e.offset+16;return e.seek(i),{complete:!1,neededOffset:r}}n=cy(t,e,16)}var o=e.offset,h={type:n,size:s,headerSize:o-i};return{complete:!0,header:h}}(t,e);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-i);var o=i+r;if(o>t.byteLength){var h=o;return e.seek(i),{complete:!1,neededOffset:h}}var a={type:n.type,offset:i,data:new wy(_y(t,i,o),new my(n.headerSize))};return e.seek(o),{complete:!0,box:a}}function mt(t){return{version:t>>24,flags:new oy(16777215&t)}}function Ay(t,e){var i,s,n,r;return 1===e?(i=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(i=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:i,modification:s,scale:n,duration:r}}function by(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function Ty(t){var e=t.nextUint32Array(9);return{a:tn(e[0],16),b:tn(e[1],16),u:tn(e[2],30),c:tn(e[3],16),d:tn(e[4],16),v:tn(e[5],30),x:tn(e[6],16),y:tn(e[7],16),w:tn(e[8],30)}}function vs(t){return new iy(t.type,fy(gy(t.data.data),t.data.cursor.offset))}var Sy=function(t){function e(e,i,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=i,r.handlerType=e,r}return jp(e,t),g.defineProperty(e.prototype,"handlerType",{get:function(){return this.xI},set:function(t){this.xI=t},enumerable:!1,configurable:!0}),e.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(i=null===(e=this.name)||void 0===e?void 0:e.length)&&void 0!==i?i:0)+1},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeString(this.handlerType),this.serializeReserved(e),this.name&&e.writer.writeString(this.name),e.writer.writeByte(0)},e}(V);function Ey(t){var e=t.data,i=mt(e.nextUint32()),s=i.version,n=i.flags;e.skip(4);var r=e.nextChars(4);e.skip(12);var o=e.nextUTF8String();return new Sy(r,o,s,n.raw)}!function(t){function e(){return t.call(this,"mdir")||this}jp(e,t),e.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(Sy);var Ws=function(){function t(t,e){void 0===e&&(e=!1),this.fixed28BitMode=e,this.tag=t}return t.prototype.encodeSize=function(t){for(var e=[];t>0;)e.length>0&&(e[e.length-1]+=128),e.push(t%128),t>>=7;if(this.fixed28BitMode)for(;e.length<4;)e.push(128);return e.reverse()},g.defineProperty(t.prototype,"tag",{get:function(){return this.DI},set:function(t){if(!oo(t,8))throw new v("Provided tag does not fit in 8 bits.");this.DI=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var e=0,i=this.encodeSize(this.getDescriptorSize());e<i.length;e++){var s=i[e];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}(),ky=(function(t){function e(e,i,s,n,r,o,h){void 0===h&&(h={});var a=t.call(this,4,h.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=o,a.objectTypeIndication=e,a.streamType=i,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}jp(e,t),g.defineProperty(e.prototype,"objectTypeIndication",{get:function(){return this.NI},set:function(t){if(!oo(t,8))throw new v("Provided objectTypeIndication does not fit in 8 bits.");this.NI=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"streamType",{get:function(){return this.BI},set:function(t){if(!oo(t,6))throw new v("Provided streamType does not fit in 6 bits.");this.BI=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"bufferSizeDb",{get:function(){return this.OI},set:function(t){if(!oo(t,24))throw new v("Provided bufferSizeDb does not fit in 24 bits.");this.OI=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"maxBitrate",{get:function(){return this.MI},set:function(t){if(!oo(t,32))throw new v("Provided maxBitrate does not fit in 32 bits.");this.MI=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"avgBitrate",{get:function(){return this.LI},set:function(t){if(!oo(t,32))throw new v("Provided avgBitrate does not fit in 32 bits.");this.LI=t},enumerable:!1,configurable:!0}),e.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce((function(t,e){return t+e.getSize()}),0)},e.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var e=0,i=this.decoderSpecificInfo;e<i.length;e++){i[e].serialize(t)}}}(Ws),function(t){function e(e,i){void 0===i&&(i={});var s=t.call(this,5,i.fixed28BitMode)||this;return s.data=e,s}jp(e,t),e.prototype.getDescriptorSize=function(){return this.data.length},e.prototype.serializeDescriptorContent=function(t){t.concat(xi.from(this.data))}}(Ws),function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this,6,e)||this;return i.predefined=2,i}return jp(e,t),e.prototype.getDescriptorSize=function(){return 1},e.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},e}(Ws)),Py=(function(t){function e(e,i,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=e,r.streamPriority=i,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new ky(n.fixed28BitMode),r}jp(e,t),g.defineProperty(e.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"esId",{get:function(){return this.FI},set:function(t){if(!oo(t,16))throw new v("Provided esId does not fit in 16 bits.");this.FI=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"streamPriority",{get:function(){return this.UI},set:function(t){if(!oo(t,5))throw new v("Provided streamPriority does not fit in 5 bits.");this.UI=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"dependsOnEsId",{get:function(){return this.HI},set:function(t){if(t&&!oo(t,16))throw new v("Provided dependsOnEsId does not fit in 16 bits.");this.HI=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"ocrEsId",{get:function(){return this.WI},set:function(t){if(t&&!oo(t,16))throw new v("Provided ocrEsId does not fit in 16 bits.");this.WI=t},enumerable:!1,configurable:!0}),e.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},e.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(Ws),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxes=[],e}return jp(e,t),e.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce((function(t,e){return t+e.getSize()}),0)},e.prototype.serialize=function(){for(var e=t.prototype.serialize.call(this),i=0,s=this.boxes;i<s.length;i++){var n=s[i];e=e.concat(n.serialize())}return e},e}(es)),As=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jp(e,t),e.prototype.serializeBoxContent=function(t){},e.prototype.getBoxContentSize=function(){return 0},e}(Py),na=function(t){function e(e,i){var s=t.call(this,e)||this;return s.dataReferenceIndex=i,s}return jp(e,t),g.defineProperty(e.prototype,"dataReferenceIndex",{get:function(){return this.qI},set:function(t){if(!oo(t,16))throw new v("Provided dataReferenceIndex does not fit in 16 bits.");this.qI=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 8},e.prototype.serializeBoxContent=function(t){for(var e=0;e<6;e++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},e}(As),Iy=function(t){function e(e,i,s,n){var r,o,h=this;return(h=t.call(this,e,i)||this).extra=n,h.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,h.sampleSize=null!==(o=s.sampleSize)&&void 0!==o?o:16,h.sampleRate=s.sampleRate,h}return jp(e,t),g.defineProperty(e.prototype,"channelCount",{get:function(){return this.VI},set:function(t){if(!oo(t,16))throw new v("Provided channelCount does not fit in 16 bits.");this.VI=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"sampleSize",{get:function(){return this.zI},set:function(t){if(!oo(t,16))throw new v("Provided sampleSize does not fit in 16 bits.");this.zI=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"sampleRate",{get:function(){return this.XI},set:function(t){if(!oo(Mo(t,16),32))throw new v("Provided rate does not fit in 32 bits (fixed 16.16).");this.XI=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(i=null===(e=this.extra)||void 0===e?void 0:e.length)&&void 0!==i?i:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.channelCount,16),e.writer.writeUInt(this.sampleSize,16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,16),e.writer.writeUInt(Mo(this.sampleRate,16),32),this.extra&&ko(e.writer,this.extra)},e}(na),ge=(function(t){function e(e){var i=t.call(this,"stco",0,0)||this;return i.entries=e,i}jp(e,t),g.defineProperty(e.prototype,"entries",{get:function(){return this.GI},set:function(t){if(!oo(t.length,32))throw new v("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!oo(t,32)})))throw new v("Not all entries can be represented in 32 bits.");this.GI=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}}(V),function(t){function e(e){var i=t.call(this,"clap")||this;return i.cleanApertureWidthN=e.cleanApertureWidthN,i.cleanApertureWidthD=e.cleanApertureWidthD,i.cleanApertureHeightN=e.cleanApertureHeightN,i.cleanApertureHeightD=e.cleanApertureHeightD,i.horizOffN=e.horizOffN,i.horizOffD=e.horizOffD,i.vertOffN=e.vertOffN,i.vertOffD=e.vertOffD,i}jp(e,t),g.defineProperty(e.prototype,"cleanApertureWidthN",{get:function(){return this.QI},set:function(t){if(!oo(t,32))throw new v("Provided cleanApertureWidthN does not fit in 32 bits.");this.QI=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"cleanApertureWidthD",{get:function(){return this.KI},set:function(t){if(!oo(t,32))throw new v("Provided cleanApertureWidthD does not fit in 32 bits.");this.KI=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"cleanApertureHeightN",{get:function(){return this.jI},set:function(t){if(!oo(t,32))throw new v("Provided cleanApertureHeightN does not fit in 32 bits.");this.jI=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"cleanApertureHeightD",{get:function(){return this.YI},set:function(t){if(!oo(t,32))throw new v("Provided cleanApertureHeightD does not fit in 32 bits.");this.YI=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"horizOffN",{get:function(){return this.ZI},set:function(t){if(!oo(t,32))throw new v("Provided horizOffN does not fit in 32 bits.");this.ZI=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"horizOffD",{get:function(){return this.JI},set:function(t){if(!oo(t,32))throw new v("Provided horizOffD does not fit in 32 bits.");this.JI=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"vertOffN",{get:function(){return this.$I},set:function(t){if(!oo(t,32))throw new v("Provided vertOffN does not fit in 32 bits.");this.$I=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"vertOffD",{get:function(){return this.tR},set:function(t){if(!oo(t,32))throw new v("Provided vertOffD does not fit in 32 bits.");this.tR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 32},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(es),function(t){function e(e,i){var s=t.call(this,"ctts",e,0)||this;return s.entries=i,s}jp(e,t),g.defineProperty(e.prototype,"entries",{get:function(){return this.GI},set:function(t){if(!oo(t.length,32))throw new v("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!oo(t.sampleCount,32)||!oo(t.sampleOffset,32)})))throw new v("Not all entries can be represented in 64 bits.");this.GI=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.sampleCount,32),0===this.version?e.writer.writeUInt(n.sampleOffset,32):1===this.version&&e.writer.writeInt(n.sampleOffset,32)}}}(V),function(t){function e(e){var i=t.call(this,"url ",0,void 0===e?1:0)||this;return i.location=e,i}jp(e,t),g.defineProperty(e.prototype,"location",{get:function(){return this.eR},set:function(t){this.flags=void 0===t?1:0,this.eR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this);return this.location?e+this.location.length+1:e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.location&&(e.writer.writeString(this.location),e.writer.writeByte(0))}}(V),function(t){function e(e,i,s){var n=t.call(this,"urn ",0,s)||this;return n.name=e,n.location=i,n}jp(e,t),g.defineProperty(e.prototype,"location",{get:function(){return this.eR},set:function(t){if(1&this.flags)throw new v("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.eR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?e+this.location.length+1:e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.name),e.writer.writeByte(0),this.location&&(e.writer.writeString(this.location),e.writer.writeByte(0))}}(V),function(t){function e(){return t.call(this,"dinf")||this}jp(e,t)}(As),function(t){function e(e,i,s){var n=t.call(this,e)||this;if(n.version=i,!oo(i,8))throw new v("the provided version cannot fit in 8 bits.");return n.flags=s,n}return jp(e,t),g.defineProperty(e.prototype,"flags",{get:function(){return this.CI},set:function(t){this.CI=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new v("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},e.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},e}(Py)),Ry=(function(t){function e(){return t.call(this,"dref",0,0)||this}jp(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.boxes.length,32)}}(ge),function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"elst",i,s)||this;return n.entries=e,n}return jp(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"entries",{get:function(){return this.GI},set:function(t){for(var e=0,i=t;e<i.length;e++){var s=i[e];if(!oo(s.segmentDuration,this.bitSize))throw new v("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!oo(s.mediaTime,this.bitSize))throw new v("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!oo(s.mediaRateInteger,16))throw new v("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!oo(s.mediaRateFraction,16))throw new v("Provided mediaRateFraction does not fit in 16 bits.")}this.GI=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(e)},e}(V)),Cy=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return jp(e,t),e.prototype.serializeElstBoxContent=function(t){for(var e,i=0,s=this.entries;i<s.length;i++){var n=s[i];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(e=n.mediaRateFraction)&&void 0!==e?e:0,16)}},e}(Ry),xy=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return jp(e,t),e.prototype.serializeElstBoxContent=function(t){for(var e,i=0,s=this.entries;i<s.length;i++){var n=s[i];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(e=n.mediaRateFraction)&&void 0!==e?e:0,16)}},e}(Ry);function Dy(t){for(var e=t.data,i=mt(e.nextUint32()),s=i.version,n=i.flags,r=e.nextUint32(),o=[],h=0;h<r;h++){var a=void 0,u=void 0;0===s?(a=e.nextUint32(),u=e.nextInt32()):(a=e.nextUint64(),u=e.nextInt64());var c=e.nextInt16(),l=e.nextInt16();o.push({segmentDuration:a,mediaTime:u,mediaRateFraction:l,mediaRateInteger:c})}return 0===s?new Cy(o,n.raw):new xy(o,n.raw)}var Ny=function(t){function e(){return t.call(this,"edts")||this}return jp(e,t),e}(As);function By(t){for(var e=new Ny,i=0,s=mr(t.data);i<s.length;i++){var n=s[i];Ea(n,"elst")?e.boxes.push(Dy(n)):e.boxes.push(vs(n))}return e}var Oy=function(t){function e(e,i,s,n){var r=t.call(this,e)||this;return r.majorBrand=i,r.minorVersion=s,r.compatibleBrands=n,r}return jp(e,t),g.defineProperty(e.prototype,"majorBrand",{get:function(){return this.iR},set:function(t){if(4!==t.length)throw new v("the provided major brand does not conform to the 4 character requirement");this.iR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"minorVersion",{get:function(){return this.sR},set:function(t){if(!oo(t,32))throw new v("the provided minor version does not fit in 32 bits.");this.sR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"compatibleBrands",{get:function(){return this.nR},set:function(t){if(t.some((function(t){return 4!==t.length})))throw new v("Some of the compatible brands do not conform to the 4 character requirement");this.nR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},e.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var e=0,i=this.compatibleBrands;e<i.length;e++){var s=i[e];t.writer.writeString(s)}},e}(es),My=function(t){function e(e,i,s){return t.call(this,"ftyp",e,i,s)||this}return jp(e,t),e}(Oy);function Ly(t){for(var e=t.data,i=e.nextChars(4),s=e.nextUint32(),n=[];e.cursor.offset<e.data.byteLength;)n.push(e.nextChars(4));return new My(i,s,n)}var Fy=function(t){function e(e,i){void 0===i&&(i="free");var s=t.call(this,i)||this;return s.data=e,s}return jp(e,t),e.prototype.getBoxContentSize=function(){var t,e;return null!==(e=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==e?e:0},e.prototype.serializeBoxContent=function(t){this.data&&t.concat(xi.from(this.data))},e}(es),Uy=function(t){function e(e,i,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=e.creation,r.modificationTime=e.modification,r.timescale=e.scale,r.duration=e.duration,r.language=i,r}return jp(e,t),g.defineProperty(e.prototype,"creationTime",{get:function(){return this.rR},set:function(t){if(!oo(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.rR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"modificationTime",{get:function(){return this.oR},set:function(t){if(!oo(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.oR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"timescale",{get:function(){return this.hR},set:function(t){if(!oo(t,32))throw new v("Provided sequence number does not fit in 32 bits.");this.hR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"duration",{get:function(){return this.aR},set:function(t){if(!oo(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.aR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"language",{get:function(){return this.uR},set:function(t){if(!Vy(t))throw new v("Expected an ISO-639-2/T language code");this.uR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeMdiaContent(e),e.writer.writeBit(0);for(var i=0,s=this.language;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.charCodeAt(0)-96,5)}e.writer.writeUInt(0,16)},e}(V),Hy=function(t){function e(e,i,s){return void 0===s&&(s=0),t.call(this,e,i,0,s)||this}return jp(e,t),e.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},e}(Uy),Wy=function(t){function e(e,i,s){return void 0===s&&(s=0),t.call(this,e,i,1,s)||this}return jp(e,t),e.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(Uy);function qy(t){var e=t.data,i=mt(e.nextUint32()),s=i.version,n=i.flags,r=Ay(e,s),o=new sh(xi.from(e.nextUint8Array(2)));o.skipBits(1);for(var h=[],a=0;a<3;a++)h.push(o.readUInt(5));var u=h.map((function(t){return String.fromCharCode(t+96)})).join("");return Vy(u)||(u="und"),e.skip(2),0===s?new Hy(r,u,n.raw):new Wy(r,u,n.raw)}function Vy(t){return/^[a-z]{3}$/.test(t)}var ba=function(t){function e(){return t.call(this,"mdia")||this}return jp(e,t),e}(As);function zy(t){for(var e=new ba,i=0,s=mr(t.data);i<s.length;i++){var n=s[i];Ea(n,"mdhd")?e.boxes.push(qy(n)):Ea(n,"hdlr")?e.boxes.push(Ey(n)):e.boxes.push(vs(n))}return e}var Xy=function(t){function e(){var e=t.call(this,"mdat")||this;return e.data=new xi,e}return jp(e,t),e.prototype.getBoxContentSize=function(){return this.data.length},e.prototype.serializeBoxContent=function(t){t.concat(this.data)},e}(es);function Gy(t){var e=t.data,i=e.nextUint8Array(e.data.byteLength-e.cursor.offset),s=new Xy;return s.data.pushRange(i),s}var Qy;(function(t){function e(){return t.call(this,"minf")||this}jp(e,t)})(As),function(t){function e(e){var i=t.call(this,"meta",0,0)||this;return i.handler=e,i}jp(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.handler.serialize())}}(ge);!function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(Qy||(Qy={}));var Ky,jy,Yy={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function Zy(t,e){e.writer.writeUInt(Mo(t.a,16),32),e.writer.writeUInt(Mo(t.b,16),32),e.writer.writeUInt(Mo(0,30),32),e.writer.writeUInt(Mo(t.c,16),32),e.writer.writeUInt(Mo(t.d,16),32),e.writer.writeUInt(Mo(0,30),32),e.writer.writeUInt(Mo(t.x,16),32),e.writer.writeUInt(Mo(t.y,16),32),e.writer.writeUInt(Mo(1,30),32)}function Jy(t,e){var i,s,n,r;e.writer.writeUInt(null!==(i=t.isLeading)&&void 0!==i?i:Ky.UNKNOWN,2),e.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:jy.UNKNOWN,2),e.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:jy.UNKNOWN,2),e.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:jy.UNKNOWN,2)}function $y(t,e){var i,s,n;e.writer.writeUInt(0,4),Jy(t,e),e.writer.writeUInt(null!==(i=t.samplePaddingValue)&&void 0!==i?i:0,3),e.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),e.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(Ky||(Ky={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(jy||(jy={}));var tA=function(){},eA=function(t){function e(e,i,s){var n=t.call(this,"pssh",e,0)||this;return n.systemId=i,n.data=s,n}return jp(e,t),g.defineProperty(e.prototype,"systemId",{get:function(){return this.cR},set:function(t){if(16!==t.length)throw new v("Provided systemId length is not 16.");this.cR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"data",{get:function(){return this.lR},set:function(t){if(!oo(t.length,32))throw new v("Provided data length does not fit in 32 bits.");this.lR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},e.prototype.serializeVersionBoxContent=function(t){},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(xi.from(this.systemId)),this.serializeVersionBoxContent(e),e.writer.writeUInt(this.data.length,32),e.concat(xi.from(this.data))},e}(V),iA=function(t){function e(e,i){return t.call(this,0,e,i)||this}return jp(e,t),e}(eA),sA=function(t){function e(e,i,s){var n=t.call(this,1,e,i)||this;return n.kIds=s,n}return jp(e,t),g.defineProperty(e.prototype,"kIds",{get:function(){return this.dR},set:function(t){if(!oo(t.length,32))throw new v("Provided kIds length cannot fit in 32 bits.");if(t.some((function(t){return 16!==t.length})))throw new v("Not all provided key ids are 16 bytes long.");this.dR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var e=0,i=this.kIds;e<i.length;e++){var s=i[e];t.concat(xi.from(s))}},e}(eA);function fa(t){var e=t.data.nextUint8();t.data.skip(3);var i=t.data.nextUint8Array(16),s=[];if(1===e)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var o=t.data.nextUint32(),h=t.data.nextUint8Array(o);return 1===e?new sA(i,h,s):new iA(i,h)}var nA=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"mehd",i,s)||this;return n.fragmentDuration=e,n}return jp(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"fragmentDuration",{get:function(){return this.fR},set:function(t){if(!oo(t,this.bitSize))throw new v("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.fR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},e}(V),rA=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return jp(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.fragmentDuration,32)},e}(nA),oA=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return jp(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),e.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},e}(nA);function hA(t){var e=t.data,i=mt(e.nextUint32()),s=i.version,n=i.flags;return 0===s?new rA(e.nextUint32(),n.raw):new oA(e.nextUint64(),n.raw)}var Ns=function(t){function e(e,i,s,n){void 0===i&&(i={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,o,h,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=e,a.defaultSampleDescriptionIndex=null!==(r=null==i?void 0:i.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(o=i.sampleDuration)&&void 0!==o?o:0,a.defaultSampleSize=null!==(h=i.sampleSize)&&void 0!==h?h:0,a.defaultSampleFlags=i.sampleFlags,a}return jp(e,t),g.defineProperty(e.prototype,"trackId",{get:function(){return this._R},set:function(t){if(!oo(t,32))throw new v("Provided track id does not fit in 32 bits.");this._R=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.vR},set:function(t){if(!oo(t,32))throw new v("Provided default sample description index does not fit in 32 bits.");this.vR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleDuration",{get:function(){return this.gR},set:function(t){if(!oo(t,32))throw new v("Provided default sample duration does not fit in 32 bits.");this.gR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.mR},set:function(t){if(!oo(t,32))throw new v("Provided default sample size does not fit in 32 bits.");this.mR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleFlags",{get:function(){return this.wR},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!oo(t.samplePaddingValue,3))throw new v("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!oo(t.sampleDegradationPriority,16))throw new v("Provided sample degradation priority does not fit in 16 bits.");this.wR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},e.prototype.serializeBoxContent=function(e){var i;t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32),e.writer.writeUInt(this.defaultSampleDescriptionIndex,32),e.writer.writeUInt(this.defaultSampleDuration,32),e.writer.writeUInt(this.defaultSampleSize,32),$y(null!==(i=this.defaultSampleFlags)&&void 0!==i?i:{},e)},e}(V);function aA(t){var e=t.data,i=mt(e.nextUint32()),s=i.version,n=i.flags,r=e.nextUint32(),o=e.nextUint32(),h=e.nextUint32(),a=e.nextUint32(),u=by(new sh(xi.from(e.nextUint8Array(4))));return new Ns(r,{sampleDescriptionIndex:o,sampleDuration:h,sampleSize:a,sampleFlags:u},s,n.raw)}var Xe=function(t){function e(){return t.call(this,"mvex")||this}return jp(e,t),e}(As);function uA(t){for(var e=new Xe,i=0,s=mr(t.data);i<s.length;i++){var n=s[i];Ea(n,"mehd")?e.boxes.push(hA(n)):Ea(n,"trex")?e.boxes.push(aA(n)):e.boxes.push(vs(n))}return e}var cA=function(t){function e(i,s,n,r,o){void 0===o&&(o=0);var h,a,u,c=this;return(c=t.call(this,"mvhd",r,o)||this).creationTime=i.creation,c.modificationTime=i.modification,c.timescale=i.scale,c.duration=i.duration,c.rate=null!==(h=n.rate)&&void 0!==h?h:e.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:e.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:Yy,c.pR=s,c}return jp(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"creationTime",{get:function(){return this.rR},set:function(t){if(!oo(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.rR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"modificationTime",{get:function(){return this.oR},set:function(t){if(!oo(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.oR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"timescale",{get:function(){return this.hR},set:function(t){if(!oo(t,32))throw new v("Provided sequence number does not fit in 32 bits.");this.hR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"duration",{get:function(){return this.aR},set:function(t){if(!oo(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.aR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"rate",{get:function(){return this.yR},set:function(t){if(!oo(Mo(t,16),32))throw new v("Provided rate does not fit in 32 bits (fixed 16.16).");this.yR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"volume",{get:function(){return this.AR},set:function(t){if(!oo(Mo(t,8),16))throw new v("Provided volume does not fit in 16 bits (fixed 8.8).");this.AR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"matrix",{get:function(){return this.bR},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new v("(u, v, w) does not match the required (0, 0, 1)");this.bR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"nextTrackId",{get:function(){return this.pR},set:function(t){if(0===t)throw new v("NextTrackId cannot be 0.");if(!oo(t,32))throw new v("NextTrackId cannot exceed 32 bits.");this.pR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeMvhdContent(e),e.writer.writeUInt(Mo(this.rate,16),32),e.writer.writeUInt(Mo(this.volume,8),16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),Zy(this.matrix,e);for(var i=0;i<6;i++)e.writer.writeUInt(0,32);e.writer.writeUInt(this.nextTrackId,32)},e.DEFAULT_RATE=1,e.DEFAULT_VOLUME=1,e}(V),lA=function(t){function e(e,i,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,e,i,s,0,n)||this}return jp(e,t),e.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},e}(cA),dA=function(t){function e(e,i,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,e,i,s,1,n)||this}return jp(e,t),e.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(cA);function fA(t){var e=t.data,i=mt(e.nextUint32()),s=i.version,n=i.flags,r=Ay(e,s),o=tn(e.nextUint32(),16),h=tn(e.nextUint16(),8);e.skip(2),e.skip(8);var a=Ty(e);e.skip(24);var u=e.nextUint32();return 0===s?new lA(r,u,{rate:o,volume:h,matrix:a},n.raw):new dA(r,u,{rate:o,volume:h,matrix:a},n.raw)}var _A=function(t){function e(e,i,s,n,r,o,h){void 0===h&&(h={});var a,u,c,l=this;return l=t.call(this,"tkhd",e,function(t){var e,i,s,n;return{trackEnabled:null===(e=null==t?void 0:t.trackEnabled)||void 0===e||e,trackInMovie:null===(i=null==t?void 0:t.trackInMovie)||void 0===i||i,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(h))||this,l.creationTime=i.creation,l.modificationTime=i.modification,l.trackId=s,l.duration=i.duration,l.volume=n,l.width=r,l.height=o,l.layer=null!==(a=h.layer)&&void 0!==a?a:0,l.alternateGroup=null!==(u=h.alternateGroup)&&void 0!==u?u:0,l.matrix=null!==(c=h.matrix)&&void 0!==c?c:Yy,l}return jp(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"creationTime",{get:function(){return this.rR},set:function(t){if(!oo(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.rR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"modificationTime",{get:function(){return this.oR},set:function(t){if(!oo(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.oR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"trackId",{get:function(){return this._R},set:function(t){if(0===t)throw new v("trackId cannot be 0.");if(!oo(t,32))throw new v("trackId cannot exceed 32 bits.");this._R=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"duration",{get:function(){return this.aR},set:function(t){if(!oo(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.aR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"volume",{get:function(){return this.AR},set:function(t){if(!oo(Mo(t,8),16))throw new v("Provided volume does not fit in 16 bits (fixed 8.8).");this.AR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"width",{get:function(){return this.SR},set:function(t){if(!oo(Mo(t,16),32))throw new v("Provided width does not fit in 32 bits (fixed 16.16).");this.SR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"height",{get:function(){return this.ER},set:function(t){if(!oo(Mo(t,16),32))throw new v("Provided height does not fit in 32 bits (fixed 16.16).");this.ER=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"layer",{get:function(){return this.kR},set:function(t){if(!oo(t,16))throw new v("Provided layer does not fit in 16 bits.");this.kR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"alternateGroup",{get:function(){return this.PR},set:function(t){if(!oo(t,16))throw new v("Provided alternateGroup does not fit in 16 bits.");this.PR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"matrix",{get:function(){return this.bR},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new v("(u, v, w) does not match the required (0, 0, 1)");this.bR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},e.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeTkhdContent(e),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.layer,16),e.writer.writeUInt(this.alternateGroup,16),e.writer.writeUInt(Mo(this.volume,8),16),e.writer.writeUInt(0,16),Zy(this.matrix,e),e.writer.writeUInt(Mo(this.width,16),32),e.writer.writeUInt(Mo(this.height,16),32)},e}(V),pa=function(t){function e(e,i,s,n,r,o){return t.call(this,0,e,i,s,n,r,o)||this}return jp(e,t),e.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},e}(_A),vA=function(t){function e(e,i,s,n,r,o){return t.call(this,1,e,i,s,n,r,o)||this}return jp(e,t),e.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(_A);function gA(t){var e,i,s,n,r=t.data,o=mt(r.nextUint32()),h=o.version,a=o.flags,u=a.isSet(8),c=a.isSet(4),l=a.isSet(2),d=a.isSet(1);0===h?(e=r.nextUint32(),i=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(e=r.nextUint64(),i=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),_=r.nextInt16(),v=tn(r.nextInt16(),8);r.skip(2);var g=Ty(r),m=tn(r.nextUint32(),16),w=tn(r.nextUint32(),16);return 0===h?new pa({creation:e,modification:i,duration:n},s,v,m,w,{layer:f,matrix:g,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l}):new vA({creation:e,modification:i,duration:n},s,v,m,w,{layer:f,matrix:g,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l})}var mA=function(t){function e(){return t.call(this,"trak")||this}return jp(e,t),e}(As);function wA(t){for(var e=new mA,i=0,s=mr(t.data);i<s.length;i++){var n=s[i];Ea(n,"tkhd")?e.boxes.push(gA(n)):Ea(n,"mdia")?e.boxes.push(zy(n)):Ea(n,"edts")?e.boxes.push(By(n)):e.boxes.push(vs(n))}return e}var va=function(t){function e(){return t.call(this,"moov")||this}return jp(e,t),e}(As);function pA(t){for(var e=new va,i=0,s=mr(t.data);i<s.length;i++){var n=s[i];Ea(n,"mvhd")?e.boxes.push(fA(n)):Ea(n,"trak")?e.boxes.push(wA(n)):Ea(n,"mvex")?e.boxes.push(uA(n)):Ea(n,"pssh")?e.boxes.push(fa(n)):e.boxes.push(vs(n))}return e}var yA=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",i,s)||this;return n.baseMediaDecodeTime=e,n}return jp(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"baseMediaDecodeTime",{get:function(){return this.IR},set:function(t){if(!oo(t,this.bitSize))throw new v("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.IR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},e}(V),AA=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return jp(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.baseMediaDecodeTime,32)},e}(yA),Ps=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return jp(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),e.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},e}(yA);function bA(t){var e=t.data,i=mt(e.nextUint32()),s=i.version,n=i.flags;return 0===s?new AA(e.nextUint32(),n.raw):new Ps(e.nextUint64(),n.raw)}var TA=function(t){function e(e,i){void 0===i&&(i=0);var s=t.call(this,"tfhd",i,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(e))||this;return s.trackId=e.trackId,s.baseDataOffset=e.baseDataOffset,s.sampleDescriptionIndex=e.sampleDescriptionIndex,s.defaultSampleDuration=e.defaultSampleDuration,s.defaultSampleSize=e.defaultSampleSize,s.defaultSampleFlags=e.defaultSampleFlags,s}return jp(e,t),g.defineProperty(e.prototype,"trackId",{get:function(){return this._R},set:function(t){if(!oo(t,32))throw new v("Provided track id does not fit in 32 bits.");this._R=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"baseDataOffset",{get:function(){return this.RR},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new v("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new v("The base data offset present flag is not set.");if(t&&!oo(t,64))throw new v("Provided baseDataOffset does not fit in 32 bits.");this.RR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"sampleDescriptionIndex",{get:function(){return this.xR},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new v("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new v("The sample description index flag is not set.");if(t&&!oo(t,32))throw new v("Provided sampleDescriptionIndex does not fit in 32 bits.");this.xR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleDuration",{get:function(){return this.gR},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new v("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new v("The default sample duration present flag is not set.");if(t&&!oo(t,32))throw new v("Provided defaultSampleDuration does not fit in 32 bits.");this.gR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.mR},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new v("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new v("The default sample size present flag is not set.");if(t&&!oo(t,32))throw new v("Provided defaultSampleSize does not fit in 32 bits.");this.mR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleFlags",{get:function(){return this.wR},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new v("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new v("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!oo(t.samplePaddingValue,3))throw new v("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!oo(t.sampleDegradationPriority,16))throw new v("Provided sample degradation priority does not fit in 16 bits.");this.wR=t},enumerable:!1,configurable:!0}),e.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(e+=8),this.flags.sampleDescriptionIndexPresent&&(e+=4),this.flags.defaultSampleDurationPresent&&(e+=4),this.flags.defaultSampleSizePresent&&(e+=4),this.flags.defaultSampleFlagsPresent&&(e+=4),e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(e.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),e.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&e.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&e.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&e.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&$y(this.defaultSampleFlags,e)},e}(V);function SA(t){var e=t.data,i=e.nextUint8(),s=new sh(xi.from(e.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var o=Boolean(s.readBit()),h=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),l=e.nextUint32(),d=c?e.nextUint64():void 0,f=u?e.nextUint32():void 0,_=a?e.nextUint32():void 0,v=h?e.nextUint32():void 0,g=o?by(new sh(xi.from(e.nextUint8Array(4)))):void 0;return new TA({trackId:l,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:d,sampleDescriptionIndex:f,defaultSampleDuration:_,defaultSampleSize:v,defaultSampleFlags:g},i)}var EA=function(t){function e(e,i,s){var n=t.call(this,"trun",e,function(t){var e,i,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(e=t.sampleDurationPresent)&&void 0!==e&&e,sampleSizePresent:null!==(i=t.sampleSizePresent)&&void 0!==i&&i,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(i))||this;return n.dataOffset=i.dataOffset,n.samples=s,n.firstSampleFlags=i.firstSampleFlags,n}return jp(e,t),g.defineProperty(e.prototype,"dataOffset",{get:function(){return this.DR},set:function(t){if(t&&!oo(t,32))throw new v("Provided data offset does not fit in 32 bits.");this.DR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"firstSampleFlags",{get:function(){return this.NR},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!oo(t.samplePaddingValue,3))throw new v("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!oo(t.sampleDegradationPriority,16))throw new v("Provided sample degradation priority does not fit in 16 bits.");this.NR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"samples",{get:function(){return this.OR},set:function(t){var e,i;if(!oo(t.length,32))throw new v("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new v("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new v("The sample duration present flag is not set.");if(r.duration&&!oo(r.duration,32))throw new v("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new v("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new v("The sample size present flag is not set.");if(r.size&&!oo(r.size,32))throw new v("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new v("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new v("The sample flags present flag is not set.");if((null===(e=r.flags)||void 0===e?void 0:e.samplePaddingValue)&&!oo(r.flags.samplePaddingValue,3))throw new v("Provided sample padding value does not fit in 3 bits.");if((null===(i=r.flags)||void 0===i?void 0:i.sampleDegradationPriority)&&!oo(r.flags.sampleDegradationPriority,16))throw new v("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new v("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new v("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!oo(r.compositionTimeOffset,32))throw new v("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.OR=t},enumerable:!1,configurable:!0}),e.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(e+=4),this.flags.firstSampleFlagsPresent&&(e+=4),this.flags.sampleDurationPresent&&(e+=4*this.samples.length),this.flags.sampleSizePresent&&(e+=4*this.samples.length),this.flags.sampleFlagsPresent&&(e+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(e+=4*this.samples.length),e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&e.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&$y(this.firstSampleFlags,e);for(var i=0,s=this.samples;i<s.length;i++){var n=s[i];this.flags.sampleDurationPresent&&e.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&e.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&$y(n.flags,e),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?e.writer.writeUInt(n.compositionTimeOffset,32):e.writer.writeInt(n.compositionTimeOffset,32))}},e}(V);function kA(t){var e=t.data,i=e.nextUint8(),s=new sh(xi.from(e.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),o=Boolean(s.readBit()),h=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=e.nextUint32(),l={sampleDurationPresent:h,sampleSizePresent:o,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(l.dataOffset=e.nextInt32()),a&&(l.firstSampleFlags=by(new sh(xi.from(e.nextUint8Array(4)))));for(var d=[],f=0;f<c;f++){var _={};h&&(_.duration=e.nextUint32()),o&&(_.size=e.nextUint32()),r&&(_.flags=by(new sh(xi.from(e.nextUint8Array(4))))),n&&(_.compositionTimeOffset=0===i?e.nextUint32():e.nextInt32()),d.push(_)}return new EA(i,l,d)}var Ae=function(t){function e(){return t.call(this,"traf")||this}return jp(e,t),e}(As);function PA(t){for(var e=new Ae,i=0,s=mr(t.data);i<s.length;i++){var n=s[i];Ea(n,"tfhd")?e.boxes.push(SA(n)):Ea(n,"tfdt")?e.boxes.push(bA(n)):Ea(n,"trun")?e.boxes.push(kA(n)):e.boxes.push(vs(n))}return e}var Aa=function(t){function e(){return t.call(this,"moof")||this}return jp(e,t),e}(As);function IA(t){for(var e=new Aa,i=0,s=mr(t.data);i<s.length;i++){var n=s[i];Ea(n,"traf")?e.boxes.push(PA(n)):Ea(n,"pssh")?e.boxes.push(fa(n)):e.boxes.push(vs(n))}return e}!function(t){function e(e){var i=t.call(this,"mfhd",0,0)||this;return i.sequenceNumber=e,i}jp(e,t),g.defineProperty(e.prototype,"sequenceNumber",{get:function(){return this.MR},set:function(t){if(!oo(t,32))throw new v("Provided sequence number does not fit in 32 bits.");this.MR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.sequenceNumber,32)}}(V);var RA=function(t){function e(e){var i=t.call(this,"frma")||this;return i.codingName=e,i}return jp(e,t),g.defineProperty(e.prototype,"codingName",{get:function(){return this.LR},set:function(t){if(4!==t.length)throw new v("Provided coding name was not 4 characters long.");this.LR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},e}(es),CA=(function(t){function e(e,i){var s=t.call(this,"pasp")||this;return s.hSpacing=e,s.vSpacing=i,s}jp(e,t),g.defineProperty(e.prototype,"hSpacing",{get:function(){return this.FR},set:function(t){if(!oo(t,32))throw new v("Provided hSpacing does not fit in 32 bits.");this.FR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"vSpacing",{get:function(){return this.UR},set:function(t){if(!oo(t,32))throw new v("Provided vSpacing does not fit in 32 bits.");this.UR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 8},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(es),function(t){function e(e,i,s){var n=t.call(this,e)||this;return n.sample=i,n.sinf=s,n}jp(e,t),e.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},e.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(As),function(t){function e(e,i,s){var n=t.call(this,"sinf")||this;return n.schm=i,n.schi=s,n.frma=new RA(e),n}jp(e,t),e.prototype.getBoxContentSize=function(){var t,e,i,s;return this.frma.getSize()+(null!==(e=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==e?e:0)+(null!==(s=null===(i=this.schi)||void 0===i?void 0:i.getSize())&&void 0!==s?s:0)},e.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(es),function(t){function e(e,i,s){var n=t.call(this,"saio",e,void 0===s?0:1)||this;return n.entries=i,n.explicitAuxInfoType=s,n}return jp(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"entries",{get:function(){return this.GI},set:function(t){var e=this;if(!oo(t.length,32))throw new v("Number of entries provided does not fit in 32 bits.");if(t.some((function(t){return!oo(t,e.bitSize)})))throw new v("Not all provided entries fit in ".concat(this.bitSize," bits."));this.GI=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"explicitAuxInfoType",{get:function(){return this.HR},set:function(t){if(void 0===t)this.flags=0;else{if(!oo(t.auxInfoType,32))throw new v("Provided auxInfoType does not fit in 32 bits.");if(!oo(t.auxInfoTypeParameter,32))throw new v("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.HR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),void 0!==this.explicitAuxInfoType&&(e.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),e.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),e.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(e)},e}(V)),xA=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}jp(e,t),e.prototype.serializeSaioContent=function(t){for(var e=0,i=this.entries;e<i.length;e++){var s=i[e];t.writer.writeUInt(s,32)}}}(CA),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}jp(e,t),e.prototype.serializeSaioContent=function(t){for(var e=0,i=this.entries;e<i.length;e++){var s=i[e];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}(CA),function(t){function e(e,i,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=e,n.sampleInfoSizes=i,n.explicitAuxInfoType=s,n}jp(e,t),g.defineProperty(e.prototype,"defaultSampleInfoSize",{get:function(){return this.WR},set:function(t){if(!oo(t,8))throw new v("Provided defaultSampleInfoSize does not fit in a single byte.");this.WR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"sampleInfoSizes",{get:function(){return this.qR},set:function(t){if(!oo(t.length,32))throw new v("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some((function(t){return!oo(t,8)})))throw new v("Not all provided sampleInfoSizes fit in a byte.");this.qR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"explicitAuxInfoType",{get:function(){return this.HR},set:function(t){if(void 0===t)this.flags=0;else{if(!oo(t.auxInfoType,32))throw new v("Provided auxInfoType does not fit in 32 bits.");if(!oo(t.auxInfoTypeParameter,32))throw new v("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.HR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},e.prototype.serializeBoxContent=function(e){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new v("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,e),void 0!==this.explicitAuxInfoType&&(e.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),e.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),e.writer.writeByte(this.defaultSampleInfoSize),e.writer.writeUInt(this.sampleInfoSizes.length,32);for(var i=0,s=this.sampleInfoSizes;i<s.length;i++){var n=s[i];e.writer.writeByte(n)}}}(V),function(t){function e(e){var i=t.call(this,"sdtp",0,0)||this;return i.samples=e,i}jp(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e);for(var i=0,s=this.samples;i<s.length;i++){Jy(s[i],e)}}}(V),function(t){function e(e){return t.call(this,"stsd",e,0)||this}jp(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.boxes.length,32)}}(ge),function(t){function e(e,i,s){var n=t.call(this,"sgpd",e,0)||this;return n.entries=s,n.groupingType=i,n}return jp(e,t),g.defineProperty(e.prototype,"groupingType",{get:function(){return this.zR},set:function(t){if(4!==t.length)throw new v("The provided groupingType does not equal 4 characters.");this.zR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.groupingType),this.serializeVersionBoxContent(e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];this.serializeEntryBoxContent(e,n)}},e.prototype.serializeEntryBoxContent=function(t,e){e.serializeBoxContent(t)},e}(V)),DA=(function(t){function e(e,i){return t.call(this,0,e,i)||this}jp(e,t),e.prototype.serializeVersionBoxContent=function(t){}}(xA),function(t){function e(e,i,s){var n=t.call(this,1,e,s)||this;return n.defaultLength=i,n}jp(e,t),g.defineProperty(e.prototype,"defaultLength",{get:function(){return this.XR},set:function(t){if(!oo(t,32))throw new v("The provided defaultLength does not fit in 32 bits.");this.XR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},e.prototype.serializeEntryBoxContent=function(t,e){0===this.defaultLength&&t.writer.writeUInt(e.getBoxContentSize(),32),e.serializeBoxContent(t)}}(xA),function(t){function e(e,i,s,n){void 0===n&&(n=0);var r=this;if(e<2)throw new v("This constructor is only meant for versions 2 and up.");return(r=t.call(this,e,i,s)||this).defaultSampleDescriptionIndex=n,r}jp(e,t),g.defineProperty(e.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.vR},set:function(t){if(!oo(t,32))throw new v("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.vR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(xA),function(t){function e(e){void 0===e&&(e=[]);var i=t.call(this,"stsz",0,0)||this;return i.sampleSizes=e,i}jp(e,t),g.defineProperty(e.prototype,"sampleSizes",{get:function(){return this.GR},set:function(t){if(!oo(t.length,32))throw new v("Number of allowed samples cannot fit in 32 bits.");if(t.some((function(t){return!oo(t,32)})))throw new v("Not all sampleSizes can be represented in 32 bits.");this.GR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeUInt(this.sampleSizes.length,32);for(var i=0,s=this.sampleSizes;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}}(V),function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=e,s.samples=i,s}jp(e,t),g.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.mR},set:function(t){if(!oo(t,32))throw new v("Provided defaultSampleSize does not fit in 32 bits.");this.mR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"samples",{get:function(){return this.OR},set:function(t){if(!oo(t,32))throw new v("Number of allowed samples cannot fit in 32 bits.");this.OR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.defaultSampleSize,32),e.writer.writeUInt(this.samples,32)}}(V),function(t){function e(){return t.call(this,"stbl")||this}jp(e,t)}(As),function(t){function e(e){var i=t.call(this,"stsc",0,0)||this;return i.entries=e,i}jp(e,t),g.defineProperty(e.prototype,"entries",{get:function(){return this.GI},set:function(t){if(!oo(t.length,32))throw new v("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!oo(t.firstChunk,32)||!oo(t.sampleDescriptionIndex,32)||!oo(t.samplesPerChunk,32)})))throw new v("Not all entries can be represented in 96 bits.");this.GI=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.firstChunk,32),e.writer.writeUInt(n.samplesPerChunk,32),e.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(V),function(t){function e(){return t.call(this,"schi")||this}jp(e,t)}(As),function(t){function e(e,i,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=e,n.schemeVersion=i,n.schemeUri=s,n}jp(e,t),g.defineProperty(e.prototype,"schemeType",{get:function(){return this.QR},set:function(t){if(4!==t.length)throw new v("The provided schemeType does not have a length of 4.");this.QR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"schemeVersion",{get:function(){return this.KR},set:function(t){if(!oo(t,32))throw new v("The provided schemeVersion does not fit in 23 bits.");this.KR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"schemeUri",{get:function(){return this.jR},set:function(t){if(t&&4!==t.length)throw new v("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this.jR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.schemeType),e.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(e.writer.writeString(this.schemeUri),e.writer.writeByte(0))}}(V),function(t){function e(e,i,s,n,r,o,h){void 0===h&&(h=0);var a=t.call(this,"sidx",e,h)||this;return a.referenceId=i,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=o,a}return jp(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"referenceId",{get:function(){return this.YR},set:function(t){if(!oo(t,32))throw new v("Provided referenceId does not fit in 32 bits.");this.YR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"timescale",{get:function(){return this.hR},set:function(t){if(!oo(t,32))throw new v("Provided timescale does not fit in 32 bits.");this.hR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"earliestPresentationTime",{get:function(){return this.ZR},set:function(t){if(!oo(t,this.bitSize))throw new v("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.ZR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"firstOffset",{get:function(){return this.JR},set:function(t){if(!oo(t,this.bitSize))throw new v("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.JR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"references",{get:function(){return this.$R},set:function(t){if(!oo(t.length,16))throw new v("The number of provided reference items does not fit in 16 bits.");for(var e=0,i=t;e<i.length;e++){var s=i[e];if(!oo(s.referencedSize,31))throw new v("Provided referenced size does not fit in 31 bits.");if(!oo(s.subsegmentDuration,32))throw new v("Provided subsegment duration does not fit in 31 bits.");if(!oo(s.sapType,3))throw new v("Provided SAP type does not fit in 3 bits.");if(!oo(s.sapDeltaTime,28))throw new v("Provided SAP delta time does not fit in 28 bits.")}this.$R=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.referenceId,32),e.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(e),e.writer.writeUInt(0,16),e.writer.writeUInt(this.references.length,16);for(var i=0,s=this.references;i<s.length;i++){var n=s[i];e.writer.writeBit(n.referenceType),e.writer.writeUInt(n.referencedSize,31),e.writer.writeUInt(n.subsegmentDuration,32),e.writer.writeBool(n.startsWithSap),e.writer.writeUInt(n.sapType,3),e.writer.writeUInt(n.sapDeltaTime,28)}},e}(V)),NA=function(t){function e(e,i,s,n,r,o){return void 0===o&&(o=0),t.call(this,0,e,i,s,n,r,o)||this}return jp(e,t),e.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},e}(DA),BA=function(t){function e(e,i,s,n,r,o){return void 0===o&&(o=0),t.call(this,1,e,i,s,n,r,o)||this}return jp(e,t),e.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},e}(DA);var OA=function(t){function e(e,i,s){return t.call(this,"styp",e,i,s)||this}return jp(e,t),e}(Oy);function MA(t){for(var e=t.data,i=e.nextChars(4),s=e.nextUint32(),n=[];e.cursor.offset<e.data.byteLength;)n.push(e.nextChars(4));return new OA(i,s,n)}(function(t){function e(e){void 0===e&&(e=0);var i=t.call(this,"smhd",0,0)||this;return i.balance=e,i}jp(e,t),g.defineProperty(e.prototype,"balance",{get:function(){return this.tC},set:function(t){if(t<-1||t>1)throw new v("Provided balance does not fit in the allowed range [-1, 1].");if(!oo(Mo(t,8),16))throw new v("Provided balance does not fit in 16 bits (fixed 8.8).");this.tC=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(Mo(this.balance,8),16),e.writer.writeUInt(0,16)}})(V),function(t){function e(e){var i=t.call(this,"stss",0,0)||this;return i.entries=e,i}jp(e,t),g.defineProperty(e.prototype,"entries",{get:function(){return this.GI},set:function(t){if(!oo(t.length,32))throw new v("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!oo(t,32)})))throw new v("Not all entries can be represented in 32 bits.");this.GI=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}}(V),function(t){function e(e){var i=t.call(this,"stts",0,0)||this;return i.entries=e,i}jp(e,t),g.defineProperty(e.prototype,"entries",{get:function(){return this.GI},set:function(t){if(!oo(t.length,32))throw new v("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!oo(t.sampleCount,32)||!oo(t.sampleDelta,32)})))throw new v("Not all entries can be represented in 64 bits.");this.GI=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.sampleCount,32),e.writer.writeUInt(n.sampleDelta,32)}}}(V),function(t){function e(e){var i=t.call(this,"trep",0,0)||this;return i.trackId=e,i}jp(e,t),g.defineProperty(e.prototype,"trackId",{get:function(){return this._R},set:function(t){if(!oo(t,32))throw new v("The provided trackId does not fit in 32 bits.");this._R=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32)}}(ge),function(t){function e(){return t.call(this,"udta")||this}jp(e,t)}(As);var LA={red:0,green:0,blue:0},FA=(function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=LA);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=e,s.opColor=i,s}jp(e,t),g.defineProperty(e.prototype,"opColor",{get:function(){return this.eC},set:function(t){if(!oo(t.red,16)||!oo(t.green,16)||!oo(t.blue,16))throw new v("Not all colors could be represented in 16 bits.");this.eC=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.graphicsMode,16),e.writer.writeUInt(this.opColor.red,16),e.writer.writeUInt(this.opColor.green,16),e.writer.writeUInt(this.opColor.blue,16)}}(V),function(t){function e(e,i,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var o,h,a,u,c,l=this;return(l=t.call(this,e,i)||this).width=s.width,l.height=s.height,l.horizontalResolution=null!==(o=s.horizontal)&&void 0!==o?o:72,l.verticalResolution=null!==(h=s.vertical)&&void 0!==h?h:72,l.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",l.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,l.depth=null!==(c=n.depth)&&void 0!==c?c:24,l.clap=n.clap,l.pasp=n.pasp,l.extra=r,l}return jp(e,t),g.defineProperty(e.prototype,"width",{get:function(){return this.SR},set:function(t){if(!oo(t,16))throw new v("Provided width does not fit in 16 bits.");this.SR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"height",{get:function(){return this.ER},set:function(t){if(!oo(t,16))throw new v("Provided height does not fit in 16 bits.");this.ER=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"horizontalResolution",{get:function(){return this.iC},set:function(t){if(!oo(Mo(t,16),32))throw new v("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.iC=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"verticalResolution",{get:function(){return this.sC},set:function(t){if(!oo(Mo(t,16),32))throw new v("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.sC=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"compressorName",{get:function(){return this.nC},set:function(t){if(t.length>31)throw new v("The provided compressorName should at most be 31 characters long.");this.nC=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"frameCount",{get:function(){return this.rC},set:function(t){if(!oo(t,16))throw new v("Provided frameCount does not fit in 16 bits.");this.rC=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"depth",{get:function(){return this.oC},set:function(t){if(!oo(t,16))throw new v("Provided depth does not fit in 16 bits.");this.oC=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e,i,s,n,r,o;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(i=null===(e=this.clap)||void 0===e?void 0:e.getSize())&&void 0!==i?i:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(o=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==o?o:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.width,16),e.writer.writeUInt(this.height,16),e.writer.writeUInt(Mo(this.horizontalResolution,16),32),e.writer.writeUInt(Mo(this.verticalResolution,16),32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.frameCount,16),e.writer.writeByte(this.compressorName.length),e.writer.writeString(this.compressorName);for(var i=0;i<31-this.compressorName.length;i++)e.writer.writeByte(0);e.writer.writeUInt(this.depth,16),e.writer.writeInt(-1,16),this.clap&&e.concat(this.clap.serialize()),this.pasp&&e.concat(this.pasp.serialize()),this.extra&&ko(e.writer,this.extra)},e}(na)),UA=(function(t){function e(e){var i=t.call(this,"esds",0,0)||this;return i.esDescriptor=e,i}jp(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof S?this.esDescriptor.length:this.esDescriptor.getSize())},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor instanceof S?e.concat(xi.from(this.esDescriptor)):this.esDescriptor.serialize(e)}}(V),function(t){function e(e,i,s){var n=t.call(this,"mp4a",e,s)||this;return n.esd=i,n}jp(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.esd.serialize())}}(Iy),function(t){function e(e,i,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",e,i,n)||this;return r.esDescriptor=s,r}jp(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor.serialize(e)}}(FA),function(t){function e(e,i){var s=t.call(this,"mp4s",e)||this;return s.esDescriptor=i,s}jp(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor.serialize(e)}}(na),function(t){function e(e){var i=t.call(this,"avcC")||this;return i.decoderConfig=e,i}jp(e,t),e.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},e.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(es),function(){function t(t,e,i,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=i,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=e,this.spsSets=s,this.ppsSets=n}g.defineProperty(t.prototype,"version",{get:function(){return this.hC},set:function(t){if(!oo(t,8))throw new v("Provided version does not fit in 8 bits.");this.hC=t},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"profileIndication",{get:function(){return this.aC},set:function(t){if(!oo(t,8))throw new v("Provided profileIndication does not fit in 8 bits.");this.aC=t},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.uC},set:function(t){if(!oo(t,8))throw new v("Provided profileCompatibility does not fit in 8 bits.");this.uC=t},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"levelIndication",{get:function(){return this.cC},set:function(t){if(!oo(t,8))throw new v("Provided levelIndication does not fit in 8 bits.");this.cC=t},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"spsSets",{get:function(){return this.lC},set:function(t){if(!oo(t.length,5))throw new v("Provided number of spsSets exceeds the max (32)");this.lC=t},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"ppsSets",{get:function(){return this.dC},set:function(t){if(!oo(t.length,8))throw new v("Provided number of ppsSets exceeds the max (256)");this.dC=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce((function(t,e){return t+e.length}),0)+2*this.ppsSets.length+this.ppsSets.reduce((function(t,e){return t+e.length}),0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var e=0,i=this.spsSets;e<i.length;e++){var s=i[e];t.writer.writeUInt(s.length,16),t.concat(xi.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var o=r[n];t.writer.writeUInt(o.length,16),t.concat(xi.from(o))}}}(),function(t){function e(e,i,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var o=t.call(this,"avc1",e,i,n)||this;return o.configurationBox=s,o.bitrateBox=r,o}jp(e,t),e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(i=null===(e=this.bitrateBox)||void 0===e?void 0:e.getSize())&&void 0!==i?i:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.configurationBox.serialize()),this.bitrateBox&&e.concat(this.bitrateBox.serialize())}}(FA),function(t){function e(e,i,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=e,n.max=i,n.avg=s,n}jp(e,t),g.defineProperty(e.prototype,"bufferSizeDb",{get:function(){return this.OI},set:function(t){if(!oo(t,32))throw new v("Provided bufferSizeDb does not fit in 32 bits.");this.OI=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"max",{get:function(){return this.fC},set:function(t){if(!oo(t,32))throw new v("Provided max does not fit in 32 bits.");this.fC=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"avg",{get:function(){return this._C},set:function(t){if(!oo(t,32))throw new v("Provided avg does not fit in 32 bits.");this._C=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 12},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(es),function(t){function e(e,i){var s,n,r,o,h=this;if(h=t.call(this,"tenc",e,0)||this,i.perSampleIvSize>0&&(null!==(n=null===(s=i.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new v("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return h.kId=i.kId,h.isProtected=null!==(r=i.isProtected)&&void 0!==r?r:1,i.perSampleIvSize>0?h.perSampleIvSize=i.perSampleIvSize:h.constantIv=null!==(o=i.constantIv)&&void 0!==o?o:new S(0),h}return jp(e,t),g.defineProperty(e.prototype,"isProtected",{get:function(){return this.vC},set:function(t){if(!oo(t,8))throw new v("Provided isProtected does not fit in 1 byte.");this.vC=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"perSampleIvSize",{get:function(){return this.gC},set:function(t){if(![8,16].includes(t))throw new v("Provided perSampleIvSize does not match any allowed value [8, 16].");this.gC=t,this.mC=new S(0)},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"kId",{get:function(){return this.wC},set:function(t){if(16!==t.length)throw new v("Provided kId length is not 16.");this.wC=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"constantIv",{get:function(){return this.mC},set:function(t){if(![8,16].includes(t.length))throw new v("Provided constant IV length does not match any allowed value [8, 16].");this.mC=t,this.gC=0},enumerable:!1,configurable:!0}),e.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeOwnContent(e)},e.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),ko(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),ko(t.writer,this.constantIv))},e}(V)),HA=(function(t){function e(e){return t.call(this,0,e)||this}jp(e,t)}(UA),function(t){function e(e){var i=t.call(this,1,e)||this;return i.cryptByteBlocks=e.cryptByteBlock,i.skipByteBlocks=e.skipByteBlock,i}return jp(e,t),g.defineProperty(e.prototype,"cryptByteBlocks",{get:function(){return this.pC},set:function(t){if(!oo(t,4))throw new v("Provided cryptByteBlocks does not fit in 4 bits.");this.pC=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"skipByteBlocks",{get:function(){return this.yC},set:function(t){if(!oo(t,4))throw new v("Provided skipByteBlocks does not fit in 4 bits.");this.yC=t},enumerable:!1,configurable:!0}),e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},e}(UA));!function(t){function e(e){var i=t.call(this)||this;return i.tencBox=new HA(e),i}jp(e,t),e.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},e.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(tA);function WA(t){return void 0!==t.iv}function Ta(t){return void 0!==t.subsamples}(function(t){function e(e){var i=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return i.samples=e,i}jp(e,t),g.defineProperty(e.prototype,"samples",{get:function(){return this.OR},set:function(t){var e;if(!oo(t.length,32))throw new v("The number of samples provided does not fit in 32 bits.");for(var i=0,s=t;i<s.length;i++){var n=s[i];if(WA(n)&&![8,16].includes(n.iv.length))throw new v("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===e&&(e=Ta(n)),!0===e&&!Ta(n)||!1===e&&Ta(n))throw new v("Mix of samples with and without subsamples detected.");if(Ta(n)){if(!oo(n.subsamples.length,16))throw new v("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,o=n.subsamples;r<o.length;r++){var h=o[r];if(!oo(h.clearData,16))throw new v("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!oo(h.protectedData,23))throw new v("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=e&&e,this.OR=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){for(var e=0,i=0,s=this.samples;i<s.length;i++){var n=s[i];WA(n)&&(e+=n.iv.length),Ta(n)&&(e+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.samples.length,32);for(var i=0,s=this.samples;i<s.length;i++){var n=s[i];if(WA(n)&&ko(e.writer,n.iv),Ta(n)){e.writer.writeUInt(n.subsamples.length,16);for(var r=0,o=n.subsamples;r<o.length;r++){var h=o[r];e.writer.writeUInt(h.clearData,16),e.writer.writeUInt(h.protectedData,32)}}}},e.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}})(V),function(t){function e(e,i,s,n,r){var o=t.call(this,"emsg",0,0)||this;return o.schemeIdUri=e,o.value=i,o.data=r,o.id=s,o.timescale=n.timescale,o.presentationTimeDelta=n.presentationTimeDelta,o.eventDuration=n.eventDuration,o}jp(e,t),g.defineProperty(e.prototype,"timescale",{get:function(){return this.hR},set:function(t){if(!oo(t,32))throw new v("The provided timescale does not fit in 32 bits.");this.hR=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"presentationTimeDelta",{get:function(){return this.AC},set:function(t){if(!oo(t,32))throw new v("The provided presentationTimeDelta does not fit in 32 bits.");this.AC=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"eventDuration",{get:function(){return this.bC},set:function(t){if(!oo(t,32))throw new v("The provided eventDuration does not fit in 32 bits.");this.bC=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"id",{get:function(){return this.XA},set:function(t){if(!oo(t,32))throw new v("The provided id does not fit in 32 bits.");this.XA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.schemeIdUri),e.writer.writeByte(0),e.writer.writeString(this.value),e.writer.writeByte(0),e.writer.writeUInt(this.timescale,32),e.writer.writeUInt(this.presentationTimeDelta,32),e.writer.writeUInt(this.eventDuration,32),e.writer.writeUInt(this.id,32),e.concat(xi.from(this.data))}}(V);var qA=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new ey,e=0,i=this.boxes;e<i.length;e++){var s=i[e];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function VA(t,e){return function(i){var s=function(t,e){for(var i=t.data,s=t.cursor;s.offset<i.byteLength;){var n=yy(i,s);if(!n.complete)return;if(Ea(n.box,e))return n.box}}(new wy(vy(i),new my),t);if(!s)throw new v("".concat(t," box not found"));return e(s)}}var zA=VA("moov",pA),XA=VA("sidx",(function(t){var e,i,s=t.data,n=mt(s.nextUint32()),r=n.version,o=n.flags,h=s.nextUint32(),a=s.nextUint32();0===r?(e=s.nextUint32(),i=s.nextUint32()):(e=s.nextUint64(),i=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],l=0;l<u;l++){var d=new sh(xi.from(s.nextUint8Array(12))),f=d.readBit(),_=d.readUInt(31),v=d.readUInt(32),g=Boolean(d.readBit()),m=d.readUInt(3),w=d.readUInt(28);c.push({referenceType:f,referencedSize:_,subsegmentDuration:v,startsWithSap:g,sapType:m,sapDeltaTime:w})}return 0===r?new NA(h,a,e,i,c,o.raw):new BA(h,a,e,i,c,o.raw)})),GA=VA("moof",IA),QA=VA("pssh",fa);function KA(t){return function(t){for(var e=new qA,i=0,s=mr(t);i<s.length;i++){var n=s[i];Ea(n,"ftyp")?e.boxes.push(Ly(n)):Ea(n,"styp")?e.boxes.push(MA(n)):Ea(n,"moov")?e.boxes.push(pA(n)):Ea(n,"moof")?e.boxes.push(IA(n)):Ea(n,"mdat")?e.boxes.push(Gy(n)):e.boxes.push(vs(n))}return e}(new wy(vy(t),new my))}var jA=class extends d{get TC(){return this.Mu}get SC(){return this.EC.expiration}get kC(){return this.IC}get RC(){return this.EC.sessionId}Xs(){if(this.xC)return this.Mu;const t=[];return t.push(Promise.resolve(this.EC.close())),t.push(ye(1e3)),this.DC.wl(Promise.race(t).catch(YA)),this.xC=!0,this.Mu}NC(t,e,i){if(Bp.Ok){const t=QA(Js(e));if(1===t.version){e=new iA(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.EC.generateRequest(t,e)).catch(YA)}Rn(t){return Promise.resolve(this.EC.load(t)).catch(YA)}WA(){return Promise.resolve(this.EC.remove()).catch(YA)}Kn(t){return Promise.resolve(this.EC.update(t)).catch(YA)}BC(){this.IC.cI(),this.EC.keyStatuses.forEach(((t,e)=>{this.OC(e,t)})),this.To(new x(this))}OC(t,e){if("string"==typeof t){const i=t;t=e,e=i}const i=Js(t);if(this.gg===Sh&&16===i.byteLength){let t=wa(i),e=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,e,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.gg===Sh&&"status-pending"===e&&(e="usable"),this.IC.uI(i,e)}constructor(t,e){super(),this.EC=t,this.gg=e,this.xC=!1,this.MC=()=>{this.BC()},this.LC=t=>{this.To(new ke(this,t.messageType,Gp(this.gg,t.message)))},this.FC=()=>{this.xC=!0,this.IC.ww>0&&(this.IC.cI(),this.To(new x(this))),this.EC.removeEventListener("keystatuseschange",this.MC),this.EC.removeEventListener("message",this.LC)},this.EC.addEventListener("keystatuseschange",this.MC),this.EC.addEventListener("message",this.LC),this.IC=new De;const i=[];this.EC.closed&&i.push(Promise.resolve(this.EC.closed)),this.DC=new Os,i.push(this.DC.fI),this.Mu=Promise.race(i).then(this.FC,this.FC),this.BC()}};function YA(t){let e;if(t.message){const i=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);i&&(e=0|k(i[1],16))}throw new ia(t.message,void 0,e,t)}var ZA=class{async UC(t){return new jA(this.HC.createSession(t),this.vg)}WC(t){return Promise.resolve(this.HC.setServerCertificate(t))}wn(t){return Promise.resolve(t.setMediaKeys(this.HC))}qC(t){return Promise.resolve(t.setMediaKeys(null))}ir(){return Promise.resolve()}constructor(t,e,i){this.HC=t,this.vg=e,this.Vp=i}},JA=class{get vg(){return this.VC.keySystem}async zC(){const t=await this.VC.createMediaKeys();return new ZA(t,this.gg,this.XC)}GC(){return this.XC}constructor(t,e,i){this.VC=t,this.gg=e,this.XC=i}},$A=Bp.Vk&&Bp.Xk>=42||Bp.fP&&Bp.vP>=38||Bp.rP||Bp.uP||Bp.AP&&Bp.TP>=29;function tb(t,e){return Ei(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[no({contentType:t},e?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[no({contentType:t},e?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function eb(){return void 0!==Uu&&"function"==typeof Uu.requestMediaKeySystemAccess}function ib(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var sb=class{QC(){return this.KC(Mp)}jC(){return this.KC(Fp)}YC(){return this.KC(Op)}ZC(){return this.KC(Jo)}KC(t){const e=t.KP,i=this.JC.get(e);if(i)return i;const s=this.$C(t,'video/mp4; codecs="avc1.42000a"');return this.JC.set(e,s),s}async $C(t,e){try{return await this.ix.tx(t.XP,[tb(e,!0)]),!0}catch(i){try{return await this.ix.tx(t.XP,[tb(e,!1)]),!0}catch(t){return!1}}}sx(){return this.nx||(this.nx=this.ox()),this.nx}async ox(){return"https:"!==Dp.protocol&&(!!$A&&!await this.jC())}constructor(t){this.JC=rs(),this.nx=void 0,this.ix=t}};function sa(t,e,i,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,hx:s.hx};let o=!1;if(s.audioCapabilities){const h=s.audioCapabilities.filter((t=>Boolean(t.contentType)));h.length&&(r.audioCapabilities=h.filter((s=>nb(t,e,i,s))),o=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const h=s.videoCapabilities.filter((t=>Boolean(t.contentType)));h.length&&(r.videoCapabilities=h.filter((s=>nb(t,e,i,s))),o=!0,r.videoCapabilities.length&&(n=!0))}return o||(n=t(i,"video/mp4")),n?r:void 0}function nb(t,e,i,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!Yi(e,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(i,_o(s.contentType))}function rb(t){if(t.videoCapabilities)for(const e of t.videoCapabilities)if(e.contentType)return e.contentType;if(t.audioCapabilities)for(const e of t.audioCapabilities)if(e.contentType)return e.contentType}function ob(t){const e=[];for(const i of t)i.encryptionScheme&&e.push({contentType:i.contentType,robustness:i.robustness});return t.concat(e)}function hb(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(ab))||!(!t.videoCapabilities||!t.videoCapabilities.some(ab))}function ab(t){return!t.robustness}function ub(t,e){const i=[];for(const s of t)s.robustness?i.push(s):i.push(no({},s,{robustness:e}));return i}var cb=class{async tx(t,e){e=e.filter((t=>!t.hx));for(const t of e)t.audioCapabilities&&(t.audioCapabilities=ob(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=ob(t.videoCapabilities));if(t===N_&&e.some(hb)){const i=e.map((t=>function(t,e){return no({},t,{videoCapabilities:t.videoCapabilities?ub(t.videoCapabilities,e):void 0,audioCapabilities:t.audioCapabilities?ub(t.audioCapabilities,e):void 0})}(t,"SW_SECURE_CRYPTO")));try{const e=await Uu.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new JA(e,t,s)}catch(t){}}const i=await Uu.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new JA(i,t,s)}static ux(){return eb()}},lb=class extends d{get RC(){return this.lx&&this.lx.sessionId||""}get SC(){return NaN}get TC(){return this._x.fI}get kC(){return this.vx}async NC(t,e,i){this.gx(),this.mx=new Os,this.UC(Js(e),i),await this.mx.fI}UC(t,e){if(!t)throw new p("Expected initData to be defined but was "+t+".");const i=e&&e.playready&&e.playready.wx;let s;return s=e?this.yx.createSession(this.Ax,t,i):this.yx.createSession(this.Ax,t),s.addEventListener("mskeyclose",this.FC),s.addEventListener("mskeymessage",this.bx),s.addEventListener("mskeyerror",this.As),s.addEventListener("mskeyadded",this.Tx),this.lx=s,this.Sx("status-pending"),s}async Rn(t){return this.gx(),!0}async Kn(t){if(this.Ex=new Os,this.gx(),!this.lx)return Promise.resolve();const e=Js(t);if(0===e.byteLength)throw new p("Cannot call update with an empty response.");this.lx.update(e),await this.Ex.fI}Xs(){return!this.xC&&this.lx&&(this.xC=!0,this.lx.close()),this._x.fI}async WA(){this.gx()}gx(){if(this.xC)throw new p("Already closing or closed.")}Sx(t){this.vx.cI(),this.vx.uI(Zo,t),this.To(new x(this))}constructor(t,e){super(),this.yx=t,this.Ax=e,this.xC=!1,this.Ex=void 0,this.mx=void 0,this.lx=void 0,this.FC=()=>{this.xC=!0,this._x.lI(void 0),this.lx&&(this.lx.removeEventListener("mskeyclose",this.FC),this.lx.removeEventListener("mskeymessage",this.bx),this.lx.removeEventListener("mskeyerror",this.As),this.lx.removeEventListener("mskeyadded",this.Tx))},this.bx=t=>{this.mx&&(this.mx.lI(void 0),this.mx=void 0),this.To(new ke(this,"license-request",hh(t.message).buffer,t.destinationURL||void 0))},this.As=()=>{const t=this.lx&&this.lx.error;if(!t)return;const e=new ia("Unknown CDM error",t.code,t.systemCode);if(this.mx)this.mx.dI(e),this.mx=void 0;else if(this.Ex)this.Ex.dI(e),this.Ex=void 0;else switch(e._I){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.Sx("output-not-allowed");break;default:this.Sx("internal-error")}},this.Tx=()=>{this.mx&&(this.Sx("usable"),this.mx.lI(void 0),this.mx=void 0),this.Ex&&(this.Sx("usable"),this.Ex.lI(void 0),this.Ex=void 0)},this._x=new Os,this.vx=new De}},db=class{async UC(t){return new lb(this.yx,this.Ax)}WC(t){return Promise.resolve(!1)}wn(t){const e=()=>{t.msSetMediaKeys(this.yx),t.removeEventListener("loadedmetadata",e)};return t.readyState>=1?t.msSetMediaKeys(this.yx):t.addEventListener("loadedmetadata",e),Promise.resolve()}qC(t){return Promise.resolve()}ir(){return Promise.resolve()}constructor(t,e,i){this.yx=t,this.vg=e,this.Vp=i;const s=rb(i)||"video/mp4";this.Ax=_o(s)}},fb=class{get vg(){return this.gg}GC(){return this.kx}zC(){const t=new qh.MSMediaKeys(this.gg);return Promise.resolve(new db(t,this.gg,this.kx))}constructor(t,e){this.gg=t,this.kx=e}},_b=class{tx(t,e){try{return Promise.resolve(function(t,e){if(!vb())throw new p("Unsupported key system "+t);for(let i of e){let e=sa(gb,Wp,t,i);if(e)return new fb(t,e)}throw new p("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static ux(){return vb()}};function vb(){return void 0!==qh.MSMediaKeys&&"function"==typeof qh.MSMediaKeys.isTypeSupported}function gb(t,e){return qh.MSMediaKeys.isTypeSupported(t,e)}var mb=class extends d{get RC(){return this.Px?this.Px.sessionId:""}get SC(){return NaN}get TC(){return this._x.fI}get kC(){return this.vx}NC(t,e,i){const s=i&&i.fairplay&&i.fairplay.Ix;if(!s)throw new p("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,e,i){const s=Li(t),n=2*s.length,r=2*e.length;let o=new ArrayBuffer(4+n+4+r+4+i.byteLength),h=new DataView(o),a=new ds;return at(h,a,n,!0),Fv(h,a,s,!0),at(h,a,r,!0),Fv(h,a,e,!0),at(h,a,i.byteLength,!0),Pv(h,a,i),new S(o)}(Js(e),s,this.Rx);return this.Px=this.Cx.createSession(this.Ax,n),this.Px.addEventListener("webkitkeymessage",this.bx,!1),this.Px.addEventListener("webkitkeyadded",this.Tx,!1),this.Px.addEventListener("webkitkeyerror",this.As,!1),this.Sx("status-pending"),this.xx.lI(this.Px),this.xx=new Os,Promise.resolve()}Rn(t){return Promise.resolve(!0)}async Kn(t){const e=Js(t);if(0===e.byteLength)throw new p("Cannot call update with an empty response.");this.Dx=new Os;(this.Px||await this.xx.fI).update(e),await this.Dx.fI}Xs(){var t;const e=this.Px;return e&&(e.removeEventListener("webkitkeymessage",this.bx,!1),e.removeEventListener("webkitkeyadded",this.Tx,!1),e.removeEventListener("webkitkeyerror",this.As,!1),e.close()),this.xx.vl(),null==(t=this.Dx)||t.vl(),this._x.lI(void 0),this._x.fI}WA(){return Promise.resolve(void 0)}Sx(t){this.vx.cI(),this.vx.uI(Zo,t),this.To(new x(this))}constructor(t,e,i){super(),this.Cx=t,this.Ax=e,this.Rx=i,this._x=new Os,this.Dx=void 0,this.vx=new De,this.Px=void 0,this.xx=new Os,this.As=()=>{const t=this.Px&&this.Px.error;if(!t)return;const e=new ia("Unknown CDM error",t.code,t.systemCode);this.Dx?(this.Dx.dI(e),this.Dx=void 0):e._I===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.Sx("output-not-allowed"):this.Sx("internal-error"),this.To(new Vp)},this.bx=t=>{this.To(new ke(this,"license-request",hh(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.Tx=()=>{this.Dx&&(this.Dx.lI(void 0),this.Dx=void 0),this.Sx("usable")}}};var wb=class{getInternalMediaKeys(){return this.Cx}async UC(t){if(!this.Rx)throw new io(Ot.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new mb(this.Cx,this.Ax,this.Rx)}WC(t){return this.Rx=Js(t),Promise.resolve(!0)}wn(t){return t.webkitSetMediaKeys(this.Cx),Promise.resolve()}qC(t){return t.webkitSetMediaKeys(null),Promise.resolve()}ir(){return Promise.resolve()}constructor(t,e,i){this.Cx=t,this.vg=e,this.Vp=i,this.Rx=void 0;const s=rb(i)||"video/mp4";this.Ax=_o(s)}},pb=class{get vg(){return this.gg}GC(){return this.kx}zC(){const t=new qh.WebKitMediaKeys(this.gg);return Promise.resolve(new wb(t,this.gg,this.kx))}constructor(t,e){this.gg=t,this.kx=e}},yb=class{tx(t,e){try{return Promise.resolve(function(t,e){if(t!==L_)throw new p(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!Ab())throw new p("Unsupported key system "+t);for(let i of e){let e=sa(bb,qp,t,i);if(e)return new pb(t,e)}throw new p("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static ux(){return Ab()}};function Ab(){return void 0!==qh.WebKitMediaKeys&&"function"==typeof qh.WebKitMediaKeys.isTypeSupported}function bb(t,e){return qh.WebKitMediaKeys.isTypeSupported(t,e)}var Tb=class{async tx(t,e){for(let i of this.Nx)try{return await i.tx(t,e)}catch(t){}throw new p("Unsupported key system configuration for "+t)}constructor(t){this.Nx=t}},xo=class{Bx(t,e){return new Promise((i=>{const s=new Zs;s.wl(this.Ox.fl),e&&s.wl(e);const n=()=>{s.hl()};this.Mx.push((()=>{const e=Sb(t,s.fl);return i(e),e.then(n,n)})),this.Lx||(this.Lx=this.Fx())}))}vl(){return this.Ux(!0)}bn(){return this.Hx=void 0,this.Ux(!1)}Ux(t){const e=this.Lx;return this.Ox.vl(),t&&(this.Ox=new Zs),Promise.resolve(e)}constructor(t){this.Mx=[],this.Lx=void 0,this.Ox=new Zs,this.Fx=()=>{if(0===this.Mx.length)return this.Hx?Sb(this.Hx,this.Ox.fl).then(this.Wx,this.Wx):this.Wx();return this.Mx.shift()().then(this.Fx)},this.Wx=()=>{if(0!==this.Mx.length)return this.Fx();this.Lx=void 0},this.Hx=t}};function Sb(t,e){return new Promise((i=>i(t(e))))}var Eb,kb=new xo,Pb=class extends d{qx(){this.Dx&&(this.Sx("usable"),this.Dx.lI(void 0),this.Dx=void 0)}Vx(t){const e=new ia("Unknown CDM error",t.errorCode,t.systemCode);this.Dx?(this.Dx.dI(e),this.Dx=void 0):this.mx?(this.mx.dI(e),this.mx=void 0):e._I===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.Sx("output-restricted"):1===e.vI?this.Sx("expired"):this.Sx("internal-error")}zx(t){0!==t.message.byteLength&&(this.mx&&(this.mx.lI(void 0),this.mx=void 0),this.To(new ke(this,"license-request",Gp(this.gg,hh(t.message).buffer),t.defaultURL||void 0)))}Xx(t){this.Gx||(this.Gx=t,this.Qx.lI(t))}get kC(){return this.Kx}get RC(){return this.jx}set RC(t){this.jx=t}get TC(){return this._x.fI}get SC(){return NaN}async Xs(){this.throwIfClosed(),this.Dx&&(this.Dx.dI(void 0),this.Dx=void 0),this.EI=!0,this._x.lI(void 0)}async NC(t,e){this.throwIfClosed(),this.mx=new Os,this.Yx=Js(e);(this.Gx||await this.Qx.fI).webkitGenerateKeyRequest(this.gg,this.Yx),await this.mx.fI}async Rn(t){return this.throwIfClosed(),!1}async WA(){this.throwIfClosed()}async Kn(t){if(this.throwIfClosed(),this.Dx=new Os,Bp.eP||Bp.Zk)return kb.Bx((async()=>{await this.doUpdate(t)}));await this.doUpdate(t)}async doUpdate(t){if(void 0===this.Dx)return;(this.Gx||await this.Qx.fI).webkitAddKey(this.gg,Js(t),this.Yx,this.RC),await this.Dx.fI,Bp.Zk&&await ye(500)}throwIfClosed(){if(this.EI)throw new p("Already closing or closed.")}Sx(t){this.Kx.cI(),this.Kx.uI(Zo,t),this.To(new x(this))}async Zx(){const t=this.Gx||await this.Qx.fI;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.gg,this.jx)}catch(t){}finally{await ye(500)}}constructor(t){super(),this.gg=t,this.mx=void 0,this.Dx=void 0,this.EI=!1,this.Yx=void 0,this.Gx=void 0,this._x=new Os,this.jx="",this.Qx=new Os,this.Kx=new De}},Ib=class{wn(t){return this.Gx=t,this.Gx.addEventListener("webkitkeyadded",this.Tx),this.Gx.addEventListener("webkitkeyerror",this.Jx),this.Gx.addEventListener("webkitkeymessage",this.$x),this.tD.forEach(((e,i)=>e.Xx(t))),this.eD.forEach((e=>e.Xx(t))),Promise.resolve()}qC(t){return t.removeEventListener("webkitkeyadded",this.Tx),t.removeEventListener("webkitkeyerror",this.Jx),t.removeEventListener("webkitkeymessage",this.$x),this.Gx=void 0,Promise.resolve()}async ir(){let t=this.tD.entries(),e=t.next();for(;!e.done;)await e.value[1].Zx(),e=t.next();this.tD.clear()}async UC(t,e,i){const s=new Pb(this.vg);return this.Gx&&s.Xx(this.Gx),this.eD.push(s),s}WC(t){return Promise.resolve(!1)}iD(t){if(!t)return;let e=this.tD.get(t);return e||(e=this.eD.shift(),e?(e.RC=t,this.tD.set(t,e),e):void 0)}constructor(t,e){this.vg=t,this.Vp=e,this.Gx=void 0,this.tD=rs(),this.eD=[],this.Tx=t=>{const e=this.iD(t.sessionId);e&&e.qx()},this.Jx=t=>{const e=this.iD(t.sessionId);e&&e.Vx(t)},this.$x=t=>{const e=this.iD(t.sessionId);e&&e.zx(t)}}},Rb=class{zC(){return Promise.resolve(new Ib(this.vg,this.sD))}GC(){return this.sD}constructor(t,e){this.vg=t,this.sD=e}};function z(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Cb(t){const e=t.className;return"string"==typeof e?e:e&&"string"==typeof e.baseVal?e.baseVal:""}function xb(t,e){const i=t.className;"string"==typeof i?t.className=e:i&&"string"==typeof i.baseVal&&(i.baseVal=e)}function Db(t,e){return void 0!==t.classList?t.classList.contains(e):void 0!==t.className&&-1!==(" "+Cb(t)+" ").indexOf(" "+e+" ")}function Nb(t,e){if(void 0!==t.classList)t.classList.add(e);else if(void 0!==t.className){const i=Cb(t);-1===(" "+i+" ").indexOf(" "+e+" ")&&xb(t,(i+" "+e).trim())}}function Bb(t,e){if(void 0!==t.classList)t.classList.remove(e);else if(void 0!==t.className){let i=" "+Cb(t)+" ";const s=" "+e+" ";for(;-1!==i.indexOf(s);)i=i.replace(s," ");xb(t,i.trim())}}function Ob(t,e,i){void 0===i&&(i=!Db(t,e)),i?Nb(t,e):Bb(t,e)}function Mb(t,e){Bp.Zk&&Bp.$k<3?function(t,e){let i=e;switch(e){case"flex":i="-webkit-flex";break;case"inline-flex":i="-webkit-inline-flex"}t.display=i}(t,e):function(t,e){if(t.display=e,t.display!==e){let i=e;switch(e){case"flex":i="-ms-flexbox";break;case"inline-flex":i="-ms-inline-flexbox"}t.display=i}}(t,e)}function Lb(t,e){const i=e.style;if(i)for(const e of g.keys(t)){const s=t[e];void 0!==s&&(i[e]=s)}}function Ca(t){const e=t.style;e.position="absolute",e.left="0",e.right="0",e.top="0",e.bottom="0",e.width="100%",e.height="100%"}function Fb(t){t.removeAttribute("title")}function Ub(t){t.addEventListener("mouseover",(t=>{Fb(t.target)}))}function he(t){return"video"===function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}(t)}function Hb(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load())}function Wb(){return void 0!==h?h.createElement("video"):void 0}function qb(){return Eb||(Eb=Wb()),Eb}var Vb,$,zb=class{tx(t,e){try{return Promise.resolve(function(t,e){if(!zb.ux())throw new p("Unsupported key system "+t);for(let i of e){let e=sa(Xb,Wp,t,i);if(e)return new Rb(t,e)}throw new p("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static ux(){return ib()}};function Xb(t,e){const i=qb();return!(!i||!i.canPlayType||""===i.canPlayType(e,t))}function Gb(){return Vb||(Vb=function(){const t=[];yb.ux()&&t.push(new yb);cb.ux()&&t.push(new cb);_b.ux()&&t.push(new _b);zb.ux()&&t.push(new zb);return new Tb(t)}()),Vb}!function(t){t[t.nD=0]="nD",t[t.rD=1]="rD"}($||($={}));var ra=class extends Ci{constructor(t){super(En.Ev),this.currentTime=t}},Tt=class extends Ci{constructor(t){super(En.Pv),this.currentTime=t}},Qb=[En.Rf,En.Pv,r.Ah,r.Ch],nn=class extends d{oD(t){!this.hD&&t>=Yv.Qn&&(this.hD=!0,this.To(new Wi(this.aD.zl,t)))}uD(t){!this.cD&&t>=Yv.bA&&(this.cD=!0,this.To(new ys(this.aD.zl,t)))}lD(t){this.dD||(t>=Yv.TA&&this.fD<Yv.TA&&!this.aD.md||this._D&&t>=Yv.TA)&&this.To(new Tt(this.aD.zl))}vD(t){!this.gD(t)||this.aD.jl||this.aD.lt||this.To(new ra(this.aD.zl))}mD(t){this.fD<=Yv.bA&&t>=Yv.TA&&this.To(new ji(this.aD.zl,t))}maybeDispatchCanPlayThroughEvent(t){t===Yv.SA&&this.To(new fs(this.aD.zl,t))}gD(t){const e=!this.aD.md&&t<=Yv.bA,i=!this.wD&&this.fD<=Yv.bA;return e&&!i}get _D(){return!this.aD.md&&this.wD}ir(){this.fD=Yv.AA,this.wD=!0,this.cD=!1,this.hD=!1}bn(){this.Lo(),this.dD&&this.aD.pn(En.Pv,this.pD),this.aD.pn(r.Ah,this.yD),this.aD.pn(r.Ch,this.bD),this.aD.pn(En.Rf,this.TD)}constructor(t,e=!1){super(),this.aD=t,this.dD=e,this.fD=Yv.AA,this.wD=!0,this.cD=!1,this.hD=!1,this.TD=t=>{const e=this.aD.Pd;e!==this.fD&&this.To(new Io(t.currentTime,e)),e===Yv.AA&&(this.cD=!1,this.hD=!1),this.oD(e),this.uD(e),this.mD(e),this.maybeDispatchCanPlayThroughEvent(e),this.lD(e),this.vD(e),this.fD=e},this.yD=()=>{this.vD(this.fD),this.lD(this.fD),this.wD=this.aD.md},this.bD=()=>{this.wD=this.aD.md},this.pD=t=>{this.To(new Tt(t.currentTime))},this.aD.kn(En.Rf,this.TD),this.aD.kn(r.Ah,this.yD),this.aD.kn(r.Ch,this.bD),this.dD&&this.aD.kn(En.Pv,this.pD)}},Ji=class extends d{get zl(){return this.aD.zl}get jl(){return this.aD.jl}get lt(){return this.aD.lt}get md(){return this.aD.md}get Pd(){return this.aD.Pd}hl(){this.Lo(),this.aD.pn(Qb,this.Rs)}constructor(t){super(),this.aD=t,this.aD.kn(Qb,this.Rs)}},Kb=class{SD(){return this.ED}kD(t){this.ED=t}get PD(){return this.qE}get RD(){return!1}get CD(){const t=this.xD.certificate;if(t)return Ts(t)?ea(t):Js(t)}DD(){return this.xD.licenseAcquisitionURL||this.SD()}get ND(){return!1}BD(t){return Promise.resolve()}OD(t,e){return Promise.resolve(void 0)}get ME(){return Boolean(this.xD.useCredentials)}async MD(t,e,i,s){const n=this.LD(t,e,i,s);if(""===n.YS)throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.PD.GS(n);return await t.FD(e)}catch(t){return eo(t),void await this.UD(t,n.YS,s)}}LD(t,e,i,s){const n=this.HD().lE(),r=this.ME,o={YS:this.WD(),DE:e,CE:n,RE:t,ME:r,xE:Fr.POST,JS:0,fl:s,l_:ro.mE,BE:i};return new Yt(o)}qD(t,e){return Promise.resolve(t)}VD(t,e,i,s){return Promise.resolve(t)}HD(){return new ou(this.xD.headers||{})}async UD(t,e,i){throw new _r(Ot.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}WD(t,e){let i=e;const s=this.xD.queryParameters;if(!i){const t=this.DD();if(!t)return"";i=t}if(s||t){const e=f.Oh(i);t&&zr(e,t),s&&zr(e,s),i=e.href}return i}zD(t,e){return jb(t)}XD(t){return new S(t)}async GD(t,e,i){const s=await this.zD(t,i),n=await this.MD(s,this.QD,e,i);return this.XD(n)}bn(){}constructor(t,e,i,s,n){this.ED=void 0,this.vg=t,this.KD=e,this.jD=i,this.qE=s,this.QD=n,this.xD=this.YD(e)}};function jb(t){return Promise.resolve(hh(t).buffer)}var yn,ru=class extends Kb{YD(t){return t.widevine||{}}async ZD(t,e){return this.CD?this.CD:this.JD(new S(t),e)}JD(t,e){return super.GD(t,Ru.AE,e)}constructor(t,e,i,s){super(Mp,t,e,i,s)}};!function(t){t.Zv="Widevine",t.$D="PlayreadyV2",t.tN="PlayreadyV3",t.Yv="PlayreadyV2",t.Jv="Fairplay"}(yn||(yn={}));var Yb={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function Zb(t,e){var i,s,n,r;const o=Yb[e],h=t.accountName;return{CustomerName:t.customerName,AccountName:h,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(i=f.eN)?void 0:i.Zs,OSVersion:null==(s=f.eN)?void 0:s.iN,DRMProvider:o.DRMProvider,DRMVersion:o.DRMVersion,DRMType:o.DRMType,DeviceVendor:null==(n=f.eN)?void 0:n.sN,DeviceModel:null==(r=f.eN)?void 0:r.nN}}}function Jb(t,e){if(!t.accountName)throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, accountName is not set.");if(!t.customerName)throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, customerName is not set.");if(!t.portalId)throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, portalId is not set.");throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration.")}function $b(t,e,i){let s;if(sg(t))s={AuthToken:t.authToken,Payload:e};else{if(!ng(t))throw Jb(t,i);s={LatensRegistration:Zb(t,i),Payload:e}}return Ni(JSON.stringify(s))}async function tT(t,e,i){const s=t.KS;if(!s)throw new _r(Ot.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,e);const n=s;let r,o;try{r=await n.rN(i),o=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){o=""}throw new _r(Ot.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.GS.YS,n.ZS,n.oN,o)}var eT=class extends ru{static hN(){return f.Zs.aN?"required":"optional"}UD(t,e,i){return tT(t,e,i)}BD(t){return this.uN?sf(this.uN.fI,t):(this.uN=new Os,Promise.resolve())}async zD(t,e){const i=this.KD;if(!i)throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return $b(i,xe(t),yn.Zv)}XD(t){let e;if(!t.license)throw new _r(Ot.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return e=ea(t.license),e}cN(t){return Promise.resolve(new S(t))}async ZD(t,e){this.lN();const i=await this.zD(t,e),s=await this.MD(i,Ct.aE,Ru.bE,e);return await this.cN(s)}async JD(t,e){const i=await super.JD(t,e);return this.lN(),i}lN(){this.uN||(this.uN=new Os),this.uN.lI()}bn(){this.uN&&this.uN.vl(),super.bn()}constructor(t,e,i){super(t,e,i,Ct.uE),this.uN=void 0}},iT=class extends ru{get dN(){if(rg(this.KD))return this.KD.token}async zD(t,e){const i=await jb(t),s=this.jD,n=sr(new S(i)),r=this.dN;if(!r)throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:s})}constructor(t,e,i){super(t,e,i,Ct.aE),this.kD("https://widevine-proxy.drm.technology/proxy")}};function sT(t,e){let i=e||{};return t.ticket&&t.sessionId&&(i=no({},i,{SessionId:t.sessionId,Ticket:t.ticket})),no({},i,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}var nT=class extends ru{WD(t,e){let i=t;return eg(this.KD)&&(i=sT(this.KD,i)),super.WD(i,e)}constructor(t,e,i){super(t,e,i,Ct.aE),this.kD("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}},rT="Conax-Custom-Data";function Zi(t,e,i){const s=t&&tg(t)&&t;if(s&&!i.has(rT)){const t=b_(s)?s.token:void 0,n=b_(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:e+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});i.set(rT,r)}return i}var oT=class extends ru{HD(){const t=super.HD();return Zi(this.KD,"Widevine",t)}constructor(t,e,i){super(t,e,i,Ct.aE),this.kD("https://connect.conax.com:8094/license")}};function hT(t){const e=ki(new S(t));return ea(JSON.parse(e).license)}function ns(t){return"string"==typeof t.token?t.token:Ni(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function xs(t,e,i){let s;return s=i.token?"x-dt-auth-token":"dt-custom-data",t.set(s,e),t}var aT=class extends ru{get dN(){return ns(this.KD)}XD(t){return hT(t)}HD(){return xs(super.HD(),this.dN,this.KD)}constructor(t,e,i){super(t,e,i,Ct.aE),this.kD("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}},uT=class extends ru{HD(){const t=super.HD(),e=this.KD.token;return t.set("Authorization","Bearer "+e),t}constructor(t,e,i){super(t,e,i,Ct.aE)}};async function bs(t,e,i,s){if(!og(t))throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new ou;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const o=t.streamId;let h;h=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:e,licenseType:h,streamId:o},u={YS:t.ticketAcquisitionURL,DE:Ct.uE,CE:n,xE:Fr.POST,RE:JSON.stringify(a),fl:s},c=await i.GS(u);return await c.rN()}var cT=class extends ru{HD(){const t=super.HD();return t.set("Content-Type","application/json"),t}async zD(t,e){const i=$_(t.buffer),s=this.KD,n=await bs(s,"widevine_modular",this.PD,e);this.kD(n.licenseServerUrl);const r=Oi(JSON.stringify({payload:i,ticket:n.ticket}));return super.zD(r,e)}XD(t){return ea(t.license)}constructor(t,e,i){super(t,e,i,Ct.uE)}},lT=class extends ru{HD(){if(!hg(this.KD))throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.HD();return t.set("X-AxDRM-Message",this.KD.token),t}constructor(t,e,i){super(t,e,i,Ct.aE)}};function dT(t){const e=new S(2*t.length);for(let i=0;i<t.length;i+=1)e[2*i]=t.charCodeAt(i),e[2*i+1]=0;return e}var Ya=class extends Kb{YD(t){return t.playready||{}}HD(){const t=new ou(this.fN);return t.fE(super.HD()),t}_N(t){return t.length>=1&&t[0].FS.length>0}OD(t){const e=this.KD.playready.customData;if(e){const t=dT(e),i=dT('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+xe(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{wx:i}})}return super.OD(t)}async zD(t,e){const i=await jb(t);return this.vN(i)}async vN(t){var e,i;let s=null;const n=Ri(new DataView(t),new ds,!0);let r;try{r=f.NS(n)}catch(t){return s}const o=null==(e=r.CS("PlayReadyKeyMessage")[0])?void 0:e.CS("LicenseAcquisition")[0];var h;const a=null!=(h=null==o?void 0:o.CS("Challenge"))?h:[];this._N(a)&&(s=Pu(a[0].gN));const u=new ou;var c;const l=null!=(c=null==o||null==(i=o.CS("HttpHeaders")[0])?void 0:i.CS("HttpHeader"))?c:[];for(const t of l){const e=t.CS("name")[0].gN,i=t.CS("value")[0].gN;u.append(e,i)}return this.fN=u,s}ZD(t,e){return Promise.resolve(t)}JD(t,e){return super.GD(t,Ru.TE,e)}constructor(t,e,i){super(Op,t,e,i,Ct.aE),this.fN=void 0}},fT=class t{static mN(t){return"3"===t.version?yn.tN:yn.$D}wN(){const t={};if(this.hC===yn.tN){const e={LatensRegistration:Zb(this.pN,yn.tN)};t["X-TITANIUM-DRM-CDATA"]=Ni(JSON.stringify(e))}return t}get yN(){return this.hC}get hx(){return this.hC===yn.$D}constructor(e){this.pN=e,this.hC=t.mN(e)}};var _T=class extends Ya{OD(t){const e=this.KD;if(!this.KD)throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(ng(e)){const t={};return t.playready={wx:vT(e,this.AN.yN)},Promise.resolve(t)}return Promise.reject(Jb(e,yn.Yv))}HD(){const t=new ou(this.AN.wN());return t.fE(super.HD()),t}async UD(t,e,i){const s=t.KS;if(!s)throw new _r(Ot.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e);let n,r;try{const t=await s.bN(i),e=ki(new S(t)),h=f.NS(e);if(h){const t=function(t,e){return function(t,e){const i=t.m.slice(),s=[];for(;i.length>0;){const t=i.shift();e(t)?s.push(t):i.push(...t.m)}return s}(t,(t=>t.TN===e))}(h,"CustomData");var o;if(t.length>0)n=JSON.parse(t[0].gN),r=null==(o=n.DrmErr)?void 0:o.desc}}catch(t){}throw new _r(Ot.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e,s.ZS,s.oN,r)}_N(t){if(1!==t.length)throw new _r(Ot.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,e,i){super(t,e,i),this.AN=new fT(this.KD)}};function vT(t,e){const i=Zb(t,e),s=i.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+Ni('<LatensRegistration formatversion="'+s+'"><AccountName>'+i.AccountName+"</AccountName><CustomerName>"+i.CustomerName+"</CustomerName><PortalID>"+i.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+i.DeviceInfo.DeviceType+"</DeviceType><OSType>"+i.DeviceInfo.OSType+"</OSType><OSVersion>"+i.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+i.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+i.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+i.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+i.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+i.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=er(n,!0);return er('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+xe(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}var gT,mT=class extends Ya{get dN(){if(rg(this.KD))return this.KD.token}_N(t){if(1!==t.length)throw new _r(Ot.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}WD(t,e){const i=no({},t||{},{token:this.dN});return super.WD(i,e)}constructor(t,e,i){super(t,e,i),this.kD("https://playready-license.drm.technology/rightsmanager.asmx")}},wT=class extends Ya{WD(t,e){let i=t;return eg(this.KD)&&(i=sT(this.KD,i)),super.WD(i,e)}constructor(t,e,i){super(t,e,i),this.kD("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}},pT=class extends Ya{HD(){const t=super.HD();return Zi(this.KD,"PlayReady",t)}constructor(t,e,i){super(t,e,i),this.kD("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}},yT=class extends Ya{get dN(){return ns(this.KD)}XD(t){const e=function(t){const e=ki(new S(t));return bt(e,"<?xml")?0:1}(t);return 1===e?hT(t):super.XD(new S(t))}HD(){return xs(super.HD(),this.dN,this.KD)}constructor(t,e,i){super(t,e,i),this.kD("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};!function(t){t[t.SN=0]="SN",t[t.rN=1]="rN"}(gT||(gT={}));var Yr,AT=class extends Ya{HD(){const t=super.HD();return this.EN&&t.set("Ticket",this.EN),t.set("Content-Type","text/xml"),t}async zD(t,e){const i=this.KD,s=await bs(i,"playready",this.PD,e);return this.kD(s.licenseServerUrl),this.EN=s.ticket,super.zD(t,e)}constructor(t,e,i){super(t,e,i)}},bT=class extends Ya{HD(){if(!hg(this.KD))throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.HD();return t.set("X-AxDRM-Message",this.KD.token),t}};!function(t){t.uE="application/json",t.kN="application/x-www-form-urlencoded",t.PN="application/octet-stream",t.gA="text/plain;charset=UTF-8"}(Yr||(Yr={}));var Z=class extends Kb{get ND(){return!0}IN(){return this.xD.certificateURL||this.RN}CN(t){this.RN=t}zD(t){return Promise.resolve(this.xN(t,this.DN))}xN(t,e){return"spc="+encodeURIComponent(xe(t))+"&assetId="+encodeURIComponent(e)}get NN(){return Yr.kN}YD(t){return t.fairplay||{}}BN(t){const e=t.indexOf("?");if(e>=0)return Promise.resolve(t.substr(e+1));{const e=t.split("skd://").pop();if(e){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e))return Promise.resolve(e)}const i=t.split("/");return Promise.resolve(i[i.length-1])}}async OD(t){var e;const i=null!=(e=this.ON)?e:Li(new S(t)),s=await this.BN(i);this.DN=s;const n={};return n.fairplay={Ix:s},n}HD(){const t=super.HD();return t.set("Content-Type",this.NN),t}async ZD(t,e){return this.CD?this.CD:await this.MN(e)}JD(t,e){return super.GD(t,Ru.pE,e)}LN(t){const e=this.IN(),i=this.HD(),s={YS:e,DE:Ct.aE,CE:i,xE:Fr.GET,ME:!1,RE:null,JS:0,fl:t,l_:ro.mE,BE:Ru.yE};return new Yt(s)}async MN(t){const e=this.LN(t),i=await this.PD.GS(e),s=await i.bN();return new S(s)}XD(t){let e;if("string"==typeof t){let i=t.trim();"<ckc>"===i.substr(0,5)&&"</ckc>"===i.substr(-6)&&(i=i.slice(5,-6)),e=ea(i)}else e=new S(t);return e}WD(t,e){let i=super.WD(t,e);return bt(i,"skd:")&&(i=i.substr(4)),i}constructor(t,e,i,s,n){super(t.vg,e,i,s,n),this.DN="",this.RN=void 0,this.ON=t.FN}};function TT(t){return!j(t.getTime())}function Yn(){return Date.now()||(new Date).getTime()}function ST(t){return t/1e3}function ET(t){return 1e3*t}var ne=1/6,kT=rt.fromNumber(cs);function Qi(t,e){if(0===e)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(kT))return t.toNumber()/e;const i=t.divide(e),s=t.subtract(i.multiply(e));return i.toNumber()+s.toNumber()/e}var PT=class extends Z{get NN(){return Yr.PN}BN(t){let e=t.split("://",1);return"skd"!==e[0].slice(-3).toLowerCase()?Promise.resolve(""):(e=t.split(";",2),e.length>1?Promise.resolve(e[1]):Promise.resolve(super.BN(t)))}async zD(t){return t}XD(t){return new S(t)}WD(t,e){const i=t||{};return i.p1=Yn(),super.WD(i,e)}constructor(t,e,i,s){super(t,e,i,s,Ct.aE)}},IT=class extends Z{get NN(){return Yr.uE}get dN(){if(!rg(this.KD))throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.KD.token}xN(t,e){const i={token:this.dN,contentId:e,payload:xe(t)};return JSON.stringify(i)}XD(t){return new S(t)}HD(){const t=super.HD();return t.set("x-vudrm-token",this.dN),t}constructor(t,e,i,s){super(t,e,i,s,Ct.aE),this.kD("https://fairplay-license.drm.technology/license"),this.CN("https://fairplay-license.drm.technology/certificate")}},RT="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",CT="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",xT=class extends Z{XD(t){const e=function(t){let e;try{e=JSON.parse(t).ckc}catch(t){throw new _r(Ot.CONTENT_PROTECTION_LICENSE_INVALID,RT)}if(!e)throw new _r(Ot.CONTENT_PROTECTION_LICENSE_ERROR,CT);return e}(ki(new DataView(t)));return super.XD(e)}constructor(t,e,i,s){super(t,e,i,s,Ct.aE)}};var DT=class extends Z{get NN(){return Yr.uE}async zD(t){const e=this.KD;if(!e)throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return $b(e,xe(t),yn.Jv)}XD(t){try{let e;if(Ts(t)){const i=t.trim();e=JSON.parse(i)}else e=t;if(e.license){const t=Pu(e.license);return new S(t)}throw new _r(Ot.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new _r(Ot.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}UD(t,e,i){return tT(t,e,i)}constructor(t,e,i,s){super(t,e,i,s,Ct.uE)}},NT=class extends Z{IN(){const t=super.IN();if(!t)return t;const e=f.Oh(t),i=this.KD;return eg(i)&&zr(e,{accountId:i.accountId,applicationId:i.applicationId||""}),e.href}BN(t){return eg(this.KD)?Promise.resolve(this.KD.contentId):super.BN(t)}async zD(t){return t}XD(t){return new S(t)}get NN(){return Yr.PN}WD(t,e){let i=t;return eg(this.KD)&&(i=function(t,e){return no({},sT(t,e),{KeyId:t.keyId})}(this.KD,i)),super.WD(i,e)}constructor(t,e,i,s){super(t,e,i,s,Ct.aE),this.kD("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.CN("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}},BT=class extends Z{HD(){const t=super.HD();return Zi(this.KD,"FairPlay",t)}async MN(t){const e={YS:this.IN(),DE:Ct.aE,CE:{},xE:Fr.GET,ME:!1,RE:null,JS:0,fl:t,l_:ro.mE,BE:Ru.yE},i=await this.PD.GS(e),s=await i.bN();return new S(s)}async zD(t){return t}BN(t){const e=t.indexOf("?");if(0===t.indexOf("skd://")){let i;return i=e>=0?t.substring(6,e):t.substring(6),Promise.resolve(function(t){return ki(ea(t))}(i))}return Promise.resolve("unknown")}XD(t){try{const e=JSON.parse(t);return new S(Pu(e.CkcMessage))}catch(t){throw new v("CFLRW-66")}}constructor(t,e,i,s){if(super(t,e,i,s,Ct.gA),!tg(e))throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.kD("https://connect.conax.com:8097/license")}},OT=class extends Z{BN(t){return bt(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new _r(Ot.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}xN(t,e){return"spc="+xe(t)+"&assetId="+e}constructor(t,e,i,s){super(t,e,i,s,Ct.gA),this.kD(Gv[Do.Jv])}},MT=class extends Z{get dN(){return ns(this.KD)}xN(t,e){const i="spc="+encodeURIComponent(xe(t))+"&"+encodeURI(e);return"persistent"===this.xD.licenseType?i+"&offline=true":i}HD(){return xs(super.HD(),this.dN,this.KD)}constructor(t,e,i,s){super(t,e,i,s,Ct.gA),this.kD("https://lic.drmtoday.com/license-server-fairplay/")}},LT=class extends Z{BN(t){let e=t;return bt(e,"skd:")&&(e="http:"+e.substring(4)),bt(e,"http:")||bt(e,"https:")?Promise.resolve(f.Oh(e).hostname):Promise.reject(new v("Could not parse ExpressPlay FairPlay content ID."))}async zD(t){return t}XD(t){return new S(t)}get NN(){return Yr.PN}constructor(t,e,i,s){super(t,e,i,s,Ct.aE)}},FT=class extends Z{HD(){const t=super.HD(),e=this.KD.token;return t.set("Authorization","Bearer "+e),t}constructor(t,e,i,s){super(t,e,i,s,Ct.gA)}},UT=class extends Z{async MN(t){const e=this.IN(),i=this.HD(),s={YS:e,DE:Ct.uE,CE:i,xE:Fr.POST,fl:t,l_:ro.mE,BE:Ru.yE},n=await this.PD.GS(s),r=await n.rN();return new S(ea(r.certificate))}get NN(){return Yr.uE}async JD(t,e,i){void 0===i&&(i=Ct.gA);const s=xe(t),n=this.KD,r=await bs(n,"fairplay",this.PD,e),o=Oi(JSON.stringify({spc:s,ticket:r.ticket})),h={YS:this.DD(),DE:Ct.uE,CE:this.HD(),xE:Fr.POST,RE:o,JS:0,fl:e,l_:ro.mE,BE:Ru.pE},a=await this.PD.GS(h);return ea((await a.rN()).licence)}constructor(t,e,i,s){if(super(t,e,i,s,Ct.uE),!og(e))throw new v("Invalid Xstream DRM configuration")}},HT=class extends Z{xN(t,e){return xe(t)}XD(t){if(0===t.length)throw new _r(Ot.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.XD(t)}HD(){const t=super.HD();return t.set("Content-Type","text/plain"),t}constructor(t,e,i,s){super(t,e,i,s,Ct.gA)}},WT=class extends Z{get NN(){return Yr.uE}xN(t,e){return t}XD(t){return new S(t)}HD(){if(!hg(this.KD))throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.HD();return t.set("X-AxDRM-Message",this.KD.token),t}constructor(t,e,i,s){super(t,e,i,s,Ct.aE)}},qT=class extends Z{get NN(){return Yr.gA}xN(t,e){const i={spc:xe(t)};return JSON.stringify(i)}BN(t){const e=f.Oh(t);return this.UN=t,e.searchParams.has("b")?Promise.resolve(e.searchParams.get("b")):Promise.reject(new _r(Ot.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}WD(t,e){let i=this.DD();return!i&&this.UN&&(i=this.UN),i&&(i=i.replace("skd://","https://")),super.WD(t,e||i)}XD(t){try{let e;if(e=Ts(t)?JSON.parse(t.trim()):t,e.ckc)return ea(e.ckc)}catch(t){throw new _r(Ot.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new _r(Ot.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,e,i,s){super(t,e,i,s,Ct.uE),this.UN=void 0}},ft=class{HN(t){return this.WN(t)}qN(t,e){throw new p(e+" must be "+this.VN+". (Received: "+t+")")}constructor(t,e){this.WN=t,this.VN=e}},VT=(new ft((function(t){return!0}),"any"),new ft(xd,"a number")),zT=new ft(Ts,"a string"),XT=new ft(bh,"a boolean");new ft((function(t){return"[object Date]"===Pr.call(t)}),"a date"),new ft(Cd,"undefined"),new ft(or,"an object"),new ft((function(t){return null===t}),"null"),new ft((function(t){return null==t}),"null or undefined");var GT=function(t){return{HN(e){if(!or(e))return!1;for(const i of g.keys(t)){if(!t[i].HN(e[i]))return!1}return!0},qN(e,i){if(!or(e))throw new p(i+" must be an object.");for(const s of g.keys(t)){const n=t[s];if(!n.HN(e[s]))return n.qN(e[s],i+"."+String(s))}throw new p}}}({responseCode:VT,isException:XT,description:zT,title:zT,correlationId:zT});async function QT(t,e,i,s,n){const r=function(t,e,i,s){const n={token:e.token,account:e.accountId,form:"json"},r=decodeURIComponent(function(t,e){const i=f.Oh(t);return zr(i,e),i.toString()}(i,n)),o=new ou({});o.append("Content-Type","application/json");const h=xe(t),a={getFairplayLicense:{releasePid:e.releasePid,spcMessage:h}};return{YS:r,DE:Ct.gA,CE:o,xE:Fr.POST,RE:JSON.stringify(a),fl:s,l_:ro.mE,BE:Ru.pE}}(t,e,i,n);return await async function(t,e){const i=await e.GS(t),s=await i.rN();if(GT.HN(s))throw new _r(Ot.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.YS,s.responseCode);return ea(s.getFairplayLicenseResponse.ckcResponse)}(r,s)}var KT=class extends Z{BN(t){const e=t.replace("FairPlay",this.zN.releasePid);return super.BN(e)}async JD(t,e){return await QT(t,this.zN,this.DD(),this.PD,e)}constructor(t,e,i,s){super(t,e,i,s,Ct.aE),this.zN=e}},jT=class extends Kb{YD(t){return t.clearkey||{}}async MD(t,e,i,s){const n=this.xD;if(this.DD())return super.MD(t,this.QD,i,s);if(n.keys&&n.keys.length){const t={keys:n.keys.map((t=>{let e=t;return e||(e={}),{kty:"oct",kid:e.id,k:e.value}}))};return Wv(JSON.stringify(t)).buffer}throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}ZD(t,e){return Promise.resolve(new S(0))}async JD(t,e){const i=await super.GD(t,Ru.SE,e),s=JSON.parse(Li(i));if(s.keys)for(const t of s.keys)t.k&&(t.k=G_(t.k)),t.kid&&(t.kid=G_(t.kid));return Wv(JSON.stringify(s))}constructor(t,e,i){super(Fp,t,e,i,Ct.aE)}},YT=class extends ru{},ZT={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function JT(t,e,i){const s=sS(e),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(e);const r=await sf(Promise.resolve(n.call(t,s)),i);return qv(r)?Js(r):iS(no({},ZT,r))}async function $T(t,e,i,s,n){const r=t.onCertificateResponse,o=eS(e,i,s);if(!r||"function"!=typeof r)return Promise.resolve(e);return Js(await sf(Promise.resolve(r.call(t,o)),n))}async function tS(t,e,i,s){const n=await async function(t,e,i,s){const n=null==t?void 0:t.onLicenseRequest,r=te(e,i);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const o=await sf(Promise.resolve(n.call(t,r)),s);if(qv(o))return Js(o).buffer;return no({fairplaySkdUrl:void 0},ZT,o)}(t,e,i,s);return n instanceof ArrayBuffer?n:iS(n)}async function Is(t,e,i,s,n,r){const o=te(i,n),h=await async function(t,e,i,s,n){const r=null==t?void 0:t.onLicenseResponse,o=eS(e,i,s);if(!r||"function"!=typeof r)return Promise.resolve(e);0;const h=await sf(Promise.resolve(r.call(t,o)),n);return Js(h)}(t,new S(e),o,s,r);return Js(h)}function te(t,e){return no({},sS(t),{fairplaySkdUrl:e})}function eS(t,e,i){return{url:i.zE,status:i.ZS,statusText:i.oN,headers:i.CE.lE(),body:t,request:e}}function iS(t){return new Yt({YS:t.url,xE:t.method,CE:t.headers,RE:t.body,ME:t.useCredentials})}function sS(t){var e;return{url:t.YS,body:null!=(e=nS(t.RE))?e:null,headers:t.CE.lE(),method:t.xE,useCredentials:t.ME}}function nS(t){if(t)return"string"==typeof t?Wv(t):t instanceof ArrayBuffer?new S(t):K_(t)?fi(t):void 0}var rS=class extends Ya{ZD(t,e){return Promise.resolve(t)}async JD(t,e){const i=await this.vN(hh(t).buffer),s=this.LD(i,Ct.aE,Ru.TE,e),n=await tS(this.XN,s,void 0,e);if(n instanceof ArrayBuffer)return new S(n);if(""===n.YS)throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.PD.GS(n),i=await t.bN(e);return await Is(this.XN,i,s,t,void 0,e)}catch(t){throw eo(t),new _r(Ot.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,e,i,s){super(t,e,i),this.XN=s}},oS=class extends YT{async ZD(t,e){if(this.CD)return this.CD;const i=this.LD(t,Ct.aE,Ru.bE,e),s=await JT(this.XN,i,e);if(s instanceof S)return s;if(""===s.YS)throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this.PD.GS(s),r=await n.bN(e)}catch(t){throw eo(t),new _r(Ot.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const o=te(i,void 0);return await $T(this.XN,new S(r),o,n,e)}async JD(t,e){const i=this.LD(t,Ct.aE,Ru.AE,e),s=await tS(this.XN,i,void 0,e);if(s instanceof ArrayBuffer)return new S(s);if(""===s.YS)throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.PD.GS(s),n=await t.bN(e);return await Is(this.XN,n,i,t,void 0,e)}catch(t){throw eo(t),new _r(Ot.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,e,i,s){super(t,e,i,Ct.aE),this.XN=s}},hS=class extends Z{async ZD(t,e){if(this.CD)return this.CD;const i=this.LN(e),s=await JT(this.XN,i,e);if(K_(s))return s;try{const t=await this.PD.GS(s),n=await t.bN(),r=te(i,void 0);return await $T(this.XN,new S(n),r,t,e)}catch(t){throw eo(t),new _r(Ot.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async JD(t,e){const i=this.LD(t,Ct.aE,Ru.pE,e),s=await tS(this.XN,i,this.GN,e);if(s instanceof ArrayBuffer)return new S(s);if(""===s.YS)throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.PD.GS(s),n=await t.bN(e);return await Is(this.XN,n,i,t,this.GN,e)}catch(t){throw eo(t),new _r(Ot.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}BN(t){var e;return this.GN=t,(null==(e=this.XN)?void 0:e.extractFairplayContentId)?Promise.resolve(this.XN.extractFairplayContentId(t)):super.BN(t)}constructor(t,e,i,s,n){super(t,e,i,s,Ct.aE),this.XN=n}},aS=class{QN(t,e,i,s){switch(t.vg.l_){case Do.Zv:return this.KN(e,i,s);case Do.Yv:return this.jN(e,i,s);case Do.Jv:return this.YN(t,e,i,s);case Do.$v:default:return this.ZN(e,i,s)}}KN(t,e,i){const s=function(t){return t.integration===p_&&Ts(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&Fu.Pg.Tg(s,Ua)){const n=Fu.Pg.Eg(s,Ua,t);return new oS(t,e,i,n)}switch(s){case kh:return new eT(t,e,i);case l_:return new iT(t,e,i);case c_:return new nT(t,e,i);case Wr:return new oT(t,e,i);case f_:return new aT(t,e,i);case Hr:return new uT(t,e,i);case v_:return new cT(t,e,i);case m_:return new lT(t,e,i);default:return new YT(t,e,i,Ct.aE)}}jN(t,e,i){const s=t.integration;if(s&&Fu.Pg.Tg(s,Ks)){const n=Fu.Pg.Eg(s,Ks,t);return new rS(t,e,i,n)}switch(s){case kh:return new _T(t,e,i);case l_:return new mT(t,e,i);case c_:return new wT(t,e,i);case Wr:return new pT(t,e,i);case f_:return new yT(t,e,i);case v_:return new AT(t,e,i);case m_:return new bT(t,e,i);default:return new Ya(t,e,i)}}YN(t,e,i,s){const n=e.integration;if(n&&Fu.Pg.Tg(n,_i)){const r=Fu.Pg.Eg(n,_i,e);return new hS(t,e,i,s,r)}switch(n){case u_:return new PT(t,e,i,s);case l_:return new IT(t,e,i,s);case Hn:return new xT(t,e,i,s);case kh:return new DT(t,e,i,s);case c_:return new NT(t,e,i,s);case Wr:return new BT(t,e,i,s);case d_:return new OT(t,e,i,s);case f_:return new MT(t,e,i,s);case __:return new LT(t,e,i,s);case Hr:return new FT(t,e,i,s);case v_:return new UT(t,e,i,s);case g_:return new HT(t,e,i,s);case m_:return new WT(t,e,i,s);case tr:return new qT(t,e,i,s);case w_:return new KT(t,e,i,s);default:return new Z(t,e,i,s,Ct.gA)}}ZN(t,e,i){return new jT(t,e,i)}JN(t){return t.l_===Do.Yv||t.l_===Do.Zv||t.l_===Do.Jv||t.l_===Do.$v}hx(t,e){var i;if(t.l_!==Do.Yv)return!1;if(it(null==(i=e.playready)?void 0:i.customData))return!0;const s=e.integration;return(!s||!Fu.Pg.Tg(s,_i))&&(s===kh&&new fT(e).hx)}hN(t,e){if(t.l_!==Do.Zv)return;const i=e.integration;return i&&Fu.Pg.Tg(i,_i)?void 0:i===kh?eT.hN():void 0}};var en,uS="default",cS="theoplayer-stored-network-info-v2",lS=25e5,nh=class{$N(t){var e;const i=null==(e=f.tB)?void 0:e.hI(t);if(void 0===i)return;const s=JSON.parse(i);if(void 0!==s&&void 0!==s[this.eB]){if(!this.iB(s))return s[this.eB].availableBandwidth;var n;null==(n=f.tB)||n.sB(t,JSON.stringify({}))}}nB(){const t=this.$N(cS);if(void 0!==t)return t;const e=this.$N("theoplayer-stored-network-info");return e?8*e:void 0}iB(t){const e=t[this.eB].storedTimestamp;return!!e&&Yn()-e>36e5}rB(t){this.oB=t,this.hB()}aB(){var t;return null!=this.oB||(this.oB=null!=(t=this.nB())?t:lS),this.oB}constructor(){this.eB=uS,this.oB=void 0,this.hB=ef((()=>{var t;const e={[this.eB]:{availableBandwidth:this.oB,storedTimestamp:Yn()}};null==(t=f.tB)||t.sB(cS,JSON.stringify(e))}),1e4)}};nh.zP=new nh,function(t){t[t.uB=0]="uB",t[t.cB=1]="cB",t[t.lB=2]="lB",t[t.dB=3]="dB",t[t.fB=4]="fB",t[t.zv=5]="zv",t[t._B=6]="_B",t[t.vB=7]="vB",t[t.Kv=8]="Kv",t[t.gB=9]="gB",t[t.mB=10]="mB"}(en||(en={}));var fe=class{get wB(){return 0}get pB(){return 0}yB(t){}},Ne=class{AB(t){this.pN=t}hN(t){const e=this.pN;if(void 0!==e)return this.bB.hN(t,e)}hx(t){const e=this.pN;return void 0!==e&&this.bB.hx(t,e)}TB(t){const e={vg:t.vg,SB:t.SB||[],EB:t.EB,FN:t.FN},i=this.bB.QN(e,this.pN||{},t.jD,this.qE);return e.EB&&i.kD(e.EB),new dS(i)}constructor(t,e=new aS){this.pN=void 0,this.qE=t,this.bB=e}},dS=class{BD(t){return this.kB.BD(t)}OD(t,e,i){return this.kB.OD(e,i)}ND(){return this.kB.ND||void 0!==this.kB.CD}ZD(t,e){return this.kB.ZD(t,e)}JD(t,e,i){return e&&this.kB.kD(e),this.kB.JD(t,i)}hl(){this.kB.bn()}constructor(t){this.kB=t}},Vo=class extends ff{PB(t){this.IB.push(t);for(const e of t.Ff)this.tt(e);this.RB(t)}CB(t){so(this.IB,t),this.xB(t);for(const e of t.Ff)this.DB(e)||this.it(e)}DB(t){for(const e of this.IB)if(e.Wf(t))return!0;return!1}RB(t){t.kn(Qs.cf,this.NB),t.kn(Qs.df,this.BB)}xB(t){t.pn(Qs.cf,this.NB),t.pn(Qs.df,this.BB)}bn(){for(;this.IB.length>0;)this.CB(this.IB[0]);super.bn()}pa(){return Gr(this)}constructor(t){super(),this.IB=[],this.NB=t=>{this.tt(t.Ht)},this.BB=t=>{const e=t.Ht;this.DB(e)||this.it(e)};for(const e of t)this.PB(e)}};function fS(t){return{get enabled(){return t.Ot},set enabled(e){t.Ot=$u(e)},get currentLatency(){return t.xv},get streamConfiguration(){if(void 0!==t.OB)return function(t){return{get minimumOffset(){return t.f_},get maximumOffset(){return t.v_},get targetOffset(){return t.__},get forceSeekOffset(){return t.g_},get minimumPlaybackRate(){return t.m_},get maximumPlaybackRate(){return t.w_}}}(t.OB)},get configuration(){return function(t){return{get minimumOffset(){return t.f_},set minimumOffset(e){t.f_=ve(e)},get maximumOffset(){return t.v_},set maximumOffset(e){t.v_=ve(e)},get targetOffset(){return t.__},set targetOffset(e){t.__=ve(e)},get forceSeekOffset(){return t.g_},set forceSeekOffset(e){t.g_=ve(e)},get minimumPlaybackRate(){return t.m_},set minimumPlaybackRate(e){t.m_=ve(e)},get maximumPlaybackRate(){return t.w_},set maximumPlaybackRate(e){t.w_=ve(e)},update(e){t.Kn(function(t){const e={};void 0!==t.minimumOffset&&(e.f_=ve(t.minimumOffset));void 0!==t.maximumOffset&&(e.v_=ve(t.maximumOffset));void 0!==t.targetOffset&&(e.__=ve(t.targetOffset));void 0!==t.forceSeekOffset&&(e.g_=ve(t.forceSeekOffset));void 0!==t.minimumPlaybackRate&&(e.m_=ve(t.minimumPlaybackRate));void 0!==t.maximumPlaybackRate&&(e.w_=ve(t.maximumPlaybackRate));return e}(e))}}}(t.Vp)}}}var _S,vS=class{get ma(){return null!=this.vf||(this.vf=fS(this)),this.vf}get Ot(){return!1}set Ot(t){}get xv(){}get OB(){}get Vp(){return this.MB}constructor(){this.MB={g_:0,v_:0,w_:0,f_:0,m_:0,__:0,Kn:$d}}};function gS(){return _S||(_S=qh&&qh.document&&qh.document.createElement("video")),_S}var mS=!(!qh||!qh.TextTrack),wS=class extends Ro{get LB(){const t=this.FB.Fl,e=this.zl;return t.br(e,.01)}get ht(){return this.EA}get Fl(){return this.FB.Fl.ks()}get Hl(){return this.FB.Hl}set Hl(t){t&&this.FB.UB(t)}get zl(){return void 0!==this.HB?this.HB:this.FB.zl}set zl(t){this.rd&&(this.HB=t),this.FB.Fm(t)}get ct(){return this.FB.ct}get jl(){return this.FB.jl}get lt(){return this.WB}get Jl(){return this.qB}get td(){}get rd(){return this.FB.rd}get hd(){return no({},{RA:0,CA:0,xA:0,DA:0,NA:0,BA:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.FB.ud())}get ld(){return this.FB.ld}set ld(t){this.FB.ld=t}get _d(){return!0}get md(){return this.FB.md}get pd(){return this.FB.pd}set pd(t){this.FB.pd=t}get bd(){return this.FB.VB.played}get Sd(){return this.zB}set Sd(t){this.zB=t,this.XB&&(this.XB.Sd=t)}get Pd(){return this.FB.Pd}get Rd(){return this.FB.Rd.ks()}get xd(){return this.FB.xd}get GB(){return this.FB.GB}get nt(){return this.xu}get rt(){return this.PA}get Od(){return this.FB.Od}get Fd(){return this.FB.Fd}get Hd(){return this.FB.Hd}set Hd(t){this.FB.Hd=t}get Vd(){return this.QB}get Xd(){return this.FB.Xd}set Xd(t){this.FB.Xd=t}get KB(){return this.jB}we(){this.FB.we()}be(){this.FB.be()}async ba(t,e,i){gi(i);const s={l_:$.nD,d_:t.src,YB:t.type,ZB:this.JB(t),Sd:this.zB,$B:t.crossOrigin,tO:e.metadata&&e.metadata.title};this.eO.AB(t.contentProtection),this.XB=await this.FB.Rn(s),gi(i),e.textTracks&&this.iO(e.textTracks),Bo(this.nt)}iO(t){for(let i of t)if(this.FB.sO()&&Bp.xk&&mS&&!rp(i.kind,i.label)&&this.nO(i)){var e;const t=null!=(e=i.kind)?e:K.xm;this.FB.rO(i.src,t,i.label,i.srclang,i.default)}else{if(void 0===i.src)continue;this.oO.FE(i)}}nO(t){return!t.format||"webvtt"===t.format}async Jd(){try{await this.FB.Jd()}catch(t){}for(;!this.LB;)await this.FB.Bl(r.Y_)}Zd(){this.FB.Zd()}tf(){return void 0!==this.FB.VB.webkitShowPlaybackTargetPicker}ef(){this.FB.VB.webkitShowPlaybackTargetPicker&&this.FB.VB.webkitShowPlaybackTargetPicker()}if(){this.FB.VB.webkitShowPlaybackTargetPicker&&this.FB.VB.webkitShowPlaybackTargetPicker()}Qd(){return this.FB.VB}Gd(){return this.FB.ka}async ir(){this.WB=void 0,this.qB=void 0,this.XB=void 0,await this.oO.ir(),this.FB.hO(),await this.FB.ir(),this.aO.ir(),this.Sd=this.zB,this.ht.ir(),this.rt.ir(),this.HB=void 0}async bn(){await this.ir(),this.Lo(),this.uO(),this.cO(),this.aO.bn(),this.FB.lO=void 0,await this.fO.dO(this.FB),this.EA.bn(),this.PA.bn(),this.xu.bn(),await this.oO.bn()}_O(){this.FB.kn(r.Ah,this.Rs),this.FB.kn(r.Ch,this.Rs),this.FB.kn(r.vv,this.vO),this.FB.kn(r.Y_,this.Rs),this.FB.kn(r.X_,this.Rs),this.FB.kn(r.rv,this.Rs),this.FB.kn(r.ev,this.gO),this.FB.kn(r.M_,this.Rs),this.FB.kn(r.Z_,this.Rs),this.FB.kn(r.mv,this.Rs),this.FB.kn(r.N_,this.Rs),this.FB.kn(r.tv,this.mO),this.FB.kn(En.Pv,this.wO),this.FB.kn(lt.aa,this.pO),this.FB.kn(r.C_,this.Rs),this.FB.kn(r.R_,this.yO),this.FB.VB.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.AO)}uO(){this.FB.pn(r.Ah,this.Rs),this.FB.pn(r.Ch,this.Rs),this.FB.pn(r.vv,this.vO),this.FB.pn(r.Y_,this.Rs),this.FB.pn(r.X_,this.Rs),this.FB.pn(r.rv,this.Rs),this.FB.pn(r.ev,this.gO),this.FB.pn(r.M_,this.Rs),this.FB.pn(r.Z_,this.Rs),this.FB.pn(r.mv,this.Rs),this.FB.pn(r.N_,this.Rs),this.FB.pn(r.tv,this.mO),this.FB.pn(En.Pv,this.wO),this.FB.pn(lt.aa,this.pO),this.FB.pn(r.C_,this.Rs),this.FB.pn(r.R_,this.yO),this.FB.VB.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.AO)}JB(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{vg:Jo,bO:[{initDataTypes:[Jo.GP],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}TO(){let t=this.FB.VB.audioTracks,e=this.FB.VB.videoTracks;t&&(t.addEventListener("addtrack",this.SO),t.addEventListener("removetrack",this.EO),t.addEventListener("change",this.kO)),e&&(e.addEventListener("addtrack",this.PO),e.addEventListener("removetrack",this.IO),e.addEventListener("change",this.RO))}cO(){let t=this.FB.VB.audioTracks,e=this.FB.VB.videoTracks;t&&(t.removeEventListener("addtrack",this.SO),t.removeEventListener("removetrack",this.EO),t.removeEventListener("change",this.kO)),e&&(e.removeEventListener("addtrack",this.PO),e.removeEventListener("removetrack",this.IO),e.removeEventListener("change",this.RO))}hh(t){for(let e=0;e<t.V;e++){t.Hf(e).YA()}}sf(){this.FB.sf()}nf(){}CO(t,e){this.WB||(this.WB=e,this.qB=t,this.To(new An(t)))}constructor(t,e,i,s,n,r=new aS,o=Gb()){super(),this.XB=void 0,this.WB=void 0,this.qB=void 0,this.jB=new fe,this.QB=new vS,this.pO=t=>{const e=t.lt,i=e.code,s=new io(jg(i),"Something went wrong during native playback.",e),n=new zg(i,s.message,e.message);this.CO(s,n)},this.vO=()=>{this.To(new oh(this.zl,this.Hl))},this.gO=t=>{this.md||(this.HB=void 0),this.To(t)},this.wO=t=>{this.HB=void 0},this.AO=()=>{this.To(new hm(this.rd))},this.mO=()=>{this.Fd>0&&this.Od>0&&this.To(new Sn)},this.SO=t=>{this.EA.tt(new nm(t.track))},this.EO=t=>{const e=AS(this.EA,t.track);e&&this.EA.it(e)},this.kO=()=>{this.hh(this.EA)},this.PO=t=>{this.PA.tt(new om(t.track))},this.IO=t=>{const e=AS(this.PA,t.track);e&&this.PA.it(e)},this.RO=()=>{this.hh(this.PA)},this.yO=t=>{this.To(t),this.CO(t.errorObject,Gg(t.errorObject))},this.fO=e,this.qE=i,this.ix=o,this.FB=this.fO.xO(Fs.Rm),this.zB=this.FB.VB.preload,this.aO=new nn(this.FB,!0),this.aO.kn(Hf,this.Rs),this.eO=new Ne(i,r),this.FB.lO=this.eO,this._O(),this.EA=new Qh,this.PA=new Qh,this.TO(),this.oO=new Ds(this.FB,this.qE),this.xu=new Vo([this.FB.nt]),this.be()}};function pS(t){return!t.type||!(!gS().canPlayType||!gS().canPlayType(t.type))}var yS=class{wg(t,e,i,s,n,r){return new wS(t,e,i,s,n)}DO(t,e){return pS(t)}BO(){return!1}constructor(){this.OO=en.mB}};function AS(t,e){for(let i of t.Ff)if(i.KA===e)return i}var bS=class{static MO(){return this.zP}LO(t){this.FO.push(t)}get OO(){return this.UO.OO}wg(t,e,i,s,n,r){let o=this.UO.wg(t,e,i,s,n,r);for(const t of this.FO)o=t(o,i,s);return o}DO(t,e){return this.UO.DO(t,e)}BO(){return!1}constructor(){this.UO=new yS,this.FO=[]}};function TS(t,e){return Mu(t.OO,e.OO)}bS.zP=new bS;var SS=class{HO(t){this.WO.push(t),this.WO.sort(TS)}async qO(t,e){for(const i of this.WO){const s=i.DO(t,e);if(le(s)?await s:Boolean(s))return i}}constructor(){this.WO=[]}};function ES(t){kS.zP.HO(t)}var kS=class extends SS{VO(t){this.zO=t}XO(){return this.zO}async GO(t,e){for(let i of t){let t=await this.qO(i,e);if(t)return{QO:i,t:t}}const i=this.zO;for(let s of t)if(i.DO(s,e))return{QO:s,t:i};return{QO:t[0],t:i}}constructor(...t){super(...t),this.zO=bS.MO()}};kS.zP=new kS;var Fi,PS=class{bn(){z(this.Hs)}constructor(t){this.Hs=qh&&qh.document&&qh.document.createElement("div"),Ca(this.Hs),t.appendChild(this.Hs)}};!function(t){t.mB="",t.KO="none",t.Nm="metadata",t.fA="auto"}(Fi||(Fi={}));var IS=[lt.aa,r.B_,r.O_,r.yv,r.E_,r.L_,r.U_,r.K_,r.j_,r.hv,r.fv,En.Av,En.bv,En.Tv,En.Sv,En.Rf,En.Ev,En.Pv,r.R_,r.C_,r.N_,r.M_,r.X_,r.G_,r.Ah,r.Y_,r.Ch,r.Z_,r.tv,r.rv,r.ev,r.vv,r.mv,r.J_,r.Q_,r.ov],RS=class extends Ro{get ht(){return this.EA}get Fl(){return this.Ko.Fl}get lt(){return this.Ko.lt}get Jl(){return this.Ko.Jl}get Hl(){return this.Ko.Hl}set Hl(t){this.Ko.Hl=t}get bt(){return this.jO}get zl(){return this.Ko.zl}set zl(t){this.Ko.zl=t}get ct(){return this.Ko.ct}get jl(){return this.Ko.jl}get td(){return this.kA}get rd(){return this.Ko.rd}get hd(){return this.Ko.hd}get ld(){return this.Ko.ld}set ld(t){this.Ko.ld=t}get _d(){return this.Ko._d}get md(){return this.Ko.md}get pd(){return this.Ko.pd}set pd(t){this.Ko.pd=t}get bd(){return this.Ko.bd}get Sd(){return this.zB}set Sd(t){this.zB=t,this.Ko&&(this.Ko.Sd=this.zB)}get Pd(){return this.Ko.Pd}get Rd(){return this.Ko.Rd}get xd(){return this.Ko.xd}get nt(){return this.xu}get Od(){return this.Ko.Od}get rt(){return this.PA}get Fd(){return this.Ko.Fd}get Hd(){return this.Ko.Hd}set Hd(t){this.Ko.Hd=t}get Vd(){return this.Ko.Vd}get KB(){return this.Ko.KB}Zd(){this.Ko.Zd()}Jd(){const t=this.Ko.Jd();le(t)&&Ui(t)}$d(){return this.ba(void 0)}Yd(){}YO(){this.EA.qf=this.Ko.ht,this.PA.qf=this.Ko.rt,this.xu.qf=this.Ko.nt,this.kA.qf=this.Ko.td,this.Ko.kn(IS,this.Rs)}ZO(){this.Ko.pn(IS,this.Rs),this.EA.qf=void 0,this.PA.qf=void 0,this.xu.qf=void 0,this.kA.qf=void 0}Nd(){return this.JO}async ba(t,e){if(gi(e),this.JO=t,!t)return;const i=t.sources.filter(Uo);if(fo(i))return;const s=await this.$O.GO(i,t);gi(e);const n=s.QO,r=s.t,o=this.Gd(),h=Fg(this);(this.tM!==r||this.lt)&&(this.ZO(),await this.Ko.bn(),gi(e),this.tM=r,this.Ko=this.eM(r,n),function(t,e){t.ld!==e.ld&&(t.ld=e.ld);t.Hd!==e.Hd&&(t.Hd=e.Hd);t.pd!==e.pd&&(t.pd=e.pd)}(this.Ko,h),as(this,h,this),this.YO()),this.Ko.Sd=this.Sd,this.iM?this.Ko.be():this.Ko.we(),await this.Ko.ba(n,t,e),gi(e),this.sM(n),this.Gd()!==o&&this.To(new Cu)}sM(t){this.jO!==t&&(this.jO=t,this.To(new Hg(t)))}tf(){return this.Ko.tf()}ef(){this.Ko.ef()}if(){this.Ko.if()}Gd(){return this.Ko.Gd()}sf(){this.Ko.sf()}nf(){this.Ko.nf()}async ir(){this.JO=void 0,this.sM(void 0),await this.Ko.ir()}async bn(){this.Lo(),await this.ir(),await this.Ko.bn(),this.EA.bn(),this.PA.bn(),this.xu.bn(),this.kA.bn()}be(){this.iM=!0,this.Ko.be()}we(){this.iM=!1,this.Ko.we()}constructor(t,e){super(),this.tM=void 0,this.jO=void 0,this.zB=Fi.KO,this.JO=void 0,this.iM=!0,this.EA=new aa,this.PA=new aa,this.xu=new Mt,this.kA=new au,this.$O=t,this.Ko=e,this.Ko.Sd=this.Sd,this.YO()}};function CS(t,e,i){return i?t<=e:t<e}var qs,ri=class t{get nM(){return this.rM.slice()}Tn(t){return this.rM[2*t]}An(t){return this.rM[2*t+1]}oM(t){return this.hM[2*t]}aM(t){return this.hM[2*t+1]}ks(){const t=this;return{get length(){return t.V},start(e){const i=0|e;return t.uM(i),t.Tn(i)},end(e){const i=0|e;return t.uM(i),t.An(i)}}}cM(){const e=new Array(2*this.V),i=new Array(2*this.V);for(let t=0;t<this.V;t++)e[2*t]=this.Tn(t),e[2*t+1]=this.An(t),i[2*t]=!0,i[2*t+1]=!0;return new t(e,i)}uM(t){if(t<0)throw new v("The index provided ("+t+") must be non-negative");if(t>=this.V)throw new v("The index provided ("+t+") is greater than the maximum bound ("+this.V+")")}lM(t){if(0===this.V)return 0;if(this.br(t))return t;if(t<=this.Tn(0))return this.Tn(0);if(t>=this.An(this.V-1))return this.An(this.V-1);{let e=0,i=1/0;for(let s=0;s<this.V;s++){const n=this.Tn(s),r=b.abs(n-t);r<i&&(e=n,i=r);const o=this.An(s),h=b.abs(o-t);h<i&&(e=o,i=h)}return e}}Cn(e){let i=0,s=0;const n=[],r=[];for(;i<this.V&&s<e.V;){const t=this.Tn(i),o=this.An(i),h=this.oM(i),a=this.aM(i),u=e.Tn(s),c=e.An(s),l=e.oM(s),d=e.aM(s),f=b.max(t,u),_=b.min(o,c);let v,g;v=t===u?h&&l:f===t?h:l,g=o===c?a&&d:_===o?a:d,(f<_||v&&g&&f===_)&&(n.push(f,_),r.push(v,g)),o===c?(i+=1,s+=1):o<c?i+=1:s+=1}return new t(n,r)}dM(){const e=this.fM(),i=e.V;if(0===i)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=e.Tn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!e.oM(0)));for(let t=0;t<i-1;t++)s.push(e.An(t),e.Tn(t+1)),n.push(!e.aM(t),!e.oM(t+1));const o=e.An(i-1);return o!==1/0&&(s.push(o,1/0),n.push(!e.aM(i-1),!1)),new t(s,n)}_M(e){let i=0,s=0;const n=this.V,r=e.V,o=new Array(2*(n+r)),h=new Array(2*(n+r));let a=0;for(;i<n&&s<r;){const t=this.Tn(i),n=this.An(i),r=e.Tn(s),u=e.An(s);t<r||t===r&&n<u?(o[a]=t,o[a+1]=n,h[a]=this.oM(i),h[a+1]=this.aM(i),i++):(o[a]=r,o[a+1]=u,h[a]=e.oM(s),h[a+1]=e.aM(s),s++),a+=2}for(;i<n;)o[a]=this.Tn(i),o[a+1]=this.An(i),h[a]=this.oM(i),h[a+1]=this.aM(i),i++,a+=2;for(;s<r;)o[a]=e.Tn(s),o[a+1]=e.An(s),h[a]=e.oM(s),h[a+1]=e.aM(s),s++,a+=2;return new t(o,h)}vM(e){void 0===e&&(e=0);const i=this.V;if(i<2)return this;const s=[],n=[];let r=this.Tn(0),o=this.An(0),h=this.oM(0),a=this.aM(0);for(let t=1;t<i;t++){const i=this.Tn(t),u=this.An(t);let c=this.oM(t),l=this.aM(t);r<i&&o>u||(r===i&&(c=h||c,h=c),o===u&&(l=a||l,a=l),CS(i,o+e,a||c)?(o=u,a=l):(s.push(r,o),n.push(h,a),r=i,o=u,h=c,a=l))}return s.push(r,o),n.push(h,a),new t(s,n).fM()}fM(){const e=[],i=[];for(let t=0;t<this.V;t++){const s=this.Tn(t),n=this.An(t),r=this.oM(t),o=this.aM(t);s===n?(r||o)&&(e.push(s,n),i.push(!0,!0)):(e.push(s,n),i.push(r,o))}return new t(e,i)}gM(t){if(0===this.V)return t;if(0===t.V)return this;return this._M(t).vM()}mM(t){const e=this.fM(),i=t.fM(),s=e.dM(),n=i.dM(),r=s.Cn(i),o=n.Cn(e);return r.gM(o)}Mm(e){if(0===this.V||0===e)return this;const i=[],s=[];for(let t=0;t<this.V;t++){const n=this.Tn(t)+e,r=this.An(t)+e;i.push(n,r),s.push(this.oM(t),this.aM(t))}return new t(i,s)}wM(t){return 0===this.V||0===t.V?this:this.fM().Cn(t.fM().dM())}br(t,e){return this.pM(t,e)>=0}yM(t,e,i,s,n){return this.AM(t,e,i,s,n)>=0}bM(t,e,i,s,n){return this.TM(t,e,i,s,n)>=0}SM(t){if(t.V!==this.V)return!1;for(let e=0;e<this.V;e++)if(this.Tn(e)!==t.Tn(e)||this.An(e)!==t.An(e)||this.oM(e)!==t.oM(e)||this.aM(e)!==t.aM(e))return!1;return!0}EM(e){const i=[],s=[];for(let t=0;t<this.V;t++){const n=this.Tn(t),r=this.An(t),o=this.oM(t),h=this.aM(t);e(n,r,o,h)&&(i.push(n,r),s.push(o,h))}return new t(i,s)}TM(t,e,i,s,n){void 0===i&&(i=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,o=e+n;for(let t=0;t<this.V;t+=1)if(CS(this.Tn(t),o,!s||this.oM(t))&&CS(r,this.An(t),!i||this.aM(t)))return t;return-1}AM(t,e,i,s,n){void 0===i&&(i=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,o=e-n;for(let t=0;t<this.V;t+=1)if(CS(this.Tn(t),r,!i||this.oM(t))&&CS(o,this.An(t),!s||this.aM(t)))return t;return-1}pM(t,e){return this.AM(t,t,!0,!0,e)}kM(t,e){void 0===e&&(e=0);const i=t+e;for(let t=this.V-1;t>=0;t-=1)if(CS(this.Tn(t),i,this.oM(t)))return t;return-1}PM(t,e){void 0===e&&(e=0);const i=t-e;for(let t=0;t<this.V;t+=1)if(CS(i,this.An(t),this.aM(t)))return t;return-1}IM(t,e){void 0===e&&(e=0);const i=t+e;for(let t=0;t<this.V;t+=1)if(this.Tn(t)>i)return t;return-1}RM(e){return this.uM(e),new t([this.Tn(e),this.An(e)],[this.oM(e),this.aM(e)])}CM(t,e){const i=this.pM(t,e);return i<0?void 0:this.RM(i)}get xM(){let t=0;for(let e=0;e<this.V;e++){t+=this.An(e)-this.Tn(e)}return t}static _n(e){const i=[];for(let t=0;t<e.length;t++)i.push(e.start(t),e.end(t));return new t(i)}static DM(e){return new t([e,e],[!0,!0])}static NM(e,i){return e<=i?new t([e,i]):t.BM()}static BM(){return xS}constructor(t,e){this.V=t.length>>1,this.rM=t,this.hM=e||function(t){const e=new Array(2*t);for(let i=0,s=0;i<t;i+=1,s+=2)e[s]=!0,e[s+1]=!1;return e}(this.V)}},xS=new ri([]);!function(t){t.oa="fullscreenchange",t.fa="fullscreensupportchange",t.aa="fullscreenerror"}(qs||(qs={}));var DS=class extends Ci{constructor(){super(qs.aa)}},eu=(qs.oa,qs.fa,qs.aa,class extends d{get cs(){return!1}get sa(){return!1}bo(){this.To(new DS)}Co(){}bn(){this.Lo()}}),NS=class extends d{get Hl(){}set Hl(t){}get zl(){return this.OM}set zl(t){this.OM!==t&&(this.OM=t,this.MM=!0,this.To(new Uh(this.zl)))}get hd(){return{RA:0,CA:0,xA:0,DA:0,NA:0,BA:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get ld(){return this.LM}set ld(t){this.LM!==t&&(this.LM=t,this.To(new Ao(this.zl,this.Hd)))}get md(){return this.FM}get pd(){return this.UM}set pd(t){this.UM!==t&&(this.UM=t,this.To(new Cs(this.zl,this.pd)))}get xd(){return this.MM}get Hd(){return this.AR}set Hd(t){this.AR!==t&&(this.AR=t,this.To(new Ao(this.zl,this.Hd)))}get Xd(){return!1}set Xd(t){}get KB(){return this.jB}be(){}we(){}Jd(){this.FM&&(this.FM=!1,this.To(new gs(this.zl)),this.To(new ra(this.zl)))}Zd(){this.FM||(this.FM=!0,this.To(new oh(this.zl,this.Hl)),this.To(new Cn(this.zl)))}ba(t,e){return Promise.resolve()}tf(){return!1}ef(){}if(){}Gd(){return this.HM}sf(){}nf(){}async ir(){this.OM=0,this.MM=!1,this.Zd(),this.To(new Ng(this.OM))}async bn(){this.Lo(),this.ht.bn(),this.nt.bn(),this.rt.bn()}constructor(...t){super(...t),this.OM=0,this.LM=!1,this.FM=!0,this.UM=1,this.MM=!1,this.AR=1,this.ht=new Qh,this.Fl=ri.BM().ks(),this.ct=NaN,this.jl=!1,this.lt=void 0,this.Jl=void 0,this.td=void 0,this.rd=!1,this._d=!0,this.bd=ri.BM().ks(),this.Sd=Fi.KO,this.Pd=Yv.AA,this.Rd=ri.BM().ks(),this.GB=void 0,this.nt=new ih,this.Od=0,this.rt=new Qh,this.Fd=0,this.Vd=new vS,this.jB=new fe,this.HM=new eu}},BS=class extends NS{set WM(t){this.fO=t,this.FB=t.xO(Fs.Rm)}Qd(){var t;return null==(t=this.FB)?void 0:t.VB}async bn(){await super.bn(),this.FB&&(await this.fO.dO(this.FB),this.FB=void 0)}constructor(...t){super(...t),this.fO=void 0,this.FB=void 0}},OS=class extends RS{get Se(){return this.qM}get Xd(){return this.Ko.Xd}set Xd(t){this.Ko.Xd=t}Yd(){super.Yd(),this.zM.VM()}Kd(t){Ug(this,t)}jd(){}rf(t){return!1}async ba(t,e){const i=this.Gd(),s=this.Qd();await super.ba(t,e),this.Gd()!==i&&this.To(new Cu),this.Qd()!==s&&this.To(new Ls)}eM(t,e){return t.wg(this.qM,this.zM,this.qE,this.kx,this.XM,this.GM,e)}Qd(){return this.Ko.Qd()}Ll(){return this.zM.QM.map((t=>t.VB))}async bn(){await super.bn(),this.zM.bn(),this.KM.bn()}constructor(t,e,i,s,n,r){const o=new BS;super(kS.zP,o),this.qM=t,this.kx=e,this.qE=i,this.XM=s,this.GM=r,this.zM=new Rp(n,this.GM),this.zM.jM(this.qM),o.WM=this.zM,this.KM=new PS(this.qM)}},MS=class extends Ro{get ht(){return this.YM}get Fl(){return ri.BM().ks()}get Hl(){return new Date(NaN)}set Hl(t){}get bt(){}get zl(){return 0}set zl(t){}get ct(){return 0}get Se(){return this.qM}get jl(){return!0}get lt(){return this.ZM}get Jl(){return this.JM}get td(){}get hd(){return{RA:0,CA:0,xA:0,DA:0,NA:0,BA:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get ld(){return!1}set ld(t){}get _d(){return!0}get md(){return!0}get pd(){return 0}set pd(t){}get bd(){return ri.BM().ks()}get Sd(){return Fi.KO}set Sd(t){}get Pd(){return Yv.AA}get Rd(){return ri.BM().ks()}get xd(){return!1}get nt(){return this.$M}get Od(){return 0}get rt(){return this.YM}get Fd(){return 0}get Hd(){return 1}set Hd(t){}get Vd(){return this.QB}get Xd(){return!1}set Xd(t){}rf(t){return!0}we(){}Jd(){throw this.To(new An(this.JM)),this.ZM}Zd(){}Nd(){}async ba(t,e){throw gi(e),this.To(new An(this.JM)),this.ZM}be(){}$d(){return Promise.resolve()}Qd(){}Gd(){return this.HM}Ll(){return[]}Yd(){}Kd(t){}jd(){}get rd(){return!1}tf(){return!1}ef(){}if(){}sf(){}nf(){}ir(){return Promise.resolve()}bn(){return this.Lo(),this.YM.bn(),this.$M.bn(),Promise.resolve()}constructor(t,e,i){super(),this.HM=new eu,this.QB=new vS,this.qM=t,this.ZM=e,this.YM=new Qh,this.$M=new ih,this.JM=i}};function LS(t){if(t&&or(t))return no({},t,{integration:FS(t.integration),fairplay:zS(t.fairplay),widevine:US(t.widevine),playready:HS(t.playready),clearkey:XS(t.clearkey),aes128:GS(t.aes128),integrationParameters:QS(t.integrationParameters),preferredKeySystems:KS(t.preferredKeySystems)})}function FS(t){if(Ts(t))return t}function US(t){if(t&&or(t))return{persistentState:WS(t.persistentState),distinctiveIdentifier:WS(t.distinctiveIdentifier),audioRobustness:qS(t.audioRobustness),videoRobustness:qS(t.videoRobustness),licenseAcquisitionURL:Ts(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:VS(t.licenseType),headers:t.headers,useCredentials:!!bh(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:Ts(t.certificate)||qv(t.certificate)?t.certificate:void 0}}function HS(t){if(!t)return;const e=US(t);if(!e)return;return no({},e,{customData:Ts(t.customData)?t.customData:void 0})}function WS(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function qS(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function VS(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function zS(t){if(!t)return;const e=US(t);if(!e)return;return no({},e,{certificateURL:Ts(t.certificateURL)?t.certificateURL:void 0})}function XS(t){if(!t)return;const e=US(t);if(!e)return;const i=ya(t.keys)?t.keys.map((t=>function(t){if(!t||!or(t))return;const e=t.id,i=t.value;if(!Ts(e)||!Ts(i))return;return{id:e,value:i}}(t))).filter(it):void 0;return no({},e,{keys:i})}function GS(t){if(or(t))return{useCredentials:bh(t.useCredentials)?t.useCredentials:void 0}}function QS(t){if(or(t))return t}function KS(t){return t&&ya(t)?t.map((t=>wh(t))).filter(it):[Ua,Ks,_i]}var jS=class extends Ci{constructor(t){super("presentationmodechange"),this.presentationMode=t}};function xu(t,e,i){return new Promise(((s,n)=>{if(i&&i.$c)return n(new Sr);const r=t=>{h(),s(t)},o=()=>{h(),n(new Sr)},h=()=>{t.removeEventListener(e,r),i&&i.cl(o)};t.addEventListener(e,r),i&&i.ul(o)}))}var Je,YS=class extends Ro{tL(t){t.Il(this.eL),this.iL.push(t)}sL(t){t.Nl(this.eL),so(this.iL,t)}bn(){this.Lo();for(const t of this.iL)t.Nl(this.eL);wr(this.iL)}constructor(t,e=!1){super(t),this.iL=[],this.nL=t=>{Ai((()=>{this.Rs(t)}))},this.eL=e?this.nL:this.Rs}};!function(t){t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture"}(Je||(Je={}));var ZS,JS=class extends Ro{get ma(){return this.vf||(this.vf=this.pa()),this.vf}pa(){return function(t){let e,i={get currentMode(){return t.Go()},requestMode(e){const i=tE(e);i&&t.ia(i)},supportsMode(e){const i=tE(e);return!!i&&t.Qo(i)},addEventListener(t,i){e.kn(t,i)},removeEventListener(t,i){e.pn(t,i)}};return e=new YS(i,!0),e.tL(t),i}(this)}ia(t){this.Jo(t,t)}Jo(t,e){this.rL!==e&&(this.oL=!0,this.hL=t,this.Yo(e,this.rL),"fullscreen"!==t&&(this.aL=t),this.oL=!1,this.Zr())}Go(){return this.uL?"fullscreen":"inline"}Qo(t){switch(t){case"fullscreen":return this.HM.sa;case"inline":return!0}return!1}Zr(){if(this.oL)return;const t=this.rL,e=this.Go();this.rL=e,"fullscreen"!==e&&(this.cL=e),t!==e&&this.To(new jS(e))}Yo(t,e){const i="fullscreen"===t;this.uL=i,i!==this.HM.cs&&(i?this.HM.bo():this.HM.Co())}wi(){if(this.oL)return;const t=this.HM.cs;this.uL=t,t?this.Jo("fullscreen","fullscreen"):t||"fullscreen"!==this.hL?this.Zr():this.Jo(this.aL,this.cL)}lL(){this.wi(),this.To(new An(new io(Ot.FULLSCREEN_ERROR,"Failed to enter fullscreen.")))}bn(){this.HM.bn(),this.Lo()}constructor(t){super(),this.hL="inline",this.rL="inline",this.oL=!1,this.uL=!1,this.aL="inline",this.cL="inline",this.vf=void 0,this.dL=()=>this.wi(),this.fL=()=>this.lL(),this.HM=t,this.HM.kn(qs.oa,this.dL),this.HM.kn(qs.aa,this.fL),this.Zr()}},$S={zl:0,ct:NaN,jl:!1,lt:void 0,Jl:void 0,ld:!1,md:!0,pd:1,Pd:Yv.AA,xd:!1,Od:0,Fd:0,Hd:1};function tE(t){switch(t){case Je.INLINE:case Je.FULLSCREEN:case Je.PICTURE_IN_PICTURE:return t;default:return}}!function(t){t.DEFAULT="",t.THEO="theo",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor"}(ZS||(ZS={}));var eE,iE,sE,nE,rE,oE,hE,qn=class{get _L(){return this.vL}gL(t){const e=this._L.filter((e=>e.mL(t)));if(e.length>1)0;else if(0===e.length)throw v("Unknown ad integration: "+t.integration);return e[0]||null}wL(t){this.vL.push(t)}constructor(){this.vL=[]}};qn.zP=new qn,function(t){t.Pv="PLAYING",t.Rv="PAUSED",t.pL="SEEK",t.yL="STALLED",t.AL="FAILED",t.bL="INITIAL_BUFFERING",t.TL="NO_ACCESS"}(eE||(eE={})),function(t){t.SL="HTTP_REQUEST_STATUS_CODE_1XX",t.EL="HTTP_REQUEST_STATUS_CODE_2XX",t.kL="HTTP_REQUEST_STATUS_CODE_3XX",t.PL="HTTP_REQUEST_STATUS_CODE_4XX",t.IL="HTTP_REQUEST_STATUS_CODE_5XX",t.RL="BUFFER_LENGTH",t.CL="BYTES_RECEIVED",t.xL="SEGMENT_READ_BITRATE",t.DL="SEGMENT_PROFILE_BITRATE",t.NL="VIDEO_PROFILE_BITRATE",t.BL="NUMBER_OF_FRAMES_DROPPED",t.OL="PLAYBACK_POSITION",t.ML="NUMBER_OF_FRAMES_DECODED",t.LL="PLAYBACK_DELTA_TO_ORIGIN",t.FL="STREAM_DELTA_TO_ORIGIN",t.UL="ORIGIN_TIMESTAMP"}(iE||(iE={})),function(t){t.HL="MANIFEST_URI",t.WL="ASSET_DURATION",t.qL="NUMBER_OF_CONTENT_PROFILES",t.VL="CDN",t.zL="CONTENT_TITLE",t.XL="SERVICE_NAME",t.GL="CONTENT_TYPE",t.QL="CONTENT_DESCRIPTION"}(sE||(sE={})),(nE||(nE={})).KL="shutdown_normal_shutdown",function(t){t.jL="session/",t.YL="content/",t.ZL="internalError/",t.JL="drmError/",t.$L="caError/",t.tF="networkError/"}(rE||(rE={})),function(t){t.eF="userAction",t.iF="endOfStreamReached"}(oE||(oE={})),function(t){t.PAUSE="sF",t.RESUME="nF"}(hE||(hE={}));var oe=class{cI(t){this.rF.delete(t)}oF(){this.rF.clear()}hI(t){return this.rF.get(t)}sB(t,e){this.rF.set(t,e)}constructor(){this.rF=rs()}},je=class t{static hF(){return t.zP||(t.zP=aE.ux()?new aE:new oe),t.zP}static cI(e){t.hF().cI(e)}static oF(){t.hF().oF()}static hI(e){return t.hF().hI(e)}static sB(e,i){t.hF().sB(e,i)}};je.zP=void 0;var ui,aE=class extends je{static ux(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}cI(t){self.sessionStorage.removeItem(t)}oF(){self.sessionStorage.clear()}hI(t){var e;return null!=(e=self.sessionStorage.getItem(t))?e:void 0}sB(t,e){self.sessionStorage.setItem(t,e)}};!function(t){t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected"}(ui||(ui={}));var uE,rn,Oa,cE="agama";function lE(t){switch(t){case"":return uE.NONE;case"horizontal":return uE.HORIZONTAL;case"vertical":return uE.VERTICAL;default:throw new p}}function dE(t,e){if(e)return rn.PM360;if(null==t)return rn.NONE;switch(t){case"":return rn.NONE;case"360":return rn.PM360;case"180":return rn.PM180;default:throw new p("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}!function(t){t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(uE||(uE={})),function(t){t.NONE="",t.PM360="360",t.PM180="180"}(rn||(rn={})),function(t){t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event"}(Oa||(Oa={}));var fE="https://content.uplynk.com";function _E(t){if(!t)return!0;const e=!function(t){return Xi(t)||Qa(t)&&Xi(t[0])}(t.sources)||fo(t.sources),i=!t.ads||vE(t.ads),s=""!==t.poster&&!t.poster;return e&&i&&s}function vE(t){return!t||ya(t)&&0===t.length}function gE(t){if(t&&t.sources)return mE(t.sources)}function mE(t){return Ts(t)?Ag(t):zi(t)?t.type||t.src&&Ag(t.src):Qa(t)&&t.length>0?mE(t[0]):void 0}function wE(t){if(t&&t.sources)return pE(t.sources)}function pE(t){return Ts(t)?t:zi(t)?t.src:Qa(t)&&t.length>0?pE(t[0]):void 0}function yE(t,e,i){return Sg(t)?function(t,e,i){let s=no({},Ig(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:Yh.VERIZON_MEDIA,id:"",prefix:fE,preplayParameters:{},playbackUrlParameters:{},assetType:Oa.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(Ts(t))return t;if(Qa(t)&&Ts(t[0]))return t;if(function(t){return or(t)&&Ts(t.userId)&&(Qa(t.externalId)||Ts(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return Oa.CHANNEL;case"event":return Oa.EVENT;default:return Oa.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=$u(t.contentProtected));t.assetInfo?s.assetInfo=$u(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=ai(t.prefix)||fE);return s.ping=function(t,e){let i=!1,s=!1,n=!1;e?(i=!!bh(e.adImpressions)&&e.adImpressions,s=!!bh(e.freeWheelVideoViews)&&e.freeWheelVideoViews,n=bh(e.linearAdData)?e.linearAdData:t!==Oa.ASSET):t!==Oa.ASSET&&(n=!0);return{adImpressions:i,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=bE(s,t),s=SE(s,e,i),s=TE(s,t,i),s}(t,e,i):Eg(t)?function(t,e,i){var s;return no({},AE(t,e,i),{integration:Yh.MEDIATAILOR,adParams:null!=(s=t.adParams)?s:{}})}(t,e,i):function(t){return or(t)&&Ts(t.integration)&&"theolive"===t.integration}(t)?function(t,e,i){return no({},AE(t,e,i),{integration:Yh.THEOLIVE})}(t,e,i):AE(t,e,i)}function AE(t,e,i){let s=Rg();const n=e&&(e.contentProtection||e.drm);if(Ts(t)){if(s.src=t,s.type=Ag(t),n){const t=LS(n);s.contentProtection=lg(t)}}else if(zi(t)||Tg(t)){s.src=t.src,s.type=t.type||Ag(t.src),s.isAdvertisement=t.isAdvertisement;const e=Pg(t)?t.hesp:void 0;void 0!==e&&(s.hesp=e);Eg(t)&&(s.integration=t.integration);const i=LS(t.contentProtection||t.drm||n);s.contentProtection=lg(i),t.ssai&&(s.ssai=a_(t.ssai)),s=bE(s,t)}return s=SE(s,e,i),s=TE(s,t,i),s}function bE(t,e){var i,s;e.useCredentials?t.crossOrigin=po.qv:e.crossOrigin&&(t.crossOrigin=bg(e.crossOrigin)),Ts(e.timeServer)&&(t.timeServer=e.timeServer),e.liveOffset&&(t.liveOffset=e.liveOffset),e.hlsDateRange&&(t.hlsDateRange=e.hlsDateRange),e.lowLatency&&(t.lowLatency=$u(e.lowLatency)),e.useNativePlayback&&(t.useNativePlayback=$u(e.useNativePlayback)),e.useManagedMediaSource&&(t.useManagedMediaSource=$u(e.useManagedMediaSource)),e.dash&&(t.dash=dg(e.dash)),e.hls&&(t.hls=fg(e.hls)),e.lcevc&&(t.lcevc=$u(e.lcevc)),e.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=Dg(e.ignoreEmbeddedTextTrackTypes)),t.seamlessSwitchStrategy=pg(null!=(s=e.seamlessSwitchStrategy)?s:null==(i=e.dash)?void 0:i.useSeamlessPeriodSwitch);const n=is(e.experimentalRendering);void 0!==n&&(t.experimentalRendering=n);const r=is(e.nativeUiRendering);return void 0!==r&&(t.nativeUiRendering=r),t}function TE(t,e,i){return t.abr=vg(Ts(e)?void 0:Jh(e.abr),null==i?void 0:i.abr),t}function SE(t,e,i){var s;const n=e&&e.timeServer;return i&&i.liveOffset&&!it(t.liveOffset)&&(t.liveOffset=i.liveOffset),i&&i.hlsDateRange&&!it(t.hlsDateRange)&&(t.hlsDateRange=i.hlsDateRange),t.crossOrigin===po.Hv&&(null==e||null==(s=e.vr)?void 0:s[360])&&(t.crossOrigin=po.Wv),t.useCredentials=t.crossOrigin===po.qv,Ts(n)&&!t.timeServer&&(t.timeServer=n),t}function EE(t){const e={src:""};if(t&&t.src){if(e.src=ai(t.src),"default"in t&&(e.default=$u(t.default)),e.kind=function(t){const e=String(t||"").toLowerCase();return Yw(e)?e:e?"metadata":"subtitles"}(t.kind),co(t.format)&&(e.format=t.format),"srclang"in t){const i=t.srclang;"string"==typeof i&&""!==i&&(e.srclang=i)}if("label"in t){const i=t.label;"string"==typeof i&&""!==i&&(e.label=i)}}return e}function kE(t,e){if(B(t))try{return e.gL(t).aF(t)}catch(t){return}}function PE(t){return Ts(t.sources)&&""!==t.sources||or(t.sources)&&Ts(t.sources.src)}function IE(t){return t.integration===ZS.SPOTX&&!j(t.id)}function RE(t){return"freewheel"===t.integration}function Se(t,e,i){if(void 0===i&&(i=qn.zP),_E(t))return{sources:[Rg()]};const s=$a(t);if(s.sources=function(t,e,i){if(Xi(t))return[yE(t,e,i)];if(Qa(t)&&Xi(t[0])){const s=[];for(const n of t)s.push(yE(n,e,i));return s}return[Rg()]}(s.sources,s,e),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,e){if(!Qa(t))return[];const i=[];for(let s of t)s=kE(s,e),s&&(PE(s)||IE(s)||RE(s))&&i.push(s);return i}(s.ads,i);0===t.length?delete s.ads:s.ads=t}const n=!fo(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!Qa(t))return[];const e=[];for(let i of t)i=EE(i),""!==i.src&&e.push(i);return e}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=ai(s.poster)),"streamType"in s&&(s.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(s.streamType)),"vr"in s&&(s.vr=function(t){const e=t||{};return e.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(e.stereoMode),{panoramaMode:dE(e.panoramaMode,Boolean(e[360])),stereoMode:e.stereoMode?lE(e.stereoMode):uE.NONE,nativeVR:Boolean(e.nativeVR)}}(s.vr));if("analytics"in s||(null==e?void 0:e.analytics)){const t=xg(s.analytics),i=e&&e.analytics||[];s.analytics=function(t,e){const i=$a(t);for(const s of e){const e=!t.some((t=>t.integration===s.integration));e&&s.integration!==cE&&i.push(s)}return i}(t,i)}return"mutedAutoplay"in s&&(s.mutedAutoplay=Mg(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=ve(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}var CE=!(Bp.hP&&!Bp.uP),qe=self.console;function xE(t){if(or(t))try{return JSON.stringify(t)}catch(t){}return t}function DE(t){return t.map(xE).join(" ")}function NE(t){const e=qe&&qe[t];return e?e.bind&&CE?e.bind(qe):function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];qe[t](DE(i))}:void 0}var BE=NE("log")||$d,Fa=NE("warn")||BE.bind(void 0,"WARNING:"),OE=NE("error")||BE.bind(void 0,"ERROR:"),ME=(()=>{const t=qe&&qe.assert;return t?t.bind&&CE?t.bind(qe):function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];qe.assert(t,DE(i))}:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];t||OE("Assertion failed:",...i)}})();var Lo=function(){function t(t){this.uF=t}return t.prototype.cF=function(t){var e,i,s,n,r,o,h,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.uF.charAt(64);for(e=0;e<t.length;e+=4)i=(h=this.uF.indexOf(t.charAt(e))<<18|this.uF.indexOf(t.charAt(e+1))<<12|(r=this.uF.indexOf(t.charAt(e+2)))<<6|(o=this.uF.indexOf(t.charAt(e+3))))>>>16&255,s=h>>>8&255,n=255&h,a[e/4]=String.fromCharCode(i,s,n),64===o&&(a[e/4]=String.fromCharCode(i,s)),64===r&&(a[e/4]=String.fromCharCode(i));return a.join("")},t.prototype.lF=function(t,e){var i,s,n,r,o,h,a,u=[],c="";if((h=t.length%3)>0)for(;h++<3;)c+=this.uF.charAt(64),t+="\0";for(h=0;h<t.length;h+=3)s=(i=t.charCodeAt(h)<<16|t.charCodeAt(h+1)<<8|t.charCodeAt(h+2))>>18&63,n=i>>12&63,r=i>>6&63,o=63&i,u[h/3]=this.uF.charAt(s)+this.uF.charAt(n)+this.uF.charAt(r)+this.uF.charAt(o);return a=(a=u.join("")).slice(0,a.length-c.length),e||(a+=c),a},t.dh=new t(function(){var t,e,i,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(e=r[t],i=0;i<e.length;i+=1)s=e.charAt(i),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.dF=new t(function(t){return t.cF("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.dh)),t}();function LE(t){return"string"==typeof t}function FE(t){return"number"==typeof t}var UE={}.toString;var da,HE=Array.isArray||function(t){return"[object Array]"===UE.call(t)};function WE(t,e){return HE(t)&&t.every(e)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb"}(da||(da={}));var ue,qE=g.keys(da).map((function(t){return da[t]}));function VE(t){return-1!==qE.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview"}(ue||(ue={}));var zE,XE=g.keys(ue).map((function(t){return ue[t]}));function GE(t){return-1!==XE.indexOf(t)}function QE(t){try{var e=Lo.dF.cF(t),i=JSON.parse(e);if(!function(t,e){var i,s=function(t){return"object"==typeof t&&null!==t}(t),n=LE(t.key),r=LE(t.customer_id),o=FE(t.generation_date),h=FE(t.expiration_date),a=WE(t.domains_page,LE),u=WE(t.domains_source,LE),c=WE(t.sdks,e?VE:LE),l=function(t){return"boolean"==typeof t}(t.send_impression);t.features?i=WE(t.features,e?GE:LE):(i=!0,t.features=[]);if(!(s&&n&&r&&o&&h&&a&&u&&c&&l&&i))return!1;return!0}(i,!1))throw new v("The provided license could not be decoded correctly.");return i}catch(t){throw new v("The provided license could not be decoded correctly.")}}function KE(){return zE||(zE={YS:Dp.href,fF:qh.parent&&qh.parent!==s,_F:YE()}),zE}var Oe,jE=["http:","https:","ftp:","ws:","wss:"];function YE(){var t;try{if(null==qh?void 0:qh.top)return qh.top.location.href}catch(t){}return null==qh||null==(t=qh.document)?void 0:t.referrer}!function(t){t[t.vF=0]="vF",t[t.gF=1]="gF",t[t.mF=2]="mF"}(Oe||(Oe={}));var ZE,pe=class{constructor(t,e,i,s,n=[],r="",o=Date.now(),h=[],a=!0){this.wF=t,this.pF=e,this.yF=i,this.AF=s,this.bF=n,this.TF=r,this.SF=o,this.EF=h,this.kF=a}};!function(t){t.gF="expired",t.PF="invaliddomain",t.IF="invalidsource",t.RF="invalidfeature",t.aa="error"}(ZE||(ZE={}));var JE=class t{CF(t,e){let i=[];Xi(t.sources)?i=[t.sources]:Qa(t.sources)&&(i=t.sources),this.xF(t,i,e),this.DF(i,e)}xF(t,e,i){if(_E(t)||0===i.yF.length||ek(i.yF))return;if(!e.every((t=>this.NF(t,i)))){const t="invalidsource",e=Eu.BF(t);throw new io($E(t),e)}}DF(t,e){for(const i of t)zi(i)&&Pg(i)&&!i.bypassLicense&&this.OF([ue.HESP],e)}MF(e){return this.LF(e.EF)&&this.FF(e)?t.UF(e.AF)?0:1:2}OF(t,e){for(const i of t)if(!Yi(e.bF,i)){const t="invalidfeature",e=Eu.HF(t,i);throw new io($E(t),e)}}LF(t){return 0===t.length||t.some((t=>this.WF(t)))}WF(t){return"web"===function(t){switch(t){case da.ANDROID:return Pi.YE;case da.ANDROIDTV:case da.FIRETV:return Pi.ZE;case da.IOS:return Pi.JE;case da.TVOS:return Pi.$E;case da.CHROMECAST:case da.CHROMECASTCAF:return Pi.ek;case da.THEOLIVEWEB:return Pi.nk;default:return Pi.jE}}(t)}static UF(t){const e=Number(new Date);return!!t&&e<=t}FF(t){return!(this.qF&&0!==t.pF.length&&!ek(t.pF))||!!(this.qF&&this.VF(t.pF)&&this.zF(t.pF))}VF(t){return ik(this.eR.YS,t)}zF(t){if(!this.eR.fF)return!0;if(this.XF)return!0;const e=this.GF();return!!e&&ik(e,t)}GF(){if(!this.eR.fF)return;const t=Lu.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.eR._F?this.eR._F:void 0}NF(e,i){return!!t.QF(e,i.yF)}static QF(t,e){return ik(this.KF(t),e)}static KF(t){return Ts(t)?t:zi(t)&&t.src||""}constructor(t,e,i){this.XF=t,this.jF=e,this.eR=i,this.qF=nk(this.eR)}};function $E(t){switch(t){case"invaliddomain":return Ot.LICENSE_INVALID_DOMAIN;case"invalidsource":return Ot.LICENSE_INVALID_SOURCE;case"expired":return Ot.LICENSE_EXPIRED;case"invalidfeature":return Ot.LICENSE_INVALID_FEATURE;case"error":return Ot.LICENSE_ERROR}}function tk(t,e){let i=t,s=e;if(!i)return!1;if(s=s.trim(),"*"===s)return!0;if(i=i.replace(/\.+$/,""),s===i)return!0;const n="\\.",r="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",o="(\\*|"+r+")",h=new RegExp("ip-range\\("+o+n+o+n+o+n+o+"\\)"),a=s.match(h),u=t=>"*"===t?"("+r+")":t;if(null!==a&&5===a.length){const t=new RegExp("^"+a[1]+n+u(a[2])+n+u(a[3])+n+u(a[4])+"$");return null!==i.match(t)}return s="."+s,-1!==i.indexOf(s,i.length-s.length)}function ek(t){return t.some((t=>"*"===t))}function ik(t,e){const i=f.Oh(t);if(!sk(i))return!0;for(const s of e){if(tk(i.hostname,s))return!0;if(tk(s_(t),s))return!0}return!1}function sk(t){return-1!==jE.indexOf(t.protocol)}function nk(t){const e=f.Oh(t.YS);return sk(e)&&!function(t){return tk(t.hostname,"localhost")}(e)&&!function(t){return tk(t.hostname,"theoplayer.doubleclick.net")}(e)}var rk,Eu=class{static HF(t,e){return"The requested feature '"+e+"' is not available with the license for this player."}static BF(t){return"invaliddomain"===t?this.YF:"invalidsource"===t?this.ZF:"expired"===t?this.JF:"invalidfeature"===t?this.tU:this.eU}};function ok(t){const e=[t.Ny,t.iU,t.sU];switch(t.iU){case 1:e.push(t.d_);break;case 4:e.push(t.zl),e.push(t.lt);break;case 5:e.push(t.lt)}return e}Eu.eU="The license for this player is invalid.",Eu.JF="The usage license for this video player has expired.",Eu.YF="The current domain is incompatible with the license for this player.",Eu.ZF="The provided video source is incompatible with the license for this player.",Eu.tU="The requested feature is not available with the license for this player.",function(t){t[t.nU=1]="nU",t[t.rU=4]="rU",t[t.oU=5]="oU"}(rk||(rk={}));var sn=new Array(256);for(let t=0;t<256;t+=1)sn[t]=(t<16?"0":"")+t.toString(16);function hk(){const t=Yn(),e=(4294967296*b.random()|0)+t&3029421624,i=(4294967296*b.random()|0)+t&3595553209,s=(4294967296*b.random()|0)+t&1130486254,n=(4294967296*b.random()|0)+t&1284287105;return sn[255&e]+sn[e>>>8&255]+sn[e>>>16&255]+sn[e>>>24&255]+"-"+sn[255&i]+sn[i>>>8&255]+"-"+sn[i>>>16&15|64]+sn[i>>>24&255]+"-"+sn[63&s|128]+sn[s>>>8&255]+"-"+sn[s>>>16&255]+sn[s>>>24&255]+sn[255&n]+sn[n>>>8&255]+sn[n>>>16&255]+sn[n>>>24&255]}function ak(t){return Vv(t.replace(/-/g,""))}function uk(){return f.Al()}var ck,lk="theoplayer-session-id";function dk(){if(!ck){const t=je.hI(lk);t?ck=t:(ck=hk(),je.sB(lk,ck))}return ck}var fk=/[^\x00-\x7E]/g;function _k(t){return"\\u"+Qt(t.charCodeAt(0).toString(16),4,"0")}var vk="https://license.theoplayer.com";function gk(t){const e=function(t){const e=[];return function(t,e,i){return JSON.stringify(t,e,i).replace(fk,_k)}(t,((t,i)=>{if(or(i)){if(-1!==e.indexOf(i))return null;e.push(i)}return i}))}(function(t){return[t.hU,t.RC,t.wF,t.Tw,t.aU,t.uU,t.cU.map(ok)]}(t));return Lo.dF.lF(e)}var mk=class{get cU(){return this.lU}dU(){return Boolean(this.aU)}get aU(){return this.fU}async _U(t){if(!(await this.gU.vU()).kF)return;const e={iU:rk.nU,sU:Yn(),d_:t};await this.mU(e)}async wU(t,e){const i={iU:rk.rU,sU:Yn(),zl:e,lt:t};await this.mU(i)}async pU(t){const e={iU:rk.oU,sU:Yn(),lt:t};await this.mU(e)}async mU(t){const e=await this.gU.vU();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.yU.lF(e.wF)&&t.iU!==rk.oU||(t.iU===rk.nU?this.AU():this.dU()||this.AU(),t.Ny=this.MR++,this.lU.push(t),!function(t){return t===rk.nU||t===rk.oU}(t.iU)?this.lU.length>this.bU&&await this.TU():await this.SU())}async SU(t){for(void 0===t&&(t=!1);this.lU.length>0;)await this.TU(t)}async EU(t){const e=await this.gU.vU();return{hU:Yn(),RC:dk(),wF:this.yU.lF(e.wF)||"dev",Tw:this.hC,aU:this.fU,uU:this.kU,cU:t}}async TU(t){void 0===t&&(t=!1);const e=this.lU.splice(0,this.PU),i=await this.EU(e);t?this.IU(i):this.RU(i),this.CU=uk()}async RU(t){const e=gk(t),i=new Yt({YS:vk,RE:e,ME:!1,DE:Ct.gA,CE:{"Content-Type":Yr.kN},JS:4e3,xE:Fr.POST});try{const t=await this.qE.GS(i);await t.bN()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+e}}IU(t){const e=gk(t);this.qE.IU({YS:vk,RE:e,YB:Yr.kN})}AU(){this.dU()&&this.SU(),this.fU=hk(),this.MR=0}bn(){xp.xU(this.DU),Wu(this.NU),this.SU()}constructor(t,e,i,s=Lo.dh,n=0,r=1){this.hC=t,this.qE=e,this.gU=i,this.yU=s,this.bU=n,this.PU=r,this.lU=[],this.fU=null,this.CU=0,this.kU="unknown",this.MR=0,this.BU=()=>{uk()-this.CU>6e4&&this.SU()},this.DU=()=>{this.SU(!0)},xp.OU(this.DU),this.NU=Hu(this.BU,6e4)}};var wk=0;var pk=c,Ms=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,Ee=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;Ms&&Ee||(Ms=function(t){const e=uk(),i=b.max(0,16-(e-wk)),s=u((()=>t(e+i)),i);return wk=e+i,s},Ee=pk),Ms=Ms.bind(self),Ee=Ee.bind(self);var yk=Bp.hP||Bp.xk&&Bp.pP<13;function Ak(t,e,i){const s=t.getImageData(e,i,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var wu,bk=class{get ma(){var t;return null!=(t=this.vf)?t:this.vf=function(t){return{drawImage(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return t.MU(e,...s)},texImage2D:(e,i,s,n,r,o)=>t.LU(e,i,s,n,r,o),requestVideoFrameCallback:e=>t.FU(e),cancelVideoFrameCallback:e=>t.UU(e)}}(this)}MU(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];const n=this.HU;return void 0!==n&&(t.drawImage(n,...i),!0)}LU(t,e,i,s,n,r){let o=this.HU;return void 0!==o&&(yk&&(o=this.WU(o)),t.texImage2D(e,i,s,n,r,o),!0)}FU(t){const e=this.qU++,i=this.VU(t,e);return this.zU.set(e,{XU:t,GU:i}),e}UU(t){const e=this.zU.get(t);void 0!==e&&(this.zU.delete(t),e.GU())}VU(t,e){const i=this.HU;if(void 0===i)return $d;if(i instanceof HTMLVideoElement&&i.requestVideoFrameCallback){const s=i.requestVideoFrameCallback(((i,s)=>{this.zU.delete(e),t(i,s)}));return()=>i.cancelVideoFrameCallback(s)}{let i;const s=n=>{this.QU()?(this.zU.delete(e),this.KU=!1,t(n,void 0)):i=Ms(s)};return i=Ms(s),()=>Ee(i)}}QU(){return(!this.t.md||this.KU)&&!this.t.xd&&this.t.Pd>=Yv.bA}WU(t){let e=this.jU;void 0===e&&(e=h.createElement("canvas"),this.jU=e);const i=e.getContext("2d"),s=this.t,n=s.Fd,r=s.Od,o=e.width,a=e.height;i.clearRect(0,0,e.width,e.height),o===n&&a===r||(e.width=n,e.height=r),i.drawImage(t,0,0,n,r);let u=!1;return n>0&&Ak(i,n-1,0)&&(e.width=o,u=!0),r>0&&Ak(i,0,r-1)&&(e.height=a,u=!0),u&&i.drawImage(t,0,0,n,r),e}bn(){this.zU.forEach((t=>t.GU())),this.zU.clear(),this.t.pn(r.U_,this.YU),this.t.pn(r.ev,this.ZU),this.HU=void 0,this.jU=void 0}constructor(t){this.HU=void 0,this.vf=void 0,this.jU=void 0,this.zU=Re(),this.qU=1,this.KU=!0,this.ZU=()=>{this.KU=!0},this.YU=()=>{this.HU=this.t.Qd(),this.zU.forEach(((t,e)=>{t.GU(),t.GU=this.VU(t.XU,e)}))},this.t=t,this.t.kn(r.U_,this.YU),this.t.kn(r.ev,this.ZU),this.YU()}};(wu||(wu={})).gn="dimensionchange";var Tk,Sk=class extends Ci{constructor(t,e){super(wu.gn),this.width=t,this.height=e}},Ek=class{constructor(t,e){this.Se=t,this.XU=e}},kk=class extends Ek{get JU(){return this.$U}get tH(){return this.eH}bn(){this.iH.disconnect()}constructor(t,e){super(t,e),this.$U=0,this.eH=0,this.sH=t=>{if(t.length>0){const e=t[t.length-1].contentRect;this.eH=e.width,this.$U=e.height,this.XU(this.eH,this.$U)}},this.iH=new qh.ResizeObserver(this.sH),this.iH.observe(this.Se)}};var Pk=["Webkit","Moz","O","ms"],Ik=(()=>{let t=!1;try{if(void 0!==qh&&"function"==typeof qh.addEventListener){const e=g.defineProperty({},"passive",{get(){t=!0}});qh.addEventListener("testPassiveEventSupport",$d,e),qh.removeEventListener("testPassiveEventSupport",$d,e)}}catch(t){}return t})(),Rk=rs();function Ck(t){return Rk.has(t)||Rk.set(t,function(t){const e=(Tk||(Tk=qh&&qh.document&&qh.document.createElement("span")),Tk);if(!e||!e.style)return t;if(void 0!==e.style[t])return t;const i=t.charAt(0).toUpperCase()+t.slice(1);for(const t of Pk){const s=t+i;if(void 0!==e.style[s])return s}return t}(t)),Rk.get(t)}function xk(t){const e=t.style;e.position="absolute",e.left="0",e.right="0",e.bottom="0",e.top="0",e.overflow="scroll",e.zIndex="-1",e.visibility="hidden"}function Dk(t){const e=t.style;e.position="absolute",e.left="0",e.top="0",e[Ck("transition")]="0s"}var Nk=class extends Ek{bn(){Ee(this.nH),this.nH=0,this.rH.removeEventListener("scroll",this.oH),this.hH.removeEventListener("scroll",this.oH),z(this.aH),s&&s.removeEventListener("resize",this.uH)}get JU(){return this.Se.getBoundingClientRect().height||this.$U||0}get tH(){return this.Se.getBoundingClientRect().width||this.eH||0}constructor(t,e,i){super(t,e),this.nH=0,this.eH=NaN,this.$U=NaN,this.cH=void 0,this.ir=()=>{const t=1e5;this.lH.style.width=t+"px",this.lH.style.height=t+"px",this.rH.scrollLeft=t,this.rH.scrollTop=t,this.hH.scrollLeft=t,this.hH.scrollTop=t,0===this.hH.scrollTop&&Ms(this.ir)},this.dH=()=>{const t=this.tH,e=this.JU;this.XU(t,e),this.eH=t,this.$U=e,this.ir(),this.nH=0},this.oH=()=>{if(this.nH)return;const t=this.tH,e=this.JU;t===this.eH&&e===this.$U||(this.nH=Ms(this.dH))},this.uH=()=>{this.cH||(this.cH=u(this.fH,66))},this.fH=()=>{this.cH=void 0,this._H()},this._H=()=>{this.oH()};const n=function(t,e){return s.getComputedStyle(t,void 0).getPropertyValue(e)||t.style[e]}(t,"position");i||"static"!==n||(t.style.position="relative");const r=h.createElement("div");this.aH=r,this.rH=h.createElement("div"),this.lH=h.createElement("div"),this.hH=h.createElement("div"),this.vH=h.createElement("div"),xk(this.rH),xk(this.hH),Dk(this.lH),function(t){Dk(t),t.style.width="200%",t.style.height="200%"}(this.vH),r.appendChild(this.rH),r.appendChild(this.hH),this.rH.appendChild(this.lH),this.hH.appendChild(this.vH),t.appendChild(r),this.rH.addEventListener("scroll",this.oH),this.hH.addEventListener("scroll",this.oH),s&&s.addEventListener("resize",this.uH),this.oH()}},Bk=class extends d{wn(t){this.iH||("function"==typeof qh.ResizeObserver?this.iH=new kk(this.Se,this.sH):this.iH=new Nk(this.Se,this.sH,t))}bn(){this.Lo(),this.iH&&(this.iH.bn(),this.iH=void 0)}get JU(){return this.iH?this.iH.JU:0}get tH(){return this.iH?this.iH.tH:0}constructor(t){super(),this.iH=void 0,this.sH=(t,e)=>{this.To(new Sk(t,e))},this.Se=t}},Ok=class extends Ci{constructor(){super(qs.oa)}};var Mk,fh=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(let e of t)if(e[1]in h)return{gH:e[0],mH:e[1],wH:e[2],pH:e[3],Ke:e[4],yH:e[5]}}(),Lk=class extends Ci{constructor(){super(qs.fa)}},Fk=class t extends d{static ea(t){return Boolean(fh&&h[fh.pH]&&fh.gH in t)}bo(){const t=this.Se[fh.gH]();t&&t.then?t.then(this.AH,this.bH):(h.removeEventListener(fh.yH,this.bH),h.addEventListener(fh.yH,this.bH))}Co(){const t=h[fh.mH]();t&&t.then?t.then(this.AH,this.bH):(h.removeEventListener(fh.yH,this.bH),h.addEventListener(fh.yH,this.bH))}dL(){const t=this.cs,e=this.Se===h[fh.wH];this.cs=e,t!==e&&this.To(new Ok)}fL(){this.To(new DS)}bn(){this.Lo(),h.removeEventListener(fh.Ke,this.AH),h.removeEventListener(fh.yH,this.bH)}constructor(e){super(),this.cs=!1,this.AH=()=>this.dL(),this.bH=()=>this.fL(),this.Se=e,this.sa=t.ea(e),h.addEventListener(fh.Ke,this.AH),this.dL()}},Uk=class t extends d{static ea(t){return Bp.xk&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}bo(){this.Se.webkitSupportsPresentationMode&&this.Se.webkitSupportsPresentationMode("fullscreen")?Bp.xk?requestAnimationFrame((()=>this.Se.webkitSetPresentationMode("fullscreen"))):this.Se.webkitSetPresentationMode("fullscreen"):this.Se.webkitEnterFullscreen()}Co(){this.Se.webkitSupportsPresentationMode&&this.Se.webkitSupportsPresentationMode("inline")?this.Se.webkitSetPresentationMode("inline"):this.Se.webkitExitFullscreen()}dL(){const t=this.cs;let e;e=this.Se.webkitPresentationMode?"fullscreen"===this.Se.webkitPresentationMode:Boolean(this.Se.webkitDisplayingFullscreen),this.cs=e,t!==e&&this.To(new Ok)}bn(){this.Lo(),this.Se.removeEventListener("webkitbeginfullscreen",this.AH),this.Se.removeEventListener("webkitendfullscreen",this.AH),this.Se.removeEventListener("webkitpresentationmodechanged",this.AH)}constructor(e){super(),this.cs=!1,this.AH=()=>this.dL(),this.Se=e,this.sa=t.ea(e),this.Se.addEventListener("webkitbeginfullscreen",this.AH),this.Se.addEventListener("webkitendfullscreen",this.AH),this.Se.addEventListener("webkitpresentationmodechanged",this.AH),this.dL()}},Hk=class extends d{get sa(){return!!this.TH&&this.TH.sa}get cs(){return this.uL}bo(){this.TH?this.TH.bo():this.To(new DS)}Co(){for(const t of this.SH)t.cs&&t.Co()}EH(t){this.TH=t}kH(t){this.SH.push(t),t.kn(qs.oa,this.dL),t.kn(qs.aa,this.Rs),this.dL()}PH(t){so(this.SH,t),t.pn(qs.oa,this.dL),t.pn(qs.aa,this.Rs)}IH(){for(const t of this.SH)if(t.cs)return!0;return!1}ir(){this.TH=void 0,this.uL=!1;const t=this.SH.slice();for(const e of t)this.PH(e),e.bn();this.dL()}bn(){this.Lo(),this.ir()}constructor(...t){super(...t),this.SH=[],this.TH=void 0,this.uL=!1,this.dL=()=>{const t=this.uL,e=this.IH();t!==e&&(this.uL=e,this.To(new Ok))}}},Wk=class extends d{get sa(){return!!this.RH&&this.CH.sa}get cs(){return this.CH.cs}bo(){this.RH&&this.CH.bo()}Co(){this.CH.Co()}xH(){this.CH.kn([qs.oa,qs.fa],this.dL),this.CH.kn(qs.aa,this.Rs)}DH(){this.CH.pn([qs.oa,qs.fa],this.dL),this.CH.pn(qs.aa,this.Rs)}Kn(){const t=this.CH,e=this.t.Gd();if(t===e)return;this.ua=!0;const i=this.cs,s=this.sa;i&&this.Co(),this.DH(),this.CH=e,this.xH(),i&&!this.cs&&this.sa?this.bo():this.Co(),this.ua=!1,s!==this.sa&&this.To(new Lk),i!==this.cs&&this.To(new Ok)}bn(){this.Lo(),this.DH(),this.t.pn(r.L_,this.NH)}constructor(t,e){super(),this.ua=!1,this.NH=()=>this.Kn(),this.dL=t=>{this.ua||this.To(t)},this.t=t,this.RH=e,this.CH=new eu,this.xH(),this.t.kn(r.L_,this.NH),this.Kn()}},qk=class extends Xs{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=t}};function Vk(t){return function(t){return new cd({start(e){for(const i of t)e.enqueue(i);e.close()}})}([t])}function ae(t){return Vk(function(t){return new S(t)}(t))}function ct(t,e){return function(t,e){let i=e;const s=t.getReader(),n=new Os,r=()=>{o();const t=new Sr;s.cancel(t).catch($d),n.dI(t)},o=()=>{i&&(i.cl(r),i=void 0)};i&&(i.$c?r():i.ul(r));const h=[],a=t=>t.done?(o(),Promise.resolve(h)):(h.push(t.value),Promise.resolve(s.read()).then(a));return Promise.resolve(s.read()).then(a).then((t=>{o(),n.lI(t)}),(t=>{o(),n.dI(t)})),n.fI}(t,e).then((t=>Y_(t).buffer))}function zk(t,e){let i=e;const{readable:s,writable:n}=new Da,r=n.getWriter(),o=()=>{i&&i.vl()};return r.closed.then(o,o),t.then((t=>(i=void 0,r.releaseLock(),t.pipeTo(n).catch($d))),(t=>(i=void 0,r.releaseLock(),n.abort(t).catch($d)))),s}function Xk(t){const{readable:e,writable:i}=new Da;return t.pipeTo(i,{preventCancel:!0}).catch((e=>{let i;i=ya(e)?e[0]===e[1]||Lr(e[0])&&Lr(e[1])?e[0]:new qk(e):e,t.cancel(i).catch($d)})),e.tee()}function Gk(t){return Li(new S(t))}function Qk(t){return Wv(t).buffer}!function(t){t[t.cE=0]="cE",t[t.BH=1]="BH"}(Mk||(Mk={}));var Kk="content-type",jk="text/plain;charset=UTF-8",hn=class{rN(t){return this.VE(t).then(JSON.parse)}FD(t,e){switch(t){case Ct.aE:return this.bN(e);case Ct.uE:return this.rN(e);case Ct.cE:return this.OH();case Ct.gA:return this.VE(e);default:throw new p}}};function Yk(t,e,i){if(t instanceof hn)return t;if(t instanceof cd)return function(t,e){return new Jk({l_:0,OH:t,YB:Zk(e)})}(t,i);const s=Zk(i),n=Promise.resolve(t).then((t=>function(t,e){if(t){if("string"==typeof t)return{l_:Ct.gA,RE:t,YB:e||jk};if(t instanceof ArrayBuffer||K_(t))return{l_:Ct.aE,RE:rP(t),YB:e};if(B(t)||ya(t))return{l_:Ct.uE,RE:t,YB:e};throw new p("Unsupported BodyInit type")}return{l_:Ct.gA,RE:null,YB:e}}(t,s)));return new Jk({l_:1,fI:n,MH:e})}function Zk(t){return(t.get(Kk)||"").toLowerCase()}var Jk=class t extends hn{get LH(){return this.FH}UH(){return this.HH.fI}VE(t){return this.WH($k,t)}rN(t){return this.WH(eP,t)}bN(t){return this.WH(sP,t)}OH(){return this.qH(function(t){return 0===t.l_?t.OH:zk(t.fI.then(nP).then(ae),t.MH)}(this.VH))}WH(t,e){if(this.FH)return Promise.reject(new p("Already used"));this.FH=!0;const i=t(this.VH,e);return this.HH.wl(i.then($d)),i}qH(t){if(this.FH)throw new p("Already used");if(t.locked)throw new p("Body stream is locked");this.FH=!0;const e=new Da,i=Promise.resolve(t.pipeTo(e.writable));return this.HH.wl(i),e.readable}zH(t){this.VH=t,1===t.l_&&t.fI.catch($d)}XH(){if(this.FH)throw new p("Already used");const e=function(t){if(0===t.l_){const[e,i]=t.OH.tee();return[{l_:t.l_,OH:e,YB:t.YB},{l_:t.l_,OH:i,YB:t.YB}]}{const[e,i]=t.MH.yl();return[{l_:t.l_,fI:t.fI,MH:e},{l_:t.l_,fI:t.fI,MH:i}]}}(this.VH),i=e[0],s=e[1];return this.zH(i),new t(s)}constructor(t){super(),this.FH=!1,this.HH=new Os,this.HH.fI.catch($d),this.zH(t)}};function $k(t,e){return 0===t.l_?ct(t.OH,e).then(Gk):(e&&t.MH.wl(e),oa(t.fI.then(tP),t.MH))}function tP(t){switch(t.l_){case Ct.gA:return Promise.resolve(t.RE||"");case Ct.aE:return Promise.resolve(t.RE).then(Gk);case Ct.uE:return Promise.resolve(t.RE).then(JSON.stringify)}}function eP(t,e){return 0===t.l_?$k(t,e).then(JSON.parse):(e&&t.MH.wl(e),oa(t.fI.then(iP),t.MH))}function iP(t){return t.l_===Ct.uE?Promise.resolve(t.RE):tP(t).then(JSON.parse)}function sP(t,e){return 0===t.l_?ct(t.OH,e):(e&&t.MH.wl(e),oa(t.fI.then(nP),t.MH))}function nP(t){switch(t.l_){case Ct.aE:return Promise.resolve(t.RE);case Ct.gA:case Ct.uE:return tP(t).then(Qk)}}function rP(t){return t instanceof ArrayBuffer?t:hh(fi(t)).buffer}var oP=class extends hn{get LH(){return this.GH.LH}UH(){return this.GH.UH()}VE(t){return this.GH.VE(t)}rN(t){return this.GH.rN(t)}bN(t){return this.GH.bN(t)}OH(t){return this.GH.OH(t)}XH(){return this.GH.XH()}constructor(t){super(),this.GH=t}};function Fe(t){return t.ZS>=200&&t.ZS<=299||304===t.ZS}var Es=class t extends oP{Xm(t){return this.FD(this.DE,t)}Um(){return new t({Xm:this.XH(),GS:this.GS},this)}constructor(t,e){let i,s,n,r,o;e?(i=e.CE,s=e.DE,n=e.ZS,r=e.oN,o=e.QH):(i=[],s=Ct.gA,n=200,r="OK",o=!1);const h=t.GS,a=new ou(t.CE||i),u=t.DE||s,c=t.zE||(e&&e.GS===h?e.zE:h.YS),l=e?e.GH:null;super(Yk(void 0!==t.Xm?t.Xm:l,t.MH||new Zs,a)),this.CE=a,this.GS=h,this.zE=c,this.DE=u,this.ZS=void 0!==t.ZS?t.ZS:n,this.oN=void 0!==t.oN?String(t.oN):r,this.QH=t.QH||o}},hP=class{GS(t){const e=function(t){return new Es({Xm:null,CE:{},GS:t,zE:t.YS,DE:t.DE,ZS:0,oN:r.K_})}(new Yt(t));return Promise.resolve(e)}IU(t){}bn(){}};var aP=class t{static get KH(){return t.jH||(t.jH=new t(new hP)),t.jH}GS(t){const e=this.YH(t);return this.ZH.GS(e)}IU(t){return this.ZH.IU(this.JH(t))}YH(e){let i=new Yt(e);if(!this.$H){const e=t.tW(i.YS);i=new Yt({YS:e},i)}return i}JH(e){let i=e.YS;return this.$H||(i=t.tW(i)),{YS:i,RE:e.RE}}static tW(t){return f.eW&&bt(t,"http://")?t.replace(":","s:"):t}bn(){this.ZH.bn()}constructor(t,e=!0){this.ZH=t,this.$H=e}};function uP(t){let e;return{get url(){return t.YS},get method(){return t.xE},get headers(){return e||(e=t.CE.lE()),e},get body(){return t.RE},get useCredentials(){return t.ME},get type(){return t.l_},get subType(){return t.BE},get mediaType(){return t.OE},get responseType(){return t.DE}}}function cP(t){switch(t.toLowerCase()){case"arraybuffer":return Ct.aE;case"json":return Ct.uE;case"stream":return Ct.cE;default:return Ct.gA}}function lP(t){switch(t.toUpperCase()){case"POST":return Fr.POST;case"PUT":return Fr.PUT;case"DELETE":return Fr.DELETE;case"HEAD":return Fr.HEAD;case"OPTIONS":return Fr.OPTIONS;default:return Fr.GET}}function dP(t){switch(t.toLowerCase()){case"manifest":return ro._E;case"segment":return ro.vE;case"preload-hint":return ro.gE;case"content-protection":return ro.mE;default:return ro.wA}}function fP(t){switch(t.toLowerCase()){case"initialization-segment":return Ru.wE;case"fairplay-license":return Ru.pE;case"fairplay-certificate":return Ru.yE;case"widevine-license":return Ru.AE;case"widevine-certificate":return Ru.bE;case"playready-license":return Ru.TE;case"clearkey-license":return Ru.SE;case"aes128-key":return Ru.EE;default:return Ru.wA}}function _P(t){switch(t.toLowerCase()){case"audio":return Au.Cm;case"video":return Au.Rm;case"text":return Au.gA;case"image":return Au.mA;default:return Au.wA}}aP.jH=void 0;var Ie=class{get iW(){return this.sW.fI}get ma(){return this.vf||(this.vf=this.nW()),this.vf}get rW(){return this.oW}get hW(){return!this.oW}get aW(){return this.uW>0}get KS(){return this.jS}cw(){this.oW=!0,this.sW.lI(null)}cW(){this.sW.dI(new qk(this.lW))}dW(t){if(!this.hW)throw new p("Cannot respond more than once");if(!or(t))throw new p("Expected valid response");this.jS=this.fW(t),this.cw()}_W(){try{const t=this.vW(this.ma);t?this.gW(t):this.aW||this.rW||this.cw()}catch(t){this.lW.push(t),this.cW()}}gW(t){if(this.rW)throw new v("Request has been redirected or a response already exists");if(le(t))this.mW(t);else{if("function"!=typeof t)throw new p("Expected promise or function");{const e=new Os,i=t=>{t?e.dI(t):e.lI(void 0)};try{const s=t(i);le(s)&&e.wl(s)}catch(t){e.dI(t)}this.mW(e.fI)}}}async mW(t){try{this.uW++,await t,this.uW--,this.aW||this.rW||(this.lW.length?this.cW():this.cw())}catch(t){this.uW--,this.lW.push(t),this.aW||this.rW||this.cW()}}constructor(t,e){this.wW=t,this.vW=e,this.sW=new Os,this.lW=[],this.vf=void 0,this.oW=!1,this.jS=void 0,this.uW=0}},me=class t extends Ie{get RE(){return this.pW}get CE(){return this.wW.CE}get GS(){return this.wW.GS}get KS(){return this.jS}get ZS(){return this.wW.ZS}get oN(){return this.wW.oN}get YS(){return this.wW.zE}static yW(t,e,i){const s=void 0===t.body?i:t.body;return new Es({Xm:s,GS:e.GS,DE:e.GS.DE,CE:t.headers,ZS:t.status,oN:t.statusText,zE:t.url,QH:!0},e)}nW(){return function(t){let e;const i=uP(t.GS);return{get closed(){return!t.hW},get request(){return i},get url(){return t.YS},get status(){return t.ZS},get statusText(){return t.oN},get headers(){return e||(e=t.CE.lE()),e},get body(){return t.RE},respondWith:e=>t.dW(e),waitUntil:e=>t.gW(e)}}(this)}fW(e){return t.yW(e,this.wW,this.pW)}constructor(t,e,i){super(t,e),this.pW=i,this._W()}},vP=class extends Ie{get RE(){return this.wW.RE}get hW(){return this.AW&&!this.oW}get CE(){return this.wW.CE}get xE(){return this.wW.xE}get bW(){return this.TW}get KS(){return this.jS}get DE(){return this.wW.DE}get JS(){return this.wW.JS}get NE(){return this.wW.NE}get fl(){return this.wW.fl}get l_(){return this.wW.l_}get BE(){return this.wW.BE}get OE(){return this.wW.OE}get YS(){return this.wW.YS}get ME(){return this.wW.ME}get LE(){return this.wW.LE}get h_(){return this.wW.h_}nW(){return function(t){let e;return{get url(){return t.YS},get method(){return t.xE},get headers(){return e||(e=t.CE.lE()),e},get body(){return t.RE},get closed(){return!t.hW},get useCredentials(){return t.ME},get type(){return t.l_},get subType(){return t.BE},get mediaType(){return t.OE},get responseType(){return t.DE},redirect:e=>t.SW(e),respondWith:e=>t.dW(e),waitUntil:e=>t.gW(e)}}(this)}fW(t){const e=this.wW.RE,i=new Es({Xm:e,CE:{},GS:this.wW,zE:this.wW.YS,DE:this.wW.DE,ZS:200,oN:"OK"});return me.yW(t,i,e)}SW(t){if(!this.hW)throw new p("Cannot redirect, already redirected or has a response");let e;e=Ts(t)?{url:t}:t,this.TW=function(t,e){return new Yt({YS:void 0===t.url?e.YS:t.url,xE:void 0!==t.method?lP(t.method):void 0,CE:t.headers,RE:t.body,ME:t.useCredentials,l_:void 0!==t.type?dP(t.type):void 0,BE:void 0!==t.subType?fP(t.subType):void 0,OE:void 0!==t.mediaType?_P(t.mediaType):void 0,DE:void 0!==t.responseType?cP(t.responseType):void 0},e)}(e,this.wW),this.cw()}constructor(t,e,i){super(t,e),this.TW=void 0,this.AW=i,this._W()}};var hu,gP=class extends aP{EW(t){this.kW.EW(t)}PW(t){this.kW.PW(t)}IW(t){this.kW.IW(t)}RW(t){this.kW.RW(t)}xW(t){this.kW.xW(t)}constructor(t,e=!0){const i=new mP(t);super(i,e),this.kW=i}},mP=class{async GS(t){let e;try{e=await this.DW(t,t.fl)}catch(e){if(e instanceof pu)return await this.NW(e,t.fl);throw e}if(e=await this.BW(e,t.fl),Fe(e))return e;throw new st(e)}IU(t){return this.ZH.IU(t)}async DW(t,e){gi(e);let i,s=t;for(const t of this.OW.slice()){gi(e);const n=new vP(s,t,!i);if(!n.rW)try{await n.iW}catch(t){0;continue}n.bW&&!i?s=n.bW:n.KS&&!i&&(i=n.KS)}return i||this.ZH.GS(s)}async NW(t,e){let i;i=t instanceof st?t.KS:new Es({Xm:null,GS:t.GS,ZS:0,oN:""});const s=await this.BW(i,e);if(s===i)throw t;if(Fe(s))return s;throw new st(s)}async BW(t,e){let i=t;for(const t of this.MW.slice()){gi(e);const s=await Promise.resolve(i.Um().Xm(e)),n=new me(i,t,s);if(!n.rW)try{await n.iW}catch(t){0;continue}i=n.KS||i}return i}EW(t){this.OW.unshift(t)}PW(t){this.OW.push(t)}IW(t){so(this.OW,t)}RW(t){this.MW.unshift(t)}xW(t){so(this.MW,t)}bn(){this.ZH.bn(),wr(this.OW),wr(this.MW)}constructor(t){this.OW=[],this.MW=[],this.ZH=t}},wP=class extends d{get ma(){return this.vf||(this.vf=function(t){return{get online(){return t._d},get estimator(){return function(t){return{get bandwidth(){return t.wB},get roundTripTime(){return t.pB}}}(t.LW)},setEstimator(e){t.FW(function(t){if(!t)return;return{get wB(){return Af(t.bandwidth)},get pB(){return Af(t.roundTripTime)},yB:e=>function(t){if(!t)return;return{UW(e){t.markRequestStart(e)},HW(e){t.markResponseStart(e)},WW(e,i){t.markResponseData(e,i)},qW(e){t.markResponseEnd(e)}}}(t.createMeasurer(uP(e)))}}(e))},addRequestInterceptor(e){t.EW(e)},removeRequestInterceptor(e){t.IW(e)},addResponseInterceptor(e){t.RW(e)},removeResponseInterceptor(e){t.xW(e)},addEventListener(e,i){t.kn(e,i)},removeEventListener(e,i){t.pn(e,i)}}}(this)),this.vf}get _d(){return this.VW._d}get LW(){return this.XM.LW}FW(t){this.XM.FW(t)}EW(t){this.qE.EW(t)}IW(t){this.qE.IW(t)}RW(t){this.qE.RW(t)}xW(t){this.qE.xW(t)}bn(){this.Lo(),this.VW.pn(r.j_,this.zW),this.VW.pn(r.K_,this.XW)}constructor(t,e,i){super(e),this.VW=t,this.qE=e,this.XM=i,this.zW=t=>{this.To(t)},this.XW=t=>{this.To(t)},this.VW.kn(r.j_,this.zW),this.VW.kn(r.K_,this.XW)}};!function(t){t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth"}(hu||(hu={}));function pP(t,e,i,s,n,r){const o=[];let h=t-b.max(r,1),a=t+n;if(e&&i){const t=Eo(i,1,5),s=e-t;h=b.min(h,s);const n=e+i+t;a=b.max(a,n)}0!==h&&s.bM(0,h)&&o.push([0,h]);return s.bM(a,1/0)&&o.push([a,1/0]),o}function yP(t){return t instanceof v&&"QuotaExceededError"===t.name}var AP={type:hu.BANDWIDTH};function bP(t){const e=$a(AP);return Ts(t)?e.type=TP(t):or(t)&&function(t){switch(t){case hu.PERFORMANCE:case hu.QUALITY:case hu.BANDWIDTH:return!0;default:return!1}}(t.type)&&(e.type=TP(t.type)),or(t)&&or(t.metadata)&&(e.metadata=function(t){const e={},i=ve(t.bitrate);return j(i)||(e.bitrate=i),e}(t.metadata)),e}function TP(t){switch(t){case"bandwidth":return hu.BANDWIDTH;case"performance":return hu.PERFORMANCE;case"quality":return hu.QUALITY}}var SP=class extends Ci{constructor(t){super("GW"),this.QW=t}},EP=class extends Ci{constructor(t){super("KW"),this.jW=t}},kP=class extends Ci{constructor(t){super("YW"),this.ZW=t}},PP=class extends d{JW(t){this.$W=t}get tq(){switch(this.iq.type){case hu.PERFORMANCE:return 0;case hu.QUALITY:return 1/0;case hu.BANDWIDTH:return this.iq.metadata&&void 0!==this.iq.metadata.bitrate?this.iq.metadata.bitrate:nh.zP.aB();default:return nh.zP.aB()}}get ma(){return this.vf}get jW(){return this.iq}set jW(t){this.iq=t,this.To(new EP(t))}get QW(){return this.nq}set QW(t){this.nq=t,this.To(new SP(t))}get rq(){return b.min(this.nq,this.oq)}get ZW(){return this.hq}set ZW(t){this.hq=t,this.To(new kP(t))}get aq(){return this.oq}get LW(){var t;return null!=(t=this.uq)?t:this.$W.KB}FW(t){this.uq=t}cq(t){let e=b.min(t,.8*this.oq);if(e=b.max(10,e),this.oq===e)return!1;const i=this.rq;this.oq=e;const s=this.rq;return s!==i&&this.To(new SP(s)),!0}get lq(){return this.dq}set lq(t){this.dq=t}constructor(...t){super(...t),this.vf=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.jW)},set strategy(e){t.jW=bP(e)},get targetBuffer(){return t.QW},set targetBuffer(e){const i=ve(e);j(i)||(t.QW=i)},get bufferLookbackWindow(){return t.ZW},set bufferLookbackWindow(e){const i=ve(e);j(i)||(t.ZW=i<=0?30:i)},get maxBufferLength(){return t.aq},get clearBufferWhenSettingTargetQuality(){return t.lq},set clearBufferWhenSettingTargetQuality(e){t.lq=$u(e)}}}(this),this.iq=AP,this.nq=20,this.hq=30,this.oq=1/0,this.dq=!1,this.uq=void 0}},IP=class extends nu{pa(){return new RP}constructor(){super("If")}},RP=class extends Ci{constructor(){super("change")}},CP=class extends d{bn(){this.Lo();for(const t of this.lU)this.fq.pn(t,this._q)}constructor(t,e,i){super(i),this._q=t=>{af(t)&&Ai((()=>{this.To(t.ma)}))},this.fq=t,this.lU=e;for(const t of this.lU)this.fq.kn(t,this._q)}},xP=class extends Ro{bn(){this.Lo(),this.fq.Nl(this._q)}constructor(t,e){super(e),this._q=t=>{af(t)&&Ai((()=>{this.To(t.ma)}))},this.fq=t,this.fq.Il(this._q)}};var DP=class extends Ro{get ob(){return this.pb}set ob(t){if(this.hb<=t)throw new v("Start time of a clip should be smaller than the end time.");this.pb!==t&&(this.pb=t,this.To(new IP))}get hb(){return this.bb}set hb(t){if(t<=this.ob)throw new v("End time of a clip should be larger than the start time.");this.bb!==t&&(this.bb=t,this.To(new IP))}get ma(){return this.vf||(this.vf=function(t){let e,i={get startTime(){return t.ob},set startTime(e){t.ob=e},get endTime(){return t.hb},set endTime(e){t.hb=e},addEventListener(t,i){e.kn(t,i)},removeEventListener(t,i){e.pn(t,i)}};return e=new xP(t,i),i}(this)),this.vf}ir(){0===this.pb&&this.bb===1/0||(this.pb=0,this.bb=1/0,this.To(new IP))}vq(){return new ri([this.ob,this.hb],[!0,!0])}constructor(...t){super(...t),this.pb=0,this.bb=1/0}},NP=class t extends ci{Gl(t){const e=this.gq.vq().lM(t);super.Gl(e),this.mq()}Yl(){return super.Yl()||this.wq}get pq(){return this.Cd().length?this.Cd():this.gq.vq().ks()}Cd(){return ri._n(super.Cd()).Cn(this.gq.vq()).ks()}Jd(){this.Yl()?this.Gl(this.pq.start(0)):this.yq(),super.Jd(),this.mq()}async ba(t,e){gi(e),this.wq=!1,this.gq.ir(),await super.ba(t,e)}bn(){return this.gq.pn("If",this.Aq),this.Ml.pn(r.vv,this.vO),this.bq(),super.bn()}hf(t){switch(t.type){case r.rv:return this.To(t),this.Tq(),!0;case r.ev:case r.B_:return this.To(t),this.Sq(),!0;case r.M_:if(this.Eq)return!0}return super.hf(t)}get Eq(){return this.gq.hb<this.ct}bq(){this.kq&&(Ee(this.kq),this.kq=void 0)}mq(){const e=this.zl,i=this.Eq&&e>=this.gq.hb-t.MT;this.wq&&!i?(this.wq=!1,this.md&&this.Jd()):this.wq||!i||this.xd||this.Pq||(this.wq=!0,this.To(new X(e)),this.Zd())}yq(){if(this.ct===1/0)return;const e=this.pq,i=ri._n(e).lM(this.zl);_e(this.zl,i,t.MT)||this.Gl(i)}constructor(e,i){super(e),this.wq=!1,this.kq=void 0,this.Pq=!1,this.Aq=()=>{this.yq(),this.mq()},this.vO=()=>{this.bq(),this.mq();this.Eq&&this.zl>=this.gq.hb-t.Iq&&!this.jl&&(this.kq=Ms(this.vO))},this.Tq=()=>{this.Pq=!0},this.Sq=()=>{this.Pq&&(this.Pq=!1,this.mq())},this.gq=i,this.gq.kn("If",this.Aq),this.Ml.kn(r.vv,this.vO)}};NP.Iq=1,NP.MT=.001;var BP=class{get Rq(){return this.Cq}set Rq(t){this.Cq=t}constructor(){this.Cq=!1}},OP=class extends ci{Yl(){return!this.Cq.Rq&&super.Yl()}Zd(){this.xq=!0,super.Zd()}Jd(){this.xq=!1,super.Jd()}hf(t){if(this.Cq.Rq)switch(t.type){case r.M_:return this.zl=0,this.xq||(this.xd?this.Dq=!0:this.Jd()),!0;case r.ev:this.Dq&&(this.Dq=!1,this.Jd());break;case r.Ch:if(this.Dq||super.Yl())return!0}return super.hf(t)}constructor(t,e){super(t),this.Dq=!1,this.xq=!1,this.Cq=e}};var MP=class{get ma(){return this.vf}get CA(){return this.Ko.hd.CA}get DA(){return this.Ko.hd.DA}get RA(){return this.Ko.hd.RA}get Nq(){throw new v("Not implemented")}get Bq(){throw new v("Not implemented")}get NA(){return this.Ko.hd.NA}get xA(){return this.Ko.hd.xA}get BA(){return this.Ko.hd.BA}constructor(t){this.Ko=t,this.vf=function(t){return{get currentBandwidthEstimate(){return t.DA},get corruptedVideoFrames(){return t.CA},get droppedVideoFrames(){return t.RA},get totalBytesLoaded(){return t.NA},get bufferedSegments(){return t.BA}}}(this)}};function LP(t){if(!t||!he(t))return{RA:0,CA:0,xA:0,DA:0,NA:0,BA:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const e=t.getVideoPlaybackQuality();return{RA:e.droppedVideoFrames,CA:e.corruptedVideoFrames||0,xA:e.totalVideoFrames}}return{RA:t.webkitDroppedFrameCount||0,CA:0,xA:t.webkitDecodedFrameCount||0}}var FP=class extends nu{pa(){return new UP}constructor(){super("Oq")}},UP=class extends Ci{constructor(){super("castingchange")}};var HP=class extends d{get Mq(){var t,e;return(null==(t=this.Lq)?void 0:t.Mq)||(null==(e=this.Fq)?void 0:e.Mq)||!1}get Uq(){return this.Lq}get Hq(){return this.Fq}Wq(t){this.Lq=t,this.qq(t)}Vq(t){this.Fq=t,this.qq(t)}qq(t){t.kn("statechange",this.zq)}Xq(t){t.pn("statechange",this.zq)}get ma(){return this.vf||(this.vf=function(t){let e;const i={get casting(){return t.Mq},get airplay(){var e;return null==(e=t.Uq)?void 0:e.ma},get chromecast(){var e;return null==(e=t.Hq)?void 0:e.ma},addEventListener(t,i){e.kn(t,i)},removeEventListener(t,i){e.pn(t,i)}};return e=new CP(t,["Oq"],i),i}(this)),this.vf}bn(){this.Lo(),this.Lq&&(this.Xq(this.Lq),this.Lq=void 0),this.Fq&&(this.Xq(this.Fq),this.Fq=void 0)}constructor(...t){super(...t),this.Lq=void 0,this.Fq=void 0,this.Gq=!1,this.vf=void 0,this.zq=()=>{const t=this.Gq,e=this.Mq;t!==e&&(this.Gq=e,this.To(new FP))}}},Ut=class{static async Qq(t,e){try{const i=new Yt({YS:t,DE:Ct.gA,xE:Fr.GET}),s=await e.GS(i);return(await s.Xm()).trim()}catch(t){return void Lr(t)}}static Kq(t){try{const e=QE(t);return new pe(e.key,e.domains_page,e.domains_source,e.expiration_date,e.features,e.customer_id,e.generation_date,e.sdks,e.send_impression)}catch(t){throw new io(Ot.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static jq(t){void 0===t&&(t=Lo.dh),f.Uv("The baked-in license is used. Please update the configuration with your license.");const e=t.cF("F2b-iL'[FL[S"),i=JSON.parse('["F$(:_L50F|aY"]').map((e=>t.cF(e))),s=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map((e=>t.cF(e))),n=Number(new Date(Number(t.cF('COD|aHpHa:p3Ceo3Co""')))),r=JSON.parse("[]").map((e=>t.cF(e)));return new pe(e,i,s,n,r)}static convertLicenseToDummyLicense(t){return new pe(t.wF,t.pF,t.yF,864e13,t.bF,t.TF,Date.now(),t.EF,t.kF)}},Mi=class t{static hF(){return t.zP||(t.zP=WP.ux()?new WP:new oe),t.zP}static cI(e){t.hF().cI(e)}static oF(){t.hF().oF()}static hI(e){return t.hF().hI(e)}static sB(e,i){t.hF().sB(e,i)}static Yq(e){const i=t.hI(e);if(void 0!==i)return w(i)}static Zq(e){return"true"===t.hI(e)}};Mi.zP=void 0;var WP=class extends Mi{static ux(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}cI(t){self.localStorage.removeItem(t)}oF(){self.localStorage.clear()}hI(t){var e;return null!=(e=self.localStorage.getItem(t))?e:void 0}sB(t,e){self.localStorage.setItem(t,e)}},qP="https://validate.theoplayer.com/1/",VP=72e5,zP=b.floor(14399999*b.random()-VP),XP="THEOplayer.license",GP=class{async Jq(){const t=await this.$q(this.tV.license,this.tV.licenseUrl);this.gU.eV(t)}async $q(t,e){let i,s=e;t?i=Ut.Kq(t):s||(i=Ut.jq()),s||(s=qP+i.wF);const n=this.iV();let r;if(i&&(r=this.sV.MF(i),r===Oe.vF)){if(this.nV(i.AF)&&this.nV(null==n?void 0:n.AF)){const t=await this.rV(s);if(t)return t}return i}if(n){if(this.sV.MF(n)===Oe.vF){if(this.nV(null==n?void 0:n.AF)){const t=await this.rV(s);if(t)return t}return n}Mi.cI(XP)}const o=await Ut.Qq(s,this.qE);let h;if(o){h=Ut.Kq(o);if(this.sV.MF(h)===Oe.vF)return Mi.sB(XP,o),h;Mi.cI(XP)}else if(!this.qF&&i&&r===Oe.gF&&s===qP+i.wF)return Ut.convertLicenseToDummyLicense(i);if(!i&&!h)throw new io(Ot.LICENSE_ERROR,"The given license is invalid!");this.oV(null!=i?i:h,new io(Ot.LICENSE_ERROR,"The given license is invalid!"))}async CF(t){let e=await this.gU.vU();if(this.nV(e.AF)){var i;const t=null!=(i=this.tV.licenseUrl)?i:qP+e.wF,s=await this.rV(t);s&&(this.gU.eV(s),e=s)}try{const i=this.sV.MF(e);if(i===Oe.mF){const t=ZE.PF;throw new io($E(t),Eu.BF(t))}if(i===Oe.gF){const t=ZE.gF;throw new io($E(t),Eu.BF(t))}this.sV.CF(t,e)}catch(t){this.hV(t)}}async OF(t){const e=await this.gU.vU();try{this.sV.OF(t,e)}catch(t){this.hV(t)}}async rV(t){try{const e=await Ut.Qq(t,this.qE);if(void 0===e)return;const i=Ut.Kq(e);return this.sV.MF(i)===Oe.vF?(Mi.sB(XP,e),i):void 0}catch(t){return}}nV(t){return!t||Number(new Date)+2592e5+zP>=t}iV(){const t=Mi.hI(XP);if(t)return Ut.Kq(t)}oV(t,e){this.gU.eV(t),this.hV(e)}hV(t){throw OE(t.message),this.aV.pU(t.message),t}constructor(t,e,i,s,n,r){this.qE=t,this.sV=e,this.aV=i,this.gU=s,this.tV=n,this.eR=r,this.qF=nk(r)}},QP=class{eV(t){this.uV=t,this.cV.lI()}get lV(){return this.uV}async vU(){return this.uV?Promise.resolve(this.uV):(await this.cV.fI,this.uV)}constructor(){this.cV=new Os}},KP=class extends nu{pa(){return new jP}constructor(){super("If")}},jP=class extends Ci{constructor(){super("change")}};function YP(t){let e;const i={get fontFamily(){return t.dV},set fontFamily(e){t.dV=e},get fontColor(){return t.fV},set fontColor(e){t.fV=e},get fontSize(){return t._V},set fontSize(e){t._V=e},get backgroundColor(){return t.vV},set backgroundColor(e){t.vV=e},get windowColor(){return t.gV},set windowColor(e){t.gV=e},get edgeStyle(){return t.mV},set edgeStyle(e){t.mV=e},get marginTop(){return t.wV},set marginTop(e){t.wV=e},get marginBottom(){return t.pV},set marginBottom(e){t.pV=e},get marginLeft(){return t.yV},set marginLeft(e){t.yV=e},get marginRight(){return t.AV},set marginRight(e){t.AV=e},addEventListener(t,i){const s=Wo(t,ai);e.kn(s,i)},removeEventListener(t,i){const s=Wo(t,ai);e.pn(s,i)}};return e=new hf(i),t.kn(["If"],(t=>e.To(t.ma))),i}var ZP={dV:void 0,fV:void 0,_V:void 0,vV:void 0,gV:void 0,mV:void 0,bV:void 0,wV:void 0,pV:void 0,yV:void 0,AV:void 0},Nu="THEOplayer.textTrackStyle.",JP=class t extends d{get TV(){return this.SV}get dV(){return this.SV.dV}set dV(t){this.Kn({dV:t})}get fV(){return this.SV.fV}set fV(t){this.Kn({fV:t})}get _V(){return this.SV._V}set _V(t){this.Kn({_V:t})}get vV(){return this.SV.vV}set vV(t){this.Kn({vV:t})}get gV(){return this.SV.gV}set gV(t){this.Kn({gV:t})}get mV(){return this.SV.mV}set mV(t){this.Kn({mV:t})}get bV(){return this.SV.bV}get wV(){return this.SV.wV}set wV(t){this.Kn({wV:t})}get pV(){return this.SV.pV}set pV(t){this.Kn({pV:t})}get AV(){return this.SV.AV}set AV(t){this.Kn({AV:t})}get yV(){return this.SV.yV}set yV(t){this.Kn({yV:t})}get ma(){return this.vf||(this.vf=YP(this)),this.vf}Kn(e){this.SV=no({},this.SV,e),t.EV(this.SV),this.To(new KP)}static kV(){let t=no({},ZP);return t.dV=Mi.hI(Nu+"fontFamily")||t.dV,t.fV=Mi.hI(Nu+"fontColor")||t.fV,t._V=Mi.hI(Nu+"fontSize")||t._V,t.vV=Mi.hI(Nu+"backgroundColor")||t.vV,t.gV=Mi.hI(Nu+"windowColor")||t.gV,t.mV=Mi.hI(Nu+"edgeStyle")||t.mV,t}static EV(t){Mi.sB(Nu+"fontFamily",t.dV||""),Mi.sB(Nu+"fontColor",t.fV||""),Mi.sB(Nu+"fontSize",t._V||""),Mi.sB(Nu+"backgroundColor",t.vV||""),Mi.sB(Nu+"windowColor",t.gV||""),Mi.sB(Nu+"edgeStyle",t.mV||"")}constructor(){super(),this.vf=void 0,this.SV=t.kV()}};function $P(t,e){var i,s;t.style.marginLeft=(null!=(i=e.yV)?i:0)+"px",t.style.marginRight=(null!=(s=e.AV)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}var uh,tI=[r.Ah,r.Ch,En.Pv,r.vv,r.Y_,r.X_,r.rv,r.ev,r.M_,r.Z_,r.mv,r.N_,En.Rf,r.tv,lt.aa,vt.O_,vt.iI,r.C_,r.R_,r.wv,r.W_,r.V_,r.U_,r.L_],eI={PV:!1};function iI(t){return t.Vp.l_===$.rD}(uh||(uh={})).RV="CV";var wt,Pn=["CV"];!function(t){t[t.xV=0]="xV",t[t.cE=1]="cE",t[t.DV=2]="DV"}(wt||(wt={}));var Be,sI=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"];(Be||(Be={})).iF="NV";var Me=class extends d{get ht(){throw new v("Not implemented")}get Vp(){return this.kx}get VB(){return this.Gx}get rt(){throw new v("Not implemented")}async BV(t,e){const i=await this.ix.tx(t.XP,e),s=await i.zC();return await this.OV(s),s}MV(t){const e=this.HC;return e?0!==t.ZB.length&&t.ZB.some((t=>t.vg.XP===e.vg)):0!==this.kx.ZB.length?t.ZB.some((t=>this.kx.ZB.some((e=>t.vg===e.vg)))):0===t.ZB.length||!this.LV}FV(t){return this.UV.FV(t),this.kx=t,Promise.resolve()}HV(t){return!1}async hl(){this.Lo(),this.Gx.removeEventListener("loadedmetadata",this.WV);for(const t of sI)this.Gx.removeEventListener(t,this.qV);await this.VV.bn(),this.zV(),await this.UV.ir(),await this.XV(void 0)}GV(t){t!==this.QV&&(this.QV=t,t?this.KV.lI(void 0):this.KV=new Os)}OV(t){return this.VV.Bx((()=>this.XV(t)))}async XV(t){if(t&&!this.Gx.src&&!this.Gx.srcObject)throw new _r(Ot.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&(this.Gx.src||this.Gx.srcObject))throw new _r(Ot.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this.QV&&await this.KV.fI;const e=this.HC;e&&(await e.qC(this.Gx),this.HC=void 0),t&&(await t.wn(this.Gx),this.HC=t)}ba(t){return this.VV.Bx((()=>this.jV(t)))}jV(t){this.GV(!1);const e=this.FB.pd;if(function(t){if(void 0!==s.ManagedMediaSource&&t instanceof s.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&Bp.xk&&Bp.pP>=17}(this.Gx))try{this.Gx.srcObject=t}catch(e){this.Gx.src=URL.createObjectURL(t)}else this.Gx.src=URL.createObjectURL(t);else this.Gx.src=t;this.FB.pd=e}YV(t){return this.VV.Bx((()=>this.ZV(t)))}ZV(t){this.jV(t),this.Gx.load()}zV(){this.GV(!1),Hb(this.Gx)}async JV(){this.HC&&await this.HC.ir()}constructor(t,e,i,s){super(),this.QV=!1,this.KV=new Os,this.LV=!1,this.VV=new xo,this.HC=void 0,this.WV=()=>{this.LV=!0},this.qV=()=>{this.GV(!0)},this.kx=t,this.FB=e,this.Gx=e.VB,this.UV=i,this.ix=s,this.Gx.addEventListener("loadedmetadata",this.WV);for(const t of sI)this.Gx.addEventListener(t,this.qV)}};var nI,rI=class extends Me{get Fl(){return ri._n(this.Gx.buffered)}get ct(){return this.Gx.duration}get $V(){const t=this.ct;if(!isFinite(t))return!1;const e=this.Fl;if(0===e.V)return!1;return t-e.An(e.V-1)<ne}get Sd(){return this.Gx.preload}set Sd(t){this.Gx.preload=t}get Rd(){return ri._n(this.Gx.seekable)}get tz(){return this.Fl}get ez(){if(he(this.Gx)&&(this.Gx.videoWidth>0||this.Gx.videoHeight>0))return this.Fl}async JW(){const t=this.Vp;switch(t.$B){case po.Wv:case po.qv:this.Gx.setAttribute("crossorigin",t.$B);break;case po.Hv:default:this.Gx.removeAttribute("crossorigin")}void 0!==t.Sd?this.Gx.preload=t.Sd:this.Gx.preload=Fi.mB,void 0!==t.tO?this.Gx.title=t.tO:Fb(this.Gx),await this.ba(t.d_),this.UV.Rn(this,t)}MV(t){return!1}FV(t){return Promise.resolve(void 0)}async hl(){Fb(this.Gx),await super.hl()}static iz(t,e){return!!e.canPlayType&&Boolean(e.canPlayType(t.YB))}},gt=class extends Ci{constructor(t){super(r.Y_),this.currentTime=t}},Ce=class extends Ci{constructor(){super(r.X_)}};(nI||(nI={})).sz="nz";var oI=class extends Ci{constructor(t){super("nz"),this.rz=t}},hI=class extends d{get oz(){return this.cz}lz(t,e){const i=new ri([t,e]);this.cz=this.cz.gM(i),this.To(new oI(i))}fz(t,e){this.cz=this.cz.wM(new ri([t,e]))}ir(){this.cz=ri.BM()}bn(){this.Lo()}constructor(...t){super(...t),this.cz=ri.BM()}};var aI,uI=class{start(t){this.cV=t,this._z()&&this.vz()}pull(){this.Ku.length>0?this.gz():this.mz=!0,this._z()&&this.vz()}cancel(t){return wr(this.Ku),this.Yu=0,this.mz=!1,this.Bu.cancel(t)}gz(){if(0===this.Ku.length)return;const t=this.Ku;this.Ku=[],this.Yu=0,this.mz=!1,this.cV.enqueue(t)}_z(){if(this.mz)return!0;return this.wz-this.Yu>0}vz(){if(this.pz)return;const t=this.Bu.read().then(this.yz).catch(this.Az);this.pz=t;const e=()=>{this.pz===t&&(this.pz=void 0)};t.then(e,e)}constructor(t,{size:e=(()=>1),highWaterMark:i=1}){this.Ku=[],this.Yu=0,this.cV=void 0,this.mz=!1,this.pz=void 0,this.yz=t=>t.done?(this.gz(),void this.cV.close()):(this.Ku.push(t.value),this.Yu+=this.bz(t.value),this.mz&&this.gz(),this._z()?this.Bu.read().then(this.yz):void 0),this.Az=t=>{this.gz(),this.cV.error(t)},this.Bu=t.getReader(),this.bz=e,this.wz=i}},cI=class{Tz(t){this.Sz.push(t),this.ww+=t.byteLength}Ez(t){if(this.ww<=t)return this.kz();const e=this.Sz;let i=0,s=0;for(;s<e.length&&i+e[s].byteLength<=t;)i+=e[s].byteLength,s++;const n=e.slice(0,s);if(s<e.length&&i<t){const r=t-i;0,n.push(ph(e[s],0,r)),i+=r}return{Sz:n,ww:i}}Pz(t){const e=this.Ez(t);return 1===e.Sz.length?e.Sz[0]:Z_(e.Sz,e.ww)}kz(){return{Sz:this.Sz,ww:this.ww}}Iz(t){if(this.ww<=t)return this.Rz();const e=this.Sz;let i=0,s=0;for(;s<e.length&&i+e[s].byteLength<=t;)i+=e[s].byteLength,s++;const n=e.splice(0,s);if(e.length>0&&i<t){const s=t-i;0,n.push(ph(e[0],0,s)),e[0]=ph(e[0],s),i+=s}return this.ww-=i,{Sz:n,ww:i}}Cz(t){const e=this.Iz(t);return 1===e.Sz.length?e.Sz[0]:Z_(e.Sz,e.ww)}Rz(){const t=this.kz();return this.Sz=[],this.ww=0,t}xz(){const t=1===this.Sz.length?this.Sz[0]:Z_(this.Sz,this.ww);return this.Sz=[],this.ww=0,t}constructor(){this.Sz=[],this.ww=0}};!function(t){t[t.Dz=0]="Dz",t[t.Nz=1]="Nz",t[t.Bz=2]="Bz"}(aI||(aI={}));var Jn=class{Oz(t,e){}Mz(){}Lz(t){this.Ku.Tz(t),this.Fz(!1)}Uz(){this.Fz(!0)}Wz(){return 0!==this.Aa||0!==this.Ku.ww}Fz(t){for(;0!==this.Ku.ww;){if(!t&&this.qz>this.Ku.ww)return;switch(this.Aa){case 0:this.Vz(t);break;case 1:this.zz(t);break;case 2:this.Xz(t)}}}Gz(){this.Aa=0,this.qz=8}Vz(t){const e=wa(this.Ku.Pz(this.qz)),i=new ds,s=P.gw(e,i);if(!s.cw)return this.qz=s.pw,void(t&&this.qz>this.Ku.ww&&this.Qz(this.Ku.ww));const n=s.mw.l_;let r=s.mw.ww;0===r&&(r=1/0),this.Oz(n,r),this.Kz(n)?this.jz(r):this.Qz(r)}jz(t){this.Aa=1,this.qz=t}zz(t){const e=wa(this.Ku.Cz(this.qz)),i=new ds,s=P.lw(e,i,!t);if(!s.cw)throw new vo(i.Om);this.Mz(),this.Yz(s.dw),this.Gz()}Qz(t){this.Aa=2,this.qz=0,this.Zz=t}Xz(t){const e=this.Ku.Iz(this.Zz);this.Zz-=e.ww;for(const t of e.Sz)this.Jz(t);(0===this.Zz||t&&this.Zz===1/0)&&(this.Mz(),this.Gz())}constructor(){this.Ku=new cI,this.Aa=0,this.qz=0,this.Zz=0,this.Gz()}};function lI(t){return t instanceof va}function dI(t){return t instanceof mA}function fI(t){return t instanceof pa||t instanceof vA}function _I(t){return t instanceof ba}function vI(t){return t instanceof Sy}function gI(t){return t instanceof Xe}function mI(t){return t instanceof Ns}function wI(t){return t instanceof Aa}function pI(t){return t instanceof Ae}function yI(t){return t instanceof TA}function AI(t){return t instanceof EA}function bI(t,e){const i=Rt(t.boxes,yI);if(i&&i.flags.baseDataOffsetPresent)i.baseDataOffset=i.baseDataOffset.add(e);else for(const i of t.boxes)i instanceof EA&&i.flags.dataOffsetPresent&&(i.dataOffset=i.dataOffset+e)}var TI=class extends Jn{start(t){this.cV=t}transform(t){this.Lz(t)}flush(){this.Uz()}Kz(t){return t===E_.Ig||t===E_.lm||t===E_.Tm}Yz(t){const e=this.$z(t);this.cV.enqueue(e)}Jz(t){this.cV.enqueue(t)}$z(t){const e=fi(t.Xm.Xm);switch(t.l_){case"moov":return this.tX(e);case"sidx":return this.eX(e);case"moof":return this.iX(e)}return e}get sX(){if(void 0===this.nX)throw new v("Expected to have found a movie header timescale.");return this.nX}rX(t){const e=this.oX.get(t);if(void 0===e)throw new v("Expected to have found a media header timescale for track ID "+t+".");return e}tX(t){const e=zA(t);for(let t=0;t<e.boxes.length;t++){const i=e.boxes[t];i instanceof lA?e.boxes[t]=this.hX(i):i instanceof dA?e.boxes[t]=this.aX(i):i instanceof mA&&this.uX(i)}for(const t of e.boxes)t instanceof Xe&&this.cX(t);return e.serialize().join()}hX(t){this.nX=t.timescale;const e=lh(rt.fromNumber(t.duration,!0),this.sX,this.lX);return 0!==e.getHighBits()?this.aX(function(t){return new dA({creation:rt.fromNumber(t.creationTime,!0),modification:rt.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:rt.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.lX,t.duration=e.toInt(),t)}aX(t){return this.nX=t.timescale,t.timescale=this.lX,t.duration=lh(t.duration,this.sX,this.lX),t}uX(t){let e;for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof pa?(e=s.trackId,t.boxes[i]=this.dX(s)):s instanceof vA?(e=s.trackId,t.boxes[i]=this.fX(s)):s instanceof ba?this._X(s,e):s instanceof Ny&&this.vX(s)}}dX(t){const e=lh(rt.fromNumber(t.duration,!0),this.sX,this.lX);return 0!==e.getHighBits()?this.fX(function(t){return new vA({creation:rt.fromNumber(t.creationTime,!0),modification:rt.fromNumber(t.modificationTime,!0),duration:rt.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=e.toInt(),t)}fX(t){return t.duration=lh(t.duration,this.sX,this.lX),t}_X(t,e){for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof Hy?t.boxes[i]=this.gX(s,e):s instanceof Wy&&(t.boxes[i]=this.mX(s,e))}}gX(t,e){this.oX.set(e,t.timescale);const i=lh(rt.fromNumber(t.duration,!0),t.timescale,this.lX);return 0!==i.getHighBits()?this.mX(function(t){return new Wy({creation:rt.fromNumber(t.creationTime,!0),modification:rt.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:rt.fromNumber(t.duration,!0)},t.language,t.flags)}(t),e):(t.timescale=this.lX,t.duration=i.toInt(),t)}mX(t,e){return this.oX.set(e,t.timescale),t.timescale=this.lX,t.duration=lh(t.duration,t.timescale,this.lX),t}vX(t){for(const e of t.boxes)e instanceof Cy?this.wX(e):e instanceof xy&&this.pX(e)}wX(t){for(const e of t.entries)e.mediaTime=EI(e.mediaTime,this.sX,this.lX),e.segmentDuration=EI(e.segmentDuration,this.sX,this.lX)}pX(t){for(const e of t.entries)e.mediaTime=lh(e.mediaTime,this.sX,this.lX),e.segmentDuration=lh(e.segmentDuration,this.sX,this.lX)}cX(t){for(let e=0;e<t.boxes.length;e++){const i=t.boxes[e];i instanceof Ns?this.yX(i):i instanceof rA?t.boxes[e]=this.AX(i):i instanceof oA&&(t.boxes[e]=this.bX(i))}}yX(t){const e=this.rX(t.trackId);t.defaultSampleDuration=EI(t.defaultSampleDuration,e,this.lX)}AX(t){const e=lh(rt.fromNumber(t.fragmentDuration,!0),this.sX,this.lX);return 0!==e.getHighBits()?this.bX(function(t){return new oA(rt.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=e.toInt(),t)}bX(t){return t.fragmentDuration=lh(t.fragmentDuration,this.sX,this.lX),t}eX(t){let e=XA(t);return e=e instanceof NA?this.TX(e):this.SX(e),e.serialize().join()}TX(t){const e=t.timescale,i=lh(rt.fromNumber(t.earliestPresentationTime,!0),e,this.lX);if(0!==i.getHighBits())return this.SX(function(t){return new BA(t.referenceId,t.timescale,rt.fromNumber(t.earliestPresentationTime,!0),rt.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.lX,t.earliestPresentationTime=i.toInt();for(const i of t.references)i.subsegmentDuration=EI(i.subsegmentDuration,e,this.lX);return t}SX(t){const e=t.timescale;t.timescale=this.lX,t.earliestPresentationTime=lh(t.earliestPresentationTime,e,this.lX);for(const i of t.references)i.subsegmentDuration=EI(i.subsegmentDuration,e,this.lX);return t}iX(t){const e=GA(t),i=e.getSize();for(const t of e.boxes)t instanceof Ae&&this.EX(t);const s=e.getSize();if(s!==i){const t=s-i;for(const i of e.boxes)i instanceof Ae&&bI(i,t)}return e.serialize().join()}EX(t){let e;for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof TA?(e=this.rX(s.trackId),this.kX(s,e)):s instanceof AA?t.boxes[i]=this.PX(s,e):s instanceof Ps?t.boxes[i]=this.IX(s,e):s instanceof EA&&this.RX(s,e)}}kX(t,e){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=EI(t.defaultSampleDuration,e,this.lX))}PX(t,e){const i=lh(rt.fromNumber(t.baseMediaDecodeTime,!0),e,this.lX);return 0!==i.getHighBits()?this.IX(function(t){return new Ps(rt.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),e):(t.baseMediaDecodeTime=i.toInt(),t)}IX(t,e){return t.baseMediaDecodeTime=lh(t.baseMediaDecodeTime,e,this.lX),t}RX(t,e){let i=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=EI(s,e,this.lX);n.duration=t-i,i=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=SI(n.compositionTimeOffset,e,this.lX))}}constructor(t){super(),this.oX=Re(),this.lX=t}};function SI(t,e,i){return rt.fromInt(t,!1).multiply(i).divide(e).toNumber()}function EI(t,e,i){return rt.fromInt(t,!0).multiply(i).divide(e).toNumber()}function lh(t,e,i){return gu.Jb(t).bT(gu.$b(i,!0)).kT(gu.$b(e,!0)).lT()}var kI,$e,PI,II=class{CX(t){return t.pipeThrough(new Da(this.xX))}constructor(t){this.xX=new TI(t)}};function RI(t,e,i){const s=Fo(t,e);if(s!==i)throw new p("Expected descriptor with tag "+i+", but found "+s)}function CI(t,e){RI(t,e,3);const i=xI(t,e),s=e.Om+i,n=Go(t,e),r=Fo(t,e),o=0!=(64&r),h=0!=(32&r),a=31&r;let u,c,l;if(0!=(128&r)&&(u=Go(t,e)),o){c=Ka(t,e,Fo(t,e))}h&&(l=Ka(t,e,2));const d=function(t,e){RI(t,e,4);const i=xI(t,e),s=e.Om+i,n=Fo(t,e),r=Fo(t,e),o=r>>2,h=0!=(2&r),a=Zh(t,e,3),u=to(t,e),c=to(t,e);let l;if(e.Om<s){const i=function(t,e){return t.getUint8(e.Om)}(t,e);5===i&&(l=function(t,e){RI(t,e,5);const i=xI(t,e),s=M(t,e,i);return{DX:5,NX:s}}(t,e))}return e.Fm(s),{DX:4,BX:n,OX:o,MX:h,LX:a,FX:u,UX:c,HX:l}}(t,e);return e.Fm(s),{DX:3,o:n,WX:u,YS:c,qX:a,VX:l,zX:d}}function xI(t,e){let i=0;for(let s=0;s<4;s++){const s=Fo(t,e);if(i=i<<7|127&s,!(128&s))break}return i}function DI(t,e){const i=Fo(t,e),s=Fo(t,e),n=Fo(t,e),r=Fo(t,e),o=3&Fo(t,e),h=31&Fo(t,e),a=[];for(let i=0;i<h;i++){const i=Go(t,e);a.push(M(t,e,i))}const u=Fo(t,e),c=[];for(let i=0;i<u;i++){const i=Go(t,e);c.push(M(t,e,i))}return{XX:i,GX:s,QX:n,KX:r,jX:o,YX:a,ZX:c}}function kt(t,e,i){if(i&&e.byte>=i)return;const s=t.hI(e.byte);return e.byte+=1,s}function NI(t,e){return function(t,e,i){let s=0,n=i;for(;n>0;)n-=1,s=256*s+kt(t,e);return s}(t,e,2)}!function(t){t[t.JX=3]="JX",t[t.$X=4]="$X",t[t.tG=5]="tG"}(kI||(kI={})),function(t){t[t.eG=64]="eG",t[t.iG=103]="iG",t[t.sG=107]="sG"}($e||($e={})),function(t){t[t.nG=0]="nG",t[t.rG=1]="rG",t[t.iG=2]="iG",t[t.oG=5]="oG",t[t.hG=34]="hG"}(PI||(PI={}));var BI,pn=class t{aG(t){this.uG=this.uG.concat(t.uG),this.cG+=t.V}lG(t,e,i){const s=this.cG,n=i-e;n>0&&(this.uG.push({dG:e,fG:i,_G:n,vG:s,gG:t}),this.cG+=n)}hI(t){for(const e of this.uG)if(e.vG<=t&&t<e.vG+e._G)return e.gG[t+e.dG-e.vG]}mG(t,e){let i=e;for(const e of this.uG){const s=e.fG;for(let n=e.dG;n<s;n+=1,i+=1)t[i]=e.gG[n]}return i}get V(){return this.cG}set V(t){const e=this.uG;let i=this.cG-t;if(!(t>=this.cG))if(this.cG=t,0!==t)for(let t=e.length-1;t>=0;t-=1){const s=e[t];if(i<=s._G)return s.fG-=i,s._G-=i,void(e.length!==t+1&&(e.length=t+1));i-=s._G}else e.length=0}get Xm(){const t=new Array(this.cG);let e=0;for(const i of this.uG){const s=i.fG;for(let n=i.dG;n<s;n+=1,e+=1)t[e]=i.gG[n]}return t}wG(){const t=new S(this.cG);let e=0;for(const i of this.uG){const s=i.fG;for(let n=i.dG;n<s;n+=1,e+=1)t[e]=i.gG[n]}return t}Um(e){const i=new t;for(const t of this.uG)i.lG(t.gG,t.dG,t.fG);return i._S=e||no({},this._S),i}constructor(){this.cG=0,this.uG=[],this._S={}}},OI=[128,64,32,16,8,4,2,1];function go(t,e){const i=b.floor(e.bit/8),s=0==(t.hI(i)&OI[e.bit%8])?0:1;return e.bit+=1,s}function Mn(t,e,i){let s=0,n=i;for(;n>0;)n-=1,s=2*s+go(t,e);return s}function Ht(t,e){let i=0;for(;0===go(t,e)&&i<32;)i+=1;return Mn(t,e,i)+2**i-1}function MI(t,e){const i=Ht(t,e);return 1&i?b.floor((i+1)/2):-b.floor(i/2)}function LI(t,e){const i=[],s={byte:1};let n;do{i.push(UI(t,e,s)),n=e.hI(s.byte)}while(void 0!==n&&128!==n);return i}function FI(t,e){let i,s=0;do{i=kt(t,e),s+=i}while(255===i);return s}function UI(t,e,i){const s=FI(e,i),n=FI(e,i),r=i.byte,o=r+n;return i.byte=o,{pG:t,yG:s,AG:n,bG:r,TG:o,SG:e}}!function(t){t[t.EG=1]="EG",t[t.kG=2]="kG",t[t.PG=3]="PG",t[t.IG=4]="IG",t[t.CG=5]="CG",t[t.xG=6]="xG",t[t.DG=7]="DG",t[t.NG=8]="NG",t[t.BG=9]="BG"}(BI||(BI={}));var HI=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function WI(t,e,i){let s=8,n=8;for(let r=0;r<i;r+=1){if(0!==n){n=(s+MI(t,e)+256)%256}s=0===n?s:n}}var qI=class{OG(){const t=this.MG;let e=b.max(0,this.LG+t.length-2);const i=this.FG,s=i.V;let n=0;for(;e<s;e+=1){const s=i.hI(e);0===s?n+=1:(3===s&&n>=2&&t.push(e),n=0)}this.LG=e-t.length}UG(t){const e=this.MG;let i=t;for(const t of e){if(!(t<=i))return i;i+=1}return i}hI(t){if(!(t>this.FG.V))return t>this.LG&&this.OG(),this.FG.hI(this.UG(t))}constructor(t){this.MG=[],this.LG=0,this.FG=t}};function VI(t){const e=new qI(t);let i,s,n,r,o,h,a=0,u=0,c=0,l=0;const d=e.hI(1),f={bit:32};if(Ht(e,f),100===d||110===d||122===d||144===d){const t=Ht(e,f);3===t&&(i=go(e,f)),Ht(e,f),Ht(e,f),go(e,f);if(1===go(e,f))for(let i=0;i<(3!==t?8:12);i+=1){1===go(e,f)&&WI(e,f,i<6?16:64)}}const _=Ht(e,f),v=Ht(e,f);if(0===v)Ht(e,f);else if(1===v){go(e,f),MI(e,f),MI(e,f);const t=Ht(e,f);for(let i=0;i<t;i+=1)MI(e,f)}Ht(e,f),go(e,f);const g=Ht(e,f),m=Ht(e,f),w=go(e,f);0===w&&go(e,f),go(e,f);1===go(e,f)&&(a=Ht(e,f),u=Ht(e,f),c=Ht(e,f),l=Ht(e,f));if(1===go(e,f)){if(1===go(e,f)){const t=Mn(e,f,8);if(255===t)s=Mn(e,f,16),n=Mn(e,f,16);else{const e=HI[t];e&&(s=e[0],n=e[1])}}1===go(e,f)&&go(e,f);if(1===go(e,f)){Mn(e,f,3),go(e,f);1===go(e,f)&&(Mn(e,f,8),Mn(e,f,8),Mn(e,f,8))}1===go(e,f)&&(Ht(e,f),Ht(e,f)),r=go(e,f),1===r&&(o=Mn(e,f,32),h=Mn(e,f,32),go(e,f))}return{width:b.floor(16*(g+1)-2*a-2*u),height:b.floor((2-w)*(m+1)*16-2*c-2*l),by:s,Ty:n,HG:r?h/(2*o):void 0,WG:i,qG:_}}function zI(t){const e=Yo(hs.Ew(t),E_.Ig);if(!e)return;const i=e.mw.zw,s=[];for(const t of e.Z){const e=t.mw.tp,i=t.Yw.mw.zw;let h,a,u;for(const e of t.Yw.hp.lp.fp.vp){const t=XI(e);var n,r,o;if(t)h=null!=(n=t.VG)?n:h,a=null!=(r=t.zG)?r:a,u=null!=(o=t.XG)?o:u}s.push({tp:e,zw:i,VG:h,zG:a,XG:u})}return{zw:i,Z:s}}function XI(t){let e,i,s;if(t.l_===E_.Wg){var n;const i=DI(wa(t.zp.Xm),new ds);e=function(t){return"avc1."+GI(t.GX,2)+GI(t.QX,2)+GI(t.KX,2)}(i),s=null==(n=function(t){if(0===t.YX.length)return;const e=t.YX[0],i=new pn;return i.lG(e,0,e.byteLength),VI(i)}(i))?void 0:n.HG}else if(t.l_===E_.Vg||t.l_===E_.zg){const i=function(t,e){const i=e.Vm(),s=Ii(t,i,8),n=Ii(t,i,2),r=Ii(t,i,1),o=Ii(t,i,5),h=Ii(t,i,32),a=[];for(let e=0;e<6;e++)a.push(Ii(t,i,8));const u=Ii(t,i,8);i.Mm(4);const c=Ii(t,i,12);i.Mm(6);const l=Ii(t,i,2);i.Mm(6);const d=Ii(t,i,2);i.Mm(5);const f=Ii(t,i,3);i.Mm(5);const _=Ii(t,i,3),v=Ii(t,i,16),g=Ii(t,i,2),m=Ii(t,i,3),w=Ii(t,i,1),p=Ii(t,i,2),y=Ii(t,i,8),A=[];for(let e=0;e<y;e++){const e=Ii(t,i,1);i.Mm(1);const s=Ii(t,i,6),n=Ii(t,i,16),r=[];for(let e=0;e<n;e++){const e=Ii(t,i,16),s=M(t,new ds(i.Om>>3),e);i.Mm(8*e),r.push({GG:e,QG:s})}A.push({KG:e,jG:s,YG:n,ZG:r})}return{XX:s,JG:n,$G:r,tQ:o,eQ:a,iQ:u,sQ:c,nQ:l,rQ:h,oQ:d,hQ:f,aQ:_,uQ:v,cQ:m,lQ:w,dQ:g,jX:p,fQ:y,_Q:A}}(wa(t.Kp.Xm),new ds);e=function(t,e){let i=t.toString()+".";switch(e.JG){case 0:break;case 1:i+="A";break;case 2:i+="B";break;case 3:i+="C";break;default:return}switch(i+=e.tQ.toString()+".",i+=function(t){let e=t;return e=e>>>1&1431655765|(1431655765&e)<<1,e=e>>>2&858993459|(858993459&e)<<2,e=e>>>4&252645135|(252645135&e)<<4,e=e>>>8&16711935|(16711935&e)<<8,e=e>>>16|e<<16,e}(e.rQ).toString(16)+".",e.$G){case 0:i+="L";break;case 1:i+="H";break;default:return}i+=e.iQ.toString();const s=e.eQ.reduce(((t,e)=>0===t?e:e+1),0);for(let t=0;t<s;t++)i+="."+e.eQ[t].toString(16).toUpperCase();return i}(t.l_,i)}else if(t.l_===E_.Gg){const i=function(t,e){const i=e.Vm(),s=Ii(t,i,8);i.Mm(24);const n=Ii(t,i,8),r=Ii(t,i,8),o=Ii(t,i,4),h=Ii(t,i,3),a=U(t,i),u=Ii(t,i,8),c=Ii(t,i,8),l=Ii(t,i,8),d=Ii(t,i,16),f=new Array(8);for(let e=0;e<d;e++)f[e]=Ii(t,i,8);return{XX:s,vQ:n,gQ:r,mQ:o,wQ:h,pQ:a,wy:u,py:c,yy:l,yQ:d,AQ:f}}(wa(t.Yp.Xm),new ds);e=function(t,e){let i=t.toString()+".";return i+="0"+e.vQ+".",i+=Qt(""+e.gQ,2,"0")+".",i+=Qt(""+e.mQ,2,"0")+".",i+=Qt(""+e.wQ,2,"0")+".",i+=Qt(""+e.wy,2,"0")+".",i+=Qt(""+e.py,2,"0")+".",i+=Qt(""+e.yy,2,"0")+".",i+="0"+e.pQ,i}(t.l_,i)}else if(t.l_===E_.Kg){const i=function(t,e){const i=e.Vm();i.Mm(1);const s=Ii(t,i,7),n=Ii(t,i,3),r=Ii(t,i,5),o=U(t,i),h=U(t,i),a=U(t,i),u=U(t,i),c=U(t,i),l=U(t,i),d=Ii(t,i,2);i.Mm(3);const f=U(t,i);let _;return f?_=Ii(t,i,4):i.Mm(4),{Tw:s,bQ:n,TQ:r,SQ:o,EQ:h,kQ:a,IQ:u,RQ:c,CQ:l,xQ:d,DQ:f,NQ:_}}(wa(t.$p.Xm),new ds);e=function(t,e,i){let s=t.toString()+".";if(s+=e.bQ+".",s+=""+Qt(""+e.TQ,2,"0"),s+=(0===e.SQ?"M":"H")+".",s+=(1===e.kQ?12:10)+".",s+=(1===e.bQ?0:e.IQ)+".",s+=""+e.RQ+e.CQ+(1===e.RQ&&1===e.CQ?e.xQ:"0"),i&&i.gy===oi.ON_SCREEN_COLOURS){const t=i;s+="."+Qt(""+t.wy,2,"0")+"."+Qt(""+t.py,2,"0")+"."+Qt(""+t.yy,2,"0")+"."+(t.Ay?1:0)}return s}(t.l_,i,t.ey)}else{if(t.l_!==E_.Jg)return(t.l_===E_.um||t.l_===E_.hm)&&t.oy?XI(t.oy):void 0;i=function(t){const e=t.zX;switch(e.BX){case $e.eG:return function(t){var e;if(!(null==(e=t.HX)?void 0:e.NX))return"mp4a.40";const i=function(t,e){let i=Ii(t,e,5);31===i&&(i=32+Ii(t,e,6));const s=Ii(t,e,4);let n;return 15===s&&(n=Ii(t,e,24)),{BQ:i,OQ:s,MQ:n,LQ:Ii(t,e,4)}}(wa(t.HX.NX),new Jr);return"mp4a.40."+i.BQ}(e);case $e.iG:return"mp4a.40.2";case $e.sG:return"mp4a.40.34"}}(CI(wa(t.Lp.Xm),new ds))}return{VG:e,zG:i,XG:s}}function GI(t,e){const i=t.toString(16);return Qt(i,e,"0")}function QI(t,e){const i=hs.Ew(wa(t)),s=function(t,e){let i;for(const n of t.Z){var s;const t=null==(s=n.Fy)?void 0:s.Fy;if(t){const s=n.mw.tp,r=Rt(e.Z,(t=>t.tp===s)),o=Bh.Jb(t,r.zw);i&&!o.zb(i)||(i=o)}}return i}(Yo(i,E_.lm),e),n=Yo(i,E_.pm);return{ob:s.Lb(),FQ:n.Xm}}var KI=Bp.mP,jI=class extends d{get QW(){return this.nq}set QW(t){this.nq=t}get ZW(){return this.hq}set ZW(t){this.hq=t}get ua(){return this.UQ||this.HQ.updating}WQ(t,e,i){switch(t.l_){case wt.xV:case wt.cE:return this.qQ((i=>this.VQ(t,e,i)),i);case wt.DV:throw new v("Opaque segments are not supported on web.")}}zQ(t,e){switch(t.l_){case wt.xV:return this.qQ((e=>this.XQ(t,e)),e);case wt.cE:throw new v("Streaming initialization segments are not supported on web.");case wt.DV:throw new v("Opaque initialization segments are not supported on web.")}}async XQ(t,e){this.GQ?this.QQ=zI(wa(t.Xm)):(await this.KQ(t,void 0,e),KI&&(this.jQ=!1,this.YQ=t))}async VQ(t,e,i){KI&&this.jQ&&this.YQ&&await this.XQ(this.YQ,i);try{if(gi(i),this.GQ&&this.QQ){const n=await async function(t,e){switch(t.l_){case wt.xV:return t;case wt.cE:{const i=await ct(t.Xm,e);return gi(e),{l_:wt.xV,Xm:new S(i)}}case wt.DV:throw new v("MediaBufferWrapper - Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,i),r=QI(n.Xm,this.QQ);var s;t={l_:wt.xV,Xm:r.FQ},e=no({},e,{rS:r.ob+(null!=(s=e.rS)?s:0)})}await this.KQ(t,e,i),this.To(new Ci(uh.RV))}finally{t.l_===wt.cE&&t.Xm.cancel(new Sr).catch($d)}}async KQ(t,e,i){switch(gi(i),e&&await this.ZQ(e),t.l_){case wt.xV:if(this.JQ){const e=this.JQ.CX(Vk(t.Xm));return await this.$Q(e,i)}return await this.tK(t.Xm);case wt.cE:if(this.JQ){const e=this.JQ.CX(t.Xm);return await this.$Q(e,i)}return await this.$Q(t.Xm,i)}}async $Q(t,e){const i=this.eK.Fl,s=function(t,e){return void 0===e&&(e=new gd({highWaterMark:1/0})),new cd(new uI(t,e),{highWaterMark:0})}(t),n=s.getReader();let r=!1;try{for(;;){const t=await sf(n.read(),e);if(t.done){r=!1;break}gi(e);const i=Y_(t.value);r=!0,await this.tK(i)}}catch(t){if(n.cancel(t).catch($d),r){await this.iK();const t=this.eK.Fl.Cn(i.dM());for(let e=0;e<t.V;e++)await this.sK(t.Tn(e),t.An(e))}throw t}}nK(t,e){return this.qQ((()=>this.rK(t,e)))}async rK(t,e){this.HQ.appendWindowStart===t&&this.HQ.appendWindowEnd===e||(await this.iK(),this.HQ.appendWindowStart=0,this.HQ.appendWindowEnd=e,this.HQ.appendWindowStart=t)}async ZQ(t){if(this.HQ.timestampOffset!==t.rS)try{this.HQ.timestampOffset=t.rS}catch(e){await this.iK(),this.HQ.timestampOffset=t.rS}}async tK(t){this.HQ.appendBuffer(t),this.oK=!0,await this.hK()}aK(t,e,i){return this.qQ((i=>this.sK(t,e,i)),i)}async sK(t,e,i){gi(i),this.HQ.remove(t,e),await this.hK()}hK(){const t=this.eK.Fl;return new Promise(((e,i)=>{let s,n=!1,r=()=>{n=!0},o=()=>{n=!1,s="error"},h=()=>{n=!1,s="aborted"},a=()=>{u(),n&&!s?(t.SM(this.eK.Fl)||this.To(new Ci(uh.RV)),e()):i(new v(s))},u=()=>{this.HQ.removeEventListener("update",r),this.HQ.removeEventListener("error",o),this.HQ.removeEventListener("abort",h),this.HQ.removeEventListener("updateend",a)};this.HQ.addEventListener("update",r),this.HQ.addEventListener("error",o),this.HQ.addEventListener("abort",h),this.HQ.addEventListener("updateend",a)}))}uK(){return this.qQ((()=>this.iK()))}async iK(){if(this.cK.Pd===kr.VS){KI&&(this.jQ=!0),this.HQ.updating&&(this.UQ=!0);try{this.HQ.abort()}catch(t){0,this.UQ=!1}this.ua&&await this.hK().catch($d)}}lK(){return"function"==typeof this.HQ.changeType}FV(t){if(this.dK(),this.cK.Pd===kr.fK)return;var e;this._K=t;const i=null!=(e=this.cK.vK(t.YB))?e:t.YB;this.GQ=YI(t.YB,this.gK),this.lK()&&!jf(this.gK,i)&&(this.gK=i,this.HQ.changeType(this.gK))}mK(){this.cK.Pd!==kr.M_||this.wK||this.ua||(this.HQ.timestampOffset=this.HQ.timestampOffset,this.cK.pK())}async qQ(t,e){this.dK();const i=new Zs;i.wl(this.yK.fl),e&&i.wl(e);try{this.wK=t(i.fl),await this.wK,this.cK.pK(),this.ua&&await this.hK()}finally{this.wK=void 0,i.hl()}}dK(){if(this.wK)throw new v("Internal error")}async hl(){this.Lo(),this.yK.vl(),this.wK&&(await this.wK.catch($d),this.wK=void 0),this.HQ.removeEventListener("updateend",this.AK),this.HQ.removeEventListener("bufferedchange",this.bK)}constructor(t,e,i,s,n){var r;if(super(),this.nq=20,this.hq=30,this.UQ=!1,this.oK=!1,this.wK=void 0,this.yK=new Zs,this.jQ=!1,this.YQ=void 0,this.GQ=!1,this.QQ=void 0,this.AK=()=>{this.UQ=!1},this.bK=t=>{t.removedRanges&&this.To(new Ci(uh.RV))},this.cK=e,this.eK=t,this.HQ=i,this.HQ.addEventListener("updateend",this.AK),this.HQ.addEventListener("bufferedchange",this.bK),this._K=s,this.gK=n,this.GQ=YI(s.YB,n),null==(r=e.Vp)?void 0:r.TK){var o;const t=null!=(o=e.Vp.SK)?o:1e5;this.JQ=new II(t)}}};function YI(t,e){return bt(t,"audio/mp4")&&bt(e,"audio/mpeg")}var ZI=class{get Fl(){if(this.EK.Pd===kr.fK)return ri.BM();let t=ri._n(this.HQ.buffered).Cn(new ri([0,1/0]));const e=this.kK;return void 0!==e&&t.V>0&&t.An(t.V-1)===e&&(t=t.gM(ri.DM(e))),t}$V(){return!!this.kK&&this.Fl.cM().br(this.kK)}PK(){const t=this.Fl;this.kK=t.V>0?t.An(t.V-1):0,this.EK.IK()}mK(){this.kK=void 0}constructor(t,e){this.kK=void 0,this.EK=e,this.HQ=t}};function JI(t){const e=t.PS("codecs");return e?e.split(",").map((t=>t.trim())):[]}function $I(t,e){return!("opus"===t)&&!("opus"===e)||t===e}function tR(t,e){const i=eR(t)||iR(t),s=eR(e)||iR(e);return!i&&!s||t===e}function eR(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function iR(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function ca(t,e){if(t===e)return!0;const i=t.split("."),s=e.split("."),n=i[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,e]=i,[,n,r]=s;if(t!==n)return!1;if(Number(e)!==Number(r))return!1}return!0}function sR(t,e,i,s,n,r,o){const h=new ZI(n,t),a=new jI(h,t,n,i,r);return new nR(t,e,i,s,h,a,o)}var nR=class extends d{get Fl(){return this.eK.Fl}get Vp(){return this.kx}get YB(){return this.Ax}get RK(){return this.CK}get xK(){return this.DK.oz}get QW(){return this.NK.QW}set QW(t){this.NK.QW=t}get ZW(){return this.NK.ZW}set ZW(t){this.NK.ZW=t}get ua(){return this.NK.ua}$V(){return this.eK.$V()}PK(){this.eK.PK()}mK(){this.eK.mK(),this.NK.mK()}BK(t,e){this.DK.lz(t,e)}MK(t,e){this.DK.fz(t,e)}LK(){return this.NK.uK()}WQ(t,e,i){return this.NK.WQ(t,e,i)}zQ(t,e,i){return this.NK.zQ(t,i)}nK(t,e){return Bp.Zk&&Bp.$k<3?this.NK.nK(t,1/0):this.NK.nK(t,e)}async WA(t,e,i){this.MK(t,e);const s=this.Fl;await this.NK.aK(t,e,i);const n=0!==s.V&&0===this.Fl.V;(Bp.EP||Bp.eP)&&n&&this.FB.Fm(this.FB.zl)}MV(t){const e=t.YB;if(this.Ax===e)return!0;const i=this.FK.get(e);if(void 0!==i)return i;const s=this.UK(t);return this.FK.set(e,s),s}UK(t){const e=this.cK.vK(t.YB);if(void 0===e)return!1;const i=Ew(this.Ax),s=Ew(e),n=JI(i),r=JI(s);if(this.NK.lK()){if(!function(t,e){return Gd(t,e,tR)}(n,r))return!1;if(Bp.PP&&!function(t,e){return Gd(t,e,$I)}(n,r))return!1}else{if(i.l_!==s.l_)return!1;if(!function(t,e){return Gd(t,e,ca)}(n,r))return!1}return!0}async FV(t){const e=t.YB;this.Ax!==e&&(this.FK.clear(),this.NK.FV(t),this.Ax=e),this.kx=t,this.cK.HK()}async hl(){this.FK.clear(),this.Lo(),this.DK.bn();try{this.NK.pn(uh.RV,this.Rs),await this.NK.hl()}catch(t){}}constructor(t,e,i,s,n,r,o){super(),this.FK=rs(),this.cK=t,this.kx=i,this.Ax=i.YB,this.CK=s,this.FB=e,this.eK=n,this.NK=r,this.DK=o,this.NK.kn(uh.RV,this.Rs)}},la=class{WK(){let t=this.Tn,e=this.An;if(this.qK||this.VK){const i=.001*(f.Al()-this.zK);this.qK&&(t+=i),this.VK&&(e+=i)}return ri.NM(t,e)}constructor(t,e,i=!1,s=!1){this.Tn=t,this.An=e,this.qK=i,this.VK=s,this.zK=f.Al()}},rR=.5,oR=[r.Ah,r.Ch,r.rv,r.ev,r.W_,r.V_,r.M_,r.Z_,En.Rf,lt.aa],hR=class{XK(t){this.GK.push(t),t.kn(nI.sz,this.QK)}get oz(){return this.GK.reduce(((t,e)=>t.gM(e.oz)),ri.BM())}bn(){this.KK(),this.jK.pn(En.Rf,this.YK),this.FB.pn(r.Y_,this.YK),this.FB.pn(oR,this.ZK),this.GK.forEach((t=>t.pn(nI.sz,this.QK))),0!==this.JK&&(f.bl(this.JK),this.JK=0),this.$K=!0}HV(t){if(this.FB.jl)return!1;if(0!==this.JK)return!1;const e=this.eK.Fl,i=e.pM(t);if(i>=0&&t+rR<e.An(i))return!1;const s=i>=0?i+1:e.IM(t);if(s<0||s>=e.V)return!1;const n=e.Tn(s);if(ri.NM(t,n).wM(this.oz).xM>1)return!1;if(f.tj)return this.ej=this.FB.zl,this.JK=f.Tl((()=>{this.ej===this.FB.zl&&this.ij(n),this.JK=0}),250),!0;return!(b.abs(n-t)<=.001)&&(this.ij(n),!0)}ij(t){this.FB.Fm(t,!1,!0)}sj(){0!==this.nj&&(f.bl(this.nj),this.nj=0),this.FB.pn(r.vv,this.rj)}hj(){0===this.aj&&(this.sj(),this.aj=f.uj(this.cj,250))}KK(){0!==this.aj&&(f.lj(this.aj),this.aj=0),this.sj(),this.FB.xd||(this.dj=0)}_j(){return!this.FB.md&&!this.FB.xd&&0!==this.FB.pd&&!this.FB.jl&&!this.FB.lt&&(this.vj()||this.jK.Pd>=Yv.TA)}vj(){const t=this.FB.zl,e=this.eK.Fl,i=e.pM(t);return-1!==i&&e.An(i)>t+rR}gj(t,e){const i=e.pM(t);return i>-1?e.An(i):t}constructor(t,e,i,s){this.eK=t,this.jK=e,this.FB=i,this.$K=!1,this.GK=[],this.JK=0,this.nj=0,this.mj=0,this.ej=0,this.dj=0,this.aj=0,this.wj=1,this.QK=t=>{const e=this.FB.zl,i=t.rz.br(e),s=t.rz.br(e,rR)&&this.FB.Pd<=Yv.bA;(i||s)&&this.HV(e)},this.YK=Xn((t=>{if(this.$K)return;if(this.jK.Pd<=Yv.bA){const t=this.FB.zl;this.HV(t)||this.cj()}}),100),this.rj=Xn((t=>{this.$K||0===this.aj&&this.hj()}),100),this.ZK=()=>{this._j()?0===this.aj&&(this.FB.kn(r.vv,this.rj),this.nj=f.Tl((()=>{this.hj()}),3500)):this.KK()},this.cj=()=>{const t=this.mj,e=this.dj,i=this.FB.zl,s=f.Al(),n=this.eK.Fl;if(t!==i)return this.mj=i,this.dj=s,this.wj=1,void(this.pj=f.yj?2e3:1e3);if(this._j()&&0!==n.V&&e>0&&s>e+this.pj){let t;const e=this.oz.cM().wM(n),s=e.PM(i);if(-1!==s){const n=e.Tn(s);if(n-i<1){const i=e.An(s);0,t=i}}var r;if(!t)t=null==(r=this.Aj)?void 0:r.determineStallJumpTarget(),t||(t=i+.01*this.wj,n.br(t)||(t=this.gj(i,n)));0,this.mj=t,this.wj++,this.pj=b.min(2*this.pj,1e4),this.ij(t)}},this.jK.kn(En.Rf,this.YK),this.FB.kn(r.Y_,this.YK),this.FB.kn(oR,this.ZK),this.Aj=s,this.pj=f.yj?2e3:1e3}};function aR(t){const e=[];if(t.bj&&e.push(t.bj.Fl),t.Tj&&e.push(t.Tj.Fl),0===e.length)return ri.BM();let i=0;for(const t of e)t.V>0&&(i=b.max(i,t.An(t.V-1)));const s=t.$V;let n=new ri([0,i],[!0,s]);for(let t of e)s&&t.V>0&&(t=t.gM(new ri([t.An(t.V-1),i],[!0,!0]))),n=n.Cn(t);return n}function Ge(t,e,i){const s=t.Fl;let n,r=s.pM(e);if(r>=0){if(!(r+1<s.V))return Promise.resolve();n=s.Tn(r+1)}else{if(r=s.IM(e),!(r>=0))return Promise.resolve();n=s.Tn(r)}return t.WA(n,1/0,i)}function uR(t,e,i){if(!t.br(e)){const s=t.pM(e,i);if(s>=0){const i=t.Tn(s);if(e<i)return i}}return e}var cR=class{Sj(){return new this.Ej}Pj(t){return this.Ej.isTypeSupported(t)}constructor(t){this.Ej=Ma(t)}};function Ma(t){return t&&Dd(qh.ManagedMediaSource)?qh.ManagedMediaSource:Dd(qh.MediaSource)?qh.MediaSource:void 0}var kr,lR=Bp.rP||Bp.hP,dR=Bp.fP||Bp.mP&&Bp.pP>=17;!function(t){t.fK="closed",t.VS="open",t.M_="ended"}(kr||(kr={}));var fR=class extends Me{get bj(){return this.Ij}get Tj(){return this.Rj}get ct(){if(this.Cj)return this.Cj;const t=this.XB.duration;return t===cs?1/0:t}xj(t){if(j(t)||t<0)throw new v("Invalid duration");this.Dj()?this.Nj(t):this.Cj=t}Nj(t){const e=t===1/0;if(e&&this.XB.setLiveSeekableRange){const t=2**39;this.XB.setLiveSeekableRange(0,t)}this.XB.duration=e?dR?1/0:cs:t,this.Cj=void 0}get Fl(){return lR?aR(this):function(t,e){let i=e;return i.V>0&&t.$V&&(i=i.gM(ri.DM(i.An(i.V-1)))),i}(this,ri._n(this.Gx.buffered))}get tz(){var t;return null==(t=this.Ij)?void 0:t.Fl}get ez(){var t;return null==(t=this.Rj)?void 0:t.Fl}get Rd(){return this.Bj.WK().Cn(new ri([0,this.ct],[!0,!0]))}Oj(t,e,i,s){this.Bj=new la(t,e,!!i,!!s)}get $V(){return(!this.Ij||this.Ij.$V())&&(!this.Rj||this.Rj.$V())}get Pd(){return this.XB.readyState}async JW(){const t=this.kx,e=Rt(t.Mj,(t=>bt(t.YB,"audio"))),i=Rt(t.Mj,(t=>bt(t.YB,"video")));if(this.Gx.disableRemotePlayback=!0,await this.Lj(),e){const t=new hI;var s;this.Fj.XK(t);const i=null!=(s=this.vK(e.YB))?s:e.YB;this.Uj=this.XB.addSourceBuffer(i),this.Ij=sR(this,this.FB,e,Fs.Cm,this.Uj,i,t),this.Ij.kn(uh.RV,this.bK)}if(i){const t=new hI;var n;this.Fj.XK(t);const e=null!=(n=this.vK(i.YB))?n:i.YB;this.Hj=this.XB.addSourceBuffer(e),this.Rj=sR(this,this.FB,i,Fs.Rm,this.Hj,e,t),this.Rj.kn(uh.RV,this.bK)}this.UV.Rn(this,t)}async Lj(){await super.YV(this.XB),"open"!==this.Pd&&await xu(this.XB,"sourceopen")}Dj(){if("open"!==this.Pd)return!1;const t=this.Ij&&this.Ij.ua,e=this.Rj&&this.Rj.ua;return!(t||e)}PK(){this.Wj=!0,this.Ij&&this.Ij.PK(),this.Rj&&this.Rj.PK(),this.Wj=!1,this.qj()}mK(){this.Ij&&this.Ij.mK(),this.Rj&&this.Rj.mK()}MV(t){const e=Rt(t.Mj,(t=>bt(t.YB,"audio"))),i=Rt(t.Mj,(t=>bt(t.YB,"video")));if(this.Ij){if(!e)return!1;if(!this.Ij.MV(e))return!1}else if(e)return!1;if(this.Rj){if(!i)return!1;if(!this.Rj.MV(i))return!1}else if(i)return!1;return!!super.MV(t)}async FV(t){const e=Rt(t.Mj,(t=>bt(t.YB,"audio"))),i=Rt(t.Mj,(t=>bt(t.YB,"video"))),s=[];this.Ij&&s.push(this.Ij.FV(e)),this.Rj&&s.push(this.Rj.FV(i)),await Promise.all(s),await super.FV(t)}async hl(){if(Bp.eP&&await this.JV(),this.Ij){if(await this.Ij.hl(),this.Ij=void 0,ib()&&(Bp.eP||Bp.Zk))try{this.XB.removeSourceBuffer(this.Uj)}catch(t){}this.Uj=void 0}if(this.Rj){if(await this.Rj.hl(),this.Rj=void 0,ib()&&(Bp.eP||Bp.Zk))try{this.XB.removeSourceBuffer(this.Hj)}catch(t){}this.Hj=void 0}this.Gx.src&&URL.revokeObjectURL(this.Gx.src),this.Gx.disableRemotePlayback=!1,this.FB.pn([r.rv,r.W_],this.Vj),this.Fj.bn(),Bp.Zk&&await this.JV(),await super.hl()}HK(){const t=this.kx,e=t.Mj.map((t=>bt(t.YB,"audio")&&this.Ij?this.Ij.Vp:bt(t.YB,"video")&&this.Rj?this.Rj.Vp:t));this.kx=no({},t,{Mj:e})}IK(){this.Wj||this.qj()}get zj(){if(!this.$V)return!1;const t=this.Fl;return 0!==t.V&&t.Tn(t.V-1)<=this.FB.zl}qj(){this.zj&&this.Dj()&&(this.XB.endOfStream(),this.Cj=void 0,this.To(new Ci(Be.iF)),this.FB.bK())}pK(){this.Dj()&&(this.$V?this.qj():void 0!==this.Cj&&this.Nj(this.Cj))}HV(t){return this.Fj.HV(t)}vK(t){return _R(this.Xj,t)}static iz(t){const e=Ma(t.Gj);if(void 0===e)return!1;if("function"!=typeof e.isTypeSupported)return!1;const i=new cR(t.Gj);for(const e of t.Mj)if(void 0===_R(i,e.YB))return!1;return!0}constructor(t,e,i,s,n,o=new cR(t.Gj),h){super(t,e,s,n),this.Ij=void 0,this.Uj=void 0,this.Rj=void 0,this.Hj=void 0,this.Bj=new la(0,1/0),this.Cj=void 0,this.Wj=!1,this.Vj=()=>{this.qj()},this.bK=()=>{this.FB.bK()},this.Xj=o,this.XB=this.Xj.Sj(),this.FB.kn([r.rv,r.W_],this.Vj),this.Fj=new hR(this,i,this.FB,h)}};function _R(t,e){const i=Ew(e),s="audio/mp4"===i.l_&&function(t,e){return Bn(t,e,((t,e)=>t===e))}(JI(i),["mp4a.40.34"]);if(t.Pj(e)&&(!s||!Bp.mP))return e;if(s){const e=Rt(['audio/mp4; codecs="mp3"',"audio/mpeg"],(e=>t.Pj(e)));return void 0!==e?e:void 0}}var lu=class extends Ci{constructor(t){super(r.W_),this.currentTime=t}},vR=[r.mv,r.Z_,r.rv,r.W_,r.Ah,r.Ch],gR=class extends d{get zl(){return this.OM}get Qj(){return this.Kj}get jj(){return this.Yj}get ct(){return this.aR}get jl(){return this.Zj}get md(){return this.FM}get Pd(){return this.Jj}get xd(){return this.MM}get ld(){return this.LM}set ld(t){this.ld!==t&&(this.LM=t,this.To(new Ao(this.zl,this.Hd)))}get pd(){return this.UM}set pd(t){this.pd!==t&&(this.UM=t,this.To(new Cs(this.zl,this.pd)))}get Hd(){return this.AR}set Hd(t){this.Hd!==t&&(this.AR=t,this.To(new Ao(this.zl,this.Hd)))}Fm(t,e,i){this.OM!==t&&(this.OM=t,this.Kj=e,i&&!this.MM?(this.Yj=!0,this.To(new lu(this.zl))):(this.Yj=!1,this.MM=!0,this.To(new Uh(this.zl))))}Zd(){this.FM||(this.FM=!0,this.To(new Cn(this.zl)))}Jd(){this.FM&&(this.FM=!1,this.To(new gs(this.zl)))}hl(){this.Lo()}constructor(t,e,i,s,n,r,o,h,a,u,c){super(),this.OM=t,this.aR=e,this.Zj=i,this.FM=s,this.MM=n,this.LM=r,this.UM=o,this.AR=h,this.Jj=a,this.Kj=u,this.Yj=c}};function mR(t){return new gR(t.zl,t.ct,t.jl,t.md,t.xd,t.ld,t.pd,t.Hd,t.Pd,!1,t.jj)}function wR(t,e){e.ct===t.ct||j(e.ct)&&j(t.ct)||t.To(new Pt(t.ct)),t.ld=e.ld,t.Hd=e.Hd,t.pd=e.pd,e.md?t.Zd():t.Jd().catch($d),e.zl!==t.zl||e.Pd>Yv.AA&&t.Pd===Yv.AA?t.Fm(e.zl,e.Qj,e.jj):!e.xd&&t.xd?t.To(new Uh(t.zl)):e.xd&&!t.xd&&t.Pd>=Yv.bA&&t.To(new ja(t.zl)),!e.jl&&t.jl&&t.To(new X(t.zl))}var Ve=class extends d{get Pd(){return this.Id()}$j(t){this.fD!==t&&(this.fD=t,this.To(new Io(this.FB.zl,t)))}tY(){this.$j(this.Id())}ir(){this.$j(Yv.AA)}hl(){this.Lo()}constructor(t){super(),this.fD=Yv.AA,this.eY=()=>{this.tY()},this.FB=t}},pR=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],Va=class extends Ve{Id(){let t=this.FB.VB.readyState;return t>Yv.bA&&this.FB.iY?Yv.bA:(this.FB.VB.seeking&&t>Yv.Qn&&(t=Yv.Qn),t)}hl(){for(const t of pR)this.FB.VB.removeEventListener(t,this.eY);super.hl()}constructor(t){super(t);for(const t of pR)this.FB.VB.addEventListener(t,this.eY)}},yR=class extends Ve{Id(){if(this.FB.VB.readyState===Yv.AA)return Yv.AA;const t=this.sY(),e=t?t.An-t.Tn:0;if(!t)return Yv.Qn;const i=this.FB.pd;return this.nY()||e>=3*i?Yv.SA:e>=3?Yv.TA:Yv.bA}sY(){const t=this.FB.zl,e=this.FB.Fl.vM(.04),i=e.pM(t);if(!(i<0))return{Tn:t,An:e.An(i)}}nY(){if(this.FB.jl)return!0;const t=this.FB.ct,e=this.sY();return!!e&&t-e.An<=.16666666666666666}hl(){this.FB.pn([r.rv,r.W_],this.eY);for(const t of pR)this.FB.VB.removeEventListener(t,this.eY);super.hl()}constructor(t){super(t),this.FB.kn([r.rv,r.W_],this.eY);for(const t of pR)this.FB.VB.addEventListener(t,this.eY)}},AR=[En.Rf,r.Ah,r.Ch,r.rv,r.ev,r.W_,r.V_,r.M_,lt.aa],bR=class extends d{rY(){return(!this.aD.jj||!this.aD.oY)&&this.aD.Pd<Yv.TA}hY(){return!this.aD.xd&&!(this.aD.md||this.aD.jl||this.aD.lt||this.rY())}Kn(){const t=this.aY;this.aY=this.hY(),!t&&this.aY&&this.To(new Tt(this.aD.zl))}ir(){this.aY=!1}hl(){this.Lo(),this.aD.pn(AR,this.NH)}constructor(t){super(),this.aY=!1,this.NH=()=>{this.Kn()},this.aD=t,this.aD.kn(AR,this.NH)}},TR=class extends bR{hY(){return this.uY&&super.hY()}Kn(){this.uY&&(this.Gx.paused||this.Gx.ended||this.Gx.error)&&(this.uY=!1),super.Kn()}ir(){super.ir(),this.uY=!1}hl(){this.Gx.removeEventListener(En.Pv,this.pD),super.hl()}constructor(t){super(t),this.uY=!1,this.pD=()=>{this.uY=!0,this.Kn()},this.Gx=t.VB,this.Gx.addEventListener(En.Pv,this.pD)}},SR=class extends Ci{constructor(t){super(lt.aa),this.lt=t}};function ER(t,e){return t.ob<=e&&t.hb>e}function mi(t,e){return function(t,e){return Mr(t.ob,e.ob,gm)}(t,e)||function(t,e){return Mr(t.hb,e.hb,gm)}(t,e)}function kR(t,e){return function(t,e){return Mr(t.mb,e.mb,gm)}(t,e)||function(t,e){return Mr(t.wb,e.wb,gm)}(t,e)}function kn(t,e,i){let s=function(t,e,i,s,n,r,o){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=t.length);let h=r,a=o-1;for(;h<=a;){const o=h+(a-h>>1),u=s(i(t[o]),e);if(u<0)h=o+1;else if(u>0)a=o-1;else{if(!(n&&o>r&&0===s(i(t[o-1]),e)))return o;a=o-1}}return~h}(t,e,tf,i,!0);if(s<0)return s;for(;s<t.length&&i(e,t[s])===Ze.ih;s++)if(t[s].kb(e))return s;return-(s+1)}function PR(t,e,i){const s=kn(t,e,i);return s>=0?s:-(s+1)}function IR(t){const e=t.Ht;if(!e)return-1;if(t instanceof No)return e.cY(t);const i=e.L;if(!i)return-1;const s=kn(i.Ff,t,mi);return s>=0?s:-1}function RR(t,e){const i=function(t,e,i){const s=t.length,n=e.length;let r=0,o=0;const h=[],a=[];for(;r<s&&o<n;){const s=t[r],n=e[o];s===n?(r++,o++):i(n,s)<=0?(h.push(n),o++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;o<n;)h.push(e[o]),o++;return{lY:h,dY:a}}(t,e,mi);return function(t,e){const i=e.length;for(let s=0;s<i;s++)t[s]=e[s];t.length=i}(t,e),i}var Et=class{get Ff(){return this.fY}get V(){return this.fY.length}get ma(){if(this.vf){const t=this.fY;this.vf.length=t.length;for(let e=0;e<t.length;e++)this.vf[e]=t[e].ma}else this.vf=this.pa();return this.vf}pa(){return function(t){const e=[];for(let i=0;i<t.V;i++)e[i]=t.hI(i).ma;return e.item=e=>{const i=0|e,s=t.hI(i);return s&&s.ma||void 0},g.defineProperty(e,"constructor",{value:dm}),e}(this)}qA(t){const e=this.fY;for(let i=e.length-1;i>=0;i-=1){const s=e[i];if(t.kb(s))return!0}return!1}hI(t){return this.fY[t]}constructor(t){this.vf=void 0,this.fY=t}},Le=class extends jt{pa(){return new CR(this.Ht.ma,this.Pd)}constructor(t,e){super(Bs.Rf),this.Ht=t,this.Pd=e}},CR=class extends Ir{constructor(t,e){super("readystatechange"),this.track=t,this.readyState=e}},Ye=class extends jt{pa(){return new xR(this.Ht.ma)}constructor(t){super(Bs.xf),this.Ht=t}},xR=class extends Ir{constructor(t){super("typechange"),this.track=t}},DR=class extends jt{pa(){return new NR(this.sb.ma)}constructor(t){super(Bs.gf),this.sb=t}},NR=class extends Ir{constructor(t){super("addcue"),this.cue=t}},BR=class extends jt{pa(){return new OR(this.sb.ma)}constructor(t){super(Bs.wf),this.sb=t}},OR=class extends Ir{constructor(t){super("removecue"),this.cue=t}},_h=class extends d{get W(){return this._Y}get L(){return this.vY}gY(t){return Rt(this.vY.Ff,(e=>e.o===t))}get KE(){return this.mY}set KE(t){this.mY=t}get c_(){return this.wY}get ma(){return this.vf||(this.vf=this.pa()),this.vf}pa(){return bi(this)}get o(){return this.XA}get Yf(){return this.GA}get o_(){return this.pY}set o_(t){this.pY=t}get Lt(){return this.yY}get jh(){return this.QA}set jh(t){t!==this.QA&&(this.QA=t,this.To(new cr(this)))}get gs(){return this.uR}get Zf(){return this.AY}get h_(){return this.hL}set h_(t){this.Jo(t)}Jo(t){const e=G(t);e!==this.h_&&(this.hL=e,e===_s.Th&&(this.bY.forEach((t=>{t.oo=!1})),wr(this.bY),this.TY=0),this.To(new Ys(this)))}get Pd(){return this.Jj}set Pd(t){this.Jj!==t&&(this.Jj=t,this.To(new Le(this,this.Jj)))}get d_(){return this.SY}set d_(t){this.SY=t}get l_(){return this.EY}set l_(t){this.EY!==t&&(this.EY=t,this.To(new Ye(this)))}XE(t){if(!t||t.Ht)return;const e=kn(this.kY,t,kR);if(e>=0)return;t.Ht=this;const i=-(e+1);this.kY.splice(i,0,t);const s=PR(this.L.Ff,t,mi);this.PY(t,s),this.To(new DR(t))}PY(t,e){this.fY.splice(e,0,t),this.IY(e),t.Rb=e,e<this.TY&&(this.TY=e)}$S(t){if(!t||t.Ht!==this)return;const e=this.cY(t);if(e<0)return;t.oo=!1;const i=this.bY,s=kn(i,t,mi);s>=0&&Zt(i,s);const n=kn(this.kY,t,kR);n>=0&&Zt(this.kY,n),this.RY(t,e),this.To(new BR(t))}RY(t,e){Zt(this.fY,e),this.IY(e),t.Rb=-1,this.TY>e&&--this.TY}Ab(t){if(!t||t.Ht!==this)return;const e=this.cY(t);if(e<0)return;this.RY(t,e);const i=PR(this.L.Ff,t,mi);this.PY(t,i);const s=Ud(this.bY,(e=>e===t));if(s>=0){Zt(this.bY,s);const e=PR(this.bY,t,mi);this.bY.splice(e,0,t)}}CY(t,e){const i=this.bY,s=this.fY;let n=this.TY,r=!1;e&&(n=0);for(let e=i.length-1;e>=0;e--){ER(i[e],t)||(r=!0,Zt(i,e))}for(;n<s.length&&s[n].ob<=t;){const e=s[n];if(0===t)break;ER(e,t)&&!Yi(i,e)&&(r=!0,i.push(e)),n++}r&&Wn(i,mi),this.TY=n}cY(t){return(-1===t.Rb||t.Rb>=this.xY)&&this.DY(),t.Rb}DY(){const t=this.fY;for(let e=this.xY;e<t.length;e++)t[e].Rb=e;this.xY=t.length}IY(t){t<this.xY&&(this.xY=b.max(t,0))}u_(t){this.c_||(this.h_=t)}bn(){this.Lo();const t=this.fY.slice();for(const e of t)e.bn();wr(this.fY),wr(this.kY),wr(this.bY)}constructor(t,e,i,s,n,r,o,h,a){super(),this.GA=ws(),this.mY=!1,this.hL=_s.Th,this.Jj=Gh.NONE,this.SY=void 0,this.fY=[],this.kY=[],this.bY=[],this.xY=0,this.TY=0,this.XA=e||"",this.pY=h||"",this.yY=t,this.uR=s||"",this.mY=Boolean(n),this.wY=Boolean(o),this.EY=r||nt.DEFAULT,this.QA=i||"",this.AY=a||[],this.vY=new Et(this.fY),this._Y=new Et(this.bY)}},MR=class extends us{pa(){return new LR(this.sb.ma)}constructor(t,e){super(re.eb,t),this.IT=e}},LR=class extends os{constructor(t){super("enter",t)}},FR=class extends us{pa(){return new UR(this.sb.ma)}constructor(t,e){super(re.ib,t),this.IT=e}},UR=class extends os{constructor(t){super("exit",t)}},ze=class extends jt{pa(){return new HR(this.sb.ma)}constructor(t){super(Bs.bf),this.sb=t}},HR=class extends Ir{constructor(t){super("entercue"),this.cue=t}},WR=class extends jt{pa(){return new qR(this.sb.ma)}constructor(t){super(Bs.Sf),this.sb=t}},qR=class extends Ir{constructor(t){super("exitcue"),this.cue=t}},ir=class extends Ro{get Yf(){return this.GA}get ob(){return this.NY.startTime}set ob(t){this.NY.startTime=t}get hb(){return this.NY.endTime}set hb(t){this.NY.endTime=t}get R(){return this.Tb}set R(t){this.Tb=t}get Sb(){return!!this.NY.pauseOnExit}set Sb(t){this.NY.pauseOnExit=!!t}get Ht(){return this.yb}set Ht(t){this.yb=t}get o(){return this.NY.id||""}get ma(){return this.vf||(this.vf=this.pa()),this.vf}pa(){return xh(this)}get oo(){return this.ao}set oo(t){this.oo!==t&&(this.ao=t,t?(this.To(new MR(this,this.ob)),this.yb&&this.yb.To(new ze(this))):(this.To(new FR(this,this.hb)),this.yb&&this.yb.To(new WR(this))))}kb(t){return this===t||wf(this,t)&&mm(this,t)&&this.Pb(t)}Pb(t){return qi(this.R,t.R)}bn(){this.Lo(),this.NY.removeEventListener("enter",this.BY),this.NY.removeEventListener("exit",this.OY)}constructor(t){super(),this.Tb=void 0,this.yb=void 0,this.vf=void 0,this.ao=!1,this.BY=()=>{this.oo=!0},this.OY=()=>{this.oo=!1},this.GA=im(),this.NY=t,this.mb=t.startTime,this.wb=t.endTime,this.NY.addEventListener("enter",this.BY),this.NY.addEventListener("exit",this.OY)}},VR=class extends jt{pa(){return new zR(this.Ht.ma)}constructor(t){super(Bs.kf),this.Ht=t}},zR=class extends Ir{constructor(t){super("cuechange"),this.track=t}};function XR(t){if(!t)return;let e=t.THEOplayerVTTRegion;return e||(e=new GR(t),t.THEOplayerVTTRegion=e),e}var GR=class{get MY(){return this.LY}get o(){return this.LY.id||""}get Ti(){return+this.LY.width||0}set Ti(t){this.LY.width=t||0}get Cb(){return+this.LY.lines||0}set Cb(t){this.LY.lines=t||0}get xb(){return+this.LY.regionAnchorX||0}set xb(t){this.LY.regionAnchorX=t||0}get Db(){return+this.LY.regionAnchorY||0}set Db(t){this.LY.regionAnchorY=t||0}get Bb(){return+this.LY.viewportAnchorX||0}set Bb(t){this.LY.viewportAnchorX=t||0}get Ob(){return+this.LY.viewportAnchorY||0}set Ob(t){this.LY.viewportAnchorY=t||0}get Nb(){return this.LY.scroll||""}get ma(){return this.vf||(this.vf=Sm(this)),this.vf}constructor(t){this.vf=void 0,this.LY=t}};var QR=class extends ir{get R(){return this.NY.text}set R(t){this.NY.text=t}get Mt(){return this.NY.vertical||""}set Mt(t){this.NY.vertical=t||""}get gb(){return this.NY.snapToLines}set gb(t){this.NY.snapToLines=t}get cb(){return this.NY.line}set cb(t){this.NY.line=t}get ww(){return+this.NY.size}set ww(t){this.NY.size=Eo(t,0,100)}get ma(){return this.vf||(this.vf=this.pa()),this.vf}pa(){return fm(this)}Pb(t){return wm(this,t)}constructor(t){super(t)}},KR=class extends QR{get vb(){return XR(this.NY.region)}get fb(){return this.NY.lineAlign||"start"}set fb(t){this.NY.lineAlign=t||"start"}get yo(){return this.NY.position}set yo(t){this.NY.position=t}get _b(){return this.NY.positionAlign||"auto"}set _b(t){this.NY.positionAlign=t||"auto"}get ub(){return this.NY.align||"center"}set ub(t){this.NY.align=t||"center"}constructor(t){super(t)}},jR=class extends QR{get vb(){return XR(this.MY)}get MY(){return function(t,e){if(void 0===e)return;let i=t&&t.regions;return i&&i.getRegionById(e)||void 0}(this.NY.track,this.NY.regionId)}get fb(){return function(t){return"middle"===t?"center":t}(this.NY.lineAlign||"start")}set fb(t){this.NY.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get yo(){return this.NY.position}set yo(t){this.NY.position=function(t,e){return lm(t,e)}(t,this.ub)}get _b(){return function(t){return um[t]}(this.NY.positionAlign||"middle")}set _b(t){this.NY.positionAlign=function(t,e){return am[cm(t,e)]}(t||"center",this.ub)}get ub(){return function(t){return"middle"===t?"center":t}(this.NY.align||"middle")}set ub(t){this.NY.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function YR(t,e){return t.R===e.R}function ZR(t,e){if(0===e.length)return;const i=e.length-1;if(e[i].ob<t.ob)return void JR(e,i,t.ob);const s=e[0];if(s.ob>t.ob)return void(t.hb=s.ob);const n=kn(e,t,mi);if(n>=0)return;const r=-(n+1),o=r-1;if(o>=0){e[o].ob<t.ob&&JR(e,o,t.ob)}if(r<e.length){const i=e[r];t.hb=i.ob}}function JR(t,e,i){const s=t[e].ob;for(let n=e;n>=0&&t[n].ob===s;n--)t[n].hb=i}function $R(t){return xh(t)}var tC,eC,iC=class extends ir{get R(){return this.FY}get ma(){return this.vf||(this.vf=this.pa()),this.vf}pa(){return $R(this)}Pb(t){return YR(this,t)}constructor(t,e){super(t),this.FY=e}};function Ft(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function ut(t){switch(t){case 0:return de;case 1:return Mv;case 2:return Ri;case 3:return zh}}function un(t,e){const i=e.Om,s=t.byteLength,n=fi(t);return e.Mm(s-i),Na(n,i,s).buffer}function on(t,e){return{id:t||"",data:e instanceof ArrayBuffer?e:void 0}}function sC(t,e,i){const s=Fo(t,e);if(!Ft(s))return;const n=ut(s);return{id:i,language:Ka(t,e,3),description:n(t,e),text:n(t,e)}}function nC(t,e,i){const s=Fo(t,e);if(!Ft(s))return;const n=ut(s);return{id:i,mimeType:de(t,e),fileName:n(t,e),description:n(t,e),data:un(t,e)}}function rC(t,e,i){const s=Fo(t,e);if(!Ft(s))return;const n=ut(s),r=[];for(;e.Om<t.byteLength;)r.push({involvement:n(t,e),involvee:n(t,e)});return{id:i,entries:r}}function oC(t,e,i){const s=Fo(t,e);if(!Ft(s))return;const n=ut(s),r=Ka(t,e,3),o=Fo(t,e),h=Fo(t,e),a=n(t,e);let u=!1;const c=[];for(;e.Om<t.byteLength;){let i;if(1===s){let s=Ov(t,e);void 0===s?s=u:u=s,i=Ri(t,e,s)}else i=n(t,e);if(!i||e.Om+4>t.byteLength)break;c.push({text:i,timestamp:to(t,e)})}return{id:i,language:r,format:o,contentType:h,description:a,entries:c}}function hC(t,e,i){return{id:i,ownerIdentifier:de(t,e),identifier:un(t,e)}}function aC(t,e,i){const s=Fo(t,e);if(!Ft(s))return;const n=ut(s);return{id:i,language:Ka(t,e,3),description:n(t,e),text:n(t,e)}}function uC(t,e,i){const s=Fo(t,e);if(!Ft(s))return;return{id:i,text:ut(s)(t,e)}}function cC(t,e,i){return{id:i,url:de(t,e)}}function lC(t,e,i){const s=Fo(t,e);if(!Ft(s))return;const n=ut(s);return{id:i,description:n(t,e),text:n(t,e)}}function dC(t,e,i){const s=Fo(t,e);if(!Ft(s))return;return{id:i,description:ut(s)(t,e),url:de(t,e)}}function fC(t,e,i){switch(i){case"COM":return sC(t,e,i);case"GEO":return nC(t,e,i);case"IPL":return rC(t,e,i);case"PIC":return function(t,e,i){const s=Fo(t,e);if(!Ft(s))return;const n=ut(s),r=Ka(t,e,3),o=Fo(t,e),h=n(t,e);let a,u;return"--\x3e"===r?(a=r,u=de(t,e)):(a="image/"+r.toLowerCase(),u=un(t,e)),{id:i,mimeType:a,pictureType:o,description:h,data:u}}(t,e,i);case"SLT":return oC(t,e,i);case"TXX":return lC(t,e,i);case"UFI":return hC(t,e,i);case"ULT":return aC(t,e,i);case"WXX":return dC(t,e,i);default:if("T"===i.charAt(0))return uC(t,e,i);if("W"===i.charAt(0))return cC(t,e,i)}}function _C(t,e,i){switch(i){case"APIC":return function(t,e,i){const s=Fo(t,e);if(!Ft(s))return;const n=ut(s),r=de(t,e),o=Fo(t,e),h=n(t,e);let a;return a="--\x3e"===r?de(t,e):un(t,e),{id:i,mimeType:r,pictureType:o,description:h,data:a}}(t,e,i);case"COMM":return sC(t,e,i);case"COMR":return function(t,e,i){const s=Fo(t,e);if(!Ft(s))return;const n=ut(s),r=de(t,e),o=Ka(t,e,8),h=de(t,e),a=Fo(t,e),u=n(t,e),c=n(t,e);let l,d;return e.Om<t.byteLength&&(l=de(t,e)||"image/",d=un(t,e)),{id:i,price:r,validUntil:o,contactURL:h,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:l,sellerLogo:d}}(t,e,i);case"GEOB":return nC(t,e,i);case"IPLS":return rC(t,e,i);case"PRIV":return function(t,e,i){return{id:i,ownerIdentifier:de(t,e),data:un(t,e)}}(t,e,i);case"POSS":return function(t,e,i){return{id:i,format:Fo(t,e),position:to(t,e)}}(t,e,i);case"SYLT":return oC(t,e,i);case"TXXX":return lC(t,e,i);case"UFID":return hC(t,e,i);case"USER":return function(t,e,i){const s=Fo(t,e);if(!Ft(s))return;const n=ut(s);return{id:i,language:Ka(t,e,3),text:n(t,e)}}(t,e,i);case"USLT":return aC(t,e,i);case"WXXX":return dC(t,e,i);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return uC(t,e,i);default:{const s=i.charAt(0);if("T"===s)return uC(t,e,i);if("W"===s)return cC(t,e,i)}}}!function(t){t[t.ISO_8859_1=0]="ISO_8859_1",t[t.UTF16_BOM=1]="UTF16_BOM",t[t.UTF16=2]="UTF16",t[t.UTF8=3]="UTF8"}(tC||(tC={})),function(t){t[t.V22=2]="V22",t[t.V23=3]="V23",t[t.V24=4]="V24"}(eC||(eC={}));var vC=10;function gC(t,e){return(127&Fo(t,e))<<21|(127&Fo(t,e))<<14|(127&Fo(t,e))<<7|127&Fo(t,e)}function mC(t,e){switch(t){case 4:return{UY:tt(e,0),HY:tt(e,1),WY:tt(e,2),qY:tt(e,3)};case 3:return{UY:tt(e,0),HY:tt(e,1),WY:tt(e,2)};case 2:return{UY:tt(e,0),VY:tt(e,1)}}}function wC(t,e,i){switch(i.Tw){case 3:i.Sw.HY&&function(t,e){const i=e.Om,s=to(t,e)+4,n=32768&Go(t,e);e.Fm(i+s),n&&to(t,e)}(t,e);break;case 4:i.Sw.HY&&function(t,e){const i=e.Om,s=gC(t,e);e.Fm(i+s)}(t,e)}}function pC(t,e){if(t.byteLength-e.Om<vC)return null;if(73!==Fo(t,e)||68!==Fo(t,e)||51!==Fo(t,e))return null;const i=Fo(t,e),s=Fo(t,e);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(i))return null;const n=Fo(t,e),r=gC(t,e);return{Tw:i,zY:s,Sw:mC(i,n),XY:r}}function yC(t,e,i){switch(i){case 2:return function(t,e){if(e.Om+6>t.byteLength)return;return{o:Ka(t,e,3),ww:Zh(t,e,3)}}(t,e);case 3:return function(t,e){if(e.Om+10>t.byteLength)return;const i=Ka(t,e,4),s=to(t,e);Fo(t,e);const n=Fo(t,e);return{o:i,ww:s,Sw:{VY:tt(n,0),GY:tt(n,1),groupingIdentity:tt(n,2)}}}(t,e);case 4:return function(t,e){if(e.Om+10>t.byteLength)return;const i=Ka(t,e,4),s=gC(t,e);Fo(t,e);const n=Fo(t,e);return{o:i,ww:s,Sw:{groupingIdentity:tt(n,1),VY:tt(n,4),GY:tt(n,5),UY:tt(n,6),QY:tt(n,7)}}}(t,e)}}function AC(t){const e=fi(t),i=new S(e.byteLength);let s=0;for(let t=0;t<e.byteLength;t++){const n=e[t];255===n&&t++,i[s]=n,s++}return wa(Na(i,0,s))}function bC(t,e){const i=e||new ds,s=pC(t,i);if(!s)return null;const n=function(t,e,i){const s=[],n=e.Om;let r=et(t,n,n+i.XY);const o=new ds;switch(e.Mm(i.XY),i.Tw){case 2:case 3:i.Sw.UY&&(r=AC(r))}wC(t,e,i);for(;o.Om<r.byteLength;){const t=TC(r,o,i);if(void 0===t)break;s.push(t)}return s}(t,i,s);return{mw:s,KY:n}}function TC(t,e,i){const s=yC(t,e,i.Tw);if(void 0===s)return;if(0===s.o.charCodeAt(0)||0===s.ww)return;const n=e.Om;let r,o,h=et(t,n,n+s.ww);switch(e.Mm(s.ww),i.Tw){case 2:{const t=s;o=h,r=fC(o,new ds,t.o);break}case 3:{const t=s,e=new ds;!function(t,e,i){const s=i.Sw;let n,r,o;s.VY&&(n=to(t,e)),s.GY&&(r=Fo(t,e)),s.groupingIdentity&&(o=Fo(t,e))}(h,e,t);o=et(h,e.Om,h.byteLength),r=_C(o,new ds,t.o);break}case 4:{const t=s,e=new ds;t.Sw.UY&&(h=AC(h)),function(t,e,i){const s=i.Sw;let n,r,o,h;s.groupingIdentity&&(n=Fo(t,e)),s.VY&&(r=to(t,e)),s.GY&&(o=Fo(t,e)),s.QY&&(h=gC(t,e))}(h,e,t);o=et(h,e.Om,h.byteLength),r=_C(o,new ds,t.o);break}}if(!r){const t=hh(fi(o));r=on(s.o,t.buffer)}return r}function SC(t){return function(t,e,i){return uC(t,e,i)}(new DataView(t.data),new ds,t.key)}function EC(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return SC(t);default:let e=t.key.charAt(0);if("T"===e)return function(t){return{id:t.key,text:t.data}}(t);if("W"===e)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return on(t.key,t.data)}(t)}var Nn=class t extends d{get W(){return this._Y}get KE(){return this.jY?this.jY.default:void 0}get L(){return this.vY}get ma(){return this.vf||(this.vf=this.pa()),this.vf}pa(){return bi(this)}get o(){return this.zA.id||this.jY&&this.jY.id||""}get Yf(){return this.GA}get o_(){return this.zA.inBandMetadataTrackDispatchType||""}get Lt(){return this.zA.kind||K.xm}get jh(){return this.QA}set jh(t){t!==this.QA&&(this.QA=t,void 0!==this.jY&&(this.jY.label=t),this.To(new cr(this)))}get gs(){return this.zA.language||""}get h_(){return this.hL}set h_(t){let e=this.h_;this.hL=G(t),this.YY();let i=this.h_;e!==i&&this.To(new Ys(this)),i!==_s.Th&&this.ZY(Gh.LOADING)}get JY(){return G(this.zA.mode)}set JY(t){this.zA.mode=t}get KA(){return this.zA}get Pd(){return this.Jj}get $Y(){return this.jY?+this.jY.readyState||Gh.NONE:Gh.LOADED}get d_(){return this.SY}get l_(){return this.EY}set l_(t){this.EY!==t&&(this.EY=t,this.To(new Ye(this)))}get tZ(){return this.eZ}set tZ(t){this.eZ=t,t&&(this.iZ=!0,u((()=>{this.iZ=!1}),50)),this.YY()}YY(){let t=this.h_;this.tZ||t!==_s.Jn?this.JY=t:this.JY=_s.a_}sZ(){let t=this.h_,e=this.JY;t!==e&&(this.tZ||t!==_s.Jn||e!==_s.a_)&&("metadata"===this.Lt&&e===_s.Th?this.h_=t:this.iZ&&e===_s.Th&&t===_s.Jn?this.JY=t:this.h_=e)}tY(t){this.Jj!==t&&(this.Jj=t,this.To(new Le(this,t)))}ZY(t){let e=b.max(this.Jj,this.$Y,t);this.tY(e)}static nZ(t){return t&&t.THEOplayerTextTrackCue||void 0}rZ(e){let i=t.nZ(e);if(i)return i;if(i=this.oZ(e),Qa(i))for(let t of i)t.Ht=this;else i.Ht=this;return e.THEOplayerTextTrackCue=i,i}oZ(t){return function(t){return!(!t||"org.id3"!==t.type||!t.value)}(t)?(this.l_=nt.ID3,function(t){let e;try{e=EC(t.value)}catch(t){e=on("")}return new iC(t,e)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.l_=nt.ID3,function(t){let e=[];try{let i=bC(new DataView(t.data));if(i)for(let s of i.KY)e.push(new iC(t,s))}catch(t){}return e}(t)):function(t){return"text"in t}(t)?(this.l_=nt.WEBVTT,function(t){return"regionId"in t}(t)?new jR(t):new KR(t)):new ir(t)}hZ(t){let e=[];if(!t)return e;let i=t.length;for(let s=0;s<i;s++){let i=this.rZ(t[s]||t.item(s));if(Qa(i))for(let t of i)e.push(t);else e.push(i)}return e}aZ(){let t=this.hZ(this.zA.cues),e=RR(this.fY,t);for(let t of e.dY)t.pn(re.ib,this.uZ),t.pn(re.eb,this.uZ),this.To(new BR(t));for(let t of e.lY)t.kn(re.eb,this.uZ),t.kn(re.ib,this.uZ),this.To(new DR(t))}CY(){let t=this.hZ(this.zA.activeCues),e=RR(this.bY,t);for(let t of e.dY)t.oo=!1;for(let t of e.lY)t.oo=!0;(e.lY.length||e.dY.length)&&this.To(new VR(this))}u_(t){this.h_=t}bn(){this.Lo();const t=this.fY.slice();for(let e of t)e.bn();wr(this.fY),wr(this.bY),this.zA.removeEventListener("cuechange",this.cZ),this.zA.removeEventListener("cuechange",this.uZ),this.jY&&(this.jY.removeEventListener("load",this.lZ),this.jY.removeEventListener("error",this.dZ),z(this.jY))}constructor(t,e,i=!0){super(),this.fY=[],this.bY=[],this.hL=_s.Th,this.Jj=Gh.NONE,this.SY=void 0,this.EY=nt.DEFAULT,this.iZ=!1,this.cZ=()=>{this.YY(),this.zA.removeEventListener("cuechange",this.cZ)},this.uZ=()=>{this.h_!==_s.Th&&(this.aZ(),this.CY(),this.fY.length&&this.ZY(Gh.LOADING))},this.lZ=()=>{this.ZY(Gh.LOADED)},this.dZ=()=>{this.ZY(Gh.ERROR)},this.zA=t,this.eZ=i,this.zA.addEventListener("cuechange",this.cZ),this.zA.addEventListener("cuechange",this.uZ),this.jY=e,this.jY&&(this.SY=eh(this.jY.src),this.jY.addEventListener("load",this.lZ),this.jY.addEventListener("error",this.dZ)),this.GA=ws(),this.QA=t.label||"",this.vY=new Et(this.fY),this._Y=new Et(this.bY),this.h_=this.JY,Ai((()=>{this.uZ(),this.ZY(Gh.NONE)}))}};function kC(t,e){return F(t.IT,e.IT)||function(t,e){return t.Ht===e.Ht?Mu(IR(t),IR(e)):hp(t.Ht,e.Ht)}(t.sb,e.sb)||function(t,e){return t===e?Ze.ih:t===re.eb?Ze.Qc:Ze.Gc}(t.type,e.type)}var PC=class{ir(){wr(this.fZ);for(const t of this.xu.slice())this.it(t);this._Z(),this.vZ=0,this.In=0,this.gZ=!1,this.mZ=!1,this.wZ=void 0}tt(t){if(!Yi(this.xu,t)){if(this.xu.push(t),t.kn(Bs.gf,this.pZ),t.kn(Bs.wf,this.yZ),t.kn(Bs.yf,this.AZ),t.kn(Bs.oa,this.bZ),t.L.V>0){for(const e of t.L.Ff)this.TZ.push(e);this.SZ()}this.EZ()}}it(t){if(so(this.xu,t)){if(t.pn(Bs.gf,this.pZ),t.pn(Bs.wf,this.yZ),t.pn(Bs.yf,this.AZ),t.pn(Bs.oa,this.bZ),t.L.V>0){for(const e of t.L.Ff)so(this.fZ,e),so(this.TZ,e);this.SZ()}this.EZ()}}EZ(){this.gZ=this.xu.some((t=>t.h_!==_s.Th))}kZ(){this.Ko.xd||this.Ko.md?this._Z():this.SZ()}SZ(){this.gZ&&(this.vZ||(this.vZ=this.IZ.PZ(this.RZ)))}_Z(){this.vZ&&(this.IZ.CZ(this.vZ),this.vZ=0)}xZ(){if(!this.gZ)return;if(this.Ko.xd)return;const t=this.xu,e=this.In;var i;const s=null!=(i=this.wZ)?i:this.Ko.zl,n=s-e<-.1;let r=this.mZ||n;r&&s>e&&s-e<.1&&(r=!1),this.mZ=!1,this.wZ=void 0;const o=[];for(const e of t)if(e.h_!==_s.Th){e.CY(s,r);for(const t of e.W.Ff)o.push(t)}const h=this.fZ.slice();if(r);else for(const i of t)i.h_!==_s.Th&&op(i,e-ne,s,h);for(let t=h.length-1;t>=0;t--)Yi(o,h[t])&&Zt(h,t);const a=[];if(!r)for(let t=h.length-1;t>=0;t--){const i=h[t];i.ob>e&&i.hb<=s&&(a.push(i),Zt(h,t))}for(const t of this.TZ)so(a,t);wr(this.TZ);const u=[],c=[];for(const t of a)t.oo||u.push(new MR(t,t.ob)),u.push(new FR(t,b.max(t.ob,t.hb))),t.oo=!1;for(const t of h)t.oo&&(u.push(new FR(t,b.max(t.ob,t.hb))),t.oo=!1);for(const t of o)t.oo||(u.push(new MR(t,t.ob)),t.oo=!0);u.sort(kC);for(const t of u){const e=t.sb;e.To(t);const i=e.Ht;i&&(t.type===re.eb?i.To(new ze(e)):i.To(new WR(e)),Yi(c,i)||c.push(i))}c.sort(hp);for(const t of c)t.To(new VR(t));this.In=s,this.fZ=o}bn(){this.ir(),this.Ko.pn(r.vv,this.DZ),this.Ko.pn(r.Ah,this.DZ),this.Ko.pn(En.Pv,this.DZ),this.Ko.pn(r.Ch,this.DZ),this.Ko.pn(r.rv,this.NZ),this.Ko.pn(r.ev,this.BZ)}constructor(t,e){this.xu=[],this.vZ=0,this.In=0,this.fZ=[],this.TZ=[],this.gZ=!1,this.mZ=!1,this.wZ=void 0,this.RZ=()=>{this.vZ=0,this.xZ(),this.kZ()},this.DZ=()=>{this.xZ(),this.kZ()},this.NZ=()=>{this.mZ=!0,this.wZ=this.Ko.zl,this._Z()},this.BZ=()=>{this.xZ(),this.kZ()},this.bZ=()=>{this.EZ(),this.xZ(),this.kZ()},this.pZ=t=>{const e=t.sb;Yi(this.TZ,e)||this.TZ.push(e),this.SZ()},this.yZ=t=>{const e=t.sb;so(this.fZ,e),so(this.TZ,e),this.SZ()},this.AZ=t=>{this.SZ()},this.IZ=e,this.Ko=t,t.kn(r.vv,this.DZ),t.kn(r.Ah,this.DZ),t.kn(En.Pv,this.DZ),t.kn(r.Ch,this.DZ),t.kn(r.rv,this.NZ),t.kn(r.ev,this.BZ),this.SZ()}},xa=class{PZ(t){return Ms(t)}CZ(t){Ee(t)}},IC=new xa,dn=class extends PC{constructor(t,e=IC){super(t,e)}},ln=class extends No{get ma(){return this.vf||(this.vf=$R(this)),this.vf}Pb(t){return YR(this,t)}constructor(t,e,i){super(t,1/0,e,!1,i)}},RC=class extends _h{constructor(t,e,i=nt.DEFAULT){super(K.Nm,"",e||"","",!1,i,!1,t)}},CC=class extends RC{XE(t){ZR(t,this.fY),super.XE(t)}pa(){return bi(this)}constructor(t,e){super(t,e),this.l_=nt.ID3}};function xC(t){const e=t&&t.THEOplayerTextTrackCue||void 0;if(e)return e;const i=t.startTime,s=EC(t.value);return t.THEOplayerTextTrackCue=new ln(i,s),t.THEOplayerTextTrackCue}var DC=class extends CC{get o(){return this.zA.id||""}get o_(){return this.zA.inBandMetadataTrackDispatchType||""}get gs(){return this.zA.language||""}Jo(t){super.Jo(t),this.JY=this.h_}get JY(){return G(this.zA.mode)}set JY(t){this.zA.mode=t}get KA(){return this.zA}ZY(t){this.Pd=b.max(this.Pd,t)}aZ(){let t=this.zA.cues;if(!t)return;let e=function(t){const e=t.length,i=[];for(let s=0;s<e;s++)i.push(xC(t[s]||t.item(s)));return Wn(i,mi),i}(t),i=RR(this.L.Ff.slice(),e);for(let t of i.dY)this.$S(t);for(let t of i.lY)this.XE(t)}bn(){this.zA.removeEventListener("cuechange",this.uZ),super.bn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.uZ=()=>{this.h_!==_s.Th&&(this.aZ(),this.ZY(Gh.LOADED))},this.zA=t,this.zA.addEventListener("cuechange",this.uZ),this.h_=this.JY,Ai((()=>{this.uZ()}))}},NC=class extends cp{OZ(){this.MZ.kn(Qs.cf,this.NB),this.MZ.kn(Qs.df,this.BB)}LZ(){this.MZ.pn(Qs.cf,this.NB),this.MZ.pn(Qs.df,this.BB)}FZ(t){const e=t.L.Ff[0];if(!BC(e))return;const i=function(t){const e=t.match(OC);if(!e)return;return{Ht:e[1],gs:e[2]}}(e.R.description),s=i.Ht,n=i.gs;if(this.UZ(s,n))return;const r=this.HE.UE(K.xm,t.o,s,n,!1,nt.TTML);this.tt(r),this.HZ.set(t.Yf,r);for(let e of t.L.Ff)BC(e)&&this.WZ(e);t.kn(Bs.gf,this.qZ)}UZ(t,e){return this.Z.Ff.some((i=>i.jh===t&&i.gs===e))}WZ(t){if(!t.Ht)return;const e=this.HZ.get(t.Ht.Yf),i=Ow(t.R.text,e,{sS:0,nS:1/0,rS:t.ob});for(let t of i)e.XE(t)}async ir(){for(let t of this.MZ.Ff)t.pn(Bs.gf,this.qZ);for(let t of this.Z.Ff)this.HE.QE(t);this.HZ.clear(),await super.ir()}async bn(){this.LZ(),await super.bn()}constructor(t,e){super(),this.HE=t,this.MZ=e,this.HZ=Re(),this.NB=async t=>{const e=t.Ht;if(e.l_||await e.Bl(Bs.xf),e.l_===nt.ID3){for(;0===e.L.V;)await e.Bl(Bs.gf);this.FZ(e)}},this.BB=t=>{const e=t.Ht;if(e.l_!==nt.ID3||!this.HZ.has(e.Yf))return;const i=this.HZ.get(e.Yf);this.it(i),this.HE.QE(i),e.pn(Bs.gf,this.qZ)},this.qZ=t=>{BC(t.sb)&&this.WZ(t.sb)},this.OZ()}};function BC(t){return function(t){return function(t){return"TXXX"===t.id||"TXX"===t.id}(t)&&OC.test(t.description)}(t.R)}var OC=/^Track:(.+),Lang:(.+)$/;var MC=class extends Ci{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(t){super(r.R_),this.errorObject=t}},He=class extends Ci{constructor(){super(r.C_)}},LC=class extends Ci{constructor(t){super("pv"),this.VZ=t}},FC=new xo,UC=class extends Ci{constructor(t){super("Xs"),this.session=t}},HC=class extends d{NC(){return this.zZ=!0,FC.Bx((t=>this.XZ(t)),this.Ox.fl)}async XZ(t){try{gi(t),await this.GZ.BD(t);const e=await this.GZ.OD(this.QZ.GP,this.QZ.nI,t);await this.KZ.NC(this.QZ.GP,this.QZ.nI,e)}catch(t){eo(t);const e=t instanceof ia?t.vI:void 0,i=new _r(Ot.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,e);throw this.As(i),i}}async qD(t,e){let i;try{i=function(t){return j_(t,Xp())}(t)?await this.GZ.ZD(new S(t),this.Ox.fl):await this.GZ.JD(new S(t),e,this.Ox.fl)}catch(t){if(Lr(t))return;throw t}if(this.Ox.fl.$c)return;const s=this.jZ,n=new Os;this.jZ=n;try{await this.KZ.Kn(i),await ye(100)}catch(t){const e=t instanceof ia?t.vI:void 0;throw new _r(Ot.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,e)}finally{void 0!==s&&await s.fI,n.lI(),this.jZ===n&&(this.jZ=void 0)}}As(t){const e=t instanceof _r?t:new _r(Ot.CONTENT_PROTECTION_ERROR,t.message,t);this.To(new MC(e)),this.Xs()}YZ(){this.KZ.pn("JP",this.LC),this.KZ.pn("YP",this.ZZ),this.KZ.pn("lt",this.JZ),this.$Z=!1,this.Ox.vl(),this.To(new UC(this))}async Xs(){let t;this.Lo();do{t=this.jZ,void 0!==t&&await t.fI}while(this.jZ!==t);this.YZ(),await this.KZ.Xs().catch($d)}constructor(t,e,i){super(),this.KZ=t,this.GZ=e,this.QZ=i,this.zZ=!1,this.$Z=!1,this.Ox=new Zs,this.LC=t=>{if(!this.Ox.fl.$c)switch(t.$P){case"license-request":case"license-renewal":this.qD(t.JP,t.tI).catch((t=>this.As(t)));break;default:this.As(new _r(Ot.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.$P))}},this.ZZ=t=>{this.KZ.kC.aI(((t,e)=>{switch(t){case"usable":f.Tl((()=>{this.$Z=!0,this.To(new He)}),100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this.To(new LC(e))}}))},this.JZ=t=>{this.As(new _r(Ot.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.kn("JP",this.LC),t.kn("YP",this.ZZ),t.kn("lt",this.JZ),t.TC.then((()=>this.YZ()),(t=>this.As(t)))}},WC=[r.C_,r.R_,r.wv],qC=class extends d{get vg(){return this.gg}ND(){return this.tJ.ND()}eJ(t){return this.iJ||(this.iJ=this.sJ(t)),this.iJ}async sJ(t){gi(t);const e=await this.tJ.ZD(new S(Xp()),t);if(gi(t),!this.HC)throw new v("Invalid MediaKeys when setting ServerCertificate");await this.HC.WC(e.buffer)}async nJ(t){if(!this.HC)throw new v("Invalid MediaKeys when creating KeySession");try{this.rJ.push(t);const e=await this.HC.UC("temporary"),i=new HC(e,this.tJ,t);return this.oJ.push(i),i.kn(WC,this.Rs),i.kn("Xs",this.hJ),i}finally{so(this.rJ,t)}}aJ(t){if(t.uJ)return!1;for(const e of this.oJ)if(VC(e.QZ,t))return!0;for(const e of this.rJ)if(VC(e,t))return!0;return!1}async bn(){this.HC=void 0,this.Lo();const t=this.oJ.slice();wr(this.oJ),await Promise.all(t.map((t=>t.Xs()))),this.tJ.hl()}constructor(t,e,i){super(),this.oJ=[],this.iJ=void 0,this.rJ=[],this.hJ=t=>{t.session.pn(WC,this.Rs),t.session.pn("Xs",this.hJ),so(this.oJ,t.session)},this.gg=t,this.HC=e,this.tJ=i}};function VC(t,e){return!t.uJ&&t.GP===e.GP&&j_(t.nI,e.nI)}var fn=class extends d{get cJ(){var t;return null==(t=this.gg)?void 0:t.vg}get lO(){return this.tJ}set lO(t){this.tJ=t}Rn(t,e){this.XB=t,this.FV(e)}FV(t){this.kx=t,this.lJ(this.Ox.fl).catch(yr)}async lJ(t){if(!f.Zs.dJ||!await this.fJ(t))return this.kx&&this.kx._J?await this.vJ(t):void 0}async fJ(t){var e,i;if(!(null==(e=this.kx)?void 0:e.ZB))return!1;let s=!1;var n;for(const e of null!=(n=null==(i=this.kx)?void 0:i.ZB)?n:[]){var r;for(const i of null!=(r=e.SB)?r:[])try{await this.gJ(e.vg.GP,i,t),s=!0}catch(t){eo(t)}if(s)return!0}return!1}async gJ(t,e,i){if(gi(i),!e.byteLength)return;if(!this.kx||!this.kx.ZB.length)throw new _r(Ot.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(t!==I_&&t!==C_&&t!==R_)return void 0;const s=ug(t,e),n=this.kx.ZB;let r;for(const e of n){gi(i);const n=s[e.vg.QP];if(n&&e.vg.GP===t)try{const t=await this.mJ(e,i);t.ND()&&await t.eJ();const s=this.FB.rd,r={GP:e.vg.GP,nI:n,uJ:s};if(this.wJ(t,r)){const e=await t.nJ(r);await e.NC()}return}catch(t){eo(t),r=t}}throw await f.sx()?new _r(Ot.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",r):new _r(Ot.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",r)}async vJ(t){var e;const i=null==(e=this.kx)?void 0:e.ZB;if(i)for(const e of i){gi(t);try{const i=await this.mJ(e,t);return void(i.ND()&&await i.eJ())}catch(t){eo(t)}}}wJ(t,e){return f.Zs.pJ||this.FB.yJ.PV||!t.aJ(e)}mJ(t,e){return this.VV.Bx((e=>this.AJ(t,e)),e)}async AJ(t,e){if(gi(e),!this.kx||!this.tJ||!this.XB)throw new v("Not initialized");if(this.gg){if(this.gg.vg!==t.vg)throw new v("Internal key system error");return this.gg}const i=this.tJ,s=no({},t,{bO:t.bO.map((e=>{var s;return no({},e,{persistentState:null!=(s=e.persistentState)?s:i.hN(t.vg),hx:e.hx||i.hx(t.vg)})}))}),n=await this.XB.BV(s.vg,s.bO),o=i.TB(s),h=new qC(s.vg,n,o);return h.kn([r.C_,r.R_,r.wv],this.Rs),this.gg=h,h}As(t){if(Lr(t))return;const e=t instanceof _r?t:new _r(Ot.CONTENT_PROTECTION_ERROR,t.message,t);this.To(new MC(e))}async ir(){this.XB=void 0,this.kx=void 0,this.Ox.vl(),this.Ox=new Zs,await this.bJ()}async bJ(){await this.VV.vl();const t=this.gg;t&&(t.pn(r.wv,this.Rs),this.gg=void 0,await t.bn())}async hl(){this.Lo(),this.FB.pn(vt.O_,this.TJ),await this.ir(),await this.VV.bn()}constructor(t){super(),this.Ox=new Zs,this.VV=new xo,this.kx=void 0,this.tJ=void 0,this.XB=void 0,this.gg=void 0,this.TJ=t=>{this.gJ(t.GP,t.nI,this.Ox.fl).catch((t=>this.As(t)))},this.FB=t,this.FB.kn(vt.O_,this.TJ)}},cn=class extends Ci{constructor(t){super(r.V_),this.currentTime=t}},zC=class extends d{get Pd(){return void 0!==this.SJ?this.SJ.Pd:Yv.AA}tY(){var t;null==(t=this.SJ)||t.tY()}ir(){var t;null==(t=this.SJ)||t.ir()}hl(){this.Lo(),void 0!==this.SJ&&(this.SJ.hl(),this.SJ=void 0)}EJ(t){if(this.SJ===t)return;const e=this.Pd;void 0!==this.SJ&&this.SJ.hl(),this.SJ=t,void 0!==t&&(t.kn(En.Rf,this.Rs),t.tY());const i=this.Pd;e!==i&&this.To(new Io(this.kJ.zl,i))}constructor(t){super(),this.kJ=t}},XC=Bp.rP||Bp.hP,GC=Bp.qP,QC=Bp.mP,KC=Bp.mP&&Bp.xk,jC=class extends d{PJ(){this.VB.ended||this.zl===this.ct||(this.IJ=!1)}get iY(){return this.RJ}get Fl(){return this.XB?this.XB.Fl:ri.BM()}get Hl(){const t=this.GB;if(!t||j(t.getTime()))return;const e=1e3*this.zl;return new Date(t.getTime()+e)}get GB(){if(this.VB.getStartDate)return this.MM&&this.CJ||(this.CJ=this.VB.getStartDate()),this.CJ}get zl(){return this.xJ?this.xJ.zl:void 0!==this.DJ?this.DJ:this.Gx.currentTime}get NJ(){return this.BJ}get ct(){return this.xJ?this.xJ.ct:this.XB?this.XB.ct:this.Gx.duration}get jl(){return this.xd?this.OJ():this.xJ?this.xJ.jl:this.Gx.ended||this.IJ}OJ(){return void 0!==this.DJ&&this.ct===this.DJ}get lt(){return this.WB}get VB(){return this.Gx}get md(){return this.MJ?this.LJ:this.xJ?this.xJ.md:this.Gx.paused}get bd(){return this.Ho.gM(ri._n(this.Gx.played))}get Ci(){return this.Gx.offsetHeight*f.Zs.FJ}get Ti(){return this.Gx.offsetWidth*f.Zs.FJ}get ka(){return this.HM}get Pd(){return this.UJ.Pd}get Rd(){return this.XB?this.XB.Rd:ri.BM()}get xd(){return this.xJ?this.xJ.xd:this.MM}get jj(){return this.xJ?this.xJ.jj:this.Yj}get oY(){return 0!==this.HJ}get ld(){return this.xJ?this.xJ.ld:this.Gx.muted}set ld(t){this.xJ?this.xJ.ld=t:(this.Gx.muted=t,this.WJ())}get pd(){return this.xJ?this.xJ.pd:void 0!==this.qJ?this.qJ:this.Gx.playbackRate}set pd(t){this.xJ?this.xJ.pd=t:this.md||this.RJ?(this.qJ=t,this.VJ()):(this.qJ=void 0,this.Gx.playbackRate=t,this.VJ())}VJ(){const t=this.pd;this.zJ!==t&&(this.zJ=t,this.To(new Cs(this.zl,t)))}get XJ(){return this.iM}get Hd(){return this.xJ?this.xJ.Hd:this.Gx.volume}set Hd(t){this.xJ?this.xJ.Hd=t:(this.Gx.volume=t,this.WJ())}WJ(){const t=this.Hd,e=this.ld;this.GJ===t&&this.QJ===e||(this.GJ=t,this.QJ=e,this.To(new Ao(this.zl,this.Hd)))}ud(){return LP(this.Gx)}Jd(){this.KJ||(this.KJ=!0);const t=this.jJ();return this.YJ(),t}YJ(){this.MJ?this.LJ&&(this.LJ=!1,this.To(new gs(this.zl))):this.ZJ()}ZJ(){if(this.xJ)this.xJ.Jd();else{Bp.mP&&!Bp.xk&&this.Gx.preload===Fi.KO&&(this.Gx.preload=Fi.Nm);const t=this.pd,e=this.Gx.play();t!==this.VB.playbackRate&&(this.pd=t),le(e)?e.then(this.JJ,this.$J):this.t$.hY()&&this.e$()}}Zd(){this.MJ?this.LJ||(this.LJ=!0,this.To(new Cn(this.zl))):this.i$()}i$(){this.xJ?this.xJ.Zd():(this.Gx.pause(),this.t$.Kn()),this.s$(new Sr)}jJ(){const t=new Os;return this.n$.push(t),t.fI}r$(){for(const t of this.n$)t.lI(void 0);wr(this.n$)}s$(t){for(const e of this.n$)e.dI(t);wr(this.n$)}e$(){this.MJ||this.xJ||this.r$()}o$(t){this.MJ||this.xJ||this.s$(t)}Fm(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.xJ?this.xJ.Fm(t,e,i):(this.h$.vl(),this.h$=new Zs,this.a$=this.u$(t,e,i,this.a$,this.h$.fl).catch($d))}UB(t){const e=this.GB;if(!e||j(e.getTime()))return;const i=(t.getTime()-e.getTime())/1e3;this.Fm(i)}async u$(t,e,i,s,n){try{for(this.DJ=t,this.c$=t,this.l$=f.Al(),i&&!this.MM?this.Yj=!0:(this.MM=!0,this.Yj=!1),this.IJ&&!this.OJ()&&(this.IJ=!1),this.Yj?this.To(new lu(this.zl)):this.To(new Uh(t)),await s.catch($d),gi(n),this.d$&&this.f$(),this.UJ.Pd===Yv.AA&&await this.UJ.Bl(En.Rf,n);0===this.Gx.seekable.length||KC&&!this.KJ;)await Promise.race([xu(this.Gx,"timeupdate",n),ye(100,n)]),gi(n);let o=uR(this.Fl,t,.05),h=this.Rd,a=!0,u=!1;for(;;){if(h=this.Rd,h.V>0&&!h.br(o)&&(o=h.lM(o),a=!0),e&&!this.Gx.fastSeek){const t=this.Fl;if(!t.br(o)){const e=uR(t,o,1);e!==o&&(o=e,a=!0)}}if(QC){const t=this._$();void 0!==t&&o>t&&(o=t,a=!0)}if(!u){const t=this.v$();void 0!==t&&o>t&&(u=!0,await this.g$(t,!1,n),await xu(this.Gx,"seeked",n),gi(n),a=!0)}if(a){a=!1,await this.g$(o,e,n),gi(n);let t=this.zl;h=this.Rd,o=h.lM(o);let i=1;for(;b.abs(o-t)>=ne;)h=this.Rd,o=ZC(o,h,i),await this.g$(o,e,n),gi(n),t=this.zl,i++}if(!(this.Gx.seeking||this.UJ.Pd<Yv.bA))break;await ts((t=>{var e;return Promise.race([xu(this.Gx,"seeked",t),this.Bl([r.Y_,r.N_],t),this.UJ.Bl(En.Rf,t),null==(e=this.XB)?void 0:e.Bl(Be.iF,t)].filter(it))}),n),gi(n)}this.m$()}catch(t){if(Lr(t))return;0}}async g$(t,e,i){gi(i);let s=this.Rd;if(t=s.lM(t),this.d$){let e=!0;for(;e||this.UJ.Pd<Yv.TA;)s=this.Rd,s.br(t)||(t=s.lM(t),e=!0),e?(e=!1,this.DJ=t,this.w$(this.zl)):await ts((t=>Promise.race([this.Bl(r.N_,t),this.UJ.Bl(En.Rf,t)])),i);gi(i)}const n=xu(this.Gx,"seeking",i);e&&this.Gx.fastSeek?this.Gx.fastSeek(t):this.Gx.currentTime=t,this.DJ=void 0,this.w$(this.zl),this.Gx.seeking&&await n}_$(){if(!this.XB||!this.XB.$V)return;const t=this.XB.tz,e=this.XB.ez,i=t&&e?t.Cn(e):t||e;if(!i||0===i.V)return;const s=i.Tn(i.V-1),n=i.An(i.V-1);return b.max(s,n-.001)}v$(){if(!this.XB||!this.XB.$V)return;const t=this.XB.ez;if(!t||0===t.V)return;const e=t.Tn(t.V-1);let i=t.An(t.V-1)-.02;return i-=.001,b.max(e,i)}w$(t){this.c$!==t&&(this.c$=t,this.Yj?this.To(new lu(t)):this.To(new Uh(t)))}m$(){const t=this.Yj;this.MM=!1,this.Yj=!1,this.l$=0,this.c$=NaN,this.d$&&this.p$(),t?(this.To(new cn(this.zl)),this.y$()):this.To(new ja(this.zl))}f$(){this.MJ||(this.LJ=this.md,this.MJ=!0,this.i$())}p$(){this.MJ&&(this.MJ=!1,this.LJ||this.YJ())}iz(t){for(const e of t){if(e.l_===$.nD&&rI.iz(e,this.Gx))return e;if(e.l_===$.rD&&fR.iz(e))return e}}we(){this.iM=!1,he(this.Gx)&&(this.Gx.style.display="none")}be(){this.iM=!0,he(this.Gx)&&(this.Gx.style.display="block")}get nt(){return this.A$}get Cu(){return this.GM}UE(t,e,i,s,n,r,o,h,a){const u=new _h(t,e,i,s,n,r,o,a,h);return this.xu.tt(u),this.b$.tt(u),u}sO(){return!0}rO(t,e,i,s,n){const r=h.createElement("track");r.src=eh(t),r.kind=e,r.label=null!=i?i:"",s&&(r.srclang=s),r.default=!!n,r.id=hk(),this.Gx.appendChild(r);const o=this.Gx.textTracks.getTrackById(r.id),a=new Nn(o,r);return this.T$.tt(a),this.S$.push(a),a}QE(t){this.xu.it(t),this.b$.it(t)}hO(){for(const t of this.xu.Ff.slice())t.bn();this.xu.ir();for(const t of this.S$.slice())this.T$.it(t),t.bn();wr(this.S$)}TO(){let t=this.Gx.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this.E$),t.addEventListener("removetrack",this.k$),t.addEventListener("change",this.P$))}cO(){let t=this.Gx.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this.E$),t.removeEventListener("removetrack",this.k$),t.removeEventListener("change",this.P$))}I$(t,e){if(Bp.mP){if(t.kind===K.Nm)return void this.R$(t);if(t.kind===K.HS&&""===t.label&&""===t.language&&!$C(t))return void this.C$(t,e)}JC(this.T$,t)||this.T$.tt(new Nn(t,e))}R$(t){t.mode=_s.a_;const e=new DC(t);this.T$.tt(e),this.b$.tt(e)}C$(t,e){const i=()=>{$C(t)&&(t.removeEventListener("cuechange",i),this.T$.tt(new Nn(t,e)))};t.addEventListener("cuechange",i),t.mode=_s.a_}x$(t){let e=this.Gx.getElementsByTagName("track");for(let i=0;i<e.length;i++){let s=e[i]||e.item(i);if(s.track===t)return s}}Rn(t){return this.D$.Bx((async e=>{if(gi(e),this.XB)throw new v("Already loaded a media source");let i;if(t.l_===$.nD)i=new rI(t,this,this.UV,this.ix),this.d$=!1,this.UJ.EJ(new Va(this));else{if(t.l_!==$.rD)throw new v("Unsupported configuration");{const e=this.d$?new yR(this):new Va(this);i=new fR(t,this,e,this.UV,this.ix,void 0,this.Aj),this.d$=XC,this.UJ.EJ(e),GC&&(this.kn(r.vv,this.N$),this.UJ.kn(En.Rf,this.B$))}}return this.XB=i,await i.JW(),i}))}O$(){if(this.RJ)return;const t=this.pd;this.RJ=!0,this.pd=t,this.Gx.playbackRate=0,this.UJ&&this.UJ.tY()}M$(){if(!this.RJ)return;const t=this.pd;this.RJ=!1,this.pd=t,this.L$()}L$(){this.Gx.currentTime=this.Gx.currentTime,this.UJ&&this.UJ.tY()}async ir(){this.MM=!1,this.Yj=!1,f.bl(this.HJ),this.HJ=0,this.Ho=ri.BM(),this.h$.vl(),this.DJ=void 0,this.c$=NaN,this.CJ=void 0,this.d$=!1,this.MJ=!1,this.WB=void 0,this.IJ=!1,this.F$=void 0,this.U$=!1,this.KJ=!1,this.H$&&(this.W$(),this.H$=!1),this.s$(new Sr),this.UJ.EJ(new Va(this)),this.t$.ir(),this.T$.ir(),this.M$(),GC&&(Ee(this.q$),this.q$=0,this.pn(r.vv,this.N$)),await this.D$.vl(),await this.D$.Bx((async()=>{this.XB&&(await this.XB.hl(),this.XB=void 0)}))}async hl(){this.H$=!1,this.V$(),this.cO(),await this.ir(),await this.D$.bn(),this.t$.hl(),this.UJ.hl(),await this.UV.hl(),this.hO(),this.xu.bn(),this.T$.bn(),await this.z$.bn(),this.X$.bn(),this.A$.bn(),this.Lo()}W$(){this.VB.addEventListener("play",this.G$),this.VB.addEventListener("pause",this.Q$),this.VB.addEventListener("timeupdate",this.K$),this.VB.addEventListener("progress",this.j$),this.VB.addEventListener("loadstart",this.Y$),this.VB.addEventListener("ended",this.Z$),this.VB.addEventListener("ratechange",this.J$),this.VB.addEventListener("volumechange",this.t0),this.VB.addEventListener("durationchange",this.e0),this.VB.addEventListener("resize",this.i0),this.VB.addEventListener("loadedmetadata",this.i0),this.VB.addEventListener("error",this.s0),this.VB.addEventListener("emptied",this.n0),eb()?(this.Gx.addEventListener("encrypted",this.r0),this.Gx.addEventListener("waitingforkey",this.o0)):void 0!==qh.WebKitMediaKeys&&"function"==typeof qh.WebKitMediaKeys.isTypeSupported?this.Gx.addEventListener("webkitneedkey",this.h0):ib()?this.Gx.addEventListener("webkitneedkey",this.a0):void 0!==qh.MSMediaKeys&&"function"==typeof qh.MSMediaKeys.isTypeSupported&&this.Gx.addEventListener("msneedkey",this.u0)}V$(){this.VB.removeEventListener("play",this.G$),this.VB.removeEventListener("pause",this.Q$),this.VB.removeEventListener("timeupdate",this.K$),this.VB.removeEventListener("progress",this.j$),this.VB.removeEventListener("loadstart",this.Y$),this.VB.removeEventListener("ended",this.Z$),this.VB.removeEventListener("ratechange",this.J$),this.VB.removeEventListener("volumechange",this.t0),this.VB.removeEventListener("durationchange",this.e0),this.VB.removeEventListener("resize",this.i0),this.VB.removeEventListener("loadedmetadata",this.i0),this.VB.removeEventListener("error",this.s0),this.VB.removeEventListener("encrypted",this.r0),this.VB.removeEventListener("waitingforkey",this.o0),this.VB.removeEventListener("webkitneedkey",this.h0),this.VB.removeEventListener("webkitneedkey",this.a0),this.VB.removeEventListener("msneedkey",this.u0),this.VB.removeEventListener("emptied",this.n0)}c0(){this.xJ||(this.Ho=this.bd,this.xJ=mR(this),this.V$(),this.xJ.kn(vR,this.Rs))}l0(){if(!this.xJ)return;const t=this.xJ;this.xJ=void 0,this.UJ.tY(),wR(this,t),t.hl(),this.W$()}y$(){const t=this.zl;this.To(new oh(t,void 0)),this.F$=t}CO(t){this.WB=t,this.s$(this.WB),this.To(new SR(this.WB))}get rd(){return!!this.Gx.webkitCurrentPlaybackTargetIsWireless}get d0(){return this.f0}get yJ(){return no({},eI)}_0(){this.d0||(vn(this.Gx,f.Zs),this.f0=!0)}v0(t){t.appendChild(this.Gx)}bK(){GC&&this.N$(),this.UJ.tY()}get lO(){return this.UV.lO}set lO(t){this.UV.lO=t}get g0(){return this.Aj}set g0(t){this.Aj=t}get cJ(){return this.UV.cJ}sf(){this.UV.bJ().catch($d),this.T$.ir()}get Xd(){return this.U$}set Xd(t){this.U$=t,this.H$&&!this.U$&&(this.H$=!1,this.W$())}constructor(t,e,i,s){super(),this.WB=void 0,this.iM=!0,this.XB=void 0,this.D$=new xo,this.xJ=void 0,this.HM=new eu,this.S$=[],this.DJ=void 0,this.l$=0,this.c$=NaN,this.CJ=void 0,this.F$=void 0,this.MM=!1,this.Yj=!1,this.m0=Yv.AA,this.HJ=0,this.a$=Promise.resolve(),this.h$=new Zs,this.n$=[],this.Ho=ri.BM(),this.qJ=void 0,this.zJ=1,this.QJ=!1,this.GJ=1,this.IJ=!1,this.U$=!1,this.H$=!1,this.d$=!1,this.MJ=!1,this.LJ=!1,this.RJ=!1,this.f0=!1,this.q$=0,this.KJ=!1,this.E$=t=>{const e=t.track,i=this.x$(e);this.I$(e,i)},this.k$=t=>{const e=JC(this.T$,t.track);e&&this.T$.it(e)},this.P$=()=>{for(let t=0;t<this.T$.V;t++){let e=this.T$.Hf(t);e instanceof Nn&&e.sZ()}},this.N$=()=>{if(void 0===this.XB||!iI(this.XB))return;const t=this.XB,e=t.bj,i=t.Tj;if(!e||!i)return;if(t.$V)return void this.M$();if(t.Pd===kr.fK)return;const s=e.Fl,n=i.Fl;if(0===s.V&&0===n.V)return void this.M$();const r=this.zl;if(r<s.Tn(0)||r<n.Tn(0))return void this.M$();if(s.br(r)!==n.br(r)){if(t.HV(r))return;this.O$()}else if(this.M$(),!this.q$&&this.t$.hY()){s.mM(n).bM(r,r+.5)&&(this.q$=Ms(this.w0))}},this.w0=()=>{this.q$=0,this.N$()},this.B$=()=>{if(this.xd||this.jj)return;if(this.UJ.Pd>=Yv.TA)return;if(void 0===this.XB||!iI(this.XB))return;const t=this.XB,e=t.bj,i=t.Tj;if(!e||!i)return;const s=this.zl,n=e.Fl,r=i.Fl;if(!n.br(s)||!r.br(s))return;n.mM(r).bM(s-5,s)&&(this.RJ?this.M$():this.L$())},this.G$=()=>{this.To(new gs(this.zl))},this.Q$=()=>{this.o$(new Sr),this.To(new Cn(this.zl))},this.p0=()=>{this.e$(),this.To(new Tt(this.zl))},this.J$=()=>{this.VJ()},this.e0=()=>{this.To(new Pt(this.ct))},this.j$=()=>{this.To(new gt(this.zl))},this.Y$=()=>{this.To(new Ce)},this.K$=()=>{const t=this.zl,e=this.xd,i=this.UJ.Pd<Yv.TA&&!this.jl,s=void 0!==this.F$,n=s&&this.F$!==t;(e||!s||n&&!i)&&this.y$()},this.Z$=()=>{!this.IJ&&this.jl&&(this.IJ=!0,this.To(new X(this.zl)))},this.s0=()=>{if(null!==this.Gx.error){const e=this.Gx.error;var t;this.CO(new zg(null!=(t=e.code)?t:qg.DECODE,e.message||"Error decoding media",void 0,e.msExtendedCode))}},this.n0=()=>{this.U$&&(this.V$(),this.H$=!0)},this.y0=t=>{if(f.bl(this.HJ),this.HJ=0,t.readyState<=Yv.bA)if(this.MM||this.Yj){const e=f.Al()-this.l$;if(e<250)return void(this.HJ=f.Tl((()=>this.y0(t)),250-e))}else if(void 0!==this.XB&&this.XB.HV(this.zl))return void(this.HJ=f.Tl((()=>this.y0(t)),250));this.m0!==t.readyState&&(this.m0=t.readyState,this.To(t))},this.t0=()=>{this.WJ()},this.i0=()=>{this.Fd>0&&this.Od>0&&this.To(new Sn)},this.r0=t=>{this.To(new Te(t.initDataType,t.initData||new ArrayBuffer(0)))},this.o0=()=>{this.To(new zp)},this.u0=t=>{const e=t.initData,i=e?hh(e).buffer:new ArrayBuffer(0);this.To(new Te(I_,i))},this.h0=t=>{if(t.initData){const e=function(t){try{const e=wa(t),i=new ds,s=M(e,i,to(e,i,!0));return Oi(Uv(s,!0))}catch(t){return}}(t.initData);if(!e)return;this.To(new Te(C_,e))}else this.To(new Te(C_,new ArrayBuffer(0)))},this.a0=t=>{const e=t.initData,i=e?hh(e).buffer:new ArrayBuffer(0);this.To(new Te(I_,i))},this.JJ=()=>{this.e$()},this.$J=t=>{this.o$(t)},this.A0=t=>{this.To(t),t.type===r.R_&&this.CO(Gg(t.errorObject))},this.Gx=t,this.ix=e,this.BJ=i,this.GM=s,this.UJ=new zC(this),this.UJ.kn(En.Rf,this.y0),this.UJ.EJ(new Va(this)),this.t$=new TR(this),this.t$.kn(En.Pv,this.p0),this.UV=new fn(this),this.UV.kn([r.C_,r.R_,r.wv],this.A0),this.xu=new ih,this.T$=new ih,this.X$=new Vo([this.xu,this.T$]),this.z$=new NC(this,this.X$),this.A$=new Vo([this.X$,this.z$.Z]),this.b$=new dn(this),this.W$(),this.TO()}};var YC=.01;function ZC(t,e,i){if(void 0===i&&(i=0),!e.V)return 0;let s=e.lM(t);const n=YC*i;return s===e.Tn(0)?s+=n:s===e.An(e.V-1)&&(s-=n),s}function JC(t,e){for(let i of t.Ff)if(i.KA===e)return i}function $C(t){return!!t.cues&&t.cues.length>0}var tx={dV:void 0,fV:void 0,_V:void 0,vV:void 0,gV:void 0,mV:void 0,bV:void 0,wV:void 0,pV:void 0,yV:void 0,AV:void 0},ex=class extends d{get ma(){return this.vf||(this.vf=YP(this)),this.vf}get dV(){}get fV(){}get _V(){}get vV(){}get gV(){}get mV(){}get bV(){}get wV(){}get pV(){}get yV(){}get AV(){}constructor(...t){super(...t),this.vf=void 0}},ix=class extends jC{Qd(){}get Od(){return 0}get Fd(){return 0}constructor(t,e,i){super(t,e,i,new ex)}},hr=class{get Se(){return this.b0}we(){this.b0.style.display="none"}be(){this.b0.style.display="block"}v0(t){t.appendChild(this.b0)}bn(){z(this.b0)}constructor(t=5){let e=qh.document.createElement("div");e.className="theoplayer-texttracks",e.style.position="absolute",e.style.display="none",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.width="100%",e.style.height="100%",e.style.lineHeight="1.3em",e.style.zIndex=""+t,this.b0=e,this.be()}};function sx(t,e){return no({},e,pf(function(t){return{dV:t.dV,fV:t.fV,_V:t._V,vV:t.vV,gV:t.gV,mV:t.mV,bV:t.bV,wV:t.wV,pV:t.pV,yV:t.yV,AV:t.AV}}(t)))}function nx(t){return t._V&&pi(t._V,"%")?Number(t._V.replace("%",""))/100:t._V&&pi(t._V,"em")?Number(t._V.replace("em","")):1}var rx,wo,Rn=class{T0(t){const e=this.S0(t);if(!e)return!1;for(const t of e)z(t);return this.E0(t),!0}get Ht(){return this.yb}get VB(){return this.Gx}get NJ(){return this.BJ}get k0(){return this.P0}get I0(){return this.R0}JW(){this.C0(),this.yb.L.Ff.forEach((t=>this.XE(t))),this.NJ.kn(wu.gn,this.x0),this.D0(this.NJ.tH,this.NJ.JU)}N0(t){this.R0=t,this.P0=sx(this.R0,this.B0),this.P0.dV&&(this.VB.style.fontFamily=this.P0.dV),this.P0.bV&&(this.VB.style.visibility=this.P0.bV),this.D0(this.NJ.tH,this.NJ.JU),this.O0(!0)}M0(){return this.P0}L0(t){return this.F0.has(t.Yf)}C0(){this.yb.kn(Bs.gf,this.U0),this.yb.kn(Bs.wf,this.H0),this.yb.kn(Bs.oa,this.W0)}q0(){this.yb.pn(Bs.gf,this.U0),this.yb.pn(Bs.wf,this.H0),this.yb.pn(Bs.oa,this.W0)}V0(t){t.kn(re.eb,this.z0),t.kn(re.ib,this.X0),t.kn(re.Nf,this.G0)}Q0(t){t.pn(re.eb,this.z0),t.pn(re.ib,this.X0),t.pn(re.Nf,this.G0)}XE(t){this.V0(t),t.oo&&this.K0(t)}$S(t){this.Q0(t),this.j0(t)}Y0(){this.yb.h_===_s.Jn?this.Z0():this.J0()}Z0(){if(!this.$0)return;this.$0=!1;const t=this.NJ.tH,e=this.NJ.JU;this.D0(t,e),this.O0(!1)}J0(){this.$0||(this.$0=!0,this.O0(!0))}K0(t){this.$0||t.oo&&!this.L0(t)&&this.O0(!1)}j0(t){this.L0(t)&&this.O0(!0)}t1(t){(t.oo||this.L0(t))&&this.O0(!0)}O0(t){const e=this.e1,i=this.$0?[]:this.yb.W.Ff.slice();this.i1(i,e,t),this.e1=i}S0(t){return this.F0.get(t.Yf)}s1(t,e){this.F0.set(t.Yf,e)}E0(t){this.F0.delete(t.Yf)}n1(){return this.e1.slice()}bn(){z(this.VB),this.F0.clear(),this.q0(),this.yb.L.Ff.forEach((t=>this.Q0(t))),this.NJ.pn(wu.gn,this.x0)}constructor(t,e,i,s,n){this.F0=Re(),this.$0=!0,this.R0=no({},tx),this.e1=[],this.U0=t=>this.XE(t.sb),this.H0=t=>this.$S(t.sb),this.W0=()=>this.Y0(),this.z0=t=>this.K0(t.sb),this.X0=t=>this.j0(t.sb),this.G0=t=>this.t1(t.sb),this.x0=t=>{this.D0(t.width,t.height)},this.yb=t,this.B0=this.P0=n,this.Gx=this.o1(i),this.BJ=s,e.appendChild(this.Gx)}};function ox(t,e){return t?{h1:t.h1,a1:t.a1,u1:t.u1,mu:e}:null}function hx(t){const e=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return e?{h1:k(e[1],16),a1:k(e[2],16),u1:k(e[3],16)}:null}function ax(t){return("0"+t.toString(16)).slice(-2)}function ux(t){return"#"+ax(t.h1)+ax(t.a1)+ax(t.u1)}function cx(t){const e=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return e?{h1:k(e[1],10),a1:k(e[2],10),u1:k(e[3],10),mu:w(e[4])}:null}function lx(t,e){return function(t){return t?"rgba("+t.h1+", "+t.a1+", "+t.u1+", "+t.mu+")":void 0}(ox(hx(t),e/100))}function dx(t){return fx[t||"none"]}!function(t){t.Fa='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.Ba='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.$a='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.Oa='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif'}(rx||(rx={})),function(t){t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent"}(wo||(wo={}));var fx={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},_x=Qd({monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:"monospace, sans-serif",monospaceSerif:"monospace, serif",proportionalSansSerif:"Arial",proportionalSerif:"Times New Roman",default:"monospace, sans-serif"}),vx={fV:wo.WHITE,dV:"Arial, Helvetica, Sans-Serif",_V:"100%",vV:wo.TRANSPARENT,gV:wo.TRANSPARENT,mV:"none",bV:"visible",wV:void 0,pV:void 0,yV:void 0,AV:void 0},gx=class extends Rn{o1(t){let e=h.createElement("div");e.className="theoplayer-ttml-texttrack-"+t;const i=e.style;return i.position="absolute",Mb(i,"flex"),i.overflow="hidden",i.pointerEvents="none",i.top="0",i.left="0",i.width="100%",i.height="100%",e}D0(t,e){let i=b.min(t,e)/15;this.VB.style.fontSize=i+"px"}i1(t,e,i){for(const t of e)!i&&t.oo||this.T0(t);for(const e of t)this.c1(e)}c1(t){let e=this.S0(t);e||(e=this.l1(t),this.s1(t,e));for(const t of e)this.VB.appendChild(t)}l1(t){let e=[],i=t.lS,s=t.oS,n=t.R;if(0===g.keys(s).length){const s=h.createElement("div");kx(s),mx(n,i,t._S,s,s),s.firstChild&&e.push(s)}else for(let r of g.keys(s)){let o=h.createElement("div");o.id=r,kx(o),yx(o,"region",s[r],i),mx(n,i,t._S,o,o),o.firstChild&&e.push(o)}return e}N0(t){!function(t,e){var i,s;t.style.marginTop=(null!=(i=e.wV)?i:0)+"px",t.style.marginBottom=(null!=(s=e.pV)?s:0)+"px",t.style.height="calc(100% - "+t.style.marginTop+" - "+t.style.marginBottom+")"}(this.VB,t),$P(this.VB,t)}constructor(t,e,i,s){super(t,e,i,s,vx)}};function mx(t,e,i,s,n){if(ks(t)&&function(t){return"SPAN"===t.DS.toUpperCase()||"P"===t.DS.toUpperCase()||"BR"===t.DS.toUpperCase()||"DIV"===t.DS.toUpperCase()||"BODY"===t.DS.toUpperCase()}(t)){let r=wx(t);if(!r||(null==n?void 0:n.id)===r){let r;if("BODY"===t.DS.toUpperCase())r=n;else{if(r=function(t){let e;switch(t.DS.toUpperCase()){case"BR":e=h.createElement("br");break;case"SPAN":e=h.createElement("span"),px(e,t);break;case"P":e=h.createElement("p"),function(t){const e=t.style;e.fontFamily="inherit",e.color="inherit",e.textAlign="inherit",e.padding="0",e.margin="0",e.lineHeight="inherit"}(e),px(e,t);break;case"DIV":e=h.createElement("div"),px(e,t)}return e}(t),!r)return;s.appendChild(r)}!function(t,e,i,s){let n=e.LS("style");Tx(t,e.DS,n,i,s),function(t,e,i){for(const s of e.xS)Sx(t,e.DS,s.DS,s.Qy,i)}(t,e,s)}(r,t,e,n),function(t,e,i){let s=null==e?void 0:e.LS("smpte:backgroundImage");if(s){s=s.replace("#","");let n=i&&Ax(i,(t=>t.xS.some((t=>"id"===t.DS&&t.Qy===s))));n&&bx(t,n,e,!0)}!function(t,e){const[i]=e.m;if(!i||"metadata"!==i.DS.toLowerCase())return;const[s]=i.m;bx(t,s,e)}(t,e)}(r,t,i);for(const s of t.FS)mx(s,e,i,r,n)}}else if(Aw(t)){const e=h.createTextNode(t.Xm);s.appendChild(e)}}function wx(t){const e=t.LS("region");if("p"===t.DS.toLowerCase())return e;const i=[];for(const e of t.m)i.push(wx(e));return function(t){t.filter(((e,i)=>t.indexOf(e)===i))}(i),0===i.length?e:1===i.length?null!=(s=i[0])?s:e:void 0;var s}function px(t,e){let i=e.MS(Iw,"id");i&&(t.id=i)}function yx(t,e,i,s){Tx(t,e,i.style,s,t);for(const s of g.keys(i))Sx(t,e,s,i[s],t)}function Ax(t,e){if(e(t))return t;for(let i of t.m){const t=Ax(i,e);if(t)return t}return null}function bx(t,e,i,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const e=t&&t.FS.length>0?t.FS[0]:null;return e&&Aw(e)?"data:image/png;base64,"+e.Xm:""}(e),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,e){const i=t.style;Mb(i,"flex");let s=e.LS("smpte:backgroundImageVertical");if(s)switch(s.toLowerCase()){case"left":i.alignItems="flex-start";break;case"center":i.alignItems="center";break;case"right":i.alignItems="flex-end";break;case"inherit":i.alignItems="inherit"}else i.alignItems="center";let n=e.LS("smpte:backgroundImageHorizontal");if(n)switch(n.toLowerCase()){case"left":i.justifyContent="flex-start";break;case"center":i.justifyContent="center";break;case"right":i.justifyContent="flex-end";break;case"inherit":i.justifyContent="inherit"}else i.justifyContent="center"}(t,i),t.appendChild(n)}function Tx(t,e,i,s,n){if(i)for(const r of i.split(" "))if(s[r])for(const i of g.keys(s[r]))"style"===i.toLowerCase()?Tx(t,e,s[r][i],s,n):Sx(t,e,i,s[r][i],n)}function Sx(t,e,i,s,n){const r=t.style;switch(i){case"backgroundColor":r.backgroundColor=s;break;case"color":r.color=s;break;case"direction":r.direction=s;break;case"display":"none"===s&&(r.display="none");break;case"fontFamily":{const t=_x.get(s);r.fontFamily=t||s;break}case"fontSize":pi(s,"px")?s=k(s)/24+"em":pi(s,"c")&&(s=s.replace("c","em")),r.fontSize=s;break;case"fontStyle":r.fontStyle=s;break;case"fontWeight":r.fontWeight=s;break;case"lineHeight":r.lineHeight=s;break;case"opacity":r.opacity=s;break;case"overflow":r.overflow=s;break;case"padding":r.padding=s;break;case"textAlign":"right"===s?(r.textAlign="right",r.justifyContent="flex-end"):"start"===s?(r.textAlign="start",r.justifyContent="flex-start"):"center"===s?(r.textAlign="center",r.justifyContent="center"):"end"===s?(r.textAlign="end",r.justifyContent="flex-end"):"left"===s&&(r.textAlign="left",r.justifyContent="flex-start");break;case"textDecoration":{let t=s;t=t.replace("lineThrough","line-through"),t=t.replace("noUnderline","none"),t=t.replace("noLineThrough","none"),t=t.replace("noOverline","none"),r.textDecoration=t;break}case"unicodeBidi":r.unicodeBidi=s.replace("bidiOverride","bidi-override");break;case"visibility":r.visibility=s;break;case"zIndex":r.zIndex=s;break;case"displayAlign":{let t;if("before"===s.toLowerCase())t="flex-start";else if("center"===s.toLowerCase())t="center";else{if("after"!==s.toLowerCase())return;t="flex-end"}r.alignItems=t;break}case"extent":{const i=Ex(e.toLowerCase())?n:t;let r,o,h=s.split(" ");h.length>=2?(r=h[0],o=h[1]):r=o="100%",i&&(i.style.height=o,i.style.width=r);break}case"origin":{const i=Ex(e.toLowerCase())?n:t,[r,o]=s.split(" ");i&&(r||o)&&(r&&(i.style.left=r),o&&(i.style.top=o));break}case"showBackground":case"textOutline":break;case"wrapOption":r.whiteSpace=s.replace("noWrap","nowrp").replace("wrap","normal").replace("nowrp","nowrap");break;case"writingMode":{let t,e,i,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",e="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",i="upright";break;case"tblr":t="vertical-lr",i="upright";break;case"rl":t="horizontal-tb",e="rtl";break;default:return}r.writingMode=t,r.setProperty("-webkit-writing-mode",t),e&&(r.direction=e),i&&(r.textOrientation=i,r.setProperty("-webkit-text-orientation",i)),n&&(r.unicodeBidi=n);break}case"linePadding":if(pi(s,"c")){let t=s.replace("c","em");r.paddingLeft=r.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?r.textAlign="":r.textAlign=s}}function Ex(t){return"div"===t||"p"===t||"span"===t}function kx(t){const e=t.style;Mb(e,"flex"),e.top="auto",e.left="5%",e.width="90%",e.height="100%",e.maxHeight="100%",e.maxWidth="100%",e.alignItems="flex-start",e.overflow="visible",e.position="absolute",e.fontFamily="Arial, Helvetica, Sans-Serif",e.color="white",e.textShadow="rgb(0, 0, 0) -1px -1px 0px, rgb(0, 0, 0) 1px -1px 0px, rgb(0, 0, 0) -1px 1px 0px, rgb(0, 0, 0) 1px 1px 0px",e.textAlign="start",e.writingMode="horizontal-tb",e.setProperty("-webkit-writing-mode","horizontal-tb"),e.padding="0",e.margin="0",e.lineHeight="1.3em"}var Px,Ix,Rx=void 0;function Cx(t){return Rx||(Rx=qh.document.createElement("textarea")),Rx.innerHTML=t,Rx.value}function xx(t,e){let i="Data",s="",n=[],r=t.charAt(e.Om),o="",h={l_:"starttag",TN:"",d1:[]};for(;e.Om<t.length+1;){switch(r=e.Om<t.length?t.charAt(e.Om):"EOF",i){case"Data":switch(r){case"&":let n=t.substring(e.Om).match(/&#?[0-9a-zA-Z]+;/);n?(s+=Cx(n[0]),e.Mm(n[0].length-1)):s+="&";break;case"<":if(s)return{l_:"string",R:s};i="Tag";break;case"EOF":return{l_:"string",R:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":i="StartTagAnnotation";break;case".":i="StartTagClass";break;case"/":i="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,i="TimestampTag";break;case">":return e.Mm(1),h;case"EOF":return h;default:s=r,i="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":i="StartTagAnnotation";break;case"\n":o=r,i="StartTagAnnotation";break;case".":i="StartTagClass";break;case">":return e.Mm(1),{l_:"starttag",TN:s,d1:[]};case"EOF":return{l_:"starttag",TN:s,d1:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(o),o="",i="StartTagAnnotation";break;case"\n":n.push(o),o=r,i="StartTagAnnotation";break;case".":n.push(o),o="";break;case">":return e.Mm(1),n.push(o),{l_:"starttag",TN:s,d1:n};case"EOF":return n.push(o),{l_:"starttag",TN:s,d1:n};default:o+=r}break;case"StartTagAnnotation":switch(r){case"&":i="CharRefInAnnotation";break;case">":e.Mm(1);let t=o.trim();return t=t.replace(/\s/," "),{l_:"starttag",TN:s,d1:n,f1:t};default:o+=r}break;case"CharRefInAnnotation":let a="";for(let i=e.Om;">"===t.charAt(i);i++)a+=t.charAt(i);o+=a||"&",i="StartTagAnnotation";break;case"EndTag":switch(r){case">":return e.Mm(1),{l_:"endtag",TN:s};case"EOF":return{l_:"endtag",TN:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return e.Mm(1),{l_:"timestamp",_1:s};case"EOF":return{l_:"timestamp",_1:s};default:s+=r}}e.Mm(1)}return h}function Dx(t){let e;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};const i=h.documentElement,n=h.body,r=i.clientLeft||n.clientLeft||0,o=s.pageXOffset||n.scrollLeft,a=e.left+o-r,u=i.clientTop||n.clientTop||0,c=s.pageYOffset||n.scrollTop,l=e.top+c-u;return{left:b.round(a),top:b.round(l)}}function Nx(t,e,i,s){if(void 0===s&&(s=0),!t||!e)return;t.style.left="0px";let n=t.getClientRects(),r=e.getClientRects();if(0===n.length||0===r.length)return;let o=n[0],h=r[0],a=o.width/2+o.left;!function(t,e,i,s){void 0===s&&(s=0);!function(t,e,i,s,n,r){void 0===r&&(r=0);const o=t.getClientRects();if(n&&o.length>0){const t=o[0];e=Eo(e,n[i]+r-t[i],n[s]-r-t[s])}t.style[i]=e+"px"}(t,e,"left","right",i,s)}(t,h.width/2+h.left-a,i,s)}function Bx(t,e){void 0===t.textContent?t.innerText=e:t.textContent=e}!function(t){t.v1="Data",t.g1="Tag",t.m1="StartTag",t.w1="StartTagClass",t.A1="StartTagAnnotation",t.b1="CharRefInAnnotation",t.T1="EndTag",t.S1="TimestampTag"}(Px||(Px={})),function(t){t.E1="string",t.P1="starttag",t.I1="endtag",t.R1="timestamp"}(Ix||(Ix={}));var Ox=class t{get C1(){return this.D1+this.Ti}set C1(t){this.D1=t-this.Ti}get N1(){return this.B1+this.Ci}set N1(t){this.B1=t-this.Ci}O1(t){return this.D1<t.C1&&this.C1>t.D1&&this.B1<t.N1&&this.N1>t.B1}qA(t){return this.D1<=t.D1&&t.C1<=this.C1&&this.B1<=t.B1&&t.N1<=this.N1}Um(){return new t(this.D1,this.B1,this.Ti,this.Ci)}M1(e){const i=this.D1+e,s=this.B1+e,n=b.max(0,this.Ti-2*e),r=b.max(0,this.Ci-2*e);return new t(i,s,n,r)}constructor(t,e,i,s){this.D1=t,this.B1=e,this.Ti=i,this.Ci=s}},Mx={fV:wo.WHITE,dV:"sans-serif",_V:"100%",vV:"rgba(0,0,0,0.8)",gV:wo.TRANSPARENT,mV:"none",bV:"visible",wV:void 0,pV:void 0,yV:void 0,AV:void 0},Lx="theoplayer-webvtt-region-",Fx="theoplayer-webvtt-styling-",Ux="theoplayer-webvtt-default-style",Hx=5.23,Wx=1.14,qx=class extends Rn{o1(t){let e=h.createElement("div");e.className="theoplayer-webvtt-texttrack-"+t,Ca(e),e.style.overflow="hidden",e.style.pointerEvents="none";const i=this.k0.dV;return i&&(e.style.fontFamily=i),e.style.whiteSpace="pre-line",function(){if(h.getElementById(Ux))return;const t=[];for(const[e,i]of sD)t.push("."+Fx+e+" { color: "+i+" !important; }"),t.push("."+Fx+"L1"+e+" { background-color: "+i+" !important; }"),t.push("video::cue(."+e+") { color: "+i+"; }"),t.push("F1"+e+") { background-color: "+i+"; }");const e=h.createElement("style");e.id=Ux,e.innerHTML=t.join("\n"),h.body.appendChild(e)}(),e}JW(){this.VB.appendChild(this.U1),super.JW()}D0(t,e){const i=b.min(t/100,e/100),s=nx(this.k0);this.H1.forEach((t=>{let{vb:e,W1:n}=t;this.q1(n,i,s,e)})),this.q1(this.U1,i,s)}N0(t){$P(this.VB,t),super.N0(t)}i1(t,e,i){const s=this.VB,n=this.NJ.JU/100;let r=[];for(const e of t)void 0!==e.vb&&(Yi(r,e.vb)||r.push(e.vb));this.H1.forEach(((t,e)=>{let{vb:s,W1:n}=t;!i&&Yi(r,s)||(z(n),this.H1.delete(e))}));for(const t of e)!i&&t.oo||this.T0(t);let o=[];const h=Jx(this.U1.getBoundingClientRect());o.push(...this.V1(h));for(const t of r){let e;this.H1.has(t.o)?e=this.H1.get(t.o).W1:(e=jx(t,n),s.appendChild(e),this.H1.set(t.o,{vb:t,W1:e})),o.push(Jx(e.getBoundingClientRect()))}t.sort(nD);for(const e of t){const t=this.c1(e,o,h);void 0!==t&&o.push(t.M1(.1))}}V1(t){const e=[],i=this.k0;if(void 0!==i.wV){const s=t.Um();s.Ci=i.wV,e.push(s)}if(void 0!==i.pV){const s=t.Um();s.Ci=i.pV,s.N1=t.N1,e.push(s)}return e}c1(t,e,i){var s;let n;t.vb?(n=this.H1.get(t.vb.o).W1,"up"===t.vb.Nb&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.U1;let r=null==(s=this.S0(t))?void 0:s[0];if(r||(r=this.z1(t),this.s1(t,[r])),n.appendChild(r),t.vb||(Vx(r,t),t.gb?function(t,e,i,s){const n=Yx(t),r=n?i.Ci:i.Ti;let o=w(getComputedStyle(e).lineHeight);if(0===o||j(o))return;let h=Jx(e.getBoundingClientRect()),a=b.round(ym(t));"rl"===t.Mt&&(a=-(a+1));let u=o*a;"rl"===t.Mt&&(u=u-h.Ti+o);a<0&&(u+=r,o=-o);n?h.B1+=u:h.D1+=u;const c=h.Um();let l=!1;for(;!i.qA(h)||Zx(h,s);)if(n)if(o<0&&h.B1<i.B1||o>0&&h.N1>i.N1){if(h.B1=c.B1,l)break;o=-o,l=!0}else h.B1+=o;else if(o<0&&h.D1<i.D1||o>0&&h.C1>i.C1){if(h.D1=c.D1,l)break;o=-o,l=!0}else h.D1+=o;n?e.style.top=(h.B1-i.B1)/i.Ci*100+"%":e.style.left=(h.D1-i.D1)/i.Ti*100+"%"}(t,r,i,e):function(t,e,i,s){let n=Jx(e.getBoundingClientRect());if(0===n.Ti||0===n.Ci)return;Yx(t)?"center"===t.fb?n.B1-=n.Ci/2:"end"===t.fb&&(n.B1-=n.Ci):"center"===t.fb?n.D1-=n.Ti/2:"end"===t.fb&&(n.D1-=n.Ti);let r,o=n.Um(),h=o,a=1,u=!1;r=""===t.Mt?[2,3,0,1]:"lr"===t.Mt?[0,1,2,3]:[1,0,2,3];const c=4,l=w(getComputedStyle(e).lineHeight)/c;if(!j(l)&&l>0){for(let t=0;t<r.length&&!u;t++){for(;!tD(n,i,r[t],.01)&&(!i.qA(n)||Zx(n,s));)$x(n,r[t],l);if(i.qA(n)){h=n.Um(),u=!0;break}let e=eD(n,i);a>e&&(h=n.Um(),a=e),n=o.Um()}i.qA(n)||(h=o.Um())}e.style.left=(h.D1-i.D1)/i.Ti*100+"%",e.style.top=(h.B1-i.B1)/i.Ci*100+"%"}(t,r,i,e)),!t.vb)return Jx(r.getBoundingClientRect())}z1(t){let e=new ds,i=t.R,s=this.X1(t),n={G1:void 0,Se:s},r=n,o="",a="",u=[n],c=[],l=[];for(;e.Om<i.length;){let t=xx(i,e);if(t.l_===Ix.E1){const e=h.createElement("span");Bx(e,t.R),zx(e,u),""!==o&&(e.lang=o),this.Q1(e,a),r.Se.appendChild(e)}else if(t.l_===Ix.P1){const e=t.TN.toLowerCase();switch(e){case"i":case"b":case"u":case"ruby":{let i=h.createElement(e);r.Se.appendChild(i),r={G1:t,Se:i},u.push(r);break}case"rt":var d;if("ruby"===(null==(d=r.G1)?void 0:d.TN.toLowerCase())){let e=h.createElement("rt");r.Se.appendChild(e),r={G1:t,Se:e},u.push(r)}break;case"c":case"v":r={G1:t,Se:r.Se},u.push(r);break;case"font":{var f;const e=null==(f=t.f1)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);e&&(a=e[1],l.push(a),r={G1:t,Se:r.Se},u.push(r));break}case"lang":var _;o=null!=(_=t.f1)?_:"",c.push(o)}}else if(t.l_===Ix.I1){var v;const e=t.TN.toLowerCase(),i=null==(v=r.G1)?void 0:v.TN.toLowerCase();i===e?(u.pop(),r=u[u.length-1],"font"===e&&(l.pop(),a=l.length>0?l[l.length-1]:"")):"rt"===i&&"ruby"===e?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===e&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.l_===Ix.R1){let e=t._1,i=new ds;try{ew(e,i)}catch(t){OE("ERROR collecting timestamp",t)}}}return s}Q1(t,e){const i=this.k0,s=this.I0;i.vV&&(t.style.background=i.vV);const n=s.fV||e||i.fV;n&&(t.style.color=n)}q1(t,e,i,s){if(s){let n=Xx(s,e);t.style.height=n*i+"px",t.style.left=Gx(s)+"%",t.style.top=Qx(s,e)+"px"}t.style.fontSize=Hx*e*i+"px"}X1(t){const e=h.createElement("div");e.style.position="absolute",e.style.margin="0",e.style.padding="0",e.style.unicodeBidi="plaintext",e.style.wordWrap="break-word",e.style.overflowWrap="break-word",e.style.width="auto",e.style.textAlign=t.ub,function(t,e){"rl"===e.Mt?t.style.writingMode="vertical-rl":"lr"===e.Mt?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(e,t),function(t,e){let i=Tm(e);Yx(e)?(t.style.width=i+"%",t.style.height="auto"):(t.style.height=i+"%",t.style.width="auto")}(e,t),Vx(e,t);const i=this.k0.gV;i&&(e.style.background=i);const s=this.k0.fV;return s&&(e.style.color=s),e.style.textShadow=dx(this.k0.mV),e}constructor(t,e,i,s){super(t,e,i,s,Mx),this.H1=rs(),this.U1=Kx(3)}};function Vx(t,e){let i,s,n=bm(e),r=Am(e),o=Tm(e);if(Yx(e)){switch(n){case"line-left":i=r;break;case"center":i=r-o/2;break;case"line-right":i=r-o}s=e.gb?0:ym(e)}else{switch(n){case"line-left":s=r;break;case"center":s=r-o/2;break;case"line-right":s=r-o}i=e.gb?0:ym(e)}t.style.left=i+"%",t.style.top=s+"%"}function zx(t,e){for(const i of e)if(i.G1){for(const e of i.G1.d1)Nb(t,Fx+e);"v"===i.G1.TN.toLowerCase()&&i.G1.f1&&Nb(t,"theoplayer-webvtt-voice-"+i.G1.f1)}}function Xx(t,e){return t.Cb*(Hx*e)*Wx}function Gx(t){return t.Bb-t.xb*t.Ti/100}function Qx(t,e){let i=t.Ob,s=t.Db*Xx(t,e)/100;return b.max(0,i-s)}function Kx(t){let e=h.createElement("div");return e.className=Lx+"default",Ca(e),e.style.wordWrap="break-word",e.style.writingMode="horizontal-tb",e.style.pointerEvents="none",e.style.width="auto",e.style.height="auto",e.style.maxHeight="100%",e.style.minHeight="0px",e.style.padding="0",e.style.boxSizing="border-box",e.style.fontSize=Hx*t+"px",e.style.lineHeight=Wx+"em",e}function jx(t,e){let i=Kx(e);i.className=Lx+t.o;let s=t.Ti,n=Xx(t,e);return i.style.width=s+"%",i.style.height=n+"px",i.style.left=Gx(t)+"%",i.style.right="",i.style.top=Qx(t,e)+"px",i.style.bottom="",i.style.boxSizing="border-box",i}function Yx(t){return""===t.Mt}function Zx(t,e){return e.some((e=>t.O1(e)))}function Jx(t){return new Ox(t.left,t.top,t.width,t.height)}function $x(t,e,i){switch(e){case 0:t.D1+=i;break;case 1:t.D1-=i;break;case 2:t.B1+=i;break;case 3:t.B1-=i}}function tD(t,e,i,s){switch(i){case 0:return t.C1>e.C1+s;case 1:return t.D1<e.D1-s;case 2:return t.N1>e.N1+s;case 3:return t.B1<e.B1-s}}function eD(t,e){return b.max(0,b.min(t.C1,e.C1)-b.max(t.D1,e.D1))*b.max(0,b.min(t.N1,e.N1)-b.max(t.B1,e.B1))/(t.Ti*t.Ci)}var iD,sD=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]];function nD(t,e){const i=ym(t),s=ym(e),n=rD(i,t.gb),r=rD(s,e.gb);return n&&r?i-s||mi(e,t)||e.Yf-t.Yf:mi(t,e)||t.Yf-e.Yf}function rD(t,e){return e?t<0?t>-8:t>8:t>50}!function(t){t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics"}(iD||(iD={}));var oD={fV:wo.WHITE,dV:rx.$a,_V:"100%",vV:wo.BLACK,gV:"transparent",mV:"none",K1:"regular",bV:"visible",wV:void 0,pV:void 0,yV:void 0,AV:void 0},hD=[{j1:wo.WHITE,K1:"regular",Y1:0},{j1:wo.WHITE,K1:"underline",Y1:0},{j1:wo.GREEN,K1:"regular",Y1:0},{j1:wo.GREEN,K1:"underline",Y1:0},{j1:wo.BLUE,K1:"regular",Y1:0},{j1:wo.BLUE,K1:"underline",Y1:0},{j1:wo.CYAN,K1:"regular",Y1:0},{j1:wo.CYAN,K1:"underline",Y1:0},{j1:wo.RED,K1:"regular",Y1:0},{j1:wo.RED,K1:"underline",Y1:0},{j1:wo.YELLOW,K1:"regular",Y1:0},{j1:wo.YELLOW,K1:"underline",Y1:0},{j1:wo.MAGENTA,K1:"regular",Y1:0},{j1:wo.MAGENTA,K1:"underline",Y1:0},{j1:wo.WHITE,K1:"italics",Y1:0},{j1:wo.WHITE,K1:"underline-italics",Y1:0},{j1:wo.WHITE,K1:"regular",Y1:0},{j1:wo.WHITE,K1:"underline",Y1:0},{j1:wo.WHITE,K1:"regular",Y1:4},{j1:wo.WHITE,K1:"underline",Y1:4},{j1:wo.WHITE,K1:"regular",Y1:8},{j1:wo.WHITE,K1:"underline",Y1:8},{j1:wo.WHITE,K1:"regular",Y1:12},{j1:wo.WHITE,K1:"underline",Y1:12},{j1:wo.WHITE,K1:"regular",Y1:16},{j1:wo.WHITE,K1:"underline",Y1:16},{j1:wo.WHITE,K1:"regular",Y1:20},{j1:wo.WHITE,K1:"underline",Y1:20},{j1:wo.WHITE,K1:"regular",Y1:24},{j1:wo.WHITE,K1:"underline",Y1:24},{j1:wo.WHITE,K1:"regular",Y1:28},{j1:wo.WHITE,K1:"underline",Y1:28}],aD=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function uD(t,e){return xr(t.Z1,e.Z1)||Mu(t.Ny,e.Ny)}var pr=32,cD=/CC([1-4])=(.*)/;function lD(t){if(!t)return[];const e=[],i=t.trim().split(";");if(i.every((t=>t.match(cD))))for(const t of i){const[,i,s]=t.match(cD);e.push({J1:Number(i),t2:s})}else for(let t=0;t<i.length;t++)e.push({J1:t+1,t2:i[t]});return e}var dD=class t{get e2(){return this.s2.i2}get n2(){return this.s2.o2}get h2(){return this.s2.o2.Y1-this.s2.i2.Y1+1}get a2(){return this.s2.o2.u2-this.s2.i2.u2+1}gr(){return this.c2=this.l2(),this.d2(),this.f2(),this.c2}l2(){let t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.h2/pr*this.g2._2*100+"%",t.style.height=1.2*this.a2+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.g2.m2?"calc(1em - 1ch)":"";const e=this.P0.dV;e&&(t.style.fontFamily=e);const i=this.P0.gV;return i&&(t.style.backgroundColor=i),t}d2(){if(!this.c2)return;let t=this.e2.u2/15*100,e=this.e2.Y1/pr*100,i=(pr-this.n2.Y1-1)/pr*100,s=(15-this.n2.u2-1)/15*100;this.g2.w2||(e=i=1,this.c2.style.width="98%"),s<t?this.c2.style.bottom=s*this.g2._2+"%":this.c2.style.top=t*this.g2._2+"%",i<e?this.c2.style.right=i+"%":this.c2.style.left=e+"%"}f2(){const t=this.s2.A2.sort(fD);for(let e=0;e<t.length;e++)this.b2(t[e-1],t[e]),this.T2(t[e]);this.b2(t[t.length-1],void 0)}T2(e){var i;const s=sx(this.P0,e.S2),n=t.E2(s);Bx(n,e.P2),null==(i=this.c2)||i.appendChild(n)}static E2(t){const e=h.createElement("span");e.style.display="inline-block",t.K1!==iD.FONT_ITALICS&&t.K1!==iD.FONT_UNDERLINE_ITALICS||(e.style.fontStyle="italic"),t.K1!==iD.FONT_UNDERLINE&&t.K1!==iD.FONT_UNDERLINE_ITALICS||(e.style.textDecoration="underline");const i=t.fV;i&&(e.style.color=i);const s=t.vV;return s&&(e.style.backgroundColor=s),e.style.textShadow=dx(t.mV),e.style.height="1.2em",e}b2(t,e){let i=t?t.o2.u2:this.s2.i2.u2;const s=e?e.i2.u2:this.s2.o2.u2;let n=t?t.o2.Y1:this.s2.i2.Y1;const r=e?e.i2.Y1:this.s2.o2.Y1;i<s&&(!e||t&&t.i2.u2!==e.i2.u2?this.I2():this.R2(this.s2.o2.Y1-n),n=this.s2.i2.Y1),n<r&&(e?this.R2(r-n):this.I2())}I2(){var t;const e=h.createElement("br");null==(t=this.c2)||t.appendChild(e)}R2(t){var e;if(t<=0)return;const i=h.createElement("span");i.style.display="inline-block",Bx(i,Yf(" ",t)),null==(e=this.c2)||e.appendChild(i)}constructor(t,e,i){this.s2=t,this.g2=e,this.P0=i}};function fD(t,e){return function(t,e){if(t.u2!==e.u2)return t.u2-e.u2;return t.Y1-e.Y1}(t.i2,e.i2)}var _D=class extends Rn{o1(t){let e=h.createElement("div");return e.className="theoplayer-cea608-texttrack-"+t,e.style.position="absolute",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.top="10%",e.style.bottom="10%",this.k0.dV&&(e.style.fontFamily=this.k0.dV),e}D0(t,e){this.Za()}Za(){let t=nx(this.k0);this.C2=function(t){return{_2:t/100,m2:t<=100,w2:t<=150}}(100*t);const e=this.D2/pr;this.N2=e*t,this.VB.style.fontSize=this.N2+"px"}get D2(){let t=this.VB.offsetWidth;return this.C2&&this.C2.w2||(t*=.8),t}i1(t,e,i){for(const t of e)!i&&t.oo||this.T0(t);for(const e of t)this.c1(e)}c1(t){this.C2&&this.C2.w2?this.B2(80):this.B2(100),this.Za();let e=this.S0(t);e||(e=this.l1(t),this.s1(t,e));for(const t of e)this.VB.appendChild(t)}l1(t){return t.R.map((t=>new dD(t,this.C2,this.k0).gr()))}B2(t){const e=(100-t)/2;this.VB.style.left=e+"%",this.VB.style.width=t+"%"}constructor(t,e,i,s){super(t,e,i,s,oD)}},rr=class t{O2(t){for(let e of this.M2)if(e.Ht===t)return e}static L2(t){switch(t.l_){case nt.TTML:case nt.SRT:case nt.WEBVTT:case nt.CEA608:return!0}return!1}F2(t){switch(t.l_){case nt.TTML:return new gx(t,this.U2,t.jh,this.BJ);case nt.SRT:case nt.WEBVTT:return new qx(t,this.U2,t.jh,this.BJ);case nt.CEA608:return new _D(t,this.U2,t.jh,this.BJ)}}H2(t){let e=this.O2(t);e||(e=this.F2(t),e&&(e.JW(),e.N0(this.GM),this.M2.push(e),t.h_===_s.Jn&&e.Z0()))}W2(t){let e=this.M2;for(let i=e.length-1;i>=0;i-=1){let s=e[i];s.Ht===t&&(s.bn(),Zt(e,i))}}q2(e){$w(e.Lt)&&t.L2(e)&&(e.Pd===Gh.ERROR?this.W2(e):this.H2(e))}get tZ(){return this.V2.cs}ir(){for(let t of this.M2)t.Ht.pn(Bs.Rf,this.z2),t.Ht.pn(Bs.xf,this.z2),t.bn();wr(this.M2)}bn(){this.ir();for(let t of this.M2)t.bn();this.xu.pn(Qs.cf,this.X2),this.xu.pn(Qs.df,this.G2),this.xu.pn(Bs.oa,this.z2),this.V2.pn(qs.oa,this.Q2),this.GM.pn("If",this.K2)}constructor(t,e,i,s,n){this.M2=[],this.X2=t=>{let e=t.Ht;e.kn(Bs.Rf,this.z2),e.kn(Bs.xf,this.z2),e instanceof Nn&&(e.tZ=this.tZ),this.q2(e)},this.z2=t=>{let e=t.Ht;this.q2(e)},this.G2=t=>{let e=t.Ht;e.pn(Bs.Rf,this.z2),e.pn(Bs.xf,this.z2),this.W2(e)},this.Q2=()=>{let t=this.tZ;for(let e of this.xu.Ff)e instanceof Nn&&(e.tZ=t)},this.K2=()=>{for(let t of this.M2)t.N0(this.GM)},this.j2=()=>{for(let t of this.M2)t.N0(no({},t.M0(),{bV:"hidden"}))},this.Y2=()=>{for(let t of this.M2)t.N0(no({},t.M0(),{bV:"visible"}))},this.U2=t,this.BJ=e,this.xu=i,this.V2=n,this.GM=s,this.xu.kn(Qs.cf,this.X2),this.xu.kn(Qs.df,this.G2),this.xu.kn(Bs.oa,this.z2),this.V2.kn(qs.oa,this.Q2),this.GM.kn("If",this.K2),this.Q2()}};function vD(t){const e=new Hk,i=function(t){const e=[];return Fk.ea(t)&&e.push(new Fk(t)),Uk.ea(t)&&e.push(new Uk(t)),e}(t);if(i.length>0){for(const t of i)e.kH(t);e.EH(i[0])}return e}var ar,gD=class extends jC{get VB(){return this.Gx}get Od(){return this.Gx.videoHeight}get Fd(){return this.Gx.videoWidth}get ka(){return this.Z2}Qd(){return this.Gx}async hl(){this.Z2.bn(),this.J2.bn(),this.t3.bn(),await super.hl()}we(){super.we(),this.J2.we()}be(){super.be(),this.J2.be()}v0(t){super.v0(t),this.J2.v0(t)}constructor(t,e,i,s){super(t,e,i,s),this.Z2=vD(t),this.J2=new hr,this.t3=new rr(this.J2.Se,this.NJ,this.nt,this.Cu,this.ka)}};!function(t){t.e3="HELLO",t.i3="HI_THERE",t.s3="INITIALIZE",t.n3="APPEND_INIT",t.r3="APPEND_DATA",t.o3="ACK",t.h3="REMOVE",t.a3="DESTROY_SESSION"}(ar||(ar={}));var mD,wD=class{u3(t){return this.VV.Bx((async t=>{gi(t);const e=new MessageChannel,i=e.port1,s=e.port2;Uu.serviceWorker.controller||await xu(Uu.serviceWorker,"install",t),"activated"!==Uu.serviceWorker.controller.state&&await xu(Uu.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};Uu.serviceWorker.controller.postMessage(n,[s]),i.start(),this.c3=i;try{const e=await xu(i,"message",t),s=e.data;if("HI_THERE"!==s.kind)throw new v("Could not set up message channel");this.jx=s.sessionId}catch(t){throw Lr(t)&&this.l3(),t}}),t)}d3(t,e){return this.c3,this.VV.Bx((async()=>{if(!this.c3)throw new v("MessageSession not set up yet or already closed.");e||(e=[]),this.c3.postMessage(t,e);const i=await xu(this.c3,"message");return i.data}))}f3(){return this.VV.Bx((()=>this.l3()))}l3(){if(!Uu.serviceWorker.controller)return;if("activated"!==Uu.serviceWorker.controller.state)return;if(!this.c3)return;const t={kind:"DESTROY_SESSION"};this.c3.postMessage(t),this.c3.close(),this.c3=void 0}constructor(){this.VV=new xo}},pD=class{get _3(){return this.v3}g3(t,e){const i=t-e;this.v3=i>this._3?this.v3:i}m3(t){this.v3=t}constructor(){this.v3=1/0}};!function(t){t.Cm="audio",t.Rm="video",t.Nm="metadata"}(mD||(mD={}));var yD=class extends d{get Fl(){return void 0===this.w3||void 0===this.y3?ri.BM():new ri([this.w3,this.y3])}get Vp(){return{YB:this.kU}}get RK(){return Fs.wA}get uU(){return this.kU}get xK(){return ri.BM()}get QW(){return 30}set QW(t){}get ZW(){return 30}set ZW(t){}BK(t,e){}MK(t,e){}$V(){return this.A3}get ua(){return this.b3}get T3(){return this.w3}get hb(){return this.y3}async LK(){}async nK(t,e){}async WQ(t,e,i){if(t.l_!==wt.xV)throw new v("Streaming or opaque segments are not supported yet.");const s=t.Xm,n=async()=>{const t=s.buffer,i={kind:ar.r3,mediaType:AD(this.kU),segment:s,startPts:e.S3,totalDuration:e.ct};if(await this.E3.d3(i,[t]),void 0===this.w3){const t=e.S3+e.rS;this.w3=t,this.y3=t}this.y3=this.y3+e.ct,this.To(new Ci(uh.RV))};return this.VV.Bx((async t=>{gi(t);try{this.b3=!0,await n()}finally{this.b3=!1}}),i)}async zQ(t,e,i){if(t.l_!==wt.xV)throw new v("Streaming or opaque initialization segments are not supported yet.");const s=t.Xm,n=async()=>{const t={kind:ar.n3,mediaType:AD(this.kU),segment:s};await this.E3.d3(t,[])};return this.VV.Bx((async t=>{gi(t);try{this.b3=!0,await n()}finally{this.b3=!1}}),i)}PK(){this.A3=!0}mK(){this.A3=!1}async WA(t,e,i){const s=async()=>{const t={kind:ar.h3,mediaType:AD(this.kU),endTime:e};await this.E3.d3(t),this.w3=void 0,this.y3=void 0,this.To(new Ci(uh.RV))};return this.VV.Bx((async t=>{gi(t);try{this.b3=!0,await s()}finally{this.b3=!1}}),i)}MV(t){return this.kU===t.YB}FV(t){return this.kU=t.YB,Promise.resolve()}async hl(){this.Lo(),await this.VV.bn()}constructor(t,e){super(),this.kU=t,this.E3=e,this.w3=void 0,this.y3=void 0,this.VV=new xo,this.b3=!1,this.A3=!1}};function AD(t){return t.match(/video/)?mD.Rm:mD.Cm}var bD=class t{static P3(e,i,s,n){const r=[];for(let t=0;t<e.Mj.length;t++){const s=e.Mj[t].YB;r.push(new yD(s,i))}return new t(e,r,s,n)}I3(){}get R3(){return[this.Ij,this.Rj].filter(it)}get bj(){return this.Ij}get Fl(){return aR(this)}get Vp(){return this.kx}get ct(){return 0}get $V(){var t,e,i;const s=null==(i=null==(t=this.Ij)?void 0:t.$V())||i;var n;const r=null==(n=null==(e=this.Rj)?void 0:e.$V())||n;return s&&r}get Rd(){return new ri([0,1/0])}get Tj(){return this.Rj}get rt(){throw new v("Not implemented")}async hl(){await Promise.all([this.Ij,this.Rj].filter(it).map((t=>t.hl())))}xj(t){}Oj(t,e,i,s){}PK(){var t,e;null==(t=this.Ij)||t.PK(),null==(e=this.Rj)||e.PK()}mK(){var t,e;null==(t=this.Ij)||t.mK(),null==(e=this.Rj)||e.mK()}MV(t){return!0}FV(t){return this.kx=t,Promise.resolve()}async BV(t,e){const i=await this.ix.tx(t.XP,e),s=await i.zC();return await this.OV(s),s}async OV(t){if(t&&!this.Gx.src)throw new _r(Ot.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.Gx.src)throw new _r(Ot.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const e=this.HC;e&&(await e.qC(this.Gx),this.HC=void 0),t&&(await t.wn(this.Gx),this.HC=t)}constructor(t,e,i,s){this.HC=void 0,this.kx=t,this.Rj=Rt(e,(t=>Boolean(t.uU.match(/video/)))),this.Ij=Rt(e,(t=>Boolean(t.uU.match(/audio/)))),this.ix=i,this.Gx=s,this.I3()}},TD=class extends d{C3(){this.x3.addEventListener("timeupdate",this.D3),this.x3.addEventListener("ended",this.N3),this.x3.addEventListener("timeupdate",this.B3),this.x3.addEventListener("ratechange",this.O3),this.x3.addEventListener("volumechange",this.M3),this.x3.addEventListener("durationchange",this.L3),this.x3.addEventListener("playing",this.F3),this.x3.addEventListener("seeking",this.U3),this.x3.addEventListener("play",this.H3),this.x3.addEventListener("pause",this.W3),this.x3.addEventListener("encrypted",this.r0)}q3(){this.x3.removeEventListener("timeupdate",this.D3),this.x3.removeEventListener("ended",this.N3),this.x3.removeEventListener("timeupdate",this.B3),this.x3.removeEventListener("ratechange",this.O3),this.x3.removeEventListener("volumechange",this.M3),this.x3.removeEventListener("durationchange",this.L3),this.x3.removeEventListener("playing",this.F3),this.x3.removeEventListener("seeking",this.U3),this.x3.removeEventListener("play",this.H3),this.x3.removeEventListener("pause",this.W3)}V3(){this.UJ.kn(En.Rf,this.Rs)}z3(){this.UJ.pn(En.Rf,this.Rs)}get VB(){return this.x3}get iY(){return!1}get zl(){return this.x3.currentTime+this.X3._3}get md(){return this.x3.paused}get Hd(){return this.x3.volume}set Hd(t){this.x3.volume=t}get pd(){return this.x3.playbackRate}set pd(t){this.x3.playbackRate=t}get G3(){return this.x3.defaultPlaybackRate}get Fl(){var t,e;return null!=(e=null==(t=this.XB)?void 0:t.Fl)?e:ri.BM()}get Q3(){return ri._n(this.x3.buffered)}get bd(){const t=this.K3;return this.Ho.gM(t.Mm(this.X3._3))}get K3(){return ri._n(this.x3.played)}get xd(){return this.MM}get jj(){return!1}get oY(){return!1}get ct(){return this.x3.duration}get ld(){return this.x3.muted}set ld(t){this.x3.muted=t}get S2(){return this.x3.style}get yJ(){return no({},eI,{PV:!0})}Fm(t,e,i){this.h$.vl(),this.h$=new Zs,this.a$=this.u$(t,this.a$,this.h$.fl).catch($d)}async u$(t,e,i){var s;this.Ho=this.bd;const n=null==(s=this.XB)?void 0:s.R3;if(!n)return;const r=b.max(...n.map((t=>t.T3?t.T3:1/0)));this.MM=!0,this.To(new Uh(t)),await e.catch($d),gi(i);try{for(this.j3||this.Y3(),this.x3.load(),this.Z3||(this.J3=!1,await sf(this.x3.play(),i));this.Pd<Yv.bA;)await this.UJ.Bl(En.Rf,i);this.t4.lI(),this.j3=!1,this.MM=!1,this.To(new ja(this.zl))}catch(t){throw this.t4.dI(t),t}finally{this.e4(),this.X3.m3(r)}}Zd(){this.Z3=!0,this.x3.pause()}async Jd(){this.Z3&&(this.x3.src||this._0(),await this.t4.fI,await this.x3.play())}async hl(){this.E3&&this.E3.f3().catch($d),this.h$.vl(),this.q3(),this.z3(),this.UJ.hl(),this.Lo(),this.xu.bn()}async ir(){this.E3&&this.E3.f3().catch($d),this.h$.vl(),this.x3.removeAttribute("src"),this.x3.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.x3.removeAttribute("x-airplay-deny"),this.x3.disableRemotePlayback=!1,this.x3.load(),this.UJ.ir(),this.Ho=ri.BM()}_0(){this.d0||(vn(this.x3,f.Zs),this.f0=!0)}get Pd(){return this.UJ.Pd}Y3(){const t=this.x3.getClientRects();let e;if(!(t.length>0))return;e=t[0];const i=e.width,s=this.x3.videoWidth/this.x3.videoHeight,n=e.height;let r,o;i/n>s?(r=n*s,o=n):(o=i/s,r=i),this.x3.style.width=r+"px",this.x3.style.height=o+"px",this.x3.style.marginLeft=(i-r)/2+"px",this.x3.style.marginTop=(n-o)/2+"px",this.x3.style.backgroundColor="black"}e4(){this.x3.style.width="100%",this.x3.style.height="100%",this.x3.style.marginLeft="",this.x3.style.marginTop="",this.x3.style.backgroundColor=""}get Od(){return this.x3.videoHeight}get Fd(){return this.x3.videoWidth}get jl(){return this.x3.ended}get Ci(){return this.x3.offsetHeight*f.Zs.FJ}get Ti(){return this.x3.offsetWidth*f.Zs.FJ}get rd(){return!1}get d0(){return this.f0}get Hl(){}get NJ(){}get lt(){}get ka(){return this.Z2}get Rd(){return this.XB?this.XB.Rd:ri.BM()}get GB(){}get nt(){return this.xu}get Cu(){}get Xd(){return!1}set Xd(t){}rO(t,e,i,s,n){}UE(t,e,i,s,n,r,o,h,a){const u=new _h(t,e,i,s,n,r,o,a,h);return this.xu.tt(u),this.b$.tt(u),u}iz(t){}ud(){return LP(this.x3)}get XJ(){return"block"===this.x3.style.display}be(){this.x3.style.display="block"}we(){this.x3.style.display="none"}c0(){}async Rn(t){if(t.l_===$.nD)throw new v("Not yet implemented");await this.E3.u3();const e=Rt(t.ZB,(t=>t.vg.l_===Do.Jv)),i={kind:ar.s3,mediaBufferConfigs:t.Mj.map((t=>t.YB)),fairPlaySdkUri:null==e?void 0:e.FN};return await this.E3.d3(i),this.XB=bD.P3(t,this.E3,this.ix,this.x3),this.UV.Rn(this.XB,t),this.x3.setAttribute("x-webkit-airplay","deny"),this.x3.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.x3.disableRemotePlayback=!0,this.x3.preload="none",this.x3.src="https://theo.proxy/"+this.E3.jx+"/master.m3u8",this.XB}l0(){}QE(t){this.xu.it(t),this.b$.it(t)}hO(){for(const t of this.xu.Ff.slice())t.bn();this.xu.ir()}UB(t){}sO(){return!1}v0(t){t.appendChild(this.x3)}Qd(){return this.x3}PJ(){}get lO(){return this.UV.lO}set lO(t){this.UV.lO=t}get g0(){}set g0(t){}get cJ(){}sf(){}constructor(t,e){super(),this.j3=!0,this.E3=new wD,this.X3=new pD,this.Z3=!0,this.t4=new Os,this.MM=!1,this.a$=Promise.resolve(),this.h$=new Zs,this.J3=!0,this.Ho=ri.BM(),this.f0=!1,this.D3=()=>{this.md||this.Q3.V<=0||this.Fl.V<=0||this.X3.g3(this.Fl.An(this.Fl.V-1),this.Q3.An(this.Q3.V-1))},this.N3=()=>{this.To(new X(this.zl))},this.B3=()=>{this.To(new oh(this.zl,this.Hl))},this.O3=()=>{this.To(new Cs(this.zl,this.pd))},this.M3=()=>{this.To(new Ao(this.zl,this.Hd))},this.L3=()=>{this.To(new Pt(this.ct))},this.F3=()=>{this.To(new Tt(this.zl))},this.U3=()=>{this.Fm(this.zl)},this.H3=async()=>{this.J3&&this.To(new gs(this.zl)),this.Z3=!1,this.J3=!0},this.W3=()=>{this.Z3=!0,this.To(new Cn(this.zl))},this.r0=t=>{const e=t.initDataType;var i;const s=null!=(i=t.initData)?i:new ArrayBuffer(0);this.To(new Te(e,s))},this.x3=t,this.UJ=new Va(this),this.x3.playsInline=!0,this.x3.style.width="100%",this.x3.style.height="100%",this.C3(),this.V3(),this.Z2=vD(this.x3),this.UV=new fn(this),this.ix=e,this.xu=new ih,this.b$=new dn(this)}},SD=[Fs.Cm,Fs.Rm];function ED(t){const e=h.createElement(t);return he(e)&&function(t){t.addEventListener("contextmenu",(t=>{t.preventDefault()}))}(e),kD(e),e}function kD(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),function(t){if(!t)return;let e;for(;it(e=t.firstChild);)t.removeChild(e)}(t),Hb(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload=Fi.fA,t.controls=!1,t.style.display="none",he(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function vn(t,e){if(e.i4){const e=t.muted;t.muted=!0,t.muted=!1,t.muted=e}else if(t.paused){const e=t.play();le(e)&&Ui(e),t.pause()}}var PD=class{GS(t){return this.qE.GS(t)}IU(t){this.qE.IU(t)}bn(){this.qE.bn()}constructor(t){this.qE=t}},ID=class extends PD{async GS(t){const e=new Yt(t),i=this.XM.LW.yB(e);if(!i)return this.qE.GS(e);i.UW(f.Al()/1e3);const s=await this.qE.GS(t);i.HW(f.Al()/1e3);const n={Xm:s.OH().pipeThrough(new Da(new RD(i))),GS:s.GS};return new Es(n,s)}constructor(t,e){super(t),this.XM=e}},RD=class{start(t){this.cV=t}transform(t){this.s4.WW(f.Al()/1e3,t),this.cV.enqueue(t)}flush(){this.s4.qW(f.Al()/1e3)}constructor(t){this.s4=t}};function CD(t){return{get ratio(){return t.Wo},get thresholds(){return t.n4.slice()}}}function xD(t){const e=[],i=b.floor(1/t);if(j(i))return[];for(let s=0;s<=i;s++){const i=Eo(s*t,0,1);e.push(i)}return e}var DD=class{get Wo(){return this.r4}get n4(){return this.o4}h4(t){return e=>{const i=e[e.length-1];this.r4=i.intersectionRatio,t(i.intersectionRatio)}}get ma(){return this.vf||(this.vf=CD(this)),this.vf}$d(){this.a4.disconnect()}constructor(t,e,i){this.r4=1,this.vf=void 0,this.o4=xD(e);const n=this.h4(i);this.a4=new s.IntersectionObserver(n,{root:null,threshold:this.o4}),this.a4.observe(t)}},ND=class{get Wo(){return this.r4}get n4(){return this.o4}get ma(){return this.vf||(this.vf=CD(this)),this.vf}u4(t){this.r4=t;const e=this.o4;let i=0;if(t>0)for(;i<e.length&&e[i]<=t;)++i;this.c4!==i&&(this.c4=i,this.l4(t))}constructor(t,e){this.r4=1,this.c4=-1,this.vf=void 0,this.o4=xD(t),this.l4=e}},BD=class extends ND{d4(){const t=this.ko.getBoundingClientRect();return Eo(b.max(0,b.min(s.innerWidth,t.right)-b.max(0,t.left))*b.max(0,b.min(s.innerHeight,t.bottom)-b.max(0,t.top))/(t.width*t.height),0,1)}$d(){s.removeEventListener("scroll",this.f4)}constructor(t,e,i){super(e,i),this.f4=ef((()=>this.u4(this.d4())),50),this.ko=t,s.addEventListener("scroll",this.f4,!!Ik&&{passive:!0}),Ai((()=>this.u4(this.d4())))}},OD=.1,MD=class{get _4(){return this.v4}get zo(){return this.g4}set zo(t){if(j(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.g4=t}get ma(){return this.vf||(this.vf=function(t){return{get ratio(){return t._4},get visible(){return t._4>t.zo},get visibleThreshold(){return t.zo},set visibleThreshold(e){e=ve(e),t.zo=e},addObserver:(e,i)=>(e=ve(e),t.$o(e,i).ma),removeObserver(e){let i=t.m4(e);i&&t.Uo(i)}}}(this)),this.vf}w4(t){return e=>{this.v4=e,null==t||t(this.v4)}}$o(t,e){if(j(t))throw new p("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let i;return i="function"==typeof s.IntersectionObserver?new DD(this.ko,t,this.w4(e)):new BD(this.ko,t,this.w4(e)),this.y4.push(i),i}Uo(t){t.$d(),so(this.y4,t)}m4(t){for(const e of this.y4)if(e.ma===t)return e}bn(){for(const t of this.y4)t.$d();wr(this.y4)}constructor(t){this.v4=1,this.g4=0,this.y4=[],this.vf=void 0,this.ko=t,this.$o(.1,this.w4())}},LD=class extends Ci{constructor(){super(r.D_)}},FD=class{get A4(){return this.b4}set A4(t){this.b4=t}get ma(){var t;return null!=(t=this.vf)?t:this.vf=function(t){return{get conviva(){var e;return null==(e=t.A4)?void 0:e.ma}}}(this)}bn(){this.b4=void 0}};var UD=class extends Ro{get T4(){return this.XM}get FA(){return this.S4}set FA(t){this.S4=t,this.E4.FA=t}get P4(){return this.I4}get ht(){return this.E4.ht}get R4(){return this.C4}get NJ(){return this.x4}get td(){return this.E4.td}get hd(){return this.D4}get N4(){return this.B4}get nt(){return this.E4.nt}get Cu(){return this.GM}get rt(){return this.E4.rt}get Fl(){return this.Ul()}Ul(){return this.E4.Fl}get O4(){return this.gq}get Rq(){return this.Cq}get zl(){return this.Xl()}set zl(t){this.Gl(t)}Xl(){return this.E4.zl}Gl(t){this.E4.zl=t}M4(){return this.Xl()}get Hl(){return this.E4.Hl}set Hl(t){this.E4.Hl=t}get bt(){return this.E4.bt}get ct(){return this.Ql()}Ql(){return this.E4.ct}get Se(){return this.E4.Se}get jl(){return this.E4.jl}get lt(){return this.Zl()}Zl(){return this.E4.lt}get Jl(){return this.$l()}$l(){return this.E4.Jl}get ka(){return this.E4.Gd()}get Xd(){return this.E4.Xd}set Xd(t){this.E4.Xd=t}get ld(){return this.E4.ld}set ld(t){const e=Boolean(t);this.fd(e)}fd(t){this.E4.ld=t,t||this.md||this.Yd()}get md(){return this.E4.md}get pd(){return this.E4.pd}set pd(t){this.E4.pd=t}get bd(){return this.Td()}Td(){return this.E4.bd}get Sd(){return this.E4.Sd}set Sd(t){this.E4.Sd=t}get Pd(){return this.E4.Pd}get Rd(){return this.Cd()}Cd(){return this.E4.Rd}get xd(){return this.E4.xd}get Yf(){return this.GA}get Od(){return this.E4.Od}get Fd(){return this.E4.Fd}get Hd(){return this.E4.Hd}set Hd(t){const e=Eo(Number(t),0,1)||0;this.qd(e)}get Vd(){return this.E4.Vd}qd(t){this.E4.Hd=t}ja(){as(this,$S,this)}Jd(){this.E4.Jd()}Zd(){this.E4.Zd()}Nd(){return this.JO}async ba(t,e){if(this.JO=t,t){this.L4.CF(t).catch(this.F4);const i=function(t){t.sources;const e=t.sources.filter((t=>Cd(t.integration)));0;return t.sources=e,t}(t);await this.E4.ba(i,e)}}Yd(){if(this.wo)return;this.E4.Yd(),this.I4.Yd();const t=this.Se.getElementsByTagName("video");for(let e=0;e<t.length;e++){const i=t[e];"Advertisement"===i.title&&vn(i,f.Zs)}this.wo=!0}cs(){return this.U4.Go()===Je.FULLSCREEN}be(){this.E4.be()}we(){this.E4.we()}Qd(){return this.E4.Qd()}sf(){this.E4.sf()}nf(){this.E4.nf()}async $d(){this.JO=void 0,await this.E4.$d(),await this.E4.ir()}async bn(){this.To(new LD),this.Lo(),this.C4.bn(),this.PD.bn(),this.B4.bn(),this.H4.bn(),this.W4.bn(),this.U4.bn(),this.x4.bn(),this.q4.bn(),this.V4.bn(),this.I4.bn(),this.zM.bn(),await this.E4.bn()}constructor(t,e){super(),this.S4=!1,this.wo=!1,this.JO=void 0,this.z4=!1,this.q4=new FD,this.wa=void 0,this.F4=t=>{if(this.z4)return;this.z4=!0;const e=this.X4,i=Gg(t);this.E4.qf=new MS(this.Se,i,t),Ui(e.bn())},this.G4=t=>{t.type!==r.j_&&t.type!==r.K_&&this.To(t)};const i=ve(e.uid);j(i)?this.GA=Jg++:this.GA=i,this.Vp=e;const s=f.PD,n=new QP;this.V4=new mk("7.3.0",s,n),this.XM=new PP;const o=new ID(s,this.XM);this.PD=new gP(o,e.allowMixedContent),this.sV=new JE(e.isEmbeddable,"7.3.0",KE()),this.L4=new GP(s,this.sV,this.V4,n,e,KE()),this.L4.Jq().catch(this.F4),this.x4=new Bk(t),this.x4.kn(wu.gn,this.Rs),this.GM=new JP,this.gq=new DP,this.Cq=new BP;const h=new OS(t,e,this.PD,this.XM,this.x4,this.GM);this.XM.JW(h);let a=h;a=new NP(a,this.O4),a=new OP(a,this.Rq),this.X4=a,this.E4=new Vg(this.X4),this.E4.Il(this.G4),this.D4=new MP(this.E4),this.B4=new wP(this.E4,this.PD,this.XM),this.H4=new bk(this),this.W4=new Wk(this.E4,e.allowNativeFullscreen),this.U4=new JS(this.W4),this.x4.wn(),this.Fo=new MD(t),this.zM=new Rp(this.x4,this.GM,1,[Fs.Rm]),this.I4=new Cp(this.zM),this.C4=new HP}};var Dn,Th=class extends Ro{get T4(){return this.Ko.T4}get Q4(){return this.K4()}K4(){return this.Ko.Q4}get q4(){return this.Ko.q4}get V4(){return this.Ko.V4}get P4(){return this.j4()}j4(){return this.Ko.P4}get FA(){return this.Ko.FA}set FA(t){this.Ko.FA=t}get H4(){return this.Ko.H4}get R4(){return this.Ko.R4}get O4(){return this.Ko.O4}get Vp(){return this.Ko.Vp}get NJ(){return this.Ko.NJ}get ka(){return this.Gd()}Gd(){return this.Ko.ka}get PD(){return this.Ko.PD}get Vd(){return this.Ko.Vd}get Rq(){return this.Ko.Rq}get N4(){return this.Ko.N4}get U4(){return this.Ko.U4}get x4(){return this.Ko.x4}get E4(){return this.Ko.E4}get Cu(){return this.Ko.Cu}get Y4(){return this.Z4()}Z4(){return this.Ko.Y4}get Yf(){return this.Ko.Yf}get Fo(){return this.Ko.Fo}get ht(){return this.Ol()}Ol(){return this.Ko.ht}Ul(){return this.Ko.Ul()}get Hl(){return this.Wl()}set Hl(t){this.ql(t)}Wl(){return this.Ko.Hl}ql(t){this.Ko.Hl=t}get bt(){return this.Vl()}Vl(){return this.Ko.bt}Xl(){return this.Ko.Xl()}Gl(t){this.Ko.Gl(t)}M4(){return this.Ko.M4()}Ql(){return this.Ko.Ql()}get Se(){return this.Ko.Se}get jl(){return this.Yl()}Yl(){return this.Ko.jl}Zl(){return this.Ko.Zl()}$l(){return this.Ko.$l()}get td(){return this.ed()}ed(){return this.Ko.td}get Xd(){return this.Ko.Xd}set Xd(t){this.Ko.Xd=t}get hd(){return this.ud()}ud(){return this.Ko.hd}get ld(){return this.dd()}set ld(t){this.fd(t)}dd(){return this.Ko.ld}fd(t){this.Ko.fd(t)}get md(){return this.wd()}wd(){return this.Ko.md}get pd(){return this.yd()}set pd(t){this.Ad(t)}yd(){return this.Ko.pd}Ad(t){this.Ko.pd=t}Td(){return this.Ko.Td()}get Sd(){return this.Ed()}set Sd(t){this.kd(t)}Ed(){return this.Ko.Sd}kd(t){this.Ko.Sd=t}get Pd(){return this.Id()}Id(){return this.Ko.Pd}get wa(){return this.Ko.wa}set wa(t){this.Ko.wa=t}Cd(){return this.Ko.Cd()}get xd(){return this.Dd()}Dd(){return this.Ko.xd}get nt(){return this.Bd()}Bd(){return this.Ko.nt}get Od(){return this.Md()}Md(){return this.Ko.Od}get rt(){return this.Ld()}Ld(){return this.Ko.rt}get Fd(){return this.Ud()}Ud(){return this.Ko.Fd}get Hd(){return this.Wd()}set Hd(t){this.qd(t)}Wd(){return this.Ko.Hd}qd(t){this.Ko.qd(t)}Yd(){this.Ko.Yd()}Zd(){this.Ko.Zd()}Jd(){this.Ko.Jd()}be(){this.Ko.be()}we(){this.Ko.we()}cs(){return this.Ko.cs()}Qd(){return this.Ko.Qd()}sf(){this.Ko.sf()}nf(){this.Ko.nf()}ja(){this.Ko.ja()}Nd(){return this.Ko.Nd()}ba(t,e){return this.Ko.ba(t,e)}$d(){return this.Ko.$d()}hf(t){return!1}async bn(){this.Lo(),await this.Ko.bn()}constructor(t,e){super(),this.uf=t=>{this.hf(t)||this.To(t)},this.Ko=t,this.J4=!e,this.J4&&t.Il(this.uf)}};!function(t){t[t.t6=0]="t6",t[t.e6=1]="e6",t[t.i6=2]="i6",t[t.s6=3]="s6"}(Dn||(Dn={}));var HD=[0,1,2,3],WD={};function qD(t,e){(WD[e]||(WD[e]=[])).push(t)}var VD={};function zD(t,e){(VD[e]||(VD[e]=[])).push(t)}var XD=[];function GD(t){for(const e of XD)e(t)}var QD=self.CustomEvent;var KD=function(){try{const t=new QD("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,e){return new CustomEvent(t,e)}:function(t,e){const i=h.createEvent("CustomEvent");return i.initCustomEvent(t,(null==e?void 0:e.bubbles)||!1,(null==e?void 0:e.cancelable)||!1,null==e?void 0:e.detail),i};var jD=new class{get V(){return this.OA.length}get ma(){var t;return null!=(t=this.vf)?t:this.vf=function(t){const e=[];for(let i=0;i<t.V;i++)e[i]=t.Hf(i).ma;return e.getPlayerByUID=e=>{const i=t.n6(e);return i&&i.ma},e}(this)}Hf(t){return this.OA[t]}Tz(t){this.OA.push(t),this.ma.push(t.ma)}WA(t){const e=this.OA.indexOf(t);e<0||(Zt(this.OA,e),this.vf&&Zt(this.vf,e))}n6(t){for(const e of this.OA)if(e.Yf===t)return e}constructor(){this.OA=[],this.vf=void 0}};var Ra,Ba=class extends Ci{constructor(t){super(r.do),this.source=t}},YD=class extends Ro{get Hl(){}set Hl(t){}get zl(){return this.Xl()}set zl(t){this.Gl(t)}Xl(){return this.OM}M4(){return this.Xl()}Gl(t){this.MM&&this.OM===t||(this.OM=t,this.MM=!0,this.To(new Uh(this.OM)))}get md(){return this.FM}get pd(){return this.UM}set pd(t){this.UM!==t&&(this.UM=t,this.To(new Cs(this.OM,this.pd)))}get Pd(){return Yv.AA}get xd(){return this.MM}Jd(){this.FM&&(this.FM=!1,this.To(new gs(this.OM)),this.To(new ra(this.OM)))}Zd(){this.FM||(this.FM=!0,this.To(new oh(this.OM,this.Hl)),this.To(new Cn(this.OM)))}ir(){this.OM=0,this.MM=!1,this.UM=1,this.Zd()}bn(){this.Lo()}we(){}be(){}constructor(){super(),this.OM=0,this.FM=!0,this.MM=!1,this.UM=1}},ZD={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},JD={visibility:"hidden"},$D={visibility:"visible"},tN=class{get YS(){return void 0!==this.r6?this.r6:void 0!==this.o6?this.o6:void 0}set h6(t){this.o6=t,this.Kn()}Kn(){const t=this.Ko.md,e=this.a6;this.YS?this.Hs.style.backgroundImage='url("'+t_(this.YS)+'")':this.Hs.style.backgroundImage="",t&&this.YS&&!e?this.be():this.we()}be(){Lb(JD,this.Ko.Se),Lb($D,this.Hs)}we(){Lb(JD,this.Hs),Lb($D,this.Ko.Se)}YO(){this.Ko.kn(r.do,this.u6),this.Ko.kn(r.Ah,this.yD)}bn(){this.Ko.pn(r.do,this.u6),this.Ko.pn(r.Ah,this.yD),z(this.Hs)}constructor(t){this.a6=!1,this.u6=t=>{var e;this.a6=!this.Ko.md,this.r6=null==(e=t.source)?void 0:e.poster,this.Kn()},this.yD=()=>{this.a6=!0,this.we()},this.Ko=t,this.YO(),this.Hs=function(){let t=qh&&qh.document&&qh.document.createElement("div");return t.className="theoplayer-poster",Lb(ZD,t),t}(),t.Se.appendChild(this.Hs)}};function La(t){let e;const i={get playing(){return t.c6},get currentAds(){return t.l6.map((t=>t.d6()))},get currentAdBreak(){var e,i;return null!=(i=null==(e=t.f6)?void 0:e.d6())?i:null},get scheduledAds(){return t._6.map((t=>t.d6()))},get scheduledAdBreaks(){return t.v6.map((t=>t.d6()))},skip(){t.nw()},schedule(e){let i=kE(e,qn.zP);i?t.PZ(i,Ra.g6,!1):console.error("Invalid ad description")},addEventListener(t,i){e.kn(t,i)},removeEventListener(t,i){e.pn(t,i)}};return e=new xP(t,i),i}!function(t){t[t.g6=0]="g6",t[t.m6=1]="m6"}(Ra||(Ra={}));var eN,Ah=class extends nu{constructor(t,e){super(t),this.w6=e}},fr=class extends Ci{get ad(){return this.adBreak}constructor(t,e){super(t),this.adBreak=e}},za=class extends Ah{pa(){return new iN(this.w6.d6())}constructor(t){super("p6",t)}},iN=class extends fr{constructor(t){super("removeadbreak",t)}},sN=class extends Ah{pa(){return new nN(this.w6.d6())}constructor(t){super("y6",t)}},nN=class extends fr{constructor(t){super("addadbreak",t)}},Vt=class extends nu{constructor(t,e){super(t),this.A6=e}},Du=class extends Ci{constructor(t,e){super(t),this.ad=e}},rN=class extends Vt{pa(){return new oN(this.A6.d6())}constructor(t){super("b6",t)}},oN=class extends Du{constructor(t){super("addad",t)}},qa=class extends Ah{pa(){return new hN(this.w6.d6())}constructor(t){super("T6",t)}},hN=class extends fr{constructor(t){super("adbreakend",t)}},aN=class extends Ah{pa(){return new uN(this.w6.d6())}constructor(t){super("S6",t)}},uN=class extends fr{constructor(t){super("adbreakbegin",t)}},su=class extends Vt{pa(){return new cN(this.A6.d6(),this.currentTime)}constructor(t,e){super("E6",t),this.currentTime=e}},cN=class extends Du{constructor(t,e){super("adbegin",t),this.currentTime=e}},tu=class extends Vt{pa(){return new lN(this.A6.d6(),this.currentTime)}constructor(t,e){super("k6",t),this.currentTime=e}},lN=class extends Du{constructor(t,e){super("adend",t),this.currentTime=e}},Xa=class extends nu{pa(){return new dN}constructor(){super("P6")}},dN=class extends Ci{constructor(){super("adadded")}},br=class extends Ro{get c6(){return!!this.I6&&this.I6.c6}get l6(){return this.I6?this.I6.l6:[]}get f6(){return this.I6?this.I6.f6:null}get _6(){return this.I6?this.I6._6:[]}get v6(){return this.I6?this.I6.v6:[]}PZ(t,e,i){var s;null==(s=this.I6)||s.PZ(t,e,i)}R6(t){var e;null==(e=this.I6)||e.R6(t)}nw(){var t;null==(t=this.I6)||t.nw()}C6(t){var e;null==(e=this.I6)||e.C6(t)}get ma(){var t;return null!=(t=this.vf)?t:this.vf=La(this)}get qf(){return this.I6}set qf(t){const e=this.I6;if(e===t)return;const i=this.l6,s=this.f6,n=this._6,r=this.v6;null==e||e.Nl(this.Rs),this.I6=t,null==t||t.Il(this.Rs);const o=this.l6,h=this.f6,a=this._6,u=this.v6,c=[];let l=!1;for(const t of r)Yi(u,t)||c.push(new za(t));for(const t of u)Yi(r,t)||c.push(new sN(t));for(const t of a)Yi(n,t)||(c.push(new rN(t)),l=!0);l&&c.push(new Xa),s!==h&&(s&&c.push(new qa(s)),h&&c.push(new aN(h)));for(const t of i)Yi(o,t)||c.push(new tu(t,this.Ko.Xl()));for(const t of o)Yi(i,t)||c.push(new su(t,this.Ko.Xl()));for(const t of c)this.To(t)}bn(){var t;return this.Lo(),null==(t=this.I6)||t.Nl(this.Rs),this.I6=void 0,Promise.resolve()}constructor(t){super(),this.vf=void 0,this.Ko=t}},gr=class extends Ro{get c6(){return!1}get l6(){return[]}get f6(){return null}get _6(){return[]}get v6(){return[]}PZ(t,e,i){this.x6.push({D6:t,N6:e,B6:i})}nw(){}C6(t){}get ma(){var t;return null!=(t=this.vf)?t:this.vf=La(this)}R6(t){const e=this.x6.slice();this.ir();for(const i of e)t.PZ(i.D6,i.N6,i.B6)}O6(){const t=this.x6.map((t=>t.D6));return this.ir(),t}ir(){wr(this.x6)}bn(){return this.Lo(),this.ir(),Promise.resolve()}constructor(...t){super(...t),this.vf=void 0,this.x6=[]}};function fN(t){return class extends Ro{get V4(){return this.M6.V4}get Q4(){return this.I6}get q4(){return this.M6.q4}get H4(){return this.M6.H4}get Vp(){return this.M6.Vp}get PD(){return this.M6.PD}get ka(){return this.M6.ka}get U4(){return this.M6.U4}get x4(){return this.M6.x4}get E4(){return this.M6.E4}get T4(){return this.M6.T4}get FA(){return this.M6.FA}set FA(t){this.M6.FA=t,this.L6()}get P4(){return this.M6.P4}get ht(){return this.M6.ht}get R4(){return this.M6.R4}get NJ(){return this.M6.x4}get ma(){return this.vf||(this.vf=this.pa()),this.vf}get td(){return this.M6.td}get Xd(){return this.M6.Xd}set Xd(t){this.M6.Xd=t}get hd(){return this.M6.hd}get N4(){return this.M6.N4}get nt(){return this.M6.nt}get Cu(){return this.M6.Cu}get rt(){return this.M6.rt}get O4(){return this.M6.O4}get Rq(){return this.M6.Rq}get Hl(){return this.Ko.Hl}set Hl(t){this.Ko.Hl=t}get bt(){return this.M6.bt}get Se(){return this.M6.Se}get jl(){return this.M6.jl}get ld(){return this.M6.ld}set ld(t){this.fd(t)}get md(){return this.Ko.md}get mi(){return this.F6.YS||""}set mi(t){this.F6.h6=t}get pd(){return this.M6.pd}set pd(t){this.Ko.pd=t}get Sd(){return this.M6.Sd}set Sd(t){this.M6.Sd=t}get Pd(){return this.Ko.Pd}get wa(){return this.M6.wa}set wa(t){this.M6.wa=t}get xd(){return this.Ko.xd}get Y4(){return this.M6.Y4}get Yf(){return this.M6.Yf}get Od(){return this.M6.Od}get Fd(){return this.M6.Fd}get Hd(){return this.M6.Hd}set Hd(t){this.qd(t)}get Vd(){return this.M6.Vd}get Fo(){return this.M6.Fo}async Bx(t,e){return this.VV.Bx(t,e).catch(yr)}async U6(t,e){gi(e),this.M6.Il(this.H6);try{await this.M6.ba(t,e)}finally{this.M6.Nl(this.H6)}}async L6(){const t=await this.W6();this.q6(t)}async W6(){const t=this.Nd();return t&&!_E(t)&&this.FA&&this.md?this.P4.V6(this.ld):"none"}q6(t){var e;const i=(null==(e=this.Nd())?void 0:e.mutedAutoplay)||this.Vp.mutedAutoplay;switch(t){case"all":this.z6();break;case"muted":(this.ld||i===Bg.ALL)&&(this.ld=!0,this.Jd())}}ba(t){_E(this.JO)||this.To(new Ng(0,Yv.AA)),this.ir(),this.JO=t,Ui(this.Bx((async e=>{gi(e);try{await this.U6(t,e)}catch(t){return eo(t),this.JO=void 0,void this.CO(function(t,e){return t instanceof io?t:t instanceof v?new io(e,t.message,t):new io(e,String(t))}(t,Ot.SOURCE_NOT_SUPPORTED))}finally{this.X6(this.M6)}const i=await this.W6();this.To(new Ba(this.Nd())),this.q6(i)})))}Gl(t){this.Ko.Gl(t)}Zl(){var t;return null!=(t=this.ZM)?t:this.M6.Zl()}$l(){var t;return null!=(t=this.WB)?t:this.M6.$l()}CO(t){void 0===this.$l()&&(this.WB=t,this.ZM=Gg(t),this.To(new An(t)))}Jd(){this.Ko.Jd()}z6(){this.ld||this.Yd(),this.Jd()}Yd(){this.M6.Yd()}Zd(){this.Ko.Zd()}$d(){this.ba(void 0)}be(){this.iM=!0,this.Ko.be()}we(){this.iM=!1,this.Ko.we()}ja(){this.M6.ja()}qd(t){this.M6.qd(t)}fd(t){this.M6.fd(t)}Sa(t){this.G6=t,t.Tz(this)}cs(){return this.M6.cs()}Nd(){return this.JO}Qd(){return this.M6.Qd()}Xl(){return this.Ko.Xl()}M4(){return this.Ko.M4()}Ql(){return this.M6.Ql()}Ul(){return this.M6.Ul()}Td(){return this.M6.Td()}Cd(){return this.M6.Cd()}sf(){this.M6.sf()}nf(){this.M6.nf()}ir(){this.JO=void 0,this.WB=void 0,this.ZM=void 0,this.Q6=!0,wr(this.K6),this.j6.ir(),this.X6(this.j6),this.VV.vl(),Ui(this.VV.Bx((async t=>{gi(t),await this.M6.$d()})))}bn(){this.To(new LD),this.F6.bn(),this.ZO(),this.ir(),Ui(this.Bx((async()=>{await this.M6.bn(),this.G6&&(this.G6.WA(this),this.G6=void 0),this.VV.bn()}))),this.Lo()}X6(t){if(this.Ko===t)return;const e=this.Ko.md,i=this.Ko.Xl(),s=this.Ko.pd,n=this.Ko.Pd,r=this.Ko.xd;this.Y6=e,this.m0=n,this.ZO(),t.Il(this.Z6),t===this.M6?(void 0!==this.I6&&(this.I6.qf=t.Q4,this.J6.R6(this.I6)),(r||t.Xl()!==i)&&t.Gl(i),t.pd!==s&&(t.pd=s),e?t.Zd():t.Jd()):(void 0!==this.I6&&(this.I6.qf=this.J6,this.J6.ir()),this.Vp.retainPlaybackRateOnSourceChange?t.pd=s:1!==s&&this.To(new Cs(this.Xl(),1))),t.Nl(this.Z6),this.Ko=t,this.YO();for(const t of this.K6)this.To(t);wr(this.K6),this.iM?t.be():t.we()}YO(){this.Ko.Il(this.rf)}ZO(){this.Ko.Nl(this.rf)}pa(){return function(t){let e,i;const s=e=>{i=e;const s=Se(e,t.Vp);t.ba(s)};let n={get abr(){return t.T4.ma},get ads(){var e;return null==(e=t.Q4)?void 0:e.ma},get analytics(){return t.q4.ma},get audioTracks(){return t.ht.ma},get autoplay(){return t.FA},set autoplay(e){t.FA=Boolean(e)},get buffered(){return t.Ul()},get canvas(){return t.H4.ma},get cast(){var e;return null==(e=t.R4)?void 0:e.ma},get clip(){return t.O4.ma},get currentProgramDateTime(){var e;return null!=(e=t.Hl)?e:null},set currentProgramDateTime(e){t.Hl=null!=e?e:void 0},get currentTime(){return t.Xl()},set currentTime(e){t.Gl(Number(e))},get duration(){return t.Ql()},get element(){return t.Se},get ended(){return t.jl},get error(){return t.Zl()},get errorObject(){return t.$l()},get loop(){return t.Rq.Rq},set loop(e){t.Rq.Rq=Boolean(e)},get metrics(){return t.hd.ma},get muted(){return t.ld},set muted(e){t.fd(e)},get network(){return t.N4.ma},get paused(){return t.md},get playbackRate(){return t.pd},set playbackRate(e){const i=Number(e);if(i<0)throw new RangeError("playbackRate must be a positive number");t.pd=i},get played(){return t.Td()},get poster(){return t.mi},set poster(e){t.mi=ai(e)},get preload(){return t.Sd},set preload(e){t.Sd=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(e)},get presentation(){return t.U4.ma},get readyState(){return t.Pd},get seekable(){return t.Cd()},get seeking(){return t.xd},get source(){return i},set source(t){s(t)},get src(){return wE(t.Nd())},set src(t){s({sources:t})},get textTracks(){return t.nt.ma},get textTrackStyle(){return t.Cu.ma},get theoLive(){return t.Y4},get uid(){return t.Yf},get videoHeight(){return t.Od},get videoTracks(){return t.rt.ma},get videoWidth(){return t.Fd},get visibility(){return t.Fo.ma},get volume(){return t.Hd},set volume(e){t.qd(Number(e))},get latency(){return t.Vd.ma},destroy(){t.bn(),t=null,i=void 0},play(){t.z6()},pause(){t.Zd()},stop(){i=void 0,t.$d()},prepareWithUserAction(){t.Yd()},addEventListener(t,i){e.kn(t,i)},removeEventListener(t,i){e.pn(t,i)},setSource(t){s(t)}};return e=new YS(n,!0),e.tL(t),e.kn("destroy",(()=>{e.bn()})),n}(this)}constructor(e,i){super(),this.Y6=!0,this.m0=Yv.AA,this.Q6=!1,this.JO=void 0,this.WB=void 0,this.ZM=void 0,this.H6=t=>{t.type!==r.Z_&&this.K6.push(t)},this.Z6=t=>{(t.type!==r.Ah||this.Ko.md)&&(t.type===r.Ch&&this.Ko.md||t.type===r.rv&&this.Ko.xd&&this.Ko.Xl()===t.currentTime||t.type===r.Z_&&this.Ko.pd===t.playbackRate||this.To(t))},this.rf=t=>{if(this.Q6){if(t.type===En.Ev)return;t.type!==En.Av&&t.type!==En.Pv||(this.Q6=!1)}if(t.type===r.Ah){if(!this.Y6)return;this.Y6=!1}else if(t.type===r.Ch){if(this.Y6)return;this.Y6=!0}else if(t.type===En.Rf){if(this.m0===t.readyState)return;this.m0=t.readyState}else if(t.type===r.D_)return;this.To(t)},this.M6=new t(e,i),this.j6=new YD,this.Ko=this.M6,this.F6=new tN(this),this.M6.Q4&&(this.I6=new br(this),this.I6.qf=this.M6.Q4,this.J6=new gr),this.VV=new xo,this.K6=[],this.iM=!0,this.YO()}}}function _N(){if(!eN){let t=UD;t=function(t){return class extends Th{constructor(e,i){let s=new t(e,i);for(const t of HD)if(VD[t])for(const e of VD[t])s=e(s);super(s)}}}(t);let e=fN(t);e=function(t){let e=t;for(const t of HD)if(WD[t])for(const i of WD[t])e=i(e);return e}(e),eN=e}return eN}function vN(t,e){const i=Lg(e),s=new(_N())(t,i);s.wa=s;let n=s.ma;return s.ja(),s.Sa(jD),g.defineProperty(n,"constructor",{value:vN}),n=mf(n),GD(s),n}Ai((()=>{self.dispatchEvent&&self.dispatchEvent(KD("theoplayerready"))}));var gN={base64:new class{encode(t){return xe(t)}decode(t){return ea(t)}}},mN=JSON.parse('["dash","hls","chromecast","airplay","webaudio","ui","texttrackstyle-ui"]');function wN(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),g.defineProperty(t,s.key,s)}}function pN(t,e){var i=function(t,e){var i=t.length;if(i<=1)return t;for(var s=new Array(i),n=1;n<i;n*=2){yN(t,e,n,s);var r=t;t=s,s=r}return t}(t,e);return i!==t&&yN(i,null,t.length,t),t}function yN(t,e,i,s){var n,r,o,h,a,u=t.length,c=0,l=2*i;for(n=0;n<u;n+=l)for(o=(r=n+i)+i,r>u&&(r=u),o>u&&(o=u),h=n,a=r;;)if(h<r&&a<o)e(t[h],t[a])<=0?s[c++]=t[h++]:s[c++]=t[a++];else if(h<r)s[c++]=t[h++];else{if(!(a<o))break;s[c++]=t[a++]}}var AN=/[a-zA-Z]/,bN=/[0-9]/,TN=/[0-9a-fA-F]/,SN=/^0x/i,EN=/^[0-9]+$/,kN=/^[0-9a-fA-F]+$/,PN=/^[0-7]+$/,IN=g.prototype.toString,RN=Array.isArray||function(t){return"[object Array]"===IN.call(t)},CN="undefined"!=typeof Symbol&&"symbol"==typeof Symbol.iterator;function xN(t){return RN(t)?t:Array.from(t)}function DN(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function NN(t){return t>=65&&t<=90}function BN(t){return NN(t)||function(t){return t>=97&&t<=122}(t)}function ON(t){return t>=48&&t<=57}function MN(t){return ON(t)||BN(t)}function LN(t){return ON(t)||t>=65&&t<=70||t>=97&&t<=102}function FN(t){return NN(t)?t+32:t}function UN(t){return ON(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function HN(t,e){return void 0===e&&(e=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(e?87:55):-1}var WN=b.min,qN=String.fromCharCode,VN=16384;function zN(t){for(var e=t.length,i=[],s=0;s<e;s+=VN){var n=WN(s+VN,e);i.push(qN.apply(null,t.slice(s,n)))}return i.join("")}var XN=2147483647,GN=/[^\0-\x7E]/,QN=/[\x2E\u3002\uFF0E\uFF61]/g,KN={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ga=b.floor,jN=String.fromCharCode;function YN(t){throw new RangeError(KN[t])}function ZN(t){for(var e=[],i=0,s=t.length;i<s;){var n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<s){var r=t.charCodeAt(i++);56320==(64512&r)?e.push(((1023&n)<<10)+(1023&r)+65536):(e.push(n),i--)}else e.push(n)}return e}var JN,$N,Kr,tB=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},eB=function(t,e,i){var s=0;for(t=i?Ga(t/700):t>>1,t+=Ga(t/e);t>455;s+=36)t=Ga(t/35);return Ga(s+36*t/(t+38))},iB=function(t){return function(t,e){var i=t.split("@"),s="";i.length>1&&(s=i[0]+"@",t=i[1]);var n=function(t,e){for(var i=[],s=t.length;s--;)i[s]=e(t[s]);return i}((t=t.replace(QN,".")).split("."),e).join(".");return s+n}(t,(function(t){return GN.test(t)?"xn--"+function(t){for(var e=[],i=(t=ZN(t)).length,s=128,n=0,r=72,o=0,h=t;o<h.length;o++){var a=h[o];a<128&&e.push(jN(a))}var u=e.length,c=u;for(u&&e.push("-");c<i;){for(var l=XN,d=0,f=t;d<f.length;d++){var _=f[d];_>=s&&_<l&&(l=_)}var v=c+1;l-s>Ga((XN-n)/v)&&YN("overflow"),n+=(l-s)*v,s=l;for(var g=0,m=t;g<m.length;g++){var w=m[g];if(w<s&&++n>XN&&YN("overflow"),w==s){for(var p=n,y=36;;y+=36){var A=y<=r?1:y>=r+26?26:y-r;if(p<A)break;var b=p-A,T=36-A;e.push(jN(tB(A+b%T,0))),p=Ga(b/T)}e.push(jN(tB(p,0))),r=eB(n,v,c==u),n=0,++c}}++n,++s}return e.join("")}(t):t}))};function Sa(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];s>65535&&(s-=65536,e.push(s>>>10&1023|55296),s=56320|1023&s),e.push(s)}return zN(e)}function sB(t){if(t>=55296&&t<=57343)throw new v("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function nB(t,e){return t>>e&63|128}function rB(t,e){0!=(4294967168&t)?(0==(4294965248&t)?e.push(t>>6&31|192):0==(4294901760&t)?(sB(t),e.push(t>>12&15|224),e.push(nB(t,6))):0==(4292870144&t)&&(e.push(t>>18&7|240),e.push(nB(t,12)),e.push(nB(t,6))),e.push(63&t|128)):e.push(t)}function oB(t){for(var e=[],i=0;i<t.length;i++){rB(t[i],e)}return e}function hB(){if(Kr>=$N)throw new v("Invalid byte index");var t=255&JN[Kr];if(Kr++,128==(192&t))return 63&t;throw new v("Invalid continuation byte")}function aB(){var t,e;if(Kr>$N)throw new v("Invalid byte index");if(Kr===$N)return!1;if(t=255&JN[Kr],Kr++,0==(128&t))return t;if(192==(224&t)){if((e=(31&t)<<6|hB())>=128)return e;throw new v("Invalid continuation byte")}if(224==(240&t)){if((e=(15&t)<<12|hB()<<6|hB())>=2048)return sB(e),e;throw new v("Invalid continuation byte")}if(240==(248&t)&&(e=(7&t)<<18|hB()<<12|hB()<<6|hB())>=65536&&e<=1114111)return e;throw new v("Invalid UTF-8 detected")}function uB(t){return[37,HN(t>>4),HN(15&t)]}function cB(t){return function(t){return t>=0&&t<=31}(t)||t>126}function lB(t){return cB(t)||32===t||34===t||60===t||62===t||96===t}function dB(t){return lB(t)||35===t||63===t||123===t||125===t}function fB(t){return dB(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function _B(t){return t<33||t>126||34===t||35===t||60===t||62===t}function vB(t){return _B(t)||39===t}function Za(t,e){if(!e(t))return[t];for(var i=oB([t]),s=[],n=0;n<i.length;n++){var r=i[n];s.push.apply(s,uB(r))}return s}function gB(t,e){for(var i=[],s=0,n=ZN(t);s<n.length;s++){var r=n[s];i.push.apply(i,Za(r,e))}return Sa(i)}function mB(t){return function(t){for(var e=[],i=t.length,s=0;s<i;s++){var n=t[s];if(37===n&&s+2<i&&LN(t[s+1])&&LN(t[s+2])){var r=UN(t[s+1])<<4|UN(t[s+2]);e.push(r),s+=2}else e.push(n)}return e}(oB(t))}function wB(t){return Sa(function(t){JN=t.slice(),$N=JN.length,Kr=0;for(var e,i=[];!1!==(e=aB());)i.push(e);return i}(mB(ZN(t))))}function pB(t){var e=t.length,i=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<e&&":"===t[r]){if(!(r+1<e&&":"===t[r+1]))throw new p;r+=2,n=s+=1}for(;r<e;){if(8===s)throw new p("Too many groups");if(":"!==t[r]){for(var o=0,h=0;h<4&&r<e&&TN.test(t[r]);)o=o<<4|k(t[r],16),r+=1,h+=1;if("."===t[r]){if(0===h)throw new p;if(r-=h,s>6)throw new p;for(var a=0;r<e;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new p;r+=1}if(!bN.test(t[r]))throw new p;for(;r<e&&bN.test(t[r]);){var c=k(t[r],10);if(null===u)u=c;else{if(0===u)throw new p;if((u=10*u+c)>255)throw new p}r+=1}i[s]=i[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new p;break}if(":"===t[r]){if((r+=1)===e)throw new p}else if(r<e)throw new p;i[s]=o,s+=1}else{if(null!==n)throw new p("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var l=s-n;for(s=7;0!==s&&l>0;)DN(i,s,n+l-1),s-=1,l-=1}else if(8!==s)throw new p;return i}function yB(t){var e=10,i=EN;return SN.test(t)?(t=t.slice(2),e=16,i=kN):t.length>=2&&"0"===t[0]&&(t=t.slice(1),e=8,i=PN),""===t?0:i.test(t)?k(t,e):void 0}var AB={EY:4},bB=/[\0\t\n\r #%/:?@\[\\\]]/,TB=/[\0\t\n\r #/:?@\[\\\]]/;function SB(t,e){if("["===t[0]){if("]"!==t[t.length-1])throw new p("Invalid IPv6 address");return{EY:2,t5:pB(t.slice(1,-1))}}if(!e)return function(t){if(TB.test(t))throw new p("Invalid code point in opaque host");var e=gB(t,cB);return""===e?AB:{EY:3,lR:e}}(t);var i=function(t){var e=function(t){return iB(t.toLowerCase())}(t);return e}(wB(t));if(bB.test(i))throw new p("Invalid code point in host");var s=function(t){var e=t.split(".");if(""===e[e.length-1]&&e.pop(),!(e.length>4)){for(var i=[],s=0;s<e.length;s++){var n=e[s];if(""===n)return;var r=yB(n);if(void 0===r)return;i.push(r)}for(var o=0;o<i.length-1;o++)if(i[o]>255)throw new p;if(i[i.length-1]>=b.pow(256,5-i.length))throw new p;for(var h=i.pop(),a=0;a<i.length;a++)h+=i[a]*b.pow(256,3-a);return h}}(i);return void 0!==s?{EY:1,t5:s}:""===i?AB:{EY:0,e5:i}}function EB(t){switch(t.EY){case 0:return t.e5;case 1:return function(t){for(var e=[],i=t,s=1;s<=4;s++)e.push(""+(255&i)),4!==s&&e.push("."),i>>>=8;return e.reverse().join("")}(t.t5);case 2:return"["+function(t){for(var e="",i=function(t){for(var e=0,i=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>i&&(e=s,i=n),n=0);return n>i&&(e=s,i=n),i>1?e:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}i!==n?(e+=t[n].toString(16),7!==n&&(e+=":")):(e+=0===n?"::":":",s=!0)}return e}(t.t5)+"]";case 3:return t.lR;case 4:return""}}var kB=/\+/g;function PB(t){return 42===t||45===t||46===t||95===t||MN(t)}function IB(t){for(var e=t.split("&"),i=[],s=0;s<e.length;s++){var n=e[s];if(""!==n){var r=n.indexOf("="),o=void 0,h=void 0;-1!==r?(o=n.slice(0,r),h=n.slice(r+1)):(o=n,h=""),o=o.replace(kB," "),h=h.replace(kB," ");var a=wB(o),u=wB(h);i.push([a,u])}}return i}function RB(t){for(var e="",i=0;i<t.length;i++){var s=t[i];i>0&&(e+="&"),e+=CB(oB(ZN(s[0])))+"="+CB(oB(ZN(s[1])))}return e}function CB(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];32===s?e.push(43):PB(s)?e.push(s):e.push.apply(e,uB(s))}return zN(e)}var xB=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function Vr(t){var e=""+t,i=xB.exec(e);return i?function(t,e){for(var i=t.length,s=[],n=e;n<i;n++){var r=t.charCodeAt(n);if(NB(r))if(BB(r)||n===i-1)s.push(DB);else{var o=t.charCodeAt(n+1);BB(o)?(s.push(r,o),n++):s.push(DB)}else s.push(r)}return t.slice(0,e)+zN(s)}(e,i.index):e}var DB=65533,NB=function(t){return 55296==(63488&t)},BB=function(t){return 0!=(1024&t)};function OB(t,e){var i=t[0],s=e[0];return i===s?0:i<s?-1:1}function MB(t){t.i5.length=0}function LB(t,e){!function(t,e){for(var i=0;i<e.length;i++)t[i]=e[i];t.length=e.length}(t.i5,IB(e))}function FB(t){if(t.s5){var e=RB(t.i5);""===e&&(e=null),t.s5.s5.n5=e}}var UB=function(){function t(t){if(void 0===t&&(t=void 0),this.s5=null,null==t)this.i5=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof UB&&!!RN(t.i5)&&(!CN||t[Symbol.iterator]===HB)}(t))this.i5=t.i5.slice();else if(function(t){return null!=t&&(!!RN(t)||!!CN&&"function"==typeof t[Symbol.iterator])}(t)){this.i5=[];for(var e=0,i=xN(t);e<i.length;e++){var s=xN(i[e]);if(2!==s.length)throw new p("Invalid name-value pair");this.i5.push([Vr(s[0]),Vr(s[1])])}}else for(var n in this.i5=[],t)g.prototype.hasOwnProperty.call(t,n)&&this.i5.push([Vr(n),Vr(t[n])]);else(t=Vr(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.i5=IB(t)}var e=t.prototype;return e.append=function(t,e){t=Vr(t),e=Vr(e),this.i5.push([t,e]),FB(this)},e.delete=function(t){t=Vr(t);for(var e=this.i5,i=0;i<e.length;){e[i][0]===t?e.splice(i,1):i++}FB(this)},e.get=function(t){t=Vr(t);for(var e=this.i5,i=0;i<e.length;i++){var s=e[i];if(s[0]===t)return s[1]}return null},e.getAll=function(t){t=Vr(t);for(var e=this.i5,i=[],s=0;s<e.length;s++){var n=e[s];n[0]===t&&i.push(n[1])}return i},e.has=function(t){t=Vr(t);for(var e=this.i5,i=0;i<e.length;i++){if(e[i][0]===t)return!0}return!1},e.set=function(t,e){t=Vr(t),e=Vr(e);for(var i=this.i5,s=!1,n=0;n<i.length;){var r=i[n];r[0]===t?s?i.splice(n,1):(r[1]=e,s=!0,n++):n++}s||i.push([t,e]),FB(this)},e.sort=function(){pN(this.i5,OB),FB(this)},e.toString=function(){return RB(this.i5)},e.entries=function(){return new zB(this.i5,WB)},e.keys=function(){return new zB(this.i5,qB)},e.values=function(){return new zB(this.i5,VB)},e.forEach=function(t){var e=this;this.i5.forEach((function(i){return t(i[1],i[0],e)}))},t}(),HB=UB.prototype.entries;CN&&(UB.prototype[Symbol.iterator]=HB);var WB=function(t){return[t[0],t[1]]},qB=function(t){return t[0]},VB=function(t){return t[1]},zB=function(){function t(t,e){this.r5=0,this.i5=t,this.o5=e}return t.prototype.next=function(){return this.r5<this.i5.length?{done:!1,value:this.o5(this.i5[this.r5++])}:{done:!0,value:void 0}},t}(),XB="null";var Ch=g.create(null);Ch.ftp=21,Ch.file=0,Ch.gopher=70,Ch.http=80,Ch.https=443,Ch.ws=80,Ch.wss=443;var GB=/^(?:\.|%2e)$/i,QB=/^(?:\.|%2e){2}$/i;function KB(t){return GB.test(t)}function jB(t){return QB.test(t)}function YB(t){return void 0!==Ch[t]}function Ar(t){return YB(t.h5)}function ZB(t){return""!==t.a5||""!==t.u5}function JB(t){var e=t.length;if(!(e>=2))return!1;if(!tO(t.slice(0,2)))return!1;if(2!==e){var i=t[2];if(47!==i&&92!==i&&63!==i&&35!==i)return!1}return!0}function $B(t){return 2===t.length&&AN.test(t[0])&&(":"===t[1]||"|"===t[1])}function tO(t){return 2===t.length&&$B(zN(t))}function eO(t){return $B(t)&&":"===t[1]}function iO(t){var e=t.c5;0!==e.length&&("file"===t.h5&&1===e.length&&eO(e[0])||e.pop())}function sO(t){return null===t.l5||AB===t.l5||t.d5||"file"===t.h5}var ua=-1,nO=/\t|\n|\r/g,rO=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function oO(t,e,i,s){void 0===i&&(i=null),void 0===s&&(s=null),i||(i=new aO,t=t.replace(rO,""));var n=null!==s?s:0;e=e||null;for(var r=[],o=!1,h=!1,a=!1,u=ZN(t=t.replace(nO,"")),c=u.length,l=0;l<=c;){var d=l<c?u[l]:ua;switch(n){case 0:if(!BN(d)){if(null===s){r.length=0,n=2;continue}throw new p("Invalid scheme")}r.push(FN(d)),n=1;break;case 1:if(MN(d)||43===d||45===d||46===d)r.push(FN(d));else{if(58!==d){if(null===s){r.length=0,n=2,l=0;continue}throw new p("Invalid scheme")}var f=Sa(r);if(null!==s){if(YB(i.h5)&&!YB(f))return;if(!YB(i.h5)&&YB(f))return;if((ZB(i)||null!==i.c3)&&"file"===f)return;if("file"===i.h5&&(i.l5===AB||null===i.l5))return}if(i.h5=f,null!==s)return void(Ar(i)&&i.c3===Ch[i.h5]&&(i.c3=null));r.length=0,"file"===i.h5?n=13:Ar(i)&&e&&e.h5===i.h5?n=3:Ar(i)?n=7:47===u[l+1]?(n=4,l+=1):(i.d5=!0,i.c5.push(""),n=18)}break;case 2:if(!e||e.d5&&35!==d)throw new p("Invalid scheme");e.d5&&35===d?(i.h5=e.h5,i.c5=e.c5.slice(),i.n5=e.n5,i.f5="",i.d5=!0,n=20):"file"!==e.h5?(n=5,l-=1):(n=13,l-=1);break;case 3:47===d&&47===u[l+1]?n=8:(n=5,l-=1);break;case 4:47===d?n=9:(n=17,l-=1);break;case 5:i.h5=e.h5,ua===d?(i.a5=e.a5,i.u5=e.u5,i.l5=e.l5,i.c3=e.c3,i.c5=e.c5.slice(),i.n5=e.n5):47===d?n=6:63===d?(i.a5=e.a5,i.u5=e.u5,i.l5=e.l5,i.c3=e.c3,i.c5=e.c5.slice(),i.n5="",n=19):35===d?(i.a5=e.a5,i.u5=e.u5,i.l5=e.l5,i.c3=e.c3,i.c5=e.c5.slice(),i.n5=e.n5,i.f5="",n=20):92===d&&Ar(i)?n=6:(i.a5=e.a5,i.u5=e.u5,i.l5=e.l5,i.c3=e.c3,i.c5=e.c5.slice(),i.c5.pop(),n=17,l-=1);break;case 6:!Ar(i)||47!==d&&92!==d?47===d?n=9:(i.a5=e.a5,i.u5=e.u5,i.l5=e.l5,i.c3=e.c3,n=17,l-=1):n=8;break;case 7:if(47!==d||47!==u[l+1]){n=8;continue}n=8,l+=1;break;case 8:47!==d&&92!==d&&(n=9,l-=1);break;case 9:if(64===d){o&&r.unshift(37,52,48),o=!0;for(var _=0;_<r.length;_++){var v=r[_];if(58!==v||a){var g=Sa(Za(v,fB));a?i.u5+=g:i.a5+=g}else a=!0}r.length=0}else if(ua===d||47===d||63===d||35===d||Ar(i)&&92===d){if(o&&0===r.length)throw new p("Invalid host");l-=r.length+1,r.length=0,n=10}else r.push(d);break;case 10:case 11:if(null!==s&&"file"===i.h5)l-=1,n=15;else if(58!==d||h)if(ua===d||47===d||63===d||35===d||Ar(i)&&92===d){if(l-=1,Ar(i)&&0===r.length)throw new p("Invalid host");if(null!==s&&0===r.length&&(ZB(i)||null!==i.c3))return;var m=SB(Sa(r),Ar(i));if(i.l5=m,r.length=0,n=16,null!==s)return}else 91===d?h=!0:93===d&&(h=!1),r.push(d);else{if(0===r.length)throw new p("Invalid host");var w=SB(Sa(r),Ar(i));if(i.l5=w,r.length=0,n=12,11===s)return}break;case 12:if(ON(d))r.push(d);else{if(!(ua===d||47===d||63===d||35===d||Ar(i)&&92===d||null!==s))throw new p("Invalid port");if(0!==r.length){var y=k(Sa(r),10);if(y>65535)throw new p("Invalid port");i.c3=y===Ch[i.h5]?null:y,r.length=0}if(null!==s)return;n=16,l-=1}break;case 13:i.h5="file",47===d||92===d?n=14:e&&"file"===e.h5?ua===d?(i.l5=e.l5,i.c5=e.c5.slice(),i.n5=e.n5):63===d?(i.l5=e.l5,i.c5=e.c5.slice(),i.n5="",n=19):35===d?(i.l5=e.l5,i.c5=e.c5.slice(),i.n5=e.n5,i.f5="",n=20):(JB(u.slice(l))||(i.l5=e.l5,i.c5=e.c5.slice(),iO(i)),n=17,l-=1):(n=17,l-=1);break;case 14:47===d||92===d?n=15:(e&&"file"===e.h5&&!JB(u.slice(l))&&(eO(e.c5[0])?i.c5.push(e.c5[0]):i.l5=e.l5),n=17,l-=1);break;case 15:if(ua===d||47===d||92===d||63===d||35===d)if(l-=1,null===s&&tO(r))n=17;else if(0===r.length){if(i.l5=AB,null!==s)return;n=16}else{var A=SB(Sa(r),Ar(i));if(0===A.EY&&"localhost"===A.e5&&(A=AB),i.l5=A,null!==s)return;r.length=0,n=16}else r.push(d);break;case 16:Ar(i)?(n=17,47!==d&&92!==d&&(l-=1)):null===s&&63===d?(i.n5="",n=19):null===s&&35===d?(i.f5="",n=20):ua!==d&&(n=17,47!==d&&(l-=1));break;case 17:if(ua===d||47===d||Ar(i)&&92===d||null===s&&(63===d||35===d)){var b=Sa(r);if(jB(b)?(iO(i),47===d||Ar(i)&&92===d||i.c5.push("")):!KB(b)||47===d||Ar(i)&&92===d?KB(b)||("file"===i.h5&&0===i.c5.length&&tO(r)&&(AB!==i.l5&&null!==i.l5&&(i.l5=AB),r[1]=58,b=Sa(r)),i.c5.push(b)):i.c5.push(""),r.length=0,"file"===i.h5&&(ua===d||63===d||35===d))for(;i.c5.length>1&&""===i.c5[0];)i.c5.shift();63===d?(i.n5="",n=19):35===d&&(i.f5="",n=20)}else r.push.apply(r,Za(d,dB));break;case 18:63===d?(i.n5="",n=19):35===d?(i.f5="",n=20):ua!==d&&(i.c5[0]+=Sa(Za(d,cB)));break;case 19:null===s&&35===d?(i.f5="",n=20):ua!==d&&(i.n5+=Sa(Za(d,Ar(i)?vB:_B)));break;case 20:ua===d||0===d||(i.f5+=Sa(Za(d,lB)))}l++}return i}function hO(t,e,i,s){try{oO(t,e,i,s)}catch(t){}}var aO=function(){this.h5="",this.a5="",this.u5="",this.l5=null,this.c3=null,this.c5=[],this.n5=null,this.f5=null,this.d5=!1};function uO(t){switch(t.h5){case"blob":var e;try{e=oO(t.c5[0],null)}catch(t){return XB}return uO(e);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,e,i){return t+"://"+EB(e)+(null===i?"":":"+i)}(t.h5,t.l5,t.c3);default:return XB}}var cO=function(){function t(t,e){var i,s=null;if(null!=e)if(function(t){return null!=t&&t instanceof cO&&"object"==typeof t.s5}(e))s=e.s5;else try{s=oO(String(e),null)}catch(t){throw new p("Invalid base URL: "+t.message)}try{i=oO(String(t),s)}catch(t){throw new p("Invalid URL: "+t.message)}var n=i.n5;this.s5=i,this.n5=function(t){var e=new UB;return null!==t&&LB(e,t),e}(n),this.n5.s5=this}var e=t.prototype;return e.toString=function(){return this.href},e.toJSON=function(){return this.href},function(t,e,i){e&&wN(t.prototype,e),i&&wN(t,i)}(t,[{key:"href",get:function(){return function(t,e){void 0===e&&(e=!1);var i=t.h5+":";if(null!==t.l5?(i+="//",ZB(t)&&(i+=t.a5,""!==t.u5&&(i+=":"+t.u5),i+="@"),i+=EB(t.l5),null!==t.c3&&(i+=":"+t.c3)):null===t.l5&&"file"===t.h5&&(i+="//"),t.d5)i+=t.c5[0];else for(var s=0,n=t.c5;s<n.length;s++)i+="/"+n[s];return null!==t.n5&&(i+="?"+t.n5),e||null===t.f5||(i+="#"+t.f5),i}(this.s5)},set:function(t){var e;try{e=oO(String(t),null)}catch(t){throw new p("Invalid URL: "+t.message)}this.s5=e,MB(this.n5);var i=this.s5.n5;null!==i&&LB(this.n5,i)}},{key:"origin",get:function(){return uO(this.s5)}},{key:"protocol",get:function(){return this.s5.h5+":"},set:function(t){hO(t+":",null,this.s5,0)}},{key:"username",get:function(){return this.s5.a5},set:function(t){sO(this.s5)||(this.s5.a5=gB(t,fB))}},{key:"password",get:function(){return this.s5.u5},set:function(t){sO(this.s5)||(this.s5.u5=gB(t,fB))}},{key:"host",get:function(){var t=this.s5,e=t.l5;if(null===e)return"";var i=t.c3,s=EB(e);return null!==i&&(s+=":"+i),s},set:function(t){this.s5.d5||hO(t,null,this.s5,10)}},{key:"hostname",get:function(){var t=this.s5.l5;return null===t?"":EB(t)},set:function(t){this.s5.d5||hO(t,null,this.s5,11)}},{key:"port",get:function(){var t=this.s5.c3;return null===t?"":""+t},set:function(t){sO(this.s5)||(""===t?this.s5.c3=null:hO(t,null,this.s5,12))}},{key:"pathname",get:function(){var t=this.s5.c5;return this.s5.d5?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.s5.d5||(this.s5.c5.length=0,hO(t,null,this.s5,16))}},{key:"search",get:function(){var t=this.s5.n5;return null===t||""===t?"":"?"+t},set:function(t){t=Vr(t);var e=this.s5;if(""===t)return e.n5=null,void MB(this.n5);"?"===t[0]&&(t=t.slice(1)),e.n5="",hO(t,null,e,19),LB(this.n5,t)}},{key:"searchParams",get:function(){return this.n5}},{key:"hash",get:function(){var t=this.s5.f5;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.s5.f5="",hO(t,null,this.s5,20)):this.s5.f5=null}}]),t}();function lO(t){return t.document&&t.document.baseURI||t.location.href||""}var dO=!!("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||!(!Uu||!Uu.msMaxTouchPoints),fO=qb(),_O=!(!fO||!fO.webkitShowPlaybackTargetPicker),vO=class{get _5(){return void 0===this.v5&&(this.v5=this.g5()),this.v5}g5(){return 0}get m5(){return!Bp.PP}get w5(){if(s.screen)return{width:s.screen.width,height:s.screen.height}}get FJ(){return s.devicePixelRatio||1}get p5(){return _O}get pJ(){return!1}get dJ(){return!0}get p_(){return Bp.mP||Bp.xk}get y5(){return!Bp.xk}get aN(){return!0}get A_(){return!0}get y_(){return!1}get A5(){}get b5(){return!0}get TK(){return!1}get T5(){return!1}get S5(){return Bp.sP}E5(t,e){return!0}k5(t){return t>=2*ne}constructor(){this.v5=void 0,this.P5=!1,this.Ye=dO,this.Ks=!1,this.i4=!0}},gO=function(){const t=Wb();if(!t)return!1;const e=t.muted;return t.muted=!e,t.muted!==e}(),mO=function(){if(Bp.Pk)return!1;const t=Wb();if(!t)return!1;const e=t.volume;return t.volume=e/2+.1,e!==t.volume}();var I=class extends vO{g5(){return this.I5?this.I5._5:super.g5()}get A5(){var t;return null==(t=this.I5)?void 0:t.A5}get b5(){var t,e;return null==(e=null==(t=this.I5)?void 0:t.b5)||e}E5(t,e){return this.I5?this.I5.E5(t,e):super.E5(t,e)}k5(t){return this.I5?this.I5.k5(t):super.k5(t)}constructor(t){super(),this.I5=t,this.I5&&(this.P5=this.I5.P5,this.Ye=this.I5.Ye,this.i4=gO&&this.I5.i4)}},wO=class extends I{get y_(){return Bp.xk}constructor(t){super(t),this.P5=!0,this.Ks=!0}},pO=class extends wO{get y_(){return!0}g5(){return Ma(!0)?super.g5():1}},yO=class extends I{get pJ(){return Bp.$k<3}get dJ(){return Bp.$k>=3}get w5(){return s.tizen&&!this.R5&&s.tizen.systeminfo.getPropertyValue("DISPLAY",(t=>{const e=t.resolutionWidth,i=t.resolutionHeight;1===e&&1===i||(this.R5={width:e,height:i})})),this.R5}get TK(){return Bp.$k<3}get T5(){return!0}E5(t,e){return super.E5(t,e)}},Gt=class extends vO{constructor(){super()}},AO=class extends Gt{get A5(){if(Bp.hk)return 4096}E5(t,e){if(t&&t.C5&&e&&e.C5){let i=St(t.C5,"mp4a.40.2")&&St(e.C5,"mp4a.40.5"),s=St(t.C5,"mp4a.40.5")&&St(e.C5,"mp4a.40.2"),n=St(t.C5,"mp4a.40.2")&&St(e.C5,"mp4a.40.34"),r=St(t.C5,"mp4a.40.34")&&St(e.C5,"mp4a.40.2"),o=St(t.C5,"mp4a.40.5")&&St(e.C5,"mp4a.40.34"),h=St(t.C5,"mp4a.40.34")&&St(e.C5,"mp4a.40.5");return!(i||s||n||r||o||h)}return!0}};function St(t,e){return t.indexOf(e)>-1}var bO=class extends Gt{k5(t){return t>=2}},TO=class extends Gt{constructor(){super(),this.P5=Bp.pP>=11,this.i4=Bp.mP&&!(Bp.xk&&Bp.pP<10)}},SO=class extends I{get w5(){return s.webOS&&!this.R5&&s.webOS.deviceInfo((t=>{this.R5={width:t.screenWidth,height:t.screenHeight}})),this.R5}get aN(){return!1}get T5(){return!0}},EO=class extends Gt{get b5(){return!Bp.lk||(Bp.Qk?92!==Bp.jk:Bp.Xk>=100)}},kO=class extends I{get y_(){return!0}},PO=class{x5(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];BE(...e)}Uv(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Fa(...e)}D5(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];OE(...e)}N5(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];ME(t,...i)}Tl(t,e){return u(t,e)}uj(t,e){return Hu(t,e)}bl(t){c(t)}lj(t){Wu(t)}sx(){return this.B5.sx()}jC(){return this.B5.jC()}ZC(){return this.B5.ZC()}YC(){return this.B5.YC()}QC(){return this.B5.QC()}$C(t,e){return this.B5.$C(t,e)}KC(t){return this.B5.KC(t)}get eN(){return this.O5}Oh(t,e){let i;return void 0===e&&(e=lO(qh)),i="object"!=typeof e||e instanceof cO?e:e.href,new cO(t,i)}Fv(t,e){if(void 0===e&&(e=lO(qh)),this.M5){const i=Ts(e)?e:e.toString();return new self.URL(t,i).href}return this.Oh(t,e).href}get Zs(){return this.L5}get T_(){return{b_:Uu&&Uu.userAgent.match(/Android /i)?"Android":"other",S_:Boolean(Uu&&Uu.userAgent.match(/Android 8.0.0/i))}}get eW(){return self&&self.location&&"https:"===self.location.protocol}get F5(){return"languages"in Uu?Uu.languages.slice():[Uu.language]}constructor(){this.O5=new IO,this.L5=function(){const t=function(){if(Bp.fP)return new AO;if(Bp.rP||Bp.hP)return new bO;if(Bp.mP)return new TO;if(Bp.Vk)return new EO;return new Gt}();return Bp.xk?new pO(t):Bp.Ks?new wO(t):Bp.Zk?new yO(t):Bp.eP?new SO(t):Bp.hk?new kO(t):new I(t)}(),this.M5=function(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}(),self.performance&&self.performance.now?this.Al=()=>self.performance.now():this.Al=Yn}},IO=class{get iN(){return Uu.oscpu}get Zs(){return Uu.platform}get sN(){return Uu.vendor}get nN(){return Uu.vendorSub}};var RO=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(e,i)=>new t(e,i)}(t)}catch(t){}const e=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(e)return function(t){return(e,i)=>{const s=new t;if(e)for(const t of e)s.append(t);return s.getBlob(i&&i.type||"")}}(e)})();function CO(t,e,i){const s=RO([e],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,e){let i=t;const s=i.indexOf("?");if(s>=0&&(i=i.substr(0,s)),i=i.substr(i.lastIndexOf("/")+1),e){let t=i.indexOf(".");t<0&&(t=i.length),i=i.substr(0,t)+e+i.substr(t)}return i}(t,i),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}var xO=class extends pu{get name(){return ce.VS}constructor(t,e){super(t,function(t){return"Error while opening "+t+". Invalid URL."}(t.YS),e)}},DO=function(t,e){return(DO=g.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function NO(t,e){function i(){this.constructor=t}DO(t,e),t.prototype=null===e?g.create(e):(i.prototype=e.prototype,new i)}var To="object"==typeof s?s:"object"==typeof self?self:"object"==typeof global?global:null;var BO=function(){var t=To.Blob;if(t)try{return new t,function(t,e){return new To.Blob(t,e)}}catch(t){}var e=To.BlobBuilder||To.WebKitBlobBuilder||To.MozBlobBuilder||To.MSBlobBuilder;return e?function(t){return function(e,i){var s=new t;if(e)for(var n=0,r=e;n<r.length;n++){var o=r[n];s.append(o)}return s.getBlob(i&&i.type||"")}}(e):null}(),OO="function"==typeof cd?cd:void 0;function MO(t){return t&&"function"==typeof t.getReader}function LO(t){if("function"!=typeof t)return!1;try{var e=!1,i=new t({start:function(){e=!0}});return!!e&&MO(i)}catch(t){return!1}}var FO=function(){function t(t,e){this.Bu=t,this.U5=e}return t.prototype.pull=function(t){var e=this;return this.Bu.read().then((function(i){e.U5&&e.U5(i),i.done?t.close():t.enqueue(i.value)}))},t.prototype.cancel=function(t){return this.Bu.cancel(t)},t}();function UO(t,e){return e.constructor===t?e:new t(new FO(e.getReader()),{highWaterMark:0})}var HO=function(){function t(t,e){this.H5=t,this.W5=e}return t.prototype.pull=function(t){return this.H5().then((function(e){t.enqueue(new S(e)),t.close()}))},t.prototype.cancel=function(t){this.W5&&this.W5(t)},t}();function WO(t,e,i){return new t(new HO(e,i),{highWaterMark:0})}var ga={searchParams:"URLSearchParams"in To,iterable:"Symbol"in To&&"iterator"in Symbol,blob:"FileReader"in To&&!!BO,formData:"FormData"in To,arrayBuffer:"ArrayBuffer"in To,stream:LO(OO),streamRequest:"Request"in To&&"body"in To.Request.prototype,streamResponse:"Response"in To&&"body"in To.Response.prototype,abort:"AbortController"in To&&"Request"in To&&"signal"in To.Request.prototype,encoding:"TextEncoder"in To&&"TextDecoder"in To,url:"URL"in To&&function(t){try{return new To.URL(t).toString()===t}catch(t){return!1}}("http://example.com/"),firefox:"navigator"in To&&/Firefox\//.test(To.navigator.userAgent)};function qO(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new p("Invalid character in header field name");return t}function VO(t){return"string"!=typeof t&&(t=String(t)),t}function zO(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return ga.iterable&&(e[Symbol.iterator]=function(){return e}),e}var XO=function(){function t(t){var e=this;this.Zc={};var i=function(t,i){Array.isArray(t)&&2===t.length?e.append(t[0],t[1]):e.append(i,t)};!function(t){return t&&"function"==typeof t.forEach}(t)?!function(t){return ga.iterable&&t&&t[Symbol.iterator]}(t)?t&&g.getOwnPropertyNames(t).forEach((function(i){e.append(i,t[i])})):Array.from(t).forEach(i):t.forEach(i)}return t.prototype.append=function(t,e){t=qO(t),e=VO(e);var i=t.toLowerCase();if(this.Zc.hasOwnProperty(i)){var s=this.Zc[i],n=s[1];s[1]=n?n+", "+e:e}else this.Zc[i]=[t,e]},t.prototype.delete=function(t){var e=qO(t).toLowerCase();delete this.Zc[e]},t.prototype.get=function(t){var e=qO(t).toLowerCase();return this.Zc.hasOwnProperty(e)?this.Zc[e][1]:null},t.prototype.has=function(t){var e=qO(t).toLowerCase();return this.Zc.hasOwnProperty(e)},t.prototype.set=function(t,e){var i=(t=qO(t)).toLowerCase();this.Zc[i]=[t,VO(e)]},t.prototype.forEach=function(t,e){for(var i in this.Zc)this.Zc.hasOwnProperty(i)&&t.call(e,this.Zc[i][1],i,this)},t.prototype.keys=function(){var t=[];return this.forEach((function(e,i){t.push(i)})),zO(t)},t.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),zO(t)},t.prototype.entries=function(){var t=[];return this.forEach((function(e,i){t.push([i,e])})),zO(t)},t.prototype.asList=function(){var t=[];for(var e in this.Zc)if(this.Zc.hasOwnProperty(e)){var i=this.Zc[e],s=i[0],n=i[1];t.push([s,n])}return t},t}();function GO(){}ga.iterable&&(XO.prototype[Symbol.iterator]=XO.prototype.entries);var QO,KO,Nr,jO=b.min,YO=String.fromCharCode,ZO=16384;function JO(t){for(var e=[],i=0,s=t;i<s.length;i++){var n=s[i];n>65535&&(n-=65536,e.push(n>>>10&1023|55296),n=56320|1023&n),e.push(n)}return function(t){for(var e=t.length,i=[],s=0;s<e;s+=ZO){var n=jO(s+ZO,e);i.push(YO.apply(null,t.slice(s,n)))}return i.join("")}(e)}function $O(t){if(t>=55296&&t<=57343)throw new v("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function tM(t,e){return t>>e&63|128}function eM(t,e){0!=(4294967168&t)?(0==(4294965248&t)?e.push(t>>6&31|192):0==(4294901760&t)?($O(t),e.push(t>>12&15|224),e.push(tM(t,6))):0==(4292870144&t)&&(e.push(t>>18&7|240),e.push(tM(t,12)),e.push(tM(t,6))),e.push(63&t|128)):e.push(t)}function iM(){if(Nr>=KO)throw new v("Invalid byte index");var t=255&QO[Nr];if(Nr++,128==(192&t))return 63&t;throw new v("Invalid continuation byte")}function sM(){var t,e;if(Nr>KO)throw new v("Invalid byte index");if(Nr===KO)return!1;if(t=255&QO[Nr],Nr++,0==(128&t))return t;if(192==(224&t)){if((e=(31&t)<<6|iM())>=128)return e;throw new v("Invalid continuation byte")}if(224==(240&t)){if((e=(15&t)<<12|iM()<<6|iM())>=2048)return $O(e),e;throw new v("Invalid continuation byte")}if(240==(248&t)&&(e=(7&t)<<18|iM()<<12|iM()<<6|iM())>=65536&&e<=1114111)return e;throw new v("Invalid UTF-8 detected")}var nM=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];function rM(t){return t&&URLSearchParams.prototype.isPrototypeOf(t)}function oM(t){return t&&ArrayBuffer.prototype.isPrototypeOf(t)}function hM(t){return t&&DataView.prototype.isPrototypeOf(t)}var L,aM=ArrayBuffer.isView||function(t){return t&&(nM.indexOf(g.prototype.toString.call(t))>-1||hM(t))};function uM(t){if(t.bodyUsed)return Promise.reject(new p("Already used"));t.bodyUsed=!0}function cM(t){return new Promise((function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}}))}function lM(t){return ga.encoding?new To.TextDecoder("utf-8").decode(new S(t)):JO(function(t){KO=(QO=t).length,Nr=0;for(var e,i=[];!1!==(e=sM());)i.push(e);return i}(new S(t)))}function dM(t){return ga.encoding?(new To.TextEncoder).encode(t).buffer:new S(function(t){for(var e=[],i=0,s=t;i<s.length;i++)eM(s[i],e);return e}(function(t){for(var e=[],i=0,s=t.length;i<s;){var n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<s){var r=t.charCodeAt(i++);56320==(64512&r)?e.push(((1023&n)<<10)+(1023&r)+65536):(e.push(n),i--)}else e.push(n)}return e}(t))).buffer}function fM(t){var e=t.getReader(),i=[],s=function(t){var n=t.done,r=t.value;return n?Promise.resolve(i):(i.push(r),e.read().then(s))};return e.read().then(s)}function _M(t){return fM(t).then((function(t){return function(t){for(var e=0,i=0,s=t;i<s.length;i++)e+=(a=s[i]).byteLength;for(var n=new S(e),r=0,o=0,h=t;o<h.length;o++){var a=h[o];n.set(a,r),r+=a.byteLength}return n}(t).buffer}))}function vM(t){return t.slice?t.slice(0):gM(new S(t))}function gM(t){if(t.slice)return t.slice(0).buffer;var e=new S(t.byteLength);return e.set(new S(t.buffer,t.byteOffset,t.byteLength)),e.buffer}function mM(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var i=t.split("="),s=i.shift().replace(/\+/g," "),n=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(s),decodeURIComponent(n))}})),e}function wM(t){var e=t;if(e.bodyUsed)throw new p("Already used");if(e.q5===L.V5){if(!e.z5.tee)throw new v("could not clone ReadableStream body");var i=e.z5.tee(),s=i[0],n=i[1];return e.body=s,e.z5=s,e.X5=s,n}return e.q5===L.aE?vM(e.z5):e.q5===L.BH?e.z5.then(wM):e.X5}!function(t){t[t.gA=0]="gA",t[t.G5=1]="G5",t[t.Q5=2]="Q5",t[t.aE=3]="aE",t[t.V5=4]="V5",t[t.BH=5]="BH"}(L||(L={}));var pM=function(){function t(e,i){this.bodyUsed=!1;var s=this;if(this.X5=e||null,e)if("string"==typeof e)this.q5=L.gA,this.z5=e;else if(function(t){return t&&"function"==typeof t.then}(e))this.q5=L.BH,this.z5=Promise.resolve(e).then((function(e){return new t(e,i)})),this.z5.catch(GO);else if(ga.blob&&function(t){return t&&Blob.prototype.isPrototypeOf(t)}(e))this.q5=L.G5,this.z5=e;else if(ga.formData&&function(t){return t&&FormData.prototype.isPrototypeOf(t)}(e))this.q5=L.Q5,this.z5=e;else if(ga.searchParams&&rM(e))this.q5=L.gA,this.z5=e.toString();else if(ga.arrayBuffer&&(oM(e)||aM(e)))hM(e)&&(this.X5=function(t){return new S(t.buffer,t.byteOffset,t.byteLength)}(e)),this.q5=L.aE,this.z5=function(t){return oM(t)?vM(t):gM(t)}(e);else{if(!ga.stream||!MO(e))throw new v("unsupported BodyInit type");e=UO(OO,e),this.q5=L.V5,this.z5=e,this.X5=e}else this.q5=L.gA,this.z5="";this.K5="",i.has("content-type")?this.K5=(i.get("content-type")||"").toLowerCase():("string"==typeof e?this.K5="text/plain;charset=UTF-8":s.q5===L.G5&&s.z5.type?this.K5=s.z5.type:ga.searchParams&&rM(e)&&(this.K5="application/x-www-form-urlencoded;charset=UTF-8"),this.K5&&i.set("content-type",this.K5)),ga.stream&&(null==e?this.body=null:s.q5===L.V5?this.body=s.z5:this.body=WO(OO,(function(){return s.arrayBuffer()}),(function(){s.bodyUsed=!0})))}return t.prototype.text=function(){var t=this,e=uM(t);return e||(t.q5===L.G5?function(t){var e=new FileReader,i=cM(e);return e.readAsText(t),i}(t.z5):t.q5===L.aE?Promise.resolve(t.z5).then(lM):t.q5===L.V5?function(t){return _M(t).then(lM)}(t.z5):t.q5===L.BH?t.z5.then((function(t){return t.text()})):t.q5===L.Q5?Promise.reject(new v("could not read FormData body as text")):Promise.resolve(t.z5))},t.prototype.json=function(){return this.text().then(JSON.parse)},t}();ga.blob&&(pM.prototype.blob=function(){var t=this,e=uM(t);return e||(t.q5===L.G5?Promise.resolve(t.z5):t.q5===L.aE?Promise.resolve(BO([t.z5],{type:t.K5})):t.q5===L.V5?function(t,e){return fM(t).then((function(t){return BO(t,{type:e||""})}))}(t.z5,t.K5):t.q5===L.BH?t.z5.then((function(t){return t.blob()})):t.q5===L.Q5?Promise.reject(new v("could not read FormData body as Blob")):Promise.resolve(BO([t.z5],{type:t.K5})))}),ga.arrayBuffer&&(pM.prototype.arrayBuffer=function(){var t=this;return t.q5===L.aE?uM(t)||Promise.resolve(t.z5):t.q5===L.G5?uM(t)||function(t){var e=new FileReader,i=cM(e);return e.readAsArrayBuffer(t),i}(t.z5):t.q5===L.V5?_M(t.z5):t.q5===L.BH?uM(t)||t.z5.then((function(t){return t.arrayBuffer()})):t.q5===L.Q5?Promise.reject(new v("could not read FormData body as ArrayBuffer")):Promise.resolve(t.z5).then(dM)}),ga.formData&&(pM.prototype.formData=function(){var t=this;return t.q5===L.Q5?uM(t)||Promise.resolve(t.z5):t.text().then(mM)});var yM=[301,302,303,307,308],AM=function(t){function e(e,i){var s=this,n=new XO((i=i||{}).headers);return(s=t.call(this,e||null,n)||this).type="default",s.status=void 0===i.status?200:i.status,s.ok=s.status>=200&&s.status<300,s.statusText=void 0!==i.statusText?String(i.statusText):"",s.headers=n,s.url=i.url||"",s}return NO(e,t),e.prototype.clone=function(){return new e(wM(this),{status:this.status,statusText:this.statusText,headers:new XO(this.headers),url:this.url})},e.error=function(){var t=new e(null,{status:0,statusText:""});return t.type="error",t},e.redirect=function(t,i){if(-1===yM.indexOf(i))throw new RangeError("Invalid status code");return new e(null,{status:i,headers:{location:t}})},e}(pM);var bM=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){function i(t,e){if(!(t instanceof e))throw new p("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),g.defineProperty(t,s.key,s)}}function n(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}function r(t){return(r=g.setPrototypeOf?g.getPrototypeOf:function(t){return t.__proto__||g.getPrototypeOf(t)})(t)}function o(t,e){return(o=g.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e,i){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var s=function(t,e){for(;!g.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}(t,e);if(s){var n=g.getOwnPropertyDescriptor(s,e);return n.get?n.get.call(i):n.value}},c(t,e,i||t)}g.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(){i(this,t),g.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(t,[{key:"addEventListener",value:function(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"removeEventListener",value:function(t,e){if(t in this.listeners)for(var i=this.listeners[t],s=0,n=i.length;s<n;s++)if(i[s]===e)return void i.splice(s,1)}},{key:"dispatchEvent",value:function(t){var e=this;if(t.type in this.listeners){for(var i=function(i){u((function(){return i.call(e,t)}))},s=this.listeners[t.type],n=0,r=s.length;n<r;n++)i(s[n]);return!t.defaultPrevented}}}]),t}(),d=function(t){function e(){var t;return i(this,e),t=function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?a(t):e}(this,r(e).call(this)),t.listeners||l.call(a(t)),g.defineProperty(a(t),"aborted",{value:!1,writable:!0,configurable:!0}),g.defineProperty(a(t),"onabort",{value:null,writable:!0,configurable:!0}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new p("Super expression must either be null or a function");t.prototype=g.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,t),n(e,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(t){"abort"===t.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,t)),c(r(e.prototype),"dispatchEvent",this).call(this,t)}}]),e}(l),f=function(){function t(){i(this,t),g.defineProperty(this,"signal",{value:new d,writable:!0,configurable:!0})}return n(t,[{key:"abort",value:function(){var t;try{t=new Event("abort")}catch(e){void 0!==h?h.createEvent?(t=h.createEvent("Event")).initEvent("abort",!1,!1):(t=h.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(f.prototype[Symbol.toStringTag]="AbortController",d.prototype[Symbol.toStringTag]="AbortSignal"),e.AbortSignal=d,e.AbortController=f,e.default=f}));!function(t){t&&t.__esModule&&g.prototype.hasOwnProperty.call(t,"default")&&t.default}(bM);bM.AbortSignal;var TM=bM.AbortController,du=To.DOMException;try{new du}catch(i){(du=function(t,e){v.call(this,t),this.name=e||"Error",v.captureStackTrace&&v.captureStackTrace(this,this.constructor)}).prototype=g.create(v.prototype),du.prototype.constructor=du}var SM=TM;function EM(t,e){if(!t.signal.aborted)if(e.aborted)t.abort();else{var i=function(){e.removeEventListener("abort",i),t.signal.removeEventListener("abort",i),t.abort()};e.addEventListener("abort",i),t.signal.addEventListener("abort",i)}}function kM(t,e,i){return new Promise((function(s,n){if(e.signal.aborted)return t.catch(GO),n(PM());var r=function(){e.signal.removeEventListener("abort",r),n(PM())};e.signal.addEventListener("abort",r),t.then((function(t){e.signal.removeEventListener("abort",r),s(t),i&&e.abort()}),(function(t){e.signal.removeEventListener("abort",r),n(t),i&&e.abort()}))}))}function PM(){return new du("Aborted","AbortError")}var IM,RM="moz-chunked-arraybuffer";function CM(t){try{var e=new Vu;return e.open("GET","https://test"),e.responseType=t,e.responseType===t}catch(t){}return!1}!function(t){t[t.UNSENT=0]="UNSENT",t[t.OPENED=1]="OPENED",t[t.HEADERS_RECEIVED=2]="HEADERS_RECEIVED",t[t.LOADING=3]="LOADING",t[t.DONE=4]="DONE"}(IM||(IM={}));var xM=function(){function t(t,e){var i=this;this.j5=!1,this.QS=t,this.Y5=e,this.Z5=new Vu,this.J5=new Promise((function(t,e){i.t8=t,i.e8=e}))}return t.prototype.send=function(){var t=this;return this.i8().then((function(e){return t.s8(e,t.Y5),t.J5}))},t.prototype.i8=function(){var t=this.QS;return t.q5===L.V5?t.arrayBuffer():Promise.resolve(t.X5)},t.prototype.n8=function(t){this.QS.onprogress&&this.QS.onprogress(t.loaded,t.lengthComputable?t.total:void 0)},t.prototype.r8=function(t){this.e8(t)},t.prototype.Az=function(){this.r8(new p("Network request failed"))},t.prototype.o8=function(){this.r8(new p("Network request failed"))},t.prototype.h8=function(){this.r8(PM())},t.prototype.s8=function(t,e){var i=this,s=this.QS,n=this.Z5,r=function(){return i.a8()};if(s.signal.aborted)return this.h8();n.onreadystatechange=function(){if(n.readyState>=IM.HEADERS_RECEIVED&&!i.j5){var t=function(t){var e=new XO;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var i=t.split(":"),s=i.shift().trim();if(s){var n=i.join(":").trim();e.append(s,n)}})),e}(n.getAllResponseHeaders()||""),e={status:n.status,statusText:n.statusText,headers:t,url:n.responseURL||t.get("X-Request-URL")};i.j5=!0,i.u8(e)}},n.onprogress=function(t){return i.n8(t)},n.onload=function(){return i.c8()},n.onerror=function(){return i.Az()},n.ontimeout=function(){return i.o8()},n.onabort=function(){return i.h8()},n.open(s.method,s.url,!0),n.withCredentials="include"===s.credentials,"responseType"in n&&e&&(n.responseType=e),s.headers.forEach((function(t,e){n.setRequestHeader(e,t)})),s.signal.addEventListener("abort",r),n.onloadend=function(){s.signal.removeEventListener("abort",r)},t?n.send(t):n.send()},t.prototype.a8=function(){this.h8(),this.Z5.abort()},t}(),DM=function(t){function e(e,i){var s=t.call(this,e,i)||this;return s.l8=void 0,s.d8=void 0,s}return NO(e,t),e.prototype.u8=function(t){var e=this;this.l8=new Promise((function(t,i){e.d8=t,e.f8=i})),this.t8(new AM(this.l8,t))},e.prototype.c8=function(){var t=this.Z5.response;if(null==t){var e=this.Y5;""===e||"text"===e?t=this.Z5.responseText:"document"===e?t=this.Z5.responseXML:"arraybuffer"===e?t=new ArrayBuffer(0):"blob"===e&&(t=BO([]))}this.d8(t)},e.prototype.r8=function(e){t.prototype.r8.call(this,e),this.f8&&this.f8(e)},e}(xM),NM=function(t){function e(e){var i=t.call(this,e,RM)||this;return i._8=void 0,i.v8=void 0,i.g8=!1,i}return NO(e,t),e.prototype.u8=function(t){var e=this;this._8=new OO({start:function(t){e.v8=t},cancel:function(){e.g8=!0,e.a8()}}),this.t8(new AM(this._8,t))},e.prototype.n8=function(e){this.g8||this.v8.enqueue(new S(this.Z5.response)),t.prototype.n8.call(this,e)},e.prototype.c8=function(){this.v8.close()},e.prototype.r8=function(e){t.prototype.r8.call(this,e),this.v8&&!this.g8&&(this.g8=!0,this.v8.error(e))},e}(xM),BM=function(){var t=ga.firefox&&CM(RM);return BM=function(){return t},t},OM=function(){var t;return t=ga.arrayBuffer&&CM("arraybuffer")?"arraybuffer":ga.blob&&CM("blob")?"blob":"",OM=function(){return t},t};function MM(t){return(ga.stream&&BM()?new NM(t):new DM(t,OM())).send()}var LM=To.fetch,FM=To.Request,UM=(To.Response,To.AbortController);var HM=["http:","https:"];var WM=function(){try{if(ga.streamRequest){var t=new FM("about:blank",{body:"",method:"POST"}).body;if(t&&LO(t.constructor))return t.constructor}}catch(t){}}();function qM(t){return(t instanceof XO?t:new XO(t)).asList()}function VM(t,e,i){var s;if(ga.stream){var n=void 0;if(ga.streamResponse){var r=t.body;n=r&&UO(OO,r)}else n=WO(OO,(function(){return kM(t.arrayBuffer(),e,!0)}),(function(){e.abort()}));n&&i&&(n=function(t,e,i){var s=0,n=function(t){var n=t.done,r=t.value;n?i=void 0===i?s:i:s+=r.byteLength,e(s,i)};return function(t,e,i){return new t(new FO(e.getReader(),i),{highWaterMark:0})}(OO,t,n)}(n,i,zM(t.headers))),s=n}else{var o=kM(t.arrayBuffer(),e,!0);i&&(o=function(t,e,i){return Promise.resolve().then((function(){return e(0,i),t})).then((function(t){var s=t.byteLength;return e(s,i=void 0===i?s:i),t}))}(o,i,zM(t.headers))),s=o}return new AM(s,t)}function zM(t){return t.has("content-length")?Number(t.get("content-length")):void 0}function XM(t){var e=new SM;return t.signal&&EM(e,t.signal),function(t,e){var i,s,n=t;if(i=n.q5===L.V5?ga.streamRequest&&WM?Promise.resolve(UO(WM,n.z5)):kM(t.arrayBuffer(),e,!1):kM(Promise.resolve(t.X5),e,!1),ga.abort){var r=new UM;EM(r,e.signal),s=r.signal}return i.then((function(e){return new FM(t.url,{body:e||void 0,credentials:t.credentials,headers:qM(t.headers),method:t.method,mode:t.mode,referrer:t.referrer,referrerPolicy:t.referrerPolicy,signal:s})}))}(t,e).then((function(i){return LM(i).then((function(i){return VM(i,e,t.onprogress)}))}))}var GM=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];var QM=function(t){function e(i,s){var n,r,o,h,a,u,c,l,d,f=this,_=(s=s||{}).body||null;if(i instanceof e){if(i.bodyUsed)throw new p("Already used");n=i.url,r=i.credentials,s.headers||(o=new XO(i.headers)),h=i.method,a=i.mode,u=i.referrer,c=i.referrerPolicy,l=i.signal,d=i.onprogress,_||null==i.X5||(_=i.X5,i.bodyUsed=!0)}else n=String(i),r="same-origin",h="GET",a="cors",u="about:client",c="",l=null,d=null;if(!s.headers&&o||(o=new XO(s.headers)),s&&(u="about:client",c=""),(f=t.call(this,_,o)||this).url=n,f.headers=o,f.credentials=s.credentials||r,f.method=function(t){var e=t.toUpperCase();return GM.indexOf(e)>-1?e:t}(s.method||h),f.mode=s.mode||a,f.signal=s.signal||l||(new SM).signal,f.referrer=void 0!==s.referrer?s.referrer:u,f.referrerPolicy=void 0!==s.referrerPolicy?s.referrerPolicy:c,f.onprogress=s.onprogress||d,("GET"===f.method||"HEAD"===f.method)&&_)throw new p("Body not allowed for GET or HEAD requests");return f}return NO(e,t),e.prototype.clone=function(){return new e(this,{body:wM(this)})},e}(pM),KM="function"==typeof LM&&ga.stream&&ga.streamResponse&&ga.url;function jM(t,e){return new Promise((function(i){var s=new QM(t,e),n=KM&&function(t){try{return HM.indexOf(new To.URL(t,To.location.href).protocol)>=0}catch(t){return!1}}(s.url)?XM:MM;i(n(s))}))}jM.polyfill=!0;var YM=class{async m8(){const t=this.QS;let e,i;t.JS&&u((()=>{this.w8=!0,this.Ox.vl()}),t.JS);try{e=jM(t.YS,{method:t.xE,headers:t.CE.lE(),body:t.RE,credentials:t.ME?"include":"same-origin",signal:$M(this.Ox.fl),mode:t.h_,onprogress:t.LE})}catch(e){throw new xO(t,e)}try{i=await e}catch(t){const e=this.p8(t);throw Lr(e)&&this.Ox.vl(),e}const s=i.url||t.YS,n=0===i.status&&"file:"===function(t){return f.Oh(t).protocol}(s)?200:i.status,r=new ZM(this,i,this.Ox),o=new Es({Xm:r,GS:t,DE:t.DE,CE:new ou(i.headers.asList()),ZS:n,oN:i.statusText,zE:s});if(this.jS=o,Fe(o))return o;throw new st(o)}p8(t){return We(t)?t:Lr(t)?this.w8?new Xo(this.QS):new Sr(t.message,t):this.jS?new st(this.jS,t):new xO(this.QS,t)}constructor(t){this.Ox=new Zs,this.jS=void 0,this.w8=!1,this.QS=t,this.Ox.wl(t.fl),this.KS=this.m8()}},ZM=class t extends hn{get LH(){return this.y8.bodyUsed}UH(){return this.HH.fI}VE(t){return this.WH(this.y8.text(),t)}bN(t){return this.WH(this.y8.arrayBuffer(),t)}OH(){const t=this.y8.body;return t?this.qH(t):zk(this.bN().then(ae),this.Ox)}XH(){const e=this.y8.clone(),[i,s]=this.Ox.yl();return this.Ox=i,new t(this.A8,e,s)}WH(t,e){e&&this.Ox.wl(e);let i=Promise.resolve(t).catch((t=>{throw this.A8.p8(t)}));return i=oa(i,this.Ox),this.HH.wl(i.then($d)),i}qH(t){const e=new Da;let i=Promise.resolve(t.pipeTo(e.writable,{preventAbort:!0})).catch((t=>{const i=this.A8.p8(t);throw e.writable.abort(i).catch($d),i}));return i=oa(i,this.Ox),this.HH.wl(i.then($d)),e.readable}constructor(t,e,i){super(),this.HH=new Os,this.A8=t,this.y8=e,this.Ox=i,this.HH.fI.catch($d)}},JM="abort";function $M(t){const e=new SM;if(t.$c)e.abort();else if(!t.il){const i=()=>{s(),e.abort()},s=()=>{e.signal.removeEventListener(JM,i),t.cl(i),t.dl(s)};e.signal.addEventListener(JM,i),t.ul(i),t.ll(s)}return e.signal}var tL=class{GS(t){return new YM(t).KS}IU(t){if(Np&&Np.sendBeacon)Np.sendBeacon(t.YS,RO([t.RE],{type:t.YB}));else{const e=t.YB?{"Content-type":t.YB}:void 0;Ui(this.GS(new Yt({xE:Fr.POST,YS:t.YS,RE:t.RE,CE:e,h_:lp.Hv})))}}bn(){}},eL=class extends Xs{constructor(t){super("Invalid XML",t)}},iL=class{NS(t){const e=new DOMParser;let i;try{i=e.parseFromString(t,"text/xml")}catch(t){throw new eL(t)}if(!i||i.getElementsByTagName("parsererror").length>0)throw new eL;return new uL(i)}},sL=class t{get mS(){return pw.pS}get DS(){var t;return null!=(t=this.b8.localName)?t:dL(this.b8.nodeName)}get l(){return this.b8.nodeName}get T8(){var t;return null!=(t=this.b8.namespaceURI)?t:void 0}get S8(){var t;return null!=(t=this.b8.prefix)?t:void 0}get Qy(){return this.b8.nodeValue}gS(t){return this.b8.isEqualNode(t.b8)}TS(e){return new t(this.b8.cloneNode(e))}constructor(t){this.b8=t}},nL=class{get FS(){return void 0===this.E8&&(this.E8=function(t){const e=[];for(let i=0;i<t.length;i++){const s=lL(t.item(i));s&&e.push(s)}return e}(this.k8.childNodes)),this.E8}get m(){return this.FS.filter(cL)}CS(t){return this.FS.filter((e=>cL(e)&&e.TN===t))}RS(t,e){return this.FS.filter((i=>cL(i)&&i.DS===e&&i.T8===t))}get cS(){return this.k8}US(t){this.k8.appendChild(t.cS),this.E8&&this.E8.push(t)}gS(t){return this.k8.isEqualNode(t.cS)}constructor(t){this.E8=void 0,this.k8=t}},rL=class t extends nL{get mS(){return pw.wS}get DS(){var t;return null!=(t=this.k8.localName)?t:dL(this.k8.nodeName)}get T8(){var t;return null!=(t=this.k8.namespaceURI)?t:void 0}get S8(){var t;return null!=(t=this.k8.prefix)?t:void 0}get TN(){return this.k8.nodeName}get xS(){return function(t){const e=[];for(let i=0;i<t.length;i++)e.push(new sL(t.item(i)));return e}(this.k8.attributes)}get gN(){return this.k8.textContent}LS(t){if(this.k8.hasAttribute(t))return this.k8.getAttribute(t)}MS(t,e){if(this.k8.hasAttributeNS(t,e))return this.k8.getAttributeNS(t,e)}kS(t){this.k8.removeAttribute(t)}P8(t,e){this.k8.removeAttributeNS(t,e)}I8(t,e){this.k8.setAttribute(t,e)}C8(t,e,i){this.k8.setAttributeNS(t,e,i)}TS(e){return new t(this.k8.cloneNode(e))}constructor(t){super(t)}},oL=class{get Xm(){return this.k8.nodeValue}get cS(){return this.k8}gS(t){return this.Xm===t.Xm}constructor(t){this.k8=t}},hL=class t extends oL{get mS(){return pw.gA}TS(e){return new t(this.k8.cloneNode(e))}constructor(t){super(t)}},aL=class t extends oL{get mS(){return pw.yS}TS(e){return new t(this.k8.cloneNode(e))}constructor(t){super(t)}},uL=class t extends nL{get mS(){return pw.AS}get OS(){return new rL(this.k8.documentElement)}TS(e){return new t(this.k8.cloneNode(e))}constructor(t){super(t)}};function cL(t){return ks(t)}function lL(t){switch(t.nodeType){case pw.wS:return new rL(t);case pw.gA:return new hL(t);case pw.yS:return new aL(t)}}function dL(t){const e=t.indexOf(":");return e<0?t:t.substr(e+1)}!function(t){f=t}(new class extends PO{get B5(){return this.x8||(this.x8=new sb(Gb())),this.x8}get D8(){return this.N8}get tj(){return this.B8}get yj(){return this.O8}get M8(){return!1}get tB(){return je.hF()}get L8(){return{F8:CO}}get U8(){return Uu.connection&&Uu.connection.effectiveType||uS}get H8(){return Uu.connection&&Uu.connection.type||"unknown"}get PD(){return this.W8||(this.W8=new aP(new tL)),this.W8}NS(t){return this.q8.NS(t)}constructor(...t){super(...t),this.x8=void 0,this.N8=function(){if(Bp.Ok)return!1;try{return"body"in self.Response.prototype}catch(t){return!1}}(),this.B8=Bp.RP||Bp.Ok,this.O8=(Bp.RP||Bp.eP&&Bp.Xk<=68||Bp.Ok)&&!(Bp.Zk&&Bp.$k<3),this.W8=void 0,this.q8=new iL}});var fL=class{get zl(){const t=this.Ko.currentTime;return"number"==typeof t&&isFinite(t)?t:"now"}get V8(){return this.Ko.src||""}ir(){}constructor(t,e){this.z8=!1,this.X8=t=>{this.G8.wU(t.error,this.zl)},this.Q8=()=>{this.G8._U(this.V8),this.Ko.removeEventListener("playing",this.Q8),this.z8=!1},this.Ps=()=>{this.z8||(this.Ko.addEventListener("playing",this.Q8),this.z8=!0)},this.G8=e,this.Ko=t,this.Ko.addEventListener("error",this.X8),this.Ko.addEventListener("sourcechange",this.Ps),this.Ps()}};!function(t){XD.push(t)}((function(t){new fL(t.ma,t.V4)}));var _L="theoplayer-stored-volume",vL="theoplayer-stored-mutedstate";qD((function(t){return class extends t{fd(t){this.Vp.persistVolume&&Mi.sB(vL,""+Boolean(t)),super.fd(t)}qd(t){this.Vp.persistVolume&&Mi.sB(_L,""+Number(t)),super.qd(t)}constructor(t,e){if(super(t,e),e.persistVolume){let t=Mi.Yq(_L);(void 0===t||j(t))&&(t=1);const e=Mi.Zq(vL)||!1;this.Hd=t,this.ld=e}}}}),Dn.t6);var gL="7.3.0",mL="2024.2.3",wL=jD.ma,pL=Fu.Pg.registerContentProtectionIntegration.bind(Fu.Pg),yL={OU(t){qh.addEventListener("beforeunload",t)},xU(t){qh.removeEventListener("beforeunload",t)}};!function(t){Rp=t.K8,Cp=t.j8,xp=t.Y8,qh=t.Z8,Dp=qh&&qh.location,Np=qh&&qh.navigator}({K8:class{get QM(){const t=[];for(const e of this.J8){const i=this.t9.get(e);if(i){const e=i.map((t=>t.e9));t.push(...e)}}return this.i9&&t.push(this.i9),t}jM(t){for(const e of this.QM)e.v0(t)}xO(t){const e=Rt(this.t9.get(t),(t=>t.s9));if(e)return e.s9=!1,e.e9}n9(t){if(!this.i9){var e;const t=null==(e=this.t9.get(Fs.Rm))?void 0:e[0].e9.VB;if(!t)throw new v("Error creating iOS Safari MediaController");this.i9=new TD(t,this.ix)}return this.i9}async dO(t){const e=t.VB,i=e.tagName.toLowerCase();await t.ir(),kD(e);const s=Rt(this.t9.get(i)||[],(e=>t===e.e9));s&&(s.s9=!0)}VM(){for(const t of this.QM)t._0()}bn(){for(const t of this.QM){const e=t.VB;t.hl(),kD(e),z(e)}this.t9.clear(),this.i9=void 0}r9(){for(const t of this.J8){const e=[];this.t9.set(t,e);for(let i=0;i<this.o9;i++){const i=ED(t),s=t===Fs.Cm?new ix(i,this.ix,this.BJ):new gD(i,this.ix,this.BJ,this.GM);e.push({e9:s,s9:!0})}}}constructor(t,e,i=2,s=SD,n=Gb()){this.o9=i,this.J8=[...s],this.ix=n,this.BJ=t,this.GM=e,this.t9=rs(),this.r9()}},j8:class t{V6(t){return this.h9.Bx((()=>this.a9(t)))}Yd(){this.zM.VM()}async a9(e){const i=this.zM.xO(Fs.Rm),s=i.VB,n=await t.u9(s,e);return await this.zM.dO(i),n}static async u9(e,i){return Bp.eP||Bp.Zk?"all":(e.src||(e.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.c9(),!i&&await t.l9(e,!1)?"all":await t.l9(e,!0)?"muted":"none")}static async l9(t,e){t.muted=e;const i=t.play();try{if(!le(i))return!Bp.Ks;const t=ye(250);return await Promise.race([i,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static c9(){return new Promise((t=>{if("function"==typeof MessageChannel){const e=new MessageChannel;e.port1.onmessage=()=>t(),e.port2.postMessage("")}else u(t,0)}))}bn(){this.h9.bn()}constructor(t){this.zM=t,this.h9=new xo}},Y8:yL,Z8:s});var AL=class t{async DO(e){if(!function(t){if(!t)return!1;const e=t.toLowerCase();return bt(e,Gi.Vv)}(e.type))return!1;const i=e.contentProtection;if(i&&!$v(i)){if(!lo(i))return!1;if(!await t.d9(i))return!1}return!0}static async d9(t){return!(!t.playready||!await f.YC())||(!(!t.widevine||!await f.QC())||(!(!t.clearkey||!await f.jC())||!!await f.sx()))}},bL=class extends AL{async DO(t){return!!Ma(t.useManagedMediaSource)&&super.DO(t)}};function TL(t){return eh(t)}function SL(t,e){const i=eh(t);return e?""+i+e:""+i}var EL,cu=class{async f9(t){return(await this.v9._9(t.map(TL))).shift()}g9(t,e){const i=SL(t,e);return this.m9.oI(i)}async w9(t,e){var i;const s=SL(t,e);return null==(i=await this.p9.hI(s))?void 0:i.data}iV(t){return this.y9.hI(t)}constructor(t,e,i,s){this.v9=t,this.m9=e,this.p9=i,this.y9=s}},Qr=class{A9(t){return Promise.resolve(!1)}b9(t){return Promise.reject(kL)}T9(t){return Promise.reject(kL)}oI(t){return Promise.resolve(!1)}hI(t){return Promise.resolve(void 0)}S9(t,e){return Promise.resolve(void 0)}_9(t){return Promise.resolve([])}E9(){return Promise.resolve([])}k9(t){return Promise.resolve([])}P9(t,e){return Promise.resolve([])}WA(t){return Promise.reject(kL)}I9(t){return Promise.reject(kL)}R9(){return Promise.reject(kL)}},kL="Storage disabled",PL="Storage disabled",$n=class{get C9(){return this._l.fI}async A9(t){return(this.x9||await this.C9).A9(t)}async b9(t,e){return(this.x9||await this.C9).b9(t,e)}async T9(t,e){return(this.x9||await this.C9).T9(t,e)}async oI(t){return(this.x9||await this.C9).oI(t)}async hI(t){return(this.x9||await this.C9).hI(t)}async S9(t,e){return(this.x9||await this.C9).S9(t,e)}async _9(t){return(this.x9||await this.C9)._9(t)}async E9(){return(this.x9||await this.C9).E9()}async k9(t){return(this.x9||await this.C9).k9(t)}async P9(t,e){return(this.x9||await this.C9).P9(t,e)}async WA(t){return(this.x9||await this.C9).WA(t)}async I9(t){return(this.x9||await this.C9).I9(t)}async R9(){return(this.x9||await this.C9).R9()}constructor(t){this._l=new Os,this.x9=void 0,this._l.wl(t),this._l.fI.then((t=>{this.x9=t}))}},IL=class{get D9(){return this._l.fI}async N9(t){const e=this.B9||await this.D9;return await e.N9(t)}constructor(t){this._l=new Os,this.B9=void 0,this._l.wl(t);const e=this._l.fI;e.then((t=>{this.B9=t})),this.O9=new $n(e.then((t=>t.O9))),this.M9=new $n(e.then((t=>t.M9))),this.L9=new $n(e.then((t=>t.L9))),this.F9=new $n(e.then((t=>t.F9))),this.U9=new $n(e.then((t=>t.U9)))}};function RL(t){return new v("This storage cannot handle persistency type "+t)}!function(t){t.H9="readonly",t.W9="readwrite"}(EL||(EL={}));var Xr=class{A9(t){return Promise.resolve("temporary"===t)}b9(t,e){return void 0===e&&(e="temporary"),"temporary"!==e?Promise.reject(RL(e)):(this.q9(t.key),this.GI.push(t),Promise.resolve())}T9(t,e){if(void 0===e&&(e="temporary"),"temporary"!==e)return Promise.reject(RL(e));for(const e of t)this.q9(e.key);for(const e of t)this.GI.push(e);return Promise.resolve()}oI(t){return Promise.resolve(Boolean(this.V9(t)))}hI(t){return Promise.resolve(this.V9(t))}S9(t,e){return Promise.resolve(this.z9(t,e))}_9(t){const e=t?t.map((t=>this.V9(t))):this.GI;return Promise.resolve(e.filter(it))}E9(){return Promise.resolve([...this.GI])}k9(t){return this.P9(t,"key")}P9(t,e){const i=this.GI.filter((i=>i[e]===t));return Promise.resolve(i)}WA(t){return this.q9(t),Promise.resolve()}I9(t){for(const e of t)this.q9(e);return Promise.resolve()}R9(){return wr(this.GI),Promise.resolve()}V9(t){return this.z9(t,"key")}z9(t,e){for(const i of this.GI)if(i[e]===t)return i}q9(t){const e=this.V9(t);e&&so(this.GI,e)}constructor(){this.GI=[]}},CL=class t{static P3(){return Promise.resolve(new t)}N9(t){return t(this)}constructor(){this.M9=new Xr,this.O9=new Xr,this.L9=new Xr,this.F9=new Xr,this.U9=new Xr}},Er=class{async A9(t){for(let e of this.X9)if(await e.A9(t))return!0;return!1}async b9(t,e){void 0===e&&(e="persistent");for(let i of this.X9)if(await i.A9(e))return i.b9(t);throw RL(e)}async T9(t,e){void 0===e&&(e="persistent");for(let i of this.X9)if(await i.A9(e))return i.T9(t);throw RL(e)}async oI(t){for(let e of this.X9)if(await e.oI(t))return!0;return!1}async hI(t){for(let e of this.X9){const i=await e.hI(t);if(i)return i}}async S9(t,e){for(let i of this.X9){const s=await i.S9(t,e);if(s)return s}}async _9(t){const e=[];for(let i of this.X9)e.push(...await i._9(t));return e}async E9(){const t=[];for(let e of this.X9)t.push(...await e.E9());return t}async k9(t){const e=[];for(let i of this.X9)e.push(...await i.k9(t));return e}async P9(t,e){const i=[];for(let s of this.X9)i.push(...await s.P9(t,e));return i}async WA(t){for(let e of this.X9)await e.WA(t)}async I9(t){for(let e of this.X9)await e.I9(t)}async R9(){for(let t of this.X9)await t.R9()}constructor(t){this.X9=t}};function xL(t){return async()=>{const e=await Promise.all(t.map((t=>t())));return DL.P3(e)}}var DL=class t{static P3(e){return Promise.resolve(new t(e))}get F9(){return this.G9}get U9(){return this.Q9}get L9(){return this.K9}get M9(){return this.j9}get O9(){return this.Y9}N9(e){if(0===this.Z9.length)return e(this);const i=[];let s=0;const n=r=>(i.push(r),s++,s<this.Z9.length?this.Z9[s].N9(n):e(new t(i)));return this.Z9[s].N9(n)}constructor(t){this.Z9=t,this.G9=new Er(t.map((t=>t.F9))),this.Q9=new Er(t.map((t=>t.U9))),this.K9=new Er(t.map((t=>t.L9))),this.j9=new Er(t.map((t=>t.M9))),this.Y9=new Er(t.map((t=>t.O9)))}},qr=class t{static Sa(e){t.bB.Sa(e)}static get zP(){return t.J9||(t.J9=t.bB.P3()),t.J9}};function NL(t){return void 0!==t.Od}function BL(t){const e=Bp.eP||Bp.Zk,i=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some((t=>"ac-3"===t||"ec-3"===t)),s=e&&!i,n=new cR(!0);return async t=>{const e=t.YB;if(!n.Pj(e)&&!function(t,e){return!!t&&(q(t)?tp(e)||ip(e):Ei(t,bu.APPLICATION_TTML_XML)||Ei(t,bu.TEXT_VTT)||Ei(t,bu.IMAGE_JPEG))}(t.uU,t.t7))return!1;const i=t.t7.some((t=>"ac-3"===t||"ec-3"===t));if(s&&i)return!1;if(t.e7){const i=t.e7,s=ls(i,(t=>Hp(t.i7))).filter(it),n=await async function(t,e){for(const i of t)if(await e(i))return!0;return!1}(s,(t=>f.$C(t,e)));if(!n)return!1}return!0}}qr.bB=new class{P3(){return new IL(this.s7())}async s7(){this.n7&&(await Promise.resolve(),this.n7=!1);for(const t of this.r7)try{return await xL([CL.P3,t])()}catch(t){}return await xL([CL.P3,this.o7])()}Sa(t){if(!this.n7)throw new v("Registration overdue");this.r7.push(t)}constructor(t){this.r7=[],this.n7=!0,this.o7=t}}(class t{static P3(){return Promise.resolve(new t)}N9(t){return Promise.reject(PL)}constructor(){this.M9=new Qr,this.O9=new Qr,this.L9=new Qr,this.F9=new Qr,this.U9=new Qr}}.P3),qr.J9=void 0;var Ho,OL=class{get Ci(){return this.h7.offsetHeight*f.Zs.FJ}get Ti(){return this.h7.offsetWidth*f.Zs.FJ}constructor(t){this.h7=t}},th=class{get nt(){return this.xu}UE(t,e,i,s,n,r,o,h){const a=new _h(t,e,i,s,n,r,o,void 0,h);return this.xu.tt(a),this.b$.tt(a),a}QE(t){this.xu.it(t),this.b$.it(t),t.bn()}ir(){for(const t of this.xu.Ff.slice())t.bn();this.xu.ir(),this.b$.ir()}bn(){this.ir(),this.xu.bn(),this.b$.bn()}constructor(t,e){this.xu=new ih,this.b$=new PC(t,e)}},Ph=class{xO(t){return this.bB.xO(t)}n9(t){return this.bB.n9(t)}dO(t){return this.bB.dO(t)}constructor(t){this.bB=t}},Zr=class extends d{get a7(){return this.FB}get Fl(){return this.Ul()}Ul(){return this.FB.Fl}get Hl(){return this.Wl()}Wl(){return this.FB.Hl}get zl(){return this.Xl()}Xl(){return this.FB.zl}get NJ(){return this.FB.NJ}get ct(){return this.Ql()}Ql(){return this.FB.ct}get GB(){return this.u7()}u7(){return this.FB.GB}get jl(){return this.c7()}c7(){return this.FB.jl}get lt(){return this.FB.lt}get Ci(){return this.FB.Ci}get Ti(){return this.FB.Ti}get ka(){return this.Gd()}Gd(){return this.FB.ka}get ld(){return this.FB.ld}set ld(t){this.FB.ld=t}get md(){return this.l7()}l7(){return this.FB.md}get pd(){return this.FB.pd}set pd(t){this.FB.pd=t}get bd(){return this.Td()}Td(){return this.FB.bd}get Pd(){return this.Id()}Id(){return this.FB.Pd}get Rd(){return this.Cd()}Cd(){return this.FB.Rd}get xd(){return this.Dd()}Dd(){return this.FB.xd}get jj(){return this.d7()}d7(){return this.FB.jj}get oY(){return this.f7()}f7(){return this.FB.oY}get nt(){return this.Bd()}Bd(){return this._7}get Cu(){return this.M0()}M0(){return this.FB.Cu}get XJ(){return this.FB.XJ}get Hd(){return this.FB.Hd}set Hd(t){this.FB.Hd=t}get d0(){return this.FB.d0}get rd(){return this.FB.rd}get yJ(){return this.FB.yJ}get lO(){return this.v7()}set lO(t){this.g7(t)}v7(){return this.FB.lO}g7(t){this.FB.lO=t}get g0(){return this.FB.g0}set g0(t){this.m7(t)}m7(t){this.FB.g0=t}get cJ(){return this.w7()}w7(){return this.FB.cJ}ud(){return this.FB.ud()}Jd(){return this.FB.Jd()}Zd(){this.FB.Zd()}Fm(t,e,i){this.FB.Fm(t,e,i)}UB(t){this.FB.UB(t)}be(){this.FB.be()}we(){this.FB.we()}UE(t,e,i,s,n,r,o,h){return this.FB.UE(t,e,i,s,n,r,o,h)}sO(){return this.FB.sO()}rO(t,e,i,s,n){return this.FB.rO(t,e,i,s,n)}QE(t){this.FB.QE(t)}hO(){this.FB.hO()}iz(t){return this.FB.iz(t)}async Rn(t){const e=await this.FB.Rn(t);let i;return i=t.l_===$.nD?this.p7(e):this.y7(e),this.XB=i,i}async ir(){this.XB&&(await this.XB.hl(),this.XB=void 0),await this.FB.ir()}c0(){this.FB.c0()}l0(){this.FB.l0()}async hl(){this.Lo(),this.FB.pn(tI,this.A7),this._7.qf=void 0,this._7.bn(),this.XB&&(await this.XB.hl(),this.XB=void 0)}_0(){this.FB._0()}b7(t){this.FB.pn(tI,this.A7),this.FB=t,this._7.qf=t.nt,this.FB.kn(tI,this.A7)}rf(t){this.To(t)}constructor(t){super(),this.XB=void 0,this._7=new Mt,this.A7=t=>this.rf(t),this.FB=t,this._7.qf=t.nt,this.FB.kn(tI,this.A7)}},ML=class extends Zr{get VB(){return this.FB.VB}get iY(){return this.FB.iY}get Xd(){return this.FB.Xd}set Xd(t){this.FB.Xd=t}v0(t){this.FB.v0(t)}PJ(){this.FB.PJ()}sf(){this.FB.sf()}constructor(t){super(t)}},LL=class{get Vp(){return this.GC()}GC(){return this.XB.Vp}get Rd(){return this.Cd()}Cd(){return this.XB.Rd}get rt(){return this.XB.rt}MV(t){return this.XB.MV(t)}FV(t){return this.XB.FV(t)}hl(){return Promise.resolve()}constructor(t){this.XB=t}},Fh=class extends LL{get bj(){return this.Ij}get Tj(){return this.Rj}get Fl(){return this.Ul()}Ul(){return this.XB.Fl}get ct(){return this.Ql()}Ql(){return this.XB.ct}get $V(){return this.T7()}T7(){return this.XB.$V}xj(t){this.XB.xj(t)}Oj(t,e,i,s){this.XB.Oj(t,e,i,s)}PK(){this.XB.PK()}mK(){this.XB.mK()}hl(){return this.Ij&&(this.Ij.hl(),this.Ij=void 0),this.Rj&&(this.Rj.hl(),this.Rj=void 0),super.hl()}S7(t){this.XB=t,this.Ij?t.bj?this.Ij.E7(t.bj):(this.Ij.hl(),this.Ij=void 0):t.bj&&(this.Ij=this.k7(t.bj),this.Ij.kn(Pn,this.P7)),this.Rj?t.Tj?this.Rj.E7(t.Tj):(this.Rj.hl(),this.Rj=void 0):t.Tj&&(this.Rj=this.k7(t.Tj),this.Rj.kn(Pn,this.P7))}I7(t){}constructor(t){super(t),this.Ij=void 0,this.Rj=void 0,this.P7=t=>this.I7(t)}},FL=class extends d{get ZW(){return this.hq}set ZW(t){this.hq=t}get Fl(){return ri.BM()}get Vp(){return this.kx}get RK(){return Fs.wA}get xK(){return ri.BM()}get R7(){return!1}get QW(){return this.nq}set QW(t){this.nq=t}WQ(t,e,i){return Promise.reject(new v("Invalid media buffer"))}LK(){return Promise.reject(new v("Invalid media buffer"))}zQ(t,e,i){return Promise.reject(new v("Invalid media buffer"))}$V(){return!1}PK(){}BK(t,e){}MK(t,e){}WA(t,e,i){return Promise.resolve()}nK(t,e){return Promise.reject(new v("Invalid media buffer"))}jA(t,e){return Promise.reject(new v("Invalid media buffer"))}MV(t){return!1}FV(t){return Promise.reject(new v("Invalid media buffer"))}hl(){this.Lo()}constructor(t){super(),this.nq=0,this.hq=0,this.kx=t}},UL=class extends d{get ZW(){return this.C7()}set ZW(t){this.x7(t)}C7(){return this.D7.ZW}x7(t){this.D7.ZW=t}get Fl(){return this.Ul()}Ul(){return this.D7.Fl}get Vp(){return this.GC()}GC(){return this.D7.Vp}get RK(){return this.D7.RK}get xK(){return this.N7()}N7(){return this.D7.xK}get QW(){return this.B7()}set QW(t){this.O7(t)}B7(){return this.D7.QW}O7(t){this.D7.QW=t}WQ(t,e,i){return this.D7.WQ(t,e,i)}LK(){return this.D7.LK()}zQ(t,e,i){return this.D7.zQ(t,e,i)}$V(){return this.D7.$V()}PK(){this.D7.PK()}BK(t,e){this.D7.BK(t,e)}MK(t,e){this.D7.MK(t,e)}WA(t,e,i){return this.D7.WA(t,e,i)}nK(t,e){return this.D7.nK(t,e)}MV(t){return this.D7.MV(t)}FV(t){return this.D7.FV(t)}rf(t){this.To(t)}hl(){this.Lo(),this.E7(new FL(this.Vp))}E7(t){this.D7.pn(Pn,this.M7),this.D7=t,this.D7.kn(Pn,this.M7)}constructor(t){super(),this.M7=t=>this.rf(t),this.D7=t,this.D7.kn(Pn,this.M7)}},HL=class extends UL{get e9(){return this.FB}set e9(t){this.FB=t}async WQ(t,e,i){return gi(i),await this.L7(this.FB.zl,null==e?void 0:e.S3,null==e?void 0:e.ct),gi(i),t.l_===wt.cE?await this.F7(t,e,i):await this.U7(t,e,i)}async F7(t,e,i){let s=t;for(;;){const[t,n]=Xk(s.Xm);s={l_:wt.cE,Xm:t};try{return await this.H7(s,e,i),void n.cancel(new Sr).catch($d)}catch(t){if(yP(t)){if(await this.L7(this.FB.zl,e.S3,e.ct,i)){s={l_:wt.cE,Xm:n};continue}}throw n.cancel(t).catch($d),t}}}async U7(t,e,i){for(;;)try{return gi(i),await this.H7(t,e,i)}catch(t){if(yP(t)){if(await this.L7(this.FB.zl,e.S3,e.ct,i))continue}throw t}}async L7(t,e,i,s){const n=pP(t,e,i,this.Fl,this.QW,this.ZW);for(const[t,e]of n)await this.W7(t,e,s);return n.length>0}H7(t,e,i){return super.WQ(t,e,i)}W7(t,e,i){return super.WA(t,e,i)}constructor(t){super(t),this.FB=void 0}},WL=class extends Fh{get e9(){return this.FB}set e9(t){this.FB=t,this.Ij&&(this.Ij.e9=t),this.Rj&&(this.Rj.e9=t)}k7(t){const e=new HL(t);return e.e9=this.FB,e}constructor(t){super(t),this.FB=void 0,this.S7(t)}},W=class extends LL{get Sd(){return this.XB.Sd}set Sd(t){this.XB.Sd=t}},qL=class extends Zr{get VB(){return this.FB.VB}get iY(){return this.FB.iY}get Fd(){return this.FB.Fd}get Od(){return this.FB.Od}get Xd(){return this.FB.Xd}set Xd(t){this.FB.Xd=t}v0(t){this.FB.v0(t)}PJ(){this.FB.PJ()}sf(){this.FB.sf()}Qd(){return this.FB.Qd()}constructor(t){super(t)}},VL=class extends ML{get a7(){return this.FB}y7(t){const e=new WL(t);return e.e9=this,e}p7(t){return new W(t)}},zL=class extends qL{get a7(){return this.FB}y7(t){const e=new WL(t);return e.e9=this,e}p7(t){return new W(t)}},Eh=class extends Ph{xO(t){return t===Fs.Rm?new zL(super.xO(t)):t===Fs.Cm?new VL(super.xO(t)):void 0}async dO(t){const e=t;await e.hl(),await super.dO(e.a7)}},XL=class{q7(){this.Ko.nf()}bn(){s.removeEventListener("pageshow",this.V7)}constructor(t){this.V7=t=>{t.persisted&&this.q7()},this.Ko=t,s.addEventListener("pageshow",this.V7)}},GL=class{z7(t,e,i){return Promise.resolve()}X7(t,e,i,s){let n=[];if(s){const r={sS:e.ob,nS:e.hb,rS:i.G7.rS};s.l_===nt.TTML?n=Bw(t,s,r,i.uU):s.l_===nt.WEBVTT&&(n=Xm(t,r).L)}return n}ir(){}};!function(t){t.im="vttc",t.Q7="vsid",t.K7="iden",t.j7="ctim",t.Y7="sttg",t.Z7="payl",t.J7="vtte",t.ttt="vtta"}(Ho||(Ho={}));var QL=class t{static ett(e){return Boolean(t.itt[e])}static Ew(e){const i=[],s=P.aw(new Nh(e,new ds));for(const e of s)t.ett(e.l_)&&i.push(t.itt[e.l_](e.Xm));return i}static stt(e){const i=P.aw(e),s=ao(i,Ho.Q7),n=ao(i,Ho.K7),r=ao(i,Ho.j7),o=ao(i,Ho.Y7),h=ao(i,Ho.Z7);return{l_:Ho.im,ntt:s?t.ott(s):void 0,htt:n?t.att(n):void 0,utt:r?t.ctt(r):void 0,ltt:o?t.dtt(o):void 0,ftt:h?t._tt(h):void 0}}static ott(t){return{l_:Ho.Q7,gtt:t.Ym()}}static att(t){return{l_:Ho.K7,htt:t.iw()}}static ctt(t){return{l_:Ho.j7,mtt:t.iw()}}static dtt(t){return{l_:Ho.Y7,wtt:t.iw()}}static _tt(t){return{l_:Ho.Z7,ptt:t.iw()}}static ytt(t){return{l_:Ho.J7}}static Att(t){return{l_:Ho.ttt,btt:t.iw()}}};QL.itt={[Ho.im]:QL.stt,[Ho.J7]:QL.ytt,[Ho.ttt]:QL.Att};var KL=class{z7(t,e,i){const s=new DataView(t.Ttt),n=hs.Ew(s),r=Rt(n,(t=>t.l_===E_.Ig));return r&&(this.Stt=r.Z[0].Yw.mw.zw),Promise.resolve()}X7(t,e,i){if(j(this.Stt))return[];const s=wa(t),n=hs.Ew(s),r=Yo(n,E_.lm),o=Yo(n,E_.pm);if(!r||0===r.Z.length||!o)return[];const h=function(t,e,i){const s=t.Z[0],n=s.Fy?s.Fy.Fy.toNumber()/i:e.ob,r=[];for(const t of s.Ly)r.push(...t.zy);return{Ett:n,zy:r}}(r,e,this.Stt),a=i.G7.rS;return function(t,e,i,s){const n=QL.Ew(wa(e.Xm)),r=t.zy,o=t.Ett+s,h=[];let a=0;for(let t=0;t<r.length;t++){const e=r[t],s=n[t];var u;const c=(null!=(u=e.ct)?u:0)/i;let l;s.l_===Ho.im&&(l=jL(s,a,c,o)),l&&h.push(l),a+=c}return h}(h,o,this.Stt,a)}ir(){this.Stt=NaN}constructor(){this.Stt=NaN}};function jL(t,e,i,s){if(!t.ftt)return void 0;const n=t.utt?function(t){return ew(t.mtt,new ds(0))}(t.utt):e,r=s+n,o=r+i,h=t.ftt.ptt;return new pm(r,o,h,!1)}var Xh,_n,YL=class t extends cp{get ktt(){return this.Ptt}set ktt(t){this.Ptt=t}get Ot(){for(const t of this.Z.Ff)if(t.h_!==_s.Th)return!0;return!1}async Rn(t){await this.ir(),this.Itt=t,this.Rtt(t)}Rtt(t){for(const e of t.Ctt){const t=this.xtt(e);this.Dtt(t,e),t.Pd=Gh.LOADED,this.tt(t)}}it(t){this.Ntt(t),super.it(t)}rE(t){const e=this.Btt(t);if(e&&this.ktt!==e){this.ktt=e;for(const t of this.Z.Ff)t!==e&&(t.h_=_s.Th)}}oE(t){const e=this.Btt(t);e&&this.ktt===e&&(this.ktt=void 0)}Btt(t){return Rt(this.Z.Ff,(e=>t.Yf===e.Yf))}Dtt(t,e){this.Ott.set(t.Yf,e)}Mtt(t){return this.Ott.get(t.Yf)}Ntt(t){this.Ott.delete(t.Yf)}Ltt(){if(!this.ktt)return;const e=this.Mtt(this.ktt);return e?t.Ftt(e):void 0}static Ftt(t){return t.Utt&&t.Utt.length>0?t.Utt[0]:void 0}constructor(...t){super(...t),this.Ott=Re()}};function mu(t,e){const i=e.EM(((e,i)=>t.bM(e,i,!1,!1)));return t.gM(i)}function ZL(t,e){const i=e.Cn(t.dM()).EM(((e,i)=>t.br(i)));return t.gM(i)}!function(t){t[t.AL=0]="AL",t[t.Htt=1]="Htt",t[t.Wtt=10]="Wtt",t[t.qtt=11]="qtt",t[t.Vtt=12]="Vtt",t[t.ztt=13]="ztt",t[t.Xtt=14]="Xtt",t[t.Gtt=15]="Gtt",t[t.Qtt=20]="Qtt",t[t.Ktt=21]="Ktt",t[t.jtt=22]="jtt",t[t.Ytt=23]="Ytt",t[t.Ztt=24]="Ztt",t[t.Jtt=30]="Jtt",t[t.$tt=31]="$tt",t[t.tet=32]="tet",t[t.eet=33]="eet",t[t.iet=34]="iet",t[t.net=35]="net",t[t.ret=40]="ret",t[t.oet=41]="oet",t[t.het=42]="het",t[t.aet=43]="aet",t[t.uet=44]="uet",t[t.cet=50]="cet",t[t.let=51]="let",t[t.det=60]="det",t[t.fet=61]="fet",t[t._et=62]="_et",t[t.vet=63]="vet",t[t.met=70]="met",t[t.wet=71]="wet",t[t.pet=72]="pet",t[t.yet=73]="yet",t[t.Aet=74]="Aet",t[t.bet=75]="bet",t[t.Tet=76]="Tet",t[t.Eet=77]="Eet",t[t.ket=90]="ket",t[t.Pet=91]="Pet"}(Xh||(Xh={})),function(t){t.Iet="Ret",t.Cet="xet"}(_n||(_n={}));var JL,Ih=class extends Xs{constructor(t,e,i){super("Det"),this.Tn=t,this.An=e,this.Net=i}},$L=class extends Ci{constructor(){super("Bet")}};!function(t){t.Oet="Met",t.Let="Fet",t.Uet="Het",t.AL="Wet"}(JL||(JL={}));var tF=[r.hv,r.fv,r.ov,r.P_],eF=class extends d{get qet(){var t,e;return(null==(t=this.zet.Vet)?void 0:t.Net)||(null==(e=this.zet.Xet)?void 0:e.Net)}get Get(){return this.Qet}set Ket(t){this.zet.Ket=t}get Ket(){return this.zet.Ket}get ZS(){return this.jet}Yet(t){this.jet!==t&&(this.jet=t,this.To(new $L))}get Zet(){return this.Qet.Ht.Zet}get lt(){return this.WB}async Tn(t){if(!this.Jet&&!this.$et)return;const e=this.Bl("Bet");this.Jet?(this.tit.vl(),this.tit=new Zs,this.eit(this.tit.fl)):(this.iit.lI(void 0),this.iit=new Os),await e}get Jet(){return"Met"===this.jet}get $et(){return"Fet"===this.jet}get sit(){return"Het"===this.jet}get nit(){return"Wet"===this.jet}async $d(t){if(this.sit||this.$et)for(0,this.tit.vl();!this.Jet&&!this.nit;)await this.Bl("Bet")}async ir(t){this.nit?(this.WB=void 0,this.Yet("Met")):await this.$d(t),this.zet.ir(),this.Qet.ir()}CO(t){this.WB=t,this.Yet("Wet"),this.To(new An(t))}rit(){this.kJ.kn(r.vv,this.oit),this.kJ.kn([r.rv,r.W_],this.Xe),this.zet.kn(tF,this.Rs),this.hit.kn(_n.Iet,this.oit)}ait(){this.kJ.pn(r.vv,this.oit),this.kJ.pn([r.rv,r.W_],this.Xe),this.zet.pn(tF,this.Rs),this.hit.pn(_n.Iet,this.oit)}async uit(t){this.ait(),this.cit.vl(),await this.$d(null!=t?t:Xh.aet),this.zet.ir()}async dit(t){this.rit(),await this.Tn(null!=t?t:Xh.Gtt)}async bn(){this.Lo(),this.ait(),this.cit.vl(),await this.$d(Xh.uet),this.zet.bn()}async eit(t){for(;;)try{gi(t),this.Yet("Het"),await this.zet.fit(t),gi(t),this.Yet("Fet"),await sf(this.iit.fI,t)}catch(t){if(Lr(t))this.Yet("Met");else{const e=t instanceof io?t:new io(Ot.MEDIA_LOAD_ERROR,t.message,t);this.CO(e)}break}}async _it(t){gi(t),await this.$d(Xh.het),this.zet.ir(),gi(t),await this.Tn(Xh.ztt)}constructor(t,e,i,s,n){super(),this.vit=t,this.hit=e,this.Qet=i,this.zet=s,this.kJ=n,this.jet="Met",this.WB=void 0,this.iit=new Os,this.cit=new Zs,this.tit=new Zs,this.Xe=t=>{this.Jet||this.nit||!f.M8&&this.zet.git(t.currentTime)||(this.cit.vl(),this.cit=new Zs,this._it(this.cit.fl).catch(yr))},this.oit=ef((()=>{if(this.$et){try{this.zet.mit();if(this.zet.wit())return}catch(t){if(!(t instanceof Ih))throw t}this.Tn(Xh.Xtt)}}),250),this.rit()}},iF=class t{pit(t,e,i,s,n){return this.yit(t,e,!1,i,n,s)}Ait(t,e,i,s,n){return this.yit(t,e,!0,i,n,s)}async yit(e,i,s,n,r,o){gi(o);const h=await this.Tit(e,s,n,r,o);return i?t.Sit(h):this.Eit(h)}Eit(t){return t}static Sit(t){return t}Tit(t,e,i,s,n){var r;const o=new Yt({YS:t.YS,DE:Ct.aE,CE:t.kit?{Range:"bytes="+t.kit[0]+"-"+(null!=(r=t.kit[1])?r:"")}:void 0,ME:t.ME,xE:Fr.GET,l_:ro.vE,BE:e?Ru.wE:Ru.wA,OE:this.Pit,JS:i,NE:s,fl:n});return this.qE.GS(o)}constructor(t,e){this.qE=t,this.Pit=e}},sF=class{Iit(t,e){const i=this.Rit**t,s=e*(1-i)+i*this.g3;j(s)||(this.g3=s,this.Cit+=t)}xit(){const t=1-this.Rit**this.Cit;return this.g3/t}constructor(t){this.g3=0,this.Cit=0,this.Rit=b.exp(b.log(.5)/t)}},yu=class{Iit(t,e){const i=8e3*e/t,s=t/1e3;this.Dit+=e,this.Nit.Iit(s,i),this.Bit.Iit(s,i)}xit(){return this.Oit()?b.min(this.Nit.xit(),this.Bit.xit()):this.Mit}Oit(){return this.Dit>=this.Lit}constructor(t=2,e=5,i=128e3){this.Dit=0,this.Mit=lS,this.Nit=new sF(t),this.Bit=new sF(e),this.Lit=i}},nF=class{get Fit(){return this.Uit.xit()}get Oit(){return this.Uit.Oit()}Hit(t){const e=t.Wit,i=this.qit?t.Vit-t.zit:t.Vit-t.Xit,s=t.Git;!s&&e<this.Qit||(s?this.Uit.Iit(2*i,e):this.Uit.Iit(i,e))}constructor(t,e){this.qit=e,!e||t!==Fs.Rm&&t!==Fs.Cm?(this.Qit=16e3,this.Uit=new yu):t===Fs.Rm?(this.Qit=5e3,this.Uit=new yu(.05,1,0)):(this.Qit=0,this.Uit=new yu(.005,.1,0))}},rF=["uv","_v"],oF=class extends d{async Kit(t,e){let i;for(const s of this.jit)try{return await s.Kit(t,e)}catch(t){eo(t),i=t}throw i}async Yit(t,e){let i;for(const s of this.jit)try{return await s.Yit(t,e)}catch(t){eo(t),i=t}throw i}bn(){for(const t of this.jit)t.pn(rF,this.Rs),t.bn()}constructor(t){super(),this.jit=t;for(const t of this.jit)t.kn(rF,this.Rs)}};var hF=class{transform(t,e){this.Zu.write(t).catch($d),e.enqueue(t)}flush(){this.Zu.close().catch($d)}constructor(t){this.Zu=t}},aF=class{Zit(){return new uF(ae(this.Ttt),this.Jit,this.$it)}constructor(t,e,i){this.Ttt=t,this.Jit=e,this.$it=i}},uF=class t{get OH(){return this.tst}bN(t){return ct(this.tst,t)}Um(){const[e,i]=Xk(this.tst);return this.tst=e,new t(i,this.Jit,this.$it)}ist(){const[e,i]=function(t){const e=new Da,i=e.writable.getWriter(),s=new Da(new hF(i));return t.pipeTo(s.writable).catch((t=>{i.abort(t).catch($d)})),[s.readable,e.readable]}(this.tst);return this.tst=e,new t(i,this.Jit,this.$it)}sst(t){return this.bN(t).then((t=>new aF(t,this.Jit,this.$it)))}constructor(t,e,i){this.tst=t,this.Jit=e,this.$it=i}},cF=class extends Xs{constructor(t,e,i){super(e,i),this.nst=t}},lF="Cache lookup failed.",dF=class extends d{async Kit(t,e){gi(e);const i=await this.rst.w9(t.YS.YS,t.YS.kit);if(gi(e),!i)throw new cF(t,lF);const s=new aF(i.buffer,i.byteLength,i.reference);return{nst:t.nst,ost:{l_:wt.xV,Xm:s},Net:t.Net,YS:t.YS}}async Yit(t,e){gi(e);const i=await this.rst.w9(t.YS,t.kit);if(gi(e),!i)throw new cF(t,lF);const s=new aF(i.buffer,i.byteLength,i.reference);return{l_:wt.xV,Xm:s}}bn(){this.Lo()}constructor(t){super(),this.rst=t}};function ma(t){return xd(t.hst)}function fF(t){return ma(t)?t.hst:t.ast}var _F=class extends Ci{constructor(t,e,i,s,n,r){super(t),this.ust=e,this.cst=i,this.Ny=s,this.tp=n,this.OE=r}},vF=class extends _F{constructor(t,e,i,s,n){super(r.hv,t,e,i,s,n)}},gF=class{constructor(t,e){this.lst=t,this.dst=e}},mF=class extends gF{get Wit(){return this.fst}start(){}transform(t,e){this.fst+=t.byteLength,e.enqueue(t)}flush(){this._st(!1)}vl(){this._st(!0)}_st(t){this.lst(this.dst,f.Al(),this.Wit,t)}constructor(...t){super(...t),this.fst=0}},wF=class extends gF{get Wit(){return this.fst}start(){this.dst=f.Al()}transform(t,e){this.fst+=t.byteLength,this.vst||this.gst(t)&&this._st(!1),e.enqueue(t)}flush(){}vl(){this._st(!0)}gst(t){const e=this.mst(t),i=this.wst(e);return Boolean(Rt(i,pF))}mst(t){return this.pst&&void 0!==this.yst?(this.pst=Y_([this.pst,t]),new Nh(wa(this.pst),new ds(this.yst))):(this.pst=t,new Nh(wa(t),new ds))}wst(t){const e=P.uw(t.Xm,t.Gm,!0);return e.cw?(this.pst=void 0,this.yst=void 0):this.yst=t.Gm.Om,e.m}_st(t){this.vst||(this.lst(this.dst,f.Al(),this.Wit,t),this.vst=!0)}constructor(...t){super(...t),this.fst=0,this.vst=!1}};function pF(t){return t.l_===E_.pm}var yF=class{Ast(t){const e=t.QH?this.bst:f.Al(),i=this.Tst(e),s=new Da(i),n=t.OH().pipeTo(s.writable).then((()=>({hd:{Wit:i.Wit}})),(t=>{throw i.vl(),t}));return this.Sst.wl(n),s.readable}Est(t){const e=t.QH?this.bst:f.Al(),i=t.bN(),s=i.then((t=>{const i=f.Al();return this.Hit(e,i,t.byteLength,!1),{hd:{Wit:t.byteLength}}}),(t=>{const i=f.Al();throw this.Hit(e,i,0,!0),t}));return this.Sst.wl(s),i}get kst(){return this.Sst.fI}constructor(t){this.Pst=t,this.Sst=new Os,this.Hit=(t,e,i,s)=>{const n={Xit:this.bst,zit:t,Vit:e,Wit:i,Git:s};this.Pst.Hit(n),this.Pst.Oit&&nh.zP.rB(this.Pst.Fit)},this.Sst.fI.catch($d),this.bst=f.Al()}},AF=class extends yF{Tst(t){return new mF(this.Hit,t)}},bF=class extends yF{Tst(t){return new wF(this.Hit,t)}},si=class extends _F{constructor(t,e,i,s,n,o,h){super(r.fv,t,e,i,s,n),this.Ist=o,this.NA=h}},TF=class extends Xs{constructor(t,e,i){super("Error downloading segment "+fF(e),t),this.Rst=e.ob,this.Cst=e.hb,this.xst=i}},SF=class extends d{Dst(){return f.D8}Nst(){return this.qit?new bF(this.Pst):new AF(this.Pst)}async Kit(t,e){gi(e);const i=t.Net,s=t.YS,n=t.nst,r=fF(n),o=i.Net?i.Net.Yf:-1,h=function(t){const e=t.Net;let i;i=e===function(t){return t.Utt.reduce(((t,e)=>t.wB<e.wB?t:e))}(e.Bst)?ET(5*t.nst.ct):ET(1.2*t.nst.ct);return Eo(i,1e3,18e3)}(t);this.To(new vF(s,i.wB,r,o,i.l_));try{const t=this.Nst(),a=await this.Ost.pit(s,this.Dst(),h,e),u=await this.Mst(a,this.Dst(),e,t);return Ui(this.Lst(t.kst,i,s,r,o,a)),{ost:u,Net:i,nst:n,YS:s}}catch(t){throw eo(t),new TF(t,n,i)}}async Yit(t,e){gi(e);const i=await this.Ost.Ait(t,false,1e4,e);return await this.Mst(i,false,e)}async Mst(t,e,i,s){if(e){const e=s?s.Ast(t):t.OH();return{l_:wt.cE,Xm:new uF(e)}}{const e=s?await s.Est(t):await t.bN(i);return{l_:wt.xV,Xm:new aF(e)}}}async Lst(t,e,i,s,n,r){try{const o=await t;this.To(new si(i,e.wB,s,n,e.l_,r.ZS,o.hd.Wit))}catch(t){}}bn(){this.Lo()}constructor(t,e,i){super(),this.Ost=t,this.Pst=e,this.qit=i}};var EF=class{Fst(t,e,i,s,n){const r=new dF(n),o=this.Ust(t,i,s);return new oF([r,o])}Ust(t,e,i){return new SF(t,e,i)}},kF=.001,PF=class{get Fl(){return this.Hst.Fl}get Wst(){return this.Hst.Wst}get oz(){return this.Hst.oz}get qst(){if(this.jK.Pd<Yv.Qn)return!1;if(this.Hst.An<=this.Vst&&this.Hst.zst())return!0;const t=this.Hst.LB;if(!t||0===t.V)return!1;const e=ri.NM(this.kJ.zl,1/0);return t.Cn(e).wM(this.Hst.oz).xM>=this.XM.rq}get Vst(){const t=this.Hst.LB;let e;if(t&&t.V>0)e=t.An(0);else{e=this.kJ.zl;const t=this.Hst.oz,i=t.pM(e);i>=0&&(e=t.An(i))}const i=this.Hst.Rd.Tn(0);if(i>e){if(this.Hst.Tn<=e&&this.Hst.An>=e&&i>e+kF)throw new Ih(e,i);e=i}return e=this.Hst.Xst.lM(e),e}constructor(t,e,i,s){this.Hst=t,this.kJ=e,this.jK=i,this.XM=s}};var IF=class{get Gst(){if(0===this.Zc.size)return ri.BM();let t=ri.NM(0,1/0);return this.Zc.forEach((e=>{t=t.Cn(e)})),t}Qst(){let t=ri.BM();return this.Zc.forEach((e=>{t=t.gM(e)})),t}Kst(t){let e=!1;return this.Zc.forEach((i=>{e=e||i.br(t)})),e}jst(t,e){const i=this.Zc.get(e.o);return!!i&&i.br(t)}yM(t,e){let i=!1;return this.Zc.forEach((s=>{i=i||s.yM(t,e)})),i}Yst(t,e){const i=this.Zc.get(e.o).gM(t);this.Zc.set(e.o,i)}Zst(t){this.Zc.forEach(((e,i)=>{const s=e.gM(t);this.Zc.set(i,s)}))}Jst(t){this.Zc.forEach(((e,i)=>{this.Zc.set(i,e.Cn(t))}))}ir(){this.Zc.forEach(((t,e)=>{this.Zc.set(e,ri.BM())}))}constructor(t){this.Zc=function(t){const e=rs();for(const i of t)e.set(i.o,ri.BM());return e}(t)}},RF=class{get $st(){return this.tnt}get oz(){return this.cz}ent(t){for(const e of this.O9){if(e.int>t)break;if(e.snt>t)return e}}nnt(t){for(const e of this.O9){if(e.rnt>t)break;if(e.ont>=t)return e}}hnt(t,e){const i=[];for(const s of this.O9){if(s.int>t)break;s.snt>=e&&i.push(s)}return i}ant(){return this.O9}unt(t,e){const i=ri.NM(t.rnt,t.ont),s=i.dM();this.tnt.Jst(s),this.tnt.Yst(i,e),this.cnt(s);const n=Ud(this.O9,(e=>t.int<=e.int));if(n<0)this.O9.push(t);else{this.O9[n].snt<=t.snt?this.O9.splice(n,1,t):this.O9.splice(n,0,t)}}lz(t,e){this.cz.Yst(t,e)}lnt(t){this.cz.Zst(t)}Jst(t){this.tnt.Jst(t),this.cz.Jst(t);const e=this.tnt.Qst();this.cnt(e)}cnt(t){this.O9=this.O9.filter((e=>t.bM(e.rnt,e.ont))).map((e=>e.dnt&&!t.yM(e.rnt,e.ont)?function(t,e){return{int:t.int,snt:t.snt,rnt:t.rnt,ont:t.ont,dnt:e}}(e,!1):e))}ir(){this.tnt.ir(),this.cz.ir(),this.O9=[]}bn(){this.ir()}constructor(t){this.O9=[],this.Ht=t,this.tnt=new IF(t.Utt),this.cz=new IF(t.Utt)}},CF=class{get Ket(){return this.fnt}set Ket(t){this.fnt=t}get Zet(){return this.Qet.Ht.Zet}async _nt(t,e,i){let s;gi(i);const n=this.Qet.nnt(t);s=n&&_e(n.ont,t,1e-5)?b.max(n.snt,t):t;const r=this.vnt(s),o=function(t){return xF.bind(void 0,t)}(s);let h=await this.o5.gnt(o,r,e,i);for(gi(i);h&&this.mnt(h.nst);){const t=OF(h.nst),s=h.Net;h=await this.o5.gnt(t,[s],e,i),gi(i)}if(!h)return void 0;if(!this.wnt(h.nst))return h;const a=this.pnt(h.nst);if(t<a.Tn)return await this.findFirstNonAppendedSegmentBeforeSegment(h,e,i,a);if(t>=a.An)return await this.findFirstNonAppendedSegmentAfterSegment(h,e,i);if(!h.Net.ynt(h.nst))throw new v("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,e,i){let s=t;do{const n=OF(s.nst),r=t.Net;s=await this.o5.gnt(n,[r],e,i),gi(i)}while(s&&this.wnt(s.nst));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,e,i,s){let n=t;do{const s=BF(n.nst),r=t.Net;n=await this.o5.gnt(s,[r],e,i),gi(i)}while(n&&this.wnt(n.nst));if(!n){0;const e=t.Net.Ant.Tn;throw new Ih(e,s.Tn,t.Net)}return n}bnt(t){return this.Qet.$st.Kst(t)}Tnt(t){return this.Qet.hnt(t.ob,t.hb)}wnt(t){const e=this.Tnt(t);return e.length>0&&function(t,e){return function(t){let e=ri.BM();for(const i of t)e=e.gM(ri.NM(i.int,i.snt));return e}(t).yM(e.ob,e.hb)}(e,t)&&e.every(MF)}mnt(t){return this.Qet.oz.yM(t.ob,t.hb)}pnt(t){const e=this.Tnt(t);return{Tn:e[0].rnt,An:e[e.length-1].ont}}vnt(t){const e=this.Snt(t);if(0===e.length){const t=this.fnt?this.fnt:this.Qet.Ht.Utt;return[t[t.length-1]]}const i=e.filter((t=>!t.Ent));return i.length>0?i:[e[e.length-1]]}Snt(t){return(this.fnt?this.fnt:this.Qet.Ht.Utt).filter((e=>!this.Qet.oz.jst(t,e)))}constructor(t,e,i){this.vit=t,this.Qet=e,this.o5=i}};async function xF(t,e,i,s){const n=e.G7.knt(t);if(n){if(e.Pnt(n)){return(await e.Rnt(n,i,s)).Int(t)}return n}}async function DF(t,e,i,s){if(ma(t)){if(0===t.hst)return;const n=e.G7.Cnt(t);if(!n)return;return(await e.Rnt(n,i,s)).xnt(t.hst-1)}return e.G7.Dnt(t)}async function NF(t,e,i,s){if(ma(t)){const n=e.G7.Cnt(t);if(!n)return;const r=await e.Rnt(n,i,s);if(t.hst+1===r.V)return;return r.xnt(t.hst+1)}return e.G7.Nnt(t)}function BF(t){return DF.bind(void 0,t)}function OF(t){return NF.bind(void 0,t)}function MF(t){return t.dnt}var LF=class{async gnt(t,e,i,s){gi(s);const n=this.Bnt(e,i);if(!n)return;const r=await t(n,this.Ont,s);if(!r)return;const o=n.Mnt(r);return{Net:n,nst:r,YS:o}}Bnt(t,e){if(0===t.length)return;const i=this.Fnt.Lnt(t,this.Unt?e:void 0,this.Hst,this.XM.tq);return this.Unt||(this.Unt=!0),i}constructor(t,e,i,s){this.Fnt=t,this.Hst=e,this.XM=i,this.Ont=s,this.Unt=!1}},FF=class{async gnt(t,e,i,s){gi(s);const n=this.Fnt.Hnt(e,i,this.Hst);if(!n.length)return;let r;for(const e of n)try{gi(s);const i=await t(e,this.Ont,s);if(i){const t=e.Mnt(i);if(await this.rst.g9(t.YS,t.kit))return{nst:i,Net:e,YS:t}}}catch(t){eo(t),r=t}if(r)throw r}constructor(t,e,i,s){this.Fnt=t,this.Hst=e,this.rst=i,this.Ont=s}};function UF(t){return void 0!==t.pd}function HF(t,e){return function(t,e){const i=t.Ti&&e.Ti,s=t.Ci&&e.Ci;if(i||s)return i&&s?t.Ti*t.Ci-e.Ti*e.Ci:i?t.Ti-e.Ti:s?t.Ci-e.Ci:(t.Ti||1)*(t.Ci||1)-(e.Ti||1)*(e.Ci||1);return 0}(t,e)||function(t,e){return t.wB-e.wB}(t,e)}var fu=class t{Lnt(e,i,s,n){let r=t.sortByQuality(e);if(void 0!==this.Wnt&&void 0===i&&e.length>1){const e=t.qnt(r,this.Wnt);e&&(r=e)}const o=this.Hnt(r,i,s,n);return o.length?o[o.length-1]:r[0]}Hnt(e,i,s,n){var r;const o=t.sortByQuality(e),h={Fit:void 0===n||this.Vnt.Oit?this.Vnt.Fit:n,pd:UF(s)&&s.pd?s.pd:1,znt:s.Ti,Xnt:s.Ci,Gnt:null==(r=this.Qnt)?void 0:r.restrictToPlayerSize};let a=o;for(const t of this.Knt)a=t(a,i,h,this.L5,this.jnt);return a}static Ynt(e){return t.sortByQuality(e)[0]}static Znt(e,i){var s;return i?t.Ynt(null!=(s=t.qnt(e,i))?s:e):t.Ynt(e)}static qnt(t,e){for(const i of e){const e=t.filter((t=>ca(t.C5,i)));if(e.length>0)return e}}static sortByQuality(t){const e=[...t];return e.sort(HF),e}constructor(t,e,i,s,n,r){this.Knt=t,this.Vnt=e,this.L5=i,this.Qnt=s,this.Wnt=n,this.jnt=r}},WF=(t,e,i,s,n)=>t.filter((t=>n.MV(t)&&s.E5(e,t))),qF=(t,e,i)=>t.filter((t=>function(t,e,i){const s=i.Fit;if(s<=0)return!1;return.8*s>t.wB*i.pd}(t,0,i)));var VF=(t,e,i,s,n)=>{const r=i.Gnt;if(void 0===r&&!s.Ks)return t;if(!1===r)return t;if(t.length>0&&t[0].l_!==Fs.Rm)return t;for(let e=t.length-1;e>=0;e--){const s=t[e];if(s.Ci===i.Xnt&&s.Ti===i.znt)return t.slice(0,e+1);if(s.Ci<i.Xnt||s.Ti<i.znt)return t.slice(0,e+2)}return[]},zF=class{async gnt(t,e,i,s){let n;for(const r of this.Jnt)try{const n=await r.gnt(t,e,i,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this.Jnt=t}},XF=class{async $nt(t,e,i,s){let n;for(const r of this.trt)try{return await r.$nt(t,e,i,s)}catch(t){eo(t),n=t}throw n}constructor(t){this.trt=t}},GF=class{async $nt(t,e,i,s){var n;const r=await this.qE.GS({YS:t,DE:Ct.aE,CE:e?{Range:"bytes="+e[0]+"-"+(null!=(n=e[1])?n:"")}:void 0,ME:i,xE:Fr.GET,l_:ro.wA,fl:s});return await r.bN()}constructor(t){this.qE=t}},QF=class{async $nt(t,e,i,s){const n=await this.rst.w9(t,e);if(n)return n.buffer;if(e){const i=await this.rst.w9(t);if(i)return Na(new S(i.buffer),e[0],e[1])}throw new cF({YS:t,kit:e,ME:!1})}constructor(t){this.rst=t}};var KF=1.05,jF=(t,e,i,s)=>{if(!1===i.Gnt)return t;if(s.m5)return t;const n=s.w5;var r;const o=(null!=(r=null==n?void 0:n.width)?r:i.znt)*KF;var h;const a=(null!=(h=null==n?void 0:n.height)?h:i.Xnt)*KF;for(let e=t.length-1;e>=0;e--){const i=t[e];if(i.Ci<=a&&i.Ti<=o)return t.slice(0,e+1)}return[]},YF=class{static P3(t,e,i,s,n,r,o,h,a,u){const c=function(t,e){return new XF([new QF(e),new GF(t)])}(r,o),l=new fu([WF],n,f.Zs,h,a,u),d=new FF(l,e,o,c),_=new fu([qF,WF,VF,jF],n,f.Zs,h,a,u),v=new LF(_,e,s,c),g=new zF([d,v]);return new CF(t,i,g)}},ZF=class{ert(t,e,i,s){return this.Hst.ert(t,e,i,s)}irt(t,e,i){return this.Hst.z7(t,e,i)}nrt(t,e,i){return this.Hst.nrt(t,e,i)}lz(t,e){this.Hst.lz(t,e)}fz(t,e){this.Hst.fz(t,e)}PK(){this.Hst.PK()}cq(){return this.Hst.cq()}constructor(t){this.Hst=t}},JF=class extends Ci{constructor(t,e,i,s,n,o=0){super(r.ov),this.segmentStartTime=t,this.error=e,this.trackType=i,this.track=s,this.quality=n,this.retryCount=o}},$F=class extends Ci{constructor(t,e){super(r.P_),this.track=t,this.segments=e}},tU=class extends Xs{constructor(t,e){super(e),this.rrt=t}},eU=[r.hv,r.fv],iU=class extends d{get Vet(){return this.ort}get Xet(){return this.hrt}set Ket(t){this.art.Ket=t}get Ket(){return this.art.Ket}get Zet(){return this.Qet.Ht.Zet}urt(t){return!this.YQ||!t||!j_(this.YQ.Ttt,t.Ttt)}git(t){if(!this.ort)return!1;const e=this.ort.nst,i=ri.NM(e.ob,e.hb),s=this.crt.Wst,n=s.pM(t);return n<0?i.br(t,kF):i.bM(t,s.An(n),!0,!0,kF)}async fit(t){const e=this.Qet.Ht.Utt;for(;;)try{gi(t),this.mit();if(this.wit())break;const i=this.lrt(),s=await this.gnt(i,t);if(void 0===s)break;if(this.ort=s,!sU(this.ort)){await this.drt(this.ort,t);continue}this.hrt&&!ca(this.hrt.Net.YB,this.ort.Net.YB)&&await this.jnt.FV(this.ort.Net),await this.frt(i,this.ort.nst,t),this.YQ=await this._rt(this.ort.Net,t);const n=await this.Kit(this.ort,t),r=this.crt.Fl,o=this.hrt;this.hrt=await this.vrt(n,t);const h=this.crt.Fl;this.grt(o,this.ort,r,h),e.forEach((t=>t.Ent=!1)),this.mrt=0,this.wrt=0}catch(i){if(i instanceof Ih){this.BK(i.Tn,i.An,i.Net);continue}if(i instanceof tU){let s=500;if(e.every((t=>t.Ent))){if(2===this.mrt){const t=this.crt.Fl;if(this.prt(this.ort),this.grt(this.hrt,this.ort,t,t),e.forEach((t=>t.Ent=!1)),this.wrt+=1,this.mrt=0,this.wrt===this.yrt.maxRetries)throw new io(Ot.MEDIA_LOAD_ERROR,"The segments could not be loaded.",i);continue}this.mrt++;const t=this.yrt.minimumBackoff*2**(this.mrt-1);s=b.min(t,this.yrt.maximumBackoff)}await ye(s,t);continue}throw this.Art=ri.BM(),i}finally{this.ort=void 0}}grt(t,e,i,s){const n=s.wM(i),r=e.Net.brt(e.nst),o=e.Net.ynt(e.nst);let h=e.nst.ob,a=e.nst.hb;r&&(h=b.min(h,b.max(0,e.Net.Ant.Tn-.05))),o&&(a=b.max(a,e.Net.Ant.An));const u=ri.NM(h,a).wM(s);if(0===n.V)return 0===this.Art.V&&this.Art.gM(ri.NM(i.An(i.V-1),h)),this.Art=this.Art.gM(u),void this.Qet.lnt(this.Art);if(r||this.Art.V>0){const t=u.Cn(ri.NM(h,n.Tn(0)));this.Trt(t)}const c=n.dM().Cn(ri.NM(n.Tn(0),n.An(n.V-1)));if(this.Trt(c),o){const t=u.Cn(ri.NM(n.An(n.V-1),a));this.Trt(t)}if(this.Art.V>0){const t=this.Art.wM(n);this.Trt(t),this.Art=ri.BM()}const l=e.Net.G7,d=ma(e.nst)?void 0:l.Dnt(e.nst);var f;const _=null!=(f=null==t?void 0:t.nst)?f:this.Srt(d)?d:void 0;if(_){const t=this.Qet.hnt(_.ob,_.hb);if(t.length>0){const e=ri.NM(t[t.length-1].ont,n.Tn(0));this.Trt(e)}}const v=ma(e.nst)?void 0:l.Nnt(e.nst);if(v&&this.Srt(v)){const t=this.Qet.hnt(v.ob,v.hb);if(t.length>0){const e=ri.NM(n.An(n.V-1),t[0].rnt);this.Trt(e)}}}Srt(t){return!!t&&this.Qet.hnt(t.ob,t.hb).length>0}Trt(t){const e=t.wM(this.crt.Fl);for(let t=0;t<e.V;t++)e.Tn(t)!==e.An(t)&&this.Ert.lz(e.Tn(t),e.An(t))}krt(t,e){throw new tU(t,e)}mit(){if(this.Art.V>0)return;var t;const e=this.crt.Wst.gM(null!=(t=this.crt.oz.cM().CM(this.crt.Vst))?t:ri.BM());this.Qet.Jst(e),this.Prt&&!this.Irt(this.Prt)&&(this.Prt=void 0),this.To(new $F(this.Qet.Ht.Zet,this.Qet.ant()))}wit(){return this.hrt&&this.hrt.Net.ynt(this.hrt.nst)?(this.Ert.PK(),!0):(this.Prt&&this.Prt.Net.ynt(this.Prt.nst)&&this.Irt(this.Prt)&&this.Ert.PK(),!!this.crt.qst)}Irt(t){return this.Qet.$st.yM(t.Rrt,t.Crt)}xrt(t,e,i){(!this.Prt||this.Prt.nst.hb<t.nst.hb)&&(this.Prt=no({},t,{Rrt:e,Crt:i}))}lrt(){const t=this.crt.Vst;return t}async gnt(t,e){gi(e);const i=this.hrt?this.hrt.Net:void 0,s=await this.art._nt(t,i,e);if(s)return s}async drt(t,e){const i=t.Net,s=i.G7,n=ma(t.nst)?s.Cnt(t.nst):t.nst,r=i.Nrt.Drt(),o=s.Brt(n);if(o&&o.getTime()<=r.getTime())return this.krt(Xh.jtt,"Segment is not available.");const h=s.Ort(n).getTime()-r.getTime();await ts((t=>Promise.race([ye(h,t),i.Bl(_n.Iet,t)])),e)}async _rt(t,e,i){void 0===i&&(i=0),gi(e);const s=t.Mrt;if(!s)return this.YQ;try{if(!t.Lrt){const i=await this.Frt.Yit(s,e);t.Lrt=i.Xm}}catch(s){if(eo(s),We(s)){if(2===i)return t.Ent=!0,this.krt(Xh.net,"Could not fetch the initializer.");const s=b.min(this.yrt.minimumBackoff*2**i,this.yrt.maximumBackoff);return await ye(s,e),this._rt(t,e,i+1)}throw new io(Ot.MEDIA_LOAD_ERROR,s.message,s)}gi(e);try{this.urt(t.Lrt)&&await this.Ert.irt(t.Lrt,t,e)}catch(t){if(eo(t),We(t))return this.krt(Xh.net,"Could not append the initializer.");throw new io(Ot.MEDIA_DECODE_ERROR,t.message,t)}return t.Lrt}async Kit(t,e,i){void 0===i&&(i=0);try{return gi(e),await this.Frt.Kit(t,e)}catch(s){if(eo(s),s instanceof TF){if(function(t){return t instanceof Xo}(s.cause))return this.Urt(new TF(s,t.nst,t.Net),i),this.krt(Xh.jtt,"Could not append the segment.");if(2===i)return t.Net.Ent=!0,this.Urt(s,i),this.krt(Xh.jtt,"Could not fetch the segment.");const n=b.min(this.yrt.minimumBackoff*2**i,this.yrt.maximumBackoff);return await ye(n,e),await this.Kit(t,e,i+1)}throw new io(Ot.MEDIA_LOAD_ERROR,s.message,s)}}async frt(t,e,i){const s=this.Qet.hnt(e.ob,e.hb),n=this.crt.Wst.CM(t);let r=ri.BM();for(const t of s){gi(i);const e=t.rnt,s=t.ont,o=n&&n.bM(e,s)?b.max(e,n.An(0)):e,h=s;o<h&&(r=r.gM(ri.NM(o,h)))}for(let t=0;t<r.V;t++)await this.Ert.nrt(r.Tn(t),r.An(t),i);this.mit()}async vrt(t,e){try{gi(e);const i=await this.Ert.ert(t.ost,t.nst,t.Net,e);return this.Hrt(t,i.Rrt,i.Crt),this.xrt(t,i.Rrt,i.Crt),t}catch(e){if(eo(e),We(e))return this.Urt(new TF(e,t.nst,t.Net),0),this.krt(Xh.jtt,"Could not append the segment.");if(yP(e)&&this.Ert.cq())return this.krt(Xh.Ztt,"Buffer is full. Could not reduce the buffer.");throw new io(Ot.MEDIA_DECODE_ERROR,e.message,e)}}Hrt(t,e,i){const s=t.Net,n=t.nst;this.unt(n,s,e,i)}unt(t,e,i,s){this.Qet.unt({int:t.ob,snt:t.hb,rnt:i,ont:s,dnt:!0},e),this.Ert.fz(i,s)}BK(t,e,i){const s=ri.NM(t,e);i?this.Qet.lz(s,i):this.Qet.lnt(s),this.Ert.lz(t,e)}prt(t){const e=ri.NM(t.nst.ob,t.nst.hb);t.Net?this.Qet.lz(e,t.Net):this.Qet.lnt(e)}Urt(t,e){const i=t.Rst,s=this.Qet.Ht.Zet,n=this.Qet.Ht.ma,r=t.xst.Net&&t.xst.Net.ma,o=new JF(i,t.message,s,n,r,e);this.To(o)}ir(){this.YQ=void 0,this.hrt=void 0}bn(){this.ir(),this.Prt=void 0,this.Frt.pn(eU,this.Rs),this.Frt.bn()}constructor(t,e,i,s,n,r,o,h){super(),this.vit=t,this.Qet=e,this.crt=i,this.art=s,this.Frt=n,this.Ert=r,this.jnt=o,this.yrt=h,this.ort=void 0,this.YQ=void 0,this.hrt=void 0,this.Prt=void 0,this.mrt=0,this.wrt=0,this.Art=ri.BM(),this.Frt.kn(eU,this.Rs)}};function sU(t){const e=t.Net,i=e.G7,s=ma(t.nst)?i.Cnt(t.nst):t.nst;return i.Wrt(s,e.Nrt.Drt())}var nU=0,rU=class{P3(t){const e=nU++,i=this.Hst.RK,s=new RF(t),n=new nF(i,this.qrt),r=new PF(this.Hst,this.kJ,this.jK,this.XM),o=YF.P3(e,this.Hst,s,this.XM,n,this.qE,this.rst,this.Qnt,this.Wnt,this.jnt),h=function(t){switch(t){case Fs.Cm:return Au.Cm;case Fs.Rm:return Au.Rm;case Fs.gA:return Au.gA;case Fs.mA:return Au.mA;default:return Au.wA}}(i),a=new iF(this.qE,h),u=this.Fst(a,n,this.qrt),c=new ZF(this.Hst),l=new iU(e,s,r,o,u,c,this.jnt,this.yrt);return new eF(e,t.Bst,s,l,this.kJ)}constructor(t,e,i,s,n,r,o,h,a,u,c){this.Hst=t,this.kJ=e,this.jK=i,this.qE=s,this.XM=n,this.qrt=r,this.rst=o,this.Qnt=h,this.Wnt=a,this.jnt=u,this.yrt=c}},oU=class extends rU{Fst(t,e,i){return(new EF).Fst(t,this.Hst,e,i,this.rst)}},hU=class extends rU{Vrt(t,e){const i={Zet:Fs.gA,Bst:e,Utt:e.Utt,ma:t.ma};return super.P3(i)}Fst(t,e){return(new EF).Fst(t,this.Hst,e,!1,this.rst)}};var aU=class{MV(t){return this.D7.MV(t)}FV(t){return this.D7.FV(t)}constructor(t){this.D7=t}},ku=class{MV(t){return!0}FV(t){return Promise.resolve(void 0)}},uU=class extends nu{pa(){return new cU(this.Jf.map((t=>t.ma)))}constructor(t,e){super(Bs.Mf),this.Jf=t||[],this.Ht=e}},cU=class extends Ci{constructor(t){super("targetqualitychanged"),this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}},lU=class extends jt{pa(){return new dU(this.quality.ma)}constructor(t){super(Bs.QUALITY_UNAVAILABLE),this.quality=t}},dU=class extends Ir{constructor(t){super("qualityunavailable"),this.quality=t}},fU=class extends Ci{constructor(){super(Bs.NO_QUALITY)}};function ti(t){return{wB:t.wB,C5:t.t7,Ci:_U(t)?t.Ci:0,l_:_U(t)?Fs.Rm:Fs.Cm,Ti:_U(t)?t.Ti:0}}function _U(t){const e=t;return void 0!==e.Ci&&void 0!==e.Ti}var vU=0,gU=class extends d{get Zf(){return this.hit.zrt.map(mU).filter(it)}Xrt(t){for(const e of t)e.kn("update",this.Grt),this.UA.HA(e)}Qrt(t){if(!this.UA.qA(t))return;t.oE();const e=this.Krt();if(this.jrt&&Yi(this.jrt,t)){const t=this.jrt.filter((t=>t.s9));0===t.length&&e.length>0?this.$f=e:this.$f=t}else this.$f=e;this.To(new lU(t))}Krt(){const t=[];for(const e of this.UA.Ff)e.s9&&t.push(e);return t}get jf(){return this.Yrt}Zrt(t){this.Yrt=t.Net,this.To(t)}get Bst(){return this.hit}get Ot(){return this.We}set Ot(t){this.jA(t)}get ma(){return this.vf||(this.vf=ni(this)),this.vf}get Jrt(){return this.$rt}set Jrt(t){this.$rt=t}get o(){return this.XA}get Yf(){return this.GA}get Lt(){return this.yY}get gs(){return this.uR}get jh(){return this.QA}set jh(t){t!==this.QA&&(this.QA=t,this.To(new cr(this)))}get h_(){return this.Ot?"enabled":"disabled"}get $f(){return this.jrt}set $f(t){let e=[];if(t){const i=(null!=t?t:[]).filter((t=>{const e=this.jf?ti(this.jf):void 0;return f.Zs.E5(e,ti(t))}));if(0===i.length)return;e=i.filter((t=>t.s9))}else e=this.Krt();0===e.length&&this.To(new fU),this.jrt=t&&this.UA.qA(t)?t:void 0,this.tot=this.eot(this.jrt),this.To(new uU(t,this))}get iot(){return this.tot}eot(t){if(!t||0===t.length)return;const e=[];for(const i of this.Utt)for(const s of t)s===i.Net&&s.s9&&e.push(i);return e}get Jf(){return this.UA}get Utt(){return this.rot}oot(t){this.hot.push(t),this.rot.push(...t.Utt);const e=t.Utt.map((t=>t.Net));this.Xrt(e)}get Zet(){return this.aot}get uot(){return this.hot}jA(t){this.We=t,this.$rt&&(t?this.$rt.rE(this):this.$rt.oE(this))}cot(t){this.We=t,this.lot!==t&&(this.lot=t,this.To(new Ys(this)))}bn(){for(const t of this.UA.Ff)t.pn("update",this.Grt);this.UA.ir()}constructor(t,e,i="alternative"){super(),this.Yrt=void 0,this.We=!1,this.vf=void 0,this.$rt=void 0,this.XA="",this.lot=!1,this.UA=new yh,this.rot=[],this.jrt=void 0,this.tot=void 0,this.Grt=()=>this.To(new cr(this)),this.hot=[],this.hit=t,this.XA=String(vU++),this.GA=ws(),this.yY=i,this.uR=t.t2,this.QA=t.jh,this.aot=t.l_,this.rot=t.Utt,this.Xrt(e)}};function mU(t){if("urn:mpeg:dash:role:2011"===t.i7)return wU(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.i7){if("1"===t.Qy)return we.e_;if("2"===t.Qy)return we.s_}}function wU(t){if(void 0!==(null==t?void 0:t.Qy))switch(t.Qy){case"caption":return we.t_;case"sign":return we.i_;case"description":return we.e_;case"enhanced-audio-intelligibility":return we.s_;default:return}}var Gs,pU,yU=class extends YL{get LB(){const t=this.kJ.zl;return this.Wst.CM(t,.01)}get dot(){return this.ktt&&this.fot[this.ktt.Yf]?this.fot[this.ktt.Yf]:ri.BM()}get _ot(){return this.ktt&&this.vot[this.ktt.Yf]?this.vot[this.ktt.Yf]:ri.BM()}get Xst(){return new ri([0,1/0])}get Fl(){return this.dot}get oz(){return this.got?this.got.Get.oz.Gst:ri.BM()}get Wst(){return mu(this.Fl,this.oz).vM(2*this.mot)}get Tn(){return this.Itt?this.Itt.Ant.Tn:NaN}get An(){return this.Itt?this.Itt.Ant.An:NaN}get jl(){const t=this.An;return!!t&&this.kJ.zl>=t}get mot(){var t;const e=this.Ltt();if(!e)return.04;var i;return 1/(null!=(i=this.ktt&&(null==e||null==(t=e.wot)?void 0:t.Lb()))?i:25)}get Ci(){return this.ER}get RK(){return Fs.gA}get pd(){return this.UM}set pd(t){this.UM=t}get bd(){return this._ot}get Rd(){if(!this.ktt)return ri.DM(0);const t=this.Mtt(this.ktt),e=null==t?void 0:t.pot,i=null==t?void 0:t.yot;if(void 0===i||void 0===e)return ri.DM(0);const s=b.max(e,this.kJ.zl);return new ri([i,s]).cM()}get Ti(){return this.SR}PK(){}zst(){return this.Wst.br(this.An)}async ert(t,e,i,s){const n=t.l_===wt.xV?t.Xm.Ttt:await t.Xm.bN(s),r=this.findTrackForRepresentation(i),o=this.fot[r.Yf],h=e.ob,a=e.hb,u=new ri([h,a]);o||(this.fot[r.Yf]=ri.BM(),this.vot[r.Yf]=ri.BM()),this.L7(s);const c=this.X7(new S(n),e,i,r);for(const t of c)r.XE(t);return this.fot[r.Yf]=this.fot[r.Yf].gM(u),{Rrt:h,Crt:a}}L7(t){const e=pP(this.kJ.zl,void 0,void 0,this.Fl,this.XM.rq,this.XM.ZW);for(const[i,s]of e)Ui(this.nrt(i,s,t))}z7(t,e,i){return this.Aot.z7(t,e,i)}X7(t,e,i,s){return this.Aot.X7(t,e,i,s)}nrt(t,e,i){const s=t,n=e;let r=new ri([t,e]);for(const t of this.Z.Ff){const e=[];for(const i of t.L.Ff)i.ob>=s&&i.hb<=n?e.push(i):r=r.wM(new ri([i.ob,i.hb]));for(const i of e)t.$S(i);const i=this.fot[t.Yf];i&&(this.fot[t.Yf]=i.wM(r))}return Promise.resolve()}lz(t,e){}fz(t,e){}cq(){return!1}rE(t){if(super.rE(t),this.Aot.ir(),this.got&&(this.got.bn(),this.got=void 0),this.ktt){const t=this.Mtt(this.ktt);this.got=new hU(this,this.kJ,this.kJ,this.qE,this.XM,!1,this.rst,void 0,void 0,new ku,Og).Vrt(this.ktt,t),this.got.kn(lt.aa,this.bot),this.got.Tn(Xh.qtt)}}oE(t){this.ktt===t&&(super.oE(t),this.got&&(this.got.bn(),this.got=void 0))}xtt(t){const e=function(t){const e=t.Utt&&t.Utt.length>0&&t.Utt[0],i=e&&tp(e.t7),s=tp(t.t7),n=t.uU===bu.APPLICATION_TTML_XML;return i||s||n?nt.TTML:t.uU===bu.TEXT_VTT||np(t.uU,t.t7)?nt.WEBVTT:nt.DEFAULT}(t);if(!e)throw new v("Unknown TextTrack type for Representation");const i=t.Tot.concat(t.zrt);return this.Sot(function(t){return Yi(t.filter((t=>"urn:mpeg:dash:role:2011"===t.i7)).map((t=>t.Qy)).filter(it),"caption")?K.HS:K.xm}(i),t.jh,t.t2,!1,e,t,function(t){return t.filter((t=>"urn:mpeg:dash:role:2011"===t.i7)).some((t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.Qy)))}(t.Tot),t.zrt.map(wU).filter(it))}async ir(){await super.ir(),this.got&&(await this.got.ir(Xh.let),this.got.pn(lt.aa,this.bot),this.got=void 0),this.Itt=void 0,this.fot={},this.vot={}}Eot(){this.fot={},this.vot={}}findTrackForRepresentation(t){for(const e of this.Z.Ff){const i=this.Mtt(e);if(i&&YL.Ftt(i)===t)return e}}constructor(t,e,i,s,n){super(),this.ER=0,this.UM=1,this.got=void 0,this.fot={},this.vot={},this.SR=0,this.bot=t=>{0},this.kJ=t,this.qE=e,this.XM=i,this.Aot=s,this.rst=n}},AU=class extends yU{Sot(t,e,i,s,n,r,o,h){var a;const u=r.Utt.reduce(((t,e)=>t||e.o),void 0);var c;const l=null!=(c=null!=u?u:null==(a=r.o)?void 0:a.toString())?c:"";return this.HE.UE(t,l,e,i,s,n,o,h)}bn(){for(const t of this.Z.Ff)this.HE.QE(t);return super.bn()}constructor(t,e,i,s,n,r){super(t,e,i,s,n),this.HE=r}},bU=class{get nt(){return this.xu}async WE(t){if(t.l_!==Fs.gA)return;const e=function(t,e){return tp(e)||t===bu.APPLICATION_TTML_XML||t===bu.TEXT_VTT?new GL:np(t,e)?new KL:void 0}(t.uU,t.t7);if(e){const i=this.kot(e);return this.Pot(i),await i.Rn(t),i}}kot(t){return new AU(this.kJ,this.qE,this.XM,t,this.rst,this.HE)}Pot(t){this.Iot.push(t),this.xu.PB(t.Z)}async ir(){for(const t of this.Iot.slice())await t.ir();wr(this.Iot),this.xu.ir()}async bn(){for(const t of this.Iot)await t.bn();wr(this.Iot),this.xu.bn()}constructor(t,e,i,s,n){this.Iot=[],this.xu=new Vo([]),this.kJ=t,this.qE=e,this.XM=i,this.rst=s,this.HE=n}},T=class extends Ci{constructor(t){super(r.Q_),this.error=t}};!function(t){t.nD="static",t.rD="dynamic"}(Gs||(Gs={})),(pU||(pU={})).Rot="Cot";var TU=class extends Ci{constructor(){super(pU.Rot)}},SU=[lt.aa,r.ov,r.hv,r.fv,r.P_],EU=0;var Dt,Pa,kU,_=class extends Ci{constructor(t,e){super(r.J_),this.representation=t,this.previousRepresentation=e}};function PU(t,e,i){return i===Dt.xot?i:e!==Pa.Dot&&e!==Pa.Not||i!==Dt.Bot&&i!==Dt.Oot?t?e===Pa.Mot?Dt.Lot:e===Pa.Fot?Dt.Uot:Dt.xot:Dt.Hot:Dt.Oot}function IU(t,e,i,s){const n={byte:i};let r=Dt.Bot;const o=[],h=31&kt(e,n,s);n.byte+=1;for(let i=0;i<h;i+=1){const h=kt(e,n,s),a=4&h,u=3&h;r=PU(Boolean(a),u,r);const c=kt(e,n,s),l=kt(e,n,s);o.push({Wot:t,Ny:-1,qot:!i,Vot:Boolean(a),l_:u,zot:r,Xot:c,Got:l})}return o}function RU(t,e,i){const s=kt(t,e,i);if(!j(s))return String.fromCharCode(s)}function CU(t){const e=t.SG,i={byte:t.bG},s=t.TG,n=kt(e,i,s);if(255===n&&(i.byte+=1),181!==n)return;const r=NI(e,i);if(47!==r&&49!==r)return;if(49===r){const t=function(t,e,i){let s="",n=i;for(;n>0;)n-=1,s+=RU(t,e);return s}(e,i,4);if("GA94"!==t)return}if(3!==kt(e,i,s))return;47===r&&(i.byte+=1);const o=t;return o.Qot=i.byte,o}function xU(t){return 4===t.yG}function DU(t){const e=t.filter(xU).map(CU).filter(it),i=[];for(const t of e)i.push(...IU(t.pG,t.SG,t.Qot,t.TG));return i}!function(t){t[t.xot=0]="xot",t[t.Bot=1]="Bot",t[t.Oot=2]="Oot",t[t.Uot=3]="Uot",t[t.Lot=4]="Lot",t[t.Hot=5]="Hot"}(Dt||(Dt={})),function(t){t[t.Dot=0]="Dot",t[t.Not=1]="Not",t[t.Mot=2]="Mot",t[t.Fot=3]="Fot"}(Pa||(Pa={})),function(t){t[t.Kot=47]="Kot",t[t.jot=49]="jot"}(kU||(kU={}));var NU="und";function BU(t){if("und"===t)return;const e=t.toLowerCase();for(const t of OU)if(t[1]===e||t[2]===e||t["2T"]===e||t["2B"]===e||t[3]===e)return t}var OU=[{l:"Abkhaz",dh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",dh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",dh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",dh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",dh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",dh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",dh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",dh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",dh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",dh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",dh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",dh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",dh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",dh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",dh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",dh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",dh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",dh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",dh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",dh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",dh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",dh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",dh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",dh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",dh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",dh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",dh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",dh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",dh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",dh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",dh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",dh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",dh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",dh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",dh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",dh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",dh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",dh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",dh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",dh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",dh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",dh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",dh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",dh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",dh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",dh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",dh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",dh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",dh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",dh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",dh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",dh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",dh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",dh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",dh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",dh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",dh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",dh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",dh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",dh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",dh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",dh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",dh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",dh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",dh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",dh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",dh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",dh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",dh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",dh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",dh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",dh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",dh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",dh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",dh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",dh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",dh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",dh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",dh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",dh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",dh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",dh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",dh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",dh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",dh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",dh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",dh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",dh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",dh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",dh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",dh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",dh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",dh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",dh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",dh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",dh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",dh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",dh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",dh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",dh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",dh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",dh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",dh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",dh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",dh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",dh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",dh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",dh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",dh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",dh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",dh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",dh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",dh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",dh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",dh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",dh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",dh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",dh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",dh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",dh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",dh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",dh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",dh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",dh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",dh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",dh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",dh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",dh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",dh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",dh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",dh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",dh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",dh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",dh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",dh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",dh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",dh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",dh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",dh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",dh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",dh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",dh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",dh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",dh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",dh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",dh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",dh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",dh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",dh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",dh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",dh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",dh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",dh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",dh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",dh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",dh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",dh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",dh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",dh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",dh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",dh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",dh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",dh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",dh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",dh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",dh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",dh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",dh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",dh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",dh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",dh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",dh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",dh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",dh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",dh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",dh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",dh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",dh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",dh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",dh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",dh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",dh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",dh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",dh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];function MU(t){var e;const i=null!=(e=function(t){const e=t.YX,i=new pn;return i.lG(e,0,e.byteLength),VI(i).HG}(t))?e:24;return t.Yot/i}function LU(t){return t.l_===E_.lm}var FU;function UU(t,e,i,s,n){const r=function(t,e,i,s){const n=i.Yot,r=rt.fromNumber(t.Xy||0),o=s.HA(Bh.Jb(r,n));return{Zot:s.Lb(),Jot:s,$ot:o,tht:s}}(t,0,i,s),o=Bh.$b(t.ct||0,i.Yot),h=t.Sw||0,a=!(65536&h)&&1!==(h>>24&3);let u;const c=wa(n),l=new ds;for(;l.Om<c.byteLength;){const t=to(c,l);if((31&Zh(c,l,1))===BI.xG){const e=new pn;e.lG(n,l.Om-1,l.Om+t-1);const i=new qI(e),s=LI(r.$ot,i);u=u||[],u.push(...DU(s))}l.Mm(t-1)}return no({},r,{ct:o.Lb(),eht:o,iht:r.$ot.Lb(),sht:r.Zot,nht:a,rht:u,oht:!1,hht:!1})}function HU(t){return{tp:t.mw.tp,Yot:t.Yw.mw.zw}}function WU(t){return t.l_===E_.Ig}!function(t){t[t.SAMPLE_DEPENDS_ON_UNKNOWN=0]="SAMPLE_DEPENDS_ON_UNKNOWN",t[t.SAMPLE_DEPENDS_ON_OTHERS=1]="SAMPLE_DEPENDS_ON_OTHERS",t[t.SAMPLE_DEPENDS_ON_NO_OTHER=2]="SAMPLE_DEPENDS_ON_NO_OTHER",t[t.SAMPLE_DEPENDS_ON_RESERVED=3]="SAMPLE_DEPENDS_ON_RESERVED"}(FU||(FU={}));var qU=class{kb(t){return this.u2===t.u2&&this.Y1===t.Y1}constructor(t,e){this.u2=t,this.Y1=e}},VU=class{get P2(){return this.aht}get A2(){return[this]}get S2(){return this.SV}get i2(){return this.uht}get o2(){return new qU(this.i2.u2,this.i2.Y1+this.P2.length-1)}cht(t){this.aht+=t}lht(t){for(const e of t)this.cht(e)}constructor(t,e){this.SV=t,this.uht=e,this.aht=""}};function zU(t,e){return t===e||t.P2===e.P2&&t.i2.kb(e.i2)&&qi(t.S2,e.S2)}function XU(t,e){return t===e||t.i2.kb(e.i2)&&t.o2.kb(e.o2)&&Bn(t.A2,e.A2,zU)}var C=class extends No{Pb(t){return Bn(this.R,t.R,XU)}constructor(t,e,i){super(t,e,i,!1)}},GU=class{dht(t){return t.ZT(this)}fht(t){return ls(t,((t,e)=>t.ZT(this,e)))}_ht(t,e){return new QU(t,e).vht()}},QU=class{vht(){if(this.ght)return[];for(let t=0;t<this.u2.length;t++)this.mht(t);return this.wht(),this.pht}yht(t){this.Aht=new VU(oD,new qU(this.bht,t))}wht(){this.Aht&&(this.pht.push(this.Aht),this.Aht=null)}mht(t){const e=this.u2[t];KU(e)?this.Aht&&this.wht():(this.Aht||this.yht(t),this.Aht.cht(e))}get ght(){return this.u2.every(KU)}constructor(t,e){this.u2=t,this.bht=e,this.pht=[],this.Aht=null}};function KU(t){return null==t}var jU=class{static Tht(t,e,i){if(e>=i)return;const s=ls(t,((t,e)=>new QU(t.map((t=>t?t.Sht():null)),e).vht()));return 0!==s.length?new C(e,i,s):void 0}},YU="black",iu="white",ZU=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce(((t,e)=>(t[e[0]]=e[1],t)),{}),JU=class{Eht(t){for(let e=0;e<pr;e++)t&&(this.kht[e]=t.kht[e])}kb(t){for(let e=0;e<pr;e++)if(this.kht[e]!==t.kht[e])return!1;return!0}Pht(){for(let t=0;t<pr;t++)if(null!==this.kht[t])return!1;return!0}Iht(t){this.Rht!==t&&(this.Rht=t),this.Rht<0?this.Rht=0:this.Rht>pr&&(this.Rht=31)}Cht(t){const e=this.Rht+t;this.Iht(e)}xht(){this.Cht(-1),this.kht[this.Rht]=null}cht(t){t>=144&&this.xht();const e=function(t){return ZU[t]?String.fromCharCode(ZU[t]):String.fromCharCode(t)}(t);this.addParsedChar(e)}addParsedChar(t){this.Rht>=pr||(32===Number(t)?(this.kht[this.Rht]=this.Dht?"</i>":"<i>",this.Dht=!this.Dht):this.kht[this.Rht]=t,this.Cht(1))}Nht(t){for(let e=t;e<pr;e++)this.kht[e]=null}cI(){this.Nht(0),this.Rht=0}Bht(){this.Nht(this.Rht)}Oht(t,e){const i=this.kht;let s=null;for(let n=0;n<pr;n++){const r=i[n];null===r?s=null:(s||(s={Qh:n,Jh:t,Ti:0,Ci:1,kht:[[]]},e.push(s)),s.kht[0].push(r),s.Ti++)}}ZT(t,e){return t._ht(this.kht,e)}constructor(){this.kht=[],this.Rht=0;for(let t=0;t<pr;t++)this.kht.push(null);this.Dht=!1}};var Si,A=class{Mht(t,e){const i="CC"+(this.Lht<<1|this.Fht+1);if(t>=e)return null;const s=(new GU).fht(this.Uht.slice(1));return 0===s.length?null:{sb:new C(t,e,s),OH:i,Hht:this.Lht<<1|this.Fht+1}}ir(){this.Wht(),this.qht=1}Vht(){return this.qht}zht(t){this.qht=t}Iht(t){this.Uht[this.qht].Iht(t)}Cht(t){this.Uht[this.qht].Cht(t)}Xht(){return this.Ght}Qht(t){this.Ght=t}cht(t,e){if(e<32||e>127)return;let i="";switch(t){case 0:i=void 0!==eH[e]?eH[e]:String.fromCharCode(e);break;case 1:i=iH[e];break;case 2:this.Kht(),i=sH[e];break;case 3:this.Kht(),i=nH[e]}i&&this.Uht[this.qht].addParsedChar(i)}Kht(){this.Uht[this.qht].xht()}jht(t,e,i){if(t>=e)for(let s=i-1;s>=0;s--)this.Uht[t+s]=this.Uht[e+s];else for(let s=0;s<i;s++)this.Uht[t+s]=this.Uht[e+s]}Yht(t,e){for(let i=0;i<=e;i++)this.Uht[t+i]=new JU}Wht(){this.Yht(0,$U)}Zht(){this.qht=this.Ght>0?this.Ght:0,this.Wht()}Jht(t){this.$ht=t}eat(t){this.iat=t}sat(t){this.nat=t}rat(t){this.oat=t}constructor(t,e){this.Uht=new Array($U+1);for(let t=0;t<=$U;t++)this.Uht[t]=new JU;this.qht=1,this.Ght=0,this.Lht=t,this.Fht=e,this.$ht=!1,this.iat=!1,this.nat=iu,this.oat=YU,this.ir()}},$U=15;!function(t){t[t.aat=0]="aat",t[t.uat=1]="uat",t[t.dat=2]="dat",t[t.fat=3]="fat"}(Si||(Si={}));var tH,eH={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},iH={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},sH={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},nH={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"},rH=class{ir(){this._at=!0,this.vat=0,this.EY=0,this.gat=this.mat,this.wat=void 0,this.mat.ir(),this.pat.ir(),this.yat.ir()}Aat(t,e){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|e>>5&1]}bat(t,e){const i=this.Aat(t,e),s=(30&e)>>1;let n=iu,r=!1;s<7?n=uH[s]:7===s&&(r=!0);const o=1==(1&e);if(4===this.EY)return;const h=this.gat;if(3===this.EY&&i!==h.Vht()){const t=1+h.Vht()-h.Xht(),e=1+i-h.Xht();h.jht(e,t,h.Xht()),h.Yht(0,e-1),h.Yht(i+1,$U-i)}h.zht(i);const a=aD[t<<1&14|e>>5&1]-1;if(a<0)return;const u=function(t,e){const i=e>95?e-96:e-64;return{j1:hD[i].j1,K1:hD[i].K1,Y1:hD[i].Y1,u2:t}}(a,e);h.Iht(u.Y1),this.gat.Jht(o),this.gat.eat(r),this.gat.sat(n),this.gat.rat(YU)}Tat(t,e){this.gat.Jht(!1),this.gat.eat(!1),this.gat.sat(iu);const i=this.Sat(t,Si.aat," ".charCodeAt(0));let s=iu,n=!1;const r=1==(1&e);return s=uH[(14&e)>>1],"white_italics"===s&&(s="white",n=!0),this.gat.Jht(r),this.gat.eat(n),this.gat.sat(s),i}Sat(t,e,i){if(this.gat.cht(e,i),2===this.EY||3===this.EY){const e=this.Eat(this.gat,this.vat,t);return this.vat=t,e}return null}Eat(t,e,i){return this._at?null:2===this.EY||3===this.EY?t.Mht(i,i+10):t.Mht(e,i)}Pat(t,e){let i=YU;0==(7&t)&&(i=aH[(14&e)>>1]),this.gat.rat(i)}Iat(t){const e=oH,i=t.Rat,s=t.Cat;let n=null;switch(i){case e.RCL:this.xat();break;case e.BS:this.Dat();break;case e.AOD:case e.AON:case e.DER:break;case e.RU2:n=this.Nat(2,s);break;case e.RU3:n=this.Nat(3,s);break;case e.RU4:n=this.Nat(4,s);break;case e.FON:n=this.Bat(s);break;case e.RDC:this.Oat(s);break;case e.TR:this.Mat();break;case e.RTD:this.Lat();break;case e.EDM:n=this.Fat(s);break;case e.CR:n=this.Uat(s);break;case e.ENM:this.Hat();break;case e.EOC:n=this.Wat(s)}return n}Uat(t){const e=this.gat;if(3!==this.EY)return null;const i=this.Eat(e,this.vat,t),s=e.Vht()-e.Xht()+1;return e.jht(s-1,s,e.Xht()),e.Yht(0,s-1),e.Yht(e.Vht(),$U-e.Vht()),this.vat=t,i}Nat(t,e){this.gat=this.mat;const i=this.gat;let s=null;return 3!==this.EY&&4!==this.EY&&(s=this.Eat(i,this.vat,e),this.mat.Zht(),this.pat.Zht(),this._at=!1,i.zht($U)),this.EY=3,i.Qht(t),s}Bat(t){return this.Sat(t,Si.aat," ".charCodeAt(0))}Fat(t){const e=this.mat;let i=null;return 4!==this.EY&&(i=this.Eat(e,this.vat,t)),e.Wht(),this._at=!1,i}Oat(t){this.EY=2,this.gat=this.mat,this.gat.Qht(0),this.vat=t}Hat(){this.pat.Wht()}Wat(t){let e=null;4!==this.EY&&(e=this.Eat(this.mat,this.vat,t));const i=this.pat;return this.pat=this.mat,this.mat=i,this.xat(),this.vat=t,e}xat(){this.EY=1,this.gat=this.pat,this.gat.Qht(0)}Dat(){this.gat.Kht()}Mat(){this.yat.ir(),this._at=!1,this.Lat()}Lat(){this.gat=this.yat,this.EY=4}qat(t,e,i){return this.gat.cht(Si.aat,e),this.Sat(t,Si.aat,i)}Vat(t,e,i){const s=1&e?Si.fat:Si.dat;return this.Sat(t,s,i)}zat(t){const e=t.Xat,i=t.Rat,s=t.Cat;if(this.wat===(e<<8|i))return this.wat=void 0,null;if(this.wat=e<<8|i,this.Gat(e,i))this.bat(e,i);else{if(this.Qat(e,i))return this.Tat(s,i);if(this.Kat(e,i))this.Pat(e,i);else{if(this.jat(e,i))return this.Sat(s,Si.uat,i);if(this.Yat(e,i))return this.Vat(s,e,i);if(this.Zat(e,i))return this.Iat(t);this.isTabOffset(e)&&this.gat.Cht(i-32)}}return null}isTabOffset(t){return 23===t||31===t}Zat(t,e){return 20==(246&t)&&32==(240&e)}Gat(t,e){return 16==(240&t)&&64==(192&e)}Qat(t,e){return 17==(247&t)&&32==(240&e)}Kat(t,e){return 16==(247&t)&&32==(240&e)||23==(247&t)&&45==(255&e)}jat(t,e){return 17==(247&t)&&48==(240&e)}Yat(t,e){return 18==(246&t)&&32==(224&e)}static Jat(t){return 16==(112&t)}constructor(t,e){this.EY=0,this.yat=new A(t,e),this.mat=new A(t,e),this.pat=new A(t,e),this.gat=this.mat,this.vat=0,this.wat=void 0,this._at=!1}},oH={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47};!function(t){t[t.KO=0]="KO",t[t.$at=1]="$at",t[t.tut=2]="tut",t[t.eut=3]="eut",t[t.gA=4]="gA"}(tH||(tH={}));var hH,aH=["black","green","blue","cyan","red","yellow","magenta","black"],uH=["white","green","blue","cyan","red","yellow","magenta","white_italics"],cH=class{Sht(){return this.iut}sut(){return this.$ht}nut(){return this.iat}rut(){return this.oat}out(){return this.nat}constructor(t,e,i,s,n){this.iut=t,this.$ht=e,this.iat=i,this.oat=s,this.nat=n}},lH=class{hut(t,e,i,s,n,r,o){this.iM=t,this.aut=e,this.uut=i,this.cut=s,this.lut=n,this.fut=r,this._ut=o}vut(){this.gut=[];for(let t=0;t<fH;t++)this.gut.push(this.mut())}mut(){const t=[];for(let e=0;e<dH;e++)t.push(null);return t}wut(t){this.yut()&&(this.gut[this.qht][this.Aut]=new cH(t,this.$ht,this.iat,this.oat,this.nat),this.Aut++)}but(){this.yut()&&(this.Aut<=0&&this.qht<=0||(this.Aut<=0?(this.Aut=this._ut-1,this.qht--):this.Aut--,this.gut[this.qht][this.Aut]=null))}yut(){const t=this.qht<this.fut&&this.qht>=0,e=this.Aut<this._ut&&this.Aut>=0;return t&&e}Tut(){return this.iM}Sut(t){let e=0;for(let i=t;i<fH;i++,e++)this.gut[e]=this.gut[i];for(let i=0;i<t;i++,e++)this.gut[e]=this.mut()}Eut(){if(this.qht+1>=this.fut)return this.Sut(1),void(this.Aut=0);this.qht++,this.Aut=0}kut(){this.gut[this.qht]=this.mut(),this.Aut=0}Mht(t,e){if(this.pb>=t)return null;const i=jU.Tht(this.gut,this.pb,t);return i?(this.Put(t),{sb:i,OH:"svc"+e,Hht:e}):null}Iut(t,e){this.qht=t,this.Aut=e}Rut(t){this.oat=t}Cut(t){this.nat=t}xut(t){this.$ht=t}Dut(t){this.iat=t}Nut(){this.qht=0,this.Aut=0,this.$ht=!1,this.iat=!1,this.nat=iu,this.oat=YU}But(t){this.Out=t}Mut(){this.iM=!0}we(){this.iM=!1}Sh(){this.iM=!this.iM}Put(t){this.pb=t}constructor(t){this.Lut=t,this.iM=!1,this.lut=!1,this.uut=0,this.aut=0,this.cut=0,this.fut=0,this._ut=0,this.Out=2,this.gut=[],this.pb=0,this.qht=0,this.Aut=0,this.iat=!1,this.$ht=!1,this.nat=iu,this.oat=YU,this.vut()}};!function(t){t[t.Fut=0]="Fut",t[t.Uut=1]="Uut",t[t.Hut=2]="Hut",t[t.Wut=3]="Wut"}(hH||(hH={}));var dH=42,fH=15,_H=class{qut(t){const e=t.Vut();let i=e.Qy;const s=e.Cat;if(i===pH){i=i<<16|t.Vut().Qy}return i>=0&&i<=31?this.zut(i,s):i>=128&&i<=159?this.Xut(t,i,s):(i>=4096&&i<=4127?this.Gut(t,255&i):i>=4224&&i<=4255?this.Qut(t,255&i):i>=32&&i<=127?this.Kut(i):i>=160&&i<=255?this.jut(i):i>=4128&&i<=4223?this.Yut(255&i):i>=4256&&i<=4351&&this.Zut(255&i),null)}Kut(t){this.Jut&&(127!==t?this.Jut.wut(String.fromCharCode(t)):this.Jut.wut("\u266a"))}jut(t){this.Jut&&this.Jut.wut(String.fromCharCode(t))}Yut(t){if(!this.Jut)return;if(void 0===yH[t])return void this.Jut.wut("_");const e=yH[t];this.Jut.wut(e)}Zut(t){this.Jut&&(160===t?this.Jut.wut("[CC]"):this.Jut.wut("_"))}zut(t,e){if(!this.Jut)return null;const i=this.Jut;let s=null;switch(t){case vH:i.but();break;case mH:i.Tut()&&(s=i.Mht(e,this.$ut)),i.Eut();break;case wH:i.Tut()&&(s=i.Mht(e,this.$ut)),i.kut();break;case gH:i.Tut()&&(s=i.Mht(e,this.$ut)),i.vut(),i.Iut(0,0)}return s}Xut(t,e,i){if(e>=128&&e<=135){const t=7&e;this.tct(t)}else{if(136===e){const e=t.Vut().Qy;return this.ect(e,i)}if(137===e){const e=t.Vut().Qy;this.ict(e,i)}else{if(138===e){const e=t.Vut().Qy;return this.sct(e,i)}if(139===e){const e=t.Vut().Qy;return this.nct(e,i)}if(140===e){const e=t.Vut().Qy;return this.rct(e,i)}if(143===e)return this.ir(i);if(144===e)this.hct(t);else if(145===e)this.act(t);else if(146===e)this.Iut(t);else if(151===e)this.uct(t);else if(e>=152&&e<=159){const s=(15&e)-8;this.hut(t,s,i)}}}return null}Gut(t,e){e>=8&&e<=15?t.nw(1):e>=16&&e<=23?t.nw(2):e>=24&&e<=31&&t.nw(3)}Qut(t,e){e>=128&&e<=135?t.nw(4):e>=136&&e<=143&&t.nw(5)}tct(t){this.cct[t]&&(this.Jut=this.cct[t])}*lct(t){for(let e=0;e<8;e++){1==(1&t)&&this.cct[e]&&(yield e),t>>=1}}ect(t,e){let i=null;for(const s of this.lct(t)){const t=this.cct[s];t.Tut()&&(i=t.Mht(e,this.$ut)),t.vut()}return i}ict(t,e){for(const i of this.lct(t)){const t=this.cct[i];t.Tut()||t.Put(e),t.Mut()}}sct(t,e){let i=null;for(const s of this.lct(t)){const t=this.cct[s];t.Tut()&&(i=t.Mht(e,this.$ut)),t.we()}return i}nct(t,e){let i=null;for(const s of this.lct(t)){const t=this.cct[s];t.Tut()?i=t.Mht(e,this.$ut):t.Put(e),t.Sh()}return i}rct(t,e){let i=null;for(const s of this.lct(t)){const t=this.cct[s];t.Tut()&&(i=t.Mht(e,this.$ut)),this.cct[s]=void 0}return i}ir(t){const e=this.rct(255,t);return this.cI(),e}cI(){this.Jut=void 0,this.cct=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}hct(t){t.nw(1);const e=t.Vut().Qy;if(!this.Jut)return;const i=(128&e)>0,s=(64&e)>0;this.Jut.Dut(i),this.Jut.xut(s)}act(t){const e=t.Vut().Qy,i=t.Vut().Qy;if(t.nw(1),!this.Jut)return;const s=3&e,n=(12&e)>>2,r=(48&e)>>4,o=3&i,h=(12&i)>>2,a=(48&i)>>4,u=this.dct(r,n,s),c=this.dct(a,h,o);this.Jut.Cut(u),this.Jut.Rut(c)}Iut(t){const e=t.Vut().Qy,i=t.Vut().Qy;if(!this.Jut)return;const s=15&e,n=63&i;this.Jut.Iut(s,n)}uct(t){t.nw(1),t.nw(1);const e=t.Vut().Qy;if(t.nw(1),!this.Jut)return;const i=3&e;this.Jut.But(i)}hut(t,e,i){const s=void 0!==this.cct[e];if(!s){const t=new lH(e);t.Put(i),this.cct[e]=t}const n=t.Vut().Qy,r=t.Vut().Qy,o=t.Vut().Qy,h=t.Vut().Qy,a=t.Vut().Qy,u=t.Vut().Qy,c=(32&n)>0,l=127&r,d=(128&r)>0,f=o,_=1+(15&h),v=(240&h)>>4,g=1+(63&a);s&&0===(7&u)||this.cct[e].Nut(),this.cct[e].hut(c,l,f,v,d,_,g),this.Jut=this.cct[e]}dct(t,e,i){const s={0:0,1:0,2:1,3:1};return AH[s[t]<<2|s[e]<<1|s[i]]}constructor(t){this.$ut=t,this.cct=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.Jut=void 0}},vH=8,gH=12,mH=13,wH=14,pH=16,yH={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},AH=["black","blue","green","cyan","red","magenta","yellow","white"],bH=class{fct(t){if(t.l_===Pa.Fot){const e=63&t.Qy;return this._ct=2*e-1,void(this.vct=[])}if(this.vct&&(this._ct>0&&(this.vct.push(t),this._ct--),0===this._ct)){const t=new TH(this.vct);this.gct.push(t),this.vct=null,this._ct=0}}mct(){return this.gct}wct(){this.gct=[]}cI(){this.gct=[],this.vct=[],this._ct=0}constructor(){this.gct=[],this.vct=null,this._ct=0}},TH=class{pct(){return this.yct<this.Act.length}bct(){return this.yct}Vut(){if(!this.pct())throw new io(Ot.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.Act[this.yct++]}nw(t){if(this.yct+t>this.Act.length)throw new io(Ot.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this.yct+=t}constructor(t){this.yct=0,this.Act=t}},SH=class{cI(){this.Tct=0,this.Sct=[],this.Ect=[],this.kct.cI(),this.ir(),this.Pct.forEach((t=>{t.cI()}))}ir(){this.Ict=0,this.Rct=0,this.Cct.forEach((t=>{t.ir()}))}xct(t,e){if(t.Vot){const i=t.Xot,s=t.Got,n=t.l_;n===Pa.Dot||n===Pa.Not?this.Sct.push({Cat:e,l_:n,Xat:i,Rat:s,Dct:this.Sct.length}):this.Nct&&(this.Ect.push({Cat:e,l_:n,Qy:i,Dct:this.Ect.length}),this.Ect.push({Cat:e,l_:Pa.Mot,Qy:s,Dct:this.Ect.length}))}}cF(){const t=[];this.Sct.sort(((t,e)=>t.Cat-e.Cat||t.Dct-e.Dct)),this.Ect.sort(((t,e)=>t.Cat-e.Cat||t.Dct-e.Dct));for(const e of this.Sct){const i=this.Bct(e);i&&t.push(i)}for(const t of this.Ect)this.kct.fct(t);const e=this.kct.mct();for(const i of e){const e=this.Oct(i);t.push(...e)}return this.kct.wct(),this.Sct=[],this.Ect=[],t}Bct(t){const e=t.l_;if(rH.Jat(t.Xat)){const i=t.Xat>>3&1;0===e?this.Ict=i:this.Rct=i}const i="CC"+(e<<1|(e?this.Rct:this.Ict)+1),s=this.Cct.get(i);return 255===t.Xat&&255===t.Rat||!t.Xat&&!t.Rat||!this.Mct(t.Xat)||!this.Mct(t.Rat)?(++this.Tct>=45&&this.ir(),null):(this.Tct=0,t.Xat&=127,t.Rat&=127,t.Xat||t.Rat?rH.Jat(t.Xat)?s.zat(t):s.qat(t.Cat,t.Xat,t.Rat):null)}Oct(t){const e=[];try{for(;t.pct();){const i=t.Vut().Qy;let s=(224&i)>>5;const n=31&i;if(7===s&&0!==n){s=63&t.Vut().Qy}if(0!==s){if(!this.Pct.has(s)){const t=new _H(s);this.Pct.set(s,t)}const i=this.Pct.get(s),r=t.bct();for(;t.bct()-r<n;){const s=i.qut(t);s&&e.push(s)}}}}catch(t){if(!(t instanceof io&&t.code===Ot.SUBTITLE_PARSE_ERROR))throw t}return e}Mct(t){let e=0;for(;t;)e^=1&t,t>>=1;return 1===e}constructor(){this.Nct=!1,this.Sct=[],this.Ect=[],this.kct=new bH,this.Tct=0,this.Cct=Qd({CC1:new rH(0,0),CC2:new rH(0,1),CC3:new rH(1,0),CC4:new rH(1,1)}),this.Ict=0,this.Rct=0,this.Pct=Re(),this.ir()}},EH=class extends Ci{constructor(t,e){super("Lct"),this.Hht=t,this.sb=e}},kH=Bh.UT(.1),PH=class extends d{Fct(t,e){this.Uct.xct(t,e)}cF(){const t=this.Uct.cF();for(const e of t)this.To(new EH(e.Hht,e.sb))}ir(){this.Uct.cI()}bn(){this.Lo(),this.Uct.cI()}constructor(){super(),this.Uct=new SH}},IH=class extends PH{Hct(t,e,i,s){const n=this.Wct(t,s);this.qct(n,e,i),this.cF()}Wct(t,e){const i=t.slice().sort(uD),s=this.Vct;if(0===s.length)return i;if(0===i.length)return s;let n;const r=s[0].Z1,o=s[s.length-1].Z1,h=i[0].Z1,a=s[0].Net===i[0].Net;if(o.Kb(h).Xb().zb(Bh.UT(2.5*e))&&a)n=s.concat(i).sort(uD);else if(h.Hb(r)){let t=0;for(;t<s.length&&s[t].Z1.zb(h);)t++;let e=!1,r=!1;for(let n=t,o=0;n<s.length&&o<i.length;n++,o++)RH(s[n],i[o])?e=!0:r=!0;const o=e&&!r,a=e&&r;!e&&r?n=s.concat(i).sort(uD):o?n=s.slice(0,t).concat(i):(n=i,a&&this.ir())}else n=i,this.ir();return n}qct(t,e,i){for(let s=0;s<t.length;s++){const n=t[s],r=n.Z1.Lb();if(!i&&e-r<kH.Lb())return void(this.Vct=t.slice(s));this.Fct(n,r)}this.Vct=[]}constructor(...t){super(...t),this.Vct=[]}};function RH(t,e){return t.Z1.kb(e.Z1)&&t.l_===e.l_&&t.Xot===e.Xot&&t.Got===e.Got}var CH=class extends cp{zct(t){return this.Xct.get(t)}Gct(t){let e=this.Xct.get(t.J1);return e||(e=this.Qct(t),this.Xct.set(t.J1,e)),e}Qct(t){const e=[we.t_],i=BU(t.t2);let s,n=i?i.l:"";t.Kct&&(n="easy "+n,e.push(we.n_)),s=t.jh?"CC "+t.jh:n?"CC "+n:"CC"+t.J1;const r=this.HE.UE(K.HS,s,s,t.t2,!1,nt.CEA608,void 0,e);return this.tt(r),r}z7(t){const e=hs.Ew(wa(t));this.jct=function(t){for(const e of t.Z){const t=HU(e),i=e.Yw.hp.lp.fp.vp;let s=Rt(i,(t=>t.l_===E_.Wg));if(!s){const t=i.filter((t=>t.l_===E_.um)),e=Rt(t,(t=>{var e;return(null==(e=t.oy)?void 0:e.l_)===E_.Wg}));e&&(s=e.oy)}if(!s)continue;const n=DI(wa(s.zp.Xm),new ds),r=s.Gp;return no({},t,{tp:e.mw.tp,zp:sr(s.zp.Xm),Ti:s.Ti,Ci:s.Ci,Ty:r&&r.Ty,by:r&&r.by,vQ:n.GX,Yct:n.QX,gQ:n.KX,YX:n.YX[0],ZX:n.ZX[0]})}}(Rt(e,WU))}ert(t,e,i,s,n,r){var o;if(!this.jct)return;if(!j(this.Zct)&&_e(this.Zct,e,1e-5))return;j(this.Jct)||_e(this.Jct,e,.1)||this.$ct.ir();const h=function(t,e,i,s,n){const r=[],o=e.filter(LU),h=s(i);for(const e of o){const s=Rt(e.Z,(t=>t.mw.tp===i.tp));if(!s)continue;const o=s.mw.Py||0,u=s.mw.Iy||0;let c=s.Fy?s.Fy.Fy:rt.ZERO;var a;const l=e.Dy+(null!=(a=s.mw.Uy)?a:rt.ZERO).toNumber();for(const a of s.Ly){let s=l+(a.Dy||0);for(const l of a.zy){const a=l.ww||u,d=new pn;d.lG(t,s,s+a);const f=Bh.Jb(c,i.Yot);d._S=n(l,e,i,f,Na(t,s,s+a)),r.push(d),s+=a,c=c.add(l.ct||o||h)}}}return r}(t,hs.Ew(wa(t)),this.jct,MU,UU);var a;const u=null!=(a=null==(o=zd(h,(t=>t._S.ct)))?void 0:o._S.ct)?a:0,c=function(t){const e=[];for(const i of t)i._S.rht&&e.push(...i._S.rht),delete i._S.rht;for(let t=0;t<e.length;t+=1)e[t].Ny=t;return e}(h),l=Bh.UT(s),d=[];for(const t of c)d.push(no({},t,{Net:n,Z1:t.Wot.HA(l)}));this.$ct.Hct(d,i,r,u),this.Zct=e,this.Jct=i}ir(){return this.$ct.ir(),this.Xct.forEach((t=>{t.bn(),this.it(t),this.HE.QE(t)})),this.Xct.clear(),this.jct=void 0,this.Zct=NaN,this.Jct=NaN,super.ir()}bn(){return this.$ct.pn("Lct",this.tlt),this.$ct.bn(),super.bn()}constructor(t){super(),this.jct=void 0,this.Zct=NaN,this.Jct=NaN,this.tlt=t=>{const e=this.Gct({J1:t.Hht,t2:""}),i=t.sb;for(const t of e.L.Ff)i.ob<t.ob&&i.hb>t.ob?i.hb=t.ob:i.ob>t.ob&&t.hb>i.ob?t.hb=i.ob:i.ob===t.ob&&(i.hb=t.hb);e.XE(i)},this.HE=t,this.Xct=Re(),this.$ct=new IH,this.$ct.kn("Lct",this.tlt)}},xH=/(.*)=(.*)/,DH=/(.*):(.*)/;function NH(t){if(!t)return[];const e=[],i=t.trim().split(";");for(const t of i){const i=t.match(xH);if(i){const[,t,s]=i;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(DH)){const[,e,i]=t.match(DH);switch(e){case"lang":n=i;break;case"er":r=Boolean(Number(i))}}e.push({J1:Number(t),t2:n,Kct:r})}}return e}var BH={1:1,2:3,3:2,4:4},OH="urn:scte:dash:cc:cea-608:2015",MH="urn:scte:dash:cc:cea-708:2015";var LH=class extends nu{pa(){return new FH(this.Net&&this.Net.ma)}constructor(t,e,i){super(Bs.Bf),this.Net=t,this.xst=e,this.elt=i}},FH=class extends Ci{constructor(t){super("activequalitychanged"),this.quality=t}},UH=[r.Ah,En.Rf,r.vv],HH=class extends d{ilt(t){const e=this.got.Get;for(const i of e.Ht.Utt)if(e.$st.jst(t,i))return i}bn(){this.Lo(),this.FB.pn(UH,this.slt)}constructor(t,e){super(),this.slt=t=>{const e=this.nlt,i=this.ilt(t.currentTime)||this.got.qet;i&&e!==i&&(this.nlt=i,i.Net&&this.To(new LH(i.Net,null==i?void 0:i.ma,null==e?void 0:e.ma)))},this.FB=t,this.FB.kn(UH,this.slt),this.got=e}},WH=class extends d{get ktt(){return this.Ptt}get o(){return this.XA}get RK(){return this.CK}get nt(){return this.rlt}get wot(){return function(t){const e=29.97,i=1024,s=44100;return t===Fs.Cm?s/i:e}(this.CK)}get mot(){return 1/this.wot}get Ot(){return Boolean(this.Ptt&&this.Ptt.Ot)}get oz(){const t=this.got?this.got.Get.oz.Gst:ri.BM();return this.olt().gM(t)}get Fl(){let t=this.hlt();const e=this.ult;return void 0!==e&&t.cM().br(e)&&(t=t.gM(ri.DM(e))),t}get Wst(){return mu(this.hlt(),this.oz.gM(this.clt)).vM(2*this.mot)}get clt(){const t=this.ult;if(t&&isFinite(t)){const e=this.llt.An;if(isFinite(e)&&t<e)return new ri([t,e],[!1,!0])}return ri.BM()}get Rd(){const t=this.Ptt;if(!t)return ri.DM(0);const e=t.Bst.pot,i=t.Bst.yot;if(void 0===i||void 0===e)return ri.DM(0);const s=i;let n=e>=t.Bst.Ant.An?b.max(e,this.An):e;return n=b.max(s,n),ri.NM(s,n).cM()}get LB(){return this.Wst.CM(this.zl)}get Xst(){return this.llt.Xst}get zl(){return this.FB.zl}get Tn(){return this.Ptt?this.Ptt.Bst.Ant.Tn:NaN}get An(){const t=this.dlt(),e=this.ult;return void 0===t?NaN:void 0!==e?e:t}dlt(){var t;return null==(t=this.Ptt)?void 0:t.Bst.Ant.An}get Ci(){return this.llt.Ci}get Ti(){return this.llt.Ti}get flt(){return this.ult}sit(){return void 0!==this.got&&this.got.sit}zst(){if(void 0===this.ult)return!1;const t=this.hlt().cM(),e=t.pM(this.ult);return!(e<0)&&t.Tn(e)!==this.ult}PK(){const t=this.llt.Xst,e=this.hlt().Cn(t);this.ult=e.V>0?e.An(e.V-1):0;const i=t.An(0);isFinite(i)&&this.ult<i&&this.lz(this.ult,i),this._lt()}async ert(t,e,i,s){const n=i.G7.rS,r=this.vlt(t,e,i,n,s),o=this.glt(t,e,i,n,s),[h]=await rf([o,r]);return h}async vlt(t,e,i,s,n){if(!q(i.uU))return;let r;if(t.l_===wt.cE){const e=t.Xm.ist(),i=await e.bN(n);r=new S(i)}else r=new S(t.Xm.Ttt);const o=[];if(void 0!==this.wlt&&(this.wlt.ert(r,e.ob,s),o.push(this.wlt)),void 0!==this.plt){const t=i.ynt(e);this.plt.ert(r,e.ob,e.hb,s,i.Net,t),o.push(this.plt)}up(this.Fl,o)}z7(t,e,i){return gi(i),this.plt&&this.plt.z7(new S(t.Ttt)),Promise.resolve()}Rn(t,e){const i=new Zs;e&&i.wl(e),this.GE.vl(),this.GE=i;const s=this.ylt(t,this.Alt,i.fl);return this.Alt=s,s}blt(t){if(Yi(this.Tlt,nt.CEA608))return;const e=t.Bst.zrt;if(function(t){return t.some((t=>t.i7===OH||t.i7===MH))}(e)){this.plt=new CH(this.HE);const t=function(t){const e=[];for(const i of t)if(i.i7===OH){const t=lD(i.Qy);for(const i of t)e.push(i)}else if(i.i7===MH){const t=NH(i.Qy);for(const i of t)if(i.J1<=4){const t=BH[i.J1];e.push(no({},i,{J1:t}))}}return e}(e);for(const e of t)this.plt.Gct(e);this.rlt.PB(this.plt.Z)}}async ylt(t,e,i){gi(i),e&&await e.catch($d),this.Ptt===t&&this.Slt||(await this.Elt(),gi(i),await this.klt(),gi(i),t&&await this.WE(t))}async Elt(){const t=this.Ptt;this.Ptt=void 0,this.Slt=!1,this.ult=void 0,t&&(t.pn(Bs.Mf,this.Plt),t.cot(!1),t.pn(Bs.NO_QUALITY,this.Rs)),this.Ilt&&(this.Ilt.bn(),this.Ilt=void 0),this.got&&(await this.got.bn(),this.got=void 0),this.plt&&(this.rlt.CB(this.plt.Z),await this.plt.bn())}async WE(t){this.Ptt=t,this.blt(t),t.kn(Bs.Mf,this.Plt),t.kn(Bs.NO_QUALITY,this.Rs),await this.Rlt(t),this.got=this.Clt(t),this.got.kn(SU,this.Rs),this.got.kn("Bet",this._lt),this.got.Ket=t.iot,this.Ilt=new HH(this.FB,this.got),this.Ilt.kn(Bs.Bf,this.Zrt),t.cot(!0),this.Slt=!0}async ir(t){this.GE.vl(),this.Alt&&(await this.Alt.catch($d),this.Alt=void 0),await this.Elt(),t||await this.klt(),await this.xlt()}async Dlt(){await this.Elt()}Nlt(t){this.got&&this.Ptt&&this.Ptt===t.Ht&&(this.got.Ket=this.Ptt.iot)}async uit(t){this.got&&await this.got.uit(t)}async dit(t){this.got&&await this.got.dit(t)}cq(){const t=this.Fl.xM;return this.XM.cq(t)}async bn(t){this.Lo();try{await this.ir(t),await this.Dlt()}catch(t){}}constructor(t,e,i,s,n,r,o,h,a,u,c){super(),this.Ptt=void 0,this.got=void 0,this.Slt=!1,this.GE=new Zs,this.Alt=void 0,this.ult=void 0,this.plt=void 0,this.rlt=new Vo([]),this._lt=()=>{!this.sit()&&this.zst()&&this.llt._lt()},this.Zrt=t=>{this.Ptt.Zrt(t),this.To(new _(t.xst,t.elt))},this.Plt=t=>{this.Nlt(t)},this.XA=function(){const t=EU;return EU+=1,t}(),this.CK=t,this.qE=s,this.XM=n,this.llt=e,this.FB=i,this.rst=r,this.HE=o,this.wlt=h,this.Qnt=a,this.Wnt=a?wg(t,a):void 0,this.yrt=u,this.Tlt=c}};function qH(t,e,i){const s=new Nh(wa(t),new ds),n=P._w(s,E_.Ig);if(!n)return;const r=P.aw(n.Xm),o=Rt(r,(t=>t.l_===E_.Cg)),h=Rt(r,(t=>t.l_===E_.ym));if(!o)return;const a=P._w(o.Xm,E_.Dg);if(!a)return;const u=P._w(a.Xm,E_.Og);if(!u)return;const c=P._w(u.Xm,E_.Mg);if(!c)return;const l=P.aw(c.Xm),d=Rt(l,(t=>t.l_===E_.Lg));if(!d)return;const f=P.bw(d.Xm,E_.Lg,!1),_=new Nh(wa(f.Xm),new ds);_.nw(4);const v=P.aw(_),g=[];for(const t of v){if(t.l_===E_.hm||t.l_===E_.um)return;t.l_===E_.Wg?g.push({Blt:t,Olt:E_.um}):t.l_===E_.Jg&&g.push({Blt:t,Olt:E_.hm})}if(!function(t,e){return void 0===t&&void 0!==e&&e.length>0}(h,e)&&0===g.length)return;let m=hh(t);const w=Rt(r,(t=>t.l_===E_.Ug)),p=w?P._w(w.Xm,E_.Hg):void 0,y=p?function(t){const e=t.Xm.Um();return e.nw(4),e.nw(4),e.jm()}(p):1,A=Rt(l,(t=>t.l_===E_.Fg));A&&function(t,e,i){const s=XH(wa(t),e),n=P.fw(s,new ds),r=n.Xm;r.nw(4);const o=r.jm();for(let t=0;t<o;t++){r.nw(4),r.nw(4);const t=r.Gm.Um(),e=r.jm();at(r.Xm,t,e+i)}}(m,A,g.length),p&&function(t,e,i){const s=XH(wa(t),e),n=P.fw(s,new ds),r=n.Xm;r.nw(4),r.nw(4),at(r.Xm,r.Gm,i)}(m,p,1),m=function(t,e,i,s){if(i||!s)return t;let n=t;for(const t of s)n=VH(n,e,new S(t));return n}(m,n,h,e);const b=[n,o,a,u,c,d];for(let t=g.length-1;t>=0;t--){const e=g[t];m=zH(m,e.Blt,d,b,e.Olt,i)}return{Mlt:m,Llt:{Flt:g.length,Ey:y}}}function VH(t,e,i){const s=J_(t,i,e.Xm.Xm.byteOffset+e.Xm.Xm.byteLength);return GH(XH(wa(s),e),i.byteLength),s}function zH(t,e,i,s,n,r){const o=function(t,e,i){0;const s=t.Xm.Xm,n=ZH(),r=new S(s.byteLength+n.byteLength),o=wa(r);r.set(fi(s),0),GH(o,n.byteLength),Bv(o,new ds(tW),e),r.set(n,s.byteLength),Bv(o,new ds(s.byteLength+JH),t.l_),i&&Pv(o,new ds(s.byteLength+$H),i);return r}(e,n,r),h=J_(t,o,e.Xm.Xm.byteOffset),a=wa(h);!function(t,e){const i=P.fw(t,new ds),s=P.bw(i.Xm,E_.Lg,!1),n=wa(s.Xm),r=n.getUint32(0);n.setUint32(0,r+e)}(XH(a,i),1);for(const t of s)GH(XH(a,t),o.byteLength);return h}function XH(t,e){const i=e.Xm.Xm.byteOffset;return et(t,i,i+e.Xm.Xm.byteLength)}function GH(t,e){const i=new ds,s=to(t,i);if(0===s);else if(1===s){i.Mm(4);const s=R(t,i.Um());Cv(t,i,s.add(e))}else i.Fm(0),at(t,i,s+e)}var QH=class extends Jn{start(t){this.cV=t}transform(t){this.Lz(t),this.Ult()}flush(){this.Uz(),this.Ult()}Kz(t){return t===E_.lm}Yz(t){let e=hh(fi(t.Xm.Xm));const i=P.fw(wa(e),new ds);e=KH(e,i,this.Hlt),this.Wlt.push(e)}Jz(t){this.Wlt.push(t)}Ult(){for(const t of function(t){if(t.length<2)return t;const e=[];let{buffer:i,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const o=t[r];i===o.buffer&&s+n===o.byteOffset?n+=o.byteLength:(e.push(new S(i,s,n)),({buffer:i,byteOffset:s,byteLength:n}=o))}return e.push(new S(i,s,n)),e}(this.Wlt))this.cV.enqueue(t);wr(this.Wlt)}constructor(t){super(),this.Wlt=[],this.Hlt=t}};function KH(t,e,i){let s=t;const n=P.aw(e.Xm);for(let t=n.length-1;t>=0;t--){const r=n[t];r.l_===E_.fm&&(s=jH(s,r,e,i))}return s}function jH(t,e,i,s){const n=XH(wa(t),e),r=P.fw(n,new ds),o=P.aw(r.Xm),h=Rt(o,(t=>t.l_===E_._m));if(!h)return t;const a=h.Xm,u=a.Gm.Um(),c=a.jm(),{flags:l}=pt(c);a.nw(4),l.Wm(Ha.BASE_DATA_OFFSET_PRESENT)&&a.nw(8);const d=a.Gm.Um();if(l.Wm(Ha.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const e=to(a.Xm,d);return at(a.Xm,a.Gm,e+s.Flt),t}{at(a.Xm,u,c|Ha.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new S(4);wa(n).setUint32(0,s.Ey+s.Flt);const r=a.Xm.byteOffset+d.Om;for(const t of o.filter((t=>t.l_===E_.vm)))YH(t,n.byteLength);for(const s of[h,e,i])GH(XH(wa(t),s),n.byteLength);return J_(t,n,r)}}function YH(t,e){const i=t.Xm,s=i.jm(),{flags:n}=pt(s);if(i.nw(4),n.Wm(J.DATA_OFFSET_PRESENT)){const t=i.Um().jm();at(i.Xm,i.Gm,t+e)}}var Kt,ZH=Rr((()=>new S([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),JH=16,$H=64,tW=4,eW=class extends WH{hlt(){return this.D7?this.D7.Fl:ri.BM()}olt(){return this.D7?this.D7.xK:ri.BM()}get Ti(){return this.llt.Ti}async glt(t,e,i,s,n){var r;let o;if(gi(n),t.l_===wt.cE){let e=t.Xm.OH;this.qlt&&(e=function(t,e){return t.pipeThrough(new Da(new QH(e)))}(e,this.qlt)),o={l_:wt.cE,Xm:e}}else{let e=new S(t.Xm.Ttt);this.qlt&&(e=function(t,e){let i=hh(t);const s=new Nh(wa(i),new ds),n=P.aw(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.l_===E_.lm&&(i=KH(i,s,e))}return i}(e,this.qlt)),o={l_:wt.xV,Xm:e}}const h={S3:e.ob,ct:e.ct,rS:s,gQ:null==(r=i.Net)?void 0:r.Yf},a=this.D7.Fl;await this.Vlt(),await this.D7.WQ(o,h,n);return function(t,e,i,s){let n,r,o=e.wM(t.cM());return o=o.wM(i.wM(e)),0===o.V?(n=s.hb,r=n):(n=o.Tn(0),r=o.An(0)),{Rrt:n,Crt:r}}(a,this.D7.Fl,this.D7.xK,e)}async z7(t,e,i){var s;await super.z7(t,e,i);let n=new S(t.Ttt);if(this.zlt(e)){const t=this.llt.Xlt;let e,i=[];t&&(i=ls(t.Glt,(t=>t.SB)),e=t.Qlt.jD?ak(t.Qlt.jD):void 0);const s=qH(n,i,e);s?(this.qlt=s.Llt,n=s.Mlt):this.qlt=void 0}const r={l_:wt.xV,Xm:n};await this.Vlt(),await this.D7.zQ(r,{gQ:null==(s=e.Net)?void 0:s.Yf},i)}nrt(t,e,i){return this.D7.WA(t,e,i)}lz(t,e){this.D7.BK(t,e)}fz(t,e){this.D7.MK(t,e)}async Rlt(t){var e;const i=fu.Znt(null!=(e=t.iot)?e:t.Utt,this.Wnt).uU;this.D7||(this.D7=this.llt.Klt(i),this.D7.kn(uh.RV,this.Rs),this.jnt=new aU(this.D7)),await this.Vlt()}Nlt(t){const e=t.Ht.iot;if(void 0===e)return super.Nlt(t);if(e.some((t=>this.jnt.MV(t))))return super.Nlt(t);this.To(new Ci("jlt"))}xlt(){return this.D7&&(this.D7.pn(uh.RV,this.Rs),this.D7=void 0),Promise.resolve()}klt(){return this.D7?this.D7.WA(0,1/0):Promise.resolve()}Clt(t){return new oU(this,this.FB,this.FB,this.qE,this.XM,this.qrt,this.rst,this.Qnt,this.Wnt,this.jnt,this.yrt).P3(t)}Vlt(){const t=this.llt.Xst,e=b.max(0,t.Tn(0)-.1),i=t.An(0)+.01;return this.D7.nK(e,i)}zlt(t){if(!q(t.uU))return!1;if(this.llt.cJ)return!0;return void 0!==this.llt.Xlt}constructor(t,e,i,s,n,r,o,h,a,u,c,l){super(t,e,i,s,n,o,h,a,u,c,l),this.D7=void 0,this.jnt=new ku,this.qlt=void 0,this.qrt=r}},iW=class extends d{JW(t,e){return this.Ylt(t,e)}async Ylt(t,e){for(const e of t)this.Zlt(e);await this.Rn(e);for(const t of this.$lt.Jlt)t.l_===Fs.gA&&(t.Utt&&0!==t.Utt.length?await this.tdt.WE(t):this.To(new T("No supported representation found in the AdaptationSet with mimetype : "+t.l_)))}get Yf(){return this.GA}get ct(){return this.FB.ct}edt(t){return new eW(t,this,this.FB,this.qE,this.XM,this.qrt,this.rst,this.HE,this.wlt,this.idt,this.yrt,this.Tlt)}sit(){return this.Iot.some((t=>t.sit()))}zst(){return 0!==this.Iot.length&&this.Iot.every((t=>t.zst()))}_lt(){this.sdt()&&this.To(new TU)}Klt(t){if(bt(t,"audio")){if(this.cK.bj)return this.cK.bj}else if(bt(t,"video")&&this.cK.Tj)return this.cK.Tj;throw new v("Cannot allocate source buffer for mime type "+t)}ndt(t){t.kn([lt.aa,r.J_,r.ov,r.hv,r.fv,r.P_],this.Rs),t.kn(uh.RV,this.rdt),t.kn("jlt",this.Rs)}get Ot(){return this.Iot.some((t=>t.Ot))}async odt(t){await Promise.all(this.Iot.map((e=>e.bn(t)))),wr(this.Iot)}get ht(){return this.EA}get Fl(){if(0===this.Iot.length)return ri.BM();const t=this.Iot.map((t=>t.Fl));let e=ri.NM(0,1/0);for(const i of t)e=e.Cn(i);if(0===e.V)return e;if(this.zst()){const t=e.Cn(this.Xst);if(0===t.V)return e;const i=t.An(t.V-1);let s=0;for(const t of this.Iot)s=b.max(s,t.flt);i<=s&&(e=e.gM(new ri([i,s],[!0,!0])))}return e}get cJ(){return this.FB.cJ}get zl(){return this.FB.zl}get Xlt(){return this.hdt}get An(){if(this.adt){const t=this.ct;if(!j(t)&&t!==cs)return t}if(!this.Iot.length)return NaN;let t=0;for(const e of this.Iot)t=b.max(t,e.An);return t}get adt(){const t=this.$lt.Nrt;if(t.l_===Gs.rD)return!1;const e=t.udt;return 0!==e.length&&this.$lt===e[e.length-1]}get Rd(){if(!this.Iot.length)return ri.BM();let t=new ri([0,1/0]);for(const e of this.Iot)t=t.Cn(e.Rd);if(t.V>0&&this.adt&&isFinite(this.ct)){const e=this.ct,i=t.An(t.V-1);e>i&&(t=t.gM(ri.NM(i,e).cM()))}return t}get QO(){return this.$lt}get nt(){return this.xu}get rt(){return this.PA}get Ti(){return this.cdt.Ti}get Ci(){return this.cdt.Ci}get LB(){const t=this.zl,e=this.Fl,i=e.pM(t);if(-1!==i)return{Tn:e.Tn(i),An:e.An(i)}}get Xst(){const t=this.$lt.Tn,e=this.adt?1/0:this.$lt.An;return ri.NM(t,e)}sdt(){if(this.sit())return!1;if(!this.zst())return!1;const t=this.Fl;if(0===t.V)return!1;const e=this.zl;if(this.adt)return t.Tn(t.V-1)<=e;{const i=t.Cn(this.Xst);if(0===i.V)return!0;const s=i.Tn(i.V-1),n=i.An(i.V-1)+.1;return s<=e&&e<=n}}get ldt(){return this.ddt}async uit(t){this.ddt||(this.ddt=!0,await Promise.all(this.Iot.map((e=>e.uit(t)))))}async dit(t){this.ddt&&(this.ddt=!1,await Promise.all(this.Iot.map((e=>e.dit(t)))))}async bn(t){this.FB.pn(r.wv,this.fdt),this.Lo(),this.$lt.pn(_n.Cet,this.Rs),this._dt.vl(),this.Alt&&(await this.Alt.catch($d),this.Alt=void 0),await this.odt(t),await this.tdt.bn(),this.EA.bn(),this.PA.bn(),this.xu.bn(),this.vdt()}Zlt(t){this.gdt.push(t),t.kn("mdt",this.wdt);const e=t.l_===Fs.Cm?this.EA:this.PA;for(const i of t.Z)e.tt(i)}pdt(t){const e=t.l_===Fs.Cm?this.EA:this.PA;for(const i of t.Z)e.it(i),i.bn();t.bn(),so(this.gdt,t)}vdt(){for(let t=this.gdt.length-1;t>=0;t--)this.pdt(this.gdt[t])}get ydt(){return this.gdt.map((t=>t.ktt)).filter(it)}get Adt(){return this.Iot.map((t=>t.ktt)).filter(it)}Rn(t,e){return this._dt.vl(),this._dt=new Zs,e&&this._dt.wl(e),this.Alt=oa(this.m8(t,this.Alt,this._dt.fl),this._dt).catch(this.bdt),this.Alt}async m8(t,e,i){e&&await e.catch($d),gi(i);const s=[],n=this.Iot.slice(),r=t.slice();wr(this.Iot);for(const t of n){const e=t.ktt;e&&Yi(r,e)?(this.Iot.push(t),s.push(t.Rn(e,i)),so(r,e)):(this.xu.CB(t.nt),await t.bn(),gi(i))}for(const t of r){const e=this.edt(t.Zet);this.xu.PB(e.nt),this.Iot.push(e),this.ndt(e),s.push(e.Rn(t,i))}await Promise.all(s)}async FV(t,e,i){this.cK!==i&&(this.cK=i,await this.odt(!1)),await this.Rn(t),this.hdt=e}constructor(t,e,i,s,n,o,h,a,u,c,l,d,f){super(),this.EA=new Qh,this.PA=new Qh,this.gdt=[],this._dt=new Zs,this.ddt=!0,this.Iot=[],this.Alt=void 0,this.rdt=ef((()=>{this.To(new gt(this.zl))}),350),this.wdt=t=>{const e=t.Tdt.ktt;if(e)for(const t of this.gdt){var i;t.ktt&&t.ktt!==e&&t.l_===(null==(i=e.Jrt)?void 0:i.l_)&&(t.pn("mdt",this.wdt),t.ktt.Ot=!1,t.kn("mdt",this.wdt))}this.Rs(t)},this.bdt=t=>{Lr(t)||this.To(new An(new io(Ot.MEDIA_LOAD_ERROR,t.message,t)))},this.fdt=t=>{const e=t.VZ;if(e)for(const t of this.Adt){if((t.Bst.e7||[]).some((t=>t.jD&&Ki(Js(e),ak(t.jD)))))return void this.To(new MC(new _r(Ot.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions")))}},this.qE=i,this.XM=s,this.rst=n,this.FB=t,this.GA=ws(),this.gdt=[],this.$lt=h,this.hdt=a,this.HE=c,this.tdt=new bU(t,i,s,n,c),this.xu=new Vo([this.tdt.nt]),this.yrt=d,this.Tlt=f,this.$lt.kn(_n.Cet,this.Rs),this.cdt=u,this.cK=e,this.qrt=o.lowLatency,this.wlt=l,this.idt=o.abr,this.FB.kn(r.wv,this.fdt)}},sW=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,nW=class t{static Ew(e){const i=e.match(sW);if(!i)throw new v("The given value could not be parsed as a valid DateTimeInterval");const s=Number(i[1])||0,n=Number(i[2])||0,r=Number(i[3])||0,o=Number(i[4])||0,h=Number(i[5])||0,a=Number(i[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*o+60*h+a)}get Zot(){return Bh.UT(this.Sdt,1e3)}Edt(){return this.Sdt}kdt(){return 1e3*this.Sdt}constructor(t){this.Sdt=t}};!function(t){t.Pdt="progressive",t.Idt="interlaced",t.wA="unknown"}(Kt||(Kt={}));var rW=class{Lb(){return this.Rdt/this.Cdt}constructor(t,e){this.Rdt=t,this.Cdt=e}},oW=/^(?:true|false)$/i,hW=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function hi(t){if(void 0!==t)return nW.Ew(t)}function aW(t){if(void 0===t)return;const e=t.match(hW);if(!e)throw new v("The given value could not be parsed as a valid Date");const[,i,s,n,r,o,h,a,u,c,l,d]=e,f=("-"===i?-1:1)*Number(s),_=Number(n)-1,g=Number(r),m=Number(o);let w=Number(h);const p=Number(a),y=Number("0."+(u||"")),A=b.round(1e3*y);if(c){w-=("-"===c?-1:1)*(60*Number(l)+Number(d))}const T=new Date(Date.UTC(f,_,g,m,w,p,A));if(j(T.getTime()))throw new v("The given value could not be parsed as a valid Date");return T}function uW(t){if(!t)return;const e=/(\d+)-(\d+)/.exec(t);return e?[Bt(e[1]),Bt(e[2])]:void 0}function cW(t){if(void 0!==t){if(!j(Number(t)))try{return rt.fromString(t,!0)}catch(t){}throw new v("The given value could not be parsed as a valid unsigned long")}}function Bt(t){if(void 0===t)return;const e=Number(t);if(!j(e))return e;throw new v("The given value could not be parsed as a valid Number")}function lW(t){if(void 0===t)return;const e=t.split("/"),i=Number(e[0]),s=Number(e[1]||1);if(!j(i)&&!j(s))return new rW(i,s);throw new v("The given value could not be parsed as a valid frame rate")}function ju(t){if(void 0!==t){if(oW.test(t))return"true"===t.toLowerCase();if(!j(k(t)))return Boolean(k(t));throw new v("The given value could not be parsed as a valid Boolean.")}}function dW(t){return{YS:t.gN,xdt:ju(t.LS("availabilityTimeComplete")),Ddt:Bt(t.LS("availabilityTimeOffset"))}}function fW(t){return t.map(dW)}function _W(t){const e=SW(t),i=function(t,e,i,s){let n=t.MS(i,e);return void 0===n&&(n=t.LS(s+":"+e)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=Rw(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=Pu(n.gN)),!s){const e=Rw(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==e&&(s=function(t){const e=ea(t.gN),i=new S([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=e.length,n=12+i.length+4+s,r=new ArrayBuffer(n),o=new S(r),h=new DataView(r),a=new ds;at(h,a,n),at(h,a,1886614376),at(h,a,0),Pv(h,a,i),at(h,a,s),Pv(h,a,e),!1;return o.buffer}(e))}return{jD:i,Ndt:s,i7:e.i7,Qy:e.Qy}}function vW(t){return{Bdt:t.LS("sourceURL"),kit:uW(t.LS("range"))}}function gW(t,e){const i=t.LS("d"),s=t.LS("t"),n=Bt(t.LS("r"));e.push({ct:i,ob:s,Odt:n})}function mW(t){return{ast:t.LS("index"),Mdt:uW(t.LS("indexRange")),Yw:t.LS("media"),Ldt:uW(t.LS("mediaRange"))}}function wW(t){const e=yW(t),i=function(t){const e=t.map(mW);return e.length>0?e:void 0}(t.CS("SegmentURL"));return no({},e,{Fdt:i,Udt:t.LS("xlink:href"),Hdt:t.LS("xlink:actuate")})}function pW(t){const e=ju(t.LS("availabilityTimeComplete")),i=Bt(t.LS("availabilityTimeOffset")),s=uW(t.LS("indexRange")),n=ju(t.LS("indexRangeExact")),r=t.CS("Initialization");if(r.length>1)throw new v("The provided MPEG-DASH document's "+t.TN+" element can not have more than one Initialization element.");const o=1===r.length?vW(r[0]):void 0,h=cW(t.LS("presentationTimeOffset")),a=t.CS("RepresentationIndex");if(a.length>1)throw new v("The provided MPEG-DASH document's "+t.TN+" element can not have more than one RepresentationIndex element.");return{xdt:e,Ddt:i,Mdt:s,Wdt:n,qdt:o,Vdt:h,zdt:1===a.length?vW(a[0]):void 0,Xdt:hi(t.LS("timeShiftBufferDepth")),zw:Bt(t.LS("timescale"))}}function yW(t){const e=pW(t),i=t.CS("BitstreamSwitching"),s=i.length>0?vW(i[0]):void 0,n=Bt(t.LS("duration")),r=t.CS("SegmentTimeline");if(r.length>1)throw new v("The provided MPEG-DASH document's "+t.TN+" element can not have more than one SegmentTimeline element.");const o=1===r.length?function(t){const e=[],i=t.CS("S");for(const t of i)gW(t,e);return e}(r[0]):void 0;return no({},e,{Gdt:s,ct:n,G7:o,Qdt:Bt(t.LS("startNumber")),Kdt:Bt(t.LS("endNumber"))})}function AW(t){return{jdt:function(t){if(!t)return;const e=t.split(/\s/);return e.length>1?(e.length=2,e.map(Bt)):1===e.length?e.map(Bt)[0]:void 0}(t.LS("audioSamplingRate")),t7:t.LS("codecs"),Ydt:ju(t.LS("codingDependency")),e7:function(t){if(0!==t.length)return t.map(_W)}(t.CS("ContentProtection")),Zdt:function(t){return t.map(EW)}(t.CS("EssentialProperty")),wot:lW(t.LS("frameRate")),Ci:Bt(t.LS("height")),Jdt:Bt(t.LS("maxPlayoutRate")),$dt:Bt(t.LS("maximumSAPPeriod")),uU:t.LS("mimeType"),tft:t.LS("profiles"),eft:t.LS("sar"),ift:function(t){switch(t){case Kt.Pdt:case Kt.Idt:case Kt.wA:return t;default:return}}(t.LS("scanType")),sft:t.LS("segmentProfiles"),nft:Bt(t.LS("startWithSAP")),Ti:Bt(t.LS("width"))}}function bW(t){const e=fW(t.CS("BaseURL")),i=t.CS("SegmentBase");if(i.length>1)throw new v("The provided MPEG-DASH document's "+t.DS+" element can not have more than one SegmentBase element.");const s=1===i.length?pW(i[0]):void 0,n=function(t){const e=t.map(wW);return e.length>0?e:void 0}(t.CS("SegmentList")),r=t.CS("SegmentTemplate");if(r.length>1)throw new v("The provided MPEG-DASH document's "+t.DS+" element can not have more than one SegmentTemplate element.");const o=1===r.length?function(t){return no({},yW(t),{rft:t.LS("bitstreamSwitching"),oft:t.LS("index"),hft:t.LS("initialization"),aft:t.LS("media")})}(r[0]):void 0;return{uft:e,cft:s,lft:n,dft:o}}function TW(t){const e=AW(t),i=bW(t),s=Bt(t.LS("bandwidth")),n=t.LS("dependencyId"),r=t.LS("id"),o=t.LS("mediaStreamStructureId"),h=Bt(t.LS("qualityRanking"));if(t.CS("SegmentBase").length>1)throw new v("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return no({},e,i,{wB:s,fft:n,o:r,_ft:o,vft:h})}function SW(t){return{i7:t.LS("schemeIdUri"),Qy:t.LS("value")}}function EW(t){return SW(t)}function kW(t){return SW(t)}function PW(t){return SW(t)}function IW(t){var e;const i=AW(t),s=bW(t),n=function(t){return t.map(PW)}(t.CS("Accessibility")),r=ju(t.LS("bitstreamSwitching")),o=t.LS("contentType"),h=Bt(t.LS("group")),a=Bt(t.LS("id")),u=(null==(e=t.CS("Label")[0])?void 0:e.gN)||"",c=t.LS("lang"),l=Bt(t.LS("maxBandwidth")),d=lW(t.LS("maxFrameRate")),f=Bt(t.LS("maxHeight")),_=Bt(t.LS("maxWidth")),g=Bt(t.LS("minBandwidth")),m=lW(t.LS("minFrameRate")),w=Bt(t.LS("minHeight")),p=Bt(t.LS("minWidth")),y=t.LS("par"),A=function(t){return t.map(TW)}(t.CS("Representation"));if(0===A.length)throw new v("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const b=function(t){return t.map(kW)}(t.CS("Role")),T=ju(t.LS("segmentAlignment"))||!1,S=Bt(t.LS("selectionPriority")),E=S||1,k=ju(t.LS("subsegmentAlignment"))||!1;let P;try{P=Bt(t.LS("subsegmentStartsWithSAP"))}catch(t){}return no({},i,s,{zrt:n,Gdt:r,YB:o,Jrt:h,o:a,jh:u,gs:c,gft:l,mft:d,wft:f,pft:_,yft:g,Aft:m,bft:w,Tft:p,Sft:y,Utt:A,Tot:b,Eft:T,OO:E,kft:k,Pft:P,Ift:t.LS("xlink:actuate")||"onRequest",Rft:t.LS("xlink:href")})}function RW(t){const e=cW(t.LS("presentationTime"))||rt.ZERO,i=cW(t.LS("duration")),s=Bt(t.LS("id")),n=function(t){const e=t.xS,i={};for(let t=0;t<e.length;t++)i[e[t].l]=e[t].Qy;return i}(t),r=t.gN;return{Ky:e,ct:i,o:s,xS:n,Xm:""!==r.trim()?r:t.LS("messageData")||""}}function CW(t){return{Rft:t.LS("xlink:href"),Ift:t.LS("xlink:actuate"),i7:t.LS("schemeIdUri"),Qy:t.LS("value"),zw:Bt(t.LS("timescale")),Vdt:cW(t.LS("presentationTimeOffset")),cU:t.CS("Event").map(RW)}}function xW(t){const e=bW(t),i=t.CS("AssetIdentifier");if(i.length>1)throw new v("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===i.length?function(t){return SW(t)}(i[0]):void 0,n=function(t){return t.map(IW)}(t.CS("AdaptationSet")),r=ju(t.LS("bitstreamSwitching")),o=hi(t.LS("duration")),h=function(t){return t.map(CW)}(t.CS("EventStream")),a=t.LS("id"),u=hi(t.LS("start")),c=(t.CS("Subset"),t.LS("xlink:href"));return no({},e,{Ctt:n,Cft:s,Gdt:r,ct:o,xft:h,o:a,Tn:u,Ift:t.LS("xlink:actuate"),Rft:c})}function DW(t){const e=t.LS("schemeIdUri");if(!e)return;return{i7:e,Qy:t.LS("value")}}function NW(t,e){const i=aW(t.LS("availabilityEndTime")),s=aW(t.LS("availabilityStartTime")),n=fW(t.CS("BaseURL")),r=t.LS("id"),o=function(t){return t.map((t=>""+t.gN))}(t.CS("Location")),h=hi(t.LS("maxSegmentDuration")),a=hi(t.LS("maxSubsegmentDuration")),u=hi(t.LS("mediaPresentationDuration")),c=(t.CS("Metrics"),hi(t.LS("minBufferTime")));if(!c)throw new v("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const l=hi(t.LS("minimumUpdatePeriod")),d=function(t){return t.map((t=>xW(t)))}(t.CS("Period"));if(!d.length)throw new v("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.LS("profiles");if(!f)throw new v("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const _=aW(t.LS("publishTime")),g=hi(t.LS("suggestedPresentationDelay")),m=hi(t.LS("timeShiftBufferDepth")),w=function(t){switch(t){case Gs.nD:case Gs.rD:return t;default:return}}(t.LS("type")),p=function(t){const e=[];for(const i of t){const t=DW(i);t&&e.push(t)}return e}(t.CS("UTCTiming"));return{Dft:i,Nft:s,uft:n,o:r,Bft:o,Oft:e,Mft:h,Lft:a,Fft:u,Uft:c,Hft:l,udt:d,tft:f,Wft:_,qft:g,Xdt:m,l_:w,Vft:p}}var BW=class{zft(t,e){return function(t,e){if(!t)throw new v("The provided MPEG-DASH document does not contain a valid MPD root element.");return NW(t,e)}(f.NS(t).OS,e)}};function OW(t){return{get bandwidth(){return t.wB},get codecs(){return t.t7},get id(){return t.o},get uid(){return t.Yf},get name(){return t.jh},get averageBandwidth(){return t.Xft},get label(){return t.jh},set label(e){t.jh=ai(e)},get available(){return t.s9},get score(){return t.Gft},addEventListener(e,i){t.kn(e,i)},removeEventListener(e,i){t.pn(e,i)}}}function MW(t){return Dh(OW(t),{get height(){return t.Ci},get width(){return t.Ti},get frameRate(){return t.wot},get firstFrame(){return t.Qft}})}function LW(t){return Dh(OW(t),{get audioSamplingRate(){return t.jdt}})}var Ja=class extends Ci{constructor(t){super("update"),this.quality=t}},FW=class extends d{get jh(){return this.QA}set jh(t){this.QA!==t&&(this.QA=t,this.To(new Ja(this.ma)))}get Xft(){}get s9(){return this.Kft}get Gft(){}oE(){this.Kft=!1,this.To(new Ja(this.ma))}constructor(t,e,i,s,n){super(),this.o=t,this.wB=e,this.t7=i,this.jft=n,this.Yf=tm(),this.QA=s||"",this.Kft=!0}},O=class extends FW{get ma(){return this.vf||(this.vf=MW(this)),this.vf}constructor(t,e,i,s,n,r,o,h,a=0){super(t,e,i,s,n),this.wot=r,this.Ti=o,this.Ci=h,this.Qft=a,this.vf=void 0}},UW=class extends FW{get ma(){return this.vf||(this.vf=LW(this)),this.vf}constructor(t,e,i,s,n,r){super(t,e,i,s,n),this.jdt=r,this.vf=void 0}};var wi=class extends d{get Yft(){const t=this.Zft();return null==t?void 0:t.Tn}get Jft(){const t=this.Zft();return null==t?void 0:t.An}constructor(...t){super(...t),this.$ft=t=>{this.To(t)}}},HW=class extends wi{get Bst(){return this.hit}get jdt(){var t;return null!=(t=this.t_t.Xm.jdt)?t:this.Bst.jdt}get wB(){return this.t_t.Xm.wB||0}get t7(){const t=this.t_t.Xm;return t.t7?[t.t7]:this.Bst.t7}get e_t(){const t=this.t_t.Xm;return t.t7?[t.t7]:[]}get C5(){return this.t_t.Xm.t7||this.Bst.C5}get Ydt(){return this.t_t.Xm.Ydt||this.Bst.Ydt}get e7(){return this.t_t.Xm.e7||this.Bst.e7}get YB(){return this.uU+'; codecs="'+this.C5+'"'}get Zdt(){const t=this.t_t.Xm;return t.Zdt.length?t.Zdt:this.Bst.Zdt}get ma(){return this.vf||(this.vf=function(t){return{get id(){return t.o},get type(){return t.l_},get bandwidth(){return t.wB},get width(){return t.Ti},get height(){return t.Ci},get frameRate(){var e,i;return null!=(i=null==(e=t.wot)?void 0:e.Lb())?i:NaN},get audioSamplingRate(){return t.jdt}}}(this))}get wot(){var t;return null!=(t=this.t_t.Xm.wot)?t:this.Bst.wot}get Ci(){return this.t_t.Xm.Ci||this.Bst.Ci}get o(){return this.t_t.Xm.o||""}get Lrt(){return this.i_t}set Lrt(t){this.i_t=t}get Mrt(){const t=this.t_t.s_t();if(t)return{YS:t.YS,kit:t.kit,ME:this.Nrt.ME}}get Jdt(){return this.t_t.Xm.Jdt||this.Bst.Jdt||1}get $dt(){return this.t_t.Xm.$dt||this.Bst.$dt}get Nrt(){return this.Ant.Nrt}get uU(){return this.t_t.Xm.uU||this.Bst.uU}get Ant(){return this.Bst.Ant}get tft(){return this.t_t.Xm.tft||this.Bst.tft}get Net(){return this.n_t}get eft(){return this.t_t.Xm.eft||this.Bst.eft}get ift(){return this.t_t.Xm.ift||this.Bst.ift}get r_t(){return this.t_t.r_t}get sft(){return this.t_t.Xm.sft||this.Bst.sft}get G7(){return this.t_t.G7}get nft(){return this.t_t.Xm.nft||this.Bst.nft}get l_(){const t=this.uU.split("/")[0];return"application"===t||"text"===t||np(this.uU,this.t7)?Fs.gA:"video"===t?Fs.Rm:"audio"===t?Fs.Cm:"image"===t?Fs.mA:Fs.wA}get Ti(){return this.t_t.Xm.Ti||this.Bst.Ti}get Ent(){return this.o_t}set Ent(t){this.o_t=t}Mnt(t){const e=ma(t)?this.t_t.h_t(t):this.t_t.Mnt(t);return{YS:e.YS,kit:e.kit,ME:this.Nrt.ME}}a_t(){return this.t_t.a_t()}Zft(){return this.t_t.Zft()}u_t(){return this.t_t.u_t()}Pnt(t){return this.t_t.Pnt(t)}Rnt(t,e,i){return this.t_t.Rnt(t,this.Nrt.ME,e,i)}brt(t){return ma(t)?this.G7.c_t(t,this.t_t):this.G7.brt(t)}ynt(t){return ma(t)?this.G7.l_t(t,this.t_t):this.G7.ynt(t)}bn(){this.t_t.pn(_n.Iet,this.$ft)}constructor(t,e){if(super(),this.vf=void 0,this.i_t=void 0,this.o_t=!1,this.hit=t,this.t_t=e,this.t_t.kn(_n.Iet,this.$ft),this.l_===Fs.Rm){var i,s;const t=null!=(s=null==(i=this.wot)?void 0:i.Lb())?s:NaN;this.n_t=new O(this.o,this.wB,this.C5,"","",t,this.Ti,this.Ci)}else this.l_===Fs.Cm?this.n_t=new UW(this.o,this.wB,this.C5,"","",this.jdt):this.n_t=void 0}},WW=class extends wi{get zrt(){return this.t_t.Xm.zrt}get jdt(){var t;return null!=(t=this.t_t.Xm.jdt)?t:-1}get t7(){if(this.t_t.Xm.t7)return[this.t_t.Xm.t7];{const t=[];for(const e of this.Utt)e.e_t.length&&-1===t.indexOf(e.C5)&&t.push(e.C5);return t}}get C5(){return this.t7.join()}get Ydt(){return this.t_t.Xm.Ydt}get e7(){return this.t_t.Xm.e7}get YB(){return this.uU+'; codecs="'+this.C5+'"'}get Zdt(){return this.t_t.Zdt}get wot(){return this.t_t.Xm.wot}get Jrt(){return this.t_t.Xm.Jrt}get Ci(){return this.t_t.Xm.Ci||0}get o(){return this.t_t.Xm.o}get jh(){return this.t_t.Xm.jh||""}get Jdt(){return this.t_t.Xm.Jdt}get $dt(){return this.t_t.Xm.$dt}get Nrt(){return this.Ant.Nrt}get uU(){return this.t_t.Xm.uU||this.rot[0].uU}get Ant(){return this.$lt}get tft(){return this.t_t.Xm.tft}get Utt(){return this.rot}get Tot(){return this.t_t.Xm.Tot||[]}get eft(){return this.t_t.Xm.eft}get ift(){return this.t_t.Xm.ift}get sft(){return this.t_t.Xm.sft}get OO(){return this.t_t.Xm.OO}get nft(){return this.t_t.Xm.nft}get l_(){const t=(this.t_t.Xm.YB||this.uU).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||np(this.uU,this.t7)?Fs.gA:"video"===t?Fs.Rm:"audio"===t?Fs.Cm:"image"===t?Fs.mA:Fs.wA}get Ti(){return this.t_t.Xm.Ti||0}get t2(){return this.t_t.Xm.gs||""}get yot(){return this.Yft}get pot(){const t=this.yot,e=this.Jft;if(void 0===t||void 0===e)return;const i=b.min(e,this.Nrt.d_t);return b.max(t,i)}async Kn(t,e){if(0===this.rot.length){this.rot=[];const i=this.t_t.Utt.map((i=>this.f_t(i,t,e)));this.rot=(await Promise.all(i)).filter(it)}this.__t()}async f_t(t,e,i){const s=new HW(this,t),n=await e(s);if(gi(i),n)return s}__t(){if(!this.rot.length)throw new v("Detected an AdaptationSet without any supported Representations.")}Zft(){return this.t_t.Zft()}u_t(){return this.t_t.u_t()}bn(){this.t_t.pn(_n.Iet,this.$ft);for(const t of this.rot)t.bn();wr(this.rot)}constructor(t,e){super(),this.rot=[],this.$lt=t,this.t_t=e,this.t_t.kn(_n.Iet,this.$ft)}};function qW(t,e){const i=[];for(const s of e)for(const e of t)i.push(f.Oh(e,s));return i}var VW=class{v_t(t){const e=t-this.$lt.Tn;if(e<0||e>=this.$lt.ct)return;const i=this.g_t();return void 0!==i&&_e(i,e,1e-5)?this.m_t():this.w_t(e)}knt(t){const e=t-this.$lt.Tn;if(!(e<0))return this.p_t(b.min(e,this.$lt.ct))}m_t(){return this.y_t(0)}A_t(){const t=this.$lt.ct;if(isFinite(t))return this.p_t(t)}get b_t(){return this.$lt.S_t.T_t&&void 0!==this.E_t()}a_t(t){if(this.$lt.S_t.l_===Gs.rD){if(this.b_t){const e=this.m_t(),i=this.E_t();if(void 0===e||void 0===i)return;return{k_t:t,P_t:e,I_t:i}}const e=this.R_t(t);if(!e)return;return{k_t:t,P_t:this.C_t(t),I_t:e}}{0;const e=this.m_t();if(e)return{k_t:t,P_t:e,I_t:this.A_t()}}}u_t(t,e){if(e){let t=this.Brt(e.P_t);const i=this.Nnt(e.I_t);if(i){const e=this.Ort(i);(!t||e.getTime()<t.getTime())&&(t=e)}return t}{const e=this.m_t();if(e){const i=this.Ort(e);if(t.getTime()<i.getTime())return i}const i=this.$lt.S_t.Nft;return t.getTime()<i.getTime()?i:void 0}}R_t(t){const e=(t.getTime()-this.$lt.S_t.Nft.getTime())/1e3-this.$lt.Tn+this.x_t;let i=this.p_t(Eo(e,0,this.$lt.ct));if(!i)return;if(i=this.D_t(i,t),!i)return;let s=this.Nnt(i);for(;s&&this.Wrt(s,t);)i=s,s=this.Nnt(i);return i}C_t(t){let e;const i=this.N_t.Xdt;if(i){const s=(t.getTime()-this.$lt.S_t.Nft.getTime())/1e3-this.$lt.Tn-i.Edt();e=this.p_t(Eo(s,0,this.$lt.ct)),e||(e=this.m_t())}else e=this.m_t();if(!e)return;if(e=this.D_t(e,t),!e)return;let s=this.Dnt(e);for(;s&&this.Wrt(s,t);)e=s,s=this.Dnt(e);return e}D_t(t,e){let i=t;for(;i&&this.Ort(i).getTime()>e.getTime();)i=this.Dnt(i);if(!i)return;const s=this.Brt(i);if(s&&s.getTime()<=e.getTime()){const t=this.Dnt(i);for(t&&this.Wrt(t,e)&&(i=t);i;){if(this.Ort(i).getTime()>e.getTime())return;if(this.Wrt(i,e))break;i=this.Nnt(i)}if(!i)return}return i}Wrt(t,e){if(this.b_t)return!0;if(this.Ort(t).getTime()>e.getTime())return!1;const i=this.Brt(t);return!(i&&e.getTime()>=i.getTime())}B_t(t,e){if(this.b_t)return!0;if(this.O_t(t).getTime()>e.getTime())return!1;const i=this.Brt(t);return!(i&&e.getTime()>=i.getTime())}M_t(t,e,i){const s=Qi(e,this.hR)+this.$lt.Tn;return{ast:t,L_t:e,ob:s,ct:i,hb:s+i}}O_t(t){return this.$lt.S_t.l_===Gs.rD?new Date(this.$lt.S_t.Nft.getTime()+1e3*(t.ob+t.ct)):this.$lt.S_t.Nft}Ort(t){const e=this.O_t(t);return this.$lt.S_t.l_===Gs.rD?new Date(e.getTime()-1e3*this.x_t):e}Brt(t){let e=1/0;if(this.$lt.S_t.l_===Gs.rD){const i=this.N_t.Xdt;i&&(e=this.O_t(t).getTime()+1e3*t.ct+i.kdt())}const i=this.$lt.S_t.Dft;return i&&(e=b.min(e,i.getTime())),e===1/0?void 0:new Date(e)}F_t(t,e){return t.ast+e}get rS(){return this.$lt.Tn-Qi(this.U_t,this.hR)}get Vdt(){return Qi(this.U_t,this.hR)}Pnt(t){return!1}Rnt(t,e,i,s,n){const r=this.H_t(t);if(!r)return Promise.reject(new v("Invalid segment"));const o=this.W_t(r.ast,e);return o?Promise.resolve(o):sf(this.q_t(r.ast,e,i,s),n)}W_t(t,e){}q_t(t,e,i,s){return Promise.reject(new v("Not supported"))}Dnt(t){const e=this.H_t(t);if(e)return this.y_t(e.ast-1)}Nnt(t){const e=this.H_t(t);if(e)return this.y_t(e.ast+1)}H_t(t){const e=this.y_t(t.ast);if(e&&e.ob===t.ob)return e;const i=this.v_t(t.ob);return i&&i.ob===t.ob?i:void 0}V_t(t,e){const i=this.Cnt(t);if(!i||!this.Pnt(i.ast))return;const s=this.W_t(i.ast,e);return s?s.V_t(t):void 0}Cnt(t){return this.y_t(t.z_t)}brt(t){const e=this.H_t(t);return!!e&&0===e.ast}c_t(t,e){const i=this.V_t(t,e);return!!i&&0===i.hst}ynt(t){const e=this.H_t(t);if(!e)return!1;const i=this.A_t();return!!i&&e.ast===i.ast}l_t(t,e){const i=this.V_t(t,e);if(!i)return!1;const s=this.A_t();if(!s||i.z_t!==s.ast)return!1;const n=this.W_t(i.z_t,e);return i.hst+1===n.V}hl(){}constructor(t,e){this.$lt=t,this.N_t=e,this.hR=e.zw,this.x_t=e.Ddt,this.U_t=e.Vdt}},zW=class extends VW{y_t(t){if(t<0)return;const e=this.X_t.multiply(t),i=Qi(e,this.hR),s=this.$lt.ct;if(i>=s)return;const n=this.G_t();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.M_t(t,e,s-i)}return isFinite(s)&&i+this.Q_t>s?this.M_t(t,e,s-i):this.M_t(t,e,this.Q_t)}g_t(){return 0}w_t(t){const e=b.floor(t/this.Q_t),i=this.G_t();return void 0!==i&&e>=i?this.y_t(i):this.y_t(e)}p_t(t){if(t>=this.$lt.ct){const t=b.ceil(this.$lt.ct/this.Q_t)-1,e=this.G_t();return void 0!==e&&t>=e?this.y_t(e):this.y_t(t)}return this.w_t(t)}G_t(){const t=this.N_t.Kdt;var e;if(void 0!==t)return t-(null!=(e=this.N_t.Qdt)?e:1);const i=this.N_t.K_t;return void 0!==i&&i>0?i-1:void 0}E_t(){if(isFinite(this.$lt.ct))return this.A_t()}j_t(t,e){return this.X_t.multiply(t.ast+(e-1))}Kn(){}constructor(t,e){super(e,t);const i=t.Y_t,s=t.ct;if(void 0===i||void 0===s)throw new v("MultipleSegmentBase does not have a segment duration specified.");this.X_t=i,this.Q_t=s}};function XW(t,e,i){const s=e.length;if(0===s)return-1;let n=0,r=s-1,o=t.Z_t(e[n]),h=t.J_t(e[r]);for(;n<=r&&t.$_t(o,i)<=0&&t.$_t(i,h)<0;){const a=n+b.floor(t.tvt(i,o,h)*(r-n)),u=e[a],c=t.Z_t(u),l=a+1<s?t.Z_t(e[a+1]):t.J_t(u);if(t.$_t(l,i)<=0)n=a+1,o=l;else{if(!(t.$_t(i,c)<0))return a;r=a-1,h=c}}return-1}function GW(t,e){return XW(QW.zP,t,e)}var QW=class t{static get zP(){return null!=this.J9||(this.J9=new t),this.J9}Z_t(t){return t.ob}J_t(t){return t.hb}$_t(t,e){return t.compare(e)}tvt(t,e,i){return t.subtract(e).toNumber()/i.subtract(e).toNumber()}},KW=class extends VW{y_t(t){if(!(t<0))return t<this.evt.length?this.evt[t].nst:this.ivt(t-this.evt.length)}g_t(){if(this.evt.length>0)return Qi(this.evt[0].ob,this.hR)}w_t(t){if(this.svt&&Qi(this.svt.ob,this.hR)<=t){const e=Qi(this.svt.ob,this.hR),i=Qi(this.svt.ct,this.hR),s=b.floor((t-e)/i);return this.ivt(s)}if(this.evt.length>0&&_e(t,Qi(this.evt[0].ob,this.hR),1e-5))return this.evt[0].nst;const e=GW(this.evt,rt.fromNumber(t*this.hR));return e<0?void 0:this.evt[e].nst}p_t(t){if(!this.svt&&this.evt.length>0){const e=this.evt[this.evt.length-1];if(function(t,e,i){return Mr(t,e,i)>=0}(t,Qi(e.hb,this.hR),1e-5))return e.nst}const e=this.g_t();return e&&t<e?this.evt[0].nst:this.w_t(t)}E_t(){return isFinite(this.$lt.ct)?this.A_t():this.y_t(this.evt.length-1)}j_t(t){return this.nvt(t)}ivt(t){if(!this.svt)return;const e=this.svt.ob,i=this.svt.ct,s=e.add(i.multiply(t)),n=Qi(s,this.hR),r=this.$lt.ct;if(n>=r)return;const o=this.evt.length+t,h=b.min(Qi(i,this.hR),n+r);return this.M_t(o,s,h)}nvt(t){return t.L_t.add(this.U_t)}Kn(){const t=this.N_t.Xm.G7;if(!t)throw new v("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.rvt(t)}rvt(t){const e=this.U_t;this.ovt(t,e);const i=this.hvt(t);this.avt(t,e,i.uvt,i.z_t)}ovt(t,e){const i=this.evt;if(0===t.length)wr(i);else{const s=t[0],n=s.ob?rt.fromString(s.ob,!1).subtract(e):rt.ZERO;let r=0;for(;r<i.length&&i[r].ob.lessThan(n);)r++;r>0&&i.splice(0,r)}}hvt(t){const e=this.evt,i=this.Zct;let s=0,n=0;for(;s<t.length&&n<e.length;){const r=t[s].Odt||0;if(r<0)break;const o=n+r;if(o>=e.length)break;if(e[o].ob.greaterThanOrEqual(i))break;if(e[n].nst.ast===n)n=o+1;else for(;n<=o;)e[n].nst.ast=n,n++;0,s++}return{uvt:s,z_t:n}}avt(t,e,i,s){const n=this.evt;let r,o=i,h=s;for(;o<t.length;){const i=t[o],s=rt.fromString(i.ct,!1),a=i.Odt||0;let u;if(i.ob){if(u=rt.fromString(i.ob,!1).subtract(e),h>0){const t=n[h-1];t.hb.greaterThan(u)&&(t.ct=u.subtract(t.ob),t.hb=t.ob.add(t.ct))}}else u=h>0?n[h-1].hb:rt.ZERO;if(a<0){if(o+1===t.length){r={ob:u,ct:s};break}const i=rt.fromString(t[o+1].ob,!1).subtract(e);for(;u.lessThan(i);){const t=u.add(s);this.cvt(n,h,u,s,t),u=t,h++}}else{const t=h+a;for(;h<=t;){const t=u.add(s);this.cvt(n,h,u,s,t),u=t,h++}}o++}h<n.length&&n.splice(h),n.length>0&&(this.Zct=n[n.length-1].ob),this.svt=r}cvt(t,e,i,s,n){if(e<t.length){const r=t[e];0,r.ct.equals(s)?r.nst.ast=e:t[e]={ob:i,ct:s,hb:n,nst:this.M_t(e,i,Qi(s,this.hR))}}else t.push({ob:i,ct:s,hb:n,nst:this.M_t(e,i,Qi(s,this.hR))})}constructor(t,e){super(e,t),this.evt=[],this.svt=void 0,this.Zct=rt.ZERO,this.Kn()}},jW=class{get Xm(){return this.lR}get Ddt(){return this.lR&&void 0!==this.lR.Ddt?this.lR.Ddt:this.lvt?this.lvt.Ddt:0}get Vdt(){return this.lR&&void 0!==this.lR.Vdt?this.lR.Vdt:this.lvt?this.lvt.Vdt:rt.ZERO}get Xdt(){return this.lR&&void 0!==this.lR.Xdt?this.lR.Xdt:this.lvt?this.lvt.Xdt:this.Ant.S_t.Xdt}get zw(){return this.lR&&void 0!==this.lR.zw?this.lR.zw:this.lvt&&this.lvt.zw?this.lvt.zw:1}get Mdt(){return this.lR&&void 0!==this.lR.Mdt?this.lR.Mdt:this.lvt?this.lvt.Mdt:void 0}get qdt(){return this.lR&&void 0!==this.lR.qdt?this.lR.qdt:this.lvt?this.lvt.qdt:void 0}get G7(){return this.dvt||(this.dvt=this.fvt()),this.dvt}fvt(){if(this._vt=this.vvt(),this._vt)return this._vt;if(this.lvt)return this.lvt.G7;throw new v("Missing media segment information.")}s_t(t){const e=this.qdt;if(e){return{YS:(void 0!==e.Bdt?f.Oh(e.Bdt,t.uft[0]):t.uft[0]).href,kit:e.kit}}const i=this.Mdt;if(i)return{YS:t.uft[0].href,kit:[0,i[0]-1]}}Kn(t){this.lR=t,this._vt&&this._vt.Kn()}hl(){this._vt&&(this._vt.hl(),this._vt=void 0)}constructor(t,e,i){this.dvt=void 0,this._vt=void 0,this.Ant=t,this.lvt=e,this.lR=i}},YW=class extends jW{get ct(){return void 0!==this.lR.ct?this.lR.ct/this.zw:this.lvt&&ZW(this.lvt)?this.lvt.ct:void 0}get Y_t(){return void 0!==this.lR.ct?rt.fromNumber(this.lR.ct):this.lvt&&ZW(this.lvt)?this.lvt.Y_t:void 0}get Qdt(){return void 0!==this.lR.Qdt?this.lR.Qdt:this.lvt&&ZW(this.lvt)?this.lvt.Qdt:void 0}get Kdt(){return void 0!==this.lR.Kdt?this.lR.Kdt:this.lvt&&ZW(this.lvt)?this.lvt.Kdt:void 0}vvt(){return void 0!==this.lR.G7?new KW(this,this.Ant):void 0!==this.lR.ct?new zW(this,this.Ant):void 0}};function ZW(t){return t instanceof YW}var JW=class{lI(t){return this.gvt.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,((e,i,s,n)=>{if("$$"===e)return"$";const r=t[i];if(void 0===r)return e;if(void 0===s)return r.toString();let o=function(t,e){switch(e){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===o?e:(o=Qt(o,Number(s),"0"),o)}))}constructor(t){this.gvt=t}};var $W=class t extends YW{get hft(){return this.mvt?this.mvt:this.lvt&&this.lvt instanceof t?this.lvt.hft:void 0}get aft(){return this.wvt?this.wvt:this.lvt&&this.lvt instanceof t?this.lvt.aft:void 0}s_t(t){const e=this.hft;if(!e)return super.s_t(t);const i=e.lI({Bandwidth:t.Xm.wB,RepresentationID:t.Xm.o});return{YS:f.Fv(i,t.uft[0])}}Mnt(t,e){var i;const s=null!=(i=e.r_t.Qdt)?i:1,n=this.aft.lI({Bandwidth:e.Xm.wB,Number:e.G7.F_t(t,s),RepresentationID:e.Xm.o,Time:e.G7.j_t(t,s)});return{YS:f.Fv(n,e.uft[0])}}h_t(t,e){}get K_t(){}constructor(t,e,i){super(t,e,i),this.mvt=i.hft?new JW(i.hft):void 0,this.wvt=i.aft?new JW(i.aft):void 0}},tq=class t extends YW{Mnt(t,e){const i=this.Fdt[t.ast],s=e.uft[0];let n;return n=i.Yw?f.Oh(i.Yw,s):s,{YS:n.href,kit:i.Ldt}}h_t(t,e){}get Fdt(){return void 0!==this.lR.Fdt?this.lR.Fdt:this.lvt&&this.lvt instanceof t?this.lvt.Fdt:void 0}get K_t(){var t;return null==(t=this.Fdt)?void 0:t.length}},eq=class{V_t(t){const e=this.xnt(t.hst);if(e&&e.ob===t.ob)return e;const i=this.pvt(t.ob);return i&&i.ob===t.ob?i:void 0}},iq=class extends eq{get V(){return this.yvt.length}xnt(t){if(t>=0&&t<this.V)return this.Avt(this.yvt[t])}pvt(t){const e=this.bvt(t);if(this.yvt.length>0){const t=this.yvt[0];if(e<=Qi(t.ob,this.zw))return this.Avt(t)}const i=GW(this.yvt,rt.fromNumber(e*this.zw));if(!(i<0))return this.Avt(this.yvt[i])}Int(t){const e=this.bvt(t);if(this.yvt.length>0){const t=this.yvt[this.yvt.length-1];if(e>=Qi(t.hb,this.zw))return this.Avt(t)}return this.pvt(t)}Avt(t){const e=Qi(t.ob,this.zw)-this.Vdt,i=e+this.Tvt,s=Qi(t.ct,this.zw);return{z_t:this.z_t,hst:t.ast,ob:i,L_t:rt.fromNumber(e*this.zw),ct:s,hb:i+s,Svt:[t.Evt,t.kvt]}}bvt(t){return t-this.Tvt+this.Vdt}constructor(t,e,i,s,n){super(),this.z_t=t,this.zw=e,this.Tvt=i,this.Vdt=s,this.yvt=n}};var sq=class t{pct(){return this.Gm.Om<this.Xm.byteLength}Pvt(){const e=this.Ivt(),i=this.Rvt(),s=this.Gm.Om,n=this.Xm.byteLength;let r;r=t.Cvt(i)?n-s:t.xvt(i);const o=s+r<=n?r:n-s,h=M(this.Xm,this.Gm,o);return new rq(e,wa(h))}Ivt(){const t=this.Rvt();if(t.length>7)throw new RangeError("Invalid EBML ID size");let e=0;for(let i=0;i<t.length;i++)e=256*e+t[i];return e}Rvt(){const t=Fo(this.Xm,this.Gm.Um());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const e=8-(31-tv(t));return f.N5(e<=8&&e>=1,"Incorrect log2 value"),M(this.Xm,this.Gm,e)}static xvt(t){if(8===t.length&&224&t[1])throw new p("EBML variable sized integer is too large");let e=0;for(let i=0;i<t.length;i++){const s=t[i];if(0===i){e=s&(1<<8-t.length)-1}else e=256*e+s}return e}static Cvt(t){for(const e of nq)if(Ki(t,new S(e)))return!0;return!1}constructor(t){this.Xm=t,this.Gm=new ds}},nq=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],rq=class{Dvt(){return this.Nvt.byteOffset}Bvt(){return new sq(this.Nvt)}Ovt(){const t=this.Nvt.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.Nvt.getUint8(0))throw new RangeError("EMBL integer field value is too large");let e=0;for(let i=0;i<t;i++){e=256*e+this.Nvt.getUint8(i)}return e}Yq(){if(4===this.Nvt.byteLength)return this.Nvt.getFloat32(0);if(8===this.Nvt.byteLength)return this.Nvt.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,e){this.id=t,this.Nvt=e}};function oq(t,e){const i=function(t){const e=new sq(wa(t)),i=e.Pvt();if(i.id!==aq)throw new p("Missing WebM EBML header");const s=e.Pvt();if(s.id!==uq)throw new p("Missing WebM SegmentElement");const n=s.Dvt(),r=function(t){const e=t.Bvt();let i;for(;e.pct();){const t=e.Pvt();if(t.id===cq){i=t;break}}if(!i)throw new p("Missing WebM InfoElement");return function(t){const e=t.Bvt();let i,s=1e6;for(;e.pct();){const t=e.Pvt();t.id===lq?s=t.Ovt():t.id===dq&&(i=t.Yq())}if(void 0===i)throw new p("Missing Duration in WebM InfoElement");const n=s/1e9,r=i*n;return{timecodeScale:n,duration:r}}(i)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(e),s=new sq(wa(t)).Pvt();if(s.id!==fq)throw new p("Missing WebM CuesElement");const n=function(t,e,i,s){const n=[],r=t.Bvt();let o,h;for(;r.pct();){const t=r.Pvt();if(t.id!==_q)continue;const i=hq(t);if(!i)continue;const s=i.unscaledTime,a=e+i.relativeOffset;void 0!==o&&n.push({ast:n.length,ob:o,ct:s.subtract(o),hb:s,Evt:h,kvt:a-1}),o=s,h=a}if(void 0!==o){0;const t=rt.fromNumber(s/i);n.push({ast:n.length,ob:o,ct:t.subtract(o),hb:t,Evt:h,kvt:void 0})}return n}(s,i.segmentOffset,i.timecodeScale,i.duration);return{zw:b.round(1/i.timecodeScale),Mvt:n}}function hq(t){const e=t.Bvt(),i=e.Pvt();if(i.id!==vq)throw new p("Missing CueTime in WebM CuePointElement");const s=rt.fromNumber(i.Ovt()),n=e.Pvt();if(n.id!==gq)throw new p("Missing CueTrackPositions in WebM CuePointElement");const r=n.Bvt();let o=0;for(;r.pct();){const t=r.Pvt();if(t.id===mq){o=t.Ovt();break}}return{unscaledTime:s,relativeOffset:o}}var aq=440786851,uq=408125543,cq=357149030,lq=2807729,dq=17545,fq=475249515,_q=187,vq=179,gq=183,mq=241,wq=class extends VW{y_t(t){if(0===t)return this.Lvt}g_t(){return 0}w_t(t){return this.Lvt}p_t(t){return this.w_t(t)}E_t(){return this.Lvt}j_t(t,e){return rt.ZERO}a_t(t){const e=this.Fvt(t);return e&&{k_t:t,P_t:e,I_t:e}}Fvt(t){const e=this.Lvt;return this.Wrt(e,t)?e:void 0}R_t(t){return this.Fvt(t)}C_t(t){return this.Fvt(t)}Kn(){}Pnt(t){return 0===t&&void 0!==this.Uvt}W_t(t,e){const i=e.uft[0].href;return this.Hvt.get(i)}q_t(t,e,i,s){const n=e.uft[0].href;let r=this.Wvt.get(n);if(void 0===r){const o=e.uU,h=this.qvt.fl;if(q(o))r=this.Vvt(t,n,i,s,h);else{if(!Tw(o))throw new io(Ot.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+o);r=this.zvt(t,n,e,i,s,h)}this.Wvt.set(n,r)}return r}async Vvt(t,e,i,s,n){const r=this.Uvt,o=await s.$nt(e,r,i,n),h=this.Xvt(t,o);return this.Hvt.set(e,h),h}Xvt(t,e){const i=this.Uvt,s=P.fw(new DataView(e),new ds);if(s.l_!==E_.Tm)throw new v("Invalid segment index");const n=hs.Mw(s.Xm),r=function(t,e){const i=[];let s=t.uA,n=e+t.cA.toNumber(),r=0;for(const e of t.dA){const t=e.nA,o=rt.fromNumber(e.ct),h=s.add(o);0===e.sA&&i.push({ast:r++,ob:s,ct:o,hb:h,Evt:n,kvt:n+t-1}),n+=t,s=h}return i}(n,i[1]+1);return new iq(t,n.zw,this.$lt.Tn,Qi(this.U_t,this.hR),r)}async zvt(t,e,i,s,n,r){const o=i.s_t(),h=this.Uvt,a=n.$nt(o.YS,o.kit,s,r),u=n.$nt(e,h,s,r),[c,l]=await Promise.all([a,u]),d=this.Gvt(t,l,c);return this.Hvt.set(e,d),d}Gvt(t,e,i){const s=oq(new S(e),new S(i));return new iq(t,s.zw,this.$lt.Tn,Qi(this.U_t,this.hR),s.Mvt)}hl(){super.hl(),this.qvt.vl()}constructor(t,e){super(e,t),this.Hvt=rs(),this.Wvt=rs(),this.qvt=new Zs,this.Uvt=t.Mdt,this.Lvt=this.M_t(0,rt.ZERO,this.$lt.ct)}},pq=class extends jW{get Qdt(){}Mnt(t,e){return{YS:e.uft[0].href}}h_t(t,e){return{YS:e.uft[0].href,kit:t.Svt}}vvt(){return new wq(this,this.Ant)}},yq=class extends Ci{constructor(){super(_n.Iet)}};var Aq=class extends d{get Xm(){return this.lR}get uft(){return this.Qvt}Kvt(){var t,e;return null!=(e=this.N_t)?e:null==(t=this.A8)?void 0:t.Kvt()}jvt(t){const e=this.Ant,i=this.A8&&this.A8.Kvt();this.lR.dft?this.N_t=new $W(e,i,this.lR.dft):this.lR.lft?this.N_t=new tq(e,i,this.lR.lft[0]):this.lR.cft?this.N_t=new pq(e,i,this.lR.cft):t&&!i&&(this.N_t=new pq(e,i,void 0))}Yvt(t,e){this.lR=t,this.Qvt=t.uft&&t.uft.length>0?qW(t.uft.map((t=>t.YS)),e):e.slice(),this.N_t&&(t.dft?this.N_t.Kn(t.dft):t.lft?this.N_t.Kn(t.lft[0]):t.cft&&this.N_t.Kn(t.cft))}Zft(){var t;return null==(t=this.Zvt)?void 0:t.Jvt}u_t(){var t;return null==(t=this.Zvt)?void 0:t.$vt}tgt(t){const e=this.egt,i=this.Ant.ct,s=this.Zvt,n=this.igt(t);s&&_e(i,e,1e-5)&&Eq(s,n)||(this.egt=i,this.Zvt=n,this.To(new yq))}hl(){this.Lo(),this.N_t&&(this.N_t.hl(),this.N_t=void 0)}constructor(t,e,i){super(),this.N_t=void 0,this.egt=1/0,this.Zvt=void 0,this.A8=e,this.Yvt(t,i)}};function bq(t){let e,i;for(const i of t){const t=i.Zft();if(t){e=t.Tn;break}}if(void 0!==e){for(let e=t.length-1;e>=0;e--){const s=t[e].Zft();if(s){i=s.An;break}}return void 0!==i?{Tn:e,An:i}:void 0}}function Tq(t){if(0===t.length)return;let e=0,i=1/0;for(const s of t){const t=s.Zft();if(!t)return;if(e=b.max(e,t.Tn),i=b.min(i,t.An),e>=i)return}return{Tn:e,An:i}}function Sq(t){let e;for(const i of t){const t=i.u_t();t&&(!e||t.getTime()<e.getTime())&&(e=t)}return e}function Eq(t,e){return function(t,e){return t&&e?t.getTime()===e.getTime():t===e}(t.$vt,e.$vt)&&function(t,e){return t&&e?_e(t.Tn,e.Tn,1e-5)&&_e(t.An,e.An,1e-5):t===e}(t.Jvt,e.Jvt)}var kq=class extends wi{get Ctt(){return this.sgt}get t7(){return this.Ctt.reduce(((t,e)=>{for(const i of e.t7)Yi(t,i)||t.push(i);return t}),[])}get C5(){return this.t7.length>0?this.t7[0]:""}get l_(){return this.sgt[0].l_}get o(){return this.XA}get Nrt(){return this.$lt.Nrt}get uU(){return this.sgt[0].uU}get Ant(){return this.$lt}get Utt(){return ls(this.Ctt,(t=>t.Utt))}Zft(){return Tq(this.sgt)}u_t(){let t;for(const e of this.sgt){const i=e.u_t();i&&(!t||i.getTime()<t.getTime())&&(t=i)}return t}bn(){this.Lo();for(const t of this.sgt)t.pn(_n.Iet,this.$ft)}constructor(t,e,i){super(),this.$lt=t,this.XA=e,this.sgt=i.slice();for(const t of i)t.kn(_n.Iet,this.$ft)}},Pq=class extends Ci{constructor(){super(_n.Cet)}};function Iq(t){const e=[];for(const i of t){let t;const s=i.Jrt;void 0===s||(t=Rt(e,(t=>t.o===s))),t||(t={o:s,Ctt:[]},e.push(t)),t.Ctt.push(i)}return e}var Rq,Cq=class extends wi{get Ctt(){return this.sgt}get Jlt(){return this.ngt}get Cft(){return this.t_t.Xm.Cft}get ct(){return this.t_t.ct}get An(){return this.Tn+this.ct}get xft(){return this.t_t.Xm.xft||[]}get o(){return this.t_t.o}get xet(){return this.rgt}get Nrt(){return this.ogt}get hgt(){return this.ogt.agt(this)}get Ant(){return this}get ugt(){return this.ogt.cgt(this)}get lgt(){return this.dgt(1/0,b.min)}get fgt(){return this.dgt(0,b.max)}dgt(t,e){if(0===this.ngt.length)return;let i=t;for(const t of this.ngt){const s=t.l_;if(s===Fs.Cm||s===Fs.Rm){const s=t.Jft;if(void 0===s)return;i=e(i,s)}}return i}get Tn(){return this.t_t.Tn}get ME(){return this.Nrt.ME}_gt(){this.rgt||(this.rgt=!0,this.To(new Pq),this.bn())}async Kn(t,e){0===this.sgt.length?(await this.vgt(this.t_t.Ctt,t,e),this.ggt(this.sgt),gi(e)):await this.mgt(t,e)}async vgt(t,e,i){for(const s of t){const t=new WW(this,s);try{await t.Kn(e,i),this.sgt.push(t)}catch(t){eo(t)}}}ggt(t){const e=Iq(t);for(const t of e){const e=new kq(this,t.o,t.Ctt);this.ngt.push(e)}}async mgt(t,e){for(const i of this.sgt)await i.Kn(t,e)}Zft(){return this.t_t.Zft()}u_t(){return this.t_t.u_t()}bn(){this.Lo(),this.t_t.pn(_n.Iet,this.$ft);for(const t of this.ngt)t.bn();for(const t of this.sgt)t.bn();wr(this.sgt),wr(this.ngt)}constructor(t,e){super(),this.sgt=[],this.ngt=[],this.rgt=!1,this.ogt=t,this.t_t=e,this.t_t.kn(_n.Iet,this.$ft)}},xq=class extends Ci{constructor(){super(r.G_)}};(Rq||(Rq={})).wgt="pgt";var Dq=class extends Ci{constructor(){super(Rq.wgt)}},Nq=class extends Aq{get Bst(){return this.hit}get Ant(){return this.hit.Ant}get S_t(){return this.hit.S_t}get uU(){return this.lR.uU||this.hit.uU}get r_t(){return this.Kvt()}get G7(){return this.r_t.G7}Pnt(t){const e=this.uU;return!(!q(e)&&!Tw(e))&&this.G7.Pnt(t.ast)}Rnt(t,e,i,s){return this.G7.Rnt(t,this,e,i,s)}s_t(){return this.r_t.s_t(this)}Mnt(t){return this.r_t.Mnt(t,this)}h_t(t){return this.r_t.h_t(t,this)}a_t(){return this.ygt}igt(t){const e=this.G7,i=e.a_t(t),s=i&&function(t,e){const{P_t:i,I_t:s,k_t:n}=t,r=i.ob;let o;const h=e.O_t(s);if(h.getTime()<=n.getTime())o=s.hb;else{const t=(h.getTime()-n.getTime())/1e3,e=b.max(s.ct-t,0);o=s.ob+e}return{Tn:r,An:o}}(i,e),n=this.G7.u_t(t,i);return this.ygt=i,{k_t:t,Jvt:s,$vt:n}}Kn(t){this.Yvt(t,this.hit.uft)}constructor(t,e){super(t,e,e.uft),this.ygt=void 0,this.hit=e,this.jvt(!0)}},Bq=class extends Aq{get Utt(){return this.rot}get Ant(){return this.$lt}get S_t(){return this.$lt.S_t}get Jrt(){return this.lR.Jrt}get uU(){var t;return this.lR.uU||(null==(t=this.rot[0])?void 0:t.Xm.uU)||""}get Zdt(){return this.Xm.Zdt}Kn(t){this.Yvt(t,this.$lt.uft);const e=t.Utt||[];if(this.rot.length!==e.length)throw new v("Expected "+this.rot.length+' representations in adaptation set "'+t.o+'", found '+e.length);for(let t=0;t<e.length;t++)this.rot[t].Kn(e[t])}tgt(t){for(const e of this.rot)e.tgt(t);super.tgt(t)}igt(t){return{k_t:t,Jvt:Tq(this.rot),$vt:Sq(this.rot)}}hl(){for(const t of this.rot)t.hl();super.hl()}constructor(t,e){super(t,e,e.uft),this.$lt=e,this.jvt(!1),this.rot=t.Utt.map((t=>new Nq(t,this)))}},Oq=class extends Aq{get Ctt(){return this.sgt}get Jlt(){return this.ngt}get Ant(){return this}get S_t(){return this.Agt}get o(){return this.lR.o}get Tn(){return this.SS}get ct(){return this.aR}Kn(t,e){this.Yvt(t,this.Agt.uft),this.aR=e;const i=t.Ctt||[];if(this.sgt.length!==i.length)throw new v("Expected "+this.sgt.length+' adaptation sets in period "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.sgt[t].Kn(i[t])}tgt(t){for(const e of this.sgt)e.tgt(t);super.tgt(t)}igt(t){return{k_t:t,Jvt:Tq(this.sgt),$vt:Sq(this.sgt)}}hl(){for(const t of this.sgt)t.hl();super.hl()}constructor(t,e,i,s){super(e,void 0,t.uft),this.ngt=[],this.Agt=t,this.SS=i,this.aR=s,this.jvt(!1),this.sgt=(e.Ctt||[]).map((t=>new Bq(t,this))),this.ngt=Iq(this.sgt)}},Mq=new Date("2000-01-01"),Lq=class extends d{get Xm(){return this.lR}get l_(){return this.lR.l_||Gs.nD}get Nft(){return this.bgt||this.lR.Nft||this.Wft}get Dft(){return this.lR.Dft}get T_t(){var t,e;return null!=(e=null==(t=this.Tgt)?void 0:t.ignoreAvailabilityWindow)&&e}get Fft(){return this.Sgt}get uft(){return this.Qvt}get Bft(){return this.Egt}get udt(){return this.kgt}get Wft(){return this.lR.Wft||this.In}get Xdt(){return this.lR.Xdt}get Pgt(){return this.Igt}get Rgt(){return this.In}Zft(){var t;return null==(t=this.Zvt)?void 0:t.Jvt}u_t(){var t;return null==(t=this.Zvt)?void 0:t.$vt}Kn(t,e,i,s){var n;const r=void 0!==this.lR&&this.lR.l_===Gs.rD;this.lR=t,this.Cgt=e,this.Igt=null!=s?s:i,this.In=i;const o=[n_(e)];this.Qvt=t.uft&&t.uft.length>0?qW(t.uft.map((t=>t.YS)),o):o,this.Egt=t.Bft&&t.Bft.length>0?qW(t.Bft,this.Qvt):[];const h=this.Egt.map((t=>t.href)),a=e.href;Yi(h,a)||(this.Egt.push(e),h.push(a));const u=this.xgt.href;Yi(h,u)||(this.Egt.push(this.xgt),h.push(u)),this.Sgt=null==(n=t.Fft)?void 0:n.Edt();const c=t.l_===Gs.rD,l=function(t,e,i){const s=[];for(let i=0;i<t.length;i++){const n=t[i];let r;if(n.Tn)r=n.Tn.Edt();else if(i>0&&t[i-1].ct){r=s[i-1]+t[i-1].ct.Edt()}else{if(0!==i||e)break;r=0}s.push(r)}const n=[];for(let e=0;e<s.length-1;e++)n.push({Xm:t[e],Tn:s[e],ct:s[e+1]-s[e]});if(s.length>0){const r=s.length-1,o=t[r],h=s[r];let a=1/0;e||(a=o.ct?o.ct.Edt():i-h),n.push({Xm:o,Tn:h,ct:a})}return n}(t.udt,c,this.Sgt);this.Dgt(l,r,c),this.tgt(i)}Dgt(t,e,i){const s=this.kgt;if(0===t.length)return void wr(s);const n=t[0].Xm.o;let r=0;for(;r<s.length&&s[r].o!==n;)r++;const o=s.splice(0,r);for(const t of o)t.hl();if(e&&!i&&s.length>0&&t.length>0){var h;const e=null!=(h=Fq(s[0].Xm))?h:Bh.eT;var a;const i=null!=(a=Fq(t[0].Xm))?a:Bh.eT;if(i.Fb(e)){const n=i.Kb(e);void 0!==this.Sgt&&(this.Sgt+=n.Lb());for(let e=0;e<t.length;e++){const i=t[e];if(e<s.length){const t=s[e];i.Tn=t.Tn,Vq(i.Xm,t.Xm)}e===t.length-1&&(i.ct+=n.Lb())}}}for(let e=0;e<t.length;e++){const i=t[e];if(e<s.length){const t=s[e];0,t.Kn(i.Xm,i.ct)}else s.push(new Oq(this,i.Xm,i.Tn,i.ct))}}tgt(t){for(const e of this.kgt)e.tgt(t);const e=this.Zvt,i=this.igt(t);e&&Eq(e,i)||(this.Zvt=i,this.To(new yq))}igt(t){return{k_t:t,Jvt:bq(this.kgt),$vt:Sq(this.kgt)}}E_t(){if(0===this.kgt.length)return;const t=this.kgt[this.kgt.length-1];if(isFinite(t.ct))return;if(0===t.Ctt.length)return;const e=t.Ctt[0];if(0===e.Utt.length)return;const i=e.Utt[0].G7,s=i.E_t();return s?{nst:s,Dft:i.Brt(s)}:void 0}hl(){this.Lo();for(const t of this.kgt)t.hl()}constructor(t,e,i,s,n){if(super(),this.Zvt=void 0,this.Sgt=void 0,this.bgt=void 0,this.kgt=[],this.xgt=e,this.Tgt=n,this.Kn(t,i,s),t.l_===Gs.rD){const t=this.E_t();t&&t.Dft&&t.Dft.getTime()<Mq.getTime()&&(this.bgt=new Date(this.Wft.getTime()-1e3*(t.nst.ob+t.nst.ct)),this.tgt(s))}}};function Fq(t){let e=Wq(t);var i,s;for(const s of null!=(i=t.Ctt)?i:[])e=Nm(e,Uq(s));for(const i of null!=(s=t.xft)?s:[])e=Nm(e,qq(i));return e}function Uq(t){let e=Wq(t);for(const i of t.Utt)e=Nm(e,Hq(i));return e}function Hq(t){return Wq(t)}function Wq(t){let e;if(void 0!==t.dft&&(e=Nm(e,qq(t.dft))),void 0!==t.cft&&(e=Nm(e,qq(t.cft))),void 0!==t.lft)for(const i of t.lft)e=Nm(e,qq(i));return e}function qq(t){var e,i;return Bh.Jb(null!=(e=t.Vdt)?e:rt.ZERO,null!=(i=t.zw)?i:1)}function Vq(t,e){if(Gq(t,e),t.Tn=e.Tn,void 0!==t.Ctt&&void 0!==e.Ctt&&t.Ctt.length===e.Ctt.length)for(let i=0;i<t.Ctt.length;i++)zq(t.Ctt[i],e.Ctt[i]);if(void 0!==t.xft&&void 0!==e.xft&&t.xft.length===e.xft.length)for(let i=0;i<t.xft.length;i++)Qq(t.xft[i],e.xft[i])}function zq(t,e){if(Gq(t,e),void 0!==t.Utt&&void 0!==e.Utt&&t.Utt.length===e.Utt.length)for(let i=0;i<t.Utt.length;i++)Xq(t.Utt[i],e.Utt[i])}function Xq(t,e){Gq(t,e)}function Gq(t,e){if(void 0!==t.dft&&void 0!==e.dft&&Qq(t.dft,e.dft),void 0!==t.cft&&void 0!==e.cft&&Qq(t.cft,e.cft),void 0!==t.lft&&void 0!==e.lft&&t.lft.length===e.lft.length)for(let i=0;i<t.lft.length;i++)Qq(t.lft[i],e.lft[i])}function Qq(t,e){t.zw=e.zw,t.Vdt=e.Vdt}var Kq=class{async JW(t){await this.Ngt(t,this.qE,this.Bgt,this.Ogt).catch(yr)}Drt(){return new Date(Yn()+this.Mgt)}async Ngt(t,e,i,s){let n;if(s&&(n=await this.Lgt(e,s,i)),void 0===n){gi(i);for(const s of t)if(n=await this.Fgt(e,s,i),void 0!==n)break}this.Mgt=void 0===n?0:n-Yn()}async Fgt(t,e,i){switch(e.i7){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=e.Qy;if(s)return await this.Lgt(t,s,i);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=e.Qy;if(t){const e=new Date(t).getTime();if(!j(e))return e}break}default:return}}async Lgt(t,e,i){try{const s=await t.GS({YS:e,xE:Fr.GET,DE:Ct.gA,fl:i}),n=await s.VE(),r=new Date(n).getTime();if(!j(r))return r}catch(t){eo(t)}}constructor(t,e,i){this.qE=t,this.Bgt=e,this.Ogt=i,this.Mgt=0}},jq=class extends d{get Dft(){return this.t_t&&this.t_t.Dft}get Nft(){return this.t_t&&this.t_t.Nft}get T_t(){return this.t_t&&this.t_t.T_t}get o(){return this.t_t&&this.t_t.Xm.o}get Pgt(){var t;return null==(t=this.t_t)?void 0:t.Pgt}get Ugt(){var t;return null==(t=this.t_t)?void 0:t.Rgt}get Bft(){return this.t_t?this.t_t.Bft.map((t=>t.href)):[this.Hgt]}get Hgt(){return this.Wgt.href}get Mft(){return this.t_t&&this.t_t.Xm.Mft}get Lft(){return this.t_t&&this.t_t.Xm.Lft}get Fft(){return this.t_t&&this.t_t.Xm.Fft}get Uft(){return this.t_t&&this.t_t.Xm.Uft}get Hft(){var t,e;const i=(null==(e=this.t_t)||null==(t=e.Xm.Hft)?void 0:t.kdt())||0;return b.max(i,Zq)}get _d(){return this.qgt}Vgt(t){const e=this._d;this.qgt=t,e!==this._d&&this.To(new Dq)}get udt(){return this.kgt}get zgt(){return this.l_===Gs.rD?this.d_t:this.Xgt}get Ggt(){const t=this.zgt;if(void 0!==t)for(const e of this.udt)if(e.Tn<=t&&e.An>t)return e}get tft(){return this.t_t&&this.t_t.Xm.tft}get Wft(){return this.t_t&&this.t_t.Wft}get lgt(){for(let t=this.kgt.length-1;t>=0;t-=1){const e=this.kgt[t].lgt;if(e)return e}}get d_t(){const t=this.lgt;if(void 0===t)return;const e=t-this.Qgt;return b.max(e,this.Xgt)}get Xgt(){for(const t of this.kgt){const e=t.Yft;if(void 0!==e)return e}}get ME(){return Boolean(this.Kgt.ME)}get Qgt(){var t,e;if(this.Kgt.jgt&&this.l_===Gs.rD)return this.Kgt.jgt;const i=null==(e=this.t_t)||null==(t=e.Xm.qft)?void 0:t.Edt();return void 0!==i?i:this.l_===Gs.rD?1.5*this.Uft.Edt():0}get Xdt(){return this.t_t&&this.t_t.Xdt}get l_(){return this.t_t?this.t_t.l_:void 0}async Kn(t,e,i){const s=[],n=[],r=t.Oft?f.Oh(t.Oft,this.Wgt):this.Wgt;void 0===this.t_t?(await this.Ygt.JW(t.Vft),this.t_t=new Lq(t,this.Wgt,r,this.Drt(),this.Tgt),this.t_t.kn(_n.Iet,this.Rs)):this.t_t.Kn(t,r,this.Drt(),e);const o=this.t_t.udt;let h;if(0===o.length)h=this.kgt.slice(),wr(this.kgt);else{const t=o[0].o;let e=0;for(;e<this.kgt.length&&this.kgt[e].o!==t;)e++;h=this.kgt.splice(0,e);for(let t=0;t<o.length;t++){const e=o[t];let r;t<this.kgt.length?r=this.kgt[t]:(r=new Cq(this,e),s.push(r)),n.push(r.Kn(this.Zgt,i))}}await Promise.all(n),this.kgt.push(...s);for(const t of h)t._gt();this.To(new xq)}Drt(){return this.Ygt.Drt()}cgt(t){const e=this.kgt.indexOf(t);if(e>0)return this.kgt[e-1]}agt(t){const e=this.kgt.indexOf(t);if(e>=0&&e+1<this.kgt.length)return this.kgt[e+1]}Zft(){return this.t_t?this.t_t.Zft():void 0}u_t(){return this.t_t&&this.t_t.u_t()}tgt(t){this.t_t&&this.t_t.tgt(t)}bn(){this.Lo(),this.Jgt=void 0,this.Vgt(!1);for(const t of this.kgt)t.bn();wr(this.kgt),this.t_t&&this.t_t.hl()}constructor(t,e,i,s,n){super(),this.t_t=void 0,this.qgt=!0,this.kgt=[],this.Jgt=void 0,this.Kgt=t,this.Wgt=t.d_,this.Zgt=e,this.qE=i,this.$gt=s,this.Ygt=new Kq(this.qE,this.$gt,this.Kgt.tmt),this.Tgt=n}},Yq=class{get Nrt(){return this.ogt}constructor(t,e,i,s,n){this.ogt=new jq(t,e,i,s,n)}},Zq=1e3,Jq=class{get Pr(){return this.t_t}get q(){return this.emt||(this.emt=this.m8(this.imt.fl),Ui(this.emt)),this.emt}async m8(t){this.t_t.Nrt.To(new Ce);try{await this.smt(t),this.t_t.Nrt.Vgt(!0)}catch(t){throw eo(t),this.emt=void 0,this.t_t.Nrt.Vgt(!1),new v("The provided MPEG-DASH document could not be loaded - "+t.message)}this.nmt=this.rmt(this.imt.fl)}async rmt(t){try{for(;this.t_t.Nrt.l_===Gs.rD;)await sf(this.omt,t)}catch(t){}}get omt(){return this.t_t.Nrt.Ugt&&this.t_t.Nrt.l_===Gs.rD?this.hmt(this.imt.fl):this.q}async amt(t){gi(t);const e=this.umt();if(e>0){const i=b.min(e,2147483647);await ye(i,t)}try{await this.smt(t),this.t_t.Nrt.Vgt(!0)}catch(t){throw new v("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.cmt=void 0}}umt(){const t=this.t_t.Nrt.Drt().getTime()-this.t_t.Nrt.Pgt.getTime();return this.t_t.Nrt.Hft-t}lmt(t){const e=this.t_t.Nrt.u_t();if(e){const i=e.getTime()-t.getTime();if(i>0)return i}this.t_t.Nrt.tgt(t);const i=this.t_t.Nrt.u_t();return i?i.getTime()-t.getTime():NaN}async hmt(t){this.cmt||(this.cmt=this.amt(t));const e=new Zs;e.wl(t);try{await Promise.race([this.cmt,this.dmt(e.fl)].filter(it))}catch(t){yr(t)}finally{e.vl()}}dmt(t){const e=this.t_t.Nrt.Drt(),i=this.lmt(e);if(!j(i)&&!this.Pr.Nrt.T_t)return this.fmt(i,t)}async fmt(t,e){await ye(t,e);const i=this.t_t.Nrt.Drt();this.t_t.Nrt.tgt(i)}async _mt(t,e){const i=await this.gmt.vmt(t,{},e);return(new BW).zft(i.mmt,i.zE)}bn(){return this.imt.vl(),this.nmt=void 0,this.emt=void 0,this.cmt=void 0,this.t_t.Nrt.bn(),Promise.resolve()}constructor(t,e,i,s,n){this.imt=new Zs,this.smt=async t=>{try{const e=this.t_t.Nrt.Drt(),i=await this._mt(this.t_t.Nrt.Bft,t);await this.t_t.Nrt.Kn(i,e,t)}catch(t){throw We(t)&&this.t_t.Nrt.Vgt(!1),t}},this.gmt=s,this.t_t=new Yq(t,e,i,this.imt.fl,n)}},$q=class extends Ci{constructor(t,e){super("mdt"),this.Tdt=t,this.ktt=e}},tV=class extends d{get ktt(){return this.Ptt}get l_(){return this.EY}get Z(){return this.Uf.slice()}rE(t){t&&this.Ptt!==t&&this.wmt(t)}oE(t){this.Ptt===t&&this.wmt(void 0)}wmt(t){this.Ptt=t,this.To(new $q(this,this.Ptt))}bn(){this.Lo();for(const t of this.Uf)t.Jrt=void 0;wr(this.Uf)}constructor(t,e){super(),this.Ptt=void 0,this.EY=t,this.Uf=e;for(const t of this.Uf)t.Jrt=this}};var _u,eV=class extends Ci{constructor(t,e,i){super(r.O_),this.currentTime=t,this.initDataType=e,this.initData=i}};function iV(t,e,i,s,n){let r=[],o=[];for(const t of e)t.l_===Fs.Cm?r=r.concat(t.Z):t.l_===Fs.Rm&&(o=o.concat(t.Z));return[sV(t,r,i,s,null==n?void 0:n.preferredAudioCodecs),nV(t,o,i,s,null==n?void 0:n.preferredVideoCodecs)].filter(it)}function sV(t,e,i,s,n){const r=Rt(s||[],(t=>t.Zet===Fs.Cm&&t.Ot)),o=[oV(r,i,t),hV(r),aV(r,n),uV(),t=>{const e=t.filter((t=>"main"===t.Lt));return e.length>0?e:t}];return rV(e,o)}function nV(t,e,i,s,n){const r=Rt(s||[],(t=>t.Zet===Fs.Rm&&t.Ot)),o=[oV(r,i,t),aV(r,n),uV(),t=>{const e=t.filter((t=>"main"===t.Lt));return e.length>0?e:t}];return rV(e,o)}function rV(t,e){if(0===t.length)return;let i=t;for(const t of e){if(1===i.length)return i[0];i=t(i)}return i[0]}function oV(t,e,i){return s=>{const n=t?t.Bst.o:void 0;if(!it(n))return s;const r=null==e?void 0:e.Cft,o=i.Cft,h=r&&o&&r.Qy===o.Qy,a=Rt(s,(t=>t.Bst.o===n));return h&&a?[a]:s}}function hV(t){return e=>{const i=t?t.gs:"",s=e.some((t=>""!==t.gs))?e.filter((t=>""!==t.gs)):e;if(""===i)return s;const n=Rt(s,(t=>t.gs===i));return n?[n]:s}}function aV(t,e){return i=>{if(void 0===t&&e&&e.length>0)for(const t of e){const e=i.filter((e=>e.Jf.Ff.some((e=>ca(e.t7,t)))));if(e.length>0)return e}return i}}function uV(){return t=>{let e=[],i=-1/0;for(const s of t){const t=s.Bst.OO;t>i?(i=t,e=[s]):t===i&&e.push(s)}return e}}!function(t){t.pmt="api",t.ymt="start"}(_u||(_u={}));var cV={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},lV=class{Amt(t,e,i){const s=this.yrt.maxRetries===1/0?cV:this.yrt;return yi((()=>this.bmt(t,e,i)),i,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async bmt(t,e,i){let s;for(const n of t)try{const t=new Yt({YS:n,DE:Ct.gA,CE:e,ME:this.Tmt,xE:Fr.GET,l_:ro._E,BE:Ru.wA,fl:i,JS:15e3,NE:5e3}),s=await this.qE.GS(t),r=await s.VE(i);return{mmt:r,Smt:n,zE:s.zE}}catch(t){s=t}throw s}constructor(t,e,i=cV){this.qE=t,this.Tmt=e,this.yrt=i}},dV=class{async vmt(t,e,i){let s;for(const n of this.Emt)try{return await n.vmt(t,e,i)}catch(t){eo(t),s=t}throw s}constructor(t){this.Emt=t}},fV=class{async vmt(t,e,i){const s=await this.rst.f9(t);if(s)return{mmt:s.data,Smt:s.locationURL,zE:s.responseURL};throw new v("Manifest fetch from cache unsuccesful")}constructor(t){this.rst=t}},_V=class{async vmt(t,e,i){return await this.kmt.Amt(t,e,i)}constructor(t){this.kmt=t}};var Jt=class extends Ci{constructor(){super(r.j_)}},vV=class extends Ci{constructor(){super(r.K_)}},gV=class extends cp{Pmt(t){return t.Pd=Gh.LOADED,this.tt(t),t}Imt(t){for(const e of this.Z.Ff)if(e.o_===t)return e}constructor(){super()}};function mV(t,e){return""===e?t:t+" "+e}var wV=class extends No{get ma(){return this.vf||(this.vf=function(t){return Dh(xh(t),{get attributes(){return t.xS},get eventID(){var e;return""+(null!=(e=t.Rmt)?e:"")}})}(this)),this.vf}Pb(t){return this.R===t.R}constructor(t,e,i,s,n){super(t,e,i,!1,null==n?void 0:n.toString()),this.xS=s,this.Rmt=n}},pV=class extends gV{Cmt(t){const e=this.HE.UE(K.Nm,"","","",void 0,nt.EVENT_STREAM);return e.o_=t,this.Pmt(e),e}xmt(t,e,i){const s=t.i7;var n;const r=null!=(n=t.Qy)?n:"";var o;const h=null!=(o=t.zw)?o:1;var a;const u=null!=(a=t.Vdt)?a:rt.ZERO,c=mV(s,r);let l=this.Imt(c);l||(l=this.Cmt(c));for(const s of t.cU)if(!yV(s,l)){const t=AV(s,h,u,e);t.hb>i&&l.XE(t)}}async Rn(t){await this.ir(),this.Agt=t,this.Agt.kn(r.G_,this.Dmt),this.Dmt()}async ir(){this.Agt&&(this.Agt.pn(r.G_,this.Dmt),this.Agt=void 0);for(const t of this.Z.Ff)this.HE.QE(t);await super.ir()}constructor(t){super(),this.Agt=void 0,this.Dmt=()=>{var t,e;const i=null!=(e=null==(t=this.Agt.Zft())?void 0:t.Tn)?e:0;if(i>0)for(const t of this.Z.Ff)Ko(t,i);for(const t of this.Agt.udt)if(t.An>i)for(const e of t.xft)this.xmt(e,t,i)},this.HE=t}};function yV(t,e){const i=t.o;if(void 0!==i){if(Rt(e.L.Ff,(e=>e.Rmt===i&&e.R===t.Xm)))return!0}return!1}function AV(t,e,i,s){const n=t.o,r=t.Ky.toSigned().subtract(i),o=t.ct,h=t.Xm,a=t.xS,u=r.toNumber()/e+s.Tn,c=o?o.toNumber()/e:void 0,l=void 0!==c?u+c:s.fgt;return new wV(u,l,h,a,n)}function bV(t,e,i,s,n){const r=[],o=Rt(i,(t=>t.i7===P_));if(void 0===o)return;const h=o.Qy?function(t){const e=t.split(":",1)[0];switch(e){case"cbcs":case"cenc":return e;default:return}}(o.Qy.toLowerCase()):"cenc";if(void 0!==h){for(const t of i)if(t.i7!==P_)for(const e of Hp(t.i7)){const i=n&&t.Ndt?[t.Ndt]:[];r.push({vg:e,SB:i,EB:void 0,FN:void 0})}if(r.length)return{KD:t,Qlt:{Nmt:h,jD:o.jD},Glt:r,Bmt:e===Fs.Cm?s.slice():[],Omt:e===Fs.Rm?s.slice():[],_J:!1}}}function TV(t,e){if(!t)return e;if(!e)return t;const i=[],s=rs();var n;return SV(i,s,t.Glt),SV(i,s,e.Glt),{KD:t.KD,Qlt:{Nmt:t.Qlt.Nmt,jD:null!=(n=t.Qlt.jD)?n:e.Qlt.jD},Glt:i,Bmt:EV(t.Bmt,e.Bmt,Yi),Omt:EV(t.Omt,e.Omt,Yi),_J:t._J||e._J||!1}}function SV(t,e,i){for(const s of i){const i=s.vg.KP;let n;e.has(i)?(n=e.get(i),n.SB=EV(n.SB,s.SB,kV)):(n=no({},s),t.push(n),e.set(i,n))}}function EV(t,e,i){const s=t.slice();for(const t of e)i(s,t)||s.push(t);return s}function kV(t,e){for(const i of t)if(j_(i,e))return!0;return!1}function PV(t,e,i){let s;const n=t.e7;if(n){const r=t.uU,o=[];for(const e of t.t7)o.push(r+'; codecs="'+e+'"');s=bV(e||{},t.l_,n,o,i)}for(const n of t.Utt)s=TV(s,IV(n,e,i));return s}function IV(t,e,i){return bV(e||{},t.l_,t.e7||[],[t.YB],i)}function RV(t){return t?t.Glt.map((e=>{const i=CV(t.KD,e.vg),s=t.Qlt.Nmt;return{vg:e.vg,SB:e.SB,FN:e.FN,bO:[{initDataTypes:[e.vg.GP],audioCapabilities:xV(t.Bmt,s,null==i?void 0:i.audioRobustness),videoCapabilities:xV(t.Omt,s,null==i?void 0:i.videoRobustness),persistentState:null==i?void 0:i.persistentState,distinctiveIdentifier:null==i?void 0:i.distinctiveIdentifier}]}})):[]}function CV(t,e){switch(e.l_){case Do.Zv:return t.widevine;case Do.Yv:return t.playready;case Do.Jv:return t.fairplay;case Do.$v:return t.clearkey}}function xV(t,e,i){if(0!==t.length)return t.map((t=>({contentType:t,encryptionScheme:e,robustness:i})))}var DV=class extends gV{Cmt(t){const e=this.HE.UE(K.Nm,t.o,"thumbnails","",!1,nt.DEFAULT);return e.h_=_s.Jn,this.Pmt(e),e}async Rn(t){await this.ir(),this.Agt=t,this.Agt.kn(r.G_,this.Kn),this.Kn()}Mmt(t){this.Lmt(t),this.Fmt()}Fmt(){const t=[];for(const e of this.Z.Ff)this.Umt(e)||t.push(e);for(const e of t)this.it(e)}Lmt(t){const e=[];for(const i of this.rot)-1===t.indexOf(i)&&e.push(i);for(const t of e)so(this.rot,t)}async ir(){this.Agt&&(this.Agt.pn(r.G_,this.Kn),this.Agt=void 0);for(const t of this.rot)t.pn(_n.Iet,this.Hmt);this.rot.length=0;for(const t of this.Z.Ff)this.HE.QE(t);await super.ir()}bn(){return this.Hmt=void 0,super.bn()}Wmt(){var t,e;const i=null!=(e=null==(t=this.Agt.Zft())?void 0:t.Tn)?e:0;if(i>0)for(const t of this.Z.Ff)Ko(t,i)}qmt(t){return this.Z.Ff.some((e=>e.o===t.o))}Vmt(t){return Rt(this.Z.Ff,(e=>e.o===t.o))}Umt(t){return this.rot.some((e=>t.o===e.o))}constructor(t){super(),this.rot=[],this.Kn=()=>{const t=[];for(const e of this.Agt.udt)for(const i of e.Ctt)if(i.l_===Fs.mA&&i.Utt.length>0){const e=i.Utt[0];t.push(e),this.qmt(e)||this.Cmt(e),-1===this.rot.indexOf(e)&&(this.rot.push(e),e.kn(_n.Iet,this.Hmt)),this.zmt(e)}this.Mmt(t)},this.zmt=t=>{const e=this.Vmt(t);e&&t&&e.h_!==_s.Th&&(this.Wmt(),function(t,e){const i=t.G7,s=t.a_t();if(!s)return;const n=s.P_t,r=s.I_t,o=t.Ti,h=t.Ci,[a,u]=function(t){for(const e of t)if(jf(e.i7,BV)||jf(e.i7,OV)){const t=e.Qy.match(NV);if(t){const[,e,i]=t;return[Number(e),Number(i)]}}return[1,1]}(t.Zdt);let c=n;for(;c&&c.ast<=r.ast;){const s=t.r_t.ct||c.ct,n=MV(e,c,t.Mnt(c).YS,o,h,a,u,s);for(const t of n)e.XE(t);c=i.Nnt(c)}}(t,e))},this.HE=t;const e=this;this.Hmt=function(){e.zmt(this)}}},NV=/^(\d+)x(\d+)$/,BV="http://dashif.org/guidelines/thumbnail_tile",OV="http://dashif.org/thumbnail_tile";function MV(t,e,i,s,n,r,o,h){const a=[],u=e.ob,c=r*o,l=s/r,d=n/o,f=b.round(l),_=b.round(d),v=h/c;if(1===c){const e=u+v;return LV(t,u,e,i)?a:[new No(u,e,i,!1)]}for(let s=0;s<o;s++)for(let n=0;n<r;n++){const o=u+(s*r+n)*v,h=o+v,c=i+"#xywh="+b.round(n*l)+","+b.round(s*d)+","+f+","+_;if(LV(t,o,h,c)||a.push(new No(o,h,c,!1)),h>=e.hb)return a}return a}function LV(t,e,i,s){return t.L.Ff.some((t=>t.ob===e&&t.hb===i&&t.R===s))}var FV=class extends No{get Gy(){return this.Xmt}get Qy(){return this.Gmt}get Qmt(){return this.Kmt}get ma(){return this.vf||(this.vf=function(t){return Dh(xh(t),{get schemeIDURI(){return t.Gy},get value(){return t.Qy},get emsgID(){return t.Qmt}})}(this)),this.vf}Pb(t){return Ki(this.R,t.R)}constructor(t,e,i,s,n,r){super(t,e,r,!1),this.Xmt=i,this.Gmt=s,this.Kmt=n}},UV=class t extends gV{ert(e,i,s){const n=hs.Ew(wa(e));if(!n)return;const r=function(t,e){const i=[];for(const s of t)zv(s,e)&&i.push(s);return i}(n,E_.Am);if(r.length){const e=t.jmt(n,i,s);this.Ymt(r,e,s)}}Ymt(t,e,i){for(const s of t){let t;t=1===s.Tw?s.Ky.toNumber()/s.zw+i:e+s.Zy/s.zw;const n=t+s.jy/s.zw;"https://aomedia.org/emsg/ID3"===s.Gy?this.Zmt(s,t):this.Jmt(s,t,n)}}Jmt(t,e,i){const s=mV(t.Gy,t.Qy);let n=this.Imt(s);n||(n=this.$mt(s),this.Pmt(n)),n.XE(new FV(e,i,t.Gy,t.Qy,t.o,t.Yy))}Zmt(t,e){const i=bC(wa(t.Yy));if(!i)return;const s=mV(t.Gy,t.Qy);let n=this.Imt(s);n||(n=this.twt(s),this.Pmt(n));for(const t of i.KY){const i=new ln(e,t);ZR(i,n.L.Ff),n.XE(i)}}static jmt(t,e,i){const s=Yo(t,E_.Tm);return s?Qi(s.uA,s.zw)+i:e}$mt(t){const e=this.HE.UE(K.Nm,"","","",void 0,nt.EMSG);return e.o_=t,e.h_=_s.a_,e}twt(t){const e=this.HE.UE(K.Nm,"","","",void 0,nt.ID3);return e.o_=t,e.h_=_s.a_,e}async ir(){for(const t of this.Z.Ff)this.HE.QE(t);await super.ir()}constructor(t){super(),this.HE=t}},HV=class extends UV{async Rn(t){await this.ir(),this.Agt=t,this.Agt.kn(r.G_,this.Dmt),this.Dmt()}async ir(){this.Agt&&(this.Agt.pn(r.G_,this.Dmt),this.Agt=void 0),await super.ir()}constructor(...t){super(...t),this.Dmt=()=>{var t,e;const i=null!=(e=null==(t=this.Agt.Zft())?void 0:t.Tn)?e:0;this.tE(i)}}};var WV=class{g9(t,e){return this.ewt?this.rst.g9(t,e):Promise.resolve(!1)}w9(t,e){return this.ewt?this.rst.w9(t,e):Promise.resolve(void 0)}async f9(t){const e=await this.rst.f9(t);return this.ewt=void 0!==e,e}iV(t){return this.rst.iV(t)}constructor(t){this.ewt=!1,this.rst=t}},qV=[r.Y_,r.J_,r.ov,r.Q_,r.hv],VV=[r.Z_,r.mv,r.U_,r.L_],zV=class t extends d{iwt(t){return!!this.XB&&this.XB.MV(t)}async Sj(t){this.XB=await this.FB.Rn(t),this.swt(),this.nwt(),this.XB.xj(this.ct)}rwt(t){return this.XB.FV(t)}async owt(){this.hwt=this.awt,this.XB&&(await this.FB.ir(),this.XB=void 0)}PK(){this.XB.PK()}mK(){const t=this.ct;this.XB.ct<t&&this.XB.xj(t),this.XB.mK()}async uwt(t){const e=this.XB,i=[];e.bj&&i.push(Ge(e.bj,t)),e.Tj&&i.push(Ge(e.Tj,t)),await Promise.all(i)}cwt(t,e,i,s,n,r){const o=this.FB,h=this.XB;return new iW(o,h,t,e,i,s,n,r,this.lwt,o,this.wlt,this.yrt,this.Tlt)}dwt(t,e,i){return t.FV(e,i,this.XB)}async fwt(t,e,i,s){const n=this.cwt(this.qE,this.XM,this.rst,this._wt,t,s);return n.kn(_n.Cet,this.vwt),n.kn(r.Q_,this.Rs),await n.JW(e,i),n}gwt(t){void 0===t&&(t=!1),this.mwt.vl(),this.h$.vl(),this.wwt.vl(),this.wwt=new Zs,this.pwt=this.ywt(this.Awt,this.a$,this.pwt,t,this.wwt.fl).catch(this.bdt)}async ywt(t,e,i,s,n){await Promise.all([t,e,i]),gi(n),await sf(this.bwt.fI,n);const r=this.Twt;await r.uit(),this.mK(),gi(n);const o=r.QO,h=r.Adt,a=r.ydt;let u=this.Swt(o,a,o,h,!1),c=this.Ewt(a,u);!s&&this.iwt(c)?await this.kwt(a,u,c):(u=this.Swt(o,a,o,h,!0),c=this.Ewt(a,u),await this.Pwt(a,u,c,n)),gi(n),this.xd?this.Fm(this.zl):this.Iwt(),this.Rwt()}async kwt(t,e,i){const s=this.Twt;await this.rwt(i),this.Cwt=i,await this.dwt(s,t,e),await s.dit(Xh.qtt)}async Pwt(t,e,i,s){const n=this.Twt;this.f$(),this.xwt();const r=this.Dwt;await this.owt(),await this.Sj(i),this.Cwt=i,await this.dwt(n,t,e);try{const t=this.Nwt(r,!1,!0,s);await n.dit(Xh.qtt),await t}finally{this.p$(),this.Bwt()}}get ht(){return this.EA}get LB(){const t=this.Dwt,e=this.Owt,i=e.pM(t);if(-1!==i)return{Tn:e.Tn(i),An:e.An(i)}}get Owt(){var t,e,i;const s=null!=(i=null==(t=this.Twt)?void 0:t.Fl)?i:ri.BM();var n;const r=null!=(n=null==(e=this.Mwt)?void 0:e.Fl)?n:ri.BM();return s.gM(r)}get Fl(){return this.Owt.ks()}get Hl(){var t;const e=null==(t=this.t_t)?void 0:t.Nrt,i=null==e?void 0:e.Nft;if(!e||!i)return;const s=i.getTime(),n=1e3*this.zl;return new Date(n+s)}set Hl(t){var e;const i=null==(e=this.t_t)?void 0:e.Nrt,s=null==i?void 0:i.Nft;if(!t||!i||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.Fm(r-n)}get Dwt(){return void 0!==this.DJ?this.DJ:void 0!==this.Lwt?this.Lwt:this.FB.zl}get zl(){return this.Dwt}set zl(t){this.Fm(t,t===1/0)}get ct(){let t=NaN;return this.Twt&&this.Twt.adt?t=this.Twt.An:this.t_t&&void 0!==this.t_t.Nrt.l_&&(t=this.t_t.Nrt.Fft?this.t_t.Nrt.Fft.Edt():1/0),t}get An(){return this.ct}get jl(){return!(!this.Twt||!this.Twt.adt)&&(this.xd?this.Dwt===this.Twt.An:this.FB.jl)}get lt(){return this.WB}get Jl(){return this.qB}get td(){}Fwt(){var t;const e=this.Uwt;if(0===e.V)return!0;var i;return(null!=(i=null==(t=this.LB)?void 0:t.An)?i:this.Dwt)>=e.Tn(0)}Hwt(){var t;if(!this.t_t)return!1;if(this.t_t.Nrt.l_!==Gs.rD)return!1;const e=null==(t=this.Twt)?void 0:t.QO;if(e&&e.xet)return!0;const i=[];for(const t of this.t_t.Nrt.udt){const e=t.Yft,s=t.fgt;void 0!==e&&void 0!==s&&i.push(e,s)}const s=new ri(i).vM();return function(t,e,i){if(!e.V||!i.V)return ri.BM();const s=e.Tn(0),n=e.An(e.V-1),r=t.Cn(i).dM().Cn(t).gM(e);return ri.NM(r.Tn(0),r.An(r.V-1)).mM(r).EM(((t,e)=>t<s&&e<=n&&e-t>ne))}(this.Owt,this.Uwt,s).V>0}get hd(){return no({},this.awt,{DA:nh.zP.aB(),NA:this.Wwt,BA:{amountOfBufferedAudioSegments:this.qwt,amountOfBufferedVideoSegments:this.Vwt}})}get awt(){return function(t,e){return{RA:t.RA+e.RA,CA:t.CA+e.CA,xA:t.xA+e.xA}}(this.hwt,this.FB.ud())}get ld(){return this.FB.ld}set ld(t){this.FB.ld=t}get md(){return this.MJ?this.zwt:this.Twt&&this.Twt.adt?this.Xwt:this.zwt}get pd(){return this.FB.pd}set pd(t){this.FB.pd=t}get bd(){let t=this.Ho;return this.Twt&&(t=t.gM(this.Gwt)),t.vM(.1).ks()}get Gwt(){return this.FB.bd}Qwt(t){this.Ho=this.Ho.gM(t)}get Sd(){return this.zB}set Sd(t){this.zB=t,this.Kwt()}get Pd(){let t=this.FB.Pd;return this.jwt&&(t=b.max(Yv.Qn,t)),t}get Uwt(){return this.Ywt(!1)}get Zwt(){return this.Ywt(!0)}get Rd(){return this.Uwt.ks()}get xd(){return this.MM||this.Jwt}get Jwt(){return this.FB.xd}get jj(){return this.FB.jj}get GB(){}get $wt(){var t,e;return null!=(e=null==(t=this.t_t)?void 0:t.Nrt.l_)?e:Gs.nD}get nt(){return this.xu}get rt(){return this.PA}get Od(){var t;return this.tpt||(null==(t=this.ept())?void 0:t.Ci)||0}get Fd(){var t;return this.ipt||(null==(t=this.ept())?void 0:t.Ti)||0}get Hd(){return this.FB.Hd}set Hd(t){this.FB.Hd=Eo(t,0,1)}get Vd(){return this.QB}get Xd(){return!1}set Xd(t){}get KB(){return this.jB}spt(t){t.kn(qV,this.Rs),t.kn(r.fv,this.npt),t.kn(r.P_,this.rpt),t.kn(lt.aa,this.opt),t.kn(r.R_,this.hpt),t.kn(r.J_,this.apt),t.kn("mdt",this.upt),t.kn("jlt",this.upt)}cpt(t){t.pn(qV,this.Rs),t.pn(r.fv,this.npt),t.pn(r.P_,this.rpt),t.pn(lt.aa,this.opt),t.pn(r.R_,this.hpt),t.pn(r.J_,this.apt),t.pn("mdt",this.upt),t.pn("jlt",this.upt)}lpt(t){t.kn(r.Y_,this.Rs)}dpt(t){t.pn(r.Y_,this.Rs)}ept(){if(!this.Twt)return;const t=Rt(this.Twt.ydt,(t=>t.Zet===Fs.Rm));return t?t.jf:void 0}Ywt(t){var e;const i=null==(e=this.t_t)?void 0:e.Nrt;if(!i)return ri.BM();const s=i.Xgt;let n=t?i.lgt:i.d_t;if(void 0===s||void 0===n)return ri.BM();if(!t){const t=this.Gwt;t.V>0&&t.An(t.V-1)>n&&(n=b.min(t.An(t.V-1),i.lgt))}const r=this.ct;return isFinite(r)&&r>n&&(n=r),ri.NM(s,n).cM()}async Rn(t,e){let i,s;gi(e);try{i=this.t_t.Nrt.Ggt,s=this.t_t.Nrt.zgt}catch(t){throw new v("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!i)throw new v("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new v("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.fpt(t.textTracks),this.f$();const n=this.Rtt(i),r=iV(i,n,void 0,void 0,this.idt),o=this.Swt(i,r,i,r,!0);r.forEach((t=>t.Ot=!0));const h=this.Ewt(r,o);await this.Sj(h),this.Cwt=h,gi(e);const a=await this.fwt(i,n,r,o);gi(e),this._pt(a),this.p$(),gi(e),await a.dit(),gi(e),this.vpt||this.Fm(s,!0,_u.ymt)}Iwt(){this.mwt.vl(),this.mwt=new Zs,this.Awt=this.gpt(this.Awt,this.pwt,this.mwt.fl).catch(this.bdt)}mpt(){this.mwt.vl()}async gpt(t,e,i){for(await Promise.all([t,e]),gi(i);;){var s;const t=null==(s=this.Twt)?void 0:s.QO;if(!t){0;break}if(!await this.wpt(t,i)){0;break}}}async wpt(t,e){var i;gi(e);const s=this.Twt;for(0;this.t_t.Nrt.l_===Gs.rD&&void 0===(null==(i=this.agt(t))?void 0:i.Yft);)await sf(this.ppt.omt,e),await this.ypt();for(gi(e),await this.ypt(),gi(e);!s.sdt();)await s.Bl(pU.Rot,e),await this.ypt();gi(e),await this.ypt(),gi(e);const n=this.agt(t);return n?(this.Apt(n)?await this.bpt(n,e):await this.Tpt(n,e),!0):(this.PK(),!1)}Apt(t){var e,i,s,n,r;const o=null!=(r=null==(e=this._wt)?void 0:e.seamlessSwitchStrategy)?r:$i.fA;if(o===$i.pA)return!0;if(o===$i.yA)return!1;const h=this.Twt,a=null==h?void 0:h.QO,u=null==h?void 0:h.ydt,c=iV(t,this.Rtt(t),a,u,this.idt),l=this.Swt(t,c,a,u,!1);if(o===$i.CLEAR_ONLY&&((null==(i=this.Twt)?void 0:i.Xlt)||l)||o===$i.SAME_DRM_ONLY&&!((null==(s=this.Twt)?void 0:s.Xlt)&&l||!(null==(n=this.Twt)?void 0:n.Xlt)&&!l))return!1;const d=this.Ewt(c,l);return this.iwt(d)}Spt(){return!0}Ept(t){const e=this.kpt();for(const i of e)i!==t&&(i.h_=_s.Th)}Rwt(){if(void 0!==this.Ppt){if(this.Ppt.c_){const t=Rt(this.ht.Ff,(t=>t.Ot));void 0!==t&&this.Ppt.gs===t.gs||(this.Ppt.h_=_s.Th)}}else this.Ipt()}Ipt(){if(this.kpt().length)return;const t=Rt(this.ht.Ff,(t=>t.Ot));if(void 0===t)return;const e=this.nt.Ff.filter((t=>t.c_));for(const i of e)if(i.gs===t.gs)return i.h_=_s.Jn,void(this.Ppt=i)}kpt(){return this.nt.Ff.filter((t=>t.h_===_s.Jn&&(t.Lt===K.HS||t.Lt===K.xm)))}Rpt(t){if(t&&this.Ppt){const e=function(t,e){if(""===t.gs)return;return e.filter((e=>e.gs===t.gs))[0]}(this.Ppt,t.nt.Ff);e&&(e.h_=_s.Jn)}}async bpt(t,e){var i,s;const n=this.Twt;let o=this.Mwt;const h=this.Cwt;try{gi(e);const i=n.QO,s=n.ydt,h=this.Rtt(t),a=iV(t,h,i,s,this.idt),u=this.Swt(t,a,i,s,!1);a.forEach((t=>t.Ot=!0));const c=this.Ewt(a,u);for(0,await n.uit(),this.mK(),gi(e),o&&o.QO===t?(this.iwt(c)&&await this.rwt(c),this.Cwt=c):(o&&await o.bn(!0),this.iwt(c)&&await this.rwt(c),this.Cwt=c,o=await this.fwt(t,h,a,u),this.Mwt=o,this.lpt(o),this.Cpt.qf=o.nt),await o.dit(),gi(e);this.Dwt<t.Tn;)await this.FB.Bl(r.vv,e);gi(e),this._pt(o)}catch(t){throw Lr(t)&&(o&&await o.uit(),h&&this.Cwt!==h&&(this.iwt(h)&&await this.rwt(h),this.Cwt=h)),t}(null==(s=this._wt)||null==(i=s.dash)?void 0:i.forceSeekToSynchronize)&&await this.xpt(t,e)}async xpt(t,e){const i=Date.now()/1e3;if(void 0===this.Dpt)this.Dpt=i;else if(i-this.Dpt>900){this.Dpt=i,this.xwt();const s=b.max(this.Dwt,t.Tn);try{await this.Nwt(s,!1,!0,e)}finally{this.Bwt()}}}async Tpt(t,e){for(gi(e),await this.Twt.uit(),this.mK(),await this.uwt(t.Tn),gi(e),this.PK();!this.FB.jl&&this.Dwt<t.Tn;)await this.FB.Bl([r.vv,r.M_],e);gi(e);const i=this.Twt.QO,s=this.Twt.ydt,n=this.Rtt(t),o=iV(t,n,i,s,this.idt),h=this.Swt(t,o,i,s,!0);o.forEach((t=>t.Ot=!0));const a=this.Ewt(o,h);this.Twt&&(this.Npt.pn(Bs.oa,this.Bpt),await this.Twt.bn(),this.Npt.kn(Bs.oa,this.Bpt),this.Twt=void 0),this.Mwt&&(await this.Mwt.bn(),this.Mwt=void 0),this.xwt(),this.f$();const u=b.max(this.Dwt,t.Tn);await this.owt(),await this.Sj(a),this.Cwt=a;const c=await this.fwt(t,n,o,h);this._pt(c);try{const t=this.Nwt(u,!1,!0,e);await c.dit(),await ts((e=>Promise.race([t,c.Bl([pU.Rot],e)])),e)}finally{this.p$(),this.Bwt()}}async ypt(){const t=this.Mwt;t&&t.QO.xet&&(await t.bn(!0),this.Mwt=void 0)}static Opt(t,e){const i=[],s=[];let n=!e.some((t=>t.Tot.some((t=>"main"===t.Qy))));for(const t of e){if(-1!==i.indexOf(t))continue;const r=GV(t.zrt.concat(t.Tot),n);n=!1;const o=t.Utt.map((t=>t.Net)),h=new gU(t,o,r),a=QV(t,e);for(const t of a)h.oot(t),i.push(t);s.push(h)}return new tV(t,s)}Rtt(e){const i=[],s=[];for(const t of e.Jlt)t.l_!==Fs.Cm&&t.l_!==Fs.Rm||(0===t.Utt.length?this.To(new T("No supported representation found in the AdaptationSet with mimetype : "+t.l_)):t.l_===Fs.Cm?i.push(...t.Ctt):s.push(...t.Ctt));const n=[];return i.length>0&&n.push(t.Opt(Fs.Cm,i)),s.length>0&&n.push(t.Opt(Fs.Rm,s)),n}Ewt(t,e){var i,s,n,r,o,h,a,u;const c=t.map((t=>{var e;return fu.Znt(null!=(e=t.iot)?e:t.Utt,wg(t.Zet,this.idt))})).map((t=>({YB:t.YB}))),l=null==(s=this._wt)||null==(i=s.dash)?void 0:i.desiredTimescale;var d;const _=(null==(n=this._wt)?void 0:n.seamlessSwitchStrategy)!==$i.yA&&(null==(r=this._wt)?void 0:r.seamlessSwitchStrategy)!==$i.CLEAR_ONLY&&(null==(o=this._wt)?void 0:o.seamlessSwitchStrategy)!==$i.SAME_DRM_ONLY&&(null!=(d=null==(a=this._wt)||null==(h=a.dash)?void 0:h.needsTimescaleShifting)?d:f.Zs.TK),v=null==(u=this._wt)?void 0:u.useManagedMediaSource;return{l_:$.rD,Mj:c,ZB:RV(e),_J:null==e?void 0:e._J,TK:_,SK:l,Gj:v}}static Mpt(t,e){if(!t.length)return;let i;for(const s of t){const t=0===s.uot.length;i=TV(i,PV(s.Bst,e,t))}return(null==e?void 0:e.preferredKeySystems)&&i&&(i.Glt=function(t,e){const i=t=>{const i=e.indexOf(t.vg.KP);return i>=0?i:e.length};return gh(t,((t,e)=>i(t)-i(e)))}(i.Glt,e.preferredKeySystems)),i}Swt(e,i,s,n,r){var o,h;const a=this._wt.contentProtection;let u=t.Mpt(i,a);if(void 0!==u)return u;var c;const l=null!=(c=null==(o=this._wt)?void 0:o.seamlessSwitchStrategy)?c:$i.fA;if(l===$i.yA||l===$i.CLEAR_ONLY||l===$i.SAME_DRM_ONLY)return;const d=null==(h=this.Twt)?void 0:h.Xlt;if(!r&&void 0!==d){const t=!d._J;if(l===$i.fA&&t&&!this.Spt())return;return d}const f=!r&&l===$i.fA;return u=this.Lpt(e,a,s,n,f),void 0!==u?(u._J=!0,u):void 0}Lpt(e,i,s,n,r){let o=e,h=!1;for(;;){if(o=h?this.cgt(o):this.agt(o),void 0===o){if(h)return;h=!0,o=e;continue}const a=iV(o,this.Rtt(o),s,n,this.idt),u=t.Mpt(a,i);if(r){const t=this.Ewt(a,u);if(!this.iwt(t))return}if(void 0!==u)return u}}fpt(t){for(const e of t)e.src&&this.oO.FE(e);Bo(this.oO.Z)}Zd(){this.md||(this.zwt=!0,this.MJ||(this.Fpt(new Sr),this.Upt()),this.Hpt())}Jd(){this.Wpt||(this.Wpt=new Os),this.qpt();const t=this.Wpt.fI;return Ui(t),t}qpt(){if(this.zwt=!1,this.KJ=!0,this.Kwt(),this.jl){const t=this.Uwt;t.V>0&&this.Fm(t.Tn(0))}this.MJ||this.YJ().then(this.Vpt,this.Fpt),this.vwt(),this.Hpt()}get Xwt(){return this.FB.md}YJ(){return this.FB.Jd()}Upt(){this.FB.Zd()}f$(){this.MJ||(this.zwt=this.md,this.MJ=!0,this.Upt())}p$(){this.MJ&&(this.MJ=!1,this.zwt||this.YJ().then(this.Vpt,this.Fpt),this.vwt(),this.Hpt())}Hpt(){const t=this.wD,e=this.md;t!==e&&(this.wD=e,e?this.To(new Cn(this.zl)):this.To(new gs(this.zl)))}Fm(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=_u.pmt),this.vpt=!0,this.mwt.vl(),this.h$.vl(),this.MM=!0,this.DJ=t,this.Qwt(this.Gwt),this.zpt(new Uh(this.zl)),this.h$=new Zs,this.a$=this.u$(t,this.Awt,this.a$,this.pwt,this.h$.fl,e,i).catch(this.bdt),this.a$}Xpt(){this.h$.vl()}async u$(t,e,i,s,n,r,o,h){void 0===r&&(r=!1),void 0===o&&(o=_u.pmt),void 0===h&&(h=!1);try{var a,u;0,await Promise.all([e,i,s]),gi(n),await sf(this.bwt.fI,n);const c=this.Uwt.lM(t);this.DJ=c;const l=h||(null==(u=this._wt)||null==(a=u.dash)?void 0:a.forceHardSwitchWhenSeekingBackwards)&&c<=this.zl,d=this.Gpt(c),f=this.Twt;if(l||!f||!f.Rd.br(c)&&o!==_u.ymt&&f.QO!==d){if(d){let t=this.Mwt;if(this.f$(),f&&await f.uit(),t&&t.QO===d&&!l){const e=this.Ewt(t.Adt,t.Xlt);this.mK(),this.iwt(e)&&await this.rwt(e),this.Cwt=e}else{t&&await t.bn(!0);const e=this.Rtt(d),i=null==f?void 0:f.QO,s=null==f?void 0:f.ydt,n=iV(d,e,i,s,this.idt);let r=this.Swt(d,n,i,s,!1);n.forEach((t=>t.Ot=!0));let o=this.Ewt(n,r);this.Apt(d)&&!l?(this.mK(),this.iwt(o)&&await this.rwt(o)):(r=this.Swt(d,n,i,s,!0),o=this.Ewt(n,r),f&&(this.Npt.pn(Bs.oa,this.Bpt),await f.bn(),this.Npt.kn(Bs.oa,this.Bpt),this.Twt=void 0),await this.owt(),await this.Sj(o)),this.Cwt=o,t=await this.fwt(d,e,n,r),this.Mwt=t,this.Cpt.qf=t.nt,this.lpt(t)}await t.dit(Xh.ztt),this._pt(t)}}else{0;const t=this.Mwt;if(t&&!t.ldt){await t.uit(),this.mK();const e=this.Ewt(f.Adt,f.Xlt);this.iwt(e)&&await this.rwt(e),this.Cwt=e}}0;const _=this.Nwt(c,r,!1,n);this.DJ=void 0,await this.Twt.dit(Xh.ztt),gi(n),this.Iwt(),await _,gi(n),this.p$(),this.MM=!1,this.Qpt(new ja(this.zl))}catch(t){if(Lr(t))return void 0;0}}async Nwt(t,e,i,s){let n,o,h=!0,a=t;for(;;){const u=this.Zwt;if(u.V>0){const e=u.lM(t);a!==e&&(u.br(a)&&this.t_t.Nrt.l_===Gs.rD||(a=e,h=!0))}if(h)h=!1,n&&Ui(n),null==o||o.vl(),o=new Zs,o.wl(s),n=this.Kpt(a,e,i,o.fl);else if(!this.Jwt&&!this.jj)break;await ts((t=>Promise.race([n,this.Bl([r.ov,r.N_],t),this.t_t.Nrt.Bl(_n.Iet,t)])),s)}}async Kpt(t,e,i,s){for(this.FB.Fm(t,e,i);this.Jwt||this.jj;)await this.FB.Bl([r.ev,r.V_],s)}xwt(){void 0===this.Lwt&&(this.Lwt=this.Dwt,this.FB.pn(r.rv,this.zpt),this.FB.pn(r.ev,this.Qpt))}Bwt(){if(void 0===this.Lwt)return;const t=this.Dwt;this.Lwt=void 0,this.FB.kn(r.rv,this.zpt),this.FB.kn(r.ev,this.Qpt),this.Dwt!==t&&this.vO()}jpt(t){this.Ho=this.Ho.gM(t)}Gpt(t){const e=this.t_t.Nrt;let i=e.udt;if(f.Zs.T5&&(i=i.filter((t=>t.ct>=.2))),0===i.length)return;const s=i[0];if(t<=s.Tn)return s;for(const e of i)if(e.An>t)return e;return e.l_!==Gs.rD?i[i.length-1]:void 0}cgt(t){let e=t.ugt;if(f.Zs.T5)for(;e&&e.ct<.2;)e=e.ugt;return e}agt(t){let e=t.hgt;if(f.Zs.T5)for(;e&&e.ct<.2;)e=e.hgt;return e}async ba(t,e,i){if(this.eO.AB(t.contentProtection),this.Ypt(),this._wt&&!fo(this._wt)&&await this.ir(),!t||fo(t))return;this.GE=new Zs,i&&this.GE.wl(i),this._wt=t,this.Zpt=e,this.idt=t.abr,this.Tlt=t.ignoreEmbeddedTextTrackTypes;const s=function(t,e){return new dV([new fV(e),new _V(t)])}(new lV(this.qE,Boolean(this._wt.useCredentials),this.yrt),this.rst);this.Vgt(!0),this.ppt=new Jq({d_:f.Oh(this._wt.src),jgt:this._wt.liveOffset,tmt:this._wt.timeServer,ME:this._wt.useCredentials},this.Jpt(this.idt),this.qE,s,this._wt.dash),this.t_t=this.ppt.Pr,this.t_t.Nrt.kn(r.X_,this.$pt),this.t_t.Nrt.kn(r.G_,this.tyt),this.t_t.Nrt.kn(Rq.wgt,this.eyt),this.t_t.Nrt.kn(_n.Iet,this.vwt),await this.iyt.Rn(this.t_t.Nrt),await this.syt.Rn(this.t_t.Nrt),Yi(this.Tlt,nt.EMSG)||(this.wlt=new HV(this.HE),this.xu.PB(this.wlt.Z),await this.wlt.Rn(this.t_t.Nrt)),this.Kwt()}async nyt(){const t=this.t_t.Nrt._d;var e,i;(this.Vgt(t),t)?this.upt():(await Promise.all([null==(e=this.Twt)?void 0:e.uit(Xh.oet),null==(i=this.Mwt)?void 0:i.uit(Xh.oet)].filter(it)),this.mpt(),this.Xpt(),this.wwt.vl())}get _d(){return this.qgt}Vgt(t){this.qgt!==t&&(this.qgt=t,this.To(t?new Jt:new vV))}Kwt(){return this.t_t?(this.ryt=this.oyt(this.ryt,this.GE.fl),this.ryt.catch(this.bdt)):Promise.resolve()}async oyt(t,e){t&&(await t,gi(e));try{this.Sd===Fi.fA||this.KJ?await this.hyt(e):this.Sd===Fi.Nm&&await this.ayt(e)}catch(t){throw eo(t),this.CO(new io(Ot.MANIFEST_LOAD_ERROR,t.message,t)),t}}async hyt(t){await this.ayt(t),this.uyt||(this.uyt=!0,this.bwt.wl(this.Rn(this.Zpt,t)));try{await this.bwt.fI}catch(t){eo(t),this.CO(new io(Ot.MEDIA_DECODE_ERROR,t.message,t))}}async ayt(t){await sf(this.ppt.q,t)}_pt(e){const i=this.Twt;e!==i&&(this.Twt&&this.cpt(this.Twt),this.Mwt&&this.dpt(this.Mwt),i&&this.Qwt(this.Gwt),this.Twt=e,this.Mwt=i,this.spt(this.Twt),this.Mwt&&this.lpt(this.Mwt),this.EA.qf=e.ht,this.PA.qf=e.rt,this.Rpt(e),this.Npt.pn(Bs.oa,this.Bpt),t.cyt(this.Npt),this.Npt.kn(Bs.oa,this.Bpt),this.Npt.qf=e.nt,this.Cpt.qf=void 0,this.Ipt())}static cyt(t){for(const e of t.Ff)e.h_=_s.Th}be(){this.FB.be()}we(){this.FB.we()}CO(t){this.WB||(Ui(this.ir()),this.WB=Gg(t),this.qB=t,this.To(new An(t)))}Ypt(){this.WB=void 0,this.qB=void 0}swt(){const t=this.XB;t&&(t.Tj&&(t.Tj.QW=this.XM.rq),t.bj&&(t.bj.QW=this.XM.rq))}nwt(){const t=this.XB;t&&(t.Tj&&(t.Tj.ZW=this.XM.ZW),t.bj&&(t.bj.ZW=this.XM.ZW))}determineStallJumpTarget(){if(this.Twt)return this.Twt.sdt()&&this.zl>this.Twt.An-rR&&!this.Twt.adt?this.Twt.An:void 0}async ir(){this.pd=1,this.GE.vl(),this.Xpt(),this.mpt(),this.wwt.vl(),this.bwt.vl(),this.vpt=!1,this.Zd(),this.KJ=!1,this.EA.qf=void 0,this.PA.qf=void 0,this.Npt.qf=void 0,this.Cpt.qf=void 0,this.ryt&&(await this.ryt.catch($d),this.ryt=void 0),await Promise.all([this.Awt,this.a$,this.pwt,this.bwt.fI.catch($d)]),this.Twt&&(await this.Twt.bn(),this.Twt=void 0),this.Mwt&&(await this.Mwt.bn(),this.Mwt=void 0),await this.owt(),this.Cwt=void 0,this.Ppt=void 0,this.aO.ir(),await this.iyt.ir(),await this.syt.ir(),void 0!==this.wlt&&(this.xu.CB(this.wlt.Z),await this.wlt.bn(),this.wlt=void 0),this.HE.ir(),this.t_t&&(this.t_t.Nrt.pn(r.X_,this.$pt),this.t_t.Nrt.pn(r.G_,this.tyt),this.t_t.Nrt.pn(Rq.wgt,this.eyt),await this.ppt.bn(),this.t_t=void 0),this.jwt=!1,this.lyt=NaN,this.dyt=0,this.fyt=0,this.Lwt=void 0,this.MJ=!1,this.Ho=ri.BM(),this.wD=!0,this.DJ=void 0,this._yt=!1,this.MM=!1,this.uyt=!1,this.bwt=new Os,this.Wwt=0,this.qwt=0,this.Vwt=0,this._wt=void 0,this.Zpt=void 0,this.Tlt=[],this.Dpt=void 0,this.hwt={RA:0,CA:0,xA:0},await this.oO.ir(),this.FB.hO()}async bn(){this.Lo(),this.Ypt(),await this.ir(),this.Lo(),this.EA.bn(),this.PA.bn(),this.Twt&&await this.Twt.bn(),this.Mwt&&(this.dpt(this.Mwt),await this.Mwt.bn()),this.Npt.bn(),this.Cpt.bn(),this.xu.bn(),this.aO.bn(),this.vyt.hl(),await this.iyt.bn(),await this.syt.bn(),this.HE.bn(),this.FB.pn(r.N_,this.e0),this.FB.pn(vt.O_,this.TJ),this.FB.pn(r.M_,this.Z$),this.FB.pn(r.rv,this.zpt),this.FB.pn(r.ev,this.Qpt),this.FB.pn(r.tv,this.apt),this.FB.pn(r.vv,this.vO),this.FB.pn([r.Ah,r.Ch],this.gyt),this.FB.pn(VV,this.Rs),await this.oO.bn(),this.xu.bn(),this.XM.pn("GW",this.myt),this.XM.pn("YW",this.wyt),this.FB.pn(lt.aa,this.pyt),this.FB.pn([r.C_,r.R_],this.Rs),this.FB.lO=void 0,this.FB.g0=void 0}Gd(){return this.FB.ka}get rd(){return!1}tf(){return!1}ef(){}if(){}sf(){}nf(){this.gwt(!0)}constructor(t,e,i,s,n,o){super(),this.Twt=void 0,this.Mwt=void 0,this.KJ=!1,this.lyt=NaN,this.WB=void 0,this.qB=void 0,this.MJ=!1,this.Lwt=void 0,this.DJ=void 0,this._yt=!1,this.dyt=0,this.fyt=0,this.jwt=!1,this.GE=new Zs,this.bwt=new Os,this.uyt=!1,this.t_t=void 0,this.ppt=void 0,this.qgt=!0,this.zwt=!0,this.Wpt=void 0,this.Ho=ri.BM(),this.zB=Fi.KO,this.ryt=void 0,this.wD=!0,this._wt=void 0,this.Zpt=void 0,this.idt=void 0,this.Tlt=[],this.MM=!1,this.QB=new vS,this.mwt=new Zs,this.Awt=Promise.resolve(),this.h$=new Zs,this.a$=Promise.resolve(),this.vpt=!1,this.wwt=new Zs,this.pwt=Promise.resolve(),this.Cwt=void 0,this.wlt=void 0,this.Wwt=0,this.qwt=0,this.Vwt=0,this.jB=new fe,this.Dpt=void 0,this.hwt={RA:0,CA:0,xA:0},this.XB=void 0,this.upt=()=>{this.gwt()},this.vO=()=>{this.To(new oh(this.zl,this.Hl))},this.TJ=t=>{this.To(new eV(this.zl,t.GP,t.nI))},this.npt=t=>{this.Wwt+=t.NA,this.To(t)},this.rpt=t=>{const e=t.segments.filter((t=>t.dnt));t.track===Fs.Cm?this.qwt=e.length:t.track===Fs.Rm&&(this.Vwt=e.length)},this.e0=()=>{const t=this.ct;j(t)||t===this.lyt||(this.lyt=t,this.To(new Pt(this.lyt)))},this.gyt=()=>{this.vwt(),this.Hpt()},this.Z$=t=>{this.jl&&this.To(t)},this.tyt=t=>{this.Rs(t),this.jwt||(this.jwt=!0,this.vyt.yyt())},this.$pt=()=>{this.t_t.Nrt.pn(r.X_,this.$pt),this.To(new Ce)},this.hpt=t=>{this.CO(t.errorObject),this.To(t)},this.opt=t=>{this.CO(t.errorObject)},this.bdt=t=>{Lr(t)||this.CO(new io(Ot.MEDIA_DECODE_ERROR,t.message,t))},this.vwt=()=>{if(!this.md)if(this.Fwt())if(this.Hwt()){const t=this.t_t.Nrt.zgt;this.Fm(t,!0)}else;else{const t=this.t_t.Nrt.zgt;this.Fm(t,!0)}},this.zpt=t=>{this._yt=this.xd,this.To(t)},this.Qpt=t=>{const e=this._yt,i=this.xd;this._yt=i,e&&!i&&this.To(t)},this.apt=()=>{const t=this.Fd,e=this.Od;this.dyt===t&&this.fyt===e||(this.dyt=t,this.fyt=e,this.To(new Sn))},this.Bpt=t=>{const e=t.Ht;e.h_===_s.Jn?(this.Ept(e),this.Ppt=e):e===this.Ppt&&e.h_===_s.Th&&(this.Ppt=void 0,this.Ipt())},this.Vpt=()=>{this.MJ||this.Wpt&&(this.Wpt.lI(),this.Wpt=void 0)},this.Fpt=t=>{this.MJ||this.Wpt&&(this.Wpt.dI(t),this.Wpt=void 0)},this.eyt=()=>{this.nyt().catch(this.bdt)},this.pyt=t=>{this.CO(Kg(t.lt))},this.myt=()=>{this.swt()},this.wyt=()=>{this.nwt()},this.qE=t,this.rst=new WV(s),this.FB=n,this.lwt=o,this.XM=i,this.XM.kn("GW",this.myt),this.XM.kn("YW",this.wyt),this.yrt=e.retryConfiguration,this.EA=new aa,this.PA=new aa,this.eO=new Ne(t),this.FB.kn(r.N_,this.e0),this.FB.kn(vt.O_,this.TJ),this.FB.kn(r.M_,this.Z$),this.FB.kn(r.rv,this.zpt),this.FB.kn(r.ev,this.Qpt),this.FB.kn(r.tv,this.apt),this.FB.kn(r.vv,this.vO),this.FB.kn([r.Ah,r.Ch],this.gyt),this.FB.kn(VV,this.Rs),this.FB.kn(lt.aa,this.pyt),this.FB.lO=this.eO,this.FB.g0=this,this.FB.kn([r.C_,r.R_],this.Rs),this.vyt=new XV(this,this.FB),this.aO=new nn(this.vyt,!0),this.aO.kn(En.Ev,this.vwt),this.aO.kn(Hf,this.Rs),this.Npt=new Mt,this.Npt.kn(Bs.oa,this.Bpt),this.Cpt=new Mt,this.HE=this.Ayt(),this.iyt=new pV(this.HE),this.syt=new DV(this.HE),this.oO=new Ds(this.FB,this.qE),this.xu=new Vo([this.Npt,this.iyt.Z,this.syt.Z,this.oO.Z])}},XV=class extends Ji{get Pd(){return this.Ko.Pd}yyt(){this.To(new Io(this.zl,this.Pd))}constructor(t,e){super(e),this.Ko=t}};function GV(t,e){const i=t.filter((t=>"urn:mpeg:dash:role:2011"===t.i7)).map((t=>t.Qy)).filter(it);return e||Yi(i,"main")?Yi(i,"caption")?"captions":Yi(i,"subtitle")?"subtitles":Yi(i,"dub")?"translation":"main":Yi(i,"sign")?"sign":Yi(i,"description")?"descriptions":Yi(i,"commentary")?"commentary":"alternative"}function QV(t,e){var i;const s=Rt(t.Zdt,(t=>"urn:mpeg:dash:adaptation-set-switching:2016"===t.i7));var n;const r=null!=(n=null==s||null==(i=s.Qy)?void 0:i.split(","))?n:[],o=[];for(const t of r){const i=Number(t),s=Rt(e,(t=>t.o===i));s&&o.push(s)}return o}var KV=class extends zV{Qd(){if(NL(this.FB))return this.FB.Qd()}get tpt(){return NL(this.FB)?this.FB.Od:0}get ipt(){return NL(this.FB)?this.FB.Fd:0}async bn(){var t;await super.bn(),null==(t=this.byt)||t.bn()}Apt(t){var e,i;return((null!=(i=null==(e=this._wt)?void 0:e.seamlessSwitchStrategy)?i:$i.fA)!==$i.fA||!Bp.CP)&&super.Apt(t)}Spt(){return!(Bp.Zk&&Bp.$k<3)&&super.Spt()}Ayt(){return new th(this,new xa)}Jpt(t){return BL(t)}constructor(t,e,i,s,n,r){super(t,e,i,s,n,new OL(r)),this.h7=r,Bp.mP&&(this.byt=new XL(this))}},jV=class extends KV{async bn(){await super.bn(),await this.fO.dO(this.FB)}constructor(t,e,i,s,n,r,o){const h=new Eh(n);super(t,e,i,s,h.xO(r),o),this.fO=h}},YV=class extends UL{get Tyt(){return this.A8.Tyt}Ul(){return super.Ul().Mm(this.Tyt)}N7(){return super.N7().Mm(this.Tyt)}WQ(t,e,i){const s=this.Tyt;return super.WQ(t,{S3:e.S3-s,ct:e.ct,rS:e.rS-s},i)}nK(t,e){const i=this.Tyt;return super.nK(b.max(0,t-i),b.max(0,e-i))}WA(t,e,i){const s=this.Tyt;return super.WA(b.max(0,t-s),b.max(0,e-s),i)}BK(t,e){const i=this.Tyt;super.BK(b.max(0,t-i),b.max(0,e-i))}MK(t,e){const i=this.Tyt;super.MK(b.max(0,t-i),b.max(0,e-i))}constructor(t,e){super(e),this.A8=t}},ZV=class extends Fh{get Tyt(){return this.A8.Tyt}Ql(){return super.Ql()+this.Tyt}xj(t){super.xj(t-this.Tyt)}Cd(){return super.Cd().Mm(this.Tyt)}Oj(t,e,i,s){const n=this.Tyt;super.Oj(t-n,e-n,i,s)}k7(t){return new YV(this,t)}constructor(t,e){super(e),this.S7(e),this.A8=t}},JV=class extends qL{get a7(){return this.FB}get Tyt(){return this.Syt}set Tyt(t){this.Syt=t}Ul(){return super.Ul().Mm(this.Syt)}Wl(){return $V(super.Wl(),this.Syt)}Xl(){return super.Xl()+this.Syt}Ql(){return super.Ql()+this.Syt}Td(){return super.Td().Mm(this.Syt)}Cd(){return super.Cd().Mm(this.Syt)}Fm(t,e,i){const s=b.max(0,t-this.Syt);super.Fm(s,e,i)}UB(t){super.UB($V(t,-this.Syt))}Bd(){return this.xu}UE(t,e,i,s,n,r,o,h){return this.HE.UE(t,e,i,s,n,r,o,h)}QE(t){this.HE.QE(t)}hO(){this.HE.ir(),super.hO()}sO(){return!1}rO(t,e,i,s,n){throw new v("Not supported")}hl(){return this.t3.bn(),this.J2.bn(),this.HE.bn(),this.xu.bn(),super.hl()}y7(t){return new ZV(this,t)}p7(t){return new W(t)}rf(t){let e;switch(t.type){case r.Ah:e=new gs(t.currentTime+this.Syt);break;case r.Ch:e=new Cn(t.currentTime+this.Syt);break;case En.Pv:e=new Tt(t.currentTime+this.Syt);break;case r.vv:e=new oh(t.currentTime+this.Syt,$V(t.currentProgramDateTime,this.Syt));break;case r.Y_:e=new gt(t.currentTime+this.Syt);break;case r.rv:e=new Uh(t.currentTime+this.Syt);break;case r.ev:e=new ja(t.currentTime+this.Syt);break;case r.W_:e=new lu(t.currentTime+this.Syt);break;case r.V_:e=new cn(t.currentTime+this.Syt);break;case r.M_:e=new X(t.currentTime+this.Syt);break;case r.Z_:e=new Cs(t.currentTime+this.Syt,t.playbackRate);break;case r.mv:e=new Ao(t.currentTime+this.Syt,t.volume);break;case r.N_:e=new Pt(t.duration+this.Syt);break;case En.Rf:e=new Io(t.currentTime+this.Syt,t.readyState);break;default:e=t}super.rf(e)}we(){super.we(),this.J2.we()}be(){super.be(),this.J2.be()}constructor(t){super(t),this.Syt=0,this.HE=new th(this,new xa),this.xu=new Vo([this.HE.nt,super.Bd()]),this.J2=new hr,this.J2.v0(this.VB.parentElement),this.t3=new rr(this.J2.Se,this.NJ,this.xu,this.Cu,this.ka)}};function $V(t,e){return t?new Date(t.getTime()+1e3*e):void 0}var tz=class extends Ph{xO(t){if(t===Fs.Rm)return new JV(super.xO(t))}async dO(t){const e=t;await e.hl(),await super.dO(e.a7)}},ez=class extends KV{async Sj(t){await super.Sj(t),void 0===this.Eyt&&(this.Eyt=this.kyt(),this.FB.Tyt=this.Eyt)}kyt(){if(this.ct===1/0){const t=this.Uwt;if(t.V>0)return b.max(0,t.Tn(0)-300)}return 0}u$(t,e,i,s,n,r,o,h){return void 0===r&&(r=!1),void 0===o&&(o=_u.pmt),void 0===h&&(h=!1),h||(h=this.ct===1/0&&Bp.Zk&&Bp.$k<3&&t<=this.zl),super.u$(t,e,i,s,n,r,o,h)}async ir(){await super.ir(),this.Eyt=void 0,this.FB.Tyt=0}async bn(){await super.bn(),await this.FB.hl(),await this.fO.dO(this.FB)}static ux(t){var e;return(!t||"google-dai"!==(null==t||null==(e=t.ssai)?void 0:e.integration))&&(Bp.Zk&&Bp.$k<4)}constructor(t,e,i,s,n,r,o){const h=new tz(new Eh(n));super(t,e,i,s,h.xO(r),o),this.fO=h,this.Eyt=void 0}},iz=class extends Zr{get a7(){return this.FB}get Od(){return this.FB.Od}get Fd(){return this.FB.Fd}constructor(t){super(t)}},sz=class extends UL{C7(){return this.Pyt?this.hq:super.C7()}x7(t){this.Pyt?this.hq=t:super.x7(t)}Ul(){return this.Pyt?this.Iyt:super.Ul()}GC(){return this.Pyt?this.kx:super.GC()}N7(){return this.Pyt?this.Ryt:super.N7()}B7(){return this.Pyt?this.nq:super.B7()}O7(t){this.Pyt?this.nq=t:super.O7(t)}WQ(t,e,i){return this.qQ((i=>this.Cyt(t,e,i)),i)}Cyt(t,e,i){return super.WQ(t,e,i)}LK(){return this.qQ((()=>this.xyt()))}xyt(){return super.LK()}zQ(t,e,i){return this.qQ((i=>this.Dyt(t,e,i)),i)}Dyt(t,e,i){return super.zQ(t,e,i)}$V(){return this.Pyt?this.A3:super.$V()}PK(){this.Pyt?this.Nyt=!0:super.PK()}BK(t,e){this.dK(),this.Pyt?(this.Ryt=this.Ryt.gM(new ri([t,e])),this.Byt.push({l_:"Yst",ob:t,hb:e})):this.Oyt(t,e)}Oyt(t,e){super.BK(t,e)}nK(t,e){return this.qQ((()=>this.Myt(t,e)))}Myt(t,e){return super.nK(t,e)}MK(t,e){this.dK(),this.Pyt?(this.Ryt=this.Ryt.wM(new ri([t,e])),this.Byt.push({l_:"WA",ob:t,hb:e})):this.Lyt(t,e)}Lyt(t,e){super.MK(t,e)}WA(t,e,i){return this.qQ((i=>this.Fyt(t,e,i)),i)}Fyt(t,e,i){return super.WA(t,e,i)}FV(t){return this.qQ((()=>this.Uyt(t)))}Uyt(t){return super.FV(t)}async qQ(t,e){this.dK(),this.Pyt&&(await sf(this.Pyt.fI,e),this.dK()),gi(e);try{this.wK=t(e),await this.wK}finally{this.wK=void 0}}dK(){if(this.wK)throw new v("Internal error")}async Hyt(){if(this.Pyt)throw new p("Already locked");this.Pyt=new Os,this.Wyt(),this.wK&&(await this.wK.catch($d),this.Wyt())}qyt(){var t;null==(t=this.Pyt)||t.lI(),this.Pyt=void 0,this.Vyt()}Wyt(){this.kx=super.GC(),this.hq=super.C7(),this.nq=super.B7(),this.Iyt=super.Ul(),this.Ryt=super.N7(),this.A3=super.$V(),this.Nyt=!1}Vyt(){this.dK(),super.x7(this.hq),super.O7(this.nq);const t=this.Byt.slice();wr(this.Byt);for(const e of t)"Yst"===e.l_?this.Oyt(e.ob,e.hb):this.Lyt(e.ob,e.hb);this.Nyt&&super.PK(),this.Iyt.SM(super.Ul())||this.To(new Ci(uh.RV))}hl(){var t;null==(t=this.Pyt)||t.vl(),this.Pyt=void 0,super.hl()}constructor(t){super(t),this.wK=void 0,this.Pyt=void 0,this.hq=0,this.Iyt=ri.BM(),this.Ryt=ri.BM(),this.Byt=[],this.A3=!1,this.Nyt=!1,this.nq=0,this.kx=t.Vp}},nz=class extends sz{Ul(){var t,e;return super.Ul().gM(null!=(e=null==(t=this.zyt)?void 0:t.Fl)?e:ri.BM())}N7(){var t,e;return super.N7().gM(null!=(e=null==(t=this.zyt)?void 0:t.xK)?e:ri.BM())}x7(t){super.x7(t),this.zyt&&(this.zyt.ZW=t)}O7(t){super.O7(t),this.zyt&&(this.zyt.QW=t)}Oyt(t,e){super.Oyt(t,e),this.zyt&&this.zyt.BK(t,e)}Lyt(t,e){super.Lyt(t,e),this.zyt&&this.zyt.MK(t,e)}async Fyt(t,e,i){gi(i);const s=[];s.push(super.Fyt(t,e,i)),this.zyt&&s.push(this.zyt.WA(t,e,i)),await Promise.all(s)}MV(t){return!!super.MV(t)||this.A8.Xyt(t)}Uyt(t){return super.MV(t)?super.Uyt(t):this.A8.Gyt(t)}Qyt(t){var e,i;null==(e=this.zyt)||e.pn(Pn,this.M7),this.zyt=t,null==(i=this.zyt)||i.kn(Pn,this.M7)}constructor(t,e){super(e),this.zyt=void 0,this.A8=t}},rz=class extends Fh{MV(t){const e=void 0!==this.Ij,i=void 0!==this.Rj,s=t.Mj.some((t=>bt(t.YB,"audio"))),n=t.Mj.some((t=>bt(t.YB,"video")));return e===s&&i===n&&(!!super.MV(t)||(!(!this.Kyt||!this.Kyt.MV(t))||this.A8.jyt(t)))}async FV(t){return super.MV(t)?await super.FV(t):this.Kyt&&this.Kyt.MV(t)?(this.Yyt(),await this.FV(t)):(await this.A8.Zyt(t),await this.FV(t))}Xyt(t){return this.MV(this.Jyt(t))}Gyt(t){return this.FV(this.Jyt(t))}Jyt(t){const e=this.Vp,i=e.Mj.map((e=>bt(t.YB,"audio")&&bt(e.YB,"audio")||bt(t.YB,"video")&&bt(e.YB,"video")?t:e));return no({},e,{Mj:i})}Oj(t,e,i,s){super.Oj(t,e,i,s),this.Kyt&&this.Kyt.Oj(t,e,i,s)}$yt(){return!this.tAt&&this.eAt}Ql(){return void 0!==this.iAt?this.iAt:this.$yt()?this.aR:super.Ql()}xj(t){this.aR=t,this.iAt=void 0,this.$yt()||super.xj(t)}T7(){return!this.$yt()&&super.T7()}PK(){this.iAt=b.max(oz(this.XB.bj),oz(this.XB.Tj)),this.$yt()||super.PK()}mK(){this.iAt=void 0,this.$yt()||super.mK()}k7(t){return new nz(this,t)}sAt(){this.tAt=!this.tAt}Yyt(){const t=this.XB,e=this.Kyt;e&&(this.tAt=!this.tAt,this.S7(e),this.nAt(t),this.$yt()&&this.rAt())}nAt(t){var e,i;this.Kyt=t,null==(e=this.Ij)||e.Qyt(null==t?void 0:t.bj),null==(i=this.Rj)||i.Qyt(null==t?void 0:t.Tj)}oAt(t){const e=this.XB,i=this.Kyt;if(!i)return;const s=this.tAt,n=s?e:i,r=(s?i:e).Fl.CM(t);if(!r)return;const o=ZL(n.Fl,this.N7()).CM(r.An(0),ne);return!o||r.An(0)+ne>=o.An(0)?void 0:b.max(r.An(0),o.Tn(0))}hAt(t,e){if(this.eAt)return Promise.resolve();const i=this.tAt?this.Kyt:this.XB;return i?(this.eAt=!0,this.aAt((e=>{if(gi(e),this.eAt)return async function(t,e,i){gi(i);const s=[];t.bj&&s.push(Ge(t.bj,e,i));t.Tj&&s.push(Ge(t.Tj,e,i));await Promise.all(s),t.PK()}(i,t,e)}),e)):Promise.resolve()}rAt(){if(!this.eAt)return;const t=this.tAt?this.Kyt:this.XB;if(!t)return;var e;this.eAt=!1;const i=null!=(e=this.iAt)?e:this.aR;t.ct<i&&t.xj(i),t.mK()}uAt(t){var e;const i=null!=(e=this.iAt)?e:this.aR;t.xj(i),this.tAt?this.S7(t):this.nAt(t)}N7(){var t,e,i;const s=null!=(i=null==(t=this.Ij)?void 0:t.xK)?i:ri.BM();var n;const r=null!=(n=null==(e=this.Rj)?void 0:e.xK)?n:ri.BM();return s.gM(r)}async aAt(t,e){const i=[];this.Ij&&i.push(this.Ij.Hyt()),this.Rj&&i.push(this.Rj.Hyt());try{await Promise.all(i),await t(e)}finally{this.Ij&&this.Ij.qyt(),this.Rj&&this.Rj.qyt()}}I7(t){t.type===uh.RV&&this.A8.bK(),super.I7(t)}constructor(t,e){super(e),this.Kyt=void 0,this.aR=NaN,this.tAt=!1,this.eAt=!1,this.iAt=void 0,this.S7(e),this.A8=t}};function oz(t){if(!t)return 0;const e=t.Fl;return e.V>0?e.An(e.V-1):0}function At(t){return t.Vp.l_===$.rD}var xt,hz=class extends iz{get cAt(){return this.lAt}Ul(){return super.Ul().gM(this.lAt.Fl)}Ql(){if(!this.dAt){const t=this.XB;if(t&&At(t))return t.ct}return super.Ql()}c7(){return!!super.c7()&&!(!this.dAt&&!this.$V())}l7(){return!!super.l7()&&!(!this.dAt&&super.c7()&&!this.$V())}$V(){const t=this.XB;return!(!t||!At(t))&&t.$V}Td(){return this.Ho.gM(this.FB.bd)}Cd(){return super.Cd().gM(this.lAt.Rd)}Id(){return super.Id()}u7(){var t;return null!=(t=super.u7())?t:this.lAt.GB}Jd(){return this.FM=!1,super.Jd()}Zd(){this.FM=!0,super.Zd()}c0(){this.dAt=!0,super.c0(),this.lAt.c0()}l0(){this.dAt=!1,super.l0(),this.lAt.c0()}Xl(){var t;return null!=(t=this.DJ)?t:super.Xl()}Dd(){return void 0!==this.DJ||super.Dd()}Fm(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.fAt.vl(),this.h$.vl(),this.h$=new Zs,this._At=this.u$(t,e,i,this._At,this.h$.fl).catch($d)}async u$(t,e,i,s,n){this.DJ=t,this.c$=t,this.To(new Uh(t)),s&&await s.catch($d),gi(n),this.XB&&At(this.XB)&&this.XB.rAt(),this.DJ=void 0,super.Fm(t,e,i),this.lAt.Fm(t,e,i),this.vAt()}UB(t){const e=this.GB;if(!e||j(e.getTime()))return;const i=(t.getTime()-e.getTime())/1e3;this.Fm(i)}_0(){super._0(),this.lAt._0()}get Od(){return this.gAt.Od}get Fd(){return this.gAt.Fd}we(){this.iM&&(this.iM=!1,this.gAt.we())}be(){this.iM||(this.iM=!0,this.gAt.be())}async mAt(){var t;this.DJ=void 0,this.c$=NaN,this.Ho=ri.BM(),null==(t=this.wAt)||t.vl(),this.fAt.vl(),this.h$.vl(),this._At&&(await this._At.catch($d),this._At=void 0)}g7(t){super.g7(t),this.lAt.lO=t}m7(t){super.m7(t),this.lAt.g0=t}Bd(){return this.xu}UE(t,e,i,s,n,r,o,h){return this.HE.UE(t,e,i,s,n,r,o,h)}QE(t){this.HE.QE(t)}hO(){this.HE.ir(),super.hO()}async Rn(t){const e=await super.Rn(t);return At(e)&&this.vAt(),e}async ir(){await this.mAt(),await super.ir(),await this.lAt.ir()}async hl(){await this.mAt(),this.HE.bn(),this.xu.bn(),await super.hl()}y7(t){return new rz(this,t)}p7(t){return new W(t)}vAt(){this.fAt.vl(),this.fAt=new Zs,this._At=this.pAt(this._At,this.fAt.fl).catch($d)}async pAt(t,e){if(t&&await t.catch($d),this.XB&&At(this.XB))for(;;){let t;for(gi(e),this.yAt()&&this.sAt(),this.XB.rAt(),gi(e);gi(e),!this.yAt();){if(t=this.XB.oAt(this.Xl()),void 0!==t){0,this.AAt(),await this.XB.hAt(t,e),gi(e),this.lAt.Fm(t);break}await ts((t=>Promise.race([this.Bl(r.vv,t),this.bAt(t)])),e)}for(gi(e);!this.yAt();)await this.FB.Bl([r.vv,r.M_,En.Rf],e)}}yAt(){const t=this.XB;if(void 0===t||!At(t))return!1;const e=this.Xl(),i=this.FB.Fl;if(!this.FB.jl&&i.br(e))return!1;return!!ZL(this.lAt.Fl,t.N7()).bM(e,e+ne)}sAt(){if(this.TAt)return;this.TAt=!0,this.Ho=this.Td();const t=mR(this),e=this.Dd(),i=this.Id(),s=this.FB,n=this.lAt,r=this.XB;r.rAt(),r.sAt(),wR(n,t),this.b7(n),this.lAt=s,s.Zd(),s.ld=!0,this.TAt=!1;const o=this.Dd();e!==o&&(o?this.To(new Uh(this.zl)):this.To(new ja(this.zl)));const h=this.Id();i!==h&&this.To(new Io(this.zl,h)),o||this.AAt()}AAt(){const t=this.FB,e=this.gAt;if(e===t)return;const i=this.Fd,s=this.Od;this.gAt=t,this.iM&&(e.we(),t.be());const n=this.Fd,r=this.Od;n>0&&r>0&&(i!==n||s!==r)&&this.To(new Sn)}jyt(t){return void 0!==this.lAt.iz([t])}async Zyt(t){this.AAt();const e=this.XB,i=this.lAt;await i.ir();const s=await i.Rn(t);e.uAt(s)}bAt(t){return this.wAt=new Os,sf(this.wAt.fI,t)}bK(){var t;null==(t=this.wAt)||t.lI()}rf(t){t.type===r.rv&&this.c$===t.currentTime||(t.type===r.ev&&(this.c$=NaN,this.AAt()),t.type!==En.Rf&&t.type!==r.Ch&&t.type!==r.M_||this.TAt||!this.yAt()?(t.type!==r.M_||this.jl)&&super.rf(t):this.vAt())}constructor(t,e,i){super(t),this.dAt=!1,this.DJ=void 0,this.c$=NaN,this.Ho=ri.BM(),this.FM=!0,this.TAt=!1,this.iM=!0,this.wAt=void 0,this._At=void 0,this.fAt=new Zs,this.h$=new Zs,this.lAt=e,this.gAt=t,this.FB.be(),this.lAt.we(),this.HE=new th(this,i),this.xu=new Vo([this.HE.nt,super.Bd()])}},az=class extends hz{get a7(){return this.FB}get cAt(){return this.lAt}we(){super.we(),this.J2.we()}be(){super.be(),this.J2.be()}get VB(){return this.FB.VB}get iY(){return this.FB.iY}get Xd(){return this.FB.Xd}set Xd(t){this.FB.Xd=t}v0(t){this.FB.v0(t),this.lAt.v0(t)}PJ(){this.FB.PJ()}sf(){this.FB.sf(),this.lAt.sf()}Qd(){return this.FB.Qd()}b7(t){const e=this.Gd(),i=this.Qd();super.b7(t),this.Gd()!==e&&this.To(new Cu),this.Qd()!==i&&this.To(new Ls)}hl(){return this.t3.bn(),this.J2.bn(),super.hl()}constructor(t,e){super(t,e,new xa),this.J2=new hr,this.J2.v0(t.VB.parentElement),this.t3=new rr(this.J2.Se,this.NJ,this.nt,this.Cu,this.ka)}},uz=class extends Ph{xO(t){if(t===Fs.Rm){const e=super.xO(t),i=super.xO(t);return new az(e,i)}return super.xO(t)}async dO(t){t instanceof az?(await t.hl(),await super.dO(t.a7),await super.dO(t.cAt)):await super.dO(t)}},cz=class extends KV{async bn(){await super.bn(),await this.fO.dO(this.FB)}static ux(t){var e;return!Bp.Ks&&!Bp.PP&&!(t&&"google-dai"===(null==(e=t.ssai)?void 0:e.integration))}constructor(t,e,i,s,n,r,o){const h=new Eh(new uz(n));super(t,e,i,s,h.xO(r),o),this.fO=h}},lz=class extends Fh{k7(t){return new sz(t)}GC(){return this.SAt?this.kx:super.GC()}Ul(){return this.SAt?this.Iyt:super.Ul()}Ql(){return this.SAt?this.aR:super.Ql()}xj(t){this.SAt?(this.aR=t,this.EAt=!0):super.xj(t)}Cd(){return this.SAt?this.kAt?this.kAt.WK():this.Bj:super.Cd()}Oj(t,e,i,s){this.SAt?this.kAt=new la(t,e,i,s):super.Oj(t,e,i,s)}T7(){return this.SAt?this.A3&&!1!==this.Nyt:super.T7()}PK(){this.SAt?this.Nyt=!0:super.PK()}mK(){this.SAt?this.Nyt=!1:super.mK()}MV(t){return!this.SAt&&super.MV(t)}FV(t){return this.SAt?Promise.reject(new p("Not supported")):super.FV(t)}async Hyt(){if(this.SAt)throw new p("Already locked");this.SAt=!0,this.Wyt();const t=[];this.Ij&&t.push(this.Ij.Hyt()),this.Rj&&t.push(this.Rj.Hyt()),await Promise.all(t)}qyt(){this.SAt=!1,this.Ij&&this.Ij.qyt(),this.Rj&&this.Rj.qyt(),this.Vyt()}Wyt(){this.kx=super.GC(),this.Iyt=super.Ul(),this.aR=super.Ql(),this.Bj=super.Cd(),this.EAt=!1,this.Nyt=void 0,this.kAt=void 0}Vyt(){if(this.EAt&&(super.xj(this.aR),this.EAt=!1),void 0!==this.kAt){const t=this.kAt;super.Oj(t.Tn,t.An,t.qK,t.VK),this.kAt=void 0}void 0!==this.Nyt&&(this.Nyt?super.PK():super.mK(),this.Nyt=void 0)}constructor(t){super(t),this.SAt=!1,this.Iyt=ri.BM(),this.aR=0,this.EAt=!1,this.A3=!1,this.Nyt=void 0,this.Bj=ri.BM(),this.kAt=void 0,this.S7(t),this.kx=t.Vp}},dz=class extends qL{get a7(){return this.FB}Jd(){return void 0!==this.XB&&At(this.XB)&&this.jl&&this.Fm(0),super.Jd()}Fm(t,e,i){void 0!==this.XB&&At(this.XB)&&this.jl&&t<this.ct&&this.PAt(),super.Fm(t,e,i)}c0(){this.IAt=!0,super.c0()}l0(){this.IAt=!1,this.RAt()||super.l0()}RAt(){return this.IAt||this.CAt}xAt(){this.CAt||(this.CAt=!0,super.c0())}DAt(){this.CAt&&(this.CAt=!1,this.RAt()||super.l0())}Rn(t){this.NAt.vl();const e=this.m8(t,this.BAt);return this.OAt=e,e}async m8(t,e){return e&&await e.catch($d),this.DAt(),await super.Rn(t)}y7(t){return new lz(t)}p7(t){return new W(t)}ir(){this.NAt.vl();const t=this.MAt(this.BAt);return this.OAt=t,t}async MAt(t){return t&&await t.catch($d),this.DAt(),await super.ir()}PAt(){this.xAt(),this.NAt.vl(),this.NAt=new Zs,this.BAt=oa(this.LAt(this.OAt,this.BAt,this.NAt.fl),this.NAt).catch(yr)}async LAt(t,e,i){t&&await t.catch($d),e&&await e.catch($d),gi(i);const s=this.XB;if(!s||!At(s))return;const n=s.Vp;await s.Hyt(),await this.FB.ir();const r=await this.FB.Rn(n);r.xj(s.ct),s.S7(r),s.qyt(),this.DAt()}async hl(){this.NAt.vl(),this.BAt&&(await this.BAt.catch($d),this.BAt=void 0),this.RAt()&&super.l0(),await super.hl()}constructor(...t){super(...t),this.IAt=!1,this.CAt=!1,this.OAt=void 0,this.BAt=void 0,this.NAt=new Zs}},fz=class extends Ph{xO(t){if(t===Fs.Rm)return new dz(super.xO(t))}async dO(t){const e=t;await e.hl(),await super.dO(e.a7)}static ux(){return Bp.RP}};ES(new class extends bL{wg(t,e,i,s,n,r,o){const h=new cu(qr.zP.L9,qr.zP.M9,qr.zP.O9,qr.zP.U9);let a;a=ez.ux(o)?ez:cz.ux(o)?cz:jV;let u=e;return fz.ux()&&(u=new fz(u)),new a(i,s,n,h,u,Fs.Rm,t)}BO(){return!0}constructor(...t){super(...t),this.OO=en.dB}}),function(t){t.FAt="currentbufferingrenditionchange",t.UAt="HAt",t.WAt="qAt",t.VAt="zAt"}(xt||(xt={}));var _z,vz,gz=class{constructor(t,e){var i,s;this.Yf=tm(),this.XAt=e,this.l_=t.l_,this.GAt=t.GAt,this.QAt=t.QAt,this.KAt=t.KAt,this.l=t.l,this.gs=t.gs,this.jAt=t.jAt,this.YAt=t.YAt,this.ZAt=void 0===t.jft,this.JAt=null!=(s=null==(i=t.JAt)?void 0:i.split(","))?s:[]}};function mz(t,e){return t.l_===e.l_&&(t.l===e.l||!(!t.GAt||!e.GAt))}function wz(t,e){return void 0!==t&&void 0!==e&&pz(t,e)}function pz(t,e){return t.XAt===e.XAt}function yz(t,e){return pz(t,e)&&t.jAt===e.jAt}function Az(t,e){for(const i of t)if(yz(i,e))return!0;return!1}!function(t){t.$At="alternative",t.tbt="main",t.ebt="commentary",t.ibt="",t.WS="descriptions",t.sbt="main-desc",t.nbt="translation"}(_z||(_z={})),function(t){t.$At="alternative",t.tbt="main",t.ebt="commentary",t.ibt="",t.HS="captions",t.i_="sign",t.xm="subtitles"}(vz||(vz={}));var bz,Tz=class extends d{get Zf(){return this.rbt}get Ot(){const t=this.obt();if(!t)return!1;for(const e of this.Jf.Ff)if(e.hbt===t)return!0;return!1}set Ot(t){if(t!==this.Ot&&t){let t=this.Jf.Hf(0).hbt;const e=this.Ko.abt;for(const i of this.Jf.Ff)if(i.ubt===e){t=i.hbt;break}this.cbt(t)}}get jf(){if(!this.Ot)return;const t=this.Ko.lbt;for(const e of this.Jf.Ff)if(Az(t,e.hbt))return e}get ma(){return this.vf||(this.vf=ni(this)),this.vf}get o(){return this.GA.toString()}get Yf(){return this.GA}get jh(){return this.QA}set jh(t){t!==this.QA&&(this.QA=t,this.To(new cr(this)))}get gs(){return this.uR}get h_(){return this.Ot?"enabled":"disabled"}get $f(){return this.fnt}set $f(t){let e=[];if(t){e=t.filter((t=>{const e=this.jf?ti(this.jf):void 0;return f.Zs.E5(e,ti(t))})).filter((e=>this.Jf.qA(t)&&e.s9))}else e=this.Jf.Ff.filter((t=>t.s9));if(0!==e.length){if(!(t===this.fnt||this.fnt&&Dr(this.fnt,e))){if(this.fnt=t?e:void 0,this.Ko.dbt(e.map((t=>t.ubt))),1===e.length){const t=e[0].ubt,i=this.EY===Fs.Rm,s=this.XM.lq;Ui(this.Ko.fbt(t,{_bt:!0,vbt:s&&i,gbt:s&&!i}))}this.To(new uU(e,this))}}else this.To(new fU)}jA(t){this.Ot=t}bn(){this.Lo(),this.Ko.pn(xt.FAt,this.mbt),this.Ko.pn(xt.UAt,this.wbt);for(const t of this.Jf.Ff)t.bn();this.Jf.ir()}constructor(t,e,i,s,n){var r;super(),this.EY=t,this.Ko=e,this.XM=i,this.mh=s,this.Jf=n,this.fnt=void 0,this.pbt=void 0,this.ybt=()=>this.To(new cr(this)),this.mbt=()=>{const t=this.jf;t&&this.pbt!==t&&(this.pbt=t,this.To(new LH(t)))},this.wbt=()=>{const t=this.Ot;this.Abt!==t&&(this.Abt=t,this.mh.To(new Ys(this)),this.To(new Ys(this)))},this.pbt=this.jf,this.Abt=this.Ot;const o=n.Hf(0);var h,a;this.QA=null!=(h=null==o?void 0:o.hbt.l)?h:"",this.uR=null!=(a=null==o?void 0:o.hbt.gs)?a:"",this.rbt=null==o||null==(r=o.hbt)?void 0:r.JAt.map(Rz).filter(it),this.GA=ws(),this.Ko.kn(xt.FAt,this.mbt),this.Ko.kn(xt.UAt,this.wbt);for(let t=0;t<this.Jf.V;t++){this.Jf.Hf(t).kn("update",this.ybt)}}},Sz=class extends Tz{get Lt(){return _z.tbt}obt(){return this.Ko.bbt}cbt(t){Ui(this.Ko.Tbt(t))}constructor(t,e,i,s){super(Fs.Cm,t,e,i,s)}},Ez=class extends Tz{get Lt(){return vz.tbt}obt(){return this.Ko.Sbt}cbt(t){Ui(this.Ko.Ebt(t))}constructor(t,e,i,s){super(Fs.Rm,t,e,i,s)}},kz=class extends d{get o(){return String(this.ubt.o)}get Yf(){return this.ubt.o}get wB(){return this.ubt.wB}get Xft(){return this.ubt.Xft}get jh(){var t;return null!=(t=this.QA)?t:this.hbt.l}set jh(t){this.jh!==t&&(this.QA=t,this.To(new Ja(this.ma)))}get jft(){return this.hbt.XAt.kbt()}get Gft(){return this.ubt.Gft}oE(){}bn(){this.Lo()}constructor(t,e){super(),this.ubt=t,this.hbt=e,this.QA="",this.s9=!0}},Pz=class extends kz{get jdt(){return 0}get t7(){var t;return(null==(t=this.ubt.t7)?void 0:t.Pbt)||""}get ma(){return this.vf||(this.vf=this.pa()),this.vf}pa(){return LW(this)}constructor(t,e){super(t,e),this.vf=void 0}},Iz=class extends kz{get t7(){var t;return(null==(t=this.ubt.t7)?void 0:t.Ibt)||""}get Qft(){return this.Rbt}set Qft(t){this.Rbt!==t&&(this.Rbt=t,this.To(new Ja(this.ma)))}get wot(){var t,e;return null!=(e=null!=(t=this.Cbt)?t:this.ubt.wot)?e:0}set wot(t){this.wot!==t&&(this.Cbt=t,this.To(new Ja(this.ma)))}get Ci(){var t,e;return null!=(e=null==(t=this.ubt.xbt)?void 0:t.Ci)?e:0}get Ti(){var t,e;return null!=(e=null==(t=this.ubt.xbt)?void 0:t.Ti)?e:0}get ma(){return this.vf||(this.vf=this.pa()),this.vf}pa(){return MW(this)}constructor(t,e){super(t,e),this.vf=void 0,this.Rbt=0,this.Cbt=void 0}};function Rz(t){return"public.accessibility.describes-video"===t?we.r_:"public.accessibility.transcribes-spoken-dialog"===t?we.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?we.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?we.n_:void 0}!function(t){t.Dbt="FATAL",t.aa="ERROR",t.Nbt="WARNING",t.Bbt="INFO",t.Obt="DEBUG"}(bz||(bz={}));var Cz=new class{Mbt(t){if(!this.Ot())return!1;const e=[];return!(e.length>0)||e.some((e=>e.toLowerCase()===t.toLowerCase()))}Lbt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.Mbt(t)&&f.x5("DEBUG "+t+" -",...i)}hp(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.Mbt(t)&&f.x5("INFO "+t+" -",...i)}Fbt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.Mbt(t)&&f.Uv("WARNING "+t+" -",...i)}lt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.Mbt(t)&&f.D5("ERROR "+t+" -",...i)}Ubt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.Mbt(t)&&f.D5("FATAL "+t+" -",...i)}constructor(){this.Ot=()=>!1}},vi="HLSPlaylistParser",mn="Discontinuity",yt="Buffering",xz=class{Rtt(){var t;const e=null==(t=this.Ko.Pr)?void 0:t.Hbt;if(!e||0===e.length)return void Cz.Fbt("LLHLSTrackConfigurator","The HLSModel contains no variant streams.");var i;const s=null!=(i=Rt(e,(t=>0!==t.Wbt.length&&0!==t.qbt.length)))?i:e[0],n=e.filter((t=>t!==s));for(const t of s.Wbt){const e=new yh,i=[];e.HA(new Pz(s,t)),i.push(t);for(const s of n)for(const n of s.Wbt)if(mz(n,t)&&!Az(i,n)){e.HA(new Pz(s,n)),i.push(n);break}this.Vbt.tt(new Sz(this.Ko,this.XM,this.Vbt,e))}for(const t of s.qbt){const e=new yh,i=[];e.HA(new Iz(s,t)),i.push(t);for(const s of n)for(const n of s.qbt)if(mz(n,t)&&!Az(i,n)){e.HA(new Iz(s,n)),i.push(n);break}this.zbt.tt(new Ez(this.Ko,this.XM,this.zbt,e))}}Xbt(){this.Gbt(this.Vbt),this.Gbt(this.zbt)}Gbt(t){const e=[];for(const i of t.Ff){const t=[];for(const e of i.Jf.Ff)Yi(e.ubt.Qbt,e.hbt)||t.push(e);for(const e of t)i.Jf.WA(e),e.bn();0===i.Jf.V&&e.push(i)}for(const i of e)t.it(i),i.bn()}Kbt(t,e){const i=this.jbt(t);void 0!==i&&(i.wot=e)}Ybt(t,e){const i=this.jbt(t);void 0!==i&&(i.Qft=e)}jbt(t){for(const e of this.zbt.Ff){const i=Rt(e.Jf.Ff,(e=>e.hbt===t));if(void 0!==i)return i}}constructor(t,e,i,s){this.Ko=t,this.XM=e,this.Vbt=i,this.zbt=s}},ur=class{get g3(){const t=1-this.Zbt**this.Jbt;return this.$bt/t}Iit(t,e){const i=this.Zbt**t,s=e*(1-i)+i*this.$bt;j(s)||(this.$bt=s,this.Jbt+=t)}FV(t){const e=b.exp(b.log(.5)/t);if(e===this.Zbt)return;if(0===this.Jbt)return void(this.Zbt=e);const i=this.g3,s=1-e**this.Jbt;this.$bt=i*s,this.Zbt=e}constructor(t){this.$bt=0,this.Jbt=0,this.Zbt=b.exp(b.log(.5)/t)}},li=class t{get g3(){return this.Oit()?b.max(this.tTt.g3,this.eTt.g3):this.iTt}Iit(t){const e=f.Al(),i=t;this.sTt&&void 0!==this.nTt&&e-this.nTt>=this.rTt&&this.ir(),this.oTt+=1,this.tTt.Iit(1,i),this.eTt.Iit(1,i),this.hTt.push(i),this.hTt.length>this.aTt&&this.hTt.shift(),this.nTt=e}Oit(){return void 0!==this.nTt&&f.Al()-this.nTt<=this.rTt}ir(){this.tTt=new ur(this.uTt),this.eTt=new ur(this.cTt),this.oTt=0,this.hTt=[],this.nTt=void 0}constructor(e=t.lTt,i=t.dTt,s=t.Mit,n=!1){this.oTt=0,this.hTt=[],this.nTt=void 0,this.rTt=6e4,this.aTt=10,this.uTt=e,this.cTt=i,this.iTt=s,this.sTt=n,this.tTt=new ur(e),this.eTt=new ur(i)}};li.lTt=2,li.dTt=5,li.Mit=.1;var Dz,Nz=class{UW(t){for(const e of this.fTt)e.UW(t)}HW(t){for(const e of this.fTt)e.HW(t)}WW(t,e){for(const i of this.fTt)i.WW(t,e)}qW(t){for(const e of this.fTt)e.qW(t)}constructor(t){this.fTt=t}},Bz=class{UW(t){this._Tt=t}HW(t){this.vTt.Iit(t-this._Tt)}WW(t){}qW(t){}constructor(t){this._Tt=0,this.vTt=t}},Oz=class{HW(t){this.gTt=t}WW(t,e){this.Uit.Iit(t-this.gTt,e.byteLength),this.gTt=t}qW(t){}UW(t){}constructor(t){this.gTt=0,this.Uit=t}},Mz=class{UW(t){}WW(t,e){const i=e.byteLength,s=this.mTt;this.mTt=i;const n=t-this.In;this.In=t,this.wTt.Lz(e);const r=!this.wTt.pTt(),o=i>=this.yTt;s!==f.Zs.A5&&r&&o&&this.Uit.Iit(n,i)}HW(t){this.In=t}qW(t){}constructor(t,e=0){this.wTt=new Lz,this.In=0,this.mTt=0,this.Uit=t,this.yTt=e}},Lz=class extends Jn{pTt(){return this.ATt}Lz(t){this.ATt=!1,super.Lz(t)}Oz(t,e){this.bTt&&this.bTt!==E_.pm||(this.ATt=!0),super.Oz(t,e),this.bTt=t}Kz(t){return!1}Yz(t){}Jz(t){}constructor(...t){super(...t),this.bTt=void 0,this.ATt=!1}};(Dz||(Dz={})).TTt="sample";var Fz=class extends d{rB(){if(!this.Oit())return;const t=f.Al();t-this.STt>1e3&&(this.STt=t,nh.zP.rB(this.g3))}constructor(...t){super(...t),this.STt=0}},rh=class t extends Fz{Iit(t,e){const i=8*e/t;this.tTt.Iit(t,i),this.eTt.Iit(t,i),this.ETt+=e,this.rB(),this.To(new Ci(Dz.TTt))}get g3(){return this.Oit()?b.min(this.tTt.g3,this.eTt.g3):this.iTt}Oit(){return this.ETt>=this.kTt}constructor(e=t.lTt,i=t.dTt,s=t.PTt,n=t.Mit){super(),this.ETt=0,this.kTt=s,this.tTt=new ur(e),this.eTt=new ur(i),this.iTt=n}};rh.PTt=128e3,rh.Mit=lS,rh.lTt=.5,rh.dTt=5;var Uz=class{get wB(){return this.Uit.g3}get pB(){return this.ITt.g3}yB(t){if("segment"!==t.l_&&"preload-hint"!==t.l_)return;const e=[new Bz(this.ITt)];return"stream"!==t.DE||!function(t){return"segment"===t.l_&&"initialization-segment"!==t.BE}(t)&&"preload-hint"!==t.l_?e.push(new Oz(this.Uit)):e.push(new Mz(this.Uit,1e3)),new Nz(e)}RTt(t){this.Uit=new rh(rh.lTt,rh.dTt,1,t)}constructor(t){const e=t.wB>0?t.wB:rh.Mit,i=t.pB>0?t.pB:li.Mit;this.Uit=new rh(rh.lTt,rh.dTt,1,e),this.ITt=new li(li.lTt,li.dTt,i)}};var Hz=class extends Ci{constructor(t){super(xt.VAt),this.lt=t}},Wz=class{iz(t,e){const i={l_:$.rD,ZB:[],Mj:t.map((t=>({YB:t}))),Gj:e};return Promise.resolve(void 0!==this.e9.iz([i]))}constructor(t){this.e9=t}},qz=(t,e,i,s,n)=>t.filter((t=>!!Yi(s,t)||1.1*t.wB<=i.wB)),Vz=(t,e,i,s,n)=>t.filter((t=>{if(Yi(s,t))return!0;let r=1/0;for(const e of t.Qbt){var o,h;r=b.min(r,null!=(h=null!=(o=e.XAt.CTt)?o:e.XAt.xTt)?h:1/0)}r===1/0&&(r=1);const a=2*i.pB+t.wB*r/i.wB;return t.wB<=e.wB||n.DTt>a})),zz=(t,e,i,s,n)=>gh(t,((t,e)=>e.wB-t.wB)),Xz=(t,e,i,s,n)=>t.every((t=>t.Gft&&!j(t.Gft)))?gh(t,((t,e)=>e.Gft-t.Gft)):t,Gz=(t,e,i,s,n)=>0===s.length?t:gh(t,((t,e)=>{const i=Yi(s,t)?1:0;return(Yi(s,e)?1:0)-i})),Qz=(t,e,i,s,n,r)=>t.filter((t=>!t.t7||!e.t7||!(void 0!==e.t7.Ibt&&void 0!==t.t7.Ibt&&!ca(e.t7.Ibt,t.t7.Ibt)&&!r.NTt({YB:'video/mp4; codecs="'+t.t7.Ibt+'"'}))&&!(void 0!==e.t7.Pbt&&void 0!==t.t7.Pbt&&!ca(e.t7.Pbt,t.t7.Pbt)&&!r.BTt({YB:'audio/mp4; codecs="'+t.t7.Pbt+'"'})))),Kz=(t,e,i,s,n)=>{if(!1===n.Gnt)return t;if(f.Zs.m5)return t;const r=f.Zs.w5;var o;const h=(null!=(o=null==r?void 0:r.width)?o:n.Ti)*KF;var a;const u=(null!=(a=null==r?void 0:r.height)?a:n.Ci)*KF;for(let e=0;e<t.length;e++){const i=t[e];if(void 0===i.xbt)return t;const s=i.xbt.Ci,n=i.xbt.Ti;if(s<=u&&n<=h)return t.slice(e,t.length)}return[]},jz=(t,e,i,s,n)=>function(t,e){const i=e.Gnt;if(void 0===i&&!f.Zs.Ks)return t;if(!1===i)return t;for(let i=0;i<t.length;i++){const s=t[i];if(void 0===s.xbt)return t;const n=s.xbt.Ci,r=s.xbt.Ti;if(n===e.Ci&&r===e.Ti)return t.slice(i,t.length);if(n<e.Ci||r<e.Ti)return t.slice(0===i?i:i-1,t.length)}return[]}(t,n);var zs,mo,Bu,Wt,Yz="AbrEvaluator",Zz=class{get OTt(){return this.XM.LW}MTt(t){this.Knt=t}async LTt(t,e,i,s,n){return(await this.FTt(t,e,i,s,n))[0]}async FTt(t,e,i,s,n){if(0===t.length)throw new v("AbrEvaluator - Unable to select optimal variant stream from an empty list.");Cz.Lbt(Yz,"Performing optimal variant stream selection.");const r=this.OTt;let o=t;for(const t of this.Knt){const h=t(o,e,r,i,s,n);o=ya(h)?h:await h}if(0===o.length){Cz.Fbt(Yz,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[Br(t,(t=>t.wB))]}return o}constructor(t){this.XM=t,this.Knt=[Qz,qz,Vz,zz,Kz,jz,Xz,Gz]}};function Jz(t,e){return[t,void 0!==e?t+e-1:cs]}function $z(t){return Boolean(t.Yw)}function tX(t){return Boolean(t.O9)}function Bi(t){return t?t.Svt?t.Qy+"@"+t.Svt.Tn+"-"+(null!=(e=t.Svt.V)?e:""):""+t.Qy:"";var e}function eX(t,e){if(e===t)return!0;if(e.Qy!==t.Qy)return!1;if(!t.Svt)return!0;if(e.Svt){const i=Jz(t.Svt.Tn,t.Svt.V),s=Jz(e.Svt.Tn,e.Svt.V);if(i[0]<=s[0])return void 0===i[1]||void 0!==s[1]&&i[1]>=s[1]}return!1}function iX(t){const e=!!t.UTt||void 0;return{o:t.o,HTt:t.HTt,GB:t.GB,WTt:t.WTt,ct:t.ct,qTt:t.qTt,UTt:e,VTt:t.zTt,XTt:t.GTt,QTt:t.QTt,KTt:t.KTt}}function sX(t,e){var i,s,n;return{Pbt:null!=(i=e.Pbt)?i:null==t?void 0:t.Pbt,Ibt:null!=(s=e.Ibt)?s:null==t?void 0:t.Ibt,jTt:null!=(n=e.jTt)?n:null==t?void 0:t.jTt}}async function nX(t,e,i,s,n){const r=e.filter((t=>Ei(t,"audio"))),o=e.filter((t=>Ei(t,"video"))),h=[],a=i.map((t=>async function(t,e,i){if(!t.jft)return;if(!t.YTt)return;if(t.xE!==Bu.ZTt)return;const s=rX(t.YTt);if(!s)return;if(s.KP===_i)return{vg:s,SB:[],EB:void 0,FN:t.jft};if(s.KP===O_&&t.YTt===U_)return{vg:s,SB:[],EB:t.jft,FN:void 0};{Cz.hp("HLSDrmUtils","Fetching key uri "+t.jft+".");const n=await e.GS({YS:t.jft,ME:i});return{vg:s,SB:[await n.bN()],EB:void 0,FN:void 0}}}(t,s,n)));var u;const c=function(t,e){if(0===e.length)return t;const i=t=>{const i=e.indexOf(t.vg.KP);return i>=0?i:e.length};return gh(t,((t,e)=>i(t)-i(e)))}((await Promise.all(a)).filter(it),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const e of c){const i=CV(null!=t?t:{},e.vg),s="cbcs";h.push({vg:e.vg,SB:e.SB,EB:e.EB,FN:e.FN,bO:[{initDataTypes:[e.vg.GP],audioCapabilities:xV(r,s,null==i?void 0:i.audioRobustness),videoCapabilities:xV(o,s,null==i?void 0:i.videoRobustness),persistentState:null==i?void 0:i.persistentState,distinctiveIdentifier:null==i?void 0:i.distinctiveIdentifier}]})}return h}function rX(t){return t===Ua?Mp:t===Sh?Op:t===F_?Lp:t===U_?Fp:void 0}function oX(t){if("#"!==t[0])throw new v("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function hX(t){return"#"!==t[0]?t:t.split(":",1)[0]}function aX(t){const e=t.indexOf(":");if(-1===e||t.length<e+1)throw new v("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(e+1)}function uX(t){const e=zo(aX(t));if(void 0===e)throw new v("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return e}function _a(t){const e={},i=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=i.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?e[n]=r:Cz.Fbt(vi,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=i.exec(t)}return e}function cX(t,e){const i=_a(t);let s,n;try{s=i.URI?f.Fv(i.URI,e):void 0,n=function(t){switch(t){case"AUDIO":return zs.Cm;case"VIDEO":return zs.Rm;case"SUBTITLES":return zs.xm;case"CLOSED-CAPTIONS":return zs.JTt}throw new v("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(i.TYPE)}catch(e){throw new v("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const r=i["GROUP-ID"],o=i.LANGUAGE,h=i["ASSOC-LANGUAGE"],a=i.NAME,u="YES"===i.DEFAULT;let c="YES"===i.AUTOSELECT;const l="YES"===i.FORCED,d=i["INSTREAM-ID"],_=i.CHARACTERISTICS,g=i.CHANNELS;if(r||Cz.Fbt(vi,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),o||Cz.Fbt(vi,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),a||Cz.Fbt(vi,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),n===zs.JTt?(s&&Cz.Fbt(vi,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),d?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(d)||Cz.Fbt(vi,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):Cz.Fbt(vi,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):d&&Cz.Fbt(vi,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),u&&!c&&(c=!0,i.AUTOSELECT&&Cz.Fbt(vi,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),i.FORCED&&n!==zs.xm&&Cz.Fbt(vi,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===r||void 0===a)throw new v("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{$Tt:h,tSt:g,JAt:_,jAt:r,QAt:c,GAt:u,KAt:l,YAt:d,gs:o,l:a,l_:n,jft:s}}function lX(t,e,i){const s=_a(t);let n,r,o;try{n=f.Fv(i,e),o=function(t){if(void 0===t)return;const e=t.split("x"),i=Number(e[0]),s=Number(e[1]);if(j(i)||j(s))throw new v("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{Ti:i,Ci:s}}(s.RESOLUTION),r=function(t){if(!t)return;let e,i,s;const n=t.split(",");for(const t of n){const n=t.trim();bt(n,"mp4a")?e="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n?e=n:bt(n,"avc")||bt(n,"hvc1")||bt(n,"hev1")||bt(n,"dvh")||bt(n,"vp09")||bt(n,"av01")?i=t:s=s?s+","+n:n}return{Pbt:e,Ibt:i,jTt:s}}(s.CODECS)}catch(e){throw new v("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const h=zo(s.BANDWIDTH),a=zo(s["AVERAGE-BANDWIDTH"]),u=zo(s.SCORE),c=zo(s["FRAME-RATE"]),l=s["HDCP-LEVEL"],d=[];if(void 0!==s["ALLOWED-CPC"]){const t=s["ALLOWED-CPC"].split(",");d.push(...t.map((t=>{const e=t.split(":");return{keysystem:e[0],label:e[1]}})))}const _=s["VIDEO-RANGE"],g=s.AUDIO,m=s.VIDEO,w=s.SUBTITLES,p=s["CLOSED-CAPTIONS"];if(void 0===h?Cz.Fbt(vi,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==a&&a>h&&Cz.Fbt(vi,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),r||Cz.hp(vi,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),r&&r.Ibt&&void 0===o&&Cz.hp(vi,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===l||Yi(["TYPE-0","TYPE-1","NONE"],l)||Cz.Fbt(vi,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===_||Yi(["SDR","PQ","HLG"],_)||Cz.Fbt(vi,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===h)throw new v("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{eSt:d,iSt:g,Xft:a,wB:h,sSt:p,t7:r,wot:c,nSt:l,xbt:o,Gft:u,rSt:w,jft:n,oSt:m,hSt:_}}function dX(t,e){const i=_a(t);if(!i.URI)throw new v("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return lX(t,e,i.URI)}catch(e){throw new v("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function zo(t){const e=Number(t);return j(e)?void 0:e}function fX(t,e){const i=_a(t);let s,n;try{s=function(t){switch(t){case"NONE":return Bu.KO;case"AES-128":return Bu.aSt;case"SAMPLE-AES":return Bu.ZTt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new v("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(i.METHOD),n=i.URI?AX(i.URI,e):void 0}catch(e){throw new v("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=i.KEYFORMAT,o=i.IV,h=i.KEYFORMATVERSIONS;let a,u,c,l,d;if(s!==Bu.KO){if(c=r||U_,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(rX(c)!==Mp)throw new v("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=Bu.ZTt}else a=s;u=n,l=o?Vv(o):void 0,d=h?h.split("/").map((t=>Number(t))):[1]}else a=Bu.KO,(n||r||h||o)&&Cz.Fbt(vi,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{xE:a,jft:u,uSt:l,YTt:c,cSt:d}}function _X(t){const e=aX(t);if(!e)return[void 0,""];const[i,s]=e.split(",");return[zo(i),s]}function vX(t,e){const i=t.split("@"),s=zo(i[0]),n=i.length>1?zo(i[1]):e;if(void 0===s||void 0===n)throw new v("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{Tn:n,V:s}}function gX(t){if(void 0!==t)return vX(t,void 0)}function mX(t,e){return vX(aX(t),e)}function wX(t,e){const i=_a(t);try{const t=AX(i.URI,e);return{Qy:t,Svt:gX(i.BYTERANGE)}}catch(e){throw new v("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function pX(t){const e=aX(t);if(!e)throw new v("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const i=new Date(e);if(!TT(i))throw new v("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return i}function yX(t){const e=_a(t),i=e["START-DATE"],s=e["END-DATE"],n=zo(e["PLANNED-DURATION"]);let r,o,h,a=zo(e.DURATION);void 0!==e["SCTE35-CMD"]&&(r=Vv(e["SCTE35-CMD"]).buffer),e["SCTE35-IN"]&&(o=Vv(e["SCTE35-IN"]).buffer),e["SCTE35-OUT"]&&(h=Vv(e["SCTE35-OUT"]).buffer);const u="YES"===e["END-ON-NEXT"],c=function(t){const e={};for(const i of g.keys(t)){const s=t[i];void 0!==s&&bt(i,"X-")&&(e[i]=s)}return e}(e),l=e.ID,d=e.CLASS;let f,_;if(void 0===i)Cz.Fbt(vi,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+i+".");else if(f=new Date(i),_=void 0!==s?new Date(s):void 0,TT(f)||Cz.Fbt(vi,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const e=new Date(f.getTime()+1e3*a);_?_.getTime()!==e.getTime()&&(Cz.Fbt(vi,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),_=e):_=e}else _&&(a=(f.getTime()-_.getTime())/1e3);if(u&&(e.CLASS||Cz.Fbt(vi,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),e.DURATION&&Cz.Fbt(vi,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),_&&Cz.Fbt(vi,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===l&&Cz.Fbt(vi,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===l||void 0===f)throw new v("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:l,HTt:d,GB:f,WTt:_,ct:a,qTt:n,GTt:r,KTt:o,QTt:h,UTt:u,zTt:c}}function AX(t,e){if(void 0===t)throw new v("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return f.Fv(t,e)}function bX(t,e){const i=_a(t),s=zo(i.DURATION),n=AX(i.URI,e),r=gX(i.BYTERANGE),o="YES"===i.INDEPENDENT,h="YES"===i.GAP;if(void 0===s)throw new v("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:s,jft:{Qy:n,Svt:r},lSt:o,dSt:h}}function TX(t){const e=_a(t);return{fSt:"YES"===e["CAN-BLOCK-RELOAD"],_St:zo(e["CAN-SKIP-UNTIL"]),vSt:"YES"===e["CAN-SKIP-DATERANGES"],gSt:zo(e["HOLD-BACK"]),mSt:zo(e["PART-HOLD-BACK"])}}function SX(t,e){const i=_a(t);if(void 0===i.URI)throw new v("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=AX(i.URI,e),n=zo(i["LAST-MSN"]),r=zo(i["LAST-PART"]);if(void 0===n)throw new v("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{jft:s,wSt:n,pSt:r}}function EX(t,e){var i;const s=_a(t),n=zo(s["SKIPPED-SEGMENTS"]),r=null==(i=s["RECENTLY-REMOVED-DATERANGES"])?void 0:i.split("\t");if(void 0===n)throw new v("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{ySt:n,ASt:r,bSt:e}}function kX(t){const e=zo(_a(t)["PART-TARGET"]);if(void 0===e)throw new v("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return e}function PX(t){switch(aX(t)){case"VOD":return Wt.TSt;case"EVENT":return Wt.SSt;default:return Cz.Fbt(vi,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),Wt.wA}}function IX(t,e){const i=_a(t);let s,n;try{s=function(t){if(void 0===t)throw new v("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return mo.ESt;if("PART"===t)return mo.kSt;throw new v("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(i.TYPE),n=AX(i.URI,e)}catch(e){throw new v("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=zo(i["BYTERANGE-START"]),o=zo(i["BYTERANGE-LENGTH"]);let h;return void 0===r&&void 0===o||(h={Tn:r||0,V:o}),{l_:s,jft:{Qy:n,Svt:h}}}!function(t){t[t.Cm=0]="Cm",t[t.Rm=1]="Rm",t[t.xm=2]="xm",t[t.JTt=3]="JTt"}(zs||(zs={})),function(t){t[t.ESt=0]="ESt",t[t.kSt=1]="kSt"}(mo||(mo={})),function(t){t[t.KO=0]="KO",t[t.aSt=1]="aSt",t[t.ZTt=2]="ZTt"}(Bu||(Bu={})),function(t){t[t.wA=0]="wA",t[t.TSt=1]="TSt",t[t.SSt=2]="SSt"}(Wt||(Wt={}));var RX=class t{PSt(){const t=this.ISt[this.RSt];return this.RSt+=1,t}CSt(){return this.ISt[this.RSt]}Um(){const e=new t("");return e.RSt=0,e.ISt=this.ISt.slice(this.RSt),e}static xSt(t){if(!t)return[];return t.split(/[\r\n]+/).map((t=>t.trim())).filter((t=>t))}constructor(e){this.RSt=0,this.ISt=t.xSt(e)}};function CX(t,e,i){const s=t.jft;let n=t.Tw,r=t.DSt,o=t.Tn;switch(i){case"#EXT-X-VERSION":n=function(t){const e=uX(t);return j(e)?(Cz.Fbt(vi,"Playlist version is NaN: "+t+"."),1):e}(e);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":o=function(t){const e=_a(t),i=zo(e["TIME-OFFSET"]);if(void 0===i)throw new v("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{NSt:i,BSt:"YES"===e.PRECISE}}(e);break;case"#EXT-X-DEFINE":Cz.Fbt(vi,"Ignoring unsupported #EXT-X-DEFINE: "+e+".");break;default:Cz.hp(vi,"Ignoring unrecognized line or comment: "+e+".")}return{jft:s,Tw:n,DSt:r,Tn:o}}function xX(t,e){return t.map((t=>t.xE===Bu.KO||t.uSt?t:no({},t,{uSt:DX(e)})))}function DX(t){const e=new DataView(new ArrayBuffer(16)),i=new ds;return i.Mm(8),Cv(e,i,rt.fromNumber(t)),new S(e.buffer)}function NX(t,e,i){Cz.hp(vi,"Parsing M3U8 playlist at "+t+".");const s=new RX(i);if("#EXTM3U"!==s.PSt())throw new v("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(i)?function(t,e){let i;try{i=f.Fv(t)}catch(e){throw Cz.Fbt(vi,"The master playlist has no valid base URI: "+t+"."),new v("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let s={jft:i,DSt:void 0,Tn:void 0,Tw:void 0};const n=[],r=[],o=[],h=[];for(;;){const t=e.PSt();if(!t)break;try{const a=oX(t);switch(a){case"#EXT-X-MEDIA":{const e=cX(t,i);n.push(e);break}case"#EXT-X-STREAM-INF":{const s=lX(t,i,e.PSt());r.push(s);break}case"#EXT-X-I-FRAME-STREAM-INF":{const e=dX(t,i);o.push(e);break}case"#EXT-X-SESSION-DATA":Cz.Fbt(vi,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const e=fX(t,i);h.push(e);break}default:s=CX(s,t,a)}}catch(e){Cz.Fbt(vi,"Ignoring unparsable line: "+t,e)}}let a=s.Tw;var u;const c=null!=(u=s.DSt)&&u,l=s.Tn;return void 0===a&&(Cz.Fbt(vi,"The playlist has no #EXT-X-VERSION, assuming version is 2."),a=2),a>=8&&(r.some((t=>void 0!==t.Gft))||o.some((t=>void 0!==t.Gft)))&&(r.some((t=>void 0===t.Gft))||o.some((t=>void 0===t.Gft)))&&Cz.Fbt(vi,"If one master playlist variant stream has a SCORE, all variants should have it."),{jft:i,Tw:a,DSt:c,Tn:l,OSt:o,MSt:h,Yw:n,LSt:r}}(t,s):function(t,e,i){let s={jft:t,DSt:void 0,Tn:void 0,Tw:void 0};const n=[];let r,o,h,a,u=!1,c=!1;const l=[],d=rs();let _,g,m,w,p,y,A,b,T,S=[],E=[],k=!1,P=!1;const I=[],R=[];let C,x,D,N,B,O=0,M=!1,L=Wt.wA,F=!1,U=0;try{B=f.Fv(t)}catch(e){throw Cz.Fbt(vi,"The media playlist has no valid base URI: "+t+".",e),new v("HLSPlaylistParser - Could not parse HLS media playlist.")}const H=i.Um();for(;void 0===x||void 0===D;){const t=H.PSt();if(!t)break;try{switch(hX(t)){case"#EXT-X-MEDIA-SEQUENCE":x=uX(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":D=uX(t)}}catch(e){Cz.Fbt(vi,"Ignoring unparsable line: "+t,e)}}void 0===x&&(Cz.hp(vi,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),x=0),void 0===D&&(Cz.hp(vi,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),D=0);let W=x,q=D;for(;;){const t=i.PSt();if(!t)break;let e=!1;try{const i=hX(t);switch(i){case"#EXTINF":e=!0,[_,g]=_X(t);break;case"#EXT-X-BYTERANGE":e=!0,m=mX(t,O),m&&(O=m.Tn+m.V);break;case"#EXT-X-DISCONTINUITY":e=!0,k=!0,q++;break;case"#EXT-X-KEY":{var V;e=!0;const i=fX(t,B);if(i.xE===Bu.KO){d.clear(),T=void 0;break}var z;const s=null!=(z=null==(V=i.YTt)?void 0:V.toString())?z:"identity";d.set(s,i),i.xE===Bu.aSt&&(T=i);break}case"#EXT-X-MAP":e=!0,p=wX(t,B),y=T;break;case"#EXT-X-PROGRAM-DATE-TIME":e=!0,A=pX(t);break;case"#EXT-X-GAP":e=!0,P=!0;break;case"#EXT-X-BITRATE":e=!0,b=uX(t);break;case"#EXT-X-TARGETDURATION":r=uX(t);break;case"#EXT-X-DATERANGE":{const e=yX(t);n.push(e);break}case"#EXT-X-PART":{e=!0;const i=bX(t,B);E.push(i);break}case"#EXT-X-PRELOAD-HINT":{const e=IX(t,B);I.push(e);break}case"#EXT-X-SKIP":{l.length>0&&Cz.Fbt(vi,"#EXT-X-SKIP must appear before any #EXTINF tags."),e=!0;const i=EX(t,W);U=i.ySt,N=i.ASt,W+=i.ySt;break}case"#EXT-X-SERVER-CONTROL":{const e=TX(t);u=e.fSt,o=e._St,c=e.vSt,h=e.gSt,a=e.mSt;break}case"#EXT-X-RENDITION-REPORT":{const e=SX(t,B);R.push(e);break}case"#EXT-X-PART-INF":C=kX(t);break;case"#EXT-X-MEDIA-SEQUENCE":e&&Cz.Fbt(vi,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":e&&Cz.Fbt(vi,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":M=!0;break;case"#EXT-X-PLAYLIST-TYPE":L=PX(t);break;case"#EXT-X-I-FRAMES-ONLY":F=!0;break;default:if(bt(i,"#"))s=CX(s,t,i);else{w=f.Fv(t,B);const e=p?{jft:p,FSt:y}:void 0,i={MSt:xX(Kd(d),W),_S:S,USt:E,ct:_,tO:g,HSt:k,jft:{Svt:m,Qy:w},WSt:e,qSt:A,dSt:P,VSt:b,bSt:W,zSt:q};l.push(i),W++,S=[],E=[],_=void 0,g=void 0,k=!1,m=void 0,w=void 0,A=void 0,P=!1,b=void 0}}}catch(e){Cz.Fbt(vi,"Ignoring unparsable line: "+t,e)}}if(E.length){const t=p?{jft:p,FSt:T}:void 0,e={MSt:xX(Kd(d),W),_S:S,USt:E,ct:_,tO:g,HSt:k,jft:void 0,WSt:t,qSt:A,dSt:P,VSt:b,bSt:W,zSt:q};l.push(e)}let X=s.Tw;var G;const Q=null!=(G=s.DSt)&&G,K=s.Tn;void 0===X&&(Cz.Fbt(vi,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),X=2),void 0===r&&Cz.Fbt(vi,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const j=l.length,Y=j>0;Y||Cz.Fbt(vi,"The HLS media playlist contains no segments.");const Z=Y&&l[j-1].USt.length>0;return Z&&void 0===C&&Cz.Fbt(vi,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),Z&&void 0===a&&Cz.Fbt(vi,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{fSt:u,_St:o,vSt:c,XSt:n,zSt:D,GSt:M,DSt:Q,gSt:h,QSt:F,bSt:x,ySt:U,mSt:a,CTt:C,KSt:L,jSt:I,ASt:N,YSt:R,ZSt:r,O9:l,Tn:K,jft:B,JSt:e,Tw:X}}(t,e,s)}var BX=class{get jft(){return this.XAt.jft}get t7(){return this.$St}set t7(t){this.$St=t?MX(t):void 0,this.tEt=!0}get eEt(){return this.tEt}get Qbt(){return this.iEt}get Wbt(){return this.iEt.filter((t=>t.l_===zs.Cm))}get qbt(){return this.iEt.filter((t=>t.l_===zs.Rm))}get sEt(){return this.iEt.filter((t=>t.l_===zs.xm))}get nEt(){return this.iEt.filter((t=>t.l_===zs.JTt))}rEt(t){for(const e of this.iEt){const i=e.XAt.rEt(t);if(void 0!==i)return i}}oEt(t){for(const e of this.iEt){const i=e.XAt.oEt(t);if(void 0!==i)return i}}hEt(t){so(this.iEt,t)}constructor(t,e,i){var s,n,r,o;this.o=OX++,this.Gft=void 0,this.xbt=void 0,this.Xft=void 0,this.tEt=!1,this.iEt=[],this.XAt=e,this.wB=t.wB,this.Xft=t.Xft,this.Gft=t.Gft,this.$St=t.t7?MX(t.t7):void 0,this.xbt=t.xbt,this.wot=t.wot,this.iSt=null!=(s=t.iSt)?s:"aEt"+this.o,this.oSt=null!=(n=t.oSt)?n:"uEt"+this.o,this.rSt=null!=(r=t.rSt)?r:"cEt"+this.o,this.sSt=null!=(o=t.sSt)?o:"lEt"+this.o,this.iEt=i}},OX=0;function MX(t){return no({},t,{Ibt:t.Ibt?Pw(t.Ibt):void 0})}var LX,FX=class{get ob(){var t;return this.pb+(null!=(t=this.dEt)?t:0)}get fEt(){return this._Et}get MSt(){return this.vEt.MSt}gEt(t,e){this.pb=t,this._Et=e}constructor(t,e,i,s,n){this.S3=void 0,this.vEt=t,this.mEt=e,this.pb=i,this._Et=s,this.ct=n.ct,this.jft=n.jft,this.lSt=n.lSt,this.dSt=n.dSt}},UX=class{get ob(){var t;return this.pb+(null!=(t=this.wEt)?t:0)}get pEt(){return this.pb}get ct(){return this.aR}get jft(){return this.yEt}get AEt(){return this.bEt}get fEt(){return this._Et}get USt(){return this.TEt}get SEt(){return this.EEt}get hb(){var t;return this.ob+(null!=(t=this.aR)?t:this.EEt)}set dEt(t){this.wEt=t;for(const e of this.TEt)e.dEt=t}get dEt(){return this.wEt}kEt(t){return this.TEt[t]}PEt(t){for(let e=0;e<this.TEt.length;e++){const i=this.TEt[e],s=i.ob,n=s+i.ct;if(s<=t&&t<=n)return t===n&&e+1<this.TEt.length?this.TEt[e+1]:i}}IEt(t){for(let e=this.TEt.length-1;e>=0;e--){const i=this.TEt[e];if(i.ob<=t)return i}}REt(t){let e=this.IEt(t);for(;e&&!e.lSt&&e.mEt>0;)e=this.kEt(e.mEt-1);return e}gEt(t,e,i){const s=t.USt.length!==this.TEt.length||i!==this._Et;this.bEt=e,this._Et=i,this.aR=t.ct,null!=this.qSt||(this.qSt=t.qSt),void 0===this.yEt&&(this.yEt=t.jft),s&&this.CEt(t.USt)}CEt(t){this.TEt.length>t.length&&(this.TEt.length=t.length);let e=0;for(let i=0;i<t.length;i++){const s=t[i],n=this._Et&&i===t.length-1,r=this.pb+e;if(i<this.TEt.length)this.TEt[i].gEt(r,n);else{const t=new FX(this,i,r,n,s);this.TEt.push(t)}e+=s.ct}this.EEt=e}xEt(){wr(this.TEt),this.EEt=0}constructor(t,e,i,s,n){this.S3=void 0,this.TEt=[],this.EEt=0,this.pb=t,this.WSt=n.WSt,this.bEt=i,this._Et=s,this.aR=n.ct,this.qSt=n.qSt,this.yEt=n.jft,this.dSt=n.dSt,this.bSt=n.bSt,this.HSt=n.HSt,this.zSt=e,this.MSt=n.MSt,this.CEt(n.USt)}};!function(t){t.DEt="YES",t.NEt="v2"}(LX||(LX={}));var HX=class extends Xs{};var WX=class extends No{get ma(){return this.vf||(this.vf=function(t){return Dh(xh(t),{get content(){return t.R},get class(){return t.HTt},get startDate(){return t.GB},get endDate(){return t.WTt},get duration(){return t.ct},get plannedDuration(){return t.qTt},get endOnNext(){return t.UTt},get scte35Cmd(){return t.XTt},get scte35Out(){return t.QTt},get scte35In(){return t.KTt},get customAttributes(){return t.VTt}})}(this)),this.vf}get HTt(){return this.BEt}get GB(){return this.OEt}get WTt(){return this.MEt}get ct(){return this.aR}get qTt(){return this.LEt}get UTt(){return this.FEt}get XTt(){return this.UEt}get QTt(){return this.HEt}get KTt(){return this.WEt}get VTt(){return this.qEt}Kn(t){let e=!1;var i;(void 0===this.BEt&&void 0!==t.HTt&&(e=!0,this.BEt=t.HTt),void 0===this.MEt&&void 0!==t.WTt&&(e=!0,this.MEt=t.WTt),void 0===this.aR&&void 0!==t.ct&&(e=!0,this.aR=t.ct),void 0===this.LEt&&void 0!==t.qTt&&(e=!0,this.LEt=t.qTt),!this.FEt&&t.UTt&&(e=!0,this.FEt=t.UTt),e=this.updateCustomAttributes(t,e),void 0===this.UEt&&void 0!==t.XTt&&(e=!0,this.UEt=t.XTt),void 0===this.HEt&&void 0!==t.QTt&&(e=!0,this.HEt=t.QTt),void 0===this.WEt&&void 0!==t.KTt&&(e=!0,this.WEt=t.KTt),this.VEt(),this.zEt(),this.XEt(),e)&&(this.To(new ms(this)),null==(i=this.yb)||i.To(new Ss(this)))}updateCustomAttributes(t,e){let i=e;if(t.VTt)for(const e of g.keys(t.VTt))void 0===this.qEt[e]&&(i=!0,this.qEt[e]=t.VTt[e]);return i}VEt(){this.aR&&!this.MEt&&(this.MEt=new Date(this.OEt.getTime()+ET(this.aR)))}zEt(){this.MEt&&!this.aR&&(this.aR=ST(this.MEt.getTime()-this.OEt.getTime()))}XEt(){this.bb===1/0&&(this.MEt||this.aR)&&(this.bb=qX(this.pb,this.aR,this.OEt,this.MEt))}constructor(t,e){super(e,qX(e,t.ct,t.GB,t.WTt),void 0,!1,t.o),this.BEt=t.HTt,this.OEt=t.GB,this.MEt=t.WTt,this.aR=t.ct,this.LEt=t.qTt,this.FEt=Boolean(t.UTt),this.qEt=t.VTt||{},this.UEt=t.XTt,this.HEt=t.QTt,this.WEt=t.KTt,this.VEt(),this.zEt()}};function qX(t,e,i,s){return it(e)?t+e:s?t+(ST(s.getTime())-ST(i.getTime())):1/0}var VX=class extends RC{Kn(t,e){zX(this,XX(t),e)}XE(t){GX(this.L.Ff,t),super.XE(t)}constructor(){super(void 0,void 0,nt.DATE_RANGE)}};function zX(t,e,i){const s=t.L.Ff;for(let i=s.length-1;i>=0;i--){const n=s[i],r=Rt(e,(t=>t.o===n.o));r?n.Kn(r):t.$S(n)}for(const s of e){const e=s.GB;if(void 0!==e&&!t.gY(s.o)){const n=i(e),r=new WX(s,n);GX(t.L.Ff,r),t.XE(r)}}}function XX(t){const e=rs(),i=[];for(const s of t)if(e.has(s.o)){const t=e.get(s.o),i=no({},t,pf(s),{VTt:no({},t.VTt,s.VTt)});e.set(s.o,i)}else e.set(s.o,s),i.push(s.o);return i.map((t=>e.get(t)))}function GX(t,e){const i=jh(t,(t=>t.HTt===e.HTt));i&&i.UTt&&i.Kn({o:i.o,WTt:e.GB})}var QX=String.fromCharCode(95),KX=QX+"HLS_msn",jX=QX+"HLS_part",YX=QX+"HLS_skip",ZX="HLSMediaPlaylist",JX=class{get GSt(){if(0===this.evt.length)return!1;return this.evt[this.evt.length-1].fEt}get ct(){return this.aR}get Rd(){return this.Bj}get GEt(){return this.QEt}get xTt(){return this.KEt}get CTt(){return this.jEt}get gSt(){return this.GSt?0:this.YEt?this.YEt:this.KEt?3*this.KEt:void 0}get mSt(){var t;return null!=(t=this.ZEt)?t:this.jEt?3*this.jEt:void 0}get fSt(){return this.JEt}get _St(){return this.$Et}get vSt(){return this.tkt}get KSt(){return this.ekt}get ikt(){return void 0!==this.CTt}get skt(){if(this.GSt)return!0;const t=f.Al()/1e3,e=this.nkt,i=this.rkt;return void 0!==e&&t-e<i}get nkt(){return this.okt}get dEt(){return this.wEt}get rkt(){var t;return null!=(t=this.KEt)?t:void 0===this.okt?5:1}get O9(){return this.evt}get XSt(){return this.hkt}get akt(){return this.ukt}set akt(t){this.ukt=t}get Tn(){return this.SS}get ckt(){return this.lkt}kbt(t){if(!t)return this.jft;const e=f.Oh(this.jft);return void 0!==t.bSt&&e.searchParams.append(KX,String(t.bSt)),void 0!==t.dkt&&e.searchParams.append(jX,String(t.dkt)),void 0!==t.nw&&e.searchParams.append(YX,t.nw),e.href}yit(t){const e=this.evt;if(0===e.length)return;const i=t-e[0].bSt;return i<0||i>=e.length?void 0:e[i]}fkt(t){if(0===this.evt.length)return;const e=XW($X.zP,this.evt,t);if(!(e<0)){const i=this.evt[e];return t===i.hb&&e+1<this.evt.length?this.evt[e+1]:i}{const e=this.evt[this.evt.length-1];if(t===e.hb)return e}}_kt(t){if(0===this.evt.length)return;const e=this.evt[0];if(t<e.hb)return e;const i=this.evt[this.evt.length-1];return t>=i.ob?i:this.fkt(t)}rEt(t){const e=this._kt(t);if(void 0===e)return;for(let i=e.bSt-this.evt[0].bSt;i>=0;i--){const e=this.evt[i];if(void 0!==e.qSt)return new Date(e.qSt.getTime()+1e3*(t-e.ob))}}oEt(t){let e;for(const i of this.evt)if(tG(i))if(void 0===e)e=i;else{if(!(i.qSt.getTime()<=t.getTime()))break;e=i}if(void 0!==e)return e.ob+(t.getTime()-e.qSt.getTime())/1e3}vkt(t){switch(t){case mo.ESt:return this.gkt;case mo.kSt:return this.mkt;default:return}}gEt(t){var e;void 0===this.KEt&&(this.KEt=null!=(e=t.ZSt)?e:this.wkt(t));void 0===this.YEt&&void 0!==t.gSt&&(this.YEt=t.gSt),void 0===this.jEt&&void 0!==t.CTt&&(this.jEt=t.CTt),void 0===this.ZEt&&void 0!==t.mSt&&(this.ZEt=t.mSt),this.JEt=t.fSt,this.$Et=t._St,this.tkt=t.vSt,this.ekt=t.KSt,this.rvt(t),this.pkt(t);const i=Rt(t.jSt,(t=>t.l_===mo.ESt)),s=Rt(t.jSt,(t=>t.l_===mo.kSt));this.gkt=i?{jft:i.jft,l_:i.l_,zSt:t.zSt}:void 0,this.mkt=s?{jft:s.jft,l_:s.l_,zSt:t.zSt}:void 0,this.okt=f.Al()/1e3,this.ykt(),null!=this.SS||(this.SS=t.Tn)}ykt(){this.QEt=this.Akt(),this.Bj=this.bkt(this.QEt),this.aR=this.Tkt()}Akt(){const t=this.O9;if(0===t.length)return ri.BM();const e=t[0].ob,i=t[t.length-1].hb;return new ri([e,i])}bkt(t){if(0===t.V||this.GSt)return t;const e=t.Tn(0),i=t.An(0)-this.jgt;return i<e?ri.DM(e):new ri([e,i])}get jgt(){return this.GSt?0:null!=(i=null!=(e=null!=(t=this.Skt)?t:this.mSt)?e:this.gSt)?i:0;var t,e,i}Tkt(){return 0===this.evt.length?0:this.GSt?Od(this.evt,(t=>{var e;return null!=(e=t.ct)?e:t.SEt})):1/0}wkt(t){let e;for(const i of t.O9)if(void 0!==i.ct){const t=b.max(1,b.round(i.ct));(void 0===e||e<t)&&(e=t)}if(void 0===e)throw new v("HLSModel - Could not determine required segment target duration.");return e}rvt(t){if(0===t.O9.length)return wr(this.evt),void this.Ekt();const e=this.kkt(t);if(!e)return;let i,s,n;e.Pkt>0&&this.evt.splice(0,e.Pkt);const r=t.ySt;if(r>0){if(r>this.evt.length)throw new HX("New playlist skips over missing segments.");const e=this.evt[r-1];if(void 0===e.ct)throw new HX("New playlist skips over an incomplete segment.");i=e.pEt+e.ct,n=e.zSt-t.zSt,s=r;for(let t=0;t<r;t++)this.evt[t].xEt()}else i=e.Ikt,n=0,s=0;for(let e=0;e<t.O9.length;e++,s++){const r=t.O9[e],o=0===e,h=t.GSt&&e===t.O9.length-1,a=r.ct,u=r.zSt+n;if(s<this.evt.length){const t=this.evt[s];0,t.gEt(r,o,h)}else{let t=r;if(this.evt.length>0&&void 0===t.WSt){t=no({},t,{WSt:this.evt[this.evt.length-1].WSt})}const e=new UX(i,u,o,h,t);e.dEt=this.wEt,this.evt.push(e)}void 0!==a&&(i+=a)}}kkt(t){if(0===this.evt.length)return{Pkt:0,Ikt:0};const e=this.evt[0].bSt,i=this.evt[this.evt.length-1].bSt,s=t.O9[0].bSt-t.ySt,n=t.O9[t.O9.length-1].bSt;let r=0,o=0;if(s<e){const i=this.O9[0].qSt,n=t.O9[0].qSt;if(!(i&&n&&i<n))return void Cz.Fbt(ZX,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+e+")");r=this.evt.length,this.Ekt()}else{if(n<i)return void Cz.Fbt(ZX,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+i+")");if(i<s){var h;o=null!=(h=function(t,e){const i=jh(t,(t=>void 0!==t.qSt));if(void 0===i)return;const s=function(t){let e=0;for(const s of t){if(s.HSt)return;if(s.qSt)return[s,e];var i;e+=null!=(i=s.ct)?i:0}return}(e.O9);if(void 0===s)return;const[n,r]=s;if(i.zSt!==n.zSt)return;const o=(n.qSt.getTime()-i.qSt.getTime())/1e3;return i.pEt+o-r}(this.evt,t))?h:function(t,e,i){const s=t[t.length-1];var n;const r=null!=(n=s.ct)?n:b.max(i,s.SEt),o=i*(e-s.bSt-1);return s.pEt+r+o}(this.evt,s,this.KEt),Cz.Lbt(ZX,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+i+"), resetting playlist and restarting at "+o+"s"),r=this.evt.length,this.Ekt()}else{0;const t=Ud(this.evt,(t=>t.bSt===s));0,o=this.evt[t].pEt,t>0&&(r=t)}}return{Pkt:r,Ikt:o}}pkt(t){let e=t.XSt.map(iX);if(t.vSt&&t.JSt.nw===LX.NEt&&(e=this.hkt.concat(e)),this.hkt=XX(e),t.ASt)for(const e of t.ASt){const t=Ud(this.hkt,(t=>t.o===e));t>=0&&Zt(this.hkt,t)}}Rkt(t,e){if(this.wEt!==t){this.wEt=t;for(const t of this.evt)t.dEt=this.wEt;this.ykt()}this.lkt=e}Ekt(){this.wEt=void 0,this.lkt=void 0}constructor(t,e,i){this.okt=void 0,this.gkt=void 0,this.mkt=void 0,this.KEt=void 0,this.jEt=void 0,this.YEt=void 0,this.ZEt=void 0,this.evt=[],this.hkt=[],this.JEt=!1,this.$Et=void 0,this.tkt=!1,this.ekt=Wt.wA,this.Bj=ri.BM(),this.QEt=ri.BM(),this.aR=void 0,this.ukt=-1/0,this.lkt=void 0,this.jft=t,this.SS=e,this.Skt=i}},$X=class t{static get zP(){return null!=this.J9||(this.J9=new t),this.J9}Z_t(t){return t.ob}J_t(t){return t.hb}$_t(t,e){return F(t,e)}tvt(t,e,i){return(t-e)/(i-e)}};function tG(t){return void 0!==t.qSt}function zt(t){return void 0!==t.USt}function eG(t){return zt(t)?t.AEt:0===t.mEt&&t.vEt.AEt}function gn(t,e){return zt(t)?zt(e)?t.bSt+1===e.bSt:0===e.mEt&&gn(t,e.vEt):t.mEt===t.vEt.USt.length-1?gn(t.vEt,e):!zt(e)&&t.vEt===e.vEt&&t.mEt+1===e.mEt}var iG=class{Ckt(t){const e=this.xkt.get(t);return void 0!==e&&sG(e)}Dkt(t){return this.Bkt(t).Nkt.fI}Okt(t){const e=this.xkt.get(t);if(!e||!sG(e))throw new v("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return e}Mkt(t){return this.Okt(t).rS}Lkt(t,e){const i=zt(e)?e:e.vEt,s=this.Okt(i.zSt);let n=t.HA(s.rS);if(s.Fkt){const t=Bh.UT(e.ob).Kb(n);if(t.Xb().Fb(Mm())){const e=b.round(t.Lb()/Om().Lb());n=n.HA(Om().bT(e))}}return n}Ukt(t,e){return this.Lkt(t,e).Kb(t)}Hkt(t,e,i,s,n){const r=this.Bkt(t);void 0===r.rS&&(r.Wkt.some((t=>t.Zet===e))||(r.Wkt.push({Zet:e,qkt:i,Vkt:s.BT(i.zw),Fkt:n}),this.zkt(r)))}zkt(t){if(t.rS||!this.Xkt(t))return;const e=Vd(t.Wkt,nG);wr(t.Wkt),t.rS=e.Vkt.Kb(e.qkt),t.Fkt=e.Fkt,t.Nkt.lI()}Xkt(t){return this.Gkt.length>0&&this.Gkt.every((e=>t.Wkt.some((t=>t.Zet===e))))}Bkt(t){if(this.xkt.has(t))return this.xkt.get(t);{const e={rS:void 0,Fkt:!1,Nkt:new Os,Wkt:[]};return this.xkt.set(t,e),e}}Qkt(t){this.Gkt=t,this.xkt.forEach((t=>this.zkt(t)))}hl(){this.xkt.forEach((t=>t.Nkt.vl())),this.xkt.clear()}constructor(){this.Gkt=[],this.xkt=Re()}};function sG(t){return void 0!==t.rS}function nG(t,e){return t.Fkt||e.Fkt?function(t,e){let i=t.Kb(e);return t.Yb()||e.Yb()||(i.Hb(Mm())?i=i.Kb(Om()):i.zb(Mm().Qb())&&(i=i.HA(Om()))),i}(t.qkt,e.qkt).Ub(Bh.eT):t.qkt.Ub(e.qkt)}var rG=class{get Kkt(){return this.jkt}get Hbt(){return this.Ykt}get dA(){return this.Zkt}gEt(t,e){if(tX(t))if(0===this.Ykt.length)this.Jkt(t);else{if(!e)return void Cz.Fbt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");e.XAt.gEt(t)}else{if(0!==this.Ykt.length)return void Cz.Fbt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.$kt(t)}}Jkt(t){const e=this.tPt(t.jft);e.gEt(t);const i=this.ePt(zs.Cm,e),s=this.ePt(zs.Rm,e),n=new BX({jft:e.jft,wB:0,Xft:0,Gft:NaN,t7:void 0,xbt:void 0,wot:0,eSt:[],nSt:void 0,hSt:void 0,iSt:void 0,oSt:void 0,rSt:void 0,sSt:void 0},e,[i,s]);this.Ykt.push(n)}$kt(t){this.jkt.push(...t.MSt);const e=this.iPt(t);for(const i of t.LSt){const s=e.filter((t=>hG(t,i)));this.sPt(i,s);const n=new BX(i,this.tPt(i.jft,t.Tn),s);this.Ykt.push(n)}}tPt(t,e){let i=this.nPt.get(t);return void 0===i&&(i=new JX(t,e,this.Skt),this.nPt.set(t,i)),i}iPt(t){const e=[];for(const i of t.Yw)if(void 0===i.jft){for(const s of t.LSt)if(oG(i.l_,i.jAt,s)){const t=new gz(i,this.tPt(s.jft));e.push(t)}}else{const t=new gz(i,this.tPt(i.jft));e.push(t)}return e}ePt(t,e){return new gz({l_:t,jft:void 0,jAt:"",gs:void 0,$Tt:void 0,l:"",GAt:!0,QAt:!1,KAt:!1,JAt:void 0,YAt:void 0,tSt:void 0},e)}sPt(t,e){const i=e.filter((t=>t.l_===zs.Cm)),s=e.filter((t=>t.l_===zs.Rm)),n=t.t7&&(t.t7.Ibt||t.t7.Pbt);if((!n||t.t7.Ibt)&&0===s.length){const i=this.ePt(zs.Rm,this.tPt(t.jft));e.push(i)}if((!n||t.t7.Pbt)&&0===i.length){const i=this.ePt(zs.Cm,this.tPt(t.jft));e.push(i)}t.t7&&t.t7.jTt}rPt(t){for(const e of this.Ykt)for(const i of e.Qbt)if(i===t)return i}oPt(t){for(const e of this.Ykt)if(e===t)return e}hPt(t){for(const e of this.Ykt)if(Yi(e.Qbt,t))return e}hl(){wr(this.Ykt),wr(this.jkt),this.nPt.clear(),this.Zkt.hl()}constructor(t,e){this.Ykt=[],this.jkt=[],this.nPt=rs(),this.Zkt=new iG,this.aPt=t,this.Skt=e}};function oG(t,e,i){switch(t){case zs.Cm:return i.iSt===e;case zs.Rm:return i.oSt===e;case zs.xm:return i.rSt===e;case zs.JTt:return i.sSt===e}return!1}function hG(t,e){return oG(t.l_,t.jAt,e)&&(!t.ZAt||t.XAt.jft===e.jft)}var Lt,aG=class extends Ci{constructor(t){super(Lt.uPt),this.hbt=t}},uG=class extends Ci{constructor(t){super(Lt.cPt),this.hbt=t}},cG="HlsModelUpdater";!function(t){t.uPt="lPt",t.cPt="dPt"}(Lt||(Lt={}));var lG=class extends d{get fPt(){return this._Pt}get vPt(){return this.gPt}get Pr(){return this.t_t}get mPt(){return this.wPt}async pPt(t){const e=this.t_t.aPt;if(!e)throw new v("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this.To(new Ce);const i=await this.yPt(e,{},2,!0,t),s=i.XAt;if(!$z(s)&&!tX(s))throw new v("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");$z(s)||Cz.hp(cG,"Detected media playlist only HLS stream."),this.APt(s),i.bPt&&(this.gPt=!0,await this.TPt(t)),this._Pt=!0}async SPt(t,e,i,s){const n=this.t_t.rPt(t);if(!n)throw new v("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={bSt:e,dkt:i,nw:vG(n)},o=ET(b.max(1,3*t.XAt.rkt));try{await this.EPt(n,r,s,o)}catch(t){throw eo(t),this.kPt(n),t}}PPt(t,e){const i=this.t_t.rPt(t);if(!i)throw new v("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={bSt:void 0,dkt:void 0,nw:vG(i)},n=ET(b.max(1,3*t.XAt.rkt));return this.EPt(i,s,e,n)}IPt(t,e){return this.RPt.has(t.Yf)||this.RPt.set(t.Yf,new Os),sf(this.RPt.get(t.Yf).fI,e)}kPt(t){this.To(new uG(t))}async EPt(t,e,i,s){const n=t.XAt.kbt(e);let r;try{r=(await this.yPt(n,e,0,this.gPt,i,s)).XAt}catch(e){throw eo(e),t.XAt.akt=f.Al(),e}if(!tX(r))throw new v("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");if(this.CPt&&t!==this.CPt&&!this.CPt.XAt.skt)try{await this.PPt(this.CPt,i)}catch(e){eo(e),this.CPt=t,this.xPt()}try{this.APt(r,t)}catch(n){if(n instanceof HX&&void 0!==e.nw){const n=no({},e,{nw:void 0});return this.EPt(t,n,i,s)}throw n}this.DPt(t),this.CPt=t}async yPt(t,e,i,s,n,r){if(Cz.hp(cG,"Loading HLS playlist at "+t+"."),s){const e=await this.NPt(t,n);if(void 0!==e)return{XAt:e,bPt:!0}}return{XAt:await this.BPt(t,e,i,n,r),bPt:!1}}async NPt(t,e){try{const i=await this.rst.f9([t]);if(gi(e),void 0!==i)return NX(i.responseURL,{},i.data)}catch(t){eo(t)}}async BPt(t,e,i,s,n){const r={YS:t,DE:Ct.gA,ME:this.Tmt,xE:Fr.GET,l_:ro._E,fl:s,JS:n},o=await yi((()=>this.OPt(r)),s,i);return NX(o.zE,e,o.Xm)}async OPt(t){const e=await this.qE.GS(t);return{Xm:await e.VE(),zE:e.zE}}async TPt(t){gi(t);const e=[];for(const i of this.t_t.Hbt)for(const s of i.Qbt)e.push(this.MPt(s,t));await Promise.all(e)}async MPt(t,e){try{const i=await this.rst.f9([t.XAt.jft]);gi(e),void 0===i||t.XAt.skt||await this.PPt(t,e)}catch(t){eo(t)}}xPt(){for(const t of this.t_t.Hbt)for(const e of t.Qbt)e!==this.CPt&&void 0!==e.XAt.dEt&&(e.XAt.skt?this.DPt(e):e.XAt.Ekt())}DPt(t){if(0!==t.XAt.O9.length){if(!this.CPt)return this.CPt=t,void this.CPt.XAt.Rkt(0,void 0);if(this.LPt(this.CPt),!this.LPt(t)&&void 0===t.XAt.dEt){const e=this.FPt(t,this.CPt);Cz.Lbt(cG,"Assuming global timeline offset of "+e+"s for rendition "+t.XAt.jft+"."),t.XAt.Rkt(e,void 0)}}}FPt(t,e){if(dG(t)){const i=t.XAt.O9[0],s=e.XAt.O9[0];return Cz.Lbt(cG,"Synchronizing by start of VOD: "+s.ob+" vs "+i.ob),s.ob-i.pEt}const i=function(t,e){let i=t.length-1,s=e.length-1;for(;i>=0&&s>=0;){const n=t[i],r=e[s];if(n.zSt>r.zSt)i--;else if(n.zSt<r.zSt)s--;else if(n.HSt){if(r.HSt)return{segment:n,referenceSegment:r};s--}else i--}return}(t.XAt.O9,e.XAt.O9);if(void 0!==i){const{segment:t,referenceSegment:e}=i;return Cz.Lbt(cG,"Synchronizing by start of discontinuity #"+e.zSt+": "+e.ob+" vs "+t.ob),e.ob-t.pEt}const s=_G(t.XAt.O9);if(void 0!==s){const t=_G(e.XAt.O9);if(void 0!==t){Cz.Lbt(cG,"Synchronizing by PDT:",t.qSt.toISOString()+" vs "+s.qSt.getTime());return t.ob-s.pEt-(t.qSt.getTime()-s.qSt.getTime())/1e3}}const n=fG(e),r=fG(t);var o;const h=null!=(o=t.XAt.dEt)?o:0;return Cz.Lbt(cG,"Synchronizing by last segment:",n+" vs "+r),n-r+h}LPt(t){const e=this.t_t.rPt(t);if(!e)return!1;if(dG(e))return!1;const i=function(t,e){return jh(t,(t=>void 0!==t.S3&&e.Ckt(t.zSt)))}(e.XAt.O9,this.t_t.dA);if(void 0===i)return!1;if(e.XAt.ckt===i.zSt)return!0;const s=this.t_t.dA.Lkt(i.S3,i).Lb()-i.pEt;return Cz.Lbt(cG,"Synchronize by media timestamp: "+s+"s for rendition "+t.XAt.jft+"."),e.XAt.Rkt(s,i.zSt),(void 0===this.CPt||void 0===this.CPt.XAt.ckt||this.CPt.XAt.ckt<i.zSt)&&(this.CPt=e),!0}APt(t,e){var i;(this.t_t.gEt(t,e),tX(t)&&e)&&(this.wPt=e,this.To(new aG(e)),null==(i=this.RPt.get(e.Yf))||i.lI(),this.RPt.delete(e.Yf));this.To(new xq)}UPt(t,e){for(const i of this.t_t.Hbt){const s=Rt(i.qbt,(t=>t.XAt===e));void 0!==s&&void 0===t.Ibt&&i.hEt(s);const n=Rt(i.Wbt,(t=>t.XAt===e));void 0!==n&&void 0===t.Pbt&&i.hEt(n),void 0===s&&void 0===n||(i.t7=sX(i.t7,t))}}hl(){this.Lo(),this.t_t.hl(),this.RPt.forEach((t=>t.vl())),this.RPt.clear()}constructor(t,e,i,s,n){super(),this.qE=t,this.rst=e,this.Tmt=i,this._Pt=!1,this.gPt=!1,this.CPt=void 0,this.wPt=void 0,this.RPt=Re(),this.t_t=new rG(s,n)}};function dG(t){return t.XAt.GSt||t.XAt.KSt===Wt.SSt}function fG(t){const e=t.XAt.O9;return e[e.length-1].hb}function _G(t){return jh(t,(t=>void 0!==t.qSt))}function vG(t){if(void 0!==t.XAt._St&&!t.XAt.GSt&&!(void 0===t.XAt.nkt||f.Al()/1e3-t.XAt.nkt>=t.XAt._St/2))return t.XAt.vSt?LX.NEt:LX.DEt}var bn,gG=class{get nt(){return this.rlt}pkt(t){if(0===t.XAt.XSt.length)return;this.HPt||(this.HPt=this.FB.UE(K.Nm,void 0,void 0,void 0,void 0,nt.DATE_RANGE),this.rlt.tt(this.HPt));zX(this.HPt,t.XAt.XSt,(e=>{var i;return null!=(i=t.XAt.oEt(e))?i:NaN}))}constructor(t,e,i){this.WPt=t=>{this.qPt.hlsDateRange&&this.pkt(t.hbt)},this.qPt=t,this.ppt=e,this.FB=i,this.rlt=new ih,this.ppt.kn(Lt.uPt,this.WPt)}},mG=class extends Ci{constructor(){super(xt.FAt)}},wG=class{get VPt(){return this.YQ}get Fl(){return mu(this.D7.Fl,this.D7.xK)}get O9(){return this.evt}get flt(){return this.ult}zPt(t){var e;return null==(e=this.XPt(t))?void 0:e.hbt}irt(t){this.YQ=t,this.GPt()}ert(t,e,i,s,n,r){this.evt.push({hbt:t,nst:e,QPt:ri.NM(n,r),KPt:ri.NM(i,s)}),this.GPt()}XPt(t){return Rt(this.evt,(e=>e.KPt.br(t)))}yit(t){return Rt(this.evt,(e=>e.nst===t))}Dnt(t,e){return Rt(this.evt,(i=>i.hbt===t&&gn(i.nst,e)))}PK(){const t=this.Fl;t.V>0&&(this.ult=t.An(t.V-1))}GPt(){const t=this.D7.Fl;this.evt=this.evt.filter((e=>0!==t.Cn(e.KPt).V))}constructor(t){this.D7=t,this.evt=[],this.YQ=void 0,this.ult=void 0}},pG=class{get l_(){return this.EY}get jPt(){return this.EY===Fs.Cm||this.EY===Fs.Rm}get YPt(){return this.Qet}get ZPt(){return this.JPt}get $Pt(){return void 0!==this.tIt}eIt(){if(this.$Pt)throw new v("Cannot perform new operation while BufferAppender is still busy")}E7(t){this.D7!==t&&(this.eIt(),this.D7=t,this.Qet=new wG(t))}iIt(){return this.tIt?this.tIt.fI:Promise.resolve()}sIt(t){var e;const i=this.Qet.flt,s=this.Qet.Fl;if(void 0===i)return!1;const n=b.min(t,i);var r;return null!=(r=null==(e=s.cM().wM(this.ZPt).CM(n))?void 0:e.br(i))&&r}nIt(t){return this.Qet.zPt(t)}vl(){this.Ox.vl(),this.Ox=new Zs}zQ(t){this.eIt(),this.tIt=new Os;const e=e=>{this.oIt.rIt(t),this.hIt(e)};this.XQ(t,this.Ox.fl).then(e,e)}async XQ(t,e){Cz.Lbt(yt,"Appending initializer",Bi(t.aIt.jft)),await this.D7.zQ(t,e),Cz.Lbt(yt,"Appended initializer",Bi(t.aIt.jft)),this.Qet.irt(t)}vrt(t){this.eIt(),this.tIt=new Os;const e=e=>{this.oIt.rIt(t),this.hIt(e)};this.uIt(t,this.Ox.fl).then(e,e)}async uIt(t,e){const i=t.hbt;if(void 0===i.XAt.xTt)throw new v("MediaBufferWrapper - Cannot append HLSAsset to "+this.EY+" MediaBuffer for a HLSRendition with an undefined targetDuration.");const s=this.Qet.Fl.nM,n=this.D7.Fl;Cz.Lbt(yt,"Appending",Bi(t.aIt.jft)),await this.D7.WQ(t,e),Cz.Lbt(yt,"Appended",Bi(t.aIt.jft),s,this.Qet.Fl.nM);const r=t.ob,o=r+t.ct,h=t.aIt,a=h.ob;var u;const c=h.ob+(null!=(u=h.ct)?u:0);this.Qet.ert(i,h,r,o,a,c);const l=this.D7.Fl.wM(n),d=this.Qet.Dnt(i,h);if(this.l_===Fs.Rm)if(d)if(this.cIt(d))if(0===l.V){if(void 0===this.Qet.yit(h)){const t=this.D7.xK.Cn(new ri([r,o]));this.JPt=this.JPt.gM(t)}}else{const t=l.Tn(0),e=new ri([t,o]);if(this.JPt=this.JPt.wM(e),t>r){const e=this.D7.xK.Cn(new ri([r,t]));this.JPt=this.JPt.gM(e)}}else{const t=l.V>0&&l.Tn(0)<r?l.Tn(0):r;this.JPt=this.JPt.wM(new ri([t,o]))}else if(0===l.V){const t=this.D7.xK.Cn(new ri([r,o]));this.JPt=this.JPt.gM(t)}else{var f;const t=l.Tn(0),e=null==(f=n.CM(r))?void 0:f.An(0),i=e&&e>r?e:r;if(t>i){const t=this.D7.xK.Cn(new ri([i,l.Tn(0)]));this.JPt=this.JPt.gM(t)}}t.aIt.fEt&&this.Qet.PK()}cIt(t){const e=t.KPt,i=e.Tn(0),s=e.An(e.V-1),n=e.oM(0),r=e.aM(e.V-1);return this.JPt.yM(i,s,n,r)}constructor(t,e,i,s,n){this.tIt=void 0,this.Ox=new Zs,this.JPt=ri.BM(),this.hIt=t=>{this.tIt&&(t?yP(t)&&this.jPt?this.lIt.cq(this.D7.Fl.xM)?this.tIt.lI():this.tIt.dI(t):Lr(t)?this.tIt.lI():this.tIt.dI(t):this.tIt.lI(),this.tIt=void 0)},this.EY=t,this.oIt=i,this.D7=e,this.Qet=s,this.lIt=n}},yG=class{async dIt(t,e,i,s){const n=await this.fIt(e,s);return await this._It.dIt(t,n,i)}async fIt(t,e){var i;if((null==(i=this.vIt)?void 0:i.YS)!==t){Cz.Lbt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const i=await this.qE.GS({YS:t,DE:Ct.aE,xE:Fr.GET,fl:e,l_:ro.mE,BE:Ru.EE,ME:this.Tmt}),s=await i.bN(),n=new S(s);this.vIt={YS:t,Xm:n}}return this.vIt.Xm}constructor(t,e,i){this._It=t,this.qE=e,this.Tmt=i,this.vIt=void 0}},AG=class{async GS(t,e,i,s,n){const r=await this.gIt(t,e,i,Ct.aE,s,n),o=await r.bN(n);return{httpStatusCode:r.ZS,response:new S(o)}}async mIt(t,e,i,s,n){return(await this.gIt(t,e,i,Ct.cE,s,n)).OH(n)}async gIt(t,e,i,s,n,r){let o;t.Svt&&(o=Jz(t.Svt.Tn,t.Svt.V),0===o[0]&&o[1]===cs&&(o=void 0));const h=o?{Range:"bytes="+o[0]+"-"+o[1]}:void 0,a=new Yt({YS:t.Qy,DE:s,CE:h,ME:this.Tmt,xE:Fr.GET,l_:e,BE:i,OE:this.Pit,LE:n,fl:r});try{const e=await this.rst.w9(t.Qy,o);if(gi(r),void 0!==e)return null==n||n(e.buffer.byteLength,e.buffer.byteLength),new Es({GS:a,Xm:e.buffer})}catch(t){eo(t)}return await yi((()=>sf(this.qE.GS(a),a.fl)),r,this.wIt)}constructor(t,e,i,s,n=2){this.qE=t,this.rst=e,this.Pit=i,this.Tmt=s,this.wIt=n}},bG=class{pIt(){return this.yIt.XAt.fSt}async AIt(t,e,i){if(!this.pIt())throw new v("Could not perform blocking playlist update.");try{await this.bIt(),gi(i),await this.ppt.SPt(this.yIt,t,e,i),this.In=f.Al()}catch(t){throw Lr(t)&&this.TIt(),t}this.TIt()}SIt(t){return this.ppt.IPt(this.yIt,t)}TIt(){if(!this.EIt&&!this.kIt){const t=()=>{this.EIt=void 0};this.EIt=this.PIt(this.IIt.fl).then(t,t)}}async bIt(){this.EIt&&(this.IIt.vl(),this.IIt=new Zs,await this.EIt.catch($d),this.EIt=void 0)}async PIt(t){for(;;){if(this.yIt.XAt.GSt&&this.yIt.XAt.skt)return;const e=f.Al()-this.In,i=1e3*this.yIt.XAt.rkt;e<i&&await ye(i-e,t);try{await this.ppt.PPt(this.yIt,t)}catch(t){throw eo(t),this.ppt.kPt(this.yIt),t}this.In=f.Al()}}hl(){this.kIt=!0,Ui(this.bIt())}constructor(t,e){this.EIt=void 0,this.IIt=new Zs,this.In=-1/0,this.kIt=!1,this.ppt=t,this.yIt=e,this.TIt()}};!function(t){t[t.ESt=0]="ESt",t[t.kSt=1]="kSt",t[t.vE=2]="vE",t[t.gE=3]="gE"}(bn||(bn={}));var Us="AssetExtractor",TG=class{RIt(t,e,i){let s=e;for(const e of this.CIt){if(s>=t)return!0;if(s<e.Tn)return!1;if(s<e.An){if(i<=e.An)return!0;s=e.An}}return s>=t}xIt(t,e){const i=[];for(let s=0;s<this.CIt.length;s+=1){const n=this.CIt[s],r=t-n.Tn,o=n.Xm.length,h=b.min(o,b.max(r,0)),a=b.max(0,e+r),u=Na(n.Xm,h,a);u.length&&(s=this.DIt(s,n,t,h,a),i.push(u))}return i}NIt(t,e){this.CIt.push({Tn:t,An:t+e.length,Xm:e})}DIt(t,e,i,s,n){let r=t;this.CIt.splice(r,1),r-=1,e.Tn<i&&(r+=1,this.CIt.splice(r,0,{Tn:e.Tn,An:i,Xm:Na(e.Xm,0,s)}));const o=i+n-s;return o<e.An&&(r+=1,this.CIt.splice(r,0,{Tn:o,An:e.An,Xm:Na(e.Xm,n)})),r}constructor(){this.CIt=[]}},SG=class{get BIt(){return this.OIt}async MIt(){const t=await this.Bu.read();if(t.done)throw this.OIt=1/0,new v("No more data can be read from the given stream.");return this.OIt+=t.value.length,t.value}async LIt(t){await this.Bu.cancel(t)}constructor(t,e){this.OIt=e,this.Bu=t.getReader()}},EG=class{FIt(){this.UIt.lI(),this.UIt=new Os}HIt(t){const{Evt:e,kvt:i}=PG(this.yEt.Svt),s=this.WIt.xIt(e,i-e);Cz.Lbt(Us,"Collected "+s.length+" chunks.");for(const e of s)t.enqueue(e)}async readAndSliceOutAssetBytes(t){await this.qIt.fI;const{Evt:e,kvt:i}=PG(this.yEt.Svt);try{for(;;){const s=this.Bu.BIt,n=await this.Bu.MIt(),r=n.length;Cz.Lbt(Us,"Read "+r+" at "+s+" for extraction of "+Bi(this.yEt));const o=b.min(s+r,e)-s;if(!(o>0)){if(s+r<=i)return Cz.Lbt(Us,"Extracting the read data range for extraction of "+Bi(this.yEt)),t.enqueue(n),this.FIt(),Ui(this.readAndSliceOutAssetBytes(t));{const e=i-s,o=Na(n,0,e),h=Na(n,e);return o.length>0&&(Cz.Lbt(Us,"Extracting "+o.length+" bytes for extraction of "+Bi(this.yEt)),t.enqueue(o)),Cz.Lbt(Us,"Of the read "+r+" bytes, the last "+h.length+" will be stored locally for extraction of "+Bi(this.yEt)),this.WIt.NIt(s+e,h),Cz.Lbt(Us,"Extraction of "+Bi(this.yEt)+" completed as the entire request has been fulfilled."),this.VIt(t),void(this.zIt&&(Cz.Lbt(Us,"Aborting stream upstream as no more bytes are needed from "+Bi(this.yEt)+"."),await this.Bu.LIt("AssetExtraction - AbortOnEnd")))}}{const e=Na(n,0,o),i=Na(n,o);if(Cz.Lbt(Us,"Of the read "+r+" bytes, the first "+o+" will be stored locally for extraction of "+Bi(this.yEt)),this.WIt.NIt(s,e),i.length>0)return Cz.Lbt(Us,"Extracting "+i.length+" bytes for extraction of "+Bi(this.yEt)),t.enqueue(i),this.FIt(),Ui(this.readAndSliceOutAssetBytes(t))}}}catch(e){Cz.Lbt(Us,"Extraction of "+Bi(this.yEt)+" completed as the entire source stream has been read."),this.VIt(t)}}VIt(t){t.close(),this.FIt(),this.XIt.lI()}start(t){Cz.Lbt(Us,"Preparing to push all collected data to controller for extraction of "+Bi(this.yEt)),this.HIt(t),Cz.Lbt(Us,"Collected data pushed to controller for extraction of "+Bi(this.yEt));const{kvt:e}=PG(this.yEt.Svt);this.Bu.BIt>=e?(Cz.Lbt(Us,"Extraction of "+Bi(this.yEt)+" completed as the entire request has been fulfilled."),this.VIt(t)):(Cz.Lbt(Us,"Continuing read from original stream for extraction of "+Bi(this.yEt)),Ui(this.readAndSliceOutAssetBytes(t)))}get GIt(){return this.XIt.fI}pull(){return this.qIt.lI(),this.qIt=new Os,this.UIt.fI}constructor(t,e,i,s){this.XIt=new Os,this.yEt=t,this.Bu=e,this.WIt=i,this.zIt=s,this.qIt=new Os,this.UIt=new Os}},kG=class{qA(t){if(!eX(this.yEt,t))return!1;const{Evt:e,kvt:i}=PG(t.Svt);return this.WIt.RIt(this.QIt.BIt,e,i)}async xct(t,e){void 0===e&&(e=!1);const i=this.QIt,s=this.WIt;if(Cz.hp(Us,"Extracting data from "+Bi(t)+" out of "+Bi(this.yEt)),this.KIt&&(Cz.Lbt(Us,"Awaiting previous extraction before extracting "+Bi(t)+" out of "+Bi(this.yEt)),await this.KIt),!this.qA(t))throw new v("The extractor does not contain the data requested");const n=new EG(t,i,s,e);return this.KIt=n.GIt,new cd(n)}constructor(t,e){this.yEt=e;const{Evt:i}=PG(this.yEt.Svt);this.QIt=new SG(t,i),this.WIt=new TG}};function PG(t){if(t){const e=t.Tn;return{Evt:e,kvt:void 0!==t.V?e+t.V:cs}}return{Evt:0,kvt:cs}}var IG=class{async Rn(){const t=await this.jIt.mIt(this.yEt,ro.gE,Ru.wA,void 0,this.Ox.fl);return new kG(t,this.yEt)}qA(t){return eX(this.yEt,t)}async xct(t,e){void 0===e&&(e=!1);const i=await this.Alt;return await sf(i.xct(t,e),this.Ox.fl)}vl(){this.Alt.catch($d),this.Ox.vl()}constructor(t,e){this.yEt=t,this.jIt=e,this.Ox=new Zs,this.Alt=this.Rn()}},RG=class extends Ci{constructor(t){super(Oh.YIt),this.OE=t}},CG=class extends Ci{constructor(t,e,i,s,n,r,o){super(Oh.ZIt),this.uri=t,this.JIt=e,this.OE=i,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.$It=r,this.httpStatusCode=o}};function xG(t,e,i){const s=zt(i)?i:i.vEt;if(e.Ckt(s.zSt)){if(void 0!==i.S3)return e.Lkt(i.S3,i).Lb();if(i!==s&&void 0!==s.S3){const t=e.Lkt(s.S3,s).Lb();return i.ob+(t-s.ob)}}const n=t.XAt.yit(s.bSt-1);if(void 0!==n&&e.Ckt(n.zSt)){if(n.USt.length>0){const t=n.kEt(n.USt.length-1);if(void 0!==t.S3){const s=e.Lkt(t.S3,t).Lb();return i.ob+(s-t.ob)}}if(void 0!==n.S3){const t=e.Lkt(n.S3,n).Lb();return i.ob+(t-n.ob)}}const r=t.XAt.yit(s.bSt+1);if(void 0!==r&&e.Ckt(r.zSt)){if(r.USt.length>0){const t=r.kEt(0);if(void 0!==t.S3){const s=e.Lkt(t.S3,t).Lb();return i.ob+(s-t.ob)}}if(void 0!==r.S3){const t=e.Lkt(r.S3,r).Lb();return i.ob+(t-r.ob)}}return i.ob}var Oh,DG="HlsPlaylistDownloader";!function(t){t.YIt="segmentdownloadprogress",t.ZIt="segmentdownloaded"}(Oh||(Oh={}));var NG=class extends d{tRt(t){this.eRt.hl(),this.eRt=new bG(this.ppt,t),this.$Pt?this.iRt=t:(this.yIt=t,this.sRt=0,this.nRt=void 0,this.rRt=void 0)}get $Pt(){return void 0!==this.oRt}iIt(){return this.oRt?this.oRt.fI:Promise.resolve()}hRt(){return this.oIt.hRt()}aRt(t){this.oIt.aRt(t)}vl(){var t,e,i;this.uRt.vl(),this.uRt=new Zs,null==(t=this.cRt)||t.vl(),this.cRt=void 0,null==(e=this.lRt)||e.vl(),null==(i=this.dRt)||i.vl(),this.lRt=void 0,this.dRt=void 0,this.sRt=0,this.nRt=void 0,this.rRt=void 0}hl(){this.eRt.hl()}get hbt(){var t;return null!=(t=this.iRt)?t:this.yIt}get fRt(){if(!this.yIt.XAt.GSt||void 0===this.nRt)return!1;const t=this.yIt.XAt.yit(this.nRt);if(!t.fEt)return!1;if(void 0!==this.rRt){if(!t.kEt(this.rRt).fEt)return!1}return!0}_Rt(t){const e=this.yIt.XAt.fkt(t);if(!e)return!1;if(void 0!==this.nRt){const i=e.bSt===this.nRt;return void 0!==this.rRt?e.PEt(t)===e.kEt(this.rRt)&&i:i}return!1}vRt(t){let e;if(void 0===this.nRt||t<this.sRt)e=this.gRt(t);else if(e=this.mRt(this.nRt,this.rRt),void 0!==e){const[i,s]=e,n=(null!=s?s:i).ob,r=3*this.yIt.XAt.xTt;b.abs(n-t)>=r&&(e=this.gRt(t))}else if(this.yIt.XAt.GSt){if(this.yIt.XAt.yit(this.nRt).fEt&&(e=this.gRt(t),void 0!==e&&e[0].bSt===this.nRt))return}if(e){this.sRt=t;const[i,s]=e;return 0===(null==s?void 0:s.mEt)&&void 0!==i.ct?[i,void 0]:[i,s]}}gRt(t){let e,i;const s=this.yIt.XAt.O9;if(0===s.length)return;const n=this.ppt.Pr.dA,r=Bh.UT(t),[o,h]=function(t,e,i){const s=t.XAt.O9;if(0===s.length)return[void 0,void 0];const n=t.XAt._kt(i.Lb());if(!e.Ckt(n.zSt))return[void 0,void 0];const r=n.bSt-s[0].bSt;let o,h,a,u=0;for(let t=r;t>=0;t--){const e=s[t];if(e.zSt!==n.zSt)break;if(void 0!==e.S3){o=e,u=t;break}}if(void 0===o){for(let t=r+1;t<s.length;t++){const e=s[t];if(e.zSt!==n.zSt)break;if(void 0!==e.S3){o=e,u=t;break}}if(void 0===o)return[void 0,void 0]}if(e.Lkt(o.S3,o).qb(i)){h=o;for(let t=u+1;t<s.length;t++){const r=s[t];if(r.zSt!==n.zSt)break;if(void 0!==r.S3){if(!e.Lkt(r.S3,r).qb(i)){a=r;break}h=r}}}else{a=o;for(let t=u-1;t>=0;t--){const r=s[t];if(r.zSt!==n.zSt)break;if(void 0!==r.S3){if(e.Lkt(r.S3,r).qb(i)){h=r;break}a=r}}}return[h,a]}(this.yIt,n,r);let a;if(void 0!==o&&void 0!==h){const t=n.Lkt(o.S3,o),e=n.Lkt(h.S3,h),i=r.Kb(t).Lb()/e.Kb(t).Lb()*(h.ob-o.ob);a=o.ob+i}else a=t;const u=s[s.length-1];return u.hb<=a?(e=u,i=u.REt(a)):s[0].ob>a?(e=s[0],i=e.kEt(0)):(e=this.yIt.XAt.fkt(a),i=null==e?void 0:e.REt(a)),e?[e,i]:void 0}mRt(t,e){let i,s;if(i=this.yIt.XAt.yit(t),i&&void 0!==e){if(0===i.USt.length)return[i,void 0];s=i.kEt(e+1)}return void 0!==i&&void 0!==s||(i=this.yIt.XAt.yit(t+1),s=null==i?void 0:i.kEt(0)),i?[i,s]:void 0}eIt(){if(this.$Pt)throw new v("Cannot perform new operation while PlaylistDownloader is still busy")}wRt(t){this.eIt(),this.oRt=new Os,this.pRt(t,this.uRt.fl).then(this.yRt,this.yRt)}ARt(){this.eRt.TIt()}async pRt(t,e){if(this.yIt.XAt.GSt)return;let i=this.vRt(t);for(!i&&this.eRt.pIt()&&void 0!==this.nRt&&(await this.eRt.AIt(void 0===this.rRt?this.nRt+1:this.nRt,void 0!==this.rRt?this.rRt+1:void 0,e),i=this.vRt(t)),!i&&this.eRt.pIt()&&void 0!==this.nRt&&(await this.eRt.AIt(this.nRt+1,0,e),i=this.vRt(t));!i;){Cz.hp(DG,"No next segment / part available, need to update playlist before continuing."),await this.eRt.SIt(e);const s=this.hbt.XAt.O9;s[0].ob>t&&(this.rRt=void 0,this.nRt=void 0);s[s.length-1].bSt<this.nRt&&(this.rRt=void 0,this.nRt=void 0),i=this.vRt(t)}}bRt(){return this.oIt.TRt()}SRt(){this.eIt();try{const t=this.yIt.XAt.vkt(mo.ESt);t&&this.ERt(t);const e=this.yIt.XAt.vkt(mo.kSt);e&&this.kRt(e)}catch(t){throw eo(t),this.yIt.XAt.akt=f.Al(),this.ppt.kPt(this.yIt),t}}ERt(t){this.dRt&&!this.dRt.qA(t.jft)&&(this.dRt.vl(),this.dRt=void 0),this.dRt||(this.dRt=new IG(t.jft,this.jIt))}kRt(t){this.lRt&&!this.lRt.qA(t.jft)&&(this.lRt.vl(),this.lRt=void 0),this.lRt||(this.lRt=new IG(t.jft,this.jIt))}pit(t,e,i){this.eIt(),Cz.hp(DG,"Starting download of segment "+Bi(t.jft)+" and part "+(null==e?void 0:e.mEt)),this.oRt=new Os,this.PRt(t,e,i,this.uRt.fl).catch((t=>{throw eo(t),this.yIt.XAt.akt=f.Al(),this.ppt.kPt(this.yIt),t})).then(this.yRt,this.yRt)}async PRt(t,e,i,s){let n;if(t.WSt){var r,o;if(!i||!function(t,e){return t===e||t.Qy===e.Qy&&(t.Svt&&e.Svt?t.Svt.Tn===e.Svt.Tn&&t.Svt.V===e.Svt.V:t.Svt===e.Svt)}(i.aIt.jft,null==(r=t.WSt)?void 0:r.jft)||t.zSt!==i.zSt){var h;null==(h=this.cRt)||h.vl(),this.cRt=new Os;const e=this.IRt(t.WSt,t,s).then((()=>{this.cRt=void 0}));this.cRt.wl(e)}n=null==(o=this.cRt)?void 0:o.fI}await this.RRt(t,e,n,s)}async IRt(t,e,i){const s=await this.CRt(t,e,i),n=s.WSt.Xm.Xm.byteLength;this.oIt.xRt(s),this.To(new CG(s.WSt.aIt.jft,s.l_,this.EY,e.bSt,s.hbt.Yf,n,s.WSt.Ist)),Cz.Lbt(yt,"Download initializer complete",Bi(t.jft))}async RRt(t,e,i,s){const n=await this.DRt(t,e,s),r=n.nst.Xm.Xm.byteLength;var o;i&&await sf(i,s),this.oIt.xRt(n),this.To(new CG(n.nst.aIt.jft,n.l_,this.EY,t.bSt,n.hbt.Yf,r,n.nst.Ist)),Cz.Lbt(yt,"Download complete",Bi(null!=(o=null==e?void 0:e.jft)?o:t.jft))}async DRt(t,e,i){let s;if(e){if(this.lRt)if(this.lRt.qA(e.jft)){const t=await this.lRt.xct(e.jft),n=await ct(t,i),r=new S(n);s=OG(e,await this.dIt(r,e.MSt,i),200)}else this.lRt.vl(),this.lRt=void 0;s||(Cz.Lbt(yt,"Start download",Bi(e.jft)),s=await this.NRt(e,i))}else Cz.Lbt(yt,"Start download",Bi(t.jft)),s=await this.Tit(t,i);return this.nRt=t.bSt,this.rRt=null==e?void 0:e.mEt,{l_:"nst",nst:s,hbt:this.yIt,zSt:t.zSt}}async CRt(t,e,i){let s;if(this.dRt){var n;if(this.dRt.qA(t.jft)){const n=await sf(this.dRt.xct(t.jft),i),r=await ct(n,i),o=new S(r);s=BG(t,e,await this.dIt(o,t.FSt?[t.FSt]:[],i),200)}Cz.hp(DG,"MAP is required for segment, downloading MAP data."),null==(n=this.dRt)||n.vl(),this.dRt=void 0}return s||(Cz.Lbt(yt,"Start download",Bi(t.jft)),s=await this.BRt(t,e,i)),{l_:"WSt",WSt:s,hbt:this.yIt,ob:e.ob,zSt:e.zSt,MSt:e.MSt}}async BRt(t,e,i){const{response:s,httpStatusCode:n}=await this.jIt.GS(t.jft,ro.vE,Ru.wE,void 0,i),r=t.FSt?[t.FSt]:[];return BG(t,e,await this.dIt(s,r,i),n)}async Tit(t,e){if(!t.jft)throw new v("Internal error: attempted to download an incomplete segment");let i,s;try{this.ORt(t);const n=await this.jIt.GS(t.jft,ro.vE,Ru.wA,this.MRt,e);i=n.response,s=n.httpStatusCode}finally{this.LRt()}return function(t,e,i){return{Xm:{Xm:e,l_:wt.xV},l_:bn.vE,Ist:i,aIt:t,zSt:t.zSt}}(t,await this.dIt(i,t.MSt,e),s)}async NRt(t,e){let i,s;try{this.ORt(t);const n=await this.jIt.GS(t.jft,ro.vE,Ru.wA,this.MRt,e);i=n.response,s=n.httpStatusCode}finally{this.LRt()}return OG(t,await this.dIt(i,t.MSt,e),s)}async dIt(t,e,i){const s=Rt(e,(t=>t.xE===Bu.aSt));return s?s.jft&&s.uSt?await this.FRt.dIt(t,s.jft,s.uSt,i):(Cz.lt(DG,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}ORt(t){var e,i,s;this.URt=t,this.HRt=0,this.WRt=0,this.qRt=null!=(s=null==(i=t.jft)||null==(e=i.Svt)?void 0:e.V)?s:0}LRt(){this.URt=void 0,this.HRt=0,this.WRt=0,this.qRt=0}VRt(){if(void 0!==this.URt)return{nst:this.URt,zRt:this.WRt,XRt:this.qRt}}GRt(t){return void 0!==this.URt&&(0!==this.HRt&&(0!==this.qRt&&(!(this.WRt>=this.qRt)&&!(t-this.HRt<500))))}constructor(t,e,i,s,n,r,o,h){super(),this.iRt=void 0,this.oRt=void 0,this.URt=void 0,this.HRt=0,this.WRt=0,this.qRt=0,this.uRt=new Zs,this.cRt=void 0,this.sRt=0,this.nRt=void 0,this.rRt=void 0,this.dRt=void 0,this.lRt=void 0,this.yRt=t=>{this.iRt&&(this.yIt=this.iRt,this.iRt=void 0,this.sRt=0,this.nRt=void 0,this.rRt=void 0),this.oRt&&(t&&!Lr(t)?this.oRt.dI(t):this.oRt.lI(),this.oRt=void 0)},this.MRt=(t,e)=>{this.WRt=t,t>0&&0===this.HRt&&(this.HRt=f.Al()),void 0!==e&&(this.qRt=e),this.To(new RG(this.EY))},this.EY=t,this.ppt=i,this.oIt=s,this.yIt=e,this.eRt=new bG(i,e),this.FRt=new yG(o,n,h),this.jIt=new AG(n,r,function(t){switch(t){case zs.Rm:return Au.Rm;case zs.Cm:return Au.Cm;case zs.xm:case zs.JTt:return Au.gA;default:return Au.wA}}(e.l_),h)}};function BG(t,e,i,s){return{Xm:{Xm:i,l_:wt.xV},l_:bn.ESt,Ist:s,aIt:t,zSt:e.zSt}}function OG(t,e,i){return{Xm:{Xm:e,l_:wt.xV},Ist:i,l_:bn.kSt,aIt:t,zSt:t.vEt.zSt}}var Pe,wn=class{get VPt(){return this.QRt}get KRt(){const t=[];for(const i of this.jRt)if("nst"===i.l_){const s=i.nst.aIt,n=xG(i.hbt,this.Zkt,s);var e;t.push({nst:s,hbt:i.hbt,ob:n,hb:n+(null!=(e=s.ct)?e:0)})}return t}get YRt(){const t=[];return this.ZRt.forEach((e=>{for(const i of e.JRt)"nst"===i.l_&&t.push({nst:i.aIt,hbt:i.hbt,ob:i.ob,hb:i.ob+i.ct})})),t}xRt(t){"WSt"===t.l_&&(this.QRt=t.WSt),this.jRt.push(t),this.$Rt&&(this.$Rt.lI(),this.$Rt=void 0)}hRt(){return this.jRt[0]}aRt(t){so(this.jRt,t)}TRt(){return null!=this.$Rt||(this.$Rt=new Os),this.$Rt.fI}tCt(t){this.eCt(t.Zet).tCt(t)}iCt(t){return this.eCt(t).iCt()}rIt(t){this.eCt(t.Zet).rIt(t)}sCt(t){var e;null==(e=this.ZRt.get(t))||e.hl()}nCt(t){return this.eCt(t).nCt()}eCt(t){if(this.ZRt.has(t))return this.ZRt.get(t);{const e=new MG;return this.ZRt.set(t,e),e}}cI(){this.rCt(),this.oCt()}rCt(){this.QRt=void 0,wr(this.jRt)}oCt(){this.ZRt.forEach((t=>t.cI()))}hl(){this.ZRt.forEach((t=>t.hl())),this.ZRt.clear(),this.cI(),this.$Rt&&(this.$Rt.vl(),this.$Rt=void 0)}constructor(t){this.jRt=[],this.ZRt=rs(),this.$Rt=void 0,this.QRt=void 0,this.Zkt=t}},MG=class{get JRt(){return this.hCt}tCt(t){this.hCt.push(t),this.aCt&&(this.aCt.lI(),this.aCt=void 0)}iCt(){return this.hCt[0]}rIt(t){so(this.hCt,t)}nCt(){return null!=this.aCt||(this.aCt=new Os),this.aCt.fI}cI(){wr(this.hCt)}hl(){this.cI(),this.aCt&&(this.aCt.vl(),this.aCt=void 0)}constructor(){this.hCt=[],this.aCt=void 0}},LG=1e-6,FG=class{get Fl(){return this.Iyt}get xK(){return this.Ryt}async zQ(t,e){const i=t.Xm.Xm;if(this.uCt(i),this.cCt.l_===nt.TTML){this.Zkt.Ckt(t.zSt)||await sf(this.Zkt.Dkt(t.zSt),e);const s=this.lCt(i,t.zSt);for(const t of s)this.cCt.XE(t)}}async WQ(t,e){if(void 0===t.Xm)return;const i=t.ob,s=i+t.ct;this.Iyt=this.Iyt.gM(ri.NM(i,s)).vM(LG),this.BK(t.dCt,t.fCt),this.MK(i,s),this.Zkt.Ckt(t.zSt)||await sf(this.Zkt.Dkt(t.zSt),e),this.VQ(t.Xm.Xm,t.zSt,t.aIt)}VQ(t,e,i){let s;this.uCt(t),s=this.cCt.l_===nt.WEBVTT?this._Ct(t,i):this.lCt(t,e);for(const t of s)this.cCt.XE(t)}_Ct(t,e){const i=Xm(t),s=i.L;var n;const r=null!=(n=i.aS)?n:{uS:Bh.eT,dh:Bh.eT};for(const t of s){const i=Bh.UT(t.ob).Kb(r.dh).HA(r.uS),s=this.Zkt.Lkt(i,e).Lb(),n=s+(t.hb-t.ob);t.Ib(s,n)}return s}lCt(t,e){const i=this.Zkt.Mkt(e).Lb();return Bw(t,this.cCt,{sS:0,nS:1/0,rS:i},bu.APPLICATION_MP4)}uCt(t){this.cCt.l_===nt.DEFAULT&&(this.cCt.l_=this.vCt(t)?nt.WEBVTT:nt.TTML)}vCt(t){return iw(Rh(et(wa(t),0,b.min(t.byteLength,16)),new ds))}BK(t,e){this.Ryt=this.Ryt.gM(ri.NM(t,e)).vM(LG)}MK(t,e){this.Ryt=this.Ryt.wM(ri.NM(t,e))}constructor(t,e){this.Iyt=ri.BM(),this.Ryt=ri.BM(),this.cCt=t,this.Zkt=e}},UG=class extends Ci{constructor(t,e){super(Pe.gCt),this.hbt=t,this.t7=e}},HG=class extends Ci{constructor(t){super(Pe.mCt),this.hbt=t}},WG=class extends Ci{constructor(t,e){super(Pe.wCt),this.hbt=t,this.wot=e}},qG=class extends Ci{constructor(t,e){super(Pe.pCt),this.hbt=t,this.yCt=e}};!function(t){t.gCt="ACt",t.wCt="bCt",t.pCt="TCt",t.mCt="SCt"}(Pe||(Pe={}));var VG=class extends d{get ECt(){return this.kCt}PCt(t){for(const e of this.kCt)Yi(t,e)||this.oIt.sCt(e);this.kCt=t}get $Pt(){return void 0!==this.ICt}iIt(){var t,e;return null!=(e=null==(t=this.ICt)?void 0:t.fI)?e:Promise.resolve()}eIt(){if(this.$Pt)throw new v("Cannot perform new operation while transmuxer is still busy")}RCt(t,e){}CCt(t){this.eIt(),this.ICt=new Os;const e=e=>{this.xCt(t,e)};this.DCt(t,this.Ox.fl).then(e,e)}NCt(t){this.eIt(),this.ICt=new Os;const e=e=>{this.xCt(t,e)};this.BCt(t,this.Ox.fl).then(e,e)}xCt(t,e){this.ICt&&(!e||Lr(e)?(e||this.oIt.aRt(t),this.ICt.lI(),this.ICt=void 0):this.ICt.dI(e))}OCt(t,e){this.To(new UG(t,e))}MCt(t,e){this.To(new WG(t,e))}LCt(t,e,i){eG(e)&&this.To(new qG(t,i))}FCt(t){this.To(new HG(t))}tCt(t){Yi(this.kCt,t.Zet)&&this.oIt.tCt(t)}UCt(t){return this.oIt.iCt(t)}rIt(t){this.oIt.rIt(t)}HCt(t){return this.oIt.nCt(t)}vl(){this.Ox.vl(),this.Ox=new Zs}constructor(t,e,i){super(),this.ICt=void 0,this.Ox=new Zs,this.oIt=t,this.Zkt=e,this.kCt=i}};function zG(t,e){return eG(t)?0:b.min(t.ob,e)}function In(t,e){var i;return b.max(t.ob,e)+(null!=(i=t.ct)?i:0)}var XG=class extends VG{DCt(t,e){gi(e);const i={l_:"WCt",Xm:t.WSt.Xm,Zet:this.ECt[0],zSt:t.zSt,qCt:{t7:"",MSt:t.MSt},ob:t.ob,hbt:t.hbt,aIt:t.WSt.aIt};return this.tCt(i),Promise.resolve()}async BCt(t,e){gi(e);const i=t.nst.aIt;let s;void 0!==i.S3?(this.Zkt.Ckt(t.zSt)||await sf(this.Zkt.Dkt(t.zSt),e),s=this.Zkt.Lkt(i.S3,i).Lb()):s=i.ob;const n=zG(i,s),r=In(i,n);var o;const h={l_:"nst",Xm:t.nst.Xm,Zet:this.ECt[0],dCt:n,fCt:r,ob:s,ct:null!=(o=i.ct)?o:0,rS:0,zSt:t.zSt,hbt:t.hbt,aIt:t.nst.aIt};this.tCt(h)}constructor(t,e,i){super(t,e,[i])}};function GG(t,e){let i=ri.BM();for(const s of t){let n=s.ob;if(s.hbt.XAt.GSt&&eG(s.nst))n=0;else{const i=t=>s.hbt===t.hbt&&gn(t.nst,s.nst),r=Rt(t,i);if(void 0!==r)n=b.min(n,r.hb);else{const t=Rt(e,i);void 0!==t&&(n=b.min(n,t.KPt.An(0)))}}i=i.gM(ri.NM(n,s.hb))}return i}var QG=.001,KG=class{get VCt(){return this.zCt}get XCt(){return this.GCt}get QCt(){return this.KCt}get jCt(){return this.oIt}get hbt(){return this.GCt.hbt}tRt(t){this.GCt.tRt(t)}YCt(t){const e=t.slice();for(let t=this.zCt.length-1;t>=0;t--){const i=this.zCt[t];if(!i.jPt)throw new v("Invalid state");const s=Ud(e,(t=>t.l_===i.l_));s>=0?(i.E7(e[s]),Zt(e,s)):Zt(this.zCt,t)}for(const t of e){const e=new wG(t);this.zCt.push(new pG(t.l_,t,this.oIt,e,this))}e.length>0&&this.oIt.cI();const i=t.map((t=>t.l_));this.KCt.PCt(i)}cq(t){var e;const i=(null==(e=this.XM)?void 0:e.cq(t))||!1;return i&&(this.vl(),this.jCt.cI()),i}ZCt(t){for(const t of this.zCt)if(t.l_!==Fs.gA||t.$Pt)throw new v("Invalid state");const e=new wG(t),i=new pG(Fs.gA,t,this.oIt,e,this);this.zCt=[i]}get VPt(){const t=this.oIt.VPt;if(t)return t;if(this.zCt.length>0){const t=this.zCt[0].YPt.VPt;if(t&&this.zCt.every((e=>e.YPt.VPt===t)))return t}}mit(){for(const t of this.zCt)t.YPt.GPt()}get JCt(){if(0===this.zCt.length)return ri.BM();const t=GG(this.oIt.KRt.concat(this.oIt.YRt),ls(this.zCt,(t=>t.YPt.O9))).cM();let e=new ri([0,1/0]);for(const t of this.zCt)e=e.Cn(t.YPt.Fl);for(const t of this.zCt)e=e.wM(t.ZPt);return e=e.gM(t),e}get $Ct(){if(0===this.zCt.length)return ri.BM();const t=GG(this.oIt.YRt,ls(this.zCt,(t=>t.YPt.O9))).cM();let e=new ri([0,1/0]);for(const t of this.zCt)e=e.Cn(t.YPt.Fl);return e=e.gM(t),e}lrt(t){const e=this.JCt.CM(t,QG);return e?e.An(e.V-1):t}_Rt(t){return!!this.JCt.CM(t,QG)||this.GCt._Rt(t)}txt(t){return this.$Ct.br(t,QG)}ext(t,e,i){for(const t of this.zCt){const i=t.YPt,s=i.flt;if(void 0!==s&&e>=s&&!i.Fl.cM().br(s))return!0}return e-t<i}vl(){this.ixt(),this.sxt()}ixt(){this.XCt.vl()}sxt(){this.QCt.vl(),this.VCt.forEach((t=>t.vl()))}hl(){this.vl(),this.XCt.hl()}constructor(t,e,i,s){this.GCt=t,this.oIt=e,this.KCt=i,this.XM=s,this.zCt=[]}};var jG=class extends Ci{constructor(){super(xt.WAt)}},YG=class extends Ci{constructor(){super(xt.UAt)}},ZG="LazyMediaBuffer",JG=class extends d{get YB(){return this.Ax}get RK(){return this.EY}get Vp(){if(!this.D7)throw new io(Ot.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.D7.Vp}get QW(){return this.nq}set QW(t){this.nq=t,this.D7&&(this.D7.QW=t)}$V(){return this.D7?this.D7.$V():this.nxt}get Fl(){return this.D7?this.D7.Fl:ri.BM()}get xK(){return this.D7?this.D7.xK:this.DK.oz}get ZW(){return this.hq}set ZW(t){this.hq=t,this.D7&&(this.D7.ZW=t)}BK(t,e){Cz.Lbt(ZG,"Marking gap from "+t+" to "+e+"."),this.DK.lz(t,e),this.D7&&this.D7.BK(t,e)}MK(t,e){Cz.Lbt(ZG,"Removing gap from "+t+" to "+e+"."),this.DK.fz(t,e),this.D7&&this.D7.MK(t,e)}rxt(t){this.D7=t,this.D7.ZW=this.hq,this.D7.QW=this.nq;const e=this.DK.oz;for(let t=0;t<e.V;t++)this.D7.BK(e.Tn(t),e.An(t));var i;this.nxt&&(Cz.Lbt(ZG,"End of stream"),null==(i=this.D7)||i.PK());this.D7.kn(uh.RV,this.Rs),this.oxt.lI(t)}hxt(t){return sf(this.oxt.fI,t)}async WQ(t,e,i){const s=await this.hxt(i);await s.WQ(t,e,i)}async LK(){const t=await this.hxt();await t.LK()}async zQ(t,e,i){const s=await this.hxt(i);await s.zQ(t,e,i)}async WA(t,e,i){const s=await this.hxt(i);await s.WA(t,e,i)}async nK(t,e){const i=await this.hxt();await i.nK(t,e)}PK(){this.nxt=!0,this.D7&&this.D7.PK()}MV(t){return!!this.D7&&this.D7.MV(t)}async FV(t){const e=await this.hxt();await e.FV(t)}async bn(){var t;this.Lo(),null==(t=this.D7)||t.pn(uh.RV,this.Rs)}constructor(t,e){super(),this.EY=t,this.axt=e,this.Ax=void 0,this.D7=void 0,this.oxt=new Os,this.nq=20,this.nxt=!1,this.hq=30,this.DK=new hI}},$G="LazyMediaSource",tQ=class{get Vp(){return{l_:$.rD,Mj:[],ZB:[]}}get rt(){throw new v("Not implemented")}get bj(){return this.uxt}get Tj(){return this.cxt}get Fl(){return this.XB?this.XB.Fl:ri.BM()}get ct(){return this.XB?this.XB.ct:this.aR}get $V(){return!!this.XB&&this.XB.$V}get Rd(){return this.XB?this.XB.Rd:new ri([0,1/0])}xj(t){this.aR=t,this.XB&&this.XB.xj(t)}PK(){this.A3=!0,this.XB&&this.XB.PK()}mK(){this.A3=!1,this.XB&&this.XB.mK()}Oj(t,e,i,s){this.lxt=t,this.dxt=e,this.fxt=Boolean(i),this._xt=Boolean(s),this.XB&&this.XB.Oj(t,e,i,s)}MV(t){return!this.XB||this.XB.MV(t)}async FV(t){if(!this.MV(t))throw new v("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.XB)await this.XB.FV(t);else{var e,i;this.FB.c0();const s=await this.FB.Rn(t);j(this.aR)||s.xj(this.aR),this.A3&&s.PK(),s.Oj(this.lxt,this.dxt,this.fxt,this._xt),Cz.Lbt($G,"The MediaSource has been loaded."),this.vxt=!0,this.XB=s,null==(e=this.uxt)||e.rxt(this.XB.bj),null==(i=this.cxt)||i.rxt(this.XB.Tj),this.gxt.lI(s),this.FB.l0()}}async hl(){this.XB&&await this.XB.hl()}constructor(t,e,i){this.FB=t,this.uxt=void 0,this.cxt=void 0,this.gxt=new Os,this.XB=void 0,this.vxt=!1,this.aR=NaN,this.A3=!1,this.lxt=0,this.dxt=1/0,this.fxt=!1,this._xt=!1,e&&(Cz.Lbt($G,"Created lazy media buffer for audio."),this.uxt=new JG(Fs.Cm,this)),i&&(Cz.Lbt($G,"Created lazy media buffer for video."),this.cxt=new JG(Fs.Rm,this))}};function eQ(t,e){return void 0===e&&(e=!1),function(i,s){void 0===s&&(s="*");let n=sQ(i,"tag");const r=sQ(null==s?"*":s,"range"),o=[];let h,a,u,c=-1;for(;++c<r.length;)if(h=r[c].toLowerCase(),e||"*"!==h){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),h)){if(!e)return n[a];o.push(n[a])}else u.push(n[a]);n=u}return e?o:void 0}}eQ(((t,e)=>"*"===e||t===e||Ei(t,e+"-")),!0),eQ(((t,e)=>{const i=t.split("-"),s=e.split("-");let n=0,r=0;if("*"!==s[r]&&i[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!i[n])return!1;if(i[n]!==s[r]){if(1===i[n].length)return!1;n++}else n++,r++}else r++;return!0}),!0);var iQ=eQ(((t,e)=>{let i,s=e;for(;;){if("*"===s||t===s)return!0;if(i=s.lastIndexOf("-"),i<0)return!1;"-"===s.charAt(i-2)&&(i-=2),s=s.slice(0,i)}}));function sQ(t,e){const i=t&&"string"==typeof t?[t]:t;if(!i||"object"!=typeof i||!("length"in i))throw new v("Invalid "+e+" `"+i+"`, expected non-empty string");return i}var xn,nQ=16384,rQ=71,oQ=188,hQ=2,aQ=3;function uQ(t){return cQ(t)?1:function(t){return function(t){if(t.length<hQ*oQ)return-1;const e=t.length<aQ*oQ?hQ:aQ,i=b.min(1e3,t.length-e*oQ);for(let s=0;s<=i;s++){let i=!0;for(let n=0;n<e;n++)if(t[s+n*oQ]!==rQ){i=!1;break}if(i)return s}return-1}(t)>=0}(t)?2:function(t){return null!==pC(wa(t),new ds)}(t)?3:0}function cQ(t){const e=ph(t,0,b.min(t.length,nQ));return hs.Iw(wa(e))}!function(t){t[t.wA=0]="wA",t[t.Gv=1]="Gv",t[t.mxt=2]="mxt",t[t.wxt=3]="wxt"}(xn||(xn={}));var lQ=class{get l_(){return this.EY}get Fl(){return this.D7.Fl}get xK(){return this.D7.xK}pxt(t){return this.D7===t}async zQ(t,e){await this.D7.zQ(t.Xm,{gQ:t.hbt.Yf},e),void 0!==this.yxt&&this.EY===Fs.Rm&&cQ(t.Xm.Xm)&&this.yxt.z7(t.Xm.Xm)}async WQ(t,e){gi(e),Cz.hp("HlsMediaBuffer","Got media data, appending to "+this.EY+" MediaBuffer: "+Bi(t.aIt.jft));const i=t.dCt,s=t.fCt,n={S3:t.ob,ct:t.ct,rS:t.rS,gQ:t.hbt.Yf};void 0!==t.Xm&&(await this.D7.WQ(t.Xm,n,e),this.Axt(t.Xm,t)),this.bxt(i,s)}Axt(t,e){var i;if(!cQ(t.Xm))return;const s=e.ob,n=s+e.ct,r=e.rS;if(null==(i=this.wlt)||i.ert(t.Xm,s,r),void 0!==this.yxt&&this.EY===Fs.Rm){const i=e.aIt.fEt;this.yxt.ert(t.Xm,s,n,r,e.hbt,i)}const o=[];void 0!==this.wlt&&o.push(this.wlt),void 0!==this.yxt&&o.push(this.yxt),up(this.Fl,o)}bxt(t,e){const i=this.D7.Fl,s=new ri([t,e]).wM(i);for(let t=0;t<s.V;t++)this.D7.BK(s.Tn(t),s.An(t));for(let t=0;t<i.V;t++)this.D7.MK(i.Tn(t),i.An(t))}BK(t,e){this.D7.BK(t,e)}MK(t,e){this.D7.MK(t,e)}constructor(t,e,i,s){this.EY=t,this.D7=e,this.wlt=i,this.yxt=s}};function dQ(t){if(t.l_!==zs.JTt||void 0===t.YAt)return;const e=t.YAt.match(/^CC([1-4])$/);if(e)return Number(e[1]);const i=t.YAt.match(/^SERVICE([\d+])$/);return i?Number(i[1]):void 0}var fQ=class{NTt(t){var e,i,s;return null==(s=null==(i=this.XB)||null==(e=i.Tj)?void 0:e.MV(t))||s}BTt(t){var e,i,s;return null==(s=null==(i=this.XB)||null==(e=i.bj)?void 0:e.MV(t))||s}constructor(t){this.XB=t}},Po="LLHLSPlayer",_Q=[En.bv,En.Tv,En.Sv,En.Rf],vQ=[r.Z_,r.C_,r.U_,r.L_],gQ=2e3,mQ=class extends d{Txt(){if(void 0===this.Sxt)return!1;const t=f.Al();if(!this.Sxt.XCt.GRt(t))return!1;const e=this.Sxt.XCt.VRt();if(void 0===e||void 0===e.nst.ct)return!1;const i=this.zl,s=this.pd,n=this.Sxt.JCt.CM(i);if((void 0!==n?n.An(0)-i:0)>=2*e.nst.ct*s)return!1;return 8*e.XRt/this.XM.LW.wB>=1.8*e.nst.ct}async Ext(){var t;const e=await this.LTt();if(void 0===e)return;const i=null==(t=this.Sxt)?void 0:t.XCt.VRt();if(void 0===i)return;const s=this.kxt;if(b.max(0,i.XRt-i.zRt)<=i.XRt*(e.wB/s.wB))return;const n=e.wB<s.wB;await this.fbt(e,{_bt:n})}Pxt(t){return Br(t,(t=>t.wB))}async Ixt(){let t=await this.Rxt();if(0===t.length)return;const e=await this.Cxt(t);e.length>0&&(t=e);const i=this.Pxt(t);void 0!==i&&(await this.fbt(i,{_bt:!0}),this.jB.RTt(i.wB))}get xxt(){const t=[this.Dxt,this.Nxt].filter(it);for(const e of t){if(!e.XAt.GSt)return!1;const t=e.XAt.O9,i=t[t.length-1];if(i&&i.zSt!==this.Bxt)return!1}return!0}get abt(){return this.kxt}get bbt(){return this.Dxt}get Sbt(){return this.Nxt}get Oxt(){return this.Mxt}get ht(){return this.EA}get Fl(){return this.FB.Fl.ks()}get lbt(){const t=[];if(this.kxt){const e=this.FB.zl;for(const i of this.Lxt)for(const s of i.VCt){const i=s.nIt(e);i&&!Yi(t,i)&&t.push(i)}}return t}get Hl(){if(this.kxt){const t=this.FB.zl;return this.kxt.rEt(t)}}set Hl(t){if(!t||!this.kxt)return;const e=this.kxt.oEt(t);void 0!==e&&this.Fm(e,!1,!0)}get zl(){var t;return null!=(t=this.Fxt)?t:this.FB.zl}set zl(t){this.Fm(t,t===1/0,!0)}Fm(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),Cz.hp(Po,"Seeking to "+t+" s."),this.Fxt=t,this.Uxt=e,this.Hxt=!0,this.vpt=!0,this.To(new Uh(t)),this.h$.vl(),this.Wxt&&(f.bl(this.qxt),i?this.qxt=f.Tl((()=>this.Vxt(t,e)),50):this.Vxt(t,e))}Vxt(t,e){f.bl(this.qxt);const i=[this.Alt,this.zxt,this.a$].filter(it);this.h$=new Zs,this.a$=this.u$(i,t,e,this.h$.fl).catch(this.Xxt)}get ct(){var t,e,i,s,n,r,o;if(!this.xxt)return null!=(o=null!=(r=null!=(n=null==(t=this.Dxt)?void 0:t.XAt.ct)?n:null==(e=this.Nxt)?void 0:e.XAt.ct)?r:null==(s=this.ppt)||null==(i=s.mPt)?void 0:i.XAt.ct)?o:1/0;const h=this.FB.ct;if(j(h)){var a,u;const t=null==(u=this.ppt)||null==(a=u.mPt)?void 0:a.XAt.ct;if(void 0!==t)return t}return h}get jl(){if(!this.xxt)return!1;if(this.xd&&this.Wxt){var t,e;const i=this.zl,s=null==(t=this.Dxt)?void 0:t.XAt.ct,n=null==(e=this.Nxt)?void 0:e.XAt.ct;return!(void 0!==s&&i<s)&&!(void 0!==n&&i<n)}return this.FB.jl}get lt(){return this.WB}get Jl(){return this.qB}get td(){}get rd(){return!1}get hd(){return no({},{RA:0,CA:0,xA:0,DA:0,NA:0,BA:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.FB.ud(),{NA:this.Wwt,DA:this.XM.LW.wB})}get Pr(){var t;return null==(t=this.ppt)?void 0:t.Pr}get ld(){return this.FB.ld}set ld(t){this.FB.ld=t}get _d(){return this.qgt}set _d(t){this.qgt!==t&&(this.qgt=t,this.To(t?new Jt:new vV))}get md(){return this.FB.md}get pd(){return this.FB.pd}set pd(t){Cz.hp(Po,"Setting playback rate to "+t+"."),this.FB.pd=t}get bd(){return this.Gwt.ks()}get Gwt(){return this.FB.bd}get Sd(){return this.zB}set Sd(t){this.zB!==t&&(this.zB=t,this.Gxt())}get Pd(){let t=this.FB.Pd;return this.jwt&&(t=b.max(Yv.Qn,t)),t}get Rd(){return this.Uwt.ks()}get Uwt(){let t=this.Bj;const e=[this.Dxt,this.Nxt].filter(it);if(t.V>0&&e.some((t=>!t.XAt.GSt))){const i=this.Gwt,s=t.An(t.V-1);if(i.V>0&&i.An(i.V-1)>s){let n=i.An(i.V-1);const r=function(t){return t.reduce(((t,e)=>t.Cn(e.XAt.GEt)),new ri([0,1/0]))}(e);r.V>0&&(n=b.min(n,r.An(r.V-1))),t=t.gM(new ri([s,n]))}}return t}ykt(){let t=function(t){if(0===t.length)return ri.BM();let e=new ri([0,1/0]),i=0;for(const s of t){const t=s.XAt.Rd;t.V>0&&(e=e.Cn(t),i=b.max(i,t.Tn(0)))}if(e.V>0)return e;return ri.DM(i)}([this.Dxt,this.Nxt].filter(it));0!==t.V&&(this.XB&&this.xxt&&this.XB.ct!==1/0&&(t=new ri([t.Tn(0),this.XB.ct])),this.Bj=t,this.Qxt&&this.wlt.tE(t.Tn(0)),this.Kxt&&this.yxt.tE(t.Tn(0)))}get xd(){var t;return null!=(t=this.Hxt)?t:this.FB.xd}get GB(){}get nt(){return this.xu}get rt(){return this.PA}get Od(){var t,e;return this.FB.Od||(null==(e=this.kxt)||null==(t=e.xbt)?void 0:t.Ci)||0}get Fd(){var t,e;return this.FB.Fd||(null==(e=this.kxt)||null==(t=e.xbt)?void 0:t.Ti)||0}get Hd(){return this.FB.Hd}set Hd(t){Cz.hp(Po,"Setting volume to "+t+"."),this.FB.Hd=t}get Vd(){return this.QB}get Xd(){return!1}set Xd(t){}get KB(){return this.jB}tf(){return!1}Gd(){return this.FB.ka}we(){Cz.hp(Po,"Hiding the player."),this.FB.we()}Zd(){Cz.hp(Po,"Pausing the player."),this.FB.Zd()}async Jd(){this.KJ=!0;const t=this.FB.Jd();if(this.jl){const t=this.Uwt;t.V>0&&this.Fm(t.Tn(0))}this.Wxt||await this.Gxt(),this.vwt(),await t}vwt(){var t;if(!this.Fwt())if(null==(t=this.abt)?void 0:t.XAt.GSt){var e;let t=!0,i=0;const s=null==(e=this.kxt)?void 0:e.XAt.Tn;if(!this.vpt&&s&&(t=!s.BSt,i=s.NSt,i<0)){const t=this.abt.XAt.GEt;i+=t.An(t.V-1)}this.Vxt(i,t)}else this.Vxt(1/0,!0);this.jxt()&&this.Vxt(1/0,!0)}Fwt(){var t;const e=this.Uwt;if(0===e.V)return!0;const i=null==(t=this.Yxt)?void 0:t.pM(this.zl);return(i&&i>0?this.Yxt.An(i):this.zl)>=e.Tn(0)}get Yxt(){var t,e;const i=null==(t=this.Zxt)?void 0:t.JCt,s=null==(e=this.Sxt)?void 0:e.JCt;return i?s?s.Cn(i):i:s}jxt(){return EQ(this.zl,this.Dxt)||EQ(this.zl,this.Nxt)}Ypt(){this.WB=void 0,this.qB=void 0}CO(t){this.WB||(Ui(this.ir()),this.WB=Gg(t),this.qB=t,this.To(new An(t)))}be(){Cz.hp(Po,"Showing the player."),this.FB.be()}ef(){throw new v("Not implemented")}if(){throw new v("Not implemented")}sf(){}nf(){this.Wxt&&Ui(this.Jxt(this.Dxt,this.Nxt,this.Mxt,{nf:!0}))}async ba(t,e,i){(Cz.hp(Po,"Setting the player source to "+t.src+"."),this.Ypt(),this.qPt&&!fo(this.qPt)&&(await this.ir(),gi(i)),t.src&&!fo(t))&&(this.eO.AB(t.contentProtection),this.qPt=t,this.$xt=t.seamlessSwitchStrategy,this.Kxt=!Yi(t.ignoreEmbeddedTextTrackTypes,nt.CEA608),this.Qxt=!Yi(t.ignoreEmbeddedTextTrackTypes,nt.EMSG),this.kn(xt.VAt,this.handleBufferingErrorEvent),this.ppt=new lG(this.qE,this.rst,t.useCredentials,f.Fv(t.src),t.liveOffset),this.ppt.kn(Lt.uPt,this.WPt),this.ppt.kn(Lt.cPt,this.tDt),this.ppt.kn(r.X_,this.Rs),this.ppt.kn(r.G_,this.Rs),this.eDt=new gG(t,this.ppt,this.FB),this.xu.PB(this.eDt.nt),null!=this.KCt||(this.KCt=this.iDt.P3()),e.textTracks&&this.iO(e.textTracks),Bo(this.xu),this.Gxt())}Gxt(){return this.Alt=this.sDt(this.Alt,this.GE.fl).catch(this.bdt),this.Alt}async sDt(t,e){if(t&&(await t,gi(e)),!this.ppt)return;const i=this.zB;i===Fi.fA||this.KJ?await this.m8(e):i===Fi.Nm&&await this.nDt(e)}async nDt(t){if(void 0===this.ppt||this.jwt)return;if(!this.ppt.fPt){try{await this.ppt.pPt(t)}catch(t){throw eo(t),this._d=!1,new io(Ot.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.rDt.Rtt()}const e=await this.oDt();this.hDt(e);const i=this.aDt(e.Wbt),s=this.uDt(e.qbt),n=this.cDt(e.sEt);if(!n){const t=yQ(e.nEt);t&&(Cz.hp(Po,"Detected initial closed caption rendition."),this.lDt(e,t))}await this.Jxt(i,s,n,{dDt:!0}),this.jwt=!0,this.vyt.yyt()}async oDt(){if(this.fDt=this.ppt.Pr.Hbt,!this.fDt.length)throw new io(Ot.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this._Dt(this.fDt);if(0===t.length)throw new io(Ot.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const e=await this.Cxt(t);return e.length>0&&(t=e),Cz.hp(Po,"Selecting initial active variant stream."),function(t,e,i,s){void 0===s&&(s=Og.maximumBackoff);const n=function(t,e){if(void 0===e)return t;const i=e.preferredVideoCodecs,s=e.preferredAudioCodecs;if(void 0!==i){let e;for(const n of i){const i=t.filter((t=>t.t7&&t.t7.Ibt&&ca(t.t7.Ibt,n)));if(0===i.length)continue;if(void 0===s)return i;void 0===e&&(e=i);const r=AQ(i,s);if(void 0!==r)return r}if(void 0!==e)return e}if(void 0!==s){const e=AQ(t,s);if(void 0!==e)return e}return t}(t,e),r=TQ(n,s);switch(i.jW.type){case hu.BANDWIDTH:{const t=i.tq,e=r.filter((e=>e.wB<=t));if(e.length>0)return qd(e,(t=>t.wB))}case hu.PERFORMANCE:return Br(r,(t=>t.wB));case hu.QUALITY:return qd(r,(t=>t.wB))}}(t,this.qPt.abr,this.XM,this.yrt.maximumBackoff)}aDt(t){if(this.vDt){const t=this.gDt(this.vDt);if(t)return t}return bQ(t)}uDt(t){if(this.mDt){const t=this.gDt(this.mDt);if(t)return t}return bQ(t)}cDt(t){for(const t of this.xu.Ff)t.h_===_s.Jn&&(this.wDt=this.pDt(t));if(this.wDt){const t=this.gDt(this.wDt);if(t)return t}return yQ(t)}pDt(t){return Rt(this.kxt.sEt,(e=>t===this.yDt.get(e.Yf)))}async m8(t){this.Wxt||(await this.nDt(t),this.Wxt=!0,await this.Jxt(this.Dxt,this.Nxt,this.Mxt,{dDt:!0}))}iO(t){for(const e of t)e.src&&this.oO.FE(e)}lDt(t,e){if(!this.Kxt)return;const i=function(t){const e=[];for(const i of t){const t=dQ(i);void 0!==t&&e.push({J1:t,t2:i.gs||"",jh:i.l})}return e}(t.nEt);for(const t of i)this.yxt.Gct(t);if(void 0!==e){const t=dQ(e);this.yxt.zct(t).h_=_s.Jn}}get Lxt(){return[this.Zxt,this.Sxt,this.ADt].filter(it)}dbt(t){for(const e of t)if(!this.bDt(e))throw new v("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.fDt=t}bDt(t){const e=this.Pr;return!!e&&Yi(e.Hbt,t)}gDt(t){if(this.kxt)return Rt(this.kxt.Qbt,(e=>e===t))}hDt(t){var e;if(Cz.hp(Po,"Setting active variant stream."),this.kxt===t)return;const i=(null==(e=this.kxt)?void 0:e.rSt)!==(null==t?void 0:t.rSt);if(this.kxt&&i)for(const t of this.kxt.sEt)this.QE(t);if(this.kxt=t,this.To(new jG),this.apt(),t&&i)for(const e of t.sEt)this.TDt(e)}TDt(t){const e=this.FB.UE(K.xm,void 0,t.l,t.gs,t.GAt,void 0,void 0,t.JAt.map(Rz).filter(it));e.kn(Bs.oa,this.onTextTrackChange),this.yDt.set(t.Yf,e),this.SDt.tt(e)}QE(t){const e=this.yDt.get(t.Yf);e&&(e.pn(Bs.oa,this.onTextTrackChange),this.SDt.it(e),this.yDt.delete(t.Yf),this.FB.QE(e))}async Rxt(){var t;const e=null!=(t=this.fDt)?t:this.Pr.Hbt;if(0===e.length&&!this.fDt)return Cz.hp(Po,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===e.length&&!this.fDt)return Cz.hp(Po,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const i=await this._Dt(e);if(0===i.length)return Cz.Fbt(Po,"LLHLSPlayer - No variant streams with supported codecs available to perform ABR selection on."),[];const s=TQ(i,this.yrt.maximumBackoff);return 0===s.length?(this.EDt||(Cz.Fbt(Po,"LLHLSPlayer - No variant streams with online renditions available to perform ABR selection on."),this.kDt++,await this.PDt(i)),[]):s}async IDt(){const t=await this.LTt();if(void 0===t)return;const e=!!this.kxt&&t.wB<this.kxt.wB;await this.fbt(t,{_bt:e})}async LTt(){var t,e;const i=await this.Rxt();if(0===i.length)return;const s=function(t){const e=t.zl,i=t.Fl.CM(e);return i?i.An(0)-e:0}(this.FB),n=await this.Cxt(i),r={Ti:this.FB.Ti,Ci:this.FB.Ci,DTt:s,Gnt:null==(e=this.qPt)||null==(t=e.abr)?void 0:t.restrictToPlayerSize},o=await this.RDt.LTt(i,this.kxt,n,r,new fQ(this.XB));return!!this.kxt&&o.wB<this.kxt.wB||this.CDt(o,s)?o:void 0}CDt(t,e){var i;if(t===this.abt)return!1;const s=this.abt&&SQ(this.abt,this.yrt.maximumBackoff),n=SQ(t,this.yrt.maximumBackoff);if(!s&&n)return!0;(!this.xDt||this.xDt.ubt.wB>t.wB)&&(this.xDt={ubt:t,Zot:f.Al()});const r=f.Al()-this.xDt.Zot;var o;const h=null!=(o=null==(i=this.Sbt)?void 0:i.XAt.xTt)?o:1/0;return e>=b.max(h-1,5)||r>1e3}async PDt(t){this.EDt=!0;let e=!1;for(const i of t)try{const t=this.Nxt?Rt(i.qbt,(t=>mz(t,this.Nxt))):void 0;if(void 0===t)continue;await this.PPt(t),t.XAt.akt=-1/0,e=!0}catch(t){}if(e)this.kDt=0,await this.DDt();else{if(this.kDt>=this.yrt.maxRetries)return void this.CO(new io(Ot.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=b.min(this.yrt.minimumBackoff*2**(this.kDt-1),this.yrt.maximumBackoff);await ye(t)}this.EDt=!1,await this.IDt()}async _Dt(t){let e=await Xd(t,(async t=>{var e,i,s;const n=[(null==(e=t.t7)?void 0:e.Pbt)?'audio/mp4; codecs="'+t.t7.Pbt+'"':void 0,(null==(i=t.t7)?void 0:i.Ibt)?'video/mp4; codecs="'+t.t7.Ibt+'"':void 0].filter(it);return 0===n.length||await this.NDt.iz(n,null==(s=this.qPt)?void 0:s.useManagedMediaSource)}));return e.some((t=>{var e;return null==(e=t.t7)?void 0:e.Ibt}))&&(e=e.filter((t=>!t.t7||t.t7.Ibt||0!==t.qbt.length))),e.some((t=>{var e;return null==(e=t.t7)?void 0:e.Pbt}))&&(e=e.filter((t=>!t.t7||t.t7.Pbt||0!==t.Wbt.length))),e}Cxt(t){return this.ppt.vPt?Xd(t,(t=>async function(t,e){for(const i of t)if(!await e(i))return!1;return!0}([bQ(t.Wbt),bQ(t.qbt),yQ(t.sEt),yQ(t.nEt)].filter(it),(t=>this.BDt(t))))):Promise.resolve([])}async BDt(t){if(0===t.XAt.O9.length)return!1;const e=t.XAt.O9[0];if(!e.jft)return!1;const i=e.jft,s=i.Svt?Jz(i.Svt.Tn,i.Svt.V):void 0;try{return await this.rst.g9(i.Qy,s)}catch(t){return!1}}async fbt(t,e){if(!this.Wxt)throw new v("LLHLSPlayer - The LLHLSPlayer is not loaded.");if(!t)throw new v("LLHLSPlayer - Cannot explicitly set the active variant stream to undefined.");if(!this.bDt(t))throw new v("LLHLSPlayer - Trying to set an active variant stream that does not exists on the internal model.");if(t===this.kxt)return void Cz.hp(Po,"Trying to set the already active variant stream, ignoring.");const i=this.Dxt?Rt(t.Wbt,(t=>mz(t,this.Dxt))):void 0,s=this.Nxt?Rt(t.qbt,(t=>mz(t,this.Nxt))):void 0,n=this.Mxt?Rt(t.sEt,(t=>mz(t,this.Mxt))):void 0;this.hDt(t),this.xDt=void 0,await this.Jxt(i,s,n,e)}async Tbt(t){if(!t)throw new v("LLHLSPlayer - Cannot explicitly set the active audio rendition to undefined.");if(!this.kxt)return void(this.vDt=t);const e=this.gDt(t);if(!e)throw new v("LLHLSPlayer - Trying to set an invalid rendition as the active audio rendition.");this.bbt!==e&&(Cz.hp(Po,"Switching audio rendition"),await this.Jxt(e,this.Nxt,this.Mxt,{gbt:!0}))}async Ebt(t){if(!t)throw new v("LLHLSPlayer - Cannot explicitly set the active video rendition to undefined.");if(!this.kxt)return void(this.mDt=t);const e=this.gDt(t);if(!e)throw new v("LLHLSPlayer - Trying to set an invalid rendition as the active video rendition.");this.Sbt!==e&&(Cz.hp(Po,"Switching video rendition"),await this.Jxt(this.Dxt,e,this.Mxt,{vbt:!0}))}async ODt(t){if(!t)throw new v("LLHLSPlayer - Cannot explicitly set the active subtitle rendition to undefined.");if(!this.jwt)return void(this.wDt=t);const e=this.gDt(t);if(!e)throw new v("LLHLSPlayer - Trying to set an invalid rendition as the active subtitle rendition.");Cz.hp(Po,"Switching subtitle rendition"),await this.Jxt(this.Dxt,this.Nxt,e)}async MDt(t,e){this.EDt||(t.l_!==zs.Rm?await this.LDt(t,e):this.fDt&&this.fDt.length<=1?(this.Nxt!==t&&await this.Jxt(this.Dxt,t,this.Mxt),await this.LDt(t,e)):await this.IDt())}async PPt(t,e){try{await this.ppt.PPt(t,e)}catch(i){throw eo(i),(We(i)||So(i))&&await this.MDt(t,e),i}}async LDt(t,e){if(!Yi(this.FDt,t)){this.FDt.push(t);try{const i=t.l_===zs.xm||t.l_===zs.JTt?1/0:this.yrt.maxRetries;await yi((()=>this.retryOfflineRenditionsCallback(t,e)),e,i,this.yrt.minimumBackoff,this.yrt.maximumBackoff)}catch(t){this.CO(new io(Ot.MEDIA_LOAD_ERROR,t.message,t))}finally{so(this.FDt,t),t.XAt.akt===-1/0&&await this.DDt()}}}Jxt(t,e,i,s){void 0===s&&(s={});const n={_bt:s._bt||!1,gbt:s.gbt||!1,vbt:s.vbt||!1,nf:s.nf||!1,dDt:s.dDt||!1};return n.dDt||n.nf||this.Dxt!==t||this.Nxt!==e||this.Mxt!==i?void 0===t&&void 0===e?Promise.reject(new v("Trying to buffer no media renditions.")):(this.Dxt=t,this.Nxt=e,this.Mxt=i,this.ykt(),this.To(new YG),this.h$.vl(),this.h$=new Zs,this.UDt.vl(),this.UDt=new Zs,this.zxt=this.HDt([this.zxt,this.a$].filter(it),t,e,i,n,this.UDt.fl).catch(this.Xxt),this.zxt):Promise.resolve()}async WDt(t,e,i,s){const n=[this.qDt(e,s),this.qDt(i,s)];return wz(t,e)||n.push(this.qDt(t,s)),Promise.all(n)}async qDt(t,e){if(t)try{await this.ppt.PPt(t,e)}catch(i){eo(i),(We(i)||So(i))&&await this.VDt(t,e)}}async VDt(t,e){if(!this.EDt)if(t.l_!==zs.Rm)await this.LDt(t,e);else if(this.fDt&&this.fDt.length<=1)await this.LDt(t,e);else{const t=await this.oDt();this.hDt(t);const e=this.aDt(t.Wbt),i=this.uDt(t.qbt),s=this.cDt(t.sEt);await this.Jxt(e,i,s)}}async HDt(t,e,i,s,n,r){var o;if(!this.Wxt)return void await this.WDt(e,i,s,r);await Promise.all(t.map((t=>t.catch($d)))),this.zDt(),await this.XDt(r),await this.GDt();const h=[];n.gbt&&this.XB&&this.XB.bj&&h.push(this.XB.bj.WA(0,1/0)),n.vbt&&this.XB&&this.XB.Tj&&h.push(this.XB.Tj.WA(0,1/0)),await Promise.all(h),gi(r);const a=await this.QDt(e,i,n.nf,r);this.KDt(e,i,n._bt||a),this.jDt(s,n._bt),gi(r);const u=[i,wz(e,i)?void 0:e,s].filter(it);try{await Promise.all(u.filter((t=>!t.XAt.skt)).map((t=>{var e;return null==(e=this.ppt)?void 0:e.IPt(t,r)})))}catch(t){eo(t)}if(gi(r),this.Nj(),this.ykt(),this.Wxt)if(void 0!==this.Fxt)this.Vxt(this.Fxt,this.Uxt);else if(!this.vpt&&(null==(o=this.kxt)?void 0:o.XAt.Tn)){const t=this.kxt.XAt,e=t.Tn;let i=e.NSt;if(e.NSt<0){const e=t.GEt;i+=e.An(e.V-1)}this.Vxt(i,!e.BSt)}else!this.vpt&&u.every((t=>!t.XAt.GSt))?this.Vxt(1/0,!0):this.Lxt.length>0&&this.YDt()}async QDt(t,e,i,s){var n,r;const o=void 0!==t&&t!==e,h=void 0!==e,a=await this.ZDt(t,e,this.kxt);if(gi(s),!i&&this.XB&&!a)return!1;const u=void 0!==(null==(n=this.XB)?void 0:n.bj),c=void 0!==(null==(r=this.XB)?void 0:r.Tj);if(!i&&!(o!==u||h!==c)&&a&&this.XB&&this.XB.MV(a))return await this.XDt(s),await this.XB.FV(a),!0;for(const t of this.Lxt)t.VCt.forEach((t=>t.vl()));this.FB.c0();try{this.XB&&await this.FB.ir(),this.XB=await this.JDt(a,o,h)}finally{this.FB.l0()}return!0}async ZDt(t,e,i){var s,n;const r=i.t7,o=[];if(void 0!==t){if(!r||!r.Pbt)return;{const t='audio/mp4; codecs="'+r.Pbt+'"';Cz.hp(Po,"Configuring MediaSource for initial audio rendition with codec: "+t+"."),o.push(t)}}if(void 0!==e){if(!r||!r.Ibt)return;{const t='video/mp4; codecs="'+r.Ibt+'"';Cz.hp(Po,"Configuring MediaSource for initial video rendition with codec: "+t+"."),o.push(t)}}if(0===o.length)return void Cz.Fbt(Po,"No codecs found on the active variant stream.");var h;const a=null!=(h=null==e||null==(s=e.XAt.O9[0])?void 0:s.MSt)?h:[];var u;const c=null!=(u=null==t||null==(n=t.XAt.O9[0])?void 0:n.MSt)?u:[],l=this.ppt.Pr,d=await nX(this.qPt.contentProtection,o,l.Kkt.concat(c).concat(a),this.qE,this.qPt.useCredentials);return{l_:$.rD,Mj:o.map((t=>({YB:t}))),ZB:d,Gj:this.qPt.useManagedMediaSource}}async JDt(t,e,i){let s;return s=t?await this.FB.Rn(t):new tQ(this.FB,e,i),this.XB=s,this.Nj(),this.swt(),this.nwt(),s}Nj(){const t=this.XB;if(t&&j(t.ct)){var e,i,s;const n=null!=(s=null==(e=this.Dxt)?void 0:e.XAt.ct)?s:null==(i=this.Nxt)?void 0:i.XAt.ct;void 0!==n&&n>0&&t.xj(n)}this.ykt()}swt(){const t=this.XB;t&&(t.Tj&&(t.Tj.QW=this.XM.rq),t.bj&&(t.bj.QW=this.XM.rq))}nwt(){const t=this.XB;t&&(t.Tj&&(t.Tj.ZW=this.XM.ZW),t.bj&&(t.bj.ZW=this.XM.ZW))}KDt(t,e,i){if(!this.XB)throw new v("Invalid state");this.XB.bj?this.Ij&&this.Ij.pxt(this.XB.bj)||(this.Ij=new lQ(Fs.Cm,this.XB.bj,this.Qxt?this.wlt:void 0,this.Kxt?this.yxt:void 0)):this.Ij=void 0,this.XB.Tj?this.Rj&&this.Rj.pxt(this.XB.Tj)||(this.Rj=new lQ(Fs.Rm,this.XB.Tj,this.Qxt?this.wlt:void 0,this.Kxt?this.yxt:void 0)):this.Rj=void 0;const s=wz(t,e);if(this.Rj&&e){const t=s&&this.Ij?[this.Rj,this.Ij]:[this.Rj];this.Sxt?this.Sxt.hbt!==e&&(i&&(this.Sxt.vl(),this.Sxt.jCt.cI()),this.Sxt.tRt(e)):(this.Sxt=function(t,e,i,s,n,r,o,h,a,u){const c=s.Pr.dA,l=new wn(c),d=new NG(Fs.Rm,t,s,l,n,r,o,u),f=e.map((t=>t.l_)),_=h.Cmt(l,s.Pr.dA,f),v=new KG(d,l,_,a);return v.YCt(e),v}(e,t,this.FB,this.ppt,this.qE,this.rst,this._It,this.KCt,this.XM,this.qPt.useCredentials),this.Sxt.XCt.kn(Oh.YIt,this.$Dt),this.Sxt.XCt.kn(Oh.ZIt,this.tNt),this.Sxt.QCt.kn(Pe.gCt,this.eNt),this.Sxt.QCt.kn(Pe.wCt,this.iNt),this.Sxt.QCt.kn(Pe.pCt,this.sNt),this.Sxt.QCt.kn(Pe.mCt,this.nNt)),this.Sxt.YCt(t)}else{var n;null==(n=this.Sxt)||n.hl(),this.Sxt=void 0}var r;this.Ij&&t&&!s?(this.Zxt?this.Zxt.hbt!==t&&(i&&(this.Zxt.vl(),this.Zxt.jCt.cI()),this.Zxt.tRt(t)):(this.Zxt=function(t,e,i,s,n,r,o,h,a,u){const c=s.Pr.dA,l=new wn(c),d=new NG(Fs.Cm,t,s,l,n,r,o,u),f=h.Cmt(l,s.Pr.dA,[e.l_]),_=new KG(d,l,f,a);return _.YCt([e]),_}(t,this.Ij,this.FB,this.ppt,this.qE,this.rst,this._It,this.KCt,this.XM,this.qPt.useCredentials),this.Zxt.XCt.kn(Oh.ZIt,this.tNt),this.Zxt.QCt.kn(Pe.gCt,this.eNt),this.Zxt.QCt.kn(Pe.mCt,this.nNt)),this.Zxt.YCt([this.Ij])):(null==(r=this.Zxt)||r.hl(),this.Zxt=void 0);this.rNt()}jDt(t,e){if(this.ADt){this.ADt.XCt.hbt===t?e&&(this.ADt.vl(),this.ADt.jCt.cI()):(this.ADt.hl(),this.ADt=void 0)}if(!this.ADt&&t){const e=this.yDt.get(t.Yf);e.h_=_s.Jn,this.ADt=function(t,e,i,s,n,r,o){const h=i.Pr.dA,a=new FG(e,h),u=new wn(h),c=new NG(Fs.gA,t,i,u,s,n,r,o),l=new XG(u,h,Fs.gA),d=new KG(c,u,l);return d.ZCt(a),d}(t,e,this.ppt,this.qE,this.rst,this._It,this.qPt.useCredentials)}}rNt(){const t=[this.Ij,this.Rj].filter(it).map((t=>t.l_));this.ppt.Pr.dA.Qkt(t)}async u$(t,e,i,s){await Promise.all(t.map((t=>t.catch($d)))),gi(s),await this.GDt(),gi(s),this.Fxt=void 0,this.Hxt=void 0,this.vpt=!0;const n=this.Uwt.lM(e);this.FB.Fm(n,i),this.Wxt&&this.Lxt.length>0&&(this.oNt(this.FB.zl),this.YDt())}oNt(t){for(const e of this.Lxt)e._Rt(t)||(e.ixt(),e.jCt.rCt()),e.txt(t)||(e.sxt(),e.jCt.oCt())}zDt(){for(const t of this.Lxt)t.vl()}GDt(){return Promise.all([this.hNt(),this.aNt(),this.uNt()])}YDt(){this.cNt(),this.lNt(),this.dNt()}async DDt(){this.Wxt&&this.Lxt.length>0&&(this.Lxt.forEach((t=>t.ixt())),await this.hNt(),this.cNt(),this.Lxt.forEach((t=>t.XCt.ARt())))}cNt(){if(this.fNt)return;const t=()=>{this.fNt=void 0};this._Nt=new Zs,this.fNt=this.vNt(this._Nt.fl).catch(this.Xxt).then(t,t)}async hNt(){var t;null==(t=this._Nt)||t.vl();const e=this.fNt;this.fNt=void 0,e&&await e}async vNt(t){gi(t);const e=this.Lxt;for(;;){const i=[],s=this.FB.zl;for(const t of e){const e=t.XCt,n=t.lrt(s);if(e.$Pt)i.push(e.iIt());else if(t.ext(s,n,this.XM.rq)){const s=e.vRt(n);if(void 0===s){if(e.hbt.XAt.GSt)continue;const t=e.hbt.XAt.O9;t.length&&t[0].ob>n&&(this.zl=1/0),e.SRt(),e.wRt(n)}else{const[i,n]=s;e.pit(i,n,t.VPt),t.QCt.RCt(i,n)}i.push(e.iIt())}}await ts((t=>{if(0===i.length){e.every((t=>t.XCt.fRt))||i.push(this.FB.Bl(r.vv,t));for(const s of e)i.push(s.QCt.Bl(Pe.mCt,t))}return sf(Promise.race(i),t)}),t)}}lNt(){if(this.gNt)return;const t=()=>{this.gNt=void 0};this.mNt=new Zs,this.gNt=this.wNt(this.mNt.fl).catch(this.Xxt).then(t,t)}async aNt(){var t;null==(t=this.mNt)||t.vl();const e=this.gNt;this.gNt=void 0,e&&await e}async wNt(t){gi(t);const e=this.Lxt;for(;;){const i=[];for(const t of e){const e=t.XCt,s=t.QCt;if(s.$Pt)i.push(s.iIt());else{const t=e.hRt();t?"nst"===t.l_?(s.NCt(t),i.push(s.iIt())):"WSt"===t.l_&&(s.CCt(t),i.push(s.iIt())):i.push(e.bRt())}}if(0===i.length)break;await sf(Promise.race(i),t)}}dNt(){if(this.pNt)return;this.yNt=new Zs;const t=()=>{this.pNt=void 0};this.pNt=this.ANt(this.yNt.fl).catch(this.Xxt).then(t,t)}async uNt(){var t;null==(t=this.yNt)||t.vl();const e=this.pNt;this.pNt=void 0,e&&await e}async ANt(t){for(;;){const e=this.Lxt;e.forEach((t=>t.mit()));const i=[],s=[],n=[];for(const t of e){const e=t.QCt;for(const r of t.VCt){const t=r.jPt?i:s;if(r.$Pt)t.push(r.iIt());else if(!r.sIt(this.FB.zl)){const i=e.UCt(r.l_);i?"nst"===i.l_&&i.zSt===this.Bxt?(r.vrt(i),t.push(r.iIt())):"WCt"===i.l_&&i.zSt===this.Bxt&&(r.zQ(i),t.push(r.iIt())):n.push(e.HCt(r.l_))}}}if(0===i.length){const i=ls(e,(t=>t.VCt.filter((t=>t.jPt)).map((e=>t.QCt.UCt(e.l_)))));if(i.length>0&&i.every((t=>void 0!==t&&"WCt"===t.l_&&t.zSt!==this.Bxt))){const s=i,n=qd(s,(t=>t.zSt)).zSt;if(s.every((t=>t.zSt===n))){const e=Br(s,(t=>t.ob)).ob,i=await this.bNt(s);this.TNt(i)?(Cz.Lbt(mn,"Seamless switch from",this.XB.Vp,"to",i),await this.XB.FV(i),Cz.Lbt(mn,"Seamless switch complete.")):await this.SNt(e,i,t),this.Bxt=s[0].zSt}else for(const t of e)for(const e of t.VCt){let i=t.QCt.UCt(e.l_);for(;i&&i.zSt!==n;)t.QCt.rIt(i),i=t.QCt.UCt(e.l_)}continue}}if(0===i.length&&0===s.length&&0===n.length){e.every((t=>t.VCt.length>0&&t.VCt.every((t=>t.sIt(this.FB.zl)))))&&this.XB.PK();break}await sf(Promise.race([...i,...s,...n]),t)}}TNt(t){return this.$xt===$i.pA||this.$xt!==$i.yA&&this.XB.MV(t)}async bNt(t){const e=t.map((t=>t.qCt.t7)),i=e.map((t=>({YB:t}))),s=ls(t,(t=>t.qCt.MSt));s.push(...this.ppt.Pr.Kkt);let n=await nX(this.qPt.contentProtection,e,s,this.qE,this.qPt.useCredentials);return 0===n.length&&this.XB&&this.XB.Vp.ZB.length>0&&(n=this.XB.Vp.ZB),{l_:$.rD,Mj:i,ZB:n,Gj:this.qPt.useManagedMediaSource}}async SNt(t,e,i){var s;const n=this.XB,o=n.ct,h=this.Fl.length>0&&this.zl<t;if(h)try{for(Cz.Lbt(mn,"Marking end of stream and waiting for ended to switch discontinuity."),n.PK();!this.FB.jl&&this.FB.zl<t;)await this.FB.Bl([r.vv,r.M_],i)}catch(t){throw n.mK(),n.xj(o),t}Cz.Lbt(mn,"Perform hard switch from",null==(s=this.XB)?void 0:s.Vp,"to",e);try{this.FB.c0(),this.zl<t&&this.FB.Fm(t,!0,!0),this.Rj=void 0,this.Ij=void 0,this.rNt(),await this.FB.ir(),this.XB=await this.FB.Rn(e),this.Nj(),this.swt(),this.nwt(),this.XB.Tj&&(this.Rj=new lQ(Fs.Rm,this.XB.Tj,this.Qxt?this.wlt:void 0,this.Kxt?this.yxt:void 0),this.Rj.BK(t-1,t)),this.XB.bj&&(this.Ij=new lQ(Fs.Cm,this.XB.bj,this.Qxt?this.wlt:void 0,this.Kxt?this.yxt:void 0),this.Ij.BK(t-1,t)),this.rNt()}finally{h&&Ui(this.FB.Jd()),this.FB.l0()}if(this.Sxt){const t=void 0!==this.Ij&&void 0===this.Zxt?[this.Rj,this.Ij]:[this.Rj];this.Sxt.YCt(t)}this.Zxt&&this.Zxt.YCt([this.Ij]),Cz.Lbt(mn,"Hard switch complete.")}XDt(t){return sf(rf(ls(this.Lxt,(t=>t.VCt.map((t=>t.iIt()))))),t)}apt(){const t=this.Fd,e=this.Od;this.dyt===t&&this.fyt===e||(this.dyt=t,this.fyt=e,this.To(new Sn))}async bn(){Cz.hp(Po,"Unloading the player."),this.ENt(),this.Ypt(),await this.ir(),this.FB.lO=void 0,this.SDt.bn(),await this.oO.bn(),await this.wlt.bn(),await this.yxt.bn(),this.EA.bn(),this.PA.bn(),this.xu.bn(),this.kNt.bn(),this.vyt.hl(),this._It.hl(),this.KCt&&(this.KCt.hl(),this.KCt=void 0)}async ir(){Cz.hp(Po,"Resetting the player."),this.pn(xt.VAt,this.handleBufferingErrorEvent),this.Bxt=-1,this.GE.vl(),this.GE=new Zs,this.h$.vl(),this.h$=new Zs,this.UDt.vl(),this.UDt=new Zs;const t=[this.Alt,this.a$,this.zxt].filter(it);await Promise.all(t.map((t=>t.catch($d)))),this.Alt=void 0,this.a$=void 0,this.zxt=void 0,this.Dxt=void 0,this.Nxt=void 0,this.Mxt=void 0,this.fDt=void 0,this.vDt=void 0,this.mDt=void 0,this.wDt=void 0,this.vDt=void 0,this.mDt=void 0,this.wDt=void 0,this.FDt=[],this.hDt(void 0),this.zDt(),await this.GDt(),this.Zxt&&(this.Zxt.hl(),this.Zxt=void 0),this.Sxt&&(this.Sxt.hl(),this.Sxt=void 0),this.ADt&&(this.ADt.hl(),this.ADt=void 0),this.Ij=void 0,this.Rj=void 0,this.XB=void 0,this.ppt&&(this.ppt.hl(),this.ppt=void 0),this.eDt&&(this.xu.CB(this.eDt.nt),this.eDt=void 0),await this.oO.ir(),await this.wlt.ir(),await this.yxt.ir(),this.FB.hO(),await this.FB.ir(),this.qPt=void 0,this.Wxt=!1,this.Bj=ri.BM(),this.Fxt=void 0,this.lyt=void 0,this.dyt=0,this.fyt=0,this.Hxt=void 0,this.vpt=!1,this.KJ=!1,f.bl(this.qxt),this.jwt=!1,this.PNt=!1,this.Wwt=0,this.$xt=$i.fA,this.kNt.ir(),this.INt(),this.To(new Ng(this.zl,this.Pd))}INt(){for(const t of this.EA.Ff)t.bn();for(const t of this.PA.Ff)t.bn();for(const t of this.xu.Ff)t.bn();this.EA.ir(),this.PA.ir(),this.xu.ir(),this.yDt.clear()}RNt(){this.kNt.kn(_Q,this.Rs),this.kNt.kn(En.Pv,this.wO),this.kNt.kn(En.Ev,this.CNt),this.kNt.kn(En.Av,this.xNt),this.XM.kn("GW",this.myt),this.XM.kn("YW",this.wyt),this.FB.kn(vQ,this.Rs),this.FB.kn(r.R_,this.handleContentProtectionErrorEvent),this.FB.kn(r.N_,this.DNt),this.FB.kn(r.M_,this.Mh),this.FB.kn(r.Ch,this.NNt),this.FB.kn(r.Ah,this.BNt),this.FB.kn(r.Y_,this.ONt),this.FB.kn(En.Rf,this.TD),this.FB.kn(r.vv,this.DZ),this.FB.kn(r.rv,this.Xe),this.FB.kn(r.ev,this.gO),this.FB.kn(r.tv,this.MNt),this.FB.kn(r.mv,this.LNt)}ENt(){this.kNt.pn(_Q,this.Rs),this.kNt.pn(En.Pv,this.wO),this.kNt.pn(En.Ev,this.CNt),this.kNt.pn(En.Av,this.xNt),this.XM.pn("GW",this.myt),this.XM.pn("YW",this.wyt),this.FB.pn(vQ,this.Rs),this.FB.pn(r.R_,this.handleContentProtectionErrorEvent),this.FB.pn(r.N_,this.DNt),this.FB.pn(r.M_,this.Mh),this.FB.pn(r.Ch,this.NNt),this.FB.pn(r.Ah,this.BNt),this.FB.pn(r.Y_,this.ONt),this.FB.pn(En.Rf,this.TD),this.FB.pn(r.vv,this.DZ),this.FB.pn(r.rv,this.Xe),this.FB.pn(r.ev,this.gO),this.FB.pn(r.tv,this.MNt),this.FB.pn(r.mv,this.LNt)}constructor(t,e,i,s,n,r,o){super(),this.XM=i,this._It=s,this.iDt=n,this.yDt=Re(),this.Kxt=!0,this.Qxt=!0,this.Wxt=!1,this.qPt=void 0,this.XB=void 0,this.Alt=void 0,this.GE=new Zs,this.ppt=void 0,this.vDt=void 0,this.mDt=void 0,this.wDt=void 0,this.kxt=void 0,this.Dxt=void 0,this.Nxt=void 0,this.Mxt=void 0,this.fDt=void 0,this.FDt=[],this.Ij=void 0,this.Rj=void 0,this.Zxt=void 0,this.Sxt=void 0,this.ADt=void 0,this.KCt=void 0,this.UDt=new Zs,this.zxt=void 0,this.h$=new Zs,this.a$=void 0,this.Bxt=-1,this._Nt=void 0,this.mNt=void 0,this.yNt=void 0,this.fNt=void 0,this.gNt=void 0,this.pNt=void 0,this.qgt=!0,this.kDt=0,this.EDt=!1,this.zB=Fi.KO,this.WB=void 0,this.qB=void 0,this.Bj=ri.BM(),this.FNt=[],this.Fxt=void 0,this.Uxt=!1,this.vpt=!1,this.KJ=!1,this.lyt=void 0,this.dyt=0,this.fyt=0,this.Hxt=void 0,this.qxt=0,this.jwt=!1,this.PNt=!1,this.$xt=$i.fA,this.xDt=void 0,this.UNt=void 0,this.QB=new vS,this.Wwt=0,this.handleContentProtectionErrorEvent=t=>{this.WB=Gg(t.errorObject),this.qB=t.errorObject,this.Rs(t)},this.handleBufferingErrorEvent=t=>{this.CO(new io(Ot.MEDIA_LOAD_ERROR,t.lt.message,t.lt))},this.DNt=()=>{this.ykt();const t=this.ct;t!==this.lyt&&(this.lyt=t,this.To(new Pt(this.lyt)))},this.Mh=()=>{this.jl&&this.To(new X(this.zl))},this.NNt=()=>{this.To(new Cn(this.zl))},this.BNt=()=>{this.vwt(),this.To(new gs(this.zl))},this.wO=()=>{void 0!==this.UNt&&f.bl(this.UNt),this.To(new Tt(this.zl))},this.ONt=()=>{this.To(new gt(this.zl))},this.TD=()=>{this.To(new Io(this.zl,this.Pd))},this.DZ=()=>{const t=this.lbt;Dr(this.FNt,t)||(this.To(new mG),this.FNt=t),this.To(new oh(this.zl,this.Hl))},this.$Dt=ef((t=>{t.OE===Fs.Rm&&this.Txt()&&Ui(this.Ext())}),200),this.tNt=t=>{var e;this.Wwt+=t.$It,"nst"===t.JIt&&t.OE===Fs.Rm&&Ui(this.IDt()),this.To(new si(function(t){if(t){if(void 0!==t.Svt){var e,i;const s=t.Svt.Tn+(null!=(i=t.Svt.V)?i:0);return{YS:t.Qy,kit:[null==(e=t.Svt)?void 0:e.Tn,s],ME:!0}}return{YS:t.Qy.toString()||"",ME:!0}}return{YS:"",ME:!0}}(t.uri),(null==(e=this.abt)?void 0:e.wB)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.OE,t.httpStatusCode,t.$It))},this.Xe=()=>{this.To(new Uh(this.zl))},this.gO=()=>{this.To(new ja(this.zl))},this.MNt=()=>{this.apt()},this.LNt=()=>{this.To(new Ao(this.zl,this.Hd))},this.CNt=()=>{this.FB.xd?this.To(new ra(this.zl)):(null!=this.UNt||(this.UNt=f.Tl((()=>{this.PNt&&(this.xDt=void 0,Ui(this.Ixt()))}),2500)),this.vwt(),this.To(new ra(this.zl)))},this.xNt=()=>{this.PNt=!0,this.To(new ji(this.zl,this.Pd))},this.Xxt=t=>{Lr(t)||We(t)||So(t)||(this.zDt(),Ui(this.GDt()),this.To(new Hz(t)))},this.WPt=()=>{this.ykt()},this.tDt=t=>{Ui(this.MDt(t.hbt))},this.bdt=t=>{if(Lr(t))return;const e=t instanceof io?t:new io(Ot.MEDIA_DECODE_ERROR,t.message,t);this.CO(e)},this.onTextTrackChange=t=>{if(!this.kxt)return;const e=t.Ht,i=this.pDt(e);i&&(e.h_===_s.a_||e.h_===_s.Jn?(Ui(this.ODt(i)),this.yDt.forEach((t=>{t!==e&&(t.h_=_s.Th)}))):this.Mxt&&this.Mxt===i&&Ui(this.Jxt(this.Dxt,this.Nxt,void 0)))},this.retryOfflineRenditionsCallback=async(t,e)=>{this.Oxt!==t&&this.bbt!==t&&this.Sbt!==t||(await this.ppt.PPt(t,e),t.XAt.akt=-1/0)},this.myt=()=>{this.swt()},this.wyt=()=>{this.nwt()},this.eNt=t=>{const e=this.kxt;if(!(null==e?void 0:e.eEt)&&(this.ppt.UPt(t.t7,t.hbt.XAt),this.rDt.Xbt(),e)){const t=void 0!==this.Dxt&&!Yi(e.Wbt,this.Dxt),i=void 0!==this.Nxt&&!Yi(e.qbt,this.Nxt);(t||i)&&this.Jxt(t?void 0:this.Dxt,i?void 0:this.Nxt,this.Mxt).catch($d)}},this.iNt=t=>{this.rDt.Kbt(t.hbt,t.wot)},this.sNt=t=>{this.rDt.Ybt(t.hbt,t.yCt.Lb())},this.nNt=t=>{this.ppt.LPt(t.hbt)},this.rst=new WV(r),this.FB=t,this.qE=e,this.jB=new Uz(this.XM.LW),this.NDt=new Wz(this.FB),this.RDt=new Zz(this.XM),this.yrt=o.retryConfiguration,this.EA=new Qh,this.PA=new Qh,this.rDt=new xz(this,this.XM,this.EA,this.PA),this.SDt=new ih,this.oO=new Ds(this.FB,this.qE),this.wlt=new UV(this.FB),this.yxt=new CH(this.FB),this.xu=new Vo([this.SDt,this.oO.Z,this.wlt.Z,this.yxt.Z]),this.eO=new Ne(this.qE),this.FB.lO=this.eO,this.vyt=new pQ(this,this.FB),this.kNt=new nn(this.vyt,!0),this.RNt()}},wQ=class{async DO(t,e){if(!Kn(t.type))return!1;if(t.useNativePlayback)return!1;const i=t.contentProtection;if(i&&!$v(i)){if(!lo(i))return!1;if(!await this.d9(i))return!1}return!0}async d9(t){return!!t.aes128||(!(!t.playready||!await f.YC())||(!(!t.widevine||!await f.QC())||(!(!t.clearkey||!await f.jC())||!t.fairplay&&await f.sx())))}},pQ=class extends Ji{get Pd(){return this.Ko.Pd}yyt(){this.To(new Io(this.zl,this.Pd))}constructor(t,e){super(e),this.Ko=t}};function yQ(t){const e=Rt(t,(t=>t.GAt)),i=t.filter((t=>t.QAt)),s=f.F5,n=i.map((t=>t.gs)).filter(it),r=iQ(n,s);return r?Rt(i,(t=>t.gs===r)):e}function AQ(t,e){for(const i of e){const e=t.filter((t=>t.t7&&t.t7.Pbt&&ca(t.t7.Pbt,i)));if(0!==e.length)return e}}function bQ(t){var e;return null!=(e=yQ(t))?e:t[0]}function TQ(t,e){return t.filter((t=>SQ(t,e)))}function SQ(t,e){const i=e+gQ;return 0===t.qbt.length||t.qbt.some((t=>t.XAt.akt<f.Al()-i))}function EQ(t,e){if(!e||e.XAt.GSt)return!1;const i=e.XAt.O9;return 0!==i.length&&i[0].ob>t}var kQ=class{async dIt(t,e,i){try{const s=await crypto.subtle.importKey("raw",e,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:i},s,t);return new S(n)}catch(t){throw new io(Ot.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}hl(){}static ux(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}},PQ=class extends Ci{constructor(t,e){super(t),this.data=e}},IQ=["message","messageerror","error"],RQ=class extends Ci{constructor(t){super(lt.aa),this.error=t}},CQ=class extends d{get HNt(){return this.WNt.fl.$c}qNt(t,e){this.HNt||(void 0!==this.VNt?this.VNt.qNt(t,e):this.zNt.push({JP:t,XNt:e}))}GNt(){this.HNt||(this.WNt.vl(),wr(this.zNt),void 0!==this.VNt&&this.VNt.GNt())}constructor(t){super(),this.VNt=void 0,this.zNt=[],this.QNt=t=>{if(this.HNt)t.GNt();else{this.VNt=t,this.VNt.kn(IQ,this.Rs);for(const e of this.zNt)t.qNt(e.JP,e.XNt);wr(this.zNt)}},this.KNt=t=>{if(this.HNt)return;const e=t instanceof v?t:new v("Could not create Worker.");this.To(new RQ(e)),this.GNt()},this.WNt=new Zs,t(this.WNt.fl).then(this.QNt,this.KNt)}};var xQ=class extends d{qNt(t,e){e?this.VNt.postMessage(t,e):this.VNt.postMessage(t)}GNt(){this.Lo(),this.VNt.removeEventListener("message",this.jNt),this.VNt.removeEventListener("messageerror",this.YNt),this.VNt.removeEventListener("error",this.s0),this.VNt.terminate()}constructor(t,e){super(),this.jNt=t=>{this.To(new PQ("message",t.data))},this.YNt=t=>{this.To(new PQ("messageerror",t.data))},this.s0=t=>{null==t.preventDefault||t.preventDefault.call(t);const e=t.error instanceof v?t.error:new v(t.message);this.To(new RQ(e)),this.GNt()},this.VNt=new qu(t,e),this.VNt.addEventListener("message",this.jNt),this.VNt.addEventListener("messageerror",this.YNt),this.VNt.addEventListener("error",this.s0)}},DQ=0,NQ=class extends d{qNt(t,e){e?this.ZNt.contentWindow.postMessage({type:"message",data:t},"*",e):this.ZNt.contentWindow.postMessage({type:"message",data:t},"*")}GNt(){var t;this.ZNt.removeEventListener("load",this.JNt),self.removeEventListener("message",this.$Nt),null==(t=this.ZNt.contentWindow)||t.postMessage({type:"terminate"},"*"),z(this.ZNt)}constructor(t,e){super(),this.JNt=()=>{this.ZNt.removeEventListener("load",this.JNt),this.ZNt.contentWindow.postMessage({type:"initialize",id:this.XA,script:this.tBt},"*")},this.$Nt=t=>{t.origin===this.eBt&&t.data.id===this.XA&&("initialized"===t.data.type||("error"===t.data.type?(this.To(new RQ(new v(t.data.data.message))),this.GNt()):this.To(new PQ("message",t.data.data))))},this.XA=DQ++,this.tBt=t;const i=f.Oh("iframe.html",e);this.ZNt=function(t){const e=h.createElement("iframe");return e.width="0",e.height="0",e.style.display="none",e.src=t,h.body.appendChild(e),e}(i.href),this.eBt=i.origin,this.ZNt.addEventListener("load",this.JNt),self.addEventListener("message",this.$Nt)}};function BQ(t,e,i){const s=f.Fv(t,e);return new CQ((t=>async function(t,e,i,s){let n;try{return n=new xQ(t,i),await FQ(n,s),n}catch(t){null==n||n.GNt(),eo(t)}if(LQ&&RO){let e;try{const i=await f.PD.GS({YS:t,xE:Fr.GET,DE:Ct.gA,fl:s});e=await i.VE(s)}catch(t){eo(t)}if(e){let t;try{const r=RO([e],{type:"application/javascript"});return t=URL.createObjectURL(r),n=new xQ(t,i),await FQ(n,s),n}catch(t){null==n||n.GNt(),eo(t),LQ=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return n=new NQ(t,e),await FQ(n,s),n}catch(t){throw null==n||n.GNt(),t}}(s,e,i,t)))}var OQ,MQ,LQ=!0;async function FQ(t,e){const i=await t.Bl(["message","error"],e);if("error"===i.type)throw function(t){return new io(Ot.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(i.error);if(!function(t){return B(t)&&"7.3.0"===t.iBt}(i.data))throw new io(Ot.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (7.3.0).");return i}!function(t){t.sBt="dIt",t.nBt="LIt"}(OQ||(OQ={})),function(t){t.rBt="oBt",t.hBt="aBt"}(MQ||(MQ={}));var UQ=class{uBt(){const t=BQ(this.cBt,this.lBt,{name:"THEOplayer decrypt worker"});return t.kn("message",this.dBt),t.kn("error",this.r8),t}dIt(t,e,i){const s=""+ ++this.fBt,n={_Bt:OQ.sBt,vBt:s,gBt:t,mBt:e,wBt:i},r=new Os;return this.pBt.set(s,r),null!=this.VNt||(this.VNt=this.uBt()),this.VNt.qNt(n),r.fI}hl(t){void 0===t&&(t=new Sr),this.pBt.forEach((e=>e.dI(t))),this.pBt.clear(),this.VNt&&(this.VNt.GNt(),this.VNt=void 0)}constructor(t){this.VNt=void 0,this.fBt=0,this.pBt=rs(),this.dBt=t=>{const e=t.data,i=e.yBt,s=this.pBt.get(i);if(s)if(this.pBt.delete(i),e.ABt===MQ.rBt)s.lI(e.bBt);else if(e.ABt===MQ.hBt){const t=e.TBt,i=e.SBt?new v(e.SBt):void 0,n=new io(Ot.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt. (code: "+t+")",i);s.dI(n)}},this.r8=t=>{const e=new io(Ot.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.hl(e)},this.lBt=t;try{this.cBt=f.Fv("theoplayer.d.js",t)}catch(t){throw new io(Ot.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function HQ(t){const e=Rt(t.boxes,_I);if(!e)return;const i=Rt(e.boxes,vI);return i?i.handlerType:void 0}function WQ(t){const e=new qA;return e.boxes.push(...t.boxes),e}function qQ(t){const e=new Xe;return e.boxes.push(...t.boxes),e}var VQ=8;function zQ(t,e){const i=function(t){const e=new va;return e.boxes.push(...t.boxes),e}(t),s=GQ(e);for(let t=0;t<i.boxes.length;t++){const n=i.boxes[t];if(n===e)i.boxes[t]=new Fy(new S(e.getSize()-VQ));else if(gI(n)){const e=n,r=Ud(e.boxes,(t=>t instanceof Ns&&t.trackId===s));if(r>=0){const s=e.boxes[r],n=qQ(e);n.boxes[r]=new Fy(new S(s.getSize()-VQ)),i.boxes[t]=n}}}return i}function XQ(t,e){const i=function(t){const e=new Aa;return e.boxes.push(...t.boxes),e}(t);for(let t=0;t<i.boxes.length;t++){const s=i.boxes[t];if(pI(s)){const n=Rt(s.boxes,yI);n&&n.trackId===e&&(i.boxes[t]=new Fy(new S(s.getSize()-VQ)))}}return i}function GQ(t){return Rt(t.boxes,fI).trackId}function QQ(t,e,i,s){const n=Rt(t.boxes,yI),r=i.BT(e).lT();let o=rt.ZERO;for(const e of t.boxes){if(e instanceof Ps){o=gv(e.baseMediaDecodeTime,r),e.baseMediaDecodeTime=e.baseMediaDecodeTime.subtract(o);break}if(e instanceof AA){o=gv(rt.fromNumber(e.baseMediaDecodeTime),r),e.baseMediaDecodeTime-=o.toNumber();break}}if(o.isZero())return;const h=Rt(t.boxes,AI);if(void 0!==h&&h.samples.length>0){const t=h.samples;if(!h.flags.sampleDurationPresent){h.flags.sampleDurationPresent=!0;const e=null!=s?s:n.defaultSampleDuration;for(const i of t)i.duration=e}t[0].duration+=o.toNumber(),h.samples=t}}var KQ="Mp4Transmuxer",jQ=class extends VG{DCt(t,e){gi(e);const i=t.hbt,s=zI(wa(t.WSt.Xm.Xm));if(!s)throw new v("Mp4Transmuxer - Unable to parse "+i.l_+" MP4 initializer.");this.QQ=s;const n=function(t){let e,i;for(const s of t.Z)e||(e=s.zG),i||(i=s.VG);if(e||i)return{Pbt:e,Ibt:i,jTt:void 0};return}(s);n&&this.OCt(i,n);const r=function(t){for(const e of t.Z)if(void 0!==e.XG)return e.XG;return}(s);void 0!==r&&this.MCt(i,r);const o=function(t){var e;const i=KA(t),s=Rt(i.boxes,lI),n=s.boxes.filter(dI),r=Rt(n,(t=>HQ(t)===Qy.AUDIO)),o=Rt(n,(t=>HQ(t)===Qy.VIDEO)),h={Pbt:{tp:r?GQ(r):void 0},Ibt:{tp:o?GQ(o):void 0}},a=null==(e=Rt(s.boxes,gI))?void 0:e.boxes.filter(mI);var u,c;const l=a?{Pbt:null!=(u=Rt(a,(t=>t.trackId===h.Pbt.tp)))?u:void 0,Ibt:null!=(c=Rt(a,(t=>t.trackId===h.Ibt.tp)))?c:void 0}:void 0;var d,f;if(l&&(h.Pbt.Py=null==(d=l.Pbt)?void 0:d.defaultSampleDuration,h.Ibt.Py=null==(f=l.Ibt)?void 0:f.defaultSampleDuration),!r||!o)return{Pbt:r?t:void 0,Ibt:o?t:void 0,_S:h};const _=WQ(i),v=WQ(i),g=i.boxes.indexOf(s);_.boxes[g]=zQ(s,o),v.boxes[g]=zQ(s,r);const m=_.serialize().join(),w=v.serialize().join();return{Pbt:m,Ibt:w,_S:h}}(t.WSt.Xm.Xm);if(this.EBt=o._S,o.Ibt){const e=Rt(s.Z,(t=>t.tp===o._S.Ibt.tp)),i={l_:"WCt",Xm:{l_:wt.xV,Xm:o.Ibt},Zet:Fs.Rm,zSt:t.zSt,qCt:{t7:'video/mp4; codecs="'+e.VG+'"',MSt:t.MSt},ob:t.ob,hbt:t.hbt,aIt:t.WSt.aIt};this.tCt(i)}if(o.Pbt){const e=Rt(s.Z,(t=>t.tp===o._S.Pbt.tp)),i={l_:"WCt",Xm:{l_:wt.xV,Xm:o.Pbt},Zet:Fs.Cm,zSt:t.zSt,qCt:{t7:'audio/mp4; codecs="'+e.zG+'"',MSt:t.MSt},ob:t.ob,hbt:t.hbt,aIt:t.WSt.aIt};this.tCt(i)}return Promise.resolve()}async BCt(t,e){gi(e);const i=t.nst.aIt;Cz.hp(KQ,"Transmuxing fMP4: "+Bi(i.jft));const s=t.nst.Xm,n=YQ(s.Xm,this.QQ),r=Vd(n.map((t=>t.T3)),xr);if(void 0!==r&&(i.S3=r,this.FCt(t.hbt)),!this.Zkt.Ckt(t.zSt)){const s=Bh.UT(i.ob);if(n.length>0){const e=Vd(n.map((t=>t.kBt)),xr);for(const i of this.ECt)this.Zkt.Hkt(t.zSt,i,e,s,!1);this.FCt(t.hbt)}this.Zkt.Ckt(t.zSt)||await sf(this.Zkt.Dkt(t.zSt),e)}const o=this.Zkt.Mkt(t.zSt),h=i.S3?this.Zkt.Lkt(i.S3,i).Lb():i.ob,a=zG(i,h);var u;const c={dCt:a,fCt:In(i,a),ob:h,ct:null!=(u=i.ct)?u:0,rS:o.Lb(),zSt:t.zSt,hbt:t.hbt,aIt:t.nst.aIt},l=function(t,e){if(void 0===e.Pbt.tp)return{Pbt:void 0,Ibt:t};if(void 0===e.Ibt.tp)return{Pbt:t,Ibt:void 0};const i=KA(t),s=WQ(i),n=WQ(i);for(let t=0;t<i.boxes.length;t++){const r=i.boxes[t];wI(r)&&(s.boxes[t]=XQ(r,e.Ibt.tp),n.boxes[t]=XQ(r,e.Pbt.tp))}const r=s.serialize().join(),o=n.serialize().join();return{Pbt:r,Ibt:o}}(s.Xm,this.EBt);if(l.Ibt){var d;const e=this.EBt.Ibt.tp,s=Rt(this.QQ.Z,(t=>t.tp===e)),o=Rt(n,(t=>t.tp===e)),h=this.PBt(l.Ibt,s,o,null==(d=this.EBt)?void 0:d.Ibt.Py,i);this.IBt=s,this.LCt(t.hbt,i,o.T3.Kb(r));const a=no({l_:"nst",Xm:{l_:wt.xV,Xm:h},Zet:Fs.Rm},c);this.tCt(a)}if(l.Pbt){const t=no({l_:"nst",Xm:{l_:wt.xV,Xm:l.Pbt},Zet:Fs.Cm},c);this.tCt(t)}this.RBt=i,this.CBt=n}PBt(t,e,i,s,n){if(!function(t){return zt(t)?t.HSt:0===t.mEt&&t.vEt.HSt}(n))return t;if(!this.RBt||!this.IBt||!this.CBt)return t;const r=this.IBt.tp,o=Rt(this.CBt,(t=>t.tp===r)),h=this.Zkt.Lkt(o.xBt,this.RBt),a=this.Zkt.Lkt(i.T3,n).Kb(h).BT(e.zw);if(a.qb(Bh.eT))return t;if(a.Fb(Bh.UT(.5)))return t;const u=zt(n)?n:n.vEt;return Cz.Lbt(KQ,"Stretching first video frame of segment #"+u.bSt+" to fill gap of "+a.Lb()+"s"),function(t,e,i,s){const n=KA(t),r=Rt(n.boxes,wI);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof Ae&&QQ(t,e,i,s);const n=r.getSize();if(n!==t){const e=n-t;for(const t of r.boxes)t instanceof Ae&&bI(t,e)}}return n.serialize().join()}(t,e.zw,a,s)}constructor(...t){super(...t),this.QQ=void 0,this.EBt=void 0,this.RBt=void 0,this.CBt=void 0,this.IBt=void 0}};function YQ(t,e){const i=Yo(hs.Ew(wa(t)),E_.lm);if(!i)throw new v("Mp4Transmuxer - Unable to parse segment or part.");return function(t,e){const i=[];for(const n of t.Z){if(!n.Fy||0===n.Ly.length||0===n.Ly[0].zy.length)continue;const t=n.mw.tp,r=Rt(e.Z,(e=>e.tp===t));let o=0,h=1/0,a=0;const u=n.mw.Py||0;for(const t of n.Ly)for(const e of t.zy){const t=e.Xy||0,i=o+t;var s;o+=null!=(s=e.ct)?s:u;const n=o+t;i<h&&(h=i),n>a&&(a=n)}const c=Bh.Jb(n.Fy.Fy,r.zw);i.push({tp:t,kBt:c,T3:c.HA(Bh.$b(h,r.zw)),DBt:c.HA(Bh.$b(o,r.zw)),xBt:c.HA(Bh.$b(a,r.zw))})}return i}(i,e)}var ZQ,JQ="MpegtsTransmuxer",$Q=class extends jQ{DCt(t,e){return super.DCt(t,e)}RCt(t,e){if(super.RCt(t,e),this.A8.NBt())return;var i;const s=null!=(i=null==e?void 0:e.jft)?i:t.jft;if(!s)return;/\.(ts|aac|mp3)/i.test(s.Qy)&&this.A8.BBt()}OBt(t){let e;return this.MBt.has(t.zSt)?e=this.MBt.get(t.zSt):(e=uQ(t.nst.Xm.Xm),this.MBt.set(t.zSt,e)),e}async BCt(t,e){gi(e);const i=this.OBt(t),s=t.nst;if(i!==xn.mxt&&i!==xn.wxt)return super.BCt(t,e);if(s.aIt.MSt.some(eK))throw new io(Ot.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.A8.BBt();let r;i===xn.mxt?(Cz.hp(JQ,"Transmuxing MPEG-TS: "+Bi(s.aIt.jft)),r=await n.LBt({data:s.Xm.Xm,metadata:this.FBt})):(Cz.hp(JQ,"Transmuxing raw audio: "+Bi(s.aIt.jft)),r=await n.UBt({data:s.Xm.Xm,metadata:this.FBt})),gi(e),this.OCt(t.hbt,{Pbt:r.metadata.audio_codec,Ibt:r.metadata.video_codec,jTt:void 0}),r.metadata.video_frame_rate&&this.MCt(t.hbt,r.metadata.video_frame_rate);const o=iK(r.metadata.first_decode_timestamp),h=iK(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?iK(r.metadata.first_video_presentation_timestamp):void 0;if(s.aIt.S3=h,this.FCt(t.hbt),void 0!==a&&this.LCt(t.hbt,s.aIt,function(t,e){let i=t.Kb(e);return i.zb(Bh.eT)&&(i=i.HA(Om())),i}(a,h)),!this.Zkt.Ckt(t.zSt)){const i=Bh.UT(s.aIt.ob);for(const e of this.ECt)this.Zkt.Hkt(t.zSt,e,o,i,!0);this.FCt(t.hbt),this.Zkt.Ckt(t.zSt)||await sf(this.Zkt.Dkt(t.zSt),e)}const u=this.Zkt.Ukt(o,s.aIt);this.FBt=r.metadata;const c=this.Zkt.Lkt(h,s.aIt).Lb(),l=zG(s.aIt,c);var d;const f={dCt:l,fCt:In(s.aIt,l),ob:c,ct:null!=(d=s.aIt.ct)?d:0,rS:u.Lb(),zSt:t.zSt,hbt:t.hbt,aIt:s.aIt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.ECt){const e=no({l_:"nst",Xm:void 0,Zet:t},f);this.tCt(e)}return}const _=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.HBt||this.WBt!==t.zSt||!Ki(this.HBt,r.data.audio_init))){const e=this.Zkt.Lkt(s.aIt.S3,s.aIt).Lb(),i={l_:"WCt",Xm:{l_:wt.xV,Xm:r.data.audio_init},Zet:Fs.Cm,zSt:t.zSt,qCt:{t7:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',MSt:s.aIt.MSt},ob:e,hbt:t.hbt,aIt:s.aIt};this.HBt=r.data.audio_init,this.WBt=t.zSt,this.tCt(i)}const e=no({l_:"nst",Xm:{l_:wt.xV,Xm:r.data.audio_media},Zet:Fs.Cm},f);this.tCt(e)}else if(t.nst.aIt.fEt&&Yi(this.ECt,Fs.Cm)){const t=no({l_:"nst",Xm:void 0,Zet:Fs.Cm},f);this.tCt(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.qBt||this.VBt!==t.zSt||!Ki(this.qBt,r.data.video_init))){const e=this.Zkt.Lkt(s.aIt.S3,s.aIt).Lb(),i={l_:"WCt",Xm:{l_:wt.xV,Xm:r.data.video_init},Zet:Fs.Rm,zSt:t.zSt,qCt:{t7:'video/mp4; codecs="'+r.metadata.video_codec+'"',MSt:s.aIt.MSt},ob:e,hbt:t.hbt,aIt:s.aIt};this.qBt=r.data.video_init,this.VBt=t.zSt,this.zBt=zI(wa(r.data.video_init)),this.tCt(i)}const e=this.zBt.Z[0],i=YQ(r.data.video_media,this.zBt)[0],n=this.PBt(r.data.video_media,e,i,void 0,s.aIt);this.IBt=e;const o=no({l_:"nst",Xm:{l_:wt.xV,Xm:n},Zet:Fs.Rm},f);this.tCt(o),_.push(i)}else if(t.nst.aIt.fEt&&Yi(this.ECt,Fs.Rm)){const t=no({l_:"nst",Xm:void 0,Zet:Fs.Rm},f);this.tCt(t)}this.RBt=s.aIt,this.CBt=_}vl(){this.HBt=void 0,this.qBt=void 0,super.vl()}constructor(t,e,i,s){super(e,i,s),this.FBt=void 0,this.HBt=void 0,this.qBt=void 0,this.zBt=void 0,this.WBt=0,this.VBt=0,this.MBt=Re(),this.A8=t}},tK=class{Cmt(t,e,i){return new $Q(this,t,e,i)}};function eK(t){return t.xE===Bu.ZTt}function iK(t){return Bh.Jb(rt.fromBits(t.low,t.high),t.base)}!function(t){t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4"}(ZQ||(ZQ={}));var sK=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=Bp.Xk;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module(ea("AGFzbQEAAAA="))}catch(t){return!1}}();return sK=()=>t,t};var nK=class{LBt(t){return this.XBt(ZQ.MPEGTS_TO_FMP4,t)}UBt(t){return this.XBt(ZQ.RAW_AUDIO_TO_FMP4,t)}uBt(){const t=BQ(this.cBt,this.lBt,{name:"THEOplayer transmux worker"});return t.kn("message",this.dBt),t.kn("error",this.r8),t}XBt(t,e){const i=++this.fBt,s={type:t,id:i,input:e},n=new Os;return this.pBt.set(i,n),this.VNt.qNt(s),n.fI}hl(t){void 0===t&&(t=new Sr),this.pBt.forEach((e=>e.dI(t))),this.pBt.clear(),this.VNt.GNt()}constructor(t){this.fBt=0,this.pBt=Re(),this.dBt=t=>{const e=t.data;if(void 0!==e.requestId){const t=this.pBt.get(e.requestId);if(!t)return;this.pBt.delete(e.requestId),e.success?t.lI(e.output):t.dI(new io(e.errorCode,e.error))}else e.success||this.hl(new io(e.errorCode,e.error))},this.r8=t=>{const e=new io(Ot.MEDIA_DECODE_ERROR,t.error.message,t.error);this.hl(e)},this.lBt=t;const e=sK()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.cBt=f.Fv(e,t)}catch(t){throw new io(Ot.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.VNt=this.uBt()}},rK=class extends tK{NBt(){return void 0!==this.VNt}BBt(){var t;return null!=(t=this.VNt)?t:this.VNt=new nK(this.GBt)}hl(){this.VNt&&(this.VNt.hl(),this.VNt=void 0)}constructor(t){super(),this.GBt=t,this.VNt=void 0}},oK=class{P3(){return new rK(this.GBt)}constructor(t){this.GBt=t}},hK=class extends mQ{Qd(){if(NL(this.FB))return this.FB.Qd()}get Xd(){return!1}set Xd(t){}async bn(){var t;await super.bn(),null==(t=this.byt)||t.bn()}constructor(t,e,i,s,n,r,o){super(t,e,i,s,n,r,o),Bp.mP&&(this.byt=new XL(this))}},aK=class extends hK{async bn(){await super.bn(),await this.fO.dO(this.FB)}constructor(t,e,i,s,n,r,o){const h=new Eh(t);super(h.xO(Fs.Rm),e,i,s,n,r,o),this.fO=h}},uK=class extends wQ{async DO(t,e){return!!Ma(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(Bp.xk||Bp.MP))&&super.DO(t,e))}async d9(t){return(!t.clearkey||!Bp.mP)&&super.d9(t)}};ES(new class extends uK{wg(t,e,i,s,n,r){return new aK(e,i,n,function(t){return kQ.ux()?new kQ:new UQ(t)}(s.libraryLocation),new oK(s.libraryLocation),new cu(qr.zP.L9,qr.zP.M9,qr.zP.O9,qr.zP.U9),s)}BO(){return!0}constructor(...t){super(...t),this.OO=en.zv}}),Cz.Ot=()=>{var t;return Boolean(null==(t=s)?void 0:t.THEOplayerDebugLogsEnabled)};var cK=class{g9(t,e){return Promise.resolve(!1)}w9(t,e){return Promise.resolve(void 0)}f9(t){return Promise.resolve(void 0)}iV(t){return Promise.resolve(void 0)}},lK=class extends d{QBt(){var t;return null==(t=this.KBt)?void 0:t.XAt}Tn(t){Ui(yi((()=>this.jBt(t)),t))}async jBt(t){await this.ppt.pPt(t),this.YBt&&(this.ZBt(this.YBt.Ti,this.YBt.Ci),this.YBt=void 0),this.zZ=!0}JBt(t,e){this.zZ?this.ZBt(t,e):this.YBt={Ti:t,Ci:e}}ZBt(t,e){const i=this.$Bt(t,e),s=null==i?void 0:i.qbt[0];s!==this.KBt&&(this.tOt(),void 0!==s&&(this.KBt=s,this.eOt=new bG(this.ppt,s),this.eOt.TIt()))}tOt(){this.KBt=void 0,this.eOt&&(this.eOt.hl(),this.eOt=void 0)}$Bt(t,e){const i=Rt(this.ppt.Pr.Hbt,(i=>void 0!==i.xbt&&i.xbt.Ti===t&&i.xbt.Ci===e));return null!=i?i:this.ppt.Pr.Hbt[0]}bn(){this.Lo(),this.tOt(),this.ppt.hl()}constructor(t,e,i){super(),this.KBt=void 0,this.eOt=void 0,this.YBt=void 0,this.iOt=()=>{this.To(new xq)},this._wt=t,this.ppt=new lG(i,new cK,t.useCredentials,t.src,t.liveOffset),this.ppt.kn(r.G_,this.Rs),this.zZ=!1}},dK=class extends Ro{get ht(){return this.SJ.ht}get Fl(){return this.SJ.Fl}get Hl(){return this.SJ.Hl}set Hl(t){this.SJ.Hl=t}get zl(){return this.SJ.zl}set zl(t){this.SJ.zl=t}get ct(){return this.SJ.ct}get jl(){return this.SJ.jl}get Jl(){return this.SJ.Jl}get td(){return this.SJ.td}get lt(){return this.SJ.lt}get rd(){return this.SJ.rd}get hd(){return this.SJ.hd}get ld(){return this.SJ.ld}set ld(t){this.SJ.ld=t}get _d(){return this.SJ._d}get md(){return this.SJ.md}get pd(){return this.SJ.pd}set pd(t){this.SJ.pd=t}get bd(){return this.SJ.bd}get Sd(){return this.SJ.Sd}set Sd(t){this.SJ.Sd=t}get Pd(){return this.SJ.Pd}get Rd(){return this.SJ.Rd}get xd(){return this.SJ.xd}get GB(){return this.SJ.GB}get nt(){return this.SJ.nt}get Od(){return this.SJ.Od}get rt(){return this.SJ.rt}get Fd(){return this.SJ.Fd}get Hd(){return this.SJ.Hd}set Hd(t){this.SJ.Hd=t}get Vd(){return this.SJ.Vd}get Xd(){return this.SJ.Xd}set Xd(t){this.SJ.Xd=t}get KB(){return this.SJ.KB}tf(){return this.SJ.tf()}Gd(){return this.SJ.Gd()}Qd(){return this.SJ.Qd()}we(){return this.SJ.we()}sf(){return this.SJ.sf()}nf(){return this.SJ.nf()}Zd(){return this.SJ.Zd()}Jd(){return this.SJ.Jd()}ir(){return this.SJ.ir()}ba(t,e,i){return this.SJ.ba(t,e,i)}be(){return this.SJ.be()}ef(){return this.SJ.ef()}if(){return this.SJ.if()}bn(){this.Lo();for(const t of IS)this.SJ.pn(t,this.Rs);return this.SJ.bn()}constructor(t){super(),this.SJ=t;for(const t of IS)this.SJ.kn(t,this.Rs)}},fK=class extends dK{async ba(t,e,i){await super.ba(t,e,i),t.hlsDateRange&&this.zft(t,e,i)}zft(t,e,i){this.sOt=new lK(t,e,this.nOt),this.sOt.kn(r.G_,this.handleManifestUpdate),this.sOt.Tn(i)}ir(){return this.HPt&&(this.nt.it(this.HPt),this.b$.it(this.HPt),this.HPt.bn(),this.HPt=void 0,this.rOt=!1),this.sOt&&(this.sOt.bn(),this.sOt=void 0),this.b$.ir(),super.ir()}bn(){return this.pn(r.tv,this.MNt),this.sOt&&(this.sOt.bn(),this.sOt=void 0),this.b$.bn(),super.bn()}constructor(t,e,i){super(t),this.sOt=void 0,this.rOt=!1,this.HPt=void 0,this.handleManifestUpdate=()=>{const t=this.sOt.QBt();if(t){const e=this.GB;if(e){const i=e.getTime();let s=this.HPt;s||(s=new VX,this.HPt=s),s.Kn(t.XSt,(t=>(t.getTime()-i)/1e3)),!this.rOt&&s.L.V>0&&(this.nt.tt(s),this.b$.tt(s),this.rOt=!0)}}},this.MNt=()=>{this.sOt&&this.sOt.JBt(this.Fd,this.Od)},this.nOt=e,this.tV=i,this.b$=new dn(this),this.kn(r.tv,this.MNt)}};!function(t){bS.MO().LO(t)}((function(t,e,i){return new fK(t,e,i)}));var _K,ie=class extends Xs{get name(){return"CastError"}constructor(t,e=""){super("An error occurred while casting."),this.errorCode=t,this.description=e}},vK="//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js";function gK(){return _K||(_K=async function(){wK()||await async function(){const t=new Os,e=s.__onGCastApiAvailable;return s.__onGCastApiAvailable=(i,n)=>{i?t.lI():t.dI(new v(n)),s.__onGCastApiAvailable=e,e&&e(i,n)},t.fI}();mK()||await ye(100);mK()||(f.Uv('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await function(t){return new Promise(((e,i)=>{const s=h.createElement("script");s.onload=()=>e(),s.onerror=t=>i((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(h.head||h.documentElement).appendChild(s)}))}(vK));return}().catch((()=>{throw new ie("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}))),_K}function mK(){return Boolean("undefined"!=typeof cast&&cast.framework)}function wK(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function pK(t,e,i,s){if(it(e))for(const i of g.keys(e)){if("type"===i||"images"===i)continue;const s=e[i];it(s)&&(t[i]=s)}!function(t,e,i,s){if(!it(i)&&!it(null==e?void 0:e.images))return;t.images=[],i&&t.images.push(new s.Image(i));if(null==e?void 0:e.images)if(Ts(e.images))t.images.push(new s.Image(e.images));else if(ya(e.images))for(const i of e.images){let e;var n,r;if(Ts(i))e=new s.Image(i);else e=new s.Image(i.src),e.height=null!=(n=i.height)?n:null,e.width=null!=(r=i.width)?r:null;t.images.push(e)}}(t,e,i,s)}function yK(t,e,i){return void 0===i&&(i=chrome),function(t,e,i){switch(null==t?void 0:t.type){case"movie":{const s=new i.MovieMediaMetadata;return pK(s,t,e,i),s}case"audio":{const s=new i.MusicTrackMediaMetadata;return pK(s,t,e,i),!it(s.artist)&&it(t.artistName)&&(s.artist=t.artistName),s}case"tv-show":{const s=new i.TvShowMediaMetadata;return pK(s,t,e,i),!it(s.title)&&it(t.episodeTitle)&&(s.title=t.episodeTitle),!it(s.season)&&it(t.seasonNumber)&&(s.season=t.seasonNumber),!it(s.episode)&&it(t.episodeNumber)&&(s.episode=t.episodeNumber),s}default:{const s=new i.GenericMediaMetadata;return pK(s,t,e,i),s}}}(t,e,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(i))}function Di(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function AK(t){if(t.items&&t.items.length>0&&t.currentItemId>=0)return Rt(t.items,(e=>e.itemId===t.currentItemId))}var bK,Ti="urn:x-cast:com.theoplayer.cast";!function(t){t.oOt="theoplayer_receiver_info",t.hOt="theoplayer_trackpropertychange",t.aOt="theoplayer_propertychange"}(bK||(bK={}));var TK;(TK||(TK={})).SKIP_AD="SKIP_AD";var SK,EK,kK,PK,IK,RK,CK=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function xK(t){if(!Ts(t))return;const e=t.match(CK);return e?3600*k(e[1],10)+60*k(e[2],10)+Number(e[3])+(Number(e[4])||0)/1e3:void 0}function DK(t){if(void 0===t)return;const e=t.match(/^([1-9]?\d|100)%$/);return e?k(e[1])/100:void 0}function NK(t,e){return"vmap"===t.type||!it(t.type)&&!it(e)}function BK(t,e){return"vast"===t.type||!it(t.type)&&it(e)}function OK(t){return t.replace(/[<>&'"]/g,(t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}}))}function MK(t){return"data:application/xml,"+encodeURIComponent(t)}!function(t){t.uOt="all",t.cOt="any",t.KO="none"}(SK||(SK={})),function(t){t.lOt="mute",t.dOt="unmute",t.Ch="pause",t.fOt="resume",t._Ot="rewind",t.vOt="skip",t.gOt="playerExpand",t.mOt="playerCollapse",t.Ih="fullscreen",t.wOt="exitFullscreen",t.pOt="expand",t.COLLAPSE="collapse",t.ymt="start",t.yOt="firstQuartile",t.AOt="thirdQuartile",t.bOt="midpoint",t.TOt="complete",t.SOt="acceptInvitationLinear",t.EOt="acceptInvitation",t.kOt="timeSpentViewing",t.POt="otherAdInteraction",t.Y_="progress",t.IOt="creativeView",t.ROt="adExpand",t.COt="adCollapse",t.xOt="minimize",t.DOt="close",t.NOt="closeLinear",t.BOt="overlayViewDuration",t.OOt="breakStart",t.MOt="breakEnd",t.aa="error"}(EK||(EK={})),function(t){t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general"}(kK||(kK={})),function(t){t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED"}(PK||(PK={})),function(t){t.LOt="linear",t.FOt="nonlinear",t.UOt="companion",t.HOt="vmap"}(IK||(IK={})),function(t){t.wA="",t.LOt="linear",t.WOt="nonlinear",t.qOt="display"}(RK||(RK={}));var LK,Mh,ht=class{static VOt(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static zOt(t){}static XOt(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static GOt(t){const e=t.split(":");let i=0;return i+=3600*Number(e[0]),i+=60*Number(e[1]),i+=Number(e[2]),i}static QOt(t){if(t<=0)return"00:00:00.000";const e=b.floor(t),i=t-e;return this.KOt(e/3600,2)+":"+this.KOt(e/60%60,2)+":"+this.KOt(e%60,2)+"."+this.KOt(1e3*i,3)}static KOt(t,e){return("00"+b.floor(t)).slice(-e)}static jOt(t,e){const i=this.YOt(t);if(0===i)switch(t){case"start":return 0;case"end":return-1}else{if(2===i)return DK(t)*e;if(1===i)return xK(t);if(3===i)return this.XOt(t);if(4===i){const e=Number(t);if(!j(e)&&e>=-1)return e}}}static YOt(t){return"start"===t||"end"===t?0:void 0!==xK(t.toString())?1:void 0!==DK(t.toString())?2:void 0!==this.zOt(t.toString())?3:j(Number(t))?void 0:4}};function FK(t,e){let i;if(t.vastAdsRequest&&(i=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return MK(t.adsResponse);return}(t.vastAdsRequest)),!i){const e=function(t){const e=t.contentUrl||t.contentId;if(!e)return;const i=t.contentType||"video/mp4",s=yg(i)||Kn(t.contentType)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+ht.QOt(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+ht.QOt(t.whenSkippable)+'"':"",o='<MediaFile delivery="'+s+'" type="'+i+'">'+OK(e)+"</MediaFile>",h=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+OK(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+o+"</MediaFiles>"+h+"</Linear>",u=t.title?"<AdTitle>"+OK(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);e&&(i=MK(e))}const s=t.customData;if(i){const n={integration:null==s?void 0:s.integration,sources:{src:i,type:"vast"},timeOffset:e};return n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}!function(t){t[t.E1=0]="E1",t[t.ZOt=1]="ZOt",t[t.JOt=2]="JOt",t[t.$Ot=3]="$Ot",t[t.tMt=4]="tMt"}(LK||(LK={})),function(t){t.eMt="error",t.iMt="sourceupdate"}(Mh||(Mh={}));var UK=class extends Ci{constructor(t){super("error"),this.lt=t}},HK=class extends Ci{constructor(t,e){super("sourceupdate"),this.bt=t,this.QO=e}},WK=class extends d{get Yw(){return this.sMt}nMt(t){this.rMt.nMt(t)}oMt(t){this.rMt.oMt(t)}hMt(t){this.rMt.hMt(t)}aMt(t){this.rMt.aMt(t)}uMt(t){this.sMt.addUpdateListener(t)}cMt(t){this.sMt.removeUpdateListener(t)}lMt(){const t=new Os,e=new chrome.cast.media.GetStatusRequest;return this.sMt.getStatus(e,(()=>{t.lI({bt:this.Vl(),QO:this.Nd()})}),(e=>t.dI(e))),t.fI}Vl(){var t;return null==(t=this.sMt.customData)?void 0:t.currentSource}Nd(){var t;let e;if(null==(t=this.fMt.dMt())?void 0:t.version){var i;e=null==(i=this.sMt.customData)?void 0:i.sourceDescription}else{var s;const t=null==(s=AK(this.sMt))?void 0:s.customData;(function(t){return or(t)&&t.theoplayer_version>=1&&it(t.streamStart)&&it(t.isLive)&&it(t.sourceDescription)})(t)&&(e=t.sourceDescription),e||(e=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:qK(t)}}(this.sMt.media))}return e}Zd(){const t=new chrome.cast.media.PauseRequest;this.sMt.pause(t,$d,this._Mt)}$d(){const t=new chrome.cast.media.StopRequest;this.sMt.stop(t,$d,this._Mt)}Jd(){const t=new chrome.cast.media.PlayRequest;this.sMt.play(t,$d,this._Mt)}Fm(t,e){const i=new chrome.cast.media.SeekRequest;return i.currentTime=t,i.resumeState=e?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise(((t,e)=>{this.sMt.seek(i,t,(t=>{var i;e(new ie(Di(t.code),null!=(i=t.description)?i:void 0))}))}))}Ad(t){this.rMt.d3(Ti,function(t){return{type:bK.aOt,properties:{playbackRate:t}}}(t)).catch(this.vMt)}gMt(t){const e=new chrome.cast.media.EditTracksInfoRequest(t);this.sMt.editTracksInfo(e,$d,this._Mt)}mMt(){return this.sMt.getEstimatedTime()}wMt(){return this.sMt.getEstimatedBreakClipTime()}pMt(){return this.sMt.getEstimatedBreakTime()}yMt(){this.rMt.d3("urn:x-cast:com.google.cast.media",{type:TK.SKIP_AD,requestId:this.AMt++,mediaSessionId:this.sMt.mediaSessionId}).catch(this.vMt)}bn(){this.Lo()}constructor(t,e,i){super(e),this.AMt=0,this.vMt=t=>{this.To(new UK(t))},this._Mt=t=>{var e;const i=new ie(Di(t.code),null!=(e=t.description)?e:void 0);this.vMt(i)},this.fMt=t,this.rMt=e,this.sMt=i}};function qK(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?ls(t.breaks,(e=>function(t,e){const i=[];if(t.isWatched)return i;for(const s of t.breakClipIds){const n=Rt(e,(t=>t.id===s));if(n){const e=FK(n,t.position);e&&i.push(e)}}return i}(e,t.breakClips))):[]}var VK,zK=class{bMt(t,e){this.fMt.addMessageListener(t,e)}TMt(t,e){this.fMt.removeMessageListener(t,e)}d3(t,e){return new Promise(((i,s)=>{this.fMt.sendMessage(t,e,i,(t=>{var e;s(new ie(Di(t.code),null!=(e=t.description)?e:void 0))}))}))}bn(){}constructor(t){this.fMt=t}};function XK(t){if(t)return Ts(t)?{src:ai(t),type:void 0}:function(t){return or(t)&&Boolean(t.src)}(t)?{src:ai(t.src),type:GK(t.type)}:void 0}function GK(t){if(Ts(t)){const e=t.toLowerCase();switch(e){case"vast":case"vmap":case"adrule":return e;default:return void Fa("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||Fa("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}!function(t){t.oOt="receiver_info",t.SSt="event",t.SMt="propertychange",t.hOt="trackevent"}(VK||(VK={}));var QK,KK=class{EMt(t){let e;try{e=JSON.parse(t)}catch(t){0}return e}nMt(t){this.kMt.push(t)}oMt(t){so(this.kMt,t)}hMt(t){this.PMt.push(t)}aMt(t){so(this.PMt,t)}IMt(t){this.RMt=t}d3(t,e){return this.CMt.d3(t,e)}bn(){this.CMt.TMt(Ti,this.xMt),wr(this.PMt),wr(this.kMt),this.RMt=void 0}constructor(t){this.kMt=[],this.PMt=[],this.xMt=(t,e)=>{const i=this.EMt(e);if(i)if(i.type===VK.SMt)for(const t of this.kMt)for(const e of g.keys(i.properties))t(e,i.properties[e]);else if(i.type===VK.SSt)for(const t of this.PMt)t(i.event);else i.type===VK.hOt&&this.RMt&&i.event.trackState&&this.RMt(i.event.trackId,i.event.trackState.targetQualityIds)},this.CMt=t,this.CMt.bMt(Ti,this.xMt)}};!function(t){t.DMt="medialoadedchange",t.mv="volumechange",t.eMt="casterror",t.NMt="playererror",t.BMt="targetqualitychanged",t.OMt="receiverinfochanged"}(QK||(QK={}));var jK,YK=class extends Ci{constructor(){super("medialoadedchange")}},ZK=class extends Ci{constructor(t,e){super("volumechange"),this.Hd=t,this.ld=e}},JK=class extends Ci{constructor(t){super("casterror"),this.lt=t}},$K=class extends Ci{constructor(t){super("playererror"),this.lt=t}},tj=class extends Ci{constructor(t,e){super("targetqualitychanged"),this.tp=t,this.MMt=e}},ej=class extends Ci{constructor(){super("receiverinfochanged")}},ij=class extends d{LMt(t,e,i){this.rMt.d3(Ti,function(t,e,i){return{type:bK.hOt,trackID:t,trackType:e,properties:{targetQuality:i}}}(t,e,i)).catch(this.vMt)}FMt(){this.CMt.bMt(Ti,this.UMt),this.rMt.d3(Ti,{type:bK.oOt}).catch($d)}dMt(){return this.HMt}WMt(){return this.fMt.getSessionObj()}qMt(t){!this.VMt&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this.VMt=new WK(this,this.rMt,t),this.zMt(),this.To(new YK),this.VMt.uMt(this.XMt))}GMt(){return this.VMt}async QMt(t){const e=function(t){const e=function(t,e,i,s){const n=wE(t)||"",r=gE(t)||"",o=new chrome.cast.media.MediaInfo(n,r);return o.metadata=yK(t.metadata,t.poster),o.streamType=s,function(t,e,i){const s=[],n=[];let r,o=0,h=0;for(const t of e){const e=XK(t.sources);if(e)if(NK(e,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=e.src;else if(BK(e,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const l=null!=(u=ht.jOt(r,i))?u:0,d=void 0!==c?ht.jOt(c,i):void 0,f=new chrome.cast.media.BreakClip("bc"+h++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=e.src,f.whenSkippable=d,f.customData={integration:t.integration};let _=Rt(n,(t=>t.position===l));void 0===_&&(_=new chrome.cast.media.Break("b"+o++,[],l),n.push(_)),_.breakClipIds.push(f.id),s.push(f)}else 0;else 0}t.breakClips=s,t.breaks=n,t.vmapAdsRequest=r}(o,e,i),o}(t.KMt,t.Q4,t.ct,t.OX),i=new chrome.cast.media.LoadRequest(e);return i.autoplay=!0,i.currentTime=t.zl,i.customData=t.jMt,i}(t);let i;try{i=await this.fMt.loadMedia(e)}catch(t){i=t}if(i)throw new ie(Di(i))}fd(t){this.WMt().setReceiverMuted(t,$d,this.YMt)}qd(t){this.WMt().setReceiverVolumeLevel(t,$d,this.YMt)}ZMt(){return this.WMt().receiver.friendlyName}bn(){this.Lo(),this.fMt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.JMt),this.WMt().removeUpdateListener(this.zMt),this.CMt.TMt(Ti,this.UMt),this.rMt.bn(),this.CMt.bn()}constructor(t){super(),this.HMt=void 0,this.vMt=t=>{this.To(new JK(t))},this.$Mt=(t,e)=>{"error"===t&&this.To(new $K(e))},this.tLt=(t,e)=>{this.To(new tj(t,e))},this.UMt=(t,e)=>{const i=JSON.parse(e);i.type===VK.oOt&&(this.HMt=i.info,this.To(new ej))},this.zMt=()=>{const t=this.WMt(),{level:e,muted:i}=t.receiver.volume;this.To(new ZK(null!=e?e:void 0,null!=i?i:void 0))},this.JMt=()=>this.qMt(this.fMt.getMediaSession()),this.XMt=t=>{var e;t||(null==(e=this.VMt)||e.cMt(this.XMt),this.VMt=void 0,this.To(new YK))},this.YMt=t=>{var e;const i=new ie(Di(t.code),null!=(e=t.description)?e:void 0);this.vMt(i)},this.fMt=t,this.fMt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.JMt),this.CMt=new zK(t.getSessionObj()),this.rMt=new KK(this.CMt),this.rMt.nMt(this.$Mt),this.rMt.IMt(this.tLt),this.WMt().addUpdateListener(this.zMt),this.zMt(),this.FMt();const e=this.fMt.getMediaSession();e&&this.qMt(e)}};(jK||(jK={})).eLt="statechange";var Qo,sj=class extends Ci{constructor(t){super("statechange"),this.zot=t}},nj=class extends d{K4(){return this.I6}Ul(){return ri.BM()}Xl(){return this.OM+this.iLt}M4(){return this.Xl()}Wl(){}Ql(){return this.aR}Yl(){return this.Zj}Zl(){}wd(){return this.FM}sLt(){}yd(){return this.UM}Ad(t){this.UM!==t&&(this.UM=t,this.To(new Cs(this.Ko.zl,t)))}Id(){return Yv.AA}Td(){return ri.BM()}Cd(){return ri.BM()}Dd(){return!1}Ol(){return this.EA}Ld(){return this.PA}Bd(){return this.xu}gMt(t){}Ud(){return this.nLt}Md(){return this.rLt}Jd(){this.FM=!1}Zd(){this.FM=!0}Fm(t){this.OM=t-this.iLt}oLt(){return this.iLt}hLt(t){this.iLt=t}R6(t){this.I6.R6(t)}$d(){}bn(){this.Lo(),this.EA.bn(),this.PA.bn(),this.xu.bn(),this.I6.bn()}constructor(t,e,i,s,n,r,o,h,a){super(),this.Ko=t,this.iLt=0,this.EA=new Qh,this.PA=new Qh,this.xu=new ih,this.I6=new gr,this.iLt=e,this.OM=i-e,this.aR=s,this.Zj=n,this.FM=r,this.UM=o,this.nLt=h,this.rLt=a}};!function(t){t.aLt="ccmodechangerequest",t.uLt="cctargetqualitychangerequest",t.cLt="cctrackchangerequest"}(Qo||(Qo={}));var rj,oj,hj=class extends Ci{constructor(t,e,i){super(Qo.aLt),this.track=t,this.trackId=e,this.mode=i}};function aj(t){return"AUDIO"===t.type}function uj(t){return"VIDEO"===t.type}function cj(t){return"TEXT"===t.type}!function(t){t.gA="TEXT",t.Cm="AUDIO",t.Rm="VIDEO"}(rj||(rj={})),function(t){t.xm="SUBTITLES",t.HS="CAPTIONS",t.WS="DESCRIPTIONS",t.$n="CHAPTERS",t.Nm="METADATA"}(oj||(oj={}));var lj=class extends d{get ma(){return this.vf||(this.vf=bi(this)),this.vf}get jh(){return this.QA}set jh(t){t!==this.QA&&(this.QA=t,this.To(new cr(this)))}get W(){return this._Y}get L(){return this.vY}get h_(){return this.hL}set h_(t){const e=G(t);this.hL!==e&&(this.hL=e,this.lLt!==e&&this.To(new hj(this,this.Yf,e)),this.To(new Ys(this)))}get dLt(){return this.lLt}set dLt(t){const e=G(t),i=this.hL!==e;this.hL=e,this.lLt=e,i&&this.To(new Ys(this))}u_(t){this.h_=t}fLt(t){}bn(){}ir(){}constructor(t){super(),this.vf=void 0;const e=t.customData;this.Yf=Number(t.trackId)||0,this.o=""+(e&&e.id||this.Yf),this.QA=e&&e.label||t.name||"",this.gs=e&&e.language||t.language||"",this.o_=e&&e.inBandMetadataTrackDispatchType||"",this.Lt=e&&e.kind||function(t){switch(t){case oj.xm:return K.xm;case oj.HS:return K.HS;case oj.WS:return K.WS;case oj.$n:return K.$n;case oj.Nm:return K.Nm}return}(t.subtype)||"subtitles",this.Pd=Gh.NONE,this.l_=e&&void 0!==e.type?function(t){return co(t)?t:nt.DEFAULT}(e.type):nt.WEBVTT,this.fY=[],this.vY=new Et(this.fY),this.bY=[],this._Y=new Et(this.bY),this.hL=G(e&&e.mode||_s.Th),this.lLt=this.hL}};var dj,fj=class extends Ci{constructor(t,e){super(Qo.cLt),this.trackId=t,this.enabled=e}},_j=class extends Ci{constructor(t,e){super(Qo.uLt),this.track=t,this.targetQuality=e}};!function(t){t.Cm="audio",t.Rm="video",t.gA="text"}(dj||(dj={}));var vj,gj,mj=class extends d{get jf(){return this.Yrt}get $f(){return this.jrt}set $f(t){this._Lt(t),this.To(new _j(this,t))}get Jf(){return this.UA}get jh(){return this.QA}set jh(t){t!==this.QA&&(this.QA=t,this.To(new cr(this)))}get Ot(){return this.We}set Ot(t){this.We!==t&&(this.We=t,this.vLt!==t&&this.To(new fj(this.Yf,t)),this.To(new Ys(this)))}get gLt(){return this.vLt}set gLt(t){const e=this.We!==t;this.We=t,this.vLt=t,e&&this.To(new Ys(this))}get ma(){return this.vf||(this.vf=ni(this)),this.vf}get h_(){return this.Ot?"enabled":"disabled"}jA(t){this.Ot=t}fLt(t){if(t.targetQualityIds){const e=[];for(let i=0;i<this.UA.V;i++){const s=this.UA.Hf(i);t.targetQualityIds.indexOf(s.o)>-1&&e.push(s)}const i=e.length?e:void 0;this._Lt(i)}}_Lt(t){(function(t,e){return!t&&e||t&&!e||t&&e&&!Dr(t,e)})(this.jrt,t)&&(this.jrt=t&&this.UA.qA(t)?t:void 0,this.To(new uU(this.jrt,this)))}unload(){for(const t of this.UA.Ff)t.pn("update",this.ybt);this.UA.ir()}constructor(t){super(),this.Yrt=void 0,this.UA=new yh,this.jrt=void 0,this.vf=void 0,this.ybt=()=>this.To(new cr(this));const e=t.customData;if(this.Yf=Number(t.trackId)||0,this.o=""+(e&&e.id||this.Yf),this.QA=e&&e.label||t.name||"",this.gs=e&&e.language||t.language||"",this.Lt=e&&e.kind||"main",this.We=e&&e.enabled,this.vLt=this.We,aj(t)){this.RK=dj.Cm;const e=t.customData&&t.customData.qualities;if(e)for(const t of e){const e=new UW(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);e.kn("update",this.ybt),this.UA.HA(e)}}else{this.RK=dj.Rm;const e=t.customData&&t.customData.qualities;if(e)for(const t of e){const e=new O(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);e.kn("update",this.ybt),this.UA.HA(e)}}}};!function(t){t.mLt="legacy",t.wLt="caf"}(vj||(vj={})),function(t){t.pLt="theo",t.yLt="google-ima",t.no="google-dai",t.ALt="freewheel",t.bLt="mediatailor",t.ek="chromecast"}(gj||(gj={}));var wj,pj=class{d6(){var t;return null!=(t=this.vf)?t:this.vf=function(t){return{get ads(){return t.Q4.map((t=>t.d6()))},get integration(){return t.TLt},get maxDuration(){return t.SLt},get maxRemainingDuration(){return t.ELt},get timeOffset(){return t.NSt}}}(this)}constructor(){this.vf=void 0}},yj=class extends Vt{pa(){return new Aj(this.A6.d6())}constructor(t){super("kLt",t)}},Aj=class extends Du{constructor(t){super("updatead",t)}},bj=class extends Vt{pa(){return new Tj(this.A6.d6())}constructor(t){super("PLt",t)}},Tj=class extends Du{constructor(t){super("adloaded",t)}},Sj=class extends Ro{get c6(){return void 0!==this.ILt}get l6(){return this.RLt?[this.RLt]:[]}get f6(){var t;return null!=(t=this.ILt)?t:null}get _6(){return ls(this.CLt,(t=>{const e=t.Q4;if(t===this.ILt&&void 0!==this.RLt){const t=e.indexOf(this.RLt);if(t>=0)return e.slice(t+1)}return t.xLt()?[]:e}))}get v6(){return this.CLt.filter((t=>t===this.ILt||!t.xLt()))}get ma(){var t;return null!=(t=this.vf)?t:this.vf=La(this)}PZ(t,e,i){throw new p("Scheduling ads while casting is not supported.")}nw(){this.sMt.yMt()}C6(t){}DLt(t){return Rt(this.CLt,(e=>e.o===t))}NLt(t,e,i,s){const n=this.CLt,r=[];let o=!1;for(const n of t){let t=this.DLt(n.id);void 0===t&&(t=new Ej(n),s.push(new sN(t))),!it(t.BLt)&&it(i)&&(t.BLt=this.OLt(t.MLt,i));const h=t.Q4;t.Kn(n,e,i,s);const a=t.Q4;for(const t of a)Yi(h,t)||(s.push(new rN(t)),o=!0);r.push(t)}this.CLt=r,o&&s.push(new Xa);for(const t of n)Yi(r,t)||s.push(new za(t))}LLt(t,e){const i=this.ILt,s=this.RLt;let n,r;if(t){var o;const{breakId:e,breakClipId:i}=t;n=e?this.DLt(e):void 0,r=i?null==(o=this.ILt)?void 0:o.FLt(i):void 0}if(this.ILt=n,this.RLt=r,n!==i&&(void 0!==i&&(i.ULt=void 0,e.push(new qa(i))),void 0!==n&&(n.ULt=this.sMt,e.push(new aN(n)))),r!==s){const t=this.Ko.Xl();void 0!==s&&e.push(new tu(s,t)),void 0!==r&&e.push(new su(r,t))}}OLt(t,e){if(!e||!e.breaks)return;const i=Rt(e.breaks,(e=>e.id===t.id));return i}R6(t){const e=[];for(const t of this.CLt){let i=t.Q4;if(t===this.ILt&&void 0!==this.RLt){const t=i.indexOf(this.RLt);t>=0&&(i=i.slice(t))}else if(t.xLt())continue;for(const t of i){const i=t.HLt();i&&e.push(i)}}for(const i of e)t.PZ(i,Ra.g6,!1)}bn(){return this.Lo(),this.sMt.cMt(this.Zr),void 0!==this.ILt&&(this.ILt.ULt=void 0,this.ILt=void 0),this.RLt=void 0,wr(this.CLt),Promise.resolve(void 0)}constructor(t,e){super(),this.CLt=[],this.ILt=void 0,this.RLt=void 0,this.vf=void 0,this.Zr=t=>{var e;if(!t)return;const i=this.sMt.Yw,{breakStatus:s}=i,{breakClips:n,breaks:r}=i.media,o=null==(e=AK(i))?void 0:e.media,h=[];r&&n&&this.NLt(r,n,o,h),this.LLt(s,h);for(const t of h)this.To(t)},this.Ko=t,this.sMt=e,this.sMt.uMt(this.Zr)}},Ej=class extends pj{get MLt(){return this.WLt}get o(){return this.WLt.id}get Q4(){return this.I6}get TLt(){return gj.ek}get SLt(){let t=this.WLt.duration;return void 0===t&&this.I6.length>0&&(t=Od(this.I6,(t=>t.ct)),j(t)&&(t=void 0)),t}get ELt(){const t=this.SLt;if(void 0!==t&&void 0!==this.ULt){const e=this.ULt.pMt();if(void 0!==e)return b.max(0,t-e)}return t}get NSt(){return this.WLt.position}xLt(){return this.WLt.isWatched}FLt(t){return Rt(this.I6,(e=>e.o===t))}Kn(t,e,i,s){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const o=t.breakClipIds[r],h=Rt(e,(t=>t.id===o));if(void 0===h)continue;const a=r<this.I6.length?this.I6[r]:new kj(h,this);!it(a.qLt)&&it(i)&&(a.qLt=this.VLt(i,o,r)),a.Kn(h,s),n.push(a)}this.WLt=t,this.I6=n}VLt(t,e,i){if(!t||!t.breakClips)return;let s=Rt(t.breakClips,(t=>t.id===e));if(!s){var n;const e=null==(n=this.BLt)?void 0:n.breakClipIds[i];e&&(s=Rt(t.breakClips,(t=>t.id===e)))}return s}constructor(t){super(),this.BLt=void 0,this.I6=[],this.ULt=void 0,this.WLt=t}},kj=class{get zLt(){return this.XLt}get o(){return this.XLt.id}get GLt(){return[]}get ct(){var t;return null!=(t=this.XLt.duration)?t:NaN}get QLt(){const t=this.KLt();return t?[{contentURL:t,delivery:"progressive",type:this.jLt(),width:0,height:0}]:[]}get YLt(){const{whenSkippable:t}=this.XLt;return void 0===t?void 0:t<0?-1:t}get ZLt(){return this.XLt.clickThroughUrl}get JLt(){}get $Lt(){return[]}tFt(){return""}jLt(){var t;return null!=(t=this.XLt.contentType)?t:""}KLt(){var t,e;return null!=(e=null!=(t=this.XLt.contentUrl)?t:this.XLt.contentId)?e:""}Kn(t,e){const i=this.o,s=this.ct,n=this.XLt.contentUrl;this.XLt=t;const r=this.o,o=this.ct,h=this.XLt.contentUrl;i===r&&(s===o||j(s)&&j(o))&&n===h||e.push(new yj(this)),j(s)&&!j(o)&&e.push(new bj(this))}HLt(){let t;return this.qLt&&(t=FK(this.qLt,this.w6.NSt)),t||(t=FK(this.XLt,this.w6.NSt)),t}d6(){var t;return null!=(t=this.vf)?t:this.vf=this.pa()}pa(){const t=this;return{get companions(){return t.GLt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.QLt},get skipOffset(){return t.YLt},type:"linear",integration:gj.ek,get adSystem(){return t.tFt()},width:void 0,height:void 0,get adBreak(){return t.w6.d6()},get clickThrough(){return t.ZLt},get creativeId(){return t.JLt},get universalAdIds(){return t.$Lt.map((t=>({adIdRegistry:t.eFt,adIdValue:t.iFt})))}}}constructor(t,e){this.vf=void 0,this.XLt=t,this.w6=e}},Pj=class extends d{get sFt(){return this.nFt}set sFt(t){this.nFt!==t&&(this.nFt=t,this.Hs.href=null!=t?t:"",t?this.rE():this.oE())}rE(){if(this.We)return;this.We=!0,this.Hs.style.display="",this.rFt||(this.A8.style.cursor="pointer");const t=this.rFt?this.Hs:this.A8;f.Zs.Ye?(t.addEventListener("touchstart",this.oFt),t.addEventListener("touchend",this.hFt)):(t.addEventListener("mousedown",this.oFt),t.addEventListener("click",this.hFt))}oE(){if(!this.We)return;this.We=!1,this.Hs.style.display="none",this.rFt||(this.A8.style.cursor="");const t=this.rFt?this.Hs:this.A8;f.Zs.Ye?(t.removeEventListener("touchstart",this.oFt),t.removeEventListener("touchend",this.hFt)):(t.removeEventListener("mousedown",this.oFt),t.removeEventListener("click",this.hFt))}hl(){this.Lo(),this.oE(),this.A8.removeChild(this.Hs)}constructor(t,e=f.Zs.Ye){super(),this.We=!1,this.oFt=t=>{t.stopPropagation(),this.To(new Ci("clickstart"))},this.hFt=t=>{t.stopPropagation(),this.To(new Ci("click"))},this.A8=t,this.rFt=e,this.Hs=h.createElement("a"),this.Hs.style.position="absolute",this.Hs.style.zIndex="11",this.Hs.target="aFt",this.rFt?(Bx(this.Hs,"learn more"),this.Hs.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Hs.setAttribute("rel","noopener")):Ca(this.Hs),this.A8.appendChild(this.Hs),this.oE()}};!function(t){t.uFt="theo-size-xs",t.cFt="theo-size-s",t.lFt="theo-size-m",t.dFt="theo-size-l",t.fFt="theo-size-xl"}(wj||(wj={}));var Ij=[1200,992,768,576],Rj={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},Cj=class{_Ft(t){let e=xj(t);e!==this.vFt&&(Nb(this.Hs,e),Bb(this.Hs,this.vFt),this.vFt=e)}bn(){this.BJ.pn(wu.gn,this.yn)}constructor(t,e){this.Hs=t,this.BJ=e,this.yn=t=>{this._Ft(t.width)},this.vFt=xj(e.tH),Nb(this.Hs,this.vFt),e.kn(wu.gn,this.yn)}};function xj(t){for(let e of Ij)if(t>e)return Rj[e];return"theo-size-xs"}var Dj=class extends d{get Se(){return this.Hs}get h_(){return this.hL}get VE(){return this.gFt.textContent||""}set VE(t){Bx(this.gFt,t)}mFt(t){"countdown"!==this.hL&&(this.hL="countdown",this.wFt(),this.Se.classList.remove("theoplayer-ad-skip-button"),this.Se.classList.add("theoplayer-ad-skip-countdown")),this.VE="You can skip in "+b.round(t)+" seconds"}pFt(){"skip"!==this.hL&&(this.hL="skip",this.VE="Skip Ad",this.yFt(),this.Se.classList.remove("theoplayer-ad-skip-countdown"),this.Se.classList.add("theoplayer-ad-skip-button"))}yFt(){this.Se.addEventListener("mouseup",this.AFt),this.Se.addEventListener("touchend",this.AFt)}wFt(){this.Se.removeEventListener("mouseup",this.AFt),this.Se.removeEventListener("touchend",this.AFt)}bn(){this.Lo(),this.wFt(),this.bFt.bn(),z(this.Hs),z(this.gFt),this.TFt&&z(this.TFt)}constructor(t,e){super(),this.AFt=()=>{this.To(new Ci("nw"))},this.Hs=h.createElement("div"),this.Se.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.Se.style.position="absolute",this.gFt=h.createElement("span"),this.Se.appendChild(this.gFt),e&&(this.TFt=h.createElement("div"),this.TFt.className="theoplayer-ad-skip-poster",this.TFt.style.backgroundImage='url("'+t_(e)+'")',this.Se.appendChild(this.TFt)),this.hL="countdown",this.bFt=new Cj(this.Se,t)}},Nj=class extends d{SFt(){const t=this.sMt.Yw.activeTrackIds;if(t){if(this.EFt()){const e=this.PA.Ff.map((t=>t.o)),i=this.EA.Ff.map((t=>t.o));Yi(e.concat(i),"0")&&t.push(0)}Fj(t,this.EA),Fj(t,this.PA),function(t,e){const i=!1;for(const i of e.Ff)i.dLt=Yi(t,i.Yf)?_s.Jn:_s.Th}(t,this.xu)}}kFt(){var t;const e=null==(t=this.sMt.Yw.media)?void 0:t.tracks;if(!e)return;const i=e.filter(aj),s=e.filter(uj),n=e.filter(cj);if(this.EFt()&&0===s.length&&0!==this.Ud()){const t=this.PFt();s.push(t)}if(this.EFt()&&0===i.length){const t=this.IFt();i.push(t)}Mj(this.EA,i.map((t=>t.trackId))),Mj(this.PA,s.map((t=>t.trackId))),Mj(this.xu,n.map((t=>t.trackId))),Lj(i,this.EA),Lj(s,this.PA),function(t,e){let i=!1;for(const s of t){let t=Oj(e,s.trackId);t||(t=new lj(s),e.tt(t),i=!0)}}(n,this.xu)}RFt(){this.FM||(this.CFt=Hu(this.oit,250))}xFt(){Wu(this.CFt)}DFt(){this.xFt(),this.RFt()}NFt(){var t;const e=this.sMt.Yw,i=e.media;var s;const n=null!=(s=null==i?void 0:i.duration)?s:NaN,r=(null==i?void 0:i.streamType)===chrome.cast.media.StreamType.LIVE||n<0,o=r?1/0:n;this.aR=o,this.BFt();const h=e.getEstimatedLiveSeekableRange(),a=null==(t=e.customData)?void 0:t.buffers;if(it(h)){const{start:t,end:e,isMovingWindow:i=r,isLiveDone:s=!1}=h;this.ykt(t,e,i,s)}else if(it(a)){const[t,e]=a.seekable;this.ykt(t,e,r,!1)}else r?this.ykt(void 0,void 0,!0,!1):this.ykt(0,o,!1,!1)}OFt(){const t=this.sMt.Yw,e=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||Bj(t);this.MFt=e,this.FM!==e&&(this.FM=e,this.FM?this.To(new Cn(this.Xl())):this.To(new gs(this.Xl())))}sh(){const{playbackRate:t}=this.sMt.Yw;this.LFt!==t&&(this.LFt=void 0,this.UM!==t&&(this.UM=t,this.To(new Cs(this.Xl(),t))))}FFt(){const{playerState:t}=this.sMt.Yw;let e;switch(t){case chrome.cast.media.PlayerState.IDLE:e=Yv.AA;break;case chrome.cast.media.PlayerState.BUFFERING:e=Yv.Qn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:e=Yv.TA}this.tY(e),this.UFt()}ykt(t,e,i,s){it(t)&&it(e)?this.Bj=new la(t,e,i,i&&!s):this.Bj=void 0}HFt(t,e){this.rLt=null!=e?e:this.rLt,this.nLt=null!=t?t:this.nLt,this.To(new Sn)}Xe(t){this.WFt!==t?(this.MM=!0,this.To(new Uh(this.Xl()))):this.WFt=void 0}gO(){if(!this.MM)return;this.MM=!1;const t=this.Xl();this.To(new oh(t,this.Wl())),this.To(new ja(t))}Mh(){this.Zj=!0,this.Yl()&&this.To(new X(this.Xl()))}BFt(){const t=this.lyt,e=this.Ql();t===e||j(t)&&j(e)||(this.lyt=e,this.To(new Pt(e)))}qFt(){const t=this.Xl();this.MM||this.VFt===t||(this.VFt=t,this.To(new oh(t,this.Wl())))}sLt(){this.FM&&(this.FM=!1,this.To(new gs(this.Xl())),this.tY(Yv.AA))}K4(){return this.I6}Ul(){return this.Iyt.Mm(this.iLt)}Xl(){if(this.I6.c6){const t=this.sMt.wMt();if(void 0!==t)return t}return this.M4()}M4(){return void 0!==this.zFt?this.iLt+this.zFt:this.Zj?this.Ql():this.iLt+this.sMt.mMt()}Wl(){if(this.XFt)return new Date(this.M4()+this.XFt)}Ql(){if(this.I6.c6){var t;const e=null==(t=this.I6.l6[0])?void 0:t.ct;if(void 0!==e&&!j(e))return e}return this.iLt+this.aR}Zl(){return this.WB}Yl(){return!this.I6.c6&&this.Zj}wd(){return this.FM}yd(){return this.UM}Ad(t){this.UM!==t&&(this.LFt=this.UM,this.UM=t,this.To(new Cs(this.Xl(),t)),this.sMt.Ad(t))}Id(){return this.Jj}Td(){return this.I6.c6?ri.NM(0,this.Xl()):this.Ho.Mm(this.iLt)}Cd(){var t,e;if(this.I6.c6)return ri.BM();let i=null!=(e=null==(t=this.Bj)?void 0:t.WK().Mm(this.iLt))?e:ri.BM();if(i.V>0){const t=i.An(i.V-1);i=i.gM(ri.NM(t,this.Xl()))}return i}Dd(){return this.MM}Ol(){return this.EA}Ld(){return this.PA}Bd(){return this.xu}PFt(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.Md(),id:"0",name:"",width:this.Ud()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:rj.Rm}}IFt(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:rj.Cm}}EFt(){var t,e;return!(void 0!==(null==(t=this.fMt.dMt())?void 0:t.version))||(null==(e=this.fMt.dMt())?void 0:e.sdkType)===vj.wLt}gMt(t){this.EFt()&&so(t,0),this.sMt.gMt(t)}Ud(){return this.nLt}Md(){return this.rLt}Jd(){this.FM&&(this.FM=!1,this.MFt=!1,this.To(new gs(this.Xl()))),this.sMt.Jd()}Zd(){this.FM||(this.FM=!0,this.MFt=!0,this.To(new Cn(this.Xl()))),this.sMt.Zd()}Fm(t){if(this.I6.c6)return;let e=b.max(0,t-this.iLt);e=b.round(1e6*e)/1e6;const i=this.zFt;this.zFt=e,this.MFt=this.wd(),this.WFt=e,this.MM=!0,this.To(new Uh(this.Xl())),void 0===i&&this.u$(e)}u$(t){this.sMt.Fm(t,this.MFt).then(this.GFt(t)).catch(this.vMt)}GFt(t){return()=>{void 0!==this.zFt&&(this.zFt===t?this.zFt=void 0:this.u$(this.zFt))}}tY(t){this.Jj!==t&&(this.Jj=t,this.To(new Io(this.Xl(),t))),void 0===this.zFt&&this.MM&&t>=Yv.bA&&this.gO(),this.UFt()}UFt(){if(this.FM)return void(this.QFt=!1);const t=this.Jj>=Yv.TA;this.QFt!==t&&(this.QFt=t,t?this.To(new Tt(this.Xl())):this.To(new ra(this.Xl())))}KFt(){this.jFt||(this.jFt=h.createElement("div"),this.Ko.Se.appendChild(this.jFt),this.jFt.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.jFt.style.zIndex="10",Ca(this.jFt)),this.jFt.style.display=this.I6.c6?"":"none"}YFt(){var t;const e=null==(t=this.I6.l6[0])?void 0:t.ZLt;e&&!this.ZFt?(this.ZFt=new Pj(this.jFt,!0),this.ZFt.sFt=e,this.ZFt.kn("clickstart",this.JFt)):this.ZFt&&(this.ZFt.sFt=e)}$Ft(){var t;const e=null==(t=this.I6.l6[0])?void 0:t.YLt;if(void 0===e||e<0)return void(this.tUt&&(this.tUt.bn(),this.tUt=void 0));if(!this.tUt){var i;const t=null==(i=this.Ko.wa)?void 0:i.mi;this.tUt=new Dj(this.Ko.NJ,t),this.jFt.appendChild(this.tUt.Se),this.tUt.kn("nw",this.eUt)}const s=this.sMt.wMt();void 0!==s&&(s<e?this.tUt.mFt(e-s):this.tUt.pFt())}oLt(){return this.iLt}hLt(t){this.iLt=t}R6(t){}$d(){this.sMt.$d()}bn(){this.Lo(),this.I6.bn(),this.ZFt&&(this.ZFt.hl(),this.ZFt=void 0),this.tUt&&(this.tUt.bn(),this.tUt=void 0),this.jFt&&(z(this.jFt),this.jFt=void 0),this.sMt.aMt(this.YK),this.sMt.oMt(this.iUt),this.sMt.cMt(this.XMt),this.sMt.pn(Mh.eMt,this.sUt),this.sMt.bn()}constructor(t,e,i,s){super(),this.Iyt=ri.BM(),this.XFt=void 0,this.Zj=!1,this.WB=void 0,this.LFt=void 0,this.Jj=Yv.AA,this.QFt=!1,this.Ho=ri.BM(),this.Bj=void 0,this.MM=!1,this.EA=new Qh,this.PA=new Qh,this.xu=new ih,this.lyt=NaN,this.zFt=void 0,this.MFt=!1,this.VFt=NaN,this.WFt=void 0,this.CFt=0,this.iUt=(t,e)=>{switch(t){case"buffered":this.Iyt=new ri(e),this.To(new gt(this.Xl()));break;case"currentProgramDateTime":this.XFt=new Date(e).getTime()-this.Xl();break;case"played":this.Ho=new ri(e);break;case"seekable":this.NFt();break;case"videoHeight":this.HFt(void 0,e);break;case"videoWidth":this.HFt(e,void 0)}},this.YK=t=>{switch(t.type){case r.rv:this.Xe(t.currentTime);break;case r.ev:this.gO();break;case r.J_:this.To(new _(t.representation,t.previousRepresentation));break;case r.ov:this.To(new JF(t.segmentStartTime,t.error,t.trackType,t.track,t.quality,t.retryCount));break;case r.O_:this.To(new eV(t.currentTime,t.initDataType,t.initData));break;case r.R_:this.To(new MC(new _r(Ot.CONTENT_PROTECTION_ERROR,t.error,void 0,t.licenseAcquisitionURL,t.status,t.statusText,t.licenseAcquisitionMessage,t.systemCode)));break;case r.C_:this.To(new He)}},this.XMt=t=>{this.NFt(),this.OFt(),this.sh(),this.FFt(),this.qFt(),this.DFt(),this.kFt(),this.SFt(),this.KFt(),this.YFt(),this.$Ft(),t||Bj(this.sMt.Yw)&&this.Mh()},this.oit=()=>{this.qFt(),this.$Ft()},this.sUt=t=>{this.To(t)},this.vMt=t=>{this.zFt=void 0,this.To(new UK(t))},this.JFt=()=>{this.Zd()},this.eUt=()=>{this.I6.nw()},this.Ko=t,this.fMt=e,this.sMt=i,this.I6=new Sj(t,i),this.iLt=s.oLt(),this.aR=s.Ql()-this.iLt,this.FM=s.wd(),this.UM=s.yd(),this.nLt=s.Ud(),this.rLt=s.Md(),this.sMt.hMt(this.YK),this.sMt.nMt(this.iUt),this.sMt.uMt(this.XMt),this.sMt.kn(Mh.eMt,this.sUt),this.sMt.lMt().then((t=>{this.To(new HK(t.bt,t.QO))}),this.vMt)}};function Bj(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function Oj(t,e){for(const i of t.Ff)if(i.Yf===e)return i}function Mj(t,e){let i=!1;for(let s=0;s<t.V;s++){const n=t.Hf(s);-1===e.indexOf(n.Yf)&&(t.it(n),s--,i=!0)}return i}function Lj(t,e){let i=!1;for(const s of t){let t=Oj(e,s.trackId);t||(t=new mj(s),e.tt(t),i=!0)}return i}function Fj(t,e){for(const i of e.Ff)i.gLt=Yi(t,i.Yf);return!1}var Uj=class{V6(t){return Promise.resolve("all")}Yd(){}bn(){}};function Hj(t,e,i){if(j(t))return i;if(t===1/0){if("live"===i||"dvr"===i)return i;if(e&&e.length>0){if(e.end(e.length-1)-e.start(0)>60)return"dvr"}return"live"}return"vod"}var Wj=[r.M_,r.N_,r.Z_,r.tv,r.Ch,r.Ah,r.Y_,r.vv,r.rv,r.ev,En.Ev,En.Pv,r.J_,r.ov,r.O_,r.R_,r.C_],qj=class extends Th{sM(t){if(!t)return;qi(this.jO&&yf(this.jO),t&&yf(t))||(this.jO=t,this.To(new Hg(t)))}nUt(t){if(!t)return;const e=Se(t,this.Ko.Vp);qi(this._wt&&yf(this._wt),e&&yf(e))||(this.Aa.hLt(0),this._wt=e,this.To(new Ba(e)),this.Aa.sLt())}rUt(t){for(const e of this.rt.Ff)if(e.Yf===t)return e;for(const e of this.ht.Ff)if(e.Yf===t)return e}get zot(){return this.Aa}set zot(t){const e=this.Aa;e&&(e.pn(Mh.eMt,this.sUt),e.pn(Mh.iMt,this.oUt),e.pn(Wj,this.Rs),e.pn(En.Rf,this.TD),t.hLt(e.oLt()),e.R6(t.K4())),this.Aa=t,this.EA.qf=t.Ol(),this.PA.qf=t.Ld(),this.xu.qf=t.Bd(),this.I6.qf=t.K4(),e&&e.bn(),t.kn(Mh.eMt,this.sUt),t.kn(Mh.iMt,this.oUt),t.kn(Wj,this.Rs),t.kn(En.Rf,this.TD)}get oo(){return this.ao}get Q4(){return this.K4()}K4(){return this.I6}j4(){return this.I4}Ol(){return this.EA}Ul(){return this.Aa.Ul().ks()}get hUt(){return this.aUt||this._wt}set hUt(t){this.aUt=t}async Rn(t,e){var i;t&&await this.QMt(t,null!=(i=t.ads)?i:[],t.streamType,NaN,0,null!=e?e:0)}async uUt(t){var e;const i=null!=(e=this.aUt)?e:this._wt;if(!i)return;var s;const n=this.aUt?null!=(s=this.aUt.ads)?s:[]:this.O6(),r=this.Ko.Ql(),o=this.Ko.Cd(),h=Hj(r,o,i.streamType),a=o.length>0?o.start(0):0,u=null!=t?t:this.M4();await this.QMt(i,n,h,r,a,u)}O6(){const t=new gr;return this.I6.R6(t),t.O6()}Wl(){return this.Aa.Wl()}Vl(){return this.jO}get zl(){return this.Xl()}set zl(t){this.Gl(t)}Xl(){return this.Aa.Xl()}M4(){return this.Aa.M4()}Gl(t){this.cUt||(this.fMt.GMt()||this.cUt||!this._wt?this.Aa.Fm(t):this.Rn(this._wt,t))}Ql(){return this.Aa.Ql()}Yl(){return this.Aa.Yl()}Zl(){return this.WB}$l(){return this.qB}ed(){return this.kA}ud(){return this.Ko.hd}dd(){return this.LM}fd(t){this.LM=t,this.To(new Ao(this.zl,this.Hd)),this.fMt.fd(t)}wd(){return this.Aa.wd()}yd(){return this.Aa.yd()}Ad(t){this.Aa.Ad(t)}Td(){return this.Aa.Td().ks()}Ed(){return Fi.fA}kd(t){}Id(){return this.Aa.Id()}Cd(){return this.Aa.Cd().ks()}Dd(){return this.Aa.Dd()}Nd(){return this._wt}async ba(t){this._wt=t,await this.Rn(t),this.aUt=void 0,this.Aa.sLt()}Bd(){return this.xu}Md(){return this.Aa.Md()}Ud(){return this.Aa.Ud()}Ld(){return this.PA}Wd(){return this.AR}qd(t){this.AR=t,this.To(new Ao(this.zl,this.Hd)),this.fMt.qd(t)}get Xd(){return!1}set Xd(t){}Qd(){}Gd(){return this.HM}Yd(){}Jd(){this.fMt.GMt()||this.cUt||!this._wt?this.Aa.Jd():this.Rn(this._wt)}Zd(){this.Aa.Zd()}Kd(){this.ao=!0}jd(){this.jO=void 0,this.ao=!1}be(){}we(){}async QMt(t,e,i,s,n,r){this.cUt=!0,this.lUt(),this.Aa.hLt(n);const o="live"===i||"dvr"===i,h=function(t,e,i){return{theoplayer_version:1,streamStart:t,isLive:e,sourceDescription:i}}(n,o,t),a={KMt:t,Q4:e,zl:b.max(0,r-n),ct:s,OX:o?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,jMt:h};try{await this.fMt.QMt(a)}catch(t){this.dUt(t)}finally{this.cUt=!1}}fUt(){this._Ut(this.EA),this._Ut(this.PA),this.vUt(this.xu)}_Ut(t){for(const e of t.Ff)this.gUt(e);t.kn(Qs.cf,(t=>{this.gUt(t.Ht),this.mUt()}))}vUt(t){for(const e of t.Ff)this.wUt(e);t.kn(Qs.cf,(t=>{this.wUt(t.Ht),this.mUt()}))}gUt(t){t.kn(Qo.uLt,this.Plt),t.kn(Qo.cLt,this.pUt),t.kn(Qo.cLt,this.SFt)}wUt(t){t.kn(Qo.aLt,this.yUt),t.kn(Qo.aLt,this.SFt)}AUt(){const t=[];for(const e of this.rt.Ff)e.Ot&&t.push(e.Yf);for(const e of this.ht.Ff)e.Ot&&t.push(e.Yf);for(const e of this.nt.Ff)e.h_===_s.Jn&&t.push(e.Yf);this.Aa.gMt(t)}bUt(t,e){this.TUt=t,this.SUt=e}EUt(t){var e,i;if(!t)return!1;return(null!=(i=null==(e=this.fMt.dMt())?void 0:e.version)?i:-1)>=2?t.map((t=>t.o)):[t[0].o]}kUt(t){this.PUt=t}sf(){}nf(){}async $d(){this.Aa.$d(),this.lUt()}lUt(){this.fD=Yv.AA,this.hD=!1,this.cD=!1,this.WB=void 0,this.qB=void 0}async bn(){this.lUt(),this.Lo(),this.zot=this.IUt(),this.fMt.pn(QK.eMt,this.sUt),this.fMt.pn(QK.NMt,this.RUt),this.fMt.pn(QK.mv,this.CUt),this.fMt.pn(QK.DMt,this.xUt),this.fMt.pn(QK.BMt,this.DUt),this.fMt.bn()}IUt(){return new nj(this,this.Aa.oLt(),this.Aa.Xl(),this.Aa.Ql(),this.Aa.Yl(),this.Aa.wd(),this.Aa.yd(),this.Aa.Ud(),this.Aa.Md())}constructor(t,e){super(t,!0),this.ao=!1,this.PUt=$d,this.fD=Yv.AA,this.hD=!1,this.cD=!1,this.cUt=!1,this.aUt=void 0,this.WB=void 0,this.qB=void 0,this.EA=new aa,this.PA=new aa,this.xu=new Mt,this.HM=new eu,this.kA=new zf,this.I4=new Uj,this.TUt=void 0,this.SUt=void 0,this.CUt=t=>{var e,i;(it(t.Hd)&&!_e(t.Hd,this.AR,1e-5)||it(t.ld)&&t.ld!==this.LM)&&(this.AR=null!=(e=t.Hd)?e:this.AR,this.LM=null!=(i=t.ld)?i:this.LM,this.To(new Ao(this.zl,this.AR)))},this.xUt=()=>{const t=this.fMt.GMt();this.zot=t?new Nj(this,this.fMt,t,this.Aa):this.IUt()},this.oUt=t=>{this.sM(t.bt),this.nUt(t.QO)},this.DUt=t=>{const e=this.rUt(t.tp);if(!e)return void 0;const i={targetQualityIds:t.MMt};e.fLt(i)},this.sUt=t=>{this.dUt(t.lt)},this.dUt=t=>{this.PUt&&this.PUt(t)},this.RUt=t=>{this.WB=t.lt,this.qB=Kg(this.WB),this.To(new An(this.qB))},this.pUt=t=>{if(!t.enabled)return;const e=this.rt.Ff.some((e=>e.Yf===t.trackId))?this.rt:this.ht;for(const i of e.Ff)i.Ot&&i.Yf!==t.trackId&&(i.Ot=!1)},this.yUt=t=>{if(t.mode===_s.Jn)for(const e of this.nt.Ff)e.h_===_s.Jn&&e.Yf!==t.trackId&&Zw(e.Lt,t.track.Lt)&&(e.h_=_s.Th)},this.SFt=Xn((()=>{this.AUt()}),50),this.mUt=()=>{const t=[];var e;const i=null!=(e=Rt(this.ht.Ff,(t=>Zj(t,this.TUt))))?e:Rt(this.ht.Ff,(t=>t.Ot));var s;i&&t.push(i.Yf);const n=null!=(s=Rt(this.nt.Ff,(t=>Zj(t,this.SUt))))?s:Rt(this.nt.Ff,(t=>t.h_===_s.Jn));n&&t.push(n.Yf);const r=Rt(this.rt.Ff,(t=>t.Ot));r&&t.push(r.Yf),0!==t.length&&this.Aa.gMt(t)},this.Plt=t=>{const e=this.EUt(t.targetQuality),i=t.track;this.fMt.LMt(i.Yf,i.RK,e)},this.TD=t=>{this.To(t);const e=t.readyState;!this.hD&&this.fD===Yv.AA&&e>=Yv.Qn&&(this.hD=!0,this.To(new Wi(t.currentTime))),!this.cD&&this.fD<=Yv.Qn&&e>=Yv.bA&&(this.cD=!0,this.To(new ys(t.currentTime))),this.fD<=Yv.bA&&e>=Yv.TA&&this.To(new ji(t.currentTime)),this.fD<=Yv.TA&&e===Yv.SA&&this.To(new fs(t.currentTime)),this.fD=e},this.AR=this.Ko.Hd,this.LM=this.Ko.ld,this.fMt=e,this.fMt.kn(QK.eMt,this.sUt),this.fMt.kn(QK.NMt,this.RUt),this.fMt.kn(QK.mv,this.CUt),this.fMt.kn(QK.DMt,this.xUt),this.fMt.kn(QK.BMt,this.DUt),this.I6=new br(this),this.jO=this.Ko.bt,this._wt=this.Ko.Nd(),this.zot=new nj(this,0,this.Ko.M4(),this.Ko.Ql(),this.Ko.jl,this.Ko.md,this.Ko.pd,this.Ko.Fd,this.Ko.Od),this.fUt()}},Vj=class extends nu{pa(){return new zj(this.lt)}constructor(t){super("error"),this.lt=t}},zj=class extends Ci{constructor(t){super("error"),this.error=t}},Tn=class extends Ci{constructor(t){super("statechange"),this.state=t}};function Xj(t,e){let i;return{get casting(){return t.Mq},get error(){return t.lt},get receiverName(){return t.NUt},get state(){return t.zot},start(){t.Tn()},stop(){t.$d()},join(){t.BUt()},leave(){t.OUt()},set connectionCallback(t){null==e||e.MUt(t)},get connectionCallback(){return null==e?void 0:e.LUt()},get source(){return i||t.QO},set source(e){i=e,t.QO=e},addEventListener(e,i){const s=Wo(e,ai);t.kn(s,i)},removeEventListener(e,i){const s=Wo(e,ai);t.pn(s,i)}}}var Gj=class extends Ro{get Mq(){return this.zot===ui.CONNECTING||this.zot===ui.CONNECTED}get lt(){return this.WB}get ma(){return this.vf||(this.vf=Xj(this,this.FUt)),this.vf}get NUt(){var t;return null==(t=this.FUt.UUt())?void 0:t.ZMt()}get QO(){return this.Ko?this.Ko.hUt:this.aUt}set QO(t){this.aUt=t?Se(t,this.HUt.Vp):void 0,this.Ko&&(this.Ko.hUt=this.aUt,this.aUt&&this.Ko.Rn(this.aUt))}get zot(){return this.Aa}set zot(t){let e=t;this.WUt||e!==ui.CONNECTING&&e!==ui.CONNECTED||(e=ui.AVAILABLE),this.Aa!==e&&(this.Aa=e,this.To(new Tn(this.zot)))}async qUt(){if(!this.VUt)throw new v("Chromecast must be initialized before starting a session");await this.VUt,this.FUt.UUt()||await this.FUt.zUt()}async Tn(){this.WUt=!0;try{if(this.zot=ui.CONNECTING,await this.qUt(),await this.XUt(),this.Ko){const t=this.HUt.Nd(),e=this.FUt.GUt(t);this.Ko.hUt=e?Se(e,this.HUt.Vp):this.aUt,this.Ko.uUt()}this.zot=ui.CONNECTED,await this.HUt.$d()}catch(t){this.QUt(!1).catch($d),this.zot=ui.AVAILABLE,Lr(t)||this.JZ(t)}}async BUt(){this.WUt=!0;try{if(this.zot=ui.CONNECTING,await this.qUt(),await this.XUt(),this.Ko){const t=this.HUt.Nd(),e=this.FUt.KUt(t);e&&(this.Ko.hUt=Se(e,this.HUt.Vp))}this.zot=ui.CONNECTED,await this.HUt.$d()}catch(t){await this.QUt(!0).catch($d),this.zot=ui.AVAILABLE,Lr(t)||this.JZ(t)}}async jUt(){this.FUt.UUt()&&await this.Tn()}async XUt(){null!=this.Ko||(this.Ko=this.YUt()),this.WB=void 0,this.HUt.Zd(),await this.VW.ZUt(this.Ko)}YUt(){const t=new qj(this.HUt,this.FUt.UUt());return t.kUt(this.JZ),t}JUt(){this.Ko&&(this.Ko.bn(),this.Ko=void 0)}async QUt(t){if(this.WUt=!1,!this.Ko)return;const e=this.Ko.oo,i=this.Ko.Nd(),s=this.Ko.M4();try{if(e){let e;e=t?this.FUt.$Ut(i):this.FUt.tHt(i),null!=e||(e=i),await this.VW.eHt(e,e===i),this.HUt.Gl(s),this.HUt.Jd()}}finally{this.JUt()}}OUt(){this.Mq&&(this.FUt.iHt(!1),this.QUt(!0).catch(this.JZ))}$d(){this.Mq&&(this.FUt.iHt(!0),this.QUt(!1).catch(this.JZ))}bn(){this.FUt.pn(jK.eLt,this.sHt),this.Lo(),this.JUt()}constructor(t,e,i,s){super(),this.WB=void 0,this.vf=void 0,this.Ko=void 0,this.Aa=ui.UNAVAILABLE,this.WUt=!1,this.nHt=()=>{this.FUt.kn(jK.eLt,this.sHt),this.zot=this.FUt.rHt()},this.sHt=t=>{const e=t.zot;this.zot=e,e!==ui.UNAVAILABLE&&e!==ui.AVAILABLE||this.QUt(!1).catch(this.JZ)},this.aUt=void 0,this.JZ=t=>{t instanceof ie&&(this.WB=t,this.To(new Vj(t).ma))},this.VW=t,this.HUt=e,this.FUt=s,this.kx=i.chromecast,this.VUt=this.FUt.JW(this.kx),this.VUt.then(this.nHt).catch(this.JZ)}},Qj=class extends Ro{get Mq(){return!1}get lt(){}get NUt(){}get QO(){}set QO(t){}get zot(){return ui.UNAVAILABLE}get ma(){return this.vf||(this.vf=Xj(this)),this.vf}BUt(){f.Uv("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}OUt(){f.Uv("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}Tn(){f.Uv("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}$d(){f.Uv("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}jUt(){return Promise.resolve()}bn(){}};function Kj(t){return{zl:t.Xl(),ct:t.Ql(),jl:t.jl,lt:t.Zl(),Jl:t.$l(),ld:t.ld,md:t.md,pd:t.pd,Pd:t.Pd,xd:t.xd,Od:t.Od,Fd:t.Fd,Hd:t.Hd}}var jj=class extends Th{K4(){return this.I6}Ol(){return this.EA}get td(){return this.ed()}ed(){return this.kA}Bd(){return this.xu}Ld(){return this.PA}IA(t){const e=this.Ko;if(e===t)return;let i;this.J4&&(e.Nl(this.uf),i=Kj(this));const s=this.Vl(),n=this.Gd(),r=this.Qd();if(this.Ko=t,this.EA.qf=t.ht,this.PA.qf=t.rt,this.xu.qf=t.nt,this.kA.qf=t.td,this.I6.qf=t.Q4,void 0!==i){as(this,i,Kj(this))}const o=this.Vl();o!==s&&this.To(new Hg(o)),this.Gd()!==n&&this.To(new Cu),this.Qd()!==r&&this.To(new Ls),this.J4&&t.Il(this.uf)}async bn(){await super.bn(),this.EA.bn(),this.PA.bn(),this.xu.bn(),this.kA.bn(),await this.I6.bn()}constructor(t,e){super(t,e),this.EA=new aa,this.PA=new aa,this.xu=new Mt,this.kA=new au,this.EA.qf=t.ht,this.PA.qf=t.rt,this.xu.qf=t.nt,this.kA.qf=t.td,this.I6=new br(this),this.I6.qf=t.Q4}},Yj=class extends jj{Nd(){const t=super.Nd();return!t&&this.oHt.Mq&&this.oHt.QO?this.oHt.QO:t}ba(t,e){return this.VV.Bx((e=>(this.hHt=new Zs,this.hHt.wl(e),super.ba(t,this.hHt.fl))),e)}Jd(){super.Jd(),this.Vp.cast.strategy!==Zn.AUTO||this.oHt.Mq||this.oHt.jUt()}ZUt(t){return this.VV.Bx((e=>this.aHt(t,e)))}eHt(t,e){return void 0===t&&(t=void 0),void 0===e&&(e=!1),this.VV.Bx((i=>this.uHt(t,e,i)))}aHt(t,e){gi(e),this.cHt.Q4&&this.cHt.Q4.R6(t.Q4),this.lHt(),this.dHt=Rt(this.cHt.ht.Ff,(t=>t.Ot)),this.Ppt=Rt(this.cHt.nt.Ff,(t=>"showing"===t.h_)),this.fHt=t,this.fHt.bUt(this.dHt,this.Ppt),this.IA(t),this.fHt.Kd()}async uHt(t,e,i){gi(i);const s=this.fHt;if(void 0!==s)try{if(t){await this.cHt.$d(),gi(i);const s=Se(t,this.cHt.Vp);e&&(s.ads=void 0),this.hHt=new Zs,this.hHt.wl(i),await this.cHt.ba(s,this.hHt.fl)}e&&this.cHt.Q4&&s.Q4.R6(this.cHt.Q4)}catch(t){yr(t)}finally{s.jd(),this.IA(this.cHt),this.dHt=Rt(this.fHt.ht.Ff,(t=>t.Ot)),this.Ppt=Rt(this.fHt.nt.Ff,(t=>"showing"===t.h_)),this.cHt.ht.kn(Qs.cf,this._Ht),this.cHt.nt.kn(Qs.cf,this.vHt),this.cHt.kn(En.Sv,this.lHt),this.fHt===s&&(this.fHt=void 0)}}$d(){var t;return this.dHt=void 0,this.Ppt=void 0,this.lHt(),null==(t=this.hHt)||t.vl(),this.VV.Bx((()=>super.$d()))}async bn(){var t;null==(t=this.hHt)||t.vl(),this.oHt.bn(),await this.eHt(),await this.VV.bn(),await super.bn()}constructor(t,e){super(t),this.VV=new xo,this.dHt=void 0,this.Ppt=void 0,this._Ht=t=>{const e=t.Ht;Zj(this.dHt,e)&&(e.Ot=!0)},this.vHt=t=>{const e=t.Ht;Zj(this.Ppt,e)&&(e.h_=_s.Jn)},this.lHt=()=>{this.cHt.ht.pn(Qs.cf,this._Ht),this.cHt.nt.pn(Qs.cf,this.vHt)},this.cHt=t,this.Vp.cast.strategy!==Zn.DISABLED?this.oHt=new Gj(this,t,this.Vp.cast,e):this.oHt=new Qj,this.R4.Vq(this.oHt)}};function Zj(t,e){return void 0!==t&&void 0!==e&&(t.gs===e.gs&&e.jh===t.jh)}var Jj=new class extends d{MUt(t){this.gHt=t}LUt(){return this.gHt}UUt(){return this.mHt}rHt(){switch(this.wHt.getCastState()){case cast.framework.CastState.CONNECTED:return ui.CONNECTED;case cast.framework.CastState.CONNECTING:return ui.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return ui.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return ui.UNAVAILABLE}}async JW(t){await gK(),this.wHt=cast.framework.CastContext.getInstance(),this.wHt.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.zq),this.wHt.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async zUt(){try{const t=await this.wHt.requestSession();if(t)throw t}catch(t){throw new ie(Di(t))}}GUt(t){var e;return null==(e=this.gHt)?void 0:e.onStart(t)}tHt(t){var e;return null==(e=this.gHt)?void 0:e.onStop(t)}KUt(t){var e;return null==(e=this.gHt)?void 0:e.onJoin(t)}$Ut(t){var e;return null==(e=this.gHt)?void 0:e.onLeave(t)}iHt(t){this.wHt.endCurrentSession(t)}constructor(...t){super(...t),this.mHt=void 0,this.gHt=void 0,this.zq=()=>{const t=this.rHt();this.mHt=t===ui.CONNECTED?new ij(this.wHt.getCurrentSession()):void 0,this.To(new sj(t))}}},$j=new class{get ma(){return this.vf||(this.vf=function(t){return{initialize(e){const i=t.JW(o_(e));return i.catch($d),i},startSession(){const e=t.zUt();return e.catch($d),e},endSession(){t.pHt()}}}(this)),this.vf}async JW(t){this.VUt||(this.VUt=this.yHt(t)),await this.VUt}async yHt(t){await this.FUt.JW(t)}async zUt(){if(!this.VUt)throw new v("Chromecast must be initialized before starting a session");await this.VUt,this.FUt.UUt()||await this.FUt.zUt()}AHt(){this.FUt.iHt(!1)}pHt(){this.FUt.iHt(!0)}constructor(t){this.VUt=void 0,this.vf=void 0,this.FUt=t}}(Jj),tY={get chromecast(){return $j.ma}};zD((t=>new Yj(t,Jj)),Dn.i6);var eY=class extends d{get Mq(){return this.zot===ui.CONNECTED}get zot(){return this.Aa}get ma(){return this.vf||(this.vf=function(t){return{get casting(){return t.Mq},get state(){return t.zot},start(){t.ef()},stop(){t.if()},addEventListener(e,i){const s=Wo(e,ai);t.kn(s,i)},removeEventListener(e,i){const s=Wo(e,ai);t.pn(s,i)}}}(this)),this.vf}bHt(){this.THt(),this.llt.kn(r.do,this.SHt),f.Zs.p5&&this.Pa(ui.AVAILABLE)}preloadPlayer(t){if(gi(t),this.Ko.Pd<Yv.Qn){const e=this.Ko.Bl(En.Sv,t);return this.Ko.Sd=Fi.Nm,e}return Promise.resolve()}Pa(t){t!==this.Aa&&(this.Aa=t,this.To(new Tn(this.Aa)))}async EHt(t){await this.preloadPlayer(t),this.VW.ef()}if(){f.Zs.p5&&this.Ko.if()}bn(){this.Lo(),this.llt.pn(r.do,this.SHt),this.kHt.vl()}constructor(t,e){super(),this.vf=void 0,this.Aa=ui.UNAVAILABLE,this.kHt=new Zs,this.handleAirplayChangedEvent=()=>{this.Ko&&this.Ko.rd?this.PHt():this.zot===ui.CONNECTED&&this.IHt()},this.llt=t,this.VW=e}},iY=class extends eY{THt(){this.Ko&&this.Ko.pn(r.E_,this.handleAirplayChangedEvent),this.RHt?this.Ko=this.VW:this.Ko=this.CHt,this.Ko.kn(r.E_,this.handleAirplayChangedEvent)}get RHt(){return this.VW.tf()}async PHt(){if(this.Ko){if(this.RHt){if(!this.Ko.md){const t=new Promise((t=>u(t,800))),e=this.Ko.Bl(r.Ch,this.kHt.fl);await Promise.race([e,t])}this.Ko.Jd()}else{this.xHt=this.VW.zl,this.DHt=this.VW.Hl,this.CHt.kn(r.vv,this.handleAirplayPlayerTimeUpdate),this.NHt=this.VW.qf,this.VW.qf=this.CHt,this.NHt.Zd(),this.NHt.we(),this.CHt.be(),this.CHt.ld=this.NHt.ld,this.CHt.pd=this.NHt.pd,this.CHt.Hd=this.NHt.Hd;const t=this.CHt.Bl(r.ev);this.CHt.zl=this.NHt.zl,await t,this.CHt.Jd(),this.CHt.ld=this.NHt.ld,this.CHt.pd=this.NHt.pd,this.CHt.Hd=this.NHt.Hd}this.Pa(ui.CONNECTED)}}IHt(){if(this.NHt){this.CHt.pn(r.vv,this.handleAirplayPlayerTimeUpdate),this.NHt.ld=this.CHt.ld,this.NHt.pd=this.CHt.pd,this.NHt.Hd=this.CHt.Hd;Bp.mP&&!Bp.xk&&this.VW.ct===1/0?this.DHt?this.NHt.Hl=this.DHt:this.NHt.zl=1/0:this.NHt.zl=this.xHt,this.DHt=void 0,this.xHt=void 0,this.NHt.be(),this.CHt.we(),this.CHt.md||this.NHt.Jd(),this.VW.qf=this.NHt,this.CHt.ir(),this.NHt=void 0}else this.Ko&&(this.Ko.zl=this.Ko.zl+1e-4);this.Pa(ui.AVAILABLE)}ef(){f.Zs.p5&&(this.llt.Yd(),this.kHt.vl(),this.kHt=new Zs,this.RHt?Ui(this.EHt(this.kHt.fl)):Ui(this.BHt(this.kHt.fl)))}async BHt(t){try{await this.CHt.ir();const e=this.VW.Nd();if(void 0===e)throw new v("Not possible to start Airplay without a source");await this.CHt.ba(e,t);const i=this.CHt.Bl(En.Pv,t);this.CHt.Jd(),await function(t,e){return ts((i=>Promise.race([t,ye(e,i).then((()=>{throw new v("Timeout")}))])))}(i,3e3),this.CHt.Zd(),gi(t),this.CHt.ef()}catch(t){if(Lr(t))return;0}}bn(){var t;super.bn(),this.VW.LA(this.CHt),null==(t=this.CHt)||t.bn()}constructor(t,e,i){super(t,e),this.SHt=()=>{var t;const e=null==(t=this.VW.Nd())?void 0:t.sources.filter(Uo);f.Zs.p5&&(null==e?void 0:e.some(pS))?this.Pa(ui.AVAILABLE):this.Pa(ui.UNAVAILABLE)},this.handleAirplayPlayerTimeUpdate=t=>{this.xHt=t.currentTime,this.DHt=this.VW.Hl},this.CHt=i,this.CHt.we(),e.MA(i),this.bHt()}},sY=class extends Ro{nf(){this.OHt.nf()}get ht(){return this.OHt.ht}get Fl(){return this.OHt.Fl}get bt(){return this.jO}get zl(){return this.OHt.zl}set zl(t){this.OHt.zl=t}get Hl(){return this.OHt.Hl}get ct(){return this.OHt.ct}get Se(){return this.Hs}get jl(){return this.OHt.jl}get lt(){return this.OHt.lt}get Jl(){return this.OHt.Jl}get td(){return this.OHt.td}get rd(){return this.OHt.rd}get Xd(){return this.OHt.Xd}get Vd(){return this.OHt.Vd}get hd(){return this.OHt.hd}get ld(){return this.OHt.ld}set ld(t){this.OHt.ld=t}get _d(){return this.OHt._d}get md(){return this.OHt.md}get pd(){return this.OHt.pd}set pd(t){this.OHt.pd=t}get bd(){return this.OHt.bd}get Sd(){return this.OHt.Sd}set Sd(t){this.OHt.Sd=t}get Pd(){return this.OHt.Pd}get Rd(){return this.OHt.Rd}get xd(){return this.OHt.xd}tf(){return this.OHt.tf()}ef(){this.OHt.ef()}if(){this.OHt.if()}get nt(){return this.OHt.nt}get Od(){return this.OHt.Od}get Fd(){return this.OHt.Fd}get rt(){return this.OHt.rt}get Hd(){return this.OHt.Hd}set Hd(t){this.OHt.Hd=t}Jd(){Ui(this.OHt.Jd())}Zd(){this.OHt.Zd()}async $d(){}Nd(){return this._wt}async ba(t,e){let i;if(gi(e),this._wt=t,fo(t.sources))i=cg({src:""});else{const e=t.sources.filter(Uo);for(const t of e)if(pS(t)){i=t;break}}if(!i)throw new v("Unsupported source.");await this.OHt.ba(i,t,e),this.sM(i)}sM(t){this.jO!==t&&(this.jO=t,this.To(new Hg(t)))}Qd(){return this.OHt.Qd()}Ll(){return[]}Yd(){this.MHt.VM()}Kd(t){Ug(this,t)}jd(){}rf(t){return!1}sf(){this.OHt.sf()}async ir(){this.jO=void 0,this._wt=void 0,await this.OHt.ir()}be(){this.OHt.be()}we(){this.OHt.we()}Gd(){return this.OHt.Gd()}async bn(){this.Lo(),this.MHt.bn(),await this.OHt.bn(),this.EA.bn(),this.PA.bn(),this.xu.bn()}constructor(t,e,i,s,n,r){super(),this.jO=void 0,this._wt=void 0,this.EA=new aa,this.PA=new aa,this.xu=new Mt,this.Hs=t,this.MHt=new Rp(n,r,1,[Fs.Rm]),this.MHt.jM(t),this.OHt=new wS(t,this.MHt,e,i,s),this.OHt.Il(this.Rs),this.EA.qf=this.OHt.ht,this.PA.qf=this.OHt.rt,this.xu.qf=this.OHt.nt}},nY=class extends Th{async bn(){this.LHt.bn(),await super.bn()}constructor(t){super(t);const e=new sY(this.E4.Se,this.PD,this.Vp,this.T4,this.x4,this.Cu);this.LHt=new iY(this,this.E4,e),this.R4.Wq(this.LHt),this.kn(r.x_,(()=>{this.LHt.THt()}))}};zD((t=>new nY(t)),Dn.i6);var rY=class{FHt(t){const e=this.VW.Ll(),i=t.createGain();for(const s of e){t.createMediaElementSource(s).connect(i)}return i}get ma(){return this.vf||(this.vf=this.pa()),this.vf}pa(){const t=this;return{createAudioSourceNode:e=>t.FHt(e)}}constructor(t){this.vf=void 0,this.VW=t}};qD((function(t){return class extends t{pa(){const t=this.UHt.ma;return Dh(super.pa(),{get audio(){return t}})}constructor(t,e){super(t,e),this.UHt=new rY(this.E4)}}}),Dn.t6);export{f as a,Bp as b,it as c,ya as d,or as e,Ts as f,ef as g,Eo as h,z as i,Db as j,Nb as k,Bb as l,Ob as m,Fb as n,Ub as o,gO as p,mO as q,no as r,gh as s,Ze as t,F as u,Rt as v,so as w,Yi as x,wr as y,d as z,Ot as A,Cr as B,r as C,mf as D,Dh as E,qi as F,$u as G,Qg as H,Gh as I,_s as J,K,Zw as L,$w as M,Yv as N,ra as O,GD as P,Tg as Q,Ng as R,Pt as S,Lg as T,ri as U,qs as V,jS as W,Je as X,JS as Y,tE as Z,ui as _,vE as $,Ms as aa,wu as ba,Ck as ca,Bk as da,Ok as ea,fh as fa,Fk as ga,Ce as ha,rx as ia,ox as ja,hx as ka,ux as la,cx as ma,lx as na,Dx as oa,Nx as pa,Bx as qa,OD as ra,MD as sa,jD as ta,_N as ua,vN as va,gN as wa,mN as xa,gL as ya,mL as za,wL as Aa,pL as Ba,NU as Ca,BU as Da,gj as Ea,Hj as Fa,tY as Ga};